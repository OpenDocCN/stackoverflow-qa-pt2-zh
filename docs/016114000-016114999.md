# StackOverflow 问答 16114000-16114999

# css - 嵌套媒体查询

> ID：16114000
> 
> 赞同：30
> 
> 时间：2013-04-19T21:48:09.507
> 
> 标签：css, responsive-design, media-queries, retina-display

默认情况下，我想给我的 body 元素一个绿色边框。在支持视网膜显示的设备上，我想先检查尺寸。在 ipad 上，我想给我的身体一个红色边框，在 iphone 上，我想给它一个蓝色边框。但是像这样嵌套媒体查询不起作用：

```
body { border: 1px solid green; }

@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) { 
   @media (max-width: 768px) and (min-width: 320px) {
      body { border: 1px solid red; }
   }
   @media (max-width: 320px) {
      body { border: 1px solid blue; }
   }
} 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-19T21:58:18.220

不，您需要使用`and`运算符并将其编写为两个查询。但是，您可以在 SCSS 中执行此操作，这将编译为 CSS，但它会通过展开它们并使用`and`运算符来组合它们。

这是一个常见的问题，一旦我第一次写 LESS 或 SCSS，我就再也不想回去写这个长手了。

长手CSS：

```
@media (-webkit-min-device-pixel-ratio: 2) and (max-width: 768px) and (min-width: 320px),
                  (min-resolution: 192dpi) and (max-width: 768px) and (min-width: 320px) {
  body {
    border: 1px solid red;
  }
}
@media (-webkit-min-device-pixel-ratio: 2) and (max-width: 320px),
                  (min-resolution: 192dpi) and (max-width: 320px) {
  body {
    border: 1px solid blue;
  }
} 
```

嵌套查询可能有效，但支持因浏览器而异。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-03-16T03:59:30.957

# 2020年，是的！

实际上，接受的答案已经过时了很长时间。即使在发布时，我什至不确定它在技术上是否正确。Firefox 从 2012 年开始支持嵌套，Chrome 从 2013 年开始支持嵌套（[来源](https://developer.mozilla.org/en-US/docs/Web/CSS/@media#Browser_compatibility)）。

**您现在应该期待所有主要浏览器**的支持，当然除了 IE 之外。

您可以使用以下 HTML 和 CSS 对其进行测试。只需在浏览器中打开开发面板并改变视口宽度即可。

```
<div id="abc">Example text</div> 
```

```
#abc {
  background: green;
}
/* width < 801px */
@media (max-width: 800px) {
  #abc#abc {
    background: red;
  }
  /* 500px < width < 801px */
  @media (min-width: 500px) {
    #abc#abc#abc {
      background: yellow;
    }
  }
} 
```

或者，查看[这个 codepen](https://codepen.io/cyqsimon/pen/gOpzmBe)。

# apache-servicemix - 在 karafe 中提供 FAB 功能的正确 URL 是什么？

> ID：16114002
> 
> 赞同：0
> 
> 时间：2013-04-19T21:48:34.843
> 
> 标签：apache-servicemix, fuseesb

在[http://fuse.fusesource.org/bundle/faq.html#How_do_I_enable_FAB_support_in_my_OSGi_container_](http://fuse.fusesource.org/bundle/faq.html#How_do_I_enable_FAB_support_in_my_OSGi_container_)，我们被指示做：

```
features:addUrl mvn:org.fusesource.fuse/fuse-fuse/7.0.1.fuse-084/xml/features
features:install fuse-bundle 
```

在 karafe 启用 FAB。这导致：

```
Could not add Feature Repository:
java.lang.RuntimeException: URL [mvn:org.fusesource.fuse/fuse-fuse/7.0.1.fuse-084/xml/features] could not be resolved.
Please verify that the feature repository URL is correct and that your network connection works fine. 
```

谁能告诉我们我们应该使用什么 URL 以及在哪里可以找到这些信息？此外，更一般地说，在哪里是查找此类文档的官方位置。我没有发现 RedHat 的管理在这方面有很大帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T07:46:39.917

You need to add the maven repository to your Apache Karaf configuration file. See the etc directory, there is a file org.ops4j.pax.url.mvn.cfg where you add the fusesource repo where the FAB distribution is.

Notice that its much easier to use JBoss Fuse or Fuse ESB Enterprise, as they have FAB enabled out of the box.

The repo url is: [http://repo.fusesource.com/nexus/content/repositories/releases](http://repo.fusesource.com/nexus/content/repositories/releases)

So in etc/org.ops4j.pax.url.mvn.cfg file you add this line to the repos in the bottom of the file:

```
http://repo.fusesource.com/nexus/content/repositories/releases@id=fusesource.release.repo, \ 
```

# python - 尝试在一行 if 语句中使用 pass 关键字时出错

> ID：16114003
> 
> 赞同：8
> 
> 时间：2013-04-19T21:48:36.017
> 
> 标签：python

难倒这行得通：

```
if 5 % 2 == 0:
        print "no remainder"
else:
        pass 
```

但不是这个：

```
print "no remainder" if 5% 2 == 0 else pass

SyntaxError: invalid syntax 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-19T21:51:17.330

后者不是一个`if`语句，而是一个表达式（我的意思是，`print`是一个语句，但其余的被解释为一个表达式，它失败了）。表达式具有值。`pass`没有，因为它是一个声明。

您可能将其视为两个语句 ( `print or pass`)，但解释器的看法不同：

```
expr = "no remainder" if 5% 2 == 0 else pass
print expr 
```

第一行是有问题的，因为它混合了一个表达式和一个语句。

单行`if`语句是另一回事：

```
if 5 % 2 == 0: print "no remainder" 
```

这可以称为单行`if`语句。

[PS 三元表达式在官方文档](http://docs.python.org/2/reference/expressions.html#conditional-expressions)中被称为“条件表达式” 。

三元表达式使用您尝试使用的语法，但它需要两个*表达式*和一个条件（也是一个表达式）：

```
expr1 if cond else expr2 
```

它取`expr1`if`bool(cond) == True`和`expr2`else 的值。

# c# - 如果使用 OpenMP，则无法加载 C++/CLI dll

> ID：16114004
> 
> 赞同：0
> 
> 时间：2013-04-19T21:48:46.640
> 
> 标签：c#, .net, visual-c++, c++-cli, openmp

我有一个“无法加载文件或程序集' *** .dll'或其依赖项之一。” 在从 C# 程序调用的 C++/CLI dll 上。我最终将其归结为使用`#pragma omp`指令。如果我删除所有 openmp 指令并构建，则可以加载程序集。一旦我添加了一个 openmp 指令，我就会得到这个异常。当然，编译器选项 openmp 已启用。

这是在使用 .NET 3.5 框架的 Visual Studio 2012 上。我能做些什么来完成这项工作吗？这是必须使用 OpenMP 编译的性能关键代码。顺便说一句，我曾尝试将此代码隔离到一个单独的本机 .lib 中，并将其包含在 C++/CLI 中，但无济于事。

# perl - 我在 Perl 中使用 mkdir。它使目录，但有时它会添加一个？到目录名称的末尾

> ID：16114008
> 
> 赞同：0
> 
> 时间：2013-04-19T21:49:14.057
> 
> 标签：perl, directory, mkdir

这是代码：

```
foreach my $name ( @unique_gene_list ) {
    print "$name\n";
    chomp $name; 

    unless(mkdir $name, 0700) {
        die "Unable to create directory called $name\n";
    }
} 
```

这主要是有效的。出于某种原因，我的一个目录的名称以 ? 结尾。我应该注意到终端窗口中显示的目录名称显示了问号。在查找器中，该目录名称的末尾没有问号。我在 MAC OS 10.7.5 上使用 Perl v.5.12.3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T02:35:05.600

您正在读取的文件有以 CRLF 结尾的行。您正在使用 删除 LF `chomp`，但未删除 CR（由 ^M 表示）。而不是`chomp;`，使用`s/\s+\z//;`.

```
while (<$fh>) {
   s/\s+\z//;
   ...
} 
```

# java - Spring 自动装配让 JMockit 模拟其他测试

> ID：16114011
> 
> 赞同：2
> 
> 时间：2013-04-19T21:49:41.513
> 
> 标签：java, spring, unit-testing, autowired, jmockit

我正在尝试对一个类（比如说“ClassUnderTest”）及其对特定库类的使用（我们称之为“Helper”）进行单元测试。所以我将一个模拟的 Helper 注入 ClassUnderTest 并使用 Expectations 来检查。

```
 public class TestUseOfHelper {
     @Autowired ClassUnderTest classUnderTest;
     @Mocked    HelperClass    helper;
 [...]
     @Before
     public void setUp() throws Exception {
         Deencapsulation.setField(classUnderTest, "helper", helper);
     }
 [...]
     @Test
     public void test() {
         new Expectations() {{
             helper.doSomething(any);
         }};

         classUnderTest.useHelper();
    } 
```

到目前为止，一切都很好。

在其他测试（相同的包，不同的文件）中，我正在测试 ClassUnderTest 的其他方面，我只希望 Helper 做它的事情。

```
 public class TestOtherQualities {
     @Autowired ClassUnderTest classUnderTest;
 [...]
     @Test
     public void test() {
        result = classUnderTest.processSomething();
        assertNonNull(result);
    } 
```

这些测试也可以正常工作。

当我运行测试套件时，问题就出现了。现在，第二组失败了，显然是因为 Mocked Helper 仍然存在！

我假设整个套件正在同一个 JVM 中执行，并且 Spring 已经创建了一个 ClassUnderTest，像它被告知的那样注入模拟，然后只是重用相同的 ClassUnderTest 对象进行下一次测试。我如何将它们分开？如何为每个单独的测试文件获取“新鲜”对象？我没有得到什么/谷歌搜索？

我已经尝试了在 Expectations 块中定义对象的多种变体并使用 @Tested/@Injected 但没有运气。顺便说一句，我避免在其他测试中嘲笑 Helper，因为我需要它来做它的事情。ClassUnderTest 还会自动装配一堆其他对象，而这些对象又会自动装配其他对象，因此模拟 ClassUnderTest 引用的所有内容是不切实际的。

任何见解，哦，知识渊博的 Stack Overflow Magic 8 Ball？（“稍后再试”是不可接受的。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T23:01:47.950

Annotate the test class with

```
@DirtiesContext(classMode = AFTER_CLASS) 
```

if you want to reset the app context between test classes.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T21:55:45.243

这是一个单元测试。所以你根本不应该使用 Spring 来创建和自动装配对象。只需在每次需要时创建一个新的 ClassUnderTest，然后手动注入模拟依赖项：

```
@Before
public void setUp() {
    this.classUnderTest = new ClassUnderTest();
    Deencapsulation.setField(classUnderTest, "helper", mockHelper);
} 
```

注意：我不知道 JMockit，它可能有注释，甚至可以创建一个新的并自动注入模拟依赖项。我回答的重点是 Spring 不应该用于单元测试。这是依赖注入的主要优点：能够创建要测试的对象实例，并且能够手动注入模拟依赖项。

# javascript - Mustache 在 dom 中呈现实际的 HTML 标签？

> ID：16114012
> 
> 赞同：1
> 
> 时间：2013-04-19T21:49:47.990
> 
> 标签：javascript, html, templates, mustache

我有一个简单的 mustache 函数，它可以抓取一个模板，对其进行处理，然后我使用 $().append 将它插入到我需要的位置。

问题是它实际上呈现了 html 标签，而不仅仅是文本。

代替 ：

```
paragraph1...
paragraph2... 
```

它确实（实际上显示了 html 标签）：

```
<p>paragraph1</p>
<p>paragraph2</p> 
```

我的胡子功能：

```
$.get(baseUrl+"js_temp/template.html", function(templates) {
     tab.append(Mustache.render(templates, templateData));
}); 
```

模板.html：

```
<div>
{{content}}
</div> 
```

相当标准的东西......直到大约 2 天前它都运行良好......我无法弄清楚我可以做些什么来导致这种情况。

谁能指出我为什么会发生这种情况的正确方向？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T22:13:53.423

也许尝试使用 3 `{{{content}}}`？

> 默认情况下，所有变量都是 HTML 转义的。如果要呈现未转义的 HTML，请使用三重胡须：`{{{name}}}`。您还可以使用 & 取消转义变量。

我在 git repo 上得到了这个用于小胡子。

# opengl - 如果我不指定着色器，OpenGL 3.x+ 会发生什么

> ID：16114023
> 
> 赞同：1
> 
> 时间：2013-04-19T21:50:45.257
> 
> 标签：opengl, glsl, shader, opengl-4

我正在使用新的核心 OpenGL 4，所以我只使用 VAO 以及顶点和片段着色器。

但是，如果我根本不指定任何着色器怎么办，系统是否提供默认着色器？例如，使用当前 glColor 和 mvp 绘制片段的着色器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T09:02:59.330

在核心配置文件中，禁止不提供着色器。

# javascript - 当javascript触发对话框打开时如何使IE8/9提交输入类型=“文件”

> ID：16114024
> 
> 赞同：6
> 
> 时间：2013-04-19T21:50:46.453
> 
> 标签：javascript, internet-explorer, dom

如果我有某个`input type="file"`地方，并且单击某个链接，它也会触发对文件输入的单击。用户选择一个文件。

在 IE8/9 中，如果用户单击`button type="submit"`第一次单击会清除文件输入中的所有数据，则第二次单击会提交一个空白表单。

如何允许提交`input type="file"`帖子一个 javascript 点击触发器。

一些注意事项：

*   该点击是由于另一个点击事件而触发的。活动内。
*   输入类型=“文件”未设置为显示：无。
*   没有尝试操纵用户输入

想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T15:46:36.747

我一直在努力解决同样的问题，但我还没有找到一个干净的解决方案。

但是，我发现了一种解决方法。请注意，以下解决方案完全无视最佳实践（以我的拙见），如果有人有更好、更符合标准的方法，请在此处发布。

**修复按钮点击事件**

经过大量研究后，似乎很多人都在使用一种技巧，即他们绝对将`<input type="file" />`按钮放在按钮上方，并将不透明度设置为零。这意味着，对于用户来说，他们似乎在点击一个按钮，但浏览器将其视为点击`<input type="file" />`（因此避免了 IE 中提到的问题）。我很惊讶地看到[Quirksmode](http://www.quirksmode.org/dom/inputfile.html)居然推荐了这种方法。

**修复按钮样式**

现在，这确实引入了更多的外观问题；您可能会发现您的按钮不再触发它们的`:hover`和`:active`CSS 伪类（除非您将其`<input type="file" />`放在按钮内部），并且您的鼠标光标可能是默认的鼠标光标，尽管您已将任何 CSS 应用于您的`<input type="file" />`或您的按钮。

使用 JavaScript 解决方法可以轻松修复这些类（我将把它留给您），但光标仍然是一个问题。奇怪的是，您可以`cursor`设置 右侧的`path`样式`<input type="file" \>`，但这不会影响它的`Browse`按钮。不幸的是，这个（现在是透明的）按钮可能会在您的样式按钮的某些部分上方，从而导致默认光标悬停。

为了解决这个问题，我偶然发现了[这个解决方法（](https://stackoverflow.com/questions/1537223/change-cursor-type-on-input-type-file#answer-9182787)[此处](http://jsfiddle.net/gKVKm/36/)为JSFiddle ）。基本上，有人已经将一个事件绑定到他们的按钮事件，并且每次他们将鼠标悬停在按钮上时都将鼠标光标`mousemove`定位在右侧。如果按钮没有固定大小和设置`<input type="file" />`，这可能还需要稍微增强，以阻止从按钮坐标之外单击。`<input type="file" />``overflow: hidden`

**结论**

总的来说，我发现造型`<input type="file" />`不值得。hack 太多了，如果你真的想让 JavaScript 看起来不错，你可能不得不在某些时候使用它（如果你想支持禁用 JavaScript 的人，那就不好了）。我也不知道这对移动设备有何影响。

如果您的目标是支持[Html5 文件 API](https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications)的较新浏览器，请实施 AJAX 拖放上传解决方案（[这](http://www.github.com/weixiyen/jquery-filedrop)是一个不错的解决方案），并完全摆脱`<input type="file" />`。对于那些不支持它的人（旧浏览器和禁用 JavaScript 的浏览器），只需将 unstyled`<input type="file" />`留在那里作为后备。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-08T12:58:59.793

我发现使用[jquery fileupload 扩展名](http://blueimp.github.io/jQuery-File-Upload/)更好。它处理错综复杂的事情比我手动做的要好得多。它基本上完成了 jquery 对 x-browser dom 操作和 ajax 所做的工作，但输入类型 =“file”。

# angularjs - 添加/删除元素时，angularjs ng-repeat列表未更新

> ID：16114035
> 
> 赞同：6
> 
> 时间：2013-04-19T21:51:37.020
> 
> 标签：angularjs

有一个从 rest api 检索到的用户列表。这是模板

```
<div ng:controller="UserController">
    <a ng-click="createUser()">Create User</a>

    <div ng-view>
        <ul>
            <li ng-repeat="user in users">
                 {[{user.first_name}]} {[{user.last_name}]} 
            </li>
        </ul>
    </div>
 </div> 
```

JS：

```
function UserController($scope, User, Group){
    $scope.users = User.query();

    $scope.createUser = function(){

        //$scope.users = null;
        //$scope.users.pop();
        //$scope.users.push(new User({id:'5'}));

        console.log($scope.users);
    }
} 
```

服务：[http ://dpaste.com/1065440/](http://dpaste.com/1065440/)

正确检索并列出了所有用户。问题是我根本无法操纵呈现的列表。无论我做什么推送、弹出或设置为空。该列表不会在模板中更改。然而，最后一条日志语句显示了更改，当用户数组设置为 null 时，它会打印例如 NULL。

任何想法问题出在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T21:55:43.457

您推入数组的对象应该是`User`

```
function UserController($scope, User){

    $scope.users = User.query();

    $scope.createUser = function(){
        $scope.users.push(new User({first_name:'Bob', last_name: 'Schmitt'}));
    }   
} 
```

所以，使用`new User({})`

从我们的谈话来看，问题似乎出在路由上。将相同的外部控制器分配给正在加载到`ng-view`. 删除按钮`ng:controller="UserController"`并将其移动`createUser`到部分将解决问题，但如果确实需要`createUser`从外部调用该方法`ng-view`，则与其相关的所有数据都需要在外部控制器中。因此，您可以保持外部控制器不变，并更改路线以使用空的占位符控制器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T21:55:37.053

确保正在调用 createUser。IE ng-click 什么的。

```
<button type="button" ng-click="createUser()">Create User</button> 
```

您的推送功能看起来是正确的，但是您在 html 中的绑定看起来是错误的。它应该是双大括号。

```
<li ng-repeat="user in users">
    {{user.first_name}} {{user.last_name}}
</li> 
```

添加了我之前在添加对象时使用的示例。

```
<div ng-app="main">
    <div ng-controller="MyCtrl">
        <button ng-click="add()" >Add</button>
        <div id="container">
            <div ng-repeat="test in tests>{{test.name}}</div>
        </div>
    </div>
</div>

$scope.tests = {};

$scope.add = function() {
   var newTest = {name: 'Test Message'};

   $scope.tests.push(newTest);
}; 
```

# php - 将嵌套数组从 json 响应插入 mysql

> ID：16114037
> 
> 赞同：2
> 
> 时间：2013-04-19T21:51:40.687
> 
> 标签：php, mysql, json

我从客户端收到以下 JSON 响应：

```
{
    "name": "Joel",
    "cities_visited": [{
        "city1": "Chicago",
        "city2": "Seattle"
    }],
    "active": true
} 
```

我正在使用`json_decode`来获取结果，但在将 city_visited 作为一组数据插入 mysql 时遇到问题。我也试过`json_decode($json, true)`没有运气。

谁能给我一些见解，如何正确准备这些数据的格式，以便我可以插入到我的数据库中？

我需要以某种方式将这个 city_visited 数组放入 mysql 上的一个条目行，然后能够将其取出并与 json_encode 一样返回

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T21:56:45.200

如果您只有一列`cities_visited`并且需要将多个值放入其中，那么它们需要以某种方式进行序列化。由于您已经在处理 JSON，您不妨将其转回 json 以将其发送到数据库。

```
$user = json_decode($input);
$user->cities_visited = json_encode($user->cities_visited); 
```

类似的东西。虽然这不是最好的解决方案，但您真正想做的是在用户和城市之间建立多对人的关系

# 用户

*   标识（整数）
*   名称（字符串）
*   状态（字符串）

# 城市

*   标识（整数）
*   名称（字符串）

# 访问

*   user_id (int)
*   city_id (int)

因此，在上面的示例数据中，您将在用户表中为 Joel 创建一行，在 City 表中为芝加哥和西雅图创建两行，在 Visits 表中创建两行将它们链接在一起。

这种方法的优点是现在更容易分析数据。假设您想知道访问次数最多的城市是什么？简单地

```
select count(*) AS number_visits, name as city_name
from Visits v 
join Cities c on v.city_id = c.id
group by v.city_id
order by visits
limit 1 
```

如果该`cities_visited`字段在数据库中被序列化，您必须使用 PHP 遍历每个用户并自己计算结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T21:54:33.953

由于您正在处理一个数组，您可以尝试在将结果存储到数据库之前对其进行序列化。然后在检索它时对其进行反序列化。

见： http: [//php.net/manual/en/function.serialize.php](http://php.net/manual/en/function.serialize.php)

# asp.net - 如何禁用/覆盖命名容器的 ID 生成内容页面的控件 ID

> ID：16114040
> 
> 赞同：8
> 
> 时间：2013-04-19T21:51:49.317
> 
> 标签：asp.net, master-pages

我们有一个现有的 ASP.Net Web 应用程序，我们希望将其转换为使用母版页。在执行此操作的过程中，我发现为 HTML 元素生成的 HTML id 以 ContentPlaceHolder 的 id 为前缀。这就是我们设置 ContentPlaceHolder 的 clientidmode=static 时可以预料到的。现在，由于我们有很多使用 id 的现有客户端脚本，所以当我们使用母版页时，这部分会中断，并且运行所有的 javascript 以确保我们使用 Control.ClientID 调用 javascript 是一项艰巨的工作，因为很多都是硬编码的。

有没有办法禁用前缀？如果我创建每个控件设置其 ClientIdMode=static，我可以成功执行此操作，但我更喜欢设置一次，以确保所有控件都具有其 ClientIdMode=static。那可能吗？或者是否可以覆盖 ContentPlaceHolder 的 NamingContainer？

该平台是.Net 4.0

（在 web.config 中使用 ClientIdMode=static 解决上述问题后，如下面的答案所述），我遇到了自动生成“name”属性的问题，并且没有设置为我介绍之前的任何内容母版页。这给我现有的服务器代码带来了问题，它有很多 Request.Form[]。知道解决这个问题的最佳实践是什么吗？

感谢圣战

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-19T22:11:53.770

您可以`ClientIDMode`在页面级别：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" ClientIDMode="Static" %> 
```

母版页级别：

```
<%@ Master Language="C#" AutoEventWireup="true" CodeFile="MasterPage.master.cs" Inherits="MasterPage" ClientIDMode="Static" %> 
```

和 Web.Config 级别（使所有页面都继承此行为）：

```
<system.web>
    <compilation debug="true" targetFramework="4.0"/>
    <pages clientIDMode="Static"></pages>
</system.web> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-12T21:20:44.117

如果您不以 .Net 框架 4 为目标，并且 clientIDMode 枚举不可用，则可以简单地覆盖控件类。这是 HtmlGenericControl 的示例，但可以使用任何其他控件完成：

```
public class NoNamingContainerControl : HtmlGenericControl
{
    public NoNamingContainerControl(string tag) : base(tag) { }
    public override string ClientID
    {
        get
        {
            return this.ID;
        }
    }
} 
```

此代码应适用于任何 .Net 框架版本，尽管在 .net 4 中您可能应该使用 clientIDMode

# java - 检测树中的节点是否有子节点或子节点已被访问

> ID：16114041
> 
> 赞同：0
> 
> 时间：2013-04-19T21:51:54.240
> 
> 标签：java

我正在努力解决检测树中节点是否存在或已被访问的逻辑。

我有一棵带节点的树（一个节点有一个左右子节点）。

我想检查一个节点上的两件事：如果没有子节点如果有子节点我想检查它们是否被访问过。

我目前有一个很大的条件，我讨厌它的样子。有没有办法可以简化它？

```
public boolean finished(){
      return right == null && left == null || ((right != null && right.visited && (left != null && left.visited))
} 
```

我想`finished()`是真的：如果一个左右节点不存在如果一个右节点存在并且已经被访问如果一个左节点存在并且已经被访问

我想我也需要一个`OR`所以如果存在一个权利，那么`AND`访问的`AND`左边是空的

我有点困惑：S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T21:59:57.393

我想这可能是你所追求的

```
if( (right == null || right.visited) && ( left == null || left.visited) ) 
```

因此，对于每个子节点，如果它是空的或已被访问过，那么你就完成了。

这涵盖了案例

```
Right == null; Left == null; 
Right == null; Left.visited; 
Right.visited; Left == null; 
Right.visited; Left.visited; 
```

我认为鉴于描述是您想要检查的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T22:04:44.290

“已访问”的最简单方法是在您的节点中放置“已访问”标志。重置所有标志以开始，然后进行树遍历并在访问它们时设置标志。

为避免在每次使用后都必须重置“已访问”标志，请将“标志”设为整数，并保留一个全局计数器，每次您在需要访问标志的地方进行扫描时，该计数器都会递增：

```
boolean haveVisited() {
   return visitedFlag == globalVisitedCounter;
}

void markVisited() {
   visitedFlag = globalVisitedCounter;
} 
```

理论上，您确实需要有逻辑来扫描树中的所有节点并在全局计数器换行时重置它们，但实际上通常不需要这样做。

# c# - 面向方面编程的替代方案

> ID：16114048
> 
> 赞同：4
> 
> 时间：2013-04-19T21:52:43.637
> 
> 标签：c#, .net, aop

有没有使用面向方面编程注入重复代码的替代方法。假设我们有一个包含许多属性的类，如果一个属性的值发生了变化，我们希望记录下来。

```
class Person 
{
 public string Name
 {
    get{return name;}
    set
    { 
      name = value;
      LogPropertyChanged("Name");
    }
  }

  public int Age
  {
    get{return age;}
    set
    { 
      age = value;
      LogPropertyChanged("Age");
    }
   }      
} 
```

如果不使用面向方面的编程，您将如何摆脱重复性代码，如安全检查、日志记录和类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T14:45:53.420

你总是可以做这样的事情

a）在您的对象的某些父类上

```
protected void SetProperty<T>(Expression<Func<T>> exp, T value)
{
    MemberExpression body = (MemberExpression)exp.Body;
    //set the actual value
    (body.Member as FieldInfo).SetValue(this, value);

    //do some logging, locking, etc. with the field name
    string fieldName = body.Member.Name;
} 
```

b) 在你的对象上

```
private int age;
public int Age
{
    get
    { 
        return age; 
    }
    set
    {
        SetProperty(() => age, value);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T16:43:18.953

您始终可以创建自己的代码片段来简化此类重复代码模式的创建。周围有不同的免费代码片段编辑器。我正在使用[Snippy](http://snippy.codeplex.com/)。在对 SO 上的另一个问题的回答中，我正在解释这样一个代码片段（它为 INotifyPropertyChanged 接口创建属性）：[https ://stackoverflow.com/a/8317280/880990](https://stackoverflow.com/a/8317280/880990)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T23:44:09.007

几个月前，我也在寻找一种方法来做到这一点。这是我做过的一些研究。

这个想法是做一个静态初始化程序，它将通过反射引导和注入 MSIL 代码（例如，在运行时包装函数以进行日志记录）。postsharp 中已经有类似的概念，但这是不适合我的环境的许可软件。

以下这些链接可以帮助您入门。

[http://www.codeproject.com/Articles/37549/CLR-Injection-Runtime-Method-Replacer](http://www.codeproject.com/Articles/37549/CLR-Injection-Runtime-Method-Replacer) [http://msdn.microsoft.com/en-us/library/h0x241a0.aspx](http://msdn.microsoft.com/en-us/library/h0x241a0.aspx)

[http://msdn.microsoft.com/en-us/library/aa288454(v=vs.71).aspx#vcwlkattributestutorialanchor3](http://msdn.microsoft.com/en-us/library/aa288454(v=vs.71).aspx#vcwlkattributestutorialanchor3)

它确实突破了 .net 平台的界限，我还没有开始为我的工作实施它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T01:30:59.247

我认为如果没有第三方工具（对于一般的 AOP），你能做的最好的事情就是**装饰器模式**，但我不确定这是否会对`INotifyPropertyChanged`模式有很大帮助。Filip 的答案（或类似的答案）可能是您现在在 C# 中可以做的最好的。

据我所知，您的团队政策似乎非常严格和严厉，但从另一个角度来考虑您的团队政策中可能存在的“漏洞”：有一个[称为 Fody 的 IL 操作框架](https://github.com/Fody/Fody)，它有许多插件（其中一个其中处理`INotifyPropertyChanged`，称为[PropertyChanged.Fody](https://github.com/Fody/PropertyChanged)）。在构建过程中，Fody 会修改您编译的程序集，但*生成*的程序集（即您发布的代码）不依赖于 Fody 或插件（与您必须发布 PostSharp 的 PostSharp 或 Castle DynamicProxy 不同）。 dll 或 Castle.Core.dll 与您的项目）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-20T16:53:07.043

如果您不想使用外部运行时框架，您可以使用**[模型驱动方法](http://en.wikipedia.org/wiki/Model-driven_architecture)**- 您有一个计算机可读格式的业务模型（即 xml oder 使用数据库定义）并有一些代码生成器来生成所需的源代码使用代码模板的模型。

dotnet-typed-datasets 是基于模型的编程的一个示例。c# dataset-sourcecode 是从 xsd-dataset-model 生成的。

[mygeneration](http://www.mygenerationsoftware.com/portal/default.aspx)是一个可以使用模板从数据库模型中生成源代码的软件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-19T21:57:23.667

好吧，您当然可以自己实现所有这些，但话又说回来，为什么要重新发明轮子？除了编译时的注入代码之外，您实际上无能为力。

# extjs - 面板中的选项卡面板

> ID：16114049
> 
> 赞同：1
> 
> 时间：2013-04-19T21:52:47.050
> 
> 标签：extjs, sencha-touch, sencha-touch-2

我正在尝试在我的面板中放置一个 TabPanel。TabPanel 出现，但功能已损坏。它同时显示两个选项卡的内容，单击不同的选项卡不会执行任何操作。这就是我添加标签面板的方式

```
var tabPanel = 
        Ext.create('Ext.TabPanel', {
            fullscreen: true,
            layout: 'fit',
            defaults: {
                styleHtmlContent: true
            },

            items: [
                {
                    title: 'Home',
                    html: 'Home Screen'
                },
                {
                    title: 'Contact',
                    html: 'Contact Screen'
                }
            ]
        });
this.add([ topToolbar, tabPanel, bottomToolbar ]); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T22:38:29.447

解决了它丢失

```
fullscreen: true, 
```

# jquery-mobile - 使用 jQuery Mobile 以编程方式打开一个对话框作为弹出窗口

> ID：16114053
> 
> 赞同：5
> 
> 时间：2013-04-19T21:53:01.947
> 
> 标签：jquery-mobile

所以我有一个页面和一个对话框。当用户单击页面按钮时，一个 AJAX 请求将打开带有结果的对话框。类似没有 AJAX 的简单示例：http: [//jsfiddle.net/rBBpx/](http://jsfiddle.net/rBBpx/)

有用。对话框以编程方式打开。但它隐藏了页面内容，显示对话框，就好像它是另一个页面一样。我知道弹出窗口可以打开带有链接的页面内对话框，但我没有明白如何以编程方式做到这一点。我试图改变对它的`$.mobile.changePage()`调用，但它没有像我预期的那样工作：

```
$('#dialog').popup();
$('#dialog').popup('open'); 
```

如何在页面内显示该对话框作为弹出窗口？有可能吗？先感谢您！

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2015-04-07T22:28:45.273

如果您使用 phonegap，有一个警报插件：[http ://docs.phonegap.com/en/edge/cordova_notification_notification.md.html](http://docs.phonegap.com/en/edge/cordova_notification_notification.md.html)

```
navigator.notification.alert("your AJAX result here"); 
```

# iphone - UIPickerView selectRow:inComponent:animated 在 vi ewDidLoad 中不起作用但在 viewDidAppear 中起作用

> ID：16114054
> 
> 赞同：2
> 
> 时间：2013-04-19T21:53:04.837
> 
> 标签：iphone, ios, ipad, uipickerview

这个问题快把我逼疯了。我有一个在 viewDidLoad 中加载的 UIPickerView，我需要初始化要出现在屏幕上的选定行。我的代码如下：

```
self.pickerSkins.delegate = self;
[self.pickerSkins reloadAllComponents];    
NSLog(@"%d", [self.pickerSkins numberOfRowsInComponent:0]);
[self.pickerSkins selectRow:1 inComponent:0 animated:NO]; 
```

我已经把它放在 viewDidLoad 中。NSLog 记录的值为 2。但是，弹出的选定行始终是第一行而不是第二行。

如果我将 selectRow 放在 viewWillAppear 中，它也不起作用。

如果我将 selectRow 放在 viewDidAppear 中，则会出现 PickerView，然后转到第二行。

更新：如果我有超过 2 行，该方法从 viewDidLoad 正常工作，除非我滚动到最后一行。如果我滚动到最后一行，该方法永远不会在 viewDidLoad 或 viewWillAppear 中工作。知道这是为什么吗？谢谢。

在视图出现之前，如何使选定的行成为第二行？

谢谢。

# java - Java：找不到符号：变量对象

> ID：16114058
> 
> 赞同：4
> 
> 时间：2013-04-19T21:53:33.793
> 
> 标签：java, object, equals, javac, hashcode

我通过 netbeans insercode 生成了方法 hashCode() 和 equals(Object obj)。在 netbeans 中我可以毫无错误地编译，但是当我在我的服务器上使用 javac 编译它时：

```
bangserver/Login.java:3: cannot find symbol
symbol  : class Objects
location: package java.util
import java.util.Objects;
                ^ 
```

以及对象的其他错误...

```
public int hashCode() {
    int hash = 5;
    hash = 47 * hash + Objects.hashCode(this.password);
    return hash;
} 
```

你们认为他找不到 java.util.Objects 应该是什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T21:54:11.827

看起来您正在使用早于 Java 7 的 Java 版本进行编译，因为`java.util.Objects`仅在 Java 7 中添加。

# android - 使用相对布局将按钮包裹在顶部和中间

> ID：16114063
> 
> 赞同：0
> 
> 时间：2013-04-19T21:53:53.357
> 
> 标签：android, xml, layout

我想要一个类似于

![所需布局：](https://i.stack.imgur.com/iPBjx.png)

有点内疚，因为我最近刚问了一个关于布局的问题，但我不知道我需要这样做（我也不知道这很难），我研究了 View Layouts 并尝试过使用`layout.toRightOf`等。我有左/右箭头，我只需要添加向上和向下按钮

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:game_view="http://schemas.android.com/apk/res/pap.crowslanding"
android:layout_width="fill_parent"
android:layout_height="wrap_content" >

<FrameLayout
    android:id="@+id/flayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_above="@+id/button1"
    android:orientation="vertical" >

    <pap.crowslanding.GameView
        android:id="@+id/game_view"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        game_view:ballDiam="@dimen/ballDiam"
        game_view:cellWidth="@dimen/cellWidth"
        game_view:pixelHeight="@dimen/pixelHeight"
        game_view:pixelWidth="@dimen/pixelWidth" />

    <pap.crowslanding.MazeBall
        android:id="@+id/mazeball"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:visibility="invisible"
        game_view:ballDiam="@dimen/ballDiam"
        game_view:cellWidth="@dimen/cellWidth" />
</FrameLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/button1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="@string/right" >
    </Button>

    <Button
        android:id="@+id/button2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="@string/down" />
</LinearLayout>

</RelativeLayout> 
```

所以本质上，只是对如何在同一布局中添加向上和向下按钮的一些见解，以避免布局绘制到我的活动上并重叠

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T21:55:52.007

似乎您所有的按钮图像都具有相同的高度，那么为什么不使用 a`TableLayout`呢？保持左上角和右上角的单元格为空，并在其他单元格中放置您的按钮。

代码（省略变量）：

```
<TableLayout>
    <TableRow>
        <View />
        <Button>...</Button>
        <View />
    </TableRow>
    <TableRow>
        <Button>...</Button>
        <Button>...</Button>
        <Button>...</Button>
    </TableRow>
</TableLayout> 
```

# java - Java二进制搜索不起作用

> ID：16114064
> 
> 赞同：0
> 
> 时间：2013-04-19T21:53:58.393
> 
> 标签：java, search, binary, insertion-sort

我在 main 中有一个插入搜索，然后我调用 BinarySearch 方法来搜索数组中已经排序的数字。我尝试编译它我得到错误这里是我的主要插入排序。

```
public class test5
{
 public static void main(String[] args)
 {

// original order or numbers
System.out.println("Original order of numbers:");
int nums[] = {26, 45, 56, 12, 78, 74, 39, 22, 5, 90, 87, 32, 28, 11, 93, 62, 79, 53, 22, 51};

for(int x = 0; x < nums.length; x++){
System.out.print(nums[x] + " ");
}

// local variables
int unsortedValue; // The first unsorted value
int scan; // used to scan the array
int swapCount = 0;

// the other loop steps the index variable through 
// each subscript in the array, starting at 1\. This
// is because element 0 is considered already sorted.
for(int index = 1; index < nums.length; index++)
{
    // The first element outside the sorted subset is
    // nums[index]. Store the value of this elementt
    // in unsortedValue.
    unsortedValue = nums[index];

    // Start the scan at the subscript of the first element
    // into its proper position within the sorted subset.
    scan = index;

    // Move the first element outside the sorted subset
    // into its proper position within the sorted subset.
    while(scan > 0 && nums[scan-1] > unsortedValue)
    {
        nums[scan] = nums[scan -1];
        scan--;

    }

    // Insert the unsorted value in its proper position
    // within the sorted subset.
    nums[scan] = unsortedValue;
    swapCount++;
        }

    //  print out results of swap and swapCount
    System.out.println();
    System.out.println("Insertion sort: ");

    for(int index = 0; index < nums.length; index++){   
            System.out.print(nums[index] + " ");
                        }

    System.out.println();
    System.out.println("The swap count is: " + swapCount);
    BinarySearch(nums);
    } 
```

这是二分查找的方法

```
public static int BinarySerach(String[] array, String value)
{
Scanner keyboard = new Scanner(System.in);

System.out.print("Enter target: ");
int target = nums.nextInt();
int index = -1;
int left = 0;
int right = nums.length - 1; 
int middle;
while(left <= right){
    middle = (left + right)/2;
    if(nums[middle] == target){
        index = middle;
        break;
    } else if (nums[middle] > target) {
        right = middle - 1;
    }else{
        left = middle + 1;
    }
}
if(index == -1){
    System.out.println("element not found");
}else{
    System.out.println("element found at index " + index);
    }
} 
```

}

我得到的错误是找不到符号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T22:02:21.297

您已经`nums`在方法中本地声明了您的数组`main`，因此在其他任何地方都无法访问它，例如您的`BinarySearch`方法。范围仅在`main`方法内。

在所有方法之外声明它`static`，以便可以从任何方法访问它：

```
public class test5
{
    static int nums[] = {26, 45, 56, 12, 78, 74, 39, 22, 5, 90, 87, 32, 28, 11, 93, 62, 79, 53, 22, 51};

    public static void main(String[] args)
    {
    ... 
```

此外，

*   您不能调用`nextInt`( `int[]`nums)。看起来您打算在`Scanner`对象上调用它：`int target = keyboard.nextInt();`
*   您没有使用任何参数来`BinarySearch`- 删除它们。还要删除`nums`您对`BinarySearch`.
*   这里可能是一个错字，但是你在这里声明了你的方法`BinarySerach`而不是`BinarySearch`.
*   你没有从你的`BinarySearch`方法返回任何东西，但你也没有将该方法的返回分配给任何东西；只需制作返回类型`void`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-03-26T15:40:58.967

```
import java.io.*;
class BinarySearch{
public static void main(String args[])throws IOException{
InputStreamReader isr=new InputStreamReader(System.in);
BufferedReader br=new BufferedReader (isr);
int a[]={7, 10, 12, 34, 45,51, 60, 78, 81, 92};
int key, low=0, high=a.length-1, mid=0;
System.out.print("Enter the integer to search:");        key=Integer.parseInt(br.readLine());
while(low<=high){
mid=(low+high)/2;
if (key==a[mid])
break;
else if(key<a[mid])
high=mid-1;
else
low=mid+1;
}
if(low<=high)
System.out.println(key+" found at index "+mid);
else
System.out.println(key+" not found");
}
}`` 
```

# jquery - 注册表 - jQuery Mobile

> ID：16114066
> 
> 赞同：1
> 
> 时间：2013-04-19T21:54:03.030
> 
> 标签：jquery, forms, jquery-mobile

我正在编写我的第一个 jQuery Mobile 应用程序（如果这是一个愚蠢的问题，我很抱歉），我想创建一个注册表单，以留住应用程序的用户。

例如，在纯 HTML 中，我使用 XAMPP 设置了一个本地服务器，这可以很容易地完成，方法是使用 PHP 从 HTML 表单中获取数据，然后将用户插入数据库。

现在在一个移动应用程序中，使用 jQuery Mobile 我该如何实现这个？我的意思是我应该使用什么？PHP 和本地服务器再次？

我问是因为我在网上搜索了很多，但我找不到特别适用于 jQuery Mobile 的东西，我很困惑。

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T22:14:40.180

这取决于。你的问题有点不清楚，但如果你只是想构建一个移动 Web 应用程序，你可以使用你想要的任何 Web 开发堆栈，就像你习惯的那样。这是 jQuery Mobile[入门](http://learn.jquery.com/jquery-mobile/getting-started/)文档的链接。

如果您尝试使用 jQuery mobile 构建本机移动应用程序，则需要将 JQM 与[Phonegap / Apache Cordova](http://phonegap.com/about/)等框架配对。

# r - 如果条件为 TRUE，则插入非字符

> ID：16114071
> 
> 赞同：1
> 
> 时间：2013-04-19T21:54:33.623
> 
> 标签：r, street-address

在这种情况下，如果满足特定条件，是否可以插入非字符？

例如：如果有五个数字字符 (12345)，则在第二个数字字符 (12-345) 之后插入 -。

我正在尝试修复街道地址。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T21:59:00.127

```
s = "abc 12345 def"
sub("([0-9]{2})([0-9]{3})", "\\1-\\2", s)
# "abc 12-345 def" 
```

这将找到连续 5 个数字的第一个实例，并在第二个数字后添加一个“-”。有关 R 正则表达式语法，请参阅[http://stat.ethz.ch/R-manual/R-patched/library/base/html/regex.html](http://stat.ethz.ch/R-manual/R-patched/library/base/html/regex.html)。

# jquery - 谷歌地图集成减轻了下面的文字吗？

> ID：16114075
> 
> 赞同：0
> 
> 时间：2013-04-19T21:54:39.817
> 
> 标签：jquery, html, css, google-maps

编辑：这似乎是我的一个问题，至少我无法使用 Chrome / Safari 在我的 Mac OS 设置之外复制它。

我在[这个网站](http://garten-moorriem.de/besuchen)上使用谷歌地图，它似乎减轻了它下面的所有文本（不确定其他元素）。上面的导航似乎没有受到影响。

[将“h2”“Besuchen Sie uns”与其他页面](http://garten-moorriem.de/workshops)上的“h2”进行比较时，您可以看到最好的结果。

实际上，您甚至可以在加载页面时看到它。在谷歌地图开始加载之前的一瞬间，文本具有原始样式。

现在，我真的无法解释这一点，也没有找到任何关于它的信息。诚然，我对谷歌地图没有太多经验，我做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T22:02:07.257

两个标题都计算了 font-weight:300 和 color:#414141 以及 Chrome 上相同的计算字体系列，并且似乎没有任何谷歌地图引入了与它们匹配的样式规则。

地图集成页面上的标题似乎与地图重叠，但似乎没有任何 z-index 问题。

# javascript - 如何动态更新 raphael Text

> ID：16114077
> 
> 赞同：1
> 
> 时间：2013-04-19T21:54:48.203
> 
> 标签：javascript, jquery, raphael, graphael

我正在绘制基于 Raphael 形状和文本的流程图。在页面加载时，我绘制了带有文本的 rapahel 形状。这段文字是一些状态。发生了一些正在改变状态的后台处理。现在我想通过单击按钮更新此状态（这是 raphael 形状内的 rapahel 文本），而无需再次重绘流程图形状。即我只想更新形状内的文本。这里形状和文本都在数组中。我正在使用 json 来获取状态。

有关代码和流程图，请参阅以下 stackoverflow 问题。我正在寻找一个指针来实现这一点。由于服务器端脚本依赖，我无法获取整个代码

[如何避免Rapahel js路径重叠](https://stackoverflow.com/questions/14718943/how-to-avoid-overlapping-of-rapahel-js-path)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T07:35:09.873

假设`raphText`您的 RaphaelJS 文本元素引用`raphText.attr("text", "new status");`将更改文本内容。

有关更多信息：请查看[http://raphaeljs.com/reference.html#Element.attr](http://raphaeljs.com/reference.html#Element.attr)。

# css - 更改焦点选择框选项的背景颜色不起作用

> ID：16114081
> 
> 赞同：0
> 
> 时间：2013-04-19T21:54:58.737
> 
> 标签：css, focus, drop-down-menu

这是专门与 selectBoxIt jQuery 插件，使用 jQueryUI 主题。

我为悬停动作设置了这个：

```
/* Individual Option Hover Action */
.selectboxit-option .selectboxit-option-anchor:hover {
  color: #ffffff;
  background-color: #ff0000;
  text-decoration: none;
} 
```

这很好用。当我将鼠标悬停在选项上时，我会看到带有白色文本的红色背景。

但是，当我这样做时...

```
.selectboxit-option:focus .selectboxit-option-anchor:focus  {
  color: #ffffff;
  background-color: #ff0000;
  text-decoration: none;
} 
```

...没有什么变化。

我看到 selectBoxIt 的主网页上的所有演示都通过键盘焦点改变了背景颜色......所以我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T23:17:46.807

从技术上讲，每个选项都不使用焦点事件，这就是焦点伪选择器不适合您的原因。对于 jQueryUI 主题，“active”选项添加了 ui-state-focus 类，因此要更改“focus” CSS 样式，您可以有这样的规则：

```
.selectboxit-option.ui-state-focus {
  background: #CCC;
} 
```

# python - Prettytable 0.7.2 HTML 表格不工作

> ID：16114082
> 
> 赞同：1
> 
> 时间：2013-04-19T21:55:01.220
> 
> 标签：python, python-2.7

所以，我试图让 Prettytable 0.7.2 与 HTML 表一起工作。我似乎无法让它工作。我正在使用以下内容：

```
from prettytable import from_html
html = "<table><tr><th>h1</th></tr><tr><td>v1</td></tr></table>"
table = from_html(html)
print (table) 
```

结果是：

```
[<prettytable.PrettyTable object at 0x90556ec>] 
```

我可以使用其他方法使表格工作，但我似乎无法处理 HTML 表格方法。我不确定我是做错了什么还是遗漏了什么。如果有人能对这个问题有所了解，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T21:59:35.397

问题是，`table`不是 PrettyTable 对象，而是[包含单个 PrettyTable 对象的列表](http://code.google.com/p/prettytable/wiki/Tutorial#Building_from_HTML_code)。

调用该函数将返回一个列表，其中包含在您的 html 字符串中遇到的`from_html`每个标记一个 PrettyTable 。`table`

你想做：

```
print table[0] 
```

返回：

```
+----+
| h1 |
+----+
| v1 |
+----+ 
```

# css - 如何将 wp 模板链接到不同的样式表

> ID：16114083
> 
> 赞同：1
> 
> 时间：2013-04-19T21:55:05.423
> 
> 标签：css, wordpress, hyperlink, stylesheet

我正在尝试将自己的样式表链接到 wordpress 主题内的自定义页面。我在 header.php 上使用此代码

> /my-own-styles.css" />

我在这段代码中做了 2 处更改：'my-template.php' 和 'my-own-styles.css' 仅此而已。（我是否也需要更改“template_directory”？）

在主题目录中我有'my-own-styles.css'，但它似乎没有得到它。

我还需要它来获取我放在同一目录中但不起作用的 .js 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T13:30:43.797

要将 wordpress 中的任何页面与 css 文件链接，只需在 header.php 中添加此代码

```
<link rel="stylesheet" href="<?php bloginfo('template_url'); ?>/css/yourfile.css" type="text/css" media="screen" /> 
```

其中 css 是主题目录中的一个文件夹。您也可以直接使用带有路径的代码到您的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T22:04:41.190

在 WordPress 中，您需要将 javascript 和 css 包含到 wp_enqueue_scripts 操作上，并告诉 WordPress 使用[wp_enqueue_style](http://codex.wordpress.org/Function_Reference/wp_enqueue_style)和[wp_enqueue_script](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)函数加载它们。

在您的 functions.php 文件或将在模板文件之前加载的任何其他文件（例如插件）中，添加以下内容：

```
add_action('wp_enqueue_scripts' , 'enqueue_my_scripts_and_styles');
function enqueue_my_scripts_and_styles() {
    wp_register_style('my-own-styles.css',home_url('/').'wp-content/themes/**yourthemename**/my-own-style.css');
    wp_enqueue_style('my-own-styles.css');

    wp_register_script('my-own-js.js',home_url('/').'wp-content/themes/**yourthemename**/my-own-js.js');
    wp_enqueue_script('my-own-js.js');

} 
```

有更好的方法来创建文件的路径，但我想提供一个更明显的示例。对于最佳实践，请使用 get_template_directory_uri() [http://codex.wordpress.org/Function_Reference/get_template_directory_uri](http://codex.wordpress.org/Function_Reference/get_template_directory_uri)

# jquery - jQuery mobile：ajax 表单提交 + 禁用输入键提交表单

> ID：16114084
> 
> 赞同：0
> 
> 时间：2013-04-19T21:55:19.033
> 
> 标签：jquery

我正在尝试学习一些 jQuery Mobile 准备一个小表单，我想禁用输入键来提交表单。

这是我尝试过的：

```
$('#form').submit(function(e) {
                    e.preventDefault(); // don't submit multiple times
                    this.submit(); // use the native submit method of the form element
                    $('#field').val(''); // blank the input
                });

// Validate and submit form

$("#page").live("pageinit", function () {
                $("#form").validate({
                        submitHandler: function(form) {
                                // do other stuff for a valid form
                                $.post('insert.php', $("#form").serialize(), function(data) {
                                        $('#results').html(data); 
```

但是每次我按下输入时，表格都会提交......

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:22:27.763

我已经通过这种方式解决了（我的页面中没有复选框）：

```
$(document).bind('pageinit', function () {
                $('input,select').keypress(function(event) { return event.keyCode != 13; });
                }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T22:40:29.817

我不太喜欢这个解决方案，但我认为你应该尝试这样的事情。

```
function EnterPressed(event){
    if (event && event.keyCode === 13) {
       if (event.target.id === "form") {
           event.stopPropagation();
       }
    }
} 
```

# javascript - 我无法让鼠标工作

> ID：16114091
> 
> 赞同：0
> 
> 时间：2013-04-19T21:56:06.397
> 
> 标签：javascript, jquery

所以我有这个功能来防止侧边栏悬停时身体滚动。问题是，我无法让 mouseout 功能正常工作。

```
var currentScroll=0;
function lockscroll(){
    $(window).scrollTop(currentScroll);
}

$(document).ready(function (){

        $(".sidebarholder, .commentswrapper").hover(function (){
            currentScroll=$(window).scrollTop();
            $(window).bind('scroll',lockscroll);

        })  

}) 
```

我的问题是，如何在鼠标悬停时解除绑定？

如果我这样做，它就会完全停止工作。

```
 $(".sidebarholder, .commentswrapper").mouseout(function(){
        currentScroll=$(window).scrollTop();
        $(window).unbind('scroll');

    }) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T21:58:36.407

jQuery`hover()`内置了“悬停”，这可能会有所帮助：

```
 $(".sidebarholder, .commentswrapper").hover(
     function (){ // hover over
       currentScroll=$(window).scrollTop();
       $(window).bind('scroll',lockscroll);
     },
     function (){ // hover off
       currentScroll=$(window).scrollTop();
       $(window).unbind('scroll',lockscroll);
     }
   ) 
```

[http://api.jquery.com/hover/](http://api.jquery.com/hover/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T22:00:46.560

你有没有尝试过

```
 $(document).ready(function () {
        $(".sidebarholder, .commentswrapper").hover(function () {
           currentScroll = $(window).scrollTop();
           $(window).bind('scroll', lockscroll);

        }, function () {
           currentScroll = $(window).scrollTop();
           $(window).unbind('scroll');

        })
     }) 
```

# java - 这可以用正则表达式吗？

> ID：16114093
> 
> 赞同：-4
> 
> 时间：2013-04-19T21:56:09.503
> 
> 标签：java

`()` `[]` `{}`这些是有效匹配但`({)}`为假，例如：

```
() - true
()[]- true
()[]{} - ture
([]) - false
(){[}] - false. 
```

我可以使用正则表达式来计算吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T21:58:09.423

不，正则表达式的已知限制之一是它无法判断括号是否格式正确。

# perl - Perl Hash of Hashes 将引用存储到内部 - 不能使用字符串 ("") 作为 HASH ref

> ID：16114094
> 
> 赞同：-1
> 
> 时间：2013-04-19T21:56:22.790
> 
> 标签：perl, hash, strict

好吧，我有一个函数可以生成一个哈希树，dumper 打印出来看起来像这样：

```
$VAR1 = {
  'shaders' => {
    'stock_gui.vert' => '',
    'stock_font.vert' => '',
    'stock_gui.frag' => '',
    'stock_font.frag' => ''
  },
  'textures' => {},
  'fonts' => {
    'DroidSansMono.ttf' => '',
    'small' => {
      'DroidSansMono.ttf' => ''
    }
  }
}; 
```

现在我正在尝试 dfs 迭代例如字体子树：

```
push (@stack, \%{$myHash->{'fonts'}}); 
```

然后在一个循环中：

```
my $tmpHash = pop(@stack); 
```

然后 $tmpHash 的转储程序显示：

```
$VAR1 = {
  'DroidSansMono.ttf' => '',
  'small' => {
    'DroidSansMono.ttf' => ''
  }
}; 
```

问题是尝试访问哈希引用的子代。我可以数钥匙并看到孩子们。转储器输出看起来不错。但是尝试做类似的事情：

```
foreach my $childKey ( keys $tmpHash ){
   my $subChildrenCount = scalar keys(%{$tmpHash->{$childKey}});
} 
```

产生错误：

```
Can't use string ("") as a HASH ref while "strict refs" in use 
```

我认为这是因为 $tmpHash 是一个哈希引用。我可能只需要在某个地方取消引用它。我已经尝试了很多事情，并且都产生了进一步的问题。任何帮助表示赞赏。

如果我尝试：

```
 %{$tmpHash->{'small'}} 
```

然后它工作正常。

更新：

*   如果字符串包含'.' 然后发生此错误。硬编码“小”有效。除非我转义 '.'，否则硬编码 'stock_gui.vert' 会失败。但是，如果我转义点，则键不匹配...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T22:04:58.617

正如你自己运行它所看到的，

```
use strict;
use warnings;

my $tmpHash = {
  'DroidSansMono.ttf' => '',
  'small' => {
    'DroidSansMono.ttf' => ''
  }
};

my $subChildrenCount = scalar keys(%{$tmpHash->{'small'}}); 
```

你说的代码给出了这个错误实际上并没有给出那个错误。我怀疑你实际上在做

```
my $subChildrenCount = scalar keys(%{$tmpHash->{'DroidSansMono.ttf'}}); 
```

您的哈希格式没有多大意义。它将字段名称和实际数据混合为键。

# javascript - Angularjs在选择标签中总是空白元素

> ID：16114096
> 
> 赞同：1
> 
> 时间：2013-04-19T21:56:28.973
> 
> 标签：javascript, select, view, angularjs, controller

我是 Angular.js 的新手（也是这个论坛的新手），想尝试一些基础知识，但我一直在使用 select 和 options。

我有一个小应用程序并想添加一个选择框，但我得到了一个我想摆脱的空白选项。

我在 Stackoverflow 上搜索，当然还有 Google，并尝试了可能的选项和提示，但似乎没有什么对我有用。

我希望有人可以在这里帮助我...

关于应用程序：我有一些具有 item.Name 或 item.Price 等属性的项目，并希望将所选标签的值存储在 item.Store 中。

这是视图的一部分：

```
<td>
<select ng-model="item.Store" ng-options="item.storeName for item in items.Stores">
</select></td> 
```

这就是我的控制器中的内容：

```
$scope.items.Stores = [
    {storeId : 1, storeName : 'Spar' },      
    {storeId : 2, storeName : 'Billa' },
    {storeId : 3, storeName : 'Merkur' }, 
]; 
```

其中，我尝试了这个：

```
$scope.item.Store = $scope.items.Stores[1]; 
```

但我总是收到错误消息：“$scope.item is undefined....”虽然我的 ng-model 也被命名为 item.Store，所以我认为 . 或类似的东西...

感谢您的帮助，如果缺少与代码相关的内容，请告诉我:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T22:58:29.480

看看这个[Plunker](http://plnkr.co/edit/WoVhQCf5bLj3PWEy37ym?p=preview)，其中包含 OP 评论中提到的修改。

```
$scope.items = {
    stores: [
      {id : 1, name : 'Spar' },      
      {id : 2, name : 'Billa' },
      {id : 3, name : 'Merkur' }, 
    ]
};

$scope.item = {
    store: $scope.items.stores[1]
} 
```

# search - Emacs 搜索结果数量

> ID：16114099
> 
> 赞同：1
> 
> 时间：2013-04-19T21:56:47.263
> 
> 标签：search, emacs

在 Emacs 中进行搜索（`C-s`增量搜索）时，查看结果的数量可能很有用。我试图找到一种方法来做到这一点，但我似乎找不到任何方法。有没有人有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T22:13:11.563

[ioccur](https://github.com/thierryvolpiatto/ioccur)逐步列出您提供的正则表达式的多个结果。它们列在另一个缓冲区中，但这使您可以轻松地跳转到每个匹配项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T22:11:14.517

您可以运行`count-matches`以获取匹配数。增量搜索是增量的，它是增量搜索的。

# python - 在 Cython 中调用点积和线性代数运算？

> ID：16114100
> 
> 赞同：25
> 
> 时间：2013-04-19T21:56:50.840
> 
> 标签：python, numpy, scipy, cython, blas

我正在尝试使用 Cython 的 numpy 中可用的点积、矩阵求逆和其他基本线性代数运算。`numpy.linalg.inv`（反转）、`numpy.dot`（点积）、`X.t`（矩阵/数组的转置）等函数。从 Cython 函数调用有很大的开销，`numpy.*`并且函数的其余部分是用 Cython 编写的，所以我想避免这种情况。

如果我假设用户已经`numpy`安装，有没有办法做类似的事情：

```
#include "numpy/npy_math.h" 
```

作为`extern`, 并调用这些函数？或者直接调用 BLAS（或者 numpy 调用这些核心操作的任何内容）？

举个例子，假设你在 Cython 中有一个函数可以做很多事情，最终需要进行涉及点积和矩阵求逆的计算：

```
cdef myfunc(...):
  # ... do many things faster than Python could
  # ...
  # compute one value using dot products and inv
  # without using 
  #   import numpy as np 
  #   np.*
  val = gammaln(sum(v)) - sum(gammaln(v)) + dot((v - 1).T, log(x).T) 
```

如何才能做到这一点？如果已经有一个在 Cython 中实现这些的库，我也可以使用它，但没有找到任何东西。即使这些过程不如直接优化 BLAS，没有`numpy`从 Cython 调用 Python 模块的开销仍然会使事情总体上更快。

我想调用的示例函数：

*   点积 ( `np.dot`)
*   矩阵求逆 ( `np.linalg.inv`)
*   矩阵乘法
*   转置（相当于`x.T`numpy 中的）
*   gammaln 函数（类似于`scipy.gammaln`等效函数，应该在 C 中可用）

我意识到，正如它在 numpy 邮件列表（[https://groups.google.com/forum/?fromgroups=#!topic/cython-users/XZjMVSIQnTE](https://groups.google.com/forum/?fromgroups=#!topic/cython-users/XZjMVSIQnTE)）上所说，如果您在大型矩阵上调用这些函数，则没有任何意义从 Cython 执行它，因为从 numpy 调用它只会导致大部分时间花在 numpy 调用的优化 C 代码中。但是，就我而言，我*对小矩阵上的这些线性代数运算有很多调用*——在这种情况下，重复从 Cython 回到 numpy 再回到 Cython 所引入的开销将远远超过实际计算运算所花费的时间布拉斯。因此，对于这些简单的操作，我想将所有内容都保留在 C/Cython 级别，而不是通过 python。

我不想通过 GSL，因为这增加了另一个依赖项，而且还不清楚 GSL 是否得到积极维护。由于我假设代码的用户已经安装了 scipy/numpy，我可以放心地假设他们拥有与这些库一起使用的所有相关 C 代码，所以我只想能够利用该代码并调用它来自赛通。

**编辑**：我在 Cython ( [https://github.com/tokyo/tokyo](https://github.com/tokyo/tokyo) ) 中找到了一个包含 BLAS 的库，它很接近但不是我想要的。我想直接调用 numpy/scipy C 函数（我假设用户已经安装了这些函数。）

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-22T18:16:24.380

调用与 Scipy 捆绑在一起的 BLAS “相当”简单，这是调用 DGEMM 来计算矩阵乘法的一个示例：[https](https://gist.github.com/pv/5437087) ://gist.github.com/pv/5437087 请 注意，BLAS 和 LAPACK 期望所有数组都是 Fortran 连续的（模lda/b/c 参数），因此`order="F"`它们`double[::1,:]`是正确运行所必需的。

`dgesv`通过在单位矩阵上应用 LAPACK 函数，可以类似地计算逆。有关签名，请参见[此处](http://www.netlib.org/lapack/double/dgesv.f)。所有这些都需要降级到相当低级的编码，您需要自己分配临时工作数组等。 --- 但是这些可以封装到您自己的便利函数中，或者只是通过用函数指针`tokyo`替换函数来重用代码`lib_*`以上述方式从 Scipy 获得。

如果您使用 Cython 的 memoryview 语法 ( `double[::1,:]`)，则转置与`x.T`往常一样。或者，您可以通过编写自己的函数来计算转置，该函数在对角线上交换数组的元素。Numpy 实际上不包含此操作，`x.T`仅更改数组的步幅并且不移动数据。

可能会重写`tokyo`模块以使用 Scipy 导出的 BLAS/LAPACK 并将其捆绑`scipy.linalg`在`from scipy.linalg.blas cimport dgemm`. 如果有人想深入了解它，则接受[拉取请求。](https://github.com/scipy/scipy/blob/master/HACKING.rst.txt)

* * *

如您所见，这一切都归结为传递函数指针。正如上面提到的，Cython 实际上确实提供了自己的协议来交换函数指针。例如，考虑`from scipy.spatial import qhull; print(qhull.__pyx_capi__)`--- 这些函数可以通过`from scipy.spatial.qhull cimport XXXX`Cython 访问（虽然它们是私有的，所以不要这样做）。

但是，目前，`scipy.special`不提供此 C-API。然而实际上提供它非常简单，因为 scipy.special 中的接口模块是用 Cython 编写的。

我认为目前没有任何健全且可移植的方式来访问执行繁重工作的函数`gamln`，（尽管您可以窥探 UFunc 对象，但这不是一个健全的解决方案:)，所以目前可能最好从 scipy.special 中获取源代码的相关部分并将其与您的项目捆绑在一起，或者使用例如 GSL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-15T20:11:10.450

如果您接受使用 GSL，也许最简单的方法是使用这个 GSL->cython 接口[https://github.com/twiecki/CythonGSL](https://github.com/twiecki/CythonGSL)并从那里调用 BLAS（参见示例[https://github.com/twiecki /CythonGSL/blob/master/examples/blas2.pyx](https://github.com/twiecki/CythonGSL/blob/master/examples/blas2.pyx)）。它还应该注意 Fortran 与 C 的排序。没有多少新的 GSL 功能，但您可以放心地假设它已得到积极维护。CythonGSL 比 tokyo 更完整；例如，它具有 numpy 中不存在的对称矩阵乘积。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-30T01:46:49.217

因为我刚刚遇到了同样的问题，并且写了一些额外的函数，所以我会把它们包括在这里，以防其他人发现它们有用。我编写了一些矩阵乘法，还调用了 LAPACK 函数来进行矩阵求逆、行列式和 Cholesky 分解。但是你应该考虑尝试在任何循环之外做线性代数的东西，如果你有的话，就像我在[这里](https://stackoverflow.com/questions/50034761/efficient-matrix-operations-in-cython-with-no-python-objects/50077045#50077045)做的那样。顺便说一句，如果你有建议，这里的行列式函数不太有效。另外，请注意，我不会检查输入是否符合要求。

```
from scipy.linalg.cython_lapack cimport dgetri, dgetrf, dpotrf

cpdef void double[:, ::1] inv_c(double[:, ::1] A, double[:, ::1] B, 
                          double[:, ::1] work, double[::1] ipiv):
    '''invert float type square matrix A

    Parameters
    ----------
    A : memoryview (numpy array)
        n x n array to invert
    B : memoryview (numpy array)
        n x n array to use within the function, function
        will modify this matrix in place to become the inverse of A
    work : memoryview (numpy array)
        n x n array to use within the function
    ipiv : memoryview (numpy array)
        length n array to use within function
    '''

    cdef int n = A.shape[0], info, lwork
    B[...] = A

    dgetrf(&n, &n, &B[0, 0], &n, &ipiv[0], &info)

    dgetri(&n, &B[0,0], &n, &ipiv[0], &work[0,0], &lwork, &info)

cpdef double det_c(double[:, ::1] A, double[:, ::1] work, double[::1] ipiv):
    '''obtain determinant of float type square matrix A

    Notes
    -----
    As is, this function is not yet computing the sign of the determinant
    correctly, help!

    Parameters
    ----------
    A : memoryview (numpy array)
        n x n array to compute determinant of
    work : memoryview (numpy array)
        n x n array to use within function
    ipiv : memoryview (numpy array)
        length n vector use within function

    Returns
    -------
    detval : float
        determinant of matrix A
    '''

    cdef int n = A.shape[0], info
    work[...] = A

    dgetrf(&n, &n, &work[0,0], &n, &ipiv[0], &info)

    cdef double detval = 1.
    cdef int j

    for j in range(n):
        if j != ipiv[j]:
            detval = -detval*work[j, j]
        else:
            detval = detval*work[j, j]

    return detval

cdef void chol_c(double[:, ::1] A, double[:, ::1] B):
    '''cholesky factorization of real symmetric positive definite float matrix A

    Parameters
    ----------
    A : memoryview (numpy array)
        n x n matrix to compute cholesky decomposition
    B : memoryview (numpy array)
        n x n matrix to use within function, will be modified
        in place to become cholesky decomposition of A. works
        similar to np.linalg.cholesky
    '''
    cdef int n = A.shape[0], info
    cdef char uplo = 'U'
    B[...] = A

    dpotrf(&uplo, &n, &B[0,0], &n, &info)

    cdef int i, j
    for i in range(n):
        for j in range(n):
            if j > i:
                B[i, j] = 0  

cpdef void dotmm_c(double[:, :] A, double[:, :] B, double[:, :] out):
    '''matrix multiply matrices A (n x m) and B (m x l)

    Parameters
    ----------
    A : memoryview (numpy array)
        n x m left matrix
    B : memoryview (numpy array)
        m x r right matrix
    out : memoryview (numpy array)
        n x r output matrix
    '''
    cdef Py_ssize_t i, j, k
    cdef double s
    cdef Py_ssize_t n = A.shape[0], m = A.shape[1]
    cdef Py_ssize_t l = B.shape[0], r = B.shape[1]

    for i in range(n):
        for j in range(r):
            s = 0
            for k in range(m):
                s += A[i, k]*B[k, j]

            out[i, j] = s 
```

# android - 在 QueryBuilder 中使用 limit() 和 offset() (ANDROID , ORMLITE)

> ID：16114101
> 
> 赞同：7
> 
> 时间：2013-04-19T21:56:59.493
> 
> 标签：android, list, limit, offset, ormlite

```
@SuppressWarnings("deprecation")
public List<Picture> returnLimitedList(int offset, int end) {
    List<Picture> pictureList = new ArrayList<Picture>();
    int startRow = offset;
    int maxRows = end;
    try {
        QueryBuilder<Picture, Integer> queryBuilder = dao.queryBuilder();
        queryBuilder.offset(startRow).limit(maxRows);
        pictureList = dao.query(queryBuilder.prepare());
    } catch (SQLException e) {
        e.printStackTrace();
    }

    return pictureList;
} 
```

*   我在数据库中有一张图片表，并且必须返回一个有限的列表，一次 20 行。
*   但是当我使用 ex: QueryBuilder.offset(11).limit(30);
*   我无法返回限制为 20 行的列表。
*   这份清单只给我带来了限制。
*   就好像偏移量始终保持值为 0
*   例如：（0 - 30）

*   有没有其他方法可以返回初始索引和结束索引的有限列表？

*   有人可以帮我吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-06-20T17:43:06.477

这个问题是两个月前提出的，但如果有人偶然发现与我相同的问题，我会回答。

对这种情况下的含义存在误解`offset`，以下是 SQLite Documentation 所说的

> 如果表达式具有 OFFSET 子句，则从 SELECT 语句返回的结果集中省略前 M 行，并返回接下来的 N 行，其中 M 和 N 分别是 OFFSET 和 LIMIT 子句计算的值。

[资源](http://www.sqlite.org/lang_select.html#orderby)

根据您的查询，您将返回从 #11 行开始的 30 行。

所以正确的做法是：

```
queryBuilder.offset(startRow).limit(20); 
```

是将`limit`返回的行数，而不是结束行。

```
pictureList = dao.query(queryBuilder.prepare()); 
```

并且返回`List`的第一个值开始于`pictureList.get(0)`

**编辑：** @Gray 对评论的帮助

# java - 如何将文件从 Android 写入 PC 并返回？

> ID：16114105
> 
> 赞同：3
> 
> 时间：2013-04-19T21:57:06.420
> 
> 标签：java, android

**情况：**
客户的 Android 手机未激活以使用蜂窝服务，并且他的办公室没有 wifi。他希望我给他写一个简单的自定义联系人列表，他可以查看人员的姓名和电话号码（已经完成）。然而，他想要一个桌面客户端（用 Java 完成），他可以在其中更新联系人，因为他有点老，并且更喜欢使用标准尺寸的键盘而不是手机上的滑块键盘。（这也完成了）。

我需要为将读取 PC 本地硬盘驱动器上的文件并更新 SD 卡上的联系人文件的应用程序完成一门课程。

**选项：**
据我所知，在这种情况下，我唯一的选择是使用手机的 USB 端口。我将让桌面客户端将联系人文件写入 Android 设备上的 SD 卡。

**问题：**
我可以使用USBManager 类来拥有应用程序：
1\. 在PC 上查找xml 联系人文件。
2\. 读取 PC 上的文件并更新 SD 卡上的文件。

**附加信息：**
客户手机型号：Motorola Droid II Global
Android OS 版本：2.3.4

也许让桌面客户端访问 SDCard 并将文件写入 Android 设备可能更容易。我愿意回顾有关此过程的所有概念和想法。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T22:00:55.980

如果设备处于“开发模式”，您可以使用 Android 调试桥 (adb) 通过 USB 连接从设备推送/拉取文件。

[http://developer.android.com/tools/help/adb.html#copyfiles](http://developer.android.com/tools/help/adb.html#copyfiles)

如果 SD 卡是可移动的，听起来可能更容易为 PC 购买 SD 读卡器并让 PC Java 程序写入 SD 卡，将其从 PC 中移除，然后将其重新插入 Android 设备然后 Android 应用程序可以从 SD 卡中读取它。你在上一段中所说的...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T00:22:20.440

在设备上使用[Androids BluetoothSocket 类](http://developer.android.com/reference/android/bluetooth/BluetoothSocket.html)的蓝牙怎么样？如果需要，您可以为 PC 购买 USB 蓝牙加密狗。但是，使用 USB 电缆连接会更容易。

# php - 需要帮助解决再次提交表单后图像消失的问题？

> ID：16114112
> 
> 赞同：0
> 
> 时间：2013-04-19T21:58:02.780
> 
> 标签：php, image, file-upload, image-uploading, image-upload

我在表单中有多个图像上传选项，它们工作正常并更新 mysql 数据库列中的文件名？

当我上传 image1 然后图像移动到服务器上，它也显示在旁边，`html table columns`问题是当我`image with file option2`在表单提交后上传时，然后`image1 which is on the next to the image1 file option`会消失并在`mysql database image1 columns will be blank`？

**多张图片上传功能**

```
 $id=$_REQUEST['id'];

 if(isset($_POST['submit']))
 {

 if (!empty($_FILES['image']['name'])) 
 {

 $rnd_1 = rand(11111,99999); 
 $file_name= $rnd_1.'_'.$_FILES['image']["name"];
 $file_path = "uploads/"; 
 $image = new imgMark(); 
 $image->font_path = "arial.ttf"; 
 $image->font_size = 25; 
 $image->water_mark_text = "© www.edge.pk";  
 $image->color = 'CC003E'; 
 $image->opacity = 50; 
 $image->rotation = 0;
 if($image->convertImage('image', $file_name, $file_path))
 $demo_image = $image->img_path;
 }

 if (!empty($_FILES['image1']['name'])) 
 { 
 $rnd_1 = rand(11111,99999); 
 $file_name= $rnd_1.'_'.$_FILES['image1']["name"];
 $file_path = "uploads/"; 
 $image = new imgMark(); 
 $image->font_path = "arial.ttf"; 
 $image->font_size = 35; 
 $image->water_mark_text = "© www.edge.pk";  
 $image->color = 'CC003E'; 
 $image->opacity = 50; 
 $image->rotation = 0;
 if($image->convertImage('image1', $file_name, $file_path))
 $demo_image2 = $image->img_path;
 }

 if (!empty($_FILES['image2']['name'])) 
 { 
 $rnd_1 = rand(11111,99999); 
 $file_name= $rnd_1.'_'.$_FILES['image2']["name"];
 $file_path = "uploads/"; 
 $image = new imgMark(); 
 $image->font_path = "arial.ttf"; 
 $image->font_size = 35; 
 $image->water_mark_text = "© www.edge.pk";  
 $image->color = 'CC003E'; 
 $image->opacity = 50; 
 $image->rotation = 0;
 if($image->convertImage('image2', $file_name, $file_path))
 $demo_image3 = $image->img_path; 
 } 
```

**更新查询**

```
UPDATE products SET 
image='$demo_image',addimage1='$demo_image2',addimage2='$demo_image3'
WHERE id='$id'
} 
```

**选图查询**

```
$query1=mysql_query("select images,addimages1,addimages2 from products 
where id='$id' ")or die("query");
$row2=mysql_fetch_array($query1);

<form method="post" enctype="multipart/form-data"> 

Image Upload Option1
<input type="file" name="image" id="image" />
<img src="<?php echo $image['image'] ?>" width="150" height="150" />

Image Upload Option2
<input  type="file" name="image1" id="image1"/>
<img src="<?php echo $image['addimage1'] ?>" width="150" height="150" />

Image Upload Option3
<input  type="file" name="image2" id="image2"/>
<img src="<?php echo $image['addimage2'] ?>" width="150" height="150" />

<input type="submit" class="bg" name="submit" />
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T22:36:40.913

问题出在这里：

```
UPDATE products SET 
image='$demo_image',addimage1='$demo_image2',addimage2='$demo_image3'
WHERE id='$id'
} 
```

据我了解，您首先在上传第一张图片的地方提交表单，然后在上传第二张图片的地方再次提交表单。这样做的原因是，在您第二次上传期间，变量 $demo_image 将为空白，因为您在重新提交期间没有发送输入“图像”的任何值。看这里：

```
$demo_image = $image->img_path; 
```

$image->img_path 为空白，因此 $demo_image 也将为空白（或 NULL？- 不确定）。

这个问题有很多解决方案。您可以从您的数据库中检索数据到表单，然后重新提交，或者测试您的变量是否为空白（或 NULL？），然后针对不同的变体使用不同的 UPDATE 命令，或者在运行 UPDATE 之前从 MySQL 检索数据等等。

我会选择从 MySQL 中检索“旧”数据，然后测试它们是否为 NULL。如果它们在 MySQL 中不为 NULL，您只需将相同的数据重新提交到您的数据库。像这样：

```
if ($demo_image_from_db!=NULL) $demo_image = $demo_image_from_db; 
```

可能还有一个 MySQL 本机函数，仅在 NULL 时才更新——我听说过 COALESCE，但我不完全知道如何使用它——这绝对是最简单的方法。

# android - Android：活动 onResume

> ID：16114116
> 
> 赞同：1
> 
> 时间：2013-04-19T21:58:14.050
> 
> 标签：android, android-activity, android-mediaplayer, onresume

我有两个活动，家庭作业和更接近。我的作业中有一首歌正在播放，但是当按下按钮时，媒体播放器会暂停并打开关闭。在我的 onResume 作业功能中，我试图再次启动媒体播放器，但没有声音播放。有人可以帮我解决这个问题吗？

```
package com.cis.lab4;

import java.io.IOException;

import android.media.MediaPlayer;
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.content.res.AssetFileDescriptor;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class Homework extends Activity {

    final MediaPlayer mediaplayer = new MediaPlayer();
    int media_length;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_homework);

        setContentView(R.layout.activity_homework);
        AssetFileDescriptor afd;
        try {
            afd = getAssets().openFd("rev.mp3");
            mediaplayer.setDataSource(afd.getFileDescriptor(),afd.getStartOffset(),afd.getLength());
            mediaplayer.prepare();
        } catch (IOException e) {
            e.printStackTrace();
        }
        mediaplayer.start();
        Button next = (Button) findViewById(R.id.homeworkContinue);
        final Intent openCloser = new Intent(this, EndActivity.class);
        next.setOnClickListener(new OnClickListener(){

            @Override
            public void onClick(View v) {
                mediaplayer.pause();
                media_length = mediaplayer.getCurrentPosition();
                startActivity(openCloser);

            }

        });
    }

    public void onResume(Bundle savedInstanceState){
        super.onResume();
        mediaplayer.seekTo(media_length);
        mediaplayer.start();
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T22:11:39.463

尝试在`onPause()`活动的方法中而不是在`onClick()`事件中保存媒体状态。这保证了每次`onResume()`调用`onPause()`will 都会在此之前调用（除了第一次运行 Activity，在这种情况下，`onResume()`将在`onStart()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T22:09:38.997

你为什么不尝试检查`onResume()`如果媒体播放器为空。

如果它为空，那么您将需要调用`mediaPlayer.prepare()`.

也许把这段代码放到它自己的函数中：

```
try {
    afd = getAssets().openFd("rev.mp3");
    mediaplayer.setDataSource(afd.getFileDescriptor(),afd.getStartOffset(),afd.getLength());
    mediaplayer.prepare();
} catch (IOException e) {
    e.printStackTrace();
} 
```

这样你就可以在`onResume()`/中调用它`onCreate()`。在`onResume()`尝试做空检查。如果它为空，则调用您的新函数来准备 mediaPlayer。

# ruby-on-rails - Rails 500 错误访问资源

> ID：16114117
> 
> 赞同：0
> 
> 时间：2013-04-19T21:58:14.233
> 
> 标签：ruby-on-rails, heroku

在我的本地主机上，我的应用程序运行良好。当我访问资源页面时，在生产服务器 (Heroku) 上：`http://startupcrawler.com/startups`我收到 500 错误。

这是我的路线.rb：

```
StartupcrawlerRuby::Application.routes.draw do
  resources :startups
  get "home/index"
  root to: 'home#index'
end 
```

在我的生产服务器上，这是我运行时得到的`rake routes`：

```
 Prefix Verb   URI Pattern                  Controller#Action
    startups GET    /startups(.:format)          startups#index
             POST   /startups(.:format)          startups#create
 new_startup GET    /startups/new(.:format)      startups#new
edit_startup GET    /startups/:id/edit(.:format) startups#edit
     startup GET    /startups/:id(.:format)      startups#show
             PATCH  /startups/:id(.:format)      startups#update
             PUT    /startups/:id(.:format)      startups#update
             DELETE /startups/:id(.:format)      startups#destroy
  home_index GET    /home/index(.:format)        home#index
        root GET    / 
```

还有什么我应该检查来解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T22:19:51.333

在项目目录中运行`heroku logs -t`并尝试访问您的资源。

# php - IMAP，PHP 不返回任何消息

> ID：16114125
> 
> 赞同：0
> 
> 时间：2013-04-19T21:59:05.770
> 
> 标签：php, email, gmail, imap

我使用我的用户名和密码连接到服务器。它使用 2 的资源 id 连接。它正确显示状态，列出收件箱中未读电子邮件的数量、最近的邮件等。但是当涉及 imap_num_msg() 函数时，我传入了正确的参数，但它返回 0 .我做错了什么让它返回0？

```
 <?php        
  $mbox = imap_open("{imap.gmail.com:993/imap/ssl}INBOX", "xxxxx", "xxxxxx",   OP_HALFOPEN)
or die("can't connect: " . imap_last_error());

   $list = imap_list($mbox, "{imap.gmail.com:993/imap/ssl}INBOX", "*");
   if (is_array($list)) {
   foreach ($list as $val) {
    echo imap_utf7_decode($val) . "\n";
   }
} else {
echo "imap_list failed: " . imap_last_error() . "\n";
}

 $status = imap_status($mbox, "{imap.gmail.com:993/imap/ssl}INBOX", SA_ALL);
 if ($status) {
   echo "Messages:   " . $status->messages    . "<br />\n";
   echo "Recent:     " . $status->recent      . "<br />\n";
   echo "Unseen:     " . $status->unseen      . "<br />\n";
   echo "UIDnext:    " . $status->uidnext     . "<br />\n";
   echo "UIDvalidity:" . $status->uidvalidity . "<br />\n";
  } else {
    echo "imap_status failed: " . imap_last_error() . "\n";
  }
  $numMessages = imap_num_msg($mbox);

 if ($numMessages) { 
   echo $numMessages;
 } else {
    echo "imap_status failed: " . imap_last_error() . "\n";
 }
imap_close($mbox);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T22:34:38.767

解决了它，解决方案是将 imap_open() 函数中的标志设置为打开邮箱的 OP_READONLY 。

```
 <?php     
     $mbox = imap_open("{imap.gmail.com:993/imap/ssl}INBOX", "xxxxxx", "xxxxxx", OP_READONLY, 1)
or die("can't connect: " . imap_last_error());
 ?> 
```

# python - Python 导入和模块范围（特别是 sys.ps1）

> ID：16114127
> 
> 赞同：2
> 
> 时间：2013-04-19T21:59:21.533
> 
> 标签：python

为什么以下不起作用：

```
from sys import ps1
ps1 = 'something else ' 
```

但这可以吗？

```
import sys
sys.ps1 = 'something else ' 
```

如果我运行简单的测试

```
import sys
from sys import ps1
ps1 = 'something else'
sys.ps1 = 'something else' 
```

第一个任务不起作用，但第二个任务。ps1 和 sys.ps1 的 id() 是相同的，所以它们应该指的是同一个东西，对吧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T22:00:37.570

简短的版本是：赋值不会改变 Python 中的任何内容，它只是重新绑定名称。重新绑定一个不同的名称，该名称恰好当前绑定到对同一字符串的引用，因为`sys.ps1`它不会`sys.ps1`以任何方式影响。

让我们一步一步来：

```
from sys import ps1 
```

这会导入`sys`（但不绑定`sys`当前全局变量中的名称），然后将当前全局变量中的名称绑定到与's`ps1`相同的对象。`sys``ps1`

```
ps1 = 'something else ' 
```

这会将`ps1`当前全局变量中的名称重新绑定到与文字相同的对象`'something else'`。没有办法可能影响`sys`模块。

```
import sys 
```

这将导入`sys`，然后将`sys`当前全局变量中的名称绑定到它。

```
sys.ps1 = 'something else ' 
```

这会在当前全局变量中查找名称`sys`，获取对`sys`模块的引用，然后将该模块中的名称重新绑定`ps1`到与字面量相同的对象`'something else '`。

* * *

或者，用伪 Python 术语代替英文……</p>

您的第一个代码示例是这样的：

```
tempspace._sys = __import__('sys')
globals.ps1 = tempspace._sys.ps1
del tempspace._sys
globals.ps1 = 'something else ' 
```

你的第二个是这样的：

```
globals.sys = sys_modules.sys = __import__('sys')
globals.sys.ps1 = 'something else ' 
```

* * *

这是您在评论中描述的内容的记录。

```
Python 2.7.2 (default, Jun 20 2012, 16:23:33) 
[GCC 4.2.1 Compatible Apple Clang 4.0 (tags/Apple/clang-418.0.60)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import sys
>>> from sys import ps1
>>> id(sys.ps1)
4360831168
>>> id(ps1)
4360831168
>>> sys.ps1 = 'something else '
something else ps1
'>>> '
something else 
```

`sys.ps1`并且`ps1`具有相同的 ID，因为它们是引用同一对象的两个不同名称。

而变`sys.ps1`不变`ps1`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T22:23:57.820

Python 的 import 语句引起的混乱程度应该会让它的发明者彻夜难眠！

这是一个试图[解释 import](http://effbot.org/zone/import-confusion.htm)的页面。它特别描述了：

*   **import X**导入模块 X 并且您使用*X.name*来引用模块 X 中定义的*名称*

*   **from X import ***导入模块 X，但在当前命名空间中创建对 X 中定义的所有公共对象的引用。您使用*name*来引用在 X 中定义的*名称*，但 X 本身未定义，因此*X.name*不起作用。

**从 X import ***查看的一种方法可能几乎就像它内联插入了模块 X 的整个源代码，因此您只需直接使用*name*就好像它是内联的，并且您不能使用 X，因为它不再存在。

请注意，从模块或包中导入 * 的做法是[不受欢迎的](http://docs.python.org/2/tutorial/modules.html#more-on-modules)。

# python - 更改函数中的全局变量

> ID：16114129
> 
> 赞同：1
> 
> 时间：2013-04-19T21:59:29.413
> 
> 标签：python, variables, global, local

我是编程新手，我正在寻找一些关于如何做的建议。我正在尝试编写的程序需要用户提供几个数字。我想使用一个函数来测试用户是否为每个输入的值输入了一个数字。如果输入不是数字，我希望该函数一直要求输入一个数字，直到输入一个数字。我想知道是否有更好的方法将值传递给全局变量，而不是将函数中的每个变量显式声明为全局变量。我不确定是否有更好的方法来做到这一点......

```
rowNum = None

def numTest(c, d):
    x = False
    while x is not True:    
        try:
            c = raw_input(d)   
            c = float(c)
            x = True
        except:
            print "The value you entered isn't a valid number, please try again."            
    global rowNum 
    rowNum = c

numTest(rowNum, "Enter number of rows: ")
print rowNum
# I want to use the numTest function on several variables...
# e.g.
# numTest(contourLevel, "Enter number of contour levels: ")
# numTest(cellSize, "Enter cell size: ")
# numTest(labelSize, "Enter label size: ") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T22:03:22.703

只需让它成为一个函数，它返回一些东西而不是操纵一个全局，更容易维护！

```
def get_num(msg):
    while True:    
        try:
            return int(raw_input(msg)) # number of rows should be int
        except ValueError:
            print "The value you entered isn't a valid number, please try again."            

num_rows = get_num("Enter number of rows: ")
print num_rows 
```

而不是像`numTest(cellSize, "Enter cell size: ")`你提到的那样，你应该做`cellSize = get_num("Enter cell size: ")`. 返回值是更好的做法。

您可以使此功能更通用`int`，`float`如下所示：

```
def get_num(msg, type_=int):
    while True:    
        try:
            return type_(raw_input(msg))
        except ValueError:
            print "The value you entered isn't a valid number, please try again." 
```

现在您还可以拥有：

```
x = get_num("test") # normal int
x = get_num("foo", float) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T22:25:36.577

我没有足够的代表，所以我无法发表评论，但是：@Schack，将 return 视为一种内部打印语句（您看不到返回的内容，但 Python 解释器可以读取和使用/存储/操作该值。）打印语句在屏幕上显示输出（对于人类），尽管对您的程序计算/运行没有任何作用，并且 return 语句将输出发送到 python 解释器（对于程序），尽管在您的屏幕上没有显示任何内容人类阅读。

例如，如果一个函数返回一个字符串，您可以通过声明将该输出存储为变量： variable1 = function1(args)

它将存储函数 1 返回的任何字符串（基于 args 的输入）作为变量 1。

这对于组织代码非常有用，并且意味着您不必摆弄全局变量。

需要注意的重要一点是，一旦函数返回一个值，就不会执行其他代码。

例如：

```
def example(a, b):
    for n in range(1, 30):
        if a**n == b**4:
            return
            break
    else:
        return False 
```

break 和 else 语句是多余的，因为函数执行 return 语句后，不会执行其他代码。更好的写法是：

```
def example(a, b):
    for n in range(1, 30):
        if a**n == b**4:
            return n
    return False 
```

我希望我没有让您感到困惑，因为我的回答确实有点偏离了方向，只是想提供帮助，因为我自己是新手，并且在学习这些主题时发现这种类型的解释很有用

# wordpress - 在 wordpress 中插入 google 'onclick' 跟踪链接属性

> ID：16114132
> 
> 赞同：0
> 
> 时间：2013-04-19T21:59:45.367
> 
> 标签：wordpress, navigation, google-analytics

我正在寻找一种方法来修改我的 Wordpress 网站上的链接，以便它跟踪我所有的第 3 方链接。

我能够找到一些帮助，如何在 Google Analytics 中创建正确的跟踪代码，但该过程的第二部分是添加一些特定的链接属性。

这是他们建议我复制的示例：

<'a href="www.blog-hosting-service.com/myBlog" onclick="_gaq.push(['_link', 'www.blog-hosting-service.com/myBlog']); 返回 false;" >查看我的博客

有谁知道我可以在哪里插入此代码链接属性，以便我可以通过 Google Analytics 收集外部点击？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T22:09:42.287

在我看来，JQuery 将是最好的方法。

```
// start by getting the current page path (the one you are sending to tracker)

var pathname = window.location.pathname;

// ready handler to change the links on hosts not equal to location host

$(document).ready(function() {

    $('a[href^="http://"]').filter(function() {

        return this.hostname && this.hostname !== location.hostname;

    }).click(function(e) {

        _gaq.push(['_link', pathname]);

    });
}); 
```

# c# - 从打开的 xml Word 文档 mainpart 中检索特定的表格元素

> ID：16114137
> 
> 赞同：4
> 
> 时间：2013-04-19T22:00:13.117
> 
> 标签：c#, openxml

我需要从打开的 xml 文档中获取特定表的 xml`innerText == "something" & "somethingelse"`

例子 ：

```
using (WordprocessingDocument doc = WordprocessingDocument.Open(path, false))
{
    MainDocumentPart mainPart = doc.MainDocumentPart;
    string xml = mainPart.Document.Descendants<Table>().Select // where innerText == "this" || innerText == "that"
    Console.WriteLine(xml);

    MainDocumentPart documentPrincipal = document.MainDocumentPart;
    documentPrincipal.Document.InnerXml =    documentPrincipal.Document.InnerXml.Replace(replacethisby, that);
    documentPrincipal.Document.Save();
    document.Dispose();
} 
```

我该如何做到这一点？非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T20:10:53.650

如果只是替换表格中的某些文本的问题，有几种方法可以解决。

如果您可以控制要替换的文档，则只需为要替换的文本添加书签，然后使用它

```
public  void ReplaceInBookmark(BookmarkStart bookmarkStart, string text)
    {
        OpenXmlElement elem = bookmarkStart.NextSibling();
        while (elem != null && !(elem is BookmarkEnd))
        {
            OpenXmlElement nextElem = elem.NextSibling();
            elem.Remove();
            elem = nextElem;
        }
        bookmarkStart.Parent.InsertAfter<Run>(new Run(new Text(text)), bookmarkStart);
    } 
```

并完成它。如果要求您只需要使用表内的文本来查找表，我提出以下两种解决方案。

此解决方案假定您要在表格的单元格中找到确切的文本。

```
var tables = mainPart.Document.Descendants<Table>().ToList();
List<TableCell> cellList = new List<TableCell>();
foreach (Table t in tables)
{
    var rows = t.Elements<TableRow>();
    foreach (TableRow row in rows)
    {
        var cells = row.Elements<TableCell>();
        foreach (TableCell cell in cells) 
        cellList.Add(cell);
    }
}
var q = from c in cellList where c.InnerText == "Testing123" || 
                                 c.InnerText == "TestingOMG!" 
        select c.Parent.Parent;

String xml = q.First().OuterXml; 
```

这是理解您的问题的一种方式。第二个是我们假设您想要匹配`innertext`整个表格的一部分。

```
var tables = mainPart.Document.Descendants<Table>().ToList();
var q = from c in tables where c.InnerText.Contains("Testing123") ||
                               c.InnerText.Contains("TestingOMG!") select c;
String xml = q.First().OuterXml; 
```

这两个示例都将返回您在其中找到字符串的表的 xml。

但是，我强烈建议您使用书签作为桌子的挂钩。

# batch-file - 批处理文件以将回显添加到文本文件中的每个换行符

> ID：16114138
> 
> 赞同：0
> 
> 时间：2013-04-19T22:00:16.530
> 
> 标签：batch-file, ascii, echo

我正在尝试将 echo 附加到此文本文件中的每个新行...由于该文本文件有超过 250000 行，我认为通过它并单独添加它们是不可行的。有没有人在这个领域有经验可以分享他们如何做到这一点的知识......我正在尝试使用 ASCII 字符创建艺术品，直到完成后我才意识到我想回显每一行... 如果可以的话请帮忙...

来自文本文件的部分艺术品示例：

```
......................................................................................................................................................
........................................................................................................................................................................................................
........................................................................................................................................................................................................
........................................................................................................................................................................................................
............................................................::oOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOo:.............................................................
..........................................................::oO888888888888888888888888888888888888888888888888888888888888888888888888888OOo:...........................................................
........................................................::oO8888O8888888888OOOOOOOOOOOO888888888888OOOOO8O8OOO888888888OO888888888OOO8O8888OOo:.........................................................
......................................................::oO8888Ooo::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::oOO888OO::.......................................................
.....................................................:oO8888OO::........................................................................:oOO888OO::.....................................................
...................................................:oO88888O::............................................................................:oOO888OO::...................................................
.................................................:oO8888OO::................................................................................:oO8888Oo::.................................................
...............................................:oO8888OO::....................................................................................:oO8888Oo::...............................................
.............................................:oO88888Oo:........................................................................................:oO8888Oo::.............................................
...........................................:oO88888Oo:.................................:::::::....:::::::::::::::................................::oO8888Oo:............................................
.........................................:oO8888OOo:.............................::::ooOOOOOOo..::OOOOOOOOOOOOOOOo::::.............................::OO8888Oo:..........................................
.......................................:oOO8888Oo:...........................:::oOOOOO8888OOo:.:oO8888888888888888OOOOoo::...........................::OO8888Oo:........................................
.....................................:oOO8888Oo:..........................::oOOO888888888Oo:..::Oo:o88888888888888888888OOoo:..........................::OO8888Oo:......................................
...................................:oOO8888Oo:..........................::OO88888OO88888OO:.::OOo::o88888888888888888888888OOo::.........................::OO8888Oo:.................................... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T22:40:37.817

您可以简单地使用此批次：

```
@ECHO OFF & setlocal
(for /f "delims=" %%i in ('findstr /n "^" ^<"artwork.txt"') do (
    set "line=%%i"
    setlocal enabledelayedexpansion
    echo(echo(!line:*:=!
    endlocal
))>"artwork.bat" 
```

把你的作品放进去`artwork.txt`，结果就会在`artwork.bat`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T22:11:02.207

找一个合理的文本编辑器，比如[Notepad++](http://notepad-plus-plus.org)，然后进行查找/替换。查找`\n`所有匹配项并将其替换为`\necho`。显然还有其他方法可以做到这一点，但我认为使用这样的编辑器会给你带来想要的结果，而不会有太多麻烦。

# python - Python相对导入在命令行中不起作用给出ValueError

> ID：16114140
> 
> 赞同：1
> 
> 时间：2013-04-19T22:00:34.810
> 
> 标签：python

我的目录结构如下

```
microblog/__init__.py
         urls.py
         views.py
         wsgi.py
         settings/__init__.py
                 testing.py
                 base.py
                 local.py 
```

在 testing.py 我有一个相对导入

```
from .base import *
...
...more code 
```

当我尝试使用 python testing.py 从目录 microblog/settings 中的命令行运行 testing.py

```
from .base import *
ValueError: Attempted relative import in non-package 
```

为什么这不起作用。设置目录是一个带有**init** .py 的有效包。仅当我更改

```
from .base import * 
```

至

```
from base import * 
```

当我从命令行运行带有相对导入的“testing.py”包时，我试图了解为什么相对本地导入失败并给出 ValueError。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T22:17:25.410

[这篇文章](https://stackoverflow.com/questions/9123062/python-relative-import-example-code-does-not-work?lq=1)中 icyrock 的回答准确地阐明了我对 python“repl”的不理解。

在我运行时的目录微博/设置中

```
python testing.py 
```

它实际上将测试放在包“main”中，它不知道测试是包“设置”的一部分。而是使用此将“testing.py”作为模块作为其正常包层次结构的一部分运行

```
python -m microblog.settings.testing 
```

在没有任何 ValueError 的情况下运行它，因为现在 python 知道“测试”是包“设置”的一部分，其中相对本地导入“来自 .base 导入 *”非常有意义。

# linq - LINQ - 按子集的结果排序

> ID：16114141
> 
> 赞同：2
> 
> 时间：2013-04-19T22:00:37.247
> 
> 标签：linq

**编辑**

*我将说明我要解决的确切问题。简化的问题解释不起作用。*

我正在编写一个框架，该框架需要我根据负载因子将线程分配给 CPU 内核。请让我们不要争论我为什么要这样做。

当框架启动时，它会形成以下硬件的映射：

1.  级别 1：处理器工作组。
2.  级别 2：NUMA 节点。
3.  第 3 级：处理器（套接字）。
4.  4级：核心。
5.  5 级：逻辑处理器（仅适用于 SMT 系统）。

我用一个相当复杂的 5 级层次结构来表示这一点。

用户可以查询此硬件信息。用户可以指定任何内容，所需的工作组，所需的 NUMA 节点等，直到第 4 级。在这种情况下，框架只是过滤掉完整的数据集，只返回与输入匹配的内容，只要它符合层次结构（即用户没有说指定没有出现在指定处理器下的核心）。

接下来，用户指定范围，例如“给我任意 1 个工作组、任意 1 个 numa 节点和任意 3 个 CPU”。在这种情况下，框架应该返回分配最低的 3 个 CPU。这是一个过滤和排序过程。

同样，用户可以将他的过滤器指定为任何级别。

用户也可以简单地不指定任何内容，这意味着框架必须返回硬件信息，但根据每个级别的负载分配进行排序。

无论用户指定什么，该过程始终是过滤和排序。唯一的区别是用户可以指定范围、计数或什么都不指定。

要开始这个过程，我会根据用户提供的信息过滤原始硬件数据。这作为每个 L5 对象的对象 {L1, L2, L3, L4, L5) 的扁平化枚举返回。

接下来，我执行以下操作：

```
IEnumerable<KeyValuePair<int, double>> wgSub;
IEnumerable<KeyValuePair<int, double>> nnSub;
IEnumerable<KeyValuePair<int, double>> cpSub;
IEnumerable<KeyValuePair<int, double>> coSub;

wgSub = (
        from n in query
        group n by n.L1.ID into g
        select new KeyValuePair<int, double>(g.Key, g.Sum(n => n.L1.Assignment))
    )
    .OrderBy(o => o.Value);

nnSub = (
        from n in query
        group n by n.L2.ID into g
        select new KeyValuePair<int, double>(g.Key, g.Sum(n => n.L2.Assignment))
    )
    .OrderBy(o => o.Value);

cpSub = (
        from n in query
        group n by n.L3.ID into g
        select new KeyValuePair<int, double>(g.Key, g.Sum(n => n.L3.Assignment))
    )
    .OrderBy(o => o.Value);

coSub = (
        from n in query
        group n by n.L4.ID into g
        select new KeyValuePair<int, double>(g.Key, g.Sum(n => n.L4.Assignment))
    )
    .OrderBy(o => o.Value);

query = (
            from n in query
            join wgj in wgSub on n.L1.ID equals wgj.Key
            join nnj in nnSub on n.L2.ID equals nnj.Key
            join cpj in cpSub on n.L3.ID equals cpj.Key
            join coj in coSub on n.L4.ID equals coj.Key
            select n
        )
        .OrderBy(o => o.L1.ID == wgSub.Key)
        .ThenBy(o => o.L2.ID == nnSub.Key)
        .ThenBy(o => o.L3.ID == cpSub.Key)
        .ThenBy(o => o.L4.ID == coSub.Key); 
```

我被卡住的地方是orderby（深度为4层）。我需要按每个子查询中的 ID 对输入查询进行排序，下一个是“thenby”等。我写的不正确。

如果用户指定了一个范围或一个计数（两者都暗示一个数量），我还需要实现一个 Take，可能针对每个级别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T23:18:05.987

我不太清楚你要做什么，但会是这样吗？

```
query = query
   .OrderBy(n => wgSub.First(g => g.Key == n.L1.ID).Value)
   .ThenBy(n => nnSub.First(g => g.Key == n.L1.ID).Value)
   ... 
```

# javascript - jQuery select 无法按 ID 查找表单，但在选择所有表单时有效

> ID：16114145
> 
> 赞同：-1
> 
> 时间：2013-04-19T22:00:47.180
> 
> 标签：javascript, jquery

我正在尝试使用 jQuery 按 ID 选择表单。目前，我的代码无法通过 ID 找到表单。但是，使用 jQuery 选择页面上的所有表单确实会选择表单并显示适当的 ID。我对为什么会发生这种情况的唯一想法可能是我的表单 ID 使用了无效字符。

```
console.log("Forms:", $('form'));
console.log("OrderDetailsForm:", $('form#CableSolve.Web.Models.Workflow.ExistingOrderDetailsModel')); 
```

![在此处输入图像描述](https://i.stack.imgur.com/93LC5.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T22:02:10.257

这 '。' 正在让 Jquery 认为它正在寻找具有各种类的 id CableSolve

# javascript - 如何在 jquery jtable 中插入滚动条？

> ID：16114147
> 
> 赞同：8
> 
> 时间：2013-04-19T22:01:00.897
> 
> 标签：javascript, jquery, jquery-jtable

我正在使用很棒的 jquery 插件[jtable](http://www.jtable.org)。但我找不到任何显示垂直滚动条的示例。

我尝试在包含它的 div 上设置 height 和 overflow.auto - 滚动条然后滚动整个表格，包括页眉 - 我只想滚动行而不是页眉而不是页脚。

有没有人找到办法做到这一点？

以某种方式起作用的解决方案是插入：

```
$('.jtable').wrap('<div class="jtable-main-container scroll-content" />'); 
```

和

```
.scroll-content {
     overflow-y: auto;
    width:100%;
 }
div.jtable-main-container {
  height:100%;
} 
```

并在 div 上设置高度。然而，它也滚动表头 - 但它比滚动整个 jtable 更好 - 我试图制作一个解决方案，其中 jtable 生成 2 个表 - 一个带有标题，一个带有正文，但标题不同步。

在这里看到它：http: [//jsfiddle.net/j5Q4L/3/](http://jsfiddle.net/j5Q4L/3/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-27T04:06:02.280

```
$('.jtable').wrap('<div class="jtable-main-container scroll-content" />');    
and

.scroll-content {
     overflow-y: auto;
    width:100%;
 }
div.jtable-main-container {
  height:100%;
} 
```

**谢谢！**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-27T04:15:50.713

将此添加到 css

```
table.jtable{
overflow-y: scroll;
display:block;
overflow-x: hidden;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T06:40:49.263

```
 <style type="text/css">
        #StudentTableContainer {
            width: 100%;
            display: block;
        }

            #StudentTableContainer tbody, .jtable tbody {
                height: 100px;
                overflow-y: auto;
                display: block;
            }
    </style>
    <script type="text/javascript">
        $(document).ready(function () {
            $('#StudentTableContainer').jtable({
                //...
            });
        });
    </script>
    <div id="StudentTableContainer" class="jtable"></div> 
```

# web-services - Outlook HTTP 邮件协议？

> ID：16114153
> 
> 赞同：2
> 
> 时间：2013-04-19T22:01:19.983
> 
> 标签：web-services, http, email, outlook, network-protocols

MS Outlook 支持 HTTP 作为电子邮件访问协议之一。作为提供商，它支持 Hotmail、MSN 和“其他”。问题 - 我在哪里可以找到协议的描述，以便我可以实现自定义 HTTP 邮件服务供 Outlook 使用？更好的是，那里有库存实施吗？

# html - 引导容器和跨度宽度问题

> ID：16114157
> 
> 赞同：0
> 
> 时间：2013-04-19T22:02:00.137
> 
> 标签：html, css, twitter-bootstrap

我是引导程序的新手，并在使用它的网站上工作。

我挑战它来证明`bootstrap.min.css`和`bootstrap.responsive.min.css`

我从 bootswatch 和一些免费模板中获得了这些文件，问题是网站的宽度。

在`bootstrap.min.css`

```
.container {width : 994px;} 
```

但在`bootstrap.responsive.min.css`

```
.container {width : 1170px} // which is too big, and i dont like it. 
```

但是，其他对象是从 .container 派生的，例如`.span*`. 所以这些文件彼此不一致。

我所做的是在我的应用程序中替换这些 css 文件的位置，它可以工作，但不确定我是否做对了。

你能建议吗？

# javascript - jQuery 1.9 中的 DOM 更改后事件无法触发

> ID：16114163
> 
> 赞同：0
> 
> 时间：2013-04-19T22:02:28.753
> 
> 标签：javascript, jquery, dom

我正在尝试为用户输入编写一个取消按钮。用户可以在双击项目后对其进行编辑，并且取消按钮将允许用户取消操作。

代码的双击部分效果很好，因为出现了一个带有取消按钮的文本输入框。但是现在由于 DOM 发生了变化，jQuery 不再选择新元素，因此当单击取消按钮时，不会触发事件。为了说明，代码如下：

```
<div id="main">
<ul class="todoList">
    <li id="todo-1" class="todo">
        <div class="text">New Todo Item. Doubleclick to Edit
         </div>
        <div class="actions"> <a href="#" class="edit">Edit</a></div>
    </li>
</ul>
</div> 
```

* * *

```
var currentTODO;
$('.todo').on('dblclick', function () {
    $(this).find('a.edit').click();
});

$('.todo a').on('click', function (e) {
    e.preventDefault();
    currentTODO = $(this).closest('.todo');
});

$('.todo a.edit').on('click', function () {

    var container = currentTODO.find('.text');

    if (!currentTODO.data('origText')) {
        // Saving the current value of the ToDo so we can
        // restore it later if the user discards the changes:

        currentTODO.data('origText', container.text());
    } else {
        // This will block the edit button if the edit box is already open:
        return false;
    }

    $('<input type="text">').val(container.text()).appendTo(container.empty());

    container.append(
        '<div class="editTodo">' +
        '<a class="cancel" href="#">Cancel</a>' +
        '</div>');

});

// The cancel edit link:

$('.cancel').on('click', function () {
    alert("oops");
}); 
```

或在这里：http: [//jsfiddle.net/S7f83/42/](http://jsfiddle.net/S7f83/42/)

因此，我的问题是，如何在 DOM 更改后“绑定”事件？非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T22:04:32.503

在您的示例中，事件绑定到绑定时存在的控件，并与选择器匹配。如果您希望将操作应用于新创建的控件，则应将事件绑定到`document`自身。由于它是最高级别的 DOM 元素，因此来自较低级别的所有事件都会向上传播。

在第二个参数中，您提供了上下文，因此只有从该上下文接收到事件才会触发该函数。

```
$(document).on('dblclick', '.todo', function () {
    $(this).find('a.edit').click();
}); 
```

我不会引用你的整个代码，但你会从这个中得到想法。

鼓励将侦听器绑定到文档，因为它不会创建与您拥有的控件一样多的绑定，只是一个顶级绑定，它等待事件在 DOM 树上传播。有关优化的更多信息：http: [//24ways.org/2011/your-jquery-now-with-less-suck/](http://24ways.org/2011/your-jquery-now-with-less-suck/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T22:09:59.700

利用

```
$('.todo').on('click', '.cancel', function () {
    alert("oops");
}); 
```

因此您将事件委托给现有元素（*the`.todo`*）

代替

```
$('.cancel').on('click', function () {
    alert("oops");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T22:17:15.110

2种方法

*   创建后将事件绑定到取消按钮[http://jsfiddle.net/S7f83/44/](http://jsfiddle.net/S7f83/44/)
*   将实时（委托）事件绑定到取消按钮[http://jsfiddle.net/S7f83/43/](http://jsfiddle.net/S7f83/43/)

在第二种情况下，我将事件委托绑定到最近的父级，因此事件不需要冒泡到要执行的文档元素。这可以提高一些性能。是否要将取消按钮放置在其他任何位置取决于使用情况。

编辑：每个 li 都有不同的 id，所以最好附加到班级`.todo`

`$('.todo').on('click', 'a.cancel', function () { alert("oops"); });`

# android - 在 3.0 之前的设备上参考 android.R.id.home

> ID：16114165
> 
> 赞同：2
> 
> 时间：2013-04-19T22:03:10.783
> 
> 标签：android, actionbarsherlock

有没有一种简单的方法可以参考运行低于 3.0 的设备上的主页按钮？

我可以在 3.0 及更高版本上执行 findViewById(android.R.id.home) ，但这无法在旧设备上运行。我不需要听点击，我只需要它的位置来定位另一个视图。

为了澄清，我指的是这个观点：http: [//developer.android.com/guide/topics/ui/actionbar.html#Home](http://developer.android.com/guide/topics/ui/actionbar.html#Home)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T22:25:58.257

我不知道你在做什么......但这听起来很老套:)

```
getWindow().getDecorView().findViewById(android.R.id.home) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-19T22:09:44.677

您可能不应该覆盖主页按钮的默认行为，但是看看[这里](https://stackoverflow.com/questions/8881951/detect-home-button-press-in-android/8883447#8883447)，看看它是否有帮助。

# sql-server-express - 重新连接默认数据库 man studio SQL express（4064 错误）

> ID：16114168
> 
> 赞同：0
> 
> 时间：2013-04-19T22:03:32.773
> 
> 标签：sql-server-express, sql-server-2008-express

我的笔记本电脑上安装了 SQL Server 2008 Express 和 Management Studio

我收到一个错误：

> 无法打开用户默认数据库。登录失败

我已经搜索了几个小时试图解决这个问题，但我已经超出了我的深度

我无法登录到 master 或任何其他数据库。

我确定我已经断开了默认数据库。

如何取回/重新连接？

# design-patterns - 服务定位器 - 相对于 DI 的缺点

> ID：16114170
> 
> 赞同：3
> 
> 时间：2013-04-19T22:03:42.313
> 
> 标签：design-patterns, dependency-injection, service-locator

这两者都达到了解耦的相同目标。但只是模式不同。

1.) 服务定位器相对于 DI 的缺点到底是什么？如果我做对了的话，有几个。

*   需要容器。所以你的组件需要一个容器代码
*   单元测试很难。

2.) SL 相对于 DI 的优势究竟是什么？

*   种类提供了依赖关系的封装。
*   无需显式宣传依赖项。

3.) 什么时候用什么？(DI/SL)。有生活中的例子吗？

这已经在几个线程中讨论过了。但对此没有真正简洁的答案。

# javascript - 动态创建输入 type='text' 框，然后将每个框的值添加到 Backbone.js 数组中

> ID：16114171
> 
> 赞同：0
> 
> 时间：2013-04-19T22:03:43.580
> 
> 标签：javascript, arrays, dynamic, backbone.js, input

我想知道如何基于 type='number' 框创建多个文本框...所以一旦有人将 1 添加到数字框，另一个文本框字段将被附加到主干.js 视图.. .然后一旦有人在这些文本框中输入值，将每个值添加到主干模型数组中的一个位置。这是一些代码：

```
 <label for='choices'># Choices for Students</label>
    <input type='number' name='choices' step=1 />

    initialize: function(opts) {
    this.model = new QuestionCreateModel({
        mode: null,
        choices: ['A', 'B', 'C'],
        Question: "Question goes here",
        MaxChoices: 0,
        MinChoices: 0,
        WordLimit: 0,
        CharLimit: 0,
    }), 
```

正如你所看到的，我想要输入 type='number' 然后加载文本框，这样我就可以将值分配给 Backbone 模型中的选择数组。

谢谢您的帮助！

-斯图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T14:38:26.557

我认为您的代码不足。

首先，您需要一个集合和一个模型。

然后你创建你的视图，它监听集合的添加、删除、更改或重置事件。如果您这样做，您的视图将处理这些事件并渲染您说它应该渲染的任何内容。

```
myView = Backbone.View.extend({
   initialize : function() {
       this.collection = this.options.collection || new myCollection();
       this.collection.on("add remove reset change", this.render, this)
   },
   events : {
       "change [type='number']" : "numberChanged"
   },
   numberChanged : function(ev) {
       var $el = $(ev.target || ev.srcElement);
       var model = $el.data("model");
       model.set("selectedChoice", $el.val());
   },
   render : function() {
       this.$el.empty();
       this.collection.each(function(model) {
           $("<yourinput>").data("model", model)
               .appendTo(this.$el);
       }, this);
   }
}); 
```

现在你的模型和收藏

```
var myModel = Backbone.Model.extend({
   initialize : function() {
      this.on("change:selectedChoice", this.onChoiceChanged, this);
   },
   onChoiceChanged : function(model,value) {
      // from here you know, that a value was selected, you now
      // can say the collection, it should create a new model
      if (this.collection) this.collection.push();
      // this will trigger a "add" event and your "view" will react and rerender.
   }
});

var myCollection = Backbone.Collection.extend({
   model : myModel
}); 
```

# c# - 使用 EF 将数据插入 SQL 数据库

> ID：16114175
> 
> 赞同：3
> 
> 时间：2013-04-19T22:04:08.523
> 
> 标签：c#, database, entity-framework, asp.net-mvc-4, http-post

我正在尝试创建 HttpPost 方法来创建新的数据库条目。它应该从不同的数据库表和“名称”中获取 2 个外部 ID。这是模型：

```
public class Domena
{
   public int DomenaID { get; set; }  // this domains ID
   public int TLDID { get; set; }     // foreign id
   public int KlientID { get; set; }  // foreign id
   public string Nazwa { get; set; }
   public virtual TLD TLD { get; set; }
   public virtual Klient Klient { get; set; }
} 
```

对，所以基本上这就是我现在所拥有的：

```
// GET: /Domena/Add_Domain
public ActionResult Add_Domain()
{
   ViewBag.TLDID = new SelectList(db.TLDs, "TLDID", "Typ");
   ViewBag.KlientID = new SelectList(db.Klienci, "KlientID", "KlientID");
   return View();
}

//
// POST: /Domena/Add_Domain

[HttpPost]
[ValidateAntiForgeryToken]
public ActionResult Add_Domain(Domena domena)
{
   if (ModelState.IsValid)
   {
      db.Domeny.Add(domena);
      db.SaveChanges();
      return RedirectToAction("Index");
   }
   ViewBag.TLDID = new SelectList(db.TLDs, "TLDID", "Typ", domena.TLDID);
   ViewBag.KlientID = new SelectList(db.Klienci, "KlientID", "KlientID", domena.KlientID);
   return View(domena);
} 
```

它现在的工作方式是，它将显示一个下拉列表，我可以从中选择 TLDID（按“Typ”）和 KlientID（按数据库中的“KlientID”条目）。它还要求一个“Nazwa”，这是必须写的名字。

我想删除从下拉列表中选择 KlientID 的选项，而是让 HttpPost 从链接中获取 KlientID。例子 ：

1.  我去客户的详细信息页面：`/Klient/Details/6`
2.  我单击 Add_Domain 链接，该链接获取当前查看的 KlientID 并带我到：`/Domena/Add_Domain/6`

所以，我的问题是，如何同时修改 Get 和 Post 方法，以便在数据库中为链接中的客户端 ID 创建一个新的“domena”条目？

我是否也必须更改任何内容？

这是我当前的 Add_Domain 视图字段集：

```
<fieldset>
    <legend>Domena</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.TLDID)
    </div>
    <div class="editor-field">
        @Html.DropDownList("TLDID", String.Empty)
        @Html.ValidationMessageFor(model => model.TLDID)
    </div>
    <div class="editor-label">
        @Html.LabelFor(model => model.KlientID)
    </div>
    <div class="editor-field">
        @Html.DropDownList("KlientID", String.Empty)
        @Html.ValidationMessageFor(model => model.KlientID)
    </div>
    <div class="editor-label">
        @Html.LabelFor(model => model.Nazwa)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Nazwa)
        @Html.ValidationMessageFor(model => model.Nazwa)
    </div>

    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T13:51:12.250

如果您使用默认的 MVC 路由`{controller}/{action}/{id}`，您应该能够利用该`id`参数。您的客户端页面中的`Add_Domain`链接将设置一个路由值：

```
@Html.ActionLink("Add a domain", "Add_Domain", "Domena",
    new { id = Model.KlientID }, null) 
```

您为 GET 操作提供一个参数并在模型上设置此参数：

```
public ActionResult Add_Domain(int id)
{
    ViewBag.TLDID = new SelectList(db.TLDs, "TLDID", "Typ");
    var model = new Domena { KlientID = id };
    return View(model);
} 
```

在您的视图中，您删除标签和验证消息，`KlientID`并用隐藏的输入替换下拉列表：

```
@Html.HiddenFor(model => model.KlientID) 
```

在 POST 操作中，您只需删除该`ViewBag.KlientID = ...`行。其余的可以保持不变。MVC 模型绑定器会将隐藏字段绑定到`domena.KlientID`属性。

该`id`参数在这里有点误用，因为这`id`通常与`Domena`控制器正在处理的模型有关，所以通常是 a`DomenaID`而不是 a `KlientID`。但它应该仍然有效。我会考虑使用查询参数来更清楚地表明路由中的最后一个参数是`KlientID`：

操作链接将是：

```
@Html.ActionLink("Add a domain", "Add_Domain", "Domena",
    new { klientID = Model.KlientID }, null) 
```

GET 操作是：

```
public ActionResult Add_Domain(int klientID)
{
    ViewBag.TLDID = new SelectList(db.TLDs, "TLDID", "Typ");
    var model = new Domena { KlientID = klientID };
    return View(model);
} 
```

POST 动作是一样的。然后创建的链接是`/Domena/Add_Domain?klientID=6`.

# android - 从 Android 应用程序调用 Java EE Web 服务

> ID：16114184
> 
> 赞同：2
> 
> 时间：2013-04-19T22:04:59.383
> 
> 标签：android, web-services, jakarta-ee

我从未使用过 Web 服务，我必须在 Java EE 服务器应用程序和 Android 客户端应用程序之间建立 Web 服务。

我的问题是：从 Android 应用程序使用 Java EE Web 服务的最佳方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T22:25:31.240

我建议在您的 Java EE 服务器中实现基于 REST 的 Web 服务。然后，您可以使用`JSONObject`这个宁静的服务。

`JSONObject`可以在这篇文章中找到使用 REST 的示例： [Android Rest Client](https://stackoverflow.com/questions/13403507/android-rest-client)

或者谷歌的这个视频：[http ://www.google.com/events/io/2010/sessions/developing-RESTful-android-apps.html](http://www.google.com/events/io/2010/sessions/developing-RESTful-android-apps.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-02T10:42:16.570

有一个[wiki 页面](https://github.com/CUTR-at-USF/SiriRestClient/wiki/Parsing-JSON-and-XML-on-Android)描述了如何在 Android 上解析 XML REST 服务。一般信息是您不能只使用 JAXB，因为[JAXB 不能在 android 上运行](http://www.docx4java.org/blog/2012/05/jaxb-can-be-made-to-run-on-android/)。我认为现在您必须使用 Java XML 支持来手动解析 XML REST 服务响应。

[我通过Using JAXB with Google Android](https://stackoverflow.com/questions/5461127/using-jaxb-with-google-android)找到了这个答案

# java - 使用 Jsoup POST 登录数据

> ID：16114189
> 
> 赞同：4
> 
> 时间：2013-04-19T22:05:46.360
> 
> 标签：java, android, post, web-scraping, jsoup

我正在尝试登录这个网站：[http ://deeproute.com](http://deeproute.com)

这是我的代码。

```
 Connection.Response res = null;
            Connection homeConnection = null;
            Document homePage = null;
            Map<String, String> loginCookies = null;
            try {
                res = Jsoup.connect("http://www.deeproute.com/")
                        .data("cookieexists", "false")
                        .data("name", user)
                        .data("password", pswd).method(Method.POST)
                        .execute();

            } catch (IOException e) {

                e.printStackTrace();
            }

            if (res != null) {

                loginCookies = res.cookies();

                try {
                    homePage = Jsoup.connect("http://www.deeproute.com")
                            .cookies(loginCookies).get();
                } catch (IOException e) {
                    e.printStackTrace();
                } 
```

不幸的是，这只是在未登录状态下返回相同的页面。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-20T22:55:39.723

您需要在发布前阅读表格！您缺少参数 subbera=Login。

* * *

```
public static void main(String[] args) throws Exception {

    Connection.Response loginForm = Jsoup.connect("http://deeproute.com/deeproute/default.asp")
            .method(Connection.Method.GET)
            .execute();

    Document document = Jsoup.connect("http://deeproute.com/deeproute/default.asp")
            .data("cookieexists", "false")
            .data("name", "username")
            .data("password", "pass")
            .data("subbera", "Login")
            .cookies(loginForm.cookies())
            .post();

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-11T16:27:50.190

可能晚了几个（实际上很多）个月，但我发现我必须在网站设计非常混乱的地方进行一些网络抓取（我需要从中提取数据的网站）。还必须先登录才能获取 cookie 信息。@MariuszS 的回答很有帮助，但唯一的问题是，我不确定预期的 Map/Key-Value-Pairs 应该是什么。多亏了 Javascript，我很快就检索到了表单的键和值，并且能够成功登录。这是Javascript：

```
var str = "";

//the form selector i.e.
//that which is to be submitted to. In
//my case, i needed to submit the entire body
var arr = $("input[name]");

for(var i = 0, l = arr.length; i<l; i++){
str+= '.data("'+ arr[i].name +'", "'+ arr[i].value +'")'
} 
```

将“str”的值附加到您的 Jsoup 请求之前

```
.method(Connection.Method.GET)
.execute(); 
```

希望这被证明对我有点帮助:)

# python - Python Tkinter one callback function for two buttons

> ID：16114193
> 
> 赞同：4
> 
> 时间：2013-04-19T22:06:02.747
> 
> 标签：python, button, callback, tkinter

I have been looking around for a long time for answers to this question but still hasn't find anything. I am creating a GUI using Tkinter, and I have two buttons that do mostly the same thing except they receive information from different widgets. One button is for an Entry widget and the other is for a Listbox widget. The callback function for these two buttons is long (about 200 lines), so I don't want to have separate functions for each button. I have if-statements in the beginning of this callback function to check which button is clicked, and then the codes will take the corresponding value. But I am not sure if the following code shows the right way to do this because apparently it doesn't work perfectly in my program. The callback function would only work for the first time, and if I click the other button I will receive an error. Here is a sample code that I created to illustrate the idea. Note that I want to check if the button is clicked, I do not want to check if the 'value' exists. Please help.

```
from Tkinter import *

root = Tk()

def DoSomething():
    # is this the right way to check which button is clicked?
    if button1:
        value = user_input.get()
    elif button2:
        value = choice.get(choice.curselection()[0])

    # then more codes that take 'value' as input.

button1 = Button(master,text='Search',command=DoSomething)
button1.pack()
button2 = Button(master,text='Search',command=DoSomething)
button2.pack()

user_input = Entry(master)
user_input.pack()
choice = Listbox(master,selectmode=SINGLE)
choice.pack()
#assume there are items in the listbox, I skipped this portion

root.mainloop() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T22:19:41.667

If you want to pass the actual widget into the callback, you can do it like this:

```
button1 = Button(master, text='Search')
button1.configure(command=lambda widget=button1: DoSomething(widget))
button2 = Button(master, text='Search')
button2.configure(command=lambda widget=button2: DoSomething(widget)) 
```

Another choice is to simply pass in a literal string if you don't really need a reference to the widget:

```
button1 = Button(..., command=lambda widget="button1": DoSomething(widget))
button2 = Button(..., command=lambda widget="button2": DoSomething(widget)) 
```

Another choice is to give each button a unique callback, and have that callback do only the thing that is unique to that button:

```
button1 = Button(..., command=ButtonOneCallback)
button2 = Button(..., command=ButtonTwoCallback)

def ButtonOneCallback():
    value = user_input.get()
    DoSomething(value)

def ButtonTwoCallback():
    value=choice.get(choice.curselection()[0])
    DoSomething(value)

def DoSomething(value):
    ... 
```

There are other ways to solve the same problem, but hopefully this will give you the general idea of how to pass values to a button callback, or how you can avoid needing to do that in the first place.

# sqlite - 为什么数据库时间值与 ruby 时间对象中创建的值不同？

> ID：16114196
> 
> 赞同：0
> 
> 时间：2013-04-19T22:06:29.950
> 
> 标签：sqlite, activerecord, ruby-on-rails-3.2

我的seeds.rb 文件中有以下代码：

```
# create a 7 day wall
for day in 1..7
    # create the days
    d = Day.create(day: day)
    # for each day create the time slots. Use 15 minute timeslots for now
    start_time = Time.new.beginning_of_day
    puts start_time
    end_time = start_time.end_of_day
    puts end_time
    begin
            d.time_slots << TimeSlot.create(time: start_time)
            start_time += 15.minutes
            puts start_time
    end while start_time <= end_time
            puts "Start time after exit: #{start_time}"

    campaign.days << d
end 
```

它像人们期望的那样创建正确的输出

```
2013-04-19 00:00:00 -0700
2013-04-19 23:59:59 -0700
2013-04-19 00:15:00 -0700
2013-04-19 00:30:00 -0700
2013-04-19 00:45:00 -0700
2013-04-19 01:00:00 -0700
2013-04-19 01:15:00 -0700
2013-04-19 01:30:00 -0700
2013-04-19 01:45:00 -0700
2013-04-19 02:00:00 -0700
2013-04-19 02:15:00 -0700
2013-04-19 02:30:00 -0700
2013-04-19 02:45:00 -0700
2013-04-19 03:00:00 -0700
2013-04-19 03:15:00 -0700
2013-04-19 03:30:00 -0700
.... 
```

当我使用 sqlite 浏览器查看我的数据库时，我也看到了这一点。当使用我的 rails 控制台检查数据库时，我看到：

```
1.9.3p194 :001 > TimeSlot.find(1)
  TimeSlot Load (17.3ms)  SELECT "time_slots".* FROM "time_slots" WHERE "time_slots"."id" = ? LIMIT 1  [["id", 1]]
 => #<TimeSlot id: 1, time: "2000-01-01 07:00:00", created_at: "2013-04-19 21:56:58", updated_at: "2013-04-19 21:56:58", campaign_id: nil, day_id: 1> 
```

为什么数据库中的记录显示错误的日期？时间戳是正确的，但时间字段是错误的。我不明白。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T23:18:07.227

这个问题有两件事：

1.  在rails中使用`time`和类型有一些细微差别。`datetime`请参阅[Rails 中的时间字段返回空白](https://stackoverflow.com/questions/2760963/time-fields-in-rails-coming-back-blank)
2.  时区是个问题。数据库以 UTC/GMT 存储时间。当`Time.new`被调用时，它使用系统的当前时区。

增加时间对象的代码是正确的。我只需要在显示时间时考虑时区。

# cakephp - 验证规则 - 访问其他字段 CakePHP

> ID：16114199
> 
> 赞同：0
> 
> 时间：2013-04-19T22:06:56.937
> 
> 标签：cakephp

我尝试编写自定义验证规则，并且需要将要保存的模型数据的所有其他字段来进行验证。我找不到将所有数据传递给自定义验证规则的方法。

要验证的数组：

```
[User]
    [Name] => 'Bob'
    [Message] => 'this is my message' 
```

证实：

```
public $validate = array(
'Message' => array(
   'rule' => 'customValidateFunction'
   )
); 
```

自定义验证功能：

```
public function customValidateFunction($messageArray){
   $valueOfMessage = $messageArray['Message'];
   $valueOfName = ?    
   return TRUE;
 } 
```

谁能指出我正确的方向？

# scala - I am trying to compare two Tuples

> ID：16114202
> 
> 赞同：1
> 
> 时间：2013-04-19T22:07:07.740
> 
> 标签：scala, pattern-matching, tuples

I am trying to write a function to compare tuples of similar type.

```
def compareTuples(tuple1: (String, String, Int), tuple2: (String, String, Int)): (String, String, Int) = {
   // if tuple1.Int < tuple2.Int return tuple1 else tuple2.
} 
```

How do I access the third element or the int in each tuple?

Thanks

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T22:17:45.887

To access a value in a tuple `t`, you can use `t._1`, `t._2`, etc.

For you that would then result in

```
def compareTuples(tuple1: (String, String, Int), tuple2: (String, String, Int)): (String, String, Int) = {
   if (tuple1._3 < tuple2._3) tuple1 else tuple2
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-30T14:38:21.917

To make this use case more generic, you can add a `maxBy` method to `Tuple` (of any size, but here we'll use `Tuple3`):

```
implicit class Tuple3Comparable[T1, T2, T3](t: (T1, T2, T3)) {
    type R = (T1, T2, T3)
    def maxBy[B](other: R)(f: R => B)(implicit ord: Ordering[B]): R = if(ord.lt(f(t), f(other))) other else t
} 
```

Then you can make comparisons such as:

```
("z", "b", 3).maxBy(("c", "d", 10)) (_._3 ) // selects the second one, ("c", "d", 10)
("z", "b", 3).maxBy(("c", "d", 10)) (_._1 ) // selects the first one, ("z", "b", 3) 
```

# php - 如何将 Twilio 中的新子帐户与应用程序 SMS url 链接

> ID：16114203
> 
> 赞同：1
> 
> 时间：2013-04-19T22:07:11.020
> 
> 标签：php, twilio

我正在开发一个门户网站，当每个新客户在门户网站上创建他的帐户时，他都会获得一个 twilio 子帐户和一个与之链接的电话号码。

现在我想将新子帐户中的所有这些新电话号码链接到父帐户中的 TwiML 应用程序，以便新号码能够使用 TwiML 应用程序的语音和 SMS URL。

我研究了 Twilio 文档，但无法找到完成此任务的方法。

语言：php

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-13T21:01:39.337

Twilio 开发人员布道者在这里！

TwiML 应用程序的范围仅限于每个子帐户，因此您实际上不能分配子帐户的电话号码来使用与不直接由该子帐户拥有的 TwiML 应用程序关联的语音和 SMS URL。

但是，您可以[通过 REST API 创建新的 TwiML 应用程序，](https://www.twilio.com/docs/api/rest/applications?utm_source=stackoverflow&utm_medium=jan2014&utm_campaign=stackathon)因此作为创建子帐户的设置过程的一部分，您还可以创建一个由该子帐户拥有的新 TwiML 应用程序，并在购买时为其分配编号他们。

# ios - 更改 UIViewController 后 NSNotificationCenter 崩溃

> ID：16114204
> 
> 赞同：0
> 
> 时间：2013-04-19T22:07:16.460
> 
> 标签：ios, objective-c, exc-bad-access, nsnotificationcenter

我现在正在使用 iOS SDK 6.0 实现一个应用程序，但我遇到了问题。

当我第一次打开我的 UIViewcontroller 时，我在其中实现了一些 NSNotificationCenter 来检测用户何时单击主页按钮，当我尝试单击主页按钮并返回我的应用程序时，它看起来就像在工作。但问题是，当我在我的 UIViewcontroller 上，然后我去另一个，回到这个 UIViewcontroller 并尝试点击主页按钮时，应用程序看起来像崩溃了。

这是我的代码：

```
In the viewDidLoad function :

[[NSNotificationCenter defaultCenter] addObserver: self
                                         selector: @selector(ApplicationEnteringBackground)
                                             name: UIApplicationDidEnterBackgroundNotification
                                           object: nil];
[[NSNotificationCenter defaultCenter] addObserver: self
                                         selector: @selector(ApplicationEnteringForeground)
                                             name: UIApplicationWillEnterForegroundNotification
                                           object: nil]; 
```

我刚刚实现了方法：

```
-(void)ApplicationEnteringBackground
{
   ...
}
-(void)ApplicationEnteringForeground
{
   ...
} 
```

问题看起来像这样：

![问题](https://i.stack.imgur.com/tbnDa.png)

感谢您的帮助 =)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T22:10:20.857

确保在您的第一个视图控制器被销毁时移除观察者 [[NSNotificationCenter defaultCenter] removeObserver:self];

# iphone - 解析 XML 以获取多个值

> ID：16114208
> 
> 赞同：-1
> 
> 时间：2013-04-19T22:08:02.117
> 
> 标签：iphone, ios, objective-c, xml, flurry

我正在从此 XML 中检索数据：

```
<appMetrics versionName="1.1.0" startDate="2013-04-16" metric="ActiveUsersByDay" groupBy="dayOfYear" endDate="2013-04-18" country="US" version="1.0" generatedDate="4/19/13 10:10 AM">
<day value="6" date="2013-04-16"/>
<day value="4" date="2013-04-17"/>
<day value="2" date="2013-04-18"/>
</appMetrics> 
```

我已经成功地使用了更简单的 XML，例如：

```
<appMetrics versionName="1.1.0" startDate="2013-04-16" metric="ActiveUsersByDay" groupBy="dayOfYear" endDate="2013-04-18" country="US" version="1.0" generatedDate="4/19/13 10:10 AM">
<day value="6"/>
<day value="4"/>
<day value="2"/>
</appMetrics> 
```

如何在同一个元素下同时提取日值和日期？我过去所做的只是搜索一个元素然后复制字符串，但是有多个部分，所以它不起作用。我必须把它变成一个数组吗？或者有没有办法分别取日值和日期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T22:29:30.007

你应该使用`NSXMLParser`. 在其委托回调中

```
parser:didStartElement:namespaceURI:qualifiedName:attributes: 
```

您可以在属性字典中找到所有属性（如`value`, ）。`date`

**编辑**

解析真的很简单。只需使用您的数据创建一个解析器，将 self 设置为委托并开始解析。维护一些可变数组，您可以在其中读取所有内容。

请参阅[NSXMLParser](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html#//apple_ref/doc/uid/20001984-57808)参考和[NSXMLParserDelegate](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/NSXMLParserDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40008632-CH1-DontLinkElementID_1)协议。

如果您需要更多帮助，请通过许多教程链接来[回答这个问题。](https://stackoverflow.com/questions/6116827/looking-for-a-good-tutorial-on-nsxmlparser)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T23:48:58.257

您将对其进行解析，以便获得以下嵌套结构。

```
{
    "appMetrics": {
        "versionName": "1.1.0",
        "startDate": "2013-04-16",
        "metric": "ActiveUsersByDay",
        "groupBy": "dayOfYear",
        "endDate": "2013-04-18",
        "country": "US",
        "version": "1.0",
        "generatedDate": "4/19/13 10:10 AM",
        "day": [
            {
                "value": "6",
                "date": "2013-04-16"
            },
            {
                "value": "4",
                "date": "2013-04-17"
            },
            {
                "value": "2",
                "date": "2013-04-18"
            }
        ]
    }
} 
```

您可以使用 解析它`NSXMLParser`，或者如果您担心性能，`libxml2`（这`NSXMLParser`只是一个 Objective-C 包装器）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T23:50:43.013

试试这个....

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict {          

 if([elementName isEqualToString:@"day"]) {
         currentValue = [attributeDict objectForKey:@"value"];
         currentDate = [attributeDict objectForKey:@"date"];
         NSLog(@"value:%@ date:@", currentValue, currentDate); 
    }
 }
} 
```

# c++ - 将 C++ 方法和变量并排绑定到表

> ID：16114211
> 
> 赞同：2
> 
> 时间：2013-04-19T22:08:24.993
> 
> 标签：c++, c, lua

我一直在尝试创建一个将 C++ API 暴露给 Lua 代码的“主机”应用程序，并且到目前为止已经相当成功，但是在尝试将“变量”与方法绑定时遇到了障碍。

我开发的将“类”绑定到 lua 的模式涉及每个类都有一个`_new`和`_gc`函数，以及`luaL_Reg RegData[]`每个类的静态。然后我可以将所需的函数分配到 RegData 数组中，并调用辅助方法将它们绑定到 lua。以下是一些说明我的方法的代码：

```
int Host::_new(lua_State * ls)
{
    Host ** udata = (Host **)lua_newuserdata(ls, sizeof(Host *);
    *udata = new Host();

    luaL_getmetatable(ls, "luaL_Host);
    lua_setmetatable(ls, -2);

    return 1;
}

int Host::_gc(lua_State * ls)
{
    Host * host = *(Host **)luaL_checkudata(ls, 1, "luaL_Host");
    delete host;
    return 0;
}

const luaL_Reg Host::RegistrationData[] =
{
    { "new"  , Host::_new },
    { "__gc" , Host::_gc  },
    { 0      , 0          }
}; 
```

在其他地方：

```
void LuaState::registerObject(const char * name, const luaL_Reg data[])
{
    int len = strlen(name) + 6;
    char * luaLname = new char[len];
    snprintf(luaLname, len, "luaL_%s", name);

    // create the metatable with the proper functions
    luaL_newmetatable(_state, luaLname);
    luaL_setfuncs(_state, data, 0);

    // copy the metatable on the stack
    lua_pushvalue(_state, -1);
    // assign the index to the copy
    lua_setfield(_state, -1, "__index");

    // expose the table as the global "Host"
    lua_setglobal(_state, name);

    delete luaLname;
} 
```

假设我希望我的 Lua 代码也能够查看键盘状态，并且希望 Lua 代码访问它看起来像：

```
host = Host.new()
pressed = host.Keyboard.getKeyPressed(1) 
```

将完全相同的模式复制到 Keyboard 类以设置键盘表变得很容易，但我似乎无法想出一个将键盘表添加到我的主机表的好方法。有没有一种简单的方法可以做到这一点而不会弄乱我的模式？我应该使用更好的模式吗？

我已经找到了大量关于如何创建 C-Lua API 的各个不同方面的资源，但在这样做时使用的模式/最佳实践方面并没有真正找到太多。另外，我知道有一些库，例如 LuaBind，可以帮助解决这个问题，但我更喜欢自己制作（至少是第一次）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:22:15.110

我决定对这个问题采取更多的面向对象/继承的方法，并计划看看 MOAI SDK 如何实现他们的 Lua API，到目前为止看起来很有希望。

# kdb - 如何保证一个kdb分区表数据不重复？

> ID：16114214
> 
> 赞同：1
> 
> 时间：2013-04-19T22:08:46.947
> 
> 标签：kdb

我创建了一个从日常存储文件中获取数据的分区数据库。它工作正常，但我担心如果我用同一天的文件运行分区脚本两次，kdb 可能会添加重复的行。

我应该使用'key'来检查分区表的存在还是有一种更简单的方法来确保kdb不会复制存储的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T00:08:52.093

我不确定你的问题是否是 1）你害怕你会多次加载同一个文件，或者 2）多个文件可能包含相同的数据，所以你不希望后续加载创建重复。

对于 1)，如果您用于创建数据库的每日存储文件未更新到并且具有唯一名称，您可能会跟踪哪些文件已加载并在后续运行时跳过这些文件。

2) 即使您不能对表进行物理键控，您也可能有某些“键”列，例如符号、日期、时间、边等。您可以检查当前正在加载的块的“键”值是否已经出现在日期分区。如果他们这样做，请删除这些记录，同时保留其他记录。

# javascript - jquery jTable中的表单布局？

> ID：16114219
> 
> 赞同：1
> 
> 时间：2013-04-19T22:09:39.537
> 
> 标签：javascript, jquery, jquery-jtable

我正在使用 jquery jtable 插件来编辑我的数据 - 它非常擅长 - 但我无法控制生成表单的布局，我只能获得带有标题的单列控件。

有没有人找到一种方法来布局为表格或其他东西？

编辑：

我找到了某种解决方案，如果我将所有控件设置为 widt 200 并设置：

```
form.jtable-dialog-form {
  width:440px;
}

div.jtable-input-field-container {
  float: left;
  margin: 0px 5px 5px 0; 
  padding: 2px;
} 
```

我得到了比以前更好的两列 - 有没有人找到更好的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-25T09:40:24.710

CSS 更改

```
 .custom_horizontal_form_field .jtable-input-field-container{
  width: 400px !important;
 }
 .custom_horizontal_form_field .jtable-input-field-container .jtable-input-label{
   width : 150px !important;
   float: left !important;
 } 
```

* * *

使用 jTable 的 formCreated 事件将自定义类名添加到表单中，即

```
 formCreated : function(event, data){
        $(data.form).addClass("custom_horizontal_form_field");
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-10T16:33:34.813

```
/*
#20130707
override _showAddRecordForm

    define you layout with a dom tag with id "__filedname__" and "__LABEL_fieldname__" as place holder for the input tag and label.
    these tag will be replace.
    - template id = JTableCreateFormTemplate

    <div id="JTableCreateFormTemplate" style="display: none">
        <!-- layout start from here, do not define <form> tag -->
        <div>
            <div><span id="__LABEL_fieldname1__"></span> : <span id="__fieldname1__"></span></div>
            <div><span id="__LABEL_fieldname2__"></span> : <span id="__fieldname2__"></span></div>
        </div>
        <!-- layout end -->
    </div>

    - hidden field will be append.
    - missing define fields in layout will be append by jtable default look
    - Default label was wrap by a <div>, in layout, the div is removed. pls add your own style!

override _showEditForm
    - template id = JTableEditFormTemplate

*/
(function ($) {
// copy the ori to another method name
$.hik.jtable.prototype._showAddRecordFormOri = $.hik.jtable.prototype._showAddRecordForm;
$.hik.jtable.prototype._showEditFormOri = $.hik.jtable.prototype._showEditForm;
//extension members
$.extend(true, $.hik.jtable.prototype, {

    /* Shows add new record dialog form.
    *************************************************************************/
    _showAddRecordForm: function () {
        var self = this;

        var template = $('#JTableCreateFormTemplate').clone().get(0);

        if(!template) {
            // call the ori if not found the template!
            self._showAddRecordFormOri();
            return;
        }
        //Create add new record form
        var $addRecordForm = $('<form id="jtable-create-form" class="jtable-dialog-form jtable-create-form" action="' + self.options.actions.createAction + '" method="POST"></form>');

        //Create input elements
        for (var i = 0; i < self._fieldList.length; i++) {

            var fieldName = self._fieldList[i];
            var field = self.options.fields[fieldName];

            var labelPos = $('#__LABEL_' + fieldName + '__', template).get(0);
            var inputPos = $('#__' + fieldName + '__', template).get(0);

            //Do not create input for fields that is key and not specially marked as creatable
            if (field.key == true && field.create != true) {
                continue;
            }

            //Do not create input for fields that are not creatable
            if (field.create == false) {
                continue;
            }

            if (field.type == 'hidden') {
                $(template).append( self._createInputForHidden(fieldName, field.defaultValue) );
                continue;
            }

            //Create a label for input
            var $label = self._createInputLabelForRecordField(fieldName);
            if(labelPos) {
                $(labelPos).replaceWith( $label.contents() );
            } else {
                $(template).append( $label );
            }
            //Create input element
            var $input = 
                    self._createInputForRecordField({
                        fieldName: fieldName,
                        formType: 'create',
                        form: $addRecordForm
                    });

            if(inputPos) {
                $(inputPos).replaceWith( $input.contents() );
            } else {
                $(template).append( $input );
            }
        }

        $addRecordForm.append( $(template).contents() );
        self._makeCascadeDropDowns($addRecordForm, undefined, 'create');

        //Open the form
        self._$addRecordDiv.append($addRecordForm).dialog('open');
        self._trigger("formCreated", null, { form: $addRecordForm, formType: 'create' });
    },

    /* Shows edit form for a row.
    *************************************************************************/
    _showEditForm: function ($tableRow) {
        var self = this;
        var record = $tableRow.data('record');

        var template = $('#JTableEditFormTemplate').clone().get(0);
        if(!template) {
            // call the ori if not found the template!
            self._showEditFormOri($tableRow);
            return;
        }

        //Create edit form
        var $editForm = $('<form id="jtable-edit-form" class="jtable-dialog-form jtable-edit-form" action="' + self.options.actions.updateAction + '" method="POST"></form>');

        //Create input fields
        for (var i = 0; i < self._fieldList.length; i++) {

            var fieldName = self._fieldList[i];
            var field = self.options.fields[fieldName];
            var fieldValue = record[fieldName];

            var labelPos = $('#__LABEL_' + fieldName + '__', template).get(0);
            var inputPos = $('#__' + fieldName + '__', template).get(0);

            if (field.key == true) {
                if (field.edit != true) {
                    //Create hidden field for key
                    $(template).append( self._createInputForHidden(fieldName, fieldValue) );
                    continue;
                } else {
                    //Create a special hidden field for key (since key is be editable)
                    $(template).append( self._createInputForHidden('jtRecordKey', fieldValue) );
                }
            }

            //Do not create element for non-editable fields
            if (field.edit == false) {
                continue;
            }

            //Hidden field
            if (field.type == 'hidden') {
                $(template).append( self._createInputForHidden(fieldName, field.defaultValue) );
                continue;
            }

            //Create a label for input
            var $label = self._createInputLabelForRecordField(fieldName);
            if(labelPos) {
                $(labelPos).replaceWith( $label.contents() );
            } else {
                $(template).append( $label );
            }

            //Create input element with it's current value
            var currentValue = self._getValueForRecordField(record, fieldName);
            var $input = 
                self._createInputForRecordField({
                    fieldName: fieldName,
                    value: currentValue,
                    record: record,
                    formType: 'edit',
                    form: $editForm
                });
            if(inputPos) {
                $(inputPos).replaceWith( $input.contents() );
            } else {
                $(template).append( $input );
            }

        }
        $editForm.append( $(template).contents() );
        self._makeCascadeDropDowns($editForm, record, 'edit');

        //Open dialog
        self._$editingRow = $tableRow;
        self._$editDiv.append($editForm).dialog('open');
        self._trigger("formCreated", null, { form: $editForm, formType: 'edit', record: record, row: $tableRow });
    },

});
})(jQuery); 
```

# unit-testing - PHPUnit 删除 Yii 单元测试的数据库记录

> ID：16114223
> 
> 赞同：1
> 
> 时间：2013-04-19T22:09:52.313
> 
> 标签：unit-testing, yii, phpunit

我正在使用 phpunit 在 Yii 中运行单元测试。所有测试都通过了，但是当我期望看到三个时，它在数据库中留下了一条记录，一条用于测试登录时的固定装置，两条来自我在测试成员注册时调用的 ARO 保存。

我在一个专门用于测试的单独数据库中执行此操作。这是我应该关注的事情还是可能与拆卸有关的典型行为？

“testReg”的记录保留在此代码之后的数据库中，即使它保存在“testReg2”之前。如果我注释掉该保存，“testReg2”仍然存在。如果我注释掉这两个，夹具数据仍然存在。

这是测试：

```
class UserTest extends CDbTestCase
{
public $fixtures=array(
    'users'=>'User',
);

/**
 * Valid user can login to backend
 * @return void
 */
public function testBackendUserLogin()
{
    $model = new LoginForm();
    $model->attributes = array('username'=>'member', 'password'=>'password');
    $this->assertTrue($model->validate(array('username', 'password')));
    $this->assertTrue($model->login());
}

/*
 * Only logged in super-admin or sub-admins with approved accounts may create new members
 * @return void
*/
public function testBackendMemberRegister(){
    $member=new Member();
    $member->register(array(
        'username'=>'testReg',
        'password'=>'password',
    ));
    $member2=new Member();
    $member2->register(array(
        'username'=>'testReg2',
        'password'=>'password',
    ));
} 
```

}

夹具：

```
return array(
    'user'=>array(
        'username'=>'member',
        'password'=>'$2a$08$U/z5X4Y1Ok4g20t6DWSwqezgNylpqdjKmrsMFBJDvLqQmOKMG6SvO',
        'created'=>'04-05-2013 00:00:00',
        'modified'=>'04-05-2013 00:00:00',
    )
); 
```

调用 ARO 保存的方法在 User 类中。成员类扩展用户类。

```
public function create(array $submission){
    $this->attributes=$submission;
    $this->hashPassword();
    $submission['password']=null;   //for safety
    if($this->save()){
        return true;
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T14:11:46.573

我断言在 r​​egister() 之后检查记录是否存在并且它通过了。一切都在前端工作，所以现在我将其归因于拆解，尽管我找不到明确的文档。

# c# - 泛型显式转换

> ID：16114226
> 
> 赞同：5
> 
> 时间：2013-04-19T22:10:15.123
> 
> 标签：c#, generics, casting

我实现了从字符串到名为 Foo 的对象的显式转换。

所以 => **Foo f = (Foo)"foo 数据"; 作品**

我需要实现一个将字符串转换为通用 T 的函数，在这种情况下，T 是 Foo 数据类型。

```
public T Get<T>(object o){
      // this always return false
      if (typeof(T).IsAssignableFrom(typeof(String)))
      {
            // when i by pass the if above this throws invalid cast exception
            return (T)(object)str;
      }
      return null; 
}

// When I call this, it generated an error
// Invalid cast from 'System.String' to Foo
Foo myObj = Get<Foo>("another foo object"); 

// when I use the dynamic keyword it works but this is C# 4.0+ feature, my function is in the older framework
return (T)(dynamic)str; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T22:52:47.710

还要看看@Jon Skeet的[这个答案](https://stackoverflow.com/questions/6275764/why-does-isassignablefrom-not-work-for-int-and-double/6275787#6275787)`IsAssignableFrom`——特别是关于.

我认为这不可能以您想象的方式实现。

我建议你在你的 Foo 类上放置一个“接口契约”——然后让泛型来完成它们的工作。

例如像这样的东西 - 但这只是我输入的一个快速解决方案......

```
class Factory 
{
    public static T Create<T, TVal>(TVal obj) where T : class, IFoo<TVal>, new()
    {
        return new T { Value = obj }; // return default(T);
    }
}
interface IFoo<TVal>
{
    TVal Value { get; set; }
}
class Foo : IFoo<string>
{
    public string Value { get; set; }
    public Foo() { }
}
// ...
public T Get<T, TVal>(TVal obj) where T : class, IFoo<TVal>, new()
{
    return Factory.Create<T, TVal>(obj);
} 
```

您可以以类似的方式调用它 - 前提是您`have that luxury`- 知道类型等
（但您可以解决这个问题并在需要时进行调整）

```
Foo foo = Get<Foo, string>("another text"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T01:20:52.883

使用反射的示例：

```
class Program
{
    static void Main(string[] args)
    {           
        Foo myObj = TypeResolver.Get<Foo>("Foo data");            
    }
}

class TypeResolver
{
    public static T Get<T>(object obj)
    {
        if (typeof(T).CanExplicitlyCastFrom<string>())
        {                             
            return obj.CastTo<T>();
        }
        return default(T);
    }
}

public static class Extensions
{
    public static bool CanExplicitlyCastFrom<T>(this Type type)
    {
        if (type == null)
            throw new ArgumentNullException("type");

        var paramType = typeof(T);
        var castOperator = type.GetMethod("op_Explicit", 
                                        new[] { paramType });
        if (castOperator == null)
            return false;

        var parametres = castOperator.GetParameters();
        var paramtype = parametres[0];
        if (paramtype.ParameterType == typeof(T))
            return true;
        else
            return false;
    }

    public static T CastTo<T>(this object obj)
    {            
        var castOperator = typeof(T).GetMethod("op_Explicit", 
                                        new[] { typeof(string) });
        if (castOperator == null)
            throw new InvalidCastException("Can't cast to " + typeof(T).Name);
        return (T)castOperator.Invoke(null, new[] { obj });
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T22:47:41.203

如果您通过，`(object)`那么它只会进行类型检查强制转换或框/拆箱（用 IL 术语：unbox-any） - 它不会使用运算符。一起使用泛型和运算符的唯一方法是通过`(dynamic)`而不是`(object)`，但这在运行时做了一点工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T22:52:17.490

这*真的*很难看，但测试通过了：

```
using Microsoft.VisualStudio.TestTools.UnitTesting;

namespace UnitTestProject1
{
    [TestClass]
    public class UnitTest2
    {
        public T Get<T>(string str)
            where T : CanCastFromString<T>, ICanInitFromString, new()
        {
            return (T)str;
        }

        [TestMethod]
        public void Test()
        {
            var result = Get<Foo>("test");

            Assert.IsNotNull(result);
            Assert.IsInstanceOfType(result, typeof(Foo));
            Assert.AreEqual("test", result.Value);
        }
    }

    public class Foo : CanCastFromString<Foo>
    {
        public string Value { get; set; }

        public override void InitFromString(string str)
        {
            Value = str;
        }
    }

    public abstract class CanCastFromString<T> : ICanInitFromString
        where T : CanCastFromString<T>, ICanInitFromString, new()
    {
        public static explicit operator CanCastFromString<T>(string str)
        {
            var x = new T();
            x.InitFromString(str);
            return x;
        }

        public abstract void InitFromString(string str);
    }

    public interface ICanInitFromString
    {
        void InitFromString(string str);
    }
} 
```

您可以通过在类上定义泛型然后将泛型函数约束到该抽象类来欺骗编译器，使其知道`T`可以显式转换泛型。`string``abstract``CanCastFromString``Get()`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T22:56:47.840

我假设您在课堂上定义了 T，但无论哪种方式，我都在方法上定义了它。如果您可以处理 T 上的类约束，则此方法有效。

```
namespace TestCast {
    class Program
    {
        public static T Get<T>(string o) where T : class
        {
            return o as T;
        }

        static void Main(string[] args)
        {
            Get<Breaker>("blah");
        }
    }
} 
```

如果转换无效，则返回 null，就像在 Du 的问题中，如果无法转换，则返回 null。对于字符串，这将在有限的情况下工作。`as`运算符也**不会**使用用户定义的转换运算符。

# dart - 应该在哪里 pubspec 以及多个应用程序有多少

> ID：16114228
> 
> 赞同：4
> 
> 时间：2013-04-19T22:10:21.500
> 
> 标签：dart

假设需要一个包含 3 个库和 2 个应用程序的*项目。*从 pub 文档中，我选择了如下结构。但是，这些应用程序已经足够不同了，它们最好有自己的目录。( [http://pub.dartlang.org/doc/#adding-a-dependency](http://pub.dartlang.org/doc/#adding-a-dependency) ) 的文档说将*pubspec.yaml*文件放在*顶层*。*项目*文件夹下的上下文中的*顶层*是什么？

 *如果有一个 pubspec 并且它位于*/project*级别并与库共享，那是否意味着任何库的用户而不是应用程序的用户将不必要地需要额外的包（如 good_stuff 和 big_stuff）？

```
/project
    /app
        /app1    (uses l1, package:good_stuff)
        /app2    (uses l1, l2, l3, package:big_stuff)
    /lib
        /l1
        /l2      (uses package:pathos/path.dart)
        /l3      (uses l1 and l2)
        /src
            /l1
            /l2
            /l3 
```

因此，给定这个所需的设置，将创建多少个 pubspec 以及在哪里来满足这些依赖关系。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T00:10:19.067

### 套餐

你应该把你的文件放在你的**包**`pubspec.yaml`的顶层。在 Pub 中，包是最大的自包含代码单元，它包含包独立运行所需的所有库、可执行文件、示例、文档、测试和工具。

 **在 Pub 中，大致有两种类型的包：

*   **库包**，实际上只是传统意义上的库，旨在供其他包使用。
*   **应用程序包**是其他包的消费者，它定义了一个可以在命令行、服务器、Web 或其他地方运行的应用程序。

这些是松散的定义，因为库包可能有可执行文件，而应用程序包可能有一些在其他应用程序中有用的可重用库。

通常，您希望尝试用几个分立的组件制作您的项目，这些组件可以单独更改和重复使用。这与为应用程序的所有部分制作一个包形成对比。

### 您的项目

我建议你有以下结构：

```
/project
  /app1
    - pubspec.yaml
  /app2
    - pubspec.yaml
  /mechanics
    - pubspec.yaml
    /lib
      l1.dart
      l2.dart
      l3.dart
      /src
        ... 
```

在这里，您将拥有 2 个应用程序包和一个库包。

几点注意事项：

*   您可以参考`mechanics`具有[路径依赖关系的包](http://pub.dartlang.org/doc/dependencies.html#path-packages)

*   如果您希望将整个项目捆绑在一起（例如，如果您要出售它），那么您只会真正想要`project/`作为最高级别。如果您预计`app1`并`app2`分开生活，则根本不需要`project/`。

*   如果您觉得他们可以分开生活得足够好，您完全可以制作`l1`,`l2`和他们自己的包。`l3`在这种情况下，只需将它们全部制作为自己的包装。

### 也可以看看：

*   [创建包](http://pub.dartlang.org/doc/#creating-a-package)
*   [包装布局](http://pub.dartlang.org/doc/package-layout.html)***

# ruby-on-rails - 通知邮件发送方式的验证

> ID：16114230
> 
> 赞同：2
> 
> 时间：2013-04-19T22:11:01.133
> 
> 标签：ruby-on-rails, email, notifications, actionmailer

时不时地，我发现自己正在构建一个功能，并且完全怀疑我的方法是否有意义或完全不合时宜。我希望有人能够在这里验证我的策略。

我正在构建一个系统，通过电子邮件通知用户在网站内已采取某些操作，如评论、帖子等。我目前有一个名为 ActionEvent 的模型，它跟踪所有这些交互。例如，每当用户发布评论时，都会创建一个新的 ActionEvent 来记录该操作（发布者、发布内容以及上下文）。理想情况下，当创建这些操作事件时，我还想通过电子邮件发送通知。有大量事件需要发送电子邮件，而且事件经常会导致不止一个人收到通知。

在这一点上，事情变得有点棘手，因为如果有人在 5 分钟内发表了 3 条评论，我不一定想用电子邮件淹没人们的收件箱。所以我决定建立一个 action_event_email 模型来跟踪所有已发送的电子邮件，以及发送的原因。这个想法是，在发送任何电子邮件之前，系统将检查以前发送的电子邮件，以确保在发送电子邮件之前的可接受时间范围内没有特定类型的电子邮件发送给特定用户。这有意义吗，还是我在这里遗漏了一些非常明显的东西？我担心一旦我建立了这个基础设施，就很难修改了。

有没有人这样做过？如果是这样，你是怎么做到的？

谢谢！

# java - String[] 字符串 = TextUtils.split(line, "-");

> ID：16114233
> 
> 赞同：1
> 
> 时间：2013-04-19T22:11:13.567
> 
> 标签：java, android, sqlite

我正在尝试使用 android eclipse 插件附带的字典示例应用程序。我正在尝试创建本地企业目录'。我的问题是这部分代码。

```
try {
    String line;

    while((line = reader.readLine()) != null) {
        String[] strings = TextUtils.split(line, "-");
        if (strings.length < 2) continue;
            addWord(strings[0].trim(), strings[1].trim());
        }
    } finally {
        reader.close();
    }
    mLoaded = true;
} 
```

此代码允许我将一行拆分为 2 个字符串，第一个字符串是连字符之前的任何内容，第二个字符串是连字符之后的任何内容。我正在尝试使用类似的代码，但我想将其分解为`3 strings`与 2 相对的大约

谢谢您的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T22:18:41.853

Split() 方法将根据您要拆分的表达式拆分字符串

例如：如果您想使用“-”进行拆分

字符串 "abcd-xyz" 将被拆分为 "abcd" 和 "xyz" 字符串 "abcd-xyz-1234" 将被拆分为 "abcd" 、 "xyz" 和 "1234"

这实际上取决于您传入的字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T22:17:21.223

您传递给 .split 的字符串实际上是正则表达式，因此您可以使用类似的东西拆分多个字符（例如，如果您的另一个拆分点是逗号）

```
String[] strings = TextUtils.split(line, ",|\\-"); 
```

它将在匹配的任何位置拆分字符串。

[http://docs.oracle.com/javase/tutorial/java/data/manipstrings.html](http://docs.oracle.com/javase/tutorial/java/data/manipstrings.html)

# c# - NextSibling 的内容没有被打印出来

> ID：16114235
> 
> 赞同：0
> 
> 时间：2013-04-19T22:11:21.867
> 
> 标签：c#, winforms, html-agility-pack

我有这段代码，我不知道为什么它没有打印出下一个容器的内容。

```
 HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
     doc.Load("Billing106.htm");

     foreach (HtmlNode div in doc.DocumentNode.SelectNodes("//div[starts-with(., ' SEMANTIC:')]"))
     {
        richTextBox1.Text += "SC: " + div.NextSibling.InnerText.ToString();
     } 
```

我在 HTML 文件中有几个条目，如下所示：

```
 <div style="top: 232px; left: 332px;" class="S4"> SEMANTIC:</div>
    <div style="top: 233px; left: 377px;" class="S3"> SBR02 specifies the relationship to the person insured.</div> 
```

我无法检查 class="S3" 因为有多个项目使用同一个类。

如果有人知道如何使它工作，将不胜感激，因为我想回家享受我的周末，我一定会送你一个电子啤酒，呵呵。

注意：它会打印 3 次“SC：”它在文档中出现 3 次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T06:26:24.903

这是因为这个 DIV 元素的下一个兄弟元素不是另一个 DIV，而是两个 DIV 之间的文本（是的，它们也是节点）。如果你想要 DIV 类型的下一个兄弟，你应该这样做：

```
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
     doc.Load("Billing106.htm");

 foreach (HtmlNode div in doc.DocumentNode.SelectNodes("//div[starts-with(., ' SEMANTIC:')]"))
 {
    richTextBox1.Text += "SC: " + div.SelectSingleNode("following-sibling::div").InnerText.ToString();
 } 
```

有关 XPATH 轴的说明，请参见此处：[XPATH Axes](http://www.w3schools.com/xpath/xpath_axes.asp)

# jquery - PrettyPhoto 根据文档不工作

> ID：16114236
> 
> 赞同：0
> 
> 时间：2013-04-19T22:11:23.607
> 
> 标签：jquery, prettyphoto

我遵循了他们网站上的所有文档，但我无法让它工作。

我将脚本加载复制到我的脑海中，在正文关闭之前激活脚本，并将 prettyPhoto 钩子放在我的链接上。

但是当我点击链接时，没有任何动画，它只是打开链接指向它自己页面的全尺寸图像。

```
<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<script src="js/jquery.js" type="text/javascript" charset="utf-8"></script>
<link rel="stylesheet" href="css/prettyPhoto.css" type="text/css" media="screen" charset="utf-8" />
<script src="js/jquery.prettyPhoto.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>

<a href="superlow.jpg" rel="prettyPhoto"> sldjflkdjsf </a>

<script type="text/javascript" charset="utf-8">
  $(document).ready(function(){
    $("a[rel^='prettyPhoto']").prettyPhoto();
  });
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T22:38:55.833

在我看来，要么找不到您的脚本，要么可能是编码问题。

您确定您的两个脚本都已加载吗？因为您的代码在 Safari 上对我有用。注意：对于此类问题，请始终参考您的浏览器类型和版本。

并且您的文档（设置为 charset=ISO-8859-1）与您的脚本和 css（设置为 utf-8）之间存在文档编码不匹配，这可能会导致问题。将它们都设为 utf-8。

只要这两件事都是合理的，您的示例就应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-30T04:55:00.843

试试这个

用 xhref 替换你的锚标签的 href

```
$(document).ready(function() {
    $('a[xhref]').each(function() {
       $(this).attr('href', $(this).attr('xhref'));
    });
    $("a[rel^='prettyPhoto']").prettyPhoto();
}); 
```

即使它显示任何类型的问题更换

```
$(document).ready(function(){       with 

$(window).bind('load', function(){ 
```

将解决问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-30T14:21:04.163

所有主流浏览器都支持 rel 属性。

注意：Opera 或 Safari 不支持“搜索”值。

参考：[http ://www.w3schools.com/jsref/prop_link_rel.asp](http://www.w3schools.com/jsref/prop_link_rel.asp)

如果你用'rel'计算元素，你会发现零（0）。

$("a[rel^='prettyPhoto']").length 将返回零

这就是我认为的问题

只需使用 class 而不是 rel .. 它会工作:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-05T18:45:21.423

```
<script type="text/javascript" charset="utf-8">
    $(document).ready(function () {
        $("a[data-rel='prettyPhoto']").prettyPhoto();            
    });
</script> 
```

这适用于我刚刚添加

> **数据-rel**而不是**rel**

# ruby-on-rails - Ruby 数组解析 (REGEX)

> ID：16114240
> 
> 赞同：-2
> 
> 时间：2013-04-19T22:11:48.660
> 
> 标签：ruby-on-rails, ruby, regex, arrays

我在 ruby​​ 中有一个数组，其值如下：

```
arr

Value 1 : tb-5-atf, ac-23 
Value 2 : tb-5-atf, ac-5498
Value 3 : tb-5-atf, ac-236 
```

我只想从中提取最后一个“-”之后的数字，即 23、5498、236。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T22:15:09.143

```
arr.map {|el| el.split('-').last} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T04:50:49.630

我很懒：

```
[
  'Value 1 : tb-5-atf, ac-23',
  'Value 2 : tb-5-atf, ac-5498',
  'Value 3 : tb-5-atf, ac-236'
].map{ |r| r[/-(\d+)$/, 1] } 
```

返回：

```
[
    [0] "23",
    [1] "5498",
    [2] "236"
] 
```

如果你想要整数值：

```
[
  'Value 1 : tb-5-atf, ac-23',
  'Value 2 : tb-5-atf, ac-5498',
  'Value 3 : tb-5-atf, ac-236'
].map{ |r| r[/-(\d+)$/, 1].to_i } 
```

返回：

```
[
    [0] 23,
    [1] 5498,
    [2] 236
]

```

虽然可以使用`split('-')`or来执行此操作`scan`，但这样做会生成临时数组，然后将它们丢弃，浪费 CPU 周期或导致代码在尝试解开数组时不简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T22:25:46.093

我觉得这样做很有趣：

```
arr.map{|v| v.reverse.to_i.to_s.reverse.to_i} 
```

（不要在生产中使用它，这只是另一种思考方式。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T22:15:23.353

我认为这很简单，您应该在 google 上搜索一下关于 ruby​​ 字符串的信息。但是，您将需要这样的东西

```
arr[i].split("-").last.to_i 
```

我在irb上试过这个

```
1.9.3p194 :003 > "tb-5-atf, ac-23".split("-").last.to_i
=> 23 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T22:20:47.933

也许是这样：

```
a = [["tb-5-atf", "ac-23"],["tb-5-atf", "ac-5498"], ["tb-5-atf", "ac-236"] ]

r = a.map { |i|  i.last.split("-").last.to_i }
p r # output => [23, 5498, 236] 
```

# python - 函数中的变量赋值

> ID：16114242
> 
> 赞同：0
> 
> 时间：2013-04-19T22:12:06.913
> 
> 标签：python, function, variables, game-physics

我正在编写一个基本的格斗游戏，并试图让它在每次攻击时从敌人的生命值中减去攻击量并打印敌人的当前生命值。但是，在我运行脚本一次并循环后，运行状况会重置为其原始数量。我怎样才能用当前的健康放弃敌人的健康？

这是脚本：

```
import random

while True:
    HEALTH = 20
    ENEMY_HEALTH = 20

    def punch():
        mylist = (xrange(0,3))
        x = random.choice(mylist)
        if x == 3:
            print"your hit was very effective enemy lost 3 hp"
            print("Enemy Health is" ENEMY_HEALTH - x)
        if x == 2:
            print "Your punch was effective enemy lost 2 hp"
            print("Enemy Health is" ENEMY_HEALTH - x)
        if x == 1:
            print "enemy lost 1 point"
            print("Enemy Health is" ENEMY_HEALTH - x)

    def kick():
        mylist = (xrange(0,5))
        x = random.choice(mylist)
        if x > 3:
            "%d" % x
            print"your kick was very effective enemy lost %d hp"
            print("Enemy Health is", ENEMY_HEALTH - x)
        if x > 1 < 3:
            "%d" % x
            print "Your kick was effective enemy lost %d hp"
            print("Enemy Health is" ENEMY_HEAlTH - x)
        if x == 1:
            print "enemy lost 1 point"
            print("Enemy Health is" ENEMY_HEALTH - x)

    def attackChoice(c):
        if c == "punch":
            punch()
        if c == "kick":
            kick()

    c = raw_input("Choice Attack\nKick Or Punch: ")
    attackChoice(c) 
```

我希望它打印：

```
choose attack
kick or punch:kick
enemy lost 3 hp
enemy's heath is 17
choose attack
kick or punch:punch
enemy lost 1 hp
enemy's health is 16 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T22:17:22.017

您在每个循环步骤中重置 HEALTH 和 ENEMY_health。您必须在循环外初始化它们，并在循环内进行操作，如下所示：

```
HEALTH = 20
ENEMY_HEALTH = 20    
while True:
    #your code
    ENEMY_HEALTH = ENEMY_HEALTH - x 
```

此外，您需要显式设置新值，如示例代码段中所示。

另外，请阅读 python 风格指南： http: [//www.python.org/dev/peps/pep-0008/](http://www.python.org/dev/peps/pep-0008/)

所有像 HEALTH 这样的大写名称都用于常量，但您不希望它表示常量，所以请使用小写...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T22:20:36.633

*   正如 Blender 指出的那样，您并没有更改 ENEMY_HEALTH 的值，您只是从中减去 x 并打印它而不重新分配该值。
*   将您的初始分配移出 while 循环。
*   你的踢码中有额外的字符串
*   使用 randint 而不是建立一个列表并选择一个

也许像：

```
import random
health = 20
enemy_health = 20

def punch():
    global enemy_health
    x = random.randint(1,3)
    enemy_health -= x
    if x == 3:
        print"your hit was very effective enemy lost 3 hp"
    if x == 2:
        print "Your punch was effective enemy lost 2 hp"
    if x == 1:
        print "enemy lost 1 point"
    print "Enemy Health is", enemy_health

def kick():
    global enemy_health
    x = random.randint(1,5)
    enemy_health -= x
    if x > 3:
        print "your kick was very effective enemy lost %d hp" % x
    if x > 1 < 3:
        print "Your kick was effective enemy lost %d hp" % x
    if x == 1:
        print "enemy lost 1 point"
    print "Enemy Health is", enemy_health

def attackChoice(c):
    if c == "punch":
        punch()
    if c == "kick":
        kick()

while True:
    c = raw_input("Choice Attack\nKick Or Punch: ")
    attackChoice(c) 
```

# python - 使用 Selenium 获取整个页面的内容

> ID：16114244
> 
> 赞同：24
> 
> 时间：2013-04-19T22:12:17.453
> 
> 标签：python, selenium

使用 Selenium 进行浏览器自动化 (Python)。

如果我理解正确，将使用以下代码

```
inputElement = driver.find_element_by_name("q")
the_text = inputElement.text 
```

我将如何在整个页面上获取文本而不是在特定元素中查看？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-04-19T22:24:38.197

看起来整个页面文本可以在以下位置找到：

```
driver.page_source 
```

# c - 在文件范围内可变修改的数组和下标值既不是数组也不是指针

> ID：16114245
> 
> 赞同：0
> 
> 时间：2013-04-19T22:12:21.540
> 
> 标签：c, variables, dynamic-allocation, n-queens

我有以下代码用于使用 pthreads 计算 n-queen 谜题。但是当我尝试编译该代码时，我收到以下错误消息：

> wikithread.c:7:5：错误：在文件范围内可变地修改了“hist”

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <pthread.h>

int NTHREADS, SIZE; 
int hist[SIZE];
int count = 0;

int solve(int col, int tid)
{
    int start = tid * SIZE/NTHREADS;
    int end = (tid+1) * (SIZE/NTHREADS) - 1;
    int i, j;
    if (col == SIZE) 
    {
        count++;
    }

    #define attack(i, j) (hist[j] == i || abs(hist[j] - i) == col - j)
    for (i = start; i <= end; i++) {
        for (j = 0; j < col && !attack(i, j); j++);
        if (j < col) continue;

        hist[col] = i;
        solve(col + 1, tid);
    }

    return count;
}

void *worker(void *arg)
{
    int tid = (int)arg;
    solve(0, tid);
}

int main(int argc, char* argv[])
{
    pthread_t* threads;
    int rc, i;

    // checking whether user has provided the needed arguments
    if(argc != 3)
    {
        printf("Usage: %s <number_of_queens> <number_of_threads>\n", argv[0]);
        exit(1);
    }

    // passing the provided arguments to the SIZE and NTHREADS 
    // variable, initializing matrices, and allocating space 
    // for the threads
    SIZE = atoi(argv[1]);
    NTHREADS = atoi(argv[2]);
    threads = (pthread_t*)malloc(NTHREADS * sizeof(pthread_t));

    // declaring the needed variables for calculating the running time
    struct timespec begin, end;
    double time_spent;

    // starting the run time
    clock_gettime(CLOCK_MONOTONIC, &begin);

    for(i = 0; i < NTHREADS; i++) {
        rc = pthread_create(&threads[i], NULL, worker, (void *)i);
        assert(rc == 0); // checking whether thread creating was successfull
    }

    for(i = 0; i < NTHREADS; i++) {
        rc = pthread_join(threads[i], NULL);
        assert(rc == 0); // checking whether thread join was successfull
    }

    // ending the run time
    clock_gettime(CLOCK_MONOTONIC, &end);

    // calculating time spent during the calculation and printing it
    time_spent = end.tv_sec - begin.tv_sec;
    time_spent += (end.tv_nsec - begin.tv_nsec) / 1000000000.0;
    printf("Elapsed time: %.2lf seconds.\n", time_spent);

    printf("\nNumber of solutions: %d\n", count);

    return 0;
} 
```

如果我更改上部，并为数组动态分配内存，则会收到以下错误：

```
int NTHREADS, SIZE; 
int *hist;
hist = (int*)malloc(SIZE * sizeof(int)); 
```

然后我收到以下错误：

> wikithread.c:8:1：警告：数据定义没有类型或存储类[默认启用] wikithread.c:8:1：错误：'hist' wikithread.c:7:6 的类型冲突：注意：以前'hist' 的声明在这里 wikithread.c:8:1: 错误: 初始化元素不是常量 wikithread.c: 在函数'solve'中: wikithread.c:23:27: 错误: 下标值既不是数组也不是指针也不是向量wikithread.c:23:27：错误：下标值既不是数组也不是指针也不是向量wikithread.c:26:7：错误：下标值既不是数组也不是指针也不是向量

任何人都可以帮我解决问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T22:14:57.337

您可以`SIZE`在未定义数组的情况下使用它来初始化数组——

```
int NTHREADS, SIZE; 
int hist[SIZE]; 
```

毫无疑问，这会导致问题。

至于你的第二个错误，你在文件范围内有这个：

```
hist = (int*)malloc(SIZE * sizeof(int)); 
```

但是在函数体之外不允许声明，只能声明。

# json - 底层连接已关闭：发送时发生意外错误

> ID：16114246
> 
> 赞同：0
> 
> 时间：2013-04-19T22:12:22.520
> 
> 标签：json, wcf, twitter

我有一个使用返回 JSON 的 webHttpBinding 的 WCF 服务。该服务向 Twitter API 1.1 版发出请求以获取推文。该服务在我的本地机器和生产机器上运行良好，但在我们的 DEV 机器上出现此错误。

**“底层连接已关闭：发送时发生意外错误。”**

*   Web.Config 文件是相同的（除了值，即连接字符串等）
*   每台服务器上的代码都是一样的。
*   我已验证两台服务器都运行相同的防病毒软件，并且是最新的。
*   我检查了所有 IIS 设置，它们是相同的，两台服务器都是一样的
*   我增加了 webHttpBinding 中的 maxReceivedMessageSize 和 maxBufferSize 值
*   我增加了 dataContractSerializer 中的 maxItemsInObjectGraph 值
*   我增加了服务的超时值
*   我将服务添加到 DEV 服务器上的另一个站点，它返回相同的错误
*   我已经阅读了 StackOverflow 上与此错误相关的所有帖子，但没有运气

这让我相信 DEV*机器*上的某些东西导致了这个错误，但我不确定是什么。我错过了什么？是否有可能导致此错误的服务器设置？

欢迎任何建议。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T16:34:47.547

谢谢大家的建议。这个问题是由我们的服务器管理员完成的一些过滤引起的。由于我们没有过滤我们的 DEV 服务器上的流量，所以我没有遇到任何问题。

# c# - C# 性能计数器数据“遍布地图”

> ID：16114249
> 
> 赞同：4
> 
> 时间：2013-04-19T22:12:50.487
> 
> 标签：c#, .net, performance, performancecounter

我需要计算整个系统以及特定进程的 CPU 和 RAM 使用率。我从来没有在 C# 中这样做过。所以我能够想出以下代码（我主要从这个网站上的示例中获取）：

```
try
{
    Process proc = Process.GetCurrentProcess();
    string strProcName = proc.ProcessName;
    Console.WriteLine("Process: " + strProcName);

    using (PerformanceCounter total_cpu = new PerformanceCounter("Process", "% Processor Time", "_Total", true))
    {
        using (PerformanceCounter process_cpu = new PerformanceCounter("Process", "% Processor Time", strProcName, true))
        {
            for (; ; )
            {
                Console.CursorTop = 1;
                Console.CursorLeft = 0;

                float t = total_cpu.NextValue() / Environment.ProcessorCount;
                float p = process_cpu.NextValue() / Environment.ProcessorCount;
                Console.WriteLine(String.Format("Total CPU (%) = {0}\t\t\nApp CPU (%) = {1}\t\t\nApp RAM (KB) = {2}",
                    t, p, Process.GetCurrentProcess().WorkingSet64 / (1024)
                    ));

                System.Threading.Thread.Sleep(100);
            }
        }
    }
}
catch(Exception ex)
{
    Console.WriteLine("Exception: " + ex);
} 
```

但它给我的是“遍布地图”的数据。看一看：

![在此处输入图像描述](https://i.stack.imgur.com/pXeR4.jpg)

![在此处输入图像描述](https://i.stack.imgur.com/TPGrE.jpg)

![在此处输入图像描述](https://i.stack.imgur.com/aWgvt.jpg)

所以有人可以回答这些问题：

1.  似乎运行这样的性能计数器本身就是一项非常昂贵的操作——它将 CPU 使用率提高了大约 5%。我用 C++ 做了很多 CPU 计数器，它们几乎不需要 CPU 时间来运行。

2.  除了我上面所说的之外，上面的循环第一次运行时有**2 秒的延迟**！它实际上**挂断了 2 秒**。正常吗？如果是的话，我不敢相信他们居然敢称它为*性能计数器*：）

3.  尽管我的 RAM 读数与任务管理器报告的非常接近，但 CPU 输出完全关闭。有人可以告诉我我在这里做错了什么吗？

4.  此外，我似乎找不到[PerformanceCounter 类](http://msdn.microsoft.com/en-us/library/3t90y2y1.aspx)的任何文档，可以解释所有这些：`% Processor Time`、`_Total`等等？最重要的是，那些只有英文吗？他们应该本地化吗？

5.  那里的进程由其名称指定。但是，如果我有多个同名进程正在运行，该怎么办。然后怎样呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T00:33:34.907

这是我想出的，但这是使用非托管 API：

```
[DllImport("kernel32.dll")]
[return: MarshalAs(UnmanagedType.Bool)]
static extern bool GetProcessTimes(IntPtr hProcess, out System.Runtime.InteropServices.ComTypes.FILETIME
    lpCreationTime, out System.Runtime.InteropServices.ComTypes.FILETIME lpExitTime, out System.Runtime.InteropServices.ComTypes.FILETIME lpKernelTime,
    out System.Runtime.InteropServices.ComTypes.FILETIME lpUserTime);

[DllImport("kernel32.dll")]
[return: MarshalAs(UnmanagedType.U4)]
static extern UInt32 GetTickCount();

static bool gbSetOldData = false;
static UInt32 gmsOldTickCount = 0;
static ulong gnsOldKernelTime = 0;
static ulong gnsOldUserTime = 0;

public static double getCPUUsageForProcess(int nProcID = 0)
{
    //Get CPU usage for the process in with ID in 'nProcID'
    //'nProcID' = process ID, or 0 for the current process
    //RETURN:
    //      = CPU usage: [0.0 - 1.0]
    //      = Negative if error
    double fCPUUsage = -1.0;
    try
    {
        IntPtr hProcess = nProcID != 0 ? Process.GetProcessById(nProcID).Handle : Process.GetCurrentProcess().Handle;

        System.Runtime.InteropServices.ComTypes.FILETIME ftCreated, ftExit, ftKernel, ftUser;
        if (GetProcessTimes(hProcess, out ftCreated, out ftExit, out ftKernel, out ftUser))
        {
            UInt32 dwmsNewTickCount = GetTickCount();

            ulong nsNewKernelTime = (ulong)ftKernel.dwHighDateTime;
            nsNewKernelTime <<= 32;
            nsNewKernelTime |= (ulong)(uint)ftKernel.dwLowDateTime;

            ulong nsNewUserTime = (ulong)ftUser.dwHighDateTime;
            nsNewUserTime <<= 32;
            nsNewUserTime |= (ulong)(uint)ftUser.dwLowDateTime;

            if (gbSetOldData)
            {
                //Adjust from 100-nanosecond intervals to milliseconds
                //100-nanosecond intervals = 100 * 10^-9 = 10^-7
                //1ms = 10^-3
                fCPUUsage = (double)((nsNewKernelTime - gnsOldKernelTime) + (nsNewUserTime - gnsOldUserTime)) /
                    (double)((dwmsNewTickCount - gmsOldTickCount) * 10000);

                //Account for multiprocessor architecture
                fCPUUsage /= Environment.ProcessorCount;

                //In case timer API report is inaccurate
                if (fCPUUsage > 1.0)
                    fCPUUsage = 1.0;
            }
            else
            {
                //For the first run, assume no CPU usage
                fCPUUsage = 0.0;
            }

            //Remember data
            gnsOldKernelTime = nsNewKernelTime;
            gnsOldUserTime = nsNewUserTime;
            gmsOldTickCount = dwmsNewTickCount;
            gbSetOldData = true;
        }
    }
    catch
    {
        //Failed
        fCPUUsage = -1.0;
    }

    return fCPUUsage;
} 
```

这就是你所说的：

```
int nDummy = 1;

for (; ; )
{
    double fCPU = getCPUUsageForProcess();

    Console.CursorTop = 1;
    Console.CursorLeft = 0;

    int nCpu = (int)(fCPU * 100);
    Console.WriteLine("CPU%: {0}\t\t", nCpu);

    //Time filler
    long j = 0;
    for (; j < 1000000; j++)
    {
        nDummy += (int)Math.Cos(1 / (j + 1));
    }

    //Don't hog all CPU time!
    System.Threading.Thread.Sleep(500);
} 
```

我不确定.NET 是否有类似的方法。如果有一个（没有我上面发布的所有限制）我想听听吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-08T18:23:39.013

> 您的代码看起来不错，但总 cpu 使用计数器是错误的。你有进程而不是处理器。也不要像那样拆分百分比，因为 Windows 总是使用负载较小的 cpu，除非您的应用程序是为多线程而设计的。另一件事是你的样品，它太快了。我把它放慢了1秒。你应该从柜台得到更好的反馈

```
try
{
    Process proc = Process.GetCurrentProcess();
    string strProcName = proc.ProcessName;
    Console.WriteLine("Process: " + strProcName);

    using (PerformanceCounter total_cpu = new PerformanceCounter("Processor", "% Processor Time", "_Total", true))
    {
        using (PerformanceCounter process_cpu = new PerformanceCounter("Process", "% Processor Time", strProcName, true))
        {
            for (; ; )
            {
                Console.CursorTop = 1;
                Console.CursorLeft = 0;

                float t = total_cpu.NextValue() ;
                float p = process_cpu.NextValue();
                Console.WriteLine(String.Format("Total CPU (%) = {0}\t\t\nApp CPU (%) = {1}\t\t\nApp RAM (KB) = {2}",
                    t, p, Process.GetCurrentProcess().WorkingSet64 / (1024)
                    ));

                System.Threading.Thread.Sleep(1000);
            }
        }
    }
}
catch(Exception ex)
{
    Console.WriteLine("Exception: " + ex);
} 
```

# php - PHP 脚本未定义属性和无效参数错误

> ID：16114254
> 
> 赞同：2
> 
> 时间：2013-04-19T22:13:20.267
> 
> 标签：php

我正在尝试运行这个 PHP 文件，但我不断收到类似的错误

```
Undefined property: stdClass::$games 
```

和

```
Invalid argument supplied for foreach() 
```

这是错误[http://imageshack.us/a/img845/6270/34356212.jpg](http://imageshack.us/a/img845/6270/34356212.jpg)的图片，下面是我正在运行的脚本减去我的 Steam API 密钥。

```
<?php
$api_key = '........';      //Steam API Key, Required to work
$lines = file('parse1.txt');                        //reads in the file with the list of user numbers
$game_id = 550;                                     //Steam Game ID, 440 is TF2

foreach ($lines as $usernumber) {                    //loops line by line
$link = 'http://api.steampowered.com/IPlayerService/GetOwnedGames/v0001/?key=' . $api_key . '&steamid=' . $usernumber . '&format=json';
$json = file_get_contents($link);                   //Reads link (this ^)
$data = json_decode($json);
foreach ($data->response->games as $game) { 
    if ($game->appid == $game_id) {
        $playtime = $game->playtime_forever;
        if (($playtime < 5400) && ($playtime > 1)) {
        //echo 'Playtime for ', $usernumber, ' is ' . $playtime."<br>";
                echo $usernumber."<br>";        
            }
        }
    }
}
?> 
```

Parse.txt 包含蒸汽 ID，例如（76561197987683795、76561198063283029）我认为它与嵌套的 IF 命令有关，但我不知道我缺少什么，任何帮助都会很大！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T22:16:25.357

json 中的`response`对象不包含`games`数组。

您需要为代码添加更多防御措施，以处理外部数据不符合预期的情况：

```
if (!empty($data->response->games)) {
    foreach ($data->response->games as $game) { 
        if ($game->appid == $game_id) {
            $playtime = $game->playtime_forever;
            if (($playtime < 5400) && ($playtime > 1)) {
            //echo 'Playtime for ', $usernumber, ' is ' . $playtime."<br>";
                    echo $usernumber."<br>";        
                }
            }
        }
    }
} else {
    echo 'Games missing!';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T22:16:35.453

```
$data->response->games 
```

您的 JSON 响应中似乎不存在此密钥。`json_decode`尝试通过在调用后编写来自己调试它： `var_dump($data->response);`. 这应该可以帮助您了解这里出了什么问题。

# scala - 惯用的 sbt 自定义增量工作标准

> ID：16114259
> 
> 赞同：1
> 
> 时间：2013-04-19T22:14:03.907
> 
> 标签：scala, sbt

我想让我的编译任务依赖于一个`myTask`相当昂贵的任务，但只有在自定义指标自上次运行以来发生变化时才应该运行。假设我有一个函数`myCriterion : State => String`，它返回我的自定义标准的规范表示。

理想情况下，我想编译依赖`myTask onlyIf myCriterion changed`或类似的东西。我看到一堆东西`Tracked.inputChanged`，`FilesInfo.*`看起来很相关，但我找不到任何关于如何使用它们的迹象。在幕后，我想`myTask`运行`myCriterion`，检查它是否存在磁盘上的缓存版本，如果它们匹配，则什么都不做。如果它们不匹配，我希望它运行逻辑，`myTask`然后将当前输出写入`myCriterion`缓存，这样我们下次就不会不必要地执行任务（因为它每次只会产生相同的输出）。`myTask`无论是否变成 nop ，编译都应该发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T22:20:33.400

我想我已经弄清楚了如何使用`Tracked`，因为它的价值：如果我编写`Tracked.inputChanged(somePath) { case (changed, state: String) => if (changed) ... }`并将结果应用到 a `String`（具有`Equiv[String]`范围内的实例），那么它会为我进行更改检查。不过，我仍然对将任务与这种模式相关联的惯用方式感到好奇。

# java - 在 IntelliJ 中使用 mockito

> ID：16114262
> 
> 赞同：3
> 
> 时间：2013-04-19T22:14:17.553
> 
> 标签：java, intellij-idea, mocking, mockito

我是 Java 新手，我的背景主要是 .NET。我正在尝试在 IntelliJ 的 java 项目中使用 mockito。我正在尝试遵循这个简单的示例：

[http://code.google.com/p/mockito/](http://code.google.com/p/mockito/)

所以，我将库 mockito-all-1.9.5.jar 添加到文件夹 c:\{my app path}\web\app\WEB-INF\lib

我使用项目结构然后库添加了 IntelliJ。

我创建了一个测试类并添加了以下内容

导入静态 org.mockito.Mockito.*；我收到了这个错误：

“此语言级别不支持静态导入”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T22:30:36.283

在*File - Project structure - Project*下，确保将项目语言级别设置为至少 5.0。（我现在期望 6.0 或 7.0）。从 Java 5 开始确实支持静态导入。

此外，Mockito 仅在测试中使用，因此没有理由成为 webapp 已部署库的一部分。因此它不应该在 WEB-INF/lib 下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-15T00:23:26.853

如果您的问题是关于在 Android 上将 Mockito 与 Java 一起使用，请注意您还需要包含以下两个库：

dexmaker-1.0.jar dexmaker-mockito-1.0.jar

允许 Mockito 在 Android 中使用 Dalvik JVM。

# ios - 在其他视图控制器的标签上显示 UIPicker 选择

> ID：16114264
> 
> 赞同：0
> 
> 时间：2013-04-19T22:14:19.583
> 
> 标签：ios, ipad, delegates, uilabel, uipickerview

使用具有一个主视图控制器和 3 个弹出视图的 Ipad 应用程序，每个弹出视图都有一个 UIPicker，我想在位于主视图控制器中的 3 个不同标签中显示 UIPickers 选择，每个标签都关联到​​它自己的 UIPicker . 我一直在尝试使用委托对象将数据从选择器传递到标签，但是出了点问题。任何线索请！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T22:35:52.597

最简单的方法是使用标签。

```
typedef enum { 
  FirstPicker = 1,
  SecondPicker,
  ThirdPicker 
} PickerTags; 
```

创建选择器时，通过在情节提要中设置标签或像这样来指示它是哪一个

```
picker.tag = FirstPicker; 
```

在您的选择器回调中，现在很容易识别选择器：

```
- (void)pickerView:(UIPickerView *)pickerView 
      didSelectRow:(NSInteger)row 
       inComponent:(NSInteger)component {

   if (picker.tag == FirstPicker) { /* handle first picker */ }
   // etc.
} 
```

# compiler-construction - Clojure 中的语法树生成

> ID：16114267
> 
> 赞同：5
> 
> 时间：2013-04-19T22:14:46.483
> 
> 标签：compiler-construction, clojure, abstract-syntax-tree

我正在编写一个编译器，真的是为了教育目的。我已经从我的输入中生成了令牌，并且想要生成一个 AST。我有一个函数，它获取令牌列表并递归生成 ast。在大多数解析器中，您都有一个指向词法分析器的指针，因此每次处理树中的标记时，您都会推进词法分析器。当您遇到需要在树中生成更深节点的部分时，我不知道如何推进词法分析器，因为您无法修改词法分析器列表的结构。

以这样的 clojure 程序为例`(+ 1 2 (+ 1 1))`。它会前进到 + 然后递归并正确生成节点，但是词法分析器在生成节点返回后重新处理 + 1 1 ，所以你最终得到一棵像这样的树：

```
Root
---> +
---> 1
---> 2
-----> +
-----> 1
-----> 1
---> +
---> 1
---> 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T22:36:57.007

在 Lisp/Clojure 中，您可以直接对通过 Lisp 数据结构表示的抽象语法树进行编程。此外，您可以以编程方式对那些导致宏的 Lisp 数据结构进行操作。所以，总而言之，你已经有了你的 AST。

# ios - iOS 排行榜 游戏中心

> ID：16114269
> 
> 赞同：0
> 
> 时间：2013-04-19T22:15:03.273
> 
> 标签：ios, game-center

在我的 iOS 应用程序中，我在 Game Center 中创建了两个排行榜。我已经全部设置好了。我只是想知道我是否可以做到，所以当您点击一个按钮时，它会打开两个排行榜。我有下面的代码，但不知道如何让它同时打开。

```
leaderboardController.category = self.currentLeaderBoard; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T22:36:40.573

您可能无法 - 查看 Game Center 排行榜 UI。**Game Center 并没有为此进行优化，如果它看起来不好看，Apple 是不会允许的**。

# python - 使用 [:max] 时的 Django 过滤性能

> ID：16114270
> 
> 赞同：0
> 
> 时间：2013-04-19T22:15:06.680
> 
> 标签：python, django

假设我有一个包含 100000 个条目的表，但我正在这样做：

```
a = model.object.all()[:10] 
```

SQL 会将请求限制为 10 个，还是 Django 会生成一个 SQL 来获取所有表并为我提供 10 个条目？

这可能是一个 Python 问题，而不是 Django，但我想确保我没有做错什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T22:18:50.377

Django 将使用 SQL LIMIT。

*   [限制查询集](https://docs.djangoproject.com/en/dev/topics/db/queries/#limiting-querysets)

* * *

```
class M(models.Model):
    pass

... 

print M.objects.all()[:10].query
# SELECT "app_m"."id" FROM "app_m" LIMIT 10 
```

# kml - gx:Track 图标快速出现，然后在时间轴启动时在原点消失。有没有办法来解决这个问题？

> ID：16114279
> 
> 赞同：0
> 
> 时间：2013-04-19T22:15:45.777
> 
> 标签：kml, google-earth

我对此进行了详尽的研究，但仍未找到解决方案。当我在谷歌地球中有多个轨道（道路上的汽车）时，当一个轨道结束时，图标会很快出现，然后在原点消失（闪烁）。当我同时显示数百首曲目时，这会非常分散注意力。我附上了一个示例 kmz，请注意，一旦轨道完成，图标就会在原点闪烁。

有谁知道如何解决这个问题，以便在轨道完成时图标不会在原点闪烁？

感谢您提供的任何帮助，这让我发疯。

显示问题的示例 KMZ 文件：[https ://groups.google.com/group/kml-support-advanced/attach/5d1ba540ca564b13/GoogleEarthPaths.kmz?part=4&authuser=0&view=1](https://groups.google.com/group/kml-support-advanced/attach/5d1ba540ca564b13/GoogleEarthPaths.kmz?part=4&authuser=0&view=1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T15:55:50.577

这似乎是 Google 地球中的一个错误。

我已经在我现有的很多只使用图标的曲目上对此进行了测试——我看到了同样的问题。我以前从未注意到它。

但是，我在定义了模型元素的 Track 上对其进行了测试，一旦 Track 动画完成，我看不到 Track 原点的“闪回”。

我建议提交错误报告。

# cakephp - CakePHP 将用户与一个城市相关联

> ID：16114283
> 
> 赞同：0
> 
> 时间：2013-04-19T22:16:16.710
> 
> 标签：cakephp, associations, has-one, database-relations

我有一个用户表和一个城市表，我想将它们相互关联。正如您所猜测的，一个城市可以有多个用户，但一个用户只能链接到一个城市。

我真的不知道如何设置我的桌子。当我为 City 尝试 $hasMany 关系并为我的 User 尝试 $hasOne 时，我收到一个错误，因为在我的城市表中找不到 client_id 字段。我的城市表将被修复：没有人会改变表。我只想在这张表中存储一些关于一个城市的信息。

**编辑：**这是我的表格和模型（保持简单）：

```
clients { id, firstname, lastname, city_id }
cities { id, name, some_other_data } 
```

这是我的模型：

```
// User
class Client extends AppModel {
    public $hasOne = array(
        'City'
    );
}

// City
class City extends AppModel {
    public $useTable = 'cities';

    public $hasMany = array(
        'Client'
    );
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T23:54:11.567

您需要反转关系；客户“属于”一个城市。（我知道，这*听起来*不合逻辑）；

```
// User
class Client extends AppModel {
    public $belongsTo = array(
        'City'
    );
}

// City
class City extends AppModel {
    public $useTable = 'cities';

    public $hasMany = array(
        'Client'
    );
} 
```

您的 clients-table 应该包含一个`city_id`字段以使其正常工作（只需查看您的 table-definition 并且它已经存在，因此只需更改 Client-model 就应该使其适合您）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T04:29:26.767

可能它不起作用我们必须指定外键

```
 // User
class Client extends AppModel {
    public $belongsTo = array(
        'City'=> array(
        'className' => 'City',
        'foreignKey' => 'city_id'
     ) ,
    );
}
// City
class City extends AppModel {
    public $useTable = 'cities';

public $hasMany = array(
    'Client' => array(
        'className' => 'Client',
        'foreignKey' => 'city_id'
     ) ,
  ); 
} 
```

# c# - 从 xml 文件中检索数据

> ID：16114301
> 
> 赞同：0
> 
> 时间：2013-04-19T22:17:42.937
> 
> 标签：c#, xml, linq-to-xml

下面是一个示例 xml 文件，其中包含我所追求的数据

```
<ns2:Response/">
<cacheKey>-7ca7484a:13e22cb1399:-47c0</cacheKey>
<cacheLocation>10.186.168.39:7302</cacheLocation>
</ns2:Response> 
```

我有 2 个类，1 个用于获取 xml 数据的类，然后这个类将数据传递给另一个类，该类将有许多其他类来提取数据。

```
public static string GetXmlData()
{
    string xmlPath = "url";
    var wc = new WebClient();
    wc.Headers.Add(HttpRequestHeader.ContentType, "application/xml");
    wc.Headers.Add(HttpRequestHeader.Accept, "application/xml");
    var xmlData = wc.DownloadString(new Uri(xmlPath));

    var xmlDoc = XDocument.Parse(xmlData);

    return xmlDoc.ToString();
} 
```

第二类有以下

```
public class GetCacheKey
{
    public string cacheKey { get; set; }
} 
```

以下是我遇到问题的地方：

```
public IEnumerable<GetCacheKey> CacheKey()
{
    var doc = XDocument.Parse(GetXMLData());
    var xkey = from c in doc.Descendants("Response")
                select new GetCacheKey()
                    {
                        cacheKey = (string)doc.Element("cacheKey").Value  
                    };

    return xkey;
} 
```

在调试器中，它返回 Empty = "Enumeration yielded no results"

那么如何获取cacheKey的值呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T22:35:01.777

您的代码实际上存在两个问题。首先，`doc.Descendants("Response")`不会产生任何结果，因为您已经省略了该`ns2`位。其次，`doc.Element("cacheKey").Value`应该是`c.Element("cacheKey").Value`：

```
XNamespace ns2 = "http://namespaceurihere";

var xkey = from c in doc.Descendants(ns2 + "Response")
           select new GetCacheKey()
           {
               cacheKey = c.Element("cacheKey").Value
           }; 
```

不是真正的问题，但代码中的字符串是多余的。

命名空间 URI 应该是您在编辑 XML 以进行发布时从 XML 中删除的任何 URI。然而，它使人们感到困惑，因为`<ns2:Response/">`它不是有效的 XML。

# ruby - 从 Hash ruby 中获取值

> ID：16114302
> 
> 赞同：-2
> 
> 时间：2013-04-19T22:17:43.637
> 
> 标签：ruby, ruby-on-rails-3, hash, nokogiri

现在有点迷失了。我正在使用 nokogiri从[http://www.bbc.co.uk/sport/football/tables获取表格数据。](http://www.bbc.co.uk/sport/football/tables)我从 SO 那里得到了一些帮助，因为不确定如何获取我想要的一些数据，我很高兴地得到了一个他们会做的事情的例子，看起来像这样

```
require 'open-uri'
require 'nokogiri'

url = 'http://www.bbc.co.uk/sport/football/tables'
doc = Nokogiri::HTML.parse(open url)
teams = doc.search('tbody tr.team')

keys = teams.first.search('td').map do |k|
  k['class'].gsub('-', '_').to_sym
end

hsh = teams.flat_map do |team|
  Hash[keys.zip(team.search('td').map(&:text))]
end

puts hsh 
```

我对此有些不清楚，我可以看到最终输出 hsh 给出了这个哈希，例如

```
{:statistics=>"", :position=>"No movement 20", :team_name=>"Reading", :played=>"33", :home_won=>"4", :home_drawn=>"7", :home_lost=>"6", :home_for=>"23", :home_against=>"31", :away_won=>"1", :away_drawn=>"2", :away_lost=>"13", :away_for=>"13", :away_against=>"32", :goal_difference=>"-27", :points=>"24", :last_10_games=>"\n                                    Draw\nWin\nLoss\nLoss\nLoss\nLoss\nLoss\nLoss\nLoss\nDraw", :status=>"\n                    Report of Reading's last match                "}

{:statistics=>"", :position=>"No movement 19", :team_name=>"QPR", :played=>"33", :home_won=>"2", :home_drawn=>"8", :home_lost=>"6", :home_for=>"12", :home_against=>"23", :away_won=>"2", :away_drawn=>"4", :away_lost=>"11", :away_for=>"17", :away_against=>"31", :goal_difference=>"-25", :points=>"24", :last_10_games=>"\n                                    Draw\nDraw\nLoss\nLoss\nWin\nWin\nLoss\nLoss\nDraw\nLoss", :status=>"\n                    Report of QPR's last match                "} 
```

所以我的想法是抓住每个 :team_name 我会像往常一样经历一个循环

```
hsh.each do |k,v]
  v['team_name']
end 
```

所以这会给我每个散列的 team_name 的值吗？我试图实现的是[使用 Nokogiri 提取元素，](https://stackoverflow.com/questions/16112078/extracting-elements-with-nokogiri/16112974#16112974)但我想了解提供的解决方案并将每个值保存到我的模型中

任何人都可以帮助澄清一些理解吗

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T23:13:11.020

这实际上并没有做任何有用的事情，它只是迭代`hsh`但不做任何事情，因为您想要的值将在`k`：

```
hsh.each 做 |k,v]
  v['team_name']
结尾

```

问题是这`hsh`实际上是一个哈希数组。保持相同的名称，`hsh`但将其视为一个数组：

```
hsh.map{ |a| a[:team_name]} 
```

返回：

```
[
    [0]“曼联”，
    [1]《曼城》，
    [2]“切尔西”，
    [3]“阿森纳”，
    [4]“热刺”，
    [5]“埃弗顿”，
    [6]“利物浦”，
    [7]“西布朗”，
    [8]“斯旺西”，
    [9]《富勒姆》，
    [10] “西汉姆”，
    [11] “南安普顿”，
    [12] “纽卡斯尔”，
    [13] “诺里奇”，
    [14] “桑德兰”，
    [15] “斯托克”，
    [16] 《阿斯顿维拉》，
    [17] “威根”，
    [18] “QPR”，
    [19] 《读书》
]

```

如果我们只看`hsh`using中的前两个条目，可能会更容易可视化`hsh[0,2]`：

```
[15]（撬）主：0> hsh[0,2]
[
    [0] {
             ：统计=>“”，
               :position => "无移动 1",
              :team_name => "曼联",
                 :played => "33",
               :home_won => "14",
             :home_drawn => "0",
              :home_lost => "2",
               :home_for => "40",
           :home_against => "17",
               :away_won => "12",
             :away_drawn => "3",
              :away_lost => "2",
               :away_for => "35",
           :away_against => "18",
        :goal_difference => "40",
                 :points => "81",
          :last_10_games => "\n 赢\n赢\n赢\n赢\n赢\n赢\n赢\n输\n赢\n平局",
                 :status => "\n 曼联上一场比赛的报道"
    },
    [1] {
             ：统计=>“”，
               :position => "无移动 2",
              :team_name => "曼城",
                 :played => "32",
               :home_won => "12",
             :home_drawn => "3",
              :home_lost => "1",
               :home_for => "36",
           :home_against => "11",
               :away_won => "8",
             :away_drawn => "5",
              :away_lost => "3",
               :away_for => "22",
           :away_against => "16",
        :goal_difference => "31",
                 :points => "68",
          :last_10_games => "\n 赢\n平局\n平局\n输\n赢\n赢\n输\n赢\n赢\n赢",
                 :status => "\n 曼城上一场比赛的报道"
    }
]

```

* * *

> 我不完全理解我们是如何得到返回的哈希的

你得到了哈希数组，因为：

```
 Hash[keys.zip(team.search('td').map(&:text))] 
```

将一组键/值对强制转换为哈希。你得到了一个键/值对数组，因为`keys.zip(team.search('td').map(&:text))`交织`keys`和`team.search('td').map(&:text)`.

* * *

> 所以要将每个团队名称保存到模型中，我现在可以遍历一个循环吗？

```
File.open('team_names.txt', 'w') do |fo|
  fo.puts hsh.map{ |a| a[:team_name] }
end 
```

它可能看起来`hsh.map{ |a| a[:team_name] }.map(&:to_s)`是必需的，但`puts`会`to_s`自动对返回数组中的每个元素执行 a，自动将符号转换回字符串。

* * *

> 如果我想映射出团队名称和位置，那么我必须创建单独的调用，即每个值的映射？我不能在同一个调用中映射出多个值，可以吗？

这将创建一个数组数组：

```
ary_of_arys = hsh.map{ |a| [ a[:team_name], a[:position] ] } 
```

这将连接每一行的所有内部数组，然后打印出这些行：

```
File.open('team_names.txt', 'w') do |fo|
  fo.puts hsh.map{ |a| [ a[:team_name], a[:position] ].join(', ') }
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T22:26:12.280

```
require 'open-uri'
require 'nokogiri'

url = 'http://www.bbc.co.uk/sport/football/tables'
doc = Nokogiri::HTML.parse(open url)
teams = doc.search('tbody tr.team')

keys = teams.first.search('td').map do |k|
  k['class'].gsub('-', '_').to_sym
end

hsh = teams.flat_map do |team|
  Hash[keys.zip(team.search('td').map(&:text))]
end
hsh.each do |x|
    p x[:team_name]
end 
```

*输出：*

```
"Man Utd"
"Man City"
"Chelsea"
"Arsenal"
"Tottenham"
"Everton"
"Liverpool"
"West Brom"
"Swansea"
"Fulham"
"West Ham"
"Southampton"
"Newcastle"
"Norwich"
"Sunderland"
"Stoke"
"Aston Villa"
"Wigan"
"QPR"
"Reading" 
```

***编辑：***

```
puts hsh

{:statistics=>"", :position=>"No movement 1", :team_name=>"Man Utd", :played=>"33", :home_won=>"14", :home_drawn=>"0", :home_lost=>"2", :home_for=>"40", :home_against=>"17", :away_won=>"12", :away_drawn=>"3", :away_lost=>"2", :away_for=>"35", :away_against=>"18", :goal_difference=>"40", :points=>"81", :last_10_games=>"\n                                    Win\nWin\nWin\nWin\nWin\nWin\nWin\nLoss\nWin\nDraw", :status=>"\n                    Report of Man Utd's last match                "}
{:statistics=>"", :position=>"No movement 2", :team_name=>"Man City", :played=>"32", :home_won=>"12", :home_drawn=>"3", :home_lost=>"1", :home_for=>"36", :home_against=>"11", :away_won=>"8", :away_drawn=>"5", :away_lost=>"3", :away_for=>"22", :away_against=>"16", :goal_difference=>"31", :points=>"68", :last_10_games=>"\n                                    Win\nDraw\nDraw\nLoss\nWin\nWin\nLoss\nWin\nWin\nWin", :status=>"\n                    Report of Man City's last match                "}
{:statistics=>"", :position=>"Moving up 3", :team_name=>"Chelsea", :played=>"32", :home_won=>"10", :home_drawn=>"4", :home_lost=>"2", :home_for=>"35", :home_against=>"13", :away_won=>"8", :away_drawn=>"3", :away_lost=>"5", :away_for=>"29", :away_against=>"20", :goal_difference=>"31", :points=>"61", :last_10_games=>"\n                                    Win\nDraw\nLoss\nWin\nLoss\nWin\nWin\nLoss\nWin\nWin", :status=>"\n                    Report of Chelsea's last match                "}
{:statistics=>"", :position=>"Moving down 4", :team_name=>"Arsenal", :played=>"33", :home_won=>"10", :home_drawn=>"4", :home_lost=>"3", :home_for=>"42", :home_against=>"21", :away_won=>"7", :away_drawn=>"5", :away_lost=>"4", :away_for=>"22", :away_against=>"14", :goal_difference=>"29", :points=>"60", :last_10_games=>"\n                                    Draw\nWin\nWin\nWin\nLoss\nWin\nWin\nWin\nWin\nDraw", :status=>"\n                    Report of Arsenal's last match                "}
{:statistics=>"", :position=>"No movement 5", :team_name=>"Tottenham", :played=>"32", :home_won=>"8", :home_drawn=>"5", :home_lost=>"3", :home_for=>"24", :home_against=>"17", :away_won=>"9", :away_drawn=>"2", :away_lost=>"5", :away_for=>"31", :away_against=>"23", :goal_difference=>"15", :points=>"58", :last_10_games=>"\n                                    Draw\nDraw\nWin\nWin\nWin\nWin\nLoss\nLoss\nWin\nDraw", :status=>"\n                    Report of Tottenham's last match                "}
{:statistics=>"", :position=>"No movement 6", :team_name=>"Everton", :played=>"33", :home_won=>"10", :home_drawn=>"6", :home_lost=>"1", :home_for=>"30", :home_against=>"17", :away_won=>"4", :away_drawn=>"8", :away_lost=>"4", :away_for=>"21", :away_against=>"20", :goal_difference=>"14", :points=>"56", :last_10_games=>"\n                                    Win\nDraw\nLoss\nLoss\nWin\nWin\nWin\nDraw\nWin\nDraw", :status=>"\n                    Report of Everton's last match                "}
{:statistics=>"", :position=>"No movement 7", :team_name=>"Liverpool", :played=>"33", :home_won=>"8", :home_drawn=>"4", :home_lost=>"4", :home_for=>"30", :home_against=>"14", :away_won=>"5", :away_drawn=>"7", :away_lost=>"5", :away_for=>"29", :away_against=>"26", :goal_difference=>"19", :points=>"50", :last_10_games=>"\n                                    Draw\nDraw\nLoss\nWin\nWin\nWin\nLoss\nWin\nDraw\nDraw", :status=>"\n                    Report of Liverpool's last match                "}
{:statistics=>"", :position=>"No movement 8", :team_name=>"West Brom", :played=>"32", :home_won=>"9", :home_drawn=>"2", :home_lost=>"5", :home_for=>"24", :home_against=>"16", :away_won=>"4", :away_drawn=>"3", :away_lost=>"9", :away_for=>"18", :away_against=>"27", :goal_difference=>"-1", :points=>"44", :last_10_games=>"\n                                    Draw\nLoss\nLoss\nWin\nWin\nLoss\nWin\nDraw\nLoss\nLoss", :status=>"\n                    Report of West Brom's last match                "}
{:statistics=>"", :position=>"No movement 9", :team_name=>"Swansea", :played=>"32", :home_won=>"6", :home_drawn=>"6", :home_lost=>"4", :home_for=>"28", :home_against=>"23", :away_won=>"4", :away_drawn=>"5", :away_lost=>"7", :away_for=>"15", :away_against=>"19", :goal_difference=>"1", :points=>"41", :last_10_games=>"\n                                    Win\nDraw\nLoss\nWin\nLoss\nWin\nLoss\nLoss\nLoss\nDraw", :status=>"\n                    Report of Swansea's last match                "}
{:statistics=>"", :position=>"No movement 10", :team_name=>"Fulham", :played=>"33", :home_won=>"7", :home_drawn=>"3", :home_lost=>"6", :home_for=>"25", :home_against=>"22", :away_won=>"3", :away_drawn=>"7", :away_lost=>"7", :away_for=>"19", :away_against=>"29", :goal_difference=>"-7", :points=>"40", :last_10_games=>"\n                                    Win\nLoss\nDraw\nWin\nDraw\nWin\nWin\nLoss\nDraw\nLoss", :status=>"\n                    Report of Fulham's last match                "}
{:statistics=>"", :position=>"Moving up 11", :team_name=>"West Ham", :played=>"33", :home_won=>"7", :home_drawn=>"5", :home_lost=>"4", :home_for=>"28", :home_against=>"20", :away_won=>"3", :away_drawn=>"4", :away_lost=>"10", :away_for=>"10", :away_against=>"27", :goal_difference=>"-9", :points=>"39", :last_10_games=>"\n                                    Loss\nWin\nLoss\nLoss\nWin\nLoss\nWin\nDraw\nDraw\nDraw", :status=>"\n                    Report of West Ham's last match                "}
{:statistics=>"", :position=>"Moving down 12", :team_name=>"Southampton", :played=>"33", :home_won=>"6", :home_drawn=>"6", :home_lost=>"5", :home_for=>"25", :home_against=>"20", :away_won=>"3", :away_drawn=>"5", :away_lost=>"8", :away_for=>"22", :away_against=>"34", :goal_difference=>"-7", :points=>"38", :last_10_games=>"\n                                    Loss\nDraw\nWin\nLoss\nLoss\nDraw\nWin\nWin\nWin\nDraw", :status=>"\n                    Report of Southampton's last match                "}
{:statistics=>"", :position=>"No movement 13", :team_name=>"Newcastle", :played=>"33", :home_won=>"9", :home_drawn=>"1", :home_lost=>"7", :home_for=>"24", :home_against=>"24", :away_won=>"1", :away_drawn=>"5", :away_lost=>"10", :away_for=>"18", :away_against=>"35", :goal_difference=>"-17", :points=>"36", :last_10_games=>"\n                                    Win\nWin\nLoss\nWin\nLoss\nWin\nLoss\nLoss\nWin\nLoss", :status=>"\n                    Report of Newcastle's last match                "}
{:statistics=>"", :position=>"No movement 14", :team_name=>"Norwich", :played=>"33", :home_won=>"6", :home_drawn=>"7", :home_lost=>"3", :home_for=>"18", :home_against=>"17", :away_won=>"1", :away_drawn=>"7", :away_lost=>"9", :away_for=>"13", :away_against=>"35", :goal_difference=>"-21", :points=>"35", :last_10_games=>"\n                                    Draw\nDraw\nDraw\nWin\nLoss\nDraw\nDraw\nLoss\nDraw\nLoss", :status=>"\n                    Report of Norwich's last match                "}
{:statistics=>"", :position=>"No movement 15", :team_name=>"Sunderland", :played=>"33", :home_won=>"4", :home_drawn=>"6", :home_lost=>"6", :home_for=>"17", :home_against=>"17", :away_won=>"4", :away_drawn=>"4", :away_lost=>"9", :away_for=>"20", :away_against=>"28", :goal_difference=>"-8", :points=>"34", :last_10_games=>"\n                                    Draw\nLoss\nLoss\nLoss\nDraw\nLoss\nDraw\nLoss\nLoss\nWin", :status=>"\n                    Report of Sunderland's last match                "}
{:statistics=>"", :position=>"No movement 16", :team_name=>"Stoke", :played=>"33", :home_won=>"6", :home_drawn=>"7", :home_lost=>"4", :home_for=>"19", :home_against=>"20", :away_won=>"1", :away_drawn=>"6", :away_lost=>"9", :away_for=>"9", :away_against=>"21", :goal_difference=>"-13", :points=>"34", :last_10_games=>"\n                                    Draw\nLoss\nWin\nLoss\nLoss\nLoss\nDraw\nLoss\nLoss\nLoss", :status=>"\n                    Report of Stoke's last match                "}
{:statistics=>"", :position=>"No movement 17", :team_name=>"Aston Villa", :played=>"33", :home_won=>"4", :home_drawn=>"5", :home_lost=>"8", :home_for=>"16", :home_against=>"25", :away_won=>"4", :away_drawn=>"5", :away_lost=>"7", :away_for=>"20", :away_against=>"35", :goal_difference=>"-24", :points=>"34", :last_10_games=>"\n                                    Loss\nDraw\nWin\nLoss\nLoss\nWin\nWin\nLoss\nWin\nDraw", :status=>"\n                    Report of Aston Villa's last match                "}
{:statistics=>"", :position=>"No movement 18", :team_name=>"Wigan", :played=>"32", :home_won=>"4", :home_drawn=>"4", :home_lost=>"8", :home_for=>"20", :home_against=>"32", :away_won=>"4", :away_drawn=>"3", :away_lost=>"9", :away_for=>"17", :away_against=>"26", :goal_difference=>"-21", :points=>"31", :last_10_games=>"\n                                    Loss\nDraw\nDraw\nLoss\nWin\nLoss\nWin\nWin\nDraw\nLoss", :status=>"\n                    Report of Wigan's last match                "}
{:statistics=>"", :position=>"No movement 19", :team_name=>"QPR", :played=>"33", :home_won=>"2", :home_drawn=>"8", :home_lost=>"6", :home_for=>"12", :home_against=>"23", :away_won=>"2", :away_drawn=>"4", :away_lost=>"11", :away_for=>"17", :away_against=>"31", :goal_difference=>"-25", :points=>"24", :last_10_games=>"\n                                    Draw\nDraw\nLoss\nLoss\nWin\nWin\nLoss\nLoss\nDraw\nLoss", :status=>"\n                    Report of QPR's last match                "}
{:statistics=>"", :position=>"No movement 20", :team_name=>"Reading", :played=>"33", :home_won=>"4", :home_drawn=>"7", :home_lost=>"6", :home_for=>"23", :home_against=>"31", :away_won=>"1", :away_drawn=>"2", :away_lost=>"13", :away_for=>"13", :away_against=>"32", :goal_difference=>"-27", :points=>"24", :last_10_games=>"\n                                    Draw\nWin\nLoss\nLoss\nLoss\nLoss\nLoss\nLoss\nLoss\nDraw", :status=>"\n                    Report of Reading's last match                "} 
```

# php - 如何从 MYSQL 表中显示 3 个随机值

> ID：16114305
> 
> 赞同：3
> 
> 时间：2013-04-19T22:18:08.227
> 
> 标签：php, mysql, random

每次加载页面时如何显示 3 个随机值？此刻，我使用以下代码一次显示一个：

```
<?php
$sSQLQuery = "SELECT careername FROM careers ORDER BY RAND() LIMIT 1";  
$aResult = mysql_query($sSQLQuery);  
$aRow = mysql_fetch_array($aResult, MYSQL_ASSOC);  
$sQuoteOfTheDay = $aRow['careername']; 
echo $sQuoteOfTheDay;   
?> 
```

我试过做 LIMIT 5 但这对结果没有影响。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T22:20:15.307

您必须`mysql_fetch_assoc()`再次调用您正在获取的每条记录。

因此，使用`LIMIT 3`然后简单地遍历结果集。像这样：

```
$sSQLQuery = "SELECT careername FROM careers ORDER BY RAND() LIMIT 3";  
$aResult = mysql_query($sSQLQuery);  
while($aRow = mysql_fetch_array($aResult, MYSQL_ASSOC)) {
    $sQuoteOfTheDay = $aRow['careername']; 
    echo $sQuoteOfTheDay; 
} 
```

请参阅 的手册页[`mysql_fetch_assoc()`](http://www.php.net/manual/en/function.mysql-fetch-array.php)。你会在那里找到更多的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T22:20:33.460

你在正确的轨道上。将您的更改`LIMIT`为“3”，然后遍历所有结果：

```
while ($aRow = mysql_fetch_array($aResult, MYSQL_ASSOC)) {
    echo $aRow['careername']; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T22:23:01.283

您应将 更改`LIMIT`为 3 并遍历结果行。

```
$sSQLQuery = "SELECT careername FROM careers ORDER BY RAND() LIMIT 3";  
$aResult = mysql_query($sSQLQuery);  
while ($aRow = mysql_fetch_array($aResult, MYSQL_ASSOC))
{
    $sQuoteOfTheDay = $aRow['careername']; 
    echo $sQuoteOfTheDay; 
}
$aResult->free(); 
```

最后别忘了释放`$aResult`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T22:30:18.577

`ORDER BY RAND() LIMIT n`是一个恐怖的性能杀手：它会计算表中`RAND()`的**所有**行，然后丢弃大部分。想象一下这对一百万行的表有什么影响。

最好的方法是获取行数（例如 run `SELECT COUNT(*) FROM tablename;`），然后使用该值计算三个索引，然后运行`SELECT * FROM tablename ORDER BY primarykey LIMIT $index,1`​​3 次。

在受 CPU 限制的服务器上，这方面的收支平衡约为 ca。100行！

# perl - 从 bash 到 perl 的简单翻译 - 比特币私钥导入格式

> ID：16114307
> 
> 赞同：0
> 
> 时间：2013-04-19T22:18:22.290
> 
> 标签：perl, bash, bitcoin

我正在使用 Perl 开发比特币大脑钱包生成器。我无法正确完成最后一步（base58 编码）来生成私钥（导入格式）。

我找到了一个非常简单的 bash 脚本来完成这项工作，我希望将它翻译成 Perl，这样我就可以完全在 Perl 上生成密钥。

有人可以帮我将以下 bash 代码翻译成 Perl 子程序吗？

```
#!/bin/bash
base58=({1..9} {A..H} {J..N} {P..Z} {a..k} {m..z})
bc <<<"ibase=16; n=${1^^}; while(n>0) { n%3A ; n/=3A }" |
tac |
while read n
do echo -n ${base58[n]}
done 
```

编辑：谢谢巴尔玛！它更接近，但不起作用。我为获得最接近的结果所做的是：

```
sub encode_base58sp {
    my $in = shift;
    my $out = '';
    my @base58 = (1 .. 9, 'A' .. 'H', 'J' .. 'N', 'P' .. 'Z', 'a' .. 'k', 'm' .. 'z');
    my $n = hex($in);
    while ($n > 1) {
       my $remain = $n % 58;
       $out = $base58[$remain] . $out;
       $n /= 58;
    }
    return $out;
} 
```

这样我就可以得到前 9 个字符，但其余的都是错误的......有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T22:33:53.587

```
use bignum; # Get arbitrary precision arithmetic

# base58=({1..9} {A..H} {J..N} {P..Z} {a..k} {m..z})
my @base58 = (1 .. 9, 'A' .. 'H', 'J' .. 'N', 'P' .. 'Z', 'a' .. 'k', 'm' .. 'z');
# ibase=16; n=${1^^};
my $n = hex($ARGV[0]);
# while(n>0)
my $result = "";
while ($n > 0) {
  # n%3A, tac, and echo ${base58[n]} (hex 3A == dec 58)
  $result = $base58[$n % 58] . $result;
  # n/=3A
  $n /= 58;
}
print "$result\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T07:08:11.683

谢谢巴马尔，

它适用于“使用 bigrat；” （对 Perl 的透明 BigNumber/BigRational 支持）。

这是解决方案（基于您的翻译的子）：

```
 sub encode_Base58Check {
    use bigrat;
    my $in = shift;
    my $out = '';
    my @base58 = (1 .. 9, 'A' .. 'H', 'J' .. 'N', 'P' .. 'Z', 'a' .. 'k', 'm' .. 'z');
    my $n = hex($in);
    while ($n > 1) {
       $out = $base58[$n % 58] . $out;
       $n /= 58;
    }
    return $out;
} 
```

谢谢！

# java - Android 操纵杆不会出现

> ID：16114315
> 
> 赞同：0
> 
> 时间：2013-04-19T22:19:18.703
> 
> 标签：java, android, draw, joystick

我现在在 Android 上做一个项目，我们一直在使用一个非常棒的编辑过的操纵杆类！然而，在优化项目的代码时，我在 Eclipse 中使用了 Lint 来识别需要清理的任何问题点。它指出我在 DualJoystickView 类的 onMeasured 方法中为对象分配了内存，并建议我预分配和重用我正在创建的值，因为在 Draw 中使用了 onMeasured。我试过了，我附加的代码反映了这个更新。我已经在 onMeasured 方法中注释掉了旧代码。问题是，现在我正在预分配和重用这些值，我的操纵杆不再出现了！我阅读了另一篇关于在 android 中使用操纵杆的帖子，发帖者能够通过使用 if 语句来查看它们的对象是否为空来解决类似的问题，为了避免在抽奖期间浪费时间更新它们，我也尝试过，但无济于事。我可以通过取消注释我的旧代码来显示操纵杆，但我想以最有效的方式做到这一点。任何建议将不胜感激！

代码：

```
package ebork.myRobot.ControllerSide;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.util.AttributeSet;
import android.view.MotionEvent;
import android.view.View;
import android.view.ViewGroup;
import android.widget.LinearLayout;

public class DualJoystickView extends LinearLayout {
    @SuppressWarnings("unused")
    private static final String TAG = DualJoystickView.class.getSimpleName();
    private final boolean D = false;
    private Paint dbgPaint1;
    private JoystickView stickL;
    private JoystickView stickR;
    private View pad;

    //Preallocating params from onMeasured instead of allocating during draw
    float padW = getMeasuredWidth()-(getMeasuredHeight()*2);
    int joyWidth = (int) ((getMeasuredWidth()-padW)/2);
    LayoutParams joyLParams = new LayoutParams(joyWidth,getMeasuredHeight());;
    ViewGroup.LayoutParams padLParams = new ViewGroup.LayoutParams((int) padW,getMeasuredHeight());

    public DualJoystickView(Context context) {
        super(context);
        stickL = new JoystickView(context);
        stickR = new JoystickView(context);
        initDualJoystickView();
    }

    public DualJoystickView(Context context, AttributeSet attrs) {
        super(context, attrs);
        stickL = new JoystickView(context, attrs);
        stickR = new JoystickView(context, attrs);
        initDualJoystickView();
    }

    private void initDualJoystickView() {
        setOrientation(LinearLayout.HORIZONTAL);
        stickL.setHandleColor(Color.rgb(0x70, 0x20, 0x20));
        stickR.setHandleColor(Color.rgb(0x20, 0x50, 0x30));

        if ( D ) {
            dbgPaint1 = new Paint(Paint.ANTI_ALIAS_FLAG);
            dbgPaint1.setColor(Color.CYAN);
            dbgPaint1.setStrokeWidth(1);
            dbgPaint1.setStyle(Paint.Style.STROKE);
        }

        pad = new View(getContext());
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        removeView(stickL);
        removeView(stickR);

        /*
        float padW = getMeasuredWidth()-(getMeasuredHeight()*2);
        int joyWidth = (int) ((getMeasuredWidth()-padW)/2);
        joyLParams = new LayoutParams(joyWidth,getMeasuredHeight());
        */

        stickL.setLayoutParams(joyLParams);
        stickR.setLayoutParams(joyLParams);

        stickL.TAG = "L";
        stickR.TAG = "R";
        stickL.setPointerId(JoystickView.INVALID_POINTER_ID);
        stickR.setPointerId(JoystickView.INVALID_POINTER_ID);

        addView(stickL);

        //padLParams = new ViewGroup.LayoutParams((int) padW,getMeasuredHeight());
        removeView(pad);
        pad.setLayoutParams(padLParams);
        addView(pad);

        addView(stickR);
    }

    @Override
    protected void onLayout(boolean changed, int l, int t, int r, int b) {
        super.onLayout(changed, l, t, r, b);
        stickR.setTouchOffset(stickR.getLeft(), stickR.getTop());
    }

    public void setAutoReturnToCenter(boolean left, boolean right) {
        stickL.setAutoReturnToCenter(left);
        stickR.setAutoReturnToCenter(right);
    }

    public void setOnJostickMovedListener(JoystickMovedListener left, JoystickMovedListener right) {
        stickL.setOnJostickMovedListener(left);
        stickR.setOnJostickMovedListener(right);
    }

    public void setOnJostickClickedListener(JoystickClickedListener left, JoystickClickedListener right) {
        stickL.setOnJostickClickedListener(left);
        stickR.setOnJostickClickedListener(right);
    }

    public void setYAxisInverted(boolean leftYAxisInverted, boolean rightYAxisInverted) {
        stickL.setYAxisInverted(leftYAxisInverted);
        stickR.setYAxisInverted(rightYAxisInverted);
    }

    public void setMovementConstraint(int movementConstraint) {
        stickL.setMovementConstraint(movementConstraint);
        stickR.setMovementConstraint(movementConstraint);
    }

    public void setMovementRange(float movementRangeLeft, float movementRangeRight) {
        stickL.setMovementRange(movementRangeLeft);
        stickR.setMovementRange(movementRangeRight);
    }

    public void setMoveResolution(float leftMoveResolution, float rightMoveResolution) {
        stickL.setMoveResolution(leftMoveResolution);
        stickR.setMoveResolution(rightMoveResolution);
    }

    public void setUserCoordinateSystem(int leftCoordinateSystem, int rightCoordinateSystem) {
        stickL.setUserCoordinateSystem(leftCoordinateSystem);
        stickR.setUserCoordinateSystem(rightCoordinateSystem);
    }

    @Override
    protected void dispatchDraw(Canvas canvas) {
        super.dispatchDraw(canvas);
        if (D) {
            canvas.drawRect(1, 1, getMeasuredWidth()-1, getMeasuredHeight()-1, dbgPaint1);
        }
    }

    @Override
    public boolean dispatchTouchEvent(MotionEvent ev) {
        boolean l = stickL.dispatchTouchEvent(ev);
        boolean r = stickR.dispatchTouchEvent(ev);
        return l || r;
    }

    @Override
    public boolean onTouchEvent(MotionEvent ev) {
        boolean l = stickL.onTouchEvent(ev);
        boolean r = stickR.onTouchEvent(ev);
        return l || r;
    }
} 
```

# java - 数组中从小到大的数字排序问题

> ID：16114316
> 
> 赞同：0
> 
> 时间：2013-04-19T22:19:29.827
> 
> 标签：java, arrays

这是我在这里的第一篇文章，所以我不确定我是否正确发布。但是我需要帮助尝试将各州的人口按来自单独文件的从小到大的顺序排列。程序输出的所有状态都是按字母顺序排列的。该文件设置如下。

**预期输入：**

```
Alabama,4779736
Alaska,710231
Arizona,6392017 
```

**尝试排序的类：**

```
public class Inorder {

    /**
     * @param args
     * @throws IOException
     */
    public static void main(String[] args) throws IOException {
        // TODO Auto-generated method stub
        PrintWriter prw = new PrintWriter("outfile.txt");
        File f = new File("census2010.txt");
        if (!f.exists()) {
            System.out.println("f does not exist ");
        }
        Scanner infile = new Scanner(f);
        infile.useDelimiter("[\t|,|\n|\r]+");
        final int MAX = 50;
        int[] myarray = new int[MAX];
        String[] statearray = new String[MAX];
        int fillsize;

        fillsize = fillarray(myarray, statearray, infile);

        printarray(myarray, fillsize, prw);
        sortarray(myarray, statearray, fillsize);

    }

    public static int fillarray(int[] num, String[] states, Scanner infile) {

        int retcnt = 0;
        for (int count = 0; count < 50; count++) {

            int pop;
            String state;
            state = infile.next();
            pop = infile.nextInt();
            System.out.println(state + " " + pop + " ");
            states[retcnt] = state;
            num[retcnt] = pop;
            retcnt++;

        }
        return (retcnt);

    }

    public static void printarray(int[] num, int fillsize, PrintWriter prw) {
        for (int counts = 0; counts < fillsize; counts++) {
            System.out.println("For the position [" + counts
                    + "] the value is " + num[counts]);
            prw.println("For the position [" + counts + "] the value is "
                    + num[counts]);
        }
        return;
    }

    public static void sortarray(int[] poparray, String[] statearray,
            int fillsize) {

        for (int fill = 0; fill < fillsize - 1; fill = fill + 1) {

            for (int compare = fill + 1; compare < fillsize; compare++) {

                if (poparray[compare] < poparray[fill]) {
                    int poptemp = poparray[fill];
                    poparray[fill] = poparray[compare];
                    poparray[compare] = poptemp;
                    // do I need something here?
                    String statetemp = statearray[fill];
                    statearray[fill] = statearray[compare];
                    statearray[compare] = statetemp;

                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T23:05:43.397

您的程序**已经**按人口的升序对数组进行排序。

你只是没有看到它。

在你的主要，你打印数组，然后排序：

```
printarray (myarray, fillsize, prw);
sortarray(myarray, statearray, fillsize); 
```

相反，尝试排序，然后才打印：

```
sortarray(myarray, statearray, fillsize);
printarray (myarray, fillsize, prw); 
```

你会看到你的程序是正确的。

^(**提示：** 您可以使用`System.out.println(Arrays.toString(myarray));`轻松打印数组。)

# android - 应用程序突然变得与设备不兼容（Galaxy Tab 2）

> ID：16114317
> 
> 赞同：2
> 
> 时间：2013-04-19T22:19:30.083
> 
> 标签：android, galaxy, incompatibility

我有一个应用程序突然（今天）变得与它正在正常工作的设备不兼容。该应用程序是 Dragon Lords，设备是三星 Galaxy Tab 2。有人知道这里会发生什么吗？

最后一个 apk 是 2 个月前上传的，一切正常。今天我有一个玩家报告说在市场上该应用程序与他的设备不兼容。我检查了我的 Galaxy Tab 2，情况也是如此。我的设备没有植根，所以我真的不知道发生了什么。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
android:installLocation="auto"
package="mds.DragonLords"
android:versionCode="25"
android:versionName="1.2.19" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="8" />

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="com.android.vending.BILLING" />
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />

<application
    android:icon="@drawable/icon"
    android:label="@string/app_name"
     >
    <activity
        android:configChanges="keyboardHidden|orientation"
        android:name="com.tapjoy.TJCOffersWebView" />
    <activity
        android:configChanges="keyboardHidden|orientation"
        android:name="com.tapjoy.TapjoyFeaturedAppWebView" />
    <activity
        android:configChanges="keyboardHidden|orientation"
        android:name="com.tapjoy.TapjoyVideoView" />
    <activity
        android:configChanges="keyboardHidden|orientation"
        android:label="@string/app_name"
        android:name="mds.DragonLords.nowe.Splash"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
        <intent-filter >
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".nowe.Tester" >
    </activity>
    <activity
        android:configChanges="keyboardHidden|orientation"
        android:label="@string/app_name"
        android:name="mds.DragonLords.nowe.Main"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
    </activity>

    <service android:name="mds.DragonLords.nowe.billing.BillingService"/>

    <receiver android:name="mds.DragonLords.nowe.billing.BillingReceiver">
        <intent-filter >
            <action android:name="com.android.vending.billing.IN_APP_NOTIFY" />
            <action android:name="com.android.vending.billing.RESPONSE_CODE" />
            <action android:name="com.android.vending.billing.PURCHASE_STATE_CHANGED"/>
        </intent-filter>
    </receiver>
</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T22:44:01.817

你的清单有

```
<uses-permission android:name="android.permission.READ_PHONE_STATE"> 
```

该权限自动假定您使用该`android.hardware.telephony`功能（因为只有手机有`READ_PHONE_STATE`）。根据[Optimizing for Android 3.0/Tablets](http://developer.android.com/guide/practices/optimizing-for-3.0.html#Telephony)文档，如果您具有`android.hardware.telephony`所需的功能，您的应用程序将显示为不兼容。添加行

```
<uses-feature android:name="android.hardware.telephony" android:required="false" /> 
```

确保没有电话的设备仍将显示为兼容。确保您的应用程序正确处理没有电话的设备（因为尝试读取电话状态会使这些设备崩溃）。

# python - 获取numpy数组的对角线

> ID：16114333
> 
> 赞同：36
> 
> 时间：2013-04-19T22:21:36.683
> 
> 标签：python, arrays, numpy

因此，在 numpy 数组中有用于获取对角线索引的内置函数，但我似乎无法弄清楚如何从右上角而不是左上角开始获取对角线。

这是从左上角开始的正常代码：

```
>>> import numpy as np
>>> array = np.arange(25).reshape(5,5)
>>> diagonal = np.diag_indices(5)
>>> array
array([[ 0,  1,  2,  3,  4],
   [ 5,  6,  7,  8,  9],
   [10, 11, 12, 13, 14],
   [15, 16, 17, 18, 19],
   [20, 21, 22, 23, 24]])
>>> array[diagonal]
array([ 0,  6, 12, 18, 24]) 
```

那么如果我希望它返回，我该怎么做：

```
array([ 4,  8, 12, 16, 20]) 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-04-19T22:28:46.917

有

```
In [47]: np.diag(np.fliplr(array))
Out[47]: array([ 4,  8, 12, 16, 20]) 
```

或者

```
In [48]: np.diag(np.rot90(array))
Out[48]: array([ 4,  8, 12, 16, 20]) 
```

两者中，`np.diag(np.fliplr(array))`速度更快：

```
In [50]: %timeit np.diag(np.fliplr(array))
100000 loops, best of 3: 4.29 us per loop

In [51]: %timeit np.diag(np.rot90(array))
100000 loops, best of 3: 6.09 us per loop 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-20T04:12:30.513

这里有两个想法：

```
step = len(array) - 1

# This will make a copy
array.flat[step:-step:step]

# This will make a veiw
array.ravel()[step:-step:step] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-07-06T10:14:56.820

这是使用 numpy 切片的简单方法。我个人觉得这对眼睛来说并不难（但承认这`fliplr`更具描述性！）。

为了突出这个示例对现有答案的贡献，我运行了相同的简单基准。

```
In [1]: import numpy as np

In [3]: X = np.random.randint(0, 10, (5, 5))

In [4]: X
Out[4]: 
array([[7, 2, 7, 3, 7],
       [8, 4, 5, 9, 6],
       [0, 2, 9, 0, 4],
       [8, 2, 1, 0, 3],
       [3, 1, 0, 7, 0]])

In [5]: Y = X[:, ::-1]

In [6]: Z1 = np.diag(Y)

In [7]: Z1
Out[7]: array([7, 9, 9, 2, 3]) 
```

现在与给出的当前最快的解决方案进行比较。

```
In [8]: step = len(X) - 1

In [9]: Z2 = np.take(X, np.arange(step, X.size-1, step))

In [10]: Z2
Out[10]: array([7, 9, 9, 2, 3])

In [11]: np.array_equal(Z1, Z2)
Out[11]: True 
```

### 基准

```
In [12]: %timeit np.diag(X[:, ::-1])
1.92 µs ± 29.5 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)

In [13]: %timeit step = len(X) - 1; np.take(X, np.arange(step, X.size-1, step))
2.21 µs ± 246 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each) 
```

初步比较表明，我的解决方案在复杂性上也是线性的，而使用第二个“步骤”解决方案则不是：

```
In [14]: big_X = np.random.randint(0, 10, (10000, 10000))

In [15]: %timeit np.diag(big_X[:, ::-1])
2.15 µs ± 96.3 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)

In [16]: %timeit step = len(big_X) - 1; np.take(big_X, np.arange(step, big_X.size-1, step))
100 µs ± 1.85 µs per loop (mean ± std. dev. of 7 runs, 10000 loops each) 
```

* * *

我通常使用这种方法来翻转图像（镜像它们），或者将*(channels, height, width)*`opencv`的格式转换为( *height, width, channels)*的格式。所以对于一个三维图像，它只是. 当然，您可以通过将零件放在所需的尺寸中来概括它以沿任何尺寸翻转。*`matplotlib`*`flipped = image[:, :, ::-1]``::-1`**

# php - php将mysql数据库中的文本分解成表

> ID：16114335
> 
> 赞同：0
> 
> 时间：2013-04-19T22:21:38.160
> 
> 标签：php, explode

我的数据库中有一个文本字段，其中一个新项目或主题使用“-”分隔

我已成功分解文本并使其出现在表格中，其中每个项目或主题都显示在新行中。

我遇到的问题是我希望能够对此进行编码，以便无论文本字段中有多少项目，脚本都只会回显该行数 - 因为目前所有空白单元格也会回显..

例如，文本字段是：“-你好-我的-名字-是-某事”这只会填充前 5 行，而其他行显示为空白。

提前致谢！

```
echo "<table border=1 cellpadding=5 width=60% style='border-collapse:collapse; height:auto; font-size:small; float:left;'>
                <tr>
                    <th style='background-color:#FFFFCC';>This Weeks Objectives</th>
                </tr>";
            // split data by use of "-" into seperate rows          
            while ($row3 = mysql_fetch_assoc($objective)) {
                $str = $row3['objectives'];
                $splitStr = explode('-', $str);
                $int1 = intval($splitStr[0]);
                $int2 = intval($splitStr[1]);
                $int3 = intval($splitStr[2]);
                $int4 = intval($splitStr[3]);
                $int5 = intval($splitStr[4]);
                $int6 = intval($splitStr[5]);
                $int7 = intval($splitStr[6]);
echo "<tr>"; 
                    echo "<td style='background-color:#FFFFFF;text-align:left;'>" . $splitStr[1] . " " . $splitStr[2] . " </td>";
                echo "</tr>";
                echo "<tr>"; 
                    echo "<td style='background-color:#FFFFFF;text-align:left;'>" . $splitStr[2] . "</td>";
                echo "</tr>";
                echo "<tr>"; 
                    echo "<td style='background-color:#FFFFFF;text-align:left;'>" . $splitStr[3] . "</td>";
                echo "</tr>";
                echo "<tr>"; 
                    echo "<td style='background-color:#FFFFFF;text-align:left;'>" . $splitStr[4] . "</td>";
                echo "</tr>";
                echo "<tr>"; 
                    echo "<td style='background-color:#FFFFFF;text-align:left;'>" . $splitStr[5] . "</td>";
                echo "</tr>";
                echo "<tr>"; 
                    echo "<td style='background-color:#FFFFFF;text-align:left;'>" . $splitStr[6] . "</td>";
                echo "</tr>";
echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T22:25:25.427

使用循环。例如：

```
$objectives = explode('-', $str);

foreach ($objectives as $objective) {
    echo "<tr><td style='background-color:#FFFFFF;text-align:left;'>" . $objective . "</td></tr>\n";
} 
```

# javascript - jQuery .click 事件在页面加载时运行

> ID：16114338
> 
> 赞同：5
> 
> 时间：2013-04-19T22:22:11.753
> 
> 标签：javascript, jquery

我在一个外部文件中有这个 jQuery 脚本。我用它来更新数据库。我一直在练习它，但无法做到正确。我希望在单击我的按钮（标记为“添加”）时运行 .ajax 调用，但是每次刷新页面时都会更新数据库，而不是单击按钮时！有人可以解释为什么吗？提前致谢

```
$('#add').click(
    $.ajax({
        url: 'test.php',
        success: function() {
            alert("added");
        }
    })
); 
```

**更新**：感谢@flo，我能够完美地完成这项工作。这是最终产品：

```
$(document).on('click','#add',function() {
    $.ajax({
        url: 'test.php',
        success: function() {
        alert("added");
        }
    })
}); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-19T22:23:48.943

我不是 100% 确定它，但我猜你是在触发点击并执行一些东西，而不是绑定这个事件！

我是说：

```
$('#add').click($.ajax...) 
```

不应与以下内容相同：

```
$('#add').click(function (clickEvent) {
    // Update here !
    $.ajax...
}); 
```

但无论如何，你应该更喜欢：

```
$('#add').on('click', function (clickEvent) {
    // Update here !
    $.ajax...
}); 
```

甚至更好：

```
$(document).on('click', '#add', function (clickEvent) {
    // Update here !
    $.ajax...
}); 
```

# .net - 确定 IXLCell 是否使用 DateTime 格式

> ID：16114339
> 
> 赞同：0
> 
> 时间：2013-04-19T22:22:13.157
> 
> 标签：.net, excel, closedxml

全部，

在 .NET 中，我使用 ClosedXML 读取上传的 Excel 文件并将单元格转换为二维字符串数组。最终目标是修改某些单元格并将修改后的单元格显示给用户。

我目前无法处理存储 DateTime 值的单元格。奇怪的是，当我读取单元格的数据类型时，它返回 XLCellValues.Number（不是 XLCellValues.DateTime，这是我所期望的）。我发现 Excel 实际上将 DateTimes 存储为双精度数据，其中包含一些元数据，表示将其转换为日期，这可能解释了该问题。

**我想知道是否有人知道使用 ClosedXML 来检查 Excel 单元格的值是否为 DateTime 类型的方法？如果是这样，我如何将该值转换为 .NET DateTime？**

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T23:13:26.373

如果不查看您的文件，我会说最可能的原因是单元格确实包含一个数字，然后将其格式化为日期。这在 Excel 中完全有效，实际上所有日期都存储为数字。

使用以下命令检查单元格是否包含日期：

```
DateTime date;
if (cell.TryGetValue(out date))
{
    // Got a date
} 
```

# ruby-on-rails - authlogic“您没有提供任何身份验证详细信息”，并在表单中包含电子邮件和密码字段

> ID：16114340
> 
> 赞同：1
> 
> 时间：2013-04-19T22:22:13.433
> 
> 标签：ruby-on-rails, authlogic

当我尝试登录注销后创建的用户时，我不断收到上述消息...

我的用户模型是这样的，名称是显示名称

```
class User < ActiveRecord::Base
  attr_accessible :name, :email, :persistence_token, :password, :password_confirmation

  before_save { |user| user.email = email.downcase }

  validates :email, uniqueness: true

  acts_as_authentic do |configuration|
    configuration.session_class = Session
  end
end 
```

我的迁移是

```
class CreateUsers < ActiveRecord::Migration
  def self.up
    create_table :users do |t|
      t.string :email
      t.string :name
      t.string :crypted_password
      t.string :password_salt
      t.string :persistence_token
    end
  end

  def self.down
    drop_table :sessions
  end
end 
```

我在我的登录表单中使用`:email`和字段`:password`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T01:18:06.090

You should set `login_field` parameter as :email, because by default its :username or :login field:

```
class User < ActiveRecord::Base
  #...

  acts_as_authentic do |configuration|
    configuration.session_class = Session
    configuration.login_field = :email
  end
end 
```

In `User` model you downcase email before save, so if you want to seach case insensitive email in DB, you should implement `find_by_login_method`:

```
class Session < Authlogic::Session::Base
  find_by_login_method :find_by_downcase_email
end  

class User < ActiveRecord::Base
  #...

  def self.find_by_downcase_email(login)
    find_by_email(login.downcase)
  end
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-16T22:00:24.907

这是旧的，但对我来说，我在将 rails 3 升级到 rails 4 应用程序时遇到了这个错误。在 UserSession 创建中，我不得不更改

```
@user_session = UserSession.new(params[:user_session]) 
```

至

```
@user_session = UserSession.new(user_session_params)
...
private
    def user_session_params
      params.require(:user_session).permit(:email, :password)
    end 
```

# regex - 代理服务器的正则表达式将 edufilter 添加到 youtube 请求

> ID：16114342
> 
> 赞同：-1
> 
> 时间：2013-04-19T22:22:31.673
> 
> 标签：regex, firewall

我正在研究互联网过滤。我想这是一个有点专有的系统（Comsifter），但它基于 Dan 的 Guardian，所以希望这里有一些人可以从我的问题的答案中受益。

我很确定我想使用的正则表达式 URL 修改规则应该与这些类似。格式可能与其他程序不同，但我认为它在做什么是有道理的。它找到左边，并用我相信的重定向替换右边。

```
"https://www(\.google\..*)"->"https://nosslsearch\1"
"(http://[^/]*www\.google\..*\?.*)"->"\1&safe=vss"
"(http://[^/]*bing\..*\?.*)"->"\1&adlt=strict"
"(http://[^/]*yahoo\..*\?.*)"->"\1&vm=r"
"(http://[^/]*youtube\..*\?.*$)"->"\1&edufilter=wQL9mInebtaQ3b9HtRAOIA"
"(http://[^/]*youtube\.[^?]*$)"->"http://youtube.com/?edufilter=wQL9mInebtaQ3b9HtRAOIA"
"https://[^/]*youtube\..*"->"http://youtube.com/education" 
```

但是，我不能完全让 youtube 工作，但我认为其余的现在都很好。我在 youtube 页面上得到一个重定向循环，或者超时，或者类似的东西，这取决于我对传入 URL 的尝试。我也试过这段代码：

```
"(^http://[^/]*youtube\..*\?.*$)"->"\1&edufilter=wQL9mInebtaQ3b9HtRAOIA"
"(^http://[^/]*youtube\.[^?]*$)"->"\1?edufilter=wQL9mInebtaQ3b9HtRAOIA"
"^https://[^/]*youtube\..*"->"http://youtube.com" 
```

这有时似乎有效，但也不完全正确。我敢打赌，如果我在第一行否定了 edufilter 可能会有所帮助，但我不知道该怎么做。对这些规则的任何帮助，或者更好的，更有效的等等，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T03:14:13.163

这至少是部分答案。我现在只需要弄清楚我的 HTTPS 线路。

来自[http://linuxcentre.net/wiki/index.php/Web_Content_Filtering](http://linuxcentre.net/wiki/index.php/Web_Content_Filtering)：

```
# Youtube (use our unique Youtube for schools code)
# remove any existing edufilter param
"(^http://[^/]*\.youtube\.[^?]*\?)(.+&)?(edufilter=[^&]*)"->"\1\2"
# add in our edufilter param
"(^http://[^/]*\.youtube\.[^?]*\?)"->"\1edufilter=YOUR CODE HERE&"
# or if no params add ours in
"(^http://[^/]*\.youtube\.[^?]*$)"->"\1/?edufilter=YOUR CODE HERE" 
```

似乎在 HTTP 请求上工​​作得很好。

# java - 将运行时参数传递给包含注入的对象

> ID：16114343
> 
> 赞同：3
> 
> 时间：2013-04-19T22:22:32.310
> 
> 标签：java, jakarta-ee, cdi

**语境：**

基于我的 Java EE 应用程序接收到的 XML，我想创建一个新的 AreeConfiguration 对象，其中发生 3 个对象的注入。根据此 XML 中的信息选择正确的 Instance<>。因此，我从这个 XML 传递信息。

我有一个数据结构，应该在运行时填充这些 AreeConfiguration 对象：

```
private HashMap<Integer, AreeConfiguration> configurations = new HashMap<Integer, AreeConfiguration>();

public void parseNewConfiguration(Element el) throws InvalidDescriptorException {
    if(!isValidConfiguration(el)) throw new InvalidDescriptorException();

    int key = getUniqueKey();

    AreeConfiguration cfg = new AreeConfiguration(key, el);       
    configurations.put(key, cfg);
} 
```

我的 AreeConfiguration 对象应该（理想情况下）用基本的 XML 信息构造并注入一些对象。稍后，我想使用 XML 中的信息来选择正确的 Instance<>。

```
public class AreeConfiguration {

@Inject
private Instance<AreeInput> ais;
private AreeInput ai;

@Inject
private Instance<AreeReasoner> ars;
private AreeReasoner ar;

@Inject
private Instance<AreeOutput> aos;
private AreeOutput ao;

AreeConfiguration(int key, Element el) throws InvalidDescriptorException {
    ...
}   

@PostConstruct
public void chooseComponents(){     
    ai = chooseInput();
    ar = chooseReasoner();
    ao = chooseOutput();
} 
```

**我发现并尝试过的：**

通过研究（在 Stack Overflow），我现在了解到 CDI 不会注入使用`new Object()`. 上面显示的代码，从不输入`chooseComponents()`。

当我想尝试使用@Producer 时，我会使用注释`parseNewConfiguration(Element el)`并`@Producer`添加一个`@New AreeConfiguration cfg`参数。但是，我也不能通过`Element el`，这很不幸，因为它包含基本的 XML 信息。

如果我没有彻底解释自己，请提出其他问题。我正在寻找一种使用 CDI 完成上述任务的方法。

此外，这个问题的答案中提出的解决方案有多“干净”：[@Inject 仅适用于由 CDI 容器创建的 POJO？](https://stackoverflow.com/questions/12080317/inject-only-working-for-pojos-created-by-cdi-container)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:03:59.007

要对不是由 CDI 容器创建的实例执行注入，并且您可以访问 BeanManager，那么您可以执行以下操作：

```
// Create a creational context from the BeanManager
CreationalContext creationalContext = beanManager.createCreationalContext(null);

// Create an injection target with the Type of the instance we need to inject into
InjectionTarget injectionTarget = beanManager.createInjectionTarget(beanManager.createAnnotatedType(instance.getClass()));

// Perform injection into the instance
injectionTarget.inject(instance, creationalContext);

// Call PostConstruct on instance
injectionTarget.postConstruct(instance); 
```

可用于完成所有工作的类的示例位于：[http](http://seamframework.org/Documentation/HowDoIDoNoncontextualInjectionForAThirdpartyFramework) ://seamframework.org/Documentation/HowDoIDoNoncontextualInjectionForAThirdpartyFramework 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-06T01:39:33.870

在这种特殊情况下，动态注入只需要在客户端调用之后进行。因此，我现在只是在我的 WebService 中注入我需要的东西。当客户端调用 WebService 时，会自动进行注入。

```
@Path("newconfiguration")
@RequestScoped
public class NewConfigurationResource {

@Context
private UriInfo context;

@Inject
private AreeConfiguration injConfig;

public NewConfigurationResource() { }

@POST
@Path("post")
@Produces("application/json")
public Response postJson() {
    ...
    doSomething(injConfig);
    ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T20:51:57.017

您通常是正确的，您最多可以将一些有限的数据类型传递给 CDI 以创建对象 - 即原语、静态类型、字符串、枚举到您的限定符中。这是注释的限制。我不太了解您的结构的一件事是为什么客户将所有这些都传递给您。这使您的代码更加脆弱，客户端和服务器的耦合更加紧密。你不能传递一些代表某种配置的 ID 吗？您仍然遇到无法传递 XML 元素的问题。您可以传递一个字符串并在生产者方法的 InjectionPoint 中使用该字符串。

# css - 某些东西导致身体水平溢出，但我不知道它是什么？

> ID：16114344
> 
> 赞同：0
> 
> 时间：2013-04-19T22:22:45.427
> 
> 标签：css

在下面的页面中，某些内容导致右侧的 body 或 html 出现一些填充，并且溢出导致 x 轴上的滚动。

我怎样才能消除溢出？

我已经申请了

```
html, body{
    margin:0;
    padding:0;
} 
```

这是页面：[https ://dl.dropboxusercontent.com/u/270523/help/new.html](https://dl.dropboxusercontent.com/u/270523/help/new.html)

有谁知道是什么导致了这个溢出/右边的空间，但是在文档内部以及如何删除它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T22:45:43.993

要修复 5% 的边距溢出，我建议将 CSS 更改为`#searchInput`添加`display:block;`边距并将边距更改为`margin:0px auto;`.

```
#searchInput {
  ...
  display: block;
  margin:0px auto;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T22:34:56.860

正如@Kaloyan Ivanov 所说，它来自您的`input`元素。您只需要调整边框和边距，使它们加起来不超过 100%，或者您也可以更改此单个输入的 CSS 框模型：

```
input#searchInput {
  box-sizing: border-box
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T22:31:38.047

这是你的`#searchInput`- 它有 90% 的宽度、2x5% 的边距和边框......所以边框使它超过 100%。

# ruby-on-rails - 如何在 Rails 中设置“类型”表关联？

> ID：16114346
> 
> 赞同：1
> 
> 时间：2013-04-19T22:22:58.000
> 
> 标签：ruby-on-rails

我敢肯定这已经在很多地方被问过（并得到了回答），而且我可能不知道如何正确*提问*。这是我的问题，我正在尝试设置一个简单的 Product 到 ProductType 关联。我是 RoR 的新手，由于 Rails 中有这么多内置助手，我正在寻找该解决方案，而不是通常手动构建所有内容。

这就是我所拥有的模型（我也很困惑如何/何时在 Rails 中使用单数/复数描述符）。

产品.rb

```
class Product< ActiveRecord::Base
 attr_accessible :name
 has_one :product_tpe
end 
```

pruduct_type.rb

```
class ProductType< ActiveRecord::Base
attr_accessible :name

belongs_to :product
end 
```

这显然是错误的（我认为我不太了解 belongs_to: 方法）。在通常的 SQL 关系中，产品表将通过与 product_types 表的多对一关系链接。

我收到错误：

```
SQLite3::SQLException: no such column: product_types.product_id: SELECT  "product_types".* FROM "product_types"  WHERE "product_types"."product_id" = 1 LIMIT 1 
```

由于我显然不想在我的 product_types 表中使用 product_id，因此该错误是有道理的；但这不是我故意做的。

不是抱怨，但我至少已经阅读了设置 microposts 示例应用程序的 RoR 指南。还有其他关于使用 RoR 协会的优秀教程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T22:27:00.737

你们的关系只是颠倒了。带有外键的记录应该有`belongs_to`. 此外，看起来您可能想在另一端使用 has_many 关系。所以：

```
class Product < ActiveRecord::Base
  attr_accessible :name
  belongs_to :product_tpe
end

class ProductType< ActiveRecord::Base
  attr_accessible :name

  has_many :products
end 
```

最后，在您的迁移中，您应该添加一个 product_type_id 整数列（也为它添加一个索引以加快查找速度）。

# sql - 在奇数行上使用 TOP 时行重复

> ID：16114347
> 
> 赞同：2
> 
> 时间：2013-04-19T22:22:58.690
> 
> 标签：sql, ms-access

我正在使用以下查询生成 2 个表单，每个表单显示表中的一半项目。这选择了上半部分：

```
SELECT TOP 50 PERCENT * FROM products
ORDER BY products.product_ID; 
```

这选择了下半部分

```
SELECT TOP 50 PERCENT * FROM products
ORDER BY products.product_ID DESC; 
```

明显的问题是，当项目是奇数时，中间项目显示在两个表单上。我尝试使用 COUNT() 函数以各种方式解决它，但它不适用于 TOP。我还能怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T00:53:59.250

定义前半部分时忽略奇数行问题。然后将后半部分定义为前半部分中不存在的那些行。您可以使用带有 的子查询`IN()`，但这样的`LEFT JOIN`方法可能会更快。

```
SELECT secondhalf.*
FROM
    products AS secondhalf
    LEFT JOIN
    (
        SELECT TOP 50 PERCENT product_ID
        FROM products
        ORDER BY product_ID ASC
    ) AS firsthalf
    ON secondhalf.product_ID = firsthalf.product_ID
WHERE firsthalf.product_ID Is Null; 
```

子查询*firsthalf*与您问题中的第一个查询几乎相同。但在这种情况下，我们只需要`product_ID`from 该子查询。

`LEFT JOIN`在主查询中意味着它将返回所有行`products`...匹配的行`firsthalf.product_ID`加上不匹配的行。然后该`WHERE`子句过滤掉匹配项......只留下`product`与子查询行不匹配的行。

如果您`products`使用不同的名称保存，创建一个`products`仅包含几行的新名称，然后对查询进行试验，则可能更容易理解。丢弃该`WHERE`子句并将第一行更改为`SELECT firsthalf.product_ID, secondhalf.product_ID`.

# c# - 使播放器在被击中时闪烁

> ID：16114349
> 
> 赞同：7
> 
> 时间：2013-04-19T22:23:02.000
> 
> 标签：c#, unity3d

我试图让我的播放器在被击中时闪烁。我已经命中检测工作。他现在变成了红色。我想知道如何使实际的闪烁发生。这是一个处理被击中的片段：

```
if(otherObject.CompareTag("Minion")) //hit by minion
    {
        if(hitFromTop(otherObject.gameObject)) //if player jumped on enemy
        {
            otherObject.GetComponent<Minion>().setMoving(false); //stop moving
            playSound(KillEnemySound); //play killing enemy sound
            jump();
            Destroy(otherObject.gameObject); //kill minion

        }
        else //otherwise, enemy hit player
        {
            if(canTakeDamage)
            {
                changeColor(Color.red);
                loseHealth(1); //lose health
                canTakeDamage=false;
                yield return new WaitForSeconds(1.5f); //delay taking damage repeatedly
                changeColor(Color.white);
                canTakeDamage=true;
            }
            //indicate lost health somehow
        } 
```

目前，通过`yield return new WaitForSeconds(1.5f);`. 我可以发出几个这样的调用，它们之间的颜色会发生变化，但我想知道是否有更简洁的方法。我不能成为第一个在游戏中做出闪光的人。

编辑：我添加了 Heisenbug 的 Flash() 代码如下：

```
IEnumerator FlashPlayer(float time, float intervalTime)
{
    canTakeDamage=false;
    float elapsedTime = 0f;
    int index = 0;

    while(elapsedTime < time )
    {
        Debug.Log("Elapsed time = " + elapsedTime + " < time = " + time + " deltaTime " + Time.deltaTime);
        mat.color = colors[index % 2];
        elapsedTime += Time.deltaTime;
        index++;
        yield return new WaitForSeconds(intervalTime);
    }
    canTakeDamage=true;
} 
```

它在这里被调用：

```
void loseHealth(int damage)
{
    //irrelevant details omitted for brevity
            //the "if" checks if the player has run out of health, should not affect the else because this method is called from OnTriggerEnter...see below...
    else
    {
        StartCoroutine(FlashPlayer (1.5f, 0.5f));
    }
} 
```

这是调用的地方（在 OnTriggerEnter 中）：

```
 if(otherObject.CompareTag("Minion")) //hit by minion
    {
        if(hitFromTop(otherObject.gameObject)) //if player jumped on enemy
        {
            //irrelevant to the problem
        }
        else //otherwise, enemy hit player
        {
            if(canTakeDamage)
            {
                     loseHealth(1); 
            }
            //indicate lost health somehow
        }
    } 
```

现在的问题是Flash永远不会停止。正如我所指定的，当 elapsedTime 达到 1.5f 时它应该停止，但是因为它只是增加少量（在 Time.deltaTime 中），所以它不会在很长一段时间内达到 1.5f。有没有我遗漏的东西可以让它更快地达到 1.5f，或者我可以选择另一个可以准确地用作停止点的数字？elapsedTime 的数字往往是：0、0.02、0.03693、0.054132 等，非常小，所以我不能从这里挑选。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T22:57:48.540

以下代码可能是您正在寻找的。`time`对象在改变其颜色的总量后应闪烁`intervalTime`

```
using UnityEngine;
using System.Collections;

public class FlashingObject : MonoBehaviour {

    private Material mat;
    private Color[] colors = {Color.yellow, Color.red};

    public void Awake()
    {

        mat = GetComponent<MeshRenderer>().material;

    }
    // Use this for initialization
    void Start () {
        StartCoroutine(Flash(5f, 0.05f));
    }

    IEnumerator Flash(float time, float intervalTime)
    {
        float elapsedTime = 0f;
        int index = 0;
        while(elapsedTime < time )
        {
            mat.color = colors[index % 2];

            elapsedTime += Time.deltaTime;
            index++;
            yield return new WaitForSeconds(intervalTime);
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-05-29T15:50:43.600

上面的答案很好，但它并没有停止闪烁，因为浮子到达 5f 需要很长时间。

诀窍是将**Flash**函数中的第一个参数设置为更小的值，例如 1f，而不是 5f。获取此脚本，并将其附加到任何游戏对象。它将在黄色和红色之间闪烁约 2.5 秒，然后停止。

```
using UnityEngine;
using System.Collections;

public class FlashingObject : MonoBehaviour
{

    private Material _mat;
    private Color[]  _colors = { Color.yellow, Color.red };
    private float    _flashSpeed = 0.1f;
    private float _lengthOfTimeToFlash = 1f;

    public void Awake()
    {

        this._mat = GetComponent<MeshRenderer>().material;

    }
    // Use this for initialization
    void Start()
    {
        StartCoroutine(Flash(this._lengthOfTimeToFlash, this._flashSpeed));
    }

    IEnumerator Flash(float time, float intervalTime)
    {
        float elapsedTime = 0f;
        int index         = 0;
        while (elapsedTime < time)
        {
            _mat.color = _colors[index % 2];

            elapsedTime += Time.deltaTime;
            index++;
            yield return new WaitForSeconds(intervalTime);
        }
    }
} 
```

# php - Android & MySQL：获取 mysql_insert_id() 并在 Android Activity 中检索它

> ID：16114350
> 
> 赞同：0
> 
> 时间：2013-04-19T22:23:03.220
> 
> 标签：php, android

嗨，我已经使用 JSON 连接了服务器中的 MySQL 和 Android 应用程序。我有一个名为 products 的表，其中主键和 id 是 auto_increment。当我插入一个新产品时，我想在我的 android 活动中获取该 ID，但我不知道如何在 PHP 或 Android 中检索它。这是一些代码：创建产品脚本

```
if (isset($_POST['name']) && isset($_POST['price']) && isset($_POST['description'])) {

    $name = $_POST['name'];
    $price = $_POST['price'];
    $description = $_POST['description'];

    // include db connect class
    require_once __DIR__ . '/db_connect.php';

    // connecting to db
    $db = new DB_CONNECT();

    // mysql inserting a new row
    $result = mysql_query("INSERT INTO products(name, price, description) VALUES('$name', '$price', '$description')"); 
```

我应该放在哪里`mysql_insert_id()`？

最后，我怎么能`mysql_insert_id()`在我的 android 活动中得到它？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T23:33:14.567

好吧，这很容易：

```
// mysql inserting a new row
$result = mysql_query("INSERT INTO products(name, price, description) VALUES('$name', '$price', '$description')");
$insertedId = mysql_insert_id(); 
```

您如何将此 ID 发送到您的 Android 应用程序？与发送其他所有内容的方式相同：JSON。我不知道您通常会向您的应用发送什么，但这很简单

```
echo json_encode($insertedId); 
```

通常的免责声明：不要再使用 MYSQL 扩展，它将在不久的将来从 PHP 中删除。改用 Mysqli（i = 改进）或 PDO。

您的 SQL 查询容易受到 SQL 注入攻击！永远不要将未转义的数据直接放入 SQL 中，要么使用`mysql_real_escape_string()`，要么使用准备好的语句。

# testing - iOS的弗兰克设置不起作用

> ID：16114353
> 
> 赞同：0
> 
> 时间：2013-04-19T22:23:10.893
> 
> 标签：testing, cucumber, frank

我正在尝试为 iOS 设置 frank-cucumber，我正在使用[本教程](http://blog.thepete.net/blog/2012/06/24/writing-your-first-frank-test/)，但我被困在 frank 设置中。我导航到我的 iOS 应用程序，然后执行 a`sudo gem install frank-cucumber`并且效果很好。然后我进入`frank setup`，它给了我这个：`in activate: can't activate i18n (= 0.6.1, runtime) for ["activesupport-3.2.13", "xcodeproj-0.5.5", "frank-cucumber-1.1.9.pre1"], already activated i18n-0.6.4 for ["frank-cucumber-1.1.9.pre1"] (Gem::LoadError)`

我应该做些什么`i18n`吗？

谢谢！

# php - JQuery 将数组发布到 PHP

> ID：16114354
> 
> 赞同：-1
> 
> 时间：2013-04-19T22:23:16.930
> 
> 标签：php, javascript, jquery

我知道对此有很多问题，但似乎没有一个能让我理解。我有以下JS代码：

```
function ClickToSave() {
var data1 = CKEDITOR.instances.textToBeSaved1.getData();
var data2 = CKEDITOR.instances.textToBeSaved2.getData();
var data3 = CKEDITOR.instances.textToBeSaved3.getData();
var data4 = CKEDITOR.instances.textToBeSaved4.getData();
var data5 = CKEDITOR.instances.textToBeSaved5.getData();
$.post('/admin/post_handler.php', {
page_content_1 : data1,
page_content_2 : data2,
page_content_3 : data3,
page_content_4 : data4,
page_content_5 : data5
})} 
```

我正在尝试从 CKEditor 发布此 PHP 页面以获取并知道哪些数据在哪里。JS 旨在在用户单击“保存”时同时保存多个内联 DIV ID。仅使用一个 DIV ID 时，我的代码运行良好，但事实证明，多个 DIV ID 更具挑战性。

我在回复别人时遇到了一些麻烦，因为这个网站让帖子有点奇怪。上面的代码不起作用。以下代码确实有效：

```
function ClickToSave() {
var data1 = CKEDITOR.instances.textToBeSaved1.getData();
$.post('/admin/post_handler.php', {
page_content_1 : data1
})} 
```

HTML/PHP 如下：

```
<?php echo '<div id="textToBeSaved1" contenteditable="true">'.$contentHere.'</div><button onclick="ClickToSave()">Save</button>'; ?> 
```

post_handler.php 文件仅出于测试原因有此：

```
<?php file_put_contents('post_errors.php', $_POST['page_content_1']); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T22:31:26.143

我做了类似的事情，但我用 HTML 中的数组处理它

```
<textarea name="editor[]" class="" ></textarea>
<textarea name="editor[]" class="" ></textarea>
<textarea name="editor[]" class="" ></textarea>
<textarea name="editor[]" class="" ></textarea> 
```

在 PHP 中，我通过使用 $x = $_REQUEST['editor'] 获得了值并用

foreach ( $x as $var ) { do something } 或 $_REQUEST['editor'][0] 是第一个， $_REQUEST['editor'][1] 是第二个编辑器值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T22:26:27.317

在接收器 PHP 端`$_POST['page_content_1']`将包含`data1`等等。

# php - 跟踪 GET/POST 调用

> ID：16114358
> 
> 赞同：0
> 
> 时间：2013-04-19T22:23:55.273
> 
> 标签：php, python, html, networking

有没有办法在加载网页时跟踪网页所做的所有调用？例如，我进入了一个视频观看站点，我想递归地跟踪所有 GET 调用，直到找到一个 mp4/flv 文件。我知道这样做的一种方法是递归地跟踪 URL，但这种解决方案并不总是合适且非常有限（比如有几千个链接，或者链接位于无法读取的文件中）。有没有办法做到这一点？理想情况下，实现可以在 python 中，但 PHP 和 C 也可以

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T22:34:19.523

有几个代理（[http://mitmproxy.org/](http://mitmproxy.org/)很流行，我真的很喜欢[http://www.charlesproxy.com/](http://www.charlesproxy.com/)）可以 MITM HTTPS 连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T22:29:06.557

您可以使用[Fiddler](https://www.google.com.cu/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDIQFjAA&url=http://fiddler2.com/&ei=ysRxUc-uOsestAa_t4DADw&usg=AFQjCNHTxYGr6iTbxfd6U_SHLfIpIEmeLA&bvm=bv.45512109,d.Yms)，这是一个非常好的 Web 调试器代理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T23:59:27.930

Chrome 提供了一个用于查看网络连接的内置工具。按 Ctrl+Shift+J 打开 JavaScript 控制台。然后打开 Network 选项卡以查看所有 GET/POST 调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T00:07:29.400

如果您使用的是 FireFox 或 Chrome，您可以简单地使用开发者工具并使用“.mp4”过滤所有网络请求。

或者你可以使用[WireShark](http://www.wireshark.org/)，并放置一个类似的过滤器

# javascript - GetElementById Javascript 无法访问值

> ID：16114361
> 
> 赞同：0
> 
> 时间：2013-04-19T22:24:37.407
> 
> 标签：javascript, get, element

```
<html>
<head>
<title>Calculator</title>

<style type = "text/css">
#calculator{
width:164px;
top:20%;
right:50%;
position:absolute;
border:1px black solid;
background-image:url('images.jpg');
}

#matrix
{
float:right;
border:1px black solid;
width:100px;
}
#row1{
position:relative;
width:17px;
}
</style>

</head>
<body>

</div>
<div id = "matrix">
<form>
<table>
    <tr><td style = "width:40px"><input type = "text" id = "one"></input></td>
    <input type = "number" id = "two"></input></td></tr>

    <tr><td><input type = "number" id = "three"></input></td>
    <input type = "number" id = "four"></input></td></tr>

</table>
<input type = "submit" value = "count" onclick = "calculate();"></input>
</form>
</div>
<script language = "javascript" type = "text/javascript">
function calculate(){
var a = document.getElementById('one').value;

alert(a);
}

</script>

</body>
</html> 
```

在我拥有的函数中，我无法通过 id 正确访问任何元素，因此当我尝试警告该变量时，警告框是空的。我之前有我的 javascript 代码，但它没有工作两者都没有。将它移动到正文部分并没有改变这种情况。如果有人可以帮助我在 javascript 中修复此错误，我将非常感激，请不要编写 jquery 代码作为替代。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T22:32:15.490

您的按钮是提交按钮。您应该将其更改为一个按钮：

```
<input type = "button" value = "count" onclick = "calculate();" /> 
```

除此之外，您应该修改您的 HTML，因为它的格式非常糟糕，而且您可能有一些东西可能会在以后引发错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T22:32:19.580

为您的输入添加一个`id`并将其更改为`button`：

```
<input id="count" type="button" value="count"> 
```

并使用这个：

```
let count = document.getElementById('count');
let a = document.getElementById('one');
count.addEventListener('click', calculate, false);
function calculate() {
  alert(a.value);
} 
```

在[jsFiddle上查看](http://jsfiddle.net/sam_rad/GkqEn/)

# java - Java XML 空节点

> ID：16114378
> 
> 赞同：0
> 
> 时间：2013-04-19T22:26:03.790
> 
> 标签：java, xml

XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<Personnel>
  <Employee type="permanent">
        <Name>Ali</Name>
        <Id>3674</Id>
        <Age>34</Age>
   </Employee>
  <Employee type="contract">
        <Name>Hasan</Name>
        <Id>3675</Id>
        <Age>25</Age>
    </Employee>
  <Employee type="permanent">
        <Name>Ahmet</Name>
        <Id>3676</Id>
        <Age>28</Age>
    </Employee>
</Personnel> 
```

XML.java：

```
public class XML{
    DocumentBuilderFactory dfk;
    Document doc;
        public void xmlParse(String xmlFile) throws
                                              ParserConfigurationException, SAXException,
                                              IOException {
            dfk= DocumentBuilderFactory.newInstance();
            doc= dfk.newDocumentBuilder().parse(new File(xmlFile));
            xmlParse();
        }

        public void xmlParse(){
            doc.getDocumentElement().normalize();
            Element  element    = doc.getDocumentElement();
            NodeList nodeList = element.getElementsByTagName("Personnel");

            for (int i = 0; i < nodeList.getLength(); i++) {
                Node node = nodeList.item(i);
            }
        }
} 
```

大家好; 我如何获得姓名、ID、年龄等。我尝试了更多次但没有工作我只显示空值。对不起我的英语不好.. **（XML文件>正确<）**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T23:19:25.817

你可以试试这个来获取元素和他们的孩子。这只是为了帮助您入门：

```
 public void xmlParse(String xmlFile) throws ParserConfigurationException, SAXException,IOException {
    DocumentBuilderFactory docBuilderFactory = DocumentBuilderFactory.newInstance();
    DocumentBuilder docBuilder = docBuilderFactory.newDocumentBuilder();
    Document document = docBuilder.parse(new File(xmlFile));
    xmlParse(document.getDocumentElement());
}

private void xmlParse(Element node) {
    NodeList nodeList = node.getChildNodes();
    for (int i = 0; i < nodeList.getLength(); i++) {
        Node currentNode = nodeList.item(i);
        String value = currentNode.getNodeName();
        System.out.print(value + " "); // prints Employee

        NodeList nodes = currentNode.getChildNodes();
        for (int j = 0; j < nodes.getLength(); j++) {
            Node cnode = nodes.item(j);
            System.out.print(cnode.getNodeName() + " ");//prints:name, id, age
        }
        System.out.println();
    }
} 
```

输出是：

```
#text 
Employee #text Name #text Id #text Age #text 
#text 
Employee #text Name #text Id #text Age #text 
#text 
Employee #text Name #text Id #text Age #text 
#text 
```

# google-maps-api-3 - 扩展多边形的边界——Google Maps V3 Javascript API

> ID：16114387
> 
> 赞同：3
> 
> 时间：2013-04-19T22:27:08.117
> 
> 标签：google-maps-api-3

我的目标是检测标记是否在形状奇特的多边形对象内（想想 25 个不同的点）。我注意到 LatLngBounds 属性仅包含两组 LatLngs，即使在使用 .extend 函数后也是如此，例如：

（（（34.347971491244955，-122.40966796875），（34.829586636768205，-120.9649658203125））

这是正常行为吗？

下面的代码是我正在构建的程序的一个小片段，但包含有关我如何使用扩展函数的相关信息。如果我不能使用 .extend() 和 .contains() 的组合，有谁知道如何检测标记是否在形状奇特的多边形内？

```
var coordinates = (polygon.getPath().getArray()); //get            
var bounds = new google.maps.LatLngBounds();

function extendBounds(bounds, coordinates) {
    for (b in coordinates) {
        bounds.extend(coordinates[b]);            
    };
    console.log(bounds.toString());
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T22:46:30.843

多边形的边界是一个矩形。如果要检测标记是否在多边形中，请使用[google.maps.geometry.poly 命名空间](https://developers.google.com/maps/documentation/javascript/reference#poly)中的 containsLocation 函数，将多边形和标记的位置传递给它

> 包含位置（点：LatLng，多边形：多边形）| 布尔值 | 计算给定点是否位于指定多边形内。

# xcode - 始终显示 NSUserNotification

> ID：16114388
> 
> 赞同：3
> 
> 时间：2013-04-19T22:27:24.857
> 
> 标签：xcode, osx-mountain-lion, nsusernotification

`NSUserNotification`当我的应用程序中发生某些事情时，我会出现以记录下来。即使应用程序是最前面的应用程序（即始终显示它），是否有任何方法可以显示通知？

（如果我在其他应用程序中，它确实会显示）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-07-06T20:10:56.080

这是您需要的信息的[答案。](https://stackoverflow.com/questions/11814903/send-notification-to-mountain-lion-notification-center/11815544#11815544)

> 仅当您的应用程序不是关键应用程序时才会显示通知。如果您希望无论您的应用程序是否为 key 都显示通知，您需要指定一个委托`NSUserNotificationCenter`并覆盖委托方法**`userNotificationCenter:shouldPresentNotification:`**，以便它返回**`YES`**.

# c - #define 的逻辑（微芯片 xc8 编译器）

> ID：16114389
> 
> 赞同：1
> 
> 时间：2013-04-19T22:27:28.423
> 
> 标签：c, macros, logic, c-preprocessor, pic

我刚开始学习用于 pic 编程的**C**语言，我正在查看其他人的代码以及编译器提供的包含文件，尤其是基本文件（xc.h、pic.h、pic 特定头文件......），我看到了这个构造（在 pic.h 中找到）

```
#define __delay_us(x) _delay((unsigned long)((x)*(_XTAL_FREQ/4000000.0))) 
```

它自然有效，但我在理解它的基本逻辑时遇到了问题。据我了解，#define 是一个“别名生成器”，您告诉编译器每次在程序中遇到代码 X 时都用 Y 替换它。但就是这样，简单的替换。在这里，我看到一个变量、一个输入或一个参数 (x)，已传递给替代品，但我不明白如何！如果是对我来说，我会为此创建一个函数，并且我会看到这样的构造有多么有用，如果我找到一个不必要地制作延迟宏的代码（可能是因为作者不知道原生_delay，或者因为我从另一个编译器移植代码）我可以简单地重新定义（假设！）“wait（200）”以指向本机“_delay（200）”。现在的问题是有人可以向我解释这个结构是如何工作的吗？X 甚至没有被声明，它不会被视为一个简单的替换字符而不是一个要传递的值吗？这个构造是等价的吗？

```
#define wait(x) __delay_us(unsigned long x) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T22:44:18.177

`__delay_us(x)`这是一个[类似函数的宏](http://gcc.gnu.org/onlinedocs/cpp/Macro-Arguments.html)。类似函数的宏允许更多的动态常量（很好的悖论，嗯）。它就像一个普通的宏一样工作，但是你给他们一个参数。然后将参数逐字替换为宏，然后将其替换为代码。例如：

```
float y = 12000000.0;
unsigned long delay = __delay_us(y); 
```

将扩展为：

```
float y = 12000000.0;
unsigned long delay = _delay((unsigned long)((y)*(_XTAL_FREQ/4000000.0))); 
```

（注意`y`代替`x`）

在定义自己的函数式宏时要非常小心：

1.  参数被逐字替换，确保它们在宏体中只出现一次。如果有人提供函数调用作为参数，它可能会产生不需要的结果。
2.  如您所见，根本没有进行类型检查，因为宏中不存在类型。

更多陷阱： http: [//gcc.gnu.org/onlinedocs/cpp/Macro-Pitfalls.html](http://gcc.gnu.org/onlinedocs/cpp/Macro-Pitfalls.html)（虽然你没有使用GCC，它可能仍然适用）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T22:54:46.440

为了确保您准确了解发生了什么，我建议您尝试使用预处理器并检查其输出（在编译之前，在预处理和替换完成之后）。在 GCC 中，您可以看到预处理器输出：`gcc -E filename`。

# android - 看不到从 MapActivity 扩展的地图

> ID：16114390
> 
> 赞同：0
> 
> 时间：2013-04-19T22:27:28.270
> 
> 标签：android, maps, tiles, google-maps-api-2

*   当我将 APK 上传到设备时，我看不到地图。
*   我已经尝试过使用 FragmentActivity 并且可以毫无问题地看到地图，但在这种情况下使用 MapActivity 不会。
*   Google Maps Android API v2 服务已开启。任何想法？提前致谢！

代码：

```
package com.avargas.mapas2;

import android.os.Bundle;
import android.view.Menu;
import com.avargas.mapas2.R;

import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;

public class MainActivity extends MapActivity {

    private MapView mapa;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mapa = (MapView) this.findViewById(R.id.mapview);
        mapa.setBuiltInZoomControls(true);
        mapa.setTraffic(true);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }

} 
```

活动 XML：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <com.google.android.maps.MapView
        android:id="@+id/mapview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:clickable="true"
        android:apiKey="AIzaSyCkYNO20ZR0rNTkF-O7g-i0e54SIsU1W5s"/>

</RelativeLayout> 
```

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.avargas.mapas2"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-feature
    android:glEsVersion="0x00020000"
    android:required="true"/>

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

       <permission
        android:name="com.avargas.mapas2.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />

    <uses-permission android:name="android.permission.INTERNET"/>

    <uses-permission android:name="com.avargas.mapas2.permission.MAPS_RECEIVE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />   
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <uses-library android:name="com.google.android.maps" />
        <activity
            android:name="com.avargas.mapas2.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="AIzaSyCkYNO20ZR0rNTkF-O7g-i0e54SIsU1W5s"/>
    </application>

</manifest> 
```

接口：

```
API key:    
AIzaSyCkYNO20ZR0rNTkF-O7g-i0e54SIsU1W5s
Android apps:   
8F:AA:26:71:BC:77:61:A3:34:1C:55:DC:46:AE:BD:35:97:50:A5:22;com.avargas.mapas2
Activated on:   Apr 19, 2013 2:58 PM
Activated by:   you 
```

# python - 将目录添加到 sys.path /PYTHONPATH

> ID：16114391
> 
> 赞同：158
> 
> 时间：2013-04-19T22:27:28.333
> 
> 标签：python, mechanize, python-import, pythonpath

我正在尝试从特定目录导入模块。

问题是，如果我使用`sys.path.append(mod_directory)`附加路径然后打开 python 解释器，该目录`mod_directory`将被添加到列表 sys.path 的末尾。如果我在打开 python 解释器之前导出`PYTHONPATH`变量，目录将被添加到列表的开头。在后一种情况下，我可以导入模块，但在前一种情况下，我不能。

有人可以解释为什么会发生这种情况，并给我一个解决方案，*在*python 脚本中添加`mod_directory`到开头吗？

 ** * *

## 回答 #1

> 赞同：232
> 
> 时间：2013-04-19T22:49:25.087

这是按记录工作的。中指定的任何路径`PYTHONPATH`都记录为通常在工作目录之后但在标准解释器提供的路径之前。 `sys.path.append()`附加到现有路径。见[这里](http://docs.python.org/2/using/cmdline.html#envvar-PYTHONPATH)和[这里](http://docs.python.org/2/library/sys.html#sys.path)。如果你想要一个特定的目录首先出现，只需将它插入到 sys.path 的头部：

```
import sys
sys.path.insert(0,'/path/to/mod_directory') 
```

也就是说，通常有比直接使用`PYTHONPATH`或操作更好的方法来管理导入`sys.path`。例如，请参阅[此问题](https://stackoverflow.com/questions/1893598/pythonpath-vs-sys-path)的答案。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2017-08-05T12:47:10.267

你可以使用：

```
import os
path = 'the path you want'
os.environ['PATH'] += ':'+path 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2018-07-16T08:47:43.907

对我来说，我需要对我的 python 路径进行 caffe。我可以通过添加将它的路径添加到文件 `/home/xy/.bashrc`中

`export PYTHONPATH=/home/xy/caffe-master/python:$PYTHONPATH`.

到我的`/home/xy/.bashrc`档案。

但是当我使用pycharm时，路径仍然不在。

所以我可以`PYTHONPATH`通过运行 -> 编辑配置来添加变量的路径。

[![在此处输入图像描述](https://i.stack.imgur.com/Ze73X.png)](https://i.stack.imgur.com/Ze73X.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-02-23T16:19:53.253

在 Windows 下从 Powershell 运行 Python 脚本时，应该可以：

```
$pathToSourceRoot = "C:/Users/Steve/YourCode"
$env:PYTHONPATH = "$($pathToSourceRoot);$($pathToSourceRoot)/subdirs_if_required"

# Now run the actual script
python your_script.py 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-02-16T16:19:01.477

临时更改目录适用于导入：

```
cwd = os.getcwd()
os.chdir(<module_path>)
import <module>
os.chdir(cwd) 
```*

# c++ - 删除树 C++ 的函数

> ID：16114394
> 
> 赞同：0
> 
> 时间：2013-04-19T22:27:50.637
> 
> 标签：c++, arrays, tree

所以我需要一个只删除树的最后一个节点的函数。我在网上找到的所有内容都说使用向量而不是数组，但我的任务说使用数组。所以我想使用两个数组只是不知道如何实现它。请帮助这是我到目前为止的代码，我认为我需要的只是删除功能。提前致谢

```
#include <iostream>
#include <string>
using namespace std;
template <class item>
class Tree {
public:
  // typedef int value_type;
   typedef std::size_t size_type;
   static const size_type CAPACITY = 30;
   Tree() { used = 0; }
   void leftchild(int index)
   {
       if((2*index)+1 > used)
       {
            cout <<"No child" << endl;
       }
       else
       cout << "\nLeft Child of Index " << index << ": " << data[(2*index)+1] << endl;
   }
   void rightchild (int index)
   {
       if((2*index)+2 >= used)
       {
           cout <<"No child" << endl;
       }
       else
       cout << "\nRight Child of Index " << index << data[(2*index)+2] << endl;
   }
   void parent (int index)
   {
      if(((index-1)/2) < 0)
      {
          cout << "No Parent" << endl;
      }
      else
      cout << "\nParent: " << data[(index-1)/2] <<endl;
   }
   void insert(item entry)
   {
       data[used] = entry;
       ++used;
   }
   void remove()
   {

   }
   void display()
   {
       for(int i = 0; i < used; i++)
        {
            cout << data[i];
        }
    }

private:
    item data[CAPACITY];
    size_type used;
};

 int main()
 {
Tree<char> test;
test.insert('A'); //Index [0]
test.insert('L'); //Index [1]
test.insert('G'); //Index [2]
test.insert('O'); //Index [3]
test.insert('R'); //Index [4]
test.insert('I'); //Index [5]
test.insert('T'); //Index [6]
test.insert('H'); //Index [7]
test.insert('M'); //Index [8]
test.insert('S'); //Index [9]
test.display();
//test.remove();
test.display();
test.leftchild(4);
system("pause");
return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T22:36:01.877

简单地减少使用 1：

```
void remove()
{
    if (used > 0) 
        used--;
} 
```

还要修复你的 leftChild()：

```
if((2*index)+1 >= used) 
```

# php - PHP 消息：PHP 注意：未定义变量：

> ID：16114396
> 
> 赞同：0
> 
> 时间：2013-04-19T22:28:25.813
> 
> 标签：php, socialengine

在我的错误日志中，我收到了很多 PHP 消息：PHP Notice: Undefined variable: genderName in for all the variables under $UserData['']. 它们是未定义的，因为我试图使用这个数组来定义它们。我想知道定义变量的最佳方法是什么，这样我就不会再在日志中遇到问题了。

```
 if (!$location) $location = "-";

                    $UserData = array();
                    $UserData['id'] = $UserInfo['user_id'];
                    $UserData['username'] = $UserInfo['username'];
                    $UserData['gender'] = $genderName;
                    $UserData['age'] = $age;
                    $UserData['photo'] = $photo;
                    $UserData['location'] = $location;
                    $UserData['description'] = $description;
                    $UserData['isAdminORModerator'] = $typeUser;
                    $UserData['profile'] = SITE."/".$UserInfo['username'];
                    $UserData['level'] = $level;
    }

    return  $UserData; 
```

这是所有问过的人的完整代码。

```
function commonData($uid)
{
    if ($uid)
    {
            $sql = "
                    SELECT a.user_id, a.email, a.username, a.displayname, a.level_id, a.photo_id
                    FROM engine4_users AS a
                    WHERE a.user_id = ".$uid;
    }

    $UserInfo = @mysql_fetch_assoc(mysql_query($sql));

    if ($UserInfo['user_id'])
    {

            if ($UserInfo['photo_id'] && $UserInfo['photo_id']!="NULL")
            {
                    $PPhoto = @mysql_fetch_assoc(mysql_query("SELECT a.* FROM engine4_storage_files AS a WHERE a.file_id = ".$UserInfo['photo_id']));
                    $photo = SOFTLAYER.$PPhoto['storage_path'];
            }

            else $photo = NO_PHOTO;
    $queryMoreProfile = mysql_query("SELECT * FROM engine4_user_fields_values AS a WHERE a.item_id = ".$UserInfo['user_id']);

    while ($moreProfile = @mysql_fetch_assoc($queryMoreProfile))
    {
            //birthday
            if ($moreProfile['field_id']==6)
            {
                    $age = getAge($moreProfile['value']);

            }
            //about
            if ($moreProfile['field_id']==13)
            {
                    $description = $moreProfile['value'];
            }

            //position
            if ($moreProfile['field_id']==17)
            {
                    $gender = $moreProfile['value'];
                    $gendersql = @mysql_fetch_assoc(mysql_query("SELECT a.* FROM engine4_user_fields_options AS a WHERE a.option_id = ".$gender));
                    $genderName = $gendersql['label'];
            }

            //location
            if ($moreProfile['field_id']==24)
            {
                    $locationNumber = $moreProfile['value'];
                    $locationsql = @mysql_fetch_assoc(mysql_query("SELECT a.* FROM engine4_user_fields_options AS a WHERE a.option_id = ".$locationNumber));
                    $location = $locationsql['label'];
            }
            //level
            if ($UserInfo['level_id']==1 or $UserInfo['level_id']==2)
            {
                    $typeUser = '<isAdmin>true</isAdmin>';
                    $level = 'admin';
            }
            else if ($UserInfo['level_id']==3)
            {
                    $level = 'moderator';
                    $typeUser = '<isModerator>true</isModerator>';
            }
            else if ($UserInfo['level_id']==9 or $UserInfo['level_id']==10 or $UserInfo['level_id']==11 or $UserInfo['level_id']==12 or $UserInfo['level_id']==13 or $UserInfo['level_id']==14)
            {
                    $level = 'premium';
                    $typeUser = '';
            }
            else if ($UserInfo['level_id']==8)
            {
                    $level = 'VIP';
                    $typeUser = '';
            }
            else
            {
                    $typeUser = '';
                    $level = 'guest';
            }

            if (!$location) $location = "-";

                    $UserData = array();
                    $UserData['id'] = $UserInfo['user_id'];
                    $UserData['username'] = $UserInfo['username'];
                    $UserData['gender'] = $genderName;
                    $UserData['age'] = $age;
                    $UserData['photo'] = $photo;
                    $UserData['location'] = $location;
                    $UserData['description'] = $description;
                    $UserData['isAdminORModerator'] = $typeUser;
                    $UserData['profile'] = SITE."/".$UserInfo['username'];
                    $UserData['level'] = $level;
    }

    return  $UserData; 
```

} }

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T22:30:40.813

你的问题是

```
$genderName 
```

从未被赋值过。

利用

```
if(isset($genderName))
{
    ... 
```

以确保它存在。

您还可以使用三元运算符

```
$genderName = isset($genderName) ? $genderName : false; 
```

你所要做的

```
$genderName = "something"; 
```

因为否则你做不到

```
$something = $genderName; 
```

你确定你不想这样做吗？

```
$genderName = $UserData['genderName']; 
```

变量插入操作从右到左变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T23:25:08.257

您的代码中存在一种模式，它不仅会引起注意。

这个特别的通知来自这样​​一个事实，即`$genderName`仅当您正在使用的数据集包含 17 的 moreProfile-field-id 时才定义变量。只有这样才能执行从数据库中获取性别名称的查询，并且变量才会生效. 如果不是，则变量保持未定义，您会收到通知。

实际上，您尝试返回用户的完整记录。如果用户没有保存他的“genderName”，你会返回哪个值？空字符串？无效的？

关于这种模式：您的代码倾向于对失败不是很健壮：

```
if ($uid)
{
        $sql = "
                SELECT a.user_id, a.email, a.username, a.displayname, a.level_id, a.photo_id
                FROM engine4_users AS a
                WHERE a.user_id = ".$uid;
}

$UserInfo = @mysql_fetch_assoc(mysql_query($sql)); 
```

`$uid`是函数的参数。我希望它存在，否则 PHP 会抱怨。但是有很多值`$uid`不是“真”，比如 0、“”、array()。如果`$uid`被视为“假”怎么办？然后`$sql`没有得到定义。但它被用于查询。并且任何错误都会被抑制，因此您无法知道您的查询失败了。

顺便说一句：您的 SQL 无法抵御 SQL 注入攻击。

所以模式是：如果事情进展顺利，你就做事，但不注意其他事情做什么。即使里面没有代码，每个`if`人都有一个始终存在的部分。`else`您必须处理这`else`部分 - 即使您只是在此处定义相同的变量并分配默认值，如下所示：

```
 //position
        if ($moreProfile['field_id']==17)
        {
                $gender = $moreProfile['value'];
                $gendersql = @mysql_fetch_assoc(mysql_query("SELECT a.* FROM engine4_user_fields_options AS a WHERE a.option_id = ".$gender));
                $genderName = $gendersql['label'];
        }
        else
        {
                $genderName = "I don't know";
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T22:31:05.593

*看起来*您的代码段来自基于`return`关键字的函数。我的猜测是您已分配给变量`$genderName`等。从函数外部。

如果是这种情况，请注意函数*不会将*全局变量继承到它们的范围内。您必须使用 . 显式请求访问全局变量[`global`](http://php.net/manual/en/language.variables.scope.php)。如果不这样做，则`$genderName`指的是您可能尚未分配的*函数范围变量。*

例如，在函数的顶部添加以下内容：

```
global $genderName, $age, ...; 
```

您需要对打算在函数中使用的每个全局变量执行此操作。请注意，此访问是读写的；您可以通过这种方式覆盖存储在全局变量中的值，所以要小心。

# php - 将多个复选框保存到一个数据库字段中

> ID：16114397
> 
> 赞同：1
> 
> 时间：2013-04-19T22:28:33.147
> 
> 标签：php, mysql, sql, html, checkbox

我有许多与数据库中的一个字段相关的复选框。检查的值被识别并放入字符串中，但该值未保存到数据库中。表名和字段名都正确。有人知道我做错了什么吗？提前谢谢了。

*我了解提供的代码不安全，但请注意，它只是用于在我将其应用于我的实际代码之前测试 implode 函数。

我的html代码是：

```
<tr>
    <td>
        <input type="checkbox" name="test[]" value="'apple'">apple<br>
        <input type="checkbox" name="test[]" value="'banana'">banana<br>
        <input type="checkbox" name="test[]" value="'pear'">pear<br>
        <input type="checkbox" name="test[]" value="'grapes'">grapes<br>
        <input type="checkbox" name="test[]" value="'pineapple'">pineapple<br>
        <input type="checkbox" name="test[]" value="'strawberries'">strawberries
    </td>
</tr> 
```

我的PHP代码是：

```
print_r($_POST);
session_start();

$p_test = $_POST["test"];
$in = implode(',', $p_test);

include ("dbConnect.php");

$dbQuery = "INSERT into test(testValues) VALUES($in)";
echo $dbQuery;
$result = mysql_query($dbQuery); 
```

$_POST 和 $dbQuery 被打印到屏幕上：

> 数组 ( [test] => 数组 ( [0] => 'apple' [1] => 'banana' [2] => 'pear' ) [sbp] => N/A [submit] => Submit )
> 
> 插入测试（testValues）值（'apple'，'banana'，'pear'）

它成功获取检查的值并将它们放入字符串中，但这些值没有进入数据库字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T22:32:23.613

```
INSERT into test(testValues) VALUES('apple','banana','pear') 
```

您的 SQL 试图将三个值插入一列。

不确定为什么您的 HTML 包含引号，但无论如何都需要对其进行转义。切换到[PDO](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)（`mysql_*`不推荐使用函数）并使用参数化查询。这样他们就会自动逃脱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T22:33:53.700

尝试

```
$dbQuery = "INSERT into test(testValues) VALUES(". serialize($in).")"; 
```

然后当您检索它时`unserialize()`，再次将其作为数组获取

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T22:57:25.963

如果您尝试这样做：

```
insert into test(testValues)
values
('apple,banana,pear') 
```

感谢你失败的幸运星。正如昆汀所建议的那样，这是一种不明智的做法。另一方面，我们有这个：

```
insert into test(testValues)
values
('apple')
, ('banana')
, ('pear') 
```

这将使您的数据更有用。

# javascript - Javascript 单选按钮功能错误

> ID：16114399
> 
> 赞同：0
> 
> 时间：2013-04-19T22:28:39.267
> 
> 标签：javascript, html

我正在尝试使用表单中的一些单选按钮做几件事，但遇到了很多麻烦。现在有两个单选按钮，它们可以一起工作。我想为我的表单设置 3 个场景。

1.  没有选中任何单选按钮，隐藏或禁用其他 2 个元素。（文本框和下拉列表）
2.  第一个单选按钮被选中、隐藏或禁用 1 个元素。
3.  第二个单选按钮被选中、隐藏或禁用 1 个元素。

在所有 3 种情况下，我需要我的表单从用户那里返回值，无论是什么都没有，或者单选按钮检查和该单选按钮可用的元素。另外请记住，表单稍后将包含其他单选按钮，这些单选按钮将与这些按钮分开。我还想提一下，如果可能的话，我想把它保存在纯 JavaScript 中。

目前我正在尝试使用 .disable 和 .checked，但没有运气。谁能帮我解决这个问题。如果可能的话，请对您的答案进行解释，以便我理解。

这是我的表单代码：

```
<input type="radio" name="clubMember" id="member" value="Member" />Club Member 
<input type="radio" name="clubMember" id="nonmember"value="nonMember" />Non Member <br /> <br />

Select your Club.
<select name="clubList">
<option value="clubA">Club A</option> 
<option value="clubB">Club H</option>
</select><br />

<!-- OR -->
Are you from another club, or a guest? <br />
<textarea rows="5" cols="25" name="nonClubInfo">Briefly explain here </textarea>

<button type="submit" onclick="return validateRegistrationForm()" >Register</button> 
```

这是我的脚本的代码：

```
function validateClubInfo()
{
    if(document.getElementById("member").checked == false && document.getElementById("nonMember").checked == false)
    {
        document.getElementById("clubList").disabled = true;
        document.getElementById("nonClubInfo").disabled = true;
        alert("this is a test");
        return true;
    }
    else if(document.getElementById("member").checked == true)
    {
        document.getElementById("nonClubInfo").disabled = true;
        return true
    }
    else if(document.getElementById("nonMember").checked == true)
    {
        document.getElementById("clubList").disabled = true;
        return true;
    }
} 
```

我还应该注意验证是通过第二个函数检查的，我把它省略了，因为它是一个很长的函数，它与这个问题无关。

无论如何，对此事的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T22:35:09.297

看起来问题是您正在使用 document.getElementById 来查找 select/textarea，但您没有为这些元素分配 id。尝试为这样的人添加一个 id：

```
<select name="clubList" id="clubList>
    <option value="clubA">Club A</option> 
    <option value="clubB">Club H</option>
</select><br /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T22:40:03.567

用这个...

```
<input type="radio" name="clubMember" id="member" value="Member" />Club Member 
<input type="radio" name="clubMember" id="nonmember"value="nonMember" />Non Member <br /> <br />

Select your Club.
<select name="clubList" id="clubList">
<option value="clubA">Club A</option> 
<option value="clubB">Club H</option>
</select><br />

<!-- OR -->
Are you from another club, or a guest? <br />
<textarea rows="5" cols="25" name="nonClubInfo" id="nonClubInfo">Briefly explain here </textarea>

<input type="button" onclick="validateRegistrationForm();" value="Register"/> 
```

一个js：

```
function validateRegistrationForm() {
    if(document.getElementById("member").checked == false && document.getElementById("nonmember").checked == false)
    {
        document.getElementById("clubList").disabled = true;
        document.getElementById("nonClubInfo").disabled = true;
        alert("this is a test");
        return true;
    }
    else if(document.getElementById("member").checked)
    {
        alert(document.getElementById("member").checked);
        document.getElementById("nonClubInfo").disabled = true;
        return true
    }
    else if(document.getElementById("nonmember").checked == true)
    {
        alert(document.getElementById("member").checked);
        document.getElementByName("clubList").disabled = true;
        return true;
    }
} 
```

看这个**[演示](http://jsfiddle.net/wx6bs/)**

# c# - 通过 DSN 与带有 SQLServer 链接表的 MS Access 数据库的 ODBC 连接

> ID：16114404
> 
> 赞同：6
> 
> 时间：2013-04-19T22:29:08.907
> 
> 标签：c#, sql-server, ms-access, odbc, linked-tables

所以我有一个 msaccess 数据库，其中包含几个链接表，这些链接表通过 DSN 指向 SQL Server 数据库，并内置了用户名和密码。

在我的 .net 应用程序中，我需要连接到我的访问数据库，并在链接表上运行查询。我尝试过使用 OLEDB 和 ODBC 方法，似乎都不适用于指向 SQL Server 的链接表，但指向其他访问表的链接表很好。我收到错误消息，例如：ODBC --- 连接到“THISDSN”失败。

有没有办法连接到我的访问数据库，以便我可以简单地运行查询，而链接表是 SQL 服务器还是只是访问表都没有关系？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T13:14:34.010

您描述的可以完成，您只需要检查设置中的一些细节。

我有以下带有本地表 [Expenses] 和链接表 [dbo_AccountCodes] 的 Access 数据库

![费用.png](https://i.stack.imgur.com/BT17o.png)

![dbo_AccountCodes.png](https://i.stack.imgur.com/Srdv5.png)

我还有一个名为 [ExpenseDetails] 的已保存查询，它从 [Expenses] 中提取数据并使用 JOIN 检索相关的 [AccountDescription]：

```
SELECT Expenses.*, dbo_AccountCodes.AccountDescription
FROM Expenses INNER JOIN dbo_AccountCodes ON Expenses.AccountID = dbo_AccountCodes.AccountID; 
```

我可以使用普通的 OLEDB 方法从我的 C# 应用程序运行保存的 Access 查询：

```
static void Main(string[] args)
{
    var conn = new OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\__tmp\accounting.accdb;");
    conn.Open();
    var cmd = new OleDbCommand("SELECT * FROM ExpenseDetails", conn);
    OleDbDataReader rdr = cmd.ExecuteReader();
    int rowCount = 0;
    while (rdr.Read())
    {
        rowCount++;
        Console.WriteLine("Row " + rowCount.ToString() + ":");
        for (int i = 0; i < rdr.FieldCount; i++)
        {
            string colName = rdr.GetName(i);
            Console.WriteLine("  " + colName + ": " + rdr[colName].ToString());
        }
    }
    rdr.Close();
    conn.Close();

    Console.WriteLine("Done.");
    Console.ReadKey();
} 
```

当我运行它时，我得到：

```
Row 1:
  ID: 1
  UserID: dr.evil
  ExpenseDescription: "Laser"
  ExpenseAmount: 1000000
  AccountID: 101
  AccountDescription: Weapons of World Domination
Done. 
```

所以它*可以*工作。您可以检查的一些事情是：

1.  您是否为链接表使用系统 DSN？根据 C# 代码的执行方式，如果 DSN 属于其他类型，它可能无法“看到”它。

2.  如果这是一个 ASP.NET 应用程序，请确保运行代码的进程具有访问 SQL Server 数据库所需的凭据。您说您的 DSN 具有“内置的用户名和密码”，因此请确保`.Connect`链接表的字符串明确表示`Trusted_Connection=No;`. 您也可以尝试在 Access 中重新创建表链接，并在“链接表”对话框中选择“保存密码”选项。如果您决定尝试在 SQL Server 上使用 Windows 身份验证，则可能必须在服务器上添加 SQL 登录名，并在数据库上添加 SQL 用户`NT AUTHORITY\SYSTEM`和/或`NT AUTHORITY\NETWORK SERVICE`和/或`YourDomain\YourIisServerName$`，具体取决于您的设置。

# django - Django：按自定义属性订购 AdminModel

> ID：16114405
> 
> 赞同：0
> 
> 时间：2013-04-19T22:29:13.973
> 
> 标签：django, django-models, django-admin, django-modeladmin

我有一个带有属性的模型，我希望 adminmodel 由它来排序。

```
class StoreAdmin(admin.ModelAdmin):
    list_display = ('user', 'total',)

admin.site.register(Store, StoreAdmin) 
```

模型：

```
class Store(models.Model):
    user = models.ForeignKey(User, related_name="store")

    @property
    def total(self):
        num = 0
        for x in Coins.objects.all():
            num += x.value
        return num 
```

既然 ModelAdmin 是一个属性，你如何按总数排序？在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T11:39:02.203

给这个链接一个镜头，因为它可能有你的答案。[https://stackoverflow.com/a/8478586/1011998](https://stackoverflow.com/a/8478586/1011998)

简而言之，由于您尝试排序的属性在 SQL 中不存在，因此 SQL 必须返回所有结果，然后在 Python 中按您的属性对它们进行排序。可以想象，这要慢得多。

我建议考虑将字段“total”作为非规范化字段（int）存储在数据库中的字段中，并在通过覆盖该`save()`方法更新用户对象时简单地更新它。这样，您就可以从不必不断地动态重新计算总数的速度（稍后在处理中大数据时变成 SQL）和 MySQL 索引的速度（始终考虑您的“位置”）中受益。和“order by”子句）。

# javascript - 为什么 Bootstrap 的 Carousel 左箭头会抛出错误，而右箭头可以正常工作？

> ID：16114410
> 
> 赞同：0
> 
> 时间：2013-04-19T22:29:42.753
> 
> 标签：javascript, jquery, twitter-bootstrap, carousel

我已经创建了这个页面[http://www.virtuemax.com/projects/urtotal/index.html](http://www.virtuemax.com/projects/urtotal/index.html)

它是一个静态页面，完全建立在引导程序的框架上。轮播工作正常，但是当您单击向左箭头将轮播导航到左侧时，它会引发错误。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T22:49:53.113

您的 HTML 编写不正确

```
<div class="carousel-inner">
<img id="floral" src="img/floralOrange.png" alt="">

<div class="item active">
    <img alt="Slide 1" src="img/slide1.jpg">
</div>

<div class="item">
    <img alt="" src="img/slide2.jpg">
</div>
</div> 
```

第一个图像应该`<div class="item"></div>`像其他图像一样被包裹在里面。此外，您一次包含 2 个 jquery 插件。删除一个以避免不必要的冲突

# php - PHP $_POST 不带重音符号

> ID：16114412
> 
> 赞同：5
> 
> 时间：2013-04-19T22:29:58.977
> 
> 标签：php, html, post, html-entities

**这个问题解决了，查看我的回答看看解决方案**

* * *

我正在尝试通过 html 表单向我的数据库添加带有重音字母的文本，该表单通过 POST 提交到 PHP 页面，问题是重音字母被转换为不可读的字符。

我有这个表格：

```
<form action="page.php" method="POST">
    <input type="textarea" id="text1" name="text1" />
    <input type="submit" value="Send" />
</form> 
```

然后，在 page.php 中：

```
echo $_POST['text1']; 
```

问题是，如果我`àèìòù`在 textarea 中输入然后提交表单，我会得到以下输出：

```
Ã Ã¨Ã¬Ã²Ã¹ 
```

我的下一步是将重音字母转换为 html 实体，`htmlentities($_POST['text1']`但我需要`$_POST`给我正确的字母。

注意：在我已经拥有的页眉中

```
<meta http-equiv = "Content-Type" content = "text/html; charset=utf-8" /> 
```

我怎样才能解决这个问题？

**编辑**

我试过了

```
<form action="page.php" method="POST" accept-charset="UTF-8">
    <input type="textarea" id="text1" name="text1" />
    <input type="submit" value="Send" />
</form> 
```

它并没有解决它

**编辑 2**

也尝试添加

```
<meta charset='utf-8'> 
```

到我的文件头上，它不起作用

**编辑 3**

我也尝试在第二页上将我的字符集设置为 UTF-8，并且

```
echo $_POST['text1']; 
```

显示了正确的结果。

我看到问题出在我使用 htmlentities 时，使用此代码

```
echo htmlentities($_POST['text1']); 
```

我明白了

```
&Atilde;&nbsp;&Atilde;&uml;&Atilde;&not;&Atilde;&sup2;&Atilde;&sup1; 
```

实际输出

```
Ã Ã¨Ã¬Ã²Ã¹ 
```

即使我也在我的元标记和标题中设置了字符集。有谁知道我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T20:26:08.403

好的，我终于解决了。即使我正在设置字符集，无论是否使用 PHP 标头设置它

```
header('Content-Type: text/html; charset=utf-8'); 
```

或使用 HTML 元标记

```
<meta http-equiv = "Content-Type" content = "text/html; charset=utf-8" /> 
```

并将我的文件保存为 UTF-8，但它不起作用。

输入`àèìòù`然后处理它`htmlentities`总是导致

```
&Atilde;&nbsp;&Atilde;&uml;&Atilde;&not;&Atilde;&sup2;&Atilde;&sup1; 
```

那，在“可读”字符中，是：

```
Ã Ã¨Ã¬Ã²Ã¹ 
```

我只是改变了这个：

```
echo htmlentities($_POST['text1']); 
```

对此：

```
echo htmlentities($_POST['text1'], ENT_QUOTES, "UTF-8"); 
```

一切正常，我打印出我的真实输入。

谢谢大家的帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T22:45:44.607

我将采用另一种方式 - 添加到您的 PHP 代码`<?php header("Content-Type: text/html; charset=utf-8"); ?>`中。保存有元标记（一些浏览器随便忽略......）

根据您提供的编码表示，PHP 正在回显一个 UTF-8 编码的字符串，而您的浏览器假定输出将是 ISO-8859-1。设置该标头将使**所有**浏览器都明白 UTF-8 是预期的，前提是它们在 Accept-encoding 下拥有它。如果他们不这样做，他们会呕吐，但我只知道一种“现代”浏览器没有，它约占市场的 0.2%。

请注意，您需要先抛出该行**，**然后**再进行任何其他输出**（或者您可以输出缓冲很多，这使生活更轻松，但会消耗更多内存）

# c++ - 是什么导致删除功能错误消息？

> ID：16114422
> 
> 赞同：-1
> 
> 时间：2013-04-19T22:30:55.450
> 
> 标签：c++, templates

我有一个使用两个模板类 Trans 和 Travel 的主程序，它会生成一个编译错误`use of deleted function 'MakeColor::MakeColor()`，并且：`note: 'MakeColor::MakeColor()' is implicitly deleted because the default definition would be ill-formed`. 我怎样才能解决这个问题？

类旅行：

```
#include "Trans.hpp"
template<typename A, typename B, typename C>
class Travel {

    public: 

    typedef Trans<A, B> CarType;
    typedef Trans<C, int> BoatType;

    typedef typename CarType::Newest NewestCar;
    typedef typename BoatType::Newest NewestBoat;
}; 
```

类翻译：

```
template<typename A, typename B>
class Trans {

    public: 

    class Newest;
}; 
```

主程序：

```
#include "Travel.hpp"
#include "Trans.hpp"

Travel<MakeColor, MakeMaterial, MakeSize>

struct MakeColor {
  CarType::NewestCar model; // error
};

int main(){
...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T22:40:01.207

`MakeColor`没有默认构造函数，因为`CarType::NewestCar`没有默认构造函数。

您需要显式创建一个初始化`model`.

```
struct MakeColor {
  MakeColor() : model( /* pass constructor parameters here */ ) {}
  CarType::NewestCar model; // error
}; 
```

# php - 获取字符串的第一个字符，即法语口音

> ID：16114424
> 
> 赞同：8
> 
> 时间：2013-04-19T22:31:18.923
> 
> 标签：php, css

我有一个奇怪的问题，我不知道如何解决它。我想获取从数据库中获取的文本字段的第一个字符。有了这个角色，我会应用一个 CSS 样式来使它变大。

如果您尝试以下代码，您将了解我的问题是什么：

```
<?php
$str_en = "I am a sentence.";
echo $str_en[0];

echo "<br /><br />";

$str_fr = "À tous les jours je fais du PHP.";
echo $str_fr[0];

echo "<br /><br />";

$str_fr = "Étais-tu ici?";
echo $str_fr[0];
?> 
```

上面的代码将输出：

我

一个

一个

似乎法语字符在字符串中使用了多个字节。问题是我的句子并非都以法语字符开头。任何人都知道我如何拥有一个转换它的函数：

```
<?php
$str_fr = "Étais-tu ici?";
?> 
```

对此

```
$str_fr = "<span class='firstletter'>É</span>tais-tu ici?"; 
```

或者也许 CSS3 有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-19T22:33:40.210

请参阅`mb_substr`（[http://www.php.net/manual/en/function.mb-substr.php](http://www.php.net/manual/en/function.mb-substr.php)）

```
$first_char = mb_substr($string, 0, 1, 'utf-8'); // You may change the forth parameter according to your needed encoding. 
```

`mb_substr`尊重编码并返回代表此处第一个字符的所有字节。

* * *

CSS3 有一个伪类`::first-letter`，它只选择第一个字母。

例子：

您的 HTML 是：

```
<p id="french_text">Étais-tu ici?</p> 
```

然后您可以通过以下方式使用 CSS3 解决它：

```
p:first-letter { /* Your properties */ } 
```

（Ps：现在的标准是使用`::first-letter`（双双冒号而不是单双冒号），但为了获得最佳的向后兼容性，只使用一个双冒号）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T22:39:50.767

输出应该是：

```
I

�

� 
```

你可以通过这样做来解决这个问题

```
<?php
header("Content-Type: text/html; charset=utf-8"); 
```

目前您的源代码为 UTF-8，但浏览器将其解释为 Windows-1252。

然后，您可以`$first_char = mb_substr($string, 0, 1, "UTF-8");`完成您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T22:40:00.703

您最好将 :first-letter 伪类应用于容器元素。它受到所有主要浏览器的支持，并且不会弄乱您的 HTML。例如，如果您有一个包含以下项目的列表：

```
<ul>
     <li>First db term</li>
     <li>Second db term</li>
</ul> 
```

您将第一个字母 CSS 应用于每个 li 元素：

```
ul li:first-letter { font-size: 3em } 
```

# multithreading - 2013 年 WCF 长投票

> ID：16114425
> 
> 赞同：2
> 
> 时间：2013-04-19T22:31:22.030
> 
> 标签：multithreading, wcf, resources, polling, scalable

经过几次阅读，包括...

*   [http://anthymecaillard.wordpress.com/2012/06/06/wcf-real-time-web-development-with-long-polling/](http://anthymecaillard.wordpress.com/2012/06/06/wcf-real-time-web-development-with-long-polling/)
*   [WCF 服务器如何通知 WCF 客户端有关更改的信息？（比简单轮询更好的解决方案，例如 Comet 或长轮询）](https://stackoverflow.com/questions/1700917/how-does-a-wcf-server-inform-a-wcf-client-about-changes-better-solution-then-s)

...我想我已经准备好进行长轮询了。

从第二个链接，我的理解是异步模式允许我们：

1.  在 WCF 服务器上接收请求
2.  调用返回 IAsyncResult 的 BeginMyMethod
3.  当接收到请求的线程“安全地休息”或被释放时，挂在某处的 IAsyncResult 上？- 不消耗任何额外资源
4.  发生相关业务逻辑事件时“将 IAsyncResult 退出”
5.  使用 IAsyncResult 调用 EndMyMethod，在此期间我们完成响应（即，将数据写回客户端）

我的假设听起来正确吗？我还假设这是由于上述机制保持零线程等待事件而具有极大的可扩展性。

这是目前使用 .NET 4.5 实现 WCF 长轮询的最佳方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T19:17:24.760

I believe my initial impressions were wrong. When a WCF request handler thread receives a request and hands it off to a worker thread, I'd thought all resources were somehow being magically freed. This isn't the case as the worker thread becomes the one now doing the waiting! Which, as request volume gets large, doesn't sound much more scalable than traditional polling.

While frameworks like SignalR offer long polling, I don't think there's any way to construct it natively in WCF in a manner that doesn't tie up threads.

Some additional useful links I came across. Shockingly they appear to recommend traditional polling from a scalability point of view.

*   [http://www.codeproject.com/Articles/186723/Push-Messages-in-RESTful-WCF-Web-Application-with](http://www.codeproject.com/Articles/186723/Push-Messages-in-RESTful-WCF-Web-Application-with)
*   [Scaling a chat app - short polling vs. long polling (AJAX, PHP)](https://stackoverflow.com/questions/5313641/scaling-a-chat-app-short-polling-vs-long-polling-ajax-php)

Let me know if you guys have any other insight.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-22T17:11:01.947

您是否考虑过双工通道上的发布者-订阅者模式？

# zend-framework - 从 zf2 中的另一个模块自动加载 phpunit 测试类

> ID：16114428
> 
> 赞同：0
> 
> 时间：2013-04-19T22:31:36.907
> 
> 标签：zend-framework, phpunit, zend-framework2

我正在尝试将另一个模块中的测试类重用到我当前的模块中。我的目录结构如下：

```
Home/
    Module.php
    config/
        module.config.php
    src/
        Home/
            <code files>
    test/
        phpunit.xml
        bootstrap.php
        HomeTest/
            <test code files>
Loader/
    Module.php
    config/
        module.config.php
    src/
        Loader/
            <code files>
    test/
        phpunit.xml
        bootstrap.php
        LoaderTest/
            <test code files> 
```

我在 Loader/test/ 文件夹中运行 phpunit 测试类，需要重用 Home/test/Hometest/Model 中的类。

我尝试在我的引导文件中使用它：

```
AutoloaderFactory::factory(
   array(
     'Zend\Loader\StandardAutoloader' => array(
       'autoregister_zf' => true,
       'namespaces' => array(
         __NAMESPACE__ => __DIR__ . '/' . __NAMESPACE__,
        'HomeTest' => __DIR__ . '/Home/test/HomeTest',
       ),
     ),
   )
); 
```

使用上述加载机制时出现此错误：

```
Fatal error: Class 'HomeTest\Model\UserTableTest' not found 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T15:19:01.267

您需要重新导航从`Loader/test`到到达的路径`Home/test`，试试这个......

```
AutoloaderFactory::factory(
    array(
        'Zend\Loader\StandardAutoloader' => array(
            'autoregister_zf' => true,
            'namespaces' => array(
                __NAMESPACE__ => __DIR__ . '/' . __NAMESPACE__,
                'HomeTest' => __DIR__ . '/../../Home/test/HomeTest',
            ),
        ),
    )
); 
```

# ios - 使用具有子目录和外部 js/img 文件的 UIWebView 显示 HTML 文件

> ID：16114432
> 
> 赞同：-1
> 
> 时间：2013-04-19T22:31:59.550
> 
> 标签：ios, objective-c, uiwebview

在 Objective C 中，我想显示一个使用 UIWebView 构建的网站。

简要概述：我有一个包含 index.html 的文件夹。在该文件夹内，有一个“img”文件夹和一个“js”文件夹。js 文件夹有许多 .js 文件。img 文件夹有许多图像。我可以独立运行页面（在 xcode 之外）没问题。

现在我能够创建一个非常基本的 html 文件，将它存储在与所有 .h 和 .m 文件相同的目录中，并让它正确显示。我现在的目标是显示我的网站和上面刚刚解释的子目录。

这是我到目前为止所得到的：

**x代码：**

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSString *path = [[NSBundle mainBundle] path:@"index" ofType:@"html"];
    NSLog(path);
    NSString *content = [NSString stringWithContentsOfFile:path encoding:NSASCIIStringEncoding error:nil];
    NSURL *baseURL = [NSURL fileURLWithPath:[[NSBundle mainBundle] bundlePath]];

    [self.webView loadHTMLString:content baseURL:baseURL];
} 
```

**这是我的文件结构的样子：**

![在此处输入图像描述](https://i.stack.imgur.com/poikN.png)

当我运行它时，构建成功。但什么都没有显示。此外，我可以检查“问题导航器”选项卡（在左侧导航器上）以查看问题列表。我注意到，对于我包含在我的 game.html 文件中的每个 .js 文件，都有一个问题。他们都说基本相同的事情：

> 依赖性分析警告：警告：没有规则来处理架构 i386 的 sourcecode.javascript 类型的文件 '$(PROJECT_DIR)/Web/gameFolder/js/input/MouseInputHandler.js'

那么我能做什么呢？

谢谢：队长

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T22:55:18.853

```
*Dependency Analysis Warning: warning: no rule to process file '$(PROJECT_DIR)/Web/gameFolder/js/input/MouseInputHandler.js' of type sourcecode.javascript for architecture i386* 
```

将与 html 相关的文件添加到项目后，*.js 文件已添加到“构建阶段”中的“编译源”列表中。所以编译器试图编译它们，但他不能，因此发出警告（而且它们并没有真正被复制到包中）。这种默认行为曾经让我恼怒了好几分钟……

从此列表中删除它们（*.js 文件）并添加到“复制捆绑资源”

另一件事是 - 在捆绑包中，所有资源的层次结构都“扁平化”了。我的意思是，如果你有这样的文件：

```
index.html
js/lib/jquery.js
img/circle.png 
```

你可能做过类似的事情

```
<img src="img/circle.png"> 
```

但它不会在 webview 中工作。您必须像这样引用相同的文件：

```
<img src="circle.png"> 
```

因为 webview 以这种方式查看包中的文件：

```
index.html
jquery.js
circle.png 
```

还有一件事——你通过将 HTML 文件作为字符串加载来加载你的 web 内容，然后将它传递给 webview。这并不是很糟糕，但我相信使用其他方法会更好一些：

```
NSBundle* mainBundle = [NSBundle mainBundle];
NSString* path = [mainBundle pathForResource: @"index" ofType: @"html"];
NSURL* url = [NSURL fileURLWithPath: path];
NSURLRequest* req = [NSURLRequest requestWithURL: url];
[webview loadRequest: req]; 
```

# c++ - io_getevents 在比 timout 更短的时间内返回的作业数量少于请求的数量

> ID：16114435
> 
> 赞同：0
> 
> 时间：2013-04-19T22:32:19.597
> 
> 标签：c++, c, linux, solid-state-drive, aio

我正在阅读 SSD，请求 20 个异步作业。io_getevents 返回值 7 表示它已超时。超时设置为 10 秒，如下所示。通话经过的时间实际上是 4.89e-05 秒，例如，还剩下几乎所有 10 秒。问：有人遇到过这样的事情吗？如果你这样做了，那么你找到解决方案了吗？

以下是部分代码：

```
struct timespec ts = { 10, 0 } ; /* ten seconds delay */
const long ec = io_getevents( ctx, num_jobs, num_jobs, &events[ 0 ], &ts ) ; 
```

当 ec 返回 7, `ts.tv_sec = 10`,`ts.tv_nsec = 0`

Linux内核：

```
Linux VTL80-G-1J4-823-21 2.6.18-274.18.1.el5 #1 SMP Thu Feb 9 12:20:03 EST 2012 x86_64 x86_64 x86_64 GNU/Linux 
```

非常感谢您的帮助！顺便提一句。我将无法在几个小时之前检查该帖子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-23T15:19:43.023

通过添加额外的步骤和调试输出，我们发现我们的 linux 上的 aio 驱动程序存在问题（**5.3 Carthage，2.6.18-128.el5**）

我们应用的解决方案（我把它放在以防万一有人遇到同样的问题）是这样的：（
*我们自己计算经过的秒数。）*

1) 如果我们看到从我们返回的错误，`io_getevents()`我们会报告它。完毕。

2) 如果我们看到 0 个作业完成且经过的秒数，我们计算自己超出了预期的一个，我们会报告错误。完毕。否则我们继续（我们不更改超时时间`io_getevents()`）

3）如果一些工作完成了，我们分析它们`res`的错误（负值），如果有任何失败的工作，我们报告它。完毕。

4）如果还有一些剩余的工作，我们重置计时器（是的，我们将再次等待“预期”时间）并继续。

使用此方法，如果`io_getevents()`报告错误或任何作业报告错误，我们将报告错误。在最坏的情况下，当每个作业在整个 T-epsilon 等待时间后返回 ok 时，整个过程将需要 N * T 时间才能完成。

我希望有人会发现它有用。
祝福，
格雷格。

例子：

```
struct timespec       tmCountStart ;
unsigned              seconds_delay = SECONDS_DELAY ;

clock_gettime( CLOCK_REALTIME, &tmCountStart ) ;
while ( num_remaining_jobs > 0 )
{
    struct timespec ts = { seconds_delay, 0 } ;
    struct io_event events[ num_remaining_jobs ] ;
    long ec ;

    do
    {
        ec = io_getevents( ctx, num_remaining_jobs, num_remaining_jobs, &events[ 0 ], &ts ) ;
    }
    while( ec == -EINTR ) ;

    if ( ec < 0 )
        throw exception reporting error ec. cancel all remaining jobs
    else if ( ec == 0 )
    {
        const double elapsed = count elapsed seconds from tmCountStart
        seconds_delay = SECONDS_DELAY - static_cast< unsigned >( elapsed ) ;
        if ( seconds_delay > SECONDS_DELAY ) 
            throw exception reporting timeout. cancel all remaining jobs
    }
    else // we got some jobs back. may not all of them
    {
        for ( int i = 0 ; i < ec ; i++ )
            if (( int64_t )events[ i ].res < 0 )
                throw exception reporting failing job. cancel all remaining jobs.

        num_remaining_jobs -= ec ;
        if ( num_remaining_jobs > 0 )
        {
            clock_gettime( CLOCK_REALTIME, &tmCountStart ) ; // reset timer.
            seconds_delay = SECONDS_DELAY ;
        }
    }
} 
```

# jquery - 如何在 JQuery 代码中隐藏/保护 WCF URL

> ID：16114438
> 
> 赞同：0
> 
> 时间：2013-04-19T22:32:44.350
> 
> 标签：jquery

我正在使用 JQuery 与 WCF REST 服务进行交互。我想以某种方式隐藏或保护我的服务的网址..但我不知道该怎么做，有什么帮助吗？

```
function getMyUser() {
        var query = { "pLastName": null };
        query.pLastName = "m";
        var label = document.getElementById("idGetUsersByLastName");

        $(document).ready(function () {
            $.ajax({
                type: "POST",
                url: "//THE URL I WANT TO HIDE",
                data: JSON.stringify(query),
                contentType: "application/json; charset=utf-8",
                dataType: "text",
                success: function (data) {

                    var zx = 5652;
                    label.innerHTML = data;
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    var zx = 5652;
                    MSApp.execUnsafeLocalFunction(function () {
                        label.innerHTML = XMLHttpRequest.responseText;
                    });
                }
            });
        });

    }; 
```

我相信像回到服务器检查 url 是什么会起作用，但不知道如何实现它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T22:36:53.110

您无法隐藏它，并且知道这一点，您应该确保进行适当级别的身份验证，以防止篡改/滥用 - 无论是速率限制还是身份验证。

您不能指望某人只是不知道它具有足够的安全性-最终有人会找到它，并且他们会尝试破坏它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T22:36:41.163

与其尝试隐藏 URL，不如尝试通过添加对未授权活动的检查来强化您的服务脚本。

# c - 如何用 Pthread 并行化我的 n 皇后拼图？

> ID：16114443
> 
> 赞同：0
> 
> 时间：2013-04-19T22:33:05.767
> 
> 标签：c, parallel-processing, pthreads, n-queens

我有以下用于 n-queen 谜题的 Pthreads 代码。它编译成功，但我得到错误的答案。无论我输入什么值，我都会得到答案为零。我想我的代码中有某种逻辑错误。我猜这个问题发生在回溯/递归部分的某个地方。如果有人可以建议我一个解决方案，我会很高兴。

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <pthread.h>
#include <assert.h>

int NTHREADS, SIZE; 
int *hist;
int count = 0;

int solve(int col, int tid)
{
    int start = tid * SIZE/NTHREADS;
    int end = (tid+1) * (SIZE/NTHREADS) - 1;
    int i, j;
    if (col == SIZE) 
    {
        count++;
    }

    #define attack(i, j) (hist[j] == i || abs(hist[j] - i) == col - j)
    for (i = start; i <= end; i++) {
        for (j = 0; j < col && !attack(i, j); j++);
        if (j < col) continue;

        hist[col] = i;
        solve(col + 1, tid);
    }

    return count;
}

void *worker(void *arg)
{
    int tid = (int)arg;
    solve(0, tid);
}

int main(int argc, char* argv[])
{
    pthread_t* threads;
    int rc, i;

    // checking whether user has provided the needed arguments
    if(argc != 3)
    {
        printf("Usage: %s <number_of_queens> <number_of_threads>\n", argv[0]);
        exit(1);
    }

    // passing the provided arguments to the SIZE and NTHREADS 
    // variable, initializing matrices, and allocating space 
    // for the threads
    SIZE = atoi(argv[1]);
    NTHREADS = atoi(argv[2]);
    threads = (pthread_t*)malloc(NTHREADS * sizeof(pthread_t));
    hist = (int*)malloc(SIZE * sizeof(int));

    // declaring the needed variables for calculating the running time
    struct timespec begin, end;
    double time_spent;

    // starting the run time
    clock_gettime(CLOCK_MONOTONIC, &begin);

    for(i = 0; i < NTHREADS; i++) {
        rc = pthread_create(&threads[i], NULL, worker, (void *)i);
        assert(rc == 0); // checking whether thread creation was successful
    }

    for(i = 0; i < NTHREADS; i++) {
        rc = pthread_join(threads[i], NULL);
        assert(rc == 0); // checking whether thread join was successful
    }

    // ending the run time
    clock_gettime(CLOCK_MONOTONIC, &end);

    // calculating time spent during the calculation and printing it
    time_spent = end.tv_sec - begin.tv_sec;
    time_spent += (end.tv_nsec - begin.tv_nsec) / 1000000000.0;
    printf("Elapsed time: %.2lf seconds.\n", time_spent);

    printf("\nNumber of solutions: %d\n", count);

    free(hist);
    return 0;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T00:33:54.157

好吧，有很多错误，但第一个确实导致全部为 0。请注意，如果只使用一个线程，您的程序可以正常工作。

1.  在内部，您通过计算和`solve`拆分每个线程的工作，但是这不应该只做一次，因为在递归中您必须再次遍历所有行。`start``end``col > 0`

2.  您在线程之间共享变量`hist`，`count`而不在关键部分保护它们，例如使用信号量。在这种情况下，您可以通过为每个线程提供自己的这些变量版本并`count`在线程的连接中累积所有条目来避免信号量。共享`count`会引起问题的概率很低，但共享仍然是错误的，因为您不能假设这`count++`是一个原子的读-修改-写操作。共享`hist`只是算法上的错误。

3.  如果`NTHREADS`不完全除`SIZE`，则最后的计算`end`不一定产生`SIZE-1`。

4.  如果`NTHREADS > SIZE`你`start`和`end`将永远是`-1`。

5.  作为一种好的做法，您应该始终检查`malloc`（和朋友）是否不返回`NULL`，因为这意味着您的内存不足。如果您检查命令行参数的正确性，这也是对您程序的用户的尊重。

如果你解决了这些错误，无论线程数如何，每次在常规大小的棋盘上运行它都会得到 92。祝你好运。

至于代码示例（下面问），我有点不情愿，但你去吧。就个人而言，我会进行更多更改，但我尽可能地贴近您的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <pthread.h>
#include <assert.h>

int NTHREADS, SIZE;
int ** hist = NULL;
int * count = NULL;

static void oof(void)
{
    fprintf(stderr, "Out of memory.\n");
    exit(1);
}

void solve(int col, int tid)
{
    /* If NTHREADS does not divide SIZE, you
     * will not cover all rows.
     * Also make sure SIZE >= NTHREADS, otherwise start is always 0.
     */
    int start = (col > 0) ? 0 : tid * (SIZE/NTHREADS);
    int end = (col > 0 || tid == NTHREADS-1) ? SIZE-1 : (tid+1) * (SIZE/NTHREADS) - 1;
    int i, j;
    if (col == SIZE)
    {
        count[tid]++;
    }

    #define attack(i, j) (hist[tid][j] == i || abs(hist[tid][j] - i) == col - j)
    for (i = start; i <= end; i++) {
        for (j = 0; j < col && !attack(i, j); j++);
        if (j < col) continue;

        hist[tid][col] = i;
        solve(col + 1, tid);
    }
}

void *worker(void *arg)
{
    int tid = (int)arg;
    count[tid] = 0;
    solve(0, tid);
}

int main(int argc, char* argv[])
{
    pthread_t* threads;
    int rc, i, j, sum;

    // checking whether user has provided the needed arguments
    if(argc != 3)
    {
        printf("Usage: %s <number_of_queens> <number_of_threads>\n", argv[0]);
        exit(1);
    }

    // passing the provided arguments to the SIZE and NTHREADS 
    // variable, initializing matrices, and allocating space 
    // for the threads
    SIZE = atoi(argv[1]);
    NTHREADS = atoi(argv[2]);
    threads = (pthread_t*)malloc(NTHREADS * sizeof(pthread_t));
    hist = malloc(SIZE * sizeof(int*));
    count = malloc(SIZE * sizeof(int));
    if (hist == NULL || count == NULL) oof();
    for (i = 0; i < SIZE; i++)
    {
        hist[i] = malloc(SIZE * sizeof(int));
        if (hist[i] == NULL) oof();
        for (j = 0; j < SIZE; j++)
        {
            hist[i][j] = 0;
        }
    }

    // declaring the needed variables for calculating the running time
    struct timespec begin, end;
    double time_spent;

    // starting the run time
    clock_gettime(CLOCK_MONOTONIC, &begin);

    for(i = 0; i < NTHREADS; i++) {
        rc = pthread_create(&threads[i], NULL, worker, (void *)i);
        assert(rc == 0); // checking whether thread creation was successful
    }

    sum = 0;
    for(i = 0; i < NTHREADS; i++) {
        rc = pthread_join(threads[i], NULL);
        assert(rc == 0); // checking whether thread join was successful
        sum += count[i];
    }

    // ending the run time
    clock_gettime(CLOCK_MONOTONIC, &end);

    // calculating time spent during the calculation and printing it
    time_spent = end.tv_sec - begin.tv_sec;
    time_spent += (end.tv_nsec - begin.tv_nsec) / 1000000000.0;
    printf("Elapsed time: %.2lf seconds.\n", time_spent);

    printf("\nNumber of solutions: %d\n", sum);

    for (i = 0; i < SIZE; i++)
    {
        free(hist[i]);
    }
    free(hist); free(count);
    return 0;

} 
```

# css - 使用 CSS 背景图像的响应式图像

> ID：16114444
> 
> 赞同：3
> 
> 时间：2013-04-19T22:33:11.070
> 
> 标签：css, html, responsive-design

我试图找出创建响应式图像以适应 div 容器的整个背景的最佳方法。还有两个文本框的 rbga 值需要与图像的某些部分完全内联。

我想知道是否最好做 az index 并将图像放在 html 中或将图像保留在 css 作为背景图像？

现在，对于我的其余图像，我正在使用 JavaScript、jQuery 和 PHP 来调整位于 html 中的图像大小。我也在使用媒体查询来调整我的页面。我试图不做三个图像；但也许这是我最好的选择？

这是我到目前为止所拥有的。我已经删除了额外的代码，以免造成混乱。我还附上了我要完成的工作的 jpg。我可以让段落 div 对齐；但与图像不匹配。

```
<section id="content" role="main" class="cf">
   <div class="mission">
       <h1>We are What We Create</h1> 

      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec libero odio, 
         gravida sedconsequat a, faucibus dignissim</p>
     </div>

   </section>

CSS
.mission {
  background-image:url(../images/gallery_banner.jpg);
  background-repeat:no-repeat;
  background-size:contain;
  background-position:center;
}

.mission p {
    color: #fff;
    text-align:center;
    text-shadow: 2px 1px 1px  #4c4341;
    background: rgba(81,118,131, .9);
    width: 100%;
    margin: 0 auto;
    margin-top: 220px;
    margin-bottom:5%;
}

.mission h1 {
    font-weight: bold;
    font-size: 120%;
    color: #fff;
    text-shadow: 2px 1px 1px  #4c4341;
    background: rgba(81,118,131, .9);
    letter-spacing:.1em;
    text-align: center;

} 
```

链接到我正在尝试做的 Photoshop 图像：
[https ://docs.google.com/file/d/0B_TAmXXa2n8OUXJ2LVd0SFZwQVk/edit?usp=sharing](https://docs.google.com/file/d/0B_TAmXXa2n8OUXJ2LVd0SFZwQVk/edit?usp=sharing)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T23:24:59.587

如果调整大小（这就是我解释它的方式），我将采取以下措施来实现您的图像所暗示的一致性。我绝不是专家，我不知道这是否是最好的解决方案。但是这里有：以百分比测量边距和尺寸，因为如果以较小的比例显示，它将保持一致。

对于最左边的框说“Lorem ipsum dolor”：
11 / 1280 = 0.085 -> **0.8%**（左边距）
295 / 350 = 0.842 -> **84.2%**（边距顶部）
494 / 1280 = 0.385 -> **38.5%**（宽度)
49 / 350 = 0.154 -> **15.4%**（身高）

然后将这些 CSS 规则附加到位于“header image div”内的文本包装器中。

```
#wrapper { /* Wrapper for Left text */
    position: relative;
    top: 84.2%;
    left: 0.8%;
    width: 38.5%;
    height: 15.4%;    
} 
```

例如，请参见[这个 jsfiddle](http://jsfiddle.net/jJg6K/)。

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T01:02:02.363

我会将图像放入 html 并使用 css 对其进行样式设置以适应容器。

```
<div id="container"><img src="http://i35.tinypic.com/69kdw8.jpg" border="0" alt="Image and video hosting by TinyPic"><div id="d1">Test</div><div id="d2">Test test2</div></div> 
```

并设置样式：

```
#container {
    position:relative;
}
#d1, #d2 {
    position:absolute;
    background-color:green;
    opacity:0.7;
    color:white;
}
#d1 {
    height:16%;
    width:39%;
    bottom:0;
    left:0;
}
#d2 {
    height:68%;
    width:29%;
    top:0;
    left:58%;
} 
```

[http://jsfiddle.net/RuwRU/](http://jsfiddle.net/RuwRU/)

# java - 这是验证只有 0 和 1 字符串输入的最佳方法吗？

> ID：16114445
> 
> 赞同：0
> 
> 时间：2013-04-19T22:33:23.617
> 
> 标签：java, string, validation

我有一个输入，用户必须引入一个二进制 16 位序列......所以我编写了这段代码来验证字符串`bits`，我希望在验证真正的二进制序列后得到 1。

但是它真的**不起作用**。我已经尝试通过比较`if (c != '1' || c!='0')`并没有得到结果。

```
if ( bits.length() != 16 ) return 0;
    char[] toCharArray = bits.toCharArray();

    for (char c : toCharArray) {
        if ( ( Character.getNumericValue(c) != 1 ) || ( Character.getNumericValue(c) != 0 ) ) {
            return -1;
        }
    }

    return 1; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T22:36:07.850

你的逻辑不正确。如果值不等于且不等于`1` *，*则需要出错`0`。使用`&&`而不是`||`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T22:40:06.973

这是一个单行：

```
return bits.matches("[01]{16}") ? 1 : 0; 
```

`boolean`使用for代替`true`and会更好。`false``1``0`

这就是你需要的：

```
return bits.matches("[01]{16}"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T22:43:20.033

你的“如果”总是返回真，就像说“如果不是 5 点钟或不是 6 点钟，做点什么”

它总是不是其中之一

# c# - 在多边形内画圆

> ID：16114465
> 
> 赞同：2
> 
> 时间：2013-04-19T22:34:54.907
> 
> 标签：c#, winforms, computational-geometry

我需要一种算法，给定一个表示多边形的点数组（通常是矩形形状，但可以是任何非规则多边形），并给定该多边形内的点点击位置，拟合一个接触三个边的圆最接近单击位置的多边形，但在不离开边界的情况下最大化圆的整体覆盖范围

触摸两侧很容易（找到质心，然后找到到边缘的最短距离等） - 但触摸三个边是挑战。见附图。

![在此处输入图像描述](https://i.stack.imgur.com/SN9yL.png)

我需要尽快回答..谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T18:06:22.827

问题与[中轴](http://en.wikipedia.org/wiki/Medial_axis)有关。作为圆心接触 3 条或更多边的点是中轴的分支点。制作中轴，找到分支点并为给定的点击位置找到最接近的位置就足够了。

# chef-infra - 如何在 Chef 中扩展轻量级提供程序

> ID：16114469
> 
> 赞同：5
> 
> 时间：2013-04-19T22:35:17.533
> 
> 标签：chef-infra

我正在创建一堆不同的 Chef 提供程序来部署不同类型的应用程序。Chef 的[Extend a Lightweight Provider](http://docs.opscode.com/essentials_cookbook_lwrp_providers_extend.html)的文档表明这是可能的，但实际上并没有说明该怎么做。该页面表明可能需要调用`mixin`，但我不知道我的代码应该在文件中具有什么结构，也不知道`/libraries`如何将该代码实际包含在`/providers`.

以下是我想做的例子。

在我的基类中`/libraries`：

```
repository "http://my.svn.server/#{deployment[:project]}/branches/#{node[:chef_environment]}/"
user "deploy"
scm_provider Chef::Provider::Subversion
svn_username "svn_user"
svn_password "password" 
```

在我的 Torquebox Rails 应用程序部署提供商中：

```
deploy_revision "/my/deployment/directory/#{deployment[:project]}" do
  # Magically mixin the code from libraries
  environment "RAILS_ENV" => node[:chef_environment]
  restart_command "rake torquebox:deploy"
end 
```

当然还有针对不同类型应用程序的其他类型的提供程序。

谁能指出我正确的方向？我缺少的地方有文档吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-12-22T17:24:57.237

Chef 会在运行时[自动将 LWRP DSL 转换为成熟的 Ruby 类](https://github.com/opscode/chef/blob/master/lib/chef/provider/lwrp_base.rb#L83-L101)。这由菜谱名称后跟文件名称确定（这与创建实际资源名称的方式相同）。

因此，如果您有一本名为的食谱`bacon`和一个 LWRP `bacon/resources/eat.rb`，则关联的 LWRP 是`bacon_eat`. 关联的**类**是该类的驼峰式、常量化版本——在本例中`Chef::Resource::BaconEat`也是`Chef::Provider::BaconEat`如此。

这种模式有一个例外 - `default`. “默认”在 Chef 领域很特殊，因为它**没有**前缀。因此，如果您有一本名为的食谱`bacon`和一个位于 中的 LWRP `bacon/resources/default.rb`，则关联的 LWRP 是`bacon`（不是`bacon_default`）。关联的**类**是骆驼大小写的常量化版本 -在这种情况`Chef::Resource::Bacon`下`Chef::Provider::Bacon`（不是“BaconDefault”）。

好吧，那为什么是背景故事？为了扩展 LWRP，您希望继承 LWRP 的类（Rubyism）。因此，在您的`libraries/`目录中，您想要扩展您的自定义资源：

```
class Chef
  class Resource::MyResource < Resource::Bacon # <- this
  end
end 
```

因此，在您的示例中：

```
class Chef
  class Resource::MyDeployRevision < Resource::DeployRevision
    def initialize(name, run_context = nil)
      super

      # This is what you'll use in the recipe DSL
      @resource_name = :my_deploy_revision

      # Things like default action and parameters are inherited from the parent

      # Set your default options here
      @repository = "http://my.svn.server/#{node['deployment']['project']}/branches/#{node.chef_environment}/"
      @user = 'deploy'
      @scm_provider = Chef::Provider::Subversion
      @svn_username = 'svn_user'
      @svn_password = 'password'
    end
  end
end 
```

然后`my_deploy_revision`在你的食谱中使用。

# java - DriverManager 类是 Java 中的单例吗？

> ID：16114471
> 
> 赞同：0
> 
> 时间：2013-04-19T22:35:46.283
> 
> 标签：java, singleton

从[这个](http://www.xyzws.com/Javafaq/what-does-classforname-method-do/17)来源我读到：

> 您可能有使用 JDBC 驱动程序的经验。例如，类加载器尝试加载和链接“org.gjt.mm.mysql”包中的驱动程序类。如果成功，则调用静态初始化程序。

```
Class.forName("org.gjt.mm.mysql.Driver"); 
Connection con = DriverManager.getConnection(url,"myLogin", "myPassword"); 
```

> 让我们看看为什么需要 Class.forName() 将驱动程序加载到内存中。所有 JDBC 驱动程序都有一个向 DriverManager 注册自身的静态块，而 DriverManager 仅具有静态初始化程序。
> 
> MySQL JDBC 驱动程序有一个静态初始化程序，如下所示：

```
 static {
     try {
         java.sql.DriverManager.registerDriver(new Driver());
     } catch (SQLException E) {
         throw new RuntimeException("Can't register driver!");
     } } 
```

这是否意味着 DriverManager 是一个 Singleton 类？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T22:41:42.543

这不是单例。它是一个纯实用程序类，只有静态方法。该类有 0 个实例。单例将拥有该类的一个实例，并且您可以访问该实例以调用其上的实例方法。

Java 已记录在案，并且是开源的。您可以查看该类的源代码以了解其工作原理。

# postgresql - 将行聚合为 JSON 哈希

> ID：16114475
> 
> 赞同：1
> 
> 时间：2013-04-19T22:36:03.817
> 
> 标签：postgresql, plpgsql, postgresql-9.2

我有下表：

```
roles

id |  name | person
---+-------+--------
1  | admin | jon
2  | admin | fred
3  | user  | alfred
4  | user  | jon 
```

名称可以变化为任何值。

我想得到一个像这样的 JSON 哈希：

```
{"admin": ["jon", "fred"], "user": ["alfred", "jon"]} 
```

使用 PL/PGSQL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T01:05:38.973

我会假设名称可能会有所不同，因为没有它就没有挑战。使用[eval 函数](https://stackoverflow.com/a/7433644/2115135)：

```
CREATE OR REPLACE FUNCTION eval(expression text) RETURNS text
AS
$body$
DECLARE
  result text;
BEGIN
  execute expression INTO RESULT;
  RETURN result;
END;
$body$
language plpgsql 
```

我们可以创建一个动态交叉表：

```
SELECT eval('SELECT row_to_json(q)
FROM (SELECT '||(SELECT string_agg(DISTINCT '"'||name||'"',',')
                 FROM roles)||'
      FROM crosstab(''SELECT 1,name,array_agg(person)::text[]
                      FROM roles
                      GROUP BY name;
                    '') as ct(row_name int,'||(SELECT string_agg(DISTINCT '"'||name||'"                   text[]',',')
FROM roles)||')
)as q'); 
```

## 编辑

不那么花哨的方法：

```
SELECT '{'||string_agg(temp,',')||'}'
FROM
(
SELECT '"'||name||'": ['||(string_agg(person,',')::text)||']' as temp FROM roles GROUP BY name
) as q 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T22:46:48.250

postgres 的当前开发版本（未来的 9.3）将重点关注数据库内部的 JSON 支持。根据您需要解决此问题的速度有多快，您可以等待 9.3 或安装当前的测试版（应该包括新功能）。

这里有两篇关于新 json 特性的文章——第一篇是第三方的——第二篇是开发树上的 JSON 库参考：

*   [postgres 9.3 具有高亮 json](http://michael.otacoo.com/postgresql-2/postgres-9-3-feature-highlight-json-operators/)
*   [postgres 开发 json 库](http://www.postgresql.org/docs/devel/static/functions-json.html)

# facebook - Facebook Graph API 不返回帖子的所有评论

> ID：16114478
> 
> 赞同：0
> 
> 时间：2013-04-19T22:36:31.037
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

嗨，我看到 Facebook Graph API 没有返回页面的所有帖子评论。它很好地显示了页面的所有帖子，但没有显示每个帖子的所有评论。它只显示最后两条评论！！。但是对于其他一些页面显示所有评论。所以为什么某些页面出现问题？这是 Facebook 的错误吗？或者请建议我是否错了。我使用了具有 read_stream 权限的应用程序的访问令牌。我不想使用其他权限，因为这是一个安全风险。

请回复

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-01T10:59:10.367

这是因为评论员隐私设置。如果用户将其关闭，您将无法通过 API 请求评论。当您在 facebook graph api 上进行测试时：

> postid/?fields=comments.summary(true)

您将看到调试信息：

> total_count 表示评论边上的大致节点数。返回的实际结果数可能因隐私设置而异。

你也可以参考这个相关的问题： [facebook graph api return not all the comments](https://stackoverflow.com/questions/16774103/facebook-graph-api-returns-not-all-the-comments)

# c++ - 链表和指针

> ID：16114480
> 
> 赞同：1
> 
> 时间：2013-04-19T22:36:37.537
> 
> 标签：c++, pointers, linked-list

```
#include "PersonList.h"
#include <iostream>
#include <string>
using namespace std;

PersonList::PersonList()
{
    head = NULL; //Head is a PersonRec*
}

struct PersonRec
{
    string aName;
    int aBribe;
    PersonRec* link;
};

void PersonList::AddToList()
{
    //string a;
    //int b;
    PersonRec* p;
    PersonRec **currPtr = &head;
    p = new PersonRec;
    cout << "\nEnter the person's name: ";
    cin >> p->aName;
    cout<< "\nEnter the person's contribution: ";
    cin >> p->aBribe;

    if (head == NULL)
    {
        cout<<1<<endl;
        head=p;
    }
    else if(head!=NULL)
    {
         bool x = true;
         while (x != false)
         {
             *currPtr = (*currPtr)->link;
             if (currPtr == NULL)
             {
                 currPtr = &p;
                 x = false;
             }
         }
    }
} 
```

这应该是一个链表，用户在其中输入姓名和贿赂金额，然后将其添加到贿赂金额最高的列表中。

在这个特定阶段，我只是想弄清楚如何将人员多次输入到列表中，甚至没有贿赂进入等式。由于包含了我不太擅长的指针，我在这里遇到了麻烦。

成功输入列表中的第一个节点后，程序在我输入第二个节点后冻结，因此我在“else if(head!=NULL)”处的代码存在缺陷。我不确定这是语法还是我根本没有完全理解这个概念。

此外，我不允许使用返回前一个节点的链接作为 PersonRec 结构的一部分，这可能对我有所帮助。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T22:45:15.980

您正在接近，但代码实际上并未将新的第二项添加到列表中。它的一个问题是它到达列表的末尾和最终的分配：

```
currPtr=&p; 
```

只需将新列表元素的地址分配给局部变量 currPtr（这不会导致它被添加到列表中）。以下是一些让它工作的建议（这种看起来像是家庭作业，所以我不想只给出代码）：

*   创建对象后初始化`p->link`为NULL。似乎没有可以初始化它的构造函数（在这种情况下，结构和类的混合似乎有点奇怪）。
*   从`currPtr`.
*   在将下一个（链接）地址分配给 currPtr 之前的 while 循环中，检查它是否为空。一旦分配它，您就不再拥有需要更新的节点的地址。

# d3.js - D3：是否可以在节点之间添加多个（超过 2 个）边？

> ID：16114488
> 
> 赞同：2
> 
> 时间：2013-04-19T22:37:04.693
> 
> 标签：d3.js, force-layout

我正在构建一个 D3 力图来可视化网络流量。需要用超过 2 条路径链接两个节点。那可能吗？帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T23:14:47.543

没有什么能阻止您在节点之间绘制多条边。然后唯一的事情是，为两个节点制作了强制有向图布局以仅共享一个链接。因此，我建议执行以下操作：

*   从力有向图来看只有一个环节。
*   从绘图的角度来看，如果两个节点都有多条边，则绘制多条边。

它为边缘提供以下数据结构：

```
links = {
    source: 0, //index of source node
    target: 0 //index of target node
    representations : [{color: "red"}, {color:"blue"}]
} 
```

因此，当您提供指向力有向图的链接时，它不会抱怨。但是当您实际绘制链接时，您可以遍历`representations`数组以绘制不同的链接。

# javascript - trouble with json, setting key name by variable

> ID：16114489
> 
> 赞同：1
> 
> 时间：2013-04-19T22:37:27.917
> 
> 标签：javascript, json, variables, object, push

```
var a = { property: ((type == 'files') ? 'id' : ((type == 'folders') ? 'name' : '')) };     // have to create a dummy object property...
return_json[type].push({ a['property']: Content[type][index][a['property']] }); 
```

I'm trying to return some JSON for a client-side query, but I need the key of the returned object to be based on a variable, and it's not working. I was under the impression that creating a dummy object would work, but it doesn't.

Firefox tells me error, missing : before property ID at a['property'] on the second line.

Thanks!

* * *

Here's all the code in case you need it. Yes it's largely object oriented. These two functions are used for getting the list of files the user selected (this is a file manager) before an ajax request to delete the files or whatever the user is trying to do. But for some things I only want to return the ID of each file, not the entire object, and that's where I run into a problem here. For Files, it needs to return an 'id' whereas it should return a 'name' for folders.

```
GetSelectedJSON: function(which = 0, onlyselected = true, justids = false) {            // add another param to only get IDs!

    var return_json = { files: [], folders: [] }

    this.ForEachItem(which, onlyselected, function(index,type) {

        var type = ((type == 1) ? 'files' : ((type == 2) ? 'folders' : function(){ return; }));

        if (justids) {
            var a = { property: ((type == 'files') ? 'id' : ((type == 'folders') ? 'name' : '')) };     // have to create a dummy object property...
            return_json[type].push({ a['property']: Content[type][index][a['property']] });
        } else {
            return_json[type].push(Content[type][index]);
        }           
    });

    return JSON.stringify(return_json);
},

ForEachItem: function(which = 0, onlyselected = true, method = function(index,type){}) {

    if (which == 0 || which == 1) {
        for (var i = 0; i < (onlyselected ? Content.selected.files.length : Content.files.length); i++) {
            method((onlyselected ? Content.selected.files[i] : i),1);
        }
    }

    if (which == 0 || which == 2) {
        for (var i = 0; i < (onlyselected ? Content.selected.folders.length : Content.folders.length); i++) {
            method((onlyselected ? Content.selected.folders[i] : i),2);
        }
    }
}, 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T22:58:57.217

在对象文字表达式中，构造的左侧`:`必须是标识符或字符串常量。它不能是一个表达，这是你想要做的。

如果您想要的东西与您在风格上所拥有的东西接近，您可以使用匿名函数来构建对象：

```
 return_json[type].push(function() {
    var obj = {};
    obj[a.property] = Content[type][index][a.property];
    return obj;
  }()); 
```

# actionscript-3 - Stop function creating bitmaps/reduce cpu overload/reduce lag

> ID：16114494
> 
> 赞同：0
> 
> 时间：2013-04-19T22:37:53.950
> 
> 标签：actionscript-3, bitmap, lag, bitmapdata, enterframeevent

Hi I'm noticing that the following code is producing a noticeable chunk of lag when it is incorporated.

```
 public function impassable_collisions():void { //prevent player from moving through impassable mcs

        for each(var mc:MovieClip in impassable) {

        var bitmap = createBitmapClone(mc); //return clone of bitmap of mc, accounting for transformations

        var bounds:Rectangle = player.getRect(bitmap);
        var playerCenterX:Number = bounds.left + bounds.width * .5;
        var playerCenterY:Number = bounds.top + bounds.height * .5;

        //Test for a pixel perfect collision against a shape based on a point and radius, 
        //returns the angle of the hit or NaN if no hit.
        var hitAngle:Number = hitTestPointAngle(bitmap, playerCenterX, playerCenterY, player.height/2);

        if(!isNaN(hitAngle)){
            // move player away from object
            player.x -= int(Math.cos(hitAngle) * player.speed*timeDiff);
            player.y -= int(Math.sin(hitAngle) * player.speed*timeDiff);
        }
    }
} 
```

So this function is called from another function which is called from an enterFrame listener. I'm looping through an array containing perhaps between 5-30 movieclips at any given time, the given mc will then be cloned to a bitmap and that bitmap will be used to test for collisions between itself and another bitmap (the "player"). I'm assuming that something rather inefficient is taking place and thus producing lag - more choppy-like movements when the "player" is moved. Does anyone have an idea what the problem is/solutions to it?

Sorry for the rather vague question title

thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T23:16:35.973

Pixel Perfect 碰撞检测成本很高。我不能说这是唯一的问题，但我可以告诉你它在处理方面很昂贵。

在这个循环中每次迭代创建一个新的位图也很昂贵。

您可以尝试的一件事是在进行更深入的检查之前消除对象。例如，如果对象不在特定距离内，则非常快速的距离检查可以消除测试对象的需要。

```
if (distance <= threshold)
{
    // create the bitmap for the check
    // do the expensive pixel perfect collision check
} 
```

您的目标是消除明显距离不够近而无法碰撞的物体。

# zend-framework - 如何使用标签清除 zend 元数据缓存

> ID：16114499
> 
> 赞同：0
> 
> 时间：2013-04-19T22:38:37.623
> 
> 标签：zend-framework, caching, redis, metadata

我正在使用 redis 缓存后端，我想清理元数据缓存 - zend 元数据是否有某种默认标记，所以我可以在不刷新所有数据的情况下删除缓存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:41:26.100

组件，例如`Zend_Db_Table_Abstract`不使用标签将对象保存到缓存中，所以我相信尝试清理缓存空标签应该这样做：

```
$cache->clean(
  Zend_Cache::CLEANING_MODE_MATCHING_ANY_TAG,
  array('')
); 
```

# ios - 从lazytablevimage传递一个xml url链接以使用UIWebView查看？

> ID：16114505
> 
> 赞同：0
> 
> 时间：2013-04-19T22:39:12.077
> 
> 标签：ios, xml, uitableview, webview, tableview

例如这是我的 XML

```
<feed xmlns:im="http://itunes.apple.com/rss" xmlns="http://www.w3.org/2005/Atom" xml:lang="en">
<entry>

<im:title>Como Una Virgen para Cristo</im:title>
<im:url>listindiario.com</im:url>

</entry> 
```

一切都很完美......

但问题是，当您按下称重传感器链接 url 打开另一个带有 UIWebView 的视图时，我该怎么做？

我正在使用故事板

这是一些代码：AppTableViewController.m

```
#import "AppTableViewController.h"
#import "AppRecord.h"
#import <SDWebImage/UIImageView+WebCache.h>
#import "CustomCell.h"
#import "WebView.h"
#import "ParseOperation.h"
@class WebView;
@implementation AppTableViewController
#pragma mark - Table view creation (UITableViewDataSource)

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section

{
    return [self.entries count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"LazyTableCell";
    CustomCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    AppRecord *appRecord = (self.entries)[indexPath.row];
    cell.nameText.text = appRecord.appName;
    cell.detalleText.text = appRecord.artist;
    cell.durationText.text= appRecord.appDuration;
    cell.dateText.text= appRecord.appDate;

    [cell.myimage setImageWithURL:[NSURL URLWithString:appRecord.imageURLString]
      placeholderImage:[UIImage imageNamed:@"BackgorundLogoCell.png"]];

    cell.detalleText.text = appRecord.artist;

    return cell;

} 
```

解析操作.m

```
#import "ParseOperation.h"
#import "AppRecord.h"
#import "TFHpple.h"
#import "TFHppleElement+KeyedSubcript.h"

@interface ParseOperation ()
@property (nonatomic, copy) ArrayBlock completionHandler;
@property (nonatomic, strong) NSData *dataToParse;
@end

@implementation ParseOperation
- (id)      initWithData:(NSData *)data
       completionHandler:(ArrayBlock)handler
{
    self = [super init];
    if (self != nil)
    {
        self.dataToParse = data;
        self.completionHandler = handler;
    }
    return self;
}
- (void)main
{
    NSMutableArray *workingArray = [NSMutableArray array];
    TFHpple *appParser = [TFHpple hppleWithXMLData:self.dataToParse];
    NSString *appXpathQueryString = @"//xmlns:entry";
    NSArray *appsArray = [appParser searchWithXPathQuery:appXpathQueryString];
    for (TFHppleElement *element in appsArray) {
        AppRecord *app = [[AppRecord alloc] init];
        app.appName = [[element firstChildWithTagName:@"title"] text];
        app.imageURLString = [[element firstChildWithTagName:@"image"] text ];
        app.artist = [[element firstChildWithTagName:@"pastor"] text];
        app.appDuration = [[element firstChildWithTagName:@"duration"] text];
        app.appDate = [[element firstChildWithTagName:@"date"] text];
        app.appUrl = [[element firstChildWithTagName:@"url"] text];
        [workingArray addObject:app];
    }
    self.completionHandler(workingArray);
    self.dataToParse = nil;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T23:57:29.603

要在 UITableView 的任何单元格中响应触摸，您必须实现此方法....

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

在此方法中，您可以初始化任何视图并将根据单元格的链接传递给此新视图。

要在 webView 中加载网页，您需要编写此...

```
 NSURL *url = [NSURL URLWithString:urlAddress];
 NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
[webView loadRequest:requestObj]; 
```

# iphone - Objective-C：如何使用调用子版本的方法？

> ID：16114506
> 
> 赞同：-1
> 
> 时间：2013-04-19T22:39:20.637
> 
> 标签：iphone, ios, objective-c

我以前遇到过这种需求。现在，我有一个每 0.1 秒调用一次的函数来检查已经过去了多少时间。如果它超过“总时间”（它从`getTotalTime`函数中检索），它就会停止。该`getTotalTime`方法在子项中被覆盖。每 0.1 秒调用一次的函数的代码也被覆盖了，但是使用的父类中的原始方法`getTotalTime`被调用 using `super`，只需要调用子类的方法`getTotalTime`而不是它自己的方法。这当然是问题所在。我可以从每个孩子的父母那里重写代码，但这似乎很愚蠢。一些谷歌搜索已经显示了其他语言的解决方案，但没有在 Objective-C 中。有没有办法做到这一点？如果没有，有哪些替代方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T04:01:44.823

> 每0.1秒调用一次的函数的代码也被重写了，但是父类中使用getTotalTime的原始方法是使用super调用的，只是它需要调用子类的getTotalTime方法而不是自己的方法。

你的问题很难解析，但听起来你有这样的东西：

```
@interface A : NSObject // the "parent" class
- (void) timerMethod;
- (NSDate*) getTotalTime;
// other methods as necessary
@end

@interface B : A // the "child" class
// only has overrides of A's methods
@end

@implementation A
- (void) timerMethod
{
    NSLog(@"[A timerMethod]: the time is: %@", [self getTotalTime]);
}

- (NSDate *) getTotalTime
{
    return [NSDate date];
}
@end

@implementation B
- (void) timerMethod
{
    NSLog(@"[B timerMethod]: the time is: %@", [self getTotalTime]);
    [super timerMethod];
}

- (NSDate *) getTotalTime
{
    return [NSDate dateWithTimeIntervalSinceNow:3600];  // 3600 == an hour from now
} 
```

我认为您担心的是 B`-timerMethod`调用 A `-timerMethod`，然后又调用`[self getTotalTime]`，因此您认为 A`-getTotalTime`将始终是被调用的那个。放轻松，这不是继承的工作方式。如果您有一个 B 的实例并且您调用 B 的方法之一，则`self`表示指向该 B 实例的指针，*即使在继承方法的上下文中也是如此*。也就是说，`self`即使在 A 的方法之一中也指向同一个对象。因此，如果您有一个发送`-timerMethod`到 B 实例的计时器，则会发生以下情况：

*   B`-timerMethod`被调用。
*   该方法调用 [super timerMethod]，导致调用 A`-timerMethod`
*   A`-timerMethod`调用`[self getTotalTime]`，因为`self`是指向 B 实例的指针，所以 B`-getTotalTime`被调用

因此，如果您的计时器将其消息发送到 B 的实例，您应该得到两个日志语句，它们的时间都是从现在开始的一小时：

> [B timerMethod]：时间为：*当前时间+1小时*
> 
> [A timerMethod]：时间为：*当前时间+1小时*

但是，如果您的计时器将其消息发送到 A 的一个实例，您将只获得一个日志语句，并且它将具有当前时间：

> [A timerMethod]：时间为：*当前时间*

像这样在子类中“覆盖”方法的能力是使继承有用的关键特性之一；子类可以修改或完全替换超类的行为，并且超类中的代码将自动调用被覆盖的方法，而不是在子类的实例中调用它自己的方法。

所以，你的标题问题的答案......

> 如何使用调用子版本的方法？

只是`self`在你想要当前对象提供的方法时使用。

# jsp - 如何使用 <%@ include file %> 包含远程 jsp

> ID：16114507
> 
> 赞同：0
> 
> 时间：2013-04-19T22:39:32.267
> 
> 标签：jsp

我想包含来自另一个项目的 jsp。我怎么做？

我很好用 or <%@ include file %>

我尝试为另一个项目提供路径，但它不起作用。

假设要包含的jsp称为a.jsp，包含a.jsp的jsp称为b.jsp

# post - PHP: Why does $_POST have a larger size limit than $_GET?

> ID：16114510
> 
> 赞同：4
> 
> 时间：2013-04-19T22:39:57.093
> 
> 标签：post

I know that $_POST has a larger size limit than $_GET, but why? What is $_GET limited by?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T22:41:20.610

这就是定义 HTTP 的方式。GET 主要用于获取数据，而 POST 用于发送数据。

关于限制和差异的一些细节：http: [//www.w3schools.com/tags/ref_httpmethods.asp](http://www.w3schools.com/tags/ref_httpmethods.asp)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T22:42:18.250

`$_GET`在 url 中传输，因此受其最大大小的限制。在[HTTP 标准](http://www.w3.org/Protocols/rfc2616/rfc2616.html)没有定义理论上的最大 url 大小的地方，它受到许多浏览器和服务器的限制。请参阅此[常见问题解答](http://www.boutell.com/newfaq/misc/urllength.html)，它建议您的应用程序使用小于 2000 个字符的 url

`$_POST`在请求正文中传输，理论上也是无限的，但与`$_GET`浏览器和服务器一样存在限制。但它们通常要高得多。

供您参考：要调整 php 中的最大帖子大小，请使用 ini 值

```
post_max_size=... 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-19T22:43:15.343

GET 参数都作为 URL 的一部分传递。URL 长度有限，取决于浏览器和 Web 服务器；最大的限制是 IE，它将[URL 限制为 2083 字节](http://support.microsoft.com/kb/208427)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T22:51:51.927

GET 方法将数据添加到 URL；并且 URL 的长度是有限的（最大 URL 长度为 2048 个字符）。

# c# - C#属性类的继承

> ID：16114514
> 
> 赞同：6
> 
> 时间：2013-04-19T22:40:05.780
> 
> 标签：c#, .net, inheritance, custom-attributes

属性类的继承如何在 C# 中工作？为了澄清，我说的是属性类本身（即 的基类`System.Attributes`）的继承，而不是碰巧将它们作为属性的任何类。

出于某种原因，我似乎在这方面找不到任何东西（我的搜索总是以其他含义出现）。

例如，如果 a 有一个`AttributeA`扩展类`System.Attribute`：

1.  我是否必须单独标记`AttributeA`with的子类`[AttributeUsage()]`？（由于`System.AttributeUsage`的继承是`true`，我想我不会。）

2.  会阻止我拥有多个for 属性`AllowMultiple=false`的*子类*吗？`AttributeUsage``AttributeA`*`AttributeA`*

 *编辑：

程序员只能阅读代码。

```
[AttributeUsage(AttributeTargets.Class, AllowMultiple=false)]
class AttributeA
{ }

class AttributeB : AttributeA
{ }

class AttributeC : AttributeA
{ }

[AttributeB]
[AttributeC]
class Foo
{ } 
```

这行得通吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T23:09:28.953

（我终于可以尝试了。）

示例代码确实可以编译。我仍然喜欢有文档，虽然我认为 C# 是 C# 并且它不会改变这一点。（正确的？）

显然：

1.  `AttributeUsage`正如预期的那样，子类继承。
2.  `AllowMultiple`仅指（严格）原始类的属性，而不是子类*。*
3.  而且，`AttributeUsage`可以有效地“重新定义”。

和

```
[AttributeUsage(AttributeTargets.Class, AllowMultiple = false)]
class AttributeA : Attribute
{ }

[AttributeUsage(AttributeTargets.Class, AllowMultiple = true)]
class AttributeB : AttributeA
{ }

class AttributeC : AttributeA
{ } 
```

以下是可以的

```
[AttributeA]
[AttributeB]
[AttributeB]
[AttributeC]
class Foo
{ } 
```

但这不是

```
[AttributeA]
[AttributeB]
[AttributeC]
[AttributeC]
class Foo
{ } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-19T21:01:10.220

您可以通过为 AttributeUsageAttribute 使用命名参数 Inherited 来控制此行为。

```
[AttributeUsage(AttributeTargets.Class, AllowMultiple = false, Inherited = false)]
class AttributeA
{ }

class AttributeB : AttributeA
{ }

class AttributeC : AttributeA
{ } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T22:50:14.647

属性用法适用于使用属性的类。

例如，如果您使用 AttributeA 标记类 A，并且类 B 是 A 的子类，那么如果 AttributeA AttributeUsage 的继承为 true，则不需要使用 AttributeB 标记类 B。*

# mysql - ISQL 对于每个作者，列出他们的编号、姓氏和他们写的书的数量

> ID：16114516
> 
> 赞同：0
> 
> 时间：2013-04-19T22:40:13.220
> 
> 标签：mysql

```
SELECT a.author_num, a.author_last, COUNT(w.book_code)
FROM book.book b, book.author a, book.wrote w
WHERE (b.book_code=w.book_code and w.author_num=a.author_num)
ORDER BY a.author_last DESC; 
```

我有 3 张桌子；书、作者和写作。我需要找出作者写了多少本书。我需要子查询吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T22:47:03.970

你可以只使用一个`GROUP BY`

```
SELECT a.author_num, a.author_last, COUNT(w.book_code)
FROM book.book b, book.author a, book.wrote w
WHERE (b.book_code=w.book_code and w.author_num=a.author_num)
GROUP BY a.author_num, a.author_last
ORDER BY a.author_last DESC; 
```

虽然我觉得你的列名不太正确

# java - 在关闭警报对话框之前检查网络连接

> ID：16114517
> 
> 赞同：0
> 
> 时间：2013-04-19T22:40:19.567
> 
> 标签：java, android, android-webview, android-alertdialog, connectivity

所以我有一个基于 webview 的应用程序。我的问题是，当`OnReceivedError`互联网丢失时被调用，我想

当用户单击对话框上的“确定”以检查连接时，

*   如果连接可用，则解除警报并致电`web.reload();`
*   如果没有网络连接（wifi 或手机），请致电`finish();`

通过以下方式解决：

*   将警报对话框 Postive 按钮更改为以下内容

    ```
    .setPositiveButton(R.string.alert_dialog_ok,new DialogInterface.OnClickListener() {         
     public void onClick(DialogInterface dialog,int id) { 
    ```

*   问题出在以下

    ```
    DialogInterface paramDialogInterface,int paramInt) 
    ```

上下文上下文；

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
  this.context = this;
  ...
  @Override
public void onReceivedError(WebView view, int errorCode,
            String description, String failingUrl) {
        AlertDialog.Builder localBuilder2 = new AlertDialog.Builder(
                Webview_Main.this);
        localBuilder2.setTitle(R.string.webview_error_received_title);
        localBuilder2.setMessage(R.string.webview_error_received);
        localBuilder2.setIcon(R.drawable.ic_launcher);
        localBuilder2.setPositiveButton(R.string.alert_dialog_ok,new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog,int id) {
                 if(isNetworkAvailible(context))
                 web.reload();
                 else
                 finish();
         }
    };
        localBuilder2.show();
    }; 
```

isNetworkAvailible 类

```
 public boolean isNetworkAvailible(Context ctx) {

    NetworkInfo info = (NetworkInfo) ((ConnectivityManager) ctx
            .getSystemService(Context.CONNECTIVITY_SERVICE))
            .getActiveNetworkInfo();

    if (info == null || !info.isConnected()) {
        return false;
    }
    if (info.isRoaming()) {
        // here is the roaming option you can change it if you want to
        // disable internet while roaming, just return false
        return false;
    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T22:43:27.063

由于代码中的***此***关键字引用 DialogInterface.OnClickListener，因此未为该类型定义 getSystemService，因此您必须从引用当前活动的上下文变量调用 getSystemService，例如，如下所示：

```
context.getSystemService(Activity.CONNECTIVITY_SERVICE) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T22:46:36.903

更正我的答案：

```
 Context context;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
            this.context = this; 
    }

@Override
public void onReceivedError(WebView view, int errorCode,
            String description, String failingUrl) {
        AlertDialog.Builder localBuilder2 = new AlertDialog.Builder(
                Webview_Main.this);
        localBuilder2.setTitle(R.string.webview_error_received_title);
        localBuilder2.setMessage(R.string.webview_error_received);
        localBuilder2.setIcon(R.drawable.ic_launcher);
        localBuilder2.setPositiveButton(R.string.alert_dialog_ok,
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface paramDialogInterface,int paramInt) {
                    if(haveInternet(context))
                        web.reload();
                    else
                        finish();
                }
            });
        localBuilder2.show();
    };

public boolean haveInternet(Context ctx) {

    NetworkInfo info = (NetworkInfo) ((ConnectivityManager) ctx
            .getSystemService(Context.CONNECTIVITY_SERVICE)).getActiveNetworkInfo();

    if (info == null || !info.isConnected()) {
        return false;
    }
    if (info.isRoaming()) {
        // here is the roaming option you can change it if you want to
        // disable internet while roaming, just return false
        return false;
    }
    return true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T22:52:39.527

我可能会错过很多时间，但看起来你正在创建一个`DialogInterface.OnClickListener`，但没有分配它来处理任何事情。

更改您的代码：

```
 localBuilder2.setPositiveButton(R.string.alert_dialog_ok, null);

    localBuilder2.setOnClickListener(new DialogInterface.OnClickListener() {
        ...
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T04:23:54.030

检查网络可用性

在您的活动中

```
if(CheckNetwork.isInternetAvailable(ActvityName.this))// pass activity context
     {
             //do soemthing
     } 
```

如果您需要检查非活动类中的网络可用性，则需要将活动上下文作为参数传递给类构造函数并使用活动上下文。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.second);
    MyAnotherClass = new MyAnotherClass(MainActivtity.this); 

} 
```

在你的 MyAnotherClass

```
 Class MyAnotherClass
      {
          Context context;
         public MyAnotherClass(Context activitycontext)
         {
             this.context= activitycontext;
             if(CheckNetwork.isInternetAvailable(context))
             {
                     //do something
             }
         }
      } 
```

CheckNetwork 类

```
public class CheckNetwork {

private static final String TAG = CheckNetwork.class.getSimpleName();

public static boolean isInternetAvailable(Context context)
{
    NetworkInfo info = (NetworkInfo) ((ConnectivityManager)
    context.getSystemService(Context.CONNECTIVITY_SERVICE)).getActiveNetworkInfo();

    if (info == null)
    {
         Log.d(TAG,"no internet connection");
         return false;
    }
    else
    {
        if(info.isConnected())
        {
            Log.d(TAG," internet connection available...");
            return true;
        }
        else
        {
            Log.d(TAG," internet connection");
            return true;
        }

    }
}
} 
```

# android - Trying to hide and show menu items on action bar

> ID：16114520
> 
> 赞同：12
> 
> 时间：2013-04-19T22:40:33.863
> 
> 标签：android, menu, android-actionbar

I have looked through the questions on stack overflow and can't find the solution.

```
@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.themenu, menu);
    MenuItem   item = menu.findItem(R.id.menu_settings);
    MenuItem item2 = menu.findItem(R.id.menu_save);
    item.setVisible(isdown);
    item2.setVisible(isdown);
    return true;
} 
```

This sets my menu items to visible (item1 and item2). the onclick works fine

```
public void inflateTextarea() {
    if(isdown == true) {
        isdown = false;
        LinearLayout tl = (LinearLayout)findViewById(R.id.content);
        tl.setVisibility(View.VISIBLE);
        ScaleAnimation scale =  new ScaleAnimation(1, 1, 0, 1);
        scale.setFillAfter(true);
        scale.setDuration(500);
        tl.startAnimation(scale);
    }
} 
```

Then this sets my isdown boolean to false. on stack people say that the onPrepareOptionsMenu should fire everytime I click but this is not the case. I am able to hide one menu item on the onclick function

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch(item.getItemId()) {
        case R.id.menu_settings: 
            Log.v("Log:","edit_item pressed");
            return true;
    }
} 
```

But I have multiple menu items that I need to hide and others that I want to show. how can I go about this?

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-19T22:48:51.180

`isDown`改变变量是不够的。`setVisible()`每次要更改可见性时都必须调用该方法。该方法不仅仅是设置一个布尔值，所以仅仅改变一个布尔值是行不通的。

将`isDown`值更改为 false 后，您需要调用`invalidateOptionsMenu()`which 将通过再次调用重新启动菜单`onPrepareOptionsMenu()`。

尝试使用此代码使菜单项不可见：

```
...
isdown = false;
invalidateOptionsMenu();
... 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-20T02:53:56.570

尝试这个，

```
private Menu menu=null;
@Override
public void onCreateOptionsMenu(Menu menu,MenuInflater inflater)
{
    inflater.inflate(R.menu.note_menu, menu);
    this.menu=menu;
super.onCreateOptionsMenu(menu,inflater);
menu.findItem(R.id.menuChartNoteEdit).setVisible(isdown);
menu.findItem(R.id.menuChartOpenNote).setVisible(isdown);
} 
```

当您想在任何地方隐藏菜单时，执行`onCreateOptionsMenu()` 后只需更改值`isdown`并重复此代码，

```
menu.findItem(R.id.menu_settings).setVisible(isdown);
menu.findItem(R.id.menu_save).setVisible(isdown); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-10T20:48:31.177

在你的 FragmentActivity 中试试这个

```
public boolean onPreparePanel(int featureId, View view, Menu menu) {
    if(isLeftMenuOpened()) return false;
    return super.onPreparePanel(featureId, view, menu);
} 
```

方法 FragmentActivity.onPreparePanel 为所有附加的片段创建菜单。您必须返回 true 才能显示菜单；如果您返回 false 则不会显示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-29T13:06:57.497

我有一个包含两个项目的菜单，第一个：保存项目，第二个：编辑项目。我想当我进来编辑时，一开始“保存项目”被隐藏了，当我点击“编辑项目”时，显示“保存项目”。

所以：

1.  公开申报物品
2.  为它设置值`onCreateOptionsMenu(Menu menu, MenuInflater inflater)`
3.  将可见性设置为`isHidden()`
4.  然后在我想要的每个地方，将可见性设置为`isVisible()`

公共区域：

```
MenuItem saveItem; 
```

onCreateOptions菜单：

```
@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    inflater.inflate(R.menu.menu_detail_products, menu);
    saveItem = (MenuItem) menu.findItem(R.id.action_detail_product_save);
    saveItem.setVisible(isHidden());
} 
```

我想要的地方：

```
saveItem.setVisible(isVisible()); 
```

最后它按我的意愿工作。

# css - 水平 li 项目框外的背景图像

> ID：16114523
> 
> 赞同：2
> 
> 时间：2013-04-19T22:40:47.783
> 
> 标签：css, background-image, horizontallist

我知道背景图像不能超出元素的范围。但是，这是我的情况：

我有一个水平列表，其中每个列表项都应该具有悬停效果，其中一个小箭头位于项目顶部。仅仅定位背景是行不通的，因为列表项与文本一样高。任何位于框外的东西都会被切断。

我读到了一个解决方案，在每个列表项中都有一个额外的元素，它只包含图像。

有没有办法简单地改变列表项的高度，例如使框更高，以便背景图像留在框内？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T22:54:31.407

这是您正在寻找的答案吗？

[http://jsfiddle.net/fmpeyton/G5VVj/1/](http://jsfiddle.net/fmpeyton/G5VVj/1/)

HTML：

```
<ul>
    <li><a href="#">Page1</a></li>
    <li><a href="#">Page2</a></li>
    <li><a href="#">Page3</a></li>
    <li><a href="#">Page4</a></li>
    <li><a href="#">Page5</a></li>
</ul> 
```

CSS：

```
li{height: 50px; width:30px; margin:0 10px; float:left; list-style:none;}
li:hover{background: url('http://www.dreamtemplate.com/dreamcodes/web_icons/gray-bold-up-arrow-icon.png') top center no-repeat;}
a{padding:20px 0; display:block;} 
```

策略是在元素中包含一个元素，并为父元素提供一个`:hover`伪类，该类在悬停时更改背景。

# php - 从csv中的行中提取值并求和

> ID：16114530
> 
> 赞同：1
> 
> 时间：2013-04-19T22:41:59.263
> 
> 标签：php, csv

我在输入中得到一个 csv 文件，这是内容的一个示例：

```
TIME,Value
2010,77.77046
2010,60.32812
2010Q1,63.33447
2010Q2,61.29888
2010Q3,59.06448
2010Q4,57.62415
2011,60.75586
2011Q1,60.97929
2011Q2,61.36082
2011Q3,59.88779
2011Q4,60.79407 
```

那是我用来获取 csv、读取内容并将其放入数组的代码。

```
if (($handle = fopen("csvExtractTor.csv", "r")) !== FALSE) {
 # Set the parent multidimensional array key to 0.
    $nn = 0;
    while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
        # Count the total keys in the row.
        $c = count($data);
        # Populate the multidimensional array.
        for ($x=0;$x<$c;$x++)
        {
            $brim[$nn][$x] = $data[$x];
        }
        $nn++;
    }
    # Close the File.
    fclose($handle);
}; 
```

我需要的是取每个季度的值，例如，2010Q1、2010Q2、2010Q3、2010Q4，将其相加并除以 / 4 为介质，并将操作保存为 2010 年的唯一值，放入 csv 或在一个变量中。我尝试了很多解决方案，但没有一个效果很好。我尝试了 strpos() 方法，每次只能读取一个值，但之后我不能做其他事情。有没有人建议解决我的问题？

亲切的问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T22:58:28.713

```
$brim = array();
$years = array();
while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
    $brim[] = $data;
    if (preg_match('/^(\d{4})Q(\d)/', $data[0], $match)) {
      $years[$match[1]][$match[2]] = $data[1];
    }
}
foreach ($years as &$year) {
  $year['avg'] = $avg = array_sum($year)/count($year);
} 
```

在此之后，`$years[2010]['avg']`将包含 2010 年每个季度的平均值。

```
print_r($years);

Array
(
    [2010] => Array
        (
            [1] => 63.33447
            [2] => 61.29888
            [3] => 59.06448
            [4] => 57.62415
            [avg] => 60.330495
        )

    [2011] => Array
        (
            [1] => 60.97929
            [2] => 61.36082
            [3] => 59.88779
            [4] => 60.79407
            [avg] => 60.7554925
        )

) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T22:57:18.493

这应该做的工作：

```
// $csv = file_get_contents('file.csv');
$csv = 'TIME,Value
2010,77.77046
2010,60.32812
2010Q1,63.33447
2010Q2,61.29888
2010Q3,59.06448
2010Q4,57.62415
2011,60.75586
2011Q1,60.97929
2011Q2,61.36082
2011Q3,59.88779
2011Q4,60.79407';
$array = array();

preg_replace_callback('/((\d{4})Q\d),(\d+(?:\.\d+))/', function($matches) use(&$array){
    if(isset($array[$matches[2]])){
        $array[$matches[2]] += ($matches[3]/4);
    }else{
        $array[$matches[2]] = ($matches[3]/4);
    }
    return($matches[1]);
},$csv);
print_r($array); 
```

输出：

```
Array
(
    [2010] => 60.330495
    [2011] => 60.7554925
) 
```

[在线演示](http://codepad.viper-7.com/Fqu8Nl)。

# php - 在树枝中使用命名空间别名

> ID：16114532
> 
> 赞同：3
> 
> 时间：2013-04-19T22:42:04.773
> 
> 标签：php, symfony, namespaces, twig

我有一个代码可以检查树枝模板中的一些实体常量：

```
{% if logRecord.status is constant('App\\DealBundle\\Entity\\Deal::DEAL_STATE_MONEY_RESERVED') %} 
```

但是每次都用这么长的类名，实在是太尴尬了。有没有办法在 twig 中创建命名空间别名？就像是：

```
{% use App\\DealBundle\\Entity\\Deal %}
{% if logRecord.status is constant('Deal::DEAL_STATE_MONEY_RESERVED') %} 
```

或者我总是需要写完整的班级名称？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-08T08:25:32.060

我遇到了同样的问题，结果证明解决方案非常简单。这个宏在我们的例子中不起作用，因为我们不仅想将常量值用于渲染，还想将其用作值（int、string、float 等）。这是不可能的，因为使用此宏 Twig 将值转换为 Twig_Markup 类。

所以解决方案是下一个。在您声明的模板中的某处：

```
 {% set namespace = 'App\\DealBundle\\Entity\\' %} 
```

然后在另一个地方你可以像这样使用它：

```
 {% if logRecord.status is constant(namespace~'Deal::DEAL_STATE_MONEY_RESERVED') %} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T13:56:08.397

您可以使用[宏](http://twig.sensiolabs.org/doc/tags/macro.html)：

```
{% macro state(name) -%}
   {{ constant('App\\DealBundle\\Entity\\Deal::DEAL_STATE_' ~ name) }}
{%- endmacro %} 
```

并以这种方式使用它：

```
{% if logRecord.status == _self.state('MONEY_RESERVED') %} 
```

不要忘记使用连字符 ( - ) 来删除宏中的空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-24T14:43:55.570

我正在更新此内容，以防有人遇到与我相同的问题并且不想使用任何特殊扩展名。

@alain-tiemblo 的回答是对的，就像树枝不再识别`_self`物体一样。所以唯一要做的就是导入它，如下所示：

```
{% macro state(name) -%}
    {{ constant('App\\DealBundle\\Entity\\Deal::DEAL_STATE_' ~ name) }}
{%- endmacro %}
{# ### Remember the import! ### #}
{% import _self as localMacros %} 
```

之后你可以使用

```
{% if logRecord.status == localMacros.state('MONEY_RESERVED') %} 
```

# ruby-on-rails - 在提出确认之前如何中断销毁方法？

> ID：16114536
> 
> 赞同：1
> 
> 时间：2013-04-19T22:42:33.590
> 
> 标签：ruby-on-rails

在我的视图文件中，我有

> %td= link_to 'Destroy', fund_subfund_path(@fund, subfund), :method => :delete, :data => { :confirm => '你确定吗？' }

我的控制器有

> ```
> def destroy
>   @subfund = Subfund.find(params[:id])
>   fund_id = @subfund.fund_id
>   nickname = @subfund.nickname
>   if @loans.empty?
>     @subfund.destroy
>     respond_to do |format|
>       format.html { redirect_to fund_path(fund_id), notice: 'Subfund ' + nickname + ' was destroyed.' }
>       format.json { head :no_content }
>     end
>   else
>     respond_to do |format|
>       format.html { redirect_to fund_path(fund_id), 
>         notice: 'Subfund ' + nickname + " has Loans, so can't be destroyed." }
>       format.json { head :no_content }
>     end
>   end
> end 
> ```

重定向和消息工作正常。我的问题是，即使 @loans 不为空且未执行 @subfund.destroy 操作，“您确定吗？” 确认仍然出现。

如何在确认消息*之前拦截此方法？*

我确实尝试过 link_to_if 作为替代方案，但仍然将“Destroy”显示为非活动链接，我认为这会让用户感到困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T23:36:07.520

Baylor Rae's 是一个很好的答案，特别是它会实时检查是否有任何贷款。

您也可以考虑一个更简单的替代方案：当您呈现删除链接到所在的页面时，您可以根据是否有贷款放置或不放置删除按钮。

我也不会说 HAML，但我很确定在声明中包含您的 %td= link_to 很简单`if ... else ... end`。

如果不应该呈现按钮，您可以编写文本来解释用户无法删除该对象的原因。这样用户就很容易了解情况，而不必单击删除链接来发现您无法执行该操作。

干杯，

# python - Python logger 在多线程环境中多次打印相同的输出

> ID：16114538
> 
> 赞同：6
> 
> 时间：2013-04-19T22:43:05.157
> 
> 标签：python, multithreading, logging, io

在我的代码中，记录器以某种方式打印了两次事件，但常规`print`显示了正确的事件数量。

```
select 1,2
select 1,2
2013-04-19 18:37:30,618:4561354752 - SQLLogger - DEBUG - select 1,2
2013-04-19 18:37:30,618:4561354752 - SQLLogger - DEBUG - select 1,2
2013-04-19 18:37:30,618:4565561344 - SQLLogger - DEBUG - select 1,2
2013-04-19 18:37:30,618:4565561344 - SQLLogger - DEBUG - select 1,2 
```

我不清楚为什么在多线程情况下多次发布相同的消息。

```
import logging
from threading import Thread

class SQLEngine(object):
    def __init__(self, DB_PATH):
        ch = logging.StreamHandler()
        ch.setLevel(logging.DEBUG)
        formatter = logging.Formatter('%(asctime)s:%(thread)d - %(name)s - %(levelname)s - %(message)s')
        ch.setFormatter(formatter)
        self.logger = logging.getLogger('SQLLogger')
        self.logger.setLevel(logging.DEBUG)
        self.logger.addHandler(ch)

    def execute(self,SQL,):
            self.logger.debug(SQL)
            print SQL

class DBWorker(Thread):
    def __init__(self, name):
        Thread.__init__(self)
        self.name = name

    def run(self):
        db = SQLEngine('')
        db.execute('select 1,2')

if __name__ == '__main__':
    DBWorker('thread 1').start()
    DBWorker('thread 2').start() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T23:06:57.930

查看[记录器](http://docs.python.org/2/library/logging.html)文档：

> 记录器永远不会直接实例化，而是始终通过模块级函数 logging.getLogger(name)。多次调用具有相同名称的 getLogger() 将始终返回对同一 Logger 对象的引用。

现在您的构造函数正在调用以下代码：

```
ch = logging.StreamHandler()
self.logger = logging.getLogger('SQLLogger')
self.logger.addHandler(ch) 
```

请注意，您不会为每个`SQLEngine`对象都创建一个新的记录器，而是始终获得对同一个记录器实例的引用。这意味着您总是将处理程序添加到同一个记录器，因此在创建第二个对象后，您的记录器有两个处理程序，每个处理程序都打印到屏幕上。

您我们将只需要注册一个处理程序（例如在构造函数之外）或为每个实例`SQLEngine`调用不同`getLogger`的名称。`__init__``SQLEngine`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T23:09:34.920

您已经启动了两个线程，每个线程都有自己的 SQLEngine 属性对象，这些对象在各自的线程运行时被执行。如果您想在多个线程之间共享记录器，那么创建一个可以传递的单个记录器对象将是一个更好的选择。GIL 将负责其余的工作。

```
import logging
from threading import Thread

class SQLEngine(object):
    def __init__(self, DB_PATH):
        ch = logging.StreamHandler()
        ch.setLevel(logging.DEBUG)
        formatter = logging.Formatter('%(asctime)s:%(thread)d - %(name)s - %(levelname)s - %(message)s')
        ch.setFormatter(formatter)
        self.logger = logging.getLogger('SQLLogger')
        self.logger.setLevel(logging.DEBUG)
        self.logger.addHandler(ch) 

    def execute(self,SQL,): 
        self.logger.debug(SQL)
        print (SQL)

class DBWorker(Thread):
    def __init__(self, name, logengine):
        Thread.__init__(self)
        self.name = name
        self.logger = logengine

    def run(self):
        #db = SQLEngine('')
        self.logger.execute('select 1,2')

if __name__ == '__main__':
    logger = SQLEngine('')
    DBWorker('thread 1', logger).start()
    DBWorker('thread 2', logger).start() 
```

这只是一个例子。正如@tomasz 提到的，您可以根据您的要求处理此记录器对象

# ruby-on-rails - Heroku 部署的 Bootstrap 和 Rails 问题

> ID：16114539
> 
> 赞同：4
> 
> 时间：2013-04-19T22:43:12.547
> 
> 标签：ruby-on-rails, ruby, heroku, twitter-bootstrap-rails

我正在制作一个 Ruby on Rails 应用程序。我已经包含了 twitter-bootstrap rails gem。在本地测试了应用程序后，我多次尝试部署到 Heroku。我第一次遇到这个 500 错误：

```
ActionView::Template::Error (images/apple-touch-icon-144x144-precomposed.png isn't precompiled) 
```

我通过将此行添加到 config/environment/production.rb 文件中解决了这个初始问题。

```
config.assets.compile = true 
```

现在，我正在尝试再次将我的 rails 应用程序推送到 Heroku，但是当我推送到 Heroku 时，我再次收到此 500 错误。我不知道如何解决这个问题：

```
ActionView::Template::Error (undefined local variable or method `bootstrap_flash' for#<#
77:         </div><!--/span-->
 79:           <%= bootstrap_flash %>
 78:         <div class="span9">
 80:           <%= yield %>
 app/views/layouts/application.html.erb:79:in `_app_views_layouts_application_html_erb___2619453860724409461_34912060'
 81:       </div>
 82:       </div> 
```

任何帮助将不胜感激！

这是我的 Gemfile：

```
source 'https://rubygems.org'

gem 'rails', '3.2.13'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'pg'
gem 'devise'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
gem 'sass-rails',   '~> 3.2.3'
gem 'coffee-rails', '~> 3.2.1'

# See https://github.com/sstephenson/execjs#readme for more supported runtimes
# gem 'therubyracer', :platforms => :ruby

gem 'uglifier', '>= 1.0.3'
gem "therubyracer"
gem "less-rails"
gem 'twitter-bootstrap-rails', :git => 'http://github.com/seyhunak/twitter-bootstrap-rails.git'
end

gem 'jquery-rails' 
```

我已经尝试过`rake assets:precompile`然后上传到 Heroku，但仍然没有运气。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T22:50:12.153

您似乎遇到[了这个先前报告的问题](https://github.com/seyhunak/twitter-bootstrap-rails/issues/338)。尝试添加以下宝石：

```
gem 'bootstrap_helper' 
```

您还可以添加此[File](https://github.com/seyhunak/twitter-bootstrap-rails/blob/master/app/helpers/bootstrap_flash_helper.rb)，作为您的助手之一。对于该线程上的大多数人来说，这就是固定的。

# actionscript-3 - 将脚本放在影片剪辑上时跳转功能出错

> ID：16114546
> 
> 赞同：0
> 
> 时间：2013-04-19T22:44:05.687
> 
> 标签：actionscript-3, movieclip

我的平台游戏引擎跳转功能有问题。我已将所有命中测试转移到关卡中的各个平台上，因此我不必为每个单独的平台编写内容。这样做的问题是，只有第一个添加到舞台的影片剪辑可以跳转到。如果 up 被按住，其他人只会让玩家沉入地板（因为他们应该 - 因为他不应该在那里，所以没有什么可以阻止他）。所以问题是跳转的检查没有在第二个块上正确注册。这是代码（对过多的 MovieClip(parent) 感到抱歉）

```
var playerRef:MovieClip = MovieClip(parent).player;

stage.addEventListener(Event.ENTER_FRAME, hitUpdate);
function hitUpdate(e:Event):void {
    if (playerRef.hitTestPoint(playerRef.x,this.y - (playerRef.height/2)) && playerRef.x + playerRef.width > this.x && playerRef.x < this.x + this.width && !MovieClip(parent).upDown) {
        MovieClip(parent).downMomentum = 0;
        playerRef.y = this.y - playerRef.height;
    }

    if (playerRef.hitTestPoint(playerRef.x,this.y + this.height) && playerRef.x + playerRef.width > this.x && playerRef.x < this.x + this.width) {
        MovieClip(parent).downMomentum = 0;
        playerRef.y = this.y + this.height + MovieClip(parent).gravity;
    }

    if (playerRef.hitTestPoint(this.x,playerRef.y) && playerRef.y + playerRef.height > this.y && playerRef.y < this.y + this.height) {
        MovieClip(parent).speed = 0;
        playerRef.x = this.x - playerRef.width;
    }

    if (playerRef.hitTestPoint(this.x + this.width,playerRef.y) && playerRef.y + playerRef.height > this.y && playerRef.y < this.y + this.height) {
        MovieClip(parent).speed = 0;
        playerRef.x = this.x + this.width;
    }

    if (playerRef.hitTestObject(this)) {
        MovieClip(parent).groundTouch = true;
    } else {
        MovieClip(parent).groundTouch = false;
    }
} 
```

跳转功能是这样运行的：

```
stage.addEventListener(Event.ENTER_FRAME, updates);
function updates(e:Event):void{

    player.y += downMomentum;

    if(!groundTouch && downMomentum < downMomCap){
        downMomentum += gravity;
    }
    if(downMomentum > downMomCap){
        downMomentum = downMomCap;
    }

    if(upDown && !jumping && groundTouch){
        jumping = true;
        jumpTimer.reset();
        jumpTimer.start();
    }
}

jumpTimer.addEventListener(TimerEvent.TIMER, jumpTick);
function jumpTick(e:TimerEvent):void{
    if(downMomentum*-1 < downMomCap){
        downMomentum  -= jumpProg * jumpIncrement;
    }else{
        downMomentum = downMomCap * -1;
    }
    jumpProg -= 1;
}

jumpTimer.addEventListener(TimerEvent.TIMER_COMPLETE, jumpDone);
function jumpDone(e:TimerEvent):void{
    jumpTimer.stop();
    jumping = false;
    jumpProg = 5;
} 
```

我只是找不到解决方案，尽管我怀疑这与它如何检查玩家接触平台有关。

# haskell - 从 Haskell 的元组列表中返回唯一的元组

> ID：16114547
> 
> 赞同：1
> 
> 时间：2013-04-19T22:44:13.453
> 
> 标签：haskell

我有一个表格的元组列表`[(A,B),(B,A),(D,C),(E,F),(C,D),(F,E)]`。我如何返回一个公正的列表`[(A,B),(C,D),(E,F)]`？我发现的唯一解决方案是删除重复的元组，我能想到的唯一解决方案是天真的 O(n^2) 解决方案。有没有办法有效地做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T23:42:29.450

如果您的对组件的类型在 class`Ord`中，您可以在 O(n log n) 时间内完成：

```
import Data.List (sort, group)

sortPair        :: Ord a => (a, a) -> (a, a)
sortPair (x, y)
  | x <= y      =  (x, y)
  | otherwise   =  (y, x)

uniques :: Ord a => [(a, a)] -> [(a, a)]
uniques =  map head . group . sort . map sortPair 
```

所以，如果我们定义

```
data T = A | B | C | D | E | F deriving (Eq, Ord, Show) 
```

以您为例，我们有：

```
> uniques [(A,B),(B,A),(D,C),(E,F),(C,D),(F,E)]
[(A,B),(C,D),(E,F)] 
```

# autofac - 根据自定义条件解决依赖关系

> ID：16114554
> 
> 赞同：3
> 
> 时间：2013-04-19T22:45:27.057
> 
> 标签：autofac

我的应用程序依赖于多个事件总线对象，它们是基本的发布/订阅通知模型（[http://caliburn.codeplex.com/wikipage?title=The%20Event%20Aggregator](http://caliburn.codeplex.com/wikipage?title=The%20Event%20Aggregator)）。

我想要做的是与一组组件共享某些聚合器实例。假设组件我有一个在组件 A、B 和 C 之间共享的事件总线，然后是在 D、E、F 之间共享的另一个事件总线。

我本质上想将事件总线声明为单例并根据某些标准注入它们。我有点想避免仅仅为了区分分辨率而对事件总线进行子类型化。

我在 java 中使用了 Google Guice IoC，它允许对参数进行元数据解析。在 java 中，它允许我做与此等价的东西。

例子：

```
public A([SpecialUseAggregator]IEventAggregator something)
public B([SpecialUseAggregator]IEventAggregator something)

public E([AnotherUseAggregator]IEventAggregator something)
public F([AnotherUseAggregator]IEventAggregator something) 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T04:53:45.567

Autofac 没有/使用注册属性。一种解决方案是使用[命名/键控](https://code.google.com/p/autofac/wiki/TypedNamedAndKeyedServices)注册功能。

因此，您需要`EventAggreator`使用不同的名称/键为您注册两个，并且在注册您的消费者类型 A、B 等时，您可以使用`WithParameter`来告诉 Autofac`IEventAggreator`它应该用于给定实例：

```
var contianerBuilder = new ContainerBuilder();
contianerBuilder.Register(c => CreateAndConfigureSpecialEventAggregator())
                        .Named<IEventAggreator>("SpecialUseAggregator");
contianerBuilder.Register(c => CreateAndConfigureAnotherUseAggregator())
                        .Named<IEventAggreator>("AnotherUseAggregator");

contianerBuilder.RegisterType<A>).AsSelf()
                 .WithParameter(ResolvedParameter
                 .ForNamed<IEventAggreator>("SpecialUseAggregator"));
contianerBuilder.RegisterType<B>().AsSelf()
                 .WithParameter(ResolvedParameter
                 .ForNamed<IEventAggreator>("SpecialUseAggregator"));
contianerBuilder.RegisterType<C>).AsSelf()
                 .WithParameter(ResolvedParameter
                 .ForNamed<IEventAggreator>("AnotherUseAggregator"));
contianerBuilder.RegisterType<D>().AsSelf()
                 .WithParameter(ResolvedParameter
                 .ForNamed<IEventAggreator>("AnotherUseAggregator"));
var container = contianerBuilder.Build(); 
```

如果您仍然想使用属性，那么您可以使用 Autofac 来实现，因为它具有所有必需的扩展点，它只需要更多代码来教 Autofac 您的属性并正确使用它。

如果您使用扫描注册您的类型，则无法使用轻松使用`WithParameter`注册，但您使用Autofac中的[元数据工具：](https://code.google.com/p/autofac/wiki/Metadata)

只需创建一个属性来保存您的 EventAggreator 键：

```
public class EventAggrAttribute : Attribute
{
    public string Key { get; set; }

    public EventAggrAttribute(string key)
    {
        Key = key;
    }
} 
```

并将您的课程归因于：

```
[EventAggrAttribute("SpecialUseAggregator")]
public class AViewModel
{
    public AViewModel(IEventAggreator eventAggreator)
    {
    }
} 
```

然后，当您进行扫描时，您需要使用`WithMetadataFrom`来注册元数据：

```
contianerBuilder.RegisterAssemblyTypes(Assembly.GetExecutingAssembly())
            .Where(t => t.Name.EndsWith("ViewModel"))
            .OnPreparing(Method)
            .WithMetadataFrom<EventAggrAttribute>(); 
```

最后，您需要进行`OnPreparing`基于元数据的解析的事件：

```
private void Method(PreparingEventArgs obj)
{
    // Metadata["Key"] is coming from the EventAggrAttribute.Key
    var key = obj.Component.Metadata["Key"].ToString();
    ResolvedParameter resolvedParameter = 
        ResolvedParameter.ForNamed<IEventAggreator>();
    obj.Parameters = new List<Parameter>() { resolvedParameter};
} 
```

这是[工作单元测试的要点。](https://gist.github.com/nemesv/0ad4f1b3363102b6ad9f)

# jquery - 有人能告诉我这个jsfiddle有什么问题吗

> ID：16114559
> 
> 赞同：0
> 
> 时间：2013-04-19T22:46:05.573
> 
> 标签：jquery

我制作了这个 jsfiddle，但我不知道代码有什么问题：

[http://jsfiddle.net/GYtNX/2/](http://jsfiddle.net/GYtNX/2/)

它没有按我的意愿工作，最终结果是在正文之前给我这个文本“});//]]>”......

```
<h2>Shakespeare's Plays</h2>
<table>
<tr >
<td>As You Like It</td>
<td>Comedy</td>
<td></td>
</tr>
<tr>
<td>All's Well that Ends Well</td>
<td>Comedy</td>
<td>1601</td>

    </tr>
<tr>
<td>Hamlet</td>
<td>Tragedy</td>
<td>1604</td>
</tr>
<tr>
<td>Macbeth</td>
<td>Tragedy</td>
<td>1606</td>
</tr>
<tr>
<td>Romeo and Juliet</td>
<td>Tragedy</td>
<td>1595</td>
</tr>
<tr>
<td>Henry IV, Part I</td>
<td>History</td>
<td>1596</td>
</tr>
<tr>
<td>Henry V</td>
<td>History</td>
<td>1599</td>
</tr>
</table> 
```

然后我有这个脚本：

```
<script type="text/javascript">
$(document).ready(function () {
    $('td:contains(Henry)').parent().find('td:eq(1)')
    .addClass('highlight').end().find('td:eq(2)')
    .addClass('highlight')
}); 
```

这个CSS：

```
 tr {
background-color: #fff;
}
.alt {
background-color: #ccc;
}

.highlight {
background-color: #FCC; 
```

我昨天开始使用jquery...如果问题很愚蠢，请原谅我...所有代码都在jsfidle链接上...我只是放在这里是因为stackovverflow要求...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T22:47:05.753

您的 JSFiddle 脚本部分不应包含`<script>`标签。它们会自动为您添加：http: [//jsfiddle.net/GYtNX/3/](http://jsfiddle.net/GYtNX/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T22:48:03.020

由于 JS Fiddle 需要纯 JavaScript 代码。你不需要指定`script`标签，所以`<script type="text/javascript"></script>`从你的小提琴中删除。

[JS小提琴](http://jsfiddle.net/GYtNX/6/)

# php - 如何使用 PHP 使字符串中的每个单词成为变量

> ID：16114562
> 
> 赞同：0
> 
> 时间：2013-04-19T22:46:34.977
> 
> 标签：php, arrays, string, variables

如果字符串包含 3 个单词，如何使每个单词成为单独的变量？我搜索和搜索，但我现在找到了有关如何执行此操作的教程。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T22:48:41.553

PHP`explode`应该是您正在寻找的。

[http://php.net/manual/en/function.explode.php](http://php.net/manual/en/function.explode.php)

```
$pizza  = "piece1 piece2 piece3 piece4 piece5 piece6";
$pieces = explode(" ", $pizza); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T22:48:35.583

查找[`explode()`](http://php.net/manual/en/function.explode.php)功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T22:49:00.007

假设单词用空格分隔：

```
$words = explode(' ', $string); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T23:00:15.777

如果`list()`您希望每个单词都有自己的变量，请使用：

`list($var1, $var2, $var3) = explode(' ', $string);`

`extract()`如果变量的数量未知，您可以使用。例子：

`extract(explode(' ', $string), EXTR_PREFIX_ALL, "var");`

如果`$string`有四个词，它们最终会出现在`$var_0`, `$var_1`, `$var_2`, `$var_3`. 不过，我真的想不出一个很好的理由来编写这样的代码。

# windows - 在 CGI 环境之外的 Perl 中运行 Windows 命令

> ID：16114564
> 
> 赞同：0
> 
> 时间：2013-04-19T22:46:39.077
> 
> 标签：windows, perl, cgi

我有一个特定的专有应用程序，它是双重用途的，在 CGI 上下文中运行“account.exe”（例如，从 Web 服务器内部）将使 account.exe 输出 HTML 页面等。在 CGI 上下文之外运行“account.exe”会导致 account.exe 启用某些命令行功能。

现在问题来了：我想在 perl 的 CGI 上下文之外运行 account.exe。已尝试使用 system(1, "command"); 已尝试使用 system("start command")，尝试使用 BAT 包装器清除 (SET VARIABLE=) 每个与 CGI 相关的环境变量，但 account.exe 仍然“检测到”它由 Web 服务器运行并输出它的 HTML。

如何在 perl 的 CGI 脚本中运行 windows 命令（使用草莓 perl）并让“account.exe”应用程序无法检测到执行最初来自 Web 服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T23:35:15.197

account.exe 可以通过多种方式检测它的运行方式。

环境变量是一种方式；看来你已经排除了那个。

通常进程可以看到谁是他们的父母和他们的父母，所以这可能是其他方式。

因此，要么您可以进行大量测试，直到最终欺骗进程使用的特定技术，或者您可能想尝试*沙盒*以更好地控制进程可以看到（或做）什么。

# ibm-mobilefirst - Worklight 5.0.6 消除了 shell 中的本机自定义

> ID：16114565
> 
> 赞同：0
> 
> 时间：2013-04-19T22:46:54.277
> 
> 标签：ibm-mobilefirst

我将环境升级到 v5.0.6。问题是每次我启动 Eclipse 它都会这样做：

> [2013-04-19 18:38:41] FWLST1017I: [AppShell] 升级到最新平台版本。

进行此升级时，它会还原我的模板并将类文件添加到 iphone\native 文件夹并删除我在 shell 中配置的插件：

1.  从 components/AppShell/iphone/native/Classes 中删除我所有的自定义插件
2.  将 project.pbxproj.wltemplate.wluser 重置为我的课程的库存删除包含
3.  重置 config.xml.wluser 删除所有到我的插件的映射

它还始终在升级过程结束时显示：

> 无法将 Worklight 项目“AppMobile”升级到最新平台版本。[无效的]

这就是它继续运行升级并恢复我的更改的原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-30T10:42:37.460

根据您的问题，您有一些 .wluser 文件，这意味着您的项目有问题。

您能否让我知道问题是否仍然存在以及您的项目中是否还有这些文件？

# c# - 如何以编程方式在 Outlook 搜索文件夹上设置自定义图标？（即 Outlook 文件夹 SetCustomIcon）

> ID：16114566
> 
> 赞同：3
> 
> 时间：2013-04-19T22:46:57.673
> 
> 标签：c#, outlook, vsto, outlook-addin, outlook-2010

我正在尝试使用该`Folder.SetCustomIcon()`方法将自定义图标放在我以编程方式创建的已保存搜索文件夹上。文档非常稀少，`SetCustomIcon()`但可以在[此处找到以供参考](http://msdn.microsoft.com/en-us/library/office/microsoft.office.interop.outlook.mapifolder.setcustomicon%28v=office.14%29.aspx)。

此外，[它期望的对象在这里](http://msdn.microsoft.com/en-us/library/aa267231%28v=vs.60%29.aspx)，而且示例非常稀疏。

有人知道如何为文件夹设置自定义图标吗？以下是我到目前为止的代码：

```
searchFolders = inboxFolder.Store.GetSearchFolders();
foreach (Outlook.Folder folder in searchFolders)
{
    if (folder.Name == "Expiring Retention Policy Mail")
    {
        folder.ShowItemCount = Microsoft.Office.Interop.Outlook.OlShowItemCount.olShowTotalItemCount;
        folder.SetCustomIcon(new Bitmap(32, 32));   // <=-- this isn't working because it's expecting stdPicture which has very sparse information on how to convert to this type.
        Globals.ThisAddIn.Application.ActiveExplorer().CurrentFolder = folder;  
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T13:13:11.173

您只需要使用 a`PictureDispConverter`从图像/图标转到`IPictureDisp`. 下面是一个[来自 MSDN 的示例](http://msdn.microsoft.com/en-us/library/office/ff869281.aspx)。这仅适用于**Outlook 2010+**。**要在Outlook 2013**中查看自定义文件夹图标，您需要[查看**文件夹列表**- 而不是**邮件视图**](http://social.technet.microsoft.com/Forums/en-US/officeitpro/thread/04bea0f1-2ba4-4e24-826b-5cad18b6ec61/)。

### 来自 MAPIFolder 的 SetCustomIcon

```
private static void SetCustomIcon(Outlook.MAPIFolder folder)
{
    Icon icon = null;
    try
    {
        icon = Properties.Resources.myCustomIcon_16x16;
        stdole.StdPicture iconPictureDisp = PictureDispConverter.ToIPictureDisp(icon) as stdole.StdPicture;
        folder.SetCustomIcon(iconPictureDisp);
    }
    finally
    {
        icon.Dispose();
    }
} 
```

### PictureDispConverter ( *Icon->IPictureDisp, Image->IPictureDisp* )

```
public static class PictureDispConverter
{
    //IPictureDisp GUID. 
    public static Guid iPictureDispGuid = typeof(stdole.IPictureDisp).GUID;

    // Converts an Icon into an IPictureDisp. 
    public static stdole.IPictureDisp ToIPictureDisp(Icon icon)
    {
        PICTDESC.Icon pictIcon = new PICTDESC.Icon(icon);
        return PictureDispConverter.OleCreatePictureIndirect(pictIcon, ref iPictureDispGuid, true);
    }

    // Converts an image into an IPictureDisp. 
    public static stdole.IPictureDisp ToIPictureDisp(Image image)
    {
        Bitmap bitmap = (image is Bitmap) ? (Bitmap)image : new Bitmap(image);
        PICTDESC.Bitmap pictBit = new PICTDESC.Bitmap(bitmap);
        return PictureDispConverter.OleCreatePictureIndirect(pictBit, ref iPictureDispGuid, true);
    }

    [DllImport("OleAut32.dll", EntryPoint = "OleCreatePictureIndirect", ExactSpelling = true,
    PreserveSig = false)]
    private static extern stdole.IPictureDisp OleCreatePictureIndirect(
    [MarshalAs(UnmanagedType.AsAny)] object picdesc, ref Guid iid, bool fOwn);

    private readonly static HandleCollector handleCollector =
    new HandleCollector("Icon handles", 1000);

    // WINFORMS COMMENT: 
    // PICTDESC is a union in native, so we'll just 
    // define different ones for the different types 
    // the "unused" fields are there to make it the right 
    // size, since the struct in native is as big as the biggest 
    // union. 
    private static class PICTDESC
    {
        //Picture Types 
        public const short PICTYPE_UNINITIALIZED = -1;
        public const short PICTYPE_NONE = 0;
        public const short PICTYPE_BITMAP = 1;
        public const short PICTYPE_METAFILE = 2;
        public const short PICTYPE_ICON = 3;
        public const short PICTYPE_ENHMETAFILE = 4;

        [StructLayout(LayoutKind.Sequential)]
        public class Icon
        {
            internal int cbSizeOfStruct = Marshal.SizeOf(typeof(PICTDESC.Icon));
            internal int picType = PICTDESC.PICTYPE_ICON;
            internal IntPtr hicon = IntPtr.Zero;
            internal int unused1 = 0;
            internal int unused2 = 0;

            internal Icon(System.Drawing.Icon icon)
            {
                this.hicon = icon.ToBitmap().GetHicon();
            }
        }

        [StructLayout(LayoutKind.Sequential)]
        public class Bitmap
        {
            internal int cbSizeOfStruct = Marshal.SizeOf(typeof(PICTDESC.Bitmap));
            internal int picType = PICTDESC.PICTYPE_BITMAP;
            internal IntPtr hbitmap = IntPtr.Zero;
            internal IntPtr hpal = IntPtr.Zero;
            internal int unused = 0;
            internal Bitmap(System.Drawing.Bitmap bitmap)
            {
                this.hbitmap = bitmap.GetHbitmap();
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-12T14:42:08.797

如果你想在 VBA 中实现，这里是简单的版本

```
Sub Change_mapiRootFolder_Icon()
Dim mapiRootFolder As Outlook.MAPIFolder, mapiCurrFolder As Outlook.MAPIFolder 
Dim stFullFolderPath As String, stCurrItemType As String, stIconPath As String, stCurrFolder As String
Dim i As Integer
Dim ipdMyPic As IPictureDisp

Set mapiCurrFolder = Application.ActiveExplorer.CurrentFolder
stCurrItemType = Application.ActiveExplorer.CurrentFolder.DefaultMessageClass

If stCurrItemType = "IPM.Note" Then  'mail Item types    https://msdn.microsoft.com/en-us/library/office/ff861573.aspx
    Set mapiRootFolder = mapiCurrFolder
    stFullFolderPath = mapiRootFolder.Name
    Do Until mapiRootFolder.Parent = "Mapi"
      Set mapiRootFolder = mapiRootFolder.Parent
      stFullFolderPath = mapiRootFolder.Name & "\" & stFullFolderPath
    Loop
    Debug.Print stFullFolderPath

    stIconPath = "U:\OUTLOOK\Icons\Sent\iconarchive_sent1.ico"
    stIconPath = "C:\Temp\iconarchive_sent1.bmp"
    Set ipdMyPic = LoadPicture(stIconPath)
    If Not (mapiCurrFolder Is Nothing) Then
        mapiCurrFolder.SetCustomIcon ipdMyPic
    End If

End If

End Sub 
```

# java - 在写入该值之前检查变量是否具有特定值是一种明智的优化吗？

> ID：16114572
> 
> 赞同：28
> 
> 时间：2013-04-19T22:47:50.740
> 
> 标签：java, c++, performance, caching, optimization

```
if (var != X)
  var = X; 
```

这是明智的还是不明智的？编译器会始终优化 if 语句吗？是否有任何用例可以从 if 语句中受益？

如果`var`是 volatile 变量怎么办？

我对 C++ 和 Java 的答案都感兴趣，因为 volatile 变量在两种语言中都有不同的语义。Java 的 JIT 编译也可以产生影响。

if 语句引入了分支和额外的读取，如果我们总是用 X 覆盖 var，就不会发生这种情况，所以它很糟糕。另一方面，如果`var == X`使用这种优化，我们只执行读取而不执行写入，这可能会对缓存产生一些影响。显然，这里有一些取舍。我想知道它在实践中的样子。有没有人对此做过任何测试？

编辑：

我最感兴趣的是它在多处理器环境中的样子。在微不足道的情况下，首先检查变量似乎没有多大意义。但是，当必须在处理器/内核之间保持缓存一致性时，额外的检查实际上可能是有益的。我只是想知道它会产生多大的影响？处理器也不应该自己做这样的优化吗？如果`var == X`再次为其分配值`X`，则不应“弄脏”缓存。但是我们可以依靠这个吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-20T08:07:11.137

是的，在某些情况下这是明智的，正如您所建议的，易失性变量就是其中一种情况——即使对于单线程访问也是如此！

从硬件和编译器/JIT 的角度来看，易失性写入都是昂贵的。在硬件级别，这些写入可能比普通写入贵 10 到 100 倍，因为必须刷新写入缓冲区（在 x86 上，详细信息将因平台而异）。在编译器/JIT 级别，易失性写入会抑制许多常见的优化。

然而，推测只能让你走这么远——证据总是在基准测试中。这是一个尝试您的两种策略的微基准。基本思想是将值从一个数组复制到另一个数组（几乎是 System.arraycopy），有两种变体——一种是无条件复制，另一种是先检查值是否不同。

以下是简单的非易失性案例的复制例程（[此处](https://gist.github.com/anonymous/5425245)为完整源代码）：

```
 // no check
        for (int i=0; i < ARRAY_LENGTH; i++) {
            target[i] = source[i];
        }

        // check, then set if unequal
        for (int i=0; i < ARRAY_LENGTH; i++) {
            int x = source[i];
            if (target[i] != x) {
                target[i] = x;
            }
        } 
```

使用上面的代码复制长度为 1000 的数组，使用[Caliper](http://code.google.com/p/caliper/)作为我的 microbenchmark 工具的结果是：

```
 benchmark arrayType    ns linear runtime
  CopyNoCheck      SAME   470 =
  CopyNoCheck DIFFERENT   460 =
    CopyCheck      SAME  1378 ===
    CopyCheck DIFFERENT  1856 ==== 
```

这还包括每次运行大约 150ns 的开销来重置目标阵列。跳过检查要快得多——每个元素大约 0.47 ns（或者在我们移除设置开销后每个元素大约 0.32 ns，所以在我的盒子上几乎正好是 1 个周期）。

当数组相同时，检查速度大约慢 3 倍，当它们不同时，检查速度慢 4 倍。我很惊讶这张支票有多糟糕，因为它是完全可以预测的。我怀疑罪魁祸首主要是 JIT——循环体复杂得多，展开的次数可能更少，其他优化可能不适用。

让我们切换到 volatile 案例。在这里，我使用`AtomicIntegerArray`了 volatile 元素数组，因为 Java 没有任何带有 volatile 元素的本机数组类型。在内部，此类只是使用 直接写入数组`sun.misc.Unsafe`，这允许易失性写入。生成的程序集与普通数组访问基本相似，除了易失性方面（以及可能的范围检查消除，这在 AIA 情况下可能无效）。

这是代码：

```
 // no check
        for (int i=0; i < ARRAY_LENGTH; i++) {
            target.set(i, source[i]);
        }

        // check, then set if unequal
        for (int i=0; i < ARRAY_LENGTH; i++) {
            int x = source[i];
            if (target.get(i) != x) {
                target.set(i, x);
            }
        } 
```

结果如下：

```
arrayType     benchmark    us linear runtime
     SAME   CopyCheckAI  2.85 =======
     SAME CopyNoCheckAI 10.21 ===========================
DIFFERENT   CopyCheckAI 11.33 ==============================
DIFFERENT CopyNoCheckAI 11.19 ============================= 
```

桌子已经转了。首先检查比通常的方法快约 3.5 倍。总体而言，一切都慢得多——在检查情况下，我们每个循环支付约 3 ns，在最坏的情况下约 10 ns（上面的时间在我们身上，并覆盖了整个 1000 个元素数组的副本）。易失性写入确实更昂贵。DIFFERENT 案例中包含大约 1 ns 的开销来在每次迭代时重置数组（这就是为什么即使是简单的 DIFFERENT 也会稍微慢一些）。我怀疑“检查”案例中的很多开销实际上是边界检查。

这都是单线程的。如果您实际上在 volatile 上存在跨核争用，那么简单方法的结果会更糟，并且与上面的检查用例一样好（缓存行只会处于共享状态 - 不需要一致性流量）。

我也只测试了“每个元素都相等”与“每个元素不同”的极端情况。这意味着“检查”算法中的分支总是可以完美预测。如果你有相等和不同的混合，你不会只得到相同和不同情况下时间的加权组合 - 由于预测错误（无论是在硬件级别，也可能是在 JIT 级别），你会做得更糟，它不能再优化总是采用的分支）。

所以它是否明智，即使对于 volatile，也取决于具体的上下文——相等和不相等值的混合，周围的代码等等。在单线程场景中，我通常不会单独为 volatile 执行此操作，除非我怀疑大量集合是多余的。然而，在大量多线程结构中，读取然后执行易失性写入（或其他昂贵的操作，如 CAS）是最佳实践，您会看到它的质量代码，例如`java.util.concurrent`结构。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-19T22:55:39.710

> 在写入该值之前检查变量是否具有特定值是一种明智的优化吗？
> 
> 是否有任何用例可以从 if 语句中受益？

当分配比不等式比较返回的成本要高得多时`false`。

一个例子是 large* `std::set`，它可能需要许多堆分配来复制。

**对于“大”的一些定义*

> 编译器会始终优化 if 语句吗？

这是一个相当安全的“不”，就像大多数包含“优化”和“总是”的问题一样。

C++ 标准很少提及优化，但从不要求优化。

> 如果 var 是 volatile 变量怎么办？

然后它*可能会*执行`if`，尽管[`volatile`没有达到大多数人的假设。](https://stackoverflow.com/questions/12878344/volatile-in-c11)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-19T22:51:46.913

一般来说，答案是否定的。因为如果您有简单的数据类型，编译器将能够执行任何必要的优化。并且对于重度 operator= 的类型， operator= 负责选择分配新值的最佳方式。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-20T01:08:44.383

在某些情况下，即使是对指针大小的变量进行简单的赋值也可能比读取和分支更昂贵（尤其是在可预测的情况下）。

为什么？多线程。如果多个线程只读取相同的值，它们都可以在其缓存中共享该值。但是，一旦您写入它，您就必须使缓存行无效并在下次要读取它时获取新值，或者您必须获取更新的值以保持缓存一致。这两种情况都会导致内核之间的流量增加，并增加读取的延迟。

如果分支非常不可预测，但它可能仍然更慢。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-04-19T23:07:27.933

在 C++ 中，分配一个 SIMPLE 变量（即，一个普通的整数或浮点变量）肯定并且总是比检查它是否已经具有该值然后在它没有该值时设置它更快。如果这在 Java 中也不是真的，我会感到非常惊讶，但我不知道 Java 中的事情有多复杂或简单——我已经写了几百行，实际上并没有研究字节码和 JITed 字节码是如何实现的作品。

显然，如果变量很容易检查，但设置起来很复杂，比如类和其他类似的东西，那么可能会有一个值。您会发现这种情况的典型情况是在某些“值”是某种索引或哈希的代码中，但如果它不匹配，则需要大量工作。一个示例是在任务切换中：

```
if (current_process != new_process_to_run)
     current_process == new_process_to_run; 
```

因为在这里，“进程”是一个复杂的对象来改变，但`!=`可以在进程的ID上完成。

无论对象是简单还是复杂，编译器几乎肯定不会理解您在这里尝试做什么，因此它可能不会优化它 - 但编译器有时比您想象的更聪明，有时更愚蠢，所以我不会打赌。

`volatile`应该始终强制编译器读取和写入变量的值，无论它“认为”是否有必要，所以它肯定会读取变量并写入变量。当然，如果变量是`volatile`它可能意味着它可以改变或代表某些硬件，所以你也应该格外小心自己如何对待它......额外读取 PCI-X 卡可能会导致几个总线周期（总线周期比处理器速度慢一个数量级！），这可能对性能的影响更大。但是然后写入硬件寄存器可能（例如）导致硬件做一些意想不到的事情，并且首先检查我们是否拥有该值可能会使其更快，因为“某些操作重新开始”或类似的东西。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-19T23:42:33.203

在 Objective-C 中，您可能会遇到将对象地址分配给指针变量可能需要“保留”对象（增加引用计数）的情况。在这种情况下，查看分配的值是否与指针变量中当前的值相同是有意义的，以避免执行相对昂贵的递增/递减操作。

其他使用引用计数的语言可能也有类似的情况。

但是，当将 an`int`或 a分配`boolean`给一个简单的变量（在别处提到的多处理器缓存场景之外）时，测试很少值得。大多数处理器中的存储速度至少与加载/测试/分支一样快。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-19T22:58:52.333

如果您涉及读写锁定语义，那将是明智的，只要读取通常比写入更具破坏性。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-19T23:03:05.110

In java the answer is always no. All assignments you can do in Java are primitive. In C++, the answer is still pretty much always no - if copying is so much more expensive than an equality check, the class in question should do that equality check itself.

# matlab - 在 Matlab 中绘制一个颜色代表一个值的矩形

> ID：16114573
> 
> 赞同：2
> 
> 时间：2013-04-19T22:47:53.083
> 
> 标签：matlab

我想绘制一些矩形，它们都有一个关联的值。我可以使用值绘制点，`scatter(x,y,[],value);`但该`rectangle`函数似乎没有这样的功能。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T23:41:41.210

您可以设置矩形颜色，尽管与使用`scatter`. 使用时`rectangle`，有两种颜色可供选择；边缘颜色和面颜色。要设置边缘颜色，请使用表示 RGB 值的 3 元素向量，以使每个元素都在 [0, 1] 范围内。例如

```
%make some arbitrary rectangle (in this case, located at (0,0) with [width, height] of [10, 20])
rect_H = rectangle('Position', [0, 0, 10, 20]); 
%sets the edge to be green
set(rect_H, 'EdgeColor', [0, 1, 0]) 
```

矩形的面颜色是它的填充颜色——您可以通过使用颜色字符串（例如，'g' 是绿色，'r' 是红色等）或以相同方式使用三元素向量来设置它作为边缘颜色属性。

例如，这 2 个命令将具有相同的效果：

```
set(rect_H, 'FaceColor', 'r'); 
set(rect_H, 'FaceColor', [1, 0, 0]); 
```

在您的情况下，您只需要将您的值（无论它可能是什么形式）映射到一个 3 元素 RGB 颜色向量。我不确定你的着色目标是什么，但如果你正在寻找它让所有矩形颜色都不同，你可以使用一些映射函数，如下所示：

```
color_map = @(value) ([mod((rand*value), 1), mod((rand*value), 1), mod((rand*value), 1)]) 
```

然后有

```
set(rect_H, 'FaceColor', color_map(value)); 
```

其中`value`假定为标量。此外，如果您希望在一条线上完成所有类似的操作，`scatter`您也可以这样做：

```
rectangle('Position', [x, y, w, h], 'FaceColor', color_map(value)); 
```

更新：要`colorbar`与`colormap`. 然后调用`colorbar`。我不知道您使用的是哪种颜色映射，所以只是为了说明：

```
figure;
hold on;

%have 20 rectangles
num_rects = 20;

%place your rectangles in random locations, within a [10 x 10] area, with
%each rectange being of size [1 x 1]
random_rectangles = [rand(num_rects, 2)*10, ones(num_rects,2)];

%assign a random color mapping to each of the 20 rectangles
rect_colors = rand(num_rects,3);

%plot each rectangle
for i=1:num_rects
    rectangle('Position', random_rectangles(i,:), 'FaceColor', rect_colors(i,:));
end

%set the colormap for your rectangle colors
colormap(rect_colors);
%adds the colorbar to your plot
colorbar 
```

希望这就是你要问的...

# json - 在没有任何文件参数的情况下在 Sublime Text 乳胶构建中运行 shell 脚本/bash 命令

> ID：16114576
> 
> 赞同：1
> 
> 时间：2013-04-19T22:48:29.007
> 
> 标签：json, bash, build, latex, sublimetext2

我有一个用于运行乳胶的崇高文本构建系统。我正在使用 shell 脚本（不带参数）来删除乳胶生成的各种扩展。问题是 sublime-text 认为 filename.tex 是脚本的参数。

所以我尝试了以下脚本：

```
 {

// General settings
"target": "make_pdf",
"selector": "text.tex.latex",

"cmd": ["latexmk", "-e","\\$dvipdf = 'dvipdfmx %O -o %D %S'", "-e", "\\$latex = 'latex %O -interaction=nonstopmode -synctex=1 %S'","-f", "-pdfdvi"],

"variants":
[

    { "cmd":["my_script.sh"],
      "name": "clean"
    }
  ]
} 
```

这里我用 ls 代替脚本来说明。当我运行构建文件时，它会尝试运行

```
my_script.sh filename.tex 
```

而不仅仅是 my_script.sh。我该怎么做才能从构建文件中运行它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T16:01:41.213

I have been there and done that . . . there and back again . . . and visited again and again . . .

The solution is to use a custom plugin (not necessarily relying upon a `.sublime-build`, but that is possible too) so that you can refer to the *.tex file that is open. I have some solutions you are probably unaware of, one of which is my own, and one where I modify the popular plugin LaTexTools.

latexmk cleans with a big -C (everything) or a little -c (some things that are pre-defined, and additional things that can be user-defined) -- so there is no need to use a separate custom cleaner script.

[https://github.com/lawlist/LaTexTools-Unofficial-Modification](https://github.com/lawlist/LaTexTools-Unofficial-Modification)

[https://github.com/lawlist/ST2-plugin-latexmk-save-build-clean](https://github.com/lawlist/ST2-plugin-latexmk-save-build-clean)

FYI: I recommend putting latex (or something like that) in your subject line of the question -- I almost missed your question . . . and just happened to see the short summary and realized I knew something about this issue.

* * *

SAMPLE -- for MultiTaskBuild plugin located here: [https://github.com/bizoo/MultiTaskBuild](https://github.com/bizoo/MultiTaskBuild)

```
{
    "cmd": {

        "latexmk -pvc . . .": {
            "cmd": ["latexmk", "-r", "/Users/HOME/.latexmkrc", "$file"]
        },

        "latexmk -pv . . .": {
            "cmd": ["latexmk",
        "-e", "\\$pdflatex = 'pdflatex -enable-write18 %O -interaction=nonstopmode -synctex=1 %S'",
         "-recorder-", "-pvc-", "-f", "-pdf", "-pv", "$file"]
        },

        "latexmk -c": {
            "cmd": ["latexmk", "-c", "$file"]           
        },

        "latexmk -C": {
            "cmd": ["latexmk", "-C", "$file"]
        }
    },
"path": "$PATH:/usr/texbin:/usr/local/bin",
    "file_regex": "^(...*?):([0-9]+): ([0-9]*)([^\\.]+)",
    "selector": "text.tex.latex",
    "default_task": "latexmk -pv . . .",
    "target": "multi_task_exec"
} 
```

# php - 通过 Intranet 的 Web 服务

> ID：16114585
> 
> 赞同：0
> 
> 时间：2013-04-19T22:49:22.620
> 
> 标签：php, html, web-services, wamp

我有一个简单的带有 WAMP 的内部网，我自己设置（没什么花哨的，只是共享本地计算机用来共享数据、搜索修改数据库和上传内容的几个页面）

其中一项功能是人们添加内容的日志，它在主页上显示为新信息。有了这个我想做一个网络服务，但我想知道：

*   我可以制作一个显示来自 Intranet 的最后一个日志条目但会在线的 Web 服务吗？例如，如果我下班并使用手机激活 Web 服务，它会显示最后插入的内部网日志。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T22:54:52.453

如果您想从 Internet 访问 Web 服务，您有以下两个选项：

*   使用 VPN 连接到您的工作网络。*您可以像在工作中一样*访问 Web 服务
**   建立从您的工作路由器到托管服务的 Web 服务器的 NAT 转发。然后您访问该服务，例如`http://OUTER_IP_OR_DYNDNS_AT_WORK:SERVICE_PORT`*

 *我建议使用 VPN，因为它是此类事情的*行业标准*并且更安全。*

# excel - 在单个 Excel 工作表中显示多个钻取表

> ID：16114592
> 
> 赞同：0
> 
> 时间：2013-04-19T22:51:01.640
> 
> 标签：excel, report, powerpivot, drillthrough

我需要创建一个包含两个部分的报告（用于打印）。顶部包含记分卡，底部包含记分卡中任何“红色”项目的钻取信息。

记分卡当前是具有条件格式的 PowerPivot 表。如果记分卡有 3 个“红色”单元格，那么我可以双击每个红色单元格来钻取详细信息。但是，我想在记分卡下方的同一个工作表中显示这 3 个钻取表，因此我可以同时打印记分卡和钻取详细信息。

我正在寻找一种自动化的解决方案。每次打印报告时，我都可以进行大量复制和粘贴，但我宁愿不这样做。我正在寻找一种尽可能自动化的解决方案 - 因此报告的底部将始终包含记分卡中任何红色内容的详细信息。我愿意使用 VBA。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T23:16:12.047

我建议使用VBA。但是，首先将工作表列表存储在您的一张工作表中以供您的 VBA 代码使用。在您的工作簿代码部分中创建以下子例程，以便在选择新工作表时触发：

```
Private Sub Workbook_SheetChange(ByVal Sh As Object, ByVal Target As Range) 
```

现在将代码添加到此子例程，以通过检查列表来验证所选工作表是否已存在于您的工作簿中。

如果它还没有在列表中，请检查工作表上是否有表格。

如果工作表上有一个表格，则将其内容复制/移动到您的报告工作表到特定范围，然后再次删除钻取工作表（并将其从列表中删除）。让代码再次选择您的报告表！如果工作表上没有表格，请将其添加到工作表列表

# c++ - pthread_cond_timedwait 返回错误 138

> ID：16114600
> 
> 赞同：2
> 
> 时间：2013-04-19T22:52:04.163
> 
> 标签：c++, pthreads-win32

我在谷歌上找不到这方面的任何信息，所以我在这里发帖希望有人能提供帮助......

我的问题是 Windows pthread 函数`pthread_cond_timedwait()`。当指定的时间过去时，函数应该返回值 ETIMEDOUT。相反，在我的代码中，它的条件变量没有发出信号，它返回值 138 并且比预期的超时时间早得多，有时是立即执行。

所以我的问题是：这个错误 138 是什么？为什么超时没有完全过去？我用于线程的代码是：

```
int retcode = 0;
timeb tb;
ftime(&tb);
struct timespec timeout;
timeout.tv_sec = tb.time + 8;
timeout.tv_nsec = tb.millitm * 1000 * 1000;

pthread_mutex_lock(&mutex_);
retcode = pthread_cond_timedwait(&cond_, &mutex_, &timeout);
pthread_mutex_unlock(&mutex_);
if (retcode == ETIMEDOUT)
  {
  addLog("Timed-out. Sending request...", LOG_DEBUG);
  }
else // Something happened
  {
  std::stringstream ss;
  ss << "Thread interrupted (Error " << retcode << ")";
  addLog(ss.str().c_str(), LOG_DEBUG);
  } 
```

我的绝对超时计算有问题吗？

只有这个线程和调用线程存在。调用者在创建后立即加入创建者，并正确等待它完成。目前，条件变量`cond_`从未发出信号，但如果我尝试这样做，则`pthread_cond_timedwait()`返回值 0 如预期的那样。即使此处未显示，两者`cond_`和`mutex_`都已正确初始化（如果我不这样做，我会收到 EINVAL 错误）。

同样遵循 pthread 代码，我找不到此错误。我只能找到一些`return errno`可以产生它的东西，但我不知道138的含义。

如果有帮助，我正在使用带有 pthreads win32 v2.9.1 的 Visual Studio 2003。

谢谢，

RG

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-28T12:43:21.060

也许这个答案会对某人有所帮助。

我遇到了同样的问题。pthread_cond_timedwait 返回错误 138 我翻遍了 pthread_win32 的所有源代码，但没有找到与错误代码 138 类似的任何内容。我下载了 pthread 的源代码，用 Visual Studio 2008 构建了它，并且......一切都很好！:(

这种行为的原因是预编译的 dll 是用 MSVC100 构建的，但我用 MSVC90 构建了我的应用程序。MSVC100 中的 ETIMEDOUT 为 138，但在 MSVC90 中为 10060。

就这样！这是Windows，兄弟！

# opengl - 某些 OpenGL 函数调用在开发 PS3 游戏时不可用

> ID：16114601
> 
> 赞同：1
> 
> 时间：2013-04-19T22:52:12.227
> 
> 标签：opengl, game-engine, ps3

我目前正在桑德兰大学学习游戏机编程模块。他们在这个模块中教的是 OpenGL 和 Phyre Engine 来开发 PS3 游戏。

PS3 SDK 套件不是免费提供的（价格相当昂贵）这一事实让我在出现问题时很难解决。

显然，PS3 框架不支持大多数 gl 函数调用，如 glGenList、glBegin、glEnd 等。

```
glBegin(GL_QUADS);
    glTexCoord2f(TEXTURE_SIZE, m_fTextureOffset);
    glVertex3f(-100, 0, -100);

    //some more
glEnd(); 
```

在 glBegin、glEnd 和 glTexCoord2f 使用 PS3 调试模式进行调试时出现错误。

有没有办法绕过它？也许是一种不同的绘制对象的方式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T01:04:52.113

大多数为 PS3 开发的游戏根本不使用 OpenGL，而是“在金属上”编程，即直接使用 GPU，无需中间的抽象 API。是的，PS3 有一个类似 OpenGL 的 API，但这实际上是基于 OpenGL-ES。

在 OpenGL-ES 中没有*立即模式*。即时模式是一种将几何体传递给 OpenGL 的繁琐方法，方法是启动一个图元，`glBegin`然后链接调用顶点属性状态设置，最后通过提交顶点的位置`glVertex`并以 结束`glEnd`。*没有人*愿意使用它！尤其是在资源有限的系统上。

无论如何，您在内存中都有可用的几何数据。那么为什么不简单地让 OpenGL 使用已经存在的东西呢？好吧，这正是要做的事情：*Vertex Arrays*。你给 OpenGL 指针指向哪里可以找到数据（`glVertexAttribPointer`在现代 OpenGL 中是通用的，或者在旧的固定函数中预定义的、固定的属性`glVertexPointer`、`glTexCoordPointer`、`glNormalPointer`、 ），然后让它使用or`glColorPointer`绘制一大堆数据。`glDrawElements``glDrawArrays`

在现代 OpenGL 中，绘图过程由用户可编程着色器控制。在*固定函数*OpenGL 中，您所能做的就是参数化膨胀数量的状态变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T23:13:30.040

PlayStation 3 使用的 OpenGL 是 OpenGL ES 1.0 的一个变体（根据维基百科的 ES 2.0 的*一些*特性）。

[http://www.khronos.org/opengles/1_X](http://www.khronos.org/opengles/1_X)

有规范。那里似乎没有 glBegin/glEnd 函数。那些（如固定的管道函数）已被弃用（并且在 OpenGL 4.0 和 OpenGL ES 2.0 中被删除），无论如何都支持 VBO 之类的东西，所以学习如何使用这些可能没有多大意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T11:51:56.993

如果您使用 PhyreEngine，通常应避免直接调用图形 API，因为 PhyreEngine 位于不同平台上的不同 API 之上。

在 PC 上它使用 GL（或 D3D），但在 PS3 上它使用较低级别的 API。因此，即使您使用了 GL-ES 功能，并且即使它可以编译，它也可能无法运行。因此，在为 PS3 构建时看到错误也就不足为奇了。

理想情况下，您应该使用 PhyreEngine 的绘图管道，它与平台无关。如果您坚持使用该 API，原则上您可以为任何受支持的平台编译代码。

我可以公开评论 PhyreEngine 的数量是有限制的（抱歉），但如果你在上大学课程，你的大学应该可以访问官方支持论坛，在那里你可以获得更具体的帮助。

如果您确实必须直接针对底层图形 API，请注意您可能需要针对每个平台编写/修改代码，并且您需要在 PhyreEngine 可能依赖的任何上下文状态下“玩得很好”。

# php - 如何使用 php 重命名 XML 值？

> ID：16114603
> 
> 赞同：0
> 
> 时间：2013-04-19T22:52:29.637
> 
> 标签：php, xml, dom, xpath

如何使用 PHP 重命名 xml 中的值？这是我到目前为止所得到的：

```
<?php
$q = $_GET["q"];
$q = stripslashes($q);

$q = explode('|^', $q);

$old = $q[0];

$dom                     = new DOMDocument;
$dom->preserveWhiteSpace = false;
$dom->formatOutput       = true;

$dom->Load("test.xml");

$xpath   = new DOMXPath($dom);    
$query1  = 'channel/item[title="' . $old . '"]/title';
$entries = $xpath->query($query1);

foreach ($entries as $entry) 
{        
    $oldchapter = $entry->parentNode->removeChild($entry);

    $item       = $dom->getElementsByTagName('item');

    foreach ($item as $items) 
    {
        $title = $dom->createElement('title', $q[1]);            
        $items->appendChild($title);            
    }
}    

$dom->save("test.xml"); 
```

基本上，它所做的是从一个 url 中获取两个标题，旧的现有标题，以及用户想要将其更改为的一个（就像这样`oldtitle|^newtitle`），并将它们放入一个数组中。

我尝试做的是删除现有的旧标题，然后使用 url 中的新标题值制作一个新标题，但它似乎不起作用。我哪里错了，或者有更简单的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T00:03:35.363

做到这一点的方法是使用[`DOMNode::replaceChild()`](http://php.net/domnode.replacechild). 你的大部分代码是正确的，你只是稍微过度复杂了一些 DOM 的东西。

尝试这个：

```
<?php

    $q = $_GET["q"];
    $q = stripslashes($q);

    $q = explode('|^', $q);

    $old = $q[0];

    $dom                     = new DOMDocument;

    // Do this *before* loading the document
    $dom->preserveWhiteSpace = false;
    $dom->formatOutput       = true;

    $dom->Load("test.xml");
    $xpath = new DOMXPath($dom);

    $query1  = 'channel/item[title="' . $old . '"]/title';
    $entries = $xpath->query($query1);

    // This is all you need to do in the loop
    foreach ($entries as $oldTitle) {
        $newTitle = $dom->createElement('title', $q[1]);
        $entry->parentNode->replaceChild($newTitle, $oldTitle);
    }

    $dom->save("test.xml"); 
```

# javascript - Angularjs使用电子邮件类型重置表单字段

> ID：16114612
> 
> 赞同：5
> 
> 时间：2013-04-19T22:53:29.530
> 
> 标签：javascript, angularjs

在 AngularJs 中，似乎当您尝试通过将所有模型设置为空对象来“重置”表单时，如果输入是`type="email"`this 则不会被清除。但是，将其更改为`type="text"`有效，但随后您会失去验证的红色边框。

无论如何要重置或清除电子邮件类型输入？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T22:03:15.787

仅作记录，请参阅 OP 评论以获取解释，并查看此[plunker](http://plnkr.co/edit/WhzQw3yitmOx9WM6YuFh?p=preview)进行演示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-27T12:22:31.460

就我而言，当使用绑定到带有`ng-disabled`指令的范围的验证表单按钮时，我必须使用双重重置逻辑：

```
<form>
    <input type="email" ng-model="formdata.email" />
    <button class="btn btn-warning cancel" type="reset" ng-click="formdata = {}">Clear</button>
    <button type="submit" ng-disabled="form.$invalid" />
</form> 
```

*   `type="reset"`：即使当前正在填充无效的电子邮件，也为了清除该字段（没有此属性，无效的电子邮件不会被 删除`ng-click`）

*   `ng-click="formdata = {}"`: 重新初始化所有作用域绑定。没有它，重置表单时，ng-disabled 不会更新，重置后验证按钮仍将启用......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-18T15:09:04.267

原因是在电子邮件字段有效之前，模型尚未绑定。因此，当您这样做时`myModel = {}`，文本字段会保留其无效的电子邮件。但是，如果您这样做`myModel.Email = ''`将清除文本字段

# python - 在 Python 中查找素筛不一致

> ID：16114614
> 
> 赞同：1
> 
> 时间：2013-04-19T22:53:33.263
> 
> 标签：python, primes, sieve

我正在尝试学习 python，我认为尝试开发自己的初筛将是下午的一个有趣问题。到目前为止，当需要时，我只需导入我在网上找到的埃拉托色尼筛网的一个版本——我用它作为我的基准。

在尝试了几种不同的优化之后，我认为我已经写了一个相当不错的筛子：

```
def sieve3(n):
top = n+1
sieved = dict.fromkeys(xrange(3,top,2), True)
for si in sieved:
    if si * si > top:
        break
    if sieved[si]:
        for j in xrange((si*2) + si, top, si*2):       [****]
            sieved[j] = False
return [2] + [pr for pr in sieved if sieved[pr]] 
```

使用前 1,000,000 个整数作为我的范围，此代码将生成正确数量的素数，并且仅比我的基准测试慢 3-5 倍。当我在更大的范围内尝试它时，我正要放弃并拍拍自己的背，但它不再起作用了！

```
n = 1,000 -- Benchmark = 168 in 0.00010 seconds
n = 1,000 -- Sieve3 = 168 in 0.00022 seconds

n = 4,194,304 -- Benchmark = 295,947 in 0.288 seconds
n = 4,194,304 -- Sieve3 = 295,947 in 1.443 seconds

n = 4,194,305 -- Benchmark = 295,947 in 3.154 seconds
n = 4,194,305 -- Sieve3 = 2,097,153 in 0.8465 seconds 
```

我认为问题来自与`[****]`，但我无法弄清楚为什么它如此破碎。它应该将“j”的每个奇数倍数标记为 False，并且它在大多数情况下都有效，但是对于 4,194,304 以上的任何东西，筛子都被打破了。（公平地说，它也会随机破坏其他数字，例如 10,000）。

我进行了更改，它显着减慢了我的代码速度，但它实际上适用于所有值。这个版本包括所有数字（不仅仅是赔率），但其他方面是相同的。

```
def sieve2(n):
top = n+1
sieved = dict.fromkeys(xrange(2,top), True)
for si in sieved:
    if si * si > top:
        break
    if sieved[si]:
        for j in xrange((si*2), top, si):
            sieved[j] = False
return [pr for pr in sieved if sieved[pr]] 
```

谁能帮我弄清楚为什么我的原始功能（sieve3）不能始终如一地工作？

编辑：我忘了提，当 Sieve3“中断”时，sieve3(n) 返回 n/2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T00:10:20.160

筛子需要对候选素数的循环进行排序。有问题的代码是枚举字典的键，不能保证是有序的。相反，继续使用`xrange`您用于初始化主筛循环的字典以及返回结果循环，如下所示：

```
def sieve3(n):
    top = n+1
    sieved = dict.fromkeys(xrange(3,top,2), True)
    for si in xrange(3,top,2):
        if si * si > top:
            break
        if sieved[si]:
            for j in xrange(3*si, top, si*2):     
                sieved[j] = False
    return [2] + [pr for pr in xrange(3,top,2) if sieved[pr]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T00:04:16.073

这是因为字典键没有排序。有时，偶然`for si in sieved:`会以递增的顺序循环遍历您的密钥。在您的最后一个示例中， si 获得的第一个值足够大，可以立即中断循环。

您可以简单地使用：for si in sorted(sieved)：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T23:01:01.570

好吧，看看运行时间——你会看到你展示的最后一个案例的运行时间几乎比基准测试快 5 倍，而它通常慢 5 倍。所以这是一个危险信号，也许你没有执行所有的迭代？（而且它的速度快 5 倍，而素数几乎是 10 倍……）

我现在没有时间更多地研究代码，但我希望这会有所帮助。

# youtube - 如何将 youtube 视频嵌入播放列表

> ID：16114615
> 
> 赞同：21
> 
> 时间：2013-04-19T22:53:39.250
> 
> 标签：youtube, youtube-api, youtube-javascript-api

我有很多 youtube 视频剪辑，我想知道是否可以将它们作为 youtube 播放列表嵌入到网站上，以便在剪辑完成后自动开始播放下一个视频。YouTube API 是否有这样的功能。如果不可能，最好的方法是什么。提前致谢。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2015-05-24T01:56:20.603

实际上有两种方法可以从 youtube 嵌入播放列表。在第一种方法中，您可以直接指定要在嵌入播放器中播放的所有视频。

```
<iframe width="720" height="405" src="https://www.youtube.com/embed/VIDEO_ID?playlist=VIDEOID_1,VIDEOID_2"frameborder="0" allowfullscreen> 
```

每个视频 ID 必须使用逗号分隔。

其次，您可以使用播放列表 ID 嵌入 youtube 中已经存在的播放列表

```
<iframe width="720" height="405" src="https://www.youtube.com/embed/?listType=playlist&list=PLAYLIST_ID" frameborder="0" allowfullscreen> 
```

![在此处输入图像描述](https://i.stack.imgur.com/p1sFn.jpg)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-19T22:58:50.677

我找到了解决方案，

```
http://www.youtube.com/v/PRIMARYVIDEO_ID?version=3&loop=1&playlist=VIDEO_ID1,VIDEO_ID2 
```

VIDEO_ID1 和 VIDEO_ID2... 是我想要包含在播放列表中的视频。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-09-21T10:08:08.833

[https://developers.google.com/youtube/youtube_player_demo](https://developers.google.com/youtube/youtube_player_demo)

```
<iframe id="ytplayer" type="text/html" width="100%" height="405"
src="https://www.youtube.com/embed/?listType=playlist&list=PL590L5WQmH8eYTXiTTjzo4YnK7vkCqZTI"
frameborder="0" allowfullscreen>
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-19T23:34:26.503

您可以简单地使用嵌入式播放列表。

这是我的播放列表之一的示例！

```
<iframe width="560" height="315" src="http://www.youtube.com/embed/videoseries?list=PLZtX_kbNpbDjYSUj-huH5pOKxifUNDi1O" frameborder="0" allowfullscreen></iframe> 
```

此外，您可以使用[Javascript Player API](https://developers.google.com/youtube/js_api_reference)创建自定义行为。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-08-04T04:42:56.053

来自 youtube[文档](https://support.google.com/youtube/answer/171780?hl=en)

**嵌入播放列表**

1.  在计算机上登录您的 YouTube 帐户。
2.  在页面左侧，选择要嵌入的播放列表。
3.  从 URL 复制播放列表 ID。
4.  通过执行以下操作修改单个视频的嵌入代码： 在视频 ID 的位置（在“embed/”之后），替换为“videoseries?list=”。然后在“=”之后粘贴播放列表 ID。
5.  将代码粘贴到您的博客或网站 HTML 中。

**例子：**

```
<iframe width="560" height="315" src="https://www.youtube.com/embed/videoseries?list=PLx0sYbCqOb8TBPRdmBHs5Iftvv9TPboYG" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe> 
```

# c++ - 为什么 Boost Graph Library 的 `source()` 是一个全局函数？

> ID：16114616
> 
> 赞同：5
> 
> 时间：2013-04-19T22:53:44.123
> 
> 标签：c++, generics, boost, boost-graph

我知道在通用编程中，算法与容器是分离的。因此，将通用算法实现为实例方法是没有意义的（相同的算法应该适用于多个具体类；我们不想让它们都从一个 ABC 继承，因为它会成倍地增加类的数量）。

但是对于[Boost Graph Library](http://www.boost.org/doc/libs/1_53_0/libs/graph/doc/index.html)[`source()`](http://www.boost.org/doc/libs/1_53_0/libs/graph/doc/graph_concepts.html)中的函数，我不明白为什么它是全局函数而不是图形类的实例方法。

据我通过阅读[BGL 源代码](http://sourceforge.net/projects/boost/files/boost/1.53.0/)可知，`source(e, g)`需要知道传递给它的图和边对象的*实现细节*；*只知道它们的接口*是不够的。

所以`source()`不是通用算法。换句话说，它需要知道图实例的具体类。那为什么不把它和实例方法放在同一个类中呢？与创建一个需要为其调用的每个类定制的全局函数相比，它不会更干净/更少混乱吗？

更新

相关源代码：

```
 // dwa 09/25/00 - needed to be more explicit so reverse_graph would work.
  template <class Directed, class Vertex,
      class OutEdgeListS,
      class VertexListS,
      class DirectedS,
      class VertexProperty,
      class EdgeProperty,
      class GraphProperty, class EdgeListS>
  inline Vertex
  source(const detail::edge_base<Directed,Vertex>& e,
         const adjacency_list<OutEdgeListS, VertexListS, DirectedS,
                 VertexProperty, EdgeProperty, GraphProperty, EdgeListS>&)
  {
    return e.m_source;
  }

namespace boost {

  namespace  detail {

    template <typename Directed, typename Vertex>
    struct edge_base
    {
      inline edge_base() {} 
      inline edge_base(Vertex s, Vertex d)
        : m_source(s), m_target(d) { }
      Vertex m_source;
      Vertex m_target;
    };
  }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-20T16:02:48.840

`source(e, g)`不是通用算法。它是接口的一部分，在 C++ 中通常称为一个概念。成为非成员函数的原因是它可以非侵入式地实现。

比如说，你想`std::multimap`实现这个`IncidenceGraph`概念。如果图形库需要`source()`成为成员函数，那么您将不走运，因为`std::multimap`没有提供。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T23:25:05.377

在 C++ 中，应该尽可能选择非成员非友元函数。如果`source`可以根据设计用于操作的类的公共成员来实现，那么它应该在类之外。

这与制作通用算法无关；这完全是为了减少可以访问/可能破坏类私有成员内部状态的代码量。

# c - 检查 if (char == '\n') 时出现分段错误

> ID：16114617
> 
> 赞同：-1
> 
> 时间：2013-04-19T22:53:48.557
> 
> 标签：c, segmentation-fault, getchar

我已经为此苦苦挣扎了一个多小时，但我似乎无法找出为什么会出现此错误。

```
int  inp, count;
char numBuff[21];

count = 0;
while((inp=getchar()) != EOF) { // get Value (last field)
    printf("input is '%c'\n", inp);
    if (inp == '\n') break;
    if (inp == ' ') {
        continue;
    }
    numBuff[count++] = inp;
    printf("go back through loop\n");
}
printf("Out!");
numBuff[count] = '\0'; 
```

如果我输入 1013 我会得到以下信息

```
input is '1'
go back through loop
input is '0'
go back through loop
input is '1'
go back through loop
input is '3'
go back through loop
input is '
'
Segmentation fault (core dumped) 
```

我可以从中收集到的唯一信息是，当我检查 inp == '\n' 时它失败了，但为什么呢？我通过循环 printf 将 go 返回到检查 if inp == '\n' 之后，它也从未达到那个，所以我知道它在那里发生。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T22:57:02.180

`count`未初始化，用作数组索引。将其初始化为 0。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T23:09:53.130

您*收集*到错误在循环中，但是您怎么知道？您是否尝试过使用调试器 - 一个有用的工具，可以帮助查明发生崩溃的位置并允许您检查程序的状态。

Dollars to donuts 崩溃发生在循环*之后的代码中。*您看不到“Out”消息的原因是您没有打印换行符，因此标​​准库会缓冲输出。

# objective-c - 为什么我的目标 c 代码一直说格式字符串未使用数据参数

> ID：16114621
> 
> 赞同：-1
> 
> 时间：2013-04-19T22:54:34.097
> 
> 标签：objective-c, nsstring

```
-(void) timerRun{
    secondsCount = secondsCount - 1;
    int minuts = secondsCount /60;
    int seconds = secondsCount - (minuts * 60);

    NSString *timerOutput = [NSString stringWithFormat: @"%2d:.2d" , minuts, seconds];
    countdownLabel.text = timerOutput;

    if (secondsCount == 0) {
        [countdownTimer invalidate];
        countdownLabel = nil;
    }
} 
```

Xcode`NSString`在行中告诉我格式字符串未使用数据参数，并且每次我尝试运行计时器时，都会出现：是否`2d:.2d` 有了解 Objective C 的人请查看我的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T22:56:01.917

你少了一个百分号，伙计。

`NSString *timerOutput = [NSString stringWithFormat: @"%2d:.2d" , minuts, seconds];`

`.2d`不是替代规格。

# python - 这个 python 时区转换有什么问题？

> ID：16114631
> 
> 赞同：2
> 
> 时间：2013-04-19T22:55:48.957
> 
> 标签：python, datetime, python-2.7, timezone, dst

我想以这种方式将带有`US/Eastern`时`Budapest/Europe`区的日期时间转换为时区：

```
import pytz
from datetime import datetime

ET = pytz.timezone('US/Eastern')
CET = pytz.timezone('Europe/Budapest')

time = datetime(2013, 04, 18, 0, 0, tzinfo=ET)
newTime = time.astimezone(CET) 
```

这导致 newTime being: `datetime.datetime(2013, 4, 18, 7, 0, tzinfo=<DstTzInfo 'Europe/Budapest' CEST+2:00:00 DST>)`，但它应该`2013,04,18,6,0`根据[time.is](http://time.is/compare/0000_18_Apr_2013_in_ET/Budapest)和[timeanddate.com](http://www.timeanddate.com/worldclock/converted.html?iso=20130418T00&p1=179&p2=50)转换器。我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T23:36:19.943

这是因为夏令时问题。传递到的时间`datetime`在`ET`，不是`EDT`，因此是结果。

看一下`pytz`文档，首选方法是使用`localize`方法，而不是通过`tzinfo`. 如果您修改代码以使用以下行，您将获得预期的结果：

```
time = ET.localize(datetime(2013, 04, 18, 0, 0)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T23:31:29.277

`US/Eastern`是别名。也许 pytz 将其视为固定为 EST 而不是 EDT？我不知道。但是试试看`America/New_York`是否更好。

# javascript - 使用 jQuery 选择上一个输入

> ID：16114632
> 
> 赞同：3
> 
> 时间：2013-04-19T22:55:50.470
> 
> 标签：javascript, jquery

在空输入上按退格键时如何返回上一个输入？

```
 $('input').bind('input', function() {
        if (this.value.length >= $(this).attr('maxlength')) {
            $(this).next().select();
        }

        if (this.value.length == 0) {
            $(this).prev().select();
        }
    }); 
```

**JSFIDDLE：http:** [//jsfiddle.net/EwYKX/](http://jsfiddle.net/EwYKX/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T23:01:32.980

The `input` event will not fire if the element already has empty value because there's no value change.

A `keyup` check for backspace press should suffice. Assuming the input elements are always direct siblings as in your example:

```
$('input').on('input propertychange', function() {
    if (this.value.length >= this.maxLength) {
        $(this).next().focus();
    }
}).keyup(function(e) {
    if (e.which === 8 && !this.value) {
        $(this).prev().focus();
    }
}); 
```

[**Fiddle**](http://jsfiddle.net/EwYKX/4/)

I've added a `propertychange` listener as fallback for old IE, but you can remove it if you don't feel like using this ugly hack to support old IE. Also I've swapped `.select()` by `.focus()` so that it doesn't select the entire field upon focusing, but that is up to you too. `=]`

The `e.which === 8` check is so that it only moves to the previous field by pressing the backspace key, but in case you'd like to move to the previous input even if the user erases the field value through other means (e.g. `delete` key or cut/delete context menu) you can remove the `e.which === 8` too, though that wouldn't make much sense UX-wise imho.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T23:04:54.100

try this

```
 $('input').bind('input, keydown', function (e) {
           if (this.value.length >= $(this).attr('maxlength')) {
              $(this).next().select();
           }

           if (this.value.length == 0 && e.keyCode == 8) {
              $(this).prev().focus();
           }
        }); 
```

# php - jQuery - 单击链接/按钮时显示文本框

> ID：16114633
> 
> 赞同：0
> 
> 时间：2013-04-19T22:56:00.677
> 
> 标签：php, javascript, jquery, textarea

我正在尝试为每条评论添加一个回复按钮，因此当有人单击该按钮（例如“回复”）时，会自动出现一个文本框，用户可以在其中填写表格。

到目前为止我没有做太多...

## PHP

```
<div id='replycomment' class='reply' onclick='jsReply($comment_id);'>Reply</div>
<div id='showreply'></div> 
```

## jQuery

```
function jsReply(comment_id) {
    var form = '<form id="showReplyForm" action"add_reply.php" method="post">';
    form += '<textarea name="replybody" cols="35" rows="2" maxlength="299"</textarea>';
    form += '<input type="hidden" name="replybodyId" value="' + comment_id + '" />'
    form += '<input type="submit" name="replysubmit" value="Reply"/></form>';
    jQuery('#replybody').replaceWith(form); } 
```

任何人都可以帮助我吗？将不胜感激。我对需要将 id 从 jquery 链接到 php 的方式有点困惑......

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T23:05:26.570

To make your code work, do this: [http://jsfiddle.net/MaqLQ/1/](http://jsfiddle.net/MaqLQ/1/)

within head:

```
var jsReply = function(comment_id) {
    var form = '<form id="showReplyForm" action"add_reply.php" method="post">';
    form += '<textarea name="replybody" cols="35" rows="2" maxlength="299"></textarea>';
    form += '<input type="hidden" name="replybodyId" value="' + comment_id + '" />';
    form += '<input type="submit" name="replysubmit" value="Reply"/></form>';
    jQuery('#showreply').replaceWith(form);
} 
```

you were missing a semi-colin at the end of one of your form concatenations. you were looking at 'replyBody' rather than the 'showreply' that exists in your html, and **if** your code wasn't global your html it wouldn't have been defined for the onclick. you were also missing the end angle bracket for your opening textarea tag.

also, i don't know your context and i'm not here for a code review, but among a few other things... you should really avoid using `onclick` within your html elements.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T23:05:22.913

**PHP**

```
<div class='reply'>Reply</div>
<form action='add_reply.php' method='POST' class='reply-form'>
  <textarea name='replybody'></textarea>
  <input type='hidden' name='comment_id' value='<?php echo $comment_id; ?>' />
  <input type='submit' value='Reply' />
</form> 
```

**CSS**

```
.reply-form {
  display: none;
} 
```

**Javascript**

```
$(".reply").click(function() {
  $(this).siblings(".reply-form").show();
  $(this).hide();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T22:58:35.420

我推荐使用 jQuery 库。

`#showreply`通过 CSS隐藏`display: none;`并将 HTML 表单放入其中。

```
$('#replycomment').click(function() {
    $('#showreply').show();
}); 
```

我还建议将您的 ID 更改为类，因为您将拥有多个实例。

# c# - automapper：跳过/忽略嵌套类型

> ID：16114637
> 
> 赞同：0
> 
> 时间：2013-04-19T22:56:28.813
> 
> 标签：c#, .net, automapper

我正在尝试在域对象和视图模型之间创建一个映射，以支持一个感觉很常见的用例。我找不到解决方案的事实使我认为我正在错误地解决问题。这是一些代表我的源和目标类型的伪代码：

```
public class DomainClass
    {
        public NestedDomainClass1 NestedDomainClass1{ get; set; }
    }

    public class NestedDomainClass1
    {
        public NestedDomainClass2 NestedDomainClass2 { get; set; }
    }

    public class NestedDomainClass2
    {
        public string PropertyA { get; set; }
        public string PropertyB { get; set; }
        public string PropertyC { get; set; }
    }

    public class DomainViewModel
    {
        public string PropertyA { get; set; }
        public string PropertyB { get; set; }
        public string PropertyC { get; set; }
    } 
```

如您所见，`DomainViewModel`完美地映射到`DomainClass.NestedDomainClass1.NestedDomainClass2`. 但是，由于不完全相关的原因，我不能简单地在该级别创建映射。相反，我必须映射更高的两个级别：

```
 Mapper.CreateMap<DomainObj, DomainViewModel>(); 
```

不幸的是，在我这样做的那一刻，我不能再依赖 AutoMapper 约定来自动映射类似命名的属性，并且我不得不编写大量高度重复的代码：

```
Mapper.CreateMap<DomainClass, DomainViewModel>().ForMember(dest=>dest.PropertyA, opt=>opt.MapFrom(source=>source.NestedDomainClass1.NestedDomainClass2.PropertyA));
Mapper.CreateMap<DomainClass, DomainViewModel>().ForMember(dest=>dest.PropertyB, opt=>opt.MapFrom(source=>source.NestedDomainClass1.NestedDomainClass2.PropertyB)); 
```

我玩过`RecognizeDestinationPrefixes`and`RecognizeDestinationPostfixes`方法，希望让 AutoMapper 直接“跳过”到我想从 ( `NestedDomainClass2`) 映射的属性，但没有运气。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T10:13:03.917

那是因为您正在尝试两种完全不同的类型之间的映射。你真的需要做这样的事情：

```
Mapper.CreateMap<NestedDomainClass2, DomainViewModel>();
Mapper.AssertConfigurationIsValid();

var dvm = Mapper.Map<NestedDomainClass2, DomainViewModel>
                         (obj.NestedDomainClass1.NestedDomainClass2); 
```

但是，如果您愿意，您可以通过定义一个`TypeConverter`. 像这样的东西应该工作：

```
public class DomainTypeConverter : TypeConverter<DomainClass, DomainViewModel>
{
    protected override DomainViewModel ConvertCore(DomainClass source)
    {
        return Mapper.Map<NestedDomainClass2, DomainViewModel>
                             (source.NestedDomainClass1.NestedDomainClass2);
    }
} 
```

然后，您可以将映射定义为如下所示：

```
Mapper.CreateMap<NestedDomainClass2, DomainViewModel>();
Mapper.CreateMap<DomainClass, DomainViewModel>()
    .ConvertUsing(new DomainTypeConverter());
Mapper.AssertConfigurationIsValid(); 
```

并像这样使用它：

```
var dvm = Mapper.Map<DomainClass, DomainViewModel>(dc); 
```

# wcf - 使用自定义 ServiceHost 会禁用简化配置吗？

> ID：16114642
> 
> 赞同：1
> 
> 时间：2013-04-19T22:57:23.330
> 
> 标签：wcf

我有一些一次性初始化任务要在服务启动时完成，为了做到这一点，我定义了一个自定义的 ServiceHostFactory 和 ServiceHost 来覆盖 InitializeRuntime。

Service1.svc 标记：

```
<%@ ServiceHost Language="C#" Debug="true" Factory="service.Our_Service_Host_Factory" Service="service.Service1" CodeBehind="Service1.svc.cs" %> 
```

服务主机定义：

```
public class Our_Service_Host_Factory : ServiceHostFactory
{
    protected override ServiceHost CreateServiceHost(Type serviceType, Uri[] baseAddresses)
    {
        return new Our_Service_Host(serviceType, baseAddresses);
    }
}

class Our_Service_Host : ServiceHost
{
    public Our_Service_Host(Type serviceType, Uri[] baseAddresses)
        : base(serviceType, baseAddresses) { }

    protected override void InitializeRuntime()
    {
         // one time setup code
    }
} 
```

来自 web.config 的片段：

```
<system.serviceModel>
  <behaviors>
    <serviceBehaviors>
      <behavior>
        <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true"/>
        <serviceDebug includeExceptionDetailInFaults="false"/>
      </behavior>
    </serviceBehaviors>
  </behaviors>
  <protocolMapping>
    <add binding="basicHttpsBinding" scheme="https" />
  </protocolMapping>    
  <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
</system.serviceModel> 
```

如果我删除 ServiceHost 标记上的 Factory 属性，WCF 测试客户端可以成功连接到我的服务。如果我把它放回去，它找不到元数据端点并出现以下错误：

```
Error: Cannot obtain Metadata from http://localhost:50154/Service1.svc If this is a Windows (R)
Communication Foundation service to which you have access, please check that you have enabled 
metadata publishing at the specified address.  For help enabling metadata publishing, please 
refer to the MSDN documentation at http://go.microsoft.com/fwlink/?LinkId=65455.WS-Metadata 
Exchange Error    URI: http://localhost:50154/Service1.svc    Metadata contains a reference that 
cannot be resolved: 'http://localhost:50154/Service1.svc'.    There was no endpoint listening at 
http://localhost:50154/Service1.svc that could accept the message. This is often caused by an 
incorrect address or SOAP action. See InnerException, if present, for more details.    The 
remote server returned an error: (404) Not Found.HTTP GET Error    URI: 
http://localhost:50154/Service1.svc    There was an error 
downloading 'http://localhost:50154/Service1.svc'.    The request failed with HTTP status 404: 
Not Found. 
```

看起来有一个自定义的 ServiceHost/ServiceHostFactory 可能会破坏简化的配置。是这种情况，还是有什么我忽略的东西会使它继续起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T00:17:59.720

如果您覆盖 InitializeRuntime()，请确保调用 base.InitializeRuntime()，否则您可能会看到此行为。在调用我的附加启动逻辑之前调用 base.InitializeRuntime() 之后，我的服务现在被正确路由到。

# linux - 在 bash 中订购一个循环

> ID：16114643
> 
> 赞同：0
> 
> 时间：2013-04-19T22:57:23.807
> 
> 标签：linux, bash, for-loop

我有一个这样的 bash 脚本：

```
for d in /home/test/*
    do
    echo $d
done 
```

输出如下：

```
/home/test/newer dir
/home/test/oldest dir 
```

我想按创建时间对文件夹进行排序，以便“最旧的目录”目录首先出现在列表中。我试过 ls 和 tree 变体无济于事。

例如，

```
for d in `ls -d -c -1 $PWD/*` 
```

回报：

```
/home/test/oldest
dir
/home/test/newer
dir 
```

非常接近，但它不尊重目录名称中的空格。我的问题，我如何将最旧的目录放在顶部并支持空格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T23:03:35.127

```
ls -d -c $PWD/* | while read line
  do echo "$line"
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T16:23:15.340

另一种技术，一种 Schwartzian 变换：

```
stat -c $'%Z\t%n' /home/test/* | sort -n | cut -f2- |
while IFS= read -r filename; do
    # ... 
```

对于包含换行符的文件名，此解决方案很脆弱。

# c# - 如何删除以varbinary格式存储在数据库中的图像

> ID：16114645
> 
> 赞同：1
> 
> 时间：2013-04-19T22:57:34.233
> 
> 标签：c#, winforms

我有一个`PictureBox`带有图像和删除按钮的按钮。图像以某种`varbinary(MAX)`格式存储在数据库中。按下删除按钮时如何删除它？

我正在使用此代码将图像保存到数据库中：

```
byte[] data;

using (System.IO.MemoryStream stream = new System.IO.MemoryStream())
{
    conn.Open();

    Image img = pictureBox1.Image;
    img.Save(stream, System.Drawing.Imaging.ImageFormat.Jpeg);
    data = stream.ToArray();

    cmd.CommandText = "insert into images values(@images)";

    cmd.Parameters.AddWithValue("@images", data);

    int res = cmd.ExecuteNonQuery();
    MessageBox.Show("success");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T00:32:28.230

我不明白为什么以下不起作用。

`cmd.CommandText = "delete from images where ID = x";`

像这样发送普通 SQL 已经过时了，并且在不正确地使用 UI 实现时可能会非常危险，您应该强烈考虑使用 LINQ

[http://en.wikipedia.org/wiki/Language_Integrated_Query](http://en.wikipedia.org/wiki/Language_Integrated_Query)

# ajax - 基于 request_method 允许 AJAX 请求在 nginx 代理后面服务

> ID：16114648
> 
> 赞同：0
> 
> 时间：2013-04-19T22:57:50.460
> 
> 标签：ajax, nginx, angularjs, cors

我是 Nginx 的新手，如果我很迟钝，请原谅我。我有一个位于 nginx 代理后面的服务，我正在使用 auth_basic 来防止任何人目前能够访问它。我想允许 Angular 应用程序访问此服务，但我想控制允许谁执行特定请求方法（GET、POST、DEL、OPTIONS），并且使用 auth_basic 似乎不是最好的选择，因为我不'不想将登录名/密码硬编码到 JS 中（duh）。我能弄清楚如何做到这一点的唯一方法是说：

```
if ($request_method = OPTIONS)
{ 
        proxy_pass_header Access-Control-Allow-Origin *;
        proxy_pass_header Access-Control-Allow_Methods GET, OPTIONS;
        etc...
} 
```

此时，我将允许来自任何人的 GET 和 OPTIONS 请求，但我想将 POST、DEL 限制为仅来自某些位置（例如内部或来自受信任的 IP）。但是，目前，如果我将 proxy_pass_header 放入该块中，则表示该指令是不允许的。我已经看到人们在这样的 if 块中使用 add_header 的其他示例，所以我很困惑为什么这不起作用。

所以首先，这是不是最好的做事方式，如果不是，有人有其他建议吗？如果这是处理事情的最佳方式，我在这里做错了什么？

任何帮助，将不胜感激。我发现 nginx 文档非常混乱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T19:27:15.907

您可以使用`deny/allow`来自`ngx_http_access_module`.

```
location / {
    deny  192.168.1.1;
    allow 192.168.1.0/24;
    allow 10.1.1.0/16;
    allow 2001:0db8::/32;
    deny  all;
} 
```

[http://nginx.org/en/docs/http/ngx_http_access_module.html](http://nginx.org/en/docs/http/ngx_http_access_module.html)

# c++ - 没有显示空的无边框窗口？

> ID：16114649
> 
> 赞同：0
> 
> 时间：2013-04-19T22:57:58.313
> 
> 标签：c++, winapi

我正在尝试使用以下代码显示一个空的无边框窗口，但根本没有出现任何窗口。我遵循了文档：

```
HWND hWnd = CreateWindowEx(WS_EX_TOPMOST,NULL,NULL,WS_POPUP,0,0,1000,1000,NULL,NULL,NULL,NULL);
ShowWindow(hWnd, SW_SHOW); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T23:13:42.550

```
HWND hWnd = CreateWindowEx(WS_EX_TOPMOST, L"STATIC", NULL, WS_POPUPWINDOW, 0, 0, 100, 100, NULL, NULL, NULL, NULL);
ShowWindow(hWnd, SW_SHOW); 
```

# ios - 使用 xamarin 在应用程序购买中苦苦测试 IOS

> ID：16114650
> 
> 赞同：4
> 
> 时间：2013-04-19T22:58:01.953
> 
> 标签：ios, xamarin.ios, in-app-purchase, xamarin

在过去的几天里，我一直在努力尝试设置环境以在 xamarin 中测试应用程序购买。他们的[文档](http://docs.xamarin.com/guides/ios/application_fundamentals/in-app_purchasing/part_1_-_in-app_purchase_basics_and_configuration)页面不太清楚需要做什么，至少对我来说是这样。

对于我所研究的内容，我需要与苹果签订合同，这需要我向苹果提供一些关于我的银行账户、税收等的信息。这些信息需要一点时间，也许一周。那么在没有合约的情况下，我可以在应用购买的沙盒模式下进行测试吗？

到目前为止，我已经创建了一个开发配置文件、我的应用程序 ID 和捆绑包 ID、我将在我的应用程序中销售的产品以及我的测试用户。我尝试从我的设备获取产品信息，但它不起作用、没有错误或应用程序崩溃。可能我在这里遗漏了一些导致这种行为的东西。

[我在此页面](http://developer.apple.com/library/ios/#technotes/tn2259/_index.html)中读到我需要安装我的配置文件并配置 xcode 以使用此配置文件对应用程序进行签名。我如何在 xamarin 工作室中做到这一点？

另外，我需要再次告诉 xcode 应用程序包 id 是什么，我该怎么做？

我阅读了[应用内购买编程指南](https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/Introduction/Introduction.html)，让我对在应用购买中实现所需的架构有了一个全面的了解，但我在一些小细节上失败了。

任何帮助，将不胜感激。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T01:50:08.597

CraigD 对此的回答可能会有所帮助：[MonoTouch 的 IAP（应用内购买）示例？](https://stackoverflow.com/questions/11576603/iap-in-app-purchase-sample-for-monotouch)

它本身并没有涉及实时测试，但 Craig 的 github 示例可能会帮助您了解这些实现细节。

# javascript - 返回无效（0）；与回报；中断功能

> ID：16114652
> 
> 赞同：9
> 
> 时间：2013-04-19T22:58:07.700
> 
> 标签：javascript

我遇到了一些中断函数的代码`return void(0);`。

我相信这被用来返回`undefined`，但这可以简单地通过编写来完成`return;`。

是否`return void(0);`有其他目的，或者这只是中断功能的两种不同方式？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T23:06:44.123

`return void(0);`没有做任何特别的事情。它只是返回`undefined`，尽管是以一种非常愚蠢的方式。这可能是原始开发人员没有完全理解 JavaScript 的情况。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T23:01:30.557

这只是另一种返回方式`undefined`。请参阅[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/void](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/void)

# haskell - Alex right_ctx end-of-line ($) 阻塞在文件末尾

> ID：16114658
> 
> 赞同：3
> 
> 时间：2013-04-19T22:58:41.653
> 
> 标签：haskell, lexical-analysis, alex

在`Alex`我有一个看起来像这样的规则

```
^@ident\:$   {TLabel (init s)} 
```

因此，单行以标识符开头，后跟冒号，然后是行尾。

除非该行是文件中的最后一行并且`\n`末尾没有 a ，否则这可以正常工作。发生这种情况时，`$`不匹配并且扫描失败。我需要做什么来匹配行尾 ( `\n`) 或文件末尾？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T01:00:26.590

最简单的解决方案是通过简单地在输入末尾附加一个来确保输入始终以`\n`结尾。

或者，您可以通过使用[谓词](http://www.haskell.org/alex/doc/html/alex-files.html#contexts)而不是`$`.

```
^@ident\:/{ eolOrEof }   { ... } 
```

谓词可以检查令牌周围的输入流并决定它是否应该匹配。在这种情况下，我们只需检查令牌之后的流以检查`\n`EOF。

确切的定义将取决于您使用的包装器（类型的定义`AlexInput`因包装器而异），但这是我必须使用`"basic"`包装器的一个。

```
eolOrEof :: user -> AlexInput -> Int -> AlexInput -> Bool
eolOrEof _ _ _ (_, after) =
  case after of
    []       -> True  -- end-of-file
    ('\n':_) -> True  -- end-of-line
    _        -> False 
```

# r - 在 data.frame 中按组求和

> ID：16114666
> 
> 赞同：2
> 
> 时间：2013-04-19T22:59:18.127
> 
> 标签：r, sum, dataframe, tapply

我正在尝试获取每个分类变量（在数据框中）的数值变量的总和。我试过使用`tapply`，但它并不需要一个整体`data.frame`。

这是一个工作示例，其中包含一些如下所示的数据：

```
> set.seed(667) 
> df <- data.frame(a = sample(c("Group A","Group B","Group C",NA),  10, rep = TRUE), 
                   b = sample(c(1, 2, 3, 4, 5, 6),  10, rep=TRUE), 
                   c = sample(c(11, 12, 13, 14, 15, 16),  10, rep=TRUE))
> df
          a b  c
 1  Group A 4 12
 2  Group B 6 12
 3     <NA> 4 14
 4  Group C 1 16
 5     <NA> 2 14
 6     <NA> 3 13
 7  Group C 4 13
 8     <NA> 6 15
 9  Group B 3 16
 10 Group B 5 16 
```

使用`tapply`，我一次可以得到一个向量：

```
> tapply(df$b,df$a,sum)
 Group A Group B Group C 
       4      14       5 
```

但我更感兴趣的是得到这样的东西：

```
 a  b  c
1  Group A  4 12
2  Group B 14 44
3  Group C  5 29 
```

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T23:11:13.120

改为使用聚合：

```
 aggregate(df[ , c("b","c")], df['a'], FUN=sum)
        a  b  c
1 Group A  4 12
2 Group B 14 44
3 Group C  5 29 
```

我不确定为什么，但是您需要将第二个参数作为列表传递给聚合，因此使用 df$a 会出错。然后它在第一个参数中的各个列上使用该函数。

# java - GAE 数据存储：仅在多次调用 delete() 后才删除实体

> ID：16114667
> 
> 赞同：0
> 
> 时间：2013-04-19T22:59:22.727
> 
> 标签：java, google-app-engine, nosql, google-cloud-datastore

我正在使用 Eclipse 在本地计算机上使用 GAE 数据存储。我创建了两个 servlet -`AddMovie`和`DeleteMovie`：

### 添加电影

```
Entity movie = new Entity("movie",System.currentTimeMillis());
movie.setProperty("name",     "Hakeshset Beanan");
movie.setProperty("director", "Godard");
datastore.put(movie); 
```

### 删除电影

```
Query q = new Query("movie");
PreparedQuery pq = datastore.prepare(q);
List<Entity> movies = Lists.newArrayList(pq.asIterable());
response.put("numMoviesFound", String.valueOf(movies.size()));

for (Entity movie : movies) {
    Key key = movie.getKey();
    datastore.delete(key);
} 
```

有趣的是，DeleteMovie servlet 不会删除所有电影。连续调用返回`{"numMoviesFound":"15"}`，然后`{"numMoviesFound":"9"}`，`{"numMoviesFound":"3"}`最后`{"numMoviesFound":"3"}`。

**为什么不是一次从数据存储中删除所有电影？**

**更新：**问题似乎只发生在本地 Eclipse 上，而不是 GAE 服务器上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:54:17.297

我认为您应该在一次事务中删除所有电影，这将确保更好的一致性。

谈到一致性，你的问题就在这里：

> Google App Engine 的 High Replication Datastore (HRD) 通过在多个数据中心同步存储数据，为您的读写提供高可用性。但是，从提交写入到它在所有数据中心中可见的延迟意味着跨多个实体组的查询（非祖先查询）只能保证最终一致的结果。因此，此类查询的结果有时可能无法反映基础数据的最新更改。

[https://developers.google.com/appengine/docs/java/datastore/structuring_for_strong_consistency](https://developers.google.com/appengine/docs/java/datastore/structuring_for_strong_consistency)

# eclipse - 如何确定 Eclipse 是否在调试模式下运行

> ID：16114668
> 
> 赞同：7
> 
> 时间：2013-04-19T22:59:25.210
> 
> 标签：eclipse, debugging

有很多关于如何从代码中检测 Eclipse 是否在调试模式下运行的问题/答案；但我找不到任何描述用户如何找出 Eclipse 是否在调试模式下运行的来源。我在运行应用程序时检查了 Eclipse，以确定它是否在调试模式下运行应用程序，但我找不到任何解释这一点的来源。我还浏览了控制台中的输出消息，再次没有任何迹象表明应用程序是否在调试模式下运行。

那么，有人可以告诉我如何确定在 Eclipse 中运行的应用程序是否在调试模式下运行。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-19T23:13:46.983

切换到“调试”透视图并查看“调试”窗格。如果它看起来像这样，则说明您不是在调试：

![在此处输入图像描述](https://i.stack.imgur.com/cJiYv.png)

如果它看起来像这样，您正在调试：

![在此处输入图像描述](https://i.stack.imgur.com/F5ZOW.png)

# java - 在 Apache 服务器上部署 Applet

> ID：16114674
> 
> 赞同：0
> 
> 时间：2013-04-19T23:00:42.567
> 
> 标签：java, apache, deployment, applet, classnotfoundexception

我编写了一个想要部署在我的 Apache 服务器上的 Java 小程序游戏。代码 + 资源位于根目录中的自签名 .jar 中，并带有随附的 HTML 文档。当我在本地机器上运行它时，一切正常。当我尝试在服务器上运行时，我得到一个类未找到异常。index.html 包含

```
<applet code=SpaceRaiderz.class  
 archive=spaceraiderz.jar  
 width=1024 height=768>  
</applet> 
```

未找到的类是上面命名的类。打开.jar，里面的内容就完成了。文件权限设置为 755。如果我单击本地计算机上的 index.html，它会加载并完美运行。Ftp 相同的文档到服务器，它不起作用。有人遇到过这个问题吗？我在这里找到了与此类似的问题，但在这种情况下，建议的解决方案都没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T04:38:22.473

小程序（见[此处](http://www.dweb-x.com/spaceraiderz)）适用于我在 Windows 上使用 FF 的 Java 1.7.0_21 中的小行星风格游戏，其中包含一艘看起来可疑熟悉的浅绿色船 + 音轨。[刷新控制台](http://www.java.com/en/download/help/javaconsole.xml)中的类缓存然后刷新页面可能会为您解决问题。

如果失败，还有更多选项可用于测试小程序：

*   通常安装另一个浏览器（这些事情通常是由于特定浏览器/JRE 组合中的问题。）。
*   还有[Appleteer](http://pscode.org/appleteer/)小程序测试环境。我可以强烈推荐它，因为我写了它。
*   如果一切都失败了，请去网吧或当地图书馆检查小程序。

# java - 为了使我的 Madlibs 程序可以从此登录/密码程序访问，我该怎么做？

> ID：16114676
> 
> 赞同：1
> 
> 时间：2013-04-19T23:00:57.803
> 
> 标签：java, swing, user-interface, window

（关于 Stack 的第一篇文章，woopee！）我编写了一个 Madlibs 程序，它接收用户输入，并从中制作一个故事。我还制作了一个用户登录程序，我想使用 Mad libs 程序进行测试。它工作得很好，但有一个问题，我会解决它。问题从登录屏幕开始。一旦我输入了正确的关键字（dodo 和 foo），登录屏幕就会登录，然后自动关闭，然后调用 MadLibsGUI 程序。但这是我的问题：当我这样做时，出于某种原因，MadLibsGUI 程序会产生两个窗口。我怀疑问题出在 MadLibsGUI 的`main`方法 。我已经尝试修复它，但它似乎没有工作。该程序运行良好，但两个窗口确实困扰我。我将在下面发布两个代码类供您阅读和查看。两者都相当简单（我是一个初学者程序员），所以你不应该对它们有那么大的问题。如果您有任何其他意见或更正，请不要犹豫，更正它们。

登录屏幕：

```
package passwordProgram;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JPasswordField;
import javax.swing.JTextField;
import javax.swing.UIManager;

import madLibs.MadLibsGUI;

public class LogInScreen implements ActionListener {

    public static void main(String[] args) {
        try {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        } 
        catch (Exception e) {
        }
        LogInScreen logger = new LogInScreen();
        logger.start();
    }

    JButton logIn;
    JFrame frame;
    JTextField username;
    JPasswordField password;
    JLabel title;

    public void start() {
        frame = new JFrame();
        JPanel panel = new JPanel();

        panel.setBackground(Color.RED);

        JButton logIn = new JButton("Log In");
        logIn.addActionListener(this);

        title = new JLabel("Welcome to the Username/Password System");
        JLabel usernameTxt = new JLabel("Username: ");
        username = new JTextField(15);

        JLabel passwordTxt = new JLabel("Password: ");
        password = new JPasswordField(15);

        frame.getContentPane().add(BorderLayout.CENTER, panel);
        frame.getContentPane().add(BorderLayout.SOUTH, logIn);
        frame.getContentPane().add(BorderLayout.NORTH, title);

        panel.setLayout(new GridBagLayout());
        GridBagConstraints left = new GridBagConstraints();
        left.anchor = GridBagConstraints.EAST;
        GridBagConstraints right = new GridBagConstraints();
        right.weightx = (int) 2;
        right.fill = GridBagConstraints.HORIZONTAL;
        right.gridwidth = GridBagConstraints.REMAINDER;
        panel.add(usernameTxt, left);
        panel.add(passwordTxt, right);
        panel.add(username, right);
        panel.add(passwordTxt, left);
        panel.add(password, right);

        logIn.addActionListener(this);

        frame.setVisible(true);
        frame.setSize(500, 300);
    }

    public void actionPerformed(ActionEvent event) {
        if (username.getText().equals("dodo") && new String(password.getPassword()).equals("foo")) {
            MadLibsGUI mLibs = new MadLibsGUI();
            mLibs.start();
            frame.setVisible(false);
        } else {
            title.setText("Invalid username/password. Please try again.");
        }
    }
} 
```

MadLibsGUI 类：

```
package madLibs;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.BorderFactory;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextArea;
import javax.swing.JTextField;
import javax.swing.UIManager;

public class MadLibsGUI implements ActionListener {

    JFrame frame;
    JPanel panel; 

    JTextField nameTxt;
    JTextField verbTxt1;
    JTextField adjTxt;
    JTextField verbTxt2;
    JTextField nounTxt;

    JTextArea story;

    public void start() {
        JFrame frame = new JFrame();
        JPanel panel = new JPanel();
        JButton madLibButton = new JButton("Lib it!");

        story = new JTextArea();

        JLabel title = new JLabel("Welcome to mad libs! \n Put in your words and press the 'Lib It' button to play!");
        JLabel nameLabel = new JLabel("Name: ");
        JLabel verbLabel1 = new JLabel("Verb: ");
        JLabel adjLabel = new JLabel("Adjective: ");
        JLabel verbLabel2 = new JLabel("Verb: ");
        JLabel nounLabel = new JLabel("Noun: ");

        nameTxt = new JTextField(25);
        verbTxt1 = new JTextField(25);
        adjTxt = new JTextField(25);
        verbTxt2 = new JTextField(25);
        nounTxt = new JTextField(25);

        frame.getContentPane().add(BorderLayout.SOUTH, story);
        frame.getContentPane().add(BorderLayout.NORTH, title);

        panel.setLayout(new GridBagLayout());
        panel.setBackground(Color.green);
        frame.getContentPane().add(panel);
        GridBagConstraints left = new GridBagConstraints();
        left.anchor = GridBagConstraints.EAST;
        GridBagConstraints right = new GridBagConstraints();
        right.weighty = 1.2;
        GridBagConstraints middle = new GridBagConstraints();
        middle.anchor = GridBagConstraints.CENTER;

        right.fill = GridBagConstraints.HORIZONTAL;
        right.gridwidth = GridBagConstraints.REMAINDER;
        panel.add(nameLabel, left);
        panel.add(nameTxt, right);
        panel.add(verbLabel1, left);
        panel.add(verbTxt1, right);
        panel.add(adjLabel, left);
        panel.add(adjTxt, right);
        panel.add(verbLabel2, left);
        panel.add(verbTxt2, right);
        panel.add(nounLabel, left);
        panel.add(nounTxt, right);
        panel.add(madLibButton, right);
        panel.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
        frame.pack();
        frame.setVisible(true);
        frame.setSize(615, 500);

        madLibButton.addActionListener(this);
    }

    public void actionPerformed(ActionEvent event) {
        String text =  ("\tThere once was a boy named " + nameTxt.getText() + " who loved to " + verbTxt1.getText()
                + ". \n\tOne day, " + nameTxt.getText() + " was walking down the street when he saw a " + 
                adjTxt.getText() + " bird who \n\twas hurt. He quietely said, \" It's okay \n\tlittle bird, I " +
                "won't hurt you!\" Instead, " + nameTxt.getText() + "\n\tdecided that he was going " +
                " to " + verbTxt2.getText() + " the bird! Sadly, the bird \n\t" + verbTxt2.getText() + "ed too" +
                " much. " + nameTxt.getText() + " was very sad. \n\tHe sat in his room, playing with his " + 
                nounTxt.getText() + ". \n\n \t\t\t|THE END|");
        story.append(text);
    }

    public static void main(String[] args) {
        try {
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        } catch (Exception e) {
            e.printStackTrace();
        }

        MadLibsGUI main = new MadLibsGUI();
        main.start();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T23:23:09.473

您在方法中调用以下两次`start()`：

```
 logIn.addActionListener(this); 
```

这意味着每次单击按钮时，`actionPerformed()`都会执行两次该方法。

# ios - sharedObject.getLocal 是否适用于 iOS 版 Air？

> ID：16114678
> 
> 赞同：0
> 
> 时间：2013-04-19T23:01:05.180
> 
> 标签：ios, actionscript-3, air, shared-objects

所以，我为我的游戏创建了一个保存系统。问题是它在 Flash 和桌面版 Air 上运行良好，但当我将其包装为 iOS 应用程序时，它在 iOS 版 Air 上运行良好。sharedObject.getLocal 是否适用于 iOS？如果没有，我还能用什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T23:45:11.913

是的，它应该工作。如果`var mySharedObject.getLocal("game")`不工作，那么你可能有一个损坏的系统，或者一个非常旧的 IOS 版本。可以肯定的是，发布您正在使用的代码。此外，请确保您的应用程序类型具有正确的渲染模式。

第二个选项：检查你的记忆。如果您没有足够的内存来支持 SharedObject，它将不会存储内存。做一个测试，添加以下代码：

```
if(mySharedObject.size != 0)
{
textfield.text = "works."
}else{
textfield.text = "nowork." 
```

创建一个名为“textfield”的文本框输入和一个 SharedObject 变量“mySharedObject”。

# ninject - 命名绑定 - MVC3

> ID：16114680
> 
> 赞同：0
> 
> 时间：2013-04-19T23:01:18.367
> 
> 标签：ninject, ninject.web.mvc

我正在尝试使用命名实例注册到相同接口的实现

```
kernel.Bind<IRepository>().To<CachedRepository>().InSingletonScope();
kernel.Bind<IRepository>().To<DbRepository>().InSingletonScope().Named("db"); 
```

这个想法是，如果我没有指定名称，那么就会创建 CachedRepository，如果我需要一个面向 DB 的，那么我会使用 Named 属性，但是当创建一个简单的对象时，这种悲惨的失败

```
public class TripManagerController : Controller
    {
        [Inject]
        public IRepository Repository { get; set; } // default Cached repo must be created

        public TripManagerController()
        {
            ViewBag.LogedEmail = "test@test.com";
        }
} 
```

错误是

> 激活 IRepository 时出错 有多个匹配的绑定可用。激活路径：2）将依赖IRepository注入到TripManagerController类型的构造函数的参数库中1）对TripManagerController的请求
> 
> 建议： 1) 确保您只为 IRepository 定义了一次绑定。

有没有办法在不为面向 BD 的存储库创建新接口的情况下实现我想要的？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T07:46:09.013

The `[Named]` attribute [as shown in the wiki](https://github.com/ninject/ninject/wiki/Contextual-Binding) should work.

BTW stay away from anything other than ctor injection!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T19:30:34.040

看起来你不能做你正在尝试的事情，我刚刚遇到了同样的问题，除了找到你的问题，我还找到了 Ninject [Remo Gloor](https://stackoverflow.com/users/448580/remo-gloor)的作者回答的这个问题。

[https://stackoverflow.com/a/4051391/495964](https://stackoverflow.com/a/4051391/495964)

虽然[Remo](https://stackoverflow.com/users/448580/remo-gloor)没有明确表示无法做到，但他的回答是命名两个绑定（或使用自定义[属性绑定](https://github.com/ninject/ninject/wiki/Contextual-Binding#specifying-constraints-on-the-type-binding-using-the-built-in-attribute-based-helpers)，数量相同）。

# java - 使新的 SQLitedatabase 表不存在

> ID：16114685
> 
> 赞同：0
> 
> 时间：2013-04-19T23:01:35.387
> 
> 标签：java, android, eclipse, sqlite

我的旧 SQLite 数据库没有按照我想要的方式工作，所以我想删除我的旧 DBAdapter 文件夹和 DBHelper 文件夹，并从头开始创建一个新数据库，其中包含 2 个新表、新列名和一个新 DATABASE_NAME 但之后我使用新的字符串和光标将所有内容链接到我的应用程序我遇到了空点崩溃，并且在我的 logcat 中遇到了这些错误。

更新：我已将 onCreate 参数更改为 db 并解决了无效表错误，但现在我有一个 Table "Players"(MyFirstTable) 不存在错误。

更新：新的 LOGCAT

```
04-19 19:56:02.781: E/AndroidRuntime(9179): FATAL EXCEPTION: main
04-19 19:56:02.781: E/AndroidRuntime(9179): android.database.sqlite.SQLiteException: no such table: PLAYERS (code 1): , while compiling: SELECT _id, USERNAME FROM PLAYERS
04-19 19:56:02.781: E/AndroidRuntime(9179):     at android.database.sqlite.SQLiteConnection.nativePrepareStatement(Native Method)
04-19 19:56:02.781: E/AndroidRuntime(9179):     at android.database.sqlite.SQLiteConnection.acquirePreparedStatement(SQLiteConnection.java:882)
04-19 19:56:02.781: E/AndroidRuntime(9179):     at android.database.sqlite.SQLiteConnection.prepare(SQLiteConnection.java:493)
04-19 19:56:02.781: E/AndroidRuntime(9179):     at android.database.sqlite.SQLiteSession.prepare(SQLiteSession.java:588)
04-19 19:56:02.781: E/AndroidRuntime(9179):     at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:58)
04-19 19:56:02.781: E/AndroidRuntime(9179):     at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:37)
04-19 19:56:02.781: E/AndroidRuntime(9179):     at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:44)
04-19 19:56:02.781: E/AndroidRuntime(9179):     at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1314)
04-19 19:56:02.781: E/AndroidRuntime(9179):     at android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1161)
04-19 19:56:02.781: E/AndroidRuntime(9179):     at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1032)
04-19 19:56:02.781: E/AndroidRuntime(9179):     at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1200)
04-19 19:56:02.781: E/AndroidRuntime(9179):     at com.fullfrontalgames.numberfighter.DBAdapter.getUsername(DBAdapter.java:143)
04-19 19:56:02.781: E/AndroidRuntime(9179):     at com.fullfrontalgames.numberfighter.Findfriends$1.onClick(Findfriends.java:39)
04-19 19:56:02.781: E/AndroidRuntime(9179):     at android.view.View.performClick(View.java:4106)
04-19 19:56:02.781: E/AndroidRuntime(9179):     at android.view.View$PerformClick.run(View.java:17052)
04-19 19:56:02.781: E/AndroidRuntime(9179):     at android.os.Handler.handleCallback(Handler.java:615)
04-19 19:56:02.781: E/AndroidRuntime(9179):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-19 19:56:02.781: E/AndroidRuntime(9179):     at android.os.Looper.loop(Looper.java:137)
04-19 19:56:02.781: E/AndroidRuntime(9179):     at android.app.ActivityThread.main(ActivityThread.java:5059)
04-19 19:56:02.781: E/AndroidRuntime(9179):     at java.lang.reflect.Method.invokeNative(Native Method)
04-19 19:56:02.781: E/AndroidRuntime(9179):     at java.lang.reflect.Method.invoke(Method.java:511)
04-19 19:56:02.781: E/AndroidRuntime(9179):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:792)
04-19 19:56:02.781: E/AndroidRuntime(9179):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:555)
04-19 19:56:02.781: E/AndroidRuntime(9179):     at dalvik.system.NativeStart.main(Native Method) 
```

DBAdapter 类

```
 package com.fullfrontalgames.numberfighter;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteException;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class DBAdapter {
    static final String KEY_ROWID = "_id";

    static final String KEY_USERNAME = "USERNAME";

    static final String KEY_PASSWORD = "PASSWORD";

    static final String KEY_EMAIL = "EMAIL";

    static final String KEY_NUMBERINPUT = "NUMBERINPUT";

    static final String KEY_SCORE = "SCORE";

    static final String KEY_FRIENDS = "FRIENDS";

    static final String TAG = "DBAdapter";

    static final String DATABASE_NAME = "NFDatabase";

    static final String DATABASE_TABLE1 = "PLAYERS";

    static final String DATABASE_TABLE2 = "FRIENDSLIST";

    static final int DATABASE_VERSION = 1;

    static final String DATABASE_CREATE_TABLE1 = "create table PLAYERS (_id integer primary key autoincrement,"
            + "USERNAME text not null,PASSWORD text not null,EMAIL text not null,NUMBERINPUT text not null,,SCORE text not null;";

    static final String DATBASE_CREATE_TABLE2 = "create table FRIENDSLIST (_id integer primary key autoincrement,"
            + "FRIENDS text not null,USERNAME text not null,NUMBERINPUT text not null,SCORE text not null;";

    final Context context;

    DatabaseHelper DBHelper;

    static SQLiteDatabase db;

    public DBAdapter(Context ctx) {
        this.context = ctx;
        DBHelper = new DatabaseHelper(context);
    }

    private static class DatabaseHelper extends SQLiteOpenHelper {

        public DatabaseHelper(Context context) {
            // TODO Auto-generated constructor stub
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            // TODO Auto-generated method stub
            try {
                db.execSQL(DATABASE_CREATE_TABLE1);
                db.execSQL(DATABASE_CREATE_TABLE2);
            } catch (SQLException e) {
                e.printStackTrace();
            }
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            // TODO Auto-generated method stub
            Log.w(TAG, "Upgrading database from version " + oldVersion + " to " + newVersion
                    + ", which will destroy all old data");
            db.execSQL("DROP TABLE IF EXISTS PLAYERS,FRIENDSLIST");
            onCreate(db);
        }

    }

    public DBAdapter open() throws SQLiteException {
        db = DBHelper.getWritableDatabase();
        return this;
    }

    public void close() {
        DBHelper.close();
    }

    // PLAYERS TABLE CRUD

    public void insertPlayer(String Username, String Password, String Email) {
        ContentValues initialValues = new ContentValues();
        initialValues.put("USERNAME", Username);
        initialValues.put("PASSWORD", Password);
        initialValues.put("EMAIL", Email);
    }

    public boolean deletePlayer(String username) {
        return db.delete("PLAYERS", KEY_ROWID + " = " + "_id", null) > 0;
    }

    public Cursor getAllPlayers() {
        return db.query(null, new String[] {
                "_id", "USERNAME", "PASSWORD", "EMAIL"
        }, null, null, null, null, null, null);
    }

    public String getData() {
        String[] columns = new String[] {
                "_id", "USERNAME", "PASSWORD"
        };
        Cursor mCursor = db.query("PLAYERS", columns, null, null, null, null, null);
        String result = "";
        int iRow = mCursor.getColumnIndex(KEY_ROWID);
        int iName = mCursor.getColumnIndex(KEY_USERNAME);

        for (mCursor.moveToFirst(); !mCursor.isAfterLast(); mCursor.moveToNext()) {
            result = mCursor.getString(iRow) + " " + mCursor.getString(iName) + "/n";
        }
        return result;
    }

    public Cursor getPlayer(long rowid) throws SQLException {
        Cursor mCursor = db.query(true, "PLAYERS", new String[] {
                "_id", "USERNAME"
        }, KEY_ROWID + " =  " + "_id", null, null, null, null, null);
        if (mCursor != null) {
            mCursor.moveToFirst();
        }
        return mCursor;
    }

    public String getUsername(String username) {
        // TODO Auto-generated method stub
        String[] columns = new String[] {
                "_id", "USERNAME"
        };
        Cursor mCursor = db.query("PLAYERS", columns, null, null, null, null, null);
        String result = "";
        int iRow = mCursor.getColumnIndex(KEY_ROWID);
        int iName = mCursor.getColumnIndex(KEY_USERNAME);

        for (mCursor.moveToFirst(); !mCursor.isAfterLast(); mCursor.moveToNext()) {
            result = mCursor.getString(iRow) + " " + mCursor.getString(iName) + "/n";
        }
        return result;
    }

    public String getSinlgeEntry(String Username) {
        Cursor cursor = db.query("PLAYERS", null, " USERNAME=?", new String[] {
            Username
        }, null, null, null);
        if (cursor.getCount() < 1) // UserName Not Exist
        {
            cursor.close();
            return "NOT EXIST";
        }
        cursor.moveToFirst();
        String password = cursor.getString(cursor.getColumnIndex("PASSWORD"));
        cursor.close();
        return password;
    }

    public boolean updatePlayer(long _id, String Username, String Password, String Email) {
        ContentValues args = new ContentValues();
        args.put("USERNAME", Username);
        args.put("PASSWORD", Password);
        args.put("EMAIL", Email);
        return db.update("PLAYERS", args, KEY_ROWID + " = " + _id, null) > 0;
    }

    // FRIENDS TABLE CRUD

    public void insertFriend(String Friend) {
        ContentValues initialValues = new ContentValues();
        initialValues.put("FRIENDS", Friend);
        db.insert("FRIENDSLIST", null, null);
    }

    public boolean deleteFriend(String deletedfriend) {
        return db.delete("FRIENDSLIST", KEY_ROWID + " = " + "_id", null) > 0;
    }

    public Cursor getAllFriends() {
        return db.query(null, new String[] {
                "_id", "FRIENDS"
        }, null, null, null, null, null, null);
    }

    public Cursor getFriend(long rowid) throws SQLException {
        Cursor mCursor = db.query(true, "FRIENDSLIST", new String[] {
                "_id", "FRIENDS"
        }, KEY_ROWID + " =  " + "_id", null, null, null, null, null);
        if (mCursor != null) {
            mCursor.moveToFirst();
        }
        return mCursor;
    }

    public boolean updateFriend(long _id, String Friends) {
        ContentValues args = new ContentValues();
        args.put("FRIENDS", Friends);

        return db.update("FRIENDSLIST", args, KEY_ROWID + " = " + _id, null) > 0;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T23:12:39.787

在这里，您没有`db`像其他方法一样命名您的方法参数，所以我猜它正在隐藏静态变量`DBAdapter.db`。

```
 public void onCreate(SQLiteDatabase arg0) {
        // TODO Auto-generated method stub
        try {
            db.execSQL(DATABASE_CREATE_TABLE1);
            db.execSQL(DATBASE_CREATE_TABLE2);
        } catch (SQLException e) {
            e.printStackTrace();
        }
    } 
```

尝试更改`arg0`为`db`.

# c# - C# HTTP 请求到 PHP 文件到 JSON

> ID：16114691
> 
> 赞同：1
> 
> 时间：2013-04-19T23:02:10.033
> 
> 标签：c#, php, http

我想在 C# 中编写一个类，它应该将 HTTP 请求（发布）发送到我服务器上的 PHP 文件，以便检索 json 对象。

这是我得到的代码：

```
 public void SendRequest(){
    HttpWebRequest request = (HttpWebRequest)
        WebRequest.Create("url");

    // execute the request
    HttpWebResponse response = (HttpWebResponse)
        request.GetResponse();
    } 
```

那是我需要的吗？你认为我应该改变或改进什么？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T23:21:47.830

您需要发布数据并阅读响应：

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create("url");
string yourPostData = "Your post data";
string sreverResponseText;

byte[] postDataBytes = Encoding.UTF8.GetBytes(yourPostData);
request.ContentLength = yourPostData.Length;
request.ContentType = "application/x-www-form-urlencoded";
request.Method = "POST";

using (Stream requestStream = request.GetRequestStream())
      requestStream.Write(postDataBytes, 0, postDataBytes.Length);

using (response = (HttpWebResponse)request.GetResponse())
      using (StreamReader streamReader = new StreamReader(response.GetResponseStream()))
            sreverResponseText = streamReader.ReadToEnd(); 
```

现在您要查找的内容在 中`sreverResponseText`，您也可以从`response.Headers.ToString()`

# r - 在数据框中找到最大的产品

> ID：16114692
> 
> 赞同：-3
> 
> 时间：2013-04-19T23:02:09.940
> 
> 标签：r, dataframe

我有一个数据框，我需要在数据框中以相同的方向（上、下、左、右或对角线）找到最大的产品。

数据框如下：

```
structure(list(V1 = c(8L, 49L, 81L, 52L, 22L, 24L, 32L, 67L, 
24L, 21L, 78L, 16L, 86L, 19L, 4L, 88L, 4L, 20L, 20L, 1L), V2 = c(2L, 
49L, 49L, 70L, 31L, 47L, 98L, 26L, 55L, 36L, 17L, 39L, 56L, 80L, 
52L, 36L, 42L, 69L, 73L, 70L), V3 = c(22L, 99L, 31L, 95L, 16L, 
32L, 81L, 20L, 58L, 23L, 53L, 5L, 0L, 81L, 8L, 68L, 16L, 36L, 
35L, 54L), V4 = c(97L, 40L, 73L, 23L, 71L, 60L, 28L, 68L, 5L, 
9L, 28L, 42L, 48L, 68L, 83L, 87L, 73L, 41L, 29L, 71L), V5 = c(38L, 
17L, 55L, 4L, 51L, 99L, 64L, 2L, 66L, 75L, 22L, 96L, 35L, 5L, 
97L, 57L, 38L, 72L, 78L, 83L), V6 = c(15L, 81L, 79L, 60L, 67L, 
3L, 23L, 62L, 73L, 0L, 75L, 35L, 71L, 94L, 35L, 62L, 25L, 30L, 
31L, 51L), V7 = c(0L, 18L, 14L, 11L, 63L, 45L, 67L, 12L, 99L, 
76L, 31L, 31L, 89L, 47L, 99L, 20L, 39L, 23L, 90L, 54L), V8 = c(40L, 
57L, 29L, 42L, 89L, 2L, 10L, 20L, 26L, 44L, 67L, 47L, 7L, 69L, 
16L, 72L, 11L, 88L, 1L, 69L), V9 = c(0L, 60L, 93L, 69L, 41L, 
44L, 26L, 95L, 97L, 20L, 15L, 55L, 5L, 28L, 7L, 3L, 24L, 34L, 
74L, 16L), V10 = c(75L, 87L, 71L, 24L, 92L, 75L, 38L, 63L, 17L, 
45L, 94L, 58L, 44L, 73L, 97L, 46L, 94L, 62L, 31L, 92L), V11 = c(4L, 
17L, 40L, 68L, 36L, 33L, 40L, 94L, 78L, 35L, 3L, 88L, 44L, 92L, 
57L, 33L, 72L, 99L, 49L, 33L), V12 = c(5L, 40L, 67L, 56L, 54L, 
53L, 67L, 39L, 78L, 14L, 80L, 24L, 37L, 13L, 32L, 67L, 18L, 69L, 
71L, 48L), V13 = c(7L, 98L, 53L, 1L, 22L, 78L, 59L, 63L, 96L, 
0L, 4L, 0L, 44L, 86L, 16L, 46L, 8L, 82L, 48L, 61L), V14 = c(78L, 
43L, 88L, 32L, 40L, 36L, 54L, 8L, 83L, 61L, 62L, 17L, 60L, 52L, 
26L, 55L, 46L, 67L, 86L, 43L), V15 = c(52L, 69L, 30L, 56L, 40L, 
84L, 70L, 40L, 14L, 33L, 16L, 54L, 21L, 17L, 26L, 12L, 29L, 59L, 
81L, 52L), V16 = c(12L, 48L, 3L, 71L, 28L, 20L, 66L, 91L, 88L, 
97L, 14L, 24L, 58L, 77L, 79L, 32L, 32L, 85L, 16L, 1L), V17 = c(50L, 
4L, 49L, 37L, 66L, 35L, 18L, 66L, 34L, 34L, 9L, 36L, 51L, 4L, 
33L, 63L, 40L, 74L, 23L, 89L), V18 = c(77L, 56L, 13L, 2L, 33L, 
17L, 38L, 49L, 89L, 31L, 53L, 29L, 54L, 89L, 27L, 93L, 62L, 4L, 
57L, 19L), V19 = c(91L, 62L, 36L, 36L, 13L, 12L, 64L, 94L, 63L, 
33L, 56L, 85L, 17L, 55L, 98L, 53L, 76L, 36L, 5L, 67L), V20 = c(8L, 
0L, 65L, 91L, 80L, 50L, 70L, 21L, 72L, 95L, 92L, 57L, 58L, 40L, 
66L, 69L, 36L, 16L, 54L, 48L)), .Names = c("V1", "V2", "V3", 
"V4", "V5", "V6", "V7", "V8", "V9", "V10", "V11", "V12", "V13", 
"V14", "V15", "V16", "V17", "V18", "V19", "V20"), class = "data.frame", row.names = c(NA, 
-20L)) 
```

数据框如下所示：

```
> newjd
   V1 V2 V3 V4 V5 V6 V7 V8 V9 V10 V11 V12 V13 V14 V15 V16 V17 V18 V19 V20
1   8  2 22 97 38 15  0 40  0  75   4   5   7  78  52  12  50  77  91   8
2  49 49 99 40 17 81 18 57 60  87  17  40  98  43  69  48   4  56  62   0
3  81 49 31 73 55 79 14 29 93  71  40  67  53  88  30   3  49  13  36  65
4  52 70 95 23  4 60 11 42 69  24  68  56   1  32  56  71  37   2  36  91
5  22 31 16 71 51 67 63 89 41  92  36  54  22  40  40  28  66  33  13  80
6  24 47 32 60 99  3 45  2 44  75  33  53  78  36  84  20  35  17  12  50
7  32 98 81 28 64 23 67 10 26  38  40  67  59  54  70  66  18  38  64  70
8  67 26 20 68  2 62 12 20 95  63  94  39  63   8  40  91  66  49  94  21
9  24 55 58  5 66 73 99 26 97  17  78  78  96  83  14  88  34  89  63  72
10 21 36 23  9 75  0 76 44 20  45  35  14   0  61  33  97  34  31  33  95
11 78 17 53 28 22 75 31 67 15  94   3  80   4  62  16  14   9  53  56  92
12 16 39  5 42 96 35 31 47 55  58  88  24   0  17  54  24  36  29  85  57
13 86 56  0 48 35 71 89  7  5  44  44  37  44  60  21  58  51  54  17  58
14 19 80 81 68  5 94 47 69 28  73  92  13  86  52  17  77   4  89  55  40
15  4 52  8 83 97 35 99 16  7  97  57  32  16  26  26  79  33  27  98  66
16 88 36 68 87 57 62 20 72  3  46  33  67  46  55  12  32  63  93  53  69
17  4 42 16 73 38 25 39 11 24  94  72  18   8  46  29  32  40  62  76  36
18 20 69 36 41 72 30 23 88 34  62  99  69  82  67  59  85  74   4  36  16
19 20 73 35 29 78 31 90  1 74  31  49  71  48  86  81  16  23  57   5  54
20  1 70 54 71 83 51 54 69 16  92  33  48  61  43  52   1  89  19  67  48 
```

任何建议都受到高度赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T23:20:52.877

```
m <- as.matrix(df)
ll <- c(lapply(1:20, function(X) row(m)==X),                 ## Rows
        lapply(1:20, function(X) col(m)==X),                 ## Columns
        lapply(-19:19, function(X) (col(m)+X)==row(m)),      ## NW-SE diagonals
        lapply(-19:19, function(X) (col(m)+X)==(21-row(m)))) ## SW-NE diagonals
## Calculate product of each row, column, and diagonal
pp <- sapply(ll, function(X) prod(m[X]))
max(pp)
# [1] 1.824798e+35
m[ll[[which.max(pp)]]]
# [1] 75 87 71 24 92 75 38 63 17 45 94 58 44 73 97 46 94 62 31 92 
```

或者，更一般地说：

```
maxProdElements <- function(m) {
    mm <- nrow(m)
    nn <- ncol(m)
    ll <- c(lapply(seq_len(mm), function(X) which(row(m)==X)),
            lapply(seq_len(nn), function(X) which(col(m)==X)),
            lapply((-mm+1):(nn-1), function(X) which(col(m)==(row(m)+X))),
            lapply((-mm+1):(nn-1), function(X) which((nn+1-col(m))==(row(m)+X))))
    pp <- sapply(ll, function(X) prod(m[X]))
    ll[[which.max(pp)]]
}

## Try it with a 2 by 5 matrix
M <- matrix(1:10, ncol=5)
M[maxProdElements(M)]
# [1]  2  4  6  8 10
prod(M[maxProdElements(M)])
# [1] 3840 
```

# emacs - Is It Possible To Replace Fringe Bitmaps With Text in Emacs?

> ID：16114700
> 
> 赞同：8
> 
> 时间：2013-04-19T23:03:11.630
> 
> 标签：emacs, fringe

I'd love to replace the ugly pixel arrows indicating truncated or wrapped lines with simple, tasteful text (maybe even a nice unicode character, like a `\u2026` ellipsis). Is this possible?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T10:45:46.953

不它不是。边缘“位图”实际上是位图，即 0/1 位的矢量，覆盖在边缘上。没有办法直接将任意 unicode 字符渲染到边缘。

您可以做的是自己将 unicode 字符渲染为 0/1 位图。任何体面的图像编辑器（例如 Gimp、Photoshop、Pixelmator、Paint.net 等）都可以做到这一点。然后将此位图转换为边缘位图矢量。[自定义边缘位](http://www.gnu.org/software/emacs/manual/html_node/elisp/Customizing-Bitmaps.html#Customizing-Bitmaps)图中描述了边缘位图的格式。

最终，您可以使用这些位图矢量来替换`left-arrow`、`right-arrow`（对于截断的行）`left-curly-arrow`、 和`right-curly-arrow`（对于连续的行）位图，使用函数`define-fringe-bitmap`.

但是，我想说这比它的价值更麻烦。边缘为 8 像素宽，因此您必须将漂亮的 unicode 字符压缩到 8x8 位图中。这意味着没有亚像素渲染，没有锯齿，没有字节码渲染，没有什么能让屏幕上的字符变得漂亮和花哨。它会和你替换的箭头一样丑陋。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-22T17:05:16.827

lunaryorn 的答案是正确的，但它可能超出了 Emacs 新手用户的能力——例如，像我这样的程序员爱好者。

`fringe-helper-convert`Nikolaj Schumacher 在他的 Fringe Helper 库中编写的函数——https: [//github.com/nschum/fringe-helper.el——](https://github.com/nschum/fringe-helper.el)使像我这样的 Emacs 爱好者可以轻松创建函数使用的向量`define-fringe-bitmap`（在 Emacs 的 C 源代码中定义）。我选择了pilcrow，但用户可以自由创建任何适合的图像——例如，使用大写字母`X`和句`.`点，用户可以创建字母的形状。

```
;; AUTHOR:  Nikolaj Schumacher -- https://github.com/nschum/fringe-helper.el
(defun fringe-helper-convert (&rest strings)
"Convert STRINGS into a vector usable for `define-fringe-bitmap'.
Each string in STRINGS represents a line of the fringe bitmap.
Periods (.) are background-colored pixel; Xs are foreground-colored. The
fringe bitmap always is aligned to the right. If the fringe has half
width, only the left 4 pixels of an 8 pixel bitmap will be shown.
For example, the following code defines a diagonal line.
\(fringe-helper-convert
\"XX......\"
\"..XX....\"
\"....XX..\"
\"......XX\"\)"
  (unless (cdr strings)
  ;; only one string, probably with newlines
    (setq strings (split-string (car strings) "\n")))
  (apply 'vector
    (mapcar
      (lambda (str)
        (let ((num 0))
          (dolist (c (string-to-list str))
            (setq num (+ (* num 2) (if (eq c ?.) 0 1))))
          num))
      strings))) 
```

下面的示例假定 a`frame-char-height`为 20 像素——因此位图图像与缓冲区中的文本高度相同。let-bound 代码段在行尾的右边缘创建一个枕形形状（评估代码段时的任何点）。该示例假定右边缘的宽度至少为 11——例如，`(add-to-list 'default-frame-alist '(right-fringe . 11))` 转换为字符串的 unicode 符号——`(char-to-string ?\uE000)`可能会替换为`" "`.

```
(define-fringe-bitmap 'pilcrow (fringe-helper-convert
  "......."
  "......."
  "......."
  "......."
  "......."
  ".XXXXXX"
  "XXXX.X."
  "XXXX.X."
  "XXXX.X."
  ".XXX.X."
  "...X.X."
  "...X.X."
  "...X.X."
  "...X.X."
  "...X.X."
  "...X.X."
  "......."
  "......."
  "......."
  "......."))

(let ((peol (point-at-eol)))
  (overlay-put (make-overlay peol peol) 'after-string
    (propertize (char-to-string ?\uE000) 'display
      '(right-fringe pilcrow font-lock-keyword-face)))) 
```

# node.js - Incorrect epoch date in node.js using thrift

> ID：16114702
> 
> 赞同：1
> 
> 时间：2013-04-19T23:03:30.797
> 
> 标签：node.js, integer, thrift, epoch

I seem to be getting a different epoch date value in node.js for a thrift object than what is stored in the mongo database and returned by the service

Thrift definition file (thrift v0.9.0), I have

```
struct Profile {
    ...
    4: i64 createDate,
    5: i64 lastUpdateDate 
```

Mongo record

```
"createdTimestamp" : NumberLong("1366334385361"),
"lastUpdatedTimestamp" : NumberLong("1366334385361") 
```

Node reports

```
createDate: 534785233,
lastUpdateDate: 534785233 
```

The generated node thrift client seems to have I64 referenced.

```
if (this.createDate !== null && this.createDate !== undefined) {
    output.writeFieldBegin('createDate', Thrift.Type.I64, 14);
    output.writeI64(this.createDate);
    output.writeFieldEnd();
} 
```

I appreciate any insight that comes along.

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T08:16:54.133

给定数字的二进制表示是：

```
1366334385361  ->  10011111000011111111000000010110011010001
534785233      ->  00000000000011111111000000010110011010001 
```

即，如果你取 1366334385361 的低 32 位，你得到 534785233。所以在你正在使用的程序或包的某个地方，它被转换/截断为 32 位整数，例如 int(1366334385361)

# java - JSTL accessing properties from java bean

> ID：16114704
> 
> 赞同：0
> 
> 时间：2013-04-19T23:03:39.503
> 
> 标签：java, jstl

I'm pretty new to JSTL so bear with me. I have a class I created that I'm try to access properties from in JSTL. I can't figure out what I'm doing wrong here. I'm not getting an error I"m just getting nothing when I try to call "getChildPath" Is it something in the java class that I'm doing that I'm not able to access it in the JSTL? Any help is greatly appreciated.

Java Class:

```
public class childPath{

private String childPath = ""; 

public childPath(Resource resource) throws RepositoryException{     
    ValueMap properties = resource.adaptTo(ValueMap.class);     
    childPath = properties.get("childPath", "");                    
}       
public String getChildPath() {
    return childPath;
} 
```

My JSTL Reference:

```
${getChildPath} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T23:20:33.103

首先，您应该修复您的命名以遵循 java 命名约定。

比如说，您已将一个 javabean (type `childPath`) 实例 (named `bean`) 传递给您的 jsp，在您的 jsp 中您可以`private String childPath`通过以下方式引用该属性：

```
${bean.childPath} 
```

使用属性/属性名称而不是方法（getter）名称。

# sql - unix 比 oracle 快的原因是什么？

> ID：16114706
> 
> 赞同：-7
> 
> 时间：2013-04-19T23:03:45.910
> 
> 标签：sql, oracle, unix

[这篇文章](http://www.analyticbridge.com/group/codesnippets/forum/topics/code-to-help-business-analysts)声称通过在 unix 中运行一个 sql 脚本，它的执行速度可以提高 20 倍？

这怎么可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T23:06:47.677

这看起来像作者在比较苹果和橙子（不，这太相似了，苹果和外星人怎么样）。他们所说的性能来自浏览器中显示的结果集（作为表格）

> 而不是等待 Brio 或 Toad 在浏览器中返回结果数小时（如果返回的行数超过 50,000 则崩溃）

与显示在文本文件中的结果集相比（谁说文本编辑器也不会崩溃？）

> 然后导出到 Unix 站）并生成查询结果（制表符分隔的文本文件）作为输出

# django - How to setup TINYMCE to point to static_files?

> ID：16114709
> 
> 赞同：1
> 
> 时间：2013-04-19T23:04:13.903
> 
> 标签：django, django-tinymce

I am using Django 1.5.1, and as we know since Django 1.3 the world of Media and statis files have been separated for good reasons.

To my surprise django-tinymce's [documentation](http://django-tinymce.readthedocs.org/en/release-1.5/installation.html#configuration) is referring to how TINYMCE_JS_URL is pointing by default to the media url.

```
TINYMCE_JS_URL (default: settings.MEDIA_URL + 'js/tiny_mce/tiny_mce.js') 
```

That doesn't make much sense. As in Django 1.3+ we have the static_url for self hosted js and css files. But trying to change that is confusing and doesn't work.

This is how I usually setup my static files settings:

```
STATIC_ROOT = '/home/kave/project-env/site/static/'
STATIC_URL = '/static/'
STATICFILES_DIRS = ('/home/kave/project-env/site/static_files/',) 
```

In the static_files directory I have extracted the TINYMCE zipfile: e.g. the path is like this:

```
/home/kave/project-env/site/static_files/tinymce/js/tinymce/tinymce.min.js 
```

Then I have set the settings like this:

```
TINYMCE_JS_URL = STATIC_URL + 'tinymce/js/tinymce/tinymce.min.js'
TINYMCE_JS_ROOT = STATIC_ROOT + 'tinymce/js/tinymce' 
```

However when the app runs, I see a plain textfield instead of TINYMCE.

WHat could I have overlooked please?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T16:59:43.867

我终于弄明白了，希望它可以帮助别人。

您需要指向通过 pip 自动安装的内置 tiny_mce。无需下载任何东西。

```
<script type="text/javascript" src="{{ STATIC_URL }}tiny_mce/tiny_mce.js"></script> 
```

对于管理屏幕，确保你有这个：

```
class TinyMCEAdmin(admin.ModelAdmin):
    class Media:
        js = ('/static/tiny_mce/tiny_mce.js', )

admin.site.register(MyModel, TinyMCEAdmin) 
```

并且不要忘记 settings.py 中的配置

```
TINYMCE_DEFAULT_CONFIG = {
    # General options
    'mode' : "textareas",
    'theme' : "advanced",
    'plugins' : "pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template,wordcount,advlist,autosave",

    # Theme options
    'theme_advanced_buttons1' : "bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,fontselect,fontsizeselect,", #fullscreen,code",
    'theme_advanced_buttons2' : "bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,|,forecolor,backcolor",
    #'theme_advanced_buttons3' : "tablecontrols,|,hr,sub,sup,|,charmap",

    'theme_advanced_toolbar_location' : "top",
    'theme_advanced_toolbar_align' : "left",
    'theme_advanced_statusbar_location' : "bottom",
    'theme_advanced_resizing' : 'true',

    #Example content CSS (should be your site CSS)
    #content_css : "/css/style.css",

    'template_external_list_url' : "lists/template_list.js",
    'external_link_list_url' : "lists/link_list.js",
    'external_image_list_url' : "lists/image_list.js",
    'media_external_list_url' : "lists/media_list.js",

    # Style formats
    'style_formats' : [
        {'title' : 'Bold text', 'inline' : 'strong'},
        {'title' : 'Red text', 'inline' : 'span', 'styles' : {'color' : '#ff0000'}},
        {'title' : 'Help', 'inline' : 'strong', 'classes' : 'help'},
        {'title' : 'Table styles'},
        {'title' : 'Table row 1', 'selector' : 'tr', 'classes' : 'tablerow'}
    ],

    'width': '700',
    'height': '400'
} 
```

除此之外，请确保将模型内的 HTMLField 用于任何模型文本字段。在 forms.py 中，如果您不使用 modelform，您还需要定义新的小部件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-19T06:17:55.577

使用 django-tinymce

我们必须配置以下

> 设置.py

```
INSTALLED_APPS = [
  # .......
  'tinymce',
  # .......
]

TINYMCE_JS_URL = '%sjavascript/tiny_mce/' % (STATIC_URL) 
```

> 网址.py

```
urlpatterns = [
  # .....
  url(r'^tinymce/', include('tinymce.urls')),
  # .....
] 
```

# web-services - 独立的用户认证模块

> ID：16114710
> 
> 赞同：0
> 
> 时间：2013-04-19T23:04:19.223
> 
> 标签：web-services, architecture, module

在我的组织中，我们正在向模块化软件架构迈进。我们仍处于起步阶段，目前正在开发用户身份验证 (UA) 模块。

我正在寻找有关用户身份验证模块方面的最佳实践的信息。

我目前的想法如下：

*   客户端使用登录详细信息查询 UA 模块
*   UA 模块检查登录详细信息。如果它们是有效的，UA 模块创建并存储访问令牌，将令牌与经过验证的用户的唯一 ID 相关联。
*   令牌被发送回客户端。客户端存储令牌。
*   每当客户端需要身份验证时，它都会使用令牌查询 UA 模块。如果令牌有效，UA模块返回用户的唯一ID，如果令牌无效，则返回错误码。

我将不胜感激对这些方法的任何批评。

我也有兴趣知道如何处理代币的积累。显然，如果用户选择注销，则令牌将被删除。

我的想法是令牌应该有与之相关的到期日期，并且工作进程应该定期清理这些令牌。这是做事的正确方式吗？

请评论！参考文件也值得赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T02:51:49.537

您可以将令牌与问题时间戳一起存储在数据库字段中，并与客户端 ID 进行一对一映射。因此，当您重新发行令牌时，您会覆盖旧令牌。当用户注销时，取消令牌。

当用户使用令牌发送请求时，查看令牌是否已过期（即当前时间> 颁发时间+ 过期时间段）。这将使您免于运行 Worker 来清理旧令牌。

# python - Python 2.7 - Quotes added to command when using Popen to execute from variable

> ID：16114713
> 
> 赞同：0
> 
> 时间：2013-04-19T23:04:36.227
> 
> 标签：python, python-2.7

I'm trying to send a command through a socket from client to server to execute a command on the server and send the output back to me. Everything works fine if the command is one word with no options. However if I use an option such as `netstat -an or dir c:\` then the command isn't recognized and from the output it looks like quotes are put around the command before being executed (`'"netstat -an"'` is not recognized as an internal or external command). I know they aren't saved in the variable this way because I printed it before being executed to error check. Please help. Here is what my code looks like:

```
commout = subprocess.Popen([data], stdout=subprocess.PIPE, shell=True)

(out, err) = commout.communicate() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T23:07:14.973

尝试制作`data`一个参数数组（第一个是实际命令）。

例如：

```
commout = subprocess.Popen(['netstat', '-an'], stdout=subprocess.PIPE, shell=True) 
```

第一个元素是表示实际命令的字符串 ( `netstat`)，下一个元素是表示第一个参数 ( `-an`) 的字符串。

澄清一下，`Popen(['echo', 'a', 'b']`相当于`echo a b`在命令行上，而`Popen(['echo', 'a b']`将相当于代替（即，在and`echo "a b"`之间有空格的单个参数。`a``b`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T23:08:04.997

如果您传递一个列表，则其中的每个项目将单独引用。在这种情况下，只需传递一个字符串：

```
subprocess.Popen(data, stdout=subprocess.PIPE, shell=True) 
```

# c++ - DBX Output Different When Using "." or "->"

> ID：16114716
> 
> 赞同：1
> 
> 时间：2013-04-19T23:05:09.147
> 
> 标签：c++, dbx

There's a function that's not working and I don't understand why, and DBX isn't helping. Below is what I'm talking about.

```
(dbx 12) print ((CCFundExpenseObject *)s1)->GetFundBranchGroup()
((class CCFundExpenseObject *) s1)->GetFundBranchGroup() = -2019
(dbx 13) print (*((CCFundExpenseObject *)s1)).GetFundBranchGroup()
(*((class CCFundExpenseObject *) s1)).GetFundBranchGroup() = 1 
```

Logically, both lines should have the same result, right?

If you want more context, here's an explanation of the code:

*   **GetFundBranchGroup()** returns a short stored in `CCFundExpenseObject`. That's it.
*   **s1** is a `void*`

# angularjs - 中继器中的角开关

> ID：16114718
> 
> 赞同：1
> 
> 时间：2013-04-19T23:05:19.723
> 
> 标签：angularjs, angularjs-ng-repeat

给定一个列表，例如

```
var list = ['one','two','three']; 
```

在角度，我想遍历列表只呈现某些项目。就像是：

```
<ul ng-controller="main">
    <li ng-repeat="item in list" ng-switch on="item">
        <span ng-switch-when="one">{{item}}</span>
    </li>
</ul> 
```

并让输出看起来像这样：

```
<ul>
    <li><span>one</span></li>
</ul> 
```

相反，我得到：

```
<ul>
    <li><span>one</span></li>
    <li></li>
    <li></li>
</ul> 
```

我尝试过 ng-hide，但效率非常低，因为我有大量项目并且只想显示一两个，而 ng-hide 会渲染所有项目，然后用 css 隐藏不活动的项目。这是一个问题，因为我在一个 JQuery Mobile 应用程序中执行此操作，该应用程序试图装饰所有列表项，包括隐藏项，从而降低性能。

JSFiddle 在[http://jsfiddle.net/ghendricks/MXu3a/](http://jsfiddle.net/ghendricks/MXu3a/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T23:38:37.607

你是对的，`ng-hide`不应该在这里使用，这是[过滤器](http://docs.angularjs.org/api/ng.filter%3afilter)的工作。您可以提供自定义函数来过滤列表：http: [//jsfiddle.net/ERMVj/](http://jsfiddle.net/ERMVj/)

```
$scope.selectOne = function (input) { return input == "two" || input == "one"; }; 
```

```
 <li ng-repeat="l in list | filter:selectOne">
        <span>{{l}}</span>
    </li> 
```

# ruby-on-rails - Ransack 的 collection_select 和 HABTM 返回未定义的方法

> ID：16114728
> 
> 赞同：0
> 
> 时间：2013-04-19T23:06:15.697
> 
> 标签：ruby-on-rails, has-and-belongs-to-many, ransack

我一遍又一遍地查看我的代码，但我看不到我的问题。

我有两个 Models Person 和 Credential。他们有 HABTM 关系。

人

```
class Person < ActiveRecord::Base
  attr_accessible :credential_ids 
  has_and_belongs_to_many :credentials

  UNRANSACKABLE_ATTRIBUTES = ["id", "hidden_note", "created_at", "updated_at"]

  def self.ransackable_attributes auth_object = nil
    (column_names - UNRANSACKABLE_ATTRIBUTES) + _ransackers.keys
  end
end 
```

凭据

```
class Credential < ActiveRecord::Base
  attr_accessible :description, :name
  has_and_belongs_to_many :people

  UNRANSACKABLE_ATTRIBUTES = ["id", "created_at", "updated_at"]

  def self.ransackable_attributes auth_object = nil
    (column_names - UNRANSACKABLE_ATTRIBUTES) + _ransackers.keys
  end

end 
```

这是我在 People index.html.erb 中的表格：

```
<%= search_form_for @search, :class => 'no-bottom-margin form-inline' do |f| %>
    %= f.collection_select(:credentials_id_eq , Credential.all, :id, :name )%>
    <div class='actions'><%= f.submit "Search", :class => 'btn btn-primary btn-large' %></div>
<% end %> 
```

最后，这是我得到的错误。

```
undefined method `credentials_id_eq' for #<Ransack::Search:0x00000105aa4f28> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T22:40:46.363

因此，如果您像这样使模型的属性 UNRACKSACKABLE ：

```
UNRANSACKABLE_ATTRIBUTES = ["id", "created_at", "updated_at"] 
```

您不能将 Ransack 的 :model_attribute_predicate 函数与该特定属性一起使用。像这样，`:credentials_id_eq`

现在很明显，但是我想在进行自定义查询时对用户隐藏 id，但让我自己可以使用它。我更改了 ransack 功能`:credentials_name_cont`，它工作得很好。此外，`id`从 unracksackable 属性列表中删除也可以。

# linux - How to sort with linux command, while treat 3 lines as 1 block and sort based on the first line of each block

> ID：16114731
> 
> 赞同：1
> 
> 时间：2013-04-19T23:06:38.110
> 
> 标签：linux, sorting

How to sort with linux command, while treat 3 lines as 1 block and sort based on the first line of each block?

I know I can concat 3 lines into 1 line and then sort. But the file is simply too big, and I don't wan't to generate a temp file just for sorting.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T23:21:48.757

`sort`*对文本文件*的行进行排序，其中一条记录始终由换行符分隔。作为一个例外，它也支持`\0`作为记录分隔符，但无法更改记录分隔方式的*逻辑*。

您可以利用上述异常来实现*decorate-sort-undecorate*模式，如下所示：

```
chunk | sort -z -t'
' -k1 | unchunk 
```

`chunk`将每三行组合成`line1\0line2\0line3\n`，以允许`sort -z`将三行块作为单个记录获取，并按记录`-t'\n' -k1`中的第一个字段排序。`unchunk`只是全部变`\0`回`\n`.

用 Perl 表示，`chunk`看起来像这样：

```
perl -pe 'chomp;$_.=($.%3)?"\n":"\0"' 
```

（类似的咒语可以很容易地用`awk`or编写`sed`，而 C 版本不会更长。）

`unchunk`不超过`tr '\0' '\n'`。因此完整的排序是：

```
perl -pe 'chomp;$_.=($.%3)?"\n":"\0"' | sort -z -t'
' -k1 | tr '\0' '\n' 
```

给定输入文件

```
b
2nd b line
bla 3rd b line
a
some a line
other a line
x
first x line
other x line 
```

...上述管道产生：

```
a
some a line
other a line
b
2nd b line
bla 3rd b line
x
first x line
other x line 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T23:36:17.230

下面的单行代码在 bash 中完成了这项工作。它只是将数据读入一个由三行三行组成的 perl 数组，在第一行排序，然后打印所有内容。

您可以轻松地将排序谓词更改为例如按数字排序（`<=>`用于此）或以您喜欢的任何其他方式。这个使用字典顺序。

要使其在 Windows 中工作，只需切换引号：在外部使用“”，在内部使用 ''。

```
$ perl -e 'while(<>){push@a,[$_,scalar<>,scalar<>]}for(sort{$a->[0]cmp$b->[0]}@a){print join"",@$_}' < foo.txt 
```

这假设输入在`foo.txt`.

实际上我刚刚意识到你可以只连接而不是使用内部数组。结果更短！

```
$ perl -e 'while(<>){push@a,$_.scalar<>.scalar<>}for(sort @a){print}' < foo.txt 
```

# jquery - 禁用按钮，直到输入和文件字段获得值

> ID：16114733
> 
> 赞同：0
> 
> 时间：2013-04-19T23:06:40.027
> 
> 标签：jquery, forms

我在这里有一个表格：

```
<form action="#" method="post">
Text: <input type="type" name="text" id="text" /><br />
File: <input type="file" name="fileInput" id="fileInput" /><br />
<select name="cars">
<option value="volvo">1</option>
<option value="saab">2</option>
<option value="mercedes">3</option>
<option value="audi">4</option>
</select><br />
<input type="submit" value="submit" disabled />
</form>
<div id="result"></div> 
```

我想禁用提交按钮，直到所有字段（包括下拉菜单）都已填写或选择。

我的代码是：

```
$(document).ready(
 function() {
                $('form > input').keyup && $('input:file').change(function() {
                  var empty = false;
                  $('form > input').each(function() {
                   if ($(this).val() == '') {
                   empty = true;
                   }
                   });

                    if (empty) {
                  $('#submit').attr('disabled', 'disabled');
                  } else {
                 $('#submit').removeAttr('disabled');
                  }
                   });
                  };
function(){
    $('input:file').change(
        function(){
            if ($(this).val()) {
                $('input:submit').attr('disabled',false); 
            } 
        }
        );
}); 
```

当输入有一些文本时，请帮助激活按钮，下拉有一个值，输入类型有一个文件被选中。

我的小提琴在这里：http: [//jsfiddle.net/E42XA/214/](http://jsfiddle.net/E42XA/214/)

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T23:15:04.897

```
$("form > *").change(function() {
  var fields = $("form input, form select").not("input[type='submit']");
  var filledFields = fields.filter(function() {
    return $(this).val().length > 0;
  });
  if (filledFields.length == fields.length) {
    $("input[type='submit']").removeAttr("disabled");
  } else {
    $("input[type='submit']").attr("disabled", "disabled");
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T00:07:24.380

我只会在必要时验证（并警告为什么禁用）：

```
<input id='mySUBMIT' type="button" value="submit"/> 
```

Safari 选择第一个`<option>`而不实际单击一个，所以我也将添加为第一个： `<option value=""></option>`

**JS：**

```
$('#mySUBMIT').bind('click', function() {
    var blanks = $('form').find('select,input:not(:button)').filter(function () {
         return ($(this).val() == '');
    });
    if (blanks && blanks.length > 0) { alert("All fields MUST be filled out/selected!"); }
    else { $("form").submit(); }
}); 
```

[更新的小提琴](http://jsfiddle.net/E42XA/218/)

# iphone - iOS Overlay 视图总是位于顶部？

> ID：16114735
> 
> 赞同：1
> 
> 时间：2013-04-19T23:06:45.763
> 
> 标签：iphone, ios, objective-c, ipad

我无法在这方面找到任何东西，并且觉得它可能以简单的方式是不可能的。

我可以有一个视图吗，例如一个加载栏，它一直位于所有其他视图控制器上，直到我选择关闭它，但同时任何底层视图仍然可以交互？有点像系统视图。在展示新的视图控制器时要坚持不懈。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T23:09:38.993

将其添加为您的`window`. 像这样：

```
UIView *myView = ...
[self.window addSubview:myView]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-20T00:04:12.090

而不是像@JackyBoy 建议的那样将其添加到窗口中，而是将其添加到窗口的rootViewController 的视图中。这将与设备一起旋转。如果只是将其添加到窗口中，则可能会遇到旋转问题。

```
UIView *myView = ...
[UIApplication sharedApplication].keyWindow.rootViewController.view addSubview:myView]; 
```

# perl - 计算映射到某个值的键的数量

> ID：16114739
> 
> 赞同：1
> 
> 时间：2013-04-19T23:07:02.460
> 
> 标签：perl, hash, counting

我有以下哈希

```
my %hash = (
    w1 => '0',
    e2 => '1',
    r1 => '2',
    o3 => '1',
    h4 => '0',
    t5 => '1',
); 
```

我想获取映射到哈希中每个值的键的数量。

```
3 keys map to value 1.
1 key map to value 2.
2 keys map to value 0. 
```

我想在不使用模块中的函数的情况下做到这一点。

我想到的一种方法是遍历哈希值。如果该值有一个键，则增加该键的计数器。问题是事先知道这些值是什么，以便我可以为每个值初始化计数器。可能有一个更简单的解决方案。我认为正则表达式可能有效。

尝试 1

```
my $string;
foreach my $value (value %hash) {
$string = join(",", $value);
}

# count the number of occurrences for each value (separated by commas) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T23:17:35.150

使用另一个哈希来计算出现次数。

```
#!/usr/bin/perl
use warnings;
use strict;

my %hash = (
    w1 => '0',
    e2 => '1',
    r1 => '2',
    o3 => '1',
    h4 => '0',
    t5 => '1',
);

my %count;
for my $value (values %hash) {
    $count{$value}++;
}

for my $value (keys %count) {
    my $count = $count{$value};

    print "$count key", $count == 1 ? q() : 's',
          " map",       $count == 1 ? 's' : q(),
          " to $value.\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T23:13:25.367

您可以遍历哈希：

```
my %counterhash = ();

while ( ($key, $value) = each %hash )
{
  #print "key: $key, value: $hash{$key}\n";
  $counterhash{$value}++;
} 
```

之后，`counterhash`将每个值的哈希值与该值的出现次数

您不必初始化每个特定的密钥`$value`。它最初是未定义的，但在递增时被解释为零。

文档说：

> 您需要在 Perl 中声明的唯一内容是报告格式和子例程（有时甚至不需要子例程）。一个变量保存未定义的值（“undef”），直到它被分配一个定义的值，这是“undef”以外的任何值。当用作数字时，“undef”被视为0；当用作字符串时，它被视为空字符串，“”；当用作未分配给的引用时，它被视为错误。

# java - Android导航 - 找到垂直于通过两个位置绘制的线的线

> ID：16114742
> 
> 赞同：0
> 
> 时间：2013-04-19T23:07:28.010
> 
> 标签：java, android, math, trigonometry

我在纬度和经度（A 和 B）中指定了两个位置。在这些位置之间是一条线（绿色）。我在第三个位置（我）。我如何确定我离这条线有多远以及离它最近的点离我所在的位置（灰线）的方向是什么？

我正在寻找以度为单位的航向和以米为单位的距离。如果我能找到灰线与绿线相交的位置，那么我可以使用 Android Location 内置函数来计算距离和航向。

有人知道 A、B 和我的经纬度位置如何解决上述问题吗？

请记住，“我”不知道他是处于第一种情况还是第二种情况，这是一个导航问题。

另外，如果您还记住我的数学很烂，并且像您与 15 岁的孩子交谈一样回答，我将不胜感激。

此外，我还使用 Google 地球手工制作了一个示例。所以给出：

```
double aLat = 51.44376;
double aLng = -2.86525;

double bLat = 51.43574;
double bLng = -2.87026;

double meLat = 51.4391;
double meLng = -2.86437;

Answer should be:
Distance to closest point on line (aprox): 235 meters
Heading to closest point on line (aprox): 109 degrees 
```

一如既往，感谢您的帮助，

亚当

![在此处输入图像描述](https://i.stack.imgur.com/pnTB1.png)

# java - 实现一个扩展 Rectangle 类的子类 Square

> ID：16114743
> 
> 赞同：-1
> 
> 时间：2013-04-19T23:07:31.453
> 
> 标签：java, subclass

//实现一个扩展矩形类的子类Square。在构造函数中，接受正方形中心的 x 和 y 位置以及边长。调用 Rectangle 类的 setLocation 和 setSize 方法。在 Rectangle 类的文档中查找这些方法。还提供一个计算并返回正方形面积的方法 getArea。编写一个示例程序，询问中心和边长，然后打印出正方形（使用从 Rectangle 继承的 toString 方法）和正方形的面积。

//好吧...所以这是最后一分钟，但我不明白我的代码有什么问题，它给了我一个错误，即 square 无法解析为类型...所以这是我的类：

```
 import java.awt.Rectangle;

 public class Squares22 extends Rectangle 
{

public Squares22(int x, int y, int length) {
    setLocation(x - length / 2, y - length / 2);
    setSize(length, length);
}

public int getArea() {
    return (int) (getWidth() * getHeight());
}

public String toString() {
    int x = (int) getX();
    int y = (int) getY();
    int w = (int) getWidth();
    int h = (int) getHeight();
    return "Square[x=" + x + ",y=" + y + ",width=" + w + ",height=" + h
           + "]";
}
}

//And this is my tester class...

import java.util.Scanner;

public class Squares22Tester

  {
   public static void main(String[] args) 
  {

Scanner newScanx =  new Scanner(System.in);
Scanner newScany =  new Scanner(System.in);
Scanner newScanl =  new Scanner(System.in);

System.out.println("Enter x:");
String x2 = newScanx.nextLine();
System.out.println("Enter y:");
String y2 = newScany.nextLine();
System.out.println("Enter length:");
String l2 = newScanl.nextLine();

int x = Integer.parseInt(x2);
int y = Integer.parseInt(y2);
int length = Integer.parseInt(l2);

  Square sq = new Square(x, y, length); 
  System.out.println(sq.toString()); 

  }
} 
```

//任何人都可以帮助我的作业在午夜到期.. 它说在编译时 square 无法解析为测试器类的类型....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T13:53:23.437

Square 不是您班级的名称。类的名称是“Squares22”。这就是无法识别“Square”的原因。`Square`在测试中更改为`Squares22`或反之亦然。这应该可以解决您的问题。

# drop-down-menu - 如何修复菜单上的阴影，显示小提琴示例

> ID：16114746
> 
> 赞同：0
> 
> 时间：2013-04-19T23:08:19.013
> 
> 标签：drop-down-menu, menu, css

提前谢谢大家。我一直在研究 CSS 和 HTML 中的菜单，但我不知道如何使阴影出现在整个菜单项 + 子菜单周围，而不仅仅是下拉的部分。这应该涵盖它，但它不是：

我的代码在这里：http: [//jsfiddle.net/Clare12345/Nq4rV/1/](http://jsfiddle.net/Clare12345/Nq4rV/1/)。

```
 #listitems:hover { box-shadow: 2px 4px 8px #888888; }
    #menu ul li:hover ul li { display:block; box-shadow: 2px 4px 8px #888888; }

<div id="menu">  
    <ul>
        <li><div id="listitems"><div id="menuheader">Steps:</div><a href="#nogo">Section One</a> <div id="smalltext">Description Text here</div>
            <ul>
                <li><a href="#nogo">A</a></li>
                <li><a href="#nogo">B</a></li>                                                              
    </ul> </div> 
```

我尝试使用 :hover 在几乎所有东西上添加阴影，它通常只是在我已经拥有的阴影上添加了一个额外的阴影。阴影显示在顶部、底部和左侧的所有正确位置周围，但右侧仅显示“此处的描述文本”及其上方的位置，包括菜单顶部不在阴影中。

我真的不知道如何解决它。如果有人愿意提供帮助，我将不胜感激！

编辑：我还试图弄清楚如何在每个“步骤”中放置多个“部分”。我真的不确定如何在列表中执行此操作。我是否需要制作几个列表并将它们彼此相邻浮动？我仍然希望能够很好地利用 box-shadow！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T23:18:06.263

如果您`top`从 中删除属性`#menu ul li:hover ul`并设置`position: relative;`为`#listitems:hover`，您将获得非常漂亮的阴影。

[http://jsfiddle.net/Nq4rV/2/](http://jsfiddle.net/Nq4rV/2/)

请编辑您的标记。如果您想在页面上多次重复某些选择器，请使用类而不是 ID。

# android - 一种编写 Android 键盘布局应用程序的简单方法

> ID：16114748
> 
> 赞同：0
> 
> 时间：2013-04-19T23:08:25.560
> 
> 标签：android, keyboard, adk

我想编写一个 android 应用程序，用单手优化的[Coffee++](http://coffeeplusplus.z11.de/)键盘布局替换标准键盘。

在这个过程中我会遇到哪些特殊问题？我想这样的项目会深入到android核心，因为键盘是一个必不可少的东西。

[从本教程](http://www.sitepoint.com/writing-your-first-android-app-2/)中描述的 Android 开发人员工具 (ADT)-Eclipse 插件开始是否明智？

或者有没有更好的方法来实现这个目标？

我是 Android 编程新手，但在 PHP、Mysql 和 javascript 方面非常坚定，我已经使用 Eclipse for PHP

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T23:15:10.600

> 我想这样的项目会深入到android核心，因为键盘是一个必不可少的东西。

不，您可以创建一个`InputMethodService`即为您的键盘的实现。您的 Android SDK 安装中有一个示例软键盘（如果您选择从 SDK 管理器下载示例代码），并且还有一些开源输入法，例如 Hacker's Keyboard。然后`InputMethodService`将其作为普通 Android 应用程序的一部分分发，如果用户选择，用户可以选择激活您的输入法。

> 从本教程中描述的 Android 开发人员工具 (ADT) — Eclipse 插件开始是否明智？

这是一个很好的起点。我还建议您花一些时间学习 Java，然后开发普​​通的 Android 应用程序，以了解 Android 的工作原理。

当您准备好自己工作时`InputMethodService`，[文档](http://developer.android.com/guide/topics/text/creating-input-method.html)可以帮助指导您，欢迎您返回此处询问更具体的问题。但是，请记住，编写软键盘并不是那么普遍，因此可能有点缺乏支持资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-02T18:17:01.557

Android 中的软键盘称为 InputMethod，您不必太深入就可以创建一个。创建 InputMethod 相当简单，尤其是在键盘是普通按钮类型的情况下。

您可以查看以下链接以获得开始： [Android 的官方教程](http://developer.android.com/guide/topics/text/creating-input-method.html)，或者您也可以查看[本](http://code.tutsplus.com/tutorials/create-a-custom-keyboard-on-android--cms-22615)教程以获得良好的开始。我还建议下载可供开发人员修改的[LatinIME键盘的源代码。](https://android.googlesource.com/platform/packages/inputmethods/LatinIME/)

# regex - 正则表达式增量解析

> ID：16114749
> 
> 赞同：1
> 
> 时间：2013-04-19T23:08:57.990
> 
> 标签：regex, perl, unix, stream, terminal

是否有支持逐个字符解析正则表达式的语言或工具？

我认为这可能相当于“流上的正则表达式”，这似乎是即将推出的 Perl 版本 6 的功能之一。

基本上我想这样做是因为我正在构建一个在伪终端上转换终端流的工具，我想到应该实现的最终灵活性是允许规范 regex-replace表达式。

用例是我想允许我的鼠标滚动事件被传递给一个天真的程序，例如`less`寻呼机，这意味着我的工具（`less`在 PTY 上产生）将做一些事情，比如发布`\x1b[?1000h`打开鼠标报告的代码，然后随后将此后收到的每个鼠标滚轮转义代码（例如`\x1b[M!!`（最后几个字符编码终端内的鼠标位置，应忽略但也应剥离））转换为`\x1b[A`向上箭头代码。

正如您所看到的，能够指定一个适用于标准输入终端读取流的正则表达式以生成要发送到从属 pty 的翻译流将是理想的。

我是否需要等待 Perl 6 才能实现这一点？为什么正则表达式引擎通常需要整个字符串可用，一定有特殊原因？

很明显，我在这里不需要正则表达式的全部功能。例如，我可以推测，支持回溯可能会使流解析正则表达式变得不可能。

因此，由于我不需要回溯，因此可能存在某种提供流 API 的轻量级正则表达式引擎。似乎利用某种形式的解析系统（如果存在合适的解析系统）比构建任意东西更聪明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T03:22:34.050

看起来[s2p](http://perldoc.perl.org/s2p.html)是我可以使用的一个例子。

特别是，能够设置`$|`为不进行行缓冲的潜力。

其实我不认为这会奏效。它似乎是围绕线条构建的，并使用`s`运算符来运行正则表达式。

# php - 使用 CakePHP 导入文件时遇到问题

> ID：16114750
> 
> 赞同：1
> 
> 时间：2013-04-19T23:09:06.047
> 
> 标签：php, cakephp

我正在尝试将[phpQuery](https://code.google.com/p/phpquery/)导入我的一个控制器，但我遇到了一些错误。它保存在我的供应商文件夹和插件文件夹中。

我尝试将以下内容添加到我的 ItemsController 中，但没有一个有效

```
include_once(__DIR__.'/vendors/phpQuery.php'); 

App::uses('phpQuery', 'Vendor');

App::import('phpQuery', 'Vendor'); 
```

所有这些都会导致找不到方法的错误或

```
Error: The application is trying to load a file from the phpQuery plugin 
```

我什至尝试将它放在插件文件夹中，我现在很幸运。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T23:30:55.040

导入供应商文件（特别是如果它们不遵守常规约定，例如*每个文件一个类*），有时需要“正常”的一些变体`App::import()`

文档中的这一部分描述了这些变体：[加载供应商文件](http://book.cakephp.org/2.0/en/core-utility-libraries/app.html#loading-vendor-files)

我测试了这个，这没有问题；

```
App::import('Vendor', 'phpQuery'); 
```

（加载“应用程序/供应商/phpQuery.php”）

# google-chrome-app - 尝试使用 chrome.fileSystem chooseEntry 时出现权限错误

> ID：16114752
> 
> 赞同：2
> 
> 时间：2013-04-19T23:09:26.913
> 
> 标签：google-chrome-app

尝试使用时

```
chrome.fileSystem.chooseEntry({
    type: 'openFile'
},chooseEntryCallback)` 
```

在*Canary 28.0.1483.0*上，我在控制台中收到以下错误：

> chrome.fileSystem 不可用：您无权访问此 API。确保您的 manifest.json 中包含所需的权限或清单属性。

我只需要**读取**权限，这就是我`permissions`在清单文件中的选项的样子：

```
"permissions": [
  {
    "fileSystem": []
  },
  "contextMenus",
  "clipboardWrite",
  "storage"
], 
```

这适用于*稳定版 26.0.1410.64*，所以问题是是否有一些需要更新的清单权限更改。

注意：Chrome 在 Windows 8 上运行，当通过拖放打开文件时，它会正确打开。所以我猜它有问题`chooseEntry`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T21:29:06.223

根据@sowbug 的评论，我通过将`fileSystem`权限更改为列表项来解决此问题：

```
"permissions": [
  "fileSystem"
], 
```

编辑：要包括扩展`write`权限：

```
"permissions": [
  "fileSystem",
  "fileSystem.write"
], 
```

# jquery - 将 Promise 与 Q 相结合

> ID：16114755
> 
> 赞同：3
> 
> 时间：2013-04-19T23:09:37.703
> 
> 标签：jquery, promise, q

在 jquery 中，我可以按如下方式组合 Promise：

```
var Promise = $.when(func1.execute(), func2.execute());
Promise.done(function (data1, data2) {
// code here
} 
```

你将如何使用 Q 重写它？

还。在这种情况下使用 Q 比 jquery 有什么好处？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T16:06:24.770

简单的答案：

```
var promise = Q.all([func1.execute(), func2.execute()]);
promise.spread(function (data1, data2) {
  // code here
})
.done(); 
```

注释：

```
//make `promise` be a promise for the array
var promise = Q.all([func1.execute(), func2.execute()]);

//use spread to spread the array across the arguments of a function
promise.spread(function (data1, data2) {
  // code here
})
//use done so errors are thrown
.done(); 
```

中的概念`Q`定义得更清楚。Promise 表示可能尚不可用的**单个值。**这非常精确地并行同步代码。

那么，为了表示多个值，我们只需使用一个数组。 `Q.all`是一个辅助方法，它接受一个 promise 数组，并返回一个包含它们已实现值的数组的 promise。如果数组中的任何 Promise 被拒绝，则生成的 Promise 也将被拒绝。

因为在这种情况下，我们确切地知道数组的长度，并且基本上只需要单独的项目，所以`spread`使用`Q`. 当对数组的 promise 调用时，spread 获取数组中的项目并将它们分散到函数的所有参数中。你可以简单地做到：

```
//make `promise` be a promise for the array
var promise = Q.all([func1.execute(), func2.execute()]);
promise.done(function (data) {
  var data1 = data[0];
  var data2 = data[1];
  // code here
}); 
```

这在概念上可能更简单，但干净得多。我强烈建议您通读[https://github.com/kriskowal/q/wiki/Coming-from-jQuery](https://github.com/kriskowal/q/wiki/Coming-from-jQuery)，因为这对来自 jQuery 的人有一些非常有用的建议。如果您发现其中有任何可以改进的地方，您可以对其进行编辑，并希望能帮助未来的人们做出同样的转变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T06:56:45.550

经过几分钟的研究，问题中没有什么是无法发现的，但是这里有：

## 结合承诺

[https://github.com/kriskowal/q/wiki/API-Reference#promise-for-array-methods](https://github.com/kriskowal/q/wiki/API-Reference#promise-for-array-methods)

## Q和jQuery的比较

[使用 jQuery 或 Q.Js 实现承诺](https://stackoverflow.com/questions/13610741/use-jquery-or-q-js-for-promises)

尽管这远非一个普遍的事实，但您会发现 Q 在服务器端 Node.js 编程中更受欢迎，而 jQuery 更适合在客户端（在浏览器中）使用。

如果像我一样，你来到 Q 之前已经学习了 jQuery，那么你会发现 Q 非常混乱。特别是[Promises/A 提案](http://wiki.commonjs.org/wiki/Promises/A)中的声明：

> 如果回调抛出错误，返回的 Promise 将被移动到失败状态

在 jQuery 中是比喻性的解释，在 Q 中是字面意义上的解释。因此，虽然 Q 强调抛出/捕获错误（实际上和类比在它的一些方法的命名中），但没有这样的强调，实际上没有这样的概念，存在于jQuery。

上述声明在 [Promises/A+] 提案的第 3.2.4.6.2 节中更正式地表达，导致拒绝模型（连同第 3.2.4.6 节的其余部分）你会认为完全正确或不必要的僵化取决于你的观点。据我了解，Q 符合第 3.2.4.6 节；jQuery 没有。

# windows - 创建一个新的 WinRT 投影？

> ID：16114760
> 
> 赞同：4
> 
> 时间：2013-04-19T23:10:32.440
> 
> 标签：windows, winapi, visual-c++, windows-runtime

我想知道是否有人知道创建 WinRT 语言投影的任何资源或有任何经验。我正在研究如何为 Haskell 创建投影。我发现了一些关于现有投影的博客和视频，它们提到了为其他语言创建新投影的概念，但我无法找到很多关于从哪里开始创建一个的概念。我对 COM 的工作原理有所了解，并且已经熟悉了暴露于 C++/CX 的 WinRT API。谢谢。

# css - position:absolute !important 在 Firefox 中不起作用

> ID：16114761
> 
> 赞同：3
> 
> 时间：2013-04-19T23:10:47.930
> 
> 标签：css, firefox, position, absolute

[我的网站](http://myscholly.com/iphone.php)

我的问题：在所有其他浏览器中，我可以将幻灯片绝对定位在一个框架内。然而，在 Firefox 中，页面呈现并且 Firefox 自动将幻灯片显示为`position: relative`.

代码应该是什么：

```
top: 95px; left: 22px; position: absolute !important; 
```

这是什么：

```
position: relative; top: 95px; left: 22px; 
```

为什么 Firefox`position: absolute`在这种情况下不支持？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T23:24:52.973

在您的 CSS 文件中，指定`position: absoulte !important`for`#fadeshow1` *可能*有效

```
#fadeshow1{position: absolute !important} 
```

此外，在`js/fadeslideshow.js`第 48 行中，`setting.$wrapperdiv=$('#'+setting.wrapperid).css({position:'relative', visibility:'visible'....`尝试使用更改位置值`absolute`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T23:11:57.247

这很奇怪。但是，去掉!important。

# google-app-engine - 具有多个不等式的 App Engine NDB 查询？

> ID：16114762
> 
> 赞同：2
> 
> 时间：2013-04-19T23:10:49.507
> 
> 标签：google-app-engine, app-engine-ndb

这里唯一的两个答案基本上涉及重组数据库以适应这种限制，但我不确定在我的情况下如何做到这一点。

我有一个包含数千个联系人的列表，每个联系人都有许多属性。我正在制作一个能够同时过滤多个属性的页面。

例如：年龄 < 15，添加日期 > 15 天前，位置 == 圣克鲁斯等。可能需要大量的不等式过滤器。如何在 GAE 中实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T23:39:30.783

根据[文档（对于python）](https://developers.google.com/appengine/docs/python/ndb/queries)，

> 限制：数据存储区对查询实施了一些限制。违反这些将导致它引发异常。**例如，组合过多的过滤器、对多个属性使用不等式，或者将不等式与不同属性的排序顺序组合在一起，目前都是不允许的**。此外，引用多个属性的过滤器有时需要配置二级索引。

如果您在几个月后回来查看，这可能会改变。GAE 的变化很快。

但现在，您必须进行多个查询并将它们组合到您的代码中。

# jquery - jQuery 周历 - 并排显示冲突事件？

> ID：16114763
> 
> 赞同：0
> 
> 时间：2013-04-19T23:10:58.927
> 
> 标签：jquery, calendar

我正在使用 jQuery 周历（[https://github.com/robmonie/jquery-week-calendar/wiki](https://github.com/robmonie/jquery-week-calendar/wiki)）来显示大量不同的事件。其中一些（许多）事件重叠。

是否可以并排显示事件（类似于谷歌的日历网络应用程序）而不是让它们重叠？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T16:49:54.823

是的，而且它易于实施。当您在 jquery 中调用您的日历并设置一些参数（例如 timeslotsPerHour 等）时，只需添加：

```
overlapEventsSeparate : true, 
```

在你设置了 allowCalEventOverlap 之后就可以了。

# bash - Bash 字符串，传递给 GDB

> ID：16114764
> 
> 赞同：1
> 
> 时间：2013-04-19T23:11:08.680
> 
> 标签：bash, sh

我正在尝试编写一个 bash 脚本来自动重启我拥有的应用程序。但有时我想让程序在 GDB 中运行。无论如何，这不是问题所在。

如果你看这个要点： [https ://gist.github.com/Lillecarl/5421446](https://gist.github.com/Lillecarl/5421446)

您将在第 91 行看到我“调用”文件 gdbcommands。我必须拥有这个外部文件，这真的真的真的很磨砺我的齿轮，你们中的任何人都对如何将它合并到 wowadmin.sh 有任何建议吗？如果必须，它可以是一个单独的文件。但我希望它完全在 sh 文件中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T11:57:04.153

您可以使用 -ex 开关传递多个命令。由于某种原因，它没有记录在 man 中（至少在我的 CentOS 上），但出现在完整的 gdb 手册[http://sourceware.org/gdb/current/onlinedocs/gdb.html#Invocation](http://sourceware.org/gdb/current/onlinedocs/gdb.html#Invocation)

```
 gdb -ex 'print "one"' -ex 'print "two"' my_prog 
```

# excel - 将长行文本/数字拆分为多行特定长度

> ID：16114769
> 
> 赞同：1
> 
> 时间：2013-04-19T23:12:36.720
> 
> 标签：excel

我有一行很长的文字，就像这样

```
76561197997162298
76561197997094193
76561197996891032
76561197996814030
76561197995825191
76561197995316081
76561197995286134 
```

我想要一种简单的方法将它分成 100 行长的输出，我可以导入到 excel 中，除非 excel 本身可以做到，尽管我找不到方法。只要我不需要做任何编码，就可以用我可以在 Windows PC 上运行的任何语言来完成。如果有一些程序可以做到这一点，我也可以使用它。否则我将不得不使用宏记录器设计一些黑客工作

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T23:21:40.443

用这个脚本使用 JitBit 宏记录器无论如何谢谢 =)

```
 WAIT FOR USER : 192 : 2 : 0 : 0
Keyboard : ShiftLeft : KeyDown
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : Down : KeyDown
DELAY : 10
Keyboard : Down : KeyUp
DELAY : 10
Keyboard : ShiftLeft : KeyUp
DELAY : 10
Keyboard : ControlLeft : KeyDown
DELAY : 10
Keyboard : ControlLeft : KeyDown
DELAY : 10
Keyboard : ControlLeft : KeyDown
DELAY : 10
Keyboard : ControlLeft : KeyDown
DELAY : 10
Keyboard : ControlLeft : KeyDown
DELAY : 10
Keyboard : ControlLeft : KeyDown
DELAY : 10
Keyboard : ControlLeft : KeyDown
DELAY : 10
Keyboard : ControlLeft : KeyDown
DELAY : 10
Keyboard : ControlLeft : KeyDown
DELAY : 10
Keyboard : ControlLeft : KeyDown
DELAY : 10
Keyboard : ControlLeft : KeyDown
DELAY : 10
Keyboard : ControlLeft : KeyDown
DELAY : 10
Keyboard : ControlLeft : KeyDown
DELAY : 10
Keyboard : ControlLeft : KeyDown
DELAY : 10
Keyboard : ControlLeft : KeyDown
DELAY : 10
Keyboard : ControlLeft : KeyDown
DELAY : 10
Keyboard : ControlLeft : KeyDown
DELAY : 10
Keyboard : ControlLeft : KeyDown
DELAY : 10
Keyboard : ControlLeft : KeyDown
DELAY : 10
Keyboard : ControlLeft : KeyDown
DELAY : 10
Keyboard : ControlLeft : KeyDown
DELAY : 10
Keyboard : ControlLeft : KeyDown
DELAY : 10
Keyboard : ControlLeft : KeyDown
DELAY : 10
Keyboard : ControlLeft : KeyDown
DELAY : 10
Keyboard : ControlLeft : KeyDown
DELAY : 10
Keyboard : ControlLeft : KeyDown
DELAY : 10
Keyboard : ControlLeft : KeyDown
DELAY : 10
Keyboard : ControlLeft : KeyDown
DELAY : 10
Keyboard : X : KeyDown
DELAY : 10
Keyboard : X : KeyUp 
```

享受！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-21T16:54:51.477

实际上，这是完成您所要求的最佳方法！享受

```
http://www.softpedia.com/get/System/File-Management/Text-File-Splitter.shtml 
```

它被称为文本文件拆分器 2.0.4

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T16:29:39.743

也许是这样的？

```
Option Explicit

Sub LongRowImport()

        With ActiveSheet.QueryTables.Add(Connection:= _
            "TEXT;C:\pathname\long_text_row.txt", _
            Destination:=Range("A1"))
            .Name = "long_text_row"
            .FieldNames = True
            .RowNumbers = False
            .FillAdjacentFormulas = False
            .PreserveFormatting = True
            .RefreshOnFileOpen = False
            .RefreshStyle = xlInsertDeleteCells
            .SavePassword = False
            .SaveData = True
            .AdjustColumnWidth = True
            .RefreshPeriod = 0
            .TextFilePromptOnRefresh = False
            .TextFilePlatform = 775
            .TextFileStartRow = 1
            .TextFileParseType = xlFixedWidth
            .TextFileTextQualifier = xlTextQualifierDoubleQuote
            .TextFileConsecutiveDelimiter = False
            .TextFileTabDelimiter = True
            .TextFileSemicolonDelimiter = False
            .TextFileCommaDelimiter = False
            .TextFileSpaceDelimiter = False
            .TextFileColumnDataTypes = Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1) 
            .TextFileFixedColumnWidths = Array(100, 200, 300, 400, 500, 600, 700, 800, 900, 1000, 1100)
            .TextFileTrailingMinusNumbers = True
            .Refresh BackgroundQuery:=False
        End With
End Sub 
```

这是从数据 - 导入外部数据 - 导入数据 (Excel 2003) 派生的宏。

# php - 在 Javascript 和 PHP 中部分编码 URL（url 调整）

> ID：16114773
> 
> 赞同：0
> 
> 时间：2013-04-19T23:13:10.443
> 
> 标签：php, javascript, regex, apache, urlencode

当我说我想对 URL 进行部分编码时，这可能会有些奇怪，但是我陷入了这种情况，似乎我没有其他解决方案......

这是我的代码片段

```
 $url = isset($_GET['u']) ? esc_url($_GET['u']) : '';
        $image = isset($_GET['i']) ? $_GET['i'] : '';

   maybeappend = '<a href="?ajax=photo_thickbox&amp;i=' + encodeURIComponent(img.src) +
   '&amp;u=<?php echo urlencode($url); ?>&amp;height=400&amp;width=500" title="" 
    class="thickbox"><img src="' + img.src + '" ' + img_attr + '/></a>'; 
```

它取自 wordpress`/wp-admin/press-this.php` 问题是，我无法通过`Press this`书签发布到我的网站

我搜索了谷歌，研究了wordpress论坛，发现我需要`Press this`在浏览器的书签工具栏中点击按钮。

但对我来说，这不是一个解决方案，为什么？显然，我不能教每个访问者在他们的浏览器中进行此更改..所以我必须编辑驻留在服务器上的代码...

我该如何编辑`encodeURIComponent(img.src)`，`<?php echo urlencode($url); ?>`所以它不编码`HTTP://`部分 url，

说我有一个 url ' [http://www.google.com](http://www.google.com)我希望它被编码为`www.google.com`

有什么建议吗？

我怎样才能实现我的目标？可能是一些正则表达式？（不知道正则表达式：（）

这将是什么代码调整？

感谢您的帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T23:32:47.883

您确实可以使用正则表达式来过滤`http://`url 的一部分（如果我理解得很好，这就是您想要做的）。

应该`https?://(.*)`选择您想要的部分网址（该`s?`部分考虑了潜在的安全链接）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T23:33:56.047

您需要确保任何匹配的字符串都位于字符串的开头

**Javascript** 使用 String.replace 和正则表达式：

```
url.replace( /^(http|https):\/\//, '' ); 
```

`^`表示字符串的开头

**PHP** 使用 str_replace()：[php.net/str_replace](http://php.net/str_replace)

```
if( strpos( $url, 'http' ) == 0 ){
    str_replace( array( 'http://', 'https://'), '', $url, 1 );
} 
```

`strpos`也可以返回 a`FALSE`所以确保你使用`==`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T23:31:56.580

首先使用 substr 删除 http 部分，然后应用 urlencode 然后重新附加 http 部分。

可以使用等效的 JavaScript 函数在 JavaScript 中应用相同的方法。

```
$encoded = 'http://' . urlencode(substr($url, -7)); 
```

# c# - 如何使用 DateTime.Today 和 TextBox.Text 的比较验证器？

> ID：16114778
> 
> 赞同：3
> 
> 时间：2013-04-19T23:13:44.913
> 
> 标签：c#, javascript, asp.net, .net, validation

**目标：** 我有一个“EndDate”文本框，可以在用户更改它时更新。我希望能够检查/验证 EndDateTextBox.Text 中的日期并确保它小于今天的日期（格式例如：4/19/2013）。

我试过两种方法：

**方法一**

```
<asp:TextBox ID="HiddenTodayDate" Visible = "false" runat="server" />
<asp:CompareValidator ID="CompareEndTodayValidator" Operator="GreaterThan" Type="Date" 
     ControlToValidate="HiddenTodayDate" ControlToCompare="EndDateTextBox" 
     ErrorMessage="'End Date' must be before today's date" runat="server" /> 
```

我的 Page_Load 方法中的以下内容：

```
HiddenTodayDate.Text = DateTime.Today.ToShortDateString(); 
```

**方法二**

```
<asp:HiddenField ID="HiddenTodayDate" runat="server" />
<asp:CompareValidator ID="CompareEndTodayValidator" Operator="GreaterThan" Type="Date" 
     ControlToValidate="HiddenTodayDate" ControlToCompare="EndDateTextBox" 
     ErrorMessage="'End Date' must be before today's date" runat="server" /> 
```

我的 Page_Load 方法中的以下内容：

```
HiddenTodayDate.Value = DateTime.Today.ToShortDateString(); 
```

对于精通代码的人来说，显然将`TextBox`可见设置为 false 也可以防止`Validator`看到它，但我当时并不知道它并想记录我的过程。当我尝试方法二时，我在调试时遇到以下错误：

> 无法验证 `CompareEndTodayValidator`HiddenTodayDate`引用的控件。`ControlToValidate property`
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.Web.HttpException：无法验证“CompareEndTodayValidator”的 ControlToValidate 属性引用的控件“HiddenTodayDate”。
> 
> 源错误：
> 
> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

那么有没有办法以某种方式实现我的目标而不必在某处显示 DateTime.Today ？我宁愿让我的代码尽可能简单和干净，并且不使用 Javascript，但如果 Javascript 提供了唯一的解决方法，那就这样吧。代码将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-08T20:31:40.930

在部分由于 Tim 的帖子而了解了 ValueToCompare 属性后，我能够四处搜索并找到一个与我的问题类似的问题，其答案几乎有效（必须将 ASP.NET 比较类型更改为字符串）： [使用 CompareValidator 控件将用户输入日期与今天的日期进行比较](https://stackoverflow.com/questions/2264215/using-the-comparevalidator-control-to-compare-user-input-date-with-todays-date)

**这是我的代码的样子：**

ASP.NET：

```
<asp:CompareValidator ID="CompareEndTodayValidator" Operator="LessThan" type="String" ControltoValidate="EndDateTextBox" ErrorMessage="The 'End Date' must be before today" runat="server" /> 
```

。网：

（在 Page_Load 方法中）

```
CompareEndTodayValidator.ValueToCompare = DateTime.Now.ToShortDateString(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T23:25:45.623

您可以以编程方式将[`ValueToCompare`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.comparevalidator.valuetocompare.aspx)属性设置为今天：

```
<asp:comparevalidator runat="server" Id="CompareEndTodayValidator"
  errormessage="The date must be less than today"
  controltovalidate="EndDate" type="Date" Operator="LessThan"
  ValueToCompare="<%= DateTime.Today.ToShortDateString() %>" /> 
```

（未经测试，如果`<%=`不工作使用`<%#`，那么你必须记住调用`Page.DataBind()`某处（fe in `Page_Load`）如果它不在数据绑定上下文中）

# visual-studio-2010 - 在类中创建一个矩形

> ID：16114779
> 
> 赞同：0
> 
> 时间：2013-04-19T23:13:46.307
> 
> 标签：visual-studio-2010, xna, xna-4.0

所以基本上我想弄清楚如何在我发射的每个子弹周围的一个类中实现矩形。这是一款导弹指挥型游戏。我想不通的是我会在哪里声明 Rectangle 以及如何将它传递给游戏。

这是我的火箭课程的代码......

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Graphics;

namespace ShootingRocket
{
public class Rocket
{
    public Texture2D DrawTexture { get; set; }
    public Vector2 Position { get; set; }
    public Vector2 Direction { get; set; }
    public float Rotation { get; set; }
    public float Speed { get; set; }
    public bool IsShooting { get; set; }

    int timeBetweenShots = 100;
    int shotTimer = 0;

    public Rocket(Texture2D texture, Vector2 position, Vector2 direction, float rotation, float Speed)
    {
        this.DrawTexture = texture;
        this.Position = position;
        this.Direction = direction;
        this.Rotation = rotation;
        this.Speed = Speed;

        this.IsShooting = false;
    }

    public void Update(GameTime gameTime)
    {
        this.Position += Direction * Speed;

        if (IsShooting)
        {
            shotTimer += gameTime.ElapsedGameTime.Milliseconds;

            if (shotTimer > timeBetweenShots)
            {
                shotTimer = 0;

                ProjectileManager.AddBullet(this.Position, this.Direction, 12, 2000, BulletType.Player);
            }
        }
    }

    public void Draw(SpriteBatch spriteBatch)
    {
        spriteBatch.Draw(
            this.DrawTexture,
            this.Position,
            null,
            Color.White,
            this.Rotation,
            new Vector2(
                this.DrawTexture.Width / 2,
                this.DrawTexture.Height / 2),
            1.0f,
            SpriteEffects.None,
            1.0f); 
```

这是我的子弹类的代码......

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Graphics;

namespace ShootingRocket
{
public enum BulletType { Player, Enemy }

public class Bullet
{
    public BulletType Type { get; set; }
    public Texture2D DrawTexture { get; set; }
    public Vector2 Position { get; set; }
    public Vector2 Direction { get; set; }
    public float Speed { get; set; }
    public int ActiveTime { get; set; }
    public int TotalActiveTime { get; set; }

    public Bullet(Texture2D texture, Vector2 position, Vector2 direction, float speed, int activeTime, BulletType type)
    {
        this.DrawTexture = texture;
        this.Position = position;
        this.Direction = direction;
        this.Speed = speed;
        this.ActiveTime = activeTime;
        this.Type = type;

        this.TotalActiveTime = 0;
    }

    public void Update(GameTime gameTime)
    {
        this.Position += Direction * Speed;

        this.TotalActiveTime += gameTime.ElapsedGameTime.Milliseconds;

    }

    public void Draw(SpriteBatch spriteBatch)
    {
        spriteBatch.Draw(
             DrawTexture,
             Position,
             null,
             Color.White,
             0f,
             new Vector2(
                  DrawTexture.Width / 2,
                  DrawTexture.Height / 2),
             1.0f,
             SpriteEffects.None,
             0.8f);
    }
}
} 
```

最后但并非最不重要的是我的 Projectile Manager 课程......

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Media;

namespace ShootingRocket
{
public class ProjectileManager : DrawableGameComponent
{
    static List<Bullet> bullets = new List<Bullet>();
    static Texture2D playerBulletTexture;

    SpriteBatch spriteBatch;

    public ProjectileManager(Game game, SpriteBatch spriteBatch)
        : base(game)
    {
        game.Components.Add(this);
        playerBulletTexture = game.Content.Load<Texture2D>("Bullet");

        this.spriteBatch = spriteBatch;
    }

    public override void Update(GameTime gameTime)
    {
        for(int i = 0; i < bullets.Count; i++)
        {
            bullets[i].Update(gameTime);

            if (bullets[i].TotalActiveTime > bullets[i].ActiveTime)
                bullets.RemoveAt(i);
        }

        base.Update(gameTime);
    }

    public override void Draw(GameTime gameTime)
    {
        foreach (Bullet b in bullets)
        {
            b.Draw(spriteBatch);
        }

        base.Draw(gameTime);
    }

    public static void AddBullet(Vector2 position, Vector2 direction, float speed, int activeTime, BulletType type)
    {
        bullets.Add(new Bullet(playerBulletTexture, position, direction, speed,       activeTime, type));
    }
}
} 
```

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T14:06:54.687

```
public Rectangle collisionRec {get; private set;} 
```

然后在子弹的更新方法中更新矩形坐标。

```
collisionRec = new Rectangle(position.X, position.Y, spriteWidth, spriteHeight); 
```

您可能正在维护 game1 或某处中所有这些子弹的列表。

```
foreach (Bullet b in bulletList)
{
if (b.collisionRec.Intersects(someOtherRec))
    {
     //Do some stuff.
    }
} 
```

# knockout.js - 淘汰递归模板选择性绑定

> ID：16114784
> 
> 赞同：4
> 
> 时间：2013-04-19T23:14:40.347
> 
> 标签：knockout.js

在这个例子中，我有一个嵌套模板来显示像缩进输出一样的树视图，但是叶节点上呈现的 HTML 不是我所期望的。如何让叶节点呈现预期的 html 并且不包含子容器 div？

如果我将 if 绑定放在模板绑定之外，我会收到一个 javascript 错误：

`Uncaught Error: Multiple bindings (if and template) are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.`

注意：使用 if 绑定注释`<!-- ko if: children().length > 0 -->`确实可以删除不需要的元素，但是生成的 html 中充满了注释，我更愿意保持它干净，因为我可能有数百个叶节点。

我尝试使用 2 个模板，一个带容器，一个不带容器，并为名称设置条件，但模板始终呈现 nodeTempl：`data-bind="template: { name: (children().length > 0) ? 'nodeTempl' : 'leafTempl', foreach: children }"`

我想我真的想根据当前正在处理的孩子的状态应用不同的模板。

叶节点是这样渲染的

```
<div>
    <div data-bind="text: name">Node 1-1-1</div>            
    <div class="indent-1" data-bind="template: {if: children().length &gt; 0,  name: 'nodeTempl', foreach: children }"></div>
</div> 
```

但我希望它像这样呈现：

```
<div>
    <div data-bind="text: name">Node 1-1-1</div>            
</div> 
```

这是设置：

HTML

```
<style type="text/css">
    .indent-1 {
        margin-left: 20px;
    }
</style>

<script id="nodeTempl" type="text/html">
    <div>
        <div data-bind="text: name"></div>            
        <div class="indent-1" data-bind="template: {if: children().length > 0,  name: 'nodeTempl', foreach: children }"></div>
    </div>
</script>

<div data-bind="template: { name: 'nodeTempl', foreach: children }"></div> 
```

脚本

```
var node = function (config) {
    var self = this;
    self.name = ko.observable(config.name);
    self.children = ko.observableArray([]);
    if ($.isArray(config.children)) {
        for (var i = 0; i < config.children.length; i++) {
            self.children.push(new node(config.children[i]));
        }
    }
};

ko.applyBindings(new node(
    {
        name: 'root',
        children: [
            { name: 'Node1', children: [{name: 'Node 1-1', children: [{name: 'Node 1-1-1'}]},{name: 'Node 1-2'}]},
            {name: 'Node2',children: [{name: 'Node 2-1'},{name: 'Node 2-2'}]},
            {name: 'Node3'},
        ]
    }
    )); 
```

输出

```
<div data-bind="template: { name: 'nodeTempl', foreach: children }">
    <div>
        <div data-bind="text: name">Node1</div>            
        <div class="indent-1" data-bind="template: {if: children().length &gt; 0,  name: 'nodeTempl', foreach: children }">
    <div>
        <div data-bind="text: name">Node 1-1</div>            
        <div class="indent-1" data-bind="template: {if: children().length &gt; 0,  name: 'nodeTempl', foreach: children }">
    <div>
        <div data-bind="text: name">Node 1-1-1</div>            
        <div class="indent-1" data-bind="template: {if: children().length &gt; 0,  name: 'nodeTempl', foreach: children }"></div>
    </div>
</div>
    </div>

    <div>
        <div data-bind="text: name">Node 1-2</div>            
        <div class="indent-1" data-bind="template: {if: children().length &gt; 0,  name: 'nodeTempl', foreach: children }"></div>
    </div>
</div>
    </div>

    <div>
        <div data-bind="text: name">Node2</div>            
        <div class="indent-1" data-bind="template: {if: children().length &gt; 0,  name: 'nodeTempl', foreach: children }">
    <div>
        <div data-bind="text: name">Node 2-1</div>            
        <div class="indent-1" data-bind="template: {if: children().length &gt; 0,  name: 'nodeTempl', foreach: children }"></div>
    </div>

    <div>
        <div data-bind="text: name">Node 2-2</div>            
        <div class="indent-1" data-bind="template: {if: children().length &gt; 0,  name: 'nodeTempl', foreach: children }"></div>
    </div>
</div>
    </div>

    <div>
        <div data-bind="text: name">Node3</div>            
        <div class="indent-1" data-bind="template: {if: children().length &gt; 0,  name: 'nodeTempl', foreach: children }"></div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-20T00:16:32.113

您走在正确的轨道上，表明您需要两个模板。模板`name`参数可以是返回数组中每个项目的模板名称的函数。

你可以像这样创建一个函数：

```
function nodeTemplate(node) {
    return node.children().length > 0 ? 'nodeTempl' : 'nodeLeafTempl';
} 
```

并将您的观点改为：

```
<script id="nodeTempl" type="text/html">
    <div>
        <div data-bind="text: name"></div>            
        <div class="indent-1" data-bind="template: {name: nodeTemplate, foreach: children }"></div>
    </div>
</script>

<script id="nodeLeafTempl" type="text/html">
    <div>
        <div data-bind="text: name"></div>            
    </div>
</script>

<div data-bind="template: { name: nodeTemplate, foreach: children }"></div> 
```

# php - wordpress 上的 Ajax 请求返回 404 错误

> ID：16114787
> 
> 赞同：0
> 
> 时间：2013-04-19T23:15:05.693
> 
> 标签：php, jquery, ajax, wordpress

在我的自定义主题文件夹上的 function.php 文件中，我有这个：

```
function getPrices(){
    $price = get_post_meta($_REQUEST["post_id"], "price_one", true);
    $results['price'] = $price;
    $results = json_encode($results);
    die($results);
}

    add_action('wp_ajax_getPrices', 'getPrices');
    add_action('wp_ajax_nopriv_getPrices', 'getPrices'); 
```

在 js 文件中我有这个：

```
$('ul.people_adult li').click(function(){
var post_id = $("#post_id").val();
                jQuery.ajax({
                    type:"POST",
                    dataType : "json"
                    url: "http://localhost/wordpress/wp-admin/admin-ajax.php",
                    data: {
                        action: 'getPrices',
                        post_id: post_id
                    },
                    complete:function(data){
                        console.log(data.price);
                    }
                    });
}); 
```

当我单击以下错误消息时： `POST http://localhost/wp-admin/admin-ajax.php 404 (Not Found)`

此外，当我提醒返回的数据时，它会显示对象 Object，但是当我将其记录到控制台时，它会显示响应页面的所有 html 代码。

有任何想法吗 ？？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T14:17:56.377

最大的问题是我提供的 URL 错误，并且由于某种原因直到 Jackson 和 cointilt 提到它时才注意到。

我的 function.php 文件中也有拼写错误。

这是我的问题的答案。

```
function getPrices(){
    $the_id = $_REQUEST["post_id"];
    $results[] = get_post_meta($the_id, "price_one", true);
    $results[] = get_post_meta($the_id, "price_two", true);
    $results[] = get_post_meta($the_id, "price_three", true);
    $results[] = get_post_meta($the_id, "price_four", true);
    $results[] = get_post_meta($the_id, "price_five", true);
    $results[] = get_post_meta($the_id, "price_six", true);
    $results[] = get_post_meta($the_id, "price_seven", true);
    $results[] = get_post_meta($the_id, "price_eight", true);
    $results = json_encode($results);
    die($results);
}
add_action('wp_ajax_getPrices', 'getPrices');
add_action('wp_ajax_nopriv_getPrices', 'getPrices'); 
```

并在 js 文件上

```
$('ul.people_adult li').click(function(){
    var post_id = $("#post_id").val();
                        jQuery.ajax({
                            type:"POST",
                            dataType : "json",
                            url: "http://localhost/wordpress/wp-admin/admin-ajax.php",
                            data: {
                                action: 'getPrices',
                                post_id: post_id
                            },
                            success:function(response){
                                $("#price_est_person").html(response[0]);
/*Do some stuff with response[1], response[2 etc]*/
                            }
                            });
    }); 
```

# ruby-on-rails-3 - 将包含与 AREL 函数一起使用

> ID：16114789
> 
> 赞同：1
> 
> 时间：2013-04-19T23:15:13.650
> 
> 标签：ruby-on-rails-3, arel

我的应用程序中有以下类：

```
class Prompt
  has_many :entries
end

class Entry
  belongs_to :prompt
  belongs_to :user

  def self.approved
    where("is_approved")
  end
end

class User
  has_many :entries
end 
```

我想显示给定提示的所有“已批准”条目的表格以及他们的用户`belong_to`。要生成此列表，我执行以下查询：

`prompt = Prompt.find(prompt_id, :include => {:entries => :user})`

但是当我运行以下循环时，它会为每个用户进行查询，而不是使用预取的用户

```
prompt.entries.approved.each do |entry|
   puts entry.user.id
end 
```

我该如何重写它，以便它不会对循环的每次迭代进行查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T00:15:50.913

它对每个用户进行查询，因为*entries.approved*正在为每个条目调用查询 *where('is_approved')*。您的 find 语句只是提取所有提示并创建可以访问其子属性的对象。我认为您需要的是一个 where 语句，它选择所有具有属性“is_approved”的条目，然后通过循环打印它们的 id。

也许尝试类似 @entries = Entry.where(is_approved: true).includes(entries: user) )

然后

entry.user.each 做 |user| 将 user.id 放在末尾

希望那有帮助。

# ios - iOS 主屏幕界面 - 引擎盖下

> ID：16114791
> 
> 赞同：2
> 
> 时间：2013-04-19T23:15:42.340
> 
> 标签：ios, safari, homescreen

由于一些特定的观察到的限制，我正在与社区联系以了解 iOS 添加到主屏幕功能。

设想：

带有 SSL 数字证书的 Web 应用程序。iPhone 4 和 5 具有相同的行为，描述如下：

从 Safari 启动应用程序，通过 Wifi、3G 和 4G 可靠地加载应用程序。

在您“添加到主屏幕”以便在“全屏”模式下运行 Web 应用程序之后，会出现问题（应用程序加载不一致）。至少有一半的时间会出现“空白屏幕”并且网络活动停止。在这一点上，没有其他任何事情发生。但是一旦我回到 Safari 加载应用程序，它就可以正常加载。

此行为发生在多个设备上。就好像主屏幕图标应用程序是 Safari 的一个有限子集，在某些情况下缺乏“稳健性”。

有没有人知道这个功能到底是什么，它的限制是什么，以及在 Apple 支持站点上的哪个位置记录和支持这个功能？还有其他人有这种问题吗？

谢谢 .....

# php - filesize() [function.filesize]: 统计失败

> ID：16114794
> 
> 赞同：0
> 
> 时间：2013-04-19T23:15:51.907
> 
> 标签：php, fopen, filesize

尝试在 wordpress 插件文件夹中回显文件的 HTML 内容时出现以下错误。

> 警告：filesize() [function.filesize]: stat failed for [http://bestideabox.com/wp-content/plugins/jww-namechord/includes/template-files/single-form.html](http://bestideabox.com/wp-content/plugins/jww-namechord/) in /home/bestidea/public_html /wp-content/plugins/jww-namechord/includes/core.php 在第 44 行

这是读取文件的函数：

```
return jww_display_file( 
        plugins_url( 'template-files/'.$template.'.html',__FILE__ ) 
    );

        function jww_display_file( $fileToRead ){

            //Open the file and read it
            $handle = fopen( $fileToRead, "r" );
            $contents = fread( $handle, filesize( $fileToRead ) );
            fclose( $handle );

            //return it
            return $contents;
        } 
```

我完全不知所措。任何帮助，将不胜感激。

* * *

不知道如何将此标记为答案，但感谢 DaveRandom 我有一个解决方案：

> http:// 包装器不支持 stat()。您不能 filesize() HTTP URL。如果服务器返回一个，您可以使用响应的 Content-Length: 标头，但您实际上不需要在这里。只需将该函数的整个主体替换为 return file_get_contents($fileToRead); 你已经准备好了。– 戴夫随机

给那些标记为重复的人。您可以从答案中看到它不是同一个问题。感谢大家的帮助！

# c# - 为多个私有函数创建一个类对象的实例

> ID：16114795
> 
> 赞同：0
> 
> 时间：2013-04-19T23:15:59.217
> 
> 标签：c#, class, object

我想创建一个类对象的实例，以供多个私有函数以相同的形式使用。我目前拥有的是我创建一个新对象的每个函数，如下所示：

```
 Player thePlayer = new Player(int.Parse(StrBox.Text), int.Parse(DexBox.Text), int.Parse(IntBox.Text), int.Parse(PerBox.Text), int.Parse(HPBox.Text), int.Parse(SPBox.Text), int.Parse(MPBox.Text), int.Parse(EXPBox.Text), int.Parse(ARBox.Text), int.Parse(CTHBox.Text), int.Parse(GoldBox.Text), int.Parse(MeleeDMGBox.Text), int.Parse(MagicDMGBox.Text), int.Parse(StealthBox.Text), int.Parse(DetectBox.Text), int.Parse(LevelBox.Text)); 
```

我必须把它放到四个不同的函数中。您可以看到它是一个具有许多变量的巨大对象。我希望能够创建一次以供所有对象使用，因为当我创建一个新变量时，我最终不得不将这个野兽复制粘贴到我的函数中。

我怎样才能做到这一点？我是 OOP 的新手，所以这就是我试图做的，不知道它是否会起作用：

```
 public void PlayerInitialize()
    {
        string P = "p";
        Player thePlayer = new Player(int.Parse(StrBox.Text), int.Parse(DexBox.Text),      int.Parse(IntBox.Text), int.Parse(PerBox.Text), int.Parse(HPBox.Text), int.Parse(SPBox.Text), int.Parse(MPBox.Text), int.Parse(EXPBox.Text), int.Parse(ARBox.Text), int.Parse(CTHBox.Text), int.Parse(GoldBox.Text), int.Parse(MeleeDMGBox.Text), int.Parse(MagicDMGBox.Text), int.Parse(StealthBox.Text), int.Parse(DetectBox.Text), int.Parse(LevelBox.Text), P);
    }
  private void AddStrButton_Click_1(object sender, EventArgs e)
    {
 Player thePlayer;
        //int Str, int Dex, int Intel, int Per, int HP, int SP, int MP, int EXP, int AR, int CTH, int Gold, int MelDMG, int MagDMG, int Stlth, int Det
        //Player thePlayer = new Player(int.Parse(StrBox.Text), int.Parse(DexBox.Text), int.Parse(IntBox.Text), int.Parse(PerBox.Text), int.Parse(HPBox.Text), int.Parse(SPBox.Text), int.Parse(MPBox.Text), int.Parse(EXPBox.Text), int.Parse(ARBox.Text), int.Parse(CTHBox.Text), int.Parse(GoldBox.Text), int.Parse(MeleeDMGBox.Text), int.Parse(MagicDMGBox.Text), int.Parse(StealthBox.Text), int.Parse(DetectBox.Text), int.Parse(LevelBox.Text), );

        if (thePlayer.StatPoints >= 1 && thePlayer.Strength <= 7)
        {
            thePlayer.Strength++;
            thePlayer.StatPoints--;
            thePlayer.HitPoints += 6;
            thePlayer.MeleeDMG += 2;
            StrBox.Text = thePlayer.Strength.ToString();
            SPBox.Text = thePlayer.StatPoints.ToString();
            HPBox.Text = thePlayer.HitPoints.ToString();
            MeleeDMGBox.Text = thePlayer.MeleeDMG.ToString();
        }
        else if (thePlayer.Strength >= 8)
        {
            MessageBox.Show("You are at the limits of your mortal abilities.");
        }
        else if (thePlayer.StatPoints <= 0)
        {
            MessageBox.Show("Earn more experience!");
        }
        /*
        MessageBox.Show("PCStats.StatPoints equals" + PCStats.StatPoints);
        MessageBox.Show("PCStats,Strength equals" + PCStats.Strength);
        MessageBox.Show("IntPCSP Equals" + IntPCSP.ToString());
        MessageBox.Show("IntPCStr Equals" + IntPCStr.ToString());
        */
    } 
```

不幸的是，我收到以下错误：使用未分配的局部变量“thePlayer”

关于如何创建对象一次而不是每次在函数中使用它的任何想法？

这是课程表以供进一步参考：

```
 namespace PlayerPC
{
class Player
{
    public void PlayerGraphic(string pcGraphic)
    {
    PCGraphic = pcGraphic;
    }
    //player stats
    public Player(int Str, int Dex, int Intel, int Per, int HP, int SP, int MP, int EXP, int AR, int CTH, int Gold, int MelDMG, int MagDMG, int Stlth, int Det, int Lvl, string pcGraphic)
    {
        Strength = Str;
        Dexterity = Dex;
        Intelligence = Intel;
        Perception = Per;
        HitPoints = HP;
        StatPoints = SP;
        MindPoints = MP;
        ExperiencePoints = EXP;
        Armor = AR;
        ChanceToHit = CTH;
        GoldCoins = Gold;
        MeleeDMG = MelDMG;
        MagicDMG = MagDMG;
        Stealth = Stlth;
        Detect = Det;
        Level = Lvl;
        PCGraphic = pcGraphic;
    }
    public bool LevelUp()
    {
        if(this.Level == 1 && this.ExperiencePoints >= 25)
        {
            this.Level++;
            this.StatPoints++;
            MessageBox.Show("You have accended to Level " + this.Level);
            return true;
        }
        else if (this.Level == 2 && this.ExperiencePoints >= 125)
        {
            this.Level++;
            this.StatPoints++;
            MessageBox.Show("You have accended to Level " + this.Level);
            return true;
        }
        else if (this.Level == 3 && this.ExperiencePoints >= 625)
        {
            this.Level++;
            this.StatPoints++;
            MessageBox.Show("You have accended to Level " + this.Level);
            return true;
        }
        else if (this.Level == 4 && this.ExperiencePoints >= 1125)
        {
            this.Level++;
            this.StatPoints++;
            MessageBox.Show("You have accended to Level " + this.Level);
            return true;
        }
        else if (this.Level == 5 && this.ExperiencePoints >= 1850)
        {
            this.Level++;
            this.StatPoints++;
            MessageBox.Show("You have accended to Level " + this.Level);
            return true;
        }
        else if (this.Level == 6 && this.ExperiencePoints >= 2900)
        {
            this.Level++;
            this.StatPoints++;
            MessageBox.Show("You have accended to Level " + this.Level);
            return true;
        }
        else if (this.Level == 7 && this.ExperiencePoints >= 4500)
        {
            this.Level++;
            this.StatPoints++;
            MessageBox.Show("You have accended to Level " + this.Level);
            return true;
        }
        else if (this.Level == 8 && this.ExperiencePoints >= 5800)
        {
            this.Level++;
            this.StatPoints++;
            MessageBox.Show("You have accended to Level " + this.Level);
            return true;
        }
        else if (this.Level == 9 && this.ExperiencePoints >= 8200)
        {
            this.Level++;
            this.StatPoints++;
            MessageBox.Show("You have accended to Level " + this.Level);
            return true;
        }
        else if (this.Level == 10 && this.ExperiencePoints >= 12800)
        {
            this.Level++;
            this.StatPoints++;
            MessageBox.Show("You have accended to Level " + this.Level);
            return true;
        }
        else if (this.Level == 11 && this.ExperiencePoints >= 16200)
        {
            this.Level++;
            this.StatPoints++;
            MessageBox.Show("You have accended to Level " + this.Level);
            return true;
        }
        else if (this.Level == 12 && this.ExperiencePoints >= 25000)
        {
            this.Level++;
            this.StatPoints++;
            MessageBox.Show("You have accended to Level " + this.Level);
            return true;
        }

        return false;
    }

    public int Strength {get; set; }
    public int Dexterity { get; set; }
    public int Intelligence { get; set; }
    public int Perception { get; set; }
    public int HitPoints { get; set; }
    public int StatPoints { get; set; }
    public int MindPoints { get; set; }
    public int ExperiencePoints { get; set; }
    public int Armor { get; set; }
    public int ChanceToHit { get; set; }
    public int GoldCoins { get; set; }
    public int MeleeDMG { get; set; }
    public int MagicDMG { get; set; }
    public int Stealth { get; set; }
    public int Detect { get; set; }
    public int Level { get; set; }
    public string PCGraphic { get; set; }
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T23:18:46.743

将这一行`Player thePlayer;`放在方法定义之外，直接放入类中，并在其前面加上`private`.

获得一本关于 OOP 的书并阅读基础知识。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T23:23:14.250

创建`private`Player 的一个字段`class`并在您的各种方法中使用它。

例子：

```
public class TheClassThatUseThePlayerObject
{
    private Player thePlayer = new Player(int.Parse(StrBox.Text), int.Parse(DexBox.Text), int.Parse(IntBox.Text), int.Parse(PerBox.Text), int.Parse(HPBox.Text), int.Parse(SPBox.Text), int.Parse(MPBox.Text), int.Parse(EXPBox.Text), int.Parse(ARBox.Text), int.Parse(CTHBox.Text), int.Parse(GoldBox.Text), int.Parse(MeleeDMGBox.Text), int.Parse(MagicDMGBox.Text), int.Parse(StealthBox.Text), int.Parse(DetectBox.Text), int.Parse(LevelBox.Text));

    public void FirstMethod()
    {
        thePlayer.DoSomething();
    }
    public void SecondMethod()
    {
        thePlayer.DoSomethingElse();
    }
} 
```

阅读有关字段的更多信息：[字段](http://msdn.microsoft.com/en-us/library/ms173118%28v=vs.80%29.aspx)

# visual-studio-2012 - 错误灾难性故障 installshield 2012

> ID：16114802
> 
> 赞同：0
> 
> 时间：2013-04-19T23:17:15.023
> 
> 标签：visual-studio-2012, installshield-le

我正在使用 installshield LE 2012 for Visual Studio 为我在 .NET 上用 VB 编写的问题创建可安装文件。

虽然我的问题需要先安装第三方驱动程序。因此，我在“第一个对话框之前”安装期间添加了将其作为自定义操作运行。

但是，每次我尝试安装它时，它都会显示“错误：灾难性故障”，我不知道这是什么意思。这是否意味着安装驱动程序的过程需要太多时间？或者这两者之间有任何资源冲突问题？

如何解决这个问题呢？我真的需要一些帮助。

我使用的操作系统是 Windows 7 Ultimate。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T01:52:16.380

您需要从第三方驱动程序供应商处获得支持。您的自定义操作调用了 InstallShield 无法控制的进程代码。我们不知道您的驱动程序供应商、名称和版本是什么，或者您如何称呼它，因此我们无法为您提供帮助。

FWIW、InstallShield 和 Windows Installer 支持使用 DIFx 安装基于 .INF 文件的驱动程序。但这在残缺的 InstallShield Limited Edition 中不受支持。

# ios - 旋转时获取UIDatePicker的选定行

> ID：16114808
> 
> 赞同：3
> 
> 时间：2013-04-19T23:17:54.513
> 
> 标签：ios, objective-c, uidatepicker

我有`UIDatePicker`一个视图，其控制器位于`UINavigationController`. 我正在注册所选日期的更改，如下所示：

```
[self.datePicker addTarget:self.alarm action:@selector(timeChanged:) forControlEvents:UIControlEventValueChanged]; 
```

它运行良好，除非用户在`UINavigationController`日期选择器完全确定之前按下后退按钮。在这种情况下，该`timeChanged:`方法没有被调用，所以我没有得到新的日期。

当我按下后退按钮时，什么都没有释放，只是视图控制器被弹出了。（保留对它的引用）。

我找到了解决这个问题的`UIPickerView`方法，涉及为选择器视图实现委托方法（例如：[UIPickerView: Get row value while spin?](https://stackoverflow.com/questions/1510998/uipickerview-get-row-value-while-spinning)）。但除非我弄错了，否则这不是`UIDatePicker`. 如果可能的话，我想坚持使用`UIDatePicker`而不是 custom `UIPickerView`。有没有办法做到这一点？它不必完美地获得选定的行（在一两行内就可以了），但越接近越好。

编辑：这是一个越狱应用程序，所以私有 API 很好，如果我能弄清楚它们是什么的话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T23:31:02.990

至于当前的 API，没有办法检测 a 是否在`UIDatePicker`旋转。

这是因为`UIDatePicker`它不是一个子类，`UIPickerView`它在内部管理一个`UIPickerView`。

恐怕这里最好的解决方案是使用自定义`UIPickerView`.

# powershell - 多次更改变量时将环境变量传递给 PowerShell 2.0 中的进程

> ID：16114815
> 
> 赞同：5
> 
> 时间：2013-04-19T23:18:14.097
> 
> 标签：powershell, environment-variables

在将相应的环境变量传递给进程时，我遇到了一些问题。您可以在下面看到我的部分代码，以便您了解我要做什么。

我有两个需要运行的 EXE 文件。这些进程会根据环境变量的位置运行一些更新`%MainFiles%`。当我运行代码时，似乎 EXE 文件无法识别更改。但是，当我查看计算机属性时，我确实看到变量已正确更改。

有谁知道我怎样才能强制流程识别变化？谢谢

```
while ($i -lt $Size) {
  if ($TempEnv[$i] -eq "Done"){
    $ExitCode="Completed"
    return
  } else {
    $Temp = $TempEnv[$i]
    Write-Host ("Starting Update for  " + $Temp) -foregroundcolor "Green"

    [System.Environment]::SetEnvironmentVariable("MainFiles", "$Temp","Machine")
    [System.Environment]::GetEnvironmentVariable("MainFiles","Machine")
    Copy-Item $CopyInstallData -destination $Temp
    $process = Start-Process XMLUpgrade.exe -WorkingDirectory "C:\Program Files\Dtm" -wait
    $process = Start-Process Update.exe -WorkingDirectory "C:\Program Files\Dtm" -wait
.
.
. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T23:56:40.683

此行使 env var 更改永久化：

```
[System.Environment]::SetEnvironmentVariable("MainFiles", "$Temp","Machine") 
```

不幸的是，在您设置它之前 PowerShell 已经启动。它的 env 块在启动时被快照。该环境是两个衍生进程所继承的。

要使用正确的环境变量值启动两个进程，请先执行以下操作：

```
$env:MainFiles = $Temp 
```

# c++ - 第 1 部分：在不使用指针且仅下标的情况下引用数组 | 第 2 部分：带有指针的“...”

> ID：16114816
> 
> 赞同：-4
> 
> 时间：2013-04-19T23:18:30.593
> 
> 标签：c++, arrays, pointers

```
#include <iostream>
#include <time.h>
using namespace std;

void my_func();
int main()
{
    float start_time = clock();
    cout << "Starting time of clock: " << start_time;
    cout << endl << endl;

    for (int i = 0; i < 100000; i++)
    {
        my_func();
    }

    float end_time = clock();
    cout << "Ending time of clock: " << end_time;
    cout << endl << endl;
}

void my_func()
{
    int my_array[5][5];
} 
```

我需要编写一个程序，它只使用下标对二维数组的元素进行大量引用。这实际上是一个由两部分组成的项目，但我只关心第一部分是否正确。第二部分允许使用指针，但现在，我只受“下标”（索引？）的影响。关于如何进行的任何建议？

感谢 Volkan İlbeyli，我成功完成了第一部分。我现在进入第二部分：

我需要编写一个程序，使用指针和指针算法对二维数组的元素进行大量引用。这是我到目前为止所拥有的：

```
#include <iostream>
#include <time.h>
using namespace std;

void my_func();

int main()
{

    float start = clock();

    for (int i = 0; i < 100000; i ++)
    {   
        my_func();
    }

    float end = clock();
    cout << "Ending time of clock: " << (end - start) / ((double)CLOCKS_PER_SEC);
}

void my_func()
{
    int my_array[10][10];

    for (int i = 0; i < 10; i++)
    {
        for (int j = 0; j < 10; j++)
        {
            *(my_array+i+j);
        }
    }
} 
```

我已经完成了第一部分，现在我正在研究下一部分。我只是想知道我是否错过了什么。代码工作正常，程序也是如此。指针不是我的强项，我花了很多时间在互联网上找到我的答案。现在就指针和“指针算术”寻求技术观点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T09:45:31.263

好吧，即使我无法理解您正在尝试的任务的目的或含义，如果我没有弄错，您会被要求通过使用索引来访问 2D 数组的元素。

考虑到您的代码，您`my_func()`无法**访问**这些元素。您只声明您将使用大小为 5x5 的二​​维数组。要访问元素，（我认为）在您的情况下引用数组，您应该使用`for`循环和索引来访问数组的元素。

在你的情况下，我应该这样做：

```
void my_func()
{                                   //assuming that the usage of
    int my_array[1500][500] = {0};  //square matrice is not mandatory

    for(int i=0; i<1500 ; i++){
        for(int j=0; j<500 ; j++){
            my_array[i][j]; //no operation is done, only accessing the element
        }
    }

    return;
} 
```

您还可以交换 for 循环以垂直方式访问数组，即遍历第一列，然后是第二列，然后是第三列……这将使您*通过索引引用 2D 数组的*速度变慢。请参阅[这篇关于 SO](https://stackoverflow.com/questions/9936132/why-does-the-order-of-the-loops-affect-performance-when-iterating-over-a-2d-arra)为什么它减慢交换 for 循环的帖子，即将行列顺序更改为列行。

您还应该注意，**如果您关心**某个事件的关键时间测量，则在开始时钟和结束时钟时应该只包括该事件。在您的代码中，您还包括了调用`cout`,`endl`的时间，其调用时间与*数组引用*`my_func()`无关。此外，我宁愿测量函数中的时间，因为*访问 2D 数组*不需要太多代码。如果确实需要太多时间，我会调用该函数，在其中声明计时变量，绝对不打印开始时间，在重复操作循环之前开始时间并在循环终止后停止。你可以看到[这个帖子](https://stackoverflow.com/questions/10154962/c-how-to-measure-time-correctly)*`main()`*了解如何测量和打印时间（当您需要考虑秒或毫秒等时）。**

# r - 将变量添加到融化函数

> ID：16114817
> 
> 赞同：0
> 
> 时间：2013-04-19T23:18:46.243
> 
> 标签：r, ggplot2

这是我的输入，问题如下：

```
Targets <- read.csv("miR155Aicda.csv", row.names=1, sep="", header=T)          
head(Targets)

               T0h T0.25h T0.5h  T1h  T2h  T3h  T6h T12h T24h T48h C0h C0.25h C0.5h C1h  C2h
Aicda          785   1150   707  513 1265 3268 8294 8625 7387 4397 677    911   673 737 1782
mmu-miR-155-3p 622    548   558 1213 1195 1172 1115 1883 3257 1900 499    562   584 543  580

Targets.m <- melt(Targets)
> head(Targets.m)
  variable     value
1      T0h  9.616549
2      T0h  9.280771
3   T0.25h 10.167418
4   T0.25h  9.098032
5    T0.5h  9.465566
6    T0.5h  9.124121 
```

问题：如何添加`Aicda`和`mmu-mIR-155-2p`作为变量？

我要这个：

```
 ID                variable     value
1   Aicda                  T0h    9.616549
2   mmu-miR-155-3p        T0h     9.280771
3   Aicda                  T0.25h 10.167418
4   mmu-miR-155-3p          T0.25h  9.098032
5   Aicda                  T0.5h   9.465566
6  mmu-miR-155-3p          T0.5h  9.124121 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T08:40:53.623

您需要将行名放在一列中，然后为 id 指定一个变量`melt`：

```
DF <- read.table(text="               T0h T0.25h T0.5h  T1h  T2h  T3h  T6h T12h T24h T48h C0h C0.25h C0.5h C1h  C2h
Aicda          785   1150   707  513 1265 3268 8294 8625 7387 4397 677    911   673 737 1782
mmu-miR-155-3p 622    548   558 1213 1195 1172 1115 1883 3257 1900 499    562   584 543  580",header=TRUE)

DF$ID <- rownames(DF)
library(reshape2)
melt(DF,id="ID") 
```

# python - Python sqlite3 字符串格式化

> ID：16114819
> 
> 赞同：2
> 
> 时间：2013-04-19T23:19:19.233
> 
> 标签：python, sqlite

我有这样的功能：

```
def func(self, id):
    self.cursor.execute("SELECT * FROM my_table WHERE id=?", (id,)) 
```

当我在 id 中传递一个整数值时，这有效：

```
obj.func(id=55) 
```

现在我可能想像这样重用这个函数：

```
obj.func(id="associated_id") 
```

其中 associated_id 实际上是 my_table 中的第二列。但是，这不起作用（即使有一行 id==associated_id 也找不到结果）。

如果我像这样更改功能，它会起作用：

```
def func(self, id):
    self.cursor.execute("SELECT * FROM my_table WHERE id=%s" % str(id)) 
```

为什么第一个版本不起作用？有没有办法使用 sqlite3.execute 参数而不是原生 python 字符串格式来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T00:17:26.697

在第一种情况下，您正在执行参数绑定。这是正确的，sqlite 库会将值 55 绑定到查询调用。在第二种情况下，您不应使用参数绑定，因为 sql 将等同于：

```
SELECT * FROM my_table WHERE id='associated_id' 
```

因为绑定调用检测到您正在传递一个字符串，然后它在内部将其视为字符串。

当你这样做

```
"SELECT * FROM my_table WHERE id=%s" % str(id) 
```

您不进行参数绑定，只需将 SQL 原样传递给 sqlite。

一些关于参数绑定的文档：

[http://www.sqlite.org/c3ref/bind_blob.html](http://www.sqlite.org/c3ref/bind_blob.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T00:11:35.450

这 ”？” 在 SQL 中表示查询执行时要提供的值，例如“55”。

“ associated_id”是表中列的名称，如果您通过“？”传递它。占位符，那么它将被视为一个字符串。数据库无法将其识别为列名。

# google-mirror-api - 服务如何识别用户？

> ID：16114823
> 
> 赞同：4
> 
> 时间：2013-04-19T23:20:02.743
> 
> 标签：google-mirror-api

# 用例：

用户拍了一张漂亮的照片，并希望将其保存到他们的印象笔记帐户中。

![在此处输入图像描述](https://i.stack.imgur.com/dbk4T.png)

1.  用户使用 OAuth 2.0 进行授权。该服务存储他们的凭据。
2.  就在 OAuth 2.0 舞蹈完成后，该服务会插入一个名为“保存到 Evernote”的联系人。
3.  接下来，该服务通过插入对时间线集合的订阅来订阅此用户时间线中的更新。
4.  用户激活联系人。保存到 Evernote 现已完全设置。
5.  随着时间的推移，用户拍照。
6.  用户通过 Save to Evernote 分享照片。这使得服务可以访问与此照片关联的时间线卡。
7.  由于该服务订阅了时间线更新，因此会向您的服务发送通知。此通知链接到包含共享照片的时间线项目。
8.  该服务检查通知并使用包含的 id 来获取包含照片的时间线卡片。
9.  接下来，该服务检查时间线项目并使用附件 ID 来获取照片的字节。
10.  该服务将照片上传到用户的印象笔记。
11.  最后，该服务构造一个新的时间线卡片，并将其与成功消息一起插入到用户的时间线卡片中。

从[Mirror API 文档](https://developers.google.com/glass/subscriptions#shared_picture)看来，一旦用户共享时间线项目，服务就会收到一个 POST，如下所示：

```
{
  "collection": "timeline",
  "itemId": "3hidvm0xez6r8_dacdb3103b8b604_h8rpllg",
  "operation": "UPDATE",
  "userToken": "harold_penguin",
  "verifyToken": "random_hash_to_verify_referer",
  "userActions": [
    {
      "type": "SHARE"
    }
  ]
} 
```

userToken 是我在首次验证应用程序时收到的值吗？如果是这样，我可以使用该值将从 Glass 收到的 POST 与保存在我的数据库中的用户连接起来吗？如果不是，我如何将共享连接到我的服务与 Glass 用户的联系人，以便我的服务可以代表他们执行特定于该用户的服务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T23:54:07.507

这`userToken`确实是您用来将通知与触发它的用户相关联的字段。

您在为该用户`userToken`创建[订阅时设置。](https://developers.google.com/glass/v1/reference/subscriptions#userToken)您在插入订阅时指定的任何值都将作为`userToken`它产生的所有通知提供。这意味着当您创建订阅时，您总是希望使用您的系统可以关联回正确用户的唯一标识符。

例如：

1.  Jane 使用您的服务进行身份验证。Jane 在 Glassware 数据库中的唯一用户 ID 为 42。
2.  在身份验证时，您`timeline`通过插入此订阅来订阅她的收藏：

    ```
    {
      "collection": "timeline"
      "userToken": "42",
      "callbackUrl": "https://example.com/notify/callback"
    } 
    ```

3.  Jane 与您的 Glassware 分享了一张照片。
4.  通知将发送到您的服务。它看起来像这样：

    ```
    {
      "collection": "timeline",
      "itemId": "3hidvm0xez6r8_dacdb3103b8b604_h8rpllg",
      "operation": "UPDATE",
      "userToken": "42",
      "userActions": [
        {
          "type": "SHARE"
        }
      ]
    } 
    ```

5.  您的 Glassware 使用该`userToken`属性来查找正确的用户：Jane。

故事的其余部分按照您在问题中的描述进行。

# c++ - 如何在 while 循环中使用 cin？

> ID：16114826
> 
> 赞同：0
> 
> 时间：2013-04-19T23:20:12.720
> 
> 标签：c++, loops, while-loop, cin

我试图让用户使用带有数组和 cin 的 while 循环输入他们的姓名，但是在输入最后一个人的姓名后，程序崩溃而不是继续前进。有没有办法解决这个问题，还是我需要完全改变代码？我对 c++ 也很陌生，所以可以尽可能简单地给出任何答案吗？

```
#include <iostream>
#include <string>

using namespace std;

int main()
{
    unsigned int numberofplayers;
        number://loop back here if more than 4 players
    cout << "Number of players: ";
    cin >> numberofplayers;
        if(numberofplayers > 4 || numberofplayers < 1){
            cout << "Invalid number, please enter a number from 1 to 4." << endl;
            goto number;
        }
    string name[numberofplayers];
    cout << "Enter your name" << endl;
    int a = 1;
    while(a < numberofplayers + 1){
        cout << "Player " << a << ": ";
        cin >> name[a];
        cout << "Hello, " << name[a] << "." << endl;
        a++;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T23:21:56.273

您可能会面临*数组索引超出界限*，因此将您的 while 循环更改为此并设置`a=0`为从第 0 个索引开始填充。

```
while(a < numberofplayers){

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T23:27:11.540

您的最后一次迭代超出了数组的大小。您需要将其更改为

```
while(a < numberofplayers) 
```

另外，另一方面，关键字 goto 不再使用太多。我建议在那里使用一段时间也喜欢

```
while(true){
    cout<<"number of players";
    cin>>numberofplayers
    if(numberofplayers is valid input){
        break;
    }
    cout<<"bad input";
} 
```

stackoverflow 上有一个问题在这里广泛讨论 goto 的使用： [GOTO 仍然被认为是有害的吗？](https://stackoverflow.com/questions/46586/goto-still-considered-harmful/46789#46789)

# algorithm - 有限空间平均计算

> ID：16114832
> 
> 赞同：2
> 
> 时间：2013-04-19T23:20:52.813
> 
> 标签：algorithm, math, big-o

假设我有 N 个整数，其中 N 可以变得很大，但每个 int 都保证在 0 和某个上限 M 之间，其中 M 很容易适合有符号的 32 位字段。

如果我想计算这 N 个整数的平均值，我不能总是在同一个带符号的 32 位空间中将它们全部相加和除以 - 如果 N 太大，分子就有溢出的风险。此问题的一种解决方案是仅使用 64 位字段进行计算，以保持更大的 N，但此解决方案无法扩展 - 如果 M 是一个大的 64 位整数，则会出现相同的问题。

有谁知道可以计算同一位空间中正整数列表的平均值的算法（最好是 O(N)）？没有做一些便宜的事情，比如使用两个整数来模拟一个更大的整数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T23:25:45.387

假设您最初知道`M`，您可以保留两个变量，一个是到目前为止的答案除以 M，另一个是余数。

例如，在 C++ 中：

```
int ans = 0, remainder = 0;
for (int i=0;i<N;i++) {
  remainder += input[i]; // update remainder so far
  ans += remainder/N; // move what we can from remainder into ans
  remainder%=N; // calculate what's left of remainder
} 
```

在循环结束时，答案在 中`ans`，余数在`remainder`（如果您需要截断以外的舍入方法）。

此示例适用于最大输入数 M+N 适合 32 位 int 的情况。

请注意，这应该适用于正整数和负整数，因为在 C++ 中，`/`运算符是除法运算符，`%`实际上是余数运算符（不是真正的模运算符）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T23:32:38.180

您可以计算运行平均值。如果您有元素的平均值`A`，`N`并且添加另一个元素`E`，则新平均值为`(A*N+E)/(N+1)`。根据除法比加法的分配性质，这等价于`(A*N)/(N+1) + E/(N+1)`。但是如果`A*N`溢出，你可以使用乘除法的结合性质，你可以将第一项转换为`A*(N/N+1)`.

所以算法是：

```
n = 0
avg = 0
for each i in list
  avg = avg*(n/(n+1)) + i/(n+1)
  n = n+1 
```

# java - 窗口大小小于应有的大小

> ID：16114834
> 
> 赞同：4
> 
> 时间：2013-04-19T23:21:13.740
> 
> 标签：java, swing, jframe

好的，所以我得到了这个带有屏幕的 JFrame。我已将大小设置为 800 x 800。但是创建的窗口比这小。任务栏不是问题，因为它不是全尺寸的。

```
package sharph;

import java.awt.Dimension;
import javax.swing.JFrame;

public class Main extends JFrame {

    public static String Title = "Game 1";

    public static Dimension screenSize = new Dimension(800,800);

    public static void main(String[] args) {        
        JFrame frame = new JFrame();

        frame.setTitle(Title);
        frame.setSize(screenSize);
        frame.setLocationRelativeTo(null);
        frame.setResizable(true);
        frame.setDefaultCloseOperation(EXIT_ON_CLOSE);

        Screen screen = new Screen();
        screen.setSize(screenSize);

        frame.add(screen);
        frame.setVisible(true);
    }
} 
```

在 screen 类中，paint 方法在边框应该在的位置周围绘制一个框：

```
//Draw border
g.setColor(Color.RED);
g.drawRect(1, 1, 799, 799); 
```

当我运行它时，窗口比盒子小，底部和右侧被切断。

![在此处输入图像描述](https://i.stack.imgur.com/SHGZQ.png) ![在此处输入图像描述](https://i.stack.imgur.com/eAioJ.png)

注意我手动调整大小以显示边框差异的第二张图片。

我意识到我已经在每边绘制了小 1 个像素的框，但差异远大于 2 个像素。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T23:33:46.557

发生这种情况是因为内容需要压缩到框架减去其边框的大小。

查看[这个问题](https://stackoverflow.com/questions/13313084/graphics-rendering-in-title-bar/13316131#13316131)和[这个问题](https://stackoverflow.com/questions/13734069/how-can-i-set-in-the-midst/13734319#13734319)以获得更详细的解释

布局管理器还覆盖了您在`Screen`组件上设置的 size 属性。无论哪种情况，您都应该覆盖该类的`getPreferredSize`方法`Screen`

此外，您不应该依赖幻数或关于组件实际大小的假设，而应该使用`getWidth`and`getHeight`代替（我知道，这只是为了演示目的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T00:53:05.377

而不是“screen.setSize(screenSize);” 键入“screen.setPreferredSize(screenSize);” 然后在你输入“frame.setVisible(true);”之后 输入“frame.pack()”。您也可以删除“frame.setSize(screenSize);” 如果你想。

# ruby - 如何从字符串执行日期？

> ID：16114836
> 
> 赞同：2
> 
> 时间：2013-04-19T23:21:30.867
> 
> 标签：ruby, string, parsing, date

我正在尝试读取其中包含动态日期的文件，例如`Date.today`or `(Date.today - 1 )`，并根据请求的日期执行我的代码。

如果我用引号中的日期定义了字符串，它就可以工作。从文件中读取相同的字符串时，它不会。我需要使用什么`eval`功能来使其工作吗？

```
require 'date'
#Works
abc = "something #{Date.today}"
puts abc
# something 2013-04-19

#does not work
f = File.read("test.txt")
f.each_line { |line|  puts line ; words = line.split("\t")
  puts line
} 
```

test.txt 文件的内容：

```
something #{Date.today}
# something #{Date.today} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T23:24:22.277

您将不得不使用`eval`实际评估每一行的内容作为其读取。

但是由于您将评估任意代码，因此您必须相信它不是恶意代码。

因此，假设您信任该文件及其行：

```
require 'date'
f = File.read("test.txt")
f.each_line do |line|
 puts eval("\"#{line}\"")
end 
```

请注意双引号包装，因为您将评估的“一段代码”需要是一个“有效”的 Ruby 字符串（它又包含代码，因此您将它用引号括起来以使其看起来是一个实际的双引号 -带引号的字符串。

如果 test.txt 看起来像这样，则此方法有效：

```
Hello, #{Date.today}
Goodbye, #{Date.today} 
```

# bitcoin - Coinbase 地址回调不起作用？

> ID：16114839
> 
> 赞同：5
> 
> 时间：2013-04-19T23:21:41.737
> 
> 标签：bitcoin

我正在使用 Coinbase API。我的应用程序生成带有回调的新接收地址。然而，当 BTC 到达这些地址中的任何一个时，回调似乎并没有被触发。

我已验证确实为新地址创建了回调，并且我的应用程序将正确响应回调。例如，这会在我的服务器上触发所需的功能：

```
curl --data "address=someaddress&amount=1.2" https://mydomain.com/callback?secret_token=mysecret 
```

唉，我的服务器上没有任何调用（任何调用都会显示在日志中，但没有调用）。

有人成功使用 Coinbase 地址回调吗？调试这个的任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-02T01:54:44.830

您是否尝试过使用带有 php 的 json 请求来设置回调 url？如果您登录并查看地址部分，您是否在回调部分看到正确的 url？确保没有错字。几个月前我能够做到这一点，但已经离开了这样做的项目。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-01-31T17:15:30.203

创建一个 php 文件 callback.php

将此代码放入您的 callback.php

```
<?php
    $jsonData = file_get_contents('php://input');

    $postDatacoinbase = json_decode($jsonData, true);

    print_r ($postDatacoinbase);

?> 
```

登录 Coinbase 并点击“商户设置”并将
您的[http://mydomain.com/callback.php](http://mydomain.com/callback.php) url 输入到回调 url

并单击立即测试以查看结果。

# jquery - 使用 jQuery 添加/删除基于屏幕分辨率的无序列表

> ID：16114840
> 
> 赞同：2
> 
> 时间：2013-04-19T23:21:43.077
> 
> 标签：jquery, html, css

我有一个部分需要根据屏幕分辨率在 1 到 4 列中显示我的内容。例如，如果分辨率是 320 像素宽，它应该只显示一个 ul，而在 1200 像素宽的分辨率下，它应该显示四列。

问题是我里面的内容，因为我必须在每个可见列中平均地重新分配内容。我的 HTML 看起来像这样：

```
<ul class="projectsList">
    <li>1</li>
    <li>2</li>
    <li>3</li>
    <li>4</li>
</ul>
<ul class="projectsList">
    <li>1</li>
    <li>2</li>
    <li>3</li>
    <li>4</li>
</ul>
<ul class="projectsList">
    <li>1</li>
    <li>2</li>
    <li>3</li>
    <li>4</li>
</ul>
<ul class="projectsList">
    <li>1</li>
    <li>2</li>
    <li>3</li>
    <li>4</li>
</ul> 
```

CSS 看起来像这样：

```
.projectsList{
    float: left;
    margin: 0;
    padding: 0
}
.projectsList li{
    display: block;
    width: 100px;
    height: 100px;
    background: #CCC;
    margin: 0 10px 10px 0;
    list-style: none;
}
.mediaScreen{
    width: 1024px) 
```

这是我到目前为止的代码：

```
var mediaScreen = $('.mediaScreen').css('width');
var targetColumns;
var movingMosaics;
var wrapper = $(".projectsList");
var mosaic = $(".projectsList li");
var callback = false;

function adjustProjects(){
    if(mediaScreen == '1401px'){
        targetColumns = 4;
    }else if(mediaScreen == '1024px' || mediaScreen == '800px'){
        targetColumns = 3;
    }else if(mediaScreen == '600px'){
        targetColumns = 2;
    }else if(mediaScreen == '320px'){
        targetColumns = 1;
    }

    //When want columns to collapse
    if (wrapper.not('.empty').length > targetColumns){
        for (var i = $targetCols; i < $currentCols; i++){
            movingMosaics = wrapper.eq(i).find('li').addClass('moving');
            if(mosaicsToMove == wrapper.eq(i).find('.moving').length){
                callback = true;
                wrapper.eq(i).addClass('empty');
            }
        }

        if (callback == true){
           for(var j=0; j<movingMosaics.length; j++){
               for(var i=0; i<$targetCols; i++){
                   if(!wrapper.eq(i).hasClass("last")){
                       wrapper.eq(i).append(movingMosaics.eq(0))
                       movingMosaics.eq(j).removeClass('moving')
                       $(".last").removeClass("last");
                       wrapper.eq(1).addClass("last");
                       break;
                   };
               };
           };
        }

    //When want columns to expand
    }else if(wrapper.not('.empty').length < targetColumns){
        var totalIemsToMove = wrapper.find('li').length/targetColumns;
        var itemsPerCol = wrapper.find('li').length / wrapper.not('.empty').length;
        var itemsPerColToMove = itemsPerCol - totalIemsToMove;
        var indexItems = itemsPerCol - itemsPerColToMove;

        for(var i = 0; i< wrapper.not('.empty').length; i++){
            for (var j = indexItems; j <= itemsPerCol; j++){
                movingMosaics = wrapper.eq(i).find(' li').eq(j).addClass('reassign');
                if(totalIemsToMove == $('.reassign').length){
                    callback = true;
                }
            }
        }
        if (callback== true){
            for (var j = wrapper.not('.empty').length; j < targetColumns; j++){
                for (var i = 0; i < movingMosaics.length*2; i++){
                    wrapper.eq(j).append(movingMosaics.eq(i));
                        movingMosaics.eq(j).removeClass('reassign');
                    }
                    if($('.reassign').length == 0){
                           wrapper.eq(j).removeClass('empty');
                    }
                }
            }
            callback == false;
        }
    } 
```

脚本有一些问题；它部分有效。所以基本上如果我有 12 个元素，我必须将它们平均移动到可见“uls”的数量。对于四个可见列，必须有三个元素，对于三个可见列，每列必须有四个元素，依此类推…… mediaScreen 类根据媒体查询分辨率而变化。

我认为我正在使脚本变得非常复杂，并且我已经删除了所有内容并重新开始了几次，但没有任何运气。有什么方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T00:02:41.677

您不需要任何 JavaScript 代码来使您的列根据屏幕大小消失。使用 CSS：

### HTML

```
<ul class="projectsList">
    <li>main1</li>
    <li>2</li>
    <li>3</li>
    <li>4</li>
</ul>
<ul class="projectsList hide-phone">
    <li>phone1</li>
    <li>2</li>
    <li>3</li>
    <li>4</li>
</ul>
<ul class="projectsList hide-tablet">
    <li>tablet1</li>
    <li>2</li>
    <li>3</li>
    <li>4</li>
</ul>
<ul class="projectsList hide-desktop">
    <li>desktop1</li>
    <li>2</li>
    <li>3</li>
    <li>4</li>
</ul> 
```

### CSS

```
.projectsList {
    float: left;
    margin: 0;
    padding: 0;
}
.projectsList li {
    display: block;
    width: 100px;
    height: 100px;
    background: #CCC;
    margin: 0 10px 10px 0;
    list-style: none;
}
@media (max-width: 800px) {
    .hide-desktop {
        display: none;
    }
}
@media (max-width: 600px) {
    .hide-desktop {
        display: none;
    }
    .hide-tablet {
        display: none;
    }
}
@media (max-width: 320px) {
    .hide-desktop {
        display: none;
    }
    .hide-tablet {
        display: none;
    }
    .hide-phone {
        display: none;
    }
} 
```

查看我的 jsfiddle，[http://jsfiddle.net/eLFKm/](http://jsfiddle.net/eLFKm/)。

# c# - 如何在 MVC C# 项目中使用 dll 文件？

> ID：16114848
> 
> 赞同：1
> 
> 时间：2013-04-19T23:23:15.977
> 
> 标签：c#, asp.net-mvc, dll

我正在开发一个 MVC Web 应用程序。我拥有查询数据库所需的所有功能。这些函数嵌入在一个 Dll 文件中，可以作为参考添加到引用中。此 dll 文件包含所有功能（插入、删除、从数据库中检索数据）。关于如何在我的 MVC 项目中使用 Dll 文件中的函数来处理数据库有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T23:27:29.197

`using Namespace;`在 MVC 项目中的任何类中添加`Namespace`dll 中类的命名空间，然后尝试以下操作：

```
var myClass = new MyClassInThatDll(); 
myClass.DoIt(); 
```

# image - 如何在 Activex 控件按钮中放置图像

> ID：16114849
> 
> 赞同：0
> 
> 时间：2013-04-19T23:23:25.107
> 
> 标签：image, delphi, activex

我不确定我将如何制作一个将图像放入按钮中的程序，在 activex 控件向导中似乎没有 Tbitbtn 或 TspeedButton，所以当按钮被拉伸时，图像也会被拉伸。

项目 .dpr

```
library ButtonXControl1;

uses
  ComServ,
  ButtonXControl1_TLB in 'ButtonXControl1_TLB.pas',
  ButtonImpl1 in 'ButtonImpl1.pas' {ButtonX: CoClass},
  About1 in 'About1.pas' {ButtonXAbout};

{$E ocx}

exports
  DllGetClassObject,
  DllCanUnloadNow,
  DllRegisterServer,
  DllUnregisterServer;

{$R *.TLB}

{$R *.RES}

begin
end. 
```

项目实施：

```
unit ButtonImpl1;

{$WARN SYMBOL_PLATFORM OFF}

interface

uses
  Windows, ActiveX, Classes, Controls, Graphics, Menus, Forms, StdCtrls,
  ComServ, StdVCL, AXCtrls, ButtonXControl1_TLB;

type
  TButtonX = class(TActiveXControl, IButtonX)
  private
    { Private declarations }
    FDelphiControl: TButton;
    FEvents: IButtonXEvents;
    procedure ClickEvent(Sender: TObject);
    procedure KeyPressEvent(Sender: TObject; var Key: Char);
  protected
    { Protected declarations }
    procedure DefinePropertyPages(DefinePropertyPage: TDefinePropertyPage); override;
    procedure EventSinkChanged(const EventSink: IUnknown); override;
    procedure InitializeControl; override;
    function DrawTextBiDiModeFlagsReadingOnly: Integer; safecall;
    function Get_AlignDisabled: WordBool; safecall;
    function Get_Cancel: WordBool; safecall;
    function Get_Caption: WideString; safecall;
    function Get_Default: WordBool; safecall;
    function Get_DoubleBuffered: WordBool; safecall;
    function Get_DragCursor: Smallint; safecall;
    function Get_DragMode: TxDragMode; safecall;
    function Get_Enabled: WordBool; safecall;
    function Get_Font: IFontDisp; safecall;
    function Get_Visible: WordBool; safecall;
    function Get_VisibleDockClientCount: Integer; safecall;
    function Get_WordWrap: WordBool; safecall;
    function IsRightToLeft: WordBool; safecall;
    function UseRightToLeftReading: WordBool; safecall;
    function UseRightToLeftScrollBar: WordBool; safecall;
    procedure _Set_Font(var Value: IFontDisp); safecall;
    procedure AboutBox; safecall;
    procedure InitiateAction; safecall;
    procedure Set_Cancel(Value: WordBool); safecall;
    procedure Set_Caption(const Value: WideString); safecall;
    procedure Set_Default(Value: WordBool); safecall;
    procedure Set_DoubleBuffered(Value: WordBool); safecall;
    procedure Set_DragCursor(Value: Smallint); safecall;
    procedure Set_DragMode(Value: TxDragMode); safecall;
    procedure Set_Enabled(Value: WordBool); safecall;
    procedure Set_Font(const Value: IFontDisp); safecall;
    procedure Set_Visible(Value: WordBool); safecall;
    procedure Set_WordWrap(Value: WordBool); safecall;
    procedure SetSubComponent(IsSubComponent: WordBool); safecall;
  end;

implementation

uses ComObj, About1;

{ TButtonX }

procedure TButtonX.DefinePropertyPages(DefinePropertyPage: TDefinePropertyPage);
begin
  {TODO: Define property pages here.  Property pages are defined by calling
    DefinePropertyPage with the class id of the page.  For example,
      DefinePropertyPage(Class_ButtonXPage); }
end;

procedure TButtonX.EventSinkChanged(const EventSink: IUnknown);
begin
  FEvents := EventSink as IButtonXEvents;
end;

procedure TButtonX.InitializeControl;
begin
  FDelphiControl := Control as TButton;
  FDelphiControl.OnClick := ClickEvent;
  FDelphiControl.OnKeyPress := KeyPressEvent;
end;

function TButtonX.DrawTextBiDiModeFlagsReadingOnly: Integer;
begin
  Result := FDelphiControl.DrawTextBiDiModeFlagsReadingOnly;
end;

function TButtonX.Get_AlignDisabled: WordBool;
begin
  Result := FDelphiControl.AlignDisabled;
end;

function TButtonX.Get_Cancel: WordBool;
begin
  Result := FDelphiControl.Cancel;
end;

function TButtonX.Get_Caption: WideString;
begin
  Result := WideString(FDelphiControl.Caption);
end;

function TButtonX.Get_Default: WordBool;
begin
  Result := FDelphiControl.Default;
end;

function TButtonX.Get_DoubleBuffered: WordBool;
begin
  Result := FDelphiControl.DoubleBuffered;
end;

function TButtonX.Get_DragCursor: Smallint;
begin
  Result := Smallint(FDelphiControl.DragCursor);
end;

function TButtonX.Get_DragMode: TxDragMode;
begin
  Result := Ord(FDelphiControl.DragMode);
end;

function TButtonX.Get_Enabled: WordBool;
begin
  Result := FDelphiControl.Enabled;
end;

function TButtonX.Get_Font: IFontDisp;
begin
  GetOleFont(FDelphiControl.Font, Result);
end;

function TButtonX.Get_Visible: WordBool;
begin
  Result := FDelphiControl.Visible;
end;

function TButtonX.Get_VisibleDockClientCount: Integer;
begin
  Result := FDelphiControl.VisibleDockClientCount;
end;

function TButtonX.Get_WordWrap: WordBool;
begin
  Result := FDelphiControl.WordWrap;
end;

function TButtonX.IsRightToLeft: WordBool;
begin
  Result := FDelphiControl.IsRightToLeft;
end;

function TButtonX.UseRightToLeftReading: WordBool;
begin
  Result := FDelphiControl.UseRightToLeftReading;
end;

function TButtonX.UseRightToLeftScrollBar: WordBool;
begin
  Result := FDelphiControl.UseRightToLeftScrollBar;
end;

procedure TButtonX._Set_Font(var Value: IFontDisp);
begin
  SetOleFont(FDelphiControl.Font, Value);
end;

procedure TButtonX.AboutBox;
begin
  ShowButtonXAbout;
end;

procedure TButtonX.ClickEvent(Sender: TObject);
begin
  if FEvents <> nil then FEvents.OnClick;
end;

procedure TButtonX.InitiateAction;
begin
  FDelphiControl.InitiateAction;
end;

procedure TButtonX.KeyPressEvent(Sender: TObject; var Key: Char);
var
  TempKey: Smallint;
begin
  TempKey := Smallint(Key);
  if FEvents <> nil then FEvents.OnKeyPress(TempKey);
  Key := Char(TempKey);
end;

procedure TButtonX.Set_Cancel(Value: WordBool);
begin
  FDelphiControl.Cancel := Value;
end;

procedure TButtonX.Set_Caption(const Value: WideString);
begin
  FDelphiControl.Caption := TCaption(Value);
end;

procedure TButtonX.Set_Default(Value: WordBool);
begin
  FDelphiControl.Default := Value;
end;

procedure TButtonX.Set_DoubleBuffered(Value: WordBool);
begin
  FDelphiControl.DoubleBuffered := Value;
end;

procedure TButtonX.Set_DragCursor(Value: Smallint);
begin
  FDelphiControl.DragCursor := TCursor(Value);
end;

procedure TButtonX.Set_DragMode(Value: TxDragMode);
begin
  FDelphiControl.DragMode := TDragMode(Value);
end;

procedure TButtonX.Set_Enabled(Value: WordBool);
begin
  FDelphiControl.Enabled := Value;
end;

procedure TButtonX.Set_Font(const Value: IFontDisp);
begin
  SetOleFont(FDelphiControl.Font, Value);
end;

procedure TButtonX.Set_Visible(Value: WordBool);
begin
  FDelphiControl.Visible := Value;
end;

procedure TButtonX.Set_WordWrap(Value: WordBool);
begin
  FDelphiControl.WordWrap := Value;
end;

procedure TButtonX.SetSubComponent(IsSubComponent: WordBool);
begin
  FDelphiControl.SetSubComponent(IsSubComponent);
end;

initialization
  TActiveXControlFactory.Create(
    ComServer,
    TButtonX,
    TButton,
    Class_ButtonX,
    1,
    '{B3400964-1AFE-45E8-A3ED-1286AE605314}',
    0,
    tmApartment);
end. 
```

TLB？

```
unit ButtonXControl1_TLB;

// ************************************************************************ //
// WARNING                                                                    
// -------                                                                    
// The types declared in this file were generated from data read from a       
// Type Library. If this type library is explicitly or indirectly (via        
// another type library referring to this type library) re-imported, or the   
// 'Refresh' command of the Type Library Editor activated while editing the   
// Type Library, the contents of this file will be regenerated and all        
// manual modifications will be lost.                                         
// ************************************************************************ //

// PASTLWTR : 1.2
// File generated on 4/20/2013 7:14:17 AM from Type Library described below.

{$TYPEDADDRESS OFF} // Unit must be compiled without type-checked pointers. 
{$WARN SYMBOL_PLATFORM OFF}
{$WRITEABLECONST ON}
{$VARPROPSETTER ON}
interface

uses Windows, ActiveX, Classes, Graphics, OleCtrls, StdVCL, Variants;

// *********************************************************************//
// GUIDS declared in the TypeLibrary. Following prefixes are used:        
//   Type Libraries     : LIBID_xxxx                                      
//   CoClasses          : CLASS_xxxx                                      
//   DISPInterfaces     : DIID_xxxx                                       
//   Non-DISP interfaces: IID_xxxx                                        
// *********************************************************************//
const
  // TypeLibrary Major and minor versions
  ButtonXControl1MajorVersion = 1;
  ButtonXControl1MinorVersion = 0;

  LIBID_ButtonXControl1: TGUID = '{5285C4F5-89FE-4491-9D87-BD284C195C49}';

  IID_IButtonX: TGUID = '{0DBF599A-1513-415B-99F8-C49F023AE176}';
  DIID_IButtonXEvents: TGUID = '{F3555B69-8F22-4FEC-B088-40B02AB5311D}';
  CLASS_ButtonX: TGUID = '{1099073B-BD04-4974-BD25-C0B1C3A110F4}';

// *********************************************************************//
// Declaration of Enumerations defined in Type Library                    
// *********************************************************************//
// Constants for enum TxDragMode
type
  TxDragMode = TOleEnum;
const
  dmManual = $00000000;
  dmAutomatic = $00000001;

// Constants for enum TxMouseButton
type
  TxMouseButton = TOleEnum;
const
  mbLeft = $00000000;
  mbRight = $00000001;
  mbMiddle = $00000002;

type

// *********************************************************************//
// Forward declaration of types defined in TypeLibrary                    
// *********************************************************************//
  IButtonX = interface;
  IButtonXDisp = dispinterface;
  IButtonXEvents = dispinterface;

// *********************************************************************//
// Declaration of CoClasses defined in Type Library                       
// (NOTE: Here we map each CoClass to its Default Interface)              
// *********************************************************************//
  ButtonX = IButtonX;

// *********************************************************************//
// Declaration of structures, unions and aliases.                         
// *********************************************************************//
  PPUserType1 = ^IFontDisp; {*}

// *********************************************************************//
// Interface: IButtonX
// Flags:     (4416) Dual OleAutomation Dispatchable
// GUID:      {0DBF599A-1513-415B-99F8-C49F023AE176}
// *********************************************************************//
  IButtonX = interface(IDispatch)
    ['{0DBF599A-1513-415B-99F8-C49F023AE176}']
    function Get_Cancel: WordBool; safecall;
    procedure Set_Cancel(Value: WordBool); safecall;
    function Get_Caption: WideString; safecall;
    procedure Set_Caption(const Value: WideString); safecall;
    function Get_Default: WordBool; safecall;
    procedure Set_Default(Value: WordBool); safecall;
    function Get_DragCursor: Smallint; safecall;
    procedure Set_DragCursor(Value: Smallint); safecall;
    function Get_DragMode: TxDragMode; safecall;
    procedure Set_DragMode(Value: TxDragMode); safecall;
    function Get_Enabled: WordBool; safecall;
    procedure Set_Enabled(Value: WordBool); safecall;
    function Get_Font: IFontDisp; safecall;
    procedure Set_Font(const Value: IFontDisp); safecall;
    procedure _Set_Font(var Value: IFontDisp); safecall;
    function Get_Visible: WordBool; safecall;
    procedure Set_Visible(Value: WordBool); safecall;
    function Get_WordWrap: WordBool; safecall;
    procedure Set_WordWrap(Value: WordBool); safecall;
    function Get_DoubleBuffered: WordBool; safecall;
    procedure Set_DoubleBuffered(Value: WordBool); safecall;
    function Get_AlignDisabled: WordBool; safecall;
    function Get_VisibleDockClientCount: Integer; safecall;
    function DrawTextBiDiModeFlagsReadingOnly: Integer; safecall;
    procedure InitiateAction; safecall;
    function IsRightToLeft: WordBool; safecall;
    function UseRightToLeftReading: WordBool; safecall;
    function UseRightToLeftScrollBar: WordBool; safecall;
    procedure SetSubComponent(IsSubComponent: WordBool); safecall;
    procedure AboutBox; safecall;
    property Cancel: WordBool read Get_Cancel write Set_Cancel;
    property Caption: WideString read Get_Caption write Set_Caption;
    property Default: WordBool read Get_Default write Set_Default;
    property DragCursor: Smallint read Get_DragCursor write Set_DragCursor;
    property DragMode: TxDragMode read Get_DragMode write Set_DragMode;
    property Enabled: WordBool read Get_Enabled write Set_Enabled;
    property Font: IFontDisp read Get_Font write Set_Font;
    property Visible: WordBool read Get_Visible write Set_Visible;
    property WordWrap: WordBool read Get_WordWrap write Set_WordWrap;
    property DoubleBuffered: WordBool read Get_DoubleBuffered write Set_DoubleBuffered;
    property AlignDisabled: WordBool read Get_AlignDisabled;
    property VisibleDockClientCount: Integer read Get_VisibleDockClientCount;
  end;

// *********************************************************************//
// DispIntf:  IButtonXDisp
// Flags:     (4416) Dual OleAutomation Dispatchable
// GUID:      {0DBF599A-1513-415B-99F8-C49F023AE176}
// *********************************************************************//
  IButtonXDisp = dispinterface
    ['{0DBF599A-1513-415B-99F8-C49F023AE176}']
    property Cancel: WordBool dispid 201;
    property Caption: WideString dispid -518;
    property Default: WordBool dispid 202;
    property DragCursor: Smallint dispid 203;
    property DragMode: TxDragMode dispid 204;
    property Enabled: WordBool dispid -514;
    property Font: IFontDisp dispid -512;
    property Visible: WordBool dispid 205;
    property WordWrap: WordBool dispid 206;
    property DoubleBuffered: WordBool dispid 207;
    property AlignDisabled: WordBool readonly dispid 208;
    property VisibleDockClientCount: Integer readonly dispid 209;
    function DrawTextBiDiModeFlagsReadingOnly: Integer; dispid 210;
    procedure InitiateAction; dispid 211;
    function IsRightToLeft: WordBool; dispid 212;
    function UseRightToLeftReading: WordBool; dispid 213;
    function UseRightToLeftScrollBar: WordBool; dispid 214;
    procedure SetSubComponent(IsSubComponent: WordBool); dispid 215;
    procedure AboutBox; dispid -552;
  end;

// *********************************************************************//
// DispIntf:  IButtonXEvents
// Flags:     (0)
// GUID:      {F3555B69-8F22-4FEC-B088-40B02AB5311D}
// *********************************************************************//
  IButtonXEvents = dispinterface
    ['{F3555B69-8F22-4FEC-B088-40B02AB5311D}']
    procedure OnClick; dispid 201;
    procedure OnKeyPress(var Key: Smallint); dispid 202;
  end;

// *********************************************************************//
// OLE Control Proxy class declaration
// Control Name     : TButtonX
// Help String      : ButtonX Control
// Default Interface: IButtonX
// Def. Intf. DISP? : No
// Event   Interface: IButtonXEvents
// TypeFlags        : (38) CanCreate Licensed Control
// *********************************************************************//
  TButtonXOnKeyPress = procedure(ASender: TObject; var Key: Smallint) of object;

  TButtonX = class(TOleControl)
  private
    FOnClick: TNotifyEvent;
    FOnKeyPress: TButtonXOnKeyPress;
    FIntf: IButtonX;
    function  GetControlInterface: IButtonX;
  protected
    procedure CreateControl;
    procedure InitControlData; override;
  public
    function DrawTextBiDiModeFlagsReadingOnly: Integer;
    procedure InitiateAction;
    function IsRightToLeft: WordBool;
    function UseRightToLeftReading: WordBool;
    function UseRightToLeftScrollBar: WordBool;
    procedure SetSubComponent(IsSubComponent: WordBool);
    procedure AboutBox;
    property  ControlInterface: IButtonX read GetControlInterface;
    property  DefaultInterface: IButtonX read GetControlInterface;
    property DoubleBuffered: WordBool index 207 read GetWordBoolProp write SetWordBoolProp;
    property AlignDisabled: WordBool index 208 read GetWordBoolProp;
    property VisibleDockClientCount: Integer index 209 read GetIntegerProp;
  published
    property Anchors;
    property Cancel: WordBool index 201 read GetWordBoolProp write SetWordBoolProp stored False;
    property Caption: WideString index -518 read GetWideStringProp write SetWideStringProp stored False;
    property Default: WordBool index 202 read GetWordBoolProp write SetWordBoolProp stored False;
    property DragCursor: Smallint index 203 read GetSmallintProp write SetSmallintProp stored False;
    property DragMode: TOleEnum index 204 read GetTOleEnumProp write SetTOleEnumProp stored False;
    property Enabled: WordBool index -514 read GetWordBoolProp write SetWordBoolProp stored False;
    property Font: TFont index -512 read GetTFontProp write SetTFontProp stored False;
    property Visible: WordBool index 205 read GetWordBoolProp write SetWordBoolProp stored False;
    property WordWrap: WordBool index 206 read GetWordBoolProp write SetWordBoolProp stored False;
    property OnClick: TNotifyEvent read FOnClick write FOnClick;
    property OnKeyPress: TButtonXOnKeyPress read FOnKeyPress write FOnKeyPress;
  end;

procedure Register;

resourcestring
  dtlServerPage = 'Servers';

  dtlOcxPage = 'ActiveX';

implementation

uses ComObj;

procedure TButtonX.InitControlData;
const
  CEventDispIDs: array [0..1] of DWORD = (
    $000000C9, $000000CA);
  CTFontIDs: array [0..0] of DWORD = (
    $FFFFFE00);
  CControlData: TControlData2 = (
    ClassID: '{1099073B-BD04-4974-BD25-C0B1C3A110F4}';
    EventIID: '{F3555B69-8F22-4FEC-B088-40B02AB5311D}';
    EventCount: 2;
    EventDispIDs: @CEventDispIDs;
    LicenseKey: nil (*HR:$80040154*);
    Flags: $0000001C;
    Version: 401;
    FontCount: 1;
    FontIDs: @CTFontIDs);
begin
  ControlData := @CControlData;
  TControlData2(CControlData).FirstEventOfs := Cardinal(@@FOnClick) - Cardinal(Self);
end;

procedure TButtonX.CreateControl;

  procedure DoCreate;
  begin
    FIntf := IUnknown(OleObject) as IButtonX;
  end;

begin
  if FIntf = nil then DoCreate;
end;

function TButtonX.GetControlInterface: IButtonX;
begin
  CreateControl;
  Result := FIntf;
end;

function TButtonX.DrawTextBiDiModeFlagsReadingOnly: Integer;
begin
  Result := DefaultInterface.DrawTextBiDiModeFlagsReadingOnly;
end;

procedure TButtonX.InitiateAction;
begin
  DefaultInterface.InitiateAction;
end;

function TButtonX.IsRightToLeft: WordBool;
begin
  Result := DefaultInterface.IsRightToLeft;
end;

function TButtonX.UseRightToLeftReading: WordBool;
begin
  Result := DefaultInterface.UseRightToLeftReading;
end;

function TButtonX.UseRightToLeftScrollBar: WordBool;
begin
  Result := DefaultInterface.UseRightToLeftScrollBar;
end;

procedure TButtonX.SetSubComponent(IsSubComponent: WordBool);
begin
  DefaultInterface.SetSubComponent(IsSubComponent);
end;

procedure TButtonX.AboutBox;
begin
  DefaultInterface.AboutBox;
end;

procedure Register;
begin
  RegisterComponents(dtlOcxPage, [TButtonX]);
end;

end. 
```

# ruby - 使用 Nokogiri 在 XML 中禁用 HTML 转义

> ID：16114851
> 
> 赞同：2
> 
> 时间：2013-04-19T23:23:47.190
> 
> 标签：ruby, sinatra, nokogiri

我正在尝试从 Google Directions API 解析 XML 文档。

这是我到目前为止所得到的：

```
x = Nokogiri::XML(GoogleDirections.new("48170", "48104").xml)
x.xpath("//DirectionsResponse//route//leg//step").each do |q|
  q.xpath("html_instructions").each do |h|
    puts h.inner_html
  end
end 
```

输出如下所示：

```
Head &lt;b&gt;south&lt;/b&gt; on &lt;b&gt;Hidden Pond Dr&lt;/b&gt; toward &lt;b&gt;Ironwood Ct&lt;/b&gt;
Turn &lt;b&gt;right&lt;/b&gt; onto &lt;b&gt;N Territorial Rd&lt;/b&gt;
Turn &lt;b&gt;left&lt;/b&gt; onto &lt;b&gt;Gotfredson Rd&lt;/b&gt;
... 
```

我希望输出为：

```
Turn <b>right</b> onto <b>N Territorial Rd</b> 
```

问题似乎是 Nokogiri 在 xml 中转义 html

我相信谷歌，但我认为进一步对其进行清理以：

```
Turn right onto N Territorial Rd 
```

但是如果没有原始 xml，我就不能（也许使用[sanitize ）。](https://github.com/rgrove/sanitize)想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T23:54:41.887

因为我没有安装 Google Directions API，所以我无法访问 XML，但我强烈怀疑问题出在告诉 Nokogiri 您正在处理 XML 的结果。结果，它将返回给您编码的 HTML，就像它应该在 XML 中一样。

您可以使用以下方式对 HTML 进行转义：

```
CGI::unescape_html('Head &lt;b&gt;south&lt;/b&gt; on &lt;b&gt;Hidden Pond Dr&lt;/b&gt; toward &lt;b&gt;Ironwood Ct&lt;/b&gt;')
=> "Head <b>south</b> on <b>Hidden Pond Dr</b> toward <b>Ironwood Ct</b>\n" 
```

`unescape_html`是 的别名`unescapeHTML`：

```
对已被 HTML 转义的字符串进行转义
  CGI::unescapeHTML("用法：foo "bar" <baz>")
     # => "用法：foo \"bar\" "

```

* * *

我不得不多考虑一下。这是我遇到过的事情，但这是我在忙碌的工作中逃脱的事情之一。解决方法很简单：您使用了错误的方法来检索内容。代替：

```
puts h.inner_html 
```

采用：

```
puts h.text 
```

我证明了这一点：

```
require 'httpclient'
require 'nokogiri'

# This URL comes from: https://developers.google.com/maps/documentation/directions/#XML
url = 'http://maps.googleapis.com/maps/api/directions/xml?origin=Chicago,IL&destination=Los+Angeles,CA&waypoints=Joplin,MO|Oklahoma+City,OK&sensor=false'
clnt = HTTPClient.new

doc = Nokogiri::XML(clnt.get_content(url))
doc.search('html_instructions').each do |html|
  puts html.text
end 
```

哪个输出：

```
Head <b>south</b> on <b>S Federal St</b> toward <b>W Van Buren St</b>
Turn <b>right</b> onto <b>W Congress Pkwy</b>
Continue onto <b>I-290 W</b>
[...] 
```

不同的是`inner_html`直接读取节点的内容，不解码。`text`为你解码。`text`,`to_str`并且在 Nokogiri::XML::Node 内部`inner_text`被别名为我们解析的乐趣。`content`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-27T08:35:57.407

将节点包装在 CDATA 中：

```
def wrap_in_cdata(node)
    # Using Nokogiri::XML::Node#content instead of #inner_html (which
    # escapes HTML entities) so nested nodes will not work
    node.inner_html = node.document.create_cdata(node.content)
    node
end 
```

`Nokogiri::XML::Node#inner_html`转义 HTML 实体，除了 CDATA 部分。

```
fragment = Nokogiri::HTML.fragment "<div>Here is an unescaped string: <span>Turn left > right > straight & reach your destination.</span></div>"
puts fragment.inner_html
# <div>Here is an unescaped string: <span>Turn left &gt; right &gt; straight &amp; reach your destination.</span></div>

fragment.xpath(".//span").each {|node| node.inner_html = node.document.create_cdata(node.content) }
fragment.inner_html
# <div>Here is an unescaped string: <span>Turn left > right > straight & reach your destination.</span>\n</div> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-19T23:52:24.293

这不是一个很好的或干燥的解决方案，但它有效：

```
puts h.inner_html.gsub("&lt;b&gt;" , "").gsub("&lt;/b&gt;", "").gsub("&lt;div style=\"font-size:0.9em\"&gt;", "").gsub("&lt;/div&gt;", "") 
```

# jquery - 在 append() 中添加 if 语句

> ID：16114853
> 
> 赞同：-1
> 
> 时间：2013-04-19T23:24:02.530
> 
> 标签：jquery, autocomplete

是否可以在 jQuery 函数中为此添加`if`语句？`append()`

```
}).data("uiAutocomplete")._renderItem = function(ul, item) {
    $(ul).addClass("quicksearch");
    $(ul).css('margin-left','-125px');
    var rating_color = item.level;
    var revision = item.revision.toLowerCase();

    //if revision === "") { append only !   

    return $("<li></li>").data("item.autocomplete", item).append('<a><img class="clubpicture" src="'+item.clubpicture+'" /><img class="nationpicture" src="'+item.nationpicture+'" /><span class="name">'+item.name+'</span> ('+item.position+') <span class="rating '+rating_color+' '+revision+'">'+item.rating+'</span></a>').appendTo(ul);
}; 
```

如果有人能指出我正确的方向那就太好了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T23:32:09.747

***[`jsFiddle Demo`](http://jsfiddle.net/v2dFg/)***

你可以挂钩到 jquery

```
$.fn.customIf = function(){
 var els = [];
 this.each(function(){
   if( this instanceof HTMLDivElement ){
    els.push(this);
   }
 });
 return $(els);
}; 
```

举个例子。这只会发送`<div>`要附加的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T01:51:27.007

感谢@kai-qing，以下似乎对我有用

```
function(ul, item) {
        $(ul).addClass("quicksearch");
        $(ul).css('margin-left','-125px');
        var rating_color = item.level;
        var revision = item.revision.toLowerCase();

        if(revision == "") { 
            return $("<li></li>").append('<a><img class="clubpicture" src="'+item.clubpicture+'" /><img class="nationpicture" src="'+item.nationpicture+'" /><span class="name">'+item.name+'</span> ('+item.position+') <span class="rating '+rating_color+' '+revision+'">'+item.rating+'</span></a>').appendTo(ul);
        }

        return $("<li></li>").data("item.autocomplete", item);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T23:39:28.513

这就是我在评论中的意思：

```
function(ul, item) {
    $(ul).addClass("quicksearch");
    $(ul).css('margin-left','-125px');
    var rating_color = item.level;
    var revision = item.revision.toLowerCase();

    if(revision == "") { 
        return $("<li></li>").append('<a><img class="clubpicture" src="'+item.clubpicture+'" /><img class="nationpicture" src="'+item.nationpicture+'" /><span class="name">'+item.name+'</span> ('+item.position+') <span class="rating '+rating_color+' '+revision+'">'+item.rating+'</span></a>').appendTo(ul);
    }

    return $("<li></li>").data("item.autocomplete", item).append('<a><img class="clubpicture" src="'+item.clubpicture+'" /><img class="nationpicture" src="'+item.nationpicture+'" /><span class="name">'+item.name+'</span> ('+item.position+') <span class="rating '+rating_color+' '+revision+'">'+item.rating+'</span></a>').appendTo(ul);
}; 
```

这将在另一个触发之前返回条件。这是多余的，但会做你所要求的。请记住，两者之间唯一的区别是条件之一不设置数据项

# javascript - :当项目可见时，可见长度返回 0

> ID：16114855
> 
> 赞同：3
> 
> 时间：2013-04-19T23:24:13.537
> 
> 标签：javascript, jquery

我有一个 if 语句来检查我的 div 下是否没有可见的东西，如果是，我隐藏子元素的兄弟姐妹。

```
 var $remainingprojects = $searchproject.show().filter(function () {
            var text = $(this).text().replace(/\s+/g, ' ').toLowerCase();
            return !~text.indexOf(val);
        }).parents('.srcprojects');

        var $remainingprojectscontainer = $remainingprojects.parents('.projectscontainer');

        $remainingprojects.hide();
        $remainingprojectscontainer.each(function() {
            if($(this).children('.srcprojects:visible').length == 0){//This line
                console.log($(this).children('.projectschildren').html());
                $(this).children('.projectschildren').hide();
                $(this).children('.projectschildren').siblings('.destarrow').hide();
                $(this).children('.projectschildren').siblings('.destproject').hide();
            }
        }); 
```

它似乎正在工作，但仍然隐藏了这个子元素的兄弟姐妹：

```
<div class="srcprojects" style=""></div> 
```

满足此条件的所有其他内容都已将样式设置`display:none;`为如下所示：

```
<div class="srcprojects" style="display: none;"></div> 
```

我在每个容器下都有多个 srcprojects。因为它是搜索，所以部分或全部将被隐藏。如果容器下的 srcproject 都不可见，我想要的是隐藏兄弟姐妹。

编辑：为上下文添加了周围的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T23:35:35.257

你有没有尝试过：

```
$(this).children('.srcprojects').is('visible'); 
```

**编辑**

其实应该是这样的：

```
$(this).children('.srcprojects').is(':visible'); 
```

这不适用于 chrome 中的某些内联元素。

# asp.net-mvc - Silverlight 在 MVC 网页中托管时引发异常

> ID：16114863
> 
> 赞同：0
> 
> 时间：2013-04-19T23:25:16.873
> 
> 标签：asp.net-mvc, silverlight, exception

我有一个 silverlight 项目，当我独立运行它（即运行实例）时，它可以完美运行，但是当我从我的 MVC 网站运行它时，它会出现一个异常，上面写着

```
Unhandled Error in Silverlight 2 Application
Object reference not set to an instance of an object.
   at TakingMyPicture.MainPage..ctor()
   at TakingMyPicture.App.Application_Startup(Object sender, StartupEventArgs e)
   at MS.Internal.CoreInvokeHandler.InvokeEventHandler(UInt32 typeIndex, Delegate handlerDelegate, Object sender, Object args)
   at MS.Internal.JoltHelper.FireEvent(IntPtr unmanagedObj, IntPtr unmanagedObjArgs, Int32 argsTypeIndex, Int32 actualArgsTypeIndex, String eventName, UInt32 flags) 
```

# bash - 如何在 BASH 中用一个替换项快速替换多个匹配项？

> ID：16114864
> 
> 赞同：0
> 
> 时间：2013-04-19T23:25:31.600
> 
> 标签：bash, optimization, replace

我有一个文件“items.txt”，其中包含我需要从文件“text.txt”中删除并替换为“111111111”的 100,000 个项目的列表。

我编写了这个脚本，它完全按照我的意图工作：

```
#!/bin/bash
a=0
b=`wc -l < ./items.txt`
while read -r line
do
    a=`expr $a + 1`
    sed -i "s/$line/111111111/g" text.txt
    echo "Removed ("$a"/"$b")."
done < ./items.txt 
```

此脚本查看“items.txt”中的吃线，然后用于`sed`从“text.txt”中删除每一行。

这个脚本虽然很慢。据我估计，从我计算机上的文件中删除所有项目需要 1 周多的时间。有没有更有效的方法来快速更换所有物品？

重击 4.1.5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T23:35:35.527

使用 sed 构建一个 sed 脚本来替换所有项目：

```
sed 's/^/s=/;s/$/=111111111=g/' items.txt | sed -f- text.txt 
```

**更新：**以下 Perl 脚本似乎更快：

```
#!/usr/bin/perl
use warnings;
use strict;

open my $ITEMS, '<', 'items.txt';
my @items = <$ITEMS>;
chomp @items;
my $regex = join '|', @items;
$regex    = qr/$regex/;

open my $TEXT, '<', 'text.txt';
while (<$TEXT>) {
    s/$regex/111111111/g;
    print;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T23:28:23.923

输出会减慢您的脚本。删除它，您会注意到显着的加速。要删除的行：

```
 echo "Removed ("$a"/"$b")." 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T23:36:32.450

您的脚本很慢，不仅是因为输出 ( `echo "Removed ("$a"/"$b")."`)。

**主要原因**是，你有

```
 sed -i "s/$line/111111111/g" text.txt 
```

**在一个while循环**中。例如，您`items.txt`有 10k 行，sed 行将执行 10k 次。也就是说，通读`text.txt`10k 次。如果你的 text.txt 也是 10k，那就是`10k * 10k`

你可以做得更好的是，两个文件只读取一次：

```
awk 'NR==FNR{a[$0];next}$0 in a{$0="1111111"}1' items.txt text.txt 
```

我没有测试，但它应该工作。

# web - Umbraco - 单个 Umbraco 实例上的两个网站 - 第二个站点提供 404

> ID：16114868
> 
> 赞同：1
> 
> 时间：2013-04-19T23:26:09.487
> 
> 标签：web, iis-7.5, http-status-code-404, umbraco

我在一个 Umbraco (v 4.7.1.1) 实例上建立了两个 Umbraco 网站。如果我访问第一个网站（首先在“内容”节点下列出）：

www.mysite.com

...我得到了正确的主页（主页嵌套在 content > www.mysite.com > Global > homepage）

但是，当我访问第二个网站时（直接在第一个网站下方的“内容”节点下列出）：

m.mysite.com

...我得到一个 404。该站点的主页以相同的方式嵌套（内容 > m.mysite.com > 全球 > 主页），我可以使用地址 m.mysite.com/global 访问主页/主页。我已经检查/尝试了以下内容：

*   Umbraco 中两个站点的“管理主机名”配置是正确的
*   我在 umbracoSettings.config 中将 useDomainPrefixes 设置为 true
*   我的 IIS 7.5 中没有重定向第二个域名的重定向
*   我的绑定在 IIS 中正确设置
*   我的 Umbraco 实例的 IIS 7.5 中的默认文档设置为 default.aspx。我已将其移至列表顶部
*   Web 服务器上的 hosts 文件将 m.mysite.com 指向正确的 IP
*   我的第二个网站的主页正在使用模板
*   尝试将属性添加到第二个“网站”的根节点使用的文档类型，别名为“umbracoRedirect”并键入“内容选择器”，并将节点指向我的主页（显然，这种方法无论如何都会有问题，即使有用）
*   我尝试向“全局”节点使用的文档类型添加一个属性，别名为“umbracoInternalRedirectId”并键入“内容选择器”，并将节点指向我的主页
*   尝试将属性添加到“全局”节点使用的文档类型，别名为“umbracoRedirect”并键入“内容选择器”，并将节点指向我的主页（显然，这种方法无论如何都会有问题，即使它有效）
*   尝试将我的第二个站点的主页直接放在第二个站点的根节点下方（尽管此页面的“链接到文档”显示为 m.mysite.dev/test/）
*   尝试将 umbracoInternalRedirectId 添加到网站节点本身，以指向根网站节点正下方的新主页
*   尝试了 iisreset 然后刷新我的 DNS 解析器缓存，该站点仍然给出 404
*   尝试完全重新发布两个网站
*   单独重新发布了第二个网站的所有节点，并单独发布了我在站点根节点下面创建的新主页
*   编辑了 web.config 文件
*   仔细检查了所有内容，尝试重新应用“管理主机名”配置，尝试重新执行“umbracoInternalRedirectId”，重新发布站点并再次重新启动 IIS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T04:07:33.597

我发现在 Umbraco 安装的物理文件夹结构中有一个文件 config\UrlRewriting 包含以下内容：

```
destinationUrl="~/global/en"

rewriteUrlParameter="ExcludeFromClientQueryString"

ignoreCase="true"/> 
```

因此，如果我进行更改以使我想成为移动网站主页的页面是以下结构中的页面“en”：

站点 2

*   全球的

    *   zh

它有效，因为 m。*mysite* .com 现在指向我的页面`http://m.*mysite*.com/global/en`。

这是我完成这项工作所需的原始步骤：

*   将主机“m”的 A 记录添加到我的域（即*m.mysite* .com）
*   右键单击 m。*mysite* .com Umbraco 站点 > 管理主机名 - 添加 m。我的网站*.com*
*   为 umbraco 网站添加绑定，用于 m。我的网站*.com*
*   编辑 umbracoSettings.config（在 W3Cms\config 中） - 设置为 true
*   可能需要重新启动 IIS 才能使设置生效

# iphone - UIScrollview 包含许多图像

> ID：16114870
> 
> 赞同：1
> 
> 时间：2013-04-19T23:26:21.130
> 
> 标签：iphone, objective-c, xcode

我在 Xcode 4.6 中使用 UIScrollview。我想在滚动视图中插入大约 30 张图像。在情节提要中我不能添加这么多，因为它实际上并不能让您在情节提要上向下滚动以添加更多图像，因此所有图像都相互重叠。

答案可能很简单，如果这是一个愚蠢的问题，请见谅。如何将这么多图像添加到滚动视图中，有没有办法像在 Android xml 中一样对其进行编码？或者无论如何没有图像重叠？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T23:58:36.660

还可以考虑使用 UITableView。这可能是处理这么多图像的更有效方式。您可以在它们显示时加载它们，而不是一次全部加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T23:47:14.137

您不会希望在 Interface Builder 中执行此操作 - 这将使其成为创建和维护的噩梦。

相反，用代码来做。你会想谷歌`UIScrollView tutorial`开始。这真的很简单——比手动拖出一堆图像视图要容易得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T00:09:29.030

所以这是我之前解决过的问题。有几种方法可以解决这个问题，我认为至少在 iOS 6.x 中新的首选方法可以选择使用 UICollectionView。

[UICollectionView 查看 Apple 文档](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UICollectionView_class/Reference/Reference.html)

这是一个很棒的教程网站，其中包含大量有用的信息

[UICollectionView 教程](http://www.raywenderlich.com/22324/beginning-uicollectionview-in-ios-6-part-12)

我想出的另一种解决方案是手动加载和放置图像。然后根据宽度所需的大小，我设置了 UIScrollView setcontentSize 属性。

```
//Clean Up and remove old buttons
for(int i=0; i < _localButtonArray.count; i++){
    [(CategoryButton*)[_localButtonArray objectAtIndex:i] removeFromSuperview];
}
[_localButtonArray removeAllObjects];

CGFloat baseX = 10,
        X = 0,
        Y = 0;
int xPadding = 20,
    yPadding = 12,
    index = 0,
    maxRow = 4,
    maxCol = 4,
    colCount = 0;
CGRect buttonFrame;

buttonFrame.size.height = 137;
buttonFrame.size.width  = 137;
buttonFrame.origin.y    = X;
buttonFrame.origin.x    = Y;

for(int i = 0;i < _localInfoArray.count ; i++){

    id object = [_localInfoArray objectAtIndex:i];

    if(index >= maxRow){
        index = 0;
        X = baseX;
        Y += buttonFrame.size.height + yPadding;
        if(colCount >= (maxRow * maxCol)){
            colCount=0;
            baseX += 637;
            Y = 0;
        }
    }
    X = baseX + (index * (buttonFrame.size.width + xPadding));
    index++;
    colCount++;

    buttonFrame.origin.x = X;
    buttonFrame.origin.y = Y + yPadding;
    /*
     * Custom button class
     */
    CategoryButton * categoryButton = [[CategoryButton alloc]initWithFrame:buttonFrame Object:object];

    //Add action
    [categoryButton addTarget:self action:@selector(categoryButtonPressed:) forControlEvents:UIControlEventTouchUpInside];

    [categoryButton.titleLabel setNumberOfLines:3];
    [categoryButton.titleLabel setLineBreakMode:NSLineBreakByWordWrapping];
    [categoryButton.titleLabel setFont:[UIFont fontWithName:@"Helvetica-Bold" size:19]];
    [categoryButton.titleLabel setTextAlignment:NSTextAlignmentCenter];
    [categoryButton setMultipleTouchEnabled:NO];

    [_localButtonArray addObject:categoryButton];
    [self.view addSubview:categoryButton];

} 
```

还有很多其他代码不在此处，但布局页面在此处处理。即使这不是最佳解决方案，但希望它会对您有所帮助。

祝你好运^_^

# c++ - C++：在没有 cstdlib 的情况下重新分配内存

> ID：16114874
> 
> 赞同：0
> 
> 时间：2013-04-19T23:27:08.973
> 
> 标签：c++, dynamic-memory-allocation

找不到问题的确切答案：

释放内存并再次分配是不使用 cstdlib 重新分配内存的唯一方法吗？如果不是这样，那么可能的解决方案是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T23:31:28.240

也许你的意思是当你用内存加载 std::vector （或其他容器）时，删除所有元素，然后调用 clear 释放内存，然后在其中分配新项目，从而分配更多内存？在这种情况下，随着容器中内存的增长，容器可能会根据需要重新分配其内存。

既然你提到你正在创建一个向量：

在我们需要这样做的项目中，因为我们没有向量实现（嵌入式），通常分配一组比最初需要的更大的内存块，以防止不断的内存重新分配，这会产生大量的复制成本并导致内存碎片化。一个常见的方案是为应用程序分配一个“合理的”大小，然后在达到限制时将该大小加倍。如果用户曾经请求减小缓冲区的大小，或者在初始化时设置为某个大小，那么我们将忽略此启发式并使用请求的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T23:40:35.027

如果您正在实现自己的向量类，那么您确实需要正确复制向量的内容，而不是 use `realloc`，因为您不知道对象在被复制时本身在做什么（或在 C++11 中相关案件，搬家）。例如，假设您有一个执行以下操作的对象：

```
class B;

class A
{
  private:
    B* bp;
  public:
    A(B *p) : bp(p)
    {
    }
};

class B
{
  public:
   A a;
   B() : A(this)
   {
      ... 
   }
 };

MyVector<B> v; 
```

如果将对象复制到不同的地址，而不调用构造函数，则`bp`指针`A`将指向某个“随机”位置。试图找到这将是一个非常讨厌的错误。

[是的，上面的类中缺少很多东西——这并不意味着完整的类声明等]

# algorithm - 随叫随到的夜间调度算法

> ID：16114877
> 
> 赞同：1
> 
> 时间：2013-04-19T23:27:17.663
> 
> 标签：algorithm, scheduling, np-complete

我作为 RA 在我大学的宿舍工作，每天晚上我们需要两个 RA 随叫随到（能够应对事件和紧急情况）。每个月，RA 都会提交他们不能待命的夜晚（由于某种冲突）。有男性和女性 RA。我正在尝试提出一种有效的算法来找到满足以下要求的任何特定月份的最佳待命之夜安排：

*   没有 RA 安排在他或她列为不可用的晚上。
*   没有 RA 待命的时间超过每月指定的夜数。
*   在任何给定的三晚范围内，没有 RA 两次待命。
*   每晚都有两个 RA 待命。
*   如果可能，每晚都有一名男性和一名女性 RA 随叫随到。

做一些研究，我发现这是一个资源受限的调度问题，它被认为是 NP 完全的。因此，我不需要找到最佳解决方案，只要找到任何可行的解决方案即可。

到目前为止，我已经考虑了以下方法：

*   一个简单的 RA x 晚的二维数组，其中每个单元格都保存一个布尔值，以回答该 RA 是否在当晚待命。我可以将 RA 放在两个优先级队列中（一个男性和一个女性），按照他们到目前为止有多少个夜晚、距离他们最后一个待命之夜已经过去了多长时间排序，然后简单地遍历夜晚，选择一个 RA从每个队列中提取，然后如果我遇到了没有人可以在特定晚上工作的死胡同，则回溯。
*   三方图，一侧是男性 RA，另一侧是女性 RA，最后一侧是夜晚。在解决方案中，每晚都会有一个男性和一个女性 RA 的优势。我将从连接所有边缘开始，然后删除边缘，直到找到解决方案。
*   使用上述结构的某种遗传方法。

您建议我使用哪种方法？有什么我没有想到的可能会更好吗？这不是家庭作业问题；我正在尝试开发一个网站，让我的员工和可能的校园内其他员工可以轻松提交日期偏好，然后生成适合每个人的时间表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:30:31.397

使用提到的二进制变量，您的问题可以表述为[整数线性规划](http://en.wikipedia.org/wiki/Integer_linear_programming)(ILP)。如果变量不超过几千个，则可以通过[GLPK](http://www.gnu.org/software/glpk/)之类的求解器最佳地求解。除最后一个之外的所有约束都已经是线性的。对于“如果可能，每晚都有一名男性和一名女性 RA 待命”，您可以为每晚引入另一个布尔变量“x”，有一个约束“待命女性 RA 的总和 <= 1 + x”，并且然后最小化 x 的总和，从而允许以一定的代价违反约束。如果您以文本格式向求解器提供数据，这也应该不太难实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T23:49:16.417

我推荐 2d 数组，但不是按照从头到尾的顺序遍历夜晚，而是按照约束从最大到最小的顺序遍历夜晚 - 换句话说，从由于冲突而可用 RA 最少的夜晚开始。如果您采用这种方法，这种启发式也可以应用于三方图 - 这基本上是域表示的问题，此时算法本身不受影响。

问题是当您到达最后几个晚上并发现没有可用的 RA 时您会做什么。此时，您将进行[本地搜索](http://en.wikipedia.org/wiki/Local_search_%28optimization%29)以尝试找到可行的解决方案，例如您为 NightA 选择了 RA1，但当晚 RA2 和 RA3 也可用，因此您选择 RA2 或 RA3 以查看是否可以释放 RA1对于您没有可用 RA 的那晚。

# .net - 具有某些特殊字符的密码的正则表达式，不包括所有其他字符

> ID：16114882
> 
> 赞同：3
> 
> 时间：2013-04-19T23:27:51.093
> 
> 标签：.net, regex

我必须为指定为的密码提供数据注释正则表达式：

```
min 8 chars
min 1 upper
min 1 lower
min 1 numeric
min 1 special char which can ONLY be one of the following:$|~=[]'_-+@. (and the password can contain no other special chars besides these) 
```

排除特殊字符让我很头疼。

我想出了这个，但它不起作用：

```
"^.*(?=.{8,})(?=.*[a-z])(?=.*[A-Z])(?=.*[\d])**(?(?!.*[^$|~=[\]'_\-+@.])|([^\W\w])).*$** 
```

它将我输入的所有内容都解决为无效。

而这（对于特殊字符）本身确实有效：

```
"(?(?!.*[^$|~=[\]'_\-+@.])|([^\W\w])).*$" 
```

我知道第一部分有效，那么让它们一起工作我缺少什么？

或者，是否有更简单的方法来实现这一目标？

（.NET 环境）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T23:47:10.443

如果您真的想以一种正则表达式模式执行此操作：

```
^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[$|~=[\]'_+@.-])[a-zA-Z0-9$|~=[\]'_+@.-]{8,}$ 
```

这应该够了吧。我们要求小写字母、大写字母、数字和符号具有前瞻功能。请注意，在字符类中，您需要移动`-`到末尾或转义它。否则，它会创建一个您不想要的字符范围。然后我们使用普通匹配来确保只有允许的字符，并且至少有8个。

但是，进行多次测试通常是一种更好的方法。单独运行这些模式：

```
[a-z]                     // does the input contain a lower case letter?
[A-Z]                     // does the input contain an upper case letter?
\d                        // does the input contain a digit?
[$|~=[\]'_+@.-]           // does the input contain one of the required symbols?
[^a-zA-Z0-9$|~=[\]'_+@.-] // are there invalid characters? 
```

前 4 个应该返回`true`，最后一个应该返回`false`。此外，您可以检查`input.Length >= 8`. 这使代码更具可读性，并允许您发出有关未满足**哪个条件的适当错误消息。**

事实上，由于最后一个模式确保只有所需的字符，我们可以将“必须有一个符号条件”简化为`[^a-zA-Z0-9]`（在两种方法中）。但我不确定这是否会使事情更具可读性。

# c++ - C ++ boost json ptree解析器无法解析字符串

> ID：16114886
> 
> 赞同：4
> 
> 时间：2013-04-19T23:28:53.077
> 
> 标签：c++, json, serialization, boost-propertytree

我正在尝试使用 ptree 通过 boost message_queue 发送 json 消息以在本地存储信息。

这是接收器的代码：

```
#include <boost/interprocess/ipc/message_queue.hpp>
#include <iostream>
#include <string>
//#include <boost/archive/text_iarchive.hpp>
#include <boost/property_tree/ptree.hpp>
#include <boost/property_tree/json_parser.hpp>
#include <boost/serialization/string.hpp>
using boost::interprocess::message_queue;
using boost::property_tree::ptree; using boost::property_tree::read_json;
#define MAX_SIZE 1000

int main()
{
    message_queue mq (boost::interprocess::open_or_create,"coda",10,MAX_SIZE);
    message_queue::size_type recv_size;
    unsigned int priority;
    ptree pt;

    std::stringstream iss;
    std::string serialized_string;
    serialized_string.resize(MAX_SIZE);
    mq.receive(&serialized_string[0],MAX_SIZE,recv_size,priority);
    iss << serialized_string;
    std::istringstream is(iss.str());
    read_json(is, pt);                                                                                                                                                                                     

    std::cout pt.get<std::string>("prefix") << pt.get<std::string>("faceID") << std::endl;

} 
```

这是发件人的代码：

```
#include <boost/interprocess/ipc/message_queue.hpp>
#include <boost/serialization/string.hpp>
#include <string>
#include <sstream>
#include <boost/property_tree/ptree.hpp>
#include <boost/property_tree/json_parser.hpp>
using boost::interprocess::message_queue;
using boost::property_tree::ptree; using boost::property_tree::write_json;

#define MAX_SIZE 1000

void send(ptree pt)
{
    std::stringstream oss;
    write_json(oss,pt);

    std::string serialized_strings(oss.str());
    message_queue mq(boost::interprocess::open_only,"coda");
    mq.send(serialized_strings.data(), serialized_strings.size(),0);
    std::cout << oss.str() << std::endl;
}

int main()                                                                                                                                                                                                 
{
    ptree pt;
    pt.put("prefix","standard");
    pt.put("faceID",42);
    send(pt);
} 
```

发件人工作并具有以下输出：

```
$ ./sendptree                                                         
{
    "prefix": "standard",
    "faceID": "42"
} 
```

接收器正确接收数据但无法解析它（使用 read_json 调用）。

```
$ ./recvptree                                                             
{
    "prefix": "standard",
    "faceID": "42"
}

terminate called after throwing an instance of 'boost::exception_detail::clone_impl<boost::exception_detail::error_info_injector<boost::property_tree::json_parser::json_parser_error> >'
  what():  <unspecified file>(5): expected end of input
[1]    24052 abort      ./recvptree 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T06:20:27.647

我认为这只是您的接收缓冲区没有以空值终止。此代码有效：

服务器：

```
#include <boost/interprocess/ipc/message_queue.hpp>
#include <boost/serialization/string.hpp>
#include <string>
#include <sstream>
#include <boost/property_tree/ptree.hpp>
#include <boost/property_tree/json_parser.hpp>
using boost::interprocess::message_queue;
using boost::property_tree::ptree; using boost::property_tree::write_json;

#define MAX_SIZE 1000

void send(ptree pt)
{
    std::stringstream oss;
    write_json(oss,pt);

    message_queue mq(boost::interprocess::open_or_create,"coda",10,MAX_SIZE);
    mq.send(oss.str().c_str(), oss.str().size(),0);
    std::cout << oss.str() << std::endl;
    system("PAUSE");
}

int main()                                                                                                                                                                                                 
{
    ptree pt;
    pt.put("prefix","standard");
    pt.put("faceID",42);
    send(pt);
} 
```

客户：

```
#include <boost/interprocess/ipc/message_queue.hpp>
#include <string>
#include <strstream>
#include <boost/property_tree/ptree.hpp>
#include <boost/property_tree/json_parser.hpp>
#include <boost/serialization/string.hpp>
using boost::interprocess::message_queue;
using boost::property_tree::ptree; 
using boost::property_tree::read_json;
#define MAX_SIZE 1000

int main()
{
    message_queue mq (boost::interprocess::open_or_create,"coda",10,MAX_SIZE);
    size_t recv_size;
    unsigned int priority;
    ptree pt;

    char buffer[MAX_SIZE];
    mq.receive(buffer,MAX_SIZE,recv_size,priority);
    buffer[recv_size] = 0;
    std::istringstream is(buffer);
    read_json(is, pt);                                                                                                                                                                                     

    std::cout << "prefix: " << pt.get<std::string>("prefix") << " -- faceID: " << pt.get<std::string>("faceID") << std::endl;
    system("PAUSE");
} 
```

# linux - 如何从 node.js 应用程序通过 SSH 连接到服务器？

> ID：16114897
> 
> 赞同：3
> 
> 时间：2013-04-19T23:31:32.523
> 
> 标签：linux, node.js, ssh, child-process

```
var exec = require('child_process').exec;

exec('ssh my_ip',function(err,stdout,stderr){
    console.log(err,stdout,stderr);
}); 
```

这只是冻结 - 我猜，因为`ssh my_ip`要求输入密码，是交互式的，等等。如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T23:35:26.187

有一个 node.js 模块编写用于在 SSH 中使用名为 ssh2 的节点执行任务，由 mscdex 编写。可以在[这里找到。](https://github.com/mscdex/ssh2)你想要的一个例子（来自自述文件）是：

```
var Connection = require('ssh2');

var c = new Connection();
c.on('connect', function() {
  console.log('Connection :: connect');
});
c.on('ready', function() {
  console.log('Connection :: ready');
  c.exec('uptime', function(err, stream) {
    if (err) throw err;
    stream.on('data', function(data, extended) {
      console.log((extended === 'stderr' ? 'STDERR: ' : 'STDOUT: ')
                  + data);
    });
    stream.on('end', function() {
      console.log('Stream :: EOF');
    });
    stream.on('close', function() {
      console.log('Stream :: close');
    });
    stream.on('exit', function(code, signal) {
      console.log('Stream :: exit :: code: ' + code + ', signal: ' + signal);
      c.end();
    });
  });
});
c.on('error', function(err) {
  console.log('Connection :: error :: ' + err);
});
c.on('end', function() {
  console.log('Connection :: end');
});
c.on('close', function(had_error) {
  console.log('Connection :: close');
});
c.connect({
  host: '192.168.100.100',
  port: 22,
  username: 'frylock',
  privateKey: require('fs').readFileSync('/here/is/my/key')
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-18T22:01:44.590

此页面上的其他库具有较低级别的 API。

所以我为它写了一个轻量级的包装器。[node-ssh](https://www.npmjs.com/package/node-ssh)在 MIT 许可下也可以在[GitHub 上获得。](https://github.com/steelbrain/node-ssh)

这是有关如何使用它的示例。

```
var driver, ssh;

driver = require('node-ssh');

ssh = new driver();

ssh.connect({
  host: 'localhost',
  username: 'steel',
  privateKey: '/home/steel/.ssh/id_rsa'
})
.then(function() {
  // Source, Target
  ssh.putFile('/home/steel/.ssh/id_rsa', '/home/steel/.ssh/id_rsa_bkp').then(function() {
    console.log("File Uploaded to the Remote Server");
  }, function(error) {
    console.log("Error here");
    console.log(error);
  });
  // Command
  ssh.exec('hh_client', ['--check'], { cwd: '/var/www/html' }).then(function(result) {
    console.log('STDOUT: ' + result.stdout);
    console.log('STDERR: ' + result.stderr);
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-27T03:58:38.607

检查我的代码：

```
// redirect to https:
app.use((req, res, next) => {
    if(req.connection.encrypted === true) // or (req.protocol === 'https') for express
        return next();

    console.log('redirect to https => ' + req.url);
    res.redirect("https://" + req.headers.host + req.url);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-18T19:15:17.323

最好的方法是使用`promisify`和`async/await`。例子：

```
const { promisify } = require('util');
const exec = promisify(require('child_process').exec);

export default async function (req, res) {
  const { username, host, password } = req.query;
  const { command } = req.body;

  let output = {
    stdout: '',
    stderr: '',
  };

  try {
    output = await exec(`sshpass -p ${password} ssh -o StrictHostKeyChecking=no ${username}@${host} ${command}`);
  } catch (error) {
    output.stderr = error.stderr;
  }

  return res.status(200).send({ data: output, message: 'Output from the command' });
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-08-06T02:16:11.047

纯 js/node 方式 ssh 进入主机。特别感谢 ttfreeman。假设 ssh 密钥在主机上。不需要请求对象。

```
 const { promisify } = require('util');
const exec = promisify(require('child_process').exec);
require('dotenv').config()

//SSH into host and run CMD 
const ssh = async (command, host) => {
let output ={};
  try {
    output['stdin'] = await exec(`ssh -o -v ${host} ${command}`)
  } catch (error) {
    output['stderr'] = error.stderr
  }

  return output
}

exports.ssh = ssh 
```

# ios - ios问题谷歌地图

> ID：16114899
> 
> 赞同：0
> 
> 时间：2013-04-19T23:31:37.270
> 
> 标签：ios, google-maps-sdk-ios

我正在学习为 iOS 开发。我正在使用适用于 iOS 的 Google Maps API 来制作地图。我在我的项目中放入了一个视图，该视图已放入我的检查器元素中，例如 GMSMapView。

在我的代码中，我将此代码放在下面：

```
- (void) setMapView:(GMSMapView *)mapView {

    if (!mapView) {
        mapView = [[GMSMapView alloc] initWithFrame:mapView.bounds];
    }

    googleMap = mapView;

} 
```

该地图有效，但我想在这张地图上设置我的相机。在`viewDidLoad`函数上，我把这段代码放在下面：

```
GMSCameraPosition *camera = [GMSCameraPosition cameraWithLatitude:-33.8683
                                                        longitude:151.2086
                                                             zoom:12];

self.mapView = [GMSMapView mapWithFrame:CGRectZero camera:camera]; 
```

但谷歌地图只是在伦敦加载这张地图，我不知道为什么。这协调它来自悉尼。我已经尝试过`googleMap = [GMSMapView mapWithFrame:CGRectZero camera:camera];`，但也不起作用。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T21:06:23.807

我有同样的问题。分配地图后，您可以通过动画到相机位置来修复它。我在动画到新的摄像机位置之前添加了延迟。这行得通。

```
- (void)viewDidLoad
{
    self.mapView = [[GMSMapView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)]; // Any Frame

    double delayInSeconds = 0.2;
    dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delayInSeconds * NSEC_PER_SEC));
    dispatch_after(popTime, dispatch_get_main_queue(), ^(void){

        GMSCameraPosition *camera = [GMSCameraPosition cameraWithLatitude:-33.8683
                                                                longitude:151.2086
                                                                     zoom:12];

        [self.mapView animateToCameraPosition:camera];

    });
} 
```

# c# - 如何将 xaml 中的数据触发器绑定到代码定义的依赖属性？

> ID：16114900
> 
> 赞同：4
> 
> 时间：2013-04-19T23:31:48.587
> 
> 标签：c#, xaml, data-binding, datatrigger

我的窗口代码定义了一个依赖属性，“活动”......

```
public partial class MainWindow : Window
{
  public MainWindow() { InitializeComponent(); }

  public bool Active
  {
     get { return (bool) GetValue(ActiveProperty); }
     set { SetValue(ActiveProperty, value); }
  }
  public static readonly DependencyProperty ActiveProperty =
      DependencyProperty.Register("Active", typeof(bool), typeof(MainWindow), new UIPropertyMetadata(false));
} 
```

然后我使用 xaml 中的两个复选框绑定到该属性。我还想根据该属性更改矩形的填充。我怎样才能使这项工作？

```
<Window x:Class="WpfTest.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow"
        Height="350"
        Width="525"
        DataContext="{Binding RelativeSource={RelativeSource Self}}">
  <StackPanel>
    <CheckBox IsChecked="{Binding Active}" />
    <CheckBox IsChecked="{Binding Active}" />
    <Rectangle Fill="Gray"
               Width="50"
               Height="50">
      <Rectangle.Style>
        <Style TargetType="Rectangle">
          <Style.Triggers>
            <DataTrigger Binding="{Binding Active}"
                         Value="True">
              <Setter Property="Fill"
                      Value="Green" />
            </DataTrigger>
          </Style.Triggers>
        </Style>
      </Rectangle.Style>
    </Rectangle>
  </StackPanel>
</Window> 
```

选中一个框会自动检查另一个框，但不会更改矩形颜色:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T12:58:02.013

本地设置的属性总是覆盖样式集属性，因此您需要删除本地设置的属性并在您的样式中设置默认值：

```
<Rectangle Width="50" Height="50">
    <Rectangle.Style>
        <Style TargetType="Rectangle">
            <Setter Property="Fill" Value="Gray" />
            <Style.Triggers>
                <DataTrigger Binding="{Binding Active}" Value="True">
                    <Setter Property="Fill" Value="Green"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Rectangle.Style>
</Rectangle> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T12:50:41.670

一旦您设置了一个属性，该样式在该属性上定义的触发器将不再起作用。您可以定义另一个 dataTrigger 来更改 False 值的背景：

```
 <StackPanel>
        <CheckBox IsChecked="{Binding Active}"/>
        <CheckBox IsChecked="{Binding Active}"/>
        <Rectangle Width="50" Height="50">
            <Rectangle.Style>
                <Style TargetType="Rectangle">
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding Active}" Value="True">
                            <Setter Property="Fill" Value="Green"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding Active}" Value="false">
                            <Setter Property="Fill" Value="Gray"/>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </Rectangle.Style>
        </Rectangle>
    </StackPanel> 
```

# hook - gitolite 电子邮件前缀 GL_REPO 未扩展

> ID：16114903
> 
> 赞同：1
> 
> 时间：2013-04-19T23:32:00.600
> 
> 标签：hook, gitolite

我在 Ubuntu 12.04 上使用 gitolite v2.2。

GL_REPO 变量不会为 emailprefix 扩展。

在我的 gitolite.conf 文件中，我有这个：

```
repo @all
    config hooks.mailinglist = xxx@somewhere
    config hooks.emailprefix = "[%GL_REPO] "
    config hooks.emailmaxlines = 1000

...
repo testing
    RW+ = @all 
```

当我将更改推送到测试存储库时，我收到了电子邮件，但主题行如下所示：

```
[%GL_REPO] branch master updated. 
```

我的配置中是否有错字，我错过的设置，或者这是 v2.2 中的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T08:58:12.533

文件中变量的替换`GL_REPO`仅`gitolite.conf`记录在 gitolite v3（或“g3”）页面中：

*   [管理员配置](http://gitolite.com/gitolite/gitolite.html#admin-conf)
*   [“git-config”键和值](http://gitolite.com/gitolite/git-config.html)
*   [`conf/gitolite.conf`文件_](http://gitolite.com/gitolite/admin.html#conf)

对于 g2 (gitolite V2.x)，它仅被提及（并扩展）用于**[gitolite hooks](http://gitolite.com/gitolite/g2/hooks.html#admin_environment_variables_available_to_hooks_)**。

因此，升级到 v3 是可行的方法，因为它不会影响您现有的任何裸存储库：请参阅[迁移页面](http://gitolite.com/gitolite/migr.html)。

# android - 即使在使用不同的线程之后，应用程序也可能在主线程上做太多的工作

> ID：16114905
> 
> 赞同：0
> 
> 时间：2013-04-19T23:32:22.293
> 
> 标签：android, multithreading, nullpointerexception

您好，我是 android 新手，正在关注一个 yamba 应用程序，该应用程序在 Twitter 上发布和获取状态。在添加新部分之前，我工作得很好。

我使用不同的线程来执行帖子。但是一旦我运行该项目，logcat 会说“应用程序可能在主线程上做了太多工作”。当我输入状态时，“线程以未捕获的异常退出”，由于此 doInBackGround 方法中的 NullPointException。

任何人都可以帮助我吗？？我什至注册了一个 Twitter 帐户以确保它不为空。但是非常感谢您的任何回答！

```
 public class MainActivity extends Activity implements OnClickListener,TextWatcher
    {
    private static final String TAG="StatusActivity";
    EditText editText;
    Button buttonUpdate;
    TextView textCount;
    private YambaApplication yamba;

//constructor
     @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

editText=(EditText) findViewById(R.id.editText);
buttonUpdate=(Button) findViewById(R.id.buttonUpdate);
textCount=(TextView) findViewById(R.id.textCount);
textCount.setText(Integer.toString(140));
textCount.setTextColor(Color.GREEN);

buttonUpdate.setOnClickListener(this);
editText.addTextChangedListener(this);
this.yamba=(YambaApplication)getApplication();
}   

    //Main task of posting, three method of AsyncTask
class PostToTwitter extends AsyncTask<String,Integer,String>
{
    @Override
    protected String doInBackground(String...statuses)
    {
        try{
             Twitter.Status status=yamba.getTwitter().updateStatus(statuses[0]);
             return status.text;
        }
        catch(TwitterException e){
            Log.e(TAG, e.toString());
            e.printStackTrace();
            return "Failed to post";
        }
    } 
```

yamba应用java中有这个任务：

```
 public synchronized Twitter getTwitter(){
    if(twitter==null)
    {
        String username,password,APIroot;
        username=prefs.getString("username", "");
        password=prefs.getString("passord", "");
        APIroot=prefs.getString("APIroot", "http://yamba.marakana.com/api");

     if ( !TextUtils.isEmpty(username) && !TextUtils.isEmpty(password) && !TextUtils.isEmpty(APIroot) )
         {
            twitter= new Twitter(username,password);
             twitter.setAPIRootUrl(APIroot);
          }
     }
    return this.twitter;
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T07:40:14.993

不要在也服务于 UI 的主循环中执行任何阻塞操作。在这种情况下，这包括向远程系统、twitter 和 yamba 发出请求。虽然它似乎已移至不同的线程，但您仍然在阻止 yamba 接口，同时在那里发出请求，这也阻止它用于其他用途。

# perl - DBI 上的 ORA-12154 错误->在 Solaris 10 中使用 Oracle Instant Client 连接到 Oracle 数据库

> ID：16114916
> 
> 赞同：1
> 
> 时间：2013-04-19T23:33:24.200
> 
> 标签：perl, oracle11g, dbi, solaris-10, tnsnames

我已经为这个问题拉了两天的头发：

我正在尝试获取一个 perl 脚本来与 Oracle 数据库交互。我有一个新服务器，我想在上面部署我的应用程序。该脚本以前有效。

这是我到目前为止所做的：

将我的 tnsnames.ora 文件放在 Instantclient/network/admin 中：

```
ls -la network/admin/
total 8
drwxrwxrwx   2 m staff        512 Apr 19 09:54 .
drwxrwxrwx   3 m staff        512 Mar 28 15:56 ..
-rwxrwxrwx   1 m staff        777 Apr 19 09:54 tnsnames.ora 
```

我的 Perl 脚本如下所示：

```
 12 use CGI;
   13 use DBI;
   14 use Data::Dumper;
   15 use strict;
   16 
   28 $ENV{ORACLE_HOME} = "/xxx/instantclient/";
   29 
   32 $ENV{'LD_LIBRARY_PATH'} = "xxx/instantclient/lib";
   33 
   35 use DBD::Oracle;
   36 
   37 print "DBI::VERSION: $DBI::VERSION\n";
   38 print "$DBD::Oracle::VERSION\n";
   66 my $dbh = DBI->connect("dbi:Oracle:host=computer;port=1521;sid=mydatabase", "user", "pass");
   67 my $sth = $dbh->prepare("SELECT sysdate FROM dual");
   68 my $rv = $sth->execute; 
   69 DBI::dump_results($sth) if $rv;
   70 $dbh->disconnect;
   71 
   72 print "$database $dbUser $dbPassword \n";
   73 
   74 my $dbh = DBI->connect( $database, $dbUser, $dbPassword ) or die("PROBLEM WITH LINE:\n$! , stopped"); 
```

此脚本产生以下输出：

```
DBI::VERSION: 1.609
DBD::Oracle version: 1.24
'19-APR-13'
1 rows
dbi:Oracle:mydatabase user pass 
DBI connect('mydatabase','user',...) failed: ORA-12154: TNS:could not resolve the connect identifier specified (DBD ERROR: OCIServerAttach) at ./code.pl line 74 
```

我的 tnsnames.ora 文件包含以下条目：

```
mydatabase =
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = computer )(PORT = 1521))
    (CONNECT_DATA =
      (SERVICE_NAME = service.computer.com)
    )
  ) 
```

这个 tnsnames.ora 文件是从一台正常工作的机器上复制的，所以我相信它可以工作。

奇怪的是，我可以在不使用 tnsnames.ora 文件的情况下连接到代码，但是当我尝试使用它时，它会中断。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-10-11T08:18:43.250

不确定它是否有帮助，但以下内容对我有用：

使用 tnsnames.ora（在 $ORACLE_HOME/network/admin 目录内）进行本地连接：

```
my $db = DBI->connect( "dbi:Oracle:mydatabase", "scott", "tiger" ); 
```

并且不使用 tnsnames.ora 进行连接：

```
my $db = DBI->connect("dbi:Oracle:host=$host;sid=$sid;port=1521",$user,$passwd)
    || die( $DBI::errstr . "\n" ); 
```

其中 $host, $sid 必须事先定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-04T14:16:08.260

This is an old post, but the problem is generally a connectivity issue. To resolve this problem you need to ensure connectivity is allowed from the client side to server side on port 1521\. You can perform a test by issuing this command on the client side "telnet 1521" You should receive a blank screen which indicates a successful connection into the database. Otherwise, there is an ACL or firewall blocking port 1521 between the path.

# c++ - 指纹调用导致 C++ 中的段错误

> ID：16114918
> 
> 赞同：0
> 
> 时间：2013-04-19T23:33:39.877
> 
> 标签：c++, segmentation-fault, fingerprint

我正在尝试使用 libfprint 在 C++ 中编写一个简单的指纹扫描程序，但是它在运行时会间歇性地出现段错误。Valgrind 说错误出现在对 fp_enroll_finger 的调用中，这与我的调试一致，但除此之外，我完全不知道是什么导致了这个错误。有时程序运行得很好，但有时它似乎在程序运行一段时间后始终出现段错误？继承人的代码：

```
#include <iostream>

extern "C"
{
    #include <libfprint/fprint.h>
}

using namespace std;

fp_dev * fpdev;
fp_print_data ** fpdata;

bool createDevice();

int main(int argc, char **argv)
{
    int r = fp_init();
    if(r != 0)
    {
        return r;
    }

    while(createDevice())
    {
        cout << "Scan right index finger" << endl;
        int enrollStatus = fp_enroll_finger(fpdev, fpdata);

        if(enrollStatus != 1)
        {
            cout << "Bad scan" << endl;
            fp_dev_close(fpdev);
        }
        else
        {
            cout << "Good scan" << endl;
            fp_print_data_save(fpdata[0], RIGHT_INDEX);
            break;
        }
    }

    if(fpdev != NULL)
    {
        fp_dev_close(fpdev);
    }

    fp_exit();
    return 0;
}

bool createDevice()
{
    fp_dscv_dev ** listOfDiscoveredDevs;
    fp_dscv_dev * discoveredDevice;
    listOfDiscoveredDevs = fp_discover_devs();
    discoveredDevice = listOfDiscoveredDevs[0];

    if(discoveredDevice != NULL)
    {
        cout << "Device found" << endl;
        fpdev = fp_dev_open(discoveredDevice);
    }
    else
    {
        cout << "No device found" << endl;
        return false;
    }

    fp_dscv_devs_free(listOfDiscoveredDevs);
    return true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T23:38:44.030

您需要将`fpdev`and定义`fpdata`为：

```
fp_dev * fpdev;
fp_print_data * fpdata; 
```

并将它们用作：

```
fp_enroll_finger(&fpdev, &fpdata); 
```

当您不再需要 fpdata 时，也不要忘记释放它`fp_print_data_free`

```
fp_dev * fpdev;
fp_print_data ** fpdata; 
```

将创建 2 个指向随机内存位置并导致段错误的未初始化指针，一旦`fp_enroll_finger`尝试访问该位置。检查`fp_enroll_finger`返回值也很有用。

# sql - 以 3 种不同格式列出系统日期？（甲骨文 11g）

> ID：16114922
> 
> 赞同：0
> 
> 时间：2013-04-19T23:34:19.873
> 
> 标签：sql, oracle, oracle11g

我遇到了一个问题，我被要求以三种不同的格式列出系统日期：

我使用了以下两种格式，但我想知道第三种格式是什么？

格式 #1：SYSDATE

[http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions172.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions172.htm)

格式 #2：SYSTIMESTAMP

[http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions173.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions173.htm)

我正在使用 Oracle 11g。请让我知道上述格式是否正确，在这种情况下，第三种格式是什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T23:53:59.713

如果有人问我这个问题，我会使用

```
to_char(sysdate, 'SomeFormat') 
```

三次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T10:05:54.990

[为了稍微扩展 Dan Bracuk 的答案，您可以从datetime 格式元素](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements004.htm#CDEHIFJA)构建三个格式模型。三个典型的可能是：

```
select to_char(sysdate, 'YYYY-MM-DD') as format1,
    to_char(sysdate, 'DD/MM/YYYY') as format2,
    to_char(sysdate, 'DD-Mon-RR') as format3
from dual; 
```

在我的语言环境中给出：

```
FORMAT1    FORMAT2    FORMAT3
---------- ---------- ------------------
2013-04-20 20/04/2013 20-Apr-13 
```

根据您所在的世界的哪个部分和当地的习俗，您可能更喜欢第二个作为`'MM/DD/YYYY'`, 给予`'04/20/2013'`。

# vb.net - 始终保持 My.Settings VB.Net

> ID：16114925
> 
> 赞同：0
> 
> 时间：2013-04-19T23:34:30.543
> 
> 标签：vb.net, visual-studio-2012, save, my.settings

我有一个应用程序，我需要始终保存 my.settings。我注意到，每当您更改文件位置或在另一台计算机上运行时，它们都会被清除。有什么方法可以防止这种情况。当应用程序更新时也会发生这种情况。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T20:25:45.820

以下是通过升级保留设置的方法：

（您还需要定义一个项目 - 属性 - 将“ApplicationVersion”的设置设置为字符串；您可以使用“尚未设置”的初始值来启动它）

```
Private Sub SetSettingsVersion()

    Dim a As System.Reflection.Assembly = System.Reflection.Assembly.GetExecutingAssembly()
    Dim appVersion As Version = a.GetName().Version
    Dim appVersionString As String = appVersion.ToString

    If My.Settings.ApplicationVersion <> appVersion.ToString Then
        My.Settings.Upgrade()
        My.Settings.ApplicationVersion = appVersionString
    End If

End Sub 
```

# c++11 - 如果没有定义 tgamma() 函数怎么办？

> ID：16114928
> 
> 赞同：0
> 
> 时间：2013-04-19T23:34:52.693
> 
> 标签：c++11, c++builder, math.h, cmath, gamma

我正在尝试`tgamma()`从标准库中使用。当我尝试编译时，我收到错误消息：

> 调用未定义的函数 tgamma

我有指令`#include <cmath>`。我使用 Embarcadero C++ Builder XE3，它声称支持 C++11 标准。什么可能是我的问题，以及如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-21T17:58:44.093

[Boost](http://www.boost.org/)包含一个[`tgamma`函数](http://www.boost.org/doc/libs/1_35_0/libs/math/doc/sf_and_dist/html/math_toolkit/special/sf_gamma/tgamma.html)。

```
#include <boost/math/special_functions/gamma.hpp>
...
double rootPi = boost::math::tgamma<double>(0.5); 
```

当然，你总是可以切换到不同的编译器，比如*gcc*。

# python - SqlAlchemy：加入另一个对象

> ID：16114939
> 
> 赞同：0
> 
> 时间：2013-04-19T23:35:45.203
> 
> 标签：python, sqlalchemy

我的小网站有一张评论表和一张投票表。该网站的每个用户都可以对每条评论进行一次投票。

在向用户显示评论时，我将从评论表中进行选择，并在当前用户存在的情况下进行外部投票。

有没有办法通过 comment.my_vote 进行查询，投票将附加到评论中？

我现在这样做的方式是，查询为每个结果返回一个列表 - [comment, vote] - 我将它直接传递给我的模板。如果投票可以是评论的子对象，我更愿意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T20:59:50.520

设置您的模型以添加[一对一关系](http://docs.sqlalchemy.org/en/rel_0_8/orm/relationships.html#one-to-one)。链接中的示例代码逐字：

```
class Parent(Base):
    __tablename__ = 'parent'
    id = Column(Integer, primary_key=True)
    child = relationship("Child", uselist=False, backref="parent", 
        # lazy='joined', # @note: optional: uncomment this to have the 'child' always loaded when the parent is loaded.
    )

class Child(Base):
    __tablename__ = 'child'
    id = Column(Integer, primary_key=True)
    parent_id = Column(Integer, ForeignKey('parent.id')) 
```

在你的情况下`Parent`将是`Comment`并且`Child`将会是`Vote`。
然后就可以查询了`Comment`，同时热切的加载了`Vote`。为此，建议您取消注释上面注释掉的行，以便您的查询将在一个`SQL`语句中返回所有内容。或者，您可以`Vote`使用以下命令显式指定在查询中加载[`joinedload`](http://docs.sqlalchemy.org/en/rel_0_8/orm/loading.html#sqlalchemy.orm.joinedload)：

```
res = query(Parent).options(joinedload(Parent.child)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-17T04:57:44.247

最后，我决定使用查询返回的元组不是问题。

# android - 使用密码检查 android sdk 注册表格

> ID：16114940
> 
> 赞同：0
> 
> 时间：2013-04-19T23:36:06.703
> 
> 标签：android, sdk

我需要添加什么代码，以便如果密码！=密码2然后中止注册，我不确定该怎么做，你能帮我吗？

```
 httpclient=new DefaultHttpClient();
    httppost= new HttpPost("http://purelymean.com/ANDROID/adduser.php"); // make sure the url is correct.
    //add your data
    nameValuePairs = new ArrayList<NameValuePair>(4);
    // Always use the same variable name for posting i.e the android side variable name and php side variable name should be similar, 
    nameValuePairs.add(new BasicNameValuePair("username",usern.getText().toString().trim()));  // $Edittext_value = $_POST['Edittext_value'];
    nameValuePairs.add(new BasicNameValuePair("password",password.getText().toString().trim())); 
    nameValuePairs.add(new BasicNameValuePair("password2",password2.getText().toString().trim())); 
    nameValuePairs.add(new BasicNameValuePair("email",email.getText().toString().trim())); 

    if (password != password2) {
        Toast.makeText(Register.this,"Passwords Dont Match",Toast.LENGTH_SHORT).show();

    }

    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
    //Execute HTTP Post Request
    response=httpclient.execute(httppost);
    // edited by James from coderzheaven.. from here....
    ResponseHandler<String> responseHandler = new BasicResponseHandler();
    final String response = httpclient.execute(httppost, responseHandler);
    System.out.println("Response : " + response); 
    runOnUiThread(new Runnable() {
        public void run() {
            tv.setText("Response from PHP : " + response);
            dialog.dismiss();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T03:50:56.600

不要使用密码 != 密码 2 来比较字符串。要比较字符串，我们使用 String1.equals(String2)。如果此条件为假，则 Toast 密码不匹配并取消注册。

```
if (!(password.equals(password2))) {
   Toast.makeText(Register.this,"Passwords Dont Match",Toast.LENGTH_SHORT).show();
} 
```

# php - 表 PHP 中的嵌套循环

> ID：16114945
> 
> 赞同：0
> 
> 时间：2013-04-19T23:36:25.980
> 
> 标签：php, html, foreach, html-table

我是 PHP 新手，我正在尝试使用两个 foreach 制作一个表格，但我没有得到我想要的输出。

```
<html>
    <head>
         <title>Didier Test</title>
    </head>
    <body>
        <h1>Yesso!</h1>
    </body>

    <table border="1">
        <tr>
            <th>Books</th>
            <th>Price</th>
        </tr>
    <tr>

    <?php foreach($name as $item): ?>
        <td><?=$item?></td>
        <?php foreach($price as $item2): ?>
            <td><?=$item2?></td>
            </tr>
        <?php endforeach; ?>
    <?php endforeach; ?>
    </table>

    </body>
</html> 
```

我知道我的内部 foreach 有问题，但我不知道如何纠正它。

请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T23:44:39.840

`<?=`尝试使用完整的更改您的速记 php 输出表示法`<?php echo`

```
<html>
<head>
  <title>Didier Test</title>
</head>
<body>
<h1>Yesso!</h1>
</body>
<table border="1">
<tr>
    <th>Books</th>
    <th>Price</th>
</tr>
<tr>
<?php foreach($name as $item): ?>
    <td><?php echo $item?></td>
    <?php foreach($price as $item2): ?>
    <td><?php echo $item2?></td>
</tr>
     <?php endforeach; ?>
<?php endforeach; ?>
</table>
</body>
</html> 
```

您可能没有得到任何输出，因为您的 php.ini 已设置为不允许速记 php '

哦，是的，就像 Barmer 和 Revent 提到的，你也有一些 HTML 标签嵌套问题。欢迎来到 PHP 的美好世界，祝你好运 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T23:39:02.310

一方面，您甚至在输出表格之前就关闭了第 7 行的 body 标签。

```
<body>
<h1>Yesso!</h1>
</body> 
```

我也不知道你为什么要对看似不相关的数据进行嵌套循环。除此之外，我们需要查看您的查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T23:39:31.217

由于您`<tr>`在第一个循环之前开始该行，因此您需要`</tr>`在它之后结束该行：

```
<tr>
<?php foreach($name as $item): ?>
<td><?=$item?></td>
    <?php foreach($price as $item2): ?>
<td><?=$item2?></td>
<?php endforeach; ?>
<?php endforeach; ?>
</tr> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T23:40:54.933

```
<?php 
for($i = 0; $i< count($name); $i++) {
    $item  =  $name[$i];
    $item2 =  $price[$i];

?>
<tr>
    <td><?=$item?></td>
    <td><?=$item2?></td>
</tr>

<?php 
}
?> 
```

# angularjs - 即使使用大量 DOM 元素也能提高 AngularJS 性能的方法

> ID：16114946
> 
> 赞同：23
> 
> 时间：2013-04-19T23:36:31.710
> 
> 标签：angularjs

我正在评估是否将 AngularJS 用于 Web 项目，并且我担心我需要实现的功能的性能。我想知道是否有更好的方法来实现我在 AngularJS 中尝试的功能。

从本质上讲，在我看来，AngularJS 对事件做出反应的时间取决于页面中 DOM 元素的数量，即使 DOM 元素没有被主动更改等等。我猜这是因为$digest 函数正在遍历整个 DOM .. 至少从我的实验来看，似乎是这样。

这是游戏场景（这并不是我真正想要做的，但足够接近用于测试目的）。

当我将鼠标悬停在它上面时，我想让 angularJS 突出显示一个单词。但是，随着页面中单词数量的增加，将鼠标悬停在单词上与实际突出显示时之间会有更大的延迟。

显示这个的 jsfiddle：http: [//jsfiddle.net/czerwin/5qFzg/4/](http://jsfiddle.net/czerwin/5qFzg/4/)

（信用：此代码基于 Peter Bacon Darwin 在 AngularJS 论坛上的帖子）。

这是HTML：

```
<div ng-app="myApp">
    <div ng-controller="ControllerA">
        <div >
            <span ng-repeat="i in list" id="{{i}}" ng-mouseover='onMouseover(i)'>
                {{i}}, 
            </span>
            <span ng-repeat="i in listB">
                {{i}}, 
            </span>
        </div>
    </div>
</div> 
```

这是javascript：

```
angular.module('myApp', [])
.controller('ControllerA', function($scope) {
    var i;
    $scope.list = [];
    for (i = 0; i < 500; i++) {
        $scope.list.push(i);
    }

    $scope.listB = [];
    for (i = 500; i < 10000; i++) {
        $scope.listB.push(i);
    }

    $scope.highlightedItem = 0;
    $scope.onMouseover = function(i) {
        $scope.highlightedItem = i;
    };

    $scope.$watch('highlightedItem', function(n, o) {
        $("#" + o).removeClass("highlight");
        $("#" + n).addClass("highlight");
    });
}); 
```

注意事项： - 是的，我正在使用 jquery 来进行 DOM 操作。我走这条路是因为这是一种注册观察者的方式。如果我纯粹在 angularJS 中执行此操作，我将不得不为每个跨度注册一个鼠标悬停处理程序，这似乎也会使页面变慢。- 我也在纯 jquery 中实现了这种方法，并且性能很好。我不相信是 jquery 调用让我在这里放慢了速度。- 我只在前 500 个单词中添加了 id 和 classes，以验证它实际上只是有更多的 DOM 元素似乎会减慢它们的速度（而不是可能受操作影响的 DOM 元素）。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-12-13T13:00:35.410

尽管已经存在公认的答案，但我认为了解为什么 angularJS 对您提供的代码反应如此缓慢很重要。实际上 angularJS 对于很多 DOM 元素并不慢，在这种情况下它很慢，因为您在列表中的每个项目上注册了 ng-mouseover 指令。ng-mouseover 指令注册了一个 onmouseover 事件监听器，并且每次监听器函数被触发时，都会执行一个 ng.$apply() 来运行 $diggest 脏比较检查并遍历所有监视和绑定。

简而言之：每次元素悬停时，您可能会花费 1-6 毫秒进行内部
角度脏比较检查（取决于您已建立的绑定计数）。不好 ：）

这就是相关的angularJS实现：

```
var ngEventDirectives = {};
    forEach('click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste'.split(' '),
        function(name) {
            var directiveName = directiveNormalize('ng-' + name);
            ngEventDirectives[directiveName] = ['$parse', function($parse) {
            return {
                compile: function($element, attr) {
                    var fn = $parse(attr[directiveName]);
                    return function(scope, element, attr) {
                        element.on(lowercase(name), function(event) {
                            scope.$apply(function() {
                                fn(scope, {$event:event});
                            });
                        });
                    };
                }
            };
       }];
    }
); 
```

事实上，为了突出显示悬停的文本，您可能只会使用 CSS：

```
.list-item:hover {
    background-color: yellow;
} 
```

使用较新的 Angular 版本，您的代码可能会运行得更快。对于 Angular 1.3 版，有绑定一次运算符 :: 它将从摘要循环中排除一次绑定的变量。排除数千个项目将显着减少摘要负载。

与 ECMAScript 6 一样，angular 可以使用 Observe 类，这将使脏比较检查完全过时。因此，单个鼠标悬停将在内部导致单个事件回调，不再应用或挖掘。全部使用原始代码。Angular 什么时候会应用这个，我不知道。我猜在2.0。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-21T06:01:28.910

我认为解决性能问题的最佳方法是避免在这种情况下使用高级抽象（AngularJS ng-repeat 和所有相应的背景魔法）。AngularJS 不是灵丹妙药，它与低级库完美配合。如果您喜欢文本块中的此类功能，您可以创建一个指令，它将作为文本容器并封装所有低级逻辑。带有自定义指令的示例，它使用 letteringjs jquery 插件：

```
angular.module('myApp', [])
  .directive('highlightZone', function () {
    return {
      restrict: 'C',
      transclude: true,
      template: '<div ng-transclude></div>',
      link: function (scope, element) {
        $(element).lettering('words')
      }
    }
  }) 
```

[http://jsfiddle.net/j6DkW/1/](http://jsfiddle.net/j6DkW/1/)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-11-30T07:30:28.677

现在这是一个老问题了，但我认为值得一提的是 Angular（从 v1.3 开始）现在支持一次性绑定，这有助于减少摘要循环。我在一些应用程序中工作过，其中添加一次绑定显着减少了手表的数量，从而提高了性能。ng-repeat 通常负责添加很多手表，因此您可能会考虑向 ng-repeat 添加一次绑定。

```
ng-repeat="i in ::list" 
```

这里总结了一些可以用来避免添加不必要的手表的技巧

[http://www.syntaxsuccess.com/viewarticle/547a8ba2c26c307c614c715e](http://www.syntaxsuccess.com/viewarticle/547a8ba2c26c307c614c715e)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-11-14T05:51:27.223

始终首先分析以找到真正的瓶颈。有时它可能不是您最初怀疑的。我会首先怀疑您自己的代码，然后是 Angular（大量观察者是导致性能低下的主要特征）。[我在详细的博客文章https://glebbahmutov.com/blog/improving-angular-web-app-performance-example/](https://glebbahmutov.com/blog/improving-angular-web-app-performance-example/)中描述了如何在 Angular 应用程序中分析和解决不同的性能问题

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-14T07:01:55.327

从 btford获取[zone.js](https://github.com/angular/zone.js)并运行区域中的所有函数以检查它们的时间，然后创建区域来处理 ajax 代码 (crud) 和其他区域用于静态代码 (apis)。

或者，限制 ng-repeat 和/或禁用对象上的双向绑定会大有帮助。Web 组件已经通过使用 shadow dom 解决了这个问题，让顶部变得酥脆。仍然 zone.js - 通过关于似然性的链接观看视频。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-08-30T06:28:53.537

好吧，我可以看到你正在使用`$watch`. Angular 在非常需要时推荐 $watch 。像通过以下方式更新变量的场景`ng-model`

```
http://jsfiddle.net/5qFzg/10/ 
```

苏拉杰

# c++ - ZeroMQ 与分叉服务器中的所有子进程共享一个上下文

> ID：16114948
> 
> 赞同：3
> 
> 时间：2013-04-19T23:37:12.870
> 
> 标签：c++, fork, ipc, zeromq

我正在用 C++ 编写一个分叉聊天服务器，每个传入的客户端都是它自己的进程。服务器-客户端交互是通过使用处理消息队列和 IPC 的 ZeroMQ 套接字的普通套接字完成的。基本问题是，当服务器分叉以适应新客户端时，客户端的进程具有上下文的副本（这就是 fork 所做的，对吗？），因此当它将套接字与上下文绑定时，其他客户端都没有知道套接字。长话短说：如何让每个客户端线程具有相同的上下文，以便它们可以通过 ZeroMQ 相互交谈？

我已经研究了在进程之间共享上下文的各种方法，到目前为止，我只找到了[这个](http://zguide.zeromq.org/cpp%3amtserver)。问题在于 1）它使用了一个线程池，据我从那里写的内容来看，只创建了 5 个线程；该服务器需要支持至少 256 个，因此至少有那么多线程，并且 2）它使用 ZeroMQ 来与客户端通信和后端任务；我仅限于将 ZeroMQ 用于后端。

我查看了 ZeroMQ 邮件列表，其中一条消息说 fork() 与 ZeroMQ 的工作方式是正交的。这是否意味着我不能在分叉的子进程之间共享我的上下文？如果是这种情况，我如何在多个进程之间共享上下文，同时牢记支持至少 256 个客户端并仅将 ZeroMQ 用于后端的要求？

编辑：清除线程/进程混淆。对于那个很抱歉。

EDIT2：我也喜欢分叉而不是线程的原因是我习惯于有一个主进程接受传入的套接字连接然后分叉，将新的套接字提供给子进程。我不知道如何以线程方式做到这一点（不是很好实践，但不是完全超出我的范围）

EDIT3：所以，开始用线程重写它。我想这是唯一的方法吗？

EDIT4：为了进一步澄清，到服务器的传入连接可以是 TCP 或 UDP，当客户端连接时我必须处理它是哪种类型，所以我不能使用 ZeroMQ 套接字来监听。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-20T03:43:31.787

## 上下文共享

在链接的示例代码中共享 ZMQ 上下文的原因是 server( `main()`) 使用`inproc`套接字与 workers( `worker_routine()`) 通信。`Inproc`除非它们是从相同的 ZMQ 上下文创建的，否则套接字无法相互通信，即使它们位于同一进程中。在您的情况下，我认为没有必要共享它，因为不`inproc`应该使用任何套接字。因此，您的代码可能如下所示：

```
void *worker_routine (void *arg)
{
    // zmq::context_t *context = (zmq::context_t *) arg;    // it's not necessary for now.
    zmq::context_t context(1);    // it's just fine to create a new context

    zmq::socket_t socket (context, ZMQ_REP);
    // socket.connect ("inproc://workers");    // inproc socket is useless here.
    socket.connect("ipc:///tmp/workers");    // need some sockets who can cross process.

    // handling code omitted.
}

int main ()
{
    //  omitted...

    // workers.bind ("inproc://workers");    // inproc socket is useless here.
    workers.bind("ipc:///tmp/workers");

    //  Launch pool of worker processes
    for (int i = 0; i < 5; ++i) {
        if (fork() == 0) {
            // worker process runs here
            worker_routine(NULL);
            return 0;
        }
    }
    //  Connect work processes to client process via a queue
    zmq::proxy (clients, workers, NULL);
    return 0;
} 
```

## 每个请求的处理过程

现在谈谈您的要求，每个请求一个进程。最后一个示例代码只是为了说明 的用法`zmq::proxy`，提供它是为了简化具有 ROUTER-DEALER 模式的服务器代码。但它不能满足你的要求。因此，您必须手动实现它。它只是看起来像[另一个例子](http://zguide.zeromq.org/cpp%3arrbroker)。不同之处在于您需要`fork()`在前端套接字可读时调用并将while循环放入子进程中。

```
if (items[0].revents & ZMQ_POLLIN) {
    if (fork() == 0) {
        // sub process runs here
        while (1) {
            // forward frames here
        }
        // sub process ends here
        return 0;
    }
} 
```

## 建议

最后，我不得不说，除非你的场景真的很特别，否则为一个请求创建一个**流程**太繁重了。请使用线程，或考虑异步 IO，如`zmq::poll`.

# matlab - 当我在 matlab 中运行指南时，它会打开一个空白的全灰色窗口。这是怎么回事？

> ID：16114951
> 
> 赞同：3
> 
> 时间：2013-04-19T23:37:14.790
> 
> 标签：matlab, matlab-guide

当我在 Matlab 中运行指南时，打开的窗口完全变灰，标题为“GUIDE 快速启动”。我在 Ubuntu 12.04.2 LTS 中运行 R2012b。有没有其他人遇到过这个问题？

更新 1

所以我刚刚发现，如果我在第一个空白灰色窗口上按 Enter 键，它会打开布局编辑器窗口，一切似乎都很好。所以我猜在第一个屏幕上只有一个确定按钮（我看不到），所以当我按下回车键时，就像点击确定按钮一样。

更新 2

我构建了一个快速的 GUI，但存在一些问题。我可以在布局工具上创建轴、按钮和滑块。但是，当我运行 GUI 工具时，它只显示轴、按钮、滑块不存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T21:16:11.547

我相信 MATLAB 中的某些东西还与 Java 7 不兼容，所以暂时坚持使用 Java 6。

无论如何，您可以同时安装两个版本，只需通过设置`$MATLAB_JAVA`环境变量来指示 MATLAB 使用正确的版本。

然后，您可以通过发出以下命令来验证正在使用哪个版本：

```
>> version -java 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-28T03:45:10.340

我在 Ubuntu 中遇到了类似的问题，通过跳过 Unity 并使用“经典 gnome”开始会话来解决。

# java - 表单、数据表等的 JSF 最佳实践

> ID：16114952
> 
> 赞同：4
> 
> 时间：2013-04-19T23:37:25.823
> 
> 标签：java, jsf, jakarta-ee, model-view-controller, managed-bean

我应该为 JSF 中的每个表单、数据表等都有一个 bean 吗？

例如，我有一个注册表格，它只有 2 个字段和一个按钮，分别是： **昵称、密码、提交**

提交这个表单应该去一个 RegistirationFormBean 还是在 UserBean 或 UserServiceBean 的某个地方？

最佳做法是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T07:06:15.150

要决定是否应该`@ManagedBean`专门为页面的组件（例如表单、数据表）创建一个，我相信您应该考虑**`modularity`**您的设计。

您应该问自己的第一个问题是：`Will the component be re-used in many pages?`. 例如，在`ChangePassword`或等敏感页面上`DeleteAccount`，通常会要求用户输入当前密码以验证其身份，然后再执行任何逻辑。在这种情况下，您绝对应该拥有一个用于验证密码组件的专有 bean，以便您可以一次又一次地重复使用该组件，而不必每次都重新编码验证功能。

其次，我通常`@ManagedBean`用作存放所有**朝着同一目标工作的****相关**功能的地方。这种功能分组可能非常主观。例如，我可以有一个调用bean的页面，该 bean具有创建产品的所有功能。在这种情况下，就像. 另一种方法是调用一个bean ，它具有与对象相关的所有功能（即创建、读取、更新、删除）。在这种情况下，它就像（例如，）。为了方便日后的维护和分工，我通常使用. 方法二**`CreateProduct.xhtml``CreateProductBean``1 bean per view``ProductManager``Product``1 bean for many views``CreateProduct.xhtml``RemoveProduct.xhtml``1 bean per view``1 bean for many views`在某些情况下也很好，但我突然想不出一个例子：P......当我得到一个好的答案时，我会更新我的答案;）。**

 **第三，我更喜欢遵循 ​​3 层 MVC 模型，将后端逻辑与前端分离。例如，要在数据库中持久化一个新帐户，我将注入一个`@EJB`或一个`@WebServiceRef`以要求后端系统执行必要的逻辑。将来肯定对维护更加友好:)。

所以，用你的`RegisterAccount`例子，我会有

*   调用 1 个 bean`UserExistenceValidator`以检查`nickname`数据库中是否存在 a。在注册期间，如果用户选择了一个，我会抛出一个错误`nickname`。我还可以使用这个 bean 来检查页面中是否存在用户`AddFriend.xhtml`。
*   另一个 bean 调用`RegistirationFormBean`以捕获用户的输入并与后端对话以保存新帐户。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-30T19:50:38.800

调整任何`JSF`情人的大脑实际上是一个非常有趣的话题，所以我无法抗拒自己，我想详细解释一下。

> 发明背后的一个非常有趣和重要的原因`JSF`是，将客户端事件连接到服务器端应用程序代码，就像任何 Swing 应用程序一样，并显式地摆脱了请求和响应对象的处理。像任何 Swing 应用程序一样，我们现在可以简单地将任何客户端事件（例如，按钮单击）与一些服务器端代码绑定以处理该事件，而无需担心编写 Web 应用程序的事实和复杂性。

因此，在设计任何使用 JSF 的 Web 应用程序时，设计人员可以像设计事件驱动的 Swing 应用程序一样轻松地关注用户体验。因此，您可以设计视图页面并识别事件以执行任务并在视图之间导航。最后，您编写一些要在这些事件中执行的服务器端代码，以完成您想要的工作。这些服务器端代码驻留在您的托管 bean 中。

如果我们根据类型职责进行分类，托管 bean 有以下几种类型：

*   模型托管豆
*   支持托管 Bean
*   控制器托管豆
*   支持托管豆
*   实用托管 Bean

[您将在本文](http://java.dzone.com/articles/making-distinctions-between)中找到每种类型的详细信息。

您的问题是，如何分配`Controller Managed-Bean`. 在分配此类责任时，需要考虑几个问题：

1.  要做的任务的复杂性。
2.  它的可重用性。
3.  责任方面的模块化（要做的工作类型）。
4.  从业务角度看模块化。
5.  责任脱钩。等等

您可以将您的系统设计为使用一个单一的用于您的简单**CURD**操作的`controller`所有视图。但是，如果您需要在单个操作中处理多个复杂事务，那么将操作分离为多个，将是一个更好的设计。虽然您的注册过程非常简单，但您应该使用单独的来处理任务。因为将任何任务放在同一个托管 bean 中并不是一个好主意，这既不简单，也不够相关，无法与任务“注册”一起驻留。我认为这结束了您的查询！**`model``create``controllers``controller`**

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T01:06:45.393

在类似的情况下，我总是有一个`UserManagedBean`处理用户相关操作的，例如登录，注册，更改密码等......
为了处理这些操作，我在对应`UserManagedBean`的类型`User`（或任何类名）中放置了一个属性与用户相关的持久化数据（通常在数据库表用户中）。
在您的情况下`nickname`，并且`password`是`User`类的属性。至于`submit`它将调用一个方法`UserManagedBean`来验证用户：

```
<h:inputText value="#{userManagedBean.user.nickname}"/>
<h:inputSecret value="#{userManagedBean.user.password}"/>
<h:commandButton value="Login" action="#{userManagedBean.loginUser}"/> 
```

当然，该`loginUser`方法将调用对服务层的调用，该调用将调用 DAO 层来检查数据库（或其他存储）的凭据。
如果登录成功，我们的托管 bean 中的用户属性（应该是会话范围的）将使用来自 DB 的返回对象进行初始化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T23:56:02.583

您应该分别使用数据传输对象 bean 和域 bean 用于 ui 提交和数据库中的持久性。使用控制器类，处理您的 ui jsf 提交数据并创建一个干净的域 bean 并使用它来持久化。

如果可能，最佳实践应始终将流程/实体解耦。此外，您的 dto bean 可能具有附件和比域 bean 更多的数据，您可能出于多种目的需要这些数据。****

# ruby-on-rails - Carrierwave / Fog / S3“不是公认的存储提供商”

> ID：16114957
> 
> 赞同：10
> 
> 时间：2013-04-19T23:38:46.187
> 
> 标签：ruby-on-rails, amazon-s3, carrierwave

我有一个使用 Carrierwave 进行文件上传的 Rails 应用程序。它一直运行良好，但我想开始使用 Amazon S3 进行图像存储。我收到此错误：

```
ArgumentError ( is not a recognized storage provider):
  app/controllers/salons_controller.rb:52:in `update' 
```

我已确保我拥有适用于 Carrierwave 和 Fog 的最新宝石。这是在我的 Gemfile 中：

```
gem 'carrierwave'
gem 'aws-sdk'
gem 'fog' 
```

fog.rb 看起来像：

```
CarrierWave.configure do |config|
    config.fog_credentials = {
        :provider              => 'AWS',
        :aws_access_key_id     => 'MYACCESSKEY',
        :aws_secret_access_key => 'MYSECRETKACCESSKEY',
        :region                => 'us-east-1'
    }

    config.fog_directory = 'andrunix'
    config.fog_public    = true
    config.fog_attributes = {'Cache-Control'=>'max-age=315576000'} 
```

结尾

Uploader 类如下所示：

```
class SalonImageUploader < CarrierWave::Uploader::Base
  include CarrierWave::RMagick
  storage :fog

  def store_dir
    # "andrunix" is the bucket name on S3

    "andrunix/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
  end
end 
```

如果我将存储更改回“文件”，它可以正常工作。将存储设置为“雾”会生成此错误。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-20T14:53:06.347

好吧，我是个白痴。:)

在某些时候，我不知道在哪里，我在 lib/carrierwave/storage 目录中添加了一个带有 CarrierWave 配置的fog.rb 文件。我绝望了，支付了 Railscasts 订阅费，所以我可以观看第 383 集（[http://railscasts.com/episodes/383-uploading-to-amazon-s3?autoplay=true](http://railscasts.com/episodes/383-uploading-to-amazon-s3?autoplay=true)），在 3:02 我发现了错误我的方式。Carrierwave 配置需要放在 config/initializers/carrierwave.rb 中。

我不知道我从哪里得到这个其他位置，但是一旦我将配置移动到正确的位置，一切都很好。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-04-10T15:14:23.770

我刚刚遇到了同样的问题，人们必须知道配置文件中的任何错字：“config/initializers/carrierwave.rb”，都会导致该错误。

# jsf - ValidateOnePer 行

> ID：16114964
> 
> 赞同：0
> 
> 时间：2013-04-19T23:39:34.510
> 
> 标签：jsf, omnifaces

我真的很喜欢你的项目，真是太棒了！

我对这种情况有一个观察，这将是很好的验证，我认为，从我谦虚的角度来看，它没有被涵盖。

我有一个重复的组件（例如数据表、数据网格等），它迭代一个输入组件和一个命令按钮，需要输入组件并要求我的用户设置一个值，但我只需要验证对输入、按钮. 因此，当在输入中输入数据并且按钮被触发时，它不会受到其他必需的输入组件的干扰。

事先感谢您的任何答案！

# java - 将 JSONObject 转换为 JSONArray。UTF8 字符的问题

> ID：16114965
> 
> 赞同：0
> 
> 时间：2013-04-19T23:39:56.193
> 
> 标签：java, json

我正在尝试投一个`JSONObject`to `JSONArray`。`JSONObject`包含一个类型为 的对象`JSONArray`。数组是一个字符串序列。序列中的一个字符串格式如下。

```
"uid=\u00d1\u0088\u00d1\u0084\u00d1\u0088" 
```

在对数组进行强制转换后`JSONObject`，数组中的字符会发生变化。

```
"uid=???" T 
```

转换`JSONArray`为上述格式的原始双字节字符后，`\u`在我的 java 程序中更改为不正确的显示字符。有任何想法吗？有没有人看到这个问题？我进行了一些搜索，但还没有找到我的问题的答案。

下面的代码不用于执行此操作。

```
public static String[] read(JSONObject input)
{
     com.ibm.TEPS.JSON.Any.assertTypeCode(input, _type);

     JSONArray val = (JSONArray)input.get(FW_Properties.TEPSREST_TYPE_EXT_VAL);  

     String [] result = new String[val.size()];

     for(int i = 0;i<result.length;i++)
     {
        result[i] = (String)val.get(i);
     }

     return result;
  } 
```

# proxy - Node HTTP Proxy 403 Post Request Forbidden

> ID：16114969
> 
> 赞同：0
> 
> 时间：2013-04-19T23:41:06.630
> 
> 标签：proxy

I used Node-http-proxy to proxy my request from port `sample.com:80` to port `sample.com:8080` with sample below:

```
var httpProxy = require('http-proxy');

httpProxy.createServer(8080, 'localhost').listen(80);

http.createServer(function (req, res) {
  res.writeHead(200, { 'Content-Type': 'text/plain' });
  res.write('request successfully proxied!' + '\n' + JSON.stringify(req.headers, true, 2));
  res.end();
}).listen(9000); 
```

When I do: curl with POST to `sample.com:80`, I get `403 Forbidden response`. But when I do curl with GET, `301 permanent redirect`. My question is:

Is it possible to make POST and GET behaves the same, which *always* return 200 status code instead of 403 or 301?

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:06:45.140

```
var fmt = require('fmt');
var httpProxy = require('http-proxy');

fmt.sep();
console.log();
fmt.title("\033[1;36mPROXY SERVER STARTED\033[0m");
console.log();
fmt.field("\033[1;34mPROXY PORT\033[0m", 80);
fmt.field("\033[1;34mTARGET PORT\033[0m", 8080);
fmt.field("\033[1;34mTARGET ADDRESS\033[0m", '127.0.0.1');

var server = httpProxy.createServer(function(req, res, proxy)
{
    proxy.proxyRequest(req, res, { host: '127.0.0.1', port: 8080, buffer: httpProxy.buffer(req) });

    var reqBody = '';

    req.on('data', function(chunk)
    {
        reqBody += chunk;
    });

    req.on('end', function()
    {
        console.log();
        fmt.sep();
        console.log();
        fmt.title("\033[1;36mREQUEST FROM SHARED CLOUD\033[0m");
        console.log();
        fmt.dump(req.connection.remoteAddress, "\033[1;35mADDRESS\033[0m");
        console.log();
        fmt.msg("\033[1;35mHEADERS\033[0m :");
        fmt.dump(req.headers);
        console.log();
        fmt.msg("\033[1;35mBODY\033[0m :");
        fmt.dump(reqBody);
        console.log();
    });
});

server.proxy.on('proxyError', function(err, req, res)
{
    fmt.title("\033[1;36mPROXY STATUS\033[0m");
    console.log();
    fmt.dump('failed to proxy on port ' + 8080, "\033[1;31mERROR\033[0m");
    res.end();
});

server.proxy.on('end', function()
{
    fmt.title("\033[1;36mPROXY STATUS\033[0m");
    console.log();
    fmt.dump('request was proxied successfully', "\033[1;33mSTATUS\033[0m");
});

server.listen(80); 
```

# google-drive-api - Google Drive 文档时间戳

> ID：16114970
> 
> 赞同：4
> 
> 时间：2013-04-19T23:41:20.880
> 
> 标签：google-drive-api

我假设*modifiedDate*搜索字段是修改（显然）或上传到驱动器的日期。有没有办法在其本机系统上保留文件的原始创建日期？或者有没有可能修改这个字段？谢谢你，肖恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T23:52:50.687

您可以使用 File.Update 设置上传后的修改日期。

[https://developers.google.com/drive/v2/reference/files/update](https://developers.google.com/drive/v2/reference/files/update)

此外， File.Patch 也可以：

[https://developers.google.com/drive/v2/reference/files/patch](https://developers.google.com/drive/v2/reference/files/patch)

我知道我在某个时候阅读了另一个旧线程，其中讨论了能够在插入时保留原始创建日期，或者至少将其作为一个选项，但此功能尚不存在。（现在找不到帖子了……）

更新：

我决定最好有一种方法来更新文档时间戳，所以这里是：

```
 public static File SetLastModified(string fileID, DateTime lastModified)
    {
        File file = DriveService.Files.Get(fileID).Fetch();
        file.ModifiedDate = lastModified.ToString("yyyy'-'MM'-'dd'T'HH':'mm':'ss.fff'Z'");
        try
        {
            FilesResource.UpdateRequest request = DriveService.Files.Update(file, fileID);
            request.SetModifiedDate = true;
            file = request.Fetch();
        }
        catch (Exception e)
        {
            throw;
        }
        return file;
    } 
```

# python - SciPy 阶跃响应图似乎因某些值而中断

> ID：16114971
> 
> 赞同：4
> 
> 时间：2013-04-19T23:41:22.017
> 
> 标签：python, matplotlib, scipy

我在控制系统类中使用 SciPy 而不是 MATLAB 来绘制 LTI 系统的阶跃响应。到目前为止效果很好，但是我遇到了一个非常具体的系统的问题。使用此代码：

```
from numpy import min
from scipy import linspace
from scipy.signal import lti, step
from matplotlib import pyplot as p

# Create an LTI transfer function from coefficients
tf = lti([64], [1, 16, 64])
# Step response (redo it to get better resolution)
t, s = step(tf)
t, s = step(tf, T = linspace(min(t), t[-1], 200))
# Plotting stuff
p.plot(t, s)
p.xlabel('Time / s')
p.ylabel('Displacement / m')
p.show() 
```

代码原样显示一条平线。如果我将分母的最终系数修改为`64.00000001`（即`tf = lti([64], [1, 16, 64.0000001])`），那么它可以正常工作，显示出欠阻尼的阶跃响应。将系数设置为`63.9999999`也有效。将所有系数更改为具有明确的小数位（即 `tf = lti([64.0], [1.0, 16.0, 64.0])`）不会影响任何事情，所以我想这不是整数除法搞砸的情况。

这是 SciPy 中的错误，还是我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-20T02:30:09.533

这是`step`函数实现的限制。它使用矩阵指数来查找阶跃响应，并且不能很好地处理重复的极点。（您的系统在 -8 处有一个重复的极点。）

`step`您可以使用函数[scipy.signal.step2](http://docs.scipy.org/doc/scipy/reference/generated/scipy.signal.step2.html#scipy.signal.step2)而不是using

```
In [253]: from scipy.signal import lti, step2

In [254]: sys = lti([64], [1, 16, 64])

In [255]: t, y = step2(sys)

In [256]: plot(t, y)
Out[256]: [<matplotlib.lines.Line2D at 0x5ec6b90>] 
```

![在此处输入图像描述](https://i.stack.imgur.com/0B4b0.png)

# c - pthread 中的统计错误（S_ISDIR 不工作）

> ID：16114973
> 
> 赞同：1
> 
> 时间：2013-04-19T23:41:33.617
> 
> 标签：c, multithreading, pthreads, pthread-join

我目前正在尝试编写一个程序，通过为每个新子目录创建一个线程并使用该线程来查找子目录的大小，来查找目录树的大小以及其中所有子目录的大小。这是一个非常简单的程序，但调试起来非常困难。我有很多 S_ISDIR 无法按预期工作的问题（常规文件正在传递 if 语句，而我的程序正在尝试将 dir 更改为常规文件）。下面是我解决这个问题的代码。我想让每个父目录等待子目录完成，但不希望每个子目录都等待下一个。

```
#define NAMESIZE 256
#define NUM_THREADS 100
#define MAX_PATH_LENGTH 500

int totalSum = 0;
pthread_mutex_t sum_mutex ;
pthread_mutex_t thread_mutex ;

void *findSize(void *p)
{
    int levelSum = 0, numberThreads = 0, i = 0;
    DIR *dir ;
    struct dirent *entry ;
    struct stat entry_stat ;
    char cwd[2049] ;
    char threads[NUM_THREADS] ;
    char paths[NUM_THREADS][MAX_PATH_LENGTH];

    char *path = (char*)p ;

    // change into the directory that was passed in
    if(chdir (p) == -1)
    {
        perror("chdir");
        exit(1);
    }

    // get current working directory
    if(!getcwd (cwd, 2049))
    {
        perror("getcwd") ;
        return;
    }

    // open the directory to get entries within it
    dir = opendir(".") ;
    if(!dir)
    {
        perror("Cannot read directory");
        return;
    }

    while((entry = readdir(dir)))
    {
        // call stat on the current entry in the directory
        if(stat (entry->d_name, &entry_stat) == -1)
        {
            perror("stat error");
        }

        // skip the . and .. directories
        if(strcmp (entry->d_name, ".") == 0)
            continue;
        if(strcmp (entry->d_name, "..") == 0)
            continue;

        // check if current entry is a directory
        if(S_ISDIR (entry_stat.st_mode))
        {
            pthread_mutex_lock(&thread_mutex) ;
            strcpy(paths[numberThreads], cwd) ;
            strcat(paths[numberThreads], "/") ;
            strcat(paths[numberThreads], entry->d_name) ;

            pthread_t temp ;

            // create new thread in threads array
            if (pthread_create(&temp, NULL, findSize, (void *)paths[numberThreads]))
            {
                fprintf("failed to create thread for directory %s\n ", paths[numberThreads]) ;
                exit(1) ;
            }

            threads[numberThreads] = temp;

            // increment the number of threads created on this level of the directory tree

            numberThreads++ ;
            pthread_mutex_unlock(&thread_mutex) ;

        }

        if(S_ISREG(entry_stat.st_mode))
        {
            pthread_mutex_lock(&sum_mutex) ;
            int fileSize = entry_stat.st_size ;
            levelSum += fileSize ;
            totalSum += fileSize ;
            pthread_mutex_unlock(&sum_mutex) ;
        }
    }

    void *status ;

    for(i = 0; i < numberThreads; i++)
    {
        pthread_join(threads[i], NULL) ;
    }

} 
```

总的来说，我只是简单地使用我的函数 findSize 和用户传入的路径执行 pthread_create。我得到了很多统计错误，但我不知道如何修复它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T23:50:01.937

当前目录不是线程本地的；这是过程的属性。因此，如果每个线程都尝试`chdir`. 您要么需要根据`readdir`不使用的结果构造完整路径名`chdir`，要么使用“*at”接口（`openat`、、`fstatat`等）打开相对于目录文件描述符的文件。

# c - Mkdir() 权限被拒绝 C/linux 编程

> ID：16114977
> 
> 赞同：1
> 
> 时间：2013-04-19T23:42:01.377
> 
> 标签：c, linux, permissions, mkdir

当我执行此代码时，我收到错误`Couldn't create backup sub-directory: Permission denied`，但我不明白为什么，因为我提供了完整的权限并且我在 ubuntu 上使用了管理员帐户。

```
umask(0777);
int folder_date_status = mkdir(filepath_W, 0777);

if(folder_date_status == -1){
    perror("Couldn't create backup sub-directory");
        return -1;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T23:44:48.580

默认情况下，管理员帐户不会以完全权限运行。这样您运行的程序就不会意外地充当特权用户（即，您必须明确授予权限）。

要授予程序在需要特权访问的目录中创建子目录的权限，请尝试使用`sudo`.

如果程序名被调用`myprogram`，尝试运行：

```
sudo ./myprogram 
```

如果需要，请输入您的密码。

请注意，只有在尝试在写限制目录（例如，root 或其他用户拥有的受限目录）中创建子目录时才需要超级用户访问权限。还要确保父目录存在（否则也可能引发错误）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T00:12:03.020

您是否验证了您的 filepath_w？您是否有权对其进行读取、写入和执行？我建议您使用绝对路径名并将其指向 tmp 目录，如下所示：

filepath_w = "/tmp/目录"

# ember.js - 如何将静态数据属性分配给 ember 视图？

> ID：16114978
> 
> 赞同：5
> 
> 时间：2013-04-19T23:42:02.243
> 
> 标签：ember.js, custom-data-attribute

我需要为 Ember.View 分配一个静态数据属性，如何在 View 对象而不是`{{view }}`标签中设置它。

```
App.MessagesFormView = Ember.View.extend({
  tagName: 'div',
  classNames: ['modal', 'fade'],
  didInsertElement: function() {
    this.$().modal('show')
  },
  willDestroyElement: function() {
    this.$().modal('hide')
  },
}) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-26T18:41:20.733

不幸的是，我没有足够的声誉来评论 Ola 的答案，但我认为更好的方法是不使用字符串（引号中的文本）来表示数据属性属性名称。相反，在 camelCase 中写入您的属性名称，Ember 会自动将其绑定到连字符的属性绑定。例如：

```
App.MessagesFormView = Ember.View.extend({
  tagName: 'div',
  attributeBindings: ['data-backdrop'], 
  dataBackdrop: 'static', // Binds to data-backdrop. Awesome!
}); 
```

我希望这是有道理的！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T23:47:19.027

这必须使用Ember.View 对象的`attributeBindings`and `data-backdrop`or属性来完成。`data-whatever`

```
App.MessagesFormView = Ember.View.extend({
  tagName: 'div',
  classNames: ['modal', 'fade'],
  // Set a data attribute, of a view, requires both an attribute binding and
  // an attribute assignment
  attributeBindings: ['data-backdrop'],
  'data-backdrop': 'static',
  didInsertElement: function() {
    this.$().modal('show')
  },
  willDestroyElement: function() {
    this.$().modal('hide')
  },
}) 
```

# php - 如果未找到属性，XPath 返回 null？

> ID：16114982
> 
> 赞同：0
> 
> 时间：2013-04-19T23:42:37.787
> 
> 标签：php, xpath

我正在使用 XPath 查询来查找属性值。但是，我想遍历每个 div，如果找不到属性，则不返回任何内容。有没有办法做到这一点？

HTML：

```
<div id="a" class="a">text</div>
<div>text</div>
<div id="b" class="b">text</div> 
```

XPath：

```
$values = $XPath->query('//div/@id | //div/@class'); 
```

结果：

```
array('a', 'a', 'b', 'b'); 
```

期望的结果：

```
array('a', 'a', '', '', 'b', 'b'); 
```

到现在为止，我已经在 XPath 中了，我现在想保持这个方向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T23:47:41.337

为什么不只选择所有`<div>`元素并使用[`DOMElement::getAttribute()`](http://www.php.net/manual/de/domelement.getattribute.php)来获取属性值？请注意，如果当前元素没有请求的属性，此方法将返回一个空字符串。（实际上应该是你想要的）。

尝试这个：

```
$html = <<<EOF
<div id="a" class="a"></div>
<div></div>
<div id="b" class="b"></div>
EOF;

$doc = new DOMDocument();
$doc->loadHtml($html);
$selector = new DOMXpath($doc);

$result = array();
foreach($selector->query('//div') as $div) {
    $result []= $div->getAttribute('id');
    $result []= $div->getAttribute('class');
}

var_dump($result); 
```

*输出：*

```
array(6) {
  [0] =>
  string(1) "a"
  [1] =>
  string(1) "a"
  [2] =>
  string(0) ""
  [3] =>
  string(0) ""
  [4] =>
  string(1) "b"
  [5] =>
  string(1) "b"
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T07:39:41.563

我只是添加了一个额外的答案来提供我自己的措辞，您可以很容易地看到@hek2gml 的建议是明智的。

xpath 查询只能返回文档中已有的内容。所以你不能在同一个查询中插入不存在的节点。

所以你需要像描述你想要做的那样做：

> 我想遍历每个 div，如果找不到属性，则不返回任何内容。

因此，每个 div 匹配，获取两个属性值，包括空属性值：

```
$html = <<<BUFFER
<div id="a" class="a">text</div>
<div>text</div>
<div id="b" class="b">text</div>
BUFFER;

$xml = simplexml_import_dom(@DOMDocument::loadHTML($html));

$divs = $xml->xpath('/*/body/div');

$reduce = function(array $array, SimpleXMLElement $div) {
    $array[] = (string) $div['id'];
    $array[] = (string) $div['class'];
    return $array;
};

$values = array_reduce($divs, $reduce, []);

print_r($values); 
```

输出如预期：

```
Array
(
    [0] => a
    [1] => a
    [2] => 
    [3] => 
    [4] => b
    [5] => b
) 
```

# css - 多个css文档，列表样式问题

> ID：16114983
> 
> 赞同：3
> 
> 时间：2013-04-19T23:43:08.633
> 
> 标签：css, list, styles

我的网站有两个不同的 css 样式文件。第一个专门用于索引页面，它使用列表在顶部做标签，作为标题和其余部分之间的链接栏。这有代码：

**索引.css**：

```
u1 
{
    list-style-type:none;
} 
```

以及一些适用于 li 元素的代码。

另一个 css 文档用于站点的其余部分。我想对其他一些部分使用列表，但我遇到了问题。虽然 li 元素被正确覆盖，但我无法让 u1 元素在站点的其余部分显示项目符号。我试过使用 u1.a 和 u1.b ，但这并不能解决问题。

**main.css**：

```
u1
{
    list-style-type:circle
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T23:44:42.637

尝试通过添加覆盖它`!important`

```
u1
{
    list-style-type:circle!important;
} 
```

和/或将仅包含此规则的另一个 CSS 文件添加到您想要不同的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T23:58:00.633

很抱歉可能重申已经说过的话，但是如果你想创建你的“u-one”类，你应该在它前面加上一个点，所以它要么是一个类：

```
.u1 {list-style-type: circle;} 
```

你会像平常一样使用它，即

```
<ul class="u1"> <li></li> </ul> 
```

或使用 ul [UL] 作为标签：

```
ul {list-style-type: circle;} 
```

你所有的 UL 清单都会有这种格式。

你把它放在你的css中的方式不适用于html，因为'u1'标签不存在。但我需要查看您的 html 片段才能确定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T00:10:42.837

元素`ul`在`UL` not`u1`和 in 中`u-one`。我认为这不是代码的错字，因为它在您的问题中无处不在。

CSS 通过级联和特异性工作。将列表样式应用于您网站的其他元素可能就像添加一个类一样简单：

```
ul.circle {
     list-style-type: circle;
} 
```

然后将相同的类添加到 HTML 文档中的元素中，如下所示：

```
<ul class="circle"></ul> 
```

有很多不同的方法可以覆盖 CSS，我在前一段时间的[**回答中**](https://stackoverflow.com/questions/15268571/how-to-exclude-specific-control-from-css/15268786#15268786)描述了它们，但在你的情况下，这应该是最简单的。

# javascript - 将 url 加载的根更改为 javascript 文件？

> ID：16114987
> 
> 赞同：0
> 
> 时间：2013-04-19T23:43:48.490
> 
> 标签：javascript, ajax, url, loading, document-root

因此，通常在将脚本或图像加载到 .html 文件中时，它会使用其当前位置作为 url 调用函数的根。现在，当像这样加载外部 Javascript 文件时：

```
<script type="text/javascript" src="external_java.js"></script> 
```

从上面的 javascript 文件调用的任何内容都将使用 .html 在服务器上的位置，而不是 .js 文件的位置。有什么办法可以改变这个吗？

这样，当我调用 XML 文件时，它将使用 .js 位置作为调用的根？

```
$.ajax({
    type: "GET",
    url: ../template/file.xml,
    dataType: "xml",
    success: function(xml) {
        /*do something here*/
           }
       }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T00:04:24.733

您可以通过以下方式查找脚本文件的绝对 src `document.scripts`：

因此，如果您知道您在页面上加载的第一个脚本是`src="external_java.js"`，那么检查`document.scripts[0].src`将为您提供该文件的绝对路径。

从那里我只需将文件名替换为 got src 中的任何内容，您就有了一个绝对根路径...例如：

```
var root = document.scripts[0].src.replace("external_java.js", ""); 
```

从那里您可以将其附加/添加到您尝试调用的路径中。

# html - 显示内联导致元素被进一步向下推

> ID：16114988
> 
> 赞同：0
> 
> 时间：2013-04-19T23:43:59.363
> 
> 标签：html, css

如果您在这里查看我的代码笔：

[http://codepen.io/anon/pen/LHBqs](http://codepen.io/anon/pen/LHBqs)

并将`display: block`img上的“ ”更改为“ `display: inline`”，这会使“休闲环境中的美食”文字被进一步下推。

它下面的“美食”元素是`h2`，它是一个块元素，那么为什么`img`标签是块元素还是内联元素会有所不同，因为块元素无论如何都不能与内联元素显示在同一行上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T23:53:42.830

这与边距折叠有关 - 你`img`和它`h2`下面的边距相互“接触”，但对于块元素边距折叠（合并为一个），而对于内联元素它们没有，它们都适用，因此额外的空间。

检查这篇文章 - [http://www.howtocreate.co.uk/tutorials/css/margincollapsing](http://www.howtocreate.co.uk/tutorials/css/margincollapsing)

# javascript - 如何在 div 中加载另一个域内容？

> ID：16114993
> 
> 赞同：-2
> 
> 时间：2013-04-19T23:44:47.067
> 
> 标签：javascript

我有一个`<div id="content">`. 我想将[http://vietduc24h.com](http://vietduc24h.com)中的内容加载到我的`div`：

```
<html>
<head>
<script type="text/javascript">
    $(document).ready(function()
    {
        $("#content").attr("src","http://vietduc24h.com");
    })
</script>
</head>
<body>
    <div id="content"></div>
</body>
</html 
```

我不想使用 iframe。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T23:55:08.067

你需要在这方面考虑CORS。您需要的代码是：

```
<script type="text/javascript">
    $(document).ready(function()
    {
        $("#content").load("http://vietduc24h.com");
    })
</script> 
```

当您的域不在 inside`vietduc24h.com`时，您可能会遇到一些安全异常。为了避免这种情况，您可以在此处托管本地代理。在 PHP 中，我们这样做（`url.php`）：

```
<?php
    $url = file_get_contents(urlencode($_GET["url"]));
    echo $url;
?> 
```

而在脚本中，你需要这样修改：

```
<script type="text/javascript">
    $(document).ready(function()
    {
        $("#content").load("proxy.php?url=http://vietduc24h.com");
    })
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T23:54:41.510

`Load`用 jQuery函数试试这段代码：

```
$('#content').load('http://vietduc24h.com', function() {
  alert('Load was performed.');
}); 
```

如果由于跨域资源共享策略而遇到安全问题，则必须在服务器代码中使用代理。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-19T23:57:36.487

尝试这个：

```
 $("#content").html('<object data="http://vietduc24h.com">'); 
```

取自[这个答案](https://stackoverflow.com/a/9964050/646668)。

# drupal-7 - 如何设置 Drupal 多语言站点？

> ID：16114996
> 
> 赞同：2
> 
> 时间：2013-04-19T23:45:34.170
> 
> 标签：drupal-7, multilingual

我搜索并阅读了许多网站，但找不到如何设置 drupal 多语言网站。

我想在一个站点中使用 2 种语言。

这两种语言有**不同的内容**。（不是内容翻译）。

我启用了 Locale 模块，在每种内容类型中启用了多语言支持

但是当我添加了 2 种语言的内容时

首页列出了所有这些文章，没有过滤网站的语言。

如何设置 drupal 7 以列出具有过滤语言的文章。

例如： [http](http://example.com/en) ://example.com/en <- 此网址应列出所有英文文章。 [http://example.com/fr](http://example.com/fr) <- 此网址应列出所有法国文章。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T14:24:38.160

I have to install **i18n** or [**Internationalization**](http://drupal.org/project/i18n) module from Drupal contributed modules and enabled these option.

*   Multilingual select
*   Internationalization

** This module require [Variable](http://drupal.org/project/variable) module.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-21T03:17:20.730

如果你还想扩展一些没有包含在语言库中的特殊单词，你可以试试下面的代码：

```
$zh = variable_get('locale_custom_strings_zh-hans');//zh-hans is your language key.
$zh["More news"] = '更多信息'; //  KEY/VALUE
variable_set('locale_custom_strings_zh-hans',$zh); // set it back. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T13:51:20.940

由于内容不同，实现此目的的一种方法是创建两种不同的内容类型。为每个内容类型分配别名模式，例如 en/[node:title] 和 fr/[node:title]。然后，您可以在任何页面上显示每种或两种内容类型；它可能是一个别名为 en 或 fr 的分类页面。如果您选择此方法，则不需要语言环境。这不适用于每个内容都有匹配的翻译内容的翻译网站。

# ubuntu-12.04 - Alfresco 4.2c CIFS 配置问题

> ID：16114997
> 
> 赞同：3
> 
> 时间：2013-04-19T23:45:57.650
> 
> 标签：ubuntu-12.04, alfresco-share, cifs

我在 Ubuntu 12.04 上全新安装了 Alfresco 4.2。我已经“成功”配置了 CIFS 并修改了 iptables 以包括 SMB 和 NetBios 的（NAT）端口（1445 TCP -- 445 TCP 和 1137-1139 TCP/UDP 到 137-139 TCP/UDP）。此外，这台机器是亚马逊的 EC2 实例，因此我创建了安全组以包括入站流量 445,137-139 TCP 和 137-139 UDP。当使用网络驱动器从 Windows 机器连接时，我成功连接（似乎端口 445 正在工作）但只显示两个文件夹（一个是站点名称，另一个是 swsdp）。当我移动到站点文件夹时，没有内容（\server\alfresco\site-name），因此缺少 documentLibrary 和所有子文件夹。我已经仔细检查了用于连接的用户是否有权查看内容（即使以管理员身份连接，问题仍然存在）。

我遵循了 [http://andoylang.wordpress.com/2010/07/20/alfresco-with-cifs/](http://andoylang.wordpress.com/2010/07/20/alfresco-with-cifs/)上建议的步骤， 并尝试在 linux 框中隔离问题。当我使用 sbmclient 连接时，出现以下错误：

```
bitnami@ip-10-46-57-42:/opt/bitnami/apache-tomcat/shared/classes$ smbclient -U user \\\\localhost\\drive -p 1139  
输入用户密码：xxxx
read_fd_with_timeout 失败，读取错误 = NT_STATUS_IO_TIMEOUT。
接收 SMB：服务器 127.0.0.1 停止响应
对 LOCALHOST 的会话请求失败（调用超时：服务器在 20000 毫秒后没有响应）
域=[WORKGROUP] OS=[Java] 服务器=[Alfresco CIFS 服务器 6.0.0]
树连接失败：NT_STATUS_BAD_NETWORK_NAME`

```

我对身份验证服务失败的理解也是如此。我在 /opt/bitnami/apache-tomcat/webapps/alfresco/WEB-INF/classes/log4j.properties 获得了以下调试条目：

```
# CIFS 服务器调试

log4j.logger.org.alfresco.smb.protocol=debug

log4j.logger.org.alfresco.smb.protocol.auth=debug

```

但是日志文件中没有与此 Auth 错误相关的输出。这是启用此调试的正确 log4j 文件吗？我还能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T09:26:45.600

[比特纳米社区论坛](http://answers.bitnami.com/questions/12699/cifs-on-bitnami-alfresco-42c-amazon-ec2-ami-ami-bitnami-alfresco-42c-1-linux-ubuntu-12041-x86_64-ebs/12770)也回答了这个问题。该问题与 smbclient 命令有关，而不是与 Alfresco 本身有关，这就是您在 Alfresco 日志文件中找不到任何相关内容的原因。应使用以下 smbclient 命令：

```
$ smbclient  \\\\127.0.0.1\\Alfresco -U user -p 1139
Enter user's password: 
Domain=[WORKGROUP] OS=[Java] Server=[Alfresco CIFS Server 6.0.0]
smb: \\> 
```

# ajax - Jquery ajax json响应未显示

> ID：16114998
> 
> 赞同：0
> 
> 时间：2013-04-19T23:46:01.403
> 
> 标签：ajax, jquery, json

嘿，我所有的代码如下：

JS：

```
$.ajax({
    type: "POST",
    url: "master.php",
    contentType: "application/json; charset=utf-8",
    data: { "called": "REG",
            "fname": $("#FName").val()                              
    },
    dataType: "json",
    success: function(data, responseText, textStatus){
        response = jQuery.parseJSON(data);
        console.log("good: " + response);
        console.log("good3: " + textStatus);
        console.log("good3: " + responseText);
    },
    error: function(XMLHttpRequest, textStatus, errorThrown){
        console.log("error: " + textStatus);
    }
}); 
```

我的 master.php 有：

```
<?php
$called = $_POST['called'];

if ($called == 'REG') {
    $json = array('good' => 'the value here');
    header("Content-Type: application/json", true);

    echo json_encode($json);
}
?> 
```

我得到的控制台输出是这样的：

*好：空 form.php:102*

*good3: [对象对象] form.php:103*

*好3：成功*

我会错过什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T23:52:18.377

您正在使用 POST 方法，但在 PHP 脚本中访问 $_GET 数组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T23:52:38.530

不要调用`jQuery.parseJSON()`成功函数。当您指定 时`dataType: 'json'`，jQuery 会自动为您执行此操作。

# html - 如果未定义容器高度，如何使用 height:50%？

> ID：16114999
> 
> 赞同：4
> 
> 时间：2013-04-19T23:46:04.540
> 
> 标签：html, css

我想使用 height:50%，但是没有定义容器的高度，正确的解决方案是什么？

```
<div id="container">
    <div id="left-50">
        <div id="left-50-1">1</div>
        <div id="left-50-2">2</div>
    </div>
    <div id="image">
        <img src="http://automarka.hu/images/stories/Audi%20A8%202.8%20V6%20FSI%202007.jpg">
    </div>
</div>

#container {
    overflow:hidden;
}

#left-50 {
    float:left;
}

#left-50-1 {
    height:50%;
    width:50px;
    background:yellow;
}

#left-50-2 {
    height:50%;
    width:50px;
    background:purple;
}

#image {
    float:left;
} 
```

jsfiddle 网址：http: [//jsfiddle.net/XqMDF/](http://jsfiddle.net/XqMDF/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T23:51:20.610

正确的解决方案是定义容器高度。或引用主体或其他定义的元素。

使容器`display:inline-block;`调整到图像高度...或定义固定高度。

[演示：http://jsfiddle.net/XqMDF/2/](http://jsfiddle.net/XqMDF/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T23:57:20.547

要点是：添加`position: relative;`到`#container`, 和`position: absolute;`元素`height: 50%;`。此外，适用`display: block;`于图像。然后在 上添加左边距`#image`。该边距的值是元素的宽度`height: 50%;`（在您的示例中为 50px）。

这是包含所有属性的演示。

[http://jsfiddle.net/XqMDF/1/](http://jsfiddle.net/XqMDF/1/)