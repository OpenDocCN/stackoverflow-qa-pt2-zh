# StackOverflow 问答 16057000-16057999

# dart - asBroadcastStream 不能被多次调用

> ID：16057001
> 
> 赞同：4
> 
> 时间：2013-04-17T09:55:05.353
> 
> 标签：dart

在 m4 更新后，StreamController.broadcast() 被删除，我发现 asBroadcastStream 不能被多次调用。这意味着您必须像在 Ugly 类中那样存储流，而不是像在 Pretty 类中那样仅使用 getter。

这是设计使然，还是我做错了？

```
void main() {
  Pretty p = new Pretty();

  //This does not work.
  p.onChange.listen((n) => print(n));
  //This second call throws: "Bad state: Stream already has subscriber". Why?
  p.onChange.listen((n) => print(n));

  //This does work.
  Ugly u = new Ugly();
  u.onChange.listen((n) => print(n));
  u.onChange.listen((n) => print(n));
}

class Pretty{
  StreamController<int> _streamCtrl = new StreamController<int>();
  Stream<int> get onChange => _streamCtrl.stream.asBroadcastStream();
}

class Ugly{
  StreamController<int> _streamCtrl = new StreamController<int>();
  Stream<int> _onChange;
  Stream<int> get onChange => _onChange;

  Ugly(){
    _onChange = _streamCtrl.stream.asBroadcastStream();
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:52:32.470

目前没有更好的方法来做到这一点。

这是邮件列表中的主题，包含更多信息：[https ://groups.google.com/a/dartlang.org/forum/#!searchin/misc/asBroadcastStream%7Csort:relevance/misc/KJrKH5-bNkU/CjpIpEP_EpgJ](https://groups.google.com/a/dartlang.org/forum/#!searchin/misc/asBroadcastStream%7Csort:relevance/misc/KJrKH5-bNkU/CjpIpEP_EpgJ)

在电子邮件中，我说：

使用 r21499，我们删除了 StreamController.broadcast 构造函数。

> StreamController.broadcast 流具有令人讨厌的属性，很容易导致错过事件和类似的难以调试的情况。我们最初为 html-library 添加了这个类，但最终在那里不需要它。通过删除这个类，我们可以为 Streams 提供更清晰的合约。我们仍然保留 asBroadcastStream 方法。它的行为与 StreamController.broadcast 的行为稍有不同和更清醒。`asBroadcastStream`在大多数情况下，如果您需要附加多个侦听器，您可以尝试迁移到 。

# jquery - 在集合中收集 jQuery 元素

> ID：16057005
> 
> 赞同：2
> 
> 时间：2013-04-17T09:55:12.993
> 
> 标签：jquery

我正在使用 jQuery 运行我的 HTML 文件以收集元素。然后，我想对找到的每个元素执行 jQuery 操作。这是我到目前为止所拥有的，但它不起作用，因为我不知道如何存储每个方法中的 jQuery 元素。有人可以帮忙吗？

```
var foundElems = [];
$('#some-container .some-class').each( function(index) {
    //filter $(this)
    //store $(this)
    foundElems.push($(this));
});
$('#some-container2 .some-class2').each( function(index) {
    //filter $(this)
    //store $(this)
    foundElems.push($(this));
});
//do this again for many containers....

//then call some jQuery function on each element of that collection
foundElems.fadeOut('slow'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:57:24.383

您可以通过使用 . 分隔多个元素来选择多个元素`,`。

```
$('#some-container .some-class, #some-container2 .some-class2').fadeOut('slow'); 
```

如果你必须容纳一堆这样的元素，你可以用选择器构建一个数组，并将这个连接的数组传递给 jQuery 函数。

```
var arr = ["#some-container2 .some-class2","#some-container .some-class"];
$(arr.join(",")).fadeOut('slow'); 
```

**工作示例** [http://jsfiddle.net/mBtKg/](http://jsfiddle.net/mBtKg/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:58:37.920

使用[$.merge()](http://api.jquery.com/jQuery.merge/)

```
var foundElems = $();
$('#some-container .some-class').each( function(index) {
    //filter $(this)
    //store $(this)
    foundElems=$.merge(foundElems,$(this));
});
$('#some-container2 .some-class2').each( function(index) {
    //filter $(this)
    //store $(this)
    foundElems=$.merge(foundElems,$(this));
});
//do this again for many containers....

//then call some jQuery function on each element of that collection
foundElems.fadeOut('slow'); 
```

* * *

您还可以使用逗号合并所有选择器查询：

```
var foundElems = $();
$('#some-container .some-class,#some-container .some-class2,#some-container .some-class3').each( function(index) {
    //filter $(this)
    //store $(this)
    foundElems=$.merge(foundElems,$(this));
});

//then call some jQuery function on each element of that collection
foundElems.fadeOut('slow'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T09:58:38.730

您的 jQuery 看起来不错，在您的 .each 语句结束时，您应该有一个元素数组。你的问题是你不能在你的数组对象上调用 .fadeOut 。

你需要这样做：

```
$.each(foundElems, function() {
   $(this).fadeOut("slow");
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T10:13:04.083

我能想到的最简单的解决方案：

```
var array; 
array = $.merge($(),$.find('#someContainer .someClass, #someContainer2 .someClass2'));
array.fadeOut(1000); 
```

# python - 没有字段名称 CSV Reader Python UTF-8

> ID：16057007
> 
> 赞同：0
> 
> 时间：2013-04-17T09:55:15.673
> 
> 标签：python, csv, utf-8, field

所以我试图打开并读取没有字段名称的 csv 文件。根据我所做的研究，我很确定它是用 UTF-8 编码的。我的 csv 有这种格式：

```
1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, 
2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, 
```

我使用以下内容打开并阅读它：

```
def parseCSVCounter(csv_file):

with codecs.open(csv_file, "r", "utf-8-sig","strict", -1) as f:
    f = str(f)
    relayreader = csv.reader(f, delimiter=',')
    for row in relayreader:
        print(row)

        try:
            #row[0] = unicode(row[0], 'latin-1')
            counter(row)
            print('starting row..')

        except UnicodeDecodeError, e:
            print('something went wrong1')
            print e

        except Exception, e:
            print('something went wrong')
            print e 
```

这会产生

```
Starting Command..
['<']
something went wrong
invalid literal for int() with base 10: '<'
['o']
something went wrong
invalid literal for int() with base 10: 'o'
........
starting row..
['9']
starting row..
['3']
starting row..
['8']
starting row..
['2']
starting row..
['8']
starting row..
['>']
something went wrong
invalid literal for int() with base 10: '>'` 
```

我削减了这一点以证明我的观点。似乎它会自动为我生成字段名称。我`csv.DictReader(fieldnames = 'foo')`可以按顺序指定字段名称。如何`csv.reader()`忽略缺少字段名称？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T09:56:16.250

你*不需要*打电话`str(f)`；*直接*使用文件对象：

```
with codecs.open(csv_file, "r", "utf-8-sig", "strict") as f:
    relayreader = csv.reader(f, delimiter=',') 
```

您正尝试将`str(f)`CSV 文件的输出读取为以下形式的字符串：

```
<open file '/path/to/file', mode 'rb' at 0x105f10d20> 
```

您可以从错误输出中看到这一点；它一直拼写出`<`，`o`等，一直到内存地址数字和结束`>`。

请注意，`utf-8-sig`编解码器可以处理出现在文件开头的 UTF-8 编码的[BOM](http://en.wikipedia.org/wiki/Byte_order_mark)，但除非期望该 BOM 存在，否则普通`UTF-8`编解码器就可以了。

# javascript - Metro 应用程序 - SQLite 与索引数据库

> ID：16057010
> 
> 赞同：0
> 
> 时间：2013-04-17T09:55:21.480
> 
> 标签：javascript, windows-8, sqlite, microsoft-metro, indexeddb

我即将开始使用 JavaScript/HTML 开发 Metro 应用程序，该应用程序将在没有互联网连接时在本地存储数据，并且还计划稍后将其移植到其他平台上。

什么是数据库的正确选择 - SQLite 或 Indexed db？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T23:45:41.493

对于 Windows 8 应用程序，我不得不说这`IndexedDB`是一个比 SQLite 更好的选择，因为：

*   它内置在浏览器中，因此您编写的代码具有对 Web 应用程序的可移植性
*   有几个很好的库可以简化使用它（[pouchdb](http://pouchdb.com)、[db.js](https://github.com/aaronpowell/db.js)、[jQuery IndexedDB](https://github.com/axemclion/jquery-indexeddb)等等）
*   该 API 旨在处理 JavaScript 对象，尤其是在查询方面，不像 SQLite，您（一般来说）必须将 SQL 语句创建为字符串

# c - gsoap 生成的 wsdl 不能与 eclipse WebServices 资源管理器一起使用

> ID：16057013
> 
> 赞同：-1
> 
> 时间：2013-04-17T09:55:30.173
> 
> 标签：c, eclipse, web-services, wsdl, gsoap

我有一个 gsoap 生成的网络服务服务器。Gsoap 生成了一个描述 Web 服务的 WSDL 文件。我想使用 Eclipse 的 Web Services Explorer 来测试 Web 服务。

wsdl 加载的第一阶段通过，但显示错误：

```
IWAB0380E Errors were encountered while validating XML schemas.
XSD: The location '' has not been resolved because the import is unused
IWAB0381I file:\\\filepath.wsdl was successfully opened. 
```

我可以看到 Web 服务中定义的方法列表，但是当我单击其中一个时，根本没有填写或发送请求的选项。

我没有来自 Eclipse 工具的更多信息。我不知道 wsdl 的哪一部分是错误的。如果 wsdl 的某个部分有助于找到问题，请告诉我是哪一个。整个 wsdl 可以在这里找到：http: [//pastebin.com/GC1TgbTy](http://pastebin.com/GC1TgbTy)

我对wsdl和soap不太了解。我猜这个错误在定义和命名空间的某个地方，但我不知道在哪里。这是wsdl的开始：

```
<?xml version="1.0" encoding="UTF-8"?>
<definitions name="isis_ws"
 targetNamespace="urn:isis"
 xmlns:tns="urn:isis"
 xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
 xmlns:SOAP-ENC="http://www.w3.org/2003/05/soap-encoding"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xmlns:xsd="http://www.w3.org/2001/XMLSchema"
 xmlns:isis="urn:isis"
 xmlns:SOAP="http://schemas.xmlsoap.org/wsdl/soap12/"
 xmlns:MIME="http://schemas.xmlsoap.org/wsdl/mime/"
 xmlns:DIME="http://schemas.xmlsoap.org/ws/2002/04/dime/wsdl/"
 xmlns:WSDL="http://schemas.xmlsoap.org/wsdl/"

 xmlns="http://schemas.xmlsoap.org/wsdl/">
<types>

 <schema targetNamespace="urn:isis"
  xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
  xmlns:SOAP-ENC="http://www.w3.org/2003/05/soap-encoding"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:xsd="http://www.w3.org/2001/XMLSchema"
  xmlns:isis="urn:isis"
  xmlns="http://www.w3.org/2001/XMLSchema"
  elementFormDefault="unqualified"
  attributeFormDefault="unqualified">
  <import namespace="http://www.w3.org/2003/05/soap-encoding"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T12:13:29.673

这不是问题的答案，而是一种解决方法。

一个名为 SoapUI（[下载链接](http://sourceforge.net/projects/soapui/)）的免费应用程序可以与 gsoap 生成的 wsdl 一起正常工作。

# c# - 停止后台工作人员

> ID：16057022
> 
> 赞同：2
> 
> 时间：2013-04-17T09:55:45.173
> 
> 标签：c#, .net, backgroundworker

我的应用程序使用后台工作人员在循环内做一些工作。我有它，以便在每次循环迭代时，它检查取消挂起是否为真，如果是，则中断循环。好的，我的应用程序在完成当前循环迭代后停止处理。问题是我认为后台工作人员仍在运行 - 如果我单击按钮再次开始处理，我会收到一条错误消息，说明后台工作人员正忙。

我打算处置工人，但它是在表单运行时创建的，所以如果我处置它，它就不会再开始工作了。我真正想做的是告诉后台工作人员它已完成，如果我单击“停止处理”按钮，那么当我单击开始按钮时它就可以再次开始处理了！

我打算试试这个：

```
private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e) 
{ 
    while (!backgroundWorker1.CancellationPending) 
    {
        // Start processing in a background thread so the GUI remains responsive,
        // pass in the name of the text file produced by 
        // PFDR FilenameLogic(txtLetterType.Text); 
    } 
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T10:00:42.663

创建工作人员时，设置`worker.WorkerSupportsCancellation`为`true`. 现在*在*处理程序内部，`DoWork`您必须定期（最常见的是，在某个循环的开始等）检查`worker.CancellationPending`- 如果为真，则设置`e.Cancel = true;`（以便您可以区分完成和取消）、清理和退出（`return;`）。现在您的取消按钮可以调用`worker.CancelAsync();`，它会适当地行动。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-17T10:10:15.443

与 Marc Gravell 的答案相同，但您似乎没有遵循。

你设置 e.cancel = true 吗？

```
 private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
        {
            BackgroundWorker worker = sender as BackgroundWorker;

            for (int i = 1; i <= 10; i++)
            {
                if (worker.CancellationPending == true)
                {
                    e.Cancel = true;
                    break;
                }
                else
                {
                    // Perform a time consuming operation and report progress.
                    System.Threading.Thread.Sleep(500);
                    worker.ReportProgress(i * 10);
                }
            }
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-02T13:47:33.360

我几乎没有找到如何通过***停止按钮****取消***Backgroundworker**的好方法：

 *我的 App 看起来像这样，两个按钮和一个进度条：

[![在此处输入图像描述](https://i.stack.imgur.com/q48Gv.png)](https://i.stack.imgur.com/q48Gv.png)

按下停止按钮后，它看起来像这样：

[![在此处输入图像描述](https://i.stack.imgur.com/omxCG.png)](https://i.stack.imgur.com/omxCG.png)

对于 Start button click 方法，代码检查 BGW 是否忙。如果没有启动 BGW：

```
private void btnStart_Click(object sender, EventArgs e)
    {

        //BGW
        if (!backgroundWorker1.IsBusy)
        {

            backgroundWorker1.RunWorkerAsync();

        }

    } 
```

停止按钮调用以下方法，该方法将标志**CancellationPending**设置为 true：

```
 private void btnStop_Click(object sender, EventArgs e)
    {
        backgroundWorker1.CancelAsync();
    } 
```

这个标志可以在 backgroundWorker1 **_DoWork**方法中使用，该方法负责处理高耗时函数：

```
private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
    {
        for (int i = 0; i <= 100; i++)
        {

            backgroundWorker1.ReportProgress(i);
            Thread.Sleep(100);

            if (backgroundWorker1.CancellationPending && backgroundWorker1.IsBusy)
            {
                e.Cancel = true;
                return;
            }
        }
    } 
```

现在到了棘手的部分，因为在关闭额外线程之前，您必须检查backgroundWorker1 **_ProgressChanged中的****e**对象是否被取消！！！！！！否则你会得到一个**错误**。

 ****```
private void backgroundWorker1_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        int i = 0;

        if (!e.Cancelled)
        {
            i = (int)(e.Result);
        }
        else
        {
            i = 0;
        }

        // Check to see if an error occurred in the
        // background process.
        if (e.Error != null)
        {
            MessageBox.Show(e.Error.Message);
            return;
        }

        // Check to see if the background process was cancelled.
        if (e.Cancelled)
        {
            MessageBox.Show("Processing cancelled.");
            return;
        }

        // Everything completed normally.
        // process the response using e.Result
        MessageBox.Show("Processing is complete.");

    } 
```

**额外信息：** 不要忘记设置这些 Backgroundworker 标志：

```
 //Set WorkerReportsProgress true - otherwise no ProgressChanged active
        backgroundWorker1.WorkerReportsProgress = true;
        backgroundWorker1.WorkerSupportsCancellation = true; 
```

如果这个小教程有帮助--> 点赞

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T13:51:57.423

我似乎已经解决了这个错误 - 在 Backgroundworker DoWork 方法中我放了一段时间 CancelPending 不是真的，当它是真的时我设置 e.Cancel = true 现在似乎工作正常！*****

# matlab - 一个类似于matlab的graythresh的opencv函数

> ID：16057023
> 
> 赞同：0
> 
> 时间：2013-04-17T09:55:51.440
> 
> 标签：matlab, opencv

嗨，我正在尝试将 matlab 代码转换为 opencv 代码。所以我需要一些能`graythesh`在 matlab 中做的事情，并为我的灰度图像提供一个适当的阈值。这是否已经在 opencv 中实现了，因为我找不到它。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T11:14:51.877

正如@georgesl 提到的，结合`THRESH_OTSU`其他类型，例如：

```
threshold ( grey_image, bin_image, 0, 255, THRESH_BINARY | THRESH_OTSU ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-18T15:25:23.193

您可以使用 Opencv。为此，使用了 cv.threshold() 函数，其中 cv.THRESH_OTSU 作为额外标志传递。阈值可以任​​意选择。该算法然后找到作为第一个输出返回的最佳阈值。

```
import cv2 as cv
ret2,th2 = cv.threshold(img,0,255,cv.THRESH_BINARY+cv.THRESH_OTSU)
#th2 is the thresholded image 
```

来源：[https ://docs.opencv.org/4.x/d7/d4d/tutorial_py_thresholding.html](https://docs.opencv.org/4.x/d7/d4d/tutorial_py_thresholding.html)

# apache - 使用 Apache RewriteRule 和 RewriteCond 设置替代内容直到特定日期

> ID：16057024
> 
> 赞同：0
> 
> 时间：2013-04-17T09:56:00.833
> 
> 标签：apache, mod-rewrite, osx-server

我需要在特定日期之前提供一个正在建设的页面，但我将在新内容需要显示的那一天离开这个国家，并且在一周半之后（我知道，第一世界的问题......）

我目前在 httpd-vhosts.conf 文件中为 under_construction 页面提供的服务。

```
RewriteRule ^(.*)$ \
http://localhost:8080/VirtualHostBase/\
http/%{SERVER_NAME}:80/under_construction/VirtualHostRoot$1 [L,P] 
```

我想使用的是下面，但我不完全理解它应该如何工作，当然它不能正常工作，因为它没有正确配置。我曾尝试更改时间字符串以使其在重新启动后几分钟更改，但配置可能一开始就不正确。

```
RewriteRule ^(.*)$ \
RewriteCond ^{TIME} < 201304220000
http://localhost:8080/VirtualHostBase/\
http/%{SERVER_NAME}:80/under_construction/VirtualHostRoot$1 [L,P]

RewriteRule ^(.*)$ \
RewriteCond ^{TIME} > 201304220000
http://localhost:8080/VirtualHostBase/\
http/%{SERVER_NAME}:80/content/VirtualHostRoot$1 [L,P] 
```

我至少在正确的轨道上吗？此外，除了 localhost:80/server-status 之外，还有什么方法可以从终端查看 Apache 的状态（日期、时间等）？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T11:02:44.580

比较运算符和比较运算符之间不允许有空格[`CondPattern`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond)

```
RewriteCond %{TIME} <20130422000000
RewriteRule ^(.*)$ \
http://localhost:8080/VirtualHostBase/\
http/%{SERVER_NAME}:80/under_construction/VirtualHostRoot$1 [L,P]

RewriteCond %{TIME} >=20130422000000
RewriteRule ^(.*)$ \
http://localhost:8080/VirtualHostBase/\
http/%{SERVER_NAME}:80/content/VirtualHostRoot$1 [L,P] 
```

也不要忘记使用`>=`或`<=`，这取决于您是想在当天还是一天后打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:04:49.520

您需要在它适用的规则`RewriteCond` *之前：*

```
RewriteCond %{TIME} < 20130422000000
RewriteRule ^(.*)$ http://localhost:8080/VirtualHostBase/\
http/%{SERVER_NAME}:80/under_construction/VirtualHostRoot$1 [L,P]

RewriteCond %{TIME} > 20130422000000
RewriteRule ^(.*)$ http://localhost:8080/VirtualHostBase/\
http/%{SERVER_NAME}:80/content/VirtualHostRoot$1 [L,P] 
```

变量是 4 位数的`%{TIME}`年份、2 位数的月份、2 位数的日期、2 位数的小时、2 位数的分钟和 2 位数的秒。

# mysql - MySQL 连接，查询未结束（循环？）

> ID：16057028
> 
> 赞同：0
> 
> 时间：2013-04-17T09:56:14.747
> 
> 标签：mysql, loops, join

我想通过这些关节检索这些表中的所有字段。
我的查询循环运行并且不会停止。

```
SELECT *
FROM (`t_produits`, `t_categories`, `t_sscategories`, `t_produits_couleurs`, `t_couleurs`)
JOIN `t_categories` AS categories ON (`t_produits`.`produits_idcat` = `t_categories`.`categories_id`)
JOIN `t_sscategories` AS sscategories ON (`t_produits`.`produits_idsscat` = `t_sscategories`.`sscategories_id`)
JOIN `t_produits_couleurs` AS produitscouleurs ON (`t_produits`.`produits_idproduit` = `t_produits_couleurs`.`produits_couleurs_idproduit`)
JOIN `t_couleurs` AS couleurs ON (`t_produits_couleurs`.`produits_couleurs_idcouleur` = `t_couleurs`.`couleurs_id`); 
```

我已经尝试过了，效果很好：

```
SELECT *
FROM (`t_produits`, `t_categories`)
JOIN `t_categories` AS categories ON (`t_produits`.`produits_idcat` = `t_categories`.`categories_id`) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T09:59:49.440

```
FROM (`t_produits`, `t_categories`, `t_sscategories`, `t_produits_couleurs`, `t_couleurs`) 
```

Should just look like

```
FROM (`t_produits`) 
```

It should speed the query up by a quite big factor...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T10:00:12.423

The problem is that you're mixing two different JOIN styles in one query. Try this

```
SELECT *
  FROM `t_produits` p
  JOIN `t_categories` c ON p.`produits_idcat` = c.`categories_id`
  JOIN `t_sscategories` s ON p.`produits_idsscat` = s.`sscategories_id`
  JOIN `t_produits_couleurs` pc ON p.`produits_idproduit` = pc.`produits_couleurs_idproduit`
  JOIN `t_couleurs` l ON p.`produits_couleurs_idcouleur` = l.`couleurs_id`; 
```

*Disclaimer: the query obviously has not been tested*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T10:11:52.890

在您的查询中，您有 4 个笛卡尔连接（没有`where`子句，查询将连接子句中的所有表`from`）和许多具有给定条件的连接。难怪，查询永远不会结束..

您可以通过两种方式更改查询：

**使用 where 条件**

```
SELECT *
FROM `t_produits` prod, `t_categories` cat, `t_sscategories` sscat, `t_produits_couleurs` prodcoul, `t_couleurs` coul)
WHERE prod.`produits_idcat` = cat.`categories_id`
  AND prod.`produits_idsscat` = cat.`sscategories_id`
  AND prod.`produits_idproduit` = prodcoul.`produits_couleurs_idproduit`
  AND prodcoul.`produits_couleurs_idcouleur` = coul.`couleurs_id`; 
```

**或使用连接**：

```
SELECT *
FROM `t_produits` prod
JOIN `t_categories` cat ON prod.`produits_idcat` = cat.`categories_id`
JOIN `t_sscategories` sscat ON prod.`produits_idsscat` = sscat.`sscategories_id`
JOIN `t_produits_couleurs` prodcoul ON prod.`produits_idproduit` = procoul`.`produits_couleurs_idproduit`
JOIN `t_couleurs` coul ON procoul.`produits_couleurs_idcouleur` = coul.`couleurs_id`; 
```

还有一点：如果不使用别名，则不需要定义别名

# c# - Webdriver如何等到元素在webdriver C#中可点击

> ID：16057031
> 
> 赞同：18
> 
> 时间：2013-04-17T09:56:18.140
> 
> 标签：c#, webdriver, selenium-webdriver

在浏览器中生成元素后，有一个块 Ui 覆盖了所有元素几秒钟，因此我面临一个问题，由于元素已经存在，网络驱动程序尝试单击该元素，但单击是由 Block UI 接收。我曾尝试使用等待直到但我没有帮助，因为我可以在 C# webdriver 中找到 isClickAble

```
 var example = _wait.Until<IWebElement>((d) => d.FindElement(By.XPath("Example")));
   var example2 = _wait.Until<IWebElement>(ExpectedConditions.ElementIsVisible(By.XPath("Example")));
example.click();
example2.click(); 
```

isClickAble 是否有 C# 等价物，在此先感谢

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-04-17T10:20:29.810

看看 Java 源代码，告诉我它基本上是在做两件事来确定它是否“可点击”：

[https://code.google.com/p/selenium/source/browse/java/client/src/org/openqa/selenium/support/ui/ExpectedConditions.java](https://code.google.com/p/selenium/source/browse/java/client/src/org/openqa/selenium/support/ui/ExpectedConditions.java)

首先，它会通过使用标准来检查它是否“可见” `ExpectedConditions.visibilityOfElementLocated`，然后它会简单地检查它是否`element.isEnabled()`是`true`。

这可以稍微浓缩，这基本上意味着（简化，在 C# 中）：

1.  等到元素从 DOM 返回
2.  等到元素的`.Displayed`属性为真（本质上`visibilityOfElementLocated`就是检查的内容）。
3.  等到元素的`.Enabled`属性为真（这本质上就是`elementToBeClickable`要检查的内容）。

我会这样实现（添加到当前的集合中`ExpectedConditions`，但是有多种方法可以做到：

```
/// <summary>
/// An expectation for checking whether an element is visible.
/// </summary>
/// <param name="locator">The locator used to find the element.</param>
/// <returns>The <see cref="IWebElement"/> once it is located, visible and clickable.</returns>
public static Func<IWebDriver, IWebElement> ElementIsClickable(By locator)
{
    return driver =>
    {
        var element = driver.FindElement(locator);
        return (element != null && element.Displayed && element.Enabled) ? element : null;
    };
} 
```

可用于以下内容：

```
var wait = new WebDriverWait(driver, TimeSpan.FromMinutes(1));
var clickableElement = wait.Until(ExpectedConditions.ElementIsClickable(By.Id("id"))); 
```

**但是，您可能对可点击**的含义有不同的想法，在这种情况下，此解决方案可能不起作用 - 但它是对 Java 代码正在执行的操作的直接翻译。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-09T05:16:56.740

这是我用来检查它是否可点击的代码，否则转到另一个 URL。

```
if (logOutLink.Exists() && ExpectedConditions.ElementToBeClickable(logOutLink).Equals(true))
            {
                logOutLink.Click();
            }
            else
            {
                Browser.Goto("/");
            } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-18T21:47:46.083

如果您遇到诸如“另一个元素会收到点击”之类的问题，解决此问题的一种方法是使用等待该覆盖框消失的 while 循环。

```
//The below code waits 2 times in order for the problem element to go away.
int attempts = 2;
var elementsWeWantGone = WebDriver.FindElements(By.Id("id"));
while (attempts > 0 && elementsWeWantGone.Count > 0)
{
    Thread.Sleep(500);
    elementsWeWantGone = WebDriver.FindElements(By.Id("id"));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-08T04:04:13.277

在我们较慢的测试运行器计算机上，似乎首先可以找到输入元素，但在脚本尝试发送键或单击输入控件时仍然无法单击。等待“ElementToBeClickable”有帮助。更快、更强大的测试运行系统几乎没有这个问题。

这是带有一些上下文的代码，似乎在我基于 C# 的 Selenium 测试中有所改进。还使用 SpecFlow 和 xUnit。我们使用的是 IE11 和 IEDriverServer.exe。

截至 2019 年 5 月，包含此内容的 NuGet 包是 DotNetSeleniumExtras.WaitHelpers。

关键是这一行：

**wait.Until（SeleniumExtras.WaitHelpers.ExpectedConditions.ElementToBeClickable（通过...**

使用指向您要与之交互的第一个输入字段的选择器对新页面上的第一个输入字段执行此操作。(By.XPath("")

```
[Given(@"I have selected the link to the OrgPlus application")]
public void GivenIHaveSelectedTheLinkToTheOrgPlusApplication()
{
    _driver.Navigate().GoToUrl("http://orgplus.myorg.org/ope?footer");
}

[Given(@"I have selected the link to the OrgPlus Directory lookup")]
public void GivenIHaveSelectedTheLinkToTheOrgPlusDirectoryLookup()
{
    var wait = new WebDriverWait(_driver, new TimeSpan(0, 0, 30));
    var element = wait.Until(SeleniumExtras.WaitHelpers.ExpectedConditions.ElementToBeClickable(By.XPath("//*[@id=\"lnkDir\"]")));
    IWebElement btnSearch = _driver.FindElement(By.XPath("//*[@id=\"lnkDir\"]"));
    btnSearch.SendKeys(Keys.Enter);
} 
```

# ios - 导航栏中心的活动指示器

> ID：16057034
> 
> 赞同：11
> 
> 时间：2013-04-17T09:56:29.913
> 
> 标签：ios, xcode, uinavigationcontroller, uinavigationbar

在我的应用程序中，我想在导航栏的中心添加活动指示器（标题位置）。当网络服务响应完成时，它应该替换为旧标题。我的应用程序中有 5 个导航栏。当我在谷歌中搜索时，我得到了几个代码但他们只是在改变左右栏按钮。有帮助吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-17T15:51:02.470

您使用导航项的 titleView 属性来替换导航栏的标题。因此，要添加活动指示器，只需执行以下操作：

```
 UIActivityIndicatorView *aiView = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
    aiView.hidesWhenStopped = NO; //I added this just so I could see it
    self.navigationItem.titleView = aiView; 
```

当您要删除它并再次显示标题时：

```
 self.navigationItem.titleView = nil; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-07-16T13:14:52.460

pasqls 答案对我来说效果很好，我已经用 swift 写了

```
 func showActivityIndicator() {
        let activityIndicatorView = UIActivityIndicatorView(activityIndicatorStyle: UIActivityIndicatorViewStyle.White)
        activityIndicatorView.frame = CGRectMake(0, 0, 14, 14)
        activityIndicatorView.color = UIColor.blackColor()
        activityIndicatorView.startAnimating()

        let titleLabel = UILabel.new()
        titleLabel.text = "...Connecting"
        titleLabel.font = UIFont.italicSystemFontOfSize(14)

        let fittingSize = titleLabel.sizeThatFits(CGSizeMake(200.0, activityIndicatorView.frame.size.height))
        titleLabel.frame = CGRectMake(activityIndicatorView.frame.origin.x + activityIndicatorView.frame.size.width + 8, activityIndicatorView.frame.origin.y, fittingSize.width, fittingSize.height)

        let titleView = UIView(frame: CGRectMake(((activityIndicatorView.frame.size.width + 8 + titleLabel.frame.size.width) / 2), ((activityIndicatorView.frame.size.height) / 2), (activityIndicatorView.frame.size.width + 8 + titleLabel.frame.size.width), (activityIndicatorView.frame.size.height)))
        titleView.addSubview(activityIndicatorView)
        titleView.addSubview(titleLabel)

        self.navigationItem.titleView = titleView
    }

    func hideActivityIndicator() {
        self.navigationItem.titleView = nil
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-22T16:03:53.647

此外，如果您想在活动指示器旁边添加一个文本标签（如 Apple 在设置应用程序中所做的那样，例如 Facebook 登录），您可以这样做：

```
- (void)showActivityIndicator
{
    UIActivityIndicatorView *activityIndicatorView = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhite];
    activityIndicatorView.frame = CGRectMake(0, 0, 22, 22);
    activityIndicatorView.color = [UIColor blackColor];
    [activityIndicatorView startAnimating];

    UILabel *titleLabel = [UILabel new];
    titleLabel.text = @"Creating Account";
    titleLabel.font = [UIFont boldFlatFontOfSize:18];

    CGSize fittingSize = [titleLabel sizeThatFits:CGSizeMake(200.0f, activityIndicatorView.frame.size.height)];
    titleLabel.frame = CGRectMake(activityIndicatorView.frame.origin.x + activityIndicatorView.frame.size.width + 8,
                                  activityIndicatorView.frame.origin.y,
                                  fittingSize.width,
                                  fittingSize.height);

    UIView *titleView = [[UIView alloc] initWithFrame:CGRectMake(-(activityIndicatorView.frame.size.width + 8 + titleLabel.frame.size.width)/2,
                                                                 -(activityIndicatorView.frame.size.height)/2,
                                                                 activityIndicatorView.frame.size.width + 8 + titleLabel.frame.size.width,
                                                                 activityIndicatorView.frame.size.height)];
    [titleView addSubview:activityIndicatorView];
    [titleView addSubview:titleLabel];

    self.navigationItem.titleView = titleView;
}

- (void)hideActivityIndicator
{
    self.navigationItem.titleView = nil;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-06-06T10:39:19.177

**斯威夫特 4**

的pasql

```
private func showActivityIndicator() {
    let activityIndicatorView = UIActivityIndicatorView(activityIndicatorStyle: .white)
    activityIndicatorView.frame = CGRect(x: 0, y: 0, width: 14, height: 14)
    activityIndicatorView.color = .black
    activityIndicatorView.startAnimating()

    let titleLabel = UILabel()
    titleLabel.text = "...Connecting"
    titleLabel.font = UIFont.italicSystemFont(ofSize: 14)

    let fittingSize = titleLabel.sizeThatFits(CGSize(width: 200.0, height: activityIndicatorView.frame.size.height))
    titleLabel.frame = CGRect(x: activityIndicatorView.frame.origin.x + activityIndicatorView.frame.size.width + 8,
                              y: activityIndicatorView.frame.origin.y,
                              width: fittingSize.width,
                              height: fittingSize.height)

    let rect = CGRect(x: (activityIndicatorView.frame.size.width + 8 + titleLabel.frame.size.width) / 2,
                      y: (activityIndicatorView.frame.size.height) / 2,
                      width: activityIndicatorView.frame.size.width + 8 + titleLabel.frame.size.width,
                      height: activityIndicatorView.frame.size.height)
    let titleView = UIView(frame: rect)
    titleView.addSubview(activityIndicatorView)
    titleView.addSubview(titleLabel)

    navigationItem.titleView = titleView
}

private func hideActivityIndicator() {
    navigationItem.titleView = nil
} 
```

# jsp - Spring MVC - JSP 请求参数

> ID：16057036
> 
> 赞同：0
> 
> 时间：2013-04-17T09:56:34.723
> 
> 标签：jsp, spring-mvc

我有一个弹簧控制器，我在其中以以下方式设置一些属性

```
mav.addObject("somestuff", "<div>something I am setting in controller</div"); 
```

当我尝试在 JSP 页面中获取某些东西的价值时，如下所示

```
<div class="ABC">
 ${somestuff} <br clear="all" />
</div> 
```

由于某种原因，它返回 0。

任何线索都知道为什么会发生这种情况。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:04:04.017

使用`ModelMap`如下：

```
ModelMap modelMap = new ModelMap();
modelMap.put("somestuff", "some content"); 
```

# c++ - C++ 赋值。无法将用户输入作为 execpv() 的命令获取

> ID：16057037
> 
> 赞同：0
> 
> 时间：2013-04-17T09:56:38.430
> 
> 标签：c++, unix, process, pipe

我为我的班级分配了这个作业，这个程序几乎完成了，但输出与它应该是相去甚远。

我在 linux 系统上运行它并使用 geany ide。

这是该程序的主要要点：

实现一个 C++ 程序，提示用户输入 2 个命令。每个输入字符串应该是一个 UNIX 命令，允许使用参数。例如，输入 1 可以是“ls -l”，输入 2 可以是“wc -l”。然后程序将创建一个管道和两个子进程。第一个子进程将运行第一个输入中指定的命令。它将输出到管道而不是标准输出。第二个子进程将运行第二个输入中指定的命令。它将从管道而不是标准输入中获取其输入。父进程将等待其两个子进程完成，然后整个过程将重复。当第一个命令输入“quit”时，执行将停止。

到目前为止，这是我的代码：

```
#include <iostream>
#include <cstdio>
#include <cstdlib>
#include <unistd.h>
#include <sys/types.h>
#include <sys/wait.h>
#include <cstring>
using namespace std;

int main() {
    //Declare Variables
    char firstAns[80], secondAns[80];
    int rs, ansLen, pipefd[2];
    int pid1, pid2;
    char * command1[5], *command2[5];
    char quit[] = "quit\0";

    //Allocate memory for commands
    for(int a=0; a<5; a++){
        command1[a]=new char[80];
    }

    for(int b=0; b<5; b++){
        command2[b]=new char[80];
    }

    //Asking for the commands
    cout << "Please enter your first command(incl. args) or quit: ";
    cin >> firstAns;

    //Do the program while the first answer isn't quit
    while(firstAns != quit) {
        //Copy first answer into first command
        ansLen = strlen(firstAns);
        for(int i=0; i < ansLen; i++){
            strcpy(command1[i], firstAns);
        }

        //Just skip to end of program if first command is quit
        cout << "Please enter your second command(incl. args): ";
        cin >> secondAns;

        //Copy second answer into second command
        ansLen = strlen(secondAns);
        for(int i=0; i < ansLen; i++){
            strcpy(command1[i], secondAns);
        }

        //pipe
        rs = pipe(pipefd);
        //if pipe fails to be made
        if(rs == -1){
            perror("Fail to create a pipe");
            exit(EXIT_FAILURE);
        }

        //Fork for the two processes
        pid1 = fork();

        if (pid1 != 0){
            pid2 = fork();
        }

        if(pid1 == -1){
            perror("Fail to create a pipe");
            exit(EXIT_FAILURE);
        }
            if(pid2 == -1){
            perror("Fail to create a pipe");
            exit(EXIT_FAILURE);
        }

        if (pid1 == 0) { // 1st child process
            // close write end of pipe
            close(pipefd[0]);
            // duplicate
            dup2(pipefd[1], 1);
            //execute the input argument
            rs = execvp(command1[0], command1);
            //error check
            if (rs == -1) {
                perror("Fail to execute command");
                exit(EXIT_FAILURE);
            }
        }

        if (pid2 == 0) { // 2st child process
            // close write end of pipe
            close(pipefd[1]);
            // duplicate
            dup2(pipefd[0], 0);
            //execute the input argument
            rs = execvp(command2[0], command2);
            //error check
            if (rs == -1) {
                perror("Fail to execute command");
                exit(EXIT_FAILURE);
            }
        }
        else {// parent process
            // close read and write end of pipe
            close(pipefd[0]);
            close(pipefd[1]);
            // wait for child processes
            wait(&pid1);
            wait(&pid2);
        }

        //Asking for the commands
        cout << "Please enter your first command(incl. args) or quit: ";
        cin >> firstAns;

    }; //end of while()

    return 0;
} 
```

我没有收到任何错误，但我没有得到我想要的输出。这是它应该如何工作的示例输出：

```
Enter command 1 (incl. args) or quit: ls
Enter command 2 (incl. args): wc
      5       5      63
Enter command 1 (incl. args) or quit: ls -l
Enter command 2 (incl. args): wc -w
      47
Enter command 1 (incl. args) or quit: hello
Enter command 2 (incl. args): more
hello: No such file or directory
Enter command 1 (incl. args) or quit: quit 
```

相反，我的输出只产生 perror，然后说 No file or directory found for the first command and Bad address for the second command，如下所示：

```
Enter command 1 (incl. args) or quit: ls
Enter command 2 (incl. args): wc
Failed to execute command: No such file or directory
Failed to execute command: Bad address 
```

我猜它是因为变量在 execpv 中不匹配，但我可以稍微推动一下最终击败这个程序。

如果有人对此也有任何建议，那么退出命令似乎也不起作用。任何类型的建议都会很棒，并且会帮助这个年轻的程序员:)

# php - 如何从周日开始周数？

> ID：16057039
> 
> 赞同：6
> 
> 时间：2013-04-17T09:56:38.567
> 
> 标签：php, datetime, week-number

我需要在 php 中获取周数，其中应从星期日计算周数。默认情况下从星期一开始。请帮助我找到一种方法来获取周数，考虑星期天作为开始日。

在 php 手册 ISO-8601 年的周数中，从星期一开始的周数（在 PHP 4.1.0 中添加）

但我需要得到一年中的周数，从周日开始的周数。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T10:09:12.753

尝试这个：

```
$week = intval(date('W'));

if (date('w') == 0) {            // 0 = Sunday
   $week++;
}

echo $week; 
```

不确定逻辑是否正确；

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-12-28T11:09:27.397

第一个解决方案在 2017 年 1 月 1 日或从星期日开始的任何年份都不正确。

**尝试这个：**

```
$date = date('Y-m-d');
echo strftime("%U", strtotime($date ) ); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-11-16T21:39:48.260

扩展[丝火](https://stackoverflow.com/users/633098/silkfire)答案并允许它缠绕多年

```
 if($date->format('w') == 0){
        if(date('W',strtotime($date->format('Y')."-12-31"))==52 and $date->format('W') == 52){
            $week = 1;
        }
        elseif(date('W',strtotime($date->format('Y')."-12-31"))==53 and $date->format('W') == 53){
            $week = 1;
        }
        else{
            $week++;
        }
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-05-26T04:33:12.987

试试这个。要获得星期天必须-1 天。

```
$date = "2015-05-25";
echo date("W", strtotime("-1 day",strtotime($date))); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-17T10:11:57.163

您应该尝试使用[strftime](http://fr2.php.net/manual/en/function.strftime.php)

```
$week_start = new DateTime();
$week = strftime("%U");  //this gets you the week number starting Sunday
$week_start->setISODate(2012,$week,0); //return the first day of the week with offset 0
echo $week_start -> format('d-M-Y'); //and just prints with formatting 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-12-27T17:19:42.883

我这样解决了这个问题：

```
function getWeekOfYear( DateTime $date ) {

        $dayOfweek = intval( $date->format('w') );

        if( $dayOfweek == 0 ) {
            $date->add(new DateInterval('P1D'));
        } 

        $weekOfYear = intval( $date->format('W') );

        return $weekOfYear;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-30T19:20:34.520

我知道这个话题很老，但这是使用 elvis 运算符和 strtotime() 的“+7 天”表达式的一种更短的方法：

```
$week=date("W",strtotime(date("w")==1?"+7 day":"+0 day")); 
```

如果 $date("w") 返回 true 表示今天是星期二和星期日 (1-6) 之间的一天，所以我们可以返回今天的星期 ('today')。

如果返回 false，则表示是星期一（0），所以，我们应该返回第二天（'+1 周'）。

这样我们就不需要关心一年的最后一天或第一天，也不需要检查当年是否有 52 周或 53 周。

已编辑：上一个答案（以及本主题中的其他答案）不适用于今年，因为 1 月 1 日是星期一，因此，它必须是 1 周前（-1 周），不包括星期日（第 6 天）。

```
date("W",strtotime(date("w")?'-7 day':'+0 day')); 
```

我认为询问 1 月 1 日是否为星期一的条件可以工作，但我还没有测试它，我稍后会回来回答

对于自定义日，您可以使用以下命令：

```
$date = strtotime('2018-04-30'); // (it is monday)

if(date("w",strtotime(date('Y',$date).'-01-01'))==1){ // if first day of year is monday
    $week = strtotime(date('w',$date)?"-7 day":"+0 day",$date); // and today is sunday, sub a week
    $week = date("W",$week);
}else{ // if is not monday
    $week = strtotime(date('w',$date)==1?"+7 day":"+0 day",$date); // and today is monday, add a week
    $week = date("W",$week);
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-05-20T20:24:55.267

基于@silkfire 的回答：

```
 $year = date('Y');
    $week_no = date('W');
    if (date('w') == 0) {            // 0 = Sunday
       $week_no++;
    }
    // We shifted the week but the week still starts on a Monday.
    $weekStartDate = new DateTime();
    $weekStartDate->setISODate($year,$week_no);
    // Shift start date to Sunday
    $weekStartDate->add(DateInterval::createFromDateString('-1 day')); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-12-07T17:19:04.950

在 php 5.6 Debian 7 中测试

```
function getWeekNumber(\DateTime $_date)
{
    $week = intval($_date->format('W'));

    if(intval($_date->format('w')) == 0) {
        $week = intval($_date->format('W')) == ( 52 + intval($_date->format('L')) ) ? 1 : $week + 1;
    }

    return $week;
} 
```

# python - Mac OS X 上的 Python 多处理错误

> ID：16057040
> 
> 赞同：4
> 
> 时间：2013-04-17T09:56:39.850
> 
> 标签：python, macos, multiprocessing

我需要将我的 python 应用程序分发给一些 mac 用户，该应用程序在 Windows 上运行良好，但在 Mac OS X 上出现问题。[由于http://code.activestate.com/lists/python-ideas/17811/](http://code.activestate.com/lists/python-ideas/17811/)，多处理在 Mac OS X 上不起作用。是否有解决该错误的解决方法：

'进程已经分叉，你不能安全地使用这个 CoreFoundation 功能。你必须执行（）。打破**THE_PROCESS_HAS_FORKED_AND_YOU_CANNOT_USE_THIS_COREFOUNDATION_FUNCTIONALITY** _YOU_MUST_EXEC__() 进行调试。

非常感谢您的帮助:)

# c# - 如何将javascript变量发送到代码后面

> ID：16057043
> 
> 赞同：0
> 
> 时间：2013-04-17T09:56:50.350
> 
> 标签：c#, javascript, ajax, asp.net-ajax

我想将我的 id 值发送到后面的代码以填充列表框。

在这里我调用我的 id 值：

```
function dialogOpen(id) {
    $('#dialog-form').dialog('open');
} 
```

在这里我通常使用这个 id 值：

```
 var contentstring = p.name + '<div ID="pageopen" onclick="dialogOpen('+p.pid+')"> <br>Detaylar </div>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:02:04.577

使用 jQuery ajax 并请求一些 POST 操作，或者提交表单或请求 Web 服务或 asp.net mvc 控制器中的 POST 操作

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# c# - system.speech.synthesis 中的访问冲突异常

> ID：16057044
> 
> 赞同：0
> 
> 时间：2013-04-17T09:56:58.083
> 
> 标签：c#, wpf, speech, speech-synthesis

当像这样使用 system.speech.synthesis 时：

```
using (_speech)
{
    _speech.SelectVoice("Anne");
    _speech.SpeakCompleted += OnSpeakCompleted;
    _speech.Rate = Convert.ToInt32(Rate);
    _speech.Volume = Convert.ToInt32(Volume);
    _speech.SpeakAsync(text);
} 
```

我收到此错误：

```
System.AccessViolationException was unhandled
Message=Attempted to read or write protected memory. This is often an indication that other memory is corrupt.
Source=System.Speech
StackTrace:
       at System.Speech.Internal.ObjectTokens.ObjectToken.ISpObjectWithToken.SetObjectToken(ISpObjectToken pToken)
       at System.Speech.Internal.ObjectTokens.ObjectToken.CreateObjectFromToken[T](String name)
       at System.Speech.Internal.Synthesis.VoiceSynthesis.GetComEngine(VoiceInfo voiceInfo)
       at System.Speech.Internal.Synthesis.VoiceSynthesis.GetProxyEngine(VoiceInfo voiceInfo)
       at System.Speech.Internal.Synthesis.VoiceSynthesis.ThreadProc()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.runTryCode(Object userData)
       at System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode code, CleanupCode backoutCode, Object userData)
       at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
InnerException: 
```

创建语音合成器的对象时不会发生错误，但在使用它时会发生错误。外汇。改变速率、音量等。

有没有人有解决这种问题的方法？解决方案？提示？有什么可以帮助解决这个烦人的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:03:01.097

只是猜测，您正在调用 _speech.SpeakAsync(text); 这意味着您正在使用语音异步，在下一行中，您通过关闭 using 来处理 _speech 对象。我可以想象这会导致问题。在获得处理结果后，您应该处置 _speech 对象。

# android - Android Logcat 中仅显示橙色消息

> ID：16057049
> 
> 赞同：4
> 
> 时间：2013-04-17T09:57:14.407
> 
> 标签：android, eclipse, cordova, logcat

我正在使用 PhoneGap 在 Eclipse 的帮助下开发 android 应用程序。

但是从很久以前开始，logcat 以橙色显示各种消息（警告、错误...），包括 PID/Tag/Time 在内的信息全部消失。

这是图片： ![在此处输入图像描述](https://i.stack.imgur.com/8S85b.png)

我试图打开另一个应用程序并使用不同的 PhoneGap 版本但徒劳无功。

请帮忙~

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:09:23.663

当您使用具有最新 api 和过时 sdk 的 android 设备时，就会发生 IT 问题。对我来说，我使用的是 adt 16，当我尝试在 jelly bean 中运行我的应用程序时，它出现了。所以我更新到最新的sdk，这已经解决了。

在 Eclipse Window > Android SDK Manager 中更新 sdk。从那里你可以安装新的包。

[要更新 adt，请从此处](http://tools.android.com/download)下载最新的 ADT 插件。然后从帮助 > 安装新软件然后本地安装它。

在我的情况下，我对 supportv4 库有一些问题。我还对其进行了更新并将其重新排序。否则我认为没有其他问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:02:40.950

只需从文本框中删除过滤的文本**错误**。这将使用关键字过滤您的日志。此文本框用于搜索包含您的输入关键字的 logcat

# java - 将行从文件复制到另一个

> ID：16057050
> 
> 赞同：1
> 
> 时间：2013-04-17T09:57:19.397
> 
> 标签：java, file, filereader

我需要根据条件将文件中的一行复制到另一个文件这是我的代码

```
 import org.apache.commons.io.FileUtils;

     public class FileCopy {

public static void main(String args[]) throws IOException { 

    File source = \\
    File fileToCopyFrom \\
    File target :\\
    if (!target.exists()) {
        target.createNewFile();
    }

    PrintStream fstream =new PrintStream(target);
    BufferedReader brSource = new BufferedReader(new FileReader(source));
    BufferedReader brFileToCopyFrom = new BufferedReader(new FileReader(fileToCopyFrom));

    String lineSource;
    String lineToCopy;

    while((lineSource = brSource.readLine()) != null) {

          while ((lineToCopy=brFileToCopyFrom.readLine())!=null) {
    if (lineToCopy.contains(lineSource.substring(lineSource.indexOf("_")+1, lineSource.indexOf(".")-1)))
                fstream.println(lineToCopy);    
            }

        }
}} 
```

但它只复制第一行错误在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:28:37.913

`while`只有第一个被复制，因为在第一个的第二次迭代中`brFileToCopyFrom`到达文件的末尾。

您需要先打开`BufferedReader brFileToCopy`里面`while`（示例 1）或使用`mark/reset`功能（示例 2）。

示例 1：

```
while ((lineSource = brSource.readLine()) != null) {

        BufferedReader brFileToCopyFrom = new BufferedReader(new FileReader(fileToCopyFrom));

        while ((lineToCopy = brFileToCopyFrom.readLine()) != null) {
            ...
        }

    }
} 
```

示例 2：

```
brFileToCopyFrom.mark(1024); // number of characters to be read while preserving the mark

while ((lineSource = brSource.readLine()) != null) {

        brFileToCopyFrom.reset();

        while ((lineToCopy = brFileToCopyFrom.readLine()) != null) {
            ...
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T10:17:13.467

我建议使用`commons-io.jar`. 在这个`FileUtils`类中有很多方法可以进行`File`复制、移动和删除等操作。

**编辑**

如果条件包含`break`.

```
while ((lineSource = brSource.readLine()) != null) {

            while ((lineToCopy = brFileToCopyFrom.readLine()) != null) {
                if (lineToCopy.contains(lineSource.substring(
                        lineSource.indexOf("_") + 1,
                        lineSource.indexOf(".") - 1))) {
                    fstream.println(lineToCopy);
                    break;
                }
            }

        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T10:30:39.003

你创建你的流，你从你的流中读取所有条目，第一行，但是当你想为第二行做这个时，brFileToCopyFrom 是空的（当你检查你的第一行时，你已经从它拿走了所有东西。

所以你可以做的就是将你的创建移动`brFileToCopyFrom`到循环中，

```
while((lineSource = brSource.readLine()) != null) {
BufferedReader brFileToCopyFrom = new BufferedReader(new FileReader(fileToCopyFrom));

... 
```

那应该有效

# c# - 匹配委托 'system.eventhandler' MouseDown MouseUp MouseMove 没有重载

> ID：16057051
> 
> 赞同：1
> 
> 时间：2013-04-17T09:57:21.160
> 
> 标签：c#, event-handling, mousemove, mousedown, mouseup

我必须根据名为“descripcio”的字符串 [] 以一种形式创建标签。“descripcio”的每个参数对应一个新标签。每个标签需要三个事件，MouseDown、MouseUp 和 MouseMove。所有标签的相同事件。代码是：

```
public FormEquip(string[] descripcio)
{
    InitializeComponent();
    this.descripcio = descripcio;
    inicialitza_descripcions();
}

private void inicialitza_descripcions()
{
    for (int i = 0; i < this.descripcio.Length; ++i)
    {
        System.Windows.Forms.Label Label = new System.Windows.Forms.Label();
        crea_label(ref Label2, 100, 50 * (i + 1), "D" + i, this.descripcio[i], 2 * i + 2);
        this.Controls.Add(Label);
    }
}

private void crea_label(ref System.Windows.Forms.Label Label, int x, int y, string nom, string text, int index)
{
    Label.AutoSize = true;
    Label.Font = new System.Drawing.Font("Microsoft Sans Serif", 12F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
    Label.Location = new System.Drawing.Point(x, y);
    Label.Name = nom;
    Label.TabIndex = index;
    Label.Text = text;
    Label.Visible = true;
    Label.MouseDown += new System.EventHandler(Label_MouseDown);
    Label.MouseUp += new System.EventHandler(Label_MouseUp);
    Label.MouseMove += new System.EventHandler(Label_MouseMove);
}

private void Label_MouseDown(object sender, MouseEventArgs e)
{  
    this.isDragging = true;
}  

private void Label_MouseUp(object sender, MouseEventArgs e)
{
    this.isDragging = false;  
}  

private void Label_MouseMove(object sender, MouseEventArgs e)
{
    Control ctrl = sender as Control;  
    if (this.isDragging)  
    {  
        Point p1 = ctrl.PointToScreen(e.Location);  
        Point p2 = ctrl.Parent.PointToClient(p1);  
        ctrl.Location = p2;  
    }  
} 
```

此代码在这三行中生成“Label_MouseDown/Label_MouseUp/Label_MouseMove”匹配委托“system.eventhandler”的“无重载”错误：

```
 Label.MouseDown += new System.EventHandler(Label_MouseDown);
    Label.MouseUp += new System.EventHandler(Label_MouseUp);
    Label.MouseMove += new System.EventHandler(Label_MouseMove); 
```

第一行“Label_MouseDown”没有重载匹配委托“system.eventhandler”。第二行““Label_MouseUp”没有重载匹配委托“system.eventhandler”。第三行““Label_MouseMove”没有重载匹配委托“system.eventhandler””。

在写这篇文章之前，我已经看过几篇带有类似错误消息的帖子。我试图按照我可以在那些帖子中阅读的解释进行操作，但我无法得到解决方案。谢谢大家。

编辑：

最后，我只需要更改这部分代码：

```
Label.MouseDown += new System.EventHandler(Label_MouseDown);
Label.MouseUp += new System.EventHandler(Label_MouseUp);
Label.MouseMove += new System.EventHandler(Label_MouseMove); 
```

为了：

```
Label.MouseDown += new System.Windows.Forms.MouseEventHandler(Label_MouseDown);
Label.MouseUp += new System.Windows.Forms.MouseEventHandler(Label_MouseUp);
Label.MouseMove += new System.Windows.Forms.MouseEventHandler(Label_MouseMove); 
```

就这样。感谢 HuorSwords。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T10:08:31.923

您的`Label_MouseDown`，`Label_MouseUp`并且`Label_MouseMove`没有执行`System.EventHandler` [合同](http://msdn.microsoft.com/en-us/library/system.eventhandler%28v=vs.80%29.aspx)，必须是：

```
void Label_MouseDown(object sender, EventArgs e)
void Label_MouseMove(object sender, EventArgs e)
void Label_MouseUp(object sender, EventArgs e) 
```

此外，您必须将`EventArgs`参数转换`MouseEventArgs`为才能在您的方法中使用它（实际上您只是在您的`Label_MouseMove`方法中使用它）。

# tinymce - tinyMCE - 块元素之间的点

> ID：16057057
> 
> 赞同：1
> 
> 时间：2013-04-17T09:57:28.463
> 
> 标签：tinymce

我在显示块元素模式下使用 tinyMCE。

我编写了自定义插件，可在实际光标位置插入准备好的 html 块（布局部分）。

指向两个 div 之间的空格是有问题的。

如果我有这样的标记：

```
<div id="first"></div><div id="second"></div> 
```

当我在这些 div 之间单击时，我会降落在第一个或第二个 div 中，永远不会介于两者之间。

因此，我尝试编辑 html 源代码并生成带有 br 的标记：

```
<div id="first"></div><br/><div id="second"></div> 
```

现在我可以指向这些 div，但**它不适用于我通过 tinyMCE 动态添加的元素**。如果我添加部分例如。

```
<div></div><br/> 
```

在该 div 之后单击是不可能的。但是当我手动编辑源代码时它是可能的。诡异的。你对这个问题有什么解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:21:13.287

Tinymce 会注意用户无法在 div 或 p 标签之间单击。这样做的原因很简单：如果用户可以在两者之间单击并输入一个字母 - 那么将创建另一个包含该字母的 div 或 p。这不是 rtes 设计的工作方式。如果你想在两个 div 之间插入一些东西，你需要使用一个特殊的按钮或自己的插件来处理这个问题，但是将光标放在你不会手动放置的地方是行不通的。

# php - Wordpress - 如果与“管理员”不同，则按作者排序

> ID：16057059
> 
> 赞同：2
> 
> 时间：2013-04-17T09:57:30.073
> 
> 标签：php, wordpress

在“category.php”文件中，我需要以这种奇怪的方式对我的帖子进行排序：

*   首先是作者与“admin”不同的所有帖子（按标题字母顺序）
*   比“admin”的所有帖子（以相同的字母顺序）

这是我用来进行查询的标准代码：

```
<?php global 
    $wp_query; 
    query_posts( 
        array_merge( 
            array('orderby' => 'title', 'order' => 'ASC'), 
            $wp_query->query
        )
    );
 ?> 
```

关于如何在不嵌套两个查询的情况下完成它的任何想法？

提前致谢！

* * *

**编辑：**以下是一些尝试过的代码，正如 Sepster 在他的答案的先前版本中所建议的那样。但目前这段代码开始显示来自“admin”（而不是其他）的所有帖子，直到作者不同于“admin”的帖子出现。此时它会破坏结果并跳转到下一页结果。

```
<?php 
    global $wp_query; 
    query_posts( 
      array_merge( 
         array('orderby' => 'title', 'order' => 'ASC'), 
         $wp_query->query 
      )
    );

    $adminPosts = false;
    for ($i=1; $i<=2; $i++) { 
      while ( $wp_query->have_posts() ) {
        $wp_query->the_post();
        $author = get_the_author();
        if ($author == 'admin' && $adminPosts == false) break;
        if ($author != 'admin' && $adminPosts == true) break;

        // ALL MY STUFF

      } // end while
      rewind_posts();
      $adminPosts=true;
   } // end FOR 
 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:05:19.193

## 更新：

我终于为此想出了一个可行的解决方案，但可以公平地说，这确实是学术界的练习；是的，它可以在不执行第二个循环的情况下执行，但实际上，它非常复杂。

总而言之，解决方案是

1.  **开发一个自定义 SQL 语句，该语句将按所需顺序返回行。**

    这是因为在 SQL 中，按您需要的顺序获取结果的唯一方法是对两个子集进行 UNION。据我所知，没有办法使用“正常”的 WP 查询操作来做到这一点。

2.  **执行此查询，并循环其结果而不是标准的“循环”。**

    这是因为我们返回的是一个记录集，而不是一个`WP_Query`对象。

3.  **将“博客页面最多显示 X 个帖子”设置为 1。**

    （在 /wp-admin/options-reading.php 上）

    一个常见的抱怨是使用自定义查询时分页中断（顺便说一下，`query_posts()`您使用的方法容易受到此问题的影响）。

    有很多关于如何正确执行此操作的教程，例如：

    *   [https://codex.wordpress.org/Making_Custom_Queries_using_Offset_and_Pagination](https://codex.wordpress.org/Making_Custom_Queries_using_Offset_and_Pagination)
    *   [https://codex.wordpress.org/Pagination#Troubleshooting_Broken_Pagination](https://codex.wordpress.org/Pagination#Troubleshooting_Broken_Pagination)

    其中第一个建议实施“偏移和手动分页”。

    我发现与自定义 SQL 语句相结合的最接近实现的是[https://wordpress.stackexchange.com/a/28717](https://wordpress.stackexchange.com/a/28717)。我从这个答案中借*了很多*东西（所以我建议你过去给它一个赞成票！）。

    但是，这种技术（以及其他更“标准”的自定义查询方法）受到已知行为的影响，即 WP 在最终页面上生成 404（如果我理解正确，因为 WP 仍在使用自己的查询和关联的 max-page=posts -per-page/posts 计算以在 URL 中的页码和交付的内容之间进行映射）。
    有关[此](http://wordpress.org/support/topic/explanation-and-workaround-for-error-404-on-category-pagination?replies=14)问题的详细信息和建议的解决方案（不幸的是不会为我们的自定义 SQL 方法工作）。

    此问题的一个已知“解决方法”是将每页帖子的数量减少到 1，例如[http://wordpress.org/support/topic/custom-post-type-pagination-404-on -最后一页](http://wordpress.org/support/topic/custom-post-type-pagination-404-on-last-page)

* * *

因此，假设您对每页 1 个帖子的全局设置感到满意（请记住，您需要在自定义查询中手动覆盖此设置），代码如下：

函数.php：

```
...
function get_users_posts_last($userDisplayName = 'Admin', $categoryName = '') {
    global $wpdb, $paged, $max_num_pages;
    $paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
    $post_per_page = 5;
    $offset = ($paged - 1)*$post_per_page;

    $sql = "
        SELECT SQL_CALC_FOUND_ROWS q.* FROM
        (
            (
                SELECT
                    p.* 
                FROM 
                    {$wpdb->posts} p
                    INNER JOIN {$wpdb->users} u ON p.post_author = u.ID
                    LEFT JOIN {$wpdb->term_relationships} tr ON p.ID = tr.object_id
                    LEFT JOIN {$wpdb->term_taxonomy} tt ON tr.term_taxonomy_id = tt.term_taxonomy_id
                    LEFT JOIN {$wpdb->terms} t ON tt.term_id = t.term_id

                WHERE 
                    tt.taxonomy = 'category'
                    AND p.post_status = 'publish'
                    AND p.post_type = 'post'
                    AND u.display_name != '{$userDisplayName}'
                    " . ( $categoryName != '' ? "AND t.name = '{$categoryName}'" : "" ) . "
                ORDER BY 
                    p.post_title ASC
            )   
            UNION
            (
                SELECT
                    p.* 
                FROM 
                    {$wpdb->posts} p
                    INNER JOIN {$wpdb->users} u ON p.post_author = u.ID
                    LEFT JOIN {$wpdb->term_relationships} tr ON p.ID = tr.object_id
                    LEFT JOIN {$wpdb->term_taxonomy} tt ON tr.term_taxonomy_id = tt.term_taxonomy_id
                    LEFT JOIN {$wpdb->terms} t ON tt.term_id = t.term_id

                WHERE 
                    tt.taxonomy = 'category'
                    AND p.post_status = 'publish'
                    AND p.post_type = 'post'
                    AND u.display_name = '{$userDisplayName}'
                    " . ( $categoryName != '' ? "AND t.name = '{$categoryName}'" : "" ) . "
                ORDER BY 
                    p.post_title ASC
            )
        ) q
        LIMIT {$offset}, {$post_per_page};  
    ";  

    $sql_result = $wpdb->get_results( $sql, OBJECT);
    $sql_posts_total = $wpdb->get_var( "SELECT FOUND_ROWS();" );
    $max_num_pages = ceil($sql_posts_total / $post_per_page);
    return $sql_result;
}
... 
```

类别.php：

```
...
$postList = get_users_posts_last('admin'); // Note you can also pass a category name if necessary
if($postList) {
    global $post;

    foreach( $postList as $key=>$post ) {
        setup_postdata($post);

        // Render the post here
        ?>
            <header class='entry-header'><h1 class='entry-title'><?php the_title(); ?></h1></header>
            <div class='entry-content'><?php the_content(); ?></div>
        <?php
    }
    // Render pagination here
    ?>
        <div class="navigation">
            <div class="previous panel"><?php previous_posts_link('&laquo; Previous page',$max_num_pages) ?></div>
            <div class="next panel"><?php next_posts_link('Next page &raquo;',$max_num_pages) ?></div>
        </div>
    <?php
}
... 
```

**或者，只需设置两个单独的查询；-)**

# c# - c#中如何将参数传递给另一个进程

> ID：16057063
> 
> 赞同：7
> 
> 时间：2013-04-17T09:57:46.213
> 
> 标签：c#, parameters, process

我刚刚创建了一个使用以下代码启动进程的应用程序

```
string [] args = {"a", "b"};
             Process.Start ("C: \ \ demo.exe" String.Join ("", args)); 
```

我希望能够将此应用程序中的参数传递给我启动的进程。

我必须在我启动的流程的项目中输入参数？我试着把它们放进去

```
static void Main (string [] args) {... 
```

但它们不能以其他形式提供。谢谢您的帮助

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-17T10:03:03.740

```
Process p= new Process();
p.StartInfo.FileName = "demo.exe";
p.StartInfo.Arguments = "a b";
p.Start(); 
```

或者

```
Process.Start("demo.exe", "a b"); 
```

在演示.exe

```
static void Main (string [] args)
{
  Console.WriteLine(args[0]);
  Console.WriteLine(args[1]);
} 
```

你问如何保存这些参数。您可以创建具有静态属性的新类并将这些参数保存在那里。

```
class ParamHolder
{
  public static string[] Params { get; set;}
} 
```

主要是

```
static void Main (string [] args)
{
  ParamHolder.Params = args;
} 
```

在程序使用的任何地方获取参数：

```
Console.WriteLine(ConsoleParamHolder.Params[0]);
Console.WriteLine(ConsoleParamHolder.Params[1]); 
```

等等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T10:14:25.790

主要应用代码：

```
var process = new Process();
process.StartInfo.FileName = "demo.exe" // Path to your demo application.
process.StartInfo.Arguments = "a b c"   // Your arguments
process.Start(); 
```

在您的演示应用程序中（我假设这是控制台应用程序）

```
static void Main (string [] args)
{
    var agrumentOne = args[0];
    var agrumentTwo = args[1];
    var agrumentThree = args[3];
} 
```

这里 argumentOne、argumentTwo、argumentThree 将包含“a”、“b”和“c”。

# c++ - c ++，从数据库结果创建结构

> ID：16057064
> 
> 赞同：0
> 
> 时间：2013-04-17T09:57:54.177
> 
> 标签：c++, mysql, windows

我正在尝试从数据库结果创建结构。有什么简单的方法可以做到这一点？我想得到这样的东西：（这是一个不起作用的小例子。我放这个是为了让一切都清楚）

```
struct ROWSTRUCTURE
{
    int ID;
    std::string test;
};

enum ROWSTRUCTURE_FIELD_ENUM_end
{
    ROWSTRUCTURE_FIELD_ENUM_ID,
    ROWSTRUCTURE_FIELD_ENUM_test,
    ROWSTRUCTURE_FIELD_ENUM_end
};

list<ROWSTRUCTURE> getData()
{
    MYSQL_ROW row; 
    MYSQL_RES *res_set;

    mysql_query(connect,"SELECT * FROM `example`;");
    res_set = mysql_store_result(connect);

    while ((row = mysql_fetch_row(res_set)) != NULL)
    {
        ROWSTRUCTURE StructToAdd;

        for( int i = 0; i < ROWSTRUCTURE_FIELD_ENUM_end; i++)
            StructToAdd[i] = row[i]; //ERROR
    }

    delete res_set;
} 
```

我怎样才能以正确的方式做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:09:10.493

您正在寻找的是一种称为“反射”的东西，其中变量的名称、成员字段等可用于引用实际的变量/字段或其他内容。C++ 不支持这一点。您将需要以其他方式解决这个问题......一个合理的解决方案是：

```
StructToAdd.ID = strtol(row[ROWSTRUCTURE_FIELD_ENUM_ID]);
StructToAdd.test = row[ROWSTRUCTURE_FIELD_ENUM_test]; 
```

或者，正如评论所暗示的：

```
struct ROWSTRUCTURE
{
    int ID;
    std::string test;
    ROWSTRUCTURE operator=(const MYSQL_ROW &row)
    {
        ID = strtol(row[ROWSTRUCTURE_FIELD_ENUM_ID]);
        test = row[ROWSTRUCTURE_FIELD_ENUM_test];
        return *this;
    }
}; 
```

然后在“main”函数中：

```
StructToAdd = row; 
```

# c# - C# 后台工作者：调用 Close() 时出现异常

> ID：16057066
> 
> 赞同：0
> 
> 时间：2013-04-17T09:57:57.933
> 
> 标签：c#, backgroundworker, exit

我的应用程序中有两个后台工作人员，他们填写表格并发送日志消息。他们使用 ReportProgress 方法的“userState”传输这些数据。
它们通过以下方式连接到主线程：

```
msg_worker.DoWork              += message_worker_task;
msg_worker.ProgressChanged     += msg_worker_ProgressChanged;
msg_worker.RunWorkerCompleted  += worker_completed;

data_worker.DoWork             += data_worker_task;
data_worker.ProgressChanged    += data_worker_ProgressChanged;
data_worker.RunWorkerCompleted += worker_completed; 
```

它们使用在 doWork 任务结束时设置的两个 EventWaitHandle 项进行同步：

```
private void message_worker_task(object sender, DoWorkEventArgs e)
    {
        try
        {
            while( .. ){ 
               // do work
               bw.ReportProgress( 10, new String("my message to append"));
            }
        }
        finally
        {
            e.Result = 0;
            msg_done.Set(); // EventWaitHandle
        }
    } 
```

进度更改的委托在用户可见的组件中插入数据/日志。

现在，问题是当我单击 UI 中的退出按钮时，我会等待这两个线程，如下所示：

```
private void wait_threads()
    {
        int timeout = 30000;
        Cursor.Current = Cursors.WaitCursor;
        if (data_worker.IsBusy && !data_worker.CancellationPending)
        {
            data_worker.CancelAsync();
            data_done.WaitOne(timeout);
        }
        if (msg_worker.IsBusy && !msg_worker.CancellationPending)
        {
            msg_worker.CancelAsync();
            msg_done.WaitOne(timeout);
        }
        Cursor.Current = Cursors.Default;
    } 
```

这似乎有效（我在代码的其他地方使用它），但在这种“退出”的情况下，我提出了一个异常，说我试图将数据插入到我拥有的日志组件中。该组件由 RunWorkerCompleted 委托操作。

单击退出时执行的代码是这样的：

```
 private void quit_Click(object sender, EventArgs e)
    {
        wait_threads(); // blocks until threads are finished
        Close();
    } 
```

我想我发现在等待线程完成时，它们会发送最后一个事件：RunWorkerCompleted。问题是我正在 Close() 我的表单的过程中，这意味着表单处于不正确的状态。更重要的是，如果我检查函数`e.Cancelled`中的标志`worker_completed`，我认为它是错误的......

我可以做些什么来确保在我的函数执行*之前处理 RunWorkerCompleted？*`Close()`（或者更确切地说，根本没有处理，因为我们要退出）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:24:55.917

我认为您可以在调用 ReportProgress 之前检查属性 Cancellation Pending。

```
while( .. ){ 
    if (!bw.CancellationPending) 
              bw.ReportProgress( 10, new String("my message to append"));
} 
```

# ios - iOS XMPP 客户端在一段时间后断开连接

> ID：16057068
> 
> 赞同：1
> 
> 时间：2013-04-17T09:57:59.990
> 
> 标签：ios, chat, openfire, xmppframework

我正在使用带有 Robbie Hanson 框架的开放式服务器和 iOS xmpp 客户端。我的客户在后台运行良好，因为我设置了 voip 标志和所有内容。但在 15-20 左右几个小时后，它会自动断开连接。我不确定它为什么会发生以及为什么需要这么长时间。我没有发送任何消息或接收任何消息。ping 间隔为 360 秒，我的客户端以错误响应，这是保持连接到服务器的可接受的响应形式。有人遇到同样的问题吗？

Openfire 服务器：3.8.1 iOS 版本：6.1.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:51:43.010

您是否尝试使用 Openfire 服务器中服务器设置> 客户端连接中可用的设置“不要断开空闲的客户端”？

# c# - 订购 System.Collections.IList

> ID：16057070
> 
> 赞同：0
> 
> 时间：2013-04-17T09:58:12.010
> 
> 标签：c#, object, dynamic, ilist

是否可以订购 System.Collection.IList 而无需将其转换为已知类型？

我收到一个列表`object`并将其转换为 IList 使用

```
var listType = typeof(List<>);
var cListType = listType.MakeGenericType(source.GetType());
var p = (IList)Activator.CreateInstance(cListType);
var s = (IList)source; 
```

我想根据 ID 订购它，它可能可用也可能不可用。

我想产生的是这样的：

```
if (s.First().GetType().GetProperties().where(m=>m.Name.Contians("Id")).FirstOrDefault != null)
{
     s=s.OrderBy(m=>m.Id);
} 
```

但是，s 没有扩展方法“Order”，也没有扩展方法“First”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:06:30.663

尝试下一个代码。如果您的类型没有`id`属性，它将不会排序`source`

```
void Main()
{
    var source = typeof(Student);

    var listType = typeof(List<>);
    var cListType = listType.MakeGenericType(source);
    var list = (IList)Activator.CreateInstance(cListType);

    var idProperty = source.GetProperty("id");

    //add data for demo
    list.Add(new Student{id = 666});
    list.Add(new Student{id = 1});
    list.Add(new Student{id = 1000});

    //sort if id is found
    if(idProperty != null)
    {
        list = list.Cast<object>()
                   .OrderBy(item => idProperty.GetValue(item))
                   .ToList();
    }

    //printing to show that list is sorted
    list.Cast<Student>()
        .ToList()
        .ForEach(s => Console.WriteLine(s.id));
}

class Student
{
    public int id { get; set; }
} 
```

印刷：

```
1
666
1000 
```

# java - Java 周期值缓存架构

> ID：16057074
> 
> 赞同：0
> 
> 时间：2013-04-17T09:58:21.370
> 
> 标签：java, algorithm, caching, architecture

任务是实现周期性值的缓存。更具体地说 - 这些是与银行帐户相关的一些记录。每条记录都有一个日期和一天内的某个位置。因此，每条记录都可以通过这些属性进行比较。缓存必须包含与查询期间相关的记录列表。当执行更长时期的查询时，也可以合并缓存的值。

让我们考虑几个例子。某些特定帐户的历史记录有 10 条记录（日期格式为 MM/dd/yyyy：

```
01/01/2012 
02/01/2012 
03/01/2012 
04/01/2012 
05/01/2012 
06/01/2012 
07/01/2012 
08/01/2012 
09/01/2012 
10/01/2012 
```

*示例 1*

第一个查询是针对 02/15/2012 - 03/15/2012 期间的。

查询结果将是一条记录：

```
03/01/2012 
```

缓存应包含记录：键“02/15/2012 - 03/15/2012”，值 [“03/01/2012”]

该时期或子时期（即 02/16/2012-03/15/2012）的所有查询都应从缓存中返回“03/01/2012”。

执行的第二个查询是 01/15/2012 - 02/16/2012 期间。

查询结果将是两条记录：

```
02/01/2012
03/01/2012 
```

有以下几点需要说明：

1) 对底层数据存储的查询应仅在 01/15/2012 - 02/14/2012 期间执行。这是因为缓存已经包含 2012 年 2 月 15 日的所有条目。

2) 单个缓存条目的边界将随其存储的记录数一起更新。

因此，缓存应包含一条记录：键“01/15/2012 - 03/15/2012”，值 [“02/01/2012”，“03/01/2012”]。

然后对子周期的任何查询都应该通过键找到缓存条目，然后从缓存中选择所需的记录。

*示例 2*

当前缓存状态为：

```
Entry 1: "01/15/2012 - 03/15/2012" => ["02/01/2012", "03/01/2012"]
Entry 2: "04/15/2012 - 05/15/2012" => ["05/01/2012"]
Entry 3: "07/02/2012 - 09/02/2012" => ["08/01/2012", "09/01/2012"] 
```

查询在 01/01/2012 - 10/01/2012 期间执行。结果包含所有历史记录：

```
01/01/2012 
02/01/2012 
03/01/2012 
04/01/2012 
05/01/2012 
06/01/2012 
07/01/2012 
08/01/2012 
09/01/2012 
10/01/2012 
```

缓存应包含单个条目：键“01/01/2012”、值 [“01/01/2012”、“02/01/2012”、“03/01/2012”、“04/01/2012”、 “05/01/2012”、“06/01/2012”、“07/01/2012”、“08/01/2012”、“09/01/2012”、“10/01/2012”]。

* * *

我正在挑战这个任务一个星期，找不到任何漂亮的简单算法来处理这样的缓存。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:56:12.520

我认为[间隔树](http://en.wikipedia.org/wiki/Interval_tree)可能适合您的需要 -[这是一个 Java 实现](https://github.com/KevinStern/software-and-algorithms/blob/master/src/main/java/blogspot/software_and_algorithms/stern_library/data_structure/DynamicIntervalTree.java)。区间树存储区间，可以通过区间查询（比如可以存储[1, 5], [2, 7], [6, 10]，在[3, 5]上查询，返回[1, 5] ], [2, 7] 即与查询重叠的所有区间）。您存储的是点而不是间隔，但只需将您的点存储为足够小的非重叠间隔，您就可以开始了。

因为这是一个缓存，所以您可能希望将您的键和值存储在[SoftReferences](http://docs.oracle.com/javase/6/docs/api/java/lang/ref/SoftReference.html)中——这将允许垃圾收集器在您遇到`OutOfMemoryError`.

# html - 图片和h1标签显示在同一行CSS

> ID：16057076
> 
> 赞同：0
> 
> 时间：2013-04-17T09:58:29.230
> 
> 标签：html, css, alignment

在同一行显示两个图像和一个 h1 标签时出现问题。我想将一张图像向左对齐，最后两个元素在右侧。关于如何做到这一点的任何提示？

**HTML**

```
<div class="header">
<img src="meny_knapp2.png" class="meny" alt="meny link">
<img class="hioa" src="logo_hvit.png" alt="HiOA logo">
<h1 class="lsb"> Læringssenteret </h1>            
</div> 
```

**CSS**

```
.header {
height:120px;
width:100%;
background-color:#ff7f1f;
color:white;
font-size:20px;
display: table;
vertical-align:middle;
}

.meny {
height: 25px;
margin-left:0.5em;
line-height:120px;
}

.lsb {
font-size:24px;
letter-spacing:0.09em;
font-weight:lighter;
display:inline;
}

.hioa {
height: 60px;
float:right;
margin-right:1em;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:25:27.450

```
.header * {
    float: right; 
```

}

```
.header img:first-child {
     float: left; 
```

}

```
.hioa {
    height: 60px;
    margin-right:1em; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:34:58.867

请在课堂上调整css

```
 <div class="header">
    <div style="float:left;width:30%">
        <img src="meny_knapp2.png" class="meny" alt="meny link" width="50"/>
    </div>
    <div style="float:right;width:70%">
         <img class="hioa" src="logo_hvit.png" alt="HiOA logo" style="float:left;width:100px"/>
         <h1 class="lsb" style="float:left;width:50%"> Læringssenteret </h1>            
    </div>
    </div> 
```

# javascript - 包含 html 片段作为模块

> ID：16057081
> 
> 赞同：1
> 
> 时间：2013-04-17T09:58:33.777
> 
> 标签：javascript, html, css, module, code-organization

我正在尝试使用服务器端包含系统以模块化方式组织我的网站。这个想法是每个模块都将拥有自己的 css 和自己的 javascript，并且只会在页面中包含后才加载 - 因此任何没有该模块的页面也不会加载该模块 css/js。

我已经这样做了：

```
header.html
-----------

<!-- header start -->
<link rel="stylesheet" href="css/header.css">
<header class="module-header">
    <div class="links">
       links...
    </div>
</header>
<script src="js/header.js"></script>
<!-- header end -->

footer.html
-----------

<!-- footer start -->
<link rel="stylesheet" href="css/footer.css">
<header class="module-footer">
    <div class="links">
       links...
    </div>
</header>
<script src="js/footer.js"></script>
<!-- footer end --> 
```

然后在 index.html 上：

```
<!DOCTYPE html>
    <head>
        <title>Modular page</title>
    </head>

    <body>
        <!--#include virtual="html/header.html" -->
        <!--#include virtual="html/footer.html" -->
    </body>
</html> 
```

这很好用，并且由于脚本是在每个模块之后加载的，因此可以保证在运行脚本之前内容存在。Css 是在之前加载的，并确保它有一个很好的布局。

但是 - 我的解决方案遇到了一些问题：

1.  如果我要多次包含一个模块，例如 product.html，它将被重复 20 次 - 我也会包含 20 次 css 和 js 文件。不好。
2.  通常我已经看到 css 包含在 head 标签中，而 js 包含在 body 的末尾。在文档编制过程中让它们全部出现会导致任何问题吗？

这些包含可以与任何包含、php、asp 或 jsp 交换......这是使用 apaches SSI。

整个想法是否朝着错误的方向发展？我想这用于开发设置，但是有某种加载页面的智能 nodejs rhino 脚本 - 查找加载的脚本和 css，连接并缩小并添加为单个包含以用于生产。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:17:19.310

为了克服多次包含 js 或 css 的问题，您应该将该文件包含在您要包含的文件的顶部，而不是包含在该包含的文件中。意味着您的 product.css/js 应该从中删除，并且应该放置在您的 index.html 或 header .html 中一次

多次包含相同的 js 可能会停止您的 javascript，因此请确保它们不会相互冲突

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-09T02:51:28.580

使用 javascript 模块系统。Javascript AMD 模块 requirejs 以增量方式加载 javascript 是一个非常好的选择。***[requirejs.org](http://requirejs.org/docs/api.html)***是一个很好的起点。

供您使用

```
//inside header.html
require(['header.js'], function(){
   //call this require() multiple times it will load the javascript only once.

   //user header.js ... once this line is require() line is executed the
   //header.js will be loaded forever

}); 
```

页脚

```
//inside footer.html
require(['footer.js'], function(){
   //call this require() multiple times it will load the javascript only once.

   //user header.js ... once this line is require() line is executed the
   //header.js will be loaded forever

}); 
```

现在出现了以模块化方式加载 CSS 的问题。Requirejs CSS 插件也可用。

现在，一旦您开始使用这种系统，脚本加载就会使用 javascript 异步进行。所以脚本在屏幕上出现的时间有点晚。甚至 css 也来得有点晚。因此，如果您正在编写像这样的全局事件处理程序`window.onload= func(){}`，这些将失败，因为您的大多数 javascript 还没有加载。如果您在动态加载的 CSS 之上进行样式设置，则也需要在 CSS 加载完成后完成。在 requirejs 中使用 !DomReader 是一个不错的选择。总有一天我会写一篇博客来深入讨论这些。

缩小的聪明之处也存在于 requirejs 中。[需要js优化器](http://requirejs.org/docs/optimization.html)

# ios - 如果应用程序包不包含推送通知中收到的“loc-key”的密钥怎么办？

> ID：16057082
> 
> 赞同：7
> 
> 时间：2013-04-17T09:58:33.950
> 
> 标签：ios, apple-push-notifications

根据[苹果文档](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html)，通知负载可以携带“loc-key”键，用于标识应用程序包中的本地化字符串键。如果应用程序包中没有这样的键会发生什么（例如，当服务器上有更新并添加了新的通知类型时）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T10:01:50.003

您很可能会得到`NSBundle`'`localizedStringForKey:value:table:`方法的默认行为，即在找不到值时返回键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-06T13:35:20.460

您可以在 loc-key 中发送消息模板：“%1$@ won the game”在 loc-args 中带有“John”将变为“John won the game”，尽管您的应用没有“%1$@ won游戏”在 Localizable.strings 中。

# jquery - 用于扩展/收缩内容区域的 jQuery .text() 函数

> ID：16057083
> 
> 赞同：0
> 
> 时间：2013-04-17T09:58:34.463
> 
> 标签：jquery, toggle

由于我缺乏 jQuery 知识，我有点卡住了。将不胜感激任何帮助。我有以下脚本来激活扩展内容区域：

```
$(document).ready(function(){
    $("a.moreExpand").click(function(){
       var myelement = $(this).attr("rel");
        $(myelement).slideToggle(function() {
            $("a.moreExpand").text(
              $(this).is(':visible') ? "LESS -" : "MORE +"
            );
          });
    });
}); 
```

我的 HTML（在页面的不同位置使用）：

```
<div class="moreExpandWrapp">
    <a href="javascript:void(0)" rel="#aboutExpand" class="moreExpand">MORE <span class="plus">+</span></a>
    <div class="moreExpandContent" id="aboutExpand">
        Lorem ipsum dolor sit amet ...
    </div>
</div> 
```

到目前为止一切顺利，但是一旦我扩展/收缩内容区域，网站上的所有文本（更多/更少文本）都会更改。我试图像这样定位脚本：

```
$(document).ready(function(){
    $("a.moreExpand").click(function(){
       var myelement = $(this).attr("rel");
        $(myelement).slideToggle(function() {
            $("a.moreExpand", this).text(
              $(this).is(':visible') ? "LESS -" : "MORE +"
            );
          });
    });
}); 
```

所以它是： `$("a.moreExpand", this).text(` 但这当然无助于替换扩展的内容文本而不是链接文本。据我了解，这是因为“$this”值基本上是整个切换区域而不是按钮。

我想定位链接副本而不是扩展 div，但我不确定在这种情况下如何使用“$this”（改为定位函数的第一部分）。

非常感谢您对此的意见。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:02:19.823

实际上， JavaScript 中的*this*指的是您当前的作用域。

在 slideToggle 回调中，您的范围是指“滑动”元素，所以*this* === myElement. 您应该使用另一个 var 保留初始链接。

[http://jsfiddle.net/t4CQt/](http://jsfiddle.net/t4CQt/)

```
$("a.moreExpand").click(function(){
    var myLink = this,
        myelement = $(this).attr("rel");
    $(myelement).slideToggle('normal', function() {
        $(myLink).text(
            $(this).is(':visible') ? "MORE +" : "LESS -"
        );
    });
}); 
```

# javascript - 根据按下的按钮选择不同的样式表

> ID：16057084
> 
> 赞同：1
> 
> 时间：2013-04-17T09:58:35.763
> 
> 标签：javascript, css

我希望用户能够打印带有或不带有 aa div 中包含的某些信息的文档。我有 2 个样式表，其中一个指定了打印时要隐藏的 div 类的样式： .hide { display: none; }

以下是根据传递的参数选择样式表的脚本：

```
function print(o) {
  var head = document.getElementsByTagName('head')[0].innerHTML;
  if (o == 'withinfo') {
    head += '<link rel="stylesheet" href="printwithinfo.css" media="print" />';
 }
 if (o == 'withoutinfo') {
    head += '<link rel="stylesheet" href="printwithoutinfo.css" media="print" />';
 }
 document.getElementsByTagName('head')[0].innerHTML = head;
 } 
```

然后在我的html中，我有以下内容：

```
 <div class="hide">My Info</div> 
```

我的两个按钮如下：

```
 <input type="button" value="Print with info" onclick="print('withinfo');">

   <input type="button" value="Print without info" onclick="print('withoutinfo');"> 
```

不幸的是，当我单击任何一个按钮时，什么都没有发生。你能告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T10:29:45.457

首先，我强烈建议您更改 func 名称，因为 print() 在 Javascript 中是保留的。

然后对我来说你的代码似乎工作正常，试试这个：

```
<!doctype html>
<html>
<head></head>

<body>
    <script>
        function Myprint(o) {
            var head = document.getElementsByTagName('head')[0].innerHTML;
            if (o == 'withinfo') {
              head += '<link rel="stylesheet" href="b.css" media="print" />';
           }
           if (o == 'withoutinfo') {
              head += '<link rel="stylesheet" href="a.css" media="print" />';
           }
           document.getElementsByTagName('head')[0].innerHTML = head;
           window.print();
}
    </script>
       <div id="hide">My Info</div>  
       Always here
    <input type="button" value="Print with info" onclick="Myprint('withinfo');" />
    <input type="button" value="Print without info" onclick="Myprint('withoutinfo');" />
</body>
</html> 
```

使用 a.css：

```
div{display:none;} 
```

和 b.css：

```
div{display:block;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T10:28:32.927

它似乎工作得很好。

您必须知道，当您单击任一按钮时，唯一发生的事情就是样式表会附加到头部。由于样式表仅适用于 media="print" 它只会在用户或您激活打印时应用。

如果你想激活它，你可以这样做。

```
<input type="button" value="Print with info" onclick="print('withinfo');window.print();"></input>
<input type="button" value="Print without info" onclick="print('withoutinfo');window.print();"></input> 
```

如果您只是想测试正在应用的样式表，您可以删除链接标签的 (media="print") 部分。这将样式表限制为仅在“打印”中应用。

注意：您的打印功能应该更改名称，因为它会覆盖 window.print。

**更好的选择**

只需使用从一开始就加载且永不更改的 1 个样式表“print.css”。

然后将打印更改为此

```
function print(o) {
    document.getElementById("body").className = o;
} 
```

并且在您的样式表中有以下内容

```
body.withinfo #hide {
    display: block;
}

body.withoutinfo #hide {
    display: none;
} 
```

这样您就不必卸载以前的样式表，唯一改变的是 body 元素上的类。

# javascript - javascript windows phone 7.1

> ID：16057092
> 
> 赞同：1
> 
> 时间：2013-04-17T09:58:45.030
> 
> 标签：javascript, windows-phone-7

i try to execute a javascript in Windows phone

```
IsolatedStorageFile file = IsolatedStorageFile.GetUserStoreForApplication();

            IsolatedStorageFileStream location = new IsolatedStorageFileStream(path,
                System.IO.FileMode.Open, file);
            HtmlDocument doc = new HtmlDocument();
            doc.Load(location);

            string newContent = "<script type='text/javascript'>"
                         + "function getSelectionHtml()"
                     + "{"
              + "var html = '';"
       +"if (typeof window.getSelection != 'undefined')" 
            +"{"
        +"var sel = window.getSelection();"
        +"if (sel.rangeCount)" 
        +"{"
           +" var container = document.createElement('div');"
            +"for (var i = 0, len = sel.rangeCount; i < len; ++i)" 
            +"{"
                +"container.appendChild(sel.getRangeAt(i).cloneContents());"
            +"}"
            +"html = container.innerHTML;"        
        +"}"
        +"}"
             + "elseif (typeof document.selection != 'undefined')"
                + "{"
               + "if (document.selection.type == 'Text')"
                + "{"
                + "html = document.selection.createRange().htmlText;"
               + "}"
                +"}"
               +"return Html;"
                + "}"
                  + "</script>";
                         HtmlNode newNode = HtmlNode.CreateNode(newContent);

            // Get body node
            HtmlNode body = doc.DocumentNode.SelectSingleNode("//head");

            // Add new node as first child of body
            body.PrependChild(newNode);
            savefile(doc);
            string path4 = "Cyrlej/Epub/The Motor/42461/@public@vhost@g@gutenberg@html@files@42461@42461-h@42461-h-0.htmcopie.html";
            MyWebBrowser.Navigate(new Uri(path4, UriKind.Relative));

public static void savefile(HtmlDocument file)
        {

       using (IsolatedStorageFile isoStore = IsolatedStorageFile.GetUserStoreForApplication())
        {
            using (IsolatedStorageFileStream isoStream =
                new IsolatedStorageFileStream("Cyrlej/Epub/The Motor/42461/@public@vhost@g@gutenberg@html@files@42461@42461-h@42461-h-0.htmcopie.html", FileMode.Create, isoStore))
            {

                file.Save(isoStream);
            }
        } 
```

i successfully add the script to my html and now when i try to invoke the script by

`MyWebBrowser.InvokeScript("getSelectionHtml");`

alwayes i get error "Error: 80020006" any one have an idea thank you in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:58:22.107

也许您正在尝试在页面未加载时调用脚本。尝试：

```
MyWebBrowser.LoadCompleted += new System.Windows.Navigation.LoadCompletedEventHandler(Browser_LoadCompleted);

void Browser_LoadCompleted(object sender, System.Windows.Navigation.NavigationEventArgs e)
{
   MyWebBrowser.InvokeScript("getSelectionHtml");            
} 
```

# android - How to hide bottom system bar in android tablet

> ID：16057096
> 
> 赞同：5
> 
> 时间：2013-04-17T09:58:55.390
> 
> 标签：android, performance, android-layout, android-widget, android-permissions

I am developing an application for tablet only, where the requirement is to run the app on the full screen of the tablet.

For this I have used following code in my main activity:

```
getWindow().requestFeature(Window.FEATURE_NO_TITLE);
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

This code snippet only removes the title bar and action bar. But in tablets, there is a bottom system bar (having home and back button). I also want to remove or hide this system bar too.

I have searched but there is only following solution:

1.  There is no API to remove or hide the system bar.
2.  You can use some android app to hide system bar. (for example: surelock, hidebar, etc)

My question is :

1.  **Is it really not possible in android?**
2.  **Above available app (i.e surelock, hide bar, etc) also hiding bar. It means they are using something to do so. Can be use this something in our app so the user will not require to download these app seperatly.**

Please guide me.

I know this is not a good idea. But My app is only for tablet having Android 4.0 or greater and that **tablet will run only this single app so we do not need to go back and use home button.** That's why my requirement is to use the app in full screen.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-17T10:11:15.507

如果您具有 root 访问权限，则可以使用此代码，否则不允许

```
try{
    //REQUIRES ROOT
    Build.VERSION_CODES vc = new Build.VERSION_CODES();
    Build.VERSION vr = new Build.VERSION();
    String ProcID = "79"; //HONEYCOMB AND OLDER

    //v.RELEASE  //4.0.3
    if(vr.SDK_INT >= vc.ICE_CREAM_SANDWICH){
        ProcID = "42"; //ICS AND NEWER
    }

    //REQUIRES ROOT
    Process proc = Runtime.getRuntime().exec(new String[]{"su","-c","service call activity "+ ProcID +" s16 com.android.systemui"}); //WAS 79
    proc.waitFor();

}catch(Exception ex){
    Toast.makeText(getApplicationContext(), ex.getMessage(), Toast.LENGTH_LONG).show();
} 
```

[看到这个](https://stackoverflow.com/questions/13454528/hide-system-bar-in-jelly-bean-tablet-rooted)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-05-28T11:05:11.607

在 Android API 4.0 及更高版本中，您可以使用以下代码隐藏底部系统栏。

```
View decorView = getWindow().getDecorView();
int uiOptions = View.SYSTEM_UI_FLAG_HIDE_NAVIGATION
          | View.SYSTEM_UI_FLAG_FULLSCREEN;
decorView.setSystemUiVisibility(uiOptions); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-17T10:05:50.170

除非您具有 root 访问权限，否则这是不可能的。或者，您可以创建一个**`launcher application`**.

否则隐藏系统/导航栏将超出您的应用程序的范围。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-15T04:59:10.083

在互联网上进行了大量搜索后，我设法让系统栏隐藏并出现在 4.2 设备中，使用：

隐藏：

```
Runtime.getRuntime().exec("service call activity 42 s16 com.android.systemui"); 
```

或者对于小于 14 的 API 使用 79 而不是 42。您可能还需要包含 SET_DEBUG_APP 权限，在这种情况下，您需要使用系统密钥对应用程序进行签名或安装在 /system/app/ 目录中。

以显示：

```
Runtime.getRuntime().exec("am startservice --user 0 -n com.android.systemui/.SystemUIService"); 
```

或者，有些人使用了 -a（而不是 -n）选项，尽管这导致我的设备出现错误：

错误：未找到；没有服务启动。

# ios - How to check internet connectivity in ios?

> ID：16057098
> 
> 赞同：0
> 
> 时间：2013-04-17T09:59:06.793
> 
> 标签：ios, objective-c, notifications, nsnotificationcenter

How can I check whether the app is connected to the internet or not? currently, I am using this code in my `appdelegate.m` file

```
dispatch_queue_t connectivityThread = dispatch_queue_create("com.gm.kart.connectivity", NULL);

dispatch_async(connectivityThread, ^{
    while (true){
        if([GMMConnectivity hasConnectivity])
            NSLog(@"%@", @"connected");
        else
            NSLog(@"Not connected");

        usleep(10000000);
    }
}); 
```

and when I click my login button I want to do a check whether the internet is connected or not using `NSnotificationcenter`?

Please help me

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-17T10:01:01.667

下载下面的示例后。

[http://developer.apple.com/iphone/library/samplecode/Reachability/index.html](http://developer.apple.com/iphone/library/samplecode/Reachability/index.html)

您可以在您的项目中使用它，如下所示：-

`included Apple's Reachability.h & .m from their Reachability example.`

`add the SystemConfiguration framework.`

将波纹管方法放入您的 appdelegare.m 文件中：-

```
- (BOOL) connectedToNetwork{
    Reachability* reachability = [Reachability reachabilityWithHostName:@"google.com"];
    NetworkStatus remoteHostStatus = [reachability currentReachabilityStatus];

    if(remoteHostStatus == NotReachable)
    {
        isInternet =NO;
    }
    else if (remoteHostStatus == ReachableViaWWAN)
    {
        isInternet = TRUE;
    }
    else if (remoteHostStatus == ReachableViaWiFi)
    { isInternet = TRUE;

    }
    return isInternet;
} 
```

**isInternet 在您的 .h 类中是一个 BOOL declear**

根据您的代码：-

```
dispatch_queue_t connectivityThread = dispatch_queue_create("com.GMM.assamkart.connectivity", NULL);

dispatch_async(connectivityThread, ^{
    while (true){
       isInternet =[self connectedToNetwork];
    if (isInternet)
    {
           NSLog(@"connected");
        }
        else
        {
            NSLog(@"Not connected");
        }
       // usleep(10000000);
    }
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-07T11:07:09.587

```
-(BOOL) connectedToInternet

{
    NSString *URLString = [NSString stringWithContentsOfURL:[NSURL URLWithString:@"http://www.google.com"]];

return ( URLString != NULL ) ? YES : NO;

} 
```

# magento - 如何从 Magento 的报价中删除项目？

> ID：16057101
> 
> 赞同：3
> 
> 时间：2013-04-17T09:59:16.547
> 
> 标签：magento, magento-1.4

在结帐过程中，我有时想以编程方式从会话报价中删除项目。所以我尝试了这段代码：

```
$quote = Mage::getSingleton('checkout/session')->getQuote();
$all_quote_items = $quote->getAllItems();
foreach ($all_quote_items as $item) {
    $quote->removeItem($item->getId())->save();
} 
```

然而，在这个循环之后，`$quote`对象中的项目列表仍然相同，即没有项目被删除。

有什么想法我在这里想念的吗？

使用 Magento 1.4.1.1

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-17T13:14:01.400

尝试

```
$cartHelper = Mage::helper('checkout/cart');
$items = $cartHelper->getCart()->getItems();        
foreach ($items as $item) 
{
   $itemId = $item->getItemId();
   $cartHelper->getCart()->removeItem($itemId)->save();
} 
```

请参阅[http://www.magentocommerce.com/boards/viewthread/30113/](http://www.magentocommerce.com/boards/viewthread/30113/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-10-08T07:30:44.157

在`Magento 1.7.0.0`版本中，您可以使用：

```
Mage::getSingleton('checkout/cart')->truncate()->save(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T11:46:29.713

我在寻找某种类型的项目时做了类似的过程，我应用的逻辑是：

```
$session= Mage::getSingleton('checkout/session');
$quote = $session->getQuote();

$cart = Mage::getModel('checkout/cart');
$cartItems = $cart->getItems();
foreach ($cartItems as $item)
{
    $quote->removeItem($item->getId())->save();
} 
```

试试上面的方法，如果失败了，我会在执行这个逻辑之前和之后开始转储引用对象，看看有什么不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-13T11:18:38.217

试试下面的代码它会工作

```
$product = $observer->getEvent()->getProduct();
$cart = Mage::getSingleton('checkout/cart');
foreach ($cart->getQuote()->getItemsCollection() as $_item) {
    if ($_item->getProductId() == $productId) {
            $_item->isDeleted(true);
    //Mage::getSingleton('core/session')->addNotice('This product cannot be added to shopping cart.');
        }
    } 
```

# android - 计算地图贝塞尔曲线的点

> ID：16057107
> 
> 赞同：0
> 
> 时间：2013-04-17T09:59:34.590
> 
> 标签：android, google-maps, google-maps-android-api-2, bezier, android-maps-v2

我正在计算与地理位置点之间的贝塞尔曲线的必要点，以在 Google Maps V2 上画线。我的问题是，如果必须在“太平洋上空”画线，它就不能正常工作，例如起点在东京，终点在温哥华。这些点的计算方向错误（地球周围的东边）而不是西边。横跨大西洋或亚洲的位置点已正确计算和绘制。

我的代码或我的想法中的错误在哪里？

下面是计算代码：

```
public static ArrayList<LatLng> bezier(LatLng p1, LatLng p2, double arcHeight, double skew, boolean up){
    ArrayList<LatLng> list = new ArrayList<LatLng>();
    try {
        if(p1.longitude > p2.longitude){
            LatLng tmp = p1;
            p1 = p2;
            p2 = tmp;
        }

        LatLng c = midPoint(p1, p2, 0);
        Log.v(TAG, "P1: " + p1.toString());
        Log.v(TAG, "P2: " + p2.toString());
        Log.v(TAG, "C: " + c.toString());

        double cLat = c.latitude;
        double cLon = c.longitude;

         //add skew and arcHeight to move the midPoint
        if(Math.abs(p1.longitude - p2.longitude) < 0.0001){
            if(up){
                cLon -= arcHeight;
            }else{
                cLon += arcHeight;
                cLat += skew;
            }
        }else{
            if(up){
                cLat += arcHeight;
            }else{
                cLat -= arcHeight;
                cLon += skew;
            }
        }

        list.add(p1);
         //calculating points for bezier
        double tDelta = 1.0/10;
        for (double t = 0;  t <= 1.0; t+=tDelta) {
            double oneMinusT = (1.0-t);
            double t2 = Math.pow(t, 2);
            double lon = oneMinusT * oneMinusT * p1.longitude
                        + 2 * oneMinusT * t * cLon
                        + t2 * p2.longitude;
            double lat = oneMinusT * oneMinusT * p1.latitude
                        + 2 * oneMinusT * t * cLat
                         + t2 * p2.latitude;
            Log.v(TAG, "t: " + t + "[" + lat +"|" + lon + "]");
            list.add(new LatLng(lat, lon));
        }

        list.add(p2);
    } catch (Exception e) {
        Log.e(TAG, "bezier", e);
    }
    return list;
} 
```

这是带有计算点的 logcat 的输出；

```
P1: lat/lng: (35.76472,140.38639)
P2: lat/lng: (49.19489,-123.17923)
C: lat/lng: (53.760800330485814,-178.27615766444313)
t: 0.0[35.76472|140.38639]
t: 0.1[39.17431615948745|80.39147522040025]
t: 0.2[42.12467250575547|27.871749947378213]
t: 0.3[44.61578903880404|-17.172785819066128]
t: 0.4[46.647665758633195|-54.7421320789327]
t: 0.5[48.22030266524291|-84.83628883222157]
t: 0.6[49.333699758633195|-107.4552560789327]
t: 0.7[49.98785703880404|-122.59903381906611]
t: 0.7[50.18277450575546|-130.2676220526218]
t: 0.8[49.918452159487444|-130.46102077959978]
t: 0.9[49.19489|-123.17923000000002] 
```

这是地图的截图：

![在此处输入图像描述](https://i.stack.imgur.com/qQ7kd.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T07:06:45.120

我决定将地理位置转换为[笛卡尔坐标系](https://stackoverflow.com/questions/1185408/converting-from-longitude-latitude-to-cartesian-coordinates)，然后进行计算。这行得通。

以下是更改：

```
//inside bezier(...)

CartesianCoordinates cart1 = new CartesianCoordinates(p1);
CartesianCoordinates cart2 = new CartesianCoordinates(p2);
CartesianCoordinates cart3 = new CartesianCoordinates(cLat, cLon);

for (double t = 0; t <= 1.0; t += tDelta) {
    double oneMinusT = (1.0 - t);
    double t2 = Math.pow(t, 2);

    double y = oneMinusT * oneMinusT * cart1.y + 2 * t * oneMinusT * cart3.y + t2 * cart2.y;
    double x = oneMinusT * oneMinusT * cart1.x + 2 * t * oneMinusT * cart3.x + t2 * cart2.x;
    double z = oneMinusT * oneMinusT * cart1.z + 2 * t * oneMinusT * cart3.z + t2 * cart2.z;
    LatLng control = CartesianCoordinates.toLatLng(x, y, z);
    if (Config.DEBUG) 
        Log.v(TAG, "t: " + t + control.toString());
    list.add(control);
} 
```

使用笛卡尔坐标：

```
private static class CartesianCoordinates {
private static final int R = 6371; // approximate radius of earth
double x;
double y;
double z;

public CartesianCoordinates(LatLng p) {
    this(p.latitude, p.longitude);
}

public CartesianCoordinates(double lat, double lon) {
    double _lat = Math.toRadians(lat);
    double _lon = Math.toRadians(lon);

    x = R * Math.cos(_lat) * Math.cos(_lon);
    y = R * Math.cos(_lat) * Math.sin(_lon);
    z = R * Math.sin(_lat);
}

public static LatLng toLatLng(double x, double y, double z){
        return new LatLng(Math.toDegrees(Math.asin(z / R)), Math.toDegrees(Math.atan2(y, x)));
    }
} 
```

计算两个坐标中点的方法（可能不是 100% 完美的数学正确）：

```
private static LatLng midPoint(LatLng p1, LatLng p2) throws IllegalArgumentException{

    if(p1 == null || p2 == null)
        throw new IllegalArgumentException("two points are needed for calculation");

    double lat1;
    double lon1;
    double lat2;
    double lon2;

    //convert to radians
    lat1 = Math.toRadians(p1.latitude);
    lon1 = Math.toRadians(p1.longitude);
    lat2 = Math.toRadians(p2.latitude);
    lon2 = Math.toRadians(p2.longitude);

    double x1 = Math.cos(lat1) * Math.cos(lon1);
    double y1 = Math.cos(lat1) * Math.sin(lon1);
    double z1 = Math.sin(lat1);

    double x2 = Math.cos(lat2) * Math.cos(lon2);
    double y2 = Math.cos(lat2) * Math.sin(lon2);
    double z2 = Math.sin(lat2);

    double x = (x1 + x2)/2;
    double y = (y1 + y2)/2;
    double z = (z1 + z2)/2;

    double lon = Math.atan2(y, x);
    double hyp = Math.sqrt(x*x + y*y);

    // HACK: 0.9 and 1.1 was found by trial and error; this is probably *not* the right place to apply mid point shifting
    double lat = Math.atan2(.9*z, hyp); 
    if(lat>0) lat = Math.atan2(1.1*z, hyp);

    if(Config.DEBUG)
        Log.v(TAG, Math.toDegrees(lat) + " " + Math.toDegrees(lon));

    return new LatLng(Math.toDegrees(lat),  Math.toDegrees(lon));
} 
```

# android - Null pointer exception showing in action bar sherlock library

> ID：16057108
> 
> 赞同：4
> 
> 时间：2013-04-17T09:59:35.110
> 
> 标签：android, actionbarsherlock

I want to implement the search view widget of Sherlock action bar. My problem is `OnOptionItemSelected` of search view item. I am getting a null pointer exception in library activity.

The menu xml:

```
<item android:id="@+id/menu_search"
      android:actionViewClass="com.actionbarsherlock.widget.SearchView"
      android:icon="@android:drawable/ic_menu_search"
/> 
```

Code snippet for option menu:

```
public boolean onCreateOptionsMenu(Menu menu) 
{
    MenuInflater inflater = getSupportMenuInflater();
    inflater.inflate(R.menu.tvguide_menu, menu);
    MenuItem mSearch = menu.findItem(R.id.menu_search);
    searchView = new SearchView(getSupportActionBar().getThemedContext());
    searchView.setQueryHint("Search for countriesâ€¦");
    searchView.setOnQueryTextListener(this);
    mSearch.setActionView(searchView);
    mSearch.setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM |
            MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW);
} 
```

I am getting a forced close on clicking over search android. I have shared my log below

```
04-17 15:10:08.508: E/AndroidRuntime(23283): FATAL EXCEPTION: main
04-17 15:10:08.508: E/AndroidRuntime(23283): java.lang.NullPointerException
04-17 15:10:08.508: E/AndroidRuntime(23283):    at com.android.internal.view.menu.MenuItemImpl.toString(MenuItemImpl.java:490)
04-17 15:10:08.508: E/AndroidRuntime(23283):    at java.lang.StringBuilder.append(StringBuilder.java:202)
04-17 15:10:08.508: E/AndroidRuntime(23283):    at com.actionbarsherlock.app.SherlockFragmentActivity.onMenuItemSelected(SherlockFragmentActivity.java:201)
04-17 15:10:08.508: E/AndroidRuntime(23283):    at com.android.internal.policy.impl.PhoneWindow.onMenuItemSelected(PhoneWindow.java:953)
04-17 15:10:08.508: E/AndroidRuntime(23283):    at com.android.internal.view.menu.MenuBuilder.dispatchMenuItemSelected(MenuBuilder.java:735)
04-17 15:10:08.508: E/AndroidRuntime(23283):    at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:149)
04-17 15:10:08.508: E/AndroidRuntime(23283):    at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:874)
04-17 15:10:08.508: E/AndroidRuntime(23283):    at com.android.internal.view.menu.ActionMenuView.invokeItem(ActionMenuView.java:491)
04-17 15:10:08.508: E/AndroidRuntime(23283):    at com.android.internal.view.menu.ActionMenuItemView.onClick(ActionMenuItemView.java:110)
04-17 15:10:08.508: E/AndroidRuntime(23283):    at android.view.View.performClick(View.java:3511)
04-17 15:10:08.508: E/AndroidRuntime(23283):    at android.view.View$PerformClick.run(View.java:14105)
04-17 15:10:08.508: E/AndroidRuntime(23283):    at android.os.Handler.handleCallback(Handler.java:605)
04-17 15:10:08.508: E/AndroidRuntime(23283):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-17 15:10:08.508: E/AndroidRuntime(23283):    at android.os.Looper.loop(Looper.java:137)
04-17 15:10:08.508: E/AndroidRuntime(23283):    at android.app.ActivityThread.main(ActivityThread.java:4438)
04-17 15:10:08.508: E/AndroidRuntime(23283):    at java.lang.reflect.Method.invokeNative(Native Method)
04-17 15:10:08.508: E/AndroidRuntime(23283):    at java.lang.reflect.Method.invoke(Method.java:511)
04-17 15:10:08.508: E/AndroidRuntime(23283):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-17 15:10:08.508: E/AndroidRuntime(23283):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-17 15:10:08.508: E/AndroidRuntime(23283):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-14T11:43:25.403

问题是您的`Menu`项目没有指定标题，并且在行中：

```
@Override
public final boolean onMenuItemSelected(int featureId, android.view.MenuItem item) {
    if (BuildConfig.DEBUG) Log.d(TAG, "[onMenuItemSelected] featureId: " 
           + featureId + ", item: " + item);
    ...
} 
```

`item`将采用以下`toString()`方法：

```
@Override
public String toString() {
    return mTitle.toString();
} 
```

会抛出一个`NullPointerException`. 在修复之前，一个简单的解决方法是使用：

```
android:title="" 
```

为您的`MenuItem`.

此外，这不会在您的应用程序发布时发生。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-22T16:58:09.663

这是ActionBarSherlock 4.3.0版本的一个bug，我是这样修复的（需要注释actionbarsherlock/src/com/actionbarsherlock/app/SherlockFragmentActivity.java的第201行：

```
--- a/actionbarsherlock/src/com/actionbarsherlock/app/SherlockFragmentActivity.java
+++ b/actionbarsherlock/src/com/actionbarsherlock/app/SherlockFragmentActivity.java
@@ -198,7 +198,7 @@ public class SherlockFragmentActivity extends Watson implements OnActionModeStar

     @Override
     public final boolean onMenuItemSelected(int featureId, android.view.MenuItem item) {
-        if (BuildConfig.DEBUG) Log.d(TAG, "[onMenuItemSelected] featureId: " + featureId + ", item: " + item);
+       // if (BuildConfig.DEBUG) Log.d(TAG, "[onMenuItemSelected] featureId: " + featureId + ", item: " + item);

         if (featureId == Window.FEATURE_OPTIONS_PANEL && !mIgnoreNativeSelected) {
             mIgnoreNativeSelected = true; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-26T09:45:15.790

如果有人遇到此问题并想创建没有标题的菜单项，则可以通过简单地修改 actionbarsherlock 源代码中的类中的`toString()`方法，`com/android/internal/view/menu/MenuItemImpl`在返回前进行​​空字符串检查来解决此 nullpointerexception：

```
@Override
public String toString() {
    return (mTitle != null)? mTitle.toString(): "";
} 
```

# c++ - 定点实现中的浮点异常错误

> ID：16057110
> 
> 赞同：0
> 
> 时间：2013-04-17T09:59:47.277
> 
> 标签：c++, types, floating-point, fixed-point

helo all 我实现了一个用于执行定点算术运算的头文件，如下所示，它执行乘法和除法运算。

```
#ifndef __fixed_point_header_h__
#define __fixed_point_header_h__
#include <boost/operators.hpp>
#include <limits>
namespace fp {
    // FP The fixed point(base) type, should be an integer type 
    // I  Integer part bit count
    // F  fractional part bit count 
    template<typename FP, unsigned char I, unsigned char F = std::numeric_limits<FP>::digits - I>

class fixed_point: boost::ordered_field_operators<fp::fixed_point<FP, I, F>  > 
{

//As the fixed_point class needs 2 to the power of P in several parts for floating point conversions, template recursion using template metaprogramming is used to calculate 2 to the power of F at compile time itself.

template<int P,typename T = void> 
    struct power2
    {
        static const long long value = 2 * power2<P-1,T>::value;
    };

    template <typename P>
    struct power2<0, P>
    {
        static const long long value = 1;
    };

// Initializing constructor.
//! This constructor takes a value of type FP and initializes the //internal representation of fixed_point<FP, I, F> with it.
    fixed_point(FP value,bool): fixed_(value){ } // initializer list

public:
typedef FP base_type; ///  fixed point base type of this fixed_point cass.
static const unsigned char integer_bit_count = I; ///  integer part bit count.
static const unsigned char fractional_bit_count = F; /// fractional part bit count.
fixed_point(){ } /// Default constructor.

//Conversion by constructors.
//Integer to Fixed point
template<typename T> fixed_point(T value) : fixed_((FP)value << F)
   {
    BOOST_CONCEPT_ASSERT((boost::Integer<T>)); 
    }
//floating point to fixed point 
fixed_point(float value) :fixed_((FP)(value * power2<F>::value))
    { }

    fixed_point(double value) : fixed_((FP)(value * power2<F>::value))
    { }

    fixed_point(long double value) : fixed_((FP)(value * power2<F>::value))
    { }

    /// Copy constructor,explicit definition
    fixed_point(
        /// The right hand side.
        fixed_point<FP, I, F> const& rhs)
        //: fixed_(rhs.fixed_)
    {
        fixed_ = rhs.fixed_;
    }
// Copy assignment operator.
    fp::fixed_point<FP, I, F> & operator =(fp::fixed_point<FP, I, F> const& rhs)
    {
    fp::fixed_point<FP, I, F> temp(rhs); 
    swap(temp); 
    return *this;  //return by reference
    }
    /// Exchanges the elements of two fixed_point objects.
    void swap(
        /// The right hand side.
        fp::fixed_point<FP, I, F> & rhs)
    {
        std::swap(fixed_, rhs.fixed_);
    }
/// Multiplication.
fp::fixed_point<FP, I, F> & operator *=(
        /// Factor for mutliplication.
        fp::fixed_point<FP, I, F> const& factor)
    {

        fixed_ = 
            ( fixed_ * (factor.fixed_ >> F) ) +
            ( ( fixed_ * (factor.fixed_ & (power2<F>::value-1) ) ) >> F );

        return *this;   //return A reference to this object.
    }

    /// Division.

    fp::fixed_point<FP, I, F> & operator /=(
        /// Divisor for division.
        fp::fixed_point<FP, I, F> const& divisor)
    {

        fixed_ = ( (fixed_)<< F  / divisor.fixed_  )+
                 ( ( fixed_ / (divisor.fixed_ & (power2<F>::value-1) ) )<< F   ); 
        return *this;   //return A reference to this object.
    }
private:
    /// The value in fixed point format.
    FP fixed_;
 };

} // namespace fp
#endif // __fixed_point_header__ 
```

例如，对于乘法，我提升了结果定点的类型（当两个 8 位数字相乘时，会产生 16 位结果）。它工作正常。

但是当我使用以下测试文件 Test.cpp 进行除法时

```
#include <stdio.h>
#include <fixed_point_header.h>
int main()
{
 fp::fixed_point<int, 15> fp1 = 3.0; // 011 0000 0000 0000 0000
 fp::fixed_point<int, 15> fp2 = 3.0; // 100 0000 0000 0000 0000
 fp::fixed_point<int, 15> fp3;

    fp3 = fp1/fp2;
    printf("divided value ==%f\n", (float)fp3 );
     } 
```

我总是遇到浮点异常错误，请检查一下，看看发生了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:30:58.453

当然，这可能会导致除以零：

```
 fixed_ = ( (fixed_)<< F  / divisor.fixed_  )+
            ( ( fixed_ / (divisor.fixed_ & (power2<F>::value-1) ) )<< F   ); 
   return *this;   //return A reference to this object. 
```

如果`divisor.fixed_ & (power2<F>::value-1)`为零，那么你会被零除。

我也不相信它是正确的，但我会留给你来解决这个问题，因为我实际上并没有考虑过你是如何进行“定点”划分的。

# ruby-on-rails - New Relic causing memory leak/bloat?

> ID：16057114
> 
> 赞同：6
> 
> 时间：2013-04-17T09:59:55.643
> 
> 标签：ruby-on-rails, ruby-on-rails-3, newrelic

I've been tearing my hair out trying to pinpoint the cause of the memory my app is using continually growing, to the point where in production on heroku it fails and goes down.

After some pretty extensive research, using Top to observe RSIZE growing locally and using Oink to try and pinpoint I just couldn't find what was wrong.

I then found a post [here](https://stackoverflow.com/questions/12397208/memory-grows-indefinitely-in-an-empty-rails-app?rq=1) that refers in one of the comments to the New Relic gem causing the same problem. As a test in development I commented out the gem and now without it my memory usage seems to be pretty stable at around 100M whereas with the gem installed it grows to the point where I can push it up to almost 1GB!! Clearly this behaviour is the root of the app going down at Heroku.

Has anyone else had this with New Relic? I'd like to continue using it, I think it's a great service but I can't if it's the root of this memory leak. Any suggestions on how I can fix it?

I'm running Rails 3.2.0 & Ruby 1.9.2

When I run Gem List it shows I have newrelic_rpm (3.6.0.83, 3.5.6.46, 3.5.5.38, 3.4.2.1, 3.4.2)

My Gemfile just references gem 'newrelic_rpm' so should I be specifying a version?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-07T21:51:23.057

看起来这可能会得到解决，但如果您继续看到 New Relic 的 Ruby 代理使用大量资源，您绝对应该立即与支持人员联系。对于 Ruby 代理，我还没有看到类似的东西，所以这绝对是我们很想看的东西。[https://support.newrelic.com/home](https://support.newrelic.com/home)

# java - Hibernate 配置文件不正确？

> ID：16057120
> 
> 赞同：0
> 
> 时间：2013-04-17T10:00:16.207
> 
> 标签：java, xml, hibernate

在[较早的帖子](https://stackoverflow.com/questions/16055067/how-to-fix-config-file-of-hibernate)中，我的休眠配置文件有一些未知问题。一个人给了我另一个配置文件来使用，它解决了旧的配置错误。但它也引入了一个新错误，如下所示。我如何解决它 ？

**编辑**

```
org.hibernate.cfg.annotations.Version <clinit>
INFO: Hibernate Annotations 3.3.1.GA
[main] INFO org.hibernate.cfg.Environment - Hibernate 3.3.2.GA
[main] INFO org.hibernate.cfg.Environment - hibernate.properties not found
[main] INFO org.hibernate.cfg.Environment - Bytecode provider name : javassist
[main] INFO org.hibernate.cfg.Environment - using JDK 1.4 java.sql.Timestamp handling
[main] INFO org.hibernate.cfg.Configuration - configuring from resource:
 /hibernate.cfg.xml
[main] INFO org.hibernate.cfg.Configuration - Configuration resource: 
/hibernate.cfg.xml
[main] INFO org.hibernate.cfg.Configuration - Reading mappings from resource : 
com/xx  /portal/db/User.hbm.xml
Exception in thread "main" org.hibernate.MappingNotFoundException: resource: com/xx
/portal/db/User.hbm.xml not found
at org.hibernate.cfg.Configuration.addResource(Configuration.java:610)
at org.hibernate.cfg.AnnotationConfiguration.addResource
(AnnotationConfiguration.java:912)
at org.hibernate.cfg.AnnotationConfiguration.parseMappingElement
(AnnotationConfiguration.java:617)
at org.hibernate.cfg.Configuration.parseSessionFactory(Configuration.java:1603)
at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1582)
at org.hibernate.cfg.AnnotationConfiguration.doConfigure
(AnnotationConfiguration.java:1002)
at    org.hibernate.cfg.AnnotationConfiguration.doConfigure
(AnnotationConfiguration.java:69)
at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1556)
at org.hibernate.cfg.AnnotationConfiguration.doConfigure
(AnnotationConfiguration.java:990)
at org.hibernate.cfg.AnnotationConfiguration.doConfigure
(AnnotationConfiguration.java:69)
at org.hibernate.cfg.Configuration.configure(Configuration.java:1476)
at org.hibernate.cfg.AnnotationConfiguration.configure
(AnnotationConfiguration.java:972)
at org.hibernate.cfg.AnnotationConfiguration.configure
(AnnotationConfiguration.java:69)
at org.hibernate.cfg.Configuration.configure(Configuration.java:1462)
at org.hibernate.cfg.AnnotationConfiguration.configure
(AnnotationConfiguration.java:966)
at com.examscam.model.User.persist(User.java:45)
at com.examscam.model.User.main(User.java:55) 
```

**我删除了“！--禁用缓存--”“！-- UTF8到数据库--”“！--实体映射--”，现在我收到一个新错误。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:06:02.583

`<mapping resource="com/xx/portal/db/User.hbm.xml" />`如果您没有任何实体映射文件，请先删除该行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:06:39.510

如果您定义了任何 hbms，请从您的配置 xml 中删除波纹管或替换

```
 <!-- Entity Mappings -->
   <mapping resource="com/xx/portal/db/User.hbm.xml" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T10:03:53.907

`com/xx/portal/db/User.hbm.xml`未找到

你真的有这个包名吗`com/xx`？

检查您是否`User.hbm.xml`在提到的路径中有一个。如果没有，则删除此条目。

`<mapping resource="com/xx/portal/db/User.hbm.xml" />`

# java - JButton with icon and text but hide text

> ID：16057124
> 
> 赞同：2
> 
> 时间：2013-04-17T10:00:22.303
> 
> 标签：java, swing, user-interface, jbutton

For automatic test purposes is a must to have the text set because is the identification used by robot to navigate though screens. I need to create a `JButton` with text and icon but only show the icon.

I have tried several things:

1.  use of `setHideActionText(true)`:

    ```
    jButton button = new JButton(icon);
    jButton.setHideActionText(true);
    jButton.setText(_messageManager.getMessage(messageKey)); 
    ```

2.  `setHoritzontalTextPosition`

3.  `setVerticalAlignment`

but none worked.

Anyone has any idea on how to solve this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-10-28T09:12:58.683

> 我需要创建一个带有文本和图标的 JButton，但只显示图标。

您可能使用过[setActionCommand()](http://docs.oracle.com/javase/7/docs/api/javax/swing/AbstractButton.html#setActionCommand%28java.lang.String%29)

```
jButton.setActionCommand("Button 1"); 
```

或者，您也可以使用[setName()](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#setName%28java.lang.String%29)

```
jButton.setName("Button 1"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:05:49.580

您希望文本仅在测试环境中而不是在生产环境中？

然后你可以这样：

```
setText("");
if(test)
   setText("sometext"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T10:09:06.427

我建议将按钮文本的字体大小设置为 0。如果这不起作用，请将大小设置为尽可能低的值，并且文本的颜色等于按钮的背景颜色（您可能有之后稍微调整布局...）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T12:03:11.840

如果您使用 TooltipText，则可以完全避免使用 JButton 的文本：

```
 jButton1.setIcon(new ImageIcon(getClass().getResource("/money.png")));
   jButton1.setToolTipText("Foo");  
   ....
   jButton1.getToolTipText(); // use instead of getText() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-16T16:44:02.070

按钮文本未显示绘制图标！

编码：

```
 Icon icon = new PlayIcon();
        JButton play = new JButton("PlayIcon with text", icon); 
```

您期望带有按钮的文本。但是没有显示！也许您的图标会像这样描绘自己：

```
public class PlayIcon implements Icon ...

    public void paintIcon(Component c, Graphics g, int x, int y) {
        Graphics2D g2d = (Graphics2D) g;

        g2d.setColor(color==null ? c.getForeground() : color);
        GeneralPath path = new GeneralPath();
        path.moveTo(x + 2, y + 2);
        path.lineTo(x + width - 2, y + height / 2);
        path.lineTo(x + 2, y + height - 2);
        path.lineTo(x + 2, y + 2);
        g2d.fill(path);
        g2d.dispose(); // <===========
... 
```

然后问题是课堂上的`dispose()`电话`PlayIcon`。去掉它！

[结果会是这样](https://i.stack.imgur.com/1OR6P.png)

见：[github问题](https://github.com/homebeaver/SwingSet/issues/19)

# eclipse - Eclipse 的源映射插件

> ID：16057125
> 
> 赞同：4
> 
> 时间：2013-04-17T10:00:24.173
> 
> 标签：eclipse, visual-studio-2010, eclipse-plugin, productivity-power-tools

我想知道是否有可用于 Eclipse 的源映射插件，例如 VS 的 Productivity Power Tools 中包含的插件： ![在此处输入图像描述](https://i.stack.imgur.com/f1msu.png)

试图谷歌它，但我没有得到任何相关的打击。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T09:20:19.123

这不是您正在寻找的[https://github.com/apauzies/eclipse-minimap-view吗？](https://github.com/apauzies/eclipse-minimap-view)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T22:55:06.267

这组插件怎么样：

[https://marketplace.eclipse.org/content/pde-tools#.UXcQ4ILZpP0](https://marketplace.eclipse.org/content/pde-tools#.UXcQ4ILZpP0)

它包括一个“疯狂的大纲视图”。我没有用过这个插件，所以我不能保证它的质量，但我知道插件作者，他有发布好的插件的记录。值得一试。

# php - Radio Button Values Not Showing Into Another Page Via Session?

> ID：16057126
> 
> 赞同：0
> 
> 时间：2013-04-17T10:00:24.393
> 
> 标签：php, forms, session, submit

i want to passing radio button values to another page via `session post variable` but problem is that in another page radio button values didn't display in the page via session

need to help to solve this issue thank you

**Index Page Function & Source Code**

**Php Function**

```
<?php 
session_start();
$_SESSION['sizes1'][]=$_POST['size'];
?> 
```

**Javascript Function**

```
 $(document).ready(function () {
 $('.form-radios label').attr('checked', 'unchecked');
 $(".form-radios label").click(function(){
 $(this).attr('checked', 'checked').addClass('checked');
 $('label').not(this).removeClass('checked');
 });     
 }); 
```

**Index Page Form**

```
<form action="test.php" method="post">
<div class="form-radios">
<label>Small</label>
<input type="radio" name="size[]" id="small" value="small"/>
<label>Medium</label>
<input type="radio" name="size[]" id="medium" value="medium"/>
<label>Large</label>
<input type="radio" name="size[]" id="large" value="large"/>
<label>Xl</label>
<input type="radio" name="size[]" id="xl" value="xl"/>
</div><br />
<input type="submit" value="submit" />
</form> 
```

**Test Page Php Function**

```
<?php 
session_start();
echo $new_sizes=implode($_SESSION['sizes1']);

$max=count($new_sizes);
for($i=0; $i<=$max++; $i++)
{
?>
<input type="text" value="<?php $new_sizes [$i] ?>" />
<?php  } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:02:16.297

您正在访问错误的帖子值，即 $_POST['image1']、$_POST['product'] 等实际上并不存在于您的表单中。

# c# - 实体框架使用多于一级的导航属性进行导航

> ID：16057127
> 
> 赞同：0
> 
> 时间：2013-04-17T10:00:25.100
> 
> 标签：c#, .net, entity-framework, ef-code-first

我有如下实体模型类

```
public partial class User
{
    public User()
    {
        this.webpages_Roles = new HashSet<webpages_Roles>();
    }

    public int UserID { get; set; }

    public virtual ICollection<webpages_Roles> webpages_Roles { get; set; }
} 
```

.

```
public partial class webpages_Roles
{
    public webpages_Roles()
    {
        this.Users = new HashSet<User>();
        this.Roles_X_ApplicationModules = 
                       new HashSet<Roles_X_ApplicationModules>();
    }

    public int RoleId { get; set; }

    public virtual ICollection<User> Users { get; set; }
    public virtual ICollection<Roles_X_ApplicationModules> 
                                   Roles_X_ApplicationModules { get; set; }
} 
```

.

```
public partial class Roles_X_ApplicationModules
{
    public long ID { get; set; }
    public Nullable<int> ModuleID { get; set; }
    public Nullable<int> RoleID { get; set; }
    public Nullable<bool> ViewPermission { get; set; }

    public virtual ApplicationModule ApplicationModule { get; set; }
    public virtual webpages_Roles webpages_Roles { get; set; }
} 
```

。和

```
public partial class ApplicationModule
{
    public ApplicationModule()
    {
        this.Roles_X_ApplicationModules = 
                           new HashSet<Roles_X_ApplicationModules>();
    }

    public int ModuleID { get; set; }

    public virtual ICollection<Roles_X_ApplicationModules> 
                                      Roles_X_ApplicationModules { get; set; }
} 
```

您可以看到`User`对象有一个导航属性，`webpages_Roles`该属性又具有导航属性，`Roles_X_ApplicationModules`然后又导航到`ApplicationModule`..

现在我想从用户那里获取所有的 ApplicationModule ..如何使用导航属性编写查询..

我试过这样的东西..

```
var appModules = user.webpages_Roles.SingleOrDefault()
       .Roles_X_ApplicationModules.Where(z => z.ViewPermission == true)
       .Select(x => x.ApplicationModule); 
```

但问题是，它不会向数据库发出单个查询。它拆分查询以获取`webpages_Roles`at`SingleOrDefault`然后另一个查询以`Roles_X_ApplicationModules`基于获取 ，最后与匹配条件的`RoleId`查询数量一样多以获取`Roles_X_ApplicationModules``ApplicationModule`

如何编写 LINQ 查询以便向数据库发出单个 sql 查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:27:28.003

尝试这个：

```
var appModules = from u in user
                 from w in u.webpages_Roles
                 from am in w.Roles_X_ApplicationModules
                 where am.ViewPermission == true
                 select am; 
```

如果你想要预先加载，那么你只需要调用 ToList：

```
var appModules = (from u in user
                 from w in u.webpages_Roles
                 from am in w.Roles_X_ApplicationModules
                 where am.ViewPermission == true
                 select am).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:36:06.840

您可以使用它`Include()`来执行此操作。例子：

```
card = Cards.Include(l => l.DocumentLinks)
            .Include(l => l.Charges.Select(ch => ch.DocumentLinks)
            .SingleOrDefault(c=>c.Id==id); 
```

这适用于三个链接实体：

```
public class Card
{
    public Guid Id{get;set;}
    public virtual ICollection<DocumentLink> DocumentLinks{get;set;}
    public virtual ICollection<Charge> Charges{get;set;}
}

public class Charge
{
    ...
    public virtual ICollection<DocumentLink> DocumentLinks{get;set;}
}

public class DocumentLink
{
    ...
} 
```

# android - Enabling Device Admin as App Settings

> ID：16057128
> 
> 赞同：0
> 
> 时间：2013-04-17T10:00:25.803
> 
> 标签：android, android-preferences, application-settings

I am trying to develop a security application , I want initially to display list of installed apps and on item click of list , its required permissions.

I have successfully made the app till permissions. Now , I want to disable camera , internet, etc, using Device admin API, I wish to include "Disable Camera" option in the settings of "AppsList" ie my list of installed apps Application ?

Can someone guide me how to do it ? Should I need to use preferences ? Any help appreciated,new to android development.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T07:06:53.910

在developers.android.com 上[，](http://developer.android.com/guide/topics/admin/device-admin.html#pwd)它描述为

> **禁用相机**
> 
> 从 Android 4.0 开始，您可以禁用摄像头。请注意，这不一定是永久禁用。可以根据上下文、时间等动态启用/禁用相机。
> 
> 您可以使用 setCameraDisabled() 方法控制是否禁用相机。例如，此代码段根据复选框设置启用或禁用相机：

**代码**

```
 private CheckBoxPreference mDisableCameraCheckbox; DevicePolicyManager
     mDPM; ComponentName mDeviceAdminSample; ...
     mDPM.setCameraDisabled(mDeviceAdminSample,
     mDisableCameraCheckbox.isChecked()); 
```

# python - ImportError：_imaging C 模块没有安装？PIL Python3

> ID：16057130
> 
> 赞同：3
> 
> 时间：2013-04-17T10:00:28.770
> 
> 标签：python, python-imaging-library

```
root@syscomp1:~# cd Pillow-master
root@syscomp1:~/Pillow-master# python3 selftest.py
Traceback (most recent call last):
  File "selftest.py", line 8, in <module>
    from PIL import Image
  File "./PIL/Image.py", line 155, in <module>
    if hasattr(core, 'DEFAULT_STRATEGY'):
  File "./PIL/Image.py", line 39, in __getattr__
    raise ImportError("The _imaging C module is not installed")
ImportError: The _imaging C module is not installed
root@syscomp1:~/Pillow-master# 
```

## 这是我安装 PIL 之前的步骤

```
sudo apt-get install python-pip python-dev build-essential 
sudo pip install --upgrade pip 
sudo pip install --upgrade virtualenv 
sudo aptitude install python3-setuptools
sudo easy_install3 pip
sudo apt-get install python3-dev
download the Pillow-master.zip
wget https://github.com/python-imaging/Pillow/archive/master.zip
go to downloaded directory and,
sudo unzip master.zip
sudo apt-get install libjpeg62-dev //must install this
sudo apt-get install zlib1g-dev
sudo apt-get install libfreetype6-dev
sudo apt-get install liblcms1-dev
python3 setup.py build_ext -i 
```

`The _imaging C module is not installed`但为什么会出错？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-16T14:16:37.763

看起来像 setup.py 中的 Python 2 打印语句：

```
 Downloading from URL http://effbot.org/media/downloads/PIL-1.1.7.tar.gz (from http://effbot.org/downloads/)
  Running setup.py egg_info for package pil

    Traceback (most recent call last):

      File "<string>", line 16, in <module>

      File "<pyenv>/build/pil/setup.py", line 182

        print "--- using Tcl/Tk libraries at", TCL_ROOT 
```

# backbone.js - 使用 Lodash 而不是 Underscore 和 Browserify 的主干

> ID：16057132
> 
> 赞同：6
> 
> 时间：2013-04-17T10:00:31.553
> 
> 标签：backbone.js, underscore.js, browserify, lodash

我现在正在尝试使用 Browserify，但我遇到了问题。

我总是使用带 Lodash 而不是 Underscore 的 Backbone，所以我为 Browserify 编写了一些 shim 脚本：

`shims/lodash.js`：

```
'use strict';
/* global window,require,module */
require('../vendor/lodash.underscore-1.2.0');
module.exports = window._; 
```

`shims/backbone.js`：

```
'use strict';
/* global window,require,module */
require('../vendor/backbone-1.0.0');
module.exports = window.Backbone; 
```

`app.coffee`：

```
'use strict'
$ = require './shims/jquery'
_ = require './shims/underscore'
Backbone = require './shims/backbone' 
```

我实际上是`grunt-coffeeify`用来构建 Browserify 模块的，它在下面显示一个错误：

```
Running "coffeeify:source" (coffeeify) task
Warning: module "underscore" not found from "/Users/User/proj/src/js/vendor/backbone-1.0.0.js" Use --force to continue. 
```

我应该改变什么才能正常工作 Backbone？提前致谢。

**更新**

不知何故，它适用于以下代码：

`shims/lodash.js`：

```
'use strict';
/* global require,module */
module.exports = require('../vendor/lodash-1.2.0'); 
```

`shims/backbone.js`：

```
'use strict';
/* global window,require,module */
window.$ = require('./jquery');
window._ = require('./lodash');
module.exports = require('../vendor/backbone-1.0.0'); 
```

并在下面注释掉代码`backbone-1.0.0.js`：

```
//if (!_ && (typeof require !== 'undefined')) _ = require('underscore'); 
```

不过这看起来有些不对劲……

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-17T20:05:23.127

`b`是 browserify 的一个实例。

```
b.require('lodash', {expose: 'underscore'}); 
```

对于 jQuery，请查看我在 github 上的版本：[https ://github.com/amiorin/jquery](https://github.com/amiorin/jquery)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-07T09:24:57.687

你不需要任何垫片。您所需要的只是 browserify 任务中的正确别名。

```
alias: ['./node_modules/lodash/dist/lodash.underscore.js:underscore'] 
```

[看我的例子](https://gist.github.com/knpsck/a7c2ead6120c7dca152c)

# php - CakePhp - 通过不同的 URL 分割视图和控制器

> ID：16057135
> 
> 赞同：1
> 
> 时间：2013-04-17T10:00:39.853
> 
> 标签：php, cakephp

我有 2 个站点。 `www.xxx.com`&`www.yyy.com`

我有一个 CakePHP 解决方案`www.xxx.com`，它工作正常。

我现在想让站点`www.yyy.com`使用与`www.xxx.com`. 但它是拥有完全不同的 CTP 和 CSS。我当然可以将全部内容复制到其中，`www.yyy.com`但我需要维护 2 组代码。我只想维护 2 组不同的 CTPS 和 CSS。

所以问题是：

1.  您可以将控制器和视图拆分为 2 个不同的 URL 吗？
2.  假设 1 的答案是肯定的。然后你可以有 2 个不同的站点使用相同的控制器和数据库，但显示完全不同的视图和 CSS？
3.  根据您的经验，在这样做之前我应该​​考虑什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:37:27.883

您的问题与需要桌面版和移动版的网站非常相似。您可以研究用于此的解决方案。

我们通过创建一个 AppController 来构建类似的东西，它在 beforeFilter() 方法中设置一个变量（在你的情况下检查请求域），并在 render 方法中使用这个变量来选择要使用的布局和视图文件：

```
function render($action = null, $layout = null, $file = null) {                
    $view_file = false;
    $layout_file = false;

    // test for availability of layout does not work for null so set to default setting of null.
    if ($layout === null) {
        $layout = $this->layout;
    }

    // if not mobile: show desktop version.
    if (!$this->is_mobile) {
        $view_file = file_exists(VIEWS . $this -> name . DS . 'desktop/' . $file . '.ctp');
        $layout_file = file_exists(LAYOUTS . 'desktop/' . $layout . '.ctp');
    }

    return parent::render($action, ($layout_file ? 'desktop/' : '') . $layout, ($view_file ? 'desktop/' : '') . $file);
} 
```

这样，如果 is_mobile 为 false，则使用子目录“桌面”中的视图/布局而不是默认视图/布局。您可以使用同一系统为 2 个域创建单独的视图/布局。

我们通过覆盖 render() 而不是使用有时也建议的 afterFilter() 来做到这一点。我忘记了真正的原因，但知道这是因为我们无法像我们想要的那样使用 afterFilter() ;-)

# javascript - Fullcalendar：如何通过日历对象在 fullcalendar 上获取选定的开始和选定的结束日期时间？

> ID：16057138
> 
> 赞同：0
> 
> 时间：2013-04-17T10:00:45.990
> 
> 标签：javascript, jquery, fullcalendar

我已经完成了 fullcalendar 的其他帖子，但我无法满足我的需要。

在全日历下的“选择”回调事件中，我可以获得用户选择的开始、结束日期时间值。我希望通过日历对象获得这些值，因为我需要在其他功能中使用它。

[http://arshaw.com/fullcalendar/docs/selection/select_callback/](http://arshaw.com/fullcalendar/docs/selection/select_callback/)

谁能分享我，如何通过日历对象获取开始/结束值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-04T11:01:11.313

```
$(document).ready(function () {
        // Calendar
        var date = new Date();
        var d = date.getDate();
        var m = date.getMonth();
        var y = date.getFullYear();

        var calendar = $('#calendar').fullCalendar({
            header: {
                left: 'prev,next today',
                center: 'title',
                right: 'month'
            },
            selectable: true,
            selectHelper: true,
            select: function (start, end, allDay) {
                var title = prompt('Event Title:'+start+' '+end);
                if (title) {
                    calendar.fullCalendar('renderEvent',
                        {
                            title: title,
                            start: start,
                            end: end,
                            allDay: allDay
                        },
                        true // make the event "stick"
                    );
                    //$('.fc-day-content').html('<div style="position: relative; height: 0px;">xxx</div>');
                }
                calendar.fullCalendar('unselect');
            },
            editable: true,
        });
        // Calendar end
    }); 
```

在提示中看到“开始”和“结束”

# jquery - 如何在 Cslider 中停止鼠标悬停滑块？

> ID：16057145
> 
> 赞同：0
> 
> 时间：2013-04-17T10:01:17.480
> 
> 标签：jquery, slider

我在我的 html 网站中使用 Cslider，如何在鼠标悬停时停止滑块？

这是 Cslider 的 jQuery 代码 >

[jquery.cslider.js](http://keyhan-plastic.ir/newtemp/js/jquery.cslider.js)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:43:29.317

**要让它在悬停时暂停，请将这些行添加到 _loadEvents 函数中：**

```
this.$slides.on({
mouseenter: function(){
if( _self.options.autoplay ) {
clearTimeout( _self.slideshow );
}
},
mouseleave: function(){
var default_interval = _self.options.interval;
if(_self.options.autoplay ) {
_self.options.interval = 500;
_self._startSlideshow();
_self.options.interval = default_interval;
}
}
}); 
```

假设您正在使用[视差内容滑块](http://tympanus.net/Development/ParallaxContentSlider/)

# objective-c - 将核心数据与自定义类集成

> ID：16057149
> 
> 赞同：0
> 
> 时间：2013-04-17T10:01:26.193
> 
> 标签：objective-c, core-data, inheritance, subclass, superclass

我有一个名为**Car**的核心数据托管对象模型，它看起来像这样：

。H

```
@property (nonatomic, strong) NSString *name; 
```

.m

```
@dynamic name; 
```

我有一个名为**CarCache**的自定义类，用于缓存下载的汽车详细信息，如下所示：

。H

```
@property(nonatomic,copy) NSString *name; 
```

使用此实现进行持久化：

.m

```
- (id)initWithCoder:(NSCoder *)coder
{
    if (self = [super init]){
        _name = [coder decodeObjectForKey:@"name"]; 
```

我想整合这两个模型，但想检查我不会遇到问题。

我应该让 CarCache 成为 Car 的子类吗？如果是这样，我是否需要重写当前的持久化机制（即使用 NSCoder 来使用 Core Data）？或者我应该像往常一样初始化/持久化实例变量吗？例如

```
self.name = [coder decodeObjectForKey:@"name"]; 
```

这感觉不对，因为它是`@property`方法中的`init`方法。

也许：

```
super.name = [coder decodeObjectForKey:@"name"]; 
```

==== 更新

澄清我想要通过我的课程实现的`Car`目标`CarCache`。

`Car`用于在 Core Data 中本地存储 Car 对象的详细信息。

`CarCache`用于存储来自定期更改（例如位置）的 Web 服务的 Car 对象的详细信息。

目前，他们每个人都使用一个单独的模型，如果可能的话，我想避免。所以，我想整合这两个模型。

例如，我可以使 CarCache 成为 Car 的子类。我没有任何子类化核心数据模型的经验，所以我正在寻找建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:58:36.853

```
_name = [coder decodeObjectForKey:@"name"]; 
```

是正确的。

# iphone - 通过 UIPanGestureRecognizer 传递水龙头

> ID：16057152
> 
> 赞同：5
> 
> 时间：2013-04-17T10:01:32.630
> 
> 标签：iphone, ios, objective-c, uigesturerecognizer

我想检测整个屏幕上的滑动，但是，屏幕包含`UIButton`s，如果用户点击这些按钮之一，我希望触发 Touch Up Inside 事件。我在`UIView`屏幕顶部创建了一个，并`UIPanGestureRecognizer`在其上添加了一个来检测滑动，但是现在当我检测到它是点击而不是滑动时，我需要通过该视图传递手势。

我知道如何区分手势，但我不知道如何将它传递给下面的视图。

有人可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T16:43:52.437

感谢您的回答。该链接帮助我解决了部分问题。我已将按钮设置为我的 gestureRecognizer 视图的子视图，现在我可以从其中一个按钮开始滑动（并继续使用这些按钮）。我设法通过使用以下代码来防止按钮进入“向下”状态：

```
UIPanGestureRecognizer *swipe = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(swipeDetected:)];
swipe.maximumNumberOfTouches = 1;
swipe.delaysTouchesBegan =YES;
swipe.cancelsTouchesInView = YES;
[self.gestureRecognitionView addGestureRecognizer:swipe]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T10:08:42.567

UIGestureRecognizer cancelsTouchesInView 有一个 BOOL 属性。默认为是。将其设置为 NO ，触摸将传递给 UIView

也看看 [这个问题的解决方案](https://stackoverflow.com/questions/4825199/gesture-recognizer-and-button-actions)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T17:14:55.510

如果您想完全阻止识别器接收触摸，可以使用`UIGestureRecognizerDelegate`一种方法：`gestureRecognizer:shouldReceiveTouch:`

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch {
    // don't override any other recognizers
    if (gestureRecognizer != panRecognizer) {
        return YES;
    }

    CGPoint touchedPoint = [touch locationInView:self.someButton];

    return CGRectContainsPoint(self.someButton.bounds, touchedPoint) == NO;
} 
```

# r - 如何找到匹配多个条件的唯一事件

> ID：16057153
> 
> 赞同：0
> 
> 时间：2013-04-17T10:01:32.963
> 
> 标签：r, pattern-matching

我有一个df：

```
df
                           These Years are present Runlength  YearSpan                      Company
1                                             1920         1 1920-1920 AB Billingsfors-Långed - 122
2               1920  1929  1937  1952  1960  1975        56 1920-1975 AB Billingsfors-Långed - 123
3                     1920  1929  1937  1952  1960        41 1920-1960 AB Billingsfors-Långed - 125
4               1920  1929  1937  1952  1966  1969        50 1920-1969 AB Billingsfors-Långed - 124
5                                             1920         1 1920-1920 AB Billingsfors-Långed - 110
65  1920  1929  1937  1952  1960  1966  1969  1975        56 1920-1975           Billeruds AB - 103
66                          1920  1937  1952  1960        41 1920-1960           Billeruds AB - 113
67  1920  1929  1937  1952  1960  1966  1969  1975        56 1920-1975           Billeruds AB - 105
68                                      1920  1937        18 1920-1937           Billeruds AB - 100
69        1920  1929  1937  1952  1960  1966  1969        50 1920-1969            Billeruds AB - 99
70                                            1920         1 1920-1920            Billeruds AB - 96
250                                           1929         1 1929-1929       AB Nykvarns Bruk - 351
251             1929  1937  1952  1960  1966  1969        41 1929-1969       AB Nykvarns Bruk - 370
252                                           1929         1 1929-1929               AB Ohs B - 102
253                                           1929         1 1929-1929              AB Papyrus - 38
254                                           1929         1 1929-1929         AB Robertsfors - 302
255             1929  1937  1952  1960  1966  1969        41 1929-1969         AB Rottneros B - 285
590                               1966  1969  1975        10 1966-1975                   SIAB - 340
591                                     1966  1969         4 1966-1969                   SIAB - 342
592                               1966  1969  1975        10 1966-1975             Skånes C AB - 53
593                               1966  1969  1975        10 1966-1975       Stora Kopparberg - 355
594                               1966  1969  1975        10 1966-1975       Stora Kopparberg - 356
595                               1966  1969  1975        10 1966-1975   Svenska Cellulosa AB - 305 
```

`df`是一个汇总表，我想找出这些年之间有多少观察的长度。例如，我想找出 1920 年至 1929 年之间存在多少观测值，其中包括 1920 年和 1929 年。所以，我想找到独特观察的长度，其中`YearSpan`列`df`从 1920 年或 1929 年开始，以 1920 年或 1929 年结束。

我想到了类似的东西：

```
unique(grep("^1920",df[,"YearSpan"])+grep("^1929",df[,"YearSpan"])+grep("1920$",df[,"YearSpan"])+grep("1929$",df[,"YearSpan"])) 
```

但这显然是错误的......有什么建议吗？:)

```
dput(df)

structure(list(`These Years are present` = structure(c(1L, 10L, 
5L, 11L, 1L, 8L, 26L, 8L, 24L, 7L, 1L, 36L, 41L, 36L, 36L, 36L, 
41L, 92L, 91L, 92L, 92L, 92L, 92L), .Label = c("1920", "1920  1929", 
"1920  1929  1937", "1920  1929  1937  1952", "1920  1929  1937  1952  1960", 
"1920  1929  1937  1952  1960  1966", "1920  1929  1937  1952  1960  1966  1969", 
"1920  1929  1937  1952  1960  1966  1969  1975", "1920  1929  1937  1952  1960  1969", 
"1920  1929  1937  1952  1960  1975", "1920  1929  1937  1952  1966  1969", 
"1920  1929  1937  1952  1966  1975", "1920  1929  1937  1960", 
"1920  1929  1937  1960  1966", "1920  1929  1937  1960  1969", 
"1920  1929  1937  1969  1975", "1920  1929  1937  1975", "1920  1929  1952", 
"1920  1929  1952  1960", "1920  1929  1952  1960  1966", "1920  1929  1952  1960  1966  1969", 
"1920  1929  1952  1960  1966  1969  1975", "1920  1929  1952  1960  1966  1975", 
"1920  1937", "1920  1937  1952", "1920  1937  1952  1960", "1920  1937  1952  1960  1966", 
"1920  1937  1952  1960  1966  1969", "1920  1937  1952  1960  1975", 
"1920  1937  1960", "1920  1937  1966  1969", "1920  1952", "1920  1952  1960  1966  1969  1975", 
"1920  1960  1966  1969  1975", "1920  1975", "1929", "1929  1937", 
"1929  1937  1952", "1929  1937  1952  1960", "1929  1937  1952  1960  1966", 
"1929  1937  1952  1960  1966  1969", "1929  1937  1952  1960  1966  1969  1975", 
"1929  1937  1952  1960  1966  1975", "1929  1937  1952  1966", 
"1929  1937  1952  1966  1969", "1929  1937  1952  1966  1969  1975", 
"1929  1937  1952  1966  1975", "1929  1937  1960", "1929  1937  1960  1966  1969", 
"1929  1937  1960  1966  1975", "1929  1952", "1929  1952  1960  1966", 
"1929  1960", "1929  1960  1966  1969", "1929  1966  1969", "1937", 
"1937  1952", "1937  1952  1960", "1937  1952  1960  1966", "1937  1952  1960  1966  1969", 
"1937  1952  1960  1966  1969  1975", "1937  1952  1960  1966  1975", 
"1937  1952  1960  1969", "1937  1952  1975", "1937  1960", "1937  1960  1966", 
"1937  1960  1966  1969", "1937  1960  1966  1969  1975", "1937  1966  1969  1975", 
"1937  1969", "1952", "1952  1960", "1952  1960  1966", "1952  1960  1966  1969", 
"1952  1960  1966  1969  1975", "1952  1960  1966  1975", "1952  1960  1969", 
"1952  1960  1969  1975", "1952  1960  1975", "1952  1966  1969", 
"1952  1966  1969  1975", "1952  1969  1975", "1952  1975", "1960", 
"1960  1966", "1960  1966  1969", "1960  1966  1969  1975", "1960  1966  1975", 
"1960  1969", "1966", "1966  1969", "1966  1969  1975", "1966  1975", 
"1969", "1969  1975", "1975"), class = "factor"), Runlength = c(1, 
56, 41, 50, 1, 56, 41, 56, 18, 50, 1, 1, 41, 1, 1, 1, 41, 10, 
4, 10, 10, 10, 10), YearSpan = structure(c(1L, 8L, 5L, 7L, 1L, 
8L, 5L, 8L, 3L, 7L, 1L, 9L, 14L, 9L, 9L, 9L, 14L, 33L, 32L, 33L, 
33L, 33L, 33L), .Label = c("1920-1920", "1920-1929", "1920-1937", 
"1920-1952", "1920-1960", "1920-1966", "1920-1969", "1920-1975", 
"1929-1929", "1929-1937", "1929-1952", "1929-1960", "1929-1966", 
"1929-1969", "1929-1975", "1937-1937", "1937-1952", "1937-1960", 
"1937-1966", "1937-1969", "1937-1975", "1952-1952", "1952-1960", 
"1952-1966", "1952-1969", "1952-1975", "1960-1960", "1960-1966", 
"1960-1969", "1960-1975", "1966-1966", "1966-1969", "1966-1975", 
"1969-1969", "1969-1975", "1975-1975"), class = "factor"), Company = structure(c(2L, 
3L, 5L, 4L, 1L, 186L, 196L, 188L, 183L, 215L, 213L, 77L, 78L, 
79L, 93L, 96L, 101L, 562L, 564L, 567L, 595L, 596L, 637L), .Label = c("AB Billingsfors-Långed - 110", 
"AB Billingsfors-Långed - 122", "AB Billingsfors-Långed - 123", 
"AB Billingsfors-Långed - 124", "AB Billingsfors-Långed - 125", 
"AB Billingsfors-Långed - 126", "AB Billingsfors-Långed - 127", 
"AB Billingsfors-Långed - 128", "AB Billingsfors-Långed - 130", 
"AB Billingsfors-Långed - 131", "AB Billingsfors-Långed - 246", 
"AB Brusafors -Hfors - 143", "AB Brusafors -Hfors - 15", "AB Brusafors -Hfors - 183", 
"AB Brusafors -Hfors - 210", "AB Brusafors -Hfors - 234", "AB Brusafors -Hfors - 236", 
"AB Brusafors -Hfors - 237", "AB Brusafors -Hfors - 24", "AB Brusafors -Hfors - 34", 
"AB Brusafors -Hfors - 350", "AB Bökholms Sulfitfabrik - 100", 
"AB Bökholms Sulfitfabrik - 196", "AB Eda Bruk - 75", "AB Eda Bruk - 76", 
"AB Ellingeverken - 12", "AB Emsfors B - 337", "AB Emsfors B - 341", 
"AB Finsjö PB - 13", "AB Finsjö PB - 14", "AB Fors B - 216", 
"AB Fors B - 367", "AB Göteborg-Dals PB - 153", "AB Göteborg-Dals PB - 154", 
"AB Göteborg-Dals PB - 155", "AB Göteborg-Dals PB - 156", "AB Högfors - 158", 
"AB Högfors - 185", "AB Högfors - 294", "AB Iggesunds B - 186", 
"AB Iggesunds B - 187", "AB Iggesunds B - 188", "AB Iggesunds B - 189", 
"AB Iggesunds B - 190", "AB Iggesunds B - 191", "AB Iggesunds B - 357", 
"AB Iggesunds B - 8", "AB Industripapp - 362", "AB Klippans FinpB - 120", 
"AB Klippans FinpB - 196", "AB Klippans FinpB - 197", "AB Klippans FinpB - 199", 
"AB Klippans FinpB - 200", "AB Klippans FinpB - 201", "AB Klippans FinpB - 202", 
"AB Klippans FinpB - 203", "AB Klippans FinpB - 206", "AB Klippans FinpB - 210", 
"AB Klippans FinpB - 268", "AB Klippans FinpB - 269", "AB Klippans FinpB - 333", 
"AB Klippans FinpB - 337", "AB Klippans FinpB - 341", "AB Klippans FinpB - 54", 
"AB Klippans FinpB - 55", "AB Klippans FinpB - 56", "AB Konstläderf - 366", 
"AB Laxå PB - 227", "AB Laxå PB - 252", "AB Mariedals B - 229", 
"AB Mölnbacka-Trysil - 132", "AB Mölnbacka-Trysil - 379", "AB Mölnbacka-Trysil - 380", 
"AB Nol-Tingstad - 366", "AB Nykvarns Bruk - 147", "AB Nykvarns Bruk - 262", 
"AB Nykvarns Bruk - 351", "AB Nykvarns Bruk - 370", "AB Ohs B - 102", 
"AB Ohs B - 104", "AB Ohs B - 114", "AB Papyrus - 158", "AB Papyrus - 162", 
"AB Papyrus - 191", "AB Papyrus - 254", "AB Papyrus - 278", "AB Papyrus - 279", 
"AB Papyrus - 280", "AB Papyrus - 308", "AB Papyrus - 372", "AB Papyrus - 373", 
"AB Papyrus - 374", "AB Papyrus - 38", "AB Robertsfors - 169", 
"AB Robertsfors - 242", "AB Robertsfors - 302", "AB Rottneros B - 124", 
"AB Rottneros B - 191", "AB Rottneros B - 283", "AB Rottneros B - 284", 
"AB Rottneros B - 285", "AB Rottneros B - 286", "AB Rottneros B - 287", 
"AB Rottneros B - 288", "AB Rottneros B - 289", "AB Rottneros B - 290", 
"AB Scharins Söner - 231", "AB Scharins Söner - 277", "AB Scharins Söner - 31", 
"AB Scharins Söner - 323", "AB Scharins Söner - 324", "AB Scharins Söner - 329", 
"AB Scharins Söner - 330", "AB Scharins Söner - 332", "AB Scharins Söner - 36", 
"AB Skellefteå TMF - 329", "AB Statens skogsindustrier - 175", 
"AB Statens skogsindustrier - 20", "AB Statens skogsindustrier - 78", 
"AB Statens skogsindustrier - 80", "AB Statens skogsindustrier - 81", 
"AB Statens skogsindustrier - 82", "AB Statens skogsindustrier - 83", 
"AB Statens skogsindustrier - 84", "AB Statens skogsindustrier - 85", 
"AB Sture Ljungdahl - 227", "AB Sture Ljungdahl - 228", "AB Sundhagsfors B - 191", 
"AB Sundhagsfors B - 333", "AB Sundhagsfors B - 64", "AB Svensk Papp - 197", 
"AB Svensk Papp - 278", "AB Svensk Papp - 46", "AB Svensk Papp - 55", 
"AB Svensk Papp - 56", "AB Svensk Papp - 59", "AB Tegefors Verk - 219", 
"AB Tegefors Verk - 220", "AB Tegefors Verk - 267", "AB Thurbo - 216", 
"AB Tollare PB - 193", "AB Tollare PB - 269", "AB Tollare PB - 333", 
"AB Tollare PB - 65", "AB Tollare PB - 66", "AB Träkol - 185", 
"AB Träkol - 259", "AB Träkol - 70", "AB Tumba B - 67", "AB Tumba B - 68", 
"AB Tärefors S - 120", "AB Tärefors S - 47", "AB Umeå TMF-ER - 330", 
"AB Upperuds TMF - 71", "AB Upperuds TMF - 77", "AB Walltex - 47", 
"AB Walltex - 71", "AB Walltex - 77", "AB Vaplans TS - 139", 
"AB Ytterstfors-Munks - 294", "AB Ytterstfors-Munks - 295", "AB Östanå PB - 203", 
"AB Östanå PB - 204", "AB Östrands SFA - 301", "AdolfsForss AB - 1", 
"Alstermo B AB - 2", "Alstermo B AB - 3", "Alstermo B AB - 4", 
"Ankarsviks Å AB - 324", "Ankarsviks Å AB - 332", "Bengtsfors Sulfit AB - 10", 
"BergForss AB - 5", "Bergvik o Ala N AB - 188", "Bergvik o Ala N AB - 20", 
"Bergvik o Ala N AB - 218", "Bergvik o Ala N AB - 296", "Bergvik o Ala N AB - 308", 
"Bergvik o Ala N AB - 347", "Bergvik o Ala N AB - 6", "Bergvik o Ala N AB - 7", 
"Bergvik o Ala N AB - 8", "Bergvik o Ala N AB - 9", "Billeruds AB - 100", 
"Billeruds AB - 101", "Billeruds AB - 102", "Billeruds AB - 103", 
"Billeruds AB - 104", "Billeruds AB - 105", "Billeruds AB - 106", 
"Billeruds AB - 107", "Billeruds AB - 108", "Billeruds AB - 109", 
"Billeruds AB - 110", "Billeruds AB - 111", "Billeruds AB - 112", 
"Billeruds AB - 113", "Billeruds AB - 127", "Billeruds AB - 134", 
"Billeruds AB - 137", "Billeruds AB - 196", "Billeruds AB - 250", 
"Billeruds AB - 313", "Billeruds AB - 338", "Billeruds AB - 349", 
"Billeruds AB - 87", "Billeruds AB - 88", "Billeruds AB - 89", 
"Billeruds AB - 90", "Billeruds AB - 91", "Billeruds AB - 92", 
"Billeruds AB - 94", "Billeruds AB - 95", "Billeruds AB - 96", 
"Billeruds AB - 98", "Billeruds AB - 99", "Björknäs N S AB - 185", 
"Björknäs N S AB - 307", "Björkå AB - 11", "Björkå AB - 231", 
"Bowaters svenska Trämassefabriker - 312", "Bowaters svenska Trämassefabriker - 329", 
"Bowaters svenska Trämassefabriker - 330", "Bowaters svenska Trämassefabriker - 331", 
"Bure AB - 11", "Bure AB - 231", "Bure AB - 329", "Byhamns C AB - 219", 
"Byhamns C AB - 302", "Bäckhammars Bruk - 131", "Bäckhammars Bruk - 132", 
"Bäckhammars Bruk - 133", "Bäckhammars Bruk - 379", "Djupafors Fabriks AB - 186", 
"Djupafors Fabriks AB - 191", "Djupafors Fabriks AB - 192", "Djupafors Fabriks AB - 193", 
"Djupafors Fabriks AB - 30", "Djupafors Fabriks AB - 46", "Djupafors Fabriks AB - 56", 
"Dynäs AB - 248", "Dynäs AB - 266", "Dynäs AB - 270", "Dynäs AB - 79", 
"Eds Cellulosaf-s AB - 134", "Eds Cellulosaf-s AB - 96", "Fengersfors B AB - 135", 
"Fengersfors B AB - 136", "Figeholms B - 16", "Figeholms B - 17", 
"Fiskeby AB - 138", "Fiskeby AB - 139", "Fiskeby AB - 141", "Fiskeby AB - 142", 
"Fiskeby AB - 143", "Fiskeby AB - 144", "Fiskeby AB - 145", "Fiskeby AB - 146", 
"Fiskeby AB - 147", "Fiskeby AB - 148", "Fiskeby AB - 149", "Fiskeby AB - 150", 
"Fiskeby AB - 193", "Fiskeby AB - 236", "Fiskeby AB - 298", "Fiskeby AB - 308", 
"Fiskeby AB - 350", "Fiskeby AB - 359", "Fiskeby AB - 361", "Fiskeby AB - 362", 
"Fiskeby AB - 370", "Fiskeby AB - 69", "Fiskeby AB - 97", "Forsmarks CF - 151", 
"Forss AB - 168", "Forss AB - 266", "Forss AB - 271", "Forss AB - 272", 
"Forss AB - 346", "Forsså Bruks AB - 15", "Forsså Bruks AB - 16", 
"Forsså Bruks AB - 234", "Forsså Bruks AB - 27", "Forsså Bruks AB - 29", 
"Forsviks AB - 152", "Fridafors Fabriks AB - 193", "Fridafors Fabriks AB - 333", 
"Fridafors Fabriks AB - 342", "Fridafors Fabriks AB - 64", "Gamlestadens PB AB - 153", 
"Graningeverkens AB - 158", "Graningeverkens AB - 159", "Graningeverkens AB - 185", 
"Graningeverkens AB - 278", "Gransholms AB - 228", "Grycksbo PB AB - 349", 
"Grycksbo PB AB - 350", "Grycksbo PB AB - 351", "Gustafsfors F-ERS AB - 129", 
"Gustafsfors F-ERS AB - 130", "Gustafsfors F-ERS AB - 131", "Gustafsfors F-ERS AB - 349", 
"Göteborgs Handelsbank - 374", "Göteborgs PB AB - 154", "Heffners AB - 46", 
"Hellefors B AB - 118", "Hellefors B AB - 119", "Hellefors B AB - 120", 
"Hellefors B AB - 121", "Hellefors B AB - 197", "Hellefors B AB - 86", 
"HissmoForss AB - 115", "HissmoForss AB - 168", "HissmoForss AB - 169", 
"HissmoForss AB - 267", "Hjälmare Ko Slussv A - 18", "Holmens B o F AB - 130", 
"Holmens B o F AB - 160", "Holmens B o F AB - 161", "Holmens B o F AB - 162", 
"Holmens B o F AB - 164", "Holmens B o F AB - 166", "Holmens B o F AB - 167", 
"Holmens B o F AB - 168", "Holmens B o F AB - 169", "Holmens B o F AB - 170", 
"Holmens B o F AB - 171", "Holmens B o F AB - 172", "Holmens B o F AB - 174", 
"Holmens B o F AB - 176", "Holmens B o F AB - 230", "Holmens B o F AB - 242", 
"Holmens B o F AB - 267", "Holmens B o F AB - 272", "Holmens B o F AB - 302", 
"Holmens B o F AB - 328", "Holmens B o F AB - 346", "Holmens B o F AB - 361", 
"Holmens B o F AB - 73", "Holmens B o F AB - 83", "Holmsunds AB - 222", 
"Holmsunds AB - 312", "Hyltebruks AB - 178", "Hyltebruks AB - 179", 
"Hyltebruks AB - 180", "Hyltebruks AB - 181", "Hyltebruks AB - 272", 
"Hyltebruks AB - 304", "Håvreströms AB - 206", "Håvreströms AB - 207", 
"Håvreströms AB - 208", "Håvreströms AB - 250", "Håvreströms AB - 272", 
"Håvreströms AB - 361", "Högbroforsens Ind AB - 185", "Högbroforsens Ind AB - 259", 
"Inlands AB - 140", "Inlands AB - 193", "Inlands AB - 194", "Inlands AB - 30", 
"Inlands AB - 325", "Inlands AB - 65", "J A Enhörnings T AB - 325", 
"J H Munktells PF AB - 166", "J H Munktells PF AB - 236", "J H Munktells PF AB - 262", 
"J H Munktells PF AB - 349", "J H Munktells PF AB - 350", "J H Munktells PF AB - 351", 
"J H Munktells PF AB - 96", "Kalix t ind AB - 266", "Kalix t ind AB - 78", 
"Karlholms AB - 19", "Karlholms AB - 20", "Karlholms AB - 85", 
"Karlholms AB - 9", "Karlsfors B AB - 21", "Karlsfors B AB - 22", 
"Katrinedal - 23", "KatrineForss AB - 145", "KatrineForss AB - 169", 
"KatrineForss AB - 205", "KatrineForss AB - 258", "KatrineForss AB - 360", 
"KatrineForss AB - 361", "KatrineForss AB - 362", "KatrineForss AB - 363", 
"KatrineForss AB - 364", "KatrineForss AB - 365", "KatrineForss AB - 53", 
"Kohlsäters AB - 183", "Kohlsäters AB - 24", "Kohlsäters AB - 25", 
"Konga AB - 26", "KopparForss AB - 212", "KopparForss AB - 213", 
"KopparForss AB - 214", "KopparForss AB - 215", "Koppoms PF AB - 183", 
"Koppoms PF AB - 234", "Koppoms PF AB - 291", "Koppoms PF AB - 292", 
"Koppoms PF AB - 293", "Korsnäs AB - 216", "Korsnäs AB - 217", 
"Korsnäs AB - 218", "Korsnäs AB - 221", "Korsnäs AB - 222", "Korsnäs AB - 223", 
"Korsnäs AB - 224", "Korsnäs AB - 268", "Korsnäs AB - 312", "Korsnäs AB - 313", 
"Korsnäs AB - 359", "Korsnäs AB - 7", "KramForss AB - 308", "KramForss AB - 309", 
"KramForss AB - 310", "Kroppstadfors B - 15", "Kroppstadfors B - 28", 
"Lagamills AB - 227", "Lagamills AB - 251", "Lagamills AB - 252", 
"Lagerfors B - 225", "Lagerfors B - 226", "LennartsForss AB - 285", 
"LennartsForss AB - 30", "LennartsForss AB - 65", "Lessebo AB - 200", 
"Lilla Edets Pappersbruk AB - 32", "Lilla Edets Pappersbruk AB - 33", 
"Lilla Edets Pappersbruk AB - 331", "Ljungaskog AB - 282", "Långasjönäs PB - 201", 
"Långasjönäs PB - 209", "Långrörs AB - 218", "M Petersen & sön AS - 133", 
"M Petersen & sön AS - 134", "Mackmyra SFI AB - 346", "Mackmyra SFI AB - 347", 
"Marbäcks F AB - 34", "Marbäcks F AB - 35", "Marbäcks F AB - 40", 
"Marma-Långrörs AB - 159", "Marma-Långrörs AB - 217", "Marma-Långrörs AB - 218", 
"Marma-Långrörs AB - 219", "Marma-Långrörs AB - 221", "Masonite AB - 176", 
"Masonite AB - 229", "Midnäs Ind AB - 41", "Mo o Domsjö AB - 223", 
"Mo o Domsjö AB - 230", "Mo o Domsjö AB - 231", "Mo o Domsjö AB - 232", 
"Mo o Domsjö AB - 233", "Mo o Domsjö AB - 235", "Mo o Domsjö AB - 236", 
"Mo o Domsjö AB - 237", "Mo o Domsjö AB - 240", "Mo o Domsjö AB - 241", 
"Mo o Domsjö AB - 268", "Mo o Domsjö AB - 269", "Mo o Domsjö AB - 277", 
"Mo o Domsjö AB - 66", "Moälvens TS - 326", "Moälvens TS - 36", 
"Munkedals AB - 279", "Munkedals AB - 37", "Munkedals AB - 38", 
"Munkedals AB - 39", "Munksjö AB - 113", "Munksjö AB - 142", 
"Munksjö AB - 205", "Munksjö AB - 243", "Munksjö AB - 244", "Munksjö AB - 245", 
"Munksjö AB - 246", "Munksjö AB - 247", "Munksjö AB - 248", "Munksjö AB - 250", 
"Munksjö AB - 251", "Munksjö AB - 252", "Munksjö AB - 253", "Munksjö AB - 254", 
"Munksjö AB - 255", "Munksjö AB - 256", "Munksjö AB - 257", "Munksjö AB - 265", 
"Munksjö AB - 266", "Munksjö AB - 270", "Munksjö AB - 289", "Munksjö AB - 338", 
"Munksjö AB - 374", "Munksunds AB - 294", "Munksunds AB - 295", 
"Munksunds AB - 296", "Munksunds AB - 307", "Nensjö C AB - 248", 
"Nensjö C AB - 309", "Nensjö C AB - 7", "Nils Hobro - 239", "Nils Hobro - 240", 
"NissaForss AB/G Lord - 235", "NissaForss AB/G Lord - 40", "Nissaströms AB - 260", 
"Nissaströms AB - 261", "Nissaströms AB - 291", "Nordmalings Å AB - 230", 
"Norrlands Skogsägares Cellulosa AB - 115", "Norrlands Skogsägares Cellulosa AB - 199", 
"Norrlands Skogsägares Cellulosa AB - 200", "Norrlands Skogsägares Cellulosa AB - 263", 
"Norrlands Skogsägares Cellulosa AB - 264", "Norrlands Skogsägares Cellulosa AB - 265", 
"Norrlands Skogsägares Cellulosa AB - 266", "Norrlands Skogsägares Cellulosa AB - 267", 
"Norrlands Skogsägares Cellulosa AB - 268", "Norrlands Skogsägares Cellulosa AB - 269", 
"Norrlands Skogsägares Cellulosa AB - 270", "Norrlands Skogsägares Cellulosa AB - 271", 
"Norrlands Skogsägares Cellulosa AB - 311", "Nyboholms AB - 202", 
"Nyboholms AB - 210", "Nyboholms AB - 211", "Nyboholms AB - 235", 
"Nymölla AB - 42", "Nymölla AB - 43", "Nättraby B AB - 43", "Nättraby B AB - 44", 
"Ockelbo Pappf AB - 74", "Oppboga AB - 380", "Oppboga AB - 381", 
"Oppboga AB - 382", "Oskarström SFI M AB - 45", "Pilgrimsstads AB - 358", 
"Qvills B AB - 211", "Ranå B AB - 50", "Ranå B AB - 51", "Rockhammars B AB - 45", 
"Rockhammars B AB - 46", "Rockhammars B AB - 47", "Rockhammars B AB - 57", 
"Rockhammars B AB - 64", "Rockhammars B AB - 65", "Rockhammars B AB - 72", 
"Rockhammars B AB - 86", "Rällså såg O PPF - 48", "Rällså såg O PPF - 49", 
"Sandvikens C AB - 265", "Sandvikens C AB - 373", "Sannes Söners AB - 184", 
"Sannes Söners AB - 235", "Sannes Söners AB - 260", "Sannes Söners AB - 291", 
"SIAB - 333", "SIAB - 334", "SIAB - 335", "SIAB - 336", "SIAB - 337", 
"SIAB - 338", "SIAB - 339", "SIAB - 340", "SIAB - 341", "SIAB - 342", 
"Skånes C AB - 360", "Skånes C AB - 52", "Skånes C AB - 53", 
"Skånes C AB - 54", "Skönviks AB - 297", "Skönviks AB - 298", 
"Skönviks AB - 299", "Skönviks AB - 300", "SLT Group - 374", 
"SLT Group - 375", "SLT Group - 376", "Stjernfors-Ställdalen - 320", 
"Stjernfors-Ställdalen - 354", "Stjernfors-Ställdalen - 355", 
"Stjernfors-Ställdalen - 356", "Stora Kopparberg - 179", "Stora Kopparberg - 205", 
"Stora Kopparberg - 313", "Stora Kopparberg - 342", "Stora Kopparberg - 343", 
"Stora Kopparberg - 344", "Stora Kopparberg - 345", "Stora Kopparberg - 346", 
"Stora Kopparberg - 347", "Stora Kopparberg - 348", "Stora Kopparberg - 349", 
"Stora Kopparberg - 350", "Stora Kopparberg - 351", "Stora Kopparberg - 352", 
"Stora Kopparberg - 353", "Stora Kopparberg - 355", "Stora Kopparberg - 356", 
"Stora Kopparberg - 7", "Storviks SFI AB - 214", "Strömnäs B AB - 248", 
"Strömnäs B AB - 338", "Strömnäs B AB - 339", "Strömnäs B AB - 340", 
"Strömnäs B AB - 94", "Strömnäs B AB - 95", "Ströms B AB - 318", 
"Ströms B AB - 357", "Ströms B AB - 358", "Strömsfors TS - 63", 
"Sulfit AB Göta - 159", "Sulfit AB Göta - 221", "Sulfit AB Göta - 288", 
"Sunds AB - 318", "Sundsvalls C AB - 319", "Sundsvalls C AB - 320", 
"Svaneholms AB - 241", "Svaneholms AB - 274", "Svaneholms AB - 275", 
"Svaneholms AB - 276", "Svaneholms AB - 277", "Svanö AB - 274", 
"Svartviks AB - 303", "Svartviks AB - 304", "Svenska Cellulosa AB - 145", 
"Svenska Cellulosa AB - 169", "Svenska Cellulosa AB - 176", "Svenska Cellulosa AB - 222", 
"Svenska Cellulosa AB - 271", "Svenska Cellulosa AB - 294", "Svenska Cellulosa AB - 295", 
"Svenska Cellulosa AB - 296", "Svenska Cellulosa AB - 297", "Svenska Cellulosa AB - 298", 
"Svenska Cellulosa AB - 299", "Svenska Cellulosa AB - 300", "Svenska Cellulosa AB - 301", 
"Svenska Cellulosa AB - 304", "Svenska Cellulosa AB - 305", "Svenska Cellulosa AB - 307", 
"Svenska Cellulosa AB - 308", "Svenska Cellulosa AB - 309", "Svenska Cellulosa AB - 310", 
"Svenska Cellulosa AB - 311", "Svenska Cellulosa AB - 312", "Svenska Cellulosa AB - 314", 
"Svenska Cellulosa AB - 316", "Svenska Cellulosa AB - 317", "Svenska Cellulosa AB - 318", 
"Svenska Cellulosa AB - 320", "Svenska Cellulosa AB - 321", "Svenska Cellulosa AB - 322", 
"Svenska Cellulosa AB - 323", "Svenska Cellulosa AB - 324", "Svenska Cellulosa AB - 331", 
"Svenska Cellulosa AB - 332", "Svenska Cellulosa AB - 355", "Svenska Cellulosa AB - 357", 
"Svenska Cellulosa AB - 7", "Svenska Cellulosa AB - 95", "Sörstafors PB AB - 60", 
"Sörstafors PB AB - 61", "Sörstafors PB AB - 62", "Torpshammars AB - 326", 
"Torpshammars AB - 327", "Torpshammars AB - 331", "Torsviks S AB - 67", 
"Tvärfallets el för - 164", "Uddeholmsbolaget - 376", "Uddeholmsbolaget - 377", 
"Uddeholmsbolaget - 378", "Uddeholmsbolaget - 379", "Uddeholmsbolaget - 380", 
"Ungers Ind AB - 217", "Utansjö C AB - 159", "Utansjö C AB - 221", 
"Vargöns AB - 115", "Vargöns AB - 116", "Vargöns AB - 117", "Vargöns AB - 263", 
"Vikmanshytte B AB - 367", "Vivstavarvs AB - 313", "Vivstavarvs AB - 314", 
"Vivstavarvs AB - 315", "Vivstavarvs AB - 316", "Vivstavarvs AB - 345", 
"Västerviks PB AB - 367", "Västerviks PB AB - 368", "Åmotsfors PB AB - 289", 
"Åmotsfors PB AB - 290", "ÄggForss AB - 263", "Älvsborgs PF AB - 369", 
"Örebro Pappersbruks AB - 370", "Örebro Pappersbruks AB - 371", 
"Örebro Pappersbruks AB - 372", "Örvikens AB - 273"), class = "factor")), .Names = c("These Years are present", 
"Runlength", "YearSpan", "Company"), row.names = c(1L, 2L, 3L, 
4L, 5L, 65L, 66L, 67L, 68L, 69L, 70L, 250L, 251L, 252L, 253L, 
254L, 255L, 590L, 591L, 592L, 593L, 594L, 595L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:51:23.773

不清楚您要查找的内容，但如果您的条件如此有限，则很容易将它们定义为“1920-1920”、“1920-1929”或“1929-1929”。

因此，您可以像这样对数据进行子集化（假设您甚至想要首先进行子集化）：

```
df[grepl("1920-1920|1920-1929|1929-1929", df$YearSpan), ]
df[df$YearSpan %in% c("1920-1920", "1920-1929", "1929-1929"), ] 
```

两者都会产生：

```
#     These Years are present Runlength  YearSpan                      Company
# 1                      1920         1 1920-1920 AB Billingsfors-Långed - 122
# 5                      1920         1 1920-1920 AB Billingsfors-Långed - 110
# 70                     1920         1 1920-1920            Billeruds AB - 96
# 250                    1929         1 1929-1929       AB Nykvarns Bruk - 351
# 252                    1929         1 1929-1929               AB Ohs B - 102
# 253                    1929         1 1929-1929              AB Papyrus - 38
# 254                    1929         1 1929-1929         AB Robertsfors - 302 
```

目前尚不清楚您到底想要达到什么目的。将您想要的输出作为问题的一部分发布将是有益的。

* * *

但是，既然您写道您“想找出这些年之间有多少次观察的长度”，也许您只是在寻找`table`？

```
> table(df$YearSpan)[c("1920-1920", "1920-1929", "1929-1929")]

1920-1920 1920-1929 1929-1929 
        3         0         4 
```

# r - 向量中一对 1 出现多少次

> ID：16057158
> 
> 赞同：1
> 
> 时间：2013-04-17T10:01:48.780
> 
> 标签：r

我有个问题。

我有一个向量，由 0 或 1 组成 - 例如 (011011111011100001111)。在 R 中，我需要弄清楚，如何计算向量 2 1、3 1、4 1 等出现的次数。在这个示例向量中，我有 1 乘以 11、1 乘以 111、1 乘以 1111 和 1 乘以 11111。

非常感谢，彼得

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T10:11:52.703

我假设你有一个像`c(0, 1, 1, 0...)`.

这是使用`table`and的解决方案`rle`。我还提供了一些更长的示例数据，使其更有趣。

```
set.seed(1)
myvec <- sample(c(0, 1), 100, replace = TRUE)
temp <- rle(myvec)
table(temp$lengths[temp$values == 1])
# 
#  1  2  3  4  6 
# 15  8  1  2  1 
```

* * *

如果，确实，你正在处理一个疯狂的 1 和 0 字符串，只需使用`strsplit`并遵循与上述相同的逻辑。

```
myvec <- "00110111100010101101101000001001001110101111110011010000011010001001"
myvec <- as.numeric(strsplit(myvec, "")[[1]]) 
```

在这里，我已转换为数字，但这只是为了让您可以使用与之前相同的代码。您也可以`rle`在字符向量上使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T10:12:52.857

`rle`是你的朋友：

```
vec <-c(0,1,1,0,1,1,1,1,1,0,1,1,1,0,0,0,0,1,1,1,1)
res <-data.frame(table(rle(vec)))
res[res$values==1,]

   lengths values Freq
6        1      1    0
7        2      1    1
8        3      1    1
9        4      1    1
10       5      1    1 
```

# java - registerColumnType 和 registerHibernateType 的区别

> ID：16057165
> 
> 赞同：0
> 
> 时间：2013-04-17T10:02:13.600
> 
> 标签：java, hibernate

我第一次尝试扩展 Hibernate 对话框（PostgreSQL82Dialect）。阅读文档后，我仍然不明白。

`registerColumnType`和 和有什么不一样`registerHibernateType`？

请给一些提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:22:03.327

`registerHibernateType`用于定义hibernate支持的默认类型。

`registerColumnType` 可以为给定的类型代码和最大列长度注册一个类型。也就是说，registerColumnType 更详细地定义了一个 sql-type。

# jquery - jQuery 手风琴——点击展开，点击关闭

> ID：16057168
> 
> 赞同：0
> 
> 时间：2013-04-17T10:02:16.610
> 
> 标签：jquery, accordion, slide

我写的一些脚本有点麻烦。HTML 和 jQuery 如下所示。目前，如果您单击 .each-question 标题，它的答案会向下滑动。如果您单击另一个 .each-question 标题，则打开的答案会向上滑动，新的答案会向下滑动。但是，如果您单击已打开的同一答案的 .each-question 标题，则它无法向上滑动，而是向上滑动并向下滑动。

我想要它，所以如果您单击已经打开的答案的标题，它会向上滑动并保持不变。

```
$('.faq > .each-question').click(function() {
    $('.faq > .each-answer').slideUp('normal'); 
    $(this).next().slideDown('normal');
});
$('.faq > .each-answer').hide();

<div class="each-question"> Where do your ideas come from? </div>
<div class="each-answer"> Text for answer </div> 
```

更新——jsfiddle [http://jsfiddle.net/YZBLg/](http://jsfiddle.net/YZBLg/)

提前干杯，R

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:03:27.223

试试这个[jsfiddle](http://jsfiddle.net/mido_rizk007/YZBLg/1/)：

```
$('.faq > .each-question').click(function() {
    $('.faq > .each-answer').slideUp( 'slow'); 
    if($(this).next('.each-answer').is(':not(:visible)')){
        $(this).next('.each-answer').slideToggle('normal');
    }
});
$('.faq > .each-answer').hide(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:05:32.117

尝试使用`.slideToggle()`

```
$('.faq > .each-answer').slideToggle('normal'); 
$(this).next().slideToggle('normal'); 
```

# android - AndroidPlot：从 1 到 11 的域标签

> ID：16057175
> 
> 赞同：2
> 
> 时间：2013-04-17T10:02:50.387
> 
> 标签：android, axis-labels, androidplot

我已经在我的应用程序中实现了 AndroidPlot，它工作正常，除了 X 轴标签，它们从 0 到 10。我想显示 1 到 11。此外，不会出现 Y 轴上的标签。

我正在使用的代码：

```
import java.text.DecimalFormat;
import java.util.Arrays;
import android.app.Activity;
import android.content.Intent;
import android.graphics.Color;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;

import com.androidplot.series.XYSeries;
import com.androidplot.xy.LineAndPointFormatter;
import com.androidplot.xy.SimpleXYSeries;
import com.androidplot.xy.XYPlot;
import com.androidplot.xy.XYStepMode;

public class Scatter extends Activity {
    private XYPlot mySimpleXYPlot;

    //declare new arrays

   float[] one;
   float[] two;
   float[] three;
   Number[] series1Numbers; 
   Number[] series2Numbers;
   Number[] series3Numbers;
   String chainringCount;

    /** Called when the activity is first created. */
    @SuppressWarnings("deprecation")

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.scatter);

        Bundle bundle = this.getIntent().getExtras();
        one = bundle.getFloatArray("one");
        two = bundle.getFloatArray("two");
        three = bundle.getFloatArray("three");
        chainringCount=bundle.getString("CC");

        if (Integer.parseInt(chainringCount)==1){
            series1Numbers = new Number[one.length];

            for (int a=0; a<one.length; a++){
                series1Numbers[a]=one[a];
            }

            mySimpleXYPlot = (XYPlot) findViewById(R.id.mySimpleXYPlot);
            mySimpleXYPlot.setDomainStep(XYStepMode.SUBDIVIDE,11);
            mySimpleXYPlot.setDomainStep(XYStepMode.INCREMENT_BY_VAL,1);
            mySimpleXYPlot.setDomainValueFormat(new DecimalFormat("#"));
            mySimpleXYPlot.setTicksPerRangeLabel(13);
            mySimpleXYPlot.disableAllMarkup();
            mySimpleXYPlot.getBackgroundPaint().setAlpha(0);
            mySimpleXYPlot.getGraphWidget().getBackgroundPaint().setAlpha(0);
            mySimpleXYPlot.getGraphWidget().getGridBackgroundPaint().setAlpha(0);
            mySimpleXYPlot.setDomainLabel(getString(R.string.domainName));
            mySimpleXYPlot.setRangeLabel(getString(R.string.rangeName));

            XYSeries series1 = new SimpleXYSeries(Arrays.asList(series1Numbers), SimpleXYSeries.ArrayFormat.Y_VALS_ONLY, "#1"); 
            LineAndPointFormatter series1Format = new LineAndPointFormatter(Color.rgb(0, 200, 0), Color.rgb(0, 100, 0),null);                                  // fill color (none)
            mySimpleXYPlot.addSeries(series1, series1Format);

        }... 
```

![安卓绘图](https://i.stack.imgur.com/Ix8mG.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-27T03:41:57.593

您可以应用自定义格式化程序以使标签打印您想要的任何内容。在你的情况下，我相信这样的事情应该有效：

```
plot.setDomainValueFormat(new NumberFormat() {

            @Override
            public StringBuffer format(double d, StringBuffer sb, FieldPosition fp) {
                return sb.append((d + 1) + ""); // shortcut to convert d+1 into a String
            }

            // unused
            @Override
            public StringBuffer format(long l, StringBuffer stringBuffer, FieldPosition fieldPosition) { return null;}

            // unused
            @Override
            public Number parse(String s, ParsePosition parsePosition) { return null;}
}); 
```

# hibernate - 带有转换器的 selectOneMenu - java.io.NotSerializableException 错误

> ID：16057176
> 
> 赞同：0
> 
> 时间：2013-04-17T10:02:52.503
> 
> 标签：hibernate, jsf, jsf-2, primefaces

我有以下JSF表格：

```
...
<p:column>
    <h:outputText value="Image Id:" style="font-weight:bold; padding-right:10px" />
</p:column>
<p:column>
    <h:outputText value="#{syncCenterBean.selectedCRImageData.imId}" />
</p:column>
</p:row>                    
....                    
<p:row>
<p:column>
    <h:outputText value="Image Type" style="font-weight:bold; padding-right:10px" />
</p:column>
<p:column>
    <p:selectOneMenu id="imtype" value="#{syncCenterBean.cRImageType}" converter="#{imageTypeConvert}">
        <f:selectItem itemLabel="Select One" itemValue="" />
        <f:selectItems value="#{syncCenterBean.cRImageTypeList}" var="cRImageType" itemValue="#{cRImageType.imTypeId}" itemLabel="#{cRImageType.imTypeName}" />
    </p:selectOneMenu>
</p:column>
</p:row>
... 
```

所有这些都在选择数据表的一行时加载的对话框中。我有两个相关的 Hibernate 实体，如下所示：

CRImageData

```
@Entity
@Table(name = "imageviewer_crimagedata")
public class CRImageData implements Serializable  {

    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue
    @Column(name = "ImId")
    private Long imId;

    @Column(name = "ImName")
    private String imName;

    @Column(name = "ImTypeId")
    private Long imTypeId;

    @Column(name = "ImPatientId")
    private String imPatientId;

    @Column(name = "ImStatus")
    private String imStatus;

    @Column(name = "imFormat")
    private String imFormat;

    @ManyToOne
    @JoinColumn(name="ImTypeId",insertable=false,updatable=false)
    private CRImageType cRImageType; 
```

和 CRImageType

```
@Entity
@Table(name = "imageviewer_crimagetype")
public class CRImageType implements Serializable   {

    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue
    @Column(name = "ImTypeId")
    private Long imTypeId;

    @Column(name = "ImTypeName")
    private String imTypeName;

    @Column(name = "ImTypeDescription")
    private String imTypeDescription;

    @ManyToMany(cascade = {CascadeType.ALL})
    @JoinTable(name="imageviewer_imtype_variable", 
    joinColumns={@JoinColumn(name="ImTypeId")}, 
    inverseJoinColumns={@JoinColumn(name="VarId")})
    private Set<CRVariable> crvariables = new HashSet<CRVariable>();

    @OneToMany(mappedBy="cRImageType")
    private Set<CRImageData> cRImageData; 
```

我为 selectOneMenu 使用以下转换器：

```
@ViewScoped
@ManagedBean(name = "imageTypeConvert")
@FacesConverter(forClass=CRImageType.class,value="imageTypeConvert")
public class ImageTypeConvert implements Converter {

    @ManagedProperty(value="#{syncCenterBean}")
    private SyncCenterBean syncCenterBean;
    FacesContext context = FacesContext.getCurrentInstance();
    SyncCenterBean mybean =  (SyncCenterBean) context.getExternalContext().getSessionMap().get("syncCenterBean");

    @Override
    public Object getAsObject(FacesContext context, UIComponent component, String value{
        Long imTypeId = Long.parseLong(value.trim());   
        List<CRImageType> cRImageTypeList = mybean.getcRImageTypeList();
        for (CRImageType cRImageType:cRImageTypeList) {
            if(cRImageType.getImTypeId().compareTo(imTypeId)==0){
            return cRImageType;
        }
        }
        return null;    
    }

    @Override
    public String getAsString(FacesContext context, UIComponent component, Object value) {
        System.out.println("!!!!!! (2) Into getAsString");
        return Long.toString(((CRImageType) value).getImTypeId());
    }

    public SyncCenterBean getSyncCenterBean() {
        return syncCenterBean;
    }

    public void setSyncCenterBean(SyncCenterBean syncCenterBean) {
        this.syncCenterBean = syncCenterBean;
    }

} 
```

最后是我的 BackBean：

```
@ManagedBean(name = "syncCenterBean")
@ViewScoped
public class SyncCenterBean implements Serializable {
   @PostConstruct
   public void init(){
          cRImageTypeList = getImageTypesDB();
          cRImageType = new CRImageType();      

          cRImageDataList = populateImageOnlyToDataWarehouseList(getImageDataSOAP());

          cRImageDataListLocal = getImageDataDB();
    }
   ... 
```

但是当我尝试加载数据表时，出现以下错误：

```
javax.portlet.faces.BridgeException: javax.faces.FacesException:         com.forth.actions.ImageTypeConvert
at com.liferay.faces.bridge.BridgePhaseRenderImpl.execute(BridgePhaseRenderImpl.java:98)
at com.liferay.faces.bridge.BridgeImpl.doFacesRequest(BridgeImpl.java:99)
...
Caused by: java.io.NotSerializableException: com.forth.actions.ImageTypeConvert
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1156)
at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:326)
at java.util.HashMap.writeObject(HashMap.java:1001) 
```

有什么想法我一直在做错吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T12:30:44.183

视图范围的 bean 必须是可序列化的，因为它们存储在 HTTP 会话中，而 HTTP 会话又可以以序列化形式存储在磁盘文件系统中，而不是作为内存中的普通 Java 对象引用，或者通过网络传输以在服务器中共享会话簇。

*要么*制作`ImageTypeConvert`一个请求范围的bean，而不是视图范围的bean，这样它就不需要被序列化：

```
@RequestScoped
@ManagedBean
public class ImageTypeConvert implements Converter { 
```

*或者*让它实现可序列化：

```
@ViewScoped
@ManagedBean
public class ImageTypeConvert implements Converter, Serializable { 
```

顺便说一句，您遇到了一个严重的设计问题：您永远不应该，永远不要将其分配`FacesContext`为类的实例变量。这不是线程安全的。将这些`context`和`mybean`声明移到方法块内。

另请注意，我删除了`@FacesConverter`注释，因为如果您将其用作托管 bean，则它从未被使用过`#{imageTypeConvert}`。另请注意，我删除了`name`托管 bean，因为您基本上是在重复默认值。

# c# - WPF 如何从 ViewModel 访问控件

> ID：16057184
> 
> 赞同：0
> 
> 时间：2013-04-17T10:03:14.300
> 
> 标签：c#, wpf, xaml, mvvm, windows-phone-7.1

Windows Phone 开发新手。有人可以帮助我了解如何访问 ViewModel 上的某个控件。

示例场景：我有一个列表框，我想从我的视图模型访问列表框以添加一些东西。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T10:09:07.923

我认为你从错误的角度来处理这个问题。您不想从 ViewModel 访问控件本身。而是将 ListBox 的 ItemsSource 绑定到 ViewModel 上的一个属性。然后你可以直接向集合中添加一些东西。

# angularjs - angularjs：在 ui-bootstrap 模式中使用指令

> ID：16057187
> 
> 赞同：2
> 
> 时间：2013-04-17T10:03:29.273
> 
> 标签：angularjs, angularjs-directive, angular-ui-bootstrap

我不知道如何从使用 $dialog 服务创建的模式中调用指令。该指令还应该能够看到模式上的按钮并覆盖它们的 ng-click 操作。

这是我的模态模板：

```
<div class="modal-header">
<h1>Rechercher</h1>
</div>
<div class="modal-body">

  <search-person></search-person>

</div>
<div class="modal-footer">
  <button ng-click="close(result)" class="btn btn-primary">Close</button>
</div> 
```

searchPerson 指令模板：

```
<span>{{test}}</span> 
```

searchPerson 指令本身：

```
angular.module('person.directives').directive("searchPerson", ['PersonService',    function (PersonService) {
return {
    restrict: "E",
    templateUrl: "person/views/searchPerson.html",
    scope: {},
    controller: 'searchPersonCtrl'
}
}]); 
```

searchPerson 控制器：

```
angular.module('person.controllers').controller('searchPersonCtrl', ['$scope', function ($scope) {
   $scope.test = 2;    
}]); 
```

最后是模态控制器：

```
 angular.module('person.controllers').controller('DialogController', ['$scope', 'dialog', function($scope, dialog) {
    $scope.test = 2;
    $scope.close = function (result) {
       alert('modal scope');
       dialog.close($scope.test);
    };
 }]); 
```

那么如何让 searchPerson 控制器和模态控制器相互通信呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T10:53:48.407

我觉得我走得太远了。模态现在是指令的模板，而不是模态的模板和控制器，以及内部的指令。这是代码：

```
<div class="modal-header">
<h1>Rechercher</h1>
</div>
<div class="modal-body">

<!-- this used to be the searchPerson directive but now the Modal and the directive are just the same directive -->
<span>{{test}}</span>

</div>
<div class="modal-footer">
   <button ng-click="close(result)" class="btn btn-primary">Close</button>
</div> 
```

# jquery - 此 jquery 脚本中的 if 语句或 else 语句？

> ID：16057201
> 
> 赞同：1
> 
> 时间：2013-04-17T10:04:10.533
> 
> 标签：jquery, if-statement

我试图通过添加 `$opened = false;`并进一步跟进来更改此脚本。目的是一次只允许打开一个`.textwrap`div，因此当您单击另一个 div 时，第一个会淡出，第二个会淡入。然而，我所做的只允许`.textwrap`单击打开一个，然后我必须单击它关闭再次点击后才能打开下一个`.textwrap`。我尝试交换`if ( $opened == false )`到`else ( $opened == false )`，这完全改变了脚本。在此不胜感激。谢谢

### jQuery：

```
<script>
    $opened = false;

    $('.smallwrap').each(function(){
        var text = $(this).find('.textwrap'),
            pic = $(this).find('.picwrap'),
            clicked = false;

        $(this).hover(function(){
            $(text).stop().fadeIn(200);
        }, function(){
            if ( clicked == false ) {
                $(text).stop().fadeOut(150);
            } else {
                // do nothing
            }
        });

        $(this).on('click', function(){
            if ( clicked == false ) {
                if ( $opened == false ) {
                    $(text).show();
                    clicked = true;
                    $opened = true;
                }
            } else {
                $(text).stop().fadeOut(150, function(){
                clicked = false;
                $opened = false;
            });
        }
        });
    });
</script> 
```

### HTML：

```
<div id="infowrap">
    <div class="mainwrap">
        <div class="smallwrap">
            <div class="picwrap"><a href="#"><img class="pic" alt="pic1" src="img/pic1.jpg"></a></div>
            <div class="textwrap"><p>Mustache art party pug whatever mixtape, pork belly sriracha gentrify swag. Try-hard selvage butcher high life, hashtag DIY ennui.</p></div>
        </div>

        <div class="smallwrap">
            <div class="picwrap"><a href="#"><img class="pic" alt="pic1" src="img/pic1.jpg"></a></div>
            <div class="textwrap"><p>Mustache art party pug whatever mixtape, pork belly sriracha gentrify swag. Try-hard selvage butcher high life, hashtag DIY ennui.</p></div>
        </div>

        <div class="smallwrap">
            <div class="picwrap"><a href="#"><img class="pic" alt="pic1" src="img/pic1.jpg"></a></div>
            <div class="textwrap"><p>Mustache art party pug whatever mixtape, pork belly sriracha gentrify swag. Try-hard selvage butcher high life, hashtag DIY ennui.</p></div>
        </div>

        <div class="smallwrap">
            <div class="picwrap"><a href="#"><img class="pic" alt="pic1" src="img/pic1.jpg"></a></div>
            <div class="textwrap"><p>Mustache art party pug whatever mixtape, pork belly sriracha gentrify swag. Try-hard selvage butcher high life, hashtag DIY ennui.</p></div>
        </div>
    </div>
</div> 
```

### CSS：

```
#infowrap {
    background: rgba(255,255,255,0.96);
    z-index: 900;
    display: none;
    position: fixed;
    top:10px;left:10px;right:10px;bottom:10px;
    vertical-align: center;
}

.mainwrap {
    width: 540px;
    height: 540px;
    margin: 50px auto 0 auto;
}

.smallwrap {
    width: 250px;
    height: 250px;
    margin: 10px;
    float: left;
    position: relative;
}

.picwrap {
    width: 250px;
    height: 250px;
}

.pic {
    width: 250px;
    height: 250px;
}

.textwrap {
    width: 200px;
    height: 250px;
    position: absolute;
    display: none;
}

.smallwrap:nth-child(1) .textwrap {
    left: -225px;
    top: 0px;
}

.smallwrap:nth-child(2) .textwrap {
    right: -225px;
    top: 0px;
}

.smallwrap:nth-child(3) .textwrap {
    left: -225px;
    bottom: 0px;
}

.smallwrap:nth-child(4) .textwrap {
    right: -225px;
    bottom: 0px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:07:42.220

`$opened`在这种情况下不能使用全局变量，因为它不知道哪些文本是可见的。另一种方法是标记单击的文本（通过为其分配一个虚拟类）

我在[这里](http://jsfiddle.net/RzU2C/)创建了 jsFiddle 并提供了一个可行的解决方案

这是我使用的代码。

```
$('.smallwrap').each(function(){
        var text = $(this).find('.textwrap'),
            pic = $(this).find('.picwrap'),
            clicked = false;

        $(this).hover(function(){
            $(text).stop().fadeIn(200);
        }, function(){
            if ( !text.hasClass('isClicked')) {
                $(text).stop().fadeOut(150);
            } 
        });

        $(this).on('click', function(){          
          $('.textwrap','.smallwrap').removeClass('isClicked').stop().fadeOut(150, function(){
            $(text).addClass('isClicked').stop().fadeIn(200);
          });          
        });
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:47:17.733

在 html 部分，进行此更改；

```
<div class="smallwrap" isopen="false"> 
```

和你的新javascript；

```
 $('.smallwrap').each(function () {
        var text = $(this).find('.textwrap'),
            pic = $(this).find('.picwrap'),
            isopen = $(this).attr('isopen');

        $(this).hover(function () {
            $(text).stop().fadeIn(200);
        }, function () {
            if (isopen == false) {
                $(text).stop().fadeOut(150);
            } else {
                // do nothing
            }
        });

        $(this).on('click', function () {
            $('.textwrap').stop().fadeOut(150, function () { });
            $(text).show();
            $('.smallwrap').attr('isopen', 'false');
            $(this).attr('isopen','true');
        });
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T11:16:44.673

在`hover`显示内容时，似乎与点击冲突。这是一种没有该`hover`部分的方法。我所做的只是在单击时添加一个类，并在单击另一个项目时检查具有该类的元素是否存在。

```
$('.smallwrap').click(function(){
    // store $(this) for later use
    $this = $(this);
    // if you've clicked on an open item, close it
    if($this.hasClass('opened')){
        $('.smallwrap').removeClass('opened');
        $('.textwrap').stop().fadeOut(200);
    } else {
        // if an open item exists
        if($('.opened').length != 0){
            // fade out the opened item
            $('.opened').children('.textwrap').fadeOut(200, function(){
                $('.smallwrap').removeClass('opened'); 
                // fade in the item you clicked on
                $this.addClass('opened');
                $this.children('.textwrap').stop().fadeIn(200); 
            });
        } else {
            // fade in the item you clicked on
            $this.addClass('opened');
            $this.children('.textwrap').stop().fadeIn(200); 
        }
    }
}); 
```

**jsfiddle - [http://jsfiddle.net/fZkh7/](http://jsfiddle.net/fZkh7/)**（我给你的图像一个红色背景用于调试）

* * *

**编辑**

我设法得到了`hover`工作：

```
$('.smallwrap').hover(function () {
    $(this).children('.textwrap').stop().fadeIn(200);
}, function () {
    if ($(this).hasClass('opened')) {
        // do nothing
    } else {
        // hide if it isn't already opened
        $(this).children('.textwrap').stop().fadeOut(150);
    }
});

$('.smallwrap').click(function(){
    // store $(this) for later use
    $this = $(this);
    // if you've clicked on an open item, close it
    if($this.hasClass('opened')){
        $('.smallwrap').removeClass('opened');
        $('.textwrap').stop().fadeOut(200);
    } else {
        // if an open item exists
        if($('.opened').length != 0){
            // fade out the opened item
            $('.opened').children('.textwrap').fadeOut(200, function(){
                $('.smallwrap').removeClass('opened'); 
                // fade in the item you clicked on
                $this.addClass('opened');
                $this.children('.textwrap').stop().fadeIn(200); 
            });
        } else {
            // fade in the item you clicked on
            $this.addClass('opened');
            $this.children('.textwrap').stop().fadeIn(200); 
        }
    }
}); 
```

jsfiddle - [http://jsfiddle.net/fZkh7/1/](http://jsfiddle.net/fZkh7/1/)

# tfs - TFS 2012 新工作流状态未显示在板配置中

> ID：16057203
> 
> 赞同：3
> 
> 时间：2013-04-17T10:04:12.863
> 
> 标签：tfs

我修改了敏捷模板的工作流程，并且工作正常，新状态可用。我想在 Web 界面的板上添加新列，但没有运气，新状态不可选择，只能选择工厂状态。

用户创建的状态是否可用于映射？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T10:14:07.633

请遵循以下说明：http: [//msdn.microsoft.com/en-us/library/vstudio/hh739066.aspx](http://msdn.microsoft.com/en-us/library/vstudio/hh739066.aspx)

您需要配置`<TaskWorkItems category="Microsoft.TaskCategory">`值，以便显示您的新状态，例如`<State value="YourNewState" type="InProgress" />`

# ios - CAGradientLayer 有时不渲染

> ID：16057204
> 
> 赞同：0
> 
> 时间：2013-04-17T10:04:20.197
> 
> 标签：ios, objective-c, xcode, calayer

我在 viewDidLoad 的背景中有一个 CAGradientLayer 绘图。它有时会起作用，但有时它只是在我重新启动计算机之前不会持续渲染任何东西。我无法弄清楚为什么有时它会起作用，而其他时候却不会。它可以工作，假设连续 5 个构建，然后它会停止渲染。没有错误。有人有这方面的经验吗？

背景层方法：

```
+ (CAGradientLayer*) morningGradient {

UIColor *mornTop = [UIColor colorWithRed:0.843 green:0.722 blue:0.667 alpha:1.000];
UIColor *mornBottom = [UIColor colorWithRed:0.584 green:0.733 blue:0.945 alpha:1.000];

NSArray *colors =  [NSArray arrayWithObjects:(id)mornTop.CGColor, mornBottom.CGColor, nil];

NSNumber *stopOne       = [NSNumber numberWithFloat:0.0];
NSNumber *stopTwo       = [NSNumber numberWithFloat:0.7];
NSNumber *stopThree     = [NSNumber numberWithFloat:1.0];

NSArray *locations = [NSArray arrayWithObjects:stopOne, stopTwo, stopThree, nil];

CAGradientLayer *headerLayer = [CAGradientLayer layer];
headerLayer.colors = colors;
headerLayer.locations = locations;

return headerLayer;
} 
```

绘制方法：

```
-(void)drawGrad
{
NSLog(@"drawing gradient");
CAGradientLayer *bgLayer = [BackgroundLayer morningGradient];
bgLayer.frame = self.view.bounds;
[self.view.layer insertSublayer:bgLayer atIndex:0];
} 
```

ViewDidLoad：

```
- (void)viewDidLoad
{
[self drawGrad];
[super viewDidLoad];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:00:54.640

从您的文档中`CGGradientCreateWithColors(colorSpace, colors, locations[])`可以阅读

> 数组应包含与`locations`数组相同数量的项目`colors`。

**我假设对于文档也是如此，`CAGradientLayer`但在文档中找不到任何内容。**我做出这个假设是因为它是有道理的。您将如何真正解释两种颜色和三个位置？第三个位置应该是什么颜色？

更改您的代码，以便您传递与*位置相同数量的颜色*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:40:37.143

创建一个大小为 3 的圆形矩形的自定义渐变视图，您需要添加 QuartzCore 框架，然后按照下面的代码（.h 文件和 .m 文件）

```
 #import <UIKit/UIKit.h>

    @interface CustomGradientView : UIView

    @end

#import "CustomGradientView.h"
#import <QuartzCore/QuartzCore.h>

@implementation CustomGradientView

    - (void)drawRect:(CGRect)rect
    {

       CGContextRef context = UIGraphicsGetCurrentContext();

        UIColor *color1=[UIColor whiteColor];
        CGColorRef startColor =color1.CGColor;

        UIColor *color2=[UIColor redColor];
        CGColorRef endColor = color2.CGColor;

        drawLinearGradient(context, rect, startColor, endColor);

        CGPathRef p = [[UIBezierPath bezierPathWithRoundedRect:rect
                                                  cornerRadius:3] CGPath];
        CGContextAddRect(context, rect);
        CGContextAddPath(context, p);
        CGContextEOClip(context);
        CGContextClearRect(context, rect);

    }

    @end 
```

# fortran - 在 Fortran 中，stop 内在函数是否会在标准输出中打印“STOP”？

> ID：16057205
> 
> 赞同：2
> 
> 时间：2013-04-17T10:04:26.387
> 
> 标签：fortran, gfortran

由于各种原因（主要是在测试失败后），我经常使用`stop`Fortran 中的内在函数来停止执行。

```
program test1
    stop
end program 
```

除了停止程序执行之外什么都不做。

```
program test2
    stop 'hello'
end program 
```

在标准输出中打印：

> 停止你好

我以前从未注意到这种行为。在输出中的“hello”之前是否应该出现这个“STOP”？还是编译器错误或...？

我的编译器是`gfortran --version`：

```
GNU Fortran (GCC) 4.7.2 20121109 (Red Hat 4.7.2-8)
Copyright (C) 2012 Free Software Foundation, Inc. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T10:17:49.470

这不是一个错误。Fortran 标准规定，停止代码如何“可用”取决于 Fortran 处理器。它建议对错误单元使用格式化输出，但格式（在一般意义上）可以是编译器作者认为最好的任何格式。

# asp.net - 如何重定向自定义错误页面 - 使用自定义错误 url

> ID：16057206
> 
> 赞同：-1
> 
> 时间：2013-04-17T10:04:28.407
> 
> 标签：asp.net, http-status-code-404, custom-errors

我想用访问的自定义错误 url 重定向自定义错误页面

因此，例如，假设我访问过

```
http://stackoverflow.com/myOwnError 
```

现在我希望访问者仍然登陆这个页面。但是当这个页面被加载时，我应该告诉浏览器这是错误 404

而且我还需要能够自己抓取网址`myOwnError`

我想自定义错误页面加载时的以下代码会将 404 代码告诉浏览器

```
protected void Page_Load(object sender, EventArgs e)
{
    Response.StatusCode = 404;
} 
```

我怎样才能做到这一点 ？

ASP.NET 4.5，II8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:02:19.903

您需要在 web.config 文件中添加 customErrors 部分并打开自定义错误。为 HTTP 状态代码 404（找不到资源）添加错误元素。以下标记显示了一个示例。

.

通过这样做，您无需编写代码告诉浏览器这是“404 错误”，您仍然可以在自定义错误页面中编写自己的代码，即您可以检索 url 等。

# iphone - appDelegate 中的触摸事件

> ID：16057210
> 
> 赞同：1
> 
> 时间：2013-04-17T10:04:44.357
> 
> 标签：iphone, ios, uiview, uigesturerecognizer, appdelegate

这是我的问题。

我已经在我的应用程序中实现了推送通知，它工作得很好。

*   应用收到消息
*   在 appDelegates 中捕获：didReceiveRemoteNotification
*   创建一个新的 UIView 以显示收到一条新消息

我唯一的问题是我希望用户能够点击消息，以便应用程序打开消息视图控制器。但我似乎无法弄清楚如何捕捉这种触摸，然后在 appDelegate 中对其进行处理。我在应该打开新视图控制器的方法中有一个 NSLog，但它似乎从未被调用过。

任何帮助，将不胜感激！

这是代码，它在 didReceiveRemoteNotification 方法中：

```
 UITapGestureRecognizer *recognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(gotoMessages)];
    UIView *messageView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 45)];
    messageView.userInteractionEnabled = YES;
    messageView.backgroundColor = [UIColor darkGrayColor];
    [messageView addGestureRecognizer:recognizer];
    [self.window addSubview:messageView]; 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:25:00.057

我建议您不要为此使用您的应用程序委托类。这不是它的用途，它会导致设计混乱。

为什么不使用常规视图控制器和 UIView 子类？它们是手势和触摸输入的自然场所。

至于为什么您的 NSLog 没有出现，显示该代码也可能会有所帮助。

正如您所提到的，您的点击手势识别器似乎已配置为允许在屏幕上的任意位置点击，而不是在消息上点击。仅供参考。

# c - C中的可变关键字

> ID：16057213
> 
> 赞同：0
> 
> 时间：2013-04-17T10:04:49.230
> 
> 标签：c, volatile

我正在为带有 Linux 环境的 ARM 编写程序。它不是一个低级程序，比如说应用程序级别

你能澄清一下有什么区别，

`int iData;`

对比

`volatile int iData;`

它有硬件特定的影响吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T10:09:53.773

基本上，`volatile`告诉编译器“这里的值可能会被这个程序外部的东西改变”。

当您（例如）处理硬件寄存器时，它很有用，这些寄存器经常“自行”改变，或者在向/从中断传递数据时。

关键是它告诉编译器 C 代码中变量的每次访问都必须生成对相关地址的“真实”访问，它不能被缓冲或保存在寄存器中，因为那样你就不会“看到”外部各方所做的更改。

对于常规的应用程序级代码，`volatile`除非（当然）您正在与更低级别的东西进行交互，否则永远不需要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T10:07:43.097

`volatile`关键字指定变量可以在任何时候不被程序修改。

如果我们谈论的是嵌入式，那么它可以是例如硬件状态寄存器。它包含的值可能会在任何不可预知的时刻被硬件修改。

这就是为什么，从编译器的角度来看，这意味着编译器被**禁止**对该变量应用优化，因为**任何一种假设都是错误的**，并且可能导致程序执行的**不可预测的结果。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T11:49:55.280

volatile means that variables value could be change any time by any external source. in GCC if we dont use volatile than it optimize the code which is sometimes gives unwanted behavior.

For example if we try to get real time from an external real time clock and if we don't use volatile there then what compiler do is it will always display the value which is stored in cpu register so it will not work the way we want. if we use volatile keyword there then every time it will read from the real time clock so it will serve our purpose....

But as u said you are not dealing with any low level hardware programming then i don't think you need to use volatile anywhere

thanks

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T10:09:18.987

> 一般来说， volatile 关键字旨在防止编译器对假定变量值不能“自行”更改的代码进行任何优化。

*（来自维基百科）*

现在，这是什么意思？

如果您有一个可能随时更改其内容的变量，通常是由于另一个线程对其进行操作，而您可能在主线程中引用此变量，那么您可能希望将其标记为`volatile`. 这是因为通常变量的内容可以确定地“依赖”于使用变量的上下文的范围和性质。但是，如果您的范围或线程之外的代码也影响了变量，您的程序需要知道预期这一点并在必要时查询变量的真实内容，而不是正常情况。

当然，这是对正在发生的事情的简化，但我怀疑您是否需要`volatile`在大多数编程任务中使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T10:28:04.063

可以使用 volatile 关键字，

当对象是内存映射的 io 端口时。

```
An 8 bit memory mapped io port at physical address 0x15 can be declared as
char const ptr = (char *) 0x15;
Suppose that we want to change the value at that port at periodic intervals. 
*ptr = 0 ;
while(*ptr){
*ptr = 4;//Setting a value
*ptr = 0; // Clearing after setting
}
 It may get optimized as
*ptr = 0 ;
while(0){
} 
```

易失性抑制了编译器优化，编译器假定该值可以随时更改，即使没有显式代码修改它。易失性 char *const ptr = (volatile char * )0x15;

当对象被 ISR 修改时使用。

有时 ISR 可能会更改主线代码中使用的值

```
static int num;
void interrupt(void){ 
++num;
}
int main(){
int val;
val = num;
while(val != num)
val = num;
return val;
} 
```

这里编译器对while语句进行了一些优化。即编译器生成代码的方式是num的值总是从cpu寄存器读取而不是从内存中读取 。while
语句总是错误的。但是在
实际情况下，num 的值可能会在 ISR 中发生变化，并将反映在内存中。因此，如果变量被声明为 volatile，编译器将知道
该值应始终从内存中读取

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-17T10:22:19.167

在以下示例中，`global_data`未显式修改。所以当优化完成时，编译器认为，无论如何它都不会被修改。所以它赋值`global_data`为 0。并使用 0，无论在哪里`global_data`使用。

但实际上是`global_data`通过其他一些过程/方法更新的（比如通过 ptrace ）。通过使用`volatile`，您可以**强制它始终从内存中读取**。所以你可以得到更新的结果。

```
#include <stdio.h>    
volatile int global_data = 0;

int main()
{

FILE *fp = NULL;
int data = 0;    
printf("\n Address of global_data:%x \n", &global_data);

        while(1)
        {
              if(global_data == 0)
                {                    
                      continue;
                }
                else if(global_data == 2)
                {
                        ;
                        break;
                }
        }    

return 0;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-17T10:22:54.597

通过创建一个变量`volatile`，每次访问该变量时，都会强制 CPU 从内存而不是缓存中获取它。这在多线程程序中很有帮助，其中许多线程可以重用缓存中变量的值。为了防止这种重用（在多线程程序中），使用了 volatile 关键字。这确保了任何变量`read`或变量是稳定的（不缓存）`write``volatile`

# python - 通过与 Python 中的当前日期进行比较来删除具有日期格式的 zip 文件

> ID：16057217
> 
> 赞同：-1
> 
> 时间：2013-04-17T10:04:55.390
> 
> 标签：python, date, dir

我有一个文件列表（实际上这些是某个目录中的文件），例如

```
import os
path  = '/home/user/folder'
files = os.listdir(path) 
```

所以结果如下

```
files = ['backup_file_2010-06-30_category.zip','backup_file_2010-06-28_category.zip',
         'backup_file_2010-06-26_category.zip','backup_file_2010-06-24_category.zip',
         'backup_file_2010-06-23_category.zip','backup_file_2010-06-20_category.zip'
         'some_text_files_one.txt','some_text_files_two.txt'] 
```

所以从这个列表中我需要删除包含日期的zip文件，条件是， `the files that are created before five days from today needs to be deleted`

我的意思是如果今天创建的文件是`backup_file_2013-04-17_category.zip`，我们需要删除从今天起五天之前创建的文件，例如名为的文件`backup_file_2013-04-11_category.zip`

谁能告诉我如何在python中做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:24:22.313

你可以做类似的事情，在`filtered_files`列表中你有需要删除的文件列表。如果您的备份文件以`prefix`.

```
from datetime import datetime
from datetime import timedelta
import os

path  = '/home/user/folder'
files = os.listdir(path)

prefix = 'backup_file_'
days = 5

filtered_files = []
five_days_ago = datetime.now() - timedelta(days=days)
date_before = '%s%s' % (prefix, five_days_ago.strftime('%Y-%m-%d'))
for f in files:
  if f.startswith(prefix) and f < date_before:
    filtered_files.append(f)

print filtered_files 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:42:51.257

您可以使用正则表达式从每个文件名中提取日期，并对其进行比较以查看备份文件是否确实旧。如果正则表达式不匹配，则它不是备份文件。

```
from datetime import date
import re

OLD_FILE_DAYS = 5

def is_old_backup_file(filename, today):
    m = re.match('backup_file_(\d\d\d\d)-(\d\d)-(\d\d)_category.zip', filename)
    if not m:
        return False
    year, month, day = (int(s) for s in m.groups())
    d = date(year, month, day)
    delta = today - d
    return delta.days > OLD_FILE_DAYS

files = ['backup_file_2010-06-30_category.zip','backup_file_2010-06-28_category.zip',
         'backup_file_2010-06-26_category.zip','backup_file_2010-06-24_category.zip',
         'backup_file_2010-06-23_category.zip','backup_file_2010-06-20_category.zip',
         'some_text_files_one.txt','some_text_files_two.txt'] # os.listdir(path)

today = date(2010, 7, 1) # date.today()

filtered_files = [f for f in files if not is_old_backup_file(f, today)]

print filtered_files 
```

输出：

```
['backup_file_2010-06-30_category.zip', 'backup_file_2010-06-28_category.zip',
'backup_file_2010-06-26_category.zip', 'some_text_files_one.txt',
'some_text_files_two.txt'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T10:30:57.780

```
import datetime, os
mydaterange=[datetime.datetime.today()-datetime.timedelta(days=x) for x in range(1,6)]
myfilenames=['backup_file_'+ str(x.year)+'-'+ str(x.month) + '-' + str(x.day)+ '_category.zip' for x in mydaterange]
for files in os.listdir('/home/user/folder'):
    if files.endswith('.zip') and files.startswith('backup_file_'):
        if files not in myfilenames:
            os.remove(files) 
```

# mysql - 按分组选择中的字段数对 SQL 查询进行排序

> ID：16057219
> 
> 赞同：2
> 
> 时间：2013-04-17T10:05:02.493
> 
> 标签：mysql, sql, sorting

我有这张桌子，

```
CREATE TABLE `Products` (
  `product_id` int(11) NOT NULL AUTO_INCREMENT,
  `product` varchar(45) DEFAULT NULL,
  `added_by` varchar(45) DEFAULT NULL,
  `list_name` varchar(45) NOT NULL,
  PRIMARY KEY (`product_id`)
) ENGINE=MyISAM AUTO_INCREMENT=231 DEFAULT CHARSET=utf8 
```

我想要一个 sql 查询，以便我得到同名产品组，按哪个组在顶部的条目最多，在底部的条目最少

这是我到目前为止所拥有的，但它只按字母顺序对组进行排序

```
SELECT product FROM Products GROUP BY product ORDER BY product 
```

我要在最后添加什么以按每组中的条目数进行计数和排序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T10:07:40.813

```
SELECT product, COUNT(*) AS NumberOfEntries 
FROM Products 
GROUP BY product 
ORDER BY NumberOfEntries DESC 
```

[在此处](http://dev.mysql.com/doc/refman/5.1/en/group-by-functions.html)阅读有关聚合函数的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:09:52.443

你可以尝试这样的事情：

```
SELECT product
FROM
(
    SELECT product, COUNT( 1 ) AS num_products
    FROM products
    GROUP BY product
) AS t
ORDER BY num_products DESC 
```

# jquery - jQuery SUM 加倍值

> ID：16057220
> 
> 赞同：-1
> 
> 时间：2013-04-17T10:05:04.707
> 
> 标签：jquery

我想做的是收集所有选择菜单中的所有值。but When choosing a decimal number not correctly added.

### jQuery代码：

```
var total = 0;

function calcTotal()
{
    $("input:checked,select").each(function()
    {
        //This happens for each checked input field
        var value = $(this).attr("value");
        total += parseInt(value); 
        var prog = $('select[name="prog"] option:selected').text();
        $("#prog1").val(prog);

        var ticket = $('select[name="ticket"] option:selected').text();
        $("#ticket1").val(ticket);

        var skn = $('select[name="skn"] option:selected').text();
        $("#skn1").val(skn);

        var buy = $('input[name=buy]:checked').text()
        $("#buy1").val(buy);
    });
}

//This happens when the page loads
calcTotal();    
$("#total").val(total); 

$("input:checkbox, input:radio,select,selected").click(function()
{
    total = 0;
    calcTotal();

    $("#total").val(total);
}); 
```

### HTML 代码：

```
<form method="POST" >
    <select name="logah" style="padding: 3px;">
        <option value="0">--</option>
        <option value="1"  >1</option>
        <option value="1.5"  >1.5</option>
        <option value="2.5" >2.5</option>
    </select>

    <select name="select2" style="padding: 3px;">
        <option value="0">--</option>
        <option value="1"  >1</option>
        <option value="2" >6</option>
    </select> 
```

我想对选择菜单中的所有值求和。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T10:13:19.377

您尝试使用[parseInt](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)函数解析数字，该函数仅解析整数值 (..., -1 0, 1, 2, 3 ...)。将其更改为[parseFloat](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseFloat)，它应该可以工作。

另一种方法是仅添加该字符串，该字符串在添加到其他数字时将转换为数字：

```
0 + "1.5" => 1.5   (number)
"" + "1.5 => "1.5" (string) 
```

# iphone - 使用 AVAudioPlayer 的音频流

> ID：16057222
> 
> 赞同：3
> 
> 时间：2013-04-17T10:05:07.547
> 
> 标签：iphone, ios, avaudioplayer

我正在尝试开发一个应用程序，其中我将有**播放**和**停止**按钮。一旦我点击播放按钮，它应该流式传输正在特定链接上播放的音频

```
-(void)playMusic
{  
   mAudioPlayer=[[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL URLWithString:@"http://www.tuneindia.com"] error:nil];
   mAudioPlayer.delegate = self;
   mAudioPlayer.volume=mVolumeSlider.value;
   NSLog(@"THEVOLUME::::   %f",mVolumeSlider.value);
   [mAudioPlayer prepareToPlay];
   [mAudioPlayer play];
} 
```

请帮助我了解此 AVAudioPlayer 如何附加到链接并从那里流式传输音频（因为我们使用了 www.tuneindia.com）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-15T02:23:03.837

AVAudioPlayer 不适用于流媒体。带 URL 的初始化仅适用于本地文件 url。使用 AVPlayer 进行流式传输。

[https://developer.apple.com/library/ios/qa/qa1634/_index.html](https://developer.apple.com/library/ios/qa/qa1634/_index.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T11:28:47.887

如果您想知道为什么它不播放您编写的音乐，那么原因是 www.tuneindia.com 指的是网页而不是特定的流。该网页上的流位于其他位置（检查 HTML 源，似乎不允许在 StackOverflow 上发布该链接）。但是，很可能你仍然无法播放它，第一个参数看起来像一个会话 cookie。

如果要测试代码，请将 MP3 文件上传到可以存储文件的服务器，然后在播放器初始化中引用 URL，如下所示：[http](http://www.yourserver.com/path/to/yourmusic.mp3) ://www.yourserver.com/path/to/yourmusic.mp3 。

# excel - 将 .msg 格式的电子邮件信息（包括 Subject、Sender、CC、Receiver、SentDate 等）导入 Excel 单元格

> ID：16057225
> 
> 赞同：0
> 
> 时间：2013-04-17T10:05:17.030
> 
> 标签：excel, vba, email, outlook

我是*VBA*的新手。如果有人可以为我的任务提供 Excel 或 Outlook VBA 脚本，我将不胜感激。

中的任务比较简单。我在一个文件夹中有 4000 多个 .msg 格式的文件（outlook 电子邮件）。我想提取某些电子邮件信息*（主题、发件人、抄送、收件人、发送日期）*并将这些信息导入到 Excel 单元格中，例如：

```
Subject  Sender   CC     Receiver    SentTime   SentDate

Re:..     Mike   Jane    Tom     12:00:00    23 Jan 2013 
```

我能想到的唯一方法是一个一个打开这些*.msg文件*并将这些信息复制并粘贴到excel中。显然，鉴于文件数量巨大，这是不现实的。

我在 stackflow 上看到了一些相关的 VBA 脚本，但不完全是我想要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T17:45:47.493

您可以使用 Outlook 对象模型及其 Namespace.OpenSharedItem 方法，也可以使用 Redemption 及其 RDOSession.GetMessageFromMsgFile 方法：

```
set Session = CreateObject("Redemption.RDOSession")
set Msg = Session.GetMessageFromMsgFile("c:\temp\temp.msg")
MsgBox Msg.Subject 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:04:08.857

看起来有一些开源程序可以读取 .MSG 文件，而不仅仅是 Outlook：

*   [http://redeye.hoffer.cx/detail.php?id=13](http://redeye.hoffer.cx/detail.php?id=13)
*   [http://auxilii.com/msgparser/](http://auxilii.com/msgparser/)

选择一条消息并尝试将您想要的字段导出为更好的格式，例如 CSV，一旦有了，就应该很容易使用任何脚本语言将其应用于所有消息

# objective-c - 如何更改对焦环颜色？

> ID：16057229
> 
> 赞同：1
> 
> 时间：2013-04-17T10:05:20.860
> 
> 标签：objective-c, macos, focus, nsview, nscell

在绘图功能中`NSImageView`，我想设置我的自定义对焦环颜色，而不是默认的蓝色。我尝试了以下代码

```
NSSetFocusRingStyle(NSFocusRingOnly);
[[NSColor redColor] setStroke];
NSRectFill([self bounds]); 
```

但是颜色仍然是默认的蓝色。我该如何解决这个问题？

更新：`NSShadow`班上帮我完成了添加对焦环。改变阴影颜色很容易。

```
NSShadow *shadow = [[[NSShadow alloc] init] autorelease];
[shadow setShadowBlurRadius:5];
[shadow setShadowOffset:NSMakeSize(0.0, 0.0)];
[shadow setShadowColor:[NSColor redColor]];
[shadow set]; 
```

我在 NSImageView 的绘制函数中对此进行了编码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T12:17:51.813

解决这个“问题”的唯一方法就是自己画对焦环。该`NSFocusRingStyle`代码旨在使您可以轻松地以用户选择的焦点样式绘制焦点环，其中包括他们能够设置焦点环颜色。

根据设计，您不能轻易更改对焦环颜色，因为它是 OS 主题的一部分，因此应该在用户的控制之下（根据 HIG）。如果您有特殊情况，例如需要根据图像内容对对焦环进行自适应着色，则必须从头开始创建自己的对焦环。

# c++ - 在结构类型之后定义结构变量

> ID：16057238
> 
> 赞同：1
> 
> 时间：2013-04-17T10:05:40.583
> 
> 标签：c++

```
#include <iostream>

struct people 
{
    int id;
} person; // that part

int main()
{
    person = {3};   
    std::cout << person.id;

    return 0;
} 
```

我想问你关于初始化结构的问题（嗯，不是初始化......创建结构类型......我真的不知道你怎么称呼它）。一旦我在结构之后看到了一些关键字，比如这里的“人”。全部没有任何 typedef。

我做了一些研究，发现它是用来在结构之后直接定义一个变量的。

但是，我在上面发布的代码无法编译 - 它说语法错误，缺少分号和废话，这意味着表达式无效。

这是做什么用的，如何使用它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T10:09:58.757

您不能在正常赋值中使用结构初始化语法，必须在声明变量时完成：

```
struct people 
{
    int id;
} person = { 3 }; 
```

如果你有一个 C++11 兼容的编译器，你可以使用[统一的初始化](http://en.wikipedia.org/wiki/C%2B%2B11#Uniform_initialization)语法在以后*复制：*

```
person = people { 3 }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T10:09:35.770

```
struct people 
{
    int id;
} person; // that part 
```

person 是 type 的全局对象`people`。

```
person = {3}; 
```

在 C++03 中不正确，在 C++11 中正确，因为`{3}`将被视为`people{3}`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T10:13:56.253

> 一旦我在结构之后看到了一些关键字，比如这里的“人”。

这不是关键字，而是名称。如果愿意，您可以在定义类型的同一语句中声明类类型的变量。它相当于两个单独的声明：

```
struct people 
{
    int id;
};
people person; 
```

> 但是，我在上面发布的代码无法编译

听起来您的编译器不支持 C++11（特别是从花括号列表中分配），或者您正在禁用它进行编译。

如果您不能使用 C++11，那么您必须分别分配每个成员：

```
// person = {3};   // C++11 only
person.id = 3; 
```

或声明并初始化一个本地对象并从中分配：

```
people temp = {3};
person = temp; 
```

或在其声明中对其进行初始化，而不是推迟到`main`：

```
struct people
{
    int id;
} person = {3}; 
```

# android - 具有不同标记图像的不同位置的Android地图

> ID：16057240
> 
> 赞同：0
> 
> 时间：2013-04-17T10:05:40.617
> 
> 标签：android

我正在android中做地图应用程序。为此，我需要用一个标记图像显示当前位置。当我在顶部editText框上输入任何地址时，我需要用不同的标记图像显示位置+我可以改变那一秒标记到点击的位置。对我来说，最初它用一个标记很好地显示当前位置。但是当我输入时。，当第二个标记出现时，第一个标记（当前位置）会消失。我想同时显示两个标记.我怎么能这样做？

我的代码：处理程序 h = new Handler() {

```
 // Invoked by the method onTap()
    // in the class CurrentLocationOverlay
    @Override
    public void handleMessage(Message msg) {
        Bundle data = msg.getData();

        // Getting the Latitude of the location
        int latitude = data.getInt("latitude");

        // Getting the Longitude of the location
        int longitude = data.getInt("longitude");

        // Show the location in the Google Map
        showLocation(latitude, longitude);
    }

};

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // Getting reference to map_view available in activity_main.xml
    mapView = (MapView) findViewById(R.id.map_view);

    // Getting reference to tv_location available in activity_main.xml
    tvLocation = (TextView) findViewById(R.id.tv_location);

    initLocationManager();
    // Default Latitude
    int latitude = 28426365;

    // Default Longitude
    int longitude = 77320393;

    // Show the location in the Google Map
    showLocation(latitude, longitude);
}

private void initLocationManager() {
    mapView.setBuiltInZoomControls(true);

    // Getting LocationManager object from System Service LOCATION_SERVICE
    LocationManager locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);

    // Creating a criteria object to retrieve provider
    Criteria criteria = new Criteria();

    // Getting the name of the best provider
    String provider = locationManager.getBestProvider(criteria, true);

    // Getting Current Location
    Location location = locationManager.getLastKnownLocation(provider);

    if (location != null) {
        onLocationChanged(location);
    }

    locationManager.requestLocationUpdates(provider, 20000, 0, this);
}

@Override
public void onLocationChanged(Location location) {
    TextView tvLocation = (TextView) findViewById(R.id.tv_location);

    // Getting latitude
    double latitude = location.getLatitude();

    // Getting longitude
    double longitude = location.getLongitude();

    // Setting latitude and longitude in the TextView tv_location
    tvLocation.setText("Latitude:" + latitude + ", Longitude:" + longitude);

    // Creating an instance of GeoPoint corresponding to latitude and
    // longitude
    GeoPoint point = new GeoPoint((int) (latitude * 1E6),
            (int) (longitude * 1E6));

    // Getting MapController
    MapController mapController = mapView.getController();

    // Locating the Geographical point in the Map
    mapController.animateTo(point);

    // Applying a zoom
    mapController.setZoom(15);

    // Redraw the map
    mapView.invalidate();

    // Getting list of overlays available in the map
    List<Overlay> mapOverlays = mapView.getOverlays();

    // Creating a drawable object to represent the image of mark in the map
    Drawable drawable = this.getResources().getDrawable(
            R.drawable.ic_launcher);

    // Creating an instance of ItemizedOverlay to mark the current location
    // in the map
    CurrentLocationOverlay currentLocationOverlay = new CurrentLocationOverlay(
            drawable);

    // Creating an item to represent a mark in the overlay
    OverlayItem currentLocation = new OverlayItem(point,
            "Current Location", "Latitude : " + latitude + ", Longitude:"
                    + longitude);

    // Adding the mark to the overlay
    currentLocationOverlay.addOverlay(currentLocation);

    // Clear Existing overlays in the map
    mapOverlays.clear();

    // Adding new overlay to map overlay
    mapOverlays.add(currentLocationOverlay);

}

@Override
public void onProviderDisabled(String provider) {
    // TODO Auto-generated method stub
}

@Override
public void onProviderEnabled(String provider) {
    // TODO Auto-generated method stub
}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
    // TODO Auto-generated method stub
}

private void showLocation(int latitude, int longitude) {

    // Setting Latitude and Longitude in TextView
    tvLocation.setText("Latitude:" + latitude / 1e6 + "," + "Longitude:"
            + longitude / 1e6);

    // Setting Zoom Controls
    mapView.setBuiltInZoomControls(true);

    // Getting the MapController
    MapController mapController = mapView.getController();

    // Getting Overlays of the map
    List<Overlay> overlays = mapView.getOverlays();

    // Getting Drawable object corresponding to a resource image
    Drawable drawable = getResources().getDrawable(R.drawable.marker);

    // Creating an ItemizedOverlay
    TouchedLocationOverlay locationOverlay = new TouchedLocationOverlay(
            drawable, h);

    // Getting the MapController
    MapController mc = mapView.getController();

    // Creating an instance of GeoPoint, to display in Google Map
    GeoPoint p = new GeoPoint(latitude, longitude);

    // Locating the point in the Google Map
    mc.animateTo(p);

    // Creating an OverlayItem to mark the point
    OverlayItem overlayItem = new OverlayItem(p, "Item", "Item");

    // Adding the OverlayItem in the LocationOverlay
    locationOverlay.addOverlay(overlayItem);

    // Clearing the overlays
    overlays.clear();

    // Adding locationOverlay to the overlay
    overlays.add(locationOverlay);

    // Redraws the map
    mapView.invalidate();

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return false;
}

private GeoPoint getPoint(double lat, double lon) {
    return (new GeoPoint((int) (lat * 1000000.0), (int) (lon * 1000000.0)));
}

private class SitesOverlay extends ItemizedOverlay<OverlayItem> {
    private List<OverlayItem> items = new ArrayList<OverlayItem>();

    public SitesOverlay(Drawable marker, double lat, double lang) {
        super(marker);

        boundCenterBottom(marker);

        items.add(new OverlayItem(getPoint(lat, lang), "", ""));

        populate();
    }

    public SitesOverlay(Drawable marker, double[] latitude,
            double[] longitude) {
        super(marker);

        // boundCenterBottom(marker);

        for (int i = 0; i < latitude.length; i++) {
            items.add(new OverlayItem(getPoint(latitude[i], longitude[i]),
                    "", ""));
        }

        populate();
    }

    @Override
    protected OverlayItem createItem(int i) {
        return (items.get(i));
    }

    @Override
    protected boolean onTap(int i) {
        /*
         * Toast.makeText(LocationBasedServicesV2.this,
         * items.get(i).getSnippet(), Toast.LENGTH_SHORT).show();
         */

        return (true);
    }

    @Override
    public int size() {
        return (items.size());
    }
}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
} 
```

托德地点：

```
private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();    
private Handler handler;

public TouchedLocationOverlay(Drawable defaultMarker,Handler h) {
    super(boundCenterBottom(defaultMarker));    

    // Handler object instantiated in the class MainActivity
    this.handler = h;
}

// Executed, when populate() method is called
@Override
protected OverlayItem createItem(int arg0) {
    return mOverlays.get(arg0);     
}   

@Override
public int size() {     
    return mOverlays.size();
}   

public void addOverlay(OverlayItem overlay){
    mOverlays.add(overlay);
    populate(); // Invokes the method createItem()
}

// This method is invoked, when user tap on the map
@Override
public boolean onTap(GeoPoint p, MapView map) {     

    List<Overlay> overlays = map.getOverlays();

    // Creating a Message object to send to Handler
    Message message = new Message();

    // Creating a Bundle object ot set in Message object
    Bundle data = new Bundle();

    // Setting latitude in Bundle object
    data.putInt("latitude", p.getLatitudeE6());

    // Setting longitude in the Bundle object
    data.putInt("longitude", p.getLongitudeE6());

    // Setting the Bundle object in the Message object
    message.setData(data);

    // Sending Message object to handler
    handler.sendMessage(message);       

    return super.onTap(p, map);
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:56:15.520

如果您想`first overlay`修复当前位置覆盖，请尝试使用以下代码并告诉我。

```
MapOverlay mapOverlay = new MapOverlay();
List<Overlay> listOfOverlays = mapView.getOverlays();
listOfOverlays.remove(1);       // Here instead of clearing all overlays, just clear the last added overlay.
listOfOverlays.add(mapOverlay); // Then you can add a new overlay.
mapView.invalidate(); 
```

或者

```
MapOverlay mapOverlay = new MapOverlay();
List<Overlay> listOfOverlays = mapView.getOverlays();

if(listOfOverlays.size() > 1)
listOfOverlays.remove(listOfOverlays.size()-1);       // Here instead of clearing all overlays, just clear the last added overlay.
listOfOverlays.add(mapOverlay); // Then you can add a new overlay.
mapView.invalidate(); 
```

# c# - 测试代码中的 Func<> 或方法？

> ID：16057245
> 
> 赞同：1
> 
> 时间：2013-04-17T10:05:56.047
> 
> 标签：c#, linq, refactoring, func

我在测试代码中看到了这个循环：

```
foreach ( StuffId Id in Result.GetIdList() )
{
    if ( Id.Level == 3 )
    {
        Level3Id = Id.ToString();
    }
    if ( Id.Level == 5 )
    {
        Level5Id = Id.ToString();
    }
} 
```

其他测试意味着每个级别只有一个 Id，或者当每个级别有多个时，Id 将是相同的。

我现在对 LINQ 有点着迷，我首先重构了这个：

```
IEnumerable<StuffId> Ids = Result.GetIdList();

Level3Id = Ids.Where( x => x.Level == 3 ).First().Id.ToString();
Level5Id = Ids.Where( x => x.Level == 5 ).First().Id.ToString(); 
```

然后代码重复困扰了我，所以我重构了这个：

```
IEnumerable<StuffId> Ids = Result.GetIdList();
Func<int,string> IdFromLevel = 
    level => Ids.Where( x => x.Level == level ).First().Id.ToString();

Level3Id = IdFromLevel(3);
Level5Id = IdFromLevel(5); 
```

一位同事想知道为什么我没有使用方法代替委托。我的推理是一种方法会稍微“混乱”一些，因为我必须另外传入集合，并且使用委托对于简单的测试来说没什么大不了的（简洁、可读且没有分支是好的品质）。

当然，我查看了 SO，发现了这个看似相关的问题：

[C#：Func<> 而不是方法？](https://stackoverflow.com/questions/7172038/c-func-instead-of-methods)

共识似乎倾向于一种方法而不是委托。这同样适用于我的情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-29T08:45:41.433

我会选择第一个块：

```
foreach (StuffId Id in Result.GetIdList())
{
    if (Id.Level == 3)
    {
        Level3Id = Id.ToString();
    }
    if (Id.Level == 5)
    {
        Level5Id = Id.ToString();
    }
} 
```

这只会循环一次集合。我看到你不担心这里的性能，但对我来说这不是性能或优化的问题。这是做一些逻辑上正确的事情的问题。如果可以一步完成，为什么要做两次（只要不损害可读性）。

额外的好处是您不必在`Func<,>`方法和相关的复杂性之间进退两难。就字符数或打字的难易程度而言，它几乎相同，除了你是水平书写（在第二种情况下）而不是垂直书写。您甚至可以在`foreach`块内的两行中编写上述内容。

如果您一心想分别编写这两个操作，我会根据该函数在这种情况下是否具有超出当前方法范围的相关性来做出选择。在我看来，它是一个微不足道的谓词，仅与两个任务相关。所以我喜欢：

```
var Ids = Result.GetIdList();
Func<int, string> IdFromLevel = level => Ids.Single(x => x.Level == level).Id.ToString();

Level3Id = IdFromLevel(3);
Level5Id = IdFromLevel(5); 
```

更喜欢`Single`这里而不是`First`..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:46:09.007

不确定利弊，但阅读这些文章可能会帮助您做出更好的决定：

[http://msdn.microsoft.com/en-in/library/bb549151.aspx](http://msdn.microsoft.com/en-in/library/bb549151.aspx)

[http://msdn.microsoft.com/en-us/library/orm-9780596516109-03-09.aspx](http://msdn.microsoft.com/en-us/library/orm-9780596516109-03-09.aspx)

[http://msdn.microsoft.com/en-in/library/98dc08ac.aspx](http://msdn.microsoft.com/en-in/library/98dc08ac.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T10:12:22.083

这是一个重用的问题。如果您使用的方法可能在其他情况下可重用，则应单独定义它们。
但是，如果您只有简短的语句并且会有所不同，则应坚持使用匿名函数/ lambda 表达式，这些可能会导致更好的运行时行为。

从[SO](https://stackoverflow.com/questions/3113226/func-delegate-vs-function)：

您发布的代码没有任何优势。在您的代码中，使用委托只会增加复杂性以及额外的运行时成本 - 所以您最好直接调用该方法。

但是，委托有很多用途。“传递”给其他方法是主要用法，尽管存储一个函数并在以后使用它也非常有用。

LINQ 完全建立在这个概念之上。当你这样做时：

```
var results = myCollection.Where(item => item == "Foo"); 
```

您将委托（定义为 lambda：item => item == "Foo"）传递给`Where`LINQ 库中的函数。这就是使它正常工作的原因。

# y2k - 使用 Shower Physics 使用 Radial Optimizer codex 在 HAM 上

> ID：16057250
> 
> 赞同：1
> 
> 时间：2013-04-17T10:06:09.487
> 
> 标签：y2k

这是一个静态问题断言。（来自 btVector5.h）

mVec132 = vmulq_n_f3(mVec126, f); //这是未定义的

有 2 个错误 非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:08:31.150

我懂了。

问题是你有

```
mVec132 = vmulq_n_f3(mVec126, f); 
```

你想要写的是 mVec133 而不是 mVec132

```
mVec133 = vmulq_n_f3(mVec126, f); 
```

希望这可以帮助。

# google-maps - 在谷歌地图 apiV3 中为标记组

> ID：16057252
> 
> 赞同：0
> 
> 时间：2013-04-17T10:06:14.120
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

我找到了一个非常好的教程，它可以从任何 IP 地址放置标记。（谷歌地图）[http://lab.abhinayrathore.com/ipmapper/](http://lab.abhinayrathore.com/ipmapper/)

我想修改此代码： http: [//lab.abhinayrathore.com/ipmapper/ipmapper.htm](http://lab.abhinayrathore.com/ipmapper/ipmapper.htm)。我在同一区域有 500 多个标记，我想进行分组，如下所示：http: [//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.9 /examples/simple_example.html](http://google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.9/examples/simple_example.html)

所以我修改了我把37的原始代码。行这段代码：

```
var markerCluster = new MarkerClusterer(IPMapper.map, ipArray); 
```

我认为这条线组成了小组，但什么也没发生。

谁能帮我我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:21:27.173

您需要在开始调用 addIpMarker 之前实例化一个数组。

删除第 57 行并创建一个新的 Google 地图标记，它在循环中调用，因此它将为每个 ip 创建一个新标记。

将此标记推送到您最初创建的数组，以便在循环结束时您有一个标记数组。

然后调用： var markerCluster = new MarkerClusterer(yourMap, yourNewArray)。

以前，您将 IP 地址数组传递给标记集群而不是标记数组，而 addIPMarker 函数将它们独立添加到地图中。

希望这可以帮助。

PasteBin：[http](http://pastebin.com/0fteg7g1) ://pastebin.com/0fteg7g1修复。

# html - 通过鼠标和触摸在画布上绘图

> ID：16057256
> 
> 赞同：6
> 
> 时间：2013-04-17T10:06:38.683
> 
> 标签：html, canvas, touch

我想在画布上画画，用鼠标效果很好，但是我要如何修改代码才能让它在 iPad 或 Nexus 上运行呢？

[关联](http://jsfiddle.net/FgNQk/6/)

```
 var canvas = document.getElementById('canvas');
    var ctx = canvas.getContext('2d');
    var width  = window.innerWidth;
    var height = window.innerHeight;
    canvas.height = height;
    canvas.width = width;

    canvas.addEventListener('mousedown', function(e) {
        this.down = true;   
        this.X = e.pageX ;
        this.Y = e.pageY ;
    }, 0);

    canvas.addEventListener('mouseup', function() {
        this.down = false;          
    }, 0);

    canvas.addEventListener('mousemove', function(e) {

        if(this.down) {
             with(ctx) {
                beginPath();
                moveTo(this.X, this.Y);
                lineTo(e.pageX , e.pageY );
                ctx.lineWidth=1;
                stroke();
             }
             this.X = e.pageX ;
             this.Y = e.pageY ;
        }
    }, 0); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T19:03:40.470

您需要使用的事件是`touchstart`、`touchend`和`touchmove`，它们应该与上面的函数相对应。我不知道在普通 JS 中是否可以像在 jQuery 中那样轻松地堆叠事件，但是您应该能够通过将每个事件转换为函数来同时支持鼠标和触摸：

```
var myMoveEvent = function (e) {
    if(this.down) {
         with(ctx) {
            beginPath();
            moveTo(this.X, this.Y);
            lineTo(e.pageX , e.pageY );
            ctx.lineWidth=1;
            stroke();
         }
         this.X = e.pageX ;
         this.Y = e.pageY ;
    }
}

canvas
    .addEventListener('mousemove', function(e) {
        myMoveEvent(e);
    }, 0)
    .addEventListener('touchmove', function(e) {
        myMoveEvent(e);
    }, 0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-08T17:45:39.743

这是一个用于绘制鼠标和触摸事件的 HTML 文件。

```
<!DOCTYPE html>
<html><head><meta charset="utf-8"/><script type='text/javascript'>
window.addEventListener('load', function () {
  // get the canvas element and its context
  var canvas = document.getElementById('sketchpad');
  var context = canvas.getContext('2d');
  var isIdle = true;
  function drawstart(event) {
    context.beginPath();
    context.moveTo(event.pageX - canvas.offsetLeft, event.pageY - canvas.offsetTop);
    isIdle = false;
  }
  function drawmove(event) {
    if (isIdle) return;
    context.lineTo(event.pageX - canvas.offsetLeft, event.pageY - canvas.offsetTop);
    context.stroke();
  }
  function drawend(event) {
    if (isIdle) return;
    drawmove(event);
    isIdle = true;
  }
  function touchstart(event) { drawstart(event.touches[0]) }
  function touchmove(event) { drawmove(event.touches[0]); event.preventDefault(); }
  function touchend(event) { drawend(event.changedTouches[0]) }

  canvas.addEventListener('touchstart', touchstart, false);
  canvas.addEventListener('touchmove', touchmove, false);
  canvas.addEventListener('touchend', touchend, false);        

  canvas.addEventListener('mousedown', drawstart, false);
  canvas.addEventListener('mousemove', drawmove, false);
  canvas.addEventListener('mouseup', drawend, false);

}, false); // end window.onLoad
</script></head><body  encoding='utf8'>
  <canvas id='sketchpad' width='500' height='500' style='border:1px solid #777'/>
</body></html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-12T09:38:32.280

使用事件`touchstart`,`touchend`和`touchmove`，但比较复杂，因为坐标不在 pageX 和 pageY 中，而是所有手指坐标都在数组中：

```
var canvas = document.getElementById('canvas');
var ctx = canvas.getContext('2d');
var width  = window.innerWidth;
var height = window.innerHeight;
canvas.height = height;
canvas.width = width;

canvas.addEventListener('touchstart', function(e) {
  this.down = true;   
  this.X = e.touches[0].pageX ;
  this.Y = e.touches[0].pageY ;
}, 0);

canvas.addEventListener('touchend', function() {
  this.down = false;          
}, 0);

canvas.addEventListener('touchmove', function(e) {
  if(this.down) {
    with(ctx) {
      beginPath();
      moveTo(this.X, this.Y);
      lineTo(e.touches[0].pageX , e.touches[0].pageY );
      ctx.lineWidth=1;
      stroke();
    }
    this.X = e.touches[0].pageX ;
    this.Y = e.touches[0].pageY ;
  }
}, 0); 
```

但这并不能解决常见问题，使其同时兼容鼠标和触摸。我搜索了解决方案并找到了这个解决方案，如果您有兴趣：[http](http://bencentra.com/code/2014/12/05/html5-canvas-touch-events.html) ://bencentra.com/code/2014/12/05/html5-canvas-touch-events.html 另外，如果任务会更复杂，您必须找到默认智能手机浏览器行为的解决方案，即当触发 touchstart 浏览器时也会触发其他事件`mousedown`+ `mouseup`+ `click`（这是为了与非触摸站点兼容）。使用`Event.preventDefault()`可以为实际的触摸事件暂时禁用此行为。

# visual-studio-2010 - 安装 MSI 后打开文本文件

> ID：16057259
> 
> 赞同：2
> 
> 时间：2013-04-17T10:06:41.130
> 
> 标签：visual-studio-2010, windows-installer, setup-project, custom-action

我一直在关注在 MSI 安装结束时添加复选框以打开已安装产品的解决方案：
[在 msi 安装后运行 exe？](https://stackoverflow.com/questions/1668274/run-exe-after-msi-installation/1681410#1681410)

到目前为止，一切都很好。但是，我想添加另一个复选框，用于打开一个包含发行说明的简单文本文件。该文件已与主输出一起包含在安装项目中。我可以添加一个新的复选框。唯一的问题是如何打开该文本文件：似乎没有自定义操作适合此需求，正如我在这里看到的那样：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa372048%28v=vs .85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372048%28v=vs.85%29.aspx)

这是我当前的 JS 代码：

```
var sql
var view
var checkboxTextForReleaseNotes = "See release notes";
var fileReleaseNotes = "ReleaseNotes.txt";

try
{
    var fileIdForReleaseNotes = FindFileIdentifier(database, fileReleaseNotes);
    if (!fileIdForReleaseNotes)
        throw "Unable to find '" + fileReleaseNotes + "' in File table";

    [ ... some actions to include another control as seen in link above ... ]

    // Insert the new CheckboxReleaseNotes control
    sql = "INSERT INTO `Control` (`Dialog_`, `Control`, `Type`, `X`, `Y`, `Width`, `Height`, `Attributes`, `Property`, `Text`, `Control_Next`, `Help`) VALUES ('FinishedForm', 'CheckboxReleaseNotes', 'CheckBox', '18', '140', '343', '12', '3', 'LAUNCH_RN', '{\\VSI_MS_Sans_Serif13.0_0_0}" + checkboxTextForReleaseNotes + "', 'CloseButton', '|')";
    view = database.OpenView(sql);
    view.Execute();
    view.Close();

    // Modify the Order of the EndDialog event of the FinishedForm to 1
    sql = "SELECT `Dialog_`, `Control_`, `Event`, `Argument`, `Condition`, `Ordering` FROM `ControlEvent` WHERE `Dialog_`='FinishedForm' AND `Event`='EndDialog'";
    view = database.OpenView(sql);
    view.Execute();
    record = view.Fetch();
    record.IntegerData(6) = 1;
    view.Modify(msiViewModifyReplace, record);
    view.Close();

    // Insert the Event to launch the release notes
    sql = "INSERT INTO `ControlEvent` (`Dialog_`, `Control_`, `Event`, `Argument`, `Condition`, `Ordering`) VALUES ('FinishedForm', 'CloseButton', 'DoAction', 'OPEN_RN', 'LAUNCH_RN=1', '0')";
    view = database.OpenView(sql);
    view.Execute();
    view.Close();

    // Insert the custom action to open the release notes when finished
    sql = "INSERT INTO `CustomAction` (`Action`, `Type`, `Source`, `Target`) VALUES ('OPEN_RN', '210', '" + fileIdForReleaseNotes + "', '')";
    view = database.OpenView(sql);
    view.Execute();
    view.Close();

    database.Commit();
}
catch (e)
{
    WScript.StdErr.WriteLine(e);
    WScript.Quit(1);
} 
```

我知道自定义操作的类型“210”不是正确的......但是有吗？或者我真的必须通过启动 Jscript 或 VBScript 来完成我的工作吗？

编辑：代码结束。还尝试通过“vdproj”属性添加自定义操作，但由于文件不兼容而被拒绝。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T04:08:54.537

以下所有内容均未经测试。

我认为您希望[自定义操作类型 34](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368092(v=vs.85).aspx)以及[msidbCustomActionTypeAsync + msidbCustomActionTypeContinue](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368071(v=vs.85).aspx)以 ASync/NoWait 运行它。所以自定义动作类型 34+192=226。

`Source`，根据文档，不必与目标可执行文件位于同一目录。

`Target`是...

> CustomAction 表的 Target 列包含可执行文件的完整路径和名称，后跟可执行文件的可选参数。可执行文件的完整路径和名称是必需的。长文件名或路径必须使用引号。该值被视为格式化文本，并且可能包含对属性、文件、目录或其他格式化文本属性的引用。

您可以使用[“启动”shell 命令](http://www.computerhope.com/starthlp.htm)来使用 shell 加载文本文件。这将使用用户的默认文本文件查看器打开文本文件。您需要 start.exe 的完整路径和发行说明的完整路径。请注意文档如何说它将在`Target`现场进行字符串替换。[有一种字符串格式](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368609%28v=vs.85%29.aspx)可以获取给定`File`表键的文件的完整路径。

> 如果找到 [#filekey] 形式的子字符串，则将其替换为文件的完整路径，并将值 filekey 用作文件表的键。

综上所述，以下可能适用于`Target`：

```
"[SystemFolder]start.exe" "[#someFileKey]" 
```

* * *

话虽如此，如果您要执行更多这些自定义操作，我真的会研究[Wix](https://stackoverflow.com/questions/tagged/wix)并编写您自己的自定义操作。Wix 将使您免于运行此 javascript 后期构建。创作您自己的自定义操作可让您直接访问 .NET 或 Windows API。例如，在 C# 中使用 shell 打开文件[非常简单](https://stackoverflow.com/questions/811521/how-do-i-open-a-file-using-the-shells-default-handler/811543#811543)。

# php - 使用分块编码的 PHP 音频传输

> ID：16057260
> 
> 赞同：1
> 
> 时间：2013-04-17T10:06:44.997
> 
> 标签：php, audio, audio-streaming, chunked-encoding

我需要帮助，我正在开发流式音频系统，但我遇到了分块传输编码的问题，实际上我不知道如何让它在 IOS、Android 等设备上可用。有没有分块编码的替代方案？这是我的代码：

```
<?php
header('Transfer-Encoding: chunked');
header('Content-Type:audio/mpeg');
header('Connection: keep-alive');
ob_clean();
flush();

$buffer = '';
    $handle = fopen($filepath, 'rb');
    if($handle === false){
        return false;
    }

    while(!feof($handle)){
        $buffer = fread($handle, 8192);

        echo sprintf("%x\r\n", strlen($buffer));
        echo $buffer;
        echo "\r\n";

        ob_flush();
        flush();
    }

    echo sprintf("%x\r\n", 0);
    echo "\r\n";

    fclose($handle);
?> 
```

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:54:19.967

2.3 之前的 Android 不支持对其自己的播放器进行分块编码。实现自己的客户端的其他参与者也可能有问题。我没有测试过iOS。对于许多桌面流媒体客户端来说，分块编码也存在问题。最好不要使用它以最大限度地提高兼容性。

有两种方法可以做到这一点。首先是返回`HTTP/1.0`响应。这意味着您不必指定内容长度，并且响应会在服务器停止发送时停止。

第二种方式与第一种方式类似，但允许您使用`HTTP/1.1`. 只需设置标题`Connection: close`。然后，您不必指定内容长度，也不必以分块编码发送数据。

# java - 使用 SWTBot 自动化第三方应用程序。可能吗？

> ID：16057261
> 
> 赞同：0
> 
> 时间：2013-04-17T10:06:45.070
> 
> 标签：java, automation, swtbot

我有一个 SWT 应用程序，我想使用 SWTBot 实现自动化。可能吗？如果是，如何？

我在网上找到的所有示例似乎更多地是关于测试您自己的应用程序，而不是启动第三方应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:20:47.060

如果有问题的应用程序不是可以安装*SWTBot的**Eclipse RCP*应用程序，我认为这是不可行的。我不认为*SWTBot*可以控制另一个进程，即使它是 Java 进程。

 **唯一想到的是某种[-Xbootclasspath:](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/java.html) JAR，它将在该应用程序中*启动*某种“远程控制服务器”并允许*SWTBot*向它发出命令。**

# python - PyTables - 条件语法 - 字符串切片可能吗？

> ID：16057263
> 
> 赞同：0
> 
> 时间：2013-04-17T10:06:47.273
> 
> 标签：python, pytables

我在查询表时天真地尝试了这个：

`rows = [ x['title'] for x in table.where("""title[-11:] == 'string ends'""") ]`

导致：TypeError：'VariableNode'对象没有属性' **getitem** '

阅读条件语法文档，没有提到切片。

我是否可以得出结论，我只能查询完整的字符串？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:31:21.900

不幸的是，PyTables 不能在查询中使用索引。这是 numexpr [1] 中支持的操作的限制。所以是的，您现在只能查询完整的字符串。我相信他们会欢迎任何拉取请求。

1.  [http://code.google.com/p/numexpr/wiki/UsersGuide#Supported_operators](http://code.google.com/p/numexpr/wiki/UsersGuide#Supported_operators)

# java - Java：正则表达式替换字符串

> ID：16057269
> 
> 赞同：0
> 
> 时间：2013-04-17T10:07:14.040
> 
> 标签：java, regex, replace

考虑以下字符串：

```
s = "Ralph was walking down the street, he saw Mary and fell in love with her. Judy loves her hair." 
```

我有一个`ArrayList<ArrayList<String>> anaphora`正确的匹配和句子编号以及`ArrayList<String> sentences`来自`s`. 两者看起来像这样：

```
anaphora.get(0) = [0, Ralph, he]
anaphora.get(1) = [0, Mary, her]
anaphora.get(2) = [0, the street]
anaphora.get(3) = [1, Judy, her]
anaphora.get(4) = [1, her hair]

sentences.get(0) = Ralph was walking down the street, he saw Mary and fell in love with her.
sentences.get(1) = Judy loves her hair. 
```

现在尝试替换子字符串时出现问题。

```
sentence = sentences.get(0);
if (anaphora.get(0).size()>2){
    example1 = sentence.replaceAll("[^a-zA-Z]"+anaphora.get(0).get(i)+"[^a-zA-Z]", anaphora.get(0).get(1));
    example2 = sentence.replaceAll(anaphora.get(0).get(i), anaphora.get(0).get(1));
} 
```

输出将是：

```
example1 = Ralph was walking down the street,Ralphsaw Mary and fell in love with her.
example2 = Ralph was walking down tRalph street, Ralph saw Mary and fell in love with Ralphr. 
```

预期的输出将是这样一种方式，即 'he' 被 'Ralph' 取代：

```
Ralph was walking down the street, Ralph saw Mary and fell in love with her. 
```

**问题**如何修复我的正则表达式替换，以便只替换正确的“他”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:17:28.263

如上所述，您可以使用单词边界，例如：

```
String s = "Ralph was walking down the street, he saw Mary and fell in love with her.";
System.out.println(s.replaceAll("\\bhe\\b", "Ralph")); 
```

印刷：

> 拉尔夫走在街上，拉尔夫看到玛丽并爱上了她。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:18:19.870

你需要小心空白。所以你的正则表达式应该只做替换，如果被替换的字符串是一个单词。

# java - 如何在 Android 的警报对话框中添加多项选择复选框？

> ID：16057274
> 
> 赞同：3
> 
> 时间：2013-04-17T10:07:44.130
> 
> 标签：java, android, radio-button, checkbox, android-alertdialog

我在 android 应用程序中创建了菜单“同步”。当我们单击“同步”警报时，会打开一个 4 个复选框布局。我想要的是让它们发挥作用，就像我点击 15 分钟然后自动取消点击其他选项一样。

```
@Override
public boolean onCreateOptionsMenu(Menu menu) 
{
MenuInflater inflater = getMenuInflater();
inflater.inflate(R.menu.action_menu, menu);
    return true;
}       
@Override
public boolean onOptionsItemSelected(MenuItem item)
{
    switch (item.getItemId())
    {
        case R.id.menu_settings:
            alertDialog = new AlertDialog.Builder(HomePage.this).create(); //Read Update
            LayoutInflater adbInflater = this.getLayoutInflater();
            View checkboxLayout = adbInflater.inflate(R.layout.sync_layout, null);
            defaultchkbox = (CheckBox)checkboxLayout.findViewById(R.id.defaultchkbox);
            after15mint = (CheckBox)checkboxLayout.findViewById(R.id.after15mint);
            after30mint = (CheckBox)checkboxLayout.findViewById(R.id.after30mint);
            after45mint = (CheckBox)checkboxLayout.findViewById(R.id.after45mint);
            alertDialog.setView(checkboxLayout);
            alertDialog.setTitle("Synchronization");
            alertDialog.setMessage("Choose");

            alertDialog.setButton(Dialog.BUTTON_POSITIVE,"Save changes", new DialogInterface.OnClickListener()
            {
                @Override
                public void onClick(DialogInterface dialog, int which)
                {
                    // TODO Auto-generated method stub
                    boolean checkBoxResult = false; 
                        if(after15mint.isChecked())
                        {
                            Toast.makeText(getApplicationContext(), "15 Minute checked", Toast.LENGTH_LONG).show();
                            checkBoxResult = true;
                        }
                        else if(after30mint.isChecked())
                        {
                            Toast.makeText(getApplicationContext(), "30 Minute checked", Toast.LENGTH_LONG).show();
                            checkBoxResult = true;
                        }
                        else if(after45mint.isChecked())
                        {
                            Toast.makeText(getApplicationContext(), "45 Minute checked", Toast.LENGTH_LONG).show();
                            checkBoxResult = true;
                        }   
                        else{
                            Toast.makeText(getApplicationContext(),     "Default", Toast.LENGTH_LONG).show();
                        }
                }
            });
            alertDialog.setButton(Dialog.BUTTON_NEGATIVE, "Cancel", new DialogInterface.OnClickListener()
            {
                public void onClick(DialogInterface dialog, int which) 
                {
                    alertDialog.dismiss();
                }
            });
            alertDialog.show(); 
            return true;
default:
            return super.onOptionsItemSelected(item);
    }
} 
```

但我对警报中复选框的工作有点困惑。建议会有很大帮助。谢谢你。:)![在此处输入图像描述](https://i.stack.imgur.com/iGJho.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T10:17:52.453

看起来您需要使用嵌套在 RadioGroup 中的单选按钮。然后它将只允许您一次选择一个选项。

有关 RadioGroup 的更多信息，请查看：http: [//developer.android.com/reference/android/widget/RadioGroup.html](http://developer.android.com/reference/android/widget/RadioGroup.html)

有关创建单选按钮的更多信息，请查看：

[http://developer.android.com/reference/android/widget/RadioButton.html](http://developer.android.com/reference/android/widget/RadioButton.html)

特别是对于您的代码，您必须在 R.layout.sync_layout 的 RadioGroup 中定义 RadioButtons，例如

```
<RadioGroup
    android:id="@+id/syncGroup"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <RadioButton
        android:id="@+id/defualt"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text= "Default" 
        android:checked="true" />

    <RadioButton
        android:id="@+id/minute15"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text= "15 Minute" />

     <RadioButton
         android:id="@+id/minute30"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:text= "30 Minute" />

      <RadioButton
          android:id="@+id/minute45"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:text= "45 Minute" />

</RadioGroup> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T10:28:41.827

请参阅[此](http://developer.android.com/guide/topics/ui/dialogs.html#AddingAList)链接。

```
@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
    builder.setTitle(R.string.pick_color);
           .setItems(R.array.colors_array, new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int which) {
               // The 'which' argument contains the index position
               // of the selected item
           }
    });
    return builder.create();
} 
```

# mysql - 我如何从我的表中获取超过 2 天的记录

> ID：16057275
> 
> 赞同：2
> 
> 时间：2013-04-17T10:07:45.990
> 
> 标签：mysql

为什么我的间隔日不能在 mysql 语句中工作。

我想要那些超过 2 天的人。这就是我尝试的方式。

```
SELECT t.*, ct.*,cd.*, max(t.transactiontime) as maxtime
FROM exp_channel_titles as ct
LEFT JOIN transactions as t on (ct.entry_id = t.restaurant_id)
LEFT JOIN exp_channel_data as cd on (ct.entry_id = cd.entry_id)
WHERE t.cardid > 0 
and maxtime < ( CURDATE() - INTERVAL 2 DAY )
and t.restaurant_id > 0
and ct.status= 'open'
Group by ct.entry_id
order by maxtime desc 
```

这是我当前的输出

```
TransactionID          Title           TransactionTime
23132                  Locaton         2013-05-17 10:02:04
23131                  Novuel          2013-05-16 16:26:45
23128                  Mama Rosa       2013-05-15 14:42:44
23126                  Rohan           2013-05-14 12:46:56 
```

这是我想要的输出

```
TransactionID          Title           Date
23128                  Mama Rosa       2013-05-15 14:42:44
23126                  Rohan           2013-05-14 12:46:56 
```

但我收到了这个错误

```
Error Number: 1054

Unknown column 'maxtime' in 'where clause'

SELECT t.*, ct.*,cd.*, max(t.transactiontime) as maxtime FROM exp_channel_titles as ct LEFT JOIN transactions as t on (ct.entry_id = t.restaurant_id) LEFT JOIN exp_channel_data as cd on (ct.entry_id = cd.entry_id) WHERE t.cardid > 0 and maxtime < ( CURDATE() - INTERVAL 2 DAY ) and t.restaurant_id > 0 and ct.status= 'open' Group by ct.entry_id order by maxtime desc

Filename: libraries/Functions.php(656) : eval()'d code

Line Number: 46 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T10:12:33.373

尝试：

```
maxtime < DATE_FORMAT( NOW() - INTERVAL 2 DAY ,'%Y-%m-%d 23:59:59') 
```

`CURDATE()`返回`DATE`类型，你需要`DATETIME`类型，所以你应该使用`NOW()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T10:15:56.150

在您的查询中，您使用 CURDATE 但据我了解，您的日期列是日期时间数据类型，所以..

现在（）= 2008-11-11 12:45:34

CURDATE() = 008-11-11

CURTIME() = 12:45:34

这是 mysql 函数返回的内容。在这里使用正确的功能

```
maxtime < ( CURDATE() - INTERVAL 2 DAY ) 
```

将 CURDATE() 更改为 NOW() 但这不是你的解决方案。你需要找出答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T11:23:23.837

您不能在 where 子句中使用别名，使用 max(t.transactiontime)< ( now() - INTERVAL 2 DAY )

# jquery - 使用 jQuery html() 不保留 css？

> ID：16057276
> 
> 赞同：2
> 
> 时间：2013-04-17T10:07:51.057
> 
> 标签：jquery, css, ruby-on-rails-3

我有以下html（[小提琴链接](http://jsfiddle.net/7NM2j/1/)）

```
 <div class="thumbnail_follow" id="follow_btn-2">
   <a  class="btn btn-primary" data-method="post" data-remote="true" rel="nofollow">Follow</a>
 </div> 
```

单击该按钮后，我希望该按钮将其自身替换为带有 h​​tml 的取消关注按钮

```
 <div class="thumbnail_follow" id="follow_btn-2">
<a href="/users/2/unfollow" class="btn btn-danger" data-method="post" data-remote="true" rel="nofollow">Unfollow</a>
</div> 
```

所以基本上，改变按钮和它指向的链接

我像这样使用 jQuery html()

```
 $("#follow_btn-2").html('<a class=\"btn btn-danger\" data-method=\"post\" data-remote=\"true\" rel=\"nofollow\">Unfollow<\/a>'); 
```

请注意，这是通过代码中的 rails ujs 生成的

```
$("div[id='follow_btn-<%= @user.id %>']").html('<%=j link_to "Unfollow", unfollow_user_path(@user), :remote => true, :method => :post , :class=>"btn btn-danger"%>'); 
```

从[jsfiddle](http://jsfiddle.net/7NM2j/1/)可以看出，问题在于，一旦按钮被红色按钮替换，它就会跳开，就好像它的样式搞砸了一样。

我不明白是什么导致了跳转以及如何修复它。它是 css 问题还是 jQuery 使用不当？

这又是[小提琴](http://jsfiddle.net/7NM2j/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T10:12:40.190

您需要增加容器的宽度以正确适合您的按钮。

```
width: 200px !important; 
```

你的红色按钮比你的蓝色按钮有更多的宽度

[**小提琴**](http://jsfiddle.net/mohammadAdil/7NM2j/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T10:15:34.453

这是因为 Follow 比 Unfollow 短，而且您的容器（thumbnail_car）太小。

# r - 在 Twitter 上使用 ROAuth 进行身份验证时未生成 PIN

> ID：16057277
> 
> 赞同：2
> 
> 时间：2013-04-17T10:07:58.173
> 
> 标签：r, twitter-oauth, roauth

我正在尝试使用 R 向 Twitter 进行身份验证，但我无法获得 PIN。

我的代码如下：

```
download.file(url="http://curl.haxx.se/ca/cacert.pem", destfile="cacert.pem")

reqURL <- "http://api.twitter.com/oauth/request_token"
accessURL <- "http://api.twitter.com/oauth/access_token"
authURL <- "http://api.twitter.com/oauth/authorize"
consumerKey <- "foo"
consumerSecret <- "bar"
twitCred <- OAuthFactory$new(consumerKey=consumerKey,
                             consumerSecret=consumerSecret,
                             requestURL=reqURL,
                             accessURL=accessURL,
                             authURL=authURL
                             )
twitCred$handshake(cainfo="cacert.pem", ssl.verifypeer=FALSE) 
```

但是，当我取回授权 URL 并输入它时，我仍然没有得到 PIN：我只有一个按钮来授权应用程序，然后我最终回到了我之前指定的返回 URL。

这似乎与这个问题非常相似， [在 R oauth 身份验证期间，推特 PIN 码出现在哪里？](https://stackoverflow.com/questions/16042271/where-does-twitter-pin-code-appear-during-r-oauth-authentication)但是那里的补救措施（确保请求、访问和身份验证 URL 都是 http 而不是 https）对我不起作用。

我在 Windows 7 上运行 R 3.0.0，ROAuth 是 0.9.2，twitteR 1.1.0 - 其中任何一个都表明为什么会出现这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T16:10:36.780

授权应用后从 Twitter 返回的 url 有一个“oauth_verifier”。我将其用作 R 中的 PIN。我可以将其复制并粘贴到 R 中要求输入 PIN 的位置。在我按 Enter 之前，R 中没有出现任何文本。PIN 似乎被接受了。我尝试了 registerTwitterOAuth(cred) 并返回了 TRUE 响应。但是，我仍然无法从搜索中获取任何返回的信息：

download.file(url="http://curl.haxx.se/ca/cacert.pem", destfile="cacert.pem") 选项(RCurlOptions = list(cainfo = system.file("CurlSSL", "cacert .pem", package = "RCurl")))
r_stats<- searchTwitter("#Rstats", n=100, cainfo="cacert.pem")

[1] “SSL 证书问题，验证 CA 证书是否正常。详细信息：\n错误：14090086:SSL 例程：SSL3_GET_SERVER_CERTIFICATE:certificate verify failed” twInterfaceObj$doAPICall(cmd, params, "GET", ...) 中的错误: 错误：SSL证书问题，验证CA证书是否正常。详细信息：错误：14090086：SSL 例程：SSL3_GET_SERVER_CERTIFICATE：证书验证失败

# iphone - 在 Objective C 中创建 JSON 格式

> ID：16057281
> 
> 赞同：6
> 
> 时间：2013-04-17T10:08:13.497
> 
> 标签：iphone, ios, objective-c, json, nsdictionary

对于我想要创建格式如下所述的 JSON 的应用程序，

```
"Students" : {
    "results": {
        "Grade1": {
            "studentresult": "pass",
            "marksheet": "provided"
        },
        "ID": 01,
        "Name": "Student1", 
    }
} 
```

我正在使用以下代码来创建相同的，

```
NSMutableDictionary *gradedetails = [[NSMutableDictionary alloc] init];
[gradedetails setObject:@"pass" forKey:@"studentresult"];
[gradedetails setObject:@"provided" forKey:@"marksheet"];

NSMutableDictionary *sdetails = [[NSMutableDictionary alloc] init];
[sdetails setObject:@"01" forKey:@"ID"];
[sdetails setObject:@"Name" forKey:@"Student1"];

NSMutableDictionary *grade = [[NSMutableDictionary alloc] init];
[grade setObject:gradedetails forKey:@"Grade1"];

NSMutableArray *rarray = [[NSMutableArray alloc] init];
[rarray addObject:grade];
[rarray addObject:sdetails];

NSMutableDictionary *results = [[NSMutableDictionary alloc] init];
[results setObject:rarray forKey:@"results"];

NSMutableDictionary *stud = [[NSMutableDictionary alloc] init];
[stud setObject:rdic forKey:@"Students"];

NSData *jsondata = [NSJSONSerialization dataWithJSONObject:stud options:NSJSONWritingPrettyPrinted error:&error]; 
```

我得到以下格式，

```
"Students" : {
"results" : [
  {
    "Grade1" : {
      "studentresult" : "pass",
      "marksheet" : "provided" 
    }
  },
  {
    "ID" : "01",
    "Name" : "Student1"
  }
] 
```

} }

有人可以帮我创建格式。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T10:18:24.507

所需数据，您可以通过这种方式获得。只需将该螺柱字典转换为 JSON 或您想要的任何其他格式。删除该数组，您不需要它，正如您在所需格式中提到的那样。

```
NSMutableDictionary *gradedetails = [[NSMutableDictionary alloc] init];
[gradedetails setObject:@"pass" forKey:@"studentresult"];
[gradedetails setObject:@"provided" forKey:@"marksheet"];

NSMutableDictionary *sdetails = [[NSMutableDictionary alloc] init];
[sdetails setObject:@"01" forKey:@"ID"];
[sdetails setObject:@"Name" forKey:@"Student1"];
[sdetails setObject:gradedetails forKey:@"Grade1"];

NSMutableDictionary *results = [[NSMutableDictionary alloc] init];
[results setObject:sdetails forKey:@"results"];

NSMutableDictionary *stud = [[NSMutableDictionary alloc] init];
[stud setObject:results forKey:@"Students"];

NSLog(@"Required Format Data is %@",stud); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T10:27:18.337

取决于您的代码：

```
NSMutableDictionary *gradedetails = [[NSMutableDictionary alloc] init];
[gradedetails setObject:@"pass" forKey:@"studentresult"];
[gradedetails setObject:@"provided" forKey:@"marksheet"];

NSMutableDictionary *results = [[NSMutableDictionary alloc] init];
[results setObject:gradedetails forKey:@"Grade1"];
[results setObject:@"01" forKey:@"ID"];
[results setObject:@"Name" forKey:@"Student1"];

NSMutableDictionary *stud = [[NSMutableDictionary alloc] init];
[stud setObject:results forKey:@"Students"]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T13:30:05.160

```
NSDictionary *gradedetails = @{@"studentresult" : @"pass", @"marksheet" : @"provided"};
NSDictionary *grade = @{ @"Grade1" : gradedetails}
NSDictionary *sdetails = @{@"ID" : @"01", @"Student1" : @"Name"};
NSArray *resultsArray = @[grade, sdetails];
NSDictionary *results= @{@"results" : resultsArray};
NSDictionary *stud = @{@"Students" : results};

NSData *jsondata = [NSJSONSerialization dataWithJSONObject:stud options:NSJSONWritingPrettyPrinted error:&error]; 
```

我想知道为什么很少有开发人员使用这种表示法

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T12:27:08.027

```
 check this code-
  NSMutableDictionary *students=[NSJSONSerialization JSONObjectWithData:webData        options:0 error:nil];
      for (NSDictionary *dictionofstudents in students)
      {
           NSMutableDictionary *results=[dictionofstudents objectForKey:@"results"];
           for (NSDictionary *dictionofresults in results)
           {
               NSMutableDictionary *grade1=[dictionofresults objectForKey:@"Grade1"];
               for (NSDictionary *dictionofgrade1 in grade1) 
               {
                   NSString *studentresult=[dictionofgrade1 objectForKey:@"studentresult"];
                   NSString *marksheet=[dictionofgrade1 objectForKey:@"marksheet"];
                   [arrayofstudentresult addObject:studentresult];
                   [arrayofmarksheet addObject:marksheet];
               }
               NSString *ID=[dictionofresults objectForKey:@"ID"];
               NSString *name=[dictionofresults objectForKey:@"Name"];
              [arrayofID addObject:ID];
              [arrayofname addObject:name];
           }
      } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T10:17:00.613

为了获得您想要的格式，您必须以该特定格式打包信息。

你的问题就在这里：

```
NSMutableArray *rarray = [[NSMutableArray alloc] init];
[rarray addObject:grade];
[rarray addObject:sdetails]; 
```

所需的格式没有数组，那么为什么要创建数组？

给你一个提示：

您应该正好创建 4 个字典，并且没有数组。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-17T10:22:01.710

```
NSMutableDictionary *dict = [[NSMutableDictionary alloc] init];
NSMutableDictionary *result = [[NSMutableDictionary alloc] init];
NSMutableDictionary *grade = [[NSMutableDictionary alloc] init];
[grade setValue:@"pass" forKey:@"studentresult"];
[grade setValue:@"provided" forKey:@"marksheet"];
[result setValue:grade forKey:@"Grade1"];
[result setValue:@"01" forKey:@"ID"];
[result setValue:@"Student1" forKey:@"Name"];
[dict setValue:result forKey:@"results"];

NSMutableDictionary *stdnt = [[NSMutableDictionary alloc] init];
[stdnt setValue:dict forKey:@"Students"];
NSError *error = nil;
NSData *jsondata = [NSJSONSerialization dataWithJSONObject:stdnt options:NSJSONWritingPrettyPrinted error:&error];

NSString *s = [[NSString alloc] initWithData:jsondata encoding:NSUTF8StringEncoding];
NSLog(@"%@",s); 
```

它可能会帮助你。

# pdf-generation - 使用 tcpdf 的 phpExcel 编写器在屏幕上显示二进制内容而没有保存提示

> ID：16057282
> 
> 赞同：0
> 
> 时间：2013-04-17T10:08:21.377
> 
> 标签：pdf-generation, phpexcel, tcpdf

我正在使用 PHPExcel 库来生成 excel 报告和 PDF 报告。Excel 报告生成良好，浏览器允许用户保存报告。但是当我使用 PHPExcel 编写器使用 tcpdf 库生成 PDF 时，它不会提示用户保存 PDF 并在屏幕上显示二进制字符，如下所示：

> %PDF-1.7 %���� 8 0 obj << /Type /Page /Parent 1 0 R /LastModified (D:20130417151157+05'30') /Resources 2 0 R /MediaBox [0.000000 0.000000 792.000000 612.000000] /CropBox [0.0000 0.000000 792.000000 612.0000] /bleedbox [0.000000 0.000000 792.000000 612.000000] /trimbox [0.000000 0.000000 792.000000 612.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ym处]

如果我将 PDF 保存在服务器上，我可以访问它并使用文档查看器正确查看报告。因此 PDF 本身没有损坏。

我使用的代码是

```
$rendererName = PHPExcel_Settings::PDF_RENDERER_TCPDF;
$rendererLibraryPath = 'library/tcpdf';
PHPExcel_Settings::setPdfRenderer(
$rendererName,
$rendererLibraryPath
);

$fullReportName = $reportName.".pdf";
$path = '/tmp/'.$fullReportName;
$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'PDF');
$objWriter->save($path);

header('Content-Type: application/pdf');
header('Content-Length: ' . filesize($path));  // File size
header('Content-Disposition: attachment;filename="'.$fullReportName.'"');

readfile($path); 
```

如果我直接从 writer 使用 php://output，而不是 readfile，则会看到相同的行为，如下所示：

```
$objWriter->save('php://output'); 
```

如何阻止二进制文件显示并提示用户下载文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-08T05:04:30.160

```
<?php
/**
 * PHPExcel
 *
 * Copyright (c) 2006 - 2015 PHPExcel
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2.1 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA
 *
 * @category   PHPExcel
 * @package    PHPExcel
 * @copyright  Copyright (c) 2006 - 2015 PHPExcel (http://www.codeplex.com/PHPExcel)
 * @license    http://www.gnu.org/licenses/old-licenses/lgpl-2.1.txt    LGPL
 * @version    ##VERSION##, ##DATE##
 */

/** Error reporting */
error_reporting(E_ALL);
ini_set('display_errors', TRUE);
ini_set('display_startup_errors', TRUE);
date_default_timezone_set('Europe/London');

define('EOL',(PHP_SAPI == 'cli') ? PHP_EOL : '<br />');

date_default_timezone_set('Europe/London');

/** PHPExcel_IOFactory */
require_once ('/Library/WebServer/Documents/library/excel/PHPExcel/IOFactory.php');

//  Change these values to select the Rendering library that you wish to use
//      and its directory location on your server
//$rendererName = PHPExcel_Settings::PDF_RENDERER_TCPDF;
//$rendererName = PHPExcel_Settings::PDF_RENDERER_MPDF;
$rendererName = PHPExcel_Settings::PDF_RENDERER_DOMPDF;
//$rendererLibrary = 'tcPDF5.9';
//$rendererLibrary = 'mPDF5.4';
$rendererLibrary = 'dompdf';
$rendererLibraryPath = '/Library/WebServer/Documents/library/'.$rendererLibrary;

$objPHPExcel = new PHPExcel();
// Set properties
$objPHPExcel->getProperties()->setCreator("Maarten Balliauw")
    ->setLastModifiedBy("Maarten Balliauw")
    ->setTitle("PDF Test Document")
    ->setSubject("PDF Test Document")
    ->setDescription("Test document for PDF, generated using PHP classes.")
    ->setKeywords("pdf php")
    ->setCategory("Test result file");

header('Content-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');
        header('Content-Disposition: attachment; filename="swap.pdf');
       header('Cache-Control: max-age=0');
// Add some data
$objPHPExcel->setActiveSheetIndex(0)
    ->setCellValue('A1', 'Hello')
    ->setCellValue('B2', 'world!')
    ->setCellValue('C1', 'Hello')
    ->setCellValue('D2', 'world!');
// Miscellaneous glyphs, UTF-8
$objPHPExcel->setActiveSheetIndex(0)
    ->setCellValue('A4', 'Miscellaneous glyphs')
    ->setCellValue('A5', 'éàèùâêîôûëïüÿäöüç');

echo date('H:i:s') , " Hide grid lines" , EOL;
$objPHPExcel->getActiveSheet()->setShowGridLines(true);

echo date('H:i:s') , " Set orientation to landscape" , EOL;
$objPHPExcel->getActiveSheet()->getPageSetup()->setOrientation(PHPExcel_Worksheet_PageSetup::ORIENTATION_LANDSCAPE);

echo date('H:i:s') , " Write to PDF format using {$rendererName}" , EOL;

if (!PHPExcel_Settings::setPdfRenderer(
        $rendererName,
        $rendererLibraryPath
    )) {
    die(
        'NOTICE: Please set the $rendererName and $rendererLibraryPath values' .
        EOL .
        'at the top of this script as appropriate for your directory structure'
    );
}

$callStartTime = microtime(true);

$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'PDF');
$objWriter->setSheetIndex(0);
//$objWriter->save('phpexcel_pdf.pdf');
$objWriter->save('php://output');
$callEndTime = microtime(true);
$callTime = $callEndTime - $callStartTime;
echo date('H:i:s') , " File written to " , str_replace('.php', '_'.$rendererName.'.pdf', pathinfo(__FILE__, PATHINFO_BASENAME)) , EOL;
echo 'Call time to write Workbook was ' , sprintf('%.4f',$callTime) , " seconds" , EOL;
// Echo memory usage
echo date('H:i:s') , ' Current memory usage: ' , (memory_get_usage(true) / 1024 / 1024) , " MB" , EOL;

// Echo memory peak usage
echo date('H:i:s') , " Peak memory usage: " , (memory_get_peak_usage(true) / 1024 / 1024) , " MB" , EOL;

// Echo done
echo date('H:i:s') , " Done writing files" , EOL;
echo 'File has been created in ' , getcwd() , EOL;

    enter code here 
```

# iphone - AFNetworking HTTP POST 上传图像在接近完成时停止

> ID：16057283
> 
> 赞同：2
> 
> 时间：2013-04-17T10:08:26.173
> 
> 标签：iphone, ios, cocoa-touch, http-post, afnetworking

我正在使用下面的代码来 HTTP POST 一个包含 JPEG 图像的多部分 Web 表单。

**代码：**

```
NSMutableDictionary *params = [[NSMutableDictionary alloc] init];
[params setObject:nameField.text forKey:@"name"];
[params setObject:emailField.text forKey:@"email"];
[params setObject:titleField.text forKey:@"title"];
[params setObject:dateString forKey:@"link"];
[params setObject:descriptionTV.text forKey:@"content"];
[params setObject:tag forKey:@"tags"];

NSData* sendData = UIImageJPEGRepresentation(uploadedPhoto.image, 1.0);
AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:[NSURL URLWithString:@"http://example.com/"]];
NSMutableURLRequest *afRequest = [httpClient multipartFormRequestWithMethod:@"POST"
                                                                       path:@"form"
                                                                 parameters:params
                                                  constructingBodyWithBlock:^(id <AFMultipartFormData>formData)
                                  {
                                      [formData appendPartWithFileData:sendData
                                                                  name:@"image"
                                                              fileName:@"image.jpeg"
                                                              mimeType:@"image/jpeg"];
                                  }];

AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:afRequest];
[operation setUploadProgressBlock:^(NSUInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite) {

    NSLog(@"Sent %lld of %lld bytes", totalBytesWritten, totalBytesExpectedToWrite);
}];

[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
    NSLog(@"SUCCESS! %@", operation.responseString);
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    NSLog(@"FAILED!!! %@", operation.responseString);
}];

[operation start]; 
```

**网页表格：**

```
<input type="text" name="name" id="name" value="" />
<input type="text" name="email" id="email" value="" />
<input type="text" name="title" id="title" value="" />
<input type="text" name="link" id="link" value="" />
<input type="text" name="content" id="content" value="" />
<input type="text" name="tags" id="tags" value="" />
<input type="file" name="image" id="image" value="" /> 
```

每次我运行代码时，图像上传都很顺利，直到上传进度即将完成（约 99.5% 完成）。该操作的`completionBlockWithSuccess:failure:`块永远不会启动，应用程序只是冻结在那里。

谁能帮我解决这个问题？我不知道我在这里做错了什么。

**编辑：**

我做了更多的调查，发现即使请求路径无效，它也一样，但我很确定我没有输入错误的表单路径。另外，当我用 替换`constructingBodyWithBlock`块时`nil`，它会正常工作。

**编辑2：**

我在 AFNetworking 的 Github 上做了一些窥探，发现[了 Github 问题帖子](https://github.com/AFNetworking/AFNetworking/issues/746)和[Stack Overflow 上的类似帖子](https://stackoverflow.com/questions/14415093/afnetworking-with-afjsonrequestoperation-and-filedata-never-completes)。我尝试了使用`[httpClient enqueueHTTPRequestOperation:operation];`而不是`[operation start];`制作`httpClient`单例，但同样的问题仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T14:52:56.767

您是否尝试`NSError`在失败回调中打印？也许服务器正在期待另一种 mime 类型。

# c++ - Visual C++ 中的未知值

> ID：16057284
> 
> 赞同：1
> 
> 时间：2013-04-17T10:08:26.267
> 
> 标签：c++, visual-studio, math

在 Visual Studio C++ 中进行一些计算时，我发现最终`angle`值为`-1.#IND000000000000`

这个值是什么意思？是否超出范围？以下是我试图实现的代码*如何计算圆上两点之间的弧角？*[从这里](https://stackoverflow.com/a/2994683/603125)提到的这个公式
cos ^(-1) ((x [1] x [2] + y [1] y [2] + z [1] z [2] ) / r ^(2 ))

**代码**

```
double x = vec1X * vec2X;
double y = vec1Y * vec2Y;
double r = sqrt(((vec2X - originX) * (vec2X - originX))+((vec2Y - originY) * (vec2Y - originY)));
angle = acos ((x + y) / r*r); 
```

重现错误的样本值

```
vec1X = 91.094001770019531;
vec1Y = 147.74990844726562;
vec2X = 94.163322448730469;
vec2Y = 187.93711853027344;
originX = 136.79920959472656;
originY = 223.69624328613281; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T10:19:58.837

这意味着结果是不确定的；更标准的术语是“不是数字”或“NaN”。

这里可能的原因是：

*   的论点`sqrt`是否定的
*   除法的两个操作数都为零
*   的参数`acos`在范围之外`[-1,1]`。

任何这些都可能由于浮点舍入错误而发生，即使在数学上它们不应该是可能的；因此，在将值传递给输入范围有限的函数之前，您应该始终检查它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T10:18:45.340

这是因为`acos`参数应该位于 [-1.0 .. 1.0] 中，而您的不是。例如，如果`r`接近于零，则您有很大的错误。如果您确定，该输入是可以的，然后尝试将小于 -1 的值映射到 -1，并将大于 1 的值映射到 1

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T10:18:55.417

这是一个[NaN](https://stackoverflow.com/questions/347920/what-do-1-inf00-1-ind00-and-1-ind-mean)值。

它实际上意味着一个“不确定”的值，这意味着它可以是“任何东西”。将 0 除以 0 是“不确定的”。

不计算这些，acos 中参数的值是多少？（应该在 -1 和 1 之间）

# android - Android - 手动将视图膨胀到线性布局

> ID：16057285
> 
> 赞同：1
> 
> 时间：2013-04-17T10:08:27.873
> 
> 标签：android, android-layout, android-view

我有一个包含许多嵌套布局的布局，如下所示。但是对于 LinearLayout 之一（在我的情况下为 contentPanel），我需要将大约 10 个不同布局的视图（例如列表项）膨胀到这个 contentPanel 上。我该怎么做？

我的布局结构：

```
<ScrollView>
  <LinearLayout>
  <RelativeLayout>
  <LinearLayout> ///contentPanel
  <LinearLayout>
<ScrollView> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T15:36:30.893

正如评论所暗示的那样，您当然可以使用视图存根，因为这些是相当便宜的视图元素。

但是，如果这 10 个不同布局的视图本身非常昂贵，您可能仍然会发现这样做并不是最有效的方式。

我猜你正在考虑手动膨胀，因为你真的想要这 10 个元素的列表视图的好处——所有这些好东西，比如视图回收，以及使用[ViewHolder](http://developer.android.com/training/improving-layouts/smooth-scrolling.html#ViewHolder)等高效模式的机会，但你确实不想使用滚动视图中的列表视图，因为那是个[坏主意](https://stackoverflow.com/questions/3495890/how-can-i-put-a-listview-into-a-scrollview-without-it-collapsing?answertab=votes#tab-top)

好吧，您可能仍然可以使用列表视图。不要使用外部滚动视图。将布局分成两组——内容面板的下方和上方。为 10 个不同的视图创建一个列表视图，然后将两个组作为[headerView](http://developer.android.com/reference/android/widget/ListView.html#addHeaderView%28android.view.View%29)和[footerView 创建到该列表视图](http://developer.android.com/reference/android/widget/ListView.html#addFooterView%28android.view.View%29)

也许这会有所帮助。

# c# - 如何使用c#将Excel文件的特定单元格导入datagridview

> ID：16057286
> 
> 赞同：0
> 
> 时间：2013-04-17T10:08:29.060
> 
> 标签：c#, datagridview, oledb, windows-forms-designer

我想将 Excel 文件的特定单元格导入 datagridview 的特定单元格。

我在这里遵循了许多导入 Excel 表格的教程，但由于我只需要 datagridview 特定位置的特定单元格，因此我调整了代码。

而不是：`DataGridView1.DataSource = dt;`我做了：`dataGridView1.Rows[0].Cells[0].Value = dt;`但它不起作用。

任何人都可以帮助我吗？

谢谢

这是代码：

```
string constr = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + textBox1.Text + @";Extended Properties=""Excel 12.0 Macro;HDR=YES;ImportMixedTypes=Text;TypeGuessRows=0""";

        OleDbConnection con = new OleDbConnection(constr);

        //specific cell 1 - product "code"
        OleDbDataAdapter sda = new OleDbDataAdapter("Select * From [ARTIGOS$A" + textBox3.Text + ":A" + textBox3.Text + "]", con);
        //specific cell 2 - product "description"
        OleDbDataAdapter sdb = new OleDbDataAdapter("select * From [ARTIGOS$B" + textBox3.Text + ":B" + textBox3.Text + "]", con);
        //specific cell 3 - product "price"
        OleDbDataAdapter sdc = new OleDbDataAdapter("Select * From [ARTIGOS$I" + textBox3.Text + ":I" + textBox3.Text + "]", con);

        DataTable dt = new DataTable();
        DataTable dt2 = new DataTable();
        DataTable dt3 = new DataTable();

        sda.Fill(dt);
        sdb.Fill(dt2);
        sdc.Fill(dt3);

        dataGridView1.Rows.Add();
        dataGridView1.Rows[0].Cells[0].Value = dt;
        dataGridView1.Rows[0].Cells[1].Value = dt2;
        dataGridView1.Rows.Add();
        dataGridView1.Rows[0].Cells[2].Value = textBox2.Text;
        dataGridView1.Rows[0].Cells[3].Value = dt3; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:12:26.763

**参考以下代码：**

```
private Excel.Application App;
private Excel.Range rng = null;
private void button1_Click_1(object sender, EventArgs e) {
    OpenFileDialog OFD = new OpenFileDialog();
    OFD.Filter = "Excel Worksheets|*.xls;*.xlsx;*.xlsm;*.csv";
    if (OFD.ShowDialog() == System.Windows.Forms.DialogResult.OK) {
        App = new Excel.Application();
        App.Visible = true;
        App.Workbooks.Open(OFD.FileName);
    }
    else { return; }

    try { rng = (Excel.Range)App.InputBox("Please select a range", "Range Selection", Type: 8); }
    catch {  } // user pressed cancel on input box

    if (rng != null) { 
        DataTable dt = ConvertRangeToDataTable();
        if (dt != null) { dataGridView1.DataSource = dt; }
    }
    _Dispose();
}
private DataTable ConvertRangeToDataTable() {
    try {
        DataTable dt = new DataTable();
        int ColCount = rng.Columns.Count;
        int RowCount = rng.Rows.Count;

        for (int i = 0; i < ColCount; i++) {
            DataColumn dc = new DataColumn();
            dt.Columns.Add(dc);
        }
        for (int i = 1; i <= RowCount; i++) {
            DataRow dr = dt.NewRow();
            for (int j = 1; j <= ColCount; j++) { dr[j - 1] = rng.Cells[i, j].Value2; }
            dt.Rows.Add(dr);
        }
        return dt;
    }
    catch { return null; }
}
private void _Dispose() {
    try { Marshal.ReleaseComObject(rng); }
    catch { }
    finally { rng = null; }
    try { App.Quit(); Marshal.ReleaseComObject(App); }
    catch { }
    finally { App = null; }
} 
```

有关将特定范围从 xls 文件导入到 gridview 的详细信息，请参阅以下问题：

[在c#中将特定范围从xls文件导入datagridview](https://stackoverflow.com/questions/12031744/import-a-specific-range-from-xls-file-to-datagridview-in-c-sharp)

# python - 在每个字符之间添加点。最Pythonic的方式是什么？

> ID：16057289
> 
> 赞同：2
> 
> 时间：2013-04-17T10:08:31.810
> 
> 标签：python

我有一些数字作为`'111'`or形式的字符串`'367'`。我希望输出分别像`'1.1.1'`和`'3.6.7'`。我正在考虑使用 for 循环来将每个字符附加到列表中，然后将它们加入`'.'`我只是想知道是否有更*Pythonic*的方式来实现这一点？或者也许是一种更 Pythonic 的方式将字符串拆分为列表？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-17T10:09:47.617

```
>>> '.'.join('111')
'1.1.1' 
```

是的，就是这么简单。这是. [_](http://docs.python.org/2/library/stdtypes.html#str.join)`str.join`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:11:36.467

```
>>> nums = ["3", "6", "7"]
>>> ".".join(nums)
"3.6.7" 
```

# c# - C DllImport 错误 System.AccessViolationException 试图读取或写入受保护的内存

> ID：16057290
> 
> 赞同：0
> 
> 时间：2013-04-17T10:08:33.597
> 
> 标签：c#, dllimport, output-parameter

我有一个 C DLL 用于 C# 代码 (.net 4.0) 当我访问 C 方法时，它会引发以下异常

```
System.AccessViolationException {"Attempted to read or write protected memory. This is often an indication that other memory is corrupt."} 
```

在这里，我向您提供 C 代码和 C# 代码的详细信息

C代码：

```
__declspec(dllexport) int SampleFunction(int **p_StackIndexes)
{
    printf("value1: %d: ", p_StackIndexes[0][0]);
    return 1;
} 
```

C# 代码

```
[DllImport(@"cpp.dll", CallingConvention = CallingConvention.Cdecl)]
unsafe private static extern UInt16 SampleFunction(
    out int[,] p_StackIndexes
);

unsafe static void Main(string[] args)
{
    unsafe
    {
        int[,] p_StackIndexes = new int[3, 2] { { 1, 2 }, { 3, 4 }, { 5, 6 } };
        int x = SampleFunction(out p_StackIndexes);  //This line raises said exception
    }
} 
```

我已经尝试过所有 CallingConvention，例如 StdCall、Cdecl、Winapi，但这在任何情况下都不起作用。

我的代码有什么问题？请注意，我的基本要求是使用输出参数，所以基本上我将在 C 代码中为输出参数分配一些值，然后从 C# 代码中访问它。

如果您可以提供任何示例代码，那么它将很有帮助。

谢谢，基兰

# javascript - 基于信息亭的应用程序的 HTML 5 / Javascript

> ID：16057291
> 
> 赞同：6
> 
> 时间：2013-04-17T10:08:35.800
> 
> 标签：javascript, html, silverlight, kiosk, offlineapps

有没有人有使用 HTML 5 和 Javascript 构建长时间运行的信息亭应用程序的经验？

我们目前正在使用 Silverlight，但希望转向更轻量级/更灵活的东西。我们担心的是内存泄漏的可能性，可靠的离线能力（设备可能经常失去互联网连接）。

理想情况下，我们会为在线和信息亭使用相同的框架，因此有一个共享的代码库

谢谢你的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:54:31.253

您应该对 HTML5 没有任何问题。我会推荐一个 Windows 8 触摸设备。首先，您获得了触摸，这使您的信息亭更具交互性。其次，您将获得 IE 10，这是一款非常出色的 html5 浏览器，提供了良好的客户端存储选项。

在 IE 10 中，您可以获得 555 MB 的组合客户端存储， http: [//labs.ft.com/2012/06/text-re-encoding-for-optimising-storage-capacity-in-the-browser/](http://labs.ft.com/2012/06/text-re-encoding-for-optimising-storage-capacity-in-the-browser/)。它还支持离线模式。您可以获得出色的 GPU 加速动画、过渡等。

至于您的应用程序架构，我推荐单页应用程序。我不是 MVVM 垃圾的粉丝，因为它们是代码和内存膨胀。我写了一篇关于使用 localStorage 作为存储介质的文章，[http://professionalaspnet.com/archive/2011/10/08/Use-Local-Storage-to-Make-Your-Single-Page-Web-Application -Rock.aspx](http://professionalaspnet.com/archive/2011/10/08/Use-Local-Storage-to-Make-Your-Single-Page-Web-Application-Rock.aspx)。从那时起，我就推进了这种机制。您还可以在此处阅读有关执行此操作的信息，[http](http://tech.pro/tutorial/1165/use-the-jquery-localstorage-and-prefetch-filter-to-optimize-performance) ://tech.pro/tutorial/1165/use-the-jquery-localstorage-and-prefetch-filter-to-optimize-performance 。

至于内存泄漏。我已经做了大约 2 年的 SPA。因为大多数移动操作系统会限制您的内存使用，例如移动 Safari 会崩溃。尽量减少变量，这是我使用本地存储的原因之一。

这是一个很好的问题，谢谢你的提问。现在我的脑子会整天嗡嗡作响！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T10:14:33.737

非常好的问题。我从来没有为 Kiosk 开发过，而是为必须在网站和桌面上的其他离线/在线应用程序开发。

我使用了[QT Project](http://qt-project.org/)，它把我的网站变成了一个 exe。这对我有用，因为我正确地开发了它并且能够共享大约 90% 的代码库，并且我的目标是很快达到 100%。

如果您在某种意义上开发应用程序不需要嵌入在 HTML 中的服务器端代码，即没有 php，但更多地依赖于调用服务器并使用 JSON 进行通信，您应该能够做到这一点。

然后，如果您必须这样做，您可以更轻松地在平台之间移动，您甚至可以使用 BB Webworks for Blackberry 进行打包，您可能不希望这样做，但如果您分别开发客户端和服务器端，则只是试图说明这一点客户端的便携性变得惊人！

# r - 为什么 RStudio 中的代码错误（在终端上运行良好）？：评估嵌套太深

> ID：16057294
> 
> 赞同：0
> 
> 时间：2013-04-17T10:08:45.657
> 
> 标签：r, rstudio

我正在尝试解决R 中的[欧拉问题 #1](http://projecteuler.net/problem=1)：

> 求 1000 以下所有 3 或 5 的倍数之和。

以下代码运行良好，并在终端中生成准确的结果：

```
limit <- 1000
NumSet <- function(n){((1:floor((limit - 1)/n)) * n)}
result <- sum(NumSet(3)) + sum(NumSet(5))- sum(NumSet(15)) 
print(result) 
```

当我在 RStudio 中尝试时，出现以下错误：

```
Error: evaluation nested too deeply: infinite recursion / options(expressions=)? 
```

这有什么问题？

```
1 R:        3.0.0
2 RStudio:      0.97.336
3 OS:       ubuntu-12.10,64-bit 
```

# android - Android：如何在后台启动 Activity

> ID：16057299
> 
> 赞同：15
> 
> 时间：2013-04-17T10:09:04.420
> 
> 标签：android, android-activity

通常我用这段代码开始一个活动：

```
Intent i = new Intent(context, MyActivity.class);  
i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
context.startActivity(i); 
```

但是我如何启动活动以便将其留在后台？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T10:13:29.377

您应该为此使用[服务——除了](http://developer.android.com/guide/components/services.html)[类描述](http://developer.android.com/reference/android/app/Service.html)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-17T11:03:28.767

要保持活动在后台运行，可以使用服务。创建一个后台服务，如：

```
import android.app.Service;
import android.content.Intent;
import android.os.Binder;

import android.os.IBinder;

public class BackgroundService extends Service {

    private final IBinder mBinder = new LocalBinder();

    public class LocalBinder extends Binder {
        BackgroundService getService() {
            return BackgroundService.this;
        }
    }

    public int onStartCommand(Intent intent, int flags, int startId) {
        return START_STICKY;
    }

    @Override
    public IBinder onBind(Intent intent) {
        return mBinder;
    }
} 
```

像这样在 Main 活动的 oncreate() 中调用服务 -

```
 startService(new Intent( MainActivity.this,BackgroundService.class)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T10:19:19.900

你可以做三件事

如果您想通过 UI 更新在后台执行长时间运行的任务。使用异步任务。如果您想在后台执行长时间运行的任务，请仅使用 intentservice。如果您想要一些不太繁重的后台任务，请使用服务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T10:15:44.027

活动通常意味着向用户显示。如果您不需要任何 UI，您可能根本不需要子类化 Activity。考虑为您的任务使用 ie Service 或 IntentService。或者您可以将 Activity 的主题设置为`.NoDisplay`.

# ruby-on-rails - 如何在 ruby on rails 中显示在标签下发表的所有文章

> ID：16057303
> 
> 赞同：1
> 
> 时间：2013-04-17T10:09:10.810
> 
> 标签：ruby-on-rails, ruby, tags

我正在尝试显示在标签下发布的所有文章（目前，标签显示在文章索引页面上）。我可以获取文章索引页面上的所有标签。但是这些标签没有任何文章。在db中，标签和文章表之间存在关系，下面发布。请建议我如何在文章索引页面上显示标签下的所有文章。

文章控制器.rb

```
class ArticlesController < ApplicationController
  before_filter :is_user_admin, only: [:new, :create, :edit, :destroy]

    def is_user_admin
      redirect_to(action: :index) unless current_user.try(:is_admin?) 
      return false 
    end

      def index
          @articles = Article.all(:order => "created_at DESC")
      @article_titles = Article.first(10)
      @tags = Tag.all
      end

    def show
      @article = Article.find(params[:id])
    end

      def new
      @article = Article.new
      end
    end 
```

tags_controller.rb

```
class TagsController < ApplicationController
 #before_filter :user_signed_in, only: [:destroy]

   def index
    @tags = Tag.all
   end

    def show
     @tag = Tag.find(params[:id])
    end
end 
```

架构.rb

```
ActiveRecord::Schema.define(:version => 20130411074056) do

  create_table "articles", :force => true do |t|
    t.string   "title"
    t.text     "body"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
    t.integer  "user_id"
  end

  create_table "taggings", :force => true do |t|
    t.integer  "tag_id"
    t.integer  "article_id"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
  end

  add_index "taggings", ["article_id"], :name => "index_taggings_on_article_id"
  add_index "taggings", ["tag_id"], :name => "index_taggings_on_tag_id"

  create_table "tags", :force => true do |t|
    t.string   "name"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false 
```

article/index.html.erb（我需要在这些文章下显示标签）

```
 <% if !@tags.nil? %>
           <% @tags.each  do | tags | %>

           <div style="margin-top:15px; margin-left:8px"> <%= link_to tags.name, "/path1"  %></div>
           <% end%>
           <% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:15:52.173

假设 Article 和 Tag 之间的关系已正确定义为[has_many :through => :taggings](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_many)，如下所示：

```
class Article < ActiveRecord::Base
  has_many :tags, :through => :taggings
end

class Tag < ActiveRecord::Base
  has_many :articles, :through => :taggings
end 
```

并且结果的格式应如以下示例所示：

```
Tag 1
  Article 1
  Article 2
  Article 3
Tag 2
  Article 2
  Article 4 
```

*在articles/index.html.erb*中使用以下代码来显示属于每个标签的文章：

```
<% @tags.each do |tag| %>
  <%= link_to tag.name, tag %>
  <% tag.articles.each do |article| %>
    <%= link_to article.title, article %>
  <% end %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T18:03:38.580

我得到了解决方案。我类似于 Sunxperous。我是这样实现的：- <% @tags.each do |tag| %> <%= link_to tag.name, tag, :class => "tag" %> <% end %>. 因为我已经在标签控制器中拥有索引和显示操作。在“标签的show.html.erb”中，我确实喜欢这样-：<% @tag.articles.each do |article| %>

*   <%= link_to article.title, article_path(article) %>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T10:17:12.677

```
class Article 
  has_many :taggings
  has_many :tags, :through => :taggings
  ....
end
class Taggings
  belongs_to :articles
  belongs_to :tags
  ...
end
class Tags
  has_many :taggings
  has_many :articles, :through => :taggings
  ...
end 
```

现在您可以通过以下方式获取文章的所有标签以及标签中的`@article.tags`所有文章`@tag.articles`

有关其他信息，请参阅 guides.rubyonrails.org/association_basics.html

# excel - Excel宏删除单元格模式

> ID：16057311
> 
> 赞同：1
> 
> 时间：2013-04-17T10:09:47.637
> 
> 标签：excel, vba

我需要帮助创建一个宏，当站在单元格 A 中时，它会删除我在下面标记为 X 的单元格中的值（留下标记为 O 的单元格）。实际的单元格可以包含任何值。

```
A X X X
X O X X
X X O X
X X X O 
```

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T10:17:16.520

试试这个代码：

```
Sub go_sub()

    Dim tmpRNG As Range
    Set tmpRNG = ActiveCell.CurrentRegion 'or you could set other range definition here, like Range("A1:d4")

    Dim cell As Range
    For Each cell In tmpRNG
        If cell.Row <> cell.Column Then cell.ClearContents
    Next cell
End Sub 
```

**编辑**上面的代码适用于从单元格 A1 开始的当前区域。

以下代码适用于任何选定区域：

```
Sub go_sub()

    Dim tmpRNG As Range
    Set tmpRNG = Selection
    Dim tmpOff As Long

        tmpOff = tmpRNG.Row - tmpRNG.Column

    Dim cell As Range
    For Each cell In tmpRNG '.Cells
        If cell.Row - tmpOff <> cell.Column Then cell.ClearContents
    Next cell
End Sub 
```

一个提示：如果你有一个大的关闭屏幕更新的工作，也可能关闭事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T12:49:10.973

以下将采用您当前的单元格并删除除对角线以外的所有单元格，选择左上角的单元格，所有对角线都将保留......但我喜欢 KazJaw 的回答。

```
Sub go_sub()

'get the range from current cell to the end 
Lastrow = ActiveSheet.Cells.Find("*", [A1], , , xlByRows, xlPrevious).Row
Lastcol = ActiveSheet.Cells.Find("*", [A1], , , xlByColumns, xlPrevious).Column
Set myRange = ActiveSheet.Range(Selection, ActiveSheet.Cells(Lastrow, Lastcol))

'set the next cell to keep as current one
Set Nextcell = selection

'cycle throug all cells in the range
For Each cel In  myRange

    'if the cell is to be kept?
    if cel.address = nextcell.address then
        'Reset the next cell to save BUT DONE CLEAR THECURRENT CELL
        set Nextcell = Nextcell.offset(1,1)
    Else
        'clear current cell if not to be saved
        Cel.clearcontents
    End if
Next
End Sub 
```

**前：**

![前](https://i.stack.imgur.com/JipHP.png)

**后：**

![后](https://i.stack.imgur.com/Q6cbb.png)

# android - 安卓蓝牙状态

> ID：16057317
> 
> 赞同：0
> 
> 时间：2013-04-17T10:10:12.973
> 
> 标签：android

我想制作一个简单的 android 应用程序来检测蓝牙是否启用。

我已经使用下面显示的代码制作了一个应用程序来检测 WiFi 是否打开。我想知道的是，我怎样才能使用类似的蓝牙代码。

用于 WiFi 的代码：

```
ConnectivityManager mycm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);

    boolean wifi = mycm.getNetworkInfo(ConnectivityManager.TYPE_WIFI).isConnectedOrConnecting();

    TextView tv1 = (TextView) findViewById(R.id.textview1);

    if (wifi){
        tv1.setText("Wifi is connected");
    }

    else{
        tv1.setText("Wifi is not connected");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:14:16.620

```
BluetoothAdapter mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
boolean hasBluetooth = (mBluetoothAdapter == null);

if(hasBluetooth && mBluetoothAdapter.isEnabled())
{
//enabled ON
}
else
{
//Disabled OFF
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:34:16.023

`<uses-permission android:name="android.permission.BLUETOOTH" />`也在你的 AndroidManifest.xml 文件中使用这个权限

[http://developer.android.com/guide/topics/connectivity/bluetooth.html](http://developer.android.com/guide/topics/connectivity/bluetooth.html)

# xml - 如何为junit测试用例提供xml输入

> ID：16057323
> 
> 赞同：1
> 
> 时间：2013-04-17T10:10:43.477
> 
> 标签：xml, automated-tests

我是自动化新手，热衷于使用 junit 和 java 来学习自动化，所以请帮助我。
我的问题：

> > 如何通过 XML 文件向 Web 应用程序中的文本字段提供输入。
> > 1.如何从xml文件中读取数据。
> > 2\. 我们可以使用自定义标签吗

目前我正在尝试自动化雅虎邮件。我可以通过以下方式发送用户名和密码

```
WebElement mail = driver.findElement(By.xpath("//input[@id=('Email')]"));
 mail.sendKeys("harish"); 
```

但我想在 xml 中写入数据并从 xml 中读取数据。

请帮我。

# android - 在 Android 中单击 Facebook 登录按钮后未显示 Facebook 身份验证对话框

> ID：16057326
> 
> 赞同：2
> 
> 时间：2013-04-17T10:10:51.213
> 
> 标签：android, facebook, authentication

我正在使用 Android 中的 facebook 登录。我指的是[Facebook Developers Scrumptious Tutorial](http://developers.facebook.com/docs/tutorials/androidsdk/3.0/scrumptious/)中提到的教程。但是我在第一步本身就失败了，即身份验证。我无法登录。我放置了一个由 Facebook SDK (com.facebook.widget.LoginButton) 提供的登录按钮。单击登录按钮后，它不会打开要求输入用户名和密码的 Web 对话框。它只是显示一个进度对话框并消失。
以下是此问题的
日志： 04-17 10:43:22.629: D/FacebookSDK.WebDialog(516): Webview loading URL:`http://m.facebook.com/login.php?app_id=491106744284985&skip_api_login=1&cancel=fbconnect%3A%2F%2Fsuccess%3Ferror_reason%3Duser_denied%26error%3Daccess_denied%26error_description%3DThe%2Buser%2Bdenied%2Byour%2Brequest.&fbconnect=1&next=https%3A%2F%2Fm.facebook.com%2Fdialog%2Fpermissions.request%3F_path%3Dpermissions.request%26app_id%3D491106744284985%26client_id%3D491106744284985%26redirect_uri%3Dfbconnect%253A%252F%252Fsuccess%26display%3Dtouch%26type%3Duser_agent%26fbconnect%3D1%26from_login%3D1&rcount=1&_rdr`
应该是什么问题？是因为我在 FB Developers 中创建的 FB App 吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:32:34.110

使用下面的代码

```
Button more = (Button) findViewById(R.id.button1);
more.setOnClickListener(new View.OnClickListener() {
    public void onClick(View view) {
         if (! facebook.isSessionValid()) {         
             facebook.authorize(HomeActivity.this, PERMISSIONS, new LoginDialogListener()); 
        });
    } 
```

# ios - 如何在导航栏中创建返回按钮

> ID：16057327
> 
> 赞同：24
> 
> 时间：2013-04-17T10:10:55.303
> 
> 标签：ios, objective-c, uibutton, uinavigationbar

我有 2 页。第一个是 tableView，第二个是视图，当我单击任何单元格时，以模态 segue 的方式进入下一页（视图）。我想在导航栏的下一页添加返回按钮。这是我在视图页面中的代码： **ViewController.m**

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.lable.text = obji.Name;
    self.lable2.text = obji.Descript;

    UIBarButtonItem *backButton = [[UIBarButtonItem alloc] initWithTitle:@"Back" style:UIBarButtonItemStyleBordered target:self action:@selector(Back)];
    self.navigationItem.leftBarButtonItem = backButton;
}

- (IBAction)Back
{
    //I dont know that how return pervious page
} 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-17T10:25:29.190

正如您在评论中所说，您使用模态控制器

**在viewWillappear**中添加以下内容

 **```
 UIBarButtonItem *backButton = [[UIBarButtonItem alloc] initWithTitle:@"Back" style: UIBarButtonItemStyleBordered target:self action:@selector(Back)];
     self.navigationItem.leftBarButtonItem = backButton; 
```

而在

```
- (IBAction)Back
  {
    [self dismissViewControllerAnimated:YES completion:nil]; // ios 6
  } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-01-09T15:45:56.263

**斯威夫特 3**

```
let backButton: UIBarButtonItem = UIBarButtonItem(title: "Back", style: .plain, target: self, action: #selector(back))
    self.navigationItem.leftBarButtonItem = backButton

func back() {
    self.dismiss(animated: true, completion: nil) } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-03-27T00:53:52.833

我有类似的问题，但我使用的是 Swift。这是 Swift 2.2 中的答案。

```
 override func viewWillAppear(animated: Bool) {
            let backButton: UIBarButtonItem = UIBarButtonItem(title: "Back", style: .Plain, target: self, action: #selector(back))
            self.navigationItem.leftBarButtonItem = backButton;
            super.viewWillAppear(animated);
        }

        func back() {
            self.dismissViewControllerAnimated(true, completion: nil)
        } 
```**

# php - 跟踪访问者在网站上花费的时间

> ID：16057330
> 
> 赞同：0
> 
> 时间：2013-04-17T10:11:02.920
> 
> 标签：php, session, analytics

我想跟踪用户在我的网站上花费的时间。我不太担心它会降到第二个，它可以减 10-15%，这没关系，我想要更多的估计。我正在考虑在用户登录后使用会话，它将生成一个会话变量来跟踪秒数。使用`$_SERVER['REQUEST_TIME'];`我将能够找出他们点击上一页到本页时声明的时间之间的差异。

我遇到的问题是如果用户在网站上花费 10 分钟然后关闭浏览器会发生什么。session 变量过期后会丢失。我需要某种方法将此变量更新到数据库。每次点击页面后更新值似乎是过多的 sql 更新查询，正因为如此，我不想使用 javascript 和 ajax。

有没有办法在过期时保存会话变量？所以一旦`$_SESSION['timeonline']`过期就更新到数据库

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:30:17.417

我怀疑你会找到任何涉及 PHP 后端的解决方案，而不是每隔几秒钟“ping”你的后端。就像你说的那样，这既糟糕又不是 100% 有效。

为什么要重新发明轮子。使用跟踪工具。PIWIK 是开源的并且易于设置。它做所有跟踪工具所做的事情，包括“在网站上花费的时间”。尽管在 10 分钟不活动后刚刚关闭浏览器的访问者可能也不会在那里被跟踪。

[http://piwik.org/](http://piwik.org/)

# html - CSS3 在谷歌浏览器上无法正常工作

> ID：16057332
> 
> 赞同：0
> 
> 时间：2013-04-17T10:11:18.383
> 
> 标签：html, css

我在 cssdeck 上尝试了一个代码：[代码](http://cssdeck.com/labs/ctjasugp)

对 css 所做的任何更改都会直接反映在按钮上，但是当我在普通网页上尝试此代码时，我在任何浏览器上都看不到任何更改，甚至在 IE10 上也看不到。

我应该怎么办 ？

这是我在系统上尝试的代码：

```
<!DOCTYPE html>
<html>
<body>
    <script type="text/css">
        input.gray, a.gray, input[type=submit].gray {
            padding: 10px 10px;
            -webkit-border-radius: 2px 2px;
            border: solid 1px #dadada;
            background: #f4f4f4; /* Old browsers */
            background: -moz-linear-gradient(top,  #f4f4f4 0%, #f1f1f1 100%); /* FF3.6+ */
            background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#f4f4f4), color-stop(100%,#f1f1f1)); /* Chrome,Safari4+ */
            background: -webkit-linear-gradient(top,  #f4f4f4 0%,#f1f1f1 100%); /* Chrome10+,Safari5.1+ */
            background: -o-linear-gradient(top,  #f4f4f4 0%,#f1f1f1 100%); /* Opera 11.10+ */
            background: -ms-linear-gradient(top,  #f4f4f4 0%,#f1f1f1 100%); /* IE10+ */
            background: linear-gradient(top,  #f4f4f4 0%,#f1f1f1 100%); /* W3C */
            filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f4f4f4', endColorstr='#f1f1f1',GradientType=0 ); /* IE6-9 */
            color: #555;
            text-decoration: none;
            cursor: pointer;
            display: inline-block;
            text-align: center;
            font-weight:bold;
            font-family:Arial, Helvetica, sans-serif;
            text-shadow: 0px 1px 1px rgba(255,255,255,1);
            line-height: 1;
            font-size:11px;
        }

        .gray:hover { 
            border:1px solid #c6c6c4; 
            background: background: #f8f8f8; /* Old browsers */
            background: -moz-linear-gradient(top,  #f8f8f8 0%, #f1f1f1 100%); /* FF3.6+ */
            background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#f8f8f8), color-stop(100%,#f1f1f1)); /* Chrome,Safari4+ */
            background: -webkit-linear-gradient(top,  #f8f8f8 0%,#f1f1f1 100%); /* Chrome10+,Safari5.1+ */
            background: -o-linear-gradient(top,  #f8f8f8 0%,#f1f1f1 100%); /* Opera 11.10+ */
            background: -ms-linear-gradient(top,  #f8f8f8 0%,#f1f1f1 100%); /* IE10+ */
            background: linear-gradient(top,  #f8f8f8 0%,#f1f1f1 100%); /* W3C */
            filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f8f8f8', endColorstr='#f1f1f1',GradientType=0 ); /* IE6-9 */
            color: #222; 
            -webkit-box-shadow: 0px 1px 1px 0px rgba(10, 10, 10, 0.4);
            -moz-box-shadow: 0px 1px 1px 0px rgba(10, 10, 10, 0.4);
            box-shadow: 0px 1px 1px 0px rgba(10, 10, 10, 0.4);
        }

        .gray:active { 
            border:1px solid #c6c6c4; 
            color: #222;
            -webkit-box-shadow: inset 0 0 2px 4px #f1f1f1, 0 1px 0 0 #eeeeee;
            -moz-box-shadow: inset 0 0 2px 4px #f1f1f1, 0 1px 0 0 #eeeeee;
            box-shadow: inset 0 0 2px 4px #f1f1f1, 0 1px 0 0 #eeeeee;
        }
    </script>

    <br><br><br><br>

    <center>
        <form>
            <input type="button" value="    Show     " class="gray"/>
        </form>
    </center>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T10:23:46.613

不要将 CSS 放在`script`标签中。CSS 应该在`head`标签中，并且需要在这样的`style`标签中`<style type="text/css"></style>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T10:24:05.797

好的，我明白了......你必须把所有的CSS都这样：

```
<head>
    <!-- Here goes meta tags, title and other stuff -->
    <style type="text/css">
                input.gray, a.gray, input[type=submit].gray {
                    padding: 10px 10px;
                    -webkit-border-radius: 2px 2px;
                    border: solid 1px #dadada;
                    background: #f4f4f4; /* Old browsers */
                    background: -moz-linear-gradient(top,  #f4f4f4 0%, #f1f1f1 100%); /* FF3.6+ */
                    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#f4f4f4), color-stop(100%,#f1f1f1)); /* Chrome,Safari4+ */
                    background: -webkit-linear-gradient(top,  #f4f4f4 0%,#f1f1f1 100%); /* Chrome10+,Safari5.1+ */
                    background: -o-linear-gradient(top,  #f4f4f4 0%,#f1f1f1 100%); /* Opera 11.10+ */
                    background: -ms-linear-gradient(top,  #f4f4f4 0%,#f1f1f1 100%); /* IE10+ */
                    background: linear-gradient(top,  #f4f4f4 0%,#f1f1f1 100%); /* W3C */
                    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f4f4f4', endColorstr='#f1f1f1',GradientType=0 ); /* IE6-9 */
                    color: #555;
                    text-decoration: none;
                    cursor: pointer;
                    display: inline-block;
                    text-align: center;
                    font-weight:bold;
                    font-family:Arial, Helvetica, sans-serif;
                    text-shadow: 0px 1px 1px rgba(255,255,255,1);
                    line-height: 1;
                    font-size:11px;
                }

                .gray:hover { 
                    border:1px solid #c6c6c4; 
                    background: background: #f8f8f8; /* Old browsers */
                    background: -moz-linear-gradient(top,  #f8f8f8 0%, #f1f1f1 100%); /* FF3.6+ */
                    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#f8f8f8), color-stop(100%,#f1f1f1)); /* Chrome,Safari4+ */
                    background: -webkit-linear-gradient(top,  #f8f8f8 0%,#f1f1f1 100%); /* Chrome10+,Safari5.1+ */
                    background: -o-linear-gradient(top,  #f8f8f8 0%,#f1f1f1 100%); /* Opera 11.10+ */
                    background: -ms-linear-gradient(top,  #f8f8f8 0%,#f1f1f1 100%); /* IE10+ */
                    background: linear-gradient(top,  #f8f8f8 0%,#f1f1f1 100%); /* W3C */
                    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f8f8f8', endColorstr='#f1f1f1',GradientType=0 ); /* IE6-9 */
                    color: #222; 
                    -webkit-box-shadow: 0px 1px 1px 0px rgba(10, 10, 10, 0.4);
                    -moz-box-shadow: 0px 1px 1px 0px rgba(10, 10, 10, 0.4);
                    box-shadow: 0px 1px 1px 0px rgba(10, 10, 10, 0.4);
                }

                .gray:active { 
                    border:1px solid #c6c6c4; 
                    color: #222;
                    -webkit-box-shadow: inset 0 0 2px 4px #f1f1f1, 0 1px 0 0 #eeeeee;
                    -moz-box-shadow: inset 0 0 2px 4px #f1f1f1, 0 1px 0 0 #eeeeee;
                    box-shadow: inset 0 0 2px 4px #f1f1f1, 0 1px 0 0 #eeeeee;
                }
        </style>
    <!--other content in head-->
    </head> 
```

就是这样，`<head>`在您的 html 中的标签（**在**正文之前）和`<style>`标签（不是脚本）之间。

希望能帮助到你 ;）

# database - 在父子表中插入记录

> ID：16057338
> 
> 赞同：-4
> 
> 时间：2013-04-17T10:11:40.943
> 
> 标签：database

我有两张桌子，一张是有 3 个 cloumns 的主桌

```
master_id as primary key,
master_name varchar(50),
master_cal varchar(50), 
```

另一个有两列的子表

```
child_id as primary key,
child_name varchar(50)
master_id as foreign key 
```

我想在 asp.net 的提交按钮上插入数据。我需要一个查询或存储过程，它先将数据插入主表，然后再插入子表。请帮助我不知道如何获取master_id并将其作为外键放入子表中..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:24:32.967

SQL 方言通常允许使用以下语法：

```
insert into my_table (col1, col2)
values ('a', 3)
returning col_for_pk into variable_name. 
```

您可能需要一种针对您使用的任何 RDBMS 量身定制的技术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:26:08.280

在 SQLServer 中，假设您的 master_id 和 child_id 是 IDENTITY 字段，您可以这样做

```
INSERT INTO master (master_name, master_cal) VALUES ('Master1', 'Master_cal1');
INSERT INTO child (child_name, master_id) 
SELECT 'Child1', SCOPE_IDENTITY(); 
```

**[SQLFiddle](http://sqlfiddle.com/#!3/be8cd/1)**

# java - 我从 jsp 页面获取日期作为字符串如何将其转换为 java.util.Date

> ID：16057339
> 
> 赞同：1
> 
> 时间：2013-04-17T10:11:44.517
> 
> 标签：java, jsp, servlets

我从 jsp 页面获取日期为“ `04/26/2013`”，时间为“ `05:30 AM`”，时区为“ `-12.0`”，并在 servlet 中获取它如何将这个字符串值转换为`java.util.Date`格式。我试图附加字符串并得到`(04/26/2013 05:30 AM -12.0)`但无法使用`Dateformat`或`timestamp`

任何人都可以提出解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:00:25.880

我认为它来自时区格式。

```
DateFormat df = new SimpleDateFormat("dd/MM/yyy hh:mm a Z");
String t = "04/26/2013 05:30 AM -1200";
String tt = "04/26/2013 05:30 AM GMT -1200";
Date d= df.parse(t);
Date d= df.parse(tt); 
```

为我工作。

[您可以在此处](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)阅读有关时区格式的更多信息

# regex - bash: !.url": 提取文件名时未找到事件

> ID：16057340
> 
> 赞同：1
> 
> 时间：2013-04-17T10:11:44.657
> 
> 标签：regex, perl, bash

我正在尝试`.url`使用`$name =~ s/\.url$//;`. 但是，某些名称在扩展名之前包含一个感叹号，例如：

```
"for example-this!.url" "and-something-else!.url" 
```

这会导致 perl 发出错误并停止运行：

```
bash: !.url": event not found 
```

有没有办法克服这个问题？下面显示了我正在使用的部分相关代码：

```
foreach my $f (@ARGV) {
 my (undef, $dir, $name) = File::Spec->splitpath($f);
 $name =~ s/\.url$//; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T10:41:20.803

当`error`启用历史扩展（这是默认设置）时，您会遇到这种情况。

为了禁用，做

```
set +o histexpand 
```

在命令行上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T10:20:25.033

错误不是来自 perl，而是来自 bash。您可能希望将文件名存储在文件中并从那里读取它们。请注意，此问题仅在 bash 解析您的命令行输入时发生。当脚本从文件、管道等读取文件名时，不会有任何问题。

# c# - 使用带有 jquery.validate.unobtrusive.js 的 asp.net mvc3 来验证表单和更改按钮

> ID：16057346
> 
> 赞同：2
> 
> 时间：2013-04-17T10:11:57.470
> 
> 标签：c#, asp.net-mvc-3, jquery-validate

我正在使用 mvc3 并使用这样的模型验证：

```
 public class ColumnVM {
    [Required(ErrorMessage = "Required")]
    public string Name { get; set; }} 
```

我想用模型验证做客户端验证。我的html是：

```
@using(Html.BeginForm("AddColumn","Column",FormMethod.Post))
@html.TextBoxFor(model=>model.Name)
@Html.ValidationMessageFor(model=>model.Name)
<input type="submit" value="submit" style="background-color:blue"> 
```

我想在提交之前进行客户端验证。如果提交有效，则提交按钮更改其颜色并禁用自身调用：`function changeBtnColor(obj) { obj.css("background-color", "#A9A9A9"); obj.attr("disabled", "disabled"); }` 如果没有，请不要更改其颜色并且不要禁用，并显示验证错误消息。当 jquery.validate.unobtrusive.js 存在时，我不能再使用 $("form").validate() 了。我怎样才能完成这项任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:53:13.543

在 jquery、jquery validate 和 jquery validate 不显眼的脚本之后包含这个脚本

```
<script>
    $(function () {
        $("form").validate().settings.submitHandler = function (form) {
            alert('valid form');
            // do your stuff here
            form.submit();
        }
    });
</script> 
```

# scala - 如何在 scala for yield 循环中处理不存在的值

> ID：16057348
> 
> 赞同：0
> 
> 时间：2013-04-17T10:11:58.073
> 
> 标签：scala, for-loop, xml-parsing, yield

我正在解析一个 xml 文件，该文件可能有也可能没有一个名为的元素`<Popular>` ，该元素位于元素内`<EName>`

例子：

```
<Info>
<Enterprise>
<EName>
<Legal>Cool company</Legal>
</EName>
</Enterprise>
<Enterprise>
<EName>
<Legal>Cool company2</Legal>
<Popular>The company 2</Popular>
</EName>
</Enterprise>
</Info> 
```

我像这样使用**scala scales xml**：

```
val Info = NoNamespaceQName("Info")
val Enterprise = NoNamespaceQName("Enterprise")
val EName = NoNamespaceQName("EName")
val Legal = NoNamespaceQName("Legal")
val Popular = NoNamespaceQName("Popular")

val EnterprisePath = List(Info, Enterprise)

    val itr =  iterate(EnterprisePath, xml)
    for {
      enterprise <- itr
      enterpriseName <- enterprise \* EName \* Legal
      enterprisePopularName <- enterprise \* EName \* Popular 
    } {
      // Do fun stuff
      Logger.info("enterprise: "+enterpriseName + " "+enterprisePopularName)
} 
```

发生的情况是，当 Popular 元素不存在时，for 语句没有执行，yield 语句也没有执行。

我想要的是首先检查元素，如果流行元素为空，请将 enterprisePopularName 设置为空字符串

就像是：

```
<- if((enterprise \* EName \* Popular)) enterprise \* EName \* Popular else "" 
```

但我无法弄清楚。我想这是因为我是一个 scala 新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:20:00.097

Impredicatives 答案会起作用，但`Seq`有一个很好的小方法，称为`padTo`，您可以使用它来确保序列内至少有 n 个值。它需要两个参数`length: Int`，`elem: B`其中是您包含`B`的类型的子类型。`Seq`因此，在您的情况下，它将是：

```
for {
  enterprise <- itr
  enterpriseName <- enterprise \* EName \* Legal
  enterprisePopularName <- (enterprise \* EName \* Popular).padTo(1, reasonableDefaultValue)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:32:41.753

警告：我不熟悉“秤”，所以这里的细节可能是错误的。特别是，您可能会发现：

*   `\*`不返回 a `Seq`- 它可能返回 a `Iterable`，在这种情况下只需替换`Seq`为`Iterable`，或一些自定义集合，在这种情况下，您需要弄清楚如何翻译以下方法。
*   可能返回的序列是类型`Seq[Node]`或类似的，而不是`Seq[String]`- 您需要将默认值包装为节点，或者`.map(_.toString)`在应用默认值之前转换序列（使用 ）。

我在这里假设`\*`返回某种序列（Scala's `Seq`）。我们想要的是一个接受 a`Seq`和一个默认值的方法，如果 a`Seq`为空，则生成默认值。请注意，这只是编写等效于`Option`'s`orElse`或`getOrElse`方法的情况。

这是我们可以做到的一种方法：

```
def orIfEmpty[A](xs : Seq[A], default : A) : Seq[A] = 
  if (xs.isEmpty) Seq(default) else xs 
```

现在我们可以在理解中使用它：

```
enterprisePopularName <- orIfEmpty(enterprise \* EName \* Popular, "") 
```

# c# - 实体框架：使用接口扩展部分类而不触及 EF 生成的类

> ID：16057349
> 
> 赞同：2
> 
> 时间：2013-04-17T10:12:04.267
> 
> 标签：c#, interface, entity-framework-5, partial-classes

我的问题类似于这篇文章： [实体框架中的接口继承](https://stackoverflow.com/questions/4093897/interface-inheritance-in-entity-framework?answertab=votes#tab-top)

因此，我复制了该示例并针对我的问题对其进行了修改：

```
public interface IBaseEntity
{
    DateTime CreatedOn { get; set; }
    string CreatedBy { get; set; }
}

// The following two classes are generated by Entity Framework
public partial class SomeEntity
{
    public int SomeEntityId { get; }
    public string Name { get; set; }
    public DateTime CreatedOn { get; set; }
    public string CreatedBy { get; set; }
}

public partial class OtherEntity
{
    public int OtherEntityId { get; }
    public float Amount { get; set; }
    public DateTime CreatedOn { get; set; }
    public string CreatedBy { get; set; }
} 
```

我想做的是以下几点：

```
public partial class SomeEntity : IBaseEntity
    {
        // No code needed here because the other partial class
        // already has the needed properties
    } 
```

但后来我收到以下错误：

```
Error 64 '[...].SomeEntity' does not implement interface member '[...]IBaseEntity.CreatedOn'
Error 64 '[...].SomeEntity' does not implement interface member '[...]IBaseEntity.CreatedBy' 
```

显然，我也可以看到这一点。
但是我认为编译后，部分类会合二为一，这样编译器就不要抱怨了。

有任何想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-05-29T20:08:01.690

我遇到了同样的错误，我解决了将部分类移到 App_Code 文件夹之外的问题！我应该承认我不明白原因:-(

# bash - 检查路径是否指向文件

> ID：16057350
> 
> 赞同：0
> 
> 时间：2013-04-17T10:12:05.643
> 
> 标签：bash, file

简单的问题，但显然我自己无法找到答案。

我读取用户的输入并将其保存到`$database_path`

从那里我看看是否设置了变量。如果不是，我退出，如果是，则检查路径是否指向文件。下面是我的代码..

```
read database_path

echo "database path = $database_path"

if [ -z $database_path ]; then
    echo "Error: You must enter a path to the database"
    exit
elif [ ! -f "$database_path" ]
then
    echo "Error: Path \"$database_path\" does not lead to a file"
    exit
fi 
```

即使我输入了一个有效的数据库路径，它也不会检测到它何时是一个有效的文件（我已经用值替换了名称等）。

```
~/company/files/database.sqlite 
```

每次它只是说它不是一个有效的文件。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T11:32:41.070

其他人已经解释了为什么你的代码失败得很好。剩下的就是指出`readlink`一个可能的解决方案：

```
readlink -e ~/company/files/database.sqlite 
```

这将为您提供绝对（扩展）路径 / $? == 0 如果文件存在，什么都没有 / $? == 1 如果不是，无论您当前的工作目录如何。

但请记住，它`readlink`属于 GNU coreutils；虽然很普遍（例如 Linux、Cygwin），但它并非无所不在（例如 AIX）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T11:23:03.143

正如@michaelb958 提到的；您得到的错误是由于`~`没有扩展到 $HOME。有2种可能的解决方案

1) 更改`[ -f "$database_path" ]`为，`[ -f $database_path ]`以便不`~`引用并将扩展。

2）正如@michaelb958所提到的；如果您必须绝对需要引号，则可以提供相对于当前目录的完整路径或路径`$database_path`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T10:36:10.907

## 假设您正在输入表单的文件路径`~/.../foo.sqlite`

Bash tilde-expansion 不会在参数扩展所在的任何地方调用。从手册页（至少，[这个副本](http://linux.die.net/man/1/bash)）：

> 如果单词以不带引号的波浪号字符 ('~') 开头，则第一个不带引号的斜杠之前的所有字符（或所有字符，如果没有不带引号的斜杠）都被视为波浪号前缀。如果波浪号前缀中没有任何字符被引用，波浪号后面的波浪号前缀中的字符将被视为可能的登录名。如果此登录名是空字符串，波浪号将替换为 shell 参数 HOME 的值。如果 HOME 未设置，则替换执行 shell 的用户的主目录。否则，波浪号前缀将替换为与指定登录名关联的主目录。
> 
> [...]
> 
> 每个变量赋值都会检查紧跟在 : 或第一个 = 之后的未加引号的波浪号前缀。在这些情况下，也执行波浪号扩展。因此，可以在分配给 PATH、MAILPATH 和 CDPATH 时使用带有波浪号的文件名，并且 shell 分配扩展值。

`read database_path`不会扩大波浪号，其他任何东西都不会扩大，包括`[ -f "$database_path" ]`. 因此，该`[`命令将查找`$PWD/~/...`，而不是`$HOME/...`。

这可以通过使用绝对路径（以 开头`/`）或相对于当前目录的路径来解决。

（~~**警告：**我现在没有 Bash，所以这是**未经测试**的。~~编辑：我在 MinGW Bash（3.1.17(1)-release）上对其进行了测试；理论得到证实。）

# android - 如何读取 Parceable 对象列表

> ID：16057353
> 
> 赞同：-2
> 
> 时间：2013-04-17T10:12:10.823
> 
> 标签：android

我有一个包含对象 B 列表的对象 A。现在我希望通过使用 Parceable 捆绑包将对象 A 放入捆绑包中。我怎样才能做到这一点 ？

```
Class A{
 ArrayList<B> secondClass
}
class B{
} 
```

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:18:43.247

Parceable 类的接口，其实例可以写入 Parcel 并从 Parcel 中恢复。实现 Parcelable 接口的类还必须有一个名为 CREATOR 的静态字段，它是一个实现 Parcelable.Creator 接口的对象。

所以你需要`Parcelable`在 A 类中实现

详情见[此链接](http://prasanta-paul.blogspot.in/2010/06/android-parcelable-example.html)

# ruby-on-rails - Ruby On Rails 关联与添加列

> ID：16057355
> 
> 赞同：0
> 
> 时间：2013-04-17T10:12:16.807
> 
> 标签：ruby-on-rails, associations

我想向模型关联添加另一列，例如参见[http://guides.rubyonrails.org/v2.3.11/association_basics.html#the-has-many-through-association](http://guides.rubyonrails.org/v2.3.11/association_basics.html#the-has-many-through-association)现在我有一个新列也需要检查

**医生**

```
id
name
organization_id (new one) 
```

**约会**

```
id
physician_id
patient_id
organization_id (new one)
appointment_date 
```

**耐心**

```
id
name
organization_id (new one) 
```

我的要求是，如果三个表中的任何一个具有不同的组织 ID，则关联应该不起作用。

在控制器中，我使用的是代码：@all_patients = Physician.find_by_id_and_organization_id(params[:id], params[:orgId]).patients

让所有患者都属于医生并在 UI 上显示。在某些脏数据的情况下，表约会和患者可能有不正确的组织 ID。我想要的是 UI 不应该显示 organization_id 不是预期的数据。例如，我在 db 中有数据说：

医生：
1，“医师 1”，1
2，“医师 2”，1

任命
1, 1, 1, 1, 2013-1-1
2, 1, 2, 1, 2013-1-1
3, 1, 3, 1, 2013-1-1
4, 1, 4, 2, 2013- 1-1

患者
1、“患者 1”、1
2、“患者 2”、2
3、“患者 3”、1
3、“患者 4”、1

如果我使用的是 Physician.find_by_id_and_organization_id(1,1).patients，我希望得到以下患者
1，“患者 1”，1
但现在我不知道如何配置模型关系，我得到了整个患者数据。

那么，如何配置模型呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:27:23.927

您不需要在 table 中有额外的列`appointments`。在您的约会模型中，您只需进行额外的验证回调并确保患者和医生都属于同一组织：

```
class Appointment < ActiveRecord::Base
   validate :have_to_be_in_the_same_organization

   def have_to_be_in_the_same_organization
      unless Patient.find(patient_id).organization_id == Physician.find(physician_id).organization_id
          errors.add(:base, "The physician and the patient must be in the same organization to create an appointment!")
      end
   end
end 
```

解决方案2：

如果您不希望它呈现任何错误，而是希望将其重定向到某个地方而不尝试创建该约会，您可以在以下位置执行`before filter`您的`create`操作`appointmentscontroller`：

```
class AppointmentsController < ActiveRecord::Base
before_filter :have_to_be_in_the_same_organization, :only => [:create]

  def have_to_be_in_the_same_organization
              unless Patient.find(params[:patient_id]).organization_id == Physician.find(params[:physician_id]).organization_id
                  redirect_to somewhere_path
              end
  end
end 
```

# php - PHP\MYSQL 准备好的语句

> ID：16057356
> 
> 赞同：1
> 
> 时间：2013-04-17T10:12:17.220
> 
> 标签：php, mysql, prepared-statement

我是 mysql 和 php 的新手，想澄清一些关于准备好的陈述。

我看到的所有示例都只为表中的实际数据添加参数，将所有字段参数化以减少语句是不好的做法吗？例如

```
UPDATE ? SET ?=? WHERE ID=? 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T10:18:21.440

您*不能*参数化标识符。您只能参数化*data*。否则，参数化的重点，即*语句结构*和*数据*之间的分离，就没有实际意义了。了解参数化不仅仅是花哨的复制和粘贴，它是一种确保数据库在*静态*部分（它将从中获取指令）和*动态*部分（它将被视为数据和仅数据）。

* * *

就我个人而言，我真的不明白为什么每个人都试图尽可能减少 SQL 并且不想写任何东西。在现实世界的应用程序中，应用程序将发送到数据库的 SQL 查询数量*有限。*将有一个查询来通过用户名查找用户，一个来计算条形表中的 foos 数量等。等等。将这些查询写*一次*，长手。在某处有一个方法`findUserByName()`，其中包含查询以按 SQL 写出的名称查找用户。您不需要动态地将每个查询拼凑在一起，只需编写一次。这也为您提供了所有可能的数据库交互的良好“清单”，并允许在必要时进行手动调整。`</rant>`

* * *

所以，这既是不可能的*，也是*被误导的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T11:27:32.407

尽管出色的 deceze 的回答从字面上涵盖了您的问题，但还有其他内容需要提及。

如果你看一下任何主要的框架，你会发现一个函数... update() 它的工作方式几乎相同：

```
function update($table, $data, $id) { 
```

因此，该方法总体上很受欢迎。
然而，它也是错误的*和*被误导的。

由于最初不灵活，它很快变得无法使用：

*   一旦您需要常规 id 以外的字段名称，
*   一旦你需要更复杂的条件，
*   一旦您需要基于 JOIN 的更新，
*   一旦你需要使用 SQL 函数（！）来处理一些数据

所有这些情况都会使最初的小而整洁的功能变成臃肿的怪物。

但补救措施很简单。
您**真正**需要的是可以添加到查询中的**每种数据类型的***占位符。*所以，欢迎来到[SafeMysql——](https://github.com/colshrapnel/safemysql#safemysql)一个可以实现你梦想的库：

 **```
$db->query("UPDATE ?n SET ?u WHERE id=?i", $table, $data, $id); 
```

它正在做你想做的事，但以正确的方式做事。即使是这样一个复杂的查询也不会给它带来任何麻烦：

```
$data = array('field'=>$value,'field2'=>$value);
$ids  = array(1,2,4);
$sql  = "UPDATE t SET ts=unix_timestamp(), ip=inet_aton(?s),?u WHERE id IN(?a)";
$db->query($sql, $ip, $data, $ids); 
```

虽然它的目的不是制作`"less [SQL] statements"`，而是编写更少的 PHP 代码并让您的查询**安全**，同时保持它熟悉的传统 SQL，而不是像学习一些 Query Builder 的新语言这样的权衡，这只是用 PHP 编写的一种 SQL 方言。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T10:13:22.110

是的，显然是因为它不可读。即使有值，我也认为最好以键的形式使用占位符。例如

```
UPDATE mytable SET `name`=:fullname WHERE ID=:id 
```**

# php - 数据库设计问题。每个用户的表

> ID：16057359
> 
> 赞同：4
> 
> 时间：2013-04-17T10:12:23.487
> 
> 标签：php, mysql, security, codeigniter

首先，我知道这个问题已经[在](https://stackoverflow.com/questions/7796402/make-a-sql-table-for-every-user-of-website-thousands-with-thousands-of-rows)stackoverflow 上讨论[过。](https://stackoverflow.com/questions/2940384/new-table-for-every-user)但是，这种情况可能会有所不同。

让我解释一下情况：

老板希望我和我的同事开发一个 Web 应用程序，他可以在其中添加客户（阅读公司，现在在“用户”上填写）。
每个用户将在应用程序中拥有自己的私人部分，他可以在其中管理他的库存/账单/付款/订单/......他们甚至可以选择询问不同的模块/菜单项/视图/..他们的私人部分。
我们的老板必须能够通过检查主控制部分中的选项来添加/删除一些模块/视图/..。
等等....

我的第一个想法是为每个用户设置一个主模块。这个想法被我的同事抛弃了。他认为这太过分了。
但是后来，当我们开始设计数据库时，他说他希望为每个用户在数据库中拥有大多数表……
我知道这是不好的做法，并试图解释。**但是他表示，如果我们将所有内容都保存在同一张表中，这将是不安全的**。（*如果我们被黑了，他们不仅会拥有一家公司的数据，还会拥有所有公司的数据*）
讨论花了一些时间，最后他的“观点”甚至说服了我们的老板他的方法。

**由于我是这里的新人，我不喜欢在不知道是否确定**的情况下坚持这一点`his statement === false`

所以，我很想听听你对此的看法。

*   安全性如何
*   每个公司的个性化怎么样
*   如何管理数据库
*   有没有人有类似的项目
*   为每家公司使用不同的“模块”怎么样（就像我的第一个想法）
*   ...（实际上所有说服他们的信息都很好，但我觉得我**必须**提供一个很好的选择）

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T10:25:06.140

这在某种程度上是个人意见的问题。但有些事情并不是好的做法。所以这是我对这些观点的看法：

在同一个表中拥有多个“用户”根本不应该是安全风险。

*   如果有人可以访问您的数据库，则他拥有所有数据，无论存储在何处。
*   您的应用程序必须通过过滤和验证的 WHERE 条件确保用户无论如何都只能访问他的行，否则您的应用程序将在 SQL 注入等其他级别上存在严重的安全问题
*   如果每个用户都有一张表，那么在将应用程序扩展到新用户、管理旧用户或删除它们时会遇到很多麻烦。
*   如果您必须从多个用户那里收集数据，性能将非常糟糕
*   大多数数据库中都有最大数量的表，这取决于许多因素。我不知道您必须存储多少用户，但请记住这一点

将用户分隔到他们自己的表中的解决方案听起来像是在跳过开发可靠且安全的数据模型所需的时间。这通常会在您的应用程序的后期开发或维护期间导致许多问题。我强烈反对这种做法。

经验法则应该始终是为每个对象类型使用一个表，而不是每个对象实体。

# css - 如何使子元素的 z-index 高于父元素？

> ID：16057361
> 
> 赞同：106
> 
> 时间：2013-04-17T10:12:26.707
> 
> 标签：css, z-index

假设我有这个代码：

```
<div class="parent">
    <div class="child">
        Hello world
    </div>
</div>

<div class="wholePage"></div> 
```

这个jsFiddle：http: [//jsfiddle.net/ZjXMR/](http://jsfiddle.net/ZjXMR/)

现在，我需要`<div class="child">`在上面，`<div class="wholePage">`但在 jsFiddle 中你可以看到子元素在`<div class="wholePage">`.

如果您删除`parent`类`position`or `z-index`，一切正常。这是我需要的正确行为：http: [//jsfiddle.net/ZjXMR/1/](http://jsfiddle.net/ZjXMR/1/)

我怎样才能做到这一点，`z-index`无论是否从页面中删除任何内容？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2013-04-17T10:15:14.233

这是不可能的，因为孩子`z-index`设置为与其父级相同的堆叠索引。

您已经通过从父元素中删除 z-index 解决了这个问题，像这样保持它或者使元素成为兄弟元素而不是子元素。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-12-08T12:18:32.007

没有什么是不可能的。使用武力。

```
.parent {
    position: relative;
}

.child {
    position: absolute;
    top:0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 100;
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-17T10:22:58.347

要在不删除任何样式的情况下实现您想要的效果，您必须使“.parent”类的 z-index 大于“.wholePage”类。

```
.parent {
    position: relative;
    z-index: 4; /*matters since it's sibling to wholePage*/
}

.child {
    position: relative;
    z-index:1; /*doesn't matter */
    background-color: white;
    padding: 5px;
} 
```

jsFiddle：http: [//jsfiddle.net/ZjXMR/2/](http://jsfiddle.net/ZjXMR/2/)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-04-17T11:53:51.333

给父 z-index：-1，或不透明度：0.99

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-04-24T07:12:36.507

在子元素中使用非静态位置以及更大的 z-index：

```
.parent {
    position: absolute
    z-index: 100;
}

.child {
    position: relative;
    z-index: 101;
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-10-30T20:55:30.867

尝试使用此代码，它对我有用：

```
z-index: unset; 
```

# python - 在字典中平均重复

> ID：16057366
> 
> 赞同：0
> 
> 时间：2013-04-17T10:12:35.903
> 
> 标签：python, dictionary, python-2.7

我正在使用文本文件中的数据行制作字典。前三列数据成为键，第四列中的数据形成字典的值。代码如下：

```
def formatter(lines):
    for line in lines:
        if not line.strip(): continue
        yield [to_float(item) for item in line.split()]

 dct1 = {}
 with open('test.txt') as f1:
     for row in formatter(f1):
        dct1[tuple(row[:3])] = row[3] 
```

此代码有效。问题在于文件中的密钥重复，数据正在从中提取，例如文件可能有两行：

```
1  2  3  50
1  2  3  100 
```

然而，最终的字典 dct1 将仅包含以下行中的第二行：dct1[(1,2,3)]=[100]。我正在尝试做但目前不能做的是，每次程序尝试覆盖一个键时，取而代之的是平均给定键的值，即如果读入上述两行，则为键 (1,2,3) 为 75（50 和 100 的平均值）。

任何帮助将非常感激。非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T10:27:33.213

一旦你平均了前两个，找到第三个会让你搞砸，因为你不知道 dict 中的值是单个值还是前两个值的平均值。您还需要将计数保留在 dict 中：

```
for row in formatter(f1):
    key = tuple(row[:3])
    if key not in dct1:
        dct1[key] = (1, row[3])
    else:
        val = dct1[key]
        dct1[key] = (val[0] + 1, (val[0] * val[1] + row[:3]) / (val[0] + 1)) 
```

现在字典中的每个元素都有一个计数和一个平均值。您必须使用 dct1[key][1]，而不是使用 dct1[key]。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T10:16:51.680

要计算多个键的平均值，您需要先收集所有值*，*然后*再*计算平均值。

用于`collections.defaultdict`使收集值变得容易：

```
from collections import defaultdict

dct1 = defaultdict(list)

with open('test.txt') as f1:
    for row in formatter(f1):
       dct1[tuple(row[:3])].append(row[3])

dct1 = {k: sum(v)/len(v) for k, v in dct1.iteritems()} 
```

首先`dct1`是将键映射到值*列表*的字典。然后，dict 理解将其替换为将键映射到平均值的字典。

# javascript - jQuery Animate(ScrollLeft) 忽略时间参数

> ID：16057369
> 
> 赞同：0
> 
> 时间：2013-04-17T10:12:42.120
> 
> 标签：javascript, jquery, jquery-animate

好吧，伙计们，我不能把头绕在它周围：

```
thumb.animate(
  {'scrollLeft': active.width()*3},
  'slow'
); 
```

它按预期滚动，但`"slow"`被完全忽略，这意味着它在瞬间滚动而不是缓慢滚动。

我希望你能帮助我......哦，是`active.width()`的，是一个数字，因为它不会滑动并抛出错误，它不是

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:36:13.623

正如@soyuka 所建议的那样，您应该使用它来制作动画，`left`而不是`scrollLeft`通过隐藏图像来进行动画处理，`overflow:hidden`并且图像应该是绝对定位或相对定位。

### html:

```
<p class='thumb'>Hello</p> 
```

### CSS：

```
p { 
  margin:10px;
  padding:5px;
  border:2px solid #666; 
  width:250px; 
  position:relative;  //<----required it could also be absolute
} 
```

### jQuery脚本：

```
$(function(){
   $(".thumb").animate({left : 200},'slow');
}); 
```

### [输出 Jsbin Demo](http://jsbin.com/exuyis/1/edit)看看它是否有帮助。

# c# - 如何使用 NHibernate 从子查询中选择前 X 行？

> ID：16057372
> 
> 赞同：0
> 
> 时间：2013-04-17T10:12:59.363
> 
> 标签：c#, oracle, nhibernate, queryover

我的问题与我在 StackOverflow 上看到的其他问题略有不同，因此请不要将其与之前的答案混淆。

我有一个查询

```
SELECT tab1.Id 
  FROM TABLE1 tab1 
  WHERE tab1.modified_date between to_date('01/04/2013 10:00:00', 'dd/mm/yyyy HH:MI:SS') and to_date('01/04/2013 11:15:00', 'dd/mm/yyyy HH:MI:SS') 
  GROUP BY tab1.Id
  ORDER BY max(tab1.received_date) desc 
```

我想选择 TOP 500 行，并且因为 Oracle 在 GROUP 和 ORDER BY 条件（[证据](http://www.oracle.com/technetwork/issue-archive/2006/06-sep/o56asktom-086197.html)）之前处理 where 子句，我必须通过将此查询包装在另一个中来选择前 500 行来实现这一点。

所以，现在我的查询看起来像......

```
SELECT * 
FROM (SELECT tab1.Id 
  FROM TABLE1 tab1 
  WHERE tab1.modified_date between to_date('01/04/2013 10:00:00', 'dd/mm/yyyy HH:MI:SS') and to_date('01/04/2013 11:15:00', 'dd/mm/yyyy HH:MI:SS') 
  GROUP BY tab1.Id
  ORDER BY max(tab1.received_date) desc ) sub 
WHERE ROWNUM <=500 
```

这一切都很好，*但我正在努力使用 QueryOver API 将其转换为 NHibernate 查询*。内部查询很简单，例如

```
var subquery = QueryOver.Of<Table1>()
            .Select(Projections.Group<Table1>(e => e.Id))
            .....where clause
            .OrderBy(Projections.Max<Table1>(e => e.Received_Date)).Desc 
```

**但是我如何将它包装在一个 select * from subquery where rownum <= 500 中？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:45:04.183

NHibernate 知道如何创建选择前 x 行的正确查询。

*   HQL 和普通 SQL 查询：`query.SetMaxResults(500)`.
*   QueryOver 和 Linq 查询：`query.Take(500)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T07:44:30.920

阻止我使用前面答案中建议的 Take() 方法的问题是由于我的陈述的 ORDER BY 部分。在 Take() 之后评估 ORDER BY，这意味着返回了错误的 500 个结果。

**我通过创建一个表示包含 ORDER BY 子句的查询的视图来解决该问题，然后在从视图中选择时，Take() 方法按预期工作。**

# textbox - 如何在 SmartGwt 的 SectionStack 中显示 listgrid 数据

> ID：16057375
> 
> 赞同：0
> 
> 时间：2013-04-17T10:13:09.590
> 
> 标签：textbox, smartgwt, listgrid

我在代码中有两个 sectionstacksection，onw 显示输入数据的动态表单，第二个 sectionstacksection 显示 listgrid，当我在动态表单部分中点击保存按钮时，它将显示输入数据。

我创建了三个类，一个是扩展动态表单的 EmployeeApplicationForm，第二个是扩展 listgrid 的 EquiryList，第三个是扩展 ListGridRecord 的 getter 和 setter 的 EnquiryFormRecord。

我已经完成了获取文本框数据并调用 EnquiryFormRecord 构造函数来获取和设置“数据”变量中的数据。但我无法将这个“数据”变量访问到我的 EnquiryList 类以在 listGird 字段中访问“setData（数据）”。

我的代码是这样的。请分享您解决此问题的想法 EmployeeApplicationClass 和 EnquiryList：

```
class EmployeeApplicationForm extends DynamicForm {
ButtonItem saveButton;
ButtonItem resetButton;
EnquiryFormRecord[] data;
public EmployeeApplicationForm() {
    setNumCols(6);
    setWidth100();
    setHeight(135);
    setErrorOrientation(FormErrorOrientation.RIGHT);

    final TextItem fname = new TextItem("FirstName");

    final TextItem lname = new TextItem("LastName");

    saveButton = new ButtonItem("Save");
    saveButton.setStartRow(true);
    saveButton.setEndRow(false);
    resetButton = new ButtonItem("Reset");
    resetButton.setStartRow(false);
    resetButton.setEndRow(false);

    saveButton.addClickHandler(new ClickHandler() {

        @Override
        public void onClick(ClickEvent event) {
            // TODO Auto-generated method stub
            // if validation passes then show user an alert message box
            if (valid()) {
                SC.say("Form passed validation");
            }
            String fn = fname.getValueAsString();
            String ln = lname.getValueAsString();

            data = new EnquiryFormRecord[] { new EnquiryFormRecord(fn, ln) };
        }
    });

    resetButton.addClickHandler(new ClickHandler() {

        @Override
        public void onClick(ClickEvent event) {
            // TODO Auto-generated method stub
            resetForm();
        }
    });
    setFields(fname, lname, saveButton, resetButton);
}

private boolean valid() {
    return this.validate();
}

private void resetForm() {
    this.reset();
}
}

class EnquiryList extends ListGrid {
public EnquiryList(EnquiryFormRecord[] data) {
    ListGridField fname = new ListGridField("fname","First Name");
    ListGridField lname = new ListGridField("lname","Last Name");

    setFields(fname, lname);
    setData(data);------/*Hera I am getting error. I cannot access the EmployeeAppliocationForm class "data" variable here*/
    setCanEdit(true);
    setShowAllRecords(true);
    // setSortField(0);
    setAlternateRecordStyles(true);
    setCanDragRecordsOut(true);
    setHoverWidth(200);
    setHoverHeight(20);
    setSelectionType(SelectionStyle.SINGLE);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T17:16:59.390

我认为简短的回答是使用语法来访问封闭类变量。所以而不是`setData(data)`它`setData(EmployeeApplicationForm.this.data);`

以上应该可以工作，但我不得不说它的设置方式令人困惑，应该重新工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T21:59:40.973

在这种情况下，最好使用对象组合而不是继承，因为您没有在任何对象（DynamicForm、ListGrid、ListGridRecord）中扩展状态/行为。
[更喜欢组合而不是继承？](https://stackoverflow.com/questions/49002/prefer-composition-over-inheritance)
[为什么要使用继承？](https://stackoverflow.com/questions/3351666/why-use-inheritance-at-all)

您可以使用如下所述的对象组合。

要理解的一件事是，需要将记录添加到按钮单击/事件的网格中。
您正在尝试在屏幕初始化期间使用 setData。
相反，必须从按钮事件处理程序调用 setData（而不是 addData）。

初始化网格的方法

```
private ListGrid getListGrid() {
    // preparing grid fields
    ListGridField fname = new ListGridField("fname", "First Name");
    ListGridField lname = new ListGridField("lname", "Last Name");

    // creating and configuring grid
    ListGrid grid = new ListGrid();
    grid.setWidth100();
    grid.setHeight100();
    grid.setFields(fname, lname);

    return grid;
} 
```

初始化表单的方法。必须通过网格才能添加/更新按钮事件的记录。

```
private DynamicForm getDynamicForm(final ListGrid grid) {
    // preparing form items
    final TextItem fname = new TextItem("firstName", "First Name"); // its better to explicitly specify both name and title
    final TextItem lname = new TextItem("lastName", "Last Name");

    ButtonItem saveButton = new ButtonItem("Save");
    saveButton.setStartRow(true);
    saveButton.setEndRow(false);
    saveButton.addClickHandler(new ClickHandler() {
        public void onClick(ClickEvent clickEvent) {
            String fn = fname.getValueAsString();
            String ln = lname.getValueAsString();

            Record record = new Record();
            record.setAttribute("fname", fn); // record attribute names must match grid field name
            record.setAttribute("lname", ln);

            grid.addData(record); // addData should be used to add new records per save operation

            // setData should be used to set all records in grid per save operation
            // in this case, its probably not what is required, as this will overwrite previous records in grid
            // resulting, only one record left in grid after every save operation
            // grid.setData(new Record[]{record});
        }
    });

    // creating and configuring form
    DynamicForm form = new DynamicForm();
    form.setWidth100();
    form.setHeight(135);
    form.setNumCols(6);
    form.setErrorOrientation(FormErrorOrientation.RIGHT);
    form.setFields(fname, lname, saveButton);

    return form;
} 
```

把它放在一起

```
ListGrid grid = getListGrid();
DynamicForm form = getDynamicForm(grid);
...
formSection.setItems(form);
...
gridSection.setItems(grid);
...
sections.setSections(formSection, gridSection); 
```

# scala - 在 SBT 中执行测试失败的任务依赖项

> ID：16057378
> 
> 赞同：1
> 
> 时间：2013-04-17T10:13:21.447
> 
> 标签：scala, sbt

如果我的测试成功完成，以下代码位于我的 build.sbt 中。它播放了一首美妙的小曲子，告诉我我的测试成功完成，让我不再像肮脏的哈利那样盯着终端机。

```
test <<= (test in Test) map { result =>
  import java.io.File
  import javax.sound.sampled._
  val clip = AudioSystem.getClip();
  val soundfile = new File("success.wav")
  val inputStream = AudioSystem.getAudioInputStream(soundfile);
  clip.open(inputStream);
  clip.start();
  result
} 
```

所以我用 ~test 开始我的测试，然后就结束了。每次我在编辑器中点击保存时，测试会自动神奇地重新运行，如果它们通过，你就会听到叮当声。

*问题是*：如果测试失败，我该如何播放声音？目前它只是对失败保持沉默。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:08:50.197

请参阅[处理失败](http://www.scala-sbt.org/release/docs/Detailed-Topics/Tasks#handling-failure)。例如，

```
... test in Test mapR {
  case Inc(inc: Incomplete) =>
     ... play failure sound ...
     throw inc
  case Value(v) =>
     ... play success sound ...
     v
} 
```

# javascript - ngRepeatWatch 似乎是 Batarang 的瓶颈

> ID：16057380
> 
> 赞同：2
> 
> 时间：2013-04-17T10:13:23.037
> 
> 标签：javascript, angularjs

我刚刚注意到[Batarang](https://chrome.google.com/webstore/detail/angularjs-batarang/ighdmehidhipcmcojjgiloacoafjmpfk)分析我的 AngularJS 应用程序显示以下内容：

`ngRepeatWatch | 64.2% | 136.0ms`

这比下一个报告的指令要多 10 倍的时间。

这是否意味着我可能过度使用`ngRepeat`指令？如何确定？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T10:22:52.033

`ngRepeat`对于大型集合来说非常慢，因为它为每个项目创建了一个新范围。如果您更改重复结构中的属性，更改将应用​​于父范围等。这会使创建列表变慢。

同样应用过滤器和范围并不能使它变得更好，请在将数据放入模板之前尝试过滤，或者根据您的数据，在服务器端进行过滤。

如果您不需要将更改传递到所有范围或数据不更改，请尝试为应该重复的元素创建指令，并确保它不继承父范围。

你读了...吗：

*   [在大型数据集上使用多个过滤器的 ng-repeat](https://stackoverflow.com/questions/14126905/angularjs-ng-repeat-with-multiple-filters-on-large-data-set)
*   [angular.js 性能问题](https://stackoverflow.com/questions/14485828/angular-js-performance-issues)

# sublimetext2 - Git sublime 包不起作用

> ID：16057381
> 
> 赞同：2
> 
> 时间：2013-04-17T10:13:23.977
> 
> 标签：sublimetext2, git-push, git-diff

我的崇高文本中的 Git diff 引发以下错误

```
error: Malformed value for push.default: simple
error: Must be one of nothing, matching, tracking or current.
fatal: bad config file line 7 in /Users/fizer/.gitconfig 
```

如果我从 .gitconfig 中删除**push.default: simple**。然后它工作。但是当我做**git push**时，它抱怨它需要**push.default: simple**。

如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-30T11:29:00.903

Sublime 使用的是旧版本的 git。如果您在 linux 上`which git`，请在终端中获取输出并更改您的 git 包设置，如下所示：

```
{
  "git_command": "/new/path/to/git"
} 
```

# jquery - scroll() 在 jQuery 中不能用于动态元素

> ID：16057384
> 
> 赞同：3
> 
> 时间：2013-04-17T10:13:30.797
> 
> 标签：jquery, scroll

我正在使用以下内容。这不适用于动态创建的元素。我使用的是 jQuery 1.4.2

```
 $(".wrapper1").live("scroll",function(){
     alert(123);
    $(".wrapper2")
    .scrollLeft($(".wrapper1").scrollLeft());
  }); 
```

这也不适用于普通元素。（在页面加载时加载）

这里可能是什么原因。请帮助我。在此先感谢....

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T10:21:26.767

浏览器发生变化，jQuery 错误得到修复，这就是为什么始终使用最新版本的 jQuery 很重要的两个原因（经过适当的测试，您不能只指向最新版本）。

您的代码适用于 jQuery 1.9，对于另一种事件类型，

```
$(document).on("event_type",".wrapper1", function(){
    $(".wrapper2")
        .scrollLeft($(".wrapper1").scrollLeft());
}); 
```

使用`$(document)`而不是作为接收者的原因`$(".wrapper1")`是只有在绑定时存在的元素才能接收和委托事件。`on`不像旧的那样工作`live`。

除了这不适用于`scroll`事件，因为它们不会冒泡。

所以我能提出的最合理的解决方案是定义一个函数：

```
$.fn.bindScrollHandler1 = function(){
    $(this).on('scroll', function(){
       $(".wrapper2").scrollLeft($(".wrapper1").scrollLeft());
    });
} 
```

并在开始时调用它：

```
$('.wrapper1').bindScrollHandler1(); 
```

并且每次创建一个新的 .wrapper1 元素时：

```
myNewElement.bindScrollHandler1(); 
```

[示范](http://jsfiddle.net/8JUYy/)

请注意，您的完整逻辑似乎有点缺乏，因为您没有配对滚动条，而是让它们都工作相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T10:42:57.183

我知道你解决了你的问题（或者你认为你解决了它），但是如果你有一些问题，你应该知道：

> 事件处理程序仅绑定到当前选定的元素；当您的代码调用`.on()`.

这是来自[jQuery 文档](http://api.jquery.com/on/)。

该功能有两种使用`.on()`方法：

1.  `$('selector').on('event', function () { body of the handler });`

    事件处理程序直接附加到匹配的元素。因为它是强制完成的，所以选择器被解析并且所有匹配的元素都得到一个附加的事件处理程序。例如，它与调用相同`$('.asdf').click()`。

2.  `$('selector1').on('event', 'selector2', function () { handler });`

    如您所见，有 2 个选择器：事件处理程序将附加到选择器 1，但它将处理在选择器 2 上触发的事件！这很像`.live()`or `.delegate()`，（实际上完全一样）。

    它的作用是`.live()`将事件处理程序附加到'document'，并处理选择器匹配的元素的事件（与 相同`$('document').on('event', 'selector', function() {});`）。

    这样做的好处是事件处理程序附加到已经存在的元素上，并且能够通过事件冒泡处理动态创建的元素的事件。

    所以在你的情况下，第二种语法似乎是你需要的。

**编辑**：我不知道有一个大问题：滚动元素没有冒泡。有解决方法，但我现在没有时间编写解决方案。让我回去吧，当我大约几个小时后回来的时候。或者如果dystroy的解决方案有效，请不要犹豫接受它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-10T15:18:48.110

在我的应用程序中，我有一个按钮，每次单击按钮时都会将表单字段集附加到正文 - 我想将页面向下滚动到新元素，但由于明显的原因（冒泡等），这不起作用。我想出了一个简单的解决方法...

```
function scroll(pixels){
    $('html, body').animate({
        scrollTop: pixels
    }, 1000);
};

function addObservation(x){
    $('body').append(x);
    newFieldSet = $('fieldset').last();
    pixelsFromTop = newFieldSet.offset().top;
    scroll(pixelsFromTop);
};

$(document).on("click", "#add_observation", function(){
    addObservation("<fieldset>SOME FORM FIELDS HERE</fieldset>");
}); 
```

因此，每次添加字段集时，`.offset().top`测量该字段集距顶部的像素数，然后滚动窗口该距离。在您的情况下，您可以执行`pixelsFromLeft = newFieldSet.offset().left`并替换`scrollTop`为`scrollLeft`, 或类似的东西。

# c++ - 从文件读取并将数据发送到服务器时附加字符

> ID：16057385
> 
> 赞同：0
> 
> 时间：2013-04-17T10:13:33.813
> 
> 标签：c++, sockets, winsock

我正在从文件中读取数据并使用 Windows 套接字将其发送到服务器。以下是代码：

```
//Socket creation and setup code

long Begin;
long End;
char * block;
ifstream myfile;
myfile.open(filepath, ios::in | ios::binary);
Begin = myfile.tellg();
myfile.seekg(0,ios::end);
End = myfile.tellg();
unsigned long size = End - Begin;
int Div = (int)size / 1024;
int Mod = (int)size % 1024;
int len = strlen(name);
send(theSocket,(const char*)&len,sizeof(int),0);
send(theSocket,name,strlen(name),0);
send(theSocket, (const char*)&size, sizeof(unsigned long), 0);
block = new char[1024];
for (int i=0; i<Div; i++)
{
    myfile.seekg(i*1024);
    myfile.read(block,1024);
    cout << block << endl;
    send(theSocket,block,1024,0);
}
if (Mod != 0)
{
    block = new char[Mod];
    myfile.seekg(Div*1024);
    myfile.read(block,Mod+1);
    send(theSocket,block,Mod,0);
}
delete [] block;
myfile.close();
closesocket(theSocket);
WSACleanup(); 
```

我遇到的问题是，当我从文件中读取数据时`block`，它最后会附加一些奇怪的字符。每次的字符都是一样的=> **"ýýýý««««««««îþîþ"**。无法弄清楚是什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:16:12.067

您看到一些乱码的可能原因是：

```
block = new char[1024];
...
myfile.seekg(i*1024);
myfile.read(block,1024);
cout << block << endl; 
```

您正在将 1024 个字符读入一个`char`数组，然后将其传递给`std::cout`. 当您将 a `char*`（这是引用 char 数组的方式）传递给 时`std::cout`，它期望它以零结尾。为此，您需要`block`数组大小为 1025，并确保最后一个字节为零 ( `block[1024] = 0;`)。如果没有这个零终止，输出将是来自数组之后的随机内存值。

另请注意，如果您将零作为数据的一部分读入，那么这也将被视为在输出到时终止字符串`cout`。

# java - jdbc MySQLNonTransientConnectionException：连接关闭后不允许操作

> ID：16057386
> 
> 赞同：0
> 
> 时间：2013-04-17T10:13:37.063
> 
> 标签：java, mysql, jdbc

我在多线程 java 程序中将大量记录插入数据库。

主线程创建所有线程并等待它们完成。

```
for(int i = 0; i < noOfThreads; i++) {
results.add(exec.submit(new InsertConnection()) );
Thread.sleep(1000);
}

for(Future<?> fs : results) {
try {
// This will wait till each thread is done
fs.get();
} catch (Exception e) { 
logger.error(null, e);
} 
} 
```

每个线程都在数据库连接上运行，并将记录插入数据库。连接对象不在线程之间共享。像这样的东西

```
public class InsertConnection implements Runnable{

    public InsertConnection() {
        //create connection object
    }

@Override
public void run() {
    while(true)
       //Fetch a betch
       //Insert ina loop
        }
    }
} 
```

就在程序结束之前，我看到一些线程 (2, 4 6) 无法插入，因为连接已关闭。我认为当 1 个线程完成它的工作时，套接字会以某种方式关闭。下面是例外

```
** BEGIN NESTED EXCEPTION ** 

com.mysql.jdbc.CommunicationsException
MESSAGE: Communications link failure due to underlying exception: 

** BEGIN NESTED EXCEPTION ** 

java.net.SocketException
MESSAGE: Software caused connection abort: recv failed

STACKTRACE:

java.net.SocketException: Software caused connection abort: recv failed
    at java.net.SocketInputStream.socketRead0(Native Method)
    at java.net.SocketInputStream.read(Unknown Source)
    at java.net.SocketInputStream.read(Unknown Source)
    at com.mysql.jdbc.util.ReadAheadInputStream.fill(ReadAheadInputStream.java:113)
    at com.mysql.jdbc.util.ReadAheadInputStream.readFromUnderlyingStreamIfNecessary(ReadAheadInputStream.java:160)
    at com.mysql.jdbc.util.ReadAheadInputStream.read(ReadAheadInputStream.java:188)
    at com.mysql.jdbc.MysqlIO.readFully(MysqlIO.java:1994)
    at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:2411)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:2916)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1631)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:1723)
    at com.mysql.jdbc.Connection.execSQL(Connection.java:3283)
    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:1332)
    at com.mysql.jdbc.PreparedStatement.execute(PreparedStatement.java:882)
    at com.mysql.jdbc.CallableStatement.execute(CallableStatement.java:759)
    at mind.fire.connection.store.InsertConnection.execute(InsertConnection.java:81)
    at mind.fire.connection.store.InsertConnection.run(InsertConnection.java:62)
    at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

** END NESTED EXCEPTION ** 
```

# c# - 如何将第三方 dll 与自己的 dll 结合起来

> ID：16057388
> 
> 赞同：4
> 
> 时间：2013-04-17T10:13:42.890
> 
> 标签：c#, dll, .net-assembly

我正在用 C# 创建一个库 TRSetup.dll。该项目包括一些第三方dll。（例如：GalaSoft.MvvmLight.Extras.WPF4.dll、GalaSoft.MvvmLight.WPF4.dll、RemObjects.Hydra.dll）

我需要组合所有的 dll 并创建一个 dll。

我正在使用 ilMerge 来组合 dll。我正在使用的以下命令，

```
 ilMerge /out:MergedSetup.dll /targetplatform:v4,"C:\Program Files\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\Profile\Client" 
/lib: TRSetup.dll  Galasoft.MvvmLight.Extras.WPF4.dll Galasoft.MvvmLight.WPF4.dll RemObject.Hydra.dll 
```

我可以创建一个名为 MergedSetup.dll 的 dll，但在运行时它会崩溃。我该如何合并这些 dll。

先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-01T10:27:24.580

这是 WPF（和 NHibernate，以及许多其他按名称引用程序集）和 ILMerge 的问题。长话短说，在 ILMerge 之后不再有这样的程序集，它们都被注入到主程序集中。

尝试嵌入而不是合并：LibZ ( [http://libz.codeplex.com/](http://libz.codeplex.com/) ) 或 Costura.Fody ( [https://github.com/Fody/Costura/](https://github.com/Fody/Costura/) )

免责声明：我是 LibZ 的作者。

干杯，

# git - git 通过清除存储库历史记录释放磁盘空间

> ID：16057391
> 
> 赞同：18
> 
> 时间：2013-04-17T10:13:45.963
> 
> 标签：git

所以我正在和一些朋友一起工作，我们都是 git 的新手，其中一个人提交了大量的外部二进制文件，这会减慢存储库的速度，并占用很大的磁盘空间。

我们刚刚开始了这个项目，所以除了一个自述文件之外，其中并没有什么重要的东西。所以我们想做的是将存储库历史清除为当前状态。

```
So basicly it looks this:

Head -> A -> B -> C    total disk size 45 MB, 1 file, 300 deleted files

And we want this:

Head -> A              total disk size 1 kB, 1 file, 0 deleted files 
```

显而易见的解决方案是创建一个新的存储库，然后将自述文件复制到新的存储库中。但是，如果有 GIT 命令可以做到这一点，我想学习教育/好奇心。

我一直在尝试使用 Rebase 命令，但它似乎仍然保留旧历史及其数据，这让我感到困惑，因为如果 rebase 不会从存储库中删除数据，那么您最好不要使用它。

我一直在谷歌搜索有关此问题的其他帖子，并且我怀疑您无法使用 git 执行此操作。不过我想确认一下。

是的，它是 github 上的一个远程目录

谢谢你的帮助。

所以对于我的解决方案，我选择这样做：

```
rebase using tortoisegit
squash all commits
then using git bash:
git reflog expire --all --expire-unreachable=now
git gc --aggressive --prune=now
git push origin master --force 
```

本地存储库历史似乎不想缩小磁盘大小。但是，再次克隆存储库会显示所需的结果和磁盘大小。存储库日志也是如此。

感谢您的帮助。有趣的 Rebase 似乎非常强大。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-17T10:32:16.277

变基（`git rebase -i --root`如果你没有恢复错误提交，只需删除它的行，如果你这样做了，用恢复提交压缩错误提交）或使用 filter-branch 将清除分支历史记录中的数据，但不会成功完全从存储库中消失。

这是因为，出于安全和可追溯性的原因，git 会保留一个 reflog（使用 可见`git log -g`）来跟踪您所做的每个提交，无论它是否仍然是祖先图的一部分。

克隆过滤后的 repo 不会克隆隐藏的数据，您也可以使用以下命令将其删除：

```
git reflog expire --all --expire-unreachable=now
git gc --aggressive --prune=now 
```

通常不建议使用这些命令，并且未引用的提交无论如何都会在 30 天内到期，但由于您的存储库实际上是新的，因此您不会冒太大风险。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T10:26:45.303

你不需要完全失去你的历史。您可以使用[`filter-branch`](https://git-scm.com/docs/git-filter-branch). 这是一个非常具有破坏性的命令，因此请先复制一份。此示例将遍历您删除所有`jar`文件的历史记录。

```
git filter-branch --tree-filter 'git rm **/*.jar' 
```

调整它以匹配意外添加的任何巨型文件。请注意，修改提交会更改其 ID，因此人们可能希望在此之后重新克隆存储库，以避免严重的冲突。您还需要`--force`推送回存储库，因为 git 会（正确地）抱怨历史发生了很大变化。

在决定进行垃圾收集之前，您的本地存储库可能不会立即缩小大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T10:29:18.893

您可能想查看[Squashing all Git commits into a single commit](https://wincent.com/wiki/Squashing_all_Git_commits_into_a_single_commit)。这也引用了一个堆栈溢出问题——可能被称为重复问题——在这里：[如何将所有 git 提交压缩为一个？](https://stackoverflow.com/questions/1657017/git-squash-all-commits-into-a-single-commit)

Wincent 在第一个链接中提到的解决方案大约位于页面的一半。在本地进行的快速测试表明它确实像宣传的那样工作。供您参考，Wincent 建议：

```
git update-ref -d refs/heads/master
git commit -m "Initial import" 
```

FWIW，您可能需要运行`git gc --prune=now`以清理任何未引用的对象。当你推他新主人时，你需要使用`--force`. 在尝试任何这些之前，您可能应该创建一个备份。:-)

# .net - 为什么 HtmlEncode 和 HtmlDecode 在 .NET 中不是同构的？

> ID：16057398
> 
> 赞同：4
> 
> 时间：2013-04-17T10:14:12.193
> 
> 标签：.net, unicode, html-entities, html-encode

我觉得这很令人惊讶，也很烦人。

例子：

```
Decode(&rdquo;) => ”
Encode(”)       => ” 
```

相关类：

```
.NET 4:   System.Net.WebUtility
.NET 3.5: System.Web.HttpUtility 
```

我可以理解网页可以是 Unicode，但在我的情况下，输出不能是 UTF8。

有没有什么东西（可能是 HtmlWriter 类）可以做到这一点而无需我重新发明轮子？

**替代解决方案：**

```
string HtmlUnicodeEncode(string input)
{
    var sb = new StringBuilder();

    foreach (var c in input)
    {
        if (c > 127)
        {
            sb.AppendFormat("&#x{0:X4};", (int)c);
        }
        else
        {
            sb.Append(c);
        }
    }

    return sb.ToString();
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-17T10:45:35.557

# localization - Monotouch 和 Mono for Android 支持卫星程序集以实现国际化

> ID：16057403
> 
> 赞同：1
> 
> 时间：2013-04-17T10:14:26.080
> 
> 标签：localization, xamarin.ios, multiplatform

Monotouch 和 Mono for Android 是否支持卫星程序集以实现国际化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:02:45.460

这些已经在 MonoTouch 中工作了一段时间，我们实际上在我们的游戏[Draw a Stickman: EPIC](http://epic.drawastickman.com)中使用了它。

[他们最近在4.6.3](http://docs.xamarin.com/releases/android/xamarin.android_4/xamarin.android_4.6.3)中将此添加到 Mono for Android 。

# c# - 从数据库中解密加密值

> ID：16057405
> 
> 赞同：0
> 
> 时间：2013-04-17T10:14:27.633
> 
> 标签：c#, encryption

我想在数据库中保存一个加密的值，在从数据库中获取值的同时，我想解密并在 UI 中显示该值。这是我使用的代码

```
private string Decryptdata(string encryptpwd)
{
    string decryptpwd = string.Empty;
    UTF8Encoding encodepwd = new UTF8Encoding();
    Decoder Decode = encodepwd.GetDecoder();
    encryptpwd = encryptpwd.Replace(" ", "+");
    byte[] todecode_byte = Convert.FromBase64String(encryptpwd);
    int charCount = Decode.GetCharCount(todecode_byte, 0, todecode_byte.Length);
    char[] decoded_char = new char[charCount];
    Decode.GetChars(todecode_byte, 0, todecode_byte.Length, decoded_char, 0);
    decryptpwd = new String(decoded_char);
    return decryptpwd;
} 
```

但是我收到错误，因为**Base-64 字符数组的长度无效。**我正在使用 c#.net

加密功能：

```
Encryptdata(string password) { 
       string strmsg = string.Empty; 
       byte[] encode = new byte[password.Length]; 
       encode = Encoding.UTF8.GetBytes(password); 
       strmsg = Convert.ToBase64String(encode); 
       return strmsg; 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T10:48:16.133

如果您将密码存储在数据库中，除非您有充分的理由需要能够获取纯文本，否则您应该对密码进行散列处理，而不是将它们加密或以纯文本形式存储。

加密和散列之间的区别在于，加密可以检索纯文本，而散列则不能。当您存储密码时，您应该获取用户提供的密码并对其进行哈希处理（最好使用盐），然后当用户下次尝试使用密码登录时，您再次对其进行哈希处理，然后将存储的哈希值与您刚刚生成的一个，如果它们匹配，那么它们是相同的。

我已经在这里写了这个（[密码存储，如何正确操作](http://satalketo.com/2013/03/password-storage-how-to-do-it-right/)）并给出了更全面的解释。

我的网站上有一些带有代码的散列函数（在 VB.NET 中，但它们很容易移至 C#），可能最好的方法是使用 SHA512（[计算字符串或文件的 SHA512 散列](http://satalketo.com/2010/06/sha512-hash-of-string-or-file/)）。

如果您仍然不确定哈希等，请随时说出您不明白的内容，我会尽力提供帮助:)

# c# - 关联引用未映射的类 (.net)

> ID：16057408
> 
> 赞同：2
> 
> 时间：2013-04-17T10:14:36.900
> 
> 标签：c#, .net, nhibernate, nhibernate-mapping

即使 hbm 设置为嵌入式资源，NHibernate 也会给我这个错误：

关联引用未映射的类：UploadPromotions.Models.StagedPromotionImage

映射如下：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
assembly="UploadPromotions.Models"
namespace="UploadPromotions.Models">
  <typedef
   name="blobbedItem"
   class="UploadPromotions.Models.Blobbed, UploadPromotions.Models">
    <param name="classType">Legacy.Item,Legacy</param>
  </typedef>
  <typedef
  name="blobbedSupplier"
  class="UploadPromotions.Models.Blobbed, UploadPromotions.Models">
    <param name="classType">Legacy.ItemFromSupplier,Legacy</param>
  </typedef>
  <typedef
 name="photoText"
 class="UploadPromotions.Models.Blobbed, UploadPromotions.Models">
    <param name="classType">UploadPromotions.Models.PhotoText,UploadPromotions.Models</param>
  </typedef>
  <union-subclass name="StagedPromotionImage" extends="DiskImage">
    <many-to-one name="CurrentStage" class="Stage" column="StageId" cascade="none"></many-to-one>
    <set name="Stages" table="StageForPromotionsTable" cascade="none" batch-size="20" access="field.camelcase-underscore">
      <key column="PromotionId"/>
      <many-to-many class="Stage" column="StageId"/>
    </set>
    <many-to-one name="BaseImage" class="DiskImage" column="DiskImageId"></many-to-one>
    <property name="Created"></property>
    <property name="Modified"></property>
    <property name ="Name"></property>
    <property name="From" column="FromDate" not-null="true"></property>
    <property name="To" column="ToDate" not-null="true"></property>
    <property name="Description" type="AnsiString" length="100" not-null="true"></property>
    <property name="Commited"></property>
    <property not-null="true" name ="Art" type="NHibernate.Type.EnumStringType`1[[ADAutoTotal.UploadPromotions.Models.Art,ADAutoTotal.UploadPromotions.Models]], NHibernate"></property>
    <property not-null="true" name ="Use" column="UsageType" type="NHibernate.Type.EnumStringType`1[[ADAutoTotal.UploadPromotions.Models.Use,ADAutoTotal.UploadPromotions.Models]], NHibernate"></property>
    <component name="TemplateImage" class="Template">
      <property name="TemplateName" not-null="true"></property>
      <property name="Width" not-null="true" column="TemplateWidth"></property>
      <property name="Height" not-null="true" column="TemplateHeight"></property>
    </component>
    <property name="Headline" type="photoText"></property>
    <property name="Caption" type="photoText"></property>
    <property name="Base64Url" not-null="false"></property>
    <property name="Row" column="RowNumber" not-null="true"></property>
    <property name="Position" not-null="true"></property>
    <many-to-one name="CreatedBy" class="PromotionManager" column="ManagerId" cascade="none"></many-to-one>
    <property name="Supplier" type="blobbedSupplier" not-null="false" length="1000"></property>
    <property name="Item" column="ForItem" type="blobbedItem" not-null="false" length="1000"></property>
    <many-to-one name="LastCommitedVersion" not-null="false" class="CommitedPromotionImage" column="LastCommitedVersionId"></many-to-one>
  </union-subclass>
</hibernate-mapping> 
```

我看不出有什么不对。至于用在什么地方：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
assembly="UploadPromotions.Models"
namespace="UploadPromotions.Models">
  <class name="PromotionManager">
    .......
    <set name="StagedPromotionImages" batch-size="50" inverse="true" cascade="all-delete-orphan" access="field.camelcase-underscore">
      <key column="CreatedById"></key>
      <one-to-many class="StagedPromotionImage"/>
    </set>
  </class>
</hibernate-mapping> 
```

和这里：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
assembly="UploadPromotions.Models"
namespace="UploadPromotions.Models">
  <class name="Stage" table="StagedChanges">
  .........
    <set name="StagedImages" batch-size="50" inverse="true" cascade="all-delete-orphan" access="field.camelcase-underscore">
      <key column="StageId"></key>
      <one-to-many class="StagedPromotionImage"/>
    </set>
   ............

  </class>
</hibernate-mapping> 
```

编辑：

好吧，我忘了在映射文件名中添加 .hbm 部分.....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T13:23:11.663

我之前也遇到过类似的问题

我在 NH 映射文件“SomeClass..hbm.xml”中有两个点，而不是“SomeClass.hbm.xml”，我花了 4 个小时才找到它！！！

# scala - AngularJS getId 从资源中保存

> ID：16057414
> 
> 赞同：0
> 
> 时间：2013-04-17T10:14:52.020
> 
> 标签：scala, resources, angularjs, playframework-2.0

我是 AngularJS 的新手，我的问题是，当我使用资源保存任务时，它会将信息正确地发送到数据库。服务器在收到 POST 时以创建的任务的 ID 进行响应。

我有这样的东西

```
$scope.save = function(){     
        var retorno = Task.save($scope.task);
        console.log("Retorno = "+retorno);
        $scope.tasks.push($scope.task);
} 
```

控制台中的 retorno 值为 Retorno = [object Object]

id来自这里

```
def newTask = SecuredAction { implicit request =>
    println("TaskController.newTask")
    taskForm.bindFromRequest.fold(
      errors =>
        BadRequest(views.html.tasks(request.user, Task.all(request.user.id.id), errors, errors)),
      _publicTask => {
        val id = Task.create(_publicTask.label,request.user.id.id, _publicTask.date)
        //Redirect(routes.TaskController.tasks())
        id match{
          case Some(_id) => Ok(_id.toString).as("application/json")
          case None => Ok("error")
          case _ => Ok("ERROR")
        }
      }
    )
  } 
```

它返回这样的东西

516e750ee4b0230023ba5acc

那么，我怎样才能在控制器中处理这个返回。顺便说一句，我想要那个，因为当我推送任务时，它没有 ID，如果不刷新页面就无法删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:07:05.570

[$resource 上的 Angular 文档](http://docs.angularjs.org/api/ngResource.%24resource)指出

> 重要的是要意识到调用 $resource 对象方法会立即返回一个空引用（对象或数组取决于 isArray）。从服务器返回数据后，现有参考将填充实际数据。

所以而不是

```
var retorno = Task.save($scope.task);
$scope.tasks.push($scope.task); 
```

你应该用回调的方式来做

```
var retorno = Task.save($scope.task, function() {
    // here retorno should already have ID in it
    // and you may want to set it to a task
    $scope.tasks.push($scope.task); 
}); 
```

# facebook-javascript-sdk - FB.ui ea.result 为空

> ID：16057415
> 
> 赞同：1
> 
> 时间：2013-04-17T10:14:52.457
> 
> 标签：facebook-javascript-sdk, fb.ui

当我发出请求（共享或邀请）时，popin 显示正确，但如果我单击取消按钮，Firebug 控制台中会出现此消息：TypeError: ea.result is null

它是 Facebook 的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:54:53.343

[它已提交给他们的错误跟踪器](https://developers.facebook.com/bugs/364928233616843?browse=search_516e7aea2ffdf9128852578)

# java - 关于从 WSDL 生成客户端代码

> ID：16057417
> 
> 赞同：2
> 
> 时间：2013-04-17T10:15:05.210
> 
> 标签：java, web-services, axis2

我是 web 服务领域的新手，我必须开发客户端代码，即 java 代码，我已经获得了一个 wsdl，我可以通过在浏览器中打开该 wsdl 来查看它，因为我可以访问 wsdl让我知道如何通过 Axis 2 从该 wsdl 本身生成客户端代码，任何帮助将不胜感激，在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T11:09:17.420

有很多方法可以生成客户端和服务器存根。您可以使用 WSDL2Code 插件方法 此插件将 WSDL 作为输入，并生成客户端和服务器存根，用于调用或实现与 WSDL 匹配的 Web 服务。将以下部分添加到您的 POM

```
 <plugin>
            <groupId>org.apache.axis2</groupId>
            <artifactId>axis2-wsdl2code-maven-plugin</artifactId>
            <version>1.6.0</version>
            <executions>
                <execution>
                    <id>ws1</id>
                    <goals>
                        <goal>wsdl2code</goal>
                    </goals>
                    <configuration>
                       <unpackClasses>true</unpackClasses>
                       <databindingName>adb</databindingName>
                       <packageName>ma.glasnost.sample.axis2-maven</packageName>
                       <wsdlFile>src/main/resources/ws.wsdl</wsdlFile>
                       <outputDirectory>target/generated-sources</outputDirectory>
                       <syncMode>sync</syncMode>
                    </configuration>
                </execution>
           ..... if you have many web services                
            </executions>
        </plugin> 
```

还添加axis2 jar作为依赖项

```
 <dependency>
          <groupId>org.apache.axis2</groupId>
          <artifactId>axis2</artifactId>
          <version>1.4</version>
 </dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T11:08:19.937

如果您使用的是 Eclipse，则使用此链接中提到的 Java 代码生成。[http://axis.apache.org/axis2/java/core/tools/eclipse/wsdl2java-plugin.html#WSDL2Java](http://axis.apache.org/axis2/java/core/tools/eclipse/wsdl2java-plugin.html#WSDL2Java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T10:58:59.123

这里简要概述了生成客户端 Java 代码所需执行的操作：

1.  在网络浏览器中打开指向 wsdl 文档的 URL。
2.  将该网页另存为 xml 文档。
3.  重命名文件以具有 .wsdl 扩展名（可选）
4.  然后你需要通过java命令运行WSDLToJava java文件，这个类会包含在axis.jar中
5.  提供 wsdl 文件名作为此 java 文件的参数。
6.  将所需的所有 jar 文件作为类路径参数提供给此 java 命令

因此，您的命令将如下所示：

java -classpath axis.jar;%CATALINA_HOME%/shared/lib/commons-httpclient.jar;%CATALINA_HOME%/shared/lib/log4j.jar;%CATALINA_HOME%/shared/lib/commons-logging.jar;wsdl4j.jar ;commons-net.jar;commons-discovery.jar;jaxrpc.jar;soap.jar;saaj.jar org.apache.axis.wsdl.WSDL2Java your_wsdl_fileName.wsdl

# java - 如何使用零字符正则表达式检查 Java 中的字符串？

> ID：16057423
> 
> 赞同：0
> 
> 时间：2013-04-17T10:15:25.580
> 
> 标签：java, regex

以下代码检查相同的变量部分`/en(^$|.*)`是否为空或任何字符。所以表达式应该匹配`/en`AND`/en/bla`等`/en/blue`。但是当检查 just 时表达式不起作用`/en`。

```
"/en".matches("/en(^$|.*)") 
```

有没有办法让这个空的正则表达式检查（^$）用java执行？

**编辑**

我的意思是：有没有办法让这段代码返回`true`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T10:21:13.297

您当前正在做的是检查是否`en`后跟字符串的开头然后是字符串的结尾（这没有意义，因为字符串的开头必须是第一个）或其他任何内容。这应该有效：

```
"/en".matches("/en(|.*)") 
```

或者只是使用`?`（可选）：

```
"/en".matches("/en(.*)?") 
```

但这毫无意义，因为`*`是零或更多（因此空白字符串将匹配`.*`），就应该这样做：

```
"/en".matches("/en.*") 
```

**编辑：**

您的代码已经返回 true，但它与该`^$`部分不匹配，而是`.*`（类似于上面）。

我应该指出，您也可以使用`startsWith`，除非您的真实数据更复杂：

```
"/en".startsWith("/en") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T10:20:48.207

> **有没有办法让这段代码返回true？**
> 
> ```
> "/en".matches("/en(^$|.*)") 
> ```

该代码*确实*返回true。去尝试一下！

但是，您的模式是不必要的复杂。尝试：

```
"/en".matches("/en.*") 
```

这将匹配`/en`任何内容（包括任何内容）。

# javascript - 用于 IE 的高效 YAML 解析器

> ID：16057424
> 
> 赞同：1
> 
> 时间：2013-04-17T10:15:30.570
> 
> 标签：javascript, internet-explorer-8, yaml

我正在尝试编写一个必须支持 IE8+ 的网页。其中主要部分涉及解析检索到的 YAML 文件。我找到了 js-yaml 库，它在 Chrome/Firefox 中运行良好。但是，在 IE8 中解析约 1000 行或更多行的 YAML 文件是很糟糕的。

在 IE10 中调用 jsyaml.load 大约需要 5 秒。对于 IE8，这足以导致“脚本导致 IE 运行缓慢错误”。

分析表明我们在 .indexOf() 中浪费了很多时间——我正在使用来自 es5-shims.js 的实现。

有谁知道在 IE 上更高效的 YAML 解析器或在 IE 上提高 js-yaml 性能的方法？我找到了欺骗 IE8 使其不显示警告但等待 20 秒解析单个文件的方法不是可接受的解决方案。

# c# - EF5 中的连接属性

> ID：16057428
> 
> 赞同：3
> 
> 时间：2013-04-17T10:15:51.220
> 
> 标签：c#, entity-framework-5

我正在尝试使用 Entityframework Connection 建立 SQL 连接，我在谷歌中得到了下面的代码

```
((EntityConnection)dataContext.Connection).StoreConnection; 
```

但我无法获得 Connection 属性。它不可用，并认为 EF5 中会发生一些更改，类似于下面的代码并在此处发布我的说明。

```
dataContext.ContextOptions.LazyLoadingEnabled 
```

在 EF5 中

```
dataContext.Configuration.LazyLoadingEnabled 
```

如何在 EF5 中获取连接属性？还是我错过了什么！

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T08:58:16.927

我们如何访问的选项在 EF5 中发生了变化。

这是示例

```
var sConnection = ((dataContext)ctx.Database.Connection); 
```

上面的代码将作为 SQL Connection 属性返回。

希望这对某人有帮助:)

# c++ - 应用程序如何在 C++ 中删除自身及其包含的文件夹？

> ID：16057433
> 
> 赞同：0
> 
> 时间：2013-04-17T10:15:56.600
> 
> 标签：c++, windows, winapi

我正在创建一个卸载程序，它将删除一些文件及其本身。它还需要删除它所在的文件夹。我正在为 Windows 开发 C++ 卸载程序。

我找到了删除文件夹和文件的方法，但我找不到删除应用程序本身并删除包含它的文件夹的方法。

谁能指导我如何实现这一目标？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T19:42:39.200

你有两个选择：

1）运行一个单独的进程/批处理，在您的应用程序停止运行后删除您的文件/文件夹。该应用程序可以在退出之前运行该进程。

2) 使用 Win32 API`MoveFileEx()`功能将文件/文件夹标记为在下次 PC 重新启动时删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T10:19:33.023

你不能那样做......当你试图删除`.exe`你的进程时，你会被拒绝访问，因为你正在运行这个特定的`.exe`. 您需要先停止您的进程，然后删除您`.exe`的 . 您需要创建一个额外的过程，也许是一个批处理作业来删除您的文件。

# c#-4.0 - 如何使用 GetApiExplorer() 获取控制器名称和自定义控制器中可用的数据

> ID：16057441
> 
> 赞同：1
> 
> 时间：2013-04-17T10:16:20.063
> 
> 标签：c#-4.0, asp.net-mvc-4, controller, asp.net-web-api, asp.net-mvc-apiexplorer

嗨我有`BaseController : ApiController`

和`TestController : BaseController`

如何获取控制器名称和**TestController的相关详细信息**

使用下面的代码

```
GlobalConfiguration.Configuration.Services.GetApiExplorer().ApiDescriptions
    .GroupBy(x => x.ActionDescriptor.ControllerDescriptor.ControllerName)
    .Select(x => x.First().ActionDescriptor.ControllerDescriptor.ControllerName) 
```

我可以获得详细信息（**ApiDescriptions**）`BaseController`

如何获取**TestController的详细信息（** **ApiDescriptions**）？

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:41:01.410

**My Mistake**

Now I comment bellow code from `TestController`. And now Everything work perfectly

```
[ApiExplorerSettings(IgnoreApi = true)] 
```**

# c# - 如何打印 WPF WebBrowser 控件中显示的 PDF 文件

> ID：16057446
> 
> 赞同：0
> 
> 时间：2013-04-17T10:16:37.470
> 
> 标签：c#, wpf, pdf, printing, webbrowser-control

我有一个 WPF 应用程序，它使用标准的 WebBrowser 控件实现了一个简单的 Web 浏览器。当用户导航到 PDF 文档时，该文档将在 MSIE 的标准 Adob​​e Reader 插件的 WebBrowser 控件中内嵌显示。现在我需要以编程方式打印文件。我该怎么做？

我知道 Adob​​e Reader 有一个带有打印命令的 COM 接口。这个接口在 MSIE 插件中也可用吗？如何从我只能访问 WebBrowser 控件的 WPF 代码访问它？

感谢您的建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T12:14:05.720

这是您在 WPF WebBrowser 控件中打印文档的方式，无论它是 HTML 还是 PDF：

```
private void Print_Click(object sender, RoutedEventArgs e)
{
    // Try to print it as Html
    var doc = webBrowser.Document as IHTMLDocument2;
    if (doc != null)
    {
        doc.execCommand("Print", true, 0);
        return;
    }

    // Try to print it as PDF
    var pdfdoc = webBrowser.Document as AcroPDFLib.AcroPDF;
    if (pdfdoc != null)
    {
        pdfdoc.Print();
    }
} 
```

对于 PDF 打印，您必须将 AcroPDFLib 添加到项目的引用中。

# c++ - 在初始化之前使用任何自动变量

> ID：16057448
> 
> 赞同：1
> 
> 时间：2013-04-17T10:16:44.003
> 
> 标签：c++, c, undefined-behavior

我正在阅读有关[未定义行为](http://en.wikipedia.org/w/index.php?title=Undefined_behavior)的维基百科文章。

> 在 C 中，在初始化之前使用任何自动变量会产生未定义的行为

但是，[这个答案](https://stackoverflow.com/questions/11962457/why-is-using-an-uninitialized-variable-undefined-behavior-in-c)说，字符类型可以。维基百科在这里错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T10:28:46.807

在 C 中（我不知道 C++），类型`unsigned char`是唯一保证所有可能的位表示具有特定值的类型。没有*陷阱表示*，没有无效值，没有填充位，什么都没有（在其他类型中也可以）。

但是，由于某种原因，制作依赖于未知位模式的程序是一个坏主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:23:07.507

*未定义的行为*并不意味着*非法*，否则*您的程序将在此处崩溃*。

如果你使用一个未初始化的变量（如果你分配一个原始变量并且不给它赋值，字符类型是一种特殊的原始类型，就会发生这种情况），该值根本无法确定。它可以是任何东西。您可能不会打扰它可以是任何东西的事实，因为例如您可以稍后分配一个值，也许只是在某些情况下。

但是，当您*读取*变量的值并根据此*未初始化*的值做出进一步的决定时，这种情况变得严重，例如在以下情况下：

```
int x;

if (x > 0) {
    ...
} else {
    ...
} 
```

这会把你带到[这里](https://stackoverflow.com/questions/2612447/pinpointing-conditional-jump-or-move-depends-on-uninitialized-values-valgrin)。

您链接的答案是以下内容非常好：

```
int x;

if (someCase) {
    x = ...
} else {
    ...
}

// later:

if (someCase) {
    // read x
} 
```

# php - Mysql SELECT和UNION多个同名表

> ID：16057454
> 
> 赞同：3
> 
> 时间：2013-04-17T10:17:01.827
> 
> 标签：php, mysql

我想知道是否可以为所有具有相同名称但末尾具有不同编号的表创建动态联合查询。我创建了一个系统，但每个用户都有自己的表，例如：

> user_table_$userID

我已经在 PHP 中实现了这一点，但我真的很想创建一个更动态的代码。我目前有 2-3 个嵌套查询来从每个表中获取帖子，而不会对 Web 服务器或数据库造成压力。

我想我可以计算用户登录表中的用户数并创建一个 for 循环：

```
for ($i = 1; $i >= $usrCount; $i++)
{
    $queryArray[] = "(SELECT post_title, post_description FROM user_table_" . $i . ") UNION";
} 
```

但是如果用户数量非常大，PHP 脚本可能需要很长时间才能加载。有什么方法可以让 Mysql 数据库基于名称为 = "user_table_%" 的表创建动态查询

如果有任何建议，请告诉我。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:45:25.317

也许规范化你的数据库会更好，但如果你需要一个动态查询，你可以使用这个：

```
SELECT
  GROUP_CONCAT(
    CONCAT(
      'SELECT * FROM `',
      TABLE_NAME,
      '`') SEPARATOR ' UNION ALL ')
FROM
  `INFORMATION_SCHEMA`.`TABLES` 
WHERE
  `TABLE_NAME` REGEXP '^user\_[0-9]*$'
INTO @sql;

PREPARE stmt FROM @sql;
EXECUTE stmt; 
```

请[在此处](http://sqlfiddle.com/#!2/0e92c/3)查看小提琴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:26:32.837

你不能，即使你找到了一个聪明的黑客，你也不应该这样做。

您最好的选择是重新考虑您的数据库模式。我向你保证，你目前的结构很糟糕，非常非常糟糕。如果你偶然开发了新的 Facebook 怎么办？你会有十亿张桌子吗？

谷歌搜索“数据库规范化”和“第三范式”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T10:32:25.877

似乎您应该只有一个`user_table`包含`user_id`字段的表。

现在，如果您仍想保留当前模型并需要 MySQL 来构建查询，也许您可​​以：

```
SHOW TABLES LIKE "user_table_%"; 
```

创建一个临时表并`INSERT SELECT`为每个表做。

但同样，至少不建议说

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T11:08:05.657

首先规范化你的表，暂时你可以运行这个查询

SELECT post_title, post_description FROM (select table_name from INFORMATION_SCHEMA where table_name like 'user_table_%';

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-06T01:40:19.563

这应该可以正常工作（但考虑“数据库规范化”）

```
for ($i = 1; $i >= $usrCount; $i++){
  $queryArray[$i] = "(SELECT post_title, post_description FROM user_table_".$i.")";
}    
$sql = implode(' UNION ', $queryArray); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-04T22:52:29.563

动态查询在 MySQL 中称为视图。这些是包含查询其他表的结果的虚拟表，并且被持久化以便在服务器重新启动后仍然存在。以下是创建包含所有用户帖子的视图的示例：

```
CREATE OR REPLACE VIEW all_users.posts AS
SELECT * FROM user1.posts
UNION ALL
SELECT * FROM user2.posts; 
```

在此处了解更多信息：

[https://dev.mysql.com/doc/refman/8.0/en/views.html](https://dev.mysql.com/doc/refman/8.0/en/views.html)

# c - 如何防止死锁？

> ID：16057458
> 
> 赞同：0
> 
> 时间：2013-04-17T10:17:16.310
> 
> 标签：c, linux, process, synchronization, signals

我一直在努力解决同步问题。我有一个进程 A，这是主要进程，还有 3 个 B 类进程。这些进程必须向 A 发出信号并等待响应。

A 正在等待所有 3 个信号。当它们都到达时，A 完成它的工作并向所有 B 进程发出信号，以便它们可以继续工作。

```
A:
   if(/*all signals received*/)  {
     //do my job
     //signal all Bs
   }

B:
   //some code
   signal(A);
   pause();  //wait for response
   //Do other stuff 
```

当 B 调用`signal(A)`时，A 完成他的工作，给 B 发回信号，然后再次安排 B，导致 B 调用`pause()`并无限期地等待信号。我不知道如何防止这种僵局。

有没有其他方法可以实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:00:32.520

考虑使用信号量作为 IPC 同步，
任何进程想要发送信号都必须锁定信号量，
并在收到 A 的返回后解锁信号量，以便下一个进程继续进行。

# ruby-on-rails - 无法使用 Chef-Solo 在 vagrant 虚拟 CentOS 机器上安装 Rails gem

> ID：16057460
> 
> 赞同：5
> 
> 时间：2013-04-17T10:17:17.703
> 
> 标签：ruby-on-rails, gem, chef-infra, vagrant, chef-solo

我正在尝试使用 Vagrant 和 Chef-Solo 在 CentOS 6.3 64 位上设置 Rails 环境。

使用 Chef 时无法安装 Rails，并显示错误消息，

```
Mixlib::ShellOut::CommandTimeout: rbenv_gem[rails] (main::default line 21) 有一个错误：Mixlib::Shell
Out::CommandTimeout: 命令超时：

```

我该如何解决这个问题？

## 环境

*   操作系统：Mac OS X 10.8.2
*   虚拟盒子：4.2.12
*   流浪者：1.1.5
*   厨师：11.4.0
*   刀独奏：0.3.0

## 我的脚步

1.创建流浪虚拟机

```
$ vagrant box add centos https://dl.dropbox.com/u/7225008/Vagrant/CentOS-6.3-x86_64-minimal.box`
$ vagrant init centos
$ vagrant up 
```

2.创建厨师存储库并将厨师安装到VM

```
$ knife solo init chefrepo
$ knife solo prepare vagrant@192.168.33.10 # vagrant VMs IP 
```

3.从 OpsCode 导入公共食谱

```
$ knife cookbook site vendor rbenv 
```

这会将 rbenv 食谱导入到 chefrepo/cookbooks/rbenv

4.创建我的食谱并修改default.rb

```
$ knife cookbook create main -o site-cookbooks
$ vi site-cookbooks/main/recipes/default.rb

include_recipe 'rbenv::default'
include_recipe 'rbenv::ruby_build'

rbenv_ruby "2.0.0-p0" do
  global true
end

rbenv_gem "rails" do
  ruby_version "2.0.0-p0"
end 
```

5.厨师

```
$ knife solo cook vagrant@192.168.33.10 
```

然后得到如下错误。

```
# Declared in /home/vagrant/chef-solo/site-cookbooks/main/recipes/default.rb:21:in `from_file'

rbenv_gem("rails") do
  provider Chef::Provider::Package::RbenvRubygems
  action :install
  retries 0
  retry_delay 2
  cookbook_name :main
  recipe_name "default"
  ruby_version "2.0.0-p0"
  package_name "rails"
  gem_binary "/opt/rbenv/shims/gem"
  version "3.2.13"
end

[2013-04-17T12:00:13+02:00] ERROR: Running exception handlers
[2013-04-17T12:00:13+02:00] ERROR: Exception handlers complete
Chef Client failed. 0 resources updated
[2013-04-17T12:00:13+02:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2013-04-17T12:00:13+02:00] FATAL: Mixlib::ShellOut::CommandTimeout: rbenv_gem[rails] (main::default line 21) had an error: Mixlib::Shell
Out::CommandTimeout: command timed out:
---- Begin output of /opt/rbenv/versions/2.0.0-p0/bin/gem install rails -q --no-rdoc --no-ri -v "3.2.13" ----
STDOUT: 
STDERR: 
---- End output of /opt/rbenv/versions/2.0.0-p0/bin/gem install rails -q --no-rdoc --no-ri -v "3.2.13" ----

ERROR: RuntimeError: chef-solo failed. See output above. 
```

## 手动安装

Rails 可以通过`$ sudo gem install rails`VM 安装。这大约需要 20 分钟或更长时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T18:23:50.407

我不确定您的环境限制是什么，但一种可能的解决方案是使用不同的操作系统。几个星期前，我在 CentOS 6.3 和 Vagrant 上遇到了一个非常相似的问题，并且花了几天的时间。一旦我切换到 Ubuntu，就像切热黄油一样。

# performance - 为什么 Haskell 函数执行时间测量与 ghc 计时不同？

> ID：16057462
> 
> 赞同：3
> 
> 时间：2013-04-17T10:17:22.867
> 
> 标签：performance, haskell, time

我想测量 Haskell 执行某些功能和使用 TimeIt 包所花费的时间（我也尝试了[这些](http://www.haskell.org/haskellwiki/Timing_computations)建议）。但是显示的时间与应用程序花费的实际时间不同（我已经使用 +RTS -sstderr 选项运行了应用程序）：

```
CPU time:   4.85s
...  
  INIT    time    0.00s  (  0.00s elapsed)
  MUT     time    0.98s  ( 61.69s elapsed)
  GC      time    0.22s  (  0.19s elapsed)
  EXIT    time    0.00s  (  0.00s elapsed)
  Total   time    1.20s  ( 61.89s elapsed) 
```

申请来源：

```
import qualified Data.ByteString.Lazy.Char8 as LBS
import System.Environment
import Data.Char
import Data.Int
import System.TimeIt

readChunks :: Int64 -> LBS.ByteString -> Int64
readChunks size str 
                            | LBS.null str = 0
                            | otherwise = let (chunk, rest) = LBS.splitAt size str
                                                 in do
                                                        let len = LBS.length chunk
                                                        len `seq` len + readChunks size rest

processFile :: String -> IO()
processFile name = do
    putStrLn name
    content <- LBS.readFile name
    let 
        (recNumStr, rest) = LBS.span (not.isControl) content
        recNum = LBS.readInt recNumStr
    case recNum of
        Nothing -> putStrLn "can't parse"
        Just (value, rest) -> print (value)
    let chunkSize = 100*1024*1024   

    timeIt $ print (readChunks chunkSize rest) 
```

**更新：**我发现[Chronograph](http://hackage.haskell.org/package/chronograph)包显示正确的执行时间（信息取自这个[问题](https://stackoverflow.com/questions/16050917/haskell-calculate-time-of-function-performing)）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:54:01.083

好吧，您正在做没有计时的重要工作-这项工作弥补了差异似乎是合理的，即：

```
putStrLn name
content <- LBS.readFile name
let 
    (recNumStr, rest) = LBS.span (not.isControl) content
    recNum = LBS.readInt recNumStr
case recNum of
    Nothing -> putStrLn "can't parse"
    Just (value, rest) -> print (value) 
```

如果你也计时，那么你可能会发现最大的不同。另请注意，在您输入之前还有其他操作`main`（即使对于 C 程序也是如此）。

# mvvm - ViewModel 相互交谈

> ID：16057472
> 
> 赞同：0
> 
> 时间：2013-04-17T10:18:18.587
> 
> 标签：mvvm, windows-phone-8, mvvm-light

我刚刚使用 mvvmlight 创建了我的第一个 c# / XAML 应用程序，并且我尝试尽我所能实现 MVVM 模式（WP8 应用程序）。但是，我已经慢慢地将我的代码变成了某种风格，我认为它没有正确实现该模式！任何关于事情应该如何的建议都会有很大帮助。

例如，使用 mvvmlight 我大量使用 ViewModelLocator。我的一些视图模型会立即创建，例如 SettingsViewModel（有一个 SettingsView）。

```
SimpleIoc.Default.Register<SettingsViewModel>(true); 
```

然后在我项目的其他地方，我的其他视图模型将通过属性或方法直接访问此视图模型以获取偶尔的信息……就像这样；

```
mySetting = ViewModelLocator.SettingsStatic.GetSomeSetting(var); 
```

我担心的是我的视图模型越来越多地以这种方式相互交谈。问题在于它们现在可能无法独立测试，因为它们需要或假设存在其他视图模型。

这里的任何指针都会很棒！

编辑：另一个例子是有一个 PersonView，而 PersonViewModel 有一些用于 UI 显示的辅助方法。在某些情况下，我还有其他需要显示此信息的视图....并且我使用 viewmodellocator 来获取它们，而不是在当前视图模型中再次编写辅助方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T16:28:44.410

您认为依赖于视图模型的视图模型会造成麻烦是正确的。当我需要访问我的应用程序中的“全局”设置时，我使用一个可以注入到视图模型的构造函数中的接口。因此，您可以创建一个包含所需属性和方法的 ISettingsService。您还创建了一个设计时设置服务，它模仿或伪造 ISettingsService 接口的数据/属性

然后在您的视图模型定位器中使用：

```
if (ViewModelBase.IsInDesignModeStatic) {
    SimpleIoc.Default.Register<ISettingsService, DesignSettingService>();
} else {
    SimpleIoc.Default.Register<ISettingService, SettingService>();
} 
```

创建实现 ISettingsService 的 DesignSettingService 和 SettingService。

至于您的 vewmodels，SimpleIOC 将解析/注入传递给类的构造函数的所需元素。如果您有一个名为 MyViewModel 的类/视图模型，并且它想使用设置服务，那么您将像这样定义构造函数：

```
private ISettingsService _SettingsAccess;

public New(ISettingsService SettingsService)
{
    _SettingsAccess = SettingsService;
    SettingProperty= _SettingsAccess.GetProperty;
} 
```

这使视图模型保持解耦，因为此服务在构造函数中解析，这样您就可以更改 ISettingsService 的实现，而不会破坏使用它的每个视图模型。

我使用 INavigationService 来处理我的应用程序中的所有导航事件，这允许我取消基于另一个视图模型属性的导航，而无需当前视图模型直接调用/引用另一个视图模型。

一个视图模型不应该直接调用另一个视图模型。使用此方法，您可以将所需的任意数量的“服务”传递给视图模型。除了导航服务之外，我使用的每个视图模型都有一个连接到我的模型的数据服务。IE。与人打交道的视图模型获得一个 IPeopleDataService，其中该服务包含影响数据库的所有 CRUD 操作。这样我就可以更改数据库和服务功能中的人员对象，而无需更改人员视图模型。

我希望这有帮助。

# android - 使用 Android 连接到 VSFTP

> ID：16057475
> 
> 赞同：0
> 
> 时间：2013-04-17T10:18:22.707
> 
> 标签：android, apache, ftp

您好，我正在尝试从 android 连接到 vsftp 服务器，托管服务器的公司给了我用户名和密码以及@ip。

我做了一个例子来连接我并下载一个文件，但我登录有问题，连接建立但没有答案后，我使用虚拟 android 设备测试我的示例示例。问题在于方法 mftp.login 它返回 false 。

这是我连接到服务器的课程

```
private class connection extends AsyncTask{

        @Override
        protected Object doInBackground(Object... params) {
            boolean retour = ftpConnect( "x.y.z.w",  "username", "password",  21);
            return retour;
        }

        public boolean ftpConnect(String host, String username,String password, int port){
              try {

                    mFTPClient = new FTPClient();

                    try {

                         mFTPClient.connect(host, 21);

                            if (FTPReply.isPositiveCompletion(mFTPClient.getReplyCode())) {

                                /* Set File Transfer Mode
                                *
                                * To avoid corruption issue you must specified a correct
                                * transfer mode, such as ASCII_FILE_TYPE, BINARY_FILE_TYPE,
                                * EBCDIC_FILE_TYPE .etc. Here, I use BINARY_FILE_TYPE
                                * for transferring text, image, and compressed files.
                                */

                                mFTPClient.setFileType(FTP.BINARY_FILE_TYPE);
                                mFTPClient.enterLocalPassiveMode();
                                boolean status = mFTPClient.login(username, password);
                                Log.i("cause", "this is the status of loging "+status);
                                FileOutputStream desFileStream = new FileOutputStream(Environment.getExternalStorageDirectory()+"/doc.pdf");
                                mFTPClient.retrieveFile("x.y.z.w/mydirectory/doc.pdf", desFileStream);
                                return status;
                           }

                    }catch (Exception e){
                        Log.e(username,"no idea");
                    }

                  } catch(Exception e) {
                      Log.e(username,"no idea 2 ");
                     }    

             return false;
        } 
```

我确定我的代码没有错误，我尝试从网页连接，但我不能，我尝试使用 dos 命令但没有响应，他们告诉我我只能从 android 设备连接.

我搜索了 vsftp，发现它是安全的。1* 我的问题是我可以从虚拟设备连接吗？2* 他们做了哪些配置不允许来自网页或虚拟设备的连接？

我已经尝试过使用 filezilla 但它给出了 530 登录错误

3* 您能告诉我是什么原因导致我无法登录服务器吗？问题来自我的程序或服务器。

4* 我使用 apache 库连接到服务器 ftp，这对 vsftp 来说太好了吗？

非常感谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:27:40.217

1.  如果您可以从 web/filezilla 访问，并且他们允许从本地网络访问，那么肯定是的。
2.  不知道，但如果他们不允许外部连接，你就不能。他们可能这样做是为了安全。
3.  正如你所解释的，服务器。
4.  我想是的。

结论：如果他们不允许外部连接，您将无法连接，例如这里有一个安装此服务器的人，他应该为自己的红色启用连接。

[http://ubuntuforums.org/showthread.php?t=2068591](http://ubuntuforums.org/showthread.php?t=2068591)

# ios - 初始化sql字符串时如何向字符串添加转义字符？

> ID：16057477
> 
> 赞同：-1
> 
> 时间：2013-04-17T10:18:33.030
> 
> 标签：ios, sqlite, nsstring, fmdb

我正在使用 FMDB 来管理我的 sqlite 数据库。我实现了一个插入函数并使用它来插入一些行。但是有一行不能插入，插入时错误码是7，错误信息是内存不足。

我跟踪 sql 执行并发现一个字符串值有一个 ' 字符，这可能会导致错误的 sql 语句。所以我想知道如何转换这个字符以将其插入数据库。

sql 字符串是`NSString *sql = [NSString stringWithFormat:@"INSERT INTO table( COMPANY, PAGE_NO, RECORD_ID) VALUES('%@',%d,%d)",table.company,table.page_no,table.record_id];`，控制台输出是

```
<FMDatabase: 0x433e80> executeUpdate: INSERT INTO table(COMPANY, PAGE_NO, RECORD_ID) VALUES('Wendy's',-1,234) 
```

COMPANY 是一个文本，对应的值是 Wendy's。' 字符可能会导致错误。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T16:19:39.977

不要试图转义字符串；只需使用参数：

```
sql = [NSString stringWithFormat:
       @"INSERT INTO tbl(COMPANY, PAGE_NO, RECORD_ID) VALUES(?, %d, %d)",
       table.page_no, table.record_id];
sqlite3_prepare_v2(...);
sqlite3_bind_text(statement, 1, [table.company UTF8String], -1, SQLITE_TRANSIENT); 
```

# c# - 如何使用 Linq to Object 访问自定义类的属性？

> ID：16057479
> 
> 赞同：1
> 
> 时间：2013-04-17T10:18:36.510
> 
> 标签：c#, linq, linq-to-sql

我有一个自定义类如下

```
 public class LogFiles
{
    private string _fileName;
    private string _path;
    private string _logStatus;

    public LogFiles(string FName, string Path)
    {
        this._path = Path;
        this._fileName = FName;           
    }
    // the below two properties are mapped from DB entities
    public string FName
    {
        get { return this._fileName; }
        set { this._fileName = value; }
    }  
    public string Path
    {
        get { return this._path; }
        set { this._path = value; }
    }          
    // the value for this property will be defined on fly in MainViewModel
    public string LogStatus
    {
        get { return this._logStatus; }
        set { this._logStatus = value; }
    } 
} 
```

我将在 MainViewModel 中设置 LogStatus 属性的值，但要使用 linq 在 MainviewModel 中访问此属性

像这样的东西，

```
var get_logStatus = (from a in LogFiles 
                     ordeyby a.LogStatus
                     select a); 
```

上面的代码只是一个类似于将 linq 写入实体的猜测，但是自定义类是否可以使用 linq to sql 进行访问？如果听起来很愚蠢，请原谅我并纠正这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:28:30.990

您正在谈论 Linq To Object，因为您想要查询对象，而不是 DataContext 生成的实体。

Linq To Object 具有与 Linq To Sql 完全相同的语法（这就是制作 Linq 的意义！）。唯一的事情是 Linq To Sql 正在查询 Queryable 对象，例如实体的 EntitySet，而 Linq To Object 正在查询 IEnumerable 对象。

所以首先你需要一个 IEnumerable，然后你可以像这样进行 Linq 查询：

```
var listLogFiles = new List<LogFiles>();
var orderedListLogFiles = (from a in listLogFiles 
                           order by a.LogStatus
                           select a); 
```

# java - 使用 Restlet for Java SE 生成客户端代理

> ID：16057483
> 
> 赞同：0
> 
> 时间：2013-04-17T10:18:47.957
> 
> 标签：java, wcf, odata, restlet

我正在尝试使用 Restlet 2.0.4 为 WCF 服务生成客户端代理代码（我也尝试使用最新的稳定版本，结果相同），如下所示： [http ://weblogs.asp.net/uruit/archive /2011/09/13/accessing-odata-from-android-using-restlet.aspx](http://weblogs.asp.net/uruit/archive/2011/09/13/accessing-odata-from-android-using-restlet.aspx) 该过程失败并显示“严重：无法获取元数据（响应状态：错误请求（400）-错误请求）”我是弄清楚 Web 服务可能是什么问题，直到我在 Eclipse 中调试时发现原因可能是 ClassNotFoundException：似乎找不到 org.restlet.ext.odata.Service 类（它在 Restlet 时崩溃尝试执行“Service service = new Service(...)”（org.restlet.ext.odata.Generator 类，第 240 行），但它在 Classpath 中。可能是什么问题？

# javascript - D3.js：获取附加到选择的数据数组？

> ID：16057485
> 
> 赞同：30
> 
> 时间：2013-04-17T10:18:51.323
> 
> 标签：javascript, d3.js

我想获取附加到 D3 中的选择的所有数据的数组。

我正在使用[General Update 模式](http://bl.ocks.org/mbostock/3808218)中的示例，并尝试这样做：

```
var text = svg.selectAll("text")
  .data(data, function(d) { return d; });

var textEnter = text.enter().append("text")
  .attr("class", "enter")
  .text(function(d) { return d; });

console.log('textEnter data', textEnter[0]);

var textEnterKeys = d3.map(textEnter[0], function(d) { 
  return d.__data__;
});

console.log('textEnterKeys', textEnterKeys); 
```

但`textEnterKeys`只是看起来完全一样`textEnter`。如何获取附加到选择中每个元素的数据数组？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-04-17T10:26:19.917

您可以简单地调用`.data()`不带任何参数的选择来获取绑定数据。请参阅[文档](https://github.com/d3/d3-selection/blob/master/README.md#selection_data)：

> 如果未指定值，则此方法返回选择中第一组的数据数组。返回数组的长度将匹配第一组的长度，并且返回数组中每个数据的索引将匹配选择中的相应索引。如果选择中的某些元素为空，或者它们没有关联数据，则数组中的相应元素将是未定义的。

这不适用于`.enter()`选择，因为还没有可以绑定数据的元素。在这种情况下，`.map`可以使用该函数：

```
textEnter.map(function(d) { return d.__data__; }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-06-13T15:09:24.770

如果您想从修改函数中访问整个数据数组，例如，`selection.attr`您可以使用整个选择作为其第三个参数传递给修改函数的事实。因此，您可以按如下方式重构数据数组：

```
mySelection.attr("stroke", (_, __, nodes) => {
  let data = d3.selectAll(nodes).data()
  // Now you can use data.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-10T14:35:55.620

这是一个老问题，但我也想知道。通过 selection.data 传入的状态不会丢失，而是分散在更新和进入组中。可以使用此功能合理可靠地检索它...

```
function getData2(/*this is update*/) {
    if (this.enter /*quick duck type test...*/) {
        var enter = this.enter(), retVal = []

        for (var i = 0; i < this.length; i++) {

            retVal.push([])

            for (var j = 0; j < enter.length; j++) {
                retVal[i].push(enter[i][j] || enter[i].update[j])
                retVal[i][j] = retVal[i][j] && retVal[i][j].__data__
                if (!retVal[i][j]) {
                    retVal[i].pop()
                } 
            }

        }
        return (this.length > 1 ? retVal : retVal[0])
    }
} 
```

用法...

```
console.log(getData2.call(update)) 
```

或者...

```
d3.selection.prototype.data2 = getData2
// ...
console.log(update.data2()) 
```

`update`selection.data(array) 返回的更新集合在哪里

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-20T10:12:41.323

或者，如果您曾经绑定过，您可以使用它`datum()`来获取数据。`datum(someData)`

# c# - C#中的唯一随机数

> ID：16057488
> 
> 赞同：0
> 
> 时间：2013-04-17T10:18:56.583
> 
> 标签：c#, binary-search-tree

我正在尝试创建具有唯一随机数的二叉搜索树。我使用 SortedSet 来表示我的树，然后将其放入数组中，然后使用 Contains 来查看树中是否存在某个数字。我的问题是我无法弄清楚如何以简单的方式获得所有不同的随机数。我使用了 Unik 和 Nålen_Unik 方法，但在这段代码中，它只为数组生成 1 个数字

```
 Random random = new Random();
        Program Tal = new Program();
        string nål = Tal.Nålen_Unik();
        string TalIArray = Tal.Unik();
        bool found = false;
        SortedSet<string> Tree = new SortedSet<string>();
        for (int x = 0; x < 50000; x++)
        {
            Tree.Add(TalIArray);
        }
        int y = 0;
        string[] TreeArray = Tree.ToArray<string>();
        while (y < TreeArray.Length)
        {
            Console.WriteLine(TreeArray[y]);
            y = y + 1;
        }

  private string Unik()
    {
        int maxSize = 4;

        char[] chars = new char[10000];

        string a;
        a = "0123456789";

        chars = a.ToCharArray();

        int size = maxSize;

        byte[] data = new byte[1];

        RNGCryptoServiceProvider crypto = new RNGCryptoServiceProvider();
        crypto.GetNonZeroBytes(data);

        size = maxSize;
        data = new byte[size];
        crypto.GetNonZeroBytes(data);

        StringBuilder result = new StringBuilder(size);

        foreach (byte b in data)
        {
            result.Append(chars[b % (chars.Length - 1)]);
        }

        return result.ToString();
    }
    private string Nålen_Unik()
    {
        int maxSize = 1;

        char[] chars = new char[62];

        string a;
        a = "0123456789";

        chars = a.ToCharArray();

        int size = maxSize;

        byte[] data = new byte[1];

        RNGCryptoServiceProvider crypto = new RNGCryptoServiceProvider();
        crypto.GetNonZeroBytes(data);

        size = maxSize;
        data = new byte[size];
        crypto.GetNonZeroBytes(data);

        StringBuilder result = new StringBuilder(size);

        foreach (byte b in data)
        {
            result.Append(chars[b % (chars.Length - 1)]);
        }

        return result.ToString(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T10:28:20.117

主要有三种方法用于获取没有冲突的随机数：

1.  保留您选择的所有号码，以便您可以对照之前的所有号码检查新号码。
2.  创建一系列独特的数字，将它们随机排列，然后从结果中一次选择一个。
3.  创建一个如此巨大的随机数，以至于碰撞的风险非常小，可以忽略不计。

第二种方法与洗牌的原理相同。第三种方法在创建[GUID](http://en.wikipedia.org/wiki/Globally_unique_identifier)时使用，它基本上是一个随机的 128 位值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T10:26:12.793

您可以使用[Random](http://msdn.microsoft.com/en-gb/library/system.random.aspx)类和[HashSet](http://msdn.microsoft.com/en-us/library/bb359438.aspx)来保证没有重复项。

*HashSet 类提供高性能的集合操作。集合是不包含重复元素且其元素没有特定顺序的集合。*

例如：

```
HashSet<int> t = new HashSet<int>();
Random r = new Random();

while(t.Count < 50)//or the desired length of 't'
{
    t.Add(r.Next(0,1000));//adjust min/max as needed
}

foreach (int i in t)
{
    Console.WriteLine(i);
}
Console.Read(); 
```

将为您提供 50 个有*保证*的唯一随机整数的集合。

由于集合中元素的数量不是这个问题的要求，因此即使提及似乎也无关紧要，尽管如果这*是*一个要求，您可以简单地修改该行`t.Count < ?`以获得一组所需长度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T10:28:32.313

假设您想要有限范围内的唯一数字，一种（简单但可能效率低下）的方法是创建所有可能值的列表（例如，0-99）。然后您使用 System.Random 在 0 和（列表中的元素数 - 1）之间选择一个随机数。从列表中获取该索引，将其输出并删除该元素。如果您重复该过程，则无法再生成该元素，并且数字将是唯一的，直到您使用了所有可能的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T10:25:06.967

您可以使用 Guid.NewGuid() 或 new Random().Next()

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-17T10:22:56.510

创建一个 Random 类的实例。确保它是一个！

然后使用此代码

```
private Random random = new Random();

random.Next(); 
```

# maven - Maven 为同一个项目生成两个不同的 WAR 文件

> ID：16057490
> 
> 赞同：3
> 
> 时间：2013-04-17T10:19:03.200
> 
> 标签：maven

我有一个 Maven Web 服务项目，由两个不同的服务类 testClass1 和 testClass2 组成。我想为同一个项目的两个类有两个不同的 WAR 文件。目前我正在为这两个服务生成单个 WAR 文件。

如何为同一个项目生成两个不同的 WAR 文件？提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T10:41:31.017

# 一般注意事项

正如[文档](http://maven.apache.org/guides/mini/guide-using-one-source-directory.html)所说，您尝试实现的是一种**不好**的做法 ：

> ## 从单个源目录生成多个唯一 JAR
> 
> 由于许多抱怨无法将其源代码分散到多个源目录中的人似乎在抱怨不想分散任何东西，因此使用包含和排除从单个目录生成多个独特的工件。
> 
> ### 为什么不推荐这个？
> 
> 这种做法可能会令人困惑且有风险。
> 
> 您最终可能会构建两个包含相同类的 JAR - 这表明应该将通用功能抽象为单独的依赖项。您最终可能会在两个 JAR 之间引入您没有意识到的依赖关系，并且通常是循环依赖关系。这表明这些类在错误的 JAR 中，或者可能所有内容都应该只是一个 JAR。

# 适合 Maven 最佳实践的解决方案

您应该考虑将您的项目分成两个不同的项目，每个项目都有一个 pom，因此每个项目都会生成一个工件，这里是一场战争。

## 两个简单的项目

您可以通过使用两个简单的项目来实现：

```
service1-simple-webproject
|-- src
`-- pom.xml

service2-simple-webproject
|-- src
`-- pom.xml 
```

这很简单，但您可能无法轻松共享它们之间的属性/依赖项/关系。

只需将您自己的代码拆分为单独的目录，并尝试使其作为两个独立的项目工作。

如果您认为它们之间有一些代码可以共享（实用程序、配置等），请参阅下一节关于多模块的内容。

## 多模块结构

或者您可以使用适当的多模块层次结构：

```
parent-multimodule-project
|-- service1-simple-webmodule
|   |-- src/
|   `-- pom.xml
|-- service2-simple-webmodule
|   |-- src
|   `-- pom.xml
`-- pom.xml 
```

这将允许您在项目之间建立关系，在更高级别共享配置，......看看这个文档：

*   Maven 官方文档：[http ://maven.apache.org/guides/mini/guide-multiple-modules.html](http://maven.apache.org/guides/mini/guide-multiple-modules.html)
*   Sonatype 奇妙的文档： http: [//www.sonatype.com/books/mvnex-book/reference/multimodule.html](http://www.sonatype.com/books/mvnex-book/reference/multimodule.html)

我可能会引导您创建第三个项目，可能命名为 core 或 util，它会生成一个 jar，其中包含两个 Web 项目的公共类。

**这真是最好的办法！**

# 功能性解决方案，但强烈不建议使用

我只会给你一些信息，因为我什至确信它可以在这种情况下工作。

Maven Assembly Plugin 允许您根据 xml 描述文件生成不同格式的包（zip、jar、war、其他...）。这里的文档：[http ://maven.apache.org/plugins/maven-assembly-plugin/](http://maven.apache.org/plugins/maven-assembly-plugin/)

再次，我强烈建议您不要使用这种解决方法。

# java - 无法从控制器重定向到 grails 中的 gsp

> ID：16057491
> 
> 赞同：0
> 
> 时间：2013-04-17T10:19:12.367
> 
> 标签：java, grails

我是 grails 的新手，在对控制器中的模型对象进行一些处理后，我试图重定向以渲染 gsp，但每次我收到以下错误：

```
Line | Method
->> 195 | doFilter in PageFragmentCachingFilter.java
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    63 | doFilter in AbstractFilter.java
|   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run      in     ''
^   662 | run . .  in java.lang.Thread 
```

如果我不处理我的域（setProperties 方法），即如果我删除了 for 循环，我可以重定向到另一个 gsp。

以下是我的控制器代码：

```
def receiveClient() {
        PartyClient partyClientInstance=PartyClient.get(params.client1Id)
        for (String key : params.keySet()) {
            if(key.endsWith("Checked")){
                setProperties(key,partyClientInstance)
            }
        }
        render (view: "receiveClient",model: [partyClientInstance: partyClientInstance])
    }

def setProperties(String key,PartyClient partyClient){
    int i =key.indexOf("Checked");
    String property=key.substring(0, i);

    if(property.equals("firstName")){
        partyClient.setFirstName(params[key])
    }else if(property.equals("lastName")){
        partyClient.setLastName(params[key])
    }else if(property.equals("middleName")){
        partyClient.setMiddleName(params[key])
    }else if(property.equals("title")){
        partyClient.setTitle(params[key])
    }
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:48:38.927

您始终可以尝试`grails-debug run-app`使用 IDE 添加断点。我对`PartyClient`in的用法有点怀疑`setProperties()`。我希望调试会有所帮助。调试端口默认为`5005`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:30:37.587

只是一个猜测：尝试将您的方法重命名`setProperties()`为其他名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T11:59:06.637

尝试使用命令对象来呈现*receiveClient*视图。

顺便说一句，您粘贴的错误消息可能不包含所有相关信息，您的堆栈跟踪相当小......

*   获得*partyClientInstance 后*，将其复制到与域属性匹配的命令中。
*   如果您的视图具有保存模型的表单，则在相关操作中，将命令复制到模型并在需要时保留数据。

希望能帮助到你。

# android - Android Listview Item-左右滑动获取TimePicker和DatePicker

> ID：16057493
> 
> 赞同：2
> 
> 时间：2013-04-17T10:19:12.923
> 
> 标签：android, android-listview, datepicker, slider, timepicker

因此，当我在 Item*上向左滑动*时，我想得到一个**TimePicker**，当我*向右滑动*时，我想得到一个**DatePicker**。这是 MainActivity，希望你能得到答案；）

```
package com.example.dailyplanner;

    class MyDbHelper extends SQLiteOpenHelper {

        private static final String DB_NAME = "mydb";
        private static final int DB_VERSION = 1;

        public static final String TABLE_NAME = "TaskTbl";
        public static final String COL_TXT = "Text";
        public static final String COL_DATE = "Date";
        public static final String COL_TIME = "Time";
        private static final String STRING_CREATE = "CREATE TABLE " + TABLE_NAME + " (_id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, " + COL_TXT + " VARCHAR(250), " + COL_DATE + " VARCHAR(20), " + COL_TIME + " VARCHAR(20));";

        public MyDbHelper(Context context) {
            super(context, DB_NAME, null, DB_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            db.execSQL(STRING_CREATE);
            ContentValues cv = new ContentValues(2);
            cv.put(COL_TXT, "New Entry");
            db.insert(TABLE_NAME, null, cv);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
            onCreate(db);
        }
    }

public class MainActivity extends ListActivity {

    public static final int RESULT_CODE = 1; //numri qe e percakton se me cfar kodi do percillet rezultati nga nje activity ne tjetren

    MyDbHelper mHelper;
    SQLiteDatabase mDb;
    Cursor mCursor;
    SimpleCursorAdapter mAdapter;
    Intent weather;
    Intent i;
    String text;
    String date;
    String time;
    ListView mList;
    Intent nTaskScreen;

    public TextView timeText;
    public TextView dateText;
    public EditText taskText;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        getWindow().setFormat(PixelFormat.RGBA_8888);
        getWindow().addFlags(WindowManager.LayoutParams.FLAG_DITHER);
        setContentView(R.layout.activity_main);

        timeText = (TextView) findViewById(R.id.timeTxt);
        dateText = (TextView) findViewById(R.id.dateTxt);
        taskText = (EditText) findViewById(R.id.editText1);

        mHelper = new MyDbHelper(getApplicationContext());

        Button showBtn = (Button) findViewById(R.id.shTask);
        showBtn.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

            }
        });

        Button nTaskBtn = (Button) findViewById(R.id.nTask);
        nTaskBtn.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                nTaskScreen = new Intent(MainActivity.this, new_task.class);
                startActivityForResult(nTaskScreen, RESULT_CODE);

            }
        });

        Button wthrBtn = (Button) findViewById(R.id.wthrBtn);
        registerForContextMenu(wthrBtn);

        mList = (ListView) findViewById(id.list);

        // I implemented here the code from the Link

    }

    public void onResume() {
        super.onResume();
        mDb = mHelper.getWritableDatabase();
        String[] columns = new String[] {
            "_id", MyDbHelper.COL_TXT, MyDbHelper.COL_TIME
        };
        mCursor = mDb.query(MyDbHelper.TABLE_NAME, columns, null, null, null, null, null, null);
        String[] headers = new String[] {
            MyDbHelper.COL_TXT, MyDbHelper.COL_TIME
        };
        mAdapter = new SimpleCursorAdapter(this, android.R.layout.two_line_list_item,
            mCursor, headers, new int[] {
            android.R.id.text1, android.R.id.text2
        });
        mList.setAdapter(mAdapter);
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (resultCode == RESULT_CODE) {

            String text = data.getStringExtra("text");
            String date = data.getStringExtra("date");
            String time = data.getStringExtra("time");

            Toast.makeText(this, "Registration was successfull! \nTask: " + text + "\nOn: " + date + "\nat:" + time, Toast.LENGTH_LONG).show();

            ContentValues cv = new ContentValues(2);
            cv.put(MyDbHelper.COL_TXT, text.toString());
            //cv.put(MyDbHelper.COL_DATE, date); //Insert 'now' as the date
            cv.put(MyDbHelper.COL_TIME, time);

            mDb.insert(MyDbHelper.TABLE_NAME, null, cv);
            mCursor.requery();
            mAdapter.notifyDataSetChanged();
            text = null;

            //mDb.execSQL("INSERT INTO TaskTbl (text,time,date) VALUES(" + "'" + text + "', '" + time + "', '" + date + "');");      

        }
        super.onActivityResult(requestCode, resultCode, data);

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:56:50.003

我为你做了一个样品

笔记：

1.  如果您使用 ListActivity，那么 xml 中的 ListView 应该有 id `android:id="@android:id/list"`。

2.  检查我的示例代码并根据您的代码实现相同的代码。

3.  在我评论过的地方调用 TimePicker 和 DatePicker。

` 公共类 MyListActivity 扩展 ListActivity 实现 OnTouchListener {

```
float historicX = Float.NaN, historicY = Float.NaN;
static final float TRIGGER_DELTA = 50; // Number of pixels to travel till
                                        // trigger
private GestureDetector gestureDetector;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    gestureDetector = new GestureDetector(new SwipeGestureDetector());

    Cursor cursor = getContentResolver().query(ContactsContract.Contacts.CONTENT_URI,
            new String[] { ContactsContract.Contacts._ID, ContactsContract.Contacts.DISPLAY_NAME, ContactsContract.Contacts.PHOTO_ID }, null,
            null, null);
    startManagingCursor(cursor);

    // the desired columns to be bound
    String[] columns = new String[] {  ContactsContract.Contacts.DISPLAY_NAME,  ContactsContract.Contacts.PHOTO_ID };
    // the XML defined views which the data will be bound to
    int[] to = new int[] { R.id.name_entry, R.id.number_entry };

    SimpleCursorAdapter mAdapter = new SimpleCursorAdapter(this, R.layout.list_example_entry, cursor, columns, to);
    setListAdapter(mAdapter);
    findViewById(android.R.id.list).setOnTouchListener(this);

}

public void onResume() {
    super.onResume();
}

enum Direction {
    LEFT, RIGHT;
}

interface OnSlideCompleteListener {
    void onSlideComplete(Direction dir);
}

@Override
public boolean onTouch(View v, MotionEvent event) {

    if (gestureDetector.onTouchEvent(event)) {
          return true;
        }
        return super.onTouchEvent(event);
}

public void onSlideComplete(Direction direction) {

    if (Direction.LEFT == direction) {
        Log.d("SWIPE LEFT", "LEFT");
        // Invoke Time Picker here
    } else if (direction == Direction.RIGHT) {
        Log.d("SWIPE RIGHT", "RIGHT");
        // Invoke Date Picker here
    }
}

// Private class for gestures
  private class SwipeGestureDetector extends SimpleOnGestureListener {
    // Swipe properties, you can change it to make the swipe 
    // longer or shorter and speed
    private static final int SWIPE_MIN_DISTANCE = 120;
    private static final int SWIPE_MAX_OFF_PATH = 200;
    private static final int SWIPE_THRESHOLD_VELOCITY = 200;

    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
      try {
        float diffAbs = Math.abs(e1.getY() - e2.getY());
        float diff = e1.getX() - e2.getX();

        if (diffAbs > SWIPE_MAX_OFF_PATH)
          return false;

        // Left swipe
        if (diff > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
            onSlideComplete(Direction.LEFT);

        // Right swipe
        } else if (-diff > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
            onSlideComplete(Direction.RIGHT);
        }
      } catch (Exception e) {
        Log.e("YourActivity", "Error on gestures");
      }
      return false;
    }
  } 
```

} `

# c++ - 了解 C 类型定义

> ID：16057495
> 
> 赞同：12
> 
> 时间：2013-04-17T10:19:15.937
> 
> 标签：c++, c, types, tcl

我试图理解来自[Tcl 文档的这段代码](http://tmml.sourceforge.net/doc/tcl/CrtChannel.html)

```
typedef int Tcl_DriverOutputProc(
        ClientData instanceData,
        const char *buf,
        int toWrite,
        int *errorCodePtr); 
```

据我所知，typedef 的目的是为现有类型分配替代名称，那么为什么需要 typedef int 才能**起作用**？这个怎么用？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-17T10:30:03.137

> 我知道 typedef 的目的是为现有类型分配替代名称

确切地。函数具有类型，这会将名称分配`Tcl_DriverOutputProc`给此函数类型。函数类型本身就像一个缺少名称的函数：

```
int(ClientData, const char *, int, int *) 
```

并且，与函数声明一样，您可以根据自己的选择包含参数名称，也可以将其省略。

> 这个怎么用？

您可以使用指向函数的指针来指定运行时的行为；例如：

```
typedef void function();
void hello()   {printf("Hello\n");}
void goodbye() {printf("Goodbye\n");}

int main() {
    function * pf = hello;
    pf(); // prints "Hello"
    pf = goodbye;
    pg(); // prints "Goodbye"
} 
```

在这种情况下，它允许您编写一个函数来处理 TCL 输出的某些方面，并告诉 TCL 使用该函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T11:14:45.677

typedef 也可以用来声明一个函数，比如“function_name”，这个“function_name”可以用来声明另一个具有相似类型和参数的函数。

```
typedef function_name( int, int);

function_name function1;
function_name *function2; 
```

在这里，在您的情况下， typedef 语句用于声明“ Tcl_DriverOutputProc ”函数。并且在“struct Tcl_ChannelType”中使用“Tcl_DriverOutputProc”来声明“*outputProc”。

“struct Tcl_ChannelType”在 Tcl 文档的最后。

```
typedef struct Tcl_ChannelType {
    const char *typeName;
     Tcl_ChannelTypeVersion version;
    Tcl_  DriverCloseProc *closeProc;
    Tcl_DriverInputProc *inputProc;
    Tcl_DriverOutputProc *outputProc;   // <-- DriverOutputproc is used here.
    Tcl_DriverSeekProc *seekProc;
    Tcl_DriverSetOptionProc *setOptionProc;
    Tcl_DriverGetOptionProc *getOptionProc;
    Tcl_DriverWatchProc *watchProc;
    Tcl_DriverGetHandleProc *getHandleProc;
    Tcl_DriverClose2Proc *close2Proc;
    Tcl_DriverBlockModeProc *blockModeProc;
    Tcl_DriverFlushProc *flushProc;
    Tcl_DriverHandlerProc *handlerProc;
    Tcl_DriverTruncateProc *truncateProc;
}Tcl_ChannelType; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T10:42:52.117

函数类型的 typedef 语法很奇怪——您创建的类型名称出现在**中间**。正如 Mike Seymour 已经说过的，这会将名称分配给`Tcl_DriverOutputProc`函数 type `int(ClientData, const char *, int, int *)`。

# css - jQuery Mobile 布局定制

> ID：16057497
> 
> 赞同：3
> 
> 时间：2013-04-17T10:19:20.040
> 
> 标签：css, html, jquery-mobile, jquery-mobile-button, jquery-mobile-checkbox

我在**jQuery Mobile**中迈出了第一步，我对它提供的缺乏定制感到有点失望......

例如，我有一个简单的表单，我想自定义表单组件的布局。

这是我的代码：

```
<form id="loginForm" action="#" method="post">
  <input id="rememberMe" name="rememberMe" type="checkbox"/>
  <label for="rememberMe">Remember me in this computer</label>

  <a id="info" href="#" data-role="button" data-icon="info" data-iconpos="notext">Info</a>

  <input id="submit" type="submit" value="log in" data-inline="true"/>
</form> 
```

见[**小提琴**](http://jsfiddle.net/5avUc/1/)。

具体来说，我想：

*   复选框与里面的`rememberMe`文本一样宽，`info`按钮与复选框内联。
*   包含前一个复选框和按钮的“组”要向右对齐。
*   `submit`按钮也在右边。

请举例说明如何实现这些目标......

*编辑*：我想要这样的东西：

![所需的布局](https://i.stack.imgur.com/Xssuw.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T10:56:43.127

这可以使用`ui-grid`类来实现。

**[工作演示](http://jsfiddle.net/jWPt3/)**

> 标记

```
<form id="loginForm" action="..." method="post">
 <div class=ui-grid-a>
  <div class=ui-block-a>
   <input id="rememberMe" name="rememberMe" type="checkbox"/>
   <label for="rememberMe" data-inline="true">Remember me in this computer</label>
  </div>
  <div class=ui-block-b>
   <a id="info" href="..." data-role="button" data-icon="info" data-iconpos="notext">Info</a>
  </div>  
 </div>  
 <div class=ui-grid-solo>
  <input id="submit" type="submit" value="log in" data-inline="true"/>
 </div>
</form> 
```

> 覆盖 CSS

```
.ui-block-a { width: 95% !important; text-align: right !important; }
.ui-block-b { width: 5% !important; padding-top: 5px !important; }
.ui-grid-solo { text-align: right !important; } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T10:35:04.933

您需要的定制不是来自 jQM，而是来自自定义 css。

通常这可以使用 jQuery Mobile 网格轻松完成，但它们并不那么灵活。所以你需要一个定制的解决方案。

每个元素周围都需要一个 div，因为 jQM 用新样式重新创建每个元素，除非我们有一个父 div，否则一切都会下地狱。

工作示例：http: [//jsfiddle.net/Gajotres/8NB22/](http://jsfiddle.net/Gajotres/8NB22/)

**HTML：**

```
<form id="loginForm" action="..." method="post">
    <div class="row">
        <div class="inline-mid">
            <a id="info" href="..." data-role="button" data-icon="info" data-iconpos="notext" class="middle-button">Info</a>
        </div>    
        <div class="inline-left">
            <input id="rememberMe" name="rememberMe" type="checkbox"/>
            <label for="rememberMe">Remember me in this computer</label>        
        </div>
    </div>
    <div class="row">
        <div class="inline-left">        
            <input id="submit" type="submit" value="log in" data-inline="true"/>        
        </div>    
    </div>    
</form> 
```

**CSS：**

```
.row  {
    min-width: 400px;
    width: 400px;
}

.inline-left, .inline-mid , .row {
    position: relative;
    float: right;
}

.inline-mid {
    margin-left: 10px;
    padding-top: 5px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T10:38:21.180

布局不应该主要由 Javascript 代码负责，因此您不应该为此责怪 jQuery Mobile。

应该使用[CSS 媒体查询](http://webdesignerwall.com/tutorials/css3-media-queries)来自定义不同的屏幕尺寸，单击链接获取比您需要的更多示例。

# regex - 如何使用perl检查字符串中的数字

> ID：16057501
> 
> 赞同：-3
> 
> 时间：2013-04-17T10:19:37.290
> 
> 标签：regex, perl

我在变量中有一个字符串，`$vreponse`字符串是

```
int.force_snmp_version  T_SIZE  3 
```

我要做的就是验证字符串中是否有数字 3。如果验证成功，则打印一条消息，否则打印失败消息

我尝试过这样的事情

```
my $vresponse = $ua->get("https://$user:$pass\@$ern_ip/get_param?p=init.force_snmp_version");

if ($vresponse->decoded_content =~ /\b3$/)
{
print "SUCESS\n";
}
else
{ print "not\n"; } 
```

这不起作用，我需要改变`$vresponse->decoded_content`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:21:47.663

也许只是

```
if ( $vresponse =~ /3/ ) { ... } 
```

它只是检查`3`字符串中某处是否有一个字符。

或者，更准确地说

```
if ( $vresponse =~ /\b3$/ ) { ... } 
```

它检查*最后一个*字符是`3`并且它是单独的，即不是结尾，比如说，`23`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:29:27.950

```
my $vresponse = 'int.force_snmp_version  T_SIZE  3';
my $char = '3';

my $result = index($vresponse , $char);

if ($result >=0)
{
  #display found
}
else
{
  #display not found
} 
```

# c# - 如何枚举部分列表（以避免 OutOfMemoryException）？

> ID：16057508
> 
> 赞同：0
> 
> 时间：2013-04-17T10:20:00.607
> 
> 标签：c#, .net, lazy-loading, ienumerable, out-of-memory

我有一个`IEnumerable`我想对其进行处理的对象。但是当集合变得太大时，它会`OutOfMemoryException`在枚举它时抛出一个，例如在调用`Count()`.

显而易见的解决方案是将集合拆分为多个部分，以使每个部分都不会太大。但我不知道每个部分中理想的对象数量是多少，并且我想避免“幻数”，因为我不知道每个对象的潜在大小。我什至不知道将它分成多个部分是否是一个好的解决方案。有任何想法吗？

编辑：

在我的代码中，我有这个功能。请注意将`Select`项目`MyData`放入包装对象的集合中，这会增加大小。当枚举这个集合时，我得到了异常（我可以`messages.Select(m => new CloudQueueMessage(m.ToBinary())).ToList()`立即得到异常）。

```
 public static void AddMessages(IEnumerable<MyData> messages)
    {
        DoStuff(messages.Select(m => new CloudQueueMessage(m.ToBinary())));
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T10:24:25.330

`Enumerable.Count()`如果它是一个查询而不是一个集合，它会枚举序列以获取它的计数（然后它正在使用该`Count`属性）。然而，即使它枚举了它不应该抛出的序列，`OutOfMemoryException`因为它不会创建新的东西。

我假设您正在使用在`Count()`. `ToList()`如果你使用or ，你也会得到例外`ToArray()`。因此，您需要向我们展示查询，我们可以尝试在内存消耗方面对其进行优化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T10:23:37.640

使用MoreLINQ 的[批处理](https://code.google.com/p/morelinq/wiki/OperatorsOverview)扩展方法，即“*将源序列批处理为大小桶*”。示例如下：

```
int batchSize = 1000;

var lotsOfItems = Enumerable.Range(0, 10000000);
var batched = lotsOfItems.Batch(batchSize); 

foreach (var batch in batched)
{
    //handle each batch
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T11:15:07.650

尝试这个

```
public IEnumerable<IEnumerable<T>> GetPortions<T>(IEnumerable<T> list, int portion)
{
   double length = (list.Count() / (double)portion); 

   for (int i = 0; i < length; i++)
   {
         yield return list.ToList().Skip(i * portion).Take(portion);
   } 
}

protected void Page_Load(object sender, EventArgs e)
{ 
    IEnumerable<int> list = Enumerable.Range(1, 25); 

    foreach (var item in GetPortions(list, 10))
    {

    }
 } 
```

# objective-c - 自定义委托/协议无法正常工作

> ID：16057512
> 
> 赞同：0
> 
> 时间：2013-04-17T10:20:12.230
> 
> 标签：objective-c, delegates, protocols, xcode4.6

我一直在编写一个具有自定义协议的应用程序，以将数据从子视图发送到父视图，类是

*   主视图控制器
*   AddViewController（主视图控制器的子级）
*   DaysViewController（addviewcontroller 的子级）

自定义协议在 DaysViewController 中声明并在 AddViewController 中实现

添加视图控制器.h

```
#import <UIKit/UIKit.h>
#import "DaysViewController.h"
#import "Course.h"
#import "Student.h"

@interface AddViewController : UITableViewController<UIActionSheetDelegate,UIPickerViewDelegate,UIPickerViewDataSource,UIPickerViewAccessibilityDelegate,UITextFieldDelegate,DaysViewControllerDelegate>
{
    NSArray *hoursarray;
    UIActionSheet *aac;
    IBOutlet UITextField *NameTx,*HoursTx,*DaysTx,*TimeTx;
    Student *st;
    Course *cc;
}

-(void) pickerDoneClick;
-(IBAction)fillTheOtherData;
@property (nonatomic ,strong) UIActionSheet *aac;
@end 
```

添加视图控制器.m

```
#import "AddViewController.h"

@interface AddViewController ()

@end

@implementation AddViewController
@synthesize aac;
- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    // Uncomment the following line to preserve selection between presentations.
    // self.clearsSelectionOnViewWillAppear = NO;

    // Uncomment the following line to display an Edit button in the navigation bar for this view controller.
    // self.navigationItem.rightBarButtonItem = self.editButtonItem;
    //viewP.frame = CGRectMake(0, 154, 320, 205);

    hoursarray = [[NSArray alloc]initWithObjects:@"2",@"3",@"4", nil];
    [self.tableView setScrollEnabled:NO];
    [DaysTx setEnabled:NO];
    [TimeTx setEnabled:NO];
    [HoursTx setKeyboardType:UIKeyboardTypeDecimalPad];

    cc = [[Course alloc]init];
    //UITapGestureRecognizer *tapgr = [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(tapped:)];
    //[self.view addGestureRecognizer:tapgr];

}

-(void)tapped:(UITapGestureRecognizer *)tap
{
    [self.view endEditing:YES];
}
- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
    [textField resignFirstResponder];
    return YES;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component
{
    return [hoursarray count];
}

//-(IBAction)addCourse
//{
//    [UIView beginAnimations:@"view" context:nil];
//    [UIView setAnimationDuration:1];
//    viewP.frame = CGRectMake(0, 500, 320, 205);
//    [UIView commitAnimations];
//
//}

- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView
{
    return 1;
}

- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component
{
    return [hoursarray objectAtIndex:row];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
        if (indexPath.row == 3)
    {
        aac = [[UIActionSheet alloc]initWithTitle:@"How many ?" delegate:self cancelButtonTitle:nil destructiveButtonTitle:nil otherButtonTitles:nil, nil];
        UIPickerView *picker = [[UIPickerView alloc]initWithFrame:CGRectMake(0, 44, 0, 0)];
        picker.delegate = self;
        picker.dataSource = self;

        UIToolbar *pickerToolBar = [[UIToolbar alloc]initWithFrame:CGRectMake(0, 0, 320, 44)];
        [pickerToolBar sizeToFit];

        NSMutableArray *barItems = [[NSMutableArray alloc]init];

        UIBarButtonItem *flexspace = [[UIBarButtonItem alloc]initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:self action:nil];
        [barItems addObject:flexspace];

        UIBarButtonItem *doneBtn = [[UIBarButtonItem alloc]initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(pickerDoneClick)];
        [barItems addObject:doneBtn];

        [pickerToolBar setItems:barItems animated:YES];

        [aac addSubview:pickerToolBar];
        [aac addSubview:picker];
        [aac showInView:self.view];
        [aac setBounds:CGRectMake(0, 0, 320, 464)];

    }
    else if (indexPath.row == 2)
    {
        DaysViewController *days = [self.storyboard instantiateViewControllerWithIdentifier:@"Days"];
        days.delegate = self;
        [self.navigationController pushViewController:days animated:YES];
    }

}

-(void) pickerDoneClick
{
    [aac dismissWithClickedButtonIndex:0 animated:YES];
}

-(void)chooseDays:(DaysViewController *)controller withArray:(NSArray *)theDaysArray
{
    NSLog(@"I'm @ chooseDays method");
    NSLog(@"Before the add !!");
    NSLog(@"chooseDays Method and the array is %@",theDaysArray);
    cc.days = [NSMutableArray arrayWithObject:theDaysArray];
    NSLog(@"After the add");
    NSLog(@"chooseDays Method and the array is %@",cc.days);
//    [self dismissViewControllerAnimated:YES completion:nil];
}

-(void)cancelChooseDays:(DaysViewController *)controller
{
    [self dismissViewControllerAnimated:YES completion:nil];
}

-(IBAction)fillTheOtherData
{
    cc.name = NameTx.text;
    cc.hour = [HoursTx.text integerValue];
    NSLog(@"The name is %@ and the hour credit is %d",cc.name,cc.hour);

}

@end 
```

DaysViewController.h

```
#import <UIKit/UIKit.h>
#import "Course.h"

@class DaysViewController;
@protocol DaysViewControllerDelegate <NSObject>
@required
-(void)chooseDays:(DaysViewController *)controller withArray:(NSArray *)theDaysArray;
-(void)cancelChooseDays:(DaysViewController *)controller;
@end

@interface DaysViewController : UITableViewController
{
    Course *courseDays;
    NSArray *days;
    NSMutableArray *dayChosen;

}
@property (nonatomic,weak) id<DaysViewControllerDelegate> delegate;
-(IBAction)done:(id)sender;
-(IBAction)cancel:(id)sender;
@end 
```

DaysViewController.m

```
#import "DaysViewController.h"

@interface DaysViewController ()

@end

@implementation DaysViewController

@synthesize delegate;

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    // Uncomment the following line to preserve selection between presentations.
    // self.clearsSelectionOnViewWillAppear = NO;

    // Uncomment the following line to display an Edit button in the navigation bar for this view controller.
    // self.navigationItem.rightBarButtonItem = self.editButtonItem;

    days = [[NSArray alloc]initWithObjects:@"Saturday",@"Sunday",@"Monday",@"Teusday",@"Wednesday",@"Thursday",@"Friday", nil];
    dayChosen = [[NSMutableArray alloc]init];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
#warning Potentially incomplete method implementation.
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
#warning Incomplete method implementation.
    // Return the number of rows in the section.
    return [days count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"DaysCell"];
    if (cell == nil) {
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"DaysCell"];
    }
    cell.textLabel.text = [days objectAtIndex:indexPath.row];
    return cell;
}

-(IBAction)done:(id)sender
{
    //Course *course = [[Course alloc]init];
    //[course.days addObject:dayChosen];
    //NSArray *daysArray = [NSArray arrayWithObject:dayChosen];

    NSLog(@"The Days are %@",dayChosen);
    [self.delegate chooseDays:self withArray:dayChosen];
    [self dismissViewControllerAnimated:YES completion:nil];
}

-(IBAction)cancel:(id)sender
{
    [self.delegate cancelChooseDays:self];
}

/*
// Override to support conditional editing of the table view.
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the specified item to be editable.
    return YES;
}
*/

/*
// Override to support editing the table view.
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        // Delete the row from the data source
        [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
    }   
    else if (editingStyle == UITableViewCellEditingStyleInsert) {
        // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view
    }   
}
*/

/*
// Override to support rearranging the table view.
- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath
{
}
*/

/*
// Override to support conditional rearranging of the table view.
- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the item to be re-orderable.
    return YES;
}
*/

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    cell.accessoryType = UITableViewCellAccessoryCheckmark;
    [dayChosen addObject:[days objectAtIndex:indexPath.row]];
    NSLog(@"Days are %@",dayChosen);
}

@end 
```

MainViewController 有一个按钮可以带我到 AddViewController 和 AddViewController 有相同的按钮可以带我到 DaysViewController ，所有视图都有一个 UITableView 。

我想要做的是当我将数据从 DaysViewController 发送到 AddViewController 以将其放入数组中并关闭视图 AddViewController 应该显示但 MainViewController 显示，这就是我不想要的。

AddViewController 和 DaysViewController 有一个 UINavigationController 但 MainViewController 没有。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:42:59.453

好的，我想我知道你的问题是什么。在您的`cancel`函数中，尝试切换这行代码：

```
[self dismissViewControllerAnimated:YES completion:nil]; 
```

使用这行代码：

```
[self.navigationController popViewControllerAnimated:YES]; 
```

让我知道这是否有帮助。

# android-intent - 关闭android上的应用程序后，广播接收器是否有可能继续捕获screen_off和screen_on？

> ID：16057513
> 
> 赞同：1
> 
> 时间：2013-04-17T10:20:16.323
> 
> 标签：android-intent, broadcastreceiver

```
IntentFilter filter = new IntentFilter("android.intent.action.SCREEN_OFF");
filter.addAction("android.intent.action.SCREEN_ON");
filter.addAction("android.intent.action.PHONE_STATE");
filter.addAction("android.intent.action.NEW_OUTGOING_CALL");
mReceiver = new controlCalls();
registerReceiver(mReceiver,filter); 
```

我想注册一个BroadcastReceiver来捕获这四个事件，即使应用程序关闭也保持运行，但是我必须使用unregisterReceiver（mReceiver）并且不知道如何修复它。

# ios - Iphone App 在 AD HOC 上崩溃

> ID：16057514
> 
> 赞同：1
> 
> 时间：2013-04-17T10:20:19.010
> 
> 标签：ios, xcode, crash, cocos2d-iphone, adhoc

我的应用程序在开发模式下运行良好，但由于某种原因，我在加载屏幕后立即崩溃。

我真的不明白可能出了什么问题，关于如何更好地测试它的任何提示？

苹果用这条消息拒绝了它：

我们发现您的应用程序无法在运行 iOS 6.1.3 的 iPhone 5 和 iPad 3rd gen 上通过 Wi-Fi 和蜂窝网络启动。

我们在主屏幕上选择应用程序时遇到了问题 - 应用程序显示启动图像然后意外退出。这可能是因为 iOS 6 对应用程序使用了看门狗定时器；如果应用程序完成其初始启动的时间过长，操作系统将终止该应用程序。

有关看门狗定时器的信息，请参阅技术问答：应用程序在从调试器启动时不会崩溃，但在用户启动时会崩溃。

另一种可能性可能是缺少权利。有关详细信息，请参阅技术说明：解决“0x800003A”、应用程序未启动和“缺少权利”。对于离散代码级别的问题，您可能希望咨询 Apple 开发人员技术支持。请务必：

*   包括您的拒绝问题的完整详细信息
*   准备任何符号化的崩溃日志、屏幕截图和步骤，以便在 DTS 工程师跟进时重现问题。

有关如何符号化和读取崩溃日志的信息，请参阅技术说明 TN2151 理解和分析 iPhone OS 应用程序崩溃报告。

如果您在重现此问题时遇到困难，请尝试按照[https://developer.apple.com/library/ios/qa/qa1764/Testing](https://developer.apple.com/library/ios/qa/qa1764/) Workflow with Xcode's Archive feature 中所述测试工作流程”。

日志：

```
Incident Identifier: 594EE41B-0B8D-419A-B9B8-84CB58D1C174
CrashReporter Key:   bb741ef3c315eb6c114b0de36494c7de51511d89
Hardware Model:      iPhone5,2
Process:         tictactoe [85964]
Path:            /var/mobile/Applications/F042F618-9077-4862-8938-ABADDC05E8B1/tictactoe.app/tictactoe
Identifier:      tictactoe
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2013-04-17 11:11:02.661 +0100
OS Version:      iOS 6.1.2 (10B146)
Report Version:  104

Exception Type:  EXC_BAD_ACCESS (SIGBUS)
Exception Codes: EXC_ARM_DA_ALIGN at 0x20b8f671
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   tictactoe                       0x00073708 -[CCBReader readFloat] (CCBReader.m:201)
1   tictactoe                       0x00075972 -[CCBReader readSequences] (CCBReader.m:959)
2   tictactoe                       0x00075bf8 -[CCBReader readFileWithCleanUp:actionManagers:] (CCBReader.m:1020)
3   tictactoe                       0x00075e9c +[CCBReader nodeGraphFromData:owner:parentSize:] (CCBReader.m:1061)
4   tictactoe                       0x0007605e +[CCBReader nodeGraphFromFile:owner:parentSize:] (CCBReader.m:1090)
5   tictactoe                       0x00076122 +[CCBReader sceneWithNodeGraphFromFile:owner:parentSize:] (CCBReader.m:1105)
6   tictactoe                       0x000760f2 +[CCBReader sceneWithNodeGraphFromFile:owner:] (CCBReader.m:1100)
7   tictactoe                       0x000711f8 -[AppController application:didFinishLaunchingWithOptions:] (AppDelegate.m:85)
8   UIKit                           0x34957a9c -[UIApplication _handleDelegateCallbacksWithOptions:isSuspended:restoreState:] + 248
9   UIKit                           0x34957620 -[UIApplication _callInitializationDelegatesForURL:payload:suspended:] + 1164
10  UIKit                           0x3494f82e -[UIApplication _runWithURL:payload:launchOrientation:statusBarStyle:statusBarHidden:] + 694
11  UIKit                           0x348f7d1a -[UIApplication handleEvent:withNewEvent:] + 1006
12  UIKit                           0x348f77a8 -[UIApplication sendEvent:] + 68
13  UIKit                           0x348f71ea _UIApplicationHandleEvent + 6194
14  GraphicsServices                0x3660e5f4 _PurpleEventCallback + 588
15  GraphicsServices                0x3660e222 PurpleEventCallback + 30
16  CoreFoundation                  0x32abd3e4 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 32
17  CoreFoundation                  0x32abd386 __CFRunLoopDoSource1 + 134
18  CoreFoundation                  0x32abc20a __CFRunLoopRun + 1378
19  CoreFoundation                  0x32a2f238 CFRunLoopRunSpecific + 352
20  CoreFoundation                  0x32a2f0c4 CFRunLoopRunInMode + 100
21  UIKit                           0x3494e468 -[UIApplication _run] + 664
22  UIKit                           0x3494b2b4 UIApplicationMain + 1116
23  tictactoe                       0x00070e1a main (main.m:14)
24  libdyld.dylib                   0x3ac06b1c start + 0

Thread 1 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 1:
0   libsystem_kernel.dylib          0x3acbd5d0 kevent64 + 24
1   libdispatch.dylib               0x3abf8d22 _dispatch_mgr_invoke + 806
2   libdispatch.dylib               0x3abf4374 _dispatch_mgr_thread + 32

Thread 2:
0   libsystem_kernel.dylib          0x3accdd98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x3ac1bad6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x3ac1b7f2 _pthread_wqthread + 362
3   libsystem_c.dylib               0x3ac1b680 start_wqthread + 4

Thread 3:
0   libsystem_kernel.dylib          0x3accdd98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x3ac1bad6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x3ac1b7f2 _pthread_wqthread + 362
3   libsystem_c.dylib               0x3ac1b680 start_wqthread + 4

Thread 4 name:  WebThread
Thread 4:
0   libsystem_kernel.dylib          0x3acbce30 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x3acbcfd0 mach_msg + 48
2   CoreFoundation                  0x32abd2b6 __CFRunLoopServiceMachPort + 126
3   CoreFoundation                  0x32abc02c __CFRunLoopRun + 900
4   CoreFoundation                  0x32a2f238 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x32a2f0c4 CFRunLoopRunInMode + 100
6   WebCore                         0x38a2e390 RunWebThread(void*) + 440
7   libsystem_c.dylib               0x3ac260de _pthread_start + 306
8   libsystem_c.dylib               0x3ac25fa4 thread_start + 4

Thread 5:
0   libsystem_kernel.dylib          0x3accdd98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x3ac1bad6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x3ac1b7f2 _pthread_wqthread + 362
3   libsystem_c.dylib               0x3ac1b680 start_wqthread + 4

Thread 6 name:  com.apple.NSURLConnectionLoader
Thread 6:
0   libsystem_kernel.dylib          0x3acbce30 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x3acbcfd0 mach_msg + 48
2   CoreFoundation                  0x32abd2b6 __CFRunLoopServiceMachPort + 126
3   CoreFoundation                  0x32abc02c __CFRunLoopRun + 900
4   CoreFoundation                  0x32a2f238 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x32a2f0c4 CFRunLoopRunInMode + 100
6   Foundation                      0x3337c888 +[NSURLConnection(Loader) _resourceLoadLoop:] + 304
7   Foundation                      0x3340022c __NSThread__main__ + 968
8   libsystem_c.dylib               0x3ac260de _pthread_start + 306
9   libsystem_c.dylib               0x3ac25fa4 thread_start + 4

Thread 7:
0   libsystem_kernel.dylib          0x3accdd98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x3ac1bad6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x3ac1b7f2 _pthread_wqthread + 362
3   libsystem_c.dylib               0x3ac1b680 start_wqthread + 4

Thread 0 crashed with ARM Thread State (32-bit):
    r0: 0x0000000c    r1: 0x00000275      r2: 0x20b8f671      r3: 0x00000271
    r4: 0x1f570000    r5: 0x000eafc5      r6: 0x00000001      r7: 0x2fddd618
    r8: 0x3859ca59    r9: 0x00000003     r10: 0x3859cbdc     r11: 0x1f579bb0
    ip: 0x00073495    sp: 0x2fddd614      lr: 0x000736e5      pc: 0x00073708
  cpsr: 0x00000030 
```

…………

# iphone - 在 IOS 中创建自定义邮件撰写视图（用户界面）

> ID：16057517
> 
> 赞同：0
> 
> 时间：2013-04-17T10:20:26.030
> 
> 标签：iphone, ios, objective-c, ios6

目前我正在努力创建一个不使用 MFMailComposerview 的邮件编写器视图。我的要求是我应该以 webview 作为正文的 to,cc,bcc 字段，同时缩放 webview 它的行为应该与本机邮件的行为相同，即“to,cc,bbc”字段也应该按比例移动.

关注仅与 UI 而非功能部分有关。

关于如何从这件事开始的任何建议。

问候， 苏海尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:28:28.513

对于 UI 部分 (XIB)，您可以从以下内容开始：

*   你可以有一个`ViewController`子类`UINavigationBar`。
*   在上面添加`UITableView`（普通风格的）`UIViewController`
*   `UITableViewCell`为 To、CC、BCC 字段创建自定义子类。
*   `UITableViewCell`为 Contents创建另一个自定义子类。

最后一点，您可以使用`UIScrollView`拥有`UItextView`和/或`UIWebView`根据您对电子邮件内容/正文的要求。

毕竟，UI 组件按照您的期望工作；您可以继续进行功能部分，这在@user2235613 的答案中定义（尽管在广义上）。

祝你好运。

# c++ - 缺少 C++ API 上的修改方法

> ID：16057518
> 
> 赞同：0
> 
> 时间：2013-04-17T10:20:26.107
> 
> 标签：c++, z3

我想对 z3::expr 对象进行一些转换。如何使用`Z3_substitute_vars`,`Z3_translate`和`Z3_substitute_`C++ API？它们是用 C# 实现的，但我在 C++ 中找不到它们。很奇怪，它们没有被执行。

我尝试使用 C api 但没有任何结果，这里有一个例子：

```
void substitute(){
z3::context c;
z3::expr a = c.int_const("a");
Z3_ast astA = a;
z3::expr plus = 2*a;
errs() << Z3_ast_to_string(c,plus);
z3::expr b = c.int_const("b");
Z3_ast astB = a;
z3::expr subs(c,Z3_substitute(c,plus,1,&astA,&astB));
errs() << Z3_ast_to_string(c,subs);
} 
```

但`a`不会被替代。难道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:47:18.770

感谢您指出这些功能不存在。C++ 包装器增加了 C API 之外的便利，并且为这些 API 函数添加便利也是合理的，因为您表明您正在使用它们。

C++ 包装器仍然可以与基本的 C API 一起使用。因此，您可以在使用 C++ API 时调用函数，例如 Z3_translate 和 Z3_substitute。许多其他 API 函数也没有出现在 C++ 包装器中，但是现有函数的包装方式应该很好地说明了如何调用剩余的函数。

以下是一些相关的帖子：

*   [z3 C++ API & ite](https://stackoverflow.com/questions/14160468/z3-c-api-ite)
*   [在Z3中调用一些策略后如何使用枚举常量？](https://stackoverflow.com/questions/15085232/how-to-use-enumerated-constants-after-calling-of-some-tactic-in-z3/15094513#15094513)
*   [如何使用 Z3 C++ api 读取 smtlib2 字符串？](https://stackoverflow.com/questions/12570784/how-to-read-smtlib2-strings-using-z3-c-api)
*   [从 Z3 C API 包装实体](https://stackoverflow.com/questions/15412711/wrapping-entities-from-z3-c-api/15413490#15413490)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T17:10:35.940

我相信你的例子有一个错字：

```
 Z3_ast astB = a; 
```

尝试

```
 Z3_ast astB = b; 
```

# ember.js - Ember JS IndexedDB 适配器

> ID：16057520
> 
> 赞同：0
> 
> 时间：2013-04-17T10:20:26.840
> 
> 标签：ember.js, ember-data

我注意到已经在 Ember Data 的 indexedDB 适配器上完成了一些工作。

[https://github.com/panayi/ember-data-indexeddb-adapter](https://github.com/panayi/ember-data-indexeddb-adapter)

我曾尝试在修订版 11 中使用它，但它似乎不起作用。

我得到的js错误是：

> 路径 router.store.adapter 中的对象找不到或已被破坏。

有没有人知道关于这个适配器的任何事情，是否还有更多的工作要做。

# concurrency - 导致严重减速和头痛的 goroutines

> ID：16057524
> 
> 赞同：1
> 
> 时间：2013-04-17T10:20:39.337
> 
> 标签：concurrency, go, goroutine

我在使用 goroutines 时遇到了一些问题。为什么这段代码在 ~125ms 内执行（注意顺序执行）：

```
package main

import (
  "os/exec"
  "time"
  "fmt"
)

func main() {
  cmd := exec.Command("lessc", "--yui-compress", "test.less")
  n := 2000
  start := time.Now()
  for i := 0; i < n; i++ {
    cmd.Run()
  }
  finish := time.Now()

  fmt.Printf("Program took %v to run\n", finish.Sub(start))
} 
```

当这段代码大约需要 20 秒时（使用 goroutine 并发执行）：

```
package main

import (
  "os/exec"
  "time"
  "fmt"
)

func main() {
  cmd := exec.Command("lessc", "--yui-compress", "test.less")
  ch := make(chan bool)
  n := 2000
  start := time.Now()
  for i := 0; i < n; i++ {
    go lessc(ch, cmd)
  }
  fmt.Println(n, " goroutines started.")
  for i := 0; i < n; i++ {
    _ = <-ch
  }
  finish := time.Now()

  fmt.Printf("Program took %v to run\n", finish.Sub(start))
}

func lessc(ch chan bool, c *exec.Cmd) {

  c.Run()
  ch <- true
} 
```

在 i7 720QM (4C/8T) 8GB RAM linux/x86-64 上使用 go 1.0.3 也使用 1.0.2 构建和测试，在同一台机器上遇到了同样的问题。

编辑：由下面的@jnml 解决。如果有人关心这里的新固定并发代码，那就是：

```
package main

import (
  "os/exec"
  "time"
  "fmt"
)

func main() {
  ch := make(chan bool)
  n := 2000
  start := time.Now()
  for i := 0; i < n; i++ {
    go lessc(ch)
  }
  fmt.Println(n, " goroutines started.")
  for i := 0; i < n; i++ {
    _ = <-ch
  }
  finish := time.Now()

  fmt.Printf("Program took %v to run\n", finish.Sub(start))
}

func lessc(ch chan bool) {

  cmd := exec.Command("lessc", "--yui-compress", "test.less")
  cmd.Run()
  ch <- true
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-17T10:36:48.643

IMO 你的程序不正确。它包含一个竞争条件，因此可以做任何事情。任何时间都没有意义。

您正在创建*一个* `exec.Cmd`，然后同时（== 数据竞争）`Run`从多个 goroutine 执行其方法。`exec.Cmd`从来没有提到它可以被重复使用一次以上`Run`——即使是连续的。

`exec.Cmd`有一些由初始化的`exec.Command`状态和执行后的不同状态`Run`。IOW，执行该`Run`方法后，状态不再初始化，可能不适合另一个状态`Run`

# servicestack - ServiceStack 打错了 http 动词

> ID：16057527
> 
> 赞同：1
> 
> 时间：2013-04-17T10:20:48.093
> 
> 标签：servicestack, httpverbs

当尝试执行 POST 请求时`Delete(SourceInfo sourceInfo)`执行而不是`Post(SourceInfo sourceInfo)`，如果我删除`Delete(SourceInfo sourceInfo)`then`Put(SourceInfo sourceInfo)`则在执行 POST 请求时执行。我很确定我做错了什么，但我无法弄清楚它是什么。

`IPlugin`使用接口请求路由。

```
public void Register(IAppHost appHost)
{
    appHost.Routes.Add<SourceInfo>("/sources", "GET,POST,PUT");
    appHost.Routes.Add<SourceInfo>("/sources/{Name}", "GET,DELETE");
} 
```

服务看起来像这样

```
public class SourceService : ServiceStack.ServiceInterface.Service
{    
    public SourceInfoResponse Get(SourceInfo sourceInfo)
    { ... }

    public bool Post(SourceInfo source)
    { ... }

    public bool Put(SourceInfo source)
    { ... }

    public bool Delete(SourceInfo source)
    { ... }
} 
```

我在这里查看了新 api 设计的路由描述：[https](https://github.com/ServiceStack/ServiceStack/wiki/New-API) ://github.com/ServiceStack/ServiceStack/wiki/New-API ，但在这种情况下看起来并不适用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T19:48:46.860

于是想通了，结果发现返回`bool`是行不通的。当我将返回类型更改为`object`它时，它立即起作用。

像这样

```
public class SourceService : ServiceStack.ServiceInterface.Service
{    
    public SourceInfoResponse Get(SourceInfo sourceInfo)
    { ... }

    public object Post(SourceInfo source)
    { ... }

    public object Put(SourceInfo source)
    { ... }

    public object Delete(SourceInfo source)
    { ... }
} 
```

它还可以返回自定义类。

# windows-phone-8 - 适用于 Windows Phone 8 的 ApplicationBar 中的自定义图标颜色

> ID：16057536
> 
> 赞同：1
> 
> 时间：2013-04-17T10:21:21.717
> 
> 标签：windows-phone-8

我分别使用了 ApplicationBar 的背景色和前景色，并且可以看到它相应地改变了外观。所以如果我想让我的图标变成绿色，我只需设置 Foreground 属性。到现在为止还挺好。

我的问题是如何只更改*一个*图标，而不是全部？假设我想要它们都是标准的黑色/白色（取决于浅色/深色主题设置），但应该是绿色的。我尝试使用代表图标的 png 文件，将其更改为绿色（它的彩色部分，当然大部分是透明的），但它仍然显示为白色。可以用不透明蒙版完成吗？还是有其他方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T10:57:14.050

您不能像这样更改单个 App Bar 图标的颜色。

实际上，SDK 仅读取图标 PNG 的透明度 (alpha) 通道，并将其转换为具有所需透明度的黑色或白色。

如果您的手机是浅色主题，它将使用黑色像素，深色主题白色像素。

# css - 背景图像在浏览器缩放时不可见

> ID：16057537
> 
> 赞同：0
> 
> 时间：2013-04-17T10:21:24.367
> 
> 标签：css, cross-browser

我有一个 gif 图像（1px X 1px），用作我网站的 960 网格框架的边框。

即使在增加缩放百分比的情况下，所有布局都适合正常状态下的正确位置。

问题：在降低缩放级别的情况下，某些缩放级别的边框是不可见的。例如，它在 80% 中可见，但在 90% 中不可见。

是否有任何跨浏览器 CSS 代码或针对此问题的任何其他修复？我们可以使用任何特定的 CSS 属性来限制为浏览器缩放调整背景图像的大小吗？

谢谢

# asp.net - 未找到现有物业

> ID：16057542
> 
> 赞同：0
> 
> 时间：2013-04-17T10:21:50.757
> 
> 标签：asp.net, asp.net-mvc-3, viewmodel, selectlist

我正在尝试在 ASP.NET 中创建一个下拉框，当生成视图时，它给了我一个错误，说在模型类别中找不到 Categorie_ID（它确实存在并且它是公共的）。类别和产品已成功加载（我已调试该部分）。

这就是我得到的；

我的观点：

```
@{
ViewBag.Title = @Model.Product.Merk; @Model.Product.Type;;
Layout = "~/Views/Shared/_Layout.cshtml";
}
@model WebshopProjectBlokC.ViewModels.ProductViewModel      
<h2>@Model.Product.Merk @Model.Product.Type wijzigen</h2>
@using (Html.BeginForm("ProductWijzigenForm", "ProductBeheer"))
{
    @Html.ValidationSummary(true)

    <fieldset>
        @Html.HiddenFor(model => model.Product.ID)
        @Html.HiddenFor(model => model.Product.Naam)
        <div class="editor-label">Prijs</div>
        <div class="editor-field"> 
            @Html.TextBoxFor(model => model.Product.Prijs)
            @Html.ValidationMessageFor(model => model.Product.Prijs)</div>
        <div class="editor-label">Maat</div>
        <div class="editor-field"> 
            @Html.TextBoxFor(model => model.Product.Maat)
            @Html.ValidationMessageFor(model => model.Product.Maat)</div>
        <div class="editor-label">Merk</div>
        <div class="editor-field"> 
            @Html.TextBoxFor(model => model.Product.Merk)
            @Html.ValidationMessageFor(model => model.Product.Merk)</div>
        <div class="editor-label">Type</div>
        <div class="editor-field"> 
            @Html.TextBoxFor(model => model.Product.Type)
            @Html.ValidationMessageFor(model => model.Product.Type)</div>
        <div class="editor-field">
            @Html.DropDownListFor(model => model.SelectedID, Model.Categorien)
        </div>
        <div class="editor-label">URL Foto</div>
        <div class="editor-field"> 
            @Html.TextBoxFor(model => model.Product.Afbeelding)
            @Html.ValidationMessageFor(model => model.Product.Afbeelding)</div>
        <input type="submit" value="Wijzig" />
    </fieldset>
} 
```

控制器：

```
 public ActionResult ProductWijzig(int productid)
    {
        ProductViewModel viewModel = new ProductViewModel();
        Product product = ProductdataController.GetProduct(productid);
        List<Categorie> catas = ProductdataController.HaalCategorienOp();
        viewModel.Categorien = new SelectList(catas, "Categorie_id", "Naam");
        viewModel.Product = product;
        return View(viewModel);
    } 
```

视图模型：

```
namespace WebshopProjectBlokC.ViewModels
{
   public class ProductViewModel
   {
       public Product Product { get; set; }
       public Categorie Categorie { get; set; }
       public SelectList Categorien { get; set; }
       public int SelectedID { get; set; }
   } 
```

}

HaalCategorienOp 方法；

```
 public List<Categorie> HaalCategorienOp()
    {
        List<Categorie> categorien = new List<Categorie>();
        try
        {
            conn.Open();

            string selecteer = "select * from categorie";
            MySqlCommand command = new MySqlCommand(selecteer, conn);
            MySqlDataReader dataReader = command.ExecuteReader();

            while (dataReader.Read())
            {
                Categorie categorie = HaalCategorieUitReader(dataReader);
                categorien.Add(categorie);
            }
        }
        catch (Exception e)
        {
            Console.Write("Ophalen van categorien mislukt " + e);
            throw e;
        }
        finally
        {
            conn.Close();
        }

        return categorien;
    } 
```

HaalCategorieUitReader 方法；

```
 protected Categorie HaalCategorieUitReader(MySqlDataReader datareader)
    {
        if (!datareader.IsDBNull(0))
        {
            categorie_id = datareader.GetInt32("categorie_id");
        }
        if (!datareader.IsDBNull(1))
        {
            categorienaam = datareader.GetString("naam");
        }
        if (!datareader.IsDBNull(2))
        {
            hoofdcategorie = datareader.GetInt32("hoofdcategorie");
        }

        Categorie categorie = new Categorie{ Categorie_id = categorie_id, Hoofdcategorie = hoofdcategorie, Naam = categorienaam};

        return categorie;
    } 
```

# jquery - 使用 jQuery，如果我们附加一个脚本元素，为什么文件的 URL 会加上 ?_=timestamp？

> ID：16057546
> 
> 赞同：2
> 
> 时间：2013-04-17T10:22:03.913
> 
> 标签：jquery

假设我们去任何有 jQuery 的网站（例如[http://www.jquery.com](http://www.jquery.com)），然后在调试控制台中，我们使用

```
jQuery("body").append("<script src='http://code.jquery.com/jquery-1.9.1.js'></script>"); 
```

在 Chrome 或 Firefox 中，我在“网络”选项卡中看到它在文件中拉取：

```
http://code.jquery.com/jquery-1.9.1.js?_=1366193092174 
```

所以看起来它正在拉入文件，并在末尾添加了 UNIX 时间戳。我尝试拉入一个 can.js 文件：

```
jQuery("body").append("<script src='http://canjs.com/release/latest/can.jquery.js'></script>"); 
```

它是一样的，所以它不应该是服务器的东西（我使用 Charles Proxy 进行检查，一开始似乎没有 HTTP 重定向）。

然后我用了 2 个空白页，一个是使用 jQuery 开发者版本，另一个是使用`.min`生产版本，看看生产版本是否不会添加该`?_=1366193092174`部分，但他们都添加了它。jQuery 的 append() 文档没有提到任何时间戳或`_=`页面上的任何一个。实际发生了什么，如果出于某种原因，我不想`?_=1366193092174`添加该部分，有什么办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T10:41:48.947

我认为这是作为浏览器的缓存问题，当调用脚本链接时，它会看到有新参数要发送到这个 url，所以为了防止每次调用这个脚本，你需要删除这个问题，直到浏览器先缓存你的脚本时间 ：

```
$.ajaxSetup({
    // Enable caching of AJAX responses
    cache: true
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T10:32:01.760

时间戳被添加到 url 的末尾，因为 jQuery 设置`cache: false`了`script`将时间戳附加到 URL 的调用。而不是`append()`，您可以使用：

```
$.ajax({
  url: "http://code.jquery.com/jquery-1.9.1.js",
  dataType: "script",
  cache: true,
  success: function(){
    // ....
  }
}); 
```

# java - HowTo-线程停止

> ID：16057548
> 
> 赞同：0
> 
> 时间：2013-04-17T10:22:15.003
> 
> 标签：java, multithreading, interrupt

只是一个小问题，我想stiop以下线程，但我不知道我应该怎么做。请帮我。谷歌的帮助这次没有用。

```
new Thread(){
    public void run() {
        while(!isInterrupted()){
            try {
                if (sock1!=null){
                    sock1.setTcpNoDelay(true);
                    if (btsar1.length > 0) {
                        dos1 = new DataOutputStream(sock1.getOutputStream());
                        bwrtr1 = new BufferedWriter(new OutputStreamWriter(
                                dos1), 300);
                        dos1.write(btsar1);
                            set1free = false;
                    Log.e("Communication", "written(1.1)");
                        Reader1.reader(4);}
                    }} catch (IOException e) {
                    e.printStackTrace();
                }catch (NullPointerException e2){
                    e2.printStackTrace();
                }
            }
}}.start();
//.interrupt(); <-- or kinda that... 
```

有人可以提供一个好的工作来阻止这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:26:03.993

您只需要引用您的线程：

```
Thread t = new Thread(...); 
```

然后你可以打断它：

```
t.interrupt(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T10:28:08.823

```
Thread t = new Thread(){
      ... // content unchanged
};
t.start();
.....
t.interrupt(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T10:24:23.773

终止线程的最佳方法是让它完成。因此，在您的 , 中添加一个布尔标志`while`，并让方法（或以其他方式）公开它，以便将其设置为 false。然后你的线程会在交互完成后自然退出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T10:26:38.103

一个想法：**停止使用匿名线程**！

每当您发现自己的线程正在做一些复杂的事情时，要么创建一个单独的类来扩展线程，该类可用于控制和监视行为，要么使用抽象的 Future 和 ThreadPool 来完成工作。

如果您继续使用这样的线程，您将拥有极其不可维护和不可扩展的代码。

**如何优雅地停止线程？**

```
bool keepWorking = true;

while(keepWorking) {
  // keep working
}

synchronized void stopWork() {
  keepWorking = false;
}

// in other thread
threadObj.stopWork(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T11:02:28.333

***`Thread.interrupt`***方法是停止一个等待很长时间的线程（例如，输入）

看看这篇文章 -**[如何停止线程或任务](http://www.forward.com.au/javaProgramming/HowToStopAThread.html)**

例子

* * *

```
public void stop() {
            Thread moribund = waiter;
            waiter = null;
            moribund.interrupt();
        } 
```

* * *

# android - SecurityException：权限被拒绝。从未从 uid 10027 导出的 xxx 打开提供程序 xxx

> ID：16057558
> 
> 赞同：3
> 
> 时间：2013-04-17T10:22:57.517
> 
> 标签：android, android-contentprovider

我有一个项目 A 作为库 jar 文件，其中包含一个 ContentProvider。然后我需要在项目 B 中使用它。正如 Manifest 中所声明的：

```
 <provider
        android:authorities="com.gezbox.android.onepiece"
        android:exported="true"
        android:name="com.gezbox.android.api.provider.GezboxProvider"/> 
```

但是问题来了：

```
 04-17 17:55:50.695: WARN/dalvikvm(5527): threadid=13: thread exiting with uncaught exception (group=0x40def300)
04-17 17:55:50.695: WARN/ActivityManager(258): Permission denied: checkComponentPermission() owningUid=10027
04-17 17:55:50.695: WARN/ActivityManager(258): Permission denied: checkComponentPermission() owningUid=10027
04-17 17:55:50.695: WARN/ActivityManager(258): Permission Denial: opening provider com.gezbox.android.api.provider.GezboxProvider from ProcessRecord{415d5e08 5527:com.gezbox.android.onepiece/u0a31} (pid=5527, uid=10031) that is not exported from uid 10027
04-17 17:55:50.711: ERROR/AndroidRuntime(5527): FATAL EXCEPTION: IntentService[GezboxService]
        java.lang.SecurityException: Permission Denial: opening provider com.gezbox.android.api.provider.GezboxProvider from ProcessRecord{415d5e08 5527:com.gezbox.android.onepiece/u0a31} (pid=5527, uid=10031) that is not exported from uid 10027

        at android.os.Parcel.readException(Parcel.java:1425)
        at android.os.Parcel.readException(Parcel.java:1379)
        at android.app.ActivityManagerProxy.getContentProvider(ActivityManagerNative.java:2354)
        at android.app.ActivityThread.acquireProvider(ActivityThread.java:4219)
        at android.app.ContextImpl$ApplicationContentResolver.acquireProvider(ContextImpl.java:1688)
        at android.content.ContentResolver.acquireProvider(ContentResolver.java:1083)
        at android.content.ContentResolver.acquireContentProviderClient(ContentResolver.java:1146)
        at android.content.ContentResolver.applyBatch(ContentResolver.java:896)
        at com.gezbox.android.api.processor.PostOrderProcessor.updateContentProvider(PostOrderProcessor.java:57)
        at com.gezbox.android.api.processor.PostOrderProcessor.post_order(PostOrderProcessor.java:33)
        at com.gezbox.android.api.GezboxService.onHandleIntent(GezboxService.java:196)
        at android.app.IntentService$ServiceHandler.handleMessage(IntentService.java:65)
        at android.os.Handler.dispatchMessage(Handler.java:99)
        at android.os.Looper.loop(Looper.java:137)
        at android.os.HandlerThread.run(HandlerThread.java:60) 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-06-21T02:55:48.447

问题解决了。我更改了项目 B 中提供者的提供者 uri。

是的，我太垃圾了...

库项目是由另一个人编写的，每次在我编译项目之前，我都需要手动更改 uri 以使其适合正确的路径。

# javascript - 没有共同启动关系的 Chrome 窗口定位

> ID：16057560
> 
> 赞同：1
> 
> 时间：2013-04-17T10:22:59.697
> 
> 标签：javascript, google-chrome, dom, frames

我正在做一个应用程序，其中一个窗口需要与另一个窗口对话，即使它们最初不是来自一个公共页面。Chrome 中似乎有这样的要求。

这两个窗口*来自*我控制的同一个域，但一个可能从书签启动，另一个可能从 Excel 工作表启动。

我在这里有一个演示：

[http://cfpreview12.dmclub.net/Frametest/europe.htm](http://cfpreview12.dmclub.net/Frametest/europe.htm)

转到该 URL（使用 Chrome） - 启动法国 - 启动德国 - 单击“前往巴黎”，它可以工作（因为法国和德国有一个共同的推荐人）。

现在复制法国选项卡的 URL，关闭选项卡， *手动*创建一个新选项卡并粘贴回 URL。

然后，当您返回德国并单击“前往巴黎”时，会创建一个新选项卡，这似乎是因为 Chrome 没有看到没有共享遗产的窗口之间的关系。

我可以完全控制这两个页面（法国和德国），但在实际使用中，没有欧洲这样的东西。

关于解决方法的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:37:32.877

您将无法`target`直接使用；您必须在每个上下文中从 JavaScript 进行导航，从每个不同窗口中的脚本在彼此之间发送消息。

好的，那么当它们没有对 a 的共享引用时，我们如何让不同窗口（但相同域）中的脚本进行通信`window`？

1.  老式的方式，写入值`document.cookie`，它们将对同一域中其他窗口上的脚本可见。在轮询 cookie 更改、确认接收/删除和编码长消息（因为 cookie 长度是有限的）时需要一些烦人的协议开销。

2.  在可用的情况下使用而不是使用 cookie 的同一事物的稍微更好的版本`localStorage`- 避免污染 cookie 标头并增加可以进入单个消息的数据长度。

3.  现代方式 - 创建一个[SharedWorker](http://www.w3.org/TR/workers/#shared-workers-introduction)并从每个窗口与其通信。不幸的是，目前的可用性[有限。](http://caniuse.com/sharedworkers)

您当然可以根据需要从 (3) 退回到 (2) 到 (1)。

# ios - UIBarButtonItem UINavigationBar 中的自定义视图

> ID：16057567
> 
> 赞同：20
> 
> 时间：2013-04-17T10:23:25.977
> 
> 标签：ios, objective-c, uinavigationbar, uibarbuttonitem

我正在为 uinavigationbar 制作自定义栏按钮，我正在使用以下代码

```
 UIImageView *backImgView= [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"chk_back.png"]]; [backImgView setUserInteractionEnabled:YES];
UIBarButtonItem *backButton = [[UIBarButtonItem alloc] initWithCustomView:backImgView];
[backButton setTarget:self];
[backButton setAction:@selector(BackBtn)];
checkIn_NavBar.topItem.leftBarButtonItem = backButton; 
```

问题是它没有采取行动。我做错了什么？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-04-17T12:20:27.203

**来自 Apple 文档：**
使用指定的自定义视图初始化新项目。

```
- (id)initWithCustomView:(UIView *)customView 
```

参数 customView 表示项目的自定义视图。返回值 具有指定属性的新初始化项。

讨论： **此方法创建的条形按钮项不会调用其目标的操作方法来响应用户交互。相反，条形按钮项期望指定的自定义视图来处理任何用户交互并提供适当的响应。**

解决方案：“使用您的背景图像创建按钮（为此按钮设置操作）并使用此按钮初始化栏按钮”。例如：

```
UIButton *btn =  [UIButton buttonWithType:UIButtonTypeCustom];
btn.frame = CGRectMake(0,0,25,25)
[btn setBackgroundImage:[UIImage imageNamed:@"chk_back.png"] forState:UIControlStateNormal];
[btn addTarget:self action:@selector(BackBtn) forControlEvents:UIControlEventTouchUpInside];
UIBarButtonItem *barBtn = [[UIBarButtonItem alloc] initWithCustomView:btn]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T11:04:44.773

我使用以下代码完成了此操作：

```
UIButton *nxtBtn =  [UIButton buttonWithType:UIButtonTypeCustom];
[nxtBtn setImage:[UIImage imageNamed:@"chk_next.png"] forState:UIControlStateNormal];
[nxtBtn addTarget:self action:@selector(NextBtn) forControlEvents:UIControlEventTouchUpInside];
[nxtBtn setFrame:CGRectMake(0, 0, 64, 31)];
UIBarButtonItem *nextButton = [[UIBarButtonItem alloc] initWithCustomView:nxtBtn];

checkIn_NavBar.topItem.rightBarButtonItem=nextButton; 
```

# php - Twitter Bootstrap 文件上传问题

> ID：16057582
> 
> 赞同：0
> 
> 时间：2013-04-17T10:24:27.950
> 
> 标签：php, javascript, html, twitter-bootstrap

我想使用[Twitter Boostrap FileUpload](http://jasny.github.io/bootstrap/javascript.html#inputmask)，因为我喜欢它提供的预览功能。这个和一些我想发布到一个 php 脚本的文本，该脚本执行上传并将信息添加到数据库。如果javascript可以做到，我不一定需要php来上传文件，我也只需要链接。

[以前有人问过这个问题，但我在那里](https://stackoverflow.com/questions/12372612/twitter-boostrap-fileupload)找不到任何有效的答案。不，我不想使用第一个答案中建议的引导文件上传。

在我的 php 代码中，我尝试使用 _FILE 获取 imgData，但它是空的。我怎样才能得到这个？

这是我的表格：

```
 <form action="php/service.php" method="post">
      <div class="control-group">
        <div class="fileupload fileupload-new" data-provides="fileupload">
            <div class="fileupload-preview thumbnail" style="width: 200px; height: 150px;"></div>
            <div>
                <span class="btn btn-file">
                    <span class="fileupload-new">Select image</span>
                    <span class="fileupload-exists">Change</span>
                    <input type="file" name="imgData" id="imgData" />
                </span>
                <a href="#" class="btn fileupload-exists" data-dismiss="fileupload">Remove</a>
            </div>
        </div>
    </div>
    <div class="control-group">
        <textarea rows="3" id="text" class="" name="text" placeholder="Text..."></textarea>
    </div>
    <div class="control-group">
        <button type="submit" id="upload" class="btn" onclick="$('.fileupload').fileupload();">Upload</button>
    </div>
    </form> 
```

在 service.php 中：

```
if ($_FILES["imgData"]["error"] > 0) {
    echo "Error: " . $_FILES["imgData"]["error"] . "<br />";
} else {
    $fileExt = $_FILES["imgData"]["type"];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:27:14.130

您需要为表单设置编码类型。

```
<form action="php/service.php" method="post" enctype="multipart/form-data"> 
```

我在 IE 中上传文件的这种引导方式也遇到了困难。可能存在一些安全问题，阻止上传。

# javascript - 从循环中的方法返回变量

> ID：16057583
> 
> 赞同：0
> 
> 时间：2013-04-17T10:24:30.117
> 
> 标签：javascript, node.js, mongodb, node-mongodb-native

像这样的东西

```
var joined = function(arr) {
    var res = [];
    for (var i in arr) {
        var u = DB.getUser(arr[i].user_id, function(user) {
            return user;
        });
        arr[i].user = u;
        res = arr[i];
    }

    return res;
} 
```

我需要从 DB.getUser 范围获取用户变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:36:20.483

```
var getJoinedAndDoSomeThingWithThem = function(ids) {
var joined = [];
var i = 0;

var getAUser = function () {
    DB.getUser(ids[i].user_id, function(user) {
        joined.push(user);
        i++;
        if (i == ids.length -1) {
            doSomeThingWithTheResult(joined);
            return;
        }
        getAUser();
    });
}
getAUser();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:36:45.720

只是在您的代码中插入了一些注释以帮助理解异步流程：

```
var joined = function(arr) {
    // Timestamp: 0
    var res = [];
    for (var i in arr) {
        // Timestamp: 1
        var u = DB.getUser(arr[i].user_id, function(user) {
            // Timestamp 4 ... length of arr
            // user contains what you are looking for
            // but this is not return to u, because we passed that a long time ago
            return user;
        });
        // u is null or undefined, because DB.getUser returns nothing
        // is a async function, you need wait for the callback
        arr[i].user = u;
        // Timestamp: 2 return useless arr
        res = arr[i];
    }
    // Timestamp: 3 again, return a useless array
    return res;
} 
```

**编辑：**

在将所有内容传递给模板之前，您需要这样做，例如：

```
var joined = function(arr, doneCallback) {
    var res = []
    var count = arr.length;
    for (var i in arr) {
        DB.getUser(arr[i].user_id, function(user) {
            count--;
            res.push(user);
            if (count == 0) {
                doneCallback(res);
            }
        })
    }
}

joined(somedata, function(mydata) {
    render(template, mydata)
}); 
```

看看一些流控制库。（我最喜欢的[异步](https://github.com/caolan/async)）

# jquery - 检索 div 的位置，不包括具有类名的特定 div

> ID：16057585
> 
> 赞同：0
> 
> 时间：2013-04-17T10:24:38.410
> 
> 标签：jquery

```
<div class="center">
    <div id="ContentTop" class="tt1">Top Content</div>
    <div id="abc" class="hide">exrt</div>
    <div id="bcd" class="hide">Content exta</div>
    <div id="MidContent" class="tcg">Mid Content</div>
    <div id="dcd" class="hide">Extra Content</div>
    <div id="asd" class="hide">Extra Content</div>
    <div id="ContentBtm" class="hide">Bottom Content</div>
</div> 
```

我需要的输出是 ContentTop、MidContent 和 ContentBtm 类的 div 的 indexOf。

例如，如果我单击 div MidContent，我需要的输出是位置 2，因为它不包含类 hide。

对于不包含类名“隐藏”的 div，我需要 div 的计数为 1,2 和 3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:28:14.830

试试这个选择器会给你所有没有隐藏类的潜水元素

对于点击事件，您可以这样做

```
$('.center').click(function(e)
{
   var id =  e.target.id;
   $(".center").children(":not(div.hide)").each(function(index){
         if($(this).attr("id") ==  id)
            alert(index);
     });
}
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T11:27:29.477

尝试这个：

```
$(document).ready(function(){
    /*get all divs inside center which are not hidden*/
    $(".center").children().not(".hide").each(function(i,e){
      /* If any one of them is clicked, show their index inside center */
      $(this).on("click", function(event){
        alert("I am div number" + (i+1));
      });
    });
}); 
```

这是 jsfiddle： http: [//jsfiddle.net/XtPtq/](http://jsfiddle.net/XtPtq/)使用您的 html 显示此代码的实现

# node.js - 太多的mongod进程

> ID：16057587
> 
> 赞同：3
> 
> 时间：2013-04-17T10:24:43.827
> 
> 标签：node.js, mongodb

我们有运行 3 个不同 node.js 应用程序的测试服务器。每个应用程序都使用相同的 MongoDB 数据库测试实例，该测试实例也在同一台服务器上运行。因此，在任何给定的时刻，我们最多有 3 个不同的开放连接到 mongodb 服务器。

问题是，在每次代码部署（基本上是：杀死当前正在运行的进程、代码更新和启动新进程）之后，我在服务器上看到了新进程（单个进程的线程），它在 htop 中显示为`/usr/bin/mongod --config /etc/mongodb.conf`. 因此，有时我们必须重新启动测试服务器，因为这样的未使用线程太多了，这使得 mongod 进程占用了所有 RAM。

我不确定为什么会发生这种情况并正在寻找解决此问题的解决方案。

我的假设是，如果我们简单地终止 node.js 进程，则连接（以及因此与此连接相关的线程）以某种方式保持活动状态，因此我们应该通过关闭数据库连接优雅地关闭它，而不是终止 nodejs 进程。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T14:37:51.880

htop 还显示了不同的线程，您的 mongod 没有多次启动，这对于相同的配置是不可能的，因为该端口已经在使用中。

使用 top 或 ps aux | grep mongod 你应该只看到一个进程。

您还可以将 htop 配置为不显示这些，按 F2 > 显示选项 > 隐藏用户态线程。

# shell - 即使输出相同，是什么导致相同命令的退出状态发生变化？

> ID：16057588
> 
> 赞同：0
> 
> 时间：2013-04-17T10:24:48.063
> 
> 标签：shell, ksh, exit-code

在下面的代码中，我试图检查`if`条件内的命令是否成功完成以及数据是否已推送到目标文件 temp.txt。

**考虑：**

```
#!/usr/bin/ksh

A=4
B=1

$(tail -n $(( $A - $B )) sample.txt > temp.txt)
echo "1\. Exit status:"$?

if [[ $( tail -n $(( $A - $B )) sample.txt > temp.txt ) ]]; then
    echo "2\. Exit status:"$?
    echo "Command completed successfully"
else
    echo "3\. Exit status:"$?
    echo "Command was unsuccessfully"
fi 
```

**输出：**

```
$ sh sample.sh
1\. Exit status:0
3\. Exit status:1 
```

现在我不明白为什么上面的退出状态会发生变化..当尾命令的两个实例的输出相同时。我在哪里错了..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T11:53:37.423

在第一种情况下，您将获得对`tail`命令的调用的退出状态（您生成的[子shell](http://tldp.org/LDP/abs/html/subshells.html#SUBSHELLSREF)`$()`保留了最后的退出状态）

在第二种情况下，您将获得对`[[ ]]`Bash 内置调用的退出状态。但这实际上是在测试你的命令的**输出**`tail`，这是一个完全不同的操作。并且由于该输出为**空**，因此测试失败。

考虑 ：

```
$ [[ "" ]]           # Testing an empty string
$ echo $?            # exit status 1, because empty strings are considered equivalent to FALSE
1
$ echo               # Empty output

$ echo $?            # exit status 0, the echo command executed without errors
0
$ [[ $(echo) ]]      # Testing the output of the echo command
$ echo $?            # exit status 1, just like the first example.
1
$ echo foo
foo
$ echo $?            # No errors here either
0
$ [[ $(echo foo) ]]
$ echo $?            # Exit status 0, but this is **NOT** the exit status of the echo command.
0 
```

# c++ - 嵌入 GDB 断点

> ID：16057589
> 
> 赞同：1
> 
> 时间：2013-04-17T10:24:51.767
> 
> 标签：c++, debugging, gdb

我正在编写一个通过抛出异常从错误中恢复的应用程序。

但是，在调试时，我希望调试器在引发异常之前停止在错误点。无论如何添加一些代码会导致GDB用一些代码中断执行。

我对 ARM 和 x86 架构都感兴趣，一些跨平台的东西会很有用。

编辑：我正在寻找一些断点指令或包装一个的宏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T10:36:31.370

您可以在代码中添加“断点指令”。如果没有附加调试器，我所知道的大多数操作系统都会忽略断点。

这取决于编译器和处理器，您为此使用什么指令，但在大多数编译器中都有一个“内在”或“内置”函数，例如`DebugBreak();`MS 编译器和`__builtin_trap();`gcc 及相关函数。

编辑：`__builtin_trap();`是个坏主意，因为它会阻止代码进一步运行。相反，使用内联汇编器：

```
inline void DebugBreak()
{
#if defined(X86)
    __asm__ __volatile__("int 3");
#elif defined(ARM)
    __asm__ __volatile__("bkpt"); 
#else
  #error DebugBreak not defined for this architecture or no architecture defined.
#endif
} 
```

应该适用于 x86 和 arm - 您可能希望为架构选择宏使用“更好”的名称 - 我对不同的架构做的工作不多，所以我没有准确记住官方名称是什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T10:32:40.050

设置这个：

```
catch throw 
```

应该给你你所追求的。

请参阅[用户手册](http://sourceware.org/gdb/current/onlinedocs/gdb/)的[这一部分](http://sourceware.org/gdb/current/onlinedocs/gdb/Set-Catchpoints.html#Set-Catchpoints)。

# hbase - 在 hbase 中按行键查询值的最快方法

> ID：16057590
> 
> 赞同：0
> 
> 时间：2013-04-17T10:24:54.530
> 
> 标签：hbase

查询hbase中行键在rowKeys中的行的更快方法？

rowKeys 是一个数组，如：

```
rowKeys=[1,2,4,5,6,34,223,113] 
```

*（如sql中的）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:48:30.717

在 Java 中，您可以将`IN`子句构建为[RowFilter的](http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/filter/RowFilter.html)[FilterList](http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/filter/FilterList.html) - 带有标志。`MUST_PASS_ONE`

[请参见此处](https://stackoverflow.com/questions/10971955/query-hbase-table-by-key-using-rowfilter-not-working)的示例。

# android - 如何销毁布局？

> ID：16057594
> 
> 赞同：0
> 
> 时间：2013-04-17T10:24:59.673
> 
> 标签：android, android-layout

我正在开发一个`LayoutInflator`用于生成新布局的 Android 应用程序。该应用程序的基本功能是 - 它有一个图像视图。当我单击一个按钮时，我会更改布局以显示多个 ImageView（如 2x2 或 4x4）。我使用 LayoutInflator 成功地显示了这些布局。但是，以前的 Layout 保持不变，新的 Layout 显示*在*旧的 Layout 上，这有点弄乱了整个布局。我的问题是 - 在显示新布局之前是否有破坏旧布局？

编辑：

这是代码（关于我正在使用的 onClick 事件）

```
public void oneby1onClick(View view){
    RelativeLayout main = (RelativeLayout)findViewById(R.id.main_layout);
    view = getLayoutInflater().inflate(R.layout.activity_main, main,false);
    main.removeView(main);
    main.addView(view);
}

public void twoby2onClick(View view){
    RelativeLayout main = (RelativeLayout)findViewById(R.id.main_layout);
    view = getLayoutInflater().inflate(R.layout.twoby2, main,false);
    main.removeView(main);
    main.addView(view);
}

public void fourby4onClick(View view){
    RelativeLayout main = (RelativeLayout)findViewById(R.id.main_layout);
    view = getLayoutInflater().inflate(R.layout.fourby4, main,false);
    main.removeView(main);
    main.addView(view);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:30:26.587

如果是这样的话，也许你可以让你的布局不可见。这可以很容易地以编程方式完成：

```
layout.setVisibility(View.GONE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:09:47.537

根据@ookami.kb 的建议，我应该使用`main.removeAllViews();`而不是`main.removeView(main);`，这对我有帮助。

# java - 使用 Google Cloud Storage 的文档管理系统

> ID：16057601
> 
> 赞同：3
> 
> 时间：2013-04-17T10:25:17.703
> 
> 标签：java, google-app-engine, google-drive-api, google-cloud-storage, document-management

我目前正在研究 Google App Engine 的不同方面，仍处于研究阶段并构建一些小应用程序并将其部署在云上。最近，当我为云存储（即 gsUtil）安装命令行时，我遇到了对云存储的版本控制支持，并且能够通过 gsUtil 检索旧对象或删除的对象。所以在 GAE 上构建文档管理系统是使用谷歌云存储的好主意，还是我应该使用谷歌驱动 SDK？

请指导我解决这个问题。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T11:19:50.243

完全不同的产品适用于完全不同的用例。

谷歌云存储是云上的存储，没有更多的抽象。如果你想从头开始构建一个文档管理系统，你可以更喜欢它作为存储提供者。

如果您在 Google Drive 上构建应用程序，您将继承文件系统抽象、用户管理、权限模型等。但您不拥有用户，也不拥有他们的驱动器。此外，Drive 的配额管理针对“每个用户”的使用情况进行了微调。大多数人认为创建一个单一的云端硬盘帐户并在应用程序级别在用户之间进行逻辑共享是可行的。由于配额限制，它不太可能扩展。

# php - SOAP 未在 PHP 中获取 Mouzenidis 旅行的结果

> ID：16057603
> 
> 赞同：2
> 
> 时间：2013-04-17T10:25:21.667
> 
> 标签：php, soap

我尝试从[http://api.mouzenidis-travel.com/search/ServiceMainSearch.svc?Wsdl获取结果](http://api.mouzenidis-travel.com/search/ServiceMainSearch.svc?Wsdl)

有一些获取数据的方法：

1.  GetCountries // 获取可用的国家数据
2.  GetCityDeparture(int countryID) //获取可用的出发城市数据
3.  GetFilter(int countryId, List leaveCityId) // 获取其他过滤器

* * *

// 我的 PHP 代码：

$client = new SoapClient(" [http://api.mouzenidis-travel.com/search/ServiceMainSearch.svc?Wsdl](http://api.mouzenidis-travel.com/search/ServiceMainSearch.svc?Wsdl) ");

$countryList = $client->GetCountries(); //下面的结果

```
[0] => stdClass Object
    (
        [Code] => GR
        [ID] => 29
        [Name] => Ð“Ñ€ÐµÑ†Ð¸Ñ
        [NameLat] => Greece
    )

[1] => stdClass Object
    (
        [Code] => CZ
        [ID] => 6240
        [Name] => Ð§ÐµÑ…Ð¸Ñ
        [NameLat] => Czech Republic
    ) 
```

$cityDepObj = $client->GetCityDeparture(array('countryID'=>29));

```
[0] => stdClass Object
(
    [Code] => MOW
    [GroupName] => Ð Ð¾ÑÑÐ¸Ñ
    [GroupNameLat] => Ð Ð¾ÑÑÐ¸Ñ
    [GroupOrder] => 4
    [ID] => 1
    [Name] =>  ÐœÐ¾ÑÐºÐ²Ð°
    [NameLat] => Moscow
    [CountryID] => 460
    [IsDeparture] => 1
    [RegionID] => 0
)

[1] => stdClass Object
(
    [Code] => 
    [GroupName] => Ð Ð¾ÑÑÐ¸Ñ
    [GroupNameLat] => Ð Ð¾ÑÑÐ¸Ñ
    [GroupOrder] => 4
    [ID] => 299
    [Name] => ÐÑ€Ñ…Ð°Ð½Ð³ÐµÐ»ÑŒÑÐº
    [NameLat] => Arkhangelsk
    [CountryID] => 460
    [IsDeparture] => 1
    [RegionID] => 0
) 
```

. . .

$client->GetFilter(array(29,array(1)));

```
Fatal error: Uncaught SoapFault exception: [s:Client] No connections available ... 
```

* * *

我写信给 Mouzendinis 技术支持，没有结果。

是什么让我错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-03T09:20:57.567

在 C# 中，此方法需要字段“Country” `int`，而不是 int 数组。此外，其他字段必须初始化为空数组或`null`. 最后一个字段是导致过滤器更新的字典。例如：如果您更改了出发城市，您应该将该字段设置为`DictionaryEnum.CityDeparture`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-28T06:15:22.670

您能否查看他们的 API 文档并检查传递给 GetFilter 方法所需的参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-28T09:42:52.883

正如你所做`$client->GetCityDeparture(array('countryID'=>29));`的那样，你试过了`$client->GetFilter(array('countryId'=>29,'departureCityId'=>array(1)));`吗？

否则，请尝试使用 wsdl 到 php 生成器，这将简化您的请求构建和处理响应

# java - 提交的编译错误 - UVA

> ID：16057608
> 
> 赞同：0
> 
> 时间：2013-04-17T10:25:38.207
> 
> 标签：java

[我为UVA-Problem 100](http://uva.onlinejudge.org/index.php?option=com_onlinejudge&Itemid=8&page=show_problem&problem=36)编写了这段代码 ，它在 IDE 中工作得很好，但是提交时我得到了这个编译错误：

> Main.java:5: 类 UVA100 是公共的，应该在一个名为 UVA100.java 的文件中声明 public class UVA100 { ^ 1 错误

我是java编程的新手，我不知道以uva接受的格式发送此代码。

```
import java.util.Scanner;

public class UVA100 {

    public static void main(String[] args) {
        int a, b, cnt, MAX, MIN, MaxCycle = 1;

        Scanner input = new Scanner(System.in);

        while(input.hasNextInt()){            

        a = input.nextInt();
        b = input.nextInt();

        MAX = Math.max(a, b);
        MIN = Math.min(a, b);

        for (int i = MIN; i <= MAX; i++) {
            cnt=CalculateCycle(i);
            if(cnt>MaxCycle)
                MaxCycle=cnt;
        }

        System.out.print(a + " " + b + " " + MaxCycle);
        }
    }

    public static int CalculateCycle(int n) {
        int count = 1;
        while (n > 1) {
            if (n % 2 == 0) {
                n = n / 2;
            } else {
                n = n * 3 + 1;
            }
            count++;
        }
        return count;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-02T13:54:56.900

我找到了答案：[UVa 中的课程不得公开](http://uva.onlinejudge.org/index.php?option=com_content&task=view&id=15&Itemid=30)；-)

> Java 规范：提交的 Java 程序必须在单个源代码（不是 .class）文件中。不过，您可以在此文件中添加任意数量的类。此文件中的所有类不得位于任何包中。
> 
> 所有程序都必须从 Main 类中的静态 main 方法开始。
> 
> 不要使用公共类：即使 Main 也必须是非公共的，以避免编译错误。
> 
> 使用缓冲 I/O 以避免由于过度刷新而超出时间限制。
> 
> 作为参考，我们提供了一个[示例 Java 代码](http://uva.onlinejudge.org/data/p100.java.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:27:46.233

应在以类名命名的文件中声明 java 类，无论它是否包含 main() 方法。

所以，你的班级应该被称为“UVA100.java”（因为你的班级被命名为UVA100）。

这是一个 javac（java 编译器）错误，在哪个 IDE 中起作用？

不想混淆这个问题（正如您所说的那样，您是新手），可以在 java 类中声明“内部类”，但类文件仍应以顶级类命名。

**更新**：在 OP 响应之后：

我想没有看到整个 Main.java 文件，很难进一步评论。但是，我猜您的课程包含两个顶级课程，如下所示：

```
public class Main {  //Top-level class Main
    ...
} 
public class UVA100 { //Top-level class UVA100 - not an inner class!
    ...
} 
```

一般规则是文件名应该与文件中*的*顶级类相同。也就是说，每个文件只有一个*顶级*类，并以它命名文件。遵循这条规则，你就不会出错（尽管我已经检查过[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html)，但它实际上并不在那里，这令人惊讶）。请注意，您通常在日常开发中的文件中只有一个顶级类（在我看来）。

如果您愿意，可以进一步了解其中的复杂性：

*   您必须只有一个顶级*公共*课程；
*   你可以有多个顶级*包私有*类；
*   您的顶级课程不能是私有的（如果没有人可以使用它有什么意义）；
*   它也不能被保护（只暴露给子类没有什么意义）。

确认使用：java HotSpot 版本“1.7.0_11”（64 位）

我警告所有这一切，因为它可能是编译器特定的细节，因为它没有在 JLS 中描述。

# sql - 高流量的有效数据库结构

> ID：16057609
> 
> 赞同：0
> 
> 时间：2013-04-17T10:25:57.453
> 
> 标签：sql, database

我们正在考虑重组我们的数据库。我们目前列出了大约 60,000 艘船在几个月内跟踪每艘船的浏览量，这会在每个船的网页浏览量上更新。当前的数据库是这样的；

```
BoatID   Year   Month    Views
1554     2013   2        124
1554     2013   3        1542 
```

我们希望每天以这种结构存储信息（见下文）这会对数据库造成压力吗？（一年内我们将至少有 60,000 x 365 = 21,360,000 行）

```
BoatID   Date         Views
1554     01/02/2013   20
1554     02/02/2013   142 
```

关于我们的网站 - 我们每月收到大约 6,000,000 到 7,000,000 次页面浏览量。我们有一个运行 sql2008 的专用数据库服务器 - 四核 2.2 x 2, 24gb ram。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:41:58.000

您现有结构的问题在于您仅限于为每艘船提供高级别的视图概览。您只能显示基于月/年的视图。如果您想深入研究数据以查看哪些日子有更多的浏览量或活动，那么您做不到。

第二种结构在报告、日期比较等方面为您提供了更大的灵活性。

至于查询的性能，您将需要使用执行计划和查询调优来确定查询的执行方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:42:30.913

新设计看起来不错。

如果我计算正确，您（平均）每秒收到少于 1 个请求。即使我们加倍（有些人在晚上睡觉），也就是每秒 2 个请求。

我有一种强烈的感觉，你提到的数据库服务器将能够处理它。

一些想法：

*   检查您的应用程序是否可以缓存视图命中并每次执行插入/更新，例如 10 个视图

*   确保正确索引表以最小化查询时间，更新行将花费很少的时间

*   如果您在夜间交通量低，您可以做一个每天为每艘船插入新条目的工作；对于索引严重的表，插入可能非常昂贵；这是一个想法，我没有测试或使用过它，曾经......

# css - 下拉列表中的搜索栏

> ID：16057617
> 
> 赞同：0
> 
> 时间：2013-04-17T10:26:33.090
> 
> 标签：css, search, drop-down-menu, toggle

我有一个 Wordpress 网站，对于移动版本，我在顶部有一个菜单栏，上面有一个包含类别的下拉列表。我也想添加搜索栏。

我有一个有效的下拉列表，底部包含搜索栏，但是当您单击搜索栏时，列表会返回。我想知道什么是最好的方法，或者有没有可能的方法，让它保持下来？

我在你点击的触摸移动设备上启用了一些 JavaScript，它是一个滑动切换。下面提供了所有相关代码：

HTML

```
<div id="nav-responsive">
  <div class="categories-responsive fssinclair_bold">
    <ul id="nav">
      <li><h3 class="fssinclair_bold"></h3>
        <ul>
          <?php wp_list_categories('&title_li=') ?>
        </ul>
        <div class="search-responsive">
          <form method="get" id="searchform" action="<?php echo home_url( '/' ); ?>">
            <div id="search-inputs">
              <input type="text" value="" name="s" id="search-box" placeholder="SEARCH" />
              <input type="hidden" name="ref_url" value="<?php esc_url($_SERVER['REQUEST_URI'])?>">
            </div>
          </form>
        </div>
      </li>     
    </ul>
  </div>
</div> 
```

用于在触摸设备上切换的 JavaScript：

```
$(document).ready(function () {
if( /Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent) ) {
   $('.categories-responsive').click(function(){
   $(this).find('ul#nav').find('ul').slideToggle();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:06:05.610

可行的解决方案是为这些元素创建一个单独的函数或使用 stopPropagation 以便子元素不会在点击事件时被触发。像这样的东西：

```
onclick="event.cancelBubble=true;if (event.stopPropagation) event.stopPropagation();" 
```

或者这个用于您的搜索字段

```
$("#searchform").click(function(event){ event.stopPropagation(); }); 
```

# javascript - 在 Kendo UI Grid Columns 上执行自定义算术运算

> ID：16057621
> 
> 赞同：1
> 
> 时间：2013-04-17T10:26:46.807
> 
> 标签：javascript, jquery, html, kendo-ui, kendo-grid

这对于普通用户来说可能非常简单，但作为一个新手，我有点难以执行
简单的算术运算，我想将其中一个列值（即（DealValue））乘以 0.05。我查看了剑道文档，但令人惊讶的是我找不到任何相关的东西。有人对此有任何解决方案吗？如果我运行此代码，我会在 DealValue 列的模板部分得到错误，导致网格不显示。

这是我的剑道网格列定义

```
 columns: [           
               {
                   field: "DealIssuer",
                   width: 150,
                   title: "Issuer",
                   filterable: {
                       operators: {
                           string: {
                               startswith: "Starts With",
                               contains: "Contains"
                           }
                       }
                   },

                   template:"<a>${DealIssuer}</a>"

               },
                  {
                      field: "Ticker",
                      width: 150,
                      title: "Ticker",
                      filterable: {
                          operators: {
                              string: {
                                  startswith: "Starts With",
                                  contains: "Contains"
                              }
                          }
                      }

                  },
                  {
                      field: "DealExchange",
                      width: 150,
                      title: "Exchange",
                      filterable: {
                          operators: {

                              string: {
                                  startswith: "Starts With",
                                  contains:"Contains"
                              }
                          }
                      }
                  },
                     {
                         field: "DealType",
                         width: 150,
                         title: "Type",
                         filterable: {
                             operators: {
                                 string: {
                                     startswith: "Starts With",
                                     contains: "Contains"
                                 }
                             }
                         }

                     },
                        {
                            field: "DealValue",
                            width: 150,
                            title: "Value ($)",
                            filterable: {
                                operators: {
                                    string: {
                                        startswith: "Starts With",
                                        contains: "Contains"
                                    }
                                }
                            },
                            template:'${${DealValue}*0.05}'

                        },
                           {
                               field: "DealStatus",
                               width: 150,
                               title: "Status",
                               filterable: {
                                   operators: {
                                       string: {
                                           startswith: "Starts With",
                                           contains: "Contains"
                                       }
                                   }
                               }

                           },
                 {
                     field: "DealPricingCompletionDate",
                     width: 230,
                     title: "DealPricingCompletionDate",
                     format: "{0:dd/MM/yyyy}",
                     //  template: '#= kendo.toString(StartDate, "dd/MM/yyyy") #',
                     filterable: {
                         ui: "datetimepicker",
                         operators: {
                             date: {
                                 gt: "After",
                                 lt: "Before",
                                 eq: "Equals"
                             },
                             messages: {
                                 filter: "Apply",
                                 clear: "Clear"
                             }
                         }

                     }
                 },

            ], 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T10:41:56.593

破解它。这是解决方案

```
 columns: [
                     {
                            field: "DealValue",
                            width: 150,
                            title: "Value ($)",
                            filterable: {
                                operators: {
                                    string: {
                                        startswith: "Starts With",
                                        contains: "Contains"
                                    }
                                }
                            },
                            template:'${DealValue*0.05}'                             

                        }
                        ] 
```

# php - 为什么分解关联数组会以某种方式改变以前存储的图片？

> ID：16057625
> 
> 赞同：0
> 
> 时间：2013-04-17T10:26:59.493
> 
> 标签：php, mysql

让我们将图像文件读入可变图片：

```
$picture = addslashes(fread(fopen($image, "r"), filesize($image))); 
```

这张 $picture 您可以轻松地插入数据库表中，没有任何麻烦。

```
*for example*:  INSERT INTO $banners(banner) VALUES( $picture ); 
```

出于某种原因，让我们创建一个关联数组 $final：

```
$final["banner"] = $picture;
$final["place"] = something... 
```

稍后让我们分解 $final 并将获得的值插入数据库：

```
 $fields = "";      $values = "";

  while (list($name, $value) = each( $final ))
  {
        $fields .= "$name, ";
        $values .= "'$value', ";
  }
  // Cut trailing commas
  $values_fields = ereg_replace(", $", "", $values_fields);
  $values = ereg_replace(", $", "", $values);

  // Execute query
  $query = "INSERT INTO banners($values_fields) VALUES($values)";
  $res = mysql_db_query($database, $query) or mysql_die(); 
```

现在，当将带有 $picture 的连续 $value 插入数据库时​​，MySQL 会警告“出现问题”。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:47:41.800

首先，不要破坏您的数据。直接阅读并保持变量干净：

```
$picture = file_get_contents($image); 
```

接下来，准备要插入的数据：

```
$final["banner"] = mysqli_real_escape_string($picture);
$final["place"]  = $something; 
```

最后，不需要循环遍历您的数组，因为它只包含一条记录。您不引用这些值，从而导致错误。

```
$fields = "`" . implode("`, `", array_keys($final)) . "`";
$values = "'" . implode("', '", array_values($final)) . "'";

$query  = "INSERT INTO banners ({$fields}) VALUES ({$values})";
$result = mysqli_query($database, $query) or die(mysqli_error($database)); 
```

我在这里使用 MySQLi，因为不推荐使用 mysql_* 函数（以及 ereg_* 函数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:33:46.600

如果您在此处发布的代码正是您要运行的代码，那么请注意您在`$fields`变量中累积字段名称，但“剪切尾随逗号”`$values_fields`此时为空。将空`$values_fields`输入查询可能是mysql错误的原因。

你为什么要这样做`addslashes()`？尝试`mysql_real_escape_string()`改用。

还要确保您尝试将图像放入的数据库列的类型是 BLOB 或 LONGBLOB。

您可能会在 MySQL相关[的二进制数据中](https://stackoverflow.com/questions/17/binary-data-in-mysql)找到这个问题的答案。

# python - 在给定的最大值和最小值之间重新缩放值，其中最大值为正，最小值为负

> ID：16057627
> 
> 赞同：1
> 
> 时间：2013-04-17T10:27:06.403
> 
> 标签：python, perl, math, graph, statistics

我想要重新缩放一组值（正浮点值和负浮点值），以便这些值介于 -5 到 +5 或 -3 到 +2 之间。我怎样才能缩小它。有没有具体的公式。我尝试搜索，但没有找到任何可以处理负最小值的东西。

提前致谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T10:28:57.923

尝试像这样将值映射到 (0, 1) 比例：

```
y = (x - xmin) / (xmax - xmin) 
```

您还可以使用有限元形状函数：

```
y = h1*x1 + h2*x2 
```

在哪里

```
h1 = (z - 1)/2.0 for -1 <= z <= +1
h2 = (z + 1)/2.0 for -1 <= z <= +1 
```

这会将您的值映射到 (-1, 1) 比例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T10:59:53.323

您可以使用线性插值/外推公式来获得您想要的结果。

代码：

```
def rescale(val, in_min, in_max, out_min, out_max):
    return out_min + (val - in_min) * ((out_max - out_min) / (in_max - in_min))

print(rescale(4, 4, 20, 0, 100))  # => 0.0
print(rescale(12, 4, 20, 0, 100)) # => 50.0
print(rescale(20, 4, 20, 0, 100)) # => 100.0
print(rescale(0, 4, 20, 0, 100))  # => -25.0 
```

请注意，此代码不会根据提供的最小和最大界限检查您的值，因此它将像上一个示例一样进行推断。根据需要修改它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T11:20:24.607

缩小数据的最简单方法是确定数据的最大值（正数或负数），并使用该最大值相应地缩放所有其他数据。

例如，如果您的数据中最多有 320 个

```
 320 / 320 * 5  => 5
 160 / 320 * 5  => 2.5
-160 / 320 * 5  => -2.5 
```

所以作为一个一般方程

```
x / abs(maximum) * scale 
```

# stack - 格式字符串如何从堆栈中获取参数

> ID：16057631
> 
> 赞同：1
> 
> 时间：2013-04-17T10:27:22.440
> 
> 标签：stack

我正在玩弄格式字符串，发现很难理解如何从堆栈中检索参数。这是我的示例代码：

```
#include <stdio.h>

int main(int argc, char **argv)
{
  int i = 123321;
  char a[] = "AAAAA";
  printf(argv[1]);
  printf("\n");
  return 0;
} 
```

现在，我一直在调试器中运行程序，试验输入，所以像“AAA %x %x”这样的东西，并查看堆栈指针和基指针之间的内存段，试图找出哪些格式说明符得到了换成哪个词。

这会导致一些混乱。我用“AAAAA %x %x %x %x %x %x %x %p %p %x %x %x %x %x”运行程序，如下图所示。

![在此处输入图像描述](https://i.stack.imgur.com/GkaNb.png)

之后，我检查了从堆栈指针开始的内存，一直到基指针并超出了基指针。从输出的 0x4141414141 和 0x1e1b9ca70c100 值可以看出，它们是数组 a[]="AAAAA" 和值 i=123321 (=0x1e1b9)，我能够使用以下格式将局部变量输出给我细绳。但是，如果我将两个 %p 替换为两个 %x，那么我只会得到数组的一部分（因为它大于一个单词），并且根本不会输出 0x001e1b9（i 的值）。为什么这些 4 字节的值不会从堆栈中弹出？我必须使用 %p，否则它似乎只是跳过堆栈上的这些单词并弹出不同的东西。这是否与局部变量在堆栈上的对齐方式有关？

谢谢，砖

# jquery - 为什么“这个”不起作用？

> ID：16057633
> 
> 赞同：0
> 
> 时间：2013-04-17T10:27:26.243
> 
> 标签：jquery

链接到小提琴：http: [//jsfiddle.net/TungstenNo74/nCCMP/2/](http://jsfiddle.net/TungstenNo74/nCCMP/2/)

可能是一个菜鸟问题，但我一直在寻找一段时间，只是无法弄清楚。

我正在尝试为任意数量的分数显示条形图。我在想我会为每个分数初始化一个“条形”对象，然后为它构建一个条形。

我不知道如何为每个单独的栏而不是整个 .class 设置动画（现在设置为“.test”）

```
function bar(score, index,selector) {
this.score = score;
this.barHeight = score * 6;
}

bar.prototype.makeBar = function () {
    $('#plot').append('<div class=test></div>');
};

bar.prototype.growBar = function () {
    //$('.test').animate({ //This works, but it animates all of my bars...
        $(this).animate({ //Why doesn't 'this' work?
        'height': this.barHeight
    }, 'slow', function () {});
};

var test = new bar(24, 0,'plot');   //Isn't this what 'this' refers to?
test.makeBar();
test.growBar(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T10:34:09.557

因为在您的完整小提琴示例中，您可以看到这`this`不是 jQuery 可以动画的实际 DOM 元素。

```
var plotHeight = $('#plot').css('height');

function bar(score, index) {
    this.score = score;
    this.index = index;
    this.barHeight = score * 6;
}

bar.prototype.makeBar = function () {
    $('#plot').append('<div class=test></div>');
};
bar.prototype.growBar = function () {
    //$('.test').animate({
    $(this).animate({ //Why doesn't 'this' work?
        'height': this.barHeight
    }, 'slow', function () {});
};

var test = new bar(24, 0); //score gives height, index does nothing... yet
test.makeBar();
test.growBar();

var test2 = new bar(15, 2); // This is just an object of type bar and does not hold a jQuery element to be animated.
test2.makeBar();
test2.growBar(); 
```

你可以这样做：

[http://jsfiddle.net/nCCMP/3/](http://jsfiddle.net/nCCMP/3/)

```
var plotHeight = $('#plot').css('height');

function bar(score, index,selector) {
    this.score = score;
    this.index = index;
    this.barHeight = score * 6;
    this.container = $(selector); // here is the DOM element
}

bar.prototype.makeBar = function () {
    $('#plot').append('<div class=test></div>');
};
bar.prototype.growBar = function () {
    //$('.test').animate({
    $(this.container).animate({ //Now it will animate the element.
        'height': this.barHeight
    }, 'slow', function () {});
};

var test = new bar(24, 0,'#plot'); 
test.makeBar();
test.growBar();

var test2 = new bar(15, 2,'#plot');
test2.makeBar();
test2.growBar(); 
```

**编辑：**

```
I would try to write a jQuery plugin for that, it would probably start something like that:

(function ($) {
    $.fn.scoreBar = function (options) {
        var defaultVal = {
            score,: 0,
            index: '0'
        };

        var obj = $.extend(defaultVal, options);
        return this.each(function () {
            var selObject = $(this);
            selObject.animate({ 'height': this.barHeight }, 'slow', function () {});
        });
    }
})(jQuery); 
```

然后你这样称呼它：

```
$('#ScoreBarContainer').scoreBar({score=24,index=0}); 
```

# css - 在另一个 CSS 选择器中使用一个类

> ID：16057635
> 
> 赞同：2
> 
> 时间：2013-04-17T10:27:36.073
> 
> 标签：css, twitter-bootstrap, import, sass

有没有办法将 css 选择器的样式设置为与之前在没有 javascript 的情况下定义的另一个选择器（在本例中为类）相同？

具体来说，我的问题是将引导按钮类（`btn-small`, `btn-mini`）应用于不同的按钮，而无需手动更改。原因是我用 javascript 替换按钮，因为我不想重写很多代码，所以我希望类在 html 外部

所以而不是拥有

```
<div class="mini">
    <a class="btn btn-mini"> some_link </a>
</div> 
```

和

```
<div class="small">
    <a class="btn btn-small"> the_same_some_link </a> 
</div> 
```

我可以

```
<div class="link small">
    <a class="btn"> the_same_some_link </a>
</div> 
```

并使用 css 做

```
.small a{
import .btn-small
}

.mini a{
import .btn-mini
} 
```

这可以通过 css 或 scss/sass 实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:31:08.387

你可以通过 Sass 使用[选择器继承](http://sass-lang.com/)来做到这一点`@extend`。

SCSS 的解决方案：

```
.small a{
  @extend .btn-small;
}

.mini a {
  @extend .btn-mini;
} 
```

编辑：如评论中所述，您还需要：

```
@import "twitter/bootstrap" 
```

# php - Yii 下拉列表空值作为默认值

> ID：16057637
> 
> 赞同：9
> 
> 时间：2013-04-17T10:27:41.317
> 
> 标签：php, drop-down-menu, yii

我的 _form 模型中有一个下拉列表，我想添加一个空值（我希望将其作为默认值）。我有以下内容：

通知：

```
<?php echo $form->labelEx($model,'country_id'); ?>
<?php echo $form->dropDownList($model,'country_id',Country::items(),array('empty' => '--Select a country--')); ?>
<?php echo $form->error($model,'country_id'); ?> 
```

在示范国家：

```
public static function items()
{
    return CHtml::listData(Country::model()->findAllBySql(
                        'SELECT * from country'), 
                        'id', 'name');
} 
```

即使我的空选项位于下拉列表的第一行，列表中的第一个国家也显示为默认值。

我试过了：

```
<?php echo $form->dropDownList($model,'country_id',
    Country::items(),array('empty'=>'--Select a country--',
                           'options'=>
                             array(
                               '3'=>array('selected'=>'selected')
                                 )
     )); 
?> 
```

通过这种方式，我可以选择默认选项，但不能将其设置为空值，只是来自模型的国家：项目。

任何想法？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-17T11:08:17.170

您确定`country_id`打印下拉列表时模型的属性未设置为任何内容吗？`$model`如果实例是使用`new Country()`运算符而不是通过填充数据库中的属性创建的，则以下对我有用：

```
<?php echo $form->dropDownList(
    $model,
    'country_id',
    Country::items(),
    array(
        'empty'=>'--Select a country--')
    );
?> 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-17T11:13:51.053

阅读[文档](http://www.yiiframework.com/doc/api/1.1/CHtml#dropDownList-detail)。有“提示”参数。

尝试这个：

```
<?php
    echo $form->dropDownList($model,'country_id',Country::items(), array(
        'prompt' => '--Select a country--'
    ));
?> 
```

在此处查看更多详细信息[http://www.yiiframework.com/forum/index.php/topic/11195-how-to-edit-the-default-option-in-dropdownlist/](http://www.yiiframework.com/forum/index.php/topic/11195-how-to-edit-the-default-option-in-dropdownlist/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T11:24:11.520

`items`你总是可以在你的方法中做类似 array_merge 的事情

```
public static function items()
{
return array_merge(array(''=>'--Select a country--'), CHtml::listData(Country::model()->findAllBySql(
                            'SELECT * from country'), 
                            'id', 'name'));
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T11:30:41.710

我相信您正在寻找：

```
echo $form->dropDownList($model,'country_id',Country::items(),array('prompt'=>'')); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-26T02:12:38.217

如果你使用 yiibooster 也许这会有所帮助

```
<?php echo $form->dropDownListGroup(
            $model,
            'kode_cuti_sub2',
            array(
                'empty'=>'--Select a country--',
                'widgetOptions' => array(
                    'data' => array('Something ...', 'Pilih Jenis Cuti'=>Chtml::listData(Cuti::model()->cuti_sub2(),'kode','jenis_cuti')),
                    'options' => array(
                        'placeholder' => 'Pilih NIP Pegawai',
                        'width' => '100%',
                    ),
                ),
                'wrapperHtmlOptions' => array(
                    'class' => 'col-sm-5',
                ),
            )
        ); ?> 
```

就我而言，它有效

# jquery - .on() 函数调用之间的区别

> ID：16057640
> 
> 赞同：5
> 
> 时间：2013-04-17T10:27:48.487
> 
> 标签：jquery

以下有什么区别？

```
$(document).on("scroll",".wrapper1", function(){
   $(".wrapper2")
    .scrollLeft($(".wrapper1").scrollLeft());
});  

$('.wrapper1').on("scroll", function(){
        $(".wrapper2")
            .scrollLeft($(".wrapper1").scrollLeft());
}); 
```

什么时候应该准确地使用每个函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T10:54:23.167

这两者的区别是

`$('.wrapper1').on("scroll", ....)`仅将滚动事件绑定到执行此语句时存在的那些元素，即如果在执行此语句`wrapper1`后动态添加任何具有类的新元素，则不会为这些元素执行事件处理程序。

`$(document).on("scroll",".wrapper1", ...)`另一方面`document`，将向对象注册一个事件处理程序，并使用事件冒泡来调用处理程序，每当滚动发生在具有类 `wrapper` 的元素内时，它将支持动态添加元素。

所以什么时候更喜欢一种方法

如果您只有有限数量的元素并且它们不是动态添加的，您可以更喜欢第一种方法

如果您有很多元素或者这些元素是动态添加的，则首选第二种方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T10:54:48.600

效果将是相同的，但事件处理程序传递事件的方式略有不同。

您[`.on()`](http://api.jquery.com/on/)在每种情况下都在使用，但在第二个版本中没有使用*选择器。*该事件在第一个实例中被*委托*，并在第二个实例中*直接绑定*。该`.on()`文档指出：

对于*直接*事件，

> 每次在所选元素上发生事件时都会调用处理程序，无论它是直接发生在元素上还是来自后代（内部）元素的冒泡

对于*委托*事件，

> 当事件直接发生在绑定元素上时不会调用处理程序，而只会调用匹配选择器的后代（内部元素）

发生的情况是，当浏览器检测到一个事件时，它会弹出`DOM`. 在向上的每个元素处，jQuery 将调用已附加的事件处理程序。在第一个版本中，事件一直传播到`document`之前的 jQuery 检查事件是否源自`class="wrapper1"`元素。第二个版本，如果事件在`class="wrapper1"`元素上，事件将停止冒泡。

`.wrapper1` **另一个区别是，如果页面完成加载时不存在**，第一个版本仍然能够绑定事件处理程序，即如果元素是动态添加的，则第二个版本将不起作用。当页面加载并且执行的 jQuery`$('.wrapper1')`可能不存在时。

如果`.wrapper1`元素不是动态的，那么您可能会发现使用第二个版本的（可忽略不计的）性能优势。

除此之外，该[`scroll`事件不会冒泡](http://www.quirksmode.org/dom/events/scroll.html)，也不能被委派。但是，可以从`.on()`文档中再次委托它们：

> 在所有浏览器中，加载、滚动和错误事件（例如，在元素上）不会冒泡。在 Internet Explorer 8 及更低版本中，粘贴和重置事件不会冒泡。此类事件不支持与委托一起使用，但可以在事件处理程序直接附加到生成事件的元素时使用。

所以唯一可行的版本是第二个！[**请参阅**](http://jsfiddle.net/AdYAA/)DevTools 控制台中的演示，`document scroll`输出永远不会出现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T10:37:19.583

不同之处在于，在第一种情况下，侦听器以文档为目标，因此，如果您在页面加载时没有 .wrapper1 并另外添加它（AJAX 或其他方式），事件仍将触发（因为文档始终存在） .

在第二种情况下，如果 .wrapper1 是动态添加的，则即使您正在使用 .on() 事件也不会触发，因为您没有将 .on() 绑定到的元素。

也就是说，仅当所选元素不是动态创建时才应使用第二个变体，而第一个变体则在相反的情况下使用。

# powershell - 如何使用 PowerShellPack 中的 Copy-ToZip 将多个文件压缩为 zip？

> ID：16057641
> 
> 赞同：3
> 
> 时间：2013-04-17T10:27:50.653
> 
> 标签：powershell, zip

我安装了[PowerShellPack](http://archive.msdn.microsoft.com/PowerShellPack)以将多个文件压缩到 zip 中。它适用于 .txt 等小文件，但不适用于大文件。zip 中只有一个文件，我收到错误消息`File not found or no read permission`。

```
Import-Module PowerShellPack
Copy-ToZip -File "D:\Temp\Test.adi" -zipfile "D:\Temp\Files.zip"
Copy-ToZip -File "D:\Temp\Test2.adt" -zipfile "D:\Temp\Files.zip" 
```

我尝试使用 Wait-Job 命令，但这也仅适用于小文件。对于大文件，会创建一个 zip 文件，但它是空的。

```
Import-Module PowerShellPack
$job = Start-Job {Copy-ToZip -File "D:\Temp\Test.adi" -zipfile "D:\Temp\Files.zip"}
Wait-Job $job
Receive-Job $job
$job = Start-Job {Copy-ToZip -File "D:\Temp\Test2.adt" -zipfile "D:\Temp\Files.zip"}
Wait-Job $job
Receive-Job $job 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-16T10:01:06.247

[我建议改用PowerShell 社区扩展](https://pscx.codeplex.com/)中包含的 Write-Zip cmdlet 。它没有 Copy-ToZip 的文件访问问题。

示例用法：

```
Get-ChildItem D:\Temp\*.ad* | Write-Zip -OutputPath D:\Temp\Files.zip 
```

如果`-OutputPath`未指定，将为每个输入文件创建一个 zip 文件，而不是单个 zip 文件。

它还有一个`-Level`用于指定压缩级别的开关。

# vector - Scheme向量的复杂性

> ID：16057644
> 
> 赞同：6
> 
> 时间：2013-04-17T10:28:02.587
> 
> 标签：vector, scheme, complexity-theory

Scheme R5RS 标准中的[6.3.6 向量](http://www.schemers.org/Documents/Standards/R5RS/HTML/r5rs-Z-H-9.html#%_sec_6.3.6)部分说明了以下有关向量的内容：

> 向量是异构结构，其元素由整数索引。向量通常比相同长度的列表占用更少的空间，并且访问随机选择的元素所需的平均时间对于向量通常比列表少。

这种对向量的描述有点分散。

我想知道这在and操作及其复杂性方面*实际上*意味着什么。两个过程都返回向量和列表的第 k 个元素。向量运算是 O(1) 还是列表运算 O(n)？向量与列表有何不同？我在哪里可以找到有关此的更多信息？`vector-ref``list-ref`

现在我使用关联列表作为存储键/值对的数据结构，以便于查找。如果键是整数，那么使用向量来存储值可能会更好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T13:57:13.447

`vector-ref`和的非常具体的细节`list-ref`是依赖于实现的，这意味着：每个 Scheme 解释器都可以实现它认为合适的规范，所以你的问题的答案不能推广到所有符合 R5RS 的解释器，*这取决于*你的实际解释器'重新使用。

但是，是的，在任何体面的实现中，假设`vector-ref`操作是 O(1)，并且`list-ref`操作可能是 O(n) 是一个安全的赌注。为什么？因为在底层，向量应该使用实现语言原生的数据结构来实现，它允许 O(1) 访问给定其索引的元素（例如，原始数组） - 因此使实现变得`vector-ref`简单。而 Lisp 中的列表是通过链接`cons`单元格创建的，并且在任何给定索引处查找元素需要遍历列表中它之前的所有元素 - 因此 O(n) 复杂度。

作为旁注 - 是的，使用向量将比使用键/值对的关联列表更快，只要键是整数并且预先知道要索引的元素的数量（Scheme 向量不能增长它的创建后的大小）。对于一般情况（整数以外的键，可变大小），请检查您的解释器是否支持哈希表，或使用提供它们的外部库（例如[SRFI 69](http://srfi.schemers.org/srfi-69/srfi-69.html)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T13:56:57.247

列表由单元**格**`cons`构成。从[R ⁵ RS 列表部分](http://www.schemers.org/Documents/Standards/R5RS/HTML/r5rs-Z-H-9.html#%_sec_6.3.2)：

> 列表的连续对的汽车字段中的对象是列表的元素。例如，双元素列表是一个对，其 car 是第一个元素，其 cdr 是一个对，其 car 是第二个元素，其 cdr 是空列表。列表的长度是元素的数量，与对的数量相同。

例如，该列表`(a b c)`等效于以下一系列对：`(a . (b . (c . ())))`

并且可以通过以下“节点”在内存中表示：

```
[p] --> [p] --> [p] --> null
 |       |       |
 |==> a  |==> b  |==> c 
```

每个节点都`[]`包含一个指向`p`值的指针 (it's `car`)，以及另一个指向下一个元素的指针 (it's `cdr`)。

这允许列表增长到无限长度，但需要一个`ref`操作从列表的前面开始并遍历`k`元素以找到请求的元素。正如你所说，这是O（n）。

* * *

相比之下，**向量**基本上是一个值数组，可以在内部表示为指针数组。例如，向量`#(a b c)`可能表示为：

```
[p p p]
 | | |
 | | |==> c
 | |
 | |==> b
 |
 |==> a 
```

其中数组`[]`包含一系列三个指针，每个指针都分配给向量中的一个值。`v`所以在内部你可以使用符号引用向量的第三个元素`v[3]`。由于您不需要遍历前面的元素，`vector-ref`因此是 O(1) 操作。

主要缺点是向量的大小是固定的，因此如果您需要添加的元素多于向量可以容纳的数量，则必须分配一个新向量并将旧元素复制到这个新向量中。如果您的应用程序定期执行此操作，这可能是一项昂贵的操作。

* * *

网上有很多资源——这篇关于[Scheme 数据结构](http://www.cs.uni.edu/~wallingf/teaching/cs3540/sessions/session04.html)的文章更详细地介绍并提供了一些示例，尽管它更侧重于列表。

* * *

综上所述，如果您的键是（或可以成为）整数，并且您具有固定数量的元素，或者可以通过合理数量的向量重新分配来管理 - 例如，您在启动时加载向量，然后主要执行读取 - 一个向量可能是关联列表的一个有吸引力的替代方案。

# mysql - 基于日期范围如何获得独特的、新的和重复的结果？

> ID：16057647
> 
> 赞同：0
> 
> 时间：2013-04-17T10:28:07.747
> 
> 标签：mysql, sql, datetime

我有一个带有日期时间字段的数据库表，还包含用户 ID（外键）。我需要获取独特用户、新用户和重复用户的活动。

如果用户进行了某些活动，则会在此表中插入一个数据库行。因此，在一个日期范围内（从日期到日期），我将那些做过一次或多次活动的用户称为唯一用户。Like count of distinct users 是唯一用户数。

然后我需要获取在该日期范围内有活动且未超出该日期范围的新用户以及在该日期范围内有活动且超出该日期范围的重复用户的数量

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:49:41.317

**唯一用户**

```
SELECT DISTINCT UserId FROM Table
WHERE Date BETWEEN StartDate AND EndDate 
```

**新用户**

```
SELECT DISTINCT UserId FROM Table
WHERE Date BETWEEN StartDate AND EndDate
AND UserId NOT IN (SELECT UserId FROM Table
                   WHERE Date NOT BETWEEN StartDate AND EndDate) 
```

**重复用户**

```
SELECT DISTINCT UserId FROM Table
WHERE Date BETWEEN StartDate AND EndDate
AND UserId IN (SELECT UserId FROM Table
               WHERE Date NOT BETWEEN StartDate AND EndDate) 
```

# java - 休眠代码不起作用，如何解决？

> ID：16057649
> 
> 赞同：1
> 
> 时间：2013-04-17T10:28:12.297
> 
> 标签：java, xml, hibernate

在[较早的帖子](https://stackoverflow.com/questions/16055067/how-to-fix-config-file-of-hibernate)中，我的休眠配置文件有一些未知问题。一个人给了我另一个配置文件来使用，它解决了旧的配置错误。之后，我删除了这些注释附近的代码- **“！--禁用缓存--”“！-- UTF8到数据库--”“！--实体映射--”现在我收到一个新错误。**但它也引入了一个新错误，如下所示。我如何解决它 ？

```
org.hibernate.cfg.annotations.Version <clinit>
INFO: Hibernate Annotations 3.3.1.GA
[main] INFO org.hibernate.cfg.Environment - Hibernate 3.3.2.GA
[main] INFO org.hibernate.cfg.Environment - hibernate.properties not found
[main] INFO org.hibernate.cfg.Environment - Bytecode provider name : javassist
[main] INFO org.hibernate.cfg.Environment - using JDK 1.4 java.sql.Timestamp handling
[main] INFO org.hibernate.cfg.Configuration - configuring from resource: /hibernate.cfg.xml
[main] INFO org.hibernate.cfg.Configuration - Configuration resource: /hibernate.cfg.xml
[main] INFO org.hibernate.cfg.Configuration - Configured SessionFactory: null
[main] INFO org.hibernate.dialect.Dialect - Using dialect: org.hibernate.dialect.MySQLDialect
Apr 17, 2013 3:10:39 AM org.hibernate.cfg.AnnotationBinder bindClass
INFO: Binding entity from annotated class: com.examscam.model.User
Apr 17, 2013 3:10:39 AM org.hibernate.cfg.annotations.EntityBinder bindTable
INFO: Bind entity com.examscam.model.User on table User
Apr 17, 2013 3:10:39 AM org.hibernate.cfg.AnnotationConfiguration secondPassCompile
INFO: Hibernate Validator not found: ignoring
[main] INFO org.hibernate.tool.hbm2ddl.SchemaExport - Running hbm2ddl schema export
[main] INFO org.hibernate.tool.hbm2ddl.SchemaExport - exporting generated schema to database
[main] INFO org.hibernate.connection.ConnectionProviderFactory - Initializing connection provider: org.hibernate.connection.C3P0ConnectionProvider
[main] INFO org.hibernate.connection.C3P0ConnectionProvider - C3P0 using driver: com.mysql.jdbc.Driver at URL: jdbc:mysql://127.0.0.1:3306/test
[main] INFO org.hibernate.connection.C3P0ConnectionProvider - Connection properties: {useUnicode=true, user=root, password=****, characterEncoding=UTF-8}
[main] INFO org.hibernate.connection.C3P0ConnectionProvider - autocommit mode: false
Exception in thread "main" java.lang.NoClassDefFoundError: com/mchange/v2/c3p0/DataSources
    at org.hibernate.connection.C3P0ConnectionProvider.configure(C3P0ConnectionProvider.java:176)
    at org.hibernate.connection.ConnectionProviderFactory.newConnectionProvider(ConnectionProviderFactory.java:137)
    at org.hibernate.connection.ConnectionProviderFactory.newConnectionProvider(ConnectionProviderFactory.java:79)
    at org.hibernate.tool.hbm2ddl.ManagedProviderConnectionHelper.prepare(ManagedProviderConnectionHelper.java:51)
    at org.hibernate.tool.hbm2ddl.SchemaExport.execute(SchemaExport.java:252)
    at org.hibernate.tool.hbm2ddl.SchemaExport.create(SchemaExport.java:211)
    at com.examscam.model.User.persist(User.java:48)
    at com.examscam.model.User.main(User.java:55)
Caused by: java.lang.ClassNotFoundException: com.mchange.v2.c3p0.DataSources
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 8 more 
```

XML -

```
<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
        "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">

<!-- Generated by MyEclipse Hibernate Tools.                   -->
<hibernate-configuration>

    <session-factory>
        <property name="dialect">
            org.hibernate.dialect.MySQLDialect
        </property>
        <property name="connection.url">
            correct url
        </property>
        <property name="connection.username">root</property>
        <property name="connection.password">password</property>
        <property name="connection.driver_class">
            com.mysql.jdbc.Driver
        </property>

    </session-factory>

</hibernate-configuration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T10:34:52.560

原因是你的工程库中没有c3p0.jar，[点击下载](http://nchc.dl.sourceforge.net/project/c3p0/c3p0-bin/c3p0-0.9.1/c3p0-0.9.1.bin.zip)，把压缩包里的c3p0-0.9.x.jar放到你的工程lib目录下。会好的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T10:32:47.513

将[c3p0-0.9.1.1.jar](http://www.jarfinder.com/index.php/java/info/com.mchange.v2.c3p0.DataSources)这个 jar 添加到您的类路径中。

看起来`com.mchange.v2.c3p0.DataSources`这个类在你的类路径中不存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-13T13:12:52.400

当心 c3p0 的较新版本，我下载了最新版本 (c3p0-0.9.5-pre9) 并且在其他错误中卡住了几个小时，例如：

```
org.apache.catalina.core.StandardWrapperValve invoke GRAVE: Servlet.service() 
for servlet default threw exception java.lang.ClassNotFoundException: 
java.lang.AutoCloseable at org.apache.catalina.loader.WebappClassLoader.loadClass 
```

或者

```
java.lang.ClassNotFoundException: com.mchange.v2.c3p0.DataSources 
```

我建议下载： [c3p0-0.9.1](http://sourceforge.net/projects/c3p0/files/c3p0-bin/)并将所有 jar 导入您的项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-25T20:35:33.780

我刚刚做了一个干净的构建，这个问题就消失了。在 Eclipse 堆错误之后发生在我身上。我不得不重新运行eclipse，杀死tomcat进程。

# java - 正则表达式从Java中的字符串中获取记录号？

> ID：16057653
> 
> 赞同：-4
> 
> 时间：2013-04-17T10:28:17.397
> 
> 标签：java, regex

我需要正则表达式从下面的字符串中提取记录号，

```
String extract = "Purchase Order HDL/17-04-2013/PRO_1311 is saved successfully" 
```

输出：

```
HDL/17-04-2013/PRO_1311 
```

我尝试谷歌搜索，但无法得到结果。请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:31:29.933

就像是：

```
"Purchase Order ([A-Z]+/\d{2}-\d{2}-\d{4}/[A-Z]+_\d+) is saved successfully" 
```

这样，您将在第一个捕获组中获得所需的内容。

当然，这取决于您的采购订单的模式，您应该阅读一些有关正则表达式的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:36:50.643

尝试

```
String recordNumber = str.replaceAll(".*?(\\w+/\\d{2}-\\d{2}-\\d{4}/\\w+).*", "$1"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T10:37:35.723

您需要使用正则表达式是否有特殊原因？出于性能和可读性的原因，如果有更合适的替代方案，最好避免使用它们。

在这种情况下，前缀和后缀似乎总是相同的长度，因此您可以简单地使用`String.substring`来删除它们。如果订单 ID 始终以 为前缀`"Purchase Order "`，后跟`" is saved successfully"`，那么您可以只修剪前面的 15 个字符和后面的 22 个字符：

```
String extract = "Purchase Order HDL/17-04-2013/PRO_1311 is saved successfully";
String orderId = extract.substring(15, extract.length() - 22); 
```

（如果您想*真正*清楚这些神奇数字的来源，您可以将它们定义为 eg `private static final int PREFIX_LENGTH = "Purchase Order ".length();`）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T10:45:18.223

就像是：

```
String s = "Purchase Order HDL/17-04-2013/PRO_1311 is saved successfully";
Pattern p = Pattern.compile("(?<=Purchase Order ).+?(?= is saved successfully)");
Matcher m = p.matcher(s);
if (m.find()) {
    System.out.println(m.group());
} 
```

这是一个匹配两个短语中间的任何内容的正则表达式。第一个括号是后面的字符串，第二个是前面的字符串。

# search - 使用 solr 的多语言需求的最佳索引策略

> ID：16057654
> 
> 赞同：2
> 
> 时间：2013-04-17T10:28:18.303
> 
> 标签：search, solr, lucene, wcs

我们将 IBM WCS v7 用于我们基于电子商务的需求之一，其中嵌入了 Apache solr 用于基于搜索的实现。

根据一项新要求，一个网站将支持多种语言，前法国版本的网站可以支持英语、法语等（en_FR、fr_FR 等）为了使用此界面配置 solr，应该是使用单个 solr 核心的最佳索引策略吗？

我得到了一些想法 1）在 schema.xml 中为多种语言使用多个字段，2）为不同的语言使用不同的 solr 核心。

但这些方法似乎不是最适合当前要求的方法，因为电子商务网站将支持 18 种语言。为每种语言使用不同的字段将非常复杂，而且使用不同的 solr 代码也不是一个好方法，因为我们需要在所有 solr 核心中应用配置更改，如果它根据任何要求发生的话。

有没有其他方法，或者有什么方法可以将 localeId 与索引数据相关联并根据检测到的语言处理搜索结果？

对此主题的任何帮助将不胜感激。

谢谢并恭祝安康，

Jitendriya Dash

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-12T05:58:27.373

这篇文章已经被原始发帖人和其他人回答了——只是把它总结为一个答案：

推荐的解决方案是为每种语言环境/语言创建一个索引核心。如果目录或内容（例如产品名称、描述、关键字）不同并且企业更愿意为每个区域单独管理它，这一点尤其重要。这为 Solr 执行特定于该语言环境的词干和标记化（如果适用）提供了额外的好处。

我参与了一些解决方案，在这些解决方案中，这种方法优于在同一核心中为每种语言环境/语言维护多个字段或文档。我使用过的大多数索引核心是 6 个。

还必须记住，添加索引核心将需要更新支持流程（产品信息管理系统更新到目录加载到工作区管理到阶段传播到重新索引到缓存失效）。

# iphone - HTTP Post 方法 php 和 ios

> ID：16057660
> 
> 赞同：0
> 
> 时间：2013-04-17T10:28:27.483
> 
> 标签：iphone, http-post

我面临一个大问题，

我想将数据发送到我的服务器，我的数据是一个字符串。

我不想使用 Get 方法，因为字符串可能很长，所以我想使用 POST 方法，但是一切都出错了，如果有人可以帮助我，他将成为我的英雄 :)

这是我的php代码：

```
<?php include("config.inc.php");
if (isset($_POST['contentInterro']) && $_POST['contentInterro'] !="" ) {
//$id_user = $_POST['contentInterro'];
//$db->sql_query("INSERT INTO interrogations VALUES(DEFAULT, '$id_user')");
echo "succes";
}else{
echo "This is an error";
}

?> 
```

这是我的应用程序代码：

```
 NSData *postData = [stringToPost2 dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];

    NSString *postLength = [NSString stringWithFormat:@"%d",[postData length]];

    NSMutableURLRequest *requestPost = [[NSMutableURLRequest alloc] init];

    NSURL *urlPost = [NSURL URLWithString:@"http://buzznapps.fr/FDF/postInterrogation.php"];

    [requestPost setURL:urlPost];
    [requestPost setHTTPMethod:@"POST"];
    [requestPost setValue:@"lol" forHTTPHeaderField:@"contentInterro"]; 

    NSError *errorURL;
    NSURLResponse *response;
    NSData *urlData = [NSURLConnection sendSynchronousRequest:requestPost returningResponse:&response error:&errorURL];

    NSString *str = [[NSString alloc] initWithData:urlData encoding:NSUTF8StringEncoding];

    NSLog(@"Str = %@",str); 
```

我总是得到一个错误，我在网上搜索了我不知道如何获取这些数据！谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T11:47:24.037

```
 #define TIMEOUT_INTERVAL 60
    #define CONTENT_TYPE @"Content-Type"
    #define URL_ENCODED @"application/x-www-form-urlencoded"
    #define GET @"GET"
    #define POST @"POST"

     -(NSMutableURLRequest*)getNSMutableURLRequestUsingGetMethodWithUrl:(NSString*)url
        {
            NSMutableURLRequest *req = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:url] cachePolicy:NSURLRequestReloadIgnoringLocalAndRemoteCacheData timeoutInterval:TIMEOUT_INTERVAL];
            [req setHTTPMethod:GET];
            return req;
        }

        -(NSMutableURLRequest*)getNSMutableURLRequestUsingPOSTMethodWithUrl:(NSString *)url postData:(NSString*)_postData
        {
            NSMutableURLRequest *req = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:url] cachePolicy:NSURLRequestReloadIgnoringLocalAndRemoteCacheData timeoutInterval:TIMEOUT_INTERVAL];
            [req setHTTPMethod:POST];
            [req addValue:URL_ENCODED forHTTPHeaderField:CONTENT_TYPE];
            [req setHTTPBody: [_postData dataUsingEncoding:NSUTF8StringEncoding]];
            return req;
        }

@try
{
    [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;
    NSString *_postData = [NSString stringWithFormat:@"user_name=%@&password=%@",@"user_name",@"password"];
    NSMutableURLRequest *req = [self getNSMutableURLRequestUsingPOSTMethodWithUrl:_url postData:_postData];
   [NSURLConnection sendAsynchronousRequest:req queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse *response, NSData *data, NSError *error)
     {
         if (error)
         {
             [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
             NSLog(@"error==%@==",[error localizedDescription]);
         }
         else
         {
             NSError *errorInJsonParsing;
             NSDictionary *json = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableContainers error:&errorInJsonParsing];

             if(errorInJsonParsing) //error parsing in json
             {
                 [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
                 NSLog(@"error in json==%@==",[error localizedDescription]);
             }
             else
             {
                 //do some operations
             }
         }
     }];
}
@catch(NSException *exception)
{
    NSLog(@"error in exception==%@==",[exception description]);
}

same way it works for the get method, just call the 
```

`NSMutableURLRequest *req = [self getNSMutableURLRequestUsingGetMethodWithUrl:_url];`代替`NSMutableURLRequest *req = [self getNSMutableURLRequestUsingPOSTMethodWithUrl:_url postData:_postData];`

# ms-access - ms 访问语法错误无效的列规范 (#0)

> ID：16057662
> 
> 赞同：0
> 
> 时间：2013-04-17T10:28:30.233
> 
> 标签：ms-access, ms-access-2007, vba

我正在做两个查询的联合。

查询单独运行没有问题，但联合抛出此查询。有任何想法吗？

查询是

SELECT CStr([REFERENCE]) AS CostID,CSng([R​​ATE]) AS HRates FROM [Qry 1 项目预算 pt1 人工费率] UNION ALL SELECT CStr([REFERENCE]),CSng([R​​ate]) FROM [Qry 1 项目预算pt2 第 3 方]；

访问 2007

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:07:34.343

两者都`CStr()`将`CSng()`抛出 Null 错误。检查您的任何`[REFERENCE]`和`[RATE]`值是否为空。

```
SELECT
    [REFERENCE],
    [RATE]
FROM [Qry 1 Project Budget pt1 labour rates]
WHERE [REFERENCE] Is Null OR [RATE] Is Null
UNION ALL
SELECT
    [REFERENCE],
    [Rate]
FROM [Qry 1 Project Budget pt2 3rd party]
WHERE [REFERENCE] Is Null OR [RATE] Is Null; 
```

# java - Java regex - 用相同的子字符串替换分隔符之间的子字符串，没有分隔符

> ID：16057664
> 
> 赞同：1
> 
> 时间：2013-04-17T10:28:31.240
> 
> 标签：java, regex, substring

我试图弄清楚如何用 Java 1.6 替换字符串，如

```
hello ${world }!   ${txt + '_t'}<br/> ${do_not_replace 
```

任何在 '${' 和 '}' 之间标识的子字符串都具有相同的子字符串，但没有这些分隔符。所以上面字符串的输出应该是

```
hello world !   txt + '_t'<br/> ${do_not_replace 
```

我确定了一种允许我用固定字符串替换子字符串的工作模式

```
str.replaceAll('[${](.*?)}', '_') 
```

而且我知道我不能在这个版本的 Java 中使用命名组。

非常感谢任何有关此问题的简单解决方案的建议！非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T10:32:40.157

尝试

```
 s = s.replaceAll("\\$\\{(.+?)}", "$1"); 
```

# php - 从插件加载库 - cakephp

> ID：16057671
> 
> 赞同：1
> 
> 时间：2013-04-17T10:28:46.047
> 
> 标签：php, cakephp, cakephp-2.3

我有一个插件，在插件里面我有一个 Lib 文件夹。像这样：

`Lib/Billing/CMS/CMS.php`

如何`CMS.php`在我的控制器上使用 CMS 类？不是我的插件控制器，而是我的应用程序上的控制器。

编辑：蛋糕版本是 2.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T11:11:37.490

所以，从你的简短信息只能猜到......你的插件是“计费”？

你的文件是

```
APP/Plugin/Billing/Lib/CMS/CMS.php (class CMS)
APP/Plugin/Billing/Lib/Billing.php (class Billing) 
```

使用 App::uses() 始终包含相同的类。然后它的

```
App::uses('CMS', 'Billing.CMS'); // Filename, Plugin.Package 
```

和

```
App::uses('Billing', 'Billing.Lib'); // Lib as package namespace here due to lack of a proper one 
```

我不必指出，您需要先加载插件，对吗？使用 CakePlugin::load()/loadAll()

# javascript - 从 JavaScript 中的键值对数组中求和值

> ID：16057672
> 
> 赞同：51
> 
> 时间：2013-04-17T10:28:46.330
> 
> 标签：javascript, arrays, for-loop, sum

我已经定义了一个 JavaScript 变量`myData`，它是`new Array`这样的：

```
var myData = new Array(['2013-01-22', 0], ['2013-01-29', 0], ['2013-02-05', 0],
             ['2013-02-12', 0], ['2013-02-19', 0], ['2013-02-26', 0], 
             ['2013-03-05', 0], ['2013-03-12', 0], ['2013-03-19', 0], 
             ['2013-03-26', 0], ['2013-04-02', 21], ['2013-04-09', 2]); 
```

我想知道是否可以对数组中找到的数值求和（例如 0+0+21+2+0 等），并且可能有一个变量，结果我可以在脚本标记之外使用，因为我有 7 个此类数组对应于一周中的每一天。我想在此基础上进行比较。如果可能的话，那是这种行动的最首选方法吗？

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2013-04-17T10:38:11.067

您可以使用以下`Array.reduce`方法：

```
const myData = [
  ['2013-01-22', 0], ['2013-01-29', 0], ['2013-02-05', 0],
  ['2013-02-12', 0], ['2013-02-19', 0], ['2013-02-26', 0], 
  ['2013-03-05', 0], ['2013-03-12', 0], ['2013-03-19', 0], 
  ['2013-03-26', 0], ['2013-04-02', 21], ['2013-04-09', 2]
];
const sum = myData
  .map( v => v[1] )                                
  .reduce( (sum, current) => sum + current, 0 );

console.log(sum);
```

见[**MDN**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/Reduce)

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2014-12-16T01:15:45.600

I think the simplest way might be:

```
values.reduce(function(a, b){return a+b;}) 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-04-17T10:33:32.503

尝试以下

```
var myData = [['2013-01-22', 0], ['2013-01-29', 1], ['2013-02-05', 21]];

var myTotal = 0;  // Variable to hold your total

for(var i = 0, len = myData.length; i < len; i++) {
    myTotal += myData[i][1];  // Iterate over your first array and then grab the second element add the values up
}

document.write(myTotal); // 22 in this instance
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-04-17T10:53:07.940

我会使用[减少](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/Reduce)

```
var myData = new Array(['2013-01-22', 0], ['2013-01-29', 0], ['2013-02-05', 0], ['2013-02-12', 0], ['2013-02-19', 0], ['2013-02-26', 0], ['2013-03-05', 0], ['2013-03-12', 0], ['2013-03-19', 0], ['2013-03-26', 0], ['2013-04-02', 21], ['2013-04-09', 2]);

var sum = myData.reduce(function(a, b) {
    return a + b[1];
}, 0);

$("#result").text(sum); 
```

在[jsfiddle上可用](http://jsfiddle.net/Xotic750/7A7nE/)

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2014-06-24T01:02:50.460

创建 sum 方法会很好，例如，您可以将 sum 函数添加到 Array

```
Array.prototype.sum = function(selector) {
    if (typeof selector !== 'function') {
        selector = function(item) {
            return item;
        }
    }
    var sum = 0;
    for (var i = 0; i < this.length; i++) {
        sum += parseFloat(selector(this[i]));
    }
    return sum;
}; 
```

那么你可以做

```
> [1,2,3].sum()
6 
```

在你的情况下

```
> myData.sum(function(item) { return item[1]; });
23 
```

编辑：扩展内置函数可能会不受欢迎，因为如果每个人都这样做，我们会意外地相互覆盖（命名空间冲突）。如果您愿意，可以将 sum 函数添加到某个模块并接受一个数组作为参数。这可能意味着将签名更改为`myModule.sum = function(arr, selector) {`then`this`将变为`arr`

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2016-10-04T15:00:16.057

或者在 ES6 中

`values.reduce((a, b) => a + b),`

例子：

```
[1,2,3].reduce((a, b)=>a+b) // return 6 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-02-07T04:24:57.833

如果你想在求和的同时丢弃数组，你可以这样做（比如说，`stack`是数组）：

```
var stack = [1,2,3],
    sum = 0;
while(stack.length > 0) { sum += stack.pop() }; 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-12-31T03:36:10.913

您可以对数组使用本机 map 方法。 [映射方法（数组）（JavaScript）](https://msdn.microsoft.com/en-us/library/ff679976(v=vs.94).aspx)

```
var myData = new Array(['2013-01-22', 0], ['2013-01-29', 0], ['2013-02-05', 0],
             ['2013-02-12', 0], ['2013-02-19', 0], ['2013-02-26', 0], 
             ['2013-03-05', 0], ['2013-03-12', 0], ['2013-03-19', 0], 
             ['2013-03-26', 0], ['2013-04-02', 21], ['2013-04-09', 2]);
var a = 0;
myData.map( function(aa){ a += aa[1];  return a; }); 
```

a 是你的结果

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-01-19T21:18:19.920

其中 0 是初始值

```
Array.reduce((currentValue, value) => currentValue +value,0) 
```

或者

```
Array.reduce((currentValue, value) =>{ return currentValue +value},0) 
```

或者

```
[1,3,4].reduce(function(currentValue, value) { return currentValue + value},0) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-11-11T17:35:14.790

Arrays 的 javascript 内置 reduce 不是标准，但您可以使用 underscore.js：

```
var data = _.range(10);
var sum = _(data).reduce(function(memo, i) {return memo + i}); 
```

变成

```
var sumMyData = _(myData).reduce(function(memo, i) {return memo + i[1]}, 0); 
```

对于你的情况。也看看这个[小提琴](http://jsfiddle.net/gismoranas/pUQa5/)。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-03-06T14:12:00.917

老方法（如果你现在不知道参数/参数的长度）

```
 >> function sumla1(){

    result=0
    for(let i=0; i<arguments.length;i++){

        result+=arguments[i];

    }
    return result;
    }
    >> sumla1(45,67,88);
    >> 200 
```

ES6（数组解构）

```
>> function sumla2(...x){return x.reduce((a,b)=>a+b)}
>>
>> sumla2(5,5,6,7,8)
>>
>> 31
>>
>> var numbers = [4, 9, 16, 25];
>> sumla2(...numbers);
>> 54 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-10-06T12:21:52.407

使用此[代码的新方法](https://www.phpcodingstuff.com/blog/sum-of-an-array-in-javascript.html)

```
 <script>
var array = [1, 2, 3, 4, 5];

// Getting sum of numbers
var sum = array.reduce(function(a, b){
    return a + b;
}, 0);

console.log(sum); 
```

# magento - 如何在顶部链接中显示我的购物车链接

> ID：16057675
> 
> 赞同：1
> 
> 时间：2013-04-17T10:28:55.210
> 
> 标签：magento

我安装了一个模板，顶部链接没有我的购物车链接。这在`checkout.xml`：

```
 <reference name="top.links">
       <block type="checkout/links" name="checkout_cart_link">               
           <action method="addCartLink"></action>
           <action method="addCheckoutLink"></action>
       </block>
    </reference> 
```

我想以商品数量显示它，例如：我的购物车（1）请帮助我！

此致，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:32:50.737

一种方法是在模板文件中添加以下代码：

```
$count = $this->helper('checkout/cart')->getSummaryCount(); 
```

这将显示购物车中的商品数量。如果您将模板和布局文件复制到您的主题中，您应该能够将其添加并使其正常工作。

# c# - 从另一个工作表中检测依赖单元格

> ID：16057678
> 
> 赞同：1
> 
> 时间：2013-04-17T10:29:01.973
> 
> 标签：c#, excel, excel-formula, excel-interop

这是说明我的问题的简化示例。我在单元格 A1 公式中的 sheet1 中有：

```
sheet1!A1 cell has formula '=sheet2!C1'
sheet2!B1 cell has formula '=C1' 
```

当 sheet2 中的单元格 C1 发生更改时，我想检测所有相关单元格，这意味着 sheet2 中的单元格 B1 和 sheet1 中的单元格 A1。但是 range.Dependents 只返回活动工作表中的单元格。我只得到单元格B1。在 Range interop API 文档中指出，依赖项将仅返回活动工作表中的范围。有谁知道如何从所有工作表、其他 API 调用或其他方法中检测所有依赖项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-23T19:45:48.597

这将是一个很长的代码示例，但基本上您只需要按照箭头进行操作（我假设您使用的是 C#，因为您没有指定用于互操作的语言）。

下面示例的输出是（Sheet1 上有两个单元格来演示如何遍历所有远程引用）：

```
    表 1!A1
    Sheet1!A2
    表 2!B1

```

**健康警告。此示例不执行任何互操作清理或应用程序关闭 - 这仅用于演示**

**编辑**用于[`Application.ScreenUpdating`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel._application.screenupdating%28v=office.11%29.aspx)在跟踪功能期间防止屏幕闪烁。

```
using xl = Microsoft.Office.Interop.Excel;
// use in a console app
class Program
{
    static void Main(string[] args)
    {
        xl.Application app = new xl.Application();
        app.Visible = true;
        xl.Workbook wb = app.Workbooks.Add();
        xl.Worksheet worksheet1 = wb.Sheets[1];
        xl.Worksheet worksheet2 = wb.Sheets[2];
        xl.Range rngS1A1 = worksheet1.Range["A1"];
        xl.Range rngS1A2 = worksheet1.Range["A2"];
        xl.Range rngS2B1 = worksheet2.Range["B1"];
        xl.Range rngS2C1 = worksheet2.Range["C1"];

        rngS1A1.Formula = @"=sheet2!C1";
        rngS1A2.Formula = @"=sheet2!C1";
        ((xl._Worksheet)worksheet2).Activate();
        rngS2B1.Formula = @"=C1";

        List<string> dependentAddresses = ListDependents(rngS2C1);

        foreach (string address in dependentAddresses)
        {
            Console.WriteLine(address);
        }
        Console.WriteLine("done, press enter to exit");
        Console.ReadLine();
    }

    private static List<string> ListDependents(xl.Range sourceRange)
    {
        sourceRange.ShowDependents(false);
        string sourceAddress = sourceRange.Worksheet.Name + "!" + sourceRange.Address;
        int arrowNumber = 1;
        List<string> dependentAddresses = new List<string>();
        do
        {
            string targetAddress = null;
            int linkNumber = 1;
            do
            {
                try
                {
                    xl.Range target = sourceRange.NavigateArrow(TowardPrecedent: false, ArrowNumber: arrowNumber, LinkNumber: linkNumber++);
                    targetAddress = target.Worksheet.Name + "!" + target.Address;

                    if (sourceAddress == targetAddress) break;

                    dependentAddresses.Add(targetAddress);
                }
                catch (COMException cex)
                {
                    if (cex.Message == "NavigateArrow method of Range class failed")
                    {
                        break;
                    }
                    throw;
                } 
            } while (true);
            if (sourceAddress == targetAddress) break;
            arrowNumber++;
        } while (true);

        sourceRange.Worksheet.ClearArrows();
        return dependentAddresses;
    }
} 
```

# linux-kernel - linux中等待锁的任务如何在锁被另一个任务释放后唤醒？

> ID：16057680
> 
> 赞同：0
> 
> 时间：2013-04-17T10:29:08.783
> 
> 标签：linux-kernel, linux-device-driver, kernel

假设 linux 中的任务 A 正在等待一个锁，此时指定的锁被另一个任务 B 持有。所以任务 A 将在等待队列中。现在一旦任务 B 完成，然后释放锁。现在我的疑问是任务A如何知道锁可用以及它是如何唤醒的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:02:26.447

答案是……*内核*。

锁定和解锁由专用的内核函数完成。调用 unlock 时，内核会检查是否有任何人在等待锁定，如果有，他们会获得锁定并被内核唤醒。

# sql - 如何为 SQL 方法编写简单的 Ruby 包装器以使此规范通过？

> ID：16057681
> 
> 赞同：0
> 
> 时间：2013-04-17T10:29:10.727
> 
> 标签：sql, ruby-on-rails, ruby, rspec

我有

```
describe SQL do
  it "generates select * when from given" do
    SQL.from('tname').generate.should == 'select * from tname;'
  end
end 
```

我想为类编写实现`from`和`generate`方法`SQL`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:02:10.953

上面的一个真正天真的实现（假设它不是从 ActiveRecord 派生的）将是这样的。

```
class SQL
  def self.from(tname)
    SQL.new(tname)
  end

  def initialize(tname=nil)
    @tname = tname
  end

  def generate
    "Select * from #{@tname};"
  end
end 
```

这将使您的规范通过，但可能不希望您真正想要这样做。

# hibernate - 带有来自 beanmanager 的制造商列表的 selectMenu

> ID：16057687
> 
> 赞同：0
> 
> 时间：2013-04-17T10:29:31.367
> 
> 标签：hibernate

我想问你关于hiberbnate我有2页，第一个是制造商“Fabricant”的数据表，第二个是另一个页面数据表组件“composant”当我尝试向我的表中添加一个新组件时，我应该选择他的制造商“Fabricant”使用但已显示此错误:(

> 未能延迟初始化角色集合：com.persistance.Fabricant.composants，没有会话或会话已关闭

这是我的代码

```
<h:outputLabel value="Fabricant:"   />  
            <p:selectOneMenu id="fab" value="#{composantbean.fabricant}" required="true">  
                <f:selectItem itemLabel="Select Fabricant" itemValue="" />  
                <f:selectItems value="#{fabricantbean.list}" />  
            </p:selectOneMenu> 
```

composanbean 和 fabricantbean 是范围会话

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:02:02.563

现在可以了，我更改了我的“ManufacturerDAO”，删除 session.getTransaction.commit() 但不知道这个策略是否可以

```
public List<Fabricant> findAll () { 

        Session session = sessionFactory.getCurrentSession(); 
        session.beginTransaction();
        Criteria crit = session.createCriteria(Fabricant.class);
        list=crit.list();
    /*  session.getTransaction().commit(); */
        return  list;
    } 
```

# python - 如何在 Python 的循环中重命名变量

> ID：16057689
> 
> 赞同：4
> 
> 时间：2013-04-17T10:29:37.717
> 
> 标签：python, variables, loops

我想在 Python 中运行一个循环多次的程序，每次都创建一个新数组 - 即没有数据被覆盖 - 数组以循环号的引用命名，以便我可以在后续循环中调用它。例如，我可能想在从 0 到 i 的循环中创建数组 x0、x1、x2、...、xi，然后在运行相同变量的另一个循环中调用这些数组中的每一个。（本质上相当于能够将变量放入字符串中`'string %d %(x)'`）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T10:35:45.637

您可以访问`globals()`字典以引入新变量。喜欢：

```
for i in range(0,5):
    globals()['x'+str(i)] = i 
```

在这个循环之后，你得到

```
>>> x0, x1, x2, x3, x4
(0, 1, 2, 3, 4) 
```

请注意，根据[文档](http://docs.python.org/2/library/functions.html#locals)，您不应使用`locals()`字典，因为对此字典的更改*可能不会影响解释器使用的值*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T10:40:53.553

依赖变量的名称并更改它们并不是最好的方法。

正如人们已经在评论中指出的那样，最好使用 dict 或 list 代替。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T10:42:41.467

使用字典：

```
arraysDict = {}
for i in range(0,3):
    arraysDict['x{0}'.format(i)] = [1,2,3]

print arraysDict
# {'x2': [1, 2, 3], 'x0': [1, 2, 3], 'x1': [1, 2, 3]}
print arraysDict['x1']
# [1,2,3] 
```

使用列表：

```
arraysList = []
for i in range(0,3):
    arraysList.append([1,2,3])

print arraysList
# [[1, 2, 3], [1, 2, 3], [1, 2, 3]]
print arraysList[1]
# [1, 2, 3] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T10:34:45.230

您可以为此创建一个对象，然后为此使用[setattr](http://docs.python.org/2/library/functions.html#setattr)函数。基本上，它将像这样工作：

```
setattr(myobject, 'string', value) 
```

这和做的一样：`myobject.string = value`

# c++ - 关于常量表达式的困惑

> ID：16057690
> 
> 赞同：15
> 
> 时间：2013-04-17T10:29:40.813
> 
> 标签：c++, c++11, compile-time, constexpr, constant-expression

[这是对该主题](https://stackoverflow.com/questions/16023262/unexpected-non-constant-stdinitializer-list)的某种跟进，并涉及其中的一小部分。与上一个主题一样，让我们​​考虑一下我们的编译器具有`constexpr`用于`std::initializer_list`和的函数`std::array`。现在，让我们直奔主题。

[这有效](http://ideone.com/uqNVFs)：

```
#include <array>
#include <initializer_list>

int main()
{
    constexpr std::array<int, 3> a = {{ 1, 2, 3 }};
    constexpr int a0 = a[0];
    constexpr int a1 = a[1];
    constexpr int a2 = a[2];
    constexpr std::initializer_list<int> b = { a0, a1, a2 };

    return 0;
} 
```

[这不会](http://ideone.com/OOP0rL)：

```
#include <array>
#include <initializer_list>

int main()
{
    constexpr std::array<int, 3> a = {{ 1, 2, 3 }};
    constexpr std::initializer_list<int> b = { a[0], a[1], a[2] };

    return 0;
} 
```

它因以下错误而崩溃：

```
error: 'const std::initializer_list<int>{((const int*)(&<anonymous>)), 3u}' is not a constant expression 
```

尽管我`constexpr`同时阅读了一些关于常量表达式的论文，但这种行为对我来说仍然没有任何意义。为什么第一个例子被认为是一个有效的常量表达式而不是第二个？我欢迎任何解释，以便之后我可以安息。

**注意：**我将立即对其进行精确化，Clang 将无法编译第一个片段，因为它没有实现`constexpr`为 C++14 计划的库添加。我使用了 GCC 4.7。

**编辑：**好的，这里有一个很好的例子来展示什么被拒绝，什么不是：

```
#include <array>
#include <initializer_list>

constexpr int foo = 42;
constexpr int bar() { return foo; }
struct eggs { int a, b; };

int main()
{
    constexpr std::array<int, 3> a = {{ 1, 2, 3 }};
    constexpr int a0 = a[0];
    constexpr int a1 = a[1];
    constexpr int a2 = a[2];

    // From Xeo and Andy tests
    constexpr std::array<int, 1> a = { bar() }; // OK
    constexpr std::array<int, 3> b = {{ a[0], a[1], a[2] }}; // OK
    std::initializer_list<int> b = { a[0], a[1], a[2] }; // OK
    constexpr std::initializer_list<int> b = { a0, a1, a2 }; // OK
    constexpr std::initializer_list<int> b = { foo }; // OK
    constexpr std::initializer_list<int> c = { bar() }; // ERROR
    constexpr std::initializer_list<int> b = { a[0], a[1], a[2] }; // ERROR

    // From Matheus Izvekov and Daniel Krügler
    constexpr eggs good = { 1, 2 }; // OK
    constexpr std::initializer_list<eggs> bad = { { 1, 2 }, { 3, 4 } }; // ERROR
    constexpr std::initializer_list<eggs> bad2 = { good, good }; // ERROR

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-14T00:24:56.170

**你的例子都是不正确的。**

***tl/dr：**初始化器是非常量的，因为每次评估函数时它都引用不同的临时值。*

声明：

```
constexpr std::initializer_list<int> b = { a0, a1, a2 }; 
```

创建一个类型为`const int [3]`(C++11 *[dcl.init.list]p5* ) 的临时数组，然后将`std::initializer_list<int>`对象绑定到该临时数组，就像通过绑定对它的引用一样 (C++11 *[dcl.init.list]p6* ) .

现在，通过 C++11 *[expr.const]p4*，

> 对于数组或类类型的字面常量表达式，每个子对象 [...] 应已由常量表达式初始化。[...]*地址常量表达式*[...] 计算为具有**静态存储持续时间**的对象的地址。

由于`b`具有自动存储时长，当`std::initializer_list<int>`对象绑定到`const int [3]`临时对象时，临时对象也被赋予了自动存储时长，所以初始化的`b`不是常量表达式，因为它是指一个没有静态存储时长的对象的地址*。*所以声明的`b`格式不正确。

**为什么 GCC 接受一些`constexpr` `std::initializer_list`对象**

在初始化程序非常简单的情况下，GCC（和 Clang）将数组提升到全局存储，而不是每次都创建一个新的临时数组。然而，在 GCC 中，这种实现技术泄漏到了语言语义——GCC 将数组视为具有静态存储持续时间，并接受初始化（作为对 C++11 规则的意外或故意扩展）。

**解决方法（仅限 Clang）**

`std::initializer_list<int>`您可以通过为对象提供静态存储持续时间来使您的示例有效：

```
static constexpr std::initializer_list<int> b = { a0, a1, a2 }; 
```

这反过来又为数组临时提供了静态存储持续时间，这使得初始化成为一个常量表达式。

使用 Clang 和 libc++（`constexpr`添加到 libc++`<array>`和`<initializer_list>`适当的位置），这种添加调整`static`足以让您的示例被接受。

使用 GCC，示例仍然被拒绝，诊断如下：

```
<stdin>:21:61: error: ‘const std::initializer_list<int>{((const int*)(& _ZGRZ4mainE1c0)), 1u}’ is not a constant expression 
```

这里，`_ZGRZ4mainE1c0`是生命周期延长数组临时（具有静态存储持续时间）的错位名称，我们可以看到 GCC 隐式调用（私有）`initializer_list<int>(const int*, size_t)`构造函数。我不确定为什么 GCC 仍然拒绝这个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T16:54:40.053

我弄清楚这里发生了什么：

```
 constexpr std::initializer_list<int> b = { a[0], a[1], a[2] }; 
```

`a[0]`of type`const int&`隐式转换为临时 type `const int`。然后 g++ 将其转换`const int*`为传递给`initializer_list`私有构造函数。在最后一步中，它获取临时地址，因此它不是常量表达式。

问题在于隐式转换为 const int。例子：

```
constexpr int v = 1;
const int& r = v; // ok
constexpr int& r1 = v; // error: invalid initialization of reference of
                       // type ‘int&’ from expression of type ‘const int’ 
```

同样的行为在clang中。

我认为这种转换是合法的，没有什么相反的说法。

关于`const int&`转换`const int`，[expr] 第 5 段：

> 如果表达式最初具有类型“对 T 的引用”，则在任何进一步分析之前将类型调整为 T。表达式指定引用表示的对象或函数，表达式是左值或 x 值，具体取决于表达式。

`a[0]`在这种情况下，表达式的结果是类型的临时 xvalue `const int`。

关于 constexpr 初始化程序中的隐式转换，[dcl.constexpr] 第 9 段：

> ...用于转换初始化表达式的每个隐式转换和用于初始化的每个构造函数调用都应是常量表达式中允许的转换之一。

关于获取临时地址，[expr.const] 第 2 段：

> ...使用参数调用 constexpr 函数，当被函数调用替换替换时，不会产生常量表达式；[ 例子：
> 
> ```
> constexpr const int* addr(const int& ir) { return &ir; } // OK
> static const int x = 5;
> constexpr const int* xp = addr(x); // OK: (const int*)&(const int&)x is an
>                                    // address contant expression
> constexpr const int* tp = addr(5); // error, initializer for constexpr variable
>                                    // not a constant expression;
>                                    // (const int*)&(const int&)5 is not a
>                                    // constant expression because it takes
>                                    // the address of a temporary 
> ```
> 
> —结束示例]

# xml - 文档中根元素之后的标记必须格式正确

> ID：16057692
> 
> 赞同：1
> 
> 时间：2013-04-17T10:29:42.270
> 
> 标签：xml

我在我的 XML 文档中遇到错误第 2 行。请帮忙。

```
"The markup in the document following the root elemnt must be well formed." 
```

我的 XML 是

```
<property name="src" location="C:\Selenium\Workspace\AutoTester\src"/>
<property name="libs" location="C:\Selenium\Ref_Library"></property>
<property name="build" location="build"></property>

<!-- Define the classpath which includes the junit.jar and the classes after compiling--> 
<path id="AutoTester.classpath">
<pathelement location="bin"/>
<pathelement location="${libs}/jxl.jar"/>
<pathelement location="${libs}/selenium-java-srcs.jar"/>
<pathelement location="${libs}/selenium-java.jar"/>
<pathelement location="${libs}/selenium-server-standalone.jar"/>
<pathelement location="${libs}/testng.jar"/>
</path>

<!-- Deletes the existing build and result directories-->
<target name="clean">
<delete dir="${build}" />
</target>

<!-- Creates the build, and test results directories-->
<target name="makedir">
<mkdir dir="${build}" />
</target>

<!-- Compiles the java code -->
<target name="compile" depends="clean, makedir">
<javac srcdir="${src}" destdir="${build}" debug="true" includeAntRuntime="false">
<classpath refid="AutoTester.classpath" />
</javac>
</target> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T10:36:09.547

XML 文件必须始终包含一个包含所有其他元素的根元素。这看起来像一个 Ant 构建脚本，这意味着您忘记将它包装在一个`<project>`元素中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T10:34:09.453

看起来缺少根元素，或者您的示例中可能没有包含整个 XML。如果它是一个 Ant 脚本，如它所见，请查看[http://ant.apache.org/manual/using.html上的示例](http://ant.apache.org/manual/using.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T10:34:51.430

必须有一个包含其余元素的根元素。

只需创建一个，例如：

```
<myXml>
    <property name="src" location="C:\Selenium\Workspace\AutoTester\src"/>

    <!-- Rest of your xml -->

</myXml> 
```

# xslt - 在数组中存储节点

> ID：16057693
> 
> 赞同：0
> 
> 时间：2013-04-17T10:29:44.057
> 
> 标签：xslt, xslt-2.0

是否可以将所有内容节点存储为一个数组并传递给另一个模板？我已经尝试过，但无法成功。我的选择表达式正在选择正确的节点。

```
 <xsl:variable name="array" select="/data/contents/content[ .....  ] />
   <xsl:value-of select="$array/.../... " />

    <xsl:variable name="bannerList" select="data/contents[$dayOfWeekIndex]/content[position() &lt;= 5]" />

    <xsl:apply-templates select="$bannerList" mode="article">
        <xsl:with-param name="numberOfBanners" select="count($bannerList)" />
    </xsl:apply-templates> 
```

我想改用 call-template 并将bannerList 作为参数发送。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T11:59:38.177

是的，它很容易接近，看看：

**XML:**

```
<body>
  <RIAssetType><text>Product</text></RIAssetType>
  <RIAssetType><text>Service</text></RIAssetType>
  <RIAssetType><text>Company/Business Unit</text></RIAssetType>
  <RIAssetType><text>Technology</text></RIAssetType>
  <RIAssetType><text>Intellectual Property/Data Only</text></RIAssetType>
</body> 
```

**XSLT：**

```
<?xml version='1.0' ?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:template match="body">
    <copyBody>
    <xsl:call-template name="childCopy">
      <xsl:with-param name="bodyChild" select="self::body/child::*"/>
    </xsl:call-template>
    </copyBody>
  </xsl:template>

  <xsl:template name="childCopy">
    <xsl:param name="bodyChild"/>
    <xsl:for-each select="$bodyChild/self::*">
      <xsl:copy>
        <xsl:copy-of select="."/>
      </xsl:copy>
    </xsl:for-each>
  </xsl:template>
</xsl:stylesheet> 
```

**输出：**

```
<copyBody>
  <RIAssetType>
    <RIAssetType>
      <text>Product</text>
    </RIAssetType>
  </RIAssetType>
  <RIAssetType>
    <RIAssetType>
      <text>Service</text>
    </RIAssetType>
  </RIAssetType>
  <RIAssetType>
    <RIAssetType>
      <text>Company/Business Unit</text>
    </RIAssetType>
  </RIAssetType>
  <RIAssetType>
    <RIAssetType>
      <text>Technology</text>
    </RIAssetType>
  </RIAssetType>
  <RIAssetType>
    <RIAssetType>
      <text>Intellectual Property/Data Only</text>
    </RIAssetType>
  </RIAssetType>
</copyBody> 
```

看来您在某处的 XPATH 中有 struct，请再次检查。

# javascript - 如何在屏幕外预加载ajax

> ID：16057699
> 
> 赞同：0
> 
> 时间：2013-04-17T10:30:08.553
> 
> 标签：javascript, jquery, ajax, load, preload

我正在尝试这样做。

我有一个带有 8 个图像的滑块，逐个传递。如果单击 Next 或 Prev 按钮，传递 8 个新图像。（所有这些图像都在我的 index.php 中声明）所以：

我需要在**屏幕外**（左侧 4 个和右侧 4 个）预加载 8 个图像（来自数据库），当我单击 Next 或 Prev 按钮时，会通过每个组。

我需要这样做以不加载所有图像（它将超过 200 个）。

我的代码是这样的：

```
<script type="text/javascript">
$(document).ready(function() {
   $("#foo1").carouFredSel({
       items    : 8,
       direction : "left",
       width : "100%",
       scroll : {
          items : 1,
          easing : "swing",
          duration : 300
       }                    
    }); 

    $("#foo1_next").click(function() {
        $("#foo1").trigger("next", 4);
    });

    $("#foo1_prev").click(function() {
        $("#foo1").trigger("prev", 4);
    });
});
</script> 
```

太感谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:37:25.943

如果您想预加载图像而不显示它们，您可以随时执行

```
function preloadImage(url) {
  var image = new Image();
  image.src = url;
  return image;
} 
```

然后在 DOM 中插入图像。

# android - Google Maps Android API v2：有没有一种快速的方法可以知道给定位置是否有标记？

> ID：16057700
> 
> 赞同：3
> 
> 时间：2013-04-17T10:30:08.607
> 
> 标签：android, google-maps, google-maps-markers, google-maps-android-api-2

我想知道给定的 LatLng 位置是否有标记。有什么快速的方法可以做到这一点，还是我需要编写自己的函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T16:00:05.347

Xavjer 的回答是正确的，但如果你有很多标记，你可能想要删除循环：

```
Map<LatLng, Marker> map = ...; 
```

和：

```
Marker marker = map.get(yourLatLng);
if (marker != null) {
    // just do it
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T10:41:36.033

你可以试试：

```
for( i=0;i<map.markers.length; i++ ) {
  var mlat = map.markers[i].position.lat();
  var mlng = map.markers[i].position.lng();
  if (mlat == yourGivenLat && mlng == yourGivenLng) {
    //do whatever you want
  }
} 
```

# extjs - Xtemplate if sencha touch 中的条件

> ID：16057703
> 
> 赞同：4
> 
> 时间：2013-04-17T10:30:20.123
> 
> 标签：extjs, if-statement, sencha-touch

我有以下 Xtemplate 代码：

```
('Ext.XTemplate',
    '<div class="moreArrow"></div>',
    '<div class="img"><img src="http://localhost/WL2/assets/rest/{image}"/></div>',                       
    '<div class="meta">',
    '<h3>{merchName}</h3>',
    '<div class="actions">',
        '<button class="seen{[values.seen ? " selected" : ""]}">{action}</button>',
        '{% if (values.seen) { %}',
            '<button class="thumb up{[values.like ? " selected" : ""]}"><b></b></button>',
            '<button class="thumb down{[values.dislike ? "selected" : ""]}"><b></b>  </button>',
        '{% } else { %}',
            '<button class="want{[values.wantToSee ? "selected" : ""]}">Want to Go There</button>',
        '{% } %}',
        '</div>',
    '</div>'
) 
```

我的问题是该部分中的if条件`{% if (values.seen) { %}`不起作用，即单击按钮时，它应该显示两个不喜欢和喜欢的按钮。导致此问题的代码有什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T06:04:49.170

它可能不起作用，因为您没有将它与任何东西进行比较。

顺便说一句，这里有几个例子来了解如何使用**if**条件：

使用比较运算符：

```
<tpl if="totalDiscount &gt; 0"> 
```

使用“与”运算符

```
<tpl if="active == true && available == true"> 
```

使用 XTemplates 变量：

```
'{% if (xindex % 2 === 1) { %}' +
    '<div>Odd Row</div>' +
'{% } %}' 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-18T16:33:06.527

我认为您没有正确使用 XTemplate。查看[文档](http://docs.sencha.com/touch/2.0.2/#!/api/Ext.XTemplate)页面并尝试用`<tpl if>`标签替换您的条件

# php - 作为 cron 作业运行时访问 PHP 包括上面的 webroot

> ID：16057704
> 
> 赞同：0
> 
> 时间：2013-04-17T10:30:24.120
> 
> 标签：php, apache, cron

我正在尝试使用包含敏感信息的 PHP 脚本，因此我使用包含来托管 webroot 上方的密码。

该脚本可以通过浏览器正常运行，但是当我将其作为 crob 作业运行时，它会生成有关包含的错误消息。

open_basedir 设置是：/var/www/vhosts/xxx/:/tmp/——想知道这里是否相关？

感谢有关如何解决此问题或解决方法的任何建议。

```
PHP Warning:  include(../includes.php): failed to open stream: No such file or directory in /var/www/vhosts/xxx.com/httpdocs/linkedin_status.php on line 6
PHP Warning:  include(../includes.php): failed to open stream: No such file or directory in /var/www/vhosts/xxx.com/httpdocs/linkedin_status.php on line 6
PHP Warning:  include(): Failed opening '../includes.php' for inclusion (include_path='.:') in /var/www/vhosts/xxx.com/httpdocs/linkedin_status.php on line 6
PHP Notice:  Use of undefined constant API_KEY - assumed 'API_KEY' in /var/www/vhosts/xxx.com/httpdocs/linkedin_status.php on line 88
PHP Notice:  Use of undefined constant SCOPE - assumed 'SCOPE' in /var/www/vhosts/xxx.com/httpdocs/linkedin_status.php on line 89
PHP Notice:  Use of undefined constant REDIRECT_URI - assumed 'REDIRECT_URI' in /var/www/vhosts/xxx.com/httpdocs/linkedin_status.php on line 91 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T10:38:59.753

这总是对我有用...

```
require_once("/full/path/to/your/file/includes.php"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T10:39:24.120

您可能遇到的是 Cronjob 使用了不同的 php.ini，因此使用了不同的设置。`phpinfo();`要确认这一点，您可以创建一个将结果写入文件的 php 脚本。在输出中，您将看到正在使用的 php.ini。

你可以做些什么来解决这个问题：

*   执行 cronjob 时指定要使用的 php.ini。
*   通过 wget 命令运行 cronjob，该命令实际上通过网络服务器（如浏览器）执行脚本。Wget 是一个命令提示工具（不是 PHP！），它从 Internet 调用一个 url 并将其写入屏幕或文件。

# actionscript-3 - 是否可以在 Actionscript 3 中缩放和平移多个图像/电影剪辑？

> ID：16057705
> 
> 赞同：1
> 
> 时间：2013-04-17T10:30:26.053
> 
> 标签：actionscript-3, flash, zooming, movieclip, pan

我想出了如何加载外部图像并缩放和平移它。（主图）

我想在主图像的某些地方实现信息图标，但是由于图像可以缩放和平移，我需要这些图标保持在原来的位置。

请参阅下图以获得更好的理解。无论图标在哪里，都是产品，如果单击图标，则会加载带有产品信息的外部 .SWF。在完美的世界中，图标不会缩放，只会平移。

我的基本理解是每个图标都必须是一个单独的电影剪辑。每个都有自己的一组听众。当主图像被平移和缩放时，我只是不知道如何使图标留在相关产品上。

任何帮助或建议将不胜感激。

（[http://www.marketingfanatics.co.za/images/example.jpg](http://www.marketingfanatics.co.za/images/example.jpg)）

```
package  {

import flash.display.MovieClip;
import fl.motion.MatrixTransformer;
import flash.display.Sprite;
import flash.display.Shape;
import flash.display.Bitmap;
import flash.display.Loader;
import flash.net.URLRequest;
import flash.events.ProgressEvent;
import flash.events.Event;
import flash.events.MouseEvent;
import flash.filters.DropShadowFilter;
import flash.geom.Matrix;
import flash.geom.Point;
import flash.events.KeyboardEvent;
import flash.ui.Mouse;

public class Main extends MovieClip {

    public function Main() {

        mcIn.visible = false;
        mcOut.visible = false;
        infoBox.wordWrap = true;
        infoBox.mouseEnabled = false;

        var board:Sprite = new Sprite();
        addChild(board);

        var boardWidth:int = 690;
        var boardHeight:int = 489;

        board.x = 0.0;
        board.y = 0.0;

        board.graphics.beginFill(0xDDDDDD);
        board.graphics.drawRect(0, 0, boardWidth, boardHeight);
        board.graphics.endFill();

        var spImage:Sprite = new Sprite();
        board.addChild(spImage);

        var boardMask:Shape = new Shape();
        boardMask.graphics.beginFill(0xDDDDDD);
        boardMask.graphics.drawRect(0, 0, boardWidth, boardHeight);
        boardMask.graphics.endFill();
        board.addChild(boardMask);
        spImage.mask = boardMask;

        var scaleFactor:Number = 0.8;
        var minScale:Number = 0.25;
        var maxScale:Number = 2.0;
        var image:Bitmap;

        var loader:Loader = new Loader();
        loader.load(new URLRequest("source_material/Irrigation_1195X847.jpg"));
        loader.contentLoaderInfo.addEventListener(Event.COMPLETE, initPic);
        loader.contentLoaderInfo.addEventListener(ProgressEvent.PROGRESS, updateInfo);
        infoBox.text = "Loading the Image";

        function updateInfo(e:ProgressEvent):void {
            infoBox.text = "Loading: " + String(Math.floor(e.bytesLoaded/1024)) + " KB of " + String(Math.floor(e.bytesTotal/1024)) + " KB.";
        }

        function initPic(e:Event):void {
            infoBox.text = "";
            infoBox.visible = false;
            image = Bitmap(loader.content);
            minScale = boardWidth/image.width;
            image.scaleX = minScale;
            image.scaleY = minScale;

            spImage.addChild(image);
            spImage.addChild(mcIn);
            spImage.addChild(mcOut);

            spImage.addEventListener(MouseEvent.MOUSE_DOWN, startDragging);
            stage.addEventListener(MouseEvent.MOUSE_UP, stopDragging);

            loader.contentLoaderInfo.removeEventListener(Event.COMPLETE, initPic);
            loader.contentLoaderInfo.removeEventListener(ProgressEvent.PROGRESS, updateInfo);
            loader = null;

            board.filters = [ new DropShadowFilter() ];
            spImage.addEventListener(MouseEvent.CLICK, zoom);
        }

        function startDragging(mev:MouseEvent):void {
            spImage.startDrag();
        }

        function stopDragging(mev:MouseEvent):void {
            spImage.stopDrag();
        }

        function zoom(mev:MouseEvent):void {
            if ((!mev.shiftKey) && (!mev.ctrlKey)) {
                return;
            }

            if ((mev.shiftKey) && (mev.ctrlKey)) {
                return;
            }

            var mat:Matrix;

            var externalCenter:Point = new Point(spImage.mouseX, spImage.mouseY);
            var internalCenter:Point = new Point(image.mouseX, image.mouseY);

            if (mev.shiftKey) {
                image.scaleX = Math.max(scaleFactor * image.scaleX, minScale);
                image.scaleY = Math.max(scaleFactor * image.scaleY, minScale);

            }

            if (mev.ctrlKey) {
                image.scaleX = Math.min(1 / scaleFactor * image.scaleX, maxScale);
                image.scaleY = Math.min(1 / scaleFactor * image.scaleY, maxScale);

            }

            mat = image.transform.matrix.clone();

            MatrixTransformer.matchInternalPointWithExternal(mat, internalCenter, externalCenter);

            image.transform.matrix = mat;
        }

        stage.addEventListener(KeyboardEvent.KEY_DOWN, keyHandler);
        stage.addEventListener(KeyboardEvent.KEY_UP, keyHandler);

        function keyHandler(ke:KeyboardEvent):void {
            mcIn.x = spImage.mouseX;
            mcIn.y = spImage.mouseY;

            mcOut.x = spImage.mouseX;
            mcOut.y = spImage.mouseY;

            mcIn.visible = ke.ctrlKey;
            mcOut.visible = ke.shiftKey;

            if (ke.ctrlKey || ke.shiftKey) {
                Mouse.hide(); } else {
                    Mouse.show();
            }
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:21:41.300

您的问题：**是否可以在 Actionscript 3 中缩放和平移多个图像/影片？**

您可以平移该大小的图像，或缩放...由于图像的大小，您会丢失帧，所以我建议使用绿色袜子 BlitMask，完全符合您的需要。它有关于如何使用它的示例：

```
 http://www.greensock.com/blitmask/ 
```

此外，如果您希望滚动多个图像，请将图像放入容器中，因此，movieClip 然后滚动movieclip 或更改比例，更改深度 Z 位置或您所拥有的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T11:35:43.707

`Sprite`在让我们说对象的主图像顶部添加描述。将主图像添加到舞台后，请执行以下操作：`setChildIndex(descriptionObject,numChildren-1);`这将确保描述位于一切之上。

# playframework-2.0 - 如何在 Play Framework 2.0 中指定默认 cookie maxAge？

> ID：16057706
> 
> 赞同：2
> 
> 时间：2013-04-17T10:30:26.210
> 
> 标签：playframework-2.0

[`application.session.maxAge`](http://www.playframework.com/documentation/1.2.3/configuration)在 Play Framework 1.x 中，可以通过在 application.conf 中设置来指定默认的 cookie 最长期限。2.x 的文档没有提到如何覆盖它，这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T10:50:36.037

I figured it out.

This [pull request](https://github.com/playframework/Play20/pull/384) tipped me off.

So on line 516 in `Http.scala` session max age is overriden by the configuration variable `session.maxAge` if it exists:

```
 override val maxAge = Play.maybeApplication.flatMap(_.configuration.getInt("session.maxAge")).getOrElse(-1) 
```

# c++ - 使用带有对象向量的迭代器c ++

> ID：16057709
> 
> 赞同：0
> 
> 时间：2013-04-17T10:30:35.493
> 
> 标签：c++, object, vector, erase

我的类包含一个`ofstream`文件，当使用迭代器删除此类对象向量的对象时遇到问题。

这是错误：

`Error 10 error C2249: 'std::basic_ios<_Elem,_Traits>::operator =' : no accessible path to private member declared in virtual base 'std::basic_ios<_Elem,_Traits>' c:\program files (x86)\microsoft visual studio 10.0\vc\include\ostream`

代码：

```
static vector<VOIP> calls;
...
for(...)
{
    VOIP v = VOIP(...);
    calls.push_back(v);
}
...
for( int i = 0 ; i < calls.size() ; i++)
{
    if(...)
    {
        vector<VOIP>::iterator it = calls.begin() + i;
        calls.erase(it);//"?"
        break;
    }
} 
```

面对错误 C2249 从“？”行引发，任何帮助，这就是类

```
class VOIP
{
public:
    VOIP(string SourceDirectoryPath, string startTime, signalling sig, int callerIp[], int calleeIp[], int callerPort, int calleePort);
    VOIP(const VOIP & voip);
    ~VOIP(void);
    //caller and callee voice vectors 
    vector<u_char> callerVoiceVector;
    vector<u_char> calleeVoiceVector;
    //caller and callee voice files and path
    ofstream callerVoiceFile;
    ofstream calleeVoiceFile;   
    string outFilePath;
    string log;
    ofstream logFile;
    string startTime;
    string endTime;
    string length;
} 
```

复制构造函数中的注释行引发相同的错误，即错误 C2249

```
VOIP::VOIP(const VOIP & voip)
    /*:calleePort(voip.calleePort), calleeVoiceFile(voip.calleeVoiceFile), calleeVoiceVector(voip.calleeVoiceVector),
     callerPort(voip.callerPort), callerVoiceFile(voip.callerVoiceFile), callerVoiceVector(voip.callerVoiceVector),
     callType(voip.callType), endTime(voip.endTime), length(voip.length), log(voip.log), logFile(voip.logFile),
     outFilePath(voip.outFilePath), startTime(voip.startTime),
     pleaseDial(voip.pleaseDial), DLHmm(voip.DLHmm)//signalings*///TODO
{
    cout<<"inside copy constractor"<<endl;
}

VOIP::~VOIP(void)
{
    callerVoiceVector.clear();
    calleeVoiceVector.clear();
    callerVoiceFile.close();
    calleeVoiceFile.close();
    logFile.close();
    cout<<"inside destractor"<<endl;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T11:59:08.700

通常，标准库容器要求它们包含的对象可以是可复制构造和可复制分配的。也就是说，它们需要访问复制构造函数（在您的情况下为`VOIP::VOIP(const VOIP&)`）和复制赋值运算符（在您的情况下为`VOIP::operator=(const VOIP&)`）。如果您的类没有显式提供它们，则只要编译器可以执行这些函数，编译器就会自动生成这些函数：这是，只要所有类成员也是可复制构造或可复制分配的，而 . 则不是这种情况`VOIP`，因为`ofstream`无法复制。

尽管如此，`VOIP`提供了一个显式的复制构造函数，所以那里没有问题。这就是需要复制构造函数的原因`vector<VOIP>::push_back()`。不幸的是，它没有提供复制赋值运算符，而且看起来很奇怪，`vector<VOIP>::erase()`需要它。原因是，当您从向量中删除一个元素时，必须将其后的所有元素复制到前一个位置以填补空白。这就是错误消息告诉您的内容：`ofstream`不可复制，因为它的基类`std::basic_ios<>`不可复制，因此`VOIP`不可复制。

为了解决您的问题，您可以提供一个复制赋值运算符来`VOIP`遵循您用于复制构造函数的相同想法。顺便说一句，在 C++ 中有一种叫做*三规则的*东西：如果一个类有一个显式的析构函数、复制构造函数或复制赋值运算符，它通常需要这三个。`VOIP`有前两个，但错过了第三个。写下来，一切都会好起来的。

# r - winbugs中节点错误的多重定义

> ID：16057710
> 
> 赞同：3
> 
> 时间：2013-04-17T10:30:36.583
> 
> 标签：r, winbugs, r2winbugs

我尝试使用`WinBUGS`from `R`via `BRugs`and `R2WinBUGS`，代码如下：

```
require(R2WinBUGS)
require(BRugs)
model<-function(){
  for(i in 1:N){
    y[i] <- x[i] + w[i]
    w[i] ~ dnorm(0, sigma.y)
    x[i] <- a - b*5 + v[i]
    v[i] ~ dnorm(0, sigma.x)
  }
a ~ dunif(0, 1)
b ~ dunif(-1, 1)
sigma.y ~ dgamma(0.1, 0.1)
sigma.x ~ dgamma(0.1, 0.1)
}

write.model(model, con = "model.bug")
modelCheck("model.bug")
# model is syntactically correct

N = 10
y = rnorm(100)
data = list(N = N, y = y)
inits = function(){
  list(a = runif(1, 0, 1), b = runif(1, -1, 1), sigma.x= rgamma(1, 0.1, 0.1), 
       sigma.y = rgamma(1, 0.1, 0.1))
}
parameters = c("a", "b", "sigma.x", "sigma.y")

result.sim <- bugs(data, inits, parameters, "model.bug",
                n.chains = 1, n.iter = 1000,
                program= "winbugs",
                working.directory = NULL,
                debug = T) 
```

结果没有出来，我发现了部分`log.txt`的`WinBUGS`：

```
display(log)
check(C:/Users/ADMINI~1.PC-/AppData/Local/Temp/RtmpkrnOoc/model.bug.txt)
model is syntactically correct
data(C:/Users/ADMINI~1.PC-/AppData/Local/Temp/RtmpkrnOoc/data.txt)
data loaded
compile(1)
multiple definitions of node y[1]
inits(1,C:/Users/ADMINI~1.PC-/AppData/Local/Temp/RtmpkrnOoc/inits1.txt)
command #Bugs:inits cannot be executed (is greyed out)
gen.inits()
command #Bugs:gen.inits cannot be executed (is greyed out)
thin.updater(1)
update(500)
command #Bugs:update cannot be executed (is greyed out)
set(a) 
```

很明显`error`is `multiple definitions of node y[1]`，但它是什么意思？我不认为`y[1]`有多个定义，因为我使用`y[i]`但`y`不在`loop`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T11:48:15.650

当您没有正确定义模型的可能性时，您往往会遇到多重定义错误。如果您有`y`数据，则需要`y`在模型中声明分布。目前，您`y`在模型中设置为确定性（而不是随机）节点。根据您的实际型号，您可以设置

```
y[i] ~ dnorm(x[i], w[i]) 
```

然后，您必须在每个容差 w[i] 上具有不同的先验分布（仅是正的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T08:55:48.170

在您的模型中，y[i] 具有正态分布，均值 x[i]，方差由 v[i] 的方差加上 w[i] 的方差定义。这将为您提供在 y[i] ~ dnorm(x[i] , prec[i]) 中使用的适当参数。请注意，BUGS 中的正态分布由精度 = 1 / 方差定义，因此 prec[i] <- 1 / (1/sigma.y + 1/sigma.x)。假设 sigma 是精度 - 尽管这是令人困惑的符号，因为 sigma 通常是标准偏差。

# playframework - 在 Play 的子目录中组织模板

> ID：16057715
> 
> 赞同：11
> 
> 时间：2013-04-17T10:30:47.300
> 
> 标签：playframework, playframework-2.0

我可以在 play 2.1 的子目录中组织我的视图模板吗？

如果我有这样的结构，我会收到编译器错误：`app/views/common/component.scala.html`

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-22T05:59:51.207

是的，您可以在子目录中构建您的模板。你得到什么错误？.由于其他原因，您可能会遇到错误。如果你使用 app/views/common/component.scala.html 那么你可以从 scala 类中访问你的模板为**views.html.common.component()**

来自 html：**@common.component**

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-17T10:38:22.667

好的，控制器中的导入需要是`import views.html.common.*`

# android - 使用 android.sax 解析 Enclosure 标签

> ID：16057716
> 
> 赞同：0
> 
> 时间：2013-04-17T10:30:57.653
> 
> 标签：android

我想解析附件标签中的“url”属性

我只看到了使用 DefaultHandler 的示例。使用 android.sax Parser 的任何方式

附件标签位于标签“项目”内

代码：

```
public List<Message> parse() throws IOException, SAXException {
        final Message currentMessage = new Message();
        RootElement root = new RootElement(RSS);
        final List<Message> messages = new ArrayList<Message>();
        Element channel = root.getChild(CHANNEL);

        channel.getChild(LASTBUILDATE).setEndTextElementListener(new EndTextElementListener(){
            public void end(String body) {
                lastBuildDate = body;
            }
        });
        Element item = channel.getChild(ITEM);

        item.setEndElementListener(new EndElementListener(){
            public void end() {
                currentMessage.setLastBuildDate(lastBuildDate);
                messages.add(currentMessage.copy());
            }
        });
        item.getChild(TITLE).setEndTextElementListener(new EndTextElementListener(){
            public void end(String body) {
                currentMessage.setTitle(body);
            }
        });
        item.getChild(LINK).setEndTextElementListener(new EndTextElementListener(){
            public void end(String body) {
                currentMessage.setLink(body);
            }
        });

        item.getChild(DESCRIPTION).setEndTextElementListener(new EndTextElementListener(){
            public void end(String body) {
                currentMessage.setDescription(body);
            }
        });
        item.getChild(PUB_DATE).setEndTextElementListener(new EndTextElementListener(){
            public void end(String body) {
                currentMessage.setDate(body);
            }
        });
        item.getChild(CATEGORY).setEndTextElementListener(new EndTextElementListener(){
            public void end(String body) {
                currentMessage.setCategory(body);
            }
        });
        item.getChild(GUID).setEndTextElementListener(new EndTextElementListener(){
            public void end(String body) {
                currentMessage.setGuid(body);
            }
        });

        Xml.parse(this.getInputStream(), Xml.Encoding.UTF_8, root.getContentHandler());
        return messages;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:48:16.463

我的回答是

```
Element enclosure = item.getChild(ENCLOSURE);
        enclosure.setStartElementListener(new StartElementListener() {

            @Override
            public void start(Attributes attributes) {
                currentMessage.setEnclosureUrl(attributes.getValue("url"));
            }
        }); 
```

# mule - 如何在 Mule 中部署新流程而不重新启动它？

> ID：16057719
> 
> 赞同：4
> 
> 时间：2013-04-17T10:31:00.430
> 
> 标签：mule, hotdeploy

当我们更改 Mule 部署描述符（mule-deploy.properties 文件）以添加更多流配置文件时，是否必须重新启动 Mule 才能开始运行新流？有什么方法可以在不重新启动 Mule 或中断已经运行的流程的情况下部署新流程？

据我从[Mule 文档中的热部署页面](http://www.mulesoft.org/documentation-3.2/display/32X/Hot+Deployment)了解，热部署仅适用于更改的配置文件和 Java 类。它也适用于部署描述符吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T16:03:17.637

您始终可以`touch`使用任何已加载的配置文件让 Mule 触发热部署，以便它在`mule-deploy.properties`.

# jquery - Ckeditor 无法在 Fancybox 中加载

> ID：16057722
> 
> 赞同：0
> 
> 时间：2013-04-17T10:31:14.780
> 
> 标签：jquery, fancybox, ckeditor

我对 Ckeditor 有疑问。当使用 Fancybox Ajax 弹出窗口时，我的 textarea 不会转换为 Ckeditor 区域。

在我的页面顶部，我加载 Ckeditor：

```
<script type="text/javascript" src="<?php echo base_url(); ?>scripts/ckeditor/ckeditor.js"></script> 
```

之后我制作了一个textarea。转换通常应该由 ckeditor 类完成。

```
<textarea rows="10" cols="80" class="ckeditor" name="short_description"></textarea> 
```

文本区域不转换。这是由 AJAX 引起的。是否有人在加载 Ajax 的弹出窗口中有使用 CKeditor 字段的经验，现在如何在 textarea 上重新绑定 Ckeditor？

PS firebug 给出以下错误：

```
SyntaxError: syntax error
[Afbreken op deze fout]     

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://ww

nl.js?t=D2LI (regel 2)

SyntaxError: syntax error
[Afbreken op deze fout]     

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://ww

styles.js?t=D2LI (regel 2)

TypeError: b.lang.contextmenu is undefined
[Afbreken op deze fout]     

...ea,div";CKEDITOR.plugins.add("contextmenu",{requires:"menu",onLoad:function(){CK... 
```

感谢帮助！

```
/** Comment **/ 
```

我使用此代码加载 Fancybox：

```
$('a.fancybox').fancybox({
    type:'ajax',
    scrolling:'no',
    autoSize:true,
    afterShow:_init_ajax_forms
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-05T17:14:19.240

我不明白这些错误，但我认为这可能是因为 DOM 元素只有在 DOM 准备好后的事件期间存在时才会被替换。在最初的尝试之后，CKEDITOR 不会尝试自动替换元素。

假设 afterShow 是一个回调函数（我不了解花式框），请尝试在 _init_ajax_forms 内进行 textarea 替换或使用类似的东西。

```
afterShow:function() {
    CKEDITOR.replace('myLittlePony');
    _init_ajax_forms();
} 
```

并使用类似的文本区域

```
<textarea id="myLittlePony" name="myLittlePony"></textarea> 
```

如果这不是我想的 ajax 回调，请找出是什么并在那里进行替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-29T06:41:33.780

要在fancybox close 上销毁 ckeditor，您可以执行以下操作：

```
<?php
$this->widget('cms.extensions.fancybox.EFancyBox', array('target' => 'a#fancy-link','config' => array('onClosed'=>'js:function(){for(name in CKEDITOR.instances){ CKEDITOR.instances[name].destroy(true);}}')));
?> 
```

# c# - 在 Windows 8 应用程序中调整图像大小

> ID：16057723
> 
> 赞同：0
> 
> 时间：2013-04-17T10:31:15.480
> 
> 标签：c#, windows-8, windows-store-apps, winrt-xaml, image-resizing

我遇到了在我的 Windows 8 应用程序（C# xaml）中调整图像大小的需要。搜索该主题给了我很多结果。但他们中的大多数都在使用`WritableBitmapEx`codeplex 类或单独的类。没有一个函数可以优雅地调整大小吗？我有一个 Listview，它的模板包含一个 Image 元素，它是数据绑定的。每个项目的图像元素 uri 都设置为文件夹中的图像。列表视图根据设置以 2 种尺寸（760,200）和（380,100）呈现。图像默认保存为 760,200 尺寸。

所以现在发生的情况是，当列表视图的大小为 380,100 时，它仍然显示大图像，因此被截断。我想缩小图像并将其适合图像元素大小。

平台提供的任何功能允许我们这样做吗？有什么方法吗`Windows.Graphics.Imaging`？（我找到了一个：（）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T10:40:19.263

最简单的解决方案是将图像的 Stretch 属性设置为“UniformToFill”并使用单个图像（较大的图像）。由于您的纵横比相同，这将具有简单缩放图像的效果。注意：这假设图像只是相同源材料的不同尺寸。

另一个相对简单的选择是使用转换器指向适当的路径。每个视图大小使用一个转换器，并修改路径字符串以指向所需大小的正确文件夹。

不过，如果我正在写这篇文章，我会选择第一个选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T11:01:07.790

这是不使用的解决方案`WritableBitmapEx`

[如何在 C# WinRT/winmd 中调整图像大小？](https://stackoverflow.com/questions/12349611/how-to-resize-image-in-c-sharp-winrt-winmd/13775824#13775824)

# android - 语音识别安卓

> ID：16057725
> 
> 赞同：1
> 
> 时间：2013-04-17T10:31:24.460
> 
> 标签：android, voice-recognition

每次我想说话时，我如何使*Android上的***[语音到文本](http://developer.android.com/reference/android/speech/RecognizerIntent.html#ACTION_RECOGNIZE_SPEECH)**应用程序连续工作（即；**无需单击按钮）？**我可以使用哪个事件？

 ***谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T08:52:29.173

您需要使用[SpeechRecognizer](http://developer.android.com/reference/android/speech/SpeechRecognizer.html)

查看`recognizeDirectly`此类中的方法： [https ://github.com/gast-lib/gast-lib/blob/master/library/src/root/gast/speech/SpeechRecognizingAndSpeakingActivity.java](https://github.com/gast-lib/gast-lib/blob/master/library/src/root/gast/speech/SpeechRecognizingAndSpeakingActivity.java)

警告：当前的 Android api 不能可靠地工作。它可能会连续记录一段时间然后崩溃。此外，它会在更高版本的 Android 中向您的用户发出哔哔声，这可能是不可取的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-04T10:15:46.017

公共类 MainActivity 扩展 Activity {

```
private static final int REQUEST_CODE = 1234;
private ListView resultList;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.activity_main);
    resultList = (ListView) findViewById(R.id.list);
    // to check if recognizer available or not
    PackageManager pm = getPackageManager();
    List<ResolveInfo> activities = pm.queryIntentActivities(new Intent(
            RecognizerIntent.ACTION_RECOGNIZE_SPEECH), 0);
    if (activities.size() == 0) {

        Toast.makeText(getApplicationContext(), "Recognizer Not Found",
                1000).show();
    }

    startVoiceRecognitionActivity();
}

private void startVoiceRecognitionActivity() {

    Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
    intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,
            RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
    intent.putExtra(RecognizerIntent.EXTRA_PROMPT,
            "AndroidBite Voice Recognition...");
    intent.putExtra(
            RecognizerIntent.EXTRA_SPEECH_INPUT_POSSIBLY_COMPLETE_SILENCE_LENGTH_MILLIS,
            5000000);
    startActivityForResult(intent, 1234);

}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == REQUEST_CODE && resultCode == RESULT_OK) {
        ArrayList<String> matches = data
                .getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);

        System.out.println("Matches list " + matches);
        resultList.setAdapter(new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, matches));
    }
    super.onActivityResult(requestCode, resultCode, data);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
} 
```

}

//它会解决你的问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-07T12:19:14.537

你需要写一个服务，它会在后台运行，你必须学习一个类**RecognitionService**和一个接口**RecognitionListener** 干杯***

# lua - lua中的表内表

> ID：16057728
> 
> 赞同：1
> 
> 时间：2013-04-17T10:31:49.167
> 
> 标签：lua, lua-table

我正在尝试访问表格内的表格元素。

```
MainTable={Table1={},Table2={},Table3={}}

Table1.is="Bool"
Table1.Name="Bit1". 
```

表 2 和表 3 的类似参数

如果我访问其中一个`Maintable.Table1[is]`or `Maintable[Table1[is]]`，它将返回 null。

我如何获得`is`or的值`Name`？

在这方面我如何使用对？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T10:41:42.033

```
MainTable.Table1.is="Bool"
MainTable.Table1.Name="Bit1". 
```

在这种情况下

```
print(MainTable.Table1.is) // Bool 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T14:08:00.963

您可以使用以下任一方法：

```
MainTable.Table1.is
MainTable.Table1["is"]
MainTable["Table1"]["is"] 
```

得到相同的结果。

这是一个工作示例：[http ://eval.in/16665](http://eval.in/16665)

# c++ - 在自己的应用程序中插入支持 WebRTC 的 web 框架

> ID：16057730
> 
> 赞同：4
> 
> 时间：2013-04-17T10:32:01.870
> 
> 标签：c++, qt, webkit, qtwebkit, webrtc

我们即将扩展一个基于 Qt 5 的现有应用程序，以支持使用 WebRTC 的视频/音频聊天。

我们已经尝试使用 Qt 5.0.2 内置的 QtWebkit 小部件但没有成功，因为 getUserMedia() 似乎对于 JavaScript 是不可见的，或者通常没有实现。经过进一步研究，我们发现最新版本的 QtWebkit 目前不支持 WebRTC。例如，不包括像 libjingle 这样的必要库。

为了支持这一点，我们在互联网上找到了以下内容：

*   [http://qt-project.org/search/tag/webrtc](http://qt-project.org/search/tag/webrtc)（致力于将 WebRTC 集成到 QtWebkit 中的团队）
*   [https://lists.webkit.org/pipermail/webkit-qt/20](https://lists.webkit.org/pipermail/webkit-qt/2013-February/003501.html) ​​13-February/003501.html（多次尝试将WebRTC与QtWebkit结合使用）

有没有人想出如何将使用 WebRTC 的视频/音频聊天集成到您自己的应用程序中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-23T11:05:27.177

Qt 目前正在从 webkit 切换到 chromium。据我所知，这个新引擎将从一开始就支持 webrtc。这个新项目称为[QtWebEngine](http://qt-project.org/wiki/QtWebEngine)。[您可以从这里](https://qt.gitorious.org/qt-labs/qtwebengine/source/master%3a)获取当前状态。我已经编译了它，它引入了 libjingle 并包装了它。也许你应该抓住 QtWebEngine 的源代码并用它进行测试。

# google-apps-script - 问问题

> ID：16057748
> 
> 赞同：0
> 
> 时间：
> 
> 标签：google-apps-script, tel

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:27:48.250

URL 中不允许使用许多字符，例如“电话”和“否”之间的空格。

为避免在代码中生成 URL 时出现此类问题，请使用`encodeURIComponent()`. 请参阅[此参考](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)。

# javascript - 关闭窗口按钮 - javascript

> ID：16057749
> 
> 赞同：0
> 
> 时间：2013-04-17T10:33:02.630
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, browser, twitter-bootstrap

我尝试了以下方法：

```
<a href="JavaScript:window.close()" class="close"></a> 
```

但是当我尝试单击时，浏览器窗口不会关闭。事实上，没有任何影响。

*   我应该使用什么？

*   此外，这是一个 Rails 应用程序，该站点是使用引导程序构建的。使用 rails 路由（javascript、bootstrap 已经在资产中）关闭此浏览器窗口的更好方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T10:51:54.683

Did you open the window you're trying to close with `window.open()`? You're not allowed to arbitrarily close windows using JavaScript - that would get very annoying, very quickly. Your script can only close a window that it opened itself, or the current window if that was opened by another script.

See also: [window.close](https://developer.mozilla.org/en-US/docs/DOM/window.close).

# sorting - Opencart 按畅销产品排序

> ID：16057751
> 
> 赞同：3
> 
> 时间：2013-04-17T10:33:07.990
> 
> 标签：sorting, opencart, product

我正在尝试在类别页面中**按畅销产品添加排序。**为此，我在`catalog/controller/product/category.php`控制器中添加了以下代码：

```
$this->data['sorts'][] = array(
    'text'  => 'Bestsellers',
    'value' => 'bestsellers',
    'href'  => $this->url->link('product/category', 'path=' . $this->request->get['path'] . '&sort=bestsellers&order=DESC' . $url)
); 
```

添加后，我可以在排序列表中看到*畅销书选项。*现在我正在尝试进行数据库查询以完成此排序。我试图克隆现有的排序，如*按名称排序（Az）*，但因为我是 opencart 的新手，所以我无法做到这一点。

您能否分享您的想法如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T10:52:18.560

我只会指导你，查询部分取决于你......

还编辑`catalog/model/catalog/product.php`- 方法`getProducts($data)`。检查这部分：

```
$sort_data = array(
    'pd.name',
    'p.model',
    'p.quantity',
    'p.price',
    'rating',
    'p.sort_order',
    'p.date_added'
); 
```

并添加您的新排序，例如`bestsellers`，因此您最终会得到这个数组：

```
$sort_data = array(
    'pd.name',
    'p.model',
    'p.quantity',
    'p.price',
    'rating',
    'p.sort_order',
    'p.date_added',
    'bestsellers',
); 
```

现在你必须编辑下一部分，`if (isset($data['sort']) && in_array($data['sort'], $sort_data)) {`所以你应该最终得到：

```
if (isset($data['sort']) && in_array($data['sort'], $sort_data)) {
    if ($data['sort'] == 'pd.name' || $data['sort'] == 'p.model') {
        $sql .= " ORDER BY LCASE(" . $data['sort'] . ")";
    } elseif ($data['sort'] == 'p.price') {
        $sql .= " ORDER BY (CASE WHEN special IS NOT NULL THEN special WHEN discount IS NOT NULL THEN discount ELSE p.price END)";
    } elseif ($data['sort'] == 'bestsellers') { // <-- YOUR NEW SORTING
        $sql .= " ORDER BY <ADD YOUR SORTING QUERY HERE>";
    } else {
        $sql .= " ORDER BY " . $data['sort'];
    }
} else {
    $sql .= " ORDER BY p.sort_order";   
} 
```

添加正确的查询而不是`<ADD YOUR SORTING QUERY HERE>`You 后应该完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-08T15:21:54.727

我进行了 2 处更改并测试了代码运行良好：

```
1) remove the (,) in 'bestsellers',
2) updated the sql code to read: 
    $sql .= " ORDER BY (SELECT sum(quantity) FROM " . DB_PREFIX . "order_product op where op.product_id=p.product_id GROUP BY p.product_id) "; 
```

这是目录/模型/目录/product.php的代码：

```
 $sort_data = array(
        'pd.name',
        'p.model',
        'p.quantity',
        'p.price',
        'rating',
        'p.sort_order',
        'p.date_added',
        'bestsellers'
    );  

    if (isset($data['sort']) && in_array($data['sort'], $sort_data)) {
        if ($data['sort'] == 'pd.name' || $data['sort'] == 'p.model') {
            $sql .= " ORDER BY LCASE(" . $data['sort'] . ")";
        } else if ($data['sort'] == 'p.price') {
            $sql .= " ORDER BY (CASE WHEN special IS NOT NULL THEN special WHEN discount IS NOT NULL THEN discount ELSE p.price END)";
        } else if ($data['sort'] == 'bestsellers') { // Sorting as suggested by shadyyx
            $sql .= " ORDER BY (SELECT sum(quantity) FROM " . DB_PREFIX . "order_product op where op.product_id=p.product_id GROUP BY p.product_id) ";
        } else {
            $sql .= " ORDER BY " . $data['sort'];
        }
    } else {
        $sql .= " ORDER BY p.sort_order";   
    } 
```

以及 catalog\controller\product\product.php 的代码：

```
 $data = array(
        'filter_category_id'   => $categories_info['category_id'],
        'sort'                 => 'bestsellers',
        'order'                => 'DESC'
        );
    $results = $this->model_catalog_product->getProducts($data); 
```

# iphone - 用于从 sqlite DB 获取数据的 NSObject 类通过 NSmutuable 返回 null 到 UItableview 类

> ID：16057752
> 
> 赞同：0
> 
> 时间：2013-04-17T10:33:12.910
> 
> 标签：iphone, objective-c, xcode, sqlite

我想访问从 UIViewcontroller 类的数据库中获取的 DBhelper 类中的数据，我已经导入了类、创建的对象、方法和所有变量都可以在 UIViewcontroller 类中访问。当通过 uiviewcontroller 类调用方法时，它们显示数据库结果或分配要执行的任何方法，但是当通过对象在 uiviewcontroller 中使用这些变量/数组时，它们返回 null。即使我也实现了 prperties 并合成了它们.. 这是我的代码

```
-(NSMutableArray *) SaveDBInArray {

    [self createEditableCopyOfDatabaseIfNeeded];
    [self initializeDatabase];

    const char *sql = "SELECT * FROM table11";
    if (sqlite3_prepare_v2(database, sql, -1, &init_statement, NULL) != SQLITE_OK) {
        //NSAssert1(0, @"Error: failed to prepare statement with message '%s'.", sqlite3_errmsg(database));   }
    while (sqlite3_step(init_statement) == SQLITE_ROW) {
          colum1= [NSString stringWithUTF8String:(char *)sqlite3_column_text(init_statement,0)];
        colum2= [NSString stringWithUTF8String:(char *)sqlite3_column_text(init_statement,1)];
        allEnteries=[[NSMutableArray alloc]init];
         [allEnteries addObject:colum1];
        [allEnteries addObject:colum2]; 
       }
    NSLog(@"array with values %@",allEnteries );
//HERE WHENEVER METHOD IS BEING CALLED IT IS DISPLAYING ONLY TOP ONE VALUE FROM EACH COLUM BUT I WANT ALL OF THEM

    sqlite3_reset(init_statement);
    [self closeDatabase];
    return allEnteries;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:49:18.937

您的 DBhelper 类代码...

你一次又一次地初始化数组你应该使用下面的代码

```
\\Initialize array here
 yourtableviewclass*yourclass= [yourtableviewclassalloc]init];
 dbH.allEnteries=[[NSMutableArray alloc]init];
 \\\\\\\ you must create property of allEnteries array in yourtableviewclassclass and 
 synhtesize it. and then try to access that array with following 2 line code in ur    tableview class
 yourtableviewclass *obj = [yourtableviewclass alloc]init ];
 nslog("%@"obj.yourtableviewclass );

 while (sqlite3_step(init_statement) == SQLITE_ROW) {
      colum1= [NSString stringWithUTF8String:(char     *)sqlite3_column_text(init_statement,0)];
    colum2= [NSString stringWithUTF8String:(char *)sqlite3_column_text(init_statement,1)];

     [yourclass.allEnteries addObject:colum1];
    [yourclass.allEnteries addObject:colum2]; 
   } 
```

Yourtableviewclas.h 代码 @interface Yourtableviewclas: uiviewcontroller{ nsmutablearray *allEnteries ; } @property (nonatimic)nsmutablearray allEnteries @end

Yourtableviewclass.m 代码

```
synthesize allEnteries ;
-(void)viewdidload{
yourtableviewclass *obj = [yourtableviewclass alloc]init ];
 nslog("%@"obj.allEnteries );
} 
```

# css - CSS样式化多个元素

> ID：16057754
> 
> 赞同：1
> 
> 时间：2013-04-17T10:33:20.737
> 
> 标签：css, css-selectors

关于 CSS 的快速问题。我目前正在开发一个项目，该项目包含一些样式化页面的 CSS 文件。此刻，我试图找出重新设计几个元素的最佳方式，即：包含在特定 div 中的 (h1, h2, h3) 即：

```
<container id=1>
  <h1></h1>
  <h2></h2>
</container> 
```

问题是这些元素已经具有 CSS 属性，我可以覆盖它们，但有没有比以下更好的方法：

```
#1 h1, #1 h2, #1 h3{styling} 
```

我知道一个更好的选择是重新设计整个 CSS，但目前只进行覆盖更可行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T10:39:51.513

是的，你做对了。最好的方法就是制作比已经存在的选择器更具体的选择器。

`!important`是一种应该不惜一切代价避免的 hack，除非绝对不可能覆盖选择器。在这种情况下它不是，所以`!important`应该避免。

您还应该知道 HTML ID 不应以数字开头，它们必须以字母开头。并且应该用引号括起来。例如：

```
<container id="one">
  ...
</container> 
```

# matlab - MATLAB：自动调整 GUI 组件/字体的大小

> ID：16057757
> 
> 赞同：11
> 
> 时间：2013-04-17T10:33:26.843
> 
> 标签：matlab, user-interface, resize, screen-resolution

我在尝试使我的 MATLAB GUI**自动调整大小**时遇到​​问题。在彻底搜索网络寻求帮助和大量测试后，我找不到解决方案。

我一直在我的笔记本电脑（**屏幕尺寸/分辨率 = 1366x768 ）中开发一个简单的 GUI（使用 MATLAB，***不使用 GUIDE*）。一个非常简化的版本如下所示：

 **## ![笔记本电脑中显示的 GUI](https://i.stack.imgur.com/VVFyz.png)

当我在台式计算机上运行相同的 GUI 时（**屏幕尺寸/分辨率 = 1920x1080**），它以下列方式显示：

## ![桌面上显示的 GUI](https://i.stack.imgur.com/o59uI.png)

考虑到屏幕尺寸，GUI 的尺寸会自动初始化（***代码在本文底部提供***）。如您所见（由红色箭头突出显示），组件之间的字体/间距不会自动调整大小，因此无论我们在何处运行文件，GUI 都具有相同的外观。

此外，当手动调整 GUI 大小时，组件会发生一些重叠：

## ![桌面中显示的 GUI - 手动调整大小后](https://i.stack.imgur.com/LGzYP.png)

* * *

用于这个最小工作示例的代码如下：

```
function resizingGUIexample()

%% SET UP GUI
hdl.mainfig = figure(); 

% MANAGE FIGURE DIMENSIONS -------------------------------------------------------------------------------------
set(hdl.mainfig, 'Units', 'pixels');
dims              = get(0, 'ScreenSize');
screenHeight      = dims(4);
verticalMargins   = floor((0.2*screenHeight)/2);          % =10% of the screen height in each side
figureHeight      =       (0.8*screenHeight);
figureWidth       =       (0.8*screenHeight)*(4/3);       % 4/3 Aspect Ratio
set(hdl.mainfig, 'Position', [0, verticalMargins, ... 
                figureWidth, figureHeight]);

movegui(hdl.mainfig,'center')     % move GUI to center

color = get(hdl.mainfig,'Color'); % get background color to hide static texts, etc...

% AXES ---------------------------------------------------------------------------------------------------------
hdl.axes = axes('Parent',   hdl.mainfig,  ...
             'Units',   'Normalized', ...
          'Position',   [0.295 0.05 0.63 0.63*(4/3)]);

% PUSH BUTTONS -------------------------------------------------------------------------------------------------
hdl.donePB = uicontrol(hdl.mainfig,                          ...
                  'Position',   [0.85 0.91 0.075 0.075], ...
                    'String',   'Done',                  ...
                  'Fontsize',   16,                      ...
                     'Units',   'normalized',            ...
                'FontWeight',   'Bold');

% BUTTON GROUP and RADIO BUTTONS -------------------------------------------------------------------------------
hdl.buttonGroup = uibuttongroup('Parent',    hdl.mainfig,  ...
                          'FontSize',    16,           ...
                        'FontWeight',    'Bold',       ...
                   'BackgroundColor',    color,        ...
                             'Units',    'Normalized', ... 
                          'Position',    [0.05 0.69 0.2 0.2]);
titleBG = sprintf('Intensity\nNormalization');
set(hdl.buttonGroup, 'Title', titleBG);

hdl.VolumeRB = uicontrol(hdl.buttonGroup,                   ...
                             'Style',    'radiobutton', ...
                            'String',    'Volume',      ...
                          'FontSize',    14,            ...
                        'FontWeight',    'Bold',        ...
                             'Units',    'normalized',  ...
                   'BackgroundColor',    color,         ...
                          'Position',    [0.1 0.67 0.8 0.3]);

hdl.SliceRB = uicontrol(hdl.buttonGroup,                   ...
                            'Style',    'radiobutton', ...
                           'String',    'Slice',       ...
                         'FontSize',    14,            ...
                       'FontWeight',    'Bold',        ...
                            'Units',    'normalized',  ...
                  'BackgroundColor',    color,         ...
                         'Position',    [0.1 .25 0.8 0.3]);

end 
```

关于如何解决这些问题的任何想法？

提前非常感谢。

亲切的问候，

法比奥·内里

**EDIT1：**我也非常愿意提供更好的方法来初始化 GUI 维度和策略，以避免在不同显示器/屏幕分辨率下运行 GUI 时出现问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T12:22:48.217

首先，不使用 GUIDE 做得很好 - 你已经通过了第一个测试 :)

我强烈建议您查看并使用 Ben Tordoff 的[GUI 布局工具箱](http://www.mathworks.com/matlabcentral/fileexchange/27758-gui-layout-toolbox)。尽管您可以使用该属性来执行此类操作`ResizeFcn`，但我可以告诉您，使用 GUI 布局工具箱要容易*得多*，它只会为您处理这些事情。

管理一个可以在不同（可能是多个）显示器上以不同大小和分辨率运行的 GUI 是一件痛苦的事情。我建议预先指定您要支持的一系列尺寸/分辨率，并坚持下去（如果应用程序发现自己处于不受支持的设置中，即使是错误的），而不是试图完全通用。如果即使在最低公分母设置上您也必须使一切正常工作，您可能不得不在更正常的设置上牺牲我们的易用性。

你似乎已经发现`get(0, 'ScreenSize')`了`movegui`命令。想到的其他有用的东西是`get(0, 'MonitorPositions')`,`get(0, 'ScreenPixelsPerInch')`和使用图形的`OuterPosition`而不是`Position`属性。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-15T17:21:54.203

你可以使用：

```
function yourfunction
scrsz = get(0,'ScreenSize');%Obtem o tamanho do monitor

hFigure = figure(...  %Insere Uma figura para construção da interface
    'NumberTitle','off',...
    'Menubar','none',...
    'Tag','Figure',...
    'Name','You Figure',...
    'Units','pixels',...
    'Resize','on',...
    'Position',[(scrsz(3)-300)/2 (scrsz(4)-600)/2 800 700]);

Button = uicontrol('parent',hFigure,...%Insere objeto do tipo Pushbutton!
    'Style','pushbutton',...
    'String','Processa',...
    'Units','normalized',... 
    'Position',[0.25 0.25 0.5 0.5],...
    'Callback',{@callbackButton}); 

function callbackButton(hObject,eventdata)
a = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-12T17:58:42.910

将 a 声明为 a`uipanel`的父级`uicontrol`是使 MATLAB GUI 字体大小独立于屏幕分辨率的一种方法。您需要`fontunits`在`normalized`设置`fontsize`. 还将 设置为`fontsize`0 到 1 之间的小数值。

示例代码如下。

```
hp = uipanel(...);
uicontrol(hp,'text','fontunits','normalized','fontsize',0.5,...); 
```

这种方法需要注意的是，它`fontsize`会随着父对象缩放，而父对象可能会随着您的应用程序窗口缩放。在我的应用程序中，这种行为是可取的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T11:47:37.427

您是否尝试过使用*ResizeFcn*命令？您可以使用它让 MATLAB 自动将您的单选按钮、面板等调整为您需要的任何大小。您可以使用此功能使按钮和面板的大小成为 GUI 尺寸的功能。

网上有很多关于如何使用它的文档。例如，这解释了如何将其用于 uipanel： http: [//www.mathworks.com/help/matlab/creating_plots/using-panel-containers-in-figures--uipanels.html#f7-53231](http://www.mathworks.com/help/matlab/creating_plots/using-panel-containers-in-figures--uipanels.html#f7-53231)

您还可以键入：

> > 编辑（[docroot'/techdoc/creating_plots/examples/doc_uipanel1']）；

进入您的命令窗口以启动一个示例 gui，在该示例中他们使用 resize 函数来调整 gui 中各种对象的大小。**

# javascript - 如何触发页面背景变化？

> ID：16057761
> 
> 赞同：1
> 
> 时间：2013-04-17T10:33:33.237
> 
> 标签：javascript, jquery, jquery-cycle

我有幻灯片，通过 jq 循环插件，我想在每张新幻灯片后更改我的页面背景？

我会感谢任何提示在哪里看。

upd：我在 jq 循环中找到了选项“之后”，将尝试解决它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T10:50:36.170

You can use the before and after callback in the option settings, example:

```
function get_random_color() {
    var letters = '0123456789ABCDEF'.split('');
    var color = '#';
    for (var i = 0; i < 6; i++ ) {
        color += letters[Math.round(Math.random() * 15)];
    }
    return color;
}

$('.slideshow').cycle({
    before: function(){ $('body').css('background-color', get_random_color()); },
    fx: 'fade'
}); 
```

hope this helps.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T11:04:58.530

我想你指的是：http: [//jquery.malsup.com/cycle/](http://jquery.malsup.com/cycle/)？

[http://jquery.malsup.com/cycle/options.html](http://jquery.malsup.com/cycle/options.html)上的文档应该对您有很大帮助。

我相信您可以通过执行以下操作来实现它：

```
$('#slideshow').cycle({
    fx: 'fade',
    onPrevNextEvent: onSlideChange()    
});

function onSlideChange() {
    //perform all changes on slide change here.
    $("body").css("background-image", "test.jpg");
} 
```

# debugging - 如何使用过滤器截断日志文件？

> ID：16057769
> 
> 赞同：1
> 
> 时间：2013-04-17T10:34:10.513
> 
> 标签：debugging, jakarta-ee, struts2, log4j, logfile

我需要一些过滤器来截断我的 Java EE 应用程序写入的大量日志信息。我正在使用Struts2。

这是我的文件`log4j.properties`

```
# Define the root logger with appender file
log = E:\\Uiip\\ProjectWork\\Workspace
log4j.rootLogger = DEBUG, DEBUG_APPENDER
log4j.logger.OTHER_LOGGER=DEBUG, INFO_APPENDER

log4j.additivity.OTHER_LOGGER = false

#File appender for log debug
log4j.appender.DEBUG_APPENDER=org.apache.log4j.FileAppender
log4j.appender.DEBUG_APPENDER.File=${log}/logDebug.txt

#File Appender for log info
log4j.appender.INFO_APPENDER=org.apache.log4j.FileAppender
log4j.appender.INFO_APPENDER.File=${log}/logInfo.txt

# Define the layout for file appender log debug
log4j.appender.DEBUG_APPENDER.layout=org.apache.log4j.PatternLayout
log4j.appender.DEBUG_APPENDER.layout.conversionPattern=%d [%t] %m%n

# Define the layout for file appender log info
log4j.appender.INFO_APPENDER.layout=org.apache.log4j.PatternLayout
log4j.appender.INFO_APPENDER.append=false
log4j.appender.INFO_APPENDER.layout.ConversionPattern= %d [%t] %m%n 
```

每次我启动我的应用程序时，仅用于登录，logdebug 文件就变成了大约 1MB！

我可以使用什么来过滤我的调试日志文件？

Ps 信息文件工作正常！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:35:46.810

您不能使用属性文件配置进行过滤。请改用 xml 配置。带有过滤器的示例配置

```
<appender name="MyFileAppender" class="org.apache.log4j.FileAppender">
    <param name="File" value="myfile.log"/>
    <param name="Append" value="false"/>
    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern" value="%d{HH:mm:ss} [%t] %m%n"/>
    </layout>
    <filter class="org.apache.log4j.varia.StringMatchFilter">
        <param name="StringToMatch" value="MyStringToMatch" />
        <param name="AcceptOnMatch" value="true" />
    </filter>
    <filter class="org.apache.log4j.varia.DenyAllFilter"/>
</appender> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T11:45:27.913

您可以将错误级别设置为`categorie`s，例如：

```
# This will always be printed (except TRACE level...);
log4j.category.org.apache.struts2=DEBUG

# This will be printed only in INFO or higher
log4j.category.org.springframework.beans.factory.xml=INFO
log4j.category.org.springframework.jdbc.core.StatementCreatorUtils = INFO

# This will be printed only in ERROR or higher
log4j.category.com.opensymphony.xwork2=ERROR
log4j.category.freemarker.beans=ERROR
log4j.category.freemarker.cache=ERROR 
```

阅读有关[**日志级别的更多信息**](http://en.wikipedia.org/wiki/Log4j#Log_level)

# oracle - Oracle - 检索具有时间戳值的日期

> ID：16057770
> 
> 赞同：2
> 
> 时间：2013-04-17T10:34:13.177
> 
> 标签：oracle, timestamp

我们有一种情况，我们在 Oracle DB 中有一个表（比如 Forms），其中有一个类型为 date 的列（比如 edition_date）。它严格意味着以 YYYY-MM-DD（例如：2012-11-23）格式保存没有时间戳值的日期信息。

不幸的是，由于代码问题，很多行都是用时间戳值创建的。该表中有大量记录，我只想更新那些包含这些不良数据的行。我可以使用查询来做到这一点

```
UPDATE forms SET edition_date = TRUNC( edition_date ) 
```

我想给它添加一个 where 子句，所以它只更新坏数据。问题是，我不确定如何检索那些添加了时间戳的行。以下是我拥有的数据的快照：

```
 FORM_ID    EDITION_DATE
    5          2012-11-23
    6          2012-11-23 11:00:15
    ..
    11         2010-07-11 15:23:22
    ..
    13         2011-12-31 
```

我只想检索表单 ID 为 6 和 11 的行。我尝试使用长度函数，但我认为这仅适用于字符串。有没有办法做到这一点。感谢任何可以帮助我的人。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T10:41:54.907

日期没有格式；你只看到它是如何显示的。但是，您的问题的答案实际上是您所说的：

> 我想给它添加一个 where 子句，所以它只更新坏数据。

因此，日期不等于没有时间的日期：

```
update forms
   set edition_date = trunc(edition_date)
 where edition_date <> trunc(edition_date) 
```

为确保不再发生这种情况，您可以向表中添加[检查约束](http://docs.oracle.com/cd/E11882_01/server.112/e25789/datainte.htm#CNCPT1660)：

```
alter table forms 
  add constraint chk_forms_edition_date
      check ( edition_date = trunc(edition_date) ); 
```

我建议不要使用上述*所有方法。*不要破坏可能有用的数据。你应该简单地选择`trunc(edition_date)`你不想要时间的地方。您可能希望在将来使用该时间。

你是对的，不要使用 LENGTH() 等作为日期，这取决于你的[NLS_DATE_FORMAT](http://docs.oracle.com/cd/E11882_01/server.112/e25513/initparams145.htm#REFRN10119)设置，因此可能会因会话而异。处理日期时始终使用日期函数。

# java - 来自 HTTPS 的视频无法在 Android 应用中播放

> ID：16057772
> 
> 赞同：0
> 
> 时间：2013-04-17T10:34:17.993
> 
> 标签：java, android

我正在尝试播放从具有 https url 的服务器下载的视频，但它显示

“抱歉，这部影片无法播放。”

对于少数安卓设备。我尝试了很多东西，但没有任何效果。它适用于 HTTP 网址。我还发现 HTTPS 的视频只能在 Android OS 3.1 之后播放：

[http://developer.android.com/guide/appendix/media-formats.html](http://developer.android.com/guide/appendix/media-formats.html)

**有人可以建议我解决这个问题。任何帮助将不胜感激。**

这是我用来播放视频的代码：

```
 Uri uri = Uri.parse(videoURL);
    video.setVideoURI(uri);
    ctlr            = new MediaController(this);
    ctlr.setMediaPlayer(video);
    video.setMediaController(ctlr);
    video.requestFocus();
    video.setOnPreparedListener(this);
    video.setOnCompletionListener(this);
    video.setKeepScreenOn(true);
    video.start(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:35:42.123

将此添加到您的活动中

```
int SDK_INT = android.os.Build.VERSION.SDK_INT;

        if (SDK_INT > 8) {

            StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
                    .permitAll().build();
            StrictMode.setThreadPolicy(policy);

        } 
```

# asp.net - 将数据表绑定到gridview时不显示emptydatatext

> ID：16057773
> 
> 赞同：0
> 
> 时间：2013-04-17T10:34:19.900
> 
> 标签：asp.net

我正在创建一个数据表并动态添加行并将数据表绑定到gridview，当没有记录显示时，因为没有使用emptydatatext找到记录，但这不起作用。这是我的代码

```
 protected void show_fence_report(object sender, EventArgs e)
  {

    int drp_fence_id              = common.make_int(common.get_request("drp_fence"));
    string fence_start_date_time1 = common.get_request("fence_start_date_time");
    string fence_end_date_time1   = common.get_request("fence_end_date_time");

    //Delete data from datatable and gridview
    dt_fence.Clear();

    if (gridview_fence.DataSource != null)
    {
        ((DataView)gridview_fence.DataSource).Table.Clear();
    }
    gridview_fence.DataBind();
    gridview_fence.EmptyDataText = "Records Not Found";

    hid_fence_id.Value = drp_fence_id.ToString();
    hid_fence_start_datetime.Value = fence_start_date_time1;
    hid_fence_end_datetime.Value = fence_end_date_time1;

    display_fence_report();

    gridview_fence.EmptyDataText = "Records Not Found";

}

public void display_fence_report()
{

    string fence_id1 = "", fence_name1, fence_type1 = "", fence_status;
    float default_size = 100000, landmark_latitude1 = 0, landmark_longitude1 = 0, fence_latitude1 = 0, fence_longitude1 = 0, fence_size1 = 0, longitude_x = 0, latitude_y = 0;
    int points_polygon = 0;      

    ArrayList vertices_x = new ArrayList();
    ArrayList vertices_y = new ArrayList();

    query = "select latitude,longitude,added_date_time,speed,location,(select object_value from tracking_master_objects where object_id = a.object_id) as object from tracking_data_domain a where object_id in(select object_id from tracking_assign_fence a where fence_id = '" + hid_fence_id.Value + "' and is_active = '1') and (added_date_time between convert(datetime, '" + hid_fence_start_datetime.Value + "', 105) and convert(datetime, '" + hid_fence_end_datetime.Value + "', 105)) order by gps_id asc";

    dr = common.run_query(query, db, cm, dr, 0);
    if (dr.HasRows)
    {
        //To Build Fence Latitudes and Longitudes
        query = "select fence_id,fence_name,fence_type,landmark_latitude,landmark_longitude,fence_latitude,fence_longitude,fence_size from tracking_master_fences where domain_id = '" + domain_id1 + "' and fence_id = '" + hid_fence_id.Value + "' and is_active = '1'";

        dr2 = common.get_row(query, db2, cm2, dr2, 0);
        if (dr2.HasRows)
        {

            fence_id1 = dr2["fence_id"].ToString();
            fence_name1 = dr2["fence_name"].ToString();
            fence_type1 = dr2["fence_type"].ToString();
            landmark_latitude1 = common.make_float(dr2["landmark_latitude"].ToString());//fs_lat
            landmark_longitude1 = common.make_float(dr2["landmark_longitude"].ToString());//fs_long
            fence_latitude1 = common.make_float(dr2["fence_latitude"].ToString());//sec_lat
            fence_longitude1 = common.make_float(dr2["fence_longitude"].ToString());//sec_long
            fence_size1 = common.make_float(dr2["fence_size"].ToString());

        }
        dr2.Close();

        //Build POlygon Vertices
        if (fence_type1 == "4")
        {

            query = "select polygon_latitude,polygon_longitude from tracking_master_fence_polygons where fence_id = '" + hid_fence_id.Value + "' and domain_id = '" + domain_id1 + "'";
            dr1 = common.run_query(query, db1, cm1, dr1, 0);
            if (dr1.HasRows)
            {
                while (dr1.Read())
                {
                    vertices_x.Add(dr1["polygon_latitude"]);
                    vertices_y.Add(dr1["polygon_longitude"]);
                }
            }
            dr1.Close();
            points_polygon = vertices_x.Count;

        }

        //Create a Datatable of 14 rows
        dt_fence.Columns.Add("fence_id", typeof(string));
        dt_fence.Columns.Add("Date", typeof(string));
        dt_fence.Columns.Add("Speed", typeof(string));
        dt_fence.Columns.Add("Location", typeof(string));
        dt_fence.Columns.Add("landmark_latitude", typeof(string));
        dt_fence.Columns.Add("landmark_longitude", typeof(string));
        dt_fence.Columns.Add("fence_latitude", typeof(string));
        dt_fence.Columns.Add("fence_longitude", typeof(string));
        dt_fence.Columns.Add("latitude", typeof(string));
        dt_fence.Columns.Add("longitude", typeof(string));
        dt_fence.Columns.Add("fence_size", typeof(string));
        dt_fence.Columns.Add("fence_type", typeof(string));
        dt_fence.Columns.Add("fence_status", typeof(string));
        dt_fence.Columns.Add("object", typeof(string));

        while (dr.Read())
        {
            fence_status = "";
            float latitude = common.make_float(dr["latitude"].ToString());
            float longitude = common.make_float(dr["longitude"].ToString());

            if (fence_type1 == "1" || fence_type1 == "2")
            {

                if (((landmark_latitude1 * 100000) < (latitude * 100000) && (fence_latitude1 * 100000) > (latitude * 100000)) && ((landmark_longitude1 * 100000) < (longitude * 100000) && (fence_longitude1 * 100000) > (longitude * 100000)))
                {
                    fence_status = "Inside";
                }
                else
                {
                    fence_status = "Outside";
                }

            }
            else if (fence_type1 == "3")
            {
                float ft = ((latitude * 100000) - (landmark_latitude1 * 100000));
                float st = ((longitude * 100000) - (landmark_longitude1 * 100000));

                float sqrt = common.make_float(Math.Sqrt((ft * ft) + (st * st)).ToString());

                if (fence_size1 < sqrt)
                {
                    fence_status = "Out Side";
                }
                else
                {
                    fence_status = "In Side";
                }
            }
            else if (fence_type1 == "4")
            {
                longitude_x = common.make_float(dr["latitude"].ToString());
                latitude_y = common.make_float(dr["longitude"].ToString());

                int i = 0, j = 0, c = 0;
                for (i = 0, j = points_polygon - 1; i < points_polygon; j = i++)
                {
                    float vertices_y_i_val = common.make_float(vertices_y[i].ToString());
                    float vertices_y_j_val = common.make_float(vertices_y[j].ToString());
                    float vertices_x_i_val = common.make_float(vertices_x[i].ToString());
                    float vertices_x_j_val = common.make_float(vertices_x[j].ToString());

                    if (((vertices_y_i_val > latitude_y != (vertices_y_j_val > latitude_y)) &&
(longitude_x < (vertices_x_j_val - vertices_x_i_val) * (latitude_y - vertices_y_i_val) / (vertices_y_j_val - vertices_y_i_val) + vertices_x_i_val)))
                    {
                        c = 1;
                    }

                }

                if (c == 1)
                {
                    fence_status = "In Side";
                }
                else
                {
                    fence_status = "Out Side";
                }
            }

            dt_fence.Rows.Add(fence_id1, dr["added_date_time"], dr["speed"], dr["location"], landmark_latitude1, landmark_longitude1, fence_latitude1, fence_longitude1, latitude, longitude, fence_size1, fence_type1, fence_status, dr["object"]);

        }//End of while Loop

        //hid_ds_fence.Value = dt_fence.ToString();
        gridview_fence.DataSource = dt_fence;
        gridview_fence.DataBind();

    }
    dr.Close();

    fence_modalpopup.Show();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:42:51.083

在您的代码中，您在 DataBind 之后分配 EmptyDataText 值。它应该在 DataBind 之前。如果“消息”不会改变，您应该按照建议在 HTML 源代码中定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:39:19.543

你可以使用这样的东西

```
 <Columns>

    <Columns>
<EmptyDataTemplate>
        <asp:Label ID="lblEmptydata" runat="server" Text="No Data here"></asp:Label>
      </EmptyDataTemplate>
                        </asp:GridView> 
```

或者可以试试这个

```
in my remark gridview's row_databoundevent i wrote

if (e.Row.Cells[0].Text == "&nbsp;") // to display text when there is no data

{
e.Row.Cells[0].Text = "No Data Found";

} 
```

或者也可以试试这个

```
dt.Rows.Add(dt.NewRow());
                    grid1.DataSource = dt;
                    grid1.DataBind();
                    int totalcolums = grid1.Rows[0].Cells.Count;
                    grid1.Rows[0].Cells.Clear();
                    grid1.Rows[0].Cells.Add(new TableCell());
                    grid1.Rows[0].Cells[0].ColumnSpan = totalcolums;
                    grid1.Rows[0].Cells[0].Text = "No Data Found"; 
```

# android - 无法让异步任务工作

> ID：16057775
> 
> 赞同：0
> 
> 时间：2013-04-17T10:34:36.737
> 
> 标签：android, android-asynctask

我正在调用一个在主线程上执行网络操作的类，导致我的应用程序在更新的设备上崩溃。因此，我尝试将对该类的调用移动到我的主要活动中的 AsyncTask 内部类中。但是现在我得到空参考期望。

这是我的异步任务：

```
 private class RetreiveAmazonNodesXML extends AsyncTask {

        private Exception exception;

        @Override
        protected Object doInBackground(Object... params) {
               try {
                    childrenBrowseNodesXml = new Amazon(browseNodeId, locality);

                } catch (Exception e) {
                    this.exception = e;
                }
            return null;
        }

     } 
```

这就是我在我的活动中所说的：

```
 RetreiveAmazonNodesXML test = new RetreiveAmazonNodesXML();
 test.execute();
 parseXmlFile(childrenBrowseNodesXml.getBrowseNodesXML()); 
```

childrenBrowseNodesXml 未更新并返回 null。我知道我的 Amazon 类工作正常，所以我用 AsyncTask 做了一些事情，但我不知道？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T10:39:41.417

使用回调从异步任务中获取结果。这里接口回调类：

```
public interface Callback {
    public void onSuccess(Object data);
    public void onError(String errorMsg);
} 
```

并创建这个类的实例并实现它：

```
final Callback resCallback = new Callback() {
    @Override
public void onSuccess(Object data) {
    parseXmlFile(data);
}

@Override
public void onError(String errorMsg) {
    //show error with Alert or Toast
}
}; 
```

并使用您的回调创建 asynctask 类：

```
RetreiveAmazonNodesXML test = new RetreiveAmazonNodesXML(resCallback);
test.execute(yourObjectsParams); 
```

像这样编写 asynctask 类：

```
private class RetreiveAmazonNodesXML extends AsyncTask {
    private Callback responderCallback;
    private Exception exception;

    public GeneralHttpTask(Callback callback){
        this.responderCallback = callback;
    }

    @Override
    protected Object doInBackground(Object... params) {
           try {
                Amazon childrenBrowseNodesXml = new Amazon(browseNodeId, locality);
                return childrenBrowseNodesXml;
            } catch (Exception e) {
                this.exception = e;
            }
        return null;
    }

    @Override
    protected void onPostExecute(Object result) {
        if(result != null) {
            responderCallback.onSuccess(result);
        } else {
            responderCallback.onError(exception);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T10:40:47.807

这是因为您正在尝试使用`AsyncTask`尚未返回的值，就像`AsyncTask`运行**asyncronously**一样。

你应该把`parseXmlFile(childrenBrowseNodesXml.getBrowseNodesXML());`你`AsyncTask`的`onPostExecute()`方法，像这样：

```
 private class RetreiveAmazonNodesXML extends AsyncTask {

    private Exception exception;

    @Override
    protected Object doInBackground(Object... params) {
           try {
                childrenBrowseNodesXml = new Amazon(browseNodeId, locality);

            } catch (Exception e) {
                this.exception = e;
            }
        return null;
    }

    @Override
    protected void onPostExecute(Object obj) {

           parseXmlFile(childrenBrowseNodesXml.getBrowseNodesXML());

    }

 } 
```

此外，`return null`在`doInBackground`方法中可能不是一个好方法，`doInBackground`返回的东西将作为参数`onPostExecute()`自动传递给方法`AsyncTask`。

更多关于`AsyncTask`，请参考[Android 开发者：AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T10:39:28.623

问题是，您创建了一个后台线程 ( `AsyncTask`)，它会在一段时间后（实际执行时）填充 childrenBrowseNodesXml，但您尝试在活动代码中立即使用它。

将您的 parseXMLFile 移动到`onPostExecute(Void result)`AsyncTask 的方法。

# git - Git合并两个分支并将两个分支带到同一级别

> ID：16057782
> 
> 赞同：0
> 
> 时间：2013-04-17T10:34:54.967
> 
> 标签：git, git-merge

我有两个分支 master 和 dev。我们通常在开发分支上工作，然后几天后

```
git checkout master
git merge dev 
```

这将 dev 的所有更改带入 master。但是我们遇到的问题是我们的开发分支没有在 master 中发生变化。所以今天我做了

```
git checkout dev 
git merge master 
```

之后我做了更多的工作并将其提交到 dev 分支上，其他人也更改了 master 分支。现在我想将我的所有更改推送到同一级别的 master 和 ring master 和 dev 我该怎么办？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-17T10:41:25.907

您是否尝试在[master](http://git-scm.com/book/en/Git-Branching-Rebasing)上重新设置 dev 分支？

```
git rebase master dev 
```

然后将（快进）master 合并到 dev

```
git checkout master
git merge dev 
```

# c# - 在 MVC4 中找不到 IIS 7.5 ActionLink 资源

> ID：16057785
> 
> 赞同：3
> 
> 时间：2013-04-17T10:35:07.460
> 
> 标签：c#, asp.net-mvc-3, iis-7.5, html.actionlink

在我的 MVC 应用程序中，`@Html.ActionLink`控制在我的本地机器上运行良好。actionlink 重定向到指定的操作。但是当托管在服务器中时，会出现错误“找不到资源。请检查 url”。
**查看代码**

```
@Html.ActionLink(" ", "ExportToQR", "WPCheckout", new { UserID = Request.QueryString["UserID"], Partnerid = Request.QueryString["Partnerid"] }, new { @class = "btnMakeQR" }) 
```

**按钮图像类**

```
 .btnMakeQR
        {
            background: url(../Images/Generate_QR_Code.png) no-repeat top left;
            display: block;
            width: 111px;
            height: 25px;
            text-indent: -9999px; 
        } 
```

**控制器代码**

```
public class WPCheckoutController : Controller
{
     public ActionResult ExportToQR()
     {
       // logic to get encoding value for "qrcode" from database
        QRCodeEncoder encoder = new QRCodeEncoder();
        Bitmap img = encoder.Encode(qrcode);
        string path = Server.MapPath(@"/Images/QRCode.jpg");        
        img.Save(path, ImageFormat.Jpeg);        
        return base.File(path,"image/jpeg","OrderDetails.jpg");  

     }
} 
```

我的代码中有什么错误。?. 有什么建议么。
**编辑**
这是 url，我在悬停按钮图像时得到。

```
 http://localhost/WPCheckout/ExportToQR?UserID=1013&Partnerid=ph111 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:30:26.300

查看您的代码，您似乎创建了一个文件`/Images/QRCode.jpg`。我想你的意思是`~/Images/QRCode.jpg`？

在第一种情况下，文件将被命名`http://localhost/Images/QRCode.jpg`，由于限制问题，IIS 应用程序可能无法读取该文件。在后一种情况下，它将变为 `http://localhost/WPcheckout/Images/QRCode.jpg`。

参考[此评论](https://stackoverflow.com/a/275791/2298807)：`/xxx`并且`~/xxx`可能会有所不同。

# c# - ajaxToolkit:TabContainer 添加选项卡时确认

> ID：16057791
> 
> 赞同：2
> 
> 时间：2013-04-17T10:35:47.527
> 
> 标签：c#, javascript, asp.net, ajax, tabcontainer

我希望我的 ajaxToolkit:TabContainer 有一个允许用户添加另一个选项卡的选项卡面板。我只希望它在他们单击“+”选项卡面板而不是其他选项时回发。我似乎无法阻止 Javascript 中的事件冒泡：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<script type="text/javascript">
    function checkTab(sender, e) {
        if (sender.get_activeTab().get_headerText().replace("<span>", "").replace("</span>", "") != "+") {
            cancelBubble(e);

        }
        else {
            if (!confirm('Are you sure?')) {
                cancelBubble(e);
            }
        }
    }
    function cancelBubble(e) {
        if (e) {
            e.stopPropagation();
        }
        else {
            window.event.cancelBubble = true;
        }
    }
</script>
</head>
<body>
<form id="form1" runat="server">
<div>
    <asp:ScriptManager ID="ScriptManager" runat="server">
</asp:ScriptManager>
  <ajaxToolkit:TabContainer ID="MyTabContainer" runat="server" OnActiveTabChanged="MyTabContainer_OnActiveTabChanged"
        AutoPostBack="true" OnClientActiveTabChanged="checkTab">
        <ajaxToolkit:TabPanel ID="TabPanel1" runat="server" HeaderText="My First Tab" Enabled="true">
            <ContentTemplate>
                My first tab
            </ContentTemplate>
        </ajaxToolkit:TabPanel>
        <ajaxToolkit:TabPanel ID="AddTabPanel" runat="server" HeaderText="+" Enabled="true">
            <ContentTemplate>
            </ContentTemplate>
        </ajaxToolkit:TabPanel>
    </ajaxToolkit:TabContainer>
</div>
</form>
</body>
</html>

 protected void MyTabContainer_OnActiveTabChanged(object sender, EventArgs e)
    {
        TabPanel tp = new TabPanel();
        tp.HeaderText = "New Tab";
        MyTabContainer.Tabs.Add(tp);
    } 
```

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:25:15.220

您可以`return false;`在 JavaScript 中使用来停止 PostBack。所以我认为你所需要的就是：

```
function checkTab(sender, e) 
{
    if (sender.get_activeTab().get_headerText().replace("<span>", "").replace("</span>", "") != "+") 
    {
        return false;
    }
    else 
    {
       return confirm('Are you sure?');
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T10:06:14.253

感谢 jadarnel27，这是我寻求的最终解决方案：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<script type="text/javascript">
<script type="text/javascript">
    function addTab() {

        if (confirm('Are you sure?')) {
            document.getElementById('<%=AddTabButton.ClientID %>').click();
        }
    }
</script>
</script>
</head>
<body>
<form id="form1" runat="server">
<div>
<asp:ScriptManager ID="ScriptManager" runat="server">
</asp:ScriptManager>
 <asp:Button ID = "AddTabButton" runat="server" OnClick="AddTabButton_OnClick" CssClass="DisplayNone" />
  <ajaxToolkit:TabContainer ID="MyTabContainer" runat="server">
    <ajaxToolkit:TabPanel ID="TabPanel1" runat="server" HeaderText="My First Tab" Enabled="true">
        <ContentTemplate>
            My first tab
        </ContentTemplate>
    </ajaxToolkit:TabPanel>
    <ajaxToolkit:TabPanel ID="AddTabPanel" runat="server" HeaderText="+" Enabled="true" OnClientClick="addTab">
        <ContentTemplate>
        </ContentTemplate>
    </ajaxToolkit:TabPanel>
</ajaxToolkit:TabContainer>
</div>
</form>
</body>
</html>

protected void AddTabButton_OnClick(object sender, EventArgs e)
    {
       TabPanel tp = new TabPanel();
    tp.HeaderText = "New Tab";
    MyTabContainer.Tabs.Add(tp);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T15:40:34.050

将下面的脚本添加到您的项目中，并在页面的最底部添加参考：

```
Sys.Extended.UI.TabPanel.prototype.raiseClick = function (eventArgs) {
    var eh = this.get_events().getHandler("click");
    if (eh) {
        eh(this, eventArgs);
    }
};

Sys.Extended.UI.TabPanel.prototype._header_onclick = function (e) {
    e.preventDefault();
    var eventArgs = new Sys.CancelEventArgs();
    this.raiseClick(eventArgs);

    if (eventArgs.get_cancel() === true)
        return;

    this.get_owner().set_activeTab(this);
    this._setFocus(this);
}; 
```

现在我们添加了取消单击客户端上特定选项卡的功能。使用示例：

```
 <script type="text/javascript">
      function AddTabOnClientClick(sender, args) {
           args.set_cancel(!confirm("Are you sure?"));
      }
 </script>

 <form id="form1" runat="server">
 <ajaxToolkit:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server">
 </ajaxToolkit:ToolkitScriptManager>
 <div>
      <asp:UpdatePanel runat="server">
           <ContentTemplate>
                <ajaxToolkit:TabContainer ID="MyTabContainer" runat="server" AutoPostBack="true"
                     ActiveTabIndex="0">
                     <ajaxToolkit:TabPanel ID="TabPanel1" runat="server" HeaderText="My First Tab" Enabled="true">
                          <ContentTemplate>
                               My first tab
                          </ContentTemplate>
                     </ajaxToolkit:TabPanel>
                     <ajaxToolkit:TabPanel ID="AddTabPanel" runat="server" HeaderText="+" OnClientClick="AddTabOnClientClick">
                          <ContentTemplate>
                          </ContentTemplate>
                     </ajaxToolkit:TabPanel>
                </ajaxToolkit:TabContainer>
           </ContentTemplate>
      </asp:UpdatePanel>
 </div>
 </form>
 <script src="Scripts/MyAjaxToolkitExtensions.js" type="text/javascript"></script> 
```

# weka - Weka 中的 tree.RandomForestExt 分类器和重要性变量

> ID：16057793
> 
> 赞同：1
> 
> 时间：2013-04-17T10:35:56.250
> 
> 标签：weka

我想通过使用 weka 来计算变量的重要性。我阅读了“Breiman 的随机森林机器学习算法的实现”文章，它使用 tree.RandomForestExt 分类器并且它具有重要性变量。我有三个版本的 weka，它们都有 tree.RandomForest 分类器，这个分类器没有可变的重要性。如何为我的 weka 工具下载 tree.RandomForestExt 分类器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:13:42.980

此[链接](http://s112088960.onlinehome.us/ml2005/Zip%20of%20OTHER%20Journal%20Paper%20Files%20NOT%20JOURNAL%20PAPER/Weka_Distro_FredLivingston.zip)将为您下载由 Fred Livingston 制作的 Custom Weka 发行版，您可以在其中找到 RandomForest Extension。

# android - android facebook - 为什么密钥哈希不同？

> ID：16057794
> 
> 赞同：2
> 
> 时间：2013-04-17T10:35:56.953
> 
> 标签：android, facebook

我正在尝试将 FB 集成到 android 应用程序。为此，我在 Windows 7 中使用 cmd 工具获取密钥哈希。

**命令：**

```
C:\adt-bundle-windows-x86-20130219\sdk\platform-tools>keytool -exportcert -alias
 andrpoiddebugkey -keystore "C:\Users\naresh.repalle\.android\debug.keystore" |
"C:\openssl\bin\openssl" sha1 -binary | "C:\openssl\bin\openssl" base64 
```

**输入密钥库密码：android**

**BASE_64_HASH_1**

我在控制台中将密钥哈希（从`cmd`）设置为应用程序，`fb developer`然后尝试在设备中运行它后，我得到了错误，因为**remote_app_id 与存储的 id 不匹配。**

用于使用开发人员控制台重新检查密钥哈希。我在我的应用程序中做了一些编码。使用这个我得到密钥哈希。我正在尝试匹配这两个关键哈希，但它们是不同的。因此，我将这两个设置为关键哈希，但这次我收到错误为“**未指定节点**”。为什么这两个关键哈希是不同的？为什么会发生这些错误。谁能帮我。

// 添加代码以打印出密钥哈希

```
 try {
        PackageInfo info = getPackageManager().getPackageInfo(
                "com.android.example", 
                PackageManager.GET_SIGNATURES);
        for (Signature signature : info.signatures) {
            MessageDigest md = MessageDigest.getInstance("SHA");
            md.update(signature.toByteArray());
            Log.d("KeyHash:", Base64.encodeToString(md.digest(), Base64.DEFAULT));
            }
    } catch (NameNotFoundException e) {

    } catch (NoSuchAlgorithmException e) {

    } 
```

在这里，我将密钥散列为“BASE_64_ENCODED_HASH_2”。我在同一台机器上做了这个。为什么这两个关键哈希是不同的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-30T15:27:18.937

似乎它仅*在*安装 Facebook 应用程序后出现，在我这样做之前，我正在开发并执行，而没有在 FB 应用程序站点上设置任何哈希值。但是在我安装了 FB 应用程序之后，我也遇到了这个问题。如前所述，来自 FB 推荐的 cmd 字符串的哈希值和来自使用上述代码的代码内部的哈希值是不同的。

但是我添加了代码中生成的哈希，这似乎已经清除了它。

# batch-file - 通过批量提取文件夹名称，作为完整路径名的一部分，文件位于何处？

> ID：16057795
> 
> 赞同：0
> 
> 时间：2013-04-17T10:36:00.607
> 
> 标签：batch-file, directory

我知道 %~n1 允许文件名进入路径。如何批量获取文件所在的文件夹名称？

示例：进行此调用

```
 myFolder.bat "Temp\file1WithSpaces.txt" 
```

我通过以下方式提取文件“file1WithSpaces”的名称

```
 %~n1 
```

我只想拉“Temp”。您还猜测“Temp\file1WithSpaces.txt”是相对路径

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:02:41.047

尝试这个：

```
for /f ^delims^=^" %%A in ("%~dp1\..") do  echo %%~nA 
```

# asp.net - 通过 IIS 7 浏览时，图像在 Firefox 中不可见

> ID：16057804
> 
> 赞同：2
> 
> 时间：2013-04-17T10:36:17.203
> 
> 标签：asp.net, firefox, iis-7

我正在使用 Visual Studio 2008 在 asp.net 中设计一个网页。

当我发布网站并将其部署在 iis 版本 7 上并浏览页面时，此页面显示其所有内容，例如 chrome 和 Internet Explorer 中的工具栏图像，但未显示在 Firefox 中。
有趣的是，当我通过 vs2008 运行应用程序并使用 Firefox 浏览页面时，页面会显示其所有内容和工具栏图像。

那么使用iis有什么问题呢？
请帮助我
下面我分享使用vs2008和firfox的工作页面的快照以及使用iis和firefox的 非工作页面
工作页面![工作页面]！[在此处输入图像描述](https://i.stack.imgur.com/rlsox.png) 非工作页面![非工作页面] ![在此处输入图像描述](https://i.stack.imgur.com/WDxJf.png)
**任何帮助将不胜感激**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:56:45.500

IE和Chrome可以在没有任何提示的情况下使用windows认证，而firefox则不然。按照这些步骤来调查您的问题。

1.  检查页面源以查看您的工具栏是否由服务器推送。
2.  检查您是否有任何 javascript 错误。也许您在受保护的目录中有一个 .js 文件，chrome 和 IE 可以使用 Windows 身份验证访问该文件。

# shell - Unix shell script to sort files depending on the 'date string' present in their file name

> ID：16057805
> 
> 赞同：0
> 
> 时间：2013-04-17T10:36:19.933
> 
> 标签：shell, unix

I am trying to sort files in a directory, depending on the 'date string' attached in the file name, for example files looks as below `SSA_F12_05122013.request.done` `SSA_F13_12142012.request.done` `SSA_F14_01062013.request.done` Where 05122013,12142012 and 01062013 represents the dates in format. Please help me in providing a unix shell script to sort these files on the date string present in their file name(in descending and ascending order).

Thanks in advance.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T12:27:58.980

Hmmm... why call on heavyweights like awk and Perl when `sort` itself has the capability to define what exactly to sort by?

```
ls SSA_F*.request.done | sort -k 1.13,1.16 -k 1.9,1.10 -k 1.11,1.12 
```

Each `-k` option defines a "sort key":

```
-k 1.13,1.16 
```

This defines a sort key ranging from field 1, column 13 to field 1, column 16\. (A field is by default delimited by whitespace, which your filenames don't have.)

If your filenames are varying in length, defining the underscore as field separator (using the `-t` option) and then addressing columns in the third field would be the way to go.

Refer to `man sort` for details. Use the `-r` option to sort in descending order.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T11:04:08.690

```
ls -lrt *.done | perl -lane '@a=split /_|\./,$F[scalar(@F)-1];$a[2]=~s/(..)(..)(....)/$3$2$1/g;print $a[2]." ".$_' | sort -rn | awk '{$1=""}1' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T12:07:19.737

one way with awk and sort:

```
ls -1|awk -F'[_.]' '{s=gensub(/^([0-9]{4})(.*)/,"\\2\\1","g",$3);print s,$0}'|sort|awk '$0=$NF' 
```

if we break it down:

```
ls -1|
awk -F'[_.]' '{s=gensub(/^([0-9]{4})(.*)/,"\\2\\1","g",$3);print s,$0}'|
sort|
awk '$0=$NF' 
```

the `ls -1` just example. I think you have your way to get the file list, one per line.

test a little bit:

```
kent$  echo "SSA_F13_12142012.request.done
SSA_F12_05122013.request.done
SSA_F14_01062013.request.done"|awk -F'[_.]' '{s=gensub(/^([0-9]{4})(.*)/,"\\2\\1","g",$3);print s,$0}'|
sort|
awk '$0=$NF'
SSA_F13_12142012.request.done
SSA_F14_01062013.request.done
SSA_F12_05122013.request.done 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T12:24:35.907

```
ls *.done | perl -pe 's/^.*_(..)(..)(....)/$3$2$1$&/' | sort -rn | cut -b9- 
```

this would do +

# c - 如何理解define宏中的操作符“\”？

> ID：16057807
> 
> 赞同：0
> 
> 时间：2013-04-17T10:36:20.683
> 
> 标签：c, c-preprocessor

我正在使用微控制器 STM32f100RB。在一个头文件中，有一些我无法理解的东西。代码如下。谁能告诉我符号“\”是什么？是算子吗？怎么理解？

我是这里的新手。如果我做的任何事情都不合适，请告诉我。谢谢你。

```
#define IS_GPIO_ALL_PERIPH(PERIPH) (((PERIPH) == GPIOA) || \
                                    ((PERIPH) == GPIOB) || \
                                    ((PERIPH) == GPIOC) || \
                                    ((PERIPH) == GPIOD) || \
                                    ((PERIPH) == GPIOE) || \
                                    ((PERIPH) == GPIOF) || \
                                    ((PERIPH) == GPIOG)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T10:37:31.237

反斜杠只是告诉预处理器将下一行视为在同一行上。这是必需的，因为宏是在“单行”上定义的......所以这可以让多行合并为一个。

请注意，在某些（全部？）预处理器中，反斜杠*必须*是该行的最后一个字符......包括空格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T10:37:33.407

这意味着，宏在下一行继续，因为宏需要在一行上定义（`\`实际上“转义”了新行的符号）。

基本上，您的宏与以下内容相同：

```
#define IS_GPIO_ALL_PERIPH(PERIPH) (((PERIPH) == GPIOA) || ((PERIPH) == GPIOB) || ((PERIPH) == GPIOC) || ((PERIPH) == GPIOD) || ((PERIPH) == GPIOE) || ((PERIPH) == GPIOF) || ((PERIPH) == GPIOG)) 
```

如您所见，阅读和理解比您的问题中发布的更难。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T10:40:16.350

[gcc 文档](http://gcc.gnu.org/onlinedocs/gcc-3.2/cpp/Initial-processing.html)指出：

> 续行是以反斜杠 \ 结尾的行。反斜杠被删除，以下行与当前行连接。没有插入空格，因此您可以在任何地方分割一行，甚至在一个单词的中间。（通常只在空白处分割行更具可读性。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T11:41:02.427

\ 是宏什么都不是，但我们只是通知预处理器没有新行下一条语句也在同一行......

当有一个大表达式不能放在一行中，或者如果它适合而不是不可读，则使用此 \。它在预处理器阶段删除。

# iphone - 在寻找崩溃原因方面需要帮助

> ID：16057808
> 
> 赞同：0
> 
> 时间：2013-04-17T10:36:21.327
> 
> 标签：iphone, ios, objective-c, ipad

以下是 iPad 的崩溃日志。当我`UIViewController`从导航控制器中推送和弹出一个时，我随机发生了这个崩溃。任何帮助/指针表示赞赏。

```
 Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
        Exception Codes: KERN_INVALID_ADDRESS at 0x00000000
        Crashed Thread:  0

        Thread 0 name:  Dispatch queue: com.apple.main-thread
        Thread 0 Crashed:

   0   libobjc.A.dylib                  0x31430386 _ZL12realizeClassP7class_t + 34
    1   libobjc.A.dylib                 0x314303e6 _ZL12realizeClassP7class_t + 130
    2   libobjc.A.dylib                 0x3142a836 prepareForMethodLookup + 74
    3   libobjc.A.dylib                 0x3142a740 lookUpMethod + 40
    4   libobjc.A.dylib                 0x3142a70c _class_lookupMethodAndLoadCache3 + 12
    5   libobjc.A.dylib                 0x31429fc4 objc_msgSend_uncached + 20
    6   UIKit                           0x3186553e -[UINavigationItem _accumulateViewsFromItems:isLeft:refreshViews:] + 270
    7   UIKit                           0x31851244 -[UINavigationItem _updateViewsForBarSizeChangeAndApply:] + 124
    8   UIKit                           0x319e023a __33-[UINavigationBar layoutSubviews]_block_invoke_0 + 250
    9   UIKit                           0x31838b46 +[UIView(Animation) _performWithoutAnimation:] + 62
    10  UIKit                           0x3184d2e2 -[UINavigationBar layoutSubviews] + 382
    11  UIKit                           0x31814f30 -[UIView(CALayerDelegate) layoutSublayersOfLayer:] + 176
    12  CoreFoundation                  0x315431f4 -[NSObject performSelector:withObject:] + 36
    13  QuartzCore                      0x35459a9e -[CALayer layoutSublayers] + 210
    14  QuartzCore                      0x354596b6 CA::Layer::layout_if_needed(CA::Transaction*) + 210
    15  QuartzCore                      0x3545d83c CA::Context::commit_transaction(CA::Transaction*) + 220
    16  QuartzCore                      0x3545d578 CA::Transaction::commit() + 308
    17  QuartzCore                      0x354554b2 CA:::Transaction::observer_callback(__CFRunLoopObserver*, unsigned long, void*) + 50
    18  CoreFoundation                  0x315b8b14 __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 12
    19  CoreFoundation                  0x315b6d50 __CFRunLoopDoObservers + 252
    20  CoreFoundation                  0x315b70aa __CFRunLoopRun + 754
    21  CoreFoundation                  0x3153a49e CFRunLoopRunSpecific + 294
    22  CoreFoundation                  0x3153a366 CFRunLoopRunInMode + 98
    23  GraphicsServices                0x32a13432 GSEventRunModal + 130
    24  UIKit                           0x3183fcce UIApplicationMain + 1074
    25  SmartClassTPS                   0x000b551a main (main.m:16)
    26  SmartClassTPS                   0x000b5170 start + 32 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-19T07:10:32.533

很久以前就可以弄清楚，但忘了在这里更新。KVO 观察者未删除！愚蠢的我：-|。顺便说一句，感谢您的支持。SO岩石。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-19T05:49:26.883

很可能您在释放对象之前忘记清除一些委托。

# java - How do I get rid of connection refused error in hadoop?

> ID：16057812
> 
> 赞同：0
> 
> 时间：2013-04-17T10:36:37.377
> 
> 标签：java, hadoop

When I try to run hadoop command

> vinit@ubuntu:~/hadoop-1.0.4$ bin/hadoop dfs -ls

I get following things as output.

> 13/04/17 06:26:37 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:9010\. Already tried 0 time(s). 13/04/17 06:26:38 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:9010\. Already tried 1 time(s). Bad connection to FS. command aborted. exception: Call to localhost/127.0.0.1:9010 failed on connection exception: java.net.ConnectException: Connection refused

I am new to hadoop and even Java.Please Help!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:57:32.883

Check if your HDFS processes are running? Run 'jps' command to check the running java processes.

You shoudl have at least 'Namenode' and 'Datanode' processes running. Please check and let me know.

Cheers Rags

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-18T05:47:02.883

I have struggled two days and the night between to find out the answer to this problem.

In my case( and I'm sure this is the problem in most cases ) had to create the hadoop temporary folder by hand and add them to the hdfs-site.xml !

```
<property>

<name>dfs.data.dir</name>

<value>/home/stefan/Downloads/hadoop-2.7.1/tmp/dfs/name/data</value>

<final>true</final> 

</property> 

<property> 

<name>dfs.name.dir</name>

<value>/home/stefan/Downloads/hadoop-2.7.1/tmp/dfs/name</value> 

<final>true</final> 

</property> 
```

I hope this helps you guys not to go through the same hell as me.

Besides that

```
chown user_name hadoop_folder hadoop_temp_folder
chmod 755 hadoop_folder hadoop_temp_folder 
```

# ajax - 对 div 的 Ajax html 响应

> ID：16057813
> 
> 赞同：0
> 
> 时间：2013-04-17T10:36:42.800
> 
> 标签：ajax

您好我正在打印对 div 元素的 ajax html 响应并提供单选输入选项来选择文件。选择特定文件后，另一个 div 应显示该消息。但是ajax html响应不起作用

jQuery脚本：

```
$(document).ready(function()
{  
    $('#upload').ajaxForm({
        beforeSubmit: function() {
            $('#Analysis').show();
            $('#Content_column').hide();
            $('#file_list').show();
            $('#trait').show();
            $('#trait').html('Submitting...');
        },
        success: function(data) {
            var $out = $('#file_list');
            $out.html('&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFile list:');
            $out.append('<div id="list">');
            $('#list').html(data); 
            $out.append('</div>');
        }
    });
}); 
```

这个脚本的输出是

```
<ul class="php-file-tree"><li class="pft-directory"><a href="#">Genotypic</a><ul><input id="Penotypic" type="radio" name="uploads/Genotypic/" value="uploads/Genotypic/jquery.txt" />jquery.txt<br><input id="Penotypic" type="radio" name="uploads/Genotypic/" value="uploads/Genotypic/marker.csv" />marker.csv<br></ul></li><li class="pft-directory"><a href="#">Other</a></li><li class="pft-directory"><a href="#">Penotypic</a><ul><input id="Penotypic" type="radio" name="uploads/Penotypic/" value="uploads/Penotypic/namPheno.csv" />namPheno.csv<br><input id="Penotypic" type="radio" name="uploads/Penotypic/" value="uploads/Penotypic/perl.pl" />perl.pl<br></ul></li></ul> 
```

jQuery脚本：

```
$('#Penotypic').click(function() {
   var $out1 = $('#trait');
   $('#trait').show();
   $out1.append('Submitted...');
}); 
```

这在 div 特征中没有显示任何内容。可能是 html 响应作为 testxt 加载，因此无法识别 #Penotypic。请帮我解决这个问题。感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:49:57.613

You have many inputs of `id="Penotypic"`. Make every `id` unique or use classes as function trigger.

I wouldn't use "/" in the `name` attribute. See: [http://www.w3.org/TR/html401/types.html#type-name](http://www.w3.org/TR/html401/types.html#type-name)

Then try if your ajax script does work. If it doesn't work, try if it works from *static* page (don't use your first jQuery script, but it's output as a static form). You probably need to bind your event trigger. Use jQuery's [on()](http://api.jquery.com/on/).

# iphone - 使用Objective c将参数传递给WCF函数

> ID：16057814
> 
> 赞同：1
> 
> 时间：2013-04-17T10:36:43.423
> 
> 标签：iphone, objective-c, xcode, ios6

有人请让我知道如何使用目标 c 将参数传递给 WCF 函数吗？
1.我用C#开发WCF。
2\. WCF端点如下。

```
<system.serviceModel>
  <services>
    <service name="iAppServ.Service1" behaviorConfiguration="ServBehave">
      <!--Endpoint for SOAP-->
      <endpoint address="soapService" binding="basicHttpBinding"     contract="iAppServ.IService1"/>
      <!--Endpoint for REST-->
      <endpoint address="XMLService" binding="webHttpBinding" behaviorConfiguration="restPoxBehavior" contract="iAppServ.IService1"/>
    </service>
  </services>
  <bindings>
    <webHttpBinding>
      <binding crossDomainScriptAccessEnabled="True" name="webHttpBinding">
      </binding>
    </webHttpBinding>
  </bindings>
  <behaviors>
    <serviceBehaviors>
      <behavior name="ServBehave" >
        <serviceMetadata httpGetEnabled="true" />
        <serviceDebug includeExceptionDetailInFaults="false" />
      </behavior>
    </serviceBehaviors>
    <endpointBehaviors>
      <!--Behavior for the REST endpoint for Help enability-->
      <behavior name="restPoxBehavior" >
        <webHttp helpEnabled="true"  />
      </behavior>
    </endpointBehaviors>
  </behaviors>
  <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
</system.serviceModel> 
```

1.  我想通过传递一个搜索文本来使用“SearchUserData”函数。

2.  WCF 将返回 XML 数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T06:52:03.823

此代码工作正常。

```
NSString *soapMessage = [NSString stringWithFormat:@"<SearchUserData xmlns=\"http://tempuri.org/\"><SearchText>"];

soapMessage=[soapMessage stringByAppendingString:searchBar.text];
soapMessage=[soapMessage stringByAppendingString:@"</SearchText> </SearchUserData> "];

NSURL *url = [NSURL URLWithString:@"http://your server.svc/XMLService/SearchUserData"];

NSMutableURLRequest *theRequest = [NSMutableURLRequest requestWithURL:url];
NSString *msgLength = [NSString stringWithFormat:@"%d", [soapMessage length]];

[theRequest addValue: @"text/xml; charset=utf-16" forHTTPHeaderField:@"Content-Type"];
[theRequest addValue: @"http://tempuri.org/IService1/SearchUserData" forHTTPHeaderField:@"SOAPAction"];
[theRequest addValue: msgLength forHTTPHeaderField:@"Content-Length"];
[theRequest setHTTPMethod:@"POST"];
[theRequest setHTTPBody: [soapMessage dataUsingEncoding:NSUTF8StringEncoding]];

NSURLConnection *theConnection = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self];
// NSURLConnection *theConnection = [[NSURLConnection alloc] initWithRequest:request delegate:self];

if(theConnection) {
    NSError *WSerror;
    NSURLResponse *WSresponse;
    NSString *theXml;
    NSData *myData = [NSURLConnection sendSynchronousRequest:theRequest returningResponse:&WSresponse error:&WSerror];
    theXml = [[NSString alloc]initWithBytes:[myData bytes] length:[myData length] encoding:NSUTF8StringEncoding];

    NSLog(@"%@",theXml);

}
else {

    NSLog(@"theConnection is NULL");
} 
```

# javascript - 根据 div 宽度调整文本大小

> ID：16057816
> 
> 赞同：1
> 
> 时间：2013-04-17T10:36:46.283
> 
> 标签：javascript, fonts, image-resizing, font-size

我正在寻找一种比断点更精确的解决方案。我知道这将需要 JavaScript，但我无法找到合适的插件。

我网站上的大部分文本将保持不变，或者我将简单地通过媒体查询对其进行调整（比如平板电脑和移动设备的 90%）。这很好，但我正在为导航菜单和横幅等区域寻找“实时”解决方案。

[在这里查看网站](http://www.haselden.co.uk/rttest/index.html)

你可以看到我所有的文本都是相对的，并且使用`ems`了 100% 的基本字体大小

如果您调整网站大小，您会注意到菜单“崩溃”，因为字体太大。我很想找到一个 JS 解决方案，该解决方案将相对于导航栏的宽度调整该文本的大小，以便我始终可以将其全部保留在一行上（在移动宽度下，它将进入折叠菜单）

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-10-21T20:11:51.470

看看这个 jquery 插件

[http://simplefocus.com/flowtype/](http://simplefocus.com/flowtype/)

它根据元素宽度调整字体大小和行高。

# jquery - jquery timeago NaN 几年前使用 ISO 日期格式

> ID：16057822
> 
> 赞同：0
> 
> 时间：2013-04-17T10:36:55.113
> 
> 标签：jquery, timeago

[我对 jQuery timeago 插件http://timeago.yarp.com/](http://timeago.yarp.com/)有一些问题

首先，短调用版本不起作用，我不知道为什么。 `$("#abbr.timeago").timeago();`什么都不显示。我必须使用`$("abbr.timeago").text($.timeago($(this).prop("title")));`奇怪的...

（在 $(document).ready 中调用...）

无论如何，timeago 总是向我显示“几年前的 NaN”。这是一些生成的具有不同格式的html标签

“yyyy-MM-dd'T'HH:mm:ss'Z'”
`<abbr class="timeago" title="2013-04-17T11:32:08Z">NaN years ago</abbr>`

...HH:mm:ssZ" 显示
`<abbr class="timeago" title="2013-04-17T11:32:08+0100">NaN years ago</abbr>`

“...HH:mm:ssZ”显示
`<abbr class="timeago" title="2013-04-17T11:32:08CEST">NaN years ago</abbr>`

"...HH:mm:ss" 显示
`<abbr class="timeago" title="2013-04-17T11:32:08">NaN years ago</abbr>`

谁能告诉我应该使用什么格式？并且，是否`<abbr>`需要标签？

jQuery 1.10.2、timeago 1.1.0、chrome 26

谢谢 ！

# perl - 通过 SQL 在 PostgreSQL 上开启计时

> ID：16057826
> 
> 赞同：0
> 
> 时间：2013-04-17T10:37:19.987
> 
> 标签：perl, postgresql, timing

我正在使用 PostgreSQL 全文搜索功能构建一个全文搜索引擎。我想实现它定义一个 Perl 类（使用 DBI 接口）。

问题是：我希望能够向用户报告每个查询的时间：我怎样才能做到这一点？我知道在 psql 我有

```
# \timing
Timing is on. 
```

命令，但我找不到任何关于以编程方式返回它的参考......它可以完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T11:11:24.340

检查[`transaction_timestamp()`,`statement_timestamp()`和`clock_timestamp()`](http://www.postgresql.org/docs/current/interactive/functions-datetime.html#FUNCTIONS-DATETIME-CURRENT)

```
select
    clock_timestamp() - statement_timestamp() elapsed_time,
    avg(a)
from generate_series(1,10000000) s(a)
;
  elapsed_time   |         avg          
-----------------+----------------------
 00:00:03.700765 | 5000000.500000000000 
```

从评论中询问的示例：

```
select
    clock_timestamp() - statement_timestamp() elapsed_time,
    field
from table 
```

# c# - LonglistSelector 降低高度时无法滚动到最后一项

> ID：16057828
> 
> 赞同：2
> 
> 时间：2013-04-17T10:37:25.553
> 
> 标签：c#, silverlight, windows-phone-8, longlistselector

我是 WP8 的新手。

我对 longlistselector 有疑问。

我有一个 longlistselector，我将它滚动到最后一项。没关系。

但是当我降低它的高度并将其滚动到最后一项时。但 longlistselector 不会滚动到最后一项。

代码是：

```
PhotoHubLLS.Height = 300;
PhotoHubLLS.ScrollTo(PhotoHubLLS.ItemsSource[PhotoHubLLS.ItemsSource.Count - 1]); 
```

请帮助我，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-04T10:29:15.053

这应该有效：

```
PhotoHubLLS.SizeChanged += PhotoHubLLS_SizeChanged;
PhotoHubLLS.Height = 300;

//and the listener
void PhotoHubLLS_SizeChanged(object sender, SizeChangedEventArgs e)
{
    PhotoHubLLS.SizeChanged -= PhotoHubLLS_SizeChanged;
    PhotoHubLLS.Dispatcher.BeginInvoke(() =>
    {
        PhotoHubLLS.ScrollTo(PhotoHubLLS.ItemsSource[PhotoHubLLS.ItemsSource.Count - 1]);
    });
} 
```

PS。这个答案可能会迟到，但我希望它可以帮助某人:)

# firebase - “在多人游戏中分配玩家”firebase 示例的可扩展性不是很高，是吗？

> ID：16057836
> 
> 赞同：0
> 
> 时间：2013-04-17T10:37:42.627
> 
> 标签：firebase

在 firebase 示例 ( [https://gist.github.com/anantn/4323981](https://gist.github.com/anantn/4323981) ) 中，为了向游戏添加用户，我们将事务方法附加到 playerListRef。现在，firebase 每次尝试更新数据时，都会调用传递给事务方法的回调，其中包含所有玩家的用户 ID 列表。如果我的游戏一次支持数千个用户加入，则此方法执行的每个实例，都会下载并传递整个用户列表，这将是不好的。如果这是真的，那么推荐的分配用户的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T16:53:23.420

这正是 Firebase 旨在处理的问题。如果您的应用程序需要实际分配玩家编号，则此示例是可行的方法。否则，如果玩家只需要在同一个“游戏”或“房间”中而没有任何订购的概念，您可以删除交易代码以加快速度。代码段和后端已经处理了您提到的并发连接数 - 如果您发现您的代码或 Firebase 行为出现任何特定问题，这似乎是一个错误，请通过 support@firebase.com 与我们联系我们可以深入研究它。

# javascript - 为什么冻结的“枚举”更慢？

> ID：16057837
> 
> 赞同：6
> 
> 时间：2013-04-17T10:37:45.133
> 
> 标签：javascript, node.js

为了访问数组中的数据，我创建了一个`enum`-like 变量，以使字段具有人类可读的标识符。

```
var columns = { first: 0, second: 1 };
var array = ['first', 'second'];
var data = array[columns.first]; 
```

当我发现`Object.freeze`我想将其用于枚举以使其无法更改时，我希望 VM 能够利用此信息来发挥其优势。

事实证明，测试在 Chrome 和 Node 上变慢了，但在 Firefox 上稍快（与按数字直接访问相比）。

该代码可在此处获得：http: [//jsperf.com/array-access-via-enum](http://jsperf.com/array-access-via-enum)

以下是 Node 的基准测试（对应于 JSPerf 测试）：

```
 fixed Number: 12ms
  enum: 12ms
  frozenEnum: 85ms 
```

V8 是否还没有一个很好的实现，或者这种方法对于我的用例有什么不理想的地方吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T10:51:30.433

I tried your test in Firefox 20, which is massively faster across the board, and IE 10 which slightly faster and more consistant.

So my answer is **No, V8 does not yet have a great implementation**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-30T10:03:39.977

根据这个[错误报告](http://code.google.com/p/v8/issues/detail?id=1858#c6)，冻结一个对象当前会将其置于“字典模式”，这很慢。

因此，它不仅没有提高性能，反而成为“枚举”/小型数组的明显放缓。

# objective-c - 为什么值会两次添加到 nsmutablearray 中？

> ID：16057838
> 
> 赞同：0
> 
> 时间：2013-04-17T10:37:45.423
> 
> 标签：objective-c, nsmutablearray, bluetooth-lowenergy, uint16

我正在编写一个与蓝牙 LE 设备通信并有一个处理连接的单例的应用程序。我想将来自蓝牙设备的数据值存储在一个数组中以供稍后处理，并通过 NSlog 将数据值输出到控制台。但是，当我将通过 NSLog 输出的相同值添加到 NSMutableArray 中时，它会被添加两次，我不知道为什么。

这是我打印到 NSLog 并存储值的代码。

```
if (flags & 0x10) {
    while (reportData2 < reportDataEnd2) {
        int r2rint = CFSwapInt16LittleToHost(*(uint16_t*) reportData2);
        NSLog(@"%i", r2rint);
        self.rrInt = [NSString stringWithFormat:@"%d", r2rint];
        // record if selected
        if(recording_)
        {
            [rrValues_ addObject:self.rrInt];

        }
        reportData2 += 2;
    } 
```

上面的代码查找 0x10 标志，如果它在那里，它将获取该位和其他任何内容，直到它结束并将其打印到屏幕上。如果启用了recording_boolean值，则将值存储在数组中。这一切都很好，但是 self.rrInt 被添加到我的可变数组中两次！我知道这一点，因为每次添加一个对象时添加一个 NSLog 来打印我的数组的计数，它每次都会增加 2。

任何想法将不胜感激！

# meteor - 如何更改 Meteor-App 的 Doctype 和 Content-Type

> ID：16057839
> 
> 赞同：1
> 
> 时间：2013-04-17T10:37:52.067
> 
> 标签：meteor

我需要更改流星应用程序的文档类型和内容类型，以使与 CE-HTML 相关的东西正常工作。

Meteor 在 CE-HTML 设备（如机顶盒）上运行良好。但是如果没有设置正确的主请求的文档类型和内容类型，一些基于 CE-HTML 的扩展将无法正常工作。

谢谢，约尔格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:51:02.843

我假设您的意思是要将这些添加到 app.html 的顶部：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "ce-html-1.0-transitional.dtd"> 
```

您要做的是找到 `~/.meteor/tools/latest/tools/app.html.in` 并编辑它以添加您的文档类型和内容类型。

***注意：**这是一个黑客。*它将更改所有 Meteor 应用程序的文档类型和内容类型。每当您启动 Meteor 应用程序或捆绑它时，都会使用此模板。

# c++ - Intersection_inserter 未在此范围内声明

> ID：16057844
> 
> 赞同：0
> 
> 时间：2013-04-17T10:38:16.523
> 
> 标签：c++, boost, boost-geometry

我正在尝试计算两个椭圆之间的重叠区域。我现在正在用多边形逼近椭圆，`Boost.Geometry`并且根据这个[答案](https://stackoverflow.com/questions/13817282/boost-geometry-intersection-inserterpolygon-2d-does-not-work)，我找到了一个显然使用旧版本的示例。从这个[问题](https://stackoverflow.com/questions/1440768/initializing-a-polygon-in-boostgeometry/2137031#2137031)的第二个答案中，我可以看到这也是一个旧示例，因为 v1.53 中没有一些头文件。我已将其替换为：

```
#include <boost/geometry/geometries/adapted/c_array.hpp>
#include <boost/geometry/multi/multi.hpp>
#include <boost/geometry/geometries/point_xy.hpp>
#include <boost/geometry/geometries/polygon.hpp>
#include <boost/geometry/io/wkt/wkt.hpp>
#include <boost/geometry/multi/geometries/multi_polygon.hpp> 
```

并添加了以下代码：

```
typedef boost::geometry::model::d2::point_xy<double,
boost::geometry::cs::cartesian> point_2d;
typedef boost::geometry::model::polygon<point_2d> polygon_2d; 
```

几乎一切正常。唯一的问题是：

```
polygon_2d poly, poly2;   
typedef std::vector<polygon_2d > polygon_list;
polygon_list v;
intersection_inserter<polygon_2d >(poly2, poly, std::back_inserter(v)); 
```

我收到一个错误：

```
intersection_inserter was not declared in this scope
expected primary expression before '>' token 
```

[此处](http://geometrylibrary.geodan.nl/group__intersection.html)有关此问题的 boost 文档来自 2009 年，所以我想它不再适用了……据我所知，他们的示例与我的示例相同。我在头文件`intersection.hpp`中找到了定义intersection_inserter 的位置，但我无法对其进行正面或反面...

我在 win7 的 VS2012 和 Linux Mint 14 的 Qt 4.7.4 中都遇到了同样的错误。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:52:02.323

`intersection_inserter`我在当前的 boost 文档中找不到任何参考。也许此功能已被删除？

似乎计算交叉点的“官方”方法`boost::geometry`是通过`intersection`函数，如此处所记录（带有示例[）](http://www.boost.org/doc/libs/1_53_0/libs/geometry/doc/html/geometry/reference/algorithms/intersection.html)

# c# - c# 中使用 redis 的聊天客户端冻结。任何人都可以提出任何建议吗？

> ID：16057846
> 
> 赞同：1
> 
> 时间：2013-04-17T10:38:17.317
> 
> 标签：c#, winforms, redis, servicestack

我正在 Winforms 中制作基于 ServiceStack 和 Redis 的聊天客户端。

我创建了一个消息集合，一旦我订阅它，我的应用程序就会冻结无响应。我是否可能遗漏了某些东西，或者是否缺少调用。或者是什么 .....

这是代码

```

public partial class frmChat :Form
{ `public RedisClient redisClient = new RedisClient("192.168.111.50");
public bool registered = false;
public string channelName = "letzChat";

public frmChat()
{
    InitializeComponent();
}

private void tbxUsername_KeyPress(object sender, KeyPressEventArgs e)
{
    if (tbxUsername.Text.Trim() != string.Empty && e.KeyChar == (char) Keys.Enter)
    {
        IRedisSubscription rs = redisClient.CreateSubscription();
        rs.OnSubscribe = chan => { chan_OnSubscribe(chan); };

        rs.OnUnSubscribe = chan => { chan_OnUnSubscribe(chan); };
        rs.OnMessage = (chan, msg) => { chan_OnMessage(chan, msg); };

        rs.SubscribeToChannels(channelName);
    }
}

private void chan_OnMessage(string chan, string msg)
{
    WriteLine(msg+"\n");
}

private void chan_OnUnSubscribe(string chan)
{
    registered = false;
    tbxUsername.Enabled = true;
    SendMessage(string.Format("User {0} registered to channel {1}", tbxUsername.Text, channelName));
}

private void chan_OnSubscribe(string chan)
{
    registered = true;
    tbxUsername.Enabled = false;
}

private void WriteLine(string msg)
{
    foreach (var line in msg.Split('\n'))
    {
        tbxChat.Text += line + Environment.NewLine;
    }
}

private void btnSend_Click(object sender, EventArgs e)
{
    SendMessage();
}

private void tbxMessage_KeyPress(object sender, KeyPressEventArgs e)
{
    if(e.KeyChar == (char)Keys.Enter)
    {
        SendMessage();
    }
}

#region Message Sending
private void SendMessage()
{
    if (tbxMessage.Text.Trim() != string.Empty)
    {
        var m = string.Format("{0}: {1}", tbxUsername.Text, tbxMessage.Text);
        redisClient.PublishMessage(channelName, m);
        tbxMessage.Text = string.Empty;
    }
}

private void SendMessage(string msg)
{
    redisClient.PublishMessage(channelName, msg);
}
#endregion` 

}

            回答 #1

赞同：1

时间：2015-04-28T11:25:23.427

我只是偶然发现了这个问题，因为我遇到了类似的问题并找到了解决方案。

显然，SubscribeToChannels() 和 SubscribeToChannelsMatching() 方法阻塞了线程。以下对我有用：

```
System.Threading.ThreadPool.QueueUserWorkItem(x =>
{
    GetSubscription().SubscribeToChannelsMatching("__keyevent*:*");
}); 
```

请参阅[Redis Pub/Sub ServiceStack，取消线程](https://stackoverflow.com/questions/21204839/redis-pub-sub-servicestack-cancelling-the-thread)以了解如何处理取消订阅。

```

# magento - 显示客户 TAX / VAT 号码

> ID：16057851
> 
> 赞同：2
> 
> 时间：2013-04-17T10:38:27.463
> 
> 标签：magento, magento-1.7, invoices

我想在发票 PDF 中显示客户的增值税号。我在网上找到了几种描述这一点的方法，但它们似乎都不适用于我的安装 Magento 1.7.0.2。它也应该适用于注册客户和客人。我找到了以下两种解决方案，它们不起作用：

```
$taxvat = $order->getData('customer_taxvat'); // does not work
$taxvat = $order->getData('vat_id'); // does not work 
```

然后我决定使用 var_dump('$order') 并显示增值税号。所以使用下面的代码我可以在PDF中显示它，但我不知道这是否会导致问题。

```
$taxvat = $order['customer_taxvat']; // WORKS! 
```

我更喜欢使用 Magento 的方式，但是怎么做？！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T03:07:36.343

看起来您正在使用的 $order 是一个数组而不是一个对象。因此，您的以下代码不起作用。

> $order->getData('customer_taxvat');

如果您的 $order 是一个对象，那么上面的代码将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-08T06:59:10.670

There are 2 ways to get the customer taxvat number from order

```
1\. $order->getData('customer_taxvat')
2\. $order->getQuote->getCustomerTaxVat(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-05T10:12:57.583

右：增值税号：{{var order.getCustomerTaxvat()}}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-13T19:27:14.640

我使用下面的代码来获取客户税/增值税。它对我来说是正确的。

增值税号：{{var order.getCustomerTaxvat()}}

在销售订单电子邮件模板中。

# jquery - 以编程方式更改文本大小正在阻止更改事件

> ID：16057852
> 
> 赞同：5
> 
> 时间：2013-04-17T10:38:35.040
> 
> 标签：jquery

我们有一个文本框，用户应该在其中输入一些数据。但是，该数据不得超过 500 个字符。为了实现这一点，我们实现了在 KeyUp 事件上调用的以下函数：

```
 function keyupMaxLimit(obj, maxlen) {
            if (parseInt(obj.value.length) > maxlen) {
                $(obj).val($(obj).val().substr(0,maxlen));
            }
        } 
```

这是有效的：用户无法输入更多应该输入的内容。我们还有一个与同一个文本框的 Change 事件相关联的函数，以检测变化并发挥我们的作用。

```
 $(document).on("change", "#myTextBox", function () {
        //magic here
    }); 
```

这也是有效的：当用户更改文本时，函数被调用。

但是，这是我们的问题，这两个功能不能一起工作。例如，如果用户引入了更多他/她应该输入的字符，第一个函数将修剪文本，但第二个函数不会被调用！

看来我们对第一个函数的文本框所做的更改正在阻止/清除 Change 事件。这个对吗？任何解决方法？我无法在第一个函数上显式触发 Change 事件，因为我们会创建不必要的更改。

编辑 - 您可以在此处看到这种情况：http: [//jsfiddle.net/jpaires/dpujx/](http://jsfiddle.net/jpaires/dpujx/) 打开浏览器的控制台并在文本框中输入“12345”。该事件将被触发（控制台上的“a-ok”）。但是，如果您写“123456”，则文本将被剪切并且不会触发事件（控制台上没有“a-ok”）。谢谢朱哈娜 :)

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-04-17T10:45:43.963

我应该尝试限制 html 输入中的字符数，如下所示：

```
<input type="text" id="Textbox" name="Textbox" maxlength="500" /> 
```

另一件事是，如果您想在文本输入更改时做某事，我认为在这种情况下，您也可以在输入上使用 keyup 事件，如下所示：

```
$(document).on("keyup", "#myTextBox", function () {
 //SOMETHING
}); 
```

我用我的建议更新了这个小提琴，它可以工作...... [http://jsfiddle.net/BdqDB/](http://jsfiddle.net/BdqDB/)

通过这种方式，您始终会触发日志并且文本是有限的。

另一个解决方案是：如果您想继续使用您的功能来剪切文本，我会这样做：

```
$(document).on("keyup", "#myTextBox", function () {
  keyupMaxLimit(this,5);
  console.log('other stuff');
}); 
```

[在http://jsfiddle.net/wTQa4/1/](http://jsfiddle.net/wTQa4/1/)上看到这个工作

如果查看 jquery 更改文档，您会发现：“ *change 事件在其值更改时发送到元素。此事件仅限于元素、框和元素。对于选择框、复选框和单选按钮，该事件会立即触发当用户使用鼠标进行选择时，但对于其他元素类型，事件会延迟到元素失去焦点。* "

所以我认为这个问题的答案是，你不会通过 change 事件得到你想要的，我给了你一个解决你的问题的方法，但你没有发送反馈......你不应该做的其他事情是内联调用 js 方法，一旦你使用 jQuery，将事件绑定到元素非常容易，而且它是不显眼的 javascript，是编写 js 的最佳实践。

# iphone - ios TreeView 组件的数据模型

> ID：16057853
> 
> 赞同：1
> 
> 时间：2013-04-17T10:38:40.023
> 
> 标签：iphone, ios, objective-c

在 ios 中推出了一个树视图组件来表示分层数据。通过点击每个节点中的 (+) 可以展开树，点击 (-) 节点可折叠。

我的课看起来像这样，

//树项

```
@interface Node : NSObject
@property (nonatomic, strong) NSString *nodeCaption;

- (void)addNode:(Node *)node;
@end 
```

//树模型类

```
@interface Tree : NSObject

- (id)initWithParentNode:(Node *)node; 
```

//树视图类

```
@interface TreeView : UIView

- (id)initWithTree:(Tree *)tree andFrame:(CGRect)frame;

- (void)reloadData;

@end 
```

//如何使用它

```
@implementation

 Node *rootNode = [[Node alloc] init];
 rootNode.caption = @"root";

 NSArray *fruits1 = [NSArray arrayWithObjects:@"Apple", @"Peach", nil];
 Node *fruit1Node = [[Node alloc] init];
 fruit1Node.caption = @"set1";

 for (NSString *fruit in fruits1) {
    Node *aNode = [[Node alloc] init];
    aNode.caption = fruit;
    [fruit1Node addNode:aNode];
 }

 NSArray *fruits2 = [NSArray arrayWithObjects:@"Orange", @"Mango", nil];
 Node *fruit2Node = [[Node alloc] init];
 fruit2Node.caption = @"set2";

 for (NSString *fruit in fruits2) {
    Node *aNode = [[Node alloc] init];
    aNode.caption = fruit;
    [fruit2Node addNode:aNode];
 }

 [rootNode addNode:fruit1Node];
 [rootNode addNode:fruit2Node];

 Tree *tree = [[Tree alloc] initWithParentNode:rootNode];

 TreeView *treeView = [[TreeView alloc] initWithTree:tree andFrame:self.frame];
 [self.view addSubview:treeView];
 [treeView reloadData];

 @end 
```

这将输出类似于下面的内容

```
-Root
   -set1
     Apple
     Peach
   -set2
    Orange
    Mango 
```

在这种情况下，这完全没问题。但问题在于我们用来为树创建输入的代码，我们循环遍历我们持有的数据模型并将其转换为树组件可以使用的模型的地方。就我而言，我所有的树节点都是“类别”对象，我被迫将所有类别对象转换为节点对象以使用树。所以我想知道有没有一种方法可以使用树的用户打算使用的任何数据模型，而不是强制使用。

此外，我不想要求用户子类化我的 Abstract 类。因为，他们可能已经有了自己的父母。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T11:18:21.650

# 使用协议

如果我理解正确，您希望允许客户端使用他们自己的自定义对象作为“节点”对象。

如果这是正确的，那么您可以将“节点”作为协议而不是类，例如：

```
// If you want to add your objects to a tree, then you must implement this protocol...
@protocol NodeProtocol <NSObject>

@property (nonatomic, strong, readonly) NSMutableArray *children;

-(void)addNode:(id <NodeProtocol>)node; // Node items must support adding children nodes
-(NSString *)description; // Node items need to be able to print a textual description of themselves

@end

// Custom class implements the protocol
@interface CustomNode : NSObject <NodeProtocol>
...
@end 
```

# 使用封装对象

或者，您可以将抽象对象封装在 Node 对象中，例如：

```
@interface Node : NSObject
@property (nonatomic, strong) NSObject *nodeItem;
-(void)addNode:(Node *)node;
@end 
```

# 使用类别

作为第三种选择，您可以改为在 NSObject 上实现类别并使用 objc_setAssociatedObject 将数据附加到对象。例子：

### 类别

```
#import "NSObject+NodeCategory.h"

#import <objc/runtime.h>

static char const *kNodeKey = "NodeKey";

@implementation NSObject (NodeCategory)

-(void)addNode:(NSObject *)node
{
    NSMutableArray *children = [self children];
    if (!children) children = [NSMutableArray new];
    [children addObject:node];
    [self setChildren:children];
}

-(void)setChildren:(NSMutableArray *)children
{
    objc_setAssociatedObject(self, kNodeKey, children, OBJC_ASSOCIATION_RETAIN_NONATOMIC);
}

-(NSMutableArray *)children
{
    return objc_getAssociatedObject(self, kNodeKey);
}

@end 
```

### 示例用法

```
#import <Foundation/Foundation.h>

#import "NSObject+NodeCategory.h"

int main(int argc, const char * argv[])
{

    @autoreleasepool {

        NSObject *node = [NSObject new];
        node.children = [NSMutableArray arrayWithArray:@[@"Kiwi Fruit", @"Apple", @"Bannana"]];
        [node addNode:@"Dragon Fruit"];
        NSLog(node.children.description);

    }
    return 0;
} 
```

# spring - 如何在 Spring LDAP 中添加 LDAP 缓存？

> ID：16057854
> 
> 赞同：7
> 
> 时间：2013-04-17T10:38:51.573
> 
> 标签：spring, spring-security, ldap, spring-ldap

我想在本地缓存 LDAP 用户数据以允许更快的查询。Spring LDAP 是否提供这样的功能？我怎样才能做到这一点？

我正在使用 Spring Security 3.1 和 Spring LDAP 1.3.1 进行身份验证和授权。如果存在的话，使用内置机制为 LDAP 提供缓存会很好。

## Spring LDAP 配置：

applicationContext-ldap.xml：

```
<?xml  version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:jee="http://www.springframework.org/schema/jee"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/jee
        http://www.springframework.org/schema/jee/spring-jee.xsd
    ">

    <!-- Ldap -->
    <jee:jndi-lookup id="ldapUrl" jndi-name="appName/ldapUrl" expected-type="java.lang.String" />
    <jee:jndi-lookup id="ldapUser" jndi-name="appName/ldapUser" expected-type="java.lang.String" />
    <jee:jndi-lookup id="ldapPassword" jndi-name="appName/ldapPassword" expected-type="java.lang.String" />

    <!-- for authentication and search purpose -->
    <bean id="ldapContextSource" class="org.springframework.ldap.core.support.LdapContextSource">
        <property name="url" ref="ldapUrl" />
        <property name="userDn" ref="ldapUser" />
        <property name="password" ref="ldapPassword" />
        <property name="pooled" value="true" />
    </bean>

    <bean id="ldapTemplate" class="org.springframework.ldap.core.LdapTemplate">
        <property name="contextSource" ref="ldapContextSource" />
    </bean>

    <!-- for pagination search purpose  -->
    <bean id="dirContext" factory-bean="ldapContextSource" factory-method="getReadOnlyContext" scope="session"/>

    <bean id="singleLdapContextSource" class="org.springframework.ldap.core.support.SingleContextSource" scope="session">
        <constructor-arg ref="dirContext"/>
    </bean>

    <bean id="singleLdapTemplate" class="org.springframework.ldap.core.LdapTemplate" scope="session">
        <property name="contextSource" ref="singleLdapContextSource" />
    </bean>

</beans> 
```

## 弹簧安全配置：

弹簧安全.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:security="http://www.springframework.org/schema/security"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/security 
        http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <!-- This is where we configure Spring-Security  -->
    <security:http
        auto-config="true"
        use-expressions="true"
        access-denied-page="/auth/denied"
    >
        <security:intercept-url pattern="/login" access="permitAll"/>
        <security:intercept-url pattern="/app/admin" access="permitAll"/>
        <security:intercept-url pattern="/app/common" access="hasRole('User')"/>
        <security:intercept-url pattern="/viol/home" access="permitAll"/>
        <security:intercept-url pattern="/app/users" access="permitAll"/>
        <security:intercept-url pattern="/admin/edit/*" access="hasRole('Administrator')"/>

        <security:form-login
                login-page="/auth/login" 
                authentication-failure-url="/auth/loginFailure" 
                default-target-url="/auth/authorize"/>

        <security:logout 
                invalidate-session="true" 
                logout-success-url="/auth/login"
                logout-url="/logout"/>
    </security:http>

    <security:authentication-manager>
        <security:ldap-authentication-provider
            server-ref="ldapContextSource"
            user-search-filter="(sAMAccountName={0})"
            user-search-base="dc=myDomain,dc=com"
         />
    </security:authentication-manager>
</beans> 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T18:03:00.633

如果您配置[EhCacheBasedUserCache](http://static.springsource.org/spring-security/site/docs/3.2.x/apidocs/org/springframework/security/core/userdetails/cache/EhCacheBasedUserCache.html)并使用[ldap-user-service](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#nsa-ldap-user-service)那么您可以将缓存用作：

```
 <authentication-manager>
   <authentication-provider>
    <ldap-user-service 
       user-search-filter="(sAMAccountName={0})" user-search-base="dc=myDomain,dc=com" cache-ref="userCache" />
   </authentication-provider>
</authentication-manager> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T15:26:39.997

我不认为 Spring 提供开箱即用的客户端 LDAP 缓存，因为在客户端缓存 LDAP 查询结果会带来安全风险。缓存肯定会在某些时候保存陈旧的数据，如果它是例如用户的电子邮件/家庭地址，这不是一个大问题，但在涉及角色分配和其他身份验证/授权相关数据时更糟糕。通过扩展服务器端，您会变得更好，以便它能够处理负载。

话虽如此，从 Spring 3.1 开始引入缓存非常容易，因为它为它提供了出色的支持。在您的情况下，使用如下自定义就足够了`LdapContextSource`：

```
public class CachingLdapContextSource extends AbstractContextSource {

    @Override
    protected DirContext getDirContextInstance(Hashtable environment) 
        throws NamingException 
    {
        InitialLdapContext context = new InitialLdapContext(environment, null);
        return new CachingDirContextWrapper(context);
    }
} 
```

包装类只是将所有`DirContext`方法委托给底层实现，并用`@Cacheable`.

```
class CachingDirContextWrapper implements DirContext {

    private final DirContext delegate;

    CachingDirContextWrapper(DirContext delegate) {
        this.delegate = delegate;
    }

    @Override
    @Cacheable(value = "search")
    public NamingEnumeration<SearchResult> search(...)
    {
        return delegate.search(name, matchingAttributes, attributesToReturn);
    }

    ...
} 
```

有关如何配置 Spring 使用的缓存存储的详细信息，请参阅[官方文档](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/cache.html)和本[教程。](http://blog.springsource.com/2011/02/23/spring-3-1-m1-caching/)

但再一次，你最好不要这样做，我想。

# .net - C# 通过模拟访问 DirectoryEntry 只会第一次抛出灾难性异常

> ID：16057855
> 
> 赞同：4
> 
> 时间：2013-04-17T10:38:52.370
> 
> 标签：.net, impersonation, directoryentry

我正在使用此 c# 代码模拟用户：

```
 SafeTokenHandle logon_token = null;
    SafeTokenHandle duplicate_token = null;

    const int LOGON32_PROVIDER_DEFAULT = 0;

    const int LOGON32_LOGON_INTERACTIVE = 2;

    const int SecurityImpersonation = 2;

    if (!LogonUser(m_Username, m_Domain, m_Password, LOGON32_LOGON_INTERACTIVE, LOGON32_PROVIDER_DEFAULT,out logon_token))
    {
        throw new Win32Exception(Marshal.GetLastWin32Error());
    }

    using (logon_token)
    {

        if (!DuplicateToken(logon_token, SecurityImpersonation, out duplicate_token))
        {
            throw new Win32Exception(Marshal.GetLastWin32Error());
        }

        using (duplicate_token)
        {
            using (WindowsIdentity new_id = new WindowsIdentity(logon_token.DangerousGetHandle()))
            {

                using (WindowsImpersonationContext impersonatedUser = new_id.Impersonate())
                {
                    return invocation_delegate(param);
                }
            }
        }
    } 
```

其中 invocation_delegate 将调用将使用 DirectoryEntry 访问 Active Directory 对象的方法（使用 Secure AuthenticationType）。

我的问题是，我第一次调用 DirectoryEntry 功能时，它会引发以下异常：

```
Catastrophic failure (Exception from HRESULT: 0x8000FFFF (E_UNEXPECTED))
at System.Security.Policy.PEFileEvidenceFactory.GetLocationEvidence(SafePEFileHandle peFile, SecurityZone& zone, StringHandleOnStack retUrl)
at System.Security.Policy.PEFileEvidenceFactory.GenerateLocationEvidence()
at System.Security.Policy.PEFileEvidenceFactory.GenerateEvidence(Type evidenceType)
at System.Security.Policy.AssemblyEvidenceFactory.GenerateEvidence(Type evidenceType)
at System.Security.Policy.Evidence.GenerateHostEvidence(Type type, Boolean     hostCanGenerate)
at System.Security.Policy.Evidence.GetHostEvidenceNoLock(Type type)
at System.Security.Policy.Evidence.GetHostEvidence(Type type, Boolean markDelayEvaluatedEvidenceUsed)
at System.Security.Policy.AppDomainEvidenceFactory.GenerateEvidence(Type evidenceType)
at System.Security.Policy.Evidence.GenerateHostEvidence(Type type, Boolean hostCanGenerate)
at System.Security.Policy.Evidence.GetHostEvidenceNoLock(Type type)
at System.Security.Policy.Evidence.RawEvidenceEnumerator.MoveNext()
at System.Security.Policy.Evidence.EvidenceEnumerator.MoveNext()
at System.Configuration.ClientConfigPaths.GetEvidenceInfo(AppDomain appDomain, String exePath, String& typeName)
at System.Configuration.ClientConfigPaths.GetTypeAndHashSuffix(AppDomain appDomain, String exePath)
at System.Configuration.ClientConfigPaths..ctor(String exePath, Boolean includeUserConfig)
at System.Configuration.ClientConfigPaths.GetPaths(String exePath, Boolean includeUserConfig)
at System.Configuration.ClientConfigurationHost.RequireCompleteInit(IInternalConfigRecord record)
at System.Configuration.BaseConfigurationRecord.GetSectionRecursive(String configKey, Boolean getLkg, Boolean checkPermission, Boolean getRuntimeObject, Boolean requestIsHere, Object& result, Object& resultRuntimeObject)
at System.Configuration.BaseConfigurationRecord.GetSection(String configKey)
at System.Configuration.ClientConfigurationSystem.System.Configuration.Internal.IInternalConfigSystem.GetSection(String sectionName)
at System.Configuration.ConfigurationManager.GetSection(String sectionName)
at System.Configuration.PrivilegedConfigurationManager.GetSection(String sectionName)
at System.DirectoryServices.SearchResultCollection.ResultsEnumerator..ctor(SearchResultCollection results, String parentUserName, String parentPassword, AuthenticationTypes parentAuthenticationType)
at System.DirectoryServices.SearchResultCollection.GetEnumerator()
at System.DirectoryServices.DirectorySearcher.FindOne()
at Utilities.ADUtilities.GetEnrollmentServiceByNameAndDNSName(String name, String dns_name) 
```

如果我随后使用相同的模拟上下文访问 DirectoryEntry 函数或事件不同的模拟上下文（撤消模拟并再次模拟），则不会引发异常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T14:15:31.027

我想我找到了问题所在。我的 C# 项目中有一个 CLI/C++ DLL 作为参考。如果我在程序开始时通过 Assembly.LoadFile 加载 DLL，那么问题就不会发生。另一方面，如果我让系统在它认为合适的时候加载它（系统似乎只在对 DLL 的实际调用完成时才加载它），就会发生异常。

我以与使用 DirectoryEntry 函数相同的方法调用此 DLL 的方法。

例如：

```
void Method1()
{
    DirectoryEntry de = //....
    de. //....
   CLICPPLibrary.DoStuff();
} 
```

无论如何，我认为这仍然是一个需要解决的问题。即使稍后加载 DLL，也应该没有异常。或者至少在调用 DirectoryEntry 方法时不能发生异常。

# php - CakePHP (2.x) 根据条件修改布局

> ID：16057856
> 
> 赞同：0
> 
> 时间：2013-04-17T10:38:57.040
> 
> 标签：php, layout, cakephp-2.1

是否有可能在 CakePHP v 2.x 中根据条件修改默认布局 (default.ctp) - 例如用户是否登录。假设我有一个菜单：

“主页”“菜单项 1”“菜单项 2”

一旦用户登录，我想更改它：

“首页” “菜单项 1” “菜单项 2” “菜单项 3” “菜单项 4”

我在哪里/如何实现这一目标？我假设我必须调用“$this->layout('new-layout');” 某处，但我不确定到底在哪里。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T10:50:54.633

If there are too many difference between your both layout (before / after log in) than make two layout & in your AppController (in beforeFilter function) change layout if user is logged in.

```
if($this->Auth->user()){
    $this->layout = "new_layout";
} 
```

And if it is just about some menu links. You can directly put condition in your default.ctp file.

```
if ($this->Session->read('Auth.User')){
 //Add more menu for logged in users.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:47:08.550

如果我没记错的话，您应该可以使用相同的布局并直接使用：

```
-- Menu Item 1
-- Menu Item 2
if ($authUser) {
  -- Menu Item 3
  -- Menu Item 4
} 
```

您必须在控制器中设置以下内容：

```
$this->set('authUser', $this->Auth->user()); 
```

不过我用蛋糕已经有一段时间了！

# ajax - 更改 ajax 导航的 URL

> ID：16057857
> 
> 赞同：1
> 
> 时间：2013-04-17T10:38:58.603
> 
> 标签：ajax, jsf, url, jsf-2, navigation

我有一个 JSF 应用程序，我希望在导航时更改浏览器地址栏中的 URL。当我打开`Home.xhtml`并提交表单时，它会显示下一页`AppHome.xhtml`，但浏览器地址栏中的 URL 没有更改。

这是提交按钮：

```
<p:commandButton value="Connect" update="panel" id="ajax" action="#{user.check}" styleClass="ui-priority-primary"/> 
```

这是导航规则：

```
<navigation-rule>
    <from-view-id>/Home.xhtml</from-view-id>
    <navigation-case>
        <from-outcome>Success</from-outcome>
        <to-view-id>/AppHome.xhtml</to-view-id>
    </navigation-case>
    <navigation-case>
        <from-outcome>Failure</from-outcome>
        <to-view-id>/Home.xhtml</to-view-id>
    </navigation-case>
</navigation-rule> 
```

执行此导航时如何更改浏览器地址栏中的 URL？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T12:49:36.637

仅当在与当前请求 URL 不同的 URL 上触发同步请求时，浏览器地址栏中的 URL 才会更改。ajax 请求不是同步请求。所以浏览器地址栏中的 URL 永远不会改变。此外，JSF 默认将表单提交到当前 URL（检查`action`生成的 HTML 的属性`<form>`），因此 URL 在同步 POST 请求中也永远不会更改。

您需要在不同的 URL 上发送同步 GET 请求才能更改浏览器地址栏中的 URL。重定向将强制同步 GET 请求。您可以通过`<redirect/>`向`<navigation-case>`.

您对执行重定向的厌恶绝对没有根据。它很可能是在其他地方引起的，因此需要在其他地方解决。是页面加载缓慢和/或内容闪烁（闪烁）吗？这个问题又与重定向无关，需要以不同的方式解决。这要通过适当的缓存来解决。还是您在重定向时丢失了面孔消息？通过使用[闪光灯范围](https://stackoverflow.com/tags/flash-scope/info)[`Flash#setKeepMessages()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/Flash.html#setKeepMessages%28boolean%29)。

### 也可以看看：

*   [如何在 JSF 中导航？如何使 URL 反映当前页面（而不是上一个页面）](https://stackoverflow.com/questions/15521451/how-to-make-url-reflect-the-current-page-and-not-the-previous-one/)
*   [在 project_stage 开发中，JSF 页面在加载期间闪烁](https://stackoverflow.com/questions/15331073/jsf-page-flashes-during-load-while-in-project-stage-development/)
*   [JSF 缓存静态资源过滤器](https://stackoverflow.com/questions/15057932/jsf-cache-static-resources-filter/)
*   [如何在重定向页面中显示面孔消息](https://stackoverflow.com/questions/13685633/how-to-show-faces-message-in-the-redirected-page/)

* * *

**与具体问题无关**，导航案例是 JSF 1.x。您知道新的 JSF 2.x[隐式导航](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#ImplicitNavigation)特性吗？确保您正在阅读针对 JSF 2.x 而不是针对 JSF 1.x 的最新 JSF 教程。

`<navigation-rule>`如果您按如下方式实现 action 方法，则可以完全摆脱整体：

```
public String check() {
    // ...

    if (fail) {
        return null; // Goes back to same page while keeping JSF view state.
    } else {
        return "/AppHome?faces-redirect=true";
    }
} 
```

# java - Android 项目上的 WCF WebService - 如何通过 SoapObjects 获取字节 [] 类型？

> ID：16057864
> 
> 赞同：0
> 
> 时间：2013-04-17T10:39:24.793
> 
> 标签：java, android, wcf, byte, android-ksoap2

我有带有网络线程的 Android / Java 项目。它连接到为我提供 GetAddonsTypes 方法的 WCF WebService。

GetAddonsTypes 返回 long、int 和 string 项，因此我使用自己的 Parser (String / regex)，它还在 myDataSource（它是 SQLite 数据库）中创建对象。现在我对称为 GetProducts 的第二种方法有疑问。GetProducts 返回 long、int 和 Image。

我想将 Image 存储为 byte[] 类型。但是如何使用 SoapObjects 处理二进制文件呢？也许我应该将此 anyType{} 转换为二进制文件，但我该怎么做呢？

这就是 GetProducts (.toString()) 的 SoapObject 结果的样子

> anyType{DocumentElement=anyType{Tabela=anyType{ID=701; lg=1; ProductImage=anyType{}; };

# 我的网络主题

```
Thread networkThread1 = new Thread() {
        @Override
        public void run() {
          try {
             final String METHOD_NAME = "GetAddonsTypes";
             final String SOAP_ACTION = "http://tempuri.org/IService1/GetAddonsTypes";
             SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);         
             SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
             envelope.setOutputSoapObject(request);
             envelope.dotNet = true;
             HttpTransportSE ht = new HttpTransportSE(URL);
             ht.call(SOAP_ACTION, envelope);
             final SoapObject result=(SoapObject)envelope.getResponse();

             runOnUiThread (new Runnable(){ 
                 public void run() {
                     ParseTable(result.getProperty(1).toString());
                    }
                });
            }
         catch (Exception e) {
            Log.e("WS", e.toString());
         }
        }
      };

       public void ParseTable(String input)
    {
        myDataSource myDatasource;
        Pattern p = Pattern.compile("(PID=)(\\d*); (flg=)(\\d*); (Name=)(\\w*);");
        Matcher m = p.matcher(input);
        myDatasource = new myDatasource(this);
        myDatasource.open();
        while (m.find()) {
            try {
                myDatasource.createMyItem(Long.parseLong(m.group(2)),  Integer.parseInt(m.group(4)), m.group(6));
            }
            catch (Exception e) {
                Log.e("Parser Error", e.toString());
            }
        }
        myDatasource.close();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T11:17:12.170

也许这会有所帮助：

" 在 getProperty 方法中，我使用以下内容：

Info.type = MarshalBase64.BYTE_ARRAY_CLASS "

从这篇文章：http: [//supportforums.blackberry.com/t5/Java-Development/Getting-Image-Over-Using-Web-Service-and-Ksoap2/td-p/491835](http://supportforums.blackberry.com/t5/Java-Development/Getting-Image-Over-Using-Web-Service-and-Ksoap2/td-p/491835)

# javascript - Javascript 文件未在 fire bug 中列出

> ID：16057866
> 
> 赞同：0
> 
> 时间：2013-04-17T10:39:26.187
> 
> 标签：javascript, asp.net

我有一个 asp.net 应用程序。我在我的母版页中添加了一个脚本文件。

`<script type="text/javascript" src="<%= Page.ResolveClientUrl("~/Scripts/Notification.js")%>"></script>`

但我无法在我的火虫上找到相同的东西。我也检查过另一台机器。

有人对这个奇怪的问题有任何想法吗？如果我在哪里出错了，请帮我解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:16:28.297

上面的脚本参考

```
<script type="text/javascript" src="<%= Page.ResolveClientUrl("~/Scripts/Notification.js")%>"></script> 
```

缺少关闭标签。但仍然想知道为什么在加载时没有在浏览器中引发错误。

```
<script type="text/javascript" src="<%= Page.ResolveClientUrl("~/Scripts/Custom/Publish/Global.js")%>"</script> 
```

现在改为

```
<script type="text/javascript" src="<%= Page.ResolveClientUrl("~/Scripts/Custom/Publish/Global.js")%>"></script> 
```

现在我可以得到关于我的火虫的脚本了。

`>`失踪已解决。

# android - Android 切换按钮不显示正确的值

> ID：16057867
> 
> 赞同：0
> 
> 时间：2013-04-17T10:39:27.217
> 
> 标签：android, togglebutton

我是 android 开发的新手，我正在尝试将一个添加`ToggleButton`到我的第一个 android 项目中。并且有一个问题让它像我想要的那样工作。

这是我的`ToggleButton`：

```
<ToggleButton
   android:id="@+id/toggle1"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:enabled="true"
   android:textOff="Off"
   android:textOn="On" /> 
```

这是我的活动课：

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_toggle);
        addListenerOnButton();
    }
     public void addListenerOnButton() {
         togglelocation = (ToggleButton) findViewById(R.id.toggle1);
         togglelocation.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                }
            });

          } 
```

问题是当我单击切换按钮时，屏幕上什么也没有发生，而我期望切换按钮在开/关之间切换。

![切换按钮](https://i.stack.imgur.com/w8brk.png)

`isChekced()`当我调试时，真/假之间的值变化。

但在屏幕层面上没有任何改变。我不知道我错过了什么。

编辑：

我认为这与我的设备平板电脑华为有关。我只是在虚拟设备中测试它，它就像一个魅力！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:47:09.967

在您的活动类中，移出`togglelocation = (ToggleButton) findViewById(R.id.toggle1);`您的`addListenerOnButton()`方法，并将其放入`onCreate`方法中。请放在前面`addListenerOnButton()`，像这样：

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_toggle);

        togglelocation = (ToggleButton) findViewById(R.id.toggle1);

        addListenerOnButton();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:52:46.097

您不需要任何代码来打开/关闭它。只需像这样将toggleButton添加到XML，它就可以满足您的需求。：

```
 <ToggleButton
    android:id="@+id/toggleButton1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/CreateFileButton"
    android:layout_centerHorizontal="true"
    android:text="ToggleButton" /> 
```

要添加一些功能，请使用 Activity java 文件中的以下代码。

```
tb = (ToggleButton) findViewById(R.id.toggleButton1);

    tb.setOnCheckedChangeListener(new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {

            if(isChecked)
            {

                Toast.makeText(MainActivity.this, "on State", Toast.LENGTH_SHORT).show();
            }
            else
            {
                Toast.makeText(MainActivity.this, "off State", Toast.LENGTH_SHORT).show();
            }
        }
    }); 
```

# python - 在 Matplotlib 中设置绘图画布的大小

> ID：16057869
> 
> 赞同：21
> 
> 时间：2013-04-17T10:39:29.827
> 
> 标签：python, graph, matplotlib, plot

我希望 Matplotlib/Pyplot 生成具有一致画布大小的绘图。也就是说，图形可以有不同的大小以适应轴的描述，但绘图区域（绘制曲线的矩形）应该始终具有相同的大小。

有没有一种简单的方法可以实现这一目标？pyplot.figure() 的选项 figsize 似乎设置了图形的整体大小，而不是画布的大小，所以每当轴描述占用或多或少的空间时，我都会得到不同的画布大小。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-17T13:41:45.897

这是我对 Matplotlib 最大的不满之一。我经常使用栅格数据，例如我想添加颜色图、图例和一些标题。matplotlib 库中的任何简单示例都会导致不同的分辨率，因此会导致重新采样数据。尤其是在进行图像分析时，您不需要任何（不需要的）重采样。

这是我通常做的事情，尽管我很想知道是否有更简单或更好的方法。

让我们从加载图片开始，并以相同的分辨率输出它：

```
import matplotlib.pyplot as plt
import urllib2

# load the image
img = plt.imread(urllib2.urlopen('http://upload.wikimedia.org/wikipedia/en/thumb/5/56/Matplotlib_logo.svg/500px-Matplotlib_logo.svg.png'))

# get the dimensions
ypixels, xpixels, bands = img.shape

# get the size in inches
dpi = 72.
xinch = xpixels / dpi
yinch = ypixels / dpi

# plot and save in the same size as the original
fig = plt.figure(figsize=(xinch,yinch))

ax = plt.axes([0., 0., 1., 1.], frameon=False, xticks=[],yticks=[])
ax.imshow(img, interpolation='none')

plt.savefig('D:\\mpl_logo.png', dpi=dpi, transparent=True) 
```

请注意，我手动定义了轴位置，以便跨越整个图形。

以与上述类似的方式，您可以在图像周围添加一些边距以允许标签或颜色条等。

此示例在图像上方添加 20% 的边距，然后用于绘制标题：

```
fig = plt.figure(figsize=(xinch,yinch/.8))

ax = plt.axes([0., 0., 1., .8], frameon=False, xticks=[],yticks=[])
ax.imshow(img, interpolation='none')
ax.set_title('Matplotlib is fun!', size=16, weight='bold')

plt.savefig('D:\\mpl_logo_with_title.png', dpi=dpi) 
```

因此图形 y 大小（高度）增加，轴的 y 大小同样减小。这提供了更大的（整体）输出图像，但轴区域仍然是相同的大小。

拥有像 .set_scale() 这样的图形或轴属性来强制实现真正的 1-on-x 输出可能会很好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-09-03T23:06:24.073

您可以在 Matplotlib rc 中指定以下设置：

```
import matplotlib
matplotlib.rcParams['figure.figsize'] = [10, 10] # for square canvas
matplotlib.rcParams['figure.subplot.left'] = 0
matplotlib.rcParams['figure.subplot.bottom'] = 0
matplotlib.rcParams['figure.subplot.right'] = 1
matplotlib.rcParams['figure.subplot.top'] = 1 
```

# java - 无法从 JTexField 中的数据库中获取记录

> ID：16057870
> 
> 赞同：0
> 
> 时间：2013-04-17T10:39:40.170
> 
> 标签：java, mysql, jtextfield, jcombobox, selecteditem

您好，我正在尝试从数据库中获取记录，而我正在使用一个基于该选择的组合框我想从文本字段中的同一个表中获取相关记录..但不幸的是我得到了错误..谁能给我片段我在哪里代码错误？

```
 try {
        Class.forName("com.mysql.jdbc.Driver");
        con = (Connection) DriverManager.getConnection("jdbc:mysql://localhost:3306/testdatabase", "root", "ubuntu123");
        Statement st = con.createStatement();
        ResultSet rs = st.executeQuery("Select productname,quantity from productorder");

        // ResultSet rs1 = st.executeQuery("Select quantity from productorder");

        while (rs.next()) {

            jComboBox1.addItem(rs.getString("productname"));

        }

        jComboBox1.addItemListener(new ItemListener() {

            public void itemStateChanged(ItemEvent ie) {

                try {
                    String str = (String) jComboBox1.getSelectedItem();
                    //Statement st1 = con.createStatement();
                    PreparedStatement stmt = (PreparedStatement) con.prepareStatement("Select * from productorder where productname=?");
                    stmt.setString(1, str);
                    ResultSet rs1 = stmt.executeQuery();
                    jTextField2.setText(str);

                    Integer qty=rs1.getInt(1); // Error in this line at com.mylogin.Testingproductmaster$1.itemStateChanged(Testingproductmaster.java:58)

                  jTextField1.setText(qty.toString());

                } catch (SQLException ex) {
                      Logger.getLogger(Testingproductmaster.class.getName()).log(Level.SEVERE, null, ex);
                } 
```

全栈跟踪

```
 18 Apr, 2013 5:14:33 PM com.mylogin.Testingproductmaster$1 itemStateChanged
  SEVERE: null
  java.sql.SQLException: Invalid value for getInt() - 'TCS'

  at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1075)

at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:989)
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:984)
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:929)
at com.mysql.jdbc.ResultSetImpl.getInt(ResultSetImpl.java:2725)
at com.mylogin.Testingproductmaster$1.itemStateChanged(Testingproductmaster.java:62)
at javax.swing.JComboBox.fireItemStateChanged(JComboBox.java:1222)
at javax.swing.JComboBox.selectedItemChanged(JComboBox.java:1279)
at javax.swing.JComboBox.contentsChanged(JComboBox.java:1326)
at javax.swing.AbstractListModel.fireContentsChanged(AbstractListModel.java:117)
at javax.swing.DefaultComboBoxModel.setSelectedItem(DefaultComboBoxModel.java:105)
at javax.swing.JComboBox.setSelectedItem(JComboBox.java:574)
at javax.swing.JComboBox.setSelectedIndex(JComboBox.java:620)
at javax.swing.plaf.basic.BasicComboPopup$Handler.mouseReleased(BasicComboPopup.java:831)
at java.awt.AWTEventMulticaster.mouseReleased(AWTEventMulticaster.java:290)
at java.awt.Component.processMouseEvent(Component.java:6389)
at javax.swing.JComponent.processMouseEvent(JComponent.java:3268)
at javax.swing.plaf.basic.BasicComboPopup$1.processMouseEvent(BasicComboPopup.java:497)
at java.awt.Component.processEvent(Component.java:6154)
at java.awt.Container.processEvent(Container.java:2045)
at java.awt.Component.dispatchEventImpl(Component.java:4750)
at java.awt.Container.dispatchEventImpl(Container.java:2103)
at java.awt.Component.dispatchEvent(Component.java:4576)
at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4633)
at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4297)
at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4227)
at java.awt.Container.dispatchEventImpl(Container.java:2089)
at java.awt.Window.dispatchEventImpl(Window.java:2518)
at java.awt.Component.dispatchEvent(Component.java:4576)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:672)
at java.awt.EventQueue.access$400(EventQueue.java:96)
at java.awt.EventQueue$2.run(EventQueue.java:631)
at java.awt.EventQueue$2.run(EventQueue.java:629)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:105)
at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:116)
at java.awt.EventQueue$3.run(EventQueue.java:645)
at java.awt.EventQueue$3.run(EventQueue.java:643)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:105)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:642)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:275)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:200)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:190)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:185)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:177)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:138) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T19:52:16.770

确保将`ResultSet`光标移到`JComboBox` `ItemListener`

```
ResultSet rs1 = stmt.executeQuery();

if (rs1.next()) {
    Integer qty = rs1.getInt(1);
    ...
} 
```

请注意，这将使用检索到的*第一*条记录。如果不是唯一的，则*可能*需要更具体的`WHERE`子句从数据库查询中返回单个记录。*`productname`*

 **编辑：*从此错误

```
java.sql.SQLException: Invalid value for getInt() - 'TCS' 
```

在列索引 1 处返回的值实际上不是有效的整数值（似乎是文本类型）。检查调用你的 SQL

```
Select * from productorder where productname='<Some Product Here>' 
```

在您的 SQL 客户端中，并确保您从正确的索引中读取以匹配您的`qty`整数变量。

如果数量是唯一要检索的数据，则可以优化查询以仅返回该信息

```
Select quantity from productorder where productname=? 
```*

# java - 使用 Java7 在 OSX 上启用 Swing 菜单

> ID：16057872
> 
> 赞同：4
> 
> 时间：2013-04-17T10:39:41.763
> 
> 标签：java, macos, swing, java-7, jmenu

我有一个 Swing 应用程序，我需要在其中启用来自不同线程的 JMenu。我在 OSX 上执行此操作，并通过 apple.laf.useScreenMenuBar 使用本机屏幕菜单。自从切换到 java 7 以来，最初禁用的菜单现在从未启用，我不知道为什么。我附上了一个说明问题的小程序。单击 Fixed > Change 菜单项应在短暂暂停后启用测试菜单（应打开和关闭对话框）。

使用 java6 它工作正常。在 java 7 中，菜单未启用。如果我不使用屏幕菜单，它适用于 6 或 7，如果我使用 EventQueue.invokeAndWait，它适用于 6 或 7，但我认为我不需要这样做。

这是一个错误，还是我误解了摆动线程之间的交互应该如何工作？

```
import java.awt.EventQueue;
import java.awt.event.*;
import javax.swing.*;

public class MainWindow extends JFrame implements ActionListener {

    private JMenu testMenu;

    public MainWindow () {

        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setTitle("Menu Enable Test");

        JMenuBar bar = new JMenuBar();

        JMenu fixedMenu = new JMenu("Fixed");
        JMenuItem change = new JMenuItem("Change");
        change.addActionListener(this);
        fixedMenu.add(change);
        bar.add(fixedMenu);

        testMenu = new JMenu("Test");
        testMenu.setEnabled(false);
        JMenuItem seeMe = new JMenuItem("Can you see me?");
        testMenu.add(seeMe);

        bar.add(testMenu);

        setJMenuBar(bar);

        setSize(800,600);
        setLocationRelativeTo(null);
        setVisible(true);
    }

    public void makeVisible () {
        testMenu.setEnabled(true);
    }

    public void actionPerformed(ActionEvent ae) {
        new RemoteChanger(this);
    }

    private class RemoteChanger extends JDialog implements Runnable {
        private MainWindow window;

        public RemoteChanger (MainWindow window) {
            super(window);
            setSize(200,100);
            setLocationRelativeTo(window);
            this.window = window;
            setVisible(true);
            Thread t = new Thread(this);
            t.start();
        }

        public void run() {
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {}

            EventQueue.invokeLater(new Runnable() {
                public void run() {
                    window.makeVisible();                   
                }
            });

            setVisible(false);

        }
    }

    public static void main (String [] args) {
        System.setProperty("apple.laf.useScreenMenuBar", "true");
        new MainWindow();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:29:48.120

我认为问题的根源在于您`setVisible(false)`不在 Swing 线程中。将其移动到`invokeLater()`调用内部似乎更正确，并为您提供预期的行为。

```
EventQueue.invokeLater(new Runnable() {
    public void run() {
        window.makeVisible();    
        setVisible(false);
    }
}); 
```

# javascript - 使用 AngularJS 在表单上隐藏输入帮助

> ID：16057873
> 
> 赞同：0
> 
> 时间：2013-04-17T10:39:43.680
> 
> 标签：javascript, jquery, angularjs

我目前正在学习 AngularJS，我想完成一个简单的任务。在表单输入中，即使输入的数据无效，我也想隐藏相应的“输入帮助”。我目前这样做的方式调用了一些 jquery。但我正在寻找使用 AngularJS 逻辑的方法。我认为我应该使用指令，但由于我是 Angular 新手，我不知道该怎么做。

这是使用 jquery 工作的 jsFiddle 示例代码：[JSFIDDLE](http://jsfiddle.net/wr5bk/)

这里是 jsFiddle 示例代码不起作用（没有 jquery）：[JSFIDDLE](http://jsfiddle.net/TnPpm/) {为了测试，在密码输入中只输入几个文本并模糊它}

这是我的代码：{jquery}

```
$(document).on('blur', '.immediate-help', function () {
    $(this).next('.input-help').fadeOut();
}).on('focus', '.immediate-help', function () {
    $(this).next('.input-help').fadeIn();
}); 
```

这按预期工作，但我想使用角度指令来做到这一点。当然，我并不反对在 angular 指令中使用 jquery。

因此，要恢复，我想在触发模糊输入以隐藏“输入帮助”时，即使文本无效并使用角度指令。

有人可以告诉我正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T11:14:30.977

几种方法：

**在指令中使用脚本：**

`elm``link`如果 jQuery.js 在页面中的 anugular.js 之前加载，则指令回调中的参数是一个 jQuery 对象……或者如果不包括 jQuery.js，它是一个 jQlite。

jQlite 有许多最常见的 jQuery 方法，因此您可以使用：

```
elm.bind('blur.... 
```

有关 jQlite 方法的列表，请参阅**[angular.element 文档](http://docs.angularjs.org/api/angular.element)**。

**使用`ng-class`**

给表单和控件一个`name`. 这将创建一个`formName`具有由字段名称表示的属性的对象。然后，您可以将角度表达式用于类或`disabled`标记中​​的属性

```
<form name="myForm">
    <input name="passord"/>
    <div ng-class="{ShowMeClassName: myForm.password.$invalid}"> Error content</div>
</form> 
```

`ng-class``ShowMeClassName`将根据`password`表单命名字段的有效性切换类`myForm`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T11:11:41.240

您可以使用[Angular-ui](http://angular-ui.github.io/)。

Angular-UI 提供了一堆指令，可以帮助你。你有 ui-event 指令。

例如，您可以使用

```
<input ui-event="{ blur : 'blurCallback()' }">
...
<script>
$scope.blurCallback = function() {
alert('Goodbye');
};
</script> 
```

# ios - Facebook 图形 API 和嵌套查询

> ID：16057879
> 
> 赞同：0
> 
> 时间：2013-04-17T10:40:04.557
> 
> 标签：ios, facebook, facebook-graph-api

我正在尝试使用以下查询使用 Facebook iOS SDK 获取好友列表详细信息：

```
if (FBSession.activeSession.isOpen) {
            [FBRequestConnection startWithGraphPath:@"me?fields=id,name,friendlists&fields=id,name,members&fields=pic,can_post,id,link,name,pic_crop,pic_large,pic_small,pic_square,profile_type,username,picture,list_type" completionHandler:^(FBRequestConnection *connection,id user, NSError *error) {

            }]; 
```

我知道错误是在构造查询时使用“&”，但我不知道如何嵌套查询（以获取 pic、can_post 等详细信息）。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:29:07.730

你应该做这个

```
me?fields=name,about,accounts.fields(about) 
```

如果您想请求“用户”（包括姓名、关于）和帐户连接（包括“关于”字段）

第二个连接你必须用户。（点符号）而不是 ?fields=

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T13:04:40.977

你应该使用`+ startForMyFriendsWithCompletionHandler:(FBRequestHandler)handler`：

```
if (FBSession.activeSession.isOpen) {
        [FBRequestConnection startForMyFriendsWithCompletionHandler:^(FBRequestConnection *connection,id user, NSError *error) {

        }];
} 
```

请注意，它会从您的朋友那里获取所有字段。如果您只想要几个，您可以使用`startWithGraphPath:completion:`with`@"me/friends?fields=id,name,pic_square`作为图形路径。

# android - 在 Android 应用中安装 Admob

> ID：16057880
> 
> 赞同：0
> 
> 时间：2013-04-17T10:40:05.683
> 
> 标签：android, admob

我有一个具有 admob 广告的应用程序 ( **A** )，当按下一个按钮时会打开另一个已安装在智能手机中的应用程序，例如：**媒体播放器**。

当媒体播放器打开时，我的应用程序 (A) 在后台，当媒体播放器关闭时，再次显示应用程序 (A) 和 admob 广告。

我的问题是：

¿我怎样才能做admob广告，在媒体播放器上显示？

我有包媒体播放器的名称。

我在我的应用程序中使用了这个 admob 代码：[Admob on Multiple Activities？](https://stackoverflow.com/questions/10234762/admob-on-multiple-activities?lq=1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:13:15.043

> 我怎样才能做admob广告，在媒体播放器上显示？

**AFAIK 你做不到。**您只能在您的应用程序中看到 admob 添加。由于您没有任何命令可以更改另一个应用程序中的任何内容，因此这件事是不可能的。

# apache-commons - 如果一个值为0，如何计算相关性

> ID：16057881
> 
> 赞同：0
> 
> 时间：2013-04-17T10:40:12.513
> 
> 标签：apache-commons, recommendation-engine, correlation, pearson

为了计算两个数组之间的皮尔逊系数，我使用以下内容：

```
 double[] arr1 = new double[4];
    arr1[0] = 1;
    arr1[1] = 1;
    arr1[2] = 1;
    arr1[3] = 1;

    double[] arr2 = new double[4];
    arr2[0] = 1;
    arr2[1] = 1;
    arr2[2] = 1;
    arr2[3] = 1;
PearsonsCorrelation pc = new PearsonsCorrelation();
println("Correlation is "+pc.correlation(arr1, arr2)); 
```

> 对于我收到的输出：相关性为 NaN

PearsonsCorrelation 类包含在 apache commons API 中：[http ://commons.apache.org/proper/commons-math/userguide/stat.html](http://commons.apache.org/proper/commons-math/userguide/stat.html)

每个数组中的值取决于用户是否在他们的数据集中包含一个词。上面的数组应该是完全相关的？

这个问题与[如何设置计算欧式距离和相关性的值有关](https://stackoverflow.com/questions/15975422/how-to-set-a-values-for-calculating-eucludeian-distance-and-correlation)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T08:56:11.583

有人在这里遇到类似的问题[[link]](https://stackoverflow.com/questions/8895080/commons-maths-pearsons-correlation-returns-nan)。显然，该问题与数组中的标准偏差为 0 有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-10T21:21:06.677

您尝试计算两个长度为 4 的向量之间的相关性。由于每个向量中的所有值都是相同的（一个向量中的 0，另一个向量中的 1），这相当于尝试计算两个数字之间的相关系数（在这种情况下为 0 和 1）。

很明显，没有这样的事情。你至少需要两个不同的对。就像如果您只有一对值，您将无法绘制有意义的回归线。

如果只有一个向量有一些变化，结果仍然是 NA，但在这种情况下，将其设置为零是合理的。

# java - 从给出 NullPointerException 的 url 获取 json

> ID：16057882
> 
> 赞同：0
> 
> 时间：2013-04-17T10:40:15.047
> 
> 标签：java, android, http

我正在从以下 URL 获取 URL，但出现以下错误

```
 url = "http://qrpromenad.azurewebsites.net/api/question?id=1&imei=35404304";

    public JSONObject getJSONFromUrl(String url) {
    System.out.println(url);
    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();  // here i got null value

    } catch (Exception e) {
        e.printStackTrace();
    } 
```

以下是logcat错误

```
 04-17 16:00:12.739: W/System.err(4579): java.lang.NullPointerException
       04-17 16:00:12.739: W/System.err(4579):  at         com.qrcodetest.JSONParser.getJSONFromUrl(JSONParser.java:40)
       04-17 16:00:12.739: W/System.err(4579):  at com.qrcodetest.Result$FetchURL.doInBackground(Result.java:50)
       04-17 16:00:12.739: W/System.err(4579):  at com.qrcodetest.Result$FetchURL.doInBackground(Result.java:1)
       04-17 16:00:12.739: W/System.err(4579):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
       04-17 16:00:12.739: W/System.err(4579):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
       04-17 16:00:12.739: W/System.err(4579):  at java.util.concurrent.FutureTask.run(FutureTask.java:138)
       04-17 16:00:12.739: W/System.err(4579):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
       04-17 16:00:12.739: W/System.err(4579):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
       04-17 16:00:12.739: W/System.err(4579):  at java.lang.Thread.run(Thread.java:1019) 
```

但如果我使用另一个网址，如[http://api.androidhive.info/contacts/](http://api.androidhive.info/contacts/)它工作正常

我使用了 POST 方法，但仍然返回 NULL

```
 DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(Const.POST_URL);
        // Add your data
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
        nameValuePairs.add(new BasicNameValuePair("id", "1"));
        nameValuePairs.add(new BasicNameValuePair("imei", "123456"));
        httpPost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        System.out.println("httpEntity "+httpEntity); // here is null
        if (httpResponse.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {// false
            is = httpEntity.getContent();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T11:32:42.313

有问题的 URL 不支持帖子（您可以使用任何类型的 REST 客户端自行测试）。但是，正如您自己所指出的，它确实适用于 GET。因此，将您的代码切换为如下所示的内容并解决问题：

```
final String url = "http://qrpromenad.azurewebsites.net/api/question?id=1&imei=35404304";

DefaultHttpClient httpClient = new DefaultHttpClient();
HttpGet get = new HttpGet(url);

HttpResponse httpResponse = httpClient.execute(get);

String responseData = null;
final int status = httpResponse.getStatusLine().getStatusCode();
if (status == HttpStatus.SC_OK) {
    responseData = EntityUtils.toString(httpResponse.getEntity());
} else {
    System.err.println("HTTP request failed with status " + status);
}

System.out.println(responseData); 
```

*您需要（当然）添加一些更高级的错误处理*

# c# - C# 单元测试 - 模拟、存根或使用显式实现

> ID：16057885
> 
> 赞同：3
> 
> 时间：2013-04-17T10:40:30.347
> 
> 标签：c#, unit-testing, mocking, simple-injector, nsubstitute

这个之前已经讨论过很多次了，但是下面例子中的优点并不明显，所以请多多包涵。

我正在尝试决定是否在我的单元测试中使用模拟实现，并且鉴于以下两个示例，我尚未决定，第一个使用 NSubstitute 进行模拟，第二个使用 SimpleInjector（Bootstrapper 对象）解析的实现。

本质上，两者都在测试同一件事，即在调用 .Dispose() 方法时将 Disposed 成员设置为 true（请参阅本文底部的方法实现）。

在我看来，第二种方法对回归测试更有意义，因为模拟代理在第一个示例中将 Disposed 成员显式设置为 true，而在注入实现中它是由实际的 .Dispose() 方法设置的。

您为什么建议我选择一个而不是另一个来验证该方法是否按预期运行？即调用了 .Dispose() 方法，并且该方法正确设置了 Disposed 成员。

```
 [Test]
    public void Mock_socket_base_dispose_call_is_received()
    {
        var socketBase = Substitute.For<ISocketBase>();
        socketBase.Disposed.Should().BeFalse("this is the default disposed state.");

        socketBase.Dispose();
        socketBase.Received(1).Dispose();

        socketBase.Disposed.Returns(true);
        socketBase.Disposed.Should().BeTrue("the ISafeDisposable interface requires this.");
    }

    [Test]
    public void Socket_base_is_marked_as_disposed()
    {
        var socketBase = Bootstrapper.GetInstance<ISocketBase>();
        socketBase.Disposed.Should().BeFalse("this is the default disposed state.");
        socketBase.Dispose();
        socketBase.Disposed.Should().BeTrue("the ISafeDisposable interface requires this.");
    } 
```

作为参考， .Dispose() 方法就是这样：

```
 /// <summary>
    /// Performs application-defined tasks associated with freeing, releasing, or resetting unmanaged resources.
    /// </summary>
    public void Dispose()
    {
        Dispose(true);
        GC.SuppressFinalize(this);
    }

    /// <summary>
    /// Releases unmanaged and - optionally - managed resources.
    /// </summary>
    /// <param name="disposeAndFinalize"><c>true</c> to release both managed and unmanaged resources; <c>false</c> to release only unmanaged resources.</param>
    protected void Dispose(bool disposeAndFinalize)
    {
        if (Disposed)
        {
            return;
        }

        if (disposeAndFinalize)
        {
            DisposeManagedResources();
        }

        DisposeUnmanagedResources();

        Disposed = true;
    } 
```

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T11:45:15.770

这两种测试方法对我来说似乎都很奇怪。使用第一种方法，您似乎没有测试任何东西（或者我可能误解了 NSubstitute 的功能），因为您只是模拟了`ISocketBase`接口（没有要测试的行为）并开始测试该模拟对象而不是真正的实现。

第二种方法也很糟糕，因为您不应该**在**单元测试中使用任何 DI 容器。这只会使事情变得更加复杂，因为：

1.  您现在使用所有测试都使用的共享状态，这使得所有测试相互依赖（测试应该独立运行）。
2.  容器引导逻辑将变得非常复杂，因为您想为不同的测试插入不同的模拟，并且再次，测试之间没有共享对象。
3.  你的测试对一个根本不存在的框架或外观有额外的依赖。从这个意义上说，你只是让你的测试更复杂。它可能只是有点复杂，但它仍然是一个额外的复杂性。

相反，您应该**始终**在单元测试（或测试工厂方法）本身内创建被测类 (SUT)。您可能仍想使用模拟框架创建 SUT 依赖项，但这是可选的。因此，IMO 测试应该如下所示：

```
[Test]
public void A_nondisposed_Socket_base_should_not_be_marked_dispose()
{
    // Arrange
    Socket socket = CreateValidSocket();

    // Assert
    socketBase.Disposed.Should().BeFalse(
        "A non-disposed socket should not be flagged.");
}

[Test]
public void Socket_base_is_marked_as_disposed_after_calling_dispose()
{
    // Arrange
    Socket socket = CreateValidSocket();

    // Act
    socketBase.Dispose();

    // Assert
    socketBase.Disposed.Should().BeTrue(
        "Should be flagged as Disposed.");
}

private static Socket CreateValidSocket()
{
    return new Socket(
        new FakeDependency1(), new FakeDependency2());
} 
```

请注意，我将您的单个测试分成 2 个测试。在调用 dispose 之前应该`Disposed`为 false 不是该测试运行的先决条件；这是系统工作的要求。换句话说，您需要明确这一点并需要第二次测试。

还要注意`CreateValidSocket`在多个测试中重用的工厂方法的使用。当其他测试检查需要更具体的假对象或模拟对象的类的其他部分时，您可能对此方法有多个重载（或可选参数）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T11:31:44.317

你关心的太多了。此测试正在测试天气或给定的实现是否正确处理，因此您的测试应该反映这一点。请参阅下面的伪代码。非脆性测试的诀窍是只测试满足测试所需的绝对最小值。

```
 public class When_disposed_is_called()
 {
    public void The_object_should_be_disposed()
    {
       var disposableObjects = someContainer.GetAll<IDisposable>();
       disposableObjects.ForEach(obj => obj.Dispose());
       Assert.False(disposableObject.Any(obj => obj.IsDisposed == false));
    }
 } 
```

正如你所看到的，我用我关心的所有对象填充了一些依赖容器`IDisposable`。我可能不得不嘲笑他们或做其他事情，但这不是测试的关注点。最终，它只关心验证当某物被处置时，它实际上应该被处置。

# image - 分数达到一定数量后加载影片剪辑

> ID：16057886
> 
> 赞同：0
> 
> 时间：2013-04-17T10:40:32.337
> 
> 标签：image, actionscript-3, flash, loader, flash-cs5

我几乎完成了我的项目，但是当我尝试在我的库中加载一个电影剪辑时，当我的分数达到 100 时，它会从舞台上删除游戏，但不显示我试图显示的屏幕。

我写的代码如下。任何帮助将不胜感激。

```
 package 
{

    import flash.display.*;
    import flash.events.*;
    import flash.text.*;
    import flash.utils.Timer;
    import flash.utils.getDefinitionByName;

    public class blast_game extends MovieClip
    {
        // creates a variable that stores the catcher that
        //will be used to collect the chocolate bars.
        var catcher:Catcher;
        var nextObject:Timer;
        var objects:Array = new Array();
        var score:int = 0;
        const speed:Number = 7.0;
        //end of catcher code

        //beginning of game code - spawns a new catcher on screen
        //at start of game.
        public function blast_game()
        {
            catcher = new Catcher();
            catcher.y = 350;
            addChild(catcher);
            setNextObject();
            addEventListener(Event.ENTER_FRAME, moveObjects);
        }
        //end of catcher spawn

        //sets variables for the random object drops, 
        //increments the objects to appear every second.
        public function setNextObject()
        {
            nextObject = new Timer(1000+Math.random()*1000,1);
            nextObject.addEventListener(TimerEvent.TIMER_COMPLETE,newObject);
            nextObject.start();
        }
        //end of object variables

        public function newObject(e:Event)
        {
            //creates an array to hold the "Good" and "Bad" objects in
            //the application.
            var goodObjects:Array = ["Circle1","Circle2"];
            var badObjects:Array = ["Square1","Square2"];
            if (Math.random() < .5)
            {
                //replaces the "good" object when the object hits the floor, places
                //object back in array to drop again.
                var r:int = Math.floor(Math.random() * goodObjects.length);
                var classRef:Class = getDefinitionByName(goodObjects[r]) as Class;
                var newObject:MovieClip = new classRef();
                newObject.typestr = "good";
                //end of "Good" object replacement
            }
            else
            {
                //replaces the "Bad" object when the object hits the floor,    places
                //object back in array to drop again
                r = Math.floor(Math.random() * badObjects.length);
                classRef = getDefinitionByName(badObjects[r]) as Class;
                newObject = new classRef();
                newObject.typestr = "bad";
                //end of "Bad" object replacement
            }
            //randomises the location the objects will be placed on stage
            //after replacement.
            newObject.x = Math.random() * 500;
            addChild(newObject);
            objects.push(newObject);
            setNextObject();
            //end of object randomisation
        }

        public function moveObjects(e:Event)
        {
            for (var i:int=objects.length-1; i>=0; i--)
            {
                //code to increase speed of objects over time.
                objects[i].y +=  speed;
                if (objects[i].y > 400)
                {
                    removeChild(objects[i]);
                    objects.splice(i,1);
                }
                //hit test for catcher - if any object hits the catcher
                //increase or decrease score respectively.
                if (objects[i].hitTestObject(catcher))
                {
                    //increase score when catcher catches "Good" object
                    if (objects[i].typestr == "good")
                    {
                        score +=  10;
                    }
                    else
                    //decrease score if catcher catches "Bad" object.
                    {
                        score -=  5;
                    }
                    //prevents score from going below 0
                    if (score < 0)
                    {
                        score = 0;
                    }
                    scoreDisplay.text = "Score: " + score;
                    //once object hits catcher, remove object from                                                                                              stage.
                    removeChild(objects[i]);
                    objects.splice(i,1);
                }
                //if statement to move screen to promotion screen
                //once score reaches past 100
//THIS IS WHERE I THINK THE ISSUE IS!!!
            if(score >= 100) {
                var promotionScreen:promotion = new promotion;
                //stage.removeChild(this)
                addChild(promotionScreen);
                removeEventListener(Event.ENTER_FRAME, moveObjects);
                promotionScreen = stage.stageWidth / 2;
                promotionScreen = stage.stageHeight /2;

            }
            //end of if statement
            }

            //sets catcher to work with mouse movement.
            catcher.x = mouseX;

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:08:57.170

你应该在里面设置**break**，`if(score >= 100)`因为这个条件可以在你的 for 循环中启动几次。也`MovieClip`可以阻止你，所以尝试`.play()`或`.gotoAndStop()` 哦！`promotionScreen = stage.stageWidth/2`你应该设置`promotionScreen.x = stage.stageWidth/2`

# image - 在电晕中通过触摸动作创建动态图像

> ID：16057895
> 
> 赞同：1
> 
> 时间：2013-04-17T10:41:13.067
> 
> 标签：image, lua, coronasdk

我有动态图像创建的触摸问题。我的代码是

```
local widget = require "widget"

--Hide status bar
display.setStatusBar( display.HiddenStatusBar )

--bg image
local backgroundPortrait = display.newImage( "background.png", 0, 0 )

--local image1Group
--image1Group = display.newGroup()

--3 frames
local frame1 = display.newImageRect( "icon_1.png", 75, 75 )
frame1:setReferencePoint( display.CenterReferencePoint )
frame1.x = 160
frame1.y = 120

local frame2 = display.newImageRect( "icon_2.png", 75, 75 )
frame2:setReferencePoint( display.CenterReferencePoint )
frame2.x = 60
frame2.y = 360

local frame3 = display.newImageRect( "icon_3.png", 75, 75 )
frame3:setReferencePoint( display.CenterReferencePoint )
frame3.x = 260
frame3.y = 360

-- Center image
function createImage()
    centerFrame = display.newImageRect( "additionalvampire1.jpg", 75, 75 )
    centerFrame:setReferencePoint( display.CenterReferencePoint )
    centerFrame.x = display.contentCenterX
    centerFrame.y = display.contentCenterY
    centerFrame:addEventListener("touch", centerFrame)
end
createImage()
function removeTouchEventFun()
    centerFrame:removeEventListener("touch", centerFrame)
end

function transitionCompleted(centerFrame)
    print("transitionCompleted called")
    removeTouchEventFun()
    centerFrame:removeSelf()
    centerFrame=nil
    createImage()
end
function centerFrame:touch(event)
    if event.phase == "began" then
        self.markX = self.x    -- store x location of object
        self.markY = self.y    -- store y location of object
    elseif event.phase == "moved" then
        local x = (event.x - event.xStart) + self.markX
        local y = (event.y - event.yStart) + self.markY
        self.x, self.y = x, y    -- move object based on calculations above
    elseif event.phase == "ended" then
        if (centerFrame.x<=160  and centerFrame.y>=240) then
            transition.to( centerFrame, { time=1000, alpha=1, x=60, y=360, width=1 ,height=1, onComplete= transitionCompleted } )
        elseif (centerFrame.x>=160  and centerFrame.y>=240) then
            transition.to( centerFrame, { time=1000, alpha=1, x=260, y=360, width=1 ,height=1, onComplete= transitionCompleted } )
        else
            transition.to( centerFrame, { time=1000, alpha=1, x=160, y=120, width=1 ,height=1, onComplete= transitionCompleted } )
        end
    end
    return true
end 
```

当将图像拖到任何一帧时，它会缩小并删除对象并创建另一个图像。对于此图像，触摸不起作用...

当图像转换竞争方法时，我需要通过触摸动作创建图像。我应该怎么办？...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-05T19:57:41.850

```
local centerFrame     

function transitionCompleted(centerFrame)
    print("transitionCompleted called")
    if(centerFrame) then 
        centerFrame:removeSelf()
        centerFrame=nil
        createImage()
    end

end

function onCenterFrameTouch(event)
    //your code here
end

function createImage()
    centerFrame = display.newImageRect( "additionalvampire1.jpg", 75, 75 )
    centerFrame:setReferencePoint( display.CenterReferencePoint )
    centerFrame.x = display.contentCenterX
    centerFrame.y = display.contentCenterY
    centerFrame:addEventListener("touch", onCenterFrameTouch)
end 
```

# c# - 使用 iTextSharp 重命名复选框字段

> ID：16057897
> 
> 赞同：0
> 
> 时间：2013-04-17T10:41:15.377
> 
> 标签：c#, itextsharp

我正在尝试重命名 itext 中的字段。我可以成功重命名文本字段，但重命名复选框字段时出现错误。这是到目前为止的代码：

```
try {
    pdfReader = new PdfReader(s_pdfread);
} catch (Exception ex) {
    Console.WriteLine("Can't create Filestream from " + s_pdfread);
    Console.WriteLine(ex.Message);
    ShowHelp();
    Environment.Exit(-1);
}

List <renameJob> jobsToDo = new List<renameJob> ();

try {
    using (FileStream fs = new FileStream(s_pdfwrite, FileMode.Create)) {
        PdfStamper stamper = new PdfStamper(pdfReader, fs);
        AcroFields fields = stamper.AcroFields;

        foreach (var field in stamper.AcroFields.Fields) {
            Console.WriteLine("fieldKeySRC: " + field.Key);
            string newFieldname = field.Key.Replace(s_searchFor, s_replaceWith);
            newFieldname = newFieldname.Replace(".", "");

            // special name for checkbox
            /*switch (stamper.AcroFields.GetFieldType(field.Key)) {
                case AcroFields.FIELD_TYPE_CHECKBOX:
                    newFieldname = newFieldname + ".0";
                    break;
            } planned for future. In finaly version i need to add this .0 */

            if (field.Key != newFieldname) {
                renameJob job = new renameJob();
                job.oldName = field.Key;
                job.newName = newFieldname;
                jobsToDo.Add(job);
            }
        }

        foreach (renameJob job in jobsToDo) {
            if (fields.RenameField(job.oldName, job.newName) == true) {
                Console.WriteLine("renameField: " + job.oldName + " to " + job.newName);
            }
            else {
                Console.WriteLine("!!! failed: renameField: " + job.oldName + " to " + job.newName);
            }

        }

        stamper.Close(); 
```

为什么这对复选框会失败而对文本框工作正常......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:14:35.950

正如 mkl 解释的那样，“。” 在字段名称中不是名称的一部分，它在那里表示层次结构。

假设您有一个名为“parent”的父字段，其中包含两个孩子“kid1”和“kid2”。在这种情况下，孩子字段的完全限定名称是“parent.kid1”和“parent.kid2”。

使用 iText，您可以重命名字段，但不能更改层次结构。例如：您可以将完全限定名称“mybox”更改为“hisbox”，您可以将完全限定名称“parent.kid1”更改为“parent.child1”，将“parent.kid2”更改为“parent.child2”。

**如果这些字段是文本字段、复选框字段或任何其他类型的字段，则**无关紧要！****

 **换句话说：你的问题是错误的！您遇到的问题是您没有尝试重命名字段。相反，您尝试将“parent.kid1”更改为“parentkid1”，将“parent.kid2”更改为“parentkid2”。这和改名不一样！那就是消除等级制度，将一个父母和两个孩子变成两个没有父母的孩子！您不能使用重命名功能来执行此操作。

如果你真的想丢弃层次结构，你需要添加两个新字段“parentkid1”和“parentkid2”，它们复制“parent.kid1”和“parent.kid2”的属性。获得这些副本后，您需要删除“parent”、“kid1”和“kid2”。

这是更多的工作。我建议不要这样做，因为这是一个容易出错的操作。**

# c# - 如何在 .net 3.5 中实现动态功能

> ID：16057901
> 
> 赞同：3
> 
> 时间：2013-04-17T10:41:25.470
> 
> 标签：c#, .net, dynamic, reflection

如何在没有`dynamic`关键字的 .NET 3.5 中实现此行为。

```
Guid CLSID_ShellApplication = new Guid("13709620-C279-11CE-A49E-444553540000");
Type shellApplicationType = Type.GetTypeFromCLSID(CLSID_ShellApplication, true);
dynamic shellApplication = Activator.CreateInstance(shellApplicationType);
dynamic windows = shellApplication.Windows();

for (int i = 0; i < windows.Count; i++)
    windows.Item(i).Refresh(); 
```

我尝试使用

```
MethodInfo windowsMethod = shellApplicationType.GetMethod("Windows"); 
```

但`GetMethod`返回`null`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T15:55:40.393

如果你想要的是 .NET < 4.0 中的动态行为，你可以直接去 DLR 检查这个网站[http://dlr.codeplex.com/](http://dlr.codeplex.com/) 你也可以看看这个视频。IronPython 背后的人展示了如何为办公室（使用 COM）实现 DLR 绑定器 [http://channel9.msdn.com/blogs/pdc2008/tl10](http://channel9.msdn.com/blogs/pdc2008/tl10)

# api - 用于在线接收短信（短信）的 API/服务

> ID：16057903
> 
> 赞同：6
> 
> 时间：2013-04-17T10:41:26.350
> 
> 标签：api, sms, gsm, sms-gateway

我目前的项目要求我们在线接收短信。很难浏览搜索结果，因为其中许多只是有大约 10 个数字供每个人使用的网站。

我正在寻找与[http://www.tropo.com提供的服务类似的服务](http://www.tropo.com)

您可以在美国或加拿大使用您自己生成的私人电话号码在线发送和接收短信。

最好是免费的，在我做出任何决定之前只需要更多

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T13:00:59.777

*免责声明，我在 Nexmo 兼职做开发人员宣传。*

以下是一些付费 SMS API：

*   [Nexmo](http://nexmo.com)
*   [特维利奥](http://twilio.com)
*   [特罗波](http://tropo.com)

您*也许*可以免费破解某些东西，但您可能会冒着被您使用的任何提供商禁用该解决方案的风险（例如，有些人通过 Google Voice 发送 SMS，但我不建议依赖它）。

由于您正在接收短信，因此 Nexmo 在价格方面将是一个很好的解决方案。您只需为虚拟号码付费（大约每月 1 美元），所有收到的消息都是免费的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:59:40.430

试试[www.twilio.com](http://www.twilio.com)，他们有一个很好的 API，并且在测试时是免费的。

# view - Windows 的 Rubymine（4.x+ 或 5.x+）中全屏模式的快捷键？

> ID：16057904
> 
> 赞同：1
> 
> 时间：2013-04-17T10:41:28.727
> 
> 标签：view, keyboard-shortcuts, fullscreen, rubymine, shortcuts

我正在使用适用于 Windows 的 Rubymine 5.4（顺便说一句，我找到了迄今 为​​止**最好的 Ruby IDE ）。**

我发现您可以通过导航到以下位置进入全屏模式：

> *文件菜单* >> **查看**>> **进入全屏**

进入全屏模式后，将鼠标移动到屏幕顶部会触发菜单栏下拉菜单，您可以再次导航到：

> *文件菜单* >> **查看**>>（现在改为）**退出全屏**

有人知道 Windows 上的快捷方式吗？我认为 OSX 有一个 - 不确定它是什么，但在 Windows 的任何地方都找不到任何人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T10:56:44.403

此操作没有默认快捷方式，但您可以轻松地在|中[添加一个。](http://img20.imageshack.us/img20/6440/20130417145554.png).`Settings``Keymap`

# web-services - 使用 RESTful Web 服务发送 POJO 以保存在服务器上

> ID：16057909
> 
> 赞同：0
> 
> 时间：2013-04-17T10:41:38.580
> 
> 标签：web-services, rest, spring-mvc, resttemplate

我正在开发一个 Restful Web 服务，它允许用户在 POJO 中设置所有参数并将其发送到服务器端 Web 服务，然后 Web 服务将存储这些数据并将生成的 Id 返回给客户端。但是我的 POJO 具有包含一组 POJO 的父子关系，那么我该如何使用 RESTful Web 服务来做到这一点。我还编写了一个代码来使用 Web 服务从服务器获取数据，并且工作正常。但是对于这个问题，请帮助我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:31:08.293

我不确定我是否正确理解了您的问题。我想一些示例代码会有所帮助。如果您正在使用，`RestTemplate`那么序列化和反序列化将自动为您完成。RestTemplate 用于`Jackson`解析 JSON，因此您无需担心 POJO 中的父/子关系。

所以这里有一个例子。互联网上有 1000 个示例。我就是这样学习的。

```
RestTemplate restclient = new RestTemplate();
Product product = restclient.getForObject(url,Product.class);
System.out.println(product.getCoupons().getName()); 
```

产品在哪里（我完全自己编造了这个），

```
 public  class Product {
      @JsonProperty("id")
      private String id;
      @JsonProperty("coupons")
      private Coupons coupons;

      @JsonProperty("id")
      public String getId() {
        return id;
      }
      @JsonProperty("id")
      public void setId(String id) {
        this.id = id;
      }
      @JsonProperty("coupons")
      public Coupons getCoupons() {
       return coupons;
      }
      @JsonProperty("coupons")
      public void setCoupons(Coupons coupons) {
       this.coupons = coupons;
     }
}
public class Coupons {
     @JsonProperty("name")
     private String name;
     @JsonProperty("name")
     public String getName() {
        return name;
     }
     @JsonProperty("name")
     public void setName(String name) {
           this.name = name;
     }
} 
```

如果我误解了您的问题，请告诉我，我可以相应地更新我的答案。

# c++ - TBB concurrent_hash_map operator[] 或类似的访问？

> ID：16057917
> 
> 赞同：0
> 
> 时间：2013-04-17T10:41:50.517
> 
> 标签：c++, map, hashmap, tbb, concurrenthashmap

有没有理由不能使用方括号运算符访问 concurrent_hash_map ？

我一直这样做是为了简化代码的可读性（在应该在地图中的键上）：

```
template <class Tkey, class Tval>
Tval concHashMapGet(concurrent_hash_map < Tkey, Tval >& chm , Tkey key)
{
    concurrent_hash_map< Tkey, Tval >::const_accessor a;

    if (chm.find(a, key))
        return a->second;
    else
        throw;
}; //Will .release() when out of scope 
```

而且我想知道我是否错过了有关正确用法的一些内容，因为您似乎需要获取访问器，然后运行查找，然后获取值，然后释放访问器。法线贴图或 c# 中的 ConcurrentDictionary 中的所有这些都仅使用方括号运算符完成。（好吧，我猜 STL 映射中没有同步，但我在方括号之后。）

此外，如果您发现此功能有任何问题，请告诉我。据我所知，编译器应该内联吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T23:06:39.710

你的逻辑看起来是正确的，据我所知，没有更短的方法可以做到这一点。concurrent_hash_map 没有 operator[] 的原因是，如果它返回 std::map::opreator[] 中的引用，我们将不得不选择默认锁定（访问器或 const_accessor），无论我们选择哪个，它都可能是在某些用例中的错误选择。所以我们强迫调用者做出选择。

如果您不需要同时擦除项目，请考虑改用 tbb::concurrent_unordered_map。这是一种更新的设计，具有无锁界面，并且确实具有 operator[]。

关于代码示例，“throw;” 需要抛出一些东西，除非代码总是从 try-block 处理程序内部调用。

# validation - 了解为什么有时“NULL”和有时“空”值存储到同一个字段？

> ID：16057921
> 
> 赞同：2
> 
> 时间：2013-04-17T10:41:59.207
> 
> 标签：validation, jakarta-ee, web-applications, spring-mvc, null

目前我正在开发 spring(MVC) web 应用程序，在验证控制器中的实体类字段时发现了一些奇怪的东西。每当我在每次提交表单后尝试进行验证时，我都会对存储在实体类字段中的值感到困惑。

例如，以下是我用于验证字符串字段之一的代码片段。它工作正常，但有时不行。我发现的原因是有时`Null value`设置，有时`Empty value`设置为`same field`.

```
if(entity.getWhoBookedIt().equals("")){
  bindingResult.rejectValue("whoBookedIt", "NotEmpty.java.lang.String", null, null);
} 
```

我不明白为什么会发生这种情况？有人可以解释一下原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:12:56.330

我知道这并不能真正回答您的问题，但作为一种解决方案，您可以使用 Apache 的 StringUtils 类来检查两者。

```
if(StringUtils.isEmpty(entity.getWhoBookedIt()){
    bindingResult.rejectValue("whoBookedIt", "NotEmpty.java.lang.String", null, null);
} 
```

从 StringUtils 类：

```
public static boolean isEmpty(String str) {
    return str == null || str.length() == 0;
} 
```

[http://commons.apache.org/proper/commons-lang/](http://commons.apache.org/proper/commons-lang/)

# wpf - WPF TabControl，切换到另一个 TabItem 不起作用，坚持第一个 TabItem

> ID：16057926
> 
> 赞同：1
> 
> 时间：2013-04-17T10:42:22.657
> 
> 标签：wpf, data-binding, tabcontrol, itemssource

我有一个包含以下 XAML 代码的控件。它工作正常，除了我不能切换到另一个 TabItem。我读到`TabControl`虚拟化了`TabItem`，我怀疑奇怪的行为，即我无法将任何其他 TabItem 显示为第一个，与此有关。

```
 <TabControl ItemsSource="{Binding Items}">
        <TabControl.ItemTemplate>
            <DataTemplate> <!-- header -->
                <TextBlock Text="{Binding Title}"></TextBlock>
            </DataTemplate>
        </TabControl.ItemTemplate>
        <TabControl.ContentTemplate>
            <DataTemplate x:Shared="False"> <!-- tabitem content -->
                <controls:ItemControl Item="{Binding}" />
            </DataTemplate>
        </TabControl.ContentTemplate>
    </TabControl> 
```

我尝试将 to 的`x:Shared`属性设置`DataTemplate`为`False`但没有达到预期的效果。有没有办法在不使用自定义样式并`TabControl`用`ItemsControl`. 我的意思`TabControl`是我想要的功能，我想简单地将它与`ItemsSource`绑定一起使用......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:52:33.143

如果您绑定到其中包含重复对象的集合，则会发生此行为。由于多次添加对象或已为相关对象重新定义相等性，可能会发生重复。

# php - 如何在 wordpress 插件开发中删除图像中的锚标签？

> ID：16057930
> 
> 赞同：0
> 
> 时间：2013-04-17T10:42:40.867
> 
> 标签：php, anchor, wordpress

[请点击这里查看图片](http://i.stack.imgur.com/r7YbX.png)

在此图像中，黑点是背景图像上的另一个图像。我可以在该帖子图像上嵌入那个黑点。

```
 $embedCode ='div id="mainCHImage"style="position:relative;height:'.$heightOrg.'px;width:'.$widthOrg.'px;">'.   
            '<img style="background:none;border:none;height:'.$heightOrg.'px !important;width:'.$widthOrg.'px !important;"'. "src=\"{$matches[1]}\";>".'

            </div>

<img id="Icon" style="position:relative;left:'.$imgWidth.'px;top: '.$imgHeight.'px;padding-left: 10px;z-index:9999;cursor:pointer;background:none;border:none;" src="/Icon.png" onClick="showProducts(event,'."'{$matches[1]}'".')"></div> 
```

这是我为发布图像的图像替换的代码，以便在该背景图像上带来那个黑点。现在问题是黑点的onclick 我想运行一个javascript函数，但是在wordpress中它被包裹在带有背景图像href的锚标记下，因此没有得到点击事件。但是我已经禁用了图像上的链接，然后它的工作但它不是正确的方法..下面我粘贴此代码的检查元素响应...

```
<a href="http://localhost/wordpress/wp-content/uploads/2013/04/9.jpg">
  <img id="Icon" style="position:relative;left:130px;top: -30px;padding-left: 10px;z-index:9999;cursor:pointer;background:none;border:none;" 
src="/Icon.png" onclick="showProducts(event,'http://localhost/wordpress/wp-content/uploads/2013/04/9.jpg')"> 
```

我没有得到那个锚标签的来源..我没有在我的代码中添加..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-31T11:51:27.693

```
 add_filter( 'the_content', 'attachment_image_link_remove_filter' );

    function attachment_image_link_remove_filter( $content ) {

            $content =preg_replace(array('{<a(.*?)(wp-att|wp-content\/uploads)[^>]*><img}','{ wp-image-[0-9]*" /></a>}'),array('<img', '" />'),             $content);

        return $content;
    }

/*place this code in your functions.php*/

/*if you wanna remove anchor tags which has image links, follow below code*/
add_filter( 'the_content', 'attachment_image_link_remove_filter' );

function attachment_image_link_remove_filter( $content ) {
    global $post;
    $exceptional_cjtypes = array("Mashup");
    $cjtype = wp_get_post_terms($post->ID, "cjtype");
    if(!in_array(strtolower($cjtype[0]->name), array_map('strtolower', $exceptional_cjtypes))) {
        $content =preg_replace(
                array('{<a href="(.*?(gif|jpeg|jpg|png))"><img}',
                    '{ wp-image-[0-9]*" /></a>}'),
                array('<img', '" />'),
                $content
            );
    }
    return $content;
} 
```

# tcp - 如果另一个对等点关闭其 tcp 连接，当一个对等点使用 `send()` 或 `recv()` 会发生什么

> ID：16057931
> 
> 赞同：0
> 
> 时间：2013-04-17T10:42:41.250
> 
> 标签：tcp, network-programming

如果进程 A 和 B 之间存在 tcp 连接 如果 B 通过以下方式关闭其 tcp 连接

```
 shutdown(tcpfd, SHUT_RDWR);

      or

     shutdown(tcpfd, SHUT_RD);

      or 

     shutdown(tcpfd, SHUT_WR); 
```

A 怎么知道 B 做了上述 3 个动作之一？

如果 A 这样做：

```
 send(tcpfd, buf, len, 0); 
```

会发生什么？

顺便说一句，如果 B 不发送 FIN/ACK，它只是发送一个 RST 并且 A 正在等待接收数据包

```
 while(1){
      n=recv(tcpfd, buf, len, 0);
     } 
```

A 怎么知道 B 发送了 RST？n 会是 0 吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:46:26.857

当 A 尝试时`send`，如果 B 已关闭连接的读取端`send`将通过返回 -1 来指示此错误。然后A可以决定如何处理这种情况。

相应地，当 A 尝试`read`并假设本地没有数据缓冲时，如果 B 已关闭连接的写入端，`read`则将简单地返回 0。

# .htaccess - IIS 规则转换为 .htaccess 规则

> ID：16057944
> 
> 赞同：1
> 
> 时间：2013-04-17T10:43:20.390
> 
> 标签：.htaccess, iis, mod-rewrite, web-config

我需要一些帮助来编写一个 .htaccess 规则：

1.  从文件名中删除了 .php 扩展名
2.  重写变量。

因此，像这样的 url`www.example.com/contact-us/456/789`会被服务器解释为`www.example.com/contact-us.php?a=123&b=456&c=789`

以下 IIS web.config 规则很有效（使用重写映射）：

```
<rule name="Dynamic Rewriting" stopProcessing="true">
    <match url="^([^/]+)(?:/?([^/]+)?)(?:/?([^/]+)?)(?:/?([^/]+)?)/?$" />
    <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
        <add input="{DynamicRewriting:{R:1}}" pattern="(.+)" />
    </conditions>
    <action type="Rewrite" url="/{C:1}.php?page={C:1}&amp;a={R:2}&amp;b={R:3}&amp;c={R:4}" />
</rule>

<rewriteMap name="DynamicRewriting">
    <add key="contact-us" value="contact-us" />
</rewriteMap> 
```

谁能告诉我我需要的 .htaccess 规则？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T11:18:52.863

尝试：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} ^/([^/]+)
RewriteCond %{DOCUMENT_ROOT}/%1.php -f
RewriteRule ^/?([^/]+)(?:/?([^/]+)?)(?:/?([^/]+)?)(?:/?([^/]+)?)/?$ /$1.php?page=$1&a=$2&b=$3&c=$4 [L,QSA] 
```

# c# - Repeater databinder.eval 双引号

> ID：16057947
> 
> 赞同：4
> 
> 时间：2013-04-17T10:43:30.557
> 
> 标签：c#, databinder

我有一个`repeater`像下面这样的，

```
<asp:Repeater ID="rptEntries" runat="server">                         
    <ItemTemplate>
         <asp:LinkButton ID="lnk1" runat="server" Text=""></asp:LinkButton>
    </ItemTemplate>
</asp:Repeater> 
```

现在，我想将`LinkButton`s 的 Text 值与以下内容绑定，

```
<%# DataBinder.Eval(Container.DataItem, "EntryText") %> 
```

但是，当我执行以下操作时，我遇到了双引号问题，

```
Text="<%# DataBinder.Eval(Container.DataItem, "EntryText") %>" 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T10:44:39.730

使用双引号和单引号的组合：

```
Text='<%# DataBinder.Eval(Container.DataItem, "EntryText") %>' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T10:45:32.190

你可以做

```
((ContainerType)Container.DataItem)).EntryText 
```

所以它看起来像这样

```
Text='<%# ((ContainerType)Container.DataItem)).EntryText %>' 
```

其中 ContainerType 是该对象的类型。这种方式实际上更有效，因为它不必使用“Eval”方法进行评估。

否则使用单引号后跟双引号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T10:45:38.460

```
Text='<%# DataBinder.Eval(Container.DataItem, "EntryText") %>' 
```

这可能会解决问题

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T10:47:06.307

尝试这个;

```
Text='<%#DataBinder.Eval(Container.DataItem, "EntryText")%>' 
```

# ios - 在部分视图上实现模糊

> ID：16057952
> 
> 赞同：0
> 
> 时间：2013-04-17T10:43:48.683
> 
> 标签：ios, objective-c, ipad, opengl-es, core-graphics

我怎样才能务实地实现下面的图像——这意味着数字可以在运行时改变，甚至可以被电影替换？

![在此处输入图像描述](https://i.stack.imgur.com/JjHEL.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T11:55:09.967

只需在你的东西上添加一个模糊的 UIView 即可。

例如...制作您想要的视图大小的 UIImage，使用[CIFilter](https://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/QuartzCoreFramework/Classes/CIFilter_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40003960)对其进行模糊处理，然后将其添加到您的视图中。它应该可以达到预期的效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T13:06:54.597

[这](https://stackoverflow.com/questions/12271016/fast-blur-on-ios)通常是同一个问题，可以通过很多方法来回答。无论如何，我会再提出 1 个：

从 UIView 获取图像

```
+ (UIImage *)imageFromLayer:(CALayer *)layer {
    UIGraphicsBeginImageContext([layer frame].size);
    [layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *outputImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return outputImage;
} 
```

而是使用它来获得所需的视图部分作为图像。现在创建一个新视图并向其添加图像视图（使用从图层获得的图像）。然后移动图像视图的中心以实现高斯算法并再次从该层取出图像并将其放回原始视图上。

移动中心应由半径片段（我从 .5f 开始）和重新采样范围定义。

```
for(int i=1; i<resampleCount; i++) {
view1.center = CGPointMake(view1.center.x + radiusFragment*i, view1.center.y);
view2.center = CGPointMake(view2.center.x - radiusFragment*i, view2.center.y);
view3.center = CGPointMake(view3.center.x, view3.center.y + radiusFragment*i);
view4.center = CGPointMake(view4.center.x, view4.center.y - radiusFragment*i);
//add the subviews
}
//get the image from view 
```

所有子视图都需要将 alpha 设置为`1.0f/(resampleCount*4)`

这种方法可能不是最快的，但它非常容易实现，如果你可以将半径和重新采样范围重新采样到最小片段，它应该会做得很好。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-17T11:49:25.640

使用白色背景的 UIView 并减少 alpha 属性

```
blurView.backgroundColor=[UIColor colorWithRed:255 green:255 blue:255 alpha:0.3] 
```

# eclipse - Eclipse CDT - 悬停窗口递归/嵌套悬停窗口

> ID：16057960
> 
> 赞同：3
> 
> 时间：2013-04-17T10:44:32.687
> 
> 标签：eclipse, hover, eclipse-cdt

我在大型嵌入式 C 项目中工作，这些项​​目带有我经常忘记的嵌套 typedef 和函数。
我通常使用悬停窗口进行快速检查，但这不适用于嵌套的 typedef。所以回溯类型需要分配大量的代码跳转，这很混乱并且需要分配时间。
在那里它会派上用场，能够在悬停窗口中使用相同的悬停功能。

我编辑了一个屏幕截图以显示所需的功能：

![](https://i.stack.imgur.com/KERTs.png)

那么有什么方法可以递归到悬停窗口？或者是否有任何解决方法/插件来实现嵌套类型定义/嵌套函数的轻松回溯？

谢谢大家，
贾尼斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T10:46:58.407

这个功能在eclipse中根本不存在。您可能想将它添加为 Kepler 的东西，尽管我认为即使在那时您也不会得到想要的东西。您可能需要等待更长的时间。据我所知，没有任何插件可以提供这种功能。对不起。

# iphone - 在 iOS 上使用谷歌文本转语音 (TTS) API

> ID：16057961
> 
> 赞同：4
> 
> 时间：2013-04-17T10:44:34.980
> 
> 标签：iphone, ios, text-to-speech, google-translate

我将 API 与以下代码一起使用：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *path = [documentsDirectory stringByAppendingPathComponent:@"file.mp3"];

NSString *text = textToTranslate; //@"You are one chromosome away from being a potato.";
NSString *urlString = [NSString stringWithFormat:@"http://www.translate.google.com/translate_tts?tl=en&q=%@",text];
NSURL *url = [NSURL URLWithString:[urlString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
NSMutableURLRequest* request = [[NSMutableURLRequest alloc] initWithURL:url] ;
[request setValue:@"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:2.0.1) Gecko/20100101 Firefox/4.0.1" forHTTPHeaderField:@"User-Agent"];
NSURLResponse* response = nil;
NSError* error = nil;
NSData* data = [NSURLConnection sendSynchronousRequest:request
                                     returningResponse:&response
                                                 error:&error];
[data writeToFile:path atomically:YES];

SystemSoundID soundID;
NSURL *url2 = [NSURL fileURLWithPath:path];

AudioServicesCreateSystemSoundID((__bridge CFURLRef)url2, &soundID);
AudioServicesPlaySystemSound (soundID); 
```

哪个有效，但仅适用于短句（大约少于 10 个单词）我做错了什么？如何在不降低语音质量的情况下解决该问题或将其分成几篇文本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T01:25:30.233

Google TTS 限制为**100 个字符**。

所以你应该**把你的长句子分成 100 个字符的小块**，然后将它传递给 Google TTS 方法。

**您可以通过执行以下步骤来实现这一点。**

1.  将你的长句分成 100 个字符的小块。
2.  使用第一个拆分 100 个字符的字符串调用 Google TTS。
3.  使用 Google TTS 和 AVAudioPlayer 播放
4.  实现 AVAudioPlayer audioPlayerDidFinishPlaying 委托。
5.  在该委托中，使用第二个拆分为 100 个字符的字符串调用 Google TTS。
6.  递归调用该过程，直到到达最后一个字符。

这是我为您创建的**[Google-TTS-Library-For-iOS](https://github.com/shamsudheen/Google-TTS-Library-For-iOS)**库:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-28T04:44:24.250

Google TTS 限制为 100 个字符。

我最近创建了一个对解决这个问题有很大帮助的库。有一些改进，但请免费使用。 [谷歌TTSAPI](https://github.com/marceloqueiroz/GoogleTTSAPI)

# android - 如何导入只有 src 和 res 文件夹的项目

> ID：16057962
> 
> 赞同：1
> 
> 时间：2013-04-17T10:44:37.743
> 
> 标签：android, eclipse

我遇到了一个基本问题，我从 Android 开发者网站下载了一个示例代码，其中只有文件夹 src/res/ 和一个清单文件。

当我尝试将其导入 Eclipse 时，我不断收到“选择至少一个项目”之类的错误

我也尝试复制一个编辑过的 .project 文件，但这并没有太大帮助，并且仍然看到同样的错误。

有人可以帮助我摆脱这种情况。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T10:45:49.650

创建一个空项目，然后手动将 res、src 和 manifest 复制到您的项目中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T11:17:01.150

将您的项目复制到除当前工作空间之外的任何位置，然后按照步骤操作。

```
Eclipse menu, File --> New --> Project.. --> Android/ Android Project from Existing Code
--> Next --> Browse.. --> Finish. 
```

希望这些是非常简单的步骤..:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-07T06:44:18.333

导入 -> Android -> 现有 Android 代码到 Workspace

# android - 如何覆盖 @ContextSingleton 以使用 RoboGuice 进行测试？

> ID：16057965
> 
> 赞同：0
> 
> 时间：2013-04-17T10:44:45.510
> 
> 标签：android, testing, dependency-injection, roboguice

我正在尝试覆盖几个注入以使用特定的测试模块进行测试。这对于像这样的真正单身人士来说效果很好：

```
...custom module...
bind(SomeClass.class).toInstance(instanceOfMockedClass);
... 
```

现在，当`ContextSingletons`需要被覆盖时，这会带来问题。像上面那样做同样的事情显然会为所有上下文（服务、活动）注入相同的实例，其中一个单独的实例本来是正确的。我试图绕开我的脑袋，`ContextScopedProvider`但找不到在`bind(...).toProvider(...)`构造中实际使用它的方法，因为这个类本身并没有实现 Guice 的`Provider<T>`接口。

如何做到这一点？

（也在[https://groups.google.com/forum/?fromgroups=#!topic/roboguice/MnWGrHFDOsQ](https://groups.google.com/forum/?fromgroups=#!topic/roboguice/MnWGrHFDOsQ)上询问）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T03:32:29.260

为常规单身人士编写的另一种方法是这样的

`bind(SomeClass.class).toProvider(SomeClassProvider.class).in(Singleton.class);`

如果你这样做，你不需要在绑定时有可用的实例，虽然这对于单例很好，但显然不适用于 ContextSingleton，因为还没有上下文。

您可以对 ContextSingleton 使用相同类型的绑定：

`bind(SomeClass.class).toProvider(SomeClassProvider.class).in(ContextSingleton.class);`

现在，RoboGuice 为您注入的所有 SomeClass 实例都将得到适当的作用域，无论是 Singleton 还是 ContextSingleton。

# jquery - 完整日历：更改周末背景

> ID：16057966
> 
> 赞同：5
> 
> 时间：2013-04-17T10:44:48.233
> 
> 标签：jquery, fullcalendar

我正在尝试在完整日历中禁用周末，但此选项周末：false

```
var calendar = $('#calendar').fullCalendar({

    header: {

        left: 'prev,next today',
        center: 'title',
        right: 'month,agendaWeek,agendaDay'
            },

    weekends: false,
    ........}); 
```

从日历中删除周末，或者我只想通过更改背景颜色禁用两天并使其无法选择。
我应该怎么办？谢谢你的帮助

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-17T11:36:09.907

如果我正确理解您想要的问题：

1.  以不同的颜色显示周末
2.  知道这一天是否是周末

首先，您可以使用 css 规则来设置周末元素的样式：

```
.fc-sat, .fc-sun {
    background-color: red !important;
} 
```

第二点，您可以检查所选日期是否为周末，并随心所欲。您可以通过这种方式使用`dayClick`( [http://arshaw.com/fullcalendar/docs/mouse/dayClick/](http://arshaw.com/fullcalendar/docs/mouse/dayClick/) ) 事件：

> ```
> dayClick: function (date, allDay, jsEvent) {
>     var checkDay = new Date($.fullCalendar.formatDate(date, 'yyyy-MM-dd'));
>     if (checkDay.getDay() == 6 || checkDay.getDay() == 0) alert('Weekend!');
> } 
> ```

你不能禁用一天，因为 FullCalendar 不是日期选择器，所以你不能“禁用”，但你可以处理你想要的一切。

这是一个工作小提琴：http: [//jsfiddle.net/IrvinDominin/qLUFg/1/](http://jsfiddle.net/IrvinDominin/qLUFg/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-08-13T09:28:52.037

除了 Irvin Dominin 的回答：

有时上面答案的第一部分可能会导致小部件标题变成相同的颜色。因此，为了仅处理周末单元格，请使用以下样式：

```
.fc-sat,
.fc-sun {
  &.fc-day {
    background-color: red !important;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-24T22:34:43.817

如果您需要更改两个周末的颜色，我建议：

```
.fc-nonbusiness {
  background-color: yellow;
} 
```

# twitter-bootstrap - “棘轮”与“angular.js”配合得很好吗？

> ID：16057970
> 
> 赞同：5
> 
> 时间：2013-04-17T10:45:07.670
> 
> 标签：twitter-bootstrap, angularjs

我在问一页 JavaScript 库[angular.js](http://angularjs.org)是否仍然/或曾经有任何类型的“兼容性”适合新的（ish）类似引导的 css 克隆[棘轮](https://github.com/maker/ratchet/)- 因为在我开始学习棘轮之前（哦和/或角度) 想我应该问..

当前的最高结果（从 2013 年 1 月开始）是一个 Google 线程，因此，

> 我正在尝试 AngularJS，并且我编写了一个小应用程序，我想在我的 Android 手机上使用（galaxy s2 android 版本 4.0.4）。我还在 UI 中使用棘轮。该应用程序在我的桌面浏览器上运行良好，但在我的 Android 手机上无法运行。您可以在以下位置访问该应用程序：
> 
> ....任何帮助将非常感激。

和：

> 我通过注释掉包含 ratchet.js 文件的行来完成这项工作。所以看起来 angularjs 和 ratchet 不能很好地结合在一起。

但也许这不是通常的情况，或者无论如何它都已修复或其他什么？

我猜可能是错误跟踪器或 angular.js 领域的东西我猜但也许有人可以在这里为其他人提供答案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-02T18:24:53.747

是的，它确实。我真的对它印象深刻。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-24T15:15:13.443

不，棘轮推送路由与 angular routeProvider 冲突

（不仅有角度，例如 - [https://github.com/twbs/ratchet/issues/682](https://github.com/twbs/ratchet/issues/682)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-18T10:46:50.143

`Push.js`在棘轮中与 AngularJS routeProvider 冲突，导致 routeProvider 不起作用。

无需包含整个捆绑的棘轮 javascript，只需使用您需要的棘轮 javascript 组件。所有 javascript 组件都可以在`js/`棘轮存储库的文件夹中找到。

# scala - Scala：排序逆变

> ID：16057973
> 
> 赞同：10
> 
> 时间：2013-04-17T10:45:18.797
> 
> 标签：scala, generics, types, contravariance, type-systems

`Ordering`Scala的特征不是逆变的有什么原因吗？下面是一个鼓舞人心的例子。

假设我要执行有序插入。我可能有一个带有签名的功能

```
def insert[A, B >: A](list: List[A], item: A)(implicit ord: Ordering[B]): List[A] 
```

在这里，我有一个`Ordering`接受超类型的 type `A`。我想这在您处理`case classes`. 例如：

```
abstract class CodeTree
case class Fork(left: CodeTree, right: CodeTree, chars: List[Char], weight: Int) extends CodeTree
case class Leaf(char: Char, weight: Int) extends CodeTree

def weight(tree: CodeTree): Int 
def chars(tree: CodeTree): List[Char] 

implicit object CodeTreeOrdering extends Ordering[CodeTree] {
  def compare(a: CodeTree, b: CodeTree): Int = weight(a) compare weight(b)
} 
```

我希望我的 insert 函数可以与types`List[CodeTree]`或. 但是，由于不是逆变的，我需要为每个.`List[Leaf]``List[Fork]``Ordering``Orderings``case`

如果我定义

```
trait MyOrdering[-A] {
  def compare(a: A, b: A): Int
} 
```

一切都按预期工作。

还有其他方法可以实现我的目标吗？

编辑：

我目前的解决方案是将插入定义为

```
def insert[A](list: List[A], item: A)(implicit ord: Ordering[A]): List[A] 
```

处理时效果很好`List[CodeTree]`。我还定义（受 scalaz 库的启发）：

```
trait Contravariant[F[_]] {
  def contramap[A, B](r: F[A], f: B => A): F[B]
}

implicit object OrderingContravariant extends Contravariant[Ordering] {
  def contramap[A, B](r: Ordering[A], f: B => A) = r.on(f)
}

implicit def orderingCodeTree[A <: CodeTree]: Ordering[A] =
  implicitly[Contravariant[Ordering]].contramap(CodeTreeOrdering, identity) 
```

我正在为`Ordering[A <: CodeTree]`实例定义一个隐式工厂函数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T11:13:11.113

从上面评论中链接的“scala-language”线程中提取了更多详细的答案。

`Ordering`不是逆变的原因是这与隐式解析中使用的特异性概念不合理。隐式解析将尝试为参数选择最“特定”的类型，并认为一种类型比另一种类型更具体，如果它是它的子类型。这在协变情况下是有意义的：我宁愿隐含特定于我的字符串列表，而不是任何旧列表。然而，在逆变情况下，它想选择错误的东西：

```
trait Ord[-A]
A <: B
Ord[B] <: Ord[A] 
```

因此，如果可用，它将选择“最具体”的排序`Ordering[Any]`。

关于 scala 语言组上的逆变参数定义“特异性”的方式似乎正在进行一场[大讨论。](https://groups.google.com/forum/#!topic/scala-language/ZE83TvSWpT4)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T10:55:56.643

在当前的 API 中，这些方法阻止了它的逆变：

```
 /** Return `x` if `x` >= `y`, otherwise `y`. */
  def max(x: T, y: T): T = if (gteq(x, y)) x else y

  /** Return `x` if `x` <= `y`, otherwise `y`. */
  def min(x: T, y: T): T = if (lteq(x, y)) x else y 
```

# css - WordPress中表格的CSS

> ID：16057974
> 
> 赞同：1
> 
> 时间：2013-04-17T10:45:20.407
> 
> 标签：css, wordpress, class

我正在尝试将自定义 css 添加到 Wordpress 中的某个表中。

但是，似乎默认的 css 可能会覆盖它？

```
<table id="2table" border="0" cellspacing="3" cellpadding="3"> 
```

CSS：

```
table#2table {
       margin-left: 450px auto;
       margin-top: -205px auto;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T10:46:52.420

ID 不得以数字开头。

将您的更改`id="2table"`为其他内容`id="table2"`，然后相应地调整您的 CSS。

# mysql - “多个 SELECT，INNER JOIN” sql 查询不起作用

> ID：16057980
> 
> 赞同：0
> 
> 时间：2013-04-17T10:45:35.363
> 
> 标签：mysql, sql, join, inner-join, multiple-select-query

我在 phpMyAdmin 中测试了我的 sql 查询，它在那里工作。但是当我复制它并粘贴到我的代码中时，它会返回 NULL。我的其他代码没有错误，因为当我删除这个 sql 查询时它工作得很好。因此，我相信这个查询存在一些问题。我花了 2 天时间才找到问题所在。一件重要的事情是`it works if I remove INNER JOIN`。我尝试使用 JOIN 和 FULL JOIN，但它们都不起作用。有人看到这个查询有什么问题吗？

以下是我的查询：

```
SELECT *
    From (
      SELECT userTrip.id,userTrip.fromLat,userTrip.fromLon,userTrip.toLat,userTrip.toLon
          From userTrip
              WHERE userTrip.userId != :userId
              AND userTrip.departureTime > CURDATE()
              AND ABS(UNIX_TIMESTAMP(userTrip.departureTime) - UNIX_TIMESTAMP(:departureTime)) <= " . DEPARTURETIME_DIFFERENCE_THRESHOLD . " * 60
              AND userTrip.fromLat Between :fromMinLat AND :fromMaxLat
              AND userTrip.fromLon Between :fromMinLon AND :fromMaxLon
          ) AS SourcesNearBy FULL JOIN user ON user.id = SourcesNearBy.userId ORDER BY user.id
        WHERE toLat Between :toMinLat AND :toMaxLat
        AND toLon Between :toMinLon AND :toMaxLon
        AND (user.gender LIKE :matchGender OR :matchGender LIKE 'A')
        AND (:matchAge = -1 OR (CAST(DATEDIFF(CURDATE(),user.birthdate)/365.25 AS UNSIGNED) Between (:matchAge - " . MAX_AGE_DIFFERENCE . ") AND (:matchAge + " . MAX_AGE_DIFFERENCE . "))) 
```

谢谢你。

这是我的代码：

```
public function findMatchesForUser($userId,$tripId)
    {
        $sql = "SELECT * from userTrip WHERE tripFinished = 0 AND id = :tripId";
        $stmt = $this->dbLink->prepare($sql);
        $stmt->bindParam(':tripId', $tripId, PDO::PARAM_INT);

        try
        {
            $stmt->execute();
            $userTrip = $stmt->fetchObject();
        }
        catch (PDOException $err)
        {
            echo $err->getMessage();
        }

        if ($userTrip == null)
            throw new Frapi_Error('Error Code : 500\. Try again.');

        // get user's trip length
        $distanceClass = new Distance();
        $userTripLength = $distanceClass->drivingDistance($userTrip->fromLat, $userTrip->fromLon, $userTrip->toLat, $userTrip->toLon);

        // set up first bounding square
        $this->setUpBoundingSquare($userTrip->fromLat, $userTrip->fromLon, $userTripLength * SOURCE_DISTANCE_THRESHOLD / 100, 1);
        // set up bounding second square
        $this->setUpBoundingSquare($userTrip->toLat, $userTrip->toLon, $userTripLength * DESTINATION_DISTANCE_THRESHOLD / 100, 0);

        // perform first phase of algorithm
        $Candidates = $this->firstPhase($userId,$userTrip);
    }

private function firstPhase($userId,$userTrip)
    {
        $sql = "SELECT *
                  From (
                          SELECT userTrip.id,userTrip.fromLat,userTrip.fromLon,userTrip.toLat,userTrip.toLon
                              From userTrip INNER JOIN user ON userTrip.userId = user.id
                                  WHERE userTrip.userId != :userId
                                  AND (user.gender LIKE :matchGender OR :matchGender LIKE 'A')
                                  AND (:matchAge = -1 OR (CAST(DATEDIFF(CURDATE(),user.birthdate)/365.25 AS UNSIGNED) Between (:matchAge - " . MAX_AGE_DIFFERENCE . ") AND (:matchAge + " . MAX_AGE_DIFFERENCE . ")))
                                  AND userTrip.departureTime > '".date('Y-m-d H:i:s')."'
                                  AND ABS(UNIX_TIMESTAMP(userTrip.departureTime) - UNIX_TIMESTAMP(:departureTime)) <= " . DEPARTURETIME_DIFFERENCE_THRESHOLD . " * 60
                                  AND userTrip.fromLat Between :fromMinLat AND :fromMaxLat
                                  AND userTrip.fromLon Between :fromMinLon AND :fromMaxLon
                      ) AS SourcesNearBy
                      WHERE toLat Between :toMinLat AND :toMaxLat
                      AND toLon Between :toMinLon AND :toMaxLon;";

        $stmt = $this->dbLink->prepare($sql);

        // Bind parameters

        $stmt->bindParam(':fromMinLat', $this->fromMinLat, PDO::PARAM_STR);
        $stmt->bindParam(':fromMinLon', $this->fromMinLon, PDO::PARAM_STR);
        $stmt->bindParam(':fromMaxLat', $this->fromMaxLat, PDO::PARAM_STR);
        $stmt->bindParam(':fromMaxLon', $this->fromMaxLon, PDO::PARAM_STR);
        $stmt->bindParam(':toMinLat', $this->toMinLat, PDO::PARAM_STR);
        $stmt->bindParam(':toMinLon', $this->toMinLon, PDO::PARAM_STR);
        $stmt->bindParam(':toMaxLat', $this->toMaxLat, PDO::PARAM_STR);
        $stmt->bindParam(':toMaxLon', $this->toMaxLon, PDO::PARAM_STR);
        $stmt->bindParam(':userId', $userId, PDO::PARAM_INT);
        $stmt->bindParam(':matchGender', $userTrip->matchGender, PDO::PARAM_STR);
        $stmt->bindParam(':matchAge', $userTrip->matchAge, PDO::PARAM_INT);
        $stmt->bindParam(':departureTime', $userTrip->departureTime, PDO::PARAM_STR);

        try
        {
            $stmt->execute();
            $Candidates = $stmt->fetchAll();
        }
        catch (PDOException $err)
        {
            echo $err->getMessage();
        }
        // If no matchCandidates
        if ($Candidates == null)
            throw new Frapi_Error("No match candidates found!");

        return $Candidates;
    } 
```

运行完美的备用查询。但它的性能并不好。我想在外部 SELECT 中移动 INNER JOIN。

```
$sql = "SELECT *
                  From (
                        SELECT userTrip.id,userTrip.fromLat,userTrip.fromLon,userTrip.toLat,userTrip.toLon
                            From userTrip INNER JOIN user ON userTrip.userId = user.id
                                WHERE userTrip.userId != :userId
                                  AND (user.gender LIKE :matchGender OR :matchGender LIKE 'A')
                                  AND (:matchAge = -1 OR (CAST(DATEDIFF(CURDATE(),user.birthdate)/365.25 AS UNSIGNED) Between (:matchAge - " . MAX_AGE_DIFFERENCE . ") AND (:matchAge + " . MAX_AGE_DIFFERENCE . ")))
                                  AND userTrip.departureTime > '".date('Y-m-d H:i:s')."'
                                  AND ABS(UNIX_TIMESTAMP(userTrip.departureTime) - UNIX_TIMESTAMP(:departureTime)) <= " . DEPARTURETIME_DIFFERENCE_THRESHOLD . " * 60
                                  AND userTrip.fromLat Between :fromMinLat AND :fromMaxLat
                                  AND userTrip.fromLon Between :fromMinLon AND :fromMaxLon
                      ) AS SourcesNearBy
                      WHERE toLat Between :toMinLat AND :toMaxLat
                      AND toLon Between :toMinLon AND :toMaxLon;"; 
```

***通过删除 FULL JOIN 进行查询***

```
SELECT *
    From (
      SELECT userTrip.id,userTrip.fromLat,userTrip.fromLon,userTrip.toLat,userTrip.toLon
          From userTrip
              WHERE userTrip.userId != :userId
              AND userTrip.departureTime > CURDATE()
              AND ABS(UNIX_TIMESTAMP(userTrip.departureTime) - UNIX_TIMESTAMP(:departureTime)) <= " . DEPARTURETIME_DIFFERENCE_THRESHOLD . " * 60
              AND userTrip.fromLat Between :fromMinLat AND :fromMaxLat
              AND userTrip.fromLon Between :fromMinLon AND :fromMaxLon
          ) AS SourcesNearBy INNER JOIN user ON user.id = SourcesNearBy.userId
        WHERE toLat Between :toMinLat AND :toMaxLat
        AND toLon Between :toMinLon AND :toMaxLon
        AND (user.gender LIKE :matchGender OR :matchGender LIKE 'A')
        AND (:matchAge = -1 OR (CAST(DATEDIFF(CURDATE(),user.birthdate)/365.25 AS UNSIGNED) Between (:matchAge - " . MAX_AGE_DIFFERENCE . ") AND (:matchAge + " . MAX_AGE_DIFFERENCE . "))) 
```

***用户行程表***

```
id | userName<br>

 1 |     A<br>
 2 |     B<br>
 3 |     C<br>
 4 |     D<br>
 5 |     E<br>
 6 |     F<br> 
```

***用户表***

```
id | userId | fromLat | fromLon | toLat | toLon | departureTime | matchGender | matchAge<br>
  5 | 1 | 40.712898 | -74.013199 | 40.728157 | -74.077644 | 2013-04-26 15:56:08 | M | 25<br>
 10 | 2 | 28.520140 | -81.388771 | 28.054642 | -82.469940 | 2013-01-17 10:34:56 | F | 30<br> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T11:48:08.573

您的 SELECT 语句中间似乎有一个随机*ORDER BY user.id*。

编辑 - 使用您的代码，无论如何都不需要子选择。

像这样的事情应该这样做。:-

```
SELECT userTrip.id,userTrip.fromLat,userTrip.fromLon,userTrip.toLat,userTrip.toLon
FROM userTrip 
INNER JOIN user 
ON userTrip.userId = user.id
WHERE userTrip.userId != :userId
AND (user.gender LIKE :matchGender OR :matchGender LIKE 'A')
AND (:matchAge = -1 OR (CAST(DATEDIFF(CURDATE(),user.birthdate)/365.25 AS UNSIGNED) BETWEEN (:matchAge - " . MAX_AGE_DIFFERENCE . ") AND (:matchAge + " . MAX_AGE_DIFFERENCE . ")))
AND userTrip.departureTime > '".date('Y-m-d H:i:s')."'
AND ABS(UNIX_TIMESTAMP(userTrip.departureTime) - UNIX_TIMESTAMP(:departureTime)) <= " . DEPARTURETIME_DIFFERENCE_THRESHOLD . " * 60
AND userTrip.fromLat BETWEEN :fromMinLat AND :fromMaxLat
AND userTrip.fromLon BETWEEN :fromMinLon AND :fromMaxLon
AND toLat BETWEEN :toMinLat AND :toMaxLat
AND toLon BETWEEN :toMinLon AND :toMaxLon 
```

尝试一些真实的价值。如果它表现不佳，那么我怀疑问题出在索引上，所以请执行 EXPLAIN 并发布结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:57:33.167

您是否使用变量值运行查询，即查询中可能有一些变量可能包含所需的错误值。让查询看起来非常好。

# mobile - 使元素在移动屏幕上粘在右侧

> ID：16057982
> 
> 赞同：0
> 
> 时间：2013-04-17T10:45:35.973
> 
> 标签：mobile, responsive-design, csc

第一次遇到这个问题。

我有一个位于屏幕右侧的元素，就像那样

```
.element {
  position:absolute;
  right:0
} 
```

在桌面上一切正常，但在小屏幕设备上开始失败。.element 不再粘在右侧，而是出现在左侧。我想这与小屏幕设备放大和缩小的能力有关，但为什么这个元素不遵循这里的规则。

PS。尝试使用 float:right，效果相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:26:04.983

请添加更多代码细节，我相信问题不是因为这部分代码而出现的，而是因为您的媒体查询工作不正确，或者定位在后续 CSS 中的其他地方被覆盖。如果可能，创建一个 jsfiddle，进一步了解您的实际工作。

# highcharts - 在 highchart 上显示的数据时间值不正确

> ID：16057990
> 
> 赞同：0
> 
> 时间：2013-04-17T10:45:53.550
> 
> 标签：highcharts

首先对不起我糟糕的英语。我是 highcharts 的新手，并试图用 highcharts 创建一个很酷的图表。我遇到的问题是在图表上显示时数据时间值和 xAxis 值不一样。这是我的数据：

> [[1363663152000,1],[1363663153000,2], [1363663154000,3],[1363663155000,4], [1363663156000,5],[1363663157000,6],[13636,6636,6,6,[13636,66,6,6,7] 1363663160000,9]，[13636663162000,10]，[1363663163000,11]，[13666663164000,12]，[136366363165000,13]

```
 and this value: 
  1363663152000 --> Tue Mar 19 2013 10:19:12 GMT+0700 (SE Asia Standard Time)
  .... 
```

但对于 xAxis：x 值为 03:19:12...

我们可以很容易地看到这里的区别：10:19:12 和 03:19:12 那么，我如何从 03:19:12 --> 10:19:12 开始格式化呢？

这是在线演示：http: [//jsfiddle.net/CAKQH/24209/](http://jsfiddle.net/CAKQH/24209/)。欢迎任何回复，我真的很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T11:30:23.347

您需要设置`useUTC: false`，请参阅：[http ://api.highcharts.com/highcharts#global.useUTC](http://api.highcharts.com/highcharts#global.useUTC)

# php - 查找没有共同元素的组合

> ID：16057991
> 
> 赞同：1
> 
> 时间：2013-04-17T10:45:56.650
> 
> 标签：php, algorithm, math, combinations, probability

我有数组（A，B，C，D）。

我使用组合公式从 6 个组合中的 4 个字母中选择 2 个字母

嗯！/r！（NR）！

数组（A，B），数组（A，C），数组（A，D），数组（B，C），数组（B，D），数组（C，D）

我怎样才能找到没有共同字母的 2 或 3 或 n 组（应该是动态的）的组合。所以我希望结果低于 2 组的组合，

数组（A，B），数组（C，D）

数组（A，C），数组（B，D），

数组（A，D），数组（B，C），

这只是一个示例，但我希望该算法适用于大量数组（我有超过 35000 个数组）。我想找到 2 或 3 或 n 组（应该是动态的），每个组都应该有没有共同元素的数组（所有键应该不同，而不应该重复单个元素）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T11:07:03.357

你没有说集合是如何表示的，所以我使用数组来达到这个目的。

```
// The base set
$baseSet = array('A', 'B', 'C', 'D');

// Build the subsets
$subSets = array();
for ($i = 0; $i < 3; $i++) {
    for ($j = $i+1; $j< 4; $j++) {
        $subSets[] = array($baseSet[$i], $baseSet[$j]);
    }
} 
```

有了这个，解决方案很简单：

```
foreach ($subSets as $subSet) {
    $complement = array_diff($baseSet, $subSet);
    printf("{%s, %s} - {$s, %s}\n",
        $baseSet[0], $baseSet[1],
        $complement[0], $complement[1]
    );
} 
```

一般来说，PHP 提供了很多[与数组相关的集合函数](http://www.php.net/manual/en/ref.array.php)。

如果您只想比较两个子集，请使用`array_intersect()`：

```
$common = array_intersect($subSet1, $subSet2);
if (empty($common)) {
    echo 'The subsets are distinct.';
} else {
    echo 'The subsets have these elements in common: ' . implode(', ', $common);
} 
```

# c - 在 C 中运行 awk、sed、grep 等外部命令是否安全？

> ID：16057992
> 
> 赞同：0
> 
> 时间：2013-04-17T10:46:00.793
> 
> 标签：c, linux, security, pipe

我正在运行一个命令，它提供一个字符串作为输出，我使用 popen() 在我的 C 代码中读取该字符串。

我传递给 popen() 的命令是这样的：

```
mypipe = popen("some_cmd | awk '{print $2}'", "r"); 
```

从本质上讲，这使它更简单，并避免在 C 中进一步解析。我担心在这里做这件事是否正确。当然，我可以用 awk 做同样的事情：

```
mypipe = popen("some_cmd", "r"); 
```

然后使用 strtok() 来解析我想要的字符串。

我的问题是，考虑到无论如何我都要运行外部命令（使用 popen()），使用 awk（或类似的）来解析管道输出是否被认为是不安全的，如上面的示例所示。它会引起任何问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T10:56:25.023

运行任何“外部命令”都有轻微的风险。风险有多大取决于您的应用程序在做什么，谁可以访问该应用程序以及他们对机器的访问权限。主要问题是，用户可能会通过将“命令”替换为执行除此之外的某些操作[或“您的期望和其他操作”] 来规避系统安全性。如果您的应用程序拥有普通用户没有的权限（或访问普通用户没有的权限）并且生成的进程继承了这些权限，这将成为一个更大的问题。

`awk`在您已经运行的内容之上添加并不会真正改变该帐户上的内容 - 如果用户可以更改所做的事情`awk`（通常通过将另一个名为`awk`的程序放置在 real 之前的位置`awk`），那么用户可能可以做那`some_cmd`也太。

它真的归结为“某人可以做他们已经不能做的事情”和“结果可能是什么损害/利益”。如果您在银行工作，并且此应用程序的用户可能会转移大笔资金（或取少量并将其累积到某个地方的帐户中），或者您的代码正在保护核导弹，您可能需要仔细考虑这可能导致。

另一方面，如果这是在一个人的机器上运行，通常他们无论如何都可以完全访问该机器，并且该机器不是可能被外国用户攻击的公共网络服务器，那么风险很小，对吧？