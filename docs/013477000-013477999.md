# StackOverflow 问答 13477000-13477999

# cakephp - 将 CakePHP 应用程序从 windows 移至 mac，现在无法加载一个模型

> ID：13477001
> 
> 赞同：1
> 
> 时间：2012-11-20T15:55:47.457
> 
> 标签：cakephp, model

今天我正在将我在 Windows 上制作的 CakePHP 应用程序移动到我的新 macbook 上。由于某种奇怪的原因，一个模型无法正确加载。其他模型确实可以正确加载，这让我感到困惑......我收到了这个错误：

```
Fatal error: Call to undefined method Locale::getLocale() in /server/cakephp/app/Controller/AppController.php on line 59 
```

该行只是在我拥有的 Locale 模型中调用一个方法。所以我试着用这段代码看看 $this->Locale 是什么样子的：

```
die(pr($this->Locale)); 
```

结果是这样的：

```
Locale Object
(
) 
```

我不知道为什么，但显然我得到了一个空对象。我尝试删除 Locale.php 文件以查看 CakePHP 是否会自动使用 AppModel，但它仍然成为一个空对象。因此，我尝试搜索是否在某处有一些名为 Locale 的空类，但找不到。

请帮忙，这太令人沮丧了！

我昨天从 git 克隆了 CakePHP 库，也许这是有用的信息？莫非Locale突然变成了保留字？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T22:31:21.960

也许是权限？我过去在移动 cakephp 应用程序时也遇到过隐藏 .files 的问题，值得一试。我猜 git 可以正确处理这两个问题。

# python - 如何一起使用 BeautifulSoup 和 lxml？

> ID：13477003
> 
> 赞同：-1
> 
> 时间：2012-11-20T15:55:50.780
> 
> 标签：python, html-parsing, beautifulsoup, lxml

我对 Python 很陌生。如何一起使用 BeautifulSoup 和 lxml？

[Beautifulsoup 网站](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#installing-a-parser)推荐使用 lxml 作为解析器

```
def get_html():

        from bs4 import BeautifulSoup
        import lxml

        soup = BeautifulSoup(open("http://www.google.com"));
        #print(soup.prettify());
        print(soup.title);

if __name__ == '__main__':
        get_html() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T15:59:54.173

`BeautifulSoup()`在调用构造函数时指定解析器：

```
import urllib2
from bs4 import BeautifulSoup

soup = BeautifulSoup(urllib2.urlopen("http://www.google.com").read(), "lxml") 
```

# networking - 为什么同一路由器上的两台机器上的 IP 地址具有不同的子网？

> ID：13477006
> 
> 赞同：0
> 
> 时间：2012-11-20T15:56:11.217
> 
> 标签：networking

我有2台机器。一个IP是169.254.41.172，另一个是169.254.72.175。它们都连接到同一个路由器。为什么是“子网”？不同的？我指的是 41 到 72 之间的第三个数字。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T16:02:46.893

这些是链接本地地址，它们使用 255.255.0.0 作为子网掩码，因此两个地址都在同一个子网中。

这些地址是自动生成的，如果您想对它们进行更多控制，您将需要 DHCP 服务器或配置静态 IP 地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T16:00:59.927

这些机器没有获得 IP 地址。“169.254”的开头八位字节将这些地址标识为“链接本地”。

[http://en.wikipedia.org/wiki/Link-local_address](http://en.wikipedia.org/wiki/Link-local_address)

值得一提的是，地址不在不同的子网上，因为完整的本地链接定义是 169.254.0.0/16，或“B 类”子网。话虽如此，但您不可能很快让这些计算机进行通信。路由器是否通电，电缆是否已连接，路由器和计算机上的实际 RJ45 插孔上是否有上行链路指示灯？路由器上是否启用了 DHCP？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T16:02:07.100

您的路由器似乎没有充当 DHCP 服务器。169.254 是 Windows 机器无法自动获取 IP 地址的特殊范围。

来自： http: [//packetlife.net/blog/2008/sep/24/169-254-0-0-addresses-explained/](http://packetlife.net/blog/2008/sep/24/169-254-0-0-addresses-explained/)

> 有时您可能会遇到一个主机，它以某种方式为自己分配了一个 169.254.0.0/16 范围内的 IP 地址。这是已为 DHCP 配置的 Windows 机器特别常见的症状，但由于某种原因无法联系 DHCP 服务器。当主机无法动态获取地址时，它可以选择根据 RFC 3927 为自己分配一个本地链路 IPv4 地址。Microsoft 对此的术语是自动私有 Internet 协议寻址 (APIPA)。

# jquery - jquery - change background color of select options when clicked

> ID：13477015
> 
> 赞同：3
> 
> 时间：2012-11-20T15:56:30.337
> 
> 标签：jquery, html, css

I have this html code

```
<p> 
  <label for="contact">Contact name<span class="required"> *</span></label>
  <select name="contact" id="contact" onClick="clearSelect(this,'contact')">
  <option value="">Select Contact</option>
  <?php foreach ($contacts as $contact): ?>
<option value="<?php htmlout($contact['id']); ?>" 
    <?php if ($contact['id'] == $contactID) echo ' selected="selected"';                                
    ?>><?php htmlout($contact['name']); ?></option>
  <?php endforeach; ?>
  </select>    
 </p> 
```

and this jQuery function

```
function clearSelect(thisfield, id) {

$j("#" + id).css("background-color","#FFF");
$j("#" + id).css("border","1px solid #CCCCCC");
$j("#" + id).css("color","#000000");
} 
```

When I click the select book the background of the select box changes to white but the drop down list stays the same color until you scroll down it.

Any ideas how to change all the option background colors to white when the select box is clicked?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T16:00:15.757

您可能希望将该`.css()`方法与`.children()`and结合使用`.andSelf()`（因此它会影响选择和选项）：

```
function clearSelect(thisfield, id) {
    $j("#" + id).children().andSelf().css({"background-color":"#FFF", 
        "border":"1px solid #CCCCCC",
        "color":"#000000"});
} 
```

此外，无需`.css()`多次调用该方法，您可以使用属性值集的映射一次...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T16:34:30.030

我不希望选择框中的每个选项都有边框，所以我将功能更改为此

```
function clearSelect(thisfield, id) {
$j("#" + id).children().andSelf().css({"background-color":"#FFF", 
    "border":"1px solid #CCCCCC",
    "color":"#000000"});
$j("#" + id).children().css({
    "border":"0px solid #CCCCCC"
    });
} 
```

这怎么又不行了？？当我现在单击选择框时，会出现选项菜单，但只有当我将鼠标悬停在每个选项上时，背景颜色才会发生变化。这很奇怪。

# jquery - JQuery Scroll help end

> ID：13477016
> 
> 赞同：0
> 
> 时间：2012-11-20T15:56:33.810
> 
> 标签：jquery, scroll, scrolltop

So I've got the following code:

```
window.onload = function () {

function getScrollTop() {
    if (typeof window.pageYOffset !== 'undefined') {
        // Most browsers
        return window.pageYOffset;
    }

    var d = document.documentElement;
    if (d.clientHeight) {
        // IE in standards mode
        return d.scrollTop;
    }

    // IE in quirks mode
    return document.body.scrollTop;
}

window.onscroll = function () {
    var reviewbasket = document.getElementById('reviewbasket'),
    scroll = getScrollTop();

    if (scroll > 950) {
        $("#global").stop;
    }
    else {
        reviewbasket.style.top = (scroll + 0) + "px";
    }
};

}; 
```

Currently the scroll ends at 950 px however I wish for the div to scroll right up until the max height of either the content area (#content) or the page is reached. I also don't want the div to overlap the footer. The main problem I face is that this page is viewed in two different states: Logged in and Logged out, Logged out comes with an extra content area which pushes the basket down further and stops me being able to set a fixed height for the scroll to end.

Any tips or direction is welcome!

Thanks, Dan

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:48:32.760

创建一个变量来保存内容 div 的高度。然后，当页面改变状态（登录 => 注销）时，调用一个函数来更新高度变量。

```
var maxScroll = $("#content").height();

function resetMaxScroll() {
    maxScroll = $("#content").height();
}

...

if (scroll > maxScroll) {
    $("#global").stop;
} 
```

# objective-c - Best way to parse SSDP Discovery in Objective C

> ID：13477025
> 
> 赞同：2
> 
> 时间：2012-11-20T15:56:56.267
> 
> 标签：objective-c, ios, http, nsurlrequest, ssdp

I am working on a very simple application to discover a device using SSDP and I am trying to find the easiest way to parse the response from this command. I am trying to avoid having to do a bunch of NSString or regular expressions manipulations.

I have tried the following two approaches:

**Approach 1:** Using GCDAsyncUdpSocket, I am able to successfully send the discovery command and get the following response:

* * *

HTTP/1.1 200 OK
Cache-Control: max-age=300
ST: roku:ecp
USN: uuid:roku:ecp:1234567890
Ext:
Server: Roku UPnP/1.0 MiniUPnPd/1.4
Location: [http://192.168.XX.XX:8060/](http://192.168.XX.XX:8060/)

* * *

This looks like a regular HTTP response, but using GCDAsyncUdpSocket, I am getting the response as an NSData object, which I can easily convert to an NSString. However, what would be ideal is to somehow cast this to an NSHTTPURLResponse and then use its methods to get the field values. Any idea if this can be done?

**Approach 2:** I have tried using a regular NSURLRequest to try to send this command and then I would be able to get an NSHTTPURLResponse back. However, I keep on getting an error because the SSDP discovery command requires me to send this request to port 1900. I use the following code to send the "HTTP" request, I know it is not strictly HTTP, but I thought it may be an easier way to send this UDP command as the requirements look very similar to HTTP.

```
NSURL *url = [NSURL URLWithString:@"http://239.255.255.250:1900"];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url
                            cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];

[request setHTTPMethod:@"M-SEARCH *"];
[request setValue:@"239.255.255.250:1900" forHTTPHeaderField:@"Host"];
[request setValue:@"\"ssdp:discover\"" forHTTPHeaderField:@"Man"];
[request setValue:@"roku:ecp" forHTTPHeaderField:@"ST"];

NSURLConnection *connection = [[NSURLConnection alloc]initWithRequest:request delegate:self startImmediately:YES];
    if (connection)
    {
        NSLog(@"Connection success!");
    }
    else
    {
        NSLog(@"Connection failed!");   
    } 
```

When I do this, the connection is successful, but I get the following error in the didFailWithError delegate for NSURLConnection:

failed Error Domain=NSPOSIXErrorDomain Code=47 "The operation couldn’t be completed. Address family not supported by protocol family" UserInfo=0x8875940 {NSErrorFailingURLKey=http://239.255.255.250:1900/, NSErrorFailingURLStringKey=http://239.255.255.250:1900/}

This error only happens if I use port 1900, if I leave this out or use another more HTTP friendly port such as 8080, then this works, but obviously the device I am trying to discover does not respond correctly unless it gets the request in port 1900.

Thanks for any help you can provide.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T09:33:43.030

端口 1900 对于 SSDP 是固定的。所有 UPnP 设备都固定在此端口上侦听，并且连接节点期望这样做。你不能改变它。“开箱即用”是 UPnP 设计目标的一部分。此外，我的 Cocoa 专业知识非常有限，但我认为这`NSHTTPURLResponse`不会让你的事情变得更简单。`[NSHTTPURLResponse allHeaderFields]`return `NSDictionary`，这意味着您不再知道标头字段的原始顺序是什么。你需要知道接下来会发生什么，`Ext:`然后是一个元标题。

我建议要么自己解析响应，这不应该比一个循环复杂得多，按行分隔响应，然后按`:`. 或者，不要尝试使用自己的 SSDP 握手，而是使用现成的 Cocoish 库，例如 Upnpx、Cyber​​link 或 Platinum。对于发现阶段，它可能感觉像是不恰当的重型火炮，但我想知道在那之后你会对设备做什么，而不是实际尝试在设备上调用一些操作。

# ios - How to display page scrubber with QLPreviewController in a subview

> ID：13477026
> 
> 赞同：1
> 
> 时间：2012-11-20T15:56:57.563
> 
> 标签：ios, uiviewcontroller, uikit, qlpreviewcontroller

I am embedding a `QLPreviewController` in my own view controller by adding it as a child view controller like this (`contentArea` is a `UIView` property that determines which part of the screen the preview should use):

```
 QLPreviewController* preview = [[QLPreviewController alloc] init];
    preview.dataSource = self;
    preview.delegate = self;
    [self addChildViewController:preview];
    CGFloat w = self.contentArea.frame.size.width;
    CGFloat h = self.contentArea.frame.size.height;
    preview.view.frame = CGRectMake(0, 0,w, h);
    [self.contentArea addSubview:preview.view];
    [preview didMoveToParentViewController:self];
    self.qlPreviewController = preview; 
```

This works so far. However, when I open a PDF, I do not get the page scrubber that is shown on the right side when the `QLPreviewController` is shown full screen (see screenshot).

![Page scrubber shown when presented as modal view controller](../Images/c07ec8bf3ac5b0dddf14fcd6dfbedb4a.png)

Using [DCIntrospect](https://github.com/domesticcatsoftware/DCIntrospect "DCIntrospect") I see that there is a special subview of type `QLScrubView` responsible for this:

```
...
| <QLScrubView: 0x1274e990; frame = (963 64; 61 704); autoresize = LM+H; layer = <CALayer: 0x1274eb30>>
|   | <QLThumbnailView: 0x11fc6460; frame = (17 329; 32 45); layer = <CALayer: 0x11fcb4b0>>
|   | <QLThumbnailView: 0x11fd45a0; frame = (17 382; 32 45); layer = <CALayer: 0x11fbe830>>
|   | <QLThumbnailView: 0x1274dae0; frame = (9 268; 48 61); layer = <CALayer: 0x1273b860>>
... 
```

However, this scrub view is missing in the embedded use case.

Any ideas how to make this appear?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T05:23:33.093

当您有多个页面时，它会自动显示。我猜你的PDF有问题。尝试其他来源的其他 PDF，看看是否遇到同样的问题。我一直在使用 PDF，并且清理器显示得很好。

我的另一个想法是调整预览控制器的大小可能不正常。尝试将预览控制器加载为模态视图控制器（无父级），并查看是否仍隐藏擦洗器。

# javascript - 将鼠标悬停在专辑上时显示播放按钮

> ID：13477028
> 
> 赞同：0
> 
> 时间：2012-11-20T15:57:01.210
> 
> 标签：javascript, spotify, playback

有许多 Spotify 应用程序，包括 Pitchfork 和 Rolling Stone，当鼠标悬停在专辑封面上时，它们会在左下角显示一个播放按钮。这是一个[例子](https://www.evernote.com/shard/s8/sh/b2018598-034c-4397-9353-ffcf8d684914/7bc02c7e8c8e5f84d5b88996e4dbdf53/res/3bdf8a18-ab82-4d5d-8170-a3a853e474cf/skitch.png)。Spotify API 是否本机支持此功能？编写此代码的最佳方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:45:07.670

这是标准`Player`视图。使用曲目和专辑 URI 创建它，并将其插入到您的 DOM 中，就像在 JavaScript 中的任何其他 UI 元素一样。

文档[在这里](https://developer.spotify.com/technologies/apps/docs/ca28d10757/)。

在 GitHub 上的“播放单曲”示例中，有一个如何在 Spotify 教程应用程序中使用它的[示例。](https://github.com/spotify/apps-tutorial)如果您修改该示例以使用专辑而不是单个曲目播放列表，您将拥有所需的内容。

# azure - Azure CloudQueue PeekMessage 获取不可见消息

> ID：13477033
> 
> 赞同：5
> 
> 时间：2012-11-20T15:57:11.637
> 
> 标签：azure, azure-storage

根据此文档：http: [//msdn.microsoft.com/en-us/library/microsoft.windowsazure.storageclient.cloudqueue.peekmessage.aspx](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storageclient.cloudqueue.peekmessage.aspx)

> PeekMessage 只能检索可见的消息。

我的问题是有没有办法查看一条可见性设置为隐藏的消息？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T17:01:30.353

一旦队列消息可见性属性设置为隐藏，您将无法查看相同的消息，直到隐藏超时到期。

# git - corrupted loose object on git remote repo

> ID：13477035
> 
> 赞同：1
> 
> 时间：2012-11-20T15:57:24.977
> 
> 标签：git

I have git repo on an Apache server via web-dav. Recently I realized that I can't commit because `Cannot obtain needed blob` (as git reports). I used `git fsck` on the server (where I have root account) and I learned that:

```
fatal: loose object 169c3a2314c846d858492015a104ff184683b03d (stored in ./objects/16/9c3a2314c846d858492015a104ff184683b03d) is corrupt 
```

Surprisingly, I can do `git clone` on the server from one directory to another:

```
git clone /srv/git/repo ./copy 
```

and I don't get any error message, but I can't run 'clone' from a local machine via http. The cloned blob `169c3a2314c846d858492015a104ff184683b03d` is identical with the one that is presumably corrupted.

Any ideas for an easy fix?

PS. yes, I've read other posts here, but they mostly relate to a broken local copy. And yes, I made a backup copy of the repo.

# groovy - 可以像调用带参数的函数一样调用 Groovy 对象吗？

> ID：13477037
> 
> 赞同：3
> 
> 时间：2012-11-20T15:57:26.473
> 
> 标签：groovy, metaprogramming, metaclass

在 Groovy 中，我可以通过猴子修补元类的方法使对象像函数一样可调用`call`：

```
myObject.metaClass.call = { "hello world" }
println myObject() // prints "hello world" 
```

修补`call`只允许我调用不带参数的对象。有没有办法允许使用标准函数式语法使用参数调用对象？

* * *

**编辑：**一个答案与 tim_yates 建议的完全一样，尽管从 ataylor 的评论中值得注意的是，您可以`call`在没有显式元编程的情况下简单地覆盖：

```
class MyType {
    def call(...args) {
        "args were: $args"
    }
}

def myObject = new MyType()
println myObject("foo", "bar") // prints 'args were ["foo", "bar"]' 
```

显然，诀窍是使用`...args`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T16:01:41.500

你可以这样做：

```
myObject.metaClass.call = { ...args -> "hello $args" }
assert myObject( 'one', 'two', 'three' ) == 'hello [one, two, three]' 
```

（如您所见，args 是一个对象数组）

或者对于一个参数：

```
myObject.metaClass.call = { who -> "hello $who" } 
```

或者，如果您希望将该单个参数作为可选参数，您可以执行以下操作：

```
myObject.metaClass.call = { who = null -> "hello ${who ?: 'world'}" }

assert myObject( 'tim' ) == 'hello tim'
assert myObject() == 'hello world' 
```

# php - 使用 CURL 和 PHP 上传 SFTP 文件

> ID：13477040
> 
> 赞同：-1
> 
> 时间：2012-11-20T15:57:34.580
> 
> 标签：php, curl, upload, sftp

> **可能重复：**
> [如何通过 SFTP 从 PHP 上传文件](https://stackoverflow.com/questions/1767117/how-to-sftp-upload-files-from-php)

我有两个文件：

*   上传.php
*   data.csv (***大约 1MB*** )

* * *

Upload.php 应该使用 SFTP 和 CURL 连接，然后将 data.csv 文件发送到他们的服务器。我已获得 URL、用户名和密码，因此我可以使用 SFTP 登录。

* * *

谁能告诉我应该使用的代码？**不幸的是，我对 CURL 没有真正的经验**。

谢谢，

瑞安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:07:51.560

您可以使用[SSH2](http://www.php.net/manual/en/book.ssh2.php)扩展：

```
$host = 'domain.tld';
$username = 'username';
$password = 'password';
$connection = ssh2_connect($host);
if (ssh2_auth_password($connection, $username, $password)) {
  echo "Authentication Successful!\n";
} else {
  die("Authentication Failed...");
}
if (ssh2_scp_send($connection, '/local/filename', '/remote/filename')) {
  die("Upload Successful!\n");
} else {
  die("Upload Failed...");
} 
```

或者，如果您仍然喜欢 curl ，可以查看[本教程。](http://maanasroyy.wordpress.com/2012/05/24/curl-sftp-from-php/)

# function - 在函数中传递数组的 fortran 并发症

> ID：13477041
> 
> 赞同：0
> 
> 时间：2012-11-20T15:57:35.837
> 
> 标签：function, integer, fortran, product, real-datatype

我正在尝试编写一个程序来计算两个向量的叉积（输入是“真实”类型，例如 [1.3 3.4 1,5]）。但我不断收到许多错误：

```
 program Q3CW
    implicit none
   REAL :: matA(3), matB(3)
   REAL :: A11, A12, A13
   REAL :: B11, B12, B13
   real :: productc(3), answer(3)
   read*,A11, A12, A13
   read*,B11, B12, B13

   matA = (/A11, A12, A13/)
   matB = (/B11, B12, B13/)
   answer = productc(matA, matB)

   print*,'Answer = ', answer(1), answer(2), answer(3)
   end program

   real function productc(matIn1, matIn2)
   real, dimension(3) :: matIn1, matIn2

   productc(1)=(/matIn1(2)*matIn2(3)-matIn1(3)*matIn2(2)/)
   productc(2)=(/matIn1(3)*matIn2(1)-matIn1(1)*matIn2(3)/)
   productc(3)=(/matIn1(1)*matIn2(2)-matIn1(2)*matIn2(1)/)
   end function 
```

这是我得到的错误：

```
 Error: Q33333.f95(20) : Statement function definition for pre-existing procedure PRODUCTC; detected at )@=
   Error: Q33333.f95(21) : Statement function definition for pre-existing procedure PRODUCTC; detected at )@=
   Error: Q33333.f95(22) : Statement function definition for pre-existing procedure PRODUCTC; detected at )@=
   Warning: Q33333.f95(23) : Function PRODUCTC has not been assigned a value; detected at FUNCTION@<end-of-statement>
   Build Result Error(3) Warning(1) Extension(0) 
```

知道问题可能是什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T16:57:01.003

最好将您的子例程和过程放入一个模块中，然后使用该模块，以便调用者知道该接口。

您的程序似乎没有输入。

符号 (/ /) 用于初始化数组，而不是用于计算。

这是一个非常相似的问题：[Computing the cross product of two vectors in Fortran 90](https://stackoverflow.com/questions/6511711/computing-the-cross-product-of-two-vectors-in-fortran-90/6512578)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T15:27:19.697

您的代码中有几个错误。例如，您的函数的结果是一个 vetcor。因此，您必须指定（您只有一个标量，实数）。

您的功能现在包含在程序中。

这是工作代码：

```
program Q3CW
  implicit none
  real :: matA(3), matB(3)
  real :: A11, A12, A13
  real :: B11, B12, B13
  real :: answer(3)

  read*,A11, A12, A13
  read*,B11, B12, B13

  matA = (/A11, A12, A13/)
  matB = (/B11, B12, B13/)
  answer = productc(matA, matB)

  print*,'Answer = ', answer(1), answer(2), answer(3)

contains
  function productc(matIn1, matIn2) result(out)
    real, dimension(3) :: matIn1, matIn2, out

    out(1) = matIn1(2)*matIn2(3) - matIn1(3)*matIn2(2)
    out(2) = matIn1(3)*matIn2(1) - matIn1(1)*matIn2(3)
    out(3) = matIn1(1)*matIn2(2) - matIn1(2)*matIn2(1)
  end function
end program Q3CW 
```

# asp.net - 在 asp.net 的下拉列表中选择组标题

> ID：13477043
> 
> 赞同：0
> 
> 时间：2012-11-20T15:57:39.717
> 
> 标签：asp.net, c#-4.0, custom-server-controls

如何在 asp.net 的下拉列表中选择组标题

# asp.net - asp中的多维关联数组

> ID：13477049
> 
> 赞同：1
> 
> 时间：2012-11-20T15:58:02.697
> 
> 标签：asp.net, arrays

一段时间以来，我一直在努力寻找解决此问题的方法。我正在将网站从 php 转换为 asp。我有一个这样的数组。

```
$students = array(

    array(
        "id" => "1",
        "name" => "John",
        "group" => "A"
    ),
    array(
        "id" => "2",
        "name" => "Joe",
        "group" => "A"
    ),
    array(
        "id" => "3",
        "name" => "Derp",
        "group" => "B"
    ),
);

foreach($student as $slacker){
    //use the data
} 
```

是否有任何替代方法可以与 asp 接近？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T16:05:48.190

您可以创建一个类并使用泛型列表来保存您的类类型的数组。

```
public class YourGroup
{
   public string id { get; set; };
   public string name { get; set; };
   public string group { get; set; };       
}

List<YourGroup> lstGroup = new List<YourGroup>();
lstGroup.Add(new YourGroup(id ="1", name="Jon", group="A1"));
lstGroup.Add(new YourGroup(id ="2", name="Jon", group="A2"));
lstGroup.Add(new YourGroup(id ="3", name="Jon", group="A3"));
string idOfFirst lstGroup[0].id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T16:04:17.340

您可能正在寻找所谓的字典。虽然它不像 $myArray['foo']['bar'] 那样嵌套很深，但字典将允许您像

```
 Dictionary<int, MyObject> myDictionary = new Dictionary<int, MyObject>(); 
```

您的 MyObject 包含以下对象的位置

```
 class MyObject
 {
      public string name;
      public string group;
 } 
```

因此，您可以这样遍历它

```
MyObject foo = new MyObject();

foo.name = "tada!";
foo.group = "foo";

myDictionary.add(1, foo);

foreach (MyObject obj in Dictionary.Values)
{
     //Do Stuff
} 
```

一个完全字符串关联的数组将是

```
 Dictionary<string, string> myDictionary = new Dictionary<string, string>();

 string something = myDictionary["value"]; 
```

# silverlight - 谷歌浏览器 Silverlight 插件加载问题

> ID：13477053
> 
> 赞同：1
> 
> 时间：2012-11-20T15:58:11.693
> 
> 标签：silverlight, google-chrome

我们有带silverlight 的sharepoint 2010。所有 silverlight 网站都加载到 IE9 中，但其中一些无法加载到 chrome 中，但它们可以与 IE 一起使用。我试图找出是否有任何错误，但没有任何异常。它只是不加载 xap，因为应用程序启动事件不会触发。我试图从 silverlight 项目中设置减少 xap 大小，但它在 IE 中也不起作用。你能帮我我找不到其他解决方案吗？亲切的问候居住在 Ozsoy

# java - (Java) 添加到计数器变量的代码

> ID：13477054
> 
> 赞同：0
> 
> 时间：2012-11-20T15:58:13.923
> 
> 标签：java, counter, ticker

我试图让一个计时器在我当前的 java 项目中工作，它在一个无限循环中每 n 微秒（例如 500 为 1/2 秒）向一个整数变量添加 1，以便它在程序运行时始终运行。这是我目前拥有的代码：

```
public class Ticker
{
    public int time = 0;
    long t0, t1;

    public void tick(int[] args)
    {
        for (int i = 2; i < 1; i++)
        {
            t0 = System.currentTimeMillis();
            do
            {
                t1 = System.currentTimeMillis();
            }
            while (t1 - t0 < 500);
            time = time + 1;
        }
    }
} 
```

每个人都对我的最后一个问题很有帮助，希望这个问题同样简单

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T16:01:14.977

我想你想要

```
Thread.sleep(500); 
```

目前您正在消耗等待 500 毫秒的 CPU 周期（您提到微秒，但我相信您想要毫秒）。以上使您当前的线程休眠 500 毫秒，并且您的进程不会消耗任何 CPU（或至少最少 - 垃圾收集仍将运行）。如果您在运行版本时观察 CPU，您应该会看到差异。

请参阅[此处](http://docs.oracle.com/javase/tutorial/essential/concurrency/sleep.html)了解更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T16:03:31.193

如果您需要在不同的线程中执行此操作，请查看[Timer](http://docs.oracle.com/javase/6/docs/api/javax/swing/Timer.html)：

```
int delay = 500; //milliseconds
ActionListener taskPerformer = new ActionListener() {
    public void actionPerformed(ActionEvent evt) {
        time++
    }
};
new Timer(delay, taskPerformer).start(); 
```

请注意，上面的代码不能使用局部变量（必须将它们声明为`final`在匿名类中访问它们）。但是，它可以是成员。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T16:14:49.690

这是一个可比较的`ScheduledExecutorService`示例，它将`time`以 500 毫秒的间隔更新变量：

```
ScheduledExecutorService exec = Executors.newScheduledThreadPool(1);

exec.scheduleAtFixedRate(new Runnable(){
    private int time = 0;

    @Override
    public void run(){
        time++;
        System.out.println("Time: " + time);
    }
}, 0, 500, TimeUnit.MILLISECONDS); 
```

[这种方法优于使用 Timer](https://stackoverflow.com/questions/409932/java-timer-vs-executorservice)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T16:05:59.737

看看[Timer](http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html)或更好的[ScheduledExecutorService](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html)。它们使您能够定期执行某些操作并处理围绕该操作的计算。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T16:01:01.623

你所拥有的效率相当低，因为它浪费了等待下一次唤醒时间的 CPU 周期。如果我是你，我会使用[`Thread.sleep()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#sleep%28long%29).

至于为什么您当前的代码不起作用，您的`for`循环条件已关闭，因此永远不会进入循环。

要让计时器代码与程序中的任何其他逻辑同时运行，您需要研究线程。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-20T16:03:12.783

听起来您可能想研究多线程。如果你搜索这个，你会发现几个很好的问题/答案线程。网上其他地方也有教程...

# cuda - CUDA 中的共享内存分配

> ID：13477062
> 
> 赞同：1
> 
> 时间：2012-11-20T15:58:27.183
> 
> 标签：cuda, nsight

我正在尝试分配 quadro 4000 nvidia 设备上限。以下大小的 2.0 静态共享内存块：

```
__shared__ char temp [128][128]; 
```

但是，在查看 Nsight 调试器时，我只能看到 64*64 单元格。其余的细胞在哪里。此外，当我查看分析器时，我可以看到共享内存列下出现 16KB（没关系。）

是什么赋予了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T17:17:57.023

Nsight Visual Studio Edition CUDA 调试器有几个选项来控制变量观察窗口中出现的表达式的评估和可视化。数组扩展的默认设置是 64。限制是为了避免限制评估大型数组的成本。

更改设置

1.  从顶级 Nsight 菜单执行命令*选项...*
2.  在 NVIDIA Nsight 选项对话框中

    *   在左侧窗格中选择调试器
    *   在右侧窗格中，将设置*最大数组扩展元素*更改为*128*

您的用例的另一种解决方案是打开四个内存窗口之一并配置列 = 64 和类型 = 1 字节整数。如果值是文本而不是数字，您可以禁用数据并将文本设置为 ANSI 文本。

# python - Python GMail IMAP 不返回 UID

> ID：13477069
> 
> 赞同：2
> 
> 时间：2012-11-20T15:58:56.270
> 
> 标签：python, gmail, imaplib

我正在使用 imaplib 和 Python 来获取我的收件箱或 GMail 标签的内容。

我的问题是：当我查询收件箱时，imaplib 返回 UID，而不是我的电子邮件标签。

如果我查询收件箱，我会得到 UID：

```
inbox EMAIL_UIDS: 24408 24599 25193 25224 25237 25406 25411 25412 25413 25415 
```

但是，如果我查询我的标签“New”（其中包含收件箱中的两条消息，因此应该包含上述两个 UID），我只会得到有序索引：

```
New EMAIL_UIDS: 1 2 
```

我的代码是：

```
#Main file
if folder_name is None:
    email_uids = obtain_inbox_email_uids(mail)
else:
    email_uids = obtain_folder_email_uids(folder_name,mail)
email_uids = list(email_uids) 
```

和：

```
#Email utilities file
def obtain_folder_email_uids(folder_name, mail):
    """
    Given an IMAP instance,
    return the UIDs of the emails in a specific folder.
    """

    mail.select(folder_name)

    result, data = mail.uid('search', None, "ALL")
    print "RESULT, DATA",result,data
    email_uids = data[0]

    print folder_name,"EMAIL_UIDS:",email_uids
    email_uids = email_uids.split(" ")
    email_uids = reversed(email_uids)

    return email_uids

def obtain_inbox_email_uids(mail):
    """
    Given an IMAP instance,
    return the UIDs of the inbox emails.
    """

    return obtain_folder_email_uids('inbox', mail) 
```

有谁知道为什么 imaplib 返回收件箱的 UID 但为特定标签排序索引，我怎样才能让它返回 UID？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T17:10:50.870

发现了问题。UID 被正确返回。

我的问题是：我正在使用一个函数来根据其 UID 手动获取电子邮件。因此，在收件箱的情况下，我获取了 UID，然后使用此功能具体获取每封邮件。每个标签都一样。

然而，每封特定的电子邮件都被退回到收件箱，但在标签的情况下，我无法获取每封邮件。因此，我假设我没有将正确的 UID 传递给函数。

我的错误与此无关。在获取特定邮件的函数内部，我总是从收件箱中获取，而不是从相关标签中获取。

所以在这种情况下，对于收件箱，我会获取一个 UID 列表，然后使用此函数成功获取特定的每封邮件，但在特定 GMail 标签的情况下，我将获取 UID 列表，然后无法获取每个邮件特定邮件，因为我在收件箱上执行选择。

将收件箱中的选择更改为获取每个特定邮件的函数内的特定标签，现在可以完美运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T16:03:01.700

*每个邮箱*的 IMAP UID 都是唯一的。如果您刚刚创建了邮箱，那么几乎可以肯定 1 和 2 是这两条消息的正确 UID。为什么你认为他们不是？

# unit-testing - 为什么在运维期间更新单元测试？

> ID：13477084
> 
> 赞同：0
> 
> 时间：2012-11-20T15:59:34.650
> 
> 标签：unit-testing

我曾在 2 个软件开发团队工作过。

第一个团队没有保持单元测试是最新的，原因是：

*   时间不够
*   缺乏新引入的单元测试工具的技能
*   运维开发人员不完全理解的复杂代码，因此知道如何正确进行单元测试

第二个团队希望保持单元测试是最新的，即使在运维期间也是如此。

你说什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:27:07.790

如果您在维护期间不努力使单元测试保持最新状态，它们将停止提供价值。稍后让它们恢复到最新状态会很昂贵，你的老板可能不会愿意花这种钱。

你应该做的是从你的单元测试中榨取更多的价值。

使用它们向您的维护团队介绍代码。使用它们来展示它们如何提供如何调用代码的示例。向团队展示如何首先在单元测试中复制错误，然后使用该测试来证明代码何时修复。展示测试如何证明当他们的维护活动没有破坏很多其他测试时，其他代码继续正常工作。展示他们应该如何努力做出不破坏许多其他测试的更改。

你也可以诉诸他们的自我价值感。向他们展示测试将如何鼓励他们以模块化方式进行更改，他们将从中学习面向对象的设计原则，以及如何进行测试驱动开发。如果他们渴望在软件开发领域提升自己，那么这些就是雇主所寻找的热门技能。

基本上，单元测试有价值的原因不会因为程序进入维护阶段而消失。如果有的话，这些理由变得更有价值。

# c++ - 使用类模板需要模板参数列表

> ID：13477086
> 
> 赞同：26
> 
> 时间：2012-11-20T15:59:41.017
> 
> 标签：c++, templates

我从班级中移出方法实现并发现以下错误：

```
use of class template requires template argument list 
```

对于方法 whitch 根本不需要模板类型...（对于其他方法都可以）

班级

```
template<class T>
class MutableQueue
{
public:
    bool empty() const;
    const T& front() const;
    void push(const T& element);
    T pop();

private:
    queue<T> queue;
    mutable boost::mutex mutex;
    boost::condition condition;
}; 
```

错误的执行

```
template<>   //template<class T> also incorrect
bool MutableQueue::empty() const
{
    scoped_lock lock(mutex);
    return queue.empty();
} 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-11-20T16:03:01.670

它应该是：

```
template<class T>
bool MutableQueue<T>::empty() const
{
    scoped_lock lock(mutex);
    return queue.empty();
} 
```

如果您的代码那么短，只需内联它，因为无论如何您都无法将模板类的实现和标头分开。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-20T16:04:14.880

采用：

```
template<class T>
bool MutableQueue<T>::empty() const
{
    ...
} 
```

# ruby - 如何从 Support 文件夹中的 class.rb 调用页面对象

> ID：13477087
> 
> 赞同：1
> 
> 时间：2012-11-20T15:59:45.420
> 
> 标签：ruby, cucumber, watir-webdriver, page-object-gem

我正在使用页面对象 gem。假设我有一个页面对象，`features/bussines/pages/booking_page.rb`例如：

```
class Booking

   include PageObject

   span(:txtFirstName,   :id => 'details_first_name')

end 
```

...并且我使用位于以下位置的“工具”类`features/support/tools.rb`：

```
class MyTools

  def call_to_page_object
    on Booking do |page|
       puts page.txtFirstName
    end
  end
end 
```

...但是这种方法失败了，因为不允许从类调用对象：

```
undefined method `on' for #<Booking:0x108f5b0c8> (NoMethodError) 
```

很确定我在使用类中的页面对象的过程中遗漏了一些概念，但没有意识到问题所在。你能告诉我这里可能出了什么问题吗？

非常感谢！

==============================

Justin 找到了调用类崩溃的原因。最终类代码结果：

```
class MyTools

  #Include this module so that the class has the 'on' method
  include PageObject::PageFactory

  def initialize(browser)
    #Assign a browser object to @browser, which the 'on' method assumes to exist
    @browser = browser
  end

  def getCurrentRewards
    on Booking do |page|
      rewards_text = page.rewards_amount
      rewards_amount = rewards_text.match(/(\d+.*\d*)/)[1].to_f
      puts "The current rewards amount are: #{rewards_amount}."
      return rewards_amount
    end
  end

end 
```

以及对函数的调用：

```
user_rewards = UserData.new(@browser).getCurrentRewards 
```

为什么它对我不起作用？两个主要原因：

*   我没有将浏览器对象传递给类 <== REQUIRED
*   我没有将 PageObject::PageFactory 包含在“on”方法的类 <== REQUIRED 中。

谢谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T17:36:35.843

要使用`on`(or [`on_page`](http://rubydoc.info/github/cheezy/page-object/master/PageObject/PageFactory#on_page-instance_method)) 方法需要两件事：

1.  可用的方法，这是通过包含`PageObject::PageFactory`模块来完成的。
2.  有一个`@browser`变量（在类的范围内）是浏览器。

因此，您可以通过以下方式使您的 MyTools 类工作：

```
class MyTools
  #Include this module so that the class has the 'on' method
  include PageObject::PageFactory

  def initialize(browser)
    #Assign a browser object to @browser, which the 'on' method assumes to exist
    @browser = browser
  end

  def call_to_page_object
    on Booking do |page|
       puts page.txtFirstName
    end
  end
end 
```

然后，您将调用您的 MyTools 类，例如：

```
#Assuming your Cucumber steps have the the browser stored in @browser:
MyTools.new(@browser).call_to_page_object 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T16:51:52.060

你想做什么？

你读过[黄瓜和奶酪](https://leanpub.com/cucumber_and_cheese)书吗？

页面应该在`features/support/pages`文件夹中。您也可以将页面需要的其他文件放在那里。

如果要`on`在类中使用方法，则必须将其添加到类中：

```
include PageObject 
```

MyTools 类的代码在我看来应该在 Cucumber 步骤文件中，而不是在类中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T17:06:21.153

您的类应该使用`extend`关键字来访问特殊的类方法，例如`span`：

```
class Booking
   extend PageObject
   span(:txtFirstName, :id => 'details_first_name')
end 
```

我希望这行得通。

# java - 来自链接的 JSP 调用方法

> ID：13477088
> 
> 赞同：0
> 
> 时间：2012-11-20T15:59:47.623
> 
> 标签：java, html, jsp, servlets

我是 JSP 的新手，希望为用户提供从当前会话中注销的选项。

我想知道是否可以从链接标记（即）调用包含注销逻辑的方法`<a href=...>`。

像这样的东西：

```
out.println("You are already logged in. Click <a href="methodName()">here</a> to go to the login page"); 
```

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T16:00:54.687

你不能直接调用这样的方法。您需要调用 Servlet 的 URL。Servlet 应该包含注销逻辑。

另一种可以使用 scriptlet 将注销逻辑嵌入 JSP 本身的方法（顺便说一句，这是一种非常糟糕的方法）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T16:14:49.197

您不能直接从链接调用方法。

首先，您必须了解 JSP 生命周期（请参阅[Java EE 教程](http://docs.oracle.com/javaee/5/tutorial/doc/bnahe.html)）。为此，您必须使用`href`参数中的 Servlet URI 调用包含注销逻辑的 Servlet。

与其学习 JSP，不如学习 JSF。它更简单、更强大，并且有很多很酷的功能。[Primefaces](http://www.primefaces.org/documentation.html)是一个好的 JSF 实现。

只是最后的建议；在编码之前，学习有关 JSF 的概念。您将成为一名更好的开发人员，并且最终以正确的方式学习 JSF 会更快。

# c++ - 在 OpenCL 中将一半转换为浮点数

> ID：13477090
> 
> 赞同：2
> 
> 时间：2012-11-20T15:59:53.500
> 
> 标签：c++, c, floating-point, opencl, precision

如果这是微不足道的，我深表歉意，但我无法通过谷歌找到答案。

根据 OpenCL 标准（自 1.0 起），出于存储原因支持 half 类型。

然而，在我看来，如果没有 cl_khr_fp16 扩展，就不可能将它用于任何事情？

我想做的是将我的值保存为一半，但以浮点数执行所有计算。

我尝试使用 convert_half()，但没有 cl_khr_fp16 不支持。我尝试在自动 c 样式转换的一半之前只写 (float)，但没有奏效。

所以我的问题是，我如何利用一半进行存储？

我需要能够读写一半。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T19:41:29.863

使用`vload_halfN`和`store_halfN`。存储的 halfN 值将转换为 floatN 或从 floatN 转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T16:18:27.733

据我所知，只有 GPU 支持 half 类型，但是只要您对按位操作有所了解，您就可以相当简单地将其转换为浮点数和从浮点数转换回来。

请查看以下链接，以获得有关如何执行此操作的良好说明。

```
ftp://ftp.fox-toolkit.org/pub/fasthalffloatconversion.pdf 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-16T15:06:48.087

由于在任何其他答案中都没有提到它，我想我会补充：您也可以在 OpenCL 图像中使用半浮点数，并且`read_imagef`and`write_imagef`函数将为您执行与浮点数的转换（不需要 cl_khr_fp16 扩展名）。该扩展仅用于将变量放入（并进行数学运算）一半。

# jquery - 卷起并单击打开页面

> ID：13477097
> 
> 赞同：2
> 
> 时间：2012-11-20T16:00:12.140
> 
> 标签：jquery, jquery-animate, slide

我想做的是：

*   单击按钮后，页面的一部分（实际按钮所在的位置+更多项目）正在卷起（向上滑动），完成后
*   用户被带到另一个页面

到目前为止我所做的代码如下（显然不起作用）：

```
<div id="content">
    <div>
        <p>something anything</p>
        ...
    </div>
<a id="roll"><img src="_images/butt-submit.png"></a>

</div>

<script>

$('#roll').click(function() {
     $('#content').animate({
          "width" : "100%",
          "height" : "0px"
         }, function() {
     $(this).load('index2.html');
        });
});

</script> 
```

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T16:02:46.863

### 正如[JSFiddle](http://jsfiddle.net/2AhZt/)所示，这应该可以解决问题

```
$("#roll").click(function() {
     $("#content").animate({
          width: "100%",
          height: "0px"
     }, function() {
         window.location.href = "index2.html";
     });
}); 
```

但是`animate`，您也可以使用`slideUp`并简化您的代码，而不是 using ：

```
$("#roll").click(function() {
     $("#content").slideUp(function() {
         window.location.href = "index2.html";
     });
}); 
```

​</p>

## 为什么`location.href`而不只是`location`？

如您所见，我已经使用过`window.location.href`，而我可以轻松地使用：

```
window.location = "index2.html"; 
```

这也可以跨浏览器工作，但由于`window.location`它是一个对象，因此如果您使用更长的符号并定位特定的字符串属性会更清楚。

## 正确的`script`块定义

看来您也没有提供脚本块语言，这是[HTML 规范](http://www.w3.org/TR/html4/interact/scripts.html#h-18.2.2.2)的要求。第一句话说这是必须的：

> [HTML 4.01]
> [**18.2.2 指定脚本语言**]
> 
> ***必须**为文档中的每个 SCRIPT 元素实例指定类型属性。*

在您的情况下，这意味着`script`必须为块提供语言，否则它们可能不会首先被识别为脚本块：

```
<script type="text/javascript">
...
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T16:06:36.840

如果您想将页面加载到`content`元素中（*就像您使用加载方法一样*），您可以使用`slideUp()`and`slideDown()`方法，目前您将 设置`height`为 0 并且您看不到加载的内容。

```
$(function() { // when the DOM is ready
   $('#roll').click(function(event) {
       event.preventDefault() // prevent the default action of the event
       $('#content').slideUp(function() {
            $(this).load('index2.html', function(){ // when load is complete
               $(this).slideDown() // slide down the #content element 
            });
       });
   });
}) 
```

如果您想将用户重定向到另一个页面，您可以使用`window.location.href`，但为什么不使用`href`属性：

```
<a id="roll" href='index2.html'><img src="_images/butt-submit.png"></a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T16:01:30.250

线

```
$(this).load('index2.html'); 
```

用于 AJAX 将第二个页面加载到 DOM 元素中（在本例中`#roll`）。如您所说，如果您想将用户带到另一个页面，请使用：

```
window.location = 'index2.html'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T16:03:11.693

> 用户被带到另一个页面

为了执行该任务，您应该使用：

```
location.href = "index2.html" 
```

# vba - VBA打开新工作簿并复制到最后一行

> ID：13477100
> 
> 赞同：0
> 
> 时间：2012-11-20T16:00:19.483
> 
> 标签：vba, excel, excel-2007

我正在编写最后一行代码的副本，该代码似乎每次都复制相同的确切行数。

代码是打开一个新工作簿，从新工作簿中取出特定工作表，复制所有可用数据，并将其粘贴到原始工作簿中。我的代码如下

```
Dim wkb As Workbook
Dim wkbFrom As Workbook
Dim wks As Worksheet
Dim path As String, FilePart As String
Dim TheFile
Dim loc As String
Dim Lastrow As Long
Dim lr As Long
Dim lr2 As Long

FilePart = Trim(shPivot.Range("E17").Value)
TheFile = Dir(path & "*" & FilePart & ".xls")
Set wkbFrom = Workbooks.Open(loc & path & TheFile & FilePart)
Set wks = wkbFrom.Sheets(shPivot.Range("E15").Value)
Lastrow = ActiveSheet.UsedRange.Rows.Count
lr = shCurrentWeek.Range("A" & Rows.Count).End(xlUp).Row
lr2 = wks.Range("A" & Rows.Count).End(xlUp).Row
Debug.Print lr
Debug.Print lr2

'Copies range from report generated to share drive and pastes into the current week tab of open order report
wks.Range("A2:N" & lr2).Copy wkb.Sheets("Current Week").Range("A4")

'Closes the workbook in the shared drive
wkbFrom.Close False 
```

即使“新打开的工作簿”只有 167 行，我也不断获得 187 行数据。并且数据一直填充到“A”列到第 507 行。帮助？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T19:47:08.110

我自己从一些工作表中获取最后一行数据时遇到了麻烦；这是我现在使用的代码，对我来说似乎是最一致的。

```
objExcelWks.Range("A1").Offset(objExcelWks.Rows.Count - 1, 0).End(xlUp).Row 
```

也许这会奏效？

# php - 通过 CURL 登录网页，不同

> ID：13477104
> 
> 赞同：0
> 
> 时间：2012-11-20T16:00:42.323
> 
> 标签：php, curl

我需要登录一个网页。我使用 CURL 和 post 登录，但这还不够。当您从网站登录时，该帖子还包含一个始终在变化的字符串。有没有办法克服它？

我用这个：

```
$ch = curl_init();

curl_setopt ($ch, CURLOPT_URL, $url);
curl_setopt ($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; he-IL; rv:1.8.1.6) Gecko/20070725 Firefox/2.0.0.6");
curl_setopt ($ch, CURLOPT_REFERER, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE);
curl_setopt($ch, CURLOPT_POST, TRUE);

$post = "username=$username&password=$password";
curl_setopt($ch, CURLOPT_POSTFIELDS, $post);

$result = curl_exec($ch);
$info = curl_getinfo($ch);
curl_close($ch); 
```

就像我需要代码才能真正访问网页并定期填写表格。

我到处找，但我能找到的只是使用发布数据。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T17:10:42.593

To pass that you need to visit the page with the form, grab the field and then use it in POST request when you submit the form.

I suggest you visit the form page not only for that, but also for the following reasons (some of which can be used to figure people using automatic requests):

1.  You recieve cookies
2.  You don't fake referrer, you actually visited the page
3.  You might want to check form fields to see if there's any new ones added since you wrote the script. That could be the case if form setup changes and you might want to adapt to that, if you don't then your script might stop working one day

# ios - NSKeyedArchiver archiveRootObject 和 NSFileProtectionComplete/NSFileProtectionCompleteUnlessOpen

> ID：13477106
> 
> 赞同：3
> 
> 时间：2012-11-20T16:00:47.880
> 
> 标签：ios, nskeyedarchiver

实际上是否可以调用 NSKeyedArchiver archiveRootObject 并使用数据保护 API 将文件属性设置为 NSFileProtectionComplete 或 NSFileProtectionCompleteUnlessOpen ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T18:27:12.450

首先尝试将对象写入特定位置，在本例中为 docFile（设置为文档目录）。然后将文件属性应用到 docFile。

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *docDir = [paths objectAtIndex: 0];
NSString* docFile = [docDir stringByAppendingPathComponent: @"Somefile.plist"];
NSError* error;    

 if([NSKeyedArchiver archiveRootObject:tempData toFile:docFile]) {

    NSDictionary *fileAttributes = [NSDictionary
                                dictionaryWithObject:NSFileProtectionComplete
                                forKey:NSFileProtectionKey];
    if([[NSFileManager defaultManager] setAttributes:fileAttributes     
                            ofItemAtPath:docFile  error: &error]) {
        NSLog(@"Success");
    }
 else {
   NSLog@(%@", error);
  }
} 
```

# xcode - 我收到 AFNetworking 的编译器警告，但不应该。我如何解决它？

> ID：13477109
> 
> 赞同：31
> 
> 时间：2012-11-20T16:00:53.280
> 
> 标签：xcode, afnetworking

我`AFNetworking`在一个项目中使用了最优秀的库，我目前正在升级到 iOS 6。我正在升级，减少针对 iOS 6 SDK 编译时收到的一堆警告。

### AFNetworking 在所有目标中都给了我两个警告：

```
SystemConfiguration framework not found in project, or not included in
precompiled header. Network reachability functionality will not be available. 
```

和

```
MobileCoreServices framework not found in project, or not included in
precompiled header. Automatic MIME type detection when uploading files
in multipart requests will not be available. 
```

不过，事情是这样的：这两个`libraries` **被**添加到我所有的`targets`. 我想以正确的方式摆脱这些警告；我不会修改`AFNetworking`文件。我怀疑这是 Xcode 很傻。诚然，这是一件小事，但留下警告是不好的做法。

如何删除这些警告？

我试过重新启动 Xcode 和清理。两者都不起作用。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-11-20T18:17:50.010

我不确定您是否使用[CocoaPods](http://cocoapods.org/)，但这是在 AFNetworking [Github 页面](https://github.com/AFNetworking/AFNetworking/issues/614)上跟踪的一个已知问题。

我可以通过将正确的导入语句直接添加到我的 `PROJECTNAME-Prefix.pch 来解决这个问题，我将其更改为这个。

```
#ifdef __OBJC__
  #import <UIKit/UIKit.h>
  #import <SystemConfiguration/SystemConfiguration.h>
  #import <MobileCoreServices/MobileCoreServices.h>
#endif 
```

如果您有其他内容，请不要删除它。只需添加 SystemConfiguration 和 MobileCoreServices 的导入。

对于 OS X：

```
#ifdef __OBJC__
    #import <Cocoa/Cocoa.h>
    #import <SystemConfiguration/SystemConfiguration.h>
    #import <CoreServices/CoreServices.h>
#endif 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-12-01T18:26:52.423

如果您使用的是 swift：Xcode 在编译`Prefix.pch`文件之前编译 Swift 代码，因此即使您的 .pch 文件中有正确的导入，您也会收到这些警告。我发现的最佳解决方案是`Bridging-Header.h`在导入 AFNetworking 之前将它们添加到项目文件中：

```
#import <SystemConfiguration/SystemConfiguration.h>
#import <MobileCoreServices/MobileCoreServices.h>
#import "AFNetworking.h" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-09T21:08:23.117

这已经得到解答，但是，如果您正在开发一个可能同时为 OS X 和 iOS 编译的命令行工具（肯定不是 App Store），您可以添加以下内容：

```
#ifdef __OBJC__
    #import <Foundation/Foundation.h>
    #import <SystemConfiguration/SystemConfiguration.h>

    #if TARGET_OS_IPHONE
        #import <MobileCoreServices/MobileCoreServices.h>
    #elif TARGET_OS_MAC
        #import <CoreServices/CoreServices.h>
    #endif

#endif 
```

通过评估您正在编译的目标，它将包含正确的文件。

# avl-tree - 添加到 AVL 树

> ID：13477113
> 
> 赞同：0
> 
> 时间：2012-11-20T16:00:58.600
> 
> 标签：avl-tree

当我向 AVL 树添加一个值时，我怎么知道在哪里插入它？我不是在谈论编码方面，而是更多的图形表示。我假设插入是在第一个可用的外部节点处完成的，但我不确定，因为我的教科书中给出的示例在随机外部节点处插入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T18:32:53.930

AVL树是一种自平衡二叉搜索树，二叉搜索树具有以下性质：*每个节点的左子树只包含键小于节点键的节点，每个节点的右子树只包含键大于节点的节点关键*。因此，您必须以在插入后保持声明属性的方式插入新节点：您从根节点开始，并通过比较新节点键和当前节点键来处理叶子，如果新节点键更大，您访问右子节点，否则访问左节点下一个孩子，当在那个地方没有孩子可以访问时，您插入新节点。

# django-templates - 在 Django 1.4.2 中使用 Ember 和 Handlebars

> ID：13477114
> 
> 赞同：1
> 
> 时间：2012-11-20T16:00:59.333
> 
> 标签：django-templates, ember.js, handlebars.js

我试图让 Ember & Handlebars 与 Django 1.4.2 一起工作，但没有取得多大成功。我正在使用 Django-ember（来自这里的最新版本）：[https](https://github.com/noirbizarre/django-ember) ://github.com/noirbizarre/django-ember、Handlebars.js (1.0.rc.1) & Ember.js (1.0.0-pre.2 ）。

按照 Django-ember 说明，我在设置中将“ember”添加到已安装的应用程序中，将 {% load ember %} 放在模板顶部，然后将其放在一个块中：

```
{% handlebars "application" %}
   {{App.name}}
{% endhandlebars %} 
```

我在 js 文件中用 name 变量声明了 App。

输出只是空白，但在浏览器控制台窗口 (Chrome) 中查看时没有插入任何脚本标记。

如果我完全删除了 javascript 包含，则会呈现脚本标记 - 只是“{{App.name}}”按预期保持不变。所以看起来，Ember/Handlebars 没有正确渲染模板。任何想法为什么？

一个可能相关的怪癖是，如果我尝试

```
{% tplhandlebars "tpl-infos" %}
    {{total}} {% trans "result(s)." %}
    <p>{% trans "Min" %}: {{min}}</p>
    <p>{% trans "Max" %}: {{max}}</p>
{% endtplhandlebars %} 
```

它会引发关于 {% trans 是无效标签的模板错误。这可以通过包含 {% load i18n %} 来解决，但鉴于这不在 Django-Ember 指令中，我倾向于认为这是一个更大问题的迹象；也许它不是为与 Django 1.4.2 一起工作而设计的。

**更新** 似乎它实际上是在渲染，但它将它包装在一个 div 中并将它放在我没有注意到它的页面底部。那么，现在的下一个问题是如何将其恢复到 html 中的原始点？

# ios - 没有使用 RestKit 找到可映射的关系值 keyPath

> ID：13477122
> 
> 赞同：2
> 
> 时间：2012-11-20T16:01:14.693
> 
> 标签：ios, json, restkit

我无法使用 RestKit 将我的 JSON 映射到核心数据。RK 记录说：

```
Did not find mappable relationship value keyPath. 
```

我显然做错了什么。

日志：

```
2012-11-20 15:40:36.525 eMobile[44849:12603] T restkit.object_mapping:RKObjectMappingOperation.m:342 Mapping attribute value keyPath 'OBJECTCLASS' to 'type'
2012-11-20 15:40:36.525 eMobile[44849:12603] T restkit.object_mapping:RKObjectMappingOperation.m:359 Skipped mapping of attribute value from keyPath 'OBJECTCLASS to keyPath 'type' -- value is unchanged (SFAACCOUNT)
2012-11-20 15:40:36.525 eMobile[44849:12603] T restkit.object_mapping:RKObjectMappingOperation.m:342 Mapping attribute value keyPath 'TIMESTAMP' to 'timestamp'
2012-11-20 15:40:36.526 eMobile[44849:12603] T restkit.object_mapping:RKObjectMappingOperation.m:352 Mapped attribute value from keyPath 'TIMESTAMP' to 'timestamp'. Value: 2012-11-20T15:40:08Z
2012-11-20 15:40:36.526 eMobile[44849:12603] D restkit.object_mapping:RKObjectMappingOperation.m:483 Did not find mappable relationship value keyPath 'VALUES'
2012-11-20 15:40:36.526 eMobile[44849:12603] D restkit.object_mapping:RKObjectMappingOperation.m:662 Finished mapping operation successfully...
2012-11-20 15:40:36.526 eMobile[44849:12603] T restkit.object_mapping:RKObjectMapper.m:293 Examining keyPath 'VALUES' for mappable content...
2012-11-20 15:40:36.527 eMobile[44849:12603] D restkit.object_mapping:RKObjectMapper.m:303 Found unmappable value at keyPath: VALUES
2012-11-20 15:40:36.527 eMobile[44849:12603] D restkit.object_mapping:RKObjectMapper.m:367 The following operations are in the queue: (
)
2012-11-20 15:40:36.527 eMobile[44849:12603] D restkit.object_mapping:RKObjectMapper.m:382 Finished performing object mapping. Results: {
    JSONDATA =     (
        "<EntityClass: 0x127da9e0> (entity: EntityClass; id: 0x127527d0 <x-coredata://E20EA003-1D5A-4B27-92DF-DFD8BE7074CB/EntityClass/p2> ; data: {\n    timestamp = \"2012-11-20T15:40:08Z\";\n    type = VCFUND;\n    values = \"<relationship fault: 0x12703200 'values'>\";\n})",
        "<EntityClass: 0x127da6b0> (entity: EntityClass; id: 0x12695dc0 <x-coredata://E20EA003-1D5A-4B27-92DF-DFD8BE7074CB/EntityClass/p1> ; data: {\n    timestamp = \"2012-11-20T15:40:08Z\";\n    type = SFAACCOUNT;\n    values = \"<relationship fault: 0x11efb910 'values'>\";\n})"
    );
}
2012-11-20 15:40:36.530 eMobile[44849:11603] (
    "<EntityClass: 0x126b7400> (entity: EntityClass; id: 0x127527d0 <x-coredata://E20EA003-1D5A-4B27-92DF-DFD8BE7074CB/EntityClass/p2> ; data: <fault>)",
    "<EntityClass: 0x127de030> (entity: EntityClass; id: 0x12695dc0 <x-coredata://E20EA003-1D5A-4B27-92DF-DFD8BE7074CB/EntityClass/p1> ; data: <fault>)"
) 
```

JSON 示例：

```
{
   "JSONDATA": [
       {
           "OBJECTCLASS": "VCFUND",
           "DESCRIPTION": {
               "VALUES": [
                   {
                       "DATA": [
                           {
                               "NAME": "Fund 1",
                               "VALUE": "Buyout Fund 1"
                           },
                           {
                               "NAME": "Fund 2",
                               "VALUE": "Buyout Fund 2"
                           },
                           {
                               "NAME": "Fund 3",
                               "VALUE": "Buyout Fund 3"
                           }
                       ],
                       "IQID": "059386B4D26249358C68E978D3C10C84"
                   }
               ]
           },
           "TIMESTAMP": "2012-11-17T22:03:55Z"
       },
       {
           "OBJECTCLASS": "PROPERTIES",
           "DESCRIPTION": {
               "VALUES": [
                   {
                       "DATA": [
                           {
                               "NAME": "Property 1",
                               "VALUE": "Buyout Property 1"
                           },
                           {
                               "NAME": "Property 2",
                               "VALUE": "Buyout Property 2"
                           },
                           {
                               "NAME": "Property 3",
                               "VALUE": "Buyout Property 3"
                           }
                       ],
                       "IQID": "456789087654678909876589098"
                   }
               ]
           },
           "TIMESTAMP": "2012-11-17T22:03:55Z"
       }
   ]
} 
```

这是我的映射：

```
objectManager.objectStore = [RKManagedObjectStore objectStoreWithStoreFilename:@"AppCD.sqlite"];

RKManagedObjectMapping* entityClassItemValueMapping = [RKManagedObjectMapping mappingForClass:[EntityClassItemValue class] inManagedObjectStore:[[RKObjectManager sharedManager] objectStore]];
entityClassItemValueMapping.primaryKeyAttribute = @"name";
[entityClassItemValueMapping mapKeyPath:@"NAME" toAttribute:@"name"];
[entityClassItemValueMapping mapKeyPath:@"VALUE" toAttribute:@"value"];

RKManagedObjectMapping* entityClassItemMapping = [RKManagedObjectMapping mappingForClass:[EntityClassItem class] inManagedObjectStore:[[RKObjectManager sharedManager] objectStore]];
entityClassItemMapping.primaryKeyAttribute = @"iqid";
[entityClassItemMapping mapKeyPath:@"IQID" toAttribute:@"iqid"];

RKManagedObjectMapping* entityClassMapping = [RKManagedObjectMapping mappingForClass:[EntityClass class] inManagedObjectStore:[[RKObjectManager sharedManager] objectStore]];
entityClassMapping.primaryKeyAttribute = @"type";
[entityClassMapping mapKeyPath:@"OBJECTCLASS" toAttribute:@"type"];
[entityClassMapping mapKeyPath:@"TIMESTAMP" toAttribute:@"timestamp"];

[entityClassMapping mapKeyPath:@"VALUES" toRelationship:@"values" withMapping:entityClassItemMapping];
[entityClassItemMapping mapKeyPath:@"DATA" toRelationship:@"entityClassItemValues" withMapping:entityClassItemValueMapping];

[[RKObjectManager sharedManager].mappingProvider setMapping:entityClassMapping forKeyPath:@"JSONDATA"];
[[RKObjectManager sharedManager].mappingProvider setMapping:entityClassItemMapping forKeyPath:@"VALUES"];
[[RKObjectManager sharedManager].mappingProvider setMapping:entityClassItemValueMapping forKeyPath:@"DATA"];

[[objectManager client] setValue:[cookies objectForKey:@"Cookie"] forHTTPHeaderField:@"Cookie"];
NSDictionary *params = [[NSDictionary alloc] initWithObjectsAndKeys:query, @"Targ", @"", @"Query", @"F285E67F2C8CEC9837B68", @"$SESSION", @"3A7037FA806156C4", @"VERSION", nil];
[objectManager loadObjectsAtResourcePath:URL_DATA usingBlock:^(RKObjectLoader *loader) {
    loader.method = RKRequestMethodPOST;
    loader.params = params;
    loader.mappingProvider = [RKObjectManager sharedManager].mappingProvider;
    loader.onDidLoadObjects = loadBlock;
    loader.onDidFailWithError = failBlock;
}]; 
```

我的 CoreData 模型是：

```
#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>

@class EntityClassItem;

@interface EntityClass : NSManagedObject

@property (nonatomic, retain) NSString * timestamp;
@property (nonatomic, retain) NSString * type;
@property (nonatomic, retain) NSSet *values;
@end

@interface EntityClass (CoreDataGeneratedAccessors)

- (void)addValuesObject:(EntityClassItem *)value;
- (void)removeValuesObject:(EntityClassItem *)value;
- (void)addValues:(NSSet *)values;
- (void)removeValues:(NSSet *)values;

#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>

@class EntityClassItem;

@interface EntityClass : NSManagedObject

@property (nonatomic, retain) NSString * timestamp;
@property (nonatomic, retain) NSString * type;
@property (nonatomic, retain) NSSet *values;
@end

@interface EntityClass (CoreDataGeneratedAccessors)

- (void)addValuesObject:(EntityClassItem *)value;
- (void)removeValuesObject:(EntityClassItem *)value;
- (void)addValues:(NSSet *)values;
- (void)removeValues:(NSSet *)values;

#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>

@class EntityClassItem;

@interface EntityClassItemValue : NSManagedObject

@property (nonatomic, retain) NSString * name;
@property (nonatomic, retain) NSString * value;
@property (nonatomic, retain) EntityClassItem *entityClassItem; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T15:53:50.580

经过大量调试和重新阅读文档后，我想通了。我对周围缺乏了解：

```
mapKeyPath:@"foo" toRelationship:@"bar" withMapping:fooBar]; 
```

正如文档明确指出的那样，mapKeyPath 必须与您要映射到的对象的属性以及 JSON 有效负载中的节点相匹配。我的有效载荷的情况不匹配，所以它失败了。

# oracle - 在 oracle 中连接 CLOB 数据

> ID：13477130
> 
> 赞同：4
> 
> 时间：2012-11-20T16:01:28.937
> 
> 标签：oracle, clob

我需要将各种 CLOB 数据连接到一个 CLOB 字段中。

我有一个包含各种行的数据库，每行都包含一些字符字段（例如 BATCH_ID）和一个 CLOB（BATCH_BODY）。我不确定如何连接 CLOB 以使所有内容都成为一行。

最终目标是将所有 BATCH_ID 相同的行组合成一个带有单个 CLOB 文件的行，该 CLOB 文件由各种 BATCH_BODY 组成

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T16:07:48.407

CONCAT 似乎适用于 CLOB：

[http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions026.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions026.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-13T19:25:43.940

要在不截断的情况下使用超过 32K 的 CLOB，我需要这样的代码：

```
--ALL_XML := ALL_XML || SINGLE_XML;
--The above crashed on Oracle 11g with text beyond 32K, so...
lobLength := DBMS_LOB.GETLENGTH(SINGLE_XML);
FOR i IN 0..100 LOOP
    offset := i * buffSize + 1;
    EXIT WHEN SINGLE_XML IS NULL OR lobLength < offset;
    -- fill the buffer with final data chunk to append to the lob
    buffer := DBMS_LOB.SUBSTR(SINGLE_XML, buffSize, offset);
    DBMS_LOB.APPEND(ALL_XML, TO_CLOB(buffer));
END LOOP; 
```

# asp.net - asp.net 重写 url 逻辑在本地工作，但在服务器上不工作给出 404 错误

> ID：13477135
> 
> 赞同：0
> 
> 时间：2012-11-20T16:01:44.993
> 
> 标签：asp.net, iis-7, url-rewriting, http-status-code-404

我们正在使用 Intelligencia UrlRewriter。所有 URL 重写逻辑在使用内置 Visual Studio 服务器的本地计算机上运行良好，但在实时服务器上失败。Live 服务器有 IIS 7 和 Windows server 2008 Enterprise。

所有重写的 url 都会出现 404 错误。如果我们使用正确的查询字符串请求 aspx 页面，它就可以工作。

我们需要做的任何特殊设置，检查？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T16:26:59.997

您需要为 IIS 设置配置 web.config 文件，例如：

```
 <system.webServer>
        <modules runAllManagedModulesForAllRequests=”true”&gt;
            <add name=”UrlRewriter” type=”Intelligencia.UrlRewriter.RewriterHttpModule” />
        </modules>
        <validation validateIntegratedModeConfiguration=”false” />
    </system.webServer> 
```

请将此代码块放在`<configuration>`部分下方的某处。

我希望这能回答你的问题。如果是，请标记为“已回答”。

# actionscript-3 - 如何内省 Flex 函数的签名？

> ID：13477143
> 
> 赞同：0
> 
> 时间：2012-11-20T16:02:07.850
> 
> 标签：actionscript-3, apache-flex

给定一个函数

```
function printAndAdd( s: String, a: int, b: int ) {
  // ...
} 
```

有没有办法在运行时枚举函数的参数（它们的名称和类型）？就像是

```
for ( var arg: ArgumentDescriptor in printAndAdd ) {
    // arg.type yields the class object of the argument, i.e. 'String' or 'int'.
    // arg.name yields the name of the argument, i.e. 's' or 'a'
} 
```

我有一个具有不同签名的事件处理程序列表，并且我得到了要调用的事件处理程序的名称以及`Array`对象的名称。我可以只是[`apply()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Function.html#apply%28%29)函数的数组，但我想先做一些错误检查以提供更好的错误消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T17:00:12.093

您可以使用[describeType()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/package.html#describeType%28%29)查找您要查找的信息。但是，要使其正常工作，该功能**必须**是`public`. 私有方法不会被`describeType()`.

假设`printAndAdd`是一个方法`MyClass`，你可以这样做：

```
var metadata:XML = describeType(MyClass);
//find all the 'parameter' nodes of any method called 'printAndAdd'
var params:XMLList = metadata..method.(@name == "printAndAdd").parameter;

for each (var param:XML in params) {
    var index:int = param.@index;
    var type:String = param.@type;
    var optional:Boolean = param.@optional == "true";
} 
```

您将无法找到的一件事是参数的名称，但我想它的索引可能足以满足您的目标。

如果您需要比这更强大的反射，请查看[as3commons 反射库](http://www.as3commons.org/as3-commons-reflect/index.html)。

# forms - 在 Excel 表单中显示下拉菜单中项目的属性

> ID：13477149
> 
> 赞同：1
> 
> 时间：2012-11-20T16:02:29.907
> 
> 标签：forms, excel, vba

有人可以帮我解决这个问题吗？我对 excel 和 VBA 环境比较陌生。我需要做的是创建一个带有选择某个键的下拉菜单的表单。假设我有以下两个电子表格选项卡 1：“猫”

```
类型 颜色 尺寸 重量
印花布白色 20 25
燕尾服黑色 15 16
哑橙 12 22
```

选项卡 2：“狗”

```
类型 颜色 尺寸 重量
圣伯纳德 cerulea 125 200
比格犬粉色 25 30
可爱的蓝色 45 50
```

我想在下拉菜单中有“类型”，假设选择了圣伯纳德。我希望使用该类型的颜色、大小和重量填充标签或单元格。

它本质上是一个搜索功能。任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T16:06:33.140

过滤器？选择表格，然后单击数据选项卡，然后单击过滤器 (Ctrl + L)。

# c++ - pthread_cancel 中的非法搜索

> ID：13477150
> 
> 赞同：0
> 
> 时间：2012-11-20T16:02:34.773
> 
> 标签：c++, linux, pthreads

我有一个程序试图通过已实现的池使用创建和取消。

创作如下：

```
int threadsNum=10;
while (created<threadsNum){
    pthread_t newThread;
    pthread_struct *st; //Open the thread that handle the deleting of the sessions timeout.
    st = (pthread_struct*)malloc(sizeof(pthread_struct));
    st->id = created;
    st->t = newThread;
    pthread_mutex_lock( &mutex_threadsPool );
    readingThreadsPool[created] = st;
    pthread_mutex_unlock( &mutex_threadsPool );
        if((threadRes1 = pthread_create( &newThread, NULL, pcapReadingThread, (void*)created)))
        {
        syslog(LOG_CRIT, "Creating Pcap-Reading Thread %d  failed.",created); 
                printf( "Creating Pcap-Reading Thread %d  failed.\n",created);
                exit(1);
        }
    syslog(LOG_INFO, "Created Pcap-Reading Thread %d Successfully.",created); 
    created++;
} 
```

后来我尝试取消它们并重新启动它们：

```
 pthread_t t;
pthread_struct* tstr;
int i;
pthread_mutex_unlock( &mutex_threadsPool );
//first go on array and kill all threads
for(i = 0; i<threadsNum ; i++ ){
    tstr = readingThreadsPool[i];
    if (tstr!=NULL){
        t = tstr->t;
        if (pthread_cancel(t)!=0){
            perror("ERROR : Could not kill thread");
        }
        else{
            printf("Killed Thread %d \n",i);
        }
    }
} 
```

到目前为止一切顺利，但唯一的问题是输出是错误：无法杀死线程：非法寻求被杀死的线程1

杀死线程 2

杀死线程 3

杀死线程 4

杀死线程 5

杀死线程 6

杀死线程 7

杀死线程 8

杀死线程 9

为什么它也不杀死 0 索引中的线程？

而且我找不到任何关于非法搜索的信息。

感谢您的帮助人们

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:05:13.850

问题是`newThread`在初始化之前正在使用它：

```
pthread_t newThread;
pthread_struct *st;
st = (pthread_struct*)malloc(sizeof(pthread_struct));
st->id = created;
st->t = newThread; 
```

但`newThread`直到成功调用`pthread_create()`. 似乎`newThread`变量在循环的后续迭代中保留其先前的值，这导致正确取消除最后一个线程之外的所有线程，因为它的 id 从未插入到`readingThreadsPool`数组中。

您需要`st->t`在调用 后填充成员`pthread_create()`。

就目前的代码而言，即使条目`readingThreadsPool`实际上还不是线程，也可以将条目插入到数组中。将插入逻辑放在调用之后`pthread_create()`：

```
if((threadRes1 =
        pthread_create(&(st->t), NULL, pcapReadingThread, (void*)created)))
{
    syslog(LOG_CRIT, "Creating Pcap-Reading Thread %d  failed.",created); 
    printf( "Creating Pcap-Reading Thread %d  failed.\n",created);
    exit(1);
}
pthread_mutex_lock( &mutex_threadsPool );
readingThreadsPool[created] = st;
pthread_mutex_unlock( &mutex_threadsPool ); 
```

或者如果`pcapReadingThread()`函数访问`readingThreadsPool`并期望自己有一个条目（我*认为*这可能是由于`created`被传递的情况），那么`pthread_create()`将`mutex_threadsPool`.

# c# - 如何自动添加到使用 C# EF Code First 创建的多对多表

> ID：13477157
> 
> 赞同：1
> 
> 时间：2012-11-20T16:02:49.183
> 
> 标签：c#, asp.net-mvc, entity-framework, ef-code-first

我在两个表之间创建了多对多关系

现在，每当我将数据添加到一个表时，由 DbContext 自动创建的表**MoviesHashTags**保持为空。

也许我不明白这两个表之间的联系，但是有没有一种特定的方法可以将数据添加到一个表中，并且它也会添加到 MoviesHashTags 表中？

**例子：**

我正在向 HashTags 表添加一个新的 HashTag： 当我调用**Add()**和**SaveChanges()时，此 HashTag 包含****电影 ID**假设将 HashTag Id 和电影 ID 添加到 MoviesHashTags 表。

 *******ATM 此 MoviesHashTags 表保持为空***

```
------------------------------------------------------------------------- 
```

**表电影：**

```
[DataContract]
public class Movie 
{
    [DataMember]
    public long Id { get; set; }
    *
    *
    *
    [DataMember]
    public ICollection<HashTag> HashTagsCollection { get; set; }

public Movie()
{
    HashTagsCollection = new HashSet<HashTag>();
} 
```

**表标签：**

```
[DataContract]
public class HashTag
{
    [DataMember]
    public long HashTagId { get; set; }
    *
    *
    *
    [DataMember]
    public ICollection<Movie> MoviesCollection { get; set; }

    public HashTag()
    {
        MoviesCollection = new HashSet<Movie>();
    } 
```

**数据库上下文：**

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Entity<Movie>().
    HasMany(c => c.HashTagsCollection).
    WithMany(p => p.MoviesCollection).
    Map(
        m =>
       {
        m.MapLeftKey("Id");
        m.MapRightKey("HashTagId");
        m.ToTable("MoviesHashTags");
        });
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T23:03:13.807

太糟糕了，您没有在添加`HashTag`. 但是一种应该起作用的方法是：

```
var tag = new HashTag { /* setting properties */ };
var movie = db.Movies.Find(movieId);
movie.HashTagsCollection.Add(tag);
db.SaveChanges(); 
```****

# java - 带有 ZK 的原生 javascript？

> ID：13477159
> 
> 赞同：0
> 
> 时间：2012-11-20T16:02:56.787
> 
> 标签：java, javascript, openlayers, zk

是否可以在 ZK 框架中使用本机 javascript。（我想集成 OpenLayers 库）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T02:12:10.733

是的，在 ZK 中使用纯 Javascript 非常容易。您可以使用 ZK 的客户端编程技术来集成任何 3rd 方 Javascript 库。请参考[ZK Client-side Programming](http://books.zkoss.org/wiki/Small_Talks/2010/April/Client_Side_Programming)和[Integrate 3rd party Javascript Libraries with ZK](http://books.zkoss.org/wiki/Small_Talks/2012/October/Integrate_3rd_Party_Javascript_Libraries_In_ZK)

针对 OpenLayers，ZK 团队已经将其集成为 ZK 组件。您可以参考这篇[ZK Openlayers Integration 博客文章](http://blog.zkoss.org/index.php/2012/07/03/zk-openlayers-integration/)了解使用方法和更多详细信息。不知道你是否知道，但 ZK 也有更成熟的[谷歌地图组件](http://books.zkoss.org/wiki/ZK_Developer%27s_Guide/ZUL_Components/Wrapped/Gmaps)，并且已经在生产中使用

# sql - 使用 SQL 根据用户输入在数据库中搜索子字符串

> ID：13477167
> 
> 赞同：2
> 
> 时间：2012-11-20T16:03:19.780
> 
> 标签：sql, vb.net, visual-studio-2010, string-matching, sql-like

我正在做一个 uni 项目，我需要使用 vb.net 中的 SQL 命令根据他们的 FirstName、SurName、EmailAddress 或 SkillSet 从 Visual Studio 2010 的数据库中搜索用户。

所以从一开始......用户注册并包含一个技能集，该技能集是他们在“Java”、“C#”等中键入的单个文本框。

如果用户拥有不止一项技能，我可以搜索除 SkillSet 之外的所有内容。

我想在 SQL 命令中使用“LIKE”搜索任何内容。

这是我目前用于搜索用户的内容：

**SQL命令选择我想要的细节**

```
Dim command As New SqlCommand("SELECT [FirstName], [SurName], [EmailAddress], [SkillSet], [UserID] FROM [Users] WHERE ([FirstName] = @FirstName OR [SurName] = @SurName OR [EmailAddress] = @EmailAddress OR [SkillSet] LIKE '%' @SkillSet '%')", connection) 
```

**创建参数**

```
 Dim firstnameParam As New SqlParameter("@FirstName", Me.UserSearchTextBox.Text)
    Dim surnameParam As New SqlParameter("@SurName", Me.UserSearchTextBox.Text)
    Dim emailParam As New SqlParameter("@EmailAddress", Me.UserSearchTextBox.Text)
    Dim skillSetParam As New SqlParameter("@SkillSet", Me.UserSearchTextBox.Text)

    command.Parameters.Add(firstnameParam)
    command.Parameters.Add(surnameParam)
    command.Parameters.Add(emailParam)
    command.Parameters.Add(skillSetParam)` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:15:52.683

而不是 LIKE 你想使用 IN

```
Dim command As New SqlCommand("SELECT [FirstName], [SurName], [EmailAddress], [SkillSet], [UserID] FROM [Users] WHERE ([FirstName] = @FirstName OR [SurName] = @SurName OR [EmailAddress] = @EmailAddress OR [SkillSet] IN (@SkillSet)", connection) 
```

SkillSet 需要以如下格式传递

```
'SQL','PHP','JAVA' 
```

我不太了解 Vb.net，无法建议将用户输入格式化为所需的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T16:12:37.887

一个非常快速的谷歌在这个网站上揭示了以下答案：

[在 SQL LIKE 子句中使用 SqlParameter 不起作用](https://stackoverflow.com/questions/665129/resolve-use-of-sqlparameter-in-sql-like-clause-not-working)

[如何？参数和LIKE语句SQL](https://stackoverflow.com/questions/251276/howto-parameters-and-like-statement-sql)

所以很简单，您需要使用`&`（就像您在 VB.NET 中一样 - 这将`+`在 C#.NET 中）将字符串`'%'`与参数连接起来，如下所示：

```
Dim command As New SqlCommand("SELECT [FirstName], [SurName], [EmailAddress], [SkillSet], [UserID] FROM [Users] WHERE ([FirstName] = @FirstName OR [SurName] = @SurName OR [EmailAddress] = @EmailAddress OR [SkillSet] LIKE '%' & @SkillSet & '%')", connection) 
```

或者

```
Dim skillSetParam As New SqlParameter("@SkillSet", "%" & Me.UserSearchTextBox.Text & "%") 
```

并`'%'`从查询中删除将产生相同的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T11:50:55.733

现在可以工作了。我错过了另一组括号。现在，如果用户只插入几个字符，我就可以检索结果。谢谢你们的帮助！！

```
Dim command As New SqlCommand("SELECT [FirstName], [SurName], [EmailAddress], [UserID], [SkillSet] FROM [Users] WHERE ([FirstName] = @FirstName OR [SurName] = @SurName OR [EmailAddress] = @EmailAddress OR [SkillSet] LIKE '%@SkillSet%' )", connection) 
```

# html - 如何让 HTML 页面占据完整高度？

> ID：13477169
> 
> 赞同：1
> 
> 时间：2012-11-20T16:03:24.707
> 
> 标签：html, css, footer

> **可能重复：**
> [如何使网页高度适合屏幕高度](https://stackoverflow.com/questions/11868474/how-to-make-the-web-page-height-to-fit-screen-height)

我有一个不占据整个屏幕的 HTML 页面。它只占用 HTML 内容的大小，并且页脚不在页面末尾（应该如此）

我该如何解决？

我只需要页脚位于页面的末尾。

我的 HTML 结构如下：

```
<body>
    <div id="app">
        <!-- Header -->
        <div id="header"></div>
        <!-- Hero container -->
        <div class="container">
            <!-- Sub container -->
            <div class="container"></div>
        </div>
        <!-- Footer -->
        <div id='footer'></div>
    </div>
</body> 
```

我的CSS如下：

```
html {
    height: 100%;
}

body {
    color: hsl(0, 0%, 33%);
    font-family: Helvetica, Arial, sans-serif;
    font-size: 13px;
    line-height: 1;
    background: none repeat scroll 0 0 hsl(0, 0%, 98%);
    margin: 0;
    padding: 0;
    height: 100%;
}

* {
    outline: 0 none;
}

#app {
    min-height: 100%;
    margin:auto;
    width: 100%;
}

div,span,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,a,big,cite,code,del,dfn,em,img,small,strike,strong,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tr,th,td,embed,menu,nav
    {
    border: 0 none;
    font: inherit;
    margin: 0;
    padding: 0;
    vertical-align: baseline;
}

.container {
    margin: 0 auto;
    position: relative;
    width: 990px;
}

#footer {
    margin: 100px 0 0;
} 
```

任何人都可以请指导我。我是 CSS 新手。:( 卡住了！ :(

## 编辑

可能是因为我在 body 中的一些 div 元素中有浮动吗？

## 编辑 2

奇怪的是，即使页面很长并且我向下滚动，在页脚之后还有这个永远不会消失的小条空白。当我尝试使用 Firebug 选择空白时，它会将我显示为元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T16:55:02.917

您可能需要稍微调整样式以考虑填充，但这在 Chrome 中显示出一些潜力（我现在远离 Windows 机器）。专门将“位置：相对”分配给容器，并将“最小高度：100％”分配给主体的技巧，否则它不起作用。

```
<html>
    <head>
        <style type="text/css">
           body {
              min-height: 100%;
              padding: 0;
              margin: 0;
           }

           #app {
              min-height: 100%;
              position: relative;
           }

           #footer {
              position: absolute;
              bottom: 0;
              background: red;
              height: 100px;
              width: 100%;
           }

        </style>
    </head>

    <body>
        <div id="app">
            <!-- Header -->
            <div id="header"></div>
            <!-- Hero container -->
            <div class="container">
                <!-- Sub container -->
                <div class="container"></div>
            </div>
            <!-- Footer -->
            <div id='footer'>Content</div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T16:25:34.623

一种方法是使用 Jquery 将应用程序 div 的最小高度设置为屏幕的高度，这意味着如果内容没有填满屏幕，它仍然会填满该高度。这样的事情可能会奏效：

$(文档).ready(函数() {

var screenHeight = $(document).height();

$('#app').css('min-height' , screenHeight);

});

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-11-20T16:05:24.090

如果您只想将页脚放在屏幕底部，则无需担心页面的高度：

```
#footer {
    position:absolute;
    bottom: 0;
} 
```

# c# - C# 抽象类重写方法

> ID：13477170
> 
> 赞同：0
> 
> 时间：2012-11-20T16:03:26.267
> 
> 标签：c#, overriding, virtual, abstract-class

**使用 C#.NET4.5 和 Visual Studio 2012 Ultimate。**

我目前正在尝试使用我的标签打印程序 Ive Used Interfaces 之前的抽象类。

我使用接口来解耦我的两个类，效果很好。

现在我尝试以下。

**第一个。**我的抽象类...

```
abstract class Label
{

    public virtual IList<Microsoft.Reporting.WinForms.ReportParameter> NewReportSetup(string part, string batch, string locn, string wheel, string gear, string length,
                                string fits, string newbar, string newbarnum, string abs)
    {
        IList<Microsoft.Reporting.WinForms.ReportParameter> parameters = new List<Microsoft.Reporting.WinForms.ReportParameter>();
        parameters.Add( new Microsoft.Reporting.WinForms.ReportParameter("paramPart", part));
        parameters.Add( new Microsoft.Reporting.WinForms.ReportParameter("paramBatch", batch));
        parameters.Add( new Microsoft.Reporting.WinForms.ReportParameter("paramLocn", locn));
        parameters.Add( new Microsoft.Reporting.WinForms.ReportParameter("paramWheel", wheel));
        parameters.Add( new Microsoft.Reporting.WinForms.ReportParameter("paramGear", gear));
        parameters.Add( new Microsoft.Reporting.WinForms.ReportParameter("paramLength", length));
        parameters.Add( new Microsoft.Reporting.WinForms.ReportParameter("paramABS", abs));

        parameters.Add( new Microsoft.Reporting.WinForms.ReportParameter("paramBuyer", fits));
        parameters.Add( new Microsoft.Reporting.WinForms.ReportParameter("paramBarCode", newbar));
        parameters.Add( new Microsoft.Reporting.WinForms.ReportParameter("paramBartxt", newbarnum));

        return parameters;
    }
} 
```

**第二。**我的 ReportShaft 继承标签...

```
class ReportShaft : Label
{
    public virtual IList<Microsoft.Reporting.WinForms.ReportParameter> NewReportSetup()
    {         
        return new List<Microsoft.Reporting.WinForms.ReportParameter>();
    }
} 
```

**第三。**我的表单实例化 ReportShaft 类并调用 NewReportSetup()...

```
private void NewReportSetupSHAFT()
{           
    if(txtABS.Text.ToString() == "" || txtABS.Text == null)
    {
        txtABS.Text = "N/A";
    }

    IList<Microsoft.Reporting.WinForms.ReportParameter> param = new List<Microsoft.Reporting.WinForms.ReportParameter>();

    param = reportshaft.NewReportSetup(txtNewPart.Text.ToString(),
        txtBatch.Text.ToString(), txtLocation.Text.ToString(), txtWheel.Text.ToString(), txtGear.Text.ToString(), txtLength.Text.ToString(),
        txtFits.Text.ToString(), txtNewBar.Text.ToString(), txtNewBarNum.Text.ToString(), txtABS.Text.ToString());

    reportViewer1.LocalReport.SetParameters(param);                        
} 
```

这很好用（虽然我觉得我以错误的方式使用抽象类，不确定）。

**我的问题是：**

我想创建一个新的报告类。我希望类调用**相同的方法**，但允许我**更改前 2 个**参数名称，并完全**跳过最后一个**。

现在这需要**覆盖**该方法吗？如果是这样，人们将如何做到这一点？Label 方法是否需要从**Virtual Function**更改？

非常感谢伙计们！

**更新::**当我提到参数时，好的似乎有些混乱。

我的意思是说我希望从我的抽象类中调用 1 方法，然后在我继承此标签类和方法的报告类中，我希望更改“报告参数”，我的意思是方法的主体。

这样做的原因是因为如果我简单地创建另一个方法并为每个不同的报告调用它，我将使用几乎相同的方法。

继承人的例子::改变这个..

```
parameters.Add( new Microsoft.Reporting.WinForms.ReportParameter("paramPart", part)); 
```

太这了。。

```
parameters.Add( new Microsoft.Reporting.WinForms.ReportParameter("paramchanged!!", part)); 
```

这是一个例子。所以从我收集到的信息中，我在我的报告类中覆盖了我的标签类方法。但是后来我卡住了，如果我尝试更改正文，我必须输入其余的代码。对我来说，我仍然会得到一堆看起来相同的方法。

无论如何都可以更改“方法主体的部分部分”而不必输入其余部分。

希望这能消除混乱。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T16:16:26.560

我不确定你在做什么是最好的方法。我会重构代码，以便`NewReportSetup`获取一个对象。然后，您可以让对象具有您可以访问的属性，如果没有设置它们，那么您就不要使用它们。然后，您可以创建一个[构建器](http://en.wikipedia.org/wiki/Builder_pattern)类。

```
 NewReportSetup(ReportProperties propertiesObject)
 {
      ...
 }

 public class ReportProperties
 {
     public String Part{get;set;}
     ...
 } 
```

然后，您可以创建使用/格式化`ReportProperties`实现指定的给定对象的子类

否则，更直接的答案是 Micah 的，它也有效。不同之处在于[Composition over Inheritance](http://en.wikipedia.org/wiki/Composition_over_inheritance)之一。继承有它的位置，但当组合是更好的方法时不应该过度使用

**为了您的更新**

这听起来像是您可以为更新做的事情（但是，该`ReportProperties`对象仍然可以工作......您也可以让它包含您的所有元数据）

你的抽象类：

```
public virtual void NewReportSetup(params)
{
    ...
    parameters.Add( new Microsoft.Reporting.WinForms.ReportParameter("paramBatch", batch));
    ...
    FinalizeParameters(parameters, paramsThatAreImplSpecific);
}

protected abstract void FinalizeParameters(List, paramsThatAreImplSpecific); 
```

您的具体实施：

```
protected override void FinalizeParameters(List, paramsThatAreImplSpecific)
{
    parameters.Add( new Microsoft.Reporting.WinForms.ReportParameter("paramPart or paramChanged", part));
} 
```

现在，您可以创建`FinalizeParameters`一个您覆盖的根实现，但您要小心打破[Liskov 的替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)。在我看来，您确实应该使用`ReportProperties`具有适当元数据的对象，无论是通过字典还是其他机制。但是，如果您不想采用任何其他方式，我会说通过抽象方法强制添加最终参数是您的最佳选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T16:16:09.880

您要[重载](http://msdn.microsoft.com/en-us/library/vstudio/ms229029%28v=vs.100%29.aspx)基类中的方法而不是[override](http://msdn.microsoft.com/en-us/library/ebca9ah3%28v=vs.80%29.aspx)。

覆盖更改功能，其中重载会更改签名。你可以这样做

```
class ReportShaft : Label
{
  public virtual IList<Microsoft.Reporting.WinForms.ReportParameter> NewReportSetup()
    {
   base.NewReportSetup("part", "batch", "locn", "wheel","gear", "length", "fits", "newbar",  "newbarnum", null)

}
} 
```

如果您使用很多相同的参数或有一个您经常调用的默认参数，这将很有帮助。另请注意，我正在调用 base ，它将调用基类方法而不是我正在使用的类中的方法

# objective-c - API 是否应该为 int 参数返回 NULL？+ 如何处理

> ID：13477176
> 
> 赞同：4
> 
> 时间：2012-11-20T16:03:36.157
> 
> 标签：objective-c, ios, api, rest

目前，我们的 API 正在返回`NULL`任何`int`没有值的参数。

例如，在我们的用户 api 中，我们的参数之一如下所示：

```
{
    ...
    "user_id":NULL
    ...
} 
```

我知道这不可能`0`，因为这可能是一个有效的响应，但是有一个`NULL`指针会导致各种问题，因为`int`s 不能是`NULL`指针。

我的想法是这些值应该完全被忽略 - 然后它们会返回看起来更合适`nil`的值（在目标 c 中，例如`[dictionary objectForKey:@"user_id"] == nil`），并且不检查空指针（这似乎是错误的，int 之间存在差异和一个指针）。

否则，一种解决方法是将其变成一个`NSNumber`需要指针的对象，因此可以是`NULL`. 然后我可以做类似的事情：

```
NSNumber *userID = [dictionary objectForKey:@"user_id"];
if(userID != [NSNull null]){
  // its not null
} 
```

但对我来说，这感觉根本上是错误的，`NSNumber`文档中说的是：

> 请注意，数字对象不一定保留创建它们的类型。

这也让我感到肮脏。

（再说一次，我正在`NSDecimalNumber`用字符串初始化 s ......所以我不知道为什么这会打扰我......）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T16:12:55.790

如果您的“API”预计会返回一个`int`，那么它不应该返回 NULL。就像您已经说过的那样，您可以使用`NSNumber`，在这种情况下您可以返回 NULL。在谈论时`int`，`NSNumber`不会丢失数据，只有在诸如无理数之类的情况下，不同的类型才重要。

所以简而言之，如果你想在某些情况下返回 NULL/nil，你必须使用对象类型 NOT `int`。如果您对 using 感觉更好`int`，那么唯一的方法是使用特殊的“无效”值，例如`-1`或`-INT_MAX`让用户知道该值无效。或者，如果这是一个选项，您可以抛出异常 - 或者只是添加另一种方法来检查是否可以给出有效的响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T16:06:36.650

如果 API 没有用户并且 user_id 是唯一返回的值，为什么不返回正文中没有任何内容的 404 状态代码。然后你只需检查状态码。有道理，404 == 资源不存在。利用 REST 并使用您的状态代码，不要返回具有 200 个状态代码的虚假资源。

但是，如果 user_id 只是返回的较大资源的一部分（例如与另一个资源的关系），那么如果没有为返回的资源设置 user_id，则 NULL 是完全合理的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T16:20:56.007

使用 API 调用的成功结果制作状态键怎么样？这就是我在创建 API 响应时经常做的事情。它可能只是一个布尔值，指示它是否有效，或者是一个整数，说明如果它没有成功则发生了什么错误。这样，如果 API 失败，您甚至不需要在此示例中触摸 user_id。

```
NSNumber *status= [dictionary objectForKey:@"status"];
if(status > 0){
    //succeed
}
else {
   //use status to indicate which error occured
} 
```

# javascript - Dygraphs 不会在 IE8 中绘制数据线

> ID：13477178
> 
> 赞同：0
> 
> 时间：2012-11-20T16:03:52.587
> 
> 标签：javascript, html, internet-explorer-8, excanvas, dygraphs

我最近为客户的网站升级了 Dygraphs 库，但它现在无法在 IE8 中正确呈现（是的，我知道你在想什么，但是客户的客户喜欢使用 IE 并且不会升级）。

我有以下标题（显然我没有为这篇文章放上真正的域名）：

```
<!DOCTYPE html> 
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=8" />
<meta http-equiv="Content-type" content="text/html; charset=UTF-8" />
<title>Live Data</title>
<link rel="stylesheet" href="http://mydomain.com/css/main.css" type="text/css" />
<link rel="stylesheet" href="http://mydomain.com/css/smoothness/jquery-ui-1.8.5.custom.css" type="text/css" />
<!--[if IE]>
   <script type="text/javascript" src="http://mydomain.com/js/excanvas.js"></script>
<![endif]-->
<script type="text/javascript" src="http://mydomain.com/js/dygraph-combined.js></script>
<script type='text/javascript' src='https://www.google.com/jsapi'></script>
<script type="text/javascript" src="http://mydomain.com/js/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="http://mydomain.com/js/jquery.jec-1.3.0.js"></script>
<script type="text/javascript" src="http://mydomain.com/js/jquery-ui-1.8.5.custom.min.js"></script>
<script type="text/javascript" src="http://mydomain.com/js/jquery.jeditable.mini.js"></script>
<script type="text/javascript" src="http://mydomain.com/includes/DataTables-1.7.4/media/js/jquery.dataTables.js"></script> 
```

控制台/调试面板中没有错误，当我将鼠标悬停在该行的位置时，图例显示在角落中，因为它应该是正确的数据。此外，轴标签和值显示正常。

什么可能导致图表上的数据线不显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T13:49:50.683

[在http://dygraphs.com/#ie](http://dygraphs.com/#ie)上对“X-UA-Compatible”标头有一个非常具体的建议。试试看：

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7; IE=EmulateIE9"> 
<!--[if IE]><script src="path/to/excanvas.js"></script><![endif]--> 
```

# php - 使用 PHP 从 DB 中自定义 HTML 值列表

> ID：13477179
> 
> 赞同：-2
> 
> 时间：2012-11-20T16:03:55.407
> 
> 标签：php, html, mysql

我想以非常简单的方式列出主题（标题、日期、作者等），如下所示：

```
 <a href="#">New Idea</a><label>date</label><br/>
    <label>author</label>
    <hr/> 
```

但是使用来自数据库的自己的数据。因此，每次在页面加载之前，它都会检查数据库中有多少主题，并根据这个数字生成上面的代码片段，其中包含来自数据库的数据。我想做到这一点，因为数据库中有主题，所以我多次循环这段代码，并通过`echo`PHP 中的命令生成这段代码。但我认为这不是最好的解决方案，所以我想问你。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T16:55:35.803

有很多方法可以做到这一点：一种，首先从数据库中检索所有数据，然后回显。以及您所说的，在检索数据的同时回显。如果一种方法比另一种更好，则取决于您的情况。

通常我按照你的说法工作：每个片段都是独立的（如 ajax 调用或 API 调用），因此每个片段都查询数据库并自行回显输出。

PS：您可以改进措辞....理解您的帖子很复杂。

# testing - Scrum 如何使用 TFS 2012 处理测试？

> ID：13477182
> 
> 赞同：6
> 
> 时间：2012-11-20T16:04:09.070
> 
> 标签：testing, tfs, scrum

我们第一次尝试使用 TFS 2012 在我们的公司上实施 scrum。到目前为止，这个过程做得不是很好，因为我们有一些问题，到目前为止还没有人能找到答案。

我们主要关心的是如何处理测试阶段。以下是或场景（就人员/工作而言）：

*   我们有6个程序员
*   我们有一个 scrum master
*   我们有 2 名测试人员（不是程序员）

这就是我们迄今为止所拥有的：

*   所有的愿望都进入董事会
*   我们召开了冲刺会议，在会议上我们将任务添加到这些愿望中
*   我们准备冲刺
*   人们开始做他们的工作

我们对完成的定义阐明了只有当故事交给测试人员并且其中一个人（在这种情况下，是我）说故事已经完成时，才能认为故事已经完成。到现在为止还挺好。

我们有一个测试服务器，所有测试都在其中执行，该服务器类似于生产服务器（Web 应用程序）。

正如我所说，主要关心的是如何处理测试：

*   由于所有开发人员都可以提交他们的代码（使用 SVN），他们应该何时提交？任务何时完成或积压项目何时完成？
*   什么时候应该发布测试版本？
*   测试应该什么时候开始？我们应该在完成任务后开始测试还是在完成积压项目后开始测试？当我们应该开始测试时，我们如何获得通知？
*   我们应该在每个积压项目上创建一个部署任务和一个测试任务吗？

你能帮忙的话，我会很高兴。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T06:14:22.993

*- 由于所有开发人员都可以提交他们的代码（使用 SVN），他们应该何时提交？任务何时完成或积压项目何时完成？*

**Ans**：我认为您应该在代码准备好后立即提交。如果您在用户故事下创建了任务并且任务涵盖了一些小型开发，您可以提交并关闭该任务。因此，同样明智的是，您有更小的任务来开发用户故事。完成所有任务后，用户故事（积压项目）就完成了。

要测试这些提交，您可以做的是拥有一个针对 CI 环境运行的自动化测试套件。所以你可以涵盖冒烟测试和回归测试。可以根据时间确定运行哪种类型的测试套件。例如，您可以每周运行回归测试套件，每晚运行烟雾测试套件。

*- 什么时候应该发布测试版本？- 什么时候开始测试？我们应该在完成任务后开始测试还是在完成积压项目后开始测试？当我们应该开始测试时，我们如何获得通知？*

**答：**不应该有严格的截止日期，例如发布测试版本。测试可以在用户故事发展的同时开始。测试人员如何提供帮助是测试人员可以对开发人员使用的代码进行“展示会话”并提供一些反馈。并在解决用户故事后开始功能测试（您可以在 tfs 中拥有此状态）。但请确保在 sprint 结束之前完成测试。

如果测试债务很高，您可以进行强化冲刺。

*- 我们应该在每个积压项目上创建一个部署任务和一个测试任务吗？*

**答：**是的，每个用户故事应该有两个不同的任务。一项任务涵盖功能测试（用户故事测试）。这对于估算和获得正确的团队速度很重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T08:01:34.830

在 Scrum 中处理测试的方式并没有特定于 TFS。事实上，**Scrum**处理测试并没有什么特别之处！你的团队已经同意一个故事（或待办事项）是*Done*，只有在它经过测试之后，Scrum“关心”的唯一事情就是你满足你*的 Done 定义*。

关于您的具体问题：

*   您应该尽早并经常提交您的更改。您提交的越多，您就越容易将更改传达给团队的其他成员，并且在发生灾难时（您搞砸了代码，或者您的硬盘驱动器出现故障） - 您就越容易恢复。根据我的经验，最好在您的代码足够**稳定**且足够**安全**以添加到存储库时提交。**至少**在您完成一项**任务**时应该这样做
***   您应该**尽早并经常**发布（在这里看到一个反复出现的主题？）。这意味着只要您的产品有一个有价值的增量，并且它足够**稳定**和**安全**，就可以暴露给您团队之外的利益相关者。在您的第一个版本之后，您应该能够在完成**积压项目**时执行此操作- 每个*[最小可行产品](http://en.wikipedia.org/wiki/Minimum_viable_product)*增量。*   **你应该尽早并经常**测试——你猜到了。这意味着，只要对您的产品所做的更改足以进行测试。对于**开发人员单元测试**，这意味着几乎每次添加场景（如果您正在进行测试驱动开发）。对于“QA”测试，应该尽早完成——只要**任务**完成，如果你能管理它。事实上，如果有必要，您可能希望重新考虑如何将积压项目分解为任务，以提高任务的可测试性。例如，如果您按**组件**或**代码层**分解任务，则不可能在整个故事代码完成之前测试代码。另一方面，如果您按***用例打破积压项目***或***场景***，您将能够在完成任务时进行测试 - 开发人员将更快地获得他们的反馈 - 在他们完成任务后立即！*   如果您需要部署每个积压项目（并且您确实这样做了），则应考虑所涉及的工作。如果每个部署都略有不同（一个故事可能需要发布到网络上，另一个故事可能意味着将应用程序上传到移动应用商店），以一种不平凡和不明显的方式，那么你应该有一个任务它，解释*如何*部署。但是，如果每个部署任务的标题看起来像“**部署**”并且估计值相同，那么您应该考虑***不要***浪费您的时间，只需在待办事项的工作流程中添加一个状态（例如：待办事项 --> 在进度 --> 测试 -->***部署***--> 完成）**

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T05:26:35.993

总的来说，Scrum 不会给你遵循的过程。它只提供了一个框架，您可以在其中凭经验试验您的流程，以找到最适合您的团队的方法。

> 由于所有开发人员都可以提交他们的代码（使用 SVN），他们应该何时提交？任务何时完成或积压项目何时完成？你能在不提交的情况下实现一个集成的、完成的增量吗？如果没有，请在有意义的时候提交。选择一个并谈论它的影响。当您批量处理所有更改直到积压项目“完成”时会发生什么？可以在不提交的情况下完成积压项目吗？
> 
> 什么时候应该发布测试版本？当产品负责人认为他们有足够的价值可以运送或有运送价值时。您在冲刺中创建的增量应该是可发布的。

也许你在问你能否在冲刺中发运。当然！将其视为在 Scrum 框架内执行的另一个经验实验。您可以尝试此实验并根据经验检查结果。

> 测试应该什么时候开始？我们应该在完成任务后开始测试还是在完成积压项目后开始测试？再次，选择一个并使用 Scrum 来检查影响。作为建议，不要等待太久。尝试让自己处于并行构建测试/测试用例的位置。在这些技能之间进行协作。
> 
> 当我们应该开始测试时，我们如何获得通知？您有 6 名开发团队成员。问对方。电子邮件，Skype，转过头，站起来走过去。也许您可以使用 Daily Scrum 作为[计划一天的地方](http://blog.appliedis.com/2012/10/09/daily-scrum-attack-the-day/)
> 
> 我们应该在每个积压项目上创建一个部署任务和一个测试任务吗？同样，有些团队这样做。如果这对您有帮助 a) 了解剩余的工作 b) 执行您的流程，然后尝试一下。也许“可通过 xyz 脚本部署”是正在制定的完成项目的新定义。**

# java - Java - 拖动绘制的对象

> ID：13477186
> 
> 赞同：1
> 
> 时间：2012-11-20T16:04:17.153
> 
> 标签：java, events, mouse, draw, drag

我有一个有五个按钮的应用程序：

i) 正方形 ii) 矩形 iii) 圆形 iv) 三角形 v) 透明

单击前四个按钮中的任何一个都将在绘图画布（即 JPanel）上绘制一个形状。

现在绘制的形状存储在一个名为**Shapes**的 ArrayList 中。现在，我想让用户单击任何形状并将其拖动到屏幕上。

这就是我的项目按类组织的方式：

i) 正方形 ii) 矩形 iii) 圆形 iv) 三角形 v) 绘图画布（用于绘制形状的 JPanel） vi) 应用程序（用于用户界面）

这是我到目前为止所做的：

第一种方法检查鼠标光标是否在绘制的形状内。第二种方法绘制正方形。

上面的鼠标事件处理程序应该在画布上拖动形状。但是，形状没有被拖动。请问我该如何解决这个问题？

**笔记**

当单击四个按钮中的任何一个时，形状被正确地添加到数组列表中。不起作用的是拖动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T16:20:37.770

你可以看看我几年前为这些任务编写的定制器框架：用鼠标移动和调整组件大小，并允许进一步定制。包括“对齐网格”功能！

它还支持使用[JXIconCustomizer](http://softsmithy.sourceforge.net/lib/current/docs/api/softsmithy-lib-core/org/softsmithy/lib/swing/JXIconCustomizer.html)和[ShapeIcon](http://softsmithy.sourceforge.net/lib/current/docs/api/softsmithy-lib-core/org/softsmithy/lib/swing/icon/ShapeIcon.html)移动形状。

也许你觉得它很有用。（它是开源的！）

我开始写教程（还在建设中！）：

[http://softsmithy.sourceforge.net/lib/docs/tutorial/swing/customizer/index.html](http://softsmithy.sourceforge.net/lib/docs/tutorial/swing/customizer/index.html)

要添加组件，请参见：

[http://softsmithy.sourceforge.net/lib/docs/api/org/softsmithy/lib/swing/CustomizerBar.html](http://softsmithy.sourceforge.net/lib/docs/api/org/softsmithy/lib/swing/CustomizerBar.html)

要自定义属性，请使用：

[http://softsmithy.sourceforge.net/lib/docs/api/org/softsmithy/lib/swing/JCustomizerPropertyTable.html](http://softsmithy.sourceforge.net/lib/docs/api/org/softsmithy/lib/swing/JCustomizerPropertyTable.html)

将其注册到 JCustomizerPane 的 SelectionManager 并设置 JCustomizer 对象的 CustomizableProperties 属性。

还可以查看 JCustomizer 的子类。

例如有

图像和形状的定制器：

[http://softsmithy.sourceforge.net/lib/docs/api/org/softsmithy/lib/swing/JXIconCustomizer.html](http://softsmithy.sourceforge.net/lib/docs/api/org/softsmithy/lib/swing/JXIconCustomizer.html)

带有内联编辑的标签定制器：

[http://softsmithy.sourceforge.net/lib/docs/api/org/softsmithy/lib/swing/JLabelCustomizer.html](http://softsmithy.sourceforge.net/lib/docs/api/org/softsmithy/lib/swing/JLabelCustomizer.html)

线路定制器：

[http://softsmithy.sourceforge.net/lib/docs/api/org/softsmithy/lib/swing/JLine2DCustomizer.html](http://softsmithy.sourceforge.net/lib/docs/api/org/softsmithy/lib/swing/JLine2DCustomizer.html)

并且有许多类提供对菜单和工具栏操作的支持。（包括对一些“Java Look and Feel Graphics Repository”操作的支持。）

查看 *.swing 和 *.swing.action 包。

只要问我你是否找不到他们。

主页：

[http://www.softsmithy.org](http://www.softsmithy.org)

下载：

[http://sourceforge.net/projects/softsmithy/files/softsmithy/](http://sourceforge.net/projects/softsmithy/files/softsmithy/)

马文：

```
<dependency>  
    <groupid>org.softsmithy.lib</groupid>  
    <artifactid>softsmithy-lib-core</artifactid>  
    <version>0.2</version>  
</dependency> 
```

接口：

[http://softsmithy.sourceforge.net/lib/docs/api/index.html](http://softsmithy.sourceforge.net/lib/docs/api/index.html)

# git - 使用 git 进行分支的正确方法

> ID：13477189
> 
> 赞同：1
> 
> 时间：2012-11-20T16:04:30.867
> 
> 标签：git, version-control, branching-and-merging

所以我在 master 上创建了一个名为 branch-a 的新分支，然后切换到它。我做了一些修改，切换回 master 以确保此后没有进行任何更改，但我看到我在 master 分支的 branch-a 中所做的所有修改。这是正确的吗？如果我在没有合并的情况下在分支 a 中制作了所有的 mod，我希望 master 不会有任何修改。这是我所做的：

从一个干净的、最新的 master 分支开始。

1.  git 分支 -b 分支 -a
2.  进行修改
3.  git结账大师
4.  状态
5.  我看到了我在 branch-a 中所做的所有修改

它是否正确？是因为我在切换到master之前没有提交branch-a吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T16:13:13.440

我想在 2\. 和 3\. 之间缺少一个步骤：

2a. 添加并提交更改：

```
git add -A
git commit -m "describe your changes" 
```

第一个命令将所有更改的文件添加到索引中，第二个命令提交索引内的所有内容。

现在您可以切换回`master`

编辑：签出分支更改将提交更改的存储库（并将工作目录中未更改的文件与分支的 HEAD 同步）。未提交的更改保留在工作目录中，添加的更改保留在索引中。除非您这么说，否则不会发生合并。如果这不能说明问题，请查看[本文的开头部分，以获得对 git 树的详细说明](http://git-scm.com/2011/07/11/reset.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T16:49:00.597

使用`git branch`将创建分支的操作​​与实际切换到它的操作分开。此外，您需要在更改存在于分支之前提交更改。

```
git branch -b branch-a 
```

这会创建一个名为 的分支`branch-a`，但不会将其签出，因此您仍在`master`. 如果你想工作`branch-a`，你需要在`git checkout branch-a`这里做一个，或者将上面的命令替换为`git checkout -b branch-a master`.

```
make modifications 
```

假设你在你想要的分支上，`git add <modified files>; git commit`此时实际上会在包含这些更改的分支上创建一个新的提交。

```
git checkout master 
```

你已经在主人身上了，所以这可能没什么用。`git`尝试不丢失未提交的更改，因此您的工作目录仍应与运行`git checkout`​​ .

```
git status 
```

应该报告您正在进行`master`并列出您所做的未提交的更改。

```
I see all the modifications that I made in branch-a 
```

您会看到您所做的所有修改，但您没有在`branch-a`.

# css - 溢出问题

> ID：13477190
> 
> 赞同：0
> 
> 时间：2012-11-20T16:04:35.640
> 
> 标签：css, html, scroll, overflow

我正在开发一个 HTML/CSS 网站，主要有 4 个 div（包装、顶部、菜单和内容），使用居中布局。

问题是我的#content 中的文本重叠，我不能强制它进入div。此外，当我在 div 上启用滚动并在 HTML 上禁用它时，滚动对 div 不起作用。所以我被重叠的内容困住了，没有向下滚动的选项。

所以，恢复它，我想使用 3 个固定的 div，居中，留下两个边边框，并希望我的背景图像不移动。只有内容应该在其中滚动。

这是我的 CSS 代码：

```
<style type=text/css>

html
{
    overflow: none;
}

head
{

}

body
{
    background-color: #030B12;
}

p
{
    font-family: verdana;
    font-size: 12px;
    color: #FFFFFF;
    text-align: left; 
}

h1
{
    margin-top: 25px;
    font-family: verdana;
    font-size: 16px;
    color: #FFFFFF;
    text-align: center;
}

bg2
{
    position: fixed;
    top: 0;
    left: 0;
}

#wrapper
{
    height: 100%;
    width: 70%; 
    margin: auto;
    background-image: url('bg2.jpg');
    background-position: fixed;
    background-repeat: no-repeat;
}

#top
{
    background-image:url('top.jpg');
    background-repeat: no-repeat;
    background-position: fixed;
    height: 15%;
    width: 100%;
    margin: auto;
}

#menu
{
    height: 60px;
    width: 100%;
    background-image: url('navi_bg.png');
}

#content
{
    overflow: auto;
    display: block;
}

ul
{
    list-style-type: none;
    height: 60px;
    width: 663px;
    margin: auto;
}

ul a
{
    background-image: url(navi_bg_divider.png);
    background-repeat: no-repeat;
    background-position: right;
    padding-right: 22px;
    padding-left: 16px;
    display: block;
    line-height: 60px;
    text-decoration: none;
    font-family: Georgia, "Times New Roman", Times, serif;
    font-size: 21px;
    color: #FFFFFF;
}

ul li
{
    list-style-type: none;
    float: left;

}

ul a:hover
{
    color: #3F5F7B;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T17:08:05.173

根据可用的内容，我创建了一个我认为您正在寻找的布局。让顶部 li 菜单项居中存在一些问题，但我相信你可以很容易地解决这个问题。如果您只想滚动该区域，则应指定内容区域的高度，并保持包装器的背景不变。

```
div#content{
max-height:300px;
overflow-y:scroll;
} 
```

[这是小提琴](http://jsfiddle.net/TNCodeMonkey/GKPAJ/)

# java - 有什么方法可以通过动态类实例化形式来简化这一点？

> ID：13477192
> 
> 赞同：3
> 
> 时间：2012-11-20T16:04:39.103
> 
> 标签：java, class

我有几个扩展父类的子类，被迫有一个统一的构造函数。我有一个队列，其中包含这些类的列表，它必须扩展 MergeHeuristic。我目前拥有的代码如下所示：

```
 Class<? extends MergeHeuristic> heuristicRequest = _heuristicQueue.pop();
    MergeHeuristic heuristic = null;    

    if(heuristicRequest == AdjacentMACs.class)
        heuristic = new AdjacentMACs(_parent);
    if(heuristicRequest == SimilarInterfaceNames.class)
        heuristic = new SimilarInterfaceNames(_parent);
    if(heuristicRequest == SameMAC.class)
        heuristic = new SameMAC(_parent); 
```

有什么方法可以简化动态实例化类，类似于：

```
heuristic = new heuristicRequest.somethingSpecial(); 
```

这将使 if 语句块变平。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T16:36:15.023

看起来您正在使用队列上的类作为一种标志来指示要实例化的请求类型。另一种不使用反射的方法是通过引入一个枚举来指示请求类型，使用工厂方法使这个标志行为显式：

```
public enum HeuristicType {

  AdjacentMACsHeuristic(AdjacentMACs.class) {
    @Override public MergeHeuristic newHeuristic(ParentClass parent) {
      return new AdjacentMACs(parent);
    }
  },
  SimilarInterfaceNamesHeuristic(SimilarInterfaceNames.class) {
    @Override public MergeHeuristic newHeuristic(ParentClass parent) {
      return new SimilarInterfaceNames(parent);
    }
  },
  ... // other types here.
  ;

  private final Class<? extends MergeHeuristic> heuristicClass;
  public Class<? extends MergeHeuristic> getHeuristicClass() {
    return heuristicClass;
  }

  abstract public MergeHeuristic newHeuristic(ParentClass parent);

  private HeuristicType(Class<? extends MergeHeuristic> klass) {
    this.heuristicClass = klass;
  }

} 
```

然后您的客户端代码变为：

```
Queue<HeuristicType> _heuristicQueue = ...
HeuristicType heuristicRequest = _heuristicQueue.pop();
MergeHeuristic heuristic = heuristicRequest.newHeuristic(_parent); 
```

与反射相比，使用枚举的主要优点是：

*   您明确说明了添加新启发式类型的要求，即必须有一个启发式类并且您必须能够基于父级实例化它。
*   您在系统中有一个点，您可以在其中查看所有可用的启发式类型。
*   通过将实例化抽象为工厂方法，您可以使用替代构造函数签名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T16:16:18.347

您可以使用反射，但它不会使代码更漂亮。

```
try {
    Constructor<? extends MergeHeuristic> heuristicConstructor = 
            heuristicRequest.getConstructor(_parent.getClass());
    heuristic = heuristicConstructor.newInstance(_parent);
} catch (Exception ex) {
    // TODO Handle this
} 
```

仅当您计划开设很多不同的课程时才这样做。如果它只有 3 个，请不要打扰，您的代码就可以了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T16:13:30.450

不幸的是，您不能强制一个类具有特定的构造函数或静态方法——两者在您的情况下都非常有用。

由于所有构造函数都采用相同的参数，因此还有另一种使用动态类实例化来简化代码的方法：

```
Constructor c = heuristicRequest.getConstructor(ParentClass.class).
heuristic = c.newInstance(_parent); 
```

请注意，您的代码不包含 _parent 的类类型 - 在我命名的代码示例中`ParentClass.class`- 您必须使其适应您的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T16:16:44.100

是`Class.forName(heuristicRequest.getName())`一种选择吗？

然后`constructor heuristicRequestClass.getDeclaredConstructor(_parent.getClass());`

最后的`heuristic = constructor.newInstance(_parent);`

# facebook - 使用 HootSuite Engagement-API 预览企业网站中的社交网络消息

> ID：13477195
> 
> 赞同：1
> 
> 时间：2012-11-20T16:04:47.320
> 
> 标签：facebook, oauth, social-networking

我们需要一种方法来为我们的客户公司网站提供他们的社交网络活动列表。

这意味着该网站应该显示一个列表以预览/链接到我们客户的 Facebook 粉丝页面或推特推文中的一些最新帖子/消息。

所以我认为这是一个创建 HootSuite-Account [http://hootsuite.com/](http://hootsuite.com/)的机会，做所有相关的帖子，由他们的界面集中，然后使用他们的 Engagement-Api 请求公司网站的 HootSuite-Backend .

由于身份验证，我不确定我们是否可以使用 EngagementAPI 做到这一点。网站的每个访问者都应该能够查看所有帖子/消息，而无需通过登录进行连接或验证。

这是否可能没有任何令牌，或者网站可以使用类似应用程序令牌的东西。

欢迎对该主题的任何经验？

# wpf - 如何在 wpf mvvm 模式中为应用程序创建连接栏

> ID：13477202
> 
> 赞同：0
> 
> 时间：2012-11-20T16:05:13.343
> 
> 标签：wpf, connection

我们需要创建一个在标题栏上有一个 pin 按钮的应用程序。如果单击该应用程序，则该应用程序应隐藏在桌面顶部，就像远程桌面应用程序中的连接栏一样。有人可以告诉我该怎么做...只是搜索了 1 周但仍然找不到。连接栏示例

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:13:50.243

您是否需要将 pin 按钮放在边框中，例如关闭和最小化按钮，或者只是作为应用程序的一部分？如果它只是您应用程序的一部分，那么这样的事情应该可以工作：

```
this.WindowStyle = WindowStyle.None;
this.WindowState = WindowState.Maximized; 
```

只需根据按钮单击进行切换，然后在应用顶部添加一个“不可见”按钮，鼠标悬停时会显示一个下拉菜单。

# php - 谷歌日历错误处理

> ID：13477207
> 
> 赞同：0
> 
> 时间：2012-11-20T16:05:28.977
> 
> 标签：php, google-calendar-api

我正在使用谷歌日历 api 的 V3 与基于 php 的应用程序中的日历同步。

我使用此代码删除谷歌日历上的事件。

```
$delJson = json_decode($service->events->delete('primary', $gcal_id), true); 
```

如果找到 google 日历 id，一切都会顺利进行。但是，如果在 $gcal_id 和实际谷歌日历 ID 之间没有找到匹配项，则整个过程将停止并显示一个空白页。

至少，我希望该过程继续进行，而不会完全停止。我想代码在逻辑上会是这样的，但我找不到任何文档。

```
$delJson = json_decode($service->events->delete('primary', $gcal_id), true);

if ($response == error) { continue } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-08T14:46:31.597

我很惊讶这里没有回答这个问题，或者其他任何地方都没有回答；我有同样的问题，看到它被问了很多次，但没有太多帮助。

V3 PHP api 使用异常，您需要处理的异常可能与 update() 相同，使用类似于以下的 Google_Service_Exception：

```
try {
    $cal->events->update($this->calName,$e,$event);
} catch (Google_Service_Exception $e ) {
    echo "Caught Google_Service_Exception:";
    print_r($e);
} 
```

请注意，如果您有获取更新，则需要围绕获取和更新进行尝试。API 中还有其他几种异常类型，如果不加以处理，这些异常类型可能也会对您网站的访问者造成丑陋。Google_Auth_Exception、Google_IO_Exception、Google_Cache_Exception。因此，除非您已经研究了特定情况以确保您处理各种可能的错误，否则最好只在 google API 代码周围放置一个通用异常捕获器。

# c++ - windows phone 8 和 ATL

> ID：13477209
> 
> 赞同：2
> 
> 时间：2012-11-20T16:05:35.947
> 
> 标签：c++, com, atl, windows-phone-8

我对 WP8 开发有点陌生，我必须重用庞大的遗留代码库（C++、ATL、WIN32）。是否有对 Windows Phone 8 的 ATL 支持？要不然是啥？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:18:33.620

Windows Phone 8 支持 C++ 和一些 Win32。支持一些 COM 功能（因为 WinRT 在后台使用 COM），但我知道没有 ATL 支持。您还可以使用 C++ 中的一些 WinRT 函数。

您可能必须使用 C# XAML UI 层（或 C++ DirectX，如果需要），带有 WinRT 桥接层到您的 C++ 代码，需要针对 Windows Phone 8 头文件和库进行编译。

有关详细信息，请参阅[MSDN Windows Phone 8 API 参考](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff626516%28v=vs.105%29.aspx)。

# powershell - 格式化 Powershell 列表查询

> ID：13477211
> 
> 赞同：0
> 
> 时间：2012-11-20T16:05:41.380
> 
> 标签：powershell

我正在使用 caml 查询检索列表项：

```
$list = $web.Lists["My List"]
$items = $list.GetItems($query) 
```

我需要以可读的格式输出这些数据，比如表格。当我使用：

```
$items | Format-Table 
```

我得到一张使用我不知道是什么构建的表。它绝对不是列表项。这是输出：

```
ListItems                                           Parent List
---------                                           -----------
{Title of List Item 1, Title of List Item 2, ...}   My List
{Title of List Item 1, Title of List Item 2, ...}   My List
{Title of List Item 1, Title of List Item 2, ...}   My List 
```

如果我使用 foreach 循环输出 items 中的每个项目，我会得到正确的数据，但我无法将其格式化为表格。这是我的做法：

```
foreach($item in $items) {
  Write-Host $item["Title"] ---- $item["Author"] ---- $item["Category"]
} 
```

哪个输出：

```
Test Title 1 ---- Hemingway ---- Best Seller
The Title of Number 2 ---- Stein ---- Horror
Three ---- Shakespeare ---- Tragedy 
```

不太可读。如何访问方法 1 中的正确数据，或将方法 2 格式化为表格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T19:52:15.237

为每个项目创建一个自定义表并将其通过管道传输到`Format-Table`：

```
$items | Foreach-Object{
  New-Object PSObject -Property @{
    Title = $_["Title"]
    Author = $_["Author"]
    Category = $_["Category"]
  }
} | Format-Table 
```

# iphone - VerificationController 无法识别的选择器 iOS 5.0.1

> ID：13477215
> 
> 赞同：2
> 
> 时间：2012-11-20T16:05:56.013
> 
> 标签：iphone, ios5, in-app-purchase

我刚刚在我的 iOS 应用程序中添加了应用程序内购买，我的一些用户正在崩溃

```
-[__NSCFString objectForKey:]: unrecognized selector sent to instance 0xf0a6f10 
```

从 BugSense 获得，内存位置指的是这段摘自 Apple 的 VerificationController.m 的最后一行

```
- (BOOL)isTransactionAndItsReceiptValid:(SKPaymentTransaction *)transaction
{
    if (!(transaction && transaction.transactionReceipt && [transaction.transactionReceipt length] > 0))
    {
        // Transaction is not valid.
        return NO;
    }

    // Pull the purchase-info out of the transaction receipt, decode it, and save it for later so
    // it can be cross checked with the verifyReceipt.
    NSDictionary *receiptDict       = [self dictionaryFromPlistData:transaction.transactionReceipt];
    NSString *transactionPurchaseInfo = [receiptDict objectForKey:@"purchase-info"];
... 
```

这个代码生成receiptDict（也包含在VerificationController.m中）

```
- (NSDictionary *)dictionaryFromPlistData:(NSData *)data
{
    NSError *error;
    NSDictionary *dictionaryParsed = [NSPropertyListSerialization propertyListWithData:data
                                                                           options:NSPropertyListImmutable
                                                                            format:nil
                                                                             error:&error];
    if (!dictionaryParsed)
    {
        if (error)
        {
#warning Handle the error here.
        }
        return nil;
    }
    return dictionaryParsed;
} 
```

它应该返回一个 NSDictionary 或 nil。

ARC 已打开。这个问题似乎只发生在 iOS 5.0.1 用户身上。虽然我确实对 VerificationController.m 进行了必要的更改，但这部分没有受到影响。我似乎无法在运行 iOS 5.1.1 的 iPad 上重现该问题，但用户表示即使重新安装应用程序后它仍然存在。如果有人能看到我做错的简单事情，我将不胜感激。

**编辑** 跟进问题。什么时候是什么意思

```
- (BOOL)isTransactionAndItsReceiptValid:(SKPaymentTransaction *)transaction

transaction.transactionReceipt 
```

只提供一个 NSString 并且可以安全地忽略吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:41:26.670

在我看来

```
 propertyListWithData:data options:NSPropertyListImmutableformat:nil error:&error]; 
```

返回一个字符串而不是字典，但它似乎不合逻辑。你确定问题来自这个吗？

# css - 在 chrome 和 firefox 中，vertical-align 和 inline-block 的行为令人讨厌

> ID：13477219
> 
> 赞同：4
> 
> 时间：2012-11-20T16:06:02.233
> 
> 标签：css, firefox, google-chrome, cross-browser

我目前正在尝试解决一个问题，但我似乎无法理解它。

在导航的无序列表中，我想在伪类之前通过 css 在每个列表项之前添加一个图标。

```
<ul class="list">
    <li class="list-item"><a href="#">one</a></li>
    <li class="list-item"><a href="#">two</a></li>
    <li class="list-item"><a href="#">three</a></li>
    <li class="list-item"><a href="#">four</a></li>
</ul>​ 
```

我的第一个想法是给两个元素（图标和 a-tag）显示：内联块并将图标与垂直对齐：中间对齐。只需稍作调整（margin-bottom），这在 chrome 中效果很好：

```
.list-item {
    display: block;
    font-weight: bold;
    text-transform: uppercase;
    margin: 10px 0;
    padding-bottom: 10px;
    border-bottom: 1px solid #F3F3F3;
    height:1.5em;
    overflow:hidden;
}

.list-item:before {
    display: inline-block;
    content: '';
    vertical-align: middle;
    background-color: red;
    width: 5px;
    height: 7px;
    margin: 0 4px 0.125em 5px;
}

.list-item a {
    display: inline-block;
    overflow: hidden;
    line-height: 1.5;
    height:1.5em;
} 
```

但是，当您在 Firefox 中加载页面时，该图标位于底部。[http://jsfiddle.net/pUhPB/4/](http://jsfiddle.net/pUhPB/4/)

我尝试了在我看来显示、垂直对齐和边距值的所有可能组合，以便在两个浏览器中都正确，最后，如果我给出 a-tag vertical-align:middle 和图标 vertical-align:baseline ，它似乎工作：

```
.list-item {
    display: block;
    font-weight: bold;
    text-transform: uppercase;
    margin: 10px 0;
    padding-bottom: 10px;
    border-bottom: 1px solid #F3F3F3;
    height:1.5em;
    overflow:hidden;
}

.list-item:before {
    display: inline-block;
    content: '';
    vertical-align: baseline;
    background-color: red;
    width: 5px;
    height: 7px;
    margin: 0 4px 0 5px;
}

.list-item a {
    display: inline-block;
    vertical-align:middle;
    overflow: hidden;
    line-height: 1.5;
    height:1.5em;
} 
```

[http://jsfiddle.net/L3N3f/](http://jsfiddle.net/L3N3f/)

但我就是不明白。为什么第一个版本不起作用？对我来说，这似乎比实际工作的版本更合乎逻辑。两种浏览器中的哪一种没有以正确的方式呈现元素？

我已经找到了一个似乎对我有用的解决方案，所以这不是一个非常紧迫的问题，但是我不明白我的问题的核心（和解决方案）让我很烦恼，所以如果有人可以，我会非常感激启发我。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T16:33:13.563

根据网络标准，只有内联元素可以“垂直对齐”，尽管某些浏览器，如 chrome，仍然对齐它们。请注意，对齐的是元素而不是其内容！因此，如果您将其应用于 a `<span>`，`<span>`则与周围的文本对齐，而不是其中的任何内容。

```
ispo lorem <span> text </span> due carpe diem 
```

添加`span {vertical-align:top; border: 1px solid black}`使`<span> text </span>`（整个盒子）变得高于文本的其余部分，而不是将其推`text`到盒子的天花板上`<span>`。

这里的核心问题是 Firefox 在 Web 标准方面非常直白，而 Chrome 添加了一些像这样的隐式功能。

[更多详情请点击这里。](http://phrogz.net/CSS/vertical-align/index.html "更多详情请点击这里。")

编辑：显然，如果你`vertical-align:top`只使用`<a>`它也可以。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-22T08:04:26.867

您的问题是每个规范设置`overflow:hidden`会更改内联块的基线位置。Firefox 实现了规范所说的内容。铬没有。

因此，只要您`.list-item a`的基线对齐，它将在两个浏览器中呈现不同。使渲染相同的唯一方法是确保您不会将任何内联块与不可见溢出进行基线对齐，这是您的第二个代码粘贴所做的（它`vertical-align: middle`在内联块上使用）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T16:44:09.760

试试这个：http: [//jsfiddle.net/pUhPB/6/](http://jsfiddle.net/pUhPB/6/)

在这些情况下，我做的第一件事是在两个浏览器中打开代码。然后我开始删除 CSS 代码，直到我发现问题。删除边距和垂直对齐，两种浏览器都以不同的方式呈现代码。所以我一直在删除代码，直到它们都相同。一旦它们在两个浏览器中都相同，我就改变了我能达到的效果。

这是新的 CSS：

```
.list-item:before 
{
    content: '';
    background-color: red;
    width: 5px;
    height: 7px;
    margin: 5px 4px 0 5px;
    float:left;
} 
```

# java - 如何创建深层表/列表并从中插入/读取数据

> ID：13477223
> 
> 赞同：0
> 
> 时间：2012-11-20T16:06:11.873
> 
> 标签：java

我想在 Java 中创建一个表/列表，我想知道处理它的最佳方法是什么。该表应具有如下结构：

```
Term     propertyList         entitiesList 

a1      p1=1, p2=2, p3=2          T1,T2  
a2      p5=0, p4=5 ,p3=3          T2,T1 
a3      p1=1 ,p4=3, p3=9          T3,T1,T2
...
a10 
```

我有一个包含 10 个术语的列表，每个术语都有一个属性列表（**带有 key 和 value 的深度**），属性可以在一个或多个实体中。

我需要一些关于如何创建它的帮助，例如我应该使用列表、映射、集合等。如何在代码中将硬编码值作为文字添加到它们，以及从中读取数据的最佳方式是什么，考虑到性能，考虑到稍后我需要对每个实体使用它并找到参与每个术语的相关属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T16:11:22.830

看起来您可以具有以下结构：

```
class Term {
    String id;
    Map<String, String> properties;
    List<Entity> entities; // (or Set<Entity> if no duplicates are allowed)
} 
```

但是，您所说的“深”和“属性可以在一个或多个实体中”的含义还不是很清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T16:14:11.300

首先创建`Term`类。

所以你有条款列表：`List<Term>`

**学期类**

```
public class Term {
   private String mName = "";
   private Map<String, Integer> mPropertyMap = new LinkedHashMap<String, Integer>();
   private List<String> mEntitiesList = new ArrayList<String>();

   public Term(String name) {
       mName = name;
   }

   public void generate(Map<String, Integer> propertyMap,   List<String> entitiesList) {
    mPropertyMap = propertyMap;
    mEntitiesList = entitiesList;
   }

  public Map<String, Integer> getPropertyMap() {
    return mPropertyMap;
}

public void setPropertyMap(Map<String, Integer> propertyMap) {
    this.mPropertyMap = propertyMap;
}

public List<String> getEntitiesList() {
    return mEntitiesList;
}

public void setEntitiesList(List<String> entitiesList) {
    this.mEntitiesList = entitiesList;
}

public String getName() {
    return mName;
}

public void setmName(String name) {
    this.mName = name;
}

} 
```

**主班**

```
 public class MyClass {

private List<Term> mTermList = null;

private void init() {
    mTermList = new ArrayList<Term>();
}

private void addSomeTerm() {
     Map<String, Integer> propertyMap = new LinkedHashMap<String, Integer>();

     propertyMap.put("p1", 1);
     propertyMap.put("p2", 2);
     propertyMap.put("p3", 3);

     List<String> entitiesList = new ArrayList<String>();
     entitiesList.add("T1");
     entitiesList.add("T2");

     Term term = new Term("a1");
     term.generate(propertyMap, entitiesList);

     mTermList.add(term);
}

private String printTerms() {

    StringBuilder buff = new StringBuilder();

    for(Term currTerm : mTermList){

        buff.append(currTerm.getName()).append("     ");

        Map<String, Integer> propertyMap = currTerm.getPropertyMap();

        Set<String> sets = propertyMap.keySet();

        Iterator<String> itr = sets.iterator();

        String key = null;
        Integer value = null;

        while(itr.hasNext()){

            key = itr.next();               
            value = propertyMap.get(key);

            buff.append(key + "=" + value).append(",");
        }

        buff.setLength(buff.length()-1); // remove last ','

        buff.append("     ");

        List<String> entitiesList = currTerm.getEntitiesList();

        for(String str : entitiesList){
            buff.append(str).append(",");
        }

        buff.setLength(buff.length()-1); // remove last ','         

    }

    return buff.toString();
}

/**
 * @param args
 */
public static void main(String[] args) {

    MyClass m = new MyClass();
    m.init();

    m.addSomeTerm();

    System.out.println(m.printTerms());
} 
```

}

输出：

```
 a1     p1=1,p2=2,p3=3     T1,T2 
```

# c# - 通过在控件上单击拖动来移动窗口

> ID：13477228
> 
> 赞同：6
> 
> 时间：2012-11-20T16:06:30.350
> 
> 标签：c#, windows, winforms

我有一个 WinForms 项目。我的窗口顶部有一个面板。我希望该面板能够在用户单击它然后拖动时移动窗口。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-20T16:28:44.893

将以下声明添加到您的课程中：

```
public const int WM_NCLBUTTONDOWN = 0xA1;
public const int HTCAPTION = 0x2;

[DllImport("User32.dll")]
public static extern bool ReleaseCapture();

[DllImport("User32.dll")]
public static extern int SendMessage(IntPtr hWnd, int Msg, int wParam, int lParam); 
```

将其放入您的小组`MouseDown`活动中：

```
private void panel1_MouseDown(object sender, MouseEventArgs e)
{
    if (e.Button == MouseButtons.Left)
    {
        ReleaseCapture();
        SendMessage(Handle, WM_NCLBUTTONDOWN, HTCAPTION, 0);
    }
} 
```

# shell - shell脚本中的动态查找

> ID：13477233
> 
> 赞同：1
> 
> 时间：2012-11-20T16:06:38.403
> 
> 标签：shell, unix

这是我正在解决的问题

我在不同的目录中有一堆文件，它们都在一个根目录中。我已经扫描了所有这些文件夹并选择了其中的文件，避免了一些特定的子目录。我必须避免的这些文件夹将来自配置文件。为此，我准备了这个 find 命令（在一些帮助下）

```
find ${ROOT}/au* -type f -not \( -path '*auction123/incoming*' -o -path '*autobase/incoming*'* \) 
```

这里的 ROOT 也将来自配置文件。我也可以为此提供一个占位符吗

```
-path '*auction123/incoming*' -o -path '*autobase/incoming*'* 
```

这样我就可以添加任意数量的文件夹，这些文件夹必须在查找中被忽略。我在一些地方读到 grep 是一个更好的选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T16:23:08.530

你可以做：

```
find ${ROOT}/au* -type f | grep -v -f files_containing_list_of_ignore_directories 
```

where`files_containing_list_of_ignore_directories`将您希望忽略的每个目录放在单独的行上（不带通配符`*`）。

（这`files_containing_list_of_ignore_directories`应该是这样的：）

```
auction123/incoming
autobase/incoming
... 
```

**解释：**

*   `find ${ROOT}/au* -type f``au*`: 递归查找任何目录下的所有文件`${ROOT}`
*   `|`是 shell 中的管道运算符：它的意思是“`stdout`从上一个命令（在本例中为`find`）获取任何输出并将该输出提供给`stdin`下一个命令（在本例中为`grep`）
*   `grep`: 调用 grep，一个用于搜索的工具
*   `-v`: 使用 的`--invert-match`选项`grep`。基本上它意味着“过滤掉”任何匹配的东西。
*   `-f files_containing_list_of_ignore_directories`：提供一个文件，其中包含您希望 grep 匹配的模式列表（并在这种情况下过滤掉）。

# oauth-2.0 - 使用 oAuth 登录移动应用程序和 Web 应用程序

> ID：13477234
> 
> 赞同：2
> 
> 时间：2012-11-20T16:06:38.680
> 
> 标签：oauth-2.0

我们有一个 SSO 系统，供我们的 Web 应用程序使用，我们还计划编写一些新的移动/桌面应用程序。我一直在阅读有关使用 oAuth 2.0 的信息，因此用户可以使用应用程序（使用密码授予类型）本机登录，检索访问令牌并使用 REST Web 服务访问功能。问题是应用程序中的所有功能都不可用，在某些情况下，我们必须通过浏览器将用户重定向到 Web 应用程序。我已经读过我们不应该在 URL 中传递访问令牌，所以无论如何都可以使用 oAuth 自动登录到 Web 应用程序，而无需用户再次提交他们的用户名和密码？

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-08-30T14:07:53.737

在移动应用程序中，您可以创建一个 nonce（一个只能使用一次的令牌）。然后，在打开网页链接时将其添加到 URL。这个令牌应该有某种标识符。为该页面提供服务的 Web 应用程序应跟踪这些 ID，以确保它不会被多次发送（因此，使其成为 nonce）。这将独立于基于 OAuth 的身份验证。因此，请求可能如下所示：

```
GET /anything?nonce=eyJhbGciOiJSUzI1NiJ9.eyJqdGkiOiI5N1Y2ZU9WWlo1VGpPR3dWIiwiY2xpZW50X2lkIjoibXktZ29vZC1tb2JpbGUtYXBwLTIyIiwiYXVkIjoiaHR0cHM6Ly9leGFtcGxlLm9yZy9wYWdlLXRoYXQtaXMtbm90LWluLW15LW1vYmlsZS1hcHAiLCJleHAiOjE1OTg3NTI0NDB9.JoDstXRnC23PE8ZCqk-U-IzSNp_cUYa12HbajI1KGlF-OwRR46QRC_V7brcGOVdo5_Aw1RdpssNWCVFiGDeTBc8wi1lIJW-rgEGH5J1qUi8rL1T-yfy3vdLGPYzJMtHvCeyoEjgmoYOtZcpPSQScBJSRvId3Hdu3QgwcelSwljkeNJbZRCnG25HIqJfC1Cjm9vqHhvUGqtzbgVBUPnICiI8EZyGe3SpH2P4SxctLcgzWad8zJeyPFki3yfBHpqQ3mBWy0BbVdjzgD0mj323q1LWHR4kNkrH7cUJgAg4PlWahOW7Q4qcT3CBJYNtlh008ARqK7XagEQKX45vv5TfSlk2q7Zy06RnV2XwZXfLpyh-ZfURpcsxEJ3O-4NY71XxEqUtEyuisjQdZx5m95uzSrzk75F-ruQ3KYIouiAOAUDuMtFwhwjF68VdDeC4Zwt2q3BHzMBBp-8k1bAXq8e4dmHz0Jbuo9R8MJ2zSrVK6is5nNtNoJvYoXgc0WTA8MFqBj316cT_ouu-U1nTL3GR5sJ_lxorhP6xz0CqNxNY_90-JwOUB0UibUryRiXt-SUPJga36pBQ8eO8--Xupx_WU7CDIFdFvnLgJahD-4KmZcga6wCoqd-KKw3H5-jtbit06XMrKkDiWjz2g4eYhPR6xipbnqyZaaCwtYN4mAMz86ug HTTP/1.1
Host: example.org
Accept: */* 
```

当 JWT 编码的 nonce 被解码时，你可以看到这个 header：

```
{
  "alg": RS256
} 
```

这个身体：

```
{
  "jti": "97V6eOVZZ5TjOGwV",
  "client_id": "my-good-mobile-app-22",
  "aud": "https://example.org/page-that-is-not-in-my-mobile-app",
  "exp": 1598752440
} 
```

现在，API 可以通过以下方式决定 nonce 是否可以接受：

1.  检查其 URL 是否与`aud`（受众）声明相同
2.  检查 nonce 之前是否从未见过（使用`jti`, JWT ID, 声明）
3.  检查此客户端是否可以请求此资源（使用`client_id`声明）
4.  检查 nonce 不是很久以前创建的并且仍然有效（使用`exp`or expires 声明）
5.  JWT 的签名是有效的。这可以使用客户端的公钥来完成。

然而，这样做可能会导致信任意大利面。为避免这种情况，您的 OAuth 服务器可以改为将 nonce 嵌入到应用程序的 ID 令牌中，或允许客户端根据需要请求新的（例如通过执行令牌交换）。然后，API 只需要信任 OAuth 服务器，不需要跟踪客户端的公钥。如果您只有少数客户，但这并不难管理。

# jquery - 替换对象中某个字符的所有实例

> ID：13477235
> 
> 赞同：1
> 
> 时间：2012-11-20T16:06:40.297
> 
> 标签：jquery, replace

我克隆了一个选择器，但在输出它之前，我希望用 替换所有实例`data_number`，`data_number + 1`但我遇到了麻烦。

有人可以告诉我我做错了什么吗？谢谢。

```
var data_number = $('.data-fields').length, // The number of data rows
    data_row = $('.data-'+data_number),  // The last data row
    new_data_row = data_row.clone();        // A clone of the last data row

/** Replace all instances of the data_number with data_number + 1 */
???

/** Clear all of the input values in the clone */
$('input[type="text"]', new_data_row).val('');

/** Output the now clean cloned data row */
data_row.after(new_data_row); 
```

例如，如果 new_data_row 最初是 -

```
<div class="data-5">
    <input name="data[5][label]" />
    <input name="data[5][budget]" />
</div> 
```

我希望它改为 -

```
<div class="data-6">
    <input name="data[6][label]" />
    <input name="data[6][budget]" />
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T16:23:48.150

又快又脏。DOM --> html --> 替换 --> DOM。

```
var data_number = $('.data-fields').length, // The number of data rows
    data_row = $('.data-'+data_number),  // The last data row
    cloned_data = data_row.clone(),
    new_data_row,       // Raw html
    next_number = data_number + 1; 

cloned_data.find("input").val(""); //Clear inputs

new_data_row = cloned_data.wrap("<div/>").parent().html().replace(new RegExp(data_number + "", "gm"), next_number + "");

/** Output the now clean cloned data row */
data_row.after(new_data_row); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:11:14.357

Ok, so the answer here was longer than I'd hoped.

Also, this only works because I am manually replacing all the elements that I know need replacing, so if there are any better methods, please do share.

**Update**

I've accepted another answer because it achieves exactly what I want, so although this code will work, I'd recommend that.

```
$(document).ready(function(){

    var link = $('.add-data-link');     

    link.on('click', function(){

        var data_number = $('.data-fields').length, // The number of data rows
            next_number = data_number + 1,          // The next data number
            data_row = $('.data-'+data_number),     // The last data row
            new_data_row = data_row.clone(),        // A clone of the last data row
            class_name = 'data-'+data_number,       // The class of the cloned data
            new_class_name = 'data-'+next_number;   // The new class that will replace the cloned data

        /** Replace all instances of the 'data_number' with 'next_number' */
        var for_text, name_text;
        $(new_data_row).removeClass(class_name).addClass(new_class_name);
        $('label', new_data_row).each(function(){

            for_text = $(this).attr('for');
            for_text = for_text.replace(data_number, next_number);
            $(this).attr('for', for_text);

        });
        $('input', new_data_row).each(function(){

            name_text = $(this).attr('name');
            name_text = name_text.replace(data_number, next_number);
            $(this).attr('name', name_text);

        });

        /** Clear all of the input values in the clone */
        $('input[type="text"]', new_data_row).attr('value', '');

        /** Output the now clean cloned data row */
        data_row.after(new_data_row);

    });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T16:19:39.383

您需要使用[字符串替换](http://www.w3schools.com/jsref/jsref_replace.asp)，除非您想将 1 附加到字符串的末尾，否则您需要这样做`data_number + 1`。`parseInt(data_number) + 1`

# intellij-idea - 使用 IDEA IntelliJ Jetty 插件 (jetty-env.xml) 配置数据源

> ID：13477244
> 
> 赞同：0
> 
> 时间：2012-11-20T16:07:02.013
> 
> 标签：intellij-idea, jetty, jndi

我正在尝试开始使用 IDEA IntelliJ Jetty 插件。在我们的应用程序中，我们使用 JNDI 数据源来访问实际的数据库。

因此，对于开发，我们生成一个*jetty-env.xml*并在开发部署期间将其包含在*WEB-INF*目录中：

```
<?xml version="1.0"?>
<!DOCTYPE Configure PUBLIC "-//Mort Bay Consulting//DTD Configure//EN" "http://jetty.mortbay.org/configure.dtd">
<Configure class="org.mortbay.jetty.webapp.WebAppContext">
  <!-- Add an JNDI resource -->
  <New class="org.mortbay.jetty.plus.naming.Resource">
        <Arg>datasource_pbv</Arg>
        <Arg>
            <New class="org.apache.commons.dbcp.BasicDataSource">
                <Set name="DriverClassName">oracle.jdbc.driver.OracleDriver</Set>
                <Set name="Url">jdbc:oracle:thin:@dbserver:1521:DATABASE</Set>
                <Set name="Username">user</Set>
                <Set name="Password">pass</Set>
            </New>
        </Arg>
    </New>
</Configure> 
```

我以这种方式在*jetty.xml*中重新配置了 Jetty *WebAppDeployer*，因此它使用*org.mortbay.jetty.plus.webapp.EnvConfiguration*读取和处理*jetty-env.xml*：

 ***```
<Configure id="Server" class="org.mortbay.jetty.Server">  
    ...
    <Array id="plusConfig" type="java.lang.String">
      <Item>org.mortbay.jetty.webapp.WebInfConfiguration</Item>
      <Item>org.mortbay.jetty.plus.webapp.EnvConfiguration</Item>
      <Item>org.mortbay.jetty.plus.webapp.Configuration</Item>
      <Item>org.mortbay.jetty.webapp.JettyWebXmlConfiguration</Item>
      <Item>org.mortbay.jetty.webapp.TagLibConfiguration</Item>
    </Array>
    ...
    <Call name="addLifeCycle">
      <Arg>
        <New class="org.mortbay.jetty.deployer.WebAppDeployer">
            ...              
            <Set name="configurationClasses"><Ref id="plusConfig"/></Set>
        </New>
      </Arg>
    </Call>
    ...
</Configure> 
```

不幸的是，这不适用于 IDEA Jetty 插件。IDEA Jetty 插件生成一个*context-config.xml*和一个后续的*war-exploded.xml*，它不添加 EnvConfiguration。**因此，使用 Jetty IDEA 插件进行部署时会忽略 jetty-env.xml。**

在使用 IDEA Jetty 插件进行部署时，我如何才能使这项工作或提供自定义 JNDI 条目的其他方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:32:39.947

我还没有检查过自己，但是由于 IDEA Jetty 集成依赖于`ContextDeployer`，因此以下内容应该可以工作（如果添加到`jetty.xml`）：

```
<Call name="addLifeCycle">
  <Arg>
    <New class="org.mortbay.jetty.deployer.ContextDeployer">
        ...              
        <Set name="configurationClasses"><Ref id="plusConfig"/></Set>
    </New>
  </Arg>
</Call> 
```***

# ios - 存折不保存优惠券

> ID：13477247
> 
> 赞同：1
> 
> 时间：2012-11-20T16:07:09.693
> 
> 标签：ios, passbook

我已经尝试过存折教程： [http](http://www.raywenderlich.com/20734/beginning-passbook-part-1) ://www.raywenderlich.com/20734/beginning-passbook-part-1 ，前段时间在其他一些 SO 线程中推荐过。

一切都很顺利，除了：

1.  我将 .pkpass 文件放在本地 Web 服务器上，我尝试单击文件的直接链接，希望它会在我的 iOS sim/设备上打开，但我得到的只是“safari 无法下载文件”。这也发生在 Passbook Programming Guide 上的官方 iOS pass 示例中。在模拟器上时，控制台日志上没有出现错误。

2.  我尝试将pkpass放入电子邮件中，从真实设备打开它，它出现了，但是当我单击“添加”时，优惠券没有添加到存折中。也没有出现错误。

3.  我尝试使用 passsource.com 创建一个通行证。如果我使用他们的“即时”方法，我会得到一张很好的优惠券，并且可以保存它。如果我选择“下载 pkpass 文件”，然后按照上面 #1/#2 中的描述使用它 - 相同的错误。

使用正确的团队 ID 和类型 ID 正确签署优惠券。

我的 JSON 是（我弄乱了团队/类型 ID）：

```
{
  "formatVersion" : 1,
  "passTypeIdentifier" : "pass.com.xxx.xx.xxx",
  "serialNumber" : "123",
  "teamIdentifier" : "XXXXXXXX",
  "organizationName" : "my brand",
  "description" : "my coupon",

  "logoText" : "logo text",
  "foregroundColor" : "rgb(255, 255, 255)",
  "backgroundColor" : "rgb(135, 129, 189)",
  "labelColor" : "rgb(45, 54, 129)",

  "barcode" : {
      "message" : "650438-5103453453",
      "format" : "PKBarcodeFormatPDF417",
      "messageEncoding" : "iso-8859-1"
  },

  "coupon" : {
      "primaryFields" : [
          {
              "key" : "offer",
              "label" : "for you",
              "value" : "Free hug"
          }
      ]
  }
} 
```

我用在线验证工具测试了json，它是有效的。

任何想法为什么不保存/下载优惠券？

tnx

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T09:19:55.823

我刚刚找到了问题的原因。似乎模拟器支持从模拟器上的 Finder 拖放 pkpass。如果这样做，我确实会在系统日志中看到详细的错误消息（我正在使用控制台应用程序），所以我发现了问题： 1\. 在 manifest.json 中创建它的 sig 后，我的 json 被更改，所以我更新了sig 2\. 如果我希望将 pkpass 文件作为来自 Web 服务器的通行证，仅提供指向它的直接链接是不够的，我还需要将内容类型更改为 application/vnd.apple.pkpass

在处理完这两个问题后，我就可以从我的 Web 服务器提供 pkpass 文件了。

# php - 来自两个按钮的 PHP if else 语句

> ID：13477248
> 
> 赞同：0
> 
> 时间：2012-11-20T16:07:11.077
> 
> 标签：php, if-statement, vote

我正在尝试用 PHP 制作一个简单的投票脚本，需要帮助。我遇到的问题是我创建了一个带有两个按钮的表单，喜欢和不喜欢，它们对应于 if else 语句。

如果单击喜欢按钮进行更新，否则单击不喜欢按钮进行更新。

这是我到目前为止的代码，上面还有更多，但不是我的问题所必需的：

```
while($row = $q2->fetch()) 
        {
        $up_vote= $row['up_votes']; /*Current Up Votes*/
        $down_vote= $row['down_votes']; /* Current Down Votes*/
            echo '<form method="post" action="">';
            echo '<input type="button" id="up_vote" name="up_vote" value="Like" /> OR';
            echo '<input type="button" id="down_vote" name="down_vote" value="Dislike" />';
            echo '</form>';
            echo round($row['rating'], 0);
            echo '% of voters Liked this';
            }

        $up_votes = $up_vote +1;/*$up_vote referes to original # of up_votes, $up_votes adds 1 to the number of votes*/
        $down_votes = $down_vote +1;/*$down_vote referes to original # of down_votes, $up_votes adds 1 to the number of votes*/

    if ($something);/*upvote clicked*/
    {
        $vote_update = "UPDATE images
                        SET up_votes:up_votes
                        WHERE vote_item_id: vote_item_id";

        $q3 = $conn-> prepare($vote_update);
        $q3->execute(array(':up_votes'=>$up_votes, /*$up_vote referes to original # of up_votes, $up_votes adds 1 to the number of votes*/
                           ':vote_item_id'=>$current_vote_item_id));

        /* ALSO create INSERT INTO votes_done to track the user vote*/ 
    $conn = null;
    }       
    else ($something2);/*down vote clicked*/
    {
        $vote_update = "UPDATE images
                        SET down_votes:down_votes
                        WHERE vote_item_id: vote_item_id";

        $q3 = $conn-> prepare($vote_update);
        $q3->execute(array(':down_votes'=>$down_votes, /*$down_vote referes to original # of down_votes, $up_votes adds 1 to the number of votes*/
                           ':vote_item_id'=>$current_vote_item_id));
        /* ALSO create INSERT INTO votes_done to track the user vote*/
    } 
```

if 和 else 语句应该是什么样的？我不知道该怎么做，不能有两个提交，我应该有两个不同的表单，每个按钮一个吗？无论哪种方式，我怎么能说如果单击了喜欢转到 if 并运行代码，或者如果单击了不喜欢则转到 else 并运行代码？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:27:49.897

撇开语法错误不谈，您可以为两个按钮赋予相同的名称，但值不同。

```
echo '<form method="post" action="___URL OF YOUR PAGE___">';
echo '<input type="submit" id="up_vote" name="vote" value="Like" /> OR';
echo '<input type="submit" id="down_vote" name="vote" value="Dislike" />';
echo '</form>'
...
if($_POST['vote'] == "Like") {
...
} else if ($_POST['vote'] == "Dislike") {
...
} 
```

请注意，我将`input`'s更改`type`为`submit`而不是`button`. 这将导致数据将自身发送到页面（`button`除非您开始添加 JavaScript，否则不会做任何事情）。

您可以在以下答案中阅读更多相关信息：

[https://stackoverflow.com/a/6129301/1451957](https://stackoverflow.com/a/6129301/1451957)

[html按钮与html提交？](https://stackoverflow.com/questions/1979363/html-button-v-s-html-submit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T16:10:35.360

PHP 是服务器端，而您想控制在客户端触发的事件（用户单击一个按钮或另一个按钮）。

Javascript/Jquery 是客户端，在那里你可以控制和触发调用 PHP 脚本来执行查询的事件。

在 PHP 中也`else(){`无效，您应该使用`elseif(){`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T16:12:58.027

这听起来像是一个使用 JavaScript 会更有用的实例，但如果您真的想使用 PHP，您可以使用两个单独的表单或将按钮更改为看起来像按钮的链接并添加 URL 参数。

另外：你有一些语法错误。示例：您不应该在 if/elseif 条件之后放置分号，`else()`应该是，在尝试递增and`elseif()`时使用两个不同的变量名，等等。`$up_votes``$down_votes`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T16:20:57.163

为什么不为每个喜欢和不喜欢按钮添加一个“onclick”事件，并执行不同的脚本？

# c++ - OpenGL For循环（随机月亮生成）

> ID：13477251
> 
> 赞同：0
> 
> 时间：2012-11-20T16:07:16.583
> 
> 标签：c++, opengl

我正在为一个大学项目在 OpenGL 中创建一个 3d 太阳系，我已经到了必须生成卫星的地步。现在生成绕行星运行的卫星很简单，但我正在尝试创建一个循环，该循环将生成我告诉它的卫星数量，并且在行星周围的随机位置，因此所有卫星的轨道都是不同的。

```
for(int count = 0; count < 5; count ++)
{
    glPushMatrix();
    glEnable(GL_LIGHTING);
    glTranslated (rand() % 8+8, 0.0, 0.0); //FIRST 
    glRotated((GLdouble) spin, 1.0, 70, 0.0);
    glutSolidSphere(0.8, 20, 10);
    glPopMatrix();
} 
```

这是我想出的，但是它似乎一遍又一遍地创造了卫星。它创建了我指定的数量，但不断地重新创建它们。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T16:10:51.987

您应该在创建月球时存储月球的位置，并在它们围绕行星旋转时更新此位置。

您当前编写的代码将在每次执行时创建一个随机 Translate。

所以为了简单起见，添加一个创建卫星的过程，一个更新卫星围绕它们的行星旋转的过程（你可能已经有一段处理围绕恒星旋转的代码？）然后渲染更新的太阳系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:22:30.647

`srand(0)`在 -loop 之前执行一个，`for`以便每次都获得相同的随机数序列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T17:42:10.083

您可能应该创建一个结构或类，例如：

```
struct Moon
{
    float x, y, z;
    float rotAngle;
}; 
```

（*让它像你需要的那样复杂*）

创建所需数量的对象（使用数组/列表/...），在渲染循环之前初始化它们的值。

在渲染循环中，遍历所有这些对象，更新（*如果需要？*）并使用它们的值显示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T17:46:46.703

> *然而，*它似乎正在一遍又一遍地绘制月亮~~。~~

 *自由贸易区。OpenGL*不是*场景图。您不会使用它生成场景，而是以某种方式在内部存储并按需呈现给用户。OpenGL 是一个*绘图*API。如果您在动画循环中调用绘图代码，但总是使用一些新的随机参数进行绘制，那么事情就会跳来跳去。

解决方案：您需要一个场景图。在您的情况下，存储初始参数的简单列表就足够了。如果你想给它增添趣味，你还可以确定距给定质量的行星给定距离的正确轨道速度。*

# performance - Visual Studio 2008 挂在 64 位 Windows 7 中

> ID：13477252
> 
> 赞同：1
> 
> 时间：2012-11-20T16:07:25.633
> 
> 标签：performance, visual-studio-2008, windows-7, 64-bit, freeze

我有全新的 Win7 64 位机器。Visual Studio 2008 是新安装的，但开始响应越来越慢，最终完全挂起，完全占据了机器的一个（虚拟）核心。经过一个小时左右的响应越来越慢，我关闭它并重新启动，然后它一开始运行良好，然后又逐渐变慢。

使用 Process Explorer 我发现负责的*devenv.exe*线程总是有一个堆栈，当它与处理器挂钩时，它看起来像这样：

```
ntoskrnl.exe!KeWaitForMultipleObjects+0xc0a
ntoskrnl.exe!KeAcquireSpinLockAtDpcLevel+0x732
ntoskrnl.exe!KeWaitForMutexObject+0x19f
ntoskrnl.exe!__misaligned_access+0xba4
msenv.dll!DllCanUnloadNow+0x49b31 
```

带有一条或多条`ntoskrnl.exe!__misaligned_access`和`msenv.dll!DllCanUnloadNow`线；谁能告诉我可能出了什么问题？谢谢！

更新：

通过命令行开关 /SafeMode 启动 VS（感谢 0xA3）后，我发现没有 Resharper 问题似乎消失了......所以它看起来很可能是一个 Resharper 错误 :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:19:42.500

你检查了进程中的所有其他线程吗？（托管和非托管）查看是否有任何线程忙或在与其他人不同的堆栈的非平凡地方等待？主线程显然正在等待，很可能在同一进程的另一个线程上 - 我很想知道那里还有哪些其他调用堆栈。

# objective-c - 如何使单元格与 CollectionView 中的页脚部分重叠？

> ID：13477258
> 
> 赞同：0
> 
> 时间：2012-11-20T16:07:35.603
> 
> 标签：objective-c, ios, ios6, uicollectionview

我正在尝试制作一个报亭应用程序，对于书架，我将使用固定的背景图像和一些带有另一个图像的页脚。

问题是当我向页脚添加图像时，单元格似乎在飞行。

我只想**将页脚与单元格重叠**。

我有这个：

![飞行pdf](../Images/49dd4171838f9164bbaaffffd2200b82.png)

我想要这个：

![正确的架子](../Images/863d6108c9d190d50be748470b14ff05.png)

我只是没有时间做自定义布局。有没有办法以简单的方式做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-11-03T11:39:03.757

在编写类似的程序时，我偶然发现了这个悬而未决的问题。尽管这是一个非常古老的问题，但它可能会对研究同一主题的人有所帮助。

一个否定的 sectionInset 解决了这个问题：

```
let myFlowLayout = UICollectionViewFlowLayout()
myFlowLayout.sectionInset = UIEdgeInsets(top: 0, left: 0, bottom: -30, right: 0)

collectionView.collectionViewLayout = myFlowLayout 
```

# python - Python：一种更 Pythonic 的遍历网格分类的方法

> ID：13477259
> 
> 赞同：4
> 
> 时间：2012-11-20T16:07:37.630
> 
> 标签：python, for-loop

我有一个 11×11 大小的网格，放置在散点图上。散点图由 100 个随机生成的对组成。在每个网格空间内，是一个分类类型，其中：

A 型大于 0，但 X 和 Y 轴均小于 0.5，B 型大于 0.5，但 X 和 Y 轴均小于 1.5 等...

我想知道每个网格空间中有多少点，以及该网格空间中存在的对。这部分不是问题，我只是想知道是否有更 Pythonic 的方式来编写我的循环，因为我不想为每个网格空间编写一个 if 语句。

我的脚本如下：

```
 TypeA = []
    TypeB = []

    fig = plt.figure()
    ax = fig.gca()
    ax.set_xticks(np.arange(0.5, 10.5, 1))
    ax.set_yticks(np.arange(0.5, 10.5, 1))

    for ii in range(100):
        RNumX = randint(0, 10)
        RNumY = randint(0, 10)

        print RNumX, RNumY

        hold(True)
        plot1 = plt.scatter(RNumX, RNumY)

        if RNumX >= 0 and RNumX < 0.5:
            if RNumY >= 0 and RNumY < 0.5:
                PairA = (RNumX, RNumY)
                TypeA.append(PairA)

            elif RNumY >= 0.5 and RNumY < 1.5:
                PairB = (RNumX, RNumY)
                TypeB.append(PairB)

    SumA = len(TypeA)
    SumB = len(TypeB)

    print TypeA, SumA
    print TypeB, SumB

    plt.grid()
    plt.show() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:30:19.780

您可以键入一个矩阵并对值进行四舍五入以找到您的索引：

```
from random import random

# An 11 x 11 matrix of lists
Type = 11 * (11 * ([],),)

fig = plt.figure()
ax = fig.gca()
ax.set_xticks(np.arange(0.5, 10.5, 1))
ax.set_yticks(np.arange(0.5, 10.5, 1))

for ii in range(100):
    # If you want to use floats in stead of ints
    RNumX = 0.5 + 10 * random()
    RNumY = 0.5 + 10 * random()

    print RNumX, RNumY

    hold(True)
    plot1 = plt.scatter(RNumX, RNumY)

    # Round the coordinates to find the indices
    Type[int(RNumX + 0.5)][int(RNumY + 0.5)].append((RNumX, RNumY))

# Print all buckets as your snippet implies
for x in Type:
    for y in x:
        print y, len(y)

# Print only buckets with both values in the same range as your question implies
for x in range(11):
    print Type[x][x], len(Type[x][x])

plt.grid()
plt.show() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T19:39:45.077

您可以使用 bisect 模块来避免那些 if 语句。这是一个简单粗暴的例子。

```
from functools import total_ordering
import bisect

@total_ordering
class Point:
  def __init__(self, X, Y):
    self.X = X
    self.Y = Y

  def __eq__(self, other):
    return self.X == other.X and self.Y == other.Y

  def __lt__(self, other):
    return self.X < other.X and self.Y < other.Y

print [(float(x)/2, float(x)/2) for  x in xrange(0, 23)] 
```

[(0.0, 0.0), (0.5, 0.5), (1.0, 1.0), (1.5, 1.5), (2.0, 2.0), (2.5, 2.5), (3.0, 3.0), (3.5, 3.5), ( 4.0, 4.0), (4.5, 4.5), (5.0, 5.0), (5.5, 5.5), (6.0, 6.0), (6.5, 6.5), (7.0, 7.0), (7.5, 7.5), (8.0, 8.0), (8.5, 8.5), (9.0, 9.0), (9.5, 9.5), (10.0, 10.0), (10.5, 10.5), (11.0, 11.0)]

```
points = [Point(float(x)/2, float(x)/2) for  x in xrange(0, 23)]
types = [chr(x) for x in xrange(65, 91)]
print types 
```

['A'，'B'，'C'，'D'，'E'，'F'，'G'，'H'，'I'，'J'，'K'，'L'，' M'、'N'、'O'、'P'、'Q'、'R'、'S'、'T'、'U'、'V'、'W'、'X'、'Y' , 'Z']

```
print types[bisect.bisect(points, Point(0.1, 0.1)) - 1] 
```

一个

```
print types[bisect.bisect(points, Point(0.6, 0.6)) - 1] 
```

乙

# python - 在 python 中导入 vim 会返回错误

> ID：13477264
> 
> 赞同：6
> 
> 时间：2012-11-20T16:07:55.377
> 
> 标签：python, vim

我阅读了一些关于使用 python 编写 Vimscripting 的文章。我感到非常感兴趣。所以我试图弄清楚如何用python做vimscripting。但是当我尝试导入 vim 时，它显示模块 vim 没有安装。所以我在网上搜索，但仍然没有找到要安装的模块。我也试过 pip 自动搜索，还是失败了。有谁知道在哪里可以找到模块 vim？

我正在使用 Fedora 17，并且我已经安装了 vim 7.3 和 python 2.7。

提前致谢。

这是错误消息：

```
>>> import vim
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named vim 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T16:22:27.600

看起来你不需要导入它，只要确保你的 vim 是用 python 支持编译的。**使用vim --version |**检查这个 **grep +蟒蛇**。此外，似乎 vim 模块在 vim 中时会自动导入，从而使您的导入行变得不必要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-04-25T02:28:46.923

它不起作用，但这会起作用

```
:python from vim import *
:python command('echo "Hello World!"') 
```

如果你把`vim.command(..`

你得到

回溯（最近一次通话最后）：

```
File "<string>", line 1, in <module>
NameError: name 'vim' is not defined 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-26T14:27:52.780

如 hd1 所述，使用 python 编译 VI。您可以在此处找到文档：

[http://vimdoc.sourceforge.net/htmldoc/if_pyth.html](http://vimdoc.sourceforge.net/htmldoc/if_pyth.html)

**如果你想测试**

```
export PYTHONPATH=$HOME/local/lib/python2.7/site-packages 
```

请注意，我全部安装在本地，这就是我在 PYTHONPATH 中使用 $HOME 的原因

然后运行 ​​vi，输入

```
:python from vim import *
:python vim.command('echo "Hello World!"') 
```

您应该会看到“Hello World！” 以下。

# jakarta-ee - 从右到左与 apache poi

> ID：13477271
> 
> 赞同：0
> 
> 时间：2012-11-20T16:08:24.497
> 
> 标签：jakarta-ee, struts, apache-poi, rtf

我正在使用 apache poi 修改一些现有的 rtf 文件并将副本返回给 Web 应用程序中的客户端。我的问题是当我尝试替换一些文本并插入另一个用阿拉伯语代替的文本时。

```
 FileInputStream in = new FileInputStream(mypath);
            POIFSFileSystem fs = new POIFSFileSystem(in);

            HWPFDocument doc = new HWPFDocument(fs);

            Range r = doc.getRange();
             r.replaceText("<matricule>","  "+agent.getMatriculeAgent());
            r.replaceText("<cin>","  "+agent.getCin());
             OutputStream out = response.getOutputStream();
        response.setContentType("application/rtf");

        response.setHeader("Content-Disposition","attachment; filename="+fileName);
        doc.write(out);
        out.flush(); 
```

如何设置 rtf 对齐方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T16:53:48.863

我很喜欢这个问题，它是如此简单，问题是因为我用阿拉伯语替换了法语单词，因为这只是一个用来定位我必须修改文本的地方的单词，它们可以是任何字符，更合适的是阿拉伯语！

# android - App Inventor - 创建并显示对象列表

> ID：13477274
> 
> 赞同：2
> 
> 时间：2012-11-20T16:08:34.910
> 
> 标签：android, app-inventor

我已经在网上搜索过这个但找不到解决方案所以决定在这里发布一个问题。

我想在 App Inventor 中显示对象列表。

定义对象的类的字段例如：

文本内容编号估计长度编号重要性

如何存储上述对象列表？我只找到了每个字段的单独列表的示例，但是是否可以将它们存储为列表列表？将它们存储为列表是否有意义？

第二个问题：我想显示一个对象列表，每行将包含一个对象，列将显示字段。它在 App Inventor 中可行吗？我是，如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T18:12:37.073

> 如何存储上述对象列表？我只找到了每个字段的单独列表的示例，但是是否可以将它们存储为列表列表？

是的，您可以将它们存储为列表列表，有关列表列表的示例，请参见[此处...](https://sites.google.com/site/blocks123/lists)

> 将它们存储为列表是否有意义？

当然是

> 我想显示一个对象列表，每行将包含一个对象，列将显示字段。它在 App Inventor 中可行吗？

您可以使用 2 个列表：一个列表来存储您的对象和另一个列表，这是一个列表列表，用于存储字段，另请参见此[示例](https://stackoverflow.com/a/12552831/1545993)...

# android - EditText 小部件的 onClickListener 中的 SetSelection 行为怪异

> ID：13477279
> 
> 赞同：1
> 
> 时间：2012-11-20T16:08:46.173
> 
> 标签：android, android-edittext

我目前正在处理可能在其文本中包含占位符的多行编辑文本。为了避免修改这些占位符，我在 EditText 小部件中添加了一个 onClickListener，它检查光标位置是否在这样的占位符内。在这种情况下，应选择占位符，以防止除完全删除之外的任何修改。

这在我的 Android 2.3 设备上工作得非常好，但在 Android 4.x 上，选择在 onClick 事件之后被修改，并且光标显示在占位符的开头而没有选择。

在 onClickListener 的源代码下方。

```
protected void textClickListener(EditText v) { 
    Pattern p = Pattern.compile(placeholderRegex);
    Matcher matcher = p.matcher(v.getText());
    int sel_start = v.getSelectionStart();
    int sel_end = v.getSelectionEnd();
    if (sel_start == -1) {
        return;
    }
    while (matcher.find()) {
        int pattern_start = matcher.start();
        int pattern_end = pattern_start + 25;
        if (pattern_start > sel_end) {
            continue;
        }
        if (pattern_end < sel_start) {
            continue;
        }
        v.setSelection(Math.min(sel_start, pattern_start), Math.max(sel_end, pattern_end));
        return;
    }
} 
```

此代码工作正常，使用正确的值调用 setSelection 并且实际设置了选择。我在 Selection.setSelection 方法上设置了一个断点，发现它是从 PositionListener 调用的，它是 android.widget.editor 的一个内部类，它将选择长度设置为 0。下面是这个 setSelection 调用的堆栈跟踪：

```
Selection.setSelection(Spannable, int) line: 87 
Editor$InsertionHandleView.updateSelection(int) line: 3271  
Editor$InsertionHandleView(Editor$HandleView).positionAtCursorOffset(int, boolean) line: 3045   
Editor$InsertionHandleView(Editor$HandleView).updatePosition(int, int, boolean, boolean) line: 3064 
Editor$PositionListener.onPreDraw() line: 2047  
ViewTreeObserver.dispatchOnPreDraw() line: 671  
ViewRootImpl.performTraversals() line: 1820 
ViewRootImpl.doTraversal() line: 1000   
ViewRootImpl$TraversalRunnable.run() line: 4214 
Choreographer$CallbackRecord.run(long) line: 725    
Choreographer.doCallbacks(int, long) line: 555  
Choreographer.doFrame(long, int) line: 525  
Choreographer$FrameDisplayEventReceiver.run() line: 711 
Handler.handleCallback(Message) line: 615   
Choreographer$FrameHandler(Handler).dispatchMessage(Message) line: 92   
Looper.loop() line: 137 
ActivityThread.main(String[]) line: 4745    
Method.invokeNative(Object, Object[], Class, Class[], Class, int, boolean) line: not available [native method]  
Method.invoke(Object, Object...) line: 511  
ZygoteInit$MethodAndArgsCaller.run() line: 786  
ZygoteInit.main(String[]) line: 553 
NativeStart.main(String[]) line: not available [native method] 
```

任何想法如何防止这种情况或如何在此 PositionListener 操作之后设置选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T01:26:29.927

**从问题迁移**

最后我发现，你必须修改`OnTouchListener`. 更复杂的是，您必须修改该侦听器 ( `ACTION_DOWN`, `ACTION_UP`) 的两个调用中的选择。如果你只做一次（就像我出于性能原因所做的那样），它也不会起作用。所以最终的工作代码是：

```
@TargetApi(Build.VERSION_CODES.ICE_CREAM_SANDWICH)
protected boolean textTouchListener(EditText v, MotionEvent event) {
    placeholder_selected = false;
    Pattern p = Pattern.compile(placeHolderRegex);
    Matcher matcher = p.matcher(v.getText());
    int click_position = v.getOffsetForPosition(event.getX(), event.getY());
    int sel_start = click_position;
    int sel_end = click_position;
    if (sel_start == -1) {
        return false;
    }
    while (matcher.find()) {
        int pattern_start = matcher.start();
        int pattern_end = pattern_start + 25;
        if (pattern_start > sel_end) {
            continue;
        }
        if (pattern_end < sel_start) {
            continue;
        }
        v.setSelection(Math.min(sel_start, pattern_start), Math.max(sel_end, pattern_end));
        placeholder_selected = true;
        return true;
    }
    return false;
} 
```

`OnClickListener`出于兼容性原因，仍然需要该方法，因为该方法不适`getOffsetForPosition`用于低于 11 的 API 级别（Honeycomb）。根据使用的 API，只需执行两个侦听器中的一个。

# c - 初始化一个整数数组

> ID：13477281
> 
> 赞同：35
> 
> 时间：2012-11-20T16:09:14.807
> 
> 标签：c, arrays, initialization

有没有人有办法简单地将 s 数组`int`（任何多字节类型都可以）初始化为非零和非 -1 值？我的意思是，有没有办法在一个班轮中做到这一点，而不必单独执行每个元素：

```
int arr[30] = {1, 1, 1, 1, ...}; // that works, but takes too long to type

int arr[30] = {1}; // nope, that gives 1, 0, 0, 0, ...

int arr[30];
memset(arr, 1, sizeof(arr)); // That doesn't work correctly for arrays with multi-byte
                             //   types such as int 
```

仅供参考，`memset()`以这种方式在静态数组上使用会给出：

```
arr[0] = 0x01010101
arr[1] = 0x01010101
arr[2] = 0x01010101 
```

另一种选择：

```
for(count = 0; count < 30; count++)
   arr[count] = 1;    // Yup, that does it, but it's two lines. 
```

有人有其他想法吗？只要是 C 代码，解决方案就没有限制。（其他库都很好）

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-20T16:25:53.597

这是一个 GCC 扩展：

```
int a[100] = {[0 ... 99] = 1}; 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-11-20T16:13:30.873

```
for (count = 0; count < 30; count++) arr[count] = 1; 
```

一条线。:)

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-11-20T16:13:16.680

你说了一些关于 2 行的内容，但你可以使用逗号运算符在一行中完成`,`。

```
for(count = 0; count < 30 ; arr[count] = 1,count++); 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2012-11-21T07:51:17.037

在初始化期间（而不是运行时）执行此操作的唯一明智方法似乎是：

```
#define ONE1     1
#define FIVE1    ONE1, ONE1, ONE1, ONE1, ONE1
#define TEN1     FIVE1, FIVE1
#define TWENTY1  TEN1, TEN1
#define FIFTY1   TWENTY1, TWENTY1, TEN1
#define HUNDRED1 FIFTY1, FIFTY1

int array [100][4] =
{
  HUNDRED1,
  HUNDRED1,
  HUNDRED1,
  HUNDRED1
}; 
```

接下来，`#define ONE2 2`依此类推。你明白了。

编辑：我写这么多宏的原因是为了展示这个解决方案的灵活性。对于这种特殊情况，您不需要所有这些。但是使用像这样的宏，您可以快速灵活地编写任何类型的初始化列表：

```
{
  FIFTY1, FIFTY2,  // 1,1,1,1... 50 times, then 2,2,2,2... 50 times
  TWENTY3, EIGHTY4 // 3,3,3,3... 20 times, then 4,4,4,4... 80 times
  ... // and so on
}; 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2012-11-20T16:35:28.100

在 C 中，您通常使用宏开发自己的“支持库”，例如

```
#define SET_ALL(a_, n_, v_)\
  do { size_t i, n = (n_); for (i = 0; i < n; ++i) (a_)[i] = (v_); } while(0)

#define SET_ALL_A(a_, v_) SET_ALL(a_, sizeof(a_) / sizeof *(a_), v_)
#define ZERO_ALL(a_, n_) SET_ALL(a_, n_, 0)
#define ZERO_ALL_A(a_) SET_ALL_A(a_, 0) 
```

然后在你的代码中使用它们

```
int arr[30];

SET_ALL_A(arr, 1); 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2012-11-20T17:07:39.560

一行有指针！

```
for (int *p = a; p < (a + 30); p++) *p = 1; 
```

或者，如果您*过早地*担心重复计算会导致性能下降`(a + 30)`：

```
for (int *p = a + 30 - 1; p >= a; p--) *p = 1; 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-11-20T22:33:20.933

对于静态值的初始化，我通常认为将其输入为首选，如下所示：

```
int arr[30] = {1, 1, 1, 1, ...}; 
```

在这种情况下，编译器可以（并且通常会）在前导代码中吐出优化的初始化。

有时初始化更加动态，如下例所示：

```
int arr[30];
int x = fetchSomeValue();
for(int i=0; i<30; i++) arr[i] = x; 
```

在这些情况下，您必须对其进行编码，一般规则是最大限度地提高可读性，而不是尽量减少输入。此代码将被编写一次并读取多次。

# jquery-ui - JQuery UI 自动完成选择模糊或关闭

> ID：13477286
> 
> 赞同：3
> 
> 时间：2012-11-20T16:09:25.497
> 
> 标签：jquery-ui, jquery-ui-autocomplete

我想在模糊或关闭时从我的输入自动完成中选择值。

我试图把它放在 close 参数的函数中，但它不能工作：

```
close: function() {
  $($(this).data('autocomplete').menu.active).find('a').trigger('click');
  $(this).removeClass('ui-corner-top').addClass('ui-corner-all');
} 
```

有人有线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-08T11:35:23.677

好的，感谢 Andrew Whitaker，我得到了这个解决方案，可以在离开自动完成时自动选择第一个值：

```
$.ui.autocomplete.prototype.options.autoSelect = true;
$( ".ui-autocomplete-input" ).live( "blur", function( event ) {

    var autocomplete = $( this ).data( "autocomplete" );
    if ( !autocomplete.options.autoSelect || autocomplete.selectedItem ) { return; }

    autocomplete.widget().children( ".ui-menu-item:first" ).each(function() {
        var item = $( this ).data( "item.autocomplete" );
        autocomplete.selectedItem = item;
    });
    if ( autocomplete.selectedItem ) {
        autocomplete._trigger( "select", event, { item: autocomplete.selectedItem } );
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-27T07:46:04.713

更新了 jQuery UI 的代码 - v1.12.1

```
$.ui.autocomplete.prototype.options.autoSelect = true;
$( ".ui-autocomplete-input" ).live( "blur", function( event ) {
    var autocomplete = $(this).autocomplete('instance');

    if (!autocomplete.options.autoSelect || autocomplete.selectedItem ) { return; }

    autocomplete.widget().children( ".ui-menu-item:first" ).each(function() {
        var item = $( this ).data('ui-autocomplete-item');
        autocomplete.selectedItem = item;

    });

    if ( autocomplete.selectedItem ) {
        autocomplete._trigger( "select", event, { item: autocomplete.selectedItem } );
        autocomplete._value( autocomplete.selectedItem.value );
    }
}); 
```

# matlab - 置换矩阵行内的元素

> ID：13477287
> 
> 赞同：2
> 
> 时间：2012-11-20T16:09:34.620
> 
> 标签：matlab, matrix, element, permutation

我有一个矩阵*A*

```
A = [0 0 0 0 1; 0 0 0 0 2; 0 1 2 3 4]; 
```

我想随机排列每一行中的元素。例如，矩阵*A2*

```
A2 = [1 0 0 0 0; 0 0 0 2 0; 4 1 3 2 0]; % example of desired output 
```

我可以用向量做到这一点：

```
Av = [0 1 2 3 4];
Bv = Av(randperm(5)); 
```

但我不确定如何一次为矩阵执行此操作，并且只置换给定行中的元素。这可能吗？我可以从许多排列的向量中构造一个矩阵，但我不希望这样做。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T16:25:29.660

您可以`sort`在任何大小的随机数组上使用（这是什么`randperm`）。之后，您需要做的就是一些索引技巧来正确重新排列数组

```
A = [0 0 0 0 1; 0 0 0 0 2; 0 1 2 3 4];
[nRows,nCols] = size(A);

[~,idx] = sort(rand(nRows,nCols),2);

%# convert column indices into linear indices
idx = (idx-1)*nRows + ndgrid(1:nRows,1:nCols);

%# rearrange A
B = A;
B(:) = B(idx)

B =

     0     0     1     0     0
     0     2     0     0     0
     2     1     3     4     0 
```

# c# - 将多个项目添加到画布并使用 RenderBitmapTarget 呈现时 WPF 泄漏

> ID：13477289
> 
> 赞同：1
> 
> 时间：2012-11-20T16:09:43.397
> 
> 标签：c#, wpf, memory-leaks

我一直在努力诊断服务中的泄漏，该服务将多个图像渲染到画布上，然后在最后推出位图或 PNG（并多次执行此操作）。在启动时，该服务将飙升至 600MB+，然后继续增加，直到它几乎占用了它可以掌握的所有内容。一旦开始，它就永远不会减少。

我已经使用 VS2012 perf mon 检测并运行了该服务，并且看到在处理完成后有大量的字节数组放置。我已经尝试过 GC clear 看看它是否会清除它们无济于事。使用 WinDbg 查看它，我可以看到字节数组被一长串项目（主要是 WPF 对象）保存在内存中。

我查看了 MSDN 中所有正在使用的对象，但找不到任何指出代码运行方式存在问题的东西。

我整理了一些与服务密切相关的示例代码（为了方便起见，减少了一些位）。这被称为线程（设置为 STA）。唯一的其他区别是服务代码使用 MemoryStreams 加载来自数据库而不是我正在使用的 URI 的图像。流被处理：

```
 public static void TestThread()
    {
        const int rounds = 50;
        const int innerRounds = 50;
        var randomiser = new Random(DateTime.Now.Millisecond);

        // Simulating some live values
        const float scaling = 2.67F;
        const int pageWidth = 363;
        const int pageHeight = 516;
        const int dpi = 96;

        // To simulate the live system using multiple images
        // This is an list of images of different sizes etc
        var imageList = new List<ImageData>
        {
            new ImageData{Uri = new Uri(@"..."), Height = 2592},
            new ImageData{Uri = new Uri(@"..."), Height = 1339},
            new ImageData{Uri = new Uri(@"..."), Height = 386},
            new ImageData{Uri = new Uri(@"..."), Height = 968},
            new ImageData{Uri = new Uri(@"..."), Height = 1952},
            new ImageData{Uri = new Uri(@"..."), Height = 1024},
        };

        var proc = Process.GetCurrentProcess();

        for (var i = 0; i < rounds; ++i)
        {
            var canvas = new Canvas();
            canvas.BeginInit();
            canvas.SnapsToDevicePixels = false;
            canvas.UseLayoutRounding = false;
            canvas.Width = pageWidth;
            canvas.Height = pageHeight;
            canvas.Background = Brushes.White;

            for (var j = 0; j < innerRounds; ++j)
            {
                var img = new Image {Stretch = Stretch.Fill};
                var bitmapImage = new BitmapImage();
                bitmapImage.BeginInit();
                bitmapImage.CacheOption = BitmapCacheOption.OnLoad;

                var imageNo = randomiser.Next(0, imageList.Count - 1);

                bitmapImage.UriSource = imageList[imageNo].Uri;
                int imageHeight = imageList[imageNo].Height;
                bitmapImage.DecodePixelHeight = (int) (imageHeight * scaling * 1.8);
                bitmapImage.EndInit();

                if (bitmapImage.CanFreeze)
                {
                    bitmapImage.Freeze();
                }

                var opacityMask = new ImageBrush();
                var opactityBitmap = new BitmapImage();
                opactityBitmap.BeginInit();
                opactityBitmap.CacheOption = BitmapCacheOption.OnLoad;

                imageNo = randomiser.Next(0, imageList.Count - 1);
                opactityBitmap.UriSource = imageList[imageNo].Uri;
                int opacityImageHeight = imageList[imageNo].Height; ;
                opactityBitmap.DecodePixelHeight = (int)(opacityImageHeight * scaling * 1.8);
                opactityBitmap.EndInit();

                if (opactityBitmap.CanFreeze)
                {
                    opactityBitmap.Freeze();
                }

                opacityMask.ImageSource = opactityBitmap;
                img.OpacityMask = opacityMask;

                img.Source = bitmapImage;
                img.Width = pageWidth * scaling;
                img.Height = pageHeight * scaling;
                Canvas.SetLeft(img, 0);
                Canvas.SetTop(img, 0);
                canvas.Children.Add(img);
                img.Opacity = 50F;
            }

            canvas.LayoutTransform = null;
            var size = new Size(Math.Max(canvas.Width, 5), Math.Max(canvas.Height, 5));
            canvas.Measure(size);
            canvas.Arrange(new Rect(size));
            canvas.EndInit();

            var renderTargetBitmap = new RenderTargetBitmap(pageWidth, pageHeight, dpi, dpi, PixelFormats.Default); //xxx

            renderTargetBitmap.Render(canvas);

            if (renderTargetBitmap.CanFreeze)
            {
                renderTargetBitmap.Freeze();
            }

            System.Drawing.Image imageData;
            using (var ms = new MemoryStream())
            {
                var image = new PngBitmapEncoder();
                image.Frames.Add(BitmapFrame.Create(renderTargetBitmap));
                image.Save(ms);
                imageData = System.Drawing.Image.FromStream(ms);
            }

            var encoder = Encoder.Quality;
            var encoderParams = new EncoderParameters(1);
            encoderParams.Param[0] = new EncoderParameter(encoder, 100L);

            ImageCodecInfo[] codecs = ImageCodecInfo.GetImageDecoders();
            var codecInfo = codecs.FirstOrDefault(x => x.FormatID == ImageFormat.Png.Guid);

            Byte[] bitmapArray;
            using (var ms = new MemoryStream())
            {
                imageData.Save(ms, codecInfo, encoderParams);
                bitmapArray = ms.GetBuffer();
            }

            var filepath = string.Format(@"C:\temp\{0}.png", i);
            imageData.Save(filepath, ImageFormat.Png);

            var gcMemory = GC.GetTotalMemory(false) / 1024;
            Console.WriteLine("Proc mem = {0}KB, GC = {1}KB", (proc.PrivateMemorySize64 / 1024), gcMemory);
        }

        Console.WriteLine("Exiting");
    } 
```

我希望这很明显我在这里失踪了。感谢你的帮助！

# python - 如何检测 tif 图像是否具有 python 层，最好是 pil

> ID：13477292
> 
> 赞同：1
> 
> 时间：2012-11-20T16:09:53.610
> 
> 标签：python, python-imaging-library, photoshop, tiff

我试图找出文件（tif）是否有多​​层。我查看了 pil 文档，但没有看到任何指向它的内容。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:57:20.270

这是在黑暗中拍摄的，但根据[此 pdf](http://partners.adobe.com/public/developer/en/tiff/TIFFphotoshop.pdf)层在标签 37724 中定义。您可以尝试查看该标签是否存在

```
im = PIL.Image.open(fname)
try:
    im.tag[37724]
    layers = True
except:
    layers = False 
```

（实际上无法测试，因为我没有任何这些文件）

# java - 从 MySQL 中提取 Blob 并放入 JDialog

> ID：13477295
> 
> 赞同：0
> 
> 时间：2012-11-20T16:10:22.550
> 
> 标签：java, mysql, blob, jdialog

我与 MySQL 数据库建立了连接，我尝试解决从数据库中提取的 blob（图像）未正确呈现到 JDialog 时出现的问题（参见屏幕截图）。注意：我有多个图像（大小 ~50-60 Kb），其中一些显示正确（完整），但其中一些显示未完全加载。我尝试重新保存图像并将其插入 MySQL，但问题仍然存在。

![在此处输入图像描述](../Images/ae3a955d7096fda386c4f4a08c7b2ce3.png)

有任何想法吗？

我的代码是：

```
MenuItemPhoto.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent ae) {

                    try {
                        String sql = "select photo from RDSSPhoto where id ='38'";
                        pst = conn.prepareStatement(sql);
                        rs = pst.executeQuery();

                        if (rs.next()) {

                            byte[] imagedata = rs.getBytes("photo");
                            format = new ImageIcon(imagedata);
                            JOptionPane pane = new JOptionPane((Frame) null, JOptionPane.PLAIN_MESSAGE, JOptionPane.DEFAULT_OPTION);

                            JDialog d = pane.createDialog((Frame) null, "Photo");

                            pane.setIcon(format);
                            if (!d.isVisible()) {
                                d.setLocationRelativeTo(RDSSView.this);
                                d.pack();
                            }

                            d.setVisible(true);

                        }

                    } catch (Exception e) {
                        e.printStackTrace();
                    }

                }

        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T16:16:58.463

太疯狂了。我以前从未见过它。看起来对话框需要刷新/重绘或类似的东西。

你可以试试这个：

```
SwingUtilities.invokeLater(new Runnable()
{
   public void run() {
      d.pack();
   }     
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T19:13:58.027

喝了一杯完美的咖啡后，我发现了我的问题。存储图像的 MySQL 列设置为[BLOB](http://dev.mysql.com/doc/refman/5.0/en/blob.html)，这意味着每行最多可以存储 65535 字节（〜最大 64 Kb）。在我将该列更改为 LONGBLOB 后，问题仍然存在。但是在我再次将图像插入数据库后，JDialog 看起来很棒。

所以问题出在列类型上。

# c# - 如何使用现有关系创建多个基于它的导航属性？

> ID：13477296
> 
> 赞同：0
> 
> 时间：2012-11-20T16:10:28.727
> 
> 标签：c#, entity-framework, ado.net, entity-framework-4.1

我有两张桌子，说：

老师 1--------* 学生

我只有一个名为“学生”的导航属性。

仅对于此示例，我想做的是创建两个名为“男孩”的导航属性和另一个名为“女孩”的导航属性，这将基于名为“IsMale”的布尔值。

我已经从数据库生成了实体模型，所以这不是代码优先的。

谁能告诉我该怎么做？我需要修改生成的源吗？如果是这样，如果发生更新会发生什么，我会丢失代码吗？

谢谢你的时间！

克雷格

这是我的解决方案：

添加导航属性，并在属性中选择教师和学生之间的关联。

在生成的代码中，找到导航属性“男孩”，在末尾添加一个 .where 来选择男孩，例如：

```
 [XmlIgnoreAttribute()]
    [SoapIgnoreAttribute()]
    [DataMemberAttribute()]
    [EdmRelationshipNavigationPropertyAttribute("SchoolModel", "FK_Pupils_Teacher", "Pupil")]
    public EntityCollection<Pupil> Boys
    {
        get
        {
            return (EntityCollection<PriceKey>)((IEntityWithRelationships)this).RelationshipManager.GetRelatedCollection<PriceKey>("SchoolModel.FK_Pupils_Teacher", "Pupil").Where(p => p.IsMale == true);
        }
        set
        {
            if ((value != null))
            {
                ((IEntityWithRelationships)this).RelationshipManager.InitializeRelatedCollection<Pupil>("SchoolModel.FK_Pupils_Teacher", "Pupil", value);
            }
        }
    } 
```

这就是我的解决方案。所以现在我可以使用导航属性并将我想要的传回。

我也喜欢下面的答案！并认为这是一个更好的主意:)

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:35:10.797

将`Teacher.cs`文件放在文件所在的文件夹`.EDMX`中：

```
partial class Teacher
{
    public IEnumerable<Pupil> Boys
    {
        get { return Pupils.Where(x => x.IsMale); }
    }

    public IEnumerable<Pupil> Girls
    {
        get { return Pupils.Where(x => !x.IsMale); }
    }
} 
```

顺便说一句，这些不是导航属性。我不认为你能做到这一点。

# gcc - 将模板类编译/链接为静态库

> ID：13477300
> 
> 赞同：0
> 
> 时间：2012-11-20T16:10:34.983
> 
> 标签：gcc, reference, g++, static-libraries

我现在正在开发一个程序并测试模板类（我将需要它）我写了一个小（而且有问题，可能有 2 或 3 个逻辑错误，我的目标是让它编译）堆栈类。我想要做的是将其编译为静态库（.a），然后将其与主程序链接。

错误是：

```
main.cpp:(.text+0x1c): undefined reference to `Stack<int>::Stack()'
main.cpp:(.text+0x31): undefined reference to `Stack<int>::push(int)'
main.cpp:(.text+0x42): undefined reference to `Stack<int>::push(int)'
main.cpp:(.text+0x4e): undefined reference to `Stack<int>::pop()'
main.cpp:(.text+0x5d): undefined reference to `Stack<int>::pop()'
collect2: error: ld returned 1 exit status 
```

这是头文件：

```
/* stack.h */
#ifndef _STACK_INCLUDED_
#define _STACK_INCLUDED_
template<typename T>
struct Node
{
    T* node;
    Node<T>* next;
};

template<typename T>
class Stack
{
private:
    Node<T>* bottom;
public:
    Stack();
    Stack(T first);
    Stack(T* arr, int amount);
    void push(T push);
    T* pop();
};
/* I added the following prototypes in an attempt to correct the error,
did not work*/
template<typename T>
Stack<T>::Stack();

template<typename T>
Stack<T>::Stack(T first);

template<typename T>
Stack<T>::Stack(T* arr, int amount);

template<typename T>
void Stack<T>::push(T push);

template<typename T>
T* Stack<T>::pop();

#endif 
```

这是实现文件：

```
/* stack.cpp */
#include "../heads/stack.h"
#define null (void*)0

template<typename T>
Stack<T>::Stack() {
    bottom = null;
}
template<typename T>
Stack<T>::Stack(T first) {
    push(first);
}
template<typename T>
Stack<T>::Stack(T* arr, int amount)
{
    int i;
    for(i=0;i<amount; i++)
    {
        push(arr[i]);
    }
}
template<typename T>
void Stack<T>::push(T push)
{
    Node<T>* tmp = new Node<T>();
    tmp->node = push;
    tmp->next = null;

    Node<T>* node = bottom;
    while(node->next != null)
    {
        node = node->next;
    }
    node->next = tmp;
}
template<typename T>
T* Stack<T>::pop()
{
    int i=0;
    Node<T>* node = bottom;
    while(node->next != null)
    {
        i++;
        node = node->next;
    }
    node = bottom;
    for(;i>1;i++)
    {
        node = node->next;
    }
    Node<T>* res = node->next;
    node->next = null;
    return res->node;
} 
```

您可能已经注意到包含头文件：“../heads/stack.h”，这是因为结构如下所示：

```
- root
-- CLASSNAME
--- implementation of CLASSNAME
-- heads
--- all the headers
-- obj
--- object files (compiled)
--bin
---final output 
```

.

生成文件如下所示：

```
CC=g++
CFLAGS=-c -fpermissive -Wall
LFLAGS=-llua
OBJ=obj
BIN=bin
HS=heads

all: $(OBJ)/bind.a $(OBJ)/stack.a $(OBJ)/main.o
    $(CC) $(LFLAGS) -o $(BIN)/main $(OBJ)/main.o $(OBJ)/bind.a $(OBJ)/stack.a
$(OBJ)/bind.o: binds/bind.cpp $(HS)/bind.h
    $(CC) $(CFLAGS) binds/bind.cpp -o $(OBJ)/bind.o
$(OBJ)/bind.a: $(OBJ)/bind.o
    ar -cvq $(OBJ)/bind.a $(OBJ)/bind.o
$(OBJ)/main.o:
    $(CC) $(CFLAGS) main/main.cpp -o $(OBJ)/main.o
$(OBJ)/stack.o: $(HS)/stack.h stack/stack.cpp
    $(CC) $(CFLAGS) stack/stack.cpp -o $(OBJ)/stack.o
$(OBJ)/stack.a: $(OBJ)/stack.o
    ar -cvq $(OBJ)/stack.a $(OBJ)/stack.o
clean:
    touch $(OBJ)/dummy
    rm $(OBJ)/* 
```

编译器：g++ 4.7.2 (gcc-multilib)
操作系统：Arch Linux (x86_64)（内核 3.6.6-1）

[你可以在这里](http://ge.tt/1JA070S/v/0)获取整个文件（我正在做多个测试，所以不要介意 -llua 标志和其他文件，如果需要，你可以更改 Makefile，我只是想弄清楚这一点）。

经过一些研究和测试，我注意到符号没有被导出，（`nm obj/stack.o`什么都不显示，而`nm obj/bind.o`（.a）也是一样）。
但是，我找不到在这种情况下要做什么的任何参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T16:23:32.667

您不能为每个可能的模板参数创建一个库，但您可以为某些类型创建一个库。

模板类用于**生成**采用给定类型的类的代码。

当有实例使用它时，它会生成实际的类，否则，编译时会简单地省略。

根据[Compile header-only template library into a shared library？](https://stackoverflow.com/questions/7349129/compile-header-only-template-library-into-a-shared-library)这可以通过使用*Explicit Instantiation*来实现，并将您声明的类型放入库中，然后让其余的在编译中生成。

# c# - 使用 gpg2 自动解密文件

> ID：13477301
> 
> 赞同：0
> 
> 时间：2012-11-20T16:10:44.943
> 
> 标签：c#, gnupg

我正在尝试使用 gpg2 自动化日常文件解密过程。我的命令行字符串是：

```
string strCommandLine = String.Format("echo {0}|gpg2.exe --passphrase-fd 0 -o \"{1}\" --decrypt \"{2}\"", p_passphrase, outputFilepath, p_encryptedFilepath); 
```

它确实会输出解密的文件，但会不断弹出一个框，要求手动输入密码。我从网上的阅读中了解到，在我上面所做的方式中，密码短语和 gpg2 存在问题，但我不知道如何解决它。任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T03:02:31.380

*   我没有在 Windows 中使用 GnuPG 的经验，但假设它是相同的，添加**`--batch`**可能会解决它。

*   在 Linux 中，添加**`--no-tty`**始终是处理边缘情况的好主意（可能也适用于 Windows），**`--yes`**如果您最终需要覆盖文件，则需要添加。

*   最后，**`--trust-model always`**在某些情况下可以派上用场。（在决定使用它之前，请务必查看它。）

# elasticsearch - ElasticSearch 中的多个节点

> ID：13477303
> 
> 赞同：20
> 
> 时间：2012-11-20T16:10:53.547
> 
> 标签：elasticsearch

如何在我的 ElasticSearch 中有多个节点？我在 elasticsearch.yml 中使用以下内容，但只有最后一个节点启动，并且浏览器抱怨：`The page at file://localhost/ says: undefined`.

```
node.name: "No Data"
node.master: true
node.data: false

node.name: "Data One"
node.master: false
node.data: true

node.name: "Data Two"
node.master: false
node.data: true 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-20T17:32:35.790

我认为最简单的方法是在命令行上指定这些参数。要启动三个节点，您只需在 elasticsearch 主目录中运行以下三个命令：

```
$ bin/elasticsearch -Des.node.data=false -Des.node.master=true -Des.node.name=NoData
$ bin/elasticsearch -Des.node.data=true -Des.node.master=false -Des.node.name=DataOne
$ bin/elasticsearch -Des.node.data=true -Des.node.master=false -Des.node.name=DataTwo 
```

另一种解决方案是创建 3 个不同的配置文件并使用`-Des.config=path-to-config-file`参数启动三个节点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T18:31:56.140

`[http://localhost:9200/][1]`首先，如果您使用的是默认端口绑定，您应该尝试使用 访问 elasticsearch 。

我会将您的主节点设置为数据节点，没有理由不这样做。如果您尝试在一台机器上启动 3 个节点。但是，在同一台机器上启动 3 个节点除了实验之外没有任何意义。你想达到什么目的？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-13T13:23:01.833

在 windows for 6.x 版本中，命令属性更改为

```
elasticsearch -EsomeYamlPropety=someValue 
```

首先，您需要将 elasticsearch.yml 属性更改为：

```
http.port: 9200-9299
transport.tcp.port: 9300-9399
node.max_local_storage_nodes: 2 
```

因为您无法在单个端口上运行节点，并且当我尝试使用带有参数的命令时*-Ehttp.port=9201*节点无法看到彼此，并且它们创建了两个具有相同名称的不同集群。

通过标准命令运行第一个节点：

```
.\bin\elasticsearch 
```

通过具有属性的命令运行第二个节点：

```
.\bin\elasticsearch -Enode.name=NodeTwo -Enode.master=false 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-07-22T08:37:17.530

要在一台机器上运行 3 个 elasticsearch 节点，您应该在每个节点的 elasticsearch.yml 文件中使用这些配置：

## 对于主节点：

```
cluster.name: mycluster
node.name: "node1"
node.master: true
node.data: true
network.host: 127.0.0.1
http.port: 9200-9299
transport.tcp.port: 9300-9399
discovery.zen.minimum_master_nodes: 2 
```

* * *

## 对于数据节点：

```
cluster.name: mycluster
node.name: "data-node-name"
node.master: false
node.data: true
network.host: 127.0.0.1
http.port: 9200-9299
transport.tcp.port: 9300-9399
discovery.zen.minimum_master_nodes: 2 
```

* * *

然后你应该通过以下方式运行每个节点：

```
cd path/to/elasticsearch/bin
path\bin>elasticsearch.bat 
```

# javascript - 如果用户在javascript中按下两个键怎么办

> ID：13477304
> 
> 赞同：2
> 
> 时间：2012-11-20T16:10:53.147
> 
> 标签：javascript, jquery, keyboard, shortcut

所以我写了这个脚本，这样你就可以在你的网站上使用键盘快捷键，我想知道如何做多个键（即不是只做“左箭头”键，而是“ctrl + 左箭头”。这里是我当前的语法：

```
var arrow = {
    left: 37,
    up: 38,
    right: 39,
    down: 40
};

function DoSomething() {}

$(document).ready(function() { // requires jQuery
    $("body").keydown(function(event) {
        if(event.keyCode == arrow.left) {
            DoSomething();
        }
    }
} 
```

但我想做的是这样的：

```
var arrow = {
    left: 37,
    up: 38,
    right: 39,
    down: 40
},

ctrl = 17;

function DoSomething() {}

$(document).ready(function() { // requires jQuery
    $("body").keydown(function(event) {
        if(event.keyCode == ctrl && arrow.left) {
            DoSomething();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T16:11:58.280

jQuery 中提供的事件对象告诉您是否`ctrl`正在按下键。

```
$(document).on("keydown", function (event) {
    if (event.ctrlKey && event.which === arrow.left) {
        console.log("You pressed left, and control.");
    }
}); 
```

演示：http: [//jsfiddle.net/zcMXR/](http://jsfiddle.net/zcMXR/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T16:13:47.393

jQuery 已经做到了。除了跟踪按下了哪个键外，您还可以获取有关该键是否与 结合使用的信息`alt`，`ctrl`或者`shift`与下面显示的属性一起使用：

```
$(document).keydown(function(e) {
      console.log('key code is: ' + e.which + ' ' + (e.ctrlKey ? 'Ctrl' : '') + ' ' +
            (e.shiftKey ? 'Shift' : '') + ' ' + (e.altKey ? 'Alt' : ''));
}); 
```

因此，要检查组合键是否为 Ctrl + Up，您的条件将如下所示：

```
if( e.which == 38 && e.ctrlKey ){
    console.log('You pressed Ctrl+Up');
    ...
} 
```

# php - 来自地址的 PHP sendmail 显示不正确

> ID：13477305
> 
> 赞同：1
> 
> 时间：2012-11-20T16:10:58.697
> 
> 标签：php, sendmail

我知道我在这里做一些愚蠢的事情，但我无法弄清楚。我正在使用以下内容发送电子邮件：

```
 $headers  = "MIME-Version: 1.0
    From: ".$from_email."
    Bcc: ".$bcc_email."
    ";
    mail($email, $message['subject'], $message['content'], $headers); 
```

在哪里`$from_email = 'no-reply@mydomain.com'`

该消息是通过错误的地址发送的。下面的完整标题：

```
 Return-path: <cli@hostxxx.com>
Envelope-to: xxx@email.com
Delivery-date: Tue, 20 Nov 2012 11:01:34 -0500
Received: from cli by cli@hostxxx.com with local (Exim 4.69)
    (envelope-from <cli@hostxxx.com>)
    id 1TaqGI-000232-IJ
    for xxx@email.com; Tue, 20 Nov 2012 11:01:26 -0500
To: xxx@email.com
Subject: Fairway Solutions - Your new password
MIME-Version: 1.0
        From: no-reply@mydomain.com
        Bcc: support@mydomain.com
Message-Id: <E1TaqGI-000232-IJ@host.com>
From: cli@hostxxx.com
Date: Tue, 20 Nov 2012 11:01:22 -0500 
```

令人讨厌的是，我可以看到 From 正确通过，但就像收到的内容被主机信息覆盖一样。我错过了服务器级别的东西吗？

我也尝试在 php.ini 文件 ( `ini_set(sendmail_from,no-reply@mydomain.com);`) 中设置它，但没有任何区别。

ta

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T16:15:47.893

您可以尝试添加附加标头，例如 X-Sender：

```
$headers = 'Content-type: text/html; charset=iso-8859-1' . "\n";
$headers .= 'MIME-Version: 1.0' . "\n";
$headers .= "From: $sender<" . $sender . ">" . "\r\n";
$headers .= "X-Sender: $sender<" . $sender . ">" . "\n";
$headers .= "X-Mailer: PHP " . phpversion() . "\n";
$headers .= "X-Priority: 3" . "\n";
$headers .= "X-Sender-IP: " . $_SERVER['REMOTE_ADDR'] . "\n";
$headers .= "Return-Path: $sender<" . $sender . ">" . "\r\n";
$headers .= "Reply-To: $sender<" . $sender . ">" . "\r\n"; 
```

# ruby-on-rails - 具有多行家庭地址最佳实践的 Rails 模型

> ID：13477306
> 
> 赞同：1
> 
> 时间：2012-11-20T16:11:02.517
> 
> 标签：ruby-on-rails, models

这可能是一个简单/愚蠢的问题，但是关于命名模型的地址属性是否有最佳实践？

以下是可以的还是有标准的方法？具体来说，这三个地址字段命名是否OK？您如何处理国家/州与国家/地区？那么 zipcode vs postalcode vs code 怎么样？

```
t.string address1
t.string address2
t.string address3

t.string city
t.string country
t.string region
t.string state
t.string code?
t.string zipcode?
t.string postalcode? 
```

# c# - 从 LAN 读取 8 位数据并在 GUI 中显示

> ID：13477307
> 
> 赞同：1
> 
> 时间：2012-11-20T16:11:02.577
> 
> 标签：c#, vb.net, sockets, lan

您好，我是一名电气工程专业的学生，​​我正在设计一种记录值的设备，然后将其作为简单的 8 位数据发送到 LAN 端口。我必须使用时间戳检索这些数据并将其显示在 GUI 中。

发送的数据将采用以下形式：

```
 (MSB)                                   (LSB)
             [start bit | 3 | 4 | 2 | 7 | 2 | 4 | 6 | stop bit] 
```

并将在 GUI 中显示为：

```
 [Computer Time]   34.2 Volts   7.2 Amperes   46 degrees 
```

请指导我如何使用 C# 或 VB.Net 从 LAN 端口访问信息，如果可能，请发布套接字编程，因为作为电气工程师，编程并不是我的强项。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:25:08.530

从经验上讲，我为我的大学论文用 C# 编写了一个数据包分析引擎。您将面临的问题是托管 .NET 不允许您捕获 IP 级别以下的数据，但是您可以使用一些非托管 API 来访问较低级别的数据包数据。例如，SharpPCap 将允许您在数据层（OSI 模型中的第 2 层）捕获数据包。我知道 .NET 中没有任何内容可以让您直接读取/写入 LAN 适配器的字节，即使可以，任何 PC 都可能将其作为错误的位/字节丢弃。

我给你的建议是：

1.  了解 OSI 模型以及数据包封装的工作原理。

2.  了解 MAC 和 IP 寻址的工作原理

3.  考虑您可以在什么级别传输数据，以及如何将其从代码序列化为可传输的东西。（反之亦然）。

恕我直言，这似乎更像是串行端口的工作，甚至可能是 USB，您可以更好地控制正在发送/接收的数据。基于 LAN 的系统是基于标准的，因此为了让您的数据能够被接受，您需要在某种程度上学习标准，或使用现成的实现。

# java - ODATA 作为 JPA 提供者

> ID：13477308
> 
> 赞同：1
> 
> 时间：2012-11-20T16:11:04.660
> 
> 标签：java, jpa, odata

是否可以使用 OData 端点作为 JPA 提供者？我认为它是，但是，我从未见过这样的实现。任何人都可以提供有关此的任何指示吗？

# javascript - SVG 文本元素速度

> ID：13477310
> 
> 赞同：9
> 
> 时间：2012-11-20T16:11:12.253
> 
> 标签：javascript, svg, raphael

我正在构建一个严重依赖 svg 的 Web 应用程序。作为参考，我正在使用 raphael js 库来处理所有这些。

在这种特殊情况下，我实现了一些模仿滚动条并在屏幕上移动一堆 svg 功能（约 500 个元素）的东西。这些功能的一部分是`<text>`（~100）个元素。其他元素包括`<rect>`和`<image>`元素`<path>`。

所以，我注意到我的应用程序在我的笔记本电脑上并不是很活泼，而且由于速度的原因，在 ipad 上处理起来很烦人。但是，只要在滚动过程中删除或忽略文本元素，它就会立即达到不错的速度。

我尝试进行一些速度测试（非常粗略的测试，使用`new Date().getTime()`）并发现移动除元素之外的所有元素需要大约 10 毫秒`<text>`，但是包含元素时需要大约 120 毫秒`<text>`。

我相信这是因为每个字母都呈现为矢量形状，并且需要大量的处理能力来计算如此复杂的结构究竟阻碍了什么。

**是否可以只嵌入文本，因此文本呈现为光栅图形，而不是形状？或者以任何其他方式提高呈现文本的性能？**

我不需要背景透明度，也不使用任何花哨的字体。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T16:22:46.313

您可以使用 Canvas 预渲染文本并将[图像嵌入到 SVG](http://svgopen.org/2010/papers/62-From_SVG_to_Canvas_and_Back/)中。我不知道这与一般的文本元素渲染相比如何，但对于[我们的演示](https://www.yworks.com/demos)，这非常有效（请参阅“层次结构”示例中的阴影 - 它们首先渲染到画布中，然后从 SVG 中复制和引用）。

请注意，这些演示还大量使用了虚拟化，即如果您放大图像并且只有一些元素实际上在视口内，其他元素将从 SVG 中删除，这会带来巨大的加速。

演示不仅仅是移动元素，因此应该很容易获得相同甚至更好的性能。

不过，我不知道如何使用 raphael 执行此操作，但我相信您也应该能够使用 raphael 将画布图像中的数据 url 放入 SVG 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T16:28:57.067

**根据 Raphael 网站的**Paper.print()****

 **> 创建表示在给定位置以给定大小使用给定字体编写的给定文本的路径

本质上，您的文本被转换为路径。显然这存在性能问题。

可能最好坚持使用**Paper.text()**

**更新**

所以不满足于仅仅提出建议，我在[http://www.jsperf.com](http://www.jsperf.com)上设置了一些测试。它们可用于比较不同类型的 Raphael 对象的动画和变换性能差异。

如果你在 iPad 上运行这些，它应该会显示文本元素的移动速度是否真的慢得多。需要注意的另一件事是，至少在我运行的测试中，paper.print() 和 paper.text() 在性能方面并没有那么不同。

[**在 jsperf 上运行测试**](http://jsperf.com/raphael-js-text-versus-print/5)**

# google-maps - 有什么方法可以指定显式视口？

> ID：13477311
> 
> 赞同：1
> 
> 时间：2012-11-20T16:11:13.050
> 
> 标签：google-maps, google-static-maps

我需要对一些位置进行地理编码（完成），然后在地图顶部绘制自定义叠加层（客户订单）......但要做到这一点，我需要确切地知道视口区域是什么。我能看到的唯一方法是在静态地图查询中准确指定边界是什么......但似乎不可能。我错过了静态地图 API 中的某些内容吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T17:33:00.600

没有办法设置地图的边界，除了这样：

即）我指定包含北海道（日本）的边界

![在此处输入图像描述](../Images/8fba56ddfa95f50b602457606364dbc3.png)

我设置不透明度为零且线宽为零的路径。

[https://maps.googleapis.com/maps/api/staticmap?size=256x256&sensor=false&path=color:0xff00000000|weight:0|41.3780,139.3555|45.1870,146.9415](https://maps.googleapis.com/maps/api/staticmap?size=256x256&sensor=false&path=color:0xff00000000|weight:0|41.3780,139.3555|45.1870,146.9415)

![在此处输入图像描述](../Images/a322be7985eae4aef5722cd96922a69f.png)

您可能知道，它不完全是我指定的视口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T18:40:25.920

哦，我只记得。我尝试了类似的目的并解决了这个问题。您始终知道地图的中心位置、缩放比例和大小。由于 Google 使用墨卡托投影（更准确地说，他们使用“EPSG:900913”投影），您可以在服务器端根据这些信息计算出准确的视口。

虽然我是由 php 创建的，但我丢失了我的代码。

试试看。

# javascript - 使用 rel external 打开新页面

> ID：13477315
> 
> 赞同：1
> 
> 时间：2012-11-20T16:11:44.353
> 
> 标签：javascript, html

我想自动更改页面，我会使用 `window.location`

如何将属性添加 `rel="external"` 到 `window.location`

还是有一个方法jquery？

第 1 页：

```
case 'A1':
console.log("id_groupe_du_page  "+ id_groupe_du_page);
window.location("../etapeA1.html"); 
```

第2页：

```
$("#A1").live('pageshow', function()
        {

alert("A1 executer");
        }
); 
```

第2页js的代码没有运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T16:54:24.757

您的问题与在新选项卡中打开窗口无关。您的 JavaScript 中有一些错误会导致它无法触发。

**将第 2 页**上的 JavaScript 更改为：

```
$('document').ready(function () {

     alert("A1 executer");

}); 
```

同样从 1.7`.live`开始，不推荐使用，您应该避免使用。[参考](http://api.jquery.com/live/)

# objective-c - ARC 和 __unsafe_unretained

> ID：13477318
> 
> 赞同：2
> 
> 时间：2012-11-20T16:11:55.217
> 
> 标签：objective-c, automatic-ref-counting

我认为我对 ARC 以及选择合适的生命周期限定符（`__strong`、、、和）的正确用例有很好的理解。然而，在我的测试中，我发现了一个对我来说没有意义的例子。`__weak``__unsafe_unretained``__autoreleasing`

据我了解，两者`__weak`都不`__unsafe_unretained`添加保留计数。因此，如果没有其他`__strong`指向该对象的指针，它会立即被释放（不可变字符串是该规则的一个例外）。在这个过程中唯一的区别是`__weak`指针被设置为 nil，并且`__unsafe_unretained`指针被单独留下。

如果我创建一个`__weak`指向简单的自定义对象（由一个 NSString 属性组成）的指针，我会在尝试访问属性时看到预期的（空）值：

```
Test * __weak myTest = [[Test alloc] init];
myTest.myVal = @"Hi!";
NSLog(@"Value: %@", myTest.myVal); // Prints Value: (null) 
```

`__unsafe_unretained`同样，由于产生的悬空指针，我预计生命周期限定符会导致崩溃。然而，事实并非如此。在下一个测试中，我看到了实际值：

```
Test * __unsafe_unretained myTest = [[Test alloc] init];
myTest.myVal = @"Hi!";
NSLog(@"Value: %@", myTest.myVal); // Prints Value: Hi! 
```

为什么`__unsafe_unretained`对象没有被释放？

**[编辑]**：对象正在被释放......如果我尝试用应用程序崩溃替换第 2-3 行（并且在第一行之后立即调用`NSLog(@"%@", myTest);`覆盖`dealloc`的 in ）。`Test`我知道不可变字符串将继续可用，即使使用`__unsafe_unretained`，并且直接指向 NSString 的指针也可以工作。我很惊讶我可以在一个已释放对象上设置一个属性（第 2 行），并且以后可以从指向它所属的已释放对象的指针中取消引用它（第 3 行）！如果有人能解释这一点，它肯定会回答我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T00:21:44.547

> 我很惊讶我可以在一个已释放对象上设置一个属性（第 2 行），并且以后可以从指向它所属的已释放对象的指针中取消引用它（第 3 行）！如果有人能解释这一点，它肯定会回答我的问题。

当对象被释放时，它不会归零。由于您有一个指向已解除分配对象的指针，并且属性值存储在该指针的某个偏移量处，因此在解除分配后存储和检索该属性值可能会成功，也很*可能*一切都会因某种原因而崩溃或其他。

您的代码工作非常脆弱，尝试使用“调试时显示反汇编”进行调试并逐步执行，您可能会遇到访问冲突，或者关闭 Xcode 本身...

在 C、Objective-C、C++ 或任何家族中发生奇怪的事情，你永远不应该感到惊讶；相反，为这么少的奇怪事情发生而保留你的惊喜！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T16:57:36.467

因为 objc 中的常量字符串是一个指向堆地址的常量指针，而且该地址仍然有效。

**评论后编辑：**

也许是因为测试对象地址的内存没有被覆盖并且仍然包含该对象？猜测……

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T17:11:54.147

You can see when `Test` is deallocated by implementing its `-dealloc` method and adding some simple logging.

However, even if Test is deallocated immediately, the memory it occupied in RAM may remain unchanged at the time you call `myVal`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-20T17:23:22.257

`@"hi!"`生成一个静态全局常量字符串实例，实际上是一个单例。因此，它永远不会被释放，因为它一开始并没有真正分配（至少，它真的不是一个正常的堆分配）。

任何时候你想探索对象的生命周期问题，总是使用 NSObject 的子类来保证行为，并通过覆盖行为轻松地放入日志钩子。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-28T13:39:50.187

没什么奇怪的……你需要至少 1 个对对象的强引用才能让它保持活力。

```
Test * anTest = [[Test alloc] init];
Test * __weak myTest = anTest;
myTest.myVal = @"Hi!";
NSLog(@"Value: %@", myTest.myVal); // Prints Value: (Hi) 
```

# eclipse - 目标定义：安装与目录

> ID：13477319
> 
> 赞同：0
> 
> 时间：2012-11-20T16:11:56.527
> 
> 标签：eclipse

当我在目标编辑器中单击*添加*时，我可以选择：

*   目录（只是文件系统上的插件）
*   安装（也只有插件？）
*   功能（文件系统中的一项或多项）
*   和软件站点（例如 p2-repository）

那么安装（例如eclipse-SDK）和目录之间有什么区别，当安装只是获取插件时？我认为安装也可以解决我的功能。但似乎还有另一个区别，那么有什么好处呢？

编辑：请注意，如果您想使用“安装”类型的功能，则必须解压缩这些功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:54:00.497

Eclipse 安装包含有关通过帮助 -> 安装新软件和其他类似方式安装的内容的元数据。由于安装过程会验证依赖关系，因此您知道您的目标平台是有效的并且会运行。通过安装定义目标将使用安装的元数据来填充目标。请注意，Eclipse 多年来一直没有自动检测复制到插件目录中的插件。

如果您通过指向通过复制插件组合在一起的文件夹来定义目标，则您不知道这些插件的依赖关系是否满足，因此您的目标可能无法运行。

# java - 在 Java 中 GZIP 和 UDP 大量字符串的最快方法

> ID：13477321
> 
> 赞同：3
> 
> 时间：2012-11-20T16:12:10.070
> 
> 标签：java, udp, gzip, bytearrayoutputstream

我正在实现一个日志系统，该系统需要使用 GZIP 对日志消息进行编码并通过 UDP 将它们发送出去。

到目前为止，我得到的是：

初始化：

```
DatagramSocket sock = new DatagramSocket(); 
baos = new ByteArrayOutputStream();
printStream = new PrintStream(new GZIPOutputStream(baos)); 
```

然后将此 printStream 传递出记录器 - 消息将通过它到达

然后每次收到消息时：

```
byte[] d = baos.toByteArray();
DatagramPacket dp = new DatagramPacket(d,d.length,host,port);
sock.send(dp); 
```

目前困扰我的是，我找不到从 ByteArrayOutputStream 中删除数据的方法（toByteArray() 只需要一个副本），而且我担心每次重新创建所有三个流对象都会效率低下。

有没有办法从流中删除发送的数据？还是我应该完全转向另一个方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:16:43.300

您必须为每条消息创建一个新流；否则，每次调用`toByteArray()`都会再次发送所有以前的消息。

更好的方法可能是`OutputStream`用一个包装 TCP 套接字`GZIPOutputStream`：

```
printStream = new PrintStream(new GZIPOutputStream(sock.getOutputStream())); 
```

也不要忘记`PrintStream`在每条消息之后刷新，否则什么都不会发生。

如果速度真的那么重要，您应该考虑使用 a`DatagramChannel`而不是旧的（慢）steam API。这应该让你开始：

```
ByteBuffer buffer = ByteBuffer.allocate( 1000 );
ByteBufferOutputStream bufferOutput = new ByteBufferOutputStream( buffer );
GZIPOutputStream output = new GZIPOutputStream( bufferOutput );
OutputStreamWriter writer = new OutputStreamWriter( output, "UTF-8" );
writer.write( "log message\n" );
writer.close();

sock.getChannel().open(); // do this once
sock.getChannel().write( buffer ); // Send compressed data 
```

注意：您可以通过倒带重用`buffer`它，但所有流必须为每条消息创建一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T16:55:26.087

值得检查的是，如果速度很重要，使用 GZIP 会有所帮助。（它会增加一些延迟）

```
public static void main(String... args) throws IOException {
    test("Hello World");
    test("Nov 20, 2012 4:55:11 PM Main main\n" +
            "INFO: Hello World log message");
}

private static void test(String s) throws IOException {
    byte[] bytes = s.getBytes("UTF-8");
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    GZIPOutputStream outputStream = new GZIPOutputStream(baos);
    outputStream.write(bytes);
    outputStream.close();
    byte[] bytes2 = baos.toByteArray();
    System.out.println("'" + s + "' raw.length=" + bytes.length + " gzip.length=" + bytes2.length);
} 
```

印刷

```
'Hello World' raw.length=11 gzip.length=31
'Nov 20, 2012 4:55:11 PM Main main
INFO: Hello World log message' raw.length=63 gzip.length=80 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T13:14:06.110

答案对我的问题的其他方面很有帮助，但对于实际问题 - 有一种方法可以从 ByteArrayOutputStream 中清除数据。它有一个 reset() 方法。它实际上并没有清除缓冲区，而是将 count 属性重置为 0 ，导致它忽略缓冲区中已经存在的任何数据。

请注意，在重置底层 ByteArrayOutputStream 后写入 GZIPOutputStream 会导致错误，因此我还没有找到重用所有内容的方法。

# ant - 如何使用蚂蚁呼叫

> ID：13477322
> 
> 赞同：1
> 
> 时间：2012-11-20T16:12:12.933
> 
> 标签：ant

当我尝试从 Windows 命令提示符运行以下命令时，它工作正常。

```
ant Reports -f C:/EAR_XMLS/InfraCopy.xml "-Dsource=C:\Console" "-Ddestination=C:/INFRA" "-DAPP_NAME=TEST_FCJ" 
```

如何在 build.xml (ANT) 中运行相同的程序？我不喜欢 EXEC 选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:20:04.780

```
<ant antfile="C:/EAR_XMLS/InfraCopy.xml" target="Reports">
  <property name="source" value="C:\Console"/>
  <property name="destination" value="C:/INFRA"/>
  <property name="APP_NAME" value="TEST_FCJ"/>
</ant> 
```

[有关更多详细信息，请参阅此处](http://ant.apache.org/manual/Tasks/ant.html)的文档。

# android - Stella SDK 转换为安卓

> ID：13477327
> 
> 赞同：3
> 
> 时间：2012-11-20T16:12:45.063
> 
> 标签：android, objective-c, ios, cocos2d-iphone

我正在尝试使用 stella SDK 将我在 cocos2d 1.1 rc0 中制作的 iOS 应用程序转换为 android 项目。当我在这里使用该方法时：[http ://www.yeecco.com/support/docs/getting_started#portingiosprojectswithstellasdk](http://www.yeecco.com/support/docs/getting_started#portingiosprojectswithstellasdk)

我得到错误：`Lexical or pre-processor Issue: 'GL/gl.h' file not found`

即使我按照教程的第一部分将 GLSprite 测试项目转换为 android 项目，也会发生这种情况。我不知道如何解决这个问题，特别是当问题发生在它说不包括在内的同一个文件中时！...

这是一个屏幕截图![](../Images/ca17c521c6badc4e26b9a747001389b0.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T16:43:40.497

我找到了解决办法。

在 StellaSDK 生成的 Xcode 项目中，将目标的 Base SDK 设置为 OS X 10.7。然后将其添加到目标构建设置中的“Header Search Paths”字段中：

```
/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.7.sdk/usr/X11/include 
```

您还需要按照[Apple 的说明](http://support.apple.com/kb/HT5293)安装 XQuartz才能正常工作。

干杯!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T10:17:17.863

这个问题一直在折磨我。我终于发现 SDKROOT 应该是 OS X 10.7 。

1.  设置**TARGETS-> Build-> Settings-> SDKROOT-> OS X 10.7**。
2.  然后安装**X11** [http://xquartz.macosforge.org/landing/](http://xquartz.macosforge.org/landing/)
3.  安装后，您从mac注销帐户，再次登录并运行此项目。

就这样！

# cordova - 速度修复：如何消除 jQuery Mobile 应用程序中的 300 毫秒延迟

> ID：13477328
> 
> 赞同：16
> 
> 时间：2012-11-20T16:12:45.863
> 
> 标签：cordova, jquery-mobile

如何从 iOS 上的移动 Safari 中消除点击/点击延迟？

我已经摆弄了很多事件侦听器，并且使用了一堆不同的脚本（例如[Lightning Touch](http://trott.github.com/LightningTouch/)）而没有乐趣。有一些可行的解决方案，但是这些类型的脚本会强制您将目标元素编码到 DOM 上的每个链接。不幸的是，这可能会导致一些快速和一些缓慢的转换，这对我不起作用。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-20T16:12:45.863

经过不知疲倦的搜索，我*终于*找到了速度问题的答案，它以 FastClick 的形式出现（[这个线程](http://forum.jquery.com/topic/how-to-remove-the-300ms-delay-when-clicking-on-a-link-in-jquery-mobile)非常详细，以及其他用户评论中的一些调整）。

合并 FastClick.js 脚本，添加 onLoad 侦听器，并将您的`<body>`内容包装在一个跨度中，您的应用程序应该开始感觉更加原生。

**加载监听器：** `<body onLoad="initFastButtons();">`

**跨度包装：**

```
<body onLoad="initFastButtons();">
    <span id="fastclick">

    [...]

    </span>
</body> 
```

**快速点击.js**

```
//======================================================== FASTCLICK
         function FastButton(element, handler) {
            this.element = element;
            this.handler = handler;
            element.addEventListener('touchstart', this, false);
         };
         FastButton.prototype.handleEvent = function(event) {
            switch (event.type) {
               case 'touchstart': this.onTouchStart(event); break;
               case 'touchmove': this.onTouchMove(event); break;
               case 'touchend': this.onClick(event); break;
               case 'click': this.onClick(event); break;
            }
         };
         FastButton.prototype.onTouchStart = function(event) {

event.stopPropagation();
            this.element.addEventListener('touchend', this, false);
            document.body.addEventListener('touchmove', this, false);
            this.startX = event.touches[0].clientX;
            this.startY = event.touches[0].clientY;
 isMoving = false;
         };
         FastButton.prototype.onTouchMove = function(event) {
            if(Math.abs(event.touches[0].clientX - this.startX) > 10 || Math.abs(event.touches[0].clientY - this.startY) > 10) {
               this.reset();
            }
         };
         FastButton.prototype.onClick = function(event) {
            this.reset();
            this.handler(event);
            if(event.type == 'touchend') {
               preventGhostClick(this.startX, this.startY);
            }
         };
         FastButton.prototype.reset = function() {
            this.element.removeEventListener('touchend', this, false);
            document.body.removeEventListener('touchmove', this, false);
         };
         function preventGhostClick(x, y) {
            coordinates.push(x, y);
            window.setTimeout(gpop, 2500);
         };
         function gpop() {
            coordinates.splice(0, 2);
         };
         function gonClick(event) {
            for(var i = 0; i < coordinates.length; i += 2) {
               var x = coordinates[i];
               var y = coordinates[i + 1];
               if(Math.abs(event.clientX - x) < 25 && Math.abs(event.clientY - y) < 25) {
                  event.stopPropagation();
                  event.preventDefault();
               }
            }
         };
         document.addEventListener('click', gonClick, true);
         var coordinates = [];
         function initFastButtons() {
 new FastButton(document.getElementById("fastclick"), goSomewhere);
         };
         function goSomewhere() {
 var theTarget = document.elementFromPoint(this.startX, this.startY);
 if(theTarget.nodeType == 3) theTarget = theTarget.parentNode;

 var theEvent = document.createEvent('MouseEvents');
 theEvent.initEvent('click', true, true);
 theTarget.dispatchEvent(theEvent);
         };
//======================================================== 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-24T14:49:43.660

[Ben Howdle](https://stackoverflow.com/users/478144/benhowdle89)最近创建了一个开源项目[Touche.js](http://benhowdle.im/touche/)，它以一种相当简单和优雅的方式解决了这个问题。对于寻求解决此问题的任何人来说，可能值得一看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-30T16:28:31.807

这对我有用。每当将新页面添加到 dom 中时，我们就可以将快速点击附加到所有链接...

```
 // when new pages are loaded into the DOM via JQM AJAX Nav, apply ko bindings to that page's DOM
$(document).on('pageinit', '.ui-page', function (event, data)
{
    var activePage = $(event.target).get(0);
    FastClick.attach(activePage);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-25T16:05:46.170

我无法直接对 MikeZ 的推荐发表评论。

我成功地使用了它，但不得不做一些额外的 tweek，尤其是对于 android 设备。

而不是调用`event.preventDefault();`gonClick()，我还必须调用`event.stopImmediatePropagation();`

否则，您可能会遇到麻烦，尤其是当动态元素（例如面板）在您单击的元素之上打开时。

与 MikeZ 解决方案一起使用的完整 gonClick() 方法：

```
function gonClick(event) {
    for ( var i = 0; i < coordinates.length; i += 2) {
        var x = coordinates[i];
        var y = coordinates[i + 1];
        if (Math.abs(event.clientX - x) < 25 && Math.abs(event.clientY - y) < 25) {
            event.stopPropagation();
            event.preventDefault();
            event.stopImmediatePropagation();
        }
    }
}; 
```

# c# - 如何使用 T4 功能

> ID：13477333
> 
> 赞同：0
> 
> 时间：2012-11-20T16:12:57.340
> 
> 标签：c#, sharpdevelop

你如何使用T4系统。我遇到的问题是我找不到任何有关如何执行转换命令的示例。如果这有所作为，我正在使用 SharpDevelop。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:23:19.047

Matt Ward[在这里](http://community.sharpdevelop.net/blogs/mattward/archive/2011/06/26/T4TemplatesInSharpDevelop.aspx)展示了如何在 SharpDevelop 中创建 T4。如果问题是如何使用 T4，正如他在同一篇文章中所说，Oleg Sych 在他的[网站上有很棒的教程](http://www.olegsych.com/2007/12/text-template-transformation-toolkit/)

# android - ImageView 导致崩溃，但仅在从待机模式恢复时

> ID：13477336
> 
> 赞同：0
> 
> 时间：2012-11-20T16:13:06.277
> 
> 标签：android, android-lifecycle, standby

我有一个使用另外两个类的 Activity 类；其中一个扩展 ImageView 和一个扩展 BaseAdapter ，如下所示： ![像这样](../Images/d86dd3e50c4b1657927cd5e494310e8c.png)

我的 ImageView 类在被调用时会取得一些进展，当我第一次启动它时，它会按照我的意愿进行操作。如果我按下主页按钮然后恢复，情况也是如此。但是由于某种原因，如果我从待机模式恢复它就不起作用。（按下手机上使屏幕变暗的按钮）当我解锁手机时它崩溃了。它在 nullPointerException 上崩溃，当我尝试在 BaseAdapter 定义的 GridView 上调用 getChildAt() 时，我可以读到它。

有什么方法可以让应用程序在我按下主页按钮时执行相同的操作，就像我将手机设置为待机模式时一样？编辑：

```
public MyCustomDefinedImageViewClass (Context context) {
super (context);
mContext = context;
    MyCustomDefinedImageViewClass someThing =(MyCustomDefinedImageViewClass)gridViewIGetTheChildFrom.getChildAt(some int); 
```

这就是导致我崩溃的原因：

```
 11-19 22:00:48.200: E/AndroidRuntime(6252):     at my.package.name.MyCustomDefinedImageViewClass.<init>(MyCustomDefinedImageViewClass.java:57) 
```

我不认为代码有多大帮助，这就是为什么我没有首先发布它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T15:20:11.780

尝试添加

```
android:configChanges="keyboardHidden|orientation|screenLayout" 
```

到您的清单文件。崩溃是锁定屏幕出现时活动重新启动的结果。锁定屏幕强制纵向，如果您还没有准备好处理它，那么您的应用程序可能会崩溃。

如果这样做不行，请尝试覆盖[onRetainNonConfigurationInstance()](http://developer.android.com/reference/android/app/Activity.html#onRetainNonConfigurationInstance%28%29)。

有关如何保留对象的信息，请参阅此帖子：[How to save lot of object in onRetainNonConfigurationInstance() in android](https://stackoverflow.com/questions/7783673/how-to-save-lot-of-object-in-onretainnonconfigurationinstance-in-android)

另请阅读此[android-group 线程](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/Guv6-p4ujrE)以了解设备进入睡眠状态时会发生什么。

# debugging - VB6 调试器，如 Numega SmartCheck

> ID：13477339
> 
> 赞同：2
> 
> 时间：2012-11-20T16:13:13.533
> 
> 标签：debugging, vb6, ollydbg

我曾经使用 Numega SmartCheck 工具来分析 VB6 应用程序以捕获 Windows XP 中的所有事件和内存访问。但由于我已升级到 Windows 8，我无法运行任何应用程序，并且出现访问冲突错误。

好吧，我正在考虑新的等效或更好的应用程序。哪个是最适合他们的调试器/模拟器？PS：我正在使用 Ollydbg。所以我期待一些高级仿真器/调试器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:40:12.817

我在 Windows Server 2008 R2 和 Windows 7 上遇到了与 VB6 应用程序类似的问题。在我的案例中，我帮助禁用了`DEP`（数据执行保护）机制。

请查看如何在 Windows 8 上禁用 DEP的[演练。](http://windows8themes.org/how-to-disable-data-execution-prevention-in-windows-8.html)

# scala - scala 的蛋糕模式是否可以使用参数化组件？

> ID：13477342
> 
> 赞同：2
> 
> 时间：2012-11-20T16:13:25.900
> 
> 标签：scala, dependency-injection, cake-pattern

只要您只对每个类型化组件的唯一组件感兴趣，参数化组件就可以很好地与蛋糕模式配合使用，例如：

```
trait AComponent[T] {
  val a:A[T]

  class A[T](implicit mf:Manifest[T]) {
    println(mf)
  }
}

class App extends AComponent[Int] {
  val a = new A[Int]()
}

new App 
```

现在我的应用程序需要我注入一个 A[Int] 和一个 A[String]，显然 scala 的类型系统不允许我扩展 AComponent 两次。这种情况下的常见做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:57:01.600

我认为 AComponent 本身不需要参数化。所以松开类型参数并将其更改为

```
trait AComponent {
    val aInt: A[Int]
    val aStr: A[String]
    class A[T](implicit mf:Manifest[T]) {
        println(mf)
    }
} 

class App extends AComponent {
    val aInt = new A[Int]()
    val aStr = new A[String]()
} 
```

如果您希望能够为 Int 和 String 提供实例

# excel - 屏幕抓取一个单独的程序

> ID：13477345
> 
> 赞同：1
> 
> 时间：2012-11-20T16:13:32.040
> 
> 标签：excel, vba

我有一个名为 IRESS 的应用程序，其中包含数据，然后我手动将其复制并粘贴到电子表格中以进行某些计算。我想知道是否有任何可能的方法来自动化这个过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T23:44:33.997

IRESS 有一个 Web 服务接口，您可以在[此处](https://webservices.iress.com.au/)找到更多信息。因此，如果您向 IRESS 发送格式正确的消息，它会回复一条包含您请求的数据的消息，然后您可以使用该数据更新电子表格

# ruby-on-rails - 您如何为其他语言环境提供自定义错误消息？（动作邮件）

> ID：13477347
> 
> 赞同：2
> 
> 时间：2012-11-20T16:13:34.083
> 
> 标签：ruby-on-rails, ruby, internationalization, actionmailer

**工作：** [在区域设置为 时有效`en`] 当我单击“发送”按钮时，它会显示错误消息`name is blank`，`email is blank`如 、 等（当字段为空时），这很好。输出如下所示：

```
3 errors prohibited this message from being sent:

Email can't be blank
Email is invalid
Subject can't be blank 
```

**不工作：**但是 [当区域设置为时不工作`es`] 当我单击“发送”按钮时，它会显示下面列出的错误消息：

```
3 errors prohibited this message from being sent:

Email translation missing: es.activemodel.errors.models.message.attributes.email.blank
Email translation missing: es.activemodel.errors.models.message.attributes.email.invalid
Subject translation missing: es.activemodel.errors.models.message.attributes.subject.blank 
```

**问题**所以我如何使这个翻译工作需要帮助，时间不多了。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T16:25:10.120

您的 es 语言环境文件中是否设置了值 es.activemodel.errors.models.message.attributes.email.blank？

像这样在`es.yml`：

```
es:
  activemodel:
    errors:
      models:
        message:
          attributes:
            email:
              blank: "I don't speak spanish I can't give an example ... Shame on me!" 
```

# actionscript-3 - AS3 - removeEventListener(ADDED_TO_STAGE)

> ID：13477354
> 
> 赞同：0
> 
> 时间：2012-11-20T16:13:57.297
> 
> 标签：actionscript-3, events, actionscript, event-handling

我在尝试删除我`Event.ADD_TO_STAGE`开发的这个游戏时遇到了一些问题，一旦生命小于或等于零，游戏将结束并切换到屏幕上的游戏，但是当我这样做时，它会出现此错误。

```
ArgumentError: Error #2025: The supplied DisplayObject must be a child of the caller.   
at flash.display::DisplayObjectContainer/removeChild()
at States/changeState()
at AvoiderGame/onTick()
at flash.utils::Timer/_timerDispatch()
at flash.utils::Timer/tick() 
```

然后变成..

```
TypeError: Error #1009: Cannot access a property or method of a null object reference.
at Enemy/StayOnScreen()
at AvoiderGame/onTick()
at flash.utils::Timer/_timerDispatch()
at flash.utils::Timer/tick() 
```

我不完全确定为什么 - 任何人都可以澄清它为什么会这样以及我该如何解决它？

```
package
{
import flash.display.MovieClip;
import flash.utils.Timer;
import flash.events.Event;
import flash.events.TimerEvent;
import com.freeactionscript.CollisionTest;
import flash.display.Stage;

public class AvoiderGame extends MovieClip
{
    var theCallBackFunction:Function;

    public static var enemyArray:Array;
    public var enemy:Enemy
    public var Background:gameBackground;
    public var Lives:Number = 3;

    public var avatar:Avatar;
    public var gameTimer:Timer;

    private var _collisionTest:CollisionTest;
    private var numStars:int = 80;

    private var fireTimer:Timer; //causes delay between fires
    private var canFire:Boolean = true; //can you fire a laser

    public function AvoiderGame(callBack)
    {
        this.addEventListener(Event.ADDED_TO_STAGE, init);
        theCallBackFunction = callBack;
    }

    private function init(e:Event):void
    {
        Background = new gameBackground();
        addChild(Background);

        enemyArray = new Array();

        avatar = new Avatar(stage);
        addChild(avatar);

        avatar.x = stage.stageWidth / 2;
        avatar.y = stage.stageHeight / 2;

        _collisionTest = new CollisionTest();

        gameTimer = new Timer(25);
        gameTimer.addEventListener(TimerEvent.TIMER, onTick);
        gameTimer.start();

        for (var i:int = 0; i < numStars; i++)
        {
            stage.addChildAt(new Star(stage), 1);
        }

        fireTimer = new Timer(1000, 1);
        fireTimer.addEventListener(TimerEvent.TIMER, fireTimerHandler, false, 0, true);
        fireTimer.start();
    }

    public function onTick(timerEvent:TimerEvent):void 
    {

        if (Math.random() < 0.1)
        {
            trace('array length: ', AvoiderGame.enemyArray.length);
            enemy = new Enemy(Math.round(1 + (500 - 1) * Math.random()), - 28, stage);
            enemyArray.push(enemy);
            addChild(enemy);
            enemy.gotoAndStop("Enemy" + Math.round(1 + (5 - 1) * Math.random()))
        }

        canFire = avatar.UpdateAvatar(canFire);
        if (canFire == false)
        {
            fireTimer.start();
        }
        avatar.StayOnScreen();

        for each (var enemy:Enemy in enemyArray)
        {
            enemy.moveDown();
            enemy.StayOnScreen();
            if (_collisionTest.complex(enemy, avatar)) 
            {
                gameTimer.stop();
                for each (var enemy:Enemy in enemyArray)
                {
                    for(var i:int = 0; i < enemyArray.length; i++)
                    {
                        removeChild(enemyArray[i]);
                        enemyArray.splice(i, 1); //remove the i'th element as i'th element is the enemy containing the ID of hit enemy
                    }
                }
                Lives--;
                trace('lives: ', Lives);
                gameTimer.start();
            }
        }

        if (Lives == 0)
        {
            removeEventListener(Event.ADDED_TO_STAGE, init)
            theCallBackFunction(this, "over");
        }
    }
    private function fireTimerHandler(e:TimerEvent) : void
    {
        //timer ran, we can fire again.
        canFire = true;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:25:54.357

//使用弱引用，以便在必要时可以处理监听器

```
this.addEventListener(Event.ADDED_TO_STAGE, init, false, 0, true);

private function init(e:Event):void {

//remove this now as we have added the object to the stage
this.removeEventListener(Event.ADDED_TO_STAGE, init);

//add a new listener that will fire when the object is removed from stage
this.addEventListener(Event.REMOVED_FROM_STAGE, reset, false, 0, true); 
```

...

```
private function reset(e:Event):void {

//this function is called when the object has been removed from the stage
this.removeEventListener(Event.REMOVED_FROM_STAGE, reset);

//now make sure all timers and stopped and nulled if required
//as well as all objects removed from stage and nulled if required. e.g.

fireTimer.stop();
fireTimer = null;

enemyArray = [];
enemyArray = null;

enemy

removeChild(Background);
Background = null;

removeChild(avatar);
avatar = null;

gameTimer.stop();
gameTimer = null;

_collisionTest = null;

} 
```

//注意。您正在向舞台添加星星，但无法引用它们来删除它们。

```
for (var i:int = 0; i < numStars; i++)
{
   stage.addChildAt(new Star(stage), 1);
} 
```

//您可能希望将它们添加到数组中，以便可以删除它们。

```
var starArray = [];

for (var i:int = 0; i < numStars; i++)
{
   var newStar:Star = new Star(stage);
   stage.addChildAt(newStar, 1);
   starArray.push(newStar);
} 
```

然后删除它们：

```
for (var i:int = starArray.length; i > 0; i--)
{

   stage.removeChild(starArray[starArray.length-1]);

}
starArray = [];
starArray = null; 
```

# java - 在 solr 和 java 中计算文档中单词的 TF-IDF

> ID：13477357
> 
> 赞同：4
> 
> 时间：2012-11-20T16:14:02.780
> 
> 标签：java, solr, nlp, tf-idf

我可以通过计算文档中的 Term 数轻松获得 TF，我想知道如何计算文档频率，即包含该术语的文档数

到目前为止，我已经达到的是使用大量行查询 solr 并计算结果，但这非常耗费时间和内存。我只想计算条款

```
 SolrQuery q = new SolrQuery();
    q.setQuery("tweet_text:"+kw);
    q.addField("tweet_text");
    q.setRows(40000000);        
    SolrDocumentList results = null ;

    try {
        QueryResponse rsp = solrServer.query(q);
        results = rsp.getResults();
    } catch (SolrServerException e) {
        e.printStackTrace();
    }

    ArrayList<String> tweets = new ArrayList<String>();
    for (SolrDocument doc : results)
    {
        tweets.add(doc.getFieldValue("tweet_text").toString());
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T16:42:27.623

在 SOLR 中，您可以使用函数查询直接查询 docFreq，如下所示：[http](http://wiki.apache.org/solr/FunctionQuery#docfreq) ://wiki.apache.org/solr/FunctionQuery#docfreq ，

```
q={!func}docFreq(tweet_text, kw) 
```

请注意，该页面上还记录了获取 tf、idf 和 termfreq 的函数查询方法，这也可能对您有所帮助。

* * *

*回想起来，这可能与这个问题不太相关*，但我会暂时留下它，以防它对你有用。

[IndexReader.docFreq(Term)](http://lucene.apache.org/core/old_versioned_docs/versions/3_5_0/api/core/org/apache/lucene/index/IndexReader.html#docFreq(org.apache.lucene.index.Term))可以为您提供所需的内容。

如：

```
reader.docFreq(new Term("tweet_text", kw));' 
```

顺便说一下，IndexSearcher.docFreq(Term) 是一回事。

# java - servlet 在我的 webcontent 文件夹中找不到文件

> ID：13477359
> 
> 赞同：0
> 
> 时间：2012-11-20T16:14:06.817
> 
> 标签：java, servlets

这是我的 Servlet 代码片段，它生成 PDF 然后打开它。它无法打开“AvtoSolaZaposleniXSL.xsl”文件。如果我在普通的 Java 类中运行相同的过程，一切都会顺利进行。

```
public class PDF extends HttpServlet {
private static final long serialVersionUID = 1L;

public PDF() { super(); }

protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

    //Generiraj PDF
    File xmlfile = new File(getServletContext().getRealPath("AvtoSolaZ.xml"));
    File xsltfile = new File(getServletContext().getRealPath("AvtoSolaZaposleniXSL.xsl"));      
    ExampleXML2PDF.generirajPDF(xmlfile, xsltfile);

    //Počakaj da se v miru zgenerira PDF
    try {
        Thread.sleep(5000L);
    } catch (InterruptedException e1) {
        e1.printStackTrace();
    }

    //Zaženi pdf
    File f1 = new File(getServletContext().getRealPath("Avtosola.pdf"));
    String pdfKoncni = f1.toString();
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    PdfReader reader = new PdfReader(pdfKoncni);
    PdfStamper stamper = null;
    try {
        stamper = new PdfStamper(reader, baos);
    } catch (DocumentException e) {
        e.printStackTrace();
    }
    try {
        stamper.close();
    } catch (DocumentException e) {
        e.printStackTrace();
    }

    // set some response headers
    response.setHeader("Expires", "0");
    response.setHeader("Cache-Control", "must-revalidate, post-check=0, pre-check=0");
    response.setHeader("Pragma", "public");
    response.setContentType("application/pdf");
    response.setContentLength(baos.size());

    OutputStream os = response.getOutputStream();
    baos.writeTo(os);
    os.flush();
    os.close();
} 
```

我的所有文件都在 WebContent 文件夹中，而我的 Servlet 在默认包中。

错误：

(错误位置未知)java.io.FileNotFoundException: C:\Eclipse\eclipse\WebContent\AvtoSolaZaposleniXSL.xsl (系统找不到指定的文件) java.lang.NullPointerException

相信我，我已经搜索过这样的答案，但没有找到任何可以真正帮助我的东西。即使我放置了整个路径（不是 C:\Eclipse\eclipse... 而且我不知道为什么会这样说..）它仍然无法正常工作。

就像我说的。如果我在普通的 Java 类中运行它，它会正常生成 PDF 并且工作得很好......

```
import java.io.File;

public class Test {

public static void main(String[] args) {        

    File xmlfile = new File("WebContent/AvtoSolaZ.xml");
    File xsltfile = new File("WebContent/AvtoSolaZaposleniXSL.xsl");
    ExampleXML2PDF.generirajPDF(xmlfile, xsltfile);
}
} 
```

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:30:02.550

服务器指的是读取文件的绝对路径。

因此，在您的情况下.. 将您的文件放在 projectRootName/AvtoSolaZaposleniXSL.xsl 下。

它会起作用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:21:21.813

我重新考虑了我的问题，并想出了一个更简单的解决方案来显示生成的 pdf。我刚刚使用了我的类，它生成了一个 pdf（XSL-FO 转换，需要一个 xml 和 xsl ..）并将代码复制到 servlet 中。调整了输出流和voula！

这是新的 servlet 的代码，它工作得很好：

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

    try {

        response.setContentType("application/pdf"); 

        // Setup directories
        File xmlfile = new File(getServletContext().getRealPath("/AvtoSolaZ.xml"));
        File xsltfile = new File(getServletContext().getRealPath("/AvtoSolaZaposleniXSL.xsl")); 
        File outDir = new File("WebContent");
        outDir.mkdirs();

        // configure fopFactory as desired
        FopFactory fopFactory = FopFactory.newInstance();

        FOUserAgent foUserAgent = fopFactory.newFOUserAgent();
        // configure foUserAgent as desired

        // Setup output
        OutputStream out = response.getOutputStream();

        try {
            // Construct fop with desired output format
            Fop fop = fopFactory.newFop(MimeConstants.MIME_PDF, foUserAgent, out);

            // Setup XSLT
            TransformerFactory factory = TransformerFactory.newInstance();
            Transformer transformer = factory
                    .newTransformer(new StreamSource(xsltfile));

            // Set the value of a <param> in the stylesheet
            transformer.setParameter("versionParam", "2.0");

            // Setup input for XSLT transformation
            Source src = new StreamSource(xmlfile);

            // Resulting SAX events (the generated FO) must be piped through
            // to FOP
            Result res = new SAXResult(fop.getDefaultHandler());

            // Start XSLT transformation and FOP processing
            transformer.transform(src, res);

        } finally {
            out.close();
        }

    } catch (Exception e) {
        e.printStackTrace(System.err);
        System.exit(-1);
    }
} 
```

# c# - 为什么我的值没有传递给我的类的属性？

> ID：13477360
> 
> 赞同：0
> 
> 时间：2012-11-20T16:14:07.503
> 
> 标签：c#, oop, class

所以我有一堂课：

```
public class Person
{
    public string Firstname { get; set; }
    public string Lastname { get; set; }

    public Person()
    {
        AddPerson();
    }

    private void AddPerson()
    {
        string fn = this.Firstname;
        string ln = this.Lastname;
        // Do something with these values
        // Probably involves adding to a database
    }

} 
```

我有一些代码可以实例化一个对象并将其添加到数据库中，返回 type 的对象`Person`：

```
Person me = new Person()
{
    Firstname = "Piers",
    Lastname = "Karsenbarg"
}; 
```

但是，当我调试它并进入`AddPerson()`方法时，属性`this.Firstname`并`this.Lastname`没有任何东西（在这种情况下是空的）。

我哪里错了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T16:15:13.090

这是因为属性是在调用构造函数之后分配的。基本上，这个：

```
Person me = new Person()
{
    Firstname = "Piers",
    Lastname = "Karsenbarg"
}; 
```

*等同*于：

```
Person me = new Person();
me.Firstname = "Piers";
me.Lastname = "Karsenbarg"; 
```

这里唯一的区别是语法。在您的情况下，您可能希望通过参数化构造函数 ( `new Person("Piers", "Karsenbarg")`) 传递这些变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T16:19:47.937

您尚未为您的属性分配任何值。我建议在构造函数中传入你想要的名称：

```
 public class Person
{
    public string Firstname { get; set; }
    public string Lastname { get; set; }

    public Person(string firstname, lastname)
    {
        this.Firstname = firstname;
        this.Lastname = lastname;
        AddPerson();
    }

    private void AddPerson()
    {
        string fn = this.Firstname;
        string ln = this.Lastname;
        // Do something with these values
        // Probably involves adding to a database
    }

} 
```

一个人不能没有名字或姓氏就存在，所以这是合乎逻辑的

# homebrew - 如何酿造链接特定版本？

> ID：13477363
> 
> 赞同：170
> 
> 时间：2012-11-20T16:14:12.573
> 
> 标签：homebrew

我有几桶相同包装的`/usr/local/Cellar/libfoo`类似物品`/usr/local/Cellar/libfoo/1.0.1`，`/usr/local/Cellar/libfoo/HEAD`并且`/usr/local/Cellar/libfoo/mycopy`

如何将链接链接到特定版本？

* * *

## 回答 #1

> 赞同：320
> 
> 时间：2013-06-14T07:58:07.383

**在 Homebrew 2.6.0（2020 年 12 月）中已弃用。跳到最后更新以获取有效的解决方案**

使用信息：

```
Usage: brew switch <formula> <version> 
```

例子：

```
brew switch mysql 5.5.29 
```

您可以使用`info`.

```
brew info mysql 
```

要查看要安装的可用版本，您可以提供一个无用的版本号，因为 brew 将帮助响应可用的版本号：

```
brew switch mysql 0 
```

* * *

**更新（15.10.2014）：**

该`brew versions`命令已从 brew 中删除，但是，如果您确实希望使用此命令，请先运行`brew tap homebrew/boneyard`.

安装旧版本的推荐方法是从`homebrew/versions`repo 安装，如下所示：

```
$ brew tap homebrew/versions
$ brew install mysql55 
```

* * *

**更新（11.1.2022）：**

[这可能是今天最好的方法](https://stackoverflow.com/a/9832084/1574376)：

要安装特定版本，例如 postgresql 9.5，您只需运行：

```
$ brew install postgresql@9.5 
```

要列出可用版本，请使用 @ 进行搜索：

```
$ brew search postgresql@
==> Formulae
postgresql                 postgresql@11              postgresql@13              postgresql@9.5             qt-postgresql
postgresql@10              postgresql@12              postgresql@9.4             postgresql@9.6             postgrest

==> Casks
navicat-for-postgresql 
```

* * *

有关安装旧版本公式的所有方法的详细信息，请阅读[此答案](https://stackoverflow.com/a/4158763/1574376)。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2021-05-12T07:41:37.010

可悲的是，在[Homebrew 2.6.0](https://brew.sh/2020/12/01/homebrew-2.6.0/)（2020 年 12 月）`brew switch`中已弃用

```
$ brew switch
Error: Unknown command: switch 
```

TLDR，切换到`package`版本`10`：

```
brew unlink package
brew link package@10 
```

* * *

要使用另一个版本的包，例如`node`：

*   首先，确保使用`brew list`. 我的包裹是`node`(16) 和`node@14`.

```
➜  ~ brew list
==> Formulae
node
node@14

➜  ~ node -v
v16.1.0 
```

*   取消链接当前包：`brew unlink node`。

```
➜  ~ brew unlink node
Unlinking /usr/local/Cellar/node/16.1.0... 7 symlinks removed. 
```

*   链接正确的版本

```
➜  ~ brew link node@14
Linking /usr/local/Cellar/node@14/14.16.1_1... 3857 symlinks created.

If you need to have this software first in your PATH instead consider running:
  echo 'export PATH="/usr/local/opt/node@14/bin:$PATH"' >> ~/.zshrc
➜  ~ node -v
v14.16.1 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-11-20T16:36:57.027

我在#machomebrew 中询问并了解到您可以使用 brew switch 在版本之间切换。

```
$ brew switch libfoo mycopy 
```

获取 libfoo 的 mycopy 版本。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-09-09T11:37:08.757

例如，如果您安装了 php 5.4，则可以通过以下方式将其切换到 php 5.5：

```
$ php --version
PHP 5.4.32 (cli) (built: Aug 26 2014 15:14:01) 
Copyright (c) 1997-2014 The PHP Group
Zend Engine v2.4.0, Copyright (c) 1998-2014 Zend Technologies

$ brew unlink php54

$ brew switch php55 5.5.16

$ php --version
PHP 5.5.16 (cli) (built: Sep  9 2014 14:27:18) 
Copyright (c) 1997-2014 The PHP Group
Zend Engine v2.5.0, Copyright (c) 1998-2014 Zend Technologies 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-11-29T06:55:00.817

`brew switch libfoo mycopy`

如果它作为版本控制的子目录安装，您可以使用`brew switch`它在同一包的版本之间切换`Cellar/<packagename>/`

这将列出安装的版本（例如我有`Cellar/sdl2/2.0.3`，我已经编译成`Cellar/sdl2/2.0.4`）

```
brew info sdl2 
```

然后在它们之间切换

```
brew switch sdl2 2.0.4
brew info 
```

信息现在显示`*`在 2.0.4 旁边

要从源代码安装`Cellar/<packagename>/<version>`，您可以执行以下操作

```
cd ~/somewhere/src/foo-2.0.4
./configure --prefix $(brew --Cellar)/foo/2.0.4
make 
```

检查它的安装位置

```
make install -n 
```

如果一切看起来都正确

```
make install 
```

然后从`cd $(brew --Cellar)`做版本之间的切换。

我在用着`brew version 0.9.5`

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2021-05-23T05:31:42.260

Homebrew 删除了[Homebrew 2.6.0](https://brew.sh/2020/12/01/homebrew-2.6.0/)`brew switch`中的子命令。从[这里](https://github.com/laggardkernel/homebrew-tap#external-commands)取回来。

```
brew tap laggardkernel/tap
brew switch --help 
```

* * *

### 名称@版本公式

切换到旧版本的应用程序主要有两种方法。

如果是更大的版本更改。Homebrew 可能已经在 repo 中创建了一个版本化的包。像`go`, `go@1.10`，它们是两个不同的公式，安装在两个不同的位置。

```
# install the old one
brew install go@1.10

# link the executable into /usr/local/bin, or /opt/homebrew/bin
brew link --overwrite --force go@1.10 
```

### 冲泡开关

但并不是每个包都有版本化的变体。如果您刚刚升级到新版本并且旧版本仍在您的系统中，请跳过步骤 1、2。

1.  在这种情况下，请在[homebrew-core](https://github.com/Homebrew/homebrew-core/) repo 中搜索并下载具体公式。例如[mysql 8.0.23](https://github.com/Homebrew/homebrew-core/blob/58946207e43b0e7222f6c920ef4b053e52baf76d/Formula/mysql.rb)
2.  下载**原始**文件，并从中安装`brew install /path/to/downloaded/mysql.rb`。
3.  现在最新的和旧的 8.0.23 （相同的公式`mysql`）都存在，切换（链接）旧版本`brew switch mysql 8.0.23`

`brew info mysql`将列出所有仍然存在的旧版本。

步骤 1、2 可以替换为`brew extract`，但这需要用户维护自己的水龙头。我这里就不介绍了，有兴趣的可以自行搜索。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-04-30T18:47:04.287

如果`brew switch`产生错误（在此示例中尝试切换到节点版本 14）：

```
> brew switch node 14
Error: Calling `brew switch` is disabled! Use `brew link` @-versioned formulae instead. 
```

切换版本的正确方法是：

```
> brew link --overwrite node@14 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2017-07-09T10:57:43.263

如果@simon 的答案在某些mac 中不起作用，请按照以下过程操作。

如果您已经使用以下命令安装了 swiftgen：

$ `brew update` $`brew install swiftgen`

然后按照以下步骤使用旧版本运行 swiftgen。

第 1 步：`brew uninstall swiftgen` 第 2 步：导航到：[https](https://github.com/SwiftGen/SwiftGen/releases) ://github.com/SwiftGen/SwiftGen/releases 并下载 swiftgen，版本为：swiftgen-4.2.0.zip。

在任何目录中解压缩包。

第 3 步：在终端中执行以下命令：

```
$ mkdir -p ~/dependencies/swiftgen
$ cp -R ~/<your_directory_name>/swiftgen-4.2.0/ ~/dependencies/swiftgen
$ cd /usr/local/bin
$ ln -s ~/dependencies/swiftgen/bin/swiftgen swiftgen
$ mkdir ~/Library/Application\ Support/SwiftGen
$ ln -s ~/dependencies/swiftgen/templates/ ~/Library/Application\ Support/SwiftGen/

$ swiftgen --version 
```

你应该得到：SwiftGen v0.0（Stencil v0.8.0，StencilSwiftKit v1.0.0，SwiftGenKit v1.0.1）

[![在此处输入图像描述](../Images/a938c8bfe49968ef2d4e238d2b790ebd.png)](https://i.stack.imgur.com/YKnK2.png)

# ruby-on-rails - 如何在不唯一的“association_type”和“association_id”的rails中索引多态表

> ID：13477365
> 
> 赞同：13
> 
> 时间：2012-11-20T16:14:32.203
> 
> 标签：ruby-on-rails, ruby, database, polymorphism

我有一个名为“Votes”的多态表，其中有来自 Answers 和 Questions 的投票。

投票

```
user_id     voteable_id    voteable_type      value

   1             2            Answer            1
   2             2            Answer            1 
```

在这种情况下，id = 2 的答案有两票赞成。

问题是：**如何索引这个表？**

**第一种方法：**

```
add_index :votes, [:voteable_id, :voteable_type] 
```

这不起作用，因为重复的键值将违反唯一约束

**第二种方法：**

```
 add_index :votes, :voteable_id, 
 add_index :votes, :voteable_type 
```

我猜这个不会有太多性能，因为同时对 id 和 type 进行复合查询。

**第三种方法：**

```
add_index :votes, [:user_id, :voteable_id, :voteable_type] 
```

最后一张好看吗？三列是否要索引太多？

谢谢

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-20T16:47:52.243

你的第一种方法是正确的

```
add_index :votes, [:voteable_id, :voteable_type] 
```

只要你不添加`:unique => true`它就**不会**是唯一的。而且你不应该让它独一无二，因为这将导致每次投票只能投一票。正如[塔索斯](https://stackoverflow.com/users/5909738/tashows "塔秀")在评论中所说。

第三种方法也可以，在这里您可以使用`unique`约束，因此每个用户只能投票一次。

# multithreading - 如何正确退出线程内的子进程？

> ID：13477368
> 
> 赞同：1
> 
> 时间：2012-11-20T16:14:41.123
> 
> 标签：multithreading, perl, fork

我正在尝试处理线程内的超时。我的脚本有4个线程，每个线程都需要执行命令，如果时间过长，就杀死命令进程。

我正在做的是：

```
my $pid;
if (!($pid = fork))
  {                                                                                                                                                                                                  
    my $pid2;
    if (!($pid2 = fork))
      {
        exec_cmd $command;
      }
    local $SIG{ALRM} = sub {kill 9, $pid2;};
    alarm $timeout;
    waitpid $pid2, 0;

    exit(0);
  }
  waitpid $pid, 0;
  $ret = $?; 
```

这是在一个线程内执行的，因此当子进程退出时，其他线程仍然未加入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T20:30:34.470

我*想*你在问，我怎样才能对从 perl 线程产生的子进程的执行强制执行时间限制，并捕获该子进程的退出代码？

**您可以做的最简单的事情**（在 UNIX 系统上）是在子进程本身上设置警报：

```
my $pid = fork();
if (defined($pid) and $pid == 0) {
  alarm($timeout);  # Preserved across exec()
  exec(...);
  die "exec(): $!";
} 
```

退出状态仍将像往常一样在`waitpid`/中可用。`$?`

**您可以做的最安全的事情**是在多线程时不要分叉。这对应用程序和实现都是危险的。应用程序，因为子进程将运行父线程的副本。实施，因为这样做时强制“不平衡范围/保存/tmps/context”错误相对容易`threads`。

# hadoop - 如何创建自己的 RecommenderJob？

> ID：13477369
> 
> 赞同：1
> 
> 时间：2012-11-20T16:14:48.020
> 
> 标签：hadoop, mapreduce, mahout

我找到了几个关于如何创建我自己的非分布式推荐器的教程，但没有找到如何创建我自己的分布式推荐器工作的教程（如果你知道的话，欢迎任何链接）。

在“Mahout in Action”一书中，有一些如何使用 Mahout 的对象编写 Mappers/Reducers 的示例，但似乎没有说明如何将这些工作放在一起？

然而，mahout-core 中有 item/RecommenderJob，它给出了如何做到这一点的想法。我的实际意图是替换第一个映射器，这样我就不必在 mahout 之外准备我的数据（行看起来像“userid,itemid1,itemid2,itemid3 ...”并使用 item.RecommenderJob 我显然需要像“ itemid1,itemid2", "itemid1,itemid3", ...)。

现在复制 RecommenderJob 类并更改我需要的内容是个好主意吗？我已经尝试过了，但是因为这个类使用了包范围内的变量（例如 UserVectorSplitterMapper.USERS_FILE），所以我必须替换这些——这感觉不好。

我是否应该创建一个扩展 AbstractJob 的新类并从 RecommenderJob 中挑选出我需要的东西？那么 RecommenderJob 中我真正需要的元素是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T16:27:28.850

您的替代方案是在工作之前使用您自己的工作，将您的输入转换为工作所需的形式，或者实际上只是修改工作。如果您需要不（并且没有意义）作为某种配置参数支持的重要更改，我认为复制作业并修改和自定义它并不是什么大不了的事。

# android - 使用 JqueryMobile 在 phoneGap 中启动应用程序时调用服务器

> ID：13477373
> 
> 赞同：0
> 
> 时间：2012-11-20T16:14:54.720
> 
> 标签：android, ios, cordova, jquery-mobile

我正在使用 PhoneGap 2.2.0 和 Jquery Mobile 1.2 开发应用程序。我需要应用程序在用户看到屏幕之前读取文件并调用服务器获取数据。我应该使用什么事件才能使其正常工作？我尝试了移动初始化和设备就绪，但效果不佳。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T22:08:04.133

假设您只是在这里谈论第一页，您不需要在页面呈现之前做任何事情 - 只需关闭 AutoHideSplashScreen 并在自定义呈现完成时手动隐藏它。

我使用该方法从数据库加载应用程序的第一页，但我不建议将其用于服务器连接 - 基本上，如果您未连接，应用程序将崩溃，因此无法通过应用商店审查.

为了不需要连接，我首先使用本地存储的数据呈现视图 - 在应用程序 javascript 中设置的默认值或上次成功调用的保存副本。然后 ajax 调用在后台运行，完成后可以更新视图。

# css - CSS类顺序

> ID：13477375
> 
> 赞同：0
> 
> 时间：2012-11-20T16:15:00.737
> 
> 标签：css, html, tags, styles

我有一个带有多个 div 和“a”标签的主“div”，我想设置一个“类似模板”的 css 以使它们看起来都一样，但是一些 A 标签需要不同，所以我想制作它像这样：

```
<div class="main">
   <a href="#" class="exception">CLick A</a>
   <br/>
   <a href="#">CLick B</a>
   <br/>
   <a href="#">CLick C</a>
   ....
</div>​ 
```

在CSS上：

```
.main a{
  /* Links Scheme */
}

.exception{
 /* particular link css */
}​ 
```

但是浏览器优先选择我的“模板”而不是特定的类。课程不应该是最重要的还是我错过了什么？

![ChromeDevTools](../Images/483771fd3f2cd32010f254420f5ce263.png)

[小提琴链接](http://jsfiddle.net/joaolvcm/DFNyW/)

PS：请不要使用“！important”标签

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T16:16:28.897

这是一个特殊性的问题。由于`.main a`包含一个类和一个标签名，它更具体，因此比仅仅一个类名具有更高的优先级。

因此，要解决它，请使用`.main .exception`您的异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T16:17:30.603

.main a 比 .exception 更具体。我认为你的目标是：

```
.main a{
  /* Links Scheme */
}

.main a.exception{
 /* particular link css */
}​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T16:18:03.073

在 css 中，顺序也取决于选择器的具体程度，因此请尝试更改`.exception`为`.main a.exception`.

jsFiddle：http: [//jsfiddle.net/jdwire/DFNyW/2/](http://jsfiddle.net/jdwire/DFNyW/2/)

# c# - 过滤 RadGrid 结果并存储到新的数据表中

> ID：13477376
> 
> 赞同：0
> 
> 时间：2012-11-20T16:15:03.767
> 
> 标签：c#, asp.net, telerik, radgrid

我有一个返回 8000 个结果的网格，我想按日期过滤这些结果并将它们存储到一个新的数据表中并稍后重新绑定。我收到此错误：

`Input array is longer than the number of columns in this table.`

我有哪些选择？

```
if (e.CommandName == "Filter")
{
    DataTable dt = new DataTable();

    foreach (GridDataItem item in RadGrid2.Items)
    {
        for (int i = 0; i < RadGrid2.Items.Count; i++ )
        {
            dt.Rows.Add(item);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T19:19:29.027

```
if (e.CommandName == "Filter")
     {
        DataTable dt = new DataTable();
        td.Columns.Add("Column1");
        td.Columns.Add("Column2");
        //etc.
        //add same columns as you have in RadGrid2

        foreach (GridDataItem item in RadGrid2.Items)
        {

            for (int i = 0; i < RadGrid2.Items.Count; i++ )
            {

                dt.Rows.Add(item);
            }
        } 
```

您必须将列添加到您的 DataTable td。项目不能添加到任何地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T19:24:12.937

将 8000 个结果返回给 RadGrid 太多了。

请考虑使用[AllowCustomPaging](http://www.telerik.com/help/aspnet-ajax/grid-custom-paging.html)，并仅检索您需要显示的行。

例如，在 Entity Framework 中使用[Skip and Take 。](http://byatool.com/utilities/paging-and-the-entity-framework-skip-and-take-part-3/)

# javascript - 我可以在 Grunt 中运行两次“min”任务吗？

> ID：13477377
> 
> 赞同：7
> 
> 时间：2012-11-20T16:15:07.877
> 
> 标签：javascript, node.js, gruntjs

有没有办法在 Grunt 中使用不同的配置两次运行任务？假设我的项目中有两组源文件，我想将它们缩小为两个单独的缩小输出文件。像这样：

```
project
    srcA
        fileA1.js
        fileA2.js
    srcB
        fileB1.js
        fileB2.js 
```

作为预期的结果，我希望看到`fileA.min.js`和`fileB.min.js`。我怎样才能做到这一点，因为`min`似乎只支持一组`src`和`dest`属性？

```
min: {
  dist: {
    src: [  'srcA/*.js'],
    dest: 'fileA.min.js'
  }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-20T17:45:57.590

当然在配置对象中你应该配置两个最小任务

```
min: {
  a_file: {
    src : [/* a src */],
    dest : "path_to_a_file"
  },
  b_file: {
    src : [/* b src */],
    dest : "path_to_b_file"
  }
} 
```

之后，您可以创建或重写默认任务，甚至将其添加到您的自定义任务中：

```
grunt.registerTask('minify', ['min:a_file', 'min:b_file'])
//or 
grunt.registerTask('build', ['concat', 'min:a_file', 'min:b_file']) 
```

现在您可以运行任务：

```
grunt minify
grunt build 
```

# java - 创建对象数组会产生语法错误

> ID：13477380
> 
> 赞同：0
> 
> 时间：2012-11-20T16:15:15.317
> 
> 标签：java, arrays

让我们开始谈正事吧。我有这行代码：

```
 public static Tile[] tiles = new Tile[400]; 
```

这在 eclipse 中给了我以下错误

```
 Syntax error on token ";", { expected after this token 
```

Tile 是同一个项目和包中的一个类，我想为其创建一个数组，因为我想不出任何其他方法来完成程序其余部分中的事情......

我在谷歌和stackoverflow上看过，但找不到答案。有人可以向我解释我做错了什么吗？

在此先感谢，德克。

编辑：这是瓷砖类：

```
 package com.mrdls.invade;

    public class Tile {

        public String name = "";
        public int id = 0;
        public boolean passable = false;

        public Tile(String name, int id){
            this.name = name;
            this.id = id;

            if(name == "air"){
                passable = true;
            }
        }
    } 
```

EDIT2，这里是 TilesBlocks 类

```
 package com.mrdls.invade;

    import java.awt.image.BufferedImage;

    import javax.imageio.ImageIO;

    public class TilesBlocks {

        public static BufferedImage tilesetBlocks;

        public static int pixelsPerTile = 20;

        public int[] ints = new int[20];

        public Tile[] tiles = new Tile[400];

        tiles[0] = new Tile("air", -1);
        /*public static final Tile earth = new Tile("earth", 0);
        public static final Tile stone = new Tile("stone", 1);
        public static final Tile cobblestone = new Tile("cobblestone", 2);
        public static final Tile sand = new Tile("sand", 3);
            public static final Tile sandstone = new Tile("sandstone", 4);
        public static final Tile grass = new Tile("grass", 5);
        public static final Tile woodLog = new Tile("log", 6);
        public static final Tile leaves = new Tile("leaves", 7);
        public static final Tile pumpkin = new Tile("pumpkin", 8);
        public static final Tile melon = new Tile("melon", 9);
        public static final Tile pumpkinCarved = new Tile("carved pumpkid", 10);

        public static final Tile copperOre = new Tile("copper ore", 20);
        public static final Tile tinOre = new Tile("tin ore", 21);
        public static final Tile ironOre = new Tile("iron ore", 22);
        public static final Tile silverOre = new Tile("silver ore", 23);
        public static final Tile goldOre = new Tile("gold ore", 24);

        public static final Tile diamondOre = new Tile("diamond ore", 40);
        public static final Tile emeraldOre = new Tile("emerald ore", 41);
        public static final Tile rubyOre = new Tile("ruby ore", 42);
        public static final Tile sapphireOre = new Tile("sapphire ore", 43);*/

        public TilesBlocks(){
            try{
                TilesBlocks.tilesetBlocks = ImageIO.read(Tile.class.getResourceAsStream("/tileset_terrain.png"));
            }catch(Exception e){

            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:27:32.213

```
 tiles[0] = new Tile("air", -1); 
```

你不能在课堂上这样做。您需要在构造函数中分配它。**阅读初始化**和**赋值**之间的区别。

字段的初始化属于方法之外，当然是被类封装的。

赋值属于一个方法。

或者你可以像这样初始化：

```
Tiles []tiles = new Tiles[]{new Tile("air",-1)} ; 
```

并且`.equals`不使用 ==

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T16:31:09.077

这个完整的类工作正常。我在您的课程和用法中没有看到任何错误。

这是完整的课程

```
package com.test;

public class Tile {

    public static Tile[] tiles = new Tile[400];

    public String name = "";
    public int id = 0;
    public boolean passable = false;

    public Tile(String name, int id) {
        this.name = name;
        this.id = id;

        if (name.equals("air")) {
            passable = true;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T16:17:39.260

单击红色错误消息，您很可能会看到“抑制”或“清除棉绒标记” Eclipse 有时会记录错误（在您键入时）并且不会清除标记。清除 Lint Markers 并查看错误是否消失

# php - 循环文件，一个文件处理，就这样，不报错

> ID：13477382
> 
> 赞同：1
> 
> 时间：2012-11-20T16:15:35.600
> 
> 标签：php, json, loops, file-get-contents

所以我正在处理的脚本有问题。我有一个包含名为 roster0.json、roster1 等的 JSON 文件的文件夹。

```
$dir = "responses/";
$files = glob($dir . "roster*");
$failed = array();
$failcnt = 0;

if (isset($files)) {
   $data = null;
   for ($i = 0; $i < count($files); $i++) {
        $data = json_decode(utf8_decode(file_get_contents($files[$i])));
        if(isset($data)){
            // Process stuff 
```

当我 var_dump($files) 得到一个包含 100 多个路径“responses/roster0.json”的数组。当我测试 $data 时，我得到了正确的数据数组。但是，一旦循环进入下一个文件，它就永远不会加载它，也永远不会处理它。

这是疯狂的部分。如果我更改for循环的开始，例如$i = 20。它将加载目录中的第21个文件并解析它并将其正确插入到数据库中！

忽略底部的失败内容，这是脚本的完整当前版本。[http://pastebin.com/yqyKi5Ag](http://pastebin.com/yqyKi5Ag)

PS - 我在 PHP 中有完整的警告/错误报告，但没有收到任何错误消息......帮助！谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-21T04:05:25.130

当我编写插入字符串时，ID 被复制，因此无效。切换到 auto-inc 和 tada。有用。感谢您的帮助。——</p>

# templates - 使用 Typoscript 告诉 TYPO3 扩展使用不同的模板

> ID：13477383
> 
> 赞同：1
> 
> 时间：2012-11-20T16:15:39.850
> 
> 标签：templates, plugins, typo3

我正在尝试在页面上获取扩展/插件，以使用与其硬编码的模板不同的模板。

我制作了一个 html 模板存储在：typo3conf/ext/myextension/pi1/new_extension_template.html

我在网站的根目录中制作了一个打字稿模板对象（所以它肯定会被选中）。在其中，我定义了以下简单的 Typoscript（为了演示而更改了名称）

```
plugin.tx_myextension_pi1 {
     templateFile = typo3conf/ext/myextension/pi1/new_extension_template.html
} 
```

但是，当我加载包含该插件的页面时，我在那个黑色的 TYPO3 错误页面上收到“找不到打字稿模板”错误。

我尝试了很多替代方法以防语法错误，但在使用 tt_news 插件时，上述方法对我有用。

例如，我也尝试过这些但没有成功：

```
templateFile.file = typo3conf/ext/myextension/pi1/new_extension_template.html
...
tempfile.template_file = typo3conf/ext/myextension/pi1/new_extension_template.html 
```

任何想法我做错了什么？存储在typo3conf 中的html 模板可以通过存储在插件外部的typoscript 调用吗？

我想也许 html 模板文件必须存储在 fileadmin/plugin_templates/ 中才能正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:03:49.437

您正在混合：`no typoscript template found`意味着在您插入插件的页面上没有可用的 TS 模板。

带有插件的页面没有嵌套在主页下（我假设它具有主页`TS template`面并且可以正确显示），因此只需将其拖到主页中，或在其级别上创建新的 TS 模板。

![你可以用模板模块检查它](../Images/59e64879716f2effcbd7cf2222d8d617.png)

# c# - 从画笔中检索 x:Name 或 x:Key

> ID：13477387
> 
> 赞同：1
> 
> 时间：2012-11-20T16:15:55.043
> 
> 标签：c#, wpf, xaml

XAML：

```
<ResourceDictionary> 
    <SolidColorBrush x:Name="MyBrush1" x:Key="MyBrush1" Color="Red" />
</ResourceDictionary> 
```

C＃：

```
brush = userControl.FindResource("MyBrush1") 
```

如何从**刷子**中检索 x:Name 或 x:Key ？是否可以通过执行以下操作来检索它们：

```
brush.Name 
```

或者

```
brush.Key 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T17:47:59.530

```
public static class ResourceHelper
{
    public static string FindNameFromResource(ResourceDictionary dictionary, 
           object resourceItem)
    {
        return (dictionary.Contains(resourceItem)) ? 
               dictionary[resourceItem].ToString() : 
               string.Empty;
    }
} 
```

使用单个方法进行反向查找的辅助类

你可以这样称呼它：

```
string name = ResourceHelper.FindNameFromResource(this.Resources, defaultStyle); 
```

# php - 数组顺序 - 数组组

> ID：13477389
> 
> 赞同：-1
> 
> 时间：2012-11-20T16:15:59.953
> 
> 标签：php, arrays

我正在尝试按特定顺序对数组进行排序：

我的代码（当前数组）：

```
Array
(
[25] => Array
    (
        [1st place] => 
    )

[15] => Array
    (
        [2nd place] => 
    )

[10] => Array
    (
        [3rd place] => 
    )

[5] => Array
    (
        [4th place] => 
        [5th place] => 
        [6th place] => 
        [7th place] => 
        [8th place] => 
        [9th place] => 
        [10th place] => 
    )

[1] => Array
    (
        [11th place] => 
        [12th place] => 
        [13th place] => 
        [14th place] => 
        [15th place] => 
        [16th place] => 
        [17th place] => 
        [18th place] => 
        [19th place] => 
        [20th place] => 
        [21st place] => 
        [22nd place] => 
        [23rd place] => 
        [24th place] => 
        [25th place] => 
    )

) 
```

需要数组：

```
Array
(
[0] => Array
    (
        [1st place] => 25
    )

[1] => Array
    (
        [2nd place] => 15
    )

[5] => Array
    (
        [3rd place] => 10
    )

[3] => Array
    (
        [4th place] => 5
        [5th place] => 5
        [6th place] => 5
        [7th place] => 5
        [8th place] => 5
        [9th place] => 5
        [10th place] => 5
    )

[4] => Array
    (
        [11th place] => 1
        [12th place] => 1
        [13th place] => 1
        [14th place] => 1
        [15th place] => 1
        [16th place] => 1
        [17th place] => 1
        [18th place] => 1
        [19th place] => 1
        [20th place] => 1
        [21st place] => 1
        [22nd place] => 1
        [23rd place] => 1
        [24th place] => 1
        [25th place] => 1
    )

) 
```

这个想法就像使用数组位置（？）作为键的值并按以下顺序设置数组：

我正在尝试使用该代码（php）

```
foreach ($newOptions as $ord) {
            $place = $ord[$idx];
            $value = $ord[$idx][0];
            $newOrderarr[$idx][$value][$place] = $name2;
            $idx++;
        } 
```

但也不是很好 $newoptions 是我使用的数组...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T18:36:59.113

没有人采用明显的排序方法吗？

```
uasort($data, function($a, $b) {
    reset($a);
    reset($b);
    $aVal = (int) key($a);
    $bVal = (int) key($b);

    if ($aVal < $bVal) {
        return -1;
    } elseif ($bVal < $aVal) {
        return 1;
    } else {
        return 0;
    }
}); 
```

请注意，这会重置子数组中的内部指针，但这不太可能成为问题，并且它们可能是副本。此外，如果您在那里有一个空的子数组，它将无法工作。在这种情况下，我只需`array_filter`先调用它来删除空值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T18:57:35.693

你可以试试这个：

```
foreach($your_array as $key => &$bla) {
    foreach($bla as &$item) {
        $item = $key;
    }
}

sort($your_array); 
```

但我宁愿从一开始就修复数据结构，这似乎至少......很奇怪。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T16:28:42.030

我真的不明白你最终是如何得到你的数组结构的，但如果有充分的理由这样做，你可以像这样进行排序：

```
#recreating your data:
$newOptions = array();
$newOptions[25] = array('1st place' => '');
$newOptions[15] = array('2nd place' => '');
$newOptions[10] = array('3rd place' => '');
$newOptions[5] = array('4th place' => '', '5th place' => '', '6th place' => '', '7th place' => '', '8th place' => '', '9th place' => '', '10th place' => '');
$newOptions[1] = array('11th place' => '', '12th place' => '', '13th place' => '', '14thth place' => '', '15thth place' => '', '16th place' => '', '...' => '');

#sorting as you wanted
$newArray = array();
foreach ($newOptions as $id => $options) {
   $newOptions = $options;
   foreach ($newOptions as $optid => $option) {
      $newOptions[$optid] = $id;
   }
   $newArray[] = $newOptions;
}
$newOptions = $newArray; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-20T16:29:57.520

你的结构对我没有意义？我选择了稍微不同的东西，但希望能很好地满足您的需求！

```
<?php
$scores = array(15, 20, 50, 100, 4);
sort($scores);

for($i = 0; $i < count($scores); $i++) {
    $new_array[] = array('score' => $scores[$i], 'text' => ordinal($i + 1) . " Place");
}

print_r($new_array);

// Ordinal from PHP docs
function ordinal($i = '') {
  $o=$i;
  $s=array('th', 'st', 'nd', 'rd');

  if(!is_int($o))
    if(ctype_digit($o))
      $o=(int)substr($o,-2,2);
    else
      return(false);
  return($i.$s[($o%100>10&&$o%100<20)?0:($o%10<4?$o%10:0)]);
} 
```

这会产生输出

```
Array
(
    [0] => Array
        (
            [score] => 4
            [text] => 1st Place
        )

    [1] => Array
        (
            [score] => 15
            [text] => 2nd Place
        )

    [2] => Array
        (
            [score] => 20
            [text] => 3rd Place
        )

    [3] => Array
        (
            [score] => 50
            [text] => 4th Place
        )

    [4] => Array
        (
            [score] => 100
            [text] => 5th Place
        )

) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-20T16:35:38.980

```
$newOrderarr = array();
$i = 0;
foreach ($newOptions as $k => $v){
    foreach ($v as $k2 => $v2){
        $newOrderarr[$i][$k2] = $k;
    }
    $i++;
} 
```

不过没时间测试。

# php - Codeigniter：向控制器提交参数，需要正确的 URI

> ID：13477395
> 
> 赞同：0
> 
> 时间：2012-11-20T16:16:11.137
> 
> 标签：php, forms, codeigniter, url, uri

我有一个带有 4 个下拉菜单和一个提交按钮的表单。当用户单击提交按钮时，我想转到我的控制器处理输入/输出，为用户提供选择，但使用正确的 URI。

下拉列表是根据用户的选择从 Ajax 动态生成的，第一个下拉列表除外。他们工作得很好。

处理用户输入的方法位于这个控制器中：`/app/controllers/shop/kategorier`，**索引方法如下所示：**

```
public function index($fabrikat, $type, $model, $produktnr = '0')
{
    // get all the data from the model
    $data['all'] = $this->fetch->get_kategorier($fabrikat, $type, $model, $produktnr);

    print_r($data['all']);      
} 
```

**我的目标是：当用户点击提交按钮时，我不希望他们查看*****包含***参数的确切 URL 的页面，例如。[http://app.com/shop/kategorier/index/LG/WASH/FL9834X/0/](http://app.com/shop/kategorier/index/LG/WASH/FL9834X/0/)这就是我真正想要的。

**注意：**手动访问此 URL 可以正常工作，并且控制器/模型会按应有的方式处理参数。

*我*该如何做到这一点？我尝试了两件事，他们都失败了。有点。

1.  我尝试使用 jQuery，并生成了一个带有“/”分隔符的所有参数的编码 URL 字符串，并在提交时更改了 .attr('href')。但那是一场噩梦，因为某些 $model 可以是例如。`'CE1000C-T / XEE'`等等

2.  我试图在类别控制器中创建一个“代理”方法，获取所有输入->帖子并将它们附加到 a `redirect('kategorier/'.$fabrikat.'/'.$etc)`，但这很愚蠢。

我宁愿不使用查询字符串`/kategorier?fabrikat=LG&type=WASH`等

**我的表格如下所示：**

```
<?php echo form_open('shop/kategorier/'); ?>

<select id="fabrikat" name="fabrikat">
    <option name="0">Vælg Fabrikat</option>
    <?php foreach ($fabrikater as $f) : ?>
        <option value="<?php echo $f->Fabrikat; ?>" name="<?php echo $f->Fabrikat; ?>"><?php echo $f->Fabrikat; ?></option>
    <?php endforeach; ?>
</select>

<select id="type" name="type">
</select>

<select id="model" name="model">  
</select>

<div id="produktnummer-wrap" style="display:none">
    <select id="produktnummer" name="produktnummer">
        <option name="0" value="">Vælg Produktnummer</option>
    </select>
</div>

<?php echo form_submit('findparts', 'Find Reservedele'); ?>
<?php echo form_close(); ?> 
```

我相信我在某种程度上把事情复杂化了，但现在我无法思考。我将非常乐意详细说明任何事情。我真的希望有人能够帮助我，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T22:55:55.773

如果不使用一些 JavaScript，您将无法真正实现这一点：

```
<script type="text/javascript">

function update_selections()
{

  var base_url = '<?php echo site_url('shop/kategorier/index'); ?>/' + $('#fabrikat').val() + '/' + $('#type').val() + '/' + $('#model').val();
  if( $('#produktnummer').val() != "" )
  {
    base_url = base_url + '/' + $('#produktnummer').val();
  }

  document.location.href = base_url;
}

</script> 
```

删除当前表单并使用 onclick 事件来触发它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:14:23.280

@Repox我昨晚确实想出了一种方法，实际上与您的解决方案非常相似。这是我所做的：

```
$("#find-btn").on("click", function() {
    var fab = $("select#fabrikat").val();
    var type = $("select#type").val();
    var model = $("select#model").val();
    var produktnummer = $("select#produktnummer").val();

    // we have to replace spaces in models and types
    model = model.replace(/\s+/g, '-');
    type = type.replace(/\s+/g, '-');

    // produktnummer can be empty
    produktnummer = (produktnummer === '') ? "0" : produktnummer;

    // we also have to URI encode the model and prodnr since it
    // can be horror strings like 'xy762 / ø23'
    model = encodeURIComponent(model);
    produktnummer = encodeURIComponent(produktnummer);

    // our url string to update the href
    var url = fab + '/' + type + '/'  + model + '/'  + produktnummer;

    // update the href with the specific parameters
    $(this).attr("href", "http://app.dev/kategorier/index/"+url);
}); 
```

虽然我在处理控制器和模型中的参数时需要非常小心，但之后需要对它们进行正确编码和解码。模型字符串的一小部分可能类似于：

> 'EX+ 340-34 / Ø14'*或*'77773+ -/ 23IK'

这对于我的控制器中的解码并不理想，`str_replace('-', ' ', $str);`因此我需要在选择替换字符之前检查大量数据。

*但是，如果希望在 Codeigniter 中不必*使用查询字符串就可以做到这一点，这可能是最好的解决方案。

# python - 从 PIL.EPSImageFile 实例生成条形码图像

> ID：13477403
> 
> 赞同：1
> 
> 时间：2012-11-20T16:16:29.603
> 
> 标签：python, python-imaging-library, eps

我想生成条形码图像。所以，我使用了 elaphe 包。它工作正常，但它返回 PIL.EPSImageFile 实例。我不知道如何将其转换为 SVG、PNG 或 JPG 等图像格式。

我写的代码是：

```
barcode('code128', 'barcodetest') 
```

它返回：

`<PIL.EpsImagePlugin.EpsImageFile image mode=RGB size=145x72 at 0x9AA47AC>`

如何将此实例转换为图像？其实我认为我的问题是错误的，但我不知道如何解释好！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T16:19:21.973

只需将该文件对象保存到具有`.png`或`.jpg`文件名的东西：

```
bc = barcode('qrcode',
    'Hello Barcode Writer In Pure PostScript.',
    options=dict(version=9, eclevel='M'), 
    margin=10, data_mode='8bits')
bc.save('yourfile.jpg') 
```

或明确说明格式：

```
bc.save('yourfile.jpg', 'JPEG') 
```

然后 PIL 会将图像转换为正确的格式。

请注意，PIL EPS 模块使用[Ghostscript 项目](http://www.ghostscript.com/)`gs`中的命令进行转换，您需要安装它才能使其工作。

# sql - 如何在 SQL 中将时间戳（日期格式）转换为 BIGINT

> ID：13477408
> 
> 赞同：8
> 
> 时间：2012-11-20T16:16:49.030
> 
> 标签：sql

我需要将时间戳值（格式：）转换为`2012-11-19 14:29:50.0`值`BIGINT`（格式：`2012111315041650`= `YYYYMMDDhhmmss`）。我需要在只接受的表的列中插入当前时间`BIGINT`。

我正在使用 Squirrel SQL 客户端版本 3.3.0。我现在使用的查询是

```
INSERT INTO table1 (BINGINT_DATE, TIMESTAMP_DATE) 
VALUES (2012111315041650, CURRENT_TIMESTAMP); 
```

`BIGINT_DATE`我不想手动输入值，而是将`CURRENT_TIMESTAMP`or转换`NOW()`为`BIGINT`值作为格式`YYYYMMDDHHMISS`

就像是

```
INSERT INTO table1 (BINGINT_DATE, TIMESTAMP_DATE) 
VALUES ("CONVERT(CURRENT_TIMESTAMP,BIGINT)", CURRENT_TIMESTAMP); 
```

让我知道这样做是否可行

请帮我解决一下这个。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-04-13T06:03:02.343

For Postgres you can use:

```
INSERT INTO table1 (BINGINT_DATE, TIMESTAMP_DATE) 
VALUES (to_char(current_timestamp, 'yyyymmddhh24miss')::bigint, CURRENT_TIMESTAMP); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-20T08:44:54.050

要将时间戳值转换为 bigint 值（以秒为单位），您可以这样做：

```
SELECT (EXTRACT(EPOCH FROM TIMESTAMP '2019-04-02T14:56:39.009'))::bigint -- -> 1554216999 
```

要将时间戳值转换为 bigint 值（以毫秒为单位），您可以这样做：

```
SELECT ((EXTRACT(EPOCH FROM TIMESTAMP '2019-04-02T14:56:39.009'))::numeric * 1000)::bigint -- -> 1554216999009 
```

如果要将列的所有时间戳值转换为表到同一表的另一列，可以运行此查询（以毫秒为单位）：

```
UPDATE $table_name$ SET $column_with_values_bigint$ = (EXTRACT(EPOCH FROM $column_with_values_timestamp$)::numeric * 1000)::bigint 
```

希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T16:22:15.553

对于 Oracle：用途`to_char`和`to_number`功能如下

```
 TO_NUMBER(TO_CHAR('2012-11-19 14:29:50.0', 'YYYYMMDDHHMISS')) 
```

对于 MySQL：使用`DATE_FORMAT`&`CONVERT`如下：

```
 CONVERT(DATE_FORMAT('2012-11-19 14:29:50.0'', '%Y%M%d%H%i%s'), UNSIGNED BIGINT) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T16:35:18.310

以下内容将为您提供（我认为）您所追求的：

```
DECLARE @TM VARCHAR(50) = '2012-11-19 14:29:50.0'

SELECT (CAST(SUBSTRING(@TM,1,4) AS INT) * 10000000000)
     + (CAST(SUBSTRING(@TM,6,2) AS INT) * 100000000)
     + (CAST(SUBSTRING(@TM,9,2) AS INT) * 1000000)
     + (CAST(SUBSTRING(@TM,12,2) AS INT)* 10000)
     + (CAST(SUBSTRING(@TM,15,2) AS INT)* 100)
     + (CAST(SUBSTRING(@TM,18,2) AS INT)) 
```

但是，对于其他人提到的整体问题，可能会有更好的解决方案，如果您提供更多细节，我们可能会建议一个不那么肮脏的替代方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-09T22:24:54.373

您可以在 MS SQL 上尝试类似的操作：

**从 bigint 到 datetime：**

```
select dateadd(s, convert(bigint, '<bigint value like 1477958400000>') / 1000, convert(datetime, '1-1-1970 00:00:00')) 
```

**从日期时间到 bigint：**

```
select cast(datediff(s, convert(datetime, '1-1-1970 00:00:00'), convert(datetime, '<datetime value like 11-01-2016>')) as bigint)* 1000 
```

干杯

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-20T18:35:15.547

日期时间到 BIGINT；

```
SELECT CONVERT(BIGINT, FORMAT(CURRENT_TIMESTAMP, 'yyyyMMddHHmmss')) 
```

或者

```
SELECT CONVERT(BIGINT, FORMAT(GETDATE(), 'yyyyMMddHHmmss')) 
```

BIGINT 到 DATETIME；

```
SELECT CONVERT(DATETIME, FORMAT(20191220213340, '####-##-## ##:##:##')) 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-11-20T16:38:25.143

数据库服务器；替换`GETDATE()`为您的`Column name`

```
SELECT CONVERT(bigint,
       CONVERT(VARCHAR(12) , GETDATE() ,112) +  
       REPLACE(CONVERT(VARCHAR(8) , GETDATE() ,108),':','')) 
```

# javascript - 从我的网站分享和评论 Facebook 帖子

> ID：13477409
> 
> 赞同：0
> 
> 时间：2012-11-20T16:16:51.403
> 
> 标签：javascript, facebook, facebook-javascript-sdk

我坚持在我的网站上分享和评论 Facebook 帖子。

看。在 Twitter 中，我们可以简单地通过链接回复推文

[https://twitter.com/intent/tweet?in_reply_to=35782000644194304](https://twitter.com/intent/tweet?in_reply_to=35782000644194304)

或者

我们可以通过这个链接转发推文

[https://twitter.com/intent/retweet?tweet_id=35782000644194304](https://twitter.com/intent/retweet?tweet_id=35782000644194304)

这很简单，点击后你会重定向到 twitter，你可以在其中执行此操作，我喜欢它。

使用 facebook 帖子并不是那么容易。我在我的网站上有 Facebook 帖子（帖子的副本，我之前解析过它们并保存到我的数据库，我也保存的帖子的 ID），我想分享/评论/喜欢这个帖子。也许 Facebook 有 twitter 之类的链接，或者其他方式，我不知道，但我整天都在寻找解决方案，但我失败了。

也许可以创建这样的链接：

[http://facebook.com/ID_OF_THAT_FB_POST/share](http://facebook.com/ID_OF_THAT_FB_POST/share) 或 [http://facebook.com/ID_OF_THAT_FB_POST/comment](http://facebook.com/ID_OF_THAT_FB_POST/comment)

和.. 点击链接后，它会重定向到 facebook 页面，您可以在哪里分享这篇文章或评论？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:04:47.813

好吧，让我看看我是否理解，如果您想在您的网站上分享/评论/喜欢 Facebook 上的帖子，那么您可以使用 Graph API、POST、连接部分。 [https://developers.facebook.com/docs/reference/api/post/](https://developers.facebook.com/docs/reference/api/post/)

这允许您创建评论和点赞，拥有正确的 access_token 和 stream_publish 权限。

> 创建：您可以通过发出具有 publish_stream 权限和以下参数的 HTTP POST 请求写入 POST_ID/comments 连接以向帖子发表评论。

[所以你有你向http://graph.facebook.com/POST_ID/comments?message=HELLO+WORLD&access_token=YOUR_ACCESS_TOKEN](http://graph.facebook.com/POST_ID/comments?message=HELLO+WORLD&access_token=YOUR_ACCESS_TOKEN)发出 HTTP POST 请求

同样的事情：

向[http://graph.facebook.com/POST_ID/likes?access_token=YOUR_ACCESS_TOKEN发出 HTTP POST 请求](http://graph.facebook.com/POST_ID/likes?access_token=YOUR_ACCESS_TOKEN)

使用 Javascript SDK 会是这样的：

```
var postID='POST_ID';
var msg = 'Comment this post';
FB.api('/'+postID+'/comments', 'post', { message: msg }, function(response) {
  if (!response || response.error) {
    alert('Error occured');
  } else {
    alert('Post ID: ' + response.id);
  }
}); 
```

如果您想共享没有 API 文档，但您可以使用如下内容：

```
<script type="text/javascript">
function sharePost(){
 var page = 'https://www.facebook.com/permalink.php?story_fbid=POST_ID&id=PAGE_ID';
 var sharer= 'https://www.facebook.com/sharer/sharer.php?u='+encodeURIComponent(page);
 var w=660;
 var h=460;
 var sTop=window.screen.height/2-(h/2);
 var sLeft=window.screen.width/2-(w/2);
 var sharer= window.open(sharer,"Share","status=1,height="+h+",width="+w+",top="+sTop+",left="+sLeft+",resizable=0");
 return false;
}
</script>

<a onclick="sharePOST()">SHARE POST</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T16:27:25.953

不要认为 facebook 还拥有这样的 api，尽管您可以查找任何类型的社交小部件的 iframe url 结构并尝试使用。这是您可以查看的列表[https://developers.facebook.com/docs/guides/web/#plugins](https://developers.facebook.com/docs/guides/web/#plugins)。考虑到共享按钮已被弃用，取而代之的是喜欢。此外，我宁愿避免繁重的代码定制并尝试尽可能多地使用 API，这将有助于避免未来在 facebook 的演变过程中出现不兼容性）

# zend-framework2 - ZF2 - 带导航的多导航

> ID：13477412
> 
> 赞同：5
> 
> 时间：2012-11-20T16:16:59.087
> 
> 标签：zend-framework2

是否可以有 2 个不同的导航？

例如 ：

```
//in module.config.php
'service_manager'=>array(
        'factories'=>array(
            'navigation1'=>'Zend\Navigation\Service\DefaultNavigationFactory',
            'navigation2'=>'Zend\Navigation\Service\DefaultNavigationFactory',
        ),
    ),
    'navigation'=>array(
        'navigation1'=>array(
            'home'=>array('type' => 'mvc','route' => 'home','active'=>false,'label' => 'Home','title' => 'Home',
                'pages'=>array(
                    'contact'=>array('type' => 'mvc','route'=>'contact','active'=>false,'label'=>'Contact','title' =>'Contact'),
                )
            ),
        ),
        'navigation2'=>array(
            'home'=>array('type'=>'mvc','route'=>'home','active'=>false,'label'=>'Home','title'=>'Home',
            'contact'=>array('type'=>'mvc','route'=>'faq','active'=>false,'label'=>'Faq','title'=>'Faq'),
            ),
        ),

//Dans laout
<?php echo $this->navigation()->menu('navigation1')->setMinDepth(0);?>
<hr />
<?php echo $this->navigation()->menu('navigation2')->setMinDepth(0);?> 
```

我想要 2 个不同页面的不同菜单，但此方法无法运行。

请问大家有什么想法吗？

谢谢

比尔扎特

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T13:10:52.600

您需要为每个导航组提供一个自定义工厂类。例如，看看 ZfcAdmin 如何做到这一点：

1.  创建自定义工厂类

    ```
    <?php
    namespace ZfcAdmin\Navigation\Service;

    use Zend\Navigation\Service\DefaultNavigationFactory;

    class AdminNavigationFactory extends DefaultNavigationFactory
    {
        protected function getName()
        {
            return 'admin';
        }
    } 
    ```

    来源：[https ://github.com/ZF-Commons/ZfcAdmin/blob/master/src/ZfcAdmin/Navigation/Service/AdminNavigationFactory.php](https://github.com/ZF-Commons/ZfcAdmin/blob/master/src/ZfcAdmin/Navigation/Service/AdminNavigationFactory.php)

2.  注册 AdminNavigationFactory

    ```
    // in Module.php
    public function getServiceConfig()
    {
        return array(
            'factories' => array(
                'admin_navigation' => 'ZfcAdmin\Navigation\Service\AdminNavigationFactory',
            ),
        );
     } 
    ```

    来源：[https ://github.com/ZF-Commons/ZfcAdmin/blob/master/Module.php#L90](https://github.com/ZF-Commons/ZfcAdmin/blob/master/Module.php#L90)

3.  `getName`在您在工厂方法中指定的键下定义模块配置中的导航树。例如，这是 ZfcUserAdmin 将自身添加到 ZfcAdmin 菜单的方式：

    ```
    'navigation' => array(
        'admin' => array(
            'zfcuseradmin' => array(
                'label' => 'Users',
                'route' => 'zfcadmin/zfcuseradmin/list',
                'pages' => array(
                    'create' => array(
                        'label' => 'New User',
                        'route' => 'admin/create',
                    ),                        
                ),
            ),
        ),
    ), 
    ```

    来源：[https ://github.com/Danielss89/ZfcUserAdmin/blob/master/config/module.config.php](https://github.com/Danielss89/ZfcUserAdmin/blob/master/config/module.config.php)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T20:20:45.213

**/vendor/MyNamespace/library/MyNamespace/Navigation/Service/SecondaryNavigationFactory.php**

```
namespace MyNamespace\Navigation\Service;

use Zend\Navigation\Service\DefaultNavigationFactory;

class SecondaryNavigationFactory extends DefaultNavigationFactory {

    protected function getName() {
        return 'secondary';
    }

} 
```

**/config/autoload/global.php**

```
return array(
    'service_manager' => array(
        'factories' => array(
            'navigation' => 'Zend\Navigation\Service\DefaultNavigationFactory',
            'secondary' => 'MyNamespace\Navigation\Service\SecondaryNavigationFactory',
        ),
    ),
    'navigation' => array(
        'default' => array(
            array(
                'label' => 'Item-1.1',
                'route' => 'foo',
            ),
            array(
                'label' => 'Item-1.2',
                'route' => 'bar',
            ),
        ),
        'secondary' => array(
            array(
                'label' => 'Item-2',
                'route' => 'baz',
            ),
        ),
    ),
); 
```

**/module/Application/view/layout/layout.phtml**

```
<?php echo $this->navigation('navigation')->menu(); ?>
<?php echo $this->navigation('secondary')->menu(); ?> 
```

# actionscript-3 - 无法解析变量（可能是动态成员）

> ID：13477413
> 
> 赞同：0
> 
> 时间：2012-11-20T16:17:02.240
> 
> 标签：actionscript-3, fdt

我创建了具有数据类型对象的变量，并为该对象创建了属性并为其分配了值。

```
var tileModel : Object = new Object();
tileModel.property = 10; 
```

但我在 FDT Ide 中收到警告。无法解析变量（可能是动态成员）

我发现可能的解决方案可能是使用 /*FDT_IGNORE*/ 但我宁愿以一些经典的方式解决它。

谢谢你的每一个回答

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T16:21:22.873

使用数组表示法如下：

```
tileModel["property"] = 10; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T13:10:30.217

为了不让 FDT 将此标记为错误，您需要调整解析器以忽略它。

看截图：![在此处输入图像描述](../Images/bb6e30ca9611d46456574bc215a2b9f7.png)

# button - Xcode 4.5 ios6 多行与按钮中的文本

> ID：13477418
> 
> 赞同：6
> 
> 时间：2012-11-20T16:17:11.033
> 
> 标签：button, text, ios6, storyboard, xcode4.5

当我在情节提要的屏幕上制作一个按钮并且其中的文本比按钮宽度更多时。文本只是继续沿着按钮结束的直线前进。发生这种情况时，我想要换行，这样我就可以将文本放在两行，但我不知道如何在情节提要的按钮中获取两行文本..

有什么想法可以在情节提要中完成吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-20T16:20:27.390

将换行符设置为“自动换行”：

![在此处输入图像描述](../Images/71f8345c822484a69341110fad4762f5.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-29T15:50:25.980

您不仅应该“自动换行”文本，还应该使用自动布局调试工具并选择“添加缺少的约束”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-10T11:40:05.300

通过代码将按钮的框架设置为您想要的任何内容，并将换行符设置为“自动换行”。希望它能解决你的问题。

# function - 适应度函数中的违规权重

> ID：13477419
> 
> 赞同：2
> 
> 时间：2012-11-20T16:17:14.503
> 
> 标签：function, genetic-algorithm, fitness

我正在从事我的最后一年项目，我正在开发一种用于时间表优化的遗传算法。目前进展相当顺利，因为我正在生成代表我的课程时间表的随机染色体。我设计了我的函数适应度函数以及潜在的约束，此时我被困在约束的实际权重上。

我使用以下函数作为我的适应度函数：

1/1 + (Ci*Wci)

如 Ci 是约束 i 的违规量，Wci 是约束 i 的权重。

显然，我需要将硬约束的权重高于软约束。

我想知道 any1 以前使用过这种技术吗？这些重量值有推荐的范围吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:01:51.603

如果您只是将惩罚添加到个人当前的适应度值中，那么算法可能会优化解决方案而不会最小化惩罚。如果算法可以将适应值降低到比惩罚更高的程度，则解决方案会变得更好。在使用惩罚时，除了优化质量之外，您还应该将搜索指向可行区域。

我建议为您添加约束违规量的所有不可行解决方案假设一个恒定但非常糟糕的适应度值。例如，在您当前的人群中目标最差的个人可能是一个足够的基值。这样做的好处是您可以将所有解决方案按一个顺序组合在一起：不可行的解决方案只会在它们违反约束的程度方面相互比较，所有可行的解决方案都将与它们在全球范围内的好坏进行比较将是可行性与不可行性。

如果您不这样做，那么您将在您的素质范围内混合不可行和可行的解决方案。

编辑：我也认为你的健身功能有问题。您可能缺少括号。

# ef-code-first - 具有现有数据库表的 Code First 通用存储库

> ID：13477420
> 
> 赞同：0
> 
> 时间：2012-11-20T16:17:17.120
> 
> 标签：ef-code-first

我有一个通用存储库类，首先使用代码来执行数据操作。

```
public class GenericRepository<T> where T : class
{

public DbContext _context = new DbContext("name=con");

private DbSet<T> _dbset;

public DbSet<T> Dbset
{

    set { _dbset = value; }
    get
    {
        _dbset = _context.Set<T>();
        return _dbset;
    }

}

public IQueryable<T> GetAll()
{
    return Dbset;
}

} 
```

我有一个实体类 Teacher，它映射到我的数据库中的现有表“Teacher”，具有完全相同的字段。

```
public class Teacher
{
public Teacher()
{
    //
    // TODO: Add constructor logic here
    //
}

public int TeacherID { get; set; }

public string FirstName { get; set; }

public string LastName { get; set; }

public int Age { get; set; }
} 
```

我有下面的代码将来自教师的数据绑定到转发器控件。

```
 GenericRepository<Teacher> studentrepository = new GenericRepository<Teacher>();
    rptSchoolData.DataSource = studentrepository.GetAll().ToList();
    rptSchoolData.DataBind(); 
```

但我得到一个异常异常“实体类型教师不是当前上下文中模型的一部分”。首先使用现有数据库进行代码时，我是否需要做任何额外的工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T18:12:11.077

您必须创建一个派生自`DbContext`. 该类应具有类型属性，`DbSet<T>`该属性将为 EF 提供足够的信息来创建具有默认命名和关联约定的数据库并与之通信。它将使用`Student.Teacher`（如果有的话）之类的属性来推断外键关联：

```
public class MyContext: DbContext
{
    public DbSet<Teacher> Teachers { get; set; }
    public DbSet<Student> Students { get; set; }
    ...
} 
```

如果默认值不是您想要的，或者当您有一个想要与模型中的名称和关联匹配的现有数据库时，您可以做两（或三）件事：

*   [覆盖`OnModelCreating`](http://msdn.microsoft.com/en-us/data/jj591617#Introduction)以手动配置映射。就像数据库中的表有那些丑陋的前缀时（提醒人们看到表时看到的是表）：

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Teacher>()
                    .Map(e => e.ToTable("tblTeacher"));
        ...
    } 
```

*   （不太有利）使用数据注释来做同样的事情。
*   扭转它并使用[Entity Framework Powertools](http://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d)将数据库逆向工程为一个类模型，包括流畅的映射和 DbContext 派生的上下文。修改现有模型可能比从头开始更容易。

# java - 是否可以将 jnlp 启动的应用程序的输出重定向到文件？

> ID：13477422
> 
> 赞同：3
> 
> 时间：2012-11-20T16:17:21.107
> 
> 标签：java, jnlp

我需要将应用程序的控制台输出保存`JNLP`到用户机器上的某个文件中（例如，检查详细的 jvm 输出，或进行快速而肮脏的日志记录）。应用程序被授予所有权限。

那可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T18:13:21.330

您可以在 Java 控制面板中设置调试/日志记录/跟踪选项。在 Windows 上，尝试：

```
Control Panel - Java - Advanced - Settings - Debugging 
```

并启用日志记录和/或跟踪。[根据此处的文档](http://docs.oracle.com/javase/7/docs/technotes/guides/plugin/developer_guide/debugger.html#jpitf)，输出将写入您的用户主目录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T06:24:48.193

有一些不同的场景：

1.  如果您可以控制执行应用程序的客户端计算机，则可以使用 serg10 的示例并在控制面板中启用跟踪。

2.  如果您可以更改代码，则可以使用：

    System.setOut(new PrintStream(new FileOutputStream(fileName)));

3.  要记录到您选择的文件，请将 FileOutputStream 与 appender 构造函数一起使用：

[http://docs.oracle.com/javase/6/docs/api/java/io/FileOutputStream.html#FileOutputStream%28java.io.File,%20boolean%29](http://docs.oracle.com/javase/6/docs/api/java/io/FileOutputStream.html#FileOutputStream%28java.io.File,%20boolean%29)

# powershell - 通过 Powershell 和 WMI 备份事件日志

> ID：13477425
> 
> 赞同：0
> 
> 时间：2012-11-20T16:17:33.890
> 
> 标签：powershell, wmi, scheduled-tasks, windows-server-2008-r2

我有 Powershell 脚本，可以备份当前本地主机上的所有事件日志。

它在受限帐户下以“以最高权限运行”从任务计划程序运行（此帐户仅具有备份操作员权限）。脚本本身可以在[这里找到](http://lab.technet.microsoft.com/en-us/magazine/dd822908)

操作系统：Windows Server 2008 R2，UAC 已关闭。

问题出现在以下行中：

```
$Eventlogs = Get-WmiObject -Class Win32_NTEventLogFile -ComputerName $computer 
```

在返回的事件日志集合中，**安全日志丢失**，因此未备份。其他都在场。

如果使用相同帐户直接从 Powershell 运行相同的脚本 - 存在安全日志。授予帐户的本地管理员权限可以解决问题，但不适用。

您有什么想法可能导致这种行为吗？感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:35:30.293

我对此没有做很多研究，但我曾经遇到过类似的问题。`-EnableAllPrivileges`在第一次调用中使用开关`get-WmiObject`为我解决了它。

# sql - 我可以在 OracleDB 运行的 sql 文件中使用制表符吗？

> ID：13477426
> 
> 赞同：1
> 
> 时间：2012-11-20T16:17:34.393
> 
> 标签：sql, oracle, formatting, oracle10g, oracle11g

我有以下代码：

```
CONSTRAINT PK_I_TBOWXXX PRIMARY KEY(I_RID) USING INDEX TABLESPACE Index_Data,
CONSTRAINT UK_I_TBOWXXX UNIQUE(I_CID, ID) USING INDEX TABLESPACE Index_Data 
```

我希望它像这样格式化：

```
CONSTRAINT PK_I_TBOWXXX          PRIMARY KEY (I_RID)            USING INDEX TABLESPACE Index_Data,
CONSTRAINT UK_I_TBOWXXX          UNIQUE      (I_CID, ID)        USING INDEX TABLESPACE Index_Data 
```

我可以为此使用标签而不担心错误吗？
或者我应该使用空格/我应该保持这样吗？它应该适用于**10g 和 11g**！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:24:39.580

绝对的。

oracle 会忽略所有额外的空格/制表符，因此您可以努力使您的代码看起来像您想要的那样整洁。:)

```
create table oats.testcreate
(
id number,
name varchar2(20)
); 
```

将与..一样工作

```
create table    oats.testcreate
(
id      number,
name            varchar2(20)
); 
```

尽管其中只有一个看起来像您可以理解的代码:)

# algorithm - 二维空间除以 m 行

> ID：13477429
> 
> 赞同：2
> 
> 时间：2012-11-20T16:17:38.337
> 
> 标签：algorithm

自从我编写任何程序以来已经有好几年了……所以我需要你的帮助和建议。

我正在寻找一种通用算法来解决以下问题：

给定尺寸 axb，有一个矩形形式的平面 (2d) 空间。用给定 n 长度的给定 m 行划分空间。线可以在节点中相遇，但在一个节点中不能有比给定 k 更多的线。

这里有一个例子 [http://i.stack.imgur.com/YzJ4a.png](https://i.stack.imgur.com/YzJ4a.png)

![在此处输入图像描述](../Images/434fce225669c82070519d715c43aa6e.png)

让我们假设 ie n2 等于另一个 n2 等-我知道图片上的不完全是

也许你可以推荐帮助我解决这个问题的文献？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T05:39:48.477

这是一个欧几里得图问题。特别是，该图是平面直线图。

[http://en.wikipedia.org/wiki/Planar_straight_line_graph](http://en.wikipedia.org/wiki/Planar_straight_line_graph)

如果您正在寻找文献，计算几何：Preparata 和 Shamos 的介绍可能会对您有所帮助。

祝你好运！

# jpa - 如何在 JUnit 中正确使用 bean 验证 (JSR-303)？

> ID：13477431
> 
> 赞同：2
> 
> 时间：2012-11-20T16:17:38.020
> 
> 标签：jpa, junit, bean-validation

我想在 JUnit 测试中使用 bean 验证来验证实体。设置*似乎*很好，但测试并没有失败。因此，看起来该实体未正确验证。

这是相关的 JPA 注释：

```
@Column(name = "mobile_numbers", table = STN)
private String smsRecipientMobileNumbers; 
```

该列的默认大小为 255 个字符（在数据库中正确应用）。

这是测试：

```
 final Collection<String> recipients = new ArrayList<String>(2000);
  for (int i = 0; i < 2000; i++) {
    recipients.add("some mobile number");
  }
  objectUnderTest.setSmsRecipients(recipients);

  ValidatorFactory factory = Validation.buildDefaultValidatorFactory();
  Validator validator = factory.getValidator();
  violations = validator.validate(objectUnderTest, Default.class);
  assertThat(violations, is(empty()));
} 
```

我预计它会失败，因为它`smsRecipientMobileNumbers`超过 255 个字符，但它通过了。

如果我在实体中明确应用大小约束，则测试失败：

```
@Column(name = "mobile_numbers", table = STN)
@Size(max = 255)
private String smsRecipientMobileNumbers; 
```

我在这里做错了什么？显然，选择的提供者必须能够正确解释 JPA 注释。验证器是`org.hibernate.validator.engine.ValidatorImpl`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T19:52:53.727

Bean Validation 不考虑 JPA 实体（或默认列大小）。如果要使用 Bean Validation 验证长度，则必须添加`@Size`约束。

JPA 提供者可以选择在创建 DDL 语句时考虑约束，例如 Hibernate ORM 应该将列长度设置`max`为`@Size`.

# iphone - 如何在语言词典中创建和搜索

> ID：13477434
> 
> 赞同：1
> 
> 时间：2012-11-20T16:17:41.630
> 
> 标签：iphone, objective-c, dictionary, ios6

我正在做一个 Xcode 项目。

我需要添加一个单词词典，例如英语词典。然后，当需要时，我需要在其中找到一些单词。

我一直在考虑从文件中创建一个数组来存储所有单词，然后以某种我不知道的方式对其进行排序，最后进行二进制搜索或类似的操作来找到我正在寻找的单词。

*   你认为是个好主意吗？
*   你有任何线索来排序数组吗？
*   二进制搜索是个好主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T16:24:01.433

最好的方法是使用数据库（例如基于 SQL 的）或 CoreData 来存储它。那是除非您要求单词完全在记忆中，如果您经常列出所有单词就会出现这种情况。但即便如此，它也可以通过延迟加载来解决。

# .net - 在 MSChart 控件中反转 Y 轴

> ID：13477436
> 
> 赞同：2
> 
> 时间：2012-11-20T16:17:52.283
> 
> 标签：.net, mschart

我正在尝试反转 MSChart 中的 Y 轴

从左到右的比例为 5 - 1 因此，如果一个条的值为 2，它将在比例上从 5 填充到 2，分数位于填充条的右侧。

![在此处输入图像描述](../Images/617c1dd1df1f7099034a58683c60d4fb.png) MS Chart 可以吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T08:06:59.673

One possibility would be adding a second not enabled axis with "is reversed" and displaying the values on this one.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T16:34:56.080

我真的没有时间完全测试这个，但也许

```
 objChart.ChartAreas[0].AxisY.IsReversed = true; 
```

...可能是一个很好的起点？

**编辑**：我实际上刚刚尝试过，它只会翻转整个图表。可能不是你所追求的。

# java - 如何在java中从图像中读取文本

> ID：13477438
> 
> 赞同：-1
> 
> 时间：2012-11-20T16:17:58.493
> 
> 标签：java, swing

> **可能重复：**
> [Java OCR 实现](https://stackoverflow.com/questions/1813881/java-ocr-implementation)

嗨，我正在从事一个需要阅读以图像形式写入的文本的项目。我试着用谷歌搜索，可以找到一些关于 OCR 的细节。但不确定如何在我的应用程序中实现它？任何人都知道如何做到这一点？我是否需要添加一些 API 并在我的代码中使用它？

任何示例示例都会有很大帮助。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T16:25:00.383

[请在](https://compilr.com/anothercollegekid/cded)具有字符“Sample”的图像“Pink.jpg”上找到 OCR 示例项目

该项目包含 3 个文件：

```
OCR.java
OCED.java
Program.java 
```

下载它们并进行测试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T16:29:54.773

从所描述的问题来看，您可能正在寻找 Java 中的验证码。

也许这会有所帮助：[jcaptcha](https://jcaptcha.atlassian.net/wiki/display/general/Home)

# c# - 如果从 AutoCAD 初始化，Mono 插件不会加载

> ID：13477440
> 
> 赞同：0
> 
> 时间：2012-11-20T16:18:03.283
> 
> 标签：c#, plugins, autocad-plugin, mono.addins

我有一个相当复杂的应用程序，这个应用程序的结构如下：

`Main.exe`（是一个独立的应用程序）

`Main.exe`用途`Project1.dll`（其中包含一个表格）

中包含的表单`Project1.dll`由另一个 dll ( `Project2.dll`) 扩展，使用`mono.addins`

在`Main.exe`我可以看到以正确方式扩展的表单。

我还实现了一个`Project3.dll`通过 autocad 内部加载的 autocad 连接器（比如 ）`netload`，该连接器使用 的形式，`Project1.dll`并且该形式也必须在 autocad 中扩展。

结果是在 AutoCAD 中我的表单似乎没有扩展，如果我调试代码：

```
 AddinManager.Initialize();
        AddinManager.Registry.Update(null);

        foreach (IMyPlugin Addin in AddinManager.GetExtensionObjects(typeof(IMyPlugin)))
        {
            if (Addin.IsPluginLicensed)
                EmbedPlugin(Addin);
        } 
```

foreach 不会产生任何插件。

请注意，这些 .dll 中的每一个都存储在同一目录中。

我想问题出在 autocad exe 文件的不同位置，但我尝试了一些调整，但都没有工作..

我试过了：

*   创建一个包含 .dlls 路径的 .addins 文件。
*   使用所有 .dll 的副本创建一个子文件夹 \addins\
*   初始化`AddinManager`给出的.dll路径
*   更新`AddinManager.Registry`给定的 .dll 路径

代码结构相当复杂（涉及许多文件和项目），因此不太容易粘贴或提供一些工作代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T16:01:34.833

我已经解决了这个问题。`Mono.Addins`是从上下文中加载的`LoadFrom`，这导致了 DllHell 问题。`Mono.Addins`像[这里](https://stackoverflow.com/a/13515573/838405)描述的手动加载解决了这个问题。

# c# - 代码内部包含的用户和密码

> ID：13477449
> 
> 赞同：4
> 
> 时间：2012-11-20T16:18:58.027
> 
> 标签：c#, database, winforms, security

我使用 C# 编写了 WinForm 应用程序。应用程序需要连接到数据库，因此它包含如下代码：

```
String connstring = String.Format("Server={0};Port={1};" +
                    "User Id={2};Password={3};Database={4};",
                    "localhost", "3456", "username",
                    "password", "databasename" ); 
```

这意味着数据库服务器的用户和密码包含在应用程序内部。我认为这不是一种安全的方式。有什么办法可以提供更多的安全性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T16:20:10.423

您可以将加密的连接字符串添加到您的 app.config。

更多信息：[保护连接字符串](http://msdn.microsoft.com/en-us/library/89211k9b%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T16:20:40.373

您可以将它们存储在本地文件中，然后使用系统权限使修改文件变得困难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T16:21:05.413

1.  忽略这个问题。
2.  让用户输入数据库用户名/密码
3.  不要连接到数据库，而是连接到 Http 服务，这样就不会以任何方式泄露数据库连接密码。

# javascript - 正则表达式按引号和加号拆分

> ID：13477450
> 
> 赞同：4
> 
> 时间：2012-11-20T16:19:03.910
> 
> 标签：javascript, regex, split

我正在尝试使用一些字符作为运算符从文本框中拆分文本。我有一个分组运算符 (") 和一个 "AND" 运算符 (+)，就像 google 一样。所以，这段文字：

```
box +box +"box" "box" "is.a.box" +"is.a.box" +"is a box" 
```

在文本框中返回这个：

```
myArray[0] = box
myArray[1] = +box
myArray[2] = +
myArray[3] = "box"
myArray[4] = "box"
myArray[5] = "is.a.box"
myArray[6] = +
myArray[7] = "is.a.box"
myArray[8] = +
myArray[9] = "is a box" 
```

相反，我希望它返回这个：

```
myArray[0] = box
myArray[1] = +box
myArray[2] = +"box"
myArray[3] = "box"
myArray[4] = "is.a.box"
myArray[5] = +"is.a.box"
myArray[6] = +"is a box" 
```

这是我正在使用的正则表达式：

```
/[\+\w]+|"[^"]+"/g 
```

如何将 " 和 + 符号分开？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T16:22:25.017

看看这个：

```
str.match(/\+?(?:"[^"]*"|[^\s+]+)/g) 
```

`+`如果可能的话，这将开始。然后它会尝试匹配一个`"`. 如果可以的话，它将尽可能多地使用非`"`字符和最后的`"`. 如果没有`"`，它将尽可能多地使用非空格、非`+`字符。

这几乎就是你所拥有的，除了我`+`在两种可能的情况下都拿出了一个可选的。

又多了一个。如果`box"box"`应该导致两个匹配`box`并`"box"`使用它：

```
str.match(/\+?(?:"[^"]*"|[^\s+"]+)/g) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T16:22:46.260

```
/\+?("[^"]*"|[^\s+])+/g 
```

诀窍是将带引号的字符串视为单个字符。我们看起来是非空白、非特殊字符 ( `[^\s+]`)，但我们也会假装带引号的字符串 ( `"[^"]*"`) 是一个字符。

```
> 'box +box +"box" "box" "is.a.box" +"is.a.box"'.match(/\+?("[^"]*"|[^\s+])+/g)
  ["box", "+box", "+"box"", ""box"", ""is.a.box"", "+"is.a.box""]

> '"string with spaces" +"extended phrase"'.match(/\+?("[^"]*"|[^\s+])+/g)
  [""string with spaces"", "+"extended phrase""]

> 'box+box'.match(/\+?("[^"]*"|[^\s+])+/g)
  ["box", "+box"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T16:31:05.893

您想要的结果可以通过对空格的简单拆分来实现。

您可能希望使其更智能并使用以下内容折叠多个空格：

```
myArray = str.split(/[\s]+/g) 
```

对于您的输入字符串，这将返回您想要的数组：

```
["box", "+box", "+"box"", ""box"", ""is.a.box"", "+"is.a.box""] 
```

# javascript - 我可以使用 JavaScript 在 iframe 上强制刷新吗？

> ID：13477451
> 
> 赞同：16
> 
> 时间：2012-11-20T16:19:16.123
> 
> 标签：javascript, iframe, refresh

我在 Stack Overflow 上找到了很多关于如何使用 JavaScript 刷新 iframe 的答案。

例如：

*   [iframe 重新加载按钮](https://stackoverflow.com/questions/11287050/iframe-reload-button)

*   [使用 JavaScript 重新加载/刷新 iframe 的最佳方法是什么？](https://stackoverflow.com/questions/86428/whats-the-best-way-to-reload-an-iframe-using-javascript)

*   [如何使用 Javascript 刷新 IFrame？](https://stackoverflow.com/questions/2064850/how-to-refresh-an-iframe-using-javascript)

他们工作正常。但是，如果 iframe 中的页面最近发生了更改，则刷新不会显示此更改。有什么方法可以强制对指定的 iframe 进行硬刷新，以便显示新版本？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-20T16:33:03.843

如果`iframe`是[same-origin](https://developer.mozilla.org/docs/Same_origin_policy_for_JavaScript)，您可以使用强制重新加载整个页面

```
iframe.contentWindow.location.reload(true);//The argument "true" will force all loaded resources, such as images, to be re-checked for expiry at the server 
```

↪[在 jsFiddle 查看示例](http://jsfiddle.net/M6sCP/)

↪ [Mozilla Developer wiki 上的更多信息](https://wiki.developer.mozilla.org/docs/Web/API/Location/reload)

* * *

如果您可以控制为页面发送的 HTTP 标头`iframe`，您还可以[指示浏览器一开始就不要缓存它](https://stackoverflow.com/q/49547/1419007)。

* * *

此外，大多数网页完全忽略[查询字符串](https://en.wikipedia.org/wiki/Query_string)中没有处理代码的参数，因此您可以在查询字符串中添加随机值或时间戳，以确保浏览器将其视为“新”页面并且不会使用缓存副本：

```
if(iframe.src.indexOf('timestamp') > -1){ // Check if we still have a timestamp in the URL from a previous refresh
  iframe.src = iframe.src.replace(/timestamp=[^&]+/, 'timestamp=' + Date.now()); // And if so, replace it instead of appending so the URL doesn't grow too long.
}else{ // Else we will append the timestamp
  iframe.src += (iframe.src.indexOf('?') > -1 ? "&" : "?") + 'timestamp=' + Date.now();// If the URL contains a ?, append &timestamp=...; otherwise, append ?timestamp=...
} 
```

如果[对旧版浏览器](http://caniuse.com/#search=Date.now)的支持很重要，请使用`new Date().getTime()`而不是。`Date.now()`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-20T16:23:26.567

使用 URL 重新加载 iFrame，但给它一个唯一的 ID...

```
var rand = Math.floor((Math.random()*1000000)+1);
var iframe = document.getElementById('youriframe');
iframe.src = "http://www.yourpage.com/yourpage.html?uid="+rand; 
```

如果我们可以看到您当前拥有的代码，那么为您提供解决方案会更容易。

希望它有所帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-07-03T16:18:21.883

我为此挣扎了很久。如果您的 iframe 与您的网页位于同一域中，则上述许多方法都有效。

但是，如果您的 iframe 来自另一个域，则这些方法不起作用（由于 CORS 策略）。

更改 src 属性类型的作品，但不会导致 iframe 的正确重绘。如果您使用 iframe 在页面中嵌入 Google 地图，这一点尤其明显。

我最终发现的是，您需要：

1）保存iframe的source属性

2) 从 DOM 中移除 iframe

3) 在步骤 1 中保存的源属性末尾添加一个随机查询参数。

4) 将 iframe 添加回 DOM（具有唯一源属性）。

```
 //save the source of the iframe minus the unique identifier
    tempElementSrc = $('#the-iframe').attr('src').substring(0,$('#the-iframe').attr('src').lastIndexOf('&', $('#the-iframe').attr('src')));

  //remove the iframe
    $('#the-iframe').remove();

  //readd the iframe with the new source including random query string
  $('#container-id').append('<iframe width=\"100%\" id=\"iframe-id\" src=\"' + tempElementSrc + '&' + Date.now() + '\">'); 
```

# emgucv - Emgu Cv 运动检测

> ID：13477452
> 
> 赞同：1
> 
> 时间：2012-11-20T16:19:20.410
> 
> 标签：emgucv

我正在使用 EmguCv 进行手部检测。我已成功检测到实时视频源中的肤色对象。在那个皮肤检测到的对象中，我只想跟踪移动的手。请有人告诉我如何在不降低性能的情况下实现这一目标。代码或分步过程将很有帮助。

是否有任何关于 EmguCv 的最佳参考电子书用于学习或任何其他带有代码片段的材料？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-04T22:27:27.593

您实际上需要执行许多步骤才能做到这一点。

1）你需要找到手，最好的办法就是使用`HarrCascades`，你可以在这里找到更多关于它的信息：[http ://www.360doc.com/content/11/1220/16/5087210_173660914.shtml](http://www.360doc.com/content/11/1220/16/5087210_173660914.shtml)

2）然后你需要在`current frame`和之间使用绝对减法`previous frame`来找出视频中的移动部分。对于绝对减法，您可以查看此[链接。](http://www.emgu.com/wiki/index.php/CompareImages_-_Difference)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-13T12:48:12.553

检测到手之后，您可以使用 Mean Shift Tracking Algorithm 来跟踪手。Accord.NET 中有一个很好的实现和一个示例，您可以使用它来学习如何使用它。关于 Viola-Jones 算法 m 有一个来自 Nikolas Markou 的家伙的 HandCascade.xml 文件，但是当我尝试它时，性能一点也不好，使用该 Haar Cascade 的其他人也有类似的抱怨。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-12T02:10:15.527

关于 EmguCv 的参考书，据我所知，目前只有一本书：

Emgu 简历要点

[http://www.amazon.com/Emgu-CV-Essentials-Shin-Shi-ebook/dp/B00GOMTTHI](https://rads.stackoverflow.com/amzn/click/com/B00GOMTTHI)

# tsql - 将日期和/或时间从字符串 nvarchar 转换为 nvarchar 时转换失败

> ID：13477454
> 
> 赞同：0
> 
> 时间：2012-11-20T16:19:26.280
> 
> 标签：tsql

疯狂的错误在这里。我正在从`nvarchar`数据类型中保存的客户表中选择数据负载，然后尝试将其插入到另一个数据类型表中`nvarchar`。

```
INSERT INTO NameSplit (B@, Ref@, FirstName, MiddleNames, Surname, Title)
select B@
      ,Ref@
      ,FirstName
      ,MiddleNames
      ,Surname
      ,NewTitle
from #2 
```

但由于某种原因，它在将它插入我的新表时试图转换它，它从 nvarchar 开始并最终进入 nvarchar。

是的，那里有错误的数据，有人在名称字段中输入了日期等，但我仍然不明白这是如何以日期时间的方式看待的？

谢谢

# nhibernate - 当我使用流利的 Nhibernate 继承时尝试运行实体查询

> ID：13477455
> 
> 赞同：0
> 
> 时间：2012-11-20T16:19:26.457
> 
> 标签：nhibernate, c#-4.0, fluent-nhibernate

我尝试将一些通用属性提取到基类并使用 Fluent Nhibernate 进行映射。此外，我还尝试添加第二级继承。

```
//Base entity class
public class EntityBase : IEntityBase
{
    public EntityBase()
    {
        CreatedDate = DateTime.Now;
    }
    public virtual DateTime? CreatedDate { get; set; }
    public virtual int Id { get; set; }
    public virtual int Version { get; set; }
}

//Base Entity Mapping
public class EntityBaseMap: ClassMap<EntityBase>
{
     public EntityBaseMap()
     {
         UseUnionSubclassForInheritanceMapping();
         Id(x => x.Id);
         Version(x => x.Id);
         Map(x => x.CreatedDate);
     }
}

//first sub class of EntityBase
public class Actuate : EntityBase, IActuate
{
    public virtual DateTime? ActivatedOn { get; set; }
}

//Actuate Mapping class
public class ActuateMap : SubclassMap<Actuate>
{
     public ActuateMap()
     {
         Map(x => x.ActivatedOn);
     }
}

//Sub class entity 
public class Item : Actuate
{
  public virtual string Name { get; set; }
  public virtual string Description { get; set; }
  public virtual decimal UnitPrice { get; set; }
  public virtual ItemStatus Status { get; set; }
  public virtual Store Store { get; set; }
}

//Item Mapping class
public class ItemMap : SubclassMap<Item>
{
public ItemMap()
{
        Abstract();
  Map(x => x.Name);
  Map(x => x.Description);
  Map(x => x.UnitPrice);
  Map(x => x.Status);
  References(x => x.Store);
 } 
```

}

**我发现的实体有问题（可能存在其他关系问题）**

```
//Store entity Does not inherit from EntityBase or Actuate
public class Store
{
  public virtual int Id { get; set; }
  public virtual int Version { get; set; }
  public virtual string Name { get; set; }
  public virtual IEnumerable<Item> Items { get; set; }
 }      

//Store mapping class
public class StoreMap : ClassMap<Store>
{
 public StoreMap()
 {
   Id(x => x.Id).GeneratedBy.Assigned();
   Version(x => x.Version);
   Map(x => x.Name);
   HasMany(x => x.Items);
 }
} 
```

**问题**

如果我尝试运行以下查询：

```
//store = is the Store entity I have retrieved from the database and I am trying  
//trying to return the items that are associated with the store and are active

store.Items != null && store.Items.Any(item => item.Status == ItemStatus.Active); 
```

我收到以下错误：

**错误**

> Nhibernate.Exceptions.GenericADOException：无法初始化集合：[SomeDomain.Store.Items#0][SQL: SELECT items0_.StoreId as StoreId1_, items0_.Id as Id1_, items0_.Id as Id10_0_, items0_.CreatedDate as CreatedD2_10_0_, items0_ .ActivatedOn 作为 Activate1_11_0_，items0_.Name 作为 Name12_0_，items0_.Description 作为 Descript2_12_0_，items0_.UnitPrice 作为 UnitPrice12_0_，items0_.Status 作为 Status12_0_，items0_.StoreId 作为 StoreId12_0_ FROM [Item] items0_ WHERE items0_.StoreId=?]"}

**内部异常** “无效的对象名称‘项目’。”

现在，如果我取出基类并且 Item 不继承，并且

> 标识，版本

列是 Item 实体的一部分，并在 ItemMap 映射类中进行映射（使用 ItemMap 类继承自`ClassMap<Item>`相反，一切正常工作。

**注意** 我也尝试在 StoreMap 类上添加不成功。

```
HasMany(x => x.Items).KeyColumn("Id"); 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:28:03.973

如果 entityBase 只是为了继承公共属性，那么你根本不需要映射它

```
public class EntityBaseMap<TEntity> : ClassMap<TEntity> where TEntity : EntityBase
{
     public EntityBaseMap()
     {
         Id(x => x.Id);
         Version(x => x.Version);
         Map(x => x.CreatedDate);
     }
}

public class ActuateMap : EntityBaseMap<Actuate> { ... } 
```

**笔记：**

*   Versionmapping 应该映射 Version 属性而不是 Id
*   版本在代码中应该是只读的，所以没有人会意外地改变它
*   `.KeyColumn("Id")`是错误的，因为该列来自 Items 表，然后它既是自动生成的 id 又是外键。这是不可能的，也没有用
*   通常只有抽象的类应该包含`Abstract()`在映射中

# excel - Delphi cxGrid 行数

> ID：13477456
> 
> 赞同：1
> 
> 时间：2012-11-20T16:19:29.197
> 
> 标签：excel, delphi, rowcount

我使用 cxGrid，我想将一个 excel 文件导入 cxgrid。我把这段代码写成了一个函数。

但是，它是错误的，因为 cxGrid 不知道 RowCount 和 ColCount。我想知道，我可以使用什么，有什么相似之处？帮我！谢谢！

```
function Xls_To_cxGrid(AGrid: TcxGrid; AXLSFile: string): Boolean;

const
  xlCellTypeLastCell = $0000000B;
var
  XLApp, Sheet: OLEVariant;
  RangeMatrix: Variant;
  x, y, k, r: Integer;
begin
  Result := False;
  XLApp := CreateOleObject('Excel.Application');
  try
    XLApp.Visible := False;
    XLApp.Workbooks.Open(AXLSFile);
    Sheet := XLApp.Workbooks[ExtractFileName(AXLSFile)].WorkSheets[1];

    Sheet.Cells.SpecialCells(xlCellTypeLastCell, EmptyParam).Activate;
    x := XLApp.ActiveCell.Row;
    y := XLApp.ActiveCell.Column;

      AGrid.RowCount := x;
      AGrid.ColCount := y;

    RangeMatrix := XLApp.Range['A1', XLApp.Cells.Item[X, Y]].Value;
    k := 1;
    repeat
      for r := 1 to y do
        AGrid.Cells[(r - 1), (k - 1)] := RangeMatrix[K, R];
      Inc(k, 1);
      AGrid.RowCount := k + 1;
    until k > x;
    RangeMatrix := Unassigned;

  finally
    if not VarIsEmpty(XLApp) then
    begin
      XLApp.Quit;
      XLAPP := Unassigned;
      Sheet := Unassigned;
      Result := True;
    end;
  end;
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T16:33:09.580

cxGrid 只是 ChartViews、TableViews、CardViews 和 BandedTableViews 的容器。作为一个容器，它对行和列一无所知。因为您想替换 StringGrid，所以我建议使用（非 DB）TableView。

要获得 TableView...

*   ...打开网格自定义表单（单击表单设计器中网格的“结构导航器”中的“自定义...”）。
*   转到“视图”选项卡，然后单击“添加视图...”。选择“表”（**不是**“数据库表”！）。
*   在“结构”选项卡上右键单击 cxGrid1Level1 符号，选择“选择视图”和新的 TableView。
*   您现在可以返回“视图”选项卡并删除**DB** TableView (cxGrid1DBTableView1)。

（另请参阅标题“指定关联的网格视图”下的 DX 帮助主题“网格级别”。）

然后，您将使用`YourView.DataController.RecordCount`. “ColCount”将是`YourView.ColumnCount`. 您可以使用 访问单元格值`YourView.DataController.Values[...]`。为了加快填充视图，我会用它包围它

```
YourView.DataController.BeginUpdate;
try
  YourView.DataController.RecordCount := x;
  // ...
finally
  YourView.DataController.EndUpdate;
end; 
```

# java - 向Java中的方法调用添加未知数量的参数

> ID：13477462
> 
> 赞同：1
> 
> 时间：2012-11-20T16:19:55.510
> 
> 标签：java, argument-passing

我有一个我想扩展的方法（而不是编写一个基本相同的新方法），方法是在参数列表的末尾添加未知数量的参数。

如果我这样做，我是否必须更改对该方法的所有调用？我想问题是，未知参数是否包括根本没有传入参数的情况？

例如，如果我有一个方法：

```
queryFactory(int [] typeArgs, int queryType, int[] ... args){} 
```

我可以打电话给：

```
queryFactory(typeArgsInstce, queryTypeInstce) 
```

然后当我需要向查询调用添加参数时：

```
queryFactory(typeArgsInstce, queryTypeInstce, argsInstce) 
```

where`argsInstce`是一个包含额外参数的整数数组。

我只想编辑这个方法，而不是编写一个几乎完全相同的新方法，除了它有一些参数要添加到查询中。如果通过编辑这个方法我将不得不更改对这个方法的所有其他调用，我将简单地编写另一种方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T16:23:59.660

```
public static void main(String[] args) {
    method(1);      // <- compile error
    method(1,2);
    method(1,2,3);
    method(1,2,3,4);
}

private static void method(int i1, int i2, int...i3) {
    // do something
} 
```

所以用文字来回答这个问题：我们至少需要 2 个参数。这会将一个空数组 'i3[]' 传递给该方法。3 号及以上的参数被视为数组值。

* * *

没有什么不同的...

```
public static void main(String[] args) {
    method(new int[]{1});      // <- compile error
    method(new int[]{1},2);
    method(new int[]{1},2,new int[]{3,4});
    method(new int[]{1},2,new int[]{3,4},new int[]{5,6});
}

private static void method(int[] i1, int i2, int[]...i3) {
    // do something
} 
```

varargs 参数必须是最后一个参数，因此它不会与第一个数组冲突

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T16:42:59.703

如您所问**，我可以打电话吗：**您可以打电话来这里是示例

```
public static void main(String[] args) {

        int[] i = { 1, 2, 3 };
        int[] i1 ={1,1,1,1};
        System.out.println("Sum: " + sum(i,2,i1));
        System.out.println("Sum: " + sum(i,2));
    }

    static int sum(int[] numbers1,int num,int[]... numbers2) {
        int t[][] = numbers2;
        int total = 0;
        for (int i = 0; i < t.length; i++) {
            for (int j = 0; j < t[i].length; j++) {
                System.out.print(t[i][j]);
                total += t[i][j];
            }

        }
        for(int test : numbers1)
             total+=test;

        total+=num;

        return total;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T17:01:23.163

我知道您不想更改方法的签名，因为您需要更改该方法的每次调用，因此您可以创建一个包含所有代码的 3 个 args 的方法，并仅重载相同的方法2 个 args，但在此方法中，您只能使用 3 个 args 调用该方法，最后一个 arg 将为空。我知道不是您想要的，但您不会重复代码并更改方法的签名。

```
public void queryFactory(int [] typeArgs, int queryType, int... args){
     // do something
}

public void queryFactory(int [] typeArgs, int queryType){
    queryFactory(typeArgs,queryType,null);
} 
```

# warnings - WARN orsnet.rtmpt.BaseRTMPTConnection - 编码后响应缓冲区为空

> ID：13477466
> 
> 赞同：2
> 
> 时间：2012-11-20T16:20:05.963
> 
> 标签：warnings, red5

我已经成功在 CentOS 上安装了 red5 服务器。也就是说，oflaDemo 的演示使用 prometheus.mp4 和 JWplayer 文件运行没有问题。但是当我像这样放置另一个 mp4 文件时：

[http://content.bitsontherun.com/videos/nhYDGoyh-kNspJqnJ.mp4](http://content.bitsontherun.com/videos/nhYDGoyh-kNspJqnJ.mp4)

播放器加载非常缓慢，仅显示几秒钟的视频。在 red5 日志文件中，我看到多个警告“编码后响应缓冲区为空”，如下所示。尝试了其他几个mp4文件，结果都一样。对 mp4 文件有特定要求吗？还是我错过了特定的视频解码器？还是red5内部的问题？欢迎任何提示！

```
2012-11-20 15:49:55,261 [Red5_Scheduler_Worker-2] 信息 o.red5.server.net.rtmp.RTMPHandler - 连接到：[WebScope@6f51b1b7 深度 = 1，路径 = '/default'，名称 = 'oflaDemo ']
2012-11-20 15:49:55,264 [Red5_Scheduler_Worker-2] 信息 org.red5.demos.oflaDemo.Application - W3C x-category:session x-event:connect c-ip:37.251.89.8 c-client-id: 0
2012-11-20 15:49:55,265 [Red5_Scheduler_Worker-2] 信息 org.red5.demos.oflaDemo.Application - oflaDemo appConnect
2012-11-20 15:49:55,360 [http-0.0.0.0-5080-exec-4] 信息 orsnrcodec.RTMPProtocolDecoder - 操作 createStream
2012-11-20 15:49:55,507 [Red5_Scheduler_Worker-4] 信息 o.red5.server.net.rtmp.RTMPHandler - 记住流上的客户端缓冲区：2000
2012-11-20 15:49:55,556 [http-0.0.0.0-5080-exec-2] 信息 orsnrcodec.RTMPProtocolDecoder - 动作播放
2012-11-20 15:49:56,052 [pool-5-thread-1] INFO org.red5.demos.oflaDemo.Application - W3C x-category:stream x-event:play c-ip:37.251.89.8 x-名称：29295add-1dcc-4d74-b5e1-c7cd34c2b5c1
2012-11-20 15:49:56,837 [Red5_Scheduler_Worker-1] 信息 org.red5.io.mp4.MP4Atom - Apple 标志？：appl
2012-11-20 15:49:56,867 [Red5_Scheduler_Worker-1] WARN org.red5.io.mp4.impl.MP4Reader - 跳过无效位置的视频帧
2012-11-20 15:49:57,531 [pool-5-thread-1] INFO org.red5.demos.oflaDemo.Application - W3C x-category:stream x-event:play c-ip:37.251.89.8 x- sname:29295add-1dcc-4d74-b5e1-c7cd34c2b5c1 x-name:mp4:
演示2.mp4
2012-11-20 15:50:34,376 [pool-5-thread-4] WARN orsnet.rtmpt.BaseRTMPTConnection - 编码后响应缓冲区为空
2012-11-20 15:50:34,398 [pool-5-thread-4] WARN orsnet.rtmpt.BaseRTMPTConnection - 编码后响应缓冲区为空
2012-11-20 15:50:34,410 [pool-5-thread-4] WARN orsnet.rtmpt.BaseRTMPTConnection - 编码后响应缓冲区为空
[ETC]

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T07:46:46.640

您可以执行以下操作：使用 FFMPEG 读取示例 MP4 的确切比特率和每秒帧速率，然后将您的视频转换为完全相同的设置。

Red5 似乎确实与您提供的格式的 mp4 有问题。但是，您应该首先找出有效的示例 mp4 与您的示例之间的差异。FFMPEG 应该使您能够做到这一点。

塞巴斯蒂安

# c# - 部署到 Azure 时是否可以复制整个目录？

> ID：13477467
> 
> 赞同：0
> 
> 时间：2012-11-20T16:20:06.340
> 
> 标签：c#, azure, azure-web-roles

我正在使用 Azure，需要将文件从我的项目复制到 Azure 的 approot 目录。
为此，我转到文件->属性->构建操作并设置
**构建操作：**内容
**复制到输出目录：**始终复制

它适用于文件，但现在我需要上传几个目录。
是否可以将整个目录上传到 Azure 的 approot？

我正在使用 .Net 4.5，Visual Studio 2012。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T16:52:11.583

在 Visual Studio UI 文件夹中没有任何属性设置，而是只有文件具有编译器和其他打包工具使用的属性。如果选择每个文件有问题，您可以使用键盘快捷键（Shift + _top_file & _bottom_file 在文件夹中）选择特定文件夹中的所有文件，然后只使用一次属性设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T06:41:30.223

是的。但据我所知，您必须`.csproj`手动编辑才能做到这一点。使用`*`or`**`进行递归，如下所示：

```
<ItemGroup>
  <None Include="startup\**">
    <CopyToOutputDirectory>Always</CopyToOutputDirectory>
  </None> 
```

我通常手动添加一个文件，然后在我的`.csproj`.

# excel - (VBA) IF = TRUE 中的布尔条件；尽管如此，还是跳过了胆量

> ID：13477471
> 
> 赞同：1
> 
> 时间：2012-11-20T16:20:18.190
> 
> 标签：excel, vba, boolean

我已经设置了以下 IF 条件：

```
 If Range("D" & x) + Range("D" & z) = 0 = True And (Range("G" & x) = Range("G" & z)) = True And (IsEmpty(Range("A" & x)) = False) = True And (IsEmpty(Range("C" & x)) = False) = True Then

          [guts]

    End if 
```

我已插入所有**(condition) = True**以便能够在调试时评估每个单独的条件，并且它们都返回 TRUE = TRUE。然而它并没有执行布尔值的内容。这对我来说没有意义，但希望你们中的一个人能看出它有什么问题。我创建了一个测试表来运行宏，只包含几行我知道在所有条件下都应该返回 TRUE 的数据，但它不起作用。我有一种感觉，这是一个非常明显的错误。

您可以在此处下载包含一些数据的示例：[http ://www.mediafire.com/view/?rm299bttfsp1v01](http://www.mediafire.com/view/?rm299bttfsp1v01)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:26:51.357

重新格式化并制作了一个可粘贴的示例：

```
 Public Sub demo()
  Dim x, Z As Long

  x = 1
  Z = 1

  If Range("D" & x) + Range("D" & Z) = 0 = True And _
  (Range("G" & x) = Range("G" & Z)) = True And _
  (IsEmpty(Range("A" & x)) = False) = True And _
  (IsEmpty(Range("C" & x)) = False) = True Then

          Debug.Print "[guts]"

    End If

End Sub 
```

它适用于我，如果 A1=12 和 C1=12 （例如）

但这就是我写这个的方式：

```
Public Sub demo()
  Dim x, Z As Long

  x = 1
  Z = 1

  'to confirm
  Debug.Print Range("D" & x) + Range("D" & Z) = 0
  Debug.Print Range("G" & x) = Range("G" & Z)
  Debug.Print Not IsEmpty(Range("A" & x))
  Debug.Print Not IsEmpty(Range("C" & x))

  If Range("D" & x) + Range("D" & Z) = 0 And _
     Range("G" & x) = Range("G" & Z) And _
     Not IsEmpty(Range("A" & x)) And _
     Not IsEmpty(Range("C" & x)) Then

          Debug.Print "[guts]"
  End If

End Sub 
```

*编辑*

您可以使用以下代码轻松测试：

```
 Debug.Print Range("D" & x) + Range("D" & Z) = 0 And _
              Range("G" & x) = Range("G" & Z) And _
              Not IsEmpty(Range("A" & x)) And _
              Not IsEmpty(Range("C" & x)) 
```

如果在之后粘贴 `For Z = 8 To 16`。

它不能解决，这就是为什么你没有勇气;）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T16:26:45.113

难道是你被操作顺序挂断了？看起来您可能在第一个条件周围缺少一组括号......

```
If (Range("D" & x) + Range("D" & z) = 0) = True And (Range("G" & x) = Range("G" & z)) = True And (IsEmpty(Range("A" & x)) = False) = True And (IsEmpty(Range("C" & x)) = False) = True Then

      [guts]

End if 
```

# jquery - getJSON 调用失败，除非单步执行

> ID：13477472
> 
> 赞同：0
> 
> 时间：2012-11-20T16:20:22.157
> 
> 标签：jquery, ajax, hyperlink, getjson

我有一个应用程序，它有一个主页和一个带有复选框的表单；chk-bxs 表示要从 MySQL 数据库返回的列数据。

我试图实现的行为是：

1.  用户选中/取消选中主页上的复选框
2.  用户单击链接到将运行查询的页面
3.  服务器通过 getJSON 调用接收复选框状态，由主页的卸载触发。PHP 加载 $_SESSION[] w/ chk-bxs 状态
4.  然后服务器使用 $_SESSION[] 中的数据处理链接调用，以确定要返回哪些列数据并在结果中显示在表中

如果我在 getJSON 调用的最后一个成员分配处放置一个断点并单步执行，我可以实现这一点。如果没有这一步，getJSON 调用似乎不会发生；因此 chk-bxs 值不会传输到服务器。谁能解释这种行为？有没有更好的方法来解决这个问题？任何想法将不胜感激。

这是 index.php 文件的 head 部分中的代码，它调用将执行 getJSON 调用的函数：

```
$(window).on('beforeunload', function(){
indexFormUnload(); // this saves the state of the SELECT check-boxes
}); 
```

这是构造 getJSON 调用的代码 - 它位于 index.php 文件中包含的单独文件中：

```
function indexFormUnload(){
var ckBxValues = $(":input").serializeArray();
$.getJSON("ajaxJQ_server.php", // server page called by jquery
{ // Data sent via ajaxJQ
"callingForm": "index",
"callingElementID" : null,
"locStorage": ckBxValues,
"callingState": "unload",
"tableName": null
}
);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T16:44:36.797

当浏览器关闭时，它会终止所有打开的连接。他们这样做是为了表现。你有一个比赛条件，你大部分时间都不会赢。无法确保对服务器进行了调用。曾经有一种方法可以通过 while 循环来实现，但浏览器将其杀死。

# ruby - 重新安装 RVM 导致无法识别的命令行参数“impode”

> ID：13477476
> 
> 赞同：0
> 
> 时间：2012-11-20T16:20:37.687
> 
> 标签：ruby, ruby-on-rails-3, terminal, rvm

在我说：“我已经尝试了一切”之前，我应该在这里发帖。所以，这是我的问题。
我遇到了问题`ruby 1.9.3-p194`。我的终端卡在每个（！）涉及 ruby​​ 或 rails 的命令上。（例如`rails s mongrel`，甚至`rails -v`和`ruby -v`）

这一切都始于这件奇怪的事情：

```
$ rvm use 1.9.3-p194
Using /usr/local/rvm/gems/ruby-1.9.3-p194

$ bundle exec rails s mongrel 
```

然后卡住了。所以，我想知道我安装了哪些版本的 ruby​​：

```
$ rvm list

rvm rubies

ruby-1.8.7-p370 [ i686 ]

# => - current
# =* - current && default
#  * - default 
```

咦？！那么我使用的是未安装的 ruby​​ 版本吗？

经过一些研究，许多建议是重新安装整个软件包。所以，我试过了。

```
$ rvm uninstall 1.9.3-p194
Removing /usr/local/rvm/src/ruby-1.9.3-p194...
/usr/local/rvm/rubies/ruby-1.9.3-p194 has already been removed. 
```

再次，只是为了确保..

```
$ rvm uninstall 1.9.3-p194
/usr/local/rvm/src/ruby-1.9.3-p194 has already been removed.
/usr/local/rvm/rubies/ruby-1.9.3-p194 has already been removed. 
```

嗯，看起来不错。（除了在第一次尝试时已经删除了一半...... :| ）
然后：

### 错误 #1

```
$ rvm reinstall 1.9.3-p194
Removing /usr/local/rvm/src/ruby-1.9.3-p194...
/usr/local/rvm/rubies/ruby-1.9.3-p194 has already been removed.
No binary rubies available for: osx/10.8/x86_64/ruby-1.9.3-p194.
Continuing with compilation. Please read 'rvm mount' to get more information on binary rubies.
Installing Ruby from source to: /usr/local/rvm/rubies/ruby-1.9.3-p194, this may take a while depending on your cpu(s)...
ruby-1.9.3-p194 - #downloading ruby-1.9.3-p194, this may take a while depending on your connection...
ruby-1.9.3-p194 - #extracted to /usr/local/rvm/src/ruby-1.9.3-p194 (already extracted)
ruby-1.9.3-p194 - #autoreconf
Error running 'autoreconf', please read /usr/local/rvm/log/ruby-1.9.3-p194/autoreconf.log
Skipping configure step, 'configure' does not exist, did autoreconf not run successfully?
ruby-1.9.3-p194 - #compiling

Error running 'make', please read /usr/local/rvm/log/ruby-1.9.3-p194/make.log
There has been an error while running make. Halting the installation. 
```

下一步是：

```
$ rvm uninstall 1.9.3-p194
Removing /usr/local/rvm/src/ruby-1.9.3-p194...
/usr/local/rvm/rubies/ruby-1.9.3-p194 has already been removed.
Removing default ruby interpreter

$ rvm list

rvm rubies

# No rvm rubies installed yet. Try 'rvm help install'. 
```

所以我检查了`help install`，但没有发现任何可能有帮助的东西。至少，我还没有看到解决方案..
下一个：

### 错误 #2

```
$ rvm install 1.9.3-p194
No binary rubies available for: osx/10.8/x86_64/ruby-1.9.3-p194.
Continuing with compilation. Please read 'rvm mount' to get more information on binary rubies.
Installing Ruby from source to: /usr/local/rvm/rubies/ruby-1.9.3-p194, this may take a while depending on your cpu(s)...
ruby-1.9.3-p194 - #downloading ruby-1.9.3-p194, this may take a while depending on your connection...
ruby-1.9.3-p194 - #extracting ruby-1.9.3-p194 to /usr/local/rvm/src/ruby-1.9.3-p194
ruby-1.9.3-p194 - #extracted to /usr/local/rvm/src/ruby-1.9.3-p194
ruby-1.9.3-p194 - #configuring

Error running 'env LDFLAGS=-L/opt/sm/pkg/active/lib CFLAGS=-I/opt/sm/pkg/active/include CPATH=/opt/sm/pkg/active/include -L/usr/local/rvm/usr/lib ./configure --enable-shared --disable-install-doc --prefix=/usr/local/rvm/rubies/ruby-1.9.3-p194', please read /usr/local/rvm/log/ruby-1.9.3-p194/configure.log
There has been an error while running configure. Halting the installation. 
```

现在，我想卸载 rvm：

```
$ brew uninstall rvm
Error: No such keg: /usr/local/Cellar/rvm 
```

好的..让我们检查它是否仍然有效..？

```
$ rvm

<listed standard output, thought that'd be useless here..> 
```

是的，它还在那里。让我们尝试再次安装 1.9.3..

### 错误 #2（与以前相同..）

```
$ rvm install 1.9.3
No binary rubies available for: osx/10.8/x86_64/ruby-1.9.3-p327.
Continuing with compilation. Please read 'rvm mount' to get more information on binary rubies.
Installing Ruby from source to: /usr/local/rvm/rubies/ruby-1.9.3-p327, this may take a while depending on your cpu(s)...
ruby-1.9.3-p327 - #downloading ruby-1.9.3-p327, this may take a while depending on your connection...
ruby-1.9.3-p327 - #extracting ruby-1.9.3-p327 to /usr/local/rvm/src/ruby-1.9.3-p327
ruby-1.9.3-p327 - #extracted to /usr/local/rvm/src/ruby-1.9.3-p327
ruby-1.9.3-p327 - #configuring

Error running 'env LDFLAGS=-L/opt/sm/pkg/active/lib CFLAGS=-I/opt/sm/pkg/active/include CPATH=/opt/sm/pkg/active/include -L/usr/local/rvm/usr/lib ./configure --enable-shared --disable-install-doc --prefix=/usr/local/rvm/rubies/ruby-1.9.3-p327', please read /usr/local/rvm/log/ruby-1.9.3-p327/configure.log
There has been an error while running configure. Halting the installation. 
```

然后我找到了一个'解决方案......'，#not..

```
$ umask g+w
$ export -a rvm_configure_env
$ rvm_configure_env=('LDFLAGS=-L/opt/sm/pkg/active/lib' 'CFLAGS=-I/opt/sm/pkg/active/include' 'CPATH=/opt/sm/pkg/active/include') 
```

没有成功。我尝试再次安装 1.9.3，这再次引发**错误 #2**

我就是这么想的。让我们把所有的东西都内爆..（将其作为可能的解决方案阅读）

```
$ rvm implode
Are you SURE you wish for rvm to implode?
This will recursively remove /usr/local/rvm and other rvm traces?
(anything other than 'yes' will cancel) > yes
Removing rvm-shipped binaries (rvm-prompt, rvm, rvm-sudo rvm-shell and rvm-auto-ruby)
Removing rvm wrappers in /usr/local/rvm/bin
Hai! Removing /usr/local/rvm
rm: /etc/profile.d/rvm.sh: Permission denied
/usr/local/rvm has been removed.
rvm has been fully removed. Note you may need to manually remove /etc/rvmrc and ~/.rvmrc if they exist still. 
```

哦……`Permission denied`不错……

```
$ sudo rvm implode
Password:
sudo: rvm: command not found 
```

万岁！它最终被删除。

让我们重新安装它..

```
$ gem install rvm
Successfully installed rvm-1.11.3.5
1 gem installed
Installing ri documentation for rvm-1.11.3.5...
Installing RDoc documentation for rvm-1.11.3.5... 
```

什么？！一次尝试后？好的.. :) 但是然后..

### 错误 #3

```
$ rvm install 1.9.3-p194
cat: /usr/local/rvm/VERSION: No such file or directory
-bash: /usr/local/rvm/scripts/base: No such file or directory
Unrecognized command line argument: 'impode' ( see: 'rvm usage' ) 
```

`impode`.. ? 什么？！嗯，这可能是来自较早的错字..

然后我尝试了一些其他命令一遍又一遍地返回相同的错误：

```
ifonteijne:dash Kers$ rvm install 1.9.3-p194
cat: /usr/local/rvm/VERSION: 没有这样的文件或目录
-bash: /usr/local/rvm/scripts/base: 没有这样的文件或目录
无法识别的命令行参数：“imstall”（参见：“rvm usage”）
ifonteijne:dash Kers$ rvm impode
cat: /usr/local/rvm/VERSION: 没有这样的文件或目录
-bash: /usr/local/rvm/scripts/base: 没有这样的文件或目录
无法识别的命令行参数：“impode”（参见：“rvm 用法”）
ifonteijne:dash Kers$ rvm 内爆
cat: /usr/local/rvm/VERSION: 没有这样的文件或目录
-bash: /usr/local/rvm/scripts/base: 没有这样的文件或目录
无法识别的命令行参数：“impode”（参见：“rvm 用法”）
ifonteijne:dash Kers$ rvm install
cat: /usr/local/rvm/VERSION: 没有这样的文件或目录
-bash: /usr/local/rvm/scripts/base: 没有这样的文件或目录
无法识别的命令行参数：“impode”（参见：“rvm 用法”）

```

现在我被困在......

如果有人可以帮助我，请。

我要安装：`Ruby 1.9.3-p194`通过`RVM`

== 编辑 == 试过：

```
$ bash -s stable < <(curl -s https://raw.github.com/wayneeseguin/rvm/master/binscripts/rvm-installer )

# Kers,
#
#   Thank you for using RVM!
#   I sincerely hope that RVM helps to make your life easier and more enjoyable!!!
#
# ~Wayne 
```

嗯，这行得通。

```
$ rvm install 1.9.3-p194
No binary rubies available for: osx/10.8/x86_64/ruby-1.9.3-p194.
Continuing with compilation. Please read 'rvm mount' to get more information on binary rubies.
You requested building with '/Developer/usr/bin/gcc' but it is not in your path.

$ brew install gcc
==> Installing gcc dependency: gmp
==> Downloading http://ftpmirror.gnu.org/gmp/gmp-5.0.5.tar.bz2
######################################################################## 100.0%
==> ./configure --prefix=/usr/local/Cellar/gmp/5.0.5 --enable-cxx --build=x86_64-apple-darwin
==> make
==> make check
==> make install
                 (...)
Xcode: 4.5.2 => /Volumes/SATA/Applications/Xcode.app/Contents/Developer
CLT: 1.0.0.9000000000.1.1249367152
Error: Homebrew doesn't know what compiler versions ship with your version of
Xcode. Please file an issue with the output of `brew --config`:
  https://github.com/mxcl/homebrew/issues

Error: Failed executing: make (mpfr.rb:31) 
```

如前所述：

```
$ brew --config
HOMEBREW_VERSION: 0.9.3
HEAD: 360be75b4c4e286365d71664d9a8ab277d7b1fb3
HOMEBREW_PREFIX: /usr/local
HOMEBREW_CELLAR: /usr/local/Cellar
CPU: quad-core 64-bit arrandale
OS X: 10.8.2-x86_64
Xcode: 4.5.2 => /Volumes/SATA/Applications/Xcode.app/Contents/Developer
CLT: 1.0.0.9000000000.1.1249367152
GCC-4.2: build 5666
LLVM-GCC: build 2335
Clang: 2.1 build 163
X11: 2.7.3 => /opt/X11
System Ruby: 1.8.7-358
Perl: /usr/bin/perl
Python: /usr/bin/python
Ruby: /usr/bin/ruby => /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby 
```

希望这可能会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:33:55.580

感谢[rik.vanmechelen](https://stackoverflow.com/users/782031/rik-vanmechelen, "SO个人资料页面")的评论，修复了它。

结论：

### 删除红宝石

```
$ ruby implode 
```

### 安装 Ruby

*注意：`==> Make Bootstrap`需要（非常）长时间。*

```
$ curl -L get.rvm.io | bash -s stable --ruby 
```

### 安装 gcc

*注意：这不是它的标准命令，我使用它是因为 Xcode 的“命令行”错误。*

```
$ brew install --use-llvm gcc 
```

### 安装导轨

```
$ sudo gem install rails 
```

然后我就可以走了。

[rik.vanmechelen](https://stackoverflow.com/users/782031/rik-vanmechelen, "SO个人资料页面")，再次感谢。

# mime-types - 如何防止 MIME 类型设置为应用程序/强制下载？

> ID：13477478
> 
> 赞同：1
> 
> 时间：2012-11-20T16:20:41.653
> 
> 标签：mime-types, content-disposition, kentico, getfiles, force-download

我在 Kentico (CMS) 网站上工作。使用 Kentico 的 GetFile.aspx 检索文件时，在暂存 PDF 时正确地具有内联处置，而在生产中它们错误地具有附件处置。（根据需要在暂存时在浏览器中打开，并在生产中保存到磁盘，问题）。代码文件一模一样，所以肯定是配置问题，大概是在IIS或者Kentico。

我曾尝试向 GetFile.aspx 提供处置参数，但这失败了，因为 MIME 类型是应用程序/强制下载（仅在产品上发生）。我不确定这个 MIME 类型是从哪里来的。它不会出现在 IIS 的 MIME 类型列表中。Kentico 数据库中的 PDF 具有正确的 (application/pdf)。

我找不到生产和登台之间有什么不同。如果有人对它可能是什么有任何想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T18:42:44.417

您始终可以通过向查询字符串添加处置参数来强制处置，例如：

```
http://www.domain.tld/CMSPages/GetFile.aspx?nodeguid=blabla&lang=en-US&maxsidesize=600&disposition=inline 
```

可能的值是“附件”和“内联”。您所描述的生产服务器上的问题可能是由从移动设备访问 PDF 引起的。在这种情况下，处置会自动设置为附件。

# python - 将列表（元素）用作字典中的键的 Pythonic 方式是什么？

> ID：13477481
> 
> 赞同：3
> 
> 时间：2012-11-20T16:20:53.420
> 
> 标签：python, list, dictionary

鉴于列表：

```
keys = ['Orange','Blue','Green'] 
```

和字典

```
colors = {} 
```

`keys`使用（的元素）作为键的最 Pythonic 方式是`colors`什么？我目前正在执行以下操作，但想知道是否有比这更好的使用 Python 的方法。

```
for key in keys:
    colors[key] = [] 
```

**编辑**：该问题最初要求“使用最 Pythonic 的方式`keys`作为键`colors`”，但随后的代码片段表明实际需要的是一种使用其元素的方式。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T16:22:57.453

你可以使用 dict 理解：

```
In [1]: keys = ['Orange', 'Blue', 'Green']

In [2]: colors={key: [] for key in keys}

In [3]: colors
Out[3]: {'Blue': [], 'Green': [], 'Orange': []} 
```

对于python 2.6：

```
In [4]: colors = dict((key, []) for key in keys)

In [5]: colors
Out[5]: {'Blue': [], 'Green': [], 'Orange': []} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-20T16:23:45.950

上面提到的字典理解是要走的路。为了显示替代方案，如果要使用列表实例化，还可以`defaultdict`结合使用 a：`fromkeys`

```
In [1]: from collections import defaultdict

In [2]: keys = ['Orange','Blue','Green']

In [3]: colors = defaultdict.fromkeys(keys, list)

In [4]: colors['Orange']
Out[4]: <type 'list'> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-20T16:21:52.183

如果顺序很重要，请使用`tuple`.

```
In [113]: keys = ['Orange','Blue','Green']

In [114]: colors = {}

In [115]: colors[tuple(keys)] = 0

In [116]: colors
Out[116]: {('Orange', 'Blue', 'Green'): 0} 
```

如果顺序无关紧要，请使用`frozenset`. A`frozenset`本质上为您提供了一个 hashable `set`，它不能被修改，但具有`set`（O(1) 查找等）的所有优点

```
In [117]: colors = {}

In [118]: colors[frozenset(keys)] = 0

In [119]: colors
Out[119]: {frozenset(['Orange', 'Blue', 'Green']): 0} 
```

如果您希望 in 中的每个元素都是 in`keys`中的键`colors`：

```
In [120]: colors = {k:[] for k in keys}

In [121]: colors
Out[121]: {'Blue': [], 'Green': [], 'Orange': []} 
```

# c# - WPF 绑定依赖属性

> ID：13477486
> 
> 赞同：5
> 
> 时间：2012-11-20T16:21:04.260
> 
> 标签：c#, wpf, xaml, binding, dependency-properties

我在 UserControl 中绑定依赖项属性时遇到问题。当它初始化时，它会获得一个值，但随后它不会更新。我可能错过了一些明显的东西，这里有一些代码片段：

这是我绑定`BalanceContent`依赖属性的地方：

```
<Game:PlayerDetails x:Name="SelectedPlayerDetails" Grid.Row="1" Grid.Column="2" Grid.ColumnSpan="2" Grid.RowSpan="4" 
                          BalanceContent="{Binding Source={StaticResource UserData}, Path=SelectedUser.Balance, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}">

    </Game:PlayerDetails> 
```

这是`TextBox`在`UserControl`：

```
 <TextBox  VerticalAlignment="Center" FontFamily="Formata" FontSize="20" Grid.Column="2" 
         Text="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType={x:Type UserControl}}, Path=BalanceContent}" 
             Grid.Row="7"></TextBox> 
```

这是依赖属性：

```
public static readonly DependencyProperty BalanceContentProperty = DependencyProperty.Register(
        "BalanceContent", typeof(string), typeof(PlayerDetails));

    public string BalanceContent
    {
        get
        {return (string) GetValue(BalanceContentProperty);}
        set
        {SetValue(BalanceContentProperty, value);}
    } 
```

这是所选用户更新的列表，它位于使用 UserControl 的视图中：

```
<ListView x:Name="lstAccounts"  Grid.Column="0" Grid.Row="2" Grid.ColumnSpan="2" Grid.RowSpan="4" 
              ItemsSource="{Binding Source={StaticResource UserData}, Path=CurrentUserSearch}" 
              SelectedItem="{Binding Source={StaticResource UserData}, Path=SelectedUser}" 
```

并`SelectedUser`在一个实现的类中定义`INotifyPropertyChanged`：

```
 public User SelectedUser
    {
        get
        {
            return _selectedUser;
        } 
        set
        {
            _selectedUser = value;
            OnPropertyChanged(new PropertyChangedEventArgs("SelectedUser"));
        }
    } 
```

这个想法是，当在列表中选择新用户时，TextBox 应该更新，但目前它没有这样做。我已经将绑定放在本地 TextBox 上，它更新得很好，只是没有放在`DependencyProperty`. 任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T11:49:41.913

您可以尝试一些可能性：

首先，您的 ListView 可能不会更新您的 ViewModel 的 SelectedUser 属性。尝试将 ListView 中的绑定设置为“TwoWay”模式：

```
<ListView x:Name="lstAccounts"  Grid.Column="0" Grid.Row="2" Grid.ColumnSpan="2" Grid.RowSpan="4" 
          ItemsSource="{Binding Source={StaticResource UserData}, Path=CurrentUserSearch}" 
          SelectedItem="{Binding Source={StaticResource UserData}, Path=SelectedUser, Mode=TwoWay}"/> 
```

您可以更好地组织 DataContext 的定义方式。请记住，您的 UserControl 的所有子控件都可以访问其 DataContext 而无需使用相对绑定（它们继承它）。由于您的 PlayerInfo 控件依赖于 SelectedUser，请考虑将其 DataContext 设置为 SelectedUser，或者将其绑定到 ListView 的 SelectedUser 或 UserData 视图模型中的 SelectedUser。

```
 <Game:PlayerDetails x:Name="SelectedPlayerDetails" Grid.Row="1" Grid.Column="2" Grid.ColumnSpan="2" Grid.RowSpan="4" DataContext="{Binding Source={StaticResource UserData}, Path=SelectedUser}"
                      BalanceContent="{Binding Balance, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}">

</Game:PlayerDetails> 
```

当前 SelectedUser 的来源也可以是 ListView：

```
<Game:PlayerDetails x:Name="SelectedPlayerDetails" Grid.Row="1" Grid.Column="2" Grid.ColumnSpan="2" Grid.RowSpan="4" DataContext="{Binding SelectedItem, ElementName=lstAccounts}"
                      BalanceContent="{Binding Balance, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}">

</Game:PlayerDetails> 
```

无论哪种方式，您都可以在 TextBox 上执行以下操作，因为它的 DataContext 将与其父项相同：

```
<TextBox  VerticalAlignment="Center" FontFamily="Formata" FontSize="20" Grid.Column="2" 
     Text="{Binding Balance}" 
         Grid.Row="7"></TextBox> 
```

如果用户控件在命令和其他高级逻辑等方面依赖于根视图模型，则将 DataContext 设置为它，以便您可以轻松访问 SelectedUser。

```
<Game:PlayerDetails x:Name="SelectedPlayerDetails" Grid.Row="1" Grid.Column="2" Grid.ColumnSpan="2" Grid.RowSpan="4" DataContext="{StaticResource UserData}"
                      BalanceContent="{Binding SelectedUser.Balance, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}">

</Game:PlayerDetails> 
```

所以你可以这样做：

```
<TextBox  VerticalAlignment="Center" FontFamily="Formata" FontSize="20" Grid.Column="2" 
     Text="{Binding SelectedUser.Balance}" 
         Grid.Row="7"></TextBox> 
```

但是，在第二种方法中，您将不得不检查一件我不确定的事情。我知道当一个控件的 DataContext 发生变化时，它会更新所有的依赖绑定。例如，如果您将 PlayerDetails DataContext 更改为另一个 UserData 实例，则 BalanceContent 属性也会更新。但是，在这种情况下，BalanceContent 取决于 UserData 的 SelectedUser 的属性。所以它将监听该用户实例的属性更改。如果 SelectedUser.Balance 发生变化（并且 User 实现了 INotifyPropertyChanged，或者它是一个 DependencyProperty），BalanceContent 将更新。现在，如果 UserData 中的 SelectedUser 实例发生更改，我不确定 BalanceContent 是否会更新，因为我认为绑定不会监听其路径中每个对象的更改。

**编辑**

最后一点可能是我在使用 xaml 开发时遇到的第一个问题。我在 Silverlight 中有一个 DataGrid，其实体类型具有复杂类型的属性。其中一列取决于复杂类型的属性。如果我更改了复杂类型的值，该列会更新得很好（它实现了 INPC）。如果我更改了实体的复杂类型实例，该列将不会... 解决方案是级联 DataContexts：我创建了一个模板列，为复杂类型设置列的绑定，而不是其属性。然后我将模板的 TextBox 的文本绑定到 complextype 的属性，因为它现在是 TextBox 的 DataContext。

在您的情况下，您可以为 TextBox.Text 执行此操作，但不能为 PlayerDetails.BalanceContent 执行此操作。您可以将 TextBox.DataContext 绑定到 UserData 的 SelectedUser，然后将 Text 绑定到 Balance 属性。

```
<TextBox  VerticalAlignment="Center" DataContext="{Binding SelectedUser}" FontFamily="Formata" FontSize="20" Grid.Column="2" 
 Text="{Binding Balance}" 
     Grid.Row="7"></TextBox> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T16:31:29.963

请在更改用户控件内的文本框绑定以绑定到作为用户控件依赖属性的 BalanceContent 后尝试测试（您的原始绑定源似乎是数据上下文属性）

```
Text="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType={x:Type UserControl}}, Path=BalanceContent}" 
```

编辑：请尝试以下代码

```
public User SelectedUser
    {
        get
        {
            return _selectedUser;
        } 
        set
        {
            _selectedUser = value;
            OnPropertyChanged(new PropertyChangedEventArgs("SelectedUser"));
            OnPropertyChanged(new PropertyChangedEventArgs("SelectedUserBalance"));
        }
    }

public string SelectedUserBalance
    {
        get
        {
            return _selectedUser.Balance;
        } 
    }

<Game:PlayerDetails x:Name="SelectedPlayerDetails" Grid.Row="1" Grid.Column="2" Grid.ColumnSpan="2" Grid.RowSpan="4" 
                          BalanceContent="{Binding Source={StaticResource UserData}, Path=SelectedUserBalance, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}">

</Game:PlayerDetails>

<TextBox  VerticalAlignment="Center" FontFamily="Formata" FontSize="20" Grid.Column="2" 
         Text="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType={x:Type UserControl}}, Path=BalanceContent}"
             Grid.Row="7"></TextBox> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T16:23:55.640

文本框正在尝试绑定到 UserControls `DataContext`。给`x:Name`Usercontrol 定义并将 TextBox 的 DataContext 设置为`DataContext="{Binding ElementName=[YourControlName]}"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-29T22:43:48.763

您正在将 StaticResource 绑定到该属性。与 DynamicResources 不同，StaticResources 仅在初始化 Window（或 UserControl）时加载一次。DynamicResources 仅在需要时加载（并且每次都在需要时）。对 DynamicResource 所做的任何更改都会立即获取并相应地更新属性。只需将关键字“StaticResource”替换为“DynamicResource”，每次资源更改时属性绑定都会更新。

注意：如果 StaticResource 是从 Freezable 类派生的对象，它的行为也有点像 DynamicResource。例如，如果您的资源是 Brush，则每次您以任何方式更改 Brush 对象（例如，通过更改其不透明度）时，绑定属性都会更新，但这是由于继承自 Freezable 类的行为所致。但是，如果您将 StaticResource 中的 Brush 对象替换为新的 Brush 对象，则不会执行*此更改，因为已对 Resource 进行了更改，它是 Static，而不是 Brush。*

另请注意：即使是仅作为静态资源可用的资源，例如数据 SystemColors、SystemFonts（提供对系统设置的访问）也可以包装在 DynamicResource 中，以确保在每次更改时更新属性。这可以通过以下方式完成：

`<Control Property="{DynamicResource {x:Static SystemColors.XXX}}"></Control>`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T16:29:36.947

```
<TextBox VerticalAlignment="Center" FontFamily="Formata" FontSize="20" Grid.Column="2" 
       Text="{Binding SelectedItem.BalanceContent, ElementName=lstAccounts}" Grid.Row="7"></TextBox> 
```

忘记绑定 UserControl ，直接绑定 TextBox 到 SelectedItem 。我希望这将有所帮助。

# c++ - c ++如何处理返回NULL或std :: string的方法？

> ID：13477488
> 
> 赞同：1
> 
> 时间：2012-11-20T16:21:06.473
> 
> 标签：c++

我有点卡在一些代码上。我必须使用`getToto()`通常返回 a的方法的返回类型`std::string`，但在一种情况下它会返回`false`（它是我必须使用的库的一部分，我无法修改它）。我知道这相当于一个空指针。但是我找不到合适的方法来捕捉它！

**测试.cpp**

```
static std::string getToto(){
 char buffer[1024];
 if ( CTX_Get_Env(buffer, "Toto", 1024) )
    return false;
 return buffer;
} 
```

如果我尝试

```
const char* returned = Test::getToto().c_str();
if (returned==NULL){
    std::cout<< "null pointer"<<std::endl;
} 
```

运行时出现错误

> 在抛出 'std::logic_error' 的实例后调用终止
> 
> what(): basic_string::_S_construct NULL 无效

抱歉，我的 C++ 水平相当低。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T16:23:23.803

这取决于。是返回逻辑的空字符串部分，还是异常情况。

如果它不应该发生，你应该抛出一个错误。

如果字符串可以为空，则应该只返回一个空字符串：

```
 return std::string(); 
```

它按原样编译的原因是它`false`被解释为`0`，即`NULL`，它可以是 a `char*`，因此尝试从它构造一个字符串。但是，`std::string`从`NULL`指针构造一个是无效的，这就是你得到异常的原因。

这是我的编码方式：

```
static std::string getToto(){
   char buffer[1024];
   if ( CTX_Get_Env(buffer, "Toto", 1024) )
      throw InvalidDataInBufferException();
   return buffer;
} 
```

如果字符串不应该为空，或者

```
static std::string getToto(){
   char buffer[1024];
   if ( CTX_Get_Env(buffer, "Toto", 1024) )
      return std::string();
   return buffer;
} 
```

如果字符串为空是可以的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T16:25:05.687

隐式`std::string(const char*)`构造函数正在初始化`false`，它被解释为空指针。`std::string`标准不允许从空指针构造一个。在您的平台上，这会导致引发异常。如果无法修改函数，可以将函数调用放在 try 块内，但请注意，**这绝不保证在其他平台上也能正常工作**。

```
try {
  std::string returned = Test::getToto().c_str();
  const char* c = returned.c_str();
} catch(...) {
  // handle the error
} 
```

**注意 1**`std::string` ：由于如果 an从空指针初始化，则不需要实现引发异常，因此调用该`getToto()`函数可能会导致未定义的行为。这些`try-catch`块仅在您的实现引发异常时才有帮助，因此不是可移植的解决方案。这也意味着`getToto()`应该避免调用未定义行为的库函数。

**注意2**：异常隐藏了另一个错误，这里：

```
const char* returned = Test::getToto().c_str(); 
```

`Test::getToto()`返回一个您没有分配的临时字符串。你的`returned`指针悬空。在我的代码示例中，我将 return 分配给 an `std::string`，*然后*获取指向其内部 char 数据的指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T19:42:45.687

您应该明白，在 getToto() 真正返回之前，您遇到了异常。没有办法从返回字符串的函数中执行“return false”并且不会出现异常。这只是一个错误。您可以使用 try/catch 块覆盖它，如下所示：

```
const char* returned = NULL;
try{
    returned = Test::getToto().c_str();
}catch(std::exception& e){
    std::cout << "null pointer" << std::endl;
} 
```

但这仍然是一件坏事。

# php - 过滤推进集合

> ID：13477489
> 
> 赞同：1
> 
> 时间：2012-11-20T16:21:08.473
> 
> 标签：php, combobox, propel

我正在尝试通过 Ajax 在国家/地区之间进行链接组合。更改组合事件没问题。但我需要通过 Propel 进行过滤的帮助。

```
// provincia == state ; pais == country :)
// $provincias contains only one "provincia". Because i have only one state in the       country.
$provincias = ProvinciasQuery::create()->filterByIdpais($_GET['pais']);

$data = array();

foreach($provincias as $provincia) {
$data[] = Array('id' => $provincia->getIdprovincia(), 'name' => $provincia->getProvincia())
} 
```

此代码失败并出现下一个错误：

> [2012 年 11 月 20 日 16:10:23 UTC] PHP 致命错误：调用未定义的方法 Criterion::getIdprovincia()

任何想法 ？谢谢 ！。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T19:00:25.873

当您使用查询中的过滤器时，您必须`find()`在最后调用。现在`$provincias`你有`Criteria`对象，而不是查询结果。

```
$provincias = ProvinciasQuery::create()->filterByIdpais($_GET['pais'])->find(); 
```

# php - 提交表单并在同一页面上显示结果而不刷新

> ID：13477491
> 
> 赞同：2
> 
> 时间：2012-11-20T16:21:21.903
> 
> 标签：php, jquery, mysql, ajax, google-visualization

> **可能重复：**
> [如何让用户在表单中提交文本并通过 AJAX 将其输入到数据库并显示在同一页面上？](https://stackoverflow.com/questions/13369940/how-to-have-user-submit-text-in-form-and-ajax-it-to-enter-to-db-and-show-up-on-s)

我想做的事：

**index.html** -> 表单提交到**some.php** -> 处理数据（来自 index.html）并将数据发送到**server.php** -> 将结果返回到 index.html div。

我读过 ajax、jQuery，我在这个网站上看到了数百个问题，但我还想不通。

索引.html：

```
<form action="some.php"  method="post">
    Start date: <br/> <input name="idate" id="firstdate" type="text" /><br />
    End date: <br /> <input name="fdate" id="seconddate" type="text" /><br />
    <br />
    <input type="button" id="searchForm" onclick="SubmitForm();" value="Send" />
</form> 
```

一些.php：

```
<?php
session_start();
$_SESSION['data1'] = $_POST['firstdate'];
$_SESSION['data2'] = $_POST['seconddate'];
?>

 function drawChart() {
    var jsonData = $.ajax({
        url: "server.php",
        dataType: "json",
        async: false
    }).responseText;

    var obj = jQuery.parseJSON(jsonData);
    var data = google.visualization.arrayToDataTable(obj);

(...) 
```

服务器.php：

```
$SQLString = "SELECT    
            count(score) as counts,
            DATE(date),
            SUM(CASE WHEN gender = 1 then 1 ELSE 0 END) Male,
            SUM(CASE WHEN gender = 2 then 1 ELSE 0 END) Female,
            AVG(age) as age, score
            FROM persons  
            WHERE date > '".$_SESSION['date1']."' AND date < '".$_SESSION['date2']."' 
            GROUP BY DATE(date) 
            ORDER BY DATE(date) asc";   

(...) 
$data[0] = array('day','counts','Male','Female','Age','Score');     
(...)
echo json_encode($data); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T16:46:05.893

HTML：

```
<form id="my_form">
    Start date: <br/> <input name="idate" id="firstdate" type="text" /><br />
    End date: <br /> <input name="fdate" id="seconddate" type="text" /><br />
    <input id="submit_form" type="submit" value="Submit">
</form>

<div id="update_div"></div> 
```

jQuery：

```
var submit_button = $('#submit_form');

submit_button.click(function() {

    var start_date = $('firstdate').val();
    var end_date = $('seconddate').val();

    var data = 'start_date=' + start_date + '&end_date=' + end_date;

    var update_div = $('#update_div');

    $.ajax({
        type: 'GET',
        url: 'proccess_form.php',
        data: data,   
        success:function(html){
           update_div.html(html);
        }
    });
}); 
```

过程_form.php：

```
<?php
    $date1 = GET_['start_date'];
    $date2 = GET_['end_date'];

    // PERFORM THE SQL QUERY //
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T16:27:51.073

过程是：

1.  Jquery/Javascript 函数使用 AJAX 将表单提交到 PHP 脚本。
2.  PHP 脚本对数据进行处理（无需调用另一个 PHP！只需一次完成）
3.  PHP 脚本执行`echo`它想要返回到第一个 HTML 页面的信息。
4.  第一个 HTML 页面在 AJAX 的回调函数中接收来自 PHP 的数据。

# jquery - 我在哪里可以找到 jQuery 手风琴式菜单（或让这个菜单工作）？

> ID：13477493
> 
> 赞同：0
> 
> 时间：2012-11-20T16:21:42.750
> 
> 标签：jquery, jquery-ui, menu, web

我想在我的网站上实现一个手风琴风格的菜单。有一些要求：

*   它必须支持多个深度级别（至少 3 个）。
*   它必须像手风琴一样工作。
*   它必须提供有关用户所在位置的内容。

此外，如果它支持 ThemeRoller，我会很高兴。

我环顾四周，发现了一些与我正在寻找的菜单非常相似的菜单：

*   [http://www.designchemical.com/lab/jquery-vertical-accordion-menu-plugin/examples/](http://www.designchemical.com/lab/jquery-vertical-accordion-menu-plugin/examples/)，但是，在选择一个项目后，它仍会在父菜单中显示所有其他项目。此外，没有 ThemeRoller 支持。
*   [http://www.filamentgroup.com/lab/jquery_ipod_style_and_flyout_menus/](http://www.filamentgroup.com/lab/jquery_ipod_style_and_flyout_menus/)，将历史记录存储为面包屑而不是菜单项。
*   [http://www.designchemical.com/lab/jquery-drill-down-menu-plugin/getting-started/](http://www.designchemical.com/lab/jquery-drill-down-menu-plugin/getting-started/)，不支持 jQuery 1.8.2 并在有子项后显示整个父容器的菜单项扩大。此外，没有 ThemeRoller 支持。

我真正要寻找的几乎正是 MSDN 库中的内容。MSDN 菜单是手风琴式的，它隐藏了不在当前关卡/容器中的所有内容。它还将父项保留为“菜单项”而不是面包屑。

如果有人对这样的菜单有建议，我很乐意得到。否则，我想让 DesignChemical Drill-Down 菜单与 jQuery 1.8.2 一起使用。我得到的错误相当模糊（来自菜单附带的演示页面）：

```
Syntax error, unrecognized expression: [object Object][rel="7"] 
```

错误来自 jQuery 库本身，第 4679 行。

有什么想法可以解决这个问题吗？

我发现问题只存在于 jQuery v1.8.0 及更高版本，它仍然适用于 v1.7.2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T10:38:19.270

我知道这是一个旧线程，但考虑到 cjbarth 指出的内容，我已经对代码做了几个 tweeks，它现在可以与最新的 jquery 1.9.0 库一起使用。

希望这可以帮助某人:)。

**jquery.dcdrilldown.1.2.1 源码**

```
 /*

     * DC jQuery Drill Down Menu - jQuery drill down ipod menu
     * Copyright (c) 2011 Design Chemical
     * 
     * Patched for jQuery version 1.9.0
     * By Tay - StackOverflow
     * Dual licensed under the MIT and GPL licenses:
     *  http://www.opensource.org/licenses/mit-license.php
     *  http://www.gnu.org/licenses/gpl.html
     *
     */

    (function($){

    //define the new for the plugin ans how to call it
    $.fn.dcDrilldown = function(options) {

    //set default options
    var defaults = {
        classWrapper    : 'dd-wrapper',
        classMenu       : 'dd-menu',
        classParent     : 'dd-parent',
        classParentLink : 'dd-parent-a',
        classActive     : 'active',
        classHeader     : 'dd-header',
        eventType       : 'click',
        hoverDelay      : 300,
        speed           : 'slow',
        saveState       : true,
        showCount       : true,
        classCount      : 'dd-count',
        classIcon       : 'dd-icon',
        linkType        : 'backlink',
        resetText       : 'All',
        headerTag       : 'h3',
        defaultText     : 'Select Option',
        includeHdr      : true
    };

    //call in the default options
    var options = $.extend(defaults, options);

    //act upon the element that is passed into the design
    return this.each(function(options){

        var $dcDrilldownObj = this;
        $($dcDrilldownObj).addClass(defaults.classMenu);
        var $wrapper = '<div class="'+defaults.classWrapper+'" />';
        $($dcDrilldownObj).wrap($wrapper);
        var $dcWrapper = $($dcDrilldownObj).parent();
        var objIndex = $($dcWrapper).index('.'+defaults.classWrapper);
        var idHeader = defaults.classHeader+'-'+objIndex;
        var idWrapper = defaults.classWrapper+'-'+objIndex;
        $($dcWrapper).attr('id',idWrapper);
        var $header = '<div id="'+idHeader+'" class="'+defaults.classHeader+'"></div>';

        setUpDrilldown();

        if(defaults.saveState == true){
            var cookieId = defaults.classWrapper+'-'+objIndex;
            checkCookie(cookieId, $dcDrilldownObj);
        }

        resetDrilldown($dcDrilldownObj, $dcWrapper);

        $('li a',$dcDrilldownObj).click(function(e){

            $link = this;
            $activeLi = $(this).parent('li').stop();
            $siblingsLi = $($activeLi).siblings();

            // Drilldown action
            if($('> ul',$activeLi).length){
                if($($link).hasClass(defaults.classActive)){
                    $('ul a',$activeLi).removeClass(defaults.classActive);
                    resetDrilldown($dcDrilldownObj, $dcWrapper);
                } else {
                    actionDrillDown($activeLi, $dcWrapper, $dcDrilldownObj);
                }
            }

            // Prevent browsing to link if has child links
            if($(this).next('ul').length > 0){
                e.preventDefault();
            }
        });

        // Set up accordion
        function setUpDrilldown(){

            $arrow = '<span class="'+defaults.classIcon+'"></span>';
            $($dcDrilldownObj).before($header);

            // Get width of menu container & height of list item
            var totalWidth = $($dcDrilldownObj).outerWidth();
            totalWidth += 'px';
            var itemHeight = $('li',$dcDrilldownObj).outerHeight(true);

            // Get height of largest sub menu
            var objUl = $('ul',$dcDrilldownObj);
            var maxItems = findMaxHeight(objUl);

            // Get level of largest sub menu
            var maxUl = objUl.parent().find('[rel=' + maxItems + ']');
            var getIndex = findMaxIndex(maxUl);

            // Set menu container height
            if(defaults.linkType == 'link'){
                menuHeight = itemHeight * (maxItems + getIndex);
            } else {
                menuHeight = itemHeight * maxItems;
            }
            $($dcDrilldownObj).css({height: menuHeight+'px', width: totalWidth});

            // Set sub menu width and offset
            $('li',$dcDrilldownObj).each(function(){
                $(this).css({width: totalWidth});
                $('ul',this).css({width: totalWidth, marginRight: '-'+totalWidth, marginTop: '0'});
                if($('> ul',this).length){
                    $(this).addClass(defaults.classParent);
                    $('> a',this).addClass(defaults.classParentLink).append($arrow);
                    if(defaults.showCount == true){
                        var parentLink = $('a:not(.'+defaults.classParentLink+')',this);
                        var countParent = parseInt($(parentLink).length);
                        getCount = countParent;
                        $('> a',this).append(' <span class="'+defaults.classCount+'">('+getCount+')</span>');
                    }
                }
            });

            // Add css class
            $('ul',$dcWrapper).each(function(){
                $('li:last',this).addClass('last');
            });
            $('> ul > li:last',$dcWrapper).addClass('last');
            if(defaults.linkType == 'link'){
                $(objUl).css('top',itemHeight+'px');
            }
        }

        // Breadcrumbs
        $('#'+idHeader).on('click', 'a', function(e){
            if($(this).hasClass('link-back')){
                linkIndex = $('#'+idWrapper+' .'+defaults.classParentLink+'.active').length;
                linkIndex = linkIndex-2;
                $('a.'+defaults.classActive+':last', $dcDrilldownObj).removeClass(defaults.classActive);
            } else {
                // Get link index
                var linkIndex = parseInt($(this).index('#'+idHeader+' a'));
                if(linkIndex == 0){
                    $('a',$dcDrilldownObj).removeClass(defaults.classActive);
                } else {
                    // Select equivalent active link
                    linkIndex = linkIndex-1;
                    $('a.'+defaults.classActive+':gt('+linkIndex+')',$dcDrilldownObj).removeClass(defaults.classActive);
                }
            }
            resetDrilldown($dcDrilldownObj, $dcWrapper);
            e.preventDefault();
        });
    });

    function findMaxHeight(element){
        var maxIndex = undefined;
        $(element).each(function(){
            var val = parseInt($('> li',this).length);
            $(this).attr('rel',val);
            if (maxIndex === undefined || maxIndex < val){
                maxIndex = val;
            }
        });
        if ($(element).find('li').length > maxIndex) {
        //the longest 'submenu' could be the root menu
            return 1
        } else {
            return maxIndex;
        }
    }

    function findMaxIndex(element){
        var maxIndex = undefined;
        $(element).each(function(){
            var val = parseInt($(this).parents('li').length);
            if (maxIndex === undefined || maxIndex < val) {
                maxIndex = val;
            }
        });
        return maxIndex;
    }

    // Retrieve cookie value and set active items
    function checkCookie(cookieId, obj){
        var cookieVal = $.cookie(cookieId);
        if(cookieVal != null){
            // create array from cookie string
            var activeArray = cookieVal.split(',');
            $.each(activeArray, function(index,value){
                var $cookieLi = $('li:eq('+value+')',obj);
                $('> a',$cookieLi).addClass(defaults.classActive);
            });
        }
    }

    // Drill Down
    function actionDrillDown(element, wrapper, obj){
        // Declare header
        var $header = $('.'+defaults.classHeader, wrapper);

        // Get new breadcrumb and header text
        var getNewBreadcrumb = $('h3',$header).html();
        var getNewHeaderText = $('> a',element).html();

        // Add new breadcrumb
        if(defaults.linkType == 'breadcrumb'){
            if(!$('ul',$header).length){
                $($header).prepend('<ul></ul>');
            }
            if(getNewBreadcrumb == defaults.defaultText){
                $('ul',$header).append('<li><a href="#" class="first">'+defaults.resetText+'</a></li>');
            } else {
                $('ul',$header).append('<li><a href="#">'+getNewBreadcrumb+'</a></li>');
            }
        }
        if(defaults.linkType == 'backlink'){
            if(!$('a',$header).length){
                $($header).prepend('<a href="#" class="link-back">'+getNewBreadcrumb+'</a>');
            } else {
                $('.link-back',$header).html(getNewBreadcrumb);
            }
        }
        if(defaults.linkType == 'link'){
            if(!$('a',$header).length){
                $($header).prepend('<ul><li><a href="#" class="first">'+defaults.resetText+'</a></li></ul>');
            }
        }
        // Update header text
        updateHeader($header, getNewHeaderText);

        // declare child link
        var activeLink = $('> a',element);

        // add active class to link
        $(activeLink).addClass(defaults.classActive);
        $('> ul li',element).show();
        $('> ul',element).animate({"margin-right": 0}, defaults.speed);

        // Find all sibling items & hide
        var $siblingsLi = $(element).siblings();
        $($siblingsLi).hide();

        // If using breadcrumbs hide this element
        if(defaults.linkType != 'link'){
            $(activeLink).hide();
        }

        // Write cookie if save state is on
        if(defaults.saveState == true){
            var cookieId = $(wrapper).attr('id');
            createCookie(cookieId, obj);
        }
    }

    // Drill Up
    function actionDrillUp(element, obj, wrapper){
        // Declare header
        var $header = $('.'+defaults.classHeader, wrapper);

        var activeLink = $('> a',element);
        var checklength = $('.'+defaults.classActive, wrapper).length;
        var activeIndex = $(activeLink).index('.'+defaults.classActive, wrapper);

        // Get width of menu for animating right
        var totalWidth = $(obj).outerWidth(true);
        $('ul',element).css('margin-right',-totalWidth+'px');

        // Show all elements
        $(activeLink).addClass(defaults.classActive);
        $('> ul li',element).show();
        $('a',element).show();

        // Get new header text from clicked link
        var getNewHeaderText = $('> a',element).html();
        $('h3',$header).html(getNewHeaderText);

        if(defaults.linkType == 'breadcrumb'){
            var breadcrumbIndex = activeIndex-1;
            $('a:gt('+activeIndex+')',$header).remove();
        }
    }

    function updateHeader(obj, html){
        if(defaults.includeHdr == true){
            if($('h3',obj).length){
                $('h3',obj).html(html);
            } else {
                $(obj).append('<'+defaults.headerTag+'>'+html+'</'+defaults.headerTag+'>');
            }
        }
    }

    // Reset accordion using active links
    function resetDrilldown(obj, wrapper){
        var $header = $('.'+defaults.classHeader, wrapper);
        $('ul',$header).remove();
        $('a',$header).remove();
        $('li',obj).show();
        $('a',obj).show();
        var totalWidth = $(obj).outerWidth(true);
        if(defaults.linkType == "link"){
            if($('a.'+defaults.classActive+':last',obj).parent('li').length){
                var lastActive = $('a.'+defaults.classActive+':last',obj).parent('li');
                $('ul',lastActive).css('margin-right',-totalWidth+'px');
            }else {
            $('ul',obj).css('margin-right',-totalWidth+'px');
            }
        } else {
            $('ul',obj).css('margin-right',-totalWidth+'px');
        }
        updateHeader($header, defaults.defaultText);

        // Write cookie if save state is on
        if(defaults.saveState == true){
            var cookieId = $(wrapper).attr('id');
            createCookie(cookieId, obj);
        }

        $('a.'+defaults.classActive,obj).each(function(i){
            var $activeLi = $(this).parent('li').stop();
            actionDrillDown($activeLi, wrapper, obj);
        });
    }

    // Write cookie
    function createCookie(cookieId, obj){
        var activeIndex = [];
        // Create array of active items index value
        $('a.'+defaults.classActive,obj).each(function(i){
            var $arrayItem = $(this).parent('li');
            var itemIndex = $('li',obj).index($arrayItem);
                activeIndex.push(itemIndex);
            });
        // Store in cookie
        $.cookie(cookieId, activeIndex, { path: '/' });
    }
};
})(jQuery); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T18:47:16.400

jquery.dcdrilldown.1.2.js 文件（以及最小版本）中有一个错误。简单地转到第 103 行并替换

```
var maxUl = $(objUl+'[rel="'+maxItems+'"]'); 
```

和

```
var maxUl = objUl.find('[rel='+maxItems+']'); 
```

并且该菜单现在可以与 jQuery v1.8.0 及更高版本一起使用。

更新：

我做了更多的测试，发现如果根菜单是项目数量最多的那个，即使上面的修复也无济于事；仍然需要进行一些其他更改。

首先，上面的行需要是：

```
var maxUl = objUl.parent().find('[rel=' + maxItems + ']'); 
```

二、关于184行的线路

```
return maxIndex; 
```

需要用以下代码替换：

```
if ($(element).find('li').length > maxIndex) {
//the longest 'submenu' could be the root menu
    return 1
} else {
    return maxIndex;
} 
```

# c# - 数组按两个参数排序

> ID：13477498
> 
> 赞同：4
> 
> 时间：2012-11-20T16:22:12.190
> 
> 标签：c#, arrays

我对array.sort 有点困难。我有一个类，这个类有两个字段，一个是随机字符串，另一个是随机数。如果我想用一个参数对其进行排序，它就可以正常工作。但我想用两个参数对其进行排序。第一个是数字的总和（从低到高），然后如果这些数字与给它们的随机字符串相等（从低到高）。

您能否提供一些提示和提示，我如何“合并”这两种排序？

```
Array.Sort(Phonebook, delegate(PBook user1, PBook user2)
        { return user1.Sum().CompareTo(user2.Sum()); });
        Console.WriteLine("ORDER");

        foreach (PBook user in Phonebook)
        {
            Console.WriteLine(user.name);
        } 
```

这就是我用一个参数订购它的方式。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-20T16:28:34.073

我认为这就是你所追求的：

```
sourcearray.OrderBy(a=> a.sum).ThenBy(a => a.random) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T16:35:39.720

这是您将用于比较方法中的多个字段的通用算法`CompareTo`：

```
public int compare(MyClass first, MyClass second)
{
    int firstComparison = first.FirstValue.CompareTo(second.SecondValue);

    if (firstComparison != 0)
    {
        return firstComparison;
    }
    else
    {
        return first.SecondValue.CompareTo(second.SecondValue);
    }
} 
```

但是，LINQ 确实使执行此操作的语法更容易，只允许您编写：

```
Phonebook = Phonebook.OrderBy(book=> book.Sum())
            .ThenBy(book => book.OtherProperty)
            .ToArray(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T16:36:48.923

您可以使用自定义就地执行此操作`IComparer<PBook>`。以下应根据您的原始代码对您的数组进行排序，但如果两个总和相等，则应退回到随机字符串（我称之为`RandomString`）：

```
public class PBookComparer : IComparer<PBook>
{
    public int Compare(PBook x, PBook y)
    {
        // Sort null items to the top; you can drop this
        // if you don't care about null items.
        if (x == null)
            return y == null ? 0 : -1;
        else if (y == null)
            return 1;

        // Comparison of sums.
        var sumCompare = x.Sum().CompareTo(y.Sum());
        if (sumCompare != 0)
            return sumCompare;

        // Sums are the same; return comparison of strings 
        return String.Compare(x.RandomString, y.RandomString);
    }
} 
```

你称之为

```
Array.Sort(Phonebook, new PBookComparer()); 
```

您*可以*直接内联执行此操作，但有点难以理解：

```
Array.Sort(Phonebook, (x, y) => { 
    int sc = x.Sum().CompareTo(y.Sum());
    return sc != 0 ? sc : string.Compare(x.RandomString, y.RandomString); }); 
```

...实际上，这还不错，虽然我*已经*放弃了`null`支票。

# java - 二叉树中的最低共同祖先

> ID：13477501
> 
> 赞同：5
> 
> 时间：2012-11-20T16:22:20.933
> 
> 标签：java, binary-tree

以下是我对二叉搜索树的最低共同祖先的实现。我有两个问题：

1) 时间复杂度为 O(n)，空间复杂度为 O(n) 更坏的情况，但如果 BST 平衡，则时间和空间的平均情况为 O(logn)。那是对的吗？2）我如何将我的解决方案扩展到二叉树而不仅仅是二叉搜索树。

希望早日收到你的消息。

```
//The function findOrQueue is to enqueue all elements upto target node to a queue
public void findOrQueue(Node target, Node top, LLQueue q) {
    int cmp = target.getData().compareTo(top.getData()); 
    if(cmp == 0) {
        q.enqueue(top);
        return ;
    }
    else if (cmp < 0) {
        q.enqueue(top);
        findOrQueue(target, top.getLeftChild(),q);
    }
    else {
        q.enqueue(top);
        findOrQueue(target, top.getRightChild(),q);
   }
}

public Node LCA(Node n1, Node n2) throws QueueEmptyException {
    LLQueue q1 = new LLQueue();
    LLQueue q2 = new LLQueue();
    findOrQueue(n1,getRoot(),q1);
    findOrQueue(n2,getRoot(),q2);
    Node t = null;
    while (!q1.isEmpty() && !q2.isEmpty()) {
        Node t1 = (Node)q1.dequeue();
        Node t2 = (Node)q2.dequeue();
        if(t1.getData() != t2.getData()) {
            return t;
        }
        else t = t1;
    }
    if(q1.isEmpty() && q2.isEmpty()) 
        return null;
    else
        return t;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T07:15:53.520

将解决方案扩展到一般二叉树的关键似乎在于找到连接根节点和目标节点的路径。一旦获得此路径，您就可以轻松地修改您的 LCA 函数以找到最低的共同祖先。

下面的粗略实现使用`LinkedBlockingQueue`包*java.util.concurrent* .* 和*java.util* .*中的*Stack* - 但是，任何其他普通队列和堆栈也可以解决问题。该代码假定目标节点存在于树中。

 *```
public static void findPath2(Node target,Node top, Stack<Node> path){
    LinkedBlockingQueue<Node> q1 = new LinkedBlockingQueue<Node>(), q2 = new LinkedBlockingQueue<Node>(),
    q3 = new LinkedBlockingQueue<Node>();
    Node n = top;
    Node parrent = null;
    while(n.getData().compareTo(target.getData())!= 0){
        parrent = n;
        if(n.right != null){
            q2.add(n.right);
            q3.add(parrent);
        }
        if(n.left != null){
            q2.add(n.left); 
            q3.add(parrent);
        }
        n = q2.remove();
        q1.add(n);
    }

    Stack<Node> s3 = new Stack<Node>(), s2 = new Stack<Node>();
    while(!q3.isEmpty()){
        s3.push(q3.remove());           
    }       
    for(int i = 1; i <= q2.size(); i++)
        s3.pop();       
    while(!s3.isEmpty())
        s2.push(s3.pop());
    while(!q1.isEmpty())
        s3.push(q1.remove());
    LinkedBlockingQueue<Node> temp = new LinkedBlockingQueue<Node>();
    while(!s2.isEmpty())
        temp.add(s2.pop());
    while(!temp.isEmpty())
        s2.push(temp.remove());
    path.push(s3.pop());
    path.push(s2.pop());
    while(!s3.isEmpty()){
        n = s3.peek();          
        while(n.getData().compareTo(path.peek().getData()) != 0 && !s3.isEmpty()){
            s3.pop();
            s2.pop();
            if(!s3.isEmpty())
                n = s3.peek();
        }
        if(!s3.isEmpty()){
            s3.pop();
            path.push(s2.pop());
        }
    }       
} 
```*

# svn - svnAnt 任务 ubuntu 失败，找不到 javahl、svnkit 和命令行 svn 客户端

> ID：13477506
> 
> 赞同：0
> 
> 时间：2012-11-20T16:22:32.543
> 
> 标签：svn, ubuntu, ant, svnant

这些问题有相同的问题，但没有为我提供解决方案

[尽管我有命令行 svn，但找不到 javahl、svnkit 和命令行 svn 客户端](https://stackoverflow.com/questions/12070534/cannot-find-javahl-svnkit-nor-command-line-svn-client-although-i-have-command-l)

[找不到 javahl、svnkit 和命令行 svn 客户端](https://stackoverflow.com/questions/6457457/cannot-find-javahl-svnkit-nor-command-line-svn-client)

我在用

Ubuntu 12.10

蚂蚁 1.8.2

svnAnt 1.3.1

svn 1.6 版

我使用 apt-get install 下载

svn客户端

libsvn-java

我已经设定

JAVA_HOME

ANT_HOME

我将 ANT_HOME/bin 添加到路径中我还将 /usr/lib/x86_64-linux-gnu/jni/ 添加到路径中，这似乎不是这些库使用/通常所在的位置。

如果我从命令行运行 ant，它会失败：

```
$ ant compile 
Buildfile: /home/build.xml

init:

export:
  [svn] Missing 'javahl' dependencies on the classpath !

BUILD FAILED
/home/build.xml:28: Cannot find javahl, svnkit nor command line svn client

Total time: 0 seconds 
```

如果我`javahl="false" svnkit="true"`向 svn 标签添加属性，它会失败

```
$ ant compile
Buildfile: /home/build.xml

init:

export:
  [svn] Deprecated attribute 'javahl'. This attribute will disappear with SVNANT 1.3.2\. Use svnSetting instead.
  [svn] Deprecated attribute 'svnkit'. This attribute will disappear with SVNANT 1.3.2\. Use svnSetting instead.
  [svn] svn: authentication cancelled
  [svn] svn: authentication cancelled
  [svn] <Export> failed.

BUILD FAILED
/home/build.xml:28:     Can't export

Total time: 0 seconds 
```

如果我在任务中添加用户名和密码，它会失败（我通常使用 svn+ssh 和公钥认证）：

```
$ ant compile
Buildfile: /home/build.xml
username:>
password:>

init:

export:
  [svn] Deprecated attribute 'javahl'. This attribute will disappear with SVNANT 1.3.2\. Use svnSetting instead.
  [svn] Deprecated attribute 'svnkit'. This attribute will disappear with SVNANT 1.3.2\. Use svnSetting instead.
  [svn] Deprecated attribute 'username'. This attribute will disappear with SVNANT 1.3.2\. Use svnSetting instead.
  [svn] Deprecated attribute 'password'. This attribute will disappear with SVNANT 1.3.2\. Use svnSetting instead.

BUILD FAILED
/home/build.xml:34: java.lang.NoClassDefFoundError: com/trilead/ssh2/ServerHostKeyVerifier
at org.tmatesoft.svn.core.internal.io.svn.SVNSSHConnector.open(SVNSSHConnector.java:89)
at org.tmatesoft.svn.core.internal.io.svn.SVNConnection.open(SVNConnection.java:74)
at org.tmatesoft.svn.core.internal.io.svn.SVNRepositoryImpl.openConnection(SVNRepositoryImpl.java:1242)
at org.tmatesoft.svn.core.internal.io.svn.SVNRepositoryImpl.getLatestRevision(SVNRepositoryImpl.java:168)
at org.tmatesoft.svn.core.wc.SVNBasicClient.getRevisionNumber(SVNBasicClient.java:482)
at org.tmatesoft.svn.core.wc.SVNBasicClient.getLocations(SVNBasicClient.java:876)
at org.tmatesoft.svn.core.wc.SVNBasicClient.createRepository(SVNBasicClient.java:534)
at org.tmatesoft.svn.core.wc.SVNUpdateClient.doExport(SVNUpdateClient.java:1038)
at org.tmatesoft.svn.core.javahl.SVNClientImpl.doExport(SVNClientImpl.java:898)
at org.tmatesoft.svn.core.javahl.SVNClientImpl.doExport(SVNClientImpl.java:889)
at org.tmatesoft.svn.core.javahl.SVNClientImpl.doExport(SVNClientImpl.java:885)
at org.tigris.subversion.svnclientadapter.javahl.AbstractJhlClientAdapter.doExport(AbstractJhlClientAdapter.java:897)
at org.tigris.subversion.svnant.commands.Export.execute(Unknown Source)
at org.tigris.subversion.svnant.commands.SvnCommand.executeCommand(Unknown Source)
at org.tigris.subversion.svnant.SvnTask.executeImpl(Unknown Source)
at org.tigris.subversion.svnant.SvnTask.execute(Unknown Source)
at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
at org.apache.tools.ant.Task.perform(Task.java:348)
at org.apache.tools.ant.Target.execute(Target.java:390)
at org.apache.tools.ant.Target.performTasks(Target.java:411)
at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
at org.apache.tools.ant.Main.runBuild(Main.java:809)
at org.apache.tools.ant.Main.startAnt(Main.java:217)
at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)
Caused by: java.lang.ClassNotFoundException: com.trilead.ssh2.ServerHostKeyVerifier
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
... 33 more

Total time: 18 seconds 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T22:05:36.473

您确实安装了*命令行客户端*( `svnclient`)，但没有告诉*Ant*使用它：

```
javahl="false" svnkit="false" 
```

**两者都**需要设置为 false 才能使用命令行客户端。从[参考](http://subclipse.tigris.org/svnant/svntask.html)：

```
javahl  Set to "false" to use command line client interface instead of JNI JavaHL binding.
        Deprecated. This attribute won't work with SVNANT 1.3.2+ . Use refid for svnSetting instead.
        Default: true

svnkit  Set to "false" to use command line client interface instead of SVNKit binding.
        Deprecated. This attribute won't work with SVNANT 1.3.2+ . Use refid for svnSetting instead.
        Default: false 
```

# macos - RQuantlib 和 Mac OS X 10.8.2

> ID：13477507
> 
> 赞同：1
> 
> 时间：2012-11-20T16:22:35.637
> 
> 标签：macos, r, rcpp, quantlib

我是 Mac OS X、R 和 C++ 的新手。听起来像一个很好的组合，不是吗？

我需要使用 RQuantLib，因为我想在 R 中使用 QuantLib 包的一些定价功能，所有这些都在 Mac OS X 驱动的环境中。

我已经正确安装了 QuantLib。我已经询问了官方的 QuantLib 邮件列表，我们似乎已经得出结论，我遇到的问题与我的 QuantLib 安装无关，这似乎没问题并且配置正确。

所以，我转向 R 来尝试解决这个问题。每当我尝试从 R 中运行 ZeroCouponBond，复制并粘贴官方文档提供的第一个示例时，我都会收到以下错误：

```
"Error in DiscountCurve.default(discountCurve.param, list(flat = 0.05)) : 
cannot find function errorOccured" 
```

现在，我将排除任何与语法相关的问题，因为我正在复制官方帮助中的相同示例。

我不知道我做错了什么，但我知道我需要不惜一切代价找到解决方案。我已经安装了Rcpp，配置看起来还不错。只有一个问题我无法找到答案：在我的理解中，RQuantLib 基本上充当了 QuantLib 和 R 之间的链接。如果这是正确的，我如何告诉 RQuantLib 在哪里可以找到 libQuantLib.a，即安装 QuantLib 本身时执行的“make && sudo make install”命令产生的编译库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T00:39:20.623

是的，所以，我终于设法让它工作了。

首先，我想说，如果提供了一个彻底的、逐步的安装过程，事情会容易得多。我承认我是一个完全的新手，但我认为第一次接触 R 的其他人可能会遇到与我必须克服的类似的困难。

无论如何，这就是我所做的：

*   我已经从 cran.r-project.org下载了[Rcpp](http://cran.r-project.org/web/packages/Rcpp/index.html)和[RQuantLib的 .tar.gz](http://cran.r-project.org/web/packages/RQuantLib/index.html)*源*包
*   我已经编译它们从 R 环境中安装它们。这是我犯错误的地方。事实上，我试图通过`configure`从终端调用安装脚本来编译它们；但是，正如 Dirk 所说，该`config`脚本会查找 QuantLib 的`quantlib-config`脚本，而我不知道正确的语法来告诉`configure`脚本到 QuantLib 的正确路径。从 R 执行该过程（仅通过安装包）可以解决任何问题，因为所有依赖项都已正确定位和加载

所以，差不多就是这样：只需像使用二进制版本一样安装 .tar.gz*源*包，一切都应该可以正常工作。

当然，我还是很想了解：

*   如果可以从终端编译 Rcpp 和 RQuantLib；和
*   为什么Mac OS X的二进制版本不能在我的系统上运行，即：为什么我必须从源代码开始编译？

非常感谢任何愿意回答我（可能是幼稚和愚蠢的）问题的人。我渴望了解更多！

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T16:28:20.627

RQuantLib 包使用一个名为的工具，该工具`configure`在包构建时确定补丁。它会查找`quantlib-config`从中了解`libQuantLib.a`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-03T17:08:30.227

[首先，按照http://quantlib.org/install/macosx.shtml](http://quantlib.org/install/macosx.shtml)上的说明安装 boost ( `brew install boost`)，其次是 Quantlib（当前为 1.7.1）：

```
cd QuantLib-1.x.y
./configure --enable-static --with-boost-include=/opt/local/include/ \
            --with-boost-lib=/opt/local/lib/ --prefix=/opt/local/
make && sudo make install 
```

需要一些时间（约 1 小时）`make`。

然后在`R`or中`Rstudio`，安装包`Rcpp`和`RQuantlib`. 后者需要`type="source"`，因为只有源包可用。

此时，您应该可以使用`RQuantlib`. 美式期权价值（SPY 截至 2016 年 4 月 1 日，到期日为 2016 年 7 月 15 日）可以计算`R`为

```
AmericanOption("put", strike=206, volatility=0.1525, underlying = 206.92, 0.021, 0.003, 73/252, engine="CrankNicolson") 
```

# c - 如何同时在资源管理器中打开多个文件？

> ID：13477508
> 
> 赞同：0
> 
> 时间：2012-11-20T16:22:41.040
> 
> 标签：c, winapi

描述我的问题有点棘手，但我会尽力而为。

首先，我正在使用 C 和 WinAPI 开发一个多文档界面应用程序。我的程序能够解析命令行参数以打开多个文件。我把这个字符串： *“X:\MyAppName.exe”“%1”* 放在 txt 文件的打开命令列表下，这样现在我可以右键单击 Windows 资源管理器中的任何 .txt 文件并使用我的应用程序打开它。但是，当我选择多个文件时，资源管理器会多次运行命令*“X:\MyAppName.exe”“%1”*，以便启动我的应用程序的多个实例。

可是等等！ **这还不是最棘手的部分。相反，我的应用程序将打开单个文件和一次打开多个文件视为具有不同视觉样式的两个不同事物。**我知道一次保持一个实例运行的想法（尽管我不知道实现它的 C 代码）。但是我不知道如何区分一个一个打开多个文件和同时打开多个文件。

我希望我说清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T00:08:59.790

像现在这样使用注册表，您将无法直接区分多个文件和单个文件。正如您已经注意到的，每个请求的文件都会启动您的应用程序的新副本。如果您实现单实例化（这并不难），您可以做的是检测何时请求第一个文件并启动一个短计时器，然后让每个后续文件重置该计时器。当它最终过去时，检查您收集了多少文件并根据需要对它们采取行动。

一个更好的首选解决方案是在您的应用程序中创建一个进程外 COM 对象来实现该`IDropTarget`接口。然后，Windows 将能够通过单个入口点将文件信息汇集到您的应用程序中。您的应用不必关心信息的来源。您一次不仅可以支持多个文件，还可以支持不同格式的文件信息（Windows 可以只向您传递文件名，或者它可以向您传递实际的文件数据本身）。

Windows 将构造一个`IDataObject`对象来保存所需的任何文件信息，然后将其传递给您的`IDropTarget`对象。如果您的应用程序已经在运行，COM 将能够访问您现有的`IDropTarget`对象。如果您的应用程序尚未运行，COM 将在访问其`IDropTarget`对象之前自动启动您的应用程序。无论哪种方式，一旦它运行，您`IDropTarget`可以查看传递给它的任何数据并决定是接受还是拒绝它。

如果您将 COM 对象注册`CLSID`为`DropTarget`所需的文件扩展名，用户将能够双击此类文件，或选择此类文件并按 Enter，它们将被传递给您的`IDropTarget`对象。

If you register an `AppPath` for your app and then register the `CLSID` as a `DropTarget` for it, users will be able to drag files, regardless of extension, onto your app's exe file itself, and they will be passed to your `IDropTarget` object.

If you use the same COM object with the `RegisterDragDrop()` function, users will be able to drag files, regardless of extension, onto your app's UI directly, and they will be passed to your `IDropTarget` object.

# wpf - 如何在鼠标位置打开具有 Windows 窗体父级的 WPF 窗口？

> ID：13477509
> 
> 赞同：1
> 
> 时间：2012-11-20T16:22:42.567
> 
> 标签：wpf, window, mouse

我有一个 Windows 窗体窗口应用程序。在应用程序内部，我们要打开一个 WPF 窗口，该窗口位于相对于鼠标位置的位置。假设窗口中心可以显示在鼠标坐标处，或者另一种情况，可以将窗口的左上角设置为鼠标坐标。

我看过像[http://www.formatexception.com/2008/09/wpf-and-mouseposition/](http://www.formatexception.com/2008/09/wpf-and-mouseposition/)这样的帖子 ，但这对我没有帮助，因为我的窗口之前没有打开 WPF 控件。我只有 windows 窗体，所以下面的行在我的情况下不可用

```
Point mousePoint = Mouse.GetPosition(this); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T18:48:40.830

因为你有一个可用的 winforms 控件，你可以使用`Control.MousePosition`

[http://msdn.microsoft.com/en-us/library/system.windows.forms.control.mouseposition.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.mouseposition.aspx)

* * *

您是否从 winforms 表单显示 wpf 窗口？我写了一个快速测试，它有一个带按钮的表单。单击按钮时，它会在光标位置打开一个 wpf 窗口。这很好用，在单击按钮之前我没有创建或显示任何 WPF 控件。

我尝试了设置和不设置`WindowStartupLocation`，它们都有效，但您可能值得尝试添加它。这是一个例子：

```
private void button1_Click(object sender, EventArgs e)
{
  Window w = new Window();
  w.WindowStartupLocation = WindowStartupLocation.Manual;
  w.Left = Control.MousePosition.X;
  w.Top = Control.MousePosition.Y;
  w.Show();
} 
```

但是，如果上面的代码示例对您不起作用，那么也许您可以进一步描述您的场景并包含一些代码示例？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-01T19:23:38.467

基于 Bill Tarbell 的回答，您可能需要考虑 DPI 缩放：

```
 private Point GetScalingFactor(Window window)
    {
        var zeroPoint = window.PointToScreen(new Point(0, 0));
        var hundredPoint = window.PointToScreen(new Point(100, 100));
        return new Point( 
                    100.0 / (hundredPoint.X - zeroPoint.X), 
                    100.0 / (hundredPoint.Y - zeroPoint.Y));
    }

    private void ShowAtCursor(Window parent, Window toShow)
    {
        var point = parent.PointToScreen(System.Windows.Input.Mouse.GetPosition(parent));
        var scaling = GetScalingFactor(parent);

        toShow.Left = point.X * scaling.X;
        toShow.Top = point.Y * scaling.Y;
        toShow.WindowStartupLocation = WindowStartupLocation.Manual;
        toShow.Show();
    } 
```

# facebook - 无论选择哪个国家/语言管理员，如何获取公共 Facebook 页面数据？

> ID：13477510
> 
> 赞同：0
> 
> 时间：2012-11-20T16:22:42.917
> 
> 标签：facebook, facebook-graph-api

您可能知道，Facebook 页面管理员可以选择仅对某些国家/地区/语言 ( [https://www.facebook.com/note.php?note_id=180817924821](https://www.facebook.com/note.php?note_id=180817924821) ) 可见的帖子。

但是，我想使用 Graph API 来检索所有国家/语言的提要消息 ( /feed )，或者能够选择特定国家/地区的数据。

例如：

1) 我想从所有星巴克 Facebook 页面获取所有帖子（和评论......）。因此，无论管理员说什么，都可以。

2) 我希望能够仅检索对德国用户可见的帖子。

这两个例子实际上都可能吗？可能是因为我使用 access_tokens Facebook 可能会使用我自己的国家/语言来决定我获得什么数据，这意味着我必须一直更改国家，这当然不是询问我的用户的选项。

你们有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T17:48:54.033

仅当您将应用程序用作发布页面的管理员时，这才有可能。

正如您所提到的，API 将检测您背后的用户，`access_token`并且仅显示他们通常可以在桌面站点上访问的帖子。

这是一个故意的限制，所以没有办法绕过它。

# python - 如何从字符串列表中制作第一个字符的列表

> ID：13477516
> 
> 赞同：0
> 
> 时间：2012-11-20T16:22:47.627
> 
> 标签：python, arrays, string

假设我有一个字符串列表说

```
['abc' , 'def', 'ghi'] 
```

如何将其转换为数组列表，例如

```
[['a','d','g'],['b','e','h'],['c','f','i']] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T16:26:16.000

你可以使用`zip()`：

使用列表理解：

```
In [7]: lis=['abc' , 'def', 'ghi']

In [9]: [list(x) for x in zip(*lis)]
Out[9]: [['a', 'd', 'g'], ['b', 'e', 'h'], ['c', 'f', 'i']] 
```

使用`map()`：

```
In [11]: map(list,zip(*lis))
Out[11]: [['a', 'd', 'g'], ['b', 'e', 'h'], ['c', 'f', 'i']] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T16:28:04.903

使用列表理解和`zip`：

```
l = ['abc' , 'def', 'ghi']
l = [list(x) for x in zip(*l)]
print l

>>> [['a','d','g'],['b','e','h'],['c','f','i']] 
```

# mongodb - mongoDB Object DBCursor 没有方法'sort'

> ID：13477517
> 
> 赞同：1
> 
> 时间：2012-11-20T16:22:52.087
> 
> 标签：mongodb

所以我创建了一个名为`food`2 个对象的集合，这些对象保存没问题。使用`find()`也没有问题。但是，当我输入以下内容时：

`db.food.find().sort({averageRating:-1}).select({_id: 1}).limit(2)`

我得到错误：

`JS Error: TypeError: Object DBCursor has no method 'sort'`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:25:01.543

这是你想要的？

```
db.food.find({},{_id:1}).sort({"averageRating":-1}).limit(2); 
```

它仅选择按平均评分降序排列的 2 个 id 字段。要返回的字段由 find() 中的第二个参数指定，在本例中为 _id。

据我所知，select 不是 mongoDb 中的有效命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T16:55:46.453

它应该是选择器，而不是选择。看看能不能解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T18:15:23.213

根据 shargors 的评论，看起来 try.mongodb.org 不支持 sort()。我建议[下载](http://www.mongodb.org/downloads)和[安装](http://www.mongodb.org/display/DOCS/Quickstart)mongodb 本身，并使用真正的 shell。

# itextsharp - 文本不适合表单域 (iTextSharp)

> ID：13477522
> 
> 赞同：1
> 
> 时间：2012-11-20T16:23:12.543
> 
> 标签：itextsharp, scrollbars

我使用 Adob​​e Acrobat Pro 创建了一个 .PDF 文件。该文件有几个文本字段。使用 iTextSharp，我可以填充所有字段并邮寄 .PDF。

一件事困扰着我——接下来的一些内容将不“适合”在文本框中。在 Adob​​e 中，如果我输入的高度超过了分配的高度，滚动条就会启动 - 当字体大小未设置为自动并且允许多行时会发生这种情况。

但是，当我尝试设置以下属性时：

```
//qSize is float and set to 15;
//auto size of font is not being set here.
pdfFormFields.SetFieldProperty("notification_desc", "textsize", qSize, null);

// set multiline
pdfFormFields.SetFieldProperty("notification_desc", "setfflags", PdfFormField.FF_MULTILINE, null);

//fill the field
pdfFormFields.SetField("notification_desc", complaintinfo.OWNER_DESC); 
```

然而，在编译和冲压后，滚动条不会出现在最终的 .PDF 中。

我不确定这是否是正确的做法。我在想也许我应该创建一个表格并用文本填充它，但文档很少或根本没有引用滚动条......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T09:04:54.813

拼合文档时，会删除所有交互性。在扁平表单上期望工作滚动条类似于在打印纸上期望工作滚动条。这就是为什么你的问题没有得到很多回应：这有点荒谬。

当您用文本填充矩形时，所有不适合的文本都将被省略。这就是为什么有些人将字体大小设置为 0。在这种情况下，将调整字体大小以使文本适合。我不知道这是否适合您，因为您明确指出字体大小必须为 15 pt。

如果您无法更改字体大小，则不应期望 AcroForm 表单域能够自行适应内容。ISO-32000-1 对此很清楚：文本字段的坐标是固定的。

您唯一的选择是控制 iText 应如何填写该字段。我做了一个例子来展示如何在我的[书](http://itextpdf.com/book)的上下文中做到这[一点](http://kuujinbo.info/iTextInAction2Ed/index.aspx?ch=Chapter08&ex=MovieAds)：[MovieAds.java/MovieAds.cs](http://itextpdf.com/examples/iia.php?id=163)。在此示例中，我向该字段询问其坐标：

```
AcroFields.FieldPosition f = form.GetFieldPositions(TEXT)[0]; 
```

该对象为您提供页码`f.page`和一个 Rectangle `f.position`。您可以结合使用这些变量`ColumnText`来完全按照您想要的方式添加内容（并检查是否已添加所有内容）。

我希望你明白：

*   扁平表单上没有滚动条是正常的，
*   填写字段的标准方式剪辑不适合的内容，
*   如果您想要自定义结果，则需要进行更多编程。

更多信息：请参阅“iText in Action - Second Edition”。

# java - 使用 docx4j 时 OutputPropertiesFactory.java 出现空指针异常

> ID：13477534
> 
> 赞同：0
> 
> 时间：2012-11-20T16:23:49.223
> 
> 标签：java, docx4j

我正在使用 docx4j 提取上传的 docx 文件，但出现以下异常

```
java.lang.NullPointerException
        在 org.apache.xml.serializer.OutputPropertiesFactory.getDefaultMethodProperties(OutputPropertiesFactory.java:260)
        在 org.apache.xalan.templates.OutputProperties.(OutputProperties.java:83)
        在 org.apache.xalan.transformer.TransformerIdentityImpl.(TransformerIdentityImpl.java:88)
        在 org.apache.xalan.processor.TransformerFactoryImpl.newTransformerHandler（TransformerFactoryImpl.java:755）
        在 com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.createTransformerHandler(JAXBContextImpl.java:705)
        在 com.sun.xml.internal.bind.v2.runtime.unmarshaller.DomLoader$State.(DomLoader.java:52)
        在 com.sun.xml.internal.bind.v2.runtime.unmarshaller.DomLoader.startElement(DomLoader.java:102)
        在 com.sun.xml.internal.bind.v2.runtime.unmarshaller.ProxyLoader.startElement(ProxyLoader.java:44)
        在 com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallingContext._startElement(UnmarshallingContext.java:470)
        在 com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallingContext.startElement（UnmarshallingContext.java:448）
        在 com.sun.xml.internal.bind.v2.runtime.unmarshaller.InterningXmlVisitor.startElement（InterningXmlVisitor.java:60）
        在 com.sun.xml.internal.bind.v2.runtime.unmarshaller.SAXConnector.startElement(SAXConnector.java:137)
        在 com.sun.xml.internal.bind.unmarshaller.DOMScanner.visit(DOMScanner.java:228)
        在 com.sun.xml.internal.bind.unmarshaller.DOMScanner.visit(DOMScanner.java:265)
        在 com.sun.xml.internal.bind.unmarshaller.DOMScanner.visit(DOMScanner.java:234)
        在 com.sun.xml.internal.bind.unmarshaller.DOMScanner.visit(DOMScanner.java:265)
        在 com.sun.xml.internal.bind.unmarshaller.DOMScanner.visit(DOMScanner.java:234)
        在 com.sun.xml.internal.bind.unmarshaller.DOMScanner.visit(DOMScanner.java:265)
        在 com.sun.xml.internal.bind.unmarshaller.DOMScanner.visit(DOMScanner.java:234)
        在 com.sun.xml.internal.bind.unmarshaller.DOMScanner.visit(DOMScanner.java:265)
        在 com.sun.xml.internal.bind.unmarshaller.DOMScanner.visit(DOMScanner.java:234)
        在 com.sun.xml.internal.bind.unmarshaller.DOMScanner.visit(DOMScanner.java:265)
        在 com.sun.xml.internal.bind.unmarshaller.DOMScanner.visit(DOMScanner.java:234)
        在 com.sun.xml.internal.bind.unmarshaller.DOMScanner.visit(DOMScanner.java:265)
        在 com.sun.xml.internal.bind.unmarshaller.DOMScanner.visit(DOMScanner.java:234)
        在 com.sun.xml.internal.bind.unmarshaller.DOMScanner.visit(DOMScanner.java:265)
        在 com.sun.xml.internal.bind.unmarshaller.DOMScanner.visit(DOMScanner.java:234)
        在 com.sun.xml.internal.bind.unmarshaller.DOMScanner.visit(DOMScanner.java:265)
        在 com.sun.xml.internal.bind.unmarshaller.DOMScanner.visit(DOMScanner.java:234)
        在 com.sun.xml.internal.bind.unmarshaller.DOMScanner.visit(DOMScanner.java:265)
        在 com.sun.xml.internal.bind.unmarshaller.DOMScanner.visit(DOMScanner.java:234)
        在 com.sun.xml.internal.bind.unmarshaller.DOMScanner.visit(DOMScanner.java:265)
        在 com.sun.xml.internal.bind.unmarshaller.DOMScanner.visit(DOMScanner.java:234)
        在 com.sun.xml.internal.bind.unmarshaller.DOMScanner.visit(DOMScanner.java:265)
        在 com.sun.xml.internal.bind.unmarshaller.DOMScanner.visit(DOMScanner.java:234)
        在 com.sun.xml.internal.bind.unmarshaller.DOMScanner.visit(DOMScanner.java:265)
        在 com.sun.xml.internal.bind.unmarshaller.DOMScanner.visit(DOMScanner.java:234)
        在 com.sun.xml.internal.bind.unmarshaller.DOMScanner.visit(DOMScanner.java:265)
        在 com.sun.xml.internal.bind.unmarshaller.DOMScanner.visit(DOMScanner.java:234)
        在 com.sun.xml.internal.bind.unmarshaller.DOMScanner.scan(DOMScanner.java:111)
        在 com.sun.xml.internal.bind.unmarshaller.DOMScanner.scan(DOMScanner.java:94)
        在 com.sun.xml.internal.bind.unmarshaller.DOMScanner.scan(DOMScanner.java:87)
        在 com.sun.xml.internal.bind.v2.runtime.BinderImpl.associativeUnmarshal(BinderImpl.java:145)
        在 com.sun.xml.internal.bind.v2.runtime.BinderImpl.unmarshal（BinderImpl.java:116）
        在 org.docx4j.openpackaging.parts.JaxbXmlPartXPathAware.unmarshal（JaxbXmlPartXPathAware.java:171）
        在 org.docx4j.openpackaging.io.LoadFromZipNG.getRawPart(LoadFromZipNG.java:560)
        在 org.docx4j.openpackaging.io.LoadFromZipNG.getPart(LoadFromZipNG.java:429)
        在 org.docx4j.openpackaging.io.LoadFromZipNG.addPartsFromRelationships(LoadFromZipNG.java:352)
        在 org.docx4j.openpackaging.io.LoadFromZipNG.process(LoadFromZipNG.java:245)
        在 org.docx4j.openpackaging.io.LoadFromZipNG.get(LoadFromZipNG.java:193)
        在 org.docx4j.openpackaging.packages.OpcPackage.load(OpcPackage.java:301)
    在 org.docx4j.openpackaging.packages.OpcPackage.load(OpcPackage.java:245)
        在 org.docx4j.openpackaging.packages.OpcPackage.load(OpcPackage.java:213)
        在 org.docx4j.openpackaging.packages.WordprocessingMLPackage.load（WordprocessingMLPackage.java:184）
        在 com.myapp.plugin.multipartfileparser.MsWordMultipartFileParser.getDocxHtml(MsWordMultipartFileParser.java:111)
        在 com.myapp.plugin.multipartfileparser.MsWordMultipartFileParser.write(MsWordMultipartFileParser.java:68)
        在 com.myapp.plugin.service.FileUploaderService.save(FileUploaderService.java:89)
        在 com.myapp.plugin.controller.UploadFileController.upload(UploadFileController.java:48)
        在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        在 java.lang.reflect.Method.invoke(Method.java:616)
        在 org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:212)
        在 org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
        在 org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
        在 org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
        在 org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
        在 org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
        在 org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:900)
        在 org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:827)
        在 org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
        在 org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
        在 javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
        在 javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        在 org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
        在 org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
        在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        在 org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:311)
        在 org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
        在 org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
        在 org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        在 org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
        在 org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        在 org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:101)
    在 org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        在 org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
        在 org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        在 org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:146)
        在 org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        在 org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
        在 org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        在 org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
        在 org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        在 org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)
        在 org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        在 org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
        在 org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        在 org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
        在 org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        在 org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
        在 org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        在 org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
        在 org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        在 org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:173)
        在 org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
        在 org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
        在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        在 org.apache.catalina.core.StandardWrapperValve.invoke（StandardWrapperValve.java:233）
        在 org.apache.catalina.core.StandardContextValve.invoke（StandardContextValve.java:191）
        在 org.apache.catalina.core.StandardHostValve.invoke（StandardHostValve.java:127）
        在 org.apache.catalina.valves.ErrorReportValve.invoke（ErrorReportValve.java:102）
        在 org.apache.catalina.core.StandardEngineValve.invoke（StandardEngineValve.java:109）
        在 org.apache.catalina.connector.CoyoteAdapter.service（CoyoteAdapter.java:293）
        在 org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
        在 org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
        在 org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
        在 java.lang.Thread.run(Thread.java:679)

```

实际上，我第一次可以上传该文件，但第二次发生了这个异常。只是想知道是否有人以前看过它？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T01:49:26.947

我在向 glassfish 3 部署 Web 服务时遇到了同样的问题。第一个请求有效，但后续请求失败。

当我检查我的 war 文件的内容时，我发现我有两个版本的**xalan**：2.7.1 和 2.7.0。我使用 7zip 从战争中删除了旧版本（2.7.0），然后重新部署。问题已解决。然后我相应地重新配置了我的项目依赖项。

因此，我建议您可能有类似的 jar 冲突，可以像我上面所做的那样解决。

# java - 仅在业务逻辑中设置对象的属性？

> ID：13477541
> 
> 赞同：0
> 
> 时间：2012-11-20T16:24:03.833
> 
> 标签：java, model-view-controller, jakarta-ee

如果我有一个对象，例如

```
class Car {
  boolean sold = false;
} 
```

并且对象存在于视图层中，如果我想更改该值，这会更好：更改`sold`视图类中的值，例如

```
class CarView {
  Car car;

  onButtonAction() {
      car.setSold(true);
      //or: carService.sellCar(car)
  }
} 
```

或者

使用像`carService.sellCar(car);`where这样的后端服务

```
class CarService {
    sellCar(car) {
        car.setSold(true);
    }
} 
```

我应该将这些动作放在哪一层？从设计的角度来看，在视图类中应用这样的对象更改会不会是一个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:28:18.947

当您有多个相互排斥的选项时，设计总是意味着找到一个最优值。因此，永远不可能有正确的设计，就您的设计目标而言，它总是只会变得更好或更糟（这也不是普遍有效/好的）。

如果服务经常更改，或者您的 UI 需要将数据提供给几个类似的服务，请创建一个服务，否则，您会发现自己一直在更改视图。另一个很好的理由是服务是可插入的（即客户可以配置应用程序以使用几个预定义的服务之一）。

如果您发现自己编写了数百个服务并且每个服务只使用一次，每个服务只有一个方法，等等。您可能在浪费时间。

# java - 将核心分配给 TCP 轮询

> ID：13477543
> 
> 赞同：0
> 
> 时间：2012-11-20T16:24:07.693
> 
> 标签：java, tcp, cpu-cores

我们有几个 Java 应用程序在同一台 Linux 机器上运行，并通过 TCP 来回发送消息。我们使用 ServerSocket 和 Socket 来创建连接。我想尽可能地减少这种通信的延迟。似乎可以在我们的盒子上分配一个核心来进行连续的 TCP 轮询，这将提高性能。在 Linux 和/或 Java 中是如何做到的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T23:40:19.677

有一种方法可以实现这一点，但它不是可移植的。

您需要做的是：1）找出本机线程ID 2）为本机线程设置亲和力

您可以使用 sun.jvm.hotspot 下的包中不受支持的类来获取本机线程 ID（在 linux 上是进程 ID）。您可以通过包含 sa-jdi.jar（与 jdk 捆绑）来链接这些类以构建路径。由于我不喜欢从另一个站点复制答案，你应该去阅读[github 上的说明](https://gist.github.com/843622)

获得本机线程 ID 后，您应该使用“taskset”命令行实用程序来更改亲和性。您可以从另一篇文章中找到[如何使用任务集的说明](https://serverfault.com/questions/32322/is-it-possible-to-limit-a-linux-process-so-that-it-can-only-run-on-a-particular)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T21:49:13.043

它不是。在 Java 中无法将线程分配给核心。

并且分配单个核心不会提高性能；相反，它可能会减少它。我不知道你所说的“轮询”是什么意思，但你不能用套接字来做到这一点：你必须在 read() 中使用单独的线程阻塞。如果您正在考虑使用`InputStream.available()`，那么您完全是在寻找错误的树，应该将 NIO 与 Selector 一起使用。

# c# - 对于 windows phone 开发 C# 使用来自其他页面的信息

> ID：13477544
> 
> 赞同：0
> 
> 时间：2012-11-20T16:24:13.503
> 
> 标签：c#, windows-phone-7

我开发了一个应用程序来从 mainpage.xaml 获取经度和纬度，现在我在另一个页面 page2.xaml 中，如何获取从 mainpage.xaml 获取的经度和纬度代码？

下面是我的 mainpage.xaml.cs 代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using Microsoft.Phone.Controls;
using Microsoft.Phone.Controls.Maps;
using System.Device.Location;
using System.Threading;

namespace Fyp
{
public partial class MainPage : PhoneApplicationPage
{
    /// <summary>
    /// This sample receives data from the Location Service and displays the geographic coordinates of the device.
    /// </summary>

    GeoCoordinateWatcher watcher;
    string accuracyText = "";
    Pushpin myPushpin = new Pushpin();

    /// <summary>
    /// Constructor for the PhoneApplicationPage object
    /// </summary>
    public MainPage()
    {
        InitializeComponent();
    }

    #region User Interface

    /// <summary>
    /// Click event handler for the low accuracy button
    /// </summary>
    /// <param name="sender">The control that raised the event</param>
    /// <param name="e">An EventArgs object containing event data.</param>
    private void NextButtonClick(object sender, EventArgs e)
    {
        // Start data acquisition from the Location Service, low accuracy
        NavigationService.Navigate(new Uri("/workshop.xaml", UriKind.Relative));
    }

    /// <summary>
    /// Click event handler for the high accuracy button
    /// </summary>
    /// <param name="sender"></param>
    /// <param name="e"></param>
    private void StartButtonClick(object sender, EventArgs e)
    {
        // Start data acquisition from the Location Service, high accuracy
        accuracyText = "FIT Building Multimedia University, Cyberjaya, 63000 Selangor";
        watcher = new GeoCoordinateWatcher(GeoPositionAccuracy.High);
        watcher.MovementThreshold = 100;
        StartLocationService(GeoPositionAccuracy.High);

        watcher.StatusChanged += new EventHandler<GeoPositionStatusChangedEventArgs>(watcher_StatusChanged);
        watcher.PositionChanged += new EventHandler<GeoPositionChangedEventArgs<GeoCoordinate>>(watcher_PositionChanged);
        myMap.ZoomLevel = 16.0f;
        watcher.Start();
    }
    private void StopButtonClick(object sender, EventArgs e)
    {
        if (watcher != null)
        {
            watcher.Stop();
        }
        StatusTextBlock.Text = "location service is off";
        LatitudeTextBlock.Text = " ";
        LongitudeTextBlock.Text = " ";
    }

    #endregion

    #region Application logic

    /// <summary>
    /// Helper method to start up the location data acquisition
    /// </summary>
    /// <param name="accuracy">The accuracy level </param>
    private void StartLocationService(GeoPositionAccuracy accuracy)
    {
        // Reinitialize the GeoCoordinateWatcher
        StatusTextBlock.Text = "starting, " + accuracyText;
        watcher = new GeoCoordinateWatcher(accuracy);
        watcher.MovementThreshold = 20;

        // Add event handlers for StatusChanged and PositionChanged events
        watcher.StatusChanged += new EventHandler<GeoPositionStatusChangedEventArgs>(watcher_StatusChanged);
        watcher.PositionChanged += new EventHandler<GeoPositionChangedEventArgs<GeoCoordinate>>(watcher_PositionChanged);

        // Start data acquisition
        watcher.Start();
    }

    /// <summary>
    /// Handler for the StatusChanged event. This invokes MyStatusChanged on the UI thread and
    /// passes the GeoPositionStatusChangedEventArgs
    /// </summary>
    /// <param name="sender"></param>
    /// <param name="e"></param>
    void watcher_StatusChanged(object sender, GeoPositionStatusChangedEventArgs e)
    {
        Deployment.Current.Dispatcher.BeginInvoke(() => MyStatusChanged(e));

    }
    /// <summary>
    /// Custom method called from the StatusChanged event handler
    /// </summary>
    /// <param name="e"></param>
    void MyStatusChanged(GeoPositionStatusChangedEventArgs e)
    {
        switch (e.Status)
        {
            case GeoPositionStatus.Disabled:
                // The location service is disabled or unsupported.
                // Alert the user
                StatusTextBlock.Text = "location is unsupported on this device";
                break;
            case GeoPositionStatus.Initializing:
                // The location service is initializing.
                // Disable the Start Location button
                StatusTextBlock.Text = "initializing location service," + accuracyText;
                break;
            case GeoPositionStatus.NoData:
                // The location service is working, but it cannot get location data
                // Alert the user and enable the Stop Location button
                StatusTextBlock.Text = "data unavailable," + accuracyText;
                break;
            case GeoPositionStatus.Ready:
                // The location service is working and is receiving location data
                // Show the current position and enable the Stop Location button
                StatusTextBlock.Text = " " + accuracyText;
                break;

        }
    }

    /// <summary>
    /// Handler for the PositionChanged event. This invokes MyStatusChanged on the UI thread and
    /// passes the GeoPositionStatusChangedEventArgs
    /// </summary>
    /// <param name="sender"></param>
    /// <param name="e"></param>
    void watcher_PositionChanged(object sender, GeoPositionChangedEventArgs<GeoCoordinate> e)
    {
        Deployment.Current.Dispatcher.BeginInvoke(() => MyPositionChanged(e));
    }

    /// <summary>
    /// Custom method called from the PositionChanged event handler
    /// </summary>
    /// <param name="e"></param>
    void MyPositionChanged(GeoPositionChangedEventArgs<GeoCoordinate> e)
    {
        // Update the TextBlocks to show the current location
        LatitudeTextBlock.Text = e.Position.Location.Latitude.ToString("0.000");
        LongitudeTextBlock.Text = e.Position.Location.Longitude.ToString("0.000");
        // center the pushpin and map on the current position
        myPushpin.Location = e.Position.Location;
        myMap.Center = e.Position.Location;
        // if this is the first time that myPushpin is being plotted, plot it!
        if (myMap.Children.Contains(myPushpin) == false) { myMap.Children.Add(myPushpin); };

    }

    #endregion

    private void PhoneApplicationPage_Loaded(object sender, RoutedEventArgs e)
    {

    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:43:14.023

您应该设置[查询字符串参数](http://msdn.microsoft.com/en-us/library/system.windows.navigation.navigationservice%28v=vs.95%29.aspx)：

```
NavigationService.Navigate(new Uri(String.Format("/workshop.xaml?lat={0}&lng={1}", currentLat, currentLng), UriKind.Relative)); 
```

然后在你的第二页：

```
protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
{
    base.OnNavigatedTo(e);

    string lat = NavigationContext.QueryString["lat"];
    string lng = NavigationContext.QueryString["lng"];
} 
```

# iphone - IOS6 界面方向改变时更新视图

> ID：13477546
> 
> 赞同：0
> 
> 时间：2012-11-20T16:24:15.257
> 
> 标签：iphone, ios, rotation, ios6

当界面方向改变时，我需要重新定位 UIPopoverController。在 io5 中，我只是做了所有事情：`willRotateToInterfaceOrientation`

我知道我可以`UIDeviceOrientationDidChangeNotification`在 IOS6 中收听，但我只想要界面定向调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:46:41.237

ios6 旋转背后的想法是某些视图，如弹出框，并没有真正的方向。因为他们没有填满屏幕。

要在弹出框的大小更改时重新布局视图，`-(void)viewWillLayoutSubviews`请在弹出框的内容视图控制器中布局您的视图，并根据需要将视图调整为新大小。动画变化是动画的。

# java - 一个光滑的纹理是模糊的，一个不是

> ID：13477548
> 
> 赞同：2
> 
> 时间：2012-11-20T16:24:19.440
> 
> 标签：java, opengl, lwjgl, slick2d

我想使用 Slick 的 Texture 类将两个不同的纹理绑定到一个立方体。问题是我绑定到立方体的第一个纹理显示正确，即像素级，但我绑定到立方体侧面的另一个纹理模糊，好像我没有输入

```
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST); 
```

这是渲染立方体的代码

```
 public void render(){
    float x = coordinate.x;
    float y = coordinate.y;
    float z = coordinate.z;

    top.bind();
    glBegin(GL_QUADS);

        //TOP
        glNormal3f(0f, 1f, 0f);
        glTexCoord2f(0f, 0f);
        glVertex3f(x,y,z);
        glTexCoord2f(0f, 1f);
        glVertex3f(x, y, z+1);
        glTexCoord2f(1f, 1f);
        glVertex3f(x+1, y, z+1);
        glTexCoord2f(1f, 0f);
        glVertex3f(x+1, y, z);
    glEnd();

    bottom.bind();
    glBegin(GL_QUADS);
        //BOTTOM
        glNormal3f(0f, -1f, 0f);
        glTexCoord2f(0f, 0f);
        glVertex3f(x,y-1,z);
        glTexCoord2f(0f, 1f);
        glVertex3f(x, y-1, z+1);
        glTexCoord2f(1f, 1f);
        glVertex3f(x+1, y-1, z+1);
        glTexCoord2f(1f, 0f);
        glVertex3f(x+1, y-1, z);
    glEnd();

    sides.bind();
    glBegin(GL_QUADS);
        //BACK
        glNormal3f(0,0,-1);
        glTexCoord2f(0f, 0f);
        glVertex3f(x,y,z);
        glTexCoord2f(1f, 0f);
        glVertex3f(x+1, y, z);
        glTexCoord2f(1f, 1f);
        glVertex3f(x+1, y-1, z);
        glTexCoord2f(0f, 1f);
        glVertex3f(x, y-1, z);

        //FRONT
        glNormal3f(0,0,1);
        glTexCoord2f(0f, 0f);
        glVertex3f(x,y,z+1);
        glTexCoord2f(1f, 0f);
        glVertex3f(x+1, y, z+1);
        glTexCoord2f(1f, 1f);
        glVertex3f(x+1, y-1, z+1);
        glTexCoord2f(0f, 1f);
        glVertex3f(x, y-1, z+1);

        //LEFT
        glNormal3f(-1,0,0);
        glTexCoord2f(0f, 0f);
        glVertex3f(x,y,z);
        glTexCoord2f(0f, 1f);
        glVertex3f(x, y-1, z);
        glTexCoord2f(1f, 1f);
        glVertex3f(x, y-1, z+1);
        glTexCoord2f(1f, 0f);
        glVertex3f(x, y, z+1);

        //RIGHT
        glNormal3f(1,0,0);
        glTexCoord2f(0f, 0f);
        glVertex3f(x+1,y,z);
        glTexCoord2f(0f, 1f);
        glVertex3f(x+1, y-1, z);
        glTexCoord2f(1f, 1f);
        glVertex3f(x+1, y-1, z+1);
        glTexCoord2f(1f, 0f);
        glVertex3f(x+1, y, z+1);
    glEnd();

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-08T10:29:41.007

如果您希望两个纹理都像您所说的那样“模糊”，则需要单独绑定每个纹理，并调用以下函数。

```
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR); 
```

如果您将它们像素化/“不模糊”，则可以改为调用以下函数。

```
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST); 
```

请记住，您需要像这样单独调用它们。

```
texture1.bind();
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);

texture2.bind();
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR); 
```

# wpf - 在背景图像顶部添加空间

> ID：13477553
> 
> 赞同：0
> 
> 时间：2012-11-20T16:24:40.013
> 
> 标签：wpf, background-image

我有一个带有按钮和背景图像的简单网格。如何在图像顶部添加一些空间？

```
<Grid VerticalAlignment="Top">
   <Grid.Background>
      <ImageBrush ImageSource="img.png" Strech="None"/>
   <Grid.Background>
...
</Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T17:01:05.127

将顶部边距添加到网格。

```
<Grid VerticalAlignment="Top" Margin="0,20,0,0">
   <Grid.Background>
      <ImageBrush ImageSource="img.png" Strech="None"/>
   <Grid.Background>
...
</Grid> 
```

# haskell - 使用 Haskell 和 Repa 动态生成 Roguelike 地下城

> ID：13477556
> 
> 赞同：3
> 
> 时间：2012-11-20T16:24:46.200
> 
> 标签：haskell, roguelike, repa

[在这里找到了类似的问题](https://stackoverflow.com/questions/11302798/how-to-use-random-walk-to-generate-a-dungeon-map "在这里找到类似的问题")

我正在开发一个用 Haskell 编写的 roguelike 游戏。我决定使用 将世界表示为 2D 网格[`Data.Array.Repa`](http://hackage.haskell.org/package/repa-3.2.2.3 "Data.Array.Repa")，现在我希望动态生成随机地牢，其中可以包含直的或 90 度转弯的走廊，以及（几乎）任何大小和形状的房间。

我很难找出生成这些地牢的策略。醉汉的步行可能会奏效，但似乎它可能太不稳定并且不会产生很多房间。生成地牢的更好方法是什么？

另外，`Data.Array.Repa`在这里使用的数据结构是一个不错的选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T20:36:45.857

一个快速的谷歌发现了一些很好的资源。首先，关于这个主题的论文！

[http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.119.1445](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.119.1445)

二、系列博文：http: [//dirkkok.wordpress.com/dungeon-generation-article-series/](http://dirkkok.wordpress.com/dungeon-generation-article-series/)

最后，对原始流氓算法的说明：http: [//kuoi.com/~kamikaze/GameDesign/art07_rogue_dungeon.php](http://kuoi.com/~kamikaze/GameDesign/art07_rogue_dungeon.php)

对于 haskell 特定资源，您可能需要查看 LambdaHack：[https ://github.com/kosmikus/LambdaHack](https://github.com/kosmikus/LambdaHack)

# c# - 无法加载配置文件 web.config - 正在被另一个进程使用

> ID：13477557
> 
> 赞同：2
> 
> 时间：2012-11-20T16:24:47.777
> 
> 标签：c#, .net, iis, web-config, windows-server-2008-x64

w3wp.exe 进程抛出以下 ConfigurationErrorsException：

**加载配置文件时发生错误：进程无法访问文件文件“web.config”，因为它正被另一个进程使用**

到目前为止，我们已经确定了以下内容：

*   错误是间歇性的！有时在浏览器中刷新页面就足以重新启动它。有时不是。该文件已被充分锁定，以至于当直接连接到 Web 服务器时，我们无法使用记事本打开它。
*   由于此错误的间歇性出现，它似乎不是文件权限问题。
*   在这种确切配置下，我们有多个应用程序存在此问题。它们位于不同的应用程序池中。在错误开始发生时，应用程序代码没有任何更改。
*   除了正在访问此文件的 w3wp.exe 之外，我们找不到任何进程。
*   我们的 Web 应用程序不会将任何更改写入 web.config 文件，只会从中读取值。
*   此错误发生在我们网络场中的多台服务器上
*   我们无法在我们的开发环境中复制此错误。它只发生在生产中。
*   该应用程序使用 .NET 4.0 框架在 x64 服务器（Win 2008 Server）上运行。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-04-26T08:39:34.710

在我的情况下，webconfig文件是在notepad++的一个选项卡中打开的，甚至notepad++也处于关闭状态，一旦我打开并关闭notepad++问题就消失了。这表明检查文件打开的所有实例是必不可少的。

# android - 使用 mapsforge 的 android 自定义位图叠加

> ID：13477558
> 
> 赞同：1
> 
> 时间：2012-11-20T16:24:49.420
> 
> 标签：android, bitmap, maps

我正在尝试使用 mapsforge 映射库将位图覆盖在 android 上的地图上。我正在扩展 Overlay 类，我需要实现 drawOverlayBitmap。有谁知道如何做到这一点？我已经用谷歌搜索了，但是所有结果都使用谷歌的 apis 返回，当你在那里覆盖方法时，你有 mapView 这样更有意义......不知道如何在这里做

```
public abstract class Overlay extends java.lang.Thread {
private static final java.lang.String THREAD_NAME = "Overlay";
private boolean changedSize;
private boolean hasValidDimensions;
private final android.graphics.Matrix matrix;
private float matrixScaleFactor;
private android.graphics.Bitmap overlayBitmap1;
private android.graphics.Bitmap overlayBitmap2;
private final android.graphics.Canvas overlayCanvas;
private final android.graphics.Point point;
private android.graphics.Point positionAfterDraw;
private android.graphics.Point positionBeforeDraw;
private boolean redraw;
protected org.mapsforge.android.maps.MapView internalMapView;

protected Overlay() { /* compiled code */ }

public final void draw(android.graphics.Canvas canvas) { /* compiled code */ }

public final void matrixPostScale(float scaleX, float scaleY, float pivotX, float pivotY) { /* compiled code */ }

public final void matrixPostTranslate(float translateX, float translateY) { /* compiled code */ }

public boolean onLongPress(org.mapsforge.core.GeoPoint geoPoint, org.mapsforge.android.maps.MapView mapView) { /* compiled code */ }

public final void onSizeChanged() { /* compiled code */ }

public boolean onTap(org.mapsforge.core.GeoPoint geoPoint, org.mapsforge.android.maps.MapView mapView) { /* compiled code */ }

public final void requestRedraw() { /* compiled code */ }

public final void run() { /* compiled code */ }

public final void setupOverlay(org.mapsforge.android.maps.MapView mapView) { /* compiled code */ }

private void redrawOverlay() { /* compiled code */ }

protected abstract void drawOverlayBitmap(android.graphics.Canvas canvas, android.graphics.Point point, org.mapsforge.android.maps.Projection projection, byte b);

protected java.lang.String getThreadName() { /* compiled code */ }

final void changeSize() { /* compiled code */ }

boolean sizeHasChanged() { /* compiled code */ }

protected static final enum EventType {
    public static final  LONG_PRESS, public static final  TAP;

    public static org.mapsforge.android.maps.overlay.Overlay.EventType[] values() { /* compiled code */ }

    public static org.mapsforge.android.maps.overlay.Overlay.EventType valueOf(java.lang.String name) { /* compiled code */ }

    private EventType() { /* compiled code */ }
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T23:35:24.490

使用以下代码作为示例：

```
Point screenPts = new Point();

@Override
protected void drawOverlayBitmap(Canvas canvas, Point point, 
                  Projection projection, byte zoom){

        projection.toPixels(new GeoPoint((int)(location.getLatitude()*1E6),
                  (int)(location.getLongitude()*1E6)) , screenPts);
        canvas.drawBitmap(myBitmap, screenPts.x, screenPts.y, new Paint());
} 
```

问候。

# magento - Magento MAGMI 导入 CSV：attribute_set 列是什么意思/要求

> ID：13477561
> 
> 赞同：0
> 
> 时间：2012-11-20T16:25:04.240
> 
> 标签：magento, magento-1.7, magmi

在 MAGMI 中，必需的 attribute_set 列需要在其中包含什么？我似乎可以在任何地方找到。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T16:41:50.277

您是否尝试过在`Catalog -> Attributes -> Mange Attribute Sets`.

`Default`如果您未指定任何特殊属性集，请输入。

# objective-c - 使用 GCDAsyncSocket 通过套接字 Telnet

> ID：13477566
> 
> 赞同：7
> 
> 时间：2012-11-20T16:25:31.390
> 
> 标签：objective-c, telnet

我正在尝试通过目标 c 的 telnet 连接到 Cisco C40 编解码器。在我的计算机上使用终端时，我得到：

> 密码：

但是，在进行套接字连接时，需要进行 telnet 协商。我就是这样，但由于某种原因，我无法进入上面的“密码：”提示。

```
- (void)socket:(GCDAsyncSocket *)sock didReadData:(NSData *)data withTag:(long)tag
{
    NSLog(@"RECEIVE BUFFER %@",data);

    //store read bytes to rawData
    self.rawData = [[NSMutableData alloc] initWithData:data];

    //cast bytes
    const uint8_t *bytes = [self.rawData bytes];

    //go through rawdata format and save it to networkbuffer
    for (int i =0; i < [self.rawData length]; i++)
    {
        if (![[NSString stringWithFormat:@"%02X", bytes[i]]isEqual:@"0D"])
        {
            [self.networkBuffer addObject:[NSString stringWithFormat:@"%02X", bytes[i]]];
        }
    }

    //negotiate any telnet protocal stuff (just accept options )
    //example:
    //FF:FD:18 returns FF:FB:18
    while([[self.networkBuffer objectAtIndex:0]isEqualToString:@"FF"] && [[self.networkBuffer objectAtIndex:1]isEqualToString:@"FD"] ) {
//        NSLog(@"HERE");

        NSData * tempData =[data subdataWithRange:NSMakeRange(0, 3)];

        NSMutableData * tempMutData = [NSMutableData dataWithData:tempData];

        const unsigned char replacement[] = {
                0xFC
            };

        [tempMutData replaceBytesInRange:NSMakeRange(1, 1) withBytes:replacement];

        [self sendCommand:tempMutData];

        data = [data subdataWithRange:NSMakeRange(3, [data length]-3)];

        self.networkBuffer = [NSMutableArray arrayWithArray:[self.networkBuffer subarrayWithRange:NSMakeRange(3, [self.networkBuffer count]-3)]];

//        NSLog(@"network buffer after removal: %@", data);

        if ([self.networkBuffer count]<3) {
            [self.networkBuffer insertObject:@" " atIndex:0];
        }
    }

    //decode from bytes to text
    for ( NSString * component in self.networkBuffer)
    {
        int value = 0;
        sscanf([component cStringUsingEncoding:NSASCIIStringEncoding], "%x", &value);
        [self.dataString appendFormat:@"%c", (char)value];
        NSLog(@"data byte: %c",(char)value);
    }
    [self telnetResponse:self.dataString];

    [self.networkBuffer removeAllObjects];
    [self.socket readDataToData:[GCDAsyncSocket CRLFData] withTimeout:-1 tag:0];//CRLFData
} 
```

这是我接收和发送的 telnet 协商选项的细分：

**服务器发给我：**

FF,FD,18 (0x18 = 24dec) (Do 终端类型)

FF,FD,20 (0x20 = 32dec) (做终端速度)

FF,FD,23 (0x23 = 35dec) (Do X 显示位置)

FF,FD,27 (0x27 = 39dec)（执行新环境选项）

**我对无效响应的尝试（没有提示进一步输入）：**

FF,FC,18 (0x18 = 24dec) (Wont 终端类型)

FF,FC,20 (0x20 = 32dec) (Wont 终端速度)

FF,FC,23 (0x23 = 35dec) (Wont X 显示位置)

FF,FC,27 (0x27 = 39dec) （没有新环境选项）

如果您查看代码，您会看到我正在检查 FF，如果是这样，则以类似的字节响应（用 FC 替换 FD），希望不会接受这些选项，但这似乎不起作用。

对我有帮助的链接：

[https://stackoverflow.com/a/2913991/530933](https://stackoverflow.com/a/2913991/530933)

[Telnet IAC 命令（NSStream 套接字）](https://stackoverflow.com/questions/10392045/telnet-iac-commands-nsstream-socket)

[http://www.iprodeveloper.com/forums/aft/52910](http://www.iprodeveloper.com/forums/aft/52910)

**更新**

我用命令外壳和思科编解码器做了一个wireshark。之后我复制了那些协商设置/数据包。现在唯一的问题是我只得到回声。所以我什么也得不到，发送一个命令，然后返回一个提示和我的文本。（例如，一无所获-发送用户名“admin”-返回“login：admin”）因此我的意思是只获得回声。我应该得到一个提示“登录：”然后发送“管理员”然后它应该提示我输入密码。

这是我在连接时发送的协商选项：

```
//will terminal type
    //will negotiate about window size
    const unsigned char nineteen[] = {
        0xFF, 0xFB, 0x18, 0xFF, 0xFB, 0x1F
    };
    self.dataToBeSent = [[NSData alloc]initWithBytes:nineteen length:sizeof(nineteen)];
    [self sendCommand:self.dataToBeSent];

    //wont terminal speed
    //wont X display location
    //will new environment option
    const unsigned char twenty[] = {
        0xFF, 0xFC, 0x20, 0xFF, 0xFC, 0x23, 0xFF, 0xFB, 0x27
    };
    self.dataToBeSent = [[NSData alloc]initWithBytes:twenty length:sizeof(twenty)];
    [self sendCommand:self.dataToBeSent];

    //Suboption being: negotiate about window size
    //end
    const unsigned char twentyOne[] = {
        //0xFF,0xFC, 0x18
        0xFF, 0xFA, 0x1F, 0x00, 0x50, 0x00, 0x19, 0xFF, 0xF0
    };
    self.dataToBeSent = [[NSData alloc]initWithBytes:twentyOne length:sizeof(twentyOne)];
    [self sendCommand:self.dataToBeSent];

    //new enviroment option
    //end
    const unsigned char twentyThree[] = {
        0xFF,0xFA, 0x27, 0x00, 0xFF, 0xF0
    };
    self.dataToBeSent = [[NSData alloc]initWithBytes:twentyThree length:sizeof(twentyThree)];
    [self sendCommand:self.dataToBeSent];

    //Terminal Type (ANSI)
    //end
    const unsigned char twentySeven[] = {
        0xFF,0xFA, 0x18, 0x00, 0x41, 0x4E, 0x53, 0x49, 0xFF, 0xF0
    };
    self.dataToBeSent = [[NSData alloc]initWithBytes:twentySeven length:sizeof(twentySeven)];
    [self sendCommand:self.dataToBeSent];

    //do suppress go ahead
    const unsigned char twentyEight[] = {
        0xFF, 0xFD, 0x03
    };
    self.dataToBeSent = [[NSData alloc]initWithBytes:twentyEight length:sizeof(twentyEight)];
    [self sendCommand:self.dataToBeSent];

    //will echo
    //dont status
    //wont remote flow control
    const unsigned char twentyFour[] = {
        0xFF, 0xFB, 0x01, 0xFF, 0xFE, 0x05, 0xFF,0xFC, 0x21
    };
    self.dataToBeSent = [[NSData alloc]initWithBytes:twentyFour length:sizeof(twentyFour)];
    [self sendCommand:self.dataToBeSent];

    //wont echo
    const unsigned char twentyFive[] = {
        0xFF, 0xFC, 0x01
    };
    self.dataToBeSent = [[NSData alloc]initWithBytes:twentyFive length:sizeof(twentyFive)];
    [self sendCommand:self.dataToBeSent];

    //Do echo
    const unsigned char twentySix[] = {
        0xFF,0xFD, 0x01
    };
    self.dataToBeSent = [[NSData alloc]initWithBytes:twentySix length:sizeof(twentySix)];
    [self sendCommand:self.dataToBeSent]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:51:24.793

所以一个大问题来自提示（登录名：或密码：）没有以CR NL（0D：0A）结束这一行。而我正在做

`[self.socket readDataToData:[GCDAsyncSocket CRLFData] withTimeout:-1 tag:0];`

所以我从来没有阅读过包含提示的数据（一个大问题也是wireshark没有工作（[我自己也修复了这个](http://ask.wireshark.org/questions/16177/wireshark-not-seeing-packets?page=1#16351)问题））。一旦我弄清楚这一点，我将上面的行更改为：

```
[self.socket readDataWithTimeout:-1 tag:0]; 
```

这成功地给了我提示。以下是我为达到这一点而发送的谈判以及原始问题所涉及的内容（与更新中的上述相同）：

> 将终端类型 - 0xFF、0xFB、0x18
> 
> 将协商窗口大小 - 0xFF、0xFB、0x1F
> 
> 不会终端速度 - 0xFF、0xFC、0x20
> 
> 不会 X 显示位置 - 0xFF、0xFC、0x23
> 
> 将新的环境选项 - 0xFF、0xFB、0x27
> 
> 子选项
> 
> > ```
> >  negotiate about window size - 0xFF, 0xFA, 0x1F, 0x00, 0x50, 0x00, 0x19
> >  end - 0xFF, 0xF0
> > 
> >  new enviroment option - 0xFF,0xFA, 0x27, 0x00, 
> >  end - 0xFF, 0xF0
> > 
> >  Terminal Type (ANSI) -  0xFF,0xFA, 0x18, 0x00, 0x41, 0x4E, 0x53, 0x49, 
> >  end - 0xFF, 0xF0 
> > ```
> > 
> > 抑制继续 - 0xFF，0xFD，0x03
> > 
> > 将回显 - 0xFF、0xFB、0x01
> 
> 不要状态 - 0xFF、0xFE、0x05
> 
> 不会进行远程流控制 - 0xFF、0xFC、0x21
> 
> 不会回显 - 0xFF、0xFC、0x01
> 
> > 做回声 - 0xFF，0xFD，0x01

这也可能有帮助。它从流中删除协商字节，因此当您对字符串进行编码时，它不包括协商字节。

```
while([[self.networkBuffer objectAtIndex:0]isEqualToString:@"FF"])
    {
        if ([[self.networkBuffer objectAtIndex:1]isEqualToString:@"FD"] || [[self.networkBuffer objectAtIndex:1]isEqualToString:@"FB"] || [[self.networkBuffer objectAtIndex:1]isEqualToString:@"FE"] || [[self.networkBuffer objectAtIndex:1]isEqualToString:@"FA"]) {

            //most negotiation options are 3 bytes long
            int indexToRemoveFromBuffer = 3;

            //if FA then they are longer then 3 bytes
            if ([[self.networkBuffer objectAtIndex:1]isEqualToString:@"FA"]) {
                //look for indicator of END (F0)
                indexToRemoveFromBuffer = [self.networkBuffer indexOfObject:@"F0"]+1;

            }

            //remove these bytes from networkbuffer
            self.networkBuffer = [NSMutableArray arrayWithArray:[self.networkBuffer subarrayWithRange:NSMakeRange(indexToRemoveFromBuffer, [self.networkBuffer count]-indexToRemoveFromBuffer)]];

            if ([self.networkBuffer count] == 0) {
                if (self.isLoggedIn) {
                    [self.socket readDataToData:[GCDAsyncSocket CRLFData] withTimeout:-1 tag:0];//CRLFData
                }else{
                    [self.socket readDataWithTimeout:-1 tag:0];
                }
                return;
            }
        }else{
            break;
        }
} 
```

# java - 尝试访问不存在的页面时，我可以重定向到有效的 Wicket 页面吗？

> ID：13477568
> 
> 赞同：2
> 
> 时间：2012-11-20T16:25:37.673
> 
> 标签：java, google-app-engine, wicket, http-status-code-404

**介绍**

如果我的 Apache Wicket Web 应用程序（在 GAE/J 上运行）的用户尝试访问不存在的页面，例如：

```
http://[MyURL]/admin/PageSubscribeX 
```

Web 框架记录以下警告：

```
org.apache.wicket.core.util.lang.WicketObjects resolveClass: Could not resolve class [[...].admin.PageSubscribeX]
java.lang.ClassNotFoundException: [...].admin.PageSubscribeX
    at com.google.appengine.runtime.Request.process-78915baf06af5f31(Request.java)
    at java.lang.Class.forName(Class.java:133)
    at org.apache.wicket.application.AbstractClassResolver.resolveClass(AbstractClassResolver.java:108)
    at org.apache.wicket.core.util.lang.WicketObjects.resolveClass(WicketObjects.java:71)
    at org.apache.wicket.core.request.mapper.AbstractComponentMapper.getPageClass(AbstractComponentMapper.java:139)
    at org.apache.wicket.core.request.mapper.PackageMapper.parseRequest(PackageMapper.java:148)
    ...
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:458)
    at java.lang.Thread.run(Thread.java:679) 
```

GAE/J 以错误 404 page 和 text 响应`Error: NOT_FOUND`。

我知道目前使用 GAE/JI “当没有为 URL 定义 servlet 映射时，无法自定义 404 响应页面”。

**我的问题**

当没有为 URL 定义 servlet 映射时，有什么方法可以为响应指定 Wicket 页面？或者，是否可以定义一些 servlet 映射来将“所有未找到的 URL”映射到我选择的 Wicket 页面？

我的软件环境是：

*   检票口：6.2.0
*   GAE/J：1.7.3
*   爪哇：1.6.0_37。

**一次失败的尝试**

根据@biziclop 的评论，我尝试了以下方法，但失败了。我得到的只是我的错误页面 PageError 每次都显示....

我的代码`WebApplication#init()`是：

```
ICompoundRequestMapper crmRoot = getRootRequestMapperAsCompound();
URLNotFoundMapper mapperURLNotFound = new URLNotFoundMapper(null,
 PageError.class);
crmRoot.add(mapperURLNotFound);
setRootRequestMapper(crmRoot); 
```

我的新映射器`URLNotFoundMapper`是

```
/**
 * This mapper class is intended to be the mapper of last resort, to be used
 * if all other mappers cannot handle the URL of the current request.
 * <br/>
 * This mapper will cause a defined (error) page to be shown.
 */
public class URLNotFoundMapper extends BookmarkableMapper
{
  private IRequestMapper m_rmRoot = null;
  private Class<? extends IRequestablePage> m_classPage = null;

  /**
   * Constructor.
   * @param rmRoot
   *   The application's previous root request mapper.
   *   If this is <code>null</code> then it is ignored.
   * @param clError
   *   The class of the page which should handle erroneous requests.
   *   This must not be <code>null</code>.
   */
  public URLNotFoundMapper(IRequestMapper rmRoot,
   final Class<? extends IRequestablePage> clError)
  {
    m_rmRoot = rmRoot;
    m_classPage = clError;
  }

  /**
   * Use this mapper as the last option.
   * So let all other mappers try to handle the request first.
   * @param request
   *   The request.
   * @return
   *   The score of the application's previous root request mapper.
   */
  @Override
  public int getCompatibilityScore(Request request)
  {
    return Integer.MIN_VALUE;
  }

  /**
   * This method returns an <code>IRequestHandler</code> for the bookmarkable
   * error page.
   * @param request
   * @return
   *   An <code>IRequestHandler</code> capable of processing a bookmarkable
   *   request.
   *
   */
  @Override
  public IRequestHandler mapRequest(Request request)
  {
    IRequestHandler rhResult = null;
    if (m_rmRoot != null)
      rhResult = m_rmRoot.mapRequest(request);

    if (rhResult != null)
      rhResult = null;    // Another mapper can handle this
    else
    {
      rhResult = processBookmarkable(m_classPage, null);
    }

    return rhResult;
  }

  @Override
  public Url mapHandler(IRequestHandler requestHandler)
  {
    Url urlResult = null;
    if (m_rmRoot != null)
      urlResult = m_rmRoot.mapHandler(requestHandler);

    if (urlResult != null)
      urlResult = null;    // Another mapper can handle this
    else
    {
      PageInfo info = new PageInfo();
      UrlInfo urlInfo = new UrlInfo(new PageComponentInfo(info, null),
       m_classPage, null);
      urlResult = buildUrl(urlInfo);
    }

    return urlResult;
  }

  /**
   * @return
   *   The URL info for the bookmarkable error page.
   */
  @Override
  protected UrlInfo parseRequest(Request request)
  {
    UrlInfo uiResult = null;
    uiResult = new UrlInfo(null, m_classPage, null);
    return uiResult;
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T22:43:05.357

你需要在你的 webapp 中配置 404 http 错误，看看[这里](http://www.mkyong.com/wicket/how-do-configure-404-error-page-in-wicket-solution)

提问者从上面的链接摘录是：

```
<error-page>
  <error-code>404</error-code>
  <location>/[URI portion to point to a customer error page]</location>
</error-page> 
```

# ios - iOS模拟器底部的删除/折叠栏

> ID：13477569
> 
> 赞同：0
> 
> 时间：2012-11-20T16:25:45.503
> 
> 标签：ios, testing, webdriver, simulator

我可以使用 webdriver 在 iOS 模拟器上成功运行测试，我唯一担心的是屏幕底部有一个栏，它会阻止整个屏幕显示。它不会导致测试失败，只是想知道是否有办法删除/折叠它以便显示整个屏幕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T17:08:23.577

如果您使用的是 Uitabbar，那么您可以使用：

```
[self hideTabBar:your tabbarcontroller];//call to hide the tabbar;
[self showTabBar:your tabbarcontroller];//call to show the tabbar;

  - (void)hideTabBar:(UITabBarController *) myTabbarController
    {
       [UIView beginAnimations:nil context:NULL];
       [UIView setAnimationDuration:0.5];

       for(UIView *myView in myTabbarController.view.subviews)
          {
             if([myView isKindOfClass:[UITabBar class]])
               {
                  [myView setFrame:CGRectMake(myView.frame.origin.x, 480,
                   myView.frame.size.width,
                    myView.frame.size.height)];
                } 
               else 
                  {
                       [myView setFrame:CGRectMake(myView.frame.origin.x, 
                        myView.frame.origin.y,  
                        myView.frame.size.width, 480)];
                   }
           }

             [UIView commitAnimations];   
        }

   - (void)showTabBar:(UITabBarController *) tabbarcontroller
      {       
        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration:0.5];
        for(UIView *view in tabbarcontroller.view.subviews)
          {

            if([view isKindOfClass:[UITabBar class]])
             {
                [view setFrame:CGRectMake(view.frame.origin.x, 431, view.frame.size.width,
                view.frame.size.height)];

              } 
            else 
              {
                [view setFrame:CGRectMake(view.frame.origin.x, view.frame.origin.y, 
                  view.frame.size.width, 431)];
              }
           }

          [UIView commitAnimations]; 
       } 
```

# jquery - 从 JSON 文件生成的 jQuery DataTables 链接（服务器端）

> ID：13477580
> 
> 赞同：1
> 
> 时间：2012-11-20T16:26:38.813
> 
> 标签：jquery, json, datatables, jquery-datatables

我有一个按预期完美运行的 DataTable，但我在生成 JSON 文件时做了一些作弊。我希望一些记录链接到另一个页面，并通过将 href 标记包含到 JSON 中来实现。尽管这可行，但我真的不认为这是编写此代码的最佳方式，并且我认为这可能会导致将来更长的加载时间，届时数据库将充满数千条记录。

数据表代码：

```
 <script type="text/javascript">
            $(document).ready( function() {
          var oTable = $('#alle_spellen').dataTable( {
            "sAjaxSource": "json.php",
            "aoColumns": [
              { "mData": "kaarting"},
              { "mData": "speler" },
              { "mData": "punten",  "sClass" : "right",
                "sType": "numeric",
                "mRender":  function ( data, type, full ) {
                  if(data > 0) return "<div class='positive'>" + data + "</div>"; 
                  return "<div class='negative'>" + data + "</div>";}
            }],
          })
        } );        
 $(document).ready(function() {});
 </script> 
```

JSON 文件（仅 2 条记录为例）：

```
 [
     {
         "kaarting": "<a href="datatable_xtabelspel.php?id=id1" Text which includes id1 </a>",
         "speler": "Arne",
         "punten": "17"
     },
     {
         "kaarting": "<a href="datatable_xtabelspel.php?id=id2" Text which includes id2 </a>",
         "speler": "Filip",
         "punten": "-7"
     }
 ] 
```

如何更改我的脚本以链接到适当的页面（包括 db id），并拥有这样的 JSON：

```
 [
     {
         "kaarting": "Text which includes id1",
         "speler": "Arne",
         "punten": "17"
     },
     {
         "kaarting": "Text which includes id2",
         "speler": "Filip",
         "punten": "-7"
     }
 ] 
```

谢谢！

# jquery - jQuery 是否重写了我的 CSS 属性？

> ID：13477583
> 
> 赞同：0
> 
> 时间：2012-11-20T16:26:46.993
> 
> 标签：jquery, ajax

我有一个搜索结果网页，它将结果分成多个页面。当用户从一个搜索结果页面导航到下一个搜索结果页面时，我没有重新加载整个页面，而是使用 jQuery ajax 调用来获取页面（通过“GET”请求），提取包含搜索结果的元素，然后换掉html。

这很好用，但我发现我的 background-image CSS 属性有问题。一些背景图像名称包含空格，因此我将 url 用引号括起来，如下所示：

```
<div style="position: absolute; right: 0; bottom: 0; 
            width: 30px; height: 30px; 
            background-image: url('Images/Image One_small.png');
            background-repeat: no-repeat;" 
     title="Image One">
</div> 
```

但是，当我通过 jQuery 函数重新加载 HTML 元素时`.html()`，似乎 HTML 被重新格式化（包括去除引号），如下所示：

```
<DIV style="BACKGROUND-IMAGE: url(Images/Icons/Image One_small.png); POSITION: absolute; WIDTH: 30px; BOTTOM: 0px; BACKGROUND-REPEAT: no-repeat; HEIGHT: 30px; RIGHT: 0px" title="Image One"></DIV> 
```

Chrome 似乎处理得很好，但 IE8 令人窒息（无法解析背景图像）。

该`html()`函数是否重写 HTML 或 CSS 属性？如果是这样，是否有更好的解决方案？我不想重命名图像，因为名称是由用户输入驱动的（可以合法地包含空格）。

这是我的ajax调用：

```
var l_url = "SearchResults.aspx?pg=" + pageNo;
$.ajax({
    type: "GET",
    dataType: "html",
    url: l_url,
    beforeSend: function(jqXHR, settings) {
        $("#WhiteoutDiv").css("display", "block");
    },
    success: function(data, textStatus, jqXHR) {
        $("#SearchResultsDiv").html($("#SearchResultsDiv", data).html());
        $("#WhiteoutDiv").css("display", "none");
        // The below line is for debugging. It selects one of the search result
        // elements and displays the html so I can see what's going on. Chrome's
        // developer tools give conflicting results.
        alert($(".ReportItem", data).html());
    },
    error: function(textStatus, jqXHR) {
        window.location = l_url;
    }
}) 
```

**附录**

需要明确的是，在通过 jQuery AJAX 重新加载 DIV 之前，一切都运行良好（并且与我的旧的非 jQuery AJAX 实现完美运行）。路径正确，并且 CSS 带引号有效。将空格更改为“+”并不能解决问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T16:28:15.883

您应该始终使用`+`或`%20`代替 URL 中的空格：

```
<div style="background-image:url(/images/image+one.png);"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T18:40:21.817

[`.html()`在文档](http://api.jquery.com/html/)中找到了这个（重新阅读后）：

> This method uses the browser's innerHTML property. Some browsers may not return HTML that exactly replicates the HTML source in an original document. For example, Internet Explorer sometimes leaves off the quotes around attribute values if they contain only alphanumeric characters.

I think IE8 is responsible for mangling my HTML, not jQuery directly. I will have to re-engineer my solution to account for this.

# makefile - 使用 Cmake 创建 tar 存档

> ID：13477585
> 
> 赞同：7
> 
> 时间：2012-11-20T16:26:56.440
> 
> 标签：makefile, cmake

我在我的 CMakeLists.txt 文件中使用 *_OUTPUT_PATH 变量来指定我的二进制文件和库文件的特定位置，这似乎是“自动”工作的

我希望作为“构建”的一部分，以实现最后一步，即创建输出目录的二进制文件的 tarball。

我需要添加什么来创建焦油？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-20T18:38:04.930

您可以使用 CMake 自定义目标在命令模式下调用 CMake，并让它从输出目录中的二进制文件生成一个 tarball。这是一个概述必要步骤的 CMakeLists.txt：

```
project(TarExample)

set (EXECUTABLE_OUTPUT_PATH "${CMAKE_CURRENT_BINARY_DIR}/executables")
add_executable(foo foo.cpp)

add_custom_target(create_tar ALL COMMAND
    ${CMAKE_COMMAND} -E tar "cfvz" "executables.tgz" "${EXECUTABLE_OUTPUT_PATH}")
add_dependencies(create_tar foo) 
```

自定义目标从目录中的文件生成一个 gzip 压缩包`EXECUTABLE_OUTPUT_PATH`。该`add_dependencies`调用确保在最后一步创建 tarball。

要生成未压缩的 tarball，请使用选项`cfv`而不是`cfvz`.

# mysql - Mysql 语法错误 - Backtics 无法解决

> ID：13477588
> 
> 赞同：0
> 
> 时间：2012-11-20T16:27:04.370
> 
> 标签：mysql, syntax

我正在用 PHP 编译一个查询以在数据库中插入产品：

```
$query = "";

if ($A > 0) {$query .="INSERT INTO ped_prod (`ped_id`, `prod_id`, `cant`) VALUES ($last_id, 1, $A); ";}

if ($B > 0) {$query .="INSERT INTO ped_prod (`ped_id`, `prod_id`, `cant`) VALUES ($last_id, 2, $B); ";}

if ($C > 0) {$query .="INSERT INTO ped_prod (`ped_id`, `prod_id`, `cant`) VALUES ($last_id, 3, $C); ";} 
```

通过运行查询时`mysql_query($prodquery, $conexion)`出现以下错误：

```
You have an error in your SQL syntax;
check the manual that corresponds to your MySQL server version for the right syntax to use near
'INSERT INTO ped_prod (`ped_id`, `prod_id`, `cant`) VALUES (13, 3, 2)' at line 1 
```

我尝试过：
- 交换引号 (')、双引号 (") 和反引号 (`)
- 检查 MySQL 保留字列表
- 在 PHPmyAdmin 中运行查询（它显示“#1 受影响的行”，但它会将数据加载到表，在浏览器中执行脚本时不是这种情况）

我错过了什么？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:29:06.190

`mysql_query()`一次只支持一个查询。请参阅[相应的 PHP 文档](http://php.net/mysql_query)：

> mysql_query() 将唯一查询（*不支持多个查询*）发送到与指定链接标识符关联的服务器上当前活动的数据库。

因此，在您的情况下，只需单独运行每个`INSERT`语句就可以了。

另一种选择，因为你所有的插入都是相似的，是通过连接值子句来连接它们：

```
$values = array();
if ($A > 0) {$values[] ="($last_id, 1, $A)";}

if ($B > 0) {$values[] ="($last_id, 2, $B)";}

if ($C > 0) {$values[] ="($last_id, 3, $C)";}

// echo query if needed
if ( count( $values ) > 0 ) {
  $queries = 'INSERT INTO ped_prod (`ped_id`, `prod_id`, `cant`) VALUES ' . implode( ',', $values );

  // execute query
  //  ...
} 
```

^(此外，`mysql_X`函数已被弃用。切换到[PDO](http://php.net/pdo)或[mysqli](http://php.net/mysqli)。)

# android - Android如何创建指向我家的自定义指南针？

> ID：13477589
> 
> 赞同：-1
> 
> 时间：2012-11-20T16:27:05.607
> 
> 标签：android, geolocation, compass-geolocation

大家好，我正在开发一个应用程序，让[指南针](https://stackoverflow.com/questions/7715057/how-to-make-compass-point-to-my-particular-latitude-longitude-location-based-on)指向我的房子连接到指南针的纬度

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:34:53.560

你是怎么做到的？它是您家背景中的图像吗？因为您可以在背景中旋转图像，所以指南针会指向您的家

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T16:33:03.560

您可以使用位置管理器获取经度和纬度。更多信息在这里：[如何在 android 中获取移动设备的纬度和经度？](https://stackoverflow.com/questions/2227292/how-to-get-latitude-and-longitude-of-the-mobiledevice-in-android)

# android - 如何为 Android 应用程序创建导览

> ID：13477594
> 
> 赞同：6
> 
> 时间：2012-11-20T16:27:19.750
> 
> 标签：android

几个月前，我给自己买了一台 HTC ONE X。我很欣赏他们通过交互式小部件和帮助功能引导用户迈出手机第一步的方式。

我想将这种功能添加到我们正在构建的应用程序 Rogerthat 中，但我想知道是否有工具/库可以帮助我实现这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-20T17:51:52.250

Roman Nurik 组建了一个名为“Wizard Pager”的库来做这类事情。它可能被用来做你所要求的。

[https://plus.google.com/113735310430199015092/posts/6cVymZvn3f4](https://plus.google.com/113735310430199015092/posts/6cVymZvn3f4)

[http://code.google.com/p/romannurik-code/source/browse/misc/wizardpager](http://code.google.com/p/romannurik-code/source/browse/misc/wizardpager)

更新：

我想这也可能对你有帮助。这类似于首次在 ICS+ 中运行库存 Android rom 时显示的导览。

该库可以在任何版本的 Android 中使用：

[https://github.com/Espiandev/ShowcaseView](https://github.com/Espiandev/ShowcaseView)

如果您想要连续展示，可以查看此扩展：

[https://github.com/blundell/ShowcaseViewExample](https://github.com/blundell/ShowcaseViewExample)

![例子](../Images/86001ff48e18eb4808853dd68b0922c3.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-20T16:42:33.417

我为我的应用程序进行了导览，允许用户浏览 4 个笔记页面并查看说明。这是代码：

```
public static void tour(final Context context, final String title, final int pageNumber, 
                        final Drawable icon, final String[] pageMessage, final int[] layouts, final ViewGroup root) {
    Builder tourDialog = new AlertDialog.Builder(context);
    int nPage = 0;

    if (pageMessage!=null){
        tourDialog.setMessage(pageMessage[pageNumber]);
        nPage = pageMessage.length;
    }

    if (layouts!=null){         
        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Activity.LAYOUT_INFLATER_SERVICE);
        View layout1 = inflater.inflate(layouts[pageNumber], root);
        tourDialog.setView(layout1);
        //tourDialog.setView(views[pageNumber]);
        nPage = layouts.length;
    }

    tourDialog.setTitle(title+" (page "+(pageNumber+1)+"/"+nPage+")");

    tourDialog.setPositiveButton("Prev",
            new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int whichButton) {
                    tour(context, title,  pageNumber-1, icon, pageMessage,layouts, root);
                    return;
                }
            });

    tourDialog.setNeutralButton("Next",
            new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int whichButton) {
                    tour(context, title,  pageNumber+1, icon, pageMessage,layouts, root);
                    return;
                }
            });
    tourDialog.setNegativeButton("Ok",
            new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int whichButton) {
                    return;
                }
            });
    if (icon!=null)
        tourDialog.setIcon(icon);
    AlertDialog dialog = tourDialog.create();

    dialog.show();

    if (pageNumber==0)
        dialog.getButton(AlertDialog.BUTTON_POSITIVE).setEnabled(false);
    else if (pageNumber==nPage-1){
        dialog.getButton(AlertDialog.BUTTON_NEUTRAL).setEnabled(false); 
    }
} 
```

使用示例：

```
int[] layout = {R.layout.note1, R.layout.note2, R.layout.note3, R.layout.note4}; //resource id of each page's layout
tour(context, "Notes ", 0,getResources().getDrawable(R.drawable.gmpte_logo_25px),null, layout, (ViewGroup) findViewById(R.id.root)); 
```

以及笔记页面布局的示例：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:id="@+id/root"
  android:padding="10dip">

<TextView android:id="@+id/text_before"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:textColor="#FFF"
          android:textSize="16dp"
          android:text="@string/note1_before_text"
          android:layout_marginTop="10dp"/>
<ImageView android:id="@+id/image"
          android:contentDescription="@string/desc"
          android:src="@drawable/mylocation_blue"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_toRightOf="@+id/text_before"
          />
<TextView
    android:id="@+id/text_after"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/text_before"
    android:layout_below="@+id/image"
    android:text="@string/note1_after_text"
    android:textColor="#FFF"
    android:textSize="16dp" />
</RelativeLayout> 
```

您需要为每个笔记页面编写自己的布局，但`android:id="@+id/root"`在每个页面的根布局中使用相同的 id ( )。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-22T19:10:29.503

[Showcase View Library](https://github.com/Espiandev/ShowcaseView)绝对是您想要的：

![展示案例视图库](../Images/c44054986312b546dbd41522876d6ace.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T17:57:11.627

使用 ViewPager 和片段来显示帮助屏幕。你会发现很多关于它的信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-15T12:52:11.763

我写了一个小库，其中包含一个用于制作应用程序的简单组件。这仅限于我的情况，但也许可能是你的情况。Single LessonCardView 首次显示 onstartactivity 或按钮单击 任何批评、帮助或建议将不胜感激。谢谢 [https://github.com/dnocode/DnoLib](https://github.com/dnocode/DnoLib)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-18T15:33:16.737

你可以试试 TourGuide [http://worker8.github.io/TourGuide](http://worker8.github.io/TourGuide)

它是最新的（使用 Kotlin 1.2）并且运行良好。

我最近（2021 年）检查过的大多数替代方案要么不起作用，要么有问题。

TourGuide 并不完美（距离上次提交已经 3 年了），维护者似乎没有回应 PR 或问题。

# python - Rewind the file pointer to the beginning of the previous line

> ID：13477597
> 
> 赞同：3
> 
> 时间：2012-11-20T16:27:28.243
> 
> 标签：python, file, seek

I am doing text processing and using 'readline()' function as follows:

```
ifd = open(...)
for line in ifd:
   while (condition)
         do something...
         line = ifd.readline()
         condition = .... 
```

#Here when the condition becomes false I need to rewind the pointer so that the 'for' loop read the same line again.

ifd.fseek() followed by readline is giving me a '\n' character. How to rewind the pointer so that the whole line is read again.

```
>>> ifd.seek(-1,1)
>>> line = ifd.readline()
>>> line
'\n' 
```

### Here is my code

```
labtestnames = sorted(tmp)
#Now read each line in the inFile and write into outFile
ifd = open(inFile, "r")
ofd = open(outFile, "w")
#read the header
header = ifd.readline() #Do nothing with this line. Skip
#Write header into the output file
nl = "mrn\tspecimen_id\tlab_number\tlogin_dt\tfluid"
offset = len(nl.split("\t"))
nl = nl + "\t" + "\t".join(labtestnames)
ofd.write(nl+"\n")
lenFields = len(nl.split("\t"))

print "Reading the input file and converting into modified file for further processing (correlation analysis etc..)"

prevTup = (0,0,0)
rowComplete = 0
k=0
for line in ifd:
    k=k+1
    if (k==200): break

    items = line.rstrip("\n").split("\t")
    if((items[0] =='')):
        continue
    newline= list('' for i in range(lenFields))
    newline[0],newline[1],newline[3],newline[2],newline[4] = items[0], items[1], items[3], items[2], items[4]
    ltests = []
    ltvals = []
    while(cmp(prevTup, (items[0], items[1], items[3])) == 0): # If the same mrn, lab_number and specimen_id then fill the same row. else create a new row.
        ltests.append(items[6])
        ltvals.append(items[7])
        pos = ifd.tell()
        line = ifd.readline()
        prevTup = (items[0], items[1], items[3])
        items = line.rstrip("\n").split("\t")
        rowComplete = 1

    if (rowComplete == 1): #If the row is completed, prepare newline and write into outfile
        indices = [labtestnames.index(x) for x in ltests]
        j=0
        ifd.seek(pos)
        for i in indices:
            newline[i+offset] = ltvals[j]
            j=j+1

    if (rowComplete == 0): # 
        currTup = (items[0], items[1], items[3])
        ltests = items[6]
        ltvals = items[7]
        pos = ifd.tell()
        line = ifd.readline()
        items = line.rstrip("\n").split("\t")
        newTup = (items[0], items[1], items[3])
        if(cmp(currTup, newTup) == 0):
            prevTup = currTup
            ifd.seek(pos)
            continue
        else:
            indices = labtestnames.index(ltests)
            newline[indices+offset] = ltvals

    ofd.write(newline+"\n") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:33:01.600

The problem can be handled more simply using [itertools.groupby](http://docs.python.org/2/library/itertools.html#itertools.groupby). `groupby` can cluster all the contiguous lines that deal with the same mrn, specimen_id, and lab_num.

The code that does this is

```
for key, group in IT.groupby(reader, key = mykey): 
```

where `reader` iterates over the lines of the input file, and `mykey` is defined by

```
def mykey(row):
    return (row['mrn'], row['specimen_id'], row['lab_num']) 
```

Each row from `reader` is passed to `mykey`, and all rows with the same key are clustered together in the same `group`.

* * *

While we're at it, we might as well use the [csv module](http://docs.python.org/2/library/csv.html) to read each line into a dict (which I call `row`). This frees us from having to deal with low-level string manipulation like `line.rstrip("\n").split("\t")` and instead of referring to columns by index numbers (e.g. `row[3]`) we can write code that speaks in higher-level terms such as `row['lab_num']`.

* * *

```
import itertools as IT
import csv

inFile = 'curious.dat'
outFile = 'curious.out'

def mykey(row):
    return (row['mrn'], row['specimen_id'], row['lab_num'])

fieldnames = 'mrn specimen_id date    lab_num Bilirubin   Lipase  Calcium Magnesium   Phosphate'.split()

with open(inFile, 'rb') as ifd:
    reader = csv.DictReader(ifd, delimiter = '\t')
    with open(outFile, 'wb') as ofd:
        writer = csv.DictWriter(
            ofd, fieldnames, delimiter = '\t', lineterminator = '\n', )
        writer.writeheader()
        for key, group in IT.groupby(reader, key = mykey):
            new = {}
            row = next(group)
            for key in ('mrn', 'specimen_id', 'date', 'lab_num'):
                new[key] = row[key]
                new[row['labtest']] = row['result_val']                
            for row in group:
                new[row['labtest']] = row['result_val']
            writer.writerow(new) 
```

yields

```
mrn specimen_id date    lab_num Bilirubin   Lipase  Calcium Magnesium   Phosphate
4419529 1614487 26.2675 5802791G    0.1             
3319529 1614487 26.2675 5802791G    0.3 153 8.1 2.1 4
5713871 682571  56.0779 9732266E                    4.1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:18:22.093

This seems to be a perfect use case for [yield expressions](http://docs.python.org/2/reference/expressions.html#yield-expressions). Consider the following example that prints lines from a file, repeating some of them at random:

```
def buflines(fp):
    r = None
    while True:
        r = yield r or next(fp)
        if r:
            yield None

from random import randint

with open('filename') as fp:
    buf = buflines(fp)
    for line in buf:
        print line
        if randint(1, 100) > 80:
            print 'ONCE AGAIN::'
            buf.send(line) 
```

Basically, if you want to process an item once again, you `send` it back to the generator. On the next iteration you will be reading the same item once again.

# wpf - 在 XAML 中为矩形定义控件模板

> ID：13477598
> 
> 赞同：0
> 
> 时间：2012-11-20T16:27:28.553
> 
> 标签：wpf, controltemplate, rectangles

在我当前的项目中，我有这个 XAML 文件，我在其中定义了必须应用于不同类型的自定义小部件的视觉样式。

例如，'DirectLineButton'（继承自 WPF 的 Button 的自定义类）的样式如下：

```
 <Style x:Key="DirectLineButtonTemplate" TargetType="{x:Type View:DirectLineButton}">
<Setter Property="SnapsToDevicePixels" Value="true"/>
<Setter Property="OverridesDefaultStyle" Value="true"/>
<Setter Property="MinHeight" Value="23"/>
<Setter Property="MinWidth" Value="75"/>
<Setter Property="Template">
    <Setter.Value>
    <ControlTemplate TargetType="{x:Type Button}">
        <Border x:Name="MyBorder"  
               CornerRadius="2" 
               BorderThickness="2"
               Background="Gold"
               BorderBrush="Gray">
        <ContentPresenter Margin="2"
             HorizontalAlignment="Center"
             VerticalAlignment="Center"
             RecognizesAccessKey="True"/>
        </Border>
        <ControlTemplate.Triggers>
        <Trigger Property="View:DirectLineButton.State" Value="DirectLineAvailable">
            <Setter TargetName="MyBorder" Property="Background" Value="Gold"/>
        </Trigger>
        <Trigger Property="View:DirectLineButton.State" Value="DirectLineIdle">
            <Setter  TargetName="MyBorder" Property="Background" Value="Silver"/>
        </Trigger>
        <Trigger Property="View:DirectLineButton.State" Value="DirectLineBusy">
            <Setter  TargetName="MyBorder" Property="Background" Value="Green"/>
        </Trigger>
        <Trigger Property="View:DirectLineButton.State" Value="DirectLineCalled">
            <Setter  TargetName="MyBorder" Property="Background" Value="LightBlue"/>
        </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>
    </Setter.Value>
</Setter>
</Style> 
```

现在，我需要通过定义 Rectangle 的样式来复制这个想法。不幸的是，当我尝试为矩形定义 ControlTemplate 时，WPF 会标记一条错误消息，您能建议解决此问题的方法吗？请参阅下面我尝试尝试的代码：

```
 <Style x:Key="MyRectangleTemplate" TargetType="{x:Type Rectangle}">
<Setter Property="SnapsToDevicePixels" Value="true"/>
<Setter Property="OverridesDefaultStyle" Value="true"/>
<Setter Property="MinHeight" Value="23"/>
<Setter Property="MinWidth" Value="75"/>
<Setter Property="Template">
    <Setter.Value>
    <ControlTemplate TargetType="{x:Type Rectangle}">
        <Border x:Name="MyBorder"  
               CornerRadius="2" 
               BorderThickness="2"
               Background="Gold"
               BorderBrush="Gray">
        <ContentPresenter Margin="2"
             HorizontalAlignment="Center"
             VerticalAlignment="Center"
             RecognizesAccessKey="True"/>
        </Border>
        <ControlTemplate.Triggers>
        <Trigger Property="View:DirectLineButton.State" Value="DirectLineAvailable">
            <Setter TargetName="MyBorder" Property="Background" Value="Gold"/>
        </Trigger>
        <Trigger Property="View:DirectLineButton.State" Value="DirectLineIdle">
            <Setter  TargetName="MyBorder" Property="Background" Value="Silver"/>
        </Trigger>
        <Trigger Property="View:DirectLineButton.State" Value="DirectLineBusy">
            <Setter  TargetName="MyBorder" Property="Background" Value="Green"/>
        </Trigger>
        <Trigger Property="View:DirectLineButton.State" Value="DirectLineCalled">
            <Setter  TargetName="MyBorder" Property="Background" Value="LightBlue"/>
        </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>
    </Setter.Value>
</Setter>
</Style> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:37:36.160

嗨，您必须仅使用 Border 来完成。仅继承 FrameworkElement 的控件可以具有 Template 。但是 Rectangle 、 Line 等是较轻的版本，它们只继承 UIElement 而不是 FrameworkElement。我希望这会有所帮助。结论：矩形没有模板属性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T16:38:39.037

您不能为 a 定义控件模板`Rectangle`，因为它不是控件，而是 a `Shape`。您只能为从`Control`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T01:53:02.760

您应该
1) 使用 a `Style`(不是 a `ControlTemplate`) 具有圆形边框。
2）`Trigger`在你的风格中使用。

以下 Xaml 应该让您更接近您的目标：

```
 <Style x:Key="MyRectangleStyle" TargetType="{x:Type Rectangle}">
       <Setter Property="SnapsToDevicePixels" Value="true"/>
       <Setter Property="OverridesDefaultStyle" Value="true"/>
       <Setter Property="MinHeight" Value="23"/>
       <Setter Property="MinWidth" Value="75"/>
        <Setter Property="Fill" Value="Blue"/>

       <Setter Property="RadiusX" Value="2" />
       <Setter Property="RadiusY" Value="2" />

  <Style.Triggers>
    <DataTrigger Binding="{Binding DirectLineState}" 
                        Value="{x:Static l:DLS.Available}">
        <Setter Property="Fill" Value="Gold"/>
    </DataTrigger>
    <DataTrigger Binding="{Binding DirectLineState}" 
                        Value="{x:Static l:DLS.Idle}" >
        <Setter Property="Fill" Value="Silver"/>
    </DataTrigger >
    <DataTrigger Binding="{Binding DirectLineState}"                            
                         Value="{x:Static l:DLS.Available}">
        <Setter Property="Fill" Value="Green"/>
    </DataTrigger >
    <DataTrigger Binding="{Binding DirectLineState}" 
                         Value="{x:Static l:DLS.Called}">
        <Setter  Property="Fill" Value="LightBlue"/>
    </DataTrigger >
  </Style.Triggers>
</Style> 
```

（请注意：
1）我更改了“MyRectangleStyle”的键。
2）如果您希望这`Style`是默认值`Style`，请不要给它一个`Key`，而只是一个`TargetType`...
3）...或将其设置`Key`为`"{x:Type Rectangle}"`. msdn 似乎更喜欢这种方式。
顺便说一句：您不应该在公共属性上使用 DataTriggers 而不是 Triggers 吗？但我不知道您的应用程序的整个架构。)

Rq ：要使上面的代码正常工作，您需要：
1) 一个名为 DirectLineState 的公共财产`NotifyPropertyChanged`在更改时引发。
2）`enum`在项目的单独文件（如类）中定义的称为 DLS
3）您需要“l”作为您的项目名称空间。

```
 <xmlns:l="clr-namespace:MyProjectNameSpace" > 
```

4）分配`Style`和设置适当`DataContext`的`Rectangle`

# php - 获取请求 URI PHP

> ID：13477607
> 
> 赞同：2
> 
> 时间：2012-11-20T16:27:53.003
> 
> 标签：php, wordpress

我对在我的 wordpress 应用程序中获取 URI 感到震惊，并且缺乏 PHP 知识使我的进度缓慢。我有这个网址

```
http://abc.com/my-blog/abc/cde 
```

我需要创建一个类似的 URL

```
http://abc.com/my-blog/added-value/abc/cde 
```

我的 wordpress 博客的 URL在哪里 `http://abc.com/my-blog`，我可以使用以下方法轻松获取

```
home_url() 
```

我可以使用 PHP`$_SERVER["REQUEST_URI"]`来获取请求 URI，它将作为

```
/my-blog/abc/cde 
```

而且我没有根据我的要求直接增加价值的方法

有什么方法可以在 PHP 或 Wordpress 中轻松实现这一点，我可以获得以下信息

1.  主页网址
2.  URL 的其余部分

所以最后我可以做以下

```
Home-URL+ custom-value+Rest part of the URL 
```

我的困惑

1.  在我的本地设置`$_SERVER["REQUEST_URI"]`中，wordpress 的安装目录`/my-blog/abc/cde`在哪里`/my-blog`，我可以轻松跳过第一级。
2.  在生产服务器上，它与`/my-blog`不会成为 URL 的一部分不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T16:40:07.637

非常简短：

```
<?php

$url = "http://abc.com/my-blog/abc/cde";

$parts = parse_url($url);

$path = explode("/", $parts["path"]);
array_splice($path, 2, 0, array("added-part")); //This line does the magic!

echo $parts["scheme"] . "://" . $parts["host"] . implode("/",$path); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T16:38:06.547

好的，所以如果`$addition`是您想要的中间位，并且`$uri`是您从中获得的`$_SERVER["REQUEST_URI"]`...

```
$addition = "MIDDLEBIT/";
$uri = "/my-blog/abc/cde";

$parts = explode("/",$uri);
$homeurl = $parts[1]."/";
for($i=2;$i<count($parts);$i++){
    $resturl .= $parts[$i]."/";
}
echo $homeurl . $addition . $resturl; 
```

应该打印：

> 我的博客/MIDDLEBIT/abc/cde/

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T16:41:18.737

您可能想要使用爆炸或其他一些刺痛功能。下面的一些例子：

```
 $urlBits = explode($_SERVER["REQUEST_URI"]);

  //blog address
  $blogAddress = $urlBits[0];

  //abc
  $secondPartOfUri = $urlBits[1];

  //cde
  $thirdPartOfUri = $urlBits[2];

  //all of uri except your blog address
  $uri = str_replace("/my-blog/", "", $_SERVER["REQUEST_URI"]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-18T12:23:06.150

这是在 PHP 中获取当前 url 的可靠方法。

```
 public static function getCurrentUrl($withQuery = true)
    {
        $protocol = stripos($_SERVER['SERVER_PROTOCOL'], 'https') === false ? 'http' : 'https';
        $uri = $protocol . '://' . $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI'];

        return $withQuery ? $uri : str_replace('?' . $_SERVER['QUERY_STRING'], '', $uri);
    } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-20T16:37:03.517

您可以使用 wordpress 和[get_home_url()将主页 url 存储在变量中](http://codex.wordpress.org/Function_Reference/get_home_url)

```
$home_url = get_home_url();

$custom_value = '/SOME_VALUE';

$uri = $_SERVER['REQUEST_URI'];

$new_url = $home_url . $custom_value . $uri; 
```

# html - 自定义复选框外观的样式标签？

> ID：13477609
> 
> 赞同：1
> 
> 时间：2012-11-20T16:27:55.337
> 
> 标签：html, css, checkbox, label

我怎样才能使[这个](http://www.jsfiddle.net/a8Tk3/1/)自定义复选框（来自我[昨天](https://stackoverflow.com/questions/13465507/css-only-checkbox-with-content-attribute)的帖子）在 Firefox 上工作？似乎可以通过使用个性化标签并隐藏复选框，但我不知道该怎么做。

请，如果您需要更多详细信息来帮助我，请告诉我。

编辑

现在[完成了](http://www.jsbin.com/iqobiy/3/)。

# xslt - XSLT：将每个第三个 div 包装在一个 div 中

> ID：13477621
> 
> 赞同：2
> 
> 时间：2012-11-20T16:28:35.887
> 
> 标签：xslt, umbraco

我正在寻找一些正确编码的 XSLT（用于 Umbraco CMS），但我有点难过。我想做的是：

**从某个节点开始，将每个子节点放入一个div；对于每 3 个孩子，包装在一个父 div 中。**

我尝试实现一个结构，而不是我的混乱`for-each`,`choose`和声明，但我似乎无法掌握它的窍门；所以这是我现在对 XSLT 的混乱（我确信这是不好的做法并且对性能很糟糕，但我现在真的不知道该怎么做）：`when``apply-template`

```
<div class="row four">
<h2>Smart Phones <a href="#" class="see-all">see all smart phones &rarr;</a></h2>
<div class="row three"> <!-- This div should be created again for every 3 divs -->
        <xsl:for-each select="umbraco.library:GetXmlNodeById('1063')/descendant::*[@isDoc and string(showInMainNavigation) = '1']">
            <xsl:choose>
                <xsl:when test="position() &lt; 3">
                    <div class="col">
                        <a href="{umbraco.library:NiceUrl(./@id)}">
                            <img class="phonePreviewImg" src="{./previewImage}" style="max-width:117px; max-height:179px;" />
                            <h4 class="phoneTitle"><xsl:value-of select="./@nodeName" />/h4>
                            <p class="phonePrice">$<xsl:value-of select="./price" /></p
                        </a>
                     </div>
                 </xsl:when>

                 <xsl:when test="position() = 3"> <!-- set this div to include class of `omega` -->
                    <div class="col omega">
                        <a href="{umbraco.library:NiceUrl(./@id)}">
                            <img class="phonePreviewImg" src="{./previewImage}" style="max-width:117px; max-height:179px;" />
                            <h4 class="phoneTitle"><xsl:value-of select="./@nodeName" />/h4>
                            <p class="phonePrice">$<xsl:value-of select="./price" /></p
                        </a>
                     </div>
                 </xsl:when>                                                                                
             </xsl:choose>
         </xsl:for-each>
     </div> <!-- End Row Three -->
</div> <!-- End Row Four --> 
```

显然，这段代码不会产生“每三个换行一次”。谁能阐明我需要做些什么来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:47:39.927

**更新**- 改进了答案

我想不出使用模板的优雅解决方案，但是这个带有循环的笨重的解决方案可以工作：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:template name="render">
    <xsl:param name="node"/>
    <xsl:param name="last"/>
    <div>
      <xsl:if test="$last">
        <xsl:attribute name="class">
          <xsl:text>omega</xsl:text>
        </xsl:attribute>
      </xsl:if>
      <xsl:value-of select="$node"/>
    </div>
  </xsl:template>

  <xsl:template match="/*">
    <root>
      <xsl:variable name="nodes" select="*[not(@skip)]"/>
      <xsl:for-each select="$nodes">
        <xsl:if test="(position() mod 3)=1">
          <xsl:variable name="position" select="position()"/>
          <div>
            <xsl:call-template name="render">
              <xsl:with-param name="node" select="."/>
              <xsl:with-param name="last" select="false()"/>
            </xsl:call-template>
            <xsl:if test="$nodes[$position+1]">
              <xsl:call-template name="render">
                <xsl:with-param name="node" select="$nodes[$position+1]"/>
                <xsl:with-param name="last" select="false()"/>
              </xsl:call-template>
            </xsl:if>
            <xsl:if test="$nodes[$position+2]">
              <xsl:call-template name="render">
                <xsl:with-param name="node" select="$nodes[$position+2]"/>
                <xsl:with-param name="last" select="true()"/>
              </xsl:call-template>
            </xsl:if>
          </div>
        </xsl:if>
      </xsl:for-each>
    </root>
  </xsl:template>

</xsl:stylesheet> 
```

应用于：

```
<root>
  <node>1</node>
  <node skip="1">to be skipped</node>
  <node>2</node>
  <node>3</node>
  <node skip="1">to be skipped</node>
  <node skip="1">to be skipped</node>
  <node>4</node>
  <node skip="1">to be skipped</node>
  <node>5</node>
  <node>6</node>
  <node>7</node>
  <node skip="1">to be skipped</node>
</root> 
```

产生：

```
<root>
  <div>
    <div>1</div>
    <div>2</div>
    <div class="omega">3</div>
  </div>
  <div>
    <div>4</div>
    <div>5</div>
    <div class="omega">6</div>
  </div>
  <div>
    <div>7</div>
  </div>
</root> 
```

您需要将`select`用于设置`$nodes`变量的 XPath 替换为选择所需节点的 XPath，并将`render`模板替换为生成每个节点所需的结果所需的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T17:46:26.250

**就像这样简单而简短**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="num[position() mod 3 = 1]">
   <div>
       <xsl:apply-templates mode="inGroup"
         select=".|following-sibling::*[not(position() >2)]"/>
   </div>
 </xsl:template>

 <xsl:template match="num" mode="inGroup">
  <p><xsl:apply-templates mode="inGroup"/></p>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：**

```
<nums>
  <num>01</num>
  <num>02</num>
  <num>03</num>
  <num>04</num>
  <num>05</num>
  <num>06</num>
  <num>07</num>
  <num>08</num>
  <num>09</num>
  <num>10</num>
</nums> 
```

**产生了想要的正确结果：**

```
<div>
   <p>01</p>
   <p>02</p>
   <p>03</p>
</div>
<div>
   <p>04</p>
   <p>05</p>
   <p>06</p>
</div>
<div>
   <p>07</p>
   <p>08</p>
   <p>09</p>
</div>
<div>
   <p>10</p>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T17:29:20.140

这是一个使用模板的优雅解决方案。

**当这个 XSLT：**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output omit-xml-declaration="yes" indent="yes" />
  <xsl:strip-space elements="*" />

  <xsl:param name="pNumInGroup" select="3" />

  <xsl:template match="/*">
    <html>
      <xsl:apply-templates select="*[position() mod $pNumInGroup = 1]" />
    </html>
  </xsl:template>

  <xsl:template match="node">
     <div>
        <xsl:for-each
          select=".|following-sibling::*[not(position() &gt; $pNumInGroup - 1)]">
          <div>
            <xsl:apply-templates />
          </div>
        </xsl:for-each> 
     </div>
  </xsl:template>

</xsl:stylesheet> 
```

**...应用于@MiMo 提供的示例 XML：**

```
<root>
  <node>1</node>
  <node>2</node>
  <node>3</node>
  <node>4</node>
  <node>5</node>
  <node>6</node>
  <node>7</node>
</root> 
```

**...产生了正确的结果：**

```
<html>
  <div>
    <div>1</div>
    <div>2</div>
    <div>3</div>
  </div>
  <div>
    <div>4</div>
    <div>5</div>
    <div>6</div>
  </div>
  <div>
    <div>7</div>
  </div>
</html> 
```

**如果参数值改为`5`：**

```
<xsl:param name="pNumInGroup" select="5" /> 
```

**...仍然产生正确的结果：**

```
<html>
  <div>
    <div>1</div>
    <div>2</div>
    <div>3</div>
    <div>4</div>
    <div>5</div>
  </div>
  <div>
    <div>6</div>
    <div>7</div>
  </div>
</html> 
```

**解释：**

*   `pNumInGroup`我们在文档顶部定义了一个参数（默认值为`3`）。这很有用，因为它允许更灵活地使用 XSLT（即，如果您需要`<div>`每组不同数量的元素，只需将它们作为参数传递）。
*   第一个模板匹配根节点，重新创建它，并告诉 XSLT 处理器将模板应用到每个分组的第一个元素（如果需要，[这里是模运算的复习）。](http://en.wikipedia.org/wiki/Modular_arithmetic)
*   第二个模板匹配`<node>`前一个模板选择的元素。对于每一个，`<div>`都会创建一个新元素，并用适合该包装组的剩余项目填充。

**注意：**`<xsl:for-each>`除非我*真的*需要它，否则我通常会远离它；在最后一个模板的情况下，我真的不需要它（我可以很容易地`<div>`用另一个模板指定包装/辅助逻辑）。但是，为了“清晰”而不是过度模板化 XSLT，我选择了这条路线。

# javascript - 用于暂停电影流的 Javascript 命令？

> ID：13477622
> 
> 赞同：0
> 
> 时间：2012-11-20T16:28:35.387
> 
> 标签：javascript

我需要一个 Javascript 命令来暂停从 Putlocker 嵌入的视频流，只要弹出特定的 DIV。

这是一个适用于 JWPlayer 的示例

```
var interval = setInterval(function(){
 if (document.getElementById("gw-node-overlay"){ 
      jwplayer().stop(); 
      clearInterval(interval);
 }}, 1000); 
```

编辑：视频是 iframed。例子：`<iframe src="http://www.putlocker.com/embed/#####" width="700" height="360" frameborder="0" scrolling="no"></iframe>`

# drupal - 如何在 Drupal 7 中将 span 标签添加到某个自定义菜单链接？

> ID：13477629
> 
> 赞同：5
> 
> 时间：2012-11-20T16:28:59.050
> 
> 标签：drupal, drupal-7

我试图弄清楚如何将跨度标签添加到自定义菜单中的某个菜单链接。我只需要在自定义菜单链接中的一个链接上使用它。猜测预处理函数并尝试`theme_menu_item_link()`没有运气，似乎根本没有被调用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-12T11:20:02.077

在下面找到解决方案。

请注意，如果您使用的是[Superfish](http://drupal.org/project/superfish)模块，`theme_menu_link()`则在这种情况下将不起作用，因此请`theme_superfish_menu_item_link`改用。

**德鲁巴 7**

```
/*
 * Implements theme_menu_link().
 */
 function THEME_menu_link(array $variables) {
  $element = $variables['element'];
  $sub_menu = '';

  if ($element['#below']) {
    $sub_menu = drupal_render($element['#below']);
  }

  $element['#localized_options']['html'] = TRUE;
  $linktext = '<span class="tab-inner">' . $element['#title'] . '</span>';

  $output = l($linktext, $element['#href'], $element['#localized_options']);
  return '<li' . drupal_attributes($element['#attributes']) . '>' . $output . $sub_menu . "</li>\n";
} 
```

**Drupal 7（带有 Superfish）**

```
/*
 * Implements theme_superfish_menu_item_link().
 *  Theme a superfish menu item link,
 *  to override menu item to insert span tags
 */
function THEME_superfish_menu_item_link(array $variables) {
  $menu_item = $variables['menu_item'];
  $link_options = $variables['link_options'] + array('html' => TRUE);
  $linktext = '<span class="tab-inner">' . $menu_item['link']['title'] . '</span>';
  return l($linktext, $menu_item['link']['link_path'], $link_options);
} 
```

定义上述钩子后，清除缓存以重建主题注册表。

如果上述方法不起作用，如[@weaveoftheride](https://stackoverflow.com/questions/13477629/how-to-add-a-span-tag-to-a-certain-custom-menu-link-in-drupal-7/22349886?noredirect=1#comment70392201_22349886)建议的那样，请确保在设置中启用*对超链接*使用主题功能和*对菜单项使用主题功能*。通常这些应该默认启用。

**Drupal 6**（仅供参考）

```
/*
 * Implements theme_menu_item_link().
 */
function THEME_menu_item_link($link) {
  if (empty($link['localized_options'])) {
    $link['localized_options'] = array();
  }
  $link['localized_options'] += array('html'=>true);
  return l('<span>'.$link['title'].'</span>', $link['href'], $link['localized_options']);
} 
```

* * *

^(注意：不要忘记`THEME`在所有上述代码中替换为您的主题的机器名称。)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T17:09:04.727

找到了答案！需要使用`theme_menu_link()`：

```
function theme_menu_link(array $variables) {
    $element = $variables['element'];
    $sub_menu = '';

    if ($element['#below']) {
        $sub_menu = drupal_render($element['#below']);
    }

    $output = l($element['#title'], $element['#href'], $element['#localized_options']);
    return '<li' . drupal_attributes($element['#attributes']) . '>' . $output . $sub_menu . "</li>\n";
} 
```

[http://api.drupal.org/api/drupal/includes%21menu.inc/function/theme_menu_link/7](http://api.drupal.org/api/drupal/includes%21menu.inc/function/theme_menu_link/7)

在那里我可以找到我正在寻找的项目并进行相应的调整。

# javascript - 默认值更改时添加类到输入

> ID：13477633
> 
> 赞同：0
> 
> 时间：2012-11-20T16:29:08.310
> 
> 标签：javascript, input, focus, onblur

我有一个输入字段，其中添加了 JavaScript 的默认值

```
<input type="text" class="input-text required-entry validate-value-eg" id="city_field" name="city" onfocus="if(this.value=='e.g. Bristol, Yorkshire') this.value='';" onblur="if(this.value=='') this.value='e.g. Bristol, Yorkshire';" value="e.g. Bristol, Yorkshire"> 
```

每当访问者单击此字段时，默认值将消失并恢复，如果没有被其他值替换。

我想要实现的是仅在值已从默认值更改时添加一个类？

非常感谢任何帮助，

谢谢

多姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T17:09:14.407

在脚本部分或单独的 .js 文件中定义事件始终是一种更好的做法。

您不需要在`.change()`event 中处理它。您可以在`.blur()`事件本身中检查..

**HTML**

```
 <input type="text" class="input-text required-entry validate-value-eg" 
           id="city_field" name="city" value="e.g. Bristol, Yorkshire"> 
```

**纯Javascript**

```
var elem = document.getElementById('city_field');

elem.addEventListener('focus', function() {
    if (this.value == 'e.g. Bristol, Yorkshire') {
        this.value = '';
    }
});

elem.addEventListener('blur', function() {
    if (this.value == 'e.g. Bristol, Yorkshire') {
        RemoveClass(this, "newClass")
    }
    else if (this.value == '') {
        this.value = 'e.g. Bristol, Yorkshire';
        RemoveClass(this, "newClass")
    }
    else {
        this.className += " newClass";
    }
});

function RemoveClass(elem, newClass) {
    elem.className = elem.className.replace(/(?:^|\s)newClass(?!\S)/g, '')
}​ 
```

**[Javascript小提琴](http://jsfiddle.net/sushanth009/XGP8N/)**

但是您可以通过使用其他 javascript 框架使用损失较小的代码来实现这一点。这将使您的生活更轻松，但如果您从 javascript 开始，它总是好的。

**jQuery**

```
$(function() {
    var $elem = $('#city_field');

    $elem.val('e.g.Bristol, Yorkshire'); // Default value
    $elem.on('focus', function() { // Focus event
        if (this.value == 'e.g.Bristol, Yorkshire') {
            this.value = '';
        }
    });
    $elem.on('blur', function() { // Focus event
        if (this.value == 'e.g.Bristol, Yorkshire') {
            $(this).removeClass("newClass");
        }
        else if (this.value == '') {
            this.value = 'e.g.Bristol, Yorkshire';
            $(this).removeClass("newClass");
        }
        else {
            $(this).addClass("newClass");
        }
    });
});​ 
```

**[jQuery小提琴](http://jsfiddle.net/sushanth009/XGP8N/1/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T16:36:01.183

将 onchange 处理程序添加到您的输入

```
<input type="text" class="input-text required-entry validate-value-eg" 
    id="city_field" name="city" 
    onchange="addClass(this)" 
    onfocus="if(this.value=='e.g. Bristol, Yorkshire') this.value='';" 
    onblur="if(this.value=='') this.value='e.g. Bristol, Yorkshire';" 
    value="e.g. Bristol, Yorkshire">

<script>
 function addClass(input) // 'this' in onChange argument is the input element
 {
     if( input.value=='e.g. Bristol, Yorkshire')
     {
        $(input).removeClass("not_default_input_class");
        $(input).addClass("default_input_class");
     }
     else 
     {
        $(input).removeClass("default_input_class");
        $(input).addClass("not_default_input_class");
     }
 }
</script> 
```

编辑：添加了使用 jQuery 添加/删除 CSS 类

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T16:45:58.000

```
 <script>
 function addClass(input) // 'this' in onChange argument is the input element
{
 input.className = input.value==input.defaultValue? 
     "default_input_class" : "not_default_input_class"
}
</script> 
```

# java - 从 startActivityForResult 获取结果

> ID：13477634
> 
> 赞同：0
> 
> 时间：2012-11-20T16:29:09.673
> 
> 标签：java, android

我有一个代码，它将从图库中获取图像，然后用它设置一个 gridSize。

将 android 发送到 SizeSelection 类的主要代码。

拼图活动：

```
if( resultCode == RESULT_OK) {
         Intent gridSizeIntent = new Intent();              
         gridSizeIntent.setClass(this, SizeSelection.class);
         startActivityForResult(gridSizeIntent, GRIDSIZE_VALUE_SELECT);
         createGameBoard(SizeSelection.getGridSize(this)); 
         } 
```

但这就是问题所在：SizeSelection，当我点击应该激活并设置 gridSize 的按钮时，什么也没发生。我认为问题在于将数据从 SizeSelection 获取到主 PuzzleActivity 类。

尺寸选择：

```
protected static short getGridSize(Context content) {
        if ( mIbtn3x3 == view) {
             short gridSize = 3;
            return gridSize;
        }else if (mIbtn4x4 == view ) {
            short gridSize = 4;
            return gridSize;
        }else if (mIbtn5x5 == view ) {
            short gridSize = 5;
            return gridSize ;
        } 
            return gridSize;
        } 
```

我应该如何完成 getGridSize 方法？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:36:59.047

当您为结果启动活动时，您当前的代码不会阻塞。也就是说，`startActivityForResult()`快速返回并且您还没有结果。为了接收结果（一旦可用），您必须`onActivityResult(int, int, Intent)`在调用类中提供一个方法。一旦结果可用，该方法将被自动调用。

在您的孩子活动中，您必须做两件事来提供结果。首先，您调用`setResult(int)`以提供当前对结果的期望。这不会返回任何内容，它只是准备结果——如果您愿意，可以在第二步之前随时更改它。其次，你打电话`finish()`来完成你的活动。

有关完整文档，请参阅[http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T16:35:50.420

我认为当您比较 mIbtn ... == 查看时，可能没有任何匹配项检查它:)

# javascript - 动态 Javascript 订单，从选择和输入字段值计算总计

> ID：13477639
> 
> 赞同：1
> 
> 时间：2012-11-20T16:29:21.467
> 
> 标签：javascript, forms

我已经为此绞尽脑汁好几个小时了。我一直在尝试使用我在 Google 上找到的其他订单表单中的 JavaScript 并对其进行修改以满足我的需求，但我在这方面缺乏专业知识是我目前最大的障碍。我想知道这里是否有人可以帮助我。如果您能给我一个解决方案，我会非常乐意在您的 PayPal 帐户中投入 20 美元。

这正是我想要完成的，但作为一个网络表单：http: [//justinwhalley.net/orderform/orderform.xlsx](http://justinwhalley.net/orderform/orderform.xlsx)

这是我编写的网络表单，但没有连接 Javascript：http: [//justinwhalley.net/orderform/](http://justinwhalley.net/orderform/)

**需要计算...**

*对于每个零件/产品：*

*   免费盒 = 订购盒 * 1
*   总单位数 =（订购的箱子 + 免费箱子）* 每箱的单位数
*   促销小计 = 订购盒 * 每盒单位 * 分销商价值

*对于订单总数...*

*   Total Boxes = Ordered Boxes (all) * 2 [考虑到免费盒子也是 x2]
*   总单位 = 总单位（全部）
*   小计 = 促销小计（全部）
*   含税小计 = 小计 * 1.13
*   运输和处理 = 10
*   订单总计 = 含税小计 + 运输和处理

非常感谢任何帮助，希望其他人也能从这个解决方案中受益。

在此先感谢贾斯汀。

```
 <form>
  <table id="order-table">
    <tr>
      <th class="part-number">Part #</th>
      <th class="units-per-box">Units Per Box</th>
      <th class="distributor-value">Distributor Value</th>
      <th class="ordered-boxes">Boxes</th>
      <th class="free-boxes">Free Boxes</th>
      <th class="total-units">Total Units</th>
      <th class="part-subtotal">Subtotal with Promo</th>
    </tr>
    <tr class="part-heading">
        <td colspan="7">ROOF VENTS - 45, 50 & 85 Sq. Inch Roof Vent.  (RR - Rodent Resistant)</td>
    </tr>
    <tr class="part-row odd">
      <td class="part-number">AT1045</td>
      <td class="units-per-box">12</td>
      <td class="distributor-value">$<span>11.34</span></td>
      <td class="ordered-boxes"><select name="at1045-ordered-boxes" class="ordered-boxes-input" id="at1045-ordered-boxes">
          <option value="0">0</option>
          <option value="1">1</option>
          <option value="1">2</option>
          <option value="1">3</option>
          <option value="1">4</option>
          <option value="1">5</option>
          <option value="1">6</option>
          <option value="1">7</option>
          <option value="1">8</option>
          <option value="1">9</option>
        </select></td>
      <td class="free-boxes"><input type="text" class="free-boxes-input" id="at1045-free-boxes" name="at1045-free-boxes" disabled="disabled" /></td>
      <td class="total-units"><input type="text" class="total-units-input" id="at1045-total-units" name="at1045-total-units" disabled="disabled" /></td>
      <td class="part-subtotal"><input type="text" class="part-subtotal-input" id="at1045-part-subtotal" name="at1045-total-units" disabled="disabled" /></td>
    </tr>
    <tr class="part-row even">
      <td class="part-number">AT1050</td>
      <td class="units-per-box">12</td>
      <td class="distributor-value">$<span>12.96</span></td>
      <td class="ordered-boxes"><select name="at1050-ordered-boxes" class="ordered-boxes-input" id="at1050-ordered-boxes">
          <option value="0">0</option>
          <option value="1">1</option>
          <option value="1">2</option>
          <option value="1">3</option>
          <option value="1">4</option>
          <option value="1">5</option>
          <option value="1">6</option>
          <option value="1">7</option>
          <option value="1">8</option>
          <option value="1">9</option>
        </select></td>
      <td class="free-boxes"><input type="text" class="free-boxes-input" id="at1050-free-boxes" name="at1050-free-boxes" disabled="disabled" /></td>
      <td class="total-units"><input type="text" class="total-units-input" id="at1050-total-units" name="at1050-total-units" disabled="disabled" /></td>
      <td class="part-subtotal"><input type="text" class="part-subtotal-input" id="at1050-part-subtotal" name="at1050-part-subtotal" disabled="disabled" /></td>
    </tr>
    <tr class="part-row odd">
      <td class="part-number">AT1050-RR</td>
      <td class="units-per-box">12</td>
      <td class="distributor-value">$<span>19.04</span></td>
      <td class="ordered-boxes"><select name="at1050rr-ordered-boxes" class="ordered-boxes-input" id="at1050rr-ordered-boxes">
          <option value="0">0</option>
          <option value="1">1</option>
          <option value="1">2</option>
          <option value="1">3</option>
          <option value="1">4</option>
          <option value="1">5</option>
          <option value="1">6</option>
          <option value="1">7</option>
          <option value="1">8</option>
          <option value="1">9</option>
        </select></td>
      <td class="free-boxes"><input type="text" class="free-boxes-input" id="at1050rr-free-boxes" name="at1050rr-free-boxes" disabled="disabled" /></td>
      <td class="total-units"><input type="text" class="total-units-input" id="at1050rr-total-units" name="at1050rr-total-units" disabled="disabled" /></td>
      <td class="part-subtotal"><input type="text" class="part-subtotal-input" id="at1050rr-part-subtotal" name="at1050rr-total-units" disabled="disabled" /></td>
    </tr>
    <tr class="part-row even">
      <td class="part-number">AT1085</td>
      <td class="units-per-box">9</td>
      <td class="distributor-value">$<span>19.44</span></td>
      <td class="ordered-boxes"><select name="at1085-ordered-boxes" class="ordered-boxes-input" id="at1085-ordered-boxes">
          <option value="0">0</option>
          <option value="1">1</option>
          <option value="1">2</option>
          <option value="1">3</option>
          <option value="1">4</option>
          <option value="1">5</option>
          <option value="1">6</option>
          <option value="1">7</option>
          <option value="1">8</option>
          <option value="1">9</option>
        </select></td>
      <td class="free-boxes"><input type="text" class="free-boxes-input" id="at1085-free-boxes" name="at1085-free-boxes" disabled="disabled" /></td>
      <td class="total-units"><input type="text" class="total-units-input" id="at1085-total-units" name="at1085-total-units" disabled="disabled" /></td>
      <td class="part-subtotal"><input type="text" class="part-subtotal-input" id="at1085-part-subtotal" name="at1085-part-subtotal" disabled="disabled" /></td>
    </tr>
    <tr class="part-heading">
        <td colspan="7">ROOF ROLL VENT - 20' All in One Roll</td>
    </tr>
    <tr class="part-row odd">
      <td class="part-number">AT2020</td>
      <td class="units-per-box">6</td>
      <td class="distributor-value">$<span>77.76</span></td>
      <td class="ordered-boxes"><select name="at2020-ordered-boxes" class="ordered-boxes-input" id="at2020-ordered-boxes">
          <option value="0">0</option>
          <option value="1">1</option>
          <option value="1">2</option>
          <option value="1">3</option>
          <option value="1">4</option>
          <option value="1">5</option>
          <option value="1">6</option>
          <option value="1">7</option>
          <option value="1">8</option>
          <option value="1">9</option>
        </select></td>
      <td class="free-boxes"><input type="text" class="free-boxes-input" id="at2020-free-boxes" name="at2020-free-boxes" disabled="disabled" /></td>
      <td class="total-units"><input type="text" class="total-units-input" id="at2020-total-units" name="at2020-total-units" disabled="disabled" /></td>
      <td class="part-subtotal"><input type="text" class="part-subtotal-input" id="at2020-part-subtotal" name="at2020-total-units" disabled="disabled" /></td>
    </tr>
    <tr class="part-heading">
        <td colspan="7">EXHAUST VENTS - 4" Exhaust Vent (AT1050 Style)</td>
    </tr>
    <tr class="part-row even">
      <td class="part-number">AT3010</td>
      <td class="units-per-box">8</td>
      <td class="distributor-value">$<span>12.96</span></td>
      <td class="ordered-boxes"><select name="at3010-ordered-boxes" class="ordered-boxes-input" id="at3010-ordered-boxes">
          <option value="0">0</option>
          <option value="1">1</option>
          <option value="1">2</option>
          <option value="1">3</option>
          <option value="1">4</option>
          <option value="1">5</option>
          <option value="1">6</option>
          <option value="1">7</option>
          <option value="1">8</option>
          <option value="1">9</option>
        </select></td>
      <td class="free-boxes"><input type="text" class="free-boxes-input" id="at3010-free-boxes" name="at3010-free-boxes" disabled="disabled" /></td>
      <td class="total-units"><input type="text" class="total-units-input" id="at3010-total-units" name="at3010-total-units" disabled="disabled" /></td>
      <td class="part-subtotal"><input type="text" class="part-subtotal-input" id="at3010-part-subtotal" name="at3010-total-units" disabled="disabled" /></td>
    </tr>
    <tr class="part-heading">
        <td colspan="7">EXHAUST VENT ADAPTER - 4-6" Adapter for Bathroom or Range Hood fan for AT1050 ONLY</td>
    </tr>
    <tr class="part-row odd">
      <td class="part-number">AT3022</td>
      <td class="units-per-box">8</td>
      <td class="distributor-value">$<span>13.23</span></td>
      <td class="ordered-boxes"><select name="at3022-ordered-boxes" class="ordered-boxes-input" id="at3022-ordered-boxes">
          <option value="0">0</option>
          <option value="1">1</option>
          <option value="1">2</option>
          <option value="1">3</option>
          <option value="1">4</option>
          <option value="1">5</option>
          <option value="1">6</option>
          <option value="1">7</option>
          <option value="1">8</option>
          <option value="1">9</option>
        </select></td>
      <td class="free-boxes"><input type="text" class="free-boxes-input" id="at3022-free-boxes" name="at3022-free-boxes" disabled="disabled" /></td>
      <td class="total-units"><input type="text" class="total-units-input" id="at3022-total-units" name="at3022-total-units" disabled="disabled" /></td>
      <td class="part-subtotal"><input type="text" class="part-subtotal-input" id="at3022-part-subtotal" name="at3022-total-units" disabled="disabled" /></td>
    </tr>
    <tr class="part-heading">
        <td colspan="7">INTAKE VENT - Air Intake Vent</td>
    </tr>
    <tr class="part-row even">
      <td class="part-number">AT7045</td>
      <td class="units-per-box">8</td>
      <td class="distributor-value">$<span>19.71</span></td>
      <td class="ordered-boxes"><select name="at7045-ordered-boxes" class="ordered-boxes-input" id="at7045-ordered-boxes">
          <option value="0">0</option>
          <option value="1">1</option>
          <option value="1">2</option>
          <option value="1">3</option>
          <option value="1">4</option>
          <option value="1">5</option>
          <option value="1">6</option>
          <option value="1">7</option>
          <option value="1">8</option>
          <option value="1">9</option>
        </select></td>
      <td class="free-boxes"><input type="text" class="free-boxes-input" id="at7045-free-boxes" name="at7045-free-boxes" disabled="disabled" /></td>
      <td class="total-units"><input type="text" class="total-units-input" id="at7045-total-units" name="at7045-total-units" disabled="disabled" /></td>
      <td class="part-subtotal"><input type="text" class="part-subtotal-input" id="at7045-part-subtotal" name="at7045-total-units" disabled="disabled" /></td>
    </tr>
    <tr class="part-heading">
        <td colspan="7">VENT ACCESSORIES - Wave Deflector</td>
    </tr>
    <tr class="part-row odd">
      <td class="part-number">AT9010</td>
      <td class="units-per-box">48</td>
      <td class="distributor-value">$<span>2.00</span></td>
      <td class="ordered-boxes"><select name="at9010-ordered-boxes" class="ordered-boxes-input" id="at9010-ordered-boxes">
          <option value="0">0</option>
          <option value="1">1</option>
          <option value="1">2</option>
          <option value="1">3</option>
          <option value="1">4</option>
          <option value="1">5</option>
          <option value="1">6</option>
          <option value="1">7</option>
          <option value="1">8</option>
          <option value="1">9</option>
        </select></td>
      <td class="free-boxes"><input type="text" class="free-boxes-input" id="at9010-free-boxes" name="at9010-free-boxes" disabled="disabled" /></td>
      <td class="total-units"><input type="text" class="total-units-input" id="at9010-total-units" name="at9010-total-units" disabled="disabled" /></td>
      <td class="part-subtotal"><input type="text" class="part-subtotal-input" id="at9010-part-subtotal" name="at9010-total-units" disabled="disabled" /></td>
    </tr>
    <tr>
      <th colspan="3"></th>
      <th colspan="2">Total Boxes</th>
      <th>Total Units</th>
      <th>Subtotal with Promo</th>
    </tr>
    <tr>
      <td class="subtotal" colspan="3">Subtotal:</td>
      <td colspan="2"><input type="text" class="total-boxes-input" id="total-boxes" disabled="disabled" /></td>
      <td><input type="text" class="total-units-input" id="total-units" disabled="disabled" /></td>
      <td><input type="text" class="subtotal-input" id="subtotal" disabled="disabled" /></td>
    </tr>
    <tr class="instructions">
      <td colspan="3"></td>
      <td colspan="2">Must be 18 or under</td>
      <td colspan="2"></td>
    </tr>
    <tr class="totals">
      <td colspan="5"></td>
      <td class="totals-label">Subtotal:</td>
      <td><input type="text" class="subtotal-input" id="subtotal" disabled="disabled" /></td>
    </tr>
    <tr class="totals">
      <td colspan="5"></td>
      <td class="totals-label">Subtotal With Tax:</td>
      <td><input type="text" class="subtotal-tax-input" id="subtotal-tax" disabled="disabled" /></td>
    </tr>
    <tr class="totals">
      <td colspan="5"></td>
      <td class="totals-label">Shipping &amp; Handling:</td>
      <td><input type="text" class="shipping-handling" id="shipping-handling" disabled="disabled" value="10" /></td>
    </tr>
    <tr class="totals">
      <td colspan="5"></td>
      <td class="totals-label">Order Total:</td>
      <td><input type="text" class="order-total" id="order-total" disabled="disabled" /></td>
    </tr>
  </table>
  </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:28:09.013

以下脚本应该可以完成工作（请记住更新所选选项的值，现在它们在您的代码中都是 1）：

```
<script type="text/javascript">
    $table = $('#order-table');
    calculateFormFields();

    $(document).ready(function () {
        $table.find('.ordered-boxes-input').bind('click', function () {

            calculateFormFields();
        });
    });
    function calculateFormFields() {
        var rows = $table.find('tr');
        var SubtotalTotalBoxes = 0;
        var SubtotalTotalUnits = 0;
        var Subtotal_SubWithPromo = 0;
        var Total_Subtotal = 0;
        var Total_SubtotalWithTax = 0;
        var OrderTotal = 0;
        for (var i = 0; i < rows.length; i++) {
            var row = rows[i];
            var numberOfBoxes = 0;
            //Free boxes
            var orderedInput = $(row).find('.ordered-boxes-input');
            if (orderedInput.length == 1) {
                numberOfBoxes = parseInt(orderedInput.val());
                $(row).find('.free-boxes-input').val(numberOfBoxes);//Set number of boxes selected
                $(row).find('.total-units-input').val(numberOfBoxes * 2);//Set number of total units
                var distributorValueSpan = $($(row).find('.distributor-value')[0]).text();
                var distributorValue = parseFloat(distributorValueSpan.replace('$',''));
                var unitsPerBox = $($(row).find('.units-per-box')).text();
                unitsPerBox = parseFloat(unitsPerBox.replace('$',''));
                var subtotal = distributorValue * unitsPerBox * numberOfBoxes;
                SubtotalTotalBoxes += numberOfBoxes;
                SubtotalTotalUnits = SubtotalTotalBoxes * 2;
                Subtotal_SubWithPromo += subtotal;
                $(row).find('.part-subtotal-input').val(subtotal);
            }

        }

        Total_Subtotal = Subtotal_SubWithPromo;
        Total_SubtotalWithTax = Total_Subtotal * 1.13;
        OrderTotal = Total_SubtotalWithTax + 10;

        $('#total-boxes').val(SubtotalTotalBoxes);
        $('#total-units').val(SubtotalTotalUnits);
        $('#subtotal').val(Subtotal_SubWithPromo.toFixed(2));
        $('.totals').find('#subtotal').val(Subtotal_SubWithPromo.toFixed(2));
        $('#subtotal-tax').val(Total_SubtotalWithTax.toFixed(2));
        $('#order-total').val(OrderTotal.toFixed(2));

    }
</script> 
```

# java - 为什么从一种类型分配到相同类型需要检查？

> ID：13477640
> 
> 赞同：6
> 
> 时间：2012-11-20T16:29:33.340
> 
> 标签：java, static-analysis

我在一个类上运行 IntelliJ 的代码分析器 (IntelliJ 11.1.4) 并收到以下警告：

> 未经检查的分配：“java.util.List”到“java.util.List”

它抱怨的代码是：

```
List<String> targetDocumentIds = pepperWorkflowInstance.getTargetDocumentIds(); 
```

以供参考：

```
public class PepperWorkflowInstance<T extends PepperWorkflowInstanceData> implements Serializable {

   private List<String>            targetDocumentIds = new ArrayList<String>();
   ...
   public List<String> getTargetDocumentIds() {
      return targetDocumentIds;
   }
   ...
} 
```

所以类型匹配......那么为什么我需要“检查”分配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T18:15:25.330

确保`pepperWorkflowInstance`有参数：

```
pepperWorkflowInstance = new PepperWorkflowInstance<SomeClass>(); 
```

请参阅[IDEA-6254](http://youtrack.jetbrains.com/issue/IDEA-6254)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T16:39:57.620

如果pepperWorkflowInstance 是使用原始类型作为返回类型的超类，则可能会生成该消息。

例子。

```
class A{
    public List getTargetDocumentIds(){
        return new ArrayList();
    }
}

class B extends A{
    public List<String> getTargetDocumentIds(){
        return new ArrayList<String>();
    }
}

public class Tester {

    public static void main(String[] args) {
        A a = new B();
        List<String> targetDocumentIds = a.getTargetDocumentIds(); 
        // above produces compiler type safety warning                        
    }
} 
```

# perl - 在 Perl 中显示和传递命令行参数

> ID：13477642
> 
> 赞同：1
> 
> 时间：2012-11-20T16:29:35.917
> 
> 标签：perl, argv

我有以下程序“Extract.pl”，它打开一个文件，找到包含“警告......”，“信息......”，“禁用......”的行，然后计算并打印值和数量他们。它工作正常。

我想要做的是为 3 个匹配项中的每一个创建命令行参数 - 警告、禁用和信息，然后从命令提示符运行它们中的任何一个。

这是代码：

```
#!/usr/bin/perl

use strict;
use warnings;

my %warnings = ();
my %infos = ();
my %disablings = ();    

open (my $file, '<', 'Warnings.txt') or die $!;                 

while (my $line = <$file>)  {                       

 if($line =~ /^warning ([a-zA-Z0-9]*):/i) {                     
     ++$warnings{$1};                           
}
 if($line =~ /^disabling ([a-zA-Z0-9]*):/i) {                       
     ++$disablings{$1};                         
}
 if($line =~ /^info ([a-zA-Z0-9]*):/i) {                        
     ++$infos{$1};                          
}
}
       close $file;                                     

       foreach my $w (sort {$warnings{$a} <=> $warnings{$b}} keys %warnings) {      
   print $w . ": " . $warnings{$w} . "\n";                  
}
       foreach my $d (sort {$disablings{$a} <=> $disablings{$b}} keys %disablings) {        
   print $d . ": " . $disablings{$d} . "\n";                    
}

       foreach my $i (sort {$infos{$a} <=> $infos{$b}} keys %infos) {   
       print $i . ": " . $infos{$i} . "\n"; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T18:30:55.273

内置的特殊数组`@ARGV`保存脚本的所有命令行参数，*不包括*脚本文件本身（以及解释器，如果调用 as `perl script.pl`）。对于类似的调用`perl script.pl foo bar warnings`，`@ARGV`将包含值“foo”、“bar”和“warnings”。这是一个普通数组，因此您可以编写类似的内容（假设第一个参数是您的选项之一）：

```
my ($warning, $info, $disabling);
if    ($ARGV[0] =~ /warning/i)   { $warning = 1   }
elsif ($ARGV[0] =~ /info/i)      { $info = 1      }
elsif ($ARGV[0] =~ /disabling/i) { $disabling = 1 }

# [...] (opening the file, starting the main loop etc...)

if ( $warning and $line =~ /^warning ([a-zA-Z0-9]*)/i ) {
    ++$warnings{$1};
}
elsif ( $info and $line =~ /^info ([a-zA-Z0-9]*)/i ) {
    ++$infos{$1};
}
elsif ( $disabling and $line =~ /^disabling ([a-zA-Z0-9]*)/i ) {
    ++$disablings{$1};
} 
```

我在遍历文件的主循环之前为三个条件创建了标志变量，以避免在文件的每一行上进行正则表达式编译。

您也可以使用[`Getopt::Long`](http://perldoc.perl.org/Getopt/Long.html)or[`Getopt::Std`](http://perldoc.perl.org/Getopt/Std.html)模块。这些提供了对命令行参数的简单灵活的处理。

# prompt - 根据服务器端的条件显示确认框

> ID：13477643
> 
> 赞同：1
> 
> 时间：2012-11-20T16:29:36.880
> 
> 标签：prompt, confirmation

我想在 ASP.Net 应用程序中显示一个确认对话框。这是一个复杂的表单，例如当用户按下保存按钮时会得到确认提示。

问题是，对话框将根据服务器端的条件显示或不显示。实现这一点的最佳方法是什么。

# java - JScrollPane 不更新滚动条

> ID：13477645
> 
> 赞同：0
> 
> 时间：2012-11-20T16:29:37.940
> 
> 标签：java, swing, user-interface, jpanel, jscrollpane

我正在尝试创建一个`JScrollPane`包含`JPanel`高度增加和减少的高度。`JScrollPane`当它变得比`JPanel`. 但是，我很难做到这一点。是的，我知道我没有使用`LayoutManager`s。不，我不会使用它们，我需要一个不涉及它们使用的解决方案。

下面是两个 button 的`AbstractAction`加法和减法`JPanel`：

```
class AddACT extends AbstractAction
    {
      public void actionPerformed(ActionEvent e)
      {
        info.setSize(420,info.getHeight() + 40);
        info.add(new SubPanel); // Adds another JPanel into the main JPanel (for content input)
        gui.repaint();
        infoS.validate();
      }
    }

class RemoveACT extends AbstractAction
    {
      public void actionPerformed(ActionEvent e)
      {
        info.remove(subPanel()); // This would remove the last JPanel added to the main JPanel
        info.setSize(420,info.getHeight() - 40);
        gui.repaint();
        infoS.validate();
      } 
```

这是主 JPanel 和 JScrollPane 的代码：

```
final JPanel info = new JPanel();
final JScrollPane infoS = new JScrollPane(info, ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS, ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);  
info.setLayout(null);
info.setSize(420,600);
infoS.setLocation(10,80);
infoS.setSize(420,490);
gui.add(infoS); // gui is the frame's content pane (the overall JPanel) 
```

这是我一直在尝试通过实践来学习 GUI 的第二个项目。我是 Swing 的完全新手，并且只是 Java 的中级。对不起，如果我犯了一个明显的错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T17:57:15.217

1) 使用`LayoutManager`s（+1 到 @kleopatra 和 @GagandeepBali 评论）

没有`LayoutManager`s 只能保证你的 GUI 看起来很垃圾（尤其是在其他操作系统/构建上运行时），作为新手，你应该学习正确的方法而不是学习错误的方法并养成像调用`setSize()`等坏习惯。

阅读这些链接以帮助您入门：

*   [布局管理器的视觉指南](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)
*   [Swing 中的并发性](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)

2）请参阅[此示例](https://stackoverflow.com/questions/13237678/sticking-components-onto-a-jscrollpane/13237933#13237933)以了解如何使用 a `JScrollPane`，它只是将`JPanel`带有按钮的 a 添加到 a`JScrollPane`中，然后将其添加到`JFrame`.

3) 另请参阅[此示例](https://stackoverflow.com/questions/13466279/jscrollpane-only-vertical-scroll/13466484#13466484)以了解如何仅使`JScrollPane` 垂直滚动。

4) 有关`JScrollPane`s 的更多信息，请查看：[如何使用滚动窗格](http://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html)。

5) 至于它如何与 交互`LayoutManager`，如果您没有通过`setPreferredSize(Dimension d)` *滚动窗格显式设置它的大小，则会根据其九个组件的首选大小（视口，如果存在，两个滚动条，行和列）计算它标题和四个角）*

6）关于您的使用`validate()`：

*   `validate()`当 new`JComponent`被添加到可见组件时使用

*   `revalidate()``JComponent`从可见组件中移除/添加时使用

*   `revalidate()``validate()`也涵盖

因此总是使用这个：

```
//add or remove component(s)
revalidate();
repaint(); 
```

**参考：**

*   [http://www.daniweb.com/software-development/java/threads/405568/validate-vs-revalidate](http://www.daniweb.com/software-development/java/threads/405568/validate-vs-revalidate)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T21:38:16.207

`LayoutManager`不需要解决问题。Thrfoot 示例中的问题在于以下几行：

```
final JScrollPane infoS = new JScrollPane(info, ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS, ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);  
info.setLayout(null);
info.setSize(420,600); 
```

该程序似乎认识到需要滚动条（如果您的设置是 ，它将显示滚动条`VERTICAL_SCROLLBAR_AS_NEEDED`），但实际滚动不起作用（滚动条滑块不存在）。

要解决此问题，**首先**设置 的*首选*大小`info`，**然后**构造`infoS`.

例子：

```
info.setPreferredSize(420,600);
final JScrollPane infoS = new JScrollPane(info, ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS, ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER); 
```

这个想法是在用于滚动窗格**之前**`info`设置面板的首选大小。这与在添加到 之前设置大小和位置的原因相同：**`infoS``gui`**

 **```
infoS.setLocation(10,80);
infoS.setSize(420,490);
gui.add(infoS); // gui is the frame's content pane (the overall JPanel) 
```**

# ios - iOS 使用 TPAACAudioConverter 直接将声音录制到 .m4a 文件（音频/mpeg-4）

> ID：13477647
> 
> 赞同：2
> 
> 时间：2012-11-20T16:29:42.553
> 
> 标签：ios, audio, recording, aac, mpeg-4

我在具有录音功能的 iOS 应用程序上工作。**我在 .m4a 文件中直接录制 AAC mpeg4-audio**有很大问题。

我的工作解决方案是在 .caf 中录制，然后将此文件转换为所需的 .m4a 格式，但它速度慢且不可接受。

我找到了 Michael Tyson 的包装器[**TPAACAudioConverter**](https://github.com/michaeltyson/TPAACAudioConverter)，这可能是正确的解决方案，但我的问题是，我不知道如何更正初始化并使用此包装器在 .m4a 文件中进行直接 AAC 录制（之后没有补充转换后记录）。

如果有人在 Github 上有工作示例或者我可以帮忙，请告诉我。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T11:36:03.267

TPAACAudioConverter 不太适合现场录音，只是因为它的结构方式，从代表中提取音频而不是提供直接向其发送音频的能力。

我建议直接使用 ExtAudioFile 服务，因为它已经为您完成了工作。

如果您确实必须使用 TPAACAudioConverter，则需要使用环形缓冲区（如 TPCircularBuffer）来存储音频，直到 TPAACAudioConverter 通过委托方法检索它。虽然很乱；使用 ExtAudioFile。

作为记录，The Amazing Audio Engine 包含一个非常简单的机制，可以直接录制到 AAC 或任何其他支持的格式。它很快就会出来。

# replace - JAVAFX 2.0 如何动态更改滚动窗格中的内容？

> ID：13477653
> 
> 赞同：2
> 
> 时间：2012-11-20T16:29:53.883
> 
> 标签：replace, javafx-2, scrollpane

我在滚动窗格中制作播放列表，但我想在加载新播放列表时更改滚动窗格中的内容。setContent() 只是添加内容。如何删除滚动窗格中的旧内容并插入我的新文本，即。有没有办法做一个“scrollpane.removeContent()”？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T18:20:22.320

乌鲁克是对的。

[scrollPane.setContent(node)](http://docs.oracle.com/javafx/2/api/javafx/scene/control/ScrollPane.html#setContent%28javafx.scene.Node%29)已经完全符合您的要求（替换现有内容），并且不需要 removeContent 方法，因为 setContent(null) 将删除滚动窗格中的任何内容。

* * *

这是一个示例应用程序来演示这一点：

```
import javafx.application.Application;
import javafx.beans.property.*;
import javafx.event.*;
import javafx.scene.Scene;
import javafx.scene.control.*;
import javafx.scene.image.*;
import javafx.scene.layout.*;
import javafx.stage.Stage;

public class ScrollPaneReplace extends Application {
  public static void main(String[] args) { launch(args); }

  String[] imageLocs = { 
    "http://uhallnyu.files.wordpress.com/2011/11/green-apple.jpg",
    "http://i.i.com.com/cnwk.1d/i/tim/2011/03/10/orange_iStock_000001331357X_540x405.jpg",
    "http://smoothiejuicerecipes.com/pear.jpg"
  };
  ImageView[] images = new ImageView[imageLocs.length];

  @Override public void init() {
    for (int i = 0; i < imageLocs.length; i++) {
      images[i] = new ImageView(new Image(imageLocs[i], 200, 0, true, true));
    }
  }

  @Override public void start(Stage stage) {
    stage.setTitle("Healthy Choices");
    stage.getIcons().add(new Image("http://files.softicons.com/download/application-icons/pixelophilia-icons-by-omercetin/png/32/apple-green.png"));

    final ScrollPane scroll = new ScrollPane();
    scroll.setPrefSize(100, 100);

    final IntegerProperty curImageIdx = new SimpleIntegerProperty(0);
    scroll.setContent(images[curImageIdx.get()]);

    Button next = new Button("Next Image");
    next.setOnAction(new EventHandler<ActionEvent>() {
      @Override public void handle(ActionEvent t) {
        curImageIdx.set((curImageIdx.get() + 1) % 3);
        scroll.setContent(images[curImageIdx.get()]);
      }
    });

    Button remove = new Button("Remove Image");
    remove.setOnAction(new EventHandler<ActionEvent>() {
      @Override public void handle(ActionEvent t) {
        scroll.setContent(null);
      }
    });

    VBox controls = new VBox(10);
    controls.getChildren().setAll(next, remove);

    HBox layout = new HBox(10);
    layout.getChildren().setAll(controls, scroll);
    layout.setStyle("-fx-background-color: cornsilk; -fx-padding: 15;");
    HBox.setHgrow(scroll, Priority.ALWAYS);

    stage.setScene(new Scene(layout));
    stage.show();

    scroll.setHvalue(0.25); scroll.setVvalue(0.25);
  }
} 
```

不同 ScrollPane 内容设置的示例图像：

![苹果选择](../Images/7448427e4ed45a619043aeb752a4223d.png) ![橙色选择](../Images/25cb6edccd8fbec0e71d5e97e04eb29e.png) ![没有选择](../Images/ce33f9ebc19ea477566e7577f099b7f0.png)

# jquery - 链接.then时的Jquery延迟对象问题

> ID：13477654
> 
> 赞同：2
> 
> 时间：2012-11-20T16:29:55.303
> 
> 标签：jquery, ajax, jquery-deferred

我返回的链接数据存在问题，然后是第一个延迟数据。第一个示例有效：

```
api.getData().done(function(data){
  api.getData2().done(
    function(data2){
      $.log('success', data2);
    });
  }); 
```

但是第二个例子**应该**可以工作，第二个 .then() 有 data2，但由于某种原因它与 data1 相同。

```
api.getData().then(function(data1){
  return api.getData2();
}).then(
function(data2){
  $.log('success', data2);
}); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:47:37.840

[$.when](http://api.jquery.com/jQuery.when/)将接受两个返回 promise 的异步函数，并在两者都完成后执行 .then() 函数：

```
$.when( api.getData(), api.getData2() ).done(function(data, data2) {
    $.log('success', data2);
}); 
```

如果由于某种原因（比如需要数据）您需要`getData()`之前执行`getData2()`，那么真的不需要`.then()`，因为您的第一个示例似乎足够有效？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T17:04:15.693

所以经过一些研究[JQuery Deferred.Pipe](http://api.jquery.com/deferred.pipe/)我发现我不能链接.then，而是需要使用如下管道（.pipe() 是可链接的）：

```
api.getData().pipe(function(data1){
  return api.getData2();
}).then(
function(data2){
  $.log('success', data2);
}); 
```

# jaxb - 没有数据时 Xml 标记不打开

> ID：13477657
> 
> 赞同：1
> 
> 时间：2012-11-20T16:29:59.203
> 
> 标签：jaxb, resteasy

我正在编写一个 resteasy 网络服务来生成 XML 格式的数据。有数据时，XML 输出工作正常。当没有数据时，真正的问题就出现了。它以父标签停止。

如果没有数据，它看起来像这样

```
 <salts/> 
```

我正在寻找这种输出

```
 <salts>
        <salt/>
   <salts> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T17:44:20.767

尝试使用空集合初始化您`salts`的集合。像这样的东西：

```
@XmlElementWrapper
@XmlElement(name="salt")
private List<Salt> salts = new ArrayList<Salt>(); 
```

# iphone - UIView 不直接显示

> ID：13477658
> 
> 赞同：0
> 
> 时间：2012-11-20T16:30:03.727
> 
> 标签：iphone, ios

这当然没什么，但我遇到了一个没有立即显示的 UIView 的麻烦。

这是代码：

`SettingViewController.m`

```
- (IBAction)reloadParametersDB:(id)sender {
    LoadingView* loadingView = [LoadingView loadLoadingIntoView:self.view];
    [dbService fillParametersTables];
    [loadingView removeLoading];
} 
```

`LoadingView.m`

```
+(LoadingView *)loadLoadingIntoView:(UIView *)superView{
    LoadingView *loadingView = [[LoadingView alloc] initWithFrame:superView.bounds];
    if (loadingView == nil) return nil;
    loadingView.backgroundColor = [UIColor blackColor];
    [superView addSubview:loadingView];
    return loadingView;
} 
```

它之所以有效，是因为当我在 loadLoadingIntoView 中打印某些内容时，我看到了它，实际上问题是 addSubview 在完成 fillParametersTables 后才有效...

有谁知道该怎么做？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:08:58.457

您需要返回事件循环才能更新显示。一种方法是在将加载视图设置为他们自己的方法后将这些行放入它们自己的方法中，然后使用`performSelector:withObject:afterDelay:`它来执行它。

例如：

```
- (void)doTableLoading:(id)loadingView {
    [dbService fillParametersTables];
    [(LoadingView *)loadingView removeLoading];
}

- (IBAction)reloadParametersDB:(id)sender {
    LoadingView* loadingView = [LoadingView loadLoadingIntoView:self.view];
    [self performSelector:@selector(doTableLoading:) withObject:loadingView afterDelay:0.1f]
} 
```

（这段代码是在 HTML 表单中编写的，甚至可能无法编译……但它应该可以让您了解策略。）

# android - 如何解决实现 Android GridLayout 的向后兼容性 API 12 到 7 的错误

> ID：13477662
> 
> 赞同：4
> 
> 时间：2012-11-20T16:30:17.257
> 
> 标签：android, backwards-compatibility, android-gridlayout

如何确保较旧的 API（第 7 级）可以使用较新的功能（API 级别 12）？我希望使用一个 RadioButtons 块。我在 gridLayout 中执行此操作。我使用 Eclipse Juno 进行编辑，Java 编译器 JDK 合规级别设置为 1.6。

在保存包含带有 RadioButtons 的 gridLayout 的布局后，它警告说这在 API 级别 7 中不可用，因此询问我是否要解决我回答是的问题。

我检查了该类型（正确吗？）在布局文件中称为 android.support.v7.widget.GridLayout 而不是使用 GridLayout。带有空 src 子目录的节点“gridlayout_v7”被放置在项目 bij Eclipse 的根目录中。

Android 支持库 v.11 已安装。

但是，当我在虚拟设备（Android 2.1 设备）中运行程序时，LogCat 返回以下错误和警告：

```
09-16 08:21:44.068: E/AndroidRuntime(678): ERROR: thread attach failed
09-16 08:21:44.894: W/ResourceType(412): Resources don't contain package for resource number 0x7f0700e5
09-16 08:21:44.906: W/ResourceType(412): Resources don't contain package for resource number 0x7f020031
09-16 08:21:44.906: W/ResourceType(412): Resources don't contain package for resource number 0x7f020030
09-16 08:21:44.906: W/ResourceType(412): Resources don't contain package for resource number 0x7f050000
09-16 08:21:44.984: W/ResourceType(412): Resources don't contain package for resource number 0x7f060000
09-16 08:21:44.994: W/ResourceType(412): Resources don't contain package for resource number 0x7f060001
09-16 08:21:45.234: W/ResourceType(412): Resources don't contain package for resource number 0x7f0700e5
09-16 08:21:45.234: W/ResourceType(412): Resources don't contain package for resource number 0x7f020031
09-16 08:21:45.234: W/ResourceType(412): Resources don't contain package for resource number 0x7f020030
09-16 08:21:45.234: W/ResourceType(412): Resources don't contain package for resource number 0x7f050000
09-16 08:21:45.244: W/ResourceType(412): Resources don't contain package for resource number 0x7f060000
09-16 08:21:45.254: W/ResourceType(412): Resources don't contain package for resource number 0x7f060001
09-16 08:21:47.374: E/AndroidRuntime(689): ERROR: thread attach failed
09-16 08:21:47.844: W/dalvikvm(695): VFY: unable to resolve virtual method 2883: Landroid/support/v7/widget/ViewGroup;.onChildVisibilityChanged (Landroid/view/View;II)V
09-16 08:21:47.844: W/dalvikvm(695): VFY: unable to resolve virtual method 2885: Landroid/support/v7/widget/ViewGroup;.onInitializeAccessibilityEvent (Landroid/view/accessibility/AccessibilityEvent;)V
09-16 08:21:47.854: W/dalvikvm(695): VFY: unable to find class referenced in signature (Landroid/view/accessibility/AccessibilityNodeInfo;)
09-16 08:21:47.854: W/dalvikvm(695): VFY: unable to resolve virtual method 2886: Landroid/support/v7/widget/ViewGroup;.onInitializeAccessibilityNodeInfo (Landroid/view/accessibility/AccessibilityNodeInfo;)V
09-16 08:21:47.874: W/dalvikvm(695): VFY: unable to resolve virtual method 2887: Landroid/support/v7/widget/ViewGroup;.onSetLayoutParams (Landroid/view/View;Landroid/view/ViewGroup$LayoutParams;)V
09-16 08:21:47.874: W/dalvikvm(695): VFY: unable to resolve virtual method 2888: Landroid/support/v7/widget/ViewGroup;.onViewAdded (Landroid/view/View;)V
09-16 08:21:47.874: W/dalvikvm(695): VFY: unable to resolve virtual method 2889: Landroid/support/v7/widget/ViewGroup;.onViewRemoved (Landroid/view/View;)V
09-16 08:21:47.884: W/dalvikvm(695): VFY: unable to resolve static method 3016: Landroid/view/View;.resolveSizeAndState (III)I 
```

错误日志显示没有错误。

控制台显示以下（无错误）：

```
[2012-11-20 16:59:22 - SimpleScore] ------------------------------
[2012-11-20 16:59:22 - SimpleScore] Android Launch!
[2012-11-20 16:59:22 - SimpleScore] adb is running normally.
[2012-11-20 16:59:22 - SimpleScore] Performing nl.computerhuys.simplescore.MainActivity activity launch
[2012-11-20 16:59:22 - SimpleScore] Automatic Target Mode: launching new emulator with compatible AVD 'VirtualAndroid2.1'
[2012-11-20 16:59:22 - SimpleScore] Launching a new emulator with Virtual Device 'VirtualAndroid2.1'
[2012-11-20 16:59:32 - Emulator] Warning: No DNS servers found
[2012-11-20 16:59:33 - SimpleScore] New emulator found: emulator-5554
[2012-11-20 16:59:33 - SimpleScore] Waiting for HOME ('android.process.acore') to be launched...
[2012-11-20 17:00:20 - SimpleScore] HOME is up on device 'emulator-5554'
[2012-11-20 17:00:20 - SimpleScore] Uploading SimpleScore.apk onto device 'emulator-5554'
[2012-11-20 17:00:22 - SimpleScore] Installing SimpleScore.apk...
[2012-11-20 17:00:29 - SimpleScore] Success!
[2012-11-20 17:00:29 - SimpleScore] Starting activity nl.computerhuys.simplescore.MainActivity on device emulator-5554
[2012-11-20 17:00:32 - SimpleScore] ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=nl.computerhuys.simplescore/.MainActivity } 
```

源代码文件 MainActivity.java 的完整代码：

```
package nl.computerhuys.simplescore;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
} 
```

布局文件activity_main.xml的完整代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
xmlns:app="http://schemas.android.com/apk/res/nl.computerhuys.simplescore"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginTop="133dp"
    android:text="@string/speler1"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/textView1"
    android:layout_marginTop="33dp"
    android:text="@string/speler2"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<TextView
    android:id="@+id/textView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/textView2"
    android:layout_marginTop="33dp"
    android:text="@string/speler3"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<android.support.v7.widget.GridLayout
    android:id="@+id/gridLayout1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/textView1"
    android:layout_marginLeft="19dp"
    android:layout_marginTop="-5dp"
    android:layout_toRightOf="@+id/textView2" >

    <RadioButton
        android:id="@+id/radioButton1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        app:layout_column="0"
        app:layout_gravity="right"
        app:layout_row="0"
        android:text="@string/score1" />

    <RadioButton
        android:id="@+id/radioButton2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        app:layout_column="1"
        app:layout_gravity="left"
        app:layout_row="0"
        android:text="@string/score2" />

    <RadioButton
        android:id="@+id/radioButton3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        app:layout_column="2"
        app:layout_row="0"
        android:text="@string/score3" />

    <android.support.v7.widget.Space
        android:layout_width="100dp"
        android:layout_height="28dp"
        app:layout_column="0"
        app:layout_row="0" />
</android.support.v7.widget.GridLayout>

<android.support.v7.widget.GridLayout
    android:id="@+id/gridLayout2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@id/textView2"
    android:layout_marginLeft="19dp"
    android:layout_marginTop="-5dp"
    android:layout_toRightOf="@id/textView2" >

    <RadioButton
        android:id="@+id/RadioButton03"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        app:layout_column="0"
        app:layout_gravity="right"
        app:layout_row="0"
        android:text="@string/score1" />

    <RadioButton
        android:id="@+id/RadioButton02"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        app:layout_column="1"
        app:layout_gravity="left"
        app:layout_row="0"
        android:text="@string/score2" />

    <RadioButton
        android:id="@+id/RadioButton01"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        app:layout_column="2"
        app:layout_gravity="left"
        app:layout_row="0"
        android:text="@string/score3" />

    <android.support.v7.widget.Space
        android:layout_width="100dp"
        android:layout_height="28dp"
        app:layout_column="0"
        app:layout_row="0" />
</android.support.v7.widget.GridLayout>

<android.support.v7.widget.GridLayout
    android:id="@+id/gridLayout3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/textView3"
    android:layout_marginLeft="19dp"
    android:layout_marginTop="-5dp"
    android:layout_toRightOf="@id/textView2" >

    <RadioButton
        android:id="@+id/RadioButton05"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        app:layout_column="0"
        app:layout_gravity="right"
        app:layout_row="0"
        android:text="@string/score1" />

    <RadioButton
        android:id="@+id/RadioButton06"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        app:layout_column="1"
        app:layout_gravity="left"
        app:layout_row="0"
        android:text="@string/score2" />

    <RadioButton
        android:id="@+id/RadioButton04"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        app:layout_column="2"
        app:layout_gravity="left"
        app:layout_row="0"
        android:text="@string/score3" />

    <android.support.v7.widget.Space
        android:layout_width="100dp"
        android:layout_height="28dp"
        app:layout_column="0"
        app:layout_row="0" />
</android.support.v7.widget.GridLayout>

</RelativeLayout> 
```

最后，这是清单文件：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="nl.computerhuys.simplescore"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

单击虚拟设备中的 RadioButton（在第一次强制应用程序显示之后）会导致以下 LogCat 错误：

```
09-16 09:05:04.056: W/KeyCharacterMap(412): No keyboard for id 0
09-16 09:05:04.064: W/KeyCharacterMap(412): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
09-16 09:05:15.075: W/ActivityManager(412): Scheduling restart of crashed service com.android.inputmethod.latin/.LatinIME in 5000ms
09-16 09:05:15.095: E/ActivityThread(412): Failed to find provider info for android.server.checkin
09-16 09:05:15.105: W/Checkin(412): Can't log event SYSTEM_SERVICE_LOOPING: java.lang.IllegalArgumentException: Unknown URL content://android.server.checkin/events
09-16 09:05:21.114: W/InputMethodManager(695): Ignoring onBind: cur seq=-1, given seq=1 
```

选择单选按钮后，无法通过再次单击或选择同一组中的另一个单选按钮（相同的 GridLayout）来取消选择它。

什么问题，如何解决？

# user-interface - 小程序不出现

> ID：13477664
> 
> 赞同：1
> 
> 时间：2012-11-20T16:30:19.977
> 
> 标签：user-interface

编译完这段代码后，我就去运行它。小程序就不会出现，有什么问题吗？我在编程方面不是最好的，我只需要弄清楚为什么它没有运行！顺便说一下，我是新用户，无法将图像提交到该程序

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.border.TitledBorder;

public class Exercise17_09 extends JFrame {
    private ImageIcon icGrapes = new ImageIcon("C:\temp");  
    private JPanel top;
private JPanel bottom;
private JPanel text;
private JPanel align;
private JPanel txtcom;
private JPanel lblpane;
    private JPanel lblpnl;
private JPanel AlignPanel;
    private JLabel jlblGrapes;
    private JLabel jlbltwo;
private JLabel jlblthree;
    private JLabel jlblfour;
private JLabel jlblfive;
    private JComboBox jcboone;
    private JComboBox jcbotwo;
private JComboBox jcbothree;
    private JComboBox jcbofour;

public static void main(String[] args) {
SwingUtilities.invokeLater(new Runnable() {
    public void run() {
    Exercise17_09 inst = new Exercise17_09();
    inst.setLocationRelativeTo(null);
    inst.setVisible(true);
        }});
}//end main

public Exercise17_09() {
    super();
    initGUI();
}

private void initGUI() {
    try {
    setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);
    {
        top = new JPanel();
        getContentPane().add(top, BorderLayout.NORTH);
        top.setPreferredSize(new java.awt.Dimension(392, 122));

                    {
                    jlblGrapes = new JLabel("Grapes", icGrapes, SwingConstants.CENTER);
                    jlblGrapes.setPreferredSize(new java.awt.Dimension(392,122));
                    jlblGrapes.setHorizontalTextPosition(SwingConstants.CENTER);

        }
        }//end 

            {
        bottom = new JPanel();
        GridLayout BottomPanelLayout = new GridLayout(1, 2);
        BottomPanelLayout.setHgap(5);
        BottomPanelLayout.setVgap(5);
        BottomPanelLayout.setColumns(2);
        bottom.setLayout(BottomPanelLayout);
        getContentPane().add(bottom, BorderLayout.CENTER);
        bottom.setPreferredSize(new java.awt.Dimension(392, 130));

                    {
        AlignPanel = new JPanel();
        BorderLayout AlignPanelLayout = new BorderLayout();
        bottom.add(AlignPanel);
        AlignPanel.setLayout(AlignPanelLayout);
        AlignPanel.setBorder(BorderFactory.createTitledBorder(null,  

  "Horizontal Alignment", TitledBorder.LEADING, TitledBorder.TOP));
                {
        lblpnl = new JPanel();
        GridLayout jPanel1Layout = new GridLayout(2, 1);
        jPanel1Layout.setHgap(5);
        jPanel1Layout.setVgap(5);
        jPanel1Layout.setColumns(1);
        jPanel1Layout.setRows(2);
        AlignPanel.add(lblpnl, BorderLayout.CENTER);
        lblpnl.setLayout(jPanel1Layout);

                    {
        jlblfive = new JLabel();
        lblpnl.add(jlblfive);
        jlblfive.setText("Horizontal");
                    }

                    {
        jlblfour = new JLabel();
        lblpnl.add(jlblfour);
        jlblfour.setText("Vertical");
                    }
                }

                                    {
        align = new JPanel();
        GridLayout AligncomboLayout = new GridLayout(2, 1);
        AligncomboLayout.setHgap(5);
                    AligncomboLayout.setVgap(5);
        AligncomboLayout.setColumns(1);
        AligncomboLayout.setRows(2);
        AlignPanel.add(align, BorderLayout.EAST);
        align.setLayout(AligncomboLayout);
                    {
        ComboBoxModel jcboHAModel = 
        new DefaultComboBoxModel(
        new String[] { "LEFT", "CENTER", "RIGHT" });
        jcbofour = new JComboBox();
        align.add(jcbofour);
        jcbofour.setModel(jcboHAModel);
                    }

                                            {
        ComboBoxModel jcboVAModel = 
        new DefaultComboBoxModel(
        new String[] { "TOP", "CENTER", "BOTTOM" });
        jcbothree = new JComboBox();
        align.add(jcbothree);
        jcbothree.setModel(jcboVAModel);
                    }
                }
            }

                    {
        text = new JPanel();
        BorderLayout TextPanelLayout = new BorderLayout();
        bottom.add(text);
        text.setLayout(TextPanelLayout);
        text.setBorder(BorderFactory.createTitledBorder("Text Position"));

                    {
        lblpane = new JPanel();
        GridLayout Label2panelLayout = new GridLayout(2, 1);
        Label2panelLayout.setHgap(5);
        Label2panelLayout.setVgap(5);
        Label2panelLayout.setColumns(1);
        Label2panelLayout.setRows(2);
        text.add(lblpane, BorderLayout.CENTER);
        lblpane.setLayout(Label2panelLayout);

                    {
        jlblthree = new JLabel();
        lblpane.add(jlblthree);
        jlblthree.setText("Horizontal");
        }

                    {
        jlbltwo = new JLabel();
        lblpane.add(jlbltwo);
        jlbltwo.setText("Vertical");
        }
        }

                    {
        txtcom = new JPanel();
            GridLayout TextComboLayout = new GridLayout(2, 1);
        TextComboLayout.setHgap(5);
        TextComboLayout.setVgap(5);
        TextComboLayout.setColumns(1);
        TextComboLayout.setRows(2);
        txtcom.setLayout(TextComboLayout);
        text.add(txtcom, BorderLayout.EAST);

                    {
        ComboBoxModel jcboTHAModel = 
        new DefaultComboBoxModel(
        new String[] { "LEFT", "CENTER", "RIGHT" });
        jcbotwo = new JComboBox();
        txtcom.add(jcbotwo);
        jcbotwo.setModel(jcboTHAModel);
        jcbotwo.setSelectedItem("CENTER");

        }

                    {
        ComboBoxModel jcboTVAModel = 
        new DefaultComboBoxModel(
        new String[] { "TOP", "CENTER", "BOTTOM" });
        jcboone = new JComboBox();
        txtcom.add(jcboone);
        jcboone.setModel(jcboTVAModel);
        jcboone.setSelectedItem("CENTER");
        }
        }
        }

                    jcbofour.addItemListener(new ItemListener() {

     public void itemStateChanged(ItemEvent e) {

    String A = (String)jcbofour.getSelectedItem();
    if(A.equals("LEFT"))    {
        jlblGrapes.setHorizontalAlignment(SwingConstants.LEFT);
                    }
    else if(A.equals("CENTER")) {
        jlblGrapes.setHorizontalAlignment(SwingConstants.CENTER);
                    }
    else if(A.equals("RIGHT"))  {
        jlblGrapes.setHorizontalAlignment(SwingConstants.RIGHT);
                    }
                }
            });

    jcbothree.addItemListener(new ItemListener() {
        public void itemStateChanged(ItemEvent e) {
            String A = (String)jcbothree.getSelectedItem();
            if(A.equals("TOP")) {
            jlblGrapes.setVerticalAlignment(SwingConstants.TOP);
                    }
                else if(A.equals("CENTER")) {
            jlblGrapes.setVerticalAlignment(SwingConstants.CENTER);
                    }
                else if(A.equals("BOTTOM")) {
            jlblGrapes.setVerticalAlignment(SwingConstants.BOTTOM);
                    }
                }
            });

   jcbotwo.addItemListener(new ItemListener() {
    public void itemStateChanged(ItemEvent e) {
              String A = (String)jcbotwo.getSelectedItem();
              if(A.equals("LEFT"))  {
              jlblGrapes.setHorizontalTextPosition(SwingConstants.LEFT);
                    }
              else if(A.equals("CENTER"))   {
              jlblGrapes.setHorizontalTextPosition(SwingConstants.CENTER);
                    }
              else if(A.equals("RIGHT"))    {
              jlblGrapes.setHorizontalTextPosition(SwingConstants.RIGHT);
                    }
                }
            });

       jcboone.addItemListener(new ItemListener() {
    public void itemStateChanged(ItemEvent e) {
        String A = (String)jcboone.getSelectedItem();
        if(A.equals("TOP")) {
        jlblGrapes.setVerticalTextPosition(SwingConstants.TOP);
                    }
        else if(A.equals("CENTER")) {
        jlblGrapes.setVerticalTextPosition(SwingConstants.CENTER);
                    }
        else if(A.equals("BOTTOM")) {
        jlblGrapes.setVerticalTextPosition(SwingConstants.BOTTOM);
                    }
    }
    });

    }
pack();
setSize(400, 300);
} catch (Exception e) {
e.printStackTrace();

}

}

} 
```

# c# - 如果除了内部 foreach 循环之外还有一些操作，则使用 linq 重写嵌套的 foreach

> ID：13477668
> 
> 赞同：0
> 
> 时间：2012-11-20T16:30:30.233
> 
> 标签：c#, linq

我有以下代码，想把它翻译成 linq。考虑到外部 foreach 中的两个 foreach 循环，是否有可能？目前我只能将内部 foreach 循环转换为 linq，但代码仍然很长，我认为它可能会更短。

```
List<complexType> listOfComplex = ...some list...
List<complexType> newListOfCOmplex = new List<complexType>();
SomeObjectType someObject = ...some object...

foreach(var cT in listOfComplex)
{
    var someObjectPropertyValue = someObject.property.FirstOrDefault(a=>a.value == smth);

    if(someObjectPropertyValue == null)
    {
        return null;
    }
    var t = someObjectPropertyValue.Something.AnotherSomethin;

    if(t==null)
    {
        newListOfCOmplex.Add(cT);
        continue;
    }

    var collectionFirst = t.Where(s=>s.value == firstValue);

    foreach (var f in collectionFirst)
    {
        someOtherMethod(f);
    }
    newListOfCOmplex.Add(cT);

    var collectionSecond = t.Where(s=>s.value == secondValue);

    foreach (var s in collectionSecond)
    {
        someOtherMethod(s);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T17:17:02.630

整个代码非常可疑，因为变量`cT`只添加到列表中，在 foreach 循环中都没有检查它的属性。

无论这是原始行为还是混淆的结果，您都应该修改您的样本。

至于当前样本处理循环的更好方法是

```
List<complexType> listOfComplex = ...some list...
//List<complexType> newListOfCOmplex = new List<complexType>();
SomeObjectType someObject = ...some object...

//Totaly unneccessary as newListOfCOmplex is complete copy of listOfComplex 
//foreach(var cT in listOfComplex)
//{
//  newListOfCOmplex.Add(cT);
//}    

var someObjectPropertyValue = someObject.property.FirstOrDefault(a=>a.value == smth) ?? return null;

var t = someObjectPropertyValue.Something.AnotherSomethin ?? return smth;

var collection = t.Where(s=>(s.value == firstValue || s.value == secondValue) ).ToList();
foreach (var f in collection) someOtherMethod(f);

return smth;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:57:49.013

以我对 Nogard 的评论为基础，可以这样做：

```
newListOfComplex = listOfComplex.ToList();

var stream = someObject.property
                       .Where(a => a.value == smth)
                       .Select(a => a.Something.AnotherSomething)
                       .FirstOrDefault() ?? Enumerable.Empty<T>()
if(stream.Any())
{
    foreach( var f in stream.Where(s=> s.value == firstValue)
                            .Concat(stream.Where(s => s.value == secondValue)))
    someOtherMethod(f);
    return smth;
}
else return null; 
```

# acl - Google Cloud Storage - 为 Google Compute Engine 设置 Acl

> ID：13477669
> 
> 赞同：0
> 
> 时间：2012-11-20T16:30:31.450
> 
> 标签：acl, google-cloud-storage, google-compute-engine

您好我想更改我的 ACL 文件以允许 Google Compute Engine 写入我的存储桶

这是我的 ACL 的样子：

```
<?xml version="1.0" ?>
<AccessControlList>
    <Owner>
        <ID>XX</ID>
    </Owner>
    <Entries>
        <Entry>
            <Scope type="GroupById">
                <ID>XX</ID>
            </Scope>
            <Permission>FULL_CONTROL</Permission>
        </Entry>
        <Entry>
            <Scope type="AllUsers"/>
            <Permission>READ</Permission>
        </Entry>
        <Entry>
            <Scope type="UserByEmail">
                <EmailAddress>XX@appspot.gserviceaccount.com</EmailAddress>
            </Scope>
            <Permission>WRITE</Permission>
        </Entry>
    </Entries>
</AccessControlList> 
```

或者我不知道有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T22:37:14.043

Compute Engine 服务帐号是一种非常简洁的方式来访问同一项目中的 Cloud Storage 存储分区。无需在每个存储桶或对象上设置 ACL。

简而言之：

```
host$ gcutil addinstance reader --service_account_scopes=storage-rw
<output elided...>
host$ gcutil ssh reader
<output elided...>
reader$ gsutil ls gs://YOUR_BUCKET
<outputs the list of objects in your bucket> 
```

...其中 YOUR_BUCKET 是与 Compute Engine 位于同一项目中的 Cloud Storage 存储分区。Cloud Storage 的作用域别名是：storage-r、storage-w、storage-rw 和 storage-full。

如果要启用跨项目访问，可以通过将 GCE 项目的服务帐户的电子邮件地址添加到另一个项目的 Google 存储资源（存储桶/对象）来实现。查找服务帐户的电子邮件地址的最简单方法是在如上启动的 GCE 实例中执行此操作：

```
reader$ curl -s http://metadata/0.1/meta-data/service-accounts/default | python -mjson.tool
{
    "scopes": [
        "https://www.googleapis.com/auth/devstorage.read_only"
    ], 
    "serviceAccount": "abc123.default@developer.gserviceaccount.com"
} 
```

此处的详细信息： [https ://developers.google.com/compute/docs/authentication](https://developers.google.com/compute/docs/authentication)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T16:36:50.593

我在列表中添加了服务帐户，实际上它的工作非常简单

# php - 将数据从一个表发送到另一页

> ID：13477672
> 
> 赞同：0
> 
> 时间：2012-11-20T16:30:36.340
> 
> 标签：php, javascript, jquery, html

我有这张我想要的表格 当我单击表格行中的链接时重定向到另一个页面 数据将被发送到可以帮助我的新页面 我还没有找到如何开始

我真的卡住了代码表

```
<table cellpadding="0" cellspacing="0" border="0" class="display" id="example">
<thead>
    <tr>            

        <th>Date</th>
        <th>provider</th>
        <th>CI</th>
        <th>CELL</th>
        <th>BSC</th>
        <th>Commentaire</th>
        <th>nbr</th>
        <th>Type</th>
        <th><img src="{{ asset('image/Modify.png') }}" ALIGN="CENTER"/></th>
        <th><img src="{{ asset('image/Info.png') }}" ALIGN="CENTER"/></th>
        <th><img src="{{ asset('image/Male.png') }}" ALIGN="CENTER"/></th>
        <th>type_alertes</th>

    </tr>
</thead>
<tbody>

         <div class="textbox">
        <h2> Information KPI dégradées</h2>

            <div class="textbox_content" id="kpi_dégrades">
 {% for liste in listes %}

    <tr class="gradeU">
    <td>{{ liste.DAT }} </td>
    <td>{{ liste.PROVIDER}} </td>
    <td>{{ liste.CI}} </td>
    <td>{{ liste.CELL}} </td>
    <td>{{ liste.BSC}}</td>
    <td>{{ liste.Cmts}}</td>
    <td >{{ liste.nbr}}</td>
    <td>{{ liste.TYPE}}</td>
    <td><a class="edit" href="">Edit</a></td>
    <td onclick="getInfo('{{ liste.CELL}}')">Information KPI dégradés</td>
    <td>{{ liste.user_name}}</td>
    <td>{{ liste.type_alertes}}</td>

</tr>

{% endfor %}
        </div>
        </div>

</tbody> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T16:52:11.647

您可以使用下一页上的隐藏字段，将您的数据存储在下一页上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T16:57:09.650

```
<tr onclick="window.location="newPageLocation?value = this.innerHTML">  
    <th>Date</th>
    <th>provider</th>
    <th>CI</th>
    <th>CELL</th>
    <th>BSC</th>
    <th>Commentaire</th>
    <th>nbr</th>
    <th>Type</th>
    <th><img src="{{ asset('image/Modify.png') }}" ALIGN="CENTER"/></th>
    <th><img src="{{ asset('image/Info.png') }}" ALIGN="CENTER"/></th>
    <th><img src="{{ asset('image/Male.png') }}" ALIGN="CENTER"/></th>
    <th>type_alertes</th> 
```

在下一页中使用 javascript 从 td 获取值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T16:38:32.483

使用[GET](http://php.net/manual/en/reserved.variables.get.php)变量找出 rowID。

[http://example.com/page.php?rowID=xx](http://example.com/page.php?rowID=xx)

在您的主表中，每一行都有一个链接。

# c++ - Qt - QtDomElement 比较，XML 对象比较

> ID：13477676
> 
> 赞同：1
> 
> 时间：2012-11-20T16:30:53.977
> 
> 标签：c++, xml, qt, compare, bytearray

我将比较 XML 文件，这些文件可作为 QtDomElement 对象使用。IMO 没有 Qt 方法可以做到这一点。

1.  使用 Qt 比较 XML 文件的最有效方法是什么？什么是替代解决方案？

2.  如果我更准确地想比较 QDomElement 对象怎么办？

3.  首先将 QDomElement 转换为 QByteArray，然后比较 QByteArray 是个好主意（以及如何？）

4.  将 QDomDocument 转换为 Qbytearrays 时，如果相同的标头和内容以不同的顺序出现在两个文件中，那么 XML 标头的顺序是否相同？

例如，如果我有

```
<CATALOG>
    <CD>
        <TITLE>Empire Burlesque</TITLE>
        <ARTIST>Bob Dylan</ARTIST>
        <COUNTRY>USA</COUNTRY>
        <COMPANY>Columbia</COMPANY>
        <PRICE>10.90</PRICE>
        <YEAR>1985</YEAR>
    </CD>
    <CD>
        <TITLE>Hide your heart</TITLE>
        <ARTIST>Bonnie Tyler</ARTIST>
        <COUNTRY>UK</COUNTRY>
        <COMPANY>CBS Records</COMPANY>
        <PRICE>9.90</PRICE>
        <YEAR>1988</YEAR>
    </CD>
</CATALOG> 
```

和

```
<CATALOG>
    <CD>
        <TITLE>Hide your heart</TITLE>
        <ARTIST>Bonnie Tyler</ARTIST>
        <COUNTRY>UK</COUNTRY>
        <COMPANY>CBS Records</COMPANY>
        <PRICE>9.90</PRICE>
        <YEAR>1988</YEAR>
    </CD>
    <CD>
        <TITLE>Empire Burlesque</TITLE>
        <ARTIST>Bob Dylan</ARTIST>
        <COUNTRY>USA</COUNTRY>
        <COMPANY>Columbia</COMPANY>
        <PRICE>10.90</PRICE>
        <YEAR>1985</YEAR>
    </CD>
</CATALOG> 
```

我会比较返回true。当我转换为 QByteArray 时，两个 QByteArray 的顺序是否相同？如何比较 QByteArrays，在这种情况下返回 true 进行比较？

谢谢！

# ios - 编译一个包含sharekit的项目

> ID：13477677
> 
> 赞同：1
> 
> 时间：2012-11-20T16:30:58.710
> 
> 标签：ios, ios6, sharing, sharekit

我正在尝试在我的计算机上编译我同事的项目。该项目正在他的计算机中编译。当我复制并编译时，出现以下错误：

```
Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_DefaultSHKConfigurator", referenced from:
      _OBJC_CLASS_$_ShareKitConfiguration in ShareKitConfiguration.o
  "_OBJC_CLASS_$_SHK", referenced from:
      objc-class-ref in AppDelegate.o
      objc-class-ref in VideoDetails.o
  "_OBJC_CLASS_$_SHKActionSheet", referenced from:
      objc-class-ref in VideoDetails.o
  "_OBJC_CLASS_$_SHKConfiguration", referenced from:
      objc-class-ref in AppDelegate.o
  "_OBJC_CLASS_$_SHKFacebook", referenced from:
      objc-class-ref in AppDelegate.o
  "_OBJC_CLASS_$_SHKItem", referenced from:
      objc-class-ref in VideoDetails.o
  "_OBJC_METACLASS_$_DefaultSHKConfigurator", referenced from:
      _OBJC_METACLASS_$_ShareKitConfiguration in ShareKitConfiguration.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

尝试解决错误但无法解决..需要一些帮助和指导..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:38:54.830

您可能将 ShareKit 作为子模块并导入 XCode 项目。在您的 git 存储库中，调用以下命令：

```
git submodule init
git submodule update 
```

然后重新启动 XCode 并尝试构建它。如果您仍有问题，请确保您的项目已按照此处的 ShareKit 安装说明进行配置：[https ://github.com/ShareKit/ShareKit/wiki/Installing-sharekit](https://github.com/ShareKit/ShareKit/wiki/Installing-sharekit)

# c# - 图片不显示？

> ID：13477678
> 
> 赞同：0
> 
> 时间：2012-11-20T16:31:00.730
> 
> 标签：c#, silverlight, xaml, binding

我的图像显示在设计视图中，但是当我启动我的项目时，它仍然显示旧图像，尽管它们不再存在......有人知道它为什么这样做吗？我没有更改任何路径，只是用新图像替换了它们。任何帮助将不胜感激。谢谢，杰森（顺便说一句，我清除了缓存，甚至尝试更改浏览器）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:40:55.623

我做了一个“干净的解决方案”并且有效，我今天才知道

# mercurial - Mercurial 注释/责备给出了不正确的原始修订

> ID：13477681
> 
> 赞同：4
> 
> 时间：2012-11-20T16:31:04.553
> 
> 标签：mercurial, blame

我最近在跟踪负责源文件中特定行的变更集时遇到了问题。`hg blame`给了我一个从未合并到我感兴趣的分支中的修订。

我发现，如果之前进行了类似的不相关更改，Mercurial 仍会将其显示为原始修订。这是一个错误还是应该表现得像这样？如果是后者，你能解释一下原因吗？

这是最小的示例：

```
hg init test
cd test

# Create a new file that has 3 lines
echo "111\n222\n333" > test.txt
hg commit -Am "Original file"

# Append "444" to the file
echo "444" >> test.txt
hg commit -m "Abandoned change"

# Go back to the first revision and append the same "444" to the file
hg up 0
echo "444" >> test.txt
hg commit -m "Actual change" 
```

这是回购的样子：

```
$ hg glog
@  changeset:   2:1b16b07e058e
|  tag:         tip
|  parent:      0:e58635de081c
|  user:        Nobody <nobody@nowhere.org>
|  date:        Tue Nov 20 17:17:41 2012 +0100
|  summary:     Actual change
|
| o  changeset:   1:b02ee64b2e2d
|/   user:        Nobody <nobody@nowhere.org>
|    date:        Tue Nov 20 17:17:41 2012 +0100
|    summary:     Abandoned change
|
o  changeset:   0:e58635de081c
   user:        Nobody <nobody@nowhere.org>
   date:        Tue Nov 20 17:17:41 2012 +0100
   summary:     Original file 
```

现在，当我运行时，`hg blame`我希望看到最后一行来自变更集 2，而不是变更集 1。

```
$ hg blame test.txt
0: 111
0: 222
0: 333
1: 444 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T16:55:00.280

这不是预期的行为，您遇到了 Bug [1839](https://bz.mercurial-scm.org/show_bug.cgi?id=1839)。

# html - 从数据库中获取 html 标记并在 div 中显示

> ID：13477687
> 
> 赞同：0
> 
> 时间：2012-11-20T16:31:36.720
> 
> 标签：html, mysql, jsp, servlets

我在 MySql 中有一个表，其中包含 html 标记。我试图在 div 中加载该数据，但不是显示 html，而是向我显示 html 标记。

而不是显示' **Sushil** '

这是节目`<div><h3>Sushil</h3></div>`。

我使用 JSP 作为服务器端组件。它使用 JSTL 标签从数据库中获取数据。

我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:50:59.297

这是我多年前制作的一个旧课程，可能很有用，像这样使用：

```
out.println(HTML.decode(contentFromDB));

package com.spectotechnologies.util;

import java.util.regex.Matcher;
import java.util.regex.Pattern;

/**
 *
 * @author Alexandre Lavoie
 */
public class HTML
{
    private static final int HTML_ENTITIES_MINUS_CHARACTER = 160;

    private static final int HTML_ENTITIES_START_CHARACTER = 32;

    private static final String HTML_ENCODING_TABLE[] = {
        "&nbsp;",   //
        "&#33;",    // !
        "&quot;",   // "
        "&#35;",    // #
        "&#36;",    // $
        "&#37;",    // %
        "&amp;",    // &
        "&#39;",    // '
        "&#40;",    // (
        "&#41;",    // )
        "&#42;",    // *
        "&#43;",    // +
        "&#44;",    // ,
        "&#45;",    // -
        "&#46;",    // .
        "&frasl;",  // /
        "&#48;",    // 0
        "&#49;",    // 1
        "&#50;",    // 2
        "&#51;",    // 3
        "&#52;",    // 4
        "&#53;",    // 5
        "&#54;",    // 6
        "&#55;",    // 7
        "&#56;",    // 8
        "&#57;",    // 9
        "&#58;",    // :
        "&#59;",    // ;
        "&lt;",     // <
        "&#61;",    // =
        "&gt;",     // >
        "&#63;",    // ?
        "&#64;",    // @
        "&#65;",    // A
        "&#66;",    // B
        "&#67;",    // C
        "&#68;",    // D
        "&#69;",    // E
        "&#70;",    // F
        "&#71;",    // G
        "&#72;",    // H
        "&#73;",    // I
        "&#74;",    // J
        "&#75;",    // K
        "&#76;",    // L
        "&#77;",    // M
        "&#78;",    // N
        "&#79;",    // O
        "&#80;",    // P
        "&#81;",    // Q
        "&#82;",    // R
        "&#83;",    // S
        "&#84;",    // T
        "&#85;",    // U
        "&#86;",    // V
        "&#87;",    // W
        "&#88;",    // X
        "&#89;",    // Y
        "&#90;",    // Z
        "&#91;",    // [
        "&#92;",    // /
        "&#93;",    // ]
        "&#94;",    // ^
        "&#95;",    // _
        "&#96;",    // `
        "&#97;",    // â
        "&#98;",    // b
        "&#99;",    // c
        "&#100;",   // d
        "&#101;",   // e
        "&#102;",   // f
        "&#103;",   // g
        "&#104;",   // h
        "&#105;",   // i
        "&#106;",   // j
        "&#107;",   // k
        "&#108;",   // l
        "&#109;",   // m
        "&#110;",   // n
        "&#111;",   // o
        "&#112;",   // p
        "&#113;",   // q
        "&#114;",   // r
        "&#115;",   // s
        "&#116;",   // t
        "&#117;",   // u
        "&#118;",   // v
        "&#119;",   // w
        "&#120;",   // x
        "&#121;",   // y
        "&#122;",   // z
        "&#123;",   // {
        "&#124;",   // |
        "&#125;",   // }
        "&#126;",   // ~
        "&#127;",   // 
        "&#128;",   // €
        "&#129;",   // �
        "&#130;",   // ‚
        "&#131;",   // ƒ
        "&#132;",   // „
        "&#133;",   // …
        "&#134;",   // †
        "&#135;",   // ‡
        "&#136;",   // ˆ
        "&permil;", // ‰
        "&#138;",   // Š
        "&lsaquo;", // ‹
        "&#140;",   // Œ
        "&#141;",   // �
        "&#142;",   // Ž
        "&#143;",   // �
        "&#144;",   // �
        "&#145;",   // ‘
        "&#146;",   // ’
        "&#147;",   // “
        "&#148;",   // ”
        "&#149;",   // •
        "&ndash;",  // –
        "&mdash;",  // —
        "&#152;",   // ˜
        "&trade;",  // ™
        "&#154;",   // š
        "&rsaquo;", // ›
        "&#156;",   // œ
        "&#157;",   // �
        "&#158;",   // ž
        "&#159;",   // Ÿ
        "&#160;",   //  
        "&iexcl;",  // ¡
        "&cent;",   // ¢
        "&pound;",  // £
        "&curren;", // ¤
        "&yen;",    // ¥
        "&brvbar;", // ¦
        "&sect;",   // §
        "&uml;",    // ¨
        "&copy;",   // ©
        "&ordf;",   // ª
        "&laquo;",  // «
        "&not;",    // ¬
        "&shy;",    // ­
        "&reg;",    // ®
        "&macr;",   // ¯
        "&deg;",    // °
        "&plusmn;", // ±
        "&sup2;",   // ²
        "&sup3;",   // ³
        "&acute;",  // ´
        "&micro;",  // µ
        "&para;",   // ¶
        "&middot;", // ·
        "&cedil;",  // ¸
        "&sup1;",   // ¹
        "&ordm;",   // º
        "&raquo;",  // »
        "&frac14;", // ¼
        "&frac12;", // ½
        "&frac34;", // ¾
        "&iquest;", // ¿
        "&Agrave;", // À
        "&Aacute;", // Á
        "&Acirc;",  // Â
        "&Atilde;", // Ã
        "&Auml;",   // Ä
        "&Aring;",  // Å
        "&AElig;",  // Æ
        "&Ccedil;", // Ç
        "&Egrave;", // È
        "&Eacute;", // É
        "&Ecirc;",  // Ê
        "&Euml;",   // Ë
        "&Igrave;", // Ì
        "&Iacute;", // Í
        "&Icirc;",  // Î
        "&Iuml;",   // Ï
        "&ETH;",    // Ð
        "&Ntilde;", // Ñ
        "&Ograve;", // Ò
        "&Oacute;", // Ó
        "&Ocirc;",  // Ô
        "&Otilde;", // Õ
        "&Ouml;",   // Ö
        "&times;",  // ×
        "&Oslash;", // Ø
        "&Ugrave;", // Ù
        "&Uacute;", // Ú
        "&Ucirc;",  // Û
        "&Uuml;",   // Ü
        "&Yacute;", // Ý
        "&THORN;",  // Þ
        "&szlig;",  // ß
        "&agrave;", // à
        "&aacute;", // á
        "&acirc;",  // â
        "&atilde;", // ã
        "&auml;",   // ä
        "&aring;",  // å
        "&aelig;",  // æ
        "&ccedil;", // ç
        "&egrave;", // è
        "&eacute;", // é
        "&ecirc;",  // ê
        "&euml;",   // ë
        "&igrave;", // ì
        "&iacute;", // í
        "&icirc;",  // î
        "&iuml;",   // ï
        "&eth;",    // ð
        "&ntilde;", // ñ
        "&ograve;", // ò
        "&oacute;", // ó
        "&ocirc;",  // ô
        "&otilde;", // õ
        "&ouml;",   // ö
        "&divide;", // ÷
        "&oslash;", // ø
        "&ugrave;", // ù
        "&uacute;", // ú
        "&ucirc;",  // û
        "&uuml;",   // ü
        "&yacute;", // ý
        "&thorn;",  // þ
        "&yuml;"    // ÿ
    };

    public static String encode(String p_sToEncode)
    {
        int nCountChars;
        String sResult = "";
        String sFound;

        // Check for characters to replace till end of string
        for(nCountChars = 0;nCountChars < p_sToEncode.length();nCountChars++)
        {
            // Init to current character
            sFound = "" + p_sToEncode.charAt(nCountChars);

            // Check if character is in the list
            if(p_sToEncode.charAt(nCountChars) >= HTML_ENTITIES_MINUS_CHARACTER)
            {
                sFound = HTML_ENCODING_TABLE[p_sToEncode.charAt(nCountChars) - HTML_ENTITIES_START_CHARACTER];
            }

            // Add to result
            sResult += sFound;
        }

        return sResult;
    }

    public static String decode(String p_sToDecode)
    {
        Pattern oPattern;
        Matcher oMatcher;
        String sCode;
        int nCode;

        oPattern = Pattern.compile("&\\#?[0-9,a-z,A-Z]*;");

        oMatcher = oPattern.matcher(p_sToDecode);

        StringBuffer oBuffer = new StringBuffer(p_sToDecode.length());

        while(oMatcher.find())
        {
            sCode = oMatcher.group(0);

            for(nCode = 0;nCode < HTML_ENCODING_TABLE.length;nCode++)
            {
                if(sCode.equals(HTML_ENCODING_TABLE[nCode]))
                {
                    sCode = "" + (char)(HTML_ENTITIES_START_CHARACTER + nCode);
                    break;
                }
            }

            oMatcher.appendReplacement(oBuffer,Matcher.quoteReplacement(sCode));
        }

        oMatcher.appendTail(oBuffer);

        return oBuffer.toString();
    }
} 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T16:41:57.827

~~您将不得不转义您的 html 实体。so`<`变成`&lt;`,`>`变成`&gt;`, 等等。~~

[如何在 JSP 表达式语言中进行 HTML 编码？](https://stackoverflow.com/questions/4526502/how-to-html-encode-in-the-jsp-expression-language)可能是您需要解决的相关问题。

~~[http://www.w3.org/TR/html4/sgml/entities.html](http://www.w3.org/TR/html4/sgml/entities.html)是 HTML 4 中 HTML 实体的规范（我不相信更多是为 HTML5 创建的，但我可能是错的）~~

编辑：因此，反过来看起来有一个来自 Apache Commons 的名为“Commons Lang”的 Java 包，其中包含一个`StringEscapeUtils`允许转义和取消转义 HTML 的类。

[http://www.mytechtip.com/2009/02/encodedecode-html-in-java_6101.html](http://www.mytechtip.com/2009/02/encodedecode-html-in-java_6101.html)

[http://commons.apache.org/lang/](http://commons.apache.org/lang/)

# wordpress - 如何使用 PHP 获取特殊的部分值？

> ID：13477688
> 
> 赞同：0
> 
> 时间：2012-11-20T16:31:39.417
> 
> 标签：wordpress

在发布文章时，我写了以下部分值。

链接 [http://www.examplesite.net/](http://www.examplesite.net/)

如何用 PHP 获得这个值？（如 echo get_option('link', 'articleID')）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T19:14:37.743

我认为您在谈论“自定义字段”，这是一种内置方式，可以在 Wordpress 帖子和页面中包含其他自定义元数据。

每个自定义字段都是一个键/值对 - 在您的示例中，键是“链接”，值是 URL。

您可以使用模板标签访问这些，`get_post_meta()`如下所示：

```
<?php echo get_post_meta($post->ID, 'Link', true); ?> 
```

第一个参数指定帖子（取决于您可能需要替换的模板中的查询/循环`$post->ID`）`get_the_ID()`，第二个参数指定键“Link”，第三个选项告诉它以字符串形式返回。

# c# - 无论文化如何，查找十进制值的小数位数

> ID：13477689
> 
> 赞同：104
> 
> 时间：2012-11-20T16:31:40.883
> 
> 标签：c#, decimal, cultureinfo

我想知道是否有一种简洁准确的方法来提取十进制值（作为 int）中的小数位数，以便在不同的文化信息中安全使用？

例如：
19.0 应该返回
1，27.5999 应该返回 4，19.12 应该
返回 2，
等等。

我写了一个查询，它对一个句点进行字符串拆分以查找小数位：

```
int priceDecimalPlaces = price.ToString().Split('.').Count() > 1 
                  ? price.ToString().Split('.').ToList().ElementAt(1).Length 
                  : 0; 
```

但我突然想到，这只适用于使用“。”的地区。作为小数分隔符，因此在不同系统中非常脆弱。

* * *

## 回答 #1

> 赞同：184
> 
> 时间：2012-11-21T12:55:54.320

我用[乔的方法](https://stackoverflow.com/a/13477964/563532)来解决这个问题:)

```
decimal argument = 123.456m;
int count = BitConverter.GetBytes(decimal.GetBits(argument)[3])[2]; 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2015-05-13T03:27:55.353

由于提供的答案都不足以将幻数“-0.01f”转换为十进制。即：`GetDecimal((decimal)-0.01f);`
我只能假设 3 年前有一个巨大的头脑放屁病毒攻击了每个人:)
这似乎是一个工作解决这个邪恶而可怕的问题，计算小数点后的小数位的非常复杂的问题 - 没有字符串，没有文化，不需要计算位，也不需要阅读数学论坛......只是简单的三年级数学。

```
public static class MathDecimals
{
    public static int GetDecimalPlaces(decimal n)
    {
        n = Math.Abs(n); //make sure it is positive.
        n -= (int)n;     //remove the integer part of the number.
        var decimalPlaces = 0;
        while (n > 0)
        {
            decimalPlaces++;
            n *= 10;
            n -= (int)n;
        }
        return decimalPlaces;
    }
} 
```

* * *

```
private static void Main(string[] args)
{
    Console.WriteLine(1/3m); //this is 0.3333333333333333333333333333
    Console.WriteLine(1/3f); //this is 0.3333333

    Console.WriteLine(MathDecimals.GetDecimalPlaces(0.0m));                  //0
    Console.WriteLine(MathDecimals.GetDecimalPlaces(1/3m));                  //28
    Console.WriteLine(MathDecimals.GetDecimalPlaces((decimal)(1 / 3f)));     //7
    Console.WriteLine(MathDecimals.GetDecimalPlaces(-1.123m));               //3
    Console.WriteLine(MathDecimals.GetDecimalPlaces(43.12345m));             //5
    Console.WriteLine(MathDecimals.GetDecimalPlaces(0));                     //0
    Console.WriteLine(MathDecimals.GetDecimalPlaces(0.01m));                 //2
    Console.WriteLine(MathDecimals.GetDecimalPlaces(-0.001m));               //3
    Console.WriteLine(MathDecimals.GetDecimalPlaces((decimal)-0.00000001f)); //8
    Console.WriteLine(MathDecimals.GetDecimalPlaces((decimal)0.0001234f));   //7
    Console.WriteLine(MathDecimals.GetDecimalPlaces((decimal)0.01f));        //2
    Console.WriteLine(MathDecimals.GetDecimalPlaces((decimal)-0.01f));       //2
} 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-11-20T16:46:35.407

我可能会使用[@fixagon 的答案](https://stackoverflow.com/a/13477756/563532)中的解决方案。

但是，虽然 Decimal 结构没有获取小数位数的方法，但您可以调用[Decimal.GetBits](http://msdn.microsoft.com/en-us/library/system.decimal.getbits.aspx)来提取二进制表示，然后使用整数值和比例来计算小数位数。

这可能比格式化为字符串更快，尽管您必须处理大量小数才能注意到差异。

我将把实现留作练习。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2014-07-03T08:39:13.753

[Burning_LEGION 的帖子](https://stackoverflow.com/a/13493771/563532)中显示了查找小数点后位数的最佳解决方案之一。

在这里，我使用了 STSdb 论坛文章中的部分内容：[小数点后的位数](http://stsdb.com/forum/stsdb-4-x/sts-labs/462-number-digits-after-decimal-point.html)。

在 MSDN 中我们可以阅读以下解释：

*“十进制数是一个浮点值，它由一个符号、一个数值（值中的每个数字的范围从 0 到 9）和一个比例因子组成，该比例因子表示将整数和小数分开的浮点小数点的位置数值的一部分。”*

并且：

*“Decimal 值的二进制表示由一个 1 位符号、一个 96 位整数和一个比例因子组成，该比例因子用于划分 96 位整数并指定它的哪一部分是小数部分。比例因子是隐含的数字 10，提高到从 0 到 28 的指数。”*

在内部级别上，十进制值由四个整数值表示。

![十进制内部表示](../Images/e30400c27d50542964ba46822a87c573.png)

有一个公开可用的 GetBits 函数用于获取内部表示。该函数返回一个 int[] 数组：

```
[__DynamicallyInvokable] 
public static int[] GetBits(decimal d)
{
    return new int[] { d.lo, d.mid, d.hi, d.flags };
} 
```

返回数组的第四个元素包含一个比例因子和一个符号。正如 MSDN 所说，比例因子隐含地是数字 10，提高到从 0 到 28 的指数。这正是我们所需要的。

因此，基于上述所有调查，我们可以构建我们的方法：

```
private const int SIGN_MASK = ~Int32.MinValue;

public static int GetDigits4(decimal value)
{
    return (Decimal.GetBits(value)[3] & SIGN_MASK) >> 16;
} 
```

这里使用 SIGN_MASK 来忽略符号。在逻辑之后，我们还将结果右移了 16 位，以接收实际的比例因子。最后，这个值表示小数点后的位数。

请注意，这里 MSDN 还说比例因子还保留了十进制数中的任何尾随零。尾随零不会影响算术或比较运算中的 Decimal 数的值。但是，如果应用了适当的格式字符串，ToString 方法可能会显示尾随零。

这个解决方案看起来是最好的，但是等等，还有更多。通过[访问 C# 中的私有方法，](http://stsdb.com/forum/stsdb-4-x/sts-labs/455-accessing-private-members-c.html)我们可以使用表达式来构建对 flags 字段的直接访问，并避免构造 int 数组：

```
public delegate int GetDigitsDelegate(ref Decimal value);

public class DecimalHelper
{
    public static readonly DecimalHelper Instance = new DecimalHelper();

    public readonly GetDigitsDelegate GetDigits;
    public readonly Expression<GetDigitsDelegate> GetDigitsLambda;

    public DecimalHelper()
    {
        GetDigitsLambda = CreateGetDigitsMethod();
        GetDigits = GetDigitsLambda.Compile();
    }

    private Expression<GetDigitsDelegate> CreateGetDigitsMethod()
    {
        var value = Expression.Parameter(typeof(Decimal).MakeByRefType(), "value");

        var digits = Expression.RightShift(
            Expression.And(Expression.Field(value, "flags"), Expression.Constant(~Int32.MinValue, typeof(int))), 
            Expression.Constant(16, typeof(int)));

        //return (value.flags & ~Int32.MinValue) >> 16

        return Expression.Lambda<GetDigitsDelegate>(digits, value);
    }
} 
```

此编译代码分配给 GetDigits 字段。请注意，该函数接收十进制值作为 ref，因此不执行实际复制 - 仅对该值的引用。使用 DecimalHelper 中的 GetDigits 函数很简单：

```
decimal value = 3.14159m;
int digits = DecimalHelper.Instance.GetDigits(ref value); 
```

这是获取十进制值小数点后位数的最快方法。

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2015-09-29T07:08:16.183

依赖小数的内部表示并不酷。

这个怎么样：

```
 int CountDecimalDigits(decimal n)
    {
        return n.ToString(System.Globalization.CultureInfo.InvariantCulture)
                //.TrimEnd('0') uncomment if you don't want to count trailing zeroes
                .SkipWhile(c => c != '.')
                .Skip(1)
                .Count();
    } 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2012-11-20T16:35:06.197

你可以使用 InvariantCulture

```
string priceSameInAllCultures = price.ToString(System.Globalization.CultureInfo.InvariantCulture); 
```

另一种可能性是做这样的事情：

```
private int GetDecimals(decimal d, int i = 0)
{
    decimal multiplied = (decimal)((double)d * Math.Pow(10, i));
    if (Math.Round(multiplied) == multiplied)
        return i;
    return GetDecimals(d, i+1);
} 
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2015-08-06T08:32:59.827

这里的大多数人似乎没有意识到十进制认为尾随零对于存储和打印很重要。

因此 0.1m、0.10m 和 0.100m 可以比较相等，它们的存储方式不同（分别为值/比例 1/1、10/2 和 100/3），并将分别打印为 0.1、0.10 和 0.100 , 由`ToString()`.

因此，报告“精度太高”的解决方案实际上是在报告*正确*的精度`decimal`。

此外，基于数学的解决方案（例如乘以 10 的幂）可能会非常慢（对于算术，十进制比 double 慢约 40 倍，而且您也不希望混合使用浮点，因为这可能会引入不精确性）。类似地，强制转换为截断`int`或`long`截断的方法很容易出错（`decimal`其范围比其中任何一个都大 - 它基于 96 位整数）。

虽然不优雅，但以下可能是获得精度的最快方法之一（当定义为“不包括尾随零的小数位”时）：

```
public static int PrecisionOf(decimal d) {
  var text = d.ToString(System.Globalization.CultureInfo.InvariantCulture).TrimEnd('0');
  var decpoint = text.IndexOf('.');
  if (decpoint < 0)
    return 0;
  return text.Length - decpoint - 1;
} 
```

不变的文化保证一个“。” 作为小数点，尾随零被修剪，然后只需查看小数点后剩余多少位（如果有的话）。

编辑：将返回类型更改为 int

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2017-03-07T20:20:54.067

这是另一种方式，使用类型 SqlDecimal ，它具有 scale 属性和小数点右侧的位数。将您的十进制值转换为 SqlDecimal，然后访问 Scale。

```
((SqlDecimal)(decimal)yourValue).Scale 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2019-10-18T08:18:47.560

我正在使用与克莱门特的答案非常相似的东西：

```
private int GetSignificantDecimalPlaces(decimal number, bool trimTrailingZeros = true)
{
  string stemp = Convert.ToString(number);

  if (trimTrailingZeros)
    stemp = stemp.TrimEnd('0');

  return stemp.Length - 1 - stemp.IndexOf(
         Application.CurrentCulture.NumberFormat.NumberDecimalSeparator);
} 
```

请记住使用 System.Windows.Forms 来访问 Application.CurrentCulture

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2019-02-04T13:55:09.597

到目前为止，几乎所有列出的解决方案都在分配 GC 内存，这在很大程度上是 C# 做事的方式，但在性能关键环境中远非理想。（那些不分配使用循环并且也不考虑尾随零的那些。）

因此，为了避免 GC Allocs，您可以在不安全的上下文中访问比例位。这听起来可能很脆弱，但根据[Microsoft 的参考源](https://referencesource.microsoft.com/#mscorlib/system/decimal.cs,1b2858baf311cbf9)，decimal 的结构布局是 Sequential 甚至在其中有注释，而不是更改字段的顺序：

```
 // NOTE: Do not change the order in which these fields are declared. The
    // native methods in this class rely on this particular order.
    private int flags;
    private int hi;
    private int lo;
    private int mid; 
```

如您所见，这里的第一个 int 是 flags 字段。从文档和这里的其他评论中提到，我们知道只有 16-24 的位对比例进行编码，我们需要避免对符号进行编码的第 31 位。由于 int 是 4 个字节的大小，我们可以安全地这样做：

```
internal static class DecimalExtensions
{
  public static byte GetScale(this decimal value)
  {
    unsafe
    {
      byte* v = (byte*)&value;
      return v[2];
    }
  }
} 
```

这应该是最高效的解决方案，因为没有字节数组或 ToString 转换的 GC 分配。我已经在 Unity 2019.1 中针对 .Net 4.x 和 .Net 3.5 对其进行了测试。如果有任何版本失败，请告诉我。

***编辑：***

感谢@Zastai 提醒我可以使用显式结构布局在不安全代码之外实际实现相同的指针逻辑：

```
[StructLayout(LayoutKind.Explicit)]
public struct DecimalHelper
{
    const byte k_SignBit = 1 << 7;

    [FieldOffset(0)]
    public decimal Value;

    [FieldOffset(0)]
    public readonly uint Flags;
    [FieldOffset(0)]
    public readonly ushort Reserved;
    [FieldOffset(2)]
    byte m_Scale;
    public byte Scale
    {
        get
        {
            return m_Scale;
        }
        set
        {
            if(value > 28)
                throw new System.ArgumentOutOfRangeException("value", "Scale can't be bigger than 28!")
            m_Scale = value;
        }
    }
    [FieldOffset(3)]
    byte m_SignByte;
    public int Sign
    {
        get
        {
            return m_SignByte > 0 ? -1 : 1;
        }
    }
    public bool Positive
    {
        get
        {
            return (m_SignByte & k_SignBit) > 0 ;
        }
        set
        {
            m_SignByte = value ? (byte)0 : k_SignBit;
        }
    }
    [FieldOffset(4)]
    public uint Hi;
    [FieldOffset(8)]
    public uint Lo;
    [FieldOffset(12)]
    public uint Mid;

    public DecimalHelper(decimal value) : this()
    {
        Value = value;
    }

    public static implicit operator DecimalHelper(decimal value)
    {
        return new DecimalHelper(value);
    }

    public static implicit operator decimal(DecimalHelper value)
    {
        return value.Value;
    }
} 
```

要解决最初的问题，您可以剥离除此之外的所有字段`Value`，`Scale`但也许对某人拥有它们可能有用。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2020-07-09T07:47:11.837

作为考虑到的十进制扩展方法：

*   不同的文化
*   整数
*   负数
*   小数点后置零（例如 1.2300M 将返回 2 而不是 4）

```
public static class DecimalExtensions
{
    public static int GetNumberDecimalPlaces(this decimal source)
    {
        var parts = source.ToString(CultureInfo.InvariantCulture).Split('.');

        if (parts.Length < 2)
            return 0;

        return parts[1].TrimEnd('0').Length;
    }
} 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2012-11-21T14:14:17.207

我昨天写了一个简洁的小方法，它还返回小数位数，而不必依赖任何理想的字符串拆分或文化：

```
public int GetDecimalPlaces(decimal decimalNumber) { // 
try {
    // PRESERVE:BEGIN
        int decimalPlaces = 1;
        decimal powers = 10.0m;
        if (decimalNumber > 0.0m) {
            while ((decimalNumber * powers) % 1 != 0.0m) {
                powers *= 10.0m;
                ++decimalPlaces;
            }
        }
return decimalPlaces; 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-02-10T06:06:09.813

我在我的代码中使用以下机制

```
 public static int GetDecimalLength(string tempValue)
    {
        int decimalLength = 0;
        if (tempValue.Contains('.') || tempValue.Contains(','))
        {
            char[] separator = new char[] { '.', ',' };
            string[] tempstring = tempValue.Split(separator);

            decimalLength = tempstring[1].Length;
        }
        return decimalLength;
    } 
```

十进制输入=3.376；var instring=input.ToString();

调用 GetDecimalLength(instring)

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-12-18T16:02:56.927

使用递归，您可以：

```
private int GetDecimals(decimal n, int decimals = 0)  
{  
    return n % 1 != 0 ? GetDecimals(n * 10, decimals + 1) : decimals;  
} 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2019-03-05T03:24:26.993

```
string number = "123.456789"; // Convert to string
int length = number.Substring(number.IndexOf(".") + 1).Length;  // 6 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2012-11-20T16:42:25.813

你可以试试：

```
int priceDecimalPlaces =
        price.ToString(System.Globalization.CultureInfo.InvariantCulture)
              .Split('.')[1].Length; 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-02-13T11:10:55.903

我建议使用这种方法：

```
 public static int GetNumberOfDecimalPlaces(decimal value, int maxNumber)
    {
        if (maxNumber == 0)
            return 0;

        if (maxNumber > 28)
            maxNumber = 28;

        bool isEqual = false;
        int placeCount = maxNumber;
        while (placeCount > 0)
        {
            decimal vl = Math.Round(value, placeCount - 1);
            decimal vh = Math.Round(value, placeCount);
            isEqual = (vl == vh);

            if (isEqual == false)
                break;

            placeCount--;
        }
        return Math.Min(placeCount, maxNumber); 
    } 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-12-18T07:38:33.260

我实际上在这里测试了大多数解决方案。有些快速但不可靠，有些可靠但不快。通过修改@RooiWillie 的答案，我得到了足够快且可靠的答案：

```
public static int GetSignificantDecimalPlaces(decimal number)
{
    if (number % 1 == 0) return 0;
    var numstr = number.ToString(CultureInfo.InvariantCulture).TrimEnd('0');
    return numstr.Length - 1 - numstr.IndexOf('.');
} 
```

> 注意：它不计算尾随零。

xUnit 测试：

```
[Theory]
[InlineData(0, 0)]
[InlineData(1.0, 0)]
[InlineData(100, 0)]
[InlineData(100.10, 1)]
[InlineData(100.05, 2)]
[InlineData(100.0200, 2)]
[InlineData(0.0000000001, 10)]
[InlineData(-52.12340, 4)]
public void GetSignificantDecimalPlaces(decimal number, int expected)
{
    var actual = GetSignificantDecimalPlaces(number);
    Assert.Equal(expected, actual);
} 
```

# prolog - 序言中的并发

> ID：13477690
> 
> 赞同：0
> 
> 时间：2012-11-20T16:31:43.810
> 
> 标签：prolog

代码块如下..

```
1.fork(sort_zero([H1|T1],[H2|T2],HY,0)),
2.fork(sort_zero([H1|T1],[H3|T3],HZ,0)),
3.
4.set_zero(HY,HZ,HZ2,1), 
```

在上面的代码中，我得到了操纵列表 HY 和 HZ，然后我进一步使用列表 HY 和 HZ，我应该在第 1 行写什么。3 以确保在完成两个 fork 调用后执行第 4 行。我想要一个在第 3 行作为屏障的状态。两个分叉调用是相互独立的。我还尝试将 [H1|T1] 列表复制到另一个变量中，并在第 2 行而不是 [H1|T1] 中传递它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:18:06.500

在 SWI-Prolog 中，您可以使用线程并将它们与连接同步：

```
thread_create( (sort_zero([H1|T1],[H2|T2],HY,0), thread_exit(HY)), IdY, []),
thread_create( (sort_zero([H1|T1],[H3|T3],HZ,0), thread_exit(HZ)), IdZ, []),
thread_join(IdY, exited(HY)),
thread_join(IdZ, exited(HZ)),
set_zero(HY,HZ,HZ2,1),
... 
```

# python - 使用 Pycassa 查询 Cassandra 列

> ID：13477692
> 
> 赞同：0
> 
> 时间：2012-11-20T16:31:50.557
> 
> 标签：python, cassandra, pycassa

我有一个与此类似的 Cassandra DB 表：

```
key | name | client
1     A      C1
2     B      C2
3     C      C1 
```

我使用 Python (Pycassa) 访问我的 Cassandra 数据库。

有没有办法查询数据库以获得出现次数最多的客户端？例如，在这种情况下，它`C1`与`2`.

我不确定是否可以使用 Pycassa 直接查询 Cassandra。如果可能的话，我怎么能做到这一点，或者我应该使用其他工具？

谢谢

PS：我需要使用nosql，所以请不要建议我使用关系数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T02:49:12.223

您需要单独跟踪每个客户端的出现次数。如果不需要完美的准确性，您可以使用 Cassandra 的内置分布式计数器。否则，您将需要使用更准确的方案（计数列、定期重新计数或两者兼而有之）或将计数器存储在关系数据库中。

# c++ - cvtColor 断言失败（使用 C++ 的 OpenCV）

> ID：13477694
> 
> 赞同：4
> 
> 时间：2012-11-20T16:32:09.617
> 
> 标签：c++, opencv

我有一个

```
cv::Mat image; 
```

对象，我从文件中加载了图像，它可以正确读取它。

现在我编写了一个函数来将其转换为灰色。

```
cv::cvtColor(image, image, CV_RGB2GRAY); 
```

这个错误出现了：

```
OpenCV Error: Assertion failed (scn == 3 || scn == 4) in cvtColor, file /build/buildd/opencv-2.3.1/modules/imgproc/src/color.cpp, line 2834
terminate called after throwing an instance of 'cv::Exception'
  what():  /build/buildd/opencv-2.3.1/modules/imgproc/src/color.cpp:2834: error: (-215) scn == 3 || scn == 4 in function cvtColor 
```

可能是什么问题呢？

这就是我读取图像的方式（通过具有成员 cv::Mat m_image 的图像处理程序类）

```
imagehandler::imagehandler(const std::string& fileName)
: m_image(imread(fileName, CV_LOAD_IMAGE_COLOR))
{
        if(!m_image.data)
{
    cout << "Failed loading " << fileName << endl;
}

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T17:13:46.863

尝试使用不同的 dst 图像：

```
cv::Mat grayImage;
cv::cvtColor(image, grayImage, CV_RGB2GRAY); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-23T00:51:59.953

尝试 image.clone() 来处理图像

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-03-30T07:16:54.513

```
if(!image.empty()) {
    //your_code
} else
    std::cout<<"Emty " 
```

在转换之前检查矩阵。

# android - 使用 Android 中的 Geolocation 计算特定位置经过的时间

> ID：13477701
> 
> 赞同：0
> 
> 时间：2012-11-20T16:32:37.763
> 
> 标签：android, geolocation, maps, location, android-location

Android 提供 geolocation api 用于使用 gps、gsm 或 wifi 处理用户位置。这样，就可以确定用户的当前位置。我的方法完全基于来自 gps-receiver 的输入

使用 Geolocation API，我如何确定用户在特定地理位置上的时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:48:51.280

尝试使用类似的可运行文件：

```
 private Handler handler = new Handler();

  public static final int timeElapsedCheckingDelay = 100; // in ms

  private float timeElapsed = 0;

  private Runnable timeElapsedChecker = new Runnable()
  {
      public void run()
      {
          if(gpsActual != gpsLast) //get the last position and check
          {
            //You can export wherever for example a toast
            timeElapsed = 0; 
            gpsActual = gpsLast;
          }
          else
            timeElapsed +=0.1;

          handler.removeCallbacks(timeElapsedChecker); // remove the old callback
          handler.postDelayed(timeElapsedChecker, timeElapsedCheckingDelay); 

      }
  }; 
```

这或多或少是伪代码，希望对您有所帮助:)

# c++ - 当我删除 SDL_VideoInfo 指针时调试断言失败

> ID：13477705
> 
> 赞同：1
> 
> 时间：2012-11-20T16:32:55.227
> 
> 标签：c++, sdl, auto-ptr

我正在使用 SDL 制作游戏，并且正在使用 SDL_VideoInfo 来获取显示器的当前分辨率。

示例代码：（这可能有一些拼写错误或函数/变量类型的错误名称，我现在正在写这个我不记得了）。

```
#include <SDL.h>
#include <iostream>
using namespace std;

int main()
{
    SDL_Init(SDL_INIT_EVERYTHING);
    const SDL_VideoInfo *vInfo = SDL_GetVideoInfo();
    cout << "Moniter Resolution:\n";
    cout << vInfo->current_w << endl << vInfo->current_h << endl;
    delete vInfo;
    return 0;        
} 
```

前几次我运行它，它工作正常，然后我得到 Debug Assertion Failed 窗口弹出我。我不太确定这意味着什么，但我认为这与内存泄漏有关？我来自Java，所以内存泄漏和指针等对我来说都是新的，所以我有点困惑。

无论如何，当我不删除 vInfo 时，代码可以正常工作，但是在我看过所有 C++ 书籍和视频之后，它们都发出这样的信息：不删除指针是对编程的亵渎。所以，（显然）删除 vInfo 是我唯一的选择。

所以，我认为，我*认为*我通过这样做来修复它，或者，至少当我这样做时，没有 Debug Assertion Failed 消息：（再一次，从记忆中这样做，我可能有一些拼写错误或拼写错误会导致错误，但你应该明白这一点）。

```
int main()
{
    SDL_Init(SDL_INIT_EVERYTHING);
    auto_ptr<const SDL_VideoInfo> vInfo(SDL_GetVideoInfo());
    cout << "Moniter Resolution:\n";
    cout << vInfo->current_w << endl << vInfo->current_h << endl;
    vInfo.release();
    return 0;        
} 
```

将其放入自动指针中，一切都会解决。虽然我仍然不确定这是否解决了问题；仅仅因为我没有收到错误消息并不意味着没有发生不好的事情。

我的问题是，为什么我必须将 vInfo 放入 auto_ptr 以避免此错误，有没有一种方法可以在不使用 auto_ptr 的情况下做到这一点，或者我什至不必担心删除 vInfo？

有些人可能会说这个问题没用，因为我已经解决了这个问题，但我要问的问题不是如何解决这个错误，这就是我首先遇到问题的原因，如果我的解决方案可以修改以任何方式（不必使用 auto_ptr，或者根本不必删除 vInfo）。

PS这个错误当然不仅仅是我的电脑做了一些奇怪的事情，我在多台电脑上运行了相同的代码并得到了相同的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T17:38:57.303

从[文档中](http://sdl.beuc.net/sdl.wiki/SDL_GetVideoInfo)：

> [ `SDL_GetVideoInfo()`] 返回一个***只读指针***，指向包含当前视频硬件信息的结构。

SDL 正在管理指向的内存，所以不要尝试`delete`它。它很可能会返回一个指向`static`结构的指针。

即使 SDL（一个 C 库）*没有*管理内存并希望您清理它，您也不应该调用*'* d内存。`delete``malloc()`

# php - 强制下载无响应

> ID：13477706
> 
> 赞同：0
> 
> 时间：2012-11-20T16:32:59.897
> 
> 标签：php, header, content-type

我正在使用 ajax 调用来传递一个值。我已经这样做了，我想获取该值并在我的表上查找特定图像。

当我下载图像时，它对我不起作用。我查看了我的 php.ini 文件，我的 allow_furl_open 已关闭。我认为这可能是罪魁祸首。请忽略 mysql 位，因为我知道它应该更新，这不是我的代码，因此将被更改。

这是代码。

```
if (isset($_POST['download'])) {
$sql = "SELECT `imageURL` FROM `digital_materials` WHERE `digital_materials`.`id` = '$id'";
$record = mysql_query($sql);
$row = mysql_fetch_assoc($record);

$fileName = $row['imageURL'];
$fileURL = 'images/products/' . $fileName;
header('Content-Type: application/octet-stream');
header("Content-Transfer-Encoding: Binary");
header('Content-Disposition: attachment; filename=' . $row['imageURL']);
readfile($fileURL);
exit();

} 
```

这应该有效。任何问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:51:35.707

正如 Marc B 的评论中提到的，您无法通过 ajax 下载文件。Ajax 只会将网络请求返回给发送者（即 jQuery ajax 有一个包含请求结果的成功处理函数：http: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)）。一种可能的解决方案是使用 php url 打开一个新窗口，该窗口将触发下载请求。一个javascript解决方案是：

```
window.open('dynamic-image-url.php'); 
```

另一种解决方案是使用带有 target="_blank" 属性的锚标记。

```
<a href="dynamic-image-url.php" target="_blank">Download Image</a> 
```

以下是用于返回从 php 的 readfile 文档中获取的图像的 php 解决方案：

```
<?php
$file = 'monkey.gif';

if (file_exists($file)) {
    header('Content-Description: File Transfer');
    header('Content-Type: application/octet-stream');
    header('Content-Disposition: attachment; filename='.basename($file));
    header('Content-Transfer-Encoding: binary');
    header('Expires: 0');
    header('Cache-Control: must-revalidate');
    header('Pragma: public');
    header('Content-Length: ' . filesize($file));
    ob_clean();
    flush();
    readfile($file);
    exit;
}
?> 
```

编辑*** * 添加了将发布变量的表单示例

```
<form action="dynamic-image.php" method="post" target="_blank">
   <input type="hidden" name="id" value="<?php echo $value; ?>" />
   <input type="submit" value="Download Image" />
</form> 
```

然后，您会将变量引用为 $_POST['id']，因为这是表单中 name 属性的值。

使用 $_GET 参数，您将执行以下操作：

```
<a href="dynamic-image-url.php?id=<?php echo $id; ?>" target="_blank">Download Image</a> 
```

使用 $_GET['id'] 引用 PHP 中的值，因为 id 是查询字符串参数的名称。

# java - eclipse中的maven命令行与maven m2e——jdom SaxBuilder.build()的编译问题抛出IOException

> ID：13477707
> 
> 赞同：0
> 
> 时间：2012-11-20T16:32:59.727
> 
> 标签：java, eclipse, maven, m2e

我有一个使用 JDOM 的 SaxBuilder.build(File) 方法的类。此方法抛出 IOException。

我的类在 build() 方法调用周围有一个 try catch 块，然后是一个“catch (IOException e)”块。

Eclipse（使用 m2e 并使用 maven 构建）要求必须捕获或传播此 IOException。

我的问题是，当我在命令行上使用 maven 构建时，它说在 try 块中没有抛出 IOException。

这是来自 maven 命令行的错误消息：

> 异常 java.io.IOException 永远不会在相应的 try 语句的主体中抛出

这是导致问题的代码片段：

```
SAXBuilder builder = new SAXBuilder();
Document document;
try
{
  document = builder.build(new File(goldFilePath));
} catch (JDOMException e)
{
  throw new AnalysisEngineProcessException(e);
} catch (IOException e)
{
  throw new AnalysisEngineProcessException(e);
} 
```

# c# - 使用 linq 填充类列表

> ID：13477712
> 
> 赞同：-1
> 
> 时间：2012-11-20T16:33:08.090
> 
> 标签：c#, linq, linq-to-sql

我有一个类似于下面的表格：

```
Data {
    id varchar(50),
    pId uniqueidentifier ,
    fId uniqueidentifier ,
    xid uniqueidentifier,
    flag smallint 
} 
```

该表包含很多重复行，因为 pId 和 fId 是 1:n 关系，fId 到 xId 也是 1:n 关系。

我想查询这个表并填充一个obj，如下所示：

```
class P
{
    Guid id;
    List<F> fList; 
}

class F
{
    Guid id;
    List<X> xList; 
}

class X
{
    Guid id;
    byte flag; 
} 
```

我正在学习Linq。任何使用 Linq 从表中填充类 P 的解决方案都会有所帮助。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T16:42:10.797

此查询将返回`IEnumerable<P>`（不确定转换`smallint`为`boolean`但其他东西应该可以）

```
var query = from p in context.Data
            group p by p.pId into gp
            select new P()
            {
                id = gp.Key,
                fList = (from f in gp
                         group f by f.fId into gf
                         select new F()
                         {
                             id = gf.Key,
                             xList = gf.Select(x => new X() { id = x.xid, 
                                                              flag = x.flag })
                                       .ToList()
                         }).ToList()
            }; 
```

评论：

`gp`将包含与某个 pId 对应的所有行，换句话说 - 它返回与 pId 相关的所有 fId。

`gf`将包含先前结果中与某些 fId 相关的所有行（即与 fId 相关的所有 xid）

# c - 如何将信号 SIGUSR1 和 SIGUSR2 从父母发送给孩子？

> ID：13477714
> 
> 赞同：1
> 
> 时间：2012-11-20T16:33:08.597
> 
> 标签：c, unix, signals, freebsd

我有以下源代码，我正在从父母向孩子发送信号：

```
sigset_t sig_m1, sig_m2, sig_null;
int signal_flag=0;

void start_signalset();

void sig_func(int signr) {
  printf("%d\n", signr, n);

  start_signalset();
}

void start_signalset() {
  if(signal(SIGUSR2, sig_func) == SIG_ERR) {
    exit(0);
  }

 if(signal(SIGUSR1, sig_func) == SIG_ERR) {
    exit(0);
  }
}

void wait_for_parents() {
    while(signal_flag == 0) {
        sigsuspend(&sig_null);
    }
}

int main(){
    int result,pt_pid;
    start_signalset();
    pt_pid=getpid(); 

    result = fork();
    if(result==-1){ 

        printf("Can't fork child\n");
        exit(-1);
    } else if (result == 0) {

            wait_for_parents();

    } else {
       kill(result,SIGUSR2);
       kill(result,SIGUSR2);
       kill(result,SIGUSR1);
       kill(result,SIGUSR2);

        signal_flag = 1;
    }    
    return 0; 
} 
```

我看到：31、31、31、30，但我期待看到 31、31、30、31。我哪里出错了？我认为同步存在一些问题。但是，我不明白如何解决它，我不确定问题是否存在。

问候，丹尼斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:36:52.193

您发送信号的速度如此之快，以至于信号处理程序处理`SIGUSR1`被下一个信号中断并在它返回之前首先处理它。

*   信号 2 到达，打印
*   信号 2 到达，打印
*   信号 1 到达，在打印之前被中断，因为另一个信号 2 到达
*   信号 2 到达，打印
*   在最后一个信号处理程序返回信号处理程序以`SIGUSR1`继续执行和打印之后。

要么向你的父母发送某种形式或确认，让你的父母睡一会儿或让你的信号处理程序更快地返回（将信号到达存储在缓冲区中。调用`printf`是一个相当长的调用。

当一个进程的信号到达时，该进程的一个随机线程被中断并开始执行信号处理程序。如果信号处理程序返回，线程将照常继续执行。信号处理程序也可以被中断！

# javascript - 如何使用jQuery从span标签的前一个隐藏输入中获取值

> ID：13477719
> 
> 赞同：0
> 
> 时间：2012-11-20T16:33:15.077
> 
> 标签：javascript, jquery

如何使用jQuery从span标签之前的隐藏输入中获取值

```
 <div>
   <input type="hidden" value="<?php echo $activeTimeID; ?>" class="activeTimeId"
  name="activeTimeID<?php echo $j;?>[]" />
     <span class="closeTime">close</span>
   </div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T16:34:48.330

```
$('.closeTime').prev('input').val(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T16:34:48.660

使用[.prev()](http://api.jquery.com/prev/)获取前一个元素 - 传入 input:hidden 作为选择器 - 所以它只会寻找隐藏的输入

```
$('span.closeTime').prev('input:hidden').val() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T16:35:34.143

使用[`prev([selector])`](http://api.jquery.com/prev/)：

```
var val = $('span').prev('input[type="hidden"]').val(); 
```

这将找到 span 并选择紧接在前面的兄弟姐妹，即`input[type="hidden"]`

# java - jblas安卓错误

> ID：13477725
> 
> 赞同：0
> 
> 时间：2012-11-20T16:33:32.573
> 
> 标签：java, android, android-ndk

我有 jblas 1.0.2 并且有这个错误：

```
The library 'jblas-1.2.0.jar' contains native libraries that will not run on the device.
[2012-11-20 17:37:36 - com.hexar.filebroswer.activities.FileBroswerActivity] Additionally some of those libraries will interfer with the installation of the application because of their location in lib/
[2012-11-20 17:37:36 - com.hexar.filebroswer.activities.FileBroswerActivity] lib/ is reserved for NDK libraries.
[2012-11-20 17:37:36 - com.hexar.filebroswer.activities.FileBroswerActivity] The following libraries were found:
[2012-11-20 17:37:36 - com.hexar.filebroswer.activities.FileBroswerActivity]  - lib/static/Mac OS X/x86_64/libjblas_arch_flavor.jnilib
[2012-11-20 17:37:36 - com.hexar.filebroswer.activities.FileBroswerActivity]  - lib/static/Mac OS X/x86_64/sse3/libjblas.jnilib
[2012-11-20 17:37:36 - com.hexar.filebroswer.activities.FileBroswerActivity]  - lib/static/Linux/i386/sse2/libjblas.so
[2012-11-20 17:37:36 - com.hexar.filebroswer.activities.FileBroswerActivity]  - lib/static/Linux/i386/sse3/libjblas.so
[2012-11-20 17:37:36 - com.hexar.filebroswer.activities.FileBroswerActivity]  - lib/static/Linux/i386/libjblas_arch_flavor.so
[2012-11-20 17:37:36 - com.hexar.filebroswer.activities.FileBroswerActivity]  - lib/static/Linux/amd64/sse2/libjblas.so
[2012-11-20 17:37:36 - com.hexar.filebroswer.activities.FileBroswerActivity]  - lib/static/Linux/amd64/sse3/libjblas.so
[2012-11-20 17:37:36 - com.hexar.filebroswer.activities.FileBroswerActivity]  - lib/static/Linux/amd64/libjblas_arch_flavor.so
[2012-11-20 17:37:36 - com.hexar.filebroswer.activities.FileBroswerActivity]  - lib/dynamic/Linux/amd64/sse3/libjblas.so
[2012-11-20 17:37:36 - com.hexar.filebroswer.activities.FileBroswerActivity]  - lib/dynamic/Linux/amd64/libjblas_arch_flavor.so
[2012-11-20 17:37:36 - com.hexar.filebroswer.activities.FileBroswerActivity] Unknown error: org.eclipse.core.runtime.OperationCanceledException 
```

我只使用`FloatMatrix`和特征向量类。

我必须安装NDK吗？以后稳定性会不会有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:01:57.123

看起来您使用的 jblas 版本不是为 Android 编译的。查看错误抱怨的不同路径：它们都被命名为“Mac OS X/something”或“Linux/i386/something”等......

在 jblas.org 上快速浏览后，目前显然没有可用于 Android 的预编译版本：

> 存在一个带有预构建本机库的预打包 jar 文件。目前，涵盖 Linux (i386/amd64)、Mac OS X (i386/x86_64) 和 Windows (i386)。目前，仅在 Windows 上对 amd64 的支持有限（功能完整，但性能不同）。

# excel - 在此之前确定 VSTO 4 中的 Office 版本。应用程序已设置

> ID：13477726
> 
> 赞同：6
> 
> 时间：2012-11-20T16:33:33.530
> 
> 标签：excel, c#-4.0, vsto, office-interop, ribbon

我想在插件`CreateRibbonExtensibilityObject()`上调用 VSTO 插件时确定 Office/Excel 的版本。我遇到了这个问题，并且遇到了：

*   `this.Application`插件的 是，`null`此时 VSTO 尚未设置。
*   在`ThisAddIn_Startup(..)`之后调用`CreateRibbonExtensibilityObject()`。

`this.Application.Version`尚不可用，因为此时插件似乎尚未初始化。有没有办法在 VSTO 运行时调用插件时确定 Excel 的版本（ *12、14 或 15*`CreateRibbonExtensibilityObject()` ） ？

**更新**

发现 ItemProvider 被实例化了，我用下面的方法获取了主要的office版本。

```
FieldInfo temp = this.ItemProvider.GetType().GetField("_officeVersion", BindingFlags.NonPublic | BindingFlags.Instance);
uint officeVersion = (uint)temp.GetValue(this.ItemProvider); 
```

我也接受 SliverNinja 的回答。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T17:27:12.420

您可以使用`System.Diagnostics`访问[当前运行的Office进程](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.getcurrentprocess.aspx)（*`excel.exe`*），获取[进程文件名的路径](http://msdn.microsoft.com/en-us/library/system.diagnostics.processmodule.filename.aspx)（[*`MainModule`*](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.mainmodule.aspx)），然后使用[`FileInfoVersion`](http://msdn.microsoft.com/en-us/library/system.diagnostics.fileversioninfo.aspx)确定[主要产品版本](http://msdn.microsoft.com/en-us/library/system.diagnostics.fileversioninfo.productmajorpart.aspx)。

```
int majorVersion = FileVersionInfo.GetVersionInfo(Process.GetCurrentProcess().MainModule.FileName).ProductMajorPart; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-11T23:04:56.963

我正在使用`FileVersionInfo`. `MainModule`我希望这可以保存文件访问以提取版本信息。

```
int majorVersion = Process.GetCurrentProcess().MainModule.FileVersionInfo.ProductMajorPart; 
```

# facebook-graph-api - Facebook C# SDK 6.0.10 - 如何将 GetTaskAsync 与 FQL 请求一起使用

> ID：13477727
> 
> 赞同：0
> 
> 时间：2012-11-20T16:33:37.413
> 
> 标签：facebook-graph-api, facebook-c#-sdk

我使用 facebook C# SDK 6.0.10 并尝试发送这样的 FQL 请求：

```
 var fbClient = new FacebookClient(m_accessToken);

            fbClient.GetCompleted +=
                (o, e) =>
                {
                    if (e.Error == null)
                    {
                        dynamic result = e.GetResultData();
                           ....
                    }
                };

            var query = string.Format("SELECT domain_id FROM domain_admin WHERE owner_id=1234");
            fbClient.GetTaskAsync(query); 
```

我收到一个错误：**“（OAuthException）（#803）您请求的某些别名不存在“SELECT domain_id FROM domain_admin WHERE owner_id=1234”**

如果我在“Facebook API Explorer”中尝试相同的语法，它会起作用并且我有回应。

如何在 Facebook C# SDK 6.0.10 和 GetTaskAsync 中使用 FQL 请求？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T01:59:20.633

[http://csharpsdk.org/docs/making-synchronous-requests](http://csharpsdk.org/docs/making-synchronous-requests)

```
dynamic result = await fb.GetTaskAsync("fql", query"); 
```

如果您正在使用`GetTaskAsync`，建议在支持的情况下使用 async/await。或使用`ContinueWith`代替`GetCompleted`.

# css - CSS3 转换不同浏览器的操作方式

> ID：13477730
> 
> 赞同：1
> 
> 时间：2012-11-20T16:33:45.153
> 
> 标签：css, firefox, google-chrome, 3d, safari

我目前正在用 CSS3 试验 3D 变换。我知道目前并非每个浏览器都支持 3D 变换，但是，我注意到浏览器之间元素的放置存在显着差异。在 Safari 中，元素完美地排列在我期望的位置。但在 Chrome 中，该元素相差 100 像素。

我在网上找不到任何信息证实，但经过一番调查，似乎在 Safari 中，X 轴原点位于窗口的最左侧，而在 Firefox 和 Chrome 中，X 轴已死- 窗口中心（仅供参考，Y 轴和 Z 轴在这三个浏览器之间具有相同的原点。

关于如何纠正这个问题的任何想法？

这是相关的CSS：

```
#container {
  -webkit-perspective: 1200px;
  -webkit-perspective-origin: 50% 50%;
  -moz-perspective: 1200px;
  -moz-perspective-origin: 50% 50%;
}

#cube {
  -webkit-transform: translate3d(438px,137px,-282px) rotateX(0deg) rotateY(0deg) rotateZ(0deg);
  -webkit-transform-style: 3d-perspective;
  -moz-transform: translate3d(438px,137px,-282px) rotateX(0deg) rotateY(0deg) rotateZ(0deg);
  -moz-transform-style: 3d-perspective;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T00:51:25.287

好吧...

经过几个小时的修补，我想通了，并想发布我的答案，因为这些信息可能对其他人有所帮助。

发生的事情是在#cube 所在的div 中（我们称之为#wrapper），我将css 属性“text-align”设置为居中。在 Firefox 和 Chrome 中，该设置将 Y 轴的原点设置为屏幕中心（即 #wrapper 的中心，因为 #wrapper 是屏幕的宽度。）但是，Safari 不会将该属性纳入它对 3D 变换的计算（也可能是 2D 变换，尽管我不会明确地说出来。）我所要做的就是删除该属性——然后就可以了！

# java - 在 WebSphere 中对传入的 SOAP 消息执行模式验证

> ID：13477731
> 
> 赞同：2
> 
> 时间：2012-11-20T16:33:45.920
> 
> 标签：java, web-services, soap, websphere

我有一些网络服务，我想对传入的消息进行模式验证。从我的研究中，我看到有一个 annotation `@SchemaValidation`，但它只在 Oracle 的 JBoss 上可用（也可能在 WebLogic 和 Glassfish 上？）而不是 WebSphere。

对于 WebSphere，我能想到的唯一解决方案是编写一个自定义 SOAP 处理程序并在那里验证传入的 XML，但问题是我不知道如何将验证错误传递给我的 Web 服务实现类，因此我可以返回一个错误包含给客户端的错误。

有没有更好的方法来验证 WebSphere（第 7 版）上的 SOAP 消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T17:22:22.930

啊哈...我不得不`SOAPFaultException`从 custom中抛出一个`SOAPHandler`，如下所示：

```
try
{
    ...
    ...
    validator.validate(source); 
}
catch (SAXException saxe)
{
    System.out.println("SAXException occurred");
    SOAPFault fault = null;
    try
    {
        fault = SOAPFactory.newInstance().createFault();
        fault.setFaultString(saxe.getMessage());
    }
    catch (SOAPException soape)
    {
        LOG.error("Error creating SOAPFault: "+soape.getMessage());
    }
    throw new SOAPFaultException(fault);
} 
```

被`SOAPFaultException`发回调用客户端，他们可以看到他们的消息导致的验证错误。

# asp.net - 如何为内部和外部站点组织 VS 解决方案

> ID：13477732
> 
> 赞同：0
> 
> 时间：2012-11-20T16:33:51.630
> 
> 标签：asp.net, visual-studio-2010, web-applications, projects-and-solutions

我正在开发一个具有 Intranet 和面向 Internet 的站点的 Web 应用程序。每个应用程序将存在于物理上不同的服务器上。不同的网络应用程序会使用大量的通用代码，所以最大的区别在于外部站点可以使用哪些功能，远远少于内部版本。但是，外部的显然会有不同的web.config、sitemap等，以及一些只出现在外部的页面。

我想知道.NET 中是否有一种标准方法来说明如何在解决方案中进行布局，无论是从代码管理的角度还是部署的角度。我可以轻松地做一些简单的事情，比如将相同的应用程序和所有代码部署到两台服务器，可能只是使用不同的登录页面，然后使用基于角色的安全性来限制外部用户看到的内容。但是，这对我来说真的很臭，因为我讨厌在不需要的外部服务器上拥有各种文件的想法。

我认为应该有某种方法来布置解决方案，以便他们可以利用公共代码（包括公共页面）。显然，从其他项目构建的 DLL 不是要共享的问题，实际上是如何共享前端页面，并为每个页面设置不同的部署。

也许我可以将它们全部放在同一个 Visual Studio 项目中，然后调整一个 MSBuild 脚本来完成这项肮脏的工作？

感谢您提供的任何东西！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T01:42:15.400

似乎没有人对此有任何意见，所以我会让你知道我打算做什么，以防它帮助其他人。

我将使用 External、Internal 和 Common 文件夹来布置我的 Web 项目。我将使用一个 Web 设置项目来帮助部署我的解决方案，我将为外部和内部各有一个设置项目，并且我将使用文件过滤器从我的任何部分中排除我不想要的部分正在构建（排除外部构建的内部页面，反之亦然，而两者都将获得通用页面/代码）。

这将允许我将所有与 Web 相关的代码捆绑到同一个 VS 项目中（从而轻松利用共享页面），同时仍然只部署真正需要在每个服务器上的代码。

我希望这是有道理的！

# grails - 请求参数未绑定到 grails 命令对象

> ID：13477733
> 
> 赞同：0
> 
> 时间：2012-11-20T16:33:55.900
> 
> 标签：grails, grails-controller, grails-2.1

我已经从 Grails 1.3.6 升级到使用 Grails 2.1.1，并且一些正在工作的命令对象不再从请求参数中获取数据绑定。

我创建了一个实验控制器来重现该问题：

```
package my.controllers

import troubleshooting.*

class ExperimentalController {

    def toggle(ExperimentalCommand cmd){
        render "<pre>${this.properties}</pre>"
        render "<h3>Raw</h3>The cmd.id was/is '${cmd.id}'<br/>The params.id was/is '${params.id}'<br/>They should be the same but they aren't<br/>The target ala cmd then params was/is '${cmd.target}' '${params.target}'<br/><hr/><hr/>"
        bindData(cmd,params)//not even this works wtf?
        render "<h3>bindData(cmd,params)</h3>The cmd.id was/is '${cmd.id}'<br/>The params.id was/is '${params.id}'<br/>They should be the same but they aren't<br/>The target ala cmd then params was/is '${cmd.target}' '${params.target}'<br/><hr/><hr/>"
        cmd = new ExperimentalCommand()
        render "<h3>New Cmd</h3>The cmd.id was/is '${cmd.id}'<br/>The params.id was/is '${params.id}'<br/>They should be the same but they aren't<br/>The target ala cmd then params was/is '${cmd.target}' '${params.target}'<br/><hr/><hr/>"
        cmd = new ExperimentalCommand(params)
        render "<h3>New Cmd binding constructor</h3>The cmd.id was/is '${cmd.id}'<br/>The params.id was/is '${params.id}'<br/>They should be the same but they aren't<br/>The target ala cmd then params was/is '${cmd.target}' '${params.target}'<br/><hr/><hr/>"
        bindData(cmd,params,[include:["id","target"]])
        render "The cmd.id was/is '${cmd.id}'<br/>The params.id was/is '${params.id}'<br/>They should be the same but they aren't<br/>The target ala cmd then params was/is '${cmd.target}' '${params.target}'<br/><hr/><hr/>"

    }
}
class ExperimentalCommand{
    def id,target,action,controller

} 
```

如果你执行：

grails 运行应用程序

有了它，然后转到：

```
http://localhost:8080/YourApp/experimental/toggle/foo?target=bullseye&cmd.target=whatever 
```

您会看到（在我的情况下）第一次尝试渲染 cmd.id 将其显示为 null，尽管 params.id 是 foo

从这个练习中，我还发现未指定包含 id 和目标的 bindData 调用完全失败，并且使用参数显式实例化命令对象会导致异常。

我在这里完全不知所措。我已经尝试过诸如覆盖 getInstanceControllersApi 方法以返回一个包装器，该包装器记录不同的 bindData 调用，这样我就可以看到发生了什么以及如何控制它，但什么也没告诉我。

我可以将控制器和操作字段添加到命令对象，以防止它在调用 new ExperimentalCommand(params) 时出错，但我不应该做任何 Grails 文档声明绑定将在实例上完成的操作调用操作之前的命令对象，但在我的情况下它不是。

谷歌没有发现任何东西，所以显然我是第一个必须处理这个问题的人之一。

问题是我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:44:56.390

1.3.6 和 2.x 之间的数据绑定机制发生了各种变化，我要尝试的第一件事是为命令对象属性提供正确的类型，而不仅仅是`def`

```
class ExperimentalCommand{
    String id
    String target
    String action
    String controller
} 
```

用于数据绑定[的 Grails 2.1.1 文档](http://grails.org/doc/2.1.1/guide/theWebLayer.html#dataBinding)`new CommandObject(params)`讨论了数据绑定的形式和`obj.properties = params`形式，并声明

> Grails 中的这些数据绑定形式非常方便，但也是不分青红皂白的。换句话说，它们将绑定目标对象的所有非瞬态、**类型化** *[我的粗体]*实例属性，包括您可能不想绑定的那些。

# python - 如何使用 python 链接到另一个目录？

> ID：13477735
> 
> 赞同：1
> 
> 时间：2012-11-20T16:34:01.063
> 
> 标签：python, web, jinja2

在 blog.py template_dir = os.path.join(os.path.dirname( **file** ), 'templates')

^我知道这是在同一目录中搜索模板文件夹的方法，但是兄弟目录（即当前文件夹父级的其他文件夹）呢？

问题是：

当前文件 WebAppName/Backend/blog.py

我如何参考？WebAppName/前端/模板/

为了访问前端文件夹中的模板，我应该将 template_dir 更改为什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:37:28.510

```
template_dir = os.path.abspath(
               os.path.join(os.path.dirname(__file__),
                            '../Frontend/templates')) 
```

# wpf - 在列表视图中的项目之间绘制一个carret

> ID：13477738
> 
> 赞同：2
> 
> 时间：2012-11-20T16:34:12.387
> 
> 标签：wpf, drag-and-drop, treeview

[我正在尝试在 WPF TreeView](http://msdn.microsoft.com/en-us/library/system.windows.controls.treeview.aspx)中实现项目的拖放重新排序，并希望能够在树视图中的项目之间向用户显示一个小括号，以便能够指示项目在放置时的位置操作完成，有点像下面的截图（除了树视图而不是列表视图）

![所需效果的屏幕截图](../Images/c3d77ba7111c8f6a72fe16acf92a3ef3.png)

我想我了解拖放在 WPF 中的工作原理，并计划通过处理`OnDragOver`事件来确定所需位置来实现这一点，但是我不确定我应该如何绘制生成的 carret 效果。

我是否应该在列表视图中我希望删除该项目的位置插入一个虚拟项目（请注意，理想情况下，我不希望列表中的项目明显移动，因此该项目占用的高度必须为 0 )，还是有更简单的方法来达到同样的效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T09:38:09.383

1.  您需要抽象 Adorner 类的子类。
2.  我已经覆盖了 OnRender 来绘制指南/插入符号（一些几何图形没什么特别的线）
3.  我在 Adorner 上有一个公共属性，DataGrid 在其上绘制装饰器
4.  具有两个参数的公共方法 SetMousePosition：鼠标悬停的 MouseCoords + DataGridRow。我使用这些数据来确定在 DataRow 上方或下方绘制指南/插入符号的位置，但您在 DataGrid 的可视区域中绘制。我做了一些额外的计算来确定该项目是否需要在之前或之后插入等。

如果您有自定义装饰器，现在可以将其添加到 DataGrid 的装饰器层：

```
 var adornerLayer = AdornerLayer.GetAdornerLayer(_dataGrid);
        adornerLayer.Add(_dragGuide); 
```

但是，无论出于何种原因，您需要在拖动操作结束后立即将其删除，否则指南/插入符号仍然可见：

```
var adornerLayer = AdornerLayer.GetAdornerLayer(_dataGrid);
adornerLayer.Remove(_dragGuide); 
```

如果你有这个，那么你可以开始处理所有的例外情况： 在所有列左侧的区域中删除行 在行所在的区域下方删除行。Dropping 不完全可见的行（底部或上部滚动到看不见的地方） 从窗口的不同实例拖放。等等等等

最后，大多数用户并不喜欢辛勤的工作，因为他们不知道可以拖放，或者他们更喜欢使用按钮。

但我希望上面能给你一个启动。

啊，我忘记了这个对我有帮助的链接：[MSDN doc: Adorners overview](http://msdn.microsoft.com/en-us/library/ms743737.aspx "MSDN 文档：装饰器概述")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T21:15:12.300

我使用装饰器在第三方数据网格中绘制放置指南。我记得很多细节都是为了获得可接受的用户体验。比如拖拽时滚动，有延迟滚动。绘制行的可见宽度的指南也不是微不足道的。最后但并非最不重要的一点是，装饰品有自己的特点。

# hash - History.js 书签支持 HTML5 (pushState) 和 HTML4 (#)

> ID：13477739
> 
> 赞同：1
> 
> 时间：2012-11-20T16:34:15.400
> 
> 标签：hash, history.js, url-parsing

我在 HTML5 和 HTML4 浏览器中都有通过 History.js 工作的后退和前进按钮。

我现在尝试通过解析 url 并在查询字符串中加载内容来添加书签支持。我通常用来执行此操作的代码是：

```
var urlParams = {};
            (function () {
            var match,
                pl     = /\+/g,  
                search = /([^&=]+)=?([^&]*)/g,
                decode = function (s) { return decodeURIComponent(s.replace(pl, " ")); },
                query  = window.location.search.substring(1);

            while (match = search.exec(query))
            urlParams[decode(match[1])] = decode(match[2]);
            })(); 
```

这适用于 HTML5，但显然不适用于 HTML4。什么是解析 HTML4 中的哈希和 HTML5 中的子字符串的好方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T18:00:28.477

在此页面上找到了解决方案：[https ://getsatisfaction.com/balupton/topics/history_js_and_retrieving_state_from_a_url](https://getsatisfaction.com/balupton/topics/history_js_and_retrieving_state_from_a_url)

“但是，您可以从我的一个名为 jQuery Sparkle 的实用程序项目中使用此功能来满足您的需求：[https ://github.com/balupton/jquery-sparkle/blob/master/scripts/resources/core.string.js# L164](https://github.com/balupton/jquery-sparkle/blob/master/scripts/resources/core.string.js#L164)

所以你会这样做：

```
var State = History.getState(), dataQuery = State.url. queryStringToJSON();" 
```

# iphone - 如何将 Youtube 视频添加到 UITableView？

> ID：13477740
> 
> 赞同：2
> 
> 时间：2012-11-20T16:34:24.697
> 
> 标签：iphone, ios, xcode, sdk, youtube

我对 Youtube 视频有一些疑问：

1- 我想将一些 Youtube 视频添加到表格视图中。

2-我想在这个表格视图中添加一个字幕，显示每个视频的评分（喜欢和不喜欢），就像旧 Youtube iPhone 内置应用程序中的附加图片一样

![旧的 Youtube 应用](../Images/b27cfa01974488d2fe30d638692b0fff.png)

我想做的唯一区别是以数字显示评分，例如：（喜欢：29，不喜欢：3），而不是像以前的 Youtube iPhone 内置应用程序那样以百分比显示。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T18:50:55.760

您应该使用 Youtube API。例如，如果您正在使用搜索栏并根据相关文本搜索相关视频，那么您应该使用以下链接，并解析获得的结果，我使用 NSXML Parser delegates 进行解析。希望这会帮助你。

```
- (void)searchBarSearchButtonClicked:(UISearchBar *)searchBar {
    [_searchBar resignFirstResponder];
    self.typeString = [NSString stringWithFormat:@"%@",searchBar.text];
    _xmlUrl = [NSString stringWithFormat:@"http://gdata.youtube.com/feeds/api/videos?vq=%@&orderby=relevance&start-index=1&max-results=10&alt=atom",[self.typeString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
    NSURLRequest *request = [[NSURLRequest alloc] initWithURL:[NSURL URLWithString:_xmlUrl]];
    _urlConnection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
    [request release];
    [_searchTableView reloadData];
} 
```

# 杂注标记 - NSXMLParser 委托方法

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict{

    if ([elementName isEqualToString:@"entry"]) {
        isEntry = YES;
        isThumbnail=NO;
        isUrl=NO;
        _xmlObject = [[YoutubeData alloc] init];
    }
    else if ([elementName isEqualToString:@"title"] && isEntry){
        isTitle = YES; 
    }
    else if ([elementName isEqualToString:@"media:category"] && isEntry){
        isMediaCategory=YES;
    }
    else if ([elementName isEqualToString:@"yt:statistics"] && isEntry){
        int totalViewers = [[attributeDict objectForKey:@"viewCount"] intValue];
        _xmlObject.songViewers = [NSString stringWithFormat:@"%d",totalViewers];
        int favorite = [[attributeDict objectForKey:@"favoriteCount"] intValue];
        float percentage = (favorite*100.0)/totalViewers;
        _xmlObject.songLikePercent = [NSString stringWithFormat:@"%.2f %@",percentage, @"%"];
    }
    else if ([elementName isEqualToString:@"yt:duration"] && isEntry){
        _xmlObject.songDuraion = [attributeDict objectForKey:@"seconds"];
        NSLog(@"Duration is: %@",_xmlObject.songDuraion);
    }
    else if ([elementName isEqualToString:@"media:player"] && (isUrl==NO) && isEntry) {
        NSString *strLink = [NSString stringWithFormat:@"%@",[attributeDict objectForKey:@"url"]];
        strLink = [strLink stringByReplacingOccurrencesOfString:@"&feature=youtube_gdata_player" withString:@""];
        _xmlObject.songUrl = strLink;
        NSLog(@"Url is: %@",_xmlObject.songUrl);
        isUrl=YES;
    }

    else if ([elementName isEqualToString:@"media:thumbnail"] && (isThumbnail==NO) && isEntry){
        _xmlObject.songImage = [attributeDict objectForKey:@"url"];
        NSLog(@"My Thumbnail Url is :%@",_xmlObject.songImage);
        NSLog(@"Images is: %@",_xmlObject.songImage);
        isThumbnail=YES;
    }
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string{
    if (isTitle) {
        NSLog(@"Title is: %@", string);
        _xmlObject.songTitle = string;
    }
    else if (isMediaCategory) {
        NSLog(@"Song Id is: %@", string);
        _xmlObject.songType = string;
    }
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName{
    if ([elementName isEqualToString:@"title"] && isEntry) {
        isTitle = NO;
    }
    else if ([elementName isEqualToString:@"media:category"] && isEntry){
        isMediaCategory=NO;
    }
    else if ([elementName isEqualToString:@"entry"]){
        isEntry=NO;
        [self.youtubeObjects addObject:_xmlObject];
        [_xmlObject release];
        _xmlObject = nil;
    }
} 
```

# c++ - new() 和 delete() 作为 C++ 中的运算符？

> ID：13477743
> 
> 赞同：3
> 
> 时间：2012-11-20T16:34:28.523
> 
> 标签：c++, new-operator, delete-operator

在 c++ 中将 new() 和 delete() 实现为运算符的用途或原因是什么？使其成为运算符而不是函数的优点是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T16:38:04.467

`new`运算符不能是函数，因为它接受类型作为参数。你不能写成`new foo_type`函数调用，因为`foo_type`产生值的不是表达式，而是类型名称。

`delete`运算符可以是针对不同指针类型重载的函数，以及用于语义的额外可选参数`bool`。`delete []`为什么有一个`delete`算子可能是为了与它的`new`对应物对称。

也就是说，模板函数可以将类型作为模板参数。但是`new`and`delete`运算符历来先于模板。

此外，可以编写一个函数，该函数接受一个类型的原型实例，而不是一个类型，从该实例构造一个对象 `newobj(m_class(constructor_arg))`：这`newobj`对于不同的类型是重载的。它分配空间，将构造复制到其中，然后返回对象。

所以最终，设计反映了设计师的品味和心血来潮。

在语言设计中，运算符和函数（以及语句、声明等）之间的分离本身并不是绝对必要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T16:38:18.547

我知道人们会忽略它们有两个常见的原因。

1) 使用 new/delete 来跟踪对象池。New 从池中获取第一个未使用的资源，delete 将该资源返回到池中。如果您不断分配/释放对象，这很有用。

2) 跟踪内存使用情况。您可以追踪泄漏或内存覆盖问题。例如，您可以在任一侧填充内存，或者跟踪谁在分配内存，以便跟踪谁没有释放它。

# javascript - 选择所有高度大于给定的元素

> ID：13477747
> 
> 赞同：4
> 
> 时间：2012-11-20T16:34:42.047
> 
> 标签：javascript, jquery, css, height

如何选择高度大于 200px 的项目并将它们记住在 var 中。

```
var something = $('.myClass').withHeightMoreThan200px();
$('.myClass').each(function(){$(this).height(random(50,500)});
something.hide(); //even if after random change of height some new elements have now height >200px I want it to affect only those remembered before. 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-20T16:35:35.180

使用[`filter()`](http://api.jquery.com/filter/)：

```
var something = $('.myClass').filter(function(){
    return $(this).height() > 200;
}); 
```

# java - 将 int 数组转换为字符串变量

> ID：13477751
> 
> 赞同：-7
> 
> 时间：2012-11-20T16:34:50.410
> 
> 标签：java, arrays, string

我有一个整数数组，它本身保留二进制数 0 和 1。我想将我的整数数组转换为 java 中的字符串变量。我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T16:37:32.093

```
int[] arr = new int[] { 1, 0, 1, 0 };
StringBuilder sb = new StringBuilder(arr.length);
for (int i : arr) {
  sb.append(i);
}
String s = sb.toString(); // 1010 
```

如果您不介意字符串周围有括号，并且您的数字用逗号分隔，您可以`Arrays.toString`按照其他人的建议使用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-20T16:38:03.967

可能[Arrays.toString(int[])](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#toString%28int%5b%5d%29)是您正在寻找的。

```
final int[] sample = new int[] {1, 2, 3};
final String arrayStr = Arrays.toString (sample);
System.out.println (arrayStr); 
```

这应该打印 [1, 2, 3]。

这是一个[小提琴](http://ideone.com/4PNXwy)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-20T16:37:31.177

这是一种方法：

```
String stringVar = java.util.Arrays.toString( intArray ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T17:07:42.050

您也可以像这样手动执行

```
private static String format(int[] array) {
    StringBuilder sb = new StringBuilder();
    boolean needSeparator = false;
    for (int number : array) {
        if (needSeparator) {
            sb.append(", ");
        }
        if (number != 0) {
            sb.append("true");
        } else {
            sb.append("false");
        }
        needSeparator = true;
    }
    return sb.toString();
} 
```

如果您想使用特殊格式，这将特别有用。上面的例子会产生像这样的字符串`"true, false, true"`

还有一把[小提琴](http://ideone.com/vg3quF)。

编辑：哎呀，`true`应该是`!= 0`，不是`!=1`。在上面的代码中更正，在小提琴中损坏

# jsf - 在部署到 Weblogic 10.3 的战争中打包时找不到 MyFaces-api

> ID：13477758
> 
> 赞同：1
> 
> 时间：2012-11-20T16:35:15.657
> 
> 标签：jsf, weblogic, war, jsf-1.2, myfaces

我已将 myfaces-api.1.2.2.jar 和 myfaces-impl.1.2.2.jar 打包到我的战争的 web-inf/lib 目录中。如果我将其作为压缩的 war 文件部署到 weblogic 10.3 服务器，则启动日志显示：

信息：FacesConfigurator：339 - MyFaces-package：未找到 myfaces-api。
信息：FacesConfigurator：339 - MyFaces-package：未找到 myfaces-impl。
信息：FacesConfigurator：339 - MyFaces-package：未找到 tomahawk-sandbox。
信息：FacesConfigurator：339 - MyFaces-package：找不到战斧。

如果我将罐子从战争中取出并将它们放入系统类路径的域的 lib 目录中，那么一切正常并且启动日志显示：

信息：启动 MyFaces-package：myfaces-api 版本：1.2.2 从路径：file:/C:/weblogic/user_projects/domains/testDomain/lib/myfaces-api-1.2.2.jar
信息：启动 MyFaces -package：myfaces-impl 版本：1.2.2 来自路径：file:/C:/weblogic/user_projects/domains/testDomain/lib/myfaces-impl-1.2.2.jar
信息：MyFaces-package：不是 tomahawk-sandbox成立。
信息：启动 MyFaces-package：tomahawk 版本：1.1.6 从路径：file:/C:/weblogic/user_projects/domains/testDomain/lib/tomahawk-1.1.6.jar

我想将它部署为 weblogic 中的共享库战争......所以问题是我如何才能让 myfaces 罐子在包装在战争文件中时被识别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:24:11.670

通过查看 org.apache.myfaces.config.FacesConfigurator 的源代码，它表明它只会查看以 jar 开头的路径：这解释了为什么 myfaces jar 在以自定义 weblogic 模块的形式部署时被发现或在域 lib 文件夹中。

当部署在 war 文件 (zip) 中时，路径以 zip: 开头并且被忽略。因此，作为测试，我在添加以 zip: 开头的路径后重新编译并重新打包了 org.apache.myfaces.config.FacesConfigurator 源代码：作为检查的可行位置并找到了 jar。这是进行该更改后服务器启动时的输出：

org.apache.myfaces.config.FacesConfigurator:511) - 读取配置**zip:** C:/weblogic/user_projects/domains/testDomain/servers/AdminServer/tmp/_WL_user/jsf-myfaces/x3xrze/WEB-INF/lib/tomahk- 1.1.6.jar!/META-INF/faces-config.xml
org.apache.myfaces.config.FacesConfigurator:570) - 读取配置 /WEB-INF/faces-config.xml
org.apache.myfaces.config.FacesConfigurator :333) - 启动 MyFaces-package : myfaces-api in version : 1.2.2 from path : C:/weblogic/user_projects/domains/testDomain/servers/AdminServer/tmp/_WL_user/jsf-myfaces/x3xrze/WEB-INF /lib/myfaces-api-1.2.2.jar
org.apache.myfaces.config.FacesConfigurator:333) - 启动 MyFaces-package : myfaces-impl in version : 1.2.2 from path : C:/weblogic/user_projects/domains/testDomain/servers/AdminServer/tmp/_WL_user/ jsf-myfaces/x3xrze/WEB-INF/lib/myfaces-impl-1.2.2.jar

需要注意的重要一点是，“myfaces api not found”日志语句在任何方面都不重要……它只是一个 INFO 级别的日志，可以忽略。

# php - 打开购物车免费送货例外

> ID：13477763
> 
> 赞同：1
> 
> 时间：2012-11-20T16:35:28.393
> 
> 标签：php, opencart

我为总额超过 75 美元的订单提供免费在线送货服务，提供此折扣的过程非常简单。

我很快会在我的库存中添加一些大件物品，需要免除免费送货折扣，因为如果买家不支付运费，这些物品的运费将使交易导致金钱损失。

在 Open Cart 中，我如何免除某些商品的“超过 75 美元免运费”政策？我猜这必须在代码中完成，但我不知道在哪里看。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T12:37:03.860

实际上，在 OpenCart 中使用标准运输扩展提供免费送货的过程是愚蠢的。它为客户提供计算交付或免费交付的*选择！*这只有在交付不同时才真正有意义 - 即免费交付较慢。

由于您想免除购买的免费送货，而不是提供价格较低的送货选项，我假设目前当任何客户在免费送货可用时选择付费送货时，您只需赚更多钱。

我强烈建议您将这两条规则合并为一个运输延期。这不仅可以让您取消免费送货费率，而且在愚蠢的情况下也不会显示付费送货选项。

你在哪里找到这个代码？

管理部分中的每个运费计算选项都是一个运费扩展。这分为五个文件。

逻辑在 中`catalog\model\shipping`，管理控件在`admin\controller\shipping`和中`admin\view\template\shipping`。`catalog\language\english\shipping`和中还有语言`admin\language\english\shipping`。在所有这些文件夹中，文件名应该相同。

您可以通过从现有的“免费”运输扩展中获取文件并使用新文件名和匹配的类名复制它们来添加自己的运输扩展，或者您可以破解现有的扩展。

如果您从现有扩展的副本创建扩展，请不要忘记相应地修改类名（例如，更改 中的 Free 部分`ModelShippingFree`以`ControllerShippingFree`匹配您的文件名）。

因为我总是最终使用特定于商店的规则，所以我总是在商店之后命名这些文件。这也使得哪个应该是活跃的更加明显。

在您陷入编写代码的困境之前，请在伪代码中计算出您理想的组合规则应该是什么，例如，如果您对非大件产品有统一费率并且您实际上只将权重设置为大于0 在体积庞大的产品上，它会是这样的：

如果小计>75，则成本=0，否则成本=10，如果总重量> 0，则成本=成本+（1*总重量）

查看所有现有扩展，例如您可以使用和调整的代码，并找出您喜欢硬编码的值以及需要在管理设置中调整的值。

（您可以从 获得总权重，从 获得`$this->cart->getWeight`小计`$this->cart->getTotal()`）

如果您已经在使用重量，那么除非您仍然可以分辨出购物车中有一个笨重的产品，因为总重量如此之高，否则编码会变得更加困难。您将不得不逐步浏览购物车中的每件商品，并添加与其他模式匹配的“大件”产品。首先查看您可以在 OpenCart 中编辑的字段。

最后，为避免意外，不要忘记更改您的文本屏幕以提及免费送货不适用于大件商品，并更改您的产品屏幕以显示产品体积大且免运费。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T17:02:21.703

在标准的 OC 设置中，这是不可能的。您需要在某种标志中编码，您可以设置要排除的产品，然后在免费送货扩展的模型文件中，您必须重新编码以计算没有的商品的成本只有国旗。标准购物车只使用`$this->cart->getTotal()`不会排除标记项目的

# sql - 根据唯一对列表从数据库中选择

> ID：13477775
> 
> 赞同：6
> 
> 时间：2012-11-20T16:36:03.667
> 
> 标签：sql, postgresql

例如，如果我得到下表

```
Id        Key             Value

 1          A             Alpha
 2          B             Alpha
 3          A             Charlie 
```

我接受了输入 {(A, Charlie) 和 (B, Alpha)} 并要求返回所有我希望它返回 2 和 3 但不是 1 的 ID。

做这个的最好方式是什么？我可以将它们全部合并到一个查询中（为了速度）还是我必须为收到的每个值对运行重复查询。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-20T17:12:40.213

我认为 Postgresql 有最优雅的解决方案：

```
SELECT  *
FROM    T
WHERE   ("Key", "Value") IN (('B', 'Alpha'), ('A', 'Charlie')); 
```

[SQL 小提琴示例](http://www.sqlfiddle.com/#!1/9cdb4/6)

在 SQL-SERVER 2008 及更高版本中，您可以使用它`VALUES`来构建您的元组：

```
SELECT  T.*
FROM    T
        INNER JOIN
        (   VALUES
                ('B', 'Alpha'),
                ('A', 'Charlie')
        ) v (Key, Value)
            ON v.Key = T.Key
            AND v.Value = T.Value 
```

[SQL 小提琴示例](http://www.sqlfiddle.com/#!3/7eff9/3)

或者对于一个过程，您可以创建一个键值对类型并将其作为参数传递：

```
CREATE TYPE KeyValuePair AS TABLE ([Key] VARCHAR(1), [Value] VARCHAR(7));

DECLARE @T AS KeyValuePair
INSERT @T 
VALUES
    ('B', 'Alpha'),
    ('A', 'Charlie')

SELECT  T.*
FROM    T
        INNER JOIN @T v
            ON v.[Key] = T.[Key]
            AND v.Value = T.Value; 
```

[SQL 小提琴示例](http://www.sqlfiddle.com/#!3/ed9e6/7)

对于 MySQL，我认为您可能只需要使用`AND/OR`

```
SELECT  *
FROM    T
WHERE   (`Key` = 'A' AND `Value` = 'Charlie')
OR      (`Key` = 'B' AND `Value` = 'Alpha') 
```

[SQL Fiddle 示例](http://www.sqlfiddle.com/#!2/51b14/6)

我对其他 DBMS 的了解是有限的，所以如果它不是上述之一，对不起，我无法提供更多帮助。

**EDIT (With the help of [a_horse_with_no_name](https://stackoverflow.com/users/330315/a-horse-with-no-name))**

The PostgreSQL syntax also works for [Oracle](http://www.sqlfiddle.com/#!4/7ac8f/1) (and I think DB2)

# ms-access - 查找使用 Powershell 登录 Access 数据库的用户

> ID：13477778
> 
> 赞同：1
> 
> 时间：2012-11-20T16:36:07.083
> 
> 标签：ms-access, powershell, ado

我有一个多用户 Access 数据库，每天使用 powershell 脚本进行压缩。如果仍有用户登录，此脚本无法压缩数据库。如果有用户登录，我希望能够识别忘记注销数据库的用户并提醒他们注销一天结束。

如果我要在 VB 中编写它，它将像这样工作：

```
Dim cn as ADODB.Connection
Dim rs as ADODB.Recordset
cn.open("Provider=Microsoft.Jet.OLEDB.4.0; Data Source=...mdb")
Set rs = cn.OpenSchema(adSchemaProviderSpecific, ,"{947bb102-5d43-11d1-bdbf-00c04fb92675}") 
```

然后循环遍历记录集并获取我想要的信息。

我想做的是将它翻译成 PowerShell，以便它可以使用紧凑的脚本运行。我尝试了以下方法：

```
$objCon = New-Object -ComObject ADODB.Connection
$objRs = New-Object -ComObject ADODB.Recordset
$objCon.Open("Provider=Microsoft.Jet.OLEDB.4.0; Data Source=...mdb")
$objRs= $objCon.OpenSchema([ADODB.SchemaEnum]::adSchemaProviderSpecific,$null,'{947bb102-5d43-11d1-bdbf-00c04fb92675}')
$objRs.MoveFirst() 
```

然后遍历记录集并找到我需要的信息。

OpenSchema 行上的 ps 代码错误：

使用“3”参数调用“OpenSchema”的异常：“对象或提供者无法执行请求的操作。” 在 FindUsers.ps1:8 char:27 + $objRs= $objCon.OpenSchema <<<< ([ADODB.SchemaEnum]::adSchemaProviderSpecific,$null,'{947bb102-5d43-11d1-bdbf-00c04fb92675}') + CategoryInfo : NotSpecified: (:) [], MethodInvocationException + FullyQualifiedErrorId : DotNetMethodException

如果我删除中间的 $null 变量或将其替换为 ''，脚本将不会执行，并且我不知道该命令是否正确地从 VB 转换为 powershell。我在 Google 和 SO 上进行了搜索，但没有找到任何解决方案。我需要做什么才能使用 OpenSchema 命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T00:20:04.270

这适用于我使用 Office 2007 及更高版本中包含的较新的 ACE 驱动程序：

```
$filepath = "C:\Users\u00\Documents\Northwind.mdb"
[guid]$guid = '947bb102-5d43-11d1-bdbf-00c04fb92675'

$ConnectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=`"$filepath`";Persist Security Info=False;"
$conn = new-object System.Data.OleDb.OleDbConnection($ConnectionString)
$conn.open()
$conn.GetOleDbSchemaTable($guid,$null) 
$conn.close()

COMPUTER_NAME                    LOGIN_NAME 
-------------                    ---------- 
Z002                             Admin 
```

# visual-studio-2010 - Visual Studio 和类文件不在解决方案中

> ID：13477783
> 
> 赞同：0
> 
> 时间：2012-11-20T16:36:20.010
> 
> 标签：visual-studio-2010, visual-studio

我有一些不在解决方案中的类文件（.vb 或 .cs，这两种方式都无关紧要）。当我执行删除函数参数之类的操作时，它不会标记不再存在的参数的使用或任何其他错误，但它可以弄清楚如何突出显示代码。

它适用于 .aspx 文件。

是否可以突出显示不属于解决方案的类文件中的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T17:22:57.687

> 如果它不是一个解决方案，那么它不会被编译，所以你不会得到错误。简单的解决方法是将使用源文件的项目添加到您的解决方案中。

汉斯·帕桑特

# python - Pythonic / itertools 的方式来通过字典？

> ID：13477784
> 
> 赞同：1
> 
> 时间：2012-11-20T16:36:24.363
> 
> 标签：python, dictionary, itertools

```
def reportCSV(t):
    ret = ''
    for ev in t:
        for p in t[ev]:
            for w in t[ev][p]:
                ret += ','.join((ev, p, w, t[ev][p][w])) + '\n'
    return ret 
```

什么是更 Pythonic 的方式来做到这一点，例如使用 itertools 等？

在这种情况下，我只是将其写入 CSV 文件。t 是一个字典 t[ev] 是一个字典 t[ev][p] 是一个字典 t[ev][p][w] 是一个浮点数

我不确定在这种情况下如何使用 itertools.product 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T16:50:21.073

你所拥有的可以重写为：

```
def reportCSV(t):
    result = []
    for t_key, t_value in t.iteritems():
        for p_key, p_value in t_value.iteritems():
            for w_key, w_value in p_value.iteritems():
                row_data = t_key, p_key, w_key, w_value
                result.append(','.join(row_data))
    return '\n'.join(result) 
```

这将更快，因为它将字符串连接在一起而不是执行多个连接，并且更有效，因为它使用`iteritems()`它消除了进行任何额外字典查找或创建中间列表的需要。

# php - 将纪元时间转换为日期 PHP

> ID：13477788
> 
> 赞同：45
> 
> 时间：2012-11-20T16:36:47.970
> 
> 标签：php, time, epoch

我现在正在使用一个 API，它提供了一个 epochTime。我已经尝试了一切将这个纪元时间转换为日期，但它似乎没有工作，包括`$epoch_time / 1000`然后使用该`date()`函数来转换它。

纪元时间看起来像这样 1353430853299。有没有办法做到这一点？`strtotime()`也没有工作。

似乎所有其他关于纪元时间的读物都是关于将日期更改为纪元时间，但我希望反过来。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-11-20T16:55:52.573

使用 substr($epoch, 0, 10) 对其进行了修复，然后对任何想知道 13 位数纪元时间的人使用日期函数。

这是一个示例代码：

```
echo date("Y-m-d H:i:s", substr("1477020641000", 0, 10));
// Result: 2016-10-20 20:30:41 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-11-20T16:42:16.133

有几种不同的方法可以做到这一点。

首先，您所拥有的是一个 Unix 纪元时间。（1/1/1970），这使一切变得容易得多。

在 PHP 中，尝试

```
$epoch = 1344988800;
$dt = new DateTime("@$epoch");
echo $dt->format('Y-m-d H:i:s'); 
```

显示您的日期

或者

如果您想要较长的 RFC232 日期：

```
echo date('r', $epoch); 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-11-20T16:39:42.700

```
$epoch = 1344988800;
$dt = new DateTime("@$epoch"); // convert UNIX timestamp to PHP DateTime
echo $dt->format('Y-m-d H:i:s'); // output = 2012-08-15 00:00:00 
```

更多：[http ://www.epochconverter.com/programming/functions-php.php](http://www.epochconverter.com/programming/functions-php.php)

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-11-20T16:40:21.170

```
<?php
$epoch = '1353429562';

date_default_timezone_set('GMT');
echo date('Y-m-d H:i:s', $epoch); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-11-07T13:56:59.550

仅供参考，发送 JSON 数据的 API 使用以毫秒为单位的纪元以与 Web 浏览器兼容。

我不知道为什么 PHP 需要删除毫秒，因为它是每个 Web 浏览器的标准。

所以，你可以用左边的10，或者/1000（如果你不想在2286年11月20日惹麻烦，最好除以1000！！！）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-05-16T10:00:00.553

您只需从**epoch 格式中选择 10 位数字**

```
<?php echo date("Y-m-d H:i:s", substr("1621157545307", 0, 10)); ?> 
```

输出将类似于：

> 2021-05-16 15:02:25

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-05-27T20:07:46.650

这在您除以 1000 时有效：

```
echo date("Y-m-d H:i:s", round(1353430853299/1000)) 
```

在此示例中，您将得到`1353430853.299`，因此您必须将其四舍五入以去除数字的小数部分。如果你不想让它变圆，你也可以使用 floor 。

# c# - 验证链接已检查注册

> ID：13477795
> 
> 赞同：0
> 
> 时间：2012-11-20T16:37:03.463
> 
> 标签：c#, asp.net, validation

我有一个条款和条件复选标记，复选框标题上链接了政策。

```
<div>
    <asp:CheckBox runat="server" ID="ckIAgree" ClientIDMode="Static" Text="" CssClass="pull-left checkbox" ValidationGroup="Security" />
    <span class="termsconditions">I have read and agree to the site <asp:LinkButton runat="server" ID="lnkTermsandConditions" CausesValidation="false" NavigateUrl="#" onclick="onclick_TermsandConditions" Text="Terms and Conditions" />.</span>
    <div class="clearfix"></div>
</div> 
```

在 onclick 事件中，我将一个布尔值设置为“true”，表示他们已经点击了链接。

```
//Make sure link has been clicked
protected void onclick_TermsandConditions(object sender, EventArgs e)
{
    termsClicked = true;
} 
```

我确实在页面顶部声明了变量，我认为这可能会导致我的问题，因为当我单击条款和条件链接时页面会重新加载。

```
bool termsClicked = false; 
```

我确实有一个自定义验证器，可确保选中复选框，然后检查“termsClicked”变量的值。“termsClicked”变量总是显示为假。

```
//Validate Terms
protected void cvValidateTerms(object source, ServerValidateEventArgs args)
{
    args.IsValid = ckIAgree.Checked;
    if (termsClicked == false)
    {
        args.IsValid = false;
        cvTermsConditions.ErrorMessage = "You must view the terms and conditions";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T18:38:50.110

termsClicked is only true when you show them the terms and conditions. It is not true when they post back the check mark (even if they previously read your terms/conditions). You'll have to use the session or some other persistent state mechanism (maybe the ViewState) to remember that they clicked the link in some previous request/response.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-20T16:50:48.820

确保您的变量是否全局声明？

不要在页面加载事件中声明变量。

# api - 通过 API 从亚马逊获取特定卖家的产品

> ID：13477797
> 
> 赞同：5
> 
> 时间：2012-11-20T16:37:08.980
> 
> 标签：api, amazon-web-services, amazon

我需要：

1.  通过 API 在 Amazon 上从我的市场中获取我的产品（按卖家 ID/商家 ID 过滤产品）。

2.  在亚马逊以外的我的网页中呈现产品。

3.  使用 Amazon FPS 允许用户购买我的产品。

第3点）对我来说很清楚。但是1）这似乎是最简单的，我真的不知道该怎么做。我还尝试**了 Amazon MarketPlace Webservice**和**Amazon Product Advertising API**，但没有成功。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-25T00:37:49.650

直到最近，您还可以使用 Product Advertising API 来查找来自给定商家的产品。现在，您需要使用[Amazon Marketplace Web 服务](https://developer.amazonservices.com/index.html/177-7971310-0935865)并以编程方式请求所有列表的报告（使用报告类型为“_GET_FLAT_FILE_OPEN_LISTINGS_DATA_”的“GetReportRequestList”操作）。有关详细信息，请参阅[报告 API 参考（PDF 格式）](https://images-na.ssl-images-amazon.com/images/G/01/mwsportal/doc/en_US/bde/MWSReportsApiReference._V399870835_.pdf)。

如果您需要更多信息，请告诉我。

# sql - SQL Server：100 万行聚合数据解决方案

> ID：13477798
> 
> 赞同：0
> 
> 时间：2012-11-20T16:37:08.783
> 
> 标签：sql, sql-server, stored-procedures, aggregate

我们的数据（>100 万行）分布在 13 个表中。

我们有超过 15 个基于不同列（例如：地区、年份等）的存储过程（分布）和一个用于大量聚合数据的存储过程。

这些表有一个唯一键 ( `int`)，用于 INNER JOINS、此 ID 上的聚集索引以及在聚合和分布查询中使用的列上的覆盖索引。

所有这些存储过程都在@8 分钟内运行，但我需要在 1 分钟内得到结果。

我正在考虑的一种解决方法是在第一次运行后存储分布结果和聚合数据，然后只检索数据而不进行任何计算。这种情况可以正常工作，但是在存储过程（即动态 sp）上，我们有过滤器，这使得这个选项有点麻烦。

您对如何最好地处理这种情况有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T16:48:17.557

此方案听起来像是 SQL Server Analysis Services 多维数据集的候选方案。SSAS 允许您聚合数据并对大量数据执行快速分析。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:31:22.297

如果您几乎不需要扩展此解决方案（当前过滤器除外），那么我建议您坚持使用预先支持的报告表。您的系统在数据库方面相对较小，响应时间似乎可以满足您的需要。

尝试创建一系列报告表，理想情况下每个表都包含多个报告。您最终会得到每个表都包含一个超集的列（不止一个报告需要），但这将使您在持续的可维护性方面获得最大的便利。使用您的报告工具（SSRS？）与存储的过程一起使用用户可选择的参数来管理过滤

# zend-framework - Zend Framework 自动模块路由

> ID：13477799
> 
> 赞同：0
> 
> 时间：2012-11-20T16:37:13.257
> 
> 标签：zend-framework

我的 zend 框架具有以下结构：

```
application/
    configs/
        application.ini
        routes.php
    layouts/
        scripts/
            includes/
            layout.phtml
    modules/
        somemodule1/
            controllers/
                IndexController.php
                ErrorController.php
            models/
            views/
                helpers/
                scripts/
                    error/
                        error.phtml
                    index/
                        index.phtml
            forms/
            Bootstrap.php
        somemodule2/
            controllers/
                IndexController.php
                ErrorController.php
            models/
            views/
                helpers/
                scripts/
                    error/
                        error.phtml
                    index/
                        index.phtml
            forms/
            Bootstrap.php

    Bootstrap.php
library/
    Zend/
    CustomClasses/
public/
    css/
    images/
    js/
    uploads/
    .htaccess
    index.php 
```

我试图使其模块化。例如，我想像这样访问每个模块：domain.com/modulename/controller/action/someotherparams。如果我添加新模块，那么它应该会自动加载，而不会对路由类进行任何更改。我已经做的是：

```
**routes.php**

protected function _initAutoloadModules()
{
    $autoloader = new Zend_Application_Module_Autoloader(
        array(
            'namespace' => '',
            'basePath'  => APPLICATION_PATH . '/modules/somemodule1'
        ), 
        array(
            'namespace' => 'Admin',
            'basePath'  => APPLICATION_PATH . '/modules/somemodule2'
        )            
      );
    return $autoloader;
}

**application.ini** 

phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1
resources.frontController.params.displayExceptions = 1
includePaths.library = APPLICATION_PATH "/../library"
appnamespace = "Default"
bootstrap.path = APPLICATION_PATH "/Bootstrap.php"
bootstrap.class = "Bootstrap"
resources.frontController.defaultModule = "default"
resources.frontController.defaultController = "index"
resources.frontController.defaultAction = "index"
resources.frontController.moduleDirectory = APPLICATION_PATH "/modules"
resources.layout.layoutPath = APPLICATION_PATH "/layouts/scripts"
resources.layout.layout = "layout"
resources.modules = ""
resources.view[] =
resources.session.remember_me_seconds = 864000
resources.session.use_only_cookies = on
includePaths.models = APPLICATION_PATH "/models/"
resources.layout.layoutPath = APPLICATION_PATH "/layouts/scripts/" 
```

但实际上它并没有按照我想要的方式工作。因为我不能在不更改 routes.php 文件的情况下使模块自动加载（在新模块添加到系统之后）。那么有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:23:40.530

您想要实现的行为是 Zend Framework 的默认行为。试试这种方式：

```
 $moduleLoader = new Zend_Application_Module_Autoloader
    (
            array
            (
                'namespace' => '',
                'basePath' => APPLICATION_PATH
            )
        ); 
```

不要忘记在控制器名称中使用模块前缀：Somemodule1_IndexController。

# extjs4.1 - 我如何结合 extjs 和 infovis spacetree

> ID：13477800
> 
> 赞同：0
> 
> 时间：2012-11-20T16:37:19.277
> 
> 标签：extjs4.1, infovis

我是 extjs 和 infovis 的新手。我正在尝试实现一个包含 2 个组件的页面。上面是一个 extjs 网格，它由从服务器接收的一些数据呈现——> extjs 存储。我需要较低的组件是一个空间树，它将由相同的数据呈现。此外，我需要监听网格上的事件并在空间树中标记选定的节点。有人有一些将 extjs 与 infoVis 集成的例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T21:26:13.643

是的，我已经使用 extjs 成功地将 spacetree 集成到了应用程序中。我下面的示例将树绘制在一个窗口中，（并且为了清晰起见进行了大量编辑），但希望它能给你一个想法。这里的主要思想是我们动态地创建一个具有随机 id 的 div，并将该 div 附加到面板并渲染它。之后，我们可以将 div 的 id 传递到 spacetree 初始化的 injectInto 参数中，ST 就会被绘制到 extjs 组件上。

请注意，ST 实际上是在与窗口绑定并在外部调用的 doRefresh 函数中初始化的。在我的示例中，我使用 jquery 帖子直接从服务器检索数据，对于您的实现，您可以对网格执行类似的操作。只需监听 store 上的事件，并在 spacetree 的父组件上调用 refresh 函数。

```
function createSpacetreeWindow() {
var win = Ext.create('Ext.window.Window', {
    title: ' Window Title',
    id: windowId,
    height: 600,
    maxheight: 600,
    width: 1000,
    layout: {
        type: 'anchor',
        align: 'stretch'
    },
    doRefresh: function () {
        var existing = Ext.getCmp('panel_' + divid);
        if (existing) {
            existing.destroy();
        }
        var newdivid = randomString();
        var divA = document.createElement("div");
        divA.setAttribute("id", newdivid);
        divA.setAttribute("class", "repoPathView");
        win.add({
            id: 'panel_' + divid,
            xtype: 'panel',
            height: 600,
            width: 1000,
            layout: 'fit',
            contentEl: divA
        });
        loadSpaceTree(newdivid, repPathId);
    }
});

win.show();
win.doRefresh();
}

function loadSpacetree(divid, rpId) {

// retrieve the data via jquery POST. 
var url = GetSpacetreeUrl();
$.post(url, { myId: rpId }, function (data) {     

    //Create a new ST instance
    var st = new $jit.ST({
        injectInto: divid,
        duration: 100,
        transition: $jit.Trans.Quart.easeInOut,
        levelDistance: 50,

        offsetX: 350,
        constrained: false,
        siblingOffset: 100,
        levelsToShow: 100,

        Navigation: {
            enable: true,
            panning: true
        },

        Node: {
            type: 'networkelement',
            overridable: true
        },

        Edge: {
            type: 'bezier',
            overridable: true,
            lineWidth: 2,
            color: '#4CC417'
        }
    });

    //load json data
    st.loadJSON(data);
    st.compute();

    //emulate a click on the root node.
    st.onClick(st.root);
}); 
```

}

# xcode - UITableView - iPad - 在 UITableViewCell 类型的对象上找不到属性“”

> ID：13477802
> 
> 赞同：0
> 
> 时间：2012-11-20T16:37:30.883
> 
> 标签：xcode, ipad, uitableview

我已经使用 Xcode 中的 StoryBoard（针对 iOS6）将 UITableView 原型单元添加到 iPad 应用程序的 UIView 中。

我遇到的问题是，当我尝试引用它们时，我的 viewController 中无法识别这些标签。

在我的实现中，我有：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"dashboardMessage";

    UITableViewCell *cell = [_tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    int row = [indexPath row];

       cell.messageSender.text = [_matches valueForKey:@"from"];

} 
```

最后一行导致错误：在 UITableViewCell 类型的对象上未找到属性“messageSender”

在单元格的头文件中，我有：

```
@interface DashboardMessageCell : UITableViewCell

@property (strong, nonatomic) IBOutlet UILabel *messageSender;
@property (strong, nonatomic) IBOutlet UILabel *messageDescr; 
```

并将头文件导入viewController。

我不知道是什么导致了这个问题，任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:56:41.867

您的单元格类型必须是 DashboardMessageCell 您的代码可能是这样的：

```
(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath { static NSString *CellIdentifier = @"dashboardMessage";
DashboardMessageCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
   if (cell == nil) {
      cell = [[DashboardMessageCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier]; 
   }
   int row = [indexPath row];
   cell.messageSender.text = [_matches valueForKey:@"from"];
} 
```

我不会尝试此代码，希望对您有所帮助

# c++ - 在 C++ 中包含 C 代码

> ID：13477807
> 
> 赞同：16
> 
> 时间：2012-11-20T16:37:35.643
> 
> 标签：c++, c, g++

我正在尝试将 C 代码包含到一个简单的 C++ 程序中，但遇到了一个意想不到的问题——当我尝试编译程序时，g++ 给出了以下错误：

```
/tmp/cccYLHsB.o: In function `main':
test1.cpp:(.text+0x11): undefined reference to `add' 
```

我搜索了一个解决方案并找到了这个教程：

[http://www.parashift.com/c++-faq/overview-mixing-langs.html](http://www.parashift.com/c++-faq/overview-mixing-langs.html)

我的程序似乎没有什么不同，所以我有点迷茫......

我的 C++ 程序如下所示：

test1.ccp

```
#include <iostream>
using namespace std;

extern "C" {
#include "sample1.h"
}

int main(void)
{
    int x= add(3);

    cout << "the current value of x is " << x << endl;

    return 0;
} 
```

sample1 标头和函数如下所示：

样本1.h

```
#include <stdio.h>

double add(const double a); 
```

样本1.c

```
#include "sample1.h"

double add(const double a)
{
    printf("Hello World\n");

        return a + a;
} 
```

对于编译，我首先用 g++ 编译 test1.o，用 gcc 编译 sample1.o（也试过 g++，但没有区别）

```
g++ -c test1.cpp

gcc -c sample1.c 
```

这按预期工作。之后我尝试像这样链接程序：

```
g++ sample1.o test1.o -o test 
```

这是我得到上述错误的地方

```
test1.cpp:(.text+0x11): undefined reference to `add' 
```

我有一种感觉，我错过了一些重要的东西，但就是看不到它。

非常感谢任何帮助！

问候

朱尔斯

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-20T16:43:17.313

它按预期工作。确保您没有意外`sample1.c`使用`g++`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T16:44:26.760

它适用于我的机器。尝试 GCC 4.7.0

# linq - 如何在 linq 语句中填充集合属性

> ID：13477808
> 
> 赞同：0
> 
> 时间：2012-11-20T16:38:01.660
> 
> 标签：linq, entity-framework

我有一个情景，我有一堂课

```
[Table("SomeTable")]
public Class Thing
{
[Key]
public int Id { get; set; }
public string Description { get; set; }
public int ImAForeignKey { get; set; }
public bool HasStuff { get; set; }
}
...
...
public class ugly
{
public Thing Thing { get; set; }
public List<Thing> LotsOfThings { get; set; }
} 
```

Thing 是一些表示数据库中表的 EF 类......然后我想创建一个丑陋的集合：

```
List<ugly> gruesome;
using (var db = new ThingyDatabase())
{
gruesome = db.Thing
          .Where(r => r.HasStuff && r.ImAForeignKey == passedin.someFKvaluePassedIn )
          .Select(r => new ugly {
                     Thing = passedin,
                     LotsOfThings = ??
           })
    .ToList();
}

... 
```

我不确定如何填充 ListOfTHings 属性....或者我是否可以这样做...记录将是父记录，其余的是子记录。所以我最终会和他们的孩子一起收集一些东西......希望这会有所帮助。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T16:45:08.717

由于您提供的唯一信息是类丑陋和 linq 语句，我认为这会起作用：

```
List<ugly> gruesome;
using (var db = new ThingyDatabase())
{
gruesome = db.Thing
          .Where(r => r.HasStuff )
          .Select(r => new ugly {
                     Thing = r,
                     LotsOfThings = db.Think.Where(rr => rr.ImAForeignKey == r.Id).ToList()
           })
    .ToList();
} 
```

这假设在 Thing 中有一个名为 lotofThings 的属性。

如果这不起作用，请提供其作用的结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T19:59:22.757

我最终做了以下事情：

```
List<ugly> gruesome;
using (var db = new ThingyDatabase())
{
  gruesome = db.Thing
      .Where(r => r.HasStuff && r.ImAForeignKey == passedin.someFKvaluePassedIn )
      .ToList();
}

var ughObj = new Ugly {
    Thing = passedin,
    LotsOfThings = gruesome
} 
```

它给了我我需要的父母（passedin）和孩子（可怕）

谢谢大家

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T21:24:20.793

在阅读了您的问题和评论后，我突然意识到您只需要一个导航属性：

```
public Class Thing
{
    public int Id { get; set; }
    public string Description { get; set; }
    public bool HasStuff { get; set; }

    [ForeignKey("ChildThings")]
    public int ImAForeignKey { get; set; }
    public ICollection<Thing> ChildThings { get; set; }
} 
```

现在你可以这样做：

```
db.Thing
      .Where(r => r.HasStuff && r.ImAForeignKey == passedin.ImAForeignKey)
      .Select(r => new ugly {
                 Thing = r,
                 LotsOfThings = r.ChildThings
       }) 
```

但也许您不再需要`ugly`该类，因为该`Thing`实例包含您需要的所有内容。更好的是：这就足够了：

```
db.Thing.Include("ChildThings")
      .Where(r => r.HasStuff && r.ImAForeignKey == passedin.ImAForeignKey) 
```

# android - Oauth 2.0 库在 Android 中的使用

> ID：13477811
> 
> 赞同：0
> 
> 时间：2012-11-20T16:38:05.203
> 
> 标签：android, oauth-2.0

任何人都可以为 Android 推荐一个 Oauth2.0 客户端-服务器身份验证库示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:29:05.320

不久前，我在一个项目中工作，我们分叉了一个 Android 应用程序并添加了 OAuth2 支持：[https](https://github.com/xebia/Mustard-macnos-fork) ://github.com/xebia/Mustard-macnos-fork 我不认为我们使用了一个库，我们只使用了一个服务器端的库。

由于是前一段时间我不记得确切的细节，所以也许提交日志可以帮助你进一步。

# c# - C# Winform 关闭当前窗体

> ID：13477813
> 
> 赞同：-1
> 
> 时间：2012-11-20T16:38:07.307
> 
> 标签：c#, winforms

我有一个包含网格的当前表单。当我双击此网格的行时，我创建了一个打开新表单的函数。

```
 public partial class Liste_Ordres : DevExpress.XtraEditors.XtraForm
    {
        public string Id = "";
        LeOrdre_BL oOrdre_BL = new LeOrdre_BL();
        LeOrdreStatut_Entite_BL oStatutOrdre_BL = new LeOrdreStatut_Entite_BL();

        public Liste_Ordres()
        {
           ....
        }

  private void Liste_DobleClic(object sender, EventArgs e)
        {
            try
            {
                Program.OrderId = gridView_Liste_Ordres.GetFocusedRowCellValue("NO_ORDRE").ToString();
                Program.StatusOrdre = Convert.ToInt32(gridView_Liste_Ordres.GetFocusedRowCellValue("STATUT_ORDRE"));
                if (gridView_Liste_Ordres.GetFocusedRowCellValue("MODAL_MODE").ToString() == "A")

                Fiche_Ordre f_Fiche = new          Fiche_Ordre(gridView_Liste_Ordres.GetFocusedRowCellValue("NO_ORDRE").ToString());
                f_Fiche.MdiParent = this.MdiParent;
                f_Fiche.Show();
            }
            catch (Exception excThrown)
            {
                MessageBox.Show(excThrown.Message);
            }
        } 
```

我怎样才能关闭 Liste_Ordres ？当我把 this.close(); 它无法工作，因为参考对象为零。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T16:40:24.840

声明您`f_Fiche`在事件之外的类范围内形成对象，`Liste_DobleClic`以使其可供类的其他方法访问。

```
 Fiche_Ordre f_Fiche = null;

private void Liste_DobleClic(object sender, EventArgs e)
{
        try
        {
            Program.OrderId = gridView_Liste_Ordres.GetFocusedRowCellValue("NO_ORDRE").ToString();
            Program.StatusOrdre = Convert.ToInt32(gridView_Liste_Ordres.GetFocusedRowCellValue("STATUT_ORDRE"));
            if (gridView_Liste_Ordres.GetFocusedRowCellValue("MODAL_MODE").ToString() == "A")

            f_Fiche = new          Fiche_Ordre(gridView_Liste_Ordres.GetFocusedRowCellValue("NO_ORDRE").ToString());
            f_Fiche.MdiParent = this.MdiParent;
            f_Fiche.Show();
        }
        catch (Exception excThrown)
        {
            MessageBox.Show(excThrown.Message);
        }
} 
```

# css - div 向右溢出

> ID：13477818
> 
> 赞同：0
> 
> 时间：2012-11-20T16:38:27.947
> 
> 标签：css, html, overflow

是否可以更改 div 的默认行为，以便 overflow:hidden 导致内容从 div 的右侧溢出，而不是从 div 的底部溢出？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T16:40:47.173

试试`white-space:nowrap`。这样内容就不会换行。

```
div{
    overflow:hidden;
    white-space:nowrap;
    width:100px;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T16:43:00.770

是的。让文本不换行：

```
<div style="width:100px;height:30px; overflow:hidden; white-space:nowrap;">
    Is there away to change the default behavior of a div so that
    overflow:hidden causes the content to overflow out the right side
    of a div, rather than out of the bottom of the div?
</div> 
```

# android - Android：垂直 ViewPager

> ID：13477820
> 
> 赞同：133
> 
> 时间：2012-11-20T16:38:31.847
> 
> 标签：android, android-viewpager

有没有办法制作一个`ViewPager`不水平滚动但垂直滚动的？！

* * *

## 回答 #1

> 赞同：229
> 
> 时间：2014-04-01T21:52:16.750

您可以使用[ViewPager.PageTransformer](http://developer.android.com/reference/android/support/v4/view/ViewPager.PageTransformer.html)来产生垂直的错觉`ViewPager`。要实现垂直滚动而不是水平拖动，您必须覆盖`ViewPager`的默认触摸事件并`MotionEvent`在处理它们之前交换 s 的坐标，例如：

```
/**
 * Uses a combination of a PageTransformer and swapping X & Y coordinates
 * of touch events to create the illusion of a vertically scrolling ViewPager. 
 * 
 * Requires API 11+
 * 
 */
public class VerticalViewPager extends ViewPager {

    public VerticalViewPager(Context context) {
        super(context);
        init();
    }

    public VerticalViewPager(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }

    private void init() {
        // The majority of the magic happens here
        setPageTransformer(true, new VerticalPageTransformer());
        // The easiest way to get rid of the overscroll drawing that happens on the left and right
        setOverScrollMode(OVER_SCROLL_NEVER);
    }

    private class VerticalPageTransformer implements ViewPager.PageTransformer {

        @Override
        public void transformPage(View view, float position) {

            if (position < -1) { // [-Infinity,-1)
                // This page is way off-screen to the left.
                view.setAlpha(0);

            } else if (position <= 1) { // [-1,1]
                view.setAlpha(1);

                // Counteract the default slide transition
                view.setTranslationX(view.getWidth() * -position);

                //set Y position to swipe in from top
                float yPosition = position * view.getHeight();
                view.setTranslationY(yPosition);

            } else { // (1,+Infinity]
                // This page is way off-screen to the right.
                view.setAlpha(0);
            }
        }
    }

    /**
     * Swaps the X and Y coordinates of your touch event.
     */
    private MotionEvent swapXY(MotionEvent ev) {
        float width = getWidth();
        float height = getHeight();

        float newX = (ev.getY() / height) * width;
        float newY = (ev.getX() / width) * height;

        ev.setLocation(newX, newY);

        return ev;
    }

    @Override
    public boolean onInterceptTouchEvent(MotionEvent ev){
        boolean intercepted = super.onInterceptTouchEvent(swapXY(ev));
        swapXY(ev); // return touch coordinates to original reference frame for any child views
        return intercepted;
    }

    @Override
    public boolean onTouchEvent(MotionEvent ev) {
        return super.onTouchEvent(swapXY(ev));
    }

} 
```

当然，您可以根据需要调整这些设置。最终看起来像这样：

![VerticalViewPager 演示](../Images/13a87366eb42631b06a04f9d1c73d908.png)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2017-10-19T09:07:26.610

# 垂直视图分页器

这里的其他答案似乎都有一些问题。即使是推荐的开源项目也没有将最近的拉取请求与错误修复合并。然后我[`VerticalViewPager`](https://android.googlesource.com/platform/packages/apps/DeskClock/+/master/src/com/android/deskclock/VerticalViewPager.java)从谷歌发现他们使用了一些 DeskClock 应用程序。我相信使用谷歌的实现比这里漂浮的其他答案要多得多。（谷歌的版本类似于当前投票最多的答案，但更彻底。）

# 完整示例

[这个例子和我的基本 ViewPager](https://stackoverflow.com/a/46825489/3681880)例子几乎完全一样，只是为了使用这个[`VerticalViewPager`](https://android.googlesource.com/platform/packages/apps/DeskClock/+/master/src/com/android/deskclock/VerticalViewPager.java)类做了一些小的改动。

[![在此处输入图像描述](../Images/3892400b350bd9fb80bea4e8edf30f75.png)](https://i.stack.imgur.com/e0fE3.gif)

# XML

为主要活动和每个页面（片段）添加 xml 布局。请注意，我们使用[`VerticalViewPager`](https://android.googlesource.com/platform/packages/apps/DeskClock/+/master/src/com/android/deskclock/VerticalViewPager.java)而不是标准的[`ViewPager`](https://developer.android.com/reference/android/support/v4/view/ViewPager.html). 我将在下面包含代码。

*activity_main.xml*

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context="com.example.verticalviewpager.MainActivity">

    <com.example.myapp.VerticalViewPager
        android:id="@+id/viewpager"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</RelativeLayout> 
```

*fragment_one.xml*

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="match_parent"
                android:layout_height="match_parent" >

    <TextView
        android:id="@+id/textview"
        android:textSize="30sp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true" />

</RelativeLayout> 
```

# 代码

的代码[`VerticalViewPager`](https://android.googlesource.com/platform/packages/apps/DeskClock/+/master/src/com/android/deskclock/VerticalViewPager.java)不是我的。它只是 Google 源代码的精简版（没有注释）。查看该版本以获取最新版本。那里的评论也有助于理解正在发生的事情。

[*VerticalViewPager.java*](https://android.googlesource.com/platform/packages/apps/DeskClock/+/master/src/com/android/deskclock/VerticalViewPager.java)

```
import android.support.v4.view.ViewPager;    

public class VerticalViewPager extends ViewPager {

    public VerticalViewPager(Context context) {
        this(context, null);
    }

    public VerticalViewPager(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }

    @Override
    public boolean canScrollHorizontally(int direction) {
        return false;
    }

    @Override
    public boolean canScrollVertically(int direction) {
        return super.canScrollHorizontally(direction);
    }

    private void init() {
        setPageTransformer(true, new VerticalPageTransformer());
        setOverScrollMode(View.OVER_SCROLL_NEVER);
    }

    @Override
    public boolean onInterceptTouchEvent(MotionEvent ev) {
        final boolean toIntercept = super.onInterceptTouchEvent(flipXY(ev));
        flipXY(ev);
        return toIntercept;
    }

    @Override
    public boolean onTouchEvent(MotionEvent ev) {
        final boolean toHandle = super.onTouchEvent(flipXY(ev));
        flipXY(ev);
        return toHandle;
    }

    private MotionEvent flipXY(MotionEvent ev) {
        final float width = getWidth();
        final float height = getHeight();
        final float x = (ev.getY() / height) * width;
        final float y = (ev.getX() / width) * height;
        ev.setLocation(x, y);
        return ev;
    }

    private static final class VerticalPageTransformer implements ViewPager.PageTransformer {
        @Override
        public void transformPage(View view, float position) {
            final int pageWidth = view.getWidth();
            final int pageHeight = view.getHeight();
            if (position < -1) {
                view.setAlpha(0);
            } else if (position <= 1) {
                view.setAlpha(1);
                view.setTranslationX(pageWidth * -position);
                float yPosition = position * pageHeight;
                view.setTranslationY(yPosition);
            } else {
                view.setAlpha(0);
            }
        }
    }
} 
```

*MainActivity.java*

我只换`VerticalViewPager`了`ViewPager`。

```
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.view.ViewPager;

public class MainActivity extends AppCompatActivity {

    static final int NUMBER_OF_PAGES = 2;

    MyAdapter mAdapter;
    VerticalViewPager mPager;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mAdapter = new MyAdapter(getSupportFragmentManager());
        mPager = findViewById(R.id.viewpager);
        mPager.setAdapter(mAdapter);
    }

    public static class MyAdapter extends FragmentPagerAdapter {
        public MyAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public int getCount() {
            return NUMBER_OF_PAGES;
        }

        @Override
        public Fragment getItem(int position) {

            switch (position) {
                case 0:
                    return FragmentOne.newInstance(0, Color.WHITE);
                case 1:
                    // return a different Fragment class here
                    // if you want want a completely different layout
                    return FragmentOne.newInstance(1, Color.CYAN);
                default:
                    return null;
            }
        }
    }

    public static class FragmentOne extends Fragment {

        private static final String MY_NUM_KEY = "num";
        private static final String MY_COLOR_KEY = "color";

        private int mNum;
        private int mColor;

        // You can modify the parameters to pass in whatever you want
        static FragmentOne newInstance(int num, int color) {
            FragmentOne f = new FragmentOne();
            Bundle args = new Bundle();
            args.putInt(MY_NUM_KEY, num);
            args.putInt(MY_COLOR_KEY, color);
            f.setArguments(args);
            return f;
        }

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            mNum = getArguments() != null ? getArguments().getInt(MY_NUM_KEY) : 0;
            mColor = getArguments() != null ? getArguments().getInt(MY_COLOR_KEY) : Color.BLACK;
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                                 Bundle savedInstanceState) {
            View v = inflater.inflate(R.layout.fragment_one, container, false);
            v.setBackgroundColor(mColor);
            TextView textView = v.findViewById(R.id.textview);
            textView.setText("Page " + mNum);
            return v;
        }
    }
} 
```

# 完成的

您应该能够运行应用程序并在上面的动画中看到结果。

# 也可以看看

*   [基本 ViewPager 示例](https://stackoverflow.com/a/46825489/3681880)
*   [带有 FragmentPagerAdapter 的 ViewPager](https://guides.codepath.com/android/ViewPager-with-FragmentPagerAdapter)

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-09-06T12:21:15.357

我有一个分两步对我有用的解决方案。

1.  `onInstantiateItem()`，`PagerAdapter`创建视图并将其旋转 -90：

    ```
    view.setRotation(-90f) 
    ```

    如果您正在使用`FragmentPagerAdapter`，则：

    ```
    objFragment.getView().setRotation(-90) 
    ```

2.  将视图旋转`ViewPager`90 度：

    ```
    objViewPager.setRotation(90) 
    ```

至少对我的要求来说就像一个魅力。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2016-02-16T15:44:26.620

对于正在努力使垂直 ViewPager 在水平内部工作的人，只需执行以下操作：

## 垂直视图分页器

```
public class VerticalViewPager extends ViewPager {
    public VerticalViewPager(Context context) {
        super(context);
        init();
    }

    public VerticalViewPager(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }

    private void init() {
        setPageTransformer(true, new VerticalPageTransformer());
        setOverScrollMode(OVER_SCROLL_NEVER);
    }

    private class VerticalPageTransformer implements ViewPager.PageTransformer {

        @Override
        public void transformPage(View view, float position) {

            if (position < -1) {
                view.setAlpha(0);
            } else if (position <= 1) {
                view.setAlpha(1);

                view.setTranslationX(view.getWidth() * -position);

                float yPosition = position * view.getHeight();
                view.setTranslationY(yPosition);
            } else {
                view.setAlpha(0);
            }
        }
    }

    private MotionEvent swapXY(MotionEvent ev) {
        float width = getWidth();
        float height = getHeight();

        float newX = (ev.getY() / height) * width;
        float newY = (ev.getX() / width) * height;

        ev.setLocation(newX, newY);

        return ev;
    }

    @Override
    public boolean onInterceptTouchEvent(MotionEvent ev) {
        boolean intercepted = super.onInterceptTouchEvent(swapXY(ev));
        swapXY(ev);
        return intercepted;
    }

    @Override
    public boolean onTouchEvent(MotionEvent ev) {
        return super.onTouchEvent(swapXY(ev));
    }

} 
```

# 水平视图分页器

```
public class HorizontalViewPager extends ViewPager {
    private GestureDetector xScrollDetector;

    public HorizontalViewPager(Context context) {
        super(context);
    }

    public HorizontalViewPager(Context context, AttributeSet attrs) {
        super(context, attrs);
        xScrollDetector = new GestureDetector(getContext(), new XScrollDetector());
    }

    class XScrollDetector extends GestureDetector.SimpleOnGestureListener {
        @Override
        public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX, float distanceY) {
            return Math.abs(distanceX) > Math.abs(distanceY);
        }
    }

    @Override
    public boolean onInterceptTouchEvent(MotionEvent ev) {
        if (xScrollDetector.onTouchEvent(ev)) {
            super.onInterceptTouchEvent(ev);
            return true;
        }

        return super.onInterceptTouchEvent(ev);
    }

} 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-12-01T11:46:09.783

[这个](https://stackoverflow.com/a/22797619/1576416)答案的轻微扩展帮助我实现了我的要求（垂直视图寻呼机动画类似[Inshorts - 60 字新闻](https://play.google.com/store/apps/details?id=com.nis.app&hl=en)）

```
public class VerticalViewPager extends ViewPager {

public VerticalViewPager(Context context) {
    super(context);
    init();
}

public VerticalViewPager(Context context, AttributeSet attrs) {
    super(context, attrs);
    init();
}

private void init() {
    // The majority of the magic happens here
    setPageTransformer(true, new VerticalPageTransformer());
    // The easiest way to get rid of the overscroll drawing that happens on the left and right
    setOverScrollMode(OVER_SCROLL_NEVER);
}

private class VerticalPageTransformer implements ViewPager.PageTransformer {
 private static final float MIN_SCALE = 0.75f;
    @Override
    public void transformPage(View view, float position) {

        if (position < -1) { // [-Infinity,-1)
            // This page is way off-screen to the left.
            view.setAlpha(0);

        }  else if (position <= 0) { // [-1,0]
            // Use the default slide transition when moving to the left page
            view.setAlpha(1);
            // Counteract the default slide transition
            view.setTranslationX(view.getWidth() * -position);

            //set Y position to swipe in from top
            float yPosition = position * view.getHeight();
            view.setTranslationY(yPosition);
            view.setScaleX(1);
            view.setScaleY(1);

        } else if (position <= 1) { // [0,1]
            view.setAlpha(1);

            // Counteract the default slide transition
            view.setTranslationX(view.getWidth() * -position);

            // Scale the page down (between MIN_SCALE and 1)
            float scaleFactor = MIN_SCALE
                    + (1 - MIN_SCALE) * (1 - Math.abs(position));
            view.setScaleX(scaleFactor);
            view.setScaleY(scaleFactor);

        } else { // (1,+Infinity]
            // This page is way off-screen to the right.
            view.setAlpha(0);
        }

    }

}

/**
 * Swaps the X and Y coordinates of your touch event.
 */
private MotionEvent swapXY(MotionEvent ev) {
    float width = getWidth();
    float height = getHeight();

    float newX = (ev.getY() / height) * width;
    float newY = (ev.getX() / width) * height;

    ev.setLocation(newX, newY);

    return ev;
}

@Override
public boolean onInterceptTouchEvent(MotionEvent ev){
    boolean intercepted = super.onInterceptTouchEvent(swapXY(ev));
    swapXY(ev); // return touch coordinates to original reference frame for any child views
    return intercepted;
}

@Override
public boolean onTouchEvent(MotionEvent ev) {
    return super.onTouchEvent(swapXY(ev));
}
} 
```

我希望这对其他人有帮助。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-08-18T13:52:18.127

有一些开源项目声称可以做到这一点。他们来了：

*   [kaelaela/VerticalViewPager](https://github.com/kaelaela/VerticalViewPager)，2015 年 10 月的最新提交和一位贡献者
*   [castorflex/VerticalViewPager](https://github.com/castorflex/VerticalViewPager)，2014 年 2 月的最新提交和三个贡献者
*   [LambergaR/VerticalViewPager/](https://github.com/LambergaR/VerticalViewPager/)，2013 年 8 月的最新提交和一位贡献者

这些已被其作者标记为已弃用：

*   已弃用：JakeWharton 的 Android Directional-ViewPager [https://github.com/JakeWharton/Android-DirectionalViewPager](https://github.com/JakeWharton/Android-DirectionalViewPager)

还有一件事情：

*   该应用程序的 Android 源代码中还有一个文件名[VerticalViewPager.java](https://android.googlesource.com/platform/packages/apps/DeskClock/+/master/src/com/android/deskclock/VerticalViewPager.java)`deskclock`，但它似乎不受官方支持，因为我找不到它的文档。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-11-20T16:49:29.157

看看这个：[https ://github.com/JakeWharton/Android-DirectionalViewPager](https://github.com/JakeWharton/Android-DirectionalViewPager)

或者以下问题可能对您有所帮助：[Vertical 'Gridview with pages' 或 'Viewpager'](https://stackoverflow.com/questions/11409091/vertical-gridview-with-pages-or-viewpager)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-01-20T01:50:28.863

只是对[@Brett](https://stackoverflow.com/questions/13477820/android-vertical-viewpager/22797619#22797619)和[@Salman666](https://stackoverflow.com/questions/13477820/android-vertical-viewpager/25507772#25507772)的答案进行了改进，以正确地将坐标 (X,Y) 转换为 (Y,X)，因为设备显示器是矩形的：

...

```
/**
 * Swaps the X and Y coordinates of your touch event
 */
@Override
public boolean onTouchEvent(MotionEvent ev) {
    return super.onTouchEvent(swapXY(ev));
}

@Override
public boolean onInterceptTouchEvent(MotionEvent ev) {
    return super.onInterceptTouchEvent(swapXY(ev));
}

private MotionEvent swapXY(MotionEvent ev) {

    //Get display dimensions
    float displayWidth=this.getWidth();
    float displayHeight=this.getHeight();

    //Get current touch position
    float posX=ev.getX();
    float posY=ev.getY();

    //Transform (X,Y) into (Y,X) taking display dimensions into account
    float newPosX=(posY/displayHeight)*displayWidth;
    float newPosY=(1-posX/displayWidth)*displayHeight;

    //swap the x and y coords of the touch event
    ev.setLocation(newPosX, newPosY);

    return ev;
} 
```

...

但是，仍然需要做一些事情来提高触摸屏的响应能力。该问题可能与@msdark 对@Salman666 的回答的评论有关。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-08-26T14:02:45.533

```
import android.content.Context;
import android.support.v4.view.ViewPager;
import android.util.AttributeSet;
import android.view.MotionEvent;
import android.view.View;

public class VerticalViewPager extends ViewPager {

    public VerticalViewPager(Context context) {
        super(context);
        init();
    }

    public VerticalViewPager(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }
    private void init() {

        setPageTransformer(true, new VerticalPageTransformer());

        setOverScrollMode(OVER_SCROLL_NEVER);
    }

    private class VerticalPageTransformer implements PageTransformer {

        @Override
        public void transformPage(View view, float position) {
            int pageWidth = view.getWidth();
            int pageHeight = view.getHeight();

            if (position < -1) {

                view.setAlpha(0);

            } else if (position <= 1) {
                view.setAlpha(1);

                view.setTranslationX(pageWidth * -position);

                float yPosition = position * pageHeight;
                view.setTranslationY(yPosition);

            } else {

                view.setAlpha(0);
            }
        }
    }
        @Override
    public boolean onTouchEvent(MotionEvent ev) {

        ev.setLocation(ev.getY(), ev.getX());

        return super.onTouchEvent(ev);
    }
    @Override
    public boolean onInterceptTouchEvent(MotionEvent ev) {
        ev.setLocation(ev.getY(), ev.getX());
        return super.onInterceptTouchEvent(ev);
    }
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-09-19T11:00:39.053

我最终创建了一个可以垂直或水平滚动的新[DirectionalViewPager ，因为我在这里看到的所有解决方案都有缺陷：](https://github.com/inorichi/DirectionalViewPager/blob/master/library/src/main/java/android/support/v4/view/DirectionalViewPager.java)

1.  现有的 VerticalViewPager 实现（通过 castorflex 和 LambergaR）

    *   它们基于非常旧的支持库版本。
2.  坐标交换变换技巧

    *   过卷轴仍然从左/右边缘显示。
    *   页面投掷不能正常工作，因为即使交换了坐标，`VelocityTracker.computeCurrentVelocity`仍然计算 X 轴的速度，可能是因为这在内部使用了忽略坐标交换的本机调用。
3.  查看旋转

    *   也需要旋转每个子视图的黑客。
    *   如果要读取其他坐标，则必须交换轴。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-03-30T09:02:04.463

甚至我在通过交换 X 和 Y 使 ViewPager 垂直时也面临同样的问题。它一点也不顺畅。

那是因为它曾经只在滑动角度小于 7.125 度 = arctan (1/8) 而拦截和 14 度 = arctan (1/4) 而触摸时起作用；当滑动角度小于 26.565 度 = arctan (1/2) 而截距和 45 度 = arctan (1) 时触摸时，原始 ViewPager 水平一项工作。

这就是为什么我复制了 Android support-core-ui 的代码并将值移动到变量，我使用反射相乘。

[请在https://github.com/deepakmishra/verticalviewpager](https://github.com/deepakmishra/verticalviewpager/blob/master/app/src/main/java/com/viewpager/VerticalViewPager.java)找到代码和自述文件，在[https://github.com/deepakmishra/verticalviewpager/blob/master/app/src/main/java/com/viewpager/VerticalViewPager](https://github.com/deepakmishra/verticalviewpager)找到 VerticalViewPager [.java](https://github.com/deepakmishra/verticalviewpager/blob/master/app/src/main/java/com/viewpager/VerticalViewPager.java)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-06-28T05:57:52.233

更好的方法是将 viewpager 旋转 90 度，并使用 constraintLayout 调整位置。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-09-05T11:26:32.070

这是一个垂直可滚动的 ViewPager 实现。与 RecyclerView 和 ListView 配合得很好。[国冲/VerticalViewPager](https://github.com/chadguo/VerticalViewPager)。

使用 ViewPager.PageTransformer 使 ViewPager 垂直滚动，同时还提供了一个 View.OnTouchListener 来处理滚动冲突。

```
/**
 * 1.dispatch ACTION_DOWN,ACTION_UP,ACTION_CANCEL to child<br>
 * 2.hack ACTION_MOVE
 *
 * @param v
 * @param e
 * @return
 */
@Override
public boolean onTouch(View v, MotionEvent e) {
    Log.i(TAG, "onTouchEvent " + ", action " + e.getAction() + ", e.rawY " + e.getRawY() + ",lastMotionY " + lastMotionY + ",downY " + downY);
    switch (e.getAction()) {
        case MotionEvent.ACTION_DOWN:
            downY = e.getRawY();
            break;
        case MotionEvent.ACTION_MOVE:

            if (downY == Float.MIN_VALUE && lastMotionY == Float.MIN_VALUE) {
                //not start from MOTION_DOWN, the child dispatch this first motion
                downY = e.getRawY();
                break;
            }

            float diff = e.getRawY() - (lastMotionY == Float.MIN_VALUE ? downY : lastMotionY);
            lastMotionY = e.getRawY();
            diff = diff / 2; //slow down viewpager scroll
            Log.e(TAG, "scrollX " + dummyViewPager.getScrollX() + ",basescrollX " + dummyViewPager.getBaseScrollX());

            if (dummyViewPager.getScrollX() != dummyViewPager.getBaseScrollX()) {
                if (fakeDragVp(v, e, diff)) return true;
            } else {
                if (ViewCompat.canScrollVertically(v, (-diff) > 0 ? 1 : -1)) {
                    Log.e(TAG, "scroll vertically  " + diff + ", move.lastMotionY " + e.getY());
                    break;
                } else {
                    dummyViewPager.beginFakeDrag();
                    fakeDragVp(v, e, diff);
                    adjustDownMotion(v, e);
                    return true;
                }
            }

            break;
        case MotionEvent.ACTION_UP:
        case MotionEvent.ACTION_CANCEL:
            if (dummyViewPager.isFakeDragging()) {
                try {
                    dummyViewPager.endFakeDrag();
                } catch (Exception e1) {
                    Log.e(TAG, "", e1);
                }
            }
            reset();
            break;
    }

    return false;
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-02-04T02:09:10.880

There's actually already one in the [Android source](https://android.googlesource.com/platform/packages/apps/DeskClock/+/master/src/com/android/deskclock/VerticalViewPager.java). I've modified it to work better though:

```
package com.crnlgcs.sdk.widgets;

import android.content.Context;
import android.support.v4.view.ViewConfigurationCompat;
import android.support.v4.view.ViewPager;
import android.util.AttributeSet;
import android.util.Log;
import android.view.MotionEvent;
import android.view.View;
import android.view.ViewConfiguration;
import android.view.ViewParent;

public class VerticalViewPager extends ViewPager {
    private static final String TAG = "VerticalViewPager";
    private static final boolean DEBUG = true;

    private float mLastMotionX;
    private float mLastMotionY;
    private float mTouchSlop;
    private boolean mVerticalDrag;
    private boolean mHorizontalDrag;

    // Vertical transit page transformer
    private final ViewPager.PageTransformer mPageTransformer = new ViewPager.PageTransformer() {
        @Override
        public void transformPage(View view, float position) {
            final int pageWidth = view.getWidth();
            final int pageHeight = view.getHeight();
            if (position < -1) {
                // This page is way off-screen to the left.
                view.setAlpha(0);
            } else if (position <= 1) {
                view.setAlpha(1);
                // Counteract the default slide transition
                view.setTranslationX(pageWidth * -position);
                // set Y position to swipe in from top
                float yPosition = position * pageHeight;
                view.setTranslationY(yPosition);
            } else {
                // This page is way off-screen to the right.
                view.setAlpha(0);
            }
        }
    };

    public VerticalViewPager(Context context) {
        super(context, null);
    }

    public VerticalViewPager(Context context, AttributeSet attrs) {
        super(context, attrs);
        final ViewConfiguration configuration = ViewConfiguration.get(context);
        mTouchSlop = ViewConfigurationCompat.getScaledPagingTouchSlop(configuration);
        init();
    }

    private void init() {
        // Make page transit vertical
        setPageTransformer(true, mPageTransformer);
        // Get rid of the overscroll drawing that happens on the left and right (the ripple)
        setOverScrollMode(View.OVER_SCROLL_NEVER);
    }

    @Override
    public boolean onTouchEvent(MotionEvent ev) {

        final float x = ev.getX();
        final float y = ev.getY();

        if (DEBUG) Log.v(TAG, "onTouchEvent " + x + ", " + y);

        switch (ev.getAction()) {
            case MotionEvent.ACTION_DOWN: {
                mLastMotionX = x;
                mLastMotionY = y;
                if (!super.onTouchEvent(ev))
                    return false;
                return verticalDrag(ev);
            }
            case MotionEvent.ACTION_MOVE: {
                final float xDiff = Math.abs(x - mLastMotionX);
                final float yDiff = Math.abs(y - mLastMotionY);
                if (!mHorizontalDrag && !mVerticalDrag) {
                    if (xDiff > mTouchSlop && xDiff > yDiff) { // Swiping left and right
                        mHorizontalDrag = true;
                    } else if (yDiff > mTouchSlop && yDiff > xDiff) { //Swiping up and down
                        mVerticalDrag = true;
                    }
                }
                if (mHorizontalDrag) {
                    return super.onTouchEvent(ev);
                } else if (mVerticalDrag) {
                    return verticalDrag(ev);
                }
            }
            case MotionEvent.ACTION_UP: {
                if (mHorizontalDrag) {
                    mHorizontalDrag = false;
                    return super.onTouchEvent(ev);
                }
                if (mVerticalDrag) {
                    mVerticalDrag = false;
                    return verticalDrag(ev);
                }
            }
        }
        // Set both flags to false in case user lifted finger in the parent view pager
        mHorizontalDrag = false;
        mVerticalDrag = false;

        return false;
    }

    private boolean verticalDrag(MotionEvent ev) {
        final float x = ev.getX();
        final float y = ev.getY();
        ev.setLocation(y, x);
        return super.onTouchEvent(ev);
    }
} 
```

# c# - 如何使用 C# 去除数据表中的重复条目？

> ID：13477829
> 
> 赞同：2
> 
> 时间：2012-11-20T16:39:14.590
> 
> 标签：c#, dataset, duplicates

> **可能重复：**
> [如何从数据表中选择不同的值？](https://stackoverflow.com/questions/1199176/how-to-select-distinct-values-from-datatable)

这是我目前正在处理的代码。我试图摆脱我的数据集中的重复字段。我相信这样做的正确方法是使用 If 语句。有人可以帮忙吗？这是我到目前为止的代码：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T17:11:40.073

> There is this DataView method called ToTable with two parameters: (and a three-parameter overloaded version)
> 
> a boolean param distinct If true, the returned System.Data.DataTable contains rows that have distinct values for all its columns. The default value is false.
> 
> a string array param columnNames A string array that contains a list of the column names to be included in the returned System.Data.DataTable. The System.Data.DataTable contains the specified columns in the order they appear within this array.

```
// create a dv from the source dt 
 DataView dv = new DataView(dt); 
// set the output columns array of the destination dt 
 string[] strColumns = {"NodeID", "Title", "Url"}; 
// true = yes, i need distinct values. 
 dt = dv.ToTable(true, strColumns); 
```

reference : [Remove Duplicate Records in a DataTable the Easy Way](http://dengkefu.com/blog/programming/c-sharp-and-dot-net/remove-duplicate-records-in-a-datatable-the-easy-way.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:22:23.027

每次我需要唯一性时，我都会使用 HashSet 而不是其他结构。所以简短的回答是：我不知道。

Hashset 有一个很好的特性，可以让你决定它认为什么是独特的——只需使用适当的构造函数。

另一件事是 - 如果您不使用 DataSets 来访问数据库 - 不要使用它，如果您这样做了，那么请改用强类型版本。如果您有充分的理由这样做，这当然不适用——这只是一般规则。

# mongodb - pymongo / mongodb 高级查询

> ID：13477831
> 
> 赞同：2
> 
> 时间：2012-11-20T16:39:20.990
> 
> 标签：mongodb, pymongo

我是 pymongo/mongodb 的新手，现在我遇到了挑战。

我在 mongodb (v 2.04) 中存储了以下结构。

```
{
    "t": <timestamp>, 
    "d": {
        "uid": <string>,
        "action": <string>
    }
} 
```

此结构跟踪用户操作，与我原来的结构相比，复杂性略有降低。数据非常庞大，查询将有一个限制日期跨度以减少结果。

我想要的是能够创建一个在特定时间跨度内执行最多操作的用户的表格。

桌子：

```
Rank    Uid    #num actions
1       5      235
2       237    234
3       574    229 
```

到目前为止，我只有一点点查询：

```
query = {"t": {"$lte": end_utc, "$gte": start_utc}}
db.actions.find(query).distinct("d.uid") 
```

这将简单地生成一个唯一 uid 的列表。如何查询（使用 pymongo）以获取列表，例如：

```
[
    {
        "actions": 100,
        "uid": 273
    },
    {
        "actions": 99",
        "uid": 632
    }..n sorted on actions descending

] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T18:02:41.480

如果您使用的是 MongoDB 2.1+，则可以将[聚合框架](http://docs.mongodb.org/manual/applications/aggregation/)用于此类查询：

```
db.actions.aggregate([
    # Filter the docs to just those within the specified timerange
    {"$match": {"t": {"$lte": end_utc, "$gte": start_utc}}},

    # Group the docs on d.uid, assembling a count of action docs with each value
    {"$group": {"_id": "$d.uid", "actions": {"$sum": 1}}},

    # Sort by actions, descending
    {"$sort": { "actions": -1 }}
]) 
```

# php - TinyMCE，当我更改语言时，编辑器不出现

> ID：13477832
> 
> 赞同：1
> 
> 时间：2012-11-20T16:39:21.597
> 
> 标签：php, tinymce

我对 tinyMCE 有疑问。当我使用默认语言（英语）时，一切正常。

```
 tinyMCE.init({
    // General options
    relative_urls : true,       
    mode : "textareas",
    theme : "advanced",
    skin : "o2k7",
    width: "790",
    height: "650",
    plugins : "smarty,img,sondage,variable,autolink,questionnaire,example,fullpage,lists,pagebreak,style,layer,table,save,advhr,advlink,emotions,iespell,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template,inlinepopups,autosave",
    // Theme options
    theme_advanced_buttons1 : "save,newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect,fontselect,fontsizeselect",
    theme_advanced_buttons2 : "outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,cleanup,help,code,|,insertdate,inserttime,preview,|,forecolor,backcolor,|,cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist",
    theme_advanced_buttons3 : "tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,emotions,iespell,media,advhr,|,print,|,ltr,rtl,|,fullscreen",
    theme_advanced_buttons4 : "insertlayer,moveforward,movebackward,absolute,|,styleprops,|,cite,abbr,acronym,del,ins,attribs,|,visualchars,nonbreaking,template,pagebreak,restoredraft,|,img,questionnaire,variable,sondage,smarty",
    theme_advanced_buttons3_add : "fullpage",
    theme_advanced_toolbar_location : "top",
    theme_advanced_toolbar_align : "left",
    theme_advanced_statusbar_location : "bottom",
    theme_advanced_resizing : true,

    // Example word content CSS (should be your site CSS) this one removes paragraph margins
    content_css : "/com-include/cms-v1/editeur/tinymce/examples/css/word.css",

    // Drop lists for link/image/media/template dialogs
    template_external_list_url : "/com-include/cms-v1/editeur/tinymce/examples/lists/template_list.js",
    external_link_list_url : "/com-include/cms-v1/editeur/tinymce/examples/lists/link_list.js",
    external_image_list_url : "/com-include/cms-v1/editeur/tinymce/examples/lists/image_list.js",
    media_external_list_url : "/com-include/cms-v1/editeur/tinymce/examples/lists/media_list.js",

    // Replace values for the template plugin
    template_replace_values : {
        username : "Some User",
        staffid : "991234"
    } 
```

但是现在，如果我添加一个属性`language : 'fr'`，编辑器不会出现，我不知道为什么。我已经下载了语言包。

你有什么想法 ？谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-04T09:53:00.227

确保您在 langs 目录中有适当的语言文件。

# visual-studio-2010 - 如何让我的自定义 IDocHostUIHandler 生效？

> ID：13477833
> 
> 赞同：1
> 
> 时间：2012-11-20T16:39:28.950
> 
> 标签：visual-studio-2010, mfc

我正在使用 VS2010，MFC 项目。我的任务是自定义 webbrowser 控件，例如禁用上下文菜单。

我编写了我的自定义 IDocHostUIHandler（例如 MyCustomUIHandler: public IDocHostUIHandler）来实现这个接口。而且我知道，我可以使用 ICustomDoc::SetUIHandler 使我的实现生效。但问题是，在调用 SetUIHandler 之前，webbrowser 控件必须有一个 Document。换句话说，我的实现只有在用户浏览第二页时才会生效。（在第一页的Document准备好后，调用SetUIHandler）

msdn文档说这个工具会自动生效！（[http://msdn.microsoft.com/en-us/library/aa770041%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/aa770041%28v=vs.85%29.aspx)）但是我不知道怎么做那。我应该更改一些配置，还是在初始化时编写一些代码？有人可以逐步指导我吗？在此先感谢:) PS：我只是一个 MFC & COM 新手~~

（我刚刚在 custom.h、custom.cpp 中编写了我的 MyCustomUIHandler 类：public IDocHostUIHandler。）

# php - Magento multistore 不同的制造商

> ID：13477839
> 
> 赞同：1
> 
> 时间：2012-11-20T16:40:04.307
> 
> 标签：php, magento, magento-1.7

我有 magento 1.7 运行多家商店，我需要为不同的商店展示不同的品牌/制造商

目前我使用这段代码：

```
<?php
$product = Mage::getModel('catalog/product');
$attributes = Mage::getResourceModel('eav/entity_attribute_collection')
->setEntityTypeFilter($product->getResource()->getTypeId())
->addFieldToFilter('attribute_code', 'manufacturer');
$attribute = $attributes->getFirstItem()->setEntity($product->getResource());
$manufacturers = $attribute->getSource()->getAllOptions(false);
?>

<?php foreach ($manufacturers as $manufacturer): ?>
<a href="/manufacturer/<?php echo $manufacturer['label'] ?>"> <?php echo $manufacturer['label'] ?> </a>
<?php endforeach; ?> 
```

在前端显示制造商，但在所有站点中显示相同的品牌。

我怎么能告诉 magento 在不同的网站上展示不同的品牌？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:24:13.003

检查属性“制造商”的范围是否设置为“商店视图”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T16:46:19.533

尝试

```
$attribute->getSource()->setStoreId($yourStoreId);
$manufacturers = $attribute->getSource()->getAllOptions(false); 
```

# android - 在列表视图中破折号

> ID：13477842
> 
> 赞同：0
> 
> 时间：2012-11-20T16:40:13.823
> 
> 标签：android, listview

你好我需要在输入中添加一个破折号（-），如果用户输入 4569 显示 45-69 或者如果用户输入 568923 显示 56-89-23，我使用子字符串，但它让我和错误无效输入，我使用列表视图和列表数据。谢谢你

这是我的代码：

```
private void showListViewData()
{

    int x = Integer.parseInt(inJugada.getText().toString().substring(0,2)
            + "-" + inJugada.getText().toString().substring(2));
    //int x = Integer.parseInt(inJugada.getText().toString());
    int y = Integer.parseInt(inValor.getText().toString());

    String z = "";
    String zQN = "Qn";
    String zPL = "Pl";  
    String zTR = "Tr";

    inJugada.setText(String.valueOf(x));
    inValor.setText(String.valueOf(y));

   if(String.valueOf(x).length() == 2){
       z = zQN;

   }else if(String.valueOf(x).length() == 4){

       z = zPL;

   }else if(String.valueOf(x).length() == 6){
       z = zTR;
   }

    mData.add(new Data(z, x, y));

    // add new data to list and refresh
    mAdapter.notifyDataSetChanged();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:49:01.137

您遇到了一个错误，因为您尝试将 String 转换为无法再解析的 Integer。看看这个声明：

```
int x = Integer.parseInt(inJugada.getText().toString().substring(0,2)
        + "-" + inJugada.getText().toString().substring(2)); 
```

将破折号添加到字符串中后，您将无法再将其解析为整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T16:48:49.017

这对你有用吗？如果您正在寻找类似的东西，请尝试一下

```
String dummyString yourMainString.substring(0,2);
for(int x = 2;x < yourMainString.length -2 ; x+2)
dummyString = dummyString + "-"+ yourMainString.substring(x,x+2) ; 
dummyString = dummyString + yourMainString.substring(x,yourMainString.length ) ; 
```

dummyString 将有 - 后两位数

# php - 在 Windows 7 64 位的 Apache Tomcat 6.0 中安装和运行 PHP

> ID：13477846
> 
> 赞同：2
> 
> 时间：2012-11-20T16:40:21.037
> 
> 标签：php, windows, tomcat

在过去的两天里，我一直在努力解决这个问题。我终于决定在这里发布我的问题。我正在尝试在我的 Apache Tomcat 上运行 PHP 脚本，但我无法做到这一点。

我尝试了许多教程：

*   [Tomcat 6 上的 PHP 5 安装](http://blog.jackneer.com/2008/10/php-5-on-tomcat-6-installation.html)
*   [在 Tomcat 6 中运行 PHP 应用程序](http://php-java-bridge.sourceforge.net/pjb/tomcat6.php)

但它给了我“无法在 amd 64 位平台 tomcat 上加载 ia 32 位 .dll”的错误。我试图解决这个问题但没有运气，因为 PECL 二进制文件不适用于 64 位系统和另一个使用 javabridge.jar 的教程，我收到错误“java.lang.UnsatisfiedLinkError: no php5srvlt in java.library.path”。

# touch - 必应地图触摸多边形交互

> ID：13477847
> 
> 赞同：1
> 
> 时间：2012-11-20T16:40:24.497
> 
> 标签：touch, bing-maps

我在引用 bing 地图触摸控件 Ajax7 时遇到了一些麻烦。

我在 bingmaps 界面顶部放置了几个多边形，以显示彩色地理区域形状。现在，每当用户平移地图或放大/缩小地图时，地图上显示的大量多边形都会导致性能滞后。

此代码将多边形推送到地图：

> Overlay_Tmp = new Microsoft.Maps.Polygon (region.Shape,region.colortheme);
> 
> map.entities.push(Overlay_Tmp);

[https://dl.dropbox.com/u/85251516/poly.png](https://dl.dropbox.com/u/85251516/poly.png)

出于这个原因，我决定在用户​​平移/缩放地图时将这些多边形设置为不可见。

用户交互应该通过观​​看绑定到 bing 地图的“viewchangestart”/“viewchangeend”事件来进行，每当通过平移/缩放等更改地图视图时就会触发该事件。

> Microsoft.Maps.Events.addHandler(map, 'viewchangestart', VC_START);
> Microsoft.Maps.Events.addHandler(map, 'viewchangeend', VC_END);

只要我与空白地图界面交互，这工作正常。viewchangestart 在平移/缩放地图时触发，viewchangeend 在停止平移/缩放时触发。

另一方面，如果在多边形叠加层中执行相同的操作，它就不会正常工作。viewchangeend 在 vi​​ewchangestart 之后被立即触发 - 所以整个想法都没有成功。

有没有人在多边形覆盖方面遇到过类似的问题，或者对我有更好的想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-22T10:10:35.560

事件按预期触发。您可以添加的一个逻辑是计算多边形的边界框（将坐标传递到 locationRect）。然后检查边界框是否与地图的边界框重叠。如果没有，则隐藏地图。

# java - 数组列表 Collections.Sort 和 LineNumberReader 帮助 如何

> ID：13477849
> 
> 赞同：-2
> 
> 时间：2012-11-20T16:40:30.880
> 
> 标签：java

我有一个问题，我现在无法让它工作，让我们在代码中解释一下，谢谢。

这是我的课：我想做的是在没有逗号的列中插入整数对列表和缓冲区写入器进行排序。现在我得到这个： [1110018, 1110032, 1110056, 1110059, 1110063, 1110085, 1110096, 1110123, 1110125, 1110185, 1110456, 1110459] 我

想要这样的：
111xxxxxx
111xxxxxx 1。

我不能在单个数组中执行此操作，必须在 ArrayList 中。
这是我的收藏：
list.addNumbers(numbers);
列表.显示（）；

这是我的作家： 缓冲
coma.write("\n"+list.display());
coma.flush();

*** *public class IdCount {
私有 ArrayList 正确编号 = new ArrayList<>();

```
 public void addNumbers(Integer numbers) {<br/>
properNumber.add(numbers);**<br/> 
```

Collections.sort(properNumber);
}
public String display() {
(我尝试 .toString() 不行)
return properNumber.toString();

```
 }** 
```

我的第二个问题是 LineNumberReader：这是我的收集和写作：
尝试 {
Reader input = new BufferedReader( new FileReader(inputFile));
try (Scanner in = new Scanner(input)) {
while (in.hasNext()) {
(更多代码)
asp = new LineNumberReader(input);
内部ROM = 0；

```
 while (asp.readLine()!=null){<br/>
                  rom++;<br/>
              }
          System.out.println(rom);<br/>coma.write(rom);<br/> 
```

这个没有写任何东西，我的系统打印在列中只给我 12 0。
感谢您的帮助。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:55:14.643

*我想要这样：
111xxxxx
111xxxx
xxxx.......*

然后在编写您的显示方法如下：

```
public String display() {
  StringBuilder sb = new StringBuilder();
  Iterator i = properNumber.iterator();
  while(i.hasNext()){
   sb.append(i.next);
   sb.append("\n");
  }

  return sb.toString();
} 
```

解释：

**你在做什么 ：**

`return properNumber.toString();`将返回一个字符串，其中包含`properNumber`逗号分隔的所有值。所以这就是为什么你得到那个输出。

**我做了什么**

制作了一个`StringBuilder`对象，以便我可以在返回所有值之前临时存储字符串。

然后我创建了一个迭代器，它遍历 `properNumber`然后将每个条目附加到`StringBuilder`对象并附加`\n`在它之后。

最后，当迭代器完成时，我已经`properNumber`在`StringBuilder`object中添加了所有条目`sb`。所以现在我将返回`sb`as `String`using`sb.toString()`方法的内容。

# r - 脚本如何在命令行运行的 R 中找到自己？

> ID：13477852
> 
> 赞同：6
> 
> 时间：2012-11-20T16:40:45.480
> 
> 标签：r, shell, command-line

我有一个脚本（调用它`Main.R`），它具有以下代码，当我运行它时可以找到它自己：

```
frame_files <- lapply(sys.frames(), function(x) x$ofile)
frame_files <- Filter(Negate(is.null), frame_files) 
main.dir <- dirname(dirname(frame_files[[length(frame_files)]])) 
```

这用于获取其自身目录之上的目录，`main.dir`用于调用相对于该路径的其他脚本。

例如，我有兴趣从命令行运行此脚本

```
R CMD BATCH Main.R 
```

或者

```
Rscript Main.R 
```

不幸的是，当我从命令行调用脚本时，上面的命令不起作用。

有没有我可以输入的代码`Main.R`或看涨期权，`R`或者`Rscript`我可以使用它来代替？

更具体地说，该解决方案需要在 Windows 中运行。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-20T18:55:59.773

下面是一个解决方案，当脚本使用`source`或使用 Rscript 运行时，它将为您提供正确的文件目录路径。

```
# this is wrapped in a tryCatch. The first expression works when source executes, the
# second expression works when R CMD does it.
full.fpath <- tryCatch(normalizePath(parent.frame(2)$ofile),  # works when using source
               error=function(e) # works when using R CMD
                     normalizePath(unlist(strsplit(commandArgs()[grep('^--file=', commandArgs())], '='))[2]))
dirname(full.fpath) 
```

关键是功能`normalizePath`。给定相对或缩写的路径名，`normalizePath`将返回有效路径或引发错误。从 Rscript 运行脚本时，如果您提供`normalizePath`当前脚本的基本文件名，它将返回完整路径，无论您当前的目录是什么。当您提供 R CMD 的相对路径并且当前目录中有一个同名的脚本时，它甚至可以获得正确的路径！

在上面的代码中，我从`commandArgs`. 如果您查看 的输出`commandArgs`，您会看到文件名是第四个参数。参数记录为'--file=yourscript.R'，所以在上面的最后一行中，我将字符串拆分为'='并拉出文件名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T18:48:17.087

想法是将路径作为 Main.R 的参数

我假设你用 RScript 调用它。

```
Rscript Main.R 'path' 
```

在您的 Main.R 中添加代码以读取参数

```
args <- commandArgs(trailingOnly = TRUE)
mainpath <- as.character(args[1]) 
```

# r - 如何在 knitr 中使用 SASxport？

> ID：13477855
> 
> 赞同：0
> 
> 时间：2012-11-20T16:40:50.707
> 
> 标签：r, knitr

我`SASxport`在`knitr`R 的包中使用，但它不起作用。有什么问题吗？当我创建 html 文件时，它在 markdown 中运行良好。不过我想创建一个pdf文件。

```
\documentclass{article}
\begin{document}
<<>>=
datapath = '.../test.xpt'
library("SASxport")
eos91.data <- read.xport(datapath)
@
\end{document} 
```

有一条错误消息：

```
Running texi2dvi on test.tex...failed

Error running C:/PROGRA~1/MIKTEX~1.9/miktex/bin/pdflatex.exe (exit code 1) 
```

日志在这里[http://pastebin.com/qkZ8Q6Ef](http://pastebin.com/qkZ8Q6Ef)

非常感谢！

# java - 在 Java 中解析和存储记录

> ID：13477856
> 
> 赞同：1
> 
> 时间：2012-11-20T16:40:52.493
> 
> 标签：java, string, split

我有一个看起来像这样的文件：

```
00000;Name blah blah blah;02;13
00032;I don't care;01;44
00123;Hello how are you;02;28
00154;Random text;03;12 
```

我只关心前两条记录：

```
00000 Name blah blah blah
00032 I don't care 
```

等等。所以我想我可以使用Java中的split函数来获取数据。（有人有更好的主意吗？）这样的事情：

```
String linea = rEntrada.readLine();
String delimitador = "[;]";
String[] tokens = null;
while ((linea = rEntrada.readLine()) != null){
    tokens = linea.split(delimitador);
} 
```

这似乎只存储最后一条记录。当我做：

```
for (String token : tokens){
    logger.info("Token: " + token);
} 
```

我得到：

```
Token: 00154
Token: Random text
Token: 03
Token: 12 
```

我究竟做错了什么？正如我所说，我只想要每行的前两个字段，稍后我会想用它们对数据库进行多次插入。什么是好的数据结构？我正在努力成为一名出色的编码员，因此将不胜感激任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:43:37.350

我将创建一个只包含您想要的两个字段的持有者类，并将该对象添加到 arraylist。

例子：

```
Holder
{
int firstAttribute;
String secondAttribute;
//Get/Set methods
}

String[] tokens = null;
List<Holder> list = new ArrayList<Holder>();
while ((linea = rEntrada.readLine()) != null){
    tokens = linea.split(delimitador);
    Holder hObj = new Holder();
    hObj.setFirstAttribute(tokens[0]);
    hObj.secondAttribute(tokens[1]);
    list.add(hObj);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T16:46:25.747

```
while ((linea = rEntrada.readLine()) != null){
   tokens = linea.split(delimitador);
} 
```

这将继续从文件中读取行并拆分它们。在每次迭代中，您将有一行标记 in `tokens`，但在接下来的迭代中，引用`tokens`将用于指向读取的新行的标记。当循环退出时，in`tokens`仍然是从最后一行读取的数据。

你要么

a）只需避免`while`和读取两次`readLine`（并在每行之后，处理和存储令牌）

b）处理循环内的标记，因此您处理每一行而不是唯一一行。

为了测试我的观点，在`while`循环中添加日志。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T16:48:04.263

在这个循环中，您不是将每一行的结果添加到数组中，而是用新的结果替换以前的结果，所以当您到达末尾时，只有最后一个结果存在！

```
while ((linea = rEntrada.readLine()) != null){
    tokens = linea.split(delimitador);
} 
```

你可以这样做：

```
List<String[]> token = new ArrayList<String[]>();
while ((linea = rEntrada.readLine()) != null){
    tokens.add(linea.split(delimitador));
}

for (String [] token: tokens) {
  System.out.println(token[0] + ":" token[1]);
} 
```

当然，取决于它有多大以及是否存在内存问题，您可能希望主动删除其他未使用的信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T06:16:43.193

```
You could have printed the tokens inside while loop.

String linea = rEntrada.readLine();
String delimitador = "[;]";
String[] tokens = null;
while ((linea = rEntrada.readLine()) != null){
 tokens = linea.split(delimitador);

 for (String token : tokens)
  {
   logger.info("Token: " + token);
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T16:47:22.657

检查文件中的行分隔符，可能只有在“00123;Hello how are you;02;28”之后才有它，因此第二次调用 readLine() 将返回“00154;Random text;03;12”

否则，粘贴工作示例，因为您似乎正在循环到文件末尾。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-20T16:59:00.790

```
class Record {
    String number;
    String text;

    public Record(String number, String text) {
        super();
        this.number = number;
        this.text = text;
    }   
}

class Parser{

    int maxLines=2;

    public List<Record> parseFile(InputStream in){
        Scanner scanner = new Scanner(in);
        List<Record> list = new ArrayList<Record>();
        String line = null;     
        int curLine=0;
        while(curLine<maxLines && (line=scanner.nextLine())!=null){
            String[] split = line.split(";");               
            list.add(new Record(split[0], split[1]));
            curLine++;
        }
        return list;
    }
} 
```

# php - PHP 语句 switch case 礼仪

> ID：13477859
> 
> 赞同：-1
> 
> 时间：2012-11-20T16:40:59.740
> 
> 标签：php, switch-statement

**1**

```
switch($app_id){
    case (
        $app_id == 1 || 
        $app_id == 2
    ):
        //do something
    break;
    case 3:
        //do something else
    break;
} 
```

和

**2**

```
switch($app_id){
    case 1:
    case 2: 
        //do something
    break;
    case 3:
        //do something else
    break;
} 
```

除了礼仪之外，还有更好的理由为什么你不会做第二件事还是完全取决于你？

我问的原因是因为在 php.net 中它说你不应该做后者，无论你是否愿意**（来自 php.net 的片段说你不应该不间断地做案例，无论你是否想堆叠查询或不是）**：

```
<?php
switch ($i) {
case 0:
    echo "i equals 0";
case 1:
    echo "i equals 1";
case 2:
    echo "i equals 2";
}
?> 
```

在这里，如果 $i 等于 0，PHP 将执行所有的 echo 语句！如果 $i 等于 1，PHP 将执行最后两个 echo 语句。仅当 $i 等于 2 时，您才会得到预期的行为（将显示“i 等于 2”）。因此，重要的是不要忘记 break 语句（**即使在某些情况下您可能希望避免故意提供​​它们**）。

**到目前为止的原因：**

1.  *回答：*如果我省略了一个休息时间以允许跌倒，我会发表评论说发生了跌倒，这样下一个出现的人就不会“啊哈！错过休息！繁荣”-马克 B

    *我的评论：*很好的理由马克！那是礼仪的流浪汉。如果你打破它，人们还没有准备好被他们的队长正确性所欺骗。

2.  *答案：* @JamesT：您所读到的内容只会警告您不要错误地忘记它，因为这是一个非常常见的编程错误。如果它是有意的，你可以这样做。——宇智波斑

    *我的评论：*我认为礼仪赢得了这个问题。一定要插入中断，因为它可能会让下一个编辑你的代码的人感到困惑；唉，如果你足够明智地发表评论来解释你打算错过它，那就去做吧

3.  *回答：*你错过了理解他们的情绪。他们正在谈论在每种情况下都有单独的操作时省略休息，例如我的第一个示例。如果在案例之间完全共享操作，则对案例进行分组，例如示例一中的 4 和 5 是非常好的和鼓励的。– 罗科德

    *我的评论：*我同意这句话可能被误读。除了让未来的开发人员质疑你是否有意离开突破之外，我认为没有任何理由。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:44:51.133

好吧，您的第一个示例可能不会按照您的预期行事。

```
switch($app_id){
    case (
        $app_id == 1 || 
        $app_id == 3
    ):
        //do something
    case 3:
        //do something else
    break;
} 
```

这将评估条件并解析为`TRUE`or`FALSE`值，然后将其与`$app_id`. 在这种（非常具体的）情况下，您会得到预期的结果，**但这不是正确的方法！**.

使用开关盒时，您展示的第二种方法更好。

* * *

break 语句用于在满足条件后退出案例。您可以忽略它，并执行所有后续案例。**如果这是预期的行为，那么以这种方式实现它是非常好的。**不要忘记添加评论以澄清它。善待未来的你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T16:44:32.997

下面的开关是一样的`if($i == 1 || $i == 2 || $i == 3)`

```
switch($i) {
  case 1:
    echo "1";
  case 2:
    echo "2";
  case 3:
    echo "3";
    break;
} 
```

假设 $i == 1，上面的代码实际上会输出“123”——这通常是不正确的。

正确的例子：

```
if ($i == 1) // Do something
else if ($i == 2) // Do something else, etc 
```

是相同的

```
switch(i) {
  case 1:
    echo "1";
    break;
  case 2:
    echo "1";
    break;

  case 4:
  case 5:
    echo "This is 4 and 5";
    break;
} 
```

上面的代码只会为 $i == 1 输出“1”

有些人确实将他们的案例包含在 {} 中，但这纯粹是为了便于阅读，不会强制中断。

关于您的示例`case (4 || 5)`- 这将导致语法错误。

# c++ - 在 C++ 中比较文件以进行更新的最佳方法？

> ID：13477860
> 
> 赞同：1
> 
> 时间：2012-11-20T16:41:00.077
> 
> 标签：c++, ftp, md5, libcurl

我有一个任务，我需要在服务器上的一堆文件和本地计算机上的一堆文件之间查找更新。我在这里完全不知所措，最好最快的方法是什么？

我打算使用 libcurl 和 c++ 来登录 ftp。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T16:43:49.447

取决于其他因素，例如其他因素，但一种方法可能是创建一个目录结构，其中日期是目录名称。这样做的好处是很容易找到属于特定更新的内容，并且您可以在名称之后对目录进行排序，例如 yyyymmdd。您只需要记住上次更新的时间，您还可以包含一个包含更改信息和版本号的文件，以使其更加用户友好。

通常，一个版本可能包含几个新文件，因此将它们放在同一个保护伞下可能是一个好主意，而不是更新每个单独的文件，因为一段时间后，记住哪些文件可能会变得很复杂。

# java - Android 上的 AES 128 加密

> ID：13477863
> 
> 赞同：1
> 
> 时间：2012-11-20T16:41:10.057
> 
> 标签：java, android, encryption, aes

> **可能重复：**
> [使用 AES 的 android 加密/解密](https://stackoverflow.com/questions/6788018/android-encryption-decryption-with-aes)

在过去的 7 天里，我一直在寻找一个，只有一个关于 AES 128 加密的 android 示例可以正常工作，但我不能，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-20T16:44:56.103

[http://code.google.com/p/aes-encryption-samples/wiki/HowToEncryptWithJava](http://code.google.com/p/aes-encryption-samples/wiki/HowToEncryptWithJava)怎么样。我使用它并且它有效（我不是专家！）

# objective-c - NSTableCellView 子类，用于显示按钮，如 Console.app

> ID：13477866
> 
> 赞同：1
> 
> 时间：2012-11-20T16:41:18.053
> 
> 标签：objective-c, cocoa, nstableview, nstablecellview

在我的 NSTableView 中，我想要像 Console.app: 这样的单元格，如果文本被截断，左侧有一个显示三角形按钮来扩展行。

有人建议我将 NSTableCellView 子类化，但经过几次尝试，我在编程和 IB 之间迷失了方向。

有人可以告诉我显示此按钮的伪代码吗？（那么调整行大小的代表和动作将是另一回事......）

# google-chrome - 在 Chrome 中粘贴剪贴板中的图像

> ID：13477868
> 
> 赞同：1
> 
> 时间：2012-11-20T16:41:24.660
> 
> 标签：google-chrome, google-chrome-extension, clipboard, google-drive-api, google-chrome-app

我正在编辑器上工作，我想通过单击提供一个按钮来粘贴已复制到剪贴板的图像。我不能这样做，因为出于安全原因，浏览器不允许访问剪贴板。

我查看了 Google Drive 以了解 Google 是如何完成的。在 chrome 中，他们要求从 Chrome webstore 安装 Google Drive webapp，该应用程序请求 clipboardRead 和 clipboardWrite**[权限](http://developer.chrome.com/extensions/manifest.html#permissions)**，并且一旦安装了应用程序。一切都像 Google Drive 中的魅力一样。文档说**使用 document.execCommand('paste')**。但是我找不到任何实现这个的示例，也无法在我的应用程序中实现它。有人可以在这里为我提供一个示例，说明当图像在剪贴板中时如何进行这项工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:19:09.970

我们需要在应用程序的清单文件中添加权限（clipboardRead 和 clipboardWrite），然后如果要从剪贴板粘贴文本/图像，我们需要将焦点放在 html 中的虚拟文本框/图像元素上，然后运行 ​​document. execCommand('paste') 现在这个元素可以访问剪贴板复制的项目并获取文本或图像以使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-02T17:24:30.197

归功于[https://stackoverflow.com/a/6338207/85597](https://stackoverflow.com/a/6338207/85597)

```
// window.addEventListener('paste', ... or
document.onpaste = function(event){
  var items = event.clipboardData.items;
  console.log(JSON.stringify(items)); // will give you the mime types
  var blob = items[0].getAsFile();
  var reader = new FileReader();
  reader.onload = function(event){
    console.log(event.target.result)}; // data url!
  reader.readAsDataURL(blob);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T06:35:56.637

到目前为止，没有来自 chrome 的 API

[https://groups.google.com/forum/?fromgroups=#!topic/chromium-extensions/BJAn5_OwT2g](https://groups.google.com/forum/?fromgroups=#!topic/chromium-extensions/BJAn5_OwT2g)，因为粘贴被认为存在安全风险

# python - python中的p值和列表

> ID：13477870
> 
> 赞同：0
> 
> 时间：2012-11-20T16:41:32.200
> 
> 标签：python, list, mongodb, statistics

我有大量嵌入在文档中的数字数据集。我想把它们全部提取出来，把它们放在一个有序列表中，然后将它的“pvalue”返回到每个文档：这是它在排序列表中的顺序除以列表的长度。我在弄清楚如何在 python 代码中执行此操作时遇到了很多麻烦。

```
movie_records = db.movies.find()
list=[]

for i in movie_records:
    num = i["total_tickets"]

    #put them all in a list, order the list

for i in movie_records:
    number=i["total_tickets"]
    tickets_pvalue= 1 - ( #position of number /len(list) )
    shows.update({"id":i["id"]}, {'$set':{"total_tickets_pvalue":tickets_pvalue}}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T17:02:53.417

除非对 mongodb 有任何了解（最好按照评论中的建议进行排序）：

```
movie_records = sorted([(m['total_tickets'], m) for m in db.movies.find()])

# Select distinct on total_tickets
distinct_records = []
prev = None
while movie_records:
    record = movie_records.pop(0)
    if record[0] != prev:
        prev = record[0]
        distinct_records.append(record[1])

for index, movie in enumerate(distinct_records):
    tickets_pvalue = 1 - (index + 1.0) / len(distinct_records)
    shows.update({"id": movie["id"]},
                 {'$set': {"total_tickets_pvalue": tickets_pvalue}}) 
```

# html - 我的 DIVS 坐不稳

> ID：13477871
> 
> 赞同：2
> 
> 时间：2012-11-20T16:41:40.900
> 
> 标签：html, css

我已经坚持了好几个星期了！！我正在尝试将我的注册表单放在所有文本和横幅的右侧，但是无论我做什么，这都行不通。

以下是我目前使用的所有 HTML 和 CSS。

```
 <!DOCTYPE html>
    <html>
    <head>
    <title>Sign Up</title>
    <style>
    body
    {
        background: url(http://www.catalink.com/images/christmas-1211.jpg);
    }
    .outer
    {
        margin: auto;
        width: 910px;
    }
    .inner
    {
        background: white;
        width: 905px;
        margin: auto;
    }
    .image
    {
        float: left;
    }
    .catname
    {
        margin-right: 180px;
        margin-left: 245px;
        background: #cae1ff;
        text-align: center;
        font-family: Verdana, Geneva, sans-serif;
        font-size: 11px;
        line-height: 18px;
        height: 20px;
        border: solid;
        border-width: thin;
        border-color: #828282;
    }
    .catcopy
    {
        margin-right: 180px;
        padding-left: 28%;
        font-family: Verdana, Geneva, sans-serif;
        font-size: 11px;
        line-height: 18px;
    }
    .banner
    {
        margin-left: 250px;
        margin-right: 180px;
        padding-top: 25px;
    }
    .singlelineform
    {
        background: #DDD;
        width: 150px;
        font-family: Verdana, Geneva, sans-serif;
        font-size: 12px;
        line-height: 18px;
        border: solid;
        border-width: thin;
        border-radius: 12px;
        padding: 5px;
    }
    .ntitle
    {
        font-family: Verdana, Geneva, sans-serif;
        font-size: 12px;
        line-height: 18px;
    }
    .fname
    {
        font-family: Verdana, Geneva, sans-serif;
        font-size: 12px;
        line-height: 18px;
        padding: 2px;
    }
    .day
    {
        font-family: Verdana, Geneva, sans-serif;
        font-size: 12px;
        line-height: 18px;
    }
    .month
    {
        font-family: Verdana, Geneva, sans-serif;
        font-size: 12px;
        line-height: 18px;
    }
    .year
    {
        font-family: Verdana, Geneva, sans-serif;
        font-size: 12px;
        line-height: 18px;
    }
    button, input, select, textarea {
      font-family: Verdana, Geneva, sans-serif;
      font-size: 12px;
    }
      input
    {
      -webkit-box-sizing: border-box;
      -moz-box-sizing: border-box;
      -khtml-box-sizing: border-box;
      box-sizing: border-box;
      -webkit-border-radius: 12px;
      -moz-border-radius: 12px;
      -khtml-border-radius: 12px;
      border-radius: 12px;
    }
    select
    {
      -webkit-box-sizing: border-box;
      -moz-box-sizing: border-box;
      -khtml-box-sizing: border-box;
      box-sizing: border-box;
      -webkit-border-radius: 12px;
      -moz-border-radius: 12px;
      -khtml-border-radius: 12px;
      border-radius: 12px;
    }
    button
    {
      -webkit-box-sizing: border-box;
      -moz-box-sizing: border-box;
      -khtml-box-sizing: border-box;
      box-sizing: border-box;
      -webkit-border-radius: 12px;
      -moz-border-radius: 12px;
      -khtml-border-radius: 12px;
      border-radius: 12px;
    }
    </style>
    </head>

    <body>
    <div class="outer">
    <div class="inner">
    <div class="image"><img src="http://www.catalink.com/images/cat/extralarge/burton-1208d.jpg" /></div>
    <div class="catname"><b>Burton eNewsletter</b></div>
    <div class="catcopy"><p><b>Outfitters of the Modern British Man...</b></p><p><b>Burton believes in combining accessible style with great value.</b> They want fashion to be easy and comfortable as well as stylish. They embrace their British tailoring roots but they also understand the importance of kicking back in a great pair of jeans and a hoodie. They love a good laugh, but they also know the importance of <b>"looking the business"</b></p></div>
    <div class="banner"><a href="http://www.burton.co.uk/webapp/wcs/stores/servlet/TopCategoriesDisplay?storeId=12551&catalogId=33052" target="blank"><img src="http://www.catalink.com/images/450ban/burton-450ban-1208b.jpg" border="0" /></a></div>
    <div class="singlelineform">
    <form>
    <div class="formtitle"><b>To request this brochure please fill out the form below.</b></div>
    <div class="ntitle"><b>First Name*:</b><br><select>
      <option value="title">Title</option>
      <option value="mr">Mr</option>
      <option value="mrs">Mrs</option>
      <option value="miss">Miss</option>
      <option value="ms">Ms</option>
    </select>
    </div>
    <div class="fname">
    <input type="firstname" name="fname" /></div>
    <div class="lname"><b>Last Name:*</b><input type="lastname" name="lname" /></div>
    <div class="day"><b>Date of Birth*:</b>
    <select name="date" form="dateform">
    <option value="day">Day</option>
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
    <option value="6">6</option>
    <option value="7">7</option>
    <option value="8">8</option>
    <option value="9">9</option>
    <option value="10">10</option>
    <option value="11">11</option>
    <option value="12">12</option>
    <option value="13">13</option>
    <option value="14">14</option>
    <option value="15">15</option>
    <option value="16">16</option>
    <option value="17">17</option>
    <option value="18">18</option>
    <option value="19">19</option>
    <option value="20">20</option>
    <option value="21">21</option>
    <option value="22">22</option>
    <option value="23">23</option>
    <option value="24">24</option>
    <option value="25">25</option>
    <option value="26">26</option>
    <option value="27">27</option>
    <option value="28">28</option>
    <option value="29">29</option>
    <option value="30">30</option>
    <option value="31">31</option>
    </select>
    </div>
    <div class="month">
    <select form="monthhform">
    <option value="month">Month</option>
    <option value="january">January</option>
    <option value="february">February</option>
    <option value="march">March</option>
    <option value="april">April</option>
    <option value="may">May</option>
    <option value="june">June</option>
    <option value="july">July</option>
    <option value="august">August</option>
    <option value="september">September</option>
    <option value="october">October</option>
    <option value="november">November</option>
    <option value="december">December</option>
    </select>
    </div>
    <div class="year">
    <select form="yearform">
    <option value="year">Year</option>
    <option value="1994">1994</option>
    <option value="1993">1993</option>
    <option value="1992">1992</option>
    <option value="1991">1991</option>
    <option value="1990">1990</option>
    <option value="1989">1989</option>
    <option value="1988">1988</option>
    <option value="1987">1987</option>
    <option value="1986">1986</option>
    <option value="1985">1985</option>
    <option value="1984">1984</option>
    <option value="1983">1983</option>
    <option value="1982">1982</option>
    <option value="1981">1981</option>
    <option value="1980">1980</option>
    <option value="1979">1979</option>
    <option value="1978">1978</option>
    <option value="1977">1977</option>
    <option value="1976">1976</option>
    <option value="1975">1975</option>
    <option value="1974">1974</option>
    <option value="1973">1973</option>
    <option value="1972">1972</option>
    <option value="1971">1971</option>
    <option value="1970">1970</option>
    <option value="1969">1969</option>
    <option value="1968">1968</option>
    <option value="1967">1967</option>
    <option value="1966">1966</option>
    <option value="1965">1965</option>
    <option value="1964">1964</option>
    <option value="1963">1963</option>
    <option value="1962">1962</option>
    <option value="1961">1961</option>
    <option value="1960">1960</option>
    <option value="1959">1959</option>
    <option value="1958">1958</option>
    <option value="1957">1957</option>
    <option value="1956">1956</option>
    <option value="1955">1955</option>
    <option value="1954">1954</option>
    <option value="1953">1953</option>
    <option value="1952">1952</option>
    <option value="1951">1951</option>
    <option value="1950">1950</option>
    <option value="1949">1949</option>
    <option value="1948">1948</option>
    <option value="1947">1947</option>
    <option value="1946">1946</option>
    <option value="1945">1945</option>
    <option value="1944">1944</option>
    <option value="1943">1943</option>
    <option value="1942">1942</option>
    <option value="1941">1941</option>
    <option value="1940">1940</option>
    <option value="1939">1939</option>
    <option value="1938">1938</option>
    <option value="1937">1937</option>
    <option value="1936">1936</option>
    <option value="1935">1935</option>
    <option value="1934">1934</option>
    <option value="1933">1933</option>
    <option value="1932">1932</option>
    <option value="1931">1931</option>
    <option value="1930">1930</option>
    <option value="1929">1929</option>
    <option value="1928">1928</option>
    <option value="1927">1927</option>
    <option value="1926">1926</option>
    <option value="1925">1925</option>
    <option value="1924">1924</option>
    <option value="1923">1923</option>
    <option value="1922">1922</option>
    <option value="1921">1921</option>
    <option value="1920">1920</option>
    <option value="1919">1919</option>
    <option value="1918">1918</option>
    <option value="1917">1917</option>
    <option value="1916">1916</option>
    <option value="1915">1915</option>
    <option value="1914">1914</option>
    <option value="1913">1913</option>
    <option value="1912">1912</option>
    <option value="1911">1911</option>
    <option value="1910">1910</option>
    </select></div>
    <div class="email"><b>Email:*</b><input type="email" name="email" /></div>
    <div class="hnumber"><b>House Number*:</b><input type="houseno" name="address" /></div>
    <div class="pcode"><b>Post Code:*</b><input type="pcode" name="email" />
    <button type="submit" name="faddress">Find Address</button></div>
    </form>
    </div>
    </div>
    </div>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:52:04.753

```
<!DOCTYPE html>
<html>
<head>
    <title>Sign Up</title>
    <style>
        body
        {
            background: url(http://www.catalink.com/images/christmas-1211.jpg);
        }
        .outer
        {
            margin: auto;
            width: 910px;
        }
        .inner
        {
            background: white;
            width: 905px;
            margin: auto;
        }
        .image
        {
            float: left;
        }
        .catname
        {
            margin-right: 180px;
            margin-left: 245px;
            background: #cae1ff;
            text-align: center;
            font-family: Verdana, Geneva, sans-serif;
            font-size: 11px;
            line-height: 18px;
            height: 20px;
            border: solid;
            border-width: thin;
            border-color: #828282;
        }
        .catcopy
        {
            margin-right: 180px;
            padding-left: 28%;
            font-family: Verdana, Geneva, sans-serif;
            font-size: 11px;
            line-height: 18px;
        }
        .banner
        {
            margin-left: 250px;
            margin-right: 180px;
            padding-top: 25px;
        }
        .singlelineform
        {
            background: #DDD;
            width: 150px;
            font-family: Verdana, Geneva, sans-serif;
            font-size: 12px;
            line-height: 18px;
            border: solid;
            border-width: thin;
            border-radius: 12px;
            padding: 5px;
            float: right;
        }
        .ntitle
        {
            font-family: Verdana, Geneva, sans-serif;
            font-size: 12px;
            line-height: 18px;
        }
        .fname
        {
            font-family: Verdana, Geneva, sans-serif;
            font-size: 12px;
            line-height: 18px;
            padding: 2px;
        }
        .day
        {
            font-family: Verdana, Geneva, sans-serif;
            font-size: 12px;
            line-height: 18px;
        }
        .month
        {
            font-family: Verdana, Geneva, sans-serif;
            font-size: 12px;
            line-height: 18px;
        }
        .year
        {
            font-family: Verdana, Geneva, sans-serif;
            font-size: 12px;
            line-height: 18px;
        }
        button, input, select, textarea
        {
            font-family: Verdana, Geneva, sans-serif;
            font-size: 12px;
        }
        input
        {
            -webkit-box-sizing: border-box;
            -moz-box-sizing: border-box;
            -khtml-box-sizing: border-box;
            box-sizing: border-box;
            -webkit-border-radius: 12px;
            -moz-border-radius: 12px;
            -khtml-border-radius: 12px;
            border-radius: 12px;
        }
        select
        {
            -webkit-box-sizing: border-box;
            -moz-box-sizing: border-box;
            -khtml-box-sizing: border-box;
            box-sizing: border-box;
            -webkit-border-radius: 12px;
            -moz-border-radius: 12px;
            -khtml-border-radius: 12px;
            border-radius: 12px;
        }
        button
        {
            -webkit-box-sizing: border-box;
            -moz-box-sizing: border-box;
            -khtml-box-sizing: border-box;
            box-sizing: border-box;
            -webkit-border-radius: 12px;
            -moz-border-radius: 12px;
            -khtml-border-radius: 12px;
            border-radius: 12px;
        }
        .clear
        {
            width: 100%;
            height: 0px;
            clear: both;
            overflow: hidden;
        }
    </style>
</head>
<body>
    <div class="outer">
        <div class="inner">
            <div class="singlelineform">
                <form>
                <div class="formtitle">
                    <b>To request this brochure please fill out the form below.</b></div>
                <div class="ntitle">
                    <b>First Name*:</b><br>
                    <select>
                        <option value="title">Title</option>
                        <option value="mr">Mr</option>
                        <option value="mrs">Mrs</option>
                        <option value="miss">Miss</option>
                        <option value="ms">Ms</option>
                    </select>
                </div>
                <div class="fname">
                    <input type="firstname" name="fname" /></div>
                <div class="lname">
                    <b>Last Name:*</b><input type="lastname" name="lname" /></div>
                <div class="day">
                    <b>Date of Birth*:</b>
                    <select name="date" form="dateform">
                        <option value="day">Day</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                        <option value="11">11</option>
                        <option value="12">12</option>
                        <option value="13">13</option>
                        <option value="14">14</option>
                        <option value="15">15</option>
                        <option value="16">16</option>
                        <option value="17">17</option>
                        <option value="18">18</option>
                        <option value="19">19</option>
                        <option value="20">20</option>
                        <option value="21">21</option>
                        <option value="22">22</option>
                        <option value="23">23</option>
                        <option value="24">24</option>
                        <option value="25">25</option>
                        <option value="26">26</option>
                        <option value="27">27</option>
                        <option value="28">28</option>
                        <option value="29">29</option>
                        <option value="30">30</option>
                        <option value="31">31</option>
                    </select>
                </div>
                <div class="month">
                    <select form="monthhform">
                        <option value="month">Month</option>
                        <option value="january">January</option>
                        <option value="february">February</option>
                        <option value="march">March</option>
                        <option value="april">April</option>
                        <option value="may">May</option>
                        <option value="june">June</option>
                        <option value="july">July</option>
                        <option value="august">August</option>
                        <option value="september">September</option>
                        <option value="october">October</option>
                        <option value="november">November</option>
                        <option value="december">December</option>
                    </select>
                </div>
                <div class="year">
                    <select form="yearform">
                        <option value="year">Year</option>
                        <option value="1994">1994</option>
                        <option value="1993">1993</option>
                        <option value="1992">1992</option>
                        <option value="1991">1991</option>
                        <option value="1990">1990</option>
                        <option value="1989">1989</option>
                        <option value="1988">1988</option>
                        <option value="1987">1987</option>
                        <option value="1986">1986</option>
                        <option value="1985">1985</option>
                        <option value="1984">1984</option>
                        <option value="1983">1983</option>
                        <option value="1982">1982</option>
                        <option value="1981">1981</option>
                        <option value="1980">1980</option>
                        <option value="1979">1979</option>
                        <option value="1978">1978</option>
                        <option value="1977">1977</option>
                        <option value="1976">1976</option>
                        <option value="1975">1975</option>
                        <option value="1974">1974</option>
                        <option value="1973">1973</option>
                        <option value="1972">1972</option>
                        <option value="1971">1971</option>
                        <option value="1970">1970</option>
                        <option value="1969">1969</option>
                        <option value="1968">1968</option>
                        <option value="1967">1967</option>
                        <option value="1966">1966</option>
                        <option value="1965">1965</option>
                        <option value="1964">1964</option>
                        <option value="1963">1963</option>
                        <option value="1962">1962</option>
                        <option value="1961">1961</option>
                        <option value="1960">1960</option>
                        <option value="1959">1959</option>
                        <option value="1958">1958</option>
                        <option value="1957">1957</option>
                        <option value="1956">1956</option>
                        <option value="1955">1955</option>
                        <option value="1954">1954</option>
                        <option value="1953">1953</option>
                        <option value="1952">1952</option>
                        <option value="1951">1951</option>
                        <option value="1950">1950</option>
                        <option value="1949">1949</option>
                        <option value="1948">1948</option>
                        <option value="1947">1947</option>
                        <option value="1946">1946</option>
                        <option value="1945">1945</option>
                        <option value="1944">1944</option>
                        <option value="1943">1943</option>
                        <option value="1942">1942</option>
                        <option value="1941">1941</option>
                        <option value="1940">1940</option>
                        <option value="1939">1939</option>
                        <option value="1938">1938</option>
                        <option value="1937">1937</option>
                        <option value="1936">1936</option>
                        <option value="1935">1935</option>
                        <option value="1934">1934</option>
                        <option value="1933">1933</option>
                        <option value="1932">1932</option>
                        <option value="1931">1931</option>
                        <option value="1930">1930</option>
                        <option value="1929">1929</option>
                        <option value="1928">1928</option>
                        <option value="1927">1927</option>
                        <option value="1926">1926</option>
                        <option value="1925">1925</option>
                        <option value="1924">1924</option>
                        <option value="1923">1923</option>
                        <option value="1922">1922</option>
                        <option value="1921">1921</option>
                        <option value="1920">1920</option>
                        <option value="1919">1919</option>
                        <option value="1918">1918</option>
                        <option value="1917">1917</option>
                        <option value="1916">1916</option>
                        <option value="1915">1915</option>
                        <option value="1914">1914</option>
                        <option value="1913">1913</option>
                        <option value="1912">1912</option>
                        <option value="1911">1911</option>
                        <option value="1910">1910</option>
                    </select></div>
                <div class="email">
                    <b>Email:*</b><input type="email" name="email" /></div>
                <div class="hnumber">
                    <b>House Number*:</b><input type="houseno" name="address" /></div>
                <div class="pcode">
                    <b>Post Code:*</b><input type="pcode" name="email" />
                    <button type="submit" name="faddress">
                        Find Address</button></div>
                </form>
            </div>
            <div class="image">
                <img src="http://www.catalink.com/images/cat/extralarge/burton-1208d.jpg" /></div>
            <div class="catname">
                <b>Burton eNewsletter</b></div>
            <div class="catcopy">
                <p>
                    <b>Outfitters of the Modern British Man...</b></p>
                <p>
                    <b>Burton believes in combining accessible style with great value.</b> They want
                    fashion to be easy and comfortable as well as stylish. They embrace their British
                    tailoring roots but they also understand the importance of kicking back in a great
                    pair of jeans and a hoodie. They love a good laugh, but they also know the importance
                    of <b>"looking the business"</b></p>
            </div>
            <div class="banner">
                <a href="http://www.burton.co.uk/webapp/wcs/stores/servlet/TopCategoriesDisplay?storeId=12551&catalogId=33052"
                    target="blank">
                    <img src="http://www.catalink.com/images/450ban/burton-450ban-1208b.jpg" border="0" /></a></div>
            <div class="clear"></div>
        </div>
    </div>
</body>
</html> 
```

这是你想要达到的目标吗？

[http://jsfiddle.net/c4GPW/](http://jsfiddle.net/c4GPW/) ​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T16:53:20.100

```
outer{
margin: auto;
width: 910px;
position: relative;
}

.singlelineform {
background: #DDD;
width: 150px;
font-family: Verdana, Geneva, sans-serif;
font-size: 12px;
line-height: 18px;
border: solid;
border-width: thin;
border-radius: 12px;
padding: 5px;
position: absolute;
right: 0;
top: 0;
} 
```

[http://jsfiddle.net/g2BgV/1/](http://jsfiddle.net/g2BgV/1/)

# vb.net - 使用来自 vb.net 的参数插入 SQLite 数据库

> ID：13477872
> 
> 赞同：0
> 
> 时间：2012-11-20T16:41:40.607
> 
> 标签：vb.net, parameters, sqlite

我想将列表项插入带有参数的 SQLite3 数据库，但它不起作用..而且我什至没有收到任何错误。

这是我的代码：

```
strSQL = "insert into tbltrans2 (transid, flddate, itemcode, itemname, qty, price, total, btw, btwper) values ( ?,?,?,?,?,?,?,?,?)"
Using cn As New SQLiteConnection("Data Source=" + Application.StartupPath + "\POS.s3db; Version=3;"), _
    cmd As New SQLiteCommand(strSQL, cn)

    cmd.Parameters.Add("?", DbType.String).Value = txtTransId.Text
    cmd.Parameters.Add("?", DbType.Date).Value = txtDate.Text
    cmd.Parameters.Add("?", DbType.Double)
    cmd.Parameters.Add("?", DbType.Double)
    cmd.Parameters.Add("?", DbType.Double)
    cmd.Parameters.Add("?", DbType.Double)
    cmd.Parameters.Add("?", DbType.Double)
    cmd.Parameters.Add("?", DbType.Double)
    cmd.Parameters.Add("?", DbType.Double)

    cn.Open()
    For Each ls As ListViewItem In ListItems.Items
        cmd.Parameters(2).Value = ls.Tag
        cmd.Parameters(3).Value = ls.SubItems(0).Text
        cmd.Parameters(4).Value = (ls.SubItems(1).Text)
        cmd.Parameters(5).Value = (ls.SubItems(2).Text)
        cmd.Parameters(6).Value = (ls.SubItems(3).Text)
        cmd.Parameters(7).Value = (Double.Parse(ls.SubItems(5).Text) / 100) * (Double.Parse(ls.SubItems(3).Text)).ToString("#,##0.00")
        cmd.Parameters(8).Value = Double.Parse(ls.SubItems(5).Text)

        cmd.ExecuteNonQuery()
        MsgBox(strSQL)
     Next ls
     cn.Close()
 End Using 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T00:37:33.720

你可以这样做......只是删除值？......然后在 cmd.parameters.add.(Dbtype.String).value =txtTransId.Text.... 只需将它的所有值放在文本中......

```
strSQL = "insert into tbltrans2 (transid, flddate, itemcode, itemname, qty, price, total, btw, btwper)"
Using cn As New SQLiteConnection("Data Source=" + Application.StartupPath + "\POS.s3db; Version=3;"), _
    cmd As New SQLiteCommand(strSQL, cn)

    cmd.Parameters.Add( DbType.String).Value = txtTransId.Text
    cmd.Parameters.Add( DbType.Date).Value = txtDate.Text
    cmd.Parameters.Add( DbType.Double).Value = "The TEXT HERE"
    cmd.Parameters.Add( DbType.Double).Value = "The TEXT HERE"
    cmd.Parameters.Add( DbType.Double).Value = "The TEXT HERE"
    cmd.Parameters.Add( DbType.Double).Value = "The TEXT HERE"
    cmd.Parameters.Add( DbType.Double).Value = "The TEXT HERE"
    cmd.Parameters.Add( DbType.Double).Value = "The TEXT HERE"
    cmd.Parameters.Add(DbType.Double).Value = "The TEXT HERE"

    cn.Open()
    For Each ls As ListViewItem In ListItems.Items
        cmd.Parameters(2).Value = ls.Tag
        cmd.Parameters(3).Value = ls.SubItems(0).Text
        cmd.Parameters(4).Value = (ls.SubItems(1).Text)
        cmd.Parameters(5).Value = (ls.SubItems(2).Text)
        cmd.Parameters(6).Value = (ls.SubItems(3).Text)
        cmd.Parameters(7).Value = (Double.Parse(ls.SubItems(5).Text) / 100) * (Double.Parse(ls.SubItems(3).Text)).ToString("#,##0.00")
        cmd.Parameters(8).Value = Double.Parse(ls.SubItems(5).Text)

        cmd.ExecuteNonQuery()
        MsgBox(strSQL)
     Next ls
     cn.Close()
 End Using 
```

# php - 保护某些页面不被直接访问

> ID：13477877
> 
> 赞同：0
> 
> 时间：2012-11-20T16:41:50.870
> 
> 标签：php, modx

我正在尝试用密码保护某些页面不被公众看到。要登录，我必须使用位于 iframe 中的外部页面，并在他们的网站上使用回调地址创建此登录，该回调地址应该是受保护的页面。

如果登录成功，我唯一得到的就是我想要的页面的 GET 方法，如果正确，则只有 dc=1 和时间戳。

因此，如果我将使用 php 脚本作为回调地址，那么只需将 ?dc=1 添加到末尾即可让您访问该页面。

我以为我可以使用加载起始页时的会话 ID，但他们只需要加载起始页一次，然后调用回调地址即可访问。

正如我所描述的，有谁知道使用这种类型的外部登录来限制对某些页面的访问的安全方法？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-20T16:42:50.233

将 .htacesss 设置为拒绝除您的 IP 之外的所有内容？

# ios - 检测音频文件中的静音

> ID：13477879
> 
> 赞同：2
> 
> 时间：2012-11-20T16:41:58.800
> 
> 标签：ios

我想知道是否有任何示例显示如何检测音频文件中的静音。

我想实现的是用WAV等格式录制音频，并检查是否录制了真实的声音或只是静音。

任何线索表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T02:33:28.523

如果您从 WAV 中读取样本，您可以将它们的绝对值相加，以了解文件中表示的总幅度。较低的值将表示较低的幅度。您可能必须根据您的具体问题校准此计算。

在 OS X 或 iOS 中，您可以使用扩展音频文件服务来获取样本。我在[https://gist.github.com/d108/1ea9c833b10e714defef29824362821a](https://gist.github.com/d108/1ea9c833b10e714defef29824362821a)上发布了一些示例代码来帮助您。

# vba - VBA for Access，运行时错误 451：未定义属性让过程和属性获取过程未返回对象

> ID：13477881
> 
> 赞同：3
> 
> 时间：2012-11-20T16:42:04.410
> 
> 标签：vba, ms-access

所以我有一个对象的私有变量，它是一个数组：o_exception，声明为：

```
Private o_exception() as string 
```

我可以在初始化它的值时对其进行全面测试：下限、上限、值，一切正常。

然后我试图定义一个 let 属性，以便能够从对象外部访问数组的值：

```
Property Get exception()
On Error GoTo ERREUR
exception = o_exception
On Error GoTo 0
End Property 
```

我仍然完全能够将我的财产识别为一个数组：

```
lbound(myObject.exception) is available
ubound(myObject.exception) is available
isArray(myObject.exception) returns a yes 
```

但

```
myObject.exception(0) 
```

给我以下错误：

```
run-time error 451: Property let procedure not defined and property get procedure did not return an object 
```

我没有 let，因为我不需要它，而且我有非常相似的代码在其他对象上以相同的结构运行。我现在唯一的线索是，由于 myObject 被定义为另一个对象（集合）的成员，我必须通过键入来访问它：

```
myCollection.myObject.exception(0) 
```

顺便说一句，用公共函数替换 Property Get 会产生同样的错误......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T03:13:21.043

几点说明：

*   无法使用您提供的信息复制您的问题，访问由`Property Get`应该工作返回的数组（下面的代码工作正常）。
    但是，错误消息表明解释器正在将您的代码视为作业，因此上下文可能很重要，您的问题中肯定缺少某些内容。

*   数组的行为可能不像您希望的那样，因为[它们是在 assignment 复制的](http://msdn.microsoft.com/en-us/library/ee157009%28prot.20%29.aspx)，因此每次您引用该属性时，都会返回内部数组`myObject.exception`的副本。 您实际上可以通过尝试更改数组的内容并意识到它实际上根本没有改变来看到这一点：`o_exception`

```
'---------------------------------
' Class1 code '
'---------------------------------
Private o_exception() As String

Property Get exception()
    exception = o_exception
End Property

Private Sub class_initialize()
    ReDim Preserve o_exception(10)
    o_exception(0) = "qwerty"
    o_exception(1) = "azerty"
End Sub    

'---------------------------------
' Test module '
'---------------------------------
Public Sub test()
    Dim a As Class1
    Set a = New Class1

    Debug.Print TypeName(a.exception)

    Debug.Print LBound(a.exception)
    Debug.Print UBound(a.exception)
    Debug.Print IsArray(a.exception)

    Debug.Print a.exception(0)
    a.exception(0) = "asdfg"
    Debug.Print a.exception(0)

    Dim s() As String
    s = a.exception()

    ' Print the memory address of the first string in each array '
    ' We could expect it to be the same, but they are not '
    Debug.Print StrPtr(s(0))
    Debug.Print StrPtr(a.exception(0))

    ' just to prove the point '
    s(0) = "ZZZZZZZZ"
    Debug.Print s(0)
    Debug.Print a.exception(0)

End Sub 
```

调用`test`将打印：

```
Class1
String()
0
10
True
qwerty
qwerty    => Should be 123456!
296094084 
296093004 => Expected to be the same address  as above, it's not!
ZZZZZZZZ
qwerty    => Should be ZZZZZZZZ! 
```

要解决该问题，您可以使用`Collection`或构造您的类来返回单个对象，而不是公开数组本身，例如：

```
' Just use myObject.exception(0) as one would expect '
Property Get exception(index As Long) As String
    exception = o_exception(index)
End Property 
```

* * *

顺便说一句，由于您的代码看起来像是在处理错误管理，我衷心建议您看看[vbWatchdog](http://www.everythingaccess.com/vbwatchdog.htm)。它非常非常适合以全局方式管理 Access 中的错误（不附属于该产品，只是一个快乐的用户）。

# ios - 了解 Cocos2d 中的 CCBatchNode

> ID：13477884
> 
> 赞同：4
> 
> 时间：2012-11-20T16:42:19.503
> 
> 标签：ios, optimization, cocos2d-iphone, sprite, ccspritebatchnode

我听说在 Cocos2d 中使用 CCBatchNode 性能更好。我很难理解它是如何工作的。我有几个 CCSprite 的子类，它们代表我游戏中的对象。到目前为止，我使用该`spriteWithFile:`方法初始化它们。

我现在有一个包含我所有精灵的精灵表（连同它的 plist 文件）。我应该如何使用它才能受益于“单个 openGL 绘图调用”？

如果我通过在 CCBatchNode 中取回一个帧来初始化我的精灵，它会起作用吗？

无论如何，我对CCBatchNode的理解很糟糕，一些帮助会很棒！

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T18:27:56.793

这是一个使用 CCSpriteFrameCache 和 CCSpriteBatchNode 的快速示例。

首先设置共享帧缓存（将其视为单个图像的名称与其组合批处理节点图像中的矩形帧之间的映射）：

```
[[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"spritesheet.plist" textureFile:@"spritesheet.png"]; 
```

现在使用组合图像名称创建批处理节点（此 batchNode 为多个精灵进行单次绘制）：

```
CCSpriteBatchNode *batchNode = [CCSpriteBatchNode batchNodeWithFile:@"spritesheet.png" capacity:20]; 
```

现在创建传入单个图像名称的精灵节点。将其添加到批处理节点。（同样，batchnode 将执行绘制调用，因此这是性能优势所在）：

```
CCSprite *sprite = [CCSprite spriteWithSpriteFrameName:@"name_of_your_sprite_in_plist"];
[batchNode addChild:sprite]; 
```

您可以将 sprite 视为之前直接从单个图像创建的 sprite（但具有使用批处理节点的性能优势）。

# http-headers - 用于限制 Google Search Appliance bot (gsa) 的 HTTP 响应代码

> ID：13477889
> 
> 赞同：3
> 
> 时间：2012-11-20T16:42:37.253
> 
> 标签：http-headers, web-crawler, google-search-appliance, throttling, http-response-codes

应该使用什么 HTTP 响应代码来限制行为不端的网络爬虫：

*   [403 禁止](http://en.wikipedia.org/wiki/HTTP_403)
*   [503服务不可用](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes#5xx_Server_Error)

是否应该在标题或正文中返回任何解释？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T17:10:23.480

实际上，推荐的（[RFC6585](https://www.rfc-editor.org/rfc/rfc6585)）http 状态是[429 Too Many Requests](https://www.rfc-editor.org/rfc/rfc6585#page-3)。例如，它用于[Twitter REST API Rate Limiter](https://dev.twitter.com/docs/rate-limiting/1.1)。

但是，如果您向 GSA[充斥 requests](https://support.google.com/gsa/bin/answer.py?hl=en&answer=2686272)，GSA 将在内部[返回 503 Service Unavailable](https://developers.google.com/search-appliance/documentation/60/troubleshooting/Designing_Search_Solution#Queueing)，因此 IMO 可以安全地假设它也期望外部站点以相同的方式运行。

我在节流解决方案中选择了[503 Service Unavailable](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes#5xx_Server_Error)。

# frame - jscrollpane拖到外框

> ID：13477892
> 
> 赞同：1
> 
> 时间：2012-11-20T16:42:50.413
> 
> 标签：frame, jscrollpane

我用 Jscrollpane 替换了普通滚动条（参见[http://jscrollpane.kelvinluck.com](http://jscrollpane.kelvinluck.com)）。非常好。但我使用的是有两个框架的屏幕。当我在左框架中拖动滚动条并意外离开此框架（鼠标进入右框架）时，拖动停止。这对用户非常不友好（用户需要留在框架边框的左侧），并且不会发生在普通滚动条上。任何人都知道如何能够在进入另一个框架时继续拖动 Jscrollpane？

# javascript - 如何从 PHP 服务器动态加载 PDF？

> ID：13477896
> 
> 赞同：1
> 
> 时间：2012-11-20T16:43:15.763
> 
> 标签：javascript, jquery, pdf, tcpdf

我正在使用 TCPDF 制作 PDF 报告。在客户端是一个 JavaScript/jQuery 应用程序。在服务器端是“some.php”，我们正在发送一些用于过滤数据库查询的参数。

是否可以使用：

```
$.ajax or $.post(url,{...},function(data) { //open new window with PDF result} 
```

TCPDF 中的最后一个命令是：

```
$pdf->output('doc.pdf','I'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T18:12:51.490

您无法使用 javascript 呈现 pdf。

我有两种方法可以做到：

1.  不要使用 ajax，只需将带有值的表单发送到将打开 pdf 的新窗口。不要忘记发送正确的内容类型标题应用程序/pdf。

    ```
    <form action="some.php" method="post" target="_blank">
    ...
    </form>

    ```

2.  将所有带有 ajax 查询的表单值发送到 some.php，some.php 将生成 pdf，将其保存到磁盘并返回生成的 pdf 文件的链接。然后在 ajax onSuccess 上，您将调用该链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T18:17:09.300

Mozilla 最近提出了[pdf.js](http://mozilla.github.com/pdf.js/)，一个用于读取 PDF 文件的 JavaScript 库。

虽然不完全是您正在搜索的内容，但您可以从包含的源中获取最小化和自定义版本。

# sql-server - 联接返回与两个联接表的一对多关系的一行

> ID：13477900
> 
> 赞同：0
> 
> 时间：2012-11-20T16:43:30.253
> 
> 标签：sql-server

*   表`TRANS`包含事务信息 ( `transaction_id, date, foo, bar`)
*   表`ELEM`包含事务的元素 ( `transaction_id, detail_id`)
*   表`DET`包含元素的详细信息 ( `detail_id, size, weight, category`)

询问：

```
select * from TRANS t 
join ELEM e on (t.transaction_id = e.transaction_id)
join DET d on (e.detail_id = d.detail_id) 
```

但是，可能具有与其关联`TRANS`的多个行之一。`ELEM/DET`因此，如果我有 100 行`TRANS`并运行查询，我将返回 > 100 行，这是不需要的。

但是，我确实想知道有多少`DET`行具有`d.category=1`，但是如果我加入该条件，我会得到 < 100 行（只有具有该条件的行。

我想要蛋糕，也想吃。我想检索`TRANS`一个日期范围内的所有行，并让我得到结果其中的行数`d.category=1`。如果`d.category != 1`那时我不在乎那里有什么，只要该`TRANS`行仍然返回即可。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T17:28:33.263

避免链接 LEFT JOIN。您最终可能会得到意外的数据。

注意：我的意思是，如果您有：

```
SELECT *
FROM a
LEFT JOIN b 
    ON a = b
LEFT JOIN c
    ON b = c 
```

并且 bc 是严格的 1:1，考虑这样写：

```
SELECT *
FROM a
LEFT JOIN
(
    SELECT *
    FROM b
    JOIN c
        ON b = c
) d
    ON a = d 
```

所以，你最终会得到类似的*东西*：

```
SELECT *
FROM TRANS t
LEFT JOIN
(
    SELECT *  -- DON"T USE *, this will fail ^1
    FROM ELEM e
    JOIN DET d
         ON e.detail_id = d.detail_id
) a
    ON t.transaction_id = a.transaction_id 
```

^1 - 您不能在子查询中选择多个具有相同名称的列。明确，永远！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T16:52:35.290

你在寻找这样的东西吗？

```
SELECT COUNT(1) AS TRANSCOUNT, SUM(CASE WHEN d.category=1 THEN 1 ELSE 0 END) AS CAT1COUNT
FROM TRANS t 
join ELEM e on (t.transaction_id = e.transaction_id)
join DET d on (e.detail_id = d.detail_id) 
```

当 d.category 为 1 时，case 语句将只计算行数（完整连接结果中的每一行为 1）。

好的，我错过了您帖子顶部的表格说明。你可能想要

```
select count(distinct detail_id) 
```

或者

```
select count(distinct transaction_id) 
```

也在那里；我不完全确定你要的是哪一个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T20:01:32.650

这并不完全清楚，但我认为你想先加入`ELEM`and`DET`表（有`category=1`限制），然后`LEFT JOIN`将`TRANS`表加入到前面的构造中（括号根本不需要，它们是为了清楚优先级而添加的）：

```
select t.*, d.* 
from 
        TRANS t 
    left join 
        (     ELEM e 
          join 
              DET d 
            on  d.detail_id = e.detail_id
            and d.category = 1
        ) 
      on  t.transaction_id = e.transaction_id 
where
    ( d.date range_condition ) ; 
```

# hadoop - reducer 只是不会在 hadoop 流中启动

> ID：13477903
> 
> 赞同：0
> 
> 时间：2012-11-20T16:43:49.990
> 
> 标签：hadoop, hadoop-streaming

我不确定发生了什么，但我写了一个简单的映射器和减速器脚本。

我正在针对一个小数据集（比如几行长）对其进行测试。

由于某种原因，reducer 只是没有启动.. 并且 mapper 一次又一次地执行？

```
12/11/20 09:21:18 INFO streaming.StreamJob:  map 0%  reduce 0%
12/11/20 09:22:05 INFO streaming.StreamJob:  map 50%  reduce 0%
12/11/20 09:22:10 INFO streaming.StreamJob:  map 100%  reduce 0%
12/11/20 09:32:05 INFO streaming.StreamJob:  map 50%  reduce 0%
12/11/20 09:32:11 INFO streaming.StreamJob:  map 0%  reduce 0%
12/11/20 09:32:20 INFO streaming.StreamJob:  map 50%  reduce 0%
12/11/20 09:32:31 INFO streaming.StreamJob:  map 100%  reduce 0%
12/11/20 09:42:20 INFO streaming.StreamJob:  map 50%  reduce 0%
12/11/20 09:42:31 INFO streaming.StreamJob:  map 0%  reduce 0%
12/11/20 09:42:32 INFO streaming.StreamJob:  map 50%  reduce 0%
12/11/20 09:42:50 INFO streaming.StreamJob:  map 100%  reduce 0% 
```

如果您也想要代码，请告诉我。关于我哪里出错的任何线索？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T17:01:58.913

好的。我的错..

错误出现在我的shebang中，我刚刚有

```
#!/usr/bin/env 
```

代替

```
 #!/usr/bin/env  python 
```

那成功了:)

虽然如果我从shebang中跳过python会很想知道为什么mapper一次又一次地运行..

# java - 为什么我正在写入的文件正常时在屏幕上显示此输出？

> ID：13477904
> 
> 赞同：0
> 
> 时间：2012-11-20T16:43:54.113
> 
> 标签：java, io

示例代码是： -

```
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;

public class CopyBytes {

    public static void main(String [] args){
    CopyBytes obj = new CopyBytes();
    File file = new File("/home/mount/Data/JAVA/xanadu.bak");
    obj.copyBytes(file);
    }

    public void copyBytes(File ifile){
    FileInputStream reader = null;
    FileOutputStream output =null;
    int c=0;
    try{
    reader = new FileInputStream(ifile);
    output = new FileOutputStream("outfile");
    while((c = reader.read()) != -1)
    {
        System.out.print(c);
        output.write(c);
    }   
        System.out.println();
    }
    catch(FileNotFoundException fnfex){
    fnfex.getMessage();
    fnfex.printStackTrace();
    }
    catch(IOException ioex){
    ioex.getMessage();
    ioex.printStackTrace();
    }
    finally{
    if(reader !=null)
    {
        System.out.println("Closing the Stream");
        try{
        reader.close();
        System.out.println("Closed the Streams");
        }
        catch(IOException ioex)
        {
            ioex.printStackTrace();
        }
    }
    else{
    System.out.println("Stream not open");
    }
}
}
} 
```

内容`xanadu.bak`如下：-

```
buffer@ankit:/home/mount/Data/JAVA/practice/src/fileio.bytestreams.com$ cat /home/mount/Data/JAVA/xanadu.bak
IA 
```

当上面的代码运行时；它给出以下输出：

buffer@ankit:/home/mount/Data/JAVA/practice/src/fileio.bytestreams.com$ java CopyBytes

```
736510
Closing the Stream
Closed the Streams 
```

而我应该得到

```
7365
Closing the Stream
Closed the Streams 
```

我正在写入的文件非常好。请提供您宝贵的意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:03:44.180

打印的最后一个字符是`10`[d]或`0x0A`. 那是换行符。其他类似 `0x0D 0x0A`或相反的组合可能发生在其他平台上。

如果没有，许多编辑器会在文件末尾添加换行符，这就是您所看到的。

使用类似的东西`hexdump`来确定您的文件*真正*包含的内容。
[你的代码也很好用:-)]

# java - 在 Android 中使用 Sip Api 的质量很差

> ID：13477908
> 
> 赞同：0
> 
> 时间：2012-11-20T16:44:08.757
> 
> 标签：java, android, sip

所以我在两部手机 Galaxy s2 i9100G 和 Xperia Arc S 上测试了 SipDemo，Galaxy s 2 运行 Jelly Bean 和 Arc S ICS 4.0，一切正常，但质量和音量非常差，我听不到用户的声音很多噪音，源代码与 SipDemo 相同，是编解码器问题还是有任何解决方案？,

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T18:26:42.240

user1839514 您可能需要验证正在协商（在 SDP 中）和使用哪个编解码器，并提供有关连接的更多详细信息。（Wifi vs 3g）如果可能，检查设备资源利用率以隔离：1）编解码器问题（高质量编解码器导致高带宽）2）连接问题（网络、丢包、高抖动、延迟）3）资源利用率（CPU、内存, 输入/输出)

# javascript - 如何在jquery中引入回调函数来返回AJAX数据？

> ID：13477914
> 
> 赞同：1
> 
> 时间：2012-11-20T16:44:24.410
> 
> 标签：javascript, jquery, ajax, callback

我正在尝试从函数crimeTrendTable 中返回一些数据，该函数使用jquery .ajax 从Web 中提取一些数据，并将其返回到一个名为postcodeConvert 的函数中。

我想我需要实现一个回调函数以确保它只在返回数据后才返回信息，但我对如何做到这一点有点困惑？任何人都可以帮忙吗？

```
$(document).ready(function()
{
function crimeTrendTable(latitude, longitude){
    //Find all available dates
    availability_url = "http://policeapi2.rkh.co.uk/api/crimes-street-dates";
    listings = $.ajax({

        dataType: 'jsonp',
        url: availability_url, 
        success: function(data){
            latest = data[0]['date'];
            three_months_date = data[3]['date'];
            six_months_date = data[6]['date'];
            year_ago_date = data[12]['date'];
            list_dates = [latest, three_months_date, six_months_date, year_ago_date];
        },
        error: function(jqXHR, textStatus, errorThrown){ 
            $('#results').html('<h2>Something went wrong!</h2><p><b>' + textStatus  + '</b> ' + errorThrown  + '</p>');
        }
    })

} 
function postcodeConvert(entry){

    //Convert to upper case
    entry = entry.toUpperCase().replace(" ", "");
    base_url = "http://mapit.mysociety.org/postcode/";
    query_url = base_url+entry;
    console.log(query_url);
    $.getJSON(query_url, function(data){
        $('div#results').html("<p>Latitude: "+data['wgs84_lat']+"</p><p>Longitude: "+data['wgs84_lon'])+"</p>";
        data_results = "";
        data_results = crimeTrendTable(data['wgs84_lat'], data['wgs84_lon']);
        console.log("postcode"+data_results);
        return data_results;
    })

}    

$('#postcode').focus(); //ensure the place field is the first box highlighted
      //Disable the submit button from sending anything as we don't need to...
$('#form_submit').submit(function(){
  return false;
});//end submit function
$(':submit').click(function(){
    //function convert text box postcode into lat long
 if ($('#postcode').val() !=''){
    entry = $('#postcode').val();
    postcodeConvert(entry);           
 }  
}); 
```

});

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T16:51:21.620

当从服务器返回数据时将运行此方法/函数（http状态为200）

```
function(data){
        latest = data[0]['date'];
        three_months_date = data[3]['date'];
        six_months_date = data[6]['date'];
        year_ago_date = data[12]['date'];
        list_dates = [latest, three_months_date, six_months_date, year_ago_date];
    } 
```

如果您在该函数内添加对该方法的调用，它将在您拥有数据时运行。否则，您可以在“成功：”中写一个方法名称，如果您更容易拥有一个单独的功能，例如：

```
function callback(data) {
  // do something with data
}

$.ajax({

    dataType: 'jsonp',
    url: availability_url, 
    success: callback,
    error: function(jqXHR, textStatus, errorThrown){ 
        $('#results').html('<h2>Something went wrong!</h2><p><b>' + textStatus  + '</b> ' + errorThrown  + '</p>');
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T16:52:18.507

你是对的，你需要一个回调来从`postcodeConvert`函数中获取数据结果。

你现在的回报

```
return data_results; 
```

真的什么都不会。如果您修改`postcodeConvert`函数定义以使其接受回调参数

```
function postcodeConvert(entry, callback) { 
```

并将您的 return 语句更改为回调调用

```
callback(data_results) 
```

然后你可以`postcodeConvert`这样调用你的函数：

```
postcodeConvert(entry, function(data_results) {
// use data_results
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T16:59:25.353

如果您返回 ajax XHR 对象，您可以使用内置`done()`回调来确保数据可用：

```
$(document).ready(function() {
function crimeTrendTable(latitude, longitude){
    return $.ajax({
        dataType: 'jsonp',
        url: availability_url, 
        error: function(jqXHR, textStatus, errorThrown){ 
            //error function does'nt work with JSONP, remove this
        }
    }):
}

function postcodeConvert(entry){
    /* more stuff here */
    return $.getJSON(query_url, function(data){
        $('div#results').html("<p>Latitude: "+data['wgs84_lat']+"</p><p>Longitude: "+data['wgs84_lon'])+"</p>";
        return crimeTrendTable(data['wgs84_lat'], data['wgs84_lon']);
    }):
}    

$('input[type="submit"]').click(function(e){
    e.preventDefault();
    if ($('#postcode').val() !=''){
       entry = $('#postcode').val();
       postcodeConvert(entry).done(function(data) {
          //data is now avaiable here
          latest = data[0]['date'];
          three_months_date = data[3]['date'];
          six_months_date = data[6]['date'];
       });
    }  
}); 
```

请注意，您的代码中有一些错误，例如所有变量都是全局的？

# apache - 301重定向论坛和所有帖子到主页

> ID：13477920
> 
> 赞同：1
> 
> 时间：2012-11-20T16:44:34.397
> 
> 标签：apache, .htaccess, redirect, http-status-code-301

我正在尝试将我的 /forum/ 页面和所有后续论坛帖子（例如 /forum/topic/3335/）重定向到 myhomepage.com。

我已经尝试了我在 SO 上看到的所有可能的方法，但他们都不会这样做并完全剥离查询字符串。

将所有这些帖子 301 发送到我的主页并完全去除查询字符串（包括我不想要的尾随 ? ）的最佳方法是什么。

谢谢！

编辑：

```
redirectMatch 301 ^/forum/ http://www.newsite.com/? 
```

这将它们全部重定向到我的主页，但保留了我不想要的？

```
RewriteEngine on RewriteRule ^/forum/(.*) http://www.newsite.com/? [L,R=301] 
```

这根本行不通。它没有重定向任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:47:48.883

一种快速的方法是[`RedirectMatch`](http://httpd.apache.org/docs/2.2/mod/mod_alias.html#redirectmatch)：

```
RedirectMatch 301 ^/forum/.*$ http://myhomepage.com 
```

**注意：**如果*论坛*在*myhomepage.com*下，则不需要使用完整域，只需使用`/`.

### 更新

要删除查询字符串，您需要使用[mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)：

```
RewriteEngine On
RewriteBase /
RewriteRule ^/forum/.*$ http://myhomepage.com [L,R=301] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T16:46:16.480

使用 .htaccess 可能，如果我们在想同样的事情！

# python - 将“类型”的返回作为人类可读的字符串

> ID：13477924
> 
> 赞同：8
> 
> 时间：2012-11-20T16:44:42.517
> 
> 标签：python

如何将变量部分`type`作为字符串获取？

IE：

```
>>> type('abc')
<type 'str'>
>>> type(1)
<type 'int'>
>>> type(_)
<type 'type'> 
```

在此处的每种情况下，我都想要单引号内的内容：str，int，类型为字符串。

我尝试使用正则表达式来对抗`repr(type(1))`并且有效，但这似乎并不健壮或 Pythonic。有没有更好的办法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-20T16:46:12.597

您可以通过`type(1).__name__`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T16:46:11.943

使用对象的`__name__`属性`type`：

```
In [13]: type('abc').__name__
Out[13]: 'str'

In [14]: type(1).__name__
Out[14]: 'int' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-20T16:47:38.593

怎么样`... .__class__.__name__`？

```
>>> 'abc'.__class__.__name__
'str'
>>> a = 123
>>> a.__class__.__name__
'int' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-20T16:47:35.433

使用`__name__`属性：

```
>>> type('abc').__name__
'str' 
```

# vb.net - 如何跳过 DataGridViewRow？

> ID：13477926
> 
> 赞同：-1
> 
> 时间：2012-11-20T16:44:54.670
> 
> 标签：vb.net

我正在遍历 DataGridView 中的行，如下所示：

```
For Each orow As DataGridViewRow In GV_NS.Rows
    If orow.Cells(0).Value.Length = 0 Then
        //Skip this row and go to next row
    Else
        //do this
    End If
Next 
```

如果第一列为空，我希望能够跳到下一行。我尝试只使用`Next`in `If orow.Cells(0).Value.Length = 0`，但它抛出了语法错误`If must end with matching End If`。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:55:19.027

要跳到、 或循环的下一次迭代，`For`请像这样使用：`Do``While``Continue`

```
For Each orow As DataGridViewRow In GV_NS.Rows
    If orow.Cells(0).Value.Length = 0 Then
        //Skip this row and go to next row
        Continue For
    Else
        //do this
    End If
Next 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T17:06:47.190

您也可以只反转您的测试。

```
For Each orow As DataGridViewRow In GV_NS.Rows
    If orow.Cells(0).Value.Length <> 0 Then
        //do this
    End If
Next 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T06:01:27.623

```
 'Filter rows with LINQ
    Dim Query = From row In GV_NS.Rows
        Where CType(row, DataGridViewRow).Cells(0).Value.ToString.Length > 0
        Select row
    For Each Row As DataGridViewRow In CType(Query.ToArray, DataGridViewRow())
        'Do something
    Next 
```

# ruby-on-rails - Rails 错误：找不到数据库客户端：sqlite3

> ID：13477935
> 
> 赞同：4
> 
> 时间：2012-11-20T16:45:14.253
> 
> 标签：ruby-on-rails, sqlite, console

我在开发环境中使用 Rails。我正在尝试通过命令行运行简单的 INSERT 命令，但我似乎无法连接到 SQLite 数据库。其他与数据库相关的命令工作正常（例如`rake db:migrate`）。我正在使用以下命令：

```
rails dbconsole 
```

但我收到以下错误：

```
Couldn't find database client: sqlite3\. Check your $PATH and try again. 
```

我仍在学习 Rails，我希望你们那里的 Rails 专家能够发现这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T17:10:45.730

您的计算机上未安装 Sqlite3，请转到[sqlite 站点](http://www.sqlite.org/)并根据您使用的任何操作系统安装命令行实用程序。

# jquery - 在 phonegap 应用程序中动态更新/下载资源文件

> ID：13477936
> 
> 赞同：2
> 
> 时间：2012-11-20T16:45:15.517
> 
> 标签：jquery, html, cordova, jquery-mobile

我们正在使用 phonegap、jquery、Django 和 mongodb 开发员工敬业度平台。管理模块具有创建表单的功能（一个表单创建模块；在[php forms](http://www.phpform.org/)行中的东西）。这些表格随后将被其他用户用于各种目的。我可以在创建表单时创建 html 内容并将其存储在数据库中，然后在需要时访问它。这显然是一种较慢的方法，其中整个表单（即 html 内容）来自服务器通过网络。

我们是否有任何替代方法，例如，当应用程序启动时，它将所有表单下载到您的手机中，从而提高访问表单时的速度，因为它现在来自设备本身。Phonegap[文件系统 API](http://docs.phonegap.com/en/1.0.0/phonegap_file_file.md.html)会有帮助吗？有没有其他方法可以实现这一目标？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T21:54:54.823

在应用程序启动时运行 ajax 请求以下载任何尚未下载的表单非常简单，文件系统 api 是存储它们的合适方式。我使用了一个自定义下载器插件，它可以本地处理下载和存储，但那是因为我的下载量超过 100MB - 首先使用常规 xhr 下载到浏览器中对于典型的 Web 表单来说应该没问题。

www 目录是只读的，因此您无法将它们保存在那里，但您可以从应用程序中的任何文件夹加载页面 - 只要您注意表单中的任何绝对 url，两者之间应该没有任何区别下载的表格和与应用程序捆绑的表格。

# sql - 无法得到准确的小数百分比结果？

> ID：13477941
> 
> 赞同：1
> 
> 时间：2012-11-20T16:45:44.380
> 
> 标签：sql, sql-server, stored-procedures, casting, sql-server-2012

我创建了以下存储过程来计算百分比，它工作正常，但我总是无法得到确切的结果

例如`98.000`，而不是`98.947`

* * *

```
CREATE PROCEDURE sp_finger_calc_percent
AS
DECLARE  @no_action decimal(18,4);
DECLARE  @yes_action decimal(18,4);

 SELECT   @no_action = COUNT(*)
FROM         Action INNER JOIN
                      Employee ON Action.b_num = Employee.b_num INNER JOIN
                      Department ON Employee.dep_id = Department.dep_id
WHERE     (Department.dep_id = 50) AND (Action.action = 0);

SELECT   @yes_action= COUNT(*)
FROM       Action INNER JOIN
                      Employee ON Action.b_num = Employee.b_num INNER JOIN
                      Department ON Employee.dep_id = Department.dep_id
WHERE     (Department.dep_id = 50) AND (Action.action = 1);

If(@no_action = 0.00)
 return 100.00
Else return cast( (100.00  *(@yes_action  /@no_action ) )as decimal(18,4)) 
;

DECLARE  @return_status decimal(18,4);
EXEC @return_status = sp_finger_calc_percent
select @return_status; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T17:04:28.777

**[SQL Server 中的过程只能返回 INTeger 类型](http://msdn.microsoft.com/en-us/library/ms174998.aspx)**。我相信，您需要一个实值函数来执行此操作（或者，更好的是，正如其他人指出的那样，您的过程需要一个十进制 OUTPUT 参数）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T17:12:18.380

另一种可能性是使用 out 参数

```
Alter PROCEDURE sp_finger_calc_percent(@return_status decimal(18,4) out)
AS
DECLARE  @no_action decimal(18,4);
DECLARE  @yes_action decimal(18,4);

SELECT   @no_action = COUNT(*)
FROM         Action INNER JOIN
                      Employee ON Action.b_num = Employee.b_num INNER JOIN
                      Department ON Employee.dep_id = Department.dep_id
WHERE     (Department.dep_id = 50) AND (Action.action = 0);

SELECT   @yes_action= COUNT(*)
FROM       Action INNER JOIN
                      Employee ON Action.b_num = Employee.b_num INNER JOIN
                      Department ON Employee.dep_id = Department.dep_id
WHERE     (Department.dep_id = 50) AND (Action.action = 1);

If(@no_action = 0.00)
 select @return_status= 100.00
Else select @return_status = cast( (100.00  *(@yes_action  /@no_action ) )as decimal(18,4)) 
; 
```

称呼

```
DECLARE  @return_status decimal(18,4);
EXEC  sp_finger_calc_percent @return_status out
select @return_status; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T17:12:44.650

更改为输出参数（如 Alex K 所述）：

```
CREATE PROCEDURE sp_finger_calc_percent
    @RETURNVALUE DECIMAL(18,4) OUTPUT
AS
...
If(@no_action = 0.00)
 SET @RETURNVALUE = 100.00
Else SET @RETURNVALUE = cast( (100.00  *(@yes_action  /@no_action ) )as decimal(18,4)) 
; 
```

# python - python字符串数组排序

> ID：13477942
> 
> 赞同：0
> 
> 时间：2012-11-20T16:45:48.760
> 
> 标签：python, list, sorting

我想使用 python 对字符串数组进行排序。

我有一个字符串数组

```
str_array = {string1, string2, string3}
all string formats are AB-CD-EFGH-IJ-NAME ------> 12-34-5678-09-PHOTO

AB= 00 to 99
CD= 00 to 99
EFGH= 0000 to 9999
IJ= 00 to 99
NAME= any alphabetic name 
```

我想先用等效的数值对字符串进行排序（从字符串的数字部分删除“-”），然后按字母顺序。

例如，12-34-5678-09-PHOTO 将是 1234568809-PHOTO。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:53:04.483

我不完全理解你的问题，但看看这是否有帮助：

```
def myCmp(s1, s2):
    s1 = s1.replace('-', '', 3)
    s2 = s2.replace('-', '', 3)
    int1, _, name1 = s1.partition('-')[0]
    int2, _, name2 = s2.partition('-')[0]
    if int1 < int2:
        return -1
    elif int1 > int2:
        return 1
    elif name1 < name2:
        return -1
    elif name1 > name 2:
        return 1
    else:
        return 0

str_array.sort(cmp=myCmp) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T16:51:59.090

呃，这是怎么排序的？

任何状况之下。

```
"".join(yourstring.split('-')) 
```

是删除破折号的规范方法。您可以通过指定最大拆分数来保留最后一个。

```
"".join(test.split('-', 3)) 
```

如果您想按字母部分排序，除非您使用将字母部分存储在元组中并按该键排序，否则它不会直观地工作：

```
temp = test.split('-')
numbers, alpha = "".join(temp[:-1]), temp[-1] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T17:01:04.520

定义一个 key 函数，它将 iterable 的元素`str_array`作为输入，并返回一个由整数（第一个）和名称（第二个）组成的元组键：

```
def mykey(text):
    numtxt, name = text.rsplit('-',1)
    numtxt = int(numtxt.replace('-',''))
    return (numtxt, name)

new_str = sorted(str_array, key = mykey) 
```

例如，

```
In [30]: sorted(['12-34-5678-09-PHOTO', '12-34-5678-09-MOTOR', '12-04-5678-09-PHOTO', ], key = mykey)
Out[30]: ['12-04-5678-09-PHOTO', '12-34-5678-09-MOTOR', '12-34-5678-09-PHOTO'] 
```

有关此排序技术的更多信息，请参阅[HOWTO Sort wiki](http://wiki.python.org/moin/HowTo/Sorting/)。

* * *

请注意，`sorted`返回一个新列表。如果您想`str_array`就地排序，请使用

```
str_array.sort(key = mykey) 
```

# excel - 用于在工作表之间选择和复制的 VB Excel 2010 代码

> ID：13477944
> 
> 赞同：0
> 
> 时间：2012-11-20T16:45:52.987
> 
> 标签：excel, vba

我还在学习VB。我尝试在 excel 2010 中记录一个 VB 脚本，该脚本在主工作表上选择一个名称，然后转到另一个工作表并找到具有该名称的所有行，复制所有行并返回到主工作表并将复制的单元格插入选定的下方姓名。细胞被向下推。代码应重复复制单元格粘贴位置下方的下一个名称。

我的录音未能做到以上所有。你有什么建议吗？

```
 Sub Macro5()
'
' Macro5 Macro
'
' Keyboard Shortcut: Ctrl+l
'
    Selection.Copy
    Sheets("Sheet1").Select
    ActiveCell.Offset(2, 3).Range("A1").Select
    Cells.Find(What:="Leeanne Hickmott", After:=ActiveCell, LookIn:= _
        xlFormulas, LookAt:=xlPart, SearchOrder:=xlByRows, SearchDirection:= _
        xlNext, MatchCase:=False, SearchFormat:=False).Activate
    Cells.FindNext(After:=ActiveCell).Activate
    ActiveCell.Rows("1:3").EntireRow.Select
    ActiveCell.Offset(0, -7).Range("A1").Activate
    Application.CutCopyMode = False
    Selection.Copy
    Sheets("Sheet4").Select
    ActiveCell.Offset(1, 0).Rows("1:1").EntireRow.Select
    Selection.Insert Shift:=xlDown
    ActiveCell.Offset(3, 6).Range("A1").Select
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T02:28:16.823

Excel 的记录宏过程无法记录使这种宏工作所需的条件或循环。它也不能记录您将值粘贴到查找对话框中，它只记录您要搜索“Leeanne Hickmott”

我的第一个建议是使用范围变量来指向每个工作表上的重要单元格。例如...

```
Dim rngPasteHere as Range, rngCopyFrom as Range
set rngPasteHere = Selection
set rngCopyFrom = Sheets("Sheet1").Range("D1")
' find first row
set rngCopyFrom = rngCopyFrom.Cells.Find(What:=rngPasteHere.Value _
                             , After:=rngCopyFrom, LookIn:=xlFormulas _
                             , LookAt:=xlPart, SearchOrder:=xlByRows _
                             , SearchDirection:=xlNext, MatchCase:=False _
                             , SearchFormat:=False) 
```

您还需要两个循环，一个为下一个名称重复整个过程的外循环和一个查找具有当前名称的所有行的内循环。如果不知道您的数据是什么样的，我真的无法比这更具体。

1.  名称是否按字母顺序排列？
2.  所有具有相同名称的行是否彼此相邻，或者它们是否与其他名称混合在一起？
3.  每个名字只有几行还是几千行？

# mysql - 我怎样才能在此阅读多于一栏

> ID：13477948
> 
> 赞同：1
> 
> 时间：2012-11-20T16:46:03.153
> 
> 标签：mysql

在 1_products t2 我还有其他名为 make,model 的列

当我添加它们时

```
(SELECT 
            t2.code,t2.make,t2.model
        FROM ..... 
```

我明白了

> 错误 1241 操作数应包含 1 列

```
SELECT 
    t1.fk_products_id,
    (SELECT 
            t2.code
        FROM
            1_products t2
        WHERE
            t2.id = t1.fk_products_id
        order by code
        limit 1)
FROM
    1_stock t1
WHERE
    t1.branch = 1 and t1.dispatch <> 0; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T16:51:08.687

在内联查询中不能返回多于一列。如果要为每列返回多于一列，`t1.fk_products_id`则必须重写类似于以下的查询：

```
SELECT t1.fk_products_id,
  t2.code,
  t2.make,
  t2.model
FROM 1_stock t1
LEFT JOIN 1_products t2
  on t1.fk_products_id = t2.id
WHERE t1.branch = 1 
  and t1.dispatch <> 0; 
```

# vb.net - 在 Visual Basic 中如何创建块注释

> ID：13477958
> 
> 赞同：57
> 
> 时间：2012-11-20T16:46:19.133
> 
> 标签：vb.net

> **可能重复：**
> [注释 VB 代码](https://stackoverflow.com/questions/1068395/commenting-vb-code)

有人知道如何在 Visual Basic 中进行块注释吗？

注意：我在这里做了一些搜索，这些结果和“可能已经有你的答案的问题”的结果似乎都没有提出这个问题

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-11-20T16:48:32.053

VB.NET 中没有块注释。

您需要`'`在要注释掉的每一行前面使用 a 。

在 Visual Studio 中，您可以使用键盘快捷键为您注释/取消注释所选行：

`Ctrl + K, C`评论

`Ctrl + K, U`取消评论

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-20T16:50:20.093

但是，截至 2012 年 11 月，没有办法

突出显示文本（在 Visual Studio.net 中）

```
ctrl + k + c, ctrl + k + u 
```

将分别评论/取消评论

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-20T16:48:28.170

不在 VB.NET 中，您必须在“编辑”、“高级”、“注释选择”菜单或该菜单的键盘快捷键处选择所有行。

[http://bytes.com/topic/visual-basic-net/answers/376760-how-block-comment](http://bytes.com/topic/visual-basic-net/answers/376760-how-block-comment)

[http://forums.asp.net/t/1011404.aspx/1](http://forums.asp.net/t/1011404.aspx/1)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-11-20T16:49:13.383

在 Visual Studio .NET 中，您可以执行`Ctrl`+`K`然后`C`进行注释，然后执行`Crtl`+`K`然后`U`取消注释块。

# ios - 无法符号化 iOS 应用程序崩溃报告

> ID：13477959
> 
> 赞同：0
> 
> 时间：2012-11-20T16:46:20.287
> 
> 标签：ios, xcode, crash, symbolicate

我的应用程序偶尔会因某些用户而崩溃，我无法重现该问题。

我已经设法从我已导入 Xcode 的一位用户那里获得了一些崩溃报告，但我无法完全用一些*myApp*行来表示这些报告，这些行没有显示被调用的实际类/代码。两个示例堆栈跟踪提取：

```
Last Exception Backtrace:
0   CoreFoundation          0x39e5c3e2 __exceptionPreprocess + 158
1   libobjc.A.dylib         0x38eb595e objc_exception_throw + 26
2   CoreFoundation          0x39da66d0 -[__NSPlaceholderArray initWithObjects:count:] + 160
3   CoreFoundation          0x39da6e04 +[NSArray arrayWithObject:] + 40
4   myApp                   0x0012117c 0x63000 + 778620
5   myApp                   0x0012c700 0x63000 + 825088
6   myApp                   0x00148784 0x63000 + 939908
7   myApp                   0x0013caf0 0x63000 + 891632
8   myApp                   0x0013b9da 0x63000 + 887258
9   myApp                   0x0006bda2 -[myAppAppDelegate init] (myAppAppDelegate.m:45)
10  UIKit                   0x3380d8aa -[UIClassSwapper initWithCoder:] + 186 
```

* * *

```
Last Exception Backtrace:
0   CoreFoundation          0x39e5c3e2 __exceptionPreprocess + 158
1   libobjc.A.dylib         0x38eb595e objc_exception_throw + 26
2   CoreFoundation          0x39da66d0 -[__NSPlaceholderArray initWithObjects:count:] + 160
3   CoreFoundation          0x39da6e04 +[NSArray arrayWithObject:] + 40
4   myApp                   0x000c217c 0x4000 + 778620
5   myApp                   0x000cd700 0x4000 + 825088
6   myApp                   0x000e9784 0x4000 + 939908
7   myApp                   0x000ddaf0 0x4000 + 891632
8   myApp                   0x000dc9da 0x4000 + 887258
9   myApp                   0x0000cda2 -[myAppAppDelegate init] (myAppAppDelegate.m:45)
10  UIKit                   0x3380d8aa -[UIClassSwapper initWithCoder:] + 186 
```

这是一个从归档构建提交到商店的应用程序，该构建仍然存在于 Xcode 中。我还尝试了 atos 命令，并运行了几个可用的符号脚本，但均未成功。（我 100% 确定我有正确的 .app 和 .dSYM 文件）。

任何人都知道我如何能够找到有关这些堆栈跟踪的更多信息并确定此崩溃发生的位置？

（注意：我知道第 9 行引用了应用程序委托的`init`命令，这非常有用。我的问题专门针对未符号化的后续调用）

谢谢！

# php - 将时间戳排序为间隔PHP

> ID：13477961
> 
> 赞同：0
> 
> 时间：2012-11-20T16:46:27.667
> 
> 标签：php, mysql, sql, sorting, datetime

我想获取一组时间戳（来自 mySQL DATE_TIME）并返回最后说的每小时 24 小时的出现次数。基本上，我正在尝试制作一个实时图表，以显示最近的数据库活动量。

一个示例结果可能是..

```
//4 occurrences between now and one hour ago
$hour1=4;
//2 occurrences between 2 and 3 hours ago
$hour2=2;
//7 occurrences between 3 and 4 hours ago
$hour3=7; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T16:49:01.833

像这样的东西？

```
SELECT ..., count(*) AS occurences, hour(timestampfield) AS hour
FROM ...
WHERE timestampfield >= (now() - INTERVAL 24 HOUR)
GROUP BY hour(timestampfield) 
```

获取过去 24 小时内发生的所有事件的计数，按发生的时间分组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T16:49:00.690

为什么不向存储 DATE_TIME 小时值和按该字段分组的 count() 发生次数的 MySQL 表添加一个字段？

# javascript - 如何在应用程序 Silverlight 中禁用 F5 键

> ID：13477963
> 
> 赞同：0
> 
> 时间：2012-11-20T16:46:34.880
> 
> 标签：javascript, silverlight, jquery, silverlight-4.0

我需要禁用 F5 键或找到一些不允许我刷新页面的方法。我尝试使用 javascript 而不是在 silverlight 应用程序中工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:53:02.857

> 不，您不能禁用它，因为它超出了 Silverlight 的范围（或 javascript）。坦率地说，如果有人可以禁用我的 F5 键，我会讨厌。
> 
> 您的解决方案是将应用程序的状态存储在隔离存储中，因此如果应用程序刷新，您可以从停止的位置恢复状态。

但有希望：

> 一种选择是挂钩窗口对象“onbeforeunload”事件并提示用户确认刷新/退出意图。
> 
> 这是一个简单的示例，可以在您的 HTML 标记中定义，甚至可以从 SL 应用程序发出（如果它具有 DOM 访问权限）：

```
<script type="text/javascript">
   window.onbeforeunload = function() {
   return "Leaving or refreshing this page can result in data loss.";
}
</script> 
```

[都从这里开始](http://social.msdn.microsoft.com/Forums/en-US/silverlightwcf/thread/6aa53bef-53e9-40ae-a543-66ba271669ee/)，在使用 Google 10 秒后。

# c# - SoundPlayer 第一次调用时不播放声音

> ID：13477965
> 
> 赞同：0
> 
> 时间：2012-11-20T16:46:38.520
> 
> 标签：c#, visual-studio

我有一个非常简单的播放音效的方法：

```
private void PlaySound(string file){
   SoundPlayer sp = new SoundPlayer(@"Effects\" + file ' ".wav");
   sp.Play();

} 
```

然后我这样做确实调用它：

> 播放声音（“音乐”）；

现在，第一次调用 PlaySound("music") 时，它不会播放它。第二次和之后的所有其他时间都会。

关于这里出了什么问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:51:45.393

尝试这个：

```
private void PlaySound(string file){
   using (SoundPlayer player = new SoundPlayer(@"Effects\" + file ' ".wav"))
    {
        // Use PlaySync to load and then play the sound.
        player.PlaySync();
    }
} 
```

为什么使用 PlaySync？如果你只是在这个程序中调用 Play 方法，程序将在声音播放之前终止。同步表示程序应该在声音播放时暂停。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T16:52:34.903

您需要在播放前调用[load](http://msdn.microsoft.com/en-us/library/system.media.soundplayer.load.aspx)方法。如果文件尚未加载，则会通过调用[Play](http://msdn.microsoft.com/en-us/library/system.media.soundplayer.play.aspx)来加载文件。这解释了为什么第一次没有播放文件。

*如果您在 .wav 文件加载到内存之前调用 Play，则 .wav 文件将在播放开始之前加载。*-MSDN

[Load](http://msdn.microsoft.com/en-us/library/system.media.soundplayer.load.aspx)和PlaySync[都会](http://msdn.microsoft.com/en-us/library/system.media.soundplayer.playsync.aspx)阻塞当前线程。更好的选择是使用[LoadAsync](http://msdn.microsoft.com/en-us/library/system.media.soundplayer.loadasync.aspx)异步加载文件。

# python - 从python 2.7中的列表中删除每个第n个元素

> ID：13477969
> 
> 赞同：6
> 
> 时间：2012-11-20T16:46:58.997
> 
> 标签：python, python-2.7

我被赋予了创建代码的任务。任务如下：

> 你是一艘帆船的船长，你和你的船员被海盗抓获。海盗船长让你们所有人在他的船甲板上围成一圈，试图决定你应该按照什么顺序走木板。最终他决定采用以下方法：
> 
> (a) 海盗船长让你选一个数字 N。
> 
> (b) 第一个走木板的人将是第 N 个人（从你开始）。
> 
> (c) 船长将继续绕圈，迫使每第 N 个人走木板。
> 
> (d) 一旦只剩下一个人，那个人就会得到自由。
> 
> 例如：工作人员包括：Andrew、Brenda、Craig、Deidre、Edward、Felicity、Greg 和 Harriet。安德鲁选择 N=2。工作人员将按照以下顺序走木板：布伦达、迪德、费利西蒂、哈丽特、克雷格、格雷格、爱德华。安德鲁将获得自由。

我到目前为止的代码是：

```
def survivor(names, step):
    names =  ["Andrew", "Brenda", "Craig", "Deidre", "Edward", "Felicity", "Greg", "Harriet"]
    Next = step - 1
    names.pop(Next)
    print names 
```

这将从列表中删除第 n 个人，但我不确定如何遍历列表以继续删除第 n 个人。

我需要它，所以假设 step = 3，然后我需要它来删除 craig，然后从 craig 开始计数并删除下一个 3rd 元素，即 felicity 等等，直到剩下一个人。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T19:42:57.293

这似乎有效：

```
from collections import deque
def survivor(names, step):     
    circle = deque(names)
    while len(circle) > 1:
        circle.rotate(1-step)
        print circle.popleft()
    return circle[0] 
```

它打印海盗受害者的姓名并返回幸存者的姓名：

```
In [17]: crew = ["Andrew", "Brenda", "Craig", "Deidre",
   ....: "Edward", "Felicity", "Greg", "Harriet"]

In [18]: survivor(crew, 2)
Brenda
Deidre
Felicity
Harriet
Craig
Greg
Edward
Out[18]: 'Andrew'

In [19]: survivor(crew, 3)
Craig
Felicity
Andrew
Edward
Brenda
Harriet
Deidre
Out[19]: 'Greg' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T21:22:06.897

以下代码应该完成您要求的一切，包括实现该`safeN`功能：

```
import collections
import itertools

def walk_plank(names, N):
    "Walk everyone down the plank."
    circle = collections.deque(names)
    while circle:
        circle.rotate(-N)
        yield circle.pop()

def save_last(names, N):
    "Save the last person from walking the plank."
    for name in walk_plank(names, N):
        pass
    return name

def safeN(names, name):
    "Find the best N to save someone from walking the plank."
    assert name in names, 'Name must be in names!'
    for N in itertools.count(1):
        if save_last(names, N) == name:
            return N 
```

**编辑：**这是在 Windows 中使用 IDLE 时上面代码的一些示例用法。

```
Python 3.3.0 (v3.3.0:bd8afb90ebf2, Sep 29 2012, 10:55:48) [MSC v.1600 32 bit (Intel)] on win32
Type "copyright", "credits" or "license()" for more information.
>>> import collections, itertools
>>> def walk_plank(names, N):
        "Walk everyone down the plank."
        circle = collections.deque(names)
        while circle:
            circle.rotate(-N)
            yield circle.pop()

>>> def save_last(names, N):
        "Save the last person from walking the plank."
        for name in walk_plank(names, N):
            pass
        return name

>>> def safeN(names, name):
        "Find the best N to save someone from walking the plank."
        assert name in names, 'Name must be in names!'
        for N in itertools.count(1):
            if save_last(names, N) == name:
                return N

>>> names = 'Andrew Brenda Craig Deidre Edward Felicity Greg Harriet'.split()
>>> tuple(walk_plank(names, 2))
('Brenda', 'Deidre', 'Felicity', 'Harriet', 'Craig', 'Greg', 'Edward', 'Andrew')
>>> save_last(names, 2)
'Andrew'
>>> safeN(names, 'Andrew')
2
>>> safeN(names, 'Brenda')
19
>>> save_last(names, 19)
'Brenda'
>>> tuple(walk_plank(names, 19))
('Craig', 'Harriet', 'Andrew', 'Felicity', 'Deidre', 'Edward', 'Greg', 'Brenda')
>>> 
```

# ios - 防止用户修改 SLComposeViewController 中的部分文本

> ID：13477970
> 
> 赞同：1
> 
> 时间：2012-11-20T16:46:59.193
> 
> 标签：ios, facebook, twitter, social-framework, slcomposeviewcontroller

现在，我们的代码设置为从**UITextField**中获取文本作为Facebook/Twitter 帖子的**setInitialText**。

我们要做的是：在 Facebook/Twitter 帖子中添加额外的永久消息或 URL。

我们应该怎么做？这是我们当前的代码：

```
[slComposeThirdViewController setInitialText:[[self QText]text]];

[self presentViewController:slComposeThirdViewController animated:YES completion:nil]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T04:36:21.190

这有点牵扯，所以请耐心等待……**这仅适用于 SLServiceTypeTwitter**

对于任何有兴趣使用它的人，我在 Github 上放了一个示例项目：[https ://github.com/NSPostWhenIdle/Immutable-SLComposeViewController](https://github.com/NSPostWhenIdle/Immutable-SLComposeViewController)

您要做的第一件事是确保您的视图控制器符合`UITextViewDelegate`. 您还需要为`UITextView`. 您实际上不会创建文本视图，但您需要有一个指针直接分配给`SLComposeViewController`. 当您在这里时，也为永久字符串制作一个 iVar。

```
@interface ViewController : UIViewController <UITextViewDelegate> //very important!
{
    UITextView *sharingTextView;
    NSString *permanentText;
} 
```

然后在 viewDidLoad 你可以设置你想要的永久文本：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    permanentText = @"http://www.stackoverflow.com/";
} 
```

下面的代码是`IBAction`向作曲家展示一些细微调整的基本代码。首先，您会注意到`setInitialText`使用格式化字符串将永久文本附加到文本字段内容的末尾，并在其间添加一个空格。

然后是重要的部分！我在`presentViewController:`的完成处理程序中添加了一个循环，以循环遍历子视图的子视图的一些子视图，以便`UITextView`在包含共享文本的作曲家中识别。这需要完成，以便您可以设置该文本视图的委托以访问`UITextViewDelegate`方法`shouldChangeTextInRange`。

```
- (IBAction)exampleUsingFacebook:(UIButton *)sender {

    if([SLComposeViewController isAvailableForServiceType:SLServiceTypeTwitter])
    {
        SLComposeViewController *sharingComposer = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeTwitter];

        SLComposeViewControllerCompletionHandler __block completionHandler=^(SLComposeViewControllerResult result){
            [sharingComposer dismissViewControllerAnimated:YES completion:nil];
        };
        [sharingComposer setCompletionHandler:completionHandler];
        [sharingComposer setInitialText:[NSString stringWithFormat:@"%@ %@",[[self QText]text],permanentText]];

        [self presentViewController:sharingComposer animated:YES completion:^{
            for (UIView *viewLayer1 in sharingComposer.view.subviews) {
                for (UIView *viewLayer2 in viewLayer1.subviews) {
                    if ([viewLayer2 isKindOfClass:[UIView class]]) {
                        for (UIView *viewLayer3 in viewLayer2.subviews) {
                            if ([viewLayer3 isKindOfClass:[UITextView class]]) {
                                [(UITextView *)viewLayer3 setDelegate:self];
                                sharingTextView = (UITextView *)viewLayer3;
                            }
                        }
                    }
                }
            }
        }];
    }
} 
```

**重要提示：**请注意，上述内容**仅**在放置在完成处理程序中时才有效。

下面是一个示例，说明如何设置`shouldChangeTextInRange`以将用户尝试编辑的范围与包含您的永久文本的范围进行比较。通过这样做，用户将能够对他们想要的文本的任何部分进行更改......除了包含您的永久文本的部分。您还会注意到，在此方法中，我将 textView 与 shareingTextView 进行了比较，这是我们分配给 composer 内部文本视图的指针。这样做将允许您在此控制器中使用其他文本视图，而无需遵循我为 Composer 中的文本视图配置的相同规则。

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text
{
    if (textView == sharingTextView) {
        NSRange substringRange = [textView.text rangeOfString:permanentText];
        if (range.location >= substringRange.location && range.location <= substringRange.location + substringRange.length) {
            return NO;
        }
    }
    return YES;
} 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T02:31:10.143

您可以滚动自己的作曲家，附加您的文本，然后使用 SLRequest 将其实际提交给服务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T16:53:13.280

如何从 UITextField 捕获用户输入的文本，然后构造一个最终字符串，该字符串附加您想要的永久消息？

```
UITextField *textField;
NSString *enteredText = [textField text];
NSString *finalPost = [NSString stringWithFormat:@"%@ Your permanent text/URL", enteredText]; 
```

现在将“finalPost”字符串发布到 Facebook 或 Twitter。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-30T10:11:02.807

如果你想用 URL 附加文本，只需使用 addURL: 方法。它不会在 SLComposeViewController 的视图中显示任何文本。但在发布用户推文后会在末尾添加 URL。

```
SLComposeViewController *slComposeThirdViewController = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeTwitter];
[slComposeThirdViewController setInitialText:@"initial Text"];
[slComposeThirdViewController addURL:[NSURL URLWithString:@"http://stackoverflow.com/"]]; 
```

# dart - Rikulo飞镖到底是什么？

> ID：13477972
> 
> 赞同：9
> 
> 时间：2012-11-20T16:47:14.337
> 
> 标签：dart, rikulo

我一直在阅读[http://www.rikulo.org](http://www.rikulo.org)网站上的摘要，但所有这些神秘的模糊陈述对我没有帮助。这些例子都是关于视觉的。

我不明白这个框架能做什么。大图不见了。

1.  我可以用 rikulo 构建什么样的应用程序？
2.  是否可以访问硬件？
3.  可以使用智能手机的传感器数据并将例如坐标从我的智能手机发送到网络服务吗？
4.  有什么限制？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-21T04:54:26.940

如[本博客](http://blog.rikulo.org/posts/2012/Jul/General/the-rikulo-way/)所述，Rikulo 旨在为 Web 和移动编程提供结构化的 UI 模型。[我们是开发ZK](http://zkoss.org)的同一团队。有了 Rikulo，我们想更进一步，因为自 2005 年开发 ZK 以来，许多事情都发生了变化。此外，Dart 和 HTML 5 都还很年轻。这是探索 Web 和移动编程的最佳 UI 架构的绝佳时机。

例如，我们使用绝对定位让程序员 100% 控制 UI 的布局，而不是花费数小时来找出它在某些组合中失败的原因。另一个例子是“递归分层结构”，例如布局管理器和视觉效果处理——而不是针对个别特定问题的特殊功能。

另一方面，我们还没有很多小部件。这可能是让你感到困惑的原因。作为一个 Apache 授权项目，我们希望我们能够有一个活跃的社区来构建小部件和插件，只要我们能够真正提供一个坚实而优雅的架构——这是我们现在关注并不断完善的。

要访问硬件，您可以使用基于 Cordova/PhoneGap 的[Rikulo Gap 。](http://docs.rikulo.org/rikulo/latest/Rikulo_Gap/Fundamentals.html)要与服务器通信，您可以使用 Web 套接字或[HttpRequest](http://api.dartlang.org/docs/bleeding_edge/dart_html/HttpRequest.html)。我们将为客户端和服务器之间的 jsonizing、缓存和通信 Dart 对象提供更高级的支持，但它还没有准备好。

从技术上讲，没有限制。当然，目前的小部件数量肯定是不够的，但在不久的将来会得到更多。此外，您始终可以使用 HTML 5 创建它们（并回馈）。但是，对于移动应用程序，您必须记住一件事：性能不会像用 Objective C 编写的应用程序那样好。好处是 Rikulo 是跨平台的，您的应用程序可以通过 Web 浏览器访问，并且作为本机应用程序。

# machine-learning - 使用 scikit-learn 的 svm 训练错误

> ID：13477976
> 
> 赞同：0
> 
> 时间：2012-11-20T16:47:22.810
> 
> 标签：machine-learning, svm, scikit-learn

我想计算训练误差（相对于训练集执行的拟合的均方误差）和交叉验证集的交叉验证误差。在 sklearn 中使用 SVC 或 linearSVC 怎么可能？

# php - Facebook：如何从页面配置文件更新状态？

> ID：13477984
> 
> 赞同：1
> 
> 时间：2012-11-20T16:47:58.303
> 
> 标签：php, facebook, api, parsing

我在交叉发布到 Facebook 时遇到问题。我可以将一些信息发布到我的个人墙上（使用解析或 Facebook API），但我需要发布到组的页面（例如：facebook.com/pages/$Pagename/$PageId）。（我是该组的经理，可以手动发布，但需要从我的站点自动获得相同的功能。）

每次我尝试自动发布到我自己的组时都会出错:(

1）当我使用解析时，我收到消息“无法共享帖子。” （来自 m.facebook.com/sharer.php?error=1&_rdr ）

2) 当我使用解析并通过 m.facebook.com/a/home.php?refid=$NumberID 发送帖子数据时，我可以从群组页面发布消息。但是，如果消息包含一个链接，它是代表我的个人资料发布的，但我想在我的网站上发布一个带有链接的组页面。

3) 当我通过 Facebook API 发帖时 - 我收到错误 (#200) - “用户尚未授权应用程序执行此操作”

我进行服务器身份验证。我想在没有当前用户权限查询的情况下进行此操作（因此尝试解析）。

再次：我可以通过这三种方法更新自己的（！）状态（也有链接）。我需要更新我的页面的个人资料（带有链接的消息）。可能吗？

提前致谢。

# sql - SQL IN 语句“包容性”

> ID：13477985
> 
> 赞同：2
> 
> 时间：2012-11-20T16:48:01.673
> 
> 标签：sql

我不是程序员，但正在努力学习。我是一名护士，需要从数据库中提取用于医疗转诊跟踪的数据。我有一个 GUI 软件，它为我构建 JOIN 查询以从数据库中提取内容。我可以在下拉列表中使用的运算符之一是“IN”。推荐文件作为由一到三个字母组成的代码存储在表中。例如，完成牙科转诊的代码是 CDF，牙科转诊的代码是 D。

我想建立一个报告以允许其他护士提取他们所有的优秀推荐，所以我想拉“D”而不是“CDF”

如果我使用 IN 作为运算符，并将我的参数设置为 'S'、'D'、'BP' {etc}，那是否还会提取包含相同字母的其他更长代码的记录？（如 CDF、CSR、CBP）

我不想测试它，因为我只能访问生产数据库，而且我不想占用实际的患者记录。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T16:54:42.980

假设包含推荐代码的列每条记录仅包含一个代码（听起来就是这样），查询应该按照您的意愿运行，并且不会尝试匹配子字符串。

无论如何，表单中的查询`IN ('S', 'D', 'BP')`不会匹配子字符串。要在 SQL 中执行子字符串匹配，您必须使用`LIKE`运算符。

如果推荐代码列包含多个用逗号分隔的代码，这将*不起作用。*这是设计数据库时非常常见的错误，但如果您使用的产品是商业产品而不是本土产品，我认为这种情况不太可能发生。如果是这样，搜索它就困难得多。

# javascript - Nivoslider：之后更改滑块的宽度和高度

> ID：13477987
> 
> 赞同：1
> 
> 时间：2012-11-20T16:48:06.480
> 
> 标签：javascript, jquery, css, typo3, nivo-slider

我正在开发一个 TYPO3 网站的移动版本。在那里，我使用了`nivoslider`使用官方已知的 Nivo Slider 的插件。现在我必须减小滑块的大小。我怎样才能做到这一点？

在 TYPO3 中，插件页面上有一个宽度和高度设置，但这也会影响全尺寸网站。因为没有手册，我不认为我可以在之后使用 Typoscript 设置宽度和高度。

我尝试用 CSS 设置宽度

```
.nivoSlider {
    width: 300px !important;
    height: auto !important;
}

.nivoSlider img {
    width: 300px !important;
    height: auto !important;
} 
```

但是当滑块加载时，它使用图片的正常大小。只有滑块容器本身会裁剪图像，但高度错误（只能看到点和图像的一小部分）。

我还尝试查看文档以查看是否可以以某种方式设置宽度和高度。但是我没有找到任何设置。我可以使用任何 javascript/jquery 解决方案吗？这不起作用：

```
$(document).ready(function() {

  $('.nivoslider img').each(function(index, element){
    alert('test');
    $(this).width(300);
    var src = $(this).attr("src");
    src = 'fileadmin/templates/timthumb/timthumb.php?src=' + src + '&w=300';
    $(this).attr("src", src);
  });
}); 
```

似乎`.nivoslider`是之后构建的，但我的代码是之前执行的。这是确认：

```
 if ($('.nivoslider').length != 0) {
    alert('element found');
  }else{
    alert('element NOT found');
  } 
```

上面的代码给了我`element NOT found`，因为扩展的初始化在末尾，`header`而我的代码在前面。如何在 TYPO3 的标题末尾包含 Javascript 代码？

现在我想我会使用这个 CSS，因为我没有看到任何解决方案：

`.nivoslider { display: none; }`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:24:12.960

你想看看这个...

[http://nivo.dev7studios.com/2012/05/30/the-nivo-slider-is-responsive/](http://nivo.dev7studios.com/2012/05/30/the-nivo-slider-is-responsive/)

**＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃ 更新 ＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃ ######**

上述链接已被删除，请参见以下示例：

[http://www.flynsarmy.com/wp-content/uploads/2012/09/nivoslider/index.html](http://www.flynsarmy.com/wp-content/uploads/2012/09/nivoslider/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-20T18:57:51.553

通过更改 html 文件中 img 标记中的高度来更改高度，并通过更改 style.css 中 .slider-wrapper 中的宽度来更改宽度。

# jquery - 如何使用 jQuery 操作和保存 XML 文档

> ID：13477988
> 
> 赞同：0
> 
> 时间：2012-11-20T16:48:09.467
> 
> 标签：jquery, xml, tostring

很惊讶我在这方面找不到太多东西，我不认为这是一个骗局（谁知道了？...）

我的 PHP 生成的 HTML 如下所示：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Manipulate and Save XML</title>
    </head>
    <body>
        ...
        <script type="text/xml" id="xml-data"><?=$well_formed_xml?></script>
        ...
    </body>
</html> 
```

我的 js 应用程序初始化如下：

```
var xml = $.parseXML($("#xml-data").html());
var $xml = $(xml); 
```

然后，通过用户采取的行动，这个 xml 被遍历、读取和操作。我想获取被操纵的 xml 的字符串，然后作为帖子发送到服务器并启动文件下载对话框。

我试过了：

```
$xml.html()        // returns null
$xml.toString()    // returns "[object Object]"
xml.toString()     // returns "[object Document]" 
```

有趣的是：我首先去了[parseXML 上的 jQuery 手册页](http://api.jquery.com/jQuery.parseXML/)，尝试点击指向 XMLDocument 伪/虚拟类型[http://api.jquery.com/Types/#XMLDocument](http://api.jquery.com/Types/#XMLDocument)的链接，却发现它在那里没有记录（没有 id="XMLDocument" 的部分）。

有任何想法吗？

# javascript - 尝试从节点 js 中的 .json 文件将字符串解析为 JSON 时出错

> ID：13477991
> 
> 赞同：0
> 
> 时间：2012-11-20T16:48:22.563
> 
> 标签：javascript, json, node.js, filesystems

```
var jsonObject = collages;

file.writeFile('collage.json', JSON.stringify(jsonObject), function(err){
    if (err) throw err;
    console.log('Success');
});

var result = '';
result += file.readFile('collage.json', 'utf-8', function(err, data) {
    if(err) throw err;
    console.log(data);
});
JSON.parse(result); 
```

我收到“SyntaxError: Unexpected token u - at Object.parse(native)”

我是 JSON 新手，我似乎无法重新创建我写出的对象。当我打印出结果时，我有字符串化的 json 对象，但是当我尝试解析该字符串时，会给出错误。对象拼贴只是一个包含 6 个字段（x 值、y 值、宽度...等）的图层对象数组。任何帮助将不胜感激，我想读入 JSON 对象，以便在读入时重新创建拼贴画。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T16:53:19.240

`file.readFile`是一个异步动作，你的行为就像它是同步的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-15T06:55:40.197

您可以使用`readFileSync` 例如同步执行此操作：

```
var result = file.readFileSync('collage.json').toString(); 
```

对于 json 文件，Node.js 提供了一种更简单的方法来完成此操作：

```
var result = require('./callage.json'); 
```

`require`会注意到 .json 扩展名并为您将文件解析为 json。

[http://nodejs.org/api/fs.html#fs_fs_readfilesync_filename_options](http://nodejs.org/api/fs.html#fs_fs_readfilesync_filename_options) [http://nodejs.org/api/modules.html#modules_file_modules](http://nodejs.org/api/modules.html#modules_file_modules)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T16:58:31.583

`readFile`是异步的，所以你只需要重新排列你的代码：

```
var result = null;

file.readFile('collage.json', 'utf-8', function(err, data) {
    if(err) throw err;
    result = JSON.parse(data);
}); 
```

请记住，对于异步函数，您必须在回调中执行相关代码。

# c# - 带有 Cloo 的 OpenCL：分析器不工作

> ID：13477996
> 
> 赞同：1
> 
> 时间：2012-11-20T16:48:33.400
> 
> 标签：c#, profiling, opencl, gpgpu, cloo

我想分析我用 C# 编写的应用程序，使用 Cloo 作为 OpenCL 的包装器。我已经尝试了一些东西...... gDEBugger、AMD APP SDK、CodeXL、KernelAnalyzer......

将我的内核代码原样复制粘贴到 KernelAnalyzer 将表明瓶颈是 ALU 操作。但是，由于它只是一个内核分析器，我并不完全信任生成的信息。

为了正确分析我的应用程序，我尝试了其他工具。我尝试使用 sprofile.exe 通过控制台使用 APP SDK 进行分析，但我总是得到“无法启动应用程序：0：进程已成功终止”。我真的无法猜测问题可能是什么。

使用独立工具 CodeXL 和 gDEBugger 时，我可以在运行 .exe 时看到已调试的进程事件（线程启动、消息），仅此而已。没有函数调用、内存信息、统计信息等……就像我没有运行应用程序一样，都是空的！所以对我来说基本没用。

我真的不知道问题可能是什么。会不会是因为使用 Cloo 作为包装器会使所有执行的操作对分析器不可见？

我会很感激任何提示！提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T17:46:30.187

我刚刚尝试使用 CodeXL 分析 Clootils.exe（Cloo 发行版附带的示例），经过反复试验，我能够让 CodeXL 工作。

我必须首先重建 Cloo.dll 和 ClooUtils.exe，并将 Platform 目标设置为 x86。使用“任何 CPU”的默认设置给了我一个“应用程序无法正确启动 (0xc000007b)”。错误。尝试“x64”给了我一个“无法配置文件”错误消息，并将 ClooUtils.exe 进程留在内存中。但是尝试使用“x86”让我可以很好地分析。我在 CodeXL 中尝试了“GPU：应用程序跟踪”和“GPU：性能计数器”配置文件模式，并且都有效。

因此，这可能会提供一种解决方法来允许使用 CodeXL。

# sql-server-2008 - 使用左连接从选择中更新语句

> ID：13477997
> 
> 赞同：2
> 
> 时间：2012-11-20T16:48:38.560
> 
> 标签：sql-server-2008

我在这里有这个查询

```
SELECT a.FileTrackingTag, a.DataSetName FROM TempTable a
LEFT JOIN FinalTable b ON a.Title = b.Title
WHERE b.FileTrackingTag IS NULL
AND b.DataSetName IS NULL 
```

我想用 temptable 中的值更新 Filetrackingtag 和 finaltable 中的数据集名称，前提是它们为 null 并且在两个表之间具有相同的 Title 和 SampleID

表结构是这样的，两个表都有 Title、Filetrackingtag 和 Datasetname

有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T17:05:19.300

我认为您正在寻找的声明是这样的：

```
UPDATE f SET
    Filetrackingtag = isnull(f.Filetrackingtag, t.Filetrackingtag),
    Datasetname  = isnull(f.Datasetname, t.Datasetname)
FROM FinalTable f
JOIN TempTable t 
    ON f.Title = t.Title and f.SampleID = t.SampleID 
```

*（我还没有测试过代码，但我很有信心它应该可以工作）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T15:58:29.003

在 UPDATE 语句中使用派生表

```
UPDATE x
SET x.FileTrackingTag = x.newFileTrackingTag,
    x.DataSetName = x.newDataSetName
FROM (
      SELECT a.FileTrackingTag AS newFileTrackingTag, a.DataSetName AS newDataSetName,
             b.FileTrackingTag, b.DataSetName
      FROM TempTable a LEFT JOIN FinalTable b ON a.Title = b.Title AND a.SampleID = b.SampleID
      WHERE b.FileTrackingTag IS NULL AND b.DataSetName IS NULL
      ) x 
```