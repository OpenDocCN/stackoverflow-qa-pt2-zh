# StackOverflow 问答 14092000-14092999

# java - Google App Engine 低级 api - 将自定义对象保存为 Blob？

> ID：14092001
> 
> 赞同：0
> 
> 时间：2012-12-30T15:37:28.933
> 
> 标签：java, google-app-engine

我有一个自定义对象，我想保存在数据存储区（而不是 blobstore）中。就像是

```
Entity.setProperty("myobj", custonObject) 
```

我在这个 customObject 中有一个用户列表

```
public user class{
 String name;
 String age;
}

public user_s class{

 List<user> userList;

 public user_s(){
  userList = new ArrayList<user>();
 }
} 
```

然后我想保存 user_s。

我想我需要一些序列化，如果可能的话。我可以看到数据存储中有一个 Blob 类，但是您如何使用它呢？ [https://developers.google.com/appengine/docs/java/datastore/entities](https://developers.google.com/appengine/docs/java/datastore/entities)

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T18:42:52.703

我知道您的问题特别提到了“低级 API”，但如果您想避免在各处制作样板序列化代码，您可能需要考虑使用 Objectify。`@Serialized`然后，您可以简单地在要存储的自定义对象列表上使用注释。

我将 Objectify 称为“中低级”——它为您提供了高度的控制，因为您可以完全按照您的意愿操作数据存储，而无需 JDO 的抽象/阻塞，但仍然可以让您避免一堆样板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T18:05:53.103

是的，有一[`Blob`](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/datastore/Blob)堂课。

序列化很简单：

```
 ByteArrayOutputStream baos = new ByteArrayOutputStream();
    ObjectOutputStream oos = new ObjectOutputStream(baos);
    oos.writeObject(obj);
    Blob blob = new Blob(baos.toByteArray()); 
```

# css - Twitter Bootstrap - 缩略图

> ID：14092003
> 
> 赞同：0
> 
> 时间：2012-12-30T15:37:36.843
> 
> 标签：css, twitter-bootstrap, responsive-design, media-queries

我想以以下配置显示缩略图（从最宽的屏幕宽度到最窄的屏幕宽度）：

*   一行 6 个缩略图（每个缩略图是`span2`）
*   一行 3 个缩略图在另一行 3 个缩略图上方
*   一行 2 个缩略图，位于另外两行上方，每行 2 个缩略图
*   每行 1 个缩略图在其他 5 行上方，每行 1 个缩略图

我希望这都使用相同的标记。我正在使用 Twitter 引导程序。现在，我有这样的事情：

```
<div class="container-fluid">
   <div class="row-fluid">
      <ul class="thumbnails">
         ...
         ...
      </ul>
   </div>
</div> 
```

现在所做的就是在一行中显示 6 个缩略图。当屏幕宽度太窄时，它会将布局更改为每行一个缩略图。它跳过了我想要的中间步骤。

我如何在 TB 中实现我想要做的事情？我希望有一个仅加价的解决方案，因为我想充分利用 TB 所提供的功能。

# vb.net - 关键字“and”附近的语法不正确

> ID：14092006
> 
> 赞同：0
> 
> 时间：2012-12-30T15:37:45.423
> 
> 标签：vb.net, visual-studio-2008, date, datetime, datepicker

我在 Visual Studio 2008 上使用 VB.NET

错误：**关键字“and”附近的语法不正确。**

**代码。**

```
 sb.Remove(0, sb.Length())
    sb.Append("SELECT tf.*")
    sb.Append(" FROM filesTA tf")
    sb.Append(" WHERE tf.ChkDate = '" & dateTimePicker.Value.ToString("yyyy-MM-dd") & "'")
    Dim SqlLR As String = sb.ToString()
    da.SelectCommand.CommandText = SqlLR
    da.Fill(ds, "filesTA9")

    If ds.Tables("filesTA9").Rows.Count = 0 Then
        sb.Remove(0, sb.Length())
        sb.Append("INSERT INTO filesTA (EmpNo,ChkDate,LastUpdate) ")
        sb.Append("SELECT tft.EmpNo,tft.ChkDate,tft.LastUpdate ")
        sb.Append("FROM TA_FillTime tft ")
        sb.Append("WHERE Convert(nvarchar(10),tft.ChkDate,126) Between DATEADD(Day , -1, '" & dateTimePicker.Value.ToString("yyyy-MM-dd") & "' and '" & dateTimePicker.Value.ToString("yyyy-MM-dd") & "'")
        sb.Append(" Order By tft.ChkDate ")

        Dim SqlLR2 As String = sb.ToString()
        da.SelectCommand.CommandText = SqlLR2
        da.Fill(ds, "filesTA9") => **Error this line: Incorrect syntax near the keyword 'and'.**
        'label1.Text = "Insert Done"
    ElseIf ds.Tables("filesTA9").Rows.Count > 0 Then
        'label1.Text = "Insert New Done"
    Else
        'label1.Text = "Insert Done..."
    End If 
```

谢谢你的时间。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T15:43:19.517

你忘了一个括号：

```
 ..snip.. Between DATEADD(Day , -1, '" & dateTimePicker.Value.ToString("yyyy-MM-dd") & ")' and ...snip ...
  scroll over here--->                                                                   ^---here 
```

这给您留下了一个未终止的`DATEADD()`函数调用。发布代码以生成 sql 查询通常不如显示您生成的实际查询有用。SQL 语法错误可能很难发现，而无需从周围大量无用的“绒毛”中提取查询。

# php - 在库 codeigneter 中加载库

> ID：14092007
> 
> 赞同：0
> 
> 时间：2012-12-30T15:37:45.630
> 
> 标签：php, codeigniter

为什么我会收到此错误？

> 遇到 PHP 错误
> 
> 严重性：通知
> 
> 消息：未定义的属性：Lib_curl::$lib_parent
> 
> 文件名：库/lib_curl.php
> 
> 行号：14

这是我的控制器

```
public function shoppingcart()
    {
        $this->load->library(array('curl', 'lib_curl', 'lib_parent'));

        if($this->input->post('addtocart', TRUE))
        {
            $type = $this->input->post('type', TRUE);
            $id = $this->input->post('id', TRUE);
            $Weight = $this->input->post('Weight', TRUE);
            $ASIN = $this->input->post('ASIN', TRUE);
            $qty = $this->input->post('qty', TRUE);

            if($this->lib_curl->cek_shipping_indous($type,$id,$this->config->item('AWS_ACCESS_KEY_ID'),$this->config->item('AWS_ASSOCIATE_TAG'),$this->config->item('AWS_SECRET_ACCESS_KEY')))
            {
                //indonesia
            }
            else
            {
                //US
            }
        }
    } 
```

这是我的图书馆

```
public function cek_shipping_indous($tipe,$items,$AWS_ACCESS_KEY_ID,$AWS_ASSOCIATE_TAG,$AWS_SECRET_ACCESS_KEY)
    {
        $params = array(
                'Service' => 'AWSECommerceService',
                'AWSAccessKeyId' => $AWS_ACCESS_KEY_ID,
                'AssociateTag' => $AWS_ASSOCIATE_TAG,
                'Timestamp' => date("Y-m-d\TH:i:s\Z"),
                'Operation' => 'CartCreate',
                "Item.1.".$tipe."" => $items,
                'Item.1.Quantity' => '1',
            );
        $xml = simplexml_load_file($this->lib_parent->amazon_get_data($params,$AWS_SECRET_ACCESS_KEY));
        $this->lib_parent->echo_array($xml);
    } 
```

我的代码哪里错了？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T15:46:22.470

创建实例很容易

```
Class mylib
{
    public $CI;

    function index()
    {
        $this->CI   =   &get_instance();
        $this->CI->load->library('another_library');

        $this->another_library->method();

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-16T07:36:18.953

在代码中，您使用库函数，因此您需要创建如下

```
var $CI;

function __construct() {
    $this->CI = & get_instance();
} 
```

您需要在类下添加此代码，它将很有用，现在您也可以使用它们的功能加载模型。

# c# - 如何在数组中找到重复的相邻对

> ID：14092011
> 
> 赞同：-1
> 
> 时间：2012-12-30T15:38:10.553
> 
> 标签：c#, arrays, algorithm, linq, duplicates

我正在寻找一种简单易用的方法，该方法允许我在数组中找到一对重复项并显示该对存在的索引号。

到目前为止，我只有可以使用的方法头和输出示例

```
int Duplicates (int[] testArray){

int[] testArray = {1,5,6,8,9,4,4,6,3,2};
} 
```

我唯一想要返回的是相邻对的索引位置，即在这种情况下为 5，即 (4,4)。如果没有相邻的对，我也希望能够打印“没有找到重复的对”

任何人都可以帮助我开始，因为我不知道如何开始做这样的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T15:50:01.090

在此处尝试以下 Linq 查询[演示](http://ideone.com/N7aj8E)

```
int[] testArray = {1,5,6,8,9,4,4,6,3,2};

var adjacentDuplicate = testArray
    .Skip(1)
    .Where((value,index) => value == testArray[index])
    .Distinct();

if (adjacentDuplicate.Any() )
{    
    // Print adjacentDuplicate
}
else
{
   // No duplicates found.
} 
```

**编辑**

以下是重复索引的 LINQ 查询。

```
var adjacentIndex = testArray
    .Skip(1)
    .Select((value,index) => value == testArray[index] ? index : -1)
    .Where (x=> x!= -1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T15:56:25.423

在这个 LINQ 查询中我能想到的唯一缺点是它使用 -1 作为丢弃值。在索引的情况下它总是正确的，但我通常不建议这样做。它的作用是检查数组的下一个元素是否与当前元素相同，如果为 true，则返回当前索引，否则返回 -1，然后仅选择大于零的索引。

```
int[] testArray = {1, 5, 6, 8, 9, 4, 4, 6, 3, 2, 2};
var duplicateIndexes = testArray.
            Select((value, index) => testArray.Length > index + 1 &&
                                     testArray[index + 1] == value ? index : -1).
            Where(index => index > 0).
            ToArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T15:45:04.077

分解问题时非常简单，您必须查看每个元素，然后将其与下一个元素进行比较。唯一的主要问题是如果将最后一个元素的索引与索引 + 1 进行比较，您将用完数组，这将导致数组越界异常，这就是我们检查位置的原因

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Misc
{
    class Program
    {
        static int duplicates(int[] array)
        {
            for (int i = 0; i < array.Length-1; i++)
            {
                if (array[i] == array[i+1])
                {
                    return i;
                }
            }
            return -1;
        }

        static void Main(string[] args)
        {
            int[] testArray = { 1, 5, 6, 8, 9, 4, 4, 6, 3, 2 };
            Console.WriteLine(duplicates(testArray));
            Console.ReadKey(); // block 
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-30T15:41:38.813

```
int previousValue = -1; //set it to something you're not expecting

for (int i=0; i <testArray.Count; i++) {
    int currentValue = testArray[i];

    if (currentValue.equals(previousValue) {
      //we have a duplicate
       duplicateList.add(i); //for the position of the duplicate
    }
    previousValue = currentValue;
}

if (duplicateList.Count == 0) {
   //no duplicates found
} else {
   return duplicateList.toArray();
} 
```

说明 - 我们将通过一次一个地浏览它们来解决这个问题。

for 循环每次都会将值 i 增加一，直到它遍历整个数组。

在每一步，当前值将与前一个值进行检查。如果它们相同，则将此位置添加到输出中。然后前一个值变成最后一个当前值，循环继续。

# backbone.js - 为什么 RequireJS 不加载这个依赖？

> ID：14092014
> 
> 赞同：2
> 
> 时间：2012-12-30T15:38:38.220
> 
> 标签：backbone.js, requirejs, amd

执行以下“主”模块时，我收到“TypeError：OrdersPage 不是构造函数”

```
require(
    [
        'app/pages/orders/OrdersPage'
    ],
    function(OrdersPage) {
        'use strict';

        new OrdersPage();
    }
); 
```

事实证明，当我在函数（OrdersPage）中时，“OrdersPage”是未定义的。所以问题是为什么它是未定义的——尽管将 OrdersPage 定义为依赖项？

这是 OrdersPage 的代码，它实际上是被命中的，但是在打印了上述错误之后：

```
require(
    [
        'backbone'
    ],
    function() {
        'use strict';

        console.log('In OrdersPage');

        return Backbone.View.extend({

        });
    }
); 
```

综上所述，控制台输出如下：

```
TypeError: OrdersPage is not a constructor
In OrdersPage 
```

这告诉我 OrdersPage 模块是在加载并执行“主”模块之后加载的，这为时已晚！

**编辑 1**[此处](http://ge.tt/6JHZWSU/v/0?c)提供了 一个非常简单的项目来演示此问题。

**编辑 2** 我已经在我的 RequireJS 配置中声明了 Backbone：

```
require.config({
    // Initialize the application with the main application file
    deps: ['main'],

    paths: {
        // jQuery
        jquery:                      'vendor/jquery-1.8.3',

        // Underscore
        underscore:                  'vendor/underscore-1.4.3',

        // Backbone
        backbone:                    'vendor/backbone-0.9.9',

        // Templating
        handlebars:                  'vendor/handlebars-1.0.rc.1'
    },

    shim: {
        backbone: {
            deps: ['underscore', 'jquery'],
            exports: 'Backbone'
        },

        handlebars: {
            exports: 'Handlebars'
        },

        underscore: {
            exports: '_'
        }
    }
});

require(
    [
        'app/pages/orders/main'
    ],
    function() {
        'use strict';
    }
); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T19:56:49.227

你应该使用`define()`，而不是`require()`。它们非常相似，但`require()`不对返回值做任何事情，也没有设置模块。

```
define(['backbone'], function() {
    'use strict';

    console.log('In OrdersPage');

    return Backbone.View.extend({

    });
}); 
```

# c# - If condition bash alike - 检查和赋值

> ID：14092030
> 
> 赞同：0
> 
> 时间：2012-12-30T15:41:30.270
> 
> 标签：c#, if-statement, conditional-statements

我正在实现 A* 算法，但我被以下伪代码卡住了：

```
 if neighbor not in openset or tentative_g_score <= g_score[neighbor] 
     came_from[neighbor] := current
     g_score[neighbor] := tentative_g_score
     f_score[neighbor] := g_score[neighbor] + heuristic_cost_estimate(neighbor, goal)
     if neighbor not in openset
         add neighbor to openset 
```

我想优化开放集检查，这样我就不会在一次算法通过中检查一个节点是否两次开放集。

我知道在 bash 中有类似的东西：

```
if(( false == openedList_.ContainsNodeXY(n.X, n.Y)) && 
     InOpenSet = false ){ .... } 
```

有了这个，我就会有关于节点是否在开放集中的信息。

我怎样才能在 C# 中做到这一点？

**EDIT** `openList_`是一个列表（我必须对其进行排序），所以它不能是一个`HashSet`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T15:43:19.167

您可以`HashSet<T>`为此使用 C# 中的对象。HashSet 将很快能够告诉您一个对象是否是 Set 的成员。

[HashSet](http://msdn.microsoft.com/en-us/library/bb359438.aspx)有`Add`和`Contains`方法。

* * *

根据您的评论，您可能需要 SortedList。它不会更快，HashSet 在大多数情况下是 O(1)。SortedList 在插入时将是 O(n)。SortedList 也有`Contains`（因为它们都实现了 IDictionary）。

请参阅[这个](https://stackoverflow.com/a/128754/215752)有用的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T16:27:29.620

我认为 A* 需要的是一个也支持 fast 的优先级队列`Contains`。`SortedSet<T>`是这堂课。据我了解，它是一棵红黑树。

警告：不要使用`SortedList<T>`BCL 中的类。它是基于可怕`O(n^2)`算法的遗留物。

# c# - vector2 数组的列表

> ID：14092035
> 
> 赞同：1
> 
> 时间：2012-12-30T15:42:18.960
> 
> 标签：c#, arrays, list, vector, xna

我在 XNA 中制作 2D 游戏，NPC 精灵都组合成一个整体，看起来像是一个精灵。我认为解决此问题的一种方法是对所有精灵进行碰撞检测，然后将它们彼此远离，但这意味着每帧要进行数百次检查。

然后我决定将游戏窗口分解为`grid (6*6)`，并将每个精灵放入 36 个数组中的一个，因此我只需检查每个精灵与同一象限中的其他精灵。现在这是我的问题，因为我正在检查位置，即 a `Vector2`，我不知道如何将它们全部放在相关的网格中。

如果我有不清楚的地方，请告诉我，我会尽力改进它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T16:17:14.233

这肯定不是最优化的方法，但以下可能是一种简单的方法。Felix K. 的回答可能会为您提供更高效的解决方案。如果您希望多个元素在网格中共享相同的位置，您可以通过将网格的类型从 更改`Vector2`为`Vector2[]`或听起来对您最方便的集合类型来调整示例。

```
//Size of each square
const int squareSize = 10;
const int gridSquares = 6;
var grid = new Vector2[gridSquares,gridSquares];
//Sample vectors
Vector2[] vectors =
    {
        new Vector2(0, 0),
        new Vector2(25, 0),
        new Vector2(20, 40),
        new Vector2(59, 59)
    };
foreach (var vector in vectors)
{
    var x = vector.X/squareSize;
    var y = vector.Y/squareSize;
    grid[x, y] = vector;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T16:08:47.593

第一：为什么不使用[Box2d](http://box2dxna.codeplex.com/)？如果您不想使用它，您可能会寻找[四叉树](http://en.wikipedia.org/wiki/Quadtree)，有一些很好的游戏四叉树实现。我更喜欢完全扩展的四叉树，它比普通的四叉树更快，但我在网上找不到任何关于它的文章。我的邮箱中有一篇关于此的扫描文章，但我不会在这里发布。

基本上你可以这样做来检查四叉树中的相关节点：

*   检查对象是否适合根节点（如果不是，则对象在顶部节点中）
*   如果对象适合其中之一，请检查 4 个子节点。处理这个直到对象不适合任何子节点，然后将其添加到当前节点。
*   在处理场景时，找到包含实际对象的节点（将其保存在包含对象中），现在走到父节点直到到达根节点并检查每个节点中的碰撞。
*   四叉树的[例子](http://www.codeproject.com/Articles/30535/A-Simple-QuadTree-Implementation-in-C)

# asp.net - 从 ASP.net 代码中难以访问的数据库

> ID：14092047
> 
> 赞同：0
> 
> 时间：2012-12-30T15:43:58.837
> 
> 标签：asp.net, html, sql-server

我有以下代码：

```
sql="SELECT  COUNT(*) AS CurrentInvoice from [Invoices].[dbo].[InvoiceSentInformation] WHERE (InvoiceSeries = 18) AND (InvoicePeriodStartDate='"&SelectedMonth&"') AND (CustomerBillingGroupId IN (2, 3, 11))" 
Response.Write SelectedMonth
'Response.Write sql
r.open sql,c_SQL,3,3
IF r.recordcount>0 THEN
    CurrentInvoice=r("CurrentInvoice")
    for i=1 to r.recordcount
   %>
       <TR align="center">
        <TD><%=CurrentInvoice%></TD>
        <TD>
         <%

  %> 
```

输出为：0。

当我在我的 sql-server 中运行查询时，结果是一个 > 15,000 的数字。
如何修复我的代码以显示与我在数据库中看到的相同的输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T21:04:20.080

在您的 for 循环中，您似乎从 1 循环到 r.recordcount。这意味着未输入 for 循环，因此不显示任何内容。

您是否尝试过仅显示 CurrentInvoice 而没有 for 循环？然后应该只显示来自 SQL 的计数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T05:37:59.427

如上所述，您应该删除 for 循环 - 当您从表中选择聚合（）时，即使表为空，结果也将始终为一行。

可能是您刚刚在片段中排除了它，但是要显示一个表格，它需要正确的格式。看起来上面可能会打开并且永远不会关闭 . 第二个应该是一个？

我建议查看 HTML 输出的源代码，以便您可以看到我编写的所有代码。我怀疑你归因于​​上面的零可能来自其他地方，上面可能没有输出任何可见的东西（没有查看源）。

至于 SQL，仅供参考，您可以通过使用 count(1) 而不是 count(*) 看到性能改进 - 后者仍然让 SQL 检查所有列的元数据。

# windows - 无法使用 vncviewer 从 windows 连接到 fedora 服务器连接超时（10060）

> ID：14092051
> 
> 赞同：-1
> 
> 时间：2012-12-30T15:44:35.720
> 
> 标签：windows, fedora, vnc-viewer

我有一台运行 fedora17 的 Linux 服务器。我已经在这台机器上安装了 vnc 服务器。我正在尝试通过 vncviewer 从 Windows 连接到此服务器。但我收到以下错误消息::

连接超时（10060）

请帮我解决这个问题...

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T15:58:03.467

检查您使用的端口是否在您的服务器上打开（例如使用[此网站](http://www.yougetsignal.com/tools/open-ports/)）。VNC 的默认端口是 5900。

如果不是，请检查所有防火墙并确保正确转发端口。

如果它已打开，请尝试在查看器中将 :5900 添加到您的服务器地址。

# javascript - 如何在文本字段中设置焦点

> ID：14092055
> 
> 赞同：1
> 
> 时间：2012-12-30T15:44:59.163
> 
> 标签：javascript

我有一个注册表单。我想在客户端本身实现一些验证。我正在使用按钮提交表单。

```
<button onclick="check_fields();"></button>

 function check_fields() {          
       if(document.contact_form.name.value=='')                                                     
           document.contact_form.name.focus();
       else 
           document.getElementById("contact_form").submit();    
   } 
```

焦点没有发生，而是表单成功提交。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T15:57:01.340

### 最好的方法是使用`id`

说，你有这样定义的文本字段：

```
<input type="text" name="contact" id="contact" /> 
```

在您的 JavaScript 中，最好采用这种方式：

```
document.getElementById("contact").focus(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T15:53:27.530

因为`document.contact_form.name`可能不是您的文本字段。您的输入字段的名称属性是什么？

如果它的名字是例如 myfield，你应该使用：

```
if(document.contact_form.myfield.value === '') {
   document.contact_form.myfield.focus();
} else { ... } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T16:12:15.293

如果您正确设置了 html 部分，它应该可以工作。如果不是，您应该在开发者控制台（在 chrome 或 firefox 中）中看到 javascript 异常。

请注意，您以两种方式访问​​表单，一种`document.contact_form`建议您使用 name="contact_form"，另一种`document.getElementById("contact_form")`建议您使用 id="contact_form"，您是否在 html 中设置了两种方式？IE。是否为表单元素设置了名称和 ID？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T16:12:49.850

您好，您似乎正试图将焦点转移到验证错误上的表单元素上。我建议您将控制权转移到作为“表单”元素一部分的输入元素。

此外，您还可以验证表单的“onsubmit”事件的输入，而不是单击按钮。例如：

```
<form name="myForm" onsubmit="return validate();"> </form>

//validate function on validation failure returns false else true.
// if validate returns false the browser wouldn't submit the form. 
```

您可以使用以下代码片段来关注您选择的元素

```
document.getElementById("elementId").focus(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-23T17:31:31.523

我有这个，希望对你有所帮助，我在 JavaScript 中使用 focus() 来提示或设置焦点，如果我在不提供任何值的情况下单击保存或输入按钮，则会先触发警报，然后当你单击确定，焦点将出现在相应的文本字段中：

```
<script type="text/javascript">
         function validate() /* Validate the if the user leave any field empty. */
         {
             var a = document.getElementById("userid");
             var b = document.getElementById("passwrd");
             var c = document.getElementById("fname");
             var d = document.getElementById("lname");
             var e = document.getElementById("email");
             var f = document.getElementById("phnno");
             var g = document.getElementById("cellphone");
             var h = document.getElementById("fax");

             var valid = true;
             if(a.value.length<=0) {
            	 a.focus();
                 alert("Don't leave 'USER NAME' field empty!");
                 valid = false;
             }
             else if(b.value.length<=0){
            	 b.focus();
                 alert("Don't leave 'PASSWORD' field empty!");
                 valid = false;
             }
             else if(c.value.length<=0){
            	 c.focus();
                 alert("Don't leave 'FIRST NAME' field empty!");
                 valid = false;
             }
             else if(d.value.length<=0){
            	 d.focus();
                 alert("Don't leave 'LAST NAME' field empty!");
                 valid = false;
             }
             else if(e.value.length<=0){
            	 e.focus();
                 alert("Don't leave 'USER EMAIL' field empty!");
                 valid = false;
             }
             else if(f.value.length<=0){
            	 f.focus();
                 alert("Don't leave 'PHONE NUMBER' field empty!");
                 valid = false;
             }
             else if(g.value.length<=0){
            	 g.focus();
                 alert("Don't leave 'CELLPHONE NUMBER' field empty!");
                 valid = false;
             }
             else if(h.value.length<=0){
            	 h.focus();
                 alert("Don't leave 'FAX NUMBER' field empty!");
                 valid = false;
             }

         return valid;
         };

     </script
```

```
<s:form action="userAction_createUser" method="get"  name = "userForm" accept-charset="utf-8" onsubmit="return validate();">

				        <!-- Display the values in the application -->
                        <table class="createUserT">
							<s:textfield name="user.userid" id="userid" cssClass="tb5" label="User Name" /> 
							<s:textfield name="user.passwrd" id="passwrd" cssClass="tb5" label="Password" type="password"/>
							<%-- <s:textfield name="user.passwrd" cssClass="tb5" label="passwrd" type="password"/> --%>
						</table>
						<table class="createUserT">
						    <s:textfield name="user.fname" id="fname" cssClass="tb5" label="First Name"/>
						    <s:textfield name="user.lname" id="lname" cssClass="tb5" label="Last Name"/> 
						</table>
						<table class="createUserT">
							<s:textfield name="user.email" id="email" cssClass="tb5" label="User Email" type="email"/>
                            <s:textfield name="user.phnno" id="phnno" cssClass="tb5" label="Phone Number"/>
						</table>
						<table class="createUserT">
                            <s:textfield name="user.cellphone" id="cellphone" cssClass="tb5" label="Cellphone Number"/>
                            <s:textfield name="user.fax" id="fax" cssClass="tb5" label="Fax Number"/>
						</table>
```

# asp.net-mvc-4 - 帐户模型“移动模板”不同于“互联网模板”

> ID：14092057
> 
> 赞同：1
> 
> 时间：2012-12-30T15:45:07.170
> 
> 标签：asp.net-mvc-4

用标准的MVC 4“互联网模板”做了一个门户，现在想公开一些关于移动设备的信息。

使用标准的“移动模板”，帐户模型不同于“互联网模板”。

映射到同一模型的最简单方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T17:15:06.947

您需要（登录）使用“互联网模板”进行一些小改动：

使用 WebSecurity 进行登录

```
 [AllowAnonymous]
    [HttpPost]
    public ActionResult Login(LoginModel model, string returnUrl)
    {
        if (ModelState.IsValid && WebSecurity.Login(model.UserName, model.Password, persistCookie: model.RememberMe))
        {
            return RedirectToLocal(returnUrl);
        } 
```

添加您的 RedirectToLocal()

添加网络矩阵。参考 WebMatrix.Data 和 WebMatrix.WebData。对于这两个 Dll，更改属性窗口中的属性并设置 Copy local True。接下来使用它：

```
using WebMatrix.WebData; 
```

编辑您的 web.config 并更改成员资格 en roleManager 的行

```
<membership defaultProvider="SimpleMembershipProvider">
  <providers>
    <add name="SimpleMembershipProvider" type="WebMatrix.WebData.SimpleMembershipProvider, WebMatrix.WebData" />
  </providers>
</membership>
<roleManager defaultProvider="SimpleRoleProvider">
  <providers>
    <add name="SimpleRoleProvider" type="WebMatrix.WebData.SimpleRoleProvider, WebMatrix.WebData"/>
  </providers>
</roleManager> 
```

初始化数据库连接：

```
WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId", "UserName", autoCreateTables: true); 
```

# c++ - 漂亮的打印类型和类模板及其所有模板参数

> ID：14092058
> 
> 赞同：12
> 
> 时间：2012-12-30T15:45:15.160
> 
> 标签：c++, templates, c++11, pretty-print, variadic-templates

由于`typeid(T).name()`不返回人类可以理解的类型名称，因此如果我们想将模板参数的名称打印到某个类模板，它对我们没有多大帮助，尤其是在我们调试时。我们经常想在调试时这样写：

```
print<Args...>(cout); //dump the names of all types to stdout! 
```

所以我正在编写漂亮的打印实用程序，它给了我类模板的名称。好吧，通过一些示例用法更容易理解它：

```
print<int>(cout);               //prints int
print<int, double, char>(cout); //prints int, double, char
print<std::string>(cout);       //prints std::basic_string<char,  .. etc>
print<std::wstring>(cout);      //prints std::basic_string<wchar_t, .. etc>
print<X<int,Y<int>>>(cout);     //prints X<int, Y<int>> 
```

在内部，我正在使用一个名为的类模板，当我将它作为模板参数传递给它时，`template_name`它会返回我。以下是每个用户类模板部分专用的方法。`"Y"``Y<int>`

```
#define DEFINE_TEMPLATE_NAME(template_type) \
template<typename ... Ts>\
struct template_name<template_type<Ts...>>\
{\
    static const char* name()\
    {\
        return #template_type;\
    }\
}; 
```

并且用户需要使用这个宏来注册他的模板类：

```
DEFINE_TEMPLATE_NAME(std::basic_string);
DEFINE_TEMPLATE_NAME(std::vector);
DEFINE_TEMPLATE_NAME(X); //X is a class template
DEFINE_TEMPLATE_NAME(Y); //Y is a class template 
```

之所以有效，是因为特化是仅*类型*`template_name<template_type<Ts...>>`的可变类模板，这意味着**只要**所有模板参数都是*types*，它就会返回类模板的名称。它还能够打印函数类型和成员函数类型：

 ****```
typedef void fun(int,int);

//lets use snl::name() which returns name instead of printing!
std::cout << snl::name<fun>();    //prints : void(int,int)
std::cout << snl::name<fun*>();   //prints : void(*)(int,int) 
```

请[在此处查看工作代码](http://stacked-crooked.com/view?id=8312330dc6c83bdc6d08e97feec0db09)以及其他详细信息。到目前为止效果很好。

但现在我正在对此进行改进，并希望添加对非类型模板参数和*混合*模板参数的支持：

```
template<int...>
struct Z{};

//non-type template arguments : 1,2,3
snd::print<Z<1,2,3>>(cout);  //should print Z<1,2,3>

//mixed template arguments : int, 100
snd::print<std::array<int,100>>(cout);  //should print std::array<int,100> 
```

我该怎么做？一般如何获取此类模板的名称及其参数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-30T17:33:28.350

对不起，这是一个“否定答案”（我赞成你的问题），但恐怕你不能这样做。即使只考虑接受非类型参数的同构列表（例如`template<int, int>`，`template<char, char, char>`等）的模板类，您也需要这种特化：

```
template<typename T>
struct single_type
{
    // ...
};

template<typename U, template<U...> class C, U... Us>
struct single_type<C<Us...>>
{
    // ...
}; 
```

这种特殊化是合法的，但没有用，因为`U`永远无法推断出参数类型。`int...`您可以为最常见类型（ ,等）的统一文字列表定义专门的特化`char...`，但仍然不可能涵盖异构类型的序列，更不用说混合参数的序列了。

恐怕我们必须等待 C++ 支持反射才能实现您想要的。****

# android - Android 文本对齐 - 像素完美

> ID：14092061
> 
> 赞同：4
> 
> 时间：2012-12-30T15:45:56.093
> 
> 标签：android, android-layout, textview

在下面的屏幕截图中，我试图让蓝色框中的文本居中对齐。它太低了，需要提升一两个像素。我一直在玩填充，但它似乎没有任何效果。

![在此处输入图像描述](../Images/cda48d54327f1493437cc8af00d349e6.png)

布局 XML 在这里：

```
<RelativeLayout  xmlns:tools="http://schemas.android.com/tools"
android:orientation="horizontal"
android:layout_width="match_parent" 
android:layout_height="match_parent" 
android:layout_marginRight="5dp"
xmlns:android="http://schemas.android.com/apk/res/android">

        <TextView android:id="@+id/tvName" 
        android:layout_width="60dp" 
        android:layout_height="20dp" 
        android:layout_marginLeft="10dp" 
        android:layout_marginRight="10dp" 
        android:layout_marginTop="3dp" 
        android:background="@drawable/rectanglesegment" 
        android:gravity="center"
        android:paddingBottom="2dp" 
        android:text="XXX" android:textSize="16sp" 
        android:textAppearance="?android:attr/textAppearanceMedium"/> 
```

有什么建议么？

在@Snicolas 的反馈之后，我现在有了以下信息：

![在此处输入图像描述](../Images/ce6a15eb977970fd58e4559c4b00b4f2.png)

有了这个布局

```
<TextView android:id="@+id/tvName" 
android:layout_width="60dp" 
android:layout_height="fill_parent" 
android:layout_marginLeft="10dp" 
android:layout_marginRight="10dp" 
android:layout_marginTop="2dp"
android:layout_marginBottom="2dp"
android:background="@drawable/rectanglesegment" 
android:gravity="center"
android:text="abv" android:textSize="16sp" 
android:textAppearance="?android:attr/textAppearanceMedium"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T15:59:30.830

看起来顶部的额外空间只是[字体填充](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3aincludeFontPadding)（用于重音等）。尝试这个：

```
<TextView
    ...
    android:includeFontPadding="false"
/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T15:50:43.677

玩[`android:lineSpacingExtra`](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3alineSpacingExtra)or[`android:lineSpacingMultiplier`](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3alineSpacingMultiplier)怎么样？这些 XML 属性调用[`setLineSpacing()`](http://developer.android.com/reference/android/widget/TextView.html#setLineSpacing%28float,%20float%29).

> `public void setLineSpacing (float add, float mult)`
> 
> 设置此 TextView 的行距。每条线的高度都会乘以`mult`并`add`添加到它上面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T15:51:56.550

您应该查看背景图像 - rectanglesegment。它可能是 9 块图像，需要调整。

# asp.net - 回发后如何将文件上传保存到视图状态？

> ID：14092064
> 
> 赞同：1
> 
> 时间：2012-12-30T15:46:13.110
> 
> 标签：asp.net

我在页面上有一个 FileUpload 和多控件。除 FileUpload 之外，所有控件都位于更新面板中。

回发后，我将文件上传保存在视图状态中。

```
private FileUpload Files
{
    get { return (FileUpload)ViewState["Files"]; }
    set {
        ViewState["Files"] = value;
    }
}

.
.
.
if (ImageFileUpload.HasFile)
 {
    Files = ImageFileUpload;
 } 
```

但我得到错误

> 在程序集“System.Web，Version=4.0.0.0，Culture=neutral，PublicKeyToken=b03f5f7f11d50a3a”中键入“System.Web.UI.WebControls.FileUpload”未标记为可序列化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T15:54:57.673

简短的回答是 - 这无法完成......
当您收到带有 FileUpload 的回发时，您***必须***在那时保存它（或做任何您想做的事情）。您***不能***为以下回发保留流。

你*可以*做的是：

1.  将文件保存到服务器。
2.  将文件名添加到 ViewState，以便您以后可以在本地访问该文件。

换句话说，是这样的：

```
string filename;
......
// Save file to disk
fileUpload1.SaveAs(filename);
// Keep path to file in ViewState
ViewState["FileLocation"] = filename; 
```

# django - django 中的 django NoReverseMatch 异常

> ID：14092065
> 
> 赞同：3
> 
> 时间：2012-12-30T15:46:16.610
> 
> 标签：django

我已经尝试了这个网站上的许多解决方案来解决这个问题，但我仍然得到错误。在这里，我放置了所有需要的信息：

视图.py：

```
def about(request):
    return render_to_response('homepage/about.html') 
```

网址.py：

```
urlpatterns = patterns('blog.apps.homepage.views',

 url(r'^$', 'index', name="homepage_index"),
 url(r'^about/$', 'about', name="homepage_about"),
 url(r'^contact/$', 'contact', name="homepage_contact"),
 url(r'^archive/$', 'archive', name="homepage_archive"),
) 
```

全局 urls.py：

```
(r'^$',include('blog.apps.homepage.urls')), 
```

全局设置.py：

```
ROOT_URLCONF = 'blog.urls' 
```

树：

```
templates/
├── base.html
└── homepage
    ├── about.html
    ├── archive.html
    ├── contact.html
    └── index.html 
```

索引.html：

```
{% extends "base.html" %}
{% load url from future %}

{% block title %}
 Index Page
{% endblock %}

{% block navi %}
<a href="{% url 'homepage_index' %}">home</a> - 
<a href="{% url 'homepage_about' %}">about</a> - 
<a href="{% url 'homepage_contact' %}">contact</a> - 
<a href="{% url 'homepage_archive' %}">archive</a>
{% endblock %}

{% block content %}

    <h3>Entries:</h3>

    {%for e in entries %}
        <div>{{e.title}} - {{e.created}}</div>
        <div>{{e.text}}</div>
        <br/>
    {% endfor %}

{% endblock %}

{%block footer %}
2012 - MyBlog
{% endblock %} 
```

错误：

> 未找到带有参数“()”和关键字参数“{}”的“homepage_about”的反向操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T18:06:56.860

尝试改变

```
(r'^$', include('blog.apps.homepage.urls')) 
```

到

```
(r'', include('blog.apps.homepage.urls')) 
```

原因是`$`符号（用于匹配字符串的结尾），这意味着之后不应该有任何东西。但是由于您包含了网址，所以`$`不应该在那里。

# ruby - 文件中的匹配信息

> ID：14092066
> 
> 赞同：1
> 
> 时间：2012-12-30T15:46:20.323
> 
> 标签：ruby

我想编写一些代码来执行以下操作：

*   如果输入文件（例如：）`"file.out"`包含类似`"n failures, n errors"`、、`"n failures, 0 errors"`或`"0 failures, n errors"`（其中`n >= 1`）的信息，则`puts "script failed"`（因为显示失败或错误）。

*   如果输入文件包含 info: `"0 failures, 0 errors"`，则`puts "script passed"`（因为没有显示失败和错误）。

我想我需要写下类似下面的东西（但它不能像我期望的那样正常工作）：

```
if open("#{file}.out").grep(/[1-9][0-9]* failures|[1-9][0-9]* errors/).length > 0
   puts "script passed"
else
   puts "script failed"
end 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T15:58:30.083

```
def check_script file
  open(file) do |io|
    io.read =~ /(\d+)\s+failures,\s+(\d+)\s+errors/
    puts "script #{$1 == "0" && $2 == "0" ? "passed" : "failed"}"
  end
end 
```

用法：

```
check_script("file.out") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T16:19:24.063

假设文件包含

```
info: 0 failures, 0 errors 
```

代码将是

```
(File.open("#{file}.out").read).scan(/info: ([0-9]+) failures, ([0-9]+) errors/) do |failures, errors|
    puts (failures.to_i > 0 || errors.to_i > 0) ? "script failed" : "script passed"
end 
```

# c - 自下而上的集合生成和排序

> ID：14092070
> 
> 赞同：11
> 
> 时间：2012-12-30T15:46:39.590
> 
> 标签：c, arrays, algorithm, cuda, dynamic-programming

**关于您知道的任何可能相关的数值方法的任何方法，请在此处发布！**

## 背景

我对每个集合都有一个数组，`values`每个值的索引对应于该值所绑定的集合，因此我将一个集合表示为一个整数，其中元素表示位位置，例如其中包含元素一的集合是表示为. `...001`_`1``LSB`

所以集合只是一个索引，从不存储，它是动态生成的，它是指向数组中表示集合值的索引的键。

我所做的是给定一个集合，是任何成对不相交子集的总和值大于该集合的值。例如，如果 set`0111`的值为 3，其中两个子集的值为`0100 = 2`和`0011 = 2`，那么这种拆分更有利。我对集合的所有子集都这样做。

给定三个代理，排序是集合数表示。

```
val[8] = {0,1,2,4,3,2,4,2} the values is not important, only how they are ordered
          0 0 0 0 1 1 1 1 MSB bit representation of the index
          0 0 1 1 0 0 1 1
          0 1 0 1 0 1 0 1 LSB 
```

111 的最佳分割是 011 和 100，总和为 7。因此，要获得仅包含第一个元素的集合的值，即 001，您将 val[1] 用于包含元素 1 和 3(101) 的集合，你把 val[5].

按基数分组时 val 数组的排序方式

```
val[8] = {0,1,2,3,4,2,4,2}
          0 0 0 1 0 1 1 1 MSB bit representation of the index
          0 0 1 0 1 0 1 1
          0 1 0 0 1 1 0 1 LSB 
```

在这里，您必须将索引转换为数组中的正确 bin，因此对于其中只有第三个元素的集合 (100)，val[translate(4)]，它看起来像这样。考虑大小> 2 ^ 25个元素的数组。在需要随机访问时查看[改进随机内存访问](https://stackoverflow.com/questions/13905645/improving-random-memory-access-when-random-access-is-needed)以进行进一步说明。

但是，这会导致内存中的高阶随机访问，即使我在基数之后对它们进行分组。目前按基数对它们进行分组，生成索引比在集合代表的数字之后排序它们要慢。

我使用按基数分组的集合生成索引的方法是在常量内存中使用帕斯卡三角形，如[确定两个整数之间的字典距离中的答案所述](https://stackoverflow.com/questions/13554747/determin-the-lexicographic-distance-between-two-integers)

## 当集合值按基数与四个代理进行排序和分组时所在的位置

```
n index 1  2  4  8     3  5  6  9  10 12    7  11 13 14    15
        -----------------------------------------------------
MSB     0  0  0  1  |  0  0  0  1  1  1  |  0  1  1  1  |  1
        0  0  1  0  |  0  1  1  0  0  1  |  1  0  1  1  |  1
        0  1  0  0  |  1  0  1  0  1  0  |  1  1  0  1  |  1
LSB     1  0  0  0  |  1  1  0  1  0  0  |  1  1  1  0  |  1 
```

n index 表示如果未按基数排序时它的索引。这只是为了显示每个集合的值所在的位置。

**整数集表示值数组中的索引，可以通过直接索引（我目前正在做的，提供随机访问）或通过从集合到索引的转换。**

## 这个想法

我没有将集合拆分为子集，而是自下而上生成集合。例如，我不会拆分`0111`到所有成对的不相交子集，而是在某个时候从集合中生成 if `{0100,0011},{0010,0101},{0001,0110}`。

## 它应该如何以及为什么起作用

假设我们要评估基数为 3 的集合的所有分裂，因此，集合`7,11,13,14`。由于拆分基数 3 的集合的唯一方法是拆分成基数 1 和 2 的集合，因此我们需要评估基数 1 和 2 的所有不相交子集的总和是否大于这些集合的并集。

所需内容的符号（可能有点缺陷）：

`|C|=n,∀ a,b : a ∪ b = C , a ∩ b ={Ø}, |a|+|b| = n`

因此，通过使用对每个线程的合并内存访问读取值，对于形成一组基数 n 的每个子集，检查它的值是否大于形成的集合，如果是，则更新该值。

简单的例子，如果`n = 2`那么你应该读入所有基数为 1 的值，并做这些集合的所有组合并相应地更新。这个例子很简单，因为所有集合都是不相交的：

```
pseudo code for 4 threads, input card1 is pointer to array of sets |s| =1
__shared__ int value[4];
tid = threadIdx.x;
value[tid] = card1[tid]; // coalesced memory access
int thvalue = value[tid]; // holds the value for the thread, to avoid bank conflict
int rvalue[blockDim.x/2]= 0; //holds the sum
int i = blockDim.x;
int x = 0;
//reduction loop that dont generate duplicate sets
for(;i>0;i>>=1) {
    if(tid < i) {
        x++;
        rvalue[x-1] = value[(tid+x)%blockDim.x] + thvalue; 
    }
}
for(i = 0; i < x; i++) {
    int index = getindex(tid,i,1); //gets the index for the set it generated, 1 represent the cardinality
    if(output[index] < rvalue[i])
        output[index] = rvalue[i];
} 
```

归约循环的迭代

```
Thread set specific for thread  first iteration second iteration 
0      0001                     0001 + 0010     0001 + 0100
1      0010                     0010 + 0100     0010 + 1000
2      0100                     0100 + 1000     none
3      1000                     1000 + 0001     none 
```

如您所见，它已获取形成基数 2 集的所有子集的所有值。

然而，问题是生成大于 2 的基数集更加棘手，因为并非所有集都是不相交的。例如 0001 和 0011 不是不相交的。

**请记住，我不会将集合存储在任何地方，只存储集合的值。**

## 最后

考虑到这一点，您将如何进行，创建一个在合并的内存中读取的算法，并从不相交的子集生成所有集合。在不检查子集是否不相交的情况下，它应该是完全确定的。

## 赏金

该算法应该是带有标记的不同步骤的描述文本，或者是伪代码。

应该用例子证明它是有效的。并不是说这个算法可以达到 n^32 组，所以它需要很好地扩展。

该算法允许被分配到两个或多个实例，例如，一个用于偶数，一个用于奇数。

我很乐意参考您使用的技术的来源。

该算法应使用尽可能少的分配和指令，并应避免任何分歧。但是，如果你认为你得到了一个——尽管你有很多这样的东西，试着发帖，我会对任何信息感到满意。

**如果它以另一种方式订购，但它仍然像我描述的那样工作，我敦促你把它贴在这里，任何帮助真的很有帮助**

**请问有什么不清楚的地方。**

## TL/DR 简单说明

`Z`我有一个带有值的数组，其中`i`的索引`Z[i]`表示一个整数集，具体取决于 的顺序`Z`，这些值按基数分组，并按二进制字典排列排序-> 集合值位于 1、2、4 的位置， 3,5,6,7 <- 所以我使用一个函数（我实现了这个函数）将索引转换为正确的索引。例如设置 3-> 索引 4。

通过将集合的值按基数分组，我想要的是查看是否有任何成对的不相交集合值大于它们形成的集合。

例如`|a| = 3, |b|+|c| =3, b ∩ c ={Ø}, |b| =1`，读取`X`type 的值的数量和 type 的值的`b`数量，找到`X`type`c`的所有不相交的子集（基数集 3）并得到它们的总和。继续，直到所有集合都“生成”`b``c``a`

## 以供参考

[基于汉明权重的索引](https://stackoverflow.com/questions/13542794/hamming-weight-based-indexing)

[确定两个整数之间的字典距离](https://stackoverflow.com/questions/13554747/determin-the-lexicographic-distance-between-two-integers)

[在需要随机访问时改进随机内存访问](https://stackoverflow.com/questions/13905645/improving-random-memory-access-when-random-access-is-needed)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T21:35:15.713

我不知道这是否对您有帮助，但我在*Hacker's Delight中发现了一个***无分支的 count-all-the-1-bits-in-a-word 函数**，它似乎有助于您确定基数一组：

 *```
int pop(unsigned int x) {
    x = x - ((x >> 1) & 0x55555555);
    x = (x & 0x33333333) + ((x >> 2) & 0x33333333);
    x = x + (x >> 8);
    x = x + (x >> 16);
    return x & 0x0000003F;
} 
```

在正文中，Warren 声称上述序列可以编译成少至 21 条指令。然而，在 i7 开发机器上使用 MSVC 2010，我检查了这个函数的反汇编，发现它在大约 22 条指令中进行实际计算，总共有 33 条指令（计算堆栈操作）。在现代 CPU 或 GPU 上，它应该非常快，因为它没有分支。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T01:43:27.833

## 尝试利用三元编号

对于术语，我称“值”您设置的估值函数和“目标”您的目标函数，它是每个二进制分区上值总和的最大值。

二进制数 B 每次分裂成两个不相交的部分 L 和 R，都可以用三进制数 C 表示，其中

```
B = L | R   (bitwise OR)
L ^ R = 0   (bitwise XOR)

C[i] = 0 means B[i] = 0 and L[i] = R[i] = 0
C[i] = 1 means B[i] = 1 and L[i] = 1
C[i] = 2 means B[i] = 2 and R[i] = 1 
```

然后“简单”地枚举从 1 到 3**n 的三进制数：例如 (n=3): 000, 001, 002, 010, 011, 012, 020, ...

好的，实际上，当您手头只有二进制时，*有效地计算三进制并不是一件容易的事。*但请耐心等待，我将在完成高级算法后解释这一点......

所以你按三进制计算，给定一个三进制数 C，你得到 L 和 R - 如何？我也会在下面解释，相信我:)

给定 L 和 R，您现在可以在 L 和 R 处查找您的估值并在 B 处更新目标：target[B] = max(val[L], val[R])。

好的，这就是高级算法。我无法在这么短的时间内证明这一点，但它似乎确实具有非常好的缓存位置属性。换句话说，value[L] 和 value[R] 将倾向于一次停留在少量缓存行中。此外，我认为并行化的最佳选择是拆分`i`为模 3 的值或模 9 的值等。

**二进制中的有效三进制计数**

我们如何有效地计算三元？尝试以下方法：以 4 为底数，然后跳过一些。

换句话说，一个三进制数字将由两位表示，我们将禁止这种组合`11`。

```
 repr | value
 0 0  | 0
 0 1  | 1
 1 0  | 2
 1 1  | *undefined* 
```

现在，我们如何有效地知道何时跳过？好吧，增量模式很容易弄清楚：

1 1 2 1 1 2 1 1 6 1 1 2 1 1 2 1 1 6 1 1 2 1 1 2 1 1 **22** 1 1 2 ...

我的建议是预先计算一大块大小为 3 的幂（例如 3 ** 7 = 2187）并偶尔计算 3 的 n 次方 [提示：它与 n 的立方体有关 ..] .

所以你从 00.00.00 开始。您添加 1 即 00.00.01。您添加 1 即 00.00.10。现在您必须添加 2 才能跳过 11 组合，剩下的就是 00.01.00。等等。

**如何从 C 中获得 L 和 R**

现在，在我们的四进制表示中的 C 实际上只是 L 和 R 交错的。为了有效地恢复 L 和 R，您可以检查[此 S/O 问题](https://stackoverflow.com/questions/4909263/how-to-efficiently-de-interleave-bits-inverse-morton)的答案或应用其他一些小技巧。

**事后诸葛亮**

总而言之，我不确定我们是否真的使用了 base 3 或 base 4。哦，好吧......

玩得开心，祝你好运！*

# php - 使用 Zend\Db 连接到数据库

> ID：14092071
> 
> 赞同：1
> 
> 时间：2012-12-30T15:46:46.190
> 
> 标签：php, zend-framework2

我正在尝试在我的应用程序中实现 Zend Db。

目前，我正在使用会话管理器。

Db 是这样启动的：

```
use Zend\Config\Config;
$config = new Zend\Config\Config(include ROOT . DS . 'config'  . DS . 'config.php');
$database = new Zend\Db\Adapter\Adapter($config->database->toArray()); 
```

虽然我的配置文件如下所示：

```
return array(
'sie_product_name'  => 'product name',
'salt' => 'salt',
'max_session_time' => '3600',
'database' => array(
    'driver' => 'MYSQLI',
    'params'  => array(
        'host'     => 'localhost',
        'username' => 'username',
        'password' => 'password',
        'dbname'   => 'dbname'
    )
)
); 
```

我正在尝试执行选择的地方：

```
$sql = new Sql($this->database);
$query = $sql->select();
$query->from('sessions');
$query->columns(array('sessionid'));
$query->where(array('sessionid' => $sessionId));

$stmt = $sql->prepareStatementForSqlObject($query);
$result = $stmt->execute(); 
```

我收到错误：

```
Connect Error: SQLSTATE[HY000] [1045] Access denied for user ''@'localhost' (using password: NO) 
```

酷，这是一个连接错误......但是连接在哪里丢失，或者我应该说，凭据在哪里丢失？让我们看看数据库对象...

```
Zend\Db\Adapter\Adapter Object
(
[driver:protected] => Zend\Db\Adapter\Driver\Mysqli\Mysqli Object
    (
        [connection:protected] => Zend\Db\Adapter\Driver\Mysqli\Connection Object
            (
                [driver:protected] => Zend\Db\Adapter\Driver\Mysqli\Mysqli Object
 *RECURSION*
                [connectionParameters:protected] => Array
                    (
                        [driver] => MYSQLI
                        [params] => Array
                            (
                                [host] => localhost
                                [username] => username
                                [password] => password
                                [dbname] => dbname
                            )

                    )

                [resource:protected] => mysqli Object
                    (
                        [affected_rows] => 
                        [client_info] => mysqlnd 5.0.10 - 20111026 - $Id: b0b3b15c693b7f6aeb3aa66b646fee339f175e39 $
                        [client_version] => 50010
                        [connect_errno] => 1045
                        [connect_error] => Access denied for user ''@'localhost' (using password: NO)
                        [errno] => 1045
                        [error] => Access denied for user ''@'localhost' (using password: NO)
                        [error_list] => 
                        [field_count] => 
                        [host_info] => 
                        [info] => 
                        [insert_id] => 
                        [server_info] => 
                        [server_version] => 
                        [stat] => 
                        [sqlstate] => 
                        [protocol_version] => 
                        [thread_id] => 
                        [warning_count] => 
                    )

                [inTransaction:protected] => 
            )

        [statementPrototype:protected] => Zend\Db\Adapter\Driver\Mysqli\Statement Object
            (
                [mysqli:protected] => 
                [driver:protected] => Zend\Db\Adapter\Driver\Mysqli\Mysqli Object
 *RECURSION*
                [sql:protected] => 
                [parameterContainer:protected] => 
                [resource:protected] => 
                [isPrepared:protected] => 
                [bufferResults:protected] => 
            )

        [resultPrototype:protected] => Zend\Db\Adapter\Driver\Mysqli\Result Object
            (
                [resource:protected] => 
                [isBuffered:protected] => 
                [position:protected] => 0
                [numberOfRows:protected] => -1
                [currentComplete:protected] => 
                [nextComplete:protected] => 
                [currentData:protected] => 
                [statementBindValues:protected] => Array
                    (
                        [keys] => 
                        [values] => Array
                            (
                            )

                    )

                [generatedValue:protected] => 
            )

        [options:protected] => Array
            (
                [buffer_results] => 
            )

    )

[platform:protected] => Zend\Db\Adapter\Platform\Mysql Object
    (
    )

[queryResultSetPrototype:protected] => Zend\Db\ResultSet\ResultSet Object
    (
        [allowedReturnTypes:protected] => Array
            (
                [0] => arrayobject
                [1] => array
            )

        [arrayObjectPrototype:protected] => ArrayObject Object
            (
                [storage:ArrayObject:private] => Array
                    (
                    )

            )

        [returnType:protected] => arrayobject
        [buffer:protected] => 
        [count:protected] => 
        [dataSource:protected] => 
        [fieldCount:protected] => 
        [position:protected] => 
    )

[lastPreparedStatement:protected] => 
) 
```

看起来正在设置连接参数 - 太棒了！但它仍然没有连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T17:17:51.953

在 ZF 2 中，您不需要名为 的键`params`：

[http://framework.zend.com/manual/2.0/en/modules/zend.db.adapter.html](http://framework.zend.com/manual/2.0/en/modules/zend.db.adapter.html)

```
$adapter = new Zend\Db\Adapter\Adapter(array(
    'driver'   => 'Mysqli',
    'database' => 'database',
    'username' => 'username',
    'password' => 'password'
)); 
```

# ruby-on-rails - Ruby on Rails：使用 Paperclip 在 RoR API 中处理图像

> ID：14092072
> 
> 赞同：0
> 
> 时间：2012-12-30T15:46:56.717
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我有一个用作后端的 Rails 应用程序。在我的应用程序中，我有一个使用回形针 gem 的图像上传字段。

它在网络视图中工作正常，但我需要从前端上传图像。我在 POSTMAN Client 中尝试通过以 JSON 格式提供图像路径，但它不起作用。

有人知道上传图片的格式吗？我需要在标题中指定什么吗？

* * *

### 我有的：

从 POSTMAN 客户端上传图片

发帖网址

```
http://localhost:3000/users.json   ---   POST 
```

使用的标头

```
Content-Type  ->  application/json 
```

原始数据

```
{
"image":"C://image/sample.jpg"
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T11:05:46.873

我还使用 rails 作为 iphone 应用程序的后端，现在我可以将图像从应用程序上传到 s3。查看以下链接，您会有所了解。

[http://brainbowapps.com/articles/2010/uploading-files-from-iphone-to-rails.html](http://brainbowapps.com/articles/2010/uploading-files-from-iphone-to-rails.html)

# git - 在部署时压缩和合并 css 和 js 文件

> ID：14092075
> 
> 赞同：1
> 
> 时间：2012-12-30T15:47:10.930
> 
> 标签：git, model-view-controller, deployment, compression, capistrano

站点上的每个控制器和操作都有自己的脚本（css 和 js）。部署后是否可以为每个控制器制作自定义脚本的快照？

例子：

`example.com/users/list`使用 2 个 js 和 1 个 css

`example.com/project/list`使用 5 个 js 和 2 个 css

部署后，应该是 4 个自定义快照（每个请求 2 个）

我正在使用：**Kohana、Capistrano、Git**

# php - 将项目包装在一个while循环中

> ID：14092078
> 
> 赞同：0
> 
> 时间：2012-12-30T15:48:23.770
> 
> 标签：php, wordpress, loops, while-loop

我想在每 2 个项目之后的 while 循环中添加一个 div 标签。

我正在尝试使用以下代码，但它`<div></div>`在最后添加了一个额外的空白。

```
$i = 0;
while ( have_posts() ) : the_post();
    $i++;   
    if ($i == 1){$output .= "<div>";}

    if ($i % 2 == 0){$output .= "</div><div>";}

    endwhile;
if ($i % 2 != 0){$output .= "</div>";} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T16:04:29.947

`</div><div>`尝试在下一次迭代开始时添加您的附加内容：

```
$i = 0;
$div = '';
while ( have_posts() ) : the_post();
    $i++;
    $output .= $div;
    if ($i == 1){$output .= "<div>";}

    if ($i % 2 == 0){$div = "</div><div>";}
    else {$div = '';)

    endwhile;
if ($i % 2 != 0){$output .= "</div>";} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T16:04:39.407

您需要更多地包装逻辑。因为如果您有 0 个元素，则不需要任何包装。如果您有偶数元素，则最后不需要额外的包装。

我在这里添加了两个新功能，我认为它们的作用很清楚：`div_open()`和`div_close()`. 然后，您的伪代码的以下修改应概述其工作原理：

```
if ( have_posts(  ) )
{

    div_open(  );

    for ($counter = 0; have_posts(  ); $counter++)
    {

        the_post(  );

        ...

        if ( $counter && have_posts(  ) && $counter % 2 == 0 )
        {

            div_close(  );

            div_open(  );

        }

    }

     div_close(  );

} 
```

# iphone - ARC 发布子类 NSObjects，但不发布自定义 NSObjects

> ID：14092080
> 
> 赞同：0
> 
> 时间：2012-12-30T15:48:47.217
> 
> 标签：iphone, objective-c, ios, automatic-ref-counting

在一个小型 RTS 项目中，我有一个按钮列表，每个按钮都有一个分配给它们的建筑对象。有些建筑物非常通用，但有些则非常特殊，因此我将其中一些建筑物作为子类。

当我制作一个按钮列表时，它们每个都有一个 PEHouse 对象，一切正常。

但是一旦其中一个 PEHouse 是子类的 PEHouse，它就会立即发布，我不明白为什么。

按钮具有以下属性：

```
@property (nonatomic, strong) PEHouse *linkedHouse; 
```

房子有这些价值观：

```
@interface PEHouse : NSObject {
    NSString *title;
}
@property (nonatomic) BOOL is_locked; 
```

我的塔有这个设置：

```
#import "PEHouse.h"

@interface PETower : PEHouse <NSObject>

-(void)secondAction;
+ (PETower*)createTower;

@end 
```

当我生成这样的常规对象列表时：

```
DLog(@"Building menu");
    if ([key isEqualToString:@"button_income"]) {
        [GMBuildMenu buttonFromBuilding:[PEHouse newSawmill] withIndex:1 inDict:dict];
        [GMBuildMenu buttonFromBuilding:[PEHouse newQuarry] withIndex:2 inDict:dict];
        [GMBuildMenu buttonFromBuilding:[PEHouse newIronMine] withIndex:3 inDict:dict];
        [GMBuildMenu buttonFromBuilding:[PEHouse newMiscShop] withIndex:4 inDict:dict];
        [GMBuildMenu buttonFromBuilding:[PEHouse newWeaponsShop] withIndex:5 inDict:dict];
        [GMBuildMenu buttonFromBuilding:[PEHouse newArmorShop] withIndex:6 inDict:dict];
        [GMBuildMenu buttonFromBuilding:[PEHouse newBazaar] withIndex:7 inDict:dict];
        [GMBuildMenu buttonFromBuilding:[PEHouse newTreasury] withIndex:8 inDict:dict];
        return YES;
    } 
```

一切正常。当我只生成一个这样的子集构建按钮时：

```
 if ([key isEqualToString:@"button_military"]) {
        [GMBuildMenu buttonFromBuilding:[PEHouse newTower] withIndex:1 inDict:dict];
} 
```

该对象在...后立即释放

有谁知道为什么会发生这种差异？

**更新**

代码如下所示：

```
+(OpenGLButton*)buttonFromBuilding:(PEHouse*)house withIndex:(int)index inDict:(NSMutableDictionary*)dict {
    OpenGLButton *new = [GMButtonMenu addButtonToMenu:dict withLabel:house.button_art andShowname:house.title];
    new.linkedHouse = house;
    CGRect buttonFrame = CGRectMake(20, ((30)*index), (28*[GMButtonMenu globalGUIScale]), (28*[GMButtonMenu globalGUIScale]));
    new.location = buttonFrame;
    new.index = index;
    new.details = house.desc;
    return new;
} 
```

在 PEHouse 我们发现：

```
+ (PETower *)newTower {
    PETower *new = [PETower createTower];
    return new;
}

+ (PEHouse *)newSawmill {
    PEHouse *new = [PEHouse createDefault];
    new.title = @"Sawmill";

    new.is_large = YES;
    return new;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T16:03:07.957

首先，[GMBuildMenu buttonFromBuilding:...] 类方法的签名是什么？根据您的代码，它看起来像：

```
+(void)buttonFromBuilding:(PEHouse *)house withIndex:(int)index inDict:(NSDictionary *)dict 
```

但是，按照惯例，这样命名的方法应该返回一个按钮：

```
+(UIButton *)buttonFromBuilding:(PEHouse *)house withIndex:(int)index inDict:(NSDictionary *)dict 
```

知道你的方法对 PEHouse 对象做了什么会很有趣。它强烈拥有它吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T16:12:56.900

我认为这是 ARC 遵循的惯例的问题。

ARC 所做的是释放来自`new`、`alloc`、或的所有内容`retain`，并将工厂方法视为自动发布的。`copy``mutableCopy`

我怀疑让一个类方法返回一个`OpenGLButton`实例会使 ARC 在你的方法末尾插入一个自动释放调用，做类似的事情

```
+(OpenGLButton*)buttonFromBuilding:(PEHouse*)house withIndex:(int)index inDict:(NSMutableDictionary*)dict {
    OpenGLButton *new = [GMButtonMenu addButtonToMenu:dict withLabel:house.button_art andShowname:house.title];
    // ...
    return [new autorelease];
} 
```

然后，由于您没有将返回值分配给任何东西，因此一旦超出范围，它就会被释放。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T22:28:43.610

`+[GMBuildMenu buttonFromBuilding:withIndex:inDict:]`返回新创建的按钮，但您不会将该引用存储在任何地方。由于您说您的大多数按钮不会立即被释放，我推断该方法必须在某处存储对新创建按钮的引用。

查看方法，我看到了这一行：

```
OpenGLButton *new = [GMButtonMenu addButtonToMenu:dict withLabel:house.button_art andShowname:house.title]; 
```

其他行都没有`buttonFromBuilding:withIndex:inDict:`存储`new`在任何地方，所以我推断`+[GMButtonMenu addButtonToMenu:withLabel:andShowname:]`在某处存储了对新按钮的引用。

我猜它将按钮存储在第一个参数中。您正在通过`dict`该论点。

调查塔按钮意外释放的这些可能原因：

1.  `dict`调用时为 nil `[GMBuildMenu buttonFromBuilding:[PEHouse newTower] withIndex:1 inDict:dict]`。

2.  `dict`不是 nil，而是在`[GMBuildMenu buttonFromBuilding:[PEHouse newTower] withIndex:1 inDict:dict]`返回后不久被释放。

# c# - MVC 3 简单继承

> ID：14092081
> 
> 赞同：0
> 
> 时间：2012-12-30T15:48:53.507
> 
> 标签：c#, asp.net-mvc, inheritance

我遇到过一种情况，答案应该非常直截了当，但它让我望而却步。

```
public class Note
{

    #region Properties

    public int Id { get; set; }
    public int ClientId { get; set; }
    public int CandidateId { get; set; }
    public int TypeId { get; set; }
    public DateTime DateCreated { get; set; }
    public string UserId { get; set; }
    public string UserName { get; set; }
    public string Message { get; set; }

    #endregion

    #region Methods

    public void Save()
    {

    }

    #endregion

}

public class History : Note
{
} 
```

如您所见，History 继承了 Note。它们完全相同，两者之间的唯一区别是类型 Id。

从数据库获取数据时我有这个功能

```
 public static Note Parse(SqlDataReader dr)
    {
        int TypeId = Convert.ToInt32(dr["TypeId"]);
        Note Note;

        if (TypeId == 1)
            Note = new Note();
        else
            Note = new History();

        Note.Id = Convert.ToInt32(dr["Id"]);
        Note.TypeId = TypeId;
        if (dr["ClientId"] != DBNull.Value) Note.ClientId = Convert.ToInt32(dr["ClientId"]);
        if (dr["CandidateId"] != DBNull.Value) Note.CandidateId = Convert.ToInt32(dr["CandidateId"]);
        Note.DateCreated = Convert.ToDateTime(dr["DateCreated"]);

        Note.UserId = Convert.ToString(dr["UserId"]);
        Note.UserName = Convert.ToString(dr["UserName"]);
        Note.Message = Convert.ToString(dr["Message"]);

        return Note;
    } 
```

然后在我的 MVC 页面上我有这个：

```
<ol id="interview-comments">                                
@foreach (Note Note in Model.Notes().OfType<Note>())
{  
}
</ol>

<ol id="history-comments">                             
@foreach (History Note in Model.Notes().OfType<History>())
{  
}
</ol> 
```

我的问题很简单。这是正确的方法吗？

/r3plica

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T15:54:16.593

我可能没有完整的图片，但我会考虑只使用一个类 - `Note`。而是在该类上有一个属性 - `IsHistoric`。然后根据属性而不是类型进行检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T15:54:24.393

由于 a`History`是 a `Note`，您`Model.Notes().OfType<Note>()`还将包括`History`实例 - 这是故意的吗？

您可能只想使用一个实体并添加一个标志是否是注释；这将使其更清晰并避免继承问题。

或者您可以使用通用接口或抽象基类，而不是让这些类从另一个继承，而是从同一个基类继承，这也可以解决`OfType`问题。

或者如果继承真的正确，那么像这样过滤：`Model.Notes().Where(n => n.GetType()=typeof(Note))`，或者只是`Model.Notes().Where(n => !(n is History))`- 有很多方法可以到达罗马。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T16:44:53.927

如果这是全貌，我不会在这里使用继承。您说 Note 和 History 项目有不同的 TypeId:s。

然后我会做以下事情：

```
@foreach(var item in Model.Notes().Where(x => x.TypeId == Note.NoteTypeId))
{
}

//and

@foreach(var item in Model.Notes().Where(x => x.TypeId == Note.HistoryTypeId))
{
}

public class Note
{
  public static int HistoryTypeId = 1;
  public static int NoteTypeId = 0;
  /* ... the rest of the implementation */
} 
```

您还可以将 TypeId 更改为枚举并“隐藏”一些幻数

编辑：根据使用情况，您还可以将历史笔记的检查作为 Note 上的属性来实现。

```
public class Note
{
  /* ... other properties ... */
  public bool IsHistoric { get { return this.TypeId != 1; } }
} 
```

然后检查很简单

```
@foreach(var note in Model.Notes().Where(x => x.IsHistoric))
{
}

// and

@foreach(var note in Model.Notes().Where(x => !x.IsHistoric())
{
} 
```

# android - 减慢滑动抽屉关闭动画

> ID：14092086
> 
> 赞同：0
> 
> 时间：2012-12-30T15:49:22.037
> 
> 标签：android, animation, slidingdrawer, sliding

我在我的应用程序中使用了 SlidingDrawer。我的问题是，当我使用`drawer.animateClose()`抽屉时，抽屉关闭得很快。我怎样才能放慢速度？谢谢！

# android - 有没有办法在 Android JellyBean TimePickerDialog 中使用取消？

> ID：14092093
> 
> 赞同：6
> 
> 时间：2012-12-30T15:50:57.063
> 
> 标签：android, android-4.2-jelly-bean, timepicker

据我所知，Jelly Beans 之前的版本在使用**TimePickerDialog**`Set`时具有和按钮。果冻豆只有按钮。`Cancel`**`Done`**

 **我可以离开`Done`按钮，并可以通过在对话框外部单击来关闭对话框，但`onTimeSetListener`如果按下`Done`或在对话框之外，我会被调用。

所以我发现[了这个 stackoverflow 问题，它描述了使用](https://stackoverflow.com/questions/11444238/jelly-bean-datepickerdialog-is-there-a-way-to-cancel)**DatePickerDialog**时存在一个错误。要使用**DatePickerDialog**解决问题，在初始化时我必须设置`onDateSetListener`to `null`，并实现我自己的按钮来处理`BUTTON_POSITIVE`(Set) 和`BUTTON_NEGATIVE`(Cancel) onClick 方法。这很好，因为当按钮`Set` 被调用时，我可以像这样访问**DatePicker**值

```
int yearPicked = dateDlg.getDatePicker().getYear();
int monthPicked = dateDlg.getDatePicker().getMonth();
int dayPicked = dateDlg.getDatePicker().getDayOfMonth(); 
```

所以没有必要使用`onDateSetListener`，但如果我愿意，它会在按下 Set 或 Cancel 时再次调用。

我尝试以相同的方式使用**TimePickerDialog**，但问题是，在`BUTTON_POSITIVE`onClick 方法中，我无法像以前一样访问小时和分钟值，因为**TimePickerDialog**不提供**TimePicker**，因为**DatePickerDialog**提供了**DatePicker**。如果我再次使用`onTimeSetListener`，它会通过按下任何东西来调用。

```
Calendar cal = Calendar.getInstance();

int hour = cal.get(Calendar.HOUR_OF_DAY);
int min = cal.get(Calendar.MINUTE);

final TimePickerDialog timeDlg = new TimePickerDialog(PreferencesActivity.this, null, hour, min, true);

// Make the Set button
timeDlg.setButton(DialogInterface.BUTTON_POSITIVE, "Set", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int which) {
        if (which == DialogInterface.BUTTON_POSITIVE) {
            // CANNOT ACCES THE VALUES
            Toast.makeText(PreferencesActivity.this, "Set", Toast.LENGTH_SHORT).show();
        }
    }
});

// Set the Cancel button
timeDlg.setButton(DialogInterface.BUTTON_NEGATIVE, "Cancel", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int which) {
        if (which == DialogInterface.BUTTON_NEGATIVE) {
            Toast.makeText(PreferencesActivity.this, "Cancel", Toast.LENGTH_SHORT).show();
        }
    }
});

timeDlg.show(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-31T05:45:32.097

根据您的评论，使用布尔值保护回调应该很容易，`OnTimeSetListener`以防止您的逻辑在单击“取消”的情况下运行。

我快速使用了您的代码，以下似乎工作正常：

```
private boolean mIgnoreTimeSet = false;

final TimePickerDialog timeDlg = new TimePickerDialog(PreferencesActivity.this, PreferencesActivity.this, hour, min, true);

// Make the Set button
timeDlg.setButton(DialogInterface.BUTTON_POSITIVE, "Set", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int which) {
        mIgnoreTimeSet = false;
        // only manually invoke OnTimeSetListener (through the dialog) on pre-ICS devices
        if (Build.VERSION.SDK_INT < Build.VERSION_CODES.ICE_CREAM_SANDWICH) timeDlg.onClick(dialog, which);
        Toast.makeText(getApplicationContext(), "Set", Toast.LENGTH_SHORT).show();
    }
});

// Set the Cancel button
timeDlg.setButton(DialogInterface.BUTTON_NEGATIVE, "Cancel", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int which) {
        Toast.makeText(getApplicationContext(), "Cancel", Toast.LENGTH_SHORT).show();
        mIgnoreTimeSet = true;
        dialog.cancel();
    }
});

timeDlg.show();

@Override public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
    if (mIgnoreTimeSet) return;
    // get the values here - this will only run if 'Set' was clicked
} 
```

为了这个例子，我假设你的`PreferencesActivity`implements `OnTimeSetListener`。由于`onTimeSet(...)`在之后被调用`onClick(...)`，您可以简单地切换一个布尔值，该布尔值将确定您是否应该对回调中的值执行某些操作，或者只是忽略它们。

我不得不同意这并不理想，但至少是功能性的。假期过后，我将尝试重新审视“更好”的解决方案。

一种替代方法是使用反射来处理内部使用的`TimePicker`小部件，但这更有可能在未来的 Android 版本中中断。

* * *

**// 编辑：潜在的替代方案？（未测试）**

第二种选择，可能有点“干净”：扩展`TimePickerDialog`并覆盖（空）公共方法：

```
public void onTimeChanged(TimePicker view, int hourOfDay, int minute) 
```

在那里，跟踪用户设置的一天中的小时和分钟，并实现两个返回它们的 getter。然后，如果单击了肯定按钮，则仅从对话框中获取这些值，但只是通过“取消”。基本上，您将不再需要 an `OnTimeSetListener`，因此它是否被调用都无关紧要。

* * *

**// Edit2: 支持 pre-ICS 设备**

在收到一些关于提议的解决方案在 ICS 之前的设备上不起作用的评论后，我对上述代码做了一个小的改动——即使它不在原始问题的范围内。

pre-ICS 和 post-ICS 设备之间的主要区别在于，在对话框按钮的方法运行`OnTimeSetListener`后不会自动调用回调。`onClick()`一个简单的解决方法是调用`onClick()`对话框上的方法，然后调用监听器。在上面的解决方案中，我添加了版本代码检查，否则您的侦听器最终将在后 ICS 设备上被调用两次，这可能会导致不希望的副作用。

在 Android 2.1-update1 和 Android 4.2.2 上测试并确认行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-17T03:42:28.787

当我的 Nexus 7 上的 Jelly Bean 的 TimePickerDialog 遇到相同的“仅完成按钮”问题时，我发现了这个线程（我的 Nexus One，Gingerbread，具有相同 TimePickerDialog 的设置和取消按钮）。但是，在我的 Nexus 7（内部版本号 JWR66Y）上对 4.3 Jelly Bean 进行后续更新后，正确的按钮设置和取消似乎已经返回。

然而，在研究这个问题时，我确实遇到了这个[Stackoverflow 线程](https://stackoverflow.com/a/11493752/1620738)，它相当细致地概述了 DatePickerDialog 的更大问题（在引用的错误报告中指出了 TimePickerDialog 的类似问题）并提供了解决方案。

请注意，必须仔细考虑使用这些对话框，因为它们在某些版本的 Android 中无法正常运行（根据其作者的说法，上述线程中提供的解决方案并未在“生产代码中”使用）。**

# iphone - heapshot 显示内存增加，但给我废话回溯

> ID：14092098
> 
> 赞同：0
> 
> 时间：2012-12-30T15:51:41.240
> 
> 标签：iphone, memory

这是heapshot的截图。每次我在应用程序中滑动到下一页时，我确实在instrument中标记了heapshot： ![在此处输入图像描述](../Images/a93fe0bbc0e2d56c280b82ae6218503f.png) 内存中存在许多304字节的s并且使内存增加。详细信息窗格显示与我在应用程序中的代码无关的回溯。只是许多 libCGFreetyp.A.dylib 或其他系统框架，为什么会这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T17:39:55.477

我不确定 heapshot 是解决这个问题的最简单方法。首先尝试使用泄漏工具，如果不能清楚地表明哪个对象正在泄漏，请使用分配并确定在切换到下一页时分配了哪些对象。从那里，只需跟随该对象来确定应该在什么时候删除您的引用。

# jquery - textarea中文本的样式片段

> ID：14092102
> 
> 赞同：1
> 
> 时间：2012-12-30T15:52:13.540
> 
> 标签：jquery

我有一个`textarea`包含文本：`"Hello World"`.

有没有办法只`"World"`用jquery改变颜色？

我可以使用以下方法获取我想要编辑的值`slice`：

```
$('textarea').val().slice(6); 
```

但是我怎样才能将 css 规则或类仅应用于 textarea 值的那一部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T16:02:38.927

我认为这不可能你必须使用 textarea 以外的东西。我宁愿用“不可能”来回答这个问题，而不是不予回答。

搜索了几分钟后，我在 SO 上找到了一篇带有相同问题的旧帖子：[如何在 textarea 中使用不同的字体颜色？](https://stackoverflow.com/questions/641685/how-do-i-have-different-font-colors-in-a-textarea)

如我错了请纠正我。

# javascript - Jquery表单验证错误消息问题

> ID：14092104
> 
> 赞同：0
> 
> 时间：2012-12-30T15:52:29.993
> 
> 标签：javascript, jquery, html

我刚刚让我的表单使用 php 将其发送到我的电子邮件，但我不能让它只在每个字段都填写完毕时发送。

空置时，所有东西都有很好的颜色。

我只是希望它在有一个空的字段时给出反馈信息。

也不要介意标签的奇怪用法，如果我以正确的方式进行操作，css 将无法正常工作。

HTML

```
 <form id="contactform" action="php/send.php" method="post">
                  <div class="box">
                    <label>
                       <span>Full name *</span>
                       <input type="text" class="input_text" name="name" id="name"/>
                    </label>
                     <label>
                       <span>Email *</span>
                       <input type="text" class="input_text" name="email" id="email"/>
                    </label>
                     <label>
                        <span>Subject *</span>
                        <input type="text" class="input_text" name="subject" id="subject"/>
                    </label>
                    <label>
                        <span>Message *</span>
                        <textarea class="message" name="feedback" id="feedback"></textarea>
                    </label>
                    <label>
                    <input type="submit" class="button" value="Submit Form" />
                    </label>
                </div>
            </form> 
```

JS

```
 $(document).ready(function(){

//------------------- VALIDATIE CONTACT FORM ------------------------
//------ VARIABELEN DECLAREREN------
var naam = false;
var valnaam = "";
var email = false;
var valemail = "";
var message = false;
var valmessage = "";

//---- NAAM ----
$("#name").bind("focus",function(){
    if (naam == false)
    {
        $(this).css("borderColor","red");

    }
    else
    {
        $(this).css("borderColor","green");
    }

});
$("#name").bind("keyup", function(){
    valnaam = $(this).val();
    if (valnaam <= 1) {
        $(this).css("borderColor","red");
        naam = false;

    }
    else
    {
        $(this).css("borderColor","green");
        naam = true;
    }
});

//------ EMAIL -------
$("#email").bind("focus",function(){
    if (email == false)
    {
        $(this).css("borderColor","red");

    }
    else
    {
        $("#email").css("borderColor","green");
    }
});

$("#email").bind("keyup", function(){
    var reg = /^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;
    var address = $("#email").val();
    if(reg.test(address) == false) 
    {
       $("#email").css("borderColor","red");
       email = false; 

    }
    else
    {
        $("#email").css("borderColor","green");
        email = true; 
    }
});

    //---- Onderwerp ----
$("#subject").bind("focus",function(){
    if (naam == false)
    {
        $(this).css("borderColor","red");

    }
    else
    {
        $(this).css("borderColor","green");
    }

});
$("#subject").bind("keyup", function(){
    valnaam = $(this).val();
    if (valnaam <= 1) {
        $(this).css("borderColor","red");

        naam = false; 
    }
    else
    {
        $(this).css("borderColor","green");
        naam = true;
    }
});

//------ BERICHT ------

$("#feedback").bind("focus",function(){
    if (message == false)
    {
        $(this).css("borderColor","red");

    }
    else
    {
        $(this).css("borderColor","green");
    }   

});
$("#feedback").bind("keyup", function(){
    valmessage = $(this).val();
    if (valmessage <= 1) {
        $(this).css("borderColor","red");
        message = false; 

    }
    else
    {
        $(this).css("borderColor","green");
        message = true;
    }
});
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T16:36:39.813

嗨，我建议通过验证函数绑定来验证表单的“onsubmit”事件。前任：

```
$('#formId').submit(function(submitEvent) {
 //validation code
 if(validationCriteriaNotMet){
  submitEvent.preventDefault();// prevent form submission.
//other activity like attaching changing css properties of elements or adding proper
 }

}); 
```

此外，您可以使用[Jquery 验证插件](http://docs.jquery.com/Plugins/Validation)来验证表单，以避免自己编写所有验证样板代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T16:30:06.213

好吧，我评论了你是否可以只使用 jquer.validate，但我想我不妨举一个例子，以防你可以：

```
$("#contactform").validate({
  rules: {
    name: "required",
    email: "required",
    subject: "required",
    feedback: "required"
  }
}); 
```

默认的 CSS 类是`error`and `valid`，所以只需为这两个类设置适当的样式就可以了。

模式演示可以在[这里](http://jquery.bassistance.de/validate/demo/)找到。

# php - PHP (WAMP) - Exlipse PDT、xDebug：不在断点处停止

> ID：14092105
> 
> 赞同：3
> 
> 时间：2012-12-30T15:52:49.263
> 
> 标签：php, eclipse, xdebug, eclipse-pdt

只有当我选中选项**"Break at First line"**时，我才能进行调试。如果我取消选中它并在某行放置一个断点，那么调试器不会在该行停止。

**我需要调试器在我设置的断点处停止，而不是在文件的第一行。**

我在 php.ini 文件中添加了以下几行：

```
zend_extension = "c:/wamp/bin/php/php5.3.8/ext/php_xdebug-2.1.2-5.3-vc9.dll"
xdebug.remote_enable = on
xdebug.remote_handler = dbgp
xdebug.remote_host = localhost
xdebug.remote_port = 9000 
```

我还能够使用相同的设置在**Notepad++ DBGp 调试器上正确调试。**

SO上有类似的帖子，但没有一个能解决我的问题。在 SO 问题[“Can not make PHP PDT xDebug to stop at breakpoints in Eclipse”](https://stackoverflow.com/questions/13522671/can-not-make-php-pdt-xdebug-to-stop-at-breakpoints-in-eclipse)中，[DevNull](https://stackoverflow.com/users/869779/devnull)说 Juno 解决了这个问题，但我自己使用的是 Juno 并且遇到了问题。

以下是我的 Eclipse 设置的一些屏幕截图：

*   **窗口 --> 首选项 --> PHP --> 调试：** ![在此处输入图像描述](../Images/d0be5cf49498f370edaa90afabc6215d.png)*   **窗口 --> 首选项 --> PHP --> PHP 可执行文件：** ![在此处输入图像描述](../Images/ccb988ff3d157b4f83482b44f4368619.png)*   **窗口 --> 首选项 --> PHP --> PHP 可执行文件 --> 执行环境：** ![在此处输入图像描述](../Images/4deaa45b6752fa01dd1822cee166ffd5.png)*   **窗口 --> 首选项 --> PHP --> PHP解释器：**

    ![在此处输入图像描述](../Images/02b15c2987d80d88ea98f7ed48f13ceb.png)

    *   **窗口 --> 首选项 --> PHP --> PHP 服务器：** ![在此处输入图像描述](../Images/ec6cc3e90a1f22105c1b5371b49f48b4.png)*   我使用 Mozilla Firefox 作为我的外部网络浏览器。（**窗口 --> 常规 --> Web 浏览器**）

    *   Project **Debug Configuration --> PHP Web Application --> Debugger --> Server Debugger**设置为**XDebug**并且 XDebug 调试端口设置为`9000`

希望那些会帮助有人帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T18:34:09.023

可能你应该尝试升级 xdebug 版本？

还有你是怎么安装朱诺的？只是全新安装或更新？

尝试在另一个文件夹中进行全新安装并复制您的工作区设置。或者尝试不使用它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-13T18:40:31.003

对于那些接受的解决方案不起作用的人：

检查 xdebug 设置：`xdebug.remote_enable`. 必须**打开** （转到*phpinfo()*以查看当前设置）。参考[这里](http://wiki.eclipse.org/Debugging_using_XDebug)

# spring - Spring表单选择修改列表项

> ID：14092109
> 
> 赞同：2
> 
> 时间：2012-12-30T15:53:09.297
> 
> 标签：spring, model-view-controller, jstl

以下 jstl 代码显示出奇怪的行为：

```
${property.bedrooms[0]}

<sf:select path="bedrooms[0]" multiple="multiple" items="${property.bedrooms[0].beds}" />

${property.bedrooms[0]} 
```

输出是：

```
Bedroom{id=4, beds=[KING, QUEEN], enSuite=false} 

+-------------+
| KING        |
+-------------+

Bedroom{id=4, beds=[KING], enSuite=false} 
```

Bedroom.toString() 包含：

```
@Override
public String toString()
{
    return "Bedroom{" + "id=" + id + ", beds=" + beds + ", enSuite=" + enSuite + '}';
} 
```

property.bedrooms[0].beds 是一个 List<Enum>，似乎在 items 属性中访问它会删除除第一个元素之外的所有元素！知道是什么原因造成的吗？

干杯! NFV

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T16:43:09.823

尝试：

```
<sf:form modelAttribute="property">
    <sf:select path="bedrooms[0].beds" multiple="true">
        <sf:options />
    </sf:select>
</sf:form> 
```

根据 spring-form(3.0.x) tld 文档和源代码 java doc： [http ://static.springsource.org/spring/docs/3.0.x/reference/spring-form.tld.html#spring- form.tld.options](http://static.springsource.org/spring/docs/3.0.x/reference/spring-form.tld.html#spring-form.tld.options)

如果 select 上的绑定值是枚举，spring 将自动使用该类的所有枚举值列表。

options 标签的 itemLabel 和 itemValue 属性可用于显示对用户更友好的标签。

```
<sf:options itemLabel="friendlyName" /> 
```

# python - pyunit 测试失败，因为当传入 5 个参数时方法只接受 4 个参数

> ID：14092115
> 
> 赞同：0
> 
> 时间：2012-12-30T15:54:18.330
> 
> 标签：python, unit-testing, testing, tdd, python-unittest

这是我正在测试的函数的定义：

```
def runCMD(cmd,subString=-1,stripSlashes=True,getReturnCode=False): 
```

这是我的测试课

```
import unittest
from class_backups import *

class tests_backups(unittest.TestCase):

    def test_runCMD(self):
        cLInstance = class_backups()
        assert(cLInstance.runCMD("ls",-1,True,True)==0)

# When this module is executed from the command-line, run all its tests
unittest.main() 
```

这是我的错误：

```
E
======================================================================
ERROR: test_runCMD (__main__.tests_backups)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "tests_backups.py", line 11, in test_runCMD
    assert(cLInstance.runCMD("ls",-1,True,True)==0)
TypeError: runCMD() takes at most 4 arguments (5 given)
----------------------------------------------------------------------
Ran 1 tests in 0.000s

FAILED (errors=1) 
```

我究竟做错了什么？是否有隐含的第五个论点？是自己吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T15:56:18.327

我会说`runCMD`缺少该方法`self`作为第一个参数。

由于它是一个绑定实例方法，Python 将实例作为第一个参数隐式发送，这就是为什么你看到 5 个参数被传递。

# ajax - jQuery Mobile：如何从列表中单击记录并对其进行编辑

> ID：14092116
> 
> 赞同：0
> 
> 时间：2012-12-30T15:54:22.073
> 
> 标签：ajax, forms, jquery-mobile

我有 2 页：#page_contact_list 和 #page_contact_edit。单击列表中的联系人后，我希望转换到#page_contact_edit，加载我单击的记录的联系人数据并通过单击“保存”按钮保存它。

我的问题是：

*   我应该在列表中的哪个位置放置记录 id (mysql contacts.id)，这是一个特殊属性，一个 href 参数，...
*   哪个事件旨在捕获我传递的联系人 ID
*   我应该使用哪个事件来进行 AJAX 调用以从数据库加载联系人数据并填写表单
*   如果成功#page_contact_edit 转换回#page_contact_list，我应该如何进行“保存”事件

    ```
    <div data-role="page" id="page_contact_list">
      <div data-role="content">
          <ul data-role="listview" data-divider-theme="b" data-inset="true">
            <li data-role="list-divider" role="heading">
                Contacts
            </li>
            <li data-theme="c">
                <a href="#page_contact_edit" data-transition="slide">
                    James
                </a>
            </li>
             <li data-theme="c">
                <a href="#page_contact_edit" data-transition="slide">
                    Jenna
                </a>
            </li>
            <li data-theme="c">
                <a href="#page_contact_edit" data-transition="slide">
                    Mark
                </a>
            </li>
          </ul>
        </div>
    </div>

    <div data-role="page" id="page_contact_edit">
        <div data-role="content">
            <form action="">
                <div data-role="fieldcontain">
                    <fieldset data-role="controlgroup">
                        <label for="textinput1">
                            Name
                        </label>
                        <input name="name" id="textinput1" value="" type="text" />
                    </fieldset>
                </div>
                <div data-role="fieldcontain">
                    <fieldset data-role="controlgroup">
                        <label for="textinput2">
                            Second name
                        </label>
                        <input name="second_name" id="textinput2" value="" type="text" />
                    </fieldset>
                </div>
                <div data-role="fieldcontain">
                    <fieldset data-role="controlgroup">
                        <label for="textinput3">
                            Phone
                        </label>
                        <input name="phone" id="textinput3" value="" type="text" />
                    </fieldset>
                </div>
                <a data-role="button" href="#page_contact_list">
                    Save
                </a>
                <a data-role="button" href="#page_contact_list">
                    Cancel
                </a>
            </form>
        </div>
    </div> 
    ```

[JSFIDDLE](http://jsfiddle.net/nMR85/606/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T02:50:07.693

请将这个 url 中的内容复制粘贴到一个 html 文件并在本地测试。[http://pastebin.com/LyhLrK7Q](http://pastebin.com/LyhLrK7Q)。

*   我应该在列表中的哪个位置放置记录 id (mysql contacts.id)，这是一个特殊属性，一个 href 参数 ---***您可以自由使用任何属性名称前缀，`data-`参考随附的示例代码***
*   哪个事件旨在捕获我传递的联系人 ID --- ***附加单击`li`列表视图以捕获`data-contact-id ="1"`. 这在样本中也被覆盖了。***
*   我应该使用哪个事件来进行 AJAX 调用以从数据库加载联系人数据并填写表单 --- ***changePage 方法应该是使用 ajax 获取记录的一个好地方。我曾经 `setTimeout`模拟ajax。您可以将此计时器回调用作您的 ajax 回调***
*   如果成功#page_contact_edit 转换回#page_contact_list，我应该如何进行“保存”事件 -***编辑页面上的一些 javascript 验证应该没问题。一旦用户单击取消或保存按钮，我已将转换设置为反向。***

# jquery - jQuery Tabs - 从另一个页面打开

> ID：14092118
> 
> 赞同：1
> 
> 时间：2012-12-30T15:54:31.730
> 
> 标签：jquery

我无法从不同页面上的链接打开选项卡。使用 jQuery 选项卡，显然第一个选项卡的链接可以正常打开，但其他选项卡不能正常打开。

我的 CSS

```
<div class="tabs">
    <ul class="nav">
      <li class="selected"><a href="#tab-1">One</a></li> 
      <li><a href="#tab-2">two</a></li>
      <li><a href="#tab-3">three</a></li>
      <li><a href="#tab-4">four</a></li>
    </ul>
    <div id="tab-1" class="tab-content">
          <div class="inner">
        <div class="one">
          <div class="wrap block-3 border-1"> 
                             <p>&nbsp;</p> </div> 
```

来自另一个页面的链接：

```
<p><a href="business.html#tab-1" class="button-2">one</a>  </p>
<p><a href="business.html#tab-2" class="button-2">two</a>  </p> 
```

知道我怎样才能让它工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T16:56:33.093

以下将解析哈希并从数字中减去 1 以获得起始标签索引。如果没有哈希，将默认为第一个选项卡

```
var hash= location.hash, startTab=0;
if( hash && hash.indexOf('-')>-1){
  startTab= parseInt( hash.split('-').pop() -1, 10) || 0;
}

$('#tabs').tabs({ active: startTab}); 
```

请参阅`active`文档中的选项：http: [//api.jqueryui.com/tabs/#option-active](http://api.jqueryui.com/tabs/#option-active)

**编辑：**

演示：http: [//jsfiddle.net/6s2Rv/](http://jsfiddle.net/6s2Rv/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T16:38:46.117

[EasyTabs 插件](http://os.alfajango.com/easytabs/)与hashchange 插件很好地处理了这个问题。您是使用插件还是自己滚动？

# iphone - 如何在 iphone 或 xcode 中使用 CAShapeLayer 制作多色圆形动画？

> ID：14092121
> 
> 赞同：0
> 
> 时间：2012-12-30T15:55:05.593
> 
> 标签：iphone

我正在尝试制作一个将被动画并顺时针填充黑色的圆圈，圆圈动画的持续时间预定义为 20 秒，我想要做的是前 10 秒它将被黑色填充，其余的圆圈将被红色填充，总共 20 秒后它将变成一个 2 色的圆形圆圈，但我找不到它的任何过程，这是我绘制圆圈动画的代码：

```
-(void)makeCircle{
int radius = 100;
CAShapeLayer *circle = [CAShapeLayer layer];
//make a circular shape
circle.path = [UIBezierPath bezierPathWithRoundedRect:CGRectMake(0, 0, 2.0*radius, 2.0*radius)cornerRadius:radius].CGPath;
//centre the shape in self.view
circle.position = CGPointMake(CGRectGetMidX(self.view.frame)-radius, CGRectGetMidY(self.view.frame)-radius);
//configure the appearence of the circle
circle.fillColor = [UIColor clearColor].CGColor;

circle.strokeColor =[UIColor blackColor].CGColor;
circle.lineWidth = 5;

//add to parent layer
[self.view.layer addSublayer:circle];

//configure animation
CABasicAnimation *drawAnimation = [CABasicAnimation animationWithKeyPath:@"strokeEnd"];
drawAnimation.duration = 20.0;//animate over 10 seconds or so...
drawAnimation.repeatCount=1.0;//animate only once;

drawAnimation.removedOnCompletion=NO;

drawAnimation.fromValue = [NSNumber numberWithFloat:0.0f];
drawAnimation.toValue = [NSNumber numberWithFloat:1.0f];

drawAnimation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseIn];
[circle addAnimation:drawAnimation forKey:@"drawCircleAnimation"];
} 
```

但我需要知道我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T16:27:41.320

你看过[这个吗？](http://mobiledevelopertips.com/open-source/ios-open-source-circular-progress-view.html)

我认为这可能会有所帮助。

# javascript - 通过第一点和距离获取第二点

> ID：14092122
> 
> 赞同：0
> 
> 时间：2012-12-30T15:55:11.357
> 
> 标签：javascript, distance, point

我正在构建一个在线游戏，并使用节点和诸如此类的东西，无论如何我不太热衷于仅用于动画的恒定流和数据流，我已经设置了一种方法来为客户端设置动画等等.. . 但我发现了一个问题，我所做的只是设置新坐标并告诉所有客户端将他们的角色动画到那个点，但是如果你刷新页面，玩家会立即出现。

我有距离、移动速度、移动时间、起点和目的地……我知道他们从哪里开始移动，我知道他们的目的地在哪里，我知道他们什么时候开始移动，以什么速度移动，并且以线性方式.

我需要解决的是，在其他玩家加入游戏的特定时间，玩家在哪里（在制作动画时）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T18:45:35.640

试试[http://en.wikipedia.org/wiki/Kinematics](http://en.wikipedia.org/wiki/Kinematics)

或[http://en.wikipedia.org/wiki/Speed](http://en.wikipedia.org/wiki/Speed)

行进的距离可以通过将定义重新排列为 d=v*t 来计算

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T19:02:47.090

最简单的方法是*补间*位置。这涉及沿着当前位置和更新位置之间的路径创建一系列中间步骤。如果您知道更新的频率，这种方法效果最好。您可以线性选择这些点或使用[缓动函数](http://easings.net/)将其平滑。

但是，如果您真的在进行物理模拟，那么如果您考虑物理模型，它可能看起来会更自然。在查看您是否需要进入更复杂的数学领域之前，我会先尝试简单的案例。

# python - 在函数 + 返回中传递参数 - 为什么这不起作用？

> ID：14092123
> 
> 赞同：0
> 
> 时间：2012-12-30T15:55:14.960
> 
> 标签：python, python-3.x

我正在使用使用 for 循环构建的回文检测器（这是我参加的课程的要求）。

我几乎完全完成了它，但我无法返回一个参数并在最终函数中使用它。代码如下所示：

```
 #-*- coding: utf-8 -*-
def main(): 
    intro()
    text = (input("Inser text here: "))
    ordnaText(text)
    testPalindrom(ordnaText(text))
    showResult(testPalindrom)

def intro():
    print ("Hej! Detta är ett program som testar ifall en text är ett palindrom eller inte.")

def ordnaText (text):
    nytext = ("")
    fixedText = text.lower()
    for i in fixedText:
        if i.isalnum():
            nytext = (nytext + i)
    return nytext

def testPalindrome(nytext):
    palindrome = True
    for i in range (0, len(nytext)):
        if (nytext[i]) != (nytext[len(nytext)-i-1]):
            palindrome = False
    return palindrome

def showResult(palindrome):
    if palindrome == True:
        print ("Yes, this is a palindrome")
    else:
        print ("No, this is not a palindrome.)
main() 
```

除了最后一部分外，一切正常：如果我输入回文“lol”，则表示它是错误的。“回文”不知何故无法正确返回。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T15:57:49.090

对于短字符串，要测试回文，只需将其与相反的比较：

```
def testPalindrome(nytext):
    return nytext == nytext[::-1] 
```

您的版本`testPalindrome`工作正常，但您的方法本身调用`testPalindrom(ordnaText(text))`（`e`最后没有），所以也许您对该函数有另一个定义？

```
>>> def testPalindrome(nytext):
...     palindrome = True
...     for i in range (0, len(nytext)):
...         if (nytext[i]) != (nytext[len(nytext)-i-1]):
...             palindrome = False
...     return palindrome
... 
>>> testPalindrome('lol')
True 
```

您实际上并没有将函数的*结果*`showResult`传递给; 您改为传递*函数。*使用变量：

```
result = testPalindrome(ordnaText(text))
showResult(result) 
```

您可以稍微简化一下：

```
def testPalindrome(nytext):
    for i in range (0, len(nytext)):
        if (nytext[i]) != (nytext[len(nytext)-i-1]):
            return False
    return True 
```

当您发现第一个不匹配的字符时，您可以提前退出。

您不需要`== True`在 if 语句中进行测试，只需执行以下操作：

```
def showResult(palindrome):
    if palindrome:
        print ("Yes, this is a palindrome")
    else:
        print ("No, this is not a palindrome.) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-30T16:03:48.427

您的问题主要在于您的主要功能：

```
ordnaText(text) 
```

`ordnaText`这会以输入的文本作为参数调用该函数；然后它把结果扔掉。

```
testPalindrom(ordnaText(text)) 
```

现在 this`testPalindrom`用方法的结果调用函数`ordnaText`；然后它又把结果扔掉了。由于您已经调用了该`ordnaText`方法，因此之前存储结果也是一个好主意，这样您就可以传递它的结果。

```
showResult(testPalindrom) 
```

最后，`showResult`以*函数*作为参数调用函数。此时，没有任何内容引用输入的文本，您只需传递函数本身。所以你想要在这里做的是在这里传递`testPalindrom`函数的结果：

```
text = input("Inser text here: ")
text = ordnaText(text)
testResult = testPalindrom(text)
showResult(testResult) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T16:03:42.170

试试这个（更简洁的代码，相同的逻辑）：

```
def testPalindrome(str) :
    for i in range(int(len(str)/2)) :
        if str[i] != str[len(str)-i-1] :
             return False

    return True 
```

此外，您不会对返回的结果做任何事情：

```
 testPalindrom(ordnaText(text)) #This returns the result, but there is no variable that accepts it

    showResult(testPalindrom) 
```

你可以这样做：

```
showResult(testPalindrom(ordnaText(text))) #This will print the returned result 
```

或者 ：

```
 result = testPalindrom(ordnaText(text))

    showResult(result) 
```

建议：您可以使这段代码更短更整洁。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T16:04:01.737

您必须将 testPalindrom 的结果传递给 showResult

通过做

```
ordnaText(text)
testPalindrom(ordnaText(text))
showResult(testPalindrom) 
```

您将函数本身传递给不等于 True 的 showResult （这是一个对象）

所以你应该做而不是这三行

```
showResult(testPalindrom(ordnaText(text))) 
```

# python - Python排列线程

> ID：14092125
> 
> 赞同：6
> 
> 时间：2012-12-30T15:55:20.420
> 
> 标签：python, multithreading, permutation

我在 python 中使用 itertools.permutations 函数生成了排列。问题是结果非常大，我想用多个线程来完成它，但真的不知道如何完成它，这是我到目前为止所拥有的：

```
perms = itertools.permutations('1234', r=4)

#I would like to iterate through 'perms' with multiple threads
for perm in perms:
    print perm 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T16:26:59.427

如果您要对来自排列生成器的项目执行的工作是 CPU 密集型的，那么您可能希望使用进程而不是线程。CPython 的全局解释器锁 (GIL) 在执行 CPU 密集型工作时使多线程的价值有限。

相反，使用[`multiprocessing`](http://docs.python.org/3/library/multiprocessing.html)模块的`Pool`类，如下所示：

```
import multiprocessing
import itertools

def do_stuff(perm):
    # whatever
    return list(reversed(perm))

if __name__ == "__main__":
    with multiprocessing.Pool() as pool: # default is optimal number of processes
        results = pool.map(do_stuff, itertools.permutations('1234', r=4))

        # do stuff with results 
```

请注意，如果您将进行迭代`results`（而不是将其作为列表进行操作），您可以使用`imap`而不是`map`获取一个迭代器，您可以使用该迭代器来处理从工作进程产生的结果。如果返回项目的顺序无关紧要，您可以使用`imap_unordered`（我认为）节省一些内存。

Windows上`if __name__ is "__main__"`需要样板文件，其中`multiprocessing`模块必须解决操作系统的限制（否`fork`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T16:23:28.370

假设你的处理函数是你想要做的 f(x)

```
from multiprocessing import Pool

def f(x):
    return x*x

if __name__ == '__main__':
    pool = Pool(processes=4)   # start 4 worker processes
    perms = itertools.permutations('1234', r=4)
    for r in pool.map(f, perms):
        print (r) 
```

事实上，使用线程不会并行执行进程，除非它是 IO 绑定的。如果它受 CPU 限制并且你有一个四核，那么这就是要走的路。如果您没有多核并且它受 CPU 限制，那么恐怕使其并行不会改善您目前的情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T18:24:08.043

在线程之间拆分perms 数的*索引，然后使用*[此函数](https://stackoverflow.com/questions/12884428/generate-sample-of-1-000-000-random-permutations/13056801#13056801)从每个线程中的索引生成 perm，而不是生成所有 perms 并在线程之间拆分它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T16:22:47.557

Python 的[futures](http://docs.python.org/dev/library/concurrent.futures.html)模块可以很容易地在线程之间拆分工作。在此示例中，将使用 4 个线程，但您可以根据需要对其进行修改。

```
from concurrent import futures

def thread_process(perm):
    #do something

with futures.ThreadPoolExecutor(max_workers=4) as executor:
    for perm in perms:
        executor.submit(thread_process, perm) 
```

# php - 在 cron 作业中运行无限循环

> ID：14092130
> 
> 赞同：4
> 
> 时间：2012-12-30T15:56:06.597
> 
> 标签：php, cron, webserver

在 cron 作业中运行无限循环。
假设，我已经编写了一个基于 php 的脚本以使用 cron 作业在我的服务器计算机上运行，​​并且我想在该 php 脚本中使用无限循环。
在 cron 作业中运行无限循环的任何想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T16:14:25.150

无限循环应用程序通常称为守护程序。它们是提供某种持续处理和/或准备接受某些潜在传入处理活动的系统服务。

[Gearman](http://gearman.org/)是一个您可以安装的系统守护程序，它可以处理您给它的各种任务。这是一个复杂的工具，可以做很多事情，但它可以用来实现你的必需品。

[PHP::Gearman](http://php.net/manual/en/book.gearman.php)是一个 Gearman 客户端，它与 Gearman 守护进程对话并将任务发送到守护进程，指定必须执行任务的条件。

@Jeffrey 强调的关于 PHP 的限制是正确的，因为 PHP 被设计为无共享架构（一个页面加载等于一个脚本执行 - 每个页面加载都在其自己的数据上下文下工作）。

或许[System Daemon](http://pear.php.net/package/System_Daemon)（一个 pear 包）可以帮助克服上面提到的部分或全部限制。我没有用过它，所以我不能告诉你更多关于它的信息，但它是一个很好的起点。

# button - Actionscript 3.0 中的音乐播放器

> ID：14092132
> 
> 赞同：0
> 
> 时间：2012-12-30T15:56:19.767
> 
> 标签：button, actionscript, playback

我已经添加了一个带有自动播放功能的停止按钮，但我需要这样做，所以当您在停止按钮后再次单击该按钮时，音乐就会开始播放。

源代码：

```
var music:Sound = new Sound(new URLRequest("calmingsong.mp3"));
var sc:SoundChannel = music.play();

button1.addEventListener(MouseEvent.CLICK, stopMusic);

function stopMusic(e:Event):void
{
sc.stop();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T18:46:16.063

如果您只想从头开始播放声音，只需再次调用`Sound`对象的`play()`方法（执行此操作时会得到一个新`SoundChannel`对象）。

如果您想在用户停止的位置继续播放声音，则需要添加其他变量来存储当前的“播放状态”......像这样：

```
var music:Sound = new Sound(new URLRequest("calmingsong.mp3"));
var sc:SoundChannel = music.play();
var startPosition:Number = 0;
var isPlaying = true; // default to true cause you auto play...

button1.addEventListener(MouseEvent.CLICK, togglePlayback);

function togglePlayback(e:Event):void
{
    if (isPlaying)
    {
        startPosition = sc.position;
        sc.stop();
        isPlaying = false;
    }
    else
    {
        sc = music.play(startPosition);
        isPlaying = true;
    }
} 
```

# java - Java程序多次出现在系统托盘中

> ID：14092136
> 
> 赞同：4
> 
> 时间：2012-12-30T15:56:36.953
> 
> 标签：java, windows, icons, system-tray

我已经通过 SystemTray 类构建了一个隐藏在系统托盘中的应用程序。工作正常，但是当我退出程序并重新启动它时，它不会在将光标悬停之前从托盘中删除图标。多次执行此操作会导致出现多个图标：

![在此处输入图像描述](../Images/6105798dba63c2dd7883a791c1399bb9.png)

这是我的程序的问题还是 Windows 的错误？

我按照[本指南](http://docs.oracle.com/javase/tutorial/uiswing/misc/systemtray.html)创建系统托盘图标。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-30T16:05:16.730

当创建托盘图标的应用程序终止时，Windows 不会自动删除托盘图标。只有当用户将鼠标悬停在它上面并注意到拥有进程不再存在时，它才会这样做。

为确保立即删除图标，您必须`systemTray.remove(yourIcon)`在程序退出时调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T16:06:00.940

系统托盘包含一个或多个托盘图标，使用该`add(java.awt.TrayIcon)`方法将这些图标添加到托盘中。`remove(java.awt.TrayIcon)`当该方法不再需要它们时，可以将它们删除。

# wolfram-mathematica - 如何绘制这个函数？

> ID：14092137
> 
> 赞同：0
> 
> 时间：2012-12-30T15:56:44.200
> 
> 标签：wolfram-mathematica

我正在尝试`$x^{p}+y^{p}\le 1$`在 xy 平面上绘制该区域。但是当我运行这样的命令时：

```
RegionPlot[x^0.7 + y^0.7 <= 1, {x, -500, 500}, {y, -500, 500}] 
```

我总是遇到如下错误消息：

```
LessEqual::nord: Invalid comparison with -91.0952+125.382 I attempted. >> 
```

我很困惑 - 我怎样才能让数学家知道我正在寻找该区域`R^{2}`，而不是`C^{2}`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T18:02:23.683

无效的比较错误实际上不是这里的问题。RegionPlot[] 将绘制表达式计算结果为 True 的区域。表达式复杂的区域不会评估 True 并且 regionplot 会将它们留空。

您看到完全空白图的原因仅仅是您的绝对范围太大。RegionPlot 默认使用粗网格，并错过了小的 True 区域。

这有效（将无效比较作为警告抛出）

```
RegionPlot[TrueQ[( x^0.7 + y^0.7 <= 1)], {x, -1, 1}, {y, -1, 1},
             PlotPoints -> 100] 
```

![在此处输入图像描述](../Images/55f6d9709c3026474f47d2d0468d3adb.png)

您可以取消警告：

```
Quiet[RegionPlot[TrueQ[( x^0.7 + y^0.7 <= 1)], {x, -1, 1}, {y, -1, 1},
             PlotPoints -> 100], {LessEqual::nord}] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T16:08:47.310

您的绘图范围无效。您正在计算`(-500)^0.7`，这是一个复数（`-45.5509762 + 62.69554i`具体而言）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T19:01:08.737

```
RegionPlot[Table[x^i + y^i <= 1, {i,.1,1,.1}], {x,0,1}, {y,0,1}, Evaluated->True] 
```

![数学图形](../Images/1350722ac7073bb3497691826f0890d3.png)

# apache-flex - 在项目渲染器中将标签旋转 90 度

> ID：14092138
> 
> 赞同：1
> 
> 时间：2012-12-30T15:56:52.520
> 
> 标签：apache-flex, list, itemrenderer

我正在尝试在我的项目渲染器上旋转标签。当我将它旋转 45 度时，它工作得很好，但是当我将它旋转 90 度时，这是我想要做的，标签正在旋转，但在创建列表后，旋转的标签正在彼此加紧。

我可以选择 45 度的，但 90 度的似乎根本没有宽度。当我声明宽度和高度以及填充时，但这也没有解决它。

我怎样才能使我的标签成 90 度而不使它们相互提升？

我的项目渲染器：

```
<?xml version="1.0" encoding="utf-8"?>
<s:ItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
                    xmlns:s="library://ns.adobe.com/flex/spark" >
    <fx:Script>
        <![CDATA[
            override public function set data(value:Object):void
            {
                super.data = value;
                dateLabel.text = data.date;

            }
        ]]>
    </fx:Script>
    /* When rotation is 90, my labels are just stepping up eachother */
    <s:Label id="dateLabel" rotation="45"/>
</s:ItemRenderer> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T18:33:00.523

您的`BasicLayout`渲染器正在使用（默认情况下）不考虑旋转对象时在对象的宽度/高度/位置/等中发生的转换。它仍然尝试像没有旋转对象一样布局对象。

但是，如果您使用任何其他布局，例如`VerticalLayout`或`HorizontalLayout`，则会使用对象的新尺寸（旋转后）。

我可能没有正确解释上述内容，但解决此问题的一个简单方法是向您的渲染器添加布局声明：

```
<s:layout>
    <s:VerticalLayout/>
</s:layout> 
```

# android - 如何以不阻止滚动并单击它的子项的方式在 Android ScrollView 中启用 Scale？

> ID：14092140
> 
> 赞同：6
> 
> 时间：2012-12-30T15:57:09.393
> 
> 标签：android, scrollview, multi-touch, gesturedetector

我有一个扩展 Android ScrollView 的自定义视图。直接子元素是一个相对布局，它具有可点击的子元素。我希望能够：

1.  在滚动视图上检测 onScale Gesture（然后我将手动管理项目的比例）。
2.  垂直滚动 ScrollView。
3.  保持这些子项目可点击。

到目前为止我尝试过的是（伪代码）：

```
public class CustomView extends ScrollView { 
    @Override
    public boolean onInterceptTouchEvent(MotionEvent ev) {  
        return super.onInterceptTouchEvent(ev) || mScaleDetector.onTouchEvent(ev);
    }

   @Override
   public boolean onTouchEvent(MotionEvent ev) {
       return mScaleDetector.onTouchEvent(ev);
   }

    private class ScaleListener extends
        ScaleGestureDetector.SimpleOnScaleGestureListener {

            @Override
            public boolean onScale(ScaleGestureDetector detector) {
                // Handle the scale..
                return true;
            }
       }
} 
```

我还尝试了 onInterceptMethod 的不同配置，例如首先调用 super 并返回 mScaleDetector.onTouchEvent 等等。

我成功拦截了比例或点击和滚动，但不是两者兼而有之。

谢谢，丹尼尔

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-01T09:46:01.797

解决方案是使用：

```
 @Override
    public boolean dispatchTouchEvent(MotionEvent ev){
        super.dispatchTouchEvent(ev);    
        return mScaleDetector.onTouchEvent(ev); 
    } 
```

而不是覆盖 `onInterceptTouchEvent`和`onTouchEvent`方法。

# android - 使用 telephonyserivce.endcall() 在 android 中结束通话

> ID：14092141
> 
> 赞同：3
> 
> 时间：2012-12-30T15:57:11.063
> 
> 标签：android, telephony, telephonymanager

我正在开发要结束拨出电话的应用程序。这是主要课程

```
import android.app.Activity;
import android.content.ActivityNotFoundException;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.util.Log;

public class phonecalls extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    call();
}

private void call() {
try {
    Intent callIntent = new Intent(Intent.ACTION_CALL);
    callIntent.setData(Uri.parse("tel:123456789"));
    startActivity(callIntent);
} catch (ActivityNotFoundException activityException) {
    Log.e("dialing-example", "Call failed", activityException);
}
}
} 
```

和传出类是这个

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.TelephonyManager;
import android.util.Log;
import android.widget.Toast;
import com.android.internal.telephony.ITelephony;
import java.lang.reflect.Method;

public class OutgoingCallReceiver extends BroadcastReceiver {

private final String TAG = "CallControl";
Context context;
String incomingNumber;
ITelephony telephonyService;  

@Override
    public void onReceive(Context context, Intent intent) {
    TelephonyManager tm = (TelephonyManager) context .getSystemService(Context.TELEPHONY_SERVICE);
    try {
        // Java reflection to gain access to TelephonyManager's
        // ITelephony getter
        Bundle bundle = intent.getExtras();

        if(null == bundle)
                return;

        String phonenumber = intent.getStringExtra(Intent.EXTRA_PHONE_NUMBER);

        Log.i("OutgoingCallReceiver",phonenumber);
        Log.i("OutgoingCallReceiver",bundle.toString());

        String info = "Detect Calls sample application\nOutgoing number: " + phonenumber;

        Toast.makeText(context, info, Toast.LENGTH_LONG).show();

        Log.v(TAG, "Get getTeleService...");
        Class c = Class.forName(tm.getClass().getName());
        Method m = c.getDeclaredMethod("getITelephony");
        m.setAccessible(true);
        telephonyService=(ITelephony) m.invoke(tm);
        telephonyService.endCall();
    } catch (Exception e) {
        e.printStackTrace();
        Log.e(TAG,
                "FATAL ERROR: could not connect to telephony subsystem");
        Log.e(TAG, "Exception object: " + e);
    }       

    }
} 
```

但是即使我可以打印没有，通话也没有结束。当拨出电话开始时，显示广播接收器工作正常。

任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T02:40:31.700

是的，当然有两种方法可以使用飞行模式或内部电话。我使用内部电话，我开发的代码在这里上传[https://github.com/deependersingla/end_calls](https://github.com/deependersingla/end_calls)。

如果您需要更多信息，请告诉我，将很乐意提供帮助。

# php - cmd中的openssl返回状态

> ID：14092145
> 
> 赞同：0
> 
> 时间：2012-12-30T15:58:01.297
> 
> 标签：php, apache, openssl, cmd, exec

我正在使用 openssl 命令使用 PHP 创建证书。我正在使用 exec。当我给 exec 命令时，返回状态是`1`，我回显了我插入的任何内容`exec(OpenSSL statement)`并通过 cmd 尝试它，它工作正常（生成证书）但它没有当我通过 PHP exec 运行它时不起作用。任何可以帮助我的人。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T21:05:26.320

也许您会更轻松地使用[phpseclib，一个纯 PHP X.509 实现](http://phpseclib.sourceforge.net/)？如何创建自签名证书的示例：

```
<?php
include('File/X509.php');
include('Crypt/RSA.php');

// create private key / x.509 cert for stunnel / website
$privKey = new Crypt_RSA();
extract($privKey->createKey());
$privKey->loadKey($privatekey);

$pubKey = new Crypt_RSA();
$pubKey->loadKey($publickey);
$pubKey->setPublicKey();

$subject = new File_X509();
$subject->setDNProp('id-at-organizationName', 'phpseclib demo cert');
//$subject->removeDNProp('id-at-organizationName');
$subject->setPublicKey($pubKey);

$issuer = new File_X509();
$issuer->setPrivateKey($privKey);
$issuer->setDN($subject->getDN());

$x509 = new File_X509();
//$x509->setStartDate('-1 month'); // default: now
//$x509->setEndDate('+1 year'); // default: +1 year

$result = $x509->sign($issuer, $subject);
echo "the stunnel.pem contents are as follows:\r\n\r\n";
echo $privKey->getPrivateKey();
echo "\r\n";
echo $x509->saveX509($result);
echo "\r\n";
?> 
```

# javascript - 克隆节点不等于原始节点（使用 isEqualNode）

> ID：14092151
> 
> 赞同：11
> 
> 时间：2012-12-30T15:58:36.603
> 
> 标签：javascript, html, dom

我正在管理 Javascript 中的名称列表。当您选中一个框时，您的姓名将出现在列表中。当您取消选中它时，它会被划掉。当你将盒子设置为不确定状态时，你的名字就被删除了。

我在隐藏的 div 中有当前登录用户的名称。该名称是具有样式属性的跨度。

我使用 isEqualNode 检查名称是否已经在列表中。当页面加载时它在列表中时，它工作正常：找到名称并在复选框选中状态更改时更新。

```
for(var i=0 ; i < bullet.childNodes.length ; i++) {
    var node = bullet.childNodes[i];
    if(node.className == 'crossed')
        node = node.firstChild;
    if(node.isEqualNode(document.getElementById('curUser').firstChild))
        break;
}
// if i < bullet.childNodes.length, then we found the user's name in the list 
```

当名称不在列表中时，我克隆跨度。

```
var newName = document.getElementById('curUser').firstChild.cloneNode(true);
bullet.appendChild(newName); 
```

这在视觉上有效。

但是我偶然发现了一些棘手的事情：`newName.isEqualNode(document.getElementById('curUser').firstChild)`是假的！因此，如果盒子状态再次改变，新添加的名称将找不到，并会再次创建一个新名称。

这是跨度的样子：

```
<span style="font-weight: bold ; color: #003380 ;">Pikrass</span> 
```

目前我只是让检查不那么严格（我可以只检查跨度内的文本数据，而不是依赖 isEqualNode），但我对为什么克隆节点可能与原始节点不同感兴趣，根据isEqualNode。

相关规范：[cloneNode](http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-3A0ED0A4)、[isEqualNode](http://www.w3.org/TR/DOM-Level-3-Core/core.html#Node3-isEqualNode)

* * *

**编辑：**我用 Firefox 和 Chromium 进行了测试。Firefox isEqualNode 返回 false，但 Chromium 返回 true。感谢菲利克斯指出这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T15:30:39.257

刚刚想通了。根据[规范](http://www.w3.org/TR/2004/REC-DOM-Level-3-Core-20040407/DOM3-Core.html#core-Node3-isEqualNode)，isEqualNode 仅在两个元素具有相同数量的属性时才返回 true。但是如果源元素有一个 ID，它不会被复制，因为 ID 应该是唯一的，所以它的属性更少。使用类而不是 ID 可以正常工作。

标记：

```
<div id="withId">withId content</div>
<div class="withoutId">withoutId content</div> 
```

JS：

```
function test(node) {
    var copy = node.clone(true);
    document.body.appendChild(copy);
    console.log('are equal: ' + copy.isEqualNode(node)
        + ', attributes lengths: ' + node.attributes.length + ' ' + copy.attributes.length
        + ', ids: ' + node.getAttribute('id') + ' ' + copy.getAttribute('id'));
}

test(document.getElementById('withId'));
// are equal: false, attributes lengths: 1 0, ids: withId null

test(document.getElementsByClassName('withoutId')[0]);
// are equal: true, attributes lengths: 1 1, ids: null null 
```

[http://jsfiddle.net/igorz/fxtDw/](http://jsfiddle.net/igorz/fxtDw/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T16:56:46.337

它写在这里[Mozilla 的参考资料](https://developer.mozilla.org/en-US/docs/DOM/Node.cloneNode%20Mozilla)（感谢@Bergi）

> cloneNode() 返回的重复节点在添加到另一个节点时会收到一个新的 uniqueID

当您进行追加时，此时 id 可能已更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-10T18:12:35.653

迟到总比不到好。:)

我无法再使用 Firefox 17 重现该问题，因此正如评论中所讨论的，这可能是 Gecko 中的一个错误，该错误已被修复。

但是我找不到任何错误报告。我暂时将此答案标记为已接受，但如果有人可以找到错误报告或对幕后发生的事情的解释，我将接受它。

Bergi 的评论对于其他两个答案是正确的。

# jquery - jQuery：在包含文本的字符串中查找标签

> ID：14092154
> 
> 赞同：0
> 
> 时间：2012-12-30T15:58:40.863
> 
> 标签：jquery, regex, search, filter

我有一个变量，它存储带有一些内容的表行。我想使用 %%LIKE%% 方法在该字符串中搜索特定术语，如果找到，则将此 html 行添加到仅包含过滤行的新变量中。如果可能的话，我希望搜索不区分大小写。

到目前为止，我有以下内容，这似乎不起作用：

```
// current list
var thisBlock = '<tr><td>Some content</td></tr><tr><td>Some other content</td></tr><tr><td>Even more content</td></tr>';

// new list
var thisList;

// phrase to be found
var thisValue = 'Some';

// filter
var thisItems = $(thisBlock).find("tr:contains('" + thisValue + "')");

// loop to append the found rows
if (thisItems !== '' && typeof thisItems !== 'undefined') {
    $.each(thisItems, function() {
        thisList += $(this).clone().wrap('<div>').parent().html();
    });
} 
```

问题似乎出在过滤器部分，我无法弄清楚如何以其他方式做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T16:04:41.763

试试这个：

```
var thisItems = $('<table>'+thisBlock+'</table>').find("tr:contains('" + thisValue + "')"); 
```

如果没有包装表标签，我认为 jQuery 不会将其视为有效标签，因为它没有根节点。

更新：以下代码正在将每个匹配行添加到表#outTab，您可以使用它来到达您想要的位置吗？

```
<table id="outTab"/>

<script type="text/javascript">
// current list
var thisBlock = '<table><tr><td>Some content</td></tr><tr><td>Some other content</td></tr><tr><td>Even more content</td></tr></table>';

// new list
var thisList;

// phrase to be found
var thisValue = 'Some';

// filter
var thisItems = $(thisBlock).find("tr:contains('" + thisValue + "')");

// loop to append the found rows
if (thisItems !== '' && typeof thisItems !== 'undefined') {
    $.each(thisItems, function(){
        console.log( this );
        $('#outTab').append(this);
    });
    console.log(thisItems);
}
</script> 
```

# ruby-on-rails-3 - 显示 has_one 关系表的 Rails

> ID：14092155
> 
> 赞同：0
> 
> 时间：2012-12-30T15:58:58.697
> 
> 标签：ruby-on-rails-3

我正在尝试围绕 Rails 进行思考，并且在试图理解为什么某些东西有效而其他东西无效时遇到了一些困难

例如，有 2 个表：

类用户

```
table users
email:string
password:string 
```

班级简介

```
table profiles
firstname:string
lastname:string
city:string
user_id:integer 
```

现在每个用户应该有 1 个配置文件。

所以在模块 user.rb 我有

```
has_one :profile 
```

在 profile.rb 中

```
belongs_to :user 
```

现在我要做的就是在一个表中显示两个表

```
<table>
 <tr>
  <th>User_ID</th>
  <th>Email</th>
  <th>Password digest</th>
  <th>First Name</th>
  <th>Last Name</th>
  <th>City</th>
 </tr>

<% @users.each do |user| %>
 <tr>
  <td><%= user.id %></td>
  <td><%= user.email %></td>
  <td><%= user.password %></td>
  <td><%= user.profile.firstname %></td>%></td>
  <td><%= user.profile.lastname %></td>%></td>
  <td><%= user.profile.city %></td>%></td>
 </tr>
<% end %>
</table> 
```

我有一个带有索引页的控制器 Show

```
def index
 #this works
 @users = User.all(:include => :profile)
end 
```

我发现的这段代码有效，它可以正确显示表格。

但是我有一个其他代码列表，这些代码是我通过尝试使其工作而收集/拼凑的，但这些代码不起作用。

因此，此代码列表将在 def 索引中单独连接两个表

1.  @users = @users.build_profile() 抛出错误：nil:NilClass 的未定义方法 `build_profile'

2.  @users = @users.profile 引发错误：nil:NilClass 的未定义方法 `profile'

3.  @users = @user.collect { |用户| user.profile } 抛出错误：nil:NilClass 的未定义方法 `collect'

4.  @users = Profile.find(:all) 抛出错误：#Profile:0x46da5a0 的未定义方法“电子邮件”

    ```
    <% @users.each do |user| %>
    <tr>
    <td><%= user.id %></td>
    <td><%= user.email %></td>
    <td><%= user.password %></td>
    <td><%= user.proflie.firstname %></td> 
    ```

5.  @users = @profile.create_user() 抛出错误：nil:NilClass 的未定义方法“create_user”

6.  @users = @users.profiles 引发错误：nil:NilClass 的未定义方法“profiles”

7.  @users = @user.each { |用户| user.profiles } 抛出错误：nil:NilClass 的未定义方法 `each'

为什么所有这些其他的都失败了，它们似乎适用于有类似问题的其他用户（以 1 到零的关系连接两个表）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T16:12:52.887

您遇到的大多数问题都是由于您在`nil`. 您需要先初始化`@users`集合，然后才能对其调用方法。还要确保您在数据库中确实有一些用户。

获取所有用户：

```
@users = User.all(:include => :profile)
@users = User.includes(:profile) # I prefer this syntax 
```

建立个人资料。请注意，您需要在一个特定`User`的而不是方法给出的集合上调用它`all`：

```
@profile = @users.first.build_profile # This won't actually save the profile 
```

获取第一个用户的个人资料

```
@profile = @users.first.profile 
```

获取所有配置文件：

```
@profiles = @users.collect { |user| user.profile } 
```

获取第一个用户的电子邮件：

```
@email = @users.first.profile.email 
```

其余的只是上述内容的略微修改版本。

# php - 临时数组？

> ID：14092156
> 
> 赞同：0
> 
> 时间：2012-12-30T15:59:18.307
> 
> 标签：php, arrays, laravel, plupload, temporary

这是一个很长的故事，我正在与之抗争，所以我现在不会延伸太多，但如果不可能的话，我会详细说明这个问题。

我正在使用 Laravel 框架。通过 ajax 调用，我将数据从上传表单 ( `plupload`) 发送到控制器内的函数。

假设我的控制器中有以下功能：

```
function action_tempupload()
{
    $temp = array();
    $temp[] = Input::all();
    return true;
}

function action_upload($news_id)
{
    global $temp;
    $input = $temp;

    echo "<pre>";
    //print_r($news_id);
    print_r($input);
    echo "</pre>";
    exit();
}

function action_save($parameters = array())
{
        // create news record in database and
        // have a variable containing the news id sent to:
        $this->upload($mysql->news_id);
} 
```

是否有可能有一个临时数组，它保存表单的每个 POST 以供图像上传并稍后在另一个函数中调用该数组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T16:11:34.233

如果它们是单独的请求，那么您可以将数组存储在 a 中`$_SESSION`，并在最后一个操作方法中取消设置所有创建的会话。

单击您需要了解更多有关[$_SESSIONS](http://uk3.php.net/manual/en/session.examples.basic.php)的链接。用法非常简单。

# c - 生成函数调用图 Doxygen+Graphviz

> ID：14092160
> 
> 赞同：6
> 
> 时间：2012-12-30T16:00:04.237
> 
> 标签：c, doxygen, graphviz, call-graph, doxywizard

如何使用安装了 Graphviz 的 Doxywizard 生成函数调用图？（我知道[如何让 doxygen 为 c 函数生成调用和调用者图](https://stackoverflow.com/questions/8887810/how-to-get-doxygen-to-produce-call-caller-graphs-for-c-functions)，但它没有帮助）

目前，我尝试了以下配置：[http://pastebin.com/PjLjwjxU](http://pastebin.com/PjLjwjxU)，但我无法在任何地方找到图表（我从未使用过该工具，所以它可能不是技术问题，但更多的是用户问题）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T12:31:29.093

通过重新启动并删除 DOT_PATH 规范，它解决了问题。

# ios - 故事板和视图控制器

> ID：14092161
> 
> 赞同：0
> 
> 时间：2012-12-30T16:00:03.690
> 
> 标签：ios, xcode, xib, uitabbar, uistoryboard

我用 Xcode 创建了一个应用程序，但我的视图控制器有问题。在我的项目文件中，我有一个带有“.xib”扩展名的照片库，我已将其移至情节提要，因为我需要一个基于选项卡的应用程序，但是当我运行以测试我的项目时，我只能看到视图控制器，没有标签栏和其他项目。为什么我看不到我的故事板？我希望你能帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T16:10:16.497

很可能您仍然在应用程序设置中引用了“主界面”。单击 XCode 项目 - 摘要 - iPhone / iPod 部署信息。

在“主要故事板”下，您应该参考您的故事板。例如：`MainStoryboard`

确保“主界面”保持为空。

# r - 使用先前计算值（滚动）时最有效/矢量化

> ID：14092162
> 
> 赞同：6
> 
> 时间：2012-12-30T16:00:04.987
> 
> 标签：r, optimization, data.table, zoo, rcpp

在这些对话之后：

1.  [我可以对取决于先前元素的计算进行矢量化吗](https://stackoverflow.com/questions/7153586/can-i-vectorize-a-calculation-which-depends-on-previous-elements)
2.  [sapply？轻拍？ddply？基于另一个变量先前值的滚动索引的数据框变量](https://stackoverflow.com/questions/12185276/sapply-tapply-ddply-dataframe-variable-based-on-rolling-index-of-previous-val)

我想测试一个更“真实”的案例研究。我最近不得不将 SAS 代码迁移到 R 并将 kdb 代码迁移到 R 代码。我试图编译一个足够简单但更复杂的例子来优化。

让我们建立训练集

```
buildDF <- function(N){
    set.seed(123); dateTimes <- sort(as.POSIXct("2001-01-01 08:30:00") + floor(3600*runif(N)));
    set.seed(124); f <- floor(1+3*runif(N));
    set.seed(123); s <- floor(1+3*runif(N));
    return(data.frame(dateTime=dateTimes, f=f, s=s));
} 
```

这是需要达到的

```
f1 <- function(DF){
    #init
    N <- nrow(DF);
    DF$num[1] = 1;

    for(i in 2:N){
        if(DF$f[i] == 2){
            DF$num[i] <- ifelse(DF$s[i-1] == DF$s[i],DF$num[i-1],1+DF$num[i-1]);        
        }else{ #meaning f in {1,3}
            if(DF$f[i-1] != 2){
                DF$num[i] = DF$num[i-1]; 
            }else{
                DF$num[i] = ifelse((DF$dateTime[i]-DF$dateTime[i-1])==0,DF$num[i-1],1+DF$num[i-1]);
            }
        }
    }
    return(DF)
} 
```

这当然是可怕的。让我们对它进行一点矢量化：

```
f2 <- function(DF){
    N <- nrow(DF);
    DF$add <- 1; DF$ds <- c(NA,diff(DF$s)); DF$lf <- c(NA,DF$f[1:(N-1)]);
    DF$dt <- c(NA,diff(DF$dateTime));
    DF$add[DF$f == 2 & DF$ds == 0] <- 0;
    DF$add[DF$f == 2 & DF$ds != 0] <- 1;
    DF$add[DF$f != 2 & DF$lf != 2] <- 0;
    DF$add[DF$f != 2 & DF$lf == 2 & DF$dt==0] <- 0;
    DF$num <- cumsum(DF$add);
    return(DF);
} 
```

并使用最有用的[data.table](http://cran.r-project.org/web/packages/data.table/index.html)：

```
f3 <- function(DT){
    N <- nrow(DT);
    DT[,add:=1]; DT[,ds:=c(NA,diff(s))]; DT[,lf:=c(NA,f[1:(N-1)])];
    DT[,dt:=c(NA,diff(dateTime))];
    DT[f == 2 & ds == 0, add:=0];
    DT[f == 2 & ds != 0, add:=1];
    DT[f != 2 & lf != 2, add:=0];
    DT[f != 2 & lf == 2 & dt == 0, add:=0];
    DT[,num:=cumsum(add)];
    return(DT);
} 
```

在 10K 数据帧上：

```
library(rbenchmark);
library(data.table);

N <- 1e4;
DF <- buildDF(N)
DT <- as.data.table(DF);#we can contruct the data.table as a data.frame so it's ok we don't count for this time.

#make sure everybody is equal
DF1 <- f1(DF) ; DF2 <- f2(DF); DT3 <- f3(DT);
identical(DF1$num,DF2$num,DT3$num) 
[1] TRUE

#let's benchmark
benchmark(f1(DF),f2(DF),f3(DT),columns=c("test", "replications", "elapsed",
+ "relative", "user.self", "sys.self"), order="relative",replications=1);
    test replications elapsed relative user.self sys.self
2 f2(DF)            1   0.010      1.0     0.012    0.000
3 f3(DT)            1   0.012      1.2     0.012    0.000
1 f1(DF)            1   9.085    908.5     8.980    0.072 
```

好的，现在在一个更体面的 5M 行 data.frame

```
N <- 5e6;
DF <- buildDF(N)
DT <- as.data.table(DF);
benchmark(f2(DF),f3(DT),columns=c("test", "replications", "elapsed",       
+ "relative", "user.self", "sys.self"), order="relative",replications=1);
    test replications elapsed relative user.self sys.self
2 f3(DT)            1   2.843    1.000     2.092    0.624
1 f2(DF)            1  10.920    3.841     4.016    5.137 
```

我们使用 data.table 获得了 5 倍的收益。

**我想知道[Rcpp](http://cran.r-project.org/web/packages/Rcpp/index.html)或 zoo:::rollapply 是否可以在这方面获得很多。** 我会很高兴有任何建议

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T01:53:25.507

简单的内联 Rcpp 版本：

```
library(Rcpp)
library(inline)

f4cxx <- cxxfunction(signature(input="data.frame"), plugin="Rcpp", body='
  Rcpp::DataFrame df(input);
  const int N = df.nrows();  

  Rcpp::NumericVector f = df["f"];
  Rcpp::NumericVector s = df["s"];
  Rcpp::NumericVector d = df["dateTime"]; // As far as we need only comparation
  Rcpp::NumericVector num(N);             // it is safe to convert Datetime to Numeric (faster) 

  num[0] = 1;
  for(int i=1; i<N; i++){
    bool cond1 = (f[i]==2) && (s[i]!=s[i-1]);
    bool cond2 = (f[i]!=2) && (f[i-1]==2) && (d[i]!=d[i-1]);
    num[i] = (cond1 || cond2)?1+num[i-1]:num[i-1];    
  }

  df["num"] = num;
  return df;                                // Returns list
  //return (Rcpp::as<Rcpp::DataFrame>(df)); // Returns data.frame (slower)
  ') 
```

签出：

```
N<-1e4; df<-buildDF(N)
identical(f1(df)$num, f4cxx(df)$num)

[1] TRUE 
```

基准测试：

```
N<-1e5; df<-buildDF(N); dt<-as.data.table(df)
benchmark(f2(df), f2j(df), f3(dt), f4cxx(df),
          columns=c("test", "replications", "elapsed", "relative", "user.self", "sys.self"),
          order="relative", replications=1);

       test replications elapsed relative user.self sys.self
4 f4cxx(df)            1   0.001        1     0.000        0
2   f2j(df)            1   0.037       37     0.040        0
3    f3(dt)            1   0.058       58     0.056        0
1    f2(df)            1   0.078       78     0.076        0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-30T23:55:57.790

使用 Rcpp（或“普通的旧 C API”，如果你想让 Dirk 挠头）将你的第一个函数转换为 C/C++ 很可能是最快的。data.table 解决方案可能紧随其后。

这是一个比您的函数快得多的基本 R 解决方案，`f2`因为它避免了很多 data.frame 子集（非常慢）。这说明了为了使基本 R 代码快速运行而应该做什么/避免什么，但要以代码清晰度/可读性为代价。

```
f2j <- function(DF){
  N <- nrow(DF)
  f2  <- DF$f == 2
  ds0 <- diff(DF$s) == 0
  lf2 <- f2[-N]
  f2  <- f2[-1]
  dt3 <- diff(DF$dateTime) == 0
  cond <- logical(N)
  cond[-1] <- (f2 & ds0) | (!f2 & !lf2) | (!f2 & lf2 & dt3)
  DF$num <- cumsum(!cond)
  DF
} 
```

# http - 在服务器代码中处理强制 SSL

> ID：14092164
> 
> 赞同：1
> 
> 时间：2012-12-30T16:00:27.317
> 
> 标签：http, ssl

我想强制 HTTP 客户端在我的应用程序中切换到 HTTPS。用户键入`www.mysite.com`将默认使用 HTTP，但他们需要重定向到 HTTPS。使用旧书签的用户将被重定向到书签页面的 HTTPS 版本。

HSTS (RFC 6797) 一旦被重定向就会有很大帮助。我的问题实际上是关于 HTTP 方法的。

`GET`并且`HEAD`肯定应该接受 301/302 重定向，但是`POST`/`PUT`和`DELETE`呢？

请参见以下示例：

```
 void context_BeginRequest(object sender, EventArgs e)
    {
        HttpApplication application = (HttpApplication)sender;
        HttpContext context = application.Context;

        if (context.Request.IsSecureConnection) return;

        if (context.Request.HttpMethod == "GET" || context.Request.HttpMethod == "HEAD")
        {
            string redirectUri = context.Request.Url.ToString().Replace("http://", "https://");
            context.Response.RedirectPermanent(redirectUri, true);
        }
        else
        {
            throw new HttpException(403, "SSL Required");
        }
    } 
```

GET 和 HEAD 都通过重定向处理。目前 POST，据我所知，接受 301 重定向作为要完成的 GET 请求，即不会重新发布到 HTTPS 版本。所以这就是为什么在我的代码片段中我最终得到一个 403 代码。

### 问题是从 HTTP 协议的角度来阅读

除了检查应用程序中的所有表单是否指向 HTTPS，聪明的 HTTP 开发人员应该如何在浏览器将请求定向到普通的旧 HTTP 版本时强制客户端将 POST 请求重定向到页面的 HTTPS 版本？

### 可能的解决方案

创建一个包含所有表单字段的登录页面，该页面会自动（通过 Javascript 和“如果您没有被重定向，请点击我”按钮）将表单重新发布到目标页面的 HTTPS 版本。

还有其他想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T16:11:06.040

最初，301 和 302 响应旨在保留请求方法和请求正文，以便`POST`可以正确重定向请求。然而，在实践中，几乎所有的网络浏览器都实现了它们，因此请求方法被更改为`GET`，因为这通常是人们想要的。

正是出于这个原因，在 HTTP/1.1 中引入了 303 和 307。303 字面意思是请求方法应该被切换到`GET`，而 307 明确表示该方法被保留，所以你可能想要 307。但是请注意，我从未将 307 用于任何事情，所以我不知道有多好它适用于浏览器和其他用户代理。

不过，你不是让这个问题变得比它需要的更大吗？并不是任何人都可以为 POST 请求添加书签。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T17:19:46.640

重定向时 POST 的行为取决于服务器返回的状态码。此外，许多浏览器都实现了[Post/Redirect/Get 模式](http://en.wikipedia.org/wiki/Post/Redirect/Get)，这可能并不完全符合 HTTP 规范。

话虽如此：

*   一般避免依赖重定向。（请参阅[此答案](https://webmasters.stackexchange.com/a/28443/11628)。）在生产中进行重定向不一定是坏事，但这适用于直接在地址栏中键入地址的用户。它依赖于在进行重定向时没有 MITM 的假设。我认为开发阶段的重定向是不好的，因为它们隐藏了潜在的问题。

*   永远不要依赖 POST 上的重定向（甚至是 URL 中包含敏感信息的 GET）：初始请求（在重定向到 HTTPS 之前）无论如何都会以明文形式发送，这违背了尝试使用 HTTPS 的目的。

如果您希望使用 HTTPS，请确保您提供的链接和表单的目标 URL 使用`https://`. 如果可以的话，还要确保您的用户期望使用 HTTPS。只有用户可以检查。

正如 Eugene 在评论中所说，拥有通过 HTTPS 提供表单的登录页面也是一种好习惯。

由于您似乎主要关注使用旧书签访问此页面的用户，因此 POST 和 DELETE 无关紧要：他们无论如何都会使用 GET from a bookmark。如果可以的话，告诉他们更新他们的书签。您还可以使用浏览器应记住的 HSTS 或 301（永久重定向），以便在`https://`下次使用该地址时直接转到该地址，除非其缓存被清除。

# sql - 查询显示每行两次

> ID：14092176
> 
> 赞同：0
> 
> 时间：2012-12-30T16:01:54.497
> 
> 标签：sql, sql-server-2008

它显示每行两次...我编写它是为了从不同的表中选择一些行，它显示了我想要的内容，但它每次显示这些行两次。为什么 ？

```
SELECT
   tbluser.fullname, tbluser.email, tblJobAdv.advtitle, tblPersonalInfo.country, 
   tblPersonalInfo.city, tblJobOffer.digitalsignature 
FROM
   tblUser 
LEFT JOIN
   tblPersonalInfo ON tblUser.userid = tblPersonalInfo.userid
LEFT JOIN
   tblApplication ON tblApplication.userid = tblUser.userid 
LEFT JOIN
   tblJobAdv ON tblJobAdv.advid = tblApplication.advid
LEFT JOIN
   tblJobOffer ON tblUser.userid = tblJobOffer.userid
WHERE
   tblJobAdv.userId IN (SELECT userid FROM tblUser WHERE email = 'h@y.com') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T16:04:22.537

它显示重复的记录，因为您正在沿着不同的维度加入。如果我不得不猜测，根据表名，用户正在申请多个工作。

一个快速简单的解决方法是`select distinct`。

实际上，您应该检查基础表以确保其中没有重复项。我对 Application 表持怀疑态度。我认为给定用户可能有多个应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T06:17:31.387

使用 'group by' 或 'distinct' 会使您的查询缓慢且低效。我认为您最好从 tblJobAdv 等其他表中找到重复的行，并**为这些表提供更多“位置条件”。**

```
SELECT tbluser.fullname, tbluser.email, tblJobAdv.advtitle, tblPersonalInfo.country, 
   tblPersonalInfo.city, tblJobOffer.digitalsignature 
FROM
   tblUser 
LEFT JOIN
   tblPersonalInfo ON tblUser.userid = tblPersonalInfo.userid
LEFT JOIN
   tblApplication ON tblApplication.userid = tblUser.userid 
LEFT JOIN
   tblJobAdv 
   ON tblJobAdv.advid = tblApplication.advid
   AND tblJobAdv.isUsable = 'Usable' /* some more where condition example */
LEFT JOIN
   tblJobOffer ON tblUser.userid = tblJobOffer.userid
WHERE
   tblJobAdv.userId IN (SELECT userid FROM tblUser WHERE email = 'h@y.com') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T16:04:07.183

您只需要对**记录进行分组**或**distinct**就可以了（删除重复项），

```
Select distinct tbluser.fullname, tbluser.email, tblJobAdv.advtitle, tblPersonalInfo.country, 
tblPersonalInfo.city, tblJobOffer.digitalsignature 
from tblUser 
left join tblPersonalInfo
ON tblUser.userid = tblPersonalInfo.userid
left join tblApplication
On tblApplication.userid = tblUser.userid 
left join tblJobAdv 
On tblJobAdv.advid = tblApplication.advid
left join tblJobOffer
On tblUser.userid = tblJobOffer.userid
where tblJobAdv.userId IN (select userid from tblUser where email = 'h@y.com') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T16:04:44.360

请尝试选择 distinct 以避免重复记录

# c++ - 设置和取消设置 64 位整数中的特定位

> ID：14092179
> 
> 赞同：4
> 
> 时间：2012-12-30T16:02:49.273
> 
> 标签：c++, c, macros, 64-bit, bit-manipulation

好的，我想要的很简单：

*   设置数字的第 N 位（= 设为“1”）
*   取消设置数字的第 N 位（= 将其设为“0”）

到目前为止，这是我的代码（以 2 个宏的形式）：

```
#define SETBIT(X,Y)     X|=(1ULL<<(Y))
#define UNSETBIT(X,Y)   X&=(~(1ULL<<(Y))) 
```

* * *

他们都工作正常。事情是 ：

*   有什么可以优化的吗？
*   它可以做得更快吗？

*（这两个操作都应该每秒执行数百万次，因此性能至关重要）。*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-30T16:04:54.267

您可以通过摆脱宏来稍微加快编译时间，但仅此而已。位旋转足够快，所以它不应该是一个问题。

这是惯用的做法，我不会改变任何事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-30T16:11:17.223

这是在 C 中设置和清除位的标准方法。

如果您想*潜在地*加速这些宏，您可以查看这些操作的 Linux 汇编实现。

例如，对于`x86`：

[http://lxr.linux.no/linux/arch/x86/include/asm/bitops.h](http://lxr.linux.no/linux/arch/x86/include/asm/bitops.h)

查找`__clear_bit`和`__set_bit`内联函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-30T16:08:21.657

这些宏是最佳*且*惯用的，因此如果需要进行优化，编译器可能会识别这些表达式。

您可能获得的唯一加速是......如果有更好的选择，请避免使用它们。如果您经常执行相同的多位操作（例如，打开位 0、2 和 4），您可以通过使用单个*或*而不是使用多个`SETBIT`s 来执行所有这些操作来获得一些好处。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-30T16:56:44.960

首先，您应该将宏修复为：

```
#define SETBIT(X,Y)     ( (X) |= 1ULL << (Y) )
#define UNSETBIT(X,Y)   ( (X) &= ~(1ULL << (Y)) ) ) 
```

这样代码就像`SETBIT(a, 2) + 1;`预期的那样工作，并且`SETBIT(1+a, 2);`会按预期产生错误。

你可能永远不会那样使用宏，但是额外的括号是免费的，解决与宏相关的问题可能是这样的 PITA，它总是把额外的`()`或放在`{}`宏周围。

补充：使用内联汇编和 CPU 位旋转操作，并*假设`Y`在编译时*未知，UNSETBIT 可以更快，避免 NOT... 伪代码：

```
X = X OR (0xFFFFFFFFFFFFFFFE ROL Y) 
```

然后，尽管这些宏尽可能高效（C 编译器应将它们优化为理想的汇编指令），但您或许应该提供宏来操作多个位，例如：

```
#define SET2BITS(X, B1, B2)     ( (X) |= 1ULL << (B1) | 1ULL << (B2) ) 
```

在某些情况下，使用内部表达式的类似函数的宏可能更有效（尽管编译器优化可能会获得相同的最终结果）：

```
#define BITSETVAL(X, B)     ( (X) | 1ULL << (B) ) 
```

# mips - MIPS 中的停滞或冒泡

> ID：14092182
> 
> 赞同：4
> 
> 时间：2012-12-30T16:03:12.450
> 
> 标签：mips, pipeline

我需要多少档位才能正确执行以下指令。我对自己的所作所为有点困惑，所以我在这里看专家的答案。

lw $1,0($2);

beq $1,$2,标签；

请注意，是否会发生分支的检查将在解码阶段完成。`rs`但是在这种情况下，beq的源寄存器`$1`将在 lw 指令的回写阶段之后更新。那么我们是否需要将内存阶段的内存中的新数据转发到beq指令的解码阶段。

这是数据路径图：

![在此处输入图像描述](../Images/32fc2ee4b0de3ccb2441b519854bfe0d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:45:51.823

从内存中取出的值在流水线的回写阶段写入寄存器文件。对寄存器文件的写入发生在时钟周期的前半部分，而从寄存器文件的读取发生在时钟周期的后半部分。

因此，写入寄存器文件的值可以在与写入寄存器文件相同的时钟周期内读取。因此**转发在这里是无效的**。

至于需要的停顿次数，则需要在流水线中插入两个气泡，因为在指令处于解码阶段`lw`时，该指令应该处于回写阶段。`beq`

我希望这回答了你的问题。

# visual-studio-2010 - 具有相同 .obj 文件的两个不同静态库

> ID：14092202
> 
> 赞同：1
> 
> 时间：2012-12-30T16:04:49.213
> 
> 标签：visual-studio-2010, static-libraries, .obj, .lib

我正在使用 Visual Studio，并且我有两个不同的静态库，它们共享相同的 .obj 文件，但该 .obj 文件在其中一个中较新。我需要这两个库，所以我不能排除其中一个，我如何“制作”链接器以从我想要他的静态库中获取这个特定的 .obj 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T07:35:35.563

要么就是这样，要么我`.obj`每次更改他时都必须添加文件，因为它的位置基于版本号，而 lib 文件位于全局位置。除非有其他解决方案。

# opengl - OpenGL 重复调用 glTexImage2D 和 alpha 混合

> ID：14092205
> 
> 赞同：1
> 
> 时间：2012-12-30T16:05:32.853
> 
> 标签：opengl, alphablending, glteximage2d, visual-artifacts

这更多是出于好奇而不是出于任何实际目的：OpenGL 规范中是否有任何内容表明`glTexImage2D`多次调用（例如，每帧一次）是非法的？我的意思是非法的，因为它可能会产生错误的结果，而不仅仅是效率低下（假设我不关心不使用`glTexSubImage2D`而不使用对性能的影响）。

我问的原因是，我在绘制重叠的纹理映射图元时注意到一些非常奇怪的伪影，这些图元使用部分透明的纹理，每帧加载一次`glTexImage2D`（见附图）：几秒钟后（即，几百帧），屏幕上出现小的矩形黑色斑块（它们实际上在连续帧之间的黑色和正常之间翻转）。

![神器](../Images/43c5e266b4fce140a53fce91da58c09b.png)

我在下面附上了我可以编写的最简单的示例代码，它显示了这个问题。

```
#include <stdio.h>

#ifndef __APPLE__
# include <SDL/SDL.h>
# include <SDL/SDL_opengl.h>
#else
# include <SDL.h>
# include <SDL_opengl.h>
#endif

/* some constants and variables that several functions use */
const int width = 640;
const int height = 480;
#define texSize 64

GLuint vbo;
GLuint tex;

/* forward declaration, creates a random texture; uses glTexSubImage2D if 
   update is non-zero (otherwise glTexImage2D) */
void createTexture(GLuint label, int update);

int init() 
{
  /* SDL initialization */
  if (SDL_Init(SDL_INIT_VIDEO) < 0)
    return 0;

  SDL_GL_SetAttribute(SDL_GL_DOUBLEBUFFER, 1);
  if (!SDL_SetVideoMode(width, height, 0, SDL_OPENGL)) {
    fprintf(stderr, "Couldn't initialize OpenGL");
    return 0;
  }

  /* OpenGL initialization */
  glClearColor(0, 0, 0, 0);
  glEnable(GL_TEXTURE_2D);
  glEnable(GL_BLEND);
  glBlendFunc(GL_ONE, GL_ONE_MINUS_SRC_ALPHA);

  glViewport(0, 0, width, height);

  glMatrixMode(GL_PROJECTION);
  glLoadIdentity();
  glOrtho(0, width, height, 0, -1, 1);
  glMatrixMode(GL_MODELVIEW);

  /* creating the VBO and the textures */
  glGenBuffers(1, &vbo);
  glBindBuffer(GL_ARRAY_BUFFER, vbo);
  glBufferData(GL_ARRAY_BUFFER, 1024, 0, GL_DYNAMIC_DRAW);

  glGenTextures(1, &tex);
  createTexture(tex, 0);

  glEnableClientState(GL_VERTEX_ARRAY);
  glEnableClientState(GL_TEXTURE_COORD_ARRAY);

  return 1;
}

/* draw a triangle at the specified point */
void drawTriangle(GLfloat x, GLfloat y)
{
  GLfloat coords1[12] = {0, 0, 0, 0, /**/200, 0, 1, 0, /**/200, 150, 1, 1};

  glLoadIdentity();
  glTranslatef(x, y, 0);

  glBufferSubData(GL_ARRAY_BUFFER, 0, sizeof(coords1), coords1);
  glVertexPointer(2, GL_FLOAT, 4*sizeof(GLfloat), (void*)0);
  glTexCoordPointer(2, GL_FLOAT, 4*sizeof(GLfloat),
    (char*)0 + 2*sizeof(GLfloat));

  glDrawArrays(GL_TRIANGLES, 0, 3);
}

void render()
{
  glClear(GL_COLOR_BUFFER_BIT);

  drawTriangle(250, 50);

  createTexture(tex, 0);
  drawTriangle(260, 120);

  SDL_GL_SwapBuffers();
}

void cleanup()
{
  glDeleteTextures(1, &tex);
  glDeleteBuffers(1, &vbo);

  SDL_Quit();
}

int main(int argc, char* argv[])
{
  SDL_Event event;

  if (!init()) return 1;

  while (1) {
    while (SDL_PollEvent(&event))
      if (event.type == SDL_QUIT)
        return 0;

    render();
  }

  cleanup();

  return 0;
}

void createTexture(GLuint label, int update)
{
  GLubyte data[texSize*texSize*4];
  GLubyte* p;
  int i, j;

  glBindTexture(GL_TEXTURE_2D, label);

  for (i = 0; i < texSize; ++i) {
    for (j = 0; j < texSize; ++j) {
      p = data + (i + j*texSize)*4;
      p[0] = ((i % 8) > 4?255:0);
      p[1] = ((j % 8) > 4?255:0);
      p[2] = ((i % 8) > 4?255:0);
      p[3] = 255 - i*3;
    }
  }

  if (!update)
    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA8, texSize, texSize, 0, GL_RGBA,
      GL_UNSIGNED_BYTE, data);
  else
    glTexSubImage2D(GL_TEXTURE_2D, 0, 0, 0, texSize, texSize, GL_RGBA,
      GL_UNSIGNED_BYTE, data);

  glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
  glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
} 
```

笔记：

1.  我正在使用 SDL，但我在 wxWidgets 中看到了同样的情况，所以这不是 SDL 相关的问题。

2.  如果我`glTexSubImage2D`对每一帧都使用（`update = 1`在 中使用`createTexture`），伪影就会消失。

3.  如果我禁用混合，则不再有伪影。

4.  我一直在 2010 年末的 MacBook Air 上对此进行测试，但我怀疑这是否特别相关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T16:53:55.940

这显然是一个 OpenGL 实现错误（只是在循环中调用 glTexImage2D 不会导致这种情况发生）。

# regex - 正则表达式 - 匹配数字范围，周围没有数字

> ID：14092206
> 
> 赞同：1
> 
> 时间：2012-12-30T16:05:34.610
> 
> 标签：regex, lookahead, lookbehind, digit

所以我有这样的事情：

> \b(0?[1-9]|[1-2][0-9]|3[0-6])\b

仅适用于匹配数字 1-36。但我可能会得到类似 S36 的东西，它不会匹配。我不能在数字的任何一侧假设一个干净的单词边界。

我想拥有它，这样它就可以将 1-36 与除两边其他数字之外的任何东西匹配。

我认为这样的事情会起作用，但它没有：

> (?<=\D)(0?[1-9]|[1-2][0-9]|3[0-6])(?=\D)

它应该在开始时进行积极的向后看，以确保在数字之前除了数字之外没有任何东西，在数字之后进行积极的向前看，以确保在它之后也是如此。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T16:10:13.050

如果您的引擎不支持后视/前瞻，那么您仍然可以匹配包括非数字在内的整个内容并选择您感兴趣的捕获。

```
(?:^|[^1-9])(0?[1-9]|[1-2][0-9]|3[0-6])(?:$|[^1-9]) 
```

在此示例中，您的结果将在捕获 1 中（“外部”匹配在非捕获组中）。

请注意，使用 .NET，您确实完全支持后向和前瞻，因此以下内容应该可以工作：

```
(?<![0-9])(?:0?[1-9]|[1-2][0-9]|3[0-6])(?![0-9]) 
```

这使用负环视而不是正环视。否则，字符串开头或结尾的数字将不匹配，因为在没有字符的地方需要非数字字符，导致不匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T16:10:44.710

您可以在开头和结尾使用 [^0-9] ，然后通过查看适当的捕获组（在本例中为第二个）来获取数字：

```
(^|[^0-9])(0?[1-9]|[1-2][0-9]|3[0-6])($|[^0-9]) 
```

# php - PHP 删除标点符号（无破折号）

> ID：14092208
> 
> 赞同：4
> 
> 时间：2012-12-30T16:05:43.870
> 
> 标签：php, replace, character

我在stackoverflow上找到了下面的脚本，它用破折号替换了特殊字符，以建立干净的url。但是，它做得不好，因为它用破折号代替标点符号，如下面的“坏”示例所示。所以，相反，我希望明确标点符号不要被任何东西替换，而是要被删除......没有空格，没有破折号。对此的任何帮助将不胜感激。

例子：

```
今天的天气很热！
```

好的：

```
今天天气很热
```

坏的：

```
今天天气很热
```

这个脚本做了不好的例子......如何让它做好事？：

```
function slugUrl($string) {
    $string = strtolower($string);
    $string = preg_replace('/[^a-zA-Z0-9]/i','-',$string);
    $string = preg_replace("/(-){2,}/",'$1',$string);
    return $string;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T16:09:23.127

那这个呢？（我只是先删除了标点符号）

```
function slugUrl($string){
    $string = strtolower($string);
    $string = preg_replace('/[!?\']/','',$string);
    $string = preg_replace('/[^a-zA-Z0-9]/i','-',$string);
    $string = preg_replace("/(-){2,}/",'$1',$string);
    return $string;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T16:21:04.297

您可以通过首先删除所有您不感兴趣的字符然后仅用破折号替换空格来实现这一点。

另外[`preg_replace`](http://php.net/preg_replace)允许在使用数组时一次运行多个替换操作（[Demo](http://eval.in/5618)）：

```
$subject = 'today\'s weather is hot!';

$buffer = trim(strtolower($subject));
$result = preg_replace(['/[^a-z0-9 ]/', '/\s+/'], ['', '-'], $buffer); 
```

结果（不带引号）：

```
"todays-weather-is-hot" 
```

以函数的形式：

```
function slugUrl($string){
    return preg_replace(
        array('/[^a-z0-9 ]/', '/\s+/'), 
        array(''            , '-'    ), 
        trim(strtolower($string))
     );
} 
```

# android - Android BitmapDrawable 回收/再利用

> ID：14092212
> 
> 赞同：3
> 
> 时间：2012-12-30T16:06:50.337
> 
> 标签：android, bitmap

在下面的代码中，我有两个位图（我省略了创建它们的代码，因为这与我的问题无关）并且我的布局中还有一个 ImageView。我让 ImageView 将第一个位图显示为可绘制对象，然后使其显示第二个位图，再次作为可绘制对象。

我知道位图可以回收，我的问题与“新 BitmapDrawable”部分有关，因为我无法弄清楚 BitmapDrawable 到底是什么。它只是一个引用还是每次创建时都会占用内存？换句话说，在我为 bitmap2 创建另一个 BitmapDrawable 之前，我为 bitmap1 创建的 BitmapDrawable 是否需要被删除/回收？

谢谢。

```
Bitmap bitmap1,bitmap2;

...assume bitmap1 and bitmap2 contain valid bitmaps...

// get imageview
ImageView iv = (ImageView)findViewById(R.id.my_imageview);

// make the imageview display bitmap1
iv.setImageDrawable(new BitmapDrawable(getResources(),bitmap1));        

// now make the imageview display bitmap2
iv.setImageDrawable(new BitmapDrawable(getResources(),bitmap2)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T16:17:54.560

只要您需要，就应该保留位图。创建新位图的成本很高。如果没有足够的内存可用，GC 将触发并且您的应用程序将在这段时间内停止。

看到这个有效地显示位图 [http://developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)

# c - 使用 LLVM 使用 intel 语法进行内联汇编：表达式中的未知标记

> ID：14092215
> 
> 赞同：6
> 
> 时间：2012-12-30T16:07:55.803
> 
> 标签：c, llvm, inline-assembly

在 Xcode 中使用 Apple LLVM 4.1 编译此代码时出现错误：

```
#include <stdio.h>

int main(int argc, const char * argv[])
{
    int a = 1;
    printf("a = %d\n", a);

    asm volatile(".intel_syntax noprefix;"
        "mov [%0], 2;"
        :
        : "r" (&a)
        );

    printf("a = %d\n", a);
    return 0;
} 
```

错误是`Unknown token in expression`。

如果我使用 AT&T 语法，它可以正常工作：

```
asm volatile("movl $0x2, (%0);"
                 :
                 : "r" (&a)
                 : "memory"
                 ); 
```

第一个代码有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-30T17:39:41.653

看起来编译器正在翻译`%0`为`%reg`（`%rcx`在我的机器上），而汇编器不喜欢`%`（因为它处于 intel 模式）。

我不知道是否可以将自动寄存器分配功能（[扩展 asm](http://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html)）与 intel 语法混合使用，因为我还没有看到任何示例。

关于 gcc 内联汇编的良好文档通常很难获得，并且 clang 在其[文档](http://clang.llvm.org/compatibility.html#inline-asm)中声明它在该领域与 gcc 大部分兼容......

# jquery - 单击另一个链接时从链接中删除突出显示

> ID：14092216
> 
> 赞同：0
> 
> 时间：2012-12-30T16:08:09.250
> 
> 标签：jquery, hyperlink, highlight

我正在处理的网站上有一个链接循环。每个链接都有一个唯一的 ID，当我单击其中一个链接时，该链接将以粗体文本突出显示。如果我单击另一个链接，突出显示的链接将替换为我刚刚单击的链接。

示例代码（请参阅 jsFiddle 示例）：

```
$('body').on('click', '#link-1', function() {
    if($(this).hasClass('normal-text')) {
        $(this).removeClass('normal-text');
        $(this).addClass('bold-text');

    } else if($(this).hasClass('bold-text')) {
        $(this).removeClass('bold-text');
        $(this).addClass('normal-text');
    }
}); 
```

我怎样才能做到这一点？

基本演示：http: [//jsfiddle.net/edgren/3VXVL/](http://jsfiddle.net/edgren/3VXVL/)

现场演示，确切了解我*的意思：问题已解决*

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T16:13:15.787

试试这个[http://jsfiddle.net/3VXVL/4/](http://jsfiddle.net/3VXVL/4/)

javascript:

```
$(document).ready(function() {
    $('body').on('click', '.link', function() {
        $('.bold-text').removeClass('bold-text');
        $(this).addClass('bold-text');
    });
}); 
```

html:

```
<a href="javascript:void(0)" id="link-1" class="link normal-text">Link 1</a> - 
<a href="javascript:void(0)" id="link-2" class="link normal-text">Link 2</a> - 
<a href="javascript:void(0)" id="link-3" class="link normal-text">Link 3</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T16:13:06.247

您可以选择该类的链接并将其删除，如下所示：

```
$('.bold-text').removeClass('bold-text').addClass('normal-text'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T16:15:15.017

您可以为每个链接分配一个类，例如“.changeableLink”。然后，您可以执行以下操作：

```
var allLinks = $('.changeableLink');
$('body').on('click', '.changeableLink',function() {
      allLinks.removeClass('bold-text');
      $(this).addClass('bold-text');
}); 
```

# eclipse - XTend 的命令行编译器

> ID：14092217
> 
> 赞同：8
> 
> 时间：2012-12-30T16:08:14.657
> 
> 标签：eclipse, command-line, compiler-construction, xtend

大家
好，我找到了 XTend (http://xtend-lang.org)，它听起来真的很棒！但是，我看不到这种语言的任何独立命令行编译器。它似乎只能在eclipse下运行。我做了一些研究，发现有人说它有一个命令行编译器，但我找不到下载链接。
编译器是否存在、独立，还是需要 eclipse 才能使用？
问候

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-30T18:58:45.843

它没有记录，但在 Xtend 代码库中确实有一个命令行编译器 - 与[Maven 插件](http://www.eclipse.org/xtend/download.html#MavenSupport)使用的相同（记录在 Xtend 主页中）。

如果 Maven 插件不适合您，那么您可以直接从位于[http://build.eclipse.org/common/xtend/maven/org/eclipse/xtend/org.eclipse的 Maven 存储库下载独立 jar 版本.xtend.standalone/2.3.1/](http://build.eclipse.org/common/xtend/maven/org/eclipse/xtend/org.eclipse.xtend.standalone/2.3.1/)（对于 2.3.1 版），并从中执行[org.eclipse.xtend.core.compiler.batch.Main](https://github.com/eclipse/xtext/blob/master/plugins/org.eclipse.xtend.core/src/org/eclipse/xtend/core/compiler/batch/Main.java)类。

该类执行xtend编译器，可以显示使用信息（也可以从[源文件](https://github.com/eclipse/xtext/blob/master/plugins/org.eclipse.xtend.core/src/org/eclipse/xtend/core/compiler/batch/Main.java)中读取）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-01-04T08:21:04.797

您可以使用 xtend 独立编译器。就我而言，我将以下 .jar 文件复制到名为 xtendc 的文件夹中：

```
com.google.guava_21.0.0.v20170206-1425.jar
com.google.inject_3.0.0.v201312141243.jar
javax.inject_1.0.0.v20091030.jar
org.antlr.runtime_3.2.0.v201101311130.jar
org.apache.log4j_1.2.15.v201012070815.jar
org.eclipse.emf.common_2.15.0.v20180914-1817.jar
org.eclipse.emf.ecore.xmi_2.15.0.v20180706-1146.jar
org.eclipse.emf.ecore_2.16.0.v20181124-0637.jar
org.eclipse.equinox.common_3.10.200.v20181021-1645.jar
org.eclipse.jdt.core_3.16.0.v20181130-1748.jar
org.eclipse.xtend.core_2.16.0.v20181203-1347.jar
org.eclipse.xtend.lib.macro_2.16.0.v20181203-0507.jar
org.eclipse.xtext.common.types_2.16.0.v20181203-0528.jar
org.eclipse.xtext.util_2.16.0.v20181203-0514.jar
org.eclipse.xtext.xbase.lib_2.16.0.v20181203-0507.jar
org.eclipse.xtext.xbase_2.16.0.v20181203-0528.jar
org.eclipse.xtext_2.16.0.v20181203-0514.jar
org.objectweb.asm_7.0.0.v20181030-2244.jar 
```

然后，在那个文件夹中，我执行了批处理编译器的 CLI 主类：

```
java -cp "*" org.eclipse.xtend.core.compiler.batch.Main -d <path-to-xtend-gen-folder>  -useCurrentClassLoader <path-to-src-folder> 
```

主类的 CLI 用法记录如下：

```
Usage: Main <options> <source directories>
where possible options include:
-d <directory>                      Specify where to place generated xtend files
-tp <path>                          Temp directory to hold generated stubs and classes
-cp <path>                          Specify where to find user class files
-encoding <encoding>                Specify character encoding used by source files
-javaSourceVersion <version>        Create Java Source compatible to this version. Can be: 1.5, 1.6, 1.7, 1.8, 9, 10
-noSuppressWarningsAnnotation       Don't put @SuppressWarnings() into generated Java Code
-generateGeneratedAnnotation        Put @Generated into generated Java Code
-includeDateInGeneratedAnnnotation  If -generateGeneratedAnnotation is used, add the current date/time.
-generateAnnotationComment <string> If -generateGeneratedAnnotation is used, add a comment.
-useCurrentClassLoader              Use current classloader as parent classloader
-writeTraceFiles                    Write Trace-Files 
```

所以你需要在那里传递你的类路径。

# objective-c - 类工厂方法实现

> ID：14092222
> 
> 赞同：2
> 
> 时间：2012-12-30T16:08:50.837
> 
> 标签：objective-c

因此，我正在阅读 Apple 的 Objective-C 文档（在进入 iphone 开发之前）。其中一个练习表明我应该创建一个指定的初始化程序（带有 3 个参数）和合适的工厂方法。

现在我根据我的理解做了这个，但我无法实现工厂方法，因为我不知道我是否应该在其实现中使用 alloc 和 init ？

练习：

> 声明并实现一个新的指定初始化程序，用于使用指定的名字、姓氏和出生日期以及合适的类工厂方法创建 XYZPerson。不要忘记重写 init 以调用指定的初始化程序。

编码：

```
//.h 

-(id)initWithNameAndDob:(NSString *)fName last:(NSString *)lName birth:(NSDate *) dob;

//.m
-(id)initWithNameAndDob:(NSString *)fName last:(NSString *)lName birth:(NSDate *)dob{
    self = [super init];
    return [self initWithNameAndDob:fName last:lName birth:dob];
} 
```

实施中缺少什么？

谢谢你，

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-30T16:21:30.770

> 声明并实现一个新的指定初始化器，用于使用指定的名字、姓氏和出生日期创建 XYZPerson...

您在声明中是正确的，但您的实现是递归的，因为它正在调用自己。做类似的事情

```
//.h
-(id)initWithNameAndDob:(NSString *)fName last:(NSString *)lName birth:(NSDate *) dob;
//.m
-(id)initWithNameAndDob:(NSString *)fName last:(NSString *)lName birth:(NSDate *)dob{
    if(self = [super init]) {
        // use the parameters to do something, eg.
        _fName = fName; // assuming you have an ivar called _fName 
        _lName = lName; // assuming you have an ivar called _lName
        _dob = dob; // assuming you have an ivar called _dob
    }
    return self;
} 
```

然后

> ...以及合适的类工厂方法。

工厂方法是一种产生对象实例的类方法。最常见的实现是让它分配和初始化对象的新实例并返回它。

```
//.h
+(instancetype)personWithNameAndDob:(NSString *)fName last:(NSString *)lName birth:(NSDate *) dob {

//.m
+(instancetype)personWithNameAndDob:(NSString *)fName last:(NSString *)lName birth:(NSDate *) dob {
return [[XYZPerson alloc] initWithNameAndDob:fName last:lName birth:dob];
} 
```

最后

> 不要忘记重写 init 以调用指定的初始化程序。

由于您设计的初始化程序是`initWithNameAndDob:last:birth:`您的`init`实现必须调用它。设计的初始化器的参数必须是合理的默认值，在这种情况下`nil`很好。

```
-(id)init {
     return [self initWithNameAndDob:nil last:nil birth:nil];
 } 
```

最后，我想指出您对初始化程序的命名约定并不是那么好。一个更合适和可读的将是

```
-(id)initWithFirstName:(NSString *)fName lastName:(NSString *)lName dateOfBirth:(NSDate *) dob; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-12-04T08:07:20.130

Gabriele Petronella 的出色解释，但存在问题。

```
+(instancetype)personWithNameAndDob:(NSString *)fName last:(NSString *)lName birth:(NSDate *) dob {
return [[XYZPerson alloc] initWithNameAndDob:fName last:lName birth:dob];
}

It should be replaced with 
+(instancetype)personWithNameAndDob:(NSString *)fName last:(NSString *)lName birth:(NSDate *) dob {
return [[self alloc] initWithNameAndDob:fName last:lName birth:dob];
} 
```

**规则：** 不要用名字来引用你自己的类，因为你不知道具体的类是什么。您会无意中切断通过子类化扩展和覆盖类的能力。相反，要在类的工厂方法中分配实例：[self alloc] **参考：http:** [//qualitycoding.org/factory-method/](http://qualitycoding.org/factory-method/)

# mysql - MySQL全文问题-如何匹配同一查询中的两列？

> ID：14092223
> 
> 赞同：0
> 
> 时间：2012-12-30T16:08:59.273
> 
> 标签：mysql, full-text-search

我正在尝试运行这样的简单查询：

```
SELECT *, 
MATCH(`col1`,`col2`) 
AGAINST ('some text') AS score
FROM `mytable` ORDER BY score DESC 
```

这总是给出错误：

```
#1191 - Can't find FULLTEXT index matching the column list 
```

但是，如果我拆分列并执行两个这样的查询：

```
SELECT *, 
MATCH(`col1`) 
AGAINST ('some text') AS score
FROM `mytable` ORDER BY score DESC 
```

和：

```
SELECT *, 
MATCH(`col2`) 
AGAINST ('some text') AS score
FROM `mytable` ORDER BY score DESC 
```

然后就可以了。为什么我不能同时匹配两列？[我在手册](http://dev.mysql.com/doc/refman/5.0/en/fulltext-natural-language.html)上看到一个例子，几乎完全一样是这样的：

```
mysql> SELECT id, body, MATCH (title,body) AGAINST
    -> ('Security implications of running MySQL as root') AS score
    -> FROM articles WHERE MATCH (title,body) AGAINST
    -> ('Security implications of running MySQL as root'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T16:14:30.517

`#1191 - Can't find FULLTEXT index matching the column list`

您需要在两列上同时具有 FULLTEXT 索引。 `FULLTEXT (col1,col2)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T16:13:45.367

您需要有一个与您查询的字段匹配的索引。从[文档](http://dev.mysql.com/doc/refman/5.5/en/fulltext-restrictions.html)：

> MATCH() 列列表必须与表的某些 FULLTEXT 索引定义中的列列表完全匹配，

# php - jQuery -返回“未定义”的html

> ID：14092227
> 
> 赞同：1
> 
> 时间：2012-12-30T16:09:32.520
> 
> 标签：php, javascript, jquery, html

我试图在`<span>`单击按钮时增加 a 的 html 值，但 jQuery 说 a 的值`<span>`是未定义的，即使页面上实际显示了一个数字。这是生成 HTML 的 PHP 部分：

```
echo '<div class="box" style="background-color:'.$colours[0].'">
      <p>'.$confessions[0].'<br></p><br>
      <div class="overlay"></div>
      <div class="slide">
        <div class="slideleft">#'.$ids[0].'</div>
        <div class="slideright">
            <span class="upvote" id="'.$ids[0].'">Upvote</span>
            <span class="counter" id="'.$ids[0].'">"'.$counter[0].'"</span>
        </div>
      </div>
      </div>' 
```

这是应该使 HTML 变魔术的 jQuery：

```
$("body").on("click", ".upvote", function(e) {
    $.ajax({
        url: 'vote.php',
        data: {
            type: 'up',
            id: $(this).attr('id')
        },
        type: 'post',
        success: function(data) {
            if (data == 'ok') {
                alert($(this).next().html());
            } else {};
        }
    });
}); 
```

按下按钮时它确实会发出警报`upvote`，但它的值`undefined`与实际数字相反。任何人都可以对这个问题有所了解吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-30T16:11:25.590

`$(this)`将不再包含单击的元素，因为它在您的成功函数中超出范围，相反，您需要缓存该变量以在您的成功函数中使用。

例如：

```
$("body").on("click", ".upvote", function(e){
    var clicked = $(this);
    $.ajax({ 
        url: 'vote.php',
        data: { type: 'up', id: clicked.attr('id') },
        type: 'post',
        success: function(data) {
            if(data == 'ok'){
                alert(clicked.next().html());
            } else {
            };
        }
    });   
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T16:13:15.513

你的问题是这`this`不是你所期望的；在“成功”回调中，`this`已被反弹到[jqXHR](http://api.jquery.com/Types/#jqXHR)对象 - 并且得到它`next()`的是返回未定义的内容。

我建议显式捕获来解决这个问题：

```
$("body").on("click", ".upvote", function(e){
    var self = this; /// capture "this" explicitly here
    $.ajax({ 
        url: 'vote.php',
        data: { type: 'up', id: $(this).attr('id') },
        type: 'post',
        success: function(data) {
                    if(data == 'ok'){
                    alert($(self).next().html()); /// so now it is available here
                  } else {
                  }
        }
    });   
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T16:14:02.360

我认为这`$(this)`不是在这里引用您的 DOM 元素。在ajax函数之前尝试添加

```
var elem = $('.upvote'); 
```

并使用

`elem`而不是`$(this)`在ajax函数中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-30T17:10:48.847

传递`this`给`context`它以应用于方法中`ajax`

无需创建新的 var 即可访问`this`

查看文档：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

```
 $("body").on("click", ".upvote", function(e){

        $.ajax({ 
            url: 'vote.php',
            context: this, // capture this here instead
            data: { type: 'up', id: $(this).attr('id') },
            type: 'post',
            success: function(data) {
                if(data == 'ok'){
                    alert($(this).next().html()); /// so now it is available here
                } 
            }
        });   
    }); 
```

# c++ - 在 C++ 中定义短函数名别名的最安全方法是什么？

> ID：14092229
> 
> 赞同：8
> 
> 时间：2012-12-30T16:09:52.660
> 
> 标签：c++, function, macros, alias, c-preprocessor

假设我`Utility`在文件中有一个类`utility.h`：

```
class Utility {
public:
    static double longDescriptiveName(double x) { return x + 42; }
}; 
```

然后我发现我经常使用这个功能`longDescriptiveName(...)`。因此，当我喝了太多咖啡时，就像一个不负责任的 C++ 程序员一样，我创建了一个新文件`utilitymacros.h`并在其中添加以下内容：

```
#define ldn Utility::longDescriptiveName 
```

现在，我将其包括在我使用`"utilitymacros.h"`的任何地方，我的内心充满了喜悦，因为输入 3 个字母与 28 个字母相比更加方便。`*.cpp``ldn(...)`

**问题：**有比 with 更安​​全（更合适）的方法`#define`吗？

我注意到在包含 boost 标头之后我必须包含“utilitymacros.h”，我显然不喜欢它，因为它是冲突的标志（尽管我得到的 Boost 错误对于冲突是什么并不十分清楚） .

**说明 1：关于代码可读性**

如果您可能会说这会对代码的可读性产生负面影响，我向您保证不会，因为它是一小组经常使用的函数。一个广为人知的例子是`stoi`for `stringToInteger`。另一个是`pdf`for`probabilityDensityFunction`等。因此，如果我想执行以下操作，`stoi`我认为更具可读性：

```
int x = stoi(a) + stoi(b) + stoi(c) + stoi(d); 
```

比：

```
int x = Utility::stringToInteger(a) + Utility::stringToInteger(b)
        + Utility::stringToInteger(c) + Utility::stringToInteger(d); 
```

或者：

```
int x = Utility::stringToInteger(a);
x += Utility::stringToInteger(b);
x += Utility::stringToInteger(c);
x += Utility::stringToInteger(d); 
```

**说明 2：编辑器宏**

我使用 Emacs 作为我选择的 IDE 和 Kinesis 键盘，所以您知道我使用了大量的键盘宏、自定义键盘快捷键，以及实际修改我在编辑器中看到的内容与实际存储在 h/cpp 文件中的内容。但是，我仍然觉得在一些选择的情况下使用函数缩写的简单性和视觉可读性（如上所述）确实是我正在寻找的结果（这当然受一定程度的影响）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-30T16:14:50.203

`inline`您可以编写将调用转发到实际函数的函数，而不是宏：

```
inline double ldn(double x)
{
   return Utility::longDescriptiveName(x);
} 
```

这肯定比宏*安全。*

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-30T16:15:27.887

您可以使用函数参考：

```
double (&ldn)(double) = Utility::longDescriptiveName; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-30T16:13:29.023

在你的文本编辑器中配置一个片段/宏/类似的东西怎么样？这样你只需要输入 ldn 或类似的东西，代码就不必通过预处理器运行，以后很难找到错误。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-30T16:51:20.843

我不知道这是否有帮助，但我认为部分问题可能是使用了过于笼统的命名空间（或类名，在这种情况下），例如`Utility`.

如果不是`Utility::stringToInteger`，我们有

```
namespace utility {
  namespace type_conversion {
    namespace string {
      int to_int(const std::string &s);
    }
  }
} 
```

然后该函数可以像这样在本地使用：

```
void local_function()
{
  using namespace utility::type_conversion::string;

  int sum = to_int(a) + to_int(b) + to_int(c) + to_int(d);
} 
```

类似地，如果使用类/结构和静态函数（这可能有充分的理由），我们有类似的东西

```
strut utility {
  struct type_conversion {
    struct string {
      static int to_int(const std::string &s);
    };
  };
}; 
```

并且本地函数看起来像这样：

```
void local_function()
{
  typedef utility::type_conversion::string str;

  int sum = str::to_int(a) + str::to_int(b)
              + str::to_int(c) + str::to_int(d);
} 
```

我意识到我并没有告诉你任何你不知道的语法。它更多地提醒人们，命名空间和类的组织和结构本身在使代码更具可读性（和可写性）方面发挥着重要作用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-31T15:22:07.680

一种替代方法是重命名您的函数并将其放在命名空间而不是类中，因为它无论如何都是静态的。`utility.h`变成

```
namespace Utility {
    // long descriptive comment
    inline double ldn(double x) { return x + 42; }
} 
```

然后你可以`using namespace Utility;`输入你的客户端代码。

我知道有很多风格指南说短名称是一件坏事，但我不明白遵循某种风格然后规避它的意义。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-09T14:29:27.437

您可以使用别名模板（C++11 起）。

```
 using shortName = my::complicate::function::name; 
```

# oop - 存储库模式与简单数据访问层有何不同？

> ID：14092234
> 
> 赞同：23
> 
> 时间：2012-12-30T16:10:27.027
> 
> 标签：oop, design-patterns

在我研究存储库模式的过程中，我一直对我所阅读的内容感到困惑。我想知道人们是否（错误地？）在他们仅仅表示数据访问层时使用该词。

[由于在设计模式](https://rads.stackoverflow.com/amzn/click/com/0201633612)(GoF)的索引中找不到“存储库” ，因此我转向[了企业应用程序架构模式](https://rads.stackoverflow.com/amzn/click/com/0321127420)(Fowler)。Fowler 似乎很清楚（第 323 页），当他声明**客户端创建标准对象**并将其传递到存储库以获取结果时。它看起来像这样：

```
public class Person
{
    public List<Person> Dependents()
    {
        Repository repository = Registry.personRepository();
        Criteria criteria = new Criteria();
        criteria.equal(Person.BENEFACTOR, this);
        return repository.matching(criteria);
    }
} 
```

标准对象是使存储库成为存储库的原因吗？如果不是，那是什么？如果抽象持久性机制（并因此构造查询）是目标，那么存储库与简单的 DAL/ORM 调用有何不同，如下所示：

```
public class PersonLogic
{
    public List<Person> GetDependents()
    {
        IPersonData personData = DependencyContainer.Resolve<IPersonData>();
        return personData.GetDependents();
    }
} 
```

对我来说，区别如下所示：
* 使用存储库模式，客户端构造不同的标准对象并在其上调用 Matching() 方法。
* 使用简单的 DAL，客户只需根据需要调用不同的方法。

还有比这更多的吗？当程序员真正指的是 DAL 时，他们是否错误地使用了术语“存储库”？

**编辑**

David Osborne 将此链接发送到[Persistence Patterns](http://msdn.microsoft.com/en-gb/magazine/dd569757.aspx#id0400058)。它指出：

> 基本上，存储库模式只是意味着在您的持久性系统上放置一个外观，这样您就可以屏蔽应用程序的其余代码，而不必知道持久性是如何工作的。

这就是数据访问层的真正含义。在我看来，存储库和 DAL 确实是一回事，也许“真正的”存储库使用标准对象。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T15:10:15.080

查看**“使用 IQueryable 接口”**部分以及[扩展和增强订单和注册有界上下文](http://msdn.microsoft.com/en-us/library/jj591579)。它对 DAO/Repository 实现进行了深入而平衡的讨论。

正如 Bob Horn 随后强调的，[持久性模式](http://msdn.microsoft.com/en-gb/magazine/dd569757.aspx)文章总结了：

> 基本上，存储库模式只是意味着在您的持久性系统上放置一个外观，这样您就可以屏蔽应用程序的其余代码，而不必知道持久性是如何工作的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T20:49:15.940

总的来说，我同意作者的陈述，但我想补充一些细节

*Repository*和*DAL/ORM*之间的区别首先不仅抽象了持久性机制，还提供了[**类集合**接口来**访问域对象**……并将域对象与数据库访问代码的细节**隔离开**](http://martinfowler.com/eaaCatalog/repository.html)来：

## 差异

对于外部层，例如业务逻辑：

*   有助于避免[泄漏抽象](http://www.joelonsoftware.com/articles/LeakyAbstractions.html)。外部层依赖于*Repository的**抽象*，而不是*DAL/ORM*的特定实现。*因此，您可以在使用Repository*时避免所有基础架构和逻辑依赖项。
****   使用*域对象*而不是 POJO/POCO/DTO 的实例进行操作*   *CRUD*操作应用于*Repository*提供的*类集合接口*，而不是特定的*DAL/ORM*方法。例如[.net](/questions/tagged/.net "显示标记为“.net”的问题")：使用实现的集合，而不是[实体框架](/questions/tagged/entity-framework "显示标记为“实体框架”的问题")上下文或[休眠](/questions/tagged/nhibernate "显示标记为“休眠”的问题")会话**`IEnumerable`*****

 ***## 相似之处

*存储库*下面包含*DAL/ORM*并用于相同的目的***

# java - PTX 到 OpenCl 中的目标翻译

> ID：14092236
> 
> 赞同：0
> 
> 时间：2012-12-30T16:10:54.673
> 
> 标签：java, opencl, bytecode, ptx

在 OpenCL 中，“PTX（就像 java 中的字节码）到目标转换器”是一个解释器（就像我们在 java 中的字节码一样）还是一个提前的汇编器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T17:57:09.950

Java 是即时编译的，而不是解释的。

PTX 也在加载时编译。

不确定 OpenCL，但 CUDA 还可以将给定架构集的预编译二进制文件存储在可执行文件中（以及 JIT 其余部分）。它是 CUDA 编译器中的一个选项。

# ruby - 即使控制器和动作存在，Rspec 中的 ActionController::RoutingError

> ID：14092237
> 
> 赞同：2
> 
> 时间：2012-12-30T16:11:05.030
> 
> 标签：ruby, ruby-on-rails-3, rspec, rspec-rails

我在为我的 Omniauth 授权控制器编写测试时遇到了 Rspec 的问题。

这是我的路线.rb

```
MyWebApp::Application.routes.draw do

  get "static/index"

  match "login" =>  'user_sessions#new'

  match 'logout' => 'user_sessions#destroy'

  match "api" => "api#content", :via => :get
  match "api/node_tree" => "api#node_tree", :via => :get

  match "/auth/:provider/callback" => "oauth_authorizations#create"
  match "/auth/failure" => "oauth_authorizations#failure"
  match "/auth/:provider" => "oauth_authorizations#blank"

  resources :users do
    resources :apps do
      resources :nodes
    end
  end

  resources :user_sessions
end 
```

oauth_authorization_controller_spec.rb

```
it "should create a new authorization entry for the user" do
  expect {get :create }.to change(Authorization, :count).by(1)
end 
```

oauth_authorization_controller.rb

```
class OauthAuthorizationsController < ApplicationController

  def create

  end

end 
```

当我运行我的规范时，我收到以下错误

```
Failures: 

  1) OauthAuthorizationsController when a current user session already exists should create a new authorization entry for the user
     Failure/Error: expect {get :create }.to change(Authorization, :count).by(1)
     ActionController::RoutingError:
       No route matches {:controller=>"oauth_authorizations", :action=>"create"} 
```

谁能帮我找出这背后的原因，因为从控制器代码中可以清楚地看出，{:controller=>"oauth_authorizations", :action=>"create"} 确实存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T16:25:28.010

尝试用帖子替换 get http 动词：

```
 expect {post :create }.to change(Authorization, :count).by(1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T07:29:36.587

问题是路由中指定的提供者参数，

```
match "/auth/:provider/callback" => "oauth_authorizations#create" 
```

没有通过测试。

通过它修复了测试。

```
get :create, :provider => omniauth_hash['provider'] 
```

所以测试将被重写为。

```
it "should create a new authorization entry for the user" do
  expect {get :create, provider => omniauth_hash['provider'] }.to change(Authorization, :count).by(1)
end 
```

可能这会对某人有所帮助。

# java - 是否可以直接使用 Java 字节码指令编写程序？

> ID：14092246
> 
> 赞同：11
> 
> 时间：2012-12-30T16:11:39.897
> 
> 标签：java

在 .NET 平台中，可以直接使用通用中间语言编写程序并使用 IL 汇编程序 (ILASM) 编译源代码。

例如下面的代码是“Hello World”程序。

```
.assembly Hello {}
.assembly extern mscorlib {}
.method static void Main()
{
    .entrypoint
    .maxstack 1
    ldstr "Hello, world!"
    call void [mscorlib]System.Console::WriteLine(string)
    ret
} 
```

是否可以像 .NET 一样直接使用 Java 字节码指令编写程序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-30T16:15:28.350

你可以看看茉莉花。来自维基百科，

> 一些项目提供 Java 汇编器以支持手动编写 Java 字节码。汇编代码也可以由机器生成，例如由针对 Java 虚拟机的编译器生成。著名的 Java 汇编器包括：
> 
> [Jasmin](http://jasmin.sourceforge.net/)采用 Java 类的文本描述，使用 Java 虚拟机指令集以类似汇编的简单语法编写，并生成 Java 类文件。
> 
> Jamaica，Java 虚拟机的宏汇编语言。Java 语法用于类或接口定义。方法主体是使用字节码指令指定的。

注意：我个人没有使用过任何这些工具。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-30T16:24:21.290

你可以使用茉莉花

```
 .class public HelloWorld
 .super java/lang/Object

 .method public static main([Ljava/lang/String;)V
 .limit stack 3
 .limit locals 1

  getstatic      java/lang/System/out Ljava/io/PrintStream;
  ldc            "Hello World."
  invokevirtual  java/io/PrintStream/println(Ljava/lang/String;)V

 return

.end method 
```

你编译它使用：

> java -jar jasmin.jar hello.j

你也可以参考[这个](https://stackoverflow.com/questions/3150254/programming-in-java-bytecode)

# python - 在提交表单时使用 Tweepy OAuth 对用户进行身份验证

> ID：14092248
> 
> 赞同：2
> 
> 时间：2012-12-30T16:12:09.127
> 
> 标签：python, django, oauth, tweepy

我正在构建一个需要使用 OAuth 的网络应用程序（使用 Django）。我正在使用 Tweepy 并已安装并导入它。我现在不知道如何设置它，以便当用户点击我表单上的“提交”按钮时，他们会被要求通过 Twitter 登录。我遵循了许多不同的教程/博客来尝试让它工作，但我似乎无法破解它。

这是我追求的流程：

*   用户使用表单提交消息
*   要求用户验证 Twitter 帐户
*   来自表单的消息和 Twitter 详细信息（@username、屏幕名称、个人资料图片等）存储在数据库中（使用 SQLite3）
*   用户被重定向到 index.html，在那里他们可以看到他们在类似 Twitter 的“最新消息”提要中提交的消息。

我真的被困住了，所以任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:32:10.997

我尝试做同样的事情，除此之外，表单内容会自动发送到用户墙。

你需要按照这里的教程

[http://packages.python.org/tweepy/html/auth_tutorial.html#oauth-authentication](http://packages.python.org/tweepy/html/auth_tutorial.html#oauth-authentication)

# c - 全局变量未在线程中保留其值

> ID：14092253
> 
> 赞同：1
> 
> 时间：2012-12-30T16:12:45.760
> 
> 标签：c, multithreading, fork

我做了一个多线程服务器，它有一个指向链表的全局指针，在线程中我试图插入一些数据，但是数据（我插入的）没有保留，有可能在线程中全局值没有保留. 我正在使用以下代码（这是最简单的版本。）

```
struct node {
  int cn; //

  struct node *next;
};

/*GLOBAL VARIABLES*/
struct node *start; //Global pointer to Linked List
/* END */

int main(int argc, char *argv[]) {

    start = (struct node *)malloc(sizeof(struct node));
    start -> cn =0;

    int pid;
    /* Declaration of Server goes here */
    printf("Server Running ...\n");
    while (1) {

        /* accepting socket*/

        pid = fork();
        if (pid < 0)
            error("ERROR on fork");
        if (pid == 0)  {
            close(serverSocket);
            dostuff(childSocket,start);
            exit(0);
        }
        else
            close(childSocket);

    }
    return 0;
}

void dostuff (int sock, struct node *pointer){

    returnStatus = read(sock, &requestToJoin, sizeof(int));
    if (returnStatus < 0) 
        error("ERROR reading from socket");
    else{
        /* Insert Data to global Pointer */
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T16:15:16.280

这是一个多进程服务器而不是多线程，全局数据不在父进程和子进程之间共享，它在某个点被重复，如果你想在多个进程或 pthreads 之间共享数据，你应该查看[共享](https://computing.llnl.gov/tutorials/pthreads/)[内存](http://www.cs.cf.ac.uk/Dave/C/node27.html)使用线程（共享其父内存）。如果您的编译器支持[C11](http://en.wikipedia.org/wiki/C11_%28C_standard_revision%29)，您还可以使用`<threads.h>`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-30T16:16:24.290

您使用的是*multi-process*而不是*multi-threading*。

线程共享全局内存（即全局变量），但进程不共享内存（除非您设置共享内存），并且每个线程都有自己的一组全局变量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-30T22:31:47.203

您正在使用 fork()。它创建了一个与您的实际进程完全相同的进程，但它不共享相同的内存。如果您使用线程，所有内存寻址都将被共享，并且您需要同步对共享内存位置的访问以满足数据的一致性。

# html - 使用 Firefox/IE 丢失发布的数据，Safari 工作

> ID：14092264
> 
> 赞同：0
> 
> 时间：2012-12-30T16:13:21.193
> 
> 标签：html, forms, post

我正在调试一个 php 脚本，并将其范围缩小到：

```
index.php:
<html>
<body>
<?php
$id = "42";
echo "<form action=\"handle_data.php\" method=\"post\">";
echo "<input type=\"image\" src=\"my_button.png\" name=\"id\" value=\"$id\">";
echo "</form>";
?>
</body>
</html> 
```

_

```
handle_data.php:
<?php

echo 'PHP Input:<br />';
echo file_get_contents('php://input');
echo '<br />';
echo 'Post variables:<br />';
print_r($_POST);

?> 
```

在 Mac 或 iOS 设备上使用 Safari 效果很好：

```
PHP Input:
id.x=108&id.y=83&id=42
Post variables:
Array ( [id_x] => 108 [id_y] => 83 [id] => 42 ) 
```

但是，使用带有 IE8 或 Firefox 17 的 Win7，发布的数据“42”丢失了 =/

```
PHP Input:
id.x=128&id.y=96
Post variables:
Array ( [id_x] => 128 [id_y] => 96 ) 
```

为什么哦为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T17:04:01.030

根据[这个博客](http://blog.lexity.com/blog/2011/6/18/input-typeimage-considered-harmful.html)，Firefox 和 IE 都遵循 HTML5 标准。它提供了一个 CSS 替代方案。

`input`将您的元素更改为：

```
<input type='submit' name='id' value='$id' class='mySubmit' /> 
```

并添加 CSS：

```
input.mySubmit {
  border: none;
  cursor: pointer;
  display: inline-block;
  text-indent: -3000px;
  background: url(my_button.png) no-repeat 50% 50%;
  width: 50px;
  height: 20px;
} 
```

# debugging - 从 GHC 调试对象名称

> ID：14092274
> 
> 赞同：1
> 
> 时间：2012-12-30T16:14:36.023
> 
> 标签：debugging, haskell, ghc, object-files

我由 GHC 编译的程序崩溃*，并`gdb`显示调用函数的名称为`s10kL_info`. `s10kL_info`是否可以通过让 GHC 将调试符号写入目标文件来显示人类可读的函数名称，或者至少是上述函数的人类可读的名称？

[*（我的崩溃可能是使用了外部库或者不安全的IO函数造成的）]

# objective-c - 以一定比例以编程方式截取屏幕截图（iOS）

> ID：14092276
> 
> 赞同：1
> 
> 时间：2012-12-30T16:15:01.130
> 
> 标签：objective-c, ios, screenshot

我想截取 UIImageView 的屏幕截图，但问题是我希望它的宽度是原始尺寸的两倍。一些忠告？

这是我当前的代码：

```
UIGraphicsBeginImageContext(myImageView.bounds.size);
[myImageView.view.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();             
UIGraphicsEndImageContext(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T16:27:16.490

我相信您可以`UIGraphicsBeginImageContextWithOptions`将比例选项设置为 2。

# android - 如何制作具有 3 视图的布局中心

> ID：14092277
> 
> 赞同：0
> 
> 时间：2012-12-30T16:15:03.423
> 
> 标签：android, android-layout

我会这样做：![在此处输入图像描述](../Images/374227daaed76d4d634edcd4de385948.png)

你是怎样做的？我已经固定了绘图的位置，例如是否有其他使用 TableLayout 的方法，因为我会将绘图与其他视图集成在一起。谢谢你。

```
public class CaseView extends View {

private static final float MINP = 1f;
private static final float MAXP = 1f;

private Bitmap mBitmap1, mBitmap2, mBitmap3, _scratch1 = null,
        _scratch2 = null;
private Canvas mCanvas1;
private Canvas mCanvas2, mCanvas3;
private Path mPath1, mPath2;
private Paint mBitmapPaint1;
private Paint mBitmapPaint2, mBitmapPaint3;
private Paint mPaint1;
private Paint mPaint2, mPaint3;
private int IdImage;
private int positionTop = 0;
private int positionLeftOne = 0;
private int positionLeftTwo = 0;
private int positionLeftThree = 0, mHeightCase = 100,
        widthBetweenCase = 0;
private String colorGold = "#E29F2B";
private boolean firstTime = false;

// private Bitmap image;
// private Paint paint;

boolean isErase;

public CaseView(Context ctx, AttributeSet attrs) {
    super(ctx, attrs);
}

public CaseView(Context c, int resId, DisplayMetrics metrics) {
    super(c);

    this.positionTop = metrics.heightPixels / 2 - mHeightCase / 2;
    int weightRest = metrics.widthPixels - 3 * mHeightCase;
    this.widthBetweenCase = weightRest / 4;
    this.positionLeftOne = widthBetweenCase;
    this.positionLeftTwo = (widthBetweenCase * 2) + mHeightCase;
    this.positionLeftThree = (widthBetweenCase * 3) + mHeightCase * 2;
    firstTime = true;

    mPaint1 = new Paint();
    // mPaint1.setAntiAlias(true);
    // mPaint1.setDither(true);
    mPaint1.setColor(Color.TRANSPARENT);
    mPaint1.setStyle(Paint.Style.STROKE);
    mPaint1.setStrokeWidth(60);

    mPaint2 = new Paint();
    // mPaint2.setAntiAlias(true);
    // mPaint2.setDither(true);
    mPaint2.setColor(Color.TRANSPARENT);
    mPaint2.setStyle(Paint.Style.STROKE);
    mPaint2.setStrokeWidth(60);

    // create a square
    mBitmap1 = Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888);
    for (int i = 0; i < 100; i++) {
        for (int j = 0; j < 100; j++) {
            mBitmap1.setPixel(i, j, Color.parseColor(colorGold));
        }

    }
    mBitmap2 = Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888);
    for (int i = 0; i < 100; i++) {
        for (int j = 0; j < 100; j++) {
            mBitmap2.setPixel(i, j, Color.parseColor(colorGold));
        }

    }

    mCanvas1 = new Canvas(mBitmap1);
    mCanvas2 = new Canvas(mBitmap2);
    mPath1 = new Path();
    mPath2 = new Path();
    mBitmapPaint1 = new Paint(Paint.DITHER_FLAG);
    mBitmapPaint2 = new Paint(Paint.DITHER_FLAG);
    mBitmapPaint3 = new Paint(Paint.DITHER_FLAG);
    IdImage = resId;
    if (_scratch1 == null) {
        _scratch1 = BitmapFactory.decodeResource(getResources(), IdImage);
    }
    if (_scratch2 == null) {
        _scratch2 = BitmapFactory.decodeResource(getResources(), IdImage);
    }

}

@Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    super.onSizeChanged(w, h, oldw, oldh);

}

@Override
protected void onDraw(Canvas canvas) {
    Log.v("", "onDraw");

    canvas.drawColor(Color.WHITE);
    // first case
    canvas.drawBitmap(_scratch1, positionLeftOne, positionTop, null);
    canvas.drawBitmap(mBitmap1, positionLeftOne, positionTop,
            mBitmapPaint1);
    // canvas.drawBitmap(mBitmap1, null, new Rect(0,0,100,100),
    // mBitmapPaint1);

    // second case
    canvas.drawBitmap(_scratch2, positionLeftTwo,
            positionTop, null);
    canvas.drawBitmap(mBitmap2, positionLeftTwo,
            positionTop, mBitmapPaint2);

    // mBitmap = Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888);

    if ((mX < mHeightCase + positionLeftOne && mX >= positionLeftOne)
            && (mY < positionTop + mHeightCase && mY >= positionTop)) {
        // Log.v("onDraw", "x:" + mX + "/y:" + mY);
        mPaint1.setMaskFilter(null);
        mPath1.reset();
        Log.v("first case","clear at"+mX);
        mPaint1.setXfermode(new PorterDuffXfermode(Mode.CLEAR));

        // mBitmap.setPixel((int) mY,(int) mX, Color.TRANSPARENT);
        // mBitmap1.eraseColor(Color.TRANSPARENT);
        mCanvas1.setBitmap(mBitmap1);

        canvas.drawBitmap(mBitmap1, positionLeftOne, positionTop, mBitmapPaint1);
        invalidate();

    } else if ((mX < positionLeftTwo+mHeightCase && mX >= positionLeftTwo)
            && (mY < positionTop + mHeightCase && mY >= positionTop)) {
        // Log.v("onDraw", "x:" + mX + "/y:" + mY);
        mPaint2.setMaskFilter(null);
        mPath2.reset();
        mPaint2.setXfermode(new PorterDuffXfermode(Mode.CLEAR));

        // mBitmap.setPixel((int) mY,(int) mX, Color.TRANSPARENT);

        mCanvas2.setBitmap(mBitmap2);

        canvas.drawBitmap(mBitmap2, positionLeftTwo, positionTop, mBitmapPaint2);
        invalidate();

    } else {
        mPaint1.setXfermode(null);
        mPaint2.setXfermode(null);
    }

    super.onDraw(canvas);

    int pixelColor = mBitmap1.getPixel(50, 50);
    int red = Color.red(pixelColor);
    int green = Color.green(pixelColor);
    Log.v("red", "red:" + red + " /green:" + green);

    //invalidate();
}

private Bitmap prepareBitmap(Drawable drawable, int width, int height) {
    Bitmap bitmap = Bitmap.createBitmap(width, height,
            Bitmap.Config.ARGB_8888);
    drawable.setBounds(0, 0, width, height);
    Canvas canvas = new Canvas(bitmap);
    drawable.draw(canvas);
    return bitmap;
}

private float mX, mY;
private static final float TOUCH_TOLERANCE = 4;

private void touch_start(float x, float y) {
    mPath1.reset();
    mPath1.moveTo(x, y);
    mPath2.reset();
    mPath2.moveTo(x, y);
    mX = x;
    mY = y;
}

private void touch_move(float x, float y) {
    float dx = Math.abs(x - mX);
    float dy = Math.abs(y - mY);

    if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
        mPath1.quadTo(mX, mY, (x + mX) / 2, (y + mY) / 2);
        mPath2.quadTo(mX, mY, (x + mX) / 2, (y + mY) / 2);
        mX = x;
        mY = y;
    }
}

private void touch_up() {
    mPath1.lineTo(mX, mY);
    mPath2.lineTo(mX, mY);
    // commit the path to our offscreen
    mCanvas1.drawPath(mPath1, mPaint1);
    mCanvas2.drawPath(mPath2, mPaint2);
    // kill this so we don't double draw
    mPath1.reset();
    mPath2.reset();
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    float x = event.getX();
    float y = event.getY();
    Log.v("onTouchEvent", "x:" + x + "/y:" + y);

    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
        if ((mX < positionLeftOne+mHeightCase && mX >= positionLeftOne)
                && (mY < positionTop + mHeightCase && mY >= positionTop)) {
            mPath1.reset();
            mPaint1.setMaskFilter(null);
            mPaint1.setStrokeWidth(90);
            mPaint1.setXfermode(new PorterDuffXfermode(Mode.CLEAR));

            // mCanvas1.draw(x, y, 10, mPaint1);
            isErase = true;
        } else {
            mPaint1.setXfermode(null);
            isErase = false;
        }

        touch_start(x, y);
        invalidate();
        break;
    case MotionEvent.ACTION_MOVE:
        if (isErase) {
            mCanvas1.drawCircle(x, y, 20, mPaint1);
        }
        touch_move(x, y);
        invalidate();
        break;
    case MotionEvent.ACTION_UP:
        if (isErase) {
            mCanvas1.drawCircle(x, y, 20, mPaint1);
        }
        touch_up();
        invalidate();
        break;
    }
    return true;
      }

         } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T16:50:22.727

不太确定您的实际问题是什么。

如果您只是想达到图像中的视图，最好只使用 XML 视图。

创建一个水平线性布局，包括 3 个自定义方块，并使用 android:layout_weight 属性让它们自己填充空间。

# asp.net - 访问 ACS 令牌和声明规则不起作用

> ID：14092283
> 
> 赞同：1
> 
> 时间：2012-12-30T16:15:50.720
> 
> 标签：asp.net, azure, wif, acs

**编辑：**我找到了解决方案，看看最后。

我目前正在使用模拟器运行 Azure 的 ASP.NET Web 角色。我修改了默认实现，以便可以使用 Google 和 Live ID 作为身份提供者。我使用 Identity & Access Extension 来调整我的 Web.Config 文件。

问题是，当我通过 User 作为 ClaimsPrincipal 访问声明时，我只能看到来自身份提供者（例如 Google）的声明。我的依赖方程序的规则组（在 ACS 门户中定义）甚至没有关联的直通规则，但我仍然得到这些声明。另一方面，我添加了一个声明规则，将 Google 提供的名称声明类型更改为自定义输出值，但从后面的代码中我只能看到来自 Google 的值。

**我的问题：** 我需要做什么才能根据身份提供者的声明从发行者 (STS) 发出令牌，以及如何从代码中访问此令牌？

我正在使用：Visual Studio 2012 .NET Framework 4.5

我的 Web.config 的一部分：

```
<system.web>    
  <authentication mode="None" />    
  <httpRuntime targetFramework="4.5" requestValidationMode="4.5" />
...
</system.web>   
...  
<appSettings>
  <add key="ida:FederationMetadataLocation" value="https://mynamespace.accesscontrol.windows.net/FederationMetadata/2007-06/FederationMetadata.xml" />
  <add key="ida:Issuer" value="https://mynamespace.accesscontrol.windows.net/v2/wsfederation" />
  <add key="ida:ProviderSelection" value="ACS" />
</appSettings>
<system.webServer>
  <modules>
    <remove name="FormsAuthentication" />
    <add name="WSFederationAuthenticationModule" type="System.IdentityModel.Services.WSFederationAuthenticationModule, System.IdentityModel.Services, Version=4.0.0.0, Culture=neutral, PublicKeyToken=bla" preCondition="managedHandler" />
    <add name="SessionAuthenticationModule" type="System.IdentityModel.Services.SessionAuthenticationModule, System.IdentityModel.Services, Version=4.0.0.0, Culture=neutral, PublicKeyToken=bla" preCondition="managedHandler" />      
  </modules>
</system.webServer>
<system.identityModel>
  <identityConfiguration>
    <audienceUris>
      <add value="http://127.0.0.1:7777/" />
    </audienceUris>
    <issuerNameRegistry type="System.IdentityModel.Tokens.ConfigurationBasedIssuerNameRegistry, System.IdentityModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=bla">
      <trustedIssuers>
        <add thumbprint="myRelyingPartyThumbprint(from ACS Portal)" name="https://mynamespace.accesscontrol.windows.net/" />
      </trustedIssuers>
    </issuerNameRegistry>
    <certificateValidation certificateValidationMode="None" />
  </identityConfiguration>
</system.identityModel>
<system.identityModel.services>
  <federationConfiguration>
    <cookieHandler requireSsl="false" />
    <wsFederation passiveRedirectEnabled="true" issuer="https://mynamespace.accesscontrol.windows.net/v2/wsfederation" realm="http://127.0.0.1:7777/" requireHttps="false" />
  </federationConfiguration> 
```

用于将用户重定向到登录页面的 url 是：“ [https://mynamespace.accesscontrol.windows.net:443/v2/wsfederation?wa=wsignin1.0&wtrealm=http%3a%2f%2f127.0.0.1% 3a7777%2f](https://mynamespace.accesscontrol.windows.net:443/v2/wsfederation?wa=wsignin1.0&wtrealm=http%3a%2f%2f127.0.0.1%3a7777%2f) "

我的测试规则是这样的：

![在此处输入图像描述](../Images/1e5428db380925a777103fa1c564ba11.png)

**解决方案：**问题是我在 ACS 中将“ [http://localhost:7777/ ”作为域，但我在 Identity & Access 工具中指定了 127.0.0.1。](http://localhost:7777/)当我的程序请求 ACS 以选择身份提供者时，会自动为 127.0.0.1 创建一个名为 WebRole11 的依赖方，包括传递规则。所以我的自定义规则没有被应用，因为使用了自动创建的依赖方应用程序设置而不是我的。

# c++ - 没有数据的类的对象会占用内存吗？

> ID：14092284
> 
> 赞同：1
> 
> 时间：2012-12-30T16:16:04.340
> 
> 标签：c++

> **可能重复：**
> [C++：空类的对象的大小是多少？](https://stackoverflow.com/questions/621616/c-what-is-the-size-of-an-object-of-an-empty-class)

我有一个没有数据的类，如下所示

```
class A {}; 
```

我用它来定义一个对象

```
A a; 
```

我认为对象“a”有一个地址，对吧？它会占用一些内存吗？如果是这样，它占用多少字节？

如果对象“a”的类型为 void，会发生什么情况。非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T16:18:07.853

> 我认为对象“a”有一个地址，对吧？它会占用一些内存吗？如果是这样，它占用多少字节？

IIRC 标准要求每个对象都有一个地址，并且对象的最小大小（由 返回`sizeof`）为 1。话虽如此，优化器可能会使该变量消失（也许除非您明确要求其地址）。

> 除非它是位域 (9.6)，否则最派生对象应具有非零大小并应占用一个或多个字节的存储空间。基类子对象的大小可能为零。[...]
> 
> 除非对象是位域或大小为零的基类子对象，否则该对象的地址就是它占用的第一个字节的地址。既不是位字段也不是零大小的基类子对象的两个不同对象应具有不同的地址。⁴
> 
> 注意 4：在“as-if”规则下，如果程序无法观察到差异（1.9），则允许实现将两个对象存储在同一机器地址或根本不存储对象。

（C++11 §1.8 ¶5-6）

* * *

> 如果对象“a”的类型为 void，会发生什么情况。

`void`不能用于声明变量，因为它是“不完整类型”。

> 该`void`类型有一组空值。该`void`类型是无法完成的不完整类型。

（C++11 §3.9.1 ¶9）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-30T16:17:11.927

从理论上讲，它根本不需要占用任何内存。它可以一起优化。

但是，如果这就是您的意思，则不能`sizeof`是 a 类。`0`如果你 print out `sizeof(a)`，你（大多数时候）会得到`1`（不管它是什么，它都是一个非零值）。

另外，你不能有 type 的对象`void`，所以最后一个问题没有意义。

# javascript - jquery在更改时获取单选值

> ID：14092287
> 
> 赞同：2
> 
> 时间：2012-12-30T16:16:38.500
> 
> 标签：javascript, jquery, html

我正在使用：http: [//blogs.digitss.com/javascript/jquery-javascript/jquery-fancy-custom-radio-and-checkbox/](http://blogs.digitss.com/javascript/jquery-javascript/jquery-fancy-custom-radio-and-checkbox/)

简单的代码：

```
<input type="radio" id="a1" class="b1" name="shipping" checked value="single">
<input type="radio" id="a1" class="b1" name="shipping" value="married">
<input type="radio" id="a1" class="b1" name="shipping" value="widowed"> 
```

简单的头：

```
$(document).ready(function(){
    $(".radio").dgStyle();
    $(".checkbox").dgStyle();

}); 
```

如果我添加到 $(document).ready ，在 ($".checkbox").dgStyle(); 以下：

```
alert($('input:radio[name=shipping]:checked').val()); 
```

它工作正常！

但是 - 如果我做这样的事情，它不工作：

```
$(function() {

    $("input:radio[name=shipping]:checked").change(function() {
        alert("123");
    });

}); 
```

我试图删除：检查，仍然无法正常工作。

*   也许您知道相同颜色的不同 jquery 自定义按钮，它可以做到..？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-30T18:03:28.643

好的，我明白了：

```
$(".radio").click(function() {        
    alert('ID : ' + $(this).find('input:radio').prop('id'));
    alert('Value : ' + $(this).find('input:radio').prop('value'));
}); 
```

[在这里演示](http://jsfiddle.net/EP92E/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-30T16:22:08.883

您必须删除`:checked`选择器上的

```
$(function() {
    $("input:radio[name=shipping]").change(function() {
        alert('123');
    });
}); 
```

***[演示](http://jsfiddle.net/ds4Qg/2/)***

**注意**：请确保您不要在元素上使用相同的 ID，这确实是一种不好的做法，否则您将面临很多问题

# image - 将二进制文件转换为图像

> ID：14092289
> 
> 赞同：7
> 
> 时间：2012-12-30T16:16:59.233
> 
> 标签：image, image-processing, matrix, binary, wget

我需要找到一种将二进制文件转换为图像的快速方法。二进制文件由 N *N* N 矩阵组成，我想将 0 关联到一种颜色，将 1 关联到另一种颜色。我需要对超过 1000 个二进制文件执行此操作。如果可能的话，我想避免使用 MatLab，是否有任何工具/软件（适用于 unix）可以帮助我？

编辑：

[这](http://www.ryanwestafer.com/stuff/bin2img.php)正是我想要的！在页面底部它说：“提示：要处理许多文件，请使用 shell 脚本将此 URL 和所需参数传递给 wget，然后将输出定向到文件”但我不能这样做。我试过：

```
 wget --post-data="blocksize=10&width=10&offset=0&markval=-1&autoscale=0"  \
      --post-file="userfile=/path.../filename" http://www.ryanwestafer.com/stuff/bin2img.php \
      > output 
```

但我得到的只是下载到本地文件夹中的原始页面！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T02:13:33.717

如果您有安装了 PIL（图像）库的 python：

```
import Image
def colormap(s):
    s_out = []
    for ch in s:   # assume always '\x00' or '\x01'
        if s == '\x00':
            s_out.append('\x00')  # black
        else:
            s_out.append('\xFF')  # white
    return ''.join(s_out)

N= 50   # for instance
fin = open('myfile.bin','rb')
data = fin.read(N*N)    # read NxN bytes
data = colormap(data)

# convert string to grayscale image

img = Image.fromstring('L', (N,N), data )
# save to file
img.save('thisfile.png')

data = fin.read(N*N)   # next NxN bytes
data = colormap(data)

img = Image.fromstring('L', (N,N), data )
img.save('thisfile2.png') 
```

这可以根据需要轻松修改为循环和排序文件名等

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T11:55:18.880

对于 3D 矩阵，我通常会将它们转换为 VRML3D 并使用 ParallelGraphics/Cortona3D 来查看它们。

否则，您需要对矩阵进行某种投影或“切片”才能查看*所有*矩阵。

这是一个将 3D 矩阵转储到 PNG 文件的 C 实现。编译

```
gcc -W -Wall -o bin2png bin2png.c -lpng 
```

代码：

```
#include <stdio.h>
#include <stdint.h>
#include <stdlib.h>
#include <errno.h>
#include <png.h>

static png_structp png_ptr;
static png_infop info_ptr;

/**
                      |<--- W ---->|

                      +------------+       -
                      | 18  19   20|       |
                  +-------------+  |       |
                  | 9   10   11 |  |       |
              +-------------+   |23|       +--> H
              | 0    1    2 |   |  |       |
              |             |14 |  |       |
              |             |   |26|       |
              | 3    4    5 |   |--+   +   -
              |             |17 |     /
              |             |---+    +--> D
              | 6    7    8 |       /
              +-------------+      +

        @param matrix   a 3D matrix. Element [i,j,k] is A[H*(D*k + j) + i]
        @param W        width
        @param H        height
        @param D        depth
        @param WW       width in W-sized chunks of target image
        @param HH       height in H-sized chunks of target image
        @param filename output filename in PNG format

        Output image:

        |<----- WW = 2 --->|
        +------------------+ -
        |  0  1  2  9 10 11| |
        |  3  4  5 12 13 14| |
        |  6  7  8 15 16 17| HH = 2
        | 18 19 20         | |
        | 21 22 23  blank  | |
        | 24 25 26         | |
        +------------------+ -

        NOTE: W*WW and H*HH may not exceed 32760.

        Return:
                0       success
                -1      cannot create PNG structure (write)
                -2      cannot create PNG structure (info)
                -3      out of memory
                -4      cannot create output file

*/

int matrix3D_to_png(uint8_t *matrix, size_t W, size_t H, size_t D, size_t WW, size_t HH, char *filename)
{
        FILE            *fp;
        png_color       palette[16];
        png_byte        transparencies[16];
        uint32_t        y;
        size_t          x;
        uint8_t         *row;

        if( !(png_ptr = png_create_write_struct(PNG_LIBPNG_VER_STRING, NULL, NULL, NULL)) )
                return -1;

        if( !(info_ptr = png_create_info_struct(png_ptr)) || setjmp(png_jmpbuf(png_ptr)) ){
                /* If we get here, libpng had a problem writing */
                png_destroy_write_struct(&png_ptr, &info_ptr);
                return -2;
        }

        if (NULL == (row        = malloc(WW*W + 7)))
        {
                return -3;
        }

        /* Create 16-color palette for representation */
        #define SETPAL(i,r,g,b,a)       \
        palette[i].red  = r; palette[i].green   = g; palette[i].blue    = b; transparencies[i] = 255-a;

        // We will draw the matrix in red if points are nonzero, black if zero; outside the matrix
        // we use transparent white.
        #define         INDEX_IF_ZERO           0
        #define         INDEX_IF_NONZERO        3
        #define         INDEX_IF_BLANK          15

        SETPAL(0,       0, 0, 0, 0);            // Black
        SETPAL(1,       255, 255, 255, 0);      // Opaque white
        SETPAL(2,       192, 192, 192, 0);      // Light gray

        SETPAL(3,       255,    0,      0, 0);  // Red
        SETPAL(4,       0,      255,    0, 0);  // Green
        SETPAL(5,       0,      0,      255, 0);// Blue

        SETPAL(6,       255,    0,      0,      128);   // Halftransparent red
        SETPAL(7,       0,      255,    0,      128);   // green
        SETPAL(8,       0,      0,      255,    128);   // blue

        SETPAL(9,       255, 0, 0, 0);          // red again :-)
        SETPAL(10,      0, 255, 0, 0);
        SETPAL(11,      0, 0, 255, 0);
        SETPAL(12,      255, 0, 0, 0);
        SETPAL(13,      0, 255, 0, 0);
        SETPAL(14,      0, 0, 255, 0);

        SETPAL(15,      255, 255, 255, 255);    // Transparent white
        /* End palette */

        /* Create filename */
        if (NULL == (fp = fopen(filename, "w")))
        {
                fprintf(stderr, "cannot open output '%s': %s\n", filename, strerror(errno));
                return -4;
        }
        png_init_io(png_ptr, fp);
        png_set_IHDR(png_ptr, info_ptr, W*WW, H*HH, 8, PNG_COLOR_TYPE_PALETTE,
                                 PNG_INTERLACE_NONE, PNG_COMPRESSION_TYPE_DEFAULT, PNG_FILTER_TYPE_DEFAULT);
        png_set_PLTE(png_ptr, info_ptr, palette, 16);
        png_set_tRNS(png_ptr, info_ptr, transparencies, 16, NULL);
        png_set_compression_level(png_ptr, Z_BEST_COMPRESSION);
        png_write_info(png_ptr, info_ptr);
        for (y = 0; y < H*HH; y++)
        {
                size_t  mx = y/H;
                mx      = (mx*H*WW + (y%H))*W;
                for (x = 0; x < WW; x++)
                {
                        if (mx+x*H >= H*D)
                                memset(row+x*W, INDEX_IF_BLANK, W);
                        else
                        {
                                size_t ii;
                                for (ii = 0; ii < W; ii++)
                                        row[x*W+ii] = (matrix[mx+x*W*H+ii]) ? INDEX_IF_NONZERO : INDEX_IF_ZERO;
                        }
                }
                png_write_row(png_ptr, row);
        }
        png_write_end(png_ptr, NULL /*info_ptr*/);
        png_destroy_write_struct(&png_ptr, &info_ptr);
        fclose(fp);
        free(row);
        return 0;
}

int main(int argc, char **argv)
{
        FILE    *fp;
        uint8_t *matrix;
        size_t  W, H, D, WW, HH, i;
        if (8 != argc)
        {
                fprintf(stderr, "Syntax: %s input output.png width height depth TileX TileY\n", *argv);
                return EXIT_FAILURE;
        }
        W       = atol(argv[3]);
        H       = atol(argv[4]);
        D       = atol(argv[5]);
        WW      = atol(argv[6]);
        HH      = atol(argv[7]);

        if ((W * WW > 32767)||(H * HH) > 32767)
        {
                fprintf(stderr, "Output image would be too large\n");
                return EXIT_FAILURE;
        }
        if (WW*HH < D)
        {
                fprintf(stderr, "WARNING: matrix does not fit into output image\n");
        }
        if (WW*HH > D*2)
        {
                fprintf(stderr, "WARNING: output image is far larger than input matrix\n");
        }
        if (NULL == (fp = fopen(argv[1], "r")))
        {
                fprintf(stderr, "Input file not found\n");
                return EXIT_FAILURE;
        }
        if (NULL == (matrix = malloc(W*H*D)))
        {
                fprintf(stderr, "Out of memory: matrix too large\n");
                return EXIT_FAILURE;
        }
        for (i = 0; i < D; i++)
        {
                int ret;
                if ((int)H != (ret = fread(matrix + W*H*i, W, H, fp)))
                {
                        fprintf(stderr, "Read error at plane %d (reading %d rows of %d elements, expecting %d, got %d)\n",
                                (int)i, (int)W, (int)H, (int)H, ret);
                        fclose(fp);
                        return EXIT_FAILURE;
                }
        }
        if (matrix3D_to_png(matrix, W, H, D, WW, HH, argv[2]))
        {
                fprintf(stderr, "Error in creating output PNG '%s'\n", argv[2]);
                return EXIT_FAILURE;
        }
        return EXIT_SUCCESS;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T08:44:45.517

GNU Octave 是一个免费的类似 Matlab 的程序，很多人似乎都喜欢它。

这个网站有一个完整的免费替代列表：http: [//www.math.tu-berlin.de/~ehrhardt/matlab_alternatives.html](http://www.math.tu-berlin.de/~ehrhardt/matlab_alternatives.html)

# c# - 从原始字节创建位图对象

> ID：14092290
> 
> 赞同：5
> 
> 时间：2012-12-30T16:17:07.617
> 
> 标签：c#, bitmapimage

我正在尝试从原始字节创建一个位图对象，我`PixelFormat`的是`RGB`每个样本 8 位，即每个像素 3 个字节。现在为此我的步幅将是宽度的 3 倍。

但是`Bitmap`类总是在寻找 4 的乘数作为步幅值。请帮助我如何解决这个问题。如果我给出 4 的乘数图像不正确。

```
Bitmap im = new Bitmap(MyOBJ.PixelData.Columns, MyOBJ.PixelData.Rows, (MyOBJ.PixelData.Columns*3),
System.Drawing.Imaging.PixelFormat.Format24bppRgb, Marshal.UnsafeAddrOfPinnedArrayElement(images[imageIndex], 0)); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-30T17:31:03.260

我写了一个简短的示例，它将填充数组的每一行以使其适应所需的格式。它将创建一个 2x2 检查板位图。

```
byte[] bytes =
    {
        255, 255, 255,
        0, 0, 0,
        0, 0, 0,
        255, 255, 255,
    };
var columns = 2;
var rows = 2;
var stride = columns*4;
var newbytes = PadLines(bytes, rows, columns);
var im = new Bitmap(columns, rows, stride,
                    PixelFormat.Format24bppRgb, 
                    Marshal.UnsafeAddrOfPinnedArrayElement(newbytes, 0)); 
```

`PadLines`方法写在下面。我试图通过使用来优化它`Buffer.BlockCopy`，以防您的位图很大。

```
static byte[] PadLines(byte[] bytes, int rows, int columns)
{
    //The old and new offsets could be passed through parameters,
    //but I hardcoded them here as a sample.
    var currentStride = columns*3;
    var newStride = columns*4;
    var newBytes = new byte[newStride*rows];
    for (var i = 0; i < rows; i++)
        Buffer.BlockCopy(bytes, currentStride*i, newBytes, newStride * i, currentStride);
    return newBytes;
} 
```

# compiler-construction - 相同的源但不同的二进制文件

> ID：14092296
> 
> 赞同：1
> 
> 时间：2012-12-30T16:17:33.767
> 
> 标签：compiler-construction, windows-ce, disassembly, portable-executable

我有一个 WinCE6000 OSDesign，但由于历史原因，文件夹下有 MS 不推荐的修改和额外模块。因此，我们开始将不属于原始 MS 交付的所有内容移动到另一个文件夹 <3rdParty>。

您可能知道 WinCE 有一个复杂的构建机制，但无论如何，在我们完成重构之后，我们设法运行了 SYSGEN。以前我们强制运行 Build & SysGen 来获取 nk.bin

我们想了一种机制来确保重构后没有任何变化。验证包括将重构的构建树与已经存在的源树进行比较。我们比较了 ce.bib 文件的内容，文件的内容和数量和名称相同。但后来我们意识到有些二进制文件有不同的大小。在比较了这些 exe 和二进制文件后，我们发现文件存在差异。但这没有意义。因为我们没有修改任何源代码。我们所做的只是将一些模块移动到另一个位置并修改源文件。

我们在 Beyond Compare 和 PE 文件查看器中观察到的差异表明有时 .text 部分和有时 .data 部分是不同的。

我们希望确保重构不会通过功能影响生成的图像。我们知道有 PE 格式的时间戳，但我想它们不会导致 2K 的二进制大小。

你们中有人遇到过这样的问题吗？此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:11:15.923

这里有一个来自 MS 的自我解释帖子。 [http://support.microsoft.com/kb/164151](http://support.microsoft.com/kb/164151)

**注意：不能保证 Visual C++ 在连续构建时生成相同的源文件时会生成相同的二进制映像。但是，您可以保证 EXE（或 DLL）在执行时的行为方式完全相同，所有其他条件都相同。编译和链接选项以及链接顺序在两个二进制图像是否相等比较中起作用。**

# c++ - 填充有/没有内在函数 C++

> ID：14092297
> 
> 赞同：-5
> 
> 时间：2012-12-30T16:17:46.783
> 
> 标签：c++, c, alignment, intrinsics

我正在研究内在函数对性能的影响，我有点困惑：它们似乎根本没有影响！我试图用两个不同的函数填充一个双精度数组，但我看不出有什么区别。我通过调用 _aligned_malloc 并将对齐参数设置为 8 来分配数组。我使用 Visual Studio 2008 并在发布模式下编译，包括优化和不优化 (/O2 - /Od) 以及有和没有内在函数 (/Oi) - 所有四种组合。以下是两个不同的版本：

```
#ifdef _NO_INTRIN

void my_fill(double* vett, double value, int N)
{
    double* last = vett + N;
    while( vett != last)
    {
        *vett++ = value;
    }
}

#else

void my_fill(double* vett, double value, int N)
{
    double* last = vett + N;

    // set "classically" unaligned data, if any
    while( (0xF & (uintptr_t)vett) && vett != last )
        *vett++ = value;

    __m128d* vett_ = (__m128d*)vett;
    uintptr_t fff0 = ~0 << 4;
    // round address to nearest aligned data setting to zero least significant 4 bits
    __m128d* last_ = (__m128d*)( fff0 & (uintptr_t)last);
    // process until second-last element to manage odd values of N
    for( ; vett_ < last_-1; vett_++ )
    {
        *vett_ = _mm_set1_pd(value);
    }

    vett = (double*)vett_;
    while(vett != last)
        *vett++ = value;
}    

#endif 
```

作为最后一个规范，我将数据对齐到 8B 而不是 16，因为我计划在数组的不同部分以多线程方式执行此函数。所以，同样将数据对齐到 16B 我不能确定数组的所有部分都会对齐（例如 303 个元素，3 个线程，每个线程 101 个元素，第 1 部分对齐到 16B，第 2 部分从 @vett+101 开始*8 ==> 未对齐）。这就是我尝试实现与对齐无关的功能的原因。我试图在我的 Intel Atom CPU N570 @ 1.66 GHz 上填充一个 1M 元素的数组，我总是得到相同的执行时间。那么......我的方法有什么问题？为什么我看不出差异？谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-28T23:39:00.940

如果您没有进行任何复杂的计算并且您只是将固定值写入内存，您的程序速度可能会受到内存带宽的限制。CPU 可以在内部以更快的速度生成值，但它受到将它们传输到 RAM 的速度的限制（尤其是在处理不适合 CPU 缓存的大内存区域时）

# php - PHP 在循环中使用 cURL 的正确方法？

> ID：14092310
> 
> 赞同：2
> 
> 时间：2012-12-30T16:19:30.083
> 
> 标签：php, apache, loops, curl, debian

这个问题让我困惑了好几次，其中之一是在 php 循环中使用 curl 的正确方法

```
$ch = curl_init();
for($i=0; $i<10; $i++){
  // curl options skiped ..
  curl_setopt($ch,CURLOPT_URL,"https://secure.imvu.com/login/login/");
  $response = curl_exec($ch);
   // print $response;
}
curl_close($ch); 
```

**或者**

```
for($i=0; $i<10; $i++){
  $ch = curl_init();
  // curl options skiped ..
  curl_setopt($ch,CURLOPT_URL,"https://secure.imvu.com/login/login/");
  $response = curl_exec($ch);
    // print $response;
  curl_close($ch);
} 
```

为什么？

从我的想法来看，第一个摆脱了滞后并使用比第二个更低的进程，
因为第二个需要在每个循环上打开和关闭 curl 处理程序，这会产生很多进程，
但我也认为第一个一个会遇到问题，例如.. cURL cookie文件仅在`curl_close();`调用后保存，因此只要它没有在循环中关闭，我将无法删除它

我需要知道哪个更合适，为什么，每个优点和缺点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T16:26:43.847

从性能的角度来看，这并不重要——选择能够补充脚本其余部分所需功能的方法。与发出 HTTP 请求所需的时间相比，运行 curl_init() 所需的时间只是短暂的。

我测试了这两个小脚本。第一个运行了 3,293.014 毫秒，第二个运行了 3,176.957 毫秒。这似乎有点违反直觉，因为第二个脚本比第一个脚本重复了更多的指令。但是，当您查看这两者之间的时间差时，每个请求大约需要 6 毫秒，当整个过程（发出 20 个 HTTP 请求）需要 6 秒时，这可能在“舍入误差”范围内。

如果您想测试自己，可以在下面找到代码。

```
<?php // RAY_class_Stopwatch.php
error_reporting(E_ALL);

// DEMONSTRATE A SCRIPT TIMER FOR ALL OR PART OF A SCRIPT PHP 5+
// MAN PAGE http://php.net/manual/en/function.microtime.php

class StopWatch
{
    protected $a; // START TIME
    protected $s; // STATUS - IF RUNNING
    protected $z; // STOP TIME

    public function __construct()
    {
        $this->a = array();
        $this->s = array();
        $this->z = array();
    }

    public function __destruct()
    {
        $ret = $this->readout();
        if (!$ret) return FALSE;
        echo
          __CLASS__
        . '::'
        . __FUNCTION__
        . '() '
        ;
        echo "<b>$ret</b>";
        echo PHP_EOL;
    }

    // A METHOD TO REMOVE A TIMER
    public function reset($name='TIMER')
    {
        // RESET ALL TIMERS
        if ($name == 'TIMER')
        {
            $this->__construct();
        }
        else
        {
            unset($this->a[$name]);
            unset($this->s[$name]);
            unset($this->z[$name]);
        }
    }

    // A METHOD TO CAPTURE THE START TIME
    public function start($name='TIMER')
    {
        $this->a[$name] = microtime(TRUE);
        $this->z[$name] = $this->a[$name];
        $this->s[$name] = 'RUNNING';
    }

    // A METHOD TO CAPTURE THE END TIME
    public function stop($name='TIMER')
    {
        $ret = NULL;

        // STOP ALL THE TIMERS
        if ($name == 'TIMER')
        {
            foreach ($this->a as $name => $start_time)
            {
                // IF THIS TIMER IS STILL RUNNING, STOP IT
                if ($this->s[$name])
                {
                    $this->s[$name] = FALSE;
                    $this->z[$name] = microtime(TRUE);
                }
            }
        }

        // STOP ONLY ONE OF THE TIMERS
        else
        {
            if ($this->s[$name])
            {
                $this->s[$name] = FALSE;
                $this->z[$name] = microtime(TRUE);
            }
            else
            {
                $ret .= "ERROR: CALL TO STOP() METHOD FOR '$name' IS NOT RUNNING";
            }
        }

        // RETURN AN ERROR MESSAGE, IF ANY
        return $ret;
    }

    // A METHOD TO READ OUT THE TIMER(S)
    public function readout($name='TIMER', $dec=3, $m=1000, $eol=PHP_EOL)
    {
        $str = NULL;

        // GET READOUTS FOR ALL THE TIMERS
        if ($name == 'TIMER')
        {
            foreach ($this->a as $name => $start_time)
            {
                $str .= $name;

                // IF THIS TIMER IS STILL RUNNING UPDATE THE END TIME
                if ($this->s[$name])
                {
                    $this->z[$name] = microtime(TRUE);
                    $str .= " RUNNING ";
                }
                else
                {
                    $str .= " STOPPED ";
                }

                // RETURN A DISPLAY STRING
                $lapse_time = $this->z[$name] - $start_time;
                $lapse_msec = $lapse_time * $m;
                $lapse_echo = number_format($lapse_msec, $dec);
                $str .= " $lapse_echo";
                $str .= $eol;
            }
            return $str;
        }

        // GET A READOUT FOR ONLY ONE TIMER
        else
        {
            $str .= $name;

            // IF THIS TIME IS STILL RUNNING, UPDATE THE END TIME
            if ($this->s[$name])
            {
                $this->z[$name] = microtime(TRUE);
                $str .= " RUNNING ";
            }
            else
            {
                $str .= " STOPPED ";
            }

            // RETURN A DISPLAY STRING
            $lapse_time = $this->z[$name] - $this->a[$name];
            $lapse_msec = $lapse_time * $m;
            $lapse_echo = number_format($lapse_msec, $dec);
            $str .= " $lapse_echo";
            $str .= $eol;
            return $str;
        }
    }
}

// DEMONSTRATE THE USE -- INSTANTIATE THE STOPWATCH OBJECT
$sw  = new Stopwatch;

// TIME OSA'S SCRIPTS
ob_start();
$sw->start('ENTIRE');
$sw->start('FIRST');
$ch = curl_init();
for($i=0; $i<10; $i++){
  // curl options skiped ..
  curl_setopt($ch,CURLOPT_URL,"https://secure.imvu.com/login/login/");
  $response = curl_exec($ch);
   // print $response;
}
curl_close($ch);
$sw->stop('FIRST');

$sw->start('SECOND');
for($i=0; $i<10; $i++){
  $ch = curl_init();
  // curl options skiped ..
  curl_setopt($ch,CURLOPT_URL,"https://secure.imvu.com/login/login/");
  $response = curl_exec($ch);
    // print $response;
  curl_close($ch);
}
$sw->stop('SECOND');
$sw->stop('ENTIRE');
ob_end_clean();
$sw->readout(); 
```

最好的，~雷

# jquery - jquery在淡出的同时淡入

> ID：14092311
> 
> 赞同：2
> 
> 时间：2012-12-30T16:19:35.140
> 
> 标签：jquery, fadein, fadeout

我被困住了，我现在真的不了解 jQuery！

我希望我的 3 个块在一个循环中以 3 秒的延迟淡入淡出。

这可行，但我希望块 1 淡出，而块 2 淡入，而不是之后。

块 2 淡出 WHILST 块 3 淡入......等等！

```
$(".block2").fadeTo("fast", 0.3)
$(".block3").fadeTo("fast", 0.3)

function1();

var timing = 3000;

function function1(){
$(".block1").fadeTo("slow", 1).delay(timing).fadeTo("slow", 0.3, function2);
}

function function2(){
$(".block2").fadeTo("slow", 1).delay(timing).fadeTo("slow", 0.3, function3);
}

function function3(){
$(".block3").fadeTo("slow", 1).delay(timing).fadeTo("slow", 0.3, function1);
} 
```

谢谢你=)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T17:14:36.617

只要给你所有的块一个共同的`.block`

## [jsBin 演示](http://jsbin.com/idozey/7/edit)

```
var el = $('.block'),
    F = 800,   // FADE TIME
    P = 3000,  // PAUSE TIME
    S = -1;    // START el index (will turn 0 after initial kick)

function a(){el.eq(++S%el.length).fadeTo(F,1).siblings(el).stop(1).fadeTo(F,0.3);}
a();

setInterval(a, P); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T17:04:46.123

您正在使用回调。在淡出完成之前不会发生回调。但是我们可以使用超时同时调用两者。

```
$(".block2").fadeTo("fast", 0.3)
$(".block3").fadeTo("fast", 0.3)

function1();

var timing = 3000;

function function1(){
    $(".block1").fadeTo("slow", 1, function(){
         setTimeout(function(){
             function2();
         }, timing);
    }).delay(timing).fadeTo("slow", 0.3);

} 
```

或咖喱风格：

```
var function1, function2, function3;

function1 = fadeInnyOuty( $('.block1'), function2);
function2 = fadeInnyOuty( $('.block2'), function3);
function3 = fadeInnyOuty( $('.block3'), function1);

function fadeInnyOuty($elem,func){
    $elem.fadeTo("slow", 1, function(){
         setTimeout(function(){
             func();
             $elem.fadeTo("slow", 0.3);
         });
    });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T17:05:08.340

问题是您正在使用 fadeOut 操作的回调函数触发下一步。所以下一个fadeIn 发生在fadeOut 完成之后。相反，您希望在延迟之后发生淡入。您可以使用该`queue`方法来实现此目的：

```
.delay(timing).queue(function() {
  function2();
  $(this).dequeue(); // Keeps the queue running, it stops if you don't do this
}).fadeOut("slow", 0.3); 
```

我在这里创建了一个小提琴[http://jsfiddle.net/e8W5E/](http://jsfiddle.net/e8W5E/)来展示它

* * *

**编辑**响应 roXon 的评论，您可以编写更优雅的解决方案，如下所示。HTML 已更新以删除多余的计数...

```
<div class="block"></div>
<div class="block"></div>
<div class="block"></div> 
```

jQuery然后看起来像......

```
$(function() {

  // These are the elements we will rotate
  var $blocks = $(".block");

  // Set up the initial elements to 0.3 opacity
  $blocks.not(":eq(0)").fadeTo("fast", 0.3);

  // This is our repeating function
  var go = function($el, i, high, low, t) {
    $el.eq(i).fadeTo("slow", high)
      .delay(t)
      .queue(function() {

        // The next index is 1 + the current index
        // use modulus to repeat back to the beginning
        var next = (i + 1) % $el.length;
        go($el, next, high, low, t);
        $(this).dequeue();
       })
       .fadeTo("slow", low);
  };

  // Start fading in and out
  go($blocks, 0, 1, 0.3, 1000);

})(); 
```

您可以使用该类名称添加任意数量的块，它将包含在 fadeIn 和 fadeOut 旋转中。和小提琴[http://jsfiddle.net/e8W5E/1/](http://jsfiddle.net/e8W5E/1/)

# http - Http Header - Cache-Control: max-age - 行为？

> ID：14092313
> 
> 赞同：1
> 
> 时间：2012-12-30T16:19:37.557
> 
> 标签：http, iis, http-headers, httprequest, fiddler

*我已经阅读了很多关于此的内容，但仍然很少有误解。*

我读到`max-age` 应该只设置为静态数据。

我使用提琴手作曲家提出这个请求

```
User-Agent: Fiddler
Host: www.example.com 
```

回应是：

```
HTTP/1.1 200 OK
Date: Tue, 01 Jan 2013 20:37:31 GMT
Server: Apache/2.2.3 (CentOS)
Last-Modified: Thu, 06 Dec 2012 19:40:14 GMT <======
... 
```

Q#1

如果服务器发送`last-modified`标头，是否因为该页面是静态页面？（有人设置`max-age`）在服务器端？

Q#2

在客户端收到第一个响应后，下一次它会询问它是否带有`If-Modified-Since`标头，服务器可能会返回`200`或`304`（未修改）。 **但是为什么** 服务器在他的*第一个响应*中没有提到`max-age`呢？它可以使客户端免于发送第二个请求！

Q#3

虽然这个有条件的假设可以让我免于下载整个页面，[**但仍然不鼓励**](http://books.google.co.il/books?id=fCK3MMV8iYcC&pg=PA64&lpg=PA64&dq=%22Even%20though%20the%20responses%20to%20conditional%20GETs%20are%20short,%20the%20time%20it%20takes%20for%20the%20round-trips%20alone%22&source=bl&ots=F5E11mEezn&sig=jUvP2C88XzPvWSgwFDcKLZPsAEE&hl=en&sa=X&ei=qUzjUIC9Nsfj4QSsvIAw&redir_esc=y#v=onepage&q=%22Even%20though%20the%20responses%20to%20conditional%20GETs%20are%20short,%20the%20time%20it%20takes%20for%20the%20round-trips%20alone%22&f=false) ，那么我还有什么其他选择？（对于静态数据）

Q#4

怎么`iis`知道它是否被修改？通过查看修改的文件日期？您是否要告诉我，对于每个日期检查它都在进行`IO`访问？如果没有，它在哪里保存该信息？

Q#5

在客户端得到第一个响应后，它需要再次访问该页面。它是否再次发送请求`If-Modified-Since`？[如果不是](http://books.google.co.il/books?id=fCK3MMV8iYcC&pg=PA64&lpg=PA64&dq=%22the%20content%20will%20remain%20active%20in%20the%20cache,%20and%20the%20browser%20won%E2%80%99t%20make%20those%20extra%20server%22&source=bl&ots=F5E11mFatg&sig=AfZt60tXNE82GCKPlQRTHLPgI-M&hl=en&sa=X&ei=v07jUO7RIMrWsgblk4DQAQ&redir_esc=y#v=onepage&q=%22the%20content%20will%20remain%20active%20in%20the%20cache,%20and%20the%20browser%20won%E2%80%99t%20make%20those%20extra%20server%22&f=false)，如果页面在这个 intreval 期间*确实发生了变化怎么办？*如果是 - 为什么服务器用`max-age`header 响应？我与它无关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T23:31:46.663

Cache-Control 标头的 max-age 子句必须显式启用。显然，这样做的确切方式取决于[服务器软件](http://www.webscalingblog.com/performance/caching-http-headers-cache-control-max-age.html)。

Last-Modified: 和 If-Modified-Since: 交互与此无关，因为该机制早在 max-age 之前就发明了。

您将始终获得 Last-Modified: 对于服务器不知道的任何服务器端资源（同样，通过服务器特定的方式）动态生成。Cache-Control: max-age=whatever，如果也存在，允许客户端或缓存保存更新请求（使用 If-Modified-Since）。

但是这个额外的标头需要服务器设置。对于“静态数据”，它不会自动发生。Last-Modified: 也不表示“静态数据”。（服务器端处理程序进程可以生成一个 Last-Modified 标头以中继到客户端。）

Q1：没有。服务器未配置为将数据识别为动态数据。max-age 与它无关。

Q2：因为 max-age 没有开启。它不会自动发生。

Q3：没有其他选择。If-Modified-Since 旨在节省带宽。

Q4：IIS 与所有其他服务器一样，必须[配置为启用 max-age](http://www.iis.net/configreference/system.webserver/staticcontent/clientcache)。不涉及猜测。至于确定是否发生了变化，这*确实*涉及将客户端在 If-Modified-Since 标头中发送的日期与存储在服务器上的日期信息进行比较。对于文件中的静态数据，这通常会涉及系统调用，例如 Windows 上的 GetFileAttributesEx() 或其他平台上的 fstat()。

Q5：如果客户端在先前从服务器收到的 Cache-Control: max-age 过期之前发出更新请求（使用 If-Modified-Since:），则客户端已损坏，或者正在执行外部触发的“强制更新/刷新”选项。（请注意，If-Modified-Since 请求假定客户端在某个缓存中仍然有以前的版本。如果没有，那么它不会发送此标头，只是因为它没有日期！）

# module - 让其他人可以使用 Julia 包的最简单方法

> ID：14092316
> 
> 赞同：8
> 
> 时间：2012-12-30T16:20:28.693
> 
> 标签：module, julia

Julia 有一个基于 Git 存储库的打包系统，带有特定目录（使用 获得的包骨架`Pkg.new("MyPackage")`），以及一个列出包和可以在其上找到的 git 服务器的 METADATA 文件。

`Pkg.init()`使用默认的包列表初始化本地 Julia 安装，但是为了让潜在用户试用它，在一个包文档中编写的确切步骤是什么`Pkg.add("MyPackage"); require("MyPackage")`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T01:11:45.500

任何包源代码都可以手动放入`.julia/MyPackage`. 这可以通过解压缩文件或手动从其存储库中检出包源来完成。一旦完成，`require("MyPackge")`就可以工作，就像任何官方软件包一样。

如果您想让用户试用 Pkg.add("MyPackage")，您需要为他们提供您自己的 METADATA 存储库。克隆官方仓库，像往常一样添加自己的包。然后要求用户使用`Pkg.init("url to metdata git repository")`. 完成后，`Pkg.add("MyPackage")`将从它自己的私有 git 存储库安装包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T18:37:07.873

对于我自己的包，我一直在使用以下样板：

> FILL_ME_IN 包可通过 Julia 包系统获得。如果您以前从未使用过包系统，则需要运行以下命令：
> 
> `require("pkg")`
> 
> `Pkg.init()`
> 
> `Pkg.add("FILL_ME_IN")`
> 
> 如果你有一个现有的包库，你可以使用类似的命令将 FILL_ME_IN 包拉到你的库中：
> 
> `require("pkg")`
> 
> `Pkg.add("FILL_ME_IN")`

# qt - 在 C++ 中创建 QML 元素？

> ID：14092319
> 
> 赞同：7
> 
> 时间：2012-12-30T16:20:35.530
> 
> 标签：qt, qml, qt5, qtquick2

我有以下问题：

我将初始界面加载到`QQuickView`使用`.qml`文件中。然后我想使用 C++ 向接口添加[QML 类型](http://doc.qt.io/qt-5/qtquick-qmlmodule.html)，如`Image`或。`Text`

我知道我可以从 C++ 中操作现有元素，但是如何创建新类型并添加它们？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-07-04T17:32:27.877

不幸的是，文档有点过时（使用 Qt4 api），但是如果您在此处阅读**从 C++ 加载 QML 组件部分：** [https ://doc.qt.io/qt-4.8/qtbinding.html](https://doc.qt.io/qt-4.8/qtbinding.html)

然后你应该有类似的东西（使用 Qt5 api）：

```
QQuickView view;
view.setSource(QUrl::fromLocalFile("MyView.qml"));
QQmlComponent component(view.engine()
        , QUrl::fromLocalFile("MyItem.qml"));
QObject *object = component.create(); 
```

这为您提供了来自 .qml 文件的 QObject，但缺少的是如何将其添加到视图中。在 qml 中，除非它们是视图的父项，否则不会绘制项目。一种方法是将项目添加到根上下文，如下所示：

```
QQmlProperty::write(object, "parent"
                    , QVariant::fromValue<QObject*>(view.rootObject())); 
```

另外，请注意（再次来自上面的链接）：“*您应该始终使用 QObject::setProperty()、QDeclarativeProperty 或 QMetaProperty::write() 来更改 QML 属性值，以确保 QML 引擎知道属性更改*”。

接下来，我们需要设置项目的所有权，否则 JavaScript 垃圾处理程序会删除您的项目，您可以随机 seg fault。

```
QQmlEngine::setObjectOwnership(object, QQmlEngine::CppOwnership); 
```

最后，您需要记住删除对象“object”。因为它是一个 QObject 你应该使用：

```
object->deleteLater(); 
```

希望对某人有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-19T12:37:53.303

转到此处： http: [//qt-project.org/doc/qt-5.0/qtqml/qtqml-cppintegration-definetypes.html](http://qt-project.org/doc/qt-5.0/qtqml/qtqml-cppintegration-definetypes.html)，滚动到底部并查看标题“使用 QtQuick 模块定义可视项目”

这让你知道应该如何做。

此链接提供了应如何完成的示例（认为它是为 Qt 4.7 编写的，但与 Qt 5 应该没有太大区别）：http: [//developer.nokia.com/Community/Wiki/Creating_a_custom_QML_element_with_Qt](http://developer.nokia.com/Community/Wiki/Creating_a_custom_QML_element_with_Qt)

* * *

**注意：**不要忘记使用（继承）**QQuickItem**类而不是 QDeclarativeItem。

# php - 如何确保目录不被修改

> ID：14092320
> 
> 赞同：0
> 
> 时间：2012-12-30T16:20:37.867
> 
> 标签：php, security

所以假设我有一个服务器上的目录和文件列表：

```
/stuff/
/other_stuff/
  index.php
/important_stuff/
  index.php
  script.php 
```

在 script.php 脚本中，如何确保`important_stuff`目录 ( `__DIR__`) 中的文件不能被任何其他脚本修改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T17:03:22.170

假设您使用的是 linux，并且您能够更改文件所有权和权限。

php 由网络服务器用户（通常命名为 apache 或 www-data）运行。确保该用户无权写入您的重要资料文件夹。这可以通过将此文件提供给另一个用户来实现，但让 www-data（或 apache 或其他）组的成员可以读取它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T18:05:38.623

正确答案是关于所有权/权限。另外，如果您在 linux 下，请在 google 上搜索“chattr immutable”。

但是，如果您想检查是否有任何更改，请使用[md 文件功能](http://php.net/manual/en/function.md5-file.php)

# wireshark - 802.11 和 radiotap 标头的 rawshark 输出格式

> ID：14092321
> 
> 赞同：1
> 
> 时间：2012-12-30T16:20:42.457
> 
> 标签：wireshark, tcpdump, wifi

我想使用 rawshark 从管道中读取数据包并为我打印一些有用的信息。

这是场景。

1\. 带有无线接口的远程机器在监控模式下使用 tcpdump 和管道到 netcat 进行捕获。

2\. 另一台远程机器从机器 1 的 netcat 流中读取数据并将数据传输到 rawshark。

3\. rawshark 必须以对我有用的格式输出解析的信息。

到目前为止，我尝试将以前捕获的数据（本地文件）传输到 rawshark，这很好（cat test.pcap | rawshark -s -r - -d encap:105）。
但是我找不到“-F”标志的正确值来使其显示包源mac地址和radiotap头信息，如信号强度。我正在尝试使用 -F wlan.sa -F radiotap.dbm_antsignal。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T16:30:42.120

设置选项 -d proto:radiotap（将 encap:105 替换为 proto:radiotap）

关于手册报告的 -F 选项：

```
 -F <field to display>

 Add the matching field to the output. Fields are any valid display filter field. More  than one -F flag may be specified, and each field can match multiple times in a given packet. A single field may be specified per -F flag. If you want to apply a display filter, use the -R flag. 
```

编辑：在这里找到[ftp://ftp-khujand.tj/Soft/wireshark-1.1.3.u3p/device/rawshark.html](ftp://ftp-khujand.tj/Soft/wireshark-1.1.3.u3p/device/rawshark.html)，指向这里[http://www.cse.yorku.ca/tdb/_doc。 php/userg/man/name/wireshark-filter.4/section/4](http://www.cse.yorku.ca/tdb/_doc.php/userg/man/name/wireshark-filter.4/section/4)，这些应该是适用的过滤器：

```
 IEEE 802.11 Radiotap Capture header (radiotap)
       radiotap.antenna  Antenna
           Unsigned 32-bit integer
           Antenna number this frame was sent/received over (starting at 0)

       radiotap.channel  Channel
           Unsigned 32-bit integer
           802.11 channel number that this frame was sent/received on

       radiotap.channel.freq  Channel frequency
           Unsigned 32-bit integer
           Channel frequency in megahertz that this frame was sent/received on

       radiotap.channel.type  Channel type
           Unsigned 16-bit integer
           Channel type

       radiotap.channel.type.2ghz  2 GHz spectrum
           Boolean
           Channel Type 2 GHz spectrum

       radiotap.channel.type.5ghz  5 GHz spectrum
           Boolean
           Channel Type 5 GHz spectrum

       radiotap.channel.type.cck  Complementary Code Keying (CCK)
           Boolean
           Channel Type Complementary Code Keying (CCK) Modulation

       radiotap.channel.type.dynamic  Dynamic CCK-OFDM
           Boolean
           Channel Type Dynamic CCK-OFDM Channel

       radiotap.channel.type.gfsk  Gaussian Frequency Shift Keying (GFSK)
           Boolean
           Channel Type Gaussian Frequency Shift Keying (GFSK) Modulation

       radiotap.channel.type.gsm  GSM (900MHz)
           Boolean
           Channel Type GSM

       radiotap.channel.type.half  Half Rate Channel (10MHz Channel Width)
           Boolean
           Channel Type Half Rate

       radiotap.channel.type.ofdm  Orthogonal Frequency-Division Multiplexing (OFDM)
           Boolean
           Channel Type Orthogonal Frequency-Division Multiplexing (OFDM)

       radiotap.channel.type.passive  Passive
           Boolean
           Channel Type Passive

       radiotap.channel.type.quarter  Quarter Rate Channel (5MHz Channel Width)
           Boolean
           Channel Type Quarter Rate

       radiotap.channel.type.sturbo  Static Turbo
           Boolean
           Channel Type Status Turbo

       radiotap.channel.type.turbo  Turbo
           Boolean
           Channel Type Turbo

       radiotap.channel.xtype.passive  Passive
           Boolean
           Channel Type Passive

       radiotap.datarate  Data rate
           Unsigned 32-bit integer
           Speed this frame was sent/received at

       radiotap.db_antnoise  SSI Noise (dB)
           Unsigned 32-bit integer
           RF noise power at the antenna from a fixed, arbitrary value in decibels

       radiotap.db_antsignal  SSI Signal (dB)
           Unsigned 32-bit integer
           RF signal power at the antenna from a fixed, arbitrary value in decibels

       radiotap.db_txattenuation  Transmit attenuation (dB)
           Unsigned 16-bit integer
           Transmit power expressed as decibels from max power set at factory (0 is max power)

       radiotap.dbm_antsignal  SSI Signal (dBm)
           Signed 32-bit integer
           RF signal power at the antenna from a fixed, arbitrary value in decibels from one milliwatt

       radiotap.fcs  802.11 FCS
           Unsigned 32-bit integer
           Frame check sequence of this frame

       radiotap.fcs_bad  Bad FCS
           Boolean
           Specifies if this frame has a bad frame check sequence

       radiotap.fhss.hopset  FHSS Hop Set
           Unsigned 8-bit integer
           Frequency Hopping Spread Spectrum hopset

       radiotap.fhss.pattern  FHSS Pattern
           Unsigned 8-bit integer
           Frequency Hopping Spread Spectrum hop pattern

       radiotap.flags  Flags
           Unsigned 8-bit integer

       radiotap.flags.badfcs  Bad FCS
           Boolean
           Frame received with bad FCS

       radiotap.flags.cfp  CFP
           Boolean
           Sent/Received during CFP

       radiotap.flags.datapad  Data Pad
           Boolean
           Frame has padding between 802.11 header and payload

       radiotap.flags.fcs  FCS at end
           Boolean
           Frame includes FCS at end

       radiotap.flags.frag  Fragmentation
           Boolean
           Sent/Received with fragmentation

       radiotap.flags.preamble  Preamble
           Boolean
           Sent/Received with short preamble

       radiotap.flags.shortgi  Short GI
           Boolean
           Frame Sent/Received with HT short Guard Interval

       radiotap.flags.wep  WEP
           Boolean
           Sent/Received with WEP encryption

       radiotap.length  Header length
           Unsigned 16-bit integer
           Length of header including version, pad, length and data fields

       radiotap.mactime  MAC timestamp
           Unsigned 64-bit integer
            Value in microseconds of the MAC's Time Synchronization Function timer when the first bit of the MPDU arrived at the MAC.

       radiotap.pad  Header pad
           Unsigned 8-bit integer
           Padding

       radiotap.present  Present flags
           Unsigned 32-bit integer
           Bitmask indicating which fields are present

       radiotap.present.antenna  Antenna
           Boolean
           Specifies if the antenna number field is present

       radiotap.present.channel  Channel
           Boolean
           Specifies if the transmit/receive frequency field is present

       radiotap.present.db_antnoise  DB Antenna Noise
           Boolean
           Specifies if the RF signal power at antenna in dBm field is present

       radiotap.present.db_antsignal  DB Antenna Signal
           Boolean
           Specifies if the RF signal power at antenna in dB field is present

       radiotap.present.db_tx_attenuation  DB TX Attenuation
           Boolean
           Specifies if the transmit power from max power (in dB) field is present

       radiotap.present.dbm_antnoise  DBM Antenna Noise
           Boolean
           Specifies if the RF noise power at antenna field is present

       radiotap.present.dbm_antsignal  DBM Antenna Signal
           Boolean
           Specifies if the antenna signal strength in dBm is present

       radiotap.present.dbm_tx_attenuation  DBM TX Attenuation
           Boolean
           Specifies if the transmit power from max power (in dBm) field is present

       radiotap.present.ext  Ext
           Boolean
           Specifies if there are any extensions to the header present

       radiotap.present.fcs  FCS in header
           Boolean
           Specifies if the FCS field is present

       radiotap.present.fhss  FHSS
           Boolean
           Specifies if the hop set and pattern is present for frequency hopping radios

       radiotap.present.flags  Flags
           Boolean
           Specifies if the channel flags field is present

       radiotap.present.lock_quality  Lock Quality
           Boolean
           Specifies if the signal quality field is present

       radiotap.present.rate  Rate
           Boolean
           Specifies if the transmit/receive rate field is present

       radiotap.present.rxflags  RX flags
           Boolean
           Specifies if the RX flags field is present

       radiotap.present.tsft  TSFT
           Boolean
           Specifies if the Time Synchronization Function Timer field is present

       radiotap.present.tx_attenuation  TX Attenuation
           Boolean
           Specifies if the transmit power from max power field is present

       radiotap.present.xchannel  Channel+
           Boolean
           Specifies if the extended channel info field is present

       radiotap.quality  Signal Quality
           Unsigned 16-bit integer
           Signal quality (unitless measure)

       radiotap.rxflags  RX flags
           Unsigned 16-bit integer

       radiotap.rxflags.badplcp  Bad PLCP
           Boolean
           Frame with bad PLCP

       radiotap.txattenuation  Transmit attenuation
           Unsigned 16-bit integer
           Transmit power expressed as unitless distance from max power set at factory (0 is max power)

       radiotap.txpower  Transmit power
           Signed 32-bit integer
           Transmit power in decibels per one milliwatt (dBm)

       radiotap.version  Header revision
           Unsigned 8-bit integer
           Version of radiotap header format

       radiotap.xchannel  Channel number
           Unsigned 32-bit integer

       radiotap.xchannel.flags  Channel type
           Unsigned 32-bit integer

       radiotap.xchannel.freq  Channel frequency
           Unsigned 32-bit integer

       radiotap.xchannel.type.2ghz  2 GHz spectrum
           Boolean
           Channel Type 2 GHz spectrum

       radiotap.xchannel.type.5ghz  5 GHz spectrum
           Boolean
           Channel Type 5 GHz spectrum

       radiotap.xchannel.type.cck  Complementary Code Keying (CCK)
           Boolean
           Channel Type Complementary Code Keying (CCK) Modulation

       radiotap.xchannel.type.dynamic  Dynamic CCK-OFDM
           Boolean
           Channel Type Dynamic CCK-OFDM Channel

       radiotap.xchannel.type.gfsk  Gaussian Frequency Shift Keying (GFSK)
           Boolean
           Channel Type Gaussian Frequency Shift Keying (GFSK) Modulation

       radiotap.xchannel.type.gsm  GSM (900MHz)
           Boolean
           Channel Type GSM

       radiotap.xchannel.type.half  Half Rate Channel (10MHz Channel Width)
           Boolean
           Channel Type Half Rate

       radiotap.xchannel.type.ht20  HT Channel (20MHz Channel Width)
           Boolean
           Channel Type HT/20

       radiotap.xchannel.type.ht40d  HT Channel (40MHz Channel Width with Extension channel below)
           Boolean
           Channel Type HT/40-

       radiotap.xchannel.type.ht40u  HT Channel (40MHz Channel Width with Extension channel above)
           Boolean
           Channel Type HT/40+

       radiotap.xchannel.type.ofdm  Orthogonal Frequency-Division Multiplexing (OFDM)
           Boolean
           Channel Type Orthogonal Frequency-Division Multiplexing (OFDM)

       radiotap.xchannel.type.quarter  Quarter Rate Channel (5MHz Channel Width)
           Boolean
           Channel Type Quarter Rate

       radiotap.xchannel.type.sturbo  Static Turbo
           Boolean
           Channel Type Status Turbo

       radiotap.xchannel.type.turbo  Turbo
           Boolean
           Channel Type Turbo 
```

# c# - RavenDB UseEmbeddedHttpServer = true “拒绝访问”错误

> ID：14092322
> 
> 赞同：1
> 
> 时间：2012-12-30T16:20:47.980
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, ravendb

我正在尝试以`RavenDB`这种方式连接到我的 MVC4 应用程序中的嵌入式数据库：

```
NonAdminHttp.EnsureCanListenToWhenInNonAdminContext(8080);
documentStore = new EmbeddableDocumentStore
{
       ConnectionStringName = ConnectionStringName,
       UseEmbeddedHttpServer = true
};

documentStore.Initialize(); 
```

如果我删除`UseEmbeddedHttpServer = true`选项，它会起作用，我通常可以保存并从数据库中读取！但是，如果指定它通过 Management Studio (localhost:8080) 访问，我会收到一个`Access Denied`错误 `documentStore.Initialize()`！

这是完整的堆栈：

```
[HttpListenerException (0x5): Accesso negato]
   System.Net.HttpListener.AddAllPrefixes() +335
   System.Net.HttpListener.Start() +680
   Raven.Database.Server.HttpServer.StartListening() in c:\Builds\RavenDB-Unstable-v2.0\Raven.Database\Server\HttpServer.cs:336
   Raven.Client.Embedded.EmbeddableDocumentStore.InitializeInternal() in c:\Builds\RavenDB-Unstable-v2.0\Raven.Client.Embedded\EmbeddableDocumentStore.cs:210
   Raven.Client.Document.DocumentStore.Initialize() in c:\Builds\RavenDB-Unstable-v2.0\Raven.Client.Lightweight\Document\DocumentStore.cs:424
   RavenDbTest.Repository.DocumentStoreHolder.get_DocumentStore() in c:\Sviluppo\RavenDbTest\RavenDbTest\RavenDbTest\Repository\DocumentStoreHolder.cs:39
   RavenDbTest.Controllers.RavenController.OnActionExecuting(ActionExecutingContext filterContext) in c:\Sviluppo\RavenDbTest\RavenDbTest\RavenDbTest\Controllers\RavenController.cs:23
   System.Web.Mvc.Async.AsyncControllerActionInvoker.InvokeActionMethodFilterAsynchronously(IActionFilter filter, ActionExecutingContext preContext, Func`1 nextInChain) +145
   System.Web.Mvc.Async.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__31(AsyncCallback asyncCallback, Object asyncState) +266
   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +146
   System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate`1 endDelegate, Object tag, Int32 timeout) +202
   System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate`1 endDelegate, Object tag) +112
   System.Web.Mvc.Async.<>c__DisplayClass25.<BeginInvokeAction>b__1e(AsyncCallback asyncCallback, Object asyncState) +838303
   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +146
   System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate`1 endDelegate, Object tag, Int32 timeout) +166
   System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate`1 endDelegate, Object tag) +27
   System.Web.Mvc.<>c__DisplayClass1d.<BeginExecuteCore>b__17(AsyncCallback asyncCallback, Object asyncState) +50
   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +146
   System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate`1 endDelegate, Object tag, Int32 timeout) +166
   System.Web.Mvc.Controller.BeginExecuteCore(AsyncCallback callback, Object state) +825393
   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +146
   System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate`1 endDelegate, Object tag, Int32 timeout) +166
   System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate endDelegate, Object tag) +27
   System.Web.Mvc.Controller.BeginExecute(RequestContext requestContext, AsyncCallback callback, Object state) +401
   System.Web.Mvc.<>c__DisplayClass8.<BeginProcessRequest>b__2(AsyncCallback asyncCallback, Object asyncState) +785498
   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +146
   System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate`1 endDelegate, Object tag, Int32 timeout) +166
   System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate endDelegate, Object tag) +27
   System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContextBase httpContext, AsyncCallback callback, Object state) +343
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +12551795
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +288 
```

我以管理员身份运行 IIS 7.5、VS2012，并将“所有人完全控制”添加到数据库文件夹。

我可以尝试什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T09:55:18.570

如果您在本地计算机上的 IIS 7.5 上托管您的页面，那么您收到的错误并不取决于您是否以管理员身份运行 Visual Studio。您需要以管理员身份运行您的应用程序，您可以通过设置运行您的应用程序配置的应用程序池的用户来实现。

因此，转到**IIS 管理器**，单击您用于应用程序的应用程序池，单击**“高级设置...”**，然后在**“进程模型”**下将“身份”属性的值**从默认的“应用程序池身份”更改为自定义帐户- 您的情况下的管理员**。

一般来说，我建议仅将 EmbeddableDocumentStore 用于单元测试（当然在“InMemory”模式下运行）和应用程序 - 将 RavenDB 配置为作为 Windows 服务运行。

# vim - 重新映射 Vim 的默认帮助导航键绑定

> ID：14092327
> 
> 赞同：1
> 
> 时间：2012-12-30T16:21:39.417
> 
> 标签：vim, keyboard, keyboard-shortcuts

我知道这可能是一个新手问题，但我似乎无法找到它，或者让它发挥作用。

如何重新映射帮助文件的默认键绑定？基本上，`<C-]>`我不想继续前进，而是想使用`<C-right>`，或使用`<C-left>`代替`<C-t>`等。只是让它更容易记住。

当然，只有当文件是帮助文件时才应该更改，否则不应进行这些更改，以免与任何内容冲突。

感谢你的帮助！（过去也是。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T17:50:02.620

如果您定义以下内容，则只能在帮助文件中使用`<C-Right>`/ ：`<C-Left>`

```
" In ~/.vim/ftplugin/help.vim
nnoremap <buffer> <C-Right> <C-]>
nnoremap <buffer> <C-Left>  <C-t>

" Or in ~/.vimrc
augroup HelpMaps
    autocmd!
    autocmd FileType help :nnoremap <buffer> <C-Right> <C-]>
    autocmd FileType help :nnoremap <buffer> <C-Left>  <C-t>
augroup END 
```

*尽管我认为仅*在帮助缓冲区中这样做没有一点用处。`<C-Right>`除了定义自己的/映射的插件之外，此类映射不会干扰任何东西`<C-Left>`。

# javascript - 你如何定位父母和孩子 在javascript中？

> ID：14092333
> 
> 赞同：0
> 
> 时间：2012-12-30T16:23:32.330
> 
> 标签：javascript, menu

只是一个快速的，但我很难理解它。

我正在使用 javascript 来检测菜单中的元素：

```
var nav = document.getElementById('nav');
var list = nav.children.length; 
```

但是菜单已经嵌套`<ul>`了下拉菜单，我该如何定位这些？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T16:30:13.220

`nav.getElementsByTagName('ul')`会给你`<ul>`里面的所有元素`nav`。

对于 DOM 中更复杂的搜索，您可以使用将 CSS 样式应用于元素的方式[`querySelector/querySelectorAll`](http://caniuse.com/queryselector)来[选择元素](http://www.w3.org/TR/CSS2/selector.html)`'#id ul'`（ 、`'.someClass'`等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T17:11:31.440

在查看您的代码并实际阅读并看到您的小提琴后，我删除了我的其他答案，因为它误解了您的需求......

简而言之，您需要编写一个递归函数以在找到时遍历所有子ul。我没有运行我的开发环境，所以会为你编写这个伪代码（我相信你会明白的）

```
RecursiveFunction(document.getElementById('nav'), "-"); 
```

//别处

```
function RecursiveFunction(domElement, prependedChar)
{

    //because this is .js you will probably need some closures...
    var currPrependedChar = prependedChar;
    var dom = domElement;

    //iterate all nodes, check if they are a li/a and populate dropdown...
    for(count;count < dom.list.Length;++count){

    //if the element you have found is a ul recurse
    if(dom.list[count] == "ul"){
         RecursiveFunction(dom.list[count], currPrependedChar + currPrependedChar ); //this calls this function
    }else{
         //combobox option.Value = currPrependedChar + elementInnerText
    }
    }
} 
```

这是小提琴形式的完整递归函数

[工作小提琴](http://jsfiddle.net/juCqP/22/)

代码

```
function RecursiveFunction(currDom, currPrependedChar) {

//because this is .js you will probably need some closures...
var prependedChar = currPrependedChar;
var dom = currDom;
var children = dom.children;
var childrenCount = children.length;

//iterate all nodes, check if they are a li/a and populate dropdown...
for (var i = 0; i < childrenCount; ++i) {

    var curElem = children[i];
    //if the element you have found is a ul recurse
    switch (curElem.nodeName) {
    case "A":
        var option = document.createElement('option');
        option.innerHTML = prependedChar + curElem.text;
        option.value = curElem.href;
        select.appendChild(option);
        break;
        default:
            if(curElem.nodeName == "UL") prependedChar += prependedChar
            RecursiveFunction(curElem, prependedChar);
        break;
    }
}
} 
```

# css - 移动网站溢出？

> ID：14092337
> 
> 赞同：0
> 
> 时间：2012-12-30T16:24:23.693
> 
> 标签：css, mobile, web, overflow

我开始创建一个移动网站，一切都很好并且可以工作，但有一件事不起作用。在任何浏览器中，overflow-x:hidden; 工作，但是当我检查我的手机时，我可以左右上下滚动...我只想上下滚动。所以我想以某种方式禁用溢出X......在我的浏览器中我没有问题，但在我的手机和其他手机上：/同样的问题。我读了一篇文章 -webkit- 这应该可以解决我在其他 android 浏览器中的问题，但我找不到一个网站写着它是如何工作的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T09:51:28.970

造成这种情况的可能原因是您设置了超出视口的最小宽度。如果您确定使用；

```
overflow-x: hidden; 
```

除了容器比视口大之外没有其他原因。尝试设置一个移动媒体查询，为您的容器提供 100% 的最大宽度/宽度。

Webkit 或供应商前缀非常怀疑与此有关。

# python - 在日期 +/- 2 个工作日内对 pandas 时间序列进行切片

> ID：14092339
> 
> 赞同：4
> 
> 时间：2012-12-30T16:24:49.873
> 
> 标签：python, pandas, time-series, slice

具有以下时间序列：

```
In [65]: p
Out[65]: 
Date
2008-06-02    125.20
2008-06-03    124.47
2008-06-04    124.40
2008-06-05    126.89
2008-06-06    122.84
2008-06-09    123.14
2008-06-10    122.53
2008-06-11    120.73
2008-06-12    121.19
Name: SPY 
```

如何在特定日期 +/- 2 个相邻（工作日）切片，即如​​果 d = '2008-06-06'：

```
 -2   2008-06-04    124.40
 -1   2008-06-05    126.89
  0   2008-06-06    122.84
  1   2008-06-09    123.14
  2   2008-06-10    122.53 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-07T16:52:43.330

Pandas 内置了一些非常好的工作日功能，可以自动处理这个问题。对于这个确切的问题，它实际上最终需要更多的代码，但它会很容易地处理更一般的情况。

```
In [1]: ind = pd.date_range('2008-06-02', '2008-06-12', freq='B')

In [2]: p = pd.Series(np.random.random(len(ind)), index=ind)

In [3]: p
Out[3]:
2008-06-02    0.606132
2008-06-03    0.328327
2008-06-04    0.842873
2008-06-05    0.272547
2008-06-06    0.013640
2008-06-09    0.357935
2008-06-10    0.517029
2008-06-11    0.992851
2008-06-12    0.053158
Freq: B, dtype: float64

In [4]: t0 = pd.Timestamp('2008-6-6')

In [5]: from pandas.tseries import offsets

In [6]: delta = offsets.BDay(2) 
```

这将创建两个工作日的抵消。您还可以对其他时间单位，甚至时间单位的组合进行任意偏移。现在有了起点和增量，您可以以标准方式智能地切片：

```
In [7]: p[t0 - delta:t0 + delta]
Out[7]:
2008-06-04    0.842873
2008-06-05    0.272547
2008-06-06    0.013640
2008-06-09    0.357935
2008-06-10    0.517029
Freq: B, dtype: float64 
```

这种方法的好处是间隔与行数无关。因此，例如，如果您有每小时数据并且可能有一些缺失点，您仍然可以以完全相同的方式捕获两个工作日。或者，如果您的数据源恰好也包含周末数据，但您仍然需要 +/- 2 个工作日。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-30T17:57:46.820

您可以使用 index 方法[`get_loc`](http://pandas.pydata.org/pandas-docs/dev/indexing.html?highlight=get_loc#indexing-internal-details)，然后切片：

```
d = pd.to_datetime('2008-06-06')
loc = s.index.get_loc(d)

In [12]: loc
Out[12]: 4

In [13]: s[loc-2:loc+3]
Out[13]: 
2008-06-04    124.40
2008-06-05    126.89
2008-06-06    122.84
2008-06-09    123.14
2008-06-10    122.53
Name: SPY 
```

.

*如果您在两天内只对那些感兴趣：*

```
In [14]: dt = datetime.timedelta(1)

In [15]: s[d - 2*dt:d + 2*dt]
Out[15]: 
2008-06-04    124.40
2008-06-05    126.89
2008-06-06    122.84
Name: SPY 
```

# c# - Neo4jClient C# QueryIndex 搜索节点的全部或部分文本

> ID：14092340
> 
> 赞同：2
> 
> 时间：2012-12-30T16:24:58.353
> 
> 标签：c#, neo4j, lucene, neo4jclient

我在 neo4j 中有一个正在构建的图形数据库，并且需要能够在索引引用的节点上搜索全部或部分文本。下面是一个示例节点，我可以在其中使用名为 Game 的索引进行搜索：

```
Node[1]{Type:"Game",Name:"Super Mario Kart",Description:"First Mario Kart Game in the series",Id:"a3b11cd8-b179-4775-a69e-ddcdd7b8369e"} 
```

这是我正在使用的 Cyper 查询：

```
START game=node:Game('Name:*Super Mario*') RETURN game; 
```

但是，此查询不返回任何内容。如果我像这样修改查询，它会返回，但我希望能够搜索 Name 属性中的所有文本，无论文本中是否有空格：

```
START game=node:Game('Name:*Super*') RETURN game; 
```

这是我用于查询索引的 C# 代码：

```
Node<Game> game = client.QueryIndex<Game>("Game", IndexFor.Node, "Name:*" + name + "*").First(); 
```

这是游戏实体类：

```
public class Game
{
    public string Name { get; set; }

    public string Description { get; set; }

} 
```

我是 Cypher 的新手，主要是在寻找与 SQL 的 LIKE 子句等效的内容。一旦我在 Neo4j 的控制台中正确构建并运行了查询，在 Neo4jClient 中开始工作应该是微不足道的。请让我知道您可能有的任何建议。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T17:05:13.187

事实证明，搜索所有文本就像这样简单：

```
START game=node:Game('Name: "Mario Kart"') RETURN game; 
```

这根本不需要“*”字符，并返回所有名称为“Mario Kart”的游戏。我希望这可以帮助任何有同样问题的人。

# regex - 正则表达式转换解释

> ID：14092349
> 
> 赞同：1
> 
> 时间：2012-12-30T16:26:12.683
> 
> 标签：regex, text, expression, sublimetext2, transformation

我正在努力`Sublime Text 2`为`goto:@ command`. 我需要帮助解释这个正则表达式转换：

```
<key>symbolTransformation</key>
<string>s/\/\*\*\s*(.*?)\s*\*\//** $1 **/; s/\/\*.*?\*\*\//./; s/\/\*[^\*].*?[^\*]\*\///</string> 
```

我的意图是编辑转换，但我需要先了解它。

是否有学习这种特殊语法的参考？我对正则表达式比较陌生，所有的 \ 和 / 让我发疯！:)

如果做不到这一点，有人可以带我了解一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T16:49:46.117

如果我们“展开”正则表达式，它们分别是：

*   替换`/\*\*\s*(.*?)\s*\*/`为`** $1 **`;
*   替换`/\*.*?\*\*/`为`.`;
*   替换`/\*[^*].*?[^*]\*/`为空（空字符串）。

第一个正则表达式：

```
/\*\*   # Look for '/' followed by two occurrences of '*',
\s*     # followed by zero or more space characters,
(.*?)   # followed by zero or more of any character, lazily (with capture),
\s*     # followed by zero or more space characters,
\*/     # followed by a '*' and a '/' 
```

由于捕获中的量词是惰性的（ ），这`*?`意味着正则表达式引擎将在`\s*`满足正则表达式的下一个组件（`*`如果需要，在返回文本以满足下一个组件之前匹配最大可能的数量）。捕获`$1`在替换文本中可用。

第二个正则表达式：

```
/\*      # Look for a '/' then a '*',
.*?      # followed by zero or more of any character, lazily,
\*\*/    # followed by two '*' and a '/' 
```

并将所有这些替换为一个点 ( `.`)。

第三个正则表达式：

```
/\*      # Look for a '/' then a '*',
[^*]     # followed by one character which is not a '*',
.*?      # followed by zero or more of any character, lazily,
[^*]     # followed by one character which is not a '*',
\*/      # followed by a '*' then a '/'. 
```

并用空字符串替换所有这些。

# symfony - FacebookBundle 安装错误

> ID：14092353
> 
> 赞同：0
> 
> 时间：2012-12-30T16:26:48.620
> 
> 标签：symfony, symfony-2.1

有人可以知道如何解决这个错误：

```
 Your requirements could not be resolved to an installable set of packages.

 Problem 1
- The requested package friendsofsymfony/facebook-bundle could not be found in any 
  version, there may be a typo in the package name.

Potential causes:
 - A typo in the package name
 - The package is not available in a stable-enough version according to your minimum-
   stability setting
  see <https://groups.google.com/d/topic/composer-dev/_g3ASeIFlrc/discussion> for more 
  details.

  Read <http://getcomposer.org/doc/articles/troubleshooting.md> for further common 
  problems. 
```

当我尝试在 Symfony 2.1.6 中安装 FacebookBunle 时出现此错误：

```
php composer.phar update friendsofsymfony/facebook-bundle 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T05:43:00.290

您的最低稳定性设置是多少？正如您在[Packagist](https://packagist.org/packages/friendsofsymfony/facebook-bundle)中看到的（还没有）稳定版本，因此您必须：

*   修改您的 composer.json 文件并`@dev`在版本号末尾添加。例如：

    ```
    “教义/教义夹具捆绑”：“*@dev”，
    ```

*   将您的最低稳定性设置从`stable`更改为`dev`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T10:49:22.103

您的解决方案 Marcos García 也不起作用！我使用了 Symfony 2.1.6，所以我遇到了同样的问题。

解决方案是下载没有供应商的 Symfony 版本，然后更新 composer.json：

```
php composer.phar update 

or

php composer phar install 
```

现在一切都会很好，只是不要忘记安装 Curl 和 Git。

谢谢。

# macos - 使用 applescript 捕获事件

> ID：14092355
> 
> 赞同：0
> 
> 时间：2012-12-30T16:27:12.250
> 
> 标签：macos, applescript

当其他（不相关的）应用程序更改状态（即关闭、最小化）时，applescript（或者可能是其他一些脚本）是否有可能接收通知？目标是维护最近关闭或最小化的 5 个应用程序的列表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T01:16:40.047

你真的不能用applescript做到这一点。如果您知道objective-c，尽管它相当微不足道。NSWorkspace 发布关于很多东西的通知，其中包括你想知道的关于应用程序隐藏、激活等的所有信息。请查看[此处](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSWorkspace_Class/Reference/Reference.html)的类文档，了解你可以获得的所有通知。

基本上你所要做的就是编写一个小的后台应用程序来接收这些通知，然后你可以对它们做任何你想做的事情。像下面这样的简单调用将为您注册所有通知，然后在“nsworkspaceNotification：”方法中使用一个简单的“if 语句”来确定您正在接收哪些通知，并允许您对它们采取行动.

```
[[[NSWorkspace sharedWorkspace] notificationCenter] addObserver:self selector:@selector(nsworkspaceNotification:) name:nil object:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T16:04:26.213

设置触发器的一种方法可能是[http://www.dssw.co.uk/blog/2011/01/28/how-to-run-an-applescript-when-switching-to-battery-power/](http://www.dssw.co.uk/blog/2011/01/28/how-to-run-an-applescript-when-switching-to-battery-power/)

以下脚本将为您提供当前最小化的所有应用程序（由于某种原因，除了 Finder，确定的错误），您可以将其设置为间隔运行，甚至将其设置为在后台连续运行（性能将受到影响我想），但希望它能让你更接近解决方案（当然要意识到这并不能真正解决任何窗口问题的状态更改触发器）

```
property top5 : {"None", "None", "None", "None", "None"}
property oldest : 0

tell application "System Events" to set _list to (name of application processes)

repeat with i from 1 to number of _list
    set current_name to item i of _list

    if top5 does not contain current_name then
        tell application "System Events" to tell application process current_name to set win_num to (number of every window)
        if not win_num is 0 then
            try
                tell application current_name
                    set _windows to every window
                    repeat with i from 1 to number of _windows
                        set this_window to item i of _windows

                        try
                            log "mini"
                            if miniaturized of this_window is true then
                                my addNewToTop5(current_name)
                                exit repeat
                            end if
                        end try

                        try
                            log "collapsed"
                            if collapsed of this_window is true then
                                my addNewToTop5(current_name)
                                exit repeat
                            end if
                        end try

                    end repeat
                end tell
            end try
        end if

    end if

end repeat

log top5

on oldestOfTop5()
if oldest is 5 then
    set oldest to 1
else
    set oldest to oldest + 1
end if
return oldest
end oldestOfTop5

on addNewToTop5(_item)
set item oldestOfTop5() of top5 to _item
end addNewToTop5 
```

# wcf - 负载平衡 MS Dynamics CRM 2011 沙盒处理服务

> ID：14092362
> 
> 赞同：9
> 
> 时间：2012-12-30T16:28:06.877
> 
> 标签：wcf, iis, dynamics-crm-2011, load-balancing, nlb

似乎我在这个问题上碰壁了，而且没有太多关于此事的文档也无济于事。

我定期向 CRM 运行大型自定义导入作业，所有这些都涉及从自定义客户端调用组织服务以将记录推送到 CRM。记录通过自定义沙盒插件。

导入需要相当长的时间，我正在尝试通过在多台服务器上设置沙盒处理服务来提高导入速度。

这是我到目前为止所尝试的：

1.  添加另一个具有沙盒处理服务的服务器。

    ```
     / Sandbox Processing Service (crmsb1)
    Client > Front End (crm) <
                              \ Sandbox Processing Service (crmsb2) 
    ```

    使用沙盒处理服务添加另一台服务器没有帮助。前端服务器没有将负载分配到两台服务器上，它继续使用原始服务器。只有在第一个后端服务器上禁用沙盒处理服务时，第二个服务器才开始处理插件请求。（带回第一个在线并没有帮助。）

2.  具有所有角色的两台负载平衡服务器。

    ```
     / Full Server (crm1)
    Client > IIS ARR (crm) <
                            \ Full Server (crm2) 
    ```

    我完全按照[本指南](http://blogs.msdn.com/b/crminthefield/archive/2012/10/03/kerberos-in-load-balanced-environments.aspx "负载平衡环境中的 Kerberos")（以及许多其他指南）操作，让 Web 应用程序通过反向代理工作，但未能通过组织服务执行请求。在通过不断更改另一个设置消除了无数 WCF 错误之后，我遇到了这个错误`The security context token is expired or is not valid. The message was not processed.`，让我认为负载平衡仅适用于 Web 应用程序。

3.  在多台服务器上手动调用组织服务。

    ```
     / Full Server (crm1)
    Client <
            \ Full Server (crm2) 
    ```

    我成功地设置了导入客户端，将导入作业拆分为多个块，并同时为每个块以循环方式调用所有组织服务端点。正如我所希望的那样，这显着加快了导入过程，并让我能够在需要时进一步扩展。

我阅读了有关此问题的所有信息，但我仍然对负载平衡在 CRM 2011 中的工作原理以及可能的配置感到困惑。

这[两个](http://www.microsoft.com/en-us/download/details.aspx?id=16673 "Microsoft Dynamics CRM 2011 性能和可扩展性与英特尔") [指南](http://www.microsoft.com/en-us/download/details.aspx?id=34688 "Microsoft Dynamics CRM 2011 数据加载性能和可扩展性案例研究")广泛使用了负载平衡，但没有详细描述如何设置它。

这一切都是在我上线之前在测试环境中设置的。我为所有服务使用了域帐户，设置了正确的 SPN，并且没有使用 SSL。我在 ARR 中尝试了使用和不使用 Client Affinity（它适用于 cookie，所以我假设 WCF 服务没有锁定到一个后端）。

我的问题如下：

1.  是否可以在主动/主动设置（负载平衡）的多个服务器上设置沙盒处理服务本身（上面的 1），还是仅支持主动/被动 (HA)？

2.  如果使用多个沙盒处理服务实例的唯一方法是设置多个具有前端和后端角色的服务器（上面的 2 个），有没有办法为组织服务使用负载均衡器，如 NLB 或 ARR ，还是只支持 Web App 的负载均衡器，我必须使用上面的第 3 种方法来负载均衡沙盒处理服务？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T19:10:34.967

这是为了回应您对我的文章 ( [http://bit.ly/QOEvLF](http://bit.ly/QOEvLF) ) 的评论，我也会在那里交叉发布回复：

沙盒服务不能放在负载均衡器后面——或者它们的设计方式不适合这种配置。我相信 CRM 实施指南包含这方面的信息，但沙盒服务将打开一个网络套接字并在特定端口上侦听流量。当沙盒服务成功上线时，它会回调 CRM 以将自己注册为“可用”（因此异步和前端等服务知道它是可用的）。然后，需要隔离（沙盒）的角色将根据需要直接通过该 TCP 通道循环调用沙盒服务。有关这方面的更多信息，请参阅：[http](http://bit.ly/CRMSetupFAQ) ://bit.ly/CRMSetupFAQ 。另请注意，您可能还需要为沙盒服务设置自定义 SPN。

如果您对此还有其他问题，请告诉我 - 谢谢！

肖恩

# java - 找不到 Java 符号？

> ID：14092365
> 
> 赞同：-7
> 
> 时间：2012-12-30T16:28:25.110
> 
> 标签：java

我正在为我的 java 类做一个项目，但我不明白为什么会出现这个错误。这是我的代码：

```
public class address 
{ 
String Street;
String City;
String State;
String Zip;

public address()
{
Street = "";
City = "";
State = "";
Zip = "";
}

public void setStreet(String street)
{
Street = street;
}

public void setCity(String city)
{
City = city;
}

public void setState(String state)
{
State = state;
}

public void setZip(String zip)
{
Zip = zip;
}

public String getStreet()
{
retrun Street;
}

public String getCity()
{
return City;
}

public String getState()
{
return State;
}

public String getZip()
{
return Zip;
}

} 
```

这是每个员工的地址类别。我们刚刚了解了 OOP。这是带有错误的 CMD 输出：

![在此处输入图像描述](../Images/7a705d5631a0b410e8296e5f2ee8142d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T16:31:03.783

错字：

```
public String getStreet()  {
    retrun Street; // should be return
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T16:34:20.890

我会尝试使用您的 IDE 来生成这种代码。自己打字只会导致错别字。

```
// type two lines
public class Address {
    private String street, city, state, zip;

    // and use the IDE to generate a constructor
    public Address(String street, String city, String state, String zip) {
        this.street = street;
        this.city = city;
        this.state = state;
        this.zip = zip;
    }

    // generate getters and setters
    public String getStreet() {
        return street;
    }

    public void setStreet(String street) {
        this.street = street;
    }

    public String getCity() {
        return city;
    }

    public void setCity(String city) {
        this.city = city;
    }

    public String getState() {
        return state;
    }

    public void setState(String state) {
        this.state = state;
    }

    public String getZip() {
        return zip;
    }

    public void setZip(String zip) {
        this.zip = zip;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T16:34:30.787

你拼错了`return`

```
public String getStreet()  {
    retrun Street; // wrong
} 
```

肯定是

```
public String getStreet()  {
    return Street; // correct
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-30T16:30:07.500

`retrun`​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-30T16:30:16.173

你有一个拼写错误。您在 getStreet 方法中写了 'rerun' 而不是 'return'。

# python - Python：简单的 PC 到 PC 通信

> ID：14092368
> 
> 赞同：2
> 
> 时间：2012-12-30T16:28:36.073
> 
> 标签：python, string, tcp, udp

我有兴趣制作一个将字符串从一台计算机传输到另一台计算机的应用程序。我对 TCP 或 UDP 通信感兴趣。我已经实现了 UDP，但它似乎能够发送多达 512 字节的数据/数据包。在两端实现数据包拆分和连接应该很麻烦，所以我想知道是否有一个库或类似的东西可以让我传输一个长字符串（希望不超过 10-20 KB，通常大约 1- 2KB) 直接发送到另一台计算机。我不关心加密通信，因为没有发送/检索敏感数据。我可以使用任何建议吗？

这是我现在的想法：

```
import easylib
def receivedData(text):
     print(text)
sendData("Hello world! Oh my gosh, this is a pretty long string. Good to know I can send it without any problems.") 
```

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T16:37:24.040

[Python 套接字服务器的一个很好的小例子](http://www.doughellmann.com/PyMOTW/socket/tcp.html)。您还可以使用一些更高级别的协议，[例如 XMLRPC](http://docs.python.org/2/library/simplexmlrpcserver.html)

# algorithm - 如何找到平面中的点

> ID：14092369
> 
> 赞同：0
> 
> 时间：2012-12-30T16:28:44.583
> 
> 标签：algorithm, computational-geometry, nearest-neighbor

我有一些 r=1 的已知圆圈（下图，4 个圆圈称为 C1 到 C4）。我想在圆圈内找到离 (0,0) 最近的点。有任何多项式算法吗？

![在此处输入图像描述](../Images/662ee81ba767ccbf3755a0d9fcb0c177.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T17:11:41.793

离原点最近的点将是以下之一：

*   两个圆的交点

*   圆与连接该圆心与原点的直线的交点

*   原点本身，如果它不位于任何圆圈内

*   如果这个圆心在原点，圆上有无限个点

检查所有这些点，并找到其中最接近的点，条件是该点不在某个圆圈内。

它会给你复杂度 O(n^3)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T17:13:47.723

这不是一个完全可以立即使用的答案，而只是一个供您遵循的草稿（请让我们知道您下次尝试了什么）。

1.  如果 (0,0) 没有被任何圆圈覆盖，则答案将是 (0,0)

2.  如果 (0,0) 被 1 个或多个圆圈覆盖：

    （1）这些圆上没有被任何圆覆盖的最近点（可以通过将圆心连接并延伸到（0,0）来计算）应为候选；

    （2）这些圆的所有没有被任何圆覆盖的交叉点都应该是候选。

    (3)如果(0,0)是1个或多个圆的中心，检查这些圆是否被其他圆完全覆盖。如果没有，则将这些圆圈上未被任何其他圆圈覆盖的任何点添加到候选人中。

3.  找出候选人中的最小值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T16:43:23.503

您可以找到圆圈内每个点的距离（0,0）点的长度，然后找到不在圆圈内的邻域的最小值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T18:17:53.040

所需点位于以原点为中心并最大内切于某个输入圆 Cn 的所有圆的联合边界上。

算法：

对于每个以 O_i 为中心的半径为 r_i 的输入圆 C_i（其中 O_i 距离原点 d_i，Oi_1^2 + Oi_2^2 = d_i^2），计算内接半径 u_i = r_i - d_i，并找到它们的最大值。远离原点的某个点 u_max 是解决方案

要找到实际点，假设某些 i 的 u_i = u_max。那么你想要的点是 - O_i * u_i / d_i。如果 d_i = 0，那么任何远离原点的点 r_i 都有效。

# twitter-bootstrap - MVC4 + 引导 + 数据表

> ID：14092370
> 
> 赞同：0
> 
> 时间：2012-12-30T16:28:53.330
> 
> 标签：twitter-bootstrap, asp.net-mvc-4, datatables

我创建了一个新的 MVC 4 web 项目（VS 2012 Express）并安装了 Twitter Bootstrap 包：

PM> 安装包 twitter.bootstrap.mvc4

似乎没问题，但我需要添加 DataTables (http://www.datatables.net/) 但似乎无法让它工作。

我编辑了 _BootstrapLayout.basic.cshtml 文件以包含数据表 js：

```
<link href="@Styles.Url("~/Content/css-responsive")" rel="stylesheet" type="text/css" />

    <script src="@Url.Content("~/Scripts/jquery-1.8.3.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.dataTables.js")" type="text/javascript"></script>

    @RenderSection("head", required: false)
    @Html.Partial("_html5shiv") 
```

在我看来，我添加了：

```
<script type="text/javascript" charset="utf-8">
            $(document).ready(function() {
                $('#example').dataTable();
            } );
        </script> 
```

并将表的 ID 设置为“示例”

虽然它似乎不起作用......视图是由 Visual Studio 自动生成的，所以我也将标签添加到表中......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T20:04:23.170

看起来这是包含 JS 文件的问题。

_BootstrapLayout.basic.cshtml 有：

```
 @Scripts.Render("~/js") 
```

应该是什么时候

```
 @Scripts.Render("~/Scripts") 
```

这解决了问题。

# knockout.js - ajax调用成功后将viewmodel绑定到ui

> ID：14092387
> 
> 赞同：4
> 
> 时间：2012-12-30T16:31:32.287
> 
> 标签：knockout.js, knockout-mapping-plugin, knockout-2.0

我在每行数据中有一个全选切换复选框和复选框。

现在从服务器返回的数据没有`isSelected`Observable。我为每一行添加了 'isSelected' observable。但是`isSelected`observable 不会绑定到每行中的复选框。

这是视图模型：

```
var folderViewModel = function () {
    var self = this;
    self.Folders = ['Inbox', 'Archive', 'Sent', 'Spam'];
    self.SelectedFolder = ko.observable();
    self.Mails = ko.observableArray([]);
    self.SelectedMail = ko.observable();
    self.SelectAll = ko.observable(false);

    self.navigate = function (folder) {
        self.SelectedFolder(folder);
        //$.get('/Api/MailBox', { folder: folder }, self.Mails);

        $.ajax({
            url: "/Api/Mailbox",
            data: { folder: folder },
            success: function (data) {
                ko.mapping.fromJS(data, {}, self.Mails);
                ko.utils.arrayForEach(self.Mails(), function (mail) {
                    mail.isSelected = ko.observable(true);
                    mail.isSelected.subscribe(function (myvalue) {
                        console.log(myvalue);
                    });
                });
                console.log(ko.toJSON(self.Mails()));
            },
            statusCode: {
                404: function () {
                    alert("No Mail");
                }
            }
        });

        //ko.mapping.fromJS(data, {}, self.Mails);
        //console.log(ko.toJSON(self.Mails));
    };

    self.SelectAll.subscribe(function (newValue) {
        ko.utils.arrayForEach(self.Mails(), function (mail) {
            console.log(mail.isSelected());
            mail.isSelected(newValue);

        });
        console.log(newValue);
    }, self);

    this.navigate("Inbox");
};
ko.applyBindings(new folderViewModel()); 
```

这是绑定。

```
<table class="table table-bordered table-striped table-condensed table-hover">
<thead>
    <tr>
        <th>
            <input type="checkbox" data-bind="checked: SelectAll"/>
            @*<input type="checkbox" />*@
        </th>
        <th>
            From
        </th>
        <th>
            To
        </th>
        <th>
            Subject
        </th>
        <th>
            Date
        </th>
    </tr>
</thead>
<tbody data-bind="foreach:Mails">
    <tr data-bind="click:$root.navigateToMail">
        <td style="width: 15px">
            <input type="checkbox" data-bind="checked: $root.isSelected">
            @*<input type="checkbox">*@
        </td>
        <td data-bind="text: From">
        </td>
        <td data-bind="text: To">
        </td>
        <td data-bind="text: Subject">
        </td>
        <td data-bind="text: MailDate">
        </td>
    </tr>
</tbody> 
```

该复选框 `<input type="checkbox" data-bind="checked: $root.isSelected">`未绑定到`mails.isSelected=ko.obsevable(true)`. 可能是什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T17:34:33.247

首先，感谢使用[learn.knockoutjs.com](http://learn.knockoutjs.com/#/?tutorial=webmail)示例，令人惊叹的资源。

您的错误是 KnockoutJS 中的常见缺陷：您正在修改模型而不更新绑定到它的 observables。请参阅以下几行 -

```
ko.mapping.fromJS(data, {}, self.Mails);
ko.utils.arrayForEach(self.Mails(), function (mail) { ... }); 
```

如果您看到，您首先为邮件创建模型，然后添加一个额外的 observable。这个 observable 应该附加到哪个上下文？如果不更新每封邮件的值，`mail.isSelected`则永远不会将您添加到邮件对象中。

有两种方法可以解决这个问题。第一个，更新 forEach 数组中的邮件模型：

```
ko.utils.arrayForEach(self.Mails(), function (mail, index) { 
    // Add up the isSelected observable
    self.Mails()[index] = mail; 
}); 
```

这对可观察数组有一个性能问题，您可以[在此处](http://www.knockmeout.net/2012/04/knockoutjs-performance-gotcha.html)阅读。基本上，您想要创建一个临时数组并更新整个可观察数组，而不是`Mails()`每次调用。

另一种方法非常简单：交换创建邮件模型的顺序：

```
ko.utils.arrayForEach(self.Mails(), function (mail) { ... });
ko.mapping.fromJS(data, {}, self.Mails); 
```

首先，您将附加到您的 observable 的数据对象，然后您告诉您的 viewmodel “嘿！我们有一个新模型来保存它，它具有来自`data`PLUS 一个 observable isSelected 我刚刚添加的这个属性，要绑定它吗？”

话虽这么说，HTML 中的属性 is`checked: isSelected`和 not `checked: $root.isSelected`，这就是它在 SelectAll 上工作的原因（有点），因为 isSelected 被绑定到您的 ViewModel 而不是您的邮件模型。你可以用这个方便的语句来调试它：

```
// In any row inside your data
<td data-bind="text: ko.toJSON($data)">DEBUG DATA</td> 
```

应该是这样，您可以在这里看到您的代码及其所有解决方案：http: [//jsfiddle.net/jjperezaguinaga/VTuHA/](http://jsfiddle.net/jjperezaguinaga/VTuHA/)。我添加了一些示例数据（使用`/echo/json/`JsFiddle 的功能）并删除了一些东西，以及我用来调试的最后一个代码的额外列。在最后一列中，您可以看到`isSelected`每次单击复选框时都会更新值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T16:43:05.393

是不是`isSelected`在每个`mail`项目上添加，不在`root`视图模型中？如果是这样，您的绑定应该是：

```
<input type="checkbox" data-bind="checked: isSelected"> 
```

注意：我也没有`navigateToMail`在视图模型中看到可用的方法`root`，这也会导致问题。

# css - CSS位置固定属性错误

> ID：14092389
> 
> 赞同：1
> 
> 时间：2012-12-30T16:31:45.303
> 
> 标签：css, position, width, fixed

这是我的网站： [http ://www.kursatkarabulut.com/dersler/](http://www.kursatkarabulut.com/dersler/)

我试图让类似按钮保持在浏览器左上角的固定位置。每个赞按钮都在另一个 .likebuttons 子类中。这个 CSS 有什么问题？

我的 CSS 是：

```
.likebuttons {
    position:fixed;
    left:5px;
    top:5px;
    margin:20px 25px 0;
} 
```

另外我还有一个问题。页面宽度为 800 像素。当我在 Explorer/Opera/Safari/Mozilla 中打开此页面时，一切似乎都很正常。但是当我在 Chrome 中打开它时，它会忽略 width:800px; 和保证金：0自动；变成全屏宽。我怎样才能解决这个问题？

我的 HTML 是：

```
body {
    width:800px;
    margin:0 auto;
    height:100%;
    text-align:justify;
    padding: auto;
    background:#CCCCCC;
    margin-bottom:15px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T16:38:25.723

这就是你所拥有的：

```
.likebuttons {
    display: block;
    position: absolute;
    left: 0px;
    top: 100px;
    width: 300px;
    height: 200px;
    margin: 20px 25px 0;
    clear: right;
} 
```

更改`top: 100px;`为`top: 0px;`

在铬中正常工作。

# c++ - 将十六进制代码格式化为 asm 代码

> ID：14092392
> 
> 赞同：1
> 
> 时间：2012-12-30T16:31:56.387
> 
> 标签：c++, debugging, assembly, disassembly, opcode

我需要编写类似“反汇编程序”的东西，我需要读取 RAM 内存（代码部分）并将其格式化为

```
ADD rax, rbx
MOV rcx, rax 
```

我在哪里可以找到关于如何将操作码转换为相应操作/操作数的综合指南/论文？我的目标是 x64 程序集

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T16:35:04.450

你可以看看[这个库](http://udis86.sourceforge.net/ "udis86 - x86 和 x86-64 的反汇编程序库")——你可以“按原样”使用它，或者只是从它的源代码中学习（它是在 BSD 许可下发布的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T02:55:32.703

我真的建议您只使用 BSD 许可的[udis86 库](https://github.com/vmt/udis86)，而不是编写另一个 x86 反汇编程序：

```
#include <stdio.h>
#include <udis86.h>

enum {
    /* Controls whether to disassemble for x86 or x64 */
    UDIS86_MODE = 64 /* 16, 32, or 64 */
};

int main()
{
    ud_t ud_obj;

    ud_init(&ud_obj);

    ud_set_input_file(&ud_obj, stdin);
    ud_set_mode(&ud_obj, UDIS86_MODE);
    ud_set_syntax(&ud_obj, UD_SYN_INTEL);

    while (ud_disassemble(&ud_obj)) {
        printf("\t%s\n", ud_insn_asm(&ud_obj));
    }

    return 0;
} 
```

github上的Udis86版本甚至支持最新的Intel AVX指令。

使用 MinGW64 / MSYS 工具链为 x86 或 x64 Windows 构建 Udis86 非常容易。以防你不熟悉 GCC 和 GNU autotools 构建系统，我已经构建了：

1.  [http://scottt.tw/mingw32-udis86.tar.gz](http://scottt.tw/mingw32-udis86.tar.gz)
2.  [http://scottt.tw/mingw64-udis86.tar.gz](http://scottt.tw/mingw64-udis86.tar.gz)

为了您的方便。档案包含 DLL 和头文件。（从回答 Stackoverflow 问题的随机陌生人那里下载和运行 DLL 是否明智是另一回事；）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T16:35:30.260

这是我的操作码首选列表，按数字排序：

[http://ref.x86asm.net/geek64.html](http://ref.x86asm.net/geek64.html)

该站点还有许多其他列表。但是，如您所见，x86/64 上的操作码非常多，因此手动编写反汇编程序需要一段时间。

我建议您将代码提供给现有的反汇编程序。例如，看到这个问题：

[如何反汇编原始 x86 代码？](https://stackoverflow.com/questions/1737095/how-do-i-disassemble-raw-x86-code)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T16:37:03.667

1.  对于英特尔，您可以在[http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html](http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html)找到它- 特别是，您可能对第 2 卷感兴趣。

2.  对于 AMD 处理器，它必须在此处：http: [//developer.amd.com/resources/documentation-articles/developer-guides-manuals/#manuals](http://developer.amd.com/resources/documentation-articles/developer-guides-manuals/#manuals)。看来你需要第3卷。

尽管如此，他们还是有很多共同点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-30T19:34:35.107

如果您正在创建自己的反汇编程序，则必须从...下载指令集指南（第 2 卷）

```
http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html 
```

附录中的注释和表格非常宝贵。您可能会注意到许多说明都遵循类似的模式。因此，您可以构建自己的函数指针表来解码指令。填充表格可能很耗时。

希望这可以帮助。

# javascript - Google Chrome 扩展程序中的 JavaScript 事件

> ID：14092393
> 
> 赞同：0
> 
> 时间：2012-12-30T16:32:00.603
> 
> 标签：javascript, google-chrome-extension

我是一个 Chrome 扩展程序的新编码，所以为了调用一个函数，我使用这个：

```
getElementsByTagName('body').addEventListener("load", function() {

  chrome.tabs.getSelected(null, function(tab) {

     alert(tab.url);

  });

}, false); 
```

它不起作用。我也试过这个：

```
getElementsById('bottom').addEventListener("click", function() {

  chrome.tabs.getSelected(null, function(tab) {

     alert(tab.url);

  });

}, false); 
```

我不知道问题是否出在 manifest.json 中，所以这里是：

```
{

   //Main

   "name": "Linknote",
   "version": "0.4",
   "manifest_version": 2,
   "description": "Store all your links",
   "permissions": [
     "storage",
     "http://ajax.googleapis.com/",
     "tabs"
   ],

//Chrome Tab

   "browser_action": {

     "default_title": "helloworld",      // optional; shown in tooltip
     "default_popup": "popup.html"        // optional

   }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T16:41:01.237

如果您使用的是 Chrome 的浏览器操作，那实际上应该是这样的。

```
chrome.browserAction.onClicked.addListener( function(tab){
    -- Your javascript code here --
}); 
```

我想这就是你所缺少的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T16:46:42.523

您的代码中有两个错误：第一个是您忘记`document`在 getElementById 上添加对象。只需在我的 popup.html 中运行此代码，就没有任何问题。

```
document.getElementById("bottom").addEventListener("click", function() { 
       console.log("Clicked") 
}, false); 
```

第二个是您忘记了 getElementsByTagName 返回 NodeCollection，因此您需要检索要添加 EventListener 的第一个节点

```
document.getElementsByTagName("body")[0].addEventListener("load", function() { 
       console.log("Loaded") 
}, false); 
```

[您的代码在Developer Toolbar](https://developers.google.com/chrome-developer-tools/)中返回语法错误；为了在您的 Chrome 扩展程序中打开它，请单击您的浏览操作图标/页面操作图标，然后右键单击弹出窗口。单击“检查元素”将向您展示一个全新的世界。

# python - Jinja2 模板宏中的 NamedTuples

> ID：14092395
> 
> 赞同：12
> 
> 时间：2012-12-30T16:32:29.570
> 
> 标签：python, templates, jinja2

传奇继续，从[原始线程](https://stackoverflow.com/questions/14016356/jinja2-macro-selecting-macro-or-dynamic-macro-calls)延伸。

所以，我有一些东西可以在 python 代码中创建宏：

```
from flask import get_template_attribute
from jinja2 import Template

    class InternalMacro(object):
        """
        Creates a macro given a name, internal macro text, and content to fill(as namedtuple(t.var), dict(k,v), list(i), or other)
        """
        def __init__(self, name = None,
                           text = None,
                           content_is = None):
            self.name = name
            self.macro_name = "{}_template".format(self.name)
            self.macro_var = "{}_macro".format(self.name)
            self.text = text
            self.content_is = content_is
            self.macro_txt = self.format_text

        @property
        def is_tuple(self):
            return "{{% macro {0}(t) %}}{1}{{% endmacro %}}".format(self.macro_var, self.text)

        @property
        def is_dict(self):
            return "{{% macro {0}(items) %}}{{% for k,v in items.iteritems() %}}{1}{{% endfor %}}{{% endmacro %}}".format(self.macro_var, self.text)

        @property
        def is_list(self):
            return "{{% macro {0}(items) %}}{{% for i in items %}}{1}{{% endfor %}}{{% endmacro %}}".format(self.macro_var, self.text)

        @property
        def format_text(self):
            return getattr(self, self.content_is)

        @property
        def return_template(self):
            return Template(self.macro_txt)

        @property
        def return_callable(self):
            return get_template_attribute(self.return_template, self.macro_var) 
```

我将 namedtuples 作为列表或字典单独传递。这在传递列表时有效（尚未完全测试为 dict），但在传递单个命名元组时不起作用。无论如何，到目前为止，namedtuple 都被转义为 unicode。

所以给出：

```
test_macro = InternalMacro('test', '{{ t }} <div id="divvy">{{ t.var }}</div>', 'is_tuple')

test_macro.return_callable(Anamedtuple) 
```

返回：

```
u'Anamedtuple(var="A VAR VALUE") <div id="divvy"></div>' 
```

不是：

```
u'Anamedtuple(var="A VAR VALUE")' <div id="divvy">A VAR VALUE</div> 
```

如果我将其作为列表执行，则 .var 会被正常调用。

我错过了什么，我该如何规避这个？单个 namedtuple 被转义，但列表没有。我可以做一个列表，然后弹出第一个，可能对我来说似乎不干净。任何有关改进这一点的建议也值得赞赏。

编辑：

简单的解决方案是将所有内容简化为传入列表，消除单个和 dict 选项，只需传入 1 的列表。我仍然想弄清楚那里到底发生了什么。

编辑2：

更深入的探索表明，我输出 namedtuple 的方式产生了我看到的结果，即 -

```
test_macro = InternalMacro('test', '{{ t }} <div id="divvy">{{ t.var }}</div>', 'is_tuple') 
```

结果是：

```
u'Anamedtuple(var="A VAR VALUE") <div id="divvy"></div>' 
```

然而：

```
test_macro = InternalMacro('test', '<div id="divvy">{{ t.var }}</div>', 'is_tuple') 
```

结果是

```
'<div id="divvy">A VAR VALUE</div>' 
```

我猜namedtuples会被阅读一次，或者......任何详细的解释都值得赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-25T17:39:27.627

可能不是你想要的，但...

```
from collections import namedtuple

x = namedtuple("Foo", "var")
z = x(var = 123)
with app.app_context():
    test_macro = InternalMacro('test', "'{{ t }}' <div id=\"divvy\">{{ t.var }}</div>", 'is_tuple')
    returnVal = test_macro.return_callable(z)

print returnVal
#'Foo(var=123)' &lt;div id="divvy"&gt;123&lt;/div&gt; 
```

'Foo(var=123)' <div id="divvy">123</div>

```
repr(returnVal)
'u\'\\\'Foo(var=123)\\\' <div id="divvy">123</div>\'' 
```

我正在使用 Python 2.7 和 Flask 0.10.1（已经有一段时间了）。

提示是对未明确定义的事物的期望。除非我错过了，否则在 InternalMarco 的 is_tuple() 属性中的任何地方，基本类型（int、str 等）和类对象之间没有区别。同样对于 is_tuple，所有内容都放在一个字符串中，然后打印到缓冲区。

该行为不同于`for i in items`刷新每个 for 循环体`{i}`（假设它是输入 a 的错字`{1}`）并且不执行任何字符串附加。

`env/Python27/lib/site-packages/jinja2/parser.py`是我相信会发生这种情况的地方

第 869 行

```
elif token.type == 'block_begin':
  flush_data()
  next(self.stream)
  if end_tokens is not None and \
                   self.stream.current.test_any(*end_tokens):
     return body
  rv = self.parse_statement()
  if isinstance(rv, list):
     body.extend(rv)
  else:
     body.append(rv)
  self.stream.expect('block_end') 
```

# delphi - 如何最好地解决直到销售点打印收据

> ID：14092398
> 
> 赞同：0
> 
> 时间：2012-12-30T16:32:42.563
> 
> 标签：delphi, point-of-sale, receipt

我已经使用 delphi 开发了一个销售点应用程序，但我只剩下最后一个软件，即打印现金收据。我在应用程序中的大部分报告中都使用了 Rave Reports，并尝试使用 Rave 报告来制作我的收据。我使用 Rave Reports 时遇到的唯一问题是我不知道如何控制页面进给，我想强制 rave 继续提供页面进给，否则它会打印一个部分，然后停止打印某些页面，然后继续打印 在收据上留一个大的空白区域。无论如何，是否可以使用 rave 或 delphi 强制或管理进纸。

然后是另一个问题，对于该问题的替代解决方案：

有没有办法可以打印 TMemo 的内容？那我可以把所有买的东西都放在TMemo里然后这样寄吗？这是一个好主意吗？

我正在使用德尔福 XE2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T23:28:48.657

如果您正在寻找快速报告的替代方案，您可能应该查看[OPOS](http://en.wikipedia.org/wiki/OPOS)或 ESC/POS（爱普生标准）

OPOS 更像是一个完整的打印解决方案，并接管连接到打印机并发送打印作业（在大多数情况下通过 Windows 购买）。其中 ESC/POS 是您附加到原始文本的一组格式化命令，您将其发送到打印机。

它们是控制 POS 打印机的行业标准，因此市场上的大多数收据打印机都支持其中一种（大多数在某种程度上都支持），它们具有控制/进纸、切纸和打开现金提款的标准方法（如果连接到打印机）。

我在 Delphi 应用程序中都使用过，您可以轻松地迭代 TMeno 中的行，将数据发送到打印机。如果您使用的是 ESC/POS，您可以使用 Delphi 的`AssignFile`或`AssignPrn`命令连接到打印机。

不利的一面是，它们一开始可能有点棘手，并且在格式化方面有点受限，但如果你有一台合适的收据打印机，它们的打印速度必须比使用本机 Windows 打印方法更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T18:28:41.383

好吧，你在这里有一些选择....

*   继续使用您所在的路径（报告编写器等），它将输出到收据打印机打印驱动程序，然后输出到 windows 打印系统

*   使用 Zebra 或其他打印机，并向其发送打印机本机命令（Zebra 具有 ZPL 语言）。这为您提供 %100 控制权，它绕过 Windows 打印。但是，您将仅支持某些打印机型号。

嗯！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T19:55:18.637

我知道这并不能真正帮助你，但我使用 FastReport 作为收据，它就像一个魅力。页面配置中有一个特殊的“无限长度”页面，所以在 rave 报告中可能有类似的东西。

考虑切换到 FR（这是值得的）。

# android - 在 Android 活动的静态变量中存储（大）哈希图是否安全？

> ID：14092399
> 
> 赞同：0
> 
> 时间：2012-12-30T16:32:53.470
> 
> 标签：android, andengine

几个月来，我一直在测试我使用 AndEngine 框架开发 Android 游戏的技能。
现在我面临一个令人困惑的问题，在我们的项目中，我们将一个活动的所有TextureAtlas（即纹理）保存在该活动中的**静态**HashMap中。这会产生一些内存泄漏问题或类似的不愉快的事情吗？我在 Android 中听说过很多关于静态变量的矛盾的东西，所以我不知道该怎么想。

请注意，屏幕旋转被阻止，因此它至少少了一个陷阱。

提前致谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T16:39:27.457

> 这会产生一些内存泄漏问题或类似的不愉快的事情吗？

根据定义，Java 中的静态数据成员是内存泄漏。这些对象，以及它们引用的任何东西，都不能被垃圾回收，至少在对它们的静态引用被删除之前是这样。

这是否是一个问题是另一回事。例如，泄漏一个四字节整数不会成为问题。`HashMap`您可以使用 DDMS 生成堆转储并使用 MAT 检查它，以查看“for realz”您的静态内存有多少`TextureAtlas`。

对于像 a 这样的静态集合`HashMap`，关键是确保您正在删除不再需要的条目。当集合不断增长时，内存泄漏成为一个问题，因为你不断地向它们添加东西，而永远不会删除任何东西。根据您的情况，a `WeakHashMap`（键被弱持有，允许地图条目在没有其他人使用您的键时消失）可能是一个更好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T16:44:50.120

当有对 Activity 实例的反向引用时，静态变量是不好的。因为活动在应用程序的使用生命周期中多次重新创建（例如，当您切换手机时）。

例如，以下代码是安全的：

```
private static Long mMyLong; 
```

但是这个不安全：

```
private static Context mContext; 
```

有时要小心，有一些不明显的反向引用。

为了避免这种麻烦，您应该将静态 HashMap 存储在您的应用程序类中（您可以在这里找到我关于应用程序类创建的另一篇文章[https://stackoverflow.com/a/13994622/1789730](https://stackoverflow.com/a/13994622/1789730)）。因此，无论您的活动生命周期如何，您的哈希图都将创建一次。此外，您将获得性能。为了不保留任何引用，您可以在 YourActivity.onDestroy() 中将 hashmap 及其内容设置为 null，然后在 YourActivity.onCreate() 中重新创建它。

如果 hashmap 保留任何死亡引用，您可以做出以下体验。如上所述，将 hashmap 放在应用程序类中。将手机翻转为纵向/横向以重新创建您的活动。因此，如果您的活动因使用 hashmap 对象而崩溃，这意味着它会保留对您活动的引用。

# css - 跨越多行的 DIV

> ID：14092402
> 
> 赞同：1
> 
> 时间：2012-12-30T16:33:13.667
> 
> 标签：css, layout, html, positioning

我需要在使用 DIV 的网站上创建磁贴网格。一些图块可以向下延伸并覆盖两行，而一些图块可以向右延伸以覆盖两列。

假设我找到了正确放置所有这些图块的方法，是否可以使用直接的 CSS 来做到这一点？我们希望避免使用绝对定位，因为该站点应该在多个设备上正确呈现。

作为测试，我想出了以下平铺布局，但我想不出一种正确渲染它的方法。

```
+-------+---+
|       |   |
+---+---+   |
|   |   |   |
|   +---+---+
|   |       |
+---+-------+ 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T16:43:22.273

### 使用这样的东西：

**HTML**

```
<div class="wrap">
    <div class="col2row1"></div>
    <div class="col1row2 right"></div>
    <div class="col1row2"></div>
    <div class="col2row1 right"></div>
</div>​ 
```

**CSS**

```
div {border: 1px solid #999; float: left;}
.wrap {overflow: hidden; width: 160px; border: 0; float: none; margin: 100px;}
.col1row2 {width: 50px; height: 100px;}
.col2row1 {width: 100px; height: 50px;}
.right {float: right;}​ 
```

### 小提琴：http: [//jsfiddle.net/NBcEw/](http://jsfiddle.net/NBcEw/)

### 截屏：

![](../Images/b4f8b4a73c6eb1863593dd58ecc0b5d8.png)

* * *

### 除了麻烦之外，还有另一个插件：

[**jQuery Masonry**](http://masonry.desandro.com/)是 jQuery 的动态布局插件，是 CSS 浮动的另一面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T16:39:57.163

这是一个尝试：

```
<div style="background-color: #f00; width: 67%; float: left;"> foo</div>
<div style="background-color: #00f; width: 32%; float: right;"> foo<br />bar</div>
<div style="background-color: #0f0; width: 32%; float: left; "> foo <br /> bar</div>
<div style="background-color: #0ff; width: 32%; float: left; "> foo </div>
<div style="background-color: #ff0; width: 67%; float: right;"> foo </div>​ 
```

请参阅[jsFiddle](http://jsfiddle.net/9W2Nm/)。

# opengl - 我在OpenGL中的矩阵乘法不像预期的那样

> ID：14092403
> 
> 赞同：1
> 
> 时间：2012-12-30T16:33:17.917
> 
> 标签：opengl, matrix

我正在调试 OpenGL 中的矩阵乘法，并在结果矩阵中得到一个执行位置向量。

这是我的代码：

```
{
    glMatrixMode(GL_MODELVIEW);
    glPushMatrix();

    glLoadIdentity();
    glRotatef(45,0.0f,1.0f,0.0f);
    glGetFloatv(GL_MODELVIEW_MATRIX, (GLfloat *)&rot);

    glLoadIdentity();
    glTranslatef(2.0f,2.0f,2.0f);
    glGetFloatv(GL_MODELVIEW_MATRIX, (GLfloat *)&trs);

    glLoadIdentity();
    glLoadMatrixf(rot);
    glMultMatrixf(trs);
    glGetFloatv(GL_MODELVIEW_MATRIX, (GLfloat *)&rottrs);

    glPopMatrix();
} 
```

从纯粹的数学角度来看，我应该得到 rottrs[12] 中的 2xcos(45)-2xsin(45) 和 rottrs[14] 中的 2xcos(45)+2xsin(45) 因为 rot[0]=cos(45) 和 rot [2]=-罪(45)

但我有相反的情况。调试器显示：

rottrs[12]=2.8284271

rottrs[13]=2.0000000

rottrs[14]=0.00000000

rottrs[15]=1.0000000

你能告诉我哪里出错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T16:52:45.783

OpenGL按列主要顺序索引它的矩阵，即索引去

```
0 4 8 c
1 5 9 d
2 6 a e
3 7 b f 
```

# jquery - 通过jquery访问动态加载的内容

> ID：14092405
> 
> 赞同：0
> 
> 时间：2012-12-30T16:33:35.357
> 
> 标签：jquery, asp.net-mvc

让我们想象一个情况。

我有一个 ASP 网站，我正在将内容加载到 div

所以我有

```
<div id="placeholder"></div>
<button onClick="javascript:test()">Bla</button> 
```

我正在通过 jQuery 向它加载内容：

```
$("#placeholder").load("@Url.Action("Add","Products")"); 
```

现在我想拥有 javascript 测试功能，它将像这样工作：

1）访问在占位符div中加载的内容，并找到一个表单（在此div中名为“FORM”，从产品控制器添加操作加载）并触发验证事件：

我试过了：`$("#Form").valid()`但它不起作用。

我应该怎么办 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T16:36:17.133

您所做的两个可能的问题：

1.  您说表单有*名称* `FORM`，但您使用`id`选择器尝试找到它 ( `$("#Form")`)。要么给它一个`id`，要么用`$("form[name=Form]")`来找到它。我还要确保你在两个地方使用相同的大写（你说名字是`FORM`但你`#Form`在选择器中使用了）。

2.  您需要在加载*后找到它。*`load`为您提供回调（第二个参数）。

所以把它们放在一起：

```
// Either give it an `id` (here I've assumed `id="theForm"` in the markup):
$("#placeholder").load("@Url.Action("Add","Products")", function() {
    // This is the load callback, called when the load is complete
    $("#theForm").valid();
});

// Or use the selector `form[name=Form]` to find it:
$("#placeholder").load("@Url.Action("Add","Products")", function() {
    // This is the load callback, called when the load is complete
    $("form[name=Form]").valid(); // <== Assuming the name is "Form" not "FORM"
}); 
```

* * *

旁注：您不需要或不想要`javascript:`以下内容：

```
<button onClick="javascript:test()">Bla</button>
<!--             ^^^^^^^^^^^---- lose this   --> 
```

它的影响为零。您只`javascript:`在需要 URL 的地方使用伪协议，例如`href`在`a`元素上。旧式`onXyz`DOM0 处理程序始终使用整个页面的默认脚本，即 JavaScript（除非您使用一些古老的 Microsoft 专有元标记）。使用`javascript:`there 实际上没有*错误*的原因是它最终成为[label](http://www.ecma-international.org/ecma-262/5.1/#sec-12.12)。

# c# - ASP MVC 4 - 在 UserProfile 表中添加外键时出错

> ID：14092410
> 
> 赞同：1
> 
> 时间：2012-12-30T16:34:27.927
> 
> 标签：c#, asp.net-mvc, ef-code-first, security

在 ASP MVC 中，我`UserProfile`首先使用这样的代码更新表

```
[Table("UserProfile")]
public class UserProfile
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set;}

    public string UserName { get; set; }

    public string FirstName { get; set; }

    public string LastName { get; set; }

    public string Email { get; set; }

    [Required]
    public int State { get; set; }
} 
```

PS State 是另一个表的外键。

我尝试使用以下语句插入用户

```
WebSecurity.CreateUserAndAccount(model.UserName, model.Password, new { Email = model.Email, State = state }); 
```

我收到错误

> “不存在从对象类型状态到已知托管提供程序本机类型的映射”。

我无法弄清楚为什么映射不存在。

# php - 在 PHP 的 foreach 中使用多个数组

> ID：14092421
> 
> 赞同：3
> 
> 时间：2012-12-30T16:35:32.563
> 
> 标签：php, foreach, preg-match-all

几个小时以来，我一直在尝试将 foreach 与 2 个数组一起使用。这是我的代码：

```
function displayTXTList($fileName) {

    if (file_exists($fileName)) {
        $contents = file($fileName);
        $string   = implode($contents);
        preg_match_all('#\[\[(\w+)\]\]#u', $string, $name);
        preg_match_all('/style=(\'|\")([ -0-9a-zA-Z:]*[ 0-9a-zA-Z;]*)*(\'|\")/', $string, $name2);
        $i = 0;
        foreach ($name[1] as $index => $value) {
            echo '<br/>' . $value, $name2[$index];
        }
    }
}

displayTXTList('smiley2.txt'); 
```

这是我得到的：

```
sadArray
cryingArray
sunArray
cloudArray
raining
coffee
cute_happy
snowman
sparkle
heart
lightning
sorry
so_sorry
etc... 
```

但我想要这个：

```
sadstyle='background-position: -0px -0px;'
cryingstyle='background-position: -16px -0px;'
sunstyle='background-position: -32px -0px;'
etc... 
```

实际的txt文件是这样的：

```
[[sad]]<span class='smiley' style='background-position: -0px -0px;'></span>
[[crying]]<span class='smiley' style='background-position: -16px -0px;'></span>
[[sun]]<span class='smiley' style='background-position: -32px -0px;'></span>
[[cloud]]<span class='smiley' style='background-position: -48px -0px;'></span>
[[raining]]<span class='smiley' style='background-position: -64px -0px;'></span>
etc... 
```

我怎么能做到这一点？我是新来的，所以请不要记下：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T16:41:06.903

您正在将数组输出为字符串（因此`Array`在输出中，如果您将数组转换为字符串（例如使用`echo`），PHP 会将其转换为`"Array"`）。而是访问数组内的匹配项（我假设组 0 为`$name2`，请检查）：

```
echo '<br/>' .$value , $name2[0][$index];
                             ^^^--- was missing 
```

* * *

```
function displayTXTList($fileName) {

    if (!file_exists($fileName)) {
        return;
    }

    $string = file_get_contents($fileName);

    $names  = preg_match_all('#\[\[(\w+)\]\]#u', $string, $matches) ? $matches[1] : array();
    $styles = preg_match_all(
        '/style=(\'|\")([ -0-9a-zA-Z:]*[ 0-9a-zA-Z;]*)*(\'|\")/', $string, $matches
    ) ? $matches[0] : array();

    foreach ($names as $index => $name) {
        $style = $styles[$index];
        echo '<br/>', $name, $style;
    }
}

displayTXTList('smiley2.txt'); 
```

# visual-studio-2010 - OpenGL 3.2 颜色 GL_TRIANGLES

> ID：14092423
> 
> 赞同：1
> 
> 时间：2012-12-30T16:35:51.987
> 
> 标签：visual-studio-2010, opengl

我目前正在尝试制作一个非常简单的蛇游戏，但在创建蛇广场时遇到了一些问题。现在我正在通过创建 2 个三角形来创建正方形。我已经创建了蛇应该像这样移动的网格： ![在此处输入图像描述](../Images/0e958303c57aecb3f1fdd568bd28d294.png)

方块的颜色一开始实际上是黄色的。然后我尝试用红色创建蛇。但是我所有的方块都变红了。

我像这样创建蛇：

```
void drawSnake()
{
    mat4 modelView;

    modelView = Translate(1,0,0);
    glUniformMatrix4fv(modelViewUniform, 1, GL_TRUE, modelView);
    GLuint indices2[3] = {0,1,2}; //, 0, 5, 1, 0};

    glDrawElements(GL_TRIANGLES, 3, GL_UNSIGNED_INT, indices2);

    modelView = Translate(1, 0, 0);
    glUniformMatrix4fv(modelViewUniform, 1, GL_TRUE, modelView);
    GLuint indices6[3] = {4,3,2}; //, 0, 5, 1, 0};
    glDrawElements(GL_TRIANGLES, 3, GL_UNSIGNED_INT, indices6);
    //vec2 blockCoordinate = vec2(-t + 1, t - 1);
    //blockCol[i] = blockCoordinate;
} 
```

这里定义的颜色：

```
void loadGeometry() {
    vec3 color(1.0f, 1.0f, 0.0f);
    Vertex rectangleData[rectangleSize] = {
        { vec2( -1.0, -1.0 ), color },
        { vec2( 1.0, -1.0 ), color },
        { vec2( 1.0,  1.0 ), color },
        { vec2( -1.0,  1.0 ), color },
        { vec2(-1.0, -1.0 ), color }
    };
    shapeVertexArrayBuffer = loadBufferData(rectangleData, rectangleSize);

    vec3 color1(1.0f, 0.0f, 0.0f);
    Vertex rectangleData1[rectangleSize] = {
        { vec2( -1.0, -1.0 ), color1 },
        { vec2( 1.0, -1.0 ), color1 },
        { vec2( 1.0,  1.0 ), color1 },
        { vec2( -1.0,  1.0 ), color1 },
        { vec2(-1.0, -1.0 ), color1 }
    };
    shapeSnakeArrayBuffer = loadBufferData(rectangleData1, rectangleSize);
} 
```

所以问题是为什么当我显然用另一种颜色加载缓冲区数据时我所有的方块都变成了红色？

我在 display() 中像这样绘制它们：

```
void display() {    
    glClearColor(0.0, 0.0, 0.0, 1.0);
    glClear(GL_COLOR_BUFFER_BIT);

    glUseProgram(shaderProgram);

    mat4 projection = Ortho2D(-15.0f, 15.0f, -15.0f, 15.0f);
    glUniformMatrix4fv(projectionUniform, 1, GL_TRUE, projection);

    glBindVertexArray(shapeVertexArrayBuffer);
    glBindVertexArray(shapeSnakeArrayBuffer);

    drawBlock();
    drawSnake();
    glutSwapBuffers();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T17:30:20.860

```
glBindVertexArray(shapeVertexArrayBuffer);
glBindVertexArray(shapeSnakeArrayBuffer);

drawBlock();
drawSnake(); 
```

您在这里似乎有一些订购问题。大概`shapeVertexArrayBuffer`（注意：没有“顶点数组缓冲区”之类的东西。那些应该是[顶点数组对象](http://www.opengl.org/wiki/Vertex_Specification#Vertex_Array_Object)；如果`loadBufferData`不返回 VAO，那么你有更多问题）用于绘图块，并且`shapeSnakeArrayBuffer`意味着用于绘制蛇。

您一次只能激活一个 VAO。`glBindVertexArray`将给定的顶点数组对象设置为用于它之后的所有渲染命令的对象。由于您使用的最后一个是`shapeSnakeArrayBuffer`，这将是用于所有渲染命令的 VAO`drawBlock`以及 for `drawSnake`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T17:30:22.607

你不应该这样做：

```
glBindVertexArray(shapeVertexArrayBuffer);
drawBlock();

glBindVertexArray(shapeSnakeArrayBuffer);
drawSnake(); 
```

# ruby-on-rails - 使用 Json 更新 Rails 模型

> ID：14092425
> 
> 赞同：0
> 
> 时间：2012-12-30T16:36:03.233
> 
> 标签：ruby-on-rails, ajax, json, jquery

目前，我正在实现一个包含 items(slot_allocations) 的表。这些项目基于 Rails 模型。表格中的项目可以拖放。

现在，我可以在我的表中检索和显示模型的数据。但是，我还想在成功将项目拖放到新单元格中后更新模型中的信息，并想就如何执行此操作寻求建议。

我目前能够根据以下 Jquery 代码将信息放入数组中。

```
 var slot_allocation= []; //array storing info
 $.getJSON('slot_allocations', function(data) { //get json method, put the items in the slot_allocation array.
    $.each(data, function(i, item) {
    slot_allocation.push(item);
 });

 //some extra methods for table creation etc.
 createSubjectsTable($("#subjects"),timeslots,subjects);
 makeDraggable();
 }); 
```

对于我可以查看哪些 JQuery 方法或我可以更改代码的哪些区域以更新模型，我将不胜感激。提前致谢。

根据要求附加代码。整个代码虽然很长。这是删除它后应该更新模型的部分。我更新数组的尝试是注释后的代码。

```
$('.Empty').droppable({
  accept: '.Group',
  tolerance: 'pointer',
  drop: function(event,ui){
    ui.droppable = $(this);
    var new_alloc_info = ui.droppable.attr("id")
    var array = new_alloc_info.split('--');
    var timeslot = array[1];
    var subject = array[2];

    var old_alloc_id = ui.draggable.attr("id");
    var array2 = old_alloc_id.split('--');
    var alloc_id = array2[3];

//This is the part where I want to update the rails model
    slot_allocation[alloc_id-1].timeslot=timeslot; 
    slot_allocation[alloc_id-1].subject=subject;        

    var allocText = "alloc--"+timeslot+"--"+subject+"--"+alloc_id;
    ui.draggable.attr("id",allocText);
    ui.draggable.insertBefore(ui.droppable);

  }
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T17:38:52.723

好的。在`drop`回调中，您可以向服务器发出 AJAX 请求。没有试图弄清楚你所有的数组是什么，将从简单的情况开始

```
/* receive id and time params at server as you would form field "name" */ 
var dataToServer={ id: alloc_id, time: timeslot};

/* can use $.get or */
$.post( url, dataToServer, function( response){
    /* AJAX completed successfully, can access response data here*/
}/* dataType argument here if want to use JSON or XML response*/) 
```

两者`$.post`和`$.get`都是快捷方法，`$.ajax`根据需要有许多可用的选项

jQuery AJAX API：[http ://api.jquery.com/category/ajax/](http://api.jquery.com/category/ajax/)

# objective-c - Objective-c NSPredicate - 按不同 NSManagedObjectContext 中的 ObjectId 过滤

> ID：14092426
> 
> 赞同：1
> 
> 时间：2012-12-30T16:36:06.507
> 
> 标签：objective-c, filter, nspredicate, nsmanagedobjectcontext, nsfetchedresultscontroller

我正在使用下面的代码`NSFetchedResultController`

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"self.objRelationship.ObjectId == %@", objectFromOtherContext.ObjectId];
[fetchRequest setPredicate:predicate]; 
```

`NSManagedObjectContext`被使用的对象*不同于*`NSFetchedResultController`objectFromOtherContext`NSManagedObjectContext`变量。不返回任何数据。但是，如果他们使用相同的.*`NSFetchedResultController``NSManagedObjectContext`*

 *`ObjectId`如果 的`NSManagedObjectContext`与传递给谓词的`NSFetchedResultController`不同，有没有办法过滤？（假设对象已经保存在持久存储中）。`NSManagedObjectContext``NSManagedObject`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-08T12:36:40.993

我今天遇到了这个问题。您不能在不同上下文中创建的谓词中使用对象，甚至不能使用它的 objectID。您需要先在要搜索的同一上下文中查询对象。或者，您可以尝试执行 [newContext objectWithID:objectFromOtherContext.ObjectId] 然后在谓词中使用它。*

# google-maps - Phonegap APP中的谷歌地图-仅在删除jquery.min.js后显示

> ID：14092432
> 
> 赞同：0
> 
> 时间：2012-12-30T16:37:41.510
> 
> 标签：google-maps, cordova

抱歉我的英语不好，但我来自奥地利；）

我有一个有趣的问题，不知道为什么会这样：

我想在我的网络应用程序的子站点上显示谷歌地图。（它应该成为具有 phonegap 构建的本机应用程序。）

如果 `<script src="js/jquery.min.js"></script>` 我的 HTML5 Web-App 代码中有，我的 Google-Map 不会显示...

如果我删除这部分源代码，它会显示谷歌地图，但我完整的应用程序设计是“过度”。

我不知道我可以尝试什么？我只能发现这部分来源有所不同。

感谢帮助！

最好的问候格哈德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T18:17:05.537

如果没有看到代码的结构，就无法提供太多帮助。这是一个使用 phonegap 和谷歌地图的现有项目的链接。[phonegap 谷歌地图](http://www.christianengvall.se/phonegap-and-google-maps/)

# javascript - 根据时间和星期几包含 SSI 的 Javascript 函数

> ID：14092433
> 
> 赞同：-1
> 
> 时间：2012-12-30T16:37:51.870
> 
> 标签：javascript, ssi

我正在寻找一段获取时间和星期几的代码，然后根据返回的内容包含 SSI html。

我尝试过调整 Java 和 PHP，但似乎没有任何效果。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T16:43:11.400

您可以使用 PHP 函数 include() 而不是使用 SSI。

例如

```
if (date("d") == 1) {
   include("firstday.html");
} else {
   include("default.html");
} 
```

此代码包含每个月的第一天的文件 firstday.html，并包含其他日子的 default.html。

对于其他情况，您可以阅读 PHP 函数 date() 的描述

# javascript - 有没有办法从 dojo 的 NumberSpinner 中删除逗号？

> ID：14092446
> 
> 赞同：3
> 
> 时间：2012-12-30T16:39:39.103
> 
> 标签：javascript, dojo, dijit.form

> **可能重复：**
> [Dojo：如何从值中删除逗号](https://stackoverflow.com/questions/7996427/dojo-how-to-remove-comma-from-value)

出于某种原因，我的 NumberSpinner 总是将 999 以上的数字显示为逗号分隔 (1,001)。有没有办法让微调器向用户显示非逗号分隔值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T16:42:41.193

您可以使用该`replace()`方法删除逗号并将它们替换为空字符串。

```
var number = "1,001";
console.log(number.replace(/\,/g, "")); 
```

我发现的另一种方法（[此处](https://stackoverflow.com/questions/7996427/dojo-how-to-remove-comma-from-value)）是将以下内容添加到您的约束对象

```
pattern:'#' 
```

# python - OSX 10.8.2 上的 MySQLdb 导入失败

> ID：14092447
> 
> 赞同：0
> 
> 时间：2012-12-30T16:39:41.363
> 
> 标签：python, django

我已经通过 pip 安装了 MySQL-python ，但我仍然无法导入 MySQLdb ，任何想法可能是什么问题？

```
pip install MySQL-python
Requirement already satisfied (use --upgrade to upgrade): MySQL-python in /usr/local    /lib/python2.7/site-packages
Cleaning up...

>>> import MySQLdb
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
ImportError: No module named MySQLdb 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T05:37:31.530

这是转向使用 virtualenv (virtualenvwrapper) 的绝佳机会。一旦你去那里，你将永远不会回去，更好的是，你将来不会看到这些菜鸟错误！

请退后一步，花点时间熟悉 pip。这里有一些很棒的资源。

*   [http://jontourage.com/2011/02/09/virtualenv-pip-basics/](http://jontourage.com/2011/02/09/virtualenv-pip-basics/)
*   [http://www.saltycrane.com/blog/2009/05/notes-using-pip-and-virtualenv-django/](http://www.saltycrane.com/blog/2009/05/notes-using-pip-and-virtualenv-django/)

# database - 基于属性权重从数据库中提取行的最快方法

> ID：14092449
> 
> 赞同：0
> 
> 时间：2012-12-30T16:40:00.100
> 
> 标签：database, algorithm

我有一个大约 80 列的表，这些列都是二进制值。在我的应用程序中，我能够计算每个属性的权重。我希望能够提取二进制值的总和 * 它的权重最高的前 n 行。

例如

SELECT id, CAST(attribute_1 AS int) * weight_1 + CAST(attribute_2 AS int) * weight_2 AS score WHERE some_filtering_conditions ORDER BY score DESC LIMIT n

虽然这可行，但它并没有我想要的那么快。

目前所有内容都存储在 Postgres 中，但我愿意接受其他数据库建议。现在这个表中大约有 8000 行，它不太可能增长太多，所以把它全部放到内存中并不是没有道理的，但如果可能的话，我宁愿避免这种情况。

# binary-tree - 二叉树：在其中找到最佳结果

> ID：14092455
> 
> 赞同：0
> 
> 时间：2012-12-30T16:40:35.840
> 
> 标签：binary-tree

我有一个二叉树，其中节点（和根）保存 int vals，它的叶子包含代表价格的 vals。节点的 int vals 表示在计算中可以取其子树中的叶子数。我必须说出我能从这棵树上得到的最大价格总和是多少。

起初我想获取链表中的所有叶子，然后开始按其父值过滤它们，但这似乎不是最好的解决方案。

有任何想法吗？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T16:58:12.063

```
int numberOfLeaves( Node n ){
    int intVal = 0;
    if( n.Left != null ){ intVal += numberOfLeaves(n.Left); }
    if( n.Right != null ){ intVal += numberOfLeaves(n.Right); }
    if( n.Left == null && n.Right == null ){ return 1; }
    return intVal;
} 
```

对于最大的总和，如果我正确理解“最大总和”，只需将所有叶子推入一个列表并总结所有正价格。

# php - 使用 Symfony2 在共享主机上安装/更新 Composer 时出现运行时异常

> ID：14092461
> 
> 赞同：7
> 
> 时间：2012-12-30T16:42:33.530
> 
> 标签：php, symfony, shared-hosting, composer-php

我似乎在共享主机的缓存权限方面遇到了一些问题。具体来说，当我尝试通过 Composer 安装/更新供应商时，我得到一个运行时异常：

```
$ php composer.phar update -v -o

Script Sensio\Bundle\DistributionBundle\Composer\ScriptHandler::clearCache handling the post-update-cmd event terminated with an exception

[RuntimeException]
An error occurred when executing the "'cache:clear --no-warmup'" command.

Exception trace:
() at /home/thesewingdiva/private/vendor/sensio/distribution-bundle/Sensio/Bundle/DistributionBundle/Composer/ScriptHandler.php:137
Sensio\Bundle\DistributionBundle\Composer\ScriptHandler::executeCommand() at /home/thesewingdiva/private/vendor/sensio/distribution-bundle/Sensio/Bundle/DistributionBundle/Composer/ScriptHandler.php:48
Sensio\Bundle\DistributionBundle\Composer\ScriptHandler::clearCache() at phar:///home/thesewingdiva/private/composer.phar/src/Composer/Script/EventDispatcher.php:122
Composer\Script\EventDispatcher->executeEventPhpScript() at phar:///home/thesewingdiva/private/composer.phar/src/Composer/Script/EventDispatcher.php:101
Composer\Script\EventDispatcher->doDispatch() at phar:///home/thesewingdiva/private/composer.phar/src/Composer/Script/EventDispatcher.php:74
Composer\Script\EventDispatcher->dispatchCommandEvent() at phar:///home/thesewingdiva/private/composer.phar/src/Composer/Installer.php:237
Composer\Installer->run() at phar:///home/thesewingdiva/private/composer.phar/src/Composer/Command/UpdateCommand.php:82
Composer\Command\UpdateCommand->execute() at phar:///home/thesewingdiva/private/composer.phar/vendor/symfony/console/Symfony/Component/Console/Command/Command.php:238
Symfony\Component\Console\Command\Command->run() at phar:///home/thesewingdiva/private/composer.phar/vendor/symfony/console/Symfony/Component/Console/Application.php:193
Symfony\Component\Console\Application->doRun() at phar:///home/thesewingdiva/private/composer.phar/src/Composer/Console/Application.php:101
Composer\Console\Application->doRun() at phar:///home/thesewingdiva/private/composer.phar/vendor/symfony/console/Symfony/Component/Console/Application.php:106
Symfony\Component\Console\Application->run() at phar:///home/thesewingdiva/private/composer.phar/src/Composer/Console/Application.php:74
Composer\Console\Application->run() at phar:///home/thesewingdiva/private/composer.phar/bin/composer:37
require() at /home/thesewingdiva/private/composer.phar:15

update [--prefer-source] [--prefer-dist] [--dry-run] [--dev] [--no-custom-installers] [--no-scripts] [--no-progress] [-v|--verbose] [-o|--optimize-autoloader] [packages1] ... [packagesN] 
```

我没有使用 ACL 的能力，也没有使用 sudo 的能力，因为它是共享主机。缓存因其权限（递归）而设置为 777，并且 app/console、app.php 和 app_dev.php 都具有 umask(0000)。我还删除了缓存，看看是否有帮助。没有骰子。有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T21:17:46.543

在[此问题](https://stackoverflow.com/questions/13338803/symfony2-composer-install/13340407#13340407)下的评论中，指出该问题与缺少时区设置有关。

> ***如果你执行“php app/console cache:clear --verbose”会发生什么***

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-20T23:35:09.393

我有一段时间遇到同样的问题，经过数小时的砖墙撞击后，我意识到......我的项目中有一个 .gitmodule，并且在初始结帐时，这些子模块没有初始化，因此您的作曲家不存在更新，导致上述错误。

确保运行以下

```
git submodule update --init src/Acme/Sadness/Bundle 
```

当然，用您的项目命名空间替换**src/Acme/Sadness/Bundle 。**

希望这可以帮助别人不会经历我刚刚经历的同样痛苦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-14T16:16:23.183

要找出异常的确切原因，请参阅 php 错误日志。但是，正如 Jared Farrish 所提到的，这可能是由于未在 php ini 设置中设置时区。

```
#/etc/php5/cli/php.ini
date.timezone = 'Asia/Kolkata'
log_errors = On
error_log = /var/log/php/error.log 
```

# android - 空指针异常错误：android中的数据库

> ID：14092463
> 
> 赞同：0
> 
> 时间：2012-12-30T16:42:42.317
> 
> 标签：android, database, sqlite

我无法从我的数据库中显示一个事件信息。在 DayPlan.java 中的事件列表中单击我的事件后，它应该向我显示有关此事件的一些信息，但它只会使整个应用程序崩溃并出现错误：Nullpointer exception :( 我使用了 thiscodeasa base: [Database example](http://vimaltuts.com/android-tutorial-for-beginners/android-sqlite-database-example)

错误出现在 ViewEvent 的 OnPostExecute 中，有人可以帮我吗？

我的数据库连接器：

```
 package com.examples.android.calendar;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;

public class DatabaseConnector {

    private static final String DB_NAME = "watchaday";
    private SQLiteDatabase database;
    private DatabaseOpenHelper dbOpenHelper;

    public DatabaseConnector(Context context) {
        dbOpenHelper = new DatabaseOpenHelper(context, DB_NAME, null, 1);
    }

       public void open() throws SQLException 
       {
          //open database in reading/writing mode
          database = dbOpenHelper.getWritableDatabase();
       } 

       public void close() 
       {
          if (database != null)
             database.close();
       }       

       public void insertContact(String date, String hour_from, String hour_to, String event, String colour) 
               {
                  ContentValues newCon = new ContentValues();
                  newCon.put("date", date);
                  newCon.put("hour_from", hour_from);
                  newCon.put("hour_to", hour_to);
                  newCon.put("event", event);
                  newCon.put("colour", colour);

                  open();
                  database.insert("calendar_events", null, newCon);
                  close();
               }

               public void updateContact(long id, String date, String hour_from, String hour_to, String event, String colour) 
               {
                  ContentValues editCon = new ContentValues();
;
                  editCon.put("date", date);
                  editCon.put("hour_from", hour_from);
                  editCon.put("hour_to", hour_to);
                  editCon.put("event", event);
                  editCon.put("colour", colour);

                  open();
                  database.update("calendar_events", editCon, "_id=" + id, null);
                  close();
               }

               public Cursor getAllContacts() 
               {
                  return database.query("calendar_events", new String[] {"_id", "event"}, 
                     null, null, null, null, "date");
               }

               public Cursor getOneContact(long id) 
               {
                  return database.query("calendar_events", null, "_id=" + id, null, null, null, null);
               }

               public void deleteContact(long id) 
               {
                  open(); 
                  database.delete("calendar_events", "_id=" + id, null);
                  close();
               }
} 
```

我的数据库助手：

```
 package com.examples.android.calendar;

import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteOpenHelper;

public class DatabaseOpenHelper extends SQLiteOpenHelper {

    public DatabaseOpenHelper(Context context, String name,
            CursorFactory factory, int version) {
        super(context, name, factory, version);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        String createQuery = "CREATE TABLE calendar_events (_id integer primary key autoincrement,date, hour_from, hour_to, event, colour);";                 
        db.execSQL(createQuery);        
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    }

} 
```

我的事件列表代码：

```
 package com.examples.android.calendar;

import android.os.AsyncTask;
import android.os.Bundle;
import android.app.ListActivity;
import android.content.Intent;
import android.database.Cursor;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.widget.AdapterView;
import android.widget.CursorAdapter;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;
import android.widget.AdapterView.OnItemClickListener;

public class DayPlan extends ListActivity {

     public static final String ROW_ID = "row_id";
     private ListView conListView;
     private CursorAdapter conAdapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        conListView=getListView();
        conListView.setOnItemClickListener(viewConListener);

        // map each name to a TextView
        String[] from = new String[] { "event" };
        int[] to = new int[] { R.id.countryTextView };
        conAdapter = new SimpleCursorAdapter(DayPlan.this, R.layout.day_plan, null, from, to);
        setListAdapter(conAdapter); // set adapter
    }

    @Override
    protected void onResume() 
    {
       super.onResume();  
       new GetContacts().execute((Object[]) null);
     } 

    @Override
    protected void onStop() 
    {
       Cursor cursor = conAdapter.getCursor();

       if (cursor != null) 
          cursor.deactivate();

       conAdapter.changeCursor(null);
       super.onStop();
    }    

    private class GetContacts extends AsyncTask<Object, Object, Cursor> 
    {
       DatabaseConnector dbConnector = new DatabaseConnector(DayPlan.this);

       @Override
       protected Cursor doInBackground(Object... params)
       {
          dbConnector.open();
          return dbConnector.getAllContacts(); 
       } 

       @Override
       protected void onPostExecute(Cursor result)
       {
          conAdapter.changeCursor(result); // set the adapter's Cursor
          dbConnector.close();
       } 
    } 

    @Override
    public boolean onCreateOptionsMenu(Menu menu) 
    {
       super.onCreateOptionsMenu(menu);
       MenuInflater inflater = getMenuInflater();
       inflater.inflate(R.menu.dayplan_menu, menu);
       return true;
    }   

    @Override
    public boolean onOptionsItemSelected(MenuItem item) 
    {
       Intent addContact = new Intent(DayPlan.this, AddEvent.class);
       startActivity(addContact);
       return super.onOptionsItemSelected(item);
    }

    OnItemClickListener viewConListener = new OnItemClickListener() 
    {
       public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,long arg3) 
       {         
          Intent viewCon = new Intent(DayPlan.this, ViewEvent.class);
          viewCon.putExtra(ROW_ID, arg3);
          startActivity(viewCon);
       }
    };    

} 
```

我的查看事件代码在 OnPostExecute 部分中使应用程序崩溃：

视图事件.java：

```
public class ViewEvent extends Activity {

   private long rowID;
   private TextView dateTv;
   private TextView hourfromTv;
   private TextView hourtoTv; 
   private TextView eventTv;
   private TextView colourTv; 

   @Override
   public void onCreate(Bundle savedInstanceState) 
   {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.view_event);

      setUpViews();
      Bundle extras = getIntent().getExtras();
      rowID = extras.getLong(DayPlan.ROW_ID); 
   }

   private void setUpViews() {
       dateTv = (TextView) findViewById(R.id.date);
       hourfromTv = (TextView) findViewById(R.id.hour_fromText);
       hourtoTv = (TextView) findViewById(R.id.hour_toText);
       eventTv = (TextView) findViewById(R.id.eventText);
       colourTv = (TextView) findViewById(R.id.colourText);

   }

   @Override
   protected void onResume()
   {
      super.onResume();
      new LoadContacts().execute(rowID);
   } 

   private class LoadContacts extends AsyncTask<Long, Object, Cursor> 
   {
      DatabaseConnector dbConnector = new DatabaseConnector(ViewEvent.this);

      @Override
      protected Cursor doInBackground(Long... params)
      {
         dbConnector.open();
         return dbConnector.getOneContact(params[0]);
      } 

      @Override
      protected void onPostExecute(Cursor result)
      {

         super.onPostExecute(result);

         result.moveToFirst();
         // get the column index for each data item
       int dateindex = result.getColumnIndex("date");
         int hourfromIndex = result.getColumnIndex("hour_from");
         int hourtoIndex = result.getColumnIndex("hour_to");
         int eventIndex = result.getColumnIndex("event");
         int colourIndex = result.getColumnIndex("colour");

         dateTv.setText(result.getString(dateindex));
         hourfromTv.setText(result.getString(hourfromIndex));
         hourtoTv.setText(result.getString(hourtoIndex));
         eventTv.setText(result.getString(eventIndex));
         colourTv.setText(result.getString(colourIndex));

         result.close();
         dbConnector.close();
      }
   } 

   @Override
   public boolean onCreateOptionsMenu(Menu menu) 
   {
      super.onCreateOptionsMenu(menu);
      MenuInflater inflater = getMenuInflater();
      inflater.inflate(R.menu.view_event_menu, menu);
      return true;
   }

   @Override
   public boolean onOptionsItemSelected(MenuItem item) 
   {
      switch (item.getItemId())
      {
         case R.id.editItem:
            Intent addEditContact =
               new Intent(this, AddEvent.class);

            addEditContact.putExtra(DayPlan.ROW_ID, rowID);

            startActivity(addEditContact); 
            return true;

         case R.id.deleteItem:
            deleteContact();
            return true;

         default:
            return super.onOptionsItemSelected(item);
      } 
   }

   private void deleteContact()
   {

      AlertDialog.Builder alert = new AlertDialog.Builder(ViewEvent.this);

      alert.setTitle(R.string.confirmTitle); 
      alert.setMessage(R.string.confirmMessage); 

      alert.setPositiveButton(R.string.delete_btn,
         new DialogInterface.OnClickListener()
         {
            public void onClick(DialogInterface dialog, int button)
            {
               final DatabaseConnector dbConnector = 
                  new DatabaseConnector(ViewEvent.this);

               AsyncTask<Long, Object, Object> deleteTask =
                  new AsyncTask<Long, Object, Object>()
                  {
                     @Override
                     protected Object doInBackground(Long... params)
                     {
                        dbConnector.deleteContact(params[0]); 
                        return null;
                     } 

                     @Override
                     protected void onPostExecute(Object result)
                     {
                        finish(); 
                     }
                  };

               deleteTask.execute(new Long[] { rowID });               
            }
         }
      );

      alert.setNegativeButton(R.string.cancel_btn, null).show();
   }
} 
```

错误 ：

12-30 17:52:29.334：E/AndroidRuntime(1173)：致命异常：主要

12-30 17:52:29.334: E/AndroidRuntime(1173): java.lang.NullPointerException

12-30 17:52:29.334: E/AndroidRuntime(1173): 在 com.examples.android.calendar.ViewEvent$LoadContacts.onPostExecute(ViewEvent.java:76)

12-30 17:52:29.334: E/AndroidRuntime(1173): 在 com.examples.android.calendar.ViewEvent$LoadContacts.onPostExecute(ViewEvent.java:1)

12-30 17:52:29.334: E/AndroidRuntime(1173): 在 android.os.AsyncTask.finish(AsyncTask.java:631)

12-30 17:52:29.334: E/AndroidRuntime(1173): 在 android.os.AsyncTask.access$600(AsyncTask.java:177)

12-30 17:52:29.334: E/AndroidRuntime(1173): 在 android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)

12-30 17:52:29.334: E/AndroidRuntime(1173): 在 android.os.Handler.dispatchMessage(Handler.java:99)

12-30 17:52:29.334: E/AndroidRuntime(1173): 在 android.os.Looper.loop(Looper.java:137)

12-30 17:52:29.334: E/AndroidRuntime(1173): 在 android.app.ActivityThread.main(ActivityThread.java:4745)

12-30 17:52:29.334: E/AndroidRuntime(1173): 在 java.lang.reflect.Method.invokeNative(Native Method)

12-30 17:52:29.334: E/AndroidRuntime(1173): 在 java.lang.reflect.Method.invoke(Method.java:511)

12-30 17:52:29.334: E/AndroidRuntime(1173): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)

12-30 17:52:29.334: E/AndroidRuntime(1173): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)

12-30 17:52:29.334: E/AndroidRuntime(1173): at dalvik.system.NativeStart.main(Native Method) 12-30 17:52:31.463: I/Process(1173): 发送信号。PID：1173 SIG：9 12-30 17:52:32.305：E/Trace(1191)：打开跟踪文件时出错：没有这样的文件或目录 (2)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T17:54:33.770

这里的错误是由于错误的资源 Id.Still 阅读下面

如果查询中至少返回一条记录，result.moveToFirst() 将返回 true。
正确的使用方法：

```
if(result.moveToFirst()){

       int dateindex = result.getColumnIndex("date");
         int hourfromIndex = result.getColumnIndex("hour_from");
         int hourtoIndex = result.getColumnIndex("hour_to");
         int eventIndex = result.getColumnIndex("event");
         int colourIndex = result.getColumnIndex("colour");

         dateTv.setText(result.getString(dateindex));
         hourfromTv.setText(result.getString(hourfromIndex));
         hourtoTv.setText(result.getString(hourtoIndex));
         eventTv.setText(result.getString(eventIndex));
         colourTv.setText(result.getString(colourIndex));

} 
```

# android - (Android) ButtonClick 等待后更改 ImageButton 的 Image

> ID：14092464
> 
> 赞同：1
> 
> 时间：2012-12-30T16:42:42.690
> 
> 标签：android, button

我想按下一个按钮，它会改变按钮的颜色并播放声音，然后等待时间（t）然后再次改变按钮的颜色。

```
 button1.setOnClickListener(new View.OnClickListener(){
    @Override
    public void OnClick(View v) {
    button1.setImageResource(R.drawable.yellow_block); /* Changes Color */
    sp.play(sound,1,1,0,0,1); /*Plays sound*/
    //Wait t amount of time here
    button1.setImageResource(R.drawable.green_block); /* Changes Color Again */ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T16:48:54.210

你可以使用`postDelayed()`这样的方法

```
button1.setOnClickListener(new View.OnClickListener(){
    @Override
    public void OnClick(View v) {
        button1.setImageResource(R.drawable.yellow_block); /* Changes Color */
        sp.play(sound,1,1,0,0,1); /*Plays sound*/
        //Wait t amount of time here
        button1.postDelayed(new Runnable() {
            public void run() {
                //Do what you want
                button1.setImageResource(R.drawable.green_block); /* Changes Color Again */
            }
        },3*1000 /* This would be the milisecond you want to wait */);
    }
} 
```

如果您也想停止音乐，您可能需要稍微更改我的代码。

# asp.net - 沙盒重定向会破坏会话

> ID：14092465
> 
> 赞同：0
> 
> 时间：2012-12-30T16:42:49.947
> 
> 标签：asp.net, paypal, sandbox

为什么当我将用户从我的本地主机重定向到 PAYPAL 的沙箱（https://www.sandbox.paypal.com）然后返回到 .aspx 页面（successful.aspx）后，它会丢失会话，

例如 SESSION["tempUser"]，它适用于每个页面，但不适用于 Success.aspx 页面，它返回 null，我正在处理这个错误 2 周，但没有进展，我尝试了不同的浏览器，甚至不同的系统，更改了代码有点，但没有任何帮助，已经 1 个月以上，在几个表格上发表了几篇文章后，没有任何帮助，甚至 cookie 也有同样的问题，返回时为空，我之前的帖子。

重定向页面代码：

```
<body>
    <form id="form1" runat="server">
<div>
 <h4> Congrats <b> <%# Session["tempSubAdminName"]%>  </b>, Your basic informaton has been submitted , For full activation you need to pay via paypal. Please click the PayPal icon given below. </h4>
</div>
<div>
 <asp:HyperLink ID="homeBtnImage" runat="server" ImageUrl="~/btnPayPal.gif"
      NavigateUrl= "https://www.sandbox.paypal.com/us/cgi-bin/webscr?cmd=_xclick&business=smile2_1355775057_biz@yahoo.com&item_name=MemberShip&amount=20&currency=USD&return=http://127.0.0.1:57135/Online%20Recruitment%20System-Final/paymentSuccessful.aspx?emailAdmin='1234' &cancel_return=https://www.google.com/" >PayPal</asp:HyperLink>
</div>
<h6>Or if you don't have paypal account, click <asp:HyperLink ID="paypalSite" runat="server"
    NavigateUrl="https://www.sandbox.paypal.com/" >here</asp:HyperLink> </h6>
</form> 
```

如果成功返回这个年龄

```
</head>
 <body>
   <form id="form1" runat="server">
   <div>
     <h5> Dear <%# Session["tempSubAdmin"] %>, You have successfully registered ,   Please wait for the approval by admin. </h5>
</div>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T19:51:44.647

我正在解释我实施的方式。它可能因人而异。

1.  [首先，您必须在开发人员 paypal api](https://developer.paypal.com/)上创建一个帐户。帐户。
2.  然后创建两个测试帐户，一个用于客户，另一个用于业务（商家）。

3.  **在web.config**文件中声明这些值。

    ```
     <appSettings>    
        <!--these keys are for Paypal-->
        <add key="paypalURL" value="https://www.sandbox.paypal.com" />
        <add key="paypalAccount" value="arshad_Mer_biz@gmail.com" />
        <add key="websiteUrl" value="http://www.yourstie.com" />
      </appSettings> 
    ```

4.  现在您必须相应地设置 paypal html 变量，有关详细信息[Paypal 变量](https://cms.paypal.com/es/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_Appx_websitestandard_htmlvariables)

5.  **在button_click**事件中编写以下代码

    ```
    string redirectUrl = ConfigurationManager.AppSettings["paypalURL"]+"/cgi-bin/webscr?cmd=_xclick";
    string sellersEmail = "&business=";
    string buyersEmail = "&email=";
    string productName = "&item_name=";
    string amount = "&amount=";
    string shippingOption = "&no_shipping=";
    string noteOpton = "&no_note=";
    string returnUrl = "&return=";
    string cancelUrl = "&cancel_return=";
    string rmOption = "&rm=";
    string notifyUrl = "&notify_url=";
    string custom = "&custom=";

    // Merchant account
    sellersEmail += ConfigurationManager.AppSettings["paypalAccount"];

    //calling a method that will return current user email id.
    buyersEmail += GeneralClass.GetUserEmail();

    //optional value if you want to carry
    custom += GeneralClass.GetUseriD();

    productName += lblProdeutName.Text;
    amount +=lblAmount.Text ;

    shippingOption += "1";                      //1 means no shipping option;
    noteOpton += "1";                           //1 means no note option;
    rmOption += "1";                            

    returnUrl +=ConfigurationManager.AppSettings["websiteUrl"]+"/PaypalThankYou.aspx";
    cancelUrl +=ConfigurationManager.AppSettings["websiteUrl"] + "/PaypalCancel.aspx";
    notifyUrl += ConfigurationManager.AppSettings["websiteUrl"] + "/PaypalNotifyUrl.aspx";

    redirectUrl += sellersEmail + buyersEmail + productName + amount + shippingOption +    noteOpton + returnUrl + cancelUrl + notifyUrl + rmOption + custom;
    Response.Redirect(redirectUrl); 
    ```

取消页面：- 如果用户从 paypal 取消交易。它也适用于 localhost。
感谢页面：付款后paypal会跳转到该页面。
通知网址：有时称为 IPN（即时付款通知）。这是您将从贝宝获得价值的地方。它仅适用于托管页面。**它不适用于本地主机**

**Notifyurl**页面的代码
添加这些`namespaces`：

```
 using System.Net;
 using System.IO;
 using System.Text;
 using System.Collections.Specialized; 
```

在`page_load`：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
         //Post back to either sandbox or live
        string strURL =ConfigurationManager.AppSettings["paypalURL"]+ "/cgi-bin/webscr";

        HttpWebRequest req = (HttpWebRequest)WebRequest.Create(strURL);

        //Set values for the request back
        req.Method = "POST";
        req.ContentType = "application/x-www-form-urlencoded";
        byte[] param = Request.BinaryRead(HttpContext.Current.Request.ContentLength);
        string strRequest =Encoding.ASCII.GetString(param);
        string strResponse_copy = strRequest;  //Save a copy of the initial info sent by PayPal
        strRequest += "&cmd=_notify-validate";
        req.ContentLength = strRequest.Length;

        //for proxy
        //WebProxy proxy = new WebProxy(new Uri("http://url:port#"));
        //req.Proxy = proxy;
        //Send the request to PayPal and get the response

        StreamWriter streamOut = new StreamWriter(req.GetRequestStream(), System.Text.Encoding.ASCII);
        streamOut.Write(strRequest);
        streamOut.Close();
        StreamReader streamIn = new StreamReader(req.GetResponse().GetResponseStream());
        string strResponse = streamIn.ReadToEnd();
        streamIn.Close();

        if (strResponse == "VERIFIED")
        {
            //check the payment_status is Completed
            //check that txn_id has not been previously processed
            //check that receiver_email is your Primary PayPal email
            //check that payment_amount/payment_currency are correct
            //process payment
            // pull the values passed on the initial message from PayPal

            NameValueCollection these_argies = HttpUtility.ParseQueryString(strResponse_copy);

            string pay_stat = these_argies["payment_status"];

            //.
            //.  more args as needed look at the list from paypal IPN doc
            //.

            if (pay_stat.Equals("Completed"))
            {
            //inserting the database
                int intUserID;
                int.TryParse(these_argies["custom"],out intUserID);
                objUserEntity.UserID=intUserID;
                objPapalPayment.strTransactionID = these_argies["txn_id"];
                objPapalPayment.dblPaymentAmount = Convert.ToDouble(these_argies["payment_gross"]);
                objPapalPayment.strBuyerMail = these_argies["payer_email"];
                objPapalPayment.dtmDateAppliedOn = DateTime.Now;
                objPapalPayment.blnIsGlobalAdvertisement = true;
                objSubscription.blnIsPaid = false;
                objSubscription.blnSubscriptionWithHeld = true;
                objUserFunction.AddPaypalPayment(objUserEntity, objPapalPayment, objSubscription, enmSubscriptionType.Global);                         
            }

            // more checks needed here specially your account number and related stuff
        }
        else if (strResponse == "INVALID")
        {
            //log for manual investigation
        }
        else
        {
            //log response/ipn data for manual investigation
        }
        }
    } 
```

**那么你将如何在 localhost 上进行调试呢？**使用价值`rm`=2；并将相同的代码粘贴到感谢页面的 page_load 事件中。它会起作用的。

更多详情： http: [//www.codeproject.com/Articles/42894/Introduction-to-PayPal-for-C-ASP-NET-developers](http://www.codeproject.com/Articles/42894/Introduction-to-PayPal-for-C-ASP-NET-developers)
[Paypal 变量及其用法](https://cms.paypal.com/es/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_Appx_websitestandard_htmlvariables)
希望对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T20:26:09.777

我认为您正在本地计算机上对此进行测试。

在重定向之前检查 cookie ASP.NET_SessionId 的值。

然后检查success.aspx调用后的值。

如果 cookie 丢失：Paypal 无法对您的 cookie 做任何事情。它只能在同一个域（本地主机）上更改。

我会在没有贝宝的情况下对此进行测试：只需一个简单的页面即可重定向到您的successful.aspx。如果 cookie 丢失，您可能配置了非常短的 Session Timeout，或者运行了一些删除 cookie 的代码（检查 global.asax）

# bash - 自动运行时 Bash 脚本无法正常工作

> ID：14092475
> 
> 赞同：0
> 
> 时间：2012-12-30T16:43:40.930
> 
> 标签：bash, networking, ubuntu, notifications, system

我有一个 bash 脚本，仅当我的笔记本电脑连接到网络时才使用 notify-OSD 打印通知。所以我把 bash 脚本放在 /etc/network/if-up.d

我将一些日志消息打印到文件中以确认脚本确实正在运行。但是通知的东西似乎不起作用。我刚刚将这一行添加到文件中

```
 notify-send -u 'critical' -i /home/vivek/Downloads/proxy.ico 'SetProxy Status' 'proxy set to auto' 
```

但是，当我像这样从终端显式运行该脚本（通过双击它或）时：

```
cd /etc/network/if-up.d
./setproxy 
```

setproxy 是 bash 文件的名称，然后我看到通知工作正常。为什么会有这种行为？我怎样才能解决这个问题？我正在使用 ubuntu 12.04

/tmp/trace 中的输出：

```
+ nmcli con status
+ grep -q 'Hostel\|IITD'
+ '[' 1 -eq 0 ']'
+ gsettings set org.gnome.system.proxy mode none

** (process:12320): WARNING **: Command line `dbus-launch     --autolaunch=673e71ca3fc5f402403d22380000000a --binary-syntax --close-stderr' exited with non-zero exit status 1: Autolaunch error: X11 initialization failed.\n

** (process:12320): WARNING **: Command line `dbus-launch --autolaunch=673e71ca3fc5f402403d22380000000a --binary-syntax --close-stderr' exited with   non-zero exit status 1: Autolaunch error: X11 initialization failed.\n
+ echo 'You are outside college! No Proxy'
+ notify-send -u critical -i /home/vivek/Downloads/proxy.ico 'SetProxy Status' 'You are outside college, proxy set to none' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T19:35:02.523

如果你想使用`DISPLAY`，你也必须设置`XAUTHORITY`，但这有点复杂（取决于用户名和随机字符串）试试这个：

```
#!/bin/bash

export displayOwner=vivek     # enter your usename here
export DISPLAY=:0
export XAUTHORITY=$(echo /var/run/gdm3/auth-for-${displayOwner}-*/database)

notify-send -u 'critical' -i /home/vivek/Downloads/proxy.ico 'SetProxy Status' 'proxy set to auto' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T16:45:52.517

我怀疑是环境问题。

所以在你的脚本中，输入：

```
#!/bin/bash -x

source ~/.bashrc || source /etc/profile
exec &>/tmp/trace
# rest of the script there 
```

告诉我们发生了什么。

**编辑**：您的脚本应以：

```
#!/bin/bash

source ~/.bashrc || source /etc/profile
export DISPLAY=:0
# rest of the script there 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T18:35:27.903

如果您正在运行的程序需要 X，则它不能在没有 X 的情况下运行。或者以某种方式授权它连接到您的 X 会话，或者从您的 X 会话中运行它。

# wordpress - 用于 wordpress 插件的 asp.net 网络表单应用程序

> ID：14092477
> 
> 赞同：0
> 
> 时间：2012-12-30T16:43:52.023
> 
> 标签：wordpress

大家好，我想用asp.net 制作一个服务器端、数据库驱动的应用程序，但想为wordpress 做。因为wordpress是纯粹的php这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:27:40.167

不，你不能因为 WordPress 在 PHP 中，.net 和 php 是不同的平台。

也许你可以尝试一些东西来转换 .net 代码在 php 中，玩弄 dotnetnuke。

# java - 从服务中检索的日期格式

> ID：14092479
> 
> 赞同：7
> 
> 时间：2012-12-30T16:44:08.373
> 
> 标签：java, javascript, android, json

我正在努力将 Json 对象从服务获取到 Android 中的列表视图...日期格式如下所示“/Date(1354222800000+0300)/”...如何将其更改为可读格式？

```
for (int i = 0; i < json.length(); i++) {

    HashMap<String, String> map = new HashMap<String, String>();
    JSONObject e = json.getJSONObject(i);
    map.put("mDate", "" + e.getString("mDate"));
    mylist.add(map);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T17:40:08.833

这是 MS JSON 日期格式。

采用：

```
var myDate = new Date(parseInt(String(dateString).substr(6))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T08:29:05.420

```
 String mDate = getFormattedDate(e.getString("JSON OBJECT"));

    private String getFormattedDate(String stringDate) throws JSONException {
    String strDate = stringDate.replace("/Date(", "").replace(")/", "");

    strDate = strDate.substring(0, strDate.indexOf("+"));
    Long longDate = Long.parseLong(strDate, 10);
    Date mDate = new Date(longDate);

    SimpleDateFormat sdf = new SimpleDateFormat("MMM dd, yyyy");
    String formattedDate = sdf.format(mDate);

    return formattedDate;
} 
```

# python - 课堂上的 doctest 不通过

> ID：14092480
> 
> 赞同：0
> 
> 时间：2012-12-30T16:44:20.027
> 
> 标签：python

我有一个类名“vector”，我需要实现一些方法。我在代码中内置了“doctest.testmod()”。我写了我需要的所有方法（除了 str 和 repr），但我不明白为什么我会遇到所有这些失败。如果anypne可以提供帮助，我会很高兴。tnx。

```
from math import sqrt

class Vector:

    def __init__(self, x = 0, y = 0, z = 0):        
        self.x=x
        self.y=y
        self.z=z

    def to_tuple(self):
        '''
        >>> Vector(1,0,0).to_tuple()
        (1, 0, 0)
        '''
        return (self.x,self.y,self.z)

    def __str__(self):
        '''
        __str__
        >>> str(Vector(1.0, 0.0, 1.0))
        '(1.0, 0.0, 1.0)'
        '''
        return str(self.to_tuple())

    def __repr__(self):
        return str(self)

    def __eq__(self, other):
        '''
        >>> Vector(3,6,10.) == Vector(3.,6.,10)
        True
        >>> Vector(1,0.,-1.) == Vector(1.,0.,1)
        False
        '''
        if self.x==other[0] and self.y==other[1] and self.z==other[2]:
            return True
        else:
            return False

    def __add__(self, other):      
        '''
        >>> Vector(1,2,3) + Vector(0.5,3,-1)
        (1.5, 5, 2)
        '''  
        return (self.x+other[0],self.y+other[1],self.z+other[2])

    def __neg__(self):
        '''
        >>> -Vector(1,8,-4.3)
        (-1, -8, 4.3)
        '''
        return (self.x*-1,self.y*-1,self.z*-1)

    def __sub__(self, other):
        '''
        >>> Vector(1,2,3) - Vector(0.5,3,-1)
        (0.5, -1, 4)
        '''
        self.__add__(other.__neg__)

    def __mul__(self, scalar):
        '''
        >>> Vector(1,5,3) * 2
        (2, 10, 6)
        >>> Vector(1,5,3) * (-0.5)
        (-0.5, -2.5, -1.5)
        '''
        if type(scalar)!=int or float:
            raise TypeError("Vector multiplication only defined for scalar")
        else:
            return (scalar*self.x,scalar*self.y,scalar*self.z)
    def inner(self, other):  
        '''
        >>> Vector(1,2,3).inner(Vector(-1,5,3))
        18
        '''     
        return (self.x*other[0]+self.y*other[1]+self.z*other[2])

    def norm(self):
        '''
        >>> Vector(0,3,4).norm()
        5.0
        '''
        return sqrt(self.inner(self))

import doctest

doctest.testmod() 
```

输出：

```
6 items had failures:
   1 of   1 in __main__.Vector.__add__
   2 of   2 in __main__.Vector.__eq__
   2 of   2 in __main__.Vector.__mul__
   1 of   1 in __main__.Vector.__sub__
   1 of   1 in __main__.Vector.inner
   1 of   1 in __main__.Vector.norm
***Test Failed*** 8 failures. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T17:11:56.570

在`__add__`,`__eq__`和`__inner__`方法中，您可以通过索引访问 other 的字段，但您应该像访问它们一样`other.x, other.y, other.z`

然后，在`__mul__`方法中：

`if type(scalar)!=int or float:`

应更改为：

`if not isinstance(scalar, (int, float)):`

# java - java代码中的多个url连接

> ID：14092481
> 
> 赞同：0
> 
> 时间：2012-12-30T16:44:22.757
> 
> 标签：java, url, connection

我有一个多次调用的以下函数

```
report="http://myURL/some_file.php" + "?someParam=" + getSomeParam()"; 
```

where`myURL`总是相同的，`some_file.php`并且`someParam`每次都不同。

```
private static void makeReport(final String report) {
    try {
        URL url = new URL(report);
        try {
            url.openStream();
        } catch (IOException e) {
            return; // do nothing
        }
    } catch (MalformedURLException e) {
        return; // do nothing
    }
} 
```

问题是，如果它是一种有效的方法来处理这种情况，每次打开不同参数的新连接？另外，报告对主程序没有影响，所以应该在不同的线程/进程中完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T17:00:40.340

打开一个新连接有一些开销，但听起来你的程序并没有大量使用套接字，所以开销应该可以忽略不计。您不需要两个 try 块，顺便说一下，您可以只拥有一个，然后将 catch 块一个接一个地放置。

```
private static void makeReport(final String report) {
    InputStream in = null;
    try {
        URL url = new URL(report);
        in = url.openStream();
    } catch (MalformedURLException e) {
        return; // do nothing
    } catch (IOException e) {
        return; // do nothing
    } finally {
        try { in.close(); } catch (IOException ex) { ex.printStackTrace(); }
    }
} 
```

至于这个方法是否应该进入自己的线程，取决于上下文。它需要异步吗？对于它的价值，发出一个简单的 GET 请求应该不会花费太长时间。我无法想象你需要它在自己的线程中的情况。

最后一点，每当您打开一个连接时，关闭它总是一个好习惯，尤其是在 try-catch-finally（或 try-with-resources）结构中。不遵循这种做法是在更复杂的套接字编程中引入连接泄漏的好方法。

# django - Django DetailView 按外键过滤

> ID：14092482
> 
> 赞同：2
> 
> 时间：2012-12-30T16:44:39.447
> 
> 标签：django, foreign-keys, detailview

我有点困惑，想利用 DetailView 功能，使用外键作为我的过滤器来显示数据。基本上我的模型是这样的：

```
class Category(models.Model):
    name = models.CharField(max_length=30)
    slug = models.SlugField(help_text="A short name for Category")

    def __unicode__(self):
       return self.name

    class Meta:
       ordering = ["-name"]
       verbose_name_plural = "categories"  

class Publisher(models.Model):
    name = models.CharField(max_length=30)
    slug = models.SlugField(help_text="A short name for Publisher")

    class Meta:
       ordering = ["-name"]

    def __unicode__(self):
        return self.name

class Book(models.Model):
    title = models.CharField(max_length=100)
    slug = models.SlugField(help_text="A short name for book")
    pub_date = models.DateField()
    publisher = models.ForeignKey(Publisher)
    category = models.ForeignKey(Category)

    class Meta:
       ordering = ["-title"]

    def __unicode__(self):
       return self.title 
```

我的 Urls.py：

```
url(r'^categories/(?P<slug>[\w-]+)/$', DetailView.as_view(model=Category,template_name="books/category_detail" )), 
```

我的 Category_detail.html

```
{% block content %}
    <h2>{{ category.name}} </h2>
    <ul>       
    <li>Book Title: {{ book.title }}</li>
<li>Book publisher: {{ book.publisher }}</li>
    <li>Book Published Date: {{ book.pub_date }}</li>    
    </ul>
{% endblock %} 
```

基本上我想在我的 category_detail.html 中显示以下信息：

*   分类名称*   书名*   出版商名称*   发布日期

任何帮助，将不胜感激。

谢谢你-Keoko

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T19:57:20.887

感谢您的友好回复。我创建了一个包含以下信息的 views.py 文件：

```
from django.shortcuts import get_object_or_404
from django.views.generic import ListView
from mysite.books.models import *

class BooksCategoryListView(ListView):

   context_object_name = "book_list"

   "get_queryset = query all the objects in the database"
    def get_queryset(self):
      category_slug = get_object_or_404(Category, slug=self.kwargs['slug'])
      return Book.objects.filter(category=category_slug) 
```

并更新了我的应用程序 urls.py：

```
from django.conf.urls import patterns, url, include
from django.views.generic import ListView, DetailView
from mysite.books.views import BooksCategoryListView
from mysite.books.models import *

urlpatterns = patterns('',
   ...snip....        
   url(r'^categories/(?P<slug>[\w-]+)/$', BooksCategoryListView.as_view()),  
) 
```

最后修改 category_detail.html 如下：

```
{% block content %}
<h2>Book Details</h2>
<ul>     
   <li>Category: {{ book.category}}</li> 
   <li>Title: {{ book.title }}</li>
   <li>Author: {{ book.authors }}</li>
   <li>Publisher: {{ book.publisher }}</li>
   <li>Published Date: {{ book.pub_date }}</li>            
</ul>
{% endblock %} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T13:09:48.553

在模板中，您有类别对象。您可以遍历所有书籍；

```
{% for book in category.book_set.all %}
   Book Title: {{ book.title }}
   Book publisher: {{ book.publisher }}
   Book Published Date: {{ book.pub_date }}
{% endfor %} 
```

或者只是第一本书；

```
 Book Title: {{ category.book_set.all.0.title }}
   Book publisher: {{ category.book_set.all.0.publisher }}
   Book Published Date: {{ category.book_set.all.0.pub_date }} 
```

# c# - 如何将字节数组附加到现有的 StorageFile？

> ID：14092488
> 
> 赞同：6
> 
> 时间：2012-12-30T16:45:30.557
> 
> 标签：c#, windows-8, microsoft-metro, windows-runtime, windows-store-apps

我需要依次按字节块写入文件数据（在我的 Metro 应用程序中），并且有一个`FileIO`带有方法的类`AppendTextAsync`，`WriteBytesAsync`但不需要，`AppendBytesAsync`那么如何将字节数组附加到一个`StorageFile`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-30T17:09:31.980

这段代码似乎对我有用：

```
String s = "hello";
Byte[] bytes = Encoding.UTF8.GetBytes(s);

using (Stream f = await ApplicationData.Current.LocalFolder.OpenStreamForWriteAsync
    ("hello.txt", CreationCollisionOption.OpenIfExists))
{
    f.Seek(0, SeekOrigin.End);
    await f.WriteAsync(bytes, 0, bytes.Length);
} 
```

# python - 使用计时器在python中显示字符串的位

> ID：14092493
> 
> 赞同：0
> 
> 时间：2012-12-30T16:46:12.633
> 
> 标签：python

我试图在 python 中按顺序显示给定字符串的位。我可以将它转换为二进制字符串，但不能用计时器枚举它。

这是基于我正在使用的代码的最小示例：

```
import sys
string = "a"
for char in string:
    mybyte = str(bin(ord(char))[2:].zfill(8)) // convert char to 8 char length string which are char's representation in binary
    for bit in mybyte:
        sys.stdout.write(bit)
        time.sleep(0.5)

    sys.stdout.write("\n") 
```

这不会显示以 0.5 秒分隔的每个位，而是等到所有位（8 x 0.5 = 4 秒）都被处理后才能显示它们。

但是，如果我在 lop 中添加一条新行，我会得到及时正确的迭代，但代价是在每个位之间添加换行符，这是我不想要的。我猜我在这里做错了，比如没有解决问题的好方法，但我真的坚持这一点，所以欢迎任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T16:47:47.350

您需要 `sys.stdout.flush()`在每次写入后进行，因为默认情况下会缓冲标准输出

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T16:47:51.247

您可能需要冲洗`sys.stdout`：

```
import sys
string = "a"
for char in string:
    mybyte = str(bin(ord(char))[2:].zfill(8)) // convert char to 8 char length string which are char's representation in binary
    for bit in mybyte:
        sys.stdout.write(bit)
        sys.stdout.flush()  # <-- Add this line right here
        time.sleep(0.5)

    sys.stdout.write("\n") 
```

对于 Python 3，您可以只使用`end`关键字参数来`print()`：

```
import sys
string = "a"

for char in string:
    mybyte = str(bin(ord(char))[2:].zfill(8))

    for bit in mybyte:
        print(bit, end='')
        time.sleep(0.5)

    print() 
```

对于 Python 2，您必须导入 print 函数：

```
 from __future__ import print_function 
```

# sql-server-2005 - 在 c#.net 中检索复选框列表值

> ID：14092494
> 
> 赞同：0
> 
> 时间：2012-12-30T16:46:20.887
> 
> 标签：sql-server-2005, ado.net

我想从我的 SQL Server 2005 数据库中检索 checkboxlist 值，其中我有一个表，其中的列`car`包含 n 个值，例如`BMW,Jaguar,Royal`.

现在我想为复选框列表中的特定复选框检索它们；我试过了：

```
for (int x = 0; x < checkedListBox1.Items.Count; x++) { 
  if (checkedListBox1.CheckedItems[x].ToString()) {
    checkedListBox1.Text = sdr.GetString(16).Split(","); 
   } 
 } 
```

但它不工作。我收到以下错误：

> *'string.Split(params char[])' 的最佳重载方法匹配有一些无效参数*

这是 SQL 查询：

```
select 
    RegisterNo, RegistrationDate, Stimulation, PationName,
    DateOfBirth, ContactNo, Occupat‌ion, Age, Sex, Chief_Complain,
    Investigation_Result, PastHistoryAny, Physical_Examinati‌on,
    Ref_By_Doctor, Medications, Prognosis, Electro_Therapy,
    Neuro_Rehabilitation, Ortho‌​_Rehabilitation,
    Cardio_Pulmonery_Rehabilitation, Sports_Rehabilitation 
from 
    Physio_cureTable 
where 
    RegisterNo = @RegisterNo 
    and Syncoperation <> 'D 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T17:24:56.013

好的，现在我们有一个**有用**的错误消息（不仅仅是*它不起作用*），我们可以提供帮助。

错误消息似乎很清楚：

> ***'string.Split(params char[])'**的最佳重载方法匹配有一些无效参数*

因此，请检查您的调用`.Split()`- 正如您从错误消息中看到的那样，它的分隔符需要一个或多个**字符**。但是您**没有**提供一个或多个字符-您传递的是一个**字符串**，而这**不是**一个字符....

```
checkedListBox1.Text = sdr.GetString(16).Split(","); 
```

因此，将您的调用更改为实际将 a`,`作为**字符**传递（在 C# 中由**单引号**表示）：

```
checkedListBox1.Text = sdr.GetString(16).Split(','); 
```

然后它应该工作，我相信。

**更新：**`.Split()`您的第二个主要问题是返回一个**字符串数组**的事实- 而不仅仅是一个字符串。但是您试图将该字符串数组分配给一个`.Text`只是一个字符串的属性。那么你想用你得到的那 10 个字符串做什么呢？您需要找到一种方法将它们分配给可以容纳**多个字符串**的东西）。

如果我正确解释了您的代码，您很可能希望从数据库表中加载以逗号分隔的条目，然后`CheckListBox.Items`用这些字符串填充 - 对吧？

然后你需要类似的东西：

```
// clear the list of items 
checkedListBox1.Items.Clear();

// parse the loaded comma-separated string into array of individual strings
string[] stringsFromDatabase = sdr.GetString(16).Split(","); 

// load those strings into .Items for checklistbox
foreach(string str in stringsFromDatabase)
{
    checkedListBox1.Items.Add(str);
} 
```

# javascript - scrollTop 执行时闪烁？

> ID：14092495
> 
> 赞同：1
> 
> 时间：2012-12-30T16:46:23.087
> 
> 标签：javascript, ios, cordova, jquery-mobile

当我执行此代码时：

```
window.scrollTop(0,$(this).offset().top)); 
```

我在页面中闪烁（白页显示内容再次显示）

我尝试使用另一种方式

```
$('html, body').animate({ scrollTop: $(this).offset().top }, 'slow'); 
```

这个白页我的意思是闪烁仍然出现。

任何建议都可能有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T12:15:11.223

你试过`$.mobile.silentScroll()`吗？

来自[文档](http://jquerymobile.com/demos/1.2.0/docs/api/methods.html)：“$.mobile.silentScroll() - 滚动到特定的 Y 位置而不触发滚动事件侦听器。”

```
//scroll to Y 100px
$.mobile.silentScroll(100); 
```

# mysql - 按日期统计所有用户的帖子

> ID：14092499
> 
> 赞同：1
> 
> 时间：2012-12-30T16:46:54.583
> 
> 标签：mysql

我有一张桌子，`users`并`posts`希望获得用户在不同日期范围内的帖子计数。

```
users: id, username
1, bob
2, sam

posts: id, user_id, created (datetime)
1, 1, 2012-12-01 00:00:00
2, 1, 2012-12-30 00:01:00
3, 1, 2012-12-30 01:00:00
4, 2, 2012-12-12 00:00:00
5, 2, 2012-12-30 01:00:00 
```

我想计算最后一个月`hour`的帖子。`day`这可以在一个查询中完成吗？

假设查询运行的日期是`2012-12-30 01:30:00`我想要如下内容：

```
User.id | hour | day | month
1       | 1    | 2   | 3
2       | 1    | 1   | 2 
```

我尝试过类似以下的操作，但数字是错误的。

```
SELECT 
    User.id, 
    COUNT(Hour.id) as hour, 
    COUNT(Day.id) as day, 
    COUNT(Month.id) as month
FROM user as User
LEFT JOIN posts as Hour ON 
    (posts.user_id = user.id AND posts.created >= '2012-12-30 00:30:00')
LEFT JOIN posts as Day ON 
    (posts.user_id = user.id AND posts.created >= '2012-12-29 01:30:00')
LEFT JOIN posts as Month ON 
    (posts.user_id = user.id AND posts.created >= '2012-11-30 01:30:00') 
```

我最终得到了奇怪的数字，例如

```
User.id | hour | day | month
1       | 12   | 12  | 12
2       | -    | 2   | 2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T16:59:26.460

你可以使用这个：

```
select
  username,
  user_id,
  sum(created>=date_sub('2012-12-30 01:30:00', INTERVAL 1 HOUR)) hour,
  sum(created>=date_sub('2012-12-30 01:30:00', INTERVAL 1 DAY)) day,
  count(*) month
from users inner join posts on users.id=posts.user_id
where created>=date_sub('2012-12-30 01:30:00', INTERVAL 1 MONTH)
group by user_id 
```

（然后您可以用 替换特定的日期`'2012-12-30 01:30:00'`时间`now()`）

# php - PHP 脚本 exec bash 脚本不打印所有 bash 行

> ID：14092500
> 
> 赞同：2
> 
> 时间：2012-12-30T16:47:00.847
> 
> 标签：php, bash, exec

我的 redhat 上有 php 脚本，我通过 telnet 客户端以 root 身份登录。
我运行 bash 脚本的 PHP 脚本是（functions.inc）：

```
<?php
exec('/ilantest/testscript.sh');
?> 
```

我的 Bash 脚本：

```
#!/bin/bash
echo "Hello world"
echo "Whats going on ?" 
```

当我这样做时：php functions.inc - 我得到以下信息：
发生了什么？[root@X ilantest]#

为什么我看不到第一行？
谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T16:58:31.937

[exec()](http://us3.php.net/manual/en/function.exec.php)见[http://us3.php.net/manual/en/function.exec.php#refsect1-function.exec-returnvalues](http://us3.php.net/manual/en/function.exec.php#refsect1-function.exec-returnvalues)

> 命令结果的**最后**一行。如果您需要执行命令并将命令中的所有数据直接传回而不受任何干扰，请使用 passthru() 函数。要获取执行命令的输出，请务必设置并使用**输出** **参数**。

所以：

```
exec('/ilantest/testscript.sh', $output);
echo implode("\n", $output); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T16:56:36.100

在你的 php 脚本中尝试

```
echo system('/ilantest/testscript.sh'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T17:04:32.997

如果您没有指定任何参数来接收输出，则只会打印最后一行。从[**exec()**](http://www.php.net/manual/en/function.exec.php)手册：

> 如果存在输出参数，则指定的数组将填充命令的每一行输出。此数组中不包含尾随空格，例如 \n。请注意，如果数组已经包含一些元素，则 exec() 将附加到数组的末尾。如果您不希望函数附加元素，请在将数组传递给 exec() 之前对数组调用 unset()。

您可以传递一个数组来接收所有行：

```
<?php
$lines = array();
exec('/ilantest/testscript.sh', $lines);
foreach($lines as $i) {
    echo $i;
}
?> 
```

# .htaccess - 一个子域上的 .htaccess 点文件到另一个

> ID：14092502
> 
> 赞同：0
> 
> 时间：2012-12-30T16:47:21.357
> 
> 标签：.htaccess, mod-rewrite

使用 htaccess 将文件从一个子域重新指向另一个子域的最佳方法是什么，如下例所示。

例如：sub-1.site.tld/app.js -> sub-2.site.tld/assets/applications/js/app.js

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T20:29:00.607

如果两个站点共享相同的文档根目录，那么您的问题很简单。假设您已加载 mod_rewrite，您可以将这些重写规则添加到文档根目录中的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^sub-1.site.tld$ [NC]
RewriteRule ^/?app.js$ /assets/applications/js/app.js [L] 
```

这使得当有人请求`http://sub-1.site.tld/app.js`服务器在内部重写请求以便`/assets/applications/js/app.js`提供给浏览器时，浏览器地址栏上的 URL 保持不变。

# java - Java - 用 int 命名变量

> ID：14092507
> 
> 赞同：0
> 
> 时间：2012-12-30T16:48:02.527
> 
> 标签：java

基本上，我想将变量命名为字母“f”和变量“i”表示的数字。但是，我不知道该怎么做。

```
int n = 2;
    for(int i = 0; i < generations; i++){
        creature[] f;
        fi = new creature[n];
        n = 2*n;
    } 
```

正如你在上面看到的，它说“fi”。我知道这行不通；这只是为了证明我的意思。例如，第一个数组列表是“f0”，第二个是“f1”，第三个是“f2”，依此类推。任何帮助完成这项工作将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T16:50:38.557

你可以有 int 数组，你可以像下面这样使用。你的方式在java中是不可能的

```
 creature[][] f = new creature[size][];
   f[i] = new creature[n]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-30T16:52:57.150

阅读您的代码对我没有帮助，但您的描述听起来像是您想使用二维数组：

```
int n = 2;
Creature[][] f = new Creature[generations][];
for(int i = 0; i < generations; i++){
    f[i] = new Creature[n];
    n = 2*n;
} 
```

你可以像这样使用它：

```
Creature[] generation0 = f[0]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T16:50:53.823

即使您可以使用反射来按名称获取变量，但这既不干净也不高效。

按名称或数字访问值的标准方法是：

*   声明为的数组`Creature[] f = new Creature[generations];`：您访问`f[i]`
*   声明为`Map<int, Creature> = new HashMap<>();`：您访问的地图`f.get(i)`

请注意，我更改`creature`为`Creature`：Java 最佳实践是以大写字母开头的类名。

# perl - 使用 Perl 自动登录

> ID：14092509
> 
> 赞同：2
> 
> 时间：2012-12-30T16:48:28.720
> 
> 标签：perl, web, https, www-mechanize

我正在尝试编写一个登录到我的 Intex 帐户的脚本。由于某种原因，我无法通过登录屏幕。我知道该页面是 https 并且我不确定我在考虑这种安全性方面做错了什么。在脚本结束时，作为测试，我尝试在 chrome 中启动页面。这只会让我回到登录屏幕。谢谢您的帮助。

```
use WWW::Mechanize;
use Crypt::SSLeay;
use HTTP::Cookies;
my $mech = WWW::Mechanize->new();
$mech->agent_alias( 'Windows IE 6' );
$mech->cookie_jar(HTTP::Cookies->new());

my $url = 'https://www.intex.com/main/login.php';
$mech->get( $url );

my $pass = 'example';

$mech->set_visible( $pass);
$mech->click;

#this is a test to see whether the next output is wrong
print $mech->text(); 

my $link = mech->uri();
system ('start chrome '.$link); 
```

我现在正在使用 www::mechanize::firefox 并且在上传表单时遇到问题。谁能告诉我如何使用该模块将文件提交到这样的表单？

```
<form action="http://www.cs.tut.fi/cgi-bin/run/~jkorpela/echo.cgi"
enctype="multipart/form-data" method="post">
<p>
Type some text (if you like):<br>
<input type="text" name="textline" size="30">
</p>
<p>
Please specify a file, or a set of files:<br>
<input type="file" name="datafile" size="40">
</p>
<div>
<input type="submit" value="Send">
</div>
</form> 
```

编辑::我需要点击这样的按钮......

```
<B><FONT SIZE=2>Then click...</FONT></B><A HREF="Javascript:CheckPortfolioUpload('Portfolio - Select Portfolio - Upload ? Go ~ Results')"><IMG NAME=GoBtn SRC=/images/button/GreenGo.gif BORDER=0 TITLE='Upload'  CLASS=Clickable></IMG></A>
</TABLE> 
```

我不知道该怎么做。

# jquery-ui - JQuery UI Sortable：带有多组行的表？

> ID：14092510
> 
> 赞同：3
> 
> 时间：2012-12-30T16:48:28.643
> 
> 标签：jquery-ui, html-table

我有一个接近以下 HTML 的 HTML 表（#view-page-table）：

```
<table id="view-page-table">
    <thead>
        <th>Header1</th>
        <th>Header2</th>
    </thead>
    <tbody>
        <tr><td>Group 1</td><td>Group 1</td></tr>
        <tr><td>Group 1</td><td>Group 1</td></tr>

        <tr><td>Group 2</td><td>Group 2</td></tr>
        <tr><td>Group 2</td><td>Group 2</td></tr>

        <tr><td>Group 3</td><td>Group 3</td></tr>
        <tr><td>Group 3</td><td>Group 4</td></tr>
    </tbody>
</table> 
```

我的 jQuery 现在很简单：

```
function reOrder() {
    $("#view-page-table tbody").sortable({
        helper: function(e, ui) {
             ui.children().each(function() {
                 $(this).width($(this).width());
             });
             return ui;
        }
    }).disableSelection();
} 
```

它似乎工作正常（辅助功能是在移动时保持单元格宽度）。唯一的问题是，我需要`<tr>`一次移动两个。换句话说，用户需要拖动所有的第一组、第二组或第三组，而不能只拖动一行。我试图在表格中添加一个 div，但我想这是一个禁忌。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-30T16:59:00.240

我想我有解决方案，但不是最佳的。试着在里面做表

```
<tbody>
        <tr><td>Group 1</td><td>Group 1</td></tr>
        <tr><td>Group 1</td><td>Group 1</td></tr>
</tbody>
<tbody>
        <tr><td>Group 2</td><td>Group 2</td></tr>
        <tr><td>Group 2</td><td>Group 2</td></tr>
</tbody>
<tbody>
        <tr><td>Group 3</td><td>Group 3</td></tr>
        <tr><td>Group 3</td><td>Group 4</td></tr>
</tbody> 
```

并用这个替换你的脚本

```
function reOrder() {
    $("#view-page-table").sortable({
        helper: function(e, ui) {
             ui.children().each(function() {
                 $(this).width($(this).width());
             });
             return ui;
        },
        handle: "tbody"
    }).disableSelection();
} 
```

祝你好运

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T16:51:30.410

尝试将相关行包装在它们自己的 tbody 标记中。您可以在单个表中使用多个 tbody 标记。这是一个理想的用例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-24T11:03:12.860

Ahmed Assaf 解决方案需要修改如下

HTML 代码

```
<table id="sort" border="1" width="500">  
    <thead>  
    <tr><th>Col 1</th><th>Col 2</th><th>Col 3</th></tr>  
    </thead>  
    <tbody class="red">
            <tr><td>Group 1</td><td>Group 1</td><td>Group 1</td></tr>
            <tr><td>Group 1</td><td>Group 1</td><td>Group 1</td></tr>
    </tbody>                                    
    <tbody>                                     
            <tr><td>Group 2</td><td>Group 2</td><td>Group 2</td></tr>
            <tr><td>Group 2</td><td colspan="2">Group 2 and Group 2</td></tr>
    </tbody>                                    
    <tbody class="blue">                                     
            <tr><td>Group 3</td><td>Group 3</td><td>Group 3</td></tr>
            <tr><td>Group 3</td><td>Group 4</td><td>Group 4</td></tr>
    </tbody>
</table> 
```

脚本代码

```
// Return a helper with preserved width of cells  
var fixHelper = function(e, ui) {  
  ui.children().children().each(function() { 
    $(this).width($(this).width()); 
  });  
  return ui;  
};

$("#sort").sortable({
        helper: fixHelper,
        items: "tbody"
    }).disableSelection(); 
```

在 fixHelper 函数中的代码行

```
ui.children().each(函数()
```

需要替换为

```
ui.children().children().each(function()
```

捕捉 TD 宽度值。

和线

```
句柄：“tbody”
```

需要替换为

```
项目：“身体”
```

**rlanvin**在他的评论中指出

[jsfiddle 上的演示](https://jsfiddle.net/NexusFred/155zqt5m/)

最好的问候 NexusFred

# javascript - 移动样式表不起作用 - wordpress

> ID：14092511
> 
> 赞同：0
> 
> 时间：2012-12-30T16:48:30.700
> 
> 标签：javascript, css, wordpress, mobile

我刚刚从制作一个网站从纯 html 到 wordpress，出于某种原因，现在它在 wordpress 中移动样式表和 javascript 不适用？

有任何想法吗？真的很困惑，它以前在纯 html 中完成时工作过，wordpress 中的某些东西会干扰吗？

链接：[http ://dev.empa-photography.co.uk](http://dev.empa-photography.co.uk)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T23:15:51.787

尝试添加

```
<meta name=viewport content="width=device-width, initial-scale=1.0"> 
```

在您的其他元属性中。这告诉设备以与设备宽度相同的宽度显示网站。你现在的问题是设备的浏览器说我的宽度是[一些桌面大小的值]，所以响应部分没有发挥作用，因为它只适用于较小的宽度。

# php - php 排序没有按预期工作？

> ID：14092513
> 
> 赞同：2
> 
> 时间：2012-12-30T16:48:44.430
> 
> 标签：php, sorting, csv

我需要了解两个 CSV 文件之间的差异，在这种情况下，最新的文件 file2.csv 会用更新的版本覆盖具有相同值的行，并删除具有相同数据的行。

文件 1.csv

```
GHI, 0, 0
ABC, 12, 1
DEF, 10, 1 
```

文件2.csv

```
ABC, 8, 1
DEF, 10, 1
GHI, 2, 0 
```

最终的 CSV 应该是这样的：

```
ABC, 8, 1
GHI, 2, 0 
```

php代码：

```
<?php
    $file1 = file('file1.csv');
    $file2 = file('file2.csv');

    sort($file1);
    sort($file2);

    var_dump($file1);
    var_dump($file2);

    $diff =  array_diff($file2, $file1);

    var_dump($diff);

    ?> 
```

返回这个

```
ABC, 8, 1
DEF, 10, 1
GHI, 2, 0 
```

现在，当我手动将 file1.csv 更改为此：

```
ABC, 12, 1
DEF, 10, 1
GHI, 0, 0 
```

它按预期返回：

```
ABC, 8, 1
GHI, 2, 0 
```

当我转储排序后的数组时，排序函数似乎可以正常工作，就像我手动更改顺序一样

```
ABC, 12, 1
DEF, 10, 1
GHI, 0, 0 
```

然而，它似乎不会产生相同的最终结果。有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T16:52:15.447

`file`将文件分成几行，但每一行仍有其结束的换行符。然而，最后一行没有。因此，它不等于文件中间的同一行内容。

要解决此问题，您可以在最后一个元素中添加换行符：

```
$file1[count($file1)-1] .= PHP_EOL;
$file2[count($file2)-1] .= PHP_EOL; 
```

或者您可以将它们从所有行中剥离：

```
array_walk($file1,function(&$a) {$a = trim($a);});
array_walk($file2,function(&$a) {$a = trim($a);}); 
```

# kendo-ui - listView 中的行未使用 Kendo MVVM 更新

> ID：14092516
> 
> 赞同：4
> 
> 时间：2012-12-30T16:48:55.087
> 
> 标签：kendo-ui

我正在测试 Kendo 的 ui MVVM 功能，但似乎无法弄清楚如何更新 viewModel 项目，以便它们更新 listView 中的行。

如果我用通过 websocket 发送给我的新（json）项目替换所有项目，它会更新得很好，但我试图简单地更新匹配项目并希望看到这些更改出现在我的视图（listView div）中。

这是我的代码的摘录 - 我做错了什么？

```
<div id="listView">
    <table>
        <thead>
            <tr>
                <th>BatchID</th>
                <th>Status</th>
                <th>Progress</th>
                <th>Owner</th>
                <th>(Est)Completion Time</th>
            </tr>
        </thead>
        <tbody data-template="row-template" data-bind="source: items"></tbody>
        <tfoot data-template="footer-template" data-bind="source: this"></tfoot>
    </table>
</div> 
```

然后在我的脚本块中：

```
<script id="row-template" type="text/x-kendo-template">
    <tr>
        <td data-bind="text: BatchID"></td>
        <td data-bind="text: Status"></td>
        <td data-bind="text: Progress"></td>
        <td data-bind="text: Owner"></td>
        <td data-bind="text: EstCompletion"></td>
    </tr>
</script>

<script id="footer-template" type="text/x-kendo-template">
    <tr>
        <td>
            Batch count: #: total() #
        </td>
    </tr>
</script>

<script>

    $(document).ready(function () {

        var viewModel = kendo.observable({
            items: [],
            total: function () {
                return this.get("items").length;
            }
        });

        kendo.bind($("#listView"), viewModel);

        // register this reporting widget
        var webSocket = CreateSocket("screen2", "reporting", "default", true);

        webSocket.onmessage = function (e) {
            try {

                var smd = JSON.parse(e.data);
                var data = JSON.parse(smd.Data);

                jQuery.each(data, function () {

                    var id = this.BatchID;
                    var newItem = this;

                    var hasRow = false;
                    jQuery.each(viewModel.items, function () {
                        var itemTemp = this;
                        if (itemTemp.BatchID == id) {
                            hasRow = true;
                            itemTemp.Status == newItem.Status;
                            itemTemp.Progress = newItem.Progress;
                            itemTemp.EstCompletion = newItem.EstCompletion;
                            itemTemp.Completed = newItem.Completed;
                        }
                    });

                    if (!hasRow) {
                        var reportItem = new kendo.data.ObservableObject({
                            BatchID: "",
                            Owner: "",
                            Status: "",
                            Progress: "",
                            EstCompletion: "",
                            Completed: ""
                        });

                        reportItem.BatchID = this.BatchID;
                        reportItem.Owner = this.Owner;
                        reportItem.Status = this.Status;
                        reportItem.Progress = this.Progress;
                        reportItem.EstCompletion = this.EstCompletion;
                        reportItem.Completed = this.Completed;

                        viewModel.items.push(reportItem);
                    }

                });

            }
            catch (e) {
                //alert(e.message);
            }
        };

        webSocket.onopen = function (e) {

            // now register our interest in receiving reporting monitoring data
            var bor = new SymMsgUp(GlobalInfo.UserID, "reporting", "default", "dfregister");

            // convert to Json and send it off the the server
            webSocket.send(bor.toServer());
        };

        webSocket.onclose = function (e) {
            //responseDiv.innerHTML += '<div>Disconnected.</div>';
        };

        webSocket.onerror = function (e) {
            //responseDiv.innerHTML += '<div>Error</div>'
        };

    });

</script> 
```

更新发生（我用调试器检查过） - 但这些更改不会反映在视图中..

另外，我创建了 var reportItem = new kendo.data.ObservableObject({ etc etc 用于测试 - 我宁愿不必这样做，只需将 json 对象数组转储到我的可观察集合 (viewMode.Items) 中。这很好用，但是再次更新单个项目时它不会更新...

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T08:21:44.920

刚刚收到来自 Kendo 的答复（将近一周后，因为我使用的是试用许可证......）关于如何做到这一点：

```
$(function(){
  var viewModel = kendo.observable({
    products: [
        { name: "Hampton Sofa", price: 989.99, unitsInStock: 39 },
        { name: "Perry Sofa", price: 559.99, unitsInStock: 17 },
        { name: "Donovan Sofa", price: 719.99, unitsInStock: 29 },
        { name: "Markus Sofa", price: 839.99, unitsInStock: 3 }
    ],
    newPrice: 0,
    itemIndex: 0,
    setPrice: function(e){
      this.products[this.itemIndex].set("price", this.newPrice);
    }
});

kendo.bind($("body"), viewModel);

}); 
```

编辑：只是为了解释一下行之有效的方法是：

```
this.products[this.itemIndex].set("price", this.newPrice); 
```

这就是我所追求的——一种更新他们的可观察集合中的条目的方法，它确实更新了 ui。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T00:44:31.510

不确定它是功能还是错误，但不支持您尝试执行的操作。如果您更新列表中的一个元素，那么它实际上会更新，**但**如果您更新列表中一项的字段，则不会。

这意味着实际上只*观察到*第一级。

所以，你应该做的实际上是用收到的元素替换当前元素。代替：

```
if (itemTemp.BatchID == id) {
    hasRow = true;
    itemTemp.Status == newItem.Status;
    itemTemp.Progress = newItem.Progress;
    itemTemp.EstCompletion = newItem.EstCompletion;
    itemTemp.Completed = newItem.Completed;
} 
```

你应该：

```
jQuery.each(viewModel.items, function () {
    var itemTemp = this;
    if (itemTemp.BatchID == id) {
        hasRow = true;
        itemTemp.Status == newItem.Status;
        itemTemp.Progress = newItem.Progress;
        itemTemp.EstCompletion = newItem.EstCompletion;
        itemTemp.Completed = newItem.Completed;
    }
}); 
```

你应该：

```
jQuery.each(viewModel.items, function (idx, old) {
    if (old.BatchID == id) {
        hasRow = true;
        viewModel.items.splice(idx, 1, newItem);
    }
}); 
```

**顺便说一句：**你有没有意识到你有`itemTemp.Status == newItem.Status;`而不是`itemTemp.Status = newItem.Status;`

因此，经过一些*清理*后的代码应如下所示：

```
webSocket.onmessage = function (e) {
    try {

        var smd = JSON.parse(e.data);
        var data = JSON.parse(smd.Data);

        jQuery.each(data, function () {
            var newItem = this;
            var hasRow = false;
            jQuery.each(viewModel.items, function (idx, oldItem) {
                if (oldItem.BatchID == newItem.BatchID) {
                    hasRow = true;
                    viewModel.items.splice(idx, 1, newItem);
                }
            });
            if (!hasRow) {
                viewModel.items.push(newItem);
            }
        });
    }
    catch (e) {
        //alert(e.message);
    }
}; 
```

# algorithm - 从一组范围中找到最频繁的数字 -

> ID：14092518
> 
> 赞同：3
> 
> 时间：2012-12-30T16:49:10.267
> 
> 标签：algorithm, computational-geometry

问题如下：-

给定 N 头不同大象的寿命，用一对整数表示。

前任。[5,10] [6,15] [2,7] 表示一头大象从 5 年到 10 年。第二只从 6 年到 15 年，依此类推。

你可以假设一头大象最多只能活 M 年。（不是问题的一部分，但我们可能需要它来表示算法复杂性。）

给定这些数据，**找出最大数量的大象生活的年份**。随意解决关系。

我已经尝试了几种方法来解决这个问题，但似乎没有什么比天真的解决方案的复杂性更重要的了。天真的解决方案是： -

```
1\. Maintain an array(call it ctr).
2\. For every set you encounter, 
    increment all values of ctr in that range.
3\. Once you have traversed all sets, 
    find the index with the highest value in ctr. 
```

很容易看出复杂度将是 O(N*M)。

谁能提供更好的解决方案？

另一个问题是：是否存在可以在 O(1) 时间内更改一系列值的数据结构？在数组中，要修改 k 个元素，显然需要 O(k) 时间。有更好的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-30T16:59:03.480

将范围的左端视为 +1 大象活着，而将范围的右端视为 -1 大象活着。将这些 +1 和 -1 标记放在数轴上，然后在数轴上按从左到右的排序顺序排列。当你走在数轴上时，跟踪当前活着的大象数量（只需将 +1 和 -1 相加），并将其与活着的最大大象数量和相应年份进行核对。然后你就有了一个很好的 O(n log n) 时间解决方案。

请注意，您必须在簿记方面小心一点，以在当年处理 +1 之前的 -1，或者仅在处理给定年份内的所有数据后更新您的最大值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T18:41:33.713

这是基于[“扫描线”技巧的](https://stackoverflow.com/a/12948498/4279)[@rrenaud 在 Python 中的答案](https://stackoverflow.com/a/14092611/4279)的实现：

```
#!/usr/bin/env python
ranges = [5,10], [6,15], [2,7]

BORN, DIE = 1, 0 # values define sorting order within the same year
events = sorted(event # sort start 'born' and end 'die' events together by year,
                      # process 'die' before 'born' in the same year
                for r in ranges  for event in zip(r, (BORN, DIE)))

max_nelephants = nelephants = 0
prev_year = events[0][0]
for year, born_or_die in events:
    if prev_year != year: # done processing a year
        prev_year = year
        max_nelephants = max(max_nelephants, nelephants)
    nelephants += (born_or_die == BORN) # increase number of alive elephants
    nelephants -= (born_or_die == DIE)  # decrease number of alive elephants
max_nelephants = max(max_nelephants, nelephants)
print(max_nelephants) 
```

# jquery - jQuery 的 each 方法中的 $(this) 和 $(element)

> ID：14092519
> 
> 赞同：1
> 
> 时间：2012-12-30T16:49:18.363
> 
> 标签：jquery, loops, element, this, each

jQuery的“循环”中`$(this)`和（第二个参数）之间是否存在速度差异？`$(elem)``.each()`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T16:50:23.603

不; `this`并且`elem`两者都引用原始 DOM 元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T16:50:43.583

该`elem`参数也设置为`this`，所以不，没有区别。

# php - ZF2，在 Db\SQL 中使用 WHERE

> ID：14092523
> 
> 赞同：1
> 
> 时间：2012-12-30T16:49:59.187
> 
> 标签：php, zend-framework2

我正在尝试使用 ZF2 的 Db\SQL 构建一个 SQL 对象。

下面是我的代码。

```
 $sql = new Sql($this->database);
    $predicate = new Where();
    $query = $sql->select();
    $query->from('sessions');
    $query->columns(array('sessiondata'));
    $query->where($predicate->equalTo('sessionid', $sessionId));
    $query->where($predicate->greaterThan('expire', new Expression("NOW()"))); 
```

如您所见，我正在进行会话阅读。

由于 [last] where 属性，准备在执行时失败：

```
$query->where($predicate->greaterThan('expire', 'NOW()')); 
```

不幸的是，ZF2 没有告诉我失败的原因，我只知道`Statement could not be executed`

我在上面做错了什么？

我认为 prepare 正在尽可能地解释这个东西，因此 mysql 函数的存在`Now()`导致它失败。我该如何度过这个难关？

编辑：实际上，这是失败的执行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T17:32:09.427

尝试调试最终查询。您可以为此使用 mysql 查询记录器。在 my.cnf（或 my.ini）中，您设置：

日志 = "C:/genquery.log"

或者

log = "/var/log/mysql/error.log"

取决于系统。

然后重置mysql服务器，你就可以分析到底发生了什么。

# angularjs - 无法在指令的编译部分访问服务

> ID：14092524
> 
> 赞同：0
> 
> 时间：2012-12-30T16:49:59.590
> 
> 标签：angularjs

JM 在[Convert Angular HTTP.get function to a service](https://stackoverflow.com/questions/13937318/convert-angular-http-get-function-to-a-service)上的 SO 帖子是我迄今为止看到的最好的总结并解释了很多。但是......虽然我的服务在控制器内工作，但我无法在指令中访问它。

[“只是注入它”](https://groups.google.com/forum/?fromgroups=#!topic/angular/ujM_xA5gK_Q)可能是答案，但由于服务是“未定义”，我的指令中对服务的调用仍然失败

我正在写一个窗口管理器。' ... stuff here ... ' 是一个指令。

WindowInfoService 跟踪有关每个窗口的信息（现在是名称和位置）。拖动窗口时，该指令应通知 WindowInfoService 新位置。

访问 WindowInfoService 可以从控制器工作，但不能从指令....有人知道如何解决这个问题吗？我完全被困住了。

**应用定义**

```
var RR = angular.module('roadrunner', 
['login', 'launcher', 'ui.directives', 'authentication', 
'current-user', 'windows', 'windowinfo']); 
```

**这是指令**

```
/* *** WINDOW MANAGER *** */

angular.module('windows', ['windowinfo'])
.directive('rrwin', ['WindowInfoService', function($compile, WindowInfoService)
{
    console.log('in directive');
    var template =  "<div class='win win-base' ui-jq='draggable' "
                    + "ui-options='{handle: " + '".win-titlebar"' + "}'>"
                    +   "   <div class='win-titlebar ui-dialog-titlebar ui-widget-header'>"
                    +   "       <span class='win-title'>{{wa.name}}</span>"
                    +   "       <div role='button' class='win-close'>"
                    +   "           <span class='win-close-icon'>&nbsp;&nbsp;</span>"
                    +   "       </div>"
                    +   "   </div>"
                    +   "   <div class='win-content' ng-transclude>"
                    +   "   </div>"
                    +   "</div>";

    var directive =
    {
        restrict: 'E',
        scope: { wa: '=winAttrs' },  // localName: html-attr-name
        transclude: true,
        compile: function (tElement, tAttr, transclude)
        {
            tElement.html(template);
            return function (scope, element, attr)
            {
                console.log('inner fcn');
                var inner = $(element).children();
                $(inner).css('top', scope.wa.top);
                $(inner).css('left', scope.wa.left);
                $(inner).css('width', scope.wa.width);
                $(inner).css('height', scope.wa.height);

                element.on("dragstop", function (event) 
                {
                    console.log('stop');
                    console.log(event.pageX, event.pageY);
                    var winElem = $(event.srcElement).parent();
                    var h = parseInt($(winElem).css('height'));
                    var w = parseInt($(winElem).css('width'));
                    var t = parseInt($(winElem).css('top'));
                    var l = parseInt($(winElem).css('left'));

                    // this doesn't work!
                    console.log(WindowInfoService.getAllInfo());
                    WindowInfoService.setInfo({ w: w, h: h, t: t, l: l })
                });
            }
        }
    }
    return directive;
}])
.controller(
    "windowMgrController",
    function ($scope, $location, WindowInfoService)
    {
        console.log('windowMgrController');
        $scope.windowList = WindowInfoService.getAllInfo(); // this works!
    }
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T17:00:26.617

你忘了注入 $compile：

```
angular.module('windows', ['windowinfo'])
 .directive('rrwin', ['$compile', 'WindowInfoService', function($compile, WindowInfoService)
 { 
  ... 
```

# python - 搁置：数据库的选择

> ID：14092525
> 
> 赞同：7
> 
> 时间：2012-12-30T16:50:03.383
> 
> 标签：python, database, serialization, persistence, shelve

`shelve` [文档](http://docs.python.org/2/library/shelve.html#restrictions)说：

> 选择使用哪个数据库包（例如 dbm、gdbm 或 bsddb）取决于可用的接口。

那什么意识？如何确定选择哪个包？如何严格定义必须选择哪一个？最好使用什么数据库实现？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-02T18:35:41.590

在这里找到它：
[http ://www.gossamer-threads.com/lists/python/python/13891](http://www.gossamer-threads.com/lists/python/python/13891)

```
import shelve 
import gdbm 

def gdbm_shelve(filename, flag="c"): 
    return shelve.Shelf(gdbm.open(filename, flag)) 

db = gdbm_shelve("dbfile") 
```

*ps*
在链接页面中，有人也在某处发现了这个，但他的链接已失效。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-30T17:09:52.640

我认为没有办法自己指定底层数据库。*shelve*使用*anydbm*并且*anydbm*使用*whichdb*模块，该模块按以下顺序尝试以下底层实现

*   数据库哈希
*   gdm
*   数据库
*   哑巴

您可以使用*Shelf的**shelve.BsdDbShelf*子类来强制使用 bsd*d*b 实现。

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-12T10:39:54.507

> **如何确定选择哪个包？**

内置模块[`whichdb`](https://docs.python.org/2/library/whichdb.html#module-whichdb)可用于此目的。例如：

```
In [34]: db = anydbm.open('test.db', 'c')

In [35]: db['test'] = '123'

In [36]: db.close()

In [37]: import whichdb

In [38]: dir(whichdb)
Out[38]: 
['__builtins__',
 '__doc__',
 '__file__',
 '__name__',
 '__package__',
 '_dbmerror',
 'dbm',
 'os',
 'struct',
 'sys',
 'whichdb']

In [39]: whichdb.whichdb('test.db')
Out[39]: 'dbhash' 
```

* * *

> **最好使用什么数据库实现？**

如果底层数据库引擎是（即名为 的 Python 模块，它与 Unix或 BSD DB 或 GNU GDBM 兼容接口），该[`shelve`](https://docs.python.org/2/library/shelve.html#restrictions)模块会讨论一些限制：`dbm``dbm``ndbm``ndbm`

> [...] 这意味着存储在数据库中的对象（腌制表示）应该相当小，并且在极少数情况下，键冲突可能会导致数据库拒绝更新。

目前尚不清楚这是否仅适用于`ndbm`适当的接口，或者也适用于兼容性接口；“相当小”在数字上意味着什么；以及这些情况有多“罕见”。

实际上，也有 DBM 绑定的 Ruby 有[这样的说法](http://ruby-doc.org/stdlib-2.0.0/libdoc/dbm/rdoc/DBM.html#class-DBM-label-Cautions)：

> 原始 Berkeley DB 的数据限制为 2GB。Dbm 库有时也会限制键/值对的总大小，以及散列到相同值的所有键的总大小。这些限制可以低至 512 字节。也就是说，gdbm 和最新版本的 Berkeley DB 取消了这些限制。

我假设这没什么好担心的，因为它不太可能`ndbm`被使用，并且因为达到这些限制中的任何一个都会（希望）抛出一个描述性异常，此时我们需要进一步解决问题。*

# mysql - 在 modx 中显示来自 mysql blob 的图像

> ID：14092534
> 
> 赞同：0
> 
> 时间：2012-12-30T16:51:15.970
> 
> 标签：mysql, printing, blob, modx

目录有一个 modx 片段（如下）。还有一个 chank（模板），我需要在其中粘贴一段代码来显示图像，存储在 mysql 数据库中，用于目录列表中的每个块。数据调用是 [[+pic]]，但简单地说就是打印一系列 (ascii ? ) 符号。有关于如何从 db 加载和打印（blob）图像的建议，但在我看来，它可以通过多次调用 db 为目录中的每个块同时为多个用户崩溃服务器。

片段：

```
<?php
$path = MODX_CORE_PATH . 'components/zzz/';
$result = $modx->addPackage('zzz', $path . 'model/','wep_');
if (! $result) {
  return 'bla-bla-bla';
}

$sortByDatetime = 'datetime';     //sortby date
$sortByName = 'company_name'; //sortby alphabet

$s = $modx->newQuery('Company');

$s->sortby($sortByDatetime,'ASC'); //first-order sorting
$s->sortby($sortByName,'ASC'); //sub-group sorting

$s->where(array(
   'type'     => $filter,
));
$out = $modx->getCollection('Company',$s);

$output = '';
$num = 0;
foreach ($out as $item) {  //get each $item from $out collection
    $fields = $item->toArray();
    $output .= $modx->getChunk('showAllCompaniesTpl', $fields);  //append parts by template
                $num += 1;
                if ($num == 10) break;
}
return $output; 
```

那么，如果可能的话，如何在几行代码中显示（解码？）图像中的条目集到目录中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T17:15:44.453

把这个放在后面`$fields = $item->toArray();`再试一次

```
$fields['pic'] = '<img src="data:image/png;base64,'.base64_encode($fields['pic']).'"/>'; 
```

如果你的图像没有`png`- 改变`image/png`

# android - 在 Android 上发送和接收消息错误

> ID：14092544
> 
> 赞同：0
> 
> 时间：2012-12-30T16:52:24.777
> 
> 标签：android

我正在尝试编写一个程序，它的某些部分发送和接收消息。问题是当我调用 ReceiveSMS 类时，它给出了这个错误：

> android.content.ActivityNotFoundException：找不到明确的活动类 {ir.hadisoft.paya/ir.hadisoft.paya.ReceiveSMS}；您是否在 AndroidManifest.xml 中声明了此活动？

这是我的接收类：

```
package ir.hadisoft.paya;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.widget.Toast;
import android.telephony.*;
import android.os.Bundle;

public class ReceiveSMS extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {

        if(intent.getAction().equals("android.provider.Telephony.SMS_RECEIVED")) {
            android.util.Log.d("test","test");

            //--- Get the SMS message passed in ---
            Bundle bundle = intent.getExtras();
            SmsMessage[] msgs = null;
            String str = "";

            if (bundle != null)
            {
                //--- Retrieve the SMS message received ---
                Object[] pdus = (Object[]) bundle.get("pdus");
                msgs = new SmsMessage[pdus.length];
                for (int i=0; i<msgs.length; i++){
                    msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);
                    str += "SMS from " + msgs[i].getOriginatingAddress();
                    str += " :";
                    str += msgs[i].getMessageBody().toString();
                    str += "\n";
                }
                //--- Display the new SMS message ---
                Toast.makeText(context, str, Toast.LENGTH_SHORT).show();
            }
        }
    }
} 
```

这是我的 manifest.xml：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="ir.hadisoft.paya"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="7"
        android:targetSdkVersion="15" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE"></uses-permission>
    <uses-permission android:name="android.permission.SEND_SMS"></uses-permission>
    <uses-permission android:name="android.permission.RECEIVE_SMS"></uses-permission>
    <uses-permission android:name="android.permission.READ_SMS" ></uses-permission>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <activity
            android:name=".Paya"
            android:label="@string/title_activity_paya" >

            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity android:name=".Activation"></activity>

        <receiver android:name=".ReceiveSMS" android:enabled="true">
            <intent-filter>
                <action android:name="android.provider.Telephony.SMS_RECEIVED" >
                </action>
            </intent-filter>
        </receiver>
    </application>
</manifest> 
```

这是 sendms 类：

```
package ir.hadisoft.paya;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.graphics.Typeface;
import android.os.Bundle;
import android.telephony.TelephonyManager;
import android.telephony.SmsManager;
import android.view.View.OnClickListener;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class Activation extends Activity implements OnClickListener {
    public String fonts = "BZar.ttf";
    @Override
    protected void onCreate(Bundle savedInstanceState) {

        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activation);
        setFace();
    }

    protected void setFace()
    {
        View view_confirm_activation = findViewById(R.id.btn_confirm_activation);
        view_confirm_activation.setOnClickListener(this);

        View view_return_main = findViewById(R.id.btn_return_main);
        view_return_main.setOnClickListener(this);

        Typeface face = Typeface.createFromAsset(getAssets(), "font/"+fonts+"");

        //-------------------------------------------------

        TextView lbl_activation = (TextView)findViewById(R.id.lbl_activation);
        lbl_activation.setTypeface(face);
        String str_lbl = (String) lbl_activation.getText().toString();
        lbl_activation.setText(PersianReshape.reshape(str_lbl));

        //-------------------------------------------------

        Button btn_confirm_activation = (Button)findViewById(R.id.btn_confirm_activation);
        btn_confirm_activation.setTypeface(face);
        String str_confirm_activation = (String) btn_confirm_activation.getText().toString();
        btn_confirm_activation.setText(PersianReshape.reshape(str_confirm_activation));

        //-------------------------------------------------

        Button btn_return_main = (Button)findViewById(R.id.btn_return_main);
        btn_return_main.setTypeface(face);
        String str_return_main = (String) btn_return_main.getText().toString();
        btn_return_main.setText(PersianReshape.reshape(str_return_main));

        //-------------------------------------------------

        TextView enter_code_first = (TextView)findViewById(R.id.lbl_enter_code_first);
        enter_code_first.setTypeface(face);
        String str_enter_code = (String) enter_code_first.getText().toString();
        enter_code_first.setText(PersianReshape.reshape(str_enter_code));

    }

    protected void send_sms()
    {
        TelephonyManager telephonyManager = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
        telephonyManager.getDeviceId();
        String phoneNumber = "09127517737";
        EditText edit_activation = (EditText)findViewById(R.id.edit_activaiton);
        String serialnumber = edit_activation.getText().toString();

        if(serialnumber.equalsIgnoreCase(""))
        {
            TextView lbl_enter_code_first=(TextView)findViewById(R.id.lbl_enter_code_first);
            lbl_enter_code_first.setVisibility(View.VISIBLE);
        }
        else
        {
            String phoneIMEI = telephonyManager.getDeviceId().toString();
            SmsManager smsManager = SmsManager.getDefault();
            smsManager.sendTextMessage(phoneNumber, null, serialnumber + " " + phoneIMEI, null, null);
            Intent intent2 = new Intent(Activation.this, ReceiveSMS.class);
            startActivity(intent2);
        }
    }

    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        switch(arg0.getId())
        {
            case R.id.btn_confirm_activation:
                send_sms();
                break;

            case R.id.btn_return_main:
                Intent intent1 = new Intent(Activation.this, Paya.class);
                startActivity(intent1);
                break;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T16:57:10.293

您的问题在于您的 SendSMS 类中的这段代码：

```
Intent intent2=new Intent(Activation.this,ReceiveSMS.class);
startActivity(intent2); 
```

接收器不是活动，因此您会得到一个例外 - 您根本无法将接收器作为活动启动，它们不兼容。我什至认为不需要这些行，因为如果您的应用程序正在运行，清单中声明的​​ Receiver 会自动接收 SMS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T16:56:05.527

改变

```
android:name=".ReceiveSMS" 
```

到

```
android:name="ReceiveSMS" 
```

目前，您会自动将包裹放在它前面，并带有点。由于它试图找到一个名为 ReceiveSMS 的活动，但实际上并没有。

# java - 关于允许用户画线的 Java 挑战第 2 部分

> ID：14092551
> 
> 赞同：0
> 
> 时间：2012-12-30T16:53:17.803
> 
> 标签：java, graphics, drawing, awt, mouseevent

[我的问题在Java Challenge on Permitting the User to Draw A Line](https://stackoverflow.com/questions/14088470/java-challenge-on-permitting-the-user-to-draw-a-line#comment19484324_14088470)中有所提及，但是，我仍然遇到困难，因为单击并拖动鼠标时我的应用程序上没有出现任何线条。

回答这个问题肯定会帮助大多数初学者更好地理解图形类和绘图，这是一个通常复杂的过程，尤其是对于初学者。

根据我正在使用的文本（因为我正在自己学习 Java），这是如何使用 Java 画线的示例：

```
/*
 * LineTest
 * Demonstrates drawing lines
 */

import java.awt.*;
public class LineTest extends Canvas {

public LineTest() {
    super();
    setSize(300, 200);
    setBackground(Color.white);
}

public static void main(String args[]) {
    LineTest lt = new LineTest();
    GUIFrame frame = new GUIFrame("Line Test");
    frame.add(lt);
    frame.pack();
    frame.setVisible(true);
}

public void paint(Graphics g) {
    g.drawLine(10, 10, 50, 100);
    g.setColor(Color.blue);
    g.drawLine(60, 110, 275, 50);
    g.setColor(Color.red);
    g.drawLine(50, 50, 300, 200);
}
} 
```

规范是：

```
Create an application that allows you to draw lines by clicking the initial 
point and draggingthe mouse to the second point. The application should be 
repainted so that you can see the line changing size and position as you
are dragging the mouse. When the mouse button is eleased, the line is drawn. 
```

正如您将认识到的，运行此程序不会由用户创建任何图形。我相信由于缺少 mouseReleased 方法而遇到此错误。

任何帮助是极大的赞赏。预先感谢您在此问题上的所有时间和合作。

我回答这个问题的代码是：

```
import java.awt.*;
import java.awt.event.*;

public class LineDrawer2 extends Canvas {

    int x1, y1, x2, y2;

      public LineDrawer2() {
          super();
    setSize(300,200);
    setBackground(Color.white);
      }

public void mousePressed(MouseEvent me) {
          int x1 = me.getX();
    int y1 = me.getY();
          x2 = x1;
    y2 = y1;
    repaint();
}

      public void mouseDragged(MouseEvent me) {
    int x2 = me.getX();
    int y2 = me.getY();
    repaint();
}

public void mouseReleased(MouseEvent me) {
}

      public void paint(Graphics g) {
    super.paint(g);
    g.setColor(Color.blue);
          g.drawLine(x1, y1, x2, y2);
}

public static void main(String args[]) {
    LineDrawer2 ld2 = new LineDrawer2();
    GUIFrame frame = new GUIFrame("Line Drawer");
    frame.add(ld2);
    frame.pack();
    frame.setVisible(true);
}

public void mouseMoved(MouseEvent me) {
}
public void mouseClicked(MouseEvent me) {
}
public void mouseEntered(MouseEvent me) {
}
public void mouseExited(MouseEvent me) {
}

} 
```

PS：我从上一个回复中了解到这是一个旧格式，但是，如果可能的话，请告诉我使用旧格式，我一定会学习新的。我真诚地感谢它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T16:57:25.760

您正在初始化局部变量，而不是在事件处理方法中初始化字段。代替

```
int x2 = me.getX();
int y2 = me.getY(); 
```

它应该是

```
this.x2 = me.getX();
this.y2 = me.getY(); 
```

或者干脆

```
x2 = me.getX();
y2 = me.getY(); 
```

编辑：

另一个问题是，即使你的类有mousePressed()、mouseDragged() 等方法，它也没有实现MouseListener 和MouseMotionListener。最后，它不会给自己添加任何这样的监听器。所以代码应该修改如下：

```
public class LineDrawer2 extends Canvas implements MouseListener, MouseMotionListener {
    ...
    public LineDrawer2() {
        ...
        addMouseListener(this);
        addMouseMotionListener(this);
    } 
```

我的建议：每次你向一个类添加一个方法`mousePressed()`（`@Override`如 这样，如果方法实际上没有覆盖任何方法，编译器将生成编译错误：

```
@Override
public void mousePressed(MouseEvent e) {

} 
```

# java - 为什么在呈现页面后调用 HandlerInterceptorAdapter postHandle 方法

> ID：14092552
> 
> 赞同：2
> 
> 时间：2012-12-30T16:53:24.703
> 
> 标签：java, jsp, spring-mvc, interceptor

我的 Spring MVC Web 应用程序在页面顶部有一个导航菜单，其中包含指向项目列表的链接。从数据库中检索项目列表。此菜单对应用程序中的所有页面通用。目前，在每个控制器中，我检索并存储会话中的项目列表（如果尚未在会话中），以便它在每个页面上都可用。它工作正常，但我觉得应该有更好的方法来做到这一点。为了避免这种冗余，我现在尝试使用 HandlerInterceptorAdapter。我能够让它工作，但并不完美。第一次加载页面时，我没有看到我在会话中设置的对象。但是，如果我刷新页面，我确实会在会话中看到该对象。

我以这种方式创建了我的拦截器：

```
public class MyHandlerInterceptor extends HandlerInterceptorAdapter {
  private MyService myService;

  //Constructor
  public MyHandlerInterceptor(MyService myService) {
        this.myService = myService;
  }

  //Overridden method
  public void postHandle(HttpServletRequest request, 
                         HttpServletResponse response, 
                         Object handler, 
                         ModelAndView modelAndView) throws Exception {
    System.out.println("In posthandle...");

    if (request.getSession().getAttribute("items") == null) {
      request.getSession().setAttribute("items", myService.getCategories());
    }
  }
} 
```

我声明了拦截器：

```
<mvc:interceptors>
  <bean class="com.gyanify.webapp.interceptors.MyHandlerInterceptor"
        autowire="constructor"/>
</mvc:interceptors> 
```

我正在检查 jsp 呈现时是否在会话中设置了对象：

```
...
Session Attributes <br/>
<%
    System.out.println("Printing from the jsp...");
    Enumeration keys = session.getAttributeNames();
    while (keys.hasMoreElements())
    {
      String key = (String)keys.nextElement();
      out.println(key + ": " + session.getValue(key) + "<br>");
    }
%>
... 
```

这样，当我第一次加载页面时，我会在控制台中看到以下打印：

```
...
Returning view....(this is printed from the controller)
Printing from the jsp...
In posthandle...
... 
```

我的理解是在渲染页面之前调用了 posthandle 方法。但是，根据控制台上的输出，我看到jsp是在拦截器的posthandle方法之前渲染的。

谁能帮我理解它为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T20:10:11.373

在进一步调查中，我发现问题出在我配置 spring 上下文 xml 文件的方式上。我有两个文件——一个用于应用程序上下文，另一个用于 Web 上下文。最初，我在应用程序上下文 xml 中定义了组件扫描和 mv:annotation-driven 标签：

```
<context:component-scan base-package="com.webapp" />
<mvc:annotation-driven validator="validator"/> 
```

并在 web 上下文 xml 中定义了我的拦截器。

在调试模式下，我看到拦截器在处理请求后被映射到上下文。

为了使其工作，我将应用程序上下文中的配置更改为以下内容：

```
<context:component-scan base-package="com.webapp">
  <context:exclude-filter type="regex" expression="com\.webapp\.controllers\.*"/>
</context:component-scan> 
```

并将以下内容添加到 Web 上下文 xml：

```
<context:component-scan base-package="com.webapp.controllers" />
<mvc:annotation-driven validator="validator"/> 
```

我仍在试图理解为什么这有效而早期的配置没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T12:54:21.770

这是正常的，因为您在视图渲染器之后在 postHanlde 中设置了会话。所以第一个视图没有数据，在第二页上，因为它在渲染第一页后保存在会话中，你可以看到它。

在 preHandle 方法中编写您的代码，它将按您的意愿工作

# java - 多个小型 Java 数据库事务还是一个大型 Java 数据库事务？哪个更快？

> ID：14092556
> 
> 赞同：0
> 
> 时间：2012-12-30T16:53:58.630
> 
> 标签：java, mysql, database, performance, jdbc

我有一个包含 140 列的 MySQL 表和一个包含大约 80k 行的 txt 文件，即表的 7.5k 条目（行）。

哪个会更快？

“插入 myTable（<140 列名称>）值（<140 列条目>）；” 我应该一次输入一整行吗（每行只有一个数据库事务，但由于有 140 列，单独的插入语句会很长）

或者

“更新 myTable 集 = where = ...;” 逐一输入一列条目（进行许多数据库事务）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T16:57:15.383

我建议您使用批量插入：

```
BULK INSERT List FROM 'c:\Txt.txt' WITH (FIELDTERMINATOR = '","') 
```

这是更清洁的方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T17:04:22.153

运行的提交/查询越少，它就会越快。玩弄不同的块大小。例如插入 x 行并提交。重复直到所有行都完成。大部分性能取决于表上配置的触发器和索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T16:56:41.123

一笔大交易总是比 80k 交易快。

是什么让您相信创建 80k 交易会更快？

# linux - linux 3.7.1 支持 ext2 吗？

> ID：14092557
> 
> 赞同：0
> 
> 时间：2012-12-30T16:54:12.317
> 
> 标签：linux, linux-kernel

我最近在进行一个实验室，我刚刚发现 linux 3.7.1 没有 /include/linux/magic.h。这是否意味着 linux 3.7.1 不支持 ext2？如果我真的需要在magic.h中做一些修改，例如，将 更改`#define EXT2_SUPER_MAGIC 0xEF53`为`#define EXT2_SUPER_MAGIC 0X6666`，并且我有另一个文件需要这个头文件，我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T17:24:25.000

你检查过了吗：

```
include/uapi/linux/magic.h 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-30T17:45:05.207

Linux 3.7.1 绝对支持 ext2。Linux 内核在 1993 年初发布后不久就支持 ext2，并且从未删除过支持。可以构建一个*不*支持 ext2 的工作 Linux 内核，但这不会将其从头文件中删除。

根据您使用的发行版，该文件（和其他 Linux）标头可能位于其他位置。Icarus3的回答可能会解决你的问题；否则，请记住：

1.  可以在多个位置安装 Linux 头文件。
2.  最常见的自动安装位置是`/usr/include/linux`.
3.  其他人在此系统上*手动*安装了它们，他们可能已将它们安装到`/usr/local/include/linux`.

此类文件通常位于目录的`linux`子目录中`include`。所以你可以看看那些地方，从`/usr/include/linux`.

如果这没有帮助，*并且*您*有*一个`uapi`目录的子目录`include`，[那么 Icarus3 的答案](https://stackoverflow.com/users/1919896/icarus3)可能会解决您的问题。

假设您使用的是*具有*包管理器的发行版，请尝试使用特定于发行版的搜索实用程序（即使您无法从本地计算机执行此操作，通常也存在于网络上）来找出哪些包提供名为`magic.h`.

# apache - 使用 beta.* 前缀时将机器人重定向到 robots-beta.txt

> ID：14092564
> 
> 赞同：0
> 
> 时间：2012-12-30T16:54:52.500
> 
> 标签：apache, .htaccess, mod-rewrite

我正在尝试禁用对来自我的 beta.* 子域的所有内容的所有索引。我实际上在服务器上没有 beta/ 目录。该应用程序足够聪明，可以在看到 url 中的 beta 前缀时将用户切换到 beta 代码。

无论如何，我要做的是在使用 beta.* 前缀时将所有机器人重定向到 robots-beta.txt，但我很难让它工作。我已经在我的 htaccess 文件中尝试过这个并尝试修改我的虚拟主机，但似乎没有任何效果。

```
# Disable beta.* indexing
RewriteCond %{HTTP_HOST} ^beta\.sitename\.com$
RewriteRule ^robots.txt$ http://beta.sitename.com/robots-beta.txt [L] 
```

**编辑：** 或者如果在原始 robots.txt 文件中有办法做到这一点，我认为那会更好。就像是？

```
User-agent: *
Disallow: beta.* 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T17:16:28.490

我一直这样设置我的 robots.txt（我使用的是 PHP）：

```
<?
$pos = strpos($_SERVER['HTTP_HOST'], ".gridserver.com"); // this is my temp domain

if ($pos === false) { ?>
    User-agent: *
    Disallow: /admin/
    Disallow: /ajax/

    Sitemap: http://<?= $_SERVER['SERVER_NAME'] ?>/sitemap.xml
<? } else { ?>
    User-agent: *
    Disallow: /
<? } ?> 
```

然后在我的 .htaccess 中：

```
<FilesMatch "^robots.txt$">
  SetHandler php-script
</FilesMatch> 
```

虽然说实话，我很喜欢你的方式！

# javascript - 在上传之前显示选择上传的图像不起作用

> ID：14092565
> 
> 赞同：0
> 
> 时间：2012-12-30T16:54:55.183
> 
> 标签：javascript

我试图在从硬盘驱动器中选择后显示图像，然后再将其发送到服务器（上传）。[我在这个](http://jsfiddle.net/PrNWY/13/)网站上找到了一个小代码，我复制粘贴了它，但它不起作用（它在演示页面上）。我可以选择一个图像，它的名称显示在“选择文件”按钮的右侧，但既不显示图像也不显示大小。我正在拔头发。

整个代码：

```
<!DOCTYPE html>  <!-- Using margin:auto will not work in IE8, unless a !DOCTYPE is declared. -->
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://ogp.me/ns/fb#">

 <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <link href="design3.css" rel="stylesheet" type="text/css"/>

    <script src="jquery-1.8.3.min.js"></script>

<script language="JavaScript">

// Handle file while select a new file
$('#file').change(function () {
    $('#img_size').val((this.files[0].size) / 1000000);
    handleFiles(this.files);
});

// handle files
function handleFiles(files) {
    for (var i = 0; i < files.length; i++) {
        var file = files[i];
        var imageType = /image.*/;
        if (!file.type.match(imageType)) {
            continue;
        }
        var img = document.getElementById('fake_img');
       /* img.src = file;
        img.onload = function () {
        }; */
        var reader = new FileReader();
        reader.onload = (function (aImg) {
            return function (e) {
                aImg.src = e.target.result;
            };
        })(img);
        reader.readAsDataURL(file);
    }
}

function drawAd() 
{
    window.open('http://www.google.com');
}

</script>

</head>
<body> 

    <input type="file" id="file"/>
    <input type="text" id="img_size" />
    <img src="" id="fake_img" />

    <button type="button" onclick="drawAd()">Refresh</button>

</body>
</html> 
```

在 IE 和 Chrome 中测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T17:45:31.090

如果不查看您的其余代码（表单的 HTML），很难确定，但*可能*发生的情况是您的代码在浏览器看到并解析您的 HTML 之前运行。

将您的代码包装为 jQuery“就绪”处理程序：

```
$(function() {
  // your code here
}); 
```

看看是否有帮助。这一行：

```
$('#file').change(function () { 
```

为文件输入上的“更改”事件设置事件处理程序。当它运行时，如果浏览器不知道以“文件”作为其“id”的元素，那么您将不会收到任何错误，但不会发生任何事情。通过延迟该代码直到浏览器看到您的整个文档（这是 jQuery“就绪”包装器所做的），您可以找到“文件”输入。

# android - Android：如何让谷歌地图运行？

> ID：14092567
> 
> 赞同：1
> 
> 时间：2012-12-30T16:55:06.197
> 
> 标签：android, google-maps

我有以下内容：

**地图活动类**

![在此处输入图像描述](../Images/c3120a8ed2dc4d64918ea3b97c701876.png)

**地图活动类 LAYOUT**

![在此处输入图像描述](../Images/4df35d63ae4ba9e90f698c3c021f3653.png)

**清单配置片段**

![在此处输入图像描述](../Images/5283d260704b8567f033f7451be24de6.png)

*.. 注意：我还在«application»标签下包含了地图包。*

***为了获得 API KEY，我做了以下事情：***

**从控制台获取哈希**

![在此处输入图像描述](../Images/5101bc4533642ad75938683fec6cd038.png)

**获取API KEY**

![在此处输入图像描述](../Images/7d1de4203de2df195ed1fb6141000f3b.png)

**主要问题：**

***我看到一个网格而不是地图图像，就像这样***

![在此处输入图像描述](../Images/c5aa179ca607733425e60549a143f872.png)

**其他问题/问题：**

***如何在具有 minSdk=8 和 targetSdk=17 的同时实现 FragmentView（以便能够在布局中放置一些额外的自定义 UI 元素）？我可以在这一系列设备上使用这个标签吗？***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T21:23:41.520

如果您将“android.permission.INTERNET”行放在 Manifest 文件的“应用程序”区域内，则可能会出现问题。尝试将其保留在应用程序标记之外。

万一失败

仔细尝试以下示例：

[http://mobiforge.com/developing/story/using-google-maps-android](http://mobiforge.com/developing/story/using-google-maps-android)

[http://www.jameselsey.co.uk/blogs/techblog/android-how-to-display-a-map-the-easy-way/](http://www.jameselsey.co.uk/blogs/techblog/android-how-to-display-a-map-the-easy-way/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T03:45:59.767

因此，Google Maps API v1 已被弃用，所有 Google Maps 业务现在都以不同的方式完成（如此处所述[）](https://developers.google.com/maps/documentation/android/)。

*   地图现在封装在 MapView 的 MapFragment 类中。
*   您扩展 Activity java 类而不是 MapActivity。
*   地图使用 Google Play 服务 API。

不仅如此（以及令人烦恼的部分） - 在[这里](https://developers.google.com/maps/documentation/android/start)阅读时我到了[这里](http://developer.android.com/google/play-services/setup.html)，它说“***您必须提供一个物理开发设备，您可以在其上运行和调试您的应用程序***”。

话虽如此，如果您想开始学习/使用/测试谷歌地图和其他使用 Google Play 服务 API 的东西，则必须购买 Andorid 驱动的设备。:)

如果我错了，请纠正我！我真的希望我错了。

# c# - 实例方法如何转换为委托？

> ID：14092572
> 
> 赞同：4
> 
> 时间：2012-12-30T16:55:43.787
> 
> 标签：c#, .net, delegates, closures

在委托中如何调用静态方法似乎很简单，因为当调用委托本身时，它们的所有参数都将传递给它们。
但是，当将实例方法添加到委托时，在调用委托期间似乎忽略了“this”参数，因此我只能想象它与委托本身一起保存 - 类似于闭包可以对其他参数。

**问：**当实例方法传递给委托时，编译器是否会创建闭包，或者是否有不同的机制来完成？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-30T16:57:54.390

不。

该类`Delegate`有一个`Target`属性，该属性存储`this`调用方法时要传递的值。
换句话说，a`Delegate`实际上存储*了两*件事：一个函数指针和第一个参数的值。

包含目标的委托称为*封闭委托*，因为它关闭了第一个参数。

事实上，这就是闭包的工作方式。当编译器为委托创建闭包时，它将创建一个类来保存被关闭的变量，并将该类存储为委托的`Target`.

有关更多信息，请参阅我的博客文章：

*   [http://blog.slaks.net/2011/06/open-delegates-vs-closed-delegates.html](http://blog.slaks.net/2011/06/open-delegates-vs-closed-delegates.html)
*   [http://blog.slaks.net/2011/06/delegates-vs-function-pointers-part-4-c.html](http://blog.slaks.net/2011/06/delegates-vs-function-pointers-part-4-c.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T17:01:35.527

看看（底层）Delegate 类。它定义了一个被称为`Target`定义实例的成员。如果是静态方法`Target`，则与类本身相关联。

# android - 在 onDestroy() (Android) 中使用 system.exit(0)

> ID：14092574
> 
> 赞同：2
> 
> 时间：2012-12-30T16:55:48.543
> 
> 标签：android, android-lifecycle

我知道不建议在 Android 应用程序中使用 system.exit(0)，但我想知道在 onDestroy() 中使用它是否可以，因为此时允许应用程序被杀死？

我问的原因与[这个](https://stackoverflow.com/questions/14086808/out-of-memory-error-when-restarting-app-android/14087121#14087121)问题有关。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T17:19:51.357

*   不要依赖`onDestroy`会被调用。在某些情况下，操作系统会在不调用您的`onDestroy`.

当然，这只是一个建议，因为它并不直接适用于您的场景。如果`system.exit(0)`因为应用程序已经被杀死而没有被调用，我会说你没事。;-)

*   如果您`Activity.onDestroy`被调用，则意味着您的进程处于以下两种状态之一：

--操作系统知道的应用程序中没有运行其他组件（`Service`或 a ）。`ContentProvider`这意味着无论如何，您的进程很可能会立即被操作系统杀死，或者如果系统的其他部分/其他应用程序需要物理内存，则将是第一个被回收的进程。因此调用`exit(0)`不会有太大的作用。

-- 系统知道在您的进程中运行的另一个组件。在这种情况下调用`exit()`会终止进程，杀死您的其他组件并可能损坏您的数据。当然，操作系统可能不太关心，但您的用户可能不喜欢它。:-)

*   如果其他应用程序已经用尽了内部 Dalvik 堆限制，那么自愿终止您的进程将无济于事。无论设备有多少物理内存，操作系统都会限制 Dalvik 在任何进程中用于堆分配的内存量。因此，系统可能有一半的内存可用，并且特定应用程序仍然会遇到 OOM。

Dalvik 堆限制是 OEM 可配置的，尽管很少有 OEM 确实努力为他们的设备调整它，并且只使用操作系统默认值。我不记得具体的默认值，但可以肯定地假设每个应用程序允许在低端 Froyo/Gingerbread 上的 16MB 和高端 ICS/JB 手机上的 48MB 之间。哎呀，我会很乐观，将上限提高到 128MB（尽管我还没有听说过这样的设备）。:-)

*   如果您的应用程序的内存使用存在问题（由链接的问题暗示），并且您试图通过在下一次打开活动时强制“干净”平板来解决它，那么这种方法将起作用。有点儿。但只要您的应用程序仅使用活动，它就可以工作。`ContentProvider`在你输入 a或 a的那一刻`Service`，你不能再打电话`exit()`了（正如我上面提到的），你将被迫正确地解决问题。你还不如硬着头皮现在就去做。最简单的方法是确保[`Bitmap.recycle()`](http://developer.android.com/reference/android/graphics/Bitmap.html#recycle%28%29)在完成特定位图后调用。当然，只要您不必在内存中保留比您的内存更多的位图，它就可以工作，但无论如何，这完全是一个完全独立的野兽。:-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-30T17:14:03.070

你不应该调用 sytem.exit(0)，让 android 管理应用程序。如果我了解您有内存泄漏问题。我猜是因为位图。所以看看这个有效地显示位图[http://developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)

如果您在 onDestroy() 方法中调用 system.exit(0)，您将无法在横向和纵向之间切换。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T17:36:54.930

捷径解决方案：当您完成应用程序时，在活动上调用 finish() 而不是 System.exit(0)。

正确的方法是优化应用程序中的位图使用。看到这个
[http://developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T17:17:18.117

您可能最好看一下以下选项：http: [//developer.android.com/reference/android/app/Application.html#onLowMemory%28%29](http://developer.android.com/reference/android/app/Application.html#onLowMemory%28%29)

# java - 从另一个类调用方法时无法运行部分方法

> ID：14092585
> 
> 赞同：0
> 
> 时间：2012-12-30T16:57:02.110
> 
> 标签：java, netbeans

我实现了在 jTextPane 中突出显示单词的方法。如果我从主类调用该方法，一切正常，但如果我从另一个类调用该方法，而循环不起作用。这是我的代码：

```
// Main class with my method, I named it Frame

public void traziJedan(String rijec){
        try{
        Highlighter h = jTextPane1.getHighlighter();
        h.removeAllHighlights();
        String text = jTextPane1.getText();
        String pattern = rijec;
        int pos = 0;

        while ((pos = text.indexOf(pattern, pos)) >= 0) {
                System.out.println(rijec);
                h.addHighlight(pos, pos + pattern.length(), DefaultHighlighter.DefaultPainter);
                pos += pattern.length();

            }

        }
        catch(BadLocationException e){}
    }

// method in another class

private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
        Frame f = new Frame();
        f.traziJedan(jTextField1.getText());
    } 
```

System.out.println(rijec); 我把它放在这里只是为了看看这个方法是否有效，但是这个词不会只在 while 循环中打印出来，如果我把这个命令放在其他任何地方，我会得到正确的输出。这里有什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T17:14:19.277

我猜当您在您的方法中`jTextPane1`分配一个新 Frame: 时，您的初始化不正确。`Frame f = new Frame();``jButton1ActionPerformed`

`Frame`当你使用另一个类的方法时不要分配一个新的，而是传入现有的 Frame 实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T17:07:36.223

您应该`jTextPane1`从 UI 线程更新或任何 UI 组件，您可以使用 invokeLater 或 invokeAndWait

例如

```
SwingUtilities.invokeLater(new Runnable() {
  public void run() {
    // update UI
  }
}); 
```

# iphone - 根据日期在新标签中的详细信息

> ID：14092593
> 
> 赞同：0
> 
> 时间：2012-12-30T16:57:31.160
> 
> 标签：iphone, objective-c, ios

我有 2 个标签

1.`UITableView`与`NSArray`。2.今天的细节。

我有`DetailViewController`

在标签 1 上有水果的名称：

*   柠檬
*   香蕉
*   苹果
*   草莓

当您选择单元格时，`UITableView`您会转到`DetailViewController`

我在标签 2 上的操作将根据日期显示水果。

示例：今天的日期是 8 月 16 日，在选项卡 2 上显示水果柠檬。更多示例：今天的日期是 12 月 21 日，在选项卡 2 上显示水果 Apple。

（水果的细节取自`DetailViewController`

我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T17:54:59.217

你可以做的一件事：

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
//uncomment to get the time only
//[formatter setDateFormat:@"hh:mm a"];
[formatter setDateFormat:@"dd,MMM,YYYY"];
//[formatter setDateStyle:NSDateFormatterMediumStyle];

//get the date today
NSString *dateToday = [formatter stringFromDate:[NSDate date]]; 
```

您可以要求`dateToday`with`isEqualToString`然后决定显示或不显示什么:)

# ruby-on-rails - :public 不再用于避免重载 Module#public，而是使用 :public_folder

> ID：14092600
> 
> 赞同：0
> 
> 时间：2012-12-30T16:58:15.260
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我是rails的初学者。我已经给出了一个项目（https://github.com/cloudspokes/cs-website-cms）。当我使用命令运行它时：rails server。有一个警告

:public 不再用于避免重载 Module#public，使用 :public_folder 代替 /home/ritesh/.rvm/gems/ruby-1.9.3-p327@refinery/bundler/gems/resque-c528f41f384b/lib/resque/ server.rb:16:in `<class:Server>' => Booting Thin => Rails 3.2.8 application starting in development on http://0.0.0.0:3000 => Call with -d to detach => Ctrl-C to shutdown server Exiting /home/ritesh/.rvm/gems/ruby-1.9.3-p327@refinery/gems/restforce-0.1.8/lib/restforce/client.rb:281:in`authenticate!': 没有来自 /home/ritesh/rails_projects/cs-website-cms-master/config/initializers/streaming.rb:11:in 的身份验证中间件 (RuntimeError)

和错误没有身份验证中间件存在。谁能帮我摆脱这个警告和错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:58:25.100

您可能应该运行`foreman start -p 3000`而不是`rails s`命令。正如他们的自述文件中明确提到的那样。

谢谢， 迪内什

# python - get_absolute_url - Django 的站点地图

> ID：14092601
> 
> 赞同：10
> 
> 时间：2012-12-30T16:58:20.500
> 
> 标签：python, django

我想在 Django 中启用站点地图生成，所以我执行以下操作，[这里如何解释](https://docs.djangoproject.com/en/dev/ref/contrib/sitemaps/#example)

模型：

```
class Car(models.Model):
    def __unicode__(self):
            return self.name
    name = models.CharField('Name', max_length=10)
    active = models.BooleanField() 
```

网址：

```
car_dict = {
    'queryset': Car.objects.filter(active=1),
}

sitemaps = {
    #'flatpages': FlatPageSitemap,
    'car': GenericSitemap(car_dict, priority=0.5),
} 
```

但是我在 /sitemap.xml 上有一个错误：**'Car' object has no attribute 'get_absolute_url**。如何解决？我需要创建一些类，[这里](https://docs.djangoproject.com/en/dev/ref/contrib/sitemaps/#a-simple-example)是如何解释的？或者我只能使用 GenericSitemap？我评论了“平面页面”，因为我不使用它们。谢谢。

更新 1：在 URLS.py 中：

```
url(r'^car/$', 'cars.views.shop'),
    url(r'^car/(?P<car_id>\d+)/$', 'cars.views.producer'), 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-30T17:08:18.300

您必须为模型定义[get_absolute_url](https://docs.djangoproject.com/en/1.9/ref/models/instances/#get-absolute-url)：

```
from django.core.urlresolvers import reverse

class Car(models.Model):
    name = models.CharField('Name', max_length=10)
    active = models.BooleanField()

    def __unicode__(self):
        return self.name

    def get_absolute_url(self):
        return reverse('car_details', kwargs={'name':self.name}) 
```

请根据您定义的 URL 更新 URL 反向方法。

# file-upload - 通过 simpleimage.php 上传图片

> ID：14092604
> 
> 赞同：0
> 
> 时间：2012-12-30T16:58:26.443
> 
> 标签：file-upload, image-uploading

我是 php 新手，我正在尝试使用 Simpleimage.php，但他们曾经打印错误图像类型的错误。

邮政编码想象

```
 $image = new SimpleImage();
      $image->load('$_FILES[file][tmp_name]');
      $image->resize(250,400);
      $image->save('http://localhost:8080/GuitarShop/images/chitarre/ciao.jpg'); 
```

我哪里错了？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T17:09:10.843

我想你想把变量的值放在加载方法中，而不是变量的名称，所以试试这个：

```
$image->load($_FILES['file']['tmp_name']); 
```

你应该在数组索引中使用'。

打开显示错误：`error_reporting(E_ALL)`并始终尝试修复它们。

# apache - PHP move_uploaded_file 权限被拒绝，虽然它似乎应该

> ID：14092607
> 
> 赞同：0
> 
> 时间：2012-12-30T16:58:33.277
> 
> 标签：apache, file-upload, php

我正在学习 PHP 并尝试使用以下代码上传文件：

```
$destination = "uploads/".$_FILES['userfile']['name'];
move_uploaded_file($_FILES['userfile']['tmp_name'], $destination); 
```

但我面临

> 无法打开流：权限被拒绝

我可以将“上传”目录的权限更改为每个人都可写，但这当然是不好的做法。文件夹权限为：

```
drwxr-xr-x 2 loai loai 4096 Dec 30 12:44 uploads 
```

和运行`ps aux | grep httpd`产量

```
loai      6728  0.0  0.0   4368   832 pts/1    S+   18:37   0:00 grep --colour=auto httpd 
```

那么apache进程不应该能够在给定目录中写入吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T17:51:02.627

首先，正如对问题的评论中所述，您的`ps`输出显示的是`grep`进程本身，而不是`httpd`进程（或任何您的 Web 服务器）。所以这可能意味着您的 Web 服务器正在以不同的用户身份运行，而不是作为`loai`. 更改`uploads`文件夹的所有权或使其组可写，然后将 Web 服务器的用户添加到适当的组

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T17:04:46.567

您可以尝试使用完整路径作为目的地。就像是：

```
/var/www/project/uploads 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T17:45:12.853

如果您可以使用相对路径从该目录中读取，则只需 chown 它：

```
cd $path_to_your_site_root
chown -R loai:loai uploads 
```

# php - PHP/MySQL：如何在数据库中保存或插入选定的单选按钮？

> ID：14092608
> 
> 赞同：-2
> 
> 时间：2012-12-30T16:58:52.157
> 
> 标签：php, mysql, insert, radio-button, save

我有一个有 n 行的表。每行都有一个名称 [来自 Excel 文件] 和 2 组单选按钮。我应该如何在数据库中保存或插入选定的单选按钮？

我的数据库的结构是：id、name、vote_for_mayor、vote_for_vmayor

这是我的php代码。

```
echo '<form name="electionForm" action="submit.php" method="post" onreset="updateButCount(event);">
<button type="submit" value="Submit">Submit</button>

<table id="election" onclick="updateButCount(event);">
list($cols,) = $xlsx->dimension();
$var=0;
$var1=0;
foreach( $xlsx->rows() as $k => $r) {
    $var++;
    $var1++;
    <tr>
        <td>'.$k.'</td>
        <td>'.( (isset($r[0])) ? $r[0] : '&nbsp;' ).'</td>  //names
        <td><input type = "Radio" Name ="vote'.$var.'" value= "pacada"></td>
        <td><input type = "Radio" Name ="vote'.$var.'" value= "toledo"></td>
        <td><input type = "Radio" Name ="vote1'.$var1.'" value= "apostol"></td>
        <td><input type = "Radio" Name ="vote1'.$var1.'" value= "abdul"></td>
    </tr>
}
</table>
</form>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T17:26:04.503

将 HTML 更改为：

```
 <td><input type = "Radio" Name ="vote['.$var.']" value= "pacada"></td>
    <td><input type = "Radio" Name ="vote['.$var.']" value= "toledo"></td>
    <td><input type = "Radio" Name ="vote1['.$var.']" value= "apostol"></td>
    <td><input type = "Radio" Name ="vote1['.$var.']" value= "abdul"></td> 
```

然后在处理表单时，变量`$_POST['vote']`和`$_POST['vote1']`将是包含每行单选按钮值的数组。您可以遍历它们并将它们插入数据库。

# neo4j - 在 neo4j 中，我可以获得不那么冗长的 REST api 响应吗

> ID：14092613
> 
> 赞同：3
> 
> 时间：2012-12-30T16:59:21.440
> 
> 标签：neo4j

1.  有没有一种方法可以在 neo4j 中获得不那么冗长的 rest api 响应，也许只有节点数据？在每个请求上发送所有额外的数据似乎有点浪费带宽。

2.  为什么所有的元数据都包含在响应中？例如，基本 api url 在整个过程中都是重复的，一旦你有了节点 ID，就可以可靠地预测所有属性的 url，比如 self、properties、relationship 等……它们看起来不像是非常不稳定的 url。

* * *

```
{
      "extensions" : {
      },
      "paged_traverse" : "http://localhost:7474/db/data/node/183/paged/traverse/{returnType}{?pageSize,leaseTime}",
      "outgoing_relationships" : "http://localhost:7474/db/data/node/183/relationships/out",
      "traverse" : "http://localhost:7474/db/data/node/183/traverse/{returnType}",
      "all_typed_relationships" : "http://localhost:7474/db/data/node/183/relationships/all/{-list|&|types}",
      "all_relationships" : "http://localhost:7474/db/data/node/183/relationships/all",
      "property" : "http://localhost:7474/db/data/node/183/properties/{key}",
      "self" : "http://localhost:7474/db/data/node/183",
      "outgoing_typed_relationships" : "http://localhost:7474/db/data/node/183/relationships/out/{-list|&|types}",
      "properties" : "http://localhost:7474/db/data/node/183/properties",
      "incoming_relationships" : "http://localhost:7474/db/data/node/183/relationships/in",
      "incoming_typed_relationships" : "http://localhost:7474/db/data/node/183/relationships/in/{-list|&|types}",
      "create_relationship" : "http://localhost:7474/db/data/node/183/relationships",
      "data" : {
      }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T09:29:35.873

发送的信息是 HTTP API 中内置的 REST 发现机制的一部分。更改此设置会破坏许多现有的客户端软件，因为这些值被用作“有根据的猜测”的替代品。

现有服务器*无法不*生成此数据，但如果它只是您所追求的节点属性，则`http://localhost:7474/db/data/node/183/properties`URI 只会为您提供一组简单的键值对。

确实，URI 本身似乎并不是特别不稳定。但是，如果这些 URI 在未来的服务器版本中发生变化，那么遵循发现机制的客户端软件将受到保护，不会受到这种变化的影响。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-30T23:44:08.913

您总是可以编写自己的[服务器插件](http://docs.neo4j.org/chunked/milestone/server-plugins.html)，以您想要的格式提供数据。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-31T11:10:51.283

如果您使用 Cypher，您可以通过不返回完整节点/rels 而是返回您需要的值来减少详细程度，请参阅[http://docs.neo4j.org/chunked/snapshot/rest-api-cypher .html](http://docs.neo4j.org/chunked/snapshot/rest-api-cypher.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-18T01:18:21.410

当我在寻找同样的东西时，我遇到了这个悬而未决的问题，所以我知道我可以通过插入我的解决方案来帮助*别人。*[试图解释 Node-Neo4j API](https://stackoverflow.com/questions/24195685/trying-to-interpret-the-node-neo4j-api)

# php - 从 PHP 数组到表单

> ID：14092617
> 
> 赞同：-2
> 
> 时间：2012-12-30T17:00:19.780
> 
> 标签：php, html, forms, foreach

我有一个 PHP 函数，可以自动存储各种对象的位置。

```
$(function(){
    $("#sortable").sortable();
    $("#sortable").disableSelection();
    $('#btn').click(function(){
        //var dataItem = $("#sortable").sortable("serialize");
        //alert(dataItem);

        $.ajax({
            url: 'save-sorting-position.php',
            data : dataItem,
            success: function(data) {                
                alert('Positions saved');
            }
        });
    });

}); 
```

然后将它们存储在 save-sorting-position.php 中，其中包括：

```
<?php 
$arr = unserialize($_REQUEST["item"]); 
foreach($arr as $index => $position)
{
    //store the position here
}
?> 
```

我想将此数组传递给表单。我尝试使用这样的东西（以实际形式）：

```
<?php 
foreach($position as $pos)
{
    echo '<input type="hidden" name="item[]" value="' . $position . '>' 
} 
?> 
```

但事情并没有成功。我错过了什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T17:03:41.080

首先，在这里您要覆盖原始`$position`变量：

```
foreach($position as $position) 
```

喜欢：

```
foreach($position as $pos) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T17:07:39.400

```
<?php 
foreach($position as $pos)
{  echo '<input type="hidden" name="item[]" value="' . $pos . '">'; } ?> 
```

**句法**

```
foreach($arr as $val) 
```

您错误地呼应了 $position 而不是 $pos

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T17:08:27.227

在 echo 语句的末尾添加一个分号，并且您已经开始了 value = 的双引号，但您没有结束它。纠正那个

```
<?php 
foreach($position as $pos)
{
    echo '<input type="hidden" name="item[]" value="' . $pos . '" />'; 
} 
?> 
```

在 foreach echo 语句中尝试将其用作 $pos 而不是 $position

# java - Java 中的 KeyEvent 常量

> ID：14092625
> 
> 赞同：0
> 
> 时间：2012-12-30T17:00:45.547
> 
> 标签：java, constants, keyevent

我遇到了这段代码：

```
 private boolean right = true;
    public void keyPressed(KeyEvent e) {

                    int key = e.getKeyCode();

                    if ((key == KeyEvent.VK_LEFT) && (!right)) {
                        left = true;
                        up = false;
                        down = false;
                    }

    } 
```

据我了解，名为 getKeyCode 的 getter 方法以整数形式返回一个键。程序员是否必须了解 KeyEvent.VK_LEFT 的实际数值？或者我应该把它当作一个黑匣子而不关心和担心它是如何实现的而只是使用它？

显然，在查看 Java API 之后，与 VK_LEFT 关联的值是 37。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T17:02:51.567

关于这些常量的要点是您不必知道实际的数值。您可以使用 a 轻松获得它，`println`但您不应该这样做（您不能确保该值在未来的版本中不会改变）。

将它们视为黑匣子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T17:06:56.893

永远不要担心任何键的关联值。只需使用[`KeyEvent`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/awt/event/KeyEvent.java)类静态变量。

```
 public static final int VK_LEFT = 0x25; 
```

# c - 是否可以在 C 程序中硬编码共享库位置？

> ID：14092627
> 
> 赞同：7
> 
> 时间：2012-12-30T17:00:57.297
> 
> 标签：c, shared-libraries

通常，程序（在 Linux 中）使用 LD_LIBRARY_PATH 来定位它们的共享库，但我想使用自定义路径，而不是永久更改 LD_LIBRARY_PATH。

基本上，一个 bash-wrapper 可以很容易地实现它：

```
#!/bin/sh
export LD_LIBRARY_PATH=/my_lib_path/
/my_bin_path/myprogram $* 
```

（Bash 仅在此脚本中更改 LD_LIBRARY_PATH，而不是永久更改）

我想知道是否有可能**在一个单一的可执行文件**中用纯 C 语言做同样的事情而没有丑陋的 bash-hack。所有路径和库的确切名称在编译时都是已知的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-30T17:03:07.237

`-rpath`将选项传递给`ld`，或通过您的编译器`-Wl,-rpath`。它允许您扩展搜索路径。它通常由希望从某个插件目录加载模块的可执行文件使用。您可以通过此方法添加任意数量的目录。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-30T17:02:39.910

您不能`LD_LIBRARY_PATH`在运行时更改，动态加载程序在程序执行时读取一次并且不再检查它，您可以使用[dlopen()](http://linux.die.net/man/3/dlopen)代替自己加载共享库：

```
dlopen("/path/to/shared/lib.so", RTLD_LAZY); 
```

这仅在您加载库并`dlsym()`在运行时使用来查找符号时才有效，否则如果您调用库中的函数，则必须在加载时解析这些引用，并且 AFAIK 您必须使用类似 bashscript 的东西。

注意：如果您重新执行该过程，可以在运行时更改`LD_LIBRARY_PATH`，我刚刚测试过它，它似乎工作，但它非常hackish，它可能是唯一的方法`C`：

```
void *handle;
// first time check if path is not set
if (getenv("LD_LIBRARY_PATH")==NULL) {
    //set it and re-execute the process
    setenv("LD_LIBRARY_PATH", "/path/to/lib/", 1);
    execl(argv[0], argv[0], NULL);
}
// open the shared library the second time
handle = dlopen("test.so", RTLD_LAZY);
printf("%p\n", handle);
dlclose(handle); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-30T17:07:40.143

正如其他人所说，链接程序时，您可以使用`-Wl,-rpath`将特定路径添加到应用程序的库搜索路径。但是，如果您只想对特定库的路径进行硬编码，请在链接时使用该路径，而不是使用该`-l`选项。例如，代替`-lfoo`，只需`/opt/foo/lib/libfoo.so.1`在链接命令行上使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T17:03:22.633

我认为这在执行时是不可能的：在执行程序之前加载库......

但是您可以通过将选项传递`-rpath`给链接器来在编译时执行此操作

# iphone - iOS：如何区分实际应用程序与从 kinfo_proc 获得的正在运行的进程列表？

> ID：14092632
> 
> 赞同：0
> 
> 时间：2012-12-30T17:01:20.650
> 
> 标签：iphone, ios

我指的是这个链接： [我们可以检索当前在 iPhone 和 iPad 上运行的应用程序吗](https://stackoverflow.com/questions/4312613/can-we-retrieve-the-applications-currently-running-in-iphone-and-ipad)

结果返回一个正在运行的进程列表。但是，我只需要 iPhone 或 iPad 上的实际应用程序（用户可以启动和控制的应用程序）。这怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-11T09:14:12.097

实际上，您可以获得已安装应用程序的列表，以及安装/卸载的事件通知，但使用私有 API。

查看首选项应用程序以了解如何操作。我现在不能告诉你获取它们的方法，但几个月前我从那个地方得到了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T17:31:22.027

**您无法获取用户已安装的其他应用程序的列表。**确定进程信息与确定“用户可以启动和控制”的应用程序完全不同。

如果您需要启动特定的应用程序，您可以查看它是否支持自定义 url 协议，但您无法查询整个设备的应用程序。

# asp.net-mvc-3 - 如何转换/存储多个 ENUM 选择？

> ID：14092635
> 
> 赞同：1
> 
> 时间：2012-12-30T17:01:50.323
> 
> 标签：asp.net-mvc-3, nhibernate

我可以使用以下代码将 a 转换`enum`为 a 。`string`但是，它只存储一个选定的值。在选择了两个值的情况下，当我使用 NHibernate 存储它时，它会被截断。

这是我的代码：

```
MyEnum { One, Two, Three, Four, Five }

private static readonly string[] myEnum =
    Enum.GetNames(typeof(MyEnum));
public string MyProperty
{
    get {
        var value = new MyEnum();
        int i = (int)value;
        return i >= 0 && i < myEnum.Length ?
            myEnum[i] : i.ToString(); }
    set { 
        Record.MyProperty= value == 
            null ? null : String.Join(",", value); }
} 
```

`Record`只是`public virtual string MyProperty { get; set; }`

任何人都可以提供我将如何存储的示例，例如以逗号分隔的形式，`enum`选择多个（例如，用户选择“一、二、五”并且所有三个都存储在数据库中）？

**更新：**

我正在尝试在以下位置执行此操作`get{}`：

```
foreach (int i in Enum.GetValues(typeof(MyEnum)))
{
    return i >= 0 && i < myEnum.Length ? myEnum[i] : i.ToString();
} 
```

但我得到一个`not all code paths return a value`错误。

**问题更新：**

如果我用两个这样做`string`：

```
part.MyProperty = record.MyProperty; 
```

使用`IEnumerable<MyEnum>`@Jamie Ide 下面的答案将不起作用，因为我无法转换`string`为`MyEnum`.

我将如何编写最后一部分以`IEnumerable<MyEnum>`从以下答案中的@Jamie Ide 获取代码才能工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T15:33:42.647

正如我在评论中提到的，除非绝对要求将枚举存储为字符串，否则我建议使用`[Flags]`属性设置枚举并创建将枚举存储为 int 的约定。这是我使用的（注意我使用的是 FluentNH）：

**公约**

```
public class EnumConvention : IUserTypeConvention
{
    public void Accept(IAcceptanceCriteria<IPropertyInspector> criteria)
    {
        // You can use this if you don't want to support nullable enums
        // criteria.Expect(x => x.Property.PropertyType.IsEnum);

        criteria.Expect(x => x.Property.PropertyType.IsEnum ||
            (x.Property.PropertyType.IsGenericType &&
             x.Property.PropertyType.GetGenericTypeDefinition() == typeof(Nullable<>) &&
             x.Property.PropertyType.GetGenericArguments()[0].IsEnum)
            );
    }

    public void Apply(IPropertyInstance target)
    {
        target.CustomType(target.Property.PropertyType);
    }
} 
```

**枚举**
请注意，您必须小心设置值以保持按位比较正常工作。

```
// Note I use long to support enough enum values
[Flags]
public enum MyEnum : long
{
    Foo = 1,
    Bar = 1 << 1,
    Baz = 1 << 2
} 
```

我相信，除此之外，你不应该做任何事情。无需迭代设置或检索，什么都没有。要测试值是否存在，您可以`HasFlag()`在枚举上使用扩展方法。

## 更新

要修改 MvcGrabBag 代码以支持这种枚举，您需要将`GetItemsFromEnum`方法更改如下：

```
public static IEnumerable<SelectListItem> GetItemsFromEnum<T>(T enumeration = default(T)) where T : struct
{
    FieldInfo[] fields = enumeration.GetType().GetFields(BindingFlags.Public | BindingFlags.Static);

    return from field in fields
                let value = Enum.Parse(enumeration.GetType(), field.Name)
                let descriptionAttributes = field.GetCustomAttributes(typeof(DescriptionAttribute), true)
                select new SelectListItem
                {
                    Text = descriptionAttributes.Length > 0
                                ? ((DescriptionAttribute)descriptionAttributes[0]).Description
                                : field.Name,
                    Value = Convert.ToInt64(value).ToString(),
                    Selected = (Convert.ToInt64(enumeration) & Convert.ToInt64(value)) == Convert.ToInt64(value)
                };
} 
```

请注意，我将其保留为通用只是因为我不知道该工具包的其他方面依赖于该签名。不过，您可以看到这不是必需的——您可以删除`<T>`并拥有类似的签名`public static IEnumerable<SelectListItem> GetItemsFromEnum(Enum enumeration)`，它会正常工作。

另请注意，此代码使用我的支持从`Description`属性派生的名称的约定。我用它来让我的标签更易于阅读。枚举看起来像这样：

```
[Flags]
public enum MyEnum : long
{
    [Description("Super duper foo")]
    Foo = 1,
    [Description("Super duper bar")]
    Bar = 1 << 1,
    // With no description attribute it will use the ToString value
    Baz = 1 << 2
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T14:35:39.207

这是一个快速而肮脏的解决方案。在此解决方案中，_myEnumString 将被映射为私有字段并存储在数据库中。如评论中所述，可以使用另一个表将数组存储为集合，如本问题的答案所示，[或](https://stackoverflow.com/questions/606607/mapping-collection-of-strings-with-nhibernate)在本问题的一个表[中](https://stackoverflow.com/questions/4768788/what-nhibernate-mapping-is-used-for-string-in-an-entity)。

```
 public enum MyEnum { One, Two, Three, Four, Five }

public class MyClass
{
    private string _myEnumString;

    public IEnumerable<MyEnum> MyEnums
    {
        get 
        { 
            return Array.ConvertAll(_myEnumString.Split(','), s => (MyEnum)Enum.Parse(typeof(MyEnum), s));
        }
        set
        {
            _myEnumString = string.Join(",", value.Select(v => v.ToString()));
        }
    }

} 
```

更新

假设record.MyProperty 和part.MyProperty 都是MyEnum 名称的分隔字符串（例如“一、二、三”），那么您可以映射MyProperty 并创建一个只读属性以返回MyEnum 的集合。

```
public class MyClass
{
    public string MyProperty { get; set; }

    public IEnumerable<MyEnum> MyEnums
    {
        get 
        { 
            return Array.ConvertAll(MyProperty.Split(','), s => (MyEnum)Enum.Parse(typeof(MyEnum), s));
        }
    }

} 
```

# linux - 为什么我的 git 自动更新 Expect 脚本不起作用？

> ID：14092636
> 
> 赞同：6
> 
> 时间：2012-12-30T17:02:01.650
> 
> 标签：linux, git, bash, github, expect

我想制作一个脚本来更新我所有的 GitHub 存储库。

我只需要输入我的用户名和密码，脚本将通过一个存储库列表，调用`git push`并通过补充的 Expect 脚本提供必要的信息。

这是我的 bash 脚本：

```
#! /bin/bash

echo "Updating GitHub projects from project_list.txt."
echo

read -p "GitHub username: " un
read -p "GitHub password: " -s pw

echo
echo

while read line
do
    eval dir=$line
    echo "Updating:" $dir"."
    cd $dir
    $SF/githubexpect $un $pw
    echo
    echo
done < $SF/project_list.txt 
```

`$SF`是一个全局环境变量，其中包含我的脚本文件夹的绝对路径。

这是 githubexpect 脚本：

```
#! /usr/bin/expect

set un [lindex $argv 0]
set pw [lindex $argv 1]

spawn git push

expect "Username"
send $un\n

expect "Password"
send $pw\n 
```

当我运行 bash 脚本时，事情按预期进行。

1.  我被提示输入信息。
2.  脚本成功启动并继续读取`project_list.txt`文件。
3.  一旦它在存储库的目录中找到自己，它就会调用 githubexpect 脚本并*正确*传递信息（我已经对此进行了测试）。
4.  githubexpect 正确生成`git push`。
5.  它会提示输入（我在控制台中看到了这个）。
6.  它确实提供了我的信息（同样，我也看到了这个）。
7.  然后它就像什么都没发生一样继续到下一个存储库。**<-- 错误！**

我怀疑 githubexpect 脚本可能是`git push`相对于自身产生的，而不是当前脚本正在执行的目录，因此 git 甚至找不到存储库。这可能是错误的，因为 githubexpect 所在的脚本文件夹也是一个存储库。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-30T17:11:59.503

您应该发送`\r`而不是`\n`. 然而真正的问题是你不要等待`git push`完成。将此添加为期望脚本的最后一行

```
expect eof 
```

# iphone - 为什么 Facebook nslog 在设备上说不可用

> ID：14092637
> 
> 赞同：0
> 
> 时间：2012-12-30T17:02:07.943
> 
> 标签：iphone, objective-c, ios, xcode

```
 -(IBAction)faceBook:(id)sender{

  if([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]) {

SLComposeViewController *controller = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];

SLComposeViewControllerCompletionHandler myBlock = ^(SLComposeViewControllerResult result){
    if (result == SLComposeViewControllerResultCancelled) {

        NSLog(@"Cancelled");

    } else

    {
        NSLog(@"Done");
    }

    [controller dismissViewControllerAnimated:YES completion:Nil];
};
controller.completionHandler =myBlock;

[controller setInitialText:@"#VOX"];
[controller addURL:[NSURL URLWithString:@""]];
[controller addImage:[UIImage imageNamed:@""]];

[self presentViewController:controller animated:YES completion:Nil];

 }
  else{
NSLog(@"UnAvailable");
}

 } 
```

您好，我想弄清楚为什么我的 iOS 设备在 nslog 中显示不可用，但这种方法在模拟器上运行良好。谁能确认服务已关闭？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T17:23:41.780

您的设备上似乎没有设置 Facebook 帐户。正如[文档](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/SLComposeViewController_Class/Reference/Reference.html)所述：

* * *

**isAvailableForServiceType**

返回值 返回一个布尔值，指示服务是否可访问以及是否设置了至少一个帐户。

# java - 纸牌游戏 - 玩家手牌选择问题

> ID：14092638
> 
> 赞同：0
> 
> 时间：2012-12-30T17:02:08.170
> 
> 标签：java, oop, sorting

我们正在制作一个简单的 52 张纸牌游戏。我们在处理、洗牌和存储牌时遇到了很多麻烦。应向每位玩家发 5 张牌。该游戏类似于Hearts，但每个玩家只能获得5张牌。到目前为止，这是我们的代码：

```
 int[] deck = new int[52];
    String[] suits = { "Spades", "Hearts", "Diamonds", "Clubs" };
    String[] ranks = { "A ", "2 ", "3 ", "4 ", "5 ", "6 ", "7 ", "8 ",
            "9 ", "10", "J ", "Q ", "K " };

    // Initialize the cards
    for (int i = 0; i < deck.length; i++)
        deck[i] = i;

    // Shuffle the cards
    for (int i = 0; i < deck.length; i++) {

        // Generate an index randomly

        int index = (int) (Math.random() * deck.length);
        int temp = deck[i];
        deck[i] = deck[index];
        deck[index] = temp;

    }

    // Display the first five cards
    System.out.println("player 1 has:");
    for (int i = 0; i < 5; i++) {
    String suit = suits[deck[i] / 13];
    String rank = ranks[deck[i] % 13];
    selectionSort(deck);
    System.out.println("Card number " + deck[i] + " : " + rank + " of "
                + suit);

    }

    int player1[] = deck;

    // Display the first five cards
    System.out.println("\n" + "player 2 has:");
    for (int i = 5; i < 10; i++) {
    String suit = suits[deck[i] / 13];
    String rank = ranks[deck[i] % 13];
    System.out.println("Card number " + deck[i] + " : " + rank + " of "
                + suit);

    }

    int player2[] = deck;

    // Display the first five cards

    System.out.println("\n" + "player 3 has:");
    for (int i = 10; i < 15; i++) {
    String suit = suits[deck[i] / 13];
    String rank = ranks[deck[i] % 13];

    System.out.println("Card number " + deck[i] + " : " + rank + " of "
    + suit );

    }
    int player3[] = deck;

}

public static void selectionSort(int[] deck) {

    for (int i = 52; i < deck.length - 1; i--){
    int currentMax = deck[i];
    int currentMaxIndex = i;

    for (int j = i + 1; j < deck.length; j++) {
        if (currentMax > deck[j]) {
            currentMax = deck[j];
            currentMaxIndex = j;
        }}
    if (currentMaxIndex != i) {
        deck[currentMaxIndex] = deck[i];
        deck[i] = currentMax;

        }
    }
}
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T18:03:29.780

使“卡片”成为一个对象。

这将大大简化您的代码。与其拥有一个字符串数组，不如在每个卡片对象中使用 2 个字符来表示等级和花色。

然后你可以制作“甲板”一系列卡片。

让玩家也有一个对象，有自己的卡片阵列。

如果你愿意，你甚至可以让 deck 成为一个对象，这样你就可以调用

```
deck.shuffle(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T19:13:42.550

好的，我认为从长远来看，这将对您有所帮助。我看了你的代码大约两秒钟，发现它有一些严重的结构问题。您应该从这里开始：

```
public enum Suit
{
     CLUBS, SPADES, HEARTS, DIAMONDS
} 
```

* * *

```
public enum Value
{
    TWO, THREE, FOUR, FIVE, SIX, SEVEN, EIGHT, NINE, TEN, JACK, QUEEN, KING, ACE
} 
```

* * *

```
public class Card
{
    private Value value;
    private Suit suit;

    public Card(Suit theSuit, Value theValue)
    {
        suit = theSuit;
        value = theValue;
    }

    public Value getValue()
    {
        return value;
    }

    public Suit getSuit()
    {
        return suit;
    }
} 
```

现在，一旦我们建立了基础，我们也可以说一手牌和一副牌非常相似，因为它们都是一叠牌，所以我们应该为它们建立一个基础：

```
public class CardStack
{
    public ArrayList<Card> cards;

    public CardStack()
    {
        cards = new ArrayList<Card>();
    }

    public Card draw()
    {
        if(cards.size() > 0)
        {
            Card card = cards.objectAt(cards.size() - 1);
            cards.remove(card);
            return card;
        }

        return null;
    }

    public void addCard(Card card)
    {
        cards.add(card);
    }
} 
```

现在剩下的由你决定，Deck 和 Hand 都应该扩展 CardStack。抱歉，答案很长，但从长远来看，这将对您有所帮助。如果结构错误，程序将永远无法正常运行。你显然应该有一个 Player 类，它应该有一个 Hand 实例和你的 Game 类，或者任何应该有一个 deck 实例的东西。套牌应该有洗牌和重置的方法，手真的只需要像一个清晰的肉棒。我希望这对你有所帮助！祝你好运！

* * *

更新

如果您不知道枚举是什么，这里有更多关于枚举的信息：

*   [http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)

以下是一些通用的 OOP 信息：

*   [http://docs.oracle.com/javase/tutorial/java/concepts/](http://docs.oracle.com/javase/tutorial/java/concepts/)

如果您阅读了这两篇文章，您的代码将大大改进。如果您需要更多帮助，我可以发布更多代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T18:36:48.513

正如其他人在评论和答案中指出的那样，可以通过使其面向对象来改进设计。

我想我理解这个意图：首先创建一个套牌并洗牌。之后，前 5 个元素`deck`代表玩家 1 的手牌。接下来的 5 个元素代表玩家 2 的手牌，以此类推。

在循环内打印玩家 1 的手时，`selectionSort`会调用它。该方法`selectionSort`对整个`deck`数组进行排序。仔细检查`selectionSort`表明它什么也没做！修复后`selectionSort`，您将在输出中看到一张随机牌，然后是最后一套（俱乐部）的最后四张牌。

我假设您尝试通过`selectionSort`在打印玩家 1 的手的循环中调用来对玩家 1 的手进行排序。

如果我的假设是正确的，您应该进行修改`selectionSort`，以便您可以指定一个上下索引，以指定应该对数组的哪一部分进行排序。它可能看起来像这样：

```
public static void selectionSort(int[] deck, int start, int end) {

    for (int i = start; i<end; i++) {
        int currentMax = deck[i];
        int currentMaxIndex = i;

        for (int j = i + 1; j < end; j++) {
            if (currentMax < deck[j]) {
                currentMax = deck[j];
                currentMaxIndex = j;
            }
        }
        if (currentMaxIndex != i) {
            deck[currentMaxIndex] = deck[i];
            deck[i] = currentMax;
        }
    }
} 
```

要对玩家 1 的牌进行排序，请调用`selectionSort(deck, 0, 5);`。对于玩家 2 调用`selectionSort(deck, 5, 10);`。对于玩家 3 调用`selectionSort(deck, 10, 15);`

# c++ - 使用什么 Qt GUI 容器？还有相关的视频显示问题 - Windows 7

> ID：14092640
> 
> 赞同：0
> 
> 时间：2012-12-30T17:02:19.497
> 
> 标签：c++, qt5

我正在尝试设计一个应用程序来播放多个视频（媒体）文件并允许用户对每个文件进行修改（例如，缩放、旋转、反转视频等）。我从学习开始`Phonon`，但在研究了一段时间后，读到 >= 不再支持它（或者它的支持值得怀疑）`Qt5`。所以然后我回去了，现在我在看 qtmultimedia - `QMediaPlayer`。虽然我来自 c#-WPF 背景，但我在 Qt-C++ 上做了一些早期的工作。但这一次，我对必须使用哪些小部件感到困惑和困惑。可以在和`QMediaPlayer`上显示其输出（视频`QVideoWidget`）。由于我需要旋转等功能，我相信我必须合并 QGraphicsScene/View。`QGraphicsVideoItem``QAbstractVideoSurface`

<1> 那么方法应该是什么？我这样做了：使用`QVideoWidget`->`QGraphicsProxyWidget`通过它的`setWidget`() 添加了这个（虽然`setWidget`() 需要`QWidget`* 并且`QVideoWidget`不是从`QWidget`我在 Qt 助手中看到的那样派生 - 为什么这允许顺便说一句？） -> 将它添加`QGraphicProxyWidget`到`QGraphicsScene`via `addItem`() ->在构造它时将其添加到 -> 添加到`QGraphicsScene`via ( ) 。这样好吗？何时使用和？`QGraphicsView``QGraphicsView``QMainWindow``setCentralWidget``QGraphicsVideoItem``QAbstractVideoSurface`

<2> 当`QVideoWidget`以以下方式添加多个时，我看不到任何视频或视频`QVideoWidget`本身（我已经画了以区分它）。我究竟做错了什么？（虽然有音频输出）：

```
 QVideoWidget *pVideoWidget1 = new QVideoWidget(0);
    pVideoWidget1->setPalette(QPalette(QColor(255,0,0),QColor(0,255,0)));
    QVideoWidget *pVideoWidget2 = new QVideoWidget(0);
    pVideoWidget2->setPalette(QPalette(QColor(255,0,0),QColor(0,0,255)));

    m_pMediaPlayer1 = new QMediaPlayer(this);
    m_pMediaPlayer2 = new QMediaPlayer(this);
    m_pMediaPlayer1->setVideoOutput(pVideoWidget1);
    m_pMediaPlayer2->setVideoOutput(pVideoWidget2);

    m_pCustomGraphicsProxy1 = new CustomGraphicsProxy(0); //this is just a class derived from QGraphicsProxyWidget to implement drag and drop of videos
    m_pCustomGraphicsProxy2 = new CustomGraphicsProxy(0);
    m_pCustomGraphicsProxy1->setWidget(pVideoWidget1);
    m_pCustomGraphicsProxy2->setWidget(pVideoWidget2);

    QGraphicsScene *pGraphicsScene = new QGraphicsScene(this);
    QGraphicsLinearLayout *pGraphicsLinearLayout = new QGraphicsLinearLayout;

    CustomGraphicsProxy* button = new CustomGraphicsProxy(0);
    button->setWidget(new QPushButton); //this i can see
    CustomGraphicsProxy* button1 = new CustomGraphicsProxy(0);
    button1->setWidget(new QPushButton); //this i can see too

    pGraphicsLinearLayout->addItem(button);
    pGraphicsLinearLayout->addItem(m_pCustomGraphicsProxy1); //can't see
    pGraphicsLinearLayout->addItem(m_pCustomGraphicsProxy2); //can't see
    pGraphicsLinearLayout->addItem(button1);

    CustomGraphicsProxy *temp = new CustomGraphicsProxy(0);
    temp->setLayout(pGraphicsLinearLayout);
    pGraphicsScene->addItem(temp);
    temp->show();

    m_pGraphicsView = new QGraphicsView(pGraphicsScene, this);

    setCentralWidget(m_pGraphicsView);

    QObject::connect(m_pCustomGraphicsProxy1, SIGNAL(sigNewFileDragDropped()), this, SLOT(sloPlayOnWindow1()));
    QObject::connect(m_pCustomGraphicsProxy2, SIGNAL(sigNewFileDragDropped()), this, SLOT(sloPlayOnWindow2()));

    //just for testing - this gives only audio no video can be seen
    m_pMediaPlayer1->setMedia(QUrl::fromLocalFile("d:/z.avi"));
    m_pMediaPlayer1->play(); 
```

<3> 在我进一步研究之前，我是在 Qt 中选择正确的工具来操作我之前提到的视频还是需要做其他事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T06:38:12.837

我假设您正在为播放器构建自己的自定义小部件。在这种情况下，在设计器中使用 QWidget 并对其进行推广。那可行。这是[如何做的链接？](http://www.tinesoft.com/qt/use-custom-widgets-with-qt-designer-promotion-technique)

# mysql - 如何找到在另一个表中找不到的行？

> ID：14092641
> 
> 赞同：2
> 
> 时间：2012-12-30T17:02:19.857
> 
> 标签：mysql, sql, database

我在两个表之间有 1-1 列关系，`item`并且`log`

对于每个项目，都有一个日志存储项目是否已被处理。这通过`log.itemId`等于 来标识`item.id`。`log.status`告诉处理是否正在进行或已完成（-1 正在等待，1 正在完成）。

在处理开始之前，`log`表中没有对应项目的行`item`。

我试图简单地从日志中没有相应行（意味着处理尚未开始）或状态不是 1（意味着它的待处理）的项目中获取行。

我要疯了，想弄清楚，这是我的查询：

```
SELECT 
    item.id
FROM item, log
WHERE log.itemId != item.id
OR (log.itemId = item.id AND log.status !='1')
ORDER BY item.id ASC LIMIT 1 
```

但是，这会返回一个空结果。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T17:05:18.053

尝试这个：

```
SELECT 
  item.id
FROM
  item left join log on (log.itemId = item.id)
WHERE
  log.itemId is null
  OR log.status !='1'
ORDER BY item.id LIMIT 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T17:18:42.613

虽然提供的其他答案有效并且非常常见（外部连接和检查外部表上的 NULL），但 SQL 中还有另一种更直接适用的方法：

```
SELECT
item.id
FROM item
WHERE
not exists
    (SELECT itemID from log where log.itemID = item.id and log.status = '1') 
```

我建议同时尝试并确定哪个操作更快——外连接检查 NULL 与“不存在”语法。大多数数据库不会对两个查询进行相同的优化（即使结果相同），因此一个可能会优于另一个，尽管并不总是很明显哪个更好。

请注意，我在最后一行将 != 更改为 =，但我认为这是正确的，尽管我可能误解了逻辑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T17:09:00.813

其中一个决定是使用 EXISTS (http://dev.mysql.com/doc/refman/5.0/en/exists-and-not-exists-subqueries.html)，您可以在下面找到示例，或者您可以使用 LEFT JOIN .

```
SELECT *
FROM item AS i
WHERE NOT EXISTS(
    SELECT *
    FROM log AS l
    WHERE l.itemId = i.id
        AND l.status != 1
)
LIMIT 0, 1; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T17:10:37.393

这是另一种方法：

```
SELECT item.id FROM item WHERE item.id NOT IN (SELECT itemid FROM log where log.status != '1') 
```

# c - 在c中对二维数组进行排序

> ID：14092642
> 
> 赞同：5
> 
> 时间：2012-12-30T17:02:36.453
> 
> 标签：c, arrays, sorting, multidimensional-array

我正在尝试对二维数组进行排序。原始数组是

```
5 0 3
4 1 2
3 1 1
4 2 2
3 3 1 
```

排序后，应该是这样的

```
3 1 1
3 3 1
4 2 2
4 1 2
5 0 3 
```

这是我用来实现冒泡排序的代码，i 代表行数。

```
int x,y,z,j,temp1,temp2,temp3;
for(x=0;x<i;x++)
{
    for (j=0;j<i-1;j++)
    {
        if(a[j][0]>a[j+1][0])
        {
            temp1=a[j][0];
            temp2=a[j][1];
            temp3=a[j][2];
            a[j][0]=a[j+1][0];
            a[j][1]=a[j+1][1];
            a[j][2]=a[j+1][2];
            a[j+1][0]=temp1;
            a[j+1][1]=temp2;
            a[j+1][2]=temp3;
        }
    }
} 
```

它仍然没有排序，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T19:41:22.883

看起来您正在尝试按[字典顺序](http://en.wikipedia.org/wiki/Lexicographical_order)对数组的行进行排序。如果将二维数组视为数组数组，那么您只是将第一级数组中的第二级数组按字典顺序升序排序。

根据数组中的列数是否固定，您可以使用`qsort`带有自定义比较器的函数来执行此操作。例如，如果您知道每列中总是正好有 3 个元素，您可以编写一个像这样的比较器：

```
static const size_t NUM_COLS = 3;

/* Lexicographically compare two arrays of size NUM_COLS. */
int CompareArrays(const void* arr1, const void* arr2) {
     /* Convert back to the proper type. */
     const int* one = (const int*) arr1;
     const int* two = (const int*) arr2;

     /* Do an element-by-element comparison.  If a mismatch is found, report how
      * the arrays compare against one another.
      */
     for (size_t i = 0; i < NUM_COLS; i++) {
         if (one[i] < two[i]) return -1;
         if (one[i] > two[i]) return +1;
     }

     /* If we get here, the arrays are equal to one another. */
     return 0;
}

/* Use qsort to sort the arrays */
qsort((const int*)&one, numRows, sizeof(int[NUM_COLS]), CompareArrays); 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-21T19:20:40.737

在c中对二维数组进行排序

```
int x[5][5],i,j,i1,j1,temp,k;

for (int i=0;i<5;i++)
for (int j=0:<5;j++)
 cin>>x[i][j];

 for (int i=0;i<5;i++)
   for (int j=0:<5;j++)
{
    k=j+1;
            for (int i1=0;i<5;i1++)
            {
                for (int j1=k:<5;j1++)
                    {
                    if (x[i,j]>x[i1,j1])
                        {
                        temp=x[i,j];
                        x[i,j]=x[i1,j1];
                        x[i1,j1]=temp;
                        }
                     }
                k=1;
            }
}

for (int i=0;i<5;i++)
for (int j=0:<5;j++)
 cout<<x[i][j]; 
```

# excel - 所有数据值的持续时间不遵循 [h]:mm:ss 格式

> ID：14092643
> 
> 赞同：0
> 
> 时间：2012-12-30T17:02:36.837
> 
> 标签：excel, vbscript, vba

我目前正在使用一些`Time duration calculation`函数来确定总持续时间。`[h]:mm:ss`现在该函数为以下日期提供预期格式的输出：`11/15/2012 8:45:43 AM`和`12/7/2012 8:45:43 AM`- 持续时间是`87:45:55`（***corect***），但对于这个`1/3/2013 8:45:43 AM`和`9/6/2012 8:04:58 AM`- 这里 excel 列中的持续时间已存储为`4/28/1900 12:40:45 AM`（不***正确***）。现在我的问题是为什么它不像其他人一样存储在 excel 列中？

**代码**

```
Function TimeSpan(dt1, dt2)
If Not (IsDate(dt1) And IsDate(dt2)) Then
    TimeSpan = "00:00:00"
ElseIf CDate(dt2) > CDate(dt1) Then
    TimeSpan = TimeSpan(dt2, dt1)
Else
    On Error Resume Next
    'MsgBox(DateDiff(CDate(dt1) - CDate(dt2)))
    TimeSpan = objExcel1.Application.WorksheetFunction.Text((CDate(dt1) - CDate(dt2)), "[h]:mm:ss")

    If Err Then
        Err.Clear
        'MsgBox(CDate(dt1))
        'MsgBox(CDate(dt2))
    End If
    On Error GoTo 0
End If
End Function 
```

请帮助我了解错误是什么以及它的修复方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T17:05:00.387

更改您的`TimeSpan`计算将允许您获得小时数。我使用了`DateDiff`您注释掉的 （格式不正确）并将函数从 更改`.Application.WorksheetFunction`为内置函数：

```
TimeSpan = DateDiff("h", CDate(dt2), CDate(dt1)) & _
    Format((CDate(dt1) - CDate(dt2)), ":nn:ss") 
```

当我进入即时窗口时，输入

```
?timespan("1/3/2013 8:45:43 AM","9/6/2012 8:04:58 AM") 
```

它给了我一个答案

```
2856:40:45 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T22:25:26.560

这个脚本：

```
Option Explicit

Dim goFS : Set goFS = CreateObject( "Scripting.FileSystemObject" )

Dim sFSpec : sFSpec     = "..\data\updsheet\save.xls"
Dim oExcel : Set oExcel = CreateObject("Excel.Application")
Dim oWBook : Set oWBook = oExcel.Workbooks.Open(goFS.GetAbsolutePathName(sFSpec))

Dim dtA : dtA = #1/3/2013 8:45:43 AM#
Dim dtB : dtB = #9/6/2012 8:04:58 AM#
Dim dtC : dtC = #11/15/2012 8:45:43 AM#
Dim dtD : dtD = #12/7/2012 8:45:43 AM#

Dim aTests : aTests = Array( _
    dtA, dtB _
  , dtC, dtD _
)

Dim i
For i = 0 To UBound(aTests) Step 2
    WScript.Echo "----", i, aTests(i + 0), "<>", aTests(i + 1), aTests(i + 0) - aTests(i + 1), aTests(i + 1) - aTests(i + 0)
   On Error Resume Next
    WScript.Echo "A", oExcel.Application.WorksheetFunction.Text(aTests(i + 0) - aTests(i + 1), "[h]:mm:ss")
    If Err.Number Then WScript.Echo "A", Err.Description
   On Error GoTo 0
   On Error Resume Next
    WScript.Echo "B", oExcel.Application.WorksheetFunction.Text(aTests(i + 1) - aTests(i + 0), "[h]:mm:ss")
    If Err.Number Then WScript.Echo "B", Err.Description
   On Error GoTo 0
    WScript.Echo
Next

oExcel.Quit 
```

及其输出（德语语言环境！）：

```
---- 0 03.01.2013 08:45:43 <> 06.09.2012 08:04:58 119,028298611112 -119,028298611112
A 2856:40:45
B Die Text-Eigenschaft des WorksheetFunction-Objektes kann nicht zugeordnet werden.

---- 2 15.11.2012 08:45:43 <> 07.12.2012 08:45:43 -22 22
A Die Text-Eigenschaft des WorksheetFunction-Objektes kann nicht zugeordnet werden.
B 528:00:00 
```

证明：

1.  @VBSlover 对问题的描述不可信。#11/15/2012 8:45:43 AM# 和 #12/7/2012 8:45:43 AM# 之间大约有 22 天/528 小时。每个人都在猜测 87:45:55 的来源。（所以这个问题应该被否决）
2.  除了@KekuSemau 所述，只要您提供正确的参数， WorksheetFunction.Text() 就会返回合理的字符串值。（因此，如果尝试回答的主题不是主题且有用，则应否决）
3.  @VBSlovers 代码包含一个 OERN。因此，如果对 TimeSpan（函数名）的赋值有问题，则该函数的返回值是未定义的。难怪有些单元格充满了虚假数据，当您隐藏错误时，这就是您所得到的。

**更新一：wrt @Sean 的提议：**

如果你跑

```
Option Explicit

Dim dtA  : dtA  = #1/3/2013 8:45:43 AM#
Dim dtB  : dtB  = #9/6/2012 8:04:58 AM#
Dim Sean : Sean = "2856:09:45"
Dim Ekke : Ekke = "2856:40:45"

WScript.Echo "!German Locale!"
WScript.Echo "dtB", dtB
WScript.Echo "dtA", dtA
WScript.Echo "Sean", Sean, "=>", addTS(dtB, Sean)
WScript.Echo "Ekke", Ekke, "=>", addTS(dtB, Ekke)

Function addTS(dtX, sHMS)
  Dim aParts : aParts = Split(sHMS, ":")
  addTS = dtX
  addTS = DateAdd("h", CLng(aParts(0)), addTS)
  addTS = DateAdd("n", CLng(aParts(1)), addTS)
  addTS = DateAdd("s", CLng(aParts(2)), addTS)
End Function 
```

输出：

```
!German Locale!
dtB 06.09.2012 08:04:58
dtA 03.01.2013 08:45:43
Sean 2856:09:45 => 03.01.2013 08:14:43
Ekke 2856:40:45 => 03.01.2013 08:45:43 
```

你会意识到肖恩的代码中一定有一个错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T20:50:16.727

Excel 不关心您的格式。您将文本发送到 Excel 单元格，Excel 将其视为任何输入并尝试将其转换为它认为合适的任何内容。*但是，您可以直接对数字格式*进行编码：

```
With [some Range Object]
    .NumberFormat = "[h]:mm:ss"
    .Value = TimeSpan(..., ...)
End With 
```

... TimeSpan 函数应该返回一个日期值。

这不能在您的 TimeSpan 函数中完成。如果需要，您必须将目标范围的引用作为另一个参数传递，并让函数直接写入（并添加格式）。

# php - 文件中每行前面的随机单词

> ID：14092645
> 
> 赞同：0
> 
> 时间：2012-12-30T17:02:48.443
> 
> 标签：php, file, random

我想在每一行前面添加一个随机文本，如下所示：

前：

```
One
Two
Three 
```

后：

```
Love One
My Two
Other Three 
```

更新：抱歉造成混淆，我的意思是“之前”文本是 textarea 提交的文本，所以它在 $_POST 值中，我想要像“之后”文本一样的结果。简单来说，如下代码：假设前面的文本低于 $_POST['message'] 值，我想**回**显该值，但前面有随机文本。

我试试这个，但只适用于第一行而不是另一行：

```
$rand = array("Love", "My", "Other");
$message = trim(@$_POST['message']) ;
$message = str_replace(" ","+",$message);//Convert the space to +
$modifiedTextAreaText = str_replace( "\n", "\n$rand", $message);//This One Not Working
echo $rand[array_rand($rand, 1)]. $modifiedTextAreaText ;//This one working only for the first line 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T17:54:17.203

您可以构建数组，然后随机播放两者或仅随机播放一个。然后将两者结合起来。

```
<?php
$rands = array("Love", "My", "Other");
shuffle($rands);
$words = array("One", "Two", "Three");
$new = array_combine($rands, $words);

foreach($new as $key => $val){
    echo "$key $val<br />\n";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T17:14:40.033

你的意思是这样的：

```
<?php

$randomWords = array('Love', 'My', 'Other');

$randomKey = array_rand($randomWords, 1);
echo $randomWords[$randomKey] . " One<br />";

$randomKey = array_rand($randomWords, 1);
echo $randomWords[$randomKey] . " Two<br />";

$randomKey = array_rand($randomWords, 1);
echo $randomWords[$randomKey] . " Three<br />"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T17:08:23.577

在数组中设置所需的文本并使用数组元素键调用 rand() 函数，然后打印元素示例

```
$text = array( 0=> "text0", 1=> "text1", 2=> "text2");
$randomtext = rand (0,2);
echo $text['$randtext']; 
```

# javascript - 敲除映射到子数组

> ID：14092651
> 
> 赞同：2
> 
> 时间：2012-12-30T17:03:14.203
> 
> 标签：javascript, knockout.js, knockout-mapping-plugin, knockout-2.0

我试图解决的情况是如何将 json 数据的子数组映射到我的视图模型。业务逻辑是，对于给定的职位，有一组项目，每个项目都有一组经验。如果我使用敲除映射器函数，我可以循环并填充我的经验集合，但是我的 viewModel 具有计算函数、订阅事件等，我不确定如何将传入的内部数组连接到该 viewModel。

模型（缩写格式）

```
// for creating project objects
my.Project = function (selectedProject) {
    var self = this;
    self.project = ko.observable();
    self.company = ko.observable();
    self.experiences = ko.observableArray([]);
    self.hourlyRate = ko.observable();
    self.hours = ko.observable();
    self.hoursPerWeek = ko.observable();
    self.hoursTypeId = ko.observable();
    self.id = ko.observable();
    self.maxDate = ko.observable();
    self.minDate = ko.observable();
    self.minDescriptionLength = ko.observable();
    self.memberId = ko.observable();
    self.name = ko.observable(); 
    self.startDate = ko.observable();
    // non-persistable properties
    self.chartVals = ko.observableArray([]);
    self.isSelected = ko.computed(function () {
        if (typeof selectedProject === 'undefined') {
            return false;
        } else {
            return selectedProject === self;
        }
    });
    self.newExperience = ko.observable(new my.Experience());
    self.selectProject = function (p) {
        console.log(p.name());
        $("#selectedProjectName").text(p.name());
    };
    self.enableDetails = function () {
        my.vm.proficencyTip = ko.observable();
        console.log("enableDetails pow");
        return true;
    },
    self.disableDetails = function () {
        console.log('disableDetails mouse-off');
        return false;
    };
    self.isSelectedProficiency = ko.observable(false);
    self.selectedProficiency = function (p) {
        console.log('Proficiency value is ' + p.name);
    };
    self.updateProject = function () {
        my.postProjectData(self);
    };
    self.hoursTypeId.subscribe(function () {
        var endDate = new Date();
        var startDate = new Date();
        if (self.endDate() != "") {
            endDate = $.datepicker.parseDate("mm/dd/yy", self.endDate()); 
        }
        if (self.startDate() != undefined) {
            startDate = $.datepicker.parseDate("mm/dd/yy", self.startDate());
        }
        var days = (endDate - startDate) / 1000 / 60 / 60 / 24;
        var weeks = days / 7;
        if (self.hoursTypeId() == 2) {
            if (self.hoursPerWeek() > 0) {
                self.totalHours((weeks * self.hoursPerWeek()).toFixed(0));
            } else {

            }
        }
        if (self.hoursTypeId() == 1) {
            if (self.totalHours() > 0) {
                self.hoursPerWeek((self.totalHours() / weeks).toFixed(0));
            }
        }
    });
};
// for creating Position Models
my.Experience = function (selectedExperience) {
    var self = this;
    self.id = ko.observable();
    self.projectId = ko.observable();
    self.positionId = ko.observable();
    self.memberId = ko.observable();
    self.frequencyId = ko.observable();
    self.skillName = ko.observable();
    self.skillId = ko.observable();
    self.proficiencyId = ko.observable();
    self.frequencyId = ko.observable();
    self.proficiency = ko.observable();
    self.frequency = ko.observable();
    self.description = ko.observable();
    self.skill = {
        name:ko.observable()
    };
    self.proficiency.subscribe(function () {
        self.proficiencyId = self.proficiency();
        console.log('proficiency subscribed: ' + self.proficiency());
        my.setCounterHint(self.frequency(), self.proficiency(), self.description());

        var tip = "Don't just list those skills your strongest in. It's just as important to add new skills you are aquiring!";
        var result = $.grep(my.ajaxData.member.Proficiencies, function (e) { return e.Id == self.proficiency(); });
        if (result.length == 0) {
            // not found
        } else if (result.length == 1) {
            // access the foo property using result[0].foo
            tip = result[0].Name + ':\nAutonomy: ' + result[0].Autonomy + '\nContext: ' + result[0].nContext + '\nKnowledge: ' + result[0].Knowledge + '\nWorkmanship: ' + result[0].Workmanship;
        } else {
            // multiple items found
        }
        $(".proficiencyTip").attr('title', tip).attr('alt', tip);
        $(".proficiencyQuestionMark").fadeIn('slow');
    });

    self.frequency.subscribe(function () {
        self.frequencyId = self.frequency();
        console.log('frequency subscribed: ' + self.frequency());
        self.frequencyId = self.frequency();
        $("#newExperienceFrequency").val(self.frequencyId);
        my.setCounterHint(self.frequency(), self.proficiency(), self.description());
        var tip;

        $(".frequencyTip").attr('title', tip).attr('alt', tip);
        $(".frequencyQuestionMark").fadeIn('slow');
    });

    self.minDesc = ko.observable(my.getMinDescriptionLen(self.frequency(), self.proficiency()));

    self.mouseoverDescription = function () {
        $(".tip").hide(); 
        $(".descriptionQuestionMark").fadeIn('slow');
    },
    self.mouseoffDescription = function () { 
        $(".descriptionQuestionMark").delay(3000).fadeOut("slow");
    };

    });
};

The function where I'm loading the data.
loadProjectsForPosition = function (position) {
    // if we have no projects, add one 
    if (position.projects.length == 0) {
            position.projects.push(new my.Project()
                        .company(position.company())
                        .companyName(position.companyName())
                        .endDate(position.endDate())
                        .experiences([])
                        .hourlyRate(position.hourlyRate())
                        .hours(position.hours())
                        .maxDate(position.maxDate())
                        .minDate(position.minDate())
                        .memberId(position.memberId())
                        .description("Summarize the project and its objectives here.")
                        .name('New')
                        .positionId(position.positionId())
                        .startDate(position.startDate())
                        .totalHours(position.totalHours())
                );

        $.each(my.ajaxData.member.Projects, function (i, p) { 
            if (p.PositionId == position.id()) {
                position.projects.push(new my.Project(position.projects[0])
                        .chartVals(p.ChartVals)
                        .company(p.Company)
                        .companyName(p.CompanyName)
                        .creditMinutes(p.CreditMinutes)
                        .description(p.Description)
                        .endDate(p.EndDate)
                        **.experiences(p.Experiences)** 
                        .hourlyRate(p.HourlyRate)
                        .hours(p.Hours)
                        .hoursPerWeek(p.HoursPerWeek)
                        .hoursTypeId(p.HoursTypeId)
                        .id(p.Id)
                        .maxDate(p.MaxDate)
                        .minDate(p.MinDate)
                        .minDescriptionLength(p.MinDescriptionLength)
                        .memberId(p.MemberId)
                        .name(p.Name)
                        .positionId(p.PositionId)
                        .startDate(p.StartDate)
                        .totalCompensation(p.TotalCompensation)
                        .totalHours(p.TotalHours)
                        .weightedHours(p.WeightedHours)
                        .isSelectedProficiency(false)
                );
                position.selectedPosition = true;
            }
        });
    };
} 
```

孙子也有孩子和孙子，所以尽管我正在寻找这个问题的答案，但我正在寻找用于处理“海龟一路向下”的淘汰赛映射中的模式。

与往常一样，感谢您查看、分享您的经验并提供您有充分理由的意见。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T18:27:44.947

如果您打算使用映射插件，那么您可能需要查看映射选项以及如何自定义对象的创建方式。文档在这里： http: [//knockoutjs.com/documentation/plugins-mapping.html#customizing_object_construction_using_create](http://knockoutjs.com/documentation/plugins-mapping.html#customizing_object_construction_using_create)

虽然，如果您已经为各种对象提供了不错的构造函数，那么您可能根本不需要映射插件。

例如，当您通过父构造函数传递数据时，您可以执行以下操作：

```
var mappedExperiences = ko.utils.arrayMap(selectedProject.experiences || [], function(item) {
    return new my.Experience(item);
});

self.experiences(mappedExperiences); 
```

# sql - 带有分组依据的 MongoDB 查询

> ID：14092654
> 
> 赞同：1
> 
> 时间：2012-12-30T17:03:26.187
> 
> 标签：sql, mongodb, group-by

我想在 mongodb 中运行一个查询，如下所示（在 SQL 中）。输出应存储到游标中。

```
SELECT ipv4 src, SUM(flags) 
FROM table 
WHERE starttime > 1262300400 AND endtime < y AND port dst = 22 
GROUP BY ipv4, src 
```

我读了[http://docs.mongodb.org/manual/reference/aggregation/group/](http://docs.mongodb.org/manual/reference/aggregation/group/)

并尝试过

```
myCursor = db.mycol.find(  [  
  {$group:{ _id: "$src",total:{$sum:"$flags"}}},
  {$match:{$and:[{"dst":22},
          {$and:[{"starttime":{$gt:1262300400}},{"endtime":{$lt:1264978800}}]}]}  
  }  ]); 
```

但它失败了。

顺便说一句：我可以通过检查它们之间的范围来在两个 unix 时间戳之间进行搜索吗？在上面的示例中，我尝试搜索介于`1262300400`和之间的时间`1264978800`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T17:22:30.110

您需要使用该`aggregate`方法而不是`find`执行此操作，并且您不需要在字段中使用所有这些`$and`运算符，`$match`因为这些字段自然是与运算。并将`$match`操作放在首位，这样您就不会`$group`处理比您需要的更多的文档。

```
db.mycol.aggregate([
    {$match:{"dst":22, "starttime":{$gt:1262300400}, "endtime":{$lt:1264978800}}},
    {$group:{ _id:"$src", total:{$sum:"$flags"}}}
]); 
```

# javascript - 如何在 Firefox 中拥有详细的 JS 控制台

> ID：14092659
> 
> 赞同：0
> 
> 时间：2012-12-30T17:04:02.540
> 
> 标签：javascript, google-chrome, firefox

在 Chrome 中，当我们这样做时

```
console.log(document.styleSheets); 
```

它将显示整个对象元素，我们可以遍历它。

在 Firebug 中，它显示消息，当我单击它时，它会在 DOM 检查器中打开，让我浏览子项。

但是当我这样做时：

```
for (var S = 0; S < document.styleSheets.length; S++){
    if(document.styleSheets[S][cssRuleCode]){
        for(var n = 0; n < document.styleSheets[S][cssRuleCode].length; n++) {
            console.log(document.styleSheets[S][cssRuleCode][n]); 
```

萤火虫表演

```
CSSStyleRule { constructor=CSSStyleRule, parentStyleSheet=CSSStyleSheet, style=CSSStyleDeclaration, more...} 
```

当我点击它时，它只会打开 CSS 条目，没有子信息。

如何在 Firefox 的 JS 控制台中获取详细的对象表示（有或没有 Firebug）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T17:08:48.503

右键单击控制台中的链接，然后单击`Inspect in DOM tab`。

# php - CodeIgniter 在提交后将数据插入数据库

> ID：14092671
> 
> 赞同：1
> 
> 时间：2012-12-30T17:05:02.190
> 
> 标签：php, codeigniter

下面是我的`books_controller.php`

```
function books_s()
{
    $this->load->helper('form');
    $this->load->helper('html');
    $this->load->model('books_model');

    $sri=$this->input->post();
    print_R($sri);

    if($this->input->post())
    {
    $bookme=$this->load->books_model->post_books(); 

    }
    $this->load->view('header.php');    
} 
```

我没有放置我的`books_view.php`代码 bcos 你可以在我的控制器代码中看到我已经完成了`print_R($sri);`我可以看到值从视图页面发布到控制器页面...输出是

```
Array ( 
    [Id] => 4 
    [title] => just testng 
    [text] => goooo 
    [submit] => submit 
    ) 
```

` 我也收到错误消息

`Message: Undefined property: CI_Loader::$books_model`

`Filename: controllers/books_Controller.php` `books_controller.php` 我知道这是我的模型代码的问题

```
function books_model()
{
    parent::__Construct();
}

function post_books()
{
    $this->load->database();
    $id=$this->input->post('id');
    $title=$this->input->post('title');
    $text=$this->input->post('text');

    $data=array('id'=>$id,'title'=>$title,'text'=>$text);
    $this->db->insert('data',$data);
} 
```

你们能帮我找出我在哪里做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T17:11:14.237

你的模型应该是这样的

```
Class Books_Model Extends CI_Model{

    function __construct()
    {
        parent::__construct();
    }

    function post_books()
    {
        $this->load->database();
        $id=$this->input->post('id');
        $title=$this->input->post('title');
        $text=$this->input->post('text');

        $data=array('id'=>$id,'title'=>$title,'text'=>$text);
        $this->db->insert('data',$data);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T17:10:37.320

```
$bookme=$this->load->books_model->post_books(); 
```

您已经加载了模型，所以现在您只需要访问实例，它应该是：

```
$bookme=$this->books_model->post_books(); 
```

您还需要这样做：

```
function __construct()
{
    parent::__construct();
} 
```

但是，它不应该真的是导致错误的原因，因为它应该以任何一种方式工作，但以上是正确的方式。

# c++ - FileObject->FileName 不返回文件的完整路径

> ID：14092677
> 
> 赞同：1
> 
> 时间：2012-12-30T17:05:34.760
> 
> 标签：c++, c, windows, driver

我是驱动程序开发领域的新手。我正在尝试显示打开的每个文件的路径。我正在使用以下行来显示路径。

```
PFILE_OBJECT pFileObject = IoGetCurrentIrpStackLocation(Irp)->FileObject;
DbgPrint("File Name : %wZ\n", &pFileObject->FileName); 
```

但它没有显示完整的路径。

`File Name : \Documents and Settings\Administrator\Desktop\cmd commands.txt`

它应该是这样的：

`File Name : C:\Documents and Settings\Administrator\Desktop\cmd commands.txt`

缺少驱动器名称（例如 C:、D:），有什么问题吗...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T17:43:33.977

仅包含文件的`FileName`名称。卷信息在`Vpb`字段中描述。

# java - 如何检查字符串是否多次包含相同的字母？

> ID：14092682
> 
> 赞同：5
> 
> 时间：2012-12-30T17:05:51.830
> 
> 标签：java, string

我对如何检查字符串是否多次包含相同的字母感到有些困惑。

```
ArrayList<String> words = new ArrayList<String>();

words.add("zebra");
words.add("buzzer");
words.add("zappaz"); 
```

假设我只想打印包含多个“z”的任何单词，因此只会打印“buzzer”和“zappaz”。我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-30T17:09:32.170

要测试一个字符串是否包含两个 z，您可以这样做：

```
 boolean ok = word.matches(".*z.*z.*") 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-30T17:12:12.000

`indexOf`返回字符串中一个字符的...索引。它还需要一个可选参数来指定搜索的位置。如果没有匹配，则返回`-1`。所以只需使用它两次：

```
s.indexOf(letter, s.indexOf(letter) + 1) > -1 
```

[有用！](http://ideone.com/yDG2TH)

（不过，为了效率，不妨[检查一下第一个结果](http://ideone.com/1XFlns)。）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-30T17:13:15.597

一个聪明的解决方案可能是删除要搜索的字符并将结果字符串的长度与完整字符串进行比较。

```
ArrayList<String> words = new ArrayList<String>();

words.add("zebra");
words.add("buzzer");
words.add("zappaz");

for (String word : words) {
  // calculate the length difference
  if (word.length() - word.replace("z", "").length() > 1) {
    System.out.println(word);
  }
} 
```

将打印：

```
buzzer
zappaz 
```

效率不是很高，但它可以工作并且非常简单。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-30T17:12:24.243

```
public static void main(String[] args) {

  String s = "bazzer";
  String news = s.replaceAll("z", "");

    if(news.length() < s.length() -1 ){
        System.out.println(s);
    }

  } 
```

# python - 哪个更灵活？django-registration 或 django-userena

> ID：14092685
> 
> 赞同：5
> 
> 时间：2012-12-30T17:07:03.290
> 
> 标签：python, django, django-registration

我期待 django-userena 和 django-registration（我认为它更受欢迎）的用户来回答这个问题。我已经检查了两者的文档，但我仍然没有完全接受这两种选择。

由于 django 处理用户配置文件的方式（至少，django < 1.5），我需要知道哪个应用程序更适合我相当常见的要求：

1.  两种类型的用户模型，每一种都有不同的属性和方法（例如学生和教师）

2.  @login_required 装饰器（@teacher_login_required 和 @student_login_required）并通过 request.teacher 或 request.student 轻松访问 Teacher 或 Student 对象

3.  教师帐户的电子邮件登录和电子邮件激活不需要电子邮件激活的学生帐户的用户名登录（标准）。

4.  教师帐户和学生帐户的不同网址（注册、登录、设置）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T23:53:37.677

对于您的情况，我建议您尝试 django-registration，因为它更加模块化且更易于破解。Django-userena 很好，但它带有一个完整的包，比如我认为你不需要的缩略图。无论如何，您都可以在[https://www.djangopackages.com/grids/g/registration/](https://www.djangopackages.com/grids/g/registration/)上查看一个很好的比较。

# android - Android客户端将输入消息设置为textview

> ID：14092689
> 
> 赞同：2
> 
> 时间：2012-12-30T17:07:59.190
> 
> 标签：android, sockets, client

我是 android 和 java 编程的新手，我正在尝试对服务器客户端连接进行编程。

服务器在我的电脑上运行没有问题，客户端在我的安卓智能手机上运行。

我可以从手机向服务器发送消息，但无法从服务器向客户端发送消息。

当我发送此消息时，客户端会自行崩溃并关闭。

[我在这个站点](http://myandroidsolutions.blogspot.de/2012/07/android-tcp-connection-tutorial.html)上找到了一个类似的客户端，并将这个客户端的 listView 更改为 textView。在此更改后，我的问题发生了。我真的希望有人可以帮助我解决我的问题。

这是我的活动：

```
import android.os.AsyncTask;
import android.os.Bundle;
import android.app.Activity;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.support.v4.content.LocalBroadcastManager;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

public class MyActivity extends Activity {

public static final String MY_LOCAL_BROADCAST = "myLocalBroadCast";
public static final String KEY_RESPONSE = "key_response";
public static final String KEY_FIRSTRUN = "first_run";

Button btn;
EditText textOut;
TextView textIn;
TextView problems;
Button send;
private TCPClient myTcpClient;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);  

    editText = (EditText)findViewById(R.id.editText);
    textIn = (TextView)findViewById(R.id.textin);
    send = (Button)findViewById(R.id.send_button);

    new ConnectTask(this.getApplicationContext()).execute("");

    send.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {

            String message = editText.getText().toString();

            //sends the message to the server
            if (myTcpClient != null) {
                myTcpClient.sendMessage(message);
            }
        }
    });
    if (savedInstanceState==null) {
        new ConnectTask(this.getApplicationContext()).execute("");
    }
    }

@Override
protected void onSaveInstanceState(Bundle outState) {
    outState.putBoolean(KEY_FIRSTRUN, false);
    super.onSaveInstanceState(outState);
}

    @Override
protected void onResume() {
    super.onResume();
    LocalBroadcastManager.getInstance(this).registerReceiver(
            mMessageReceiver, new IntentFilter(MY_LOCAL_BROADCAST));
}

@Override
protected void onPause() {
    super.onPause();
    LocalBroadcastManager.getInstance(this).unregisterReceiver(mMessageReceiver);
}

private BroadcastReceiver mMessageReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        String responseData = intent.getStringExtra(KEY_RESPONSE);
        Toast.makeText(MainActivity.this, responseData, Toast.LENGTH_LONG).show();
    }
};

public class connectTask extends AsyncTask<String,String,TCPClient> {

    private Context context;

         public ConnectTask(Context context) {
             this.context = context;
         }

    @Override
    protected TCPClient doInBackground(String... message) {

        //we create a TCPClient object and
        myTcpClient = new TCPClient(new TCPClient.OnMessageReceived() {

            @Override
            //here the messageReceived method is implemented
            public void messageReceived(String message) {
                //this method calls the onProgressUpdate
                publishProgress(message);
            }
        });
        myTcpClient.run();

        return null;
    }

    @Override
    protected void onProgressUpdate(String... values) {
        super.onProgressUpdate(values);
        Intent intent = new Intent(MainActivity.MY_LOCAL_BROADCAST);
        intent.putExtra(MainActivity.KEY_RESPONSE, values);
        LocalBroadcastManager.getInstance(context).sendBroadcast(intent);
        textIn.setText(values[0]);
    }
}
} 
```

这是我的 TCPClient 类：

```
package com.example.sercerclient2zweidreidrei;

import android.util.Log;
import java.io.*;
import java.net.InetAddress;
import java.net.Socket;

public class TCPClient {

private String serverMessage;
public static final String SERVERIP = "192.168.2.107"; //your computer IP address
public static final int SERVERPORT = 4444;
private OnMessageReceived mMessageListener = null;
private boolean mRun = false;

PrintWriter out;
BufferedReader in;

/**
 * constructor of the class. OnMessageReceived listens for the messages 
 * received from server
 */
public TCPClient(OnMessageReceived listener) {
    mMessageListener = listener;
}

/**
 * Sends the message entered by client to the server
 * @param message text entered by client
 */
public void sendMessage(String message){
    if (out != null && !out.checkError()) {
        out.println(message);
        out.flush();
    }
}

public void stopClient() {
    mRun = false;
}

public void run() {
    mRun = true;

    try {
        // here you must put your computer's IP address.
        InetAddress serverAddr = InetAddress.getByName(SERVERIP);

        Log.e("TCP Client", "C: Connecting...");

        //create a socket to make the connection with the server
        Socket socket = new Socket(serverAddr, SERVERPORT);

        try {
            //send the message to the server
            out = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket.getOutputStream())), true);

            Log.e("TCP Client", "C: Sent.");
            Log.e("TCP Client", "C:Done.");

            //receive the message which the server sends back
            in = new BufferedReader(new InputStreamReader(socket.getInputStream()));

            //in this while the client listens for the messages send by the server
            while (mRun) {
                serverMessage = in.readLine();

                if (serverMessage != null && mMessageListener != null) {
                    //call the method messageReceived from MyActivity class
                    mMessageListener.messageReceived(serverMessage);
                }
                serverMessage = null;
            }

            Log.e("RESPONSE FROM SERVER", "S: Received Message: '" + serverMessage + "'");

        } catch (Exception e) {

            Log.e("TCP", "S: Error", e);

        } finally {
            //the socket must be closed. It is not possible to reconnect to this socket
            //after it is closed, which means a new socket instance has to be created.
            socket.close();
        }
    } catch (Exception e) {
        Log.e("TCP", "C:Error", e);
    }
}

/*
 * Declare the interface. The method messageReceived(String message must be
 * implemented in the MyActivity class at on asynckTask doInBackground
 */
public interface OnMessageReceived {
    public void messageReceived(String message);
}
} 
```

最后在这里你可以看到我的 main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:tools="http://schemas.android.com/tools"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  tools:context=".MyActivity" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:text="@string/Textausgabe" />

<EditText
    android:id="@+id/editText"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/textView1"
    android:layout_marginTop="34dp"
    android:ems="10" >

    <requestFocus />
</EditText>

<Button
    android:id="@+id/send_button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignRight="@+id/textView1"
    android:layout_below="@+id/editText"
    android:layout_marginTop="26dp"
    android:text="@string/Senden" />

<TextView
    android:id="@+id/textin"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_centerVertical="true"
    android:text="@string/EinkommenderText"
    android:textAppearance="?android:attr/textAppearanceLarge" />

 </RelativeLayout> 
```

和我的 LogCat：

> E/TCP 客户端 (548): C: 连接中...
> 
> E/TCP 客户端 (548)：C：已发送。
> 
> E/TCP 客户端（548）：C：完成。
> 
> D/AndroidRuntime(548)：关闭虚拟机
> 
> ：W / dalvikvm（548）：threadid = 1：线程退出未捕获的异常（组= 0x409c01f8）
> 
> E/AndroidRuntime(548)：致命异常：主要
> 
> E/AndroidRuntime(548): java.lang.NullPointerException
> 
> E/AndroidRuntime(548)：在 com.example.sercerclient2zweidreidrei.MyActivity$connectTask.onProgressUpdate(MyActivity.java:72)
> 
> E/AndroidRuntime(548)：在 com.example.sercerclient2zweidreidrei.MyActivity$connectTask.onProgressUpdate(MyActivity.java:1)
> 
> E/AndroidRuntime(548)：在 android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:618)
> 
> E/AndroidRuntime(548)：在 android.os.Handler.dispatchMessage(Handler.java:99)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T17:51:04.187

出现空指针是因为您的`TextView`etc 未正确初始化。

您全局声明它们，但初始化未链接到全局的新局部变量。因此，全局值仍然为空。

改变`MyActivity`将是

```
public class MyActivity extends Activity {

      Button btn;
      EditText textOut;
      TextView textIn;
      TextView problems;
      Button send;
      private TCPClient myTcpClient;

      @Override
      protected void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.main);  
         editText = (EditText) findViewById(R.id.editText);
         textIn = (TextView) findViewById(R.id.textin);
         send = (Button)findViewById(R.id.send_button);

        // connect to the server
        new connectTask().execute("");

send.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View view) {

        String message = editText.getText().toString();

        //sends the message to the server
        if (myTcpClient != null) {
            myTcpClient.sendMessage(message);
        }
    }
  });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T20:17:23.387

为避免屏幕旋转问题，您必须在 Activity 和 AsyncTask 之间创建惰性绑定。例如，您的 AsyncTask 可以通过 LocalBroadcastReceiver 将响应发送到您的 Activity。此外，您还应该考虑使用 Service 而不是 AsyncTask。

一个草稿 LocalBroadcastReceiver 示例。

一个启动 AsyncTask 并在 Toast 中显示 LocalBroadcast 结果（作为 Intent 数据）的 Activity（不要忘记从该广播中取消注册，例如在本例中的*onPause(...)*中）：

```
public class MainActivity extends Activity {

    public static final String MY_LOCAL_BROADCAST = "myLocalBroadCast";
    public static final String KEY_RESPONSE = "key_response";
    public static final String KEY_FIRSTRUN = "first_run";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        if (savedInstanceState!=null && savedInstanceState.getBoolean(KEY_FIRSTRUN,true)) {
          new ConnectTask(this.getApplicationContext()).execute("");
        }
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        outState.putBoolean(KEY_FIRSTRUN, false);
        super.onSaveInstanceState(outState);
    }

    @Override
    protected void onResume() {
        super.onResume();
        LocalBroadcastManager.getInstance(this).registerReceiver(
                mMessageReceiver, new IntentFilter(MY_LOCAL_BROADCAST));
    }

    @Override
    protected void onPause() {
        super.onPause();
        LocalBroadcastManager.getInstance(this).unregisterReceiver(mMessageReceiver);
    }

    private BroadcastReceiver mMessageReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            String responseData = intent.getStringExtra(KEY_RESPONSE);
            Toast.makeText(MainActivity.this, responseData, Toast.LENGTH_LONG).show();
        }
    };
} 
```

在*AsyncTask*完成时发送*LocalBroadCast的**AsyncTask*。您也可以在*onProgressUpdate(...)*中类似地发送*LocalBoradcast*：

 *```
public class ConnectTask extends AsyncTask<String, Void, String> {

    private Context context;

    public ConnectTask(Context context) {
        this.context = context;
    }

    @Override
    protected void onPreExecute() {
        //
    }

    @Override
    protected String doInBackground(String... params) {
        //
    }

    @Override
    protected void onPostExecute(String result) {
        Intent intent = new Intent(MainActivity.MY_LOCAL_BROADCAST);
        intent.putExtra(MainActivity.KEY_RESPONSE, result);
        LocalBroadcastManager.getInstance(context).sendBroadcast(intent);
    }
} 
```*

# c# - 在虚拟化 WPF TreeView 中滚动非常不稳定

> ID：14092691
> 
> 赞同：34
> 
> 时间：2012-12-30T17:08:10.050
> 
> 标签：c#, .net, wpf, treeview, virtualizingstackpanel

如果`TreeView`对具有不同大小的项目启用虚拟化，则会出现多个问题：

*   垂直滚动条随机改变它的大小，并且在查看整个树后不记得元素的大小。用鼠标滚动很难。

*   经过一些上下滚动，`ArgumentNullException`从框架代码中抛出。

复制很简单：创建一个新的 WPF 应用程序，然后将这段代码放入**MainWindow.xaml**

```
<Window x:Class="VirtualTreeView.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="800" Width="400" Left="0" Top="0"
        DataContext="{Binding RelativeSource={RelativeSource Self}}">
    <Grid>
        <TreeView x:Name="tvwItems" ItemsSource="{Binding Items}"
                VirtualizingPanel.IsVirtualizing="True" VirtualizingPanel.VirtualizationMode="Recycling">
            <TreeView.ItemTemplate>
                <DataTemplate>
                    <Border Height="{Binding Height}" Width="{Binding Height}"
                            BorderThickness="1" Background="DarkGray" BorderBrush="DarkBlue"/>
                </DataTemplate>
            </TreeView.ItemTemplate>
        </TreeView>
    </Grid>
</Window> 
```

并将此代码放入**MainWindow.xaml.cs**

```
using System.Collections.ObjectModel;
using System.Linq;

namespace VirtualTreeView
{
    public partial class MainWindow
    {
        public ObservableCollection<Item> Items { get; set; }

        public MainWindow ()
        {
            Items = new ObservableCollection<Item>(Enumerable.Range(0, 20).Select(i => new Item {
                Height = i*20,
            }));
            InitializeComponent();
        }
    }

    public class Item
    {
        public double Height { get; set; }
    }
} 
```

运行应用程序时，将鼠标光标移动到树视图中，使用鼠标滚轮滚动到底部，然后滚动到顶部，然后再次开始向下滚动。在中间某处抛出以下异常：

```
System.ArgumentNullException was unhandled
  HResult=-2147467261
  Message=Value cannot be null.
Parameter name: element
  Source=PresentationCore
  ParamName=element
  StackTrace:
       at MS.Internal.Media.VisualTreeUtils.AsNonNullVisual(DependencyObject element, Visual& visual, Visual3D& visual3D)
       at System.Windows.Media.VisualTreeHelper.GetParent(DependencyObject reference)
       at System.Windows.Controls.VirtualizingStackPanel.FindScrollOffset(Visual v)
       at System.Windows.Controls.VirtualizingStackPanel.OnAnchorOperation(Boolean isAnchorOperationPending)
       at System.Windows.Controls.VirtualizingStackPanel.OnAnchorOperation()
       at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
       at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler)
       at System.Windows.Threading.DispatcherOperation.InvokeImpl()
       at System.Windows.Threading.DispatcherOperation.InvokeInSecurityContext(Object state)
       at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Windows.Threading.DispatcherOperation.Invoke()
       at System.Windows.Threading.Dispatcher.ProcessQueue()
       at System.Windows.Threading.Dispatcher.WndProcHook(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
       at MS.Win32.HwndWrapper.WndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
       at MS.Win32.HwndSubclass.DispatcherCallbackOperation(Object o)
       at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
       at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler)
       at System.Windows.Threading.Dispatcher.LegacyInvokeImpl(DispatcherPriority priority, TimeSpan timeout, Delegate method, Object args, Int32 numArgs)
       at MS.Win32.HwndSubclass.SubclassWndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam)
       at MS.Win32.UnsafeNativeMethods.DispatchMessage(MSG& msg)
       at System.Windows.Threading.Dispatcher.PushFrameImpl(DispatcherFrame frame)
       at System.Windows.Threading.Dispatcher.PushFrame(DispatcherFrame frame)
       at System.Windows.Threading.Dispatcher.Run()
       at System.Windows.Application.RunDispatcher(Object ignore)
       at System.Windows.Application.RunInternal(Window window)
       at System.Windows.Application.Run(Window window)
       at System.Windows.Application.Run()
       at VirtualTreeView.App.Main() in d:\Docs\Projects\_Try\VirtualTreeView\obj\Debug\App.g.cs:line 0
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart() 
```

您还可以看到异常不是唯一的问题。上下滚动时，滚动条不断改变其大小。（同样的问题不会出现在`ListBox`无法预测大小的情况下，但是在查看整个列表后会记住总高度。）

**问题：**如何使滚动条行为正常并摆脱异常？（我不介意链接到替代 TreeView 控件或支持这种情况的虚拟化面板。）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-06-05T07:54:27.937

为了使链接更加突出，我也将其发布在答案中。看起来框架代码中有一个错误，还没有找到解决方法。我已经报告了 Microsoft Connect 上的错误：

[**Microsoft Connect：在虚拟化 WPF TreeView 中滚动非常不稳定**](https://connect.microsoft.com/VisualStudio/feedback/details/789438/scrolling-in-virtualized-wpf-treeview-is-very-unstable)

@sixlettervariables 在评论中发布了一个可能相关的错误：

[Microsoft Connect：WPF 应用程序在特定条件下滚动 TreeView 时冻结](http://connect.microsoft.com/VisualStudio/feedback/details/763639/wpf-application-built-on-net-4-0-freezes-under-system-with-net-4-5-while-scrolling-the-treeview-under-specific-conditions)

如果您可以重现错误，请投票。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-07-19T19:48:51.893

从 .NET 5 开始，这个问题*仍然*存在于 WPF 中，并且微软已经停用了 Microsoft Connect，因此不清楚这是否已经在他们的雷达上。我遇到了同样的问题，偶然发现了一个对我有用的修复程序。本质上，它只是在做 TreeView 应该做的同样的事情，使用 HierarchichalDataTemplate 来呈现每个节点，但是在滚动时内置的 TreeView 崩溃的地方，这个版本不会（在我的情况下是在项目树上）。

```
<DockPanel>
   <DockPanel.Resources>
      <HierarchicalDataTemplate DataType="{x:Type src:Item}" ItemsSource="{Binding Path=Children}">
         <TextBlock Text"{Binding}"/>
      </HierarchicalDataTemplate>
   </DockPanel.Resources>

   <TreeView x:Name="tvwItems" VirtualizingStackPanel.IsVirtualizing="True" VirtualizingStackPanel.VirtualizationMode="Recycling" ItemsSource="{Binding Items}">
   </TreeView>
</DockPanel> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-04T08:35:08.943

默认情况下，Virtualization Stack 面板使用像素渲染来渲染子元素，而 Recycling 模式将丢弃 UI 中不再需要的 treeview 容器中的每个元素。这会导致滚动条大小自动更改。VirtualizationPanel 像素渲染技术也会导致滚动选项变慢。通过更改为 VirtualizingPanel.ScrollUnit="Item" 将解决您的问题。下面的 xaml 对我来说工作正常

```
<Window x:Class="VirtualTreeView.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="800" Width="400" Left="0" Top="0"
    DataContext="{Binding RelativeSource={RelativeSource Self}}">
<Grid>
    <TreeView x:Name="tvwItems"
              ItemsSource="{Binding Items}"
              VirtualizingPanel.IsVirtualizing="True"
              VirtualizingPanel.VirtualizationMode="Recycling"
              VirtualizingPanel.ScrollUnit="Item"
              >
        <TreeView.ItemTemplate>
            <DataTemplate>
                <Border Height="{Binding Height}"
                        Width="{Binding Height}"
                        BorderThickness="1"
                        Background="DarkGray"
                        BorderBrush="DarkBlue" />
            </DataTemplate>
        </TreeView.ItemTemplate>
    </TreeView>
</Grid>
</Window> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-22T09:05:25.810

我在加载窗口时在 wpf 应用程序中遇到了同样的错误。Visual Studio 2017 经过一些研究，发现了类似这篇文章的内容，我注意到它是有趣的 WindowStyle 元素。

在我的情况下，wpf 和 windows 属性值中的 XAML 设计窗口中的错误是

> 窗口样式 =“无”

我已将其值更改为`WindowStyle ="SingleBorderWindow"`，此错误已消失

# java - 运行程序而不结束它

> ID：14092693
> 
> 赞同：0
> 
> 时间：2012-12-30T17:08:17.913
> 
> 标签：java, methods

我如何选择 1 或 2 或 3 并在运行程序后返回选择选项菜单...我不希望我的程序在选择 1 或 2 后结束我该怎么做...提前谢谢。

这是我的选择选项程序...

```
public class Dialog
{

        AddList ad = new AddList();
        int select;
        void showDialog()
        {
            System.out.println("Enter The 1 for addnig data");
            System.out.println("Enter The 2 for Waching the MARK data");
            System.out.println("Enter The 3 for Waching the NAME data");
            System.out.println("Enter The 4 for Waching All the data of students");
            System.out.println("Enter The 5 for Waching SUM of the mark of Students");
        }

        void progressInput()
        {

            Scanner scan = new Scanner(System.in);
            select = scan.nextInt();

            if (select == 1)
            {
                ad.AddListIntoArray();
            }
            else if (select == 2)
            {
                ad.PrintMarkFromTheArray();
            }
            else if (select == 3)
            {
                ad.PrintNameFromTheArray();
            }
            else if (select == 4)
            {
                ad.PrintNameMarkFromTheArray();
            }
            else if (select == 5)
            {
                ad.SendMark();
            }
            else
            {
       System.out.println("Please Input range from 1 to 5 and not something else");
            }
        }
} 
```

这是我的主程序....这里一切正常，但我不希望我的程序在选择 1 或 2 后结束我的意思是程序 1 执行并显示结果并返回选择选项菜单...

```
public class Main
{

    public static void main(String[] args)
    {

         Dialog dlg = new Dialog();
         dlg.showDialog();
         dlg.progressInput();

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T17:10:21.623

将您的代码放入`while(true)`循环中。

```
Dialog dlg = new Dialog();
while(true){
    dlg.showDialog();
    dlg.progressInput();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T17:16:10.397

添加

```
System.out.println("Enter The 1 for addnig data");
System.out.println("Enter The 2 for Waching the MARK data");
System.out.println("Enter The 3 for Waching the NAME data");
System.out.println("Enter The 4 for Waching All the data of students");
System.out.println("Enter The 5 for Waching SUM of the mark of Students");
System.out.println("Enter The 6 for Exit"); 
```

然后

```
Scanner scan = new Scanner(System.in);
int select = 0;
do {
    System.out.println("Enter your option");
    select = scan.nextInt();
    if (select == 1) {
        ad.AddListIntoArray();
    } else if (select == 2) {
        ad.PrintMarkFromTheArray();
    } else if (select == 3) {
        ad.PrintNameFromTheArray();
    } else if (select == 4) {
        ad.PrintNameMarkFromTheArray();
    } else if (select == 5) {
        ad.SendMark();
    }else if (select == 6) {
        System.out.println("Exiting...");
    }
    else {
        System.out.println("invalid input");
    }
} while (select != 6); 
```

# c# - 将文件路径保存为注册表中的子键

> ID：14092695
> 
> 赞同：1
> 
> 时间：2012-12-30T17:08:18.933
> 
> 标签：c#, .net, vb.net, registry, character

我目前正在将文件路径保存到 Windows 注册表中的子项，如下所示：

```
Registry.SetValue(String.Format("HKEY_CURRENT_USER\Software\MyApp\{0}\{1}\{2}\{3}", FilePath.Replace("\", "/"), x, y, z), SettingName, SettingValue) 
```

由于 Windows 注册表不接受`\`子键名称中的字符，因此我将其替换为`/`.

所以我想知道这是否可以，是否还有文件名可以具有但子键名不能具有的任何其他字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T17:29:02.113

Backslash is the only character not allowed. [See this post](https://stackoverflow.com/questions/1013473/what-are-the-valid-characters-for-registry-keys-and-valuenames)

To answer your implied question as to whether this is OK: it might be more elegant to store the whole file path as a string value in a key. If you have a need to represent the file structure in the key name itself then your approach is probably the cleanest.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T17:26:55.273

我不这么认为没关系。我没有尝试过，但它无法正常工作。试试这样；

```
Registry.SetValue(String.Format("HKEY_CURRENT_USER\\Software\\MyApp\\{0}\\{1}\\{2}\\{3}", x, y, z), SettingName, SettingValue); 
```

`\\`是一个特殊字符。例如，如果您尝试；

```
Console.WriteLine("\"); 
```

编译器给你一个错误。但是，如果您将其写`\`为输出，那么您确实喜欢；

```
Console.WriteLine("\\"); 
```

如您所见，这不是注册表问题。C# 定义了以下字符转义序列，请查看[MSDN](http://msdn.microsoft.com/en-us/library/h21280bw%28v=vs.80%29.aspx)：

*   `\'`- 单引号，字符文字需要
*   `\"`- 双引号，字符串文字需要
*   `\\`- 反斜杠
*   `\0`- Unicode 字符 0
*   `\a`- 警报（字符 7）
*   `\b`- 退格（字符 8）
*   `\f`- 换页（字符 12）
*   `\n`- 换行（字符 10）
*   `\r`- 回车（字符 13）
*   `\t`- 水平制表符（字符 9）
*   `\v`- 垂直引号（字符 11）
*   `\uxxxx`- 具有十六进制值的字符的 Unicode 转义序列`xxxx`
*   `\xn[n][n][n]`- 具有十六进制值的字符的 Unicode 转义序列`nnnn`（可变长度版本`\uxxxx`）
*   `\Uxxxxxxxx`- 具有十六进制值的字符的 Unicode 转义序列`xxxxxxxx`（用于生成代理）

另请阅读[`Structure of the Registry`](http://msdn.microsoft.com/en-us/library/ms724946%28VS.85%29.aspx)

> 每个键都有一个由一个或多个可打印字符组成的名称。键名不区分大小写。键名不能包含反斜杠字符 ()，但可以使用任何其他可打印字符。值名称和数据可以包含反斜杠字符。

# android - 什么android表单控制器用于选择大范围的数字

> ID：14092700
> 
> 赞同：2
> 
> 时间：2012-12-30T17:08:50.763
> 
> 标签：android

我正在开发一个跟踪体重测量的应用程序。我需要用户能够输入一个代表体重的数字，其大小范围从 0.00 公斤到通常 300.00 公斤。体重在 10 公斤以下（50 克，主要针对婴儿）时，体重精度为小数点后两位，成人为小数点后一位（100 克）。数字的总范围是 3900。

预计测量之间的差异最大为 +-2 kg，但取决于测量频率，它也可能更高。

我一直在使用带有数据验证的简单文本输入字段，但注意到它是迄今为止填写表格最慢的部分。

在选择最合适的表单控制器方面的任何帮助将不胜感激。我只是希望用户在从大量数字中快速准确地选择时获得最佳体验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T17:23:40.307

我建议使用普通的数字选择器小部件，但请记住用户上次选择的内容，因此他/她只需通过单击 +/- 一次或两次来添加/减去一个小数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T17:28:24.663

去自定义视图。读这个

[http://developer.android.com/training/custom-views/index.html](http://developer.android.com/training/custom-views/index.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T17:48:42.503

没有这样的小部件，我认为您需要创建自己的小部件以获得最佳结果。但也许你会喜欢使用启用快速滚动的标准视图之一，如[SeekBar](https://stackoverflow.com/questions/3010019/android-seekbar-minimum-and-continuous-float-value-attributes)或 ListView。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T23:43:46.127

我已经实现了一个自定义视图，它是一个圆形搜索栏。搜索栏用于精确选择值，而 +/- 按钮以更大的间隔更改值。它工作得很好。你可以在这里找到源代码：[https ://github.com/ismarslomic/CircularSeekBar](https://github.com/ismarslomic/CircularSeekBar)

![时钟滑块示例](../Images/9d131d991ef61d08d26cd8d1bcd96ae0.png)

# c++ - 如何在 C++ 中隐藏一个类？

> ID：14092705
> 
> 赞同：9
> 
> 时间：2012-12-30T17:09:17.257
> 
> 标签：c++, oop, visibility

假设我有 2 个我希望可见的类（在给定的头文件中）和一个作为其祖先的类，我希望仅对前面提到的两个类可见。如何实现在 C++ 中不可见的类功能？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-30T18:38:31.213

滥用 a`class`以作为`namespace`意志的行为。我不推荐这种模式。

```
class hidden_stuff {
private: // hide base from everyone
    struct base {
        // contents
    };
public:
    class derived1;
};
typedef class hidden_stuff::derived1 derived1;

class hidden_stuff::derived1
    : private hidden_stuff::base {}; // private inheritance required
            // or hidden_stuff::base is accessible as derived1::base 
```

* * *

## *真正的*解决方案（虽然在技术上不能满足问题）

一个更可取的解决方案是使用明确命名`namespace`的`impl::`or `detail::`，这将向用户传达他们不应该在内部使用任何类，并停止对重载等任何可能的不良影响。这就是大多数库（甚至标准库实现）对用户“隐藏”类的方式。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-30T18:31:49.767

这不可能。

C++ 要求一个类在它被用作基础时被完全定义，并且由于它的包含机制，任何在类定义时完全定义的东西都必须对所有可以看到该类定义的人可见.

C++ 具有防止墨菲（事故）但不防止马基雅维利（黑客）的机制。

* * *

话虽这么说，目的本身是可疑的，我能理解的唯一原因是防止用户依赖您的`Derived`类派生自此`Fantom`基础的事实。好吧，私下派生：`class Derived: private Fantom {};`或使用组合来代替`class Derived { private: Fantom _fantom; };`都可以实现这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-16T15:20:37.900

我建议不要隐藏课程，而是使用它。例如：

```
class Hidden
{
  private:
    friend class Exposed;
    Hidden() {}
    int hidden_x;
};

class Exposed : private Hidden
{
  public:
    Exposed() : Hidden() {}
    void DoStuff() { printf( "%d" , hidden_x ); }
}; 
```

所以你可以： - 在你的代码中创建任意数量的 Exposed 类实例 - 从这些实例中调用 DoStuff() 方法

但是您不能： - 实例化 Hidden 类（私有构造函数） - 直接或通过 Exposed 类对 Hidden 类成员进行操作（它们是私有的）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-17T21:03:12.460

匿名答案的变体，您可以添加隐藏类的私有成员，而不是私有继承。

```
class Hidden
{
   private:
      friend class Exposed;
      Hidden() {}
      int hidden_x;
};

class Exposed
{
  public:
      Exposed() {}
      void DoStuff() { printf( "%d" , hidden.hidden_x ); }
  private:
      Hidden hidden_;
}; 
```

# java - tomcat前进阀

> ID：14092708
> 
> 赞同：0
> 
> 时间：2012-12-30T17:09:33.927
> 
> 标签：java, tomcat-valve

我需要在 Tomcat 服务器上进行以下服务器端重定向或转发： URL [http://portal.customer_name](http://portal.customer_name)需要重命名/重定向为[http://portal.customer_name/customer_name](http://portal.customer_name/customer_name)。所以简而言之，一个没有上下文路径的 url 将被重定向到具有上下文路径的相同 url。我设法通过过滤器做到这一点，使用 request.getRequestDispatcher().forward(request, response); 但是这似乎不适用于阀门。

到目前为止，我得到了以下信息：

```
public void invoke(Request request, Response response) throws IOException, ServletException {
    String context = getForwardpath(request);
    request.getRequestDispatcher(context).forward(request, response);
    this.getNext().invoke(request, response);
}

private String getForwardpath(Request rq){
    String context = rq.getServletContext().getContextPath();
    /.../
    return context;
} 
```

我部署了一些似乎接收原始 url 但不接收重定向的 servlet。是否可以像这样进行服务器端重定向。请注意，我需要的是阀门，而不是过滤器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T17:26:56.520

发帖前有没有[搜到这个？](https://www.google.com/search?q=tomcat%20redirect%20valve)谷歌提出了一篇[博客文章](http://s-n-ushakov.blogspot.com/2011/08/tomcat-redirect-valve.html)，讨论了这个主题 wrt Tomcat，并包括这样一个 Valve 的实现，以及一个的[JBoss 实现](http://docs.jboss.org/jbossweb/3.0.x/rewrite.html)。所以我会说，“是的，这绝对是可能的。” 如果其中一个不适合您的需求，您当然至少可以使用他们的源代码来引导您朝着正确的方向前进，然后在遇到麻烦时再提出一个更具体的问题。

**更新：**您使用该术语的方式不存在“服务器端重定向”之类的东西。重定向意味着将 3xx 系列响应代码发送回用户代理，告诉它有关它请求的资源的一些信息。话虽这么说，我自己没有做过任何 Valve 开发，但从[Valve.invoke() 的描述来看](http://tomcat.apache.org/tomcat-7.0-doc/api/org/apache/catalina/Valve.html#invoke%28org.apache.catalina.connector.Request,%20org.apache.catalina.connector.Response%29)，我猜如果你只是将 Valve 放在 Tomcat 配置中足够高，你可以只修改请求 URI在途中，让它正常处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-12T07:47:45.447

如果将请求更改为同一实例上的不同上下文，则需要 ./conf/context.xml (tomcat) 中的 crossContext="true"。

[https://tomcat.apache.org/tomcat-7.0-doc/config/context.html](https://tomcat.apache.org/tomcat-7.0-doc/config/context.html)

# algorithm - 由无序数组构造的两棵二叉搜索树的相等性

> ID：14092710
> 
> 赞同：9
> 
> 时间：2012-12-30T17:09:49.950
> 
> 标签：algorithm, time-complexity, binary-search-tree

**给定两个大小为 N 的未排序数组，我们要确定由它们构造的二叉搜索树是否相等。**

因此，数组的元素被挑选出来并插入到一个基本的（没有平衡，没有红黑，什么都没有）二叉搜索树中。直接给定两个数组，我们能否确定它们是否产生相同的二叉搜索树。

有一个明显的 O(N ² ) 最坏情况时间复杂度解决方案：构造两棵树，并比较它们的相等性。

**是否有 O(N) 或 O(N log N) 解决方案？**

我试图提取的问题的想法是：BST 的构造取决于元素的相对位置。例如，如果在一个数组中紧挨着 20 有一个值为 51 的元素，则在另一个数组中必须没有 20 到 51 之间的元素才能使树相等（否则 20 的右孩子将是那个数字，而不是 51 ）。

我确实尝试了几种方法：

1.  天真的方法：构建 2 棵树并进行比较。
2.  我使用了一个有趣的变体，我将数组分成 2 个（一个较小的子数组和一个比枢轴大的子数组），并递归地将左数组传递给左孩子，另一个传递给右孩子。就地和厚脸皮，但仍然 O(N ² )。
3.  一位朋友尝试将最长的子序列应用于它并找到它然后进行比较，但这是不正确的。
4.  我正在尝试使用 LinkedHashMap 解决它，但我很难证明它的正确性。

帮助，以及解决此问题的任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T20:47:10.680

## 概括

[我认为您可以通过使用范围最小查询](http://en.wikipedia.org/wiki/Range_Minimum_Query)来构造二叉树，将天真的方法从 O(N^2) 改进为 O(NlogN) 。

## 快速二叉树构造

假设我们要为数组 A 构造二叉树。

这个想法是首先构造一个数组 B，其中 B[i] 是 A 中第 i 个最大元素的位置。这可以通过 O(NlogN) 中的排序来完成。

然后，我们可以对数组 B 使用范围最小值查询，以允许我们找到给定范围 a<=i<=b 的 B[i] 的最小值。换句话说，这让我们可以找到 A 中的第一个位置，其中我们有一个介于第 a 个和第 b 个最大元素之间的值。

RMQ 需要时间 O(N) 进行预处理，然后可以在 O(1) 时间内回答查询。

然后我们可以递归地为每个元素找到它的左右子元素（如果有的话）并检查它们是否匹配。

## 伪代码

假设这两个数组是 A 和 A2，为了简单起见，我们假设 A,A2 已经过预处理，使得第 i 个最大元素等于 i。

如果 find_children(1,N) 为 True，则这些树是相同的：

```
find_children(low,high)
   if high==low
      return True
   node = A[RMQ(low,high)]
   return node == A2[RMQ2(low,high)]
          and find_children(low,node-1)
          and find_children(node+1,high) 
```

该函数为树中的每个节点（和空子指针）调用一次，因此需要时间 O(N)。

总的来说，这是 O(NlogN)，因为预处理排序需要 O(NlogN)。

## 解释

假设我们已将元素 20 和 51 输入到二叉树中。然后我们将有 20 作为根，51 作为右孩子。要找到 51 的左孩子，我们需要找到数组中第一个值大于 20 且小于 51 的元素。该值由我们应用于范围 20+1->51- 的范围最小查询给出1.

因此，与以自然方式将它们插入二叉树相比，我们可以更快地找到所有节点的左右子节点（仅在理论上最坏的情况下更快 - 对于典型示例，其他方法可能更快）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T22:18:38.563

“构建两棵树并进行比较”不一定是 O(N^2)。您可以使用辅助数据结构，让您在 O(log N) 而不是 O(N) 中找到新节点的位置，因此即使正在构建 BST，BST 的构建也是 O(N log N)不平衡。

对于 BST 中的每个空位置（即节点`pos`中的空闲子槽），都有一个关联的间隔`(a_pos,b_pos)`（其中一个值可能是 +/- 无穷大），这样`v`当`pos`且仅当该值在区间内。

您可以将间隔存储在平衡的间隔树中，以便可以在 O(log N) 中找到每个新到达值的位置。间隔树的更新也是 O(log N)，因为您只需将一个间隔替换为两个。

（实际上，区间永远不会重叠，因此辅助结构可以是普通的旧（平衡）BST，而不是区间树。）

例子：

采用以下非平衡 BST，为数组前缀 [1,10,2,9,3, ...] 构建

```
 1
 /  \
a  10
   / \
  2   f
 / \
b   9
   / \
  3   e
 / \
c   d 
```

字母`a-f`表示可以放置新节点的可能位置（零叶）。每个字母都有一个相关的间隔，如下所示：

```
[-inf,1] -> a
[1,2] -> b
[2,3] -> c
[3,9] -> d
[9,10] -> e
[10, +inf] -> f 
```

一个值的新节点`v`将被添加到 BST 中由所属区间确定的位置`v`。零将结束于`a`， 5 在`d`等。关键思想是将这些信息存储在树之外。

如果您可以有效地表示上表（带有指向实际树节点的链接），那么向树中添加新节点将需要 O(access to table) + O(1)。O(1) 表示将节点添加到非平衡 BST 中，前提是您已经知道放置它的位置。添加 5 不需要与 1,10,2,9 和 3 进行比较，而是会在表格中查找并直接放置在`d`.

放置新节点后，显然还必须更新表。表示表格的数据结构可以是区间树（[http://en.wikipedia.org/wiki/Interval_tree](http://en.wikipedia.org/wiki/Interval_tree)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-13T07:01:29.560

尝试这个：

```
int identical(struct node* a, struct node* b) 
{
    if (a==NULL && b==NULL)
    {
        return(true);
    } 
    else if (a!=NULL && b!=NULL)
    {
        return(a-> data == b-> data && identical(a->left, b->left) && identical(a->right, b->right));
    } 
    else 
        return(false);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-15T10:50:16.507

我想出了以下代码。它工作正常，尽管分区效率低下。

```
 bool isBST (vector<int> vec1, vector<int> vec2) {
    if (vec1.size() == 0 && vec2.size() == 0)
        return true;
    if (vec1.size() != vec2.size())
        return false;
    if (vec1[0] != vec2[0])
        return false;

    vector<int> temp1;
    vector<int> temp2;
    vector<int> temp3;
    vector<int> temp4;
    for (int k = 1; k < vec1.size(); k++) {
       if(vec1[k] < vec1[0])
           temp1.push_back(vec1[k]);
       else
           temp2.push_back(vec1[k]);

       if(vec2[k] < vec2[0])
           temp3.push_back(vec2[k]);
       else
           temp4.push_back(vec2[k]);
    }

    return isBST(temp1, temp3) && isBST(temp2, temp4);

} 
```

# macos - 如何在核心数据持久存储中添加“幻数”？

> ID：14092712
> 
> 赞同：0
> 
> 时间：2012-12-30T17:09:59.643
> 
> 标签：macos, core-data, file-format, magic-numbers

是否可以在核心数据持久存储中添加一些“幻数”数据？

我有一个使用自定义二进制文件格式的旧应用程序。每个文件都以一个 5 字节的幻数（比如说`0A 0B 0C 0D 0E`）和一个 1 字节的格式版本标识符开始；之后是实际数据。当用户尝试打开文件时，应用程序的现有版本会执行以下检查：

*   如果文件的前 5 个字节与幻数不匹配，用户会收到一条消息，如“文件不是此应用程序可以读取的格式。它可能有错误的文件扩展名。”</li>
*   如果幻数匹配，但版本标识符高于应用程序可以读取的版本，用户会收到一条消息，如“该文件是使用此应用程序的较新版本创建的。您需要升级到新版本。”</li>

我想利用核心数据存储在新版本的应用程序中，同时仍然使用相同的文件扩展名并保持与旧版本应用程序的适当兼容性：尝试使用旧版本打开使用新版本应该得到他们应该升级的消息，而不是其他消息。这可能吗？如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T20:09:17.033

`NSManagedObjectModel`有一个`versionIdentifiers`返回一组开发人员定义的字符串，这些字符串标识“包含的”模型版本。（请记住，当迁移到新模型版本时，旧模型包含在模型文件/目录中。）

实际上，文档指出

> 此值旨在用作调试提示，以帮助您确定组合以创建合并模型的模型。

但您仍然可以完全出于您的目的使用此属性的内容。

至于“幻数”，在我看来，您试图在未经用户同意的情况下使数据存储格式无效。馊主意。在我看来，你应该选择另一种设计模式。

# objective-c - 如何同步两个 UIDatePickers

> ID：14092729
> 
> 赞同：-1
> 
> 时间：2012-12-30T17:12:08.893
> 
> 标签：objective-c, ios6, xcode4.5

我的 iPad 应用程序（XCode 4.5、Storyboards、iOS 6.0）中有两 (2) 个 UIDatePickers。一个 UIDatePicker 用于“开始”日期/时间，另一个用于“结束”时间（不显示日期，仅显示时间）。

我希望能够将第二个选择器（“结束”时间）**日期**设置为等于“开始”日期/时间选择器中选择的日期。

我查看了 Google 和 SO，但一无所获。我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T17:23:14.193

如果在不同的视图和控制器上，则需要将其传递`date`给其他类。为此，您可以使用委托或通知。

然后使用这样的东西

采用`[secondDatePicker setDate:firstDatePicker.date]`

如果两者都在同一个控制器上，您可以简单地添加一个操作方法：

```
- (IBAction)datePickerValueChanged:(UIDatePicker *)picker {
  _secondDatePicker.date = picker.date;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T17:23:38.870

为第一个 datePicker 的 ValueChanged 事件添加一个操作处理程序，并在其值更改时将其应用于第二个选择器。

```
- (IBAction)datePickerValueChanged:(UIDatePicker *)picker {
  self.secondPicker.date = picker.date;
} 
```

# java - 如何在 Java 应用程序中运行 SQLite VACUUM 命令？

> ID：14092735
> 
> 赞同：1
> 
> 时间：2012-12-30T17:13:22.683
> 
> 标签：java, sqlite

**问题：** 我想让我的 Java 应用程序手动运行 SQLite VACUUM 命令？我在下面包含一个代码片段。我尝试过作为 PreparedStatement 和直接声明。我还对解决方案进行了广泛的网络搜索，但没有找到相关示例。

**怎么了？** 当我运行我的代码时，系统会暂停。查看目录，执行我的代码时文件大小没有减小。RecordSet 也返回 false。

但是，如果我通过 Firefox 运行 SQLiteManager 并运行紧凑型数据库，那么数据库确实是紧凑型的。注意：我在压缩之前制作了数据库的副本，以便可以看到大小的差异。

**健全性检查** ——我确保数据库被所有其他应用程序（包括 SQLiteManager）关闭。--没有已知的事务正在运行。--不抛出异常。

**代码片段：** 我将测试代码保存在里面。这不是生产代码，因此错误处理等可用但很少。

```
try {
    Connection conn = db.getConnection() ;
    StringBuilder sql = new StringBuilder() ;
    sql.append("VACUUM");

    //PreparedStatement prep = conn.prepareStatement(sql.toString()) ;
    Statement stat = conn.createStatement() ;
    boolean rs = stat.execute(sql.toString()) ;

    System.out.println("Executed vacuum " + rs ) ;     

    //Testing code--preparedstatement attempts
    //conn.setAutoCommit(false);
    //boolean rs = prep.execute() ;
    //conn.setAutoCommit(true);

    } catch (Exception e) {
       //Edited back in after posting to StackOverflow
        System.out.println(
                ".SQLiteVacuum :: exception " + 
                e.getMessage() + " " + e.getClass().getName() );
        e.printStackTrace() ;
    } 
```

**交叉引用** Java 1.6+ SQLite 3+ Xerial JDBC 驱动程序

**附录**

```
private final String dbJDBCdriverclassname = "org.sqlite.JDBC" ;
private final String dbJDBCpreconnectionstring = "jdbc:sqlite:" ;
        // Setup the driver reference
        Class.forName(dbJDBCdriverclassname) ; //"org.sqlite.JDBC"

        // Create the connection string
        String connstring = dbJDBCpreconnectionstring + this.getDBConnectionFullFileName() ;

        // create the connection
        dbconnection = 
                DriverManager.getConnection(connstring) ; // "jdbc:sqlite:test.db" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-04-17T21:57:35.183

我知道这已经很老了，但是如果每个人都需要这里，那就去吧。

```
Statement stmt = null;
ResultSet rs = null;
try {
    Connection conn = DBConnection.getConnection();//something to get a connection
    stmt = conn.createStatement();
    stmt.executeUpdate("VACUUM");
} catch (SQLException ex) {
    //Something if you like, or not you're the boss!
} finally {
    DBConnection.closeResources(rs, stmt);//something to close all the resources
} 
```

有了这个片段，我在 185KB 的测试数据库中节省了 63KB。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T17:18:48.257

您是否在数据源中使用了正确的驱动程序？您是否正确配置它？那是我们没有看到的代码（或配置）的一部分。

此外，如上述用户所说，打印堆栈跟踪或其他内容，以便我们知道是否引发了异常。很高兴知道 Statement 的 execute 方法是返回 true 还是 false。

# android - 如何将谷歌表单与 android webview 集成？

> ID：14092736
> 
> 赞同：2
> 
> 时间：2012-12-30T17:13:27.797
> 
> 标签：android, webview, google-sheets, google-drive-api

有没有办法将谷歌表单与 android webview 集成？我有一个简单的要求，其中几个用户将在 Android 平板电脑上填写谷歌表格。最终结果将存储在 Google Drive 电子表格中。但是这种方法的唯一问题是如果网络不可用，那么用户就不能填写这些表格。作为一种解决方法，我正在考虑创建一个 android 接口，它将数据存储在本地数据库中，并且当网络可用时，数据将被发布到谷歌文档。由于表单可能会更改，因此有一种方法可以从谷歌表单动态创建 android UI，或者在 android 中有一个动态离线版本的谷歌表单，这样我就不必在每次新字段时更改 android UI被添加到表单中。谢谢沙克蒂

# symfony - 为什么 Symfony 2 安装所有 DEV 版本的供应商模块？

> ID：14092747
> 
> 赞同：1
> 
> 时间：2012-12-30T17:14:48.260
> 
> 标签：symfony, symfony-2.1, composer-php

所以我试图安装 DoctrineMongoDBBundle 并且它所说的部分说明是将以下内容添加到我的作曲家文件中：

```
{
    "require": {
        "doctrine/mongodb-odm-bundle": "3.0.*"
    },
    "minimum-stability": "dev"
} 
```

所以我添加了上面的内容，我的作曲家文件如下所示：

```
{
    "name": "symfony/framework-standard-edition",
    "description": "The \"Symfony Standard Edition\" distribution",
    "autoload": {
        "psr-0": { "": "src/" }
    },
    "require": {
        "php": ">=5.3.3",
        "symfony/symfony": "2.1.*",
        "doctrine/orm": ">=2.2.3,<2.4-dev",
        "doctrine/doctrine-bundle": "1.0.*",
        "twig/extensions": "1.0.*@dev",
        "symfony/assetic-bundle": "2.1.*",
        "symfony/swiftmailer-bundle": "2.1.*",
        "friendsofsymfony/user-bundle": "*",
        "friendsofsymfony/rest-bundle": "*",
        "jms/serializer-bundle": "*",
        "symfony/monolog-bundle": "2.1.*",
        "sensio/distribution-bundle": "2.1.*",
        "sensio/framework-extra-bundle": "2.1.*",
        "sensio/generator-bundle": "2.1.*",
        "jms/security-extra-bundle": "1.2.*",
        "jms/di-extra-bundle": "1.1.*",
        "kriswallsmith/assetic": "1.1.*@dev",
        "doctrine/mongodb-odm-bundle": "3.0.*"
    },  "minimum-stability": "dev",
    "scripts": {
        "post-install-cmd": [
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
        ],
        "post-update-cmd": [
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
        ]
    },
    "extra": {
        "symfony-app-dir": "app",
        "symfony-web-dir": "web"
    }
} 
```

现在，当我运行 sudo php composer.phar update 时，它​​删除了所有捆绑包并安装了它们的开发版本。

我如何获得除 Mongo 捆绑包之外的非 DEV 版本的捆绑包？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T17:19:39.500

您可以使用以下标签对其进行标记`dev`：

```
{
    ...,
    "require": {
        ...,
        "doctrine/mongodb-odm-bundle": "3.0.*@dev"
    }
} 
```

并删除该`minimum-stability`属性，该属性将默认恢复为稳定状态。

可以在[此处](http://getcomposer.org/doc/04-schema.md#package-links)找到有关此的文档。

# java - NetBeans RCP 查找类似于 Eclipse RCP X？

> ID：14092749
> 
> 赞同：1
> 
> 时间：2012-12-30T17:14:52.980
> 
> 标签：java, eclipse-plugin, eclipse-rcp, netbeans-platform, netbeans-plugins

我有一年使用 NetBeans RCP 的经验。最神奇的是 Lookup (org.netbeans.lookup)，它是整个 NetBeans 模块间通信系统的 Alpha 和 Omega。现在我在 Eclipse RCP 平台中寻找类比。是数据绑定吗？要不然是啥？

谢谢你的建议，吉尔卡

感谢丹尼尔

讨论：

*   静态查找

是的，如果我们谈论“静态”查找。此查找内容“实例”服务提供者的实现（操作、Windows 等）。我认为，这类似于 Eclipse RCP 扩展点是的（谢谢）。

*   动作全局查找

在 NetBeans RCP 中，所有 TopComponents（类似于 View 或 Editor EClips）都有自己的 Lookup。有所有选择（节点）或以编程方式添加的对象。当一些 TC 被聚焦时，来自这个查找的这些对象在 actionGlobaCotext 中。任何其他 TC 都可能有“存在此 CLASS 的任何对象”的侦听器 - 这是模块间（在 UI 中）通信的目标。

但是在 Eclipse 中：它是基于 Listeners 和 IEditorInput 的吗？或在 UI 中进行数据记录。

*   用户查找

在这个视图中，所有对象都可能有自己的查找`Map<Class<T>,List<? extends T>>`......这是“java中的多继承”的基础。

但在 Eclipse 中：我不知道。（当然，我可以从NB平台在Eclipse中使用org.netbeans.lookup）

感谢讨论，吉尔卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T18:12:24.517

如果我正确理解 Netbeans RCP Lookup 是什么，那么在 Eclipse RCP 中它是[扩展点](http://wiki.eclipse.org/FAQ_What_are_extensions_and_extension_points?)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T18:29:27.427

你能澄清一下查找的用例吗？

看起来大多数情况应该由[IAdaptable](http://help.eclipse.org/juno/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/core/runtime/IAdaptable.html)处理。如果您需要将自适应对象“强制转换”为您调用的某个接口/类“adaptable.getAdapter(MyClass.class)” - 对象本身或通过扩展点贡献的工厂会将适配器实例化为适当的类型（如果可能的话）。这样，您的操作可以尝试将选定对象（无论是编辑器还是文件元素）“投射”到某个接口并调用其方法。

# ios - 创建自定义 UITableViewCell 以供重用

> ID：14092753
> 
> 赞同：0
> 
> 时间：2012-12-30T17:15:06.257
> 
> 标签：ios, uitableview

我正在为客户和产品创建自定义 UITableViewCell。单元格设计完全相同，因为它由一个图像和几个标签组成。在这些情况下，最佳做法是什么。在这一点上，我对客户和产品有不同的细胞类别。此外，我将单元格直接创建到情节提要中，因此无法重复使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T17:30:32.420

您可以在单独的 xib 文件中布置单元格（使用 UITableViewCell 或子类作为顶级对象），而不是在情节提要中使用无法在视图控制器之间重用的原型，然后将其注册到您的表格视图中如此处所述[的](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instm/UITableView/registerNib%3aforCellReuseIdentifier%3a)重用。

然后，您可以在多个地方使用同一个单元格。一个新的单元格将从笔尖构建，或者为你出列，当你出队时......在单元格 for row 方法中。

# c++ - 如何将指针转换为 int

> ID：14092754
> 
> 赞同：14
> 
> 时间：2012-12-30T17:15:05.953
> 
> 标签：c++, pointers, casting

我正在尝试将地址的值存储在非指针 int 变量中，当我尝试对其进行转换时，我得到编译错误“从'int *'到'int'的无效转换”这是我正在使用的代码：

```
#include <cstdlib>
#include <iostream>
#include <vector>

using namespace std;

vector<int> test;

int main() {
    int *ip;
    int pointervalue = 50;
    int thatvalue = 1;

    ip = &pointervalue;
    thatvalue = ip;

    cout << ip << endl;

    test.push_back(thatvalue);

    cout << test[0] << endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-30T19:33:16.453

`int`可能不够大，无法存储指针。

你应该使用`intptr_t`. 这是一个显式大到足以容纳任何指针的整数类型。

```
 intptr_t thatvalue = 1;

    // stuff

    thatvalue = reinterpret_cast<intptr_t>(ip);
                // Convert it as a bit pattern.
                // It is valid and converting it back to a pointer is also OK
                // But if you modify it all bets are off (you need to be very careful). 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-30T17:17:37.257

你可以这样做：

```
int a_variable = 0;

int* ptr = &a_variable;

size_t ptrValue = reinterpret_cast<size_t>(ptr); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-30T17:17:06.710

你为什么要这样做，无论如何你只需要转换，对于 C 代码：

```
thatvalue = (int)ip; 
```

如果您编写 C++ 代码，最好使用`reinterpret_cast`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-30T17:17:37.977

我建议使用`reinterpret_cast`：

```
thatvalue = reinterpret_cast<intptr_t>(ip); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-01T21:57:03.277

我能够使用 C union 语句来实现您想要的。它当然取决于编译器，但它对我有用，就像你认为它应该的那样（Linux，g++）。

```
union {
    int i;
    void *p;
} mix;

mix.p = ip;
cout << mix.i << endl; 
```

在我的特定实例中，我的 int 是 32 位，指针是 48 位。分配指针时，整数值 i 将代表指针的最低 32 位。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-04T20:08:50.243

由于`int *ip;`是一个指向整数的指针并且`int thatvalue = 1;`是一个整数，假设您希望将值存储在assigned to*指向* 的地址处，更改为（注意添加[解引用运算符](https://en.wikipedia.org/wiki/Dereference_operator)以访问*与指针地址处的值等效的值*） .`ip``thatvalue``thatvalue = ip;``thatvalue = *ip;` `*`

# iphone - FbConnect 登录进入应用程序

> ID：14092755
> 
> 赞同：0
> 
> 时间：2012-12-30T17:15:16.943
> 
> 标签：iphone, ios, facebook, fbconnect

我已经在我的应用程序中成功连接了 FBConnect，现在我想以这样一种方式连接，一旦用户从登录名成功登录，我`ViewController`应该打开。但是在哪里使用代码进入我的应用程序..

```
AppDelegate *appdelegte =(AppDelegate*)[[UIApplication sharedApplication]delegate];

[[[appdelegte navigationController] view]removeFromSuperview];

[[appdelegte window]addSubview:[[appdelegte tabBarController]view]];

[[appdelegte tabBarController]setSelectedIndex:0]; 
```

这将是我要输入的代码：- 但是在 Fbconnect 代码中的何处使用它

```
- (void)session:(FBSession*)session didLogin:(FBUID)uid {
    NSString* fql = [NSString stringWithFormat:
                     @"select uid,name from user where uid == %lld", self.usersession.uid];
    NSDictionary* params = [NSDictionary dictionaryWithObject:fql forKey:@"query"];
    [[FBRequest requestWithDelegate:self] call:@"facebook.fql.query" params:params];
    self.post=YES;

    self.usersession =session;
    NSLog(@"User with id %lld logged in.", uid);

    [self getFacebookName];
}

- (void)getFacebookName {
    NSString* fql = [NSString stringWithFormat:
                 @"select uid,name from user where uid == %lld", self.usersession.uid];
    NSDictionary* params = [NSDictionary dictionaryWithObject:fql forKey:@"query"];
    [[FBRequest requestWithDelegate:self] call:@"facebook.fql.query" params:params];
    self.post=YES;
}

- (void)request:(FBRequest*)request didLoad:(id)result {
    if ([request.method isEqualToString:@"facebook.fql.query"]) {
        NSArray* users = result;
        NSDictionary* user = [users objectAtIndex:0];
        NSString* name = [user objectForKey:@"name"];
        self.username = name;   
        if (self.post) {
            [self postToWall];
            self.post = NO;
        }
    }
} 
```

请让我知道如何进入应用程序..从 fbconnect 成功登录后

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T20:25:30.660

你应该把代码放到你的主应用程序中`-session:didLogin:`。登录成功时调用此方法。如果您的视图控制器称为 ViewController，则转换代码如下：

```
ViewController *vc = [[ViewController alloc] init];
self.window.rootViewController = vc; 
```

如果您还没有导入 ViewController.h，请将以下内容添加到文件顶部：

```
#import "ViewController.h" 
```

# mysql - 如何将其他表中的主 ID 插入新表

> ID：14092762
> 
> 赞同：2
> 
> 时间：2012-12-30T17:16:34.057
> 
> 标签：mysql, sql, select, insert

我有一个名为“艺术家”的表，包含三列：

```
artist_id {PK} | artist_name | artist_url 
```

这张表中有大约 500 多名艺术家。

我希望能够将所有主键复制到名为“artist_to_store”的表中。该表将有两列：

```
artist_id {PK} | store_id. 
```

商店 ID 将始终等于 0

我认为这个查询会起作用：

```
INSERT INTO artist_to_store SET artist_id = (SELECT artistr_id FROM artist) AND store_id = 0 
```

相反，它返回错误 #1242 - 子查询返回多于 1 行。

我知道错误意味着什么，所以没有人需要解释它。但是有人可以告诉我如何将所有的艺术家 ID 从艺术家表中获取到另一张表吗？

谢谢，新年快乐：）

彼得

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T17:18:24.417

试试这个 ：：

```
INSERT INTO artist_to_store(artistId, storeId) SELECT artistr_id,0 FROM artist 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T17:18:55.557

```
INSERT INTO artist_to_store (SELECT artistr_id,0 FROM artist); 
```

试试这个

# jquery - Javascript 悬停光标指针

> ID：14092766
> 
> 赞同：12
> 
> 时间：2012-12-30T17:16:54.220
> 
> 标签：jquery, css, hover

尝试使用 Jquery 在悬停时执行光标指针：

```
$('#example td').hover(function() {
$(this).css('cursor','pointer');
}); 
```

我不想把它放在 CSS 中，我想把它放在 Jquery 中。

我需要做什么来解决这个问题？

[http://jsfiddle.net/Egttj/](http://jsfiddle.net/Egttj/)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-30T17:29:42.527

在我清理了你的 jquery 之后，它似乎在这里工作，你忘记关闭第一次点击功能，并且你的 html 中没有声明搜索表单和按钮（我将其更改为 #example tr）

基本上你的 jQuery 没有那么好编码（也有一行 5.}）不属于那里）。

我还将“你的框架”设置为*jQuery*而不是标准选择的*mooTools*

这是我删除一些不必要的代码后得到的完整 jQuery 代码：

```
$(document).ready(function() {

    $('#example tr').click(function() {
        var href = $(this).find("a").attr("href");
        if(href) {
            window.location = href;
        }
    });

    $('#example tr').hover(function() {
        $(this).css('cursor','pointer');
    });

}); 
```

[小提琴](http://jsfiddle.net/Egttj/18/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-30T17:26:34.260

出于某种原因，我无法评论 Tobias Nilsons 的答案，所以这里是一个答案。

```
$('#example td').css('cursor', 'pointer');` 
```

无论如何，您没有理由要指定悬停时应用的样式。光标实际上只出现在悬停时，所以。

小提琴：http: [//jsfiddle.net/Egttj/15/](http://jsfiddle.net/Egttj/15/)

我假设简单地在样式表中指定相应的规则会给您带来一些麻烦。但是，是的，正如每个人都指出的那样，这确实是最好和最简单的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-24T15:24:21.487

比较第一种方法

```
$('#example tr').hover(function() {
    $(this).css('cursor','pointer');
}); 
```

用第二种方法

```
$('#example td').css('cursor', 'pointer');` 
```

我建议坚持第一个，因为它可以扩展到我们想要的任何 jQuery：

```
$('#example tr').hover(function() {

    $(this).css('cursor','pointer');

    $(this).click(function() {
       var href = $(this).find("a").attr("href");
       if(href) {
          window.location = href;
       }
    });

}); 
```

# perl - Apache 不会使用 wget、Perl 或 curl 缓存一些 HTTP 请求

> ID：14092774
> 
> 赞同：0
> 
> 时间：2012-12-30T17:17:38.740
> 
> 标签：perl, apache, http, caching, wget

我使用 Apache 作为代理服务器。它用于缓存。根据 HTTP 请求进行缓存存在问题。

当我使用代理以及 wget 或 Perl 与 LWP 时，它们会在标头中发送带有 URL 的 HTTP 请求`GET`，如下所示：

```
GET http://www.google.pl/ HTTP/1.1
User-Agent: Wget/1.13.4 (linux-gnu)
Accept: */*
Host: www.google.pl
Connection: Close
Proxy-Connection: Keep-Alive 
```

当我使用带代理的 curl 或不带代理的 Perl 或 wget 时，请求很好：

```
GET / HTTP/1.1
User-Agent: Wget/1.13.4 (linux-gnu)
Accept: */*
Host: www.google.pl
Connection: Keep-Alive 
```

在第一种情况下，Apache 不缓存数据。我读到这`CacheQuickHandler`是对此负责的，但是当我将其关闭时，`http.conf`它无济于事。

我的问题是：

1.  我可以强制 Perl 或 wget 发送标准 HTTP 请求（`GET`标头中没有 URL）吗？

2.  我应该如何配置 Apache 来缓存这两种类型的请求，这将如何影响 Apache 的性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T21:10:39.073

两种形式的 HTTP 请求都是“标准的”，但是对代理的请求*必须*包含绝对 URI，因此只有第一种形式是有效的。

# ruby-on-rails - 试图构建一个嵌套数组的数组来映射 Rails 模型深处的 N 个关联

> ID：14092780
> 
> 赞同：0
> 
> 时间：2012-12-30T17:18:21.517
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

我有一个`Skill`模型，它有很多先决条件（或`prereqs`在我的模型中），我需要为技能创建一个 N 级深度的先决条件图，因为我需要将此信息传递给 Javascript（在我的 gon gem 中）控制器）用于一些疯狂的 HTML5/KineticJS 动作，显示此技能与其他技能之间关系的鸟瞰图。

现在，下面的代码可以很好地一致地映射 5 个级别的深度。

```
delegate :url_helpers, to: 'Rails.application.routes'

def prereqs_map
  prereqs_array = [ self.title.to_s, url_helpers.skill_path(self), Array.new(prereqs) ]
  prereqs_array[2] = prereqs_array[2].map do |prereq1|
    prereq1 = [ prereq1.title.to_s, url_helpers.skill_path(prereq1), Array.new(prereq1.prereqs).map do |prereq2|
      prereq2 = [ prereq2.title.to_s, url_helpers.skill_path(prereq2), Array.new(prereq2.prereqs).map do |prereq3|
        prereq3 = [ prereq3.title.to_s, url_helpers.skill_path(prereq3), Array.new(prereq3.prereqs).map do |prereq4|
          prereq4 = [ prereq4.title.to_s, url_helpers.skill_path(prereq4), Array.new(prereq4.prereqs).map do |prereq5|
            prereq5 = [ prereq5.title.to_s, url_helpers.skill_path(prereq5), [] ]
          end ] # prereq depth 5
        end ] # prereq depth 4
      end ] # prereq depth 3
    end ] # prereq depth 2
  end   # prereq depth 1

  return prereqs_array
end 
```

如您所见，问题在于嵌套映射非常混乱，我无法弄清楚传递`depth`参数并将方法映射到我传递的任何深度。

我认为必须有更好的方法来做到这一点。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T18:00:50.920

试试这个：

```
class Skill
  # has many prereqs?

  def prereqs_map(depth = 5)
    mapping = Proc.new do |node, depth, current_level|
      [node.title.to_s, url_helpers.skill_path(node), node.prereqs.map {|prereq| mapping.call(prereq, depth, current_level+1)}] if current_level <= depth
    end
    mapping.call(self, depth, 0)
  end

end

>> skill.prereqs_map(5) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T17:56:30.007

通过向模型添加实例方法“to_tree”，您可以对其进行递归。下面随机设置一个依赖树，然后为您提供所需格式的数组数组。

```
class Skill

  attr_accessor :prereqs
  attr_accessor :title

  def randomly_create_tree depth=0
    self.title = ["Coding", "Winning", "Smiling", "Eating"][rand(4)]
    if depth < 3
      self.prereqs = []
      (0..rand(3)).each do
        skill = Skill.new
        skill.randomly_create_tree(depth + 1)
        self.prereqs << skill
      end
    else
      self.prereqs = []
    end
    self
  end

  def to_tree
    prereqs.collect do |prereq|
      [self.title, prereq.to_tree]
    end
  end 
```

进而：

```
s = Skill.new
s.randomly_create_tree
s.to_tree 
```

结果是：

```
[["Coding", [["Winning", [["Winning", []], ["Winning", []]]]]]] 
```

其中每个字符串都是随机生成的标题。您可能还想添加您的 url_helpers.skill_path ，但我不确定那是什么。

# xml - 如何将决策流程图保存为 xml

> ID：14092782
> 
> 赞同：0
> 
> 时间：2012-12-30T17:18:26.903
> 
> 标签：xml

我正在使用 as3 flashbuilder

提前致谢

我想将此图中的数据保存为 xml 文件。

![图表](../Images/343639ed5ea1bb0f9b8549c61c0176c8.png)

这是我的尝试，但我不喜欢它。用树处理 xml 的最佳程序是什么？

```
<Troubleshooting>
    <POWER OK>
        <yes name="POWER SEATED">
            <yes name="IS 110 VOLT"></yes>
            <no name="CHANGE IT"></no>
        </yes>
        <no name="DATA IN SCREEN">
            <yes name="RETRY BOOT"></yes>
            <no name="VIDEO FALURE"></no>
        </no>
  </POWER OK>
</Troubleshooting> 
```

# facebook - FQL 查询以获取页面拥有的所有带有标签的朋友的照片

> ID：14092786
> 
> 赞同：2
> 
> 时间：2012-12-30T17:18:41.487
> 
> 标签：facebook, api, facebook-fql

我正在尝试查找所有在其中标记了我的朋友的照片，其中照片的所有者是使用 FQL 的特定 Facebook 页面。

我已经读到获取这些照片的最可靠方法是使用相册 ID，但即便如此，我似乎得到的结果也很复杂。

我同时拥有friends_photos 和user_photos 权限。

像这样的查询确实会返回正确的数据：

```
SELECT pid,link,src FROM photo WHERE pid IN (
   SELECT pid FROM photo_tag WHERE subject IN (
        SELECT uid2 FROM friend WHERE uid1 = me()
   )     
   AND pid IN (
        SELECT pid FROM photo WHERE aid = "123456789"
   )
) 
```

然而，像这样的查询不返回任何数据：

```
SELECT pid,link,src FROM photo WHERE pid IN (
    SELECT pid FROM photo_tag WHERE subject IN (
        SELECT uid2 FROM friend WHERE uid1 = me()
    )    
    AND pid IN (
        SELECT pid FROM photo WHERE aid IN (SELECT aid FROM album WHERE owner = "987654321")
    )
) 
```

我尝试了其他一些查询组合，但均无济于事。

我知道这可能对我朋友的隐私设置有所影响，但是如果我运行一个更简单的查询来恢复特定专辑的所有标签，我总是可以在结果中看到我的朋友。

我发现这很令人沮丧，因为我需要的所有数据都在那里，我只需要正确的查询就可以了！

任何想法将不胜感激。

# android - 如何在 Android 中创建布局

> ID：14092790
> 
> 赞同：-1
> 
> 时间：2012-12-30T17:19:09.207
> 
> 标签：android, layout

我想创建一个布局，其中的按钮按以下方式排列。请解释我如何创建这样的布局。

```
-----------------------------------
|  b1  |  b2 |  b3  |  b4  |  b5  |
-----------------------------------

--------                   --------
|  b6  |                   |  b7  |
--------                   --------

--------------------------------------
|  b8  |  b9 |  b10  |  b11  |  b12  |
-------------------------------------- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T17:39:18.720

你可以试试这样，中心的RelativeLayout不是必需的，你可以在两个按钮上添加android:layout_centerInParent="true"属性并离开RelativeLayout。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layoutBase"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:weightSum="3" >

        <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Button" />

        <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Button" />

        <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Button" />

    </LinearLayout>

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true" >
        <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:text="Button" />

        <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:text="Button" />
    </RelativeLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:weightSum="3"
        android:layout_alignParentBottom="true" >

        <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Button" />

        <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Button" />

        <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Button" />

    </LinearLayout>

</RelativeLayout> 
```

对于类似的目标，IDE 的图形布局设计器也是一个很好的起点。

我希望它有帮助！

# objective-c - 如何在视图控制器（故事板）之间传递打开的套接字

> ID：14092791
> 
> 赞同：1
> 
> 时间：2012-12-30T17:19:12.577
> 
> 标签：objective-c, ios6, storyboard, gcdasyncsocket

Xcode iOS 6 与故事板。我正在向现有程序添加聊天功能。我正在使用 GCDAsyncSocket。当我呆在一个视图控制器中时，一切都完美无缺。我需要从许多视图控制器访问打开的套接字。我还需要从这些视图控制器访问 GCDASYNCSOCKET。

有没有人有一些可能对我有帮助的示例代码？

使用 perpareforsegue 会允许我通过一个打开的套接字吗？我见过的任何单例似乎都没有考虑到已经存在的类，如 GCDASYNCSOCKET 并且似乎不起作用。

请帮我提供一些工作示例。

单身人士.m

```
#import "SocketConnection.h"
#import "GCDAsyncSocket.h"

@implementation SocketConnection

static GCDAsyncSocket *socket;

+ (SocketConnection *)getInstance;

{

static dispatch_once_t once;
static SocketConnection *instanceOfSocketConnection;
dispatch_once(&once, ^ {instanceOfSocketConnection =[[SocketConnection alloc] init];});
return instanceOfSocketConnection;
}
- (id)init
{
NSString *host = @"xxx.xxxxx.com";
uint16_t port = 5467;

if (socket == nil)
{
    socket = [[GCDAsyncSocket alloc] initWithDelegate:self         delegateQueue:dispatch_get_main_queue()];
}

if (![socket isConnected])
{
    NSError *error = nil;

    if (![socket connectToHost:host onPort:port error:&error])
    {
        NSLog(@"Error connecting: %@", error);
    }

}

return self;
}

-(void) socket:(GCDAsyncSocket *) socket didConnectToHost:(NSString *)host port:(uint16_t)port
{
NSLog(@"Connected");

}

@end 
```

单例.h

```
#import <Foundation/Foundation.h>
#import "GCDAsyncSocket.h"

@interface SocketConnection : NSObject{}

+ (SocketConnection *)getInstance;
@end 
```

此代码（单例）给我一个错误

当我尝试从另一个视图控制器访问它时出现错误（从 SocketConnection 分配给 'GCDAsyncSocket" _strong' 的指针类型不兼容）

```
socket = [SocketConnection getInstance]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T19:42:18.347

查看代码，我发现您的错误 ( `incompatible pointer types assigning to 'GCDAsyncSocket" _strong' from SocketConnection`) 清楚地描述了它崩溃的原因。

在您的`+getInstance`方法中，您返回`SocketConnection`，并尝试将其分配给`GCDAsyncSocket`类型 ivar。创建一个属性或其他方法来提供对内部`socket`变量的访问。

# java - 基于派生数据强制执行子类行为

> ID：14092793
> 
> 赞同：1
> 
> 时间：2012-12-30T17:19:21.583
> 
> 标签：java, inheritance

我正在尝试实现一个“Range”类（在 Java 中）为它包装的 int 值提供边界强制功能。我希望它的每个子类都定义自己的最小/最大界限，而不必重写执行这些界限的逻辑。这是一个例子：

```
public abstract class Range {
    // I would like each derived class to possess its own distinct instances of the
    // min/max member data
    protected static final int MIN_VAL;
    protected static final int MAX_VAL;

    protected int _value;

    public void set (int newVal) {
        // Range check the input parameter
        // this should use the min/max bounds for the object's most derived class
        if (newVal < MIN_VAL || newVal > MAX_VAL) {
            throw new InvalidParameterException("`newVal` is out of range");
        }

        this._value = newVal;
    }

    public int get() {
        return this._value;
    }
}

// This class should limit its wrapped value to values between 1 and 6 inclusively
public class Die extends Range {
    public Die() {
        MIN_VAL = 1;
        MAX_VAL = 6;
        this.set (1);
    }
} 
```

显然这个实现不起作用，但我怎样才能实现我的目标呢？在不重复大部分逻辑的情况下这是否可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T17:22:34.177

一种方法是创建最小值/最大值实例变量，并让您的子类在构造函数中设置范围：

```
public abstract class Range {
    // I would like each derived class to possess its own distinct instances of the
    // min/max member data
    protected final int MIN_VAL;
    protected final int MAX_VAL;

    protected int _value;

    protected Range(int min, int max) {
        MIN_VAL = min;
        MAX_VAL = max;
    }

    . . .
}

// This class should limit its wrapped value to values between 1 and 6 inclusively
public class Die extends Range {
    public Die() {
        super(1, 6);
        . . .
    }
} 
```

另一种方法是定义一个抽象`checkRange`方法：

```
public abstract class Range {
    protected int _value;

    public void set (int newVal) {
        checkRange(newVal);
        this._value = newVal;
    }

    public int get() {
        return this._value;
    }

    protected abstract void checkRange(int val) throws InvalidParameterException;
}

// This class should limit its wrapped value to values between 1 and 6 inclusively
public class Die extends Range {
    private final int MIN_VAL = 1;
    private final int MAX_VAL = 6;
    public Die() {
        this.set (1);
    }

    protected void checkRange(int val) throws InvalidParamterException {
        if (newVal < MIN_VAL || newVal > MAX_VAL) {
            throw new InvalidParameterException("`val` is out of range");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T17:24:07.893

MIN_VAL 和 MAX_VAL 是常量，因此您无法更改它们。

添加两个受保护的方法：

```
protected abstract int getMin();

protected abstract int getMax(); 
```

子类实现这些方法，例如：

```
@Override
protected int getMin() {
   return 7;
}

@Override
protected int getMax() {
   return 67;
} 
```

在 Range 你然后改变

```
public void set (int newVal) {
        // Range check the input parameter
        // this should use the min/max bounds for the object's most derived class
        if (newVal < getMin() || newVal > getMax()) {
            throw new InvalidParameterException("`newVal` is out of range");
        }

        this._value = newVal;
    } 
```

# c++ - 对话窗口内的子对话窗口

> ID：14092795
> 
> 赞同：1
> 
> 时间：2012-12-30T17:19:41.717
> 
> 标签：c++, c, winapi, dialog, childwindow

我想创建 2 个对话框窗口，一个是另一个的子窗口。下面是部分代码。当我单击菜单项“父级”时，它创建了 2 个对话框并将一个设置为另一个的子级，如图所示：

![在此处输入图像描述](../Images/fcf5ee45f3d460e6f7e6ba1e6c271c98.png)

问题是它们都是不可见的。它们的大小由 Spy++ 指示。即使我使用 ShowWindow 和 UpdateWindow，也无济于事。

这是我的第一个问题：

`How to fix this?`

现在我想创建子对话框窗口的原因是：看下图，

![在此处输入图像描述](../Images/93fe4f6c4976d6eafdab339cfacce547.png)

它有一个包含子对话框的首选项对话框（黑线的有界矩形）。这些子对话窗口用于对相关选项进行分组。因此，如果用户在左侧 TreeView 中选择一个项目，它会隐藏一个子对话框窗口并显示另一个子对话框窗口以提供不同的选项。

现在第二个问题：

`Is my code is the correct way to achieve such work?`

* * *

更新 2：

这是解决方案！

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms644996%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644996%28v=vs.85%29.aspx)

* * *

更新：

感谢你们。

在使用`CreateDialog`(for child dialog) instead `DialogBox(...)`， using `DS_CONTROL`instead`WS_CHILD`并从子对话框中删除`OK`按钮（及其相应的 wndproc）之后，我得到了

![在此处输入图像描述](../Images/a2fefb43b596e975d3cddc968444bdf3.png)

我什至可以在父对话框中移动子对话框。在资源脚本文件中删除`CAPTION "Child Dialog"`没有帮助。

1.  如何（应该使用哪些标志）使子对话框无缝适合父对话框？这意味着：没有标题栏，没有边框......等。（在创建子对话框后使用`SetWindowLong`和`WS_BORDER`创建？或者对话的特殊内容？）

2.  父对话框的 OK 按钮不再起作用。如何解决这个问题？我不明白在这个父子对话案例中如何管理对话过程。有什么参考吗？

* * *

这是我的代码：

```
1\. Message handler for dialogs:

INT_PTR CALLBACK Child(HWND hDlg, UINT message, WPARAM wParam, LPARAM lParam)
{
    UNREFERENCED_PARAMETER(lParam);
    switch (message)
    {
    case WM_INITDIALOG:
        {
            hChild = hDlg;
            return (INT_PTR)TRUE;
        }
    case WM_COMMAND:
        if (LOWORD(wParam) == IDOK)
        {
            EndDialog(hDlg, LOWORD(wParam));
            return (INT_PTR)TRUE;
        }
        break;
    }
    return (INT_PTR)FALSE;
}

INT_PTR CALLBACK Parent(HWND hDlg, UINT message, WPARAM wParam, LPARAM lParam)
{
    UNREFERENCED_PARAMETER(lParam);
    switch (message)
    {
    case WM_INITDIALOG:
        {
            hParent = hDlg;
            DialogBox(hInst, MAKEINTRESOURCE(IDD_CHILD), hParent, Child);
            SetParent(hChild, hParent);
            return (INT_PTR)TRUE;
        }
    case WM_COMMAND:
        if (LOWORD(wParam) == IDOK)
        {
            EndDialog(hDlg, LOWORD(wParam));
            return (INT_PTR)TRUE;
        }
    break;
    }
    return (INT_PTR)FALSE;
}

2\. Dialog Templates in resource file

IDD_CHILD DIALOGEX 0, 0, 70, 50

STYLE DS_SETFONT | DS_FIXEDSYS | WS_CHILD | WS_SYSMENU
CAPTION "Child Dialog"
FONT 8, "MS Shell Dlg"
BEGIN
    LTEXT           "Child Dialog",IDC_STATIC,10,5,35,8,SS_NOPREFIX
    DEFPUSHBUTTON   "OK",IDOK,10,25,50,14,WS_GROUP
END

IDD_DIALOG_PARENT DIALOGEX 0, 0, 250, 150
STYLE DS_SETFONT | DS_MODALFRAME | DS_FIXEDSYS | WS_POPUP | WS_CAPTION | WS_SYSMENU
CAPTION "Parent Dialog"
FONT 8, "MS Shell Dlg"
BEGIN
    LTEXT           "Parent",IDC_STATIC,42 - 20,14,35,8,SS_NOPREFIX
    DEFPUSHBUTTON   "OK",IDOK,188, 126,50,14,WS_GROUP
END 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T18:01:58.457

这不是完全正确的方法。您需要在子对话框上设置 DS_CONTROL 样式（而不是 WS_CHILD）。这告诉窗口管理器您正在将对话框创建为子窗口，而不是真正的弹出对话框。您还必须使用 CreateDialog 或其变体之一而不是 DialogBox 来创建子项（根据 Raymond 的评论）。

更多信息在这里：[https ://devblogs.microsoft.com/oldnewthing/20040730-00/?p=38293](https://devblogs.microsoft.com/oldnewthing/20040730-00/?p=38293)

第一个问题我真的帮不了你。从您提供的片段中看不出您做错了什么。

# python - Ipython Notebook 不在数据框中打印 type()

> ID：14092798
> 
> 赞同：1
> 
> 时间：2012-12-30T17:19:57.660
> 
> 标签：python, pandas, ipython, ipython-notebook

这是一个非常奇怪的错误：

以下代码：

```
a = 'string1'
b = 'string2'

test_dict = {'col1':{a:type(a), b:type(b)},'col2':{a:type(a), b:type(b)}}
pd.DataFrame(test_dict) 
```

在正常的 ipython 控制台中，按预期产生以下内容：

```
 col1          col2
string1  <type 'str'>  <type 'str'>
string2  <type 'str'>  <type 'str'> 
```

但是在 ipython 笔记本中，应该显示类型的单元格是空的：

![在此处输入图像描述](../Images/05895e40f87355e20315306ef31b4825.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T17:25:44.943

我怀疑如果您在浏览器中执行 View->Source，您将看到预期的 <type ...>。发生的事情是浏览器认为这是一个 HTML 标记，没有识别它，只是把它扔掉了。

注意：如果我没有输入`&amp;lt;type ...>`这个答案，我的答案也会发生同样的事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T06:09:54.657

一种解决方法是打印数据帧，这样可以更好地使用 ipython 笔记本：

```
In [144]: print pd.DataFrame(test_dict)

                 col1          col2
string1  <type 'str'>  <type 'str'>
string2  <type 'str'>  <type 'str'> 
```

我发现 HTML 表格中的行让人分心，所以这个解决方法是我的默认设置。

# java - 需要一些帮助才能从引号和括号中获取数据

> ID：14092799
> 
> 赞同：0
> 
> 时间：2012-12-30T17:20:01.997
> 
> 标签：java, regex

我正在使用 java URL 类从 URL 中读取数据。问题是，我有一些字符串，我想用正则表达式去掉引号和括号。请帮帮我。

**我的输入**

```
1 - alt="Shervin Champbell"

2 - alt=("Shervin Champbell") 
```

**结果应该是**

```
Shervin Champbell 
```

我只想摆脱这些引号和括号。我太努力了，但徒劳无功。

**我想去掉 alt、括号和引号**

输出应该是：**Shervin Champbell**

**这是我的代码**

```
import java.io.*;
import java.util.regex.*;

public class URLReader {
 public static void main(String[] args) throws Exception {
        System.setProperty("http.proxyHost", "192.168.1.10");
        System.setProperty("http.proxyPort", "8080");
        URL url = new URL("http://www.ucp.edu.pk/information-technolo
           /faculty-staff/faculty-staff.aspx");
        BufferedReader in = new BufferedReader(
        new InputStreamReader(url.openStream()));
        String inputLine;
        while ((inputLine = in.readLine()) != null)
               //found(inputLine);
               names(inputLine);
        in.close();
    }

    static void names(String name){
    Pattern pattern = Pattern.compile("");
    Matcher matcher = pattern.matcher(name);
    if(matcher.find()){
        String abc = name.substring(matcher.start(), matcher.end());
        System.out.println(abc);
    }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T17:35:44.523

[http://rextester.com/replace/QYV56186](http://rextester.com/replace/QYV56186)不是很健壮，但适用于当前示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T17:43:52.043

你真的*必须*用正则表达式来做吗？这似乎很难。为什么不只是：

```
import java.util.*;

public class Strings {
    public static void main(String[] args) {
        String[] inputs = { "alt=\"Shervin Champbell\"",
                            "alt=(\"Shervin Champbell\")" };
        for (String input : inputs) {
            System.out.println(quotedStrings(input));
        }
    }

    public static List<String> quotedStrings(String input) {
        String[] parts = input.split("\"");
        List<String> result = new ArrayList<>();
        for (int i = 1; i < parts.length; i+=2) {
            result.add(parts[i]);
        }
        return result;
    }
} 
```

输出（在大括号中，因为它是一个列表）：

```
[Shervin Champbell]
[Shervin Champbell] 
```

它还有一个额外的好处，那就是它可以在需要时处理输入字符串中的多个带引号的字符串。

更好的是，只需使用 commons-lang，它已经通过[StringUtils.substringBetween()](http://commons.apache.org/lang/api-3.1/org/apache/commons/lang3/StringUtils.html#substringBetween%28java.lang.String,%20java.lang.String%29)查找单个字符串或[StringUtils.substringsBetween()](http://commons.apache.org/lang/api-3.1/org/apache/commons/lang3/StringUtils.html#substringsBetween%28java.lang.String,%20java.lang.String,%20java.lang.String%29)查找多个字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T17:36:59.110

我在想这样的正则表达式：

```
alt=[("]*(\w*[^)"]*)[)"]* 
```

捕获的值是所需的输出

正则表达式字符串是：

```
"alt=[(\"]*(\\w*[^)\"]*)[)\"]*" 
```

# haskell - do块内的Haskell where子句语法

> ID：14092801
> 
> 赞同：25
> 
> 时间：2012-12-30T17:20:40.920
> 
> 标签：haskell, syntax, where-clause

我正在尝试在 Haskell`mapM_`的块内重构函数调用。`do`我想将 lambda 提取到（本地）命名函数，以使代码更具可读性。

我的代码最初看起来像这样：

```
do
  -- ...
  mapM_ (\x -> x + 1) aList

  return aValue 
```

我想把它改成

```
do
  -- ...
  mapM_ func aList
    where func x = x + 1

  return aValue 
```

但我`return aValue`在线上遇到语法错误。我的实际 lambda 更复杂 :-)，但我确实使用相同的 lambda 进行了尝试，以确保它不是 lambda 代码中的问题。

我怎样才能重写这段代码？我应该使用`let`...`in`代替吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-30T17:44:59.730

这里有三种相似（但不同）的定义方式：

*   您可以在某些定义之后附加`where`子句——主要是方程式样式的绑定。因此，您可以将一个放在函数的末尾，或者在使用`let`或周围`where`子句定义的内容之后。

*   另一方面，`let x = ... in ...`是一个*表达式*，其计算结果为 after 部分`in`，这是后面的东西唯一`let`可见的地方。

*   在一个`do`块内，因为已经有一个隐式嵌套的范围（事物在它们第一次定义后可见），你可以`let x = ...`单独使用。这实际上与之前的形式相同——`do`之后的块的其余部分`let`实际上是`in ...`部分。

如果您想要一个使用`do`块中定义的内容的本地定义，您唯一的选择是第三个（或将其他值作为参数传递）。但是，对于像您的示例这样的独立辅助函数，任何样式都可以使用。这是您的示例，以演示每个示例：

第一种样式， where 在`func`中的任何地方可见，包括子句`foo`中定义的任何其他内容：`where`

```
foo = do ...
         mapM_ func aList
         ...
         return aValue
  where func x = x + 1 
```

第二种样式， where`func`仅在`let`表达式内部可见，在本例中是整个`do`块：

```
foo = let func x = x + 1 
      in do 
         ...
         mapM_ func aList
         ...
         return aValue 
```

第三种样式，在`do`块内定义。在这种情况下，`func`仅在`let`;之后可见 首先`...`它还没有被定义。

```
foo = do ...
         let func x = x + 1
         mapM_ func aList
         ...
         return aValue 
```

哦，还有一个好处：既然`let ... in ...`是一个表达式，你也可以在任何你有表达式的地方使用它，来命名一些本地定义。所以这是另一个例子：

```
foo = do ...
         let func x = x + 1 in mapM_ func aList
         ...
         return aValue 
```

和以前一样，`func`仅在`let`表达式内部可见，在这种情况下，它是它之后的单个表达式，在其他任何地方都看不到。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-30T17:50:02.713

另一种选择是使用`forM_`而不是`mapM_`，它会翻转参数的顺序。然后，您可以使用`$`带有尾随 lambda 表达式的运算符，如下所示：

```
do
  forM_ aList $ \x -> do
    ...

  return aValue 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-30T17:33:08.130

你不`where`应该在函数的末尾吗？

像这样：

```
function aList aValue = do
    mapM_ func aList
    return aValue
    where func x = x + 1 
```

# c# - 从 ViewBag 枚举时遇到问题

> ID：14092808
> 
> 赞同：0
> 
> 时间：2012-12-30T17:21:32.037
> 
> 标签：c#, asp.net-mvc, razor

我正在传递给我的 Razor 视图：

```
public ActionResult NewsList()
{
  ViewBag.News = _client.GetNews(Guid.Parse(GetCookieInfo.TokenId));
  return View();
} 
```

我的 GetNews 是这样的：

```
public IEnumerable<TokenNews> GetNews(Guid tokenid)
{
  var nl = from news in entities.News
         where news.TokenId == tokenid &&
               DateTime.Now > news.Expiration &&
               news.IsActive
         orderby news.OrderNumber
         select new News
                  {
                    NewsTitle = news.NewsTitle,
                    NewsBody = news.NewsBody,
                    OrderNumber = news.OrderNumber
                  };

  var newslist = new List<TokenNews>();
  foreach (var news in nl)
  {
    var nw = new TokenNews();
    nw.Body = news.NewsBody;
    nw.Title = news.NewsTitle;
    newslist.Add(nw);
  }
  return newslist;
} 
```

我的 TokenNews 是这样的：

```
 [DataContract]
  public class TokenNews
  {
    private string title = string.Empty;
    private string body = string.Empty;

    public string Title {
      get { return title; }
      set { title = value; }
    }
    public string Body
    {
      get { return body; }
      set { body = value; }
    }
  } 
```

我的 NewsList.cshtml 视图如下所示：

@使用 SuburbanCustPortal.SuburbanService

```
<br />

         @foreach (var nws in (IEnumerable<TokenNews>) ViewBag.News)
         {

           <div  class="leftdiv">
             <br/>
             <label class="sizedCustomerlabel">
               @nws.Body
             </label>
           </div>
         } 
```

我的问题是`@nws.Body`. nws 没有在我的 TokenNews 中给我标题或正文。

它给我的信息是：

> 无法解析符号主体。

这一定是我忽略了一百次的事情，但我就是想不通。

有什么建议么？

**更新**

回应 Umar Farooq Khawaja：

我按照你的说明做了，这就是发生的事情：

![在此处输入图像描述](../Images/95994473ffbcc961d9e8fe98536329f8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T17:42:54.087

您需要在公共属性上将`DataMember`属性应用于您的`TokenNews`类。请记住为之后`SuburbanCustPortal.SuburbanService`使用`TokenNews`该类的服务重新生成客户端。我还使用了自动生成的属性，而不是私有字段支持的属性，只是为了让代码更简洁。

```
[DataContract]
public class TokenNews
{
    [DataMember]
    public string Title
    {
        get;
        set;
    }

    [DataMember]
    public string Body
    {
        get;
        set;
    }
} 
```

如果这不起作用，请尝试首先存储`ViewBag.News`在静态类型变量中，然后使用新的静态类型引用对其进行迭代，例如

```
<br />
@{
    var news = (IEnumerable<TokenNews>)ViewBag.News;
}
@foreach (var item in news)
{
<div class="leftdiv">
    <br />
    <label class="sizedCustomerLabel">
        @item.Body
    </label>
</div>
} 
```

此外，您可以通过这种方式重构以下方法：

```
public IEnumerable<TokenNews> GetNews(Guid tokenid)
{
    var newslist = from news in entities.News
                   where news.TokenId == tokenid &&
                         DateTime.Now > news.Expiration &&
                         news.IsActive
                   orderby news.OrderNumber
                   select new TokenNews
                   {
                       Title = news.NewsTitle,
                       Body = news.NewsBody
                   };

    return newslist.ToArray();
} 
```

# javascript - 位置固定元素上的Jquery委托滚动事件

> ID：14092810
> 
> 赞同：1
> 
> 时间：2012-12-30T17:22:02.913
> 
> 标签：javascript, jquery, scroll

我有以下html代码：

```
<div id="scroll-box">
    <div id="header" style="position:fixed">...</div>
    <div id="main">...</div>
</div> 
```

如果用户用鼠标在标题上滚动，我尝试委托滚动框事件的滚动事件：

```
$('#scroll-box').delegate('#header', 'scroll', function(){
    alert("scroll");
    }); 
```

这是行不通的。即使鼠标悬停在标题上并且用户滚动，如何触发滚动框的滚动事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T17:48:06.477

您不能委托滚动事件，因为滚动事件不会冒泡。委托仅适用于冒泡的事件。

# android - jQuery click() 事件在 Android 浏览器中不起作用

> ID：14092815
> 
> 赞同：0
> 
> 时间：2012-12-30T17:22:39.823
> 
> 标签：android, jquery, android-browser

此代码在 Chrome 中运行，但不在 Android 浏览器或适用于 Android 18 的 Chrome（Android 4.2；CyanogenMod 10.1）中：

```
$(function(){
    $(".save").click(function(){
        alert('Saved');
    });
}); 
```

​ 工作示例：http: [//jsfiddle.net/BCVdc/4/](http://jsfiddle.net/BCVdc/4/)

有一些 jQuery/Android 浏览器不兼容吗？

已解决：错误与此代码无关...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T17:29:11.317

```
$(function(){
    $(".save").click(function(){
        alert('Saved');
        return false;
    });
}); 
```

上面的代码应该可以为您解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-30T19:37:56.657

我在尝试在股票 android 浏览器上使用 .click 方法时遇到了类似的问题。似乎替换 .click 可以`$('selector').on('click', cb);`解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T17:27:55.960

我没有要测试的 Android 浏览器，但您可能会遇到链接没有有效 href 属性的问题。

顺便说一句，这也是为什么某些浏览器也不会对其应用默认锚 CSS 的原因。IE。通常的蓝色和下划线。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T17:32:10.643

试试这个代码

```
$(function(){
    $(".save").live('tap',function(event){
        alert('Saved1');
    });
$(".save").live('click',function(event){
        alert('Saved2');
    });
}); 
```

请在您的 android 中测试它并告诉我们显示的警报。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-12T19:30:03.870

在移动端无法点击，但可以使用 onchange 功能。

```
$(function(){
  $('.save').on('change', function (event) {
    event.preventDefault();
    alert('Saved');
  });
}); 
```

# r - 如何在数据框上使用 ifelse

> ID：14092816
> 
> 赞同：0
> 
> 时间：2012-12-30T17:22:41.663
> 
> 标签：r

我是 R 的初学者，我正在尝试了解其`ifelse`工作原理。

我尝试了一些简单的方法，例如：

```
ifelse(mydataframe$col1==mydataframe$col2 ,
  mydataframe$newCol<-TRUE,
  mydataframe$newCol<-FALSE  
) 
```

`mydataframe$col1`并且`col2`是因素。在这种情况下， my `newCol`will always `FALSE`，这是错误的，因为我以这种方式验证了：

```
mydataframe$newCol<- mydataframe[mydataframe$col1==mydataframe$col2] 
```

我也不想使用`for`循环，这对于我尝试的方法来说通常很慢。

我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T17:30:34.983

`ifelse()`接受返回值作为第二个和第三个参数（并且您正在编写作业）。

尝试：

```
mydataframe$newCol <-
    with(mydataframe,
         ifelse(col1 == col2,
                TRUE,
                FALSE)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T17:51:34.423

事实上，您不需要使用`ifelse`,`==`就足够了：

```
mydataframe$newCol <- with(mydataframe, col1 == col2) 
```

它将返回一个布尔向量。

# c# - .NET IQueryable：错误预期类、委托、枚举、接口

> ID：14092820
> 
> 赞同：0
> 
> 时间：2012-12-30T17:23:23.677
> 
> 标签：c#, .net, azure, iqueryable

我是 .NET 和 windows azure 的菜鸟，并尝试遵循本教程：http: [//msdn.microsoft.com/en-us/wazplatformtrainingcourse_introtowindowsazurelabvs2010_topic2.aspx](http://msdn.microsoft.com/en-us/wazplatformtrainingcourse_introtowindowsazurelabvs2010_topic2.aspx)

当我尝试如下声明 IQueryable 属性时：

```
public IQueryable<C1_Schema> C1_Schema
  {
    get
    {
      return this.CreateQuery<C1_Schema>("C1_Schema");
    }
  } 
```

我得到一个错误：错误预期类，委托，枚举，接口，结构

这是我声明属性的类

```
public IQueryable<C1_Schema> C1_Schema
  {
    get
    {
      return this.CreateQuery<C1_Schema>("C1_Schema");
    }
  }
    public class context : Microsoft.WindowsAzure.StorageClient.TableServiceContext
    {
        public context(string baseAddress, Microsoft.WindowsAzure.StorageCredentials     credentials)
      : base(baseAddress, credentials)
         { }
    } 
```

C1_Schema 类：

```
public class C1_Schema : Microsoft.WindowsAzure.StorageClient.TableServiceEntity
{

    public String fname { get; set; }
    public String lname { get; set; }
    public double salary { get; set;}

    public C1_Schema()
    {
        PartitionKey = DateTime.UtcNow.ToString("MMddyyyy");
        // Row key allows sorting, so we make sure the rows come back in time order.
        RowKey = string.Format("{0:10}_{1}", DateTime.MaxValue.Ticks - DateTime.Now.Ticks, Guid.NewGuid());
    }
} 
```

我感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T17:42:27.933

您正在尝试在类之外声明该属性。在 C# 中，一切都必须在一个类中。

移动属性的文本，如下所示：

```
public class context : Microsoft.WindowsAzure.StorageClient.TableServiceContext
{
  public IQueryable<C1_Schema> C1_Schema
  {
    get
    {
      return this.CreateQuery<C1_Schema>("C1_Schema");
    }
  }
} 
```

我建议您先学习一些更基本的 C# 教程，然后再尝试做类似这样的特定库。

# c# - 实现打印功能 c#

> ID：14092824
> 
> 赞同：0
> 
> 时间：2012-12-30T17:23:45.660
> 
> 标签：c#

我正在尝试使用以下内容来实现打印功能，但出现以下错误：

```
Error   1   'Print.Form1.Dispose(bool)': no suitable method found to override   C:\Users\Documents\Visual Studio 2012\Projects\Print\Print\Form1.Designer.cs    16  33  Print 
```

下面是我的代码。我不确定为什么它会给我这个错误信息。我在网上搜索了答案，但找不到任何可行的解决方案。任何帮助 wpul 非常非常感谢人们。

```
namespace Print
{
    partial class Form1
    {
        /// <summary>
        /// Required designer variable.
        /// </summary>
        private System.ComponentModel.IContainer components = null;

        /// <summary>
        /// Clean up any resources being used.
        /// </summary>
        /// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
        protected override void Dispose(bool disposing)
        {
            if (disposing && (components != null))
            {
                components.Dispose();
            }
            base.Dispose(disposing);
        }

        #region Windows Form Designer generated code

        /// <summary>
        /// Required method for Designer support - do not modify
        /// the contents of this method with the code editor.
        /// </summary>
        private void InitializeComponent()
        {
            this.components = new System.ComponentModel.Container();
            System.ComponentModel.ComponentResourceManager resources = new System.ComponentModel.ComponentResourceManager(typeof(Form1));
            this.printForm1 = new Microsoft.VisualBasic.PowerPacks.Printing.PrintForm(this.components);
            this.button1 = new System.Windows.Forms.Button();
            this.SuspendLayout();
            // 
            // printForm1
            // 
            this.printForm1.DocumentName = "document";
            this.printForm1.Form = this;
            this.printForm1.PrintAction = System.Drawing.Printing.PrintAction.PrintToPrinter;
            this.printForm1.PrinterSettings = ((System.Drawing.Printing.PrinterSettings)(resources.GetObject("printForm1.PrinterSettings")));
            this.printForm1.PrintFileName = null;
            // 
            // button1
            // 
            this.button1.Location = new System.Drawing.Point(97, 69);
            this.button1.Name = "button1";
            this.button1.Size = new System.Drawing.Size(75, 23);
            this.button1.TabIndex = 0;
            this.button1.Text = "button1";
            this.button1.UseVisualStyleBackColor = true;
            this.button1.Click += new System.EventHandler(this.button1_Click_1);
            // 
            // Form1
            // 
            this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
            this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
            this.ClientSize = new System.Drawing.Size(284, 262);
            this.Controls.Add(this.button1);
            this.Name = "Form1";
            this.Text = "Form1";
            this.ResumeLayout(false);

        }

        #endregion

        private Microsoft.VisualBasic.PowerPacks.Printing.PrintForm printForm1;
        private System.Windows.Forms.Button button1;

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T17:28:53.743

如果您删除或重命名`Form1`了`Form1.cs`.

`Form1.Designer.cs`包含一个`partial class`假设部分类的另一半被声明为继承`Form`。

如果你破坏了另一半，编译器会认为它是一个继承的独立类，`object`这将破坏依赖于基类的代码。

# css - 几乎所有引导样式在 IE8 中都不起作用。在 chrome 和 firefox 中运行良好

> ID：14092825
> 
> 赞同：8
> 
> 时间：2012-12-30T17:23:48.450
> 
> 标签：css, twitter-bootstrap, internet-explorer-8

我正在开发一个经典的 .asp 站点，并且正在使用引导程序进行样式设置。在 chrome 和 firefox 中一切正常，但在 IE8 中几乎所有样式都丢失了。

我正在使用引导轮播和模态，但它们看起来都不像它们应该的那样。轮播只是呈现为一系列图像，并且后退/前进按钮都不起作用。

模态框根本没有样式，只是作为带有边框的“框”插入页面（没有背景、圆角或任何东西）。

我已经尝试了更多的引导库样式，例如表格和按钮，但没有什么看起来应该的。我知道 bootstrap.css 包含在一些样式作品中（例如按钮颜色）。引导 js 工作正常。

还有什么我需要添加到我的 html 文档（文档类型或其他内容）中以使引导程序在 IE 中正常工作吗？

我正在使用引导程序 v2.2.2

提前致谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-30T22:22:37.420

在 IE8 及更低版本中支持 HTML5 文档类型需要一些 HTML5 shim 摘录（见下文）。您是否检查过它是否仍在您构建的页面中？

```
<!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
 <!--[if lt IE 9]>
     <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
 <![endif]--> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T22:24:04.500

好的，所以我想通了。哇，这真的很愚蠢。显然我在怪癖模式下运行 IE。当你让一个 mac 家伙在 Windows 中乱来时，就会发生这种情况。无论如何，感谢您的反馈。

# cakephp - 我应该将模型中共享的实用方法放在哪里？

> ID：14092826
> 
> 赞同：0
> 
> 时间：2012-12-30T17:24:03.693
> 
> 标签：cakephp, cakephp-2.0, cakephp-model

我正在使用 CakePHP，以前只是将站点范围的方法存储在 AppController 中，但是当我从我的模型中调用它们时，它似乎并不正确。应该将它们放在我的 AppModel 中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T17:40:02.993

您可以将它们存储在 Lib 中：

```
App/Lib/GlobalMethods.php 
```

应用控制器.php：

```
App::import('Lib', 'GlobalMethods');
class AppController extends Controller {

} 
```

# xcode - 如何在 UITableView 中成为FirstResponder UITextField

> ID：14092831
> 
> 赞同：0
> 
> 时间：2012-12-30T17:24:42.793
> 
> 标签：xcode, uitableview, uitextfield, becomefirstresponder

stackOverflow 上有很多相同的问题。但我无法解决这个问题。

UITableView中如何成为FirstResponder UITextField？我想做下面的事情。按下编辑按钮，然后关注 UITableView 中的 UITextField。

```
-(void)setEditing:(BOOL)editing animated:(BOOL)animated{
    if (editing) {
        for ( int i = 0 ; i < items.count  ; ++ i ) {
            UITextField * ii = [textFields_ objectAtIndex:i];
            if ([textFields_ objectAtIndex:i] == [NSNull null]) {
            }
            [ii setUserInteractionEnabled:YES];
            if (ii.tag == 0) {
            [ii becomeFirstResponder];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T07:04:51.493

```
-(void)setEditing:(BOOL)editing animated:(BOOL)animated{
    [super setEditing:editing animated:YES];
    if (editing) {
        for ( int i = 0 ; i < items.count  ; ++ i ) {
            UITextField * ii = [textFields_ objectAtIndex:i];
            [ii setUserInteractionEnabled:YES];
            if (ii.tag == 0) {
                [ii becomeFirstResponder];
            }
        }
    }
} 
```

# javascript - 如何让本地 html 文件在 firefox 17 中发出 XHR 跨域请求？

> ID：14092833
> 
> 赞同：4
> 
> 时间：2012-12-30T17:24:57.543
> 
> 标签：javascript, firefox, xmlhttprequest, cross-domain, local

您如何在 Firefox 17+ 中从本地 html 文件发出 XHR 跨域请求？

*   [netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead")](https://bugzilla.mozilla.org/show_bug.cgi?id=667312#c3) 已被删除
*   [SpecialPowers.createSystemXHR()](https://developer.mozilla.org/en-US/docs/SpecialPowers#SpecialPowers.createSystemXHR%28%29)似乎不起作用

我知道[扩展会起作用](https://stackoverflow.com/questions/3523563/making-crossdomain-ajax-requests-with-addons-for-firefox)，但除非必要，否则我宁愿不必“添加”任何东西到 Firefox。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T17:51:22.250

我找到了答案。您需要在“about:config”中将[security.fileuri.strict_origin_policy](http://kb.mozillazine.org/Security.fileuri.strict_origin_policy)切换为 false。它[影响](https://developer.mozilla.org/en-US/docs/Same-origin_policy_for_file%3a_URIs)“任何进行同源检查的东西，包括 XMLHttpRequest、XSLT 和 XBL”。

这在一定程度上也允许读取本地文件，因此可能会引起安全问题。

# android - .3gp 或 wav 格式录制的音频文件的语音识别

> ID：14092834
> 
> 赞同：6
> 
> 时间：2012-12-30T17:25:00.023
> 
> 标签：android, speech-recognition, audio-recording, speech-to-text

> **可能重复：**
> [android上的语音识别与录制的声音剪辑？](https://stackoverflow.com/questions/2319735/voice-recognition-on-android-with-recorded-sound-clip)

我正在开发一个 Android 应用程序，它将音频录制到文件中，然后使用语音识别从录制的语音中获取文本。

是否有可用于此类任务的语音识别库？我该如何开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T07:12:46.683

从本教程开始，您可以在 Android 中使用[语音 API学习语音到文本的转换](http://viralpatel.net/blogs/android-speech-to-text-api/)

另见：

*   [从自己的声音文件语音到文本](https://stackoverflow.com/questions/6989981/speech-to-text-from-own-sound-file)
*   [android上的语音识别与录制的声音剪辑？](https://stackoverflow.com/questions/2319735/voice-recognition-on-android-with-recorded-sound-clip)

# javascript - JQueryUI 自动完成：选择的值存储在哪里？

> ID：14092841
> 
> 赞同：0
> 
> 时间：2012-12-30T17:25:50.763
> 
> 标签：javascript, jquery, jquery-ui, autocomplete

我已成功在页面上设置了一个自动完成框。但是我有一个需要获取所选值的计时器。

这个值存储在哪里？我怎样才能找回它？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T17:35:10.150

您只需从目标元素中获取值（例如，您附加了自动完成功能的输入元素）。

# file-upload - 使用不同的名称字段动态添加 FileUpload

> ID：14092845
> 
> 赞同：5
> 
> 时间：2012-12-30T17:26:24.807
> 
> 标签：file-upload, razor, asp.net-mvc-4

我需要能够根据用户需要添加多个文件上传，但用户必须能够为上传分配一个名称以供以后使用。如您所见，我只是动态添加更多文件上传，但为这些上传分配名称似乎是我的问题。有什么办法可以做到这一点？

![截图目前的情况](../Images/3ba5085b983faa54b425cc25b30d872a.png)

我的视图中的代码：

```
@using Microsoft.Web.Helpers
@model MusicNews.Web.Models.ViewModel.ArticleCreateModel

@{
    ViewBag.Title = "Create";
}

@section content
{

        @using (Html.BeginForm("Create", "Article", FormMethod.Post,
                      new { enctype = "multipart/form-data" }))
        {
                ...

                @FileUpload.GetHtml("Files",2,true,false,"Add more")

                <p>
                    <input type="submit" value="Create" />
                </p>
        }
} 
```

我的控制器中的代码如下所示：

```
[Authorize]
public ActionResult Create()
{
    ViewBag.ArticleTypes = new SelectList(ArticleTypes, "Type");
    return View();
}

[HttpPost]
[Authorize]
public ActionResult Create(ArticleCreateModel article)
{
    var files = Request.Files;

    if (ModelState.IsValid)
    {
        ...
    }
    return View(article);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T08:53:56.023

您可能必须自己创建额外的上传。这可以使用 jQuery 来完成，例如：

这是HTML：

```
<div id="uploads">
    <div id="uploadtemplate">
        <input type="file" name="upload" />
        <input type="text" name="FileName" />
    <div>

    <a href="#" id="addFile">Add file</a>
</div> 
```

在加载时，我们将在变量中克隆“模板”以供以后使用。单击后，我们将克隆模板并将其添加到文档中。

```
$(function() {/
    $('#addFile').data('uploadtemplate', $('#uploadtemplate').attr('id', '').clone());

    $('#addFile').click(function(e) {
        $(this).data('uploadtemplate').clone().insertBefore( $this) );

        e.preventDefault();
    });
}); 
```

您的模型将是：

```
public class Foo {
    public string[] FileName { get; set; } // will contain all file names given by the user
} 
```

然后解析 Request.Files 并做你知道的魔法 :-) Foo.FileName 字段将包含用户为每个上传文件指定的文件名。您可以将其用作 Request.Files 中的第一个文件将映射到 Foo.FileName[0] 等等。

# xcode - 如何在 xcode 中创建窗口的新实例？

> ID：14092846
> 
> 赞同：0
> 
> 时间：2012-12-30T17:26:24.577
> 
> 标签：xcode, macos, cocoa, interface-builder

我正在通过 Xcode 在 OS X 上制作一个网页浏览应用程序，我想知道是否有办法复制你已有的窗口并制作一个新窗口。例如，在我的网络浏览器中（我还没有进入标签页），如果我想通过 File>New 之类的东西创建一个新窗口，我该怎么做？我是 Xcode 的新手，我确信对此有一个非常简单的解释，所以我能得到的任何帮助都会很棒。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T17:35:13.890

同一个标签？还是新窗口？

你有一个基于窗口的应用程序，它像 textedit 一样工作。

其他方法是创建视图并继续加载选项卡的选择。并在运行时添加选项卡。

编辑：

我建议您使用基于文档的应用程序

# c++ - 流 cout 有任何理由设置标志 std::ios_base::skipws 吗？

> ID：14092847
> 
> 赞同：6
> 
> 时间：2012-12-30T17:26:29.490
> 
> 标签：c++, iostream

`cout`有标志`std::ios_base::skipws`并`std::ios_base::dec`默认设置

您可以使用以下代码验证这一点：

```
#include <iostream>
#include <string>

using namespace std;

int main()
{
    ios_base::fmtflags flags = cout.flags();
    string sflags;

    if( flags & ios_base::skipws ) sflags += "skipws";
    if( flags & ios_base::unitbuf ) sflags += sflags.empty() ? "unitbuf" : " unitbuf";
    if( flags & ios_base::uppercase ) sflags += sflags.empty() ? "uppercase" : " uppercase";
    if( flags & ios_base::showbase ) sflags += sflags.empty() ? "showbase" : " showbase";
    if( flags & ios_base::showpoint ) sflags += sflags.empty() ? "showpoint" : " showpoint";
    if( flags & ios_base::showpos ) sflags += sflags.empty() ? "showpos" : " showpos";
    if( flags & ios_base::left ) sflags += sflags.empty() ? "left" : " left";
    if( flags & ios_base::right ) sflags += sflags.empty() ? "right" : " right";
    if( flags & ios_base::internal ) sflags += sflags.empty() ? "internal" : " internal";
    if( flags & ios_base::dec ) sflags += sflags.empty() ? "dec" : " dec";
    if( flags & ios_base::oct ) sflags += sflags.empty() ? "oct" : " oct";
    if( flags & ios_base::hex ) sflags += sflags.empty() ? "hex" : " hex";
    if( flags & ios_base::scientific ) sflags += sflags.empty() ? "scientific" : " scientific";
    if( flags & ios_base::fixed ) sflags += sflags.empty() ? "fixed" : " fixed";
    if( flags & ios_base::hexfloat ) sflags += sflags.empty() ? "hexfloat" : " hexfloat";
    if( flags & ios_base::boolalpha ) sflags += sflags.empty() ? "boolalpha" : " boolalpha";
    if( flags & ios_base::_Stdio ) sflags += sflags.empty() ? "_Stdio" : " _Stdio";

    cout << "Standard flags from cout stream: " << sflags << endl;
} 
```

显然，该标志`std::ios_base::skipws`与 cout 无关。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-30T17:36:53.813

标志及其默认设置继承自`std::ios_base`（实际上，设置是为 定义的`std::basic_ios<cT, Traits>`；默认值在 27.5.5.2 [basic.ios.cons] 中定义），输入和输出流的通用基类。如果流继承自输入和输出流，则共享标志。还有其他标志对输入或输出流没有多大意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T17:31:01.513

该`skipws`标志在初始化时在*所有标准流中设置。*不只是`std::cout`。它对`std::cout`任何其他流都有意义。`noskipws`如果你非常讨厌它，你可以禁用它。

# javascript - 如何在html的输入文本框中打印日期

> ID：14092851
> 
> 赞同：1
> 
> 时间：2012-12-30T17:26:53.790
> 
> 标签：javascript, html

这是我的代码，我想在使用 onload 事件输入日期文本后在文本框中打印日期。

```
<!DOCTYPE html>
<html>
   <head>
      <script>
         function displayDate() {
            document.getElementById("fname").value = Date();
         }
      </script>
   </head>
   <body onload="displayDate()">
      Enter date: <input type="date" id="fname" readonly />
   </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T17:29:17.910

你必须

*   正确创建`Date`对象（你错过了`new`）
*   根据[rfc3339 格式化](https://www.rfc-editor.org/rfc/rfc3339)（例如`2012/12/30`：）

改变

```
document.getElementById("fname").value = Date(); 
```

至

```
var now = new Date();
var formatedDate = now.getFullYear() + '-' + (now.getMonth() + 1) + '-' + now.getDate();​
document.getElementById("fname").value = formatedDate; 
```

[示范](http://jsfiddle.net/LPkPa/)

请注意，某些浏览器接受其他格式，但 Chrome 不接受，因为它符合[规范](http://www.w3.org/TR/html-markup/datatypes.html#common.data.datetime-def)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T17:35:02.543

输入框的 value 属性是一个字符串，但是你的函数试图分配一个 Date 对象。您需要先将其转换为字符串。这是一些可以做到的代码：

```
<!DOCTYPE html>
<html>
   <head>
      <script>
         function displayDate() {
            var today=new Date();

            var date=today.toISOString().slice(0, -14);
            // Strip last 14 characters, ISO format is like
            // 2012-12-30T17:41:49.027Z but we want
            // 2012-12-30

            document.getElementById("fname").value=date;
         }
     </script>
   </head>
   <body onload="displayDate()">
      Enter date: <input type="date" id="fname" readonly>
   </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T17:33:37.567

尝试这个：

```
function displayDate() {

   var now = new Date();

   var day = ("0" + now.getDate()).slice(-2);
   var month = ("0" + (now.getMonth() + 1)).slice(-2);
   var today = now.getFullYear() + "-" + (month) + "-" + (day);

   document.getElementById("fname").value = today;
}​ 
```

HTML5 中的日期控件接受*年-月-日*格式，而`new Date()`JavaScript 中的返回日期，例如：*Sun Dec 30 2012 10:09:05 GMT+0230*

看[演示](http://jsfiddle.net/Dez6U/)

# ios - 如何在 MapKit 上覆盖搜索栏？

> ID：14092857
> 
> 赞同：2
> 
> 时间：2012-12-30T17:27:16.080
> 
> 标签：ios, user-interface, overlay, mapkit, user-experience

**如何在 MapKit 上覆盖搜索栏？**

我喜欢新的谷歌地图应用程序有一个搜索框和悬停在地图上的按钮。

见左图：

![最左边的图像显示了我的意思。](../Images/5ba3e093228a5faeda008ab451e1eb73.png)

但是，我不确定如何获得这个，因为我已经有几个星期没有编写 iOS 程序了。关于如何使用 Storyboards/Objective-C 将 UI 元素悬停在彼此之上的任何想法？

大概它是一个导航栏，已被设为不可见，但这是如何完成的，地图是如何出现在它下面的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T18:52:04.830

搜索框似乎是一个自定义控件，它模仿 UISearchBar 的行为并继承自 UIControl。由于 UIControl 继承自 UIView，因此您可以将其添加到地图视图中

1.  以编程方式使用 addSubview: 方法
2.  通过 Storyboard 在适当的视图控制器中将您的自定义控件添加到您的地图

# ruby-on-rails - 使用 pry 调试时如何访问请求对象？

> ID：14092861
> 
> 赞同：1
> 
> 时间：2012-12-30T17:27:32.033
> 
> 标签：ruby-on-rails, ruby, debugging, pry

我试图弄清楚 spree_easy 联系 gem 中的 admin/topics 控制器中发生了什么。控制器中有这段代码：

```
new_action.response do |wants|
  wants.html {render :action => :new, :layout => !request.xhr?}
end 
```

我想看看`request.xhr?`解决了什么问题。我将如何使用 pry 调试来访问它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T18:44:50.630

只需将其放在顶部：

```
binding.pry
new_action.response do |wants|
  wants.html {render :action => :new, :layout => !request.xhr?}
end 
```

`request`在控制器中的任何地方都是相同的，所以只要`binding.pry`调用它就没有关系。此外，您可以[在 GitHub 上查看 的](https://github.com/rails/rails/blob/v3.2.9/actionpack/lib/action_dispatch/http/request.rb#L146)[实现`xhr?`](https://github.com/rails/rails/blob/v3.2.9/actionpack/lib/action_dispatch/http/request.rb#L146)。

# asp.net - 可爱的编辑器：Javascript 输入

> ID：14092863
> 
> 赞同：0
> 
> 时间：2012-12-30T17:27:44.453
> 
> 标签：asp.net, cuteeditor

谁有使用[可爱编辑器](http://www.richtextbox.com/cs/default.aspx)的经验 - 它是否验证 javascript 输入？必须应用哪些设置？我必须为此目标编写自己的过滤器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T19:33:54.333

“验证”是什么意思？CuteEditor 可以从内容中删除脚本——是这样吗？如果您真的是要验证 javascript，那么我建议您看一下[jslint](http://www.jslint.com)。

# ruby-on-rails - 为其他模型设计 after_sign_in_path_for

> ID：14092864
> 
> 赞同：1
> 
> 时间：2012-12-30T17:27:48.970
> 
> 标签：ruby-on-rails, ruby, devise

我的 Rails 应用程序中有两个单独的登录模型：

*   用户
*   行政

我的 rake routes 输出是：rake routes | grep 设计

```
 new_admin_session GET    /admins/sign_in(.:format)                                                 devise/sessions#new
                  admin_session POST   /admins/sign_in(.:format)                                                 devise/sessions#create
          destroy_admin_session DELETE /admins/sign_out(.:format)                                                devise/sessions#destroy
               new_user_session GET    /users/sign_in(.:format)                                                  devise/sessions#new
                   user_session POST   /users/sign_in(.:format)                                                  devise/sessions#create
           destroy_user_session DELETE /users/sign_out(.:format)                                                 devise/sessions#destroy
                  user_password POST   /users/password(.:format)                                                 devise/passwords#create
              new_user_password GET    /users/password/new(.:format)                                             devise/passwords#new
             edit_user_password GET    /users/password/edit(.:format)                                            devise/passwords#edit
                                PUT    /users/password(.:format)                                                 devise/passwords#update
       cancel_user_registration GET    /users/cancel(.:format)                                                   devise/registrations#cancel
              user_registration POST   /users(.:format)                                                          devise/registrations#create
          new_user_registration GET    /users/sign_up(.:format)                                                  devise/registrations#new
         edit_user_registration GET    /users/edit(.:format)                                                     devise/registrations#edit
                                PUT    /users(.:format)                                                          devise/registrations#update
                                DELETE /users(.:format)                                                          devise/registrations#destroy 
```

在 ApplicationController 我有

```
 def after_sign_in_path_for(resource)
    request.referrer 
  end 
```

它适用于我的用户模型，但如何为我的管理模型执行此操作，以便在登录后我被重定向到同一页面（我使用内置的设计控制器），例如`after_admin_sign_in_path_for(resource)` 因为如果我写，所以我有日志：

```
Filter chain halted as :require_no_authentication rendered or redirected 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-30T17:30:52.873

```
def after_sign_in_path_for(resource)
  case resource
  when User then request.referrer 
  when Admin then ....
  end
end 
```

# python - 扩展 Django 用户模型无法访问属性

> ID：14092866
> 
> 赞同：1
> 
> 时间：2012-12-30T17:27:56.240
> 
> 标签：python, django, django-models, django-authentication

我正在尝试扩展 django 中的默认用户模型。

我定义了一个名为 Profile 的类。

```
# code in myapp/models/profile.py

from django.db import models
from django.contrib.auth.models import User

    class Profile(models.Model):
        user = models.OneToOneField(User)
        field = models.CharField(max_length=30)
        class Meta:
            app_label="myapp" 
```

在我的视图函数中，我调用了一个出现异常的方法：

```
def my_view_function(request):
    field = get_field(request.user)
    ...

def get_field(user):
   return user.profile.field
   # also tried return user.get_profile().field with AUTH_PROFILE_MODULE in settings.py set to "myapp.Profile", still does not work. 
```

我在堆栈跟踪`'unicode' object has no attribute 'get_profile'` 或`'unicode' object has no attribute 'profile'`.

当我尝试将 get_field() 中的用户对象与字符串连接时，我收到一条错误消息`'str' cannot concatenate with 'SimpleLazyObject'`。我尝试阅读[request.user 返回一个 SimpleLazyObject，我该如何“唤醒”它？](https://stackoverflow.com/questions/11314905/request-user-returns-a-simplelazyobject-how-do-i-wake-it)但这并没有帮助。

我正在使用中间件来确保用户已登录，因此我确定用户已登录。用户对象有什么问题？为什么 django 说用户对象有 `'__unicode__'`类型。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T17:41:28.080

假设你有`AUTH_PROFILE_MODULE = 'yourapp.Profile'`你`settings.py`应该能够调用对象[`get_profile()`](https://docs.djangoproject.com/en/dev/ref/contrib/auth/#django.contrib.auth.models.User.get_profile)上的方法`User`来获取`Profile`模型（例如，`request.user.get_profile()`）。

要获取实际字段，您需要调用`request.user.get_profile().field`.

您应该注意，从 django 1.5 开始不推荐使用用户配置文件，而支持[自定义用户模型](https://docs.djangoproject.com/en/dev/topics/auth/customizing/#auth-custom-user)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T19:04:31.187

解决它。我仔细查看了堆栈跟踪，发现我正在将字段值传递给另一个需要用户对象的函数。这导致了令人困惑的`__unicode__`错误。

# list - Prolog - 从一副牌中获得 X 个可能的牌

> ID：14092868
> 
> 赞同：1
> 
> 时间：2012-12-30T17:28:27.757
> 
> 标签：list, prolog, probability, poker

我正在用 Prolog 编写一个扑克程序，我需要你的帮助。我想让电脑检查一下，他还能拿到什么样的牌，而他已经躺在桌子上和手里了。为此，我需要用牌组中的牌填充剩余的牌。

示例：翻牌（3 张牌）已经在桌面上，2 张牌在玩家手中，还有 2 张牌可以抽。这意味着计算机需要检查他可以通过将他的 2 张隐藏牌和 3 张公开牌与其他 2 张尚未抽出的牌（包括其他玩家牌，因为他不认识他们，这没问题为我做）。

因此，如果他需要 2 张牌来获得顺子，那么如果池中还有 2 张满足条件的牌，计算机应该能够进行 ckeck。

因为我已经写下了手牌的规则，所以我剩下要做的就是写一个规则，把已经在电脑手上和桌子上的牌归还给我，再加上池中的 x 张牌。并且这条规则需要能够返回这些卡片的所有可能组合（但不是一次全部）。

可能的剩余卡片列表如下所示： list = [card(Color,Value),card(Color,Value),...]

这里有没有人有关于如何做到这一点的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T01:55:23.730

我不确定我是否理解我们的问题的微妙之处，但总的来说，听起来你想使用集合操作来找出牌组中的内容。

如果您使用 swi-prolog，我强烈建议您使用有序集库以提高性能。这将需要对您的输入进行排序。

开始时，制作一组 52 张牌。

每次电脑玩家看到一张牌时，都会将其从牌组中移除。

然后有规律

```
combination_fullfills_hand(HandSoFar, CardsRemaining, CardsINeed) :-
        length(HandSoFar, HandSize),
        NeedN is 5 - HandSize,
        length(CardsDrawn, NeedN), % done first for speed
        ord_subset(CardsDrawn, CardsRemaining),
        ord_union(CardsDrawn, HandSoFar, CompleteHand),
        hand_can_win(CompleteHand). 
```

hand_can_win 将尝试使用可以由 HandSoFar（您手中已经持有的牌）和 CardsRemaining（可以抽出的牌）组成的每手大小为 5 的手

嘿，循环在哪里？你可能想知道。如果是这样，则“循环”是 ord_subset 留下选择点，而 hand_can_win 可能会失败。8CD

# java - System.out.println(1/10) 打印 0？

> ID：14092869
> 
> 赞同：1
> 
> 时间：2012-12-30T17:28:41.267
> 
> 标签：java, casting

> **可能重复：**
> [为什么 1/3=0 在 java 中的结果？](https://stackoverflow.com/questions/4685450/why-the-result-of-1-3-0-in-java)

我正在使用 java，我的部分代码需要一个数字除以 10。为了简化（并显示我的问题），我只是将它放入 println：

```
System.out.println(1/10); 
```

打印出 0。所以，从逻辑上讲，我认为它正在将其转换为 int，所以我尝试了

```
System.out.println((double)1/10); 
```

并打印出正确的0.1。我不明白为什么它第一次自动将其转换为 int 。它还能在哪里做到这一点？为什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-30T17:30:10.437

`1`is an `int`and`10`是`int`and 当你这样做时，`int/int`你得到一个`int`.

如果你这样做`1.0/10`or`1/10.0`或者`1.0/10.0`你会得到一个 double as`0.1`

恕我直言：如果你想要整数除法，我认为`int/int`应该是一个`double`你可以转换的。`int`IE

我会

```
 a/b          // does double division
 (int)(a/b)   // does integer division. 
```

相反，你必须写

```
 a/b          // does integer division
 (double) a/b // does double division 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-30T17:30:04.663

它不会转换为 int，它已经是 int。int / int 是 int。

另请注意，当您像 in 一样转换为 double 时`(double)1/10`，由于转换运算符的优先级高于除法，这与 相同`((double)1)/10`，这具有导致除法在 double 中发生的效果。

如果你在除法之后施法`(double)(1/10)`，结果将是 0.0 。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-30T17:30:33.870

其中一个数字必须是浮点数或双精度数，因此请尝试：

```
System.out.println(1/10.0);
System.out.println(1/(double)10);
System.out.println(1.0/10); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-30T17:30:44.383

1 是整数，10 是整数，所以默认情况下除法是整数，因此一除以 10 得到零，余数为 1。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-30T17:30:56.937

这是因为，由于两个操作数都是整数，所以会进行整数除法，而 1 除以 10 的整数除法结果是整数，在本例中为 0。

在第二种情况下，由于一个参数是双精度数，除数也转换为双精度数，结果将是双精度数。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-30T17:31:29.920

您还可以执行以下操作之一：

```
System.out.println(1.0 / 10);
System.out.println(1 / 10.0);
System.out.println(1.0 / 10.0); 
```

问题是这`1 / 10`是一个`int`表达式，而您的第二个版本和上述每个版本都不是。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-30T17:31:08.400

并不是它把它转换成一个 int——而是它总是一个 int。当算术在两个整数之间时，结果是整数算术定义的整数：http: [//docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.2.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.2.2)

# scala - eclipse 无法识别依赖源和 scala 文档

> ID：14092874
> 
> 赞同：2
> 
> 时间：2012-12-30T17:29:09.673
> 
> 标签：scala, ide, sbt

我有 sbt 的 eclipse 插件来生成 eclipse 项目文件。项目生成和导入后，一切似乎都很好，除了无法查看源代码和 scala 文档。当我单击参考时，eclipse 说找不到源，我可以选择更改附加源。但是，附加的源文件已经是正确的文件（例如 junit-source.jar）。Eclipse 仍然抱怨类源代码不存在。还有其他人有这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T19:09:53.547

来自[使用 sbteclipse](https://github.com/typesafehub/sbteclipse/wiki/Using-sbteclipse)文档

```
EclipseKeys.withSource := true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T03:36:51.787

如果您不想像@David 建议的那样在 build.sbt 文件中设置它，您可以从命令行执行：

```
sbt "eclipse with-source=true" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-17T23:50:43.027

也许您的有问题的依赖项已使用剥离的调试信息进行编译。使用 -g 标志重新编译源代码并检查这是否适合您。

# iphone - 从 OpenURL 呈现模态视图控制器

> ID：14092881
> 
> 赞同：2
> 
> 时间：2012-12-30T17:30:05.010
> 
> 标签：iphone, ios, cocoa-touch, uiviewcontroller, url-scheme

我正在我的应用程序中实现一个自定义 URL 方案，并且可以成功地从另一个应用程序启动该应用程序，并显示一个警报。

相反，我想展示一个模态视图控制器。

从 APPDelegate，如何在 openURL 中显示模式视图控制器？鉴于应用程序可能已经在运行并且处于各种状态？例如，如果在发送 URL 时已经显示了模态控制器怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T19:32:11.040

您可以从应用委托访问根视图控制器。这是通过我将使用它然后通过调用该方法`self.window.rootViewController`来显示模态视图控制器来完成的。`presentViewController`

**编辑** 要检查您的弹出框是否可见并关闭它，您可以按照以下方式执行操作：

```
if([yourAppDelegate.yourPopover isPopoverVisible]) 
{ 
     [yourAppDelegate.yourPopover dismissPopoverAnimated:YES]; 
} 
```

# matlab - 求解变化变量的方程

> ID：14092887
> 
> 赞同：1
> 
> 时间：2012-12-30T17:30:32.693
> 
> 标签：matlab

我写了一个简单的代码来解决稳态发酵问题。由于变量太多，它看起来很多。

```
function y = f (x)

mumax = 1.10; %h-1
Ksx = 1.32; %gl^-1
Pix=1.39; %gl^-1
Pmx=49.9; %gl^-1
Kix=304; %gl^-1
Pis=47.1; %gl^-1
Pms=95.5; %gl^-1
Kis=140; %gl^-1
qsmax=3.42; %gg^-1h^-1
Kss=2.05; %gl^-1
alp=0.39;
qpmax=3.02; %gg^-1h^-1
Ksp=2.05;  %gl^-1
Kip=140;  %gl^-1
Pip=47.1;  %gl^-1
Pmp=95.5;  %gl^-1
F=240;
S=40;
V=120;
D=0.5;
mu= (mumax*x(2)) / (Ksx+x(2));

  y=[x(1)*(-D+mu*(1-(x(3)-Pix)/(Pmx-Pix))*(Kix/(Kix+x(2))));
  D*(S-x(2))-(qsmax*(x(2)/(Kss+x(2)))*(1-((x(3)-Pis)/(Pms-Pis)))*(Kis/(Kis+x(2))))*x(1);
  -x(3)*D+x(1)*(-D+mu*(1-(x(3)-Pix)/(Pmx-Pix))*(Kix/(Kix+x(2))))*alp+qpmax*(x(2)/(Ksp+x(2)))*(1-(x(3)-Pip)/(Pmp-Pip))*x(1)*(Kip/(Kip+x(2)));]; 

endfunction

[x, fval,  info] = fsolve (@f, [2; 10; 30]) 
```

我将 D 定义为 0.5 但实际上我需要 D 在 0 和 1 之间的区间内的解决方案，然后绘制所有 x(1),x(2),x(3) 与 D。我尝试了类似

对于 i=0:0.1:1 D=num2str(i)

但它不工作也许我把它用错了方式？最好将所有内容保存到一个矩阵中以轻松绘制它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T17:57:16.770

fsolve 上的 MATLAB 帮助中有这种解决方法，用于处理多个输入参数。将 D 定义为参数：

```
function y = fffff (x,D) 
```

然后你可以创建一个匿名函数来撬开 fsolve 的参数。尝试类似的东西

```
ivals=linspace(0,1);
for j=ivals;D=j;
  [x, fval,  info] = fsolve (@(x) fffff(x,D), [2; 10; 30]);
  Q=[Q x];
end 
```

如果您想测试 D 的很多值（或者如果您正在进行时间演化），那么您不会以这种方式构建 Q，但是像这样使用 fsolve 应该可以完成工作。

# xml - 在 html5 应用程序中显示来自 xml 的数据

> ID：14092891
> 
> 赞同：0
> 
> 时间：2012-12-30T17:30:40.297
> 
> 标签：xml, database, html

我一直在搜索如何在 html5 应用程序中显示来自 xml 文件的数据。我有一个 html5 网页，它必须从本地保存在文件夹中的 xml 读取数据。我一直在尝试使用 xslt、java 和所有东西，但我真的做不到。

有人能帮助我吗？任何假人用户指南？任何提示？谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T02:00:53.360

我总是使用 AJAX 检索我的 XML，所以对我来说：

```
theXML = xmlhttp.responseXML.documentElement;
// documentElement is the root of the XML

var elementXXX = theXML.getElementsByTagName('elementXXX')[0].childNodes[0].nodeValue;
//This will retrieve a first level element in the XML 
```

如果有多个节点，那么您必须遍历它们并在每次迭代中提取 nodeValue。我发现将要从 XML 元素中提取的内容视为元素的第一个子元素会很有帮助——

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-30T21:40:35.680

我知道这个问题很老，但无论如何我都会为其他人添加它，因为我目前正在做类似的事情。

有许多方法可以提取 XML 数据以显示在网页上。要使用 JQuery 来完成，例如使用名为 data.xml 的 XML 文件：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
<script type="text/javascript">
$(document).ready(function () {
    $.ajax({
        type: "GET",
        url: "data.xml",
        dataType: "xml",
        success: xmlParser
    });
});

function xmlParser(xml) {
   // The data to be read in..
}
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T00:10:29.387

使用 jQuery，这里有一个指南：[http ://api.jquery.com/jQuery.parseXML/](http://api.jquery.com/jQuery.parseXML/)

# algorithm - 在数组中找到 1 ... k 的最长排列？

> ID：14092902
> 
> 赞同：1
> 
> 时间：2012-12-30T17:31:31.763
> 
> 标签：algorithm, permutation

给定一个由 N 个整数组成的序列。如何找到形成排列的相邻数字的最长子序列的长度。我只找到了 O(N^2) 算法。我认为应该有 O(NlogN) 甚至 O(N) 的解决方案。请建议其中任何一个。

这个序列的答案`1 3 1 2 5`是 3 (4 1 **3 1 2** 5 )

这是 SPOJ 问题[LPERMUT](https://www.spoj.com/problems/LPERMUT/)。

O(N^2) 算法

```
Foreach i find the sum of first i elemetns: Sum(i)

Foreach i find the last element with indexes 1 .. i-1 which is equal to i-rd element: Prev(i)

Foreach i iterate j throw i+1 .. N while Prev(j) equals between i and j. 
//So we get that all elemnent between i and j are distinct. 

Then check if sum of them is equal to 1+2+...(j-i+1). 
    If it occurs that elements are permutation. 
    Sum of the elements between i and j we can get by Sum(j) - Sum(i-1) 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-30T18:48:19.260

您可以使用贪心算法

```
Input: ListOfElements={el_1, el_2,...,el_N}
permutation<-{}
while(dimension(size(permutation)<DesiredSize)
{
  while(VerifyIfIsPermutation(permutation U el)=false)
   el<-SelectAnElementFromList(ListOfElements)
}
print permutation 
```

该算法具有 O(n^2) 复杂度。如果先前已排序数组，则可以降低这种复杂性。另一种生成排列的方法是对此列表使用随机洗牌。此外，您可以在元素之间使用多次旋转，从而保证不重复生成的排列。

# javascript - 构建与非 JavaScript 浏览器兼容的购物车

> ID：14092907
> 
> 赞同：0
> 
> 时间：2012-12-30T17:33:10.487
> 
> 标签：javascript, jquery, html, shopping-cart

我正在建立一个在线商店，我决定建立自己的购物车，我知道有很多开箱即用的解决方案，但它只是一个小商店，我更喜欢最好的辐条解决方案。

我想与非 JavaScript 脚本浏览器兼容的商店配对，所以我一直在考虑最好的方法。

我正在考虑做这样的事情：

```
 <script type="text/javascript">
$(document).ready(function() {
       $('form').each(function() {
               $(this).removeAttr('action')
      });

});
 </script>

<div>Product Description</div>

<form action="/addproduct.php" method="post">

<select name="size">
<option>Small</option>
<option>Medium</option>
<option>Large</option>
<option>X Large</option>
</select>

<input onclick="AddProduct();" value="Add Product" type="submit">
</form> 
```

任何意见或建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T17:42:28.763

我认为最好的方法是做这样的事情：

```
$('form').each(function() {
    $(this).submit(function(event) {
        event.preventDefault(); //So that the form is not submitted.
        //Add the product to the cart.
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T19:22:05.860

或者不硬编码 onclick="AddProduct();" 并在 JS 中通过 id 来添加一些魔法动作。

# python - Pexpect 关闭一个 shell 脚本

> ID：14092908
> 
> 赞同：1
> 
> 时间：2012-12-30T17:33:12.403
> 
> 标签：python, variables, pexpect

我有两个已定义的函数，`foo`它们`bar`运行`pexpect`时使用`pexpect.spawn`. 接下来它只是使用 pexpect 发送一个 control-c`sendcontrol`并`close`告诉正在运行的脚本关闭，然后终止该对象。程序运行后，对象仍在内存中运行，看起来像 control-c 和/或`child.close`从未到达`foo()`

该脚本应该**终止**我生成的对象，但是我的`if`逻辑`bar(child)`似乎对在其中创建的对象没有任何影响`foo()`

这是代码：

```
def foo():
   child = pexpect.spawn ('./script.sh')
   return child
def bar(child):
   if child.isalive():
      child.sendcontrol('c')
      child.close()
   if child.isalive():
      print 'Child did not exit gracefully.'
   else:
      print 'Child exited gracefully.'
a = foo()
bar(a) 
```

该程序总是以打印“孩子优雅地退出”结束，但让我`script.sh`在后台运行

此代码在这里有效：

```
def bar(child):
   child.sendcontrol('c') 
```

与创建的对象交互正常，`foo()`但由于某种原因，我的其他具有`if`逻辑的代码运行`if`正确，但对我的对象没有做任何事情

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T23:42:48.597

我认为我的问题是我的 .PY 文件中的缩进被一个字符关闭了

# java - Java - 将十六进制字符串读取为 ASCII 的多项式函数

> ID：14092909
> 
> 赞同：4
> 
> 时间：2012-12-30T17:33:20.730
> 
> 标签：java

我有一个应该读取十六进制数字的函数，但它没有正确读取它。多项式函数将字符串读取为 ASCII 而不是十六进制。

这是正在执行工作的代码部分：

```
JButton button = new JButton("Calculate");
        button.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                String str = textArea.getText();

                      int crc = 0xFFFF;        
                     int polynomial = 0x1021;  

                        byte bytes[] = str.getBytes();
                     for (byte b : bytes) {
                         for (int i = 0; i < 8; i++) {
                             boolean bit = ((b   >> (7-i) & 1) == 1);
                             boolean c15 = ((crc >> 15    & 1) == 1);
                             crc <<= 1;
                             if (c15 ^ bit) crc ^= polynomial;
                          }
                     }
                     crc &= 0xFFFF;
                textField.setText(""+Integer.toHexString(crc));
            }
        });
        button.setBounds(10, 245, 90, 25);
        panel.add(button); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T17:45:07.737

String.getBytes 为您提供具有默认字符编码的字符。如果要将字符串编码为字节，则不建议使用（建议您提供所需的编码）

在这种情况下，您想将十六进制字符串解析为字节。一个简单的方法是使用 BigInteger。

```
String hex = "CAFEBABE";
byte[] bytes = new BigInteger(hex, 16).toByteArray();
if (bytes.length > 0 && bytes[0] == 0)
    bytes = Arrays.copyOfRange(bytes, 1, bytes.length);
System.out.println(Arrays.toString(bytes)); 
```

印刷

```
[-54, -2, -70, -66] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T17:39:51.890

是的， String.getBytes() 为您获取 ascii 字符串的字节。尝试[Integer.decode(str)](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#decode%28java.lang.String%29)，假设字符串以“0x”开头，或者自己添加。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T17:41:50.357

```
byte bytes[] = str.getBytes(); 
```

上面的行使用您平台的默认编码将字符转换为字节。因此，如果它是 ASCII 并且您的十六进制字符串是`A1`，您将获得 A 的 ASCII 值，然后是 1 的 ASCII 值。

使用十六进制编码器/解码器将字符串转换为字节。我喜欢[Guava](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/io/BaseEncoding.html)，但 Apache [commons-codec](http://commons.apache.org/codec/api-release/org/apache/commons/codec/binary/Hex.html)也有一个实现。[您当然也可以按照Peter Lawrey 的回答](https://stackoverflow.com/a/14093005/571407)显示自己的实现。

# c++ - 如何将整数转换为最短的有效 C99 函数名字符串？

> ID：14092912
> 
> 赞同：0
> 
> 时间：2012-12-30T17:33:33.820
> 
> 标签：c++

我正在实现一个代码生成器，它为 x = y + w + z 或 A = B*C + D 或其他类型的每个线性代数表达式生成特定代码。每个表达式都分配有一个唯一的无符号长 id，有时我需要将此 id 包装为一个唯一的函数名称。

我发现[了一个类似的问题](https://stackoverflow.com/questions/561486/how-to-convert-an-integer-to-the-shortest-url-safe-string-in-python)，但无法将解决方案转换为我的问题，因为我还必须用 C++ 编写此代码，并且有效的 url 名称与有效的 C99 函数名称不同。我真的不知道从哪里开始！

编辑：我确实忘了提到一个函数可以分配多个 64 位 ID，因此将 ID 转换为字符串并连接字符串可能会导致函数名太大而无法由所有编译器处理

编辑2：好的，我可能不够精确。我正在生成 OpenCL 代码，生成的目的是删除临时代码并减少内核启动时间。出于某种原因，opencl 基于 C99，但某些编译无法处理很长的内核名称（因此我有一些构建错误。）考虑到所有可能性（标量类型、运算符、内联函数等），64 位的 ID 是勉强够了，但我觉得还是够了

```
vec0 = vec1+vec2 has for example ID 1912142123
vec1 = vec0-vec2 has for example ID 3312098234
vec2 = vec0*scal has for example ID 329084089 
```

这三个操作可以放在同一个内核中。我想为生成的代码生成内核名称，_1912142123_3312098234_329084089 对于某些编译器来说可能太长了。

希望现在更清楚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T18:02:44.973

以下算法使用 n 位转换数字，其中 n 是有效字符的数量：

```
char *digs = "01234567890ABCDEFGHIJKLMNOPQRSTUVWXYZabzdefghijklmnopqrstuvwxyz_";
int n = strlen(digs);

long id = 1912142123;
char buffer[16];
int i = 0;
do
    buffer[i++] = digs[id%n];
while((id /= n)>0);
buffer[i] = 0; 
```

digs 字符串应包含所有有效字符。在此示例中，“1912142123”将转换为“gZEzm1”

# multithreading - 专门为一个对象使用 QThread

> ID：14092915
> 
> 赞同：1
> 
> 时间：2012-12-30T17:33:55.020
> 
> 标签：multithreading, qt, qthread, qt4.8

**编辑2**

这是解决以下问题的解决方案，即专门为对象提供 QThread。

我已经改变了解决问题的方法。我不想再关闭 MyClass 中的 QThread 了，因为下面的解决方案看起来更容易而且看起来也不错。

我的解决方案是修改这里给出的解决方案：http: [//mayaposch.wordpress.com/2011/11/01/how-to-really-truly-use-qthreads-the-full-explanation/](http://mayaposch.wordpress.com/2011/11/01/how-to-really-truly-use-qthreads-the-full-explanation/)

该解决方案的问题是 QObject 工作人员并没有真正被删除（检查过）。

```
QThread *myThread = new QThread();
SCIntermediary* myObj = new MyClass();
myObj->moveToThread(myThread);
connect(myThread, SIGNAL(started()), myObj, SLOT(setup()));
connect(myObj, SIGNAL(destroyed()), myThread, SLOT(quit()), Qt::DirectConnection);
connect(myObj, SIGNAL(finished()), myObj, SLOT(deleteLater()));
connect(myThread, SIGNAL(finished()), myThread, SLOT(deleteLater()));
myThread -> start();

// do your work bla bla bla

myObj -> finishIt(); // this function only emits finish() signal of myObj
myThread -> wait(); 
```

这是第一个对我有用的解决方案，它可以完全销毁 myObj 和 myThread 而没有任何错误或其他麻烦。

**结束编辑**

我正在尝试创建一个类将在我的客户端和服务器之间做一些事情。我希望它有自己的线程。所以我所做的是：

```
class Myclass : public QObject {
    Q_OBJECT
public:
    Myclass();
    ~Myclass();

private:
    QThread *my_thread;
    QTcpSocket *sock;
} 
```

这是我编写构造函数的方式：

```
Myclass::Myclass(){
    my_thread = new QThread();
    my_thread -> start();
    moveToThread(my_thread);

    sock = new QTcpSocket(this);
    sock -> connectToHost("host", port);
} 
```

这没有用。它不起作用，因为 TcpSocket 的代码没有在父对象当前所在的同一线程中执行。所以我决定做的是为设置创建插槽和信号，并在我的构造函数中发出它。这是我的代码现在的样子。

```
class Myclass : public QObject {
    Q_OBJECT
public:
    Myclass();
    ~Myclass();

public slots:
    void setup();

signals:
    void do_setup();

private:
    QThread *my_thread;
    QTcpSocket *sock;
} 
```

其中一些是实施

```
Myclass::Myclass(){
    my_thread = new QThread();
    my_thread -> start();
    moveToThread(my_thread);

    connect(this, SIGNAL(do_setup()), this, SLOT(setup()));
    emit do_setup();
}

void Myclass::setup(){
    sock = new QTcpSocket();
    sock -> connectToHost("host", port);
} 
```

现在它起作用了，可悲的部分来了——它看起来很糟糕！这太糟糕了，我不知道如何让它看起来更好，或者首先应该如何完成这种模式。你会建议我做什么来获得同样的效果？

另外 - 我不知道如何为此编写好的析构函数 - 如何顺利删除 QThread 和所有类对象..

**编辑**

现在我相信解决方案还不错——剩下的唯一问题是如何为此编写析构函数。我不知道如何在这里完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T19:16:05.950

[您可以使用http://qt-project.org/doc/qt-4.8/qmetaobject.html#invokeMethod](http://qt-project.org/doc/qt-4.8/qmetaobject.html#invokeMethod)而不是使用信号`QMetaObject::invokeMethod`

```
QMetaObject::invokeMethod(this, "setup", Qt::QueuedConnection); 
```

但这仍然很重，但我想这是更好的选择......如果有人有更好的主意，请评论:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T03:17:33.933

对于析构函数，请查看 Maya Posch 示例： [http://mayaposch.wordpress.com/2011/11/01/how-to-really-truly-use-qthreads-the-full-explanation/](http://mayaposch.wordpress.com/2011/11/01/how-to-really-truly-use-qthreads-the-full-explanation/) 因为您的线程不是MyClass，也许您可​​以在析构函数中调用线程上的finish（）并将MyClass的destroy（）信号连接到线程的deleteLater？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-31T16:49:56.153

怎么样，我认为在连接之前手动将套接字移动到新创建的线程应该可以工作，因为两个对象都应该在新创建的同一个线程中？

```
Myclass::Myclass()
{
    my_thread = new QThread();
    my_thread -> start();
    moveToThread(my_thread);

    sock = new QTcpSocket(this);
    sock -> moveToThread(my_thread);
    sock -> connectToHost("host", port);
} 
```

# php - 从数组中移位和提取 - php

> ID：14092916
> 
> 赞同：-3
> 
> 时间：2012-12-30T17:34:16.613
> 
> 标签：php, arrays

> **可能重复：**
> [来自大数组的子数组](https://stackoverflow.com/questions/4762135/sub-array-from-a-big-array)

假设我有一个包含 N 个条目的数组。给定两个整数 n 和 m，我对从第 n 行到第 m 行的条目感兴趣。假设该值只能取两个值 val0 和 val1

```
n => [val0]
n+1=> [val0]
n+2 => [val1]
...
m=> [val0] 
```

然后我想提取一个返回的子数组（一个移位运算符，如）：

```
0 => [val0]
1 => [val0]
2 => [val1]
...
m-n => [val0] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-30T17:39:44.700

尝试,作为偏移量和作为限制[`array_slice()`](http://php.net/manual/en/function.array-slice.php)传递`n``m - n + 1`

有关更多信息，请参阅： [PHP 参考手册 - array_slice](http://php.net/manual/en/function.array-slice.php)

# android - 如何在活动启动时显示“滑动菜单”？

> ID：14092919
> 
> 赞同：18
> 
> 时间：2012-12-30T17:34:59.513
> 
> 标签：android, android-sliding

我正在尝试使用 Jeremy Feinstein 的优秀图书馆[滑动菜单](https://github.com/jfeinstein10/SlidingMenu)。

就我而言，如果活动是在滑动菜单打开的情况下启动的，那就太好了

![在此处输入图像描述](../Images/867f3a13eddb5161da1a9e03de91dd51.png)

而不是像滑动菜单一样关闭

![在此处输入图像描述](../Images/cf06b04fa8eff5c0eb8b847ee56790cd.png)

我试图投入`toggle()`活动，但没有用。

**滑动SherlockFragmentActivity**

它与[SlidingFragmentActivity](https://github.com/jfeinstein10/SlidingMenu/blob/master/library/src/com/slidingmenu/lib/app/SlidingFragmentActivity.java)相同，只是它扩展了 SherlockFragmentActivity 而不是 FragmentActivity。

**基本活动**

```
public class BaseActivity extends SlidingSherlockFragmentActivity {
    private int mTitleRes;
    protected ListFragment mFrag;

    public BaseActivity(int titleRes) {
        mTitleRes = titleRes;
    }

    private static final String TAG = "BaseActivity";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setTitle(mTitleRes);

        // set the Behind View
        setBehindContentView(R.layout.menu_frame);
        FragmentTransaction t = this.getSupportFragmentManager().beginTransaction();
        mFrag = new SampleListFragment();
        t.replace(R.id.menu_frame, mFrag);
        t.commit();

        // customize the SlidingMenu
        SlidingMenu sm = getSlidingMenu();
        sm.setShadowWidthRes(R.dimen.shadow_width);
        sm.setShadowDrawable(R.drawable.shadow);
        sm.setBehindOffsetRes(R.dimen.slidingmenu_offset);
        sm.setFadeDegree(0.35f);
        sm.setTouchModeAbove(SlidingMenu.TOUCHMODE_FULLSCREEN);

        getSupportActionBar().setDisplayHomeAsUpEnabled(true);

        sm.setOnOpenListener(new SlidingMenu.OnOpenListener() {
            @Override
            public void onOpen() {
                Log.d(TAG, "onOpen");
            }
        });
        sm.setOnOpenedListener(new SlidingMenu.OnOpenedListener() {
            @Override
            public void onOpened() {
                Log.d(TAG, "onOpened");
            }
        });
        sm.setOnCloseListener(new SlidingMenu.OnCloseListener() {
            @Override
            public void onClose() {
                Log.d(TAG, "onClose");
            }
        });
        sm.setOnClosedListener(new SlidingMenu.OnClosedListener() {
            @Override
            public void onClosed() {
                Log.d(TAG, "onClosed");
            }
        });

    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case android.R.id.home:
                toggle();
                return true;

        }
        return super.onOptionsItemSelected(item);
    } 
```

}

**翻转检查**

```
public class FlipperCheck extends BaseActivity {

    private ViewFlipper flipper;
    private TextView secondaryText;

    public FlipperCheck() {
        super(R.string.app_name);
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setSlidingActionBarEnabled(true);

        setContentView(R.layout.main);
        flipper = (ViewFlipper) findViewById(R.id.voicerecorder_textflipper);
        flipper.startFlipping();
        flipper.setInAnimation(AnimationUtils
                .loadAnimation(getApplicationContext(), android.R.anim.fade_in));
        flipper.setOutAnimation(AnimationUtils
                .loadAnimation(getApplicationContext(), android.R.anim.fade_out));

        secondaryText = (TextView) findViewById(R.id.voicerecorder_secondarytext);
        secondaryText.setText("Why cannot I see u...");

        final TextView firstText = (TextView) findViewById(R.id.firsttext);

        final TextView secondText = (TextView) findViewById(R.id.secondtext);

        Button button = (Button) findViewById(R.id.button);
        button.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                stopFlipper();
                flipper.setVisibility(View.INVISIBLE);
                secondaryText.setVisibility(View.VISIBLE);
            }
        });

        Button secondButton = (Button) findViewById(R.id.second_button);
        secondButton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                firstText.setText("Replaying");
                secondText.setText("Replaying");

            }
        });
    }

    @Override
    protected void onStart() {
        super.onStart();
        toggle();
    }

    private void stopFlipper() {
        flipper.getInAnimation().setAnimationListener(new Animation.AnimationListener() {

            public void onAnimationStart(Animation animation) {
            }

            public void onAnimationRepeat(Animation animation) {
            }

            public void onAnimationEnd(Animation animation) {

                int displayedChild = flipper.getDisplayedChild();
                int childCount = flipper.getChildCount();

                if (displayedChild == childCount - 1) {
                    flipper.stopFlipping();
                }
            }
        });
    }

} 
```

**[编辑 2]**

看起来像`toggle()`在`onStart()`显示活动之前激活滑动菜单的打开和关闭。

```
01-01 19:27:53.780: D/BaseActivity(351): onOpen
01-01 19:27:53.780: D/BaseActivity(351): onOpened
01-01 19:27:53.780: D/BaseActivity(351): onClose
01-01 19:27:53.790: D/BaseActivity(351): onClosed
01-01 19:27:54.241: D/dalvikvm(351): GC_EXTERNAL_ALLOC freed 2725 objects / 223104 bytes in 80ms
01-01 19:27:54.370: D/dalvikvm(351): GC_EXTERNAL_ALLOC freed 290 objects / 12352 bytes in 75ms
01-01 19:27:54.520: I/ActivityManager(59): Displayed activity com.abc.FlipperCheck/.FlipperCheck: 3084 ms (total 3084 ms) 
```

**我的问题**

使用 Android 库“滑动菜单”时，如何在滑动菜单打开的情况下启动活动？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-01T14:34:04.290

您可以使用：

```
@Override
public void onPostCreate(Bundle savedInstanceState) {
    super.onPostCreate(savedInstanceState);
    new Handler().postDelayed(new Runnable() {
        @Override
        public void run() {
            toggle();
        }
    }, 1000);
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-07-05T16:06:25.600

`Handler`如果您从其中一个类继承，则有一种更好的方法可以做到这一点，而无需向您自己发布`SlidingActivity`：

```
@Override
public void onPostCreate(Bundle savedInstanceState) {
    if (savedInstanceState == null) {
        savedInstanceState = new Bundle();
        savedInstanceState.putBoolean("SlidingActivityHelper.open", true);
    }
    super.onPostCreate(savedInstanceState);
} 
```

这是有效的，因为`SlidingActivityHelper`从保存的实例状态恢复菜单打开/关闭状态。*如果没有保存状态，那么将其设置为默认*状态并没有什么坏处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-19T06:52:55.287

```
getSlidingMenu().post(new Runnable() {

        @Override
        public void run() {

           getSlidingMenu().showMenu();

        }
    }); 
```

把它放在 onCreate 中对我有用。

# r - 在没有循环的情况下找到最多两个向量？

> ID：14092922
> 
> 赞同：0
> 
> 时间：2012-12-30T17:35:05.350
> 
> 标签：r, vectorization

如果有两个向量，说`x`和`y`。

```
for (i in 1:length(x))
   z[i] = max(x[i],y[i]) 
```

您能帮我在不使用循环的情况下执行此操作吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-30T17:36:55.730

假设向量`x`和`y`的长度相同，`pmax`是您的功能。

```
z = pmax(x, y) 
```

如果长度不同`pmax`，由于回收，表达式将返回与循环不同的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T19:15:09.833

为了完整起见，我提供了一个解决方案，该解决方案使用`apply`：

```
Z = cbind(x,y)
apply(Z, 1, max) 
```

我不知道不同的解决方案在速度方面的比较，但是，@JevgenijsStrigins，你可以很容易地检查。

# jquery - jQuery 的动画（）；行为不符合预期（？）

> ID：14092925
> 
> 赞同：0
> 
> 时间：2012-12-30T17:35:15.320
> 
> 标签：jquery, jquery-animate

```
<h1 class="page-title">B<span>eef</span></h1>

jQuery(".page-title").hover(
  function() {

  $(".page-title span").animate({
    width: ['toggle', 'swing'],
  }, "slow"); },

  function() {
    $(".page-title span").animate({
    opacity: 1,
    width: ['toggle', 'swing'],
  }, "slow");
 }
); 
```

鉴于此代码，预期的行为是最初我会将“B”视为.page-title。当悬停在上面时，“eef”应该以摆动的方式水平*切换*。但相反，它以一种非常不优雅的方式*弹出*。我尝试了不同的事情，这些事情对我来说似乎是合乎逻辑的，以使其更顺畅，但我没有做对。

哦，还有：

```
span{
  display: none;
} 
```

试图模仿这种效果：[http ://susy.oddbird.net/](http://susy.oddbird.net/)

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T19:27:00.613

这是另一个使用 jQuery 的示例。您可以获取当前宽度，然后设置为 0，而不是隐式定义宽度。这样您可以为任何长度的文本设置动画。正如@gronostaj 所说，您不能在内联元素上设置宽度，因此必须将其设置为`display:inline-block`& `overflow:hidden`。添加 .stop() 也很好，这样你的动画就不会发疯。[jsFiddle](http://jsfiddle.net/psyon001/tNkKd/1/)

**jQuery**

```
var spanWidth = $('.page-title span').width();
$('.page-title span').width(0);
$('.page-title').on({
    mouseenter: function() {
        $('.page-title span').stop().animate({
            width: spanWidth,
            opacity: 1
        });
    },
    mouseleave: function() {
        $('.page-title span').stop().animate({
            width: 0,
            opacity: 0
        });
    }
});​ 
```

**CSS**

```
h1{
    text-align:center;
    font-size: 5em;
}
h1 span{
    display: inline-block;
    opacity: 0;
    overflow: hidden;
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T19:13:23.337

`span`s 是内联元素，所以你不能改变它们的宽度。此外，您必须隐藏溢出。请参阅[此示例](http://jsfiddle.net/gronostaj/8hkMG/)。

此外，您应该考虑使用 CSS3 过渡而不是 JavaScript - 您将获得更流畅的动画并且您的代码将更易于维护：[demo](http://jsfiddle.net/gronostaj/qj3PY/)。

# c# - 布尔数据触发器

> ID：14092929
> 
> 赞同：0
> 
> 时间：2012-12-30T17:35:53.953
> 
> 标签：c#, wpf, datatrigger

我有一个`ListView`有一些价值。我想更改`ListView`的字体颜色，但此代码不起作用：

```
 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
     xmlns:sys="clr-namespace:System;assembly=mscorlib"
    DataContext="{Binding RelativeSource={RelativeSource Self}}"
    Title="Navi" mc:Ignorable="d" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 

    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" Height="603" Width="1029"
    ShowInTaskbar="True" Closing="Window_Closing" Background="#FFD6D6D6">
<Window.Resources>

    <Style TargetType="{x:Type TextBlock}">
        <Style.Triggers>
            <DataTrigger Binding="{Binding DarkTheme}" Value="True">
                <Setter Property="Control.Foreground" Value="Red"/>
            </DataTrigger>
        </Style.Triggers>
    </Style> 
```

CS：

```
public Int32 DarkTheme {get; set;}
    //First init
    public MainWindow()
    {
        DarkTheme = 1;
        //Init component 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T17:37:48.223

`DarkTheme`从更改`Int32`为`bool`。

```
public bool DarkTheme {get; set;}

DarkTheme = true; 
```

或者

您还可以创建可以在[Binding中使用的](http://blogs.msdn.com/b/bencon/archive/2006/05/10/594886.aspx)[转换器](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)。

```
 public class IntToBooleanConverter : IValueConverter
    {
      public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
      {
        if (value is int)
        {
            if ((int)value) == 1)
                return true;
            return false;
        }

        return DependencyProperty.UnsetValue;
      }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
       if (value is bool)
        {
            if ((bool)value) )
                return 1;
            return 0;
        }

        return DependencyProperty.UnsetValue;
    } 
```

# javascript - Javascript 中的稀有字符

> ID：14092931
> 
> 赞同：0
> 
> 时间：2012-12-30T17:36:02.443
> 
> 标签：javascript, html, special-characters

我正在使用 Javascript 字符中的大量稀有字符，例如 **'èéêëēėẹěəæεɛ'**，并将它们存储在一个数组中，但由于某种原因，javascript 无法识别它们，并在无法识别它们的地方放置了很多**问号**：

```
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
```

包含在页面上，但是当`Alert (èéêëēėẹěəæεɛ');`我得到类似“����eeeeee�???”的结果时 甚至当我复制粘贴数组中的字符时，它们最终也会像这样**'èéêëeee?e?æe?'** 其中一些失踪了。

谁能告诉我我缺少什么，这样我就可以存储这些字符，以便它们像**'èéêëēėẹěəæεɛ'**这样的数组保留，并且它们也会像那样显示出来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T17:49:07.877

网络浏览器通过以下方式确定网页的字符编码：

*   如果从文件系统加载，请使用`<meta charset`
*   如果从 url 加载：
    *   如果存在指定字符集的 http 标头，请使用它。完毕。
    *   否则找一个 `<meta charset`

大多数 Web 服务器发送一个指定编码/字符集的 http 标头。您需要将其配置为发送正确的文件，即 utf-8（假设您的文本编辑器确实配置为将文件保存为 utf-8）。决定过程的重要内容是网络浏览器通常会忽略您的元标记，因为您的网络服务器发送一个真正的 http 标头，并且真正的 http 标头优先。

# css - 两个 CSS 列。一动态二固定协同工作

> ID：14092932
> 
> 赞同：1
> 
> 时间：2012-12-30T17:36:02.660
> 
> 标签：css, dynamic, height, fixed, multiple-columns

我有类似于两列布局的东西。
它的宽度是 1000px。

有两种对象。
图像对象和文本之一。我希望他们看起来和行为像这样（示例图片）：http: [//i.imgur.com/C7y2U.jpg](http://i.imgur.com/C7y2U.jpg)

但是在我的网站上它搞砸了，请随意查看代码：（请不要介意它的波兰语，图像对象也是灰色矩形） [http://uchman.org/pl/banan](http://uchman.org/pl/banan)

您在我的网站上寻找的内容：

```
<ul class="miniatura">
 <li class="imag">      <-- image object
 </li>
 <li class="desc">      <-- text object
 </li>
</ul> 
```

问题

*   当文本对象高于图像对象（>200px）时，图像对象看起来比它应该的低，页面看起来很糟糕

期望

*   文本对象必须具有 0-400px 范围内的动态高度（我不计算边距
*   图像对象应该像我的示例图像一样定义网格，而文本对象应该是主题。例如，如果图像之间的空间太大，则一个图像对象应该“跳”到位（在我的网站上，第二个图像对象太低并且存在难看的间隙）
*   文本对象后的间隙很好（例如在示例图像上，例如，如果文本对象是 360 像素，间隙应该是 40 像素）

我已经尝试了一些东西，但我在互联网上找不到任何东西。我不会建议我尝试过什么，因为我可能做错了什么。最好的解决方案是纯 html/css。我希望我很好地描述了这个问题。请帮忙。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T19:01:28.027

根据我从您的描述中了解到的情况，我这样做[了](http://jsfiddle.net/stefanz/2NDsC/)。

第一次我想这种标记会更好地帮助你

```
<div id="container">
    <div class="column">
        <div class="textBox">
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Rem mollitia fugit voluptate expedita molestias optio deleniti ea nulla perspiciatis quae molestiae accusamus quisquam ab illum ipsam eos qui nam ad.</p>
        </div>
        <img src="http://lorempixel.com/output/food-q-c-490-200-7.jpg" alt="">
    </div>
    <div class="column">
        <img src="http://lorempixel.com/output/food-q-c-490-200-7.jpg" alt="">
        <img src="http://lorempixel.com/output/food-q-c-490-200-7.jpg" alt="">
        <div class="textBox">
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Rem mollitia fugit voluptate expedita molestias optio deleniti ea nulla perspiciatis quae molestiae accusamus quisquam ab illum ipsam eos qui nam ad.</p>
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Rem mollitia fugit voluptate expedita molestias optio deleniti ea nulla perspiciatis quae molestiae accusamus quisquam ab illum ipsam eos qui nam ad.</p>
        </div>
    </div>
</div><!--/#container-->​ 
```

我还建议您查看[masonry](http://masonry.desandro.com/)，它在某些情况下可能很有用。

# python - 正确启动cherrypy

> ID：14092933
> 
> 赞同：0
> 
> 时间：2012-12-30T17:36:25.220
> 
> 标签：python, http, cherrypy

如何正确启动cherrypy？它在 3.0 中对我有用，但现在我可以提供内容，但每次触摸源时都必须启动我的服务，即使自动重新加载器正在运行。

我已经添加了该`cherrypy.engine.block()`语句，该语句有效，但cherrypy随后停止为我的应用程序提供服务（浏览器中没有答案，即使它正确打开了TCP端口）。

那么关于在哪里或寻找什么的任何线索或见解？

**这是在标准输出上：**

```
[30/Dec/2012:17:05:28] ENGINE Bus STARTING<br>
[30/Dec/2012:17:05:28] ENGINE Started monitor thread 'Autoreloader'.<br>
[30/Dec/2012:17:05:28] ENGINE Started monitor thread '_TimeoutMonitor'.<br>
[30/Dec/2012:17:05:28] ENGINE Serving on 0.0.0.0:8080<br>
[30/Dec/2012:17:05:28] ENGINE Bus STARTED<br>
[30/Dec/2012:17:05:28] ENGINE Bus STARTING<br>
[30/Dec/2012:17:05:28] ENGINE Monitor thread 'Autoreloader' already started.<br>
[30/Dec/2012:17:05:28] ENGINE Monitor thread '_TimeoutMonitor' already started.<br>
[30/Dec/2012:17:05:28] ENGINE Already serving on 0.0.0.0:8080<br>
[30/Dec/2012:17:05:28] ENGINE Bus STARTED<br> 
```

### 我如何开始它：

```
cherrypy.tree.mount(login(), '/', configPath)<br>
cherrypy.tree.mount(reservation(), '/reservation', configPath)<br>
cherrypy.tree.mount(administration(), '/reservation/administration', configPath)<br>
cherrypy.server.socket_host= "0.0.0.0"<br>
cherrypy.engine.start() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T18:29:40.973

正如 Makoto 所说，看起来您已经启动了两次 CherryPy。您是否同时调用了 engine.start/engine.block 和cherrypy.quickstart？如果是这样，请删除其中一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T17:12:53.907

我的问题是cherrypy的旧版本（实际上是他们网站上链接的最新版本！）与python 3.3结合使用。从 bitbucket 获取最新的软件包为我解决了这个问题！

# objective-c - IBOutlet 不会显示在 .xib 下拉选择菜单中

> ID：14092939
> 
> 赞同：0
> 
> 时间：2012-12-30T17:37:07.917
> 
> 标签：objective-c, xcode4.5

我正在尝试将分段控件添加到单页应用程序，但属性名称 quoteOpt 不会显示在 .xib 文件的下拉菜单中以供选择。已检查代码，但无法弄清楚原因。

知道为什么吗？

这是.h文件：

```
#import <UIKit/UIKit.h>

@interface PDViewController : UIViewController

@property (nonatomic, strong) NSArray *myQuotes;
@property (nonatomic, strong) NSMutableArray *movieQuotes;
@property (nonatomic, strong) IBOutlet UITextView *quoteText;
@property (nonatomic, strong) IBOutlet UISegmentedControl *quoteOpt;

- (IBAction) quoteButtonTapped:(id)sender;

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T17:43:05.570

您实际上是否在界面构建器中提供了 UIDatePicker ？它们在视觉外观上非常相似，人们经常切换它们而没有意识到其中一个不是另一个的子类。

（如果这不起作用，请踢 Xcode。有时它会在 headers 和 interface builder 之间不同步，需要重新启动）

# javascript - JavaScript：如何隐藏/取消隐藏

> ID：14092940
> 
> 赞同：9
> 
> 时间：2012-12-30T17:37:11.770
> 
> 标签：javascript, html, hide, innerhtml

我试图避免使用`innerHTML`它，因为它会导致我的浏览器崩溃，可能是由于 250 毫秒的刷新率。

无论如何，我宁愿隐藏一些内容，`<div>`只有`<div>`在满足特定条件时才显示。解决这个问题的最佳方法是什么？

基本上，我现在正在做的是..

```
setInterval(function () {
    if (serverReachable()) {
        .... // lines of code
        .... // lines of code
    var changeIt = document.getElementById('change')
    changeIt.innerHTML = '';
           timeout = setInterval(function(){window.location.href = "Tracker.html";},5000);
        }
    } else {
        clearTimeout(timeout);
        timeout = null;
    var changeIt = document.getElementById('change')
    changeIt.innerHTML = 'offline';
   }
}, 250); 
```

这会使我的浏览器崩溃，因为我不是`innerHTML`用来打印“离线”而是整个`<div>`. 如果满足条件（在这种情况下，没有互联网连接），我想`<div>`隐藏它，而不是使用, 来简单地取消隐藏。`innetHTML`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-30T17:40:29.940

然后使用 CSS 隐藏和取消隐藏 div。你可以这样做：

```
 changeIt.style.visibility = 'hidden'; 
```

使 div 消失。和

```
 changeIt.style.visibility = 'visible'; 
```

再次展示它。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-30T17:39:04.563

将`display`div 的 CSS 属性设置为`none`.

[https://developer.mozilla.org/en-US/docs/CSS/display](https://developer.mozilla.org/en-US/docs/CSS/display)

使用 Javascript 以编程方式设置它的示例：http: [//jsbin.com/ezanuv/1/edit](http://jsbin.com/ezanuv/1/edit)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-07-23T01:05:15.313

我更喜欢使用 css 显示属性。我有一个我最近写的运行代码。它也非常简单且可扩展。

```
 <HEad>
    <script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
    <script> 
       $(document).ready(function() {
         $.setDisplay = function (id){
           if($("#" + id ).css('display') == 'none'){
             $("#" + id ).css('display', 'block');
           }
           else
           if($("#" + id ).css('display') == 'block'){
             $("#" + id ).css('display', 'none');
           }
         }

         $('*[id^="divheader"]').click(function (){
            $.setDisplay($(this).data("id"));
         });
       });
     </script>
  </HEad>        

<div id='divheader-div1' data-id='div1'>
  This is the header Click to show/unshow
</div>
<div id='div1' style='display: block'>
  <div>
    <label for="startrow">Retail Price:</label>
    <input type="text" name="price" id="price" value=""><small></small>
  </div>
</div>

<div id='divheader-div2' data-id='div2'>
 This is the header Click to show/unshow
</div>
<div id='div2' style='display: none'>
 <div>
   <label for="startrow">Division:</label>
   <input type="text" name="division" id="division" value=""><small> </small>
 </div>
</div> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-30T17:41:26.810

您可以将 display 属性设置为 none 或将 visibility 属性设置为 hidden。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-20T19:20:06.487

最好的方法是将显示设置为无隐藏和阻止可见

//该元素是要隐藏或显示的div

element.style.display = (element.style.display == "block") ？“无”：“阻止”；

# javascript - 在 JavaScript 外部 JS 文件中管理魔术字符串的最佳方法

> ID：14092942
> 
> 赞同：0
> 
> 时间：2012-12-30T17:37:19.650
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-4, views, t4mvc

如果 T4MVC 不能扩展到外部 JavaScript 文件，我想找到管理“魔术字符串”的最佳方法，例如 JQuery .load() 方法中的控制器/动作值。

我想最大程度地降低更改操作以引发应用程序错误的风险。我知道我可以使用 Visual Studio 编译视图以查找客户端错误，但不能在 JS 外部文件中。

我发现了一些解决方案，例如将 View 作为 javascript 文件类型包含在内，这样我就可以使用 T4MVC 并检测 Views 编译错误，但是这种方法会使服务器产生不必要的请求，如果是 JS，它将被缓存在客户端。

我正在考虑一个常量 JS 文件，或者在极限情况下，一个带有 T4MVC 参数方法的常量 View 文件。

有更好的主意吗？

我在这里留下一个样本：

```
<script type="text/javascript">
$(function () {
    $('#Category_Id')
        .cascade(
        {
            url: '@Url.Action(MVC.Ad.ListCategoryTypeByCategory())',
            paramName: '@MVC.Ad.ListCategoryTypeByCategoryParams.categoryId',
            firstOption: '@HeelpResources.DropdownlistCategoryTypeFirstRecord',
            childSelect: $('#CategoryType_Id')
        })
        .cascade(
        {
            url: '@Url.Action(MVC.Ad.ListMakeByCategory())',
            paramName: '@MVC.Ad.ListMakeByCategoryParams.categoryId',
            firstOption: '@HeelpResources.DropdownlistMakeFirstRecord',
            childSelect: $('#Make_Id')
        });

    $('#Make_Id').cascade({
        url: '@Url.Action(MVC.Ad.ListModelByMake())',
        paramName: '@MVC.Ad.ListModelByMakeParams.makeId',
        firstOption: '@HeelpResources.DropdownlistModelFirstRecord',
        childSelect: $('#Model_Id')
    });
});
</script> 
```

如果我想将此代码放在 JS 外部文件中，如何避免“魔术字符串”？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T19:23:53.180

我知道您已经尝试过，但是如果您想使用 T4MVC，我认为从服务器端 .cshtml 文件返回 JS 可能是您最好的选择。请注意，这样做并不意味着它不会被缓存在客户端（如果你得到正确的标题）。事实上，从客户端的角度来看，返回一个纯 JS 文件和返回一个来自 .cshtml 的文件并没有真正的区别。无论哪种方式，它都会让 JS 回来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T22:02:40.500

我觉得你用的方法很好，就是我用的。它们并不是真正的魔法字符串，因为您使用的是基于路由的 Url 生成，而且您永远不必担心 javascript 中的 Url 会过时。

另一种方法可能是使用返回 JsonResult 的控制器操作：

```
 public JsonResult GetConcentrationsMap() {
        var magicStrings = _magicStringsService.GetAll().Select(c => new { Name= c.Name, Url = c.Url });

        return Json(new { urls = magicStrings }, JsonRequestBehavior.AllowGet);
    } 
```

这将被缓存在客户端上，但正如 David Ebbo 所说，您也可以使用 .cshtml 来实现。我认为这更麻烦，因为您仍然必须设法告诉您的 javascript 代码具有魔术字符串的 .js 或 json 资源的路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T08:57:31.057

您可以使用 JavaScriptModel ( [http://jsm.codeplex.com](http://jsm.codeplex.com) )。如果您全局需要这些“魔术字符串”，您应该考虑编写一个过滤器并将它们添加到那里。

下面是一个如何使用 JavaScriptModel 编写过滤器的示例：

[http://jsm.codeplex.com/wikipage?title=Use%20JavaScriptModel%20in%20a%20global%20filter&referringTitle=Documentation](http://jsm.codeplex.com/wikipage?title=Use%20JavaScriptModel%20in%20a%20global%20filter&referringTitle=Documentation)

# javascript - 使 textarea 中的特定文本变为粗体

> ID：14092947
> 
> 赞同：0
> 
> 时间：2012-12-30T17:37:56.380
> 
> 标签：javascript, html

我正在制作一个聊天框，在其中显示聊天历史时，我使用了只读的 textarea .... 我想要的是使起始文本“我：”粗体

```
document.getElementById(messagearea).value = 
document.getElementById(messagearea).value + "\n <b>Me:</b>" + message1; 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T17:49:04.047

无法在 textarea 中格式化部分文本。而是将文本放在`<div>`.

```
<div id="messages" style="white-space: pre-wrap"></div> 
```

使用 jQuery：

```
$('#messages').append("<div><b>Me:</b>" + message1 + "</div>") 
```

# java - 为什么我的 Java 应用程序成功关闭 Windows 资源管理器，但无法再次重新启动它？

> ID：14092950
> 
> 赞同：6
> 
> 时间：2012-12-30T17:38:14.297
> 
> 标签：java, windows-7, windows-explorer, kill-process

在我的 java 应用程序中，我使用

```
Runtime.getRuntime().exec("taskkill /F /IM " + explorer.exe).waitFor(); 
```

关闭 Windows 资源管理器。这部分有效，因为 Explorer 真的停止为我工作。

不幸的是，当我使用

```
Runtime.getRuntime().exec("explorer.exe"); 
```

Windows 资源管理器根本不会重新启动。我应该如何正确重启它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T22:45:05.950

我不知道这对您不起作用的原因，因为您正在从 java 执行外部程序，我认为它没有重新启动不是 Java 的错，也许您重新启动的方式有问题。我会给你一个替代方案：

而不是使用`Runtime.exec()`，尝试 `ProcessBuilder.start()`启动进程并使用`destroy()`类中的方法`Process`来终止进程。它应该可以正常工作，只需使用构建器创建一个代表 explorer 的对象并将其分配给 type 的变量`Process`。

我认为使用 ProcessBuilder 可能会更容易的唯一原因是因为它将参数作为单独的字符串，也许这使得配置脚本更容易。

例子：

```
List<String> params = java.util.Arrays.asList("C:\myProgram.exe", "-arg1", "-arg2");
ProcessBuilder pb = new ProcessBuilder(params);
Process process = pb.start(); 
```

试一试，我认为它应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T10:47:33.463

我认为问题在于您杀死 [explorer.exe] 后，您无法检索新的运行时环境。对我有用的是重用我用来杀死 [explorer.exe] 的运行时环境。我发现这对于能够从 Java(TM) 中编辑某些系统资源很有用。

```
public class KillRestart {
   public static void main (String [] args) {
      Runtime runtime = Runtime.getRuntime ();

      try {
         System.out.println ("Killing Explorer.exe process ... ");
         runtime.exec ("taskkill /F /IM explorer.exe /T").waitFor ();

         // Do something wild like update system resources

         System.out.println ("Resurrecting Explorer ...");
         runtime.exec ("explorer.exe");
      }
      catch (InterruptedException e) {
         e.printStackTrace ();
      }
      catch (IOException e) {
         e.printStackTrace ();
      }
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-04T04:19:52.670

最后，我找到了一种适合我的方法，powershell命令“Stop-Process”帮助我，该命令必须具有“-force”参数。[检查停止进程命令](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.management/stop-process?view=powershell-7)

```
 //java program
   ProcessBuilder pb = new ProcessBuilder("cmd", "/c", "powershell","Stop-Process - 
   ProcessName explorer -Force");
   Process p = pb.start(); 
```

# javascript - 为 getElementById 使用变量

> ID：14092951
> 
> 赞同：1
> 
> 时间：2012-12-30T17:38:23.733
> 
> 标签：javascript

我有一个由 PHP 响应的复选框。因此，复选框的 id 将是动态的。

所以，我想为`document.getElementById()`.

下面是我的PHP代码：

```
echo "<td><input type='checkbox' name='edit$count' value='1' onclick='test($count)'></td>"; 
```

然后这是我的 Javascript 代码

```
function test(v)
    {
        var edit = "edit" + v;

        if(document.getElementById(edit).checked==true){
            alert(edit);
        }
    } 
```

但是，当我单击复选框时，没有警报。

我的代码有问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T17:46:45.350

将 HTML 中的属性替换`document.getElementById`为`document.getElementsByName[]`或更改为s。您没有在 HTML 中使用属性，这就是返回的原因：`name``id``id``getElementById``null`

```
if (document.getElementsByName(edit)[v].checked == true) { ... } 
```

您也不需要`== true`if 语句的布尔上下文来处理它：

```
if (document.getElementsByName(edit)[v].checked) { ... } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T17:50:35.947

答案是因为您`name`设置了输入，然后尝试通过`id`. 更改`name='$count'`为`id='$count'`。对于未来：几乎所有浏览器都提供带有调试器的开发者工具，请随意使用它来调查 JavaScript 问题。

# javascript - 在 SpiderMonkey JS Engine 中调用回调函数

> ID：14092952
> 
> 赞同：0
> 
> 时间：2012-12-30T17:38:26.450
> 
> 标签：javascript, spidermonkey

我正在使用 SpiderMonkey JS Engine 1.8.5 API。

JS 代码如下所示：

```
visitChildren(function() {
                             log("something");
                         }); 
```

VisitChildren 类似于：

```
JSBool visit_children(JSContext* cx, uintN argc, jsval *vp) {

    JSFunction* function;
    if (!JS_ConvertArguments(cx, argc, JS_ARGV(cx, vp), "f", &function))
        return JS_FALSE;

    jsval retVal;
    JS_CallFunction(cx, JS_GetGlobalObject(cx), function, 0, NULL, &retVal);

    return JS_TRUE;
} 
```

我有意简化代码以使问题更清楚。绝对我做错了什么，有人可以建议我为什么调用 *JS_CallFunction* 会导致应用程序崩溃？

**UPD1：**

在这里找到了一些模糊的信息[https://developer.mozilla.org/en-US/docs/SpiderMonkey/JSAPI_Reference/JSFunction](https://developer.mozilla.org/en-US/docs/SpiderMonkey/JSAPI_Reference/JSFunction)但仍然崩溃：

```
jsval functionVal = OBJECT_TO_JSVAL(JS_GetFunctionObject(function));
JS_CallFunctionValue(cx, JS_GetGlobalObject(cx), functionVal, 0, NULL, &retVal); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T18:14:21.040

你想要的是`JS_CallFunctionValue`[[1]](https://developer.mozilla.org/en-US/docs/SpiderMonkey/JSAPI_Reference/JS_CallFunctionValue)。测试类型（您的`JS_ConvertArguments`调用）后，忽略`JSFunction`转换结果并使用实际的 jsval 代替。我还没有找到`JSFunction`s 的用途。

# php - 卷曲页面标题

> ID：14092953
> 
> 赞同：4
> 
> 时间：2012-12-30T17:38:50.500
> 
> 标签：php, html, curl

我正在使用以下代码从指定页面获取**完整的 html ：**

```
$url = "http://www.google.com";
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$result = curl_exec($ch);
curl_close ($ch); 
```

问题：如何修改此代码以**返回`<title>`**页面的而不是完整的 html。$result 存储结果。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-30T17:43:22.837

您可以使用正则表达式获取标题，我发现这个正则表达式非常有用：

```
function get_html_title($html){
    preg_match("/\<title.*\>(.*)\<\/title\>/isU", $html, $matches);
    return $matches[1];
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-30T17:53:14.070

你不能真的只得到标题，你可以得到整个文档，然后剔除你需要的元素：我喜欢使用[Simple Html Dom Parser](http://simplehtmldom.sourceforge.net/manual.htm#section_find)

```
$html = file_get_html('http://www.google.com/');
$title = $html->find('title'); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-30T17:40:39.197

看解析结果的内容

要么使用正则表达式

或 Dom 文档

# java - 如何将 JScrollPane 的滚动条放置在自定义位置？

> ID：14092959
> 
> 赞同：1
> 
> 时间：2012-12-30T17:39:32.573
> 
> 标签：java, swing, scrollbar, jscrollpane, jtextarea

所以我有一个 JTextArea 并且在它旁边我放置了一个相同高度的 JLabel。我想让 JTextArea 可滚动，但是当我这样做时，滚动条会在 JTextArea 和 JLabel 之间移动。这是默认设置，但我想将滚动条放在 JLabel 的右侧，以便它滚动 JTextArea 但对 JLabel 没有任何作用。JLabel 包含小图像，没有别的，我希望该图像位于 JTextArea 和它的滚动条之间。实现这一目标的好方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T22:56:56.827

1）将您的 textArea 添加到设置了 verticalScrollbar.NEVER 和 Horizo​​ntalScrollbar.NEVER 的 scrollPane （textArea 需要设置 wordWrap）

2) 将 scrollPane 添加到 BorderLayout.WEST 的 JPanel(borderLayout)

3) 将标签添加到 BorderLayout.CENTER 的面板

4) 在 BorderLayout.EAST 的面板中添加一个 JScrollBar

5）获取scrollPane的verticalScrollbar并将其模型设置为BorderLayout.EAST的scrollBar的模型

如果框架是可调整大小的，并且您希望 textArea/scrollpane 占用更多/更少的空间，则需要将 (2) 和 (3) (或 (3) 和 (4)) 组合到一个单独的面板中，以便textArea/scrollPane 位于面板的 CENTER 区域

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T18:05:07.610

做一个JPanel，把textarea和图片放在里面，水平放置。然后将面板设置为 JScrollPane 的视口视图。

# delphi - TControl 的约束比例

> ID：14092962
> 
> 赞同：2
> 
> 时间：2012-12-30T17:39:45.667
> 
> 标签：delphi, delphi-7

如何为 TControl（在我的情况下为 TGraphicControl）创建约束**比例？**
所以如果我改变它`Width`-`Height`将改变比例（反之亦然）。
此外，如果我设置`BoundsRect`控件应该保持比例。在我的控制中，我有一个`AspectRatio: TPoint`属性，设置：

```
AspectRatio.X := 4;
AspectRatio.Y := 3; 
```

所以现在我的`AspectRatioFactor = 4/3`. 并且这个比例应该一直保持。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-30T18:11:34.480

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, ExtCtrls, StdCtrls;

type
  TPanel = Class(ExtCtrls.TPanel)
  private
    FAspectRatio: TPoint;
    procedure SetAspectRatio(const Value: TPoint);
  public
    constructor Create(AOwner: TComponent); override;
    procedure SetBounds(ALeft, ATop, AWidth, AHeight: Integer); override;
    property AspectRatio: TPoint read FAspectRatio write SetAspectRatio;
  end;

  TForm1 = class(TForm)
    Panel1: TPanel;
    Button1: TButton;
    Button2: TButton;
    Button3: TButton;
    procedure Button1Click(Sender: TObject);
    procedure Button2Click(Sender: TObject);
    procedure Button3Click(Sender: TObject);
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}
{ TPanel }

constructor TPanel.Create(AOwner: TComponent);
begin
  inherited;
  FAspectRatio.X := 4;
  FAspectRatio.Y := 3;
end;

procedure TPanel.SetAspectRatio(const Value: TPoint);
begin
  FAspectRatio := Value;
  AdjustSize;
end;

procedure TPanel.SetBounds(ALeft, ATop, AWidth, AHeight: Integer);
var
  vh: Double;
begin
  if FAspectRatio.Y <> 0 then
  begin
    vh := FAspectRatio.X / FAspectRatio.Y;
    if Round(AHeight * vh) <> AWidth then
    begin
      if AWidth <> Width then
        AHeight := Round(AWidth / vh)
      else
        AWidth := Round(AHeight * vh);
    end;
  end;
  inherited;
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
  Panel1.Width := 101;
end;

procedure TForm1.Button2Click(Sender: TObject);
begin
  Panel1.Height := 101;
end;

procedure TForm1.Button3Click(Sender: TObject);
var
  p: TPoint;
begin
  p.X := 5;
  p.Y := 3;
  Panel1.AspectRatio := p;
end;

end. 
```

覆盖 Setbounds 将确保保持给定的 AspectRatio。
AspectRatio 的 Setter 中的 AdjustSize 将确保立即应用 AspectRatio 的更改。
按钮事件仅用于演示。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-30T17:55:57.680

覆盖`CanResize`控件中的虚拟方法：

```
function TMyControl.CanResize(var NewWidth, NewHeight: Integer): Boolean;
begin
  NewHeight := MulDiv(NewWidth, AspectRatio.Y, AspectRatio.X); 
  Result := True;
end; 
```

这使得宽度成为主要尺寸。如果您希望高度负责，那么您可以重新安排公式。

你可以试着聪明地选择哪个维度是主。

```
function TMyControl.CanResize(var NewWidth, NewHeight: Integer): Boolean;
begin
  if abs(NewWidth-Width)>abs(NewHeight-Height) then
    NewHeight := MulDiv(NewWidth, AspectRatio.Y, AspectRatio.X)
  else
    NewWidth := MulDiv(NewHeight, AspectRatio.X, AspectRatio.Y);
  Result := True;
end; 
```

您还需要将代码添加到属性的属性设置器中`AspectRatio`。因为对该属性的修改将需要引起控件的重新调整大小。

# knockout.js - 如何将 Knockout.Combobox 与 KnockOut Validation 一起使用？

> ID：14092965
> 
> 赞同：1
> 
> 时间：2012-12-30T17:39:58.787
> 
> 标签：knockout.js, knockout-validation

我正在尝试将 Knockout.Combobox 与 Knockout Validation 库一起使用。

[https://github.com/AndersMalmgren/Knockout.Combobox](https://github.com/AndersMalmgren/Knockout.Combobox)

[http://jsfiddle.net/Zc9Aj/](http://jsfiddle.net/Zc9Aj/)

```
this.errors = ko.validation.group(this);
this.errors.showAllMessages(); 
```

以上不起作用，我假设验证库不了解如何验证组合框绑定，但是如何将这两个库链接在一起？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T19:47:16.120

Knockout Validation 仅支持开箱即用的 Value 绑定，您可以执行以下操作以使其支持组合框

[http://jsfiddle.net/AWHhr/78/](http://jsfiddle.net/AWHhr/78/)

```
ko.bindingHandlers.comboboxValue = { 
    init: ko.bindingHandlers.validationCore.init
}; 
```

# jquery - 显示附加到选项的隐藏 div

> ID：14092969
> 
> 赞同：0
> 
> 时间：2012-12-30T17:40:27.997
> 
> 标签：jquery, forms

我想根据选定的单选按钮显示一个隐藏的 div，例如：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title></title>
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
        $(".option_select").click(function() {
            if ($('#extra_options').is(":hidden")) {
                $('#extra_options').slideDown("slow");
            }      
        });
    }); 
</script>        
</head>

<body>
<div id="extra_options" style="display:none;">
<input type="radio" name="ExtraOption" value="1" /> Extra option 1<br />
<input type="radio" name="ExtraOption" value="2" /> Extra option 2<br />
<input type="radio" name="ExtraOption" value="3" /> Extra option 3<br />
</div>

<form action="#" method="post">
<input type="radio" name="Option" class="option_select" value="1" /> Option 1<br />
<input type="radio" name="Option" class="option_select" value="2" /> Option 2<br />
<input type="radio" name="Option" class="option_select" value="3" /> Option 3<br />
<input type="submit" name="submit" value="Submit" />
</form>
</body>
</html> 
```

但我真的很想将#extra_options div 附加到选定的单选按钮（“选项 1、选项 2、选项 3 等），所以它看起来更像“这些额外选项与此选项一起使用 #”。我想我可以每个单选按钮都有一个#extra_optionsX div，但我认为有更好的方法。有什么想法吗？

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T17:54:25.940

您可以使用附加它

```
if ($('#extra_options').is(":visible")) {
    $('#extra_options').hide();
}
$(this).next().after($('#extra_options'));
$('#extra_options').slideDown("slow"); 
```

（编辑：更改选定选项时添加隐藏/显示）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T18:45:00.283

工作代码在[这里](http://jsfiddle.net/stefanz/L44Hb/)。

```
$(document).ready(function() {
    $('form > input').click(function(){
        var t = $(this),
            extra = $('#extra_options');

        $('input[value=' + t.val() + ']', extra)
            .parent()
            .show()
            .siblings()
            .hide();

    });
});​ 
```

最好用 a 中的文本包装所有输入`<label>`，例如：`<label><input type="radio" name="foo" value="bar" /> Its value here </label>`

# java - 在java中设置环境变量

> ID：14092972
> 
> 赞同：-6
> 
> 时间：2012-12-30T17:40:33.240
> 
> 标签：java, environment-variables

`我正在使用 jdk7 更新 10。

我已经将环境变量设置为“C:\Program Files (x86)\Java\jdk1.7.0_10\jre\lib”

但`java.lang.NoClassFound`错误仍在发生，`javac`也无法正常工作。

为什么我会收到此错误？确切的错误如下----

{ `Exception in thread"main" java.lang.NoclassFoundError:helloworld/java Caused by:java.lang.ClassNotFoundException:helloworld.java at java.net.URLClassLoader$1.run<Unknown Source> at java.security.AccessController.doprivileged<Native Method> at java.net.URLClassLoader.findClass<Unknown Source> at java.lang.ClassLoader.loadClass<Unknown Source> at sun.misc.Launcher$AppClassLoader.loadClass<Unknown Source> at java.lang.ClassLoader.loadclass<Unknown Source> could not find the main class: helloworld.java. program will exit` }

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T17:47:11.760

您需要将**JAVA_HOME 设置**为“C:\Program Files\Java\jdk1.7.0”并将*路径*变量的末尾附加为**“%JAVA_HOME%\bin”**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T17:43:15.987

jre 指的是 java 运行时环境，您不能使用它编译 java 代码。

你的 JAVA_HOME 是`"C:\Program Files (x86)\Java\jdk1.7.0_10\`

你的道路是`C:\Program Files (x86)\Java\jdk1.7.0_10\bin`

# checksum - 解释这个 CRC16 校验和函数

> ID：14092974
> 
> 赞同：1
> 
> 时间：2012-12-30T17:40:40.027
> 
> 标签：checksum, crc16

我有一个用于 255 字节数据的 CRC16 校验和的功能。

校验和从第一个字节到倒数第三个字节计算。您能说出这些代码中发生了什么，特别是“ekmCheckCrc”函数吗？下面是我得到的功能。

```
public void tryMe(byte[] responseFromDevice)
{
            byte[] c = new byte[2];
            c[0] = a[253];
            c[1] = a[254];

            log("EKM CRC : " + Integer.toHexString(ekmCheckCrc(responseFromDevice)) +
            " Device CRC : " + Integer.toHexString((int) (c[0])) + Integer.toHexString((int) (c[1])) );
}

    public int ekmCheckCrc(byte[] dat) {
        int crc = 0xffff;

        for (int i = 1; i < dat.length-3; i++) {
            crc = (crc >>> 8) ^ ekmCrcLut[(crc ^  dat[i]) & 0xff];
        }

       crc = (crc >>> 8) | (crc << 8);
       crc = crc & 0x7f7f;

        return crc;
    }

    static int[] ekmCrcLut = new int[]{
        0x0000, 0xc0c1, 0xc181, 0x0140, 0xc301, 0x03c0, 0x0280, 0xc241,
                       (EKM's LUT sits here, no point including the rest of it)
        0x8201, 0x42c0, 0x4380, 0x8341, 0x4100, 0x81c1, 0x8081, 0x4040
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T17:48:17.377

假设它`a`与 相同`responseFromDevice`，它正在为消息计算某种哈希函数（减去第一个字节和最后三个字节），然后将其打印出来，加上在消息末尾找到的一个数字（校验和）。它跳过的字节是设备的校验和，大概是一些帧字节。一个真正的实现可能会将计算的哈希值与消息中找到的哈希值进行比较，以验证它是否完好无损。

如果您真的想知道散列函数是如何工作的，则必须深入研究该主题，但如果您想了解它们的作用和用途，请阅读[Wikipedia 文章](http://en.wikipedia.org/wiki/Hash_function)。

# html - 允许父 div 被某些孩子拉伸，但不能被其他孩子拉伸

> ID：14092980
> 
> 赞同：2
> 
> 时间：2012-12-30T17:41:34.180
> 
> 标签：html, css, width, stretch, siblings

我正在尝试在导航栏下方创建一列内容，以使内容的宽度与导航栏的宽度完全匹配。事实证明这比我预期的要困难。

鉴于这样的事情：

```
<div id="Wrapper">

    <!-- nav should all be on one line. #Wrapper should stretch to hold it-->   
    <nav> 
        <ul>  
            <li>link 1</li>
            <li>link 2</li>
            <li>etc</li>
        </ul> 
    </nav>

    <!-- article should not stretch #Wrapper, even if it is wider than nav -->
    <article>
        <h1>title</h1>
        <p>This should be constrained to nav's width, 
            even if by all rights it would be wider</p>
    </article>
</div> 
```

我正在尝试实现这样的目标：

```
+-----------------------------+
|    +-------------------+    |
|    |+-----------------+|    |
|    ||link 1 link 2 etc||    |
|    |+-----------------+|    |
|    |+-----------------+|    |
|    ||TITLE            ||    |
|    ||this should be   ||    |
|    ||constrained to   ||    |
|    ||nav's width, even||    |
|    ||if by all rights ||    |
|    ||it would be wider||    |
|    |+-----------------+|    |
|    +-------------------+    |
+-----------------------------+ 
```

我可以在#Wrapper 上设置固定宽度，但是如果字体发生变化或缩放，那么导航栏将与文章的宽度不匹配。

另一方面，我找不到一种方法来允许导航栏拉伸#Wrapper，同时防止文章进一步拉伸。

另一方面，如果有某种方法可以使元素与兄弟的宽度匹配，我可以完全取消#Wrapper。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T19:22:59.240

[固定表格布局：](http://www.w3schools.com/cssref/pr_tab_table-layout.asp)水平布局只取决于表格的宽度和列的宽度，而不是单元格的内容。

这可以防止文章的内容拉伸它，进而防止文章拉伸#Wrapper。

```
article {
    width: 100%;
    display: table;
    table-layout: fixed;
} 
```

例如：http: [//jsfiddle.net/CTF9h/](http://jsfiddle.net/CTF9h/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T06:45:07.903

将文章包裹在另一个 div 中，绝对定位，左右设置为 0px。新的 div 将匹配外部宽度并包含不拉伸的文章。

缺点是，在这种安排之下很难做任何有用的事情。

html:

```
<div id="Wrapper">
    <nav> 
        <ul>  
            <li>link 1</li>
            <li>link 2</li>
            <li>etc</li>
        </ul> 
    </nav>

    <div id="WidthBinder"> <!-- all further content goes in here -->
        <article>
            <h1>title</h1>
            <p>This should be constrained to nav's width, 
                even if by all rights it would be wider</p>
        </article>
    </div>
</div> 
```

CSS：

```
li { display: inline; }

body { text-align: center; }
body * { text-align: left; }

#Wrapper {
  display: inline-block;
  position: relative;
}

#WidthBinder {
  position: absolute;
  left: 0px;
  right: 0px;
} 
```

小提琴：http: [//jsfiddle.net/yU32B/3/](http://jsfiddle.net/yU32B/3/)

# python - Python - 如何从 __init__ 方法中引用类变量或方法？

> ID：14092983
> 
> 赞同：5
> 
> 时间：2012-12-30T17:42:09.593
> 
> 标签：python, class-method

我在 python 模块中有一个对象层次结构，如下所示：

```
class BaseObject(object):
    initialized = False

    def __init__(self):
        self._initialize()

    @classmethod
    def _initialize(cls):
        print "cls.initialized = "+str(cls.initialized)
        if not cls.initialized:
            cls.x = 1
            cls.initialized = True

class ObjectOne(BaseObject):
    @classmethod
    def double_x(cls):
        cls.x = cls.x * 2
        print cls.x

class ObjectTwo(BaseObject):
    @classmethod
    def triple_x(cls):
        cls.x = cls.x * 3
        print cls.x

if __name__ == '__main__':
    obj_1 = ObjectOne()
    obj_1.double_x()
    obj_2 = ObjectTwo()
    obj_2.triple_x() 
```

当我运行这个模块时，我希望输出是：

```
cls.initialized = False
2
cls.initialized = True
6 
```

但我得到的是：

```
cls.initialized = False
2
cls.initialized = False
3 
```

我不明白什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-30T17:44:28.423

您需要使用完整的类名来*设置*类变量。`cls`in`double_x`和`tripple_x`将引用子类（`ObjectOne`和`ObjectTwo`，分别），并且在这些子类上设置属性将存储*新*变量，而不是更改类变量`BaseObject.x`。您*只能通过**直接*访问基类变量来更改它们。

使用您的代码，我们得到：

```
>>> obj_1 = ObjectOne()
cls.initialized = False
>>> obj_1.double_x()
2
>>> obj_2 = ObjectTwo()
cls.initialized = False
>>> obj_2.triple_x()
3
>>> BaseObject.x
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: type object 'BaseObject' has no attribute 'x'
>>> BaseObject.initialized, ObjectOne.initialized, ObjectOne.x, ObjectTwo.initialized, ObjectTwo.x
(False, True, 2, True, 3) 
```

发生的事情是 in `_initialize()`,`cls`被设置为`ObjectOne`or `ObjectTwo`，这取决于您创建的实例，并且每个子类都有*自己*的变量副本`initialized`和`x`.

使用`BaseObject._initialize()`（以确保`BaseObject`已初始化，而不是子类）给出：

```
>>> obj_1 = ObjectOne()
cls.initialized = False
>>> obj_1.double_x()
2
>>> obj_2 = ObjectTwo()
cls.initialized = True
>>> obj_2.triple_x()
3
>>> BaseObject.x, ObjectOne.x, ObjectTwo.x
(1, 2, 3)
>>> BaseObject.initialized
True
>>> 'x' in ObjectOne.__dict__
True
>>> 'initialized' in ObjectOne.__dict__
False
>>> 'initialized' in ObjectTwo.__dict__
False 
```

所以现在`_initialize()`用作`BaseObject`目标来设置和`initialized`初始值`x`，但仍然使用自己的子类来设置*新*值，并且不通过共享该值。`double_x``triple_x`*`x``BaseObject`*

 *您必须在特定基类上设置类变量的唯一选择是在*所有*类方法中直接引用它：

```
class BaseObject(object):
    initialized = False
    def __init__(self):
        BaseObject._initialize()

    @classmethod
    def _initialize(cls):
        print "cls.initialized = "+str(cls.initialized)
        if not cls.initialized:
            cls.x = 1
            cls.initialized = True
class ObjectOne(BaseObject):
    @classmethod
    def double_x(cls):
        BaseObject.x = BaseObject.x * 2
        print cls.x

class ObjectTwo(BaseObject):
    @classmethod
    def triple_x(cls):
        BaseObject.x = BaseObject.x * 3
        print cls.x 
```

这将给出：

```
>>> obj_1 = ObjectOne()
cls.initialized = False
>>> obj_1.double_x()
2
>>> obj_2 = ObjectTwo()
cls.initialized = True
>>> obj_2.triple_x()
6 
```

请注意，我打电话`BaseObject._initialize()`以确保它`cls`不是`BasObject`子类。那么，在*设置* 和方法`x`的时候还是直接引用来保证变量是直接设置在基类上的。上面例子的值在*读取*的时候仍然使用 ，在本地没有设置的时候使用类 MRO 在基类上查找。`double_x``triple_x``BaseObject`*`x``cls``x`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T18:20:29.200

您有两个问题。首先，为了在类中调用类方法，您必须使用该类的**完整**名称：`BaseObject._initialize()` 其次，每次创建 or 的新实例时`ObjectOne`，`ObjectTwo`您都会覆盖`BaseObject.x`其环境中的，所以其他人使用初始化`x`属性而不是更改的属性。要解决此问题，您必须更改两行：

`cls.x = cls.x *`2 至`BaseObject.x = cls.x * 2`

和

`cls.x = cls.x * 3`到`BaseObject.x = cls.x * 3`**

# c# - 将无序列表中的数据与 C# 中的 POCO 一起或与 POCO 一起回发到控制器操作

> ID：14092987
> 
> 赞同：3
> 
> 时间：2012-12-30T17:42:34.663
> 
> 标签：c#, jquery, entity-framework-4, asp.net-mvc-4

我正在使用 FuelUX 创建一个 Pillbox，以便用户可以使用 javascript 添加关键字。Javascript 从文本框中获取数据并将其添加到无序列表中。除了这些关键字之外，我还想添加一些我包装到 POCO 中并希望发布到服务器的字段。现在显然我想将这些关键字与我的 POCO 一起发布，或者也将这些关键字包装到我的 POCO 中，在本例中为 DummyClass。

谁能告诉我该怎么做？

这是我想用关键字和标题实现的视觉表示。 ![在此处输入图像描述](../Images/985b134d204b9a87aee07ec58b6b2185.png)

我的控制器代码：

```
public ActionResult Create()
{
    return View();
}

[HttpPost]
public ActionResult Create(DummyClass obj)
{
   // PROCESS OBJECT & LIST OF DATA OUT OF MY <UL>-control
} 
```

我的查看代码：

```
@using System.Web.Optimization

@model Test.DummyClass

@{
    ViewBag.Title = "Index";
}

@section content
{
    <div class="editor-label">
        @Html.LabelFor(model => model.Title)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Title)
        @Html.ValidationMessageFor(model => model.Title)
    </div>

    <div id="MyPillbox" class="pillbox">
        <ul>
            <li data-value="foo">Item One</li>
            <li class="status-success">Item Two</li>
            <li class="status-warning">Item Three</li>
            <li class="status-important">Item Four</li>
            <li class="status-info">Item Five</li>
            <li class="status-success">Item Six</li>
            <li>Item Seven</li>
        </ul>
    </div>

    <input type="text" id="newTag" value="test"/>
    <input type="button" value="Add" id="btnAddTag"/>    

    <input type="submit"/>
}

@section scripts
{
    @Styles.Render("~/Scripts/fuelUX")

    <script>
        $(function() {

            $('#btnAddTag').click(function () {
                $('#MyPillbox ul').append('<li class="status-info">' + $('#newTag').val() + '</li>');
            });

        });
    </script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T08:44:01.260

如果您可以为每个药丸添加一个隐藏的 HTML 字段，那么您可能会很高兴：

```
 $(function() {
        $('#btnAddTag').click(function () {
            $('#MyPillbox ul').append('<li class="status-info">' + $('#newTag').val() + '<input type="hidden" name="Tags" value="' + $('#newTag').val() + '" /></li>');
        });
    }); 
```

在控制器中，您可以为您的操作方法使用此模型：

```
public class SomeModel {
    public string Title { get; set; }
    public string[] Tags { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T19:03:05.907

您可以在创建药丸的同一按钮上附加一个事件，该按钮也使用 jquery ajax 在您的控制器上调用特定操作，传递对象的 json 表示形式，您可以将其转换为服务器端的 POCO 并在那里使用它。下面的链接可能会提供一些有关发帖的见解。

此外，如果您不想在每个药丸上发布，因为可能尚未创建记录，您可以使用上面提到的事件处理程序将 json 对象添加（或删除）到隐藏字段，该隐藏字段可以通过提交按钮发布jquery 或直接发布到特定路线。

[jQuery post 数组 - ASP.Net MVC 4](https://stackoverflow.com/questions/12572856/jquery-post-array-asp-net-mvc-4)

# facebook - Facebook api: (#4) 达到应用程序请求限制

> ID：14092989
> 
> 赞同：42
> 
> 时间：2012-12-30T17:42:57.940
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph

自 11 月下旬以来，我们正在达到 Facebook API 的应用程序限制。我们正在获取用户的照片，并选择了 25 张朋友的照片 → 这是在用户签名时完成的（我们正在为用户构建相册）。

上述行动是有限的，但直到11月底才被限制。我们正在使用批量调用从相册中获取照片 - 有没有更好的方法来不受限制地获取此信息？

顺便说一句，根据 Facebook，我们每天拨打 100 万次电话，但根据我们的统计，我们每天拨打 18 万次电话。

只获取用户的照片而不获取他朋友的照片不是我们的解决方案。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-08T19:59:10.760

Facebook API 限制并没有真正记录在案，但显然它类似于：[**每 600 秒，每个令牌和每个 IP 600 次调用**](http://www.quora.com/Whats-the-Facebook-Open-Graph-API-rate-limit)。由于网站受到限制，引用相关部分：

> 在与 Facebook 平台团队进行了一些测试和讨论后，我知道或可以在文档中找到没有官方限制。但是，我发现每 600 秒、每个令牌和每个 IP 有 600 个调用是关于它们阻止你的地方。我还看到了一些基于应用程序的速率限制，但没有任何数字。
> 
> 作为一般规则，每秒一个呼叫不应受到速率限制。从表面上看，这似乎非常严格，但请记住，您可以批处理某些调用并使用订阅 API 来获取更改。

因为您可以通过 Javascript SDK 在客户端访问 Graph API；我认为，如果您从客户端请求照片，您将不会遇到任何`application limit`问题，因为获取数据的是用户（每个人都有唯一的 ID），而不是您的应用程序服务器（唯一的 ID）。

如果您所做的一切都通过服务器进行，​​这可能意味着巨大的重构。但如果您有这么多请求，这似乎是最好的解决方案（因为它会让您的服务器喘不过气来）。

否则，您可以尝试[`batch`request](https://developers.facebook.com/docs/reference/api/batch/)，但如果您的流量很大，我想您已经这样做了。

* * *

如果这些都不起作用，根据[Facebook 平台政策](https://developers.facebook.com/policy/#features)，您应该联系他们。

> 如果您超过或计划超过以下任何阈值，请[与我们联系](https://www.facebook.com/help/contact/?id=206103619499608)，因为您可能会受到附加条款的约束：（>5M MAU）或（>100M API 调用/天）或（>50M 印象/天）。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-10-24T14:49:03.570

[Facebook“Graph API Rate Limiting”文档](https://developers.facebook.com/docs/reference/ads-api/api-rate-limiting)说代码错误`#4`是[应用程序级别的速率限制](https://developers.facebook.com/docs/reference/ads-api/api-rate-limiting#applimit)，这与[用户级别的速率限制](https://developers.facebook.com/docs/reference/ads-api/api-rate-limiting#userlimit)不同。虽然它没有给出任何确切的数字，但它将他们的应用级别速率限制描述为：

> 此速率限制在应用程序级别全局应用。广告 api 调用被排除在外。
> 
> *   速率限制在过去一小时的滑动窗口上实时发生。
> *   收集的统计信息包括调用次数和查询次数、花费的 CPU 时间、每个应用程序使用的内存。
> *   每个资源乘以给定应用程序的每月活跃用户数都有一个限制。
> *   当应用程序使用超过其允许的资源时，将引发错误。
> *   错误，代码：4，消息：已达到应用程序请求限制

文档还提供了避免速率限制的建议。对于应用程序级别限制，它们是：

> 建议：
> 
> *   验证错误代码 (4) 以确认节流类型。
> *   不要突然打电话，把电话分散一整天。
> *   智能获取数据（重要数据、非重复数据等）。
>     *   实时洞察，确保 API 调用的结构能够以最少的请求数量读取尽可能多的主页帖子的洞察。
>     *   不要两次获取用户提要（如果两个 App 用户有共同的特定朋友）
>     *   如果好友数量超过 250，则不要连续获取所有用户的好友提要。将获取的时间分开在不同的日期。作为一种选择，首先获取应用用户的新闻提要（我/家庭），以检测哪些朋友对应用用户更重要。然后，首先获取这些朋友的提要。
> *   考虑使用以下参数限制/过滤请求：“since”、“until”、“limit”
> *   [对于页面相关的调用，使用实时更新来订阅数据的变化。](https://developers.facebook.com/docs/reference/api/realtime/)
> *   [字段扩展允许将多个图形查询“加入”到单个调用中。](https://developers.facebook.com/docs/reference/api/field_expansion/)
> *   [用于检查自上次检查以来数据查询是否已更改的 Etags。](https://developers.facebook.com/docs/reference/ads-api/etags-reference/)
> *   对于没有庞大用户群的页面管理开发者，让页面的管理员接受该应用程序以增加用户数。

最后，文档提供了以下信息提示：

> *   批处理调用不会减少api调用的次数。
> *   进行并行调用不会减少 api 调用的次数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-25T22:46:50.290

现在应用程序级速率限制每小时 200 个呼叫！

你可以看看这张图片。[![在此处输入图像描述](../Images/67e1ba3d034c83b57d7258b8153f4728.png)](https://i.stack.imgur.com/1uptV.png)

# spring-mvc - Spring MVC：如何修改从 spring 控制器发送的响应？

> ID：14092997
> 
> 赞同：0
> 
> 时间：2012-12-30T17:44:11.307
> 
> 标签：spring-mvc, servlet-filters

我有一个带有 Spring MVC 3.1.3 的应用程序和使用 Dojo 1.4 开发的 UI。该应用程序很少有控制器可以处理通过`dojo.io.iframe.send`. 控制器发送一个必须被包围的 json 响应

```
<html><body><textarea>{my json response}</textarea></body></html>. 
```

我已经实现了 web.xml 中定义的自定义过滤器：

```
<filter>
    <filter-name>dojoIframeFilter</filter-name>
    <filter-class>com.app.web.MultipartAjaxFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>dojoIframeFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

过滤器的 doFilter 具有这种行为，取自[http://www.oracle.com/technetwork/java/filters-137243.html](http://www.oracle.com/technetwork/java/filters-137243.html)

```
public void doFilter(ServletRequest request, ServletResponse response,
        FilterChain chain) throws IOException, ServletException {

    if (request.getContentType() != null
            && request.getContentType().contains("multipart/form-data")) {
        CharResponseWrapper wrapper = new CharResponseWrapper((HttpServletResponse) response);

        chain.doFilter(request, wrapper);
        log.info(wrapper.toString());
        //Modify response here
    } 
    else {
        chain.doFilter(request, response);
    }
} 
```

包装器的输出为空。我还尝试了许多其他组合，例如为 spring 的调度程序 servlet 放置自定义过滤器，取消 doFilter 中的 if 块，这些都不起作用。我还尝试编写一个同样失败的 Spring 拦截器。有人可以提出任何其他想法吗？

提前致谢。

**更新：**我禁用了 spring 安全性并使用普通的 spring mvc 进行了测试，但问题仍然存在。我修改了标题和问题描述。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T13:23:34.597

朋友们，为了成功修改ServletResponse，我们还需要继承ServletOutputStream。有关详细解决方案，请参阅[http://docstore.mik.ua/orelly/xml/jxslt/ch08_04.htm](http://docstore.mik.ua/orelly/xml/jxslt/ch08_04.htm)。