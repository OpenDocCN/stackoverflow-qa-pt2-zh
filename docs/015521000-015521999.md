# StackOverflow 问答 15521000-15521999

# android - 在android中通过mms意图分享视频

> ID：15521006
> 
> 赞同：1
> 
> 时间：2013-03-20T10:29:32.137
> 
> 标签：android, android-intent

我知道这是一个古老的问题，但我找不到正确的答案。我想通过彩信分享我的视频，但我不断收到此错误消息“无法附加。不支持文件”。

以下是我的 Code First 是我的 Recording 类，第二个是视频播放器：

```
public class VideoComponent extends Activity  {
    private SurfaceHolder surfaceHolder;
    private SurfaceView surfaceView;
    public MediaRecorder mrec = new MediaRecorder();
    private Button startRecording = null;
    private Button stopRecording = null;
    private Button play = null;
    private Button gallery = null;
    int BytesPerElement = 2;

    File video;
    private Camera mCamera;
    File audiofile = null;
    boolean recording=false;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main1);

        startRecording = (Button)findViewById(R.id.buttonstart);
        stopRecording = (Button)findViewById(R.id.share);
        play=(Button)findViewById(R.id.play);
        gallery= (Button)findViewById(R.id.gallery);

        mCamera = Camera.open();
        surfaceView = (SurfaceView) findViewById(R.id.surface_camera);

        surfaceHolder = surfaceView.getHolder();

        surfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
        startRecording.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                try {
                    if(recording==false)
                        startRecording();

                } catch (IOException e) {
                    Log.i("test" , "Video Not starting");

                }

            }
        });
        stopRecording.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {

                    recording=false;
                    stopRecording();

            }
        });
        play.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                Intent i= new Intent(getApplicationContext(),VideoPlayer.class);
                i.putExtra("URI", audiofile.getAbsolutePath());
                startActivity(i);
            }
        });

        gallery.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                Intent i= new Intent(getApplicationContext(),Gallery.class);
                startActivity(i);
            }
        });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu)
    {
          Log.i("Test" , "Menu thing");
        menu.add(0, 0, 0, "StartRecording");
        menu.add(0, 1, 0, "StopRecording");
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item)
    {
        switch (item.getItemId())
        {
        case 0:
            try {
                  Log.i("Test" , "Start Recording");
                startRecording();
            } catch (Exception e) {
                String message = e.getMessage();
                Log.i("Self", "Problem Start"+message);
                mrec.release();
            }
            break;

        case 1: //GoToAllNotes
            mrec.stop();
            mrec.release();
            mrec = null;
            break;

        default:
            break;
        }
        return super.onOptionsItemSelected(item);
    }

    public void startRecording() throws IOException 
    {
        recording=true;
        String path= Environment.getExternalStorageDirectory().toString();
        File sampleDir = new File(path+"/DCIM/Camera");
        sampleDir.mkdir();

         Log.i("Setting Path", sampleDir.toString());

            try {
              audiofile = File.createTempFile("Video", ".3gp", sampleDir);
            } catch (IOException e) {

              return;}
            int minBufferSize = AudioRecord.getMinBufferSize(8000, 
                 AudioFormat .CHANNEL_IN_MONO, 
                 AudioFormat.ENCODING_PCM_16BIT);
        mrec = new MediaRecorder();  // Works well

        mCamera.unlock();
        mrec.setCamera(mCamera);

        mrec.setPreviewDisplay(surfaceHolder.getSurface());
        mrec.setVideoSource(MediaRecorder.VideoSource.CAMERA);
        mrec.setAudioSource(MediaRecorder.AudioSource.MIC);
        mrec.setMaxDuration(60000);
        mrec.setAudioSamplingRate(16000);
        mrec.setProfile(CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH));
        mrec.setPreviewDisplay( surfaceHolder.getSurface());
        mrec.setOutputFile(audiofile.getAbsolutePath()); 
        mrec.prepare();
        mrec.start();

    }

    protected void stopRecording() {
        mrec.stop();
        mrec.release();
        mCamera.lock();
        mCamera.release();
        Log.i("testing","going to call Destroyer");
        //surfaceDestroyed(surfaceHolder);

        //mCamera.stopPreview();

         //finish();
    }

   private void releaseMediaRecorder(){
       Log.i("testing","re;ease Media record"); 
       if (mrec != null) {
            mrec.reset();   // clear recorder configuration
            mrec.release(); // release the recorder object
            mrec = null;
            mCamera.lock();           // lock camera for later use
        }
    }

    private void releaseCamera(){
           Log.i("testing","re;ease Camera");
        if (mCamera != null){
            mCamera.release();        // release the camera for other applications
            mCamera = null;
        }
    }
} 
```

这是我的视频播放器类

```
public class VideoPlayer extends Activity {
VideoView videoView;
Button mms=null;
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

    //Create a VideoView widget in the layout file
    //use setContentView method to set content of the activity to the layout file which contains videoView
    this.setContentView(R.layout.video);
    final Intent i= getIntent();
    final String uri=i.getStringExtra("URI");
    Log.i("URI","Path is"+Uri.parse(uri));

    mms=(Button)findViewById(R.id.mms);

    videoView = (VideoView)this.findViewById(R.id.videoView1);

    //add controls to a MediaPlayer like play, pause.
    MediaController mc = new MediaController(this);
    videoView.setMediaController(mc);

    //Set the path of Video or URI
    videoView.setVideoURI(Uri.parse(uri));

  //Set the focus
    videoView.requestFocus();
    videoView.start();

    mms.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            Intent i = new Intent(Intent.ACTION_SEND);
             i.setClassName("com.android.mms", "com.android.mms.ui.ComposeMessageActivity");
            i.putExtra(Intent.EXTRA_STREAM,Uri.parse(uri));
            i.setType("video/*");
            startActivity(i);
        }
    });
}
} 
```

清单文件

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.videoplayer"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="10"
    android:targetSdkVersion="17" />

 <uses-permission android:name="android.permission.RECORD_AUDIO" />
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-feature android:name="android.hardware.camera.autofocus" />
<uses-feature android:name="android.hardware.camera" />
<application android:icon="@drawable/icon"
     android:label="@string/app_name"
      android:debuggable="true">
    <activity android:name=".VideoComponent"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
     <activity android:name=".VideoPlayer"
              android:label="@string/app_name">
        <intent-filter>
           <action android:name="android.intent.action.SEND" />
     <category android:name="android.intent.category.DEFAULT" />
     <data android:mimeType="*/*"  />
        </intent-filter>
    </activity>
    <activity android:name=".VideoRecorder"
              android:label="@string/app_name">

    </activity>
    <activity android:name=".Gallery"
              android:label="@string/app_name">
    </activity>
</application>
</manifest> 
```

编辑：文件格式为 .3gp。路径没有问题，因为它适用于电子邮件。编辑＃2：附上完整的代码请检查正确传递视频的uri是否存在问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:54:01.793

尝试如下意图

```
 ArrayList<Uri> imageUris = new ArrayList<Uri>();
            for (int i = 0; i < checkeditem.size(); i++) {
                File file = new File(RecordService.DEFAULT_STORAGE_LOCATION,checkeditem.get(i).toString());
                Log.i("Share Media ","Sending is file is " + file.toString());
                imageUris.add(Uri.fromFile(file));
            }
            // (3) to share multiple file in URi use below code here
            Intent shareIntent = new Intent();
            shareIntent.setAction(Intent.ACTION_SEND_MULTIPLE);
            shareIntent.putParcelableArrayListExtra(Intent.EXTRA_STREAM,imageUris);
            shareIntent.setType("*/*");
            startActivity(Intent.createChooser(shareIntent, "Share with")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:28:52.227

试试这个代码：

```
 Intent i = new Intent(Intent.ACTION_SEND);
               i.setClassName("com.android.mms", "com.android.mms.ui.ComposeMessageActivity");
               i.putExtra("Hi ", "Please find attachment"); 
               i.putExtra(Intent.EXTRA_STREAM,uri);
               i.setType("video/*");
              startActivity(Intent.createChooser(i, "Share via")); 
```

让我知道你的状态。

# git - 如何在 Windows 服务器中使用 git 设置 CruiseControl.net

> ID：15521013
> 
> 赞同：2
> 
> 时间：2013-03-20T10:30:04.367
> 
> 标签：git, cruisecontrol.net, openssh, windows-server, ccnet-config

谁能帮我用 git 存储库设置 Cruisecontrol.net。

这就是我在 Cruisecontrol 配置文件中包含的内容

```
<project name="MyFirstProject"
           description="demoproject showing a small config">
<sourcecontrol type="git">
  <repository>git@test.unfuddle.com:test/testplayground.git</repository>
  <branch>master</branch>
  <autoGetSource>true</autoGetSource>

  <executable>C:\Program Files (x86)\Git\cmd\git.exe</executable>
  <tagOnSuccess>false</tagOnSuccess>

  <tagCommitMessage>CCNet Build {0}</tagCommitMessage>
 <committerName>CCNET</committerName>
  <committerEMail>tranjan@gmail.com</committerEMail>
  <tagNameFormat>CCNet-Build-{0}</tagNameFormat>

  <workingDirectory>c:\TestCCNET\</workingDirectory>
  <timeout>600000</timeout>
</sourcecontrol> 
```

![在此处输入图像描述](../Images/960cd180c76a3b5be6d5be60be8d7c77.png)

但是当我运行 ccnet 控制台时它失败了。

我使用了 openSSH 密钥（私有和公共）。

我认为身份验证有问题。

当我使用 git bash 克隆存储库时，它正在工作。但是CCNET失败了

我花了超过 2 天的时间来设置我的构建服务器。仍然无法正确处理。

我需要一些帮助/指导。

是否有描述正确步骤的适当文章或博客？

我在互联网上搜索并尝试了很多东西。没有工作:(

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:08:06.800

您可以在我们的[Git Wiki 页面](http://www.cruisecontrolnet.org/projects/ccnet/wiki/Git)的“注释”部分找到所有信息。

1.  使用 git.cmd 而不是 git.exe
2.  CCNet 作为服务运行，对吧？以运行服务的用户身份登录并测试身份验证是否有效，如果没有设置。（最佳实践是创建一个运行 ccnet 服务的用户）
3.  请在调试/跟踪模式下粘贴此集成运行的完整日志，3-liner 没有帮助。

# vb.net - 获取 WeekdayName + 1

> ID：15521016
> 
> 赞同：1
> 
> 时间：2013-03-20T10:30:13.933
> 
> 标签：vb.net, date

我相信这很容易，但我正经历着这样的一天。我有代码`Now.Date.AddDays(+1)`可以让我知道明天的日期，但我需要明天的工作日名称。现在谷歌搜索了一段时间，似乎无法找到它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T10:32:59.097

Use [`DateTimeFormatInfo.GetDayName`](http://msdn.microsoft.com/en-us/library/system.globalization.datetimeformatinfo.getdayname%28v=vs.110%29.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1)

```
Dim tomorrow = Now.Date.AddDays(1)
Dim weekDayName = CultureInfo.CurrentCulture.DateTimeFormat.GetDayName(tomorrow.DayOfWeek) 
```

You can also use standard datetime format strings:

```
weekDayName = tomorrow.ToString("dddd") ' long '
weekDayName = tomorrow.ToString("ddd") ' abbreviated' 
```

[**Standard Date and Time Format Strings: The Long Date ("D") Format Specifier**](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx#LongDate)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:40:21.857

简单地：

```
Dim sDayName As String = Date.Today.AddDays(1).ToString("dddd") 
```

[你可以在这里](http://www.geekzilla.co.uk/View00FF7904-B510-468C-A2C8-F859AA20581F.htm)查看可用的模式。

# android - Achartengine：反向图

> ID：15521017
> 
> 赞同：2
> 
> 时间：2013-03-20T10:30:15.523
> 
> 标签：android, achartengine

我在我的 Android 应用程序中使用 achartengine，它运行良好，但我有一个问题。

是否可以反转情节？

我的意思是在我的图表中，使用函数 add 添加到我的 XY 系列的新值被添加到系列的末尾，然后重新绘制图表，因此新值出现在图表的右侧。

但我想在索引 0 处添加我的新值，以便在图表上仅显示最后的 X 值。

![在此处输入图像描述](../Images/fd607486e84348e7a41f95d2ee53374b.png)

抱歉，如果不是很清楚

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:13:35.233

不支持`XYSeries`在给定索引处插入数据。但是，您可以通过清除当前数据并将其添加回来（包括新值）来实现此行为。我知道这不是一个非常理想的方式，但它可以帮助您获得所需的行为。

**编辑**：我`add(index, x, y)`在`XYSeries`. [您可以在此处](https://repository-achartengine.forge.cloudbees.com/snapshot/org/achartengine/achartengine/1.1.0/)下载包含此功能的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T07:48:44.520

所以，我发现了一个窍门：

数据集是我的 XYseries 和 mRenderer 我的 multipleSeriesRenderer

*   我改变了 Y 轴的对齐方式：

> mRenderer.setYAxisAlign(Align.RIGHT, 0);

*   我已经删除了自动标签：

> mRenderer.setXLabels(0);

*   斧头 X 上的 0 现在是自定义标签，因此每次向图形添加新值时，我必须更改位置：

> mRenderer.setXAxisMax(dataset.getItemCount() - 1); mRenderer.addXTextLabel(dataset.getItemCount() - 1, "0");

*   最后，每次添加新值时，我都会更改 X 轴最小值，以获得固定比例：

> mRenderer.setXAxisMin(dataset.getItemCount() - scale - 1);

![在此处输入图像描述](../Images/689c5f8f01f91ab29e4841afef29f8ff.png)

# php - PEAR DB 使用 SQLite 给出未知错误

> ID：15521019
> 
> 赞同：0
> 
> 时间：2013-03-20T10:30:21.613
> 
> 标签：php, sqlite, pear

我是 PEAR DB 和 SQLite 的新手。

我正在做[http://www.codewalkers.com/c/a/Database-Articles/PEARSQLite-The-Lightweight-Alternative/4/上给出的示例代码](http://www.codewalkers.com/c/a/Database-Articles/PEARSQLite-The-Lightweight-Alternative/4/)

这是我的代码

```
<?php

require_once('DB.php');
require_once "DB/sqlite.php";

$dsn = "sqlite:////./mydb.db";
$db = new DB_sqlite();
$connection = $db->connect($dsn);

if ($db->isError($connection)){
    die("Could not connect to the database: <br />".$db->errorMessage($connection));
}
else
echo "Connected ";
$query = "SELECT * FROM books NATURAL JOIN authors";
$result = $db->simpleQuery($query);

if ($db->isError($result)){
    die("Could not query the database:<br />$query ".$db->errorMessage($result));
}

echo('<table border="1">');
echo '<tr><th>Title</th><th>Author</th><th>Pages</th></tr>';

while ($result_row = $result->fetchRow()) {
    echo "<tr><td>";
    echo $result_row[1] . '</td><td>';
    echo $result_row[4] . '</td><td>';
    echo $result_row[2] . '</td></tr>';
}

echo("</table>");
$connection->disconnect();

?> 
```

在执行此操作时，我遇到了以下错误...

```
Connected 
Strict Standards: Non-static method DB::isManip() should not be called statically, assuming $this from incompatible context in C:\xampp\php\PEAR\DB\common.php on line 2200

Strict Standards: Non-static method DB::errorMessage() should not be called statically, assuming $this from incompatible context in C:\xampp\php\PEAR\DB.php on line 965

Strict Standards: Non-static method DB::isError() should not be called statically, assuming $this from incompatible context in C:\xampp\php\PEAR\DB.php on line 688

Strict Standards: Non-static method DB::errorMessage() should not be called statically, assuming $this from incompatible context in C:\xampp\php\PEAR\DB\common.php on line 1963

Warning: Illegal offset type in C:\xampp\php\PEAR\DB\common.php on line 1963

Strict Standards: Non-static method DB::isError() should not be called statically, assuming $this from incompatible context in C:\xampp\php\PEAR\DB.php on line 688
Could not query the database:
SELECT * FROM books NATURAL JOIN authors unknown error 
```

您能否帮助确定此示例的问题所在。
谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-21T15:27:06.837

使用[MDB2](http://pear.php.net/package/MDB2)或[PDO](http://php.net/pdo)。DB 的支持在很久以前就结束了。

# c# - WIX：如果安装程序被取消，重新启动服务？

> ID：15521023
> 
> 赞同：2
> 
> 时间：2013-03-20T10:30:29.307
> 
> 标签：c#, installation, wix, windows-installer, install-sequence

如果设置 MSI 被用户取消，是否可以重新启动服务？

MSI 必须重新启动服务有两种情况。

1.  停止并更新旧服务文件，然后启动服务。如果服务无法启动，请更换旧文件并重新启动服务。[这部分是通过回滚完成的]
2.  如果在设置过程中故意**取消**MSI，请重新启动服务。

我有一个解决方案，我可以调用`CustomAction`取消并使用 CMD.EXE 重新启动服务，但我不喜欢它。请建议任何其他解决方案，例如使用`RestartResource`或`ResourceManager`

代码：

```
<InstallExecuteSequence >
    <RemoveExistingProducts
      After="InstallInitialize"/>
    <Custom Action="RenameFileOnCancel" OnExit="cancel">1</Custom>
  </InstallExecuteSequence>

 <CustomAction
        Id='RestartService'
        Directory='TARGETDIR'
        ExeCommand='[SystemFolder]cmd.exe net stop AppServerSvc &amp;&amp; net start AppServerSvc'
        Return='asyncWait'
        Execute='deferred'
    /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T13:58:11.090

如果您在事务期间安排升级 MSI，例如使用：

*   `MajorUpgrade/@Schedule='afterInstallInitialize'`或者
*   `MajorUpgrade/@Schedule='afterInstallExecute'`或者
*   `MajorUpgrade/@Schedule='afterInstallExecuteAgain'`

**并**使用该`ServiceControl`元素启动/停止/重新启动服务，然后 Windows Installer 将为您完成所有工作。

这是*迄今为止*最推荐的实现目标的方法。

# java - 从 WSDL for Android 生成 Web 服务客户端存根

> ID：15521024
> 
> 赞同：1
> 
> 时间：2013-03-20T10:30:29.710
> 
> 标签：java, android, eclipse, web-services, wsdl

我想从一个 WSDL url 生成一个客户端存根，我已经在 Eclipse 中为 Java 项目完成了它，但我似乎无法为我的 Android 项目这样做。有什么办法可以做到这一点，还是我必须以某种方式使用 SOAP？

# jquery - 如何在表单提交之间在 Struts1/jQuery 应用程序中显示“请等待加载..”动画 Gif？

> ID：15521026
> 
> 赞同：1
> 
> 时间：2013-03-20T10:30:31.903
> 
> 标签：jquery, struts-1

我有一个 Java Struts1 应用程序，我需要在表单提交之间有一个“请稍候”动画。

我尝试在 Struts 中使用这个 -> [StrutsPleaseWait](http://wiki.apache.org/struts/StrutsPleaseWait)但如果您使用动画 GIF，则 gif 在重定向后会冻结。

所以然后我尝试用 jQuery [jQuery Form Plugin](http://malsup.com/jquery/form/#getting-started)来做，但我无法让它与 IE(7) 一起工作，它在 ajax 新页面创建后无法识别 jquery。

有很多网站都有这个功能，那么最好的方法是什么？

这也让我想到，是否有任何 java MVC 框架内置了与动画一起使用的功能？

我的 jQuery 解决方案的代码摘录如下：

```
<script type="text/javascript" src="../../../js/jquery.form.js"></script>
<script> 
$(document).ready(function() {
        var options = { 
                cache: false,
                type : "POST",                  
                beforeSubmit: function(arr, $form, options) {                        
                    showLightbox("pwait");                                  
                    },          
                success: function(responseText, statusText, xhr, $form) {  
                    //$("html").html(responseText); //DOES NOT WORK PROPERLY IN FFox, changes the font sizes!

                                    //DOES NOT WORK IN IE, jquery not recognised on new page thats created.
                    document.open();
                    document.write(responseText);
                    document.close();  
                    hideLightbox("pwait");
            }                   
        };  
        $('#myForm').ajaxForm(options);
    }); 
</script> 
```

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T15:30:33.783

利用

> 发送前

代替

> 提交前

像这样

> `beforeSend: function (arr, $form, options) { showLightbox("pwait");
> },`

# javascript - 在 JSF 渲染后重新加载 Anythingslider

> ID：15521029
> 
> 赞同：0
> 
> 时间：2013-03-20T10:30:42.987
> 
> 标签：javascript, jsf, reload, anythingslider

在渲染列表中的 div 之后，我试图让我的 Anythingslider 重新加载。

```
 <h:selectOneMenu id="dropdownDevice"
        value="#{skinningBean.currentDevice}" converter="SkinConverter">
        <f:selectItems value="#{skinningBean.myDevicesSI}" var="c"
            itemValue="#{c}" />
        <a4j:ajax event="change" render="preview" oncomplete="reloadSlider()" />

    </h:selectOneMenu> 
```

注意：预览 div 在slider1 列表周围

```
<script type="text/javascript">  
function reloadSlider() {  
    var $jq = jQuery.noConflict();
    $jq(function($){
      $jq('#slider1').anythingSlider();
    }); 
}  
</script> 
```

但我一直收到这个错误（我尝试了不止这个解决方案）：

```
Error: TypeError: $jq(...).anythingSlider is not a function 
```

在此之后，仅显示简单的列表元素。有什么想法可以实现重新加载滑块吗？

编辑：我不希望重新加载整个页面，因为下拉菜单不是我渲染的唯一组件

这就是我初始化anyslider的方式：

```
<script src="../js/jquery.anythingslider.js"></script>
<link rel="stylesheet" href="../css/anythingslider.css" />

<script type="text/javascript">
var $jq = jQuery.noConflict();
$jq(function($){
  $jq('#slider1').anythingSlider();
}); 
</script> 
```

我只是复制了它并用一个函数包装了它，所以我可以再次调用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:50:23.093

看来问题是`noConflict()`在函数内部多次调用该模式，将其移到外部：

```
<script type="text/javascript">  
var $jq = jQuery.noConflict();
function reloadSlider() {  
    $jq(function($){
      $jq('#slider1').anythingSlider();
    }); 
}  
</script> 
```

# joomla - 从谷歌索引中删除 joomla 类别

> ID：15521030
> 
> 赞同：0
> 
> 时间：2013-03-20T10:30:46.123
> 
> 标签：joomla, indexing

在我的网站中，谷歌似乎对类别进行了索引，尽管我从未专门链接到一个类别——这怎么可能让我阻止它？

此链接从未由我创建：[http](http://www.website.com/50-categoryname) ://www.website.com/50-categoryname ，我希望它永远从谷歌消失。

谢谢，

垫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T11:22:59.263

您应该对搜索引擎隐藏这些链接。您可以在 robots.txt 文件中执行此操作，如下所示：

```
Disallow: /50-categoryname 
```

还可以看看 Joomla 的重定向管理器——它可能会帮助您将不正确的链接重定向到所需的页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T11:37:48.587

即使您认为您从未链接过最有可能拥有的类别，例如通过将类别名称显示在列表或模块的一部分中。转到所有内容类型的配置，并确保关闭显示/链接类别和父类别并检查所有模块。还要确保您没有任何类别链接，并且您没有使用自动生成这些链接的站点地图（链接到所有顶级类别并让地图通过所有子类别构建是最快的生成方式网站地图）。

# javascript - sammy.js 获取处理程序隐藏错误

> ID：15521032
> 
> 赞同：0
> 
> 时间：2013-03-20T10:30:48.873
> 
> 标签：javascript, error-handling, sammy.js

在使用**0.7.4**版本 （也是**0.7.1**）的 sammy.js 库时，发现如果在处理函数执行期间发生某些错误，**则不会将**任何内容打印到控制台。**`get`**

 **例如，在以下代码片段中，尽管不`notExistingFunction`存在具有名称的函数，但不会将任何内容打印到控制台：

```
<html>
    <head>
        ...
        <script src="/path/to/jquery-1.5.2.min.js"></script>
        <script src="/path/to/sammy-0.7.4.min.js"></script>
        ...
    </head>
    <body>
        <script>
            $(document).ready(function() {
                var sammy = Sammy(function() {
                    this.get('#someAnchor', function() {
                        // this function doesn't exist
                        notExistingFunction();
                    });
                });
                sammy.run();

                // this should lead to execution of above handler
                window.location.hash = '#someAnchor'; 
            });
        </script>
        ...
    </body>
</html> 
```

这确实使页面的故障排除变得复杂，有人也遇到过这种情况吗？这是预期的行为还是错误？有什么解决方法吗？

非常感谢提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:54:06.963

结果比我想象的要容易——在检查了**sammy.js**的来源后，发现默认情况下`raise_errors`设置了 somewhy 标志来`false`管理错误报告。

因此，将上面的代码修改为：

```
<html>
    <head>...</head>
    <body>
        <script>
            ...
            sammy.raise_errors = true;
            sammy.run();
            ...
        </script>
    </body>
</html> 
```

开始显示不错的错误。**

# r - 将 dist 对象列表保存到 R 中的表

> ID：15521037
> 
> 赞同：5
> 
> 时间：2013-03-20T10:30:59.310
> 
> 标签：r, matrix, export, distance

我需要创建一个包含多个距离矩阵的文件，这些距离矩阵用空行分隔。输出应如下所示：

```
# First matrix
0.05194497                                                       
0.04652118 0.12935323                                            
0.04269506 0.09953116 0.08464824                                 
         NA         NA         NA         NA                      
0.02884847 0.07769535 0.05385956 0.04588298         NA           
0.03821721 0.12084543 0.13431270 0.06928795         NA 0.05123967
# Empty line

# Second matrix
0.05194497                                                       
0.04652118 0.12935323                                            
0.04269506 0.09953116 0.08464824                                 
        NA         NA         NA         NA                      
0.02884847 0.07769535 0.05385956 0.04588298         NA           
0.03821721 0.12084543 0.13431270 0.06928795         NA 0.05123967 
```

我在 R 的列表中有 100 个距离矩阵，我需要将它们导出到 txt 文件，如上例所示。任何人都知道如何做到这一点？我需要一个文件而不是多个 txt 文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T11:11:16.477

`sink`这是使用、`lapply`和的一个选项`dput`。为了`write.table`在`dist`对象上使用，它需要是一个矩阵，所以在这一步中，我们将它转​​换为一个矩阵，然后在写入输出之前`lapply`手动设置对角线和上三角形。`NA`

以下是一些示例数据：

```
set.seed(1)
x <- matrix(rnorm(100), nrow = 5)
y <- matrix(rnorm(100), nrow = 5)
myList <- list(A = dist(x),
               B = dist(y))
myList
# $A
#          1        2        3        4
# 2 5.701817                           
# 3 6.013119 5.032069                  
# 4 7.276905 5.325473 5.811861         
# 5 6.619295 5.306750 4.945987 6.612081
# 
# $B
#          1        2        3        4
# 2 7.469565                           
# 3 5.717330 6.407709                  
# 4 5.371346 6.106838 5.057519         
# 5 6.029762 6.256703 4.685266 5.452838 
```

以下是如何将输出写入中间有一些空行的文件。在每个矩阵打印后还有一条线`NULL`可以很容易地删除。

```
sink("myDistList.txt", type="output")
invisible(
  lapply(myList, function(x) { 
    y <- as.matrix(x)
    y[upper.tri(y)] <- NA
    diag(y) <- NA
    dput(write.table(y, row.names = FALSE,
                     col.names = FALSE, na = ""))
  cat("\n\n")
  }))
sink() 
```

打开“myDistList.txt”应该会给你一些看起来像这样的东西：

```
5.70181650842794    
6.01311946994002 5.03206860827638   
7.27690516432265 5.32547302778382 5.8118611864786  
6.61929500038789 5.3067497799772 4.94598733972826 6.61208111472781 
NULL

7.46956498920544    
5.7173301814994 6.40770896281359   
5.37134559156135 6.10683846835378 5.05751911328028  
6.02976206855185 6.25670324709768 4.68526645722475 5.45283785882534 
NULL 
```

* * *

当然，`capture.output(myList, file = "myDistList.txt")`这也会让您*非常*接近您想要的输出——但这就像您打印`myList`到屏幕上一样（也就是说，它将包括行名和列名）。不过，如果您决定走那条路，一些巧妙的正则表达式工作应该能够轻松删除多余的行。

例如，使用“ [geany](http://www.geany.org/) ”作为输出的文本编辑器`capture.output`，我能够使用以下搜索和替换选项清理文本文件（当然选择了“使用正则表达式”）：

1.  搜索`^\s+.*|^\$.*`并替换为单个空格
2.  搜索`^[0-9]+\s(.*)`并替换为`\1`

在某种程度上，我更喜欢这种方法，而不是必须返回并将距离矩阵转换为矩阵等等。

# php - 我们如何在循环中使用滑块

> ID：15521039
> 
> 赞同：0
> 
> 时间：2013-03-20T10:31:04.577
> 
> 标签：php, wordpress, wordpress-theming

我需要一个在循环内工作的滑块，因为我正在使用下面的代码

```
while ( have_posts() ) : the_post(); ?>
<div id="content">

<?php 

$attachments = get_children( array(
    'post_parent' => $post->ID,
    'post_type' => 'attachment',
    'order' => '',
    'post_mime_type' => 'image')
    );  
echo "aaaaa".count($attachments);   
?>

<?php if(count($attachments)!=0){ ?>
<div id="portfolio-gallery">
    <ul id="slideshow_detail">
        <?php 
         foreach ( $attachments as $att_id => $attachment ) {
        $getimage = wp_get_attachment_image_src($att_id, 'room-gallery', true);
        $roomimage = $getimage[0];
        echo '<li>
        <h3></h3>
        <span>'.$roomimage.'</span>
        <p></p>
        <img src="'.$roomimage.'" alt="" class="thumb-slide" />
        </li>';
         }
        ?>
    </ul>

    <div id="wrapper1">
        <div id="fullsize">
            <div id="imgprev" class="imgnav" title="Previous Image"></div>
            <div id="imglink"></div>
            <div id="imgnext" class="imgnav" title="Next Image"></div>
            <div id="image"></div>
            <div id="information">
                <h3></h3>
                <p></p>
            </div>
        </div>
        <div id="thumbnails">
            <div id="slideleft" title="Slide Left"></div>
            <div id="slidearea">
                <div id="slider-room"></div>
            </div>
            <div id="slideright" title="Slide Right"></div>
        </div>
    </div>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script> 
<script type="text/javascript">
<!-- 

    $('slideshow_detail').style.display='none';
    $('wrapper1').style.display='block';
    var slideshow_detail=new TINY.slideshow_detail("slideshow_detail");
    window.onload=function(){

        slideshow_detail.auto=true;
        slideshow_detail.speed=5;
        slideshow_detail.link="linkhover";
        slideshow_detail.info="information";
        slideshow_detail.thumbs="slider-room";
        slideshow_detail.left="slideleft";
        slideshow_detail.right="slideright";
        slideshow_detail.scrollSpeed=4;
        slideshow_detail.spacing=25;
        slideshow_detail.active="#fff";
        slideshow_detail.init("slideshow_detail","image","imgprev","imgnext","imglink");
    }
//-->  
</script>
</div>
<?php endwhile;?> 
```

通过使用此代码滑块只能工作一次；我需要一个在循环下工作的滑块。即我必须添加多个帖子，每个帖子都有多个图像。我必须显示每个帖子的详细信息并使用滑块显示每个帖子的图像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:51:05.450

我觉得从顶部开始的**while 循环可能是问题所在。**为什么不使用 if 语句。我不熟悉您的“while”语法。我只见过以下内容：

```
<?php while( someCondition() ): ?>

    //statements in here

<?php endwhile; ?> 
```

或者也许尝试使用 if 语句：

```
<?php if ( have_posts() ): ?>
    //all slider code here
<?php } else { ?>
   //give a 'there are no posts' message
<?php endif; ?> 
```

你还运行什么wordpress插件？在不知道这一点的情况下，解决这个问题有点困难。

# blackberry-10 - BlackBerry 10 Native SDK - Writing Text Files

> ID：15521042
> 
> 赞同：1
> 
> 时间：2013-03-20T10:31:14.973
> 
> 标签：blackberry-10, blackberry-cascades

I am battling to write some data to a simple text file
Here is my code:

```
QFile file(app->applicationDirPath() + "/data/testfile.txt");

if (file.open(QIODevice::WriteOnly)) {
    QTextStream stream(&file);
    stream << "DATA HERE \n";
} 
```

The app compiles and runs fine.

Just I cant find the file, or more likely: it is not being created

Where am I going wrong? :)

Thanks

*Extra Info:*
**Run:** on my device (BlackBerry Z10)
**IDE:** QNX IDE (Native SDK) / (Cascades)
**Example code is located in:** TestApp::TestApp(bb::cascades::Application *app) : QObject(app)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T11:28:02.360

好的，我自己偶然发现了答案：

```
QFile file(QDir::currentPath() + "/shared/documents/yourfile.txt");

if (file.open(QIODevice::WriteOnly)) {
    QTextStream stream(&file);
    stream << "DATA HERE \n";
} 
```

原来每个应用程序都可以访问自己的工作目录。所以正在创建文件，我只是在设备上看不到它：

制作路径：“/shared/documents/”将文件放在我可以在文件管理器中看到的地方

（希望这对以后遇到类似问题的人有所帮助）

[这是一个有用的链接](https://developer.blackberry.com/native/documentation/bb10/com.qnx.doc.native_sdk.devguide/com.qnx.doc.native_sdk.devguide/topic/accessible_folders.html)，它解释了目录和当前路径。

# android - How read and display available space in android both sd card and internal memory?

> ID：15521050
> 
> 赞同：2
> 
> 时间：2013-03-20T10:31:27.543
> 
> 标签：android, storage

how to programmatically read and display the size of sd-card and internal memory.

# Internal Memory

1.  total space.
2.  used space.
3.  free space.

# External Memory

1.  total space.
2.  used space.
3.  free space.

any related suggestions are apreciatted

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T10:37:37.623

```
StatFs class 
```

您可以在此处使用，提供内部和外部目录的路径并计算总空间、可用空间和可用空间。

```
StatFs memStatus = new StatFs(Environment.getExternalStorageDirectory().getPath()); 
```

有关更多详细信息，请参阅[文档](http://developer.android.com/reference/android/os/StatFs.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T10:37:48.320

检查这个[内存状态](http://www.androidsnippets.com/memory-size-class-for-viewing-available-storage) 类它有两种方法来获取内部和外部可用存储

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T10:37:48.400

试试这个代码：

```
public static long remainingLocalStorage()
{
StatFs stat = new StatFs(Environment.getDataDirectory().getPath());
stat.restat(Environment.getDataDirectory().getPath());
long bytesAvailable = (long)stat.getBlockSize() *(long)stat.getAvailableBlocks();
return bytesAvailable;
} 
```

# php - Zipping without include current directory

> ID：15521052
> 
> 赞同：1
> 
> 时间：2013-03-20T10:31:32.403
> 
> 标签：php, zip

I use the following for zipping

```
//http://ninad.pundaliks.in/blog/2011/05/recursively-zip-a-directory-with-php/

class FlxZipArchive extends ZipArchive {

    public function addDir($location, $name) {
        $this->addEmptyDir($name);     
        $this->addDirDo($location, $name);
     } // EO addDir

    private function addDirDo($location, $name) {
        $name .= '/';
        $location .= '/';

        // Read all Files in Dir
        $dir = opendir ($location);
        while ($file = readdir($dir))
        {
            if ($file == '.' || $file == '..') continue;

            // Rekursiv, If dir: FlxZipArchive::addDir(), else ::File();
            $do = (filetype( $location . $file) == 'dir') ? 'addDir' : 'addFile';
            $this->$do($location . $file, $name . $file);
        }
    } // EO addDirDo();
}

function zipIt($source, $target){
  $za = new FlxZipArchive;

  $res = $za->open($target, ZipArchive::CREATE);

  if($res === TRUE) {
      $za->addDir($source, basename($source));
      $za->close();
  }
  else
      echo 'Could not create a zip archive';

}

$the_folder = './Sales report';
$zip_file_name = './Sales report.docx';
//Don't forget to remove the trailing slash in folder
zipIt($the_folder,$zip_file_name,false); 
```

The problem is that it includes the current directory,

```
Sales report/
    file1.html
    file2.html
    Sub_Dir/
        file19.html 
```

But I just want

```
 file1.html
    file2.html
    Sub_Dir/
        file19.html 
```

How to do that?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:35:07.797

这是我使用的：

```
/**
 * Add a directory and its contents to the archive
 *
 * @param string $dir       The local filesystem path to the directory
 * @param string $localName The archive filesystem path to the directory
 *
 * @throws \RuntimeException When adding an object to the archive fails
 */
public function addDir($dirPath, $localName = NULL)
{
    if ($localName === NULL) {
        $localName = basename($dirPath);
    }
    if (!$this->addEmptyDir($localName)) {
        throw new \RuntimeException('Error adding directory '.$dirPath.' to archive');
    }

    $this->addDirContents($dirPath, $localName);
}

/**
 * Add the contents of a directory to the archive
 *
 * @param string $dir       The local filesystem path to the directory
 * @param string $localName The archive filesystem path to the directory
 *
 * @throws \RuntimeException When adding an object to the archive fails
 */
public function addDirContents($dirPath, $localName = '')
{
    $base = ltrim($localName.'/', '/');

    foreach (glob("$dirPath/*") as $file) {
        if (is_dir($file)) {
            $this->addDir($file, $base.basename($file));
        } else {
            if (!$this->addFile($file, $base.basename($file))) {
                throw new \RuntimeException('Error adding file '.$file.' to archive');
            }
        }
    }
} 
```

像您的代码一样，这些方法属于扩展类`\ZipArchive`。`addDir()`添加一个目录及其内容，`addDirContents()`只需添加内容而不在存档中创建父目录（因此可以执行您想要的操作）。

我通常不喜欢不解释就给出免费的工作代码，但碰巧我已经在我的编辑器中打开了你需要的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:18:58.103

最后，我使用此代码来提供选择是否包含当前目录的选项：

```
<?php
//http://ninad.pundaliks.in/blog/2011/05/recursively-zip-a-directory-with-php/

class FlxZipArchive extends ZipArchive {

    public function addDir1($location, $name, $includeCurrDir) {
      if($includeCurrDir)
        $this->addEmptyDir($name);     
        $this->addDirDo1($location, $name, $includeCurrDir);
     } // EO addDir

    private function addDirDo1($location, $name, $includeCurrDir) {
      if($includeCurrDir)
        $name .= '/';
      else
        $name = '';

      $location .= '/';

        // Read all Files in Dir
        $dir = opendir ($location);
        while ($file = readdir($dir))
        {
            if ($file == '.' || $file == '..') continue;

            // Rekursiv, If dir: FlxZipArchive::addDir(), else ::File();
            $do = (filetype( $location . $file) == 'dir') ? 'addDir' : 'addFile';
            $this->$do($location . $file, $name . $file);
        }
    } // EO addDirDo();

    public function addDir($location, $name) {
        $this->addEmptyDir($name);     
        $this->addDirDo($location, $name);
     } // EO addDir

    private function addDirDo($location, $name) {
        $name .= '/';
        $location .= '/';

        // Read all Files in Dir
        $dir = opendir ($location);
        while ($file = readdir($dir))
        {
            if ($file == '.' || $file == '..') continue;

            // Rekursiv, If dir: FlxZipArchive::addDir(), else ::File();
            $do = (filetype( $location . $file) == 'dir') ? 'addDir' : 'addFile';
            $this->$do($location . $file, $name . $file);
        }
    } // EO addDirDo();
}

function zipIt($source, $target, $includeCurrDir){
  $za = new FlxZipArchive;

  $res = $za->open($target, ZipArchive::CREATE);

  if($res === TRUE) {
      $za->addDir1($source, basename($source),$includeCurrDir);
      $za->close();
  }
  else
      echo 'Could not create a zip archive';

}
$the_folder = 'Sales report';
$zip_file_name = 'Sales report.docx';
//Don't forget to remove the trailing slash in folder
zipIt($the_folder,$zip_file_name,false);

?> 
```

# mysql - Prepared statement fetches all the results in db, but not one I ask for

> ID：15521054
> 
> 赞同：1
> 
> 时间：2013-03-20T10:31:41.667
> 
> 标签：mysql, prepared-statement

Trying to make my blog secure and learning prepared statements.

Although I set the variable, I still get all the entries from database. $escapedGet is real variable when I print it out. It's obviously a rookie mistake, but I cant seem to find an answer.

I need to get the data where postlink is $escapedGet not all the data.

```
 $escapedGet = mysql_real_escape_string($_GET['article']);

        // Create statement object
            $stmt = $con->stmt_init();

        // Create a prepared statement
        if($stmt->prepare("SELECT `title`, `description`, `keywords` FROM `post` WHERE `postlink` = ?")) {

         // Bind your variable to replace the ?
         $stmt->bind_param('i', $postlink);

         // Set your variable   
          $postlink = $escapedGet;

          // Execute query
           $stmt->execute();

           $stmt->bind_result($articleTitle, $articleDescription, $articleKeywords);

            while($stmt->fetch()) {
              echo $articleTitle, $articleDescription, $articleKeywords; 
             }

          // Close statement object
          $stmt->close();
        } 
```

just tryed this: `echo $escapedGet; echo $_Get['artcile']`

and got - some_other thats the same entry that I have saved in database as postlink

tried to shande postlink to id, and then it worked. but why not with postlink tab?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:07:43.300

当您使用`'i'`修饰符绑定数据时，它被绑定为整数。意味着字符串将在最终语句中强制转换为 0。

但是当 mysql 进行类型转换时，您的字符串在此查询中变为零：

```
SELECT title FROM post WHERE postlink = 0; 
```

试试看 - 对于文本后链接，您将返回所有记录（以及一堆警告）。

`s`因此，使用修饰符绑定字符串，而不是`i`

# facebook - Posting on facebook page - i am the only one who sees the post

> ID：15521055
> 
> 赞同：2
> 
> 时间：2013-03-20T10:31:49.620
> 
> 标签：facebook, post, visible

I searched all web long for this problem but nothing seems to fix it.

I am simply writing a post to a facebook page, the post is visibile on the page but only by myself and no from other admins or users.

How can it be possible?

I am using this function (also i'm pretty sure that the whole code is working as the post is on the page!):

$postResult = $facebook->api($post_url, 'post', $msg_body );

First i was guessing that was a privacy problem, but the page doesn't have that kind of parameter.

Whole code is:

`post_url = '/'.$page_id.'/feed';`

 ````
$page_info = $facebook->api("/$page_id?fields=access_token");

//die(print_r($page_info));
//posts message on page statues 
$msg_body = array(
'access_token' => $page_info['access_token'],

'message' => "test"
);

if ($fbuser) {
  try {
        $postResult = $facebook->api($post_url, 'post', $msg_body );
    } catch (FacebookApiException $e) {
    echo $e->getMessage();
  }
} 
````  `@------------@ EDIT @------------@

I still have the same problem, also, i checked a feed "manually" posted and a feed from my script, and the fields are exactly the same... that's insane.

@------------@ EDIT II: @------------@

I tried with a curl, nothing seems to work :/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T14:45:19.613

问题已解决。

作为一个白痴，沙盒模式被激活（我不知道应用程序所做的一切都是由沙盒绑定的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T19:37:09.993

您需要某种页面访问令牌才能做到这一点。另外，`$post_url`, 代表什么？我们无法从您编写的代码中猜测。无论如何，您可以使用`$pageid/feed`或使用`me/feed`（以及访问令牌）发布。它应该是这样的`$facebook->api( '/me/feed/', 'post', array('access_token' => $page_access_token, 'message' => 'Test message', 'link' => 'http://somelink.com') );``

# javascript - SlickGrid selection issues on sort

> ID：15521057
> 
> 赞同：5
> 
> 时间：2013-03-20T10:32:01.873
> 
> 标签：javascript, sorting, datagrid, selection, slickgrid

When using SlickGrids `selection` and `sorting` together I found that the selection is storing the index of the selected rows rather than storing the selection for the data you selected.

How can I fix this so that the selected data is remembered instead of just an index?

* * *

A demo of the issue can be found here: [http://jsfiddle.net/blowsie/LKf6j/](http://jsfiddle.net/blowsie/LKf6j/)

> To reproduce the issue take the following steps;
> 
> 1.  Select the first item in the grid
> 2.  Sort on name

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T18:27:15.367

你需要打电话`dataView.syncGridSelection(grid, true)`。

见 [https://github.com/mleibman/SlickGrid/wiki/DataView#synchronizing-selection--cell-css-styles](https://github.com/mleibman/SlickGrid/wiki/DataView#synchronizing-selection--cell-css-styles)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T16:47:22.707

在挖掘了更多示例之后，我找到[了这个](http://mleibman.github.com/SlickGrid/examples/example4-model.html)示例。

我很快意识到要实现我想要实现的目标，我需要将`Slick.Data.DataView`APi 与以下代码一起使用。

```
 dataView.onRowsChanged.subscribe(function (e, args) {
                    grid.invalidateRows(args.rows);
                    grid.render();
                });

                // initialize the model after all the events have been hooked up
                dataView.beginUpdate();
                dataView.setItems(files);
                dataView.endUpdate();

                dataView.syncGridSelection(grid, true); 
```

# character-encoding - Safely save a dictionary to file

> ID：15521058
> 
> 赞同：1
> 
> 时间：2013-03-20T10:32:03.403
> 
> 标签：character-encoding, tcl

What's the best way to save a dictionary to a file, so that I can load it later in Tcl on a different computer/system?

I don't think `fconfigure $stream -translation binary; puts -nonewline $stream $dict` works if there's keys/values with unicode characters > \u00ff. Is "utf-8" encoding OK (to save disk space), or should I always use full "unicode"?

Dictionaries are new to me, but since their textual representation is that of a list with alternating keys/values, and a list is just a string with some extra syntax characters, maybe the question could've been "Safely save a *string* to file"?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T11:23:10.403

您的问题可以简化：

> 我应该使用什么编码？

答案是：视情况而定。

*   如果你只有二进制数据，那么二进制是要走的路。
*   如果您主要有 ascii 字符和一些例外（如变音符号等），那么 utf-8 是最适合您的编码（字符之外的字符`\x00`用`\x7f`2 个或更多字节编码，ascii 用 1 个字节编码）。
*   如果您有很多[CJK](http://en.wikipedia.org/wiki/CJK)，那么使用 unicode 或其他一些编码可能会更好（每个字符 2 字节 vs 3 字节）

没错：列表和字典的（反）序列化在 Tcl 中比在许多其他语言中容易得多：将其保存为字符串。

# jquery - DIV height takes the height of img inside and not the height set using CSS

> ID：15521059
> 
> 赞同：0
> 
> 时间：2013-03-20T10:32:10.030
> 
> 标签：jquery, css, internet-explorer, height

```
<script type="text/javascript">  
    $(document).ready(function(e){  
       var dheight=$(document).innerHeight();  
       $(".background").css({  
          "height": dheight,  
          "overflow":"hidden"  
       });  
    });  
</script>

<section id="box">
    <section class="heading">
        <div class="head">SiteName</div>
    </section>
    <!--heading-->
    <div class="background">
        <img src="images/hdimage.jpg" width="100%" />
    </div>
    <!--background-->
</section>
<!--box--> 
```

The problem is in the Internet Explorer (even IE 10) `<div class="background">` takes the aspect height of the image, even I set `height`, `max-height` with `overflow: hidden`.

In Google Chrome, Firefox there is no problem. On inspecting in IE I find IE adds inline style with height of the image to the `<div>`. How to resolve this issue?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:49:11.447

在我看来，这些线是不可预测的

```
$(document).ready(function(e){  
       var dheight=$(document).innerHeight(); 
```

当您处理图像时，因为它们的高度尚不可用，您应该等待它们加载。

```
$(window).on('load',fumction(){
   var dheight=$(document).innerHeight();
   ...
}) 
```

是更好的选择

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:46:28.507

我猜你试图实现全屏背景，如果你是你的代码还远未完成并在所有实例和浏览器中工作。

我认为由于您的 img 上缺少结束标签，您的代码可能无法正常工作`/>`

我建议你看看[这篇文章中找到的以下代码](http://css-tricks.com/perfect-full-page-background-image/)

```
.background{

         background: url(images/bg.jpg) no-repeat center center fixed; 
          -webkit-background-size: cover;
          -moz-background-size: cover;
          -o-background-size: cover;
          background-size: cover;
          filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='.myBackground.jpg', sizingMethod='scale');
          -ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='myBackground.jpg', sizingMethod='scale')";

} 
```

# google-app-engine - Static files in GAE Cloud

> ID：15521063
> 
> 赞同：0
> 
> 时间：2013-03-20T10:32:19.567
> 
> 标签：google-app-engine

When an application is deployed in GAE cloud (Appspot.com); Is there a way to update or modify the static files on the src/main/webapps folder? For example the HTML and JSP files?

*   Either upload a modified HTML and JSP without redeploying the whole application?

Much like what we can do with Apache Tomcat, where we can modify the contents of the deployed app?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:48:27.733

据我所知，除了重新部署整个应用程序之外别无他法。App Engine 在沙箱中运行，写入文件访问权限是安全管理器不允许的事情之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:11:26.707

不幸的是，“App Engine 不支持写入本地文件” [http://goo.gl/kxNM5](http://goo.gl/kxNM5)

# algorithm - Parsing script loops in C#

> ID：15521074
> 
> 赞同：0
> 
> 时间：2013-03-20T10:33:02.330
> 
> 标签：algorithm, c#-3.0, text-parsing

I'm writing an application that will parse a script in a custom language (based *slightly* on C syntax and [Allman style](http://en.wikipedia.org/wiki/Indent_style#Allman_style "Allman style") formatting) and am looking for a better (read: faster) way of parsing blocks of the script code into string arrays than the way I'm currently doing it (the current method will do, but it was more for debug than anything else).

The script contents are currently read from a file into a string array and passed to the method.

Here's a script block template:

```
loop [/* some conditional */ ]
{
  /* a whole bunch of commands that are to be read into
   * a List<string>, then converted to a string[] and
   * passed to the next step for execution */

   /* some command that has a bracket delimited set of
    * properties or attributes */
   {
     /* some more commands to be acted on */
   }
} 
```

Basically, the curly bracket blocks can be nested (just like in any other C-based language), and I'm looking for the best way to find individual blocks like this.

The curly bracket delimited blocks will **ALWAYS** be formatted like this - the contents of the brackets will start on the line after the open bracket and will be followed by a bracket on the line after the final attribute/command/comment/whatever.

An example might be:

```
loop [ someVar <= 10 ]
{
  informUser "Get ready to do something"
  readValue
  {
    valueToLookFor = 0x54
    timeout = 10 /* in seconds */
  }
} 
```

This would tell the app to loop whilst someVar is less than 10 (sorry for the sucking eggs comment). Each time round, we pass a message to the user and look for a specific value from somewhere (with a timeout of 10 seconds).

Here's how I'm doing it at the minute (note: the method that calls this passes the entire string[] containing the current script into it with an index to read from):

```
private string[] findEntireBlock(string[] scriptContents, int indexToReadFrom,
                                out int newIndex)
{
    newIndex = 0;
    int openBraceCount = 0;     // for '{' char count
    int closeBraceCount = 0;    // for '}' char count
    int openSquareCount = 0;    // for '[' char count
    int closeSquareCount = 0;   // for ']' char count

    List<string> fullblock = new List<string>();

    for (int i = indexToReadFrom; i < scriptContents.Length; i++)
    {
        if (scriptContents[i].Contains('}'))
        {
            if (scriptContents[i].Contains("[") && fullblock.Count > 0)
            {
                //throw new exception, as we shouldn't expect to
                //to find a line which starts with [ when we've already
            }
            else
            {
                if (scriptContents[i].Contains('{')) openBraceCount++;
                if (scriptContents[i].Contains('}')) closeBraceCount++;
                if (scriptContents[i].Contains('[')) openSquareCount++;
                if (scriptContents[i].Contains(']')) closeBraceCount++;
                newIndex = i;
                fullblock.Add(scriptContents[i]);
                break;
            }
        }
        else
        {
            if (scriptContents[i].Contains("[") && fullblock.Count > 0)
            {
                //throw new exception, as we shouldn't expect to
                //to find a line which starts with [ when we've already
            }
            else
            {
                if (scriptContents[i].Contains('{')) openBraceCount++;
                if (scriptContents[i].Contains('}')) closeBraceCount++;
                if (scriptContents[i].Contains('[')) openSquareCount++;
                if (scriptContents[i].Contains(']')) closeBraceCount++;
                fullblock.Add(scriptContents[i]);
            }
        }
    }
    if (openBraceCount == closeBraceCount &&
        openSquareCount == closeSquareCount)
          return fullblock.ToArray();
    else
        //throw new exception, the number of open brackets doesn't match
        //the number of close brackets
} 
```

I agree that this might be a slightly obtuse and slow method to follow, that's why I'm asking for any ideas on how to re-implement this for speed and clarity (if a balance can be met, that is).

I'm looking to stay away from RegEx, because I can't use it to maintain a bracket count and I'm not sure on whether you can write a RegEx statement (is that the correct term?) that can act recursively. I was thinking of working from the inside outward, but I'm convinced that would be quite slow.

I'm **not** looking for someone to re-write it for me, but a general idea on algorithms or techniques/libraries that I could use that would improve my method.

As a side question, how do compilers deal with multiple nested brackets in source code?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T10:45:39.237

[让我们构建一个编译器](http://compilers.iecc.com/crenshaw/)，由 Jack Crenshaw 编写，是一个很棒的、易于阅读的关于构建基本编译器的介绍。讨论的技术应该有助于您在这里尝试做的事情。

# angularjs - 下拉菜单的“必需”验证

> ID：15521079
> 
> 赞同：0
> 
> 时间：2013-03-20T10:33:10.493
> 
> 标签：angularjs, angularjs-directive

我必须使用`required`AngularJS 中的验证来验证下拉列表。我已经创建了验证指令，但指令未加载到选择标记上。如何在下拉列表中加载指令？或者，如何验证下拉菜单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:52:11.450

您可以在表单的提交按钮上添加验证方法来检查下拉列表的值。

示例： http: [//plnkr.co/edit/PbePIh](http://plnkr.co/edit/PbePIh)

应用程序.js：

```
var app = angular.module('plunker', []);

app.controller('MainCtrl', function($scope) {
  $scope.colors = [{name: 'blue'}, {name:'red'}, {name:'yellow'}];

  $scope.reqColor = function() {
    if ($scope.color && $scope.color.name && $scope.color.name != 'blue') return false;
    return true;
  }
}); 
```

索引.html：

```
<body ng-controller="MainCtrl">
 <form name="form">
  <select ng-model="color" ng-options="c.name for c in colors"></select><br>
  <button ng-disabled="form.$invalid || reqColor()">Save</button>
 </form>
</body> 
```

在此示例中，如果您未在下拉列表中选择任何内容或选择了蓝色，则保存按钮将被禁用。

# javascript - 纯 JS 等效于 jQuery .animate()

> ID：15521081
> 
> 赞同：26
> 
> 时间：2013-03-20T10:33:14.457
> 
> 标签：javascript, jquery

纯 JavaScript 中的以下 jQuery 动画的等价物是什么？

```
function animate(element, position, speed) {
  $(element).animate({
    "top": position
  }, speed);
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-20T10:36:30.170

`setTimeout`您可以使用和`setInterval`方法使用纯 javascript 实现复杂的动画。

请[在此处查看](http://javascript.info/tutorial/animation)。

这是移动元素的关键部分：

```
function move(elem) {
    var left = 0
    function frame() {
        left++  // update parameters
        elem.style.left = left + 'px' // show frame
        if (left == 100)  // check finish condition
            clearInterval(id)
    }
    var id = setInterval(frame, 10) // draw every 10ms
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-12-15T05:45:41.577

这个版本使用 vanilla javascript .animate() 函数，它比 requestAnimation 框架更好或更高性能。& 它也是 JQuerys .animate() 的合适替代品。
您可以使用迭代、计时功能和填充方法以及将其与其他动画进行菊花链

```
document.getElementById("Elem");
         Elem.style.position = "absolute";
         Elem.animate({
              top: ['8px', '280px']
                 },{ duration: 1760,        // number in ms [this would be equiv of your speed].
                     easing: 'ease-in-out',
                     iterations: 1,         // infinity or a number.
                  // fill: ''
        }); 
```

我相信 setTimeout 和 setInterval 函数都使用 unsafe eval() 函数，但不是 100% 确定这一点，只要记住阅读一篇关于它的文章......
不要引用我的话！只是研究一下，
但是我写的代码已经过测试可以正常工作..希望这对某人有所帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-04T17:34:44.207

Element.animate() 函数似乎非常简单和有用。但是目前存在很多兼容性问题。你可以阅读它：

[https://developer.mozilla.org/en-US/docs/Web/API/Element/animate](https://developer.mozilla.org/en-US/docs/Web/API/Element/animate)

我建议习惯于 requestAnmationFrame。它与所有浏览器兼容，并且非常强大：

[https://javascript.info/js-animation](https://javascript.info/js-animation)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-10T10:39:31.240

setInterval() 方法对于浏览器来说太重了，所以最好用 requestAnimationFrame() 来做动画。以下代码是使用此方法的示例。

```
let _btns = document.querySelectorAll('.btn'),
        _start = null;

let _loop = function (timestamp, duration, position, wrap) {
        if (!_start) _start = timestamp;
        let progress = (timestamp - _start) / duration;
        wrap.style.left = progress * position + 'px'
        if ( progress < 1 ) {
            window.requestAnimationFrame( function (timestamp){
                _loop(timestamp,duration,position,wrap);
            } );
        } else {
            _start = null;
        }
    },
    _animation = function () {
        const wrap = document.querySelector('.logo-2'),
            position = 300, // 300 pixels
            duration = 500; // 500 milliseconds
        _loop(0,duration,position,wrap);
    },

    _addEvents = function () {

        [].forEach.call(_btns,function(el){
            el.addEventListener('click', function (e) {
                _animation();
            })
        });

    },
    _init = function() {
        _addEvents();
    };

_init(); 
```

# mysql - Is index dependent on selected columns?

> ID：15521084
> 
> 赞同：4
> 
> 时间：2013-03-20T10:33:27.420
> 
> 标签：mysql

I am executing most of the queries based on the time. So i created index for the created time. But , The index only works , If I select the indexed columns only. Is mysql index is dependant the selected columns?.

**My Assumption On Index**

I thought index is like a telephone dictionary index page. Ex: If i want to find "Mark" . Index page shows which page character "M" starts in the directory. I think as same as the mysql works.

**Table**

```
+--------------+--------------+------+-----+---------+----------------+
| Field        | Type         | Null | Key | Default | Extra          |
+--------------+--------------+------+-----+---------+----------------+
| ID           | int(11)      | NO   | PRI | NULL    | auto_increment |
| Name         | varchar(100) | YES  |     | NULL    |                |
| OPERATION    | varchar(100) | YES  |     | NULL    |                |
| PID         | int(11)      | YES  |     | NULL    |                |
| CREATED_TIME | bigint(20)   | YES  |     | NULL    |                |
+--------------+--------------+------+-----+---------+----------------+ 
```

**Indexes On the table.**

```
 +-----------+------------+----------+--------------+--------------+-----------+-------------+----------+--------+------+------------+---------+---------------+
| Table     | Non_unique | Key_name | Seq_in_index | Column_name  | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment | Index_comment |
+-----------+------------+----------+--------------+--------------+-----------+-------------+----------+--------+------+------------+---------+---------------+
| IndexTest |          0 | PRIMARY  |            1 | ID           | A         |       10261 |     NULL | NULL   |      | BTREE      |         |               |
| IndexTest |          1 | t_dx     |            1 | CREATED_TIME | A         |         410 |     NULL | NULL   | YES  | BTREE      |         |               |
+-----------+------------+----------+--------------+--------------+-----------+-------------+----------+--------+------+------------+---------+---------------+ 
```

**Queries Using Indexes:**

```
 explain select * from IndexTest where ID < 5;
+----+-------------+-----------+-------+---------------+---------+---------+------+------+-------------+
| id | select_type | table     | type  | possible_keys | key     | key_len | ref  | rows | Extra       |
+----+-------------+-----------+-------+---------------+---------+---------+------+------+-------------+
|  1 | SIMPLE      | IndexTest | range | PRIMARY       | PRIMARY | 4       | NULL |    4 | Using where |
+----+-------------+-----------+-------+---------------+---------+---------+------+------+-------------+

  explain select CREATED_TIME from IndexTest where CREATED_TIME > UNIX_TIMESTAMP(CURRENT_DATE())*1000;
    +----+-------------+-----------+-------+---------------+------+---------+------+------+--------------------------+
| id | select_type | table     | type  | possible_keys | key  | key_len | ref  | rows | Extra                    |
+----+-------------+-----------+-------+---------------+------+---------+------+------+--------------------------+
|  1 | SIMPLE      | IndexTest | range | t_dx          | t_dx | 9       | NULL | 5248 | Using where; Using index |
+----+-------------+-----------+-------+---------------+------+---------+------+------+--------------------------+ 
```

**Queries Not using Indexes**

```
 explain select count(distinct(PID)) from IndexTest where CREATED_TIME > UNIX_TIMESTAMP(CURRENT_DATE())*1000;
+----+-------------+-----------+------+---------------+------+---------+------+-------+-------------+
| id | select_type | table     | type | possible_keys | key  | key_len | ref  | rows  | Extra       |
+----+-------------+-----------+------+---------------+------+---------+------+-------+-------------+
|  1 | SIMPLE      | IndexTest | ALL  | t_dx          | NULL | NULL    | NULL | 10261 | Using where |
+----+-------------+-----------+------+---------------+------+---------+------+-------+-------------+

    explain select PID from IndexTest where CREATED_TIME > UNIX_TIMESTAMP(CURRENT_DATE())*1000;
+----+-------------+-----------+------+---------------+------+---------+------+-------+-------------+
| id | select_type | table     | type | possible_keys | key  | key_len | ref  | rows  | Extra       |
+----+-------------+-----------+------+---------------+------+---------+------+-------+-------------+
|  1 | SIMPLE      | IndexTest | ALL  | t_dx          | NULL | NULL    | NULL | 10261 | Using where |
+----+-------------+-----------+------+---------------+------+---------+------+-------+-------------+ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T16:39:42.560

**简短的回答：没有。**

是否使用索引取决于您的`WHERE`子句、`JOIN`s 等中的表达式，而不取决于您选择的列。

但是没有规则没有例外（或者实际上是一长串）：

**长答案：通常不会**

MySQL 优化器使用了许多因素来确定它是否应该使用索引。

优化器可能会决定忽略索引，如果...

*   另一个（否则不是最佳的）将其完全从访问表数据中保存下来
*   它无法理解表达式是常量
*   它的估计表明无论如何它都会返回完整的表格
*   如果它的使用会导致创建一个临时文件
*   ...以及大量其他原因，其中一些似乎没有记录在任何地方

有时，所述优化器所做的选择是……呃……让我们称它们为次优。现在在这些情况下你会怎么做？

*   您可以通过执行`OPTIMIZE TABLE`and/or来帮助优化器`ANALYZE TABLE`。这很容易做到，而且有时会有所帮助。
*   `USE INDEX(indexname)`您可以使用or`FORCE INDEX(indexname)`语法使其使用某个索引
*   `IGNORE INDEX(indexname)`您可以使用语法使其忽略某个索引

MySQL 文档网站上有关[索引提示](http://dev.mysql.com/doc/refman/5.1/en/index-hints.html)、[优化表](http://dev.mysql.com/doc/refman/5.1/en/optimize-table.html)和[分析表](http://dev.mysql.com/doc/refman/5.1/en/analyze-table.html)的更多详细信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-31T02:50:35.240

实际上，您是否选择列都没有区别。索引用于查找，这意味着快速减少您需要检索的记录数。这使得它通常在以下情况下很有用：你有连接，你有 where 条件。索引也有助于排序。

使用 where 条件上的索引也可以大大加快更新和删除的速度。

举个例子：

```
table: id int pk ai, col1 ... indexed, col2 ...
select * from table -> does not use a index
select id from table where col1 = something -> uses the col1 index although it is not selected. 
```

查看第二个查询，mysql 在索引中进行查找，定位记录，然后在这种情况下停止并交付（id 和 col1 都有索引并且 id 恰好是 pk，因此不需要二次查找）。

在这种情况下，情况略有变化：

```
select col2 from table where col1 = something 
```

这将在内部进行 2 次查找：1 次用于条件，1 次在 pk 上用于传递 col2 数据。请再次注意，您不需要选择 col1 列来使用索引。

回到您的查询，问题在于： UNIX_TIMESTAMP(CURRENT_DATE())*1000; 如果您删除它，您的索引将用于查找。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-20T10:37:38.693

> mysql索引是否依赖于选定的列？

是的，一点没错。

例如：[_](http://dev.mysql.com/doc/refman/5.5/en/multiple-column-indexes.html)

> 如果列不构成索引的最左前缀，则 MySQL 无法使用索引执行查找。假设您有`SELECT`此处显示的语句：
> 
> ```
> SELECT * FROM tbl_name WHERE col1=val1;
> SELECT * FROM tbl_name WHERE col1=val1 AND col2=val2;
> 
> SELECT * FROM tbl_name WHERE col2=val2;
> SELECT * FROM tbl_name WHERE col2=val2 AND col3=val3; 
> ```
> 
> 如果 上存在索引`(col1, col2, col3)`，则只有前两个查询使用该索引。第三和第四个查询确实涉及索引列，`(col2)`但`(col2, col3)` 不是`(col1, col2, col3)`.

**阅读[大量文档](http://dev.mysql.com/doc/refman/5.5/en/optimization-indexes.html)。**

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-01T02:29:37.197

**对于 mysql 查询，答案是肯定的，但不是全部**

查询：

> 解释 select * from IndexTest where ID < 5;

如果你使用innodb，它的表的主键使用表簇索引，所以它使用primary进行查询

第二个查询：

> 从 IndexTest 中选择 CREATED_TIME，其中 CREATED_TIME > UNIX_TIMESTAMP(CURRENT_DATE())*1000;

这个只是获取mysql不需要从表中获取数据而只是索引的索引列，所以你的解释结果得到了“使用索引”

查询：

> 从 IndexTest 中选择 count(distinct(PID)) 其中 CREATED_TIME > UNIX_TIMESTAMP(CURRENT_DATE())*1000;

它看起来像这样

> 从 IndexTest 中选择 PID，其中 CREATE_TIME>UNIX_TIMESTAMP(CURRENT_DATE())*1000 按 PID 分组

mysql也可以使用索引从数据库中获取数据，但是mysql认为这个查询不需要使用索引来获取数据，因为where条件过滤器，**mysql认为使用索引获取数据比扫描所有表更昂贵**，你可以`force index`也使用

您上次查询的相同原因

跳这个答案可以帮助你

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T10:39:47.387

**索引**有助于加快对特定列和相关数据而不是表数据的搜索。所以你必须包括索引列来加速`select`。

# java - Java EE Web 应用程序性能调优

> ID：15521085
> 
> 赞同：2
> 
> 时间：2013-03-20T10:33:28.443
> 
> 标签：java, performance, web-applications, code-analysis

我需要对 Java EE Web 应用程序进行性能分析并优化代码。请建议这样做的方法？首先，我正在检查服务器日志。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T10:36:57.053

根据您含糊的问题，答案可能很含糊：

根据您想要改进的内容，第一条规则是衡量您想要改进的内容。此外，在您尝试改进后，请再次测量！

**记忆**

关于内存优化，您应该获取正在运行的应用程序的堆转储并分析它们。一个非常有用的分析工具是[eclipse 内存分析器工具](http://www.eclipse.org/mat/)。

**剖析**

如果你想提高性能并最小化代码的运行时间，你应该从分析开始。[JVisualVM](http://docs.oracle.com/javase/6/docs/technotes/tools/share/jvisualvm.html)是一个很好的工具。为了在您的应用程序上增加一些负载，[JMeter](http://jmeter.apache.org/)可以在基于 Web 的应用程序的上下文中为您提供帮助。

**性能调优规则**

首先测量确定瓶颈，然后选择“最大”的泄漏进行优化。再次优化测量以验证您的结果后。如果之后您不满意，请重新开始测量。

**了解应用程序中真正缓慢的部分**

在开始测量之前，您应该准确地确定您的应用程序真的很慢的情况，否则您可能不会注意到差异甚至“去优化”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-07T07:07:28.207

Try using a application monitoring tool like [newrelic](http://newrelic.com/) , it will tell you which server side components have the slowest response times, and then it will let you drill down to which calls within that application consume the most resources, that should be a good start ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T10:38:38.473

有多种工具可用于进行性能分析。

您可以使用 Jmeter 进行一些负载测试并查看您获得的性能。如果您发现某些功能的性能不佳，请深入研究以找到瓶颈。

您可以使用 JProfiler 来分析 Web 应用程序的 JVM。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T10:36:40.850

使用一些好的 java profiler 并找出问题点，如高内存使用率、高 CPU 使用率等。查看[YourKit](http://www.yourkit.com/)和/或[jprofiler](http://www.ej-technologies.com/products/jprofiler/overview.html)。您可以将他们的试用版用于您的案例

# php - PHP geoplugin php错误

> ID：15521086
> 
> 赞同：0
> 
> 时间：2013-03-20T10:33:37.647
> 
> 标签：php, plugins, geo

我将 geoplugin.com 中的插件添加到我的页面，我激活了我的域，但在我的错误日志中，我一直收到如下错误：

```
[20-Mar-2013 11:17:13 CET] PHP Warning: file_get_contents(http://www.geoplugin.net/php.gp?ip=157.55.34.183&amp;base_currency=USD) [<a href='function.file-get-contents'>function.file-get-contents</a>]: failed to open stream: HTTP request failed! HTTP/1.1 403 Forbidden
 in /wwwroot.wwwnew/templates/geo/geoplugin.class.php on line 105 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-30T17:52:20.637

> If geoplugin.net was responding perfectly, then stopped, then you have gone over the free lookup limit of 120 requests per minute.
> 
> We automatically block all requests coming from an IP or a domain name if the number of requests exceeds 120 lookups per minute. This is explained in our Acceptable Use Policy. This block comes in the form of a HTTP/1.1 403 Forbidden reply from geoplugin.net
> 
> This block is automatically removed 1 hour after the last time your server stopped sending more than 120 requests a minute.

- [GeoPlugin FaQ](http://www.geoplugin.com/faq)

If you need more than 120 requests per minute, you have to [whitelist your domain](http://www.geoplugin.com/premium) (it's paid).

# apache - Phusion 乘客状态活动计数始终指向零

> ID：15521091
> 
> 赞同：0
> 
> 时间：2013-03-20T10:33:53.660
> 
> 标签：apache, passenger, phusion

我在我的 apache 中安装了 phusion 乘客 3，它的内存限制为 5GB，交换空间为 2GB，当我检查一般信息中的乘客状态时，活动行始终显示为零，其中计数将为 2 到 3，非活动将为最多 6 个。

但是我的内存使用量已经超过 4.8GB，但活动行仍然显示为零。

为什么会这样..请任何人都可以帮助我

它像是：-

活动 = 0 非活动 = 6 等待全局队列：0

活动行将始终指向零

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T07:03:54.617

`active`表示这些进程存在，但当前未处理任何请求。如果您的网站是空闲的，那么它应该是 0。

# azure - Azure 连接尝试失败

> ID：15521092
> 
> 赞同：0
> 
> 时间：2013-03-20T10:33:58.187
> 
> 标签：azure, sitecore, sitecore6, sitecore-azure

我有一个 sitecore azure deployment 2.0。不幸的是，当我尝试从公司网络运行它时，我收到以下错误：

> 连接尝试失败，因为连接的一方在一段时间后没有正确响应，或者连接失败，因为连接的主机没有响应 213.199.180.206:80

当我在同一台机器上尝试以下操作时，它可以工作：

1.  [http://www.google.com](http://www.google.com)
2.  [https://www.google.com](https://www.google.com)

想知道究竟是什么导致了上述问题，因为 443 和 80 都可以通过 IE 正常工作。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-31T11:58:27.860

听起来绝对像是公司的防火墙/网关问题。写了一篇博客文章，讲述了我对这些类型问题的经验。 [http://reservoirdevs.wordpress.com/2013/10/18/sitecore-azure-walkthrough-and-gotchas/](http://reservoirdevs.wordpress.com/2013/10/18/sitecore-azure-walkthrough-and-gotchas/)

我的解决方案是从公司网络外部尝试。然后它工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:46:25.393

这听起来像您的 Azure 计算机上的防火墙未设置为允许端口 80 上的传入 http 流量。尽管此超时可能有很多其他原因。

# workflow - 通过电子邮件有效地向部门分发数据透视图

> ID：15521094
> 
> 赞同：4
> 
> 时间：2013-03-20T10:33:58.823
> 
> 标签：workflow, excel-2010

我在一个有很多部门和分支机构的机构工作。我有一个带有数据透视图的“excel 数据库”，可以显示不同部门和细分的进度结果，但是有很多，并且要通过所有图表（Dep 1，细分 1，Dep 1 细分 2，等等...）我必须经历很多迭代，为每个部门和细分发送图表。

我正在考虑创建一个宏 - 选择数据透视图中的每个选项，然后导出到 word 文档，但我不知道是否有更简单的方法，因为我想这也需要相当长的时间。

我在想可能有人遇到过同样的情况，所以如果有人对如何有效解决这个问题有任何建议，请告诉我。

**编辑：** 所以在我看来，这个问题需要解决三个步骤（被击中的步骤是我知道该怎么做的步骤）

1.  遍历数据透视表选项
2.  ~~将图表复制到 word 或其他 excel 文件并保存~~
3.  将该文件附加到邮件中，并将其发送到正确的部门邮箱

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T20:30:15.420

多年来，关于如何处理像您这样的案件的总体思路已经发生了变化。目前，我建议在某种内部网站上访问数据，并允许每个部门按需生成自己的图表。然后，他们可以随时查看数据，而您不必发送图表。看看 Google Drive 或 MS Office365 是否可以为您执行此操作。

# vb6 - 在 Windows 7 中使用 Internet 传输

> ID：15521096
> 
> 赞同：0
> 
> 时间：2013-03-20T10:34:15.623
> 
> 标签：vb6

我正在用 VB6 开发一个可移植的应用程序。我的目标平台是 Win XP - Vista - 7 - 8 （我认为它们都运行了 VB6。我是我的应用程序的一部分，我需要从我使用的 Internet 中读取一个小文本文件

```
Inet.OpenURL 
```

这在 Win Xp 中运行良好，但在 Win7 中出现此错误

> 运行时错误“339”：组件“MSINET.OCX”或其依赖项之一未正确注册：文件丢失或无效。

由于这是一个便携式应用程序，我无法制作安装文件。

我能做些什么？

是否可以在我的应用程序文件中包含 MSINET.OCX？

`Inet.OpenURL`在 Win 7 中有没有可以替代which works 的替代品？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T11:48:16.323

对于这么简单的事情，您可以改用 MSXML XmlHttpRequest 对象。版本 3.0 应该作为 Windows 的一部分出现在几乎任何版本中（如果曾经安装过 IE 5.x，甚至回到 Win95）。

只要您不需要 FTP 而只需要 HTTP/HTTPS，这通常是比 Internet 传输控制更干净的选项。如果您处理其脚本样式的事件绑定，它也可以用于异步请求。

如果您只执行简单的 GET 请求，您可以简单地使用内置于 VB6 运行时的 AsyncRead 方法。

# java - 在android中的asyntask中解析json

> ID：15521103
> 
> 赞同：0
> 
> 时间：2013-03-20T10:34:36.510
> 
> 标签：java, android, json, android-asynctask

我在一个定时器循环内从一个 android 服务内的 web 的 json 源中获取信息。有时，大约 5% 的时候我得到这个错误：

```
03-20 09:27:06.901: E/AndroidRuntime(401): FATAL EXCEPTION: main
03-20 09:27:06.901: E/AndroidRuntime(401): java.lang.NullPointerException
03-20 09:27:06.901: E/AndroidRuntime(401):  at org.json.JSONTokener.nextCleanInternal(JSONTokener.java:112)
03-20 09:27:06.901: E/AndroidRuntime(401):  at org.json.JSONTokener.nextValue(JSONTokener.java:90)
03-20 09:27:06.901: E/AndroidRuntime(401):  at org.json.JSONObject.<init>(JSONObject.java:154)
03-20 09:27:06.901: E/AndroidRuntime(401):  at org.json.JSONObject.<init>(JSONObject.java:171)
03-20 09:27:06.901: E/AndroidRuntime(401):  at Dic.proj.pkg.notifService.parse_if_update(notifService.java:182)
03-20 09:27:06.901: E/AndroidRuntime(401):  at Dic.proj.pkg.notifService$1$1$1.onPostExecute(notifService.java:151)
03-20 09:27:06.901: E/AndroidRuntime(401):  at Dic.proj.pkg.notifService$1$1$1.onPostExecute(notifService.java:1)
03-20 09:27:06.901: E/AndroidRuntime(401):  at android.os.AsyncTask.finish(AsyncTask.java:417)
03-20 09:27:06.901: E/AndroidRuntime(401):  at android.os.AsyncTask.access$300(AsyncTask.java:127)
03-20 09:27:06.901: E/AndroidRuntime(401):  at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
03-20 09:27:06.901: E/AndroidRuntime(401):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-20 09:27:06.901: E/AndroidRuntime(401):  at android.os.Looper.loop(Looper.java:123)
03-20 09:27:06.901: E/AndroidRuntime(401):  at android.app.ActivityThread.main(ActivityThread.java:4627)
03-20 09:27:06.901: E/AndroidRuntime(401):  at java.lang.reflect.Method.invokeNative(Native Method)
03-20 09:27:06.901: E/AndroidRuntime(401):  at java.lang.reflect.Method.invoke(Method.java:521)
03-20 09:27:06.901: E/AndroidRuntime(401):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-20 09:27:06.901: E/AndroidRuntime(401):  at    com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-20 09:27:06.901: E/AndroidRuntime(401):  at dalvik.system.NativeStart.main(Native Method) 
```

我使用 RestClient libraryfot 解析 json。这是我的 parse_if_update Asyntask：

```
public static String parse_if_update(String jsonResponse) {
    String update = "";
    try {
        JSONObject json = new JSONObject(jsonResponse);
        update = json.getString("update");
    } catch (JSONException e) {
        e.printStackTrace();
    }
    return update;
} 
```

这有什么问题？我认为这与我的 asyntask 有关，因为我的 asyntask 有时会运行多次......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:38:17.383

是由`NullPointerException`抛出的`JSONTokener`，这让我觉得你的`jsonResponse`对象是`null`。添加一个检查，你应该没问题：

```
if (jsonResponse != null) {
    JSONObject json = new JSONObject(jsonResponse);
    update = json.getString("update");
}

else
    update = "response was null!"; 
```

# performance - 用于多核的 Vtune 放大器 XE？

> ID：15521105
> 
> 赞同：1
> 
> 时间：2013-03-20T10:34:52.613
> 
> 标签：performance, parallel-processing, cpu, intel, intel-vtune

我正在使用 Intel Vtune Amplifier XE 2013 来分析在多核 CPU 上运行的并行程序，特别是它是用 OpenCL 编写并在 Xeon Phi 中执行的。我想知道Vtune带来的结果应该如何准确解释，即

1.  是单线程还是整个核心收集的性能计数器的值？（假设一个 CPU 中有许多内核，并且许多线程可以在一个内核上同时执行，例如 Xeon Phi）。
2.  Vtune 如何在多核 CPU 上采样？它是在单个核心上采样并报告它，还是在多个核心上采样并取平均值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T21:24:27.833

VTune 默认对 Xeon Phi 上的所有内核进行采样，结果可以通过以下任一方式查看：聚合或每个内核。使用 GUI 中 BottomUp 选项卡中的 Grouping 下拉框来规范数据聚合的方式，使用“change Viewpoint”在热点、事件计数和其他可用视图之间切换。

有关 VTune 在 Xeon Phi 上进行 OpenCl 分析的更多信息，请参阅以下文章：

[http://software.intel.com/en-us/articles/performance-tuning-of-opencl-applications-on-intel-xeon-phi-coprocessor-using-intel-vtune-amplifier-xe-2013](http://software.intel.com/en-us/articles/performance-tuning-of-opencl-applications-on-intel-xeon-phi-coprocessor-using-intel-vtune-amplifier-xe-2013)

[http://software.intel.com/en-us/articles/optimization-and-performance-tuning-for-intel-xeon-phi-coprocessors-part-2-understanding](http://software.intel.com/en-us/articles/optimization-and-performance-tuning-for-intel-xeon-phi-coprocessors-part-2-understanding)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T15:16:51.780

答案是视情况而定。一些计数器（如循环或 L1 未命中）是每个线程的。但是还有其他一些是每个核心的。因此，这取决于您要捕获的计数器。

# mysql - InnoDb 查询的估计行大小 - 缓冲区大小大于配置的最大值

> ID：15521110
> 
> 赞同：0
> 
> 时间：2013-03-20T10:35:06.077
> 
> 标签：mysql, ssis, size, innodb

对于返回以下内容的查询，估计的行大小（以字节为单位）是多少：

```
CHAR(255) x 10 columns
TIMESTAMP x 1 column
INT(11) x 2 columns 
```

实际内容决定大小还是上面的信息。如果以实际内容如何计算好估计？

阅读周围我估计 2562 基于（使用 latin1 字符集）：

```
 2 x INT(11)    = ( 2 x 4    )     8
 1 x TIMESTAMP  = ( 1 x 4    )     4
10 x CHAR(255)  = ( 10 x 255 )   2550
                                -----
                                 2562 
```

那正确吗？

我将 SSIS 包 ADO .NET 源的属性设置为：

```
DefaultBufferMaxRows:    10000
DefaultBufferSize:       25620000 
```

问题是 DefaultBufferSize 比以前高，我得到了错误：

> > 缓冲区类型 0 中的行将导致缓冲区大小大于配置的最大值。这种类型的缓冲区中只有 1835 行。

# css - 从 Intraweb 区域中删除所有内联样式

> ID：15521114
> 
> 赞同：1
> 
> 时间：2013-03-20T10:35:14.757
> 
> 标签：css, delphi, intraweb

我在用于常见界面元素的祖先 IW 表单上有一个 IWRegion（它有自己的 HTMLTemplate）。

当我查看 html 输出（使用 Chrome 的 Inspect 元素）时，由 IWRegion 生成的 div 具有内联样式，但与 IWForm 不同，没有属性（StyleRenderOptions.RenderSize 等）来禁用它们，有什么方法可以禁用这些内联样式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:02:29.393

在 TIWAppForm 上有属性 StyleSheet。将您的样式 css 链接到属性。

我将 IWRegion 命名为 regTopTitle 并在我设置的 css 表中：

```
.REGTOPTITLECSS{
  border-top-width: 10px;
  border-top-style: solid;
  border-top-color: #808080;
  border-bottom-width: 10px;
  border-bottom-style: solid;
  border-bottom-color: #808080;
  background-color: #FFFFFF;
} 
```

您可以制作自己的 css 当我运行该页面时，我得到的 css Like I want to the region。我用intraweb 10.0.23

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-13T17:09:56.490

我用 JQuery 修改 html 页面。添加一个类：

```
$('#REGTOPTITLE').addClass('myClass'); 
```

或者：

```
$('#REGTOPTITLE').attr('class','myClass'); 
```

如果要删除 IntraWeb 现有类，依此类推。

如果您使用它，您必须将 JavaScript 代码写入您的 TEMPLATE html，或者将其写入 IWForm 属性：

```
YourIWForm.ExtraHeader.Text := '<script type="text/javascript"> .... </script>' 
```

**要删除内联样式：**

```
<script>
$(document).ready(function() {
    $('#REGTOPTITLE').attr('style','');
});
</script> 
```

检查 HTML 源页面以找到您需要管理的“id”标签。

# android - 扩展图库的 CoverFlow（已弃用在 >4.0 设备中无法正常工作）

> ID：15521115
> 
> 赞同：5
> 
> 时间：2013-03-20T10:35:18.747
> 
> 标签：android, android-gallery

我正在使用此类在我的应用程序中实现 CoverFlow：

```
public class CoverFlow extends Gallery {

/**
 * Graphics Camera used for transforming the matrix of ImageViews
 */
private Camera mCamera = new Camera();

/**
 * The maximum angle the Child ImageView will be rotated by
 */    
private int mMaxRotationAngle = 60;

/**
 * The maximum zoom on the centre Child
 */
private int mMaxZoom = -175;

/**
 * The Centre of the Coverflow 
 */   
private int mCoveflowCenter;

public CoverFlow(Context context) {
  super(context);
  this.setStaticTransformationsEnabled(true);
 }

 public CoverFlow(Context context, AttributeSet attrs) {
  super(context, attrs);
        this.setStaticTransformationsEnabled(true);
 }

  public CoverFlow(Context context, AttributeSet attrs, int defStyle) {
   super(context, attrs, defStyle);
   this.setStaticTransformationsEnabled(true);   
  }

    /**
     * Get the max rotational angle of the image
  * @return the mMaxRotationAngle
  */
 public int getMaxRotationAngle() {
  return mMaxRotationAngle;
 }

 /**
  * Set the max rotational angle of each image
  * @param maxRotationAngle the mMaxRotationAngle to set
  */
 public void setMaxRotationAngle(int maxRotationAngle) {
  mMaxRotationAngle = maxRotationAngle;
 }

 /**
  * Get the Max zoom of the centre image
  * @return the mMaxZoom
  */
 public int getMaxZoom() {
  return mMaxZoom;
 }

 /**
  * Set the max zoom of the centre image
  * @param maxZoom the mMaxZoom to set
  */
 public void setMaxZoom(int maxZoom) {
  mMaxZoom = maxZoom;
 }

 /**
     * Get the Centre of the Coverflow
     * @return The centre of this Coverflow.
     */
    private int getCenterOfCoverflow() {
        return (getWidth() - getPaddingLeft() - getPaddingRight()) / 2 + getPaddingLeft();
    }

    /**
     * Get the Centre of the View
     * @return The centre of the given view.
     */
    private static int getCenterOfView(View view) {
        return view.getLeft() + view.getWidth() / 2;
    }  
    /**
  * {@inheritDoc}
  *
  * @see #setStaticTransformationsEnabled(boolean) 
  */ 
    protected boolean getChildStaticTransformation(View child, Transformation t) {

  final int childCenter = getCenterOfView(child);
  final int childWidth = child.getWidth() ;
  int rotationAngle = 0;

  t.clear();
  t.setTransformationType(Transformation.TYPE_MATRIX);

        if (childCenter == mCoveflowCenter) {
            //PARCHE!!! 4.1
            if (Build.VERSION.SDK_INT > Build.VERSION_CODES.ICE_CREAM_SANDWICH_MR1){

            } else {
                transformImageBitmap((ImageView) child, t, 0);
            }

        } else {  

            rotationAngle = (int) (((float) (mCoveflowCenter - childCenter)/ childWidth) *  mMaxRotationAngle);
            if (Math.abs(rotationAngle) > mMaxRotationAngle) {
             rotationAngle = (rotationAngle < 0) ? -mMaxRotationAngle : mMaxRotationAngle;   
            }
            //PARCHE!!! 4.1
            if (Build.VERSION.SDK_INT > Build.VERSION_CODES.ICE_CREAM_SANDWICH_MR1){
                //no apliquem transformacio.
            } else {
                transformImageBitmap((ImageView) child, t, rotationAngle); 
            }    
        }    

  return true;
 }

 /**
  * This is called during layout when the size of this view has changed. If
  * you were just added to the view hierarchy, you're called with the old
  * values of 0.
  *
  * @param w Current width of this view.
  * @param h Current height of this view.
  * @param oldw Old width of this view.
  * @param oldh Old height of this view.
     */
     protected void onSizeChanged(int w, int h, int oldw, int oldh) {
      mCoveflowCenter = getCenterOfCoverflow();
      super.onSizeChanged(w, h, oldw, oldh);
     }

     /**
      * Transform the Image Bitmap by the Angle passed 
      * 
      * @param imageView ImageView the ImageView whose bitmap we want to rotate
      * @param t transformation 
      * @param rotationAngle the Angle by which to rotate the Bitmap
      */
     private void transformImageBitmap(ImageView child, Transformation t, int rotationAngle) {            
      mCamera.save();
      final Matrix imageMatrix = t.getMatrix();;
      final int imageHeight = child.getLayoutParams().height;
      final int imageWidth = child.getLayoutParams().width;
      final int rotation = Math.abs(rotationAngle);

      mCamera.translate(0.0f, 0.0f, 100.0f);

      //As the angle of the view gets less, zoom in     
      if ( rotation < mMaxRotationAngle ) {
       float zoomAmount = (float) (mMaxZoom +  (rotation * 2.9));
       mCamera.translate(0.0f, 0.0f, zoomAmount);          
      } 

      mCamera.rotateY(rotationAngle);
      mCamera.getMatrix(imageMatrix);               
      imageMatrix.preTranslate(-(imageWidth/2), -(imageHeight/2)); 
      imageMatrix.postTranslate((imageWidth/2), (imageHeight/2));
      mCamera.restore();
 }
} 
```

但是这段代码，在 4.0 设备（如 4.1 或 4.2）之后不再运行良好。

我做了一些调试，所以我修改了这部分：

```
//As the angle of the view gets less, zoom in     
  if ( rotation < mMaxRotationAngle ) {
      Log.d("sergi",""+rotation);
   float zoomAmount = (float) (mMaxZoom +  (rotation * 2.9));
   mCamera.translate(0.0f, 0.0f, zoomAmount);          
  } 
```

这会在 4.0.4 设备上返回，同时从右向左滑动一张图像：

```
03-20 11:11:43.145: D/debugging(15987): 1
03-20 11:11:43.160: D/debugging(15987): 54
03-20 11:11:43.160: D/debugging(15987): 59
03-20 11:11:43.160: D/debugging(15987): 2
03-20 11:11:43.176: D/debugging(15987): 53
03-20 11:11:43.176: D/debugging(15987): 3
03-20 11:11:43.192: D/debugging(15987): 52
03-20 11:11:43.192: D/debugging(15987): 4
03-20 11:11:43.207: D/debugging(15987): 51
03-20 11:11:43.207: D/debugging(15987): 5
03-20 11:11:43.223: D/debugging(15987): 50
03-20 11:11:43.223: D/debugging(15987): 6
03-20 11:11:43.239: D/debugging(15987): 48
03-20 11:11:43.239: D/debugging(15987): 8
03-20 11:11:43.254: D/debugging(15987): 47
03-20 11:11:43.254: D/debugging(15987): 9 
```

在 4.1 设备上它返回：

```
03-20 11:11:49.239: D/debugging(15987): 35
03-20 11:11:49.254: D/debugging(15987): 35 
```

如您所见，基本上正在发生的事情是，相同的方法在两个不同的 api 之间没有以相同的方式使用。

如您所见，CoverFlow 扩展了已弃用但未删除的 Gallery，所以我不明白有什么区别。如果我们能找到解决方法，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T07:45:27.950

也许这会有所帮助：

```
protected boolean getChildStaticTransformation(View child, Transformation t)
{
              .....

    if (Build.VERSION.SDK_INT >= 16) child.invalidate();

    return true;
} 
```

这将使孩子无效并使其应用动画。

# grails - 在 grails 中指定候选键？

> ID：15521122
> 
> 赞同：0
> 
> 时间：2013-03-20T10:35:29.700
> 
> 标签：grails, grails-orm

我如何将“名称”指定为主键...通过域类 groovy 文件指定..我在 fedora 中作为操作系统和终端（不使用 ggts 或任何工具）并使用数据库作为 MySQL

```
class Department {

    String name
    String description
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:06:30.807

要更改哪个字段是您的主键，您可以使用`id`映射条目，如下所示：

```
class Department {
    String name

    static mapping = {
        id name: 'name', generator: 'assigned'
    }
} 
```

[您可以在Grails 文档](http://grails.org/doc/latest/ref/Database%20Mapping/id.html)中阅读有关 id 条目选项的更多详细信息。

# c# - 我如何继续将数据添加到数组中以显示在 xamarin for android 的列表视图中

> ID：15521129
> 
> 赞同：0
> 
> 时间：2013-03-20T10:35:51.570
> 
> 标签：c#, android, arrays, android-arrayadapter, xamarin.android

到目前为止，我有这个：

```
btnAddContact.Click += delegate {
            String[] nameList = new string[]{nameText.Text, ipText.Text};

            var myAdapter = new ArrayAdapter(this, Resource.Layout.TextViewItem, nameList);
            contactView.Adapter = myAdapter;
            myAdapter.NotifyDataSetChanged();
            nameText.Text = "";
            }; 
```

两个 EditText 字段，一个按钮和一个 ListView - 当我将数据添加到两个文本字段并单击按钮时，它会将数据添加到数组中，然后将其显示在 ListView 中。除非我尝试向数组中添加另一个值通过文本字段，它只会更改已经输入的内容..

我该怎么做才能不断添加形成列表的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:02:58.487

我自己想出来的。其他人告诉我，这只能通过自定义适配器来实现，所以它可能对其他人有用。

创建了一个公共数组

```
public ArrayList nameList = new ArrayList (); 
```

然后单击按钮，分配添加到数组代码。

```
btnAddContact.Click += delegate {
            nameList.Add(nameText.Text + " " + ipText.Text);
            var myAdapter = new ArrayAdapter(this, Resource.Layout.TextViewItem, nameList);
            contactView.Adapter = myAdapter;
            myAdapter.NotifyDataSetChanged();
            nameText.Text = "";
            ipText.Text = "";
            }; 
```

这将名称和 IP 地址放在同一行，中间有一个空格，因此易于阅读。

# css - Google warning: Resource interpreted as Font but transferred with MIME type application/octet-stream

> ID：15521130
> 
> 赞同：68
> 
> 时间：2013-03-20T10:35:54.613
> 
> 标签：css, font-face

I have a warning in Google for my font-face:

**Resource interpreted as Font but transferred with MIME type application/octet-stream: ".../Content/Fonts/iconFont.ttf".**

It works even if I have this warning but I prefer avoid this warning.

Here is my declaration:

```
@font-face {
  font-family: 'iconFont';
     src: url('../Fonts/iconFont.eot?#iefix') format('embedded-opentype'), 
     url('../Fonts/iconFont.svg#iconFont') format('image/svg+xml'), 
     url('../Fonts/iconFont.woff') format('font/x-woff'), 
     url('../Fonts/iconFont.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
} 
```

I already search on other posts but no luck so far.

Please note that my server is IIS from Microsoft.

Any idea how can I avoid this warning?

Thanks.

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2013-03-20T11:27:47.703

You need to add the following types to an .htaccess/IIS:

```
AddType application/vnd.ms-fontobject .eot
AddType font/ttf .ttf
AddType font/otf .otf
AddType application/font-woff .woff 
```

**Updated .woff type from:**

```
AddType application/x-font-woff .woff 
```

(Thanks to @renadeen in comments below for pointing this out.)

Check out my answer to a similar question here: [Font Face not loaded](https://stackoverflow.com/questions/14287465/font-face-not-loaded/14287894#14287894)

Taken from here: [font-face problem in chrome](https://stackoverflow.com/questions/4051826/font-face-problem-in-chrome).

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2013-04-11T08:16:24.463

Thanks for the above answer @97ldave, you can add these types to your IIS webServer configuration section if you'd rather not add them directly to your MIME types in your IIS setup. The following shows an example of adding just the .woff type that was missing from our configuration. This fixed the issues with the fonts not appearing in the latest version of Safari (6.0.3) on my iMac.

```
<system.webServer>
<staticContent>
  <remove fileExtension=".woff" />
  <mimeMap fileExtension=".woff" mimeType="application/x-font-woff" />
</staticContent>
</system.webServer> 
```

Thanks to Jon Samwell (my colleague) for finding this out.

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2013-05-09T19:33:33.670

For Nginx: (Path: /etc/nginx/mime.types)

```
font/ttf                         ttf;
font/otf                         otf;
application/x-font-woff          woff; 
```

You dont need `application/vnd.ms-fontobject eot;` because it exists already.

After that restart Nginx: `service nginx restart`

Done.

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2013-05-13T07:24:07.030

another approach on here: [http://zduck.com/2013/google-chrome-and-woff-font-mime-type-warnings/](http://zduck.com/2013/google-chrome-and-woff-font-mime-type-warnings/)

use below settings on your web.config:

```
<system.webServer>
<staticContent>
  <mimeMap fileExtension=".woff" mimeType="application/font-woff"/>
</staticContent>
</system.webServer> 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2013-06-27T12:01:29.003

Correct MIME types for fonts are:

```
application/font-ttf              ttf;
application/font-otf              otf;
application/font-woff             woff; 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-11-25T07:33:29.470

If you run a server with nodeJS, this is a nice module to map your mime types

[https://github.com/broofa/node-mime](https://github.com/broofa/node-mime)

```
var mime = require('mime');

mime.lookup('/path/to/file.txt');         // => 'text/plain'
mime.lookup('file.txt');                  // => 'text/plain'
mime.lookup('.TXT');                      // => 'text/plain'
mime.lookup('htm');                       // => 'text/html'

mime.extension('text/html');                 // => 'html'
mime.extension('application/octet-stream');  // => 'bin' 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-04-05T19:48:53.610

Thanks to @the-senator and @97ldave for their answers

for me the error completely disappear just after adding these lines to the web.config

```
<system.webServer>
<staticContent>
      <remove fileExtension=".woff" />
      <mimeMap fileExtension=".woff" mimeType="application/x-font" />
      <remove fileExtension=".woff2" />
      <mimeMap fileExtension=".woff2" mimeType="application/x-font" />
    </staticContent>
</system.webServer> 
```

# php - 使用 php 对选择进行搜索过滤

> ID：15521131
> 
> 赞同：1
> 
> 时间：2013-03-20T10:35:58.340
> 
> 标签：php, html, mysql, sql, select

我似乎无法找到正确的方法来制作一个将（正确的词？）扩展的 WHERE 语句推送到 SELECT 查询的搜索过滤函数。

我有这段代码显示广告列表：

```
 $where = isset($catid) ? ' AND ad.category = '.$catid.'' : '';

   $row = $db->dbh->query('SELECT ad.*, 
   (SELECT img.image FROM '.$config->db_prefix.'_images AS img 
   WHERE img.aid = ad.aid LIMIT 1) AS img 
   FROM '.$config->db_prefix.'_adverts ad 
   WHERE ad.approved = 1 '.$where.''); 
```

假设我想查看特定类别 fx TV (id 5) 中的所有广告，然后在该类别中显示给定价格范围 (100 - 800) 内的所有广告。我不确定如何扩展我的 WHERE 语句来处理这个问题，以及我应该如何从我的 HTML 中做到这一点。希望我的问题可以理解。

我在广告表中的数据库结构是这样的：

```
aid             int(11)     
fid             int(11)
ad_type         int(11)
title           varchar(255)
text            tinytext
price           decimal(10,2) 
category        int(11)
friends_allow   int(11)
cr_date         int(11)         
expiry_date     int(11)
approved        int(1)
ip              varchar(255)
email           varchar(255) 
zip_for_pickup  int(11) 
views           int(11) 
```

解决方案

```
$filters = array();

if(!empty($post_fields['cat']) && $post_fields["cat"] != "all") {
        $category = $post_fields['cat'];
        $filters[] = '(category = ' . $category .')';
    }

if(!empty($post_fields['search_field'])) {
    $title_and_text = $post_fields['search_field'];
    $filters[] = '(title LIKE "%' . $title_and_text  .'%" OR text LIKE "%' . $title_and_text .'%")';
}

if(!empty($post_fields['price_min_field'])) {
    if(!empty($post_fields['price_max_field'])) {
        $filters[] = '(price >= '. $post_fields['price_min_field'].' AND price <= '. $post_fields['price_max_field'] .')';
    } else {
        $filters[] = '(price >= '. $post_fields['price_min_field'].')';
    }      
}

if(!empty($post_fields['distance'])) {
    $adverts = new Adverts();
    $filters[] = '('. $adverts->find_geo_location($post_fields["userzip"], $post_fields["distance"]) .')';
}

$filter =  implode(' AND ', $filters); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:15:42.013

在 HTML 中放置 2 个下拉菜单 Price From 和 Price To。在 PHP 端获取选中的值。基于该使用连接。用选定的值替换 100 和 800。

```
 $where = isset($catid) ? ' AND ad.category = '.$catid.'' : '';

 if ($pricefilter) {
   $where .= 'AND ad.price>100 AND ad.price < 800';
 } 
```

# php - 500 服务器错误而不是显示解析错误

> ID：15521133
> 
> 赞同：0
> 
> 时间：2013-03-20T10:36:00.797
> 
> 标签：php, parse-error

当我的编码中出现解析错误时，我会收到 500 错误消息。

> HTTP 错误 500（内部服务器错误）：服务器尝试完成请求时遇到了意外情况。

托管服务：**bluehost**。

我想查看错误而不是 500 服务器错误。

另外，我正在使用 WordPress 来运行我的网站。

我们怎么能做到这一点？

我也阅读了以下文章，但没有得到任何东西。 [如何让 PHP 显示错误而不是给我 500 Internal Server Error](https://stackoverflow.com/questions/2687730/how-can-i-make-php-display-the-error-instead-of-giving-me-500-internal-server-er) [PHP - 500 而不是错误](https://stackoverflow.com/questions/7301573/php-500-instead-of-error)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:05:46.643

检查`Error Log`cPanel 菜单中的 。它将在那里包含所有详细信息。

# powershell - 无法从 PowerShell 调用 setspn

> ID：15521138
> 
> 赞同：1
> 
> 时间：2013-03-20T10:36:24.717
> 
> 标签：powershell, spn

我需要从 PowerShell 调用 Setspn.exe。但任何尝试都失败了：

```
setspn;
Setspn;
invoke-expression "setspn";
start-process setspn; 
```

但我可以启动 cmd，并且可以从命令行调用 setspn。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-28T11:41:41.183

您可以使用调用运算符`&`

```
& 'C:\Windows\System32\setspn.exe' 
```

如果要在 setspn 调用中添加参数，可以将它们放在一个数组中并将其添加到调用中

```
$param = ('-L','SANDY.sqladmin.lan')
& 'C:\Windows\System32\setspn.exe' $param 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T21:48:17.263

If you're having trouble with PowerShell open it up in CMD.

```
PS C:\> cmd /c 'setspn' 
```

Remember CMD only returns text not objects.

# python - 在 python 编译中包含 bash 脚本

> ID：15521140
> 
> 赞同：0
> 
> 时间：2013-03-20T10:36:29.607
> 
> 标签：python, bash

我有几个在 Python 程序中使用的 bash 脚本。当前的解决方案是浏览到 GUI 中的文件，然后像这样运行脚本（`pathToScript`是脚本路径的字符串）：

```
INPUT = [pathToScript, input1, input2, input3, input4, input5, input6, input7, input8, input9, input10]
subprocess.call(INPUT) 
```

为了避免总是浏览脚本或硬编码路径，我正在寻找一种解决方案，以某种方式将 bash 脚本包含在已编译的 Python 程序中，然后在程序中运行它。这可能吗？如果可以避免的话，我宁愿不将 bash 脚本重写为 Python。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T10:39:51.980

您始终可以将 bash 脚本与程序的其余部分捆绑在一起（就像我怀疑您已经在做的那样），并在运行时重建这些脚本的路径。

从模块本身中获取任何 python 模块的位置很容易，然后从那里创建 bash 脚本的路径：

```
import os.path

LOCATION = os.path.dirname(os.path.abspath(__file__))
pathToScript = os.path.join(LOCATION, 'bashscript.sh') 
```

然后`pathToScript`将是`bashscript.sh`与当前 Python 模块位于同一目录中的文件的绝对路径。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-20T10:39:33.140

您可以将每个 bash 脚本的实际文本放在一个多行字符串变量中，然后将它们中的每一个写入一个文件。您将知道在哪里编写文件，因此您可以调用脚本。

确保设置脚本的执行权限，或者明确插入 bash 的路径作为第一项`INPUT`

# android - 一个视图上有两个单独的屏幕

> ID：15521144
> 
> 赞同：1
> 
> 时间：2013-03-20T10:36:40.413
> 
> 标签：android, graphics

我曾经在 android 中创建具有基本布局的 android 应用程序，例如线性布局。我是一名从事 android 项目的学生，现在我的老师希望我创建一个具有不同图形界面的应用程序，所以我有了一个想法，但我不知道我该怎么做。

我想要 2 个单独的屏幕（我们称之为 Menu1 和 Menu2），Menu2 有一些按钮，当我点击这些按钮时，Menu2 将变为 submenu1，或 submenu2，submenu3。但是在Menu2 的过渡过程中，Menu1 仍然存在。有什么办法可以做到吗？如果您能给我一个教程或类似内容的链接，我将不胜感激。

我试着在下图中解释我的想法。

这是图片的[链接](https://docs.google.com/file/d/0B3zhlBRXeFixRG84LTdxRWtBbXc/edit?usp=sharing)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T10:40:27.973

是的，您可以使用 Layoutmanager 来执行此操作，请查看...

```
protected void onCreate(Bundle savedInstanceState) {
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    super.onCreate(savedInstanceState);
    LinearLayout layoutmanager = new LinearLayout(this);
    layoutmanager.setOrientation(LinearLayout.HORIZONTAL);
    setContentView(layoutmanager);
    LayoutInflater inf = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    RelativeLayout layleft = (RelativeLayout)inf.inflate(R.layout.firstxml,null);
    RelativeLayout layright = (RelativeLayout)inf.inflate(R.layout.secondxml,null);
    RelativeLayout.LayoutParams relParam = new RelativeLayout.LayoutParams(
            RelativeLayout.LayoutParams.MATCH_PARENT,
            RelativeLayout.LayoutParams.WRAP_CONTENT);
        layoutmanager.addView(layright, 250, 450);
        layoutmanager.addView(layleft, relParam); 
```

您可以使用 LinearLayout Vertical 而不是 Horizo​​ntal 并确保您使用的两个 xml 都必须只有相对布局..我希望它能解决您的问题

# java - 连接到 PC 以从 Android 设备查看共享文件夹

> ID：15521158
> 
> 赞同：0
> 
> 时间：2013-03-20T10:37:07.620
> 
> 标签：java, android, jcifs

我正在为 Android 开发一个 samba 客户端。给定一个 IP 地址，它应该连接到它并浏览共享文件夹。

为此，我使用[JCIFS](http://jcifs.samba.org/)。我将 jar 放到我的 Android 项目中，并添加了以下代码以连接到 PC 并获取文件列表：

```
private void connectToPC() throws IOException {
    String ip = "x.x.x.x";
    String user = Constants.username + ":" + Constants.password;
    String url = "smb://" + ip;

    NtlmPasswordAuthentication auth = new NtlmPasswordAuthentication(user);
    SmbFile root= new SmbFile(url, auth);

    String[] files = root.list();
    for (String fileName : files) {
        Log.d("GREC", "File: " + fileName);
    }
} 
```

我得到回报：**jcifs.smb.SmbAuthException: Logon failure: unknown user name or bad password。**

但是凭据是正确的。我还尝试使用来自 android 市场的另一个使用 JCIFS 的 samba 客户端，它成功连接到该 IP，所以显然我在这里做错了，但不知道特别是什么。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:33:15.257

最后我成功连接到PC。问题出在`NtlmPasswordAuthentication();`构造函数中。

所以，而不是这个：

```
String user = Constants.username + ":" + Constants.password;
NtlmPasswordAuthentication auth = new NtlmPasswordAuthentication(user); 
```

我改成这样：

```
NtlmPasswordAuthentication auth = new NtlmPasswordAuthentication("",
                    Constants.username, Constants.password); 
```

不知道为什么，可能是“:”特殊字符的原因，可能是Android的原因，但是将一个空的域名、用户名和密码分别传递给构造函数，解决了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-22T16:50:42.057

由于有些人在遇到 android 和 JCIFS 的类似问题时会谈到这个话题，所以这些是尝试使其工作时的其他常见问题：

*将 .jar 专门放在你的 android 项目的 /libs 文件夹中（不仅仅是通过“构建路径”）

*确保您的项目有互联网权限[我需要什么权限才能从 android 应用程序访问互联网？](https://stackoverflow.com/questions/2378607/what-permission-do-i-need-to-access-internet-from-an-android-application)

*还要确保您的 JCIFS 代码在与 UI 不同的线程中运行（换句话说，使用 AsyncTask 类）[如何在 android 中使用 AsyncTask 中的方法？](https://stackoverflow.com/questions/13667152/how-to-use-method-in-asynctask-in-android)

*代码：

```
 protected String doInBackground(String... params) {

          SmbFile[] domains;
           String username = USERNAME;
           String password = PASSWORD;
           NtlmPasswordAuthentication auth = new NtlmPasswordAuthentication("",
                username, password);

            try {
                SmbFile sm = new SmbFile(SMB_URL, auth);
                domains = sm.listFiles();
                for (int i = 0; i < domains.length; i++) {

                    SmbFile[] servers = domains[i].listFiles();
                    for (int j = 0; j < servers.length; j++) {
                       Log.w(" Files ", "\t"+servers[j]);
                    }
                }
            } catch (SmbException e) {
                e.printStackTrace();
            } catch (MalformedURLException e) {
                e.printStackTrace();
            }
            return "";
    } 
```

这些是我在尝试在 android 上运行 JCIFS 时遇到的问题，希望对任何人有所帮助，问候。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-29T08:58:47.673

也许我也可以帮助其他人。

我遇到的问题是我使用 thread.run() 而不是 thread.start() 在 Runnable 中执行 Smb-Code。我花了很多时间寻找答案，但没有解决我的问题。

但后来一位朋友向我解释了 thread.run() 和 thread.start() 之间的区别：

run()：像普通方法一样执行 Methode（例如 Runnable 的 run() Methode）（同步）

start()：在自己的任务中使用 Runnable 启动线程（异步）

对于 Smb，您需要一个异步线程。因此，您需要调用 thread.start()！

也许有人犯了和我一样的错误。

# powershell - 使用 Powershell ISE 隐藏窗口？

> ID：15521160
> 
> 赞同：1
> 
> 时间：2013-03-20T10:37:21.550
> 
> 标签：powershell, window, hide

我想使用 Windows Powershell 脚本来隐藏 Windows 7 任务栏或开始按钮。在 Delphi 中，它会像这样工作，例如：“ShowWindow(FindWindow('windowhandle'), SW_HIDE);”。在 PowerShell 中这样的事情可能吗？我已经找到了模块，但是有没有办法直接做到这一点？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:44:44.437

我不知道你是否“直接”计算这个，但你可以从 PowerShell 调用 WinApi。

```
$definition = @"    
      [DllImport("user32.dll")]
      static extern IntPtr FindWindow(string lpClassName, string lpWindowName);

      [DllImport("user32.dll")]
      [return: MarshalAs(UnmanagedType.Bool)]
      static extern bool ShowWindow(IntPtr hWnd, int nCmdShow);

      public static void Show(string wClass, string wName)
      {
         IntPtr hwnd = FindWindow(wClass, wName);
         if ((int)hwnd > 0)
            ShowWindow(hwnd, 1);
      }

      public static void Hide(string wClass, string wName)
      {
         IntPtr hwnd = FindWindow(wClass, wName);
         if ((int)hwnd > 0)
            ShowWindow(hwnd, 0);
      }
"@

add-type -MemberDefinition $definition -Namespace my -Name WinApi

[my.WinApi]::Hide('Notepad', 'Untitled - Notepad') 
```

我无法让它与 Windows 开始按钮一起工作（它只是禁用），但它适用于普通窗口。

# web-services - 将位置/地点映射到事件的 API？

> ID：15521168
> 
> 赞同：1
> 
> 时间：2013-03-20T10:37:39.597
> 
> 标签：web-services, api, rest, geolocation

是否有任何允许将位置（纬度/经度）映射到正在进行的事件的 REST 服务？理想情况下，它将是一个以输入为输入的 API

*   地点/地点
*   约会时间

并在该地点/时间输出正在进行的事件。

就像是：

```
40.829527,-73.926722 ---> Google Places API: Yankee Stadium
   add datetime information ---> Event service: U2 Concert 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:30:45.363

我不确定是否有人已经构建了它，但您可以使用 Foursquare API 轻松构建它：

首先使用搜索场地根据纬度/经度输入返回场地。

[https://developer.foursquare.com/docs/venues/search](https://developer.foursquare.com/docs/venues/search)

一旦你有一堆附近场地的 VENUE_ID，你就可以查询这些场地的活动方面。

[https://developer.foursquare.com/docs/venues/events](https://developer.foursquare.com/docs/venues/events)

# asp.net-mvc - .NET 4.5 System.Web.Optimization 在 CDN 上的捆绑使用

> ID：15521169
> 
> 赞同：0
> 
> 时间：2013-03-20T10:37:44.183
> 
> 标签：asp.net-mvc, .net-4.5, cdn, minify, bundling-and-minification

我正在构建一个 CDN，并在那里寻找一种利用 .NET 缩小/捆绑机制（System.Web.Optimization）的方法。

问题是如何从 MVC 控制器返回缩小包。

注意：我希望使用本机 .NET 4.5 功能，我不想要第 3 方解决方案。我只是在寻找在 CDN 端利用它的方法。不在客户端应用程序端。

附加问题：如果上述可能，请解释我如何利用缓存，这通常是通过向请求添加唯一的查询字符串参数来实现的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:03:27.703

asp.net 捆绑和缩小在内部使用[WebGrease](http://webgrease.codeplex.com/)。

将其从 nuget 中取出并添加，然后开始使用它。看起来 codeplex 站点上没有任何示例，因此您需要查看源代码或下载/反编译 asp.net 源代码以查看它们如何使用它。

对于查询字符串参数，我认为这主要是为了防止/帮助客户端缓存它不一定与您的服务器端有任何关系。

你还没有说你如何从你的自定义 CDN 提供 JS 文件，所以我对缓存没有多大帮助，我强烈建议不要通过 mvc 提供它们，会有很多额外的事情发生在如果您所做的只是提供静态文件，那么您并不真正需要的管道。

也许看看有一些进程来解析文件并将它们粘贴在 IIS 可以直接服务而无需委托给 asp.net 的某个目录中

# mysql - 检索 MySQL 中特定日期范围内发生的所有记录

> ID：15521175
> 
> 赞同：2
> 
> 时间：2013-03-20T10:37:56.657
> 
> 标签：mysql

我有一个包含多个合同的表，每个合同都有一个开始日期和一个结束日期，如下所示：

```
|  ID   |   Contract Name   |  Start Date  |  End Date  |
|-------|-------------------|--------------|------------|
|   1   |  Joe Bloggs       |  2012-01-01  | 2012-02-05 |
|   2   |  John Smiths      |  2012-02-01  | 2012-02-20 |
|   3   |  Johnny Briggs    |  2012-03-01  | 2012-03-20 | 
```

我要做的是构建一个查询，该查询将检索在特定时间段之间处于活动状态的合同。因此，如果我有开始日期`2012-02-10`和结束日期，`2012-03-21`我应该显示以下合同：

```
|  ID   |   Contract Name   |  Start Date  |  End Date  |
|-------|-------------------|--------------|------------|
|   2   |  John Smiths      |  2012-02-01  | 2012-02-20 |
|   3   |  Johnny Briggs    |  2012-03-01  | 2012-03-20 | 
```

但我的问题是我不知道如何构建查询来执行此操作。这是我到目前为止所得到的：

```
SELECT *
FROM contracts c
WHERE c.startdate BETWEEN '2012-02-10'
    AND '2012-03-21'
    AND c.enddate BETWEEN '2012-02-10'
    AND '2012-03-21' 
```

但这不起作用，不会检索任何记录。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T14:03:16.123

```
SELECT * FROM contracts
                WHERE (START_DATE between '2012-03-01' AND '2013-03-21')
                OR (END_DATE between '2012-03-01' AND '2013-03-21')
                OR (START_DATE<= '2012-03-01' AND END_DATE >='2013-03-21'); 
```

[检查 SQL 小提琴](http://sqlfiddle.com/#!2/f4e1a/9)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T10:59:44.563

呃，时间是线性的对吧？

```
SELECT * 
FROM contracts 
WHERE end_date >= '2012-02-10' 
AND start_date <= '2012-03-21'; 
```

让我举例说明...

```
 A-------------B
<------->
       <------>
           <----------->
<----------------------> 
```

在上述所有情况下，开始日期都小于 B。结束日期大于 A。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T10:42:29.593

对我来说，一个好的要求将是

```
SELECT * FROM contracts c WHERE c.startdate >'2012-02-10' AND c.enddate < '2012-03-21' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T10:49:10.800

应该是这样的

```
SELECT *
FROM contracts c
WHERE c.startdate >= '2012-02-10'
    AND c.enddate <= '2012-03-21' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-21T11:59:27.090

```
 SELECT * FROM contracts
    WHERE 
    (START_DATE between '2012-03-01' AND '2013-03-21')
    OR (END_DATE between '2012-03-01' AND '2013-03-21')
    OR (START_DATE<= '2012-03-01' AND END_DATE >='2013-03-21'); 
```

解释：

```
(START_DATE between '2012-03-01' AND '2013-03-21') 
```

: 在输入日期之间开始的间隔记录。可能包括间隔的第一部分或全部。

```
(END_DATE between '2012-03-01' AND '2013-03-21') 
```

：在输入日期之间结束的时间间隔。可能包括间隔的最后一部分或全部。

```
(START_DATE<= '2012-03-01' AND END_DATE >='2013-03-21') 
```

: 输入日期仅包含在一个时间间隔内

# asp.net - 根据在文本框中输入的下拉列表、起始日期和结束日期在网格视图中显示记录

> ID：15521176
> 
> 赞同：0
> 
> 时间：2013-03-20T10:37:56.503
> 
> 标签：asp.net, database, gridview, xmltable

当在文本框中输入数据时，我需要根据我的下拉列表、fromdate 和 todate 在网格视图中显示我的数据。我怎样才能做到这一点？到目前为止，我所做的是创建了两个页面。在第一页我有一个下拉列表和一个表格。当我从下拉列表中选择值时，将出现所选值的表单，用户可以在其中输入详细信息并提交该表单。提交后将数据存储在数据库中。在第二页中，我有一个网格视图，其中可以看到存储的值、下拉列表、从日期到日期文本框，现在我想要的是根据我的下拉选择、fromdate 和 todate 在网格视图中显示记录。

**第二种形式的代码**：

```
<asp:DropDownList ID="ddlPortal" runat="server" AutoPostBack="True" 
       onselectedindexchanged="ddlPortal_SelectedIndexChanged">
       <asp:ListItem>TRAVELONG</asp:ListItem>
       <asp:ListItem>ONETRAVEL</asp:ListItem>
       <asp:ListItem>.UK-BSP</asp:ListItem>
       <asp:ListItem>.CA-YYZ</asp:ListItem>
       <asp:ListItem>.CA-YVR</asp:ListItem>
       <asp:ListItem>Partial MCO Refund</asp:ListItem>
   </asp:DropDownList>
   <asp:Label ID="lbFrom" Text="From" runat="server" />&nbsp;<asp:TextBox ID="tbFrom" runat="server" />
    &nbsp;<asp:Label ID="lblto" Text="To" runat="server" />&nbsp;<asp:TextBox ID="tbTo" runat="server" />
    &nbsp;<asp:Button ID="btnSearch" runat="server" Text="Search" 
    onclick="btnSearch_Click" /> 
```

**网格视图详细信息**：

```
 <asp:GridView ID="GridView1" runat="server" CellPadding="4" ForeColor="#333333" 
        GridLines="None" onrowcommand="GridView1_RowCommand" 
        AutoGenerateColumns="False">
        <Columns>
       <asp:TemplateField HeaderText="Query">
            <itemtemplate>
            <asp:LinkButton CommandName="cmdBind"  runat="server"  Text='<%#Eval("ID")%>' ID="ID" ToolTip='<%#Eval("ID")%>'>LinkButton
            </asp:LinkButton>                                                                   
            </itemtemplate>
            </asp:TemplateField>
       <asp:BoundField DataField="Portal" HeaderText="Portal" />
        <asp:BoundField DataField="TID" HeaderText="TID" />
        <asp:BoundField DataField="PNR" HeaderText="PNR" />
        <asp:BoundField DataField="TicketNumber" HeaderText="Ticket Number" />
        <asp:BoundField DataField="ESACCode" HeaderText="ESACCode" />
        <asp:BoundField DataField="WaiverCode" HeaderText="WaiverCode" />
        <asp:BoundField DataField="Remarks" HeaderText="Remarks" />
        <asp:BoundField DataField="UnusedTicketAmount" HeaderText="UnusedTicketAmount" />
        <asp:BoundField DataField="ddlUnusedAmount" HeaderText="ddlUnusedAmount" />
        <asp:BoundField DataField="AirlinePenality" HeaderText="AirlinePenality" />
        <asp:BoundField DataField="ddlAirlinePenality" HeaderText="ddlAirlinePenality" />
        <asp:BoundField DataField="NetRefundProcess" HeaderText="NetRefundProcess" />
        <asp:BoundField DataField="ddlNetRefundProcess" HeaderText="ddlNetRefundProcess" />
        <asp:BoundField DataField="RefundableCommission" HeaderText="RefundableCommission" />
        <asp:BoundField DataField="ddlRefundableCommission" HeaderText="ddlRefundableCommission" />
        <asp:BoundField DataField="CouponRefunded" HeaderText="CouponRefunded" />
        <asp:BoundField DataField="RefundType" HeaderText="RefundType" />
    </Columns> 
```

我想在按钮的单击事件上编写代码，但我不知道如何。你能帮我解决这个问题吗？

.cs 文件：

```
protected void btnSearch_Click(object sender, EventArgs e)
{

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:22:34.797

如果您使用 DataTable 来绑定您的 GridView，那么您可以过滤数据并再次绑定您的 GridView。

您可以使用：[DataView.RowFilter 属性](http://msdn.microsoft.com/en-us/library/system.data.dataview.rowfilter%28v=vs.100%29.aspx)来过滤数据。

例如。：

```
DataTable dt= GetData();
DataView dv = dt.DefaultView;
dv.RowFilter = "Portal= '" + ddlPortal.SelectedValue.Trim() + "'" 
GridView1.DataSource=dv;
GridView1.DataBind(); 
```

此外，您可以使用**LINQ**过滤数据：

```
DataTable dt= GetData();
EnumerableRowCollection<DataRow> query =
    from row in dt.AsEnumerable()
    where row.Field<String>("Portal") == ddlPortal.SelectedValue.Trim()
    select row;

DataView dv = query.AsDataView();
GridView1.DataSource=dv;
GridView1.DataBind(); 
```

# windows - 部署 QML 应用程序

> ID：15521178
> 
> 赞同：1
> 
> 时间：2013-03-20T10:38:00.270
> 
> 标签：windows, qt, deployment, qml

我制作了一个必须在 Windows 上部署的小 QML 应用程序。

我在发布模式下编译它。

我不习惯在 Windows 上部署，并且在我的文件旁边添加了很多 dll 之后（感谢依赖 walker），它没有启动。

我添加了另一个（显然）不需要的 dll，应用程序终于启动了。

但它会启动一个空窗口。

我做错什么了 ？我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T11:16:02.170

问题是您的应用程序必须附带 QML 文件和所有需要的图标。最简单的解决方案是将所有 qml 和图标文件放在 Qt 资源文件 (.qrc) 中，然后简单地执行一个 C++ 启动器，从 qrc 加载 QQuickView：

```
#include <QGuiApplication>
#include <QQuickView>

int main (int argc, char ** argv) {
    QGuiApplication app (argc, argv);
    QQuickView view     (QUrl("qrc:/main.qml"));
    view.setTitle       (QObject::tr("My App"));
    view.setResizeMode  (QQuickView::SizeRootObjectToView);
    view.showNormal     ();
    return app.exec     ();
} 
```

然后编译整个东西，你的 QML、SVG、PNG 文件将被编译到 C++ 程序中，所以你只需要发布二进制文件而不关心资源！

# unit-testing - 在 Zend Framework 2 中应该如何通过重定向来测试控制器动作？

> ID：15521192
> 
> 赞同：1
> 
> 时间：2013-03-20T10:38:32.217
> 
> 标签：unit-testing, redirect, controller, phpunit, zend-framework2

控制器如何执行以下操作：

```
public function redirectFromAction() {
    // route "my-route" is mapped to the action redirectToAction
    return $this->redirect()->toRoute('my-route');
}
public function redirectToAction() {
    return new ViewModel();
} 
```

用 PHPUnit 测试？可以和应该测试什么？哪个断言？[使用请求重定向](http://framework.zend.com/manual/2.1/en/modules/zend.mvc.plugins.html#redirect-plugin)测试控制器动作有什么特别之处？

如果有人可以提供测试上述操作的示例，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T18:51:13.697

该文档可以帮助您： http: [//framework.zend.com/manual/2.1/en/tutorials/unittesting.html](http://framework.zend.com/manual/2.1/en/tutorials/unittesting.html)

我会测试这样的东西：

```
public function testRedirectAction()
{
    $this->dispatch('/redirect-form');
    $this->assertResponseStatusCode(301);
    $this->assertResponseHeaderContains('Location' , '/my-route');
} 
```

确保你扩展你的测试类`AbstractHttpControllerTestCase`

# mysql - Mysql 等效于 MS-Sql 服务器 IDENTITY 字段

> ID：15521194
> 
> 赞同：-1
> 
> 时间：2013-03-20T10:38:39.913
> 
> 标签：mysql

我有一个 sql-server 查询，我想在 mysql 上运行它（或创建一个等效的查询）。但目前我收到语法错误。任何人都可以帮我创建一个与下面提到的 sql-server 查询等效的 mysql 吗？

```
create table Emp(EmpName varchar(20) not null,keyword varchar(20) not null,
DOB datetime not null,Comments text(65535),EmpId int primary key IDENTITY(1,1)); 
```

以下是错误

```
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that 
corresponds to your MySQL server version for the right syntax to use near 'IDENTITY(1,1))' at line 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:41:39.397

您可以使用[自动增量字段](http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:42:11.130

它应该被定义为 auto_incremented 主键。例如：

```
CREATE TABLE Emp (
  EmpId     INT AUTO_INCREMENT,
  EmpName   VARCHAR(20) NOT NULL, 
  KEYWORD   VARCHAR(20) NOT NULL,
  DOB       DATETIME    NOT NULL,
  Comments  TEXT(65535),
  PRIMARY KEY (EmpId)
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T10:42:24.307

```
CREATE TABLE Emp (
  EmpId     INT AUTO_INCREMENT,
  EmpName   VARCHAR(20) NOT NULL,
  KEYWORD   VARCHAR(20) NOT NULL, 
  DOB       DATETIME    NOT NULL, 
  Comments  TEXT(65535),  PRIMARY KEY (EmpId)
); 
```

您可以使用 auto_increment 。默认情况下，它将增加 1。如果您想要任何其他增量，您可以指定您自己的增量。

# ruby - Jruby 获取所有可用内存并失败（通过 RVM 使用） - 如何修复它？

> ID：15521196
> 
> 赞同：1
> 
> 时间：2013-03-20T10:38:44.920
> 
> 标签：ruby, rvm, jruby

使用 jruby 时，即使是像`gem -v`失败这样的简单命令。最初，我收到此错误：

```
Error: Your application used more stack memory than the safety cap of 2048K.
Specify -J-Xss####k to increase it (#### = cap size in KB).
Specify -w for full StackOverflowError stack trace 
```

在阅读[了这个问题](https://stackoverflow.com/questions/13038820/jruby-1-7-0-will-not-install-bundler-given-plenty-of-memory)和链接的问题之后，我更新了我的 rvm，重新加载它，重新安装了 jruby 并导出`JRUBY_OPTS=-J-Xss32768k`（8192k 仍然因堆栈错误而失败）当前，`rvm -v`返回`rvm 1.18.21 (latest)`，`rvm current`返回`jruby-1.7.3`。`gem -v`和其他类似的调用不返回任何内容。他们启动一个 java 进程，该进程获取所有可用的 RAM（最多 7+ GB），运行 2-3 分钟，然后静默完成，没有任何影响。

我还能做些什么来解决这个问题吗？

当我切换到另一个 ruby​​ 时`ruby-head`，一切正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:03:30.143

这可能是因为旧的 RVM 有额外的代码来支持更旧的 JRuby，更新 RVM 并重新安装 JRuby：

```
rvm get head
rvm reinstall jruby 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:11:06.993

你运行的是什么操作系统？JAVA OPTS 环境变量设置为什么？在标准配置下，JRuby 消耗 7GB 听起来不太可能——在我见过的环境中，-J-Xmx 通常设置为 1024mb 之类的正常值，并且您必须显式覆盖它以向 JVM 分配更多内存。

尝试发出命令：

```
jruby -J-Xmx1024m -S gem env 
```

并在此处发布内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-08T20:10:17.540

运行最近通过 brew 安装的 MacOS 10.8.5 和 jruby 1.7.10，我得到：

```
jgem install mvp-0.0.8.gem --user-install
Error: Your application used more stack memory than the safety cap of 2048K.
Specify -J-Xss####k to increase it (#### = cap size in KB).
Specify -w for full StackOverflowError stack trace 
```

尽管许多帖子都说 StackOverflowError 是一个 rvm 问题，但上述内容似乎并未证实这一点。

当我运行这个时，我可以解决这个问题：

```
jruby -J-Xmx1024m -S gem install mvp-0.0.8.gem  --user-install
Fetching: highline-1.6.21.gem (100%)
WARNING:  You don't have /Users/davei/.gem/jruby/1.9/bin in your PATH,
      gem executables will not run.
Successfully installed highline-1.6.21
Fetching: mini_portile-0.5.2.gem (100%)
Successfully installed mini_portile-0.5.2
Fetching: nokogiri-1.6.1-java.gem (100%)
Successfully installed nokogiri-1.6.1-java
Fetching: builder-3.2.2.gem (100%)
Successfully installed builder-3.2.2
Successfully installed mvp-0.0.8
5 gems installed 
```

所以在我看来，jgem 接口有问题。顺便说一句，我使用 jgem 命令尝试了 JRUBY_OPTS=-J-Xss####k 的许多不同设置，但没有一个（甚至高达 1GB）起作用。错误消息是相同的，只是它们反映了新的“安全上限”大小。

# google-apps-script - 在单元格中显示最近修改的评论 - Google 电子表格

> ID：15521197
> 
> 赞同：1
> 
> 时间：2013-03-20T10:38:47.457
> 
> 标签：google-apps-script, google-sheets

我是这个谷歌脚本的新手，我一直在玩一个脚本，以便为每个更新的单元格和哪个用户显示一个评论框。

因此，例如，我在 A 列中有一个 Urls 列表，并且在 b、c、d、e、f 列中有各种任务。

任务完成后，我希望完成任务的人用简单的“是”（甚至是下拉选择/复选框）更新工作表。完成后，我希望创建/更新一条评论，说明更新该特定单元格的日期和用户。

我目前使用的脚本是这样的： -

```
function onEdit(e)

{ 
  // Get all information, Cell, Date, User

  var sheet = event.source.getActiveSheet();

  var cell = event.source.getActiveRange();

  var date = Utilities.formatDate(new Date(), "GMT", "dd-MM-yyyy");

  var user = Session.getActiveUser().getUserLoginId();

  //Write to Cell Comment

  cell.setComment(date + " User:" + user);

} 
```

我有两个问题： -

1.  这完全适合我，但是当我与其他人共享工作表时，评论框显示的是更新日期，而不是用户。
2.  当有人在已被脚本更新的单元格中覆盖时，评论 bos 不会更新以显示这一点。

您在这里的帮助将不胜感激......

如果您需要更多信息，请与我们联系。提前感谢任何希望帮助我的人...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:53:16.087

我使用相同的功能，它对我来说非常有用（我总是检索用户名）。您可能会遇到问题，因为您的电子表格可供匿名用户使用。

如果有人覆盖了一个单元格，更新评论是正常的，你可以做的是检索以前的评论并将其与新评论相加。这是我的代码：

```
function onEdit(event)
{
  var r = event.source.getActiveRange();
  var comment = r.getComment().replace("Last modified by: ","previously modified by");
  r.setComment("Last modified by: " +Session.getActiveUser().getEmail()+" on: "+(new Date())+comment);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T15:22:11.340

固定的！

我更改了脚本以显示 getEffectiveUser 而不是 getActiveUser ，嘿，它工作正常！！

:-)

# c# - 使用资源文件 (.resx) 时的性能开销

> ID：15521204
> 
> 赞同：16
> 
> 时间：2013-03-20T10:39:26.273
> 
> 标签：c#, winforms, resources, resx

请注意，我知道有关此主题的以下问题：

1.  [资源 (.resx) 文件是否存在任何性能问题或警告？](https://stackoverflow.com/questions/1278171/are-there-any-performance-issues-or-caveats-with-resource-resx-files)

2.  [字符串资源 (.resx) 属性是否保存在内存中？](https://stackoverflow.com/questions/9503887/are-string-resources-resx-properties-kept-in-memory)

等。但是，我在这些问题中没有找到任何令人满意的答案（它们不够具体）。

我也知道有关此主题的[MSDN](http://msdn.microsoft.com/en-us/library/1021kkz0(v=vs.71).aspx)页面，但这些似乎也忽略了有关使用资源文件的开销的技术信息。

* * *

我的困境是我们即将着手本地化一个相当大的 WinForms 应用程序。在这个阶段，我关心的是从嵌套循环中访问 .resx 文件中的资源的性能。目前，对于我们本地化的一小部分代码（列名、行标题等`DataGridView`），我们正在将相关类的全局变量中的资源兑现并使用它们。

**如何访问来自 .resx 的资源（它们是否在编译时包含在程序集中？）以及通过兑现这些资源和使用全局变量进行访问是否有性能优势？**

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-20T10:54:29.473

字符串资源缓存在内存中。查看生成的代码`"Resources.Designer.cs"`。

它使用 a [`System.Resources.ResourceManager`](http://msdn.microsoft.com/en-gb/library/system.resources.resourcemanager.aspx)，这会缓存字符串。

还要注意[这个 ResourceManager 构造函数](http://msdn.microsoft.com/en-us/library/yfsz7ac5.aspx)。它提到您可以更改缓存策略：

> 此构造函数使用系统提供的 ResourceSet 实现。要使用自定义资源文件格式，您应该从 ResourceSet 类派生，重写 GetDefaultReader 和 GetDefaultWriter 方法，并将该类型传递给 ResourceManager(String, Assembly, Type) 构造函数。使用自定义 ResourceSet 可**用于控制资源缓存策略**或支持您自己的资源文件格式，但通常不是必需的。

（我的重点）

的[文档`ResourceSet`](http://msdn.microsoft.com/en-us/library/system.resources.resourceset.aspx)明确说：

> > ResourceSet 类枚举 IResourceReader，加载每个名称和值，并将它们存储在 Hashtable 中

因此，我们确实知道默认情况下您将获得的确切缓存策略。

[编辑] 既然你似乎不相信我！:)

(1) 查看构造函数[ResourceManager(string baseName,Assembly assembly)](http://msdn.microsoft.com/en-us/library/yfsz7ac5.aspx)的文档。它指出：

> > 此构造函数使用系统提供的 ResourceSet 实现。

(2) 现在查看[ResourceSet 的文档](http://msdn.microsoft.com/en-us/library/system.resources.resourceset.aspx)。它指出：

> > ResourceSet 类枚举 IResourceReader，加载每个名称和值，并将它们存储在 Hashtable 中。

因此，这种缓存行为确实记录在 MSDN 中，此外，您可以通过使用 Resharper 检查实现来验证这是正在发生的事情。

# php - session_start 耗尽内存

> ID：15521206
> 
> 赞同：3
> 
> 时间：2013-03-20T10:39:42.460
> 
> 标签：php, session

`PHP Fatal error: Allowed memory size of 134217728 bytes exhausted (tried to allocate 13374929 bytes) in script.php on line 2`

第 2 行是 `session_start();`.

会话存储在`memcached`守护进程中（通过`php.ini session.save_path` 默认的 memcached 设置设置（最大条目为 1mb），这意味着会话数据本身不应该那么大。

调试建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:46:12.993

```
session.save_handler = memcache    
session.save_path="tcp://YOURSERVER:PORT?persistent=1&amp;weight=1&amp;timeout=1&amp;retry_interval=10" 
```

尝试将您的 php.ini 配置设置为类似...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:05:25.047

Session_start 本身没有内存溢出。
错误出现在那里，因为这是压垮骆驼的最后一根稻草，
并且在到达那条线之前已经分配了几乎最大的可用内存。

# ios - iOS 通知。使用哪一个？

> ID：15521207
> 
> 赞同：4
> 
> 时间：2013-03-20T10:39:43.787
> 
> 标签：ios, notifications, uilocalnotification

我的日历应用程序未连接到 Event Kit，它允许我创建自定义重复间隔，如“每 3 天，29 次”等。

现在我想在我的事件中添加通知......但是我的自定义重复事件以各种可能的方式限制了我。

我想我已经检查了所有可能的解决方案：

**UILocalNotification** UILocalNotification 仅限于 64 个事件，并且 NSCalendarUnit 的内置单位时间间隔不是很灵活。每 2 天重复 1 个事件会很快填满，我是否应该在每个应用程序启动时重新安排 64 条通知并请求用户定期启动应用程序？一段时间不运行应用程序不会重新安排通知。

**事件工具包（日历和提醒）** 我可以创建日历或提醒列表，从自定义重复事件生成单个事件并在此处添加通知。但是用户可以编辑它，这会造成混乱。我无法将其同步回我的应用程序。我应该为警报创建一个日历或提醒列表并希望用户不要触摸它吗？

**Apple Push Notification Service** 随处可见：它们不可靠！即使 APNS 服务器接受了推送通知，也不能保证确实会发送。我认为推送通知不是为了在预定时间通知用户，因为不能保证它们会到达。

问题是我应该怎么做，或者在我的情况下你会怎么做？没有解决方案是完美的，我希望在这里找到最用户友好的方法。如果我错过了一种方法，我想听听另一种方法。

编辑：为完整性添加另一种方法。

**没有重复的 UILocalNotification** 不提供本地通知的重复。用户可以将单个通知分配给事件。开启第 65 条通知后，会有弹窗提醒他已达到系统限制。这样，您就可以将责任推给用户。达到极限后，他将被迫专注于未来不远的事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T19:27:43.623

您可以将所有事件保存到核心数据，然后每次启动应用程序或当您的主视图出现时加载该周的所有事件并设置计划的本地通知。一旦安排了活动，您就可以在实体中设置一个标志，例如 hasBeenNotified。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T10:12:01.060

我决定提供没有重复功能的本地通知。这个决定是在与一些用户聊天后做出的。提供一些东西总比什么都不提供要好:)

# objective-c - plist 文件中的 Xcode 4.6 本地化

> ID：15521213
> 
> 赞同：8
> 
> 时间：2013-03-20T10:40:08.270
> 
> 标签：objective-c, xcode, localization, plist

我已经开始在我的项目中添加更多语言，并且没有太多麻烦地本地化了字符串和图形。

我有最后一个问题，它与 plist 文件有关。

此 plist 文件包含应用程序的默认类别名称，并在字典中填充了英文字符串。

我的问题是：**有没有办法本地化 plist 文件？**我虽然想将本地化字符串添加到 plist 但不知道如何。

我不想在代码中决定要采用哪个 plist 文件，因为默认 plist 文件在第一次使用时会被用户覆盖。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-20T11:11:30.057

## 本地化的 Plist 文件

这里更简单的解决方案是本地化整个 plist。通过这样做，您将为每种支持的语言提供不同的 plist 文件。

选择项目中的 plist 文件，然后在*File Inspector*菜单中选择**Localize 。**

 *![文件本地化图片](../Images/e27ed7977e1b93bedd1836d68541181a.png)

它将为每种支持的语言创建一个包含 Plist 文件的新文件夹。

从：

> 虚拟列表

到：

```
> en.lproj
>  >  dummy.plist
> es.lproj
>  >  dummy.plist
> de.lproj
>  >  dummy.plist 
```

* * *

## 本地化的 Plist 内容

另一种解决方案是在 plist 中使用本地化字符串，并`NSLocalizedString`在打印出提取的字符串之前简单地调用。

想象一下，你有一个这样的 Plist： ![原始列表](../Images/67fd9dbe137e0881740d5970584da9a5.png)

您可以通过将键添加到`Localizable.strings`文件中来简单地本地化其字符串。例如，在西班牙语中：

```
"My menu title" = "Mi título del menú";
"My menu description" = "Mi descripción del menú"; 
```

或者，我的建议是将您的母语字符串从 Plist 移出到一个字符串文件，并用可本地化的键替换 Plist 字符串： ![本地化的 plist 内容](../Images/22e4dd406f6118134fee6a7d3793e0bc.png)

还有你`Localizable.strings`的英语：

```
"MY_MENU_TITLE" = "My menu title";
"MY_MENU_DESCRIPTION" = "My menu description"; 
```

和西班牙语：

```
"MY_MENU_TITLE" = "Mi título del menú";
"MY_MENU_DESCRIPTION" = "Mi descripción del menú"; 
```

我发现最新的更容易维护和更容易本地化新语言，因为所有必需的字符串都在同一个文件中。

最后更改您的代码以使用`NSLocalizableString`而不是从 Plist 文件中读取的纯字符串。例如，假设您有以下代码：

```
NSDictionary* plistDict = [[NSDictionary alloc] initWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"menuElements" ofType:@"plist"]];

menuTitleLabel.text = plistDict[@"menuTitle"];
menuDescriptionLabel.text = plistDict[@"menuDescription"]; 
```

只需将其更改为：

```
NSDictionary* plistDict = [[NSDictionary alloc] initWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"menuElements" ofType:@"plist"]];

menuTitleLabel.text = NSLocalizedString(plistDict[@"menuTitle"], nil);
menuDescriptionLabel.text = NSLocalizedString(plistDict[@"menuDescription"], nil); 
```

如果这是您的情况，您可以完全摆脱 plist 文件：

```
menuTitleLabel.text = NSLocalizedString(@"MY_MENU_TITLE", nil);
menuDescriptionLabel.text = NSLocalizedString(@"MY_MENU_DESCRIPTION", nil); 
```*

# php - 当 ajax 响应编码中的西里尔字符错误时

> ID：15521215
> 
> 赞同：0
> 
> 时间：2013-03-20T10:40:10.190
> 
> 标签：php, jquery, ajax

我有一个闲置的西里尔字母字符串，我想在我的 ajax 响应中返回：'Този еmail е вече регистриран'。

当我这样做时：

```
<?php
    public function echoCyrllic(){
        $json['error']='Този еmail е вече регистриран';
        echo json_encode($json);
    }
 ?> 
```

我的回应是这样的：

```
{"error":"\u0422\u043e\u0437\u0438 \u0435mail \u0435 \u0432\u0435\u0447\u0435 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0430\u043d"} 
```

任何人都可以帮忙。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T10:43:10.570

这个 json 是有效的......即使它看起来很脏.. json 会正确解码它

试试看

```
 alert(reponse.error); 
```

如果你不想这样的话..`error`作为文本发送并使用条件在你想要的地方显示这个..

像

```
 $json['error']='error';
 echo json_encode($json); 
```

在javascript中

```
if(response.error == "error"){
     alert('Този еmail е вече регистриран');
} 
```

**但是，这只是另一种方法..但我更喜欢第一个..因为第一个没有错..** :)

# c - 在 UIViewController 中添加视图时出现空白

> ID：15521227
> 
> 赞同：1
> 
> 时间：2013-03-20T10:40:35.670
> 
> 标签：c, mkmapview

我刚刚遇到了一个问题，当我向我添加新视图时`UIViewController`，顶部有一个小间隙。（貌似是状态栏的高度）

我`pushViewController`用来显示此视图，如下所示：

```
MapViewController *map = [[[MapViewController alloc] init] autorelease];
[self.navigationController pushViewController:map animated:YES]; 
```

在我的中，`MapViewController`我只是创建了一个`MKMapView`与视图控制器具有相同框架的框架。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.view.backgroundColor = [UIColor redColor];

    _mapView = [[MKMapView alloc] initWithFrame:self.view.frame];
    [self.view addSubview:_mapView];
} 
```

但事实证明是这样的：

![在此处输入图像描述](../Images/9779d9ba914ed0505b667692c126cb01.png)

我不确定我是否还在这里遗漏了什么......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:19:37.210

试试这个：

```
_mapView = [[MKMapView alloc] initWithFrame:self.view.bounds];

```

UIView 的框架位于父视图的坐标系中。

另一方面，UIView 的边界位于视图本身的坐标系中。

在这种情况下，self.view 的框架将考虑到状态栏（因为它在屏幕上的位置）——因此状态栏大小在顶部偏移。

# php - PHP复选框重复

> ID：15521231
> 
> 赞同：0
> 
> 时间：2013-03-20T10:40:58.360
> 
> 标签：php

！想用像这样的复选框打印当前月份日期是 3 月，我从 1-03-2013 现在开始复选框 []，2-03-2013 现在 [] 到月底，31 个日期和 31 个复选框，现在我有数组 $isActive = $attendancelis['EmployeeAttendance']['is_active']; 中复选框的值。我想要复选框中的 $isActive 值，这就是全部。以下是输出`print_r($attendancelis);`：

```
Array ( [EmployeeAttendance] => Array ( [id] => 5 [employee_id] => 8 [is_active] => 1 [date] => 2013-03-21 11:15:17 [day_month_year] => 2323123 ) ) Array ( [EmployeeAttendance] => Array ( [id] => 3 [employee_id] => 8 [is_active] => 1 [date] => 2013-03-12 17:47:03 [day_month_year] => 23213213 ) )
Array ( [EmployeeAttendance] => Array ( [id] => 0 [employee_id] => 8 [is_active] => 1 [date] => 2013-03-16 13:11:58 [day_month_year] => 324234324 ) ) --> 
```

这是我的代码：

```
<?php

$nrDaysCurrentMonth = date("t");    
for($dayNr = 1; $dayNr <= $nrDaysCurrentMonth; $dayNr++)
{
echo'<div style="width:300px;float:left;">';
echo  date(''.$dayNr.'-m-Y'); 
echo '<input name="frmEmployeeAttendance[]" type="checkbox" value="0" />'; 
foreach($attendanceList as $attendanceLis)
{
$isActivee = $attendanceLis['EmployeeAttendance']['date'];
$isActiveYM = strtotime(date('d-m-Y', strtotime($isActivee)));
$isActiveYMD = date('j', strtotime($isActivee)); 

if($dayNr==$isActiveYMD) {
$isActive = $attendanceLis['EmployeeAttendance']['is_active'];

if ($isActive){ 
echo '<input name="frmEmployeeAttendance[]" type="checkbox" checked=="checked" value="' . $isActive . '" />'; 
}
else { 
echo '<input name="frmEmployeeAttendance[]" type="checkbox" value="' . $isActive . '" />';
}       
}

}

echo '<br/>';
echo'</div>';  
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T08:12:15.540

```
foreach($attendancelist as $attendancelis) {
} 
```

如果您愿意，将遍历数组 $attendancelist 两次

```
Array ( [EmployeeAttendance] => Array ( [id] => 5 [employee_id] => 8 [is_active] => 1 [date] => 2013-02-21 11:15:17 [day_month_year] => 2323123 ) ) Array ( [EmployeeAttendance] => Array ( [id] => 3 [employee_id] => 8 [is_active] => 1 [date] => 2013-03-12 17:47:03 [day_month_year] => 23213213 ) )
Array ( [EmployeeAttendance] => Array ( [id] => 1 [employee_id] => 8 [is_active] => 1 [date] => 2013-03-16 13:11:58 [day_month_year] => 324234324 ) ) --> 
```

foreach($attendancelist as $attendancelis) { } 将在行上方迭代两次。

循环

```
for($i = 1; $i <= $no_of_days; $i++)
{
} 
```

如果 $no_of_days 为 1，将进行 1 次迭代。

如果你结合上述这些循环......

```
 foreach($attendancelist as $attendancelis) {

    for($i = 1; $i <= $no_of_days; $i++)
    {
    //checkbox stuff here
    }

    } 
```

将进行迭代 = ($attendancelist (nr of arrayitems) 次) * $no_of_days。例子：

*   如果数组 $attendancelist 中有 1 项且 $no_of_days 为 1，则将显示 ONE (1*1) 复选框
*   如果数组 $attendancelist 中有 2 个项目并且 $no_of_days 为 1，则将显示两个 (2*1) 复选框
*   如果数组 $attendancelist 中有 2 个项目并且 $no_of_days 为 2，则将显示四个 (2*2) 复选框

你还应该提高你的格式化技巧！:-) 我希望这会有所帮助......

**更新：**

```
<?php
$no_of_days = 10;

$attendancelist = array('a','b', 'c');

foreach($attendancelist as $attendancelis)
{

        for($i = 1; $i <= $no_of_days; $i++) {

                    ?>
                <div style="width:300px;float:left;">
                    INACTIVE<input type="checkbox" value="0" name="isactive"  />
                <?php echo $start = date('' . $i . '-m-Y'); ?>
                    <br/><br/><br/>         
                </div>
        <?php
        }

}
?> 
```

上面的代码将迭代第一个循环 3 次。（a、b 和 c），并且对于每次迭代，它会显示 10 天的复选框。

**再次更新：** -如果您只想为每个日期显示一些值... ...类似这样的...

```
<?php
$no_of_days = 10;
$attendancelist = array('a', 'b', 'c');

$outputCheckbox = array();

//Go through all days
for($i = 1; $i <= $no_of_days; $i++)
{

    //Show one checkbox for every date.
    foreach($attendancelist as $attendancelis)
    {
        $isActive = true; //Dummy

        if ($outputCheckbox[$i] == false) {

            if ($isActive) {
                echo '<input type="checbox" value="active"><br />';
            }
            else {
                echo '<input type="checbox" value="inactive"><br />';
            }
            $outputCheckbox[$i] = true;

        }
    }
    //--attendanceList loop

}
//-- days loop

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T22:20:45.660

啊哈，现在我想我真的明白你的问题了！:-) 只用了大约两天左右 ;-)*哈哈*

以下示例在当前月份的 DAY 16 下输出两个复选框。第一个被选中（value=1），另一个没有（value=0），day21 显示一个选中的复选框（value=1）。我没有包含 div 和其他东西的格式，但我想你无论如何都会管理！:-)

```
<?php

//Example data
$attendanceList = array();
$attendanceList[0]['EmployeeAttendance'] = array('id' => 5, 'employee_id' => 8, 'is_active' => 1, 'date' => '2013-02-21 11:15:17', 'day_month_year' => 2323123);
$attendanceList[1]['EmployeeAttendance'] = array('id' => 3, 'employee_id' => 8, 'is_active' => 1, 'date' => '2013-03-16 17:47:03', 'day_month_year' => 23213213);
$attendanceList[2]['EmployeeAttendance'] = array('id' => 1, 'employee_id' => 8, 'is_active' => 0, 'date' => '2013-03-16 13:11:58', 'day_month_year' => 324234324);

//Go through all days for current month
$nrDaysCurrentMonth = date("t");    
for($dayNr = 1; $dayNr <= $nrDaysCurrentMonth; $dayNr++)
{
    echo 'Day: ' . $dayNr . '<br />';       //Show nr of current date once

    //Go through attendancelist and check where nr of dates match. 
    //Where they match, show checkboxes with active or not.
    foreach($attendanceList as $attendanceLis)
    {

        //Get this iterations date and get the number of day and put it into $isActiveYMD
        $isActivee = $attendanceLis['EmployeeAttendance']['date'];
        $isActiveYM = strtotime(date('d-m-Y', strtotime($isActivee)));
        $isActiveYMD = date('j', strtotime($isActivee)); //Day of month without leading zeros

        //Compare day of month with days loop value ($dayNr). If date from 
        if($dayNr==$isActiveYMD) {

            $isActive = $attendanceLis['EmployeeAttendance']['is_active'];

            if ($isActive) {
                echo '<input name="frmEmployeeAttendance[]" type="checkbox" checked=="checked" value="' . $isActive . '" /><br />'; 
            }
            else {
                echo '<input name="frmEmployeeAttendance[]" type="checkbox" value="' . $isActive . '" /><br />';
            }       
        }
        //--compare day of month...
    }
    //--attendanceList loop
    echo '<hr />';
}
//-- days loop

?> 
```

# mysql - 如何在两个表已经创建的演员表中交换表名？

> ID：15521232
> 
> 赞同：3
> 
> 时间：2013-03-20T10:41:01.390
> 
> 标签：mysql

假设我们有两个表`new`和`current`（都是innodb）。我们应该自动截断`current`表格内容并填充`new`表格中的新内容。

可能的方式：

*   交换表名`RENAME TABLE`，但它无济于事，因为这两个表都已创建
*   开始交易；截断`current`表；插入`current`从中选择`new`；提交事务 - 没关系，但是否有可能以跨国家方式进行所有这些操作？
*   即时创建第三张桌子并像桥梁一样使用它

最佳做法是什么？

UPD：我想这会很好地工作：`RENAME TABLE current TO xxx, new TO current; xxx TO new`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-11-20T21:05:28.280

您需要使用单个 MySQL 语句重命名表，以便将其作为单个 mysql 原子操作执行，否则您可能会导致程序在尝试访问其中一个表时在各种名称之间交换它们时出错。

但听起来您也需要“新”表为空才能在操作结束时接受新记录。

```
CREATE TABLE new_empty LIKE new;
RENAME TABLE current TO old, new to current, new_empty TO new;
DROP TABLE old; 
```

这比执行“截断当前”和“插入当前 select * from new”要高效得多，因为您不复制任何记录，它只会创建一个新的表结构（及其索引），重命名三个文件并删除旧表（通过从数据库目录中删除两个文件）。

[https://dev.mysql.com/doc/refman/5.7/en/rename-table.html](https://dev.mysql.com/doc/refman/5.7/en/rename-table.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:47:46.087

将 current 重命名为 temp 然后 new 为 current 和 last create table new one and drop temp table

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2017-06-29T08:28:45.663

首先，您需要确保当前表不应该被锁定。

如果我们有两个表**table1**和**table2**

```
RENAME TABLE table1 TO table1_temp;
RENAME TABLE table2 TO table1;
RENAME TABLE table1_temp TO table2; 
```

尝试这个。这肯定会帮助你。

# c# - 使用带有终结器的 C++/CLI 定义的类时 C# 中的内存泄漏

> ID：15521233
> 
> 赞同：4
> 
> 时间：2013-03-20T10:41:06.720
> 
> 标签：c#, memory-leaks, garbage-collection, c++-cli, finalizer

当我在 C++/CLI DLL 中实现一个类时：

```
public ref class DummyClass
{
protected:
    !DummyClass() 
    {
        // some dummy code:
        std::cout << "hello" << std::endl;
    }
} 
```

当我将该 DLL 加载到 C# 项目并通过重复创建对象来使用该类时：

```
static void Main()
{
    while (true)
    {
        var obj = new DummyClass();
    }
} 
```

然后，在运行程序时，内存会慢慢消化到 OutOfMemoryException。

看来，每次我在 C++/CLI 中实现终结器时，都会发生这种内存泄漏（或垃圾收集的不良工作）。

**为什么会发生这种内存泄漏？我怎样才能避免它并且仍然能够将终结器用于其他（更复杂的）用途？**

* * *

**更新：**原因肯定不是在终结器中写入 Console / stdout 或其他非标准代码，以下类具有相同的内存泄漏行为：

```
public ref class DummyClass
{
private:
    double * ptr;
public:
    DummyClass()
    {
         ptr = new double[5];
    }
protected:
    !DummyClass() 
    {
         delete [] ptr;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T12:02:26.937

当您分配的速度超过垃圾收集的速度时，您将遇到 OOM。如果您进行大量分配，CLR 将插入 Sleep(xx) 来限制分配，但在极端情况下这还不够。

当你实现一个终结器时，你的对象被添加到终结队列中，当它被终结时，它被从队列中删除。这确实会带来额外的开销，并且您会使对象的寿命比必要的更长。即使您的对象可以在廉价的 Gen 0 GC 期间被释放，它仍然会被终结队列引用。当发生完整的 GC 时，CLR 会触发 finalizaion 线程开始清理。这无济于事，因为您的分配速度确实比您可以完成的速度快（写入标准输出非常慢），并且您的完成队列将变得越来越大，导致完成时间越来越慢。

我没有测量它，但我认为即使是一个空的终结器也会导致这个问题，因为增加的对象生命周期和两个终结队列处理（终结器队列和 f-reachable 队列）确实施加了足够的开销，使终结器比分配慢。

您需要记住，终结是一种固有的异步操作，在特定时间点没有执行保证。在允许额外分配之前，CLR 永远不会等待清除所有挂起的终结器。如果你在 10 个线程上分配，那么在你之后仍然会有一个终结器线程清理。如果您想依赖确定性终结，则需要通过调用 GC.WaitForPendingFinalizers() 来等待，但这会使您的性能陷入停顿。

因此，您的 OOM 是预期的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T07:14:09.250

您应该使用 AddMemoryPressure 函数，否则垃圾收集器会低估及时清理这些对象的需要。

# neo4j - 查询 neo4j 索引时出现 NotInTransactionException

> ID：15521239
> 
> 赞同：1
> 
> 时间：2013-03-20T10:41:23.720
> 
> 标签：neo4j

我目前正在使用 neo4j 1.8.1 。当我查询 neo4j 索引以获取一些节点时，我得到 NotInTransactionException 。

以下是一个简单的查询，我在 neo4j 上执行

```
 if (graphDb.index().existsForNodes("NODEINDEX")) {
  IndexHits<Node> hits = graphDb.index().forNodes(NODEINDEX).query(query);
} 
```

以下是异常的堆栈跟踪。

```
"message" : "Error fetching transaction for current thread",
"exception" : "NotInTransactionException",
"stacktrace" : [ "org.neo4j.kernel.impl.index.IndexConnectionBroker.getCurrentTransaction(IndexConnectionBroker.java:134)", "org.neo4j.kernel.impl.index.IndexConnectionBroker.acquireReadOnlyResourceConnection(IndexConnectionBroker.java:84)", "org.neo4j.index.impl.lucene.LuceneIndex.getReadOnlyConnection(LuceneIndex.java:105)", "org.neo4j.index.impl.lucene.LuceneIndex.query(LuceneIndex.java:245)", "org.neo4j.index.impl.lucene.LuceneIndex.query(LuceneIndex.java:227)", "org.neo4j.index.impl.lucene.LuceneIndex.query(LuceneIndex.java:238)", "com.uprr.netcontrol.starmap.neo4j.plugins.aggregate_node_status.NodeStatusHelper.getGraphNodes(NodeStatusHelper.java:39)", 
```

我在 Neo4j api 中找到了以下内容。

```
 private Transaction getCurrentTransaction() throws NotInTransactionException
{
    try
    {
        return transactionManager.getTransaction();
    }
    catch ( SystemException se )
    {
        throw new NotInTransactionException(
                "Error fetching transaction for current thread", se );
    }
} 
```

我们是否需要显式地启动一个事务来查询 neo4j 索引？
有什么想法吗？
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T07:58:40.443

这是一个理论：我不知道这是否只是粘贴在这里的代码的问题，但检查：

```
if (graphDb.index().existsForNodes("NODEINDEX"))

```

检查名为“NODEINDEX”的索引，但实际查询

```
graphDb.index().forNodes(NODEINDEX).query(query);

```

检查在常量 NODEINDEX 中命名的索引。这两个可能不一样，因此它会尝试为您创建该索引，但由于不在事务中而失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-29T22:17:44.390

如果没有现有的适当索引，我认为它会在返回之前创建一个；此操作需要包装在事务中。

# json - 有没有一种方便的方法来为struts2中的json结果配置noCache和excludeNullProperties参数？

> ID：15521241
> 
> 赞同：2
> 
> 时间：2013-03-20T10:41:28.823
> 
> 标签：json, struts2

我将 struts-json-plugin.2.2.3 用于结果类型为 json 的操作，这是一个演示配置：

```
<action name="dept_*" class="com.XXX.action.DepartmentAction" method="{1}">
        <result name="search">dept_search.jsp</result>
        <result name="search_ajax" type="json"><param name="root">deptList</param><param name="excludeNullProperties">true</param><param name="noCache">true</param></result>
        <result name="save" type="json"><param name="root">jsonResult</param><param name="excludeNullProperties">true</param><param name="noCache">true</param></result>
        <result name="count" type="json"><param name="root">pageCount</param><param name="excludeNullProperties">true</param><param name="noCache">true</param></result>
    </action> 
```

此配置工作正常。但是对于我项目中的所有操作，`noCache`并且`excludeNullProperties`与上面的代码具有相同的配置值，所以我正在寻找一种方法来在一个地方配置它们并用于所有操作。我在`JSONInterceptor`课堂上发现，有同名的属性，所以我这样配置：

```
 <interceptors>
        <interceptor-stack name="ecsStack">
            <interceptor-ref name="defaultStack"></interceptor-ref>
            <interceptor-ref name="json"><param name="noCache">true</param><param name="excludeNullProperties">true</param><param name="contentType">application/json;charset=utf-8</param></interceptor-ref>
        </interceptor-stack>
    </interceptors>

    <default-interceptor-ref name="ecsStack"></default-interceptor-ref> 
```

并删除 中的相同配置`Action result`，但它没有按预期工作，响应标头中没有`cache-control`,`expires`和信息，并且 null 属性被发送到浏览器。`pragma`那么为什么它不起作用呢？
如果有方便的方法来配置这两个参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T22:42:52.317

在文件中尝试此`result-type`配置：`struts.xml`

```
<result-type name="json" class="org.apache.struts2.json.JSONResult">
  <param name="noCache">true</param>
  <param name="excludeNullProperties">true</param>
</result-type> 
```

# c# - 本地时间和服务器时间存在差异

> ID：15521245
> 
> 赞同：7
> 
> 时间：2013-03-20T10:41:41.903
> 
> 标签：c#, datetime, timezone, utc, datetimeoffset

在 MVC4 C# 应用程序`DateTime.Now`中，我在应用程序中创建对象时使用。部署后，本地计算机和主机之间有 +8 小时的差异。然后我将其更改为`DateTime.UtcNow`，现在差异是 -4 小时。

例如在我的电脑中日期是`20 Mar 2013, 14:28:12`，但日期存储到数据库中`20 Mar 2013, 10:28:12.`

我应该怎么做所有国家的所有用户才能使用 1 个相同的日期？

编辑：我的时区是**(UTC+04:00) Baku**，服务器遵循**PST**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T10:55:08.923

例如，假设您的用户在纽约 (GMT - 5)，而您的服务器在印度 (GMT + 5:30)。

当用户看到上午 10:00 (EST) 的“本地”时间时，您的服务器将看到晚上 7:30 (IST) 的“本地”时间。但是，通过在这两个地方使用 UTC....用户会看到下午 3 点的 UTC 时间，而服务器会看到下午 3 点的 UTC 时间。

在所有地方使用 UTC 但保留用户时区的参考允许您始终在 UTC 中工作，但仍将时间转换为您想要向用户显示的“本地”时间。

如果它是虚拟服务器，您也不能依赖服务器的托管位置。您也不能假设托管公司将其服务器设置为哪个时区。`DateTime.UtcNow`最好在数据库中存储日期时间时始终使用防御性编码。

要将此 UTC 时间转换回用户的时区，您需要执行以下操作：

```
DateTime utcTime = new DateTime(2013, 03, 25, 10, 20, 00);
TimeZoneInfo usersTimeZone = TimeZoneInfo.FindSystemTimeZoneById("Eastern Standard Time");
DateTime usersLocalTime = TimeZoneInfo.ConvertTimeFromUtc(utcTime, usersTimeZone);
Console.WriteLine(utcTime.ToString("hh:mm:ss");
Console.WriteLine(usersLocalTime.ToString("hh:mm:ss"); 
```

仅供参考，您可以从以下位置找到时区列表：

```
TimeZoneInfo.GetSystemTimeZones() 
```

这应该打印出来：

```
10:20:00
05:20:00 
```

如您所见，您需要知道用户的时区。有两种方法可以知道用户时间：

1.  让用户在他们的用户偏好中选择他们的时区
2.  使用一些 javascript 来检测他们机器的时区并将其与表单一起发回

我会建议那里的第一个选项，因为第二个选项会使人们的事情变得更加困难。例如，如果他们位于英国并在一周内飞往各州。一切都会改变区域，他们可能没有意识到！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T10:48:02.743

当我在做一个国际用户使用的项目时，我们总是使用`DateTime.UtcNow`

如果它是一个本地项目 - 即仅设计用于您的时区，那么`DateTime.Now`就足够了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T10:48:46.797

您的本地时间是您的系统时间。检查操作系统中的时区。您所指的服务器时间取决于您的服务器配置文件中的时区。

确保您的操作系统时区和您的服务器时区相似。

# api - 创建 ZigBee 网络

> ID：15521248
> 
> 赞同：3
> 
> 时间：2013-03-20T10:42:00.017
> 
> 标签：api, sensors, xbee, zigbee, texas-instruments

对于学校项目，我们的客户希望我们使用德州仪器 cc2531 或 XBee 创建一个 ZigBee 网络。我们有一个带有一些来自 Cleode 的传感器的 CC2531。在他们的名为 cleobee 的程序中，一切正常。连接是自动建立的，我们只需打开传感器即可建立连接。

现在我们想使用 CC2531 连接传感器而不使用 Cleode 程序。有没有简单的方法来建立网络？有我们可以使用的 API 吗？我们找到了 zTool，我们可以在其中监控 cc2531 的使用情况，但我们真的不知道我们还能用它做什么。

此外，我们想将 Olimex mod-zigbee-pir 传感器与它连接起来。我们可以用与其他传感器相同的方式来做到这一点吗？

有什么软件可以让我们这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-02T10:08:51.223

如果您不想使用 Cleode 程序，那么您可以通过更改 TI 提供的 API 来自己实现相同的功能。

Ti 提供了所有的 API，您可以在 Z-stack 随附的文档中参考。

还提供了用于 zigbee 网络的示例和通用程序，您可以根据需要对其进行修改。

# c# - 使用 linq 选择属性的第一条记录

> ID：15521249
> 
> 赞同：0
> 
> 时间：2013-03-20T10:42:02.973
> 
> 标签：c#, .net, linq, select

我有一堂课

```
class Test
{
    public string FirstProp { get; set; }
    public string SecondProp { get; set; }
    public string ThirdProp { get; set; }
} 
```

和对象列表

```
var list = new List<Test>
{
    new Test { FirstProp = "xxx", SecondProp = "x2", ThirdProp = "x3" },
    new Test { FirstProp = "xxx", SecondProp = "x21", ThirdProp = "x31" },
    new Test { FirstProp = "yyy", SecondProp = "y2", ThirdProp = "y3" },
    new Test { FirstProp = "yyy", SecondProp = "y21", ThirdProp = "y31" },
    new Test { FirstProp = "xxx", SecondProp = "x22", ThirdProp = "x32" },
}; 
```

我需要选择第一个 FirstProp 记录：

```
FirstProp = "xxx", SecondProp = "x2", ThirdProp = "x3"
FirstProp = "yyy", SecondProp = "y2", ThirdProp = "y3" 
```

如何以最好的方式使用`linq`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T10:44:01.920

您可以[`GroupBy`](http://msdn.microsoft.com/en-us/library/bb534501.aspx)在属性上使用`FirstProp`，然后获取`First`：

```
 list.GroupBy(x => x.FirstProp).Select(g => g.First()) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T10:45:02.993

```
list.GroupBy (l => l.FirstProp).Select (l => l.First ()) 
```

将在这里工作，但您需要确定您需要从每个组中获取哪些项目（首先并不总是一个好的选择）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T10:46:25.973

您需要使用该`Distinct`属性

```
var result = list.DistinctBy(t => t.FirstProp); 
```

# ios - Xcode 警告：忽略文件 libxml2.2.dylib，为不受支持的文件格式构建，该文件格式不是被链接的体系结构

> ID：15521252
> 
> 赞同：4
> 
> 时间：2013-03-20T10:42:12.950
> 
> 标签：ios, xcode, architecture, xcode4, compiler-warnings

我的任务是向 iOS 应用程序添加一些功能。我查看了 SVN 上的源代码，收到了 100 多个警告（啊），谢天谢地，我只剩下最后一个，即：

![Xcode 警告](../Images/50d21a7647c5a56cb8d5a7561483a4cd.png)

（被屏蔽的位是客户端名称......）。

我相信这个警告的意思是：“这个 XML 库与构建时链接的操作系统架构不兼容”。

在下一个版本中，我们仅支持 iOS5 和 iPhone 4 及更高版本（而不是较低版本的 iOS 和旧 iPhone）。

那么我要更改链接架构吗？什么是链接架构？如何更改架构？还是我完全走错了路？

可能值得一提的是，我正在运行最新的 Xcode，我已经从 Xcode 列表中添加了框架（将二进制文件与库链接）。

**编辑**

我只在从模拟器构建时收到消息。它不会造成任何伤害，只是让我兴奋起来！

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T02:26:26.340

不要链接到 libxml2.2.dylib，而是链接到 libxml2.dylib。与之链接应确保您始终与体系结构的正确实现链接。

作为一般规则，在您的应用程序中链接到库的**通用**版本而不是特定版本。在这种情况下，这意味着 libxml2 而不是 libxml2.2 。

您正在链接到一个（符号链接到一个）动态库，该动态库在运行时将自动指向当前操作系统版本和体系结构的正确实现。链接到特定版本的库并不能保证这一点，您最终可能会链接到只有单一架构的东西。因此，在开发过程中，如果您在针对模拟器时链接到 libxml2.2.dylib，您可能会链接到 i386，那么当您针对设备时，它无法找到正确的架构（因为它试图将 i386 用于 armvWhatever ，这正是你告诉它的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T23:31:02.640

如果您尝试使用`libxml2.2`，它已经在 Xcode 中可用。与其从外部源获取它（Apple 无论如何都不会让你使用动态库），不如在 Xcode 中将它添加到你的框架中，然后通过添加`/usr/lib/libxml2/`in链接它`Header Search Paths`。不要将您的项目与不是 Apple 提供的 dylib 链接，否则您的应用程序将被拒绝。此外，该体系结构`i386`不是 iOS 的体系结构，因为 iOS 将`armv7`和`armv7s`体系结构用于其设备的较新版本，这就是您收到体系结构警告的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T12:46:34.847

基本上 libxml2.2 和 libxml2 之间的区别在于 libxml2.2 指向 libxml 的特定版本/实现，而 libxml2 是指向 XCode 可以找到的 libxml2 的最新版本和正确架构的快捷方式/符号链接。因此，在添加这样的框架时，您应该始终添加它的“通用版本”（符号链接）（libxml2）而不是它的“特定版本”（libxml2.2），因为您看到的确切问题。

希望这可以帮助！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-22T13:11:55.817

这表示您正在链接到为 386 而不是 arm 构建的东西。您将需要一个不同的 dylib 来链接或进入项目设置并更改拱门。（如果您正在构建 dylib）可能包括 arm7 或类似的。

# asp.net - 在 Visual Studio 中添加 Secure Matser 页面

> ID：15521253
> 
> 赞同：1
> 
> 时间：2013-03-20T10:42:17.560
> 
> 标签：asp.net, visual-studio, master-pages

再会

如何将安全母版页添加到 Visual Studio 中的安全文件夹中？它是一个普通的母版页吗？它与普通的母版页有何不同？

我尝试了以下方法：在我的主根目录中添加了一个文件夹：安全。在该文件夹中，我添加了一个新的母版页，并将其命名为 Secure.Master。现在这将是任何已登录用户的母版页...

这就是它的全部吗？安全母版页（登录用户）在代码隐藏或公共用户的普通母版页中是否有任何不同？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:16:29.993

ASP.net Membership 似乎是您开始阅读的地方。它将允许您保护站点的某些部分：[http ://www.asp.net/web-forms/tutorials/security](http://www.asp.net/web-forms/tutorials/security)

您可能还想查看：[http](http://blog.osbornm.com/2010/07/21/using-simplemembership-with-asp.net-webpages/) ://blog.osbornm.com/2010/07/21/using-simplemembership-with-asp.net-webpages/以获得更简化的实现，即`SimpleMemberhsip`

# git - 使用 git log，有没有办法在一个命令中获取“--name-status”和“--numstat”？

> ID：15521255
> 
> 赞同：5
> 
> 时间：2013-03-20T10:42:25.493
> 
> 标签：git, git-log

对于提交的所有文件，我希望状态修饰符`--name-status`提供，以及添加和删除行的数量`--numstat`。说我有以下内容：

```
> git log --pretty=format:"%aN %ct" --reverse --name-status --encoding=UTF-8 --no-renames
John Doe 1234567489
M       foo/bar/foo.bar
A       bar/hello.txt 
```

和：

```
> git log --pretty=format: --reverse --numstat --encoding=UTF-8 --no-renames
9      5       foo/bar/foo.bar
21     0       bar/hello.txt 
```

是否有一个单一的命令/标志组合可以为我提供它们组合的输出？类似这样的东西：

```
John Doe 1234567489
M    9    5       foo/bar/foo.bar
A    21   0       bar/hello.txt 
```

我知道可以将它们与一些`awk`魔法结合起来，但是鉴于我将在多个大型存储库和性能问题上执行此操作，因此最好使用单个 git log 命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:28:19.487

由于 --name-status 似乎覆盖了任何其他标志（它类似于 --name-only），您可以使用 --summary 和 --numstats 的组合。但是，它不会像您描述的那样在同一行。

```
git log --pretty=format:"%aN %ct" --reverse --summary --numstat --encoding=UTF-8 --no-renames 
```

会产生类似的东西：

```
Christopher Corley 1363309327
4929    0       IEEEtran.cls
22      46      paper.tex
 create mode 100644 IEEEtran.cls 
```

请注意，这仅列出模式更改的摘要。对于未更改模式的修改文件（即“M”），它们不会出现在摘要列表中。

同样，您可能会发现使用 --raw 而不是 --summary 会很有用，后者会列出修改过的文件：

```
Christopher Corley 1363309327
:000000 100644 0000000... 5e2d183... A  IEEEtran.cls
:100644 100644 2abed5a... 91f133d... M  paper.tex
4929    0       IEEEtran.cls
22      46      paper.tex 
```

# java - Java - 什么取代了 Enumeration 遗留类

> ID：15521256
> 
> 赞同：-2
> 
> 时间：2013-03-20T10:42:28.690
> 
> 标签：java, list, arraylist, enumeration

我有以下代码：

```
private Map<String, TestInterface> testList = new ConcurrentHashMap<String, testInterface>();

public Enumeration getTestObjects(){
    return testList.elements();
} 
```

代码曾经使用哈希表，但我已将其更改为哈希图。

我的问题是，使用 hashmap 在 java 7 中实现此功能的最有效方法是什么？返回列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T10:50:25.907

地图可以返回 3 个不同的集合：

*   `keySet()`返回一个包含所有键的集合（`Set<String>`在您的示例中）
*   `values()`返回一个包含所有值的集合（`Collection<TestInterface>`在您的示例中）
*   `entrySet()`返回一个包含所有条目的集合（`Set<Map.Entry<String, TestInterface>>`在您的示例中）

# android - startActivity() 被 android system_process 无限次调用

> ID：15521260
> 
> 赞同：0
> 
> 时间：2013-03-20T10:42:33.677
> 
> 标签：android, android-intent, android-emulator

问题：- startActivity() 被 android **system_process**无限次调用。所以下面的代码打开了**MainActivity**但随后 MainActivity 被冻结/挂起，几分钟后 android 自行关闭。

我有两个活动：

1.  注册活动
2.  主要活动

注册过程完成后，我想将用户重定向到主屏幕（即MainActivity），所以我使用此代码启动活动：-

```
Button btnSubmit = (Button) findViewById(R.id.btnSubmit);
btnSubmit.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        Intent intent = new Intent(RegisterActivity.this,MainActivity.class);
        startActivity(intent);  
    }
}); 
```

但是 startActivity() 被android系统无限次调用。我通过 Logcat 发现了这一点。logcat 的输出是：--

```
03-20 10:08:25.756: I/ActivityManager(63): Starting activity: Intent { cmp=com.techdeedapps.fallonmoving/.MainActivity }
03-20 10:08:25.826: W/InputManagerService(63): Starting input on non-focused client com.android.internal.view.IInputMethodClient$Stub$Proxy@44c7f1b0 (uid=10026 pid=316)
03-20 10:08:25.826: W/InputManagerService(63): Client not active, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@44c4ef28
03-20 10:08:25.966: I/ActivityManager(63): Starting activity: Intent { cmp=com.techdeedapps.fallonmoving/.MainActivity }
03-20 10:08:26.036: W/InputManagerService(63): Starting input on non-focused client com.android.internal.view.IInputMethodClient$Stub$Proxy@44c7f1b0 (uid=10026 pid=316)
03-20 10:08:26.036: W/InputManagerService(63): Client not active, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@44c28e48
03-20 10:08:26.176: I/ActivityManager(63): Starting activity: Intent { cmp=com.techdeedapps.fallonmoving/.MainActivity }
03-20 10:08:26.246: W/InputManagerService(63): Starting input on non-focused client com.android.internal.view.IInputMethodClient$Stub$Proxy@44c7f1b0 (uid=10026 pid=316)
03-20 10:08:26.246: W/InputManagerService(63): Client not active, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@44c11b98
03-20 10:08:26.396: I/ActivityManager(63): Starting activity: Intent { cmp=com.techdeedapps.fallonmoving/.MainActivity }
03-20 10:08:26.437: D/dalvikvm(316): GREF has increased to 201
03-20 10:08:26.606: I/ActivityManager(63): Starting activity: Intent { cmp=com.techdeedapps.fallonmoving/.MainActivity }
03-20 10:08:26.676: W/InputManagerService(63): Starting input on non-focused client com.android.internal.view.IInputMethodClient$Stub$Proxy@44c7f1b0 (uid=10026 pid=316)
03-20 10:08:26.676: W/InputManagerService(63): Client not active, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@44de2330
03-20 10:08:26.816: I/ActivityManager(63): Starting activity: Intent { cmp=com.techdeedapps.fallonmoving/.MainActivity }
03-20 10:08:26.826: E/SurfaceFlinger(63): createSurface() failed, generateId = -12
03-20 10:08:26.826: W/WindowManager(63): OutOfResourcesException creating surface
03-20 10:08:26.826: I/WindowManager(63): Out of memory for surface!  Looking for leaks...
03-20 10:08:26.826: W/WindowManager(63): No leaked surfaces; killing applicatons!
03-20 10:08:26.826: W/ActivityManager(63): Killing processes for memory at adjustment 0
03-20 10:08:26.826: W/ActivityManager(63): Killing for memory: ProcessRecord{44f32af0 316:com.techdeedapps.fallonmoving/10026} (adj 0)
03-20 10:08:26.826: I/Process(63): Sending signal. PID: 316 SIG: 9
03-20 10:08:26.836: W/WindowManager(63): Looks like we have reclaimed some memory, clearing surface for retry.
03-20 10:08:26.836: W/WindowManager(63): Due to memory failure, waiting a bit for next layout
03-20 10:08:26.856: I/ActivityManager(63): Process com.techdeedapps.fallonmoving (pid 316) has died.
03-20 10:08:27.176: I/WindowManager(63): WIN DEATH: Window{44fac7d8 com.techdeedapps.fallonmoving/com.techdeedapps.fallonmoving.MainActivity paused=false}
03-20 10:08:27.196: I/WindowManager(63): WIN DEATH: Window{44faa318 com.techdeedapps.fallonmoving/com.techdeedapps.fallonmoving.MainActivity paused=false} 
```

主要活动代码：

```
 public class MainActivity extends Activity {
AlertDialog.Builder builder;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    builder = new AlertDialog.Builder(this);

    Button btnEnter = (Button) findViewById(R.id.btnEnter);
    btnEnter.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            if (RegisterActivity.loggedIn) {
                startActivity(new Intent(MainActivity.this,
                        AddActivity.class));
            } else {
                Utility.showAlertDialog(builder, "Please Log In!");
            }
        }

    Button btnSettings = (Button) findViewById(R.id.btnSettings);
    btnSettings.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            startActivity(new Intent(MainActivity.this,
                    RegisterActivity.class));
        }
    });

} 
```

注册活动代码：

```
 public class RegisterActivity extends Activity {
     protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.register);
    builder = new AlertDialog.Builder(this);
    etName = (TextView) findViewById(R.id.etName);
    etEmail = (TextView) findViewById(R.id.etEmail);
    Button btnSubmit = (Button) findViewById(R.id.btnSubmit);
    btnsubmit.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent intent = new Intent(RegisterActivity.this,
                    MainActivity.class);
            startActivity(intent);

        }
    });
    }
} 
```

这个 logcat 输出是连续的，直到我关闭模拟器！如果我不关闭模拟器，那么 android 会自动重启。只是**系统挂起，因为它无限调用 startActivity()！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-25T05:04:45.357

其实是我的错..！startActivity() 被无限调用，因为当我完成活动时，我又开始了另一个活动！..但我感谢所有响应者的帮助。非常感谢..！

# java - 从大型机读取打包的十六进制数据并将其转换为十进制格式

> ID：15521265
> 
> 赞同：1
> 
> 时间：2013-03-20T10:42:57.880
> 
> 标签：java, hex

我正在做一个项目，使用 Java 将大型机的*打包十六进制数据*转换为十进制/人类可读格式。但是文件中的数据是这样的：

```
00011111112       201343    /…æ     
          &c                                               ï%                                                               “*   œ“fæ     —æ          r<   Ìð    
Œ    êŒ000000 000000          q@00000000                  ð                                                   
00011111112       201345    àr<         
          ™                                                                                                                 r<   Ìð     †          Ë…ð   Ë<    Êð    àã000000 000000          q00000000      @            %                                                   
00011111112       201346     Œ                ì                                                                                                                Ë…ð   Ë<         %          é-   ÅÇ    …e*    Äæ000000 000000          ræ00000000   @   Œ 
```

我不知道如何使用 Java 将其转换为十进制格式。我正在使用 `wing 作为 UI 部分。

任何人都可以帮助并为我提供任何算法或工作代码吗？

这是一组样本数据的屏幕截图，其中第一行表示打包的十六进制数据。接下来的 2 行代表转换后的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:55:59.137

您将需要知道格式是什么，并使用字节工作。使用`InputStream`和不使用`Reader`，请记住大型机可能使用 EBCDIC 而不是 ASCII，并且我的 $DEITY 可以帮助您的灵魂。

说真的，你需要知道你想要做什么的有线格式。首先找到它，它记录在某处。（希望；这是一个大型机，所以谁知道）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-15T12:50:05.063

也许你的意思是压缩二进制编码的十进制，BCD。

如您所知，一个字节是 8 位，以 16 为基数表示，十六进制为两个十六进制数字 0-9，AF。BCD 现在将数字字符串编码为 1234，将十六进制字节 31、32、33、34 打包为 12、34 的字符串。

```
boolean fromBCD(byte ch) {
   (ch & 0xF) < 10 && ((ch >> 4) & 0xF) < 10;
}

int fromBCD(byte ch) {
   (ch & 0xF) + 10 * ((ch >> 4) & 0xF)
} 
```

# java - 信息：非法访问：此 Web 应用程序实例已被停止。无法加载 java.net.InetAddress

> ID：15521270
> 
> 赞同：46
> 
> 时间：2013-03-20T10:43:06.813
> 
> 标签：java

我遇到这种异常，有人可以帮我解决这个问题吗？

```
java.lang.IllegalStateException
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1566)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
at org.quartz.utils.UpdateChecker.getClientId(UpdateChecker.java:149)
at org.quartz.utils.UpdateChecker.buildParamsString(UpdateChecker.java:120)
at org.quartz.utils.UpdateChecker.buildUpdateCheckUrl(UpdateChecker.java:114)
at org.quartz.utils.UpdateChecker.doCheck(UpdateChecker.java:55)
at org.quartz.utils.UpdateChecker.checkForUpdate(UpdateChecker.java:47)
at org.quartz.utils.UpdateChecker.run(UpdateChecker.java:39)
at java.util.TimerThread.mainLoop(Unknown Source)
at java.util.TimerThread.run(Unknown Source) 
```

我也遇到了与`Could not load java.net.URLEncoder`and相同的异常`Could not load java.net.URLConnection`。我正在使用 Eclipse Indigo SR1 和 Tomcat V6.0

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-20T10:47:08.577

重启服务器后可以解决这个问题，服务器正在缓存旧版本的应用程序。

[看这里](https://stackoverflow.com/questions/5386934/web-instance-already-stopped)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2017-06-26T14:45:17.700

您无法通过“重新启动服务器”来解决此问题。

问题是当您通过将新版本上传到 Tomcat 来更新您的应用程序时，某些资源没有被正确清理。可以是任何东西，从失控的线程，到某种预定的服务，再到一个监听器。当该进程试图加载一个类时，Tomcat 会检测并阻止它。

该问题的解决方案是正确跟踪并在关闭时关闭这些线程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-11T15:42:19.933

我最近也遇到了这个问题。在我的情况下，问题是由一个未处理的异常产生的，该异常`javax.servlet.ServletContextListener`记录在一个 localhost-date.log 中。由于该异常，未部署 webapp，但已启动`java.util.concurrent.Executors`的仍在运行，这导致 catalina-date.log 中的另一个异常链：
*java.lang.IllegalStateException：非法访问：此 Web 应用程序实例已停止。无法加载 WhatEver.class*。

我的情况的解决方案：

*   检查所有 Tomcat 日志
*   修复异常`javax.servlet.ServletContextListener`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-11T05:48:38.030

我遇到了类似的问题。我已经通过在 VM 参数中增加 Server 的 permsize 来解决`-XX:MaxPermSize=1024m`

# linux - 查找列中字段的平均值

> ID：15521273
> 
> 赞同：0
> 
> 时间：2013-03-20T10:43:12.197
> 
> 标签：linux, awk

我在该文件中有一个这样的输入文件，每列由制表符空格分隔

```
22 2222 .  T    C   .   .   ;AA=1;AFE=1;ASNE=1;EUN=1;AFW=1;MED=1;LAT=1;
22 222  .  T    C   .   .   ;AA=2;AFE=2;ASNE=2;EUN=2;AFW=2;MED=2;LAT=2; 
```

我需要输出如下

```
22 2222 .  T    C   .   . ;AA=1;AFE=1;ASNE=1;EUN=1;AFW=1;MED=1;LAT=1;AVG=1;
22 222  .  T    C   .   . ;AA=2;AFE=2;ASNE=2;EUN=2;AFW=2;MED=2;LAT=2;AVG=2; 
```

其中 AVG 是第 8 列中所有字段的平均值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:03:29.717

这是在路上：

```
awk '{c=0;for(i=2;i<=NF;i++){split($i,d,"=");c+=d[2]}$NF="AVG="c/(NF-2)FS}1' FS=';' OFS=';' file
    22 2222 .  T    C   .   .   ;AA=1;AFE=1;ASNE=1;EUN=1;AFW=1;MED=1;LAT=1;AVG=1;
    22 222  .  T    C   .   .   ;AA=2;AFE=2;ASNE=2;EUN=2;AFW=2;MED=2;LAT=2;AVG=2; 
```

# c# - 页面导航

> ID：15521278
> 
> 赞同：0
> 
> 时间：2013-03-20T10:43:26.910
> 
> 标签：c#, asp.net, navigation

我有一个动态页面，它获取一个查询字符串并根据参数加载当前页面，URL 类似于“dynamic.aspx?p=”，p 是参数。所有页面都在同一个目录中，并且具有不同的名称，例如“关于”、“联系人”等。

问题是我如何使下一个和上一个按钮在页面之间移动而不返回所有链接所在的页面？

我想我可以使用 javascript 来获取当前页面 URL，并使用 switch-case 将 URL 分配给下一个和上一个按钮，有没有更好的方法？

我正在使用 asp.net、C# 和 javascript。

[编辑] 忘了补充说我也可以在听起来更好的代码上做这件事，因为它在服务器端运行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:17:02.723

在服务器端进行。沿着这些思路：

```
var strPrev="";
var strNext="";
switch(Request.QueryString["p"])
{
  case "about":
    strPrev="last";
    strNext="contact";
    break;
  case "contact":
    strPrev="about";
    strNext="last";
    break;
  case "last":
    strPrev="contact";
    strNext="about";
} 
```

当然，有一些方法可以更简洁（数组）或使其更灵活（配置文件或数据库）。如果你想朝那个方向走，请告诉我。

**更新**：这是一个将页面列在数组中的解决方案：

```
var pages = new string[] { "about", "contact", "last" };
var index = Array.IndexOf(pages, Request.QueryString["p"]);
var previousPage = pages[(index + pages.Length - 1) % pages.Length];
var nextPage = pages[(index + 1) % pages.Length]; 
```

在此解决方案中，页面列在数组中（第 1 行）。第二行将文本表示转换为数字（零到二）。如果找不到页面`Array.IndexOf`将返回 -1，这表示数组的最后一项（因为环绕）。最后两行从数组中获取上一个或下一个项目，并带有环绕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:50:38.227

存储来自查询字符串的当前 pgae 值并将其存储在隐藏字段中并将上一页分配给另一个隐藏字段，有一个逻辑来执行此操作。由于导航页面将在服务器端，因此也将流程设为服务器端。这可能比在 javascript 中做容易

# python - Python 中的字符串、整数和运算符

> ID：15521281
> 
> 赞同：0
> 
> 时间：2013-03-20T10:43:29.857
> 
> 标签：python, string, operators, int

如何在运算中使用算术运算符（由用户作为字符串输入）？我可以打印操作本身，但我想打印解决方案！

这是我笨拙的尝试：

```
# Initialise variables

x = 2
y = 3

# Prompt the user for an arithmetic operator

operator = input("Please enter  *,  /,  +,  or  - : ")

# Calculate the operation

result = (str(x) + operator + str(y))

# Display the result

print(result) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T10:45:49.160

使用[`operator`module](http://docs.python.org/2/library/operator.html)，它具有执行与算术运算相同的运算的功能。

```
import operator
ops = {'*': operator.mul, '/': operator.div, '+': operator.add, '-': operator.sub}

op = input("Please enter  *,  /,  +,  or  - : ")
result = ops[op](x, y) 
```

# jquery - Bootstrap twitter Active Navigation Bar - 使用 JQuery 更改类名

> ID：15521283
> 
> 赞同：4
> 
> 时间：2013-03-20T10:43:38.970
> 
> 标签：jquery, html, css, twitter-bootstrap

我使用引导推特，我希望菜单中的不同站点在单击时显示为活动状态。我找到了解决此问题的问题[Bootstrap Twitter CSS Active Navigation](https://stackoverflow.com/questions/9301507/bootstrap-twitter-css-active-navigation)。

我的问题是我无法使 JQuery 函数在其中一个答案中起作用。修改应该非常简单，以使其在我的情况下工作，在 HTML 中是：

```
<script>
$('body').on('.nav li a', 'click', function()
{
    var $thisLi = $(this).parents('li:first');
    var $ul = $thisLi.parents('ul:first');
    if (!$thisLi.hasClass('active'))
    {
        $ul.find('li.active').removeClass('active');
        $thisLi.addClass('active');
    }
});
</script>

<ul class="nav nav-pills pull-left">
    <li class="active"> <a href="home.html">Home</a> </li>
    <li> <a href="about.html">About</a> </li>
</ul> 
```

关于可能是什么问题的任何线索？先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T12:59:57.620

要在第一个答案的评论中回答您的问题， .parents('li') 会在您从当前位置走上 DOM 时找到任何 li 父母。添加 :first 伪选择器可确保您找到第一个。

更好的解决方案是使用 .parent（单数）。例如：`$thisLi.parent('ul')`. 我不相信那是你的问题...

浏览器是否可能只是在您身上加载一个新页面？我没有看到你打电话`event.preventDefault()`，事实上你没有在你的代码中捕获事件，你只是响应它......

此外， .on 是现在绑定到事件的首选方式：

```
$(function(){

    $('.nav li a').on('click', function(e){

        e.preventDefault(); // prevent link click if necessary?

        var $thisLi = $(this).parent('li');
        var $ul = $thisLi.parent('ul');

        if (!$thisLi.hasClass('active'))
        {
            $ul.find('li.active').removeClass('active');
                $thisLi.addClass('active');
        }

    })

}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-27T05:46:22.270

我知道这有点晚了，但迟到总比没有好。

我也有同样的问题，最后写了自己的代码。

希望这对每个人都适用，就像我一样。

jQuery

```
 $(document).ready(function () {
 var page = document.location.href;

 // Set BaseURL
 var baseURL = 'http://www.site.com/';

 // Get current URL and replace baseURL
  var href = window.location.href.replace(baseURL, '');

  // Remove trailing slash
  href = href.substr(-1) == '/' ? href.substr(0, href.length - 1) : href;

  // Get last part of current URL
  var page = href.substr(href.lastIndexOf('/') + 1);

  if(page == ''){
      $('#home').addClass('active');
  }else{
      $('#home').removeClass('active');
  }
  if(page == 'about'){
      $('#about').addClass('active');
  }else{
      $('#about').removeClass('active');
  }
  if(page == 'terms'){
      $('#terms').addClass('active');
  }else{
      $('#terms').removeClass('active');
  }
  if(page == 'contact'){
      $('#contact').addClass('active');
  }else{
      $('#contact').removeClass('active');
  }
}); 
```

与标准 Bootstrap 菜单栏的唯一区别是您必须将 id="home" 添加到主页的 li 中，依此类推。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T10:46:09.093

```
if (!$thisLi.hasClass('active'))
    {
        $ul.find('li').removeClass('active');
        $thisLi.addClass('active');
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T15:30:20.770

一个非常简单的解决方案是手动向每个页面的正文添加一个不同的类，以指示哪个导航项应该处于活动状态。

然后使用 jQuery 检查 body 上的类是什么，并相应地设置活动的 NAV LI 类。

```
<body class="nav-1-active">

<ul>
 <li class="nav1"><a href="#">Home</a></li>
 <li class="nav2"><a href="#">About Us</a></li>
 <li class="nav3"><a href="#">Our Services</a></li>
</ul> 
```

# javascript - 嵌套列表的树形导航

> ID：15521285
> 
> 赞同：1
> 
> 时间：2013-03-20T10:43:39.533
> 
> 标签：javascript, jquery, list, html-lists

我正在尝试为我的网站开发导航树，但它的动态排列没有运气。问题是：我想在单击内部 LI 时打开内部 UL，我能够获取单击的内部 Ul 的索引，但不能全局使用该索引变量。

*   每次我点击任何链接时，页面都会重新加载，所以有没有使用 cookie 的解决方案？

这是html：

```
<ul id="menu">
          <li> <a href="#">Order Management</a>
              <ul id="test">
              <li><a href="#" class="even">orders</a></li>

      <li><a href="#" class="odd">Search Orders</a></li>

                <li><a href="#" class="even">Orderdetail</a></li>
          </ul>
        </li>

    <li> <a href="#">Discount Management</a>
          <ul>
            <li><a href="#" class="even">Subject</a></li>
            <li><a href="#" class="odd">Category</a></li>
            <li><a href="#" class="even">Publisher</a></li>
            <li><a href="#" class="odd">Author</a></li>
            <li><a href="#" class="even">Particular Book</a></li>
          </ul>
        </li>

        <li> <a href="#">Upload File</a>
          <ul>
            <li><a href="#" class="even">Upload excel file</a></li>
          </ul>
        </li>
        <li> <a href="#">Reports</a>
          <ul>

            <li><a href="#" class="even">data over view</a></li>
             <li><a href="#" class="odd">Out Of Stock Product</a></li>
              <li><a href="#" class="even">Invoice Report</a></li>
            <li><a href="#" class="odd">SerachInvoicDispacthed</a></li>

          </ul>
        </li>

        <li> <a href="#">Store Management</a>
          <ul>
            <li><a href="#" class="even">Currency</a></li>
            <li><a href="#" class="odd">Add Country</a></li>
          </ul>
        </li>

      </ul> 
```

这是JS：

```
 function initMenu() {
                   $('#menu ul').hide();
    $('#menu li a').click(
        function() {
          var checkElement = $(this).next();

          if((checkElement.is('ul')) && (checkElement.is(':visible'))) {
            return false;
            }
          if((checkElement.is('ul')) && (!checkElement.is(':visible'))) {
            $('#menu ul:visible').slideUp('normal');
            checkElement.slideDown('normal');
            return false;
            }
          }
        );
        var myIndex = 0;
                   var items = $('#menu ul').click(function() {
                   //e.preventDefault();
                   myIndex = items.index(this);
                   console.log('the index is:'+myIndex);
//here i got index in var myIndex
                    }
                   );
//but i can not access myIndex here , it keeps returning zero
$('#menu  ul:eq('+myIndex+')').show("slow");

      }
    $(document).ready(function() {initMenu();}); 
```

我的帐户已经因为这个问题而被封锁过一次，我请求你们，因为我非常渴望得到这个问题的解决方案。这是小提琴[http://jsfiddle.net/Ekn2V/1/](http://jsfiddle.net/Ekn2V/1/) 没有实际链接，但是当我使用真实链接时，页面会按照我的 struts.xml 中的定义重新加载，因此页面会重新加载此处发生的一切 js 是忽略请告诉我一个 cookie 或类似的相关解决方案。我有 java se 开发经验，我是 web 开发的菜鸟。任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-16T08:53:35.430

首先，您不想在单击`A`元素后重新加载/移动，您需要禁用该操作的默认浏览器行为。您可以在 click 事件处理程序中执行此操作，例如：

```
$('#menu li a').click(function( e ){
  e.preventDefault();
 //..
}); 
```

其次，如果您使用 HTML 5.1 的详细信息/摘要元素，则根本不需要任何 JavaScript 来进行树形导航。在这里找到 [https://codepen.io/dsheiko/details/MvEpXm/](https://codepen.io/dsheiko/details/MvEpXm/)一个带有详细信息/摘要的自定义树构建的工作示例，还具有 CSS3 过渡以在展开时为标记设置动画。此博客文章[http://dsheiko.com/weblog/building-real-life-applications-with-functional-elements-of-html-5-2/](http://dsheiko.com/weblog/building-real-life-applications-with-functional-elements-of-html-5-2/)您可以找到其他示例和说明如何将其与 polyfill 一起使用在旧版 IE 中获得支持

# java - Netbeans 根据另一个下拉列表填充下拉列表 html netbeans

> ID：15521289
> 
> 赞同：0
> 
> 时间：2013-03-20T10:43:49.433
> 
> 标签：java, javascript, sql, jsp, netbeans

我有一个界面，其中我在 html 中有两个下拉列表，一个是手机的标记（marque），另一个是模型。所以标记工作正常（从数据库（sql）调用数据）但我希望每次我选择模型的下拉列表它不应该显示数据库中有关模型的完整数据列表，而只是特定于选择的品牌而不刷新页面。就像我选择诺基亚标记，它会自动显示诺基亚的模型而不是三星或任何其他电话标记！我不知道它在模型上的 sql 是否与我拥有的表模型中一样（model_tel，marque_tel（这是来自 marque_tel 的外键））所以我尝试对 sql 使用 where 命令，但它不起作用，因为我想说在哪里marquel_tel='//在品牌下拉列表中选择的品牌//' 但我不知道如何在 java (html) 中做到这一点

问题是我对 javacsript 或 ajax 不太了解……所以如果你们中的任何一个人能提供帮助，那真的意味着很多

继承人的代码示例到目前为止的样子（我只是直接进入这里的要点）：

```
<label>Marque:

 <span class="small">selectionner la marque</span></label>

<%ResultSet rst = in.executeQuery("select distinct(Marque_Tel) from Marque_Tel");%> 

<table id="d"><tr><td id="k">
       <select name="marque" id="marque"  onchange="displayDate(this)">
       <% while (rst.next()) {%>
       <option></option>
      <option><%=rst.getString(1)%></option> //showin marksfrom data of sql//
      <% }%>`

   </td></tr></table><br><br><br>
            <label>Modele:
           span class="small">selectionner le modele</span></label>
            //callin phone models from sql database down here//

            <%ResultSet rs = in.executeQuery("select * from Modéle_Tel where           
      marque_tel='"+rst.getString(1).toString()//but this in not workin//"' ");%>

     <select name="modele" id="modele" >
       <% while (rs.next()) {%>
       <option></option>
      <option><%=rs.getString(1)%></option>//callin phones models
           </select>

                <button type="submit">VALIDER</button>  </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:49:04.153

你必须使用**Ajax**来解决这个问题。如果不刷新页面，您将无法获得基于另一个下拉列表的填充下拉列表。因此，唯一的选择是使用**Ajax**。

# c++ - 如何允许其他应用程序打开我需要保持打开的文件？

> ID：15521290
> 
> 赞同：0
> 
> 时间：2013-03-20T10:43:51.930
> 
> 标签：c++, windows, file-permissions, file-access

我有一个 C++ windows 应用程序，它打开一个文件（并保持打开状态），如下所示：

```
FILE* fp = NULL;
errno_t result = _wfopen_s(&fp, L"MyRawData.dat", L"wb"); 
```

这很好用，但是当我尝试通过 filezilla 提供该文件时，它在我尝试下载它时拒绝访问该文件（尽管勾选了“允许下载打开以供另一个进程写入的文件”选项）。

这是我在我的软件中做错了什么还是 Filezilla / 一般 Windows 问题的限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:46:20.153

从所述功能的[文档](http://msdn.microsoft.com/en-us/library/z5hh6ee9%28v=vs.110%29.aspx)中：

> 文件由打开`fopen_s`且`_wfopen_s`不可共享。如果您要求文件可共享，请使用`_fsopen`,`_wfsopen`和适当的共享模式常量（例如，`_SH_DENYNO`用于读/写共享）。

# tinyxml - 使用 tinyXml 从 std::string 解码 xml

> ID：15521291
> 
> 赞同：1
> 
> 时间：2013-03-20T10:43:52.523
> 
> 标签：tinyxml

实际上，我有一个 c++ 代码，它使用 TinyXML 库从 xml 文件中解码 xml。

```
std::string = "xmlFile.xml";

TiXmlDocument doc(xml_name);

bool loadOkay = doc.LoadFile();

if (loadOkay){...} 
```

xmlFile.xml 在哪里

```
<?xml version="1.0">

<body>

    ....

</body> 
```

现在我需要解码相同的 xml，但现在我有 xml 内容 atfunction 输入。

我原以为会是这样的：

```
std::string contents = "<?xml version="1.0">    <body> ... </body>";

TiXmlDocument doc(contents);

bool loadOkay = doc.LoadFile();

if (loadOkay){...} 
```

但很明显，这行不通。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T22:06:26.557

尝试使用 TiXmlDocument::Parse() 方法而不是 LoadFile() 方法。也看看这个问题。

[TinyXml 可以从字符串而不是文件加载 Xml 吗？](https://stackoverflow.com/questions/2862892/can-tinyxml-load-xml-from-string-instead-of-file/2863183#2863183)

# linux - 屏幕管理多会话

> ID：15521292
> 
> 赞同：0
> 
> 时间：2013-03-20T10:43:59.887
> 
> 标签：linux, gnu-screen

我有一个名为“super”的会话，在这个会话中我使用了 3 次 command `ctrl-a c`，所以我有 4 个在“super”会话中运行的 shell。

**我的问题是：**如果我通过 ssh 连接到我的机器，如何直接登录“3 bash”外壳（例如）？

我会针对不同的`# bash`.

**额外：**有人知道我如何直接在终端中打印在“超级”会话中创建的所有外壳的列表？（不显示它`screen -X windowlist`，不能保存在文本文件中）。

# .net - 在 UserNamePasswordValidator 中存储自定义信息

> ID：15521294
> 
> 赞同：2
> 
> 时间：2013-03-20T10:44:03.870
> 
> 标签：.net, wcf, security, access-token

我在 .NET 4 上有一个带有自定义 UserNamePasswordValidator 的 WCF 服务，通过 SSL 和消息安全保护。

UserNamePasswordValidator 接收用户名和密码并将其传递给一个存储过程，该过程返回该用户名和密码的有效帐户令牌。

我的问题是我不明白如何在实际的 Web 服务中访问该帐户令牌。我怀疑我必须能够将令牌添加到某处的标头中，但 UserNamePasswordValidator 中尚不存在 OperationContext 并且在 HttpContext 上设置它失败并显示“验证消息安全性时发生错误”。

从我的谷歌搜索来看，我似乎必须实现 IAuthorizationPolicy 或 IIdentity，但它们都无法访问密码。

我认为许多服务会采用用户名和密码并使用它来查找相关帐户。我是不是把它复杂化了，还是我只是错过了一些明显的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:19:27.720

如果您想在身份验证时捕获其他信息（即：您的令牌），则需要实现自定义 UserNameSecurityTokenAuthenticator，而不仅仅是自定义 UserNamePasswordValidator。有关示例，请参见[http://www.neovolve.com/2008/04/07/wcf-security-getting-the-password-of-the-user/ 。](http://www.neovolve.com/2008/04/07/wcf-security-getting-the-password-of-the-user/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-19T12:59:31.397

我最终检查了 OperationContext.Current.ServiceSecurityContext.PrimaryIdentity 以查看用户是否已通过身份验证，然后仅根据身份名称从数据库中检索我需要的信息。这似乎工作得很好。

# comments - 在其他用户的 Facebook 页面上查看帖子/评论时出现问题

> ID：15521297
> 
> 赞同：1
> 
> 时间：2013-03-20T10:44:14.620
> 
> 标签：comments, facebook-wall

我对其他用户的墙/时间轴上的帖子/评论没有显示有疑问。这是一个我不是朋友的用户，但我认识的人，也不是这个人的朋友，能够查看在 Facebook 页面上发布的帖子/评论，这让我认为这不是那个人的设置问题但也许是我自己的设置。如果某人的墙对每个人都是完全可见的，我应该能够看到那个页面上的内容，对吧？

# c++ - 特定模板参数的模板中的断点

> ID：15521299
> 
> 赞同：0
> 
> 时间：2013-03-20T10:44:19.220
> 
> 标签：c++, templates, visual-c++, template-specialization, conditional-breakpoint

如果我想在 I == 10 的情况下在构造函数中设置断点怎么办？

```
template < typename T, int I >
class C 
{
public:

    C<T, I>() { cout << I << endl; }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:05:27.110

如果条件断点不起作用，请尝试

```
template < typename T, int I >
class C 
{
public:

    C() 
    {
       if(I == 10)
       {
*         int a= 0; //or try __debugbreak();
       }
       cout << I << endl;
    }
}; 
```

**编辑** 要打破特定课程，您可以`std::is_same<T, U>::value`在条件下使用（或增强模拟）

# qt - 在 Qt5 中创建静态库并使用它

> ID：15521308
> 
> 赞同：4
> 
> 时间：2013-03-20T10:44:40.500
> 
> 标签：qt, qt5

我正在尝试为我的项目创建一个库。（Qt5、Qt Creator、VS2010编译器）

我从一个最小的测试样本开始检查它是​​如何工作的。

1-我制作了一个包含带有方法的类的库

2-我编译它并获取 Dll 和 Lib 文件

3-在主要应用程序中，我成功地添加了这个库及其到 .pro 和测试库的路径。

现在，我想摆脱 DLL 并将 lib 文件用作静态库。

所以我将此行添加到我的库 .pro 文件中

```
CONFIG+=staticlib 
```

现在，我在编译后得到了 lib 文件，但是我不能在我的项目中使用它，并且我得到了 Unresolved external symbols... 错误

当我删除 CONFIG+=staticlib 时，它又可以工作了！但它不是静态的。

这些是我添加到主项目的 .pro 文件以加载/链接库的行

```
INCLUDEPATH +="G:/TestLib/testLib"
LIBS +=-l"G:/Build/debug/testLib" 
```

所以问题是：是否可以在 Qt 中拥有我自己的静态库（非商业许可）？

如果是，我的方法有什么问题？

我应该更改 LIBS+=... 中的某些内容以指定其静态库吗？

我已经阅读了[这篇文章](http://qt-project.org/wiki/How_to_create_a_library_with_Qt_and_use_it_in_an_application/)，我的代码似乎没有任何问题。

请问有什么帮助吗？

**编辑：问题已解决**
问题是我们不需要静态库的 Q_DECL_EXPORT 和 Q_DECL_IMPORT ！在那篇粗略的虚幻文章中没有明确提到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T19:45:48.847

问题解决了

问题是我们不需要静态库`Q_DECL_EXPORT`！`Q_DECL_IMPORT`在那篇粗略的虚幻文章中没有明确提到这一点。

`Q_DECL_EXPORT`并且`Q_DECL_IMPORT`对于动态库是必需的。

# java - 自定义枚举也是可序列化的吗？

> ID：15521309
> 
> 赞同：68
> 
> 时间：2013-03-20T10:44:47.350
> 
> 标签：java, android

我知道`Enum`是可序列化的。因此，这样做是安全的。(selectedCountry 是`enum Country`)

## 没有客户成员变量的原始枚举

```
public enum Country {
    Australia,
    Austria,
    UnitedState;
} 
```

## 分段

```
@Override
public void onActivityCreated (Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    if (savedInstanceState != null) {
        selectedCountry = (Country)savedInstanceState.getSerializable(SELECTED_COUNTRY_KEY);
    }
}

@Override
public void onSaveInstanceState(Bundle savedInstanceState) {
    savedInstanceState.putSerializable(SELECTED_COUNTRY_KEY, selectedCountry);
} 
```

但是，如果我在自定义枚举类中有不可序列化的成员怎么办？例如，

## 原始枚举客户成员变量

```
package org.yccheok;

import org.yccheok.R;

/**
 *
 * @author yccheok
 */
public enum Country {
    Australia(R.drawable.flag_au),
    Austria(R.drawable.flag_at),
    UnitedState(R.drawable.flag_us);

    Country(int icon) {
        this.icon = icon;
        nonSerializableClass = new NonSerializableClass(this.toString());
    }

    public int getIcon() {
        return icon;
    }

    public static class NonSerializableClass {
        public NonSerializableClass(String dummy) { this.dummy = dummy; }
        public String dummy;
    }

    private final int icon;

    public NonSerializableClass nonSerializableClass;
} 
```

我测试过。有用。（我通过在序列化前后打印出所有成员变量的值来测试。它们之前和之后是一样的）

**但是，我不明白它为什么起作用？由于我没有按照界面的要求提供适当的`readObject`and 。`writeObject``Serializable`**

正如 Effective Java *Item 75: Consider using a custom serialized form*中指出的那样，如果我的枚举中有自定义成员变量，我是否需要提供自己的`readObject`and ？`writeObject`

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2013-03-20T11:28:33.313

它起作用的原因是`Enum`'s 的序列化过程与其他类的序列化过程不同。从[官方文档](http://docs.oracle.com/javase/1.5.0/docs/guide/serialization/spec/serial-arch.html#enum)：

> **1.12 枚举常量的序列化**
> 
> 枚举常量的序列化方式与普通的可序列化或可外部化对象不同。枚举常量的序列化形式仅由其名称组成；常量的字段值不存在于表单中。为了序列化枚举常量，ObjectOutputStream 写入枚举常量的 name 方法返回的值。为了反序列化一个枚举常量，ObjectInputStream 从流中读取常量名；然后通过调用 java.lang.Enum.valueOf 方法获得反序列化的常量，将常量的枚举类型与接收到的常量名称一起作为参数传递。与其他可序列化或可外部化的对象一样，枚举常量可以充当随后出现在序列化流中的反向引用的目标。

这意味着，您的所有自定义字段**都不会**被序列化。在您的情况下，一切正常，因为您的应用程序进程仍在运行，并且您获得的**实例** `Enum`与传递给`savedInstanceState.putSerializable`.

但是想象一下你的应用程序因为`Android`没有足够的内存而被杀死的情况。下次用户打开应用程序时，您将获得一个**新** `Enum`实例，并且所有自定义字段都将丢失并由构造函数重新初始化。因此，枚举中的可变字段总是有效的`transient`。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-20T10:54:12.910

根据[Serializable](http://developer.android.com/reference/java/io/Serializable.html)文档，`readObject`根本`writeObject`不需要，所以您的问题可能并不完全正确。

`Serializable`是一个[标记接口](http://en.wikipedia.org/wiki/Marker_interface_pattern)，没有任何方法。

我向您推荐[这个答案](https://stackoverflow.com/a/352133/657487)，它提供了有关序列化实现的更多详细信息（这解释了为什么您不需要写入和读取功能）。

而且，正如Dianne Hackborn[在这里提到的，](https://stackoverflow.com/questions/3611843/is-using-serializable-in-android-bad) [Parcelable](http://developer.android.com/reference/android/os/Parcelable.html)对于 Android 来说效率更高。

如果您对 Enum 特别感兴趣，请参阅[以下段落](http://docs.oracle.com/javase/6/docs/platform/serialization/spec/serial-arch.html#6469)：

> 1.12 枚举常量的序列化
> 
> 枚举常量的序列化方式与普通的可序列化或可外部化对象不同。枚举常量的序列化形式仅由其名称组成；常量的字段值不存在于表单中。为了序列化枚举常量，ObjectOutputStream 写入枚举常量的 name 方法返回的值。为了反序列化一个枚举常量，ObjectInputStream 从流中读取常量名；然后通过调用 java.lang.Enum.valueOf 方法获得反序列化的常量，将常量的枚举类型与接收到的常量名称一起作为参数传递。与其他可序列化或可外部化的对象一样，枚举常量可以充当随后出现在序列化流中的反向引用的目标。
> 
> 枚举常量的序列化过程无法自定义：在序列化和反序列化过程中，枚举类型定义的任何类特定的 writeObject、readObject、readObjectNoData、writeReplace 和 readResolve 方法都将被忽略。同样，任何 serialPersistentFields 或 serialVersionUID 字段声明也将被忽略——所有枚举类型都有一个固定的 serialVersionUID 为 0L。没有必要为枚举类型记录可序列化字段和数据，因为发送的数据类型没有变化。

所以，我不认为这`Enum`是测试内部不可序列化类工作的正确选择。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-20T11:59:26.573

枚举成员的序列化不起作用。当@vmironov 回答时，nonSerializable 字段永远不会被序列化。这是一个测试：

```
public enum Country {
Australia;

    public static class NonSerializableClass {
       public NonSerializableClass() {}
       public String dummy;
    }

    public NonSerializableClass nonSerializableClass;
} 
```

将枚举写入序列化流的代码：

```
public class SerializationTestWrite {
    public static void main(String[] args) throws Exception{
        FileOutputStream f = new FileOutputStream("tmp");
        ObjectOutput s = new ObjectOutputStream(f);

        Country.Australia.nonSerializableClass = new Country.NonSerializableClass();
        Country.Australia.nonSerializableClass.dummy = "abc";

        s.writeObject(Country.Australia);
        s.flush();

        System.out.println(Country.Australia.nonSerializableClass.dummy);
    }
} 
```

在写入虚拟字段的值是：`abc`

从序列化流中读取枚举的代码：

```
public class SerializationTestRead {
    public static void main(String[] args) throws Exception{
        FileInputStream in = new FileInputStream("tmp");
        ObjectInputStream so = new ObjectInputStream(in);
        Country readed = (Country) so.readObject();

        System.out.println(readed.nonSerializableClass);
    }
} 
```

但在阅读时，该字段的`nonSerializableClass`值为：null

# java - Spring Security 中用于身份验证的模拟对象

> ID：15521310
> 
> 赞同：3
> 
> 时间：2013-03-20T10:44:55.600
> 
> 标签：java, spring, spring-security, mocking, testng

现在对于单元测试，我需要验证方法来假装它工作正常，在我的情况下什么都不做，所以我可以测试方法本身是否完成了预期的工作（根据单元测试原则在其他地方测试了身份验证，但是身份验证需要在该方法中调用）

这是我的 TestNG 类，我需要为身份验证制作模拟对象：

```
package in.hexgen.api.facade;

import javax.annotation.Resource;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.security.core.Authentication;
import org.testng.annotations.Test;

import com.hexgen.api.facade.security.HexGenPermissionEvaluator;

public class HexGenPermissionEvaluatorTest {
     private static final Logger logger = LoggerFactory.getLogger(HexGenPermissionEvaluatorTest.class);

  Object name="akash";
  Object permission="CREATE_REQUISITION";
  Authentication authentication;

  //@Resource(name = "permissionEval")
  private HexGenPermissionEvaluator permissionEval;

  @Test
  public void hasPermission() {
      //authentication.setAuthenticated(true);

      logger.debug("HexGenPermissionEvaluator Generate - starting ...");
         permissionEval.hasPermission(authentication,name, permission);
      logger.debug("HexGenPermissionEvaluator Generate - completed ...");
  }

} 
```

这个怎么做。

此致

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T11:19:37.660

考虑到`permissionEval`对象调用`authentication.isAuthenticatedFor(name,permission)`，使用 Mockito ( [https://code.google.com/p/mockito/](https://code.google.com/p/mockito/) )：

```
import static org.mockito.Mockito.*

...

@Test
public void test(){
    // Given
    Authentication authentication = mock(Authentication.class);
    when(authentication.isAuthenticatedFor(eq(name),eq(permission)).thenReturn(true);

    // When
    permissionEval.hasPermission(authentication,name, permission);

    // Then
    // Do you asserts/verify
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-23T15:46:52.357

您可以像这样在 @Test 方法上方添加 @WithMockUser

```
@Test
@WithMockUser(username = "user1", password = "user1", authorities = {
        "ROLE_ADMIN" })
public void testDeleteUser() throws Exception {
    User currentUser = createUser(1L, new Role(1L, "admin"));
    User userForDelete = createUser(2L, new Role(2L, "user"));
    when(userDaoMock.findByLogin(currentUser.getLogin()))
            .thenReturn(currentUser);
    mockMvc.perform(get("/admin/delete/{id}", userForDelete.getId()))
            .andExpect(status().is3xxRedirection())
            .andExpect(redirectedUrl("/admin"));
} 
```

# jquery - Highcharts 无法在 Internet Explorer 中呈现

> ID：15521313
> 
> 赞同：2
> 
> 时间：2013-03-20T10:45:04.190
> 
> 标签：jquery, css, highcharts, lightbox

我有一个似乎只影响 Internet Explorer 8 的问题。

我已经使用[http://www.highcharts.com/](http://www.highcharts.com/)中的 highcharts.js 脚本在我的网站上显示数据，但是我尝试在灯箱中显示这些数据并使用了[http://buckwilson中的 lightbox_me.js 脚本.me/lightboxme/](http://buckwilson.me/lightboxme/)

我将尝试显示我使用的代码：

```
<script type="text/javascript">

var chart;
$(document).ready(function() {
chart = new Highcharts.Chart({
chart: {
renderTo: 'analysis',
defaultSeriesType: 'bar',
backgroundColor: 'rgba(0,0,0,0)'
},
title: {
text: ''
},
subtitle: {
text: ''

},
xAxis: {
categories: ['First Impressions', 'Politeness/Courtesy', 'Helpfulness', 'Speed and Efficiency', 'Reliability', 'Trustworthiness', 'Value for Money', 'Quality of service', 'After Sales', 'Overall Satisfaction'],
title: {
text: null
}
},
yAxis: {
min: 0,
max:100,
title: {
text: 'Overall Score (%)',
align: 'middle'
}
},
tooltip: {
formatter: function() {
return ''+
this.y +' %';
}
},
plotOptions: {

bar: {
dataLabels: {
enabled: false
}
}
},

legend: {
enabled: false,
layout: 'vertical',
align: 'right',
verticalAlign: 'top',
x: -100,
y: 100,
floating: true,
borderWidth: 1,
backgroundColor: '#FFFFFF',
shadow: false
},
credits: {
enabled: false
},
series: [{
name: 'Year 2012',
data: [<?php echo "$first_impression".","."$politeness".","."$knowledge".","."$speed".","."$reliability".","."$honesty".","."$value".","."$quality".","."$after_sales".","."$satisfaction"; ?>]
}]
});

});

</script> 
```

如您所见，我使用 php 插入统计信息。

然后我有灯箱脚本：

```
$('#scores_button').click(function(e) {
$('#scores_container').lightbox_me({
centered: true, 
onLoad: function() { 
$('#scores_container').find('input:first').focus()
}
});
e.preventDefault();
}); 
```

这是html：

```
<div id='scores_container'>

<h1 class='lightbox_header'>Areas of Performance</h1>

<div id='analysis'>

</div>

<p class='lightbox_paragraph'>We asked all repondents to score the business on it's performance in the areas above. This chart shows the average scores in each area.</p>

<a id='close_x' class='close sprited' href='#'>close</a>

</div> 
```

最后是我的 CSS

```
#scores_container {
width:760px;
display:none;
background-color:#f2f5f7;
padding:30px 40px 40px 40px;
-moz-border-radius: 3px;
-webkit-border-radius: 3px;
border-radius: 3px;
border: 1px solid #536376;
-webkit-box-shadow: rgba(0,0,0,.6) 0px 2px 12px;
-moz-box-shadow:  rgba(0,0,0,.6) 0px 2px 12px;
box-shadow:  rgba(0,0,0,.6) 0px 2px 12px;
position:absolute;
top:0px;
left:0px;
}

h1.lightbox_header{
font-size:22px;
font-weight:bold;
color:#536376;
margin-bottom:20px;
border-bottom:1px solid #cdd0d9;
padding-bottom:10px;
}

#analysis{
width:680px;
height:400px;
}

p.lightbox_paragraph, p.lightbox_paragraph_first{
font-family: 'PT Sans', sans-serif;
font-weight:700;
font-style:italic;
color:#536376;
border-top:1px solid #cdd0d9;
padding-top:10px;
} 
```

此代码适用于我测试过的所有浏览器，但 Internet Explorer 除外。Internet explorer 8 是我在寻找解决方案时一直在使用的浏览器。

请看它在 ie8 中的显示截图：

![互联网浏览器 8](../Images/f2ef885543f23e8413f9812949b18de4.png)

以及它在 Google Chrome 中的显示方式：

![谷歌浏览器](../Images/0d7715e756a27b2ee574fd5e8fa743ff.png)

我的想法是，也许是我的 css 导致了问题，但无论我尝试什么，我似乎都无法显示图表。图表容器也没有在浏览器窗口中垂直居中，但是一旦我得到图表来呈现，我就可以处理这个问题。任何帮助将非常感激。

我知道这不是一个特别完善的网站，因为我只是在学习，但如果有帮助，请参阅以下网站本身的链接：[http ://www.bbg.im/development](http://www.bbg.im/development)

单击图表图标时，配置文件页面上发生错误。

我在同一个灯箱脚本中也遇到了与饼图和谷歌地图相同/相似的问题。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T11:30:51.487

刚刚查看了 HTML 文件的源代码，惊讶地发现数组中多了一个逗号。

`series: [{` `name: 'Year 2012',` `data: [95,100,95,95,95,100,80,90,93,]` `}]`

您能否删除数据数组末尾的尾随逗号。即数据数组应该像这样呈现。

`series: [{` `name: 'Year 2012',` `data: [95,100,95,95,95,100,80,90,93]` `}]`

# php - PHP 正则表达式不匹配所需的子字符串

> ID：15521315
> 
> 赞同：0
> 
> 时间：2013-03-20T10:45:12.900
> 
> 标签：php, regex

我写了下一个正则表达式

```
$pattern = "~\d+[.][\s]*[A-Z]{1}[A-Za-z0-9\s-']+~"; 
```

为了将子字符串匹配为`2.bon jovi - it's my life`

问题是唯一被识别的部分是 -`bon jovi` 这个正则表达式没有识别“ - ”或“'”。

我宁愿知道我写的正则表达式有什么问题，而不是得到一个新的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:48:50.743

一个更好的正则表达式来处理这将是......

```
$pattern = "~\d+\.\s*[\pL\pP\s]+~"; 
```

[键盘](http://codepad.viper-7.com/H2bwsj)。

这将匹配一个数字，后跟一个`.`，然后是可选的空格，然后是一个或多个 Unicode 字母、空格或标点符号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:58:23.187

您的正则表达式如下。

```
~                 // delimiter
\d+               // 1 or more numbers
[.]               // a period
[\s]*             // 0 or more whitespace characters
[A-Z]{1}          // 1 upper case letter
[A-Za-z0-9\s-\']+ // 1 or more characters, from the character class
~                 //delimiter 
```

将其与字符串 "2.bon jovi" 进行比较，您有：

```
~                 //
\d+               // "2"
[.]               // "."
[\s]*             // ""
[A-Z]{1}          // <- NO MATCH
[A-Za-z0-9\s-\']+ // 
~                 // 
```

“bon”不以大写字母开头，因此不匹配`[A-Z]{1}`

## 更清洁的正则表达式

你可以做一些简单的事情来清理你的正则表达式

*   不要对一个字符使用字符类
*   不指定`{1}`它与不存在相同

将上述内容应用于您现有的正则表达式，您将获得：

```
$pattern = "~\d+\.\s*[A-Z][A-Za-z0-9\s-']+~"; 
```

这更容易阅读。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T11:03:56.020

所以我理解这个正则表达式的方式是：

```
\d+      // Match any digit, 1 or more times  
[.]      // Match a dot  
[\s]*    // Match 0 or more whitespace characters  
[A-Z]{1} // Match characters between an UPPERCASE A-Z Range 1 time  
[A-Za-z0-9\s-']+ // Match characters between A-Z, a-z, 0-9, whitespace, dashe and apostrophe 
```

所以马上，你的 'bon jovi' 可能不会匹配，因为它是小写的，你只是在寻找大写字符。'bon jovi' 还包含一个空格，因此也许更改正则表达式的该部分以允许小写字符和空格可能会有所帮助，因此您最终会得到：

```
$pattern = "~\d+[.][\s]*[A-Za-z\s]{1}[A-Za-z0-9\s-']+~"; 
```

注意：我在 RegExr ( [http://gskinner.com/RegExr/](http://gskinner.com/RegExr/) ) 上快速测试了它，它似乎与字符串匹配得很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T10:50:53.347

您的正则表达式指出，在句点字符（可以更改为`\.`）之后，您将有零个或多个空格字符，然后应后跟 1 个*大写*字母。在您的字符串中，您没有任何大写字母。

其次，`-`当你想匹配它时，应该放在最后。因此，将您的正则表达式更改为：`~\d+[.][\s]*[A-Z]{1}[A-Za-z0-9\s'-]+~`将匹配如下内容：`2.Bon jovi - it's my life`。

另一方面，您可以将其更改为：`~\d+[.][\s]*[A-Za-z0-9\s'-]+~`以匹配如下内容：`2.bon jovi - it's my life`。

编辑：根据 Marko D 和 aleation 的评论进行了修改。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T10:54:40.263

```
$pattern = "~\d+\..*~";    
$string = "2.bon jovi - it's my life";
preg_match($pattern, $string, $match);

print_r($match); 
```

输出：数组（[0] => 2.bon jovi - 这是我的生活）

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-20T10:51:57.327

您的`[A-Z]{1}`子模式需要一个大写字母，因此`"2.bon jovi - it's my life"`不匹配。

而且你需要`-`在`[A-Za-z0-9\s-']`字符类中转义，或者把它放在开头或结尾，否则它指定了一个范围。

```
"~\d+\.[A-Za-z0-9\s'-]+~" 
```

正如评论中所指出的，实际上没有必要`-`在您的正则表达式中转义字符类中的 。那只是因为您碰巧在它前面加上了一个`\s`不能成为范围一部分的元字符。通常，如果你想匹配一个文字`-`并且你有一个字符类，你必须像上面描述的那样对其进行转义或定位。

# php - 在分页模式下计算表中的总记录

> ID：15521317
> 
> 赞同：0
> 
> 时间：2013-03-20T10:45:17.097
> 
> 标签：php, mysql

我有一个带有表格的项目（图 A），并通过分页将所有记录显示到 Web 浏览器，如下所示：

![在此处输入图像描述](../Images/d1fd95a45d02b72e234974d3a66efa19.png)

我怎样才能使“金额”的累积每一页在最后一页中正确计算？

我试过循环，但它给我的结果是第 1 页 = 21，第 2 页 = 24，依此类推。当然这是错误的。

需要帮忙。谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:47:50.603

单独查询总金额：

```
SELECT SUM(Amount) AS TotalAmount
FROM tablename 
```

然后将其显示在页面的末尾，在循环之外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T10:54:53.720

那么 MySQL WITH ROLLUP 就是用来做这个的。这最后添加了一个额外的行，并且可以与聚合函数一起使用。

```
SELECT
  id,
  IFNULL(stock,'Total') AS `stock`,
  SUM(amount) AS Total
FROM board
GROUP BY stock WITH ROLLUP 
```

您可以根据您的要求在此查询中添加限制

## [SQL 小提琴示例](http://www.sqlfiddle.com/#!2/c096e/3)

有限制

## [SQL 小提琴示例](http://www.sqlfiddle.com/#!2/c096e/4)

# cocos2d-iphone - ccTouchBegan 不工作-iOS

> ID：15521319
> 
> 赞同：0
> 
> 时间：2013-03-20T10:45:22.077
> 
> 标签：cocos2d-iphone

```
- (BOOL)ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event {

    if (_nextProjectile != nil) return;

    CGPoint location = [touch locationInView:[touch view]];
    location = [[CCDirector sharedDirector] convertToGL:location];

    [[SimpleAudioEngine sharedEngine] playEffect:@"pew-pew-lei.caf"];

    CGSize winSize = [[CCDirector sharedDirector] winSize]; 

    CGRect rect = CGRectMake(imgArrow.position.x, imgArrow.position.y,imgArrow.contentSize.width, imgArrow.contentSize.height); 

    if(CGRectContainsPoint(rect, location))
    {
        **_nextProjectile = [[CCSprite spriteWithFile:@"newarrow.png"]retain];
        _nextProjectile.position = ccp(430,190);**

        [imgArrow runAction:[CCSequence actions:
                             [CCRotateTo actionWithDuration:0 angle:0],
                             [CCCallFunc actionWithTarget:self selector:@selector(finishShoot)],
                             nil]]; 

        [blankBow setVisible:true];
        [imgArrow setVisible:false];   
        [walkAnimFrames addObject:
         [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:
          [NSString stringWithFormat:@"bow1.png", 0]]];

        [walkAnimFrames addObject:
         [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:
          [NSString stringWithFormat:@"bow2.png", 1]]];

        [walkAnimFrames addObject:
         [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:
          [NSString stringWithFormat:@"bow3.png", 2]]];

        walkAnim = [CCAnimation animationWithFrames:walkAnimFrames delay:0.2f];

        self.walkAction = [CCRepeatForever actionWithAction:
                           [CCAnimate actionWithAnimation:walkAnim restoreOriginalFrame:NO]];

        self.walkAction.tag = 1;
        [blankBow runAction:_walkAction];

        CCSprite *sprite = blankBow;

        CCCallBlock *block = [CCCallBlock actionWithBlock:^{
            [sprite stopActionByTag:1];
        }];
        CCDelayTime *time = [CCDelayTime actionWithDuration:0.3];
        [sprite runAction:[CCSequence actions:time, block, nil]];

        if(flagmultitouch == TRUE)
        {  
            id actionMove = [CCMoveTo actionWithDuration:1.5 
                                                position:ccp(-48,160)];
            id actionMoveDone = [CCCallFuncN actionWithTarget:self 
                                                     selector:@selector(spriteMoveFinished:)];
            [_nextProjectile runAction:[CCSequence actions:actionMove, actionMoveDone, nil]];

            flagmultitouch = FALSE;  
        } 

        if(_nextProjectile !=nil)
            _nextProjectile.tag = 2;
    }
    else
    {

    }

    return YES;
} 
```

问题在于

**_nextProjectile = [[CCSprite spriteWithFile:@"newarrow.png"]retain]; _nextProjectile.position = ccp(430,190);**

当我在 init 方法中初始化 __nextProjectile 时，ccTouchBegan 方法不起作用.. 并通过**放置 _nextProjectile = [[CCSprite spriteWithFile:@"newarrow.png"]retain]; _nextProjectile.position = ccp(430,190);** 在 ccTouchBegan 中，每次 Touch 执行时都会初始化。有什么帮助吗？！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T10:48:57.043

为同一层启用触摸。

```
-(void)onEnter
{
    [super onEnter];

    self.touchEnabled = YES; //In Cocos2d 1.0: self.isTouchEnabled
}

- (void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    CGPoint location = [touch locationInView: [touch view]];
    location = [[CCDirector sharedDirector] convertToGL:location];

} 
```

# ios - 如何对 NSDictionary 数组进行排序

> ID：15521320
> 
> 赞同：0
> 
> 时间：2013-03-20T10:45:23.677
> 
> 标签：ios

我有如下的 NSDictionary 数组

```
array(
        {
        Birthdate = "03/20";
        Names = "Abhinavswati Chaudhary";
        remain = 0;
    },
        {
        Birthdate = "09/22/1986";
        Names = "Aisa Soni";
        remain = 186;
    },
        {
        Birthdate = "03/02/1990";
        Names = "Anuj Parekh";
        remain = 347;
    },
        {
        Birthdate = "05/22/1988";
        Names = "Ajay Desai";
        remain = 63;
    }
) 
```

我怎样才能按照升序对该数组进行排序以保持例如它应该像

```
 array(
       {
       birthdate=...
       name =abhivan
       remanin =0;
   },
      {
       brithdate = "05/22/1988";
       name =ajay
       remain =63
   },
      {
       and so on.... 
```

请建议一些代码提前谢谢你

当我们使用 NSsortDiscripor 时，仍然需要是 NSNumber，这可能是我的剩余数字实际上是字符串的原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T10:56:01.160

这很简单，使用`sortedArrayUsingComparator`NSArray 的方法。
在您的情况下，它应该如下所示：

```
yourArray = [yourArray sortedArrayUsingComparator:^NSComparisonResult(NSDictionary *obj1, NSDictionary *obj2) {
    // get values
    NSNumber *remain1 = obj1[@"remain"];
    NSNumber *remain2 = obj2[@"remain"];

    return [remain1 compare:remain2];
}]; 
```

# ios - UIImageJPEGRepresentation 和 UIImagePNGRepresentation 都很慢

> ID：15521321
> 
> 赞同：3
> 
> 时间：2013-03-20T10:45:25.220
> 
> 标签：ios, nsdata, image-resizing, uiimagejpegrepresentation, uiimagepngrepresentation

在这里，我在具有静态方法的 UIImage 上按类别将我的图像转换为二进制数据。我的问题是 UIImageJPEGRepresentation 和 UIImagePNGRepresentation 非常慢，最多 6 秒。我需要 1 秒的解决方案。任何人都可以帮助我。在这里，我将图像传递给类别方法，直到其大小减小到小于或等于 10kbs。

```
 -(NSData *)imageConvertToBinary :(UIImage *) image{

        NSLog(@"Image Convert  ");

        //UIImagePNGRepresentation(image);
        NSData *imageData = UIImageJPEGRepresentation(image, .000032);
         NSLog(@"Image Done  ");

        //Change size of image to 10kbs

        int size = imageData.length;
        NSLog(@"SIZE OF IMAGE:First %i ", size);
        NSData *data = UIImageJPEGRepresentation(image, .0032);
        NSLog(@"Start while  ");
        int temp=0;
        while (data.length / 1000 >= 10) {
            image = [UIImage imageWithImage:image andWidth:image.size.width/2 andHeight:image.size.height/2];

            data = UIImageJPEGRepresentation(image, .0032);
            temp++;
            NSLog(@"temp  %u",temp);

        }

        size = data.length;
        NSLog(@"SIZE OF IMAGE:after %i ", size);

        return data;

    }

and also i have category class on UIImage
@implementation UIImage (ImageProcessing)

+(UIImage*)imageWithImage:(UIImage*)image andWidth:(CGFloat)width andHeight:(CGFloat)height
{
    UIGraphicsBeginImageContext( CGSizeMake(width, height));
    [image drawInRect:CGRectMake(0,0,width,height)];
    UIImage* newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return newImage;
}
@end 
```

* * *

NSData *数据; 必须等于某事

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T11:17:31.580

我将您使用的代码减少了两倍 UIImageJPEGRepresentation 试试这个

```
- (NSData *)imageConvertToBinary :(UIImage *) image{
    NSData *data ;
    NSLog(@"Start while  ");
    int temp=0;
    while (data.length / 1000 >= 10) {
        image = [UIImage imageWithImage:image andWidth:image.size.width/2 andHeight:image.size.height/2];
        data = UIImageJPEGRepresentation(image, .0032);
        temp++;
        NSLog(@"temp  %u",temp);
    }
    NSLog(@"End while  ");
    int size = data.length;
    NSLog(@"SIZE OF IMAGE:after %i ", size);
    return data;
} 
```

# c# - 无法在我的面板上显示图像

> ID：15521322
> 
> 赞同：0
> 
> 时间：2013-03-20T10:45:27.173
> 
> 标签：c#, image, panel, system.drawing

我正在尝试将游戏的图像绘制到 C# 的面板上。我没有绘制任何图像，也无法弄清楚为什么永远不会调用此方法：

> 私人无效playerPanel_Paint（对象发送者，PaintEventArgs e）

这是我的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace FlightOfTheNavigator
{
    public partial class Form1 : Form
    {
        // Load Sprites
        public Bitmap playerShip = new Bitmap(FlightOfTheNavigator.Properties.Resources.testship);

        public Form1()
        {
            InitializeComponent();        
            SetupGame();
        }

        public void SetupGame()
        {
            // Setup Console
            txtConsole.Text = "Loading Ship Bios v3.4.12c ..." + 
                               Environment.NewLine + 
                               "Console Ready" + 
                               Environment.NewLine + 
                               "----------------------------------------------------------------------------------------" + 
                               Environment.NewLine +
                               Environment.NewLine;

            // Setup Basic Weapons
            listWeapons.Items.Add("Pulse Lazers");
            listWeapons.Items.Add("Cluster Missiles");

            // Set Shield Perecentage
            txtShields.Text = "0%";
        }

        private void trackShield_Scroll(object sender, EventArgs e)
        {
            txtShields.Text = "" + trackShield.Value + "%";
        }

        private void playerPanel_Paint(object sender, PaintEventArgs e)
        {
            Graphics g = playerPanel.CreateGraphics();
            g.DrawImage(playerShip, 0, 0,100,100);
        }

        private void button1_Click(object sender, EventArgs e)
        {
            // Invalidate the panel. This will lead to a call of 'playerPanel_Paint'
            playerPanel.Refresh();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T18:35:18.637

确保`Paint`面板的事件附加到`playerPanel_Paint`方法。

打开 Desinger，选择面板 ( `playerPanel`)，按下`F4`以调出属性窗口，然后单击属性窗口上方的闪电以显示事件。检查`Paint`那里的事件。如果为空，请打开下拉菜单并选择`playerPanel_Paint`方法。

您也可以在代码中执行此操作。将其放入表单的构造函数中`InitializeComponent()`：

```
this.playerPanel.Paint += PaintEventHandler(playerPanel_Paint); 
```

# paypal - 将 item_number 传递给托管按钮

> ID：15521324
> 
> 赞同：-1
> 
> 时间：2013-03-20T10:45:32.667
> 
> 标签：paypal

我有一个小而简单的网站，我在该网站上提供 40 种具有相同定价结构的不同商品。我创建了一个具有该定价结构的托管贝宝添加到购物车按钮，以及一个虚拟的“项目名称”和“项目 ID”。

然后，我为每个项目生成一个 html 页面，其中包含对托管按钮的表单引用，但添加了传递单个项目的 item_name 和 item_number 的隐藏变量。

当出现在 paypal 购物车中时，传递的 item_name 变量成功地覆盖了托管按钮中的虚拟“项目名称”，但传递的 item_number 变量不会覆盖按钮中的虚拟“项目 ID”。我在 HTML 变量文档中没有看到 item_id 变量。

如果我可以覆盖“item_name”，我应该能够覆盖“item id”似乎是合乎逻辑的，但是如果 item_number 变量不这样做，那又是什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:56:40.353

使用托管按钮时，允许覆盖某些变量，而其他变量则不能如您所见。您的选择是使用非托管明文按钮，在其中覆盖您想要在页面上的任何选项，或者使用按钮管理器 API 即时生成托管或加密按钮。然后，这将允许您传递您想要的任何变量，并且您将在您的响应中获得托管或加密的代码，然后您将在网站上显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-02T17:51:14.720

我尝试了 Button API 并在创建托管按钮时添加 item_number var 也不起作用，`item_number = 0`如果您`BMCreateButtonResponseType`仅使用 paypal 示例中的 Submit 方法，它会创建一个托管按钮。

为了获得 item_number 您需要设置库存，通过使用

```
BMSetInventoryRequestType request = new BMSetInventoryRequestType(); 
request.ItemTrackingDetails.ItemNumber = ItemNumber; 
```

# c# - 页面丢失格式

> ID：15521328
> 
> 赞同：0
> 
> 时间：2013-03-20T10:45:42.063
> 
> 标签：c#, asp.net

在我的页面上，我有几个文本框、AJAX 选项卡面板和一个网格视图。

在`Page_Load`事件中，文本框被填充；gridview 被填充等等。

我的 gridview 有一个按钮：

```
<Columns>
<ItemTemplate>
    <asp:Button ID="btnRedirect"
         Text="Click me"
         CommandArgument='<%#Eval("BkId_ZW")%>'
         OnClick="DoRedirect"
         runat="server" />
</ItemTemplate>
...
</Columns> 
```

它背后的代码如下所示：

```
 protected void DoRedirect(object sender, EventArgs e)
    {
        Button theButton = sender as Button;
        string url ="http://../profile/" + theButton.CommandArgument;
        Response.Write("<script>window.open('" + url + "');</script>");           
    } 
```

按下按钮后，会打开一个新窗口（一切都按预期工作），但主页会松散值和文本框的格式。

到底是怎么回事？如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:26:41.653

`Response.Write()`不利于此目的。由于您在 ASP.net 页面生命周期的中间添加到响应，因此您正在更改页面输出。如果您查看源代码，您可能会`<script>window.open...</script>`在一些尴尬的地方发现您的线路。

因此，请`Page.ClientScript.RegisterStartUpScript()`改用。

# javascript - 动态添加 iframe 时不需要的页面重新加载

> ID：15521335
> 
> 赞同：3
> 
> 时间：2013-03-20T10:46:06.073
> 
> 标签：javascript, iphone, firefox, iframe, reload

**看起来这是一个 Firefox Home 严格的问题，并且由于 Mozzilla 放弃了对它的支持并在 iStore 中将其拉出，我想尝试解决方法没有意义（[http://thenextweb.com/apps/2012/08/ 31/mozilla-retires-firefox-home-ios-releases-source-code-github/](http://thenextweb.com/apps/2012/08/31/mozilla-retires-firefox-home-ios-releases-source-code-github/)），无论如何我已经向他们发布了错误（[https://bugzilla.mozilla.org/show_bug.cgi?id=853377](https://bugzilla.mozilla.org/show_bug.cgi?id=853377)）如果有人有兴趣关注/解决**

* * *

我有相当不错的交叉浏览库，使用 iframe 方法进行通信。

它工作得很好，直到 .. 在 iPhone 上用 Firefox 打开。带有库的页面开始，然后神奇地被重定向。

好吧，我已经进入代码并尝试确定问题：

在将 iframe 父重新加载动态添加到 iframe src 之后。我已经测试了以下内容：

1.  `document.createElement('iframe')`附加到文档
2.  `document.createElement('iframe')`附加到预先创建的 div
3.  `.innerHTML`包含预先创建的 iframe 代码的方法
4.  `frames['iframe_name'].location.src`使用带有空 src 的预创建 iframe
5.  `.location.assign()`
    *   `document.getElementById()`失败_
    *   带`frames['iframe_name']`重定向
6.  与 jquery 相同 `$('<iframe src="link"/>'). appendTo('#reportA');`
7.  也试过先创建没有 src 的 iframe 然后设置它
8.  还使用`$('#iframe').attr('src','link')`原因重定向进行更新

此外，我在日志中看到（iframe 中称为页面是日志状态）。实际上有两个调用，所以看起来首先附加的 iframe 读入，然后在新页面中打开 iframe src。

在剖析我的代码时，我发现在部分代码中创建 iframe 时会出现问题，这是由我的 js 加载器动态添加的。我使用了以下附加脚本

```
var head = document.getElementsByTagName("head")[0];  
var script = null;  
script = document.createElement('script');  
script.type = 'text/javascript';  
var tag = Math.round(new Date().getTime() / 1000);  
script.src =  GLOBAL_VARIABLE_WITH_PATH_TO_URL+'jsc/include.js?'+tag ;  
head.appendChild(script); 
```

也试过

```
 document.write("<script src='"+FUTUREclickINFOpathS+"fcijsc/fci-include.js?"+tag+"'><\/script>"); 
```

更新

还尝试在 jquery 上附加 iram `$(document).ready()`- 当与`document.write`方法一起使用时它工作正常，直到调用附加`setTimeout`

更奇怪的是，当`setTimeout()`在主静态 js 文件中使用时，也会发生同样的事情。我今天会试试`setInterval()`，看看发生了什么。

因此很明显，iframe 的 src 上的任何更改都会导致父级重新加载，即使 iframe 是预先创建的。任何想法为什么？

附言。抱歉有些不全面的句子，但我对这个问题很感兴趣

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-11T18:27:05.730

您是否使用`postMessage`从 iframe 与父级进行通信？我遇到了这个问题并注意到`parent.postMessage`从 iframe 的脚本中删除修复了它。如果我找到一个解决这个问题的方法，我会更新。

# python - easy_install latest version github

> ID：15521337
> 
> 赞同：1
> 
> 时间：2013-03-20T10:46:11.653
> 
> 标签：python, easy-install

I'm using Python 2.7 on Windows.

My question relates to using and updating the twitter package ([http://mike.verdone.ca/twitter/](http://mike.verdone.ca/twitter/)) - currently installed version 1.9.1

When Twitter gives a ratelimited response the twitter package gives an error httplib.IncompletedRead. This problem seems to have been addressed in the version of api.py on Github. But the downloaded egg file I have on my system doesn't have that latest version in.

When I try

```
easy_install --upgrade twitter 
```

I get response:

```
Processing twitter-1.9.1-py2.7.egg
twitter 1.9.1 is already the active version in easy-install.pth 
```

So how do I get an egg file onto my system that includes the latest api.py, so that I don't get the IncompleteRead error?

Thanks for any help

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:08:50.547

You can install directly from GitHub with `pip`, but you perhaps have to force the upgrade:

```
pip install -U --force-reinstall git+git://github.com/sixohsix/twitter.git#egg=twitter 
```

This does require that you have `git` itself installed as well.

Alternatively, you can install from the GitHub supplied archives:

```
pip install -U --force-reinstall https://github.com/sixohsix/twitter/zipball/master#egg=twitter 
```

or

```
pip install -U --force-reinstall https://github.com/sixohsix/twitter/tarball/master#egg=twitter 
```

# resize - Windows 8 商店应用程序：压缩 jpeg，调整大小

> ID：15521342
> 
> 赞同：2
> 
> 时间：2013-03-20T10:46:23.037
> 
> 标签：resize, compression, bitmapimage

我开发了一个 w8 商店应用程序。我想在通过 azure 发送位图图像之前对其进行压缩和调整大小。所以这是我的代码：

```
 using (var sourceStream = await sfile.OpenReadAsync())
                {
                    // affect BitmapImage
                    Image = new BitmapImage();
                    Image.SetSource(sourceStream);

                } 
```

我的问题 ：

*   如何压缩位图图像？
*   如何调整位图图像的大小？
*   如何从这个压缩和调整大小的 bitmapImage 中获取 byte[] ？

谢谢 ！

# javascript - 有条件地加载 JavaScript 文件

> ID：15521343
> 
> 赞同：62
> 
> 时间：2013-03-20T10:46:24.300
> 
> 标签：javascript, html

我需要一个 JS 语句来确定使用哪个 JavaScript 文件。

我有一个文件：

```
<script type="text/javascript" src="js/jquery_computer.js"></script> 
```

但是当屏幕宽度小于 500px 时，我想加载另一个文件：

```
<script type="text/javascript" src="js/mobile_version.js"></script> 
```

我已经尝试了一切，但它不起作用。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-03-20T10:54:29.577

您必须自己在 JS 中创建该标记。像这样的东西：

```
var head = document.getElementsByTagName('head')[0];
var js = document.createElement("script");

js.type = "text/javascript";

if (screen.width > 500)
{
    js.src = "js/jquery_computer.js";
}
else
{
    js.src = "js/mobile_version.js";
}

head.appendChild(js); 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2018-09-24T11:56:17.813

如果您希望**异步**加载脚本，这里的其他答案就是这样做的。

如果您希望它与页面加载**同步**加载，这是非常非常少的剩余有效用例之一`document.write`：

```
<script>
(function() { // Scoping function to avoid globals
    var src = /*you want the main version*/ ? "jquery_computer.js" : "mobile_version.js";
    document.write('<script src="js/' + src + '"><\/script>');
})();
</script> 
```

（我已删除`type`，因为 JavaScript 是默认设置，指定它没有用。）

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-03-20T10:55:49.293

也许您可以使用[matchMedia.js并可以使用](https://github.com/paulirish/matchMedia.js/)[jQuery.getScript](http://api.jquery.com/jQuery.getScript/)加载脚本

```
$(function(){
    if (matchMedia('only screen and (max-width: 500px)').matches) {
        $.getScript(...);
    }
}); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-03-20T11:05:01.090

最好的办法是使用内置的 matchMedia API。

```
var script = document.createElement('script');
script.type='text/javascript';

if(window.matchMedia("(min-width:500px)").matches) {
  script.src = 'js/jquery.slitslider.js';      
}else{
  script.src = 'js/mobile_version.js';      
}

document.getElementsByTagName('head')[0].appendChild(script); 
```

缺点是 IE < 10 不支持

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-03-20T10:54:29.380

你不需要 jQuery，`<script>`在 DOM 中动态创建标签就足够了：

```
var head = document.getElementsByTagName('head')[0];
var script = document.createElement('script');

script.type = 'text/javascript';

if (<screen-width less than 500>)
    script.src = "js/mobile_version.js";
else
    script.src = "js/jquery_computer.js";

head.appendChild(script); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-01-14T07:54:43.657

```
$(function(){
    var width = $(document).width(),
        mobile = 500;

    if (width > mobile) {
        $('head').append('<script class="desktop" type="text/javascript" src="js/jquery_computer.js"></script>');
        $('head').find('.mobile').remove();
    } 
    else
    {
        $('head').append('<script class="mobile" type="text/javascript" src="js/mobile_version.js"></script>');
        $('head').find('.desktop').remove();
    }
}); 
```

只需使用 if else 来检测条件并在脚本元素上使用类可能会有所帮助

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-12-03T23:53:53.537

如果你愿意，你可以使用异步`import()`。

```
import(condition ? 'js/desktop_version.js' : 'js/mobile_version.js') 
```

在从常规`<script type="module">`加载的模块中或在脚本标记中，您还可以在最新（实验性）浏览器中使用顶级等待`import()``<script>`

```
<script type="module">
  await import(condition ? 'js/desktop_version.js' : 'js/mobile_version.js')      
</script> 
```

但它不适用于每个脚本。

*   一个常见的原因是那些添加闭包的 UMD 模块捆绑器，
    `(function(global){...}(this))`因为`this`在模块中未定义。
*   第三方脚本需要启用 CORS 才能加载
*   在IE中不起作用，但无论如何它已经死了
*   查看其他[已知差异](https://usefulangle.com/post/256/script-type-module-vs-script-javascript)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-03-20T10:50:03.817

你可以`$.getScript`在 jQuery中使用

详情见[这里](http://api.jquery.com/jQuery.getScript/)

# symfony - Symfony2 配置应用程序基本 url

> ID：15521346
> 
> 赞同：0
> 
> 时间：2013-03-20T10:46:25.603
> 
> 标签：symfony, config, base-url

我怎样才能得到这个基本网址

```
http://localhost/Symfony/web/app_dev.php/ 
```

或者

```
http://localhost/Symfony/web/app.php/ 
```

或者

```
http://localhost/Symfony/web/ 
```

（基本网址）

在 symfony2 配置文件中？在 symfony 网站上找不到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-12-14T21:22:40.627

```
$protocol = stripos($_SERVER['SERVER_PROTOCOL'],'https') === true ? 'https://' : 'http://';

$hostName = $request->server->get('HTTP_HOST');
$baseDirectory = "";
if(!empty($this->container->get('router')->getContext()->getBaseUrl())){
    $baseDirectory = str_replace('app_dev.php', '', $this->container->get('router')->getContext()->getBaseUrl());
}
$rootUrl = $protocol.$hostName.$baseDirectory; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-20T14:00:56.013

嗯...检查这个：

```
$base = $this->getRequest()->getSchemeAndHttpHost(); 
```

或者最旧的版本（我不记得什么时候改变了）：

```
$request = $this->getRequest();
$scheme = $request->getScheme();
$host = $request->getHttpHost();

$base = sprintf('%s://%s', $scheme, $host); 
```

# xpath - Selenium - 如何单击一个动态链接，其中包含一种语言的测试 A 等文本，如果我更改显示语言，则文本变为 ATttst

> ID：15521350
> 
> 赞同：0
> 
> 时间：2013-03-20T10:46:41.420
> 
> 标签：xpath, selenium, dynamic-links

我有一个带有下表的网页

```
Assessment name |       Task             |    Status 
```

* * *

```
 Test A         | Practice               |  Not started

                | Assessment             |  Not started 
```

* * *

```
Test B          | Practice               | Not started

                | Assessment             | Not started 
```

还可以找到它的 html 代码。

```
<table class="gridRow" cellspacing="0" summary="For each assessment" style="border-collapse:collapse;">
    <tr>
        <th class="gridHeaderHide" scope="col">&nbsp;</th><th class="gridHeader" scope="col">Assessment name</th><th class="gridHeader" scope="col">Task</th><th class="gridHeader" scope="col">Status</th><th class="gridHeader" scope="col" abbr="Overall time you will need">Overall time you will need</th><th class="gridHeader" scope="col" abbr="Time limit">Time limit</th><th class="gridHeader" scope="col"><a tabindex="502" href="javascript:__doPostBack('ctl00$ErrorMessageContentPlaceHolder$gdvAssessmentHome','Sort$Deadline')">Deadline</a></th><th class="gridHeaderWhatUNeed" scope="col" abbr="What you need">What you need </th>
    </tr><tr class="gridRow" align="center">
        <td class="gridcolHide" rowspan="2">
                                <div style='display:none'>
                                    <img id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl02_imgCompleted" title="Completed" src="../Images/completed.gif" alt="Completed" style="border-width:0px;" />
                                </div>
                            </td><td class="gridcol" rowspan="2">
                                <span id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl02_lblCandidateFriendlyName">Test A</span>
                            </td><td class="gridcol">

                                <input type="submit" name="ctl00$ErrorMessageContentPlaceHolder$gdvAssessmentHome$ctl02$PracticeTask" value="Practice" id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl02_PracticeTask" tabindex="503" class="linkButton" />
                            </td><td class="gridcol">Not started</td><td class="gridcol">
                                15&nbsp;&nbsp;<span id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl02_lblMins1" class="label">Minutes</span>
                            </td><td class="centeredImage">
                                <div style='display:block'>
                                    <img id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl02_PractiseImage" src="../Images/AH_Transparent_Icon.gif" alt=" " style="border-width:0px;" />
                                </div>
                                <div style='display:none'>
                                    <img id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl02_imgClock" title="Timer on" src="../Images/timer_on.gif" alt="Timer on" style="border-width:0px;" />
                                    &nbsp;&nbsp;<span id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl02_lblMins" class="label">Minutes</span>
                                </div>
                                <div style='display:none'>
                                    <img id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl02_imgTimerPlusOn" title="Extra time allowed" src="../Images/Timer_plus.gif" alt="Extra time allowed" style="border-width:0px;" />
                                    &nbsp;&nbsp;<span id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl02_Label2" class="label">Minutes</span>
                                </div>
                                <div style='display:none'>
                                    <img id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl02_imgTimerOff" title="Timer off" src="../Images/Timer_plus.gif" alt="Timer off" style="border-width:0px;" />
                                    &nbsp;&nbsp;<span id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl02_Label1" class="label">Minutes</span>
                                </div>
                                <div style='display:none'>
                                    <img id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl02_imgTimerPlusOff" title="Extra time allowed" src="../Images/Timer_plus.gif" alt="Extra time allowed" style="border-width:0px;" />
                                    &nbsp;&nbsp;<span id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl02_Label3" class="label">Minutes</span>
                                </div>
                            </td><td class="gridcol" rowspan="2">21/03/2013</td><td class="gridcolWhatUNeed" rowspan="2">
                                <img id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl02_imgMouse" title="Mouse" src="../Images/Mouse.gif" alt="Mouse" style="border-width:0px;" />
                            </td>
    </tr><tr class="gridRow" align="center">
        <td class="gridcol">

                                <input type="submit" name="ctl00$ErrorMessageContentPlaceHolder$gdvAssessmentHome$ctl03$PracticeTask" value="Take assessment" id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl03_PracticeTask" tabindex="504" class="linkButton" />
                            </td><td class="gridcol">Not started</td><td class="gridcol">
                                30&nbsp;&nbsp;<span id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl03_lblMins1" class="label">Minutes</span>
                            </td><td class="centeredImage">
                                <div style='display:none'>
                                    <img id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl03_PractiseImage" src="../Images/AH_Transparent_Icon.gif" alt=" " style="border-width:0px;" />
                                </div>
                                <div style='display:block'>
                                    <img id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl03_imgClock" title="Timer on" src="../Images/timer_on.gif" alt="Timer on" style="border-width:0px;" />
                                    19&nbsp;&nbsp;<span id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl03_lblMins" class="label">Minutes</span>
                                </div>
                                <div style='display:none'>
                                    <img id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl03_imgTimerPlusOn" title="Extra time allowed" src="../Images/Timer_plus.gif" alt="Extra time allowed" style="border-width:0px;" />
                                    19&nbsp;&nbsp;<span id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl03_Label2" class="label">Minutes</span>
                                </div>
                                <div style='display:none'>
                                    <img id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl03_imgTimerOff" title="Timer off" src="../Images/Timer_plus.gif" alt="Timer off" style="border-width:0px;" />
                                    19&nbsp;&nbsp;<span id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl03_Label1" class="label">Minutes</span>
                                </div>
                                <div style='display:none'>
                                    <img id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl03_imgTimerPlusOff" title="Extra time allowed" src="../Images/Timer_plus.gif" alt="Extra time allowed" style="border-width:0px;" />
                                    19&nbsp;&nbsp;<span id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl03_Label3" class="label">Minutes</span>
                                </div>
                            </td>
    </tr><tr class="gridRow" align="center">
        <td class="gridcolHide" rowspan="2">
                                <div style='display:none'>
                                    <img id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl04_imgCompleted" title="Completed" src="../Images/completed.gif" alt="Completed" style="border-width:0px;" />
                                </div>
                            </td><td class="gridcol" rowspan="2">
                                <span id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl04_lblCandidateFriendlyName">Test B</span>
                            </td><td class="gridcol">

                                <input type="submit" name="ctl00$ErrorMessageContentPlaceHolder$gdvAssessmentHome$ctl04$PracticeTask" value="Practice" id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl04_PracticeTask" tabindex="505" class="linkButton" />
                            </td><td class="gridcol">Not started</td><td class="gridcol">
                                15&nbsp;&nbsp;<span id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl04_lblMins1" class="label">Minutes</span>
                            </td><td class="centeredImage">
                                <div style='display:block'>
                                    <img id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl04_PractiseImage" src="../Images/AH_Transparent_Icon.gif" alt=" " style="border-width:0px;" />
                                </div>
                                <div style='display:none'>
                                    <img id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl04_imgClock" title="Timer on" src="../Images/timer_on.gif" alt="Timer on" style="border-width:0px;" />
                                    &nbsp;&nbsp;<span id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl04_lblMins" class="label">Minutes</span>
                                </div>
                                <div style='display:none'>
                                    <img id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl04_imgTimerPlusOn" title="Extra time allowed" src="../Images/Timer_plus.gif" alt="Extra time allowed" style="border-width:0px;" />
                                    &nbsp;&nbsp;<span id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl04_Label2" class="label">Minutes</span>
                                </div>
                                <div style='display:none'>
                                    <img id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl04_imgTimerOff" title="Timer off" src="../Images/Timer_plus.gif" alt="Timer off" style="border-width:0px;" />
                                    &nbsp;&nbsp;<span id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl04_Label1" class="label">Minutes</span>
                                </div>
                                <div style='display:none'>
                                    <img id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl04_imgTimerPlusOff" title="Extra time allowed" src="../Images/Timer_plus.gif" alt="Extra time allowed" style="border-width:0px;" />
                                    &nbsp;&nbsp;<span id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl04_Label3" class="label">Minutes</span>
                                </div>
                            </td><td class="gridcol" rowspan="2">21/03/2013</td><td class="gridcolWhatUNeed" rowspan="2">
                                <img id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl04_imgMouse" title="Mouse" src="../Images/Mouse.gif" alt="Mouse" style="border-width:0px;" /><img id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl04_imgCalculator" title="Calculator" src="../Images/Calculator.gif" alt="Calculator" style="border-width:0px;" /><img id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl04_imgPaper" title="Pen and paper" src="../Images/pen_and_paper.gif" alt="Pen and paper" style="border-width:0px;" />
                            </td>
    </tr><tr class="gridRow" align="center">
        <td class="gridcol">

                                <input type="submit" name="ctl00$ErrorMessageContentPlaceHolder$gdvAssessmentHome$ctl05$PracticeTask" value="Take assessment" id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl05_PracticeTask" tabindex="506" class="linkButton" />
                            </td><td class="gridcol">Not started</td><td class="gridcol">
                                30&nbsp;&nbsp;<span id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl05_lblMins1" class="label">Minutes</span>
                            </td><td class="centeredImage">
                                <div style='display:none'>
                                    <img id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl05_PractiseImage" src="../Images/AH_Transparent_Icon.gif" alt=" " style="border-width:0px;" />
                                </div>
                                <div style='display:block'>
                                    <img id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl05_imgClock" title="Timer on" src="../Images/timer_on.gif" alt="Timer on" style="border-width:0px;" />
                                    25&nbsp;&nbsp;<span id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl05_lblMins" class="label">Minutes</span>
                                </div>
                                <div style='display:none'>
                                    <img id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl05_imgTimerPlusOn" title="Extra time allowed" src="../Images/Timer_plus.gif" alt="Extra time allowed" style="border-width:0px;" />
                                    25&nbsp;&nbsp;<span id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl05_Label2" class="label">Minutes</span>
                                </div>
                                <div style='display:none'>
                                    <img id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl05_imgTimerOff" title="Timer off" src="../Images/Timer_plus.gif" alt="Timer off" style="border-width:0px;" />
                                    25&nbsp;&nbsp;<span id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl05_Label1" class="label">Minutes</span>
                                </div>
                                <div style='display:none'>
                                    <img id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl05_imgTimerPlusOff" title="Extra time allowed" src="../Images/Timer_plus.gif" alt="Extra time allowed" style="border-width:0px;" />
                                    25&nbsp;&nbsp;<span id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl05_Label3" class="label">Minutes</span>
                                </div>
                            </td>
    </tr><tr class="gridRow" align="center"> 
```

现在我必须 clcik 测试 B - 练习链接我使用以下 xpath 来单击它，因为链接是动态加载的

```
xpath=//*[contains(text(),'Test B')]/../../td[3]/input 
```

这适用于特定语言，但是当我更改网页的显示语言（比如中文）时，它不起作用。

请帮助如何点击链接。注意：网页可能单独包含Test B行或同时包含Test A和Test B。（动态加载）我必须根据测试选择练习链接

如果需要更多信息，请告诉我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:40:52.540

我认为这里的问题是，当您将显示语言从英语更改为另一种语言时，**“Test B”**的值也会发生变化。您在 XPath 标识符中指定 //*[contains(text(),'Test B')] 以显式查找**"Test B"**，当语言更改时，Selenium 无法找到此值。

查看您的 HTML 代码，我觉得您对所有标签都有唯一的 ID 属性，我认为更改语言不会改变。

尝试在 XPath 中使用“Id”属性而不是文本，例如，

XPath("//td[@id='ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl04_lblCandidateFriendlyName']")

```
</td><td class="gridcol" rowspan="2">
    <span id="ctl00_ErrorMessageContentPlaceHolder_gdvAssessmentHome_ctl04_lblCandidateFriendlyName">Test B</span>
</td><td class="gridcol"> 
```

由于您必须针对不同的语言选项运行测试，因此您需要在 Web 对象识别方面具有一些独特性。我认为使用 Id 将至少在所有语言选项的每个测试用例的基础上保证对象识别的唯一性。

您可以遵循的另一种方法稍微复杂一些，基于选择的语言，将“Test B”的值也转换为相同的语言，并将其用作 XPath 字符串中的变量值。

步骤将是， 1\. 将唯一标识“Test B”转换为 unicode。2\. 将 unicode 值转换为您选择的浏览器语言。3\. 在 XPath 中使用上述值作为变量字符串，以编程方式更改。

最后一种方法是您可以将 Web 元素表值存储到 IList 并使用 IList 中的索引值编写测试脚本以供对象引用。考虑到动态对象的创建，您还必须为不同的测试用例编写不同的脚本。即使您更改了浏览器语言，如果您使用 IList 中的索引值进行脚本编写，它将是标准的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T19:45:05.910

这不是很明显吗？您正在使用文本来识别元素，如果语言更改，它将不起作用。文本因语言而异。

做这样的事情怎么样？

```
If testing in English String text = "Test B"

Else if testing in Chinese String text = "测试B";

 xpath="//*[contains(text(), "+text+" )]/../../td[3]/input" 
```

除了这种方法，您为什么不避免使用文本来识别元素，这样您就不再依赖于每次更改语言时需要传递的文本。或找出处理此动态内容的逻辑，您需要遵循手动测试此测试用例时执行的相同过程。

# sockets - 我们如何在不重新启动服务器的情况下删除套接字的 close_wait 状态？

> ID：15521351
> 
> 赞同：-1
> 
> 时间：2013-03-20T10:46:43.600
> 
> 标签：sockets, visual-c++, wait

我们编写了一个应用程序，其中客户端-服务器通信与 IOCP 概念一起使用。

客户端通过无线接入点连接到服务器。

当网络中发生临时断开连接时，这可能会导致 CLOSE_WAIT 状态。这可能表明客户端正确关闭了连接。但是服务器仍然打开它的套接字。如果有太多的端口实例（服务器和客户端正在与之交谈）处于 CLOSE_WAIT 状态，那么在最高峰，服务器停止运行从而拒绝连接。这完全令人沮丧。在这种情况下，用户必须重新启动服务器通过清除内存来清除所有close_wait状态。当服务器重新启动时，客户端再次尝试连接服务器。服务器再次调用accept命令，但在接受新连接之前，之前的连接应该在服务器端关闭，如何我们能做到吗？

我们如何在不重新启动服务器的情况下删除套接字的 close_wait 状态？

有没有其他方法可以避免服务器重启？

我们还了解到，如果所有可用的临时端口都分配给客户端应用程序，那么客户端会遇到一种称为 TCP/IP 端口耗尽的情况。当 TCP/IP 端口耗尽时，无法进行客户端端口保留，并且客户端应用程序将在尝试通过 TCP/IP 套接字连接到服务器时发生错误。如果发生这种情况，那么我们需要增加动态分配给客户端 TCP/IP 套接字连接的临时端口的上限。

参考：http: [//msdn.microsoft.com/en-us/library/aa560610%28v=bts.10%29.aspx](http://msdn.microsoft.com/en-us/library/aa560610%28v=bts.10%29.aspx)

让我们知道这种替代方式是否有用？

提前致谢。

问候艾米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:26:50.093

修复服务器代码。

服务器应该超时读取，如果超时到期，它应该关闭套接字。

# java - BufferedReader readLine() 块

> ID：15521352
> 
> 赞同：13
> 
> 时间：2013-03-20T10:46:45.757
> 
> 标签：java, sockets, bufferedreader

使用 readLine() 接收数据时，即使我在发送消息时使用 .flush 在消息末尾放置了一个“\n”，读取我的消息的 while 循环仍然会阻塞。只有在关闭套接字连接时，它才会离开循环。

这是客户端代码：

```
bos = new BufferedOutputStream(socket.
            getOutputStream());
bis = new BufferedInputStream(socket.
            getInputStream());
osw = new OutputStreamWriter(bos, "UTF-8");
osw.write(REG_CMD + "\n");
osw.flush();

isr = new InputStreamReader(bis, "UTF-8");
BufferedReader br = new BufferedReader(isr);

String response = "";
String line;

while((line = br.readLine()) != null){
   response += line;
} 
```

和服务器的代码：

```
BufferedInputStream is;
BufferedOutputStream os;

is = new BufferedInputStream(connection.getInputStream());
os = new BufferedOutputStream(connection.getOutputStream());

isr = new InputStreamReader(is);

String query= "";
String line;

while((line = br.readLine()) != null){
   query+= line;
}

String response = executeMyQuery(query);
osw = new OutputStreamWriter(os, "UTF-8");

osw.write(returnCode + "\n");
osw.flush(); 
```

我的代码在服务器 while 循环中阻塞。谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-20T10:49:40.200

BufferedReader 将继续读取输入，直到它到达末尾（文件或流或源等的结尾）。在这种情况下，“结束”是套接字的关闭。因此，只要 Socket 连接打开，您的循环就会运行，而 BufferedReader 只会等待更多输入，每次到达 '\n' 时都会循环。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-09-25T16:42:29.557

我尝试了很多解决方案，但唯一没有阻止执行的解决方案如下：

```
BufferedReader inStream = new BufferedReader(new InputStreamReader(yourInputStream));
String line;
while(inStream.ready() && (line = inStream.readLine()) != null) {
    System.out.println(line);
} 
```

如果下一次调用将阻止执行，`inStream.ready()`则返回 false 。`readLine()`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-20T10:49:42.100

这是因为 while 循环中的条件：`while((line = br.readLine()) != null)`

您在每次迭代时读取一行，如果 readLine 返回则退出循环`null`。

如果达到 eof（= socked 已关闭），readLine 仅返回 null，如果读取了 '\n'，则返回 String。

如果你想在 readLine 上退出循环，你可以省略整个 while 循环，只做：

`line = br.readLine()`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-02T23:02:57.147

发生这种情况是因为 InputStream 还没有准备好变红，所以它在 in.readLine() 上阻塞。请试试这个：

```
boolean exitCondition= false;

while(!exitCondition){
    if(in.ready()){
        if((line=in.readLine())!=null){
            // do whatever you like with the line
        }
    }
} 
```

当然，您必须控制 exitCondition 。

另一种选择是使用 nio 包，它允许异步（非阻塞）读取，但这取决于您的需要。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-12T19:57:48.003

最好避免使用`readline()`. 这种方法对网络通信很危险，因为有些服务器不返回`LF/CR`符号，你的代码会卡住。当您从文件中读取时，这并不重要，因为无论如何您都会到达文件的末尾并且流将被关闭。

```
public String readResponse(InputStream inStreamFromServer, int timeout) throws Exception {
    BufferedReader reader = new BufferedReader(new InputStreamReader(inStreamFromServer, Charsets.UTF_8));
    char[] buffer = new char[8092];
    boolean timeoutNotExceeded;
    StringBuilder result = new StringBuilder();
    final long startTime = System.nanoTime();
    while ((timeoutNotExceeded = (TimeUnit.NANOSECONDS.toMillis(System.nanoTime() - startTime) < timeout))) {
        if (reader.ready()) {
            int charsRead = reader.read(buffer);
            if (charsRead == -1) {
                break;
            }
            result.append(buffer, 0, charsRead);
        } else {
            try {
                Thread.sleep(timeout / 200);
            } catch (InterruptedException ex) {
                LOG.error("InterruptedException ex=", ex);
            }
        }
    }
    if (!timeoutNotExceeded) throw new SocketTimeoutException("Command timeout limit was exceeded: " + timeout);

    return result.toString();
} 
```

它有超时，如果需要很长时间，您可以中断通信

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-18T18:02:31.260

如果您想在不强制关闭它的情况下获取套接字中的内容，只需使用 ObjectInputStream 和 ObjectOutputStream ..

***例子：***

```
ObjectInputStream ois;
ObjectOutputStream oos;

ois = new ObjectInputStream(connection.getInputStream());

String dataIn = ois.readUTF(); //or dataIn = (String)ois.readObject();

oos = new ObjectOutputStream(connection.getOutputStream());
oos.writeUtf("some message"); //or use oos.writeObject("some message");
oos.flush();

..... 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-03T07:25:52.423

当套接字不关闭时，readline() 和 read() 将被阻塞。所以你应该关闭套接字：

```
Socket.shutdownInput();//after reader
Socket.shutdownOutput();//after wirite 
```

而不是 Socket.close();

# mysql - mysql_query() 返回语法错误

> ID：15521354
> 
> 赞同：0
> 
> 时间：2013-03-20T10:46:48.930
> 
> 标签：mysql

只是我在使用 SQL 查询时遇到的一个小问题。它返回一个语法错误，搜索了一段时间后，我找不到问题所在。你们有人能找到吗？

询问：

```
INSERT INTO `blogposts` (id,'author','subject','content',date) VALUES (2,$author,$subject,$content,$date) 
```

变量`$author`、`$subject`和`$date`是从表单中接收的。它们是字符串，`$date`是日期，而数字 2 是数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:48:39.903

您需要用 ` 将字段括起来：

```
INSERT INTO `blogposts` (`id`, `author`, `subject`, `content`, `date`) VALUES (2,'$author','$subject','$content,$date') 
```

如果您`ID`是自动递增的，则不应设置它，或者将 value = 0。确保对变量进行转义。安全原因。

尝试转移到 PDO。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T10:48:42.387

引用您的输入：

```
INSERT INTO `blogposts` (`id`,`author`,`subject`,`content`,`date`) VALUES (2,'$author','$subject','$content','$date') 
```

请记住转义它们或使用准备好的语句。更重要的是，停止使用`mysql_query()`！改用 MySQLi / PDO。

*旁注：* `mysql_query()`将在 PHP 5.5.0 版本中弃用

# codeigniter - 控制器中的 Codeigniter 负载模型 - 500 错误

> ID：15521356
> 
> 赞同：0
> 
> 时间：2013-03-20T10:46:49.353
> 
> 标签：codeigniter, model

这是我的控制器：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Order extends CI_Controller {

public function index($id=-1) {
  $this->load->model('order');
}
} 
```

当我尝试打开相应的 url 时，我得到错误 500。奇怪的是，我在另一个控制器上以相同的方式加载模型而没有问题。

这里是路线和模型以防万一：

**路线：**

```
$route['order/(:num)'] = "order/index/$1"; 
```

**模型：**

```
<?php
    class Order extends CI_Model {

        var $fullname = '';
        var $email = '';
        var $address = '';
        var $phone = '';
        var $notes = '';
        var $facebook = '';
        //var $canvases = '';

        var $admin_notes = '';
        var $status = '';

        var $id = '';
        var $date = '';
        var $price = '';

        //var $emailStatus_recivedOrder = '';
        //var $emailStatus_sendedOrder = '';
        //var $emailStatus_askFeedback = '';

        function __construct() {
            // Call the Model constructor
            parent::__construct();
        }

        function get($search_query='', $per_page=5, $skip=0) {

            if($search_query != '') {
                $this->db->or_where('id', $search_query);
                $this->db->or_where('email', $search_query);
                $this->db->or_where('fullname', $search_query);
                $this->db->or_where('phone', $search_query);
            }

            $query = $this->db->get('entries', $per_page, $skip);
            return $query->result();
        }

        function count_all($search_query='') {
            if($search_query != '') {
                $this->db->or_where('id', $search_query);
                $this->db->or_where('email', $search_query);
                $this->db->or_where('fullname', $search_query);
                $this->db->or_where('phone', $search_query);
            }

            $this->db->from('entries');
            return $this->db->count_all_results();
        }

        function get_by_id($id) {
            return $this->db->get_where('entries', array('id' => $id), 1);
        }

        function get_active_orders_count() {
            $this->db->where('status', '1');
            $this->db->from('entries');
            return $this->db->count_all_results();
        }

        function insert_entry() {
            $this->fullname = $this->input->post('fullname');
            $this->email = $this->input->post('email');
            $this->address = $this->input->post('address');

            $this->phone = $this->input->post('phone');

            $this->facebook = $this->input->post('facebook');

            $this->notes = $this->input->post('notes');
            $this->admin_notes = $this->input->post('admin_notes');
            $this->status = $this->input->post('status');

            $this->date   = date('Y-m-d H:i:s');

            $this->db->insert('entries', $this);
        }

        function update_entry() {
            $this->admin_notes = $this->input->post('admin_notes');

            $this->db->update('entries', $this, array('id' => $this->input->post('admin_notes')));
        }
    } 
```

错误是：发生数据库错误

无法使用提供的设置连接到您的数据库服务器。

文件名：core/Loader.php

行号：346

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T11:03:52.213

您不能命名您的控制器和模型相同。给他们一个不同的名字，问题应该得到解决。所以像

## 控制器

```
class Order extends CI_Controller{ ... } 
```

## 模型

```
class Order_model extends CI_Model{ ... } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:35:00.340

在面向对象的编程中，没有两个类可以具有相同的名称。对于 codeigniter 控制器，模型都是类。因此，最好将控制器命名为 ABC_Controller 并将模型命名为 ABC_Model 以避免类名冲突。

控制器

```
class ABC_Controller extends CI_Controller { .. } 
```

模型

```
class ABC_Model extends CI_Model { .. } 
```

# android - Android listview - 获取自定义列表视图的文本

> ID：15521365
> 
> 赞同：4
> 
> 时间：2013-03-20T10:47:23.790
> 
> 标签：android, android-listview, android-custom-view, android-adapter

我正在开发一个应用程序，我在其中创建了一个自定义列表视图：

列表视图 xml 代码为：

```
<ListView
    android:id="@+id/listview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_margin="15dip"
    android:divider="#623b42"
    android:dividerHeight="0.5dip"
    android:cacheColorHint="#00000000"
    android:overScrollMode="never" >
</ListView> 
```

适配器 xml 是：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/textview1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_toLeftOf="@+id/textview_rupee_mlsaa"
        android:gravity="center_vertical"
        android:padding="15dip"
        android:textColor="@color/color_black"
        android:textSize="15sp"
        tools:ignore="SelectableText" />

    <TextView
        android:id="@+id/textview2"
        android:layout_width="60sp"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:gravity="center_vertical"
        android:padding="15dip"
        android:textColor="@color/color_black"
        android:textSize="15sp"
        tools:ignore="SelectableText" />

</RelativeLayout> 
```

适配器的 .java 文件是：

```
public class ListAdapter extends ArrayAdapter<String> {
/** Global declaration of variables. As there scope lies in whole class. */
private Context context;
private String[] dataset1;  
private int[] dataset2;

    /** Constructor Class */
    public ListAdapter(Context context,String[] ListArray1, int[] ListArray2) {
        super(context,R.layout.list_adapter_layout,ListArray);
        this.context = context;
            this.dataset1= ListArray1;
            this.dataset2= ListArray2;
    }

    /** Implement getView method for customizing row of list view. */
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = ((Activity)context).getLayoutInflater();
        // Creating a view of row.
        View rowView = inflater.inflate(R.layout.list_adapter_layout, parent, false);   

        TextView tv1 = (TextView)rowView.findViewById(R.id.textview1);      
        TextView tv2 = (TextView)rowView.findViewById(R.id.textview2);

        tv1.setText(data1[position]);       
        tv2.setText(""+data2[position]);

        return rowView;
    }
} 
```

然后我将列表视图上的项目单击侦听器设置为：

```
listView = (ListView) findViewById(R.id.listview);
listView.setOnItemClickListener(this);    

ListAdapter adapter = new ListAdapter(this,list1,list2);
listView.setAdapter(adapter); 
```

然后我在项目点击上使用 onItemClickListener 为：

```
public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3) {
name = (String) arg0.getItemAtPosition(position);       
} 
```

在这里，我得到了自定义列表视图的第一个文本视图的值。但我也想要第二个文本视图的值。如果我添加更多，那么如何获得它的值。

请建议我这样做的方法。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-20T10:54:21.463

在你的 OnItemClick 中尝试这样

```
TextView text = (TextView) arg1.findViewById(R.id.urtextID);
                           ^^^^^^
String tEXT = text.getText().toString(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-12T18:03:12.210

只是上述答案的简化版本

```
 public void onItemClick(AdapterView<?> parent, View view, int position,
        long id) {
    // code in the commented section works in case of normal single textView

    // TextView temp=(TextView) view; 
    // Toast.makeText(this,
    // temp.getText()+" is pressed "+position,Toast.LENGTH_SHORT
    // ).show();

    TextView temp = (TextView) view.findViewById(R.id.textView1);

    String str = temp.getText().toString();
    Toast.makeText(this,
            str + " is pressed " + position,
            Toast.LENGTH_SHORT).show();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-28T10:28:03.943

尝试这个，

```
public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3) {
TextView textView = (TextView) arg1.findViewById(R.id.urtextID);
String text = textView.getText().toString();   
Log.d("TEXT", "Text is" + text);   
} 
```

上面的答案和我的答案一样......

# java - 在异步 post 方法中设置连接超时的方法

> ID：15521366
> 
> 赞同：0
> 
> 时间：2013-03-20T10:47:32.507
> 
> 标签：java, android, http-post, connection-timeout

我正在使用**异步发布方法**将一些数据发布到服务器。该帖子工作正常，但如果服务器关闭或无响应，那么我将在应用程序中强制关闭。

**我应该如何对发布请求实施超时？**

这**是异步发布到特定 url 的类**：

```
 //===================================================================================================================================
//sending EmailAddress and Password to server
//===================================================================================================================================
private class MyAsyncTask extends AsyncTask<String, Integer, Double>{

    @Override
    protected Double doInBackground(String... params) {
        // TODO Auto-generated method stub
        postData(params[0],params[1]);
        return null;
    }

    protected void onPostExecute(Double result){

        if(responseBody.contains("TRUE"))
        {
            String raw=responseBody;
            raw = raw.substring(0, raw.lastIndexOf("<"));
            raw = raw.substring(raw.lastIndexOf(">") + 1, raw.length());
            String [] contents = raw.split(",");
            //extracting user name and user id from response
            String user_name=contents[1];
            String student_code=contents[2];
            //save user name and user id in preference
            saveInPreference("user_name",user_name);
            saveInPreference("student_code",student_code);

            //login is successful, going to next activity       
            Intent intent = new Intent(LoginActivity.this, TakeTestActivity.class);
            //hiding progress bar
            progress.dismiss();
            finish();
            LoginActivity.this.startActivity(intent);

        }

        else
        {
            //hiding progress bar
            progress.dismiss();
            create_alert("Attention!", "Please provide valid userid and password");
        }
    }

    protected void onProgressUpdate(Integer... progress){

    }

    public void postData(String emailId,String passwrd) {

**//EDIT START**
HttpParams httpParams = new BasicHttpParams();
HttpConnectionParams.setConnectionTimeout(httpParams, 10000);

HttpConnectionParams.setSoTimeout(httpParams, 10000);

HttpClient httpclient = new DefaultHttpClient(httpParams); 
**//EDIT END** 

        // Create a new HttpClient and Post Header
        //HttpClient httpclient = new DefaultHttpClient();

        SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(LoginActivity.this);
        final String url_first = preferences.getString("URLFirstPart","");
        HttpPost httppost = new HttpPost(url_first+"ValidateLogin");

        try {
            // Data that I am sending
            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
            nameValuePairs.add(new BasicNameValuePair("EmailId", emailId));
            nameValuePairs.add(new BasicNameValuePair("Password", passwrd));
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                    **//EDIT START**
                    try 
                    {
            // Execute HTTP Post Request
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            HttpResponse response = httpclient.execute(httppost);
            responseBody = EntityUtils.toString(response.getEntity());
                   } 
                   catch (SocketTimeoutException ex)
                   {
                        // Do something specific for SocketTimeoutException.
                   }
                   **//EDIT END**

            //Log.d("result", responseBody);
        } 
        catch (Throwable t ) {

        } 
    }
}
                //===================================================================================================================================
                //END sending EmailAddress and Password to server 
                //=================================================================================================================================== 
```

这就是我**调用类来执行发布请求的方式**：

```
//sending request for login

new MyAsyncTask().execute(txtUsername.getText().toString(),txtPassword.getText().toString()); 
```

**如果服务器没有响应或不可用，我应该怎么做才能在特定时间后实现连接超时？**

**编辑：**

**如何使用警报通知用户连接已超时？我应该把警报放在哪里以及在什么情况下？**

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T10:51:17.040

你可以试试这个，我设置了10秒。这里...

```
HttpParams httpParams = new BasicHttpParams();
HttpConnectionParams.setConnectionTimeout(httpParams, 10000);

HttpConnectionParams.setSoTimeout(httpParams, 10000);

HttpClient client = new DefaultHttpClient(httpParams); 
```

# xsd - XSD 将元素类型限制为 ipadress 类型

> ID：15521370
> 
> 赞同：-1
> 
> 时间：2013-03-20T10:47:45.147
> 
> 标签：xsd

我限制了一个 ipadress 元素类型，例如 ipadress:port。这是代码。

```
<xs:element name = "Ipadress">
 <xs:simpleType>
  <xs:restriction base = "xs:string">
   <xs:pattern value = "[0-9][0-9][0-9].[0-9][0-9][0-9].[0-9][0-9][0-9].[0-9][0-9][0-9]:[0-9][0-9][0-9][0-9]"/>
  </xs:restriction>
 </xs:simpleType>
</xs:element> 
```

但它不起作用。一些 ipadress 如

```
<Ipadress> 127.0.0.1:123 </Ipadress> 
```

将无法验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:00:55.907

将模式值更改为 "\d{1,3}.\d{1,3}.d{1,3}.\d{1,3}:\d{1,3}"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:52:19.833

您需要`.`使用斜杠 ( ) 转义 Dot( `\`)

```
<xs:element name="Ipadress">
    <xs:simpleType>
        <xs:restriction base="xs:string">
            <xs:pattern value="\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}:\d{1,4}"/>
        </xs:restriction>
    </xs:simpleType>
</xs:element> 
```

**或者**

```
<xs:element name="Ipadress">
    <xs:simpleType>
        <xs:restriction base="xs:string">
            <xs:pattern value="[0-9][0-9][0-9]\.[0-9][0-9][0-9]\.[0-9][0-9][0-9]\.[0-9][0-9][0-9]:[0-9][0-9][0-9][0-9]"/>
        </xs:restriction>
    </xs:simpleType>
</xs:element> 
```

# java - 是否可以从 MD5 和 Java 中恢复消息？

> ID：15521372
> 
> 赞同：5
> 
> 时间：2013-03-20T10:47:50.140
> 
> 标签：java, hash, md5

我有以下代码。

```
String plaintext = "HelloWorld";
MessageDigest m = MessageDigest.getInstance("MD5");
m.reset();
m.update(plaintext.getBytes());
byte[] digest = m.digest();
BigInteger bigInt = new BigInteger(1,digest);
String hashtext = bigInt.toString(16); 

// Now we need to zero pad it if you actually want the full 32 chars.
while(hashtext.length() < 32 ){
    hashtext = "0"+hashtext;            
} 
```

现在我想将它转换回原始字符串。可能吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-20T10:53:54.360

> 我试过这个。现在我想将它转换回原始字符串。

这对于 MD5 是不可能的。它是一种单向[哈希函数](http://en.wikipedia.org/wiki/Cryptographic_hash_function)。

为了能够加密和解密，您需要使用像 AES 这样的加密/解密算法。

有关更多信息，请参阅[Java™ 密码体系结构 (JCA) 参考指南](http://docs.oracle.com/javase/7/docs/technotes/guides/security/crypto/CryptoSpec.html)。

# c++ - 如何在 C++ 中创建新的 objectc？

> ID：15521377
> 
> 赞同：-5
> 
> 时间：2013-03-20T10:47:57.247
> 
> 标签：c++, syntax, types, instantiation

这个语法是什么意思？

```
date aaa(2011,7,1); 
```

除了 aaa，我可以使用我想要的任何东西（例如`bbb`or `ccc`）。看起来我创建了一个名为`aaa`并属于该类的新对象`date`。但据我所知，我们需要使用`new`关键字来创建一个新对象。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T10:49:28.653

它的意思是“通过调用一个构造函数来创建一个被`data`调用的实例，该构造函数接受三个整数参数（或可以从 int 隐式构造的参数）”。`aaa``date`

在 C++ 中，您不需要**关键字**`new`来创建对象。`new`在动态存储中实例化一个对象并返回一个指向它的指针。除其他外，这意味着您（或某人，某处）必须负责在某个时候删除该对象。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-20T10:53:09.090

```
int x; 
```

我相信你明白这定义了一个`int`名为`x`. 你用了`new`吗？如果我们添加复制初始化怎么样：

```
int x = 5; 
```

这定义了一个`int`名为的对象并将`x`其初始化为 5。直接初始化可以达到相同的结果：

```
int x(5); 
```

那么呢：

```
data aaa(2011,7,1); 
```

这与上面的语法完全相同。我们正在创建一个`data`名为的对象`aaa`，只是这次我们将三个参数传递给它的构造函数。

所有这些定义的共同点是它们创建了具有*自动存储持续时间*的特定类型的对象。这意味着对象将在其作用域结束时被销毁。

现在考虑以下行：

```
int* p = new int(5); 
```

这将创建*两个*对象。第一个是被`int*`调用的`p`。`int*`如上所述，它具有自动存储持续时间，并将在其范围结束时被销毁。然后我们用返回的指针初始化那个对象`new int(5)`。这个新表达式创建了一个`int`对象，初始化为 5，具有*动态存储持续时间*。这意味着它不会在其作用域结束时自动销毁，而是需要`delete`d。

因此，简而言之，这是创建对象的两种不同方法，它们赋予它们不同的存储持续时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T10:49:37.410

在某些*类似于*C++ 的语言中，您可能需要`new`创建对象，例如 Java。但是在 C++ 中，您不必这样*做*。

在 C++ 中，您可以*在堆上*`new`创建一个新对象，例如，如果您需要在运行时动态创建一个。如果您声明一个变量，例如示例中的变量，如果它是函数内的局部变量，它将*在堆栈上创建。*这些对象仅在其范围持续时才可用。

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T10:50:42.397

new 运算符在*堆*内存中实例化一个对象，并且该对象一直存在，直到调用 delete 为止。在您的示例中，该对象在*堆栈*中实例化并且仅存在于范围中（直到下一个`}`）。**

# jai - jpedal jpg2000 错误

> ID：15521378
> 
> 赞同：2
> 
> 时间：2013-03-20T10:47:57.637
> 
> 标签：jai, jpeg2000, jpedal

我使用 jpedal 将 pdf 转换为图像。这适用于大多数 pdf，但有些包含 jpeg2000 我继续收到以下错误：

```
 java.lang.RuntimeException: JPeg 2000 Images needs the VM parameter -Dorg.jpedal.jai=true switch turned on
    at org.jpedal.parser.PdfStreamDecoder.decodeStreamIntoObjects(Unknown Source)
    at org.jpedal.parser.PdfStreamDecoder.decodePageContent(Unknown Source)
    at org.jpedal.PDFtoImageConvertor.convert(Unknown Source)
    at org.jpedal.PdfDecoder.getPageAsImage(Unknown Source)
    at org.jpedal.PdfDecoder.getPageAsImage(Unknown Source)
    at com..... 
```

我已经在 J​​AVA_OPTS、我的 tomcat 的运行配置以及程序代码中设置了 JVM 参数，使用：

```
System.setProperty("org.jpedal.jai", "true");
PdfDecoder decode_pdf = new PdfDecoder(true);
FontMappings.setFontReplacements();
decode_pdf.openPdfArray(pdf_file); 
```

3 个 JAI 库也在我的构建路径上。

所以我不知道我还需要做什么？

我的完整转换代码是：

```
List<BufferedImage> images = new LinkedList<BufferedImage>();           
System.setProperty("org.jpedal.jai", "true");
PdfDecoder decode_pdf = new PdfDecoder(true);
FontMappings.setFontReplacements();
decode_pdf.openPdfArray(pdf_file);
decode_pdf.setExtractionMode(0, 1f); //do not save images
for (int i = 1; i<= decode_pdf.getPageCount(); i++)
{
  images.add(decode_pdf.getPageAsImage(i));
}   
decode_pdf.closePdfFile(); 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:43:20.907

1.  为 jpedal 激活 jai

    System.setProperty("org.jpedal.jai", "true");

2.  一个更好的解决方案（比 Mark Stephens 博客中的文章）是重新注册提供程序，因为这只需要完成一次：

    IIORegistry 注册表 = IIORegistry.getDefaultInstance();
    registry.registerServiceProvider(new com.sun.media.imageioimpl.plugins.jpeg2000.J2KImageWriterSpi()); registry.registerServiceProvider(新的 com.sun.media.imageioimpl.plugins.jpeg2000.J2KImageReaderSpi());

当然，JAI 库需要在类路径中才能正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:13:28.490

[我在这里](http://tomcat.10.n6.nabble.com/Problems-with-ImageIO-td2073212.html)找到了这个问题的答案。

在 Tomcat 环境中，您必须在 server.xml 中禁用 JreLeakPreventionListener，然后它才能正常工作。

# java - Maven父子关系

> ID：15521386
> 
> 赞同：15
> 
> 时间：2013-03-20T10:48:33.187
> 
> 标签：java, maven

对于 maven 父子关系， 我遇到了以下“**模式”：http:** ![关系船示例](../Images/4a13903bf30179144d37563339e87d07.png)[//yuml.me/3f8dd366](http://yuml.me/3f8dd366)

在这个例子中，我们有一个带有 2 个子模块的模块。该模块有一个父 pom “构建模块的父级”，它知道两个子模块是子模块。

子模块从来不知道这个父级认识他们，他们认为他们的父级是名为“依赖管理的父级”的那个。它具有通用配置，如依赖管理、插件配置、通用属性等。

**我的问题：**
这是一个“好”的模式吗？意思是它有优点/缺点，因为孩子<->父母关系的看似更直观的模式

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-20T11:21:04.827

一件有趣的事情是聚合器 pom。

这是一个按模块对项目进行分组的 pom，没有“父子”关系。聚合器 pom 没有依赖项管理。它只管理构建。

同时拥有父 pom 和聚合器 pom 是 maven 的一个非常强大的特性。

[您可以在此处](http://rostislav-matl.blogspot.co.uk/2011/12/maven-aggregator-vs-parent.html)找到更多信息。

[这个 maven 页面](http://www.sonatype.com/books/mvnref-book/reference/pom-relationships-sect-pom-best-practice.html#fig-maven-book)还对如何为复杂项目设置 pom 提供了宝贵的见解。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-20T12:15:05.640

嗯...我想我不同意你照片上的条款。这是我的看法：

![在此处输入图像描述](../Images/e125e1c9def567b021d014d4e4f8965d.png)

这种组织模块的方式可能会让很多开发人员感到困惑，但这是一种合法的做事方式。

无论如何，我不推荐这种方法，因为它令人困惑。但有时，他们也别无选择。

**什么时候使用这个配置？**

一个（或多个）*子模块*已经有一个父模块（即在另一个项目中开发但您需要重新构建它）。请注意，`<module>`多模块项目中的条目是相对路径，因此您可以使用以下内容：

```
<modules>
    <module>../../somedir/othermodule</module>
    ...
</modules> 
```

**如果可能，我建议将多模块也用作父模块，**因为：

*   不那么混乱
*   干净可读`<modules>`的`<parent>`部分（无需使用丑陋的相对路径来指定*父*模块或*子模块*）
*   您可以在 SCM 下以干净的分层结构组织模块（这样 maven-release-plugin 会很高兴）（我知道 eclipse 不喜欢分层项目，但这是另一个问题）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T10:57:05.453

拥有一个公司范围内的配置 pom 实际上很好，它不关心它的孩子，并且包含属性，dependecyManagement，存储库，pluginManagement 等所有东西都将继承的东西

也许这可以帮助你：[公司范围的父母 pom](https://stackoverflow.com/questions/15499733/company-wide-parent-pom/)

# c# - 如何区分用户输入，但允许应用程序本身更改文本

> ID：15521387
> 
> 赞同：-1
> 
> 时间：2013-03-20T10:48:36.660
> 
> 标签：c#, .net, wpf, events, user-interface

我有一个文本框，它不允许用户输入“[”和“]”字符。但是，我想将文本设置为默认包含“[”和“]”的值。我该怎么办？这是我的代码：

```
TextBox txtEdit = new TextBox();
txtEdit.TextChanged += txtEdit_TextChanged;
txtEdit.Text = "[Test]";

private void txtEdit_TextChanged(object sender, TextChangedEventArgs e)
{
    if ((sender as TextBox).Text.Contains("[") || (sender as TextBox).Text.Contains("]"))
    {
        MessageBox.Show("Cannot enter '[' or ']' characters!", "", MessageBoxButton.OK, MessageBoxImage.Information);
        (sender as TextBox).Text = "";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:51:52.047

更改属性后放置`TextChanged`事件`Text`

```
TextBox txtEdit = new TextBox();
txtEdit.TextChanged += txtEdit_TextChanged;

private void txtEdit_TextChanged(object sender, TextChangedEventArgs e)
{
    if (comboBoxYou.Text == txtEdit.Text) 
    {
        return;
    }
    else if ((sender as TextBox).Text.Contains("[") || (sender as TextBox).Text.Contains("]"))
    {
        MessageBox.Show("Cannot enter '[' or ']' characters!", "", MessageBoxButton.OK, MessageBoxImage.Information);
        (sender as TextBox).Text = "";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T11:02:20.240

我会`keydown`为文本框设置一个事件。

如果您不希望用户输入 '[' 和 ']' 字符，则读取关键字符并设置`e.Handled = true`它是否与您不想要的字符匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T11:31:08.673

如果那是你想要的。

```
private void txtEdit_TextChanged(object sender, TextChangedEventArgs e)
{
string a = (sender as TextBox).Text.substing(0,1).subsctring;
a = a.Remove(0, 1);
            a = a.Remove(a.Length - 1, 1);
            if (a.Contains('[') || a.Contains(']') )
            {
                MessageBox.Show("Cannot enter '[' or ']' characters!", "", MessageBoxButton.OK, MessageBoxImage.Information);
            }
            (sender as TextBox).Text = "[" + a.Replace("[", "").Replace("]", "") + "]";

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T10:55:51.727

Toon Casteele 的答案是一个很好的解决方案。否则，请尝试在表单中添加一个布尔值，当用户选择一个值时，将其设置为 true，并检查 TextChanged 事件中的值是否为 true。

```
private bool IsSelectedItemText; //set it to true when an item is selected 
```

然后进行以下检查：

```
if(!IsSelectedItemText)
    //Check for square brackets
else
    //Add text from item 
```

此外，这与问题没有直接关系，但我强烈建议您只投射一次“发件人”对象。完成后，代码如下所示：

```
private void txtEdit_TextChanged(object sender, TextChangedEventArgs e)
{
    TextBox tb = sender as TextBox;

    if(!IsSelectedItemText)
    {            
        if (tb.Text.Contains("[") || tb.Text.Contains("]"))
        {
            MessageBox.Show("Cannot enter '[' or ']' characters!", "", MessageBoxButton.OK, MessageBoxImage.Information);
            tb.Text = "";
        }
    }
    else
    {
        //Set text from selected item
    }

    IsSelectedItemText = false;
} 
```

请记住在选择项目时将布尔变量设置为“真”。

# android - 只安装一次 Apk

> ID：15521388
> 
> 赞同：1
> 
> 时间：2013-03-20T10:48:37.857
> 
> 标签：android, installation, apk

我想让我的 android 应用程序 apk 只安装一次，如果它是从第一个设备复制的，它不应该在其他设备上运行。是否可以在 android 中执行此操作？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T10:51:56.447

不，这是不可能的。用户可以根据需要多次安装和删除应用程序。此外，只有在我们的应用程序安装后，我们的代码才会受到控制。因此，我们无法确定我们是被安装还是被删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T10:57:24.467

如果您希望您的用户能够安装应用程序，您没有任何方法可以做到这一点

一种可能的解决方法是测试 DeviceID，并仅在 DeviceID 已获得授权时才允许应用程序继续运行。

显然，您必须在代码中进行管理，如果您需要授权大量设备，这可能会变得非常麻烦。另外我不确定每个设备**都有**一个 DeviceID

请参阅[是否有唯一的 Android 设备 ID？](https://stackoverflow.com/questions/2785485/is-there-a-unique-android-device-id)有关此的更多信息

甚至看看[许可](http://developer.android.com/google/play/licensing/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T10:55:35.283

它在 android 中是不可能的，通过使用应用程序签名，如果相同的签名应用程序已经存在，您将无法安装相同的签名应用程序。但您不能将其限制为安装在其他设备上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T10:56:18.733

考虑一下。该应用程序不知道它是否已经安装。

如果您使用的是基于 Web 的应用程序，请在安装后为数据库分配一个值。（只有在数据库中插入该值的设备才能知道该值）

因此，当您的应用程序下次在另一台设备上打开时，请检查该值并禁止该用户。这是您可以阻止它的方式。

# sql-server - SSIS - 如何使用查找在数据流中添加额外的列

> ID：15521390
> 
> 赞同：1
> 
> 时间：2013-03-20T10:48:39.560
> 
> 标签：sql-server, visual-studio-2008, ssis

我有一个包含以下列的 csv 文件：

```
Email | Date | Location 
```

我几乎想把它直接扔到数据库表中。问题是文件中的位置值是字符串 - 例如：“波士顿”。我要插入的表具有整数属性`LocationId`。

所以，在我的数据流的中途，我需要做一个数据库查询来获取Location对应的LocationId。例如：

```
SELECT Id as LocationId FROM Locations WHERE Name = { location string from current csv row } 
```

并将其添加到我当前的列集中作为新值“LocationId”。

我不知道该怎么做 - 我尝试了查找，但这意味着我必须将查找放在单独的数据流中 - 我的 csv 文件中的列似乎不可用。

我想使用缓存，因为相同的位置重复了很多次，并且我不想在不需要时为每一行运行选择。

总之：

1.  我如何才能在数据流的一部分中坚持查找转换（来自不同的源，sql），并将输出与 csv 派生列合并？
2.  查找是否使用了错误的转换？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T10:56:19.100

查找转换将为您工作，它具有缓存，您可以将所有输入列保存到输出，并从您在查找转换中使用的查询中添加列。

您也可以在此处使用合并连接，在某些情况下它是更好的解决方案，但是它会带来额外的开销，因为它需要对其输入进行排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-26T05:49:45.710

检查这个。

> 右键单击查找转换->转到显示高级编辑器->转到输入和输出属性。

在这里您可以添加新列，也可以更改现有列的数据类型。有关如何使用查找的更多信息，请[单击此处](http://microsoft-sql-ssis.blogspot.in/2015/05/how-to-use-look-up-in-ssis.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-03T07:50:51.753

1.  打开平面文件连接管理器，转到高级选项卡。
2.  单击“新建”以添加新列并修改属性。
3.  现在回到平面文件目标输出，右键单击 > 映射 > 将查找列映射到新列。

# jquery - jQuery Mobile 1.3.0 css 不适用于多语言网站

> ID：15521392
> 
> 赞同：1
> 
> 时间：2013-03-20T10:48:43.923
> 
> 标签：jquery, asp.net, jquery-mobile

我正在开发基于 asp.net 网络表单的网站的多语言移动版本。到目前为止一切都很好，除了一个问题，即当我从一种语言切换到另一种语言应用程序下载更正了 CSS 版本但除非我不按 Ctrl + F5 否则无法生效。

我正在使用使用 LTR 和 RTL 方向的英语和阿拉伯语版本，因此需要更改 css。

即使 HTML 源代码显示每种语言的正确 css 版本，我也不确定 css 是否以某种方式被缓存，如下所示。

**英文版**

```
<script src="../Scripts/jquery-1.7.1.js" type="text/javascript"></script>
<script src="script/jquery.mobile-1.3.0/jquery.mobile-1.3.0.js" type="text/javascript"></script>
<link href='script/jquery.mobile-1.3.0/jquery.mobile-1.3.0.css' rel='stylesheet' type='text/css' />
<link href='style/mobile-english.css' rel='stylesheet' type='text/css' /> 
```

**阿拉伯语版**

```
<script src="../Scripts/jquery-1.7.1.js" type="text/javascript"></script>
<script src="script/jquery.mobile-1.3.0/jquery.mobile-1.3.0.js" type="text/javascript"></script>
<link href='script/jquery.mobile-1.3.0/jquery.mobile-arabic-1.3.0.css' rel='stylesheet' type='text/css' />
<link href='style/mobile-arabic.css' rel='stylesheet' type='text/css' /> 
```

**设想**

例如，如果我先转到英文版，然后单击阿拉伯文版本，它将使用英文 CSS 而不是阿拉伯文 css，反之亦然。但是如果我按 CTRL + F5 然后它会使用正确版本的 css

我将不胜感激这方面的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:12:52.923

在这种情况下，您可以在加载新样式后刷新同一页面。

```
$.mobile.changePage(
 window.location.href, { // or '#PageID'
    allowSamePageTransition: true,
    transition: 'none',
    showLoadMsg: false,
    reloadPage: true // Forces page reload if you're using 'window.location.href' or url
}); 
```

上面的代码将重新加载页面而不`transition`刷新其内容。

这是一个[示例](http://jsfiddle.net/Palestinian/jDfhH/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:58:14.013

我设法通过使用以下 jquery 使其工作

```
$(document).ready(function () {
    $('form, a').removeAttr('data-ajax');
    $('form, a').attr('data-ajax', false);
}); 
```

我尝试了几种解决方案，但它们都没有工作，因为它一直使用第一次下载的 CSS，无论是英文版还是阿拉伯文版。

禁用缓存可能还有其他问题，但另一方面我必须使用正确版本的 css

# asp.net - IE10 框架支持被禁用。为什么？我该如何启用它？

> ID：15521400
> 
> 赞同：3
> 
> 时间：2013-03-20T10:49:01.587
> 
> 标签：asp.net, frames, internet-explorer-10

Request.Browser.Frames 返回 false。它应该返回 true，因为这决定了我们是否支持框架，并且我们的应用程序需要框架。

问题出在 IE 10 浏览器 (v10.0.9200.16521) 中，在 Windows 7、64 位上。Web 应用程序被浏览器视为一个 Intranet 网站。

我已经尝试了以下方法：

*   我将该网站添加到受信任的站点，并将安全级别更改为低（作为测试）
*   当浏览器在兼容模式下运行时，支持框架。但我不希望网站以兼容模式运行。
*   将浏览器重置为所有默认值

那么，对于 IE10，我怎样才能让 Request.Browser.Frames 返回 true，而不在兼容模式下运行？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T11:47:29.707

有关如何修复此错误的详细信息，请参阅此链接（您使用的 ASP.NET 版本中的浏览器标识数据可能已过时）：

[http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx](http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx)

# xamarin.ios - 从 NSObject 到具有单声道运行时 2.10.12 的 NSBundle/NSUserDefaults 的奇怪 InvalidCastExceptions

> ID：15521405
> 
> 赞同：1
> 
> 时间：2013-03-20T10:49:11.097
> 
> 标签：xamarin.ios, xamarin

今天早上更新 Xamarin/Monotouch 后，我似乎遇到了一些问题。

我将 MonoDevelop 从 10 天前最新且稳定的任何版本更新到 3.06（抱歉我不能更具体），并将 Xamarin Studio 更新到 4.0.2。我一直在专门使用 MonoDevelop，现在才打开 Xamarin Studio，想知道我是否遇到了 MonoDevelop 错误。

我当前的 MonoTouch 版本是：

> Xamarin.iOS
> 
> 版本：6.2.1.201（企业版）
> 
> 哈希：ed9807c
> 
> 分支：
> 
> 构建日期：2013-19-03 13:42:59-0400

在任一 IDE 中，当在模拟器中以发布或调试模式运行我的应用程序时，我的应用程序崩溃并出现以下 InvalidCastExceptions：

```
System.InvalidCastException: Unable to cast object of type 'MonoTouch.Foundation.NSObject' to type 'MonoTouch.Foundation.NSUserDefaults'.

System.InvalidCastException: Unable to cast object of type 'MonoTouch.Foundation.NSObject' to type 'MonoTouch.Foundation.NSBundle' 
```

这些不是我希望我失败的那种演员:-)

在任何情况下，当从 Xamarin Studio 或 MonoDevelop 构建和安装时，该应用程序都能在装有 iOS 6.1.2 的 iPhone 4 上正确编译、传输和运行

我已将运行时目标设置为 2.10.12、2.10.11 和 2.10.9（通过菜单中的这个新的运行时目标菜单选项，即使它没有任何效果），并且每次应用程序崩溃时都相同方法。

这都是更新之前正常工作的代码（上周，在我去冰岛度假之前，我离开时没有人碰任何东西）

我们不使用任何第三方程序集；我已经清理并重建了所有组件，但这并没有帮助。我将尝试在一个小型测试解决方案中缩小问题范围。

**更新 1：** 在 MonoDevelop 中查看程序集的版本号，我看到：

```
Assembly Version 2.0.5.0, found in /Developer/MonoTouch/usr/lib/mono/2.1 
```

Monotouch 的 Assemlby 版本为 0.0.0.0。

我创建了一个新的 MonoTouch 项目并将第一行添加到它的 main 方法中：

```
public class Application
{
    static void Main (string[] args)
    {
        // My real App crashes on this line with an InvalidCastException:
        string s = NSUserDefaults.StandardUserDefaults.StringForKey("Login");

        UIApplication.Main (args, null, "AppDelegate");
    }
} 
```

这运行良好。

**更新 2：** 在更改测试应用程序的构建选项以匹配我们在真实应用程序中的内容后，我遇到了同样的崩溃。我们拥有的构建选项是：

*   iPhone 构建 -> 常规 -> 链接器选项 -> 链接所有程序集
*   iPhone Build -> Advanced -> 使用 SGen 分代垃圾收集器
*   iPhone Build -> Advanced -> 使用 SGen 分代垃圾收集器 -> 使用引用计数扩展。

**禁用（“使用引用计数扩展”）**允许测试应用程序和我的真实应用程序运行而不会崩溃。所以问题似乎出在那儿。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:22:13.847

> 我已经更新到 Xamarin Studio 4.0.2 和 MonoDevelop 3.0.6

所以您将 MonoDevelop 3.0.6 更新为 Xamarin Studio 4.0.2，对吗？遗憾的是，这并不能准确地告诉我们之前/现在使用的是哪个版本的 MonoTouch/Xamarin.iOS。

获取准确版本信息的最简单方法是使用“Xamarin Studio”菜单、“关于 Xamarin Studio”项、“显示详细信息”按钮并复制/粘贴版本信息（您可以使用“复制信息”按钮）。

你能编辑你的问题来添加这个吗？

> 我的应用程序因以下 InvalidCastExceptions 而崩溃：

您使用预构建的程序集吗？如果有些人反对 MonoTouch 6.0.x（或更早版本），那么强名称更改（在[6.2.x](http://forums.xamarin.com/discussion/1475/changes-to-assembly-strongnames-in-xamarin-ios-6-2-0)中）可能会导致`monotouch.dll`加载两个不同的 - 您将无法在它们之间转换实例。

如果一切都是从源代码重建的（没有无法重新编译的第 3 方 .dll），您是否可以尝试制作一个小样本（例如，通过减少/评论您的应用程序的部分）来准确显示发生这种情况的位置？（如果可能的话，使用源代码编辑您的问题或提交[错误报告](http://bugzilla.xamarin.com)）。

> 我已将运行时目标设置为 2.10.12、2.10.11 和 2.10.9

安装的系统单声道是运行 Xamarin Studio 和一些工具的要求。但是，由 Xamarin.iOS 构建的应用程序不依赖于安装 Mono 的系统。IOW Xamarin.iOS 附带它自己的运行时和 SDK 库（例如程序集）。

# javascript - IE9 中的 JS 签名问题

> ID：15521411
> 
> 赞同：1
> 
> 时间：2013-03-20T10:49:27.217
> 
> 标签：javascript, html, canvas, internet-explorer-9

我是 HTML 5 的新手。我正在使用 Js 签名工具。我不断收到这样的错误

```
Canvas element does not support 2d context. jSignature cannot proceed. 
```

仅在 Ie9 中。它适用于所有其他 IE 版本和其他浏览器。

# python - Python id(obj) 临时更改

> ID：15521417
> 
> 赞同：3
> 
> 时间：2013-03-20T10:49:43.700
> 
> 标签：python, built-in, objectid

这是Python 的 docs re [build-in function的](http://docs.python.org/2/library/functions.html#id)[摘录`id()`](http://docs.python.org/2/library/functions.html#id)：

```
== id(object) ==
Return the “identity” of an object. This is an integer (or long integer) which is
guaranteed to be unique and constant for this object during its lifetime.
Two objects with non-overlapping lifetimes may have the same id() value.

CPython implementation detail: This is the address of the object in memory. 
```

那么...在下面的示例中它是如何变化的？

```
>>> class A(object):
...   def f(self):
...     return True
... 
>>> a=A()
>>> id(a.f)
Out[21]: 62105784L
>>> id(a.f)
Out[22]: 62105784L
>>> b=[]
>>> b.append(a.f)
>>> id(a.f)
Out[25]: 50048528L 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:06:01.990

`a.f`转换为“原始”函数对象`f.__get__(a, A)`在哪里。`f`这样，函数会生成一个包装器，并且每次调用都会生成这个包装器。

`a.f.im_func`引用回原来的函数，它`id()`永远不应该改变。

但是在[上面提到](https://stackoverflow.com/questions/13348031/python-bound-and-unbound-method-object)的问题中，这个问题的处理更加简洁。

# mysql - 无法在查询中按上午/下午对时间（varchar 类型）进行排序

> ID：15521420
> 
> 赞同：1
> 
> 时间：2013-03-20T10:49:53.440
> 
> 标签：mysql

我在数据库中有一些数据，我需要按 am/pm 对时间进行排序。

我的代码

```
$current_dat=date("m/d/Y"); 
```

$current_dat_short = substr($current_dat,0,2);

$rest = substr($current_dat,-7,2);

```
$sql_timesheet=mysql_query('SELECT * FROM timesheet WHERE reg_id='.$regiD.' AND MONTH(date)='.$current_month.' AND YEAR(date)='.$current_year.' ORDER BY date DESC');
while($res_timesheet=mysql_fetch_array($sql_timesheet)){
    $projID=$res_timesheet['project'];
    $taskID=$res_timesheet['task'];
    $editableid=$res_timesheet['id']; 
```

以上查询按时间排序

```
01:20 AM
01:25 PM        
03:25 AM
03:40 AM
04:20 PM 
```

但我需要像这样的输出

```
01:20 AM        
03:25 AM
03:40 AM
01:25 PM
04:20 PM. 
```

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T10:53:44.363

您可以通过使用**MySQL中的**[STR_TO_DATE](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)函数来做到这一点：

 **```
SELECT STR_TO_DATE('10.00pm','%h.%i%p'); 
```

尝试像这样更改您的查询语句：

**更新：** 声明：

```
$sql_timesheet = mysql_query("SELECT * FROM timesheet WHERE reg_id=".$regiD." AND MONTH(date)=".$current_month." AND YEAR(date)=".$current_year." order by STR_TO_DATE(date,'%h.%i%p') desc,start_time asc"); 
```**

# ruby-on-rails - rake db:seed 在 AppFog 上使用 Rails/Spree

> ID：15521423
> 
> 赞同：1
> 
> 时间：2013-03-20T10:49:59.477
> 
> 标签：ruby-on-rails, rake, spree, appfog

我正在 appfog 上测试 Rails/Spree 应用程序，但我无法让数据库播种。我已经按照 T 的这些说明进行操作： [https](https://docs.appfog.com/languages/ruby/rails) ://docs.appfog.com/languages/ruby/rails 但是在我运行`af tunnel`然后打开一个新的终端窗口，然后运行`RAILS_ENV=proxied-appfog rake db:seed`时出现错误

```
loading fixture /var/lib/gems/1.9.1/gems/spree_core-1.3.2/db/default/spree/countries.yml
rake aborted!
Mysql2::Error: closed MySQL connection: SET FOREIGN_KEY_CHECKS = 1 
```

我正在为数据库使用 MySQL。关于为什么会发生这种情况的任何想法？

`rake:db migrate`运行没有错误。

`rake:db reset`失败并出现相同的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T08:13:09.890

也许你跑了`af tunnel`，但它是不完整的。您必须运行一些类似`af tunnel my-app-mysql-1234`然后选择 1 个选项（无）

检查我最近的答案并改变`RAILS_ENV=production rake db:migrate`一些喜欢`RAILS_ENV=production rake db:seed`

[App Fog Rails 迁移数据库](https://stackoverflow.com/questions/13153777/app-fog-rails-migrate-database/17103147#17103147)

它对我来说很好。

祝你好运！

# jquery - 如果收音机选择器打开，我如何正确显示和隐藏 div？

> ID：15521426
> 
> 赞同：1
> 
> 时间：2013-03-20T10:50:10.213
> 
> 标签：jquery, html

已经搜索了谷歌和堆积溢出并找到了一些很好的建议，但是无论我尝试什么都不能正常工作。基本上，如果无线电组设置为“是”，我会尝试显示和隐藏 div。

我曾尝试使用类来实现这一点，但我根本无法让它工作，尽管我相信我误解了这个概念。

值得注意的是，我们也需要它的多个实例才能工作:)

To sum up, i need 2 radio buttons for yes and no, when yes is selected, the next direct div with a class of extra-field needs to display and then hide again if the radio button is selected to no. 我相信需要使用 $(this) 来查找下一个 .extra-field 以仅显示

为了方便，我创建了一个 jsFiddle - [http://jsfiddle.net/andyjh07/GmYjd/](http://jsfiddle.net/andyjh07/GmYjd/)并粘贴了以下代码：

HTML -

```
 <label class="label2">Do you have a 2nd Occupation?</label>
<input class="checkme" type="radio" name="22\. Do you have 2nd Occupation" value="Yes" />Yes
<input type="radio" name="22\. Do you have 2nd Occupation" value="No" />No<br />
<div class="extra-field">
    <label class="label">Secondary Occupation?</label> <input class="textbox requiredField" name="22a. If Yes - Secondary Occupation?" type="text" />
    <div class="clear">&nbsp;</div>
</div> 
```

和 jquery -

```
// Trigger extra fields to show depending on what checkme class is clicked
    $(".checkme").on('click', function(){
        $(this).next(".extra-field").fadeToggle(500);
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:11:04.987

到目前为止我能找到的最佳解决方案：

[http://jsfiddle.net/GmYjd/8/](http://jsfiddle.net/GmYjd/8/)

```
$(':radio').click(function(){
    $(this).parent().next(".extra-field")
        .toggle(this.value.toLowerCase() == 'yes');
}); 
```

您必须将无线电分组到一个元素中，以便您可以专门选择相应的额外字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:55:31.180

我使这很容易理解（尽管代码比其他代码多）..我只是检查了收音机的点击值是否是`yes` `show`div，如果没有的`hide`话..是的`input:radio`将选择所有收音机..您可以使用名称属性指定..但是因为你的名字太长了（我建议你改一下）..

试试这个

```
$('input:radio').click(function(){
  if($(this).val()=='Yes'){
     $(this).siblings(".extra-field").show();  //use slideDown('slow') for effect
  }else{
     $(this).siblings(".extra-field").hide(); //use slideUp('slow') for effect
  }

}); 
```

并且请确保您要使用该名称....在发布表格时可能会给您带来麻烦..（如果您这样做）...

[在这里工作小提琴](http://jsfiddle.net/bipen/GmYjd/6/)

[更新的小提琴](http://jsfiddle.net/bipen/GmYjd/9/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T10:56:49.497

最初使辅助输入字段不可见，并在单击“是”后使其显示。

```
<label class="label2">Do you have a 2nd Occupation?</label>
<input class="checkme" type="radio" name="22\. Do you have 2nd Occupation" value="Yes" />
Yes
<input type="radio" name="22\. Do you have 2nd Occupation" value="No" />
No
<br />
<div class="extra-field" style="display:none">
    <label class="label">Secondary Occupation?</label>
    <input class="textbox requiredField" name="22a. If Yes - Secondary Occupation?" type="text"  />
    <div class="clear">
        &nbsp;
    </div>
</div> 
```

和 JS

```
$('.checkme').click(function() {
   if($('.checkme').is(':checked')) { 
       $(".extra-field").css("display","block")
   }
}); 
```

# java - 尝试将我的 android 应用程序连接到服务器上的 postgres 数据库

> ID：15521428
> 
> 赞同：0
> 
> 时间：2013-03-20T10:50:19.437
> 
> 标签：java, android, jdbc

我正在尝试将我的 android 应用程序连接到服务器上运行的 postgres 数据库，但我遇到了问题。

以下是我的代码，

```
@TargetApi(Build.VERSION_CODES.GINGERBREAD)
private void download() throws IOException {
    // TODO Auto-generated method stub
    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
            .permitAll().build();
    StrictMode.setThreadPolicy(policy);
    int response = -1;
    InputStream in = null;

    try {
        Class.forName("org.postgresql.Driver");
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
        text.setText((CharSequence) e);}
    try {
    HttpURLConnection conn1;
    String urli = "jdbc:postgresql://"my ip":5432/iwmp_prd?user=postgres";
    conn1 = (HttpURLConnection) DriverManager.getConnection(urli);
URL url = new URL(urli);
        //HttpURLConnection conn1 = url.openConnection();
         conn1.connect();
        if (!(conn1 instanceof HttpURLConnection))
            throw new IOException("Not an HTTP connection");
        //HttpURLConnection httpConn = (HttpURLConnection) conn1;
        //httpConn.setAllowUserInteraction(false);
        //httpConn.setInstanceFollowRedirects(true);
        //httpConn.setRequestMethod("GET");
        //httpConn.connect();

        response = conn1.getResponseCode();
        if (response == HttpURLConnection.HTTP_OK) {
            in = conn1.getInputStream();

            try {
                String nsql = "select user_name from iwmp_user_reg where user_id=?";

                PreparedStatement pstm = ((Connection) conn1).prepareStatement(nsql);
                String user = "DL0000AD";
                pstm.setString(1, user);

                ResultSet rs = pstm.executeQuery();
                while (rs.next()) {
                    String retval = rs.getString(1);
                    text.setText((CharSequence) retval);
                }
                rs.close();
                pstm.close();
                ((Closeable) conn1).close();
            } catch (SQLException e) {
                e.printStackTrace();
                text.setText((CharSequence) e);
            }

        }
    } catch (Exception ex) {
        throw new IOException("Error connecting");
    }

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}
} 
```

错误如下，

```
java.lang.ClassCastException: org.postgresql.jdbc2.Jdbc2Connection cannot be cast to java.net.HttpURLConnection

and it i use HttpURLConnection, then i get an error of 
java.net.MalformedURLException: Unknown protocol: jdbc 
```

我知道我的代码都搞砸了，但我仍在尝试。

# 3d - XNA 3D 透明度取决于绘图顺序？

> ID：15521431
> 
> 赞同：0
> 
> 时间：2013-03-20T10:50:24.413
> 
> 标签：3d, transparency, xna-4.0

我正在绘制两个 3D 对象，它们都可以独立地从不透明变为透明，并且它们可以相交（所以你不能说其中一个在另一个*之前*）。查看图像以获得更好的理解（其中一个对象是地形，另一个是区域）：

[正确平局](http://img15.imageshack.us/img15/365/terrainandzone.png)

现在，如果我对它们都应用透明度，并在该区域之前绘制地形，则地形相对于该区域不是透明的，但该区域是：

[不正确的透明度](http://img46.imageshack.us/img46/391/terrainandzonetranspare.png)

最后，如果我在地形之前绘制区域，那么该区域对于地形来说不是透明的：

[不正确的透明度 2](http://imageshack.us/f/191/terrainandzonetranspare.png/)

**问题：**如何在不依赖绘图顺序的情况下使所有对象对其余对象透明？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:39:37.487

你不能。至少，不是微不足道的——你正在做的操作本质上是依赖于顺序的。当从不同的视点和半透明度渲染时，即使是您的地形本身也会出现问题。

所以实际上你要么必须改变你正在做的事情，以便使用非顺序相关的操作（例如加法或减法混合，尽管在你的情况下这可能不会得到有用的结果），要么探索其他控制绘图的选项排序不仅仅是在对象级别排序。

例如，您可以研究深度剥离，这涉及在多个通道中渲染您的场景，在图层中合成像素。这可以处理相交的多边形，但是您需要渲染的层数越多，它的成本就越高。

# objective-c - 为什么要使用块时需要“块复制”？

> ID：15521441
> 
> 赞同：1
> 
> 时间：2013-03-20T10:50:48.387
> 
> 标签：objective-c, memory-leaks, objective-c-blocks

```
 ProductCenterController __weak *tempSelf = self;

 void(^block)(void) = ^{
    tempSelf.actIndView = ....
    [tempSelf.view addSubview:tempSelf.actIndView];
};

[NSThread detachNewThreadSelector:@selector(actionForThreadBlock:) toTarget:self withObject:block]; 
```

我发现泄漏 - '_Block_copy_internal'...（我使用 ARC）然后当我将最后一行代码更改为这样的东西时，泄漏丢失了......：

```
[NSThread detachNewThreadSelector:@selector(actionForThreadBlock:) toTarget:self withObject:[block copy]]; 
```

如果我不使用[块复制]，为什么会导致泄漏？？？？

我认为，块将在函数后释放，线程将在完成后全部释放......

它将如何导致泄漏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:13:46.433

块是在堆栈上创建的，因此当您的方法（范围）结束时它们会被释放。一段时间后，您的线程将尝试执行已释放的块，以异常结束。

`Copy`将块从堆栈移动到堆内存，因此即使在原始方法结束后它仍然存在。

广泛讨论该主题时，请参阅 Apple 文档。

# ios - 应用内购买的代码执行

> ID：15521446
> 
> 赞同：0
> 
> 时间：2013-03-20T10:50:59.203
> 
> 标签：ios, objective-c, runtime, in-app-purchase

究竟如何下载代码或二进制文件并在运行时链接到它，并设置应用程序在运行时加载此二进制文件？

我希望在应用程序中购买以二进制形式下载并在运行时加载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T10:52:56.447

在 iOS 中，在未越狱的设备上，您*无法*下载代码以供应用程序在运行时执行。您可以做的最接近的做法是已经在您的应用程序中拥有代码，但永远不要执行它，除非它下载了某种允许（在您的应用程序逻辑内）运行代码的令牌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:53:36.000

我认为您不能从应用内购买中下载任意代码。我想您的应用程序将被 Apple 拒绝。

[https://developer.apple.com/appstore/guidelines.html](https://developer.apple.com/appstore/guidelines.html)

# jsf - 如何在 JSF 中导航？如何使 URL 反映当前页面（而不是上一个页面）

> ID：15521451
> 
> 赞同：58
> 
> 时间：2013-03-20T10:51:13.170
> 
> 标签：jsf, url, redirect, navigation

我目前正在学习 JSF，当我意识到每当我们使用 时`<h:form>`，JSF 的标准行为总是在浏览器中显示*上一页*的 URL ，而不是*当前*页面的 URL，这让我感到非常惊讶和困惑。

我知道这与 JSF 总是将表单发布到同一页面然后只是将控制器返回给不知道页面位置已更改的浏览器的任何页面呈现给浏览器的方式有关。

**似乎 JSF 已经存在了足够长的时间，必须有一个干净、可靠的方法来处理这个问题。如果是这样，你介意分享吗？**

我找到了各种解决方法，但遗憾的是，似乎没有一个真正可靠的解决方案。

*   只需接受 URL 具有误导性即可。
*   附加`"?faces-redirect=true"`到*每个*bean 动作的返回值，然后
    *   弄清楚如何`@RequestScoped`用其他东西替换（Flash Scopes，CDI 对话，@SessionScoped，...）。
    *   接受为每个用户操作进行两次 HTTP 往返。
*   使用某种方法（例如 3rd 方库或自定义代码）隐藏 URL 中的页面名称，始终为每个页面使用相同的通用 URL。

如果`"?faces-redirect=true"`尽可能好，有没有办法配置整个应用程序以这种方式处理所有请求？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2013-03-20T12:05:48.207

`<h:form>`事实上，JSF 作为基于表单的应用程序目标 MVC 框架将 POST 表单提交到与请求表单的页面相同的 URL 。您可以通过查看`<form action>`生成的 HTML 输出的 URL 来确认。这在 web 开发术语中被称为*postback*。默认情况下，回发上的导航不会导致对新 URL 的新请求，而是将目标页面加载为响应的内容。当您只想要页面到页面导航时，这确实令人困惑。

通常，导航/重定向的正确方法取决于业务需求和请求的[幂等](http://en.wikipedia.org/wiki/Idempotence)性（阅读：“书签性”）（注意：有关具体代码示例，请参阅下面的“另请参阅”链接）。

*   如果请求是幂等的，只需使用 GET 表单/链接而不是 POST 表单（即使用,`<a>`或`<form>`代替and ）。 例如，逐页导航、类似 Google 的搜索表单等。`<h:link>``<h:button>``<h:form>``<h:commandXxx>`

*   如果请求是非幂等的，只需在同一视图中有条件地显示结果（即返回`null`或`void`从动作方法并使用例如`<h:message(s)>`和/或`rendered`）。
    例如，页内数据输入/编辑、多步向导、模态对话框、确认表单等。

*   如果请求是非幂等的，但目标页面是幂等的，则只需在 POST 之后发送重定向（即使用`?faces-redirect=true`from action 方法返回结果，或手动调用`ExternalContext#redirect()`，或放入`<redirect/>`遗留的 XML 导航案例）。
    例如，编辑成功后显示所有数据列表，登录后重定向等。

请注意，纯页面到页面导航通常是幂等的，这就是许多 JSF 初学者因滥用命令链接/按钮而失败的地方，然后抱怨 URL 没有改变。另请注意，导航案例很少用于针对 SEO/UX 开发的实际应用程序中，这是许多 JSF 教程失败的地方，让读者不相信。

另请注意，使用 POST 绝对不会比 GET“更安全”，因为请求参数不会立即在 URL 中可见。它们在 HTTP 请求正文中仍然可见并且仍然可以操作。因此，为了“安全”，绝对没有理由将 POST 用于幂等请求。真正的安全性在于使用 HTTPS 而不是 HTTP，并在当前登录的用户被允许查询实体 X 或操作实体 X 等情况下检查业务服务方法。一个体面的安全框架为此提供了注释。

### 也可以看看：

*   [重定向和导航/转发之间有什么区别以及何时使用什么？](https://stackoverflow.com/questions/11277366)
*   [JSF 隐式与显式导航](https://stackoverflow.com/questions/18037884)
*   [用于链接/导航到其他 JSF 页面的 URL](https://stackoverflow.com/questions/30683584)
*   [通过查看参数功能可添加书签](https://stackoverflow.com/questions/13249844)
*   [<f:metadata>、<f:viewParam> 和 <f:viewAction> 可以用来做什么？](https://stackoverflow.com/questions/6377798)
*   [什么时候应该使用 h:outputLink 而不是 h:commandLink？](https://stackoverflow.com/questions/4317684)
*   [为实体创建主从页面，如何链接它们以及选择哪个 bean 范围](https://stackoverflow.com/questions/8459903)
*   [在 JSF 表单提交上保留 GET 请求查询字符串参数](https://stackoverflow.com/questions/17734230)
*   [在 @ViewScoped bean 之间传递对象而不使用 GET 参数](https://stackoverflow.com/questions/25694423)

# javascript - 这个 JavaScript 模式是如何工作的：命名空间构造函数

> ID：15521456
> 
> 赞同：0
> 
> 时间：2013-03-20T10:51:29.540
> 
> 标签：javascript, design-patterns

我在理解此操作时遇到问题：

```
tmp.setAttribute(i, prop[i]); 
```

在这个for循环中经过。prop-array 如何创建 2 个参数。据我了解`var = i`只是一个变量，对吗？但显然它就像那样成为方法中的 1:st 参数？

谢谢你的时间。

[http://jsbin.com/ozoqob/2/edit](http://jsbin.com/ozoqob/2/edit)

```
var MYAPP = MYAPP || {}; 

MYAPP.dom = {};
   MYAPP.dom.Element = function(type, prop){
     var tmp = document.createElement(type);
     for (var i in prop) {
       tmp.setAttribute(i, prop[i]);
       /*
       WHAT I DONT UNDERSTAND IS HOW THIS FOR-LOOP DIVIDE THE ARRAY IN TWO ARGUMENTS?? BEACAUSE 'I' IS JUST A VARIABLE WHICH IS USED TO LOOP THRU THE ARRAY BUT APPARENTLY NOT RIGHT?
       */
       console.log(i); // how? is this arguments divided?
       console.log(prop[i]);
     }
  return tmp; 
   };

var el1 = new MYAPP.dom.Element(
       'a',
       {href:'http://phpied.com'}
   );

console.log(el1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:09:13.893

2个概念：

1.  JavaScript 中的每个对象都是一个哈希表，因此您可以通过键访问其属性值，例如`obj[key]`；
2.  JavaScript 中的 for-in 循环循环目标对象中的键（而不是循环值）

在您的代码中，`for (var i in prop)`循环对象中的所有键`prop`并将每个键存储在`i`. 因此，对于每个键`i`，您可以通过 获取其值`prop[i]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:54:10.457

您将对象作为第二个参数传递给该方法。`for...in`然后，您使用循环枚举该对象的属性。在循环的每次迭代中，`i`将引用对象属性的标识符，`prop[i]`因此将引用该属性的值：

```
var prop = {
    prop1: "value1",
    prop2: "value2"
};

for (var i in prop) {
    console.log(i); // "prop1", "prop2"
    console.log(prop[i]); // "value1", "value2"
} 
```

此行为[在 spec 中进行了](http://es5.github.com/#x12.6.4)`P`解释，如果您想象在`i`上面的示例中，则由这一行总结：

> 令*P*为*obj*的 [[Enumerable]] 属性为 true 的下一个属性的名称。

# php - 在文本中查找和替换价格的算法

> ID：15521461
> 
> 赞同：0
> 
> 时间：2013-03-20T10:51:47.947
> 
> 标签：php, algorithm, magento, replace

我有一段任意文本，通过 CMS 中的 magento 提供，

检索到的文本可能包含价格。所以例如

交付文本

> 超过 200 欧元的订单免费送货。200 欧元以下的订单收取 10 欧元的费用。重货可能会收取额外费用。

我将如何替换每次出现的价格，所以在上述情况下我会改变

```
€200
€10
€200 
```

我想根据当前使用的货币替换这些价格。

```
$fromCur = 'EUR'; // currency code to convert from
$toCur = 'USD'; // currency code to convert to
$toCurrencyPrice = Mage::helper('directory')->currencyConvert($fromCurrencyPrice, $fromCur, $toCur); 
```

这就是我将如何转换价格，唯一的是，我不知道如何在文本中找到价格

这是我迄今为止尝试过的

```
//the text to search
$text = 'Orders over &euro;200 are delivered Free Of Charge. &euro;10 charge for orders under &euro;200\. There may be additional charges for heavy goods.';

$matches = array();
//find a price with a euro symbol
preg_match_all("/&euro;[0-9]+/", $text, $matches);

$ints = array();
$counter = 0;
//remove the euro symbol
foreach ($matches[0] as $match) {
   //echo  substr( $match,6) . '<br/>';
   $ints[$counter] = substr( $match,6);
   $counter++;

}
//now i know i have to convert it to my price, but my issue is, how do i now replace new values, with the old values inside the $ text varaible 
```

假设我想使用 $ints 中的元素（不带欧元符号的价格）更改找到的匹配项。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:16:30.470

不是完整的解决方案，但首先，您可以使用以下方法提取价格和单位：

```
$text = "I bought a shoes 33 $, a tee shirt 44 $ and a short 55 €.";

$match = array();
preg_match_all("/([0-9]+)[ ]*(€)|([0-9]+)[ ]*([$])/", $text, $match);
print_r($match); 
```

它会给你：

```
Array
(
    [0] => Array
        (
            [0] => 33 $
            [1] => 44 $
            [2] => 55 €
        )

    [1] => Array
        (
            [0] => 
            [1] => 
            [2] => 55
        )

    [2] => Array
        (
            [0] => 
            [1] => 
            [2] => €
        )

    [3] => Array
        (
            [0] => 33
            [1] => 44
            [2] => 
        )

    [4] => Array
        (
            [0] => $
            [1] => $
            [2] => 
        )
) 
```

您将能够决定要应用什么逻辑（了解价值和货币符号）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:18:29.897

PHP 文档是一个很好的起点。您必须使用字符串搜索功能。试着弄清楚自己，你有整个 PHP 文档可以查看。只需在 google 上搜索 string search php，你就会找到大量信息。

以下是一些可能对您有所帮助的功能：

[http://php.net/manual/en/function.strpos.php](http://php.net/manual/en/function.strpos.php)

[http://php.net/manual/en/function.preg-match.php](http://php.net/manual/en/function.preg-match.php)

我认为 pregmatch 将满足您的需求。了解该功能并在您的范围内使用它。

祝你好运 ！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T12:17:30.047

假设您始终将 € 作为您的传入货币，请尝试下一个代码：

```
$string = 'Orders over €200 are delivered Free Of Charge. €10 charge for orders under €200\. There may be additional charges for heavy goods.';
$pattern = "#€[0-9]{1,}#";
$newStr = preg_replace_callback($pattern, create_function(
        '$matches',
        'return Mage::helper(\'directory\')->currencyConvert($matches[0], \'EUR\', \'USD\');'
    ), $string);
echo $newStr; 
```

我还没有测试过，但它应该可以工作；

**更新：**

我只是想转换你有，你可能需要先删除然后添加货币符号；但你应该有一个起点 - 只需使用返回函数

# c# - OracleCommand.CommandText 中的查询文本是否有最大长度？

> ID：15521470
> 
> 赞同：1
> 
> 时间：2013-03-20T10:52:00.767
> 
> 标签：c#, sql, oracle, dataprovider

我正在使用`OracleCommand`该类从 C# 查询 Oracle 数据库（版本 9 或 10）。

```
String query = GetQuery(); //may produce quite lenghty queries...
OracleCommand command = connection.CreateCommand();
command.CommandText = query;
command.CommandType = CommandType.Text; 
```

此类`Oracle.DataAccess.Client`位于（版本“10.2.0.100”）中的命名空间中`Oracle.DataAccess.dll`，它来自 Oracle，而不是 Microsoft。据我所知，它已经很老了，但如果没有必要，我不喜欢改变。

我担心的是，**这个查询字符串是否有最大长度？该类或底层 Oracle 数据库是否有限制？**

*注意：我熟悉 Microsoft SQL Server，但对 Oracle 很陌生。我也确实在寻找文档，但这次谷歌对这个细节没有太大帮助。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T11:14:25.863

[Oracle9i Database Reference](http://docs.oracle.com/cd/B10500_01/server.920/a96536/ch44.htm#288033)规定了 sql 语句长度的限制：

> > 最大 64 K；特定工具可能会施加下限

[但是，11g 上的类似页面](http://docs.oracle.com/cd/B28359_01/server.111/b28320/limits003.htm#i288032)并未声明精确的限制：

> > SQL 语句的长度限制取决于许多因素，包括数据库配置、磁盘空间和内存

相信我们可以肯定，oracle 数据库 10 和 11 版本支持 64k 查询。

类文档`OracleCommand`不会对`CommandText`长度引入任何例外或限制。

# jquery - JQuery 导航 - 下拉导致问题

> ID：15521472
> 
> 赞同：0
> 
> 时间：2013-03-20T10:52:06.643
> 
> 标签：jquery, drop-down-menu, navigation, hover

所以我目前正在尝试使用 JQuery 并且到目前为止导航工作正常。我是来添加下拉列表的，它会引起问题，想知道是否有人能明白为什么。

HTML：

```
<ul id="navigation">
        <li id="first" onclick="window.location='index.html';"><span id="logo"></span><span class="navigation-text">Home</span></li>
        <li class="standard"><span class="gallery_icon"></span><span class="navigation-text">Gallery</span>
            <ul class="subnavigation">
                <li>Portfolio 1 Column</li>
                <li>Portfolio 2 Column</li>
            </ul>
        </li>
        <li class="standard"><span class="gallery_icon"></span><span class="navigation-text">Gallery</span></li>
        <li class="standard"><span class="gallery_icon"></span><span class="navigation-text">GalleryGallery123</span></li>
    </ul> 
```

查询：

```
<script type="text/javascript">
$(document).ready(function() {

    // On hover:
    $('#navigation li').hoverIntent(function () {
        width = $(this).children('span:nth-child(2)').width();
        text = $(this).children('span:nth-child(2)');          

        var newwidth = (width + 15) // Original width + 15px padding        
        text.filter(':not(:animated)').animate({"width":"1px"}, 0).show(); // Make the width 0px and make the element visible
        text.animate({"width":+newwidth+"px"}, 300); // Animate the width to the new size
        $(this).children('ul').slideDown('slow')

    },
    function () {
        text.animate({"width":"1px"}, 150); // Animate the width to 0px and hide the element
        text.animate({"width":+width+"px"}, 0);
        setTimeout(function() {
            $('#navigation li .navigation-text').hide();
        },100);
        $(this).children('.subnavigation').slideUp('slow');
    });

});

</script> 
```

如果您将鼠标悬停在绿色栏或任何不包含下拉列表的 LI 上，则它可以正常工作。如果您再次执行此操作，它会打开和关闭并继续工作。但是，如果您将鼠标悬停在下拉列表上并将其保持在该下拉列表的第一个 LI 上，然后继续移动到父级关闭的第二个 LI，最终大小错误，并且下拉列表的第一个 LI 隐藏其自身。

如果你玩它可能最好，这样你就知道我在说什么，因为我不确定这是否有意义。

JFiddle： http: [//jsfiddle.net/5NcHk/](http://jsfiddle.net/5NcHk/) 直播：[http ://dev.evaske.com/Navigation/](http://dev.evaske.com/Navigation/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:20:02.127

好吧，您`li`在`#navigation`. 这包括子项因此，当您将鼠标悬停在 li 之外时，它将隐藏该子项。

更改您的选择器

```
$('ul#navigation li').hoverIntent(function () { 
```

到

```
$('ul#navigation > li').hoverIntent(function () { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:19:27.617

您正在将 hoverIntent 事件处理程序分配给导航中的所有 li。这会导致当您从一个子菜单项移动到另一个子菜单项时触发 mouseout 事件。如果您移动鼠标的速度足够快，不会触发“投资组合链接 1”上的事件并移动到第二个链接，则它可以正常工作。仅当您将鼠标悬停在链接 1 上然后链接 2 时才会出现问题。

您可以通过更新 mouseout 处理程序来解决此问题，以在执行 mouseout 操作之前检查鼠标是否仍在子菜单中。

# javascript - 如何在 java 脚本日历中禁用以前的日期..？

> ID：15521475
> 
> 赞同：1
> 
> 时间：2013-03-20T10:52:13.563
> 
> 标签：javascript

我在我的项目中使用 javascript 日历。它运行良好。但我想禁用日历中以前的日期。用于该日历的代码如下..

```
 /* Code starts here*/

    var datepickr = (function() {
            var datepickrs = [],
            currentDate = new Date(),
            date = {
                current: {
                    year: function() {
                        return currentDate.getFullYear();
                    },
                    month: {
                        integer: function() {
                            return currentDate.getMonth();
                        },
                        string: function(full) {
                            var date = currentDate.getMonth();
                            return monthToStr(date, full);
                        }
                    },
                    day: function() {
                        return currentDate.getDate();           
                    }
                },
                month: {
                    string: function(full, currentMonthView) {
                        var date = currentMonthView;
                        return monthToStr(date, full);
                    },
                    numDays: function(currentMonthView, currentYearView) {
                        // checks to see if february is a leap year otherwise return the respective # of days
                        return (currentMonthView == 1 && !(currentYearView & 3) && (currentYearView % 1e2 || !(currentYearView % 4e2))) ? 29 : daysInMonth[currentMonthView];
                    }
                }
            },
            weekdays = ['Sun', 'Mon', 'Tues', 'Wednes', 'Thurs', 'Fri', 'Satur'],
            months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],
            daysInMonth = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31],
            suffix = { 1: 'st', 2: 'nd', 3: 'rd', 21: 'st', 22: 'nd', 23: 'rd', 31: 'st' },
            buildCache = [],
            handlers = {
                calendarClick: function(e) {
                    if(e.target.className) {
                        switch(e.target.className) {
                            case 'prev-month':
                            case 'prevMonth':
                                this.currentMonthView--;
                                if(this.currentMonthView < 0) {
                                    this.currentYearView--;
                                    this.currentMonthView = 11;
                                }
                                rebuildCalendar.call(this);
                            break;
                            case 'next-month':
                            case 'nextMonth':
                                this.currentMonthView++;
                                if(this.currentMonthView > 11) {
                                    this.currentYearView++;
                                    this.currentMonthView = 0;
                                }
                                rebuildCalendar.call(this);
                            break;
                            case 'day':
                                this.element.value = formatDate(new Date(this.currentYearView, this.currentMonthView, e.target.innerHTML).getTime(), this.config.dateFormat);
                                this.close();
                            break;
                        }
                    }
                },
                documentClick: function(e) {
                    if(e.target != this.element && e.target != this.calendar) {
                        var parentNode = e.target.parentNode;
                        if(parentNode != this.calender) {
                            while(parentNode != this.calendar) {
                                parentNode = parentNode.parentNode;
                                if(parentNode == null) {
                                    this.close();
                                    break;
                                }
                            }
                        }
                    }
                }
            };

            function formatDate(milliseconds, dateFormat) {
                var formattedDate = '',
                dateObj = new Date(milliseconds),
                format = {
                    d: function() {
                        var day = format.j();
                        return (day < 10) ? '0' + day : day;
                    },
                    D: function() {
                        return weekdays[format.w()].substring(0, 3);
                    },
                    j: function() {
                        return dateObj.getDate();
                    },
                    l: function() {
                        return weekdays[format.w()] + 'day';
                    },
                    S: function() {
                        return suffix[format.j()] || 'th';
                    },
                    w: function() {
                        return dateObj.getDay();
                    },
                    F: function() {
                        return monthToStr(format.n(), true);
                    },
                    m: function() {
                        var month = format.n() + 1;
                        return (month < 10) ? '0' + month : month;
                    },
                    M: function() {
                        return monthToStr(format.n(), false);
                    },
                    n: function() {
                        return dateObj.getMonth();
                    },
                    Y: function() {
                        return dateObj.getFullYear();
                    },
                    y: function() {
                        return format.Y().toString().substring(2, 4);
                    }
                },
                formatPieces = dateFormat.split('');

                foreach(formatPieces, function(formatPiece) {
                    formattedDate += format[formatPiece] ? format[formatPiece]() : formatPiece;
                });

                return formattedDate;
            }

            function foreach(items, callback) {
                var i = 0, x = items.length;
                for(i; i < x; i++) {
                    if(callback(items[i], i) === false) {
                        break;
                    }
                }
            }

            function addEvent(element, eventType, callback) {
                if(element.addEventListener) {
                    element.addEventListener(eventType, callback, false);
                } else if(element.attachEvent) {
                    var fixedCallback = function(e) {
                        e = e || window.event;
                        e.preventDefault = (function(e) {
                            return function() { e.returnValue = false; }
                        })(e);
                        e.stopPropagation = (function(e) {
                            return function() { e.cancelBubble = true; }
                        })(e);
                        e.target = e.srcElement;
                        callback.call(element, e);
                    };
                    element.attachEvent('on' + eventType, fixedCallback);
                }
            }

            function removeEvent(element, eventType, callback) {
                if(element.removeEventListener) {
                    element.removeEventListener(eventType, callback, false);
                } else if(element.detachEvent) {
                    element.detachEvent('on' + eventType, callback);
                }
            }

            function buildNode(nodeName, attributes, content) {
                var element;

                if(!(nodeName in buildCache)) {
                    buildCache[nodeName] = document.createElement(nodeName);
                }

                element = buildCache[nodeName].cloneNode(false);

                if(attributes != null) {
                    for(var attribute in attributes) {
                        element[attribute] = attributes[attribute];
                    }
                }

                if(content != null) {
                    if(typeof(content) == 'object') {
                        element.appendChild(content);
                    } else {
                        element.innerHTML = content;
                    }
                }

                return element;
            }

            function monthToStr(date, full) {
                return ((full == true) ? months[date] : ((months[date].length > 3) ? months[date].substring(0, 3) : months[date]));
            }

            function isToday(day, currentMonthView, currentYearView) {
                return day == date.current.day() && currentMonthView == date.current.month.integer() && currentYearView == date.current.year();
            }

            function buildWeekdays() {
                var weekdayHtml = document.createDocumentFragment();
                foreach(weekdays, function(weekday) {
                    weekdayHtml.appendChild(buildNode('th', {}, weekday.substring(0, 2)));
                });
                return weekdayHtml;
            }

            function rebuildCalendar() {
                while(this.calendarBody.hasChildNodes()){
                    this.calendarBody.removeChild(this.calendarBody.lastChild);
                }

                var firstOfMonth = new Date(this.currentYearView, this.currentMonthView, 1).getDay(),
                numDays = date.month.numDays(this.currentMonthView, this.currentYearView);

                this.currentMonth.innerHTML = date.month.string(this.config.fullCurrentMonth, this.currentMonthView) + ' ' + this.currentYearView;
                this.calendarBody.appendChild(buildDays(firstOfMonth, numDays, this.currentMonthView, this.currentYearView));
            }

            function buildCurrentMonth(config, currentMonthView, currentYearView) {
                return buildNode('span', { className: 'current-month' }, date.month.string(config.fullCurrentMonth, currentMonthView) + ' ' + currentYearView);
            }

            function buildMonths(config, currentMonthView, currentYearView) {
                var months = buildNode('div', { className: 'months' }),
                prevMonth = buildNode('span', { className: 'prev-month' }, buildNode('span', { className: 'prevMonth' }, '&lt;')),
                nextMonth = buildNode('span', { className: 'next-month' }, buildNode('span', { className: 'nextMonth' }, '&gt;'));

                months.appendChild(prevMonth);
                months.appendChild(nextMonth);

                return months;
            }

            function buildDays(firstOfMonth, numDays, currentMonthView, currentYearView) {
                var calendarBody = document.createDocumentFragment(),
                row = buildNode('tr'),
                dayCount = 0, i;

                // print out previous month's "days"
                for(i = 1; i <= firstOfMonth; i++) {
                    row.appendChild(buildNode('td', null, '&nbsp;'));
                    dayCount++;
                }

                for(i = 1; i <= numDays; i++) {
                    // if we have reached the end of a week, wrap to the next line
                    if(dayCount == 7) {
                        calendarBody.appendChild(row);
                        row = buildNode('tr');
                        dayCount = 0;
                    }

                    var todayClassName = isToday(i, currentMonthView, currentYearView) ? { className: 'today' } : null;
                    row.appendChild(buildNode('td', todayClassName, buildNode('span', { className: 'day' }, i)));

                    dayCount++;
                }

                // if we haven't finished at the end of the week, start writing out the "days" for the next month
                for(i = 1; i <= (7 - dayCount); i++) {
                    row.appendChild(buildNode('td', null, '&nbsp;'));
                }

                calendarBody.appendChild(row);

                return calendarBody;
            }

            function buildCalendar() {
                var firstOfMonth = new Date(this.currentYearView, this.currentMonthView, 1).getDay(),
                numDays = date.month.numDays(this.currentMonthView, this.currentYearView),
                self = this;

                var inputLeft = inputTop = 0,
                obj = this.element;

                if(obj.offsetParent) {
                    do {
                        inputLeft += obj.offsetLeft;
                        inputTop += obj.offsetTop;
                    } while (obj = obj.offsetParent);
                }

                var calendarContainer = buildNode('div', { className: 'calendar' });
                calendarContainer.style.cssText = 'display: none; position: absolute; top: ' + (inputTop + this.element.offsetHeight) + 'px; left: ' + inputLeft + 'px; z-index: 100;';

                this.currentMonth = buildCurrentMonth(this.config, this.currentMonthView, this.currentYearView)
                var months = buildMonths(this.config, this.currentMonthView, this.currentYearView);
                months.appendChild(this.currentMonth);

                var calendar = buildNode('table', null, buildNode('thead', null, buildNode('tr', { className: 'weekdays' }, buildWeekdays())));
                this.calendarBody = buildNode('tbody');
                this.calendarBody.appendChild(buildDays(firstOfMonth, numDays, this.currentMonthView, this.currentYearView));
                calendar.appendChild(this.calendarBody);

                calendarContainer.appendChild(months);
                calendarContainer.appendChild(calendar);

                document.body.appendChild(calendarContainer);

                addEvent(calendarContainer, 'click', function(e) { handlers.calendarClick.call(self, e); });

                return calendarContainer;
            }

            return function(elementId, userConfig) {
                var self = this;

                this.element = document.getElementById(elementId);
                this.config = {
                    fullCurrentMonth: true,
                    dateFormat: 'F jS, Y'
                };
                this.currentYearView = date.current.year();
                this.currentMonthView = date.current.month.integer();

                if(userConfig) {
                    for(var key in userConfig) {
                        if(this.config.hasOwnProperty(key)) {
                            this.config[key] = userConfig[key];
                        }
                    }
                }

                this.documentClick = function(e) { handlers.documentClick.call(self, e); }

                this.open = function(e) {
                    addEvent(document, 'click', self.documentClick);

                    foreach(datepickrs, function(datepickr) {
                        if(datepickr != self) {
                            datepickr.close();
                        }
                    });

                    self.calendar.style.display = 'block';
                }

                this.close = function() {
                    removeEvent(document, 'click', self.documentClick);
                    self.calendar.style.display = 'none';
                }

                this.calendar = buildCalendar.call(this);

                datepickrs.push(this);

                if(this.element.nodeName == 'INPUT') {
                    addEvent(this.element, 'focus', this.open);
                } else {
                    addEvent(this.element, 'click', this.open);
                }
            }
        })();
/* Code Ends here*/ 
```

在上面的代码中，我是要添加更多内容还是要更改某些内容..？

请告诉我..

在此先感谢，Sree ram。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:12:19.700

以下代码应防止选择当前日期之前的任何日期。

```
$('#element').datepicker({
    minDate: new Date()
}); 
```

希望这能回答你的问题。

# c# - 将所选项目从数据网格视图保存到文本框

> ID：15521477
> 
> 赞同：1
> 
> 时间：2013-03-20T10:52:15.037
> 
> 标签：c#, .net, winforms, datagridview

我有 3 个表单`form1`，，`form2`. `form3`form1 将首先加载/运行。当我按下一个按钮时`form1`，它将打开一个`form2`带有文本框的新按钮。当我单击文本框时，它将打开`form3`一个包含多行的 datagridview。

所以我使用了上下文菜单条`form3`并将项目命名为选择，比如如果我选择 datagridview 行并选择 contextmenustrip 项目选择（比如 datagridview 有两列名称和密码），密码必须输出文本框存在于`form2`. 我试过了，但什么也没发生。

**form1 按钮点击事件**：

```
 private void AddBusMasterBtn_Click(object sender, EventArgs e)
    {
        this.Hide();
        Form2 Obj = new Form2();
        Obj.ShowDialog();
        this.Show();
    } 
```

`form2`有一个文本框，当我单击该文本框时，将打开一个新表单，其中有一个数据网格视图和上下文菜单条，其中包含名为 select 的项目，如果我选择带有项目选择的条，它必须将选定的行项目放在`form2`

```
 private void FromStopIDtextBox_Click(object sender, EventArgs e)
    {
        Form3 obj = new Form3();
        obj.ShowDialog();
    } 
```

这是选择上下文菜单条项目

```
 private void selectToolStripMenuItem_Click(object sender, EventArgs e)
    {
        int Row = dataGridView1.CurrentRow.Index;
        string StopId_var = dataGridView1[0, Row].Value.ToString();
        form2 obj = new form2();
        obj.textbox.text = StopId_var;

        this.Close();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:02:51.153

```
Form3 obj = new Form3(ref textBox);
obj.ShowDialog(); 
```

您需要创建第二个构造函数`Form3`，它从 Form2 中获取文本框，作为参考。

```
 Textbox textbox;
    public Form3(ref TextBox _textbox)
    {
       InitializeComponents();
      textbox = _textbox;
    } 
```

现在，当单击菜单项时，您必须将当前单击的行列值的值分配给文本框文本；

```
 private void selectToolStripMenuItem_Click(object sender, EventArgs e)
 {
        int Row = dataGridView1.CurrentRow.Index;
        string StopId_var = dataGridView1[0, Row].Value.ToString();
        textbox.Text = StopId_var;
        this.Close();
  } 
```

# visual-studio - VS 2012 Intellisense 无法打开源文件 *.tlh - Intellisense 不工作

> ID：15521478
> 
> 赞同：3
> 
> 时间：2013-03-20T10:52:15.403
> 
> 标签：visual-studio, intellisense

我正在使用 Visual Studio 2012 Professional 和最新的 Resharper 插件开发一个包含 C# 和 C++ 代码混合的大型解决方案。

我从源代码管理中获得了整个解决方案的新副本。

正如预期的那样，在我第一次编译我的解决方案之前，Intellisense 将其卷曲的红线放置在 C++ 代码中的许多类型和字段下。然而现在，即使在（成功）编译整个解决方案之后，这些波浪线也不会消失。

我收到 100 多个 Intellisense 错误提示“Intellisense：无法打开源文件 .tlh

但是这些文件肯定存在于给定的位置，并且当我以提升的权限启动它时，VS 对它们具有完全的访问权限。

我什至可以使用下面的红线跳入命名空间、声明或其他内容，因此代码肯定存在。

如何让 Intellisense 再次工作并使这些烦人的线条消失？

# php - PHP 变量 vs 数组 vs 对象

> ID：15521479
> 
> 赞同：9
> 
> 时间：2013-03-20T10:52:18.270
> 
> 标签：php, object

这可能被认为是一个非常愚蠢的问题，但我正在为网站组装一个简单的模板系统，并试图跟踪我的变量使用情况并保持一切整洁。

您能告诉我以下方法是否有任何优点/缺点：

**简单的变量：**

```
$tpl_title = 'my title'
$tpl_desc = 'my text' 
```

**大批：**

```
$tpl['title'] = 'my title'
$tpl['desc'] = 'my text' 
```

**目的：**

```
$tpl->title = 'my title'
$tpl->desc = 'my text' 
```

我最喜欢对象方法，因为它在 html 中回显时看起来很干净，而不是数组和 afaik，它可以以类似数组的方式使用吗？但是，我想知道以这种方式使用对象是否被认为是不好的做法或引入了不必要的开销？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T11:03:03.777

在理想情况下，每个变量都应该属于一个对象，而不是用于临时目的的方法的局部变量。然而，我们并不生活在一个理想的世界中，特别是我们的编程语言远非如此。根据情况，选择最好的方法来让你的生活更轻松。如果您将事物用于模板，通常您将所有数据保存在一个数组中，并`extract`在数组中获取独立变量。

所以，是的，对象方法是最好的，尽量让它发生，而不需要花费大量时间去做。

另外，如果您喜欢对象并希望以简洁`->`的方式进行操作，则可以

```
$object = (object)$array; 
```

这会将您的数组转换为对象。

希望有帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-20T10:57:23.130

我认为这是不必要的开销。以面向对象的方式做你正在谈论的事情只意味着在你的类中你只会创建一堆变量，就像你在第一个例子中指定的那样。

在我看来，数组是最好的方法。您只使用一个变量，您也可以将它集成到您​​的类中。所以，而不是`$tpl->title`，你可能有`$tpl->text['title']`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T10:58:47.200

# 数组

我建议在后端部分，将所有内容存储在一个数组中。这使您可以只跟踪一个变量，一旦将其传递到前端，您就可以`extract()`通过数组将它们转换为简单的变量。

## 句法

使用`extract()`简化了前端的语法，这意味着模板中始终只有 $variables。

在后端，您将设置
`$array['title'];`

模板中提取的哪个是
`$title;`

## 后端函数示例

```
 protected function fetch($template, $data = null)
    {
        if (!$this->isTemplate($template)) {
            throw new Exception("Template file $this->_templatePath$template not found");
        }
        ob_start();
        if (is_array($data)) {
            extract($data, EXTR_SKIP);
        }
        require $this->_templatePath . $template . EXT;
        return ob_get_clean();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T10:59:10.537

最后它们是相同的，这取决于偏好，虽然我会使用数组或对象，因为你可以在那里对变量进行分组，所以你可以更好地整理东西。

尽管 objects 方法有效，但我认为这不是它的自然预期用途。

所以我会说数组！

此外，还有大量的 php 原生函数可以与数组一起使用，比如数组排序等等`array_map()`……`array_filter()`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T11:04:18.753

在我看来，最干净的设置方法是这样的：

```
$tpl = array (
  'title' => 'my title',
  'desc' => 'my text'
); 
```

您也可以将它与赞恩的回答结合起来。

祝一切顺利！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-20T11:56:40.830

```
$tpl = array (
  'title' => 'my title',
  'desc' => 'my text'
); 
```

就像 Goran 说的那样，您可以稍后将这些数组存储在一个 ini 文件中，并根据需要使用[parse_ini_file提取它们](http://php.net/manual/en/function.parse-ini-file.php)

如果您想允许用户写入他们自己的 ini 文件，这可能很重要。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-27T06:14:07.117

如果您想在使用后重置大量可变数据，则数组和对象很有用。

您可以简单地取消设置数组或销毁对象，而不是取消设置代码中使用的变量范围。

除此之外，数组和对象在代码和解释方面比普通变量更具对称性

# c# - Infragistics 网格（行选择）

> ID：15521483
> 
> 赞同：0
> 
> 时间：2013-03-20T10:52:35.713
> 
> 标签：c#, asp.net, infragistics, webdatagrid

我正在使用 Infragistics WebDataGrid 来显示数据。我想默认选择第一行。我尝试了相同但不工作的代码

```
 SelectedRowCollection selectedRows = gvHospital.Behaviors.Selection.SelectedRows;
 selectedRows.Add(this.gvHospital.Rows[1]); 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:01:42.970

那么，第一行将是索引 0，不是吗？:) 另外，请确保您已提供数据源并首先绑定网格。

# javascript - 在文档加载时获取图像高度

> ID：15521484
> 
> 赞同：0
> 
> 时间：2013-03-20T10:52:45.760
> 
> 标签：javascript, jquery, html

我想设置 div#top 高度等于图像高度。我写：

```
$(document).ready(function() {
    setTopHeight();
});

/*
* window resizing
*/
$(window).resize(function() {
    setTopHeight();
});

/*
* setting #top height by banner height
*/
var setTopHeight = function() {
    var bannerHeight = $('#banner-image').height();
    $('#top').height(bannerHeight + 'px');
}; 
```

它适用于调整大小，但不适用于重新加载。我试过这样的东西：

```
$(document).ready(function() {
    setTimeout(function() {
        setTopHeight();
    }, 50);
}); 
```

它有效，但当然不是解决方案。有人能告诉我为什么 console.log 返回 0 吗？

```
$(document).ready(function() {
    console.log($('#banner-image').height());
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:58:40.757

[jQuery .load()](http://api.jquery.com/load-event/)充当事件处理程序。`.load()`是`.on('load, function(){})`. 如果完全加载图像/元素，它将被触发。

示例 1：

```
$('#banner-image').load(setTopHeight); 
```

示例 2

```
$('#banner-image').load(function(){
    setTopHeight();
}); 
```

示例 3

```
$('#banner-image').on('load', setTopHeight); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T10:57:07.110

`.ready`将无法工作，因为您的图像尚未加载。利用`.load`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T10:57:09.620

`$(document).ready`当 DOM 准备好时触发，但图像可能仍在下载 - 所以还没有高度。您可以在图像上使用[jQuery 加载。](http://api.jquery.com/load-event/)

```
$('#banner-image').on('load', function () {
    setTopHeight();
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T10:59:13.017

尝试 .load() 代替 .ready()

```
$(window).load(function() {
      setTopHeight();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T11:01:37.910

图像加载在您的文档之后的第二轮 HTTP 中进行。所以你需要听图像加载

```
$('#banner-image').load(setTopHeight); 
```

# opencart - Opencart 产品.tpl

> ID：15521487
> 
> 赞同：0
> 
> 时间：2013-03-20T10:52:57.137
> 
> 标签：opencart

如果我尝试在 OPENCART product.tpl 文件中回显 php 变量并且它没有出现在网站上，我错过了在哪里添加一行代码？

注意：数据库中有一个字段。我可以从管理面板保存到这个字段（我在那里添加了一个自定义字段）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T12:01:13.553

您是否还编辑了产品控制器以加载变量并将其传递给模板？我猜不是...在调用之前编辑`catalog/controller/product/product.php`和添加`$this->data['MYVARIABLE'] = $product_info['MYVARIABLE'];`某处。`$this->render()`

# iphone - 在应用商店打开iTunes链接？

> ID：15521488
> 
> 赞同：1
> 
> 时间：2013-03-20T10:53:03.677
> 
> 标签：iphone, ios, objective-c, ios5, app-store

我的应用程序有 3 种语言，我想在按钮单击时打开应用商店，链接是我的另一个应用程序。但是当我发送应用商店的链接时，它总是用英文描述打开美国市场。当我使用浏览器时，它会正确。我哪里出错了。

```
-(IBAction)Button_us_itune:(id)sender{
    NSString *ituneLink =@"https://itunes.apple.com/us/app/My_application/AppID?mt=8&ign-mpt=uo%3D4";
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:ituneLink]];

}
-(IBAction)Button_fr_itune:(id)sender{
    NSString *ituneLink =@"https://itunes.apple.com/fr/app/My_application/AppID?mt=8&ign-mpt=uo%3D4";
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:ituneLink]];
}
-(IBAction)Button_du_itune:(id)sender{
    NSString *ituneLink =@"https://itunes.apple.com/de/app/My_application/AppID?mt=8&ign-mpt=uo%3D4";
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:ituneLink]];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:56:29.013

这可能是因为您在美国商店使用/登录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-03T13:34:02.100

其实这很容易。你有两个错误：

1.  您在链接中使用国家/地区代码。即你确切地提到你想开什么商店。这很糟糕，因为在某些情况下，用户会打开与您需要的不同的商店。如果您要求 US 并且用户注册了另一个，您将失去他。

2.  您可能无法分辨用户注册到哪个商店。因此，即使您创建了正确的链接，您也永远无法知道要调用哪个函数（根据我的知识，没有 API 可以知道用户在哪里注册 - 您只能知道他在哪里或他的语言设置）。

所以，你可以删除国家代码。IE：

```
NSString *ituneLink =@"https://itunes.apple.com/app/My_application/AppID?mt=8&ign-mpt=uo%3D4" 
```

但**即便如此，在某些情况下和某些操作系统版本中，链接本身也可能会出现问题**。

**我建议**您使用一个名为[iLink](https://www.cocoacontrols.com/controls/ilink)的简单库，它可以（在运行时）计算出所有内容并创建您需要的始终有效的链接。它还有一个很棒的功能，如果商店里有更新，它会提示用户进行更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T11:13:04.937

您正在提供丹麦应用程序链接。而且我认为您已使用其他国家/地区登录。

# c++ - VC++：无效的模板参数

> ID：15521491
> 
> 赞同：1
> 
> 时间：2013-03-20T10:53:14.150
> 
> 标签：c++, templates, visual-c++, compiler-errors

我正在尝试在 VS 2010 中重建一个旧的 VC++ 项目。它目前正在吐出一个`Invalid template argument`错误。

我必须添加[`.template`关键字](https://stackoverflow.com/a/13344954/1294758)吗？在哪里？

完整的错误如下：

> 错误 C2975：“N”：ToChunkFunc 的模板参数无效，预期的编译时常量表达式

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T11:16:04.750

关键字不可用`C2975`时可能会导致错误。`__LINE__`如果打开了编辑并继续，编译器将使用`/ZI`允许创建**程序数据库**而不是**PDB 文件**的选项运行，在这种模式下，`__LINE__`常量不可用，因为行号可以在运行时更改。您需要使用`/Zi`支持`__LINE__`常量的命令行选项。

要在 VS IDE 中设置此编译器选项：

1.  打开`Project Settings`> `C/C++`> `General`。
2.  修改调试信息格式属性。

# php - 带命令行的 PHP

> ID：15521493
> 
> 赞同：-1
> 
> 时间：2013-03-20T10:53:18.563
> 
> 标签：php, command-line-interface

我已经在我的系统中安装了 WAMP，并且具有 WAMP 的默认配置并且它工作正常。现在我想从 CLI 执行一个脚本。我已经尝试了很多但仍然失败。我附上图片以明确问题，![在此处输入图像描述](../Images/fba066008dd658dd82ec45ca70534a1a.png)

并且在系统路径中验证是

***C:\Program Files\Common Files\Microsoft Shared\Windows Live;%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;%SYSTEMROOT%\System32\WindowsPowerShell\v1.0***

看起来像

![系统路径变量](../Images/f8c0339a1d51f53697d357395e4c5fea.png)

现在我想执行一个简单的脚本，比如 hello-world.php，请帮助我。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:01:57.990

我不知道您的 wamp 安装版本是什么版本的 php，但根据我的版本，尝试执行它：

```
C:\wamp\bin\php\php5.4.3\php.exe hello-world.php 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:58:35.783

你试过了`php hello-world.php`吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T10:57:45.603

将您的 PHP bin 文件夹放入 Path 变量中。

*C:\Program Files\Common Files\Microsoft Shared\Windows Live;%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;%SYSTEMROOT%\System32\WindowsPowerShell\v1.0;C:\wamp\ php;*

您可以在其中找到**php.exe**的文件夹的路径。之后重新启动命令行。

然后你可以从命令行运行`php`。

```
php hello-world.php 
```

# iphone - 如何使用 Apple 提供的崩溃报告等代码生成崩溃报告

> ID：15521494
> 
> 赞同：0
> 
> 时间：2013-03-20T10:53:25.650
> 
> 标签：iphone, ios

我想为 Symbolicate iOS Crash 生成崩溃报告以查看崩溃日志，所以我想使用代码获取崩溃报告，目前我只得到：

*** -[__NSArrayM objectAtIndex:]：索引 121 超出范围 [0 .. 23]

```
 Application received signal SIGSEGV

( 

  0   CoreFoundation                      0x3120e2bb  + 186
  1   libobjc.A.dylib                     0x38f2b97f objc_exception_throw + 30
  2   CoreFoundation                      0x3120e1c5  + 0
  3   myshine                             0x001f9f51 myshine + 1503057
  4   libsystem_c.dylib                   0x393a9e8b _sigtramp + 34
  5   myshine                             0x000ac985 myshine + 137605
  6   myshine                             0x000ac35d myshine + 136029
  7   CoreFoundation                      0x311ab7cf  + 74

)

 not have 

/ 1: Process Information
  Incident Identifier: 30E46451-53FD-4965-896A-457FC11AD05F
  CrashReporter Key:   5a56599d836c4f867f6eec76afee451bf9ae5f31
  Hardware Model:      iPhone4,1
  Process:         Rage Masters [4155]
  Path:            /var/mobile/Applications/A5635B22-F5EF-4CEB-94B6-FE158D885014/Rage      Masters.app/Rage Masters
  Identifier:      Rage Masters
  Version:         ??? (???)
  Code Type:       ARM (Native)
  Parent Process:  launchd [1]

 / / 2: Basic Information
Date/Time:       2012-10-17 21:39:06.967 -0400
OS Version:      iOS 6.0 (10A403)
Report Version:  104

// 3: Exception
Exception Type:  00000020
Exception Codes: 0x000000008badf00d
Highlighted Thread:  0 
```

我想得到同样的报告

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-20T12:20:31.100

因此，您想编写自己的崩溃报告器，以便获取报告并对其进行符号化？

编写崩溃报告非常非常困难，请参阅开源库[PLCrashReporter](https://code.google.com/p/plcrashreporter/)的开发人员的这两篇文章以了解其中涉及的内容：http: [//landonf.bikemonkey.org/code/objc/Reliable_Crash_Reporting.20110912.html](http://landonf.bikemonkey.org/code/objc/Reliable_Crash_Reporting.20110912.html)和[http ://landonf.bikemonkey.org/code/crashreporting/Reliable_Crash_Reporting_1.1.20130119.html](http://landonf.bikemonkey.org/code/crashreporting/Reliable_Crash_Reporting_1.1.20130119.html)

简而言之：

*   所有代码都必须是异步安全的。这意味着你**不能**使用任何 Objective-C 代码。大多数 C 方法也不是异步安全的。
*   一旦发生崩溃，您可以（基本上）不分配新内存。

您所询问的所有细节以及尚未被要求撰写此类记者的细节都需要写出超出答案的内容。

只是不要自己写，以免麻烦。那里有很多现成的解决方案。有些是开源的，如果它们对上述规则是安全的，则可以进行验证，有些是封闭的源代码，不容易验证（上面的文章确实详细介绍了其中一些）。

我不会对各种解决方案提出任何建议，因为我有偏见，因为我是一个开源和一个商业解决方案的开发人员。上面链接的文章确实分析了一些可用的解决方案。

所以这里有一些。

开源：

*   [PLCrashReporter](https://code.google.com/p/plcrashreporter/)：自 2009 年以来在数千个应用程序中使用。安全、可靠地创建可以符号化的标准格式崩溃报告。
*   [KSCrash](https://github.com/kstenerud/KSCrash/)：很新。创建标准格式的崩溃报告。可以连接到不同的服务器解决方案。
*   [QuincyKit](http://quincykit.net)：基于 PLCrashReporter 的客户端 SDK 和基于 PHP 的服务器组件。使集成 PLCrashReporter 变得容易，服务器组件收集报告并在符号化后对其进行分组。可以使用您自己的 Mac 自动执行符号化来执行实际的符号化。（免责声明：我是这个的开发者）

托管/商业解决方案：

*   [Bugsense](http://bugsense.com)：免费和付费计划。在后台使用 PLCrashReporter。SDK 的其余部分似乎是封闭源代码。服务器端符号。
*   [BugSnag](https://bugsnag.com)：免费和付费计划。开源 SDK。在引擎盖下使用 KSCrash。
*   [Crashlytics](http://crashlytics.com)：免费。闭源。确实在后台使用了 PLCrashReporter，现在使用他们自己的实现。服务器端符号。
*   [Crittercism](http://crittercism.com)：免费和付费计划。在后台使用 PLCrashReporter。SDK 的其余部分似乎是封闭源代码。服务器端符号。
*   [HockeyApp](http://hockeyapp.net)：付费计划，1 个月试用期。在后台使用 PLCrashReporter，所有 SDK 都是开源的。创建标准格式的崩溃报告。服务器端符号。（免责声明：我是这个的联合创始人和开发者之一）
*   [Sentry](https://www.getsentry.com/)：付费，相当新，开源（SDK 和服务器）。在引擎盖下使用 KSCrash。
*   [Testflight](http://testflight.com)：免费，封闭源代码。服务器端符号。

肯定还有一些我忘记了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T11:00:45.747

在 Xcode 目标中，

> 将“调试信息格式”设置为 DWARF。
> 
> 生成调试符号：是
> 
> 在复制期间去除调试符号：是

查看图片了解更多信息。在最终上传时，请确保您恢复相同。这是为了测试。 ![在此处输入图像描述](../Images/0c05288a4f1d71a2bb257352e0e4654f.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T11:01:02.657

为此，您需要有一个在创建分发版本时生成的 dYSM 文件。

下面的链接可以对你有所帮助..

[符号化 iPhone 应用程序崩溃报告](https://stackoverflow.com/questions/1460892/symbolicating-iphone-app-crash-reports)

# java - 在Android上连接到没有互联网的wifi时如何解锁Inputstream读取方法？

> ID：15521496
> 
> 赞同：2
> 
> 时间：2013-03-20T10:53:34.253
> 
> 标签：java, android, inputstream

我正在开发一个 android 上的程序，当有新版本时它应该自我更新。我使用该类`HttpUrlConnection`连接到服务器，然后我得到`inputstream`了连接。我`inputstream.read(byte[] buffer)`在一个被 try & catch 包围的线程中放入了一个循环。

当我断开 wifi（未关闭）时，IOException 被抛出。但是，如果我断开路由器与网络的连接，`inputstream.read(byte[] buffer)`则被阻塞而没有任何异常抛出。它保持阻塞而没有超时。

如何解除阻止`read()`通知客户端已断开网络连接的方法？

任何解决方案或提示将不胜感激。

# c# - 指数超出范围。必须是非负数且小于集合的大小。参数名称：索引（DECIMAL）

> ID：15521497
> 
> 赞同：-1
> 
> 时间：2013-03-20T10:53:34.377
> 
> 标签：c#, indexing, decimal

```
SalesOrderEntry rey = new SalesOrderEntry(id, cash);
total = Convert.ToInt32(lblCustomersCash.Text) - Convert.ToInt32(lblSubtotal.Text);

if (total > cash)
{
    DGVTOTAL.DataSource = ProductREPO.GETORDERTOTALLIST();

    for (int i = 0; i < DGVORDER.Rows.Count; ++i)
    {
        SalesOrderEntry see = new SalesOrderEntry(id, cash);
        //CASH = 649 and im selecting an item that is equivalent to 30

        sum2 = Convert.ToInt32(DGVORDER.Rows[i].Cells["OrderedProductPrice"].Value);

        dgvGetID.DataSource = SalesORDERREPO.weredone(id);
        decimal newcash = int.Parse(dgvGetID.Rows[0].Cells["Cash"].Value.ToString());
        MessageBox.Show("NEW BALANCE CASH: " + newcash);
    }
}
else
{
    MessageBox.Show("Hey your Cash is not ENOUGH to Buy this ITEM");
} 
```

我想显示其新的现金余额.. 扣除其小计.. 但我有这个错误：

`<Index was out of range. Must be non-negative and less than the size of the collection. Parameter name: index>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T11:58:44.327

您确定 dgvGetID 包含项目吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:01:13.763

DataGridViews 行从元素 0 而不是元素 1 开始，因此当尝试访问第 6 个元素时，您需要访问 DGV.Rows[5] 而不是 DGV.Rows[6] 而 DataGridViews.Rows.Count 返回从1 而不是 0。

编辑：

向评论者澄清

datagridview rows 数组从元素 0 开始，因此 datagridview1.Rows[0] 给出了 DGV (DataGridView) 的第一行。

在提供的代码中，海报循环直到 DGV.ROWS.COUNT 将返回基于非零的计数。我的意思是如果有 6 行，则 count 返回 6 但 DGV.ROWS 数组中的最后一行由 DGV.Rows[5] 访问，因为 ROWS 数组是从零开始的（从 0 开始）所以 Rows[0]是第一行，Rows[1] 第二行等...希望这可以为人们解决问题

# php - Zend Server 6 apc 不工作

> ID：15521503
> 
> 赞同：1
> 
> 时间：2013-03-20T10:53:38.400
> 
> 标签：php, apc, zend-server

我已经在 Windows 7 上安装了 Zend Server 6。从[这里](http://downloads.php.net/pierre/)下载了非线程安全的 apc dll (php_apc-3.1.10-5.4-vc9-x86.zip) 。当我在 php.ini 中添加 apc 扩展时，zend 服务器没有启动。以前版本的 Zend Server 没有问题。什么会导致它？

更新：日志文件中有错误。

```
PHP Fatal error:  Uncaught exception 'ReflectionException' with message 'Class  does not exist' in C:\Program Files (x86)\Zend\ZendServer\GUI\vendor\ZF2\library\Zend\Code\Reflection\ClassReflection.php:172 
```

# ios - 单击按钮时隐藏键盘？

> ID：15521508
> 
> 赞同：5
> 
> 时间：2013-03-20T10:53:59.857
> 
> 标签：ios, objective-c, cocoa-touch, uitextfield, uitextfielddelegate

我正在创建下面显示的 iPhone 应用程序。

在屏幕的末尾我有文本字段。我为此添加了一个代表。因为它是数字键盘，所以我单独添加了按钮，以便在单击按钮时隐藏键盘。

下面是我的代码：

## 。H

```
@interface SearchViewController : UIViewController<UITextFieldDelegate>

@property (retain, nonatomic) IBOutlet UITextField *textField006;
@property (retain, nonatomic) IBOutlet UIButton *doneButton;
- (IBAction)doneAction:(id)sender; 
```

## .m

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
    NSLog(@"textFieldShouldReturn");
    return YES;
}

- (void)textFieldDidBeginEditing:(UITextField *)textField
{
    NSLog(@"textFieldDidBeginEditing");
    // Ensure the relevant text field is visible
    CGAffineTransform translation = CGAffineTransformIdentity;
    CGRect screenBound = [[UIScreen mainScreen] bounds];
    CGSize screenSize = screenBound.size;
    CGFloat screenHeight = screenSize.height;

    if (screenHeight==480 || screenHeight==568) {
            translation = CGAffineTransformMakeTranslation(0, -120);
        doneButton.hidden = NO;
        NSLog(@"line 3");
        [UIView beginAnimations:nil context:nil];
        self.view.transform = translation;
        [UIView commitAnimations];
    }
}

- (IBAction)doneAction:(id)sender {
    doneButton.hidden = NO;    
    doneButton.hidden = YES;
    [textField006 resignFirstResponder];
    [UIView beginAnimations:nil context:nil];
    self.view.transform = CGAffineTransformIdentity;
    [UIView commitAnimations];
    [self.textField006 resignFirstResponder];

} 
```

为什么键盘不隐藏？我该如何隐藏它？

> 键盘 == 小数键盘 Return 键 >> Go 自动启用 Return 键 = 勾选

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-20T10:55:59.227

一定要使用[endEditing:](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)如果它当前没有正确隐藏。

关于`endEditing`：

> “endEditing 导致视图（或其嵌入的文本字段之一）放弃第一响应者状态。”
> 
> “此方法查看当前视图及其子视图层次结构，以查找当前是第一响应者的文本字段。如果找到，则要求该文本字段辞去第一响应者的职务。如果强制参数设置为 YES，则文本甚至从未问过这个领域；它被迫辞职。”

因此，以下应该有效（在您的按钮单击操作方法中）：

```
[self.view endEditing:YES]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-28T10:09:14.610

@lifetimes 答案的 Swift 版本

```
self.view.endEditing(true) 
```

它对我来说非常有效

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T11:10:47.273

你也可以制作`[self.textField006 resignFirstResponder]`

# r - 数据帧散点图

> ID：15521519
> 
> 赞同：0
> 
> 时间：2013-03-20T10:54:26.317
> 
> 标签：r, dataframe, scatter-plot

我创建如下数据框：

```
 DATE        R1        R2       R3       R4        R5 HOUR    SVALUE
1  2003-01-25 00:00:00  352.2828  285.2375 141.5788 232.4384  356.0331    0  623.7061
13 2003-01-25 06:00:00 1085.2570  918.6110 989.0535 727.4486 1080.8820   06 1009.7621
25 2003-01-26 00:00:00  518.2674  934.3774 323.4014 542.6376  365.3300    0  475.1363
37 2003-01-26 06:00:00 1015.1920 1272.1173 941.1970 922.3203 1030.0044   06  679.9303
49 2003-01-27 00:00:00  637.3027  674.5031 457.4424 803.0685  547.2401    0  387.9804
61 2003-01-27 06:00:00  763.5950  639.5652 726.1546 528.9499  787.2823   06  692.8306 
```

我想针对 SVALUE 列（在 X 轴上）生成所有 R1 到 R5 列（在 Y 轴上）的单个散点图（不是矩阵图）。所以 R1-SVALUE、R2-SVALUE 等等……

我已经通过使用 for 循环实现了这一点，我只是想知道是否有更直接的方法可以做到这一点而无需旋转列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:01:06.873

如果您以正确的格式获取数据，这实际上并不太难。最简单的方法是使用`stack`.

### 修复您的数据

```
toPlot <- data.frame(SVALUE = temp$SVALUE, stack(temp[2:6]))
## Here are the first 10 rows
head(toPlot, 10)
#       SVALUE    values ind
# 1   623.7061  352.2828  R1
# 2  1009.7621 1085.2570  R1
# 3   475.1363  518.2674  R1
# 4   679.9303 1015.1920  R1
# 5   387.9804  637.3027  R1
# 6   692.8306  763.5950  R1
# 7   623.7061  285.2375  R2
# 8  1009.7621  918.6110  R2
# 9   475.1363  934.3774  R2
# 10  679.9303 1272.1173  R2 
```

### 绘制新数据

```
plot(toPlot[1:2]) 
```

![在此处输入图像描述](../Images/e58f10d92ff735a2020b0968eb394436.png)

* * *

将来，如果您以如下形式共享您的数据会有所帮助：

```
temp <- structure(list(DATE = structure(1:6, .Label = c("2003-01-25 00:00:00", 
  "2003-01-25 06:00:00", "2003-01-26 00:00:00", "2003-01-26 06:00:00", 
  "2003-01-27 00:00:00", "2003-01-27 06:00:00"), class = "factor"), 
      R1 = c(352.2828, 1085.257, 518.2674, 1015.192, 637.3027, 
      763.595), R2 = c(285.2375, 918.611, 934.3774, 1272.1173, 
      674.5031, 639.5652), R3 = c(141.5788, 989.0535, 323.4014, 
      941.197, 457.4424, 726.1546), R4 = c(232.4384, 727.4486, 
      542.6376, 922.3203, 803.0685, 528.9499), R5 = c(356.0331, 
      1080.882, 365.33, 1030.0044, 547.2401, 787.2823), HOUR = c(0L, 
      6L, 0L, 6L, 0L, 6L), SVALUE = c(623.7061, 1009.7621, 475.1363, 
      679.9303, 387.9804, 692.8306)), .Names = c("DATE", "R1", 
  "R2", "R3", "R4", "R5", "HOUR", "SVALUE"), class = "data.frame", row.names = c("1", 
  "13", "25", "37", "49", "61")) 
```

然后其他人可以轻松地复制并粘贴到他们的 R 会话中，并尝试您的代码、识别任何问题等等。

# c++ - 类设计以避免需要基类列表

> ID：15521520
> 
> 赞同：1
> 
> 时间：2013-03-20T10:54:28.143
> 
> 标签：c++, inheritance, rtti

我目前处于类库的设计阶段，偶然发现了一个类似于“[使用没有 RTTI 的中央管理器管理不同的类](https://stackoverflow.com/questions/5128475/managing-diverse-classes-with-a-central-manager-without-rtti)”或“[避免 dynamic_cast 的模式](https://stackoverflow.com/questions/9949110/pattern-to-avoid-dynamic-cast)”的问题。

想象有一个类层次结构，其中有一个基类*Base*和两个作为*Base子类的**DerivedA*和*DerivedB*类。在我的库中的某个地方，将有一个类需要保存*DerivedA*和*DerivedB*类型的对象列表。进一步假设此类将需要根据类型对两种类型执行操作。显然我会在这里使用虚函数来实现这个行为。但是如果我需要管理类来给我*DerivedA*类型的所有对象呢？

 ***这是一个糟糕的类设计的指标，因为我只需要对类层次结构的一个子集执行操作吗？

或者它只是意味着我的管理类不应该使用*Base*列表而是两个列表 - 一个用于*DerivedA*，一个用于*DerivedB*？因此，如果我需要对这两种类型执行操作，我将不得不遍历两个列表。在我的情况下，需要向层次结构添加新子类的可能性非常低，目前的数量约为 3 或 4 个子类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T10:58:50.147

> 但是，如果我需要管理类来给我所有 DerivedA 类型的对象呢？
> 
> 这是一个糟糕的类设计的指标，因为我只需要对类层次结构的一个子集执行操作吗？

更有可能是而不是。如果您经常需要这样做，那么质疑层次结构是否有意义是有意义的。在这种情况下，您应该将其分成两个不相关的列表。

另一种可能的方法是也通过虚拟方法来处理它，例如`DeriveB`，对于不影响它的方法，将有一个无操作实现。不知道更多信息就很难说。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T10:58:32.210

如果您将必须以不同方式处理的对象存储（指向）在一起，这肯定是设计不良的标志。

但是，您可以将这种不同的行为实现为基类中的空函数或使用访问者模式。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-20T11:06:58.257

您可以通过多种方式做到这一点。

*   尝试使用`dynamic_cast`特定的类（这是一个蛮力解决方案，但我只将它用于接口，将它用于类是一种代码气味。它会工作。）
*   执行以下操作：

    ```
    class BaseRequest {};
    class DerivedASupportedRequest : public BaseRequest {}; 
    ```

    然后修改您的类以支持该方法：

    ```
    // (...)
    void ProcessRequest(const BaseRequest & request); 
    ```

*   `bool TryDoSth()`在基类中创建虚方法；`DerivedB`将始终返回 false，同时`DerivedA`将实现所需的功能。

*   上述替代方案： Create method `Supports(Action action)`，其中`Action`是定义可能动作或动作组的枚举；在这种情况下，调用`DoSth()`不支持给定功能的类应该会导致抛出异常。
*   基类可能有方法`ActionXController * GetControllerForX()`；`DerivedA`将返回实际控制人，`DerivedB`将返回`nullptr`.
*   同样，基类可以提供方法：`BaseController * GetController(Action a)`

你问，这是否是一个糟糕的设计。我相信，这取决于有多少功能是常见的，又有多少是不同的。如果您有 100 种常用方法而只有一种不同，那么将这些数据保存在单独的列表中会很奇怪。但是，如果不同方法的数量很明显，请考虑更改应用程序的设计。这可能是一般规则，但也有例外。不知道上下文很难说。***

# html - HTML5 全屏 API - DIV 不滚动

> ID：15521521
> 
> 赞同：2
> 
> 时间：2013-03-20T10:54:28.987
> 
> 标签：html, api, fullscreen

我正在研究移动应用程序。当全屏 api 处于活动状态时，我允许在 firefox 桌面上滚动我的 div，但不能在移动 firefox 上滚动。看起来一切都被冻结了。

有人知道如何解决这个问题吗？或者这只是浏览器不支持的东西？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:59:15.343

您使用的是哪个版本？

首先我听说过这个全屏 API，但是根据文档[https://developer.mozilla.org/en-US/docs/DOM/Using_fullscreen_mode](https://developer.mozilla.org/en-US/docs/DOM/Using_fullscreen_mode)，它声明它在 Firefox mobile 9 中默认没有启用，但它在版本 10 中。

# php - Magento 自定义肥皂 API 不起作用

> ID：15521535
> 
> 赞同：0
> 
> 时间：2013-03-20T10:55:17.360
> 
> 标签：php, magento, soap

我正在尝试在 magento 中创建自定义肥皂 API，[我将此代码用于我的自定义 API](https://stackoverflow.com/questions/7519556/how-to-setup-custom-api-for-magento-with-soap-v2) 它在我的 PC 上运行良好，但在服务器上却无法运行。**当我从app/code/core/Mage/Api/Model/Server/Handler/Abstract.php**记录异常时，我知道了

> 2013-03-20T15:09:16+00:00 调试（7）：包括（Mage/Abt/Test/Model/Api.php）：无法打开流：没有这样的文件或目录/opt/lampp/htdocs/ mag/lib/Varien/Autoload.php
> 
> 2013-03-20T15:09:16+00:00 DEBUG (7): include(): 未能打开“Mage/Abt/Test/Model/Api.php”以包含（include_path ='/opt/lampp/htdocs/mag/app/code/local:/opt/lampp/htdocs/mag/app/code/community:/opt/lampp/htdocs/mag/app/code/core:/opt/ lampp/htdocs/mag/lib:.:/opt/lampp/lib/php')/opt/lampp/htdocs/mag/lib/Varien/Autoload.php

我检查了文件**/opt/lampp/htdocs/mag/lib/Varien/Autoload.php**它的存在，但为什么它显示出`failed to open stream: No such file or directory`

关于这个问题的任何想法？

# extjs - 在 ExtJS Grid 的 actioncolumn 中，如何使用传递给 getClass/getTip 的 `v` 参数？

> ID：15521536
> 
> 赞同：0
> 
> 时间：2013-03-20T10:55:17.823
> 
> 标签：extjs

在 ExtJS 网格中，`actioncolumn`我希望根据行中的数据（实际上，在行的特定列中）具有不同的图标/工具提示。

`getClass`和`getTip`回调的第一个参数是`v`，在文档中描述为：

> 列的配置字段的值（如果有）。

我已经定义了我`actioncolumn`的如下，使用`dataIndex`属性指定“配置字段”：

```
 {
        xtype: "actioncolumn",
        flex: 0.25,
        dataIndex: "action_name",  // Defines which field should be passed in as v, below
        getClass: function(v, metadata, r, rowIndex, colIndex, store) {
            // v is "", yet r.get("action_name") is "Capture Fill"
        }
    }); 
```

在`getClass`回调中，我可以通过 访问 *action_name* 字段的值`r.get("action_name")`，但 v 是`""`。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T11:12:24.183

每个都可以使用[dataIndex](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.column.Action-cfg-dataIndex) cfg`Column`进行配置（对于某些列类型必须配置） 。告诉列在渲染时使用模型的哪个字段。`dataIndex`

如果您使用配置配置 ActionColumn，`dataIndex`您将能够在`getClass`和`getTip`回调中使用相应模型字段的值。

[演示](http://jsfiddle.net/molecule/vdvv8/)（请参阅控制台中的输出）。

# project - 关闭时保存 Aptana Studio 3 项目资源管理器状态

> ID：15521538
> 
> 赞同：1
> 
> 时间：2013-03-20T10:55:30.833
> 
> 标签：project, aptana, state

我确信有一个简单的选择，但我还没有找到它。每次我关闭并重新打开 Aptana Studio 3 时，它都会折叠项目浏览器中的所有文件夹，我必须重新打开它们，有没有办法让它保持打开状态并在我关闭程序时保存项目浏览器的状态？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T16:37:06.157

我找不到任何方法来保持 Project Explorer 的状态。但是，使用**App Explorer**，您打开的文件夹的状态将被保留。您也可以尝试**“导航器”**，它看起来就像项目资源管理器，但似乎保持状态。我将添加附带条件：当我重新启动 aptana 时它保持状态，但它也开发了一个 GUI 故障，它似乎向右滚动，所以我只看到我所有文件名的右半部分，我无法修复它，因此如果您遇到相同的故障，这可能不是一个好的选择。

还有一种方法不能完全按照您的要求完成，但无论如何可能对您来说是一个很好的解决方案。如果您在项目编辑器中单击**“与编辑器链接”**图片（两个黄色箭头），它将自动扩展您的项目层次结构以匹配您激活的任何打开文件。由于您的文件在您关闭 Aptana 时保持打开状态，因此即使在重新启动时，项目资源管理器也会扩展到您正在查看的任何内容。看到[这个问题](https://stackoverflow.com/questions/1651791/eclipse-project-explorer-expand-on-startup)

您还可以为隐藏在层次结构中的代码的各个部分设置**工作集，并使用 Project Explorer 来显示这些工作集而不是您的项目。**这不会保存状态，但它确实使您可以轻松访问代码中可能被深埋的公共部分。

希望其中之一对您有所帮助。

# c# - 将 WebServiceHost 转换为 WCF 服务应用程序

> ID：15521540
> 
> 赞同：1
> 
> 时间：2013-03-20T10:55:32.097
> 
> 标签：c#, wcf, web-services, webservicehost

我有一个工作控制台应用程序，其中所有地址和配置都在一个配置文件中。但是当我尝试将此代码移动到 WCF 服务应用程序时，我会遇到各种错误。

```
class Program
{
    static void Main(string[] args)
    {

        WebServiceHost host = new WebServiceHost(typeof(ImageService));
        host.Open();

        Console.WriteLine("Service up");
        Console.ReadLine();

        host.Close();
    }
} 
```

问题是 WCF 服务应用程序自动启动并且没有 main 方法，如控制台应用程序。不存在 main 方法时，如何定义 WCF 服务以启动 WebServiceHost？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:14:45.453

`ServiceBase`您必须通过从类继承来创建自己的服务。覆盖该`OnStart()`方法并在实现中打开您的 WCF 服务。覆盖该`OnStop()`方法并在实现中关闭您的 WCF 服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:45:51.150

我找到了一个非常简单的方法来解决这个问题。为了告诉 WCF 改用 web 服务，只需将其添加到 .svc 文件中

```
Factory="System.ServiceModel.Activation.WebServiceHostFactory" 
```

不知何故，我无法在 Visual Studio 中打开这个文件，所以我导航到项目文件夹并使用记事本打开它。我的服务 .svc 文件如下所示：

```
<%@ ServiceHost Language="C#" Debug="true" Service="MyNamespace.Service1" CodeBehind="Service1.svc.cs" Factory="System.ServiceModel.Activation.WebServiceHostFactory" %> 
```

# c# - 卸载包含导致 CannotUnloadAppDomainException 的 POS 硬件的子 AppDomain

> ID：15521541
> 
> 赞同：2
> 
> 时间：2013-03-20T10:55:33.010
> 
> 标签：c#, .net, appdomain

我正在使用 .net 4.0 和 POS.net 1.12，并在新的子 AppDomain 中创建了一个硬件类，这样任何未处理的异常都不会杀死我的父 AppDomain。

我可以创建子 AppDomain 并调用它没有问题。但是，如果我尝试卸载 AppDomain，则会收到异常“CannotUnloadAppDomainException”。

我已经用谷歌搜索了这个问题，当线程无法被杀死时，通常会发生异常。我实际上并没有在子类中创建任何新线程。

我设法查明导致此错误的代码。如果我创建 POS 硬件类并且它只创建 POS 对象，那么它工作正常。但是，如果我在任何硬件上调用方法“Open()”，则卸载时会发生此异常。现在在我尝试卸载之前，我关闭了所有硬件并确保清理代码被命中，所以我不确定问题是什么。

下面是创建和卸载 AppDomain 的代码：

```
AppDomain hardwareDomain = AppDomain.CreateDomain("Hardware domain");

IHardwareManager hardwareManager =
        (IHardwareManager)hardwareDomain.CreateInstanceFromAndUnwrap(typeof(OposHardwareManager).Assembly.Location,
                                                                     typeof(OposHardwareManager).FullName);

hardwareManager.StartupHardware();

hardwareManager.CloseDownHardware();
hardwareManager = null;

// **** causes exception
AppDomain.Unload(hardwareDomain); 
```

这是硬件类：

```
public class OposHardwareManager : MarshalByRefObject, IHardwareManager
{
    private PosExplorer _posExplorer;
    private PosPrinter _printer;

    public void StartupHardware()
    {
        // create the hardware explorer
        this._posExplorer = new PosExplorer();

        // create and enable the printer
        DeviceInfo printerInfo = this._posExplorer.GetDevice(DeviceType.PosPrinter);
        PosDevice printerDevice = this._posExplorer.CreateInstance(printerInfo);
        this._printer = (PosPrinter)printerDevice;

        // ***** this line here, if run, causes the exception on unload 
        this._printer.Open();
        this._printer.Claim(2000);
        this._printer.DeviceEnabled = true;
    }

    public void CloseDownHardware()
    {
        this._printer.Release();
        this._printer.Close();

        this._printer = null;
        this._posExplorer = null;
    }
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:00:16.933

如果您在创建域中引用一个类型（就像您使用 一样`typeof(OposHardwareManager)`），程序集也将加载到该域中。发生这种情况时，iow 类型“向上”越过域边界，创建的域将无法卸载。

我建议您不要引用包含的程序集，`OposHardwareManager`而只需使用完整的限定名称创建它。这可能涉及一些重构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T09:41:37.423

在[AppDomain.Unload](http://msdn.microsoft.com/en-us/library/system.appdomain.unload.aspx)的文档中指出：

> 如果线程没有中止，例如因为它正在执行非托管代码，或者因为它正在执行 finally 块，那么在一段时间后，在最初调用 Unload 的线程中会抛出一个 CannotUnloadAppDomainException。

这可能是你的情况。查看`PosDevice`有关如何正确释放资源的文档。

另请注意，由在新 AppDomain 中创建的线程引发的未处理异常将使您的整个应用程序崩溃。在[AppDomain.UnhandledException Event](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx)的文档中指出：

> 在 .NET Framework 版本 1.0 和 1.1 中，发生在主应用程序线程以外的线程中的未处理异常会被运行时捕获，因此不会导致应用程序终止。因此，可能会在应用程序终止的情况下引发 UnhandledException 事件。从 .NET Framework 2.0 版开始，删除了对子线程中未处理异常的支持，因为这种静默故障的累积影响包括性能下降、数据损坏和锁定，所有这些都难以调试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-24T09:47:01.003

不确定这会有所帮助，但我在 Win 7 和 XP 上发现了同样的错误。在应用程序退出期间，应用程序崩溃并引发错误。但故障来自报告查看器，因此在卸载表单时请确保致电

> 报告查看器.Reset();

# c# - 如何从asp.net 中的Web 用户控件调用Web 服务？

> ID：15521544
> 
> 赞同：1
> 
> 时间：2013-03-20T10:55:42.723
> 
> 标签：c#, asp.net, json, web-services, webusercontrol

我有一个网络用户控件，我想从中调用网络服务。我的主要动机是什么：

**1\. 我正在为高级搜索创建一个网络用户控件，为此我将绑定字段和按钮[编辑，删除]动态添加到网格视图。2\. 现在我正在使用 ajax 进行编辑和删除（有特定的理由采用这种方法，因为我已经提到我正在动态添加边界字段和按钮，因为首先我清除了网格的所有列然后添加新的。现在如果按钮的点击触发，那么它的回发页面，这使得按钮将从网格中消失，所以我想使用 Json）**

这是我的网格代码::

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="false" CellPadding="4"
                BorderWidth="1px" ForeColor="#333333" GridLines="None">
                <AlternatingRowStyle BackColor="White" />
                <FooterStyle BackColor="#990000" ForeColor="White" Font-Bold="True" />
                <HeaderStyle Height="30px" BackColor="#990000" Font-Bold="True" ForeColor="White" />
                <PagerStyle ForeColor="#333333" HorizontalAlign="Center" BackColor="#E2E2E2" />
                <RowStyle CssClass="test" BackColor="#E2E2E2" Height="25px" BorderWidth="1px" ForeColor="#333333" />
                <SelectedRowStyle BackColor="#E2E2E2" Font-Bold="True" ForeColor="Navy" />
                <SortedAscendingCellStyle BackColor="#FDF5AC" />
                <SortedAscendingHeaderStyle BackColor="#4D0000" />
                <SortedDescendingCellStyle BackColor="#FCF6C0" />
                <SortedDescendingHeaderStyle BackColor="#820000" />
            </asp:GridView> 
```

这是Json调用的代码

```
$('.DeleteButton').live('click', function () {
        alert('hellllo');
        $.ajax({
            url: '<%=ResolveUrl("~/Control/WebService/WebService.asmx/HelloWorld") %>',
            data: "{ }",
            dataType: "json",
            type: "POST",
            contentType: "application/json;charset=utf-8",
            success: function () {
                alert('hi;');
            },
            error: function () {
                alert('Record could not be deleted. \n Please try again later. hye');
            },
            failure: function () {
                alert('Record could not be deleted. \n Please try again later. hello');
            }
        });
    }); 
```

我总是收到以下错误：

**500 内部错误** 请帮助我摆脱这个问题，我从过去 2 天开始就被困在它上面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:03:18.417

500 内部错误 - 我可以猜测是：
不要使用

```
var html = '<%=ResolveUrl("~/Control/WebService/WebService.asmx/HelloWorld") %>'; 
```

而是使用：

```
var html= '<%=ResolveUrl("full path /Control/WebService/WebService.asmx/HelloWorld") %>'; 
```

或者

```
var html = '<%=ResolveUrl("../../Control/WebService/WebService.asmx/HelloWorld") %>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:35:52.173

如果您使用 chrome 浏览器进行调试，请执行以下操作：

1.  按 F12 打开开发人员（如果名称错误，请更正我）面板
2.  将选项卡设置为网络选项卡
3.  调用方法

如果发生内部服务器错误 500，那么您会在底部某处找到一条带有红色字体的记录。您可以使用其中所述的 URL 进行调试。那里的信息还为您提供响应信息。

此外，您可以尝试使用为 web 服务激活的 Visual Studio 调试来调试服务。然后尝试调用 Web 服务以查看它是否捕获任何异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T09:23:43.743

我已经为我解决了如下问题：

jQuery代码是：

```
$(document).ready(function () {
$('.DeleteButton').live('click', function (e) {
    var td = $(this).parent('td').parent('tr');
    if (confirm('Do you want to delete this record?')) {
        var Index = $(this).attr('id');
        var pos = Index.indexOf("_");
        var position = Index.indexOf("_");
        while (pos > -1) {
            pos = Index.indexOf("_", pos + 1);
            if (pos > -1) {
                position = pos;
            }
        }
        Index = Index.substr(position + 1);

        var Id = $(this).attr('alt');
        var TableName = $('[id$=hdfTableName]').val();
        var PrimaryKey = $('[id$=hdfPrimaryKey]').val();

        $.ajax({
            type: "POST",
            url: "Search.aspx/DeleteRecord",
            data: "{ 'Id': '" + Id + "','TableName':'" + TableName + "','PrimaryKey':'" + PrimaryKey + "' }",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (msg) {
                if (msg.d == '1') {
                    td.hide();
                    $('.lblMessage').addClass("SuccessMessage");
                    $('.lblMessage').text('Record is deleted sucessfuly.');
                    $('.lblMessage').delay('5000').fadeOut('10000');
                } else {
                    $('.lblMessage').addClass("ErrorMessage");
                    $('.lblMessage').text('There is some error, while deleting the record.');
                    $('.lblMessage').delay('5000').fadeOut('10000');
                }
            }
        });
    }
});
$('.EditButton').live('click', function (e) {
    var Id = $(this).attr('alt');
    window.location.href = 'Default.aspx?id=' + Id + '';
}); 
```

});

我已经从页面调用了 Web 方法，如下所示：

```
[WebMethod]
public static string DeleteRecord(string Id, string TableName, string PrimaryKey)
{
    String result = "";
    try
    {
        Id = "'" + Id + "'";
        clsSearch objSearch = new clsSearch();
        result = objSearch.DeleteRecord(TableName, PrimaryKey, Id);
        result = "1";
    }
    catch (Exception ex)
    {
        result = ex.Message;
    }
    return result;
} 
```

顺便谢谢你的回复......

# sql - 如何在sql server中创建依赖于其他列的默认约束

> ID：15521546
> 
> 赞同：4
> 
> 时间：2013-03-20T10:55:44.987
> 
> 标签：sql, sql-server, sql-server-2008, tsql, tsqlt

我有一张这样的桌子

选项卡1

```
create table tab1(ID int identity(1,1), Type varchar(10),IsValued bit) 
```

选项卡1：

```
ID Type IsValued
----------------
1   S   1
2   R   0
3   R   0
4   S   1
5   S   1
6   R   0
7   S   1 
```

我不想在 IsValued 列中插入值，而是在 Type ='S' 时创建一个约束（NOT TRIGGER），IsValued 应插入为 1，当 Type ='R' 时，IsValued 应插入为 0

喜欢 ：`IsValued = case when Type ='S' then 1 when Type ='R' then 0 end`

我怎样才能做到这一点..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T11:01:52.237

您需要一个计算列。例如：

```
CREATE TABLE tab1
(
 ID INT IDENTITY(1,1)
,[Type] VARCHAR(10)
,IsValued AS CASE [Type] WHEN 'S' THEN 1
                         WHEN 'R' THEN 0
             END
) 
```

您可以使用以下语法添加到现有表：

```
ALTER TABLE dbo.tab1 ADD IsValued AS CASE [Type] WHEN 'S' THEN 1
                                                 WHEN 'R' THEN 0
                                     END 
```

`PERSISTED`您可以通过在列创建后添加关键字来使列持久化。持久化该列意味着该字段存储在磁盘上。当您插入或更新记录时，SQL Server 将计算出该点的值。如果您不这样做，SQL Server 将不得不在您每次访问该行时解决它。可以在[SQL Server 2005 Computed Column Is Persisted找到一个很好的解释](https://stackoverflow.com/questions/916068/sql-server-2005-computed-column-is-persisted)

```
ALTER TABLE dbo.tab1 ADD IsValued AS CASE [Type] WHEN 'S' THEN 1
                                                 WHEN 'R' THEN 0
                                     END PERSISTED 
```

# c# - 更改 TextBox 边框颜色的最佳实践？

> ID：15521550
> 
> 赞同：5
> 
> 时间：2013-03-20T10:55:56.063
> 
> 标签：c#, wpf, user-interface, mvvm

假设您有一个带有多个这样的 Texbox 的视图

```
<TextBox Text="{Binding myText1, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}" /> 
```

每个已经包含一些文本。如果用户更改此文本，则文本框边框应更改为橙色，如果他撤消更改，则应获得默认颜色。

目前我这样做

```
<TextBox Height="23"  Text="{Binding myText1, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}" BorderThickness="2">
   <TextBox.Style>
        <Style TargetType="TextBox">
             <Style.Triggers>
                 <DataTrigger Binding="{Binding myDirtyText1, UpdateSourceTrigger=PropertyChanged}" Value="True">
                     <Setter Property="BorderBrush" Value="Orange"/>
                 </DataTrigger>
             </Style.Triggers>
        </Style>
    </TextBox.Style>
</TextBox> 
```

有没有更通用/更简单的方法来做到这一点？

**编辑**

我已经在使用`IDataErrorInfo`+`System.ComponentModel.DataAnnotations`进行错误验证。在这种情况下可能有类似的方法，但我没有发现任何有用的东西可以将我的 xaml 和代码减少到最低限度。

# 编辑 2.0

我认为您并没有真正理解我的问题，因此我将提供一个更好的示例来说明它的实际外观：

## 查看 Xaml（无代码隐藏）

```
<Grid Margin="12">
    <Label Content="Name:" Height="28" HorizontalAlignment="Left" VerticalAlignment="Top" Width="79" />
    <TextBox Height="23" HorizontalAlignment="Left" Margin="102,2,0,0" VerticalAlignment="Top" Width="170" BorderThickness="2"
             Text="{Binding NameD, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}">
        <TextBox.Style>
            <Style TargetType="TextBox">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding dirtyName, UpdateSourceTrigger=PropertyChanged}" Value="True">
                        <Setter Property="BorderBrush" Value="Orange"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </TextBox.Style>
    </TextBox>

    <Label Content="Anzeigetext:" Height="28" HorizontalAlignment="Left" Margin="0,34,0,0" VerticalAlignment="Top" Width="79" />
    <TextBox BorderThickness="2" Height="23" HorizontalAlignment="Left" Margin="102,36,0,0" VerticalAlignment="Top" Width="170" 
             Text="{Binding AnzeigetextD, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}">
        <TextBox.Style>
            <Style TargetType="TextBox">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding dirtyAnzeigetext, UpdateSourceTrigger=PropertyChanged}" Value="True">
                        <Setter Property="BorderBrush" Value="Orange"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </TextBox.Style>
    </TextBox>

    <Label Content="Preis:" Height="28" HorizontalAlignment="Left" Margin="0,68,0,0" VerticalAlignment="Top" Width="79" />
    <TextBox BorderThickness="2" Height="23" HorizontalAlignment="Left" Margin="102,70,0,0" VerticalAlignment="Top" Width="170" 
             Text="{Binding PreisD, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True, StringFormat=\{0:c\}}">
        <TextBox.Style>
            <Style TargetType="TextBox">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding dirtyPreis, UpdateSourceTrigger=PropertyChanged}" Value="True">
                        <Setter Property="BorderBrush" Value="Orange"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </TextBox.Style>
    </TextBox>

    <Button Content="Speichern" Height="23" HorizontalAlignment="Left" Margin="102,110,0,0" VerticalAlignment="Top" Width="75" Command="{Binding SaveCommand}"/>
    <Button Content="Abbrechen" Height="23" HorizontalAlignment="Left" Margin="197,110,0,0" VerticalAlignment="Top" Width="75" Command="{Binding CancelCommand}"/>
</Grid> 
```

## 视图模型

```
public class MenuangebotVM : DetailVM, IContains
{
    #region private Values
    private Menuangebot myOriginal = new Menuangebot();
    private Menuangebot myValue = new Menuangebot();
    #endregion // private Values

    #region Properties

    #region Detail Properties
    public int Id { get { return myOriginal.Id; } }
    public bool? Result { get; private set; }
    public string Beschreibung { get { return "Einrichtung"; } }

    [Required]
    [RegularExpression(@"^[0-9a-zA-ZäöüßÄÖÜß''-'\s]{2,40}$")]
    public string NameD
    {
        get { return myValue.Name; }
        set
        {
            myValue.Name = value;
            RaisePropertyChanged(() => Reg(() => NameD));
            RaisePropertyChanged(() => Reg(() => dirtyName));
        }
    }
    public bool dirtyName
    {
        get { return (!isNew && myValue.Name != myOriginal.Name) ? true : false; }
    }

    [Required]
    [RegularExpression(@"^[0-9a-zA-ZäöüßÄÖÜß''-'\s]{2,25}$")]
    public string AnzeigetextD
    {
        get { return myValue.Anzeigetext; }
        set
        {
            myValue.Anzeigetext = value;
            RaisePropertyChanged(() => Reg(() => AnzeigetextD));
            RaisePropertyChanged(() => Reg(() => dirtyAnzeigetext));
        }
    }
    public bool dirtyAnzeigetext
    {
        get { return (!isNew && myValue.Anzeigetext != myOriginal.Anzeigetext) ? true : false; }
    }

    [Required]
    public decimal PreisD
    {
        get { return myValue.Preis; }
        set
        {
            myValue.Preis = value;
            RaisePropertyChanged(() => Reg(() => PreisD));
            RaisePropertyChanged(() => Reg(() => dirtyPreis));
        }
    }
    public bool dirtyPreis
    {
        get
        {
            var value = myValue.Preis;
            var Original = myOriginal.Preis;

            return (!isNew && value != Original) ? true : false;
        }
    }

    #endregion //Detail Properties
    #endregion //Properties

// more code

} 
```

# 我预计应该是这样的

## 看法

```
<Grid Margin="12">
    <Label Content="Name:" Height="28" HorizontalAlignment="Left" VerticalAlignment="Top" Width="79" />
    <TextBox Height="23" HorizontalAlignment="Left" Margin="102,2,0,0" VerticalAlignment="Top" Width="170" BorderThickness="2"
             Text="{Binding NameD, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True, EditesOnDataChanges=true}">

    </TextBox>

    <Label Content="Anzeigetext:" Height="28" HorizontalAlignment="Left" Margin="0,34,0,0" VerticalAlignment="Top" Width="79" />
    <TextBox BorderThickness="2" Height="23" HorizontalAlignment="Left" Margin="102,36,0,0" VerticalAlignment="Top" Width="170" 
             Text="{Binding AnzeigetextD, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True, EditesOnDataChanges=true}">
    </TextBox>

    <Label Content="Preis:" Height="28" HorizontalAlignment="Left" Margin="0,68,0,0" VerticalAlignment="Top" Width="79" />
    <TextBox BorderThickness="2" Height="23" HorizontalAlignment="Left" Margin="102,70,0,0" VerticalAlignment="Top" Width="170" 
             Text="{Binding PreisD, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True, StringFormat=\{0:c\, EditesOnDataChanges=true}}">
    </TextBox>

    <Button Content="Speichern" Height="23" HorizontalAlignment="Left" Margin="102,110,0,0" VerticalAlignment="Top" Width="75" Command="{Binding SaveCommand}"/>
    <Button Content="Abbrechen" Height="23" HorizontalAlignment="Left" Margin="197,110,0,0" VerticalAlignment="Top" Width="75" Command="{Binding CancelCommand}"/>
</Grid> 
```

## 视图模型

```
public class MenuangebotVM : DetailVM, IContains
{
    #region private Values
    private Menuangebot myOriginal = new Menuangebot();
    private Menuangebot myValue = new Menuangebot();
    #endregion // private Values

    #region Properties

    #region Detail Properties
    public int Id { get { return myOriginal.Id; } }
    public bool? Result { get; private set; }
    public string Beschreibung { get { return "Einrichtung"; } }

    [Required]
    [RegularExpression(@"^[0-9a-zA-ZäöüßÄÖÜß''-'\s]{2,40}$")]
    [Default(myOriginal.Name)] //<-- added
    public string NameD
    {
        get { return myValue.Name; }
        set
        {
            myValue.Name = value;
            RaisePropertyChanged(() => Reg(() => NameD));
        }
    }

    [Required]
    [RegularExpression(@"^[0-9a-zA-ZäöüßÄÖÜß''-'\s]{2,25}$")]
    [Default(myOriginal.Anzeigetext)] //<-- added
    public string AnzeigetextD
    {
        get { return myValue.Anzeigetext; }
        set
        {
            myValue.Anzeigetext = value;
            RaisePropertyChanged(() => Reg(() => AnzeigetextD));
        }
    }

    [Required]
    [Default(myOriginal.Preis)] //<-- added
    public decimal PreisD
    {
        get { return myValue.Preis; }
        set
        {
            myValue.Preis = value;
            RaisePropertyChanged(() => Reg(() => PreisD));
        }
    }    
    #endregion //Detail Properties
    #endregion //Properties

// more code

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:43:19.967

```
public class ViewModel:INotifyPropertyChanged
    {
        private string initialText;
        public ViewModel()
        {
            Text = "ABCD";
            initialText = Text;
            DefaultBorder = true;
        }
        private string text;
        public string Text
        {
            get { return text; }
            set { text = value;
            if (value == initialText)
                DefaultBorder = true;
            else
                DefaultBorder = false;
                Notify("Text"); }
        }

        private bool defaultBorder;
        public bool DefaultBorder
        {
            get { return defaultBorder; }
            set { defaultBorder = value; Notify("DefaultBorder"); }
        }

        private void Notify(string propertyName)
        {
            if(PropertyChanged!=null)
                PropertyChanged(this,new PropertyChangedEventArgs(propertyName));
        }

        public event PropertyChangedEventHandler PropertyChanged;
    }

public class MyConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            if (value != null && value is bool && !(bool)value)
                return new SolidColorBrush(Colors.Orange);
            else
                return new SolidColorBrush(Colors.Navy); //Or default whatever you want

        }

        public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            throw new NotImplementedException();
        }
    }

    <Window.Resources>
    <local:MyConverter x:Key="MyConverter"/>
</Window.Resources>
<Grid>
    <TextBox BorderThickness="4" BorderBrush="{Binding DefaultBorder, Converter={StaticResource MyConverter}}" Text="{Binding Text, UpdateSourceTrigger=PropertyChanged}"/>
</Grid> 
```

在这里，我在 ViewModel 中有绑定到 TextBox 的属性 Text ，并且在开始时我保留了初始 Text 值。然后每当用户输入我在 Text 属性的设置器中比较它并相应地设置 Bool 属性时，这个 bool 属性将指定使用转换器绑定的颜色。忽略小问题希望你能有所了解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:43:26.197

您可以将其转换为自定义控件/UserControl 并添加 IsDirtyDependencyProperty 和 IsDirtyColorDependencyProperty（或附加的依赖项属性）。这样你就可以用这个替换所有的文本框，而不必一遍又一遍地重复代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-23T10:05:57.480

您可以为此使用附加行为

```
public static class TextChangedAttachedBehavior
{
    public static bool GetChanged(DependencyObject obj)
    {
        return (bool)obj.GetValue(ChangedProperty);
    }

    public static void SetChanged(DependencyObject obj, string value)
    {
        obj.SetValue(ChangedProperty, value);
    }

    public static readonly DependencyProperty ChangedProperty =
        DependencyProperty.RegisterAttached("Changed", typeof(bool),
        typeof(TextChangedAttachedBehavior), new PropertyMetadata(false, HookupBehavior));

    private static void HookupBehavior(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var textBox = d as TextBox;
        if (textBox == null) 
            return;
        textBox.TextChanged += TextBoxOnTextChanged;
    }

    private static void TextBoxOnTextChanged(object sender, TextChangedEventArgs args)
    {
        var textBox = sender as TextBox;
        if (textBox == null)
            return;
        textBox.BorderBrush = new SolidColorBrush(Colors.Orange);
    }
} 
```

比在 xaml 中

```
<TextBox Text="{Binding myText1, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}" TextChangedAttachedBehavior.Changed = "True" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T11:46:56.973

巧合的是，我刚刚遇到了一个与您的问题几乎相同的问题，我通过`TextBox`将`Border`. 此外，这也解决了在 Windows 8 机器上无法更改 BorderBrush 颜色的问题。

因此，我会推荐这种方法。代码非常简单，您只需将文本框添加到`Border`并更改边框的`BorderBrush`属性。

# html - 是否可以保持a的大小 当用户仅使用 css 放大时，元素是静态的吗？

> ID：15521557
> 
> 赞同：0
> 
> 时间：2013-03-20T10:56:12.143
> 
> 标签：html, css, smartphone

我在网站的移动版本上有一个导航栏，并希望它始终与屏幕一样宽，即当用户放大时，该栏不应该与页面的其余部分一起放大。

问题说明：
没有缩放 ![无缩放](../Images/f99adfba0cd686143897b56fc53d6ab6.png)

带变焦 ![带变焦](../Images/e37a79593cea9f50961c154a22e6a04c.png)

我知道使用 JavaScript 可以做到这一点，如以下方法所述：[https](https://stackoverflow.com/a/14466070/695457)
://stackoverflow.com/a/14466070/695457 但是有没有没有 JS 的方法？[如果没有，除了detect-zoom](https://github.com/yonran/detect-zoom)之外还有其他库吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T11:01:07.477

没有 JavaScript 就没有办法。老实说，我建议您保留它，因为如果在手机上，这些菜单项在第一个屏幕截图上看起来非常小。您可能会通过禁用功能让视力较差的人查看菜单文本来引入可访问性问题。

# vb6 - “多步操作产生错误。检查每个状态值。” VB6 应用程序中的错误

> ID：15521563
> 
> 赞同：0
> 
> 时间：2013-03-20T10:56:28.980
> 
> 标签：vb6, recordset

当我尝试在“描述”字段中向记录集插入一个值时。它显示一个错误，如

运行时错误“-2147217887(80040e21)”多步操作生成错误。检查每个状态值。

```
sql = "SELECT * FROM vePODetail WHERE vePOID=" & Str(ado_veReceive.Recordset("vePOID")) & " ORDER BY vePODetailID"
rs.ActiveConnection = g_cnnCompany
rs.Open sql
   Do While Not rs.EOF
    ado_veReceiveDetailWF.Recordset.AddNew
    ado_veReceiveDetailWF.Recordset("vePODetailID") = rs("vePODetailID")
    ado_veReceiveDetailWF.Recordset("prMasterID") = rs("prMasterID")
    ado_veReceiveDetailWF.Recordset("Description") = rs("Description")
    ado_veReceiveDetailWF.Recordset("QuantityReceived") = rs("QuantityOrdered") -rs("QuantityReceived")
    ado_veReceiveDetailWF.Recordset.Update
    rs.MoveNext
    Loop
    rs.Close 
```

记录集中的字段只接​​受 50 个字符。

请告诉如何增加记录集中字段的大小/长度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T13:43:02.950

如果该字段的长度为 50 个字符，则必须将 DB 对该字段的定义从 50 更改为您需要的任何值。你不能通过记录集做到这一点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-22T13:56:45.437

假设您使用的是 SQL Server，您可以使用以下`CAST`操作更改查询：

```
sql = "SELECT vePODetailID,prMasterID,CAST(Description as VARCHAR(100)) AS Description, QuantityReceived FROM vePODetail WHERE vePOID=" & Str(ado_veReceive.Recordset("vePOID")) & " ORDER BY vePODetailID" 
```

这应该将记录集中描述字段的长度设置为 100 个字符。您也可以在其他数据库平台上执行此操作，但`CAST`.

# html - jquery 对话框关闭后重置元素

> ID：15521564
> 
> 赞同：0
> 
> 时间：2013-03-20T10:56:33.890
> 
> 标签：html, jquery-ui, jquery-ui-dialog, reset

我有一个 div 元素，显示在我的页面中。在一个按钮上单击我使它成为一个对话框。关闭对话框消失。我希望将 div 重置为打开对话框之前的状态。我可以想到的一种方法是手动查找创建对话框时添加的所有样式、元素和属性，并在关闭对话框时将其删除，并将我的 div 重置为对话框之前的页面。

这个解决方案看起来有点混乱，因为任何人都可能错过添加到对话框中的某些样式或元素，并且可能不是正确的方法。

有没有更好的方法来做到这一点，或者我必须坚持这个解决方案。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:58:52.233

该插件的 'destroy' 方法完全删除了对话框功能。这将使元素**返回到它的预初始化状态**。

```
$( "#yourdiv" ).dialog( "destroy" ); 
```

# sql - 如果连接 ID 为空，则选择所有记录

> ID：15521565
> 
> 赞同：1
> 
> 时间：2013-03-20T10:56:36.527
> 
> 标签：sql, select, null

情况：

```
Table1: id, 
Table2: id, table1_id
Table3: id, table2_id
user: id, table1_id (can be null), table2_id(can be null), table3_id(can be null) 
```

表1、表2、表3形成层次结构（表1单行表2多行，表2单行表3多行）

我需要从分配给选定用户的 Table3 中选择记录。已分配表示用户记录中的 id 匹配 `(table1_id = Table1.id AND table2_id = Table2.id AND table3_id = Table3.id)` 但是，如果用户记录中的值为空，则表示为相应表中的所有记录分配了用户。

```
if table1_id = null query should return all rows
elif table2_id = null query should return all rows where (table1_id = Table1.id)
elif table3_id = null query should return all rows where (table1_id = Table1.id AND table2_id = Table2.id 
elif query should return all rows where (table1_id = Table1.id AND table2_id = Table2.id AND table3_id = Table3.id) 
```

我的提议：

```
declare @table1_id int
declare @table2_id int
declare @table3_id int

select @table1_id = table1_id, @table2_id = @table2_id, @table3_id = @table3_id 
from user where id = 5 (5 is parmeter)

select * from Table3 where
(@table1_id IS NULL OR @table1_id = 
       (select table1_id from Table2 where Table2.id = Table3.table2_id)) AND
(@table2_id IS NULL OR @table2_id = Table3.table2_id) AND
(@table3_id IS NULL OR @table3_id = Table3.id) 
```

那是很好的sql查询吗？我能做得更好吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:19:07.893

您可以将所有这些放入一个查询中：

```
select table3.*
from table3 cross join
     (select table1_id, table2_id, table3_id 
      from user
      where id = 5
     ) const
where (const.table1_id is null or const.table1_id in (select table1_id from table2 where table2.id = table3.table2_id)) and
      (const.table2_id is null or const.table2_id = table3.table2_id) and
      (const.table3_id is null or const.table3_id = table3.id) 
```

我用 替换了`=`，`in`因为您可以从子选择中获得多个返回。

还有其他方法可以表达这一点，使用显式连接。但是，它们可能会导致重复行，具体取决于表之间的关系。

# python - sqlite + python：无法更新记录

> ID：15521573
> 
> 赞同：1
> 
> 时间：2013-03-20T10:57:00.413
> 
> 标签：python, sqlite

我将 sqlite3 与 python 一起使用。我可以通过命令行 CRUD 表。

我还可以通过 python 成功选择、插入和删除（！）记录。但是，当我（在相同的连接上下文中）尝试更新时，出现异常：“无法打开数据库文件”。

我很困惑，有什么想法吗？

PS：如果有任何相关性，这些表是通过 Django 的 manage.py syncdb 创建的。PPS：我通过 CGI 运行代码（授予文件的所有权限，这就是为什么我也可以添加到数据库中）

抱歉错过了代码：

```
sDb = 'this\is\my\db'
conn = sqlite3.connect( sDb )
cursor = conn.cursor()

# below works:
sSql = "insert into app_filestamp ( file_id, sFileStamp ) values ( 12, 'YYYYY' )"
# below raises the error
sSql = "update app_filestamp set sFileStamp='XXXXX' where id=13"
cursor.execute( sSql )

conn.commit()
conn.close() 
```

**“解决方案”**

这种尴尬的行为（插入有效，更新无效）只发生在 Windows 环境中。感谢您的输入; 因为这显然不是已知问题，所以我重新考虑了我的方法并摆脱了对 CGI 的需求。请容忍我，我没有进一步调查这个问题。

# sql - 在 SQL 中选择（发明值）

> ID：15521576
> 
> 赞同：0
> 
> 时间：2013-03-20T10:57:08.243
> 
> 标签：sql, sql-server, reporting-services, grouping

我正在尝试建立一个单列表，以后可以用于分组，想法如下：

```
select         ('Value1' , 'Value2') as ColumnName 
```

我应该有一些看起来像一列的表，但在我的数据仓库中并不存在，

```
 |ColumnName|
 |Value1    |
 |Value2    |
etc. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:00:11.800

使用[表值构造函数](http://msdn.microsoft.com/en-us/library/dd776382.aspx)：

```
select *
from (values ('Value 1'), ('Value 2')) as T(ColumnName); 
```

请参阅[sqlfiddle](http://sqlfiddle.com/#!3/d41d8/11288)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:59:39.550

尝试联合：

```
SELECT 'Value1' as ColumnName
UNION
SELECT 'Value2' as ColumnName 
```

# android - 复选框 setOnclicListner 导致 android 崩溃

> ID：15521578
> 
> 赞同：-1
> 
> 时间：2013-03-20T10:57:09.100
> 
> 标签：android, checkbox

我正在实现一个应用程序，在我的应用程序中我试图显示一个弹出窗口。每当点击菜单项时，我都会显示一个带有标题和复选框的弹出窗口。在我的代码中，我试图将 setonclick 侦听器设置为 Checkbox，不幸的是，这是导致应用程序崩溃的原因。

以下是我的代码。

**在 xml 中：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="wrap_content"
android:id="@+id/popup"
android:layout_height="wrap_content"
android:background="@drawable/music_bg"
android:orientation="vertical" >
<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >
    <TextView android:id="@+id/txtTopTitleForSetInfoInput" android:text="Voice Coaching"
        android:layout_width="fill_parent" android:layout_height="wrap_content"
        android:textColor="#FFFFFF" android:textSize="21sp" android:gravity="center"
        android:textStyle="bold" android:layout_centerVertical="true" />

    <Button android:id="@+id/btnCloseControl" 
        android:background="@drawable/music_close"
        android:layout_width="40dip" android:layout_height="40dip"
        android:layout_alignParentRight="true" android:layout_centerVertical="true"
         />
</RelativeLayout>
<RelativeLayout
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_marginTop="10dip" >
        <TextView
        android:id="@+id/txtVoiceCoaching"
        android:layout_width="200dip"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/cbVoiceCoachingOn"
        android:layout_alignParentLeft="true"
        android:layout_alignTop="@+id/cbVoiceCoachingOn"
        android:gravity="center"
        android:text="Voice Coaching"
        android:textColor="#FFFFFF"
        android:textSize="21sp"
        android:textStyle="bold" />
        <CheckBox
            android:id="@+id/cbVoiceCoachingOn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@+id/txtVoiceCoaching" />
</RelativeLayout> 
```

**在选择的菜单项上输入代码：**

```
 @Override
 public boolean onMenuItemSelected(int featureId, MenuItem item) 
 {
    super.onMenuItemSelected(featureId, item);

            int[] location = new int[2];

            ll.getLocationOnScreen(location);

                int popupWidth = 300;
               int popupHeight = 160;

               Point p = new Point();
               p.x = location[0];
               p.y = location[1];

               // Inflate the popup_layout.xml
               LinearLayout viewGroup = (LinearLayout) this.findViewById(R.id.popup);
               LayoutInflater layoutInflater = (LayoutInflater) this
                 .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
               View layout = layoutInflater.inflate(R.layout.volume_pop_layout, viewGroup);

               // Creating the PopupWindow
               final PopupWindow popup = new PopupWindow(this);
               popup.setContentView(layout);
               popup.setWidth(popupWidth);
               popup.setHeight(popupHeight);
               popup.setFocusable(true);

               // Some offset to align the popup a bit to the right, and a bit down, relative to button's position.
               int OFFSET_X = 10;
               int OFFSET_Y = -40;

               // Clear the default translucent background
               popup.setBackgroundDrawable(new BitmapDrawable());

               // Displaying the popup at the specified location, + offsets.
               popup.showAtLocation(layout, Gravity.NO_GRAVITY, p.x + OFFSET_X, p.y + OFFSET_Y);

               Button close = (Button) layout.findViewById(R.id.btnCloseControl);
               close.setOnClickListener(new OnClickListener() {

                 @Override
                 public void onClick(View v) {
                   popup.dismiss();
                 }
               });

               CheckBox cbVoiceCoahcingOn = (CheckBox) findViewById(R.id.cbVoiceCoachingOn);
               if(cbVoiceCoahcingOn==null)
               {
                   System.out.println("cbVoiceCoahcingOn==null");
               }

               cbVoiceCoahcingOn.setOnClickListener(new OnClickListener() {

                     @Override
                     public void onClick(View v) {
                       System.out.println("onclick");
                     }
                   });

    return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:04:45.723

你在这里犯了一个错误：

```
CheckBox cbVoiceCoahcingOn = (CheckBox) findViewById(R.id.cbVoiceCoachingOn); 
```

**错误：**您试图从主要 XML 布局中找到 View，而不是从 Dialog 的膨胀布局中找到它。

## 正确的：

```
CheckBox cbVoiceCoahcingOn = (CheckBox) layout.findViewById(R.id.cbVoiceCoachingOn); 
```

# ruby - ruby kubuntu 中的超级用户问题

> ID：15521580
> 
> 赞同：0
> 
> 时间：2013-03-20T10:57:10.230
> 
> 标签：ruby, eclipse, root, kubuntu

我已经用 sudo 安装了 ruby​​ 和 gems，

每当我运行脚本时，我都必须使用 sudo 执行，否则我会收到此错误：

```
/usr/local/rvm/rubies/ruby-1.9.3-p385/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- watir-webdriver (LoadError)
from /usr/local/rvm/rubies/ruby-1.9.3-p385/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'from Login.rb:1:in `<main>' 
```

我打算使用 eclipse IDE，所以——如果我在 eclipse 中运行脚本——我会遇到同样的问题

有人可以帮助我在 Eclipse 中以超级用户身份运行 ruby​​ 脚本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:48:58.373

您可以更改所需 gem 的访问权限。

`sudo chmod 644 filename`

要了解完整路径：

`gem which gemname`

# c# - ConcurrentBag 的正确用法是什么？

> ID：15521584
> 
> 赞同：62
> 
> 时间：2013-03-20T10:57:16.373
> 
> 标签：c#, multithreading, concurrency

我已经在这里阅读了以前的问题，`ConcurrentBag`但没有找到多线程实现的实际示例。

> ConcurrentBag 是一个线程安全的包实现，针对同一线程将同时生产和使用包中存储的数据的场景进行了优化。”

目前这是我的代码中的当前用法（这是简化的不是实际代码）：

```
private void MyMethod()
{
    List<Product> products = GetAllProducts(); // Get list of products
    ConcurrentBag<Product> myBag = new ConcurrentBag<Product>();

    //products were simply added here in the ConcurrentBag to simplify the code
    //actual code process each product before adding in the bag
    Parallel.ForEach(
                products,
                new ParallelOptions { MaxDegreeOfParallelism = Environment.ProcessorCount },
                product => myBag.Add(product));

    ProcessBag(myBag); // method to process each items in the concurrentbag
} 
```

我的问题：
这是正确的用法`ConcurrentBag`吗？`ConcurrentBag`这种场景可以用吗？

对我来说，我认为一个简单`List<Product>`的手动锁会做得更好。原因是上面的场景已经打破了“**同一个线程将同时生产和消费存储在包中的数据**”的规则。
另外我还发现，`ThreadLocal`在并行的每个线程中创建的存储在操作后仍然存在（即使线程被重用是这样的吗？）这可能会导致不希望的内存泄漏。
我在这个人中是对的吗？或者一个简单的清除或清空方法来删除项目`ConcurrentBag`就足够了？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-20T15:58:00.107

这看起来可以很好地使用 ConcurrentBag。线程局部变量是包的成员，并且将在包的同时成为垃圾收集的条件（清除内容不会释放它们）。你是对的，一个带锁的简单列表就足够了。如果您在循环中所做的工作非常重要，那么线程同步的类型对整体性能不会有太大影响。在这种情况下，您可能更愿意使用您熟悉的内容。

另一种选择是使用[ParallelEnumerable.Select](http://msdn.microsoft.com/en-us/library/dd383966.aspx)，它与您尝试更紧密地匹配。同样，您将看到的任何性能差异都可能可以忽略不计，坚持您所知道的并没有错。

与往常一样，如果它的性能很关键，那么没有什么可以替代尝试和测量。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-10-27T19:01:27.707

在我看来，bmm6o 是不正确的。该`ConcurrentBag`实例在内部包含用于向其中添加项目的每个线程的迷你包，因此项目插入不涉及任何线程锁，因此所有`Environment.ProcessorCount`线程都可以全面展开而不会被卡住等待并且没有任何线程上下文切换。迭代收集的项目时可能需要线程同步，但在原始示例中，迭代是在所有插入完成后由单个线程完成的。此外，如果`ConcurrentBag`使用 Interlocked 技术作为线程同步的第一层，则可能根本不涉及 Monitor 操作。

另一方面，使用普通`List<T>`实例并使用 lock 关键字包装其每个 Add() 方法调用会大大损害性能。首先，由于每个都需要深入内核模式并使用 Windows 同步原语的常量`Monitor.Enter()`和调用。`Monitor.Exit()`其次，有时一个线程可能会被第二个线程阻塞，因为第二个线程还没有完成它的添加。

`ConcurrentBag`对我来说，上面的代码是正确使用类的一个很好的例子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-22T06:00:08.723

如果`List<T>`与锁定`Add()`方法一起使用，它将使线程等待并降低使用的性能增益`Parallel.ForEach()`

# scheme - 用列表删除列表

> ID：15521586
> 
> 赞同：1
> 
> 时间：2013-03-20T10:57:22.723
> 
> 标签：scheme, racket

我了解当有列表和变量时如何删除元素，但是有没有办法使用另一个列表从列表中删除元素？示例： (list 1 2 3 4 5)(list 1 2 3) 产生 (list 4 5)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:06:04.973

在 Racket 中，这非常简单，只需使用[`remove*`](http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28lib._racket/private/list..rkt%29._remove%2a%29%29)内置程序：

```
(remove* (list 1 2 3) (list 1 2 3 4 5))
=> '(4 5) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T19:16:04.733

和变量一样，但是需要使用成员函数而不是equal？：

```
#lang racket
; remove every element included in rlist from flist
(define (remove-list rlist flist)
  (if (empty? flist)
      '()
      (let ((c (car flist)))
        (if (member c rlist) ; <====
            (remove-list rlist (cdr flist))
            (cons c (remove-list rlist (cdr flist)))))))

(remove-list (list 1 2 3) (list 1 2 3 4 5))
=> '(4 5) 
```

# iphone - 当应用程序为 applicationDidEnterBackground 时，GData YouTube 在后台上传

> ID：15521591
> 
> 赞同：0
> 
> 时间：2013-03-20T10:57:36.817
> 
> 标签：iphone, ios, objective-c, xcode, youtube

我在我的应用程序中使用 GData 并将电影上传到 youtube。我的问题是当应用程序进入背景（按下主页按钮）时如何上传视频。我不知道它是否相关，但我 setShouldFetchInBackground = YES。谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T11:11:59.277

尝试使用 BackgroundTaskIdentifier

.h // 后台线程

UIBackgroundTaskIdentifier btIdentifier;

.m // 在开始你的上传请求之前 //Background Thread - Start (for uploading)

```
if([[UIDevice currentDevice] isMultitaskingSupported])
{

    btIdentifier = [[UIApplication sharedApplication]beginBackgroundTaskWithExpirationHandler:^{
    [[UIApplication sharedApplication]endBackgroundTask:btIdentifier];
    }];
} 
```

上传完成后，//后台线程停止

```
if([[UIDevice currentDevice] isMultitaskingSupported])
{

    [[UIApplication sharedApplication] endBackgroundTask:btIdentifier];
    btIdentifier = UIBackgroundTaskInvalid;
} 
```

这将允许您在应用程序进入后台时继续上传数据。希望能帮助到你。

# java - 地理编码器初始化失败

> ID：15521592
> 
> 赞同：0
> 
> 时间：2013-03-20T10:57:38.203
> 
> 标签：java, android, geolocation

尝试在我的应用程序中声明地理编码器时出现 NullPointerException。我有以下声明：

```
public class MainActivity extends Activity {

private Geocoder geocoder = new Geocoder(this, Locale.getDefault());

    ...
 } 
```

我得到以下 LogCat ：

```
03-20 10:48:55.729: D/AndroidRuntime(604): Shutting down VM
03-20 10:48:55.729: W/dalvikvm(604): threadid=1: thread exiting with uncaught exception 

(group=0x40a71930)
03-20 10:48:56.209: E/AndroidRuntime(604): FATAL EXCEPTION: main
03-20 10:48:56.209: E/AndroidRuntime(604): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.coord/com.example.coord.MainActivity}: java.lang.NullPointerException
03-20 10:48:56.209: E/AndroidRuntime(604):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2106)
03-20 10:48:56.209: E/AndroidRuntime(604):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-20 10:48:56.209: E/AndroidRuntime(604):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-20 10:48:56.209: E/AndroidRuntime(604):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-20 10:48:56.209: E/AndroidRuntime(604):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-20 10:48:56.209: E/AndroidRuntime(604):  at android.os.Looper.loop(Looper.java:137)
03-20 10:48:56.209: E/AndroidRuntime(604):  at android.app.ActivityThread.main(ActivityThread.java:5041)
03-20 10:48:56.209: E/AndroidRuntime(604):  at java.lang.reflect.Method.invokeNative(Native Method)
03-20 10:48:56.209: E/AndroidRuntime(604):  at java.lang.reflect.Method.invoke(Method.java:511)
03-20 10:48:56.209: E/AndroidRuntime(604):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-20 10:48:56.209: E/AndroidRuntime(604):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-20 10:48:56.209: E/AndroidRuntime(604):  at dalvik.system.NativeStart.main(Native Method)
03-20 10:48:56.209: E/AndroidRuntime(604): Caused by: java.lang.NullPointerException
03-20 10:48:56.209: E/AndroidRuntime(604):  at android.content.ContextWrapper.getApplicationContext(ContextWrapper.java:109)
03-20 10:48:56.209: E/AndroidRuntime(604):  at com.example.coord.MainActivity.<init>(MainActivity.java:21)
03-20 10:48:56.209: E/AndroidRuntime(604):  at java.lang.Class.newInstanceImpl(Native Method)
03-20 10:48:56.209: E/AndroidRuntime(604):  at java.lang.Class.newInstance(Class.java:1319)
03-20 10:48:56.209: E/AndroidRuntime(604):  at android.app.Instrumentation.newActivity(Instrumentation.java:1054)
03-20 10:48:56.209: E/AndroidRuntime(604):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097) 
```

第 21 行是我的 Geocoder 声明。我的代码有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T11:48:35.667

上下文仅在活动启动时可用，因此您无法在类主体中初始化地理编码器。尝试在 onCreate 或 onResume 方法中初始化它...

```
public class MainActivity extends Activity {
  private Geocoder mGeocoder;

  @Override
  protected void onCreate(Bundle _icicle) {
    super.onCreate(_icicle);
    mGeocoder = new Geocoder(getApplicationContext(), Locale.getDefault());
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T11:04:00.803

将此权限添加到清单

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /> 
```

并使用 `getApplicationContext(`) insted of`this`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-30T09:27:34.430

建议在后台或谷歌开发者页面定义的单独线程上使用 GeoCode。

```
new Thread(new Runnable() 
                    {
                        @Override
                        public void run() 
                        {
                            //Do things.
                            Geocoder geocoder = new Geocoder(getBaseContext());

                            try {
                                // Getting a maximum of 5 Address that matches the input text
                                addresses = geocoder.getFromLocationName(addressText,5);

                            } catch (IOException e) {
                                e.printStackTrace();
                            }

                        }

                    }).start(); 
```

# jquery - 重复之前的Jquery随机幻灯片循环

> ID：15521596
> 
> 赞同：0
> 
> 时间：2013-03-20T10:57:48.310
> 
> 标签：jquery, random, slideshow

我有以下幻灯片，当您单击按钮时会随机显示一张幻灯片。但是我希望它在重复之前显示所有幻灯片，例如： 3,1,2,4,5 2,1,4,5,3 - 用户在重复之前看到所有幻灯片，而不是现在发生的事情：2,3,4,2,1,2,4,5 用户在看到幻灯片 5 之前已经看过幻灯片 2 三次。我想也许使用数组可以做到这一点，但我不确定如何来实现这一点。任何帮助深表感谢！

```
var slides = $('div.slide');
var rand = Math.floor(Math.random() * slides.length);
slides.eq(rand).addClass('active');

$("a.btn").click(function(event){
    event.preventDefault();
    var $active = $('#sliderInner div.slide.active');

    var $sibs  = $active.siblings();
    var rndNum = Math.floor(Math.random() * $sibs.length );
    var $next  = $( $sibs[ rndNum ] );

    $next.css('z-index',2);//move the next image up the pile
    $active.fadeOut(400,function(){//fade out the top image
        $active.css('z-index',1).show().removeClass('active');//reset the z-index and unhide the image
        $next.css('z-index',3).addClass('active');//make the next image the top one
    });
}); 
```

我也试过这个，但它做同样的事情：

```
var slides = $('div.slide');
var rand = Math.floor(Math.random() * slides.length);
slides.eq(rand).addClass('active');

$("a.btn").click(function(event){
    event.preventDefault();

    var grp = $("#sliderInner").children();

    Array.prototype.sort.call(grp, function() {
        return Math.round(Math.random())-0.5;
    });

    $('#sliderInner').empty().append(grp);

    var $active = $('#sliderInner div.slide.active');

    var $next = ($active.next().length > 0) ? $active.next() : $('#sliderInner div:first');
    $next.css('z-index',2);//move the next image up the pile
    $active.fadeOut(400,function(){//fade out the top image
        $active.css('z-index',1).show().removeClass('active');//reset the z-index and unhide the image
        $next.css('z-index',3).addClass('active');//make the next image the top one
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:35:59.920

没关系，我找到了一个解决方案，也许不是最优雅的，但它确实有效。如果它对将来的任何人有用：

```
var slides = $('div.slide');
var rand = Math.floor(Math.random() * slides.length);
slides.eq(rand).addClass('active');

$("a.btn").click(function(event){
    event.preventDefault();
    var $active = $('#sliderInner div.slide.active');

    var $sibs  = $active.siblings().not('.used');
    var rndNum = Math.floor(Math.random() * $sibs.length );
    var $next  = $( $sibs[ rndNum ] );

    $next.css('z-index',2);//move the next image up the pile
    $active.fadeOut(400,function(){//fade out the top image
        $active.css('z-index',1).show().removeClass('active').addClass('used');//reset the z-index and unhide the image
        $next.css('z-index',3).addClass('active');//make the next image the top one
    });

    if ($active.siblings().length-1 == $(".used").length) {
        $('.slide').removeClass('used');
        $active.fadeOut(400,function(){//fade out the top image
            $active.css('z-index',1).show().removeClass('active').removeClass('used');
        });
        }

}); 
```

# java - 在java中使用ObjectMapper进行Jackson序列化

> ID：15521601
> 
> 赞同：15
> 
> 时间：2013-03-20T10:57:55.493
> 
> 标签：java, jackson

我想通过使用对象映射器来序列化不同类型的列表，但我不知道如何一次将不同类型的列表对象传递给对象映射器。以下是我的代码：

```
AccountingService accService      = ServiceFactory.getAccountingService();
List<TaxCategory> taxCategoryList = accService.getAllTaxCategories();
ProductService productService     = ServiceFactory.getProductService();
List<SimpleUom> simpleUomList     = productService.getSimpleUomsList();

ObjectMapper objMapper;
objMapper.writeValueAsString(?)-- 
```

请你建议我必须通过什么而不是？在上面的代码中。这是因为我必须获取包含上述列表的杰克逊序列化字符串作为 jsp 中的单个字符串，并解析该字符串以获取要在客户端使用的单个列表。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-20T11:00:55.093

只需尝试：

```
ObjectMapper objMapper = new ObjectMapper();
String jsonString = objMapper.writeValueAsString(simpleUomList); 
```

* * *

**根据评论编辑：**

您需要创建一个包含两个列表的类，然后编写它：

```
public class MyLists {
    private List<TaxCategory> taxCategoryList;
    private List<SimpleUom> simpleUomList;
    // + constructor, getters and setters
}

ObjectMapper objMapper = new ObjectMapper();
MyLists myLists = new MyLists(taxCategoryList, simpleUomList);
String jsonString = objMapper.writeValueAsString(myLists); 
```

# c# - 将 SelectedIndex 绑定到不同的集合，然后是 itemsSource 的集合

> ID：15521609
> 
> 赞同：1
> 
> 时间：2013-03-20T10:58:20.460
> 
> 标签：c#, listview, combobox, mvvm-light, winrt-xaml

您好我正在开发一个带有 MVVM-light 的 WinRT 应用程序。我想做的是用物品填充组合框，例如 4 种水果。我的 SelectedItem 应该是组合框绑定的第一种水果。这可行，但下一步是我要更改 selectedIndex 。例如，当第一种水果售罄时，SelectedIndex 应自动更改为 Collection Of my Combobox 中的第二项。

因此，如果您想购买 10 个水果，您将在屏幕上获得 10 个组合框，您可以在其中选择水果的种类，当您在其中选择了 4 个苹果并且不再有苹果时，则其他组合框应更改为第二种水果。

我知道这是一个令人困惑的问题。

**基本上**我需要的是能够将我的 Selectedindex 绑定到集合中与我的组合框的集合不同的属性。我会给你一些xaml，希望能解释更多：

```
 </ListView>
   <ListView.ItemTemplate>
      <DataTemplate>
          <StackPanel IsHitTestVisible="{Binding HitTest}"  Orientation="Horizontal">
               <TextBlock Text="{Binding Day, Converter={StaticResource StringFormatConverter}, ConverterParameter='{}{0:dd MMM yyyy}' }"></TextBlock>
               <ComboBox Width="196"  ItemsSource="{Binding Path=FruitKind.FruitList, Source={StaticResource Locator}}" SelectedIndex="{Binding Path=FruitKind.FruitComboBoxItem, Source={StaticResource Locator}, ElementName={Binding Path=FruitIndex}}">
                  <ComboBox.ItemTemplate>
                     <DataTemplate>
                        <TextBlock Text="{Binding FruitKind}"/>
                     </DataTemplate>
                  </ComboBox.ItemTemplate>
              </ComboBox>
          </StackPanel>
     </DataTemplate>
   </ListView.ItemTemplate>
 </ListView> 
```

顺便说一句，我不确定这是否可能。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T02:50:09.823

绑定到所选项目而不是索引。这允许您使用视图模型的对象/属性，您可以按照您想要的任何方式进行修改：

IE：

```
<ComboBox Width="196"  ItemsSource="{Binding Path=FruitKind.FruitList, Source={StaticResource Locator}}" SelectedItem="{Binding Path=FruitKind.FruitObject, Source={StaticResource Locator}, ElementName={Binding Path=FruitIndex}}"> 
```

# iphone - 如何以横向而不是纵向显示 UIImagePickerControllerSourceTypeCamera

> ID：15521614
> 
> 赞同：0
> 
> 时间：2013-03-20T10:58:30.340
> 
> 标签：iphone, ios, objective-c, uiimagepickercontroller, uiinterfaceorientation

我正在开发 iPad 应用程序，当我们单击右栏按钮时，我正在执行如下操作：

```
 -(IBAction)camerabuttonAction:(id)sender
{
UIImagePickerController *picker = [[UIImagePickerController alloc] init];
   picker.sourceType = UIImagePickerControllerSourceTypeCamera;
    picker.delegate = self;

    self.popoverController = [[UIPopoverController alloc] initWithContentViewController:picker];
   [self.popoverController presentPopoverFromRect:CGRectMake(50, -250, 500, 300) inView:appDelegate.splitview.view permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];
} 
```

我的问题是，当我处于景观模式时，如果我单击按钮。相机以纵向模式显示（图像以反向模式显示）。但是，如果我摇动 iPad，它就会显示在 LandScape 中。

对于 ios6 中的方向，我使用以下方法，但我没有写任何与 UIImagePickerControllerSourceTypeCamera 相关的内容

```
 - (void)viewWillLayoutSubviews
{
if([self interfaceOrientation] == UIInterfaceOrientationPortrait||[self interfaceOrientation] ==UIInterfaceOrientationPortraitUpsideDown)
    {
}
    else if ([self interfaceOrientation] == UIInterfaceOrientationLandscapeLeft||[self interfaceOrientation] == UIInterfaceOrientationLandscapeRight)
    {
}

}

    -(NSUInteger)supportedInterfaceOrientations
{

    return UIInterfaceOrientationLandscapeLeft | UIInterfaceOrientationPortrait;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T11:06:38.070

你不应该这样做。苹果文档摘录：

> **重要提示**： UIImagePickerController 类仅支持纵向模式。此类旨在按原样使用，不支持子类化。此类的视图层次结构是私有的，不得修改，但有一个例外。您可以将自定义视图分配给 cameraOverlayView 属性，并使用该视图来呈现附加信息或管理相机界面和代码之间的交互。

它在这里：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html)

# android - Phonegap : 为更小的屏幕缩放 HTML5 画布

> ID：15521625
> 
> 赞同：3
> 
> 时间：2013-03-20T10:58:55.113
> 
> 标签：android, html, cordova, canvas, fabricjs

这是一个使用 HTML5 画布（最好使用 fabricjs）的 Phonegap android 应用程序。所需的功能之一是它可以从画廊加载图像/从相机拍照并在一些预设编辑后保存图像。从相机拍摄的输入图像/图像的大小可能因设备而异，但输出图像需要始终为固定大小（在这种情况下为 900x450）。该应用程序应该支持具有更小和更大屏幕的设备。我可以将图像加载到预设大小的画布并导出数据 url（编辑后）。但是如何在较小的屏幕上使用它呢？我可以显示一个较小的按比例缩小的画布并在那里进行操作并在所需大小的隐藏画布上执行实际操作，但这会非常混乱。有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T11:04:06.357

通过 CSS 设置它的宽度/高度来“缩放”你的画布元素怎么样？

这不应影响画布元素的*实际*像素大小。

# python - python中的优雅列表操作

> ID：15521631
> 
> 赞同：0
> 
> 时间：2013-03-20T10:59:29.057
> 
> 标签：python, list

在 python 中，执行以下操作的最首选（pythonic）方法是什么：

> 给你一个清单。如果列表不为空，则列表中的所有项目都保证是字符串。列表中的每个项目要么是空字符串，要么在项目上调用时`True`保证返回。`isdigit()`

从这样一个列表开始，最终得到一个列表的最优雅的方法是什么，它包含原始列表中的所有项目，除了空字符串？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T11:00:18.153

`filter()`与默认标识函数 ( ) 一起使用`None`：

```
newlist = filter(None, origlist) 
```

或者，列表理解：

```
newlist = [el for el in origlist if el] 
```

# android - 为什么google在android camera中选择C/S架构？

> ID：15521636
> 
> 赞同：0
> 
> 时间：2013-03-20T10:59:48.853
> 
> 标签：android, camera, android-binder

众所周知，android camera是C/S架构，包括客户端和服务。它们通过 Binder 相互通信。他们在不同的进程中运行。

所以我有一个问题：为什么android相机有客户端和服务？有什么好处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:37:19.947

可能他们选择了 C/S 架构，因为它更适合向听众发送通知，例如 Dropbox 和 Google+ 应用程序正在监听照片事件以将新照片上传到云端。此外，您也可以为您的应用订阅相同的事件（使用[`ACTION_IMAGE_CAPTURE`](http://developer.android.com/reference/android/provider/MediaStore.html#ACTION_IMAGE_CAPTURE)）。因此，他们不会关注 DCIM 文件夹中的变化，而是订阅系统事件。

仅使用客户端架构，照片应用程序将实现所有发送[`camera events`](http://developer.android.com/reference/android/provider/MediaStore.html) 以提供与其他应用程序的兼容性。

但这只是我的意见:)

# symfony - Symfony2 mapping_types

> ID：15521638
> 
> 赞同：2
> 
> 时间：2013-03-20T11:00:03.667
> 
> 标签：symfony

我正在使用 Symfony2.0 并在 config.yml 中添加 mapping_types

```
教义：
        分贝：
            默认连接：默认
            连接：
                默认：
                    驱动程序：pdo_mysql
                    主机：本地主机
                    数据库名称：work_contactbee
                    用户：devuser
                    密码：devuser
                    映射类型：
                        枚举：字符串

```

但是当我尝试更新架构时：**php app/console dictionary:schema:update** 我得到一个**例外 *Unrecognized options "mapping_types" under "doctrine.dbal.connections.default***

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-22T16:54:37.217

对于任何仍在寻找的人。`connections`我通过删除and`default_connections`部分解决了我的情况。

所以：

```
doctrine:
    dbal:
        driver:   pdo_mysql
        host:     localhost
        dbname:   work_contactbee
        user:     devuser
        password: devuser
        mapping_types:
            enum: string 
```

要么文档是错误的，要么（更有可能）我误解了它们。我不确定为什么您的示例不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:19:43.833

您使用的是哪个版本的 Symfony？从 2.1 开始，mapping_types 被定义为 mapping_types 数组，因此如果您使用的是最新版本 (2.2)，则 enum: string 不再有效。查看最新版本的完整配置选项列表：http: [//symfony.com/doc/current/reference/configuration/doctrine.html](http://symfony.com/doc/current/reference/configuration/doctrine.html)

# android - Maven + AndroidAnnotations 生成但不可访问的类

> ID：15521639
> 
> 赞同：4
> 
> 时间：2013-03-20T11:00:06.140
> 
> 标签：android, maven, android-annotations

好吧。

我正在尝试创建一个可以通过使用 maven 和仅使用 maven 完美构建的项目。

目前我正面临这个生成类的问题，并且工作正常，只要在实际的 java 代码中没有引用。

意思是，如果我在[文档](https://github.com/excilys/androidannotations/blob/develop/examples/maveneclipse/src/main/java/com/googlecode/androidannotations/maveneclipse/HelloAndroidActivity.java "文件 AA")中创建一个示例，它就可以工作。

一旦我做类似的事情

> 意图 i = new Intent(SettingsActivity_);

然后构建失败

> 无法在项目上执行目标 org.apache.maven.plugins:maven-compiler-plugin:3.0:compile (default-compile) InterestingFind: 编译失败找不到符号

```
cannot find symbol
symbol:   variable DerpActivity_
location: class be.company.android.DisplayMapActivity 
```

然而，文件确实会生成，正如您在所附图像中看到的那样，但是当在 Eclipse 视图中查看项目时，它们仅被视为普通文件夹，而不是“源文件夹”。

这也许可以解释为什么他们没有被捡起，但让我有点头疼。我克隆了一个 android 原型，即发布版本。

如果您以某种方式认为您可以帮助我解决这个问题，请提供帮助！![项目结构](../Images/1e1006ee3b240ae6ec39325500fefcb7.png)

> http://maven.apache.org/maven-v4_0_0.xsd">4.0.0

```
<parent>
    <groupId>be.idamediafoundry</groupId>
    <artifactId>InterestingFind-parent</artifactId>
    <version>1.0-SNAPSHOT</version>
</parent>

<groupId>be.idamediafoundry</groupId>
<artifactId>InterestingFind</artifactId>
<version>1.0-SNAPSHOT</version>
<packaging>apk</packaging>
<name>InterestingFind - Application</name>
<properties>
    <androidannotations.version>3.0-SNAPSHOT</androidannotations.version>
</properties>

<repositories>
    <repository>
        <id>snapshots-repository</id>
        <name>Sonatype oss snapshot repo</name>
        <url>https://oss.sonatype.org/content/repositories/snapshots</url>
    </repository>
</repositories>
<dependencies>
    <dependency>
        <groupId>com.google.android</groupId>
        <artifactId>android</artifactId>
    </dependency>
    <dependency>
        <groupId>de.akquinet.android.androlog</groupId>
        <artifactId>androlog</artifactId>
    </dependency>
    <!-- JSON -->
    <dependency>
        <groupId> org.codehaus.jackson</groupId>
        <artifactId>jackson-mapper-asl</artifactId>
        <version>1.9.5</version>
    </dependency>
    <!-- AndroidAnnotations -->
    <dependency>
        <groupId>org.androidannotations</groupId>
        <artifactId>androidannotations</artifactId>
        <version>${androidannotations.version}</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>org.androidannotations</groupId>
        <artifactId>androidannotations-api</artifactId>
        <version>${androidannotations.version}</version>
    </dependency>

    <!-- Needed for androidannotations -->
    <dependency>
        <groupId>org.springframework.android</groupId>
        <artifactId>spring-android-rest-template</artifactId>
        <version>${spring-android-version}</version>
    </dependency>

    <!-- Google Play Services : Should be compiled and added to local repo -->
    <dependency>
        <groupId>com.google.android.gms</groupId>
        <artifactId>google-play-services</artifactId>
        <version>5</version>
        <type>apklib</type>
    </dependency>
</dependencies>

<build>
    <plugins>

        <plugin>
        <groupId>com.jayway.maven.plugins.android.generation2</groupId>
        <artifactId>android-maven-plugin</artifactId>
        <version>3.5.1</version>
        <inherited>true</inherited>
        <extensions>true</extensions>
        <configuration>
            <androidManifestFile>${project.basedir}/AndroidManifest.xml</androidManifestFile>
            <assetsDirectory>${project.basedir}/assets</assetsDirectory>
            <resourceDirectory>${project.basedir}/res</resourceDirectory>
            <nativeLibrariesDirectory>${project.basedir}/src/main/native</nativeLibrariesDirectory>
            <sdk>
                <platform>15</platform>
            </sdk>
            <undeployBeforeDeploy>true</undeployBeforeDeploy>
        </configuration>
    </plugin>

        <plugin>
            <artifactId>versions-maven-plugin</artifactId>
            <groupId>org.codehaus.mojo</groupId>
            <version>2.0</version>
        </plugin>

        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-eclipse-plugin</artifactId>
            <version>2.9</version>
            <configuration>
                <additionalProjectnatures>
                    <projectnature>com.android.ide.eclipse.adt.AndroidNature</projectnature>
                    <projectnature>org.eclipse.jdt.core.javanature</projectnature>
                </additionalProjectnatures>
            </configuration>
        </plugin>
    </plugins>
</build>

<profiles>
    <profile>
        <id>release</id>
        <build>
            <plugins>
                <plugin>
                    <groupId>com.pyx4me</groupId>
                    <artifactId>proguard-maven-plugin</artifactId>
                    <executions>
                        <execution>
                            <id>process-classes-with-proguard</id>
                            <phase>process-classes</phase>
                            <goals>
                                <goal>proguard</goal>
                            </goals>
                            <configuration>
                                <proguardVersion>4.4</proguardVersion>
                                <maxMemory>256m</maxMemory>
                                <injar>classes</injar>
                                <libs>
                                    <lib>${rt.jar.path}</lib>
                                    <lib>${jsse.jar.path}</lib>
                                </libs>
                                <obfuscate>true</obfuscate>
                                <addMavenDescriptor>false</addMavenDescriptor>
                                <proguardInclude>${project.basedir}/proguard.conf</proguardInclude>
                            </configuration>
                        </execution>
                    </executions>
                    <dependencies>
                        <dependency>
                            <groupId>net.sf.proguard</groupId>
                            <artifactId>proguard</artifactId>
                            <version>4.4</version>
                            <scope>runtime</scope>
                        </dependency>
                    </dependencies>
                </plugin>
                <plugin>
                    <artifactId>maven-jarsigner-plugin</artifactId>
                    <executions>
                        <execution>
                            <id>sign-application-apk</id>
                            <phase>package</phase>
                            <goals>
                                <goal>sign</goal>
                                <goal>verify</goal>
                            </goals>
                        </execution>
                    </executions>
                </plugin>
                <plugin>
                    <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                    <artifactId>android-maven-plugin</artifactId>
                    <executions>
                        <execution>
                            <id>zipalign-application-apk</id>
                            <phase>package</phase>
                            <goals>
                                <goal>zipalign</goal>
                            </goals>
                        </execution>
                    </executions>
                    <configuration>
                        <release>true</release>
                        <zipalign>
                            <verbose>true</verbose>
                            <inputApk>${project.build.directory}/${project.artifactId}-${project.version}.apk</inputApk>
                            <outputApk>${project.build.directory}/${project.artifactId}-${project.version}-signed-aligned.apk</outputApk>
                        </zipalign>
                        <sign>
                            <debug>false</debug>
                        </sign>
                    </configuration>
                </plugin>
                <plugin>
                    <groupId>org.codehaus.mojo</groupId>
                    <artifactId>build-helper-maven-plugin</artifactId>

                    <configuration>
                        <artifacts>
                            <artifact>
                                <file>${project.build.directory}/proguard_map.txt</file>
                                <type>map</type>
                                <classifier>release</classifier>
                            </artifact>
                        </artifacts>
                    </configuration>
                    <executions>
                        <execution>
                            <id>attach-signed-aligned</id>
                            <phase>package</phase>
                            <goals>
                                <goal>attach-artifact</goal>
                            </goals>
                        </execution>
                        <execution>
                            <phase>generate-sources</phase>
                            <goals>
                                <goal>add-source</goal>
                            </goals>
                            <configuration>
                                <sources>
                                    <source>${project.basedir}/target/generated-sources/annotations</source>
                                </sources>
                            </configuration>
                        </execution>
                    </executions>
                </plugin>
            </plugins>
        </build>
    </profile>
</profiles> 
```

父Pom：

> http://maven.apache.org/maven-v4_0_0.xsd">4.0.0

```
<groupId>be.idamediafoundry</groupId>
<artifactId>InterestingFind-parent</artifactId>
<version>1.0-SNAPSHOT</version>
<packaging>pom</packaging>
<name>InterestingFind - Parent</name>

<modules>
    <module>InterestingFind</module>
    <module>InterestingFind-it</module>
</modules>

<properties>
    <platform.version>4.1.1.4</platform.version>
    <android-plugin>3.5.1</android-plugin>
    <spring-android-version>1.0.1.RELEASE</spring-android-version>
    <sign.keystore>${project.basedir}/my-release-key.keystore</sign.keystore>
    <sign.alias>
    </sign.alias>
    <sign.storepass>
    </sign.storepass>
    <sing.keypass>
    </sing.keypass>

</properties>

<repositories>
    <repository>
        <id>codehaus-snapshots</id>
        <url>http://snapshots.repository.codehaus.org</url>
    </repository>

</repositories>

<dependencyManagement>
    <dependencies>

        <dependency>
            <groupId>com.jayway.maven.plugins.android.generation2</groupId>
            <artifactId>android-maven-plugin</artifactId>
            <version>3.5.1</version>
        </dependency>
        <dependency>
            <groupId>com.google.android</groupId>
            <artifactId>android</artifactId>
            <version>${platform.version}</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>com.google.android</groupId>
            <artifactId>android-test</artifactId>
            <version>${platform.version}</version>
            <scope>provided</scope>
        </dependency>

        <!-- Androlog is a logging and reporting library for Android -->
        <dependency>
            <groupId>de.akquinet.android.androlog</groupId>
            <artifactId>androlog</artifactId>
            <version>1.0.5</version>
        </dependency>

        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.10</version>
            <scope>provided</scope>
        </dependency>

    </dependencies>

</dependencyManagement>

<build>
    <pluginManagement>
        <plugins>

            <plugin>
                <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                <artifactId>android-maven-plugin</artifactId>
                <version>3.5.1</version>
                <inherited>true</inherited>
                <configuration>
                    <androidManifestFile>${project.basedir}/AndroidManifest.xml</androidManifestFile>
                    <assetsDirectory>${project.basedir}/assets</assetsDirectory>
                    <resourceDirectory>${project.basedir}/res</resourceDirectory>
                    <nativeLibrariesDirectory>${project.basedir}/src/main/native</nativeLibrariesDirectory>
                    <sdk>
                        <platform>15</platform>
                    </sdk>
                    <undeployBeforeDeploy>true</undeployBeforeDeploy>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>3.0</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
                <extensions>true</extensions>
            </plugin>
            <plugin>
                <artifactId>maven-enforcer-plugin</artifactId>
                <version>1.0</version>
            </plugin>
            <plugin>
                <artifactId>maven-release-plugin</artifactId>
                <version>2.1</version>
                <configuration>
                    <autoVersionSubmodules>true</autoVersionSubmodules>
                </configuration>
            </plugin>
            <plugin>
                <artifactId>maven-jarsigner-plugin</artifactId>
                <version>1.2</version>
                <inherited>true</inherited>
                <configuration>
                    <removeExistingSignatures>true</removeExistingSignatures>
                    <archiveDirectory />
                    <archive>${project.build.directory}/${project.build.finalName}.${project.packaging}</archive>
                    <verbose>true</verbose>
                    <certs>true</certs>
                    <keystore>${sign.keystore}</keystore>
                    <alias>${sign.alias}</alias>
                    <storepass>${sign.storepass}</storepass>
                    <keypass>${sign.keypass}</keypass>
                </configuration>
            </plugin>
            <plugin>
                <groupId>com.pyx4me</groupId>
                <artifactId>proguard-maven-plugin</artifactId>
                <version>2.0.4</version>
                <dependencies>
                    <dependency>
                        <groupId>net.sf.proguard</groupId>
                        <artifactId>proguard</artifactId>
                        <version>4.4</version>
                        <scope>runtime</scope>
                    </dependency>
                </dependencies>
                <configuration>
                    <proguardVersion>4.4</proguardVersion>
                </configuration>
            </plugin>
        </plugins>
    </pluginManagement>
</build>

<profiles>
    <profile>
        <id>release</id>
        <activation>
            <property>
                <name>performRelease</name>
                <value>true</value>
            </property>
        </activation>
        <build>
            <plugins>
                <plugin>
                    <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                    <artifactId>android-maven-plugin</artifactId>
                    <version>${android-plugin}</version>
                    <configuration>
                        <release>true</release>
                    </configuration>
                </plugin>

                <plugin>
                    <artifactId>maven-enforcer-plugin</artifactId>
                    <executions>
                        <execution>
                            <id>enforce-signing-properties</id>
                            <goals>
                                <goal>enforce</goal>
                            </goals>
                            <configuration>
                                <rules>
                                    <requireProperty>
                                        <property>sign.keystore</property>
                                        <message>The 'sign.keystore' property is missing. It must
                                            contain the path to the
                                            keystore used to sign the
                                            application.
                                        </message>
                                    </requireProperty>
                                    <requireFilesExist>
                                        <files>
                                            <file>${sign.keystore}</file>
                                        </files>
                                        <message>The 'sign.keystore' property does not point to a
                                            file. It must contain the
                                            path to the keystore used to sign
                                            the application.
                                        </message>
                                    </requireFilesExist>
                                    <requireProperty>
                                        <property>sign.alias</property>
                                        <message>The 'sign.alias' property is missing. It must
                                            contain the key alias used to
                                            sign the application.
                                        </message>
                                    </requireProperty>
                                    <requireProperty>
                                        <property>sign.storepass</property>
                                        <message>The 'sign.storepass' property is missing. It must
                                            contain the password of
                                            the keystore used to sign the
                                            application.
                                        </message>
                                    </requireProperty>
                                    <requireProperty>
                                        <property>sign.keypass</property>
                                        <message>The 'sign.keypass' property is missing. It must
                                            contain the password of the
                                            key used to sign the application.
                                        </message>
                                    </requireProperty>
                                </rules>
                            </configuration>
                        </execution>
                    </executions>
                </plugin>
            </plugins>
        </build>
    </profile>
    <profile>
        <id>linux</id>
        <activation>
            <os>
                <family>unix</family>
            </os>
        </activation>
        <properties>
            <rt.jar.path>${java.home}/jre/lib/rt.jar</rt.jar.path>
            <jsse.jar.path>${java.home}/jre/lib/jsse.jar</jsse.jar.path>
        </properties>
    </profile>
    <!-- mac profile has to be after unix since running on mac will trigger 
        both -->
    <profile>
        <id>mac</id>
        <activation>
            <os>
                <family>mac</family>
            </os>
        </activation>
        <properties>
            <!-- absolute path -->
            <!--<rt.jar.path>/System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Classes/classes.jar</rt.jar.path> -->
            <!-- or with JAVA_HOME /System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Home/ -->
            <rt.jar.path>${java.home}/../Classes/classes.jar</rt.jar.path>
            <jsse.jar.path>${java.home}/../Classes/jsse.jar</jsse.jar.path>
        </properties>
    </profile>
    <profile>
        <id>windows</id>
        <activation>
            <os>
                <family>windows</family>
            </os>
        </activation>
        <properties>
            <rt.jar.path>${java.home}/jre/lib/rt.jar</rt.jar.path>
            <jsse.jar.path>${java.home}/jre/lib/jsse.jar</jsse.jar.path>
        </properties>
    </profile>
</profiles> 
```

***编辑：更新 pom。*** ***编辑：上传的[日志文件](http://pastebin.com/SBwEx5kq)***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:37:04.057

嗯...在您的 maven-processor-plugin 配置中，您使用的是 AA 处理器的旧包命名（即 : `com.googlecode.androidannotations.AndroidAnnotationProcessor`）。

当您使用 3.0-SNAPSHOT 时，您应该修改它以使用新的：`org.androidannotations.AndroidAnnotationProcessor`

另外，我不确定你是否真的需要这个插件来使 AA 工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T08:13:24.263

似乎问题是由未解决的依赖关系引起的。

起初 Maven 甚至没有报告这个缺失的依赖项，直到我开始从我的 pom 中删除我为了解决这个问题而添加的东西。

现在，解释依赖项没有自动解决的原因是中央 maven 存储库上没有这样的工件。

因此，我添加了以下存储库：

```
<repositories>
    <!-- For developing with Android ROME Feed Reader -->
    <repository>
        <id>android-rome-feed-reader-repository</id>
        <name>Android ROME Feed Reader Repository</name>
        <url>https://android-rome-feed-reader.googlecode.com/svn/maven2/releases</url>
    </repository>
</repositories> 
```

导致解决了“隐藏”的依赖关系。

这种依赖似乎是需要的

```
 <!-- Needed for androidannotations REST interface-->
    <dependency>
        <groupId>org.springframework.android</groupId>
        <artifactId>spring-android-rest-template</artifactId>
        <version>${spring-android-version}</version>
    </dependency> 
```

[Spring 文档](http://static.springsource.org/spring-android/docs/1.0.x/reference/htmlsingle/#d4e68)报告说，我们所说的这种“隐藏依赖”对于 RSS 和 Atom 提要由 rest-template 提供支持是必需的。

更奇怪的是，由 AA 注释的初始活动被创建并很好地解决了。只要我没有引用生成的类，例如用于导航，它就会编译并运行。然而，从我尝试在代码中使用 class_ 的那一刻起，它就走上了这条路。

希望这可以帮助 ！

# android - 5毫秒后调用方法

> ID：15521640
> 
> 赞同：14
> 
> 时间：2013-03-20T11:00:10.227
> 
> 标签：android, delay, record, playing

如何在使用 MediaPlayer 播放音频 5 毫秒后调用记录方法。我尝试过类似的方法，但我不知道，也没有找到任何好的例子来结束这个。

```
while(mp.isPlaying()){
    if(record=0){
       for(int i=0; i<5millisec; i++){ //how to define 5 millisec or is any better solution
       }
    startRecord();
    record=1;
    }
}
mp.stop();
mp.release();
mp=null; 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-03-20T11:09:26.840

5 毫秒是一个非常短的时间段，您不能将音频输出限制在这样的时间段内。您可以使用`Handler`它来执行延迟函数，但它不能确保在调度后 5 毫秒执行。这样做的代码：

```
Handler handler = new Handler();
handler.postDelayed(new Runnable(){
@Override
      public void run(){
        startRecord();
        mp.stop();
        mp.release();
   }
}, 5); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-20T11:08:56.020

您可以使用 postDelayed 方法。在下面的示例中，我在调用该方法后 100 毫秒运行我的例程。

```
new Handler().postDelayed(new Runnable() {
                    @Override
                    public void run() {
                        barVolume.setProgress(audioManager.getStreamVolume(AudioManager.STREAM_MUSIC));
                    }
                }, 
                100); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-14T08:24:13.860

尝试这个：

```
//Auto Start after 2 seconds
        if(ENABLE_AUTO_START) {
            new Timer().schedule(new TimerTask() {
                @Override
                public void run() {
                    // this code will be executed after 2 seconds
                    doThis();
                }
            }, 2000);
        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T11:03:20.447

也许您想使用[Thread.sleep](http://developer.android.com/reference/java/lang/Thread.html#sleep%28long%29)？

像这样：

```
if(record == 0){
   Thread.sleep(5);
} 
```

请注意，我`==`在`if`语句中使用了检查是否相等，而不是`0`每次都分配值，我假设这就是您想要的。

值得一提的是，让一个线程进入睡眠状态会在你指定的时间内停止它做任何事情。如果这是一个 UI 线程，那么您将在该持续时间内有效地“冻结”UI，因此请确保您正确使用它。但是，您的示例`for`循环表明这正是您正在尝试做的事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T11:08:24.633

您可以尝试使用 Thread.sleep(5)，或者，如果您不想为此使用 UI 线程，您可以使用 Timer，或在 doInBackground() 方法中等待 5 毫秒后触发回调的 AsyncTask。

这是使用计时器的一个很好的例子： [https ://stackoverflow.com/a/4598737/832008](https://stackoverflow.com/a/4598737/832008)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-23T07:55:00.057

```
public static MediaRecorder mRecorder = new MediaRecorder();

public void startRecording(String fileName) {
    if(mRecorder != null) {
        try {
            mRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
            mRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
            mRecorder.setOutputFile(fileName);
            mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);

            try {
                mRecorder.prepare();
            } catch (IOException e) {
                Log.e(StartPhoneCallService.class.getSimpleName(), "prepare() failed");
            }
            mRecorder.start();
        } catch (IllegalStateException e) {
            e.printStackTrace();
        }
    }
}

public void stopRecording() {
    if(mRecorder != null) {
        mRecorder.stop();
        mRecorder.release();
        mRecorder = null;
    }
} 
```

现在可以调用 Handler 播放 5 毫秒

```
private final int recording_time = 5;

Handler handler = new Handler();
handler.postDelayed(new Runnable(){
  @Override
  public void run() {
     startRecording("YOUR FILE NAME");
     // Stop your recording after 5 milliseconds
     stopRecording();
   }
}, recording_time ); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-02T17:35:39.813

您还可以使用[ScheduledExecutorService](https://developer.android.com/reference/java/util/concurrent/ScheduledExecutorService.html)

使用 ExecutorService，您可以安排命令在给定延迟后运行，或定期执行。以下示例显示了一个类，该类的方法将 ScheduledExecutorService 设置为每隔十秒发出蜂鸣声，持续一小时：

```
import static java.util.concurrent.TimeUnit.*;
 class BeeperControl {
   private final ScheduledExecutorService scheduler =
     Executors.newScheduledThreadPool(1);

   public void beepForAnHour() {
     final Runnable beeper = new Runnable() {
       public void run() { System.out.println("beep"); }
     };
     final ScheduledFuture<?> beeperHandle =
       scheduler.scheduleAtFixedRate(beeper, 10, 10, SECONDS);
     scheduler.schedule(new Runnable() {
       public void run() { beeperHandle.cancel(true); }
     }, 60 * 60, SECONDS);
   }
 } 
```

# php - 是否可以防止标头再次发送？

> ID：15521645
> 
> 赞同：0
> 
> 时间：2013-03-20T11:00:22.800
> 
> 标签：php, iframe, header, include

想象一下：

```
<?php
include_once('galeria.php');
?> 
```

galeria.php 文件是一个完整的 html/php 文件。是否可以包含文件并防止标题再次发送？我只是不想使用 iframe 或更改我的包含文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T11:29:48.833

您使用“标题”一词使每个人都感到困惑。标头是 Web 服务器发送的内容，用于告诉浏览器如何处理有效负载。你在谈论 HEAD，我怀疑 HTML 和 BODY 标签。

好吧，任何明智的人都会简单地将文件分成几部分，但是出于某种奇怪的原因（您没有告诉我们原因），您声明您不希望这样做。在这种情况下，您可以读取 galeria.php 文件并使用 PHP 的 DOM 类方法（首选）或一些 REGEX（不太好）从 galeria.php 文件中提取正文有效负载。

你能告诉我们为什么你不想明智地设计这个吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T11:16:56.843

标头只发送一次——就在第一个字节发送到浏览器之前。字节可以通过 (例如) `echo()`, `print()`, 或通过节外的文字 text/html发送到浏览器`<?php ?>`。

如果包含 的文件`galeria.php`不需要*显式*发送任何标题，那么您无需担心。

否则 - 如果您的文件`galeria.php` *需要*明确发送标头，您可以缓冲`galeria.php`如下输出：

*   首先，调用`ob_start()`（将所有输出重定向到临时缓冲区），
*   然后包括`galeria.php`（输出被发送到缓冲区，而不是浏览器。标题*尚未*发送），
*   然后根据需要通过发送标题`header()`，
*   调用`ob_end_flush()`以将缓冲区内容发送到浏览器（以及所有默认标头）。

见[http://www.php.net/manual/en/function.ob-start.php](http://www.php.net/manual/en/function.ob-start.php)和[http://php.net/manual/en/book.outcontrol.php](http://php.net/manual/en/book.outcontrol.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T11:04:24.873

**包含一次**

> 该`include_once`语句在脚本执行期间包含并评估指定的文件。这是与语句类似的行为`include`，唯一的区别是**如果文件中的代码已经被包含，它将不会再次被包含。**顾名思义，它将仅包含一次。

**[`Official Document`](http://php.net/manual/en/function.include-once.php)**

# sql - 使用 SP_SEND_DBMAIL 向所有收件人发送重复电子邮件的存储过程

> ID：15521646
> 
> 赞同：9
> 
> 时间：2013-03-20T11:00:25.517
> 
> 标签：sql, sql-server, email, duplicates, sp-send-dbmail

我有一个每晚运行的存储过程，它应该将查询结果发送给多个收件人。然而，在大多数日子里，它最终会在一分钟后发送一封重复的电子邮件。我正在使用的代码如下（所有电子邮件和数据库参考都已更改）：

```
EXEC msdb.dbo.sp_send_dbmail
@recipients = 'email1@email.com',
@copy_recipients = 'email2@email.com;email3@email.com;email4@email.com',
@subject = 'Example Email',
@profile_name = 'ExampleProfile',
@query = 'SELECT name
    FROM table
    WHERE date BETWEEN (getdate() - 1) AND getdate()',
@attach_query_result_as_file = 1 
```

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-26T13:20:40.213

解决方案已证明是将服务器上的帐户重试帐户数减少到 0（在数据库邮件配置向导中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:42:04.203

如果它没有从 SQL Server 发送两次并且邮件服务器也没有问题，那么请确保您没有在 Outlook 中使用邮件过滤器检查邮件，那么您可能会收到两次电子邮件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-24T17:15:52.940

发生这种情况是因为接收电子邮件的地址（在组中或个人中）的电子邮件地址不再有效。虽然您可以像接受的答案一样消除重试，但最好的方法是清理分布。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T11:10:04.327

如果它向收件人发送重复的电子邮件，那么这意味着您的 SP 在一天内被多次调用。检查调用此 SP 的 SQL 作业中设置的调用时间。应该每天一次，以避免重复的电子邮件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T08:30:36.417

我建议您在数据库中添加另一个表，该表将保存有关上次向每个收件人发送电子邮件的时间的信息。

如果没有这样的表，您将无法真正知道发生了什么。如果您不小心多次运行 SP 怎么办？没有什么可以阻止它发送电子邮件。

关于这个问题——您的邮件服务器是否在已发送邮件中保留一份副本？如果是这样，您可能需要检查那里所有消息的发送日期。这可能会为您提供有关正在发生的事情的良好信息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-16T17:16:25.903

我有一个类似的问题，我们在一封电子邮件中有多个收件人，它会生成 2 封已发送的电子邮件。问题最终成为收件人之一不再有效，重试会将电子邮件发送给所有收件人，而不仅仅是失败的收件人。msdb 中有许多视图可以帮助您找到无效的收件人。他们启动 dbo.sysmail_<something>

这个问题有几个解决方案。

1.  将每个收件人拆分为单独的电子邮件。
2.  从列表中删除无效的收件人
3.  将 DBMail 中的重试设置设置为 0

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-01-11T23:27:41.580

除了使用@body 和@subject 根据某些条件发送自定义文本之外，我在@query 中使用SELECT 语句在每封电子邮件的正文中发送常量文本时遇到了同样的重复问题。

一封电子邮件包含预期的自定义文本和查询文本。重复的电子邮件仅包含@query 文本（无自定义文本），系统插入的主题行为“SQL Server 消息”。

我运行了 SELECT * FROM msdb.dbo.sysmail_sentitems 并且确定发送了两次足够的电子邮件。查看 sysmail_configuration 发现 AccountRetryAttempts paramValue = 1。

在我从存储过程中完全删除@query（执行更改）后，问题就消失了，运行了 sp.query。然后我将@query 放回 sp，执行更改。在那之后，电子邮件只开始发送一次。去搞清楚。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-08-11T05:51:00.407

确保在更新的侧面触发器中的任何其他触发器中没有任何其他更新语句。

即使我遇到了类似的问题，当我与触发器交叉检查时，我发现我在另一个触发器中使用了另一个 Update 语句。它导致触发器多次触发。因此触发了两封邮件。

# linux - 如果字符串中有点，如何用 grep 查找确切的单词

> ID：15521649
> 
> 赞同：13
> 
> 时间：2013-03-20T11:00:35.883
> 
> 标签：linux, bash

`BML.I`我试图在当前目录中搜索特定单词。

当我尝试使用以下命令时：

```
grep -l  "BML.I" * 
```

如果它包含单词，它将显示所有结果`BML`

是否可以 grep 精确匹配`BML.I`

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-20T11:02:14.277

你需要逃避 . （句点）因为默认情况下它匹配任何字符，并指定 -w 以匹配特定单词，例如

```
grep -w -l "BML\.I" * 
```

请注意，上面有两个级别的转义。引号确保 shell 传递`BML\.I`给 grep。然后`\`逃过`grep`. 如果省略引号，则 shell 将 解释`\`为句点的转义（并且只需将未转义的句点传递给`grep`）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-20T11:05:12.790

尝试`grep -wF`

从手册页：

```
 -w, --word-regexp
                  Select  only  those  lines containing matches that form whole words.  The
                  test is that the matching substring must either be at  the  beginning  of
                  the line, or preceded by a non-word constituent character.  Similarly, it
                  must be either at  the  end  of  the  line  or  followed  by  a  non-word
                  constituent  character.  Word-constituent characters are letters, digits,
                  and the underscore.

 -F, --fixed-strings
              Interpret  PATTERN as a list of fixed strings, separated by newlines, any
              of which is to be matched.  (-F is specified by POSIX.) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-20T11:23:43.360

我使用`fgrep`，这与`grep -F`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-22T06:36:23.120

使用这个命令：

`ls | grep -x "BML.I"`

# python - 如何使用字符串格式获取 %

> ID：15521650
> 
> 赞同：0
> 
> 时间：2013-03-20T11:00:39.787
> 
> 标签：python, string

我想在运行时在 python 2.6 中创建一个 SQL 语句，如下所示。

```
SQL = SELECT * FROM table1 where col1 LIKE '%somthing%' 
```

上面的在数据库服务器上运行良好，但是我在 python 中创建这个字符串时遇到了问题。我正在使用字符串格式 %s 添加变量。我的 python 代码如下所示

```
var = "somthing"

SQL = "SELECT * FROM table1 where col1 LIKE '%%s%'" % var 
```

我得到以下回溯

```
Traceback (most recent call last):
  File "<stdin>", line 8, in <module>
ValueError: unsupported format character ''' (0x27) at index 247 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T11:02:31.333

您不使用 SQL 的字符串格式；请改用 SQL 参数。

也就是说，您可以`%`通过将其加倍来逃避`%%`：

```
SQL = "SELECT * FROM table1 where col1 LIKE '%%%s%%'" % var 
```

强制性[XKCD 参考](http://xkcd.com/327/)作为习惯性警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:03:02.043

或者，您可以使用`str.format`

```
SQL = "SELECT * FROM table1 where col1 LIKE '%{}%'".format(var) 
```

# c# - 如何使用 LINQ 从 XML 文件中获取完整列表？

> ID：15521652
> 
> 赞同：2
> 
> 时间：2013-03-20T11:00:44.750
> 
> 标签：c#, xml, linq

我的 xml 文件看起来像这样：

```
<Knowledge>
  <Group name="Methods and Techniques">
    <Item name="OO" level="1" />
    <Item name="Dataflow Diagram" level="4" />
    <Item naeme="SDM" level="5" />
  </Group>
  <Group name="Languages">
    <Item name="C#" level="1" />
    <Item name="Delphi" level="1" />
    <Item name="Visual Basic" level="4" />  
  </Group>
</Knowledge> 
```

...我想通过使用 LINQ 查询来创建一个列表。

```
 var queryKnowledge = (from item in _Document.Descendants("Knowledge").Elements("Group")
                             select new
                             {
                                 Group = (string)item.Attribute("name"),
                                 Name = (string)item.Element("Item").Attribute("name"),
                                 Level = (string)item.Element("Item").Attribute("level")
                             }).AsQueryable(); 
```

但我得到了两个项目的清单。每组第一。

但是我如何得到一个列表呢？

```
Group                  Name              Level
Methods and Techniques OO                1
Methods and Techniques Dataflow Diagram  4
Methods and Techniques SDM               5
Languages              C#                1
Languages              Delphi            1
Languages              Visual Basic      4 
```

我必须在我的 LINQ 查询中进行哪些更改？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T11:04:43.813

您需要使用LINQ to XML 提供的`SelectMany`Linq 方法或 use方法来扁平化层次结构，它们执行相同的工作。`Elements`

```
//xml variable contains string representation of your xml
//use XDocument.Load(filePath) to load xml having path to a file
var nodes = XDocument.Parse(xml)
                     .Descendants("Knowledge")
                     .Elements("Group")
                     .Elements("Item");

var queryKnowledge = from item in nodes
                             select new
                             {
                                 Group = (string)item.Parent.Attribute("name"),
                                 Name = (string)item.Attribute("name"),
                                 Level = (string)item.Attribute("level")
                             }; 
```

印刷

```
Group                  Name             Level 
Methods and Techniques OO               1 
Methods and Techniques Dataflow Diagram 4 
Methods and Techniques null             5 
Languages              C#               1 
Languages              Delphi           1 
Languages              Visual Basic     4 
```

`null`是因为您在一个项目中的属性名称为`naeme`. 据我所知，你也不需要`AsQueryable`在这里。

正如 Chris 所指出的，您可以使用下一个代码片段来收集所需的节点，然后应用相同的`Select`投影。

```
var nodes = XDocument.Parse(xml).Descendants("Item"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T11:11:42.797

实际上，由于您的示例非常简单，您可以`Item`通过调用获取节点`Elements("Item")`并使用 Parent 获取组名称：

```
 var queryKnowledge = (from item in xDoc.Element("Knowledge").Elements("Group").Elements("Item")
                          select new
                          {
                              Group = (string)item.Parent.Attribute("name"),
                              Name = (string)item.Attribute("name"),
                              Level = (string)item.Attribute("level")
                          }).AsQueryable(); 
```

注意我将第一次调用更改为 Element() 而不是 Descendants() 假设根据您的示例您只有一个这样的元素。

# javascript - 如何使用 Ajax 重新加载页面

> ID：15521654
> 
> 赞同：0
> 
> 时间：2013-03-20T11:00:48.527
> 
> 标签：javascript, jquery, ajax

我有`addFeaturesToScene`使用 ajax 创建新 URL 的功能。

功能结束后我需要自动进入新站点

这是代码：

```
function addFeatureToScene(featureNid, sceneNid)
  {
  alert(featureNid + " -> " + sceneNid);

     $.ajax({
    type       : 'GET',
    url        : '/copy-feature-and-add-it-to-scene/' + featureNid + '/' + sceneNid,
    dataType   : 'json',
    async      : false,
    success    : function(reply) {

            //Code to open a page with a new url?

 }
 });

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T11:02:07.730

您可以使用`window.location`

```
window.location.href = 'http://example.org'; 
```

# node.js - 我可以将 npm node_modules 目录放在我的“webroot”之外吗

> ID：15521655
> 
> 赞同：15
> 
> 时间：2013-03-20T11:00:54.577
> 
> 标签：node.js, security, npm

我是 Node 新手，但到目前为止我很享受。我试图将我的`node_modules`（库）目录移到公共“webroot”之外，需要建议和指导。

我已经设置了我简单的基于[expressJS](http://expressjs.com/)的 Node 项目，如下所示：

```
/my_project
  /config
  /public          
     /node_modules
     server.js 
```

我想知道是否有任何方法可以让`/node_modules`我的 webroot 之外的目录而不破坏我的应用程序。我只是习惯于在我公开暴露的 webroot 中保持最低限度，并且对那里的库感觉不正确。称我为老式的，但这就是我习惯在 PHP 和 C# 世界中做事的方式。

如果我按如下方式设置项目：

```
/my_project
  /config
  /node_modules
  /public          
     server.js 
```

然后一切都变得摇摆不定，Node的`require()`魔法中断了。

我尝试了以下方法：

`var express=require('../express');`这也不起作用给我“找不到模块”类型错误。

1.  我要问的甚至可能吗，如果可以，那怎么办？
2.  将我的库放在 webroot 中是否有任何重大风险，或者我错过了 Node 工作方式的一些基本内容。
3.  ~~你们是做什么的，生产应用程序的最佳实践是什么？~~我可以举一些关于你的生产实践的例子以及为什么。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-20T12:43:46.313

**1.是否可以在项目外的文件夹中拥有模块**

是的。

**2\. 在 webroot 中使用模块是否有任何重大风险？**

假设您所说的“webroot”是指服务器的根目录或项目之外的任何文件夹：是的。可以使用 g-flag: 使用 npm 全局安装模块`npm install -g express`。这通常被认为是不好的做法，因为不同的项目可能依赖于同一模块的不同版本。本地安装允许不同的项目有不同的版本。

如果您正在使用版本控制并且不想签入外部模块，一个常见的（和 npm 中的标准）模式是忽略并在[package.json](https://npmjs.org/doc/json.html)文件`./node_modules`中指定依赖项。

**3.“生产应用程序的最佳实践是什么？”**

不太适合 SO，但既然我在做，我还是会试一试。如果你使用[grunt](http://gruntjs.com/)（一个非常流行的任务自动化工具），你通常会得到这样的结构：

```
/my_project
  /node_modules
  /lib
    # actual project files
    /public
      # files that are meant to be sent to clients
  /test
  package.json # specifies dependencies, main script, version etc
  README.md # optional 
```

这种结构的优点是可以清楚地分离核心文件、依赖项和任何测试，同时将它们全部保存在同一个文件夹中。

# db2 - db2 中的更新查询

> ID：15521663
> 
> 赞同：0
> 
> 时间：2013-03-20T11:01:08.923
> 
> 标签：db2, insert-update

我的表如下所示，

```
Table Name: Number_List
Columns Name: Num_ID INTEGER 
              First_Number VARCHAR(16) 
              Last_Number VARCHAR(16) 
```

其中，Num_ID 是 PK。其余列 First_Number 和 Last_Number 总是有一个 8 位数字。我的要求是将该列更新为 6 位条目..

考虑两列中的条目是`32659814`(First_Number) 和`32659819`(Last_Number)。现在我需要编写一个更新查询来将表中的条目更改为`326598`(First_Number) 和`326598`(Last_Number)。

并且该表有 15K 条目，我需要在单次执行中在单个查询中更新整个条目。

请帮我解决这个问题。

TIA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:54:18.433

您只需要[`SUBSTR`](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.sql.ref.doc/doc/r0000854.html)：

```
UPDATE SESSION.NUMBER_LIST
   SET FIRST_NUMBER = SUBSTR(FIRST_NUMBER, 1,6)
      ,LAST_NUMBER  = SUBSTR(LAST_NUMBER,  1,6) 
```

# c# - 自定义角色提供程序未在 Web 服务中触发

> ID：15521666
> 
> 赞同：1
> 
> 时间：2013-03-20T11:01:24.580
> 
> 标签：c#, web-services, customization, roleprovider, custom-membershipprovider

```
<system.web>
    <compilation debug="true"
                 targetFramework="4.0" />
    <httpRuntime requestPathInvalidCharacters="" />
    <authentication mode="Forms" />
    <membership defaultProvider=">
        <providers>
            <clear />
                <add name="ANSMP"
                     type="Test.Authentication.CustomMembershipProvider"
                     connectionStringName="DataConnection" />
         </providers>
    </membership>
    <roleManager enabled="true"
                 defaultProvider="ANSRP">
        <providers >
            <clear />       
                <add connectionStringName="DataConnection"
                     applicationName="/"
                     name="ANSRP"
                     type="Test.Authentication.CustomRoleProvider" />
        </providers>
    </roleManager>
</system.web>
<system.serviceModel>
    <behaviours>
        <serviceBehaviors>
            <behavior name="TestDataBehaviour">
                <serviceCredentials>
                    <userNameAuthentication userNamePasswordValidationMode="MembershipProvider"
                                            membershipProviderName="ANSMP"/>
                </serviceCredentials>
                <serviceMetadata httpGetEnabled="true"
                                 httpsGetEnabled="true" />
                <serviceAuthorization principalPermissionMode="UseAspNetRoles"
                                      roleProviderName="ANSRP" />
                <dataContractSerializer ignoreExtensionDataObject="true" />
                <serviceDebug httpHelpPageBinding="webHttpBinding"
                              httpHelpPageBindingConfiguration=""
                              includeExceptionDetailInFaults="true" />
            </behavior>
        </serviceBehaviour>
    </behaviors>
</system.serviceModel> 
```

假设我将自定义成员资格提供者和自定义角色提供者留空（Asin，所有方法`throw NotImplementedException`）；当我尝试使用`[PrinciplePermission(SecurityAction.Demand, Role = "Custom")]`或检查角色时，我预计会出现错误`var b = Thread.CurrentPrincipal.IsInRole("Custom")]`

然而，它只是不断返回`Access is denied`（在属性上）和`false`在场上。

Using`Membership.GetAllUsers()`实际上确实给了我一个`NotImplementedError`.. 但是我如何确保当我使用 PrincipalPermission 属性时它会触发我的自定义角色提供程序和我的自定义成员资格提供程序？

**编辑**

我已经尝试添加`, Test.Authentication`到会员提供者的类型以及角色提供者......

但是目前 PrinciplePermission 告诉我`Request for principal permission failed`

**编辑 2**

检查我的跟踪日志时，我发现以下内容：

```
The action that failed was:
Demand
The type of the first permission that failed was:
System.Security.Permissions.PrincipalPermission
The first permission that failed was:
<IPermission class="System.Security.Permissions.PrincipalPermission, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
version="1">
<Identity Authenticated="true"
Role="Customer"/>
</IPermission>

The demand was for:
<IPermission class="System.Security.Permissions.PrincipalPermission, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
version="1">
<Identity Authenticated="true"
Role="Customer"/>
</IPermission>

The assembly or AppDomain that failed was:
mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089 
```

我也收到了一些`Extension type not found`警告

```
<TraceRecord xmlns="http://schemas.microsoft.com/2004/10/E2ETraceEvent/TraceRecord" Severity="Warning">
    <TraceIdentifier>http://msdn.microsoft.com/nl-NL/library/System.ServiceModel.ExtensionTypeNotFound.aspx</TraceIdentifier>
    <Description>Extension type not found.</Description>
    <AppDomain>/LM/W3SVC/1/ROOT/webapi3-6-130082517071825580</AppDomain>
    <ExtendedData xmlns="http://schemas.microsoft.com/2006/08/ServiceModel/DictionaryTraceRecord">
        <ExtensionName>pollingDuplexHttpBinding</ExtensionName>
        <ExtensionType>System.ServiceModel.Configuration.PollingDuplexHttpBindingCollectionElement, System.ServiceModel.PollingDuplex, version=3.0.0.0, Culture=neutral</ExtensionType>
    </ExtendedData>
</TraceRecord> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:17:29.683

经过很长时间，我发现上面显示的每个人都正确地工作

在客户端，当您创建服务引用时，会生成 2 个端点（在我们的例子中。我不知道这是否是标准的）。一个是安全的，一个是.. 好吧，不是安全的。

为了使用令牌，我一直使用非安全令牌......但为了使用会员提供者、角色提供者和用户名密码验证，我需要使用安全端点！

# javascript - 将 PHP 数组转换为 JSON 字符串

> ID：15521668
> 
> 赞同：0
> 
> 时间：2013-03-20T11:01:30.167
> 
> 标签：javascript, php, json

我有一个看起来像这样的数组：

```
Array ( 
       [1] => Laravel 
       [2] => Volta 
       [3] => Web 
       [4] => Design 
       [5] => Development 
      ) 
```

现在我想将此数组转换为必须看起来像这样的字符串

```
data: [{id: 1, text: 'Laravel'},{id: 2, text: 'Volta'},{id: 3, text: 'Web'},...], 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T11:03:06.247

采用`json_encode`

```
echo json_encode($array); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T11:06:56.137

你可以试试

```
$data = Array(
        1 => "Laravel",
        2 => "Volta",
        3 => "Web",
        4 => "Design",
        5 => "Development"
);

array_walk($data, function (&$item, $key) {
    $item = array("id"=>$key,"text"=>$item);
});

print(json_encode(array("data"=>array_values($data)))); 
```

输出

```
{"data":[{"id":1,"text":"Laravel"},{"id":2,"text":"Volta"},{"id":3,"text":"Web"},{"id":4,"text":"Design"},{"id":5,"text":"Development"}]} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T11:02:48.510

只需使用php的功能`json_encode`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T11:04:01.300

您可以使用[json_encode](http://php.net/manual/en/function.json-encode.php)来做到这一点，并且您将能够使用 javascript 进行解析以将其展示给用户

# r - 并排绘制 gList

> ID：15521671
> 
> 赞同：2
> 
> 时间：2013-03-20T11:01:30.677
> 
> 标签：r, plot, r-grid

我有 2 个 gList 对象（网格），当我这样做时可以很好地绘制

```
grid.draw(plot1)
grid.draw(plot2) 
```

但我希望这些在 pdf 中并排显示。就像是

```
pdf(test.pdf)
par(mfrow=c(1,2))
plot(1:10)
plot(10:1)
dev.off 
```

但这不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T12:03:55.370

要排列`grid`对象，您可以`grid.layout`在视口内使用。这里是一个例子。

```
pushViewport(plotViewport(layout=grid.layout(1, 2),gp=gpar(cex=2)))
pushViewport(plotViewport(layout.pos.col=1))
  grid.draw(getPlot())
popViewport()
pushViewport(plotViewport(layout.pos.col=2, clip="on"))
  grid.draw(getPlot(col.fill='black',col.text='red',text='Rouge',x=0))
popViewport()
popViewport() 
```

![在此处输入图像描述](../Images/1fa15f69af8c179eb2802473ddbd06f3.png)

这`getPlot`是一个返回 a 的函数`gList`；

```
getPlot <- function(col.fill="red",col.text='black',text="Noir",x=1){
  rect1 <- rectGrob(gp=gpar(fill=col.fill))
  text1 <- textGrob(text,gp=gpar(col=col.text))
  text2 <- textGrob("&", x=x,gp=gpar(col=col.text))
  gList(rect1,text1,text2)
} 
```

# jquery - 使用带有类选择器的 jQuery 最接近（）方法

> ID：15521678
> 
> 赞同：2
> 
> 时间：2013-03-20T11:01:43.657
> 
> 标签：jquery, traversal, closest

```
$(this).closest(".fieldfilters"); 
```

这对我没有任何回报。HTML结构是这样的：

```
<div class="fieldfilters" >
    <div class="filtri_ul_list">
        <ul>
            <li> <a></a></li>
        </ul>
    </div>
</div> 
```

`$(this)`是`<a>`。据我了解`closest`，向上遍历 DOM 并找到最接近的匹配项。选择器是一个类有问题吗？为什么这不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T11:14:57.973

您对 .closest() 的使用非常好。

```
$(this).closest(".fieldfilters"); 
```

您的问题最可能的原因是 $(this) 不是您认为的那样。检查你的上下文，看看“这”到底是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:06:11.660

```
$(this).closest('div').find('.fieldfilters'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T11:07:13.593

这将使您第一次出现。 `$(".fieldfilters:first")`

# php - Magento 如何在运输方式中添加必填字段？

> ID：15521680
> 
> 赞同：0
> 
> 时间：2013-03-20T11:01:46.497
> 
> 标签：php, magento-1.7, checkout

我在配送方式的模板文件中添加了一个下拉框。现在我想让它成为必填字段。我已经尝试了很多方法。但没有奏效。任何帮助将不胜感激。

下面是模板文件。

```
<?php 
    $_code=$this->getMethodCode();
    $carrier = $this->getMethodInstance();
    $pickupData = $this->getQuote()->getPickupData();
    $_rate = $this->getRate();
    if(!isset($pickupData['store']))
    {
        $pickupData['store'] = -1;
    }
    if(!isset($pickupData['name']))
    {
        $pickupData['name'] = '';
    }
?>
<ul class="form-list" id="shipping_form_<?php echo $_rate->getCode() ?>" style="display:none;">
    <li>
        <label for="shipping_pickup[store]" class="required"><em>*</em><?php echo $this->__('Choose Store Location:') ?></label>
        <span class="input-box" style="float:left ;">
            <select class="required-entry" name="shipping_pickup[store]" id="shipping_pickup[store]">
                <option value='0'><?php echo $this->__('Select Store..');?></option>
                <?php 
                    $collection = $this->getAllLocations();
                    foreach($collection as $coll)
                    {
                        $data = $coll->getData();
                        ?>
                        <option value='<?php echo $data['location_id']; ?>'><?php echo $this->__($data['location_name']);?></option>
                        <?php 
                    }
                    ?>
            </select>
        </span>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:09:32.810

在 opcheckout.js 中将第 663 行编辑为 763。

```
 validate: function() {
        var methods = document.getElementsByName('shipping_method');

        if (methods.length==0) {
            alert(Translator.translate('Your order cannot be completed at this time as there is no shipping methods available for it. Please make necessary changes in your shipping address.').stripTags());
            return false;
        }

        if(!this.validator.validate()) {
            return false;
        }

        for (var i=0; i<methods.length; i++) {
            if (methods[i].checked) {

                var methodName = methods[i].value;
                if(methodName == 'pickup_pickup')
                    {
                var locationOpt = document.getElementById('shipping_pickup[store]');
                var selectedOpt = locationOpt.options[locationOpt.selectedIndex].text;

                if(selectedOpt == 'Select Store..')
                    {
                        alert(Translator.translate('Please specify a location.').stripTags());
                        return false;

                    }
                else
                    {
                    return true;
                    }
                    }
                else
                    {
                return true;
                    }
            }
        }
        alert(Translator.translate('Please specify shipping method.').stripTags());
        return false;
    }, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:30:29.370

这段代码总是可以工作的，因为它总是被设置在 $_POST 数组中，它似乎变成了一个名为 $pickupData 的数组

您需要更改代码以确保 $pickupData['store'] 不为零

```
//make sure this variable is available in the array to avoid errors
//check to make sure variable is not a zero still
if(isset($pickupData['store']) && $pickupData['store'] == 0){
    $pickupData['store'] = -1;
} 
```

# mongoid - Mongoid embeds_many：推送文档而不保存以保持脏状态

> ID：15521691
> 
> 赞同：6
> 
> 时间：2013-03-20T11:02:07.497
> 
> 标签：mongoid

在 Mongoid 中，将文档推送到`embeds_many`关系中会自动将文档持久保存到数据库中。通常，这很好，但是当我需要跟踪对嵌入文档的更改时会遇到问题。

假设您有两个模型：

```
class List
  include Mongoid::Document
  embeds_many :items
  field :title
end

class Item
  include Mongoid::Document
  embedded_in :list
  field :name
end 
```

这发生在 .changes 属性上：

```
list = List.new(title: 'List title')
list.save  #list is now persisted
item = Item.new(name: 'Item name')
item.changes  #returns Hash with {'name' => [nil, 'Item name']}
list.items << item  #saves item to database under the hood
item.changes  #returns empty Hash, because item was autosaved with list 
```

我可以`item.previous_changes`用来检查在将项目推入列表之前所做的更改，但在我的特定情况下，这会给我带来各种麻烦以保持事情的可控性。

我想要实现的是能够初始化`Item`文档，然后将其添加到`list`（通过`<<`或`push`）而不立即持久化。

我知道 Mongoid 确实提供了在`embeds_many`不持久的情况下设置关系的选项（请参阅[http://mongoid.org/en/mongoid/docs/relations.html#embeds_many](http://mongoid.org/en/mongoid/docs/relations.html#embeds_many)）：

```
list.items.build(name: 'Another item') 
```

问题在于 Mongoid 为您创建了 Item 实例。在我的情况下，`embeds_many`关系中的文档可能是 Item 的子类（例如`SpecialItem < Item`），它不适用于`build`. 但是，如果有人知道解决此限制的方法，我也很乐意接受它作为答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T11:36:41.460

回答我自己的问题：通过将父文档分配给子文档来解决问题，而不是将子文档添加到子列表中。

继续上面的例子，你应该做

```
item.list = list  #no database query 
```

代替

```
list.items << item  #automatic database insert 
```

设置父子引用而不将任何内容自动保存到数据库中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-06T03:30:55.157

要使用您的示例跟进“构建子类”问题，您可以：

```
list.items.build({
  name: "Another Item"
}, SpecialItem) 
```

指定您希望 Mongoid 为您构建的（子）类。

# spring - 调用 init 方法时的部署生命周期

> ID：15521693
> 
> 赞同：0
> 
> 时间：2013-03-20T11:02:08.950
> 
> 标签：spring, spring-mvc

嗨，我是 Servlet/JSP/Springs 的新手。想知道

我有一个部署在 weblogic server 上的 ear 文件。现在作为这个耳朵的一部分，一些模块被暴露为 web 服务。

现在我在上面提到的耳朵中有spring bean，我试图在哪个init方法上访问应该作为这个特定耳朵部署的一部分公开的webservice方法。

我是否能够访问 web 服务，或者直到调用 init 方法，模块才不会作为 web 服务公开

所以基本上当我首先进行部署时，spring bean 的 init 方法将被执行，或者
应该作为 web 服务公开的模块将被公开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:06:43.113

init 方法将首先执行，在此期间您的 Web 服务将被初始化，之后 Web 服务将被公开。

# java - 启用/禁用数据问题

> ID：15521707
> 
> 赞同：1
> 
> 时间：2013-03-20T11:02:42.380
> 
> 标签：java, android, 3g-network

我使用此代码在我的应用程序中启用或禁用 Internet 3G 数据。我阅读了几个关于隐藏反射函数的问题，但它在数千部具有不同 android 版本的手机中运行良好（我的应用程序在 PlayStore 中，我没有遇到任何问题）。但我很担心，因为我发现一个人的手机无法做到这一点。让我首先展示我使用的代码：

```
 try
 {  final ConnectivityManager conman = (ConnectivityManager) MyContext.getSystemService(Context.CONNECTIVITY_SERVICE);
    if(conman == null) return false;
    Class conmanClass = Class.forName(conman.getClass().getName());
    if(conmanClass == null) return false;
    Field iConnectivityManagerField = conmanClass.getDeclaredField("mService");
    if(iConnectivityManagerField == null) return false;
    iConnectivityManagerField.setAccessible(true);
    Object iConnectivityManager = iConnectivityManagerField.get(conman);
    if(iConnectivityManager == null) return false;
    Class iConnectivityManagerClass = Class.forName(iConnectivityManager.getClass().getName());
    if(iConnectivityManagerClass == null) return false;
    Method setMobileDataEnabledMethod = iConnectivityManagerClass.getDeclaredMethod("setMobileDataEnabled", Boolean.TYPE);
    if(setMobileDataEnabledMethod == null) return false;
    setMobileDataEnabledMethod.setAccessible(true);
    setMobileDataEnabledMethod.invoke(iConnectivityManager, true/false); //Here is where you choose to enable or to disable
    return true; //Everything went OK
 }catch(Exception e)
 {  return false;
 } 
```

错误在行：

```
Field iConnectivityManagerField = conmanClass.getDeclaredField("mService"); 
```

有了这个结果：

> java.lang.NoSuchFieldException：mService

那部手机是使用 Jelly Bean 4.1.1 的三星 Galaxy SII 有什么想法吗？我害怕人们开始报告同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:39:32.803

显然，三星（或者可能是 ROM 模组作者）重写了该类并且不再具有名为`mService`. 这完全在他们的权利范围内。只要他们的更改不会破坏 CTS 涵盖的任何内容，他们就可以对框架类的内部实现做他们想做的事。这就是为什么我和其他 Android 专家告诉开发人员不要依赖像你正在使用的脚本小子技巧。

如果“启用或禁用 Internet 3G 数据”对您的应用程序至关重要，并且您确定这会影响三星 Galaxy SII 上的库存 ROM，您将需要阻止通过 Play 商店分发到此类设备。

如果“启用或禁用 Internet 3G 数据”对您的应用程序并不重要，请添加一个更好的异常处理程序来表示“抱歉，此功能不可用”或类似的内容。

# ruby-on-rails - omn iauth-facebook 命名空间跟踪

> ID：15521711
> 
> 赞同：-1
> 
> 时间：2013-03-20T11:02:52.290
> 
> 标签：ruby-on-rails, ruby, namespaces, gem

我在omniauth-facebook/lib/omniauth/strategies/facebook.rb 看到了这段代码

```
require 'omniauth/strategies/oauth2'
require 'base64'
require 'openssl'
require 'rack/utils'

module OmniAuth
  module Strategies
    class Facebook < OmniAuth::Strategies::OAuth2
      ...
    end
  end
end 
```

问题是命名空间“ `OmniAuth::Strategies::OAuth2`”在哪里，它是从哪里继承的`class Facebook`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:13:07.687

如果此代码运行良好，那么您`Gemfile`可能包含`omniauth-oauth2`gem。这是它的定义：[https ://github.com/intridea/omniauth-oauth2/blob/master/lib/omniauth/strategies/oauth2.rb](https://github.com/intridea/omniauth-oauth2/blob/master/lib/omniauth/strategies/oauth2.rb)

# php - PHP从ip范围生成IP列表

> ID：15521725
> 
> 赞同：0
> 
> 时间：2013-03-20T11:03:44.643
> 
> 标签：php, networking, geolocation, ip, network-protocols

例如，这里是一个 ISP 分配的 IP 范围。

```
91.105.0.0/17
46.109.0.0/16
194.8.16.0/21
194.8.24.0/22
194.8.40.0/23
194.8.43.0/24
195.122.0.0/19
195.13.128.0/17
80.232.128.0/17
81.198.0.0/16
84.237.128.0/17
87.110.0.0/16
194.8.9.0/24
194.8.12.0/23
195.114.32.0/19
195.2.96.0/19
62.85.0.0/17
87.246.144.0/20
87.246.160.0/19
78.84.0.0/16
193.200.224.0/24
95.68.0.0/17 
```

如果我是正确的，对于这个范围 193.200.224.0/24 有从 193.200.224.1 到 193.200.224.255 的 IP

和 87.110.0.0/16 从 87.110.1.1 到 87.110.255.255

但是 0/17、0/19 怎么样，如何计算呢？

**我需要帮助来编写 php 函数来自动生成所有 ip**

我会将所有范围放入数据库，然后运行 ​​php 脚本并为每个范围生成 ip 列表。

目的是为了这一切？我希望我的国家/地区都有 IP 地址，这样我就可以更多地分析我的网站访问者。

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-25T11:27:28.223

这就是我想出的：

```
$range  = "194.8.42.0/24";
function ipListFromRange($range){
    $parts = explode('/',$range);
    $exponent = 32-$parts[1].'-';
    $count = pow(2,$exponent);
    $start = ip2long($parts[0]);
    $end = $start+$count;
    return array_map('long2ip', range($start, $end) );
} 
```

在我的情况下，返回包含所有 IP 地址的数组，我使用它从 180 个 isp 获取 200 万个 IP 地址。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T11:14:57.547

您可以使用某种在线计算器，例如 [http://www.aboutmyip.com/AboutMyXApp/SubnetCalculator.jsp?ipAddress=91.105.0.0&cidr=17](http://www.aboutmyip.com/AboutMyXApp/SubnetCalculator.jsp?ipAddress=91.105.0.0&cidr=17)

在那里，您可以看到二进制代码中的地址和掩码。您应该获取第一个地址并使用掩码对其进行异或。第一个数字（/17 掩码上的左 17）对于子网中的所有地址都是通用的（这些是掩码上的 1），最后一个数字（掩码上的 0）在子网中是“免费使用”的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T11:21:25.230

对于 193.200.224.0/24，IP 地址的范围是 193.200.224.0 到 193.200.224.255。即 256 个 IP 地址的范围 - 2^(32-24) = 2^8 = 256

对于 91.105.0.0/17，计算相同 - 2^(32-17) = 2 ^ 15 = 32768 个 IP 地址，从 91.105.0.0 开始。

您可以使用某种嵌套循环来生成范围内的所有 IP 地址。

# django - Django 反向 ForeignKey 查找返回 None

> ID：15521726
> 
> 赞同：2
> 
> 时间：2013-03-20T11:03:50.347
> 
> 标签：django, django-models, python-2.7

我是 Django 开发新手，刚刚开始编写应用程序。我在 models.py 中定义了两个类：

```
from django.db import models
from django.utils import timezone
from django.contrib.auth.models import User

class NEO(models.Model):
    name        = models.CharField(max_length=100, default=' ')
    sighter     = models.ForeignKey(User, blank=True, null=True)
    date_sighted    = models.DateTimeField(default=timezone.now())
    ratings     = models.IntegerField(default=0)
    #coords     = models.ForeignKey('Coords', default='')

    def __unicode__(self):
        return self.name

class Coords(models.Model):
    ra      = models.FloatField('Right Ascension', default=0)
    dec     = models.FloatField('Declination', default=0)
    neo     = models.ForeignKey(NEO, related_name='neo_coords', null=True)

    def __unicode__(self):
        return str(self.ra) + ' ' + str(self.dec) 
```

每个`Coords`对象链接到一个对象`NEO`，反之亦然。取消注释该`Neo.Coords`行，然后调用`n.Coords`返回一个`None`. 给定一个`NEO`对象，如何获取对应的`Coords`对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T11:16:06.227

这里的 ForeignKey 是 ManyToOne 关系（[如文档中所建议的那样](https://docs.djangoproject.com/en/1.4/topics/db/examples/many_to_one/)），因此在您的情况下，`Coords`可以将多个对象绑定到单个`NEO`对象。如果您想要 OneToOne 关系，您可能想要使用`models.OneToOneField`（[此处的文档](https://docs.djangoproject.com/en/dev/topics/db/examples/one_to_one/)）。

在外键查找的情况下，您可以使用。

```
NEO.coords_set.get(**lookup_arguments_here)
# Here NEO.coords_set is the list of coords objects bound to this particular NEO object. 
```

如果`OneToOne`你可以简单地使用

```
NEO.coords 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T11:54:43.087

让两个表用双外键相互引用是没有意义的，因为你会遇到鸡或蛋的问题。您需要决定是否可以存在一对多关系或一对一关系。

一个可以`NEO`有多个`Coords`吗？一个可以`Coord`有多个`NEOs`吗？如果答案是肯定的，那么您需要一个`ForeignKey`. `ForeignKey`应该在关系的许多方面`one-to-many`。如果答案是否定的，并且只能是一对一的链接，那么您需要一个`OneToOneField`.

要访问[关系的反面，](https://docs.djangoproject.com/en/dev/topics/db/queries/#lookups-that-span-relationships)很简单：

```
# multiple coords per neo

class NEO(models.Model):
    name = ...

class Coords(models.Model):
    name = ...
    neo = models.ForeignKey(NEO)

c = Coords.objects.get(id=1)
c.neo # shows the neo

n = NEO.objects.get(id=1)
coords = n.coords_set.all() # multiple coords per neo 
```

相反，如果您有一对一的关系：

```
class NEO(models.Model):
    name = ...

class Coords(models.Model):
    name = ...
    neo = models.OneToOneField(NEO)

c = Coords.objects.get(id=1)
c.neo # shows the neo

n = NEO.objects.get(id=1)
coords = n.coords # only one possible coord per neo 
```

[https://docs.djangoproject.com/en/dev/topics/db/queries/#lookups-that-span-relationships](https://docs.djangoproject.com/en/dev/topics/db/queries/#lookups-that-span-relationships)

# ruby-on-rails - 在 Rails 3 中调试

> ID：15521727
> 
> 赞同：1
> 
> 时间：2013-03-20T11:03:50.873
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我想调试 ROR 而无需为控制器中的每个相关对象以及模型中的每个相关对象都放置检查方法。有没有更好的方法，就像我们在*Java 中那样（使用 eclipse 的运行时调试器）*。我知道我可以使用`Rails.logger`并使用 rails Console(irb`)。我什至知道调试/检查 erb/rb 文件中的元素。仍然有**更好、快速和可靠的方法来调试 Rails 应用程序**。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T11:05:35.570

有更好的，看到这个[railscats](http://railscasts.com/episodes/402-better-errors-railspanel)。

它展示了两个伟大的宝石，尤其是[更好的错误](https://github.com/charliesome/better_errors)

否则，您可以将[pry](http://pry.github.com/)与 rails 一起使用，请参阅此[railscast](http://railscasts.com/episodes/280-pry-with-rails)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T11:08:17.840

您也可以使用`pry-rails`，`pry-debugger`然后`binding.pry`在代码中使用方法，然后在使用您的应用程序时，您可以在 rails server 中使用 Rails 控制台

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T11:50:13.970

将此行添加到应用程序的**Gemfile**

```
group :development do
  gem 'ruby-debug19'
end 
```

然后运行 ​​cammand

```
 bundle install 
```

在您的控制器或模型方法中添加`debugger`，停止 rails 服务器并重新启动。每当 rails 找到 word`debugger`时，它就会停止控制。您可以轻松地调试您的值或对象。希望这会帮助你。

# video - 用于 H.263 的手刹视频编解码器

> ID：15521729
> 
> 赞同：1
> 
> 时间：2013-03-20T11:03:53.003
> 
> 标签：video, mp4

对于某些设备（较旧的 Android 手机），我需要带基带 H.263 的 MP4。

Handbrake 只有 H.264、MPEG-2、MPEG-4 的编解码器选项。

是否也有将 H.263 与手刹一起使用的技巧，或者您通常如何处理此任务？我在 stackexchange 中阅读了很多线程，每个人都在使用手刹，但我找不到合适的编解码器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:40:52.897

Handbrake 利用了几个灵活的开源库，并提供了一个很棒的、可用的前端。但是，它只暴露了大多数人关心的最常见的功能。正如您所发现的，H.263 并不是当今许多人关心的那些功能之一。

好消息是底层代码（FFmpeg 软件）可以编码几种不同类型的 H.263 视频。您可以尝试直接从命令行使用 FFmpeg 进行转换。

# blackberry-10 - 更改黑莓 10 上工作表的默认动画

> ID：15521738
> 
> 赞同：3
> 
> 时间：2013-03-20T11:04:14.140
> 
> 标签：blackberry-10, blackberry-cascades

我正在使用 Gold SDK 开发本机级联 BB10 应用程序。当 BB10 上显示“工作表”时，它会以从屏幕底部的幻灯片过渡的形式呈现动画效果。是否可以覆盖此过渡并将其替换为淡入淡出过渡？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:31:30.123

没有简单的方法可以覆盖动画。

如果它适用于您的情况，可以用对话框替换工作表？屏幕上将显示一个对话框，您可以轻松添加淡入淡出动画。

[https://developer.blackberry.com/cascades/reference/bb_cascades_dialog.html *_* _](https://developer.blackberry.com/cascades/reference/bb__cascades__dialog.html)

# android - 如果必须使用 AsynxTasc 但我仍然无法使用，要在 android 4.0.3 中使用本教程？

> ID：15521740
> 
> 赞同：-4
> 
> 时间：2013-03-20T11:04:18.797
> 
> 标签：android, performance, soap, ksoap2

我使用[了本教程](http://www.c-sharpcorner.com/UploadFile/88b6e5/how-to-call-web-service-in-android-using-soap)并做了一些更改，它应该适用于 android 4.0.3。

但它仍然没有。

有人可以给我一个正确的解决方案吗？

```
package com.webservice;
import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
import android.app.Activity;
import android.graphics.Bitmap;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class FirstScreen extends Activity

{
/** Called when the activity is first created. */

private static String SOAP_ACTION1 = "http://tempuri.org/FahrenheitToCelsius";
private static String SOAP_ACTION2 = "http://tempuri.org/CelsiusToFahrenheit";
private static String NAMESPACE = "http://tempuri.org/";
private static String METHOD_NAME1 = "FahrenheitToCelsius";
private static String METHOD_NAME2 = "CelsiusToFahrenheit";
private static String URL = "http://www.w3schools.com/webservices/tempconvert.asmx?WSDL";
Button btnFar,btnCel,btnClear;
EditText txtFar,txtCel;

@Override
public void onCreate(Bundle savedInstanceState)

{
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_first_screen); 
        btnFar = (Button)findViewById(R.id.btnFar);
        btnCel = (Button)findViewById(R.id.btnCel);
        btnClear = (Button)findViewById(R.id.btnClear);
        txtFar = (EditText)findViewById(R.id.txtFar);
        txtCel = (EditText)findViewById(R.id.txtCel);

        btnFar.setOnClickListener(new View.OnClickListener()
        {
                 @Override
                  public void onClick(View v)
                  {
                      new one1().execute();
                  }
            });            
        btnCel.setOnClickListener(new View.OnClickListener()
        {
                  @Override
                  public void onClick(View v)
                  {
                      new one2().execute();
                  }
            });

        btnClear.setOnClickListener(new View.OnClickListener()
        {
                  @Override
                  public void onClick(View v)
                  {
                        txtCel.setText("");
                        txtFar.setText("");
                  }
            });     
 }

private class one1 extends AsyncTask<String, Integer, String> {

    @Override
    protected String doInBackground(String... arg0) {
        // TODO Auto-generated method stub
           //Initialize soap request + add parameters
        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME1);    

        //Use this to add parameters
        request.addProperty("Fahrenheit",txtFar.getText().toString());         

        //Declare the version of the SOAP request
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);          

        envelope.setOutputSoapObject(request);
        envelope.dotNet = true;         

        try {
              HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);                

              //this is the actual part that will call the webservice
              androidHttpTransport.call(SOAP_ACTION1, envelope);

              // Get the SoapResult from the envelope body.
              SoapObject result = (SoapObject)envelope.bodyIn;
              if(result != null)
              {
                    //Get the first property and change the label text
                    txtCel.setText(result.getProperty(0).toString());
              }
              else
              {
                    Toast.makeText(getApplicationContext(), "No Response",Toast.LENGTH_LONG).show();
              }
        } catch (Exception e) {

              e.printStackTrace();

        }           
        return null;
    }

}

private class one2 extends AsyncTask<String, Integer, String> {

    @Override
    protected String doInBackground(String... params) {
        // TODO Auto-generated method stub
        //Initialize soap request + add parameters
  SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME2);     

  //Use this to add parameters
  request.addProperty("Celsius",txtCel.getText().toString());     

  //Declare the version of the SOAP request
  SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);    

  envelope.setOutputSoapObject(request);
  envelope.dotNet = true;   

  try {
        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);          

        //this is the actual part that will call the webservice
        androidHttpTransport.call(SOAP_ACTION2, envelope);          

        // Get the SoapResult from the envelope body.            
        SoapObject result = (SoapObject)envelope.bodyIn;            
        if(result != null)
        {
              //Get the first property and change the label text
              txtFar.setText(result.getProperty(0).toString());

        }
        else
        {

              Toast.makeText(getApplicationContext(), "No Response",Toast.LENGTH_LONG).show();

        }
  } catch (Exception e) {
        e.printStackTrace();
  }         return null;
    }

}
} 
```

错误日志和代码

```
private class one1 extends AsyncTask<String, Integer, SoapObject> {

protected SoapObject doInBackground(String... arg0) {

protected **void** onPreExecute(**)**
 {
     //value from textview/edittext
 }

// TODO Auto-generated method stub
   //Initialize soap request + add parameters
SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME1);    

//Use this to add parameters
request.addProperty("Fahrenheit","30");// provide value here        

//Declare the version of the SOAP request
SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);          

envelope.setOutputSoapObject(request);
envelope.dotNet = true;         

try {
      HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);                
      androidHttpTransport.call(SOAP_ACTION1, envelope);
      **result** = (SoapObject)envelope.bodyIn;

} catch (Exception e) {

      e.printStackTrace();

}           
return **result**;
   }

   protected void onPostExecute(SoapObject result)
   {
if(result != null)
{
  System.out.println(result.getProperty(0).toString());
}
else
{
  Toast.makeText(getApplicationContext(), "No Response",Toast.LENGTH_LONG).show();
}
}

}
} 
```

我收到以下语法错误：

> 语法错误，插入“枚举标识符”以完成 EnumHeader 令牌“void”上的语法错误，@预期结果无法解析为变量 FirstScreen.java 结果无法解析为变量 FirstScreen.java

编辑代码：

```
package com.webservice;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;

import android.app.Activity;
import android.app.ProgressDialog;
import android.view.View;
import android.view.View.OnClickListener;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

public class FirstScreen extends Activity
{

     private static String SOAP_ACTION1 = "http://tempuri.org/FahrenheitToCelsius";
     private static String NAMESPACE = "http://tempuri.org/";
     private static String METHOD_NAME1 = "FahrenheitToCelsius";
     private static String URL = "http://www.w3schools.com/webservices/tempconvert.asmx?WSDL";
     SoapObject result;
     Button b;
     EditText et;
     int value;
     TextView tv;
     ProgressDialog pd;

     @Override
      public void onCreate(Bundle savedInstanceState)
      {

        super.onCreate(savedInstanceState);
        pd= new ProgressDialog(this);
        pd.setTitle("Making Soap Request");
        setContentView(R.layout.activity_first_screen); 
        b= (Button) findViewById(R.id.button1);
        tv= (TextView) findViewById(R.id.textView2);
        et= (EditText) findViewById(R.id.ed);           
                b.setOnClickListener(new OnClickListener()
                {

               @Override
               public void onClick(View v) {
               // TODO Auto-generated method stub
                value=Integer.parseInt(et.getText().toString());
                new one1().execute();
        }
    });

    }

     private class one1 extends AsyncTask<String, Integer, SoapObject> {

      protected void onPreExecute()
      {
          pd.show();
      }
    protected SoapObject doInBackground(String... arg0) {
        // TODO Auto-generated method stub
           //Initialize soap request + add parameters
        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME1);    

        //Use this to add parameters
        request.addProperty("Fahrenheit",value);         

        //Declare the version of the SOAP request
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);          

        envelope.setOutputSoapObject(request);
        envelope.dotNet = true;         

        try {
              HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);                
              androidHttpTransport.call(SOAP_ACTION1, envelope);
              result = (SoapObject)envelope.bodyIn;

        } catch (Exception e) {

              e.printStackTrace();

        }           
        return result;
    }

     protected void onPostExecute(SoapObject result)
     {
      pd.dismiss();
    if(result != null)
    {
          tv.setText("Result = "+result.getProperty(0).toString());
    }
    else
    {
          Toast.makeText(getApplicationContext(), "No       Response",Toast.LENGTH_LONG).show();
    }
    }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:13:36.450

您正在后台线程中更新 UI。您必须在 UI 线程上更新 UI。

在 doInBackground() 中返回结果

在 onPostExecute() 更新 ui。

```
 Void onPostExecute(int result)  
   {
       if(result != null)
    {
          txtFar.setText(result.getProperty(0).toString());

    }
    else
    {

     Toast.makeText(getApplicationContext(), "No Response",Toast.LENGTH_LONG).show();

    }
 } 
```

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)。查看链接，尤其是**The 4 steps**下的主题。

在您的活动中。

```
new SoapRequestTask().execute();//call asyntask from ui.

private class SoapRequestTask extends AsyncTask<Void, Void, Long> {

 protected void onPreExecute() {
     //display progress dialog
 }

 protected Long doInBackground(Void... params) {

   //make soap request and get result. do not update ui here.
     return result;
 }

 protected void onPostExecute(Long result) {
     //dismiss dialog. update ui here.
 }
} 
```

[http://10keyes.blogspot.in/2012/08/android-implement-ksoap2-in-asynctask.html](http://10keyes.blogspot.in/2012/08/android-implement-ksoap2-in-asynctask.html)。asynctask 和 ksoap 的教程。

编辑

```
 public class FirstScreen extends Activity
 {
 private static String SOAP_ACTION1 = "http://tempuri.org/FahrenheitToCelsius";
 private static String NAMESPACE = "http://tempuri.org/";
 private static String METHOD_NAME1 = "FahrenheitToCelsius";
 private static String URL = "http://www.w3schools.com/webservices/tempconvert.asmx?WSDL";
SoapObject result;
 Button b;
 EditText et;
 int value;
 TextView tv;
 ProgressDialog pd;

 @Override
  public void onCreate(Bundle savedInstanceState)
  {

    super.onCreate(savedInstanceState);
    pd= new ProgressDialog(this);
    pd.setTitle("Making Soap Request");
    setContentView(R.layout.activity_main); 
    b= (Button) findViewById(R.id.button1);
    tv= (TextView) findViewById(R.id.textView2);
    et= (EditText) findViewById(R.id.ed);
    b.setOnClickListener(new OnClickListener()
    {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            value=Integer.parseInt(et.getText().toString());
            new one1().execute();
        }

    });

}

 private class one1 extends AsyncTask<String, Integer, SoapObject> {

  protected void onPreExecute()
  {
      pd.show();
  }
protected SoapObject doInBackground(String... arg0) {
    // TODO Auto-generated method stub
       //Initialize soap request + add parameters
    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME1);    

    //Use this to add parameters
    request.addProperty("Fahrenheit",value);         

    //Declare the version of the SOAP request
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);          

    envelope.setOutputSoapObject(request);
    envelope.dotNet = true;         

    try {
          HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);                
          androidHttpTransport.call(SOAP_ACTION1, envelope);
          result = (SoapObject)envelope.bodyIn;

    } catch (Exception e) {

          e.printStackTrace();

    }           
    return result;
}

 protected void onPostExecute(SoapObject result)
 {
  pd.dismiss();
if(result != null)
{
      tv.setText("Result = "+result.getProperty(0).toString());
}
else
{
      Toast.makeText(getApplicationContext(), "No Response",Toast.LENGTH_LONG).show();
}
}

} 
```

我的activity_main.xml

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
tools:context=".MainActivity" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:text="FahrenheitToCelsius" />

<EditText
    android:id="@+id/ed"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="43dp" />

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:layout_marginTop="37dp"
    android:text="MakeRequest" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:layout_marginTop="20dp"
    android:text="Result" />

 </LinearLayout> 
```

结果在我的手机上。

![在此处输入图像描述](../Images/921e96b01552cbb40777cb77778533d6.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:15:13.733

您无法在 DoInBackground() 方法中访问任何 UI 元素，因为它在自己的线程上运行，而不是在 UI 线程上运行。你应该使用

```
txtFar.setText(result.getProperty(0).toString()); 
```

和

```
Toast.makeText(getApplicationContext(), "No Response",Toast.LENGTH_LONG).show(); 
```

调用 onPostExecute 或 onProgressChanged() 方法。

# android - 无法在未调用 looper.prepare() 的线程内创建处理程序

> ID：15521751
> 
> 赞同：0
> 
> 时间：2013-03-20T11:04:54.070
> 
> 标签：android, android-asynctask

我有一个活动，我通过异步任务从 XML 获取结果。这是我从中获得预测的活动代码

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_prediction);

    Past = (TextView) findViewById(R.id.textView1);
    Present = (TextView) findViewById(R.id.textView2);
    Future = (TextView) findViewById(R.id.textView3);

    new GetPrediction().execute();

}       

class GetPrediction extends AsyncTask <Void, String, String> {

    ProgressDialog dialog = new ProgressDialog(Prediction.this);

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();
        dialog.setMessage("Getting your fortune");
        dialog.setCancelable(false);
        dialog.show();
    }

    @Override
    protected String doInBackground(Void... b) {
        // TODO Auto-generated method stub
        try
        {
            URL website = new URL(baseUrl);
            SAXParserFactory spf = SAXParserFactory.newInstance();
            SAXParser sp = spf.newSAXParser();
            XMLReader xr = sp.getXMLReader();
            HandlingXMLReading doingWork = new HandlingXMLReading(); // created object of default handler class
            xr.setContentHandler(doingWork);
            xr.parse(new InputSource(website.openStream()));
           past = doingWork.getPastPrediction();
           present = doingWork.getPresentPrediction();
           future = doingWork.getFuturePrediction();

    } 
        catch( Exception e)
        {
            past = e.getMessage();
            present = e.getMessage();
            future = e.getMessage();
            }
        return past;
    }

    @Override
    protected void onPostExecute(String result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
        dialog.dismiss();
        Past.setText(result);
        Present.setText(present);
        Future.setText(future);
    }

}

} 
```

现在这工作正常，但问题是当这个异步任务调用默认处理程序类时它给了我上述错误。在默认处理程序类中，我创建了一个从中获取一些数字的类的对象。我正在使用这些数字来解析 XML。但是当我删除那个类对象时，代码工作正常。这是 HandleXMLData.class 的代码

```
public class HandlingXMLReading extends DefaultHandler {

// setting up the opbject
XMLDataCollection prediction = new XMLDataCollection();

/*These next 4 lines  gives the error of 
 * cannot create the handler inside thread
 */
SelectionFuture CardNo = new SelectionFuture();
int PastCard = CardNo.pastCardNo;
int PresentCard = CardNo.presentCardNo;
int FutureCard = CardNo.FutureCardNo;

/* Method Containing the Past Prediction*/
public String getPastPrediction()
{
    return prediction.Past();
}

/* Method Containing the Present Prediction*/
public String getPresentPrediction()
{
    return prediction.Present();
}

/* Method Containing the Past Prediction*/
public String getFuturePrediction()
{
    return prediction.Future();
}

@Override
public void startElement(String uri, String localName, String qName,
        Attributes attributes) throws SAXException {
    // TODO Auto-generated method stub
    super.startElement(uri, localName, qName, attributes);

     if (localName.equals("overview_prediction1")){
            String past = attributes.getValue("name");
            prediction.setPast(past);
            }

 if (localName.equals("overview_prediction2")){
        String present  = attributes.getValue("name");
        prediction.SetPresent(present);
        }

     if (localName.equals("overview_prediction3")){
        String future = attributes.getValue("name");
        prediction.SetFuture(future);
        }

}} 
```

我无法理解发生了什么。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:15:30.243

尝试这个。这可能会解决您的问题

```
private HandlingXMLReading doingWork;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_prediction);

    Past = (TextView) findViewById(R.id.textView1);
    Present = (TextView) findViewById(R.id.textView2);
    Future = (TextView) findViewById(R.id.textView3);
    doingWork = new HandlingXMLReading(); // created object of default handler class

    new GetPrediction().execute();

}       

class GetPrediction extends AsyncTask <Void, String, String> {

    ProgressDialog dialog = new ProgressDialog(Prediction.this);

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();
        dialog.setMessage("Getting your fortune");
        dialog.setCancelable(false);
        dialog.show();
    }

    @Override
    protected String doInBackground(Void... b) {
        // TODO Auto-generated method stub
        try
        {
            URL website = new URL(baseUrl);
            SAXParserFactory spf = SAXParserFactory.newInstance();
            SAXParser sp = spf.newSAXParser();
            XMLReader xr = sp.getXMLReader();

            xr.setContentHandler(doingWork);
            xr.parse(new InputSource(website.openStream()));
            past = doingWork.getPastPrediction();
            present = doingWork.getPresentPrediction();
            future = doingWork.getFuturePrediction();

    } 
        catch( Exception e)
        {
            past = e.getMessage();
            present = e.getMessage();
            future = e.getMessage();
            }
        return past;
    }

    @Override
    protected void onPostExecute(String result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
        dialog.dismiss();
        Past.setText(result);
        Present.setText(present);
        Future.setText(future);
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:35:53.077

`AsyncTask` internally uses a `Handler`. A `Handler` basically allows you to post `Runnables` from another thread on the thread the handler was assigned to, which in the case of `AsyncTask` is always the thread from which it is called. so simplest method is creating object for your handler in void `onCreate()`,instead of creating object inside of `AsyncTask`

# android-fragments - 显示/隐藏片段并以编程方式更改可见性属性

> ID：15521754
> 
> 赞同：7
> 
> 时间：2013-03-20T11:05:06.970
> 
> 标签：android-fragments, visibility

这是一个两部分的问题。我所拥有的是一个 3 Fragment 布局，当用户点击在另一个片段中找到的按钮时，会动态添加第 3 个 Fragment(FragmentC)。然后，在添加后，第三个片段有一个按钮来最大化/最小化它。

**更新：最终****解决方案**的 Scrool

 ****问题1：**

我正在尝试更改用作第三个片段（R.id.fragment_C）的容器的 FrameLayout 的可见性属性。

代码应该做的是生成另一个片段，该片段最初具有包含 android:visibility = "gone" 的 XML。然后，在点击按钮时添加 Fragment，并且假设可见性更改为 VISIBLE。

我知道这之前已经介绍过了，但是在尝试了 4 个小时之后，我决定问我做错了什么。

**问题2：**

生成第 3 个片段后，我有一个最小化/最大化按钮，它应该隐藏前 2 个片段并允许第 3 个片段填充屏幕。

问题是使用 .setVisibility(View.GONE) 时前 2 个片段的视图没有被删除。这之前也有介绍过，但我不知道为什么它在我的代码中不起作用。

到目前为止的代码（对不起，如果它很冗长，但我认为最好为你们包括所有细节）：

**main_activity.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:paddingLeft="0dp"
    android:paddingRight="0dp"
    android:orientation="vertical"
    >

    <FrameLayout
        android:id="@+id/fragment_A"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:background="#CCCCCC" 
        >
    </FrameLayout>

    <FrameLayout
        android:id="@+id/fragment_B"
        android:layout_width="fill_parent"
        android:layout_height="300dp"
        android:layout_below="@id/fragment_A"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="15dp"
        android:background="#B4B4B4"
        >
    </FrameLayout>

    <FrameLayout
        android:id="@+id/fragment_C"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_below="@id/fragment_B"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="0dp"
        android:background="#A3A3A3"
        android:visibility="gone"
        >
    </FrameLayout>

</RelativeLayout> 
```

**土地/main_activity.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"
    android:paddingLeft="0dp"
    android:paddingRight="0dp" >

    <LinearLayout
        android:id="@+id/fragments_container"
        android:layout_width="fill_parent"
        android:layout_height="200dp"
        android:baselineAligned="false" >

        <FrameLayout
            android:id="@+id/fragment_A"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="0.5"
            android:background="#CCCCCC" >
        </FrameLayout>

        <FrameLayout
            android:id="@id/fragment_B"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="0.5"
            android:background="#B4B4B4"
             >
        </FrameLayout>
    </LinearLayout>

    <FrameLayout
        android:id="@+id/fragment_C"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_below="@id/fragment_container"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="0dp"
        android:background="#A3A3A3"
        android:visibility="gone" >
    </FrameLayout>

</RelativeLayout> 
```

**MainActivity.java**

```
package com.example.android.fragments_proto.activity;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentTransaction;

import com.example.android.fragments_proto.R;
import com.example.android.fragments_proto.fragment.GMC_DateSelectionFragment;
import com.example.android.fragments_proto.fragment.GMC_ProdUnitSelectionFragment;

public class MainActivity extends FragmentActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main_activity);

        FragmentManager fm = getSupportFragmentManager();

        Fragment fragmentA = fm.findFragmentById(R.id.fragment_A);

        Fragment fragmentB = fm.findFragmentById(R.id.fragment_B);

        if (fragmentA == null) {

            FragmentTransaction ft = fm.beginTransaction();
            ft.add(R.id.fragment_A, new FragmentA());
            ft.commit();
        }

        if (fragmentB == null) {

            FragmentTransaction ft = fm.beginTransaction();
            ft.add(R.id.fragment_B, new FragmentB());
            ft.commit();
        }
    }
} 
```

现在是第一个 Fragment 的 XML 和 .java 文件。

**片段_A.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center_horizontal"
    >

    <DatePicker
        android:id="@+id/datePicker1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

**片段A.java**

```
package com.example.android.fragments_proto.fragment;

import android.app.Activity;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.view.ViewGroup;
import android.widget.DatePicker;
import android.widget.Toast;

import com.example.android.fragments_proto.R;

public class FragmentA extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        View view = inflater.inflate(R.layout.fragment_A, container, false);

        DatePicker datePicker = (DatePicker) view.findViewById(R.id.datePicker1);
        datePicker.setCalendarViewShown(true);
        datePicker.setSpinnersShown(false);            

        datePicker.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                 Activity activity = getActivity();

                    if (activity != null) {

                        Toast.makeText(activity, "You Touched ME!", Toast.LENGTH_SHORT).show();
                    }
            return false;
            }
        });

        return view;
    }
} 
```

现在，包含按钮的片段的 XML 和 .java 文件在点击时会在 R.id.fragment_C 中添加内容

**片段_B.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >

    <LinearLayout
        android:orientation="horizontal"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="0.1"
        >

        <ListView
            android:id="@+id/listView1"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            >
        </ListView>

    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:orientation="horizontal"
        android:gravity="center"
        android:layout_height="wrap_content">

            <Button
                android:id="@+id/button"
                android:text="@string/btn_fragment"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
            />

    </LinearLayout>

</LinearLayout> 
```

**片段B.java**

```
package com.example.android.fragments_proto.fragment;

import android.app.Activity;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentTransaction;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;

import com.example.android.fragments_proto.R;

public class FragmentB extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        View view = inflater.inflate(R.layout.fragmentB, container, false);

        ListView listView = (ListView) view.findViewById(R.id.listView1);
        Button button = (Button) view.findViewById(R.id.button);

        String[] machines = new String[] { "MachineId-001", "MachineId-002", "MachineId-003", "MachineId-004", "MachineId-005", "MachineId-006", "MachineId-007", "MachineId-008"};

        listView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
        listView.setAdapter(new ArrayAdapter<String>(getActivity(), android.R.layout.select_dialog_multichoice, machines));
        final FrameLayout frameLayout = (FrameLayout) view.findViewById(R.id.fragment_C);

        button.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
               Activity activity = getActivity();

               if (activity != null) {
                   getFragmentManager().beginTransaction().replace(R.id.fragment_C, new FragmentC()).setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE).addToBackStack(null).commit();
                   frameLayout.setVisibility(View.VISIBLE);
                }
            }

        });

        return view;
    }

} 
```

应该添加的 Fragment 的 XML 和 .java 文件。

**片段_C.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:orientation="horizontal"
        android:gravity="center"
        android:layout_height="wrap_content">

    <Button
        android:id="@+id/maximize_button"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Maximize Me!" />

    </LinearLayout>

    <TextView 
        android:id="@+id/text_view"
        android:textIsSelectable="true"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="#FF33FF"
        />

</LinearLayout> 
```

**片段C.java**

```
package com.example.android.fragments_proto.fragment;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentTransaction;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.TextView;

import com.example.android.fragments_proto.R;

public class FragmentC extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        View view = inflater.inflate(R.layout.fragment_C, container, false);

        TextView textView = (TextView) view.findViewById(R.id.text_view);

            final Fragment fragmentA = getFragmentManager().findFragmentById(R.id.fragment_A);
            final Fragment fragmentB = getFragmentManager().findFragmentById(R.id.fragment_B);

            button.setOnClickListener(new OnClickListener() {
                public void onClick(View v) {
                    FragmentTransaction ft = getFragmentManager().beginTransaction();

                    if (fragmentA.isVisible() && fragmentB.isVisible()) {
                        ft.hide(fragmentA);
                        ft.hide(fragmentB);
                        fragmentA.getView().setVisibility(View.GONE);
                        fragmentB.getView().setVisibility(View.GONE);
                        button.setText("Minimize Me!");
                        ft.addToBackStack(null);
                    } else {
                        ft.show(fragmentA);
                        ft.show(fragmentB);
                        fragmentA.getView().setVisibility(View.VISIBLE);
                        fragmentB.getView().setVisibility(View.VISIBLE);
                        button.setText("Maximize Me!");
                        ft.addToBackStack(null);
                    }
                    ft.commit();
                }
            });     

        return view;

    }
} 
```

**感谢[Moesio找到了问题和解决方案](https://stackoverflow.com/users/1113510/moesio)**

**问题：**

我的错误是我试图找到一个视图（在 FragmentB.java 中）

final FrameLayout frameLayout = (FrameLayout) view.findViewById(R.id.fragment_C);

此行返回 null 所以当代码到达它应该执行 .setVisibility() 然后应用程序的点时。将返回 nullPointerException。

FragmentC.java 也发生了同样的情况（所以我的 2 个问题是相关的）。未删除视图，因为我的 findViewById 为空！

**解决方案：**

**只需使用getActivity** .findViewById(R.id.your_view);搜索您的视图

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T11:33:04.063

在 FragmentB 您正在尝试获取不在您的 contentView 上的视图

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    View view = inflater.inflate(R.layout.fragment_b, container, false);

    // this is in fragment_b layout
    ListView listView = (ListView) view.findViewById(R.id.listView1);
    Button button = (Button) view.findViewById(R.id.button);

    /* ... */
    // ****************************************
    // this is NOT in fragment_b layout, which causes null
    // ****************************************
    final FrameLayout frameLayout = (FrameLayout) view.findViewById(R.id.fragment_C);

    /* ... */
} 
```

尝试：

```
 final FrameLayout frameLayout = (FrameLayout) getActivity().getWindow().findViewById(R.id.fragment_C); 
```

而 R.id.fragment_C 被膨胀并设置在 MainActivity 上。

此外，在使用额外的标志之前，我遇到了同样的问题

```
 FragmentTransaction fragmentTransaction = getSupportFragmentManager().beginTransaction();
    final Fragment fragmentC = new FragmentC();
    fragmentTransaction.add(R.id.fragment_C, fragmentC);
    fragmentTransaction.commit();
    menuIsOn = false;

    final View fragmentCView = findViewById(R.id.fragment_C);

    final Button btn = (Button) findViewById(R.id.btn);
    btnPowers.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            if (!menuIsOn) {
                fragmentCView.setVisibility(View.VISIBLE);
            } else {
                fragmentCView.setVisibility(View.INVISIBLE);
            }
            menuIsOn = !menuIsOn;
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-08T12:44:18.493

创建片段的实例并添加而不是替换

```
 FragA  fa= new FragA();
        FragB  fb= new FragB();
        FragC  fc= new FragB();
        fragmentManager = getSupportFragmentManager();
        fragmentTransaction = fragmentManager.beginTransaction();
        fragmentTransaction.add(R.id.fragmnt_container, fa);
        fragmentTransaction.add(R.id.fragmnt_container, fb);
        fragmentTransaction.add(R.id.fragmnt_container, fc);
        fragmentTransaction.show(fa);
        fragmentTransaction.hide(fb);
        fragmentTransaction.hide(fc);
        fragmentTransaction.commit(); 
```

假设我们想根据我们的动作隐藏和显示不同的片段

```
 fragmentTransaction = fragmentManager.beginTransaction();
    fragmentTransaction.hide(fa);
    fragmentTransaction.show(fb);
    fragmentTransaction.hide(fc);
    fragmentTransaction.commit(); 
```**

# javascript - 在另一个 DOM 元素上调度鼠标滚轮事件

> ID：15521755
> 
> 赞同：10
> 
> 时间：2013-03-20T11:05:10.703
> 
> 标签：javascript, html, dom

我有一个带有可滚动 div 的网页。在可滚动 div 之上，我绝对定位了与可滚动 div 的一半重叠的 div。

当我将鼠标光标放在可滚动的 div 上时，我可以用鼠标滚轮滚动它。但是当我将光标移动到重叠的 div 上时，鼠标滚轮会停止滚动该 div（这是正确的行为，因为绝对定位的 div 不在可滚动的 div 内）。

**问题：**如何将绝对定位的 div 接收到的滚动事件传递或分派给这个底层的可滚动 div，以使这个绝对定位的 div 对鼠标滚轮事件“透明”。

我可以让它在 Chrome 中运行，但不能在 IE 和 Firefox 中运行。**如何重写此代码以使其在 IE 和 Firefox 中工作？**

```
if ($.browser.webkit) {    
    $(".overlap-container").bind("mousewheel", function (e) {

        var origEvent = e.originalEvent;
        var evt = document.createEvent("WheelEvent");
        evt.initWebKitWheelEvent(
        origEvent.wheelDeltaX,
        origEvent.wheelDeltaY,
        window,
        0,
        0,
        0,
        0,
        origEvent.ctrlKey,
        origEvent.altKey,
        origEvent.shiftKey,
        origEvent.metaKey);

        $(".scroll-container").get(0).dispatchEvent(evt);
    });
} 
```

请参阅此处的示例：http: [//jsfiddle.net/HAc4K/5](http://jsfiddle.net/HAc4K/5)

**已编辑：**此问题最初来自 jqGrid - 冻结的列不会对鼠标滚轮滚动做出反应。

在 Chrome 和 Firefox 中，支持很棒的 CSS 属性：`pointer-events:none`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T11:11:35.837

看起来像是 jQuery 的一个已知问题：[IE 中不支持 OriginalEvent](http://bugs.jqueryui.com/ticket/7066)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T11:26:36.360

简短的回答：在使用 Internet Explorer 的情况下，您`initWheelEvent`在[演示中使用了错误的参数。](http://jsfiddle.net/HAc4K/)该方法应具有[文档](http://msdn.microsoft.com/en-us/library/windows/apps/hh441141.aspx)中描述的 16 个参数。哟目前只有11个参数是一样的`initWebKitWheelEvent`，但是所有参数的含义`initWheelEvent`是完全不同的。您必须修复`initWheelEvent`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T21:39:43.243

我意识到这不是您正在寻找的东西，但至少在 Chrome、IE7+ 和 Firefox 3.5+ 中，这可以满足您的要求 - 当覆盖它的 div 接收滚动事件时滚动底层 div：

[http://jsfiddle.net/b9chris/yM3qs/](http://jsfiddle.net/b9chris/yM3qs/)

这样做只是因为重叠的 div 是它重叠的 div 的子级 - 没有 jquery 传递任何鼠标滚轮事件（尽管它正在侦听滚动以确保重叠的 div 保持在它需要的位置）。

然而，在 jqGrid 中实现这种变通方法可能需要在那里修改相当多的代码。

HTML：

```
<div id=under>
    (content goes here)
    <div id=over></div>
</div> 
```

CSS：

```
#under {
    position: absolute;
    left: 0; top: 0;
    width: 220px; height: 200px;
    overflow-y: scroll;
}

#over {
    position: absolute;
    left: 1px; top: 100px;
    width: 200px; height: 100px;
    z-index: 2;
} 
```

JS：

```
(function() {
    $('#under').on('scroll', function() {
        $('#over').css('top', $(this).scrollTop() + 100);
    });
})(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-01T03:30:51.863

使用.[`RetargetMouseScroll`](https://github.com/eligrey/RetargetMouseScroll)`(overlap container, scroll container)`

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2019-01-11T17:15:32.453

这是 2019 年重叠容器获取轮子事件的解决方案：

```
document.querySelector('.overlap').on('wheel', (e) => {
  const overlap = e.target

  overlap.style.pointerEvents = 'none'
  setTimeout(() => {overlap.style.pointerEvents = 'auto'}, 0)
}) 
```

这样，重叠元素从称为 的**重叠**元素**中**获取轮子事件。**`.overlap`**

# javascript - 谷歌地图 API v3 如何删除信息窗口矩形下的箭头？

> ID：15521768
> 
> 赞同：1
> 
> 时间：2013-03-20T11:06:00.940
> 
> 标签：javascript, api, google-maps

是否可以删除信息窗口矩形下的箭头？

![在此处输入图像描述](../Images/a16ec42507e6dda5d2a92d3815962bdf.png)

我真的不认为需要在这里包含它，我只想在没有箭头的标记顶部居中矩形。

可能的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T11:43:25.780

尽管冗长，但这是可能的。

```
this.map.infowindow = new google.maps.InfoWindow({
    content: '<div id="iw_content">' + contentString + '</div>'
});

google.maps.event.addListener(this.map.infowindow, 'domready', function () {
    el = document.getElementById('iw_content').parentNode.parentNode.parentNode;
    el.firstChild.setAttribute('class', 'closeInfoWindow');
    el.firstChild.setAttribute('title', 'Close Info Window');
    el = el.previousElementSibling || el.previousSibling;
    el.setAttribute('class', 'infoWindowBackground');
    for (i = 0; i < 11; i = i + 1) {
        el = el.previousElementSibling || el.previousSibling;
        el.style.display = 'none';
    }
}); 
```

这会在代码中设置锚点和挂钩，然后您可以使用它们来设置一些信息窗口的样式，但更重要的是，最后一块（循环）将摆脱箭头块。

它依赖于包含 'iw_content' 的 div 的信息窗口，因此它知道从哪里开始。显然您可以更改它，但这可能需要与父编号略有不同。不过，您应该可以从中解决问题。

# mysql - 我应该对这个查询使用 MySQL 过程吗？

> ID：15521772
> 
> 赞同：0
> 
> 时间：2013-03-20T11:06:11.303
> 
> 标签：mysql, sql, database, random

我想制作存储过程，但我不知道什么应该是正确的方法，或者这是否可以在 MySQL 中完成。

让我向您介绍我的问题。假设我有一个包含这样列的表：

```
TABLE A
id  | Hotel  |  city_name  |  region_name  | country
 1  |   A    |   Amsterdam | North-Holland | Netherlands
 2  |   B    |   Amsterdam | North-Holland | Netherlands
 3  |   C    |   Leiden    | North-Holland | Netherlands
 4  |   D    |   Katwijk   | North-Holland | Netherlands
 5  |   E    |   Leiden    | North-Holland | Netherlands
 6  |   F    |   Katwijk   | North-Holland | Netherlands 
```

每次执行此查询时，我只想获得 3 个结果，并且需要按以下顺序创建结果：

1.  如果有 3 个或更多城市（在这种情况下用户选择我们可以选择阿姆斯特丹），`city_name=Amsterdam`则返回阿姆斯特丹的随机 3 个城市
2.  如果阿姆斯特丹的记录少于 3 条，则返回任何具有阿姆斯特丹的记录 + 返回随机记录，`region=North-Holland`但返回的记录总数应始终为 3（**例如：**我们有 2 条记录，其中`city= Amsterdam`+ 我们采用一条随机记录来自`region=North Holand;` **示例 2：**我们有一个记录`city=Amsterdam`+ 我们有 2 个随机记录 where `region="north Holland"`)

用 SQL 可以做到这一点吗？或者我应该在 php 中获取所有记录，然后遍历每条记录？

我可能需要在过程中传递 2 个参数（city_name，region）。

到目前为止，我已经尝试了一些基本的 SQL 查询，但我无法让它工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T11:37:38.863

你应该尝试类似的东西

```
(SELECT *
FROM A
WHERE city_name = 'Amsterdam'
ORDER BY RAND()
LIMIT 3)

UNION

(SELECT *
FROM A
WHERE region = 'North Holand' AND city_name <> 'Amsterdam'
ORDER BY RAND()
LIMIT 3)

LIMIT 3; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T11:42:18.287

我建议您主要在 php.ini 中执行此操作的逻辑部分。虽然可以在 sql 中完成，但我发现 sql 中的逻辑结构往往难以遵循，而这在 php 中不是问题。

在 php 中执行逻辑可能需要两个单独的查询（但前提是您最初没有得到 3 个）。

我会运行一个查询来获取前三个（`LIMIT 3`在 sql 中使用）。检查你是否得到三个结果。如果你没有，从 3 中减去你得到的数量，然后`LIMIT`在第二个查询中使用它来获得其他随机结果。

# flash - chrome浏览器上最新的flash player 11.6版鼠标光标焦点和flash组件的相对位置差异

> ID：15521782
> 
> 赞同：0
> 
> 时间：2013-03-20T11:06:38.913
> 
> 标签：flash, flex4, salesforce

在安装了最新 Flash 播放器版本（11.6）的 chromer 浏览器上，鼠标光标和 Flash 组件之间似乎存在相对定位差异（比如放置了一个 Flash 组件复选框，当单击复选框上的任何点时它没有被选中。需要悬停复选框以识别获得的焦点，然后单击以进行检查）。

最新的闪存版本是否有任何灵活的解决方案或其问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:23:14.880

我有类似的问题，我做了什么（尝试）
1\. 转到**chrome://plugins/**
2\. 可能有**Shockwave Flash**插件被禁用，启用它。
尝试检查，希望它会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T11:21:04.850

发现 VF 页面中的 padding 属性在 chrome 浏览器上不支持的 bug

# php - DB2 查询在 zend 的同一查询中从 2 个数据库中选择

> ID：15521788
> 
> 赞同：-1
> 
> 时间：2013-03-20T11:06:48.030
> 
> 标签：php, sql, zend-framework, db2

我想知道是否有人知道 Zend 是否可以运行一个查询，该查询将连接到两个不同服务器上的两个不同数据库并将结果组合到一个结果集中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:30:11.057

您可以通过包装器将一个数据库联合到另一个数据库中。您通过昵称引用表，然后正常执行查询，因为两个表都在同一个数据库中（连接、排序等）

DB2 数据库或 Informix 之间的联合是免费的（因为来自 IBM）。如果你想联合另一个数据源（Oracle、Excel、平面文件），你必须单独购买。

使用联合，您不需要在应用程序级别进行连接，而是在数据库级别进行。

# jquery - jquery/html : 使用 jquery 验证 html 表单的每个按钮

> ID：15521795
> 
> 赞同：1
> 
> 时间：2013-03-20T11:07:00.743
> 
> 标签：jquery, jquery-validate

我有一个需要验证的登录表单。它有几个按钮。我需要以这样的方式验证我的表单，如果用户忘记了按钮中的值，那么我会标记一个错误。但是，成功后，我会转到新页面继续工作。我有以下但验证没有发生。

JQ：

```
 <script type="text/javascript">
        $(function() {

            $('#txtEmpid').click(
                    {
                        rules: {
                            txtEmpid: {
                                required: true
                            }
                        },
                        errorPlacement: function(error, element) {
                            element.css('background', '#ffdddd');
                        }
                    });
                    $('#txtPassword').click(
                    {
                        rules: {
                            txtPassword: {
                                required: true
                            }
                        },
                        errorPlacement: function(error, element) {
                            element.css('background', '#ffdddd');
                        }
                    });
        });
    </script> 
```

HTML 表单（index.html）：

```
 <FORM NAME="frmLogin" ACTION="Login.jsp" METHOD="post" >
        <fieldset>
            <div class="text-center">
                <label class="text-center" for="txtEmpid">Employee Id </label>
                <div class="text-center">
                    <input type="text" id="txtEmpid" name ="txtEmpid" placeholder="Employee Id">
                </div>
            </div>
            <div class="text-center">
                <label class="text-center" for="txtPassword">Password</label>
                <div class="text-center">
                    <input type="password" id="txtPassword" name ="txtPassword" placeholder="Password">
                </div>
            </div>
            <div class="text-center">
                <div class="text-center">
                    <button type="submit" class="btn btn-primary">Sign in</button>
                </div>
            </div>
        </FIELDSET> 
```

上面它不起作用。我确信我的 jquery 插件是正确的，因为我可以使用 .validate jquery 方法对整个提交表单进行验证。

我想做验证每个按钮。如果值没问题，那么我会移至新页面（Login.jsp），否则我会留在 index.html 上并标记问题。我该怎么做 ？我的错误是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T11:26:28.780

您需要用户`.validate`.

给表格一个独特的`ID`。

### **[`Demo`](http://jsfiddle.net/PNF2q/1/)**

**HTML**

```
<FORM NAME="frmLogin" ACTION="Login.jsp" METHOD="post" id="FormID">
    <fieldset>
        <div class="text-center">
            <label class="text-center" for="txtEmpid">Employee Id </label>
            <div class="text-center">
                <input type="text" id="txtEmpid" name ="txtEmpid" placeholder="Employee Id">
            </div>
        </div>
        <div class="text-center">
            <label class="text-center" for="txtPassword">Password</label>
            <div class="text-center">
                <input type="password" id="txtPassword" name ="txtPassword" placeholder="Password">
            </div>
        </div>
        <div class="text-center">
            <div class="text-center">
                <button type="submit" class="btn btn-primary">Sign in</button>
            </div>
        </div>
    </FIELDSET>
</form> 
```

**jQuery**

```
<script type="text/javascript">
    $(function()
    {
        $('#FormID').validate(
        {
            rules: {
                txtEmpid: {
                    required: true
                },
                txtPassword: {
                    required: true
                }
            },
            errorPlacement: function(error, element) {
                element.css('background', '#ffdddd');
            }
        });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T11:18:33.327

如果您的 jquery 插件正确，则意味着此代码将帮助您...

```
<script type="text/javascript">
        $(function() {

            $('#formID').validate(
                    {
                        rules: {
                            txtEmpid: {
                                required: true
                            }
                        },
                        errorPlacement: function(error, element) {
                            element.css('background', '#ffdddd');
                        }
                    });

        });
    </script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T11:21:38.453

如果用户仅单击，则您应用了规则。如果用户不单击任何文本框，则这些规则将不适用。

```
<FORM NAME="frmLogin" ACTION="Login.jsp" METHOD="post" id="formId"> 
```

并在提交时调用一个函数

```
function submitFunction()
{

return  $('#formId').valid();

} 
```

或者

你可以简单地使用

```
 <input type="text" id="txtEmpid" name ="txtEmpid" class="required" 
           placeholder="Employee Id">

                <input type="password" id="txtPassword" class="required"  
                name ="txtPassword" placeholder="Password"> 
```

# java - Sugarcrm - 通过 REST 的会话 ID 无效 - 发布过大？

> ID：15521797
> 
> 赞同：1
> 
> 时间：2013-03-20T11:07:02.910
> 
> 标签：java, rest, sugarcrm

- 大家好

我对 sugarcrm 有一种奇怪的行为。这是我用来使用 REST 设置新条目的代码：

```
 public SugarApi(String sugarUrl){
    REST_ENDPOINT = sugarUrl + "/service/v4/rest.php";
    json = new GsonBuilder().create();
    codec = new URLCodec();
  } 
```

* * *

```
 SetEntryRequest req = new SetEntryRequest(sessionId, nameValueListSetEntry, myKind.getModuleName());
    String response = null;
    try {
      response = postToSugar(REST_ENDPOINT+"?method=set_entry&response_type=JSON&input_type=JSON&rest_data="+codec.encode(json.toJson(req)));
    } catch (RemoteException e) {
        System.out.println("Set entry failed. Message: " + e.getMessage());
        e.printStackTrace();
    } catch (EncoderException e) {
        e.printStackTrace();
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

其中 postToSugar 是：

```
public String postToSugar(String urlStr) throws Exception {

URL url = new URL(urlStr);
HttpURLConnection conn = (HttpURLConnection) url.openConnection();
conn.setRequestMethod("POST");
conn.setDoOutput(true);
conn.setDoInput(true);
conn.setUseCaches(false);
conn.setAllowUserInteraction(false);
conn.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");

if (conn.getResponseCode() != 200) {
throw new IOException(conn.getResponseMessage());
}

// Buffer the result into a string
BufferedReader rd = new BufferedReader(new InputStreamReader(conn.getInputStream()));
StringBuilder sb = new StringBuilder();
String line;
while ((line = rd.readLine()) != null) {
  sb.append(line);
}
rd.close();

conn.disconnect();
if(System.getenv("sugardebug") != null){
  System.out.println(sb.toString());
}
return sb.toString();

} 
```

因此，当帖子较小时，此代码可以正常工作。最大尺寸如下：

```
{"id":"8c8801c5-ce3b-093c-ee77-514985c19fe1","entry_list":{"account_id":{"name":"account_id","value":"9b37913b-994b-9bc9-4fbf-500e771d845b"},"status":{"name":"status","value":"New"},
"description":{"name":"description","value":"Ceci est un test \/ TICKET A SUPPRIMER"},"priority":{"name":"priority","value":"P1"},
"name":{"name":"name","value":"test longueur post --------------"},"caseorigin_c":{"name":"caseorigin_c","value":"OnLineForm"},"case_chechindate_c":{"name":"case_chechindate_c","value":"2013-01-12"},"type":{"name":"type","value":"ErrorOnCancel"}}} 
```

但如果帖子较长，服务器会返回：

```
{"name":"Invalid Session ID","number":11,"description":"The session ID is invalid"} 
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-20T20:58:32.793

我在描述字段有一个换行符的请求中遇到了这个问题。我什至对换行符进行了urlencoded，它仍然给了我错误。据推测，Sugar 服务器上的 apache 在换行符处中断了请求，这意味着未找到 sessionID。

我的解决方案是将所有出现的`%0A`和`%0D`替换为`%5Cn`.

`%0A`并且`%0D`是不同的换行符并`%5Cn`成为`\n`糖中的换行符。

我没有针对其余 API 的大量无效字符列表。

# ajax - 为什么 AJAX 有缓存问题？

> ID：15521802
> 
> 赞同：0
> 
> 时间：2013-03-20T11:07:13.707
> 
> 标签：ajax, caching

我想知道为什么 AJAX 有缓存问题，AJAX 发布/获取调用和普通表单发布/获取调用有什么区别？据我所知，当我使用表单 post/get 方法时，我不必考虑缓存问题，但对于 AJAX，我应该在查询字符串的末尾添加一个时间戳参数。谁能给我解释一下？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:10:04.253

你错了——你在*执行*普通的 GET 时必须考虑缓存。只是，从广义上讲，如果只是在浏览网络时提供缓存页面，这不是什么大问题。

当您使用 AJAX 时，您通常会更新记录，然后想要查看结果，因此缓存变得不受欢迎。

# python - Python - 重定向后获取网址

> ID：15521805
> 
> 赞同：1
> 
> 时间：2013-03-20T11:07:21.950
> 
> 标签：python, proxy, oauth-2.0, http-redirect

**对于那些了解 SE API 的人，**
我正在为 SE API 制作一个包装器。
问题是我没有服务器或网站，所以我不能拥有`redirect_uri`我的网站。

我认为我可以使用`stackexchange.com/oauth/login_success`.
我还意识到，在用户进行身份验证后，如果再次打开同一页面，我将被重定向到`redirect_uri`.

我怎样才能得到我被重定向到的 URL ？？？

> **对于那些不了解 SE API 的人**
> 考虑一下：
> 
> 1.  我去link1说，xyz.com/abc?a=10&b=20
> 2.  它会将我重定向到 link2 ( `abc.com/xyz?add=30&mul=200`)
> 
> 我想获取link2的URL。

另外，
我在代理后面，所以我使用开启器来处理代理。（如果这很重要）

我正在使用`urllib2`，所以更喜欢使用相同的解决方案，但请将您的答案限制在内置库中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T00:34:29.187

如果你设置一个简单的本地服务器呢？例如，您可以使用 Flask。此外，如果您只想使用 StackExchange API，您可以使用预构建的客户端，例如 rauth 可能完全符合您的要求。如果您想设置一个简单的服务器并在本地运行它，请查看 rauth [Facebook 登录示例](https://github.com/litl/rauth/tree/master/examples/facebook)。然后您要做的是重定向到您的本地主机，例如该示例中的授权视图：

```
def login():
    # this will map to your local server
    redirect_uri = url_for('authorized', _external=True)

    params = {'redirect_uri': redirect_uri}
    return redirect(facebook.get_authorize_url(**params) 
```

完全披露，我保持沉默。

# java - 更改展开和折叠图像 TreeView JavaFX 2.2

> ID：15521806
> 
> 赞同：5
> 
> 时间：2013-03-20T11:07:24.103
> 
> 标签：java, image, javafx-2, expand, treeviewitem

是否可以更改 JavaFX 2.2 TreeVIew 的展开和折叠图像？

更改此图像，

![有效的 XHTML](../Images/8d43c7b65083998c176febbb24ef17b7.png)

对于这样的图像（带 +/-），

![有效的 XHTML](../Images/d4e01015e3acd302fb52824cf1b3e75f.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T13:04:09.880

当然，这可以通过一点 css 实现。CSS 看起来像这样：

```
.tree-cell .tree-disclosure-node .arrow {
    -fx-shape: null;
    -fx-background-color: null;
    -fx-background-image: url("plus-arrow.png");
}
.tree-cell:expanded .tree-disclosure-node .arrow {
    -fx-shape: null;
    -fx-background-color: null;
    -fx-background-image: url("minus-arrow.png");
} 
```

lg卡拉施

# ruby-on-rails - 当我要求 sqlite3 时，Bundler 会给出 pg

> ID：15521807
> 
> 赞同：0
> 
> 时间：2013-03-20T11:07:26.863
> 
> 标签：ruby-on-rails, bundler

```
bundle show sqlite3
Could not find pg-0.14.1 in any of the sources 
```

知道这里发生了什么吗？要求 sqlite3 如何让我得到 Postgres？我的 Gemfile 为开发设置了 sqlite3，为生产设置了 pg，我在开发环境中。

我已经手动安装了 pg，一旦我安装了 libpq-dev，它就可以工作，然后，bundle show sqlite3 按预期给了我 sqlite3。但是，bundler 怎么会因为没有安装不同的 gem 而弄得这么混乱呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:20:37.780

你能给我们看看你的 Gemfile.lock 吗？我认为其他一些宝石可能需要 pg。

# c# - DataContractSerializer - 如何使用它？

> ID：15521808
> 
> 赞同：0
> 
> 时间：2013-03-20T11:07:30.890
> 
> 标签：c#, serialization

我试图找出，如何在 C# 中为 Windows Phone 8 实现序列化

我找到[了这个](https://stackoverflow.com/questions/5010191/using-datacontractserializer-to-serialize-but-cant-deserialize-back/)解决方案。但我有问题。我不知道如何使用**DataContractSerializer**。当我将它放到 Visual Studio 2012 for Windows Phone 中时，它突出显示了我。我试图添加：

```
using System.Runtime.Serialization; 
```

但这并不能纠正问题。

如何纠正这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:12:40.697

您需要添加对`System.Runtime.Serialization.dll`项目的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:16:37.207

根据[这个答案](https://stackoverflow.com/a/14015198/1921754)，DataContractSerializer 在 Windows Phone 8 上有一些改变的行为。

“突出显示”是什么意思？

# r - 如何提取和计算某些区域形式栅格的平均值？

> ID：15521810
> 
> 赞同：0
> 
> 时间：2013-03-20T11:07:38.510
> 
> 标签：r, raster

我想在第一个栅格中选择小区域并计算该区域的空间平均值，并对其他 11 个栅格执行相同的操作。所以最终会得到 12 个值。

我试过这个：

```
sami<- list.files("C:\\New folder (3)", "*.envi", full.names = TRUE)
saf=stack(sami)
plot(saf, 1)   ## to select a region
e <- drawExtent()## I selected the region
saf_test <- crop(saf, e) 
```

这是这样做的权利吗？

那么我如何计算所选区域的空间平均值？并对所有其他栅格执行相同的操作。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:32:48.273

你可以这样做。我使用了`raster`包中的一些示例数据。尝试一下并将其适应您的栅格堆栈（这应该很容易）。该`extract`函数将返回一个矩阵。为每一层选择的区域的一列值`drawExtent`，然后您可以使用`colMeans`该区域的平均值：

```
 #This particular stack has 3 'layers' - one each for the red, green and blue channels of the picture
    saf <- stack(system.file("external/rlogo.grd", package="raster")) 
    plotRGB( saf )
    e <- drawExtent() 
```

![在此处输入图像描述](../Images/2975c5c92352176323a474e3b803a78d.png)

```
 vals <- extract( saf , e , nl = nlayers( saf ) )
    vals <- colMeans( vals )
    vals
#   red    green     blue 
#   185.9368 191.9158 208.7825 
```

# maven - 在 dyn.js 中构建失败

> ID：15521811
> 
> 赞同：0
> 
> 时间：2013-03-20T11:07:38.673
> 
> 标签：maven, build

今天我尝试使用[https://github.com/dynjs/dynjs](https://github.com/dynjs/dynjs)上的说明从源代码构建 dyn.js。我在 Windows 7 和 Linux (Fedora) 上尝试过，但是在这两个系统上构建都失败了。这就是我得到的：

```
[INFO] Scanning for projects...
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building dynjs 0.1.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[WARNING] The POM for org.projectodd.rephract:rephract:jar:1.x.incremental.39 is missing, no dependency information available
[WARNING] The POM for org.jboss.jreadline:jreadline:jar:0.20.incremental.2 is missing, no dependency information available
[WARNING] The POM for org.jruby.joni:joni:jar:1.1.10.incremental.1 is missing, no dependency information available
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 5.382s
[INFO] Finished at: Wed Mar 20 12:01:04 CET 2013
[INFO] Final Memory: 7M/109M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal on project dynjs: Could not resolve dependencies for project org.dynjs:dynjs:jar:0.1.0-SNAPSHOT: The following artifacts could not be resolved: org.projectodd.rephract:rephract:jar:1.x.incremental.39, org.jboss.jreadline:jreadline:jar:0.20.incremental.2, org.jruby.joni:joni:jar:1.1.10.incremental.1: Failure to find org.projectodd.rephract:rephract:jar:1.x.incremental.39 in http://repo.maven.apache.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced -> [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException 
```

有谁知道如何解决这个问题或如何获得 dyn.js 的工作版本？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T02:10:34.817

该依赖项的版本 # 刚刚更新，请参见此处：

[https://github.com/dynjs/dynjs/blob/master/pom.xml#L144](https://github.com/dynjs/dynjs/blob/master/pom.xml#L144)

所以如果你拉回购，它应该解决这个问题，这里是 0.1.1 标签的链接

[https://github.com/dynjs/dynjs/tree/v0.1.1](https://github.com/dynjs/dynjs/tree/v0.1.1)

一旦 sonatype 结束维护，0.1.1 应该在中央发布

-卢克

# c# - 编辑驻留在网络 (LAN) 上的文本文件

> ID：15521814
> 
> 赞同：0
> 
> 时间：2013-03-20T11:07:46.297
> 
> 标签：c#, .net, winforms, text-files

我想从网络上并通过 IP 地址访问的 c# 应用程序访问和编辑文本文件。访问文件不需要凭据，因此我需要一些示例代码或指南，了解如何开始完成此任务。我要编辑的文件在 Android 平板电脑上，并且我通过 ip 地址访问的 android 应用程序（SD 卡）的存储，因为我的机器和 Android 设备在同一个网络上。谢谢

```
 try
        {
        StreamReader sr = new StreamReader("192.168.1.2/NewFolder/TickerText.txt");

            //Read the first line of text
            line = sr.ReadLine();

            //Continue to read until you reach end of file
            while (line != null) 
            {
                //write the lie to console window
                textBox1.Text=line;
                //Read the next line
                line = sr.ReadLine();
            }

            //close the file
            sr.Close();
            Console.ReadLine();
        }
        catch(Exception ae)
        {
            textBox1.Text = ae.Message;
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T11:11:49.293

假设两台计算机都是 Windows，您可以共享文件所在的文件夹并使用以下方法访问它进行写入：

```
using (StreamWriter writer = new StreamWriter(@"\\IPADDRESS\directories\file.txt") 
{
    writer.Write("Word ");
} 
```

和阅读使用：

```
File.ReadAllLines(@"\\IPADDRESS\directories\file.txt"); 
```

与任何其他文件读取器/写入器相同。

* * *

随着涉及文件所在的 android 操作系统的附加信息，以及 FTP 的包含，我只能说

*   [简单的 ftp 获取文件](https://stackoverflow.com/questions/7053513/howto-do-a-simple-ftp-get-file-on-android)
*   [网络 ftpweb 请求](https://stackoverflow.com/questions/1040371/system-net-ftpwebrequest-getdatetimestamp-example)
*   [FtpWebRequest](http://msdn.microsoft.com/en-au/library/system.net.ftpwebrequest.aspx) <--挑衅
*   [C# ftp 项目](http://www.codeproject.com/Tips/443588/Simple-Csharp-FTP-Class)

会对你有用。

我将粘贴[CodeProject 文章](http://www.codeproject.com/Tips/443588/Simple-Csharp-FTP-Class)中的相关信息。
这段代码都不是我的，但它会做你需要的。
完成后请记住将文件上传回android系统。

```
/* Download File */
    public void download(string remoteFile, string localFile)
    {
        try
        {
            /* Create an FTP Request */
            ftpRequest = (FtpWebRequest)FtpWebRequest.Create(host + "/" + remoteFile);
            /* Log in to the FTP Server with the User Name and Password Provided */
            ftpRequest.Credentials = new NetworkCredential(user, pass);
            /* When in doubt, use these options */
            ftpRequest.UseBinary = true;
            ftpRequest.UsePassive = true;
            ftpRequest.KeepAlive = true;
            /* Specify the Type of FTP Request */
            ftpRequest.Method = WebRequestMethods.Ftp.DownloadFile;
            /* Establish Return Communication with the FTP Server */
            ftpResponse = (FtpWebResponse)ftpRequest.GetResponse();
            /* Get the FTP Server's Response Stream */
            ftpStream = ftpResponse.GetResponseStream();
            /* Open a File Stream to Write the Downloaded File */
            FileStream localFileStream = new FileStream(localFile, FileMode.Create);
            /* Buffer for the Downloaded Data */
            byte[] byteBuffer = new byte[bufferSize];
            int bytesRead = ftpStream.Read(byteBuffer, 0, bufferSize);
            /* Download the File by Writing the Buffered Data Until the Transfer is Complete */
            try
            {
                while (bytesRead > 0)
                {
                    localFileStream.Write(byteBuffer, 0, bytesRead);
                    bytesRead = ftpStream.Read(byteBuffer, 0, bufferSize);
                }
            }
            catch (Exception ex) { Console.WriteLine(ex.ToString()); }
            /* Resource Cleanup */
            localFileStream.Close();
            ftpStream.Close();
            ftpResponse.Close();
            ftpRequest = null;
        }
        catch (Exception ex) { Console.WriteLine(ex.ToString()); }
        return;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T11:12:53.873

您可以读取这样的文件：

```
File.ReadAllLines(@"\\192.168.1.1\FileName.txt"); 
```

这会给你一个`string[]`，或者像这样：

```
foreach (string line in File.ReadLines(@"\\192.168.1.1\FileName.txt"))
{
    ...
} 
```

逐行。您可以像这样附加到文件（例如新行）：

```
File.AppendAllText(@"\\192.168.1.1\FileName.txt", "Hello, World!"); 
```

还有很多其他方法。利用`System.Io`命名空间。

# php - 如何从 Zend Framework 2 中的视图助手获取视图？

> ID：15521818
> 
> 赞同：0
> 
> 时间：2013-03-20T11:08:07.447
> 
> 标签：php, zend-framework2

我可以这样做：

```
// View
<div>
<?php echo $this->myHelper($this); ?>
</div>

// View helper
public function __invoke($view)
{
   ...
   return $view->partial('page_nav', $someData);
} 
```

我可以在视图助手中获取视图对象而不将其作为参数传递给视图吗？像这样：

```
// View
<div>
<?php echo $this->myHelper(); ?>
</div>

// View Helper factory
public function createService(ServiceLocatorInterface $pluginManager)
{        
    ...     
    $view = foo(); // maybe here I can get view?
    return new myHelper($view);
}

// View helper
public function __invoke()
{
   ...
   $view = $this->view;
   return $view->partial('page_nav', $someData);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T11:23:08.953

```
use Zend\View\Helper\AbstractHelper;

class MyHelper extends AbstractHelper {
    public function __invoke() {
        $view = $this->getView();
        // Do something with $view
    }
} 
```

# ruby-on-rails - 如何在具有提交按钮的html表单中使用rails中的will_paginate对数组进行分页

> ID：15521819
> 
> 赞同：0
> 
> 时间：2013-03-20T11:08:12.593
> 
> 标签：ruby-on-rails, will-paginate, form-for

我`.html.erb`在 rails 中有一个视图页面，它显示特定用户上传的附件列表（从数组中提取）。此视图页面`Delete`在页面末尾有一个按钮（删除用户选择的所有附件）。我想分页这个页面。我希望删除按钮与分页一起出现。我尝试删除按钮并`form_for()`在此页面中，然后分页工作。但是当我同时包含两者时，它会引发错误

> “ActiveRecord::Relation:Class 的未定义方法‘model_name’”

请提出一些方法来克服这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:18:59.647

在控制器文件中首先包括`paginate`-

```
 def index
    @orders = Order.paginate(:page => params[:page], order: 'created_at desc', :per_page => 5)
      respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @orders }
    end
 end 
```

并在视图文件中用作
`<%= will_paginate @order_items %>`

可能此代码将有助于消除您的错误。

# java - 如何在 Java 中设置客户端/服务器？

> ID：15521820
> 
> 赞同：0
> 
> 时间：2013-03-20T11:08:16.187
> 
> 标签：java, sockets, networking

所以我编写了一个使用 Socket 和 ServerSocket 类的程序。但是，如果服务器和客户端都在同一台机器上，并且客户端连接到 localhost (127.0.0.1)，我只能连接到我的服务器。即使两者在同一台机器上，我也无法使用常规 IP 地址进行连接：我必须使用 127.0.0.1。如何设置服务器以便我可以从任何计算机连接到它？

我正在使用 Java 网络教程程序（[http://docs.oracle.com/javase/tutorial/networking/sockets/clientServer.html](http://docs.oracle.com/javase/tutorial/networking/sockets/clientServer.html)）。

这是来自客户端的堆栈跟踪： java.net.ConnectException: Connection timed out: connect at java.net.DualStackPlainSocketImpl.connect0(Native Method) at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:69) at java.net .AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339) 在 java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200) 在 java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182) 在 java.net.PlainSocketImpl.connect( PlainSocketImpl.java:157) 在 java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391) 在 java.net.Socket.connect(Socket.java:579) 在 java.net.Socket.connect(Socket.java:528) ) 在 java.net.Socket.(Socket.java:425) 在 java.net.Socket.(Socket.java:208) 在 client.Client.connect(Client.java:38) 在 client.ClientUI$2.mouseClicked(ClientUI.java:87) 在 java.awt.AWTEventMulticaster.mouseClicked(AWTEventMulticaster.java:269) 在 java.awt.Component.processMouseEvent(Component.java:6508) 在 javax .swing.JComponent.processMouseEvent(JComponent.java:3321) 在 java.awt.Component.processEvent(Component.java:6270) 在 java.awt.Container.processEvent(Container.java:2229) 在 java.awt.Component。 dispatchEventImpl(Component.java:4861) at java.awt.Container.dispatchEventImpl(Container.java:2287) at java.awt.Component.dispatchEvent(Component.java:4687) at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java :4832) 在 java.awt.Container 的 java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422) 的 java.awt.LightweightDispatcher.processMouseEvent(Container.java:4501)。dispatchEventImpl(Container.java:2273) at java.awt.Window.dispatchEventImpl(Window.java:2719) at java.awt.Component.dispatchEvent(Component.java:4687) at java.awt.EventQueue.dispatchEventImpl(EventQueue.java :729) 在 java.awt.EventQueue.access$200(EventQueue.java:103) 在 java.awt.EventQueue$3.run(EventQueue.java:688) 在 java.awt.EventQueue$3.run(EventQueue.java:686) ) 在 java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76) 在 java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87) 在 java.awt 的 java.security.AccessController.doPrivileged(Native Method)。在 java.security.AccessController.doPrivileged(Native Method) 在 java.security.ProtectionDomain$1 的 java.awt.EventQueue$4.run(EventQueue.java:700) 的 EventQueue$4.run(EventQueue.java:702)。doIntersectionPrivilege(ProtectionDomain.java:76) 在 java.awt.EventQueue.dispatchEvent(EventQueue.java:699) 在 java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:242) 在 java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java :161) 在 java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:150) 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:146) 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:138) 在 java .awt.EventDispatchThread.run(EventDispatchThread.java:91) Java 结果：-1pumpEventsForFilter(EventDispatchThread.java:161) at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:150) at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:146) at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java :138) 在 java.awt.EventDispatchThread.run(EventDispatchThread.java:91) Java 结果：-1pumpEventsForFilter(EventDispatchThread.java:161) at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:150) at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:146) at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java :138) 在 java.awt.EventDispatchThread.run(EventDispatchThread.java:91) Java 结果：-1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:19:06.473

不幸的是，您既没有发送代码也没有发送堆栈跟踪，因此不可能发现您的问题。

但是我可以假设您可能被您机器上运行的个人防火墙阻止了。这是从一台机器移动到两台机器时的典型问题。发现这一点：首先在两台机器上停止防火墙（如果它正在运行）。如果它有助于配置允许您的客户端连接到服务器的规则（在防火墙规则中配置端口和可能的 IP。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:31:12.400

检查您的操作系统防火墙和可能也包含防火墙的防病毒程序。正如 AlexR 建议的那样，您可以禁用所有防火墙和防病毒软件，然后如果连接成功，您可以将允许连接所需的规则添加到防火墙...

# clojure - 如何在 midje 测试中表示序列

> ID：15521822
> 
> 赞同：0
> 
> 时间：2013-03-20T11:08:24.767
> 
> 标签：clojure

```
(fact "Checking :time has been removed"
      (remove-date [{:time 1 :a 2} {:c 3 :time 4}]) => (seq '({:a 2} {:c 4}))) 
```

在上面的测试中，`remove-date`函数返回一个 seq`({:a 2} {:c 4})`我如何表示右手边的 seq ？（以上不起作用）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:26:37.620

以上对我有用，您的断言中的 {:c 4} 错误。它应该是 {:c 3}。

```
(fact "Checking :time has been removed"
      (remove-date [{:time 1 :a 2} {:c 3 :time 4}]) => (seq '({:a 2} {:c 3}))) 
```

实际上，您不需要`seq`调用：

```
(fact "Checking :time has been removed"
      (remove-date [{:time 1 :a 2} {:c 3 :time 4}]) => '({:a 2} {:c 3})) 
```

我用 midje 1.5.0 和 clojure 1.4.0 测试了它

# c# - 在 WP7/WP8 中禁用图像透明部分的点击事件

> ID：15521824
> 
> 赞同：3
> 
> 时间：2013-03-20T11:08:25.777
> 
> 标签：c#, silverlight, windows-phone-7, image-processing, windows-phone-8

我在我的 Windows 手机项目中使用了一些透明图像。假设我的原始图像尺寸为 400 x 100。

![原始图像](../Images/ba7aacb39328f3430d74196652e447fc.png)

将图像切成四个不同的部分后，它看起来像这样。第一个箭头是活动的，其余部分是透明的，但图像大小相同 400 x 100。我对所有其余三个箭头都做同样的事情。我将它们切成活动部分，而其余部分将是透明的，大小为 400 x 100。所以当我将所有 4 个图像放在网格中时，它会显示如上图。

![切片后的图像但宽度相同，一个部分是活动的，另一部分是透明的](../Images/56e7fb2732835cdb2893ab8c77e9e48a.png)

我想获得每个图像的点击事件。有什么办法可以让活动部分均值的点击事件有一些值意味着颜色值不是透明区域或图像的非活动部分。意味着一旦我点击第一张图片，它会给我该图片的事件。当我点击第二张图片时，它会给我第二张图片的点击事件。但是当我点击图像时，它只给了我 1 个点击事件，因为它占用了整个宽度和高度，而其他图像也具有相同的大小。请为此建议任何解决方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T04:33:53.867

XAML

```
<Grid Name="Grid1">
    <Image Tag="Image1" Source="1.png"/>
    <Image Tag="Image2" Source="2.png"/>
    <!-- more images -->
</Grid> 
```

CS

```
void MouseDown(object sender, MouseButtonEventArgs args)
{
    foreach (var img in ((Panel)sender).Children.OfType<Image>())
    {
        var w = new WriteableBitmap(img, null);
        var p = args.GetPosition(img);
        if (w.Pixels[w.PixelWidth * (int)p.Y + (int)p.X] != 0)
        {
            MessageBox.Show(string.Format("You clicked {0}!", img.Tag));
            args.Handled = true;
            break;
        }
    }
} 
```

像这样附加处理程序

```
Grid1.AddHandler(UIElement.MouseLeftButtonDownEvent,
    new MouseButtonEventHandler(MouseDown), false); 
```

命名空间

```
using System.Linq;
using System.Windows.Media.Imaging; 
```

# grails - Grails 内部化，为新语言添加 message.properties-file

> ID：15521834
> 
> 赞同：1
> 
> 时间：2013-03-20T11:09:02.640
> 
> 标签：grails, internationalization

我有一个关于在 Grails 中“添加新语言”属性文件的问题。

我尝试添加一个新文件，其中包含默认情况下未输入的语言 - 在这种情况下，我只是采用了一种语言 - 没有挪威语 - 并将一个名为**messages_no.properties**的文件添加到 i18n 文件夹但它不会显示当我更改计算机的语言时。

例如，瑞典语 se 默认情况下是在其中，它只是工作。

我错过了什么吗？

# similarity - 如何计算多类型数据的余弦相似度？

> ID：15521835
> 
> 赞同：2
> 
> 时间：2013-03-20T11:09:05.277
> 
> 标签：similarity, trigonometry, cosine-similarity

我在数据库中有记录（行），我想识别类似的记录。我有一个使用余弦相似度的约束。如果变量（属性、列）的类型不同并且以这种形式出现：

```
[number] [number] [boolean] [20 words string] 
```

如何进行矢量化以应用余弦相似度？对于字符串，我可以使用简单的 tf-idf。但是对于数字和布尔值呢？这怎么能结合起来呢？我的想法是向量的长度为 1+1+1+20。但是，仅将记录的数字转换为我的向量中的系数并将它们与字符串的 tf-idf 连接以计算余弦相似度在语义上是否“有效”？或者我可以将数字视为单词并将 tf-idf 也应用于数字。还有其他技术吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T23:15:45.517

矢量的每个位置元素必须测量感兴趣实体的特定属性/特征。通常，当涉及单词时，每个可能出现的单词的计数都有一个向量元素。因此，您的向量的大小可能为 1 + 1 + 1 +（词汇量）。

由于余弦相似度是基于数字计算的，因此您可能必须将非数字转换为数字。例如，您可以使用 0, 1 作为布尔值。

您没有提及您的数字字段是表示测量值还是表示离散值（例如键）。如果数值是测量值，则余弦相似度非常适合（尽管如果不同属性的数字比例不同，它可能会使您的结果产生偏差）。但是，如果数字表示键，那么对每个字段使用单个属性会产生较差的结果，因为键 5 与 6 的距离并不比 200 更接近。但余弦相似度不知道这一点。在数据库字段包含键的情况下，您可能希望每个可能的值都有一个布尔 (0, 1) 向量元素。

# php - php显示空白页没有错误

> ID：15521841
> 
> 赞同：-1
> 
> 时间：2013-03-20T11:09:24.797
> 
> 标签：php, mysqli

嗨，我正在开发一个网站，我需要从服务器中删除文件我目前有以下代码

```
<?php
error_reporting(E_ALL);
ini_set('display_errors', '1');
include($_SERVER['DOCUMENT_ROOT'] . "/Scripts/Functions.php");
top(); 
```

这似乎是问题所在

```
$query = "SELECT * FROM 'Gallery' WHERE 'ID' = '20'";
if (!mysqli_query(connect(),$query))
{
    die('Error: ' . mysqli_error(connect()));
}
else
{
 $Result = mysqli_query(connect(),$query);
      while ($row = mysqli_fetch_assoc($Result))
      {
          $file = get_local($row['Image_Location']);
          unlink($file);
          $query2 = "DELETE FROM Gallery WHERE ID='20'";
            if (mysqli_query(connect(),$query2))
            {
                header("Location: http://test.co.uk/Gallery/Edit/")
            }
            else
            {
                die('Error: ' . mysqli_error(connect()));
            }
      }
}

bottom();
?> 
```

在浏览完代码后，我发现 if (!mysqli_query(connect(),$query)) 部分出现错误，但我无法找出问题所在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:14:13.917

您似乎在此行缺少分号：

```
header("Location: http://www.littlesaintspreschool.co.uk/Gallery/Edit/") 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-20T11:12:02.530

我发现的第一个问题是您的表格被单引号包围。当提到数据库元素时，比如，

*   数据库名称
*   表名
*   字段名称

您必须使用位于 1 键左侧和上方选项卡的反引号 `。

我看到的第二个问题是您正在将一个函数传递给 mysqli_query。不知道 connect() 的返回值是什么...我不能完全说这是问题所在。无论如何，您应该将连接存储在变量而不是函数中。

# java - 如何处理csv文件中的多余逗号

> ID：15521846
> 
> 赞同：-1
> 
> 时间：2013-03-20T11:09:30.537
> 
> 标签：java, android

我正在 Android 中创建一个 csv 文件。在某些地方内容包含逗号我该如何处理这些逗号。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T11:18:27.597

CSV 格式在[https://www.rfc-editor.org/rfc/rfc4180中定义](https://www.rfc-editor.org/rfc/rfc4180)

包含逗号的值必须用双引号括起来。

引用值中的双引号必须通过加倍来转义。

例如，这里有两行，每行三列。

```
hello, "me, you", "world"
"this is a ""quote""", "text", text 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T11:11:40.713

您需要指定文本限定符。通常双引号 (") 用作文本限定符。所有文本始终放在其中，文本限定符内的所有逗号都将被忽略。

这是所有 CSV、语言和所有平台正确处理文本的标准方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T11:11:58.707

您可以使用双引号。例如 "1, Back Street",2,3,asdf,"dff,"

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T11:12:21.373

您必须对要写入 CSV 文件的字符串中的逗号进行转义（如果您使用逗号作为字段分隔符）。但说真的……不要编写自己的 CSV 编写器/解析器！为此使用库。[以 OpenCSV](http://opencsv.sourceforge.net/)为例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T11:50:46.847

使用双引号。例如 "1, abc",2,3,asdf,"dff,"

# .net - 创建对象集是使用实体模型的有效方式吗？

> ID：15521847
> 
> 赞同：1
> 
> 时间：2013-03-20T11:09:33.250
> 
> 标签：.net, entity-framework, entity-framework-4

我对实体框架比较陌生。下面是我用于通用 CRUD 功能的代码。

```
internal class clsRepository<T>  where T : EntityObject
{

private ObjectContext objCtxt;              
private ObjectSet<T> objSet;

public clsRepository()
{
    objCtxt = new DAL.Entities();
    objSet = objCtxt.CreateObjectSet<T>();            
}

public clsRepository(ObjectContext context)
{
    objCtxt = context;
    objSet = objCtxt.CreateObjectSet<T>();            
}

public T AddEntity(T entity)
{
    objSet.AddObject(entity);
    objCtxt.SaveChanges();
    return entity;
}
public void UpdateEntity(T entity)
{
    object ent;
    if (!objCtxt.TryGetObjectByKey(entity.EntityKey, out ent))
    {
        objSet.Attach(entity);
        objCtxt.ObjectStateManager.ChangeObjectState(entity, System.Data.EntityState.Modified);
    }
    else
    {
        objCtxt.ApplyCurrentValues<T>(entity.EntityKey.EntitySetName, entity);
    }            
    objCtxt.SaveChanges();
}
public void DeleteEntity(T entity)
{
    object ent;
    if (!objCtxt.TryGetObjectByKey(entity.EntityKey, out ent))
    {
        objSet.Attach(entity);
        objCtxt.ObjectStateManager.ChangeObjectState(entity, System.Data.EntityState.Deleted);   
    }                      
    objSet.DeleteObject(entity);
    objCtxt.SaveChanges();            
}        
} 
```

> **1）这是使用实体模型的有效方式吗？**
> 
> **2）`objCtxt.CreateObjectSet<T>()`：我假设这行代码将数据库中的所有实体加载到对象上下文中。这会导致任何性能问题吗？**

任何人都可以提出更好的方法吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:09:00.060

先说你的第二个问题。`objCtxt.CreateObjectSet<T>();`不会**从**数据库加载所有实体，它只是创建一个`ObjectSet`. 这是一个`IQueryable`所以当你开始查询它时它会加载实体。

现在第一个问题。一旦您决定使用通用存储库，这就是一种方法。一些备注：

*   `entity.EntityKey`可以为空。所以你也必须检查一下。
*   您有一个在其中`ObjectContext`创建 an 的无参数构造函数。我总是会在存储库之外创建上下文（或通过 IoC 容器注入），因为在涉及多个存储库的作业中，您希望拥有一个上下文实例，并且您当然*不想*将存储库与共享上下文混合在一起他们自己的背景。
*   这也意味着您最好删除`SaveChanges()`呼叫。模式将是：

    ```
    using (var ctx = new DAL.Entities();
    {
         var repo1 = new clsRepository<A>(ctx);
         .... 
         var repo2 = new clsRepository<B>(ctx);
         .... 
         if (// no error )
             ctx.SaveChanges();
    } 
    ```

我说“一旦你决定使用通用存储库”是有原因的。[这](https://stackoverflow.com/a/5626884/861716)是一个经常被引用的帖子，肯定会让你重新思考。

您的存储库方法也可能是扩展方法`ObjectSet`：您做的事情完全相同，但是您只需使用上下文，而不必一直创建所有这些存储库。

# python - Scikit 学习具有多个输出的线性回归

> ID：15521852
> 
> 赞同：2
> 
> 时间：2013-03-20T11:10:02.210
> 
> 标签：python, scikit-learn, linear-regression

我正在尝试使用 scikit learn 进行具有多个输出的线性回归

代码（以随机数据为例）：

```
from sklearn import datasets, linear_model
import numpy as np

X = np.random.rand(300,10)
y = np.random.rand(300,9)
reg_model = linear_model.LinearRegression()
reg_model.fit(X,y) 
```

我收到以下错误：

```
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
/Users/sorensonderby/Documents/workspaces/workspace/Chemoinformatics_proect/notebooks/<ipython-input-116-e235c7159573> in <module>()
      5 y = np.random.rand(300,9)
      6 reg_model = linear_model.LinearRegression()
----> 7 reg_model.fit(X,y)
      8 

/Library/Python/2.7/site-packages/scikit_learn-0.10-py2.7-macosx-10.7-intel.egg/sklearn/linear_model/base.pyc in fit(self, X, y)
    178                     linalg.lstsq(X, y)
    179 
--> 180         self._set_intercept(X_mean, y_mean, X_std)
    181         return self
    182 

/Library/Python/2.7/site-packages/scikit_learn-0.10-py2.7-macosx-10.7-intel.egg/sklearn/linear_model/base.pyc in _set_intercept(self, X_mean, y_mean, X_std)
    106         """
    107         if self.fit_intercept:
--> 108             self.coef_ = self.coef_ / X_std
    109             self.intercept_ = y_mean - np.dot(X_mean, self.coef_.T)
    110         else:

ValueError: operands could not be broadcast together with shapes (10,9) (10) 
```

我阅读了 fit 方法的 api，它说 x 应该是 n_sample x n_features，y 应该是 n_sample x n_targets。 [链接到拟合方法](http://scikit-learn.org/stable/modules/generated/sklearn.linear_model.LinearRegression.html#sklearn.linear_model.LinearRegression.fit)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:43:18.810

您正在使用 scikit-learn 0.10 和 0.13.1 的文档。升级您的安装，然后再试一次——它应该可以工作。

# html - 文本在页面结束之前结束。阅读说明

> ID：15521858
> 
> 赞同：-4
> 
> 时间：2013-03-20T11:10:18.677
> 
> 标签：html, css, blogger

我一直在我的博客中进行 CSS 更改，我遇到了这个错误。帖子中的文字不要到最后。请看这张图片[- http://4.bp.blogspot.com/-bcAhPCuomvM/UUmYh0GX5kI/AAAAAAAADFE/LjxL60gmtqc/s1600/error+css.png](http://4.bp.blogspot.com/-bcAhPCuomvM/UUmYh0GX5kI/AAAAAAAADFE/LjxL60gmtqc/s1600/error+css.png)

我需要使文本更进一步直到页面末尾！我的博客地址是 www.epiblog.in

我的问题中最糟糕的部分是，我不知道我到底做了什么改变..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T11:14:18.587

我超级惊人的图像调试技巧告诉我，您在`#main-wrapper`. 调整，空间就会消失（您也需要调整其他部分的宽度）。

**除了笑话，我通过导航到他的个人资料找到了他的博客，使用了 Chrome 开发工具并找到了固定宽度`#main-wrapper`**

这是他的博客：[http ://www.epiblog.in/2013/03/best-skullcandy-sound-systems-earphones.html](http://www.epiblog.in/2013/03/best-skullcandy-sound-systems-earphones.html)

# c - C中两个不同数组初始化之间的区别

> ID：15521859
> 
> 赞同：2
> 
> 时间：2013-03-20T11:10:19.337
> 
> 标签：c, arrays, initialization

在。。之间

```
int array[100][100]; 
```

和

```
int array[100][100]={0}; 
```

在第一个中，当我打印数组的所有元素时，在第 94 行之后，中途，我开始获取垃圾值，但之前的所有值都是 0，而对于第二个，所有值都是 0 .

第一个声明不是用默认的 0 值初始化吗？如果不是，为什么不是数组中的所有值都是垃圾，为什么只有在第 94 行之后才会出现垃圾值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:12:12.053

> 第一个声明不是用默认的 0 值初始化吗？

不。假设这是一个局部范围的变量，您的第一个声明根本不会导致任何初始化。

> 为什么不是数组中的所有值都是垃圾，为什么只有在第 94 行之后才会出现垃圾值？

未初始化的内存可以有任何值，包括`0`您正在观察的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T11:12:53.420

只有当变量是全局变量时，第一种样式才会导致数据初始化为 0。缺少显式初始化的局部变量将等于将空间分配给变量时发生在其存储位置中的任何内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T11:14:11.050

第一个声明**不保证**任何初始化，事实上我不认为它执行任何。

直到第 94 个元素您才拥有清晰的内存，这是因为操作系统为您提供了一些*干净*/*未使用*的内存。

如果你想确保有*清晰*的记忆，你**必须**使用第二个声明

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T11:15:52.753

第一条语句中没有显式初始化。如果数组在全局范围内声明，则可以进行隐式初始化。

“似乎已初始化一半”的原因是用户空间程序出于安全原因通常从零堆栈/堆开始（不访问包含密码等的其他进程的数据），但不能保证始终清除局部变量. 有一个保证，不是因为性能原因。即使在 C 中，在调用 main 之前也可能发生很多活动：crt0 初始化运行时，将静态数据从 read_only 部分复制到全局变量等。结果是许多程序堆和堆栈不再完整。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-20T11:30:51.520

整数数组[100][100]；

```
 if this declaration is in the scope of main i.e in Stack Segment then 
```

该数组的内存将在堆栈中分配。考虑如果没有人使用这个堆栈，你可能会得到零值，否则它会垃圾，它不是第 94 行元素所特有的。

```
 if same declaration is in Global, then all the array elements will be 
```

初始化为零。

整数数组[100][100]={0};

```
 Irrespective of any segments [Stack/Data(Global,Static)] if any one 
```

变量在数组中初始化，然后其余的数组元素将初始化为零。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-20T11:25:31.697

首先，+1 是针对简洁直接的问题。现在回答，**局部变量如果没有显式初始化，也不会隐式初始化。包含 0 而不是其他垃圾值的所有 93 个成员都不是定义的行为。您可以尝试多次执行上述代码，您将看到第一次声明返回不同的垃圾值。**为了更好地理解，请进入上述代码的汇编级别，亲眼看看内部发生了什么。

# postgresql - Postgresql 中的全文搜索

> ID：15521861
> 
> 赞同：1
> 
> 时间：2013-03-20T11:10:20.830
> 
> 标签：postgresql, full-text-search, fuzzy-search

我正在寻找在 postgresql 中实现全文搜索方法的教程。我尝试了几个示例，但没有一个执行。我尝试了索引 GIN、GIST 和几种研究方法，但搜索时间太长。我有一个包含艺术家姓名的超过 400 万条记录的数据库。我需要开发一种包含fuzzystrseach 算法的搜索方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:22:08.070

这可能不是您正在寻找的答案，但我建议您尝试 Solr、Sphinx 或其他一些搜索服务器。Solr 将毫无问题地处理 4M 行和模糊搜索。我以前也遇到过同样的问题，我的解决方案是使用 Solr。通过使用数据库，我无法获得足够好的性能。

Solr 可以做的不仅仅是模糊搜索。即使没有模糊搜索，Solr 也可以使用词干分析器预处理文本以改善搜索结果。词干提取比模糊搜索提供更好的性能，因为它是在索引时完成的，并且实际搜索可以作为精确匹配执行。

使用 Solr，您可以直接从数据库创建索引，因此您无需编写任何额外的软件来将数据输入 Solr。我没有其他搜索服务器的经验，所以我不能说他们是否有类似的能力。

# android - 在带有选取框的 TextView 中，不会开始循环

> ID：15521868
> 
> 赞同：1
> 
> 时间：2013-03-20T11:10:54.163
> 
> 标签：android, marquee

我有一个大布局和一个虚拟布局，其中只有文本视图。两种情况下的文本视图小部件是相同的，但是当放入更复杂的布局时它不起作用。

选框有什么限制吗？

```
<TextView
    android:id="@+id/txt_id"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:ellipsize="marquee"
    android:marqueeRepeatLimit="marquee_forever"
    android:singleLine="true"
    android:text="a sdasd as das d as d asd a sd as d a sd as d as das d a sd a" >
</TextView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:39:16.027

在我的情况下`android:focusable="true`" 并`android:focusableInTouchMode="true"`进行测试循环：

```
<TextView
    android:id="@+id/txt_id"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:ellipsize="marquee"
    android:focusable="true"
    android:focusableInTouchMode="true"
    android:marqueeRepeatLimit="marquee_forever"
    android:maxLines="1"
    android:scrollHorizontally="true"
    android:singleLine="true"
    android:text="some long text">
</TextView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T04:40:21.433

这是实现品牌的另一种方法。这对我来说非常有效。

将此用作文本视图

```
 <com.example.marque_test.marque_textView
        android:id="@+id/TV_FOOTER"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
         android:fadingEdge="horizontal"
           android:scrollHorizontally="true"
           android:text="a sdasd as das d as d asd a sd as d a sd as d as das d a sd a"
        android:ellipsize="marquee"
        android:focusable="true"
        android:focusableInTouchMode="true"
        android:gravity="center"
        android:marqueeRepeatLimit="marquee_forever"
        android:singleLine="true"
        /> 
```

marque_textView.java

```
public class marque_textView extends TextView
{
   public marque_textView(Context context)
   {
           super(context);
           // TODO Auto-generated constructor stub
   }

   public marque_textView(Context context, AttributeSet attrs,int defStyle)
   {
   super(context, attrs, defStyle);
   setEllipsize(TruncateAt.MARQUEE);

}
 public marque_textView(Context context, AttributeSet attrs)
   {
       super(context, attrs);
   }

   @Override
   protected void onFocusChanged(boolean focused, int direction,Rect previouslyFocusedRect)
   {
       if (focused)
       {
           super.onFocusChanged(focused, direction, previouslyFocusedRect);
       }
   }

   @Override
   public void onWindowFocusChanged(boolean focused)
   {
       if (focused)
       {
           super.onWindowFocusChanged(focused);
       }
   }

   @Override
   public boolean isFocused()
   {
       return true;
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T11:44:33.053

尝试这个 ：

```
<TextView
            android:id="@+id/txt_id"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:ellipsize="marquee"
            android:focusable="true"
            android:focusableInTouchMode="true"
            android:marqueeRepeatLimit="marquee_forever"
            android:scrollHorizontally="true"
            android:singleLine="true"
            android:text="a sdasd as das d as d asd a sd as d a sd as d as das d a sd a" >
        </TextView> 
```

# javascript - 用 HTML 标签包围字符

> ID：15521870
> 
> 赞同：0
> 
> 时间：2013-03-20T11:10:56.793
> 
> 标签：javascript, regex, replace

我想替换 javascript 中的文本。例如文本是：< + class abc > -

我想要结果：

```
<span class="operators"> < </span><span class="operators"> + </span>
<span class="keywords">class</span> abc <span class="operators"> > </span>
<span class="operators"> - </span> 
```

第二个替换规则确实也替换了 < 和 >，以及 HTML 标记中的 class 属性。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:16:49.667

非常基本的例子：

```
var operators = ["<", "+", "-", ">"],
    keywords  = ["class"];

"< + class abc > -".replace(/[^ ]+/g, function(m) {
    if (operators.indexOf(m) > -1)
        return '<span class="operators">' + m + '</span>';
    else if (keywords.indexOf(m) > -1)
        return '<span class="keywords">' + m + '</span>';
    return m;
}); 
```

**演示：http:** [//jsfiddle.net/6Np26/](http://jsfiddle.net/6Np26/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:18:32.357

尝试

```
var x = '< + class abc > -';
var array = x.split(/\s/);

var ops = /^[<>+-\/]$/;
var keywords = /^(class)$/

var result  = [];
for(var i = 0; i <  array.length; i++){
    var item =  array[i];
    if(ops.test(item)) {
        result.push('<span class="operators"> ' + item + ' </span>')
    } else if(keywords.test(item)){
        result.push('<span class="keywords"> ' + item + ' </span>')
    } else {
        result.push(item)
    }
}

console.log(result.join(' ')) 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/CUXPH/1/)

# python - ImportError：无法导入名称 cpg

> ID：15521874
> 
> 赞同：0
> 
> 时间：2013-03-20T11:11:09.290
> 
> 标签：python, python-2.7, cherrypy

我有这个项目，我在`http://www.ibm.com/developerworks/opensource/library/os-cherrypy/?ca=dgr-lnxw01CherryPy`

```
#!/usr/bin/env python
import cherrypy
from cherrypy import cpg

class Application:
    @cpg.expose
    def hello(self, what='Hello', who='world'):
        return '%s, %s!' % (what, who)
cpg.root = Application()
cpg.server.start() 
```

但我认为该网站很旧，我的 python 版本是 2.7.3。

错误是

```
Traceback (most recent call last):
File "hello4.py", line 3, in <module>
from cherrypy import cpg
ImportError: cannot import name cpg 
```

安装程序的cherrypy`http://sourceforge.net/apps/trac/xenwebmanager/wiki/GettingStarted`

新版本的python有什么变化？

如何更改使用 python 2.7.3 的项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:14:04.260

[`cherrypy.cpg`在 2.1 中被删除](https://bitbucket.org/cherrypy/cherrypy/wiki/UpgradeTo21)。您需要找到一些比 2005 年更新的文档。

# c# - Kendo UI Grid 和外部服务 JSON 绑定

> ID：15521875
> 
> 赞同：2
> 
> 时间：2013-03-20T11:11:12.460
> 
> 标签：c#, asp.net-mvc, kendo-ui, kendo-grid

我有现有的休息服务，我正在尝试在 Kendo Grid 中显示返回值。

返回结构：

```
[{"Form":"xxx","Revision":x,"Status":"xxx"}] 
```

我正在使用 Razor 语法，所以我创建了这样的 Grid：

```
@(Html.Kendo()
      .Grid<FormViewModel>()
      .Name("form-list")
      .AutoBind(false)
      .Columns(columns =>
          { 
              columns.Bound(m => m.Form).Title("Name");
              columns.Bound(m => m.Revision).Title("Revision");
          })
      .DataSource(dataSource => dataSource
                                    .Ajax()
                                    .Read(read => read.Url(string.Format("{0}/{1}", Html.WebApiBaseUrl(), "Forms")).Type(HttpVerbs.Get))
                                    .Model(model =>
                                        {
                                            model.Id(m => m.Form);
                                            model.Field(m => m.Revision);
                                        })
                                    .Events(events => events.Error("errorHandler")))) 
```

但我的 Grid 无法绑定到 DataSource。据我了解，Kendo 需要`ToDataSourceResult()`方法调用才能执行正确的 JSON 格式。但是可以直接从客户端进行吗？

控制器：

```
public class FormController : Controller
{
    public ActionResult GetFormList()
    {
        return View();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:34:38.997

不知道为什么它不适用于 Razor，但我能够解决这个问题。所以我像这样创建我的网格：

```
<div id="form-list-view" class="k-content">
    <div id="form-list-grid"></div>
</div>

var formListDataSource = new kendo.data.DataSource({
   transport: {
       read: {
           url: "@Url.Content(string.Format("{0}/{1}", Html.WebApiBaseUrl(), "Forms"))",
           dataType: "json"
       }
   },
    schema: {
        model: {
            id: "Form",
            fields: {
                Form: { type: "string" },
                Revision: { type: "number" },
                Status: { type: "string" }
            }
        }
    },
   pageSize: 10
});

$("#form-list-grid").kendoGrid({
    autoBind: false,
    dataSource: formListDataSource,
    pageable: true,
    columns: [
        {
            field: "Form",
            title: "Name"
        },
        {
            field: "Revision",
            title: "Revision"
        },
        {
            field: "Status",
            title: "Status"
        }
    ]
}); 
```

现在我有了预期的行为，并且我的 Grid 正确绑定到返回的数据。

# node.js - nodejs（express）是否可以有不区分大小写的查询字符串？

> ID：15521876
> 
> 赞同：14
> 
> 时间：2013-03-20T11:11:16.170
> 
> 标签：node.js, express

似乎查询字符串区分大小写。是否可以有不区分大小写的查询字符串？

如果我的 url 有`?Id=10`，访问`req.query.id`返回`undefined`。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-20T13:24:14.613

这是不可能的，但您可以插入一个非常简单的中间件，例如，将所有键小写`req.query`：

```
// insert this before your routes
app.use(function(req, res, next) {
  for (var key in req.query)
  { 
    req.query[key.toLowerCase()] = req.query[key];
  }
  next();
}); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-09-04T11:18:22.317

使用 Robert 提出的解决方案，请注意，无论何时*读取*，`req.query`都需要使用小写的键。这使得将来添加到您的 API 时容易出错。

这是一个替代的中间件，使用[Proxy 对象](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Proxy)来修改 的行为`req.query[...]`，以便查找不区分大小写：

```
app.use((req, res, next) => {
  req.query = new Proxy(req.query, {
    get: (target, name) => target[Object.keys(target)
      .find(key => key.toLowerCase() === name.toLowerCase())]
  })

  next();
}); 
```

除了不易出错之外，这种方法还`req.query`保留了枚举操作的完整性，原始解决方案可能会创建重复的键/值对。

# android - 如何堆叠布局和透明（类和xml）

> ID：15521878
> 
> 赞同：2
> 
> 时间：2013-03-20T11:11:20.103
> 
> 标签：android, layout, transparent

我试图将两个布局相互堆叠，但我似乎做不到。我有一个 Java 类文件作为视图，在这个文件中有可以通过在屏幕上拖动来移动的球。另一个是由 Eclipse 中的图形编辑器制作的 XML 文件。

这是我用来一次显示它们的代码：

```
LinearLayout view = (LinearLayout)LayoutInflater.from(this).inflate(R.layout.main, null);
    LinearLayout layout = new LinearLayout(this);
    // Define the LinearLayout's characteristics
    layout.setGravity(Gravity.CENTER);
    layout.setOrientation(LinearLayout.VERTICAL);
    // Set generic layout parameters
    LayoutParams params = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    DrawView custom = new DrawView(this);
    layout.addView(view);
    layout.addView(custom, params); 
    setContentView(layout); 
```

但是，这确实显示了两者的观点。我唯一的问题是它们不在彼此之上。现在他们在彼此之下。此外，当它们堆叠时，有没有办法让它们都透明（看到两层）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:15:49.803

你在代码中指定你想要一个`LinearLayout`. 但是要让它的孩子重叠，你应该使用 a `RelativeLayout`（或废弃的绝对布局，甚至 a`FrameLayout`可以工作）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T11:40:32.227

使用 FrameLayout 作为父布局，然后将视图添加到父 FrameLayout。在 Frame 中，所有视图都是堆叠的。对于透明度，您可以将 alpha 设置为背景或将透明背景颜色设置为视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T11:31:56.360

您需要在顶层设置背景颜色，并在顶层使用“[带到最前面](https://stackoverflow.com/questions/4392179/how-to-bring-a-view-to-front-without-calling-bringtofront)”属性。背景颜色可以设置'#BBCCCCCC'`BB`是从`00`定义`FF`颜色的透明度。`CCCCCC`定义颜色。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T11:16:35.790

您应该使用 a`RelativeLayout`而不是 a`LinearLayout`作为父级。这将允许您将视图堆叠在一起。最后`View`添加到父级的将在顶部。要设置视图的 alpha，您可以查看[此](https://stackoverflow.com/questions/2838757/how-to-set-opacity-alpha-for-view-in-android)问题

# java - 您如何以单独的方法获取用户输入？

> ID：15521880
> 
> 赞同：1
> 
> 时间：2013-03-20T11:11:20.947
> 
> 标签：java, methods, user-input

在我的“移动”方法中，我正在向用户打印说明。在“游戏”方法中，我需要获取用户输入并使用“usersMove”方法使程序根据用户输入执行不同的操作。我最初在“移动”方法中扫描了我的用户输入，但该方法必须保持无效。有没有办法在“游戏”方法中获取用户输入，以便我可以将其值应用于其他方法？

```
public static void move()
    {
        System.out.print("What do you want to do?");
    }

public static void usersMove(String playerName, int gesture)
{
    int userMove = game(); 

    if (userMove == -1)
    {
        System.exit(0);
    }
}

public static void game()
{
    move();
    Scanner scan = new Scanner(System.in);
    int userMove = scan.nextInt();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:19:01.643

将扫描仪设为`scan`静态，同时将初始化保持在 内`game()`，然后在需要值的任何地方使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:23:33.977

首先，对于“真正的”程序来说，使用这样的静态方法确实是不好的做法，但我假设这是一个 Java 学习练习......请记住，如果你将来这样做，你'可能做错了。

使`userMove`静态，就像方法是：

```
private static int userMove = -2; // or whatever value to indicate there's no move 
```

然后只需在同一类的静态方法中使用它：

```
public static void usersMove(String playerName, int gesture)
{
    // just for fun, to catch bugs
    if (userMove < -1) {
        throw new IllegalStateException("illegal userMove value " + userMove);
    }

    if (userMove == -1)
    {
        System.exit(0);
    }
}

public static void game()
{
    move();
    Scanner scan = new Scanner(System.in);
    userMove = scan.nextInt();
} 
```

* * *

阅读例如[this](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)以了解`static`Java。

# javascript - 输入文本框字段只允许字符不允许数字但允许空格？

> ID：15521884
> 
> 赞同：0
> 
> 时间：2013-03-20T11:11:40.710
> 
> 标签：javascript

我需要文本框字段中的帮助，仅当我执行此功能的字符时才允许

```
var name = $('.fl-nameinput').val();
rePattern = /^[a-zA-Z ]+$/;
if (rePattern.test(name.value)) {
    var d = "Your name can only contain alphabets ";
    htm += "<div class='em-full wp-error-msg em-m'>" + d + "</div>" ('.wp-error-msg').css('display', 'block');
} 
```

这个函数类型数值显示错误信息就ok了。但输入完整字符时也会显示消息。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:17:53.917

您已经为 设置`value`好了`input` ，因此无需在`value`中再次分配`if condition`。

**替换**

```
if(rePattern.test(name.value) ) 
```

**和**

```
if(rePattern.test(name) ) 
```

# php - 仅返回其键位于另一个数组中的数组值

> ID：15521888
> 
> 赞同：5
> 
> 时间：2013-03-20T11:11:46.870
> 
> 标签：php, arrays

我有两个数组，看起来像：

```
$fields = array('id', 'name', 'city', 'birthday', 'money');

$values = array('id' => 10,    
    'name' => 'Jonnas',   
    'anotherField' => 'test',
    'field2' => 'aaa',
    'city' => 'Marau', 
    'field3' => 'bbb',
    'birthday' => '0000-00-00',
    'money' => 10.95
); 
```

是否有一个 PHP 内置函数可以检索仅用数组上指定的键填充的`$fields`数组`(id, name, city, birthday, money)`？

我期望的回报是这样的：

```
$values2 = array(
    'id' => 10,
    'name' => 'Jonnas',
    'city' => 'Marau',
    'birthday' => '0000-00-00',
    'money' => 10.95
); 
```

PS：我只是在寻找一个内置功能。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-20T11:14:06.900

```
$values2 = array_intersect_key($values, array_flip($fields)); 
```

如果必须始终按 的顺序返回键`$fields`，请改用简单的`foreach`循环：

```
$values2 = array();
foreach ($fields as $field) {
    $values2[$field] = $values[$field];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T11:20:28.367

[array_intersect_key — 使用键计算数组的交集以进行比较](http://www.php.net/manual/en/function.array-intersect-key.php)

```
<?php
$fields = array('id', 'name', 'city', 'birthday');

$values = array('id' => 10,    
    'name' => 'Jonnas',   
    'anotherField' => 'test',
    'field2' => 'aaa',
    'city' => 'Marau', 
    'field3' => 'bbb',
    'birthday' => '0000-00-00'
);

var_dump(array_intersect_key($fields, array_flip($values)));
?> 
```

# mootools - Mootools sortables，在拖放时禁用可排序元素上的事件

> ID：15521890
> 
> 赞同：0
> 
> 时间：2013-03-20T11:11:53.830
> 
> 标签：mootools, sortables

[http://jsfiddle.net/4byth/](http://jsfiddle.net/4byth/)

```
var mySortables = new Sortables('#sortable',
{
    clone:true,
    revert:true,
    opacity:1

}); 
```

我正在使用 sortables 允许用户通过将包含幻灯片缩略图的跨度拖动到新位置来重新排列幻灯片。这些元素是内联的。

图像周围有一个 A 标签，单击该标签可让用户编辑该幻灯片。

在某些情况下，当您释放可排序元素时，链接会被激活，当这种情况发生时，我还不太清楚。

我的问题是，是否可以在删除完成之前禁用链接，然后重新启用它，或者我应该使用不同的方法来显示它们，或者将 onclick 事件添加到我可以更轻松地删除/读取的 span 元素中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:15:03.990

您可以使用开始、完成事件来设置标志，并且只有在单击锚点时该标志为假时 - 启用编辑。

```
var is_dragging;
var mySortables = new Sortables('#sortable',
{
    clone:true,
    revert:true,
    opacity:1,
    onStart: function(){

      is_dragging = true; 
    },

    onComplete: function(){
        is_dragging = false;   
    }

});
    function onClickAnchor(){
       if(!is_dragging){
         //do stuff
       }
    } 
```

# jquery - 显示弹出窗口时，jQuery blur() 函数在 android 本机浏览器中不起作用

> ID：15521895
> 
> 赞同：0
> 
> 时间：2013-03-20T11:12:01.930
> 
> 标签：jquery

在 android 本机浏览器中，下面的代码不起作用

```
$('#address-success').on('shown', function () {  
    jQuery('input').blur();  
}) 
```

任何建议都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:15:04.920

尝试这个

如果要进行文件模糊事件，则需要使用触发器

```
$('#address-success').on('shown', function () {  
    jQuery('input').trigger('blur');
}) 
```

# node.js - DNode 服务器方法超时

> ID：15521897
> 
> 赞同：0
> 
> 时间：2013-03-20T11:12:06.513
> 
> 标签：node.js, dnode

我们希望在需要 RPC 功能的项目中使用 NodeJs DNode ( [https://github.com/substack/dnode )。](https://github.com/substack/dnode)它已经过设置和测试，似乎非常适合该项目。

一个小小的烦恼。远程功能可以是用户定义的，因此我们将无法控制逻辑。这意味着该函数可能写得不好并且需要花费过多的时间来执行，甚至可能永远不会完成（无限循环）。

**所以问题**：有没有办法在产生的服务器连接/调用上实现超时检查/事件/触发器。
例如，如果函数执行时间超过 5 秒，则中止它并向客户端返回异常信息。

注意：我们已经在客户端实现了超时逻辑，所以这不是问题。只是不希望虚假的僵尸进程无缘无故地阻塞服务器组件。

**编辑：** * *-- 添加代码示例 --* *
**服务器** （侦听端口 8000，**callMe()**函数调用**doWork()**，永无止境。）

```
var dnode = require('dnode');

function doWork(cltId) {
    console.log('Client:' + cltId);
    setTimeout(function() { doWork(cltId); }, 5000);
}

var server = dnode({
    callMe: function (cltId, cb) {
        doWork(cltId);
    }
});
server.listen(8000); 
```

**客户端**（连接到端口 8000 和 rpc **callMe()**，它永远不会返回）

```
var dnode = require('dnode');
var net = require('net');

var d = dnode();
d.on('remote', function (remote) {
    var cltId = 'c-' + Math.random().toString(16).slice(2);
    remote.callMe(cltId , function (s) {
        console.log('Result=' + n);
        d.end();
    });
});

var conn = net.connect(8000);
conn.pipe(d).pipe(conn); 
```

当客户端运行时，它会挂起，但它可以被杀死或设置超时来结束连接。所以客户可以继续做其他事情。

**但**

服务器仍然会愉快地使用我们永无止境的代码...
随着更多的客户端连接并调用闪避代码，我们最终会得到更多的虚假僵尸，直到最终我想所有的服务器资源都被消耗掉了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T01:05:07.520

我认为您对 dnode 的作用感到困惑。与 dnode 一起使用的函数只会在定义它们的一侧执行。看起来好像回调正在序列化并在连接的另一端执行，但事实并非如此。

例如，如果客户这样做：

```
var d = dnode({
  callMe: function () { while (true) }
});
d.pipe(stream).pipe(d); 
```

和服务器调用`callMe()`，客户端将挂在`while (true)`，而不是服务器上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-11T11:06:08.273

您的客户端代码可以执行以下操作：

```
d.on('remote', function (remote) {
    var cltId = 'c-' + Math.random().toString(16).slice(2);
    var t = setTimeout(function() {
        t = null;
        console.log("timed out!");
        d.end();
    }, 5e3);

    remote.callMe(cltId , function (s) {
        if(t === null) return; //too late...
        clearTimeout(t);
        console.log('Result=' + n);
        d.end();
    });
}); 
```

（未经测试！）

# java - 如何用我的字符串中的“，”替换 � 字符？

> ID：15521899
> 
> 赞同：2
> 
> 时间：2013-03-20T11:12:11.520
> 
> 标签：java, regex

我正在努力用“，”替换 � 字符

我的实际字符串是：

```
String strMine = "HOUSTON SHEPHERD� A 4000 N SHEPHERD DR� HOUSTON� TX 77018."; 
```

我的预期结果是：

```
HOUSTON SHEPHERD, A 4000 N SHEPHERD DR, HOUSTON, TX 77018. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T11:13:21.207

你可以试试这个：

```
strMine = strMine.replaceAll("[^\\x20-\\x7e]", ","); 
```

您可以在 String.replaceAll() 方法中使用该模式`[^\\x20-\\x7e]`来替换可打印 ASCII 范围之外的所有字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T11:14:49.040

你有没有尝试过这样的事情：

```
String s = "�ss";
s = s.replace('�', ','); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T11:21:12.223

您必须正确编码终端的字符。 [Pragmatic Unicode，或者，How Do I Stop The Pain](http://bit.ly/unipain)有详细信息。

**更改编码。**您应该将编码设置为 UTF-8。我相信这会解决你的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T11:33:34.037

奇怪的是逗号不能正常显示……你是从 Facebook 复制你的文字吗？将逗号从 Facebook 文本复制到 HTML 时，我遇到了同样奇怪的问题。如果是，只需删除逗号并用新逗号替换它们。

每个 HTML 字符也有一个不那么人性化的 HTML 代码；您可以尝试将逗号替换为 `&#44;`. 如需完整的 HTML 代码参考：[http ://www.tedmontgomery.com/tutorial/htmlchrc.html](http://www.tedmontgomery.com/tutorial/htmlchrc.html)

如果你想用 PHP 修改你的字符串并保留 �'s，那么

```
String strMine = "HOUSTON SHEPHERD� A 4000 N SHEPHERD DR� HOUSTON� TX 77018.";
strMine = strMine.replace("�",",") 
```

# vb.net - 在 linq 中搜索多个列

> ID：15521904
> 
> 赞同：0
> 
> 时间：2013-03-20T11:12:20.923
> 
> 标签：vb.net, linq, linq-to-sql

我是 linq 的新手。我正在尝试编写一个 linq 查询，它将搜索数据库中的 3 个字段。但是，如果任何字段为空白或什么都没有，则它不会在查询中包含该字段。

搜索对象

```
Public Class Search
    Public Property firstName As String
    Public Property surname As String
    Public Property address As String
End Class 
```

桌子

```
CREATE TABLE [dbo].[user] (
[id] [int] IDENTITY(1,1) NOT NULL,
[firstName] [nvarchar](50) NULL,
[surname] [nvarchar](50) NULL,
[fullAddress] [nvarchar](1050) NULL 
```

我的尝试，但这不会取回任何数据

```
(From it In db.user 
 Where (
     searchItems.firstName IsNot Nothing 
     AndAlso it.firstName.Contains(searchItems.firstName)) 
 AndAlso (searchItems.surname IsNot Nothing 
     AndAlso it.surname.Contains(searchItems.surname)) 
 AndAlso (searchItems.address IsNot Nothing 
     AndAlso it.fullAddress.Contains(searchItems.address)) 
 Select it).
 ToList 
```

我还需要将此限制为 250 条记录

提前感谢保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:17:25.140

您的每个字符串检查还应检查该值是否不是空字符串 ("")。如果您为每个字符串检查添加额外的检查，您应该能够完成此操作，例如：

```
(From it In db.user 
 Where (Not String.IsNullOrEmpty(searchItems.firstName)) Or (it.firstName.Contains(searchItems.firstName))
 AndAlso (Not String.IsNullOrEmpty(searchItems.surname) Or (it.surname.Contains(searchItems.surname)) 
 AndAlso (Not String.IsNullOrEmpty(searchItems.address) Or (it.fullAddress.Contains(searchItems.address)) 
 Select it).Take(250).ToList 
```

# csv - （多）Markdown 表转 CSV/TSV

> ID：15521912
> 
> 赞同：12
> 
> 时间：2013-03-20T11:12:46.623
> 
> 标签：csv, markdown, converter

我找到了一些工具/脚本来转换 CSV->(Multi)Markdown，但是有什么可以反向执行的吗？

我真的很喜欢 Markdown 中的表格，再加上 SublimeText 和 TableEditor 插件，它真的很方便——添加列、通过单元格制表符等。

但是，并不是每个人都喜欢在文本文件中编辑数据，所以我想将其转换为 ex。CSV 并为其他人导入电子表格（Google 或 Excel）。

有什么可以自动完成的，还是我应该为 pandoc/RedCarpet 创建自己的脚本/插件...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2021-04-13T09:51:53.930

[您可以使用免费的tableconvert.com 网络服务](https://tableconvert.com/)将MD 转换为 CSV

1.  转到菜单“导入”
2.  转到标签“降价”
3.  粘贴您的 MD 表
4.  点击“导入数据”
5.  现在您将在顶部区域看到表格
6.  在底部区域中，选择选项卡“,CSV”或选项卡“Excel”
7.  复制文本区域中的文本
8.  在您的电子表格应用程序中，粘贴文本（*）

(*) Excel 和格式化真实 CSV；它需要使用 GetData+delimiter(Import)

我不是 webapps 的粉丝，但不幸的是我找不到任何可以进行这种转换的文本编辑器的应用程序或插件

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-10-06T18:54:57.860

对我有用的是：

1.  将文件扩展名更改为 csv。
2.  将文件导入/打开到您的电子表格中，分隔符为“|”。
3.  如果需要，删除第 0f 行“-”或“=”和第一列。

而已。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-03-08T18:23:34.157

## 使用此代码。

```
import pandas as pd

file = open('yourmdfile.md')
data = []
for line in file.readlines():
   data.append(line.split('|'))  # provide more general splitter

df = pd.DataFrame(data=data)
df.to_csv('generated.csv') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-08T11:56:56.883

Firefox 有一个名为 TableTools2 的扩展。它允许您将 HTML 表格转换为制表符分隔值。我经常使用它来将表格复制并粘贴到 Excel 中。

我承认，这首先需要对 HTML 转换进行降价，但我认为这没问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-12T12:45:05.130

tableconvert.com 已经扩展，现在更加直观： [https ://tableconvert.com/markdown-to-csv](https://tableconvert.com/markdown-to-csv)

它甚至允许可视化您的表格，对其进行编辑并直接复制此更改的降价。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-23T07:35:00.570

您可以使用[tomroy/mdtable2csv](https://github.com/tomroy/mdtable2csv)。转换`<filename>.md`为`<filename>.csv`

```
$ mdtable2csv <filename>.md 
```

您将`<filename>.csv`在同一文件夹中看到一个。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-05-21T12:18:28.573

我有类似你的工作流程。我找到了解决方案：

1.  将我的 markdown 文档导出到 Microsoft Word（我在 Mac 上使用 nvalt 和 Byword），
2.  打开Word，复制表格
3.  粘贴到任何 CSV 程序（Microsoft Excel、Google 电子表格、Mac 编号）

缺点是我只能导出整个 Markdown 文档，然后只复制我需要的内容或删除我不需要的内容。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-10-18T09:50:35.747

FWIW 与 libreoffice，您可以直接在 calc 文档中复制/粘贴降价表。将打开一个类似于打开 CSV 文件时的 UI，带有“|” 被预选为分隔符。

# sql - 如何处理大型数据库表主键

> ID：15521917
> 
> 赞同：0
> 
> 时间：2013-03-20T11:12:53.333
> 
> 标签：sql, sql-server-2012

我在数据库中有几个表，其中自动增量 ID 字段设置为整数值。记录将每秒添加到这些表中。当我用完整数值时会发生什么？这会导致问题吗？关于如何处理快速增长的表的自动增量值的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:56:02.547

使用 type `INT`，从 1 开始，您可以获得**超过 20 亿**行可能的行——这对于绝大多数情况来说应该绰绰有余。有了`BIGINT`，你得到大约**922 万亿**（922 有 15 个零 - 922'0000 亿） - 对你来说足够了吗？

如果您使用`INT IDENTITY`从 1 开始的数据，并且每秒插入一行，那么您需要**66.5 年**才能达到 20 亿的限制......

如果您使用`BIGINT IDENTITY`从 1 开始的 a，并且每秒插入 1000 行，那么在达到 922 万亿极限之前，您需要令人难以置信的**2.92 亿年**......

[在MSDN 联机丛书](http://msdn.microsoft.com/en-us/library/ms186775.aspx)中阅读有关它的更多信息（包括所有选项）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T11:15:21.697

这是很多行。从[文档](http://msdn.microsoft.com/en-us/library/aa933198%28v=sql.80%29.aspx)：

> 从 -2^31 (-2,147,483,648) 到 2^31 - 1 (2,147,483,647) 的整数（整数）数据。存储大小为 4 个字节。int 的 SQL-92 同义词是整数。

您是否考虑过[使用 GUID 作为主键](http://www.codinghorror.com/blog/2007/03/primary-keys-ids-versus-guids.html)？

# python - Python解释器行为？

> ID：15521920
> 
> 赞同：0
> 
> 时间：2013-03-20T11:13:00.547
> 
> 标签：python, python-2.7

我正在使用 Python 2.7。

这就是发生的事情：

```
>>> 2+++2
4 
```

我不确定 python 解释器如何解释这个表达式。

我能想出的唯一原因是第一个“+”之后的连续“+”被认为是一元运算符，第一个“+”被认为是二元运算符，但实际上发生的机制是什么我不是肯定。

我希望有人根据 Python 编程语言的语法细节来回答这个问题，并报告其他一些模棱两可的表达方式。我想出了下面列出的其他一些表达式（及其结果）：

```
>>> 2------------2
4
>>> 2+-2+-2+-2+-2+-2-------------------------2
-10 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T11:15:48.313

你是对的; `2 + (++2)`正如您所料，Python 将其解释为。您可以通过查看 2+2 和 2+++2 的编译字节码来看到这一点，如下所示：

```
>>> dis.dis(lambda: 2+2)
  1           0 LOAD_CONST               2 (4)
              3 RETURN_VALUE        
>>> dis.dis(lambda: 2+++2)
  1           0 LOAD_CONST               1 (2)
              3 LOAD_CONST               1 (2)
              6 UNARY_POSITIVE      
              7 UNARY_POSITIVE      
              8 BINARY_ADD          
              9 RETURN_VALUE 
```

* * *

你可能想知道为什么 Python 会像这样解析 2++++2。首先，代码被拆分为标记：

```
>>> from cStringIO import StringIO
>>> import tokenize
>>> tokenize.generate_tokens(StringIO("2+++2").readline)
  9 <generator object generate_tokens at 0x0000000007BC7480>
>>> list(tokenize.generate_tokens(StringIO("2+++2").readline))
  10 
[(2, '2', (1, 0), (1, 1), '2+++2'),
 (51, '+', (1, 1), (1, 2), '2+++2'),
 (51, '+', (1, 2), (1, 3), '2+++2'),
 (51, '+', (1, 3), (1, 4), '2+++2'),
 (2, '2', (1, 4), (1, 5), '2+++2'),
 (0, '', (2, 0), (2, 0), '')] 
```

然后是解析器将标记列表关联到语法树中：

```
>>> st = ast.parse("2+++2")
>>> st
  36 <_ast.Module at 0x7d2acc0>
>>> ast.dump(st)
  37 'Module(body=[Expr(value=BinOp(left=Num(n=2), op=Add(), right=UnaryOp(op=UAdd(), operand=UnaryOp(op=UAdd(), operand=Num(n=2)))))])' 
```

这遵循标准的消歧规则。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T11:23:24.393

看看 Python 定义[一元](http://docs.python.org/2/reference/expressions.html#unary-arithmetic-and-bitwise-operations)和[二元](http://docs.python.org/2/reference/expressions.html#unary-arithmetic-and-bitwise-operations)算术运算的方式。尤其是一元表达式：

```
u_expr ::=  power | "-" u_expr | "+" u_expr | "~" u_expr 
```

您可以看到 part `"+" u_expr`，这几乎意味着一个数字`+`后跟一个数字是一个有效的一元表达式（有点递归，嗯？）。

另一方面，你得到了这两个：

```
m_expr ::=  u_expr | m_expr "*" u_expr | m_expr "//" u_expr | m_expr "/" u_expr
        | m_expr "%" u_expr
a_expr ::=  m_expr | a_expr "+" m_expr | a_expr "-" m_expr 
```

这几乎意味着，当你有一个二进制表达式时，你读取第一个原子，然后是符号，然后读取下一个二进制/一元表达式。读取代码如下：

```
2+-2+-2+-2+-2+---2+-2 
```

基本上像：

```
2 + (-2) + (-2) + (-2) + (-2) + (-(-(-2))) + (-2) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T11:28:36.223

[语法](http://docs.python.org/2/reference/grammar.html)上很清楚：

```
arith_expr: term (('+'|'-') term)*
term: factor (('*'|'/'|'%'|'//') factor)*
factor: ('+'|'-'|'~') factor | power 
```

因此，由于任何因素之前都可能有一个一元运算符，因此这将扩展到算术表达式使用二元运算符。这一点也不含糊，因为我们既没有 C 的 ++ 运算符，也没有 Haskell 定义新运算符的能力。

# ios - 如何从 appdelegate 呈现和关闭模态视图？

> ID：15521923
> 
> 赞同：1
> 
> 时间：2013-03-20T11:13:06.027
> 
> 标签：ios, objective-c, modal-dialog, presentmodalviewcontroller

我在我的应用程序的 appdelegate 中，在 didFinishLaunchingWithOptions 中，我想在标签栏控制器上加载一个模式导航控制器（我没有“导航控制器”类，但故事板中只有一个导航控制器有视图“segue”导航控制器的控制器）。然后我想回到标签栏控制器。在 didFinishLaunchingWithOptions 我使用了这段代码并且模态导航控制器工作正常：

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:nil];
UINavigationController *loginController = [storyboard instantiateViewControllerWithIdentifier:@"Login Controller"];
self.window.rootViewController = loginController; 
```

但是，当在我的模态视图控制器中“segue”导航控制器时，我尝试使用以下代码返回标签栏：

```
 [self dismissViewControllerAnimated:YES completion: nil]; 
```

什么都没有出现。怎么了？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T11:32:57.347

这就是我们如何设置哪个视图控制器需要成为 rootViewController（需要显示的 firstViewController）。

```
mainViewController = [[[MainViewController alloc] initWithNibName:@"MainViewController" bundle:nil] autorelease];

self.window.rootViewController = mainViewController; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-20T11:21:14.423

利用

```
[self.navigatorcontroller presentviewController: Controller]; 
```

呈现视图控制器

你可以通过

```
[self dismissViewControllerAnimated:YES completion: nil]; 
```

# php - 如何将文本减半，但保持 HTML 层次结构完整？

> ID：15521926
> 
> 赞同：2
> 
> 时间：2013-03-20T11:13:13.767
> 
> 标签：php, html, regex

我需要实现一个 RSS 提要，其中应该只显示文章文本的一半（或最多 n 个字符），但所有 HTML 标签都完好无损（例如图像或 youtube 视频）。

因此，例如，如果我将文本剪切到的字符数限制正好在 youtube 视频的代码中间（此外，在所有事物的表中），我将如何编写代码任何一个

a）允许额外的字符最多到 youtube 代码和表格的结束标记，或者

b）在表格打开之前剪切文本

这些解决方案中的任何一个都是可以接受的。

例如，如果我的文章中有这段文字：

```
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus vel eros eu mi estibulum blandit 
<table>
   <tr>
      <td>
         <iframe src="http://video.example.com"></iframe>
      </td>
   </tr>
</table>
Phasellus sollicitudin nulla imperdiet metus ullamcorper eget ornare dui rutrum. </p> 
```

假设我必须剪切到适合“ [http://video.example.com](http://video.example.com) ”中间某处的字符数。显然，只发送 iframe 标记的这一半（和表格的一半）并不好。

所以，我想出去的是

一个）

```
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus vel eros eu mi estibulum blandit </p> 
```

或 b)

```
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus vel eros eu mi estibulum blandit 
<table>
   <tr>
      <td>
         <iframe src="http://video.example.com"></iframe>
      </td>
   </tr>
</table>
</p> 
```

同样适用于在 ul 列表、div 或其他任何可能存在的中间进行剪切。唯一允许在中间剪切的是段落，因为无论如何，一切都在段落中。

我希望你知道我的意思，我不知道我是否解释得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:23:46.363

您可以获取`innerHTML()`of 元素，创建一个子字符串直到文本的一半，然后使用 再次更改它`innerHTML()`，遍历所有元素。

# php - 贝宝没有捕获购物车的一个元素

> ID：15521927
> 
> 赞同：1
> 
> 时间：2013-03-20T11:13:15.420
> 
> 标签：php, paypal

一位朋友设置了一个简单的 Paypal 表单来销售节日门票。它有 3 个必需的下拉菜单，用户可以在其中选择要参加的研讨会。现场形式在这里： http: [//gospelrising.com/festival-2013/tickets](http://gospelrising.com/festival-2013/tickets)

付款通过，一切似乎都很好，但他注意到第三个下拉列表的值没有被捕获。

什么可能导致此问题？我已经查看了 HTML，看起来还不错。我真的不熟悉 Paypal 的细微差别，因此感谢您的帮助。

# c# - 无法将类型“Neo4jClient.NodeReference<>”隐式转换为“Neo4jClient.GraphClient”

> ID：15521930
> 
> 赞同：0
> 
> 时间：2013-03-20T11:13:21.210
> 
> 标签：c#, neo4j, neo4jclient

这是一个两部分的问题

1.  当我尝试创建新节点时出现此错误

    无法将类型“Neo4jClient.NodeReference”隐式转换为“Neo4jClient.GraphClient”

我这里有 3 个类第一个连接到 GraphDB 服务器并返回客户端变量以供以后在其他类中使用

```
public GraphClient GetConnection()
        {
            var client = new GraphClient(new Uri("http://localhost:7474/db/data"));
            client.Connect();
            return client;
        } 
```

然后是 New_Node 类，看起来像这样

```
 class New_Node
    {
        public GraphClient Node { get; set; }
    } 
```

然后是具有 CreateNode 方法的 Graph Operations 类

```
public GraphClient CreateNode()
{
    Graph_Connection connection = new Graph_Connection();
    var NewNode = connection.GetConnection();
    var Created_Node = NewNode.Create(new New_Node());
    return Created_Node;
} 
```

1.  如何在另一行代码上设置节点的属性而不是使用节点创建它们，我想让我的应用程序更加动态，因为这种方式似乎很难编码

    var refA = client.Create(new Person() { Name = "Person A" });

在Java中可以做到这一点

```
Node user1 = this.graphDb.createNode(); 
user1.setProperty("name", "Mike"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T00:53:43.033

问题是您正试图将数据库连接保留在节点本身内。

这是您对节点*数据结构*的定义：

```
class New_Node
{
    public GraphClient Node { get; set; }
} 
```

这表示您需要一个名为“Node”的节点上的属性，该属性保存与包含该节点的数据库的连接。舌头扭曲了吗？我的是。

根据您的 Java 比较，我认为您希望您的节点实际上看起来像这样：

```
class New_Node
{
    public string Name { get; set; }
} 
```

这表示您想要一个具有 Name 属性的节点，该属性是一个字符串。

然后，您可以像这样创建它：

```
graphClient.Create(new New_Node { Name = "Mike" }); 
```

关于您的子问题，“1.如何在另一行代码上设置节点的属性，而不是使用节点创建它们”，当您调用时，`graphClient.Create`我们将其持久化到数据库中。任何以后的属性更改都是对数据库的更新，以及更多的调用。

只需在您的节点准备好持久化时调用 create。

```
var node = new New_Node();
... think ...
node.Name = "Mike";
... think ...
graphClient.Create(node); 
```

基本上，每次你打电话`graphClient.Something`我们都会打数据库。这是因为我们正在研究无状态 API。这与与内存中的数据库通信的 Java 驱动程序不同（假设您正在谈论嵌入式 Neo4j 实例）。

HTH。

——泰坦

# memcached - php_memcache 扩展未出现在 wamp 扩展中

> ID：15521933
> 
> 赞同：1
> 
> 时间：2013-03-20T11:13:32.487
> 
> 标签：memcached, wamp, php-extension

我有一个 php_memcache.dll 的副本，我已将它放在我的 C:\wamp\bin\php\php5.3.5\ext 文件夹中。我已经重新启动了 wamp。但是我在 wamp 的扩展列表中没有看到这个。为什么？

我什至在 php.ini 文件中添加了 extension=php_memcache.dll 。但它仍然不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T22:00:05.687

我在 WAMP 2.4 中遇到了这个问题，在命令行中运行了一个简单的 Memcache 测试脚本，但在浏览器中没有。

答案竟然是惊人的平凡：WAMP 有两个 php.ini 文件，而我编辑了错误的一个。

例如 Apache 使用了这个：c:\wamp\bin\apache\Apache2.4.4\bin\php.ini WAMP 也有这个：c:\wamp\bin\php\php5.4.12\php.ini

将 extension=php_memcache.dll 放在正确的 .ini 文件中可以解决问题。

我的线索是这样的问题是phpInfo（）的加载配置文件在两种情况下报告了不同的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:28:50.753

你在你的 php.ini 文件中设置了 extension_dir 吗？所有其他扩展都在 php.ini 中设置，就像您的 memcache 扩展一样？所有其他扩展都在 ext 文件夹中？

# sql-server - 如何查看存储的函数 - SQL Server

> ID：15521934
> 
> 赞同：21
> 
> 时间：2013-03-20T11:13:36.140
> 
> 标签：sql-server, stored-functions

版本：SQLServer 8

我想查看sqlserver中存储函数的内容，即该函数到底在做什么。

[此处](https://stackoverflow.com/questions/468672/sql-server-where-is-sys-functions)列出的所有选项都不适合我。似乎没有任何名为 sys.objects 的数据库/表。我能够查询 information_table.routines 表，但它不包含我正在寻找的函数。我的功能位于：

DBName.dbo.functionName

如何查看此功能的内容？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-20T11:15:06.940

您可以使用[sp_helptext](http://msdn.microsoft.com/en-IN/library/ms176112.aspx)命令查看定义。它只是做

> 显示用户定义的规则、默认、未加密的 Transact-SQL 存储过程、用户定义的 Transact-SQL 函数、触发器、计算列、CHECK 约束、视图或系统对象（例如系统存储过程）的定义。

例如;

`EXEC sp_helptext 'StoredProcedureName'`

**编辑：** 如果您的`databases`或`server`不同，那么您也可以通过指定它们来做到这一点

```
EXEC [ServerName].[DatabaseName].dbo.sp_helptext 'storedProcedureName' 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-20T11:36:44.873

```
select definition 
from sys.sql_modules 
where object_name(object_id) like 'functionName' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-21T22:23:59.853

```
--ShowStoredProcedures
select p.[type]
      ,p.[name]
      ,c.[definition]
  from sys.objects p
  join sys.sql_modules c
    on p.object_id = c.object_id
 where p.[type] = 'P'
   --and c.[definition] like '%foo%'
ORDER BY p.[name]
___________

SELECT OBJECT_NAME(object_id) ProcedureName,
       definition
FROM sys.sql_modules
WHERE objectproperty(object_id,'IsProcedure') = 1
ORDER BY OBJECT_NAME(object_id) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-13T11:43:09.140

是的，它工作正常。

查看存储过程... SELECT * FROM sys.procedures;

并获取 procduere 名称并使用以下查询（我使用的是 SQuirreL SQL 客户端版本 3.2.0-RC1）。

EXEC sp_helptext 'StoredProcedureName'。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-13T22:53:12.097

我宁愿使用 INFORMATION_SCHEMA.ROUTINES：

```
select ROUTINE_NAME, ROUTINE_DEFINITION, LAST_ALTERED 
from INFORMATION_SCHEMA.ROUTINES where SPECIFIC_NAME = 'usp_mysp' 
```

只需将 ROUTINE_DEFINITION 列复制到新窗口即可查看完整内容。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-09-21T07:19:28.737

无论是存储过程还是函数还是脚本下面的任何 SQL 对象都将给出完整的定义

```
USE<Your Data base>
SELECT OBJECT_DEFINITION (OBJECT_ID('<YOUR OBJECT NAME>')) AS ObjectDefinition 
```

其中**OBJECT NAME**可以是您的对象名称，例如存储过程/函数/触发器 ...等名称

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-12-24T06:32:42.537

您可以转到对象资源管理器，选择包含存储过程的数据库，然后选择“将存储过程编写为脚本”：

[![在此处输入图像描述](../Images/a9e632c344dfabb51e83b73e20aac75b.png)](https://i.stack.imgur.com/J1lbl.pngDes)

然后签入您选择的目标文件夹。

# ios - 如何通过将该视频文件拖动到ios中的项目来在ios中播放视频？

> ID：15521936
> 
> 赞同：0
> 
> 时间：2013-03-20T11:13:44.913
> 
> 标签：ios, mpmovieplayercontroller, mpmovieplayer

嗨，我想在我的项目中播放视频。实际上我知道播放视频的代码`url`。但是在这里我想通过拖动视频文件将这些音频文件放入我的项目中。我使用这段代码

```
NSString *str=[[NSBundle mainBundle]pathForResource:@"monkey" ofType:@"mp4"];
NSURL *url=[NSURL  URLWithString:str];

MPMoviePlayerViewController *movieViewObj=[[MPMoviePlayerViewController alloc]initWithContentURL:url];

[self presentMoviePlayerViewControllerAnimated:movieViewObj];

[[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(notiMethod:) name:MPMoviePlayerPlaybackDidFinishNotification object:self.moviePlayConObj]; 
```

但这不会运行`ios`.Tell 我的代码中的视频文件。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T23:07:51.057

不要使用`URLWithString:`但`fileURLWithPath:`用于从本地资源创建 NSURL。因此，将代码的第二行更改为：

```
NSURL *url=[NSURL fileURLWithPath:str]; 
```

# sql - Select 语句的输出 + 后缀

> ID：15521938
> 
> 赞同：0
> 
> 时间：2013-03-20T11:13:51.253
> 
> 标签：sql, ms-access

我有一个返回字段的 SQL 语句，有没有办法在该字段的末尾返回一个百分号。

例子：

```
Select percentage from Customer WHERE percentage > 10; 
```

有没有办法输出而不是

```
11
12
15 
```

成为

```
11 % 
12 %
15 % 
```

注意这似乎引起了混乱，但我使用的是 Access 2010。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T11:18:21.890

```
Select convert(varchar,percentage) + ' %' from Customer WHERE percentage > 10; 
```

那应该对你有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T11:18:33.917

尝试

```
SELECT [percentage] & " %" AS Expr1 FROM [Customer] WHERE [percentage] > 10; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T11:51:38.650

```
Select percentage || '%' from Customer WHERE percentage > 10; 
```

# jquery - .siblings() 的替代品

> ID：15521939
> 
> 赞同：0
> 
> 时间：2013-03-20T11:13:53.353
> 
> 标签：jquery, html

我可以使用什么来替代`.siblings()`jQuery 中的方法来遍历特定类的 div 但在单独的 div 容器中？对于这样的工作：

HTML：

```
<div id="container1">
   <div id="1"></div>
</div> 

<div id="container2">
   <div id="2"></div>
</div> 
```

JS：

```
$('#1').addClass('selected');

$('.selected').on('click',function() {
    alert('hi');
});

$('#2').addClass('selectable');

$('.selectable').on('click',function() {
   $(this).addClass('selected')
          .removeClass('selectable')
          .siblings('.selected')
          .off('click');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:25:12.380

我会以不同的方式对此进行编码：

**编辑：**

```
$('#1').addClass('selected');
$('#2').addClass('selectable');

var $outerContainer = $('#container1').parent();
$outerContainer.on('click','.selected,.selectable', function(event) {
    if ($(event.target).is(".selected")) {
        alert('hi');
    } else {        // .selectable
        $('.selected', $outerContainer)
            .removeClass('selected')
            .addClass('selectable');
        $(event.target)
            .addClass('selected')
            .removeClass('selectable');
    }
}); 
```

这是[**jsfiddle 的链接**](http://jsfiddle.net/martyk/Eu8Gj/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T11:29:21.460

可能这可能会有所帮助：

```
$('.selectable').on('click',function() {
   $(this).addClass('selected')
          .removeClass('selectable')
          .parent()
          .siblings()
          .children()
          .off('click');
 }); 
```

# php - Windows Apache2.2 PHP5 PHPMailer 错误

> ID：15521940
> 
> 赞同：0
> 
> 时间：2013-03-20T11:14:04.660
> 
> 标签：php, windows, apache, phpmailer

我一直在阅读一些较旧的问题，但尚未找到解决问题的方法。就这样吧。

我正在开发一个很酷的网站，其中包含一些邮件功能，仅限管理员用户使用。现在我正在本地主机上开发该网站，但我已经获得了一个将用于该网站的 Gmail 帐户。

我一直在网上寻找，PHPMailer 模块似乎是个不错的选择。

我的想法是使用 Gmail 帐户从我的本地主机发送电子邮件到任何其他电子邮件地址。

这是我正在使用的代码。对于Apache2.2服务器

```
LoadModule ssl_module modules/mod_ssl.so 
```

对于 php.ini

```
[mail function]
SMTP = smtp.gmail.com
smtp_port = 465
sendmail_from = admins.domaing@gmail.com 
```

和php代码

```
<?php
  date_default_timezone_set("Europe/Madrid");   
  require_once("class.phpmailer.php"); 
  $mail = new PHPMailer();
  $body             = 'It works!';
  $mail->IsSMTP();
  $mail->Host       = "smtp.gmail.com";
  $mail->SMTPDebug  = 2; 
  $mail->SMTPAuth   = true;
  $mail->SMTPSecure = "ssl";
  $mail->Host       = "smtp.gmail.com";
  $mail->Port       = 465; 
  $mail->Username   = "admins.domaing@gmail.com";
  $mail->Password   = "*********";
  $mail->SetFrom('admins.domaing@gmail.com', 'Admin');
  $mail->Subject    = "PHPMailer Test Subject via smtp (Gmail), basic"; 
  $mail->MsgHTML($body);
  $address = "user@email.com";
  $mail->AddAddress($address, "user name");
  if(!$mail->Send()) {
    echo "Mailer Error: " . $mail->ErrorInfo;
  } else {
    echo "Message sent!";
  }
?> 
```

实际上我得到的错误是：

```
Invalid XML: SMTP -> ERROR: Failed to connect to server: (0) 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:44:02.783

来自原始海报的解决方案：

只是改变

`$mail->Username = "admins.domaing@gmail.com";`

至

`$mail->Username = "admins.domaing";`

# vb.net - 当面板出现在屏幕上时使表单处于非活动状态

> ID：15521941
> 
> 赞同：0
> 
> 时间：2013-03-20T11:14:06.607
> 
> 标签：vb.net, winforms

我创建了一个包含面板（pnlOpenItem）的表单。单击“Non-inventory Non-Taxable”按钮时，面板出现。当面板出现时，我需要使表单上的所有按钮都处于非活动状态。我试过“ btn.enabled = false" 但背景颜色发生了变化，这不是我想要的。我的代码是，

```
Private Sub btnItemNonTaxable_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnItemNonTaxable.Click
    pnlOpenItem.Visible = True
    LabelNonInventory.Text = "Non-Inventory Non-Taxable"
    isOpenItem = True
    chkTax1.Visible = False
    chkTax1.Checked = False
    txtPrice.Focus()
    btnCashDrop.Enabled = False
End Sub 
```

这就是我的屏幕的样子，我想让面板出现时表单中的所有按钮都处于非活动状态

![截屏](../Images/238d96a0b4bbe7e80e656a8f57c87e1e.png)

# android - 可绘制文件夹android

> ID：15521943
> 
> 赞同：1
> 
> 时间：2013-03-20T11:14:09.730
> 
> 标签：android, image

在我的 android 项目中，我有 5 种可绘制对象：xxhpdi、xhpid、hpdi、mpdi 和 lpdi

但我不太了解女巫文件集我的图像

我看了一下这个链接：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

我需要按大小和 px/in 对图片进行分类

我的文件夹中有 ic_launcher：

xxhpdi => 144*144px

xhpdi => 96*96px

hpdi => 72*72px

mpdi => 48*48px

lpdi => 视频

但它们都在 72*72 px/in

我想知道如何在 res 文件夹中设置我的图片，为什么不只是有一个 xxhpdi 图像？我们是否总是需要有 5 张图像，它权衡了应用程序。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:15:45.250

其他答案中解释了决议。关于应用程序重量的问题，您可以通过 Android Market 为不同设备提供不同的 apk，因此特定 apk 将仅包含特定屏幕的图像。
此外，同时您不需要因为图像差异而同时开发许多分支等，只需按照[支持多屏的 Android 文档](http://developer.android.com/guide/practices/screens_support.html)并使用密钥生成单独的构建`aapt` `-c`，这将允许您只包含必要的配置每个构建..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T11:20:35.807

Android 系统将选择最接近当前设备的“密度桶”（可绘制文件夹），并将其用于最终调整到设备的确切大小。

它是为每个密度桶提供图像以确保获得最佳结果的指南，但实际上通常只需将图像添加到 1 或 2 个文件夹中，图像看起来就很好。

如果你有一些大图像使你的应用程序变得庞大的问题，因为你必须添加它们 5 次，你可以尝试只将它们添加到 1 或 2 个文件夹中。例如，xxhdpi 目前只有 nexus 10，你真的支持吗？ldpi 也不再常见了。您可以尝试仅在 xhdpi 中添加它，并且缩放可能看起来不错。

对于其余部分，您的图像不应该只是一些简单的图标，它们不应该占用太多空间。

tl;dr：是的，如果您想遵循指南以获得最佳结果，但您可能会在没有人真正注意到的情况下缩减应用程序大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T11:23:16.273

Android 有不同的屏幕分辨率，每个分辨率取决于屏幕宽度/高度。对于手机，您将相应大小的图像放在 res 文件夹中。在运行时设备本身会找到分辨率并重新调整它所需的分辨率。在某些情况下，您可能会遇到图像压缩等问题。此时，您将相应的图像大小与其对应的具有相同名称的 res 文件夹放在一起。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T08:56:43.887

我为此编写了一个小工具。（BitmapCat）它为 Android 应用程序缩放 png-、bmp- 和 jpg 图像：

*   ldpi（低密度）
*   mdpi（中等密度）
*   hdpi（高密度）
*   xhdpi（超高密度）
*   xxhdpi（超超高密度）

在这里你可以下载它：[http ://blog.axxg.de/bitmapcat-en/](http://blog.axxg.de/bitmapcat-en/)

# ios - 首次安装的应用程序图标徽章计数显示 2

> ID：15521948
> 
> 赞同：0
> 
> 时间：2013-03-20T11:14:19.533
> 
> 标签：ios, ios5, uilocalnotification, badge

我在我的应用程序中使用 UILocalNotifications，当我第一次启动应用程序时，应用程序图标上的徽章计数显示 2。当我使用 IPA 文件安装应用程序时也会发生同样的事情。如果我打开应用程序一次并进入后台然后没有显示徽章计数。我第一次使用以下代码将徽章计数设置为 0。

```
 if ( ! [[NSUserDefaults standardUserDefaults]boolForKey:@"FIRSTRUNCOMPLETE"] ) {
[UIApplication sharedApplication].applicationIconBadgeNumber=0;
[[NSUserDefaults standardUserDefaults]setBool:YES forKey:@"FIRSTRUNCOMPLETE"]; 
```

我应该怎么做才能使第一次安装的徽章计为 0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T13:25:29.850

这通常发生在您删除应用程序时（当它显示一些徽章编号时），然后重新安装它。在应用程序安装后首次运行完成后，它不应显示。如果您在设置*applicationIconBadgeNumber*后仍然看到徽章，那么问题可能出在其他地方。

# android - ld 返回 1 个退出状态 - c

> ID：15521950
> 
> 赞同：0
> 
> 时间：2013-03-20T11:14:20.307
> 
> 标签：android, c, android-ndk

我正在尝试为 android 编译 reboot.c 二进制文件，但我不断收到以下错误：

```
/home/pedja/android-ndk-r8d/toolchains/x86-4.6/prebuilt/linux-x86/bin/../lib/gcc/i686-   linux-android/4.6/../../../../i686-linux-android/bin/ld: ./obj/local/x86/objs/reboot   /reboot.o: in function main:jni/reboot.c:49: error: undefined reference to 'android_reboot'
/home/pedja/android-ndk-r8d/toolchains/x86-4.6/prebuilt/linux-x86/bin/../lib/gcc/i686-linux-android/4.6/../../../../i686-linux-android/bin/ld: ./obj/local/x86/objs/reboot  /reboot.o: in function main:jni/reboot.c:51: error: undefined reference to 'android_reboot'
/home/pedja/android-ndk-r8d/toolchains/x86-4.6/prebuilt/linux-x86/bin/../lib/gcc/i686-linux-android/4.6/../../../../i686-linux-android/bin/ld: ./obj/local/x86/objs/reboot/reboot.o: in function main:jni/reboot.c:47: error: undefined reference to 'android_reboot'
collect2: ld returned 1 exit status
make: *** [obj/local/x86/reboot] Error 1 
```

重启.c

```
 #include <errno.h>
#include <stdio.h>
#include <stdlib.h>
#include "android_reboot.h"
#include <unistd.h>

int main(int argc, char *argv[])
{
    int ret;
    int nosync = 0;
    int poweroff = 0;
    int flags = 0;

    opterr = 0;
    do {
        int c;

        c = getopt(argc, argv, "np");

        if (c == EOF) {
            break;
        }

        switch (c) {
        case 'n':
            nosync = 1;
            break;
        case 'p':
            poweroff = 1;
            break;
        case '?':
            fprintf(stderr, "usage: %s [-n] [-p] [rebootcommand]\n", argv[0]);
            exit(EXIT_FAILURE);
        }
    } while (1);

    if(argc > optind + 1) {
        fprintf(stderr, "%s: too many arguments\n", argv[0]);
        exit(EXIT_FAILURE);
    }

    if(nosync)
        /* also set NO_REMOUNT_RO as remount ro includes an implicit sync */
        flags = ANDROID_RB_FLAG_NO_SYNC | ANDROID_RB_FLAG_NO_REMOUNT_RO;

    if(poweroff)
        ret = android_reboot(ANDROID_RB_POWEROFF, flags, 0);
    else if(argc > optind)
        ret = android_reboot(ANDROID_RB_RESTART2, flags, argv[optind]);
    else
        ret = android_reboot(ANDROID_RB_RESTART, flags, 0);
    if(ret < 0) {
        perror("reboot");
        exit(EXIT_FAILURE);
    }
    fprintf(stderr, "reboot returned\n");
    return 0;
} 
```

android_reboot.h

```
#ifndef __ANDROID_REBOOT_H__
#define __ANDROID_REBOOT_H__

__BEGIN_DECLS

/* Commands */
#define ANDROID_RB_RESTART  0xDEAD0001
#define ANDROID_RB_POWEROFF 0xDEAD0002
#define ANDROID_RB_RESTART2 0xDEAD0003

/* Flags */
#define ANDROID_RB_FLAG_NO_SYNC       0x1
#define ANDROID_RB_FLAG_NO_REMOUNT_RO 0x2

int android_reboot(int cmd, int flags, char *arg);

__END_DECLS

#endif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:21:32.260

您表明您已声明`android_reboot`但您的链接失败，因为找不到该函数的实现。声明与定义不同......声明满足编译器，但只有实现满足链接器。这个功能在哪里实现？

# node.js - node.js 设置 cookie 并发送 gif 作为响应

> ID：15521951
> 
> 赞同：2
> 
> 时间：2013-03-20T11:14:22.053
> 
> 标签：node.js, pixel, httpresponse, gif

我在 node.js（基于网络信标像素）中编写了一个脚本，需要设置 cookie 并将像素发送回客户端。

我的问题是 cookie 没有设置，如果我从代码中删除发送 GIF 的部分，但我无法找到一种方法让这两个东西一起设置 cookie 并将 GIF 发送回来。

```
http = require('http');
url = require('url');

http.createServer(function(req, res){
    var requestURL = url.parse(req.url, true);
    if (requestURL.pathname == '/log.gif') {

        // Write a Cookie
        res.writeHead(200, {
            'Set-Cookie' : 'id='+requestURL.query.id+'; expires=' + new Date(new Date().getTime()+86409000).toUTCString()
        });

        var imgHex = '47494638396101000100800000dbdfef00000021f90401000000002c00000000010001000002024401003b';
        var imgBinary = new Buffer(imgHex, 'hex');
        res.writeHead(200, {'Content-Type': 'image/gif' });
        res.end(imgBinary, 'binary');

    } else {
        res.writeHead(200, {'Content-Type': 'text/plain' });
        res.end('');
    }
}).listen(8080); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T11:31:03.750

# sql - 使用 LEFT JOIN 删除

> ID：15521954
> 
> 赞同：35
> 
> 时间：2013-03-20T11:14:24.800
> 
> 标签：sql, postgresql, join, left-join

我想根据引用第一个的另一个表上存在的数据从一个表中删除，但是，我的代码可以工作并显示当我将其作为 SELECT 语句运行时要删除的值，但是当我将其更改为DELETE 它给了我错误，我不明白他们为什么在那里。

```
DELETE leadCustomer.* FROM coursework.leadCustomer LEFT JOIN coursework.flightBooking
ON leadCustomer.customerID = flightBooking.customerID
WHERE leadCustomer.customerID NOT IN (
SELECT customerID FROM (SELECT customerID, status FROM coursework.flightBooking) AS
StatusCount where status IN  ('R','H') GROUP BY customerID
)
AND leadCustomer.customerID = 8; 
```

错误：

```
ERROR:  syntax error at or near "leadCustomer"
LINE 1: DELETE leadCustomer.* FROM coursework.leadCustomer LEFT JOIN...
               ^

********** Error **********

ERROR: syntax error at or near "leadCustomer"
SQL state: 42601
Character: 8 
```

我正在使用 postgres

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2014-11-25T12:22:53.187

样本。删除表 'A' 中的记录 表 'H' 中没有记录

```
DELETE A FROM ARTICULO_ALMACEN A
LEFT JOIN HISTORICO_UNION H
ON A.COD_ARTICULO = H.COD_ARTICULO
AND A.COD_ALMACEN = H.COD_ARTICULO_ALMACEN
AND A.TPROPIEDAD1 = H.PROPIEDAD1
AND A.TPROPIEDAD2 = H.PROPIEDAD2
AND A.TPROPIEDAD3 = H.PROPIEDAD3
WHERE H.COD_ARTICULO IS NULL 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-03-20T11:22:20.313

从我看到的地方，您实际上并不需要加入来执行此操作...

```
DELETE FROM coursework.leadCustomer 
WHERE leadCustomer.customerID NOT IN (
SELECT distinct customerID FROM coursework.flightBooking  where status IN  ('R','H') 
)
AND leadCustomer.customerID = 8; 
```

它将删除leadcustomer 中的所有记录，其customerID 为：1）不同于8 2）不在表航班预订中，状态为“R”或“H”

这不是你想要做的吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-13T22:22:44.887

您将需要这样做：

从 TableA 中删除 ID in（从 tableA 中选择 ID a left outer join tableB b on a.ID = b.ID where b.ID is NULL）

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-03-20T11:22:10.157

`.*`从`leadCustomer.*` 即删除：

```
DELETE leadCustomer FROM coursework.leadCustomer LEFT JOIN coursework.flightBooking
ON leadCustomer.customerID = flightBooking.customerID
WHERE leadCustomer.customerID NOT IN (
SELECT customerID FROM (SELECT customerID, status FROM coursework.flightBooking) AS
StatusCount where status IN  ('R','H') GROUP BY customerID
)
AND leadCustomer.customerID = 8; 
```

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2013-03-20T11:35:20.183

you can try this

```
 DELETE leadCustomer FROM coursework.leadCustomer lc
 LEFT JOIN coursework.flightBooking fb ON lc.customerID = fb.customerID 
 and status IN  ('R','H')and fb.customer_id is not null
 WHERE  leadCustomer.customerID = 8; 
```

# linker - CMake：基于 BUILD_TYPE 的静态和动态链接

> ID：15521958
> 
> 赞同：3
> 
> 时间：2013-03-20T11:14:39.820
> 
> 标签：linker, cmake, libconfig

我正在开发一个小型模拟软件，它依赖于两个库，GSL 和 libconfig。作为构建系统，我使用 CMake。对于 GSL 和 libconfig，我找到了 cmake 文件并将它们复制到`cmake/`我的项目目录中。

场景如下：我希望项目有几种不同的构建类型，比如，等等`debug`，`release`还有一个自定义的`cluster`，称为假设存在。`-static``.a`

到目前为止我的`CMakeLists.txt`样子是这样的：

```
# version
SET(PACKAGE_VERSION "1.0")
SET(PACKAGE_NAME "INTERFACE")

PROJECT(interface C CXX)

CMAKE_MINIMUM_REQUIRED(VERSION 2.8)

# dirs -----------------------------------------------------

SET(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} "${CMAKE_SOURCE_DIR}/cmake")

FIND_PACKAGE(GSL REQUIRED)
INCLUDE_DIRECTORIES(${GSL_INCLUDE_DIRS})
SET(LIBS ${LIBS} ${GSL_LIBRARIES})

FIND_PACKAGE(LibConfig REQUIRED)
INCLUDE_DIRECTORIES(${LIBCONFIG_INCLUDE_DIRS})
SET(LIBS ${LIBS} ${LIBCONFIG_LIBRARIES})

CONFIGURE_FILE("res/config.h.in" "config.h")
INCLUDE_DIRECTORIES(${CMAKE_BINARY_DIR})

SET_DIRECTORY_PROPERTIES(PROPERTIES 
    ADDITIONAL_MAKE_CLEAN_FILES "config.h"
)

# compilation ----------------------------------------------

ADD_EXECUTABLE( interface
    interface.c interface.h config.h
    helpers.c 
    output.c
    lattice.c 
    genetic.c
)

# optional CFLAGS
SET(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -Wall -Wextra -pedantic -std=c99")
SET(CMAKE_C_FLAGS_RELEASE "-O3 -ffast-math")
SET(CMAKE_C_FLAGS_CLUSTER "-O3 -ffast-math -static")
SET(CMAKE_C_FLAGS_DEBUG "-g")
SET(CMAKE_C_FLAGS_PROFILE "-g -ffast-math -pg")

TARGET_LINK_LIBRARIES(interface m ${LIBS})

# installation --------------------------------------------

INSTALL(TARGETS interface DESTINATION bin) 
```

当`-static`我使用`-DCMAKE_BUILD_TYPE=cluster`. 问题是，它仍然链接`.so`到库的版本，这导致 gcc 抛出错误。至少`FindLibConfig.cmake`脚本设置了我可以使用的 a`LIBCONFIG_LIBRARY`和变量。`LIBCONFIG_STATIC_LIBRARY`

达到我的目标的最优雅或最聪明的方式是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-12-17T20:53:46.590

根据 cmake[文档](http://www.cmake.org/cmake/help/v2.8.12/cmake.html#command:add_library)，cmake 使用变量 BUILD_SHARED_LIBS 来确定 add_library() 的默认值。

如果您设置为 ON，cmake 将假定所有`add_library()`调用都为

```
add_library(target SHARED lib1 lib2 ...) 
```

例如，cmake 命令行上的 -DBUILD_SHARED_LIBS=ON 之类的东西可能会满足您的要求。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-23T11:12:53.677

我是这样解决的：

用户可以指定一个附加变量`-DSTATIC_LINKING=TRUE`。然后，脚本看起来像这样。（只显示了静态链接和编译的重要部分！）

```
# determine, whether we want a static binary
SET(STATIC_LINKING FALSE CACHE BOOL "Build a static binary?")

# do we want static libraries?
# When STATIC_LINKING is TRUE, than cmake looks for libraries ending
# with .a. This is for linux only!
IF(STATIC_LINKING)
    SET(CMAKE_FIND_LIBRARY_SUFFIXES ".a")
ENDIF(STATIC_LINKING)

# set -static, when STATIC_LINKING is TRUE and set LINK_SEARCH_END_STATIC
# to remove the additional -bdynamic from the linker line.
IF(STATIC_LINKING)
    SET(CMAKE_EXE_LINKER_FLAGS "-static")
    SET_TARGET_PROPERTIES(surface PROPERTIES 
        LINK_SEARCH_END_STATIC 1)
ENDIF(STATIC_LINKING) 
```

# ruby-on-rails - 是否可以将 Spree 与 MongoDB 集成（Ruby On Rails）

> ID：15521960
> 
> 赞同：1
> 
> 时间：2013-03-20T11:14:40.607
> 
> 标签：ruby-on-rails, mongodb, spree

我通过以下链接在我的项目中使用了 Spree， http: [//guides.spreecommerce.com/getting_started.html](http://guides.spreecommerce.com/getting_started.html)

我尝试在我的 Rails 应用程序中使用 mongoDB 和 Spree。它不适合我。是否可以将 mongoDB 与 Spree 一起使用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T11:17:22.987

根据 Ryan Bigg 的说法，不，这是不可能的。（来源：[https](https://github.com/spree/spree/issues/1971) ://github.com/spree/spree/issues/1971 ）

# java - ZipInputStream.getNextEntry 在某些 zip 文件上返回 null

> ID：15521966
> 
> 赞同：13
> 
> 时间：2013-03-20T11:14:58.270
> 
> 标签：java, unzip, zipfile, compression

我有一个简单的代码来提取 zip 文件，它按预期工作得很好，但是在我的测试中，我尝试了一些 zip 文件（我从互联网下载的字体、图标和模板）的代码，以确保它应该提取任何 zip 文件提供，但它不适用于某些 zip 文件，这是重新生成此问题的最小化代码：

```
package com.test.mytest;

import java.io.FileInputStream;
import java.util.Enumeration;
import java.util.zip.ZipEntry;
import java.util.zip.ZipFile;
import java.util.zip.ZipInputStream;

public class ZipExtractTest {

    public static final String ZIP_FILE = "/Users/XXXXX/Downloads/janne.zip";

    public static void main(String[]args) {
        unzipFile(ZIP_FILE);
        unzipStream(ZIP_FILE);
    }

    public static void unzipFile(String zipName) {
        try {

            ZipFile zf = new ZipFile(zipName);

            Enumeration ent = zf.entries();

            while(ent.hasMoreElements()) {
                System.out.println(ent.nextElement());
            }

        } catch(Exception e) {
            System.out.println(e);
        }
    }

    public static void unzipStream(String zipName) {
        try {
            ZipInputStream zis = new ZipInputStream(new FileInputStream(zipName));
            ZipEntry ze = zis.getNextEntry();

            if(ze == null) {
                System.out.println("unable to get first entry from zip file");
                zis.close();
                return;
            }

            while(ze != null) {
                System.out.println("Entry Found: " + ze);
                ze = zis.getNextEntry();
            }

            zis.closeEntry();
            zis.close();

        } catch(Exception e) {
            System.out.println(e);
        }
    }
} 
```

实际上，在我的真实应用程序中，我必须通过输入流提取 zip 文件。在上面的代码中，我试图提取“janne.zip”，我从[http://www.iconian.com/fonts/janne.zip](http://www.iconian.com/fonts/janne.zip)下载了这个文件，我可以使用任何 zip 工具提取它，并且令人惊讶的是通过“unzipFile (String zipName)" 方法，但使用 unzipStream(String zipName) 方法

```
ZipEntry ze = zis.getNextEntry(); 
```

返回空

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-20T11:48:40.737

[不是关于为什么](http://commons.apache.org/proper/commons-compress/)这个特定文件不能与`java.util.zip`.文件，它似乎工作成功。`java.util.zip.ZipInputStream` `org.apache.commons.compress.archivers.zip.ZipArchiveInputStream`

一般来说，我发现 commons-compress 比解压缩由类本身`java.util.zip`以外的工具创建的文件要可靠得多。`java.util.zip`

**编辑：**我在 Eclipse 中进行了一些调试，看起来这个特定的 zip 文件在第一个条目的本地标头的 LOC 签名 ( ) 之前有一个[*单段跨越标记*](https://stackoverflow.com/questions/12039237/how-to-check-if-zip-file-is-split-across-multiple-archives-using-pythons-zipfil)。这是 commons-compress[知道如何处理](http://svn.apache.org/viewvc/commons/proper/compress/tags/COMPRESS-1.5/src/main/java/org/apache/commons/compress/archivers/zip/ZipArchiveInputStream.java?view=markup#l315)但不知道的东西 - 如果看到除 LOC 签名之外的任何内容，则将返回。`0x30304b50``0x04034b50``java.util.zip``j.u.z.ZipInputStream``getNextEntry()``null`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-20T13:06:34.137

有趣的！

我调试了你的代码并得到了同样的错误。我在 ZipInputStream 实现中找到了标头检查，但在 ZipFile 实现中没有。

不要问我为什么，但是您的 zip 文件中的标头**无效**！

```
Your file is starting with: 50 4B 30 30 50 4B 03 04
A valid Zip File Header is: 50 4B 03 04 
```

如果您从文件中删除第一个字节（`50 4B 30 30`），您将获得一个有效的标题，您可以读取您的文件！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-13T06:58:58.670

我遇到了同样的问题！对我来说幸运的是，我能够解决它。
首先我重置数据库中的 blob 数据，然后使用 java 代码使用 ZipInputStream 对其进行压缩。虽然我不确定，但空 ZipEntry 问题可能是因为 2 件事：
1\. 数据库中的 blob 数据未正确存储（或者可能已经压缩，某些数据库在存储时压缩 blob 数据。您可以谷歌这个太）。
2.输入/输出流也会引起麻烦，看[这个](https://stackoverflow.com/questions/20540884/zipoutputstream-zipentry-return-null-when-i-try-to-dezip)

* * *

这是我所做的详细说明：
1\. 使用 EMPTY_BLOB 重置数据库中的 blob 字段并提交更改
2\. 使用下面的 java 程序使用 .xls 文件更新 blob 字段

```
DriverManager.registerDriver (new oracle.jdbc.driver.OracleDriver ()); // register driver

Connection conn =
   DriverManager.getConnection ("jdbc:oracle:thin:@my-local-database:1521:test", "test1", "test1");

// It's faster when auto commit is off: 
conn.setAutoCommit (false);

try
{
      PreparedStatement pstmt = conn.prepareStatement("update content set file_content = ? where CONTENT_ID=2006");
      File blob = new File("C:/Users/ankur/Desktop/Book1.xls");
      FileInputStream in = new FileInputStream(blob);

      pstmt.setBinaryStream(1, in); 
      pstmt.executeUpdate();
      conn.commit();
      conn.close();
      System.out.println("file updated");
}
catch (SQLException e)
{
   e.printStackTrace();
} 
```

请注意，上面的代码可以工作，但它绝对不能展示编码标准和实践。
3.使用下面的zip方法压缩数据

```
public byte[] zipByteArray(String primaryKey, byte[] input) throws IOException{
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    ZipOutputStream zos = new ZipOutputStream(baos);
    ZipEntry entry = new ZipEntry(primaryKey);
    entry.setSize(input.length);
    zos.putNextEntry(entry);
    zos.write(input);
    zos.closeEntry();
    zos.close();
    return baos.toByteArray();
} 
```

上面的方法需要一个字节数组，压缩它，放入一个 ByteArrayOutputStream。您可以选择使用 ByteArrayOutputStream 本身，由于某些要求，我将其转换为字节数组。
4\. 然后我使用准备好的语句将上面的字节数组插入到 blob 字段中
5\. 如果我使用下面给出的解压缩代码，它工作正常！

```
public byte[] unzipInputStream(InputStream is) throws IOException {
    ByteArrayOutputStream byteArrayOutputStream = null;
    ZipInputStream zipIs = new ZipInputStream(new BufferedInputStream(is));
    byteArrayOutputStream = new ByteArrayOutputStream();
    ZipEntry entry = zipIs.getNextEntry();
    while (entry != null) {
        byte[] tmp = new byte[2048];
        BufferedOutputStream bos = null;
        bos = new BufferedOutputStream(byteArrayOutputStream);
        int size = 0;
        while ((size = zipIs.read(tmp)) != -1) {
            bos.write(tmp, 0, size);
        }
        bos.flush();
        bos.close();
        entry = zipIs.getNextEntry();
    }
    zipIs.close();
    return byteArrayOutputStream.toByteArray(); 
```

上述方法的输出是解压后的数据。

# android - GridView 中的方形单元格

> ID：15521967
> 
> 赞同：0
> 
> 时间：2013-03-20T11:15:03.867
> 
> 标签：android, android-gridview

我在我的应用程序中使用 GridView：

```
<GridView
    android:id="@+id/main_grid_view"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:numColumns="4" >
</GridView> 
```

此 GridView 中的每个单元格都是 ImageView：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:id="@+id/img"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:contentDescription="@string/img"
        android:scaleType="centerCrop" />

</RelativeLayout> 
```

我的 GridView 中的所有单元格必须是方形的（高度必须等于宽度）并且图像必须适合单元格。但它总是看起来像矩形......我如何在 GridView 中实现方形单元格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:05:06.490

确保你的单元格是方形的。

为此，您可以使用值 screen_width/4 以编程方式设置 RelativeLayout 的宽度和高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-18T15:00:47.297

正如这里的答案中提到的 -[具有两列和自动调整大小图像的 Gridview](https://stackoverflow.com/questions/15261088/gridview-with-two-columns-and-auto-resized-images/15264039#15264039)

您可以为此制作自定义 ImageView

```
public class SquareImageView extends ImageView {

public SquareImageView(Context context) {
    super(context);
}

public SquareImageView(Context context, AttributeSet attributeSet) {
    super(context, attributeSet);
}

public SquareImageView(Context context, AttributeSet attributeSet, int defStyle) {
    super(context, attributeSet, defStyle);
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);

    if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_PORTRAIT) {
        setMeasuredDimension(getMeasuredWidth(), getMeasuredWidth());
    } else {
        setMeasuredDimension(getMeasuredHeight(), getMeasuredHeight());
    }
}
} 
```

然后在您的网格视图单元格布局中使用它作为

```
<package_containing_SquareImageView.SquareImageView
    android:layout_width="match_parent"
    android:layout_height="match_parent" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-22T09:57:21.617

这可以解决问题

```
@Override public void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    int width = MeasureSpec.getSize(widthMeasureSpec);
    int height = MeasureSpec.getSize(heightMeasureSpec);
    int size = width > height ? height : width;
    setMeasuredDimension(size, size);
} 
```

# c# - ItextSharp 的 PDF 合并

> ID：15521972
> 
> 赞同：2
> 
> 时间：2013-03-20T11:15:19.333
> 
> 标签：c#, itextsharp

我如何将多个 pdf 页面合并为一个页面，`iTextSharp`该页面还支持合并具有,等***表单***元素的页面。`textboxes``checkboxes`

我通过谷歌搜索尝试了很多，但没有一个效果很好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T12:51:44.350

请在此处查看我的答案[Merging Memory Streams](https://stackoverflow.com/questions/6778721/merging-memory-streams-to-create-a-http-pdf-response-in-c-sharp/6780582#6780582)。我举了一个如何将 PDF 与 itextsharp 合并的例子。

要更新表单字段名称，请添加此代码，该代码使用压模更改表单字段名称。

```
/// <summary>
/// Merges pdf files from a byte list
/// </summary>
/// <param name="files">list of files to merge</param>
/// <returns>memory stream containing combined pdf</returns>
public MemoryStream MergePdfForms(List<byte[]> files)
{
    if (files.Count > 1)
    {
        string[] names;
        PdfStamper stamper;
        MemoryStream msTemp = null;
        PdfReader pdfTemplate = null;
        PdfReader pdfFile;
        Document doc;
        PdfWriter pCopy;
        MemoryStream msOutput = new MemoryStream();

        pdfFile = new PdfReader(files[0]);

        doc = new Document();
        pCopy = new PdfSmartCopy(doc, msOutput);
        pCopy.PdfVersion = PdfWriter.VERSION_1_7;

        doc.Open();

        for (int k = 0; k < files.Count; k++)
        {
            for (int i = 1; i < pdfFile.NumberOfPages + 1; i++)
            {
                msTemp = new MemoryStream();
                pdfTemplate = new PdfReader(files[k]);

                stamper = new PdfStamper(pdfTemplate, msTemp);

                names = new string[stamper.AcroFields.Fields.Keys.Count];
                stamper.AcroFields.Fields.Keys.CopyTo(names, 0);
                foreach (string name in names)
                {
                    stamper.AcroFields.RenameField(name, name + "_file" + k.ToString());
                }

                stamper.Close();
                pdfFile = new PdfReader(msTemp.ToArray());
                ((PdfSmartCopy)pCopy).AddPage(pCopy.GetImportedPage(pdfFile, i));
                pCopy.FreeReader(pdfFile);
            }
        }

        pdfFile.Close();
        pCopy.Close();
        doc.Close();

        return msOutput;
    }
    else if (files.Count == 1)
    {
        return new MemoryStream(files[0]);
    }

    return null;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-14T22:55:57.907

这是我的 Jonathan 合并代码的简化版本，添加了命名空间并删除了标记。

```
public IO.MemoryStream MergePdfForms(System.Collections.Generic.List<byte[]> files)
{
    if (files.Count > 1) {
        using (System.IO.MemoryStream msOutput = new System.IO.MemoryStream()) {
            using (iTextSharp.text.Document doc = new iTextSharp.text.Document()) {
                using (iTextSharp.text.pdf.PdfSmartCopy pCopy = new iTextSharp.text.pdf.PdfSmartCopy(doc, msOutput) { PdfVersion = iTextSharp.text.pdf.PdfWriter.VERSION_1_7 }) {
                    doc.Open();
                    foreach (byte[] oFile in files) {
                        using (iTextSharp.text.pdf.PdfReader pdfFile = new iTextSharp.text.pdf.PdfReader(oFile)) {
                            for (i = 1; i <= pdfFile.NumberOfPages; i++) {
                                pCopy.AddPage(pCopy.GetImportedPage(pdfFile, i));
                                pCopy.FreeReader(pdfFile);
                            }
                        }
                    }
                }
            }

            return msOutput;
        }
    } else if (files.Count == 1) {
        return new System.IO.MemoryStream(files[0]);
    }

    return null;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T12:43:27.397

要合并 PDF，请参阅“[使用 itextsharp 将两个 pdf 页面合并为一个](http://forums.asp.net/t/1692347.aspx/1)”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T15:40:49.977

下面是我的 pdf 合并代码。感谢**Jonathan**提供关于重命名字段的建议，这解决了将 pdf 页面与表单字段合并时的问题。

```
 private static void CombineAndSavePdf(string savePath, List<string> lstPdfFiles)
    {
        using (Stream outputPdfStream = new FileStream(savePath, FileMode.Create, FileAccess.Write, FileShare.None))
        {

            Document document = new Document();
            PdfSmartCopy copy = new PdfSmartCopy(document, outputPdfStream);
            document.Open();
            PdfReader reader;
            int totalPageCnt;
            PdfStamper stamper;
            string[] fieldNames;
            foreach (string file in lstPdfFiles)
            {
                reader = new PdfReader(file);
                totalPageCnt = reader.NumberOfPages;
                for (int pageCnt = 0; pageCnt < totalPageCnt; )
                {
                     //have to create a new reader for each page or PdfStamper will throw error
                    reader = new PdfReader(file);
                    stamper = new PdfStamper(reader, outputPdfStream);
                    fieldNames = new string[stamper.AcroFields.Fields.Keys.Count];
                    stamper.AcroFields.Fields.Keys.CopyTo(fieldNames, 0);
                    foreach (string name in fieldNames)
                    {
                        stamper.AcroFields.RenameField(name, name + "_file" + pageCnt.ToString());
                    }
                    copy.AddPage(copy.GetImportedPage(reader, ++pageCnt));                     
                }
                copy.FreeReader(reader);                    
            }
            document.Close();
        }
    } 
```

# android - 将图像作为最佳过程发送到服务器

> ID：15521973
> 
> 赞同：1
> 
> 时间：2013-03-20T11:15:19.960
> 
> 标签：android, android-camera, android-image

我正在捕获图像并将其保存到 SD 卡中，一切正常。但是我需要发送这个图像可能是一个字符串或base64或utf-8以及一些其他数据，如用户名、密码。告诉我如何处理该数据变量并使用http请求将其发送到服务器

```
@Override
public void onPictureTaken(byte[] data, Camera camera) {

    File pictureFileDir = getDir();

    if (!pictureFileDir.exists() && !pictureFileDir.mkdirs()) 
    {
        Toast.makeText(context, "Can't create directory to save image.",Toast.LENGTH_LONG).show();
        return;
    }

    String photoFile = "MyPicture.jpg";
    String filename  = pictureFileDir.getPath() + File.separator + photoFile;
    File pictureFile = new File(filename);
    //Need to send this data to server     
    data.toString();

    try 
    {
        FileOutputStream fos = new FileOutputStream(pictureFile);
        fos.write(data);
        fos.close();
        Toast.makeText(context, "New Image saved:" +        photoFile,Toast.LENGTH_LONG).show();
    }
    catch (Exception error) 
    {
        Toast.makeText(context, "Image could not be saved.",Toast.LENGTH_LONG).show();
    }
    public void postData(String emailId,String passwrd) {
            // Create a new HttpClient and Post Header
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost("http://XXXXAAAA.com/login");

            try {
                // Data that I am sending
                List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
                nameValuePairs.add(new BasicNameValuePair("mb_code", emailId));
                nameValuePairs.add(new BasicNameValuePair("pwd", passwrd));
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                // Execute HTTP Post Request
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                HttpResponse response = httpclient.execute(httppost);
                responseBody = EntityUtils.toString(response.getEntity());

                Log.d("result", responseBody);
            } 
            catch (Throwable t ) {
                //Toast.makeText( getApplicationContext(),""+t,Toast.LENGTH_LONG).show();
                Log.d("Error Time of Login",t+"");
            } 
        }
           } 
```

# android - android从我的应用程序中打错了

> ID：15521976
> 
> 赞同：0
> 
> 时间：2013-03-20T11:15:29.290
> 
> 标签：android, phone-call

我需要从我的应用程序向某个预定义的电话号码拨打电话，并且在一段时间间隔后，比如说在它开始响铃 10 秒后，我想自动终止这个呼叫，留下一个错误的电话。这可能吗？我使用以下代码开始通话

```
 try {
            Intent callIntent = new Intent(Intent.ACTION_CALL);
            callIntent.setData(Uri.parse("tel:"+phoneNumber);
            startActivity(callIntent);
        } catch (ActivityNotFoundException e) {
            Log.e("helloandroid dialing example", "Call failed", e);
        } 
```

但我不知道如何停止这个特殊的电话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:31:07.400

成功发起呼叫后。`endCall()`在您想要的时间间隔过去后，您始终可以使用它来断开它。

阅读此主题并在此站点上搜索类似主题： [https ://stackoverflow.com/a/9987399/2021499](https://stackoverflow.com/a/9987399/2021499)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T12:18:33.443

首先，您需要发起呼叫并监控其状态，然后在特定时间以编程方式结束呼叫。

你已经知道如何了`initiate the call`，我`PhoneStateListener`在`monitor`它的状态中添加了一个，并且我还添加了一个`code snippet`描述如何的`end call programmatically`。

发起呼叫，

```
 private void establishCall()
{
            TelephonyManager tManager = (TelephonyManager) 
              getSystemService(Context.TELEPHONY_SERVICE);
    if (tManager .getSimState() != TelephonyManager.SIM_STATE_ABSENT)
    {                   

        try {
            Intent callIntent = new Intent(Intent.ACTION_CALL).addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            callIntent.setData(Uri.parse("tel:"+phoneNumber));
            startActivity(callIntent);

            ListenToPhoneState listener = new ListenToPhoneState();
            tManager.listen(listener, PhoneStateListener.LISTEN_CALL_STATE);
        } catch (Exception e) {
            Log.e("Call failed", e.toString());
        }

    }
    else 
    {
        Toast.makeText(this, "Insert a Simcard into your device.", Toast.LENGTH_LONG).show();
    }
} 
```

这是监听器的代码，

```
 private class ListenToPhoneState extends PhoneStateListener {

        boolean callEnded=false;
        public void onCallStateChanged(int state, String incomingNumber) {

            switch (state) {
            case TelephonyManager.CALL_STATE_IDLE:
                UTILS.Log_e("State changed: " , state+"Idle");

                break;
            case TelephonyManager.CALL_STATE_OFFHOOK:
                UTILS.Log_e("State changed: " , state+"Offhook");
                callEnded=true;
                break;
            case TelephonyManager.CALL_STATE_RINGING:
                UTILS.Log_e("State changed: " , state+"Ringing");

        //apply your logic here to wait for few seconds before calling killCall(this) function to end call

                break;

            default:
                break;
            }
        }

    } 
```

这是结束当前通话的代码

```
public boolean killCall(Context context) {
try {
   // Get the boring old TelephonyManager
   TelephonyManager telephonyManager =
      (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);

   // Get the getITelephony() method
   Class classTelephony = Class.forName(telephonyManager.getClass().getName());
   Method methodGetITelephony = classTelephony.getDeclaredMethod("getITelephony");

   // Ignore that the method is supposed to be private
   methodGetITelephony.setAccessible(true);

   // Invoke getITelephony() to get the ITelephony interface
   Object telephonyInterface = methodGetITelephony.invoke(telephonyManager);

   // Get the endCall method from ITelephony
   Class telephonyInterfaceClass =  
       Class.forName(telephonyInterface.getClass().getName());
   Method methodEndCall = telephonyInterfaceClass.getDeclaredMethod("endCall");

       // Invoke endCall()
       methodEndCall.invoke(telephonyInterface);

   } catch (Exception ex) { // Many things can go wrong with reflection calls
      Logger.e("PhoneStateReceiver **" + ex.toString());
      return false;
   }
   return true;
} 
```

在清单内需要以下权限，

```
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.CALL_PHONE" /> 
```

我希望它会有所帮助！

# java - QRGen库导入无法解决

> ID：15521977
> 
> 赞同：1
> 
> 时间：2013-03-20T11:15:32.023
> 
> 标签：java, import, qr-code, zxing

我正在尝试使用 QRGen 库和 ZXing 在 Java 中生成 QR 码。我按照[这个 stackoverflow question](https://stackoverflow.com/questions/9257038/how-to-create-qrcode-using-java-j2se)的说明进行操作。我包括以下三个库：

zxing-core-1.7.jar , zxing-javase-1.7.jar , qrgen-1.0.jar

并将它们添加到构建路径中。

但是`net.glxn.qrgen.QRCode`无法解析从 QRGen 库的导入。因此我不能使用诸如`QRCode.from("...")`etc之类的方法。

有谁知道为什么这个导入不起作用？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:28:50.103

v 1.2 可通过 maven Central 获得。

看到这个评论：[https ://stackoverflow.com/a/16195951/439021](https://stackoverflow.com/a/16195951/439021)

# android - 如何在android中使图像可见区域可点击？

> ID：15521978
> 
> 赞同：0
> 
> 时间：2013-03-20T11:15:33.200
> 
> 标签：android

我正在使用三角形按钮（PNG 图像），我只需要在图像可见区域上点击即可。正如您在下面我的三角形按钮的图像中看到的那样，在图像中，我只需要在图像可见部分（即黑色和红色）上使其可点击，绿色区域将保持透明且不可点击。请在这方面帮助我，我会非常感谢你。提前致谢。

![在此处输入图像描述](../Images/af6aba20d88db95d07619e0e13e95a4a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:22:08.680

[识别Android中点击的图像区域？](https://stackoverflow.com/questions/3078794/identifying-image-area-clicked-in-android)检查这个问题

或者如果绿色是透明的，我认为检测图像的“可见”内容是否被点击的最简单方法是连接 OnTouchListener，获取触摸坐标，然后使用 Bitmap.getPixel(int x，整数 y)。由于这将返回 ARBG 颜色，因此使用 alpha 通道的图像应该没有什么问题。任何“透明”（如果绿色将是透明的？）都将无效，其他所有内容都意味着实际内容已被点击。

像这样的启动：

```
int color = Bitmap.getPixel(x,y); // x and y are the location of the touch event in Bitmap space
int alpha = Color.getAlpha(color);
boolean isTransparent = (alpha==0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:24:11.697

你可以参考这个链接：

[图像映射](http://catchthecows.com/?p=113)

或者你也可以参考这个类似的问题：

[关联](https://stackoverflow.com/questions/3961071/android-how-to-make-a-clickable-map-image-with-each-country-producing-a-differe)

但是，我不建议您这样做，因为您必须手动计算坐标，并且除了那个 android 屏幕有不同的尺寸之外，它可能会给您带来问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T11:24:40.497

您可以将[OnTouchListener](http://developer.android.com/reference/android/view/View.OnTouchListener.html)设置为您的[View](http://developer.android.com/reference/android/view/View.html)并检查是否在三角形内部单击（OnTouch 事件发送 MotionEvent[对象](http://developer.android.com/reference/android/view/MotionEvent.html)，您可以从中获取触摸事件的坐标）。

可能会更好，如果按钮可以点击为矩形？就像这里一样，在 stackoverflow 上，投票按钮也有三角形形式，但它们在矩形形状上是可点击的。

# python - Zsh/Bash：路径不是它应该的样子

> ID：15521980
> 
> 赞同：0
> 
> 时间：2013-03-20T11:15:39.680
> 
> 标签：python, bash, dropbox, zsh

我偶然发现了一些我无法弄清楚的东西。以下情况：我通过命令行（dropbox.py）下载了python前端来控制dropbox。我把这个文件放在文件夹中：

```
/home/username1/.dropbox-dist/dropbox.py 
```

我在 /usr/bin 中创建了一个名为“dropbox”的简单 bash 脚本：

```
#!/bin/bash

python /home/username1/.dropbox-dist/dropbox.py 
```

现在，当我运行它时，会发生以下情况：

文件的 whereis：

```
root@linux_remote /home/username1 # whereis dropbox
dropbox: /usr/bin/dropbox 
```

当我运行它时：

```
root@linux_remote /home/username1 # dropbox
zsh: no such file or directory: /home/username2/.dropbox-dist/dropboxd 
```

是的。它告诉我另一个用户名。具体来说：我在这个 linuxbox 上通过 SSH 登录。在远程外壳上有 byobu 正在运行。在 byobu 中运行 zsh。Username2 等于我当前在本地 linuxbox 上登录的用户，我与之连接：

```
username2@linux_local /home/username2 # ssh username1@linux_remote 
```

我就是这样连接的。

所以必须有一个变量从我的本地 shell 传递给我的远程 shell，python 似乎可以读取它，但我不知道它会是哪个。

现在..看一下：当我输入我写入 bash 脚本的命令时：

```
username2@linux_remote /home/username2 # python /home/username1/.dropbox-dist/dropbox.py
Dropbox command-line interface 
```

所以如果我手动执行它就会运行。另一件事：如果我用整个路径运行它，它也可以：

```
root@linux_remote /home/username1 # /usr/bin/dropbox
Dropbox command-line interface 
```

如果我通过 login-shell 运行它，它确实有效，例如使用“bash -l”然后尝试运行“dropbox”。

如果我将 hashbang 更改为“#!/usr/bin/zsh”，它也不起作用

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T11:39:04.450

`whereis`不会按照你的想法做：它搜索一组特定的目录，而不是`$PATH`. `which`搜索`$PATH`，因此您需要使用`which`来找出哪个可执行文件将以给定名称执行。

编辑：`which`作为外部程序（对于没有内置命令的外壳，例如`bash`）在某些情况下不会给出正确的答案，例如外壳别名。应该使用`type`内置函数（它也应该更广泛地可用，因为它是 POSIX 强制要求的，但不一定作为内置函数）。

# java - 使 java.text.DateFormat 解析为 java.util.Calendar

> ID：15521981
> 
> 赞同：2
> 
> 时间：2013-03-20T11:15:40.740
> 
> 标签：java, date, calendar, date-format, date-parsing

通常，我是这样做的：

```
DateFormat f = new SimpleDateFormat("yyyy-MM-dd");
Date d = f.parse("2012-12-21");
Calendar c = Calendar.getInstance();
c.setTime(d);
bean.setDate(c); 
```

但我刚刚找到了可行的解决方案：

```
DateFormat f = new SimpleDateFormat("yyyy-MM-dd");
f.parse("2012-12-21");
bean.setDate(f.getCalendar()); 
```

为什么在[doc](http://docs.oracle.com/javase/6/docs/api/java/text/DateFormat.html)中没有指定[`parse()`](http://docs.oracle.com/javase/6/docs/api/java/text/DateFormat.html#parse%28java.lang.String%29)（例如）在解析后*记住*值而不是简单地返回它？这是一个不好的方法吗？感觉自己被背叛了这么多年……

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T11:31:47.817

日历是可变的，如果您使用相同的 SimpeDateFormat 实例解析新日期，您的 bean 的日期/日历可能会改变

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T11:30:22.160

我认为这很糟糕。`DateFormat`具有`Calendar`用于在解析期间设置日期的实例。`setCalendar`例如，如果您想为另一个区域设置实例，则可以使用方法设置此实例。在解析日期之后，这个实例只是停留在以前的状态，也就是在当前的实现中，将来这个值可能会在`parse`方法返回后被清除，所以我不会依赖这个实现。`getCalendar()`实际上是使用的，因此您可以查看当前`Callendar`正在使用的“种类”、区域设置等，但不是为了获取当前值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T11:47:09.303

我认为您不需要从 Calendar 创建实例并直接使用 dateFormat ：

```
DateFormat f = new SimpleDateFormat("yyyy-MM-dd");
f.format(f.parse("2012-12-21"));
bean.setDate(f.getCalendar()); 
```

# javascript - 如果纬度和经度在 XML 中可用，则获取所有值

> ID：15521988
> 
> 赞同：2
> 
> 时间：2013-03-20T11:15:56.977
> 
> 标签：javascript, html, xml, xpath

**XML 文件**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<results>
    <result>
        <Country_Code>IN</Country_Code>
        <Country_Name>India</Country_Name>
        <Region_Name>Gujarat</Region>
        <City>Rajkot</City> 
        <lat>13.060422</lat>
        <lng>80.24958300000003</lng>
    </result>
    <result>
        <Country_Code>KE</Country_Code>
        <Country_Name>Kenya</Country_Name>
        <Region_Name>Vihiga</Region>
        <City>Kakamega</City> 
        <lat>0.1182473</lat>
        <lng>34.7334515999997</lng>
    </result>
</results> 
```

我想在文本框中输入`latitude`和`longitude`，然后在我的 xml 文件中进行匹配，它会返回所有详细信息，例如：-

```
country_code country_name region_name city lat and lng 
```

有价值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:27:14.537

试试这个朋友。

```
<html>
<head>
<script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
<p id="someElement"></p>
<p id="anotherElement"></p>
<script>
var xml = "<rss version='2.0'><channel><title>RSS Title</title></channel></rss>",
xmlDoc = $.parseXML( xml ),
$xml = $( xmlDoc ),
$title = $xml.find( "title" );
/* append "RSS Title" to #someElement */
$( "#someElement" ).append( $title.text() );
/* change the title to "XML Title" */
$title.text( "XML Title" );
/* append "XML Title" to #anotherElement */
$( "#anotherElement" ).append( $title.text() );
</script>
</body>
</html> 
```

# mysql - 从 MySQL 的连接中获取仅在一个表中的元素

> ID：15521993
> 
> 赞同：0
> 
> 时间：2013-03-20T11:16:06.667
> 
> 标签：mysql, join

我有两个表，network_permissions 和 device_permissions，如下所示：

```
NETWORK_PERMISSIONS
user_id network_id  perm
1        1           3
1        2           4
2        3           3
2        2           1
3        2           1
4        2           3

DEVICES_PERMISSIONS
user_id network_id  device_id   perm
1        2           2           1
2        2           2           1 
```

现在，我只取 net=2 的 user_id 位于 network_permissions 表中（在 perm=3 的用户中），但不在 device_permissions 中。

在这种情况下，我会得到： 3 因为是在 net=2 的 network_permission 表中具有 perm!=3 的用户，但在 device_permissions 表中不存在。

抱歉，如果它感到困惑...谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:24:16.083

```
Select NETWORK_PERMISSIONS.network_id FROM NETWORK_PERMISSIONS LEFT JOIN DEVICES_PERMISSIONS on NETWORK_PERMISSIONS.network_id = DEVICES_PERMISSIONS.network_id AND NETWORK_PERMISSIONS.user_id = DEVICES_PERMISSIONS.user_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:24:32.087

SELECT n.user_id FROM network_permissions AS n Left JOIN devices_permissions AS d ON n.user_id = d.user_id WHERE d.user_id is null and n.network_id=2 and n.perm=3