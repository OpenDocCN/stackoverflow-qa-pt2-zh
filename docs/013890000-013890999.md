# StackOverflow 问答 13890000-13890999

# php - 从 csv 回显两个数组

> ID：13890000
> 
> 赞同：1
> 
> 时间：2012-12-15T06:33:36.033
> 
> 标签：php, csv

我有来自 data.csv 的 2 个数组我如何使用 while 循环打印出两个数组我只能打印出第一个数组并且它保持循环相同的数组。

```
 $file = fopen("data.csv","r");

        while(!feof($file)){
          print_r(fgetcsv($file));
          }

        fclose($file);

////////////////////////////////////////////////////////////////
    $file=fgetcsv($file);
    $num=0;

    while($num<4){
        echo $file[0] . $file[1] . $file[2] . $file[3] . "<br/>";
        $num++;
        }

         ////////////////////////////////////////////////////////////  
            Array
            (
            [0] => a
            [1] => b
            [2] => c
            [3] => d
            )
            Array
            (
            [0] => e
            [1] => f
            [2] => g
            [3] => h
            ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T07:49:03.447

试试这个来完成你的任务

```
$source = fopen('zipcode.csv', 'r') or die("Problem open file");
    while (($data = fgetcsv($source, 1000, ",")) !== FALSE)
    {
        $col1 = $data[0];
        $col2 = $data[1];
        $col3 = $data[2];

        echo $col1 . ' ' . $col2 . ' ' . $col3 . '<br />';

    }
    fclose($source); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T07:34:46.517

您的 while 循环将输出相同的内容 4 次。我想你想做类似“

```
while($num<4)
{ echo $file[$num]."<br>";
$num++;
} 
```

# apache - Apache：普通虚拟主机的一个子域，第二个虚拟主机的其他子域

> ID：13890005
> 
> 赞同：2
> 
> 时间：2012-12-15T06:35:01.340
> 
> 标签：apache

尽管我努力尝试设置测试服务器，但如果我错过了一些简单的事情，请原谅我，因为我仍然不是配置 Apache 的专家。

# 背景

我有两个要求：

1.  请求`subdomain.domain.com`应从`/var/www/html/subdomain`
2.  请求`code.domain.com`应由*同一系统上的另一台服务器处理，具有不同的端口*。请注意，这`code`是一个固定的子域，不应按照与第一个要求相同的规则进行处理。换句话说，`mysite.domain.com`应该从 提供服务`/var/www/html/mysite`，并且`xyz.domain.com`应该从 提供服务`/var/www/html/xyz`，但是`code.domain.com`处理方式完全不同。

# 尝试过的事情

要做＃1，我使用`VirtualDocumentRoot /var/www/html/%1`. 对于#2，我只希望`code`子域使用完全不同的配置，将流量重定向到同一系统上端口 5000 上的另一台服务器，使用`ProxyPass`和`ProxyPassReverse`.

# 结果

所有请求都根据第一个`<VirtualHost>`容器通过 Proxy 指令重定向，即使使用的子域不是 NOT `code`。

虽然`code`vhost 在配置中是第一个，但如果子域不是 NOT ，则不应使用它`code`，因为客户端请求的 ServerName 不是`code.domain.com`。

# 问题

*如何协调这两种配置，以便一个特定的子域使用一个虚拟主机，而其他子域使用另一台虚拟主机？*

# 配置

```
<VirtualHost *:80>
    ServerName code.domain.com
    ServerAlias code.local
    ServerAdmin foo@domain.com
    DocumentRoot /var/www/repos
    ErrorLog logs/code.domain.com
    CustomLog logs/code-access common
    ProxyPass / http://localhost:5000/
    ProxyPassReverse / http://localhost:5000/
    <Directory "/var/www/repos">
       DAV On
       Options +Indexes +FollowSymLinks
       AllowOverride All
       Allow from all
       Order allow, deny
    </Directory>
</VirtualHost>

<VirtualHost *:80>
    UseCanonicalName Off
    VirtualDocumentRoot /var/www/html/%1
    VirtualScriptAlias /var/www/html/%1/cgi-bin
    LogFormat "%V %h %l %u %t \"%r\" %s %b" vcommon
    CustomLog logs/access_log vcommon
    ServerName domain.com
    ServerAlias localhost
    ServerAdmin foo@domain.com
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T06:43:31.873

解决你的问题应该不会太难。

首先交换两个虚拟主机。第一个是每次默认的。因此，如果没有规则匹配，则每个调用都将作为此虚拟主机处理。

其次，让 mod rewrite 将请求移动到正确的目录或为每个有效域创建一个虚拟主机。最后一个更简单，允许您拥有单独的日志文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T04:02:57.957

我找到了一个非常适合我的配置。我删除了整个 vhost 配置并将其替换为：

```
<VirtualHost *:80>
    ServerAdmin foo@domain.com
    VirtualDocumentRoot /var/www/html/%-3+
    ServerName domain.com
    ServerAlias localhost
    CustomLog logs/domain.com-access "%V -> %u@%h (%t): %Bb %Dmu"
    ErrorLog logs/error_log
</VirtualHost> 
```

在 /var/www/html/code/.htaccess 中，我使用 mod_rewrite 中的 P 标志来根据需要代理我的流量。

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteRule ^(.*)$ http://localhost:5000/$1 [L,P]
</IfModule> 
```

`%-3+`in的使用`VirtualDocumentRoot`意味着[我还可以在 URL 中使用多个点](http://httpd.apache.org/docs/2.2/mod/mod_vhost_alias.html)来访问名称中带有点的目录。例如，`anothersite.com`可以使用 访问测试服务器`anothersite.com.domain.com`，并且从 提供文件`/var/www/html/anothersite.com`。

有两个陷阱：

1.  这仅适用于通配符 CNAME 记录。
2.  `www.domain.com`并且`domain.com`请求的行为不同。

# php - 什么是mysql链接标识符，它的重要性是什么？

> ID：13890006
> 
> 赞同：0
> 
> 时间：2012-12-15T06:35:16.710
> 
> 标签：php, mysql

我进行了很多搜索，但没有找到合适的答案。

我用过这个：

```
 $con=mysql_connect('localhost','root','');
  mysql_select_db('db_name',$con); 
```

我也用过这个：

```
 $con=mysql_connect('localhost','root','');
  mysql_select_db('db_name'); 
```

两者都对我有用。它们之间有什么区别，它们的优缺点是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T06:52:31.647

> 它们之间有什么区别，它们的优缺点是什么？

暂时忽略整个弃用的事情，这里的主要区别在于`mysql_`家庭实现的一些魔法。

具体来说，*所有* `mysql_`采用链接标识符（语句句柄、数据库连接资源，无论你想怎么称呼它）的系列函数都是*可选*的。如果省略该参数，它将是*最后打开*的连接。

程序版本的情况并非如此[`mysqli_`](http://php.net/book.mysqli)，尽管许多函数具有相同的名称和用途。事实上，`mysqli_`正是因为这个原因，in 中的参数顺序总是首先连接而不是最后连接。

作为最佳实践，您应该*永远不要*省略`mysql_`. 再说一次，作为最佳实践，您不应该*使用* `mysql_`. 今天官方的弃用通知出现在手册中。

面向对象模式下的[PDO](http://php.net/book.pdo)和 mysqli 中的方法也可以在没有连接参数的情况下运行，因为连接是您调用方法的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T06:54:33.263

第二个选项将使用 mysql_connect 打开的最后一个链接。如果没有找到，它将尝试打开没有值的连接（通常会失败）。如果有多个数据库连接打开并且想要指定使用哪个数据库连接，第一个选项会更好。

# java - 在应用内结算（IAB 版本 3）android 中恢复购买

> ID：13890007
> 
> 赞同：15
> 
> 时间：2012-12-15T06:35:19.717
> 
> 标签：java, android, in-app-purchase, in-app-billing

Google 已升级到 IAB3（In App Billing 版本 3）。`super.onDestroy()`首先，错过了示例代码中的问题..。

[我在http://developer.android.com/google/play/billing/billing_integrate.html](http://developer.android.com/google/play/billing/billing_integrate.html)的帮助下实现了 v3

它在手机上测试过，在模拟器中不起作用。它卡在模拟器中。

我的问题是，我没有看到用于恢复交易的 API。如何使用 IAB3 恢复购买？是吗`mService.getPurchases(apiVersion, packageName, type, continuationToken)`。有人测试过这个吗？？这会从本地存储的物品中返回购买的物品还是恢复购买的物品？卸载应用程序没有`continuationToken`。应该是`null`吗？

而当购买状态发生变化时呢？

请帮忙！

提前致谢。

**编辑 ：**

Google 已更新应用内计费库并解决了该`super.onDestroy()`问题。他们还添加了一些附加功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T07:15:21.937

要使物品可消耗，您必须发送消耗请求，并且必须在单独的线程中执行此操作。

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == 1111) {
        int responseCode = data.getIntExtra("RESPONSE_CODE", 0);
        String purchaseData = data.getStringExtra("INAPP_PURCHASE_DATA");
        String dataSignature = data.getStringExtra("INAPP_DATA_SIGNATURE");
        Logger.printMessage(TAG, "on activity result reponse"
                + responseCode, Logger.DEBUG);
        if (resultCode == RESULT_OK && responseCode == 0) {
            try {
                JSONObject jo = new JSONObject(purchaseData);
                String sku = jo.getString("productId");
                String title = jo.getString("title");
                addChipsToBalance(sku);
                final String token = jo.getString("purchaseToken");
                Toast.makeText(BuyChipsActivity.this,
                        "You have bought " + title + ". Enjoy the game!",
                        Toast.LENGTH_SHORT).show();

                new Thread(new Runnable() {

                    @Override
                    public void run() {
                        // TODO Auto-generated method stub
                        Logger.printMessage(TAG, "inside run", Logger.DEBUG);
                        try {
                            int response = mService.consumePurchase(3,
                                    getPackageName(), token);
                            Logger.printMessage(TAG, "inside run response"
                                    + response, Logger.DEBUG);
                        } catch (RemoteException e) {
                            // TODO Auto-generated catch block
                            Logger.printMessage(TAG, "exception here 1",
                                    Logger.DEBUG);
                            e.printStackTrace();
                        }
                    }
                }).start();
                // alert("You have bought the " + sku +
                // ". Excellent choice,  adventurer!");
            } catch (JSONException e) {
                // alert("Failed to parse purchase data.");
                e.printStackTrace();
            }
        }
    } 
```

但有时在 google 端没有完成消费请求，因此您可能想查询购买的商品列表并使用购买令牌消费它。我确实喜欢这个

```
 private void showPreviousPurchases() {
    Logger.printMessage(TAG, "previous purchases", Logger.DEBUG);
    if (mService == null) {
        Toast.makeText(this, "Something Went Wrong. Try later",
                Toast.LENGTH_LONG).show();
        return;
    }
    Bundle ownedItems = null;
    ;
    try {
        ownedItems = mService.getPurchases(3, getPackageName(), "inapp",
                null);
    } catch (RemoteException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    if (ownedItems == null) {
        Logger.printMessage(TAG, "criical error ", Logger.DEBUG);
        return;
    }
    int response = ownedItems.getInt("RESPONSE_CODE");
    if (response == 0) {
        ArrayList<String> ownedSkus = ownedItems
                .getStringArrayList("INAPP_PURCHASE_ITEM_LIST");
        ArrayList<String> purchaseDataList = ownedItems
                .getStringArrayList("INAPP_PURCHASE_DATA_LIST");
    /*  ArrayList<String> signatureList = ownedItems
                .getStringArrayList("INAPP_DATA_SIGNATURE");
        String continuationToken = ownedItems
                .getString("INAPP_CONTINUATION_TOKEN");*/

        for (int i = 0; i < purchaseDataList.size(); ++i) {
            String purchaseData = purchaseDataList.get(i);
            Logger.printMessage(TAG, "json  = " + purchaseData,
                    Logger.DEBUG);
            // String signature = signatureList.get(i);
            String sku = ownedSkus.get(i);

            addChipsAndMakeItConsumable(purchaseData);
            // do something with this purchase information
            // e.g. display the updated list of products owned by user
        }

        // if continuationToken != null, call getPurchases again
        // and pass in the token to retrieve more items
    }

}

private void addChipsAndMakeItConsumable(String purchaseData) {

    try {
        JSONObject jo = new JSONObject(purchaseData);
        String sku = jo.getString("productId");
        // String title = jo.getString("title");
        addChipsToBalance(sku);
        final String token = jo.getString("purchaseToken");
        Logger.printMessage(TAG, "id  = " + sku, Logger.DEBUG);

        Logger.printMessage(TAG, "inside run", Logger.DEBUG);
        try {
            int response = mService.consumePurchase(3, getPackageName(),
                    token);
            Logger.printMessage(TAG, "inside run response" + response,
                    Logger.DEBUG);
        } catch (RemoteException e) {
            // TODO Auto-generated catch block
            Logger.printMessage(TAG, "exception here 1", Logger.DEBUG);
            e.printStackTrace();
        }

        // alert("You have bought the " + sku +
        // ". Excellent choice,  adventurer!");
    } catch (JSONException e) {
        // alert("Failed to parse purchase data.");
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-17T00:38:42.343

在 /android-sdk/extras/google/play_billing/samples/ 中的示例 IabHelper.java 中，放置此代码以获取用户已购买的所有项目。这将返回一个购买数据的 JSON 数组。您还可以使用 Purchase.java 进行解析，它也可以在示例文件夹中找到。

```
 public ArrayList<String> getAllPurchases() throws RemoteException{
     Bundle ownedItems = mService.getPurchases(3, mContext.getPackageName(),"inapp", null);

     int response = getResponseCodeFromBundle(ownedItems);
     logDebug("Owned items response: " + String.valueOf(response));
     if (response != BILLING_RESPONSE_RESULT_OK) {
         logDebug("getPurchases() failed: " + getResponseDesc(response));

     }
     if (!ownedItems.containsKey(RESPONSE_INAPP_ITEM_LIST)
             || !ownedItems.containsKey(RESPONSE_INAPP_PURCHASE_DATA_LIST)
             || !ownedItems.containsKey(RESPONSE_INAPP_SIGNATURE_LIST)) {
         logError("Bundle returned from getPurchases() doesn't contain required fields.");
     }

     ArrayList<String> purchaseDataList = ownedItems.getStringArrayList(RESPONSE_INAPP_PURCHASE_DATA_LIST);
     return purchaseDataList;
} 
```

并进入您的主要活动

```
 public class MainActivity extends Activity{
  private IabHelper mHelper;
      private String arrayString;
      public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);

    mHelper = new IabHelper(this,"YOUR PUBLIC KEY" );
      mHelper.enableDebugLogging(true);
      mHelper.startSetup(new IabHelper.OnIabSetupFinishedListener() {

        public void onIabSetupFinished(IabResult result) {

        if (!result.isSuccess()) { // Oh noes, there was a problem.
            Toast.makeText(this,"Problem setting up in-app billing: " + result,Toast.LENGTH_LONG).show();
              return;
          }

        arrayString=mHelper.getAllPurchases().toString();

        Log.d("Purchases: ",""+arrayString);

        array = new JSONArray(arrayString);

        for (int i = 0; i < array.length(); i++) {
            JSONObject row = array.getJSONObject(i);    
            productId=row.getString("productId");  //this will get the product id's that has been purchased.

            Log.e("To be restored:", " PRODUCT ID's "+productId);
        }

      });         
    }
} 
```

我希望这能帮到您。^_^ 谢谢。

# android - 在 android 应用程序中提供设置菜单按钮

> ID：13890010
> 
> 赞同：0
> 
> 时间：2012-12-15T06:35:25.540
> 
> 标签：android, menu

> **可能重复：**
> [创建带有菜单项的滑动抽屉](https://stackoverflow.com/questions/12027980/creating-a-sliding-drawer-with-menu-items)

如附加的屏幕截图所示，我需要在我的应用程序中显示一个菜单。怎么可能？![在此处输入图像描述](../Images/24b4d04774e63a39553d54c1bf8e36b4.png)

![在此处输入图像描述](../Images/58588b98151fa5debf200462d0401f6c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T06:49:56.467

我猜你正在使用动作栏 sherlock 库，如果是这样，首先启用动作栏左侧的主页按钮

```
mActionbar.setHomeButtonEnabled(true); 
```

然后，为该按钮设置图标

```
mActionbar.setIcon(R.drawable.image_name); 
```

# android - Session.StatusCallback Facebook Android sdk3.0的onActivityResult和onComplete的区别

> ID：13890011
> 
> 赞同：4
> 
> 时间：2012-12-15T06:35:47.287
> 
> 标签：android, facebook, facebook-android-sdk, facebook-authorization

我正在使用 Facebook Android sdk3.0。用户通过 Facebook 成功登录后，我想做一些事情。我应该在内部实现它`onActivityResult`还是实现它的`onComplete`功能`Session.StatusCallback`？

其实这两者有什么区别吗？我可以假设 Session.StatusCallback onComplete 总是在之后调用`onActivityResult`吗？

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);
    // Do Something Here?
}

private class SessionStatusCallback implements Session.StatusCallback {

    @Override
    public void call(Session session, SessionState state, Exception exception) {

        if (session.isOpened()) {
             // Or Do Something Here?
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T19:10:42.113

简短的回答是，你应该两者都做。

onActivityResult 是必需的，因为您需要将信息传递给 Facebook SDK，以便 SDK 验证用户是否已接受条款和权限。一旦 SDK 验证了所有内容，它将使用新状态或发生的任何错误调用 SessionStatusCallback.call。

当您打开一个新会话时，它将首先转换到 OPENING 状态（这将调用您的回调），然后它将执行 SSO，当 SSO 完成时，您的 onActivityResult 将被调用（此时您应该调用 session. onActivityResult 或 uiLifecycleHelper.onActivityResult)，然后会话将转换到 OPENED 状态，这将再次调用您的回调。

# c# - 如何在此访问器中使用变量？

> ID：13890020
> 
> 赞同：1
> 
> 时间：2012-12-15T06:36:36.897
> 
> 标签：c#, accessor

我正在尝试使用访问器，因为在我看来这是完成我想做的事情的唯一方法。这是我的代码：

游戏1.cs

```
public class GroundTexture
{
    private Texture2D dirt;
    public Texture2D Dirt
    {
        get
        {
            return dirt;
        }

        set
        {
            dirt = value;
        }
    }
}

public class Main : Game
{
    public static Texture2D texture = tile.Texture;
    GroundTexture groundTexture = new GroundTexture();
    public static Texture2D dirt;

    protected override void LoadContent()
    {
        Tile tile = (Tile)currentLevel.GetTile(20, 20);

        dirt = Content.Load<Texture2D>("Dirt");
        groundTexture.Dirt = dirt;

        Texture2D texture = tile.Texture;
    }

    protected override void Update(GameTime gameTime)
    {
        if (texture == groundTexture.Dirt)
        {
            player.TileCollision(groundBounds);
        }

        base.Update(gameTime);
    } 
```

}

我从 LoadContent 和 Update 函数中删除了不相关的信息。

在以下行：

```
if (texture == groundTexture.Dirt) 
```

我收到错误

```
Operator '==' cannot be applied to operands of type 'Microsoft.Xna.Framework.Graphics.Texture2D' and 'Game1.GroundTexture' 
```

我是否正确使用了访问器？为什么我会收到这个错误？“污垢”是 Texture2D，因此它们应该具有可比性。

这使用了一个名为 Realm Factory 的程序中的一些功能，该程序是一个磁贴编辑器。数字“20, 20”只是我在下面制作的关卡的一个示例：

[http://i.stack.imgur.com/d8cO3.png](http://i.stack.imgur.com/d8cO3.png)

tile.Texture 返回精灵，这里是内容项 Dirt.png

非常感谢！

# mysql - mysql工作台错误打开EER

> ID：13890021
> 
> 赞同：68
> 
> 时间：2012-12-15T06:36:42.763
> 
> 标签：mysql, mysql-workbench, eer-model

我有一个 lubuntu-64bit 并安装了 MySQL-workbench 来打开 EER 模型。但它只是没有打开..

它显示错误

```
Error unserializing GRT data
error unserializing object (invalid struct) 
```

相同的 EER 文件在 Windows 中打开良好。我是新手，我需要在这台机器上使用这些创建数据库，请帮助..

* * *

## 回答 #1

> 赞同：196
> 
> 时间：2015-08-17T07:13:10.820

我遇到了同样的问题，最后我只是关闭应用程序并重新启动，它解决了问题。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2018-05-11T11:56:33.230

其他解决方案对我不起作用，对于仍在寻找解决方案的任何人，我设法通过关闭工作台并双击文件资源管理器中的实际 .MWB 文件来打开我的模型。

我希望这对某人有所帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-04-17T18:12:49.190

对我来说，是通过**关闭其他选项卡**（可能是与 eer digram 相关的选项卡）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-23T12:56:56.727

8.0.17 中仍然存在问题

我有“错误反序列化 GRT 数据数据字符串太长”。

关闭打开的“本地实例”数据库选项卡可以让您正常打开模型。

我知道这与其他人的建议相同，只是为了后代而记录评论，它已经 5 年了，仍然是一个问题。

# mysql - 计算特定范围内行的百分比

> ID：13890024
> 
> 赞同：1
> 
> 时间：2012-12-15T06:37:04.917
> 
> 标签：mysql, sql

我有一个学生姓名和分数列表，存储在如下表中。

```
CREATE TABLE StudentsList(StudentId INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
                              Name  VARCHAR(50),
                              Marks INT);

INSERT INTO StudentsList(Name, Marks)
      VALUES('Student A', 20),
            ('Student B', 45),
            ('Student C', 90),
            ('Student D', 81),
            ('Student E', 50),
            ('Student F', 10),
            ('Student G', 85),
            ('Student H', 41),
            ('Student I', 66),
            ('Student J', 65),
            ('Student K', 05),
            ('Student L', 20),
            ('Student M', 19),
            ('Student N', 80),
            ('Student O', 90),
            ('Student P', 91),
            ('Student Q', 10),
            ('Student R', 29); 
```

我想根据他们整体贡献的分数范围和百分比对学生的数量进行分组。

```
 MarkRange   NoOfStudents  Percentage
      0 - 20       4             22.22
     20 - 50       5             27.77  
     50 - 70       3             16.66 
     70 - 90       3             16.66  
     90            3             16.66 
```

我尝试了以下查询并为 0 -20 之间的学生带来了结果

```
SELECT COUNT(*) , COUNT(*)/(T.total)* 100
  FROM StudentsList,
       (SELECT COUNT(*) AS total 
          FROM StudentsList) AS T 
         WHERE Marks >= 0 and  Marks < 20 
```

如何使用单个查询来做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T06:46:37.763

```
 SELECT COUNT(*) , COUNT(*)/(T.total)* 100, '0 - 20' AS Range
      FROM StudentsList,
           (SELECT COUNT(*) AS total 
              FROM StudentsList) AS T 
             WHERE Marks >= 0 and  Marks < 20
    UNION 
    SELECT COUNT(*) , COUNT(*)/(T.total)* 100, '20 - 50' AS Range
      FROM StudentsList,
           (SELECT COUNT(*) AS total 
              FROM StudentsList) AS T 
             WHERE Marks >= 20 and  Marks < 50
    UNION 
    SELECT COUNT(*) , COUNT(*)/(T.total)* 100, '50 - 70' AS Range
      FROM StudentsList,
           (SELECT COUNT(*) AS total 
              FROM StudentsList) AS T 
             WHERE Marks >= 50 and  Marks < 70
    UNION 
    SELECT COUNT(*) , COUNT(*)/(T.total)* 100, '70 - 90' AS Range
      FROM StudentsList,
           (SELECT COUNT(*) AS total 
              FROM StudentsList) AS T 
             WHERE Marks >= 70 and  Marks < 90
   UNION 
   SELECT COUNT(*) , COUNT(*)/(T.total)* 100, '90 Above' AS Range
     FROM StudentsList,
          (SELECT COUNT(*) AS total 
             FROM StudentsList) AS T 
            WHERE Marks >= 90 
```

我找到了一个使用联合的答案。

如果有其他解决方案，请建议我

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T06:57:23.703

试试这个：

```
SELECT CONCAT(A.minRange, ' - ', A.maxRange) MarkRange, COUNT(sl.Name) NoOfStudents, 
    (SELECT COUNT(sl.Name) / COUNT(*) * 100 FROM StudentsList) Percentage
FROM studentslist sl 
INNER JOIN (SELECT 1 id, 0 minRange, 20 maxRange 
    UNION 
    SELECT 2 id, 20 minRange, 50 maxRange 
    UNION 
    SELECT 3 id, 50 minRange, 70 maxRange 
    UNION 
    SELECT 4 id, 70 minRange, 90 maxRange 
    UNION 
    SELECT 5 id, 90 minRange, 100 maxRange 
    ) AS A ON sl.Marks >= A.minRange AND sl.Marks < A.maxRange 
GROUP BY A.id; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T06:44:03.440

试试这个：

```
SELECT COUNT(*) as 'number of students', COUNT(*)/(T.total)* 100 as 'Percentage', '0 - 20' AS 'Range' 
  FROM StudentsList,
       (SELECT COUNT(*) AS total 
          FROM StudentsList) AS T 
         WHERE Marks >= 0 and  Marks < 20
UNION
SELECT COUNT(*) , COUNT(*)/(T.total)* 100  as 'Percentage', '20 - 50' AS 'Range'
  FROM StudentsList,
       (SELECT COUNT(*) AS total 
          FROM StudentsList) AS T 
         WHERE Marks >= 0 and  Marks >= 20 and Marks < 50
UNION
SELECT COUNT(*) , COUNT(*)/(T.total)* 100 as 'Percentage', '50 - 70' AS 'Range'
  FROM StudentsList,
       (SELECT COUNT(*) AS total 
          FROM StudentsList) AS T 
         WHERE Marks >= 0 and  Marks >= 70 and Marks < 90
UNION
SELECT COUNT(*) , COUNT(*)/(T.total)* 100 as 'Percentage', '70 - 90' AS 'Range'
  FROM StudentsList,
       (SELECT COUNT(*) AS total 
          FROM StudentsList) AS T 
         WHERE Marks >= 0 and  Marks >= 70 and Marks < 90
UNION
SELECT COUNT(*) , COUNT(*)/(T.total)* 100 as 'Percentage', 'Above 90' AS 'Range'
  FROM StudentsList,
       (SELECT COUNT(*) AS total 
          FROM StudentsList) AS T 
         WHERE Marks >= 0 and  Marks >= 90 
order by 3 
```

输出：

```
NUMBER OF STUDENTS  PERCENTAGE      RANGE
4                   22.2222         0 - 20
5                   27.7778         20 - 50
3                   16.6667         50 - 70
3                   16.6667         70 - 90
3                   16.6667         Above 90 
```

***[你可以在这里](http://sqlfiddle.com/#!2/8cf9a/17)***看到它是如何运行的

# c# - 当背景图像设置为它时闪烁表单c#

> ID：13890025
> 
> 赞同：0
> 
> 时间：2012-12-15T06:37:05.557
> 
> 标签：c#, winforms

当我为我的 winform 修复背景时，它在表单加载时闪烁。我的表单上有一个表格布局面板，我将所有控件都保留在表格布局面板上。

我将表格布局面板的背景色设置为透明并将图像设置为背景。为什么我在加载表单时会眨眼？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T10:31:55.577

WinForms 不能很好地处理透明度（我相信您可能已经注意到，并非所有 WinForms 控件都支持它）。闪烁是因为加载了 TableLayoutPanel 及其所有项目时，表单必须找到正确的“图像”（因为控件不像 WPF 或游戏那样支持透明度，而是使用它后面的控件的图像）来显示。当每个控件都加载时，它必须经过这个过程，因此会闪烁。您可以尝试在表单上启用 DoubleBuffering，但是，如果我没记错的话，这可能会导致透明度问题。

如果您发现您使用了很多透明度和/或想要更多地自定义您的表单，我建议您看看 WPF。它可以更好地控制您的表单（WPF 中的窗口），并支持每个控件的透明度。

# javascript - 在单击按钮时应用替换功能后，如何显示（不是通过警报，而是在文本区域本身）文本区域的值？

> ID：13890026
> 
> 赞同：1
> 
> 时间：2012-12-15T06:37:19.317
> 
> 标签：javascript, jquery

我有这个用于提交表单的脚本和 html：

```
<script type="text/javascript">
   function ApplyIndent() {
      var txtArea = document.getElementById('w2').value;
      var myRegExp = / /g;
      txtArea = txtArea.replace(myRegExp, "&#160;");
   }
</script>

<table cellpadding="0" cellspacing="0" border="0">
   <tr>
      <td><textarea id="w2" cols="50" rows="5"/></td>
   </tr>

   <tr>
      <td><input id="btnIndent" value="Indent" onclick="ApplyIndent()"/></td>
   </tr>
</table> 
```

我在这里尝试完成的是用不间断空格替换空格，因为即使您在文本区域中缩进文本行，除非您使用不间断空格，否则它只会在提交表单后自动对齐。我测试了警告文本区域，我得到了我想要的结果，但是，我需要的是来自警报的值以显示在文本区域本身上。我该怎么做？仅仅为了获得所需的空间而输入 ascii 字符是低效的，我们不希望这样。提前致谢！

![使用 <space> 缩进](../Images/1836279d4147477869bbff701c8fe201.png)

![提交表单后使用 <space> 的结果](../Images/41ab4f9cb9f62c126f3ced216f60e9f0.png)

![使用不间断空格缩进](../Images/33f683c1887f429cb1e74e4d6187f368.png)

![提交表单后使用不间断空格时的结果](../Images/7d8ffbf878456ef29c27e01979da349f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T06:50:10.210

```
var txtArea = document.getElementById('w2');
txtArea.value = txtArea.value.replace(/ /, "&#160;"); 
```

请注意，如果您想要由 #160 表示的实际字符而不是拼写的 HTML 实体，请使用：

```
"\xA0" 
```

编辑：再想一想， CSS 有什么问题`white-space: pre-wrap`？

# iphone - 在xcode中从facebook登录获取用户数据？

> ID：13890028
> 
> 赞同：1
> 
> 时间：2012-12-15T06:38:25.380
> 
> 标签：iphone, objective-c, facebook

我已经在我的应用程序中集成了 facebook 登录。但我无法获取用户数据，即它没有进入 Appdelegate.m 中的用户详细信息循环

```
- (BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI {
    NSArray *permissions = [[NSArray alloc] initWithObjects:
                            @"email",
                            @"user_likes",
                            nil];
    return [FBSession openActiveSessionWithReadPermissions:permissions
                                              allowLoginUI:allowLoginUI
                                         completionHandler:^(FBSession *session,
                                                             FBSessionState state,
                                                             NSError *error) {
                                             [self sessionStateChanged:session
                                                                 state:state
                                                                 error:error];
                                         }];

}

- (void)sessionStateChanged:(FBSession *)session
                      state:(FBSessionState) state
                      error:(NSError *)error
{
    switch (state) {
        case FBSessionStateOpen:
                     if (!error) {
                // We have a valid session
                NSLog(@"User session found");

                         [[FBRequest requestForMe] startWithCompletionHandler:
                          ^(FBRequestConnection *connection,
                            NSDictionary<FBGraphUser> *user,
                            NSError *error) {
                                  if (!error) {

                                  NSLog(@"%@",user);

                              }}];
                           break;
        case FBSessionStateClosed:
        case FBSessionStateClosedLoginFailed:
           [[FBSession activeSession] closeAndClearTokenInformation];

            break;
        default:
            break;
    }
 if (error) {
        UIAlertView *alertView = [[UIAlertView alloc]
                                  initWithTitle:@"Error"
                                  message:error.localizedDescription
                                  delegate:nil
                                  cancelButtonTitle:@"OK"
                                  otherButtonTitles:nil];
        [alertView show];
    }

    }
} 
```

但是我没有找到要打印的用户 NSLog(@"%@",user) 的 NSLog，即使会话已打开 bcoz NSLog(@"User session found") 已打印 Y 是这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:44:34.010

我有同样的问题，我在一个小时后登录后回来后无法进入该块，我发现我正在返回 mysession 类而不是 mysession 的实例。这可能会解决您的问题：

```
- (BOOL)application:(UIApplication *)application
            openURL:(NSURL *)url
  sourceApplication:(NSString *)sourceApplication
         annotation:(id)annotation {

    return [mysession handleOpenURL:url];
} 
```

# javascript - 谷歌地图 API 多个标记

> ID：13890029
> 
> 赞同：0
> 
> 时间：2012-12-15T06:38:33.570
> 
> 标签：javascript, google-maps, google-maps-api-3

我正在使用以下代码显示谷歌地图并在地图上创建一个标记。它运作良好。我只需要在同一张地图上放置多个标记。

```
<!DOCTYPE html>
<html>
<head>
<script
src="http://maps.googleapis.com/maps/api/js?    
key=AIzaSyDY0kkJiTPVd2U7aTOAwhc9ySH6oHxOIYM&sensor=false">
</script>

<script>
var myCenter=new google.maps.LatLng(51.508742,-0.120850);

function initialize()
{
var mapProp = {
center:myCenter,
zoom:5,
mapTypeId:google.maps.MapTypeId.ROADMAP
};

var map=new google.maps.Map(document.getElementById("googleMap"),mapProp);

var marker=new google.maps.Marker({
position:myCenter,
});

marker.setMap(map);

var infowindow = new google.maps.InfoWindow({
content:"Hello World!"
});

infowindow.open(map,marker);
}

google.maps.event.addDomListener(window, 'load', initialize);
</script>
</head>

<body> 
<div id="googleMap" style="width:500px;height:380px;"></div>
</body>
</html> 
```

谁能帮助我通过使用多个地址在同一张地图上放置多个标记。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T06:55:48.230

这是一个基本问题，可以在网上找到几个示例。您基本上需要一个数组来保存各种标记 lat lng。然后使用循环将这些 latlng 放置在地图上，就像使用一个标记一样。

```
var berlin = new google.maps.LatLng(52.520816, 13.410186);
var neighborhoods = [
new google.maps.LatLng(52.511467, 13.447179),
new google.maps.LatLng(52.549061, 13.422975),
new google.maps.LatLng(52.497622, 13.396110),
new google.maps.LatLng(52.517683, 13.394393)
];
var markers = [];
var map;

function initialize() {
var mapOptions = {
zoom: 12,
mapTypeId: google.maps.MapTypeId.ROADMAP,
center: berlin
};
map = new google.maps.Map(document.getElementById('map_canvas'),
mapOptions);
drop();
}

function drop() {
 for (var i = 0; i < neighborhoods.length; i++) 
  {
    markers.push(new google.maps.Marker({
    position: neighborhoods[i],
    map: map,
    }));
  }
} 
```

# javascript - 基本 Java 脚本的问题

> ID：13890030
> 
> 赞同：0
> 
> 时间：2012-12-15T06:38:38.673
> 
> 标签：javascript

```
<p id="test">lol</p>

<script type="text/javascript">
var text = $('test').text();
var comparingText = 'lol';

if (text == comparingText) {
document.write('haha');
}
</script> 
```

为什么这行不通？甚至尝试过使用“ `IF NOT`”..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T06:41:01.003

您正在尝试获取`<test>`标签，而不是带有 ID 的标签`test`。要通过 ID 获取标签，您需要一个`#`符号：`$('#test')`

但是：使用 jQuery 作为选择引擎是矫枉过正且效率低下。这是您在 vanilla JavaScript 中的代码：

```
if( document.getElementById('test').firstChild.nodeValue == "lol")
  document.write("haha"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T06:42:03.907

您没有通过 id 获取元素，应该是：

```
var text = $('#test').text(); 
```

最好在 DOM 加载事件中编写脚本：

```
$(function(){
    var text = $('#test').text();
    var comparingText = 'lol';

    if (text == comparingText) {
        document.write('haha');
    }
); 
```

小提琴：http: [//jsfiddle.net/eedUs/1/](http://jsfiddle.net/eedUs/1/)

# sql - SQL：从三个表中选择

> ID：13890035
> 
> 赞同：0
> 
> 时间：2012-12-15T06:39:11.263
> 
> 标签：sql, join

如果我有三个表，A/B/C，A 与 B 相关，B 与 C 相关，并且我想使用来自 C 的信息从 A 获取信息，我可以执行以下操作吗？：

```
SELECT A.field 
FROM A, B, C
WHERE A.key = B.key and B.key2 = C.key2 and C.field = 'some_data'; 
```

我试着查了一下，我看到很多提到“JOINS”，但我对 SQL 没有那么丰富的经验。所以我想知道：我的解决方案在逻辑上可行吗？它与实际使用 JOIN 关键字的 JOIN 有何不同？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T06:47:58.193

是的，它工作正常。但是，最好使用显式连接语法：

```
SELECT A.field
FROM A
JOIN B ON A.key = B.key
JOIN C ON B.key2 = C.key2
WHERE C.field = 'some_data'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T06:47:09.373

在这种情况下，您确实应该使用 JOIN 子句。

假设这是您正在使用的 Microsoft SQL Server：

```
SELECT A.field 
FROM A
JOIN B on B.key = A.key
JOIN C on C.key2 = B.key2
AND C.field = 'some_data'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T07:01:27.437

是的，你所做的会奏效，这实际上就是我们所说的“Equijoin”。但是，如果您处理大量表，则显式使用连接语法会更有效，正如 Barmar 在代码可读性方面指出的那样。

# css - 用 css 显示多幅图像

> ID：13890036
> 
> 赞同：0
> 
> 时间：2012-12-15T06:39:25.413
> 
> 标签：css, html, sliding-doors

我有一个表格，我试图在每个单元格的第一行显示两个选项卡。我已将左侧选项卡分成三个图像（左、中、右），并显示一些文本。它应该与左边距对齐。右侧选项卡没有文本，应与右边距对齐。在两个选项卡之间是连接两个选项卡底部的一条线 - 右侧选项卡是一个图像，连接器也是一个图像，所以我要显示五个图像。它还应该拉伸以适应文本（它正在做的）和单元格（它不是）。

它应该看起来像这样：

[文本]__[]

左侧选项卡显示正常，但右侧选项卡不是。这是我的代码：

HTML

```
<div class='category'>
<span><span><span><span>".$results['category']."</span></span></span></span></div>
<div class='righttab'><span><span></span></span></div> 
```

CSS

```
.category
    {
    display: block;
    }
.category *
    {
    height: 27px;
    }
.category span
    {
    display: block;
    float: left;
    color: rgb(240,208,128);
    }
.category span span
    {
    background: url(tabmiddle.png) top left repeat-x;
    float: left;
    margin: 0 0 0 0px;
    }
.category span span span
    {
    background: url(tabright.png) top right no-repeat;
    float: left;
    display: block;
    padding-right: 19px;
    }
.category span span span span
    {
    background: url(tableft.png) top left no-repeat;
    display: block;
    padding-left: 19px;
    padding-top: 3px;
    }
.righttab
    {
    display:block;
    float: right;
    }
.righttab span
    {
    background: url(topborder.png) top repeat-x;
    display: block;
    }
.righttab span span
    {
    background: url(righttab.png) top right no-repeat;
    display: block;
    float: right;
    margin-left: 75px;
    } 
```

# algorithm - 在哪里使用哪种排序算法？

> ID：13890038
> 
> 赞同：-1
> 
> 时间：2012-12-15T06:39:37.477
> 
> 标签：algorithm, sorting, quicksort, mergesort, stable-sort

有多种排序算法可用。时间复杂度为 O(n^2) 的排序算法可能更适合 O(nlogn)，因为它是就地的或稳定的。例如：

*   对于有些排序的东西，插入排序很好。
*   对几乎排序的数组应用快速排序是愚蠢的。
*   堆排序在 O(nlogn) 时很好，但不稳定。
*   合并排序不能用于嵌入式系统，因为在最坏的情况下它需要 O(n) 的空间复杂度。

我想知道哪种排序算法适合什么条件。

*   哪种排序算法最适合按字母顺序对名称进行排序？
*   哪种排序算法最适合排序更少的整数？
*   哪种排序算法最适合排序较少但范围可能很大（98767 - 6734784）的整数？
*   哪种排序算法最适合对数十亿个整数进行排序？
*   哪种排序算法最适合在空间和时间都是约束的嵌入式系统或实时系统中进行排序？

请为这些类型的比较建议这些/其他情况、书籍或网站。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T08:01:04.307

好吧，没有灵丹妙药 - 但这里有一些经验法则：

1.  *当元素的范围*（让它成为`U`）与元素的数量（）相比相对较小时，基数排序/计数排序通常很好`U<<n`（可能适合您的情况 2,4）
2.  插入排序适用于小型（例如`n<30`）列表，甚至比`O(nlogn)`算法（经验上）更快。实际上，您可以通过在以下`O(nlogn)`情况下切换到插入排序来优化自顶向下算法`n<30`
3.  基数排序的变体也可能是按字母顺序排序字符串的不错选择，因为它是`O(|S|*n)`，而正常的基于比较的算法是`O(|S|*nlogn)` [where `|S|`is the length of your string]。（适合您的情况 1）
4.  在排序输入非常大，太大而无法合并的情况下，使用外部排序的方法是 - 这是一种变体或合并排序，它可以最大限度地减少磁盘读取/写入的次数，并确保这些是按顺序完成的- 因为它极大地提高了性能。（可能适合案例 4）
5.  对于一般大小写排序，快速排序和 timsort（用于 java）提供了良好的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T11:18:05.167

> Merge sort can't be used in embedded systems as in worst case it requires O(n) of space complexity.

You may be interested in the `stable_sort` function from C++. It tries to allocate the extra space for a regular merge sort, but if that fails it does an in-place stable merge sort with inferior time complexity (`n * ((log n)^2)` instead of `n * (log n)`). If you can read C++ you can look at the implementation in your favourite standard library, otherwise I expect you can find the details explained somewhere in language-agnostic terms.

There's a body of academic literature about in-place stable sorting (and in particular in-place merging).

So in C++ the rule of thumb is easy, "use `std::stable_sort` if you need a stable sort, otherwise use `std::sort`". Python makes it even easier again, the rule of thumb is "use `sorted`".

In general, you will find that a lot of languages have fairly clever built-in sort algorithms, and you can use them most of the time. It's rare that you'll need to implement your own to beat the standard library. If you do need to implement your own, there isn't really any substitute for pulling out the textbooks, implementing a few algorithms with as many tricks as you can find, and testing them against each other for the *specific* case you're worried about for which you need to beat the library function.

Most of the "obvious" advice that you might be hoping for in response to this question is already incorporated into the built-in sort functions of one or more common programming languages. But to answer your specific questions:

> Which sorting algo is best for sorting names in alphabetical order?

A radix sort might edge out standard comparison sorts like C++ `sort`, but that might not be possible if you're using "proper" collation rules for names. For example, "McAlister" used to be alphabetized the same as "MacAlister", and "St. John" as "Saint John". But then programmers came along and wanted to just sort by ASCII value rather than code a lot of special rules, so most computer systems don't use those rules any more. I find Friday afternoon is a good time for this kind of feature ;-) You can still use a radix sort if you do it on the letters of the "canonicalized" name rather than the actual name.

"Proper" collation rules in languages other than English are also entertaining. For example in German "Grüber" sorts like "Grueber", and therefore comes after "Gruber" but before "Gruhn". In English the name "Llewellyn" comes after "Lewis", but I believe in Welsh (using the exact same alphabet but different traditional collation rules) it comes before.

For that reason, it's easier to talk about optimizing string sorts than it is to actually do it. Sorting strings "properly" requires being able to plug in locale-specific collation rules, and if you move away from a comparison sort then you might have to re-write all your collation code.

> Which sorting algo is best for sorting less integers?

For a small number of small values maybe a counting sort, but Introsort with a switch to insertion sort when the data gets small enough (20-30 elements) is pretty good. Timsort is especially good when the data isn't random.

> Which sorting algo is best for sorting less integers but may be large in range (98767 – 6734784)?

The large range rules out counting sort, so for a small number of widely-ranged integers, Introsort/Timsort.

> Which sorting algo is best for sorting billions of integers?

If by "billions" you mean "too many to fit in memory" then that changes the game a bit. Probably you want to divide the data into chunks that do fit in memory, Intro/Tim sort each one, then do an external merge. Of if you're on a 64 bit machine sorting 32 bit integers, you could consider counting sort.

> Which sorting algo is best for sorting in embedded systems or real time systems where space and time both are constraints?

Probably Introsort.

> For somewhat sorted things insertion sort is good.

True, and Timsort takes advantage of the same situation.

> Applying quick sort on nearly sorted array is foolishness.

False. Nobody uses the plain QuickSort originally published by Hoare, you can make better choices of pivot that make the killer cases much less obvious than "sorted data". To deal with the bad cases thoroughly there is Introsort.

> Heap sort is good with O(nlogn) but not stable.

True, but Introsort is better (and also not stable).

> Merge sort can't be used in embedded systems as in worst case it requires O(n) of space complexity.

Handle this by allowing for somewhat slower in-place merging like `std::stable_sort` does.

# matlab - 使用 dir 命令时，MATLAB 错误排序结构体数组

> ID：13890042
> 
> 赞同：0
> 
> 时间：2012-12-15T06:40:09.080
> 
> 标签：matlab, dir

我有一堆 Excel 数据，分别称为“1.xls”、“2.xls”……直到“15.xls”，每个都有 141x44 组数据。我正在使用 dir 函数将数据导入 MATLAB。

在这里，我将每个文件的第一列和第二列导入 A 和 B 矩阵。

```
 prob15 = dir(fullfile('C:\Users\Bo Sun\Documents\MATLAB\prob15'),'.xls');
  global A B
  A=zeros(141,length(prob15));
  B=zeros(141,length(prob15));
  for i=1:length(prob15)
      A(:,i) = xlsread(prob15(i).name,'A:A');
      B(:,i) = xlsread(prob15(i).name,'B:B');
  end 
```

我的问题是，当我使用 dir 命令时，由于某种原因，MATLAB 对数据进行了错误排序，因为 prob15 结构体数组的升序将是“1.xls”、“10.xls”、“11.xls”.. . 而不是正常的升序数字顺序（“1.xls”，“2.xls，...）。有人知道我该如何解决这个问题吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T07:01:47.353

您看到的顺序称为[ascii-betical 顺序](http://en.wikipedia.org/wiki/ASCII#Order)，是各种实用程序的正常排序顺序，显然您的操作系统目录列表程序也是如此，因为 matlab 只是将此命令发送给操作系统。

如果您想要数字排序，您可以将文件名字符串转换为数字并对它们进行排序。在我自己写之前，一些简单的谷歌搜索产生了[这个](http://www.mathworks.com/matlabcentral/answers/13978)，你可以很容易地适应你的问题：

```
list = dir(fullfile(cd, '*.mat'));
name = {list.name};
str  = sprintf('%s#', name{:});
num  = sscanf(str, 'r_%d.mat#');
[dummy, index] = sort(num);
name = name(index); 
```

# ios - 核心数据：类似文件夹的功能

> ID：13890045
> 
> 赞同：0
> 
> 时间：2012-12-15T06:40:25.947
> 
> 标签：ios, xcode, core-data

我试图在核心数据中创建一个像文件夹一样的实体，就像在 Mac 上基本上可以在其中放置对象和另一个文件夹一样。目前我有文件夹，单个书签（另一个实体）和书签可以在文件夹中，但我不能让文件夹进入另一个文件夹。

这是我的 NSFetchedResultsController，

```
 - (NSFetchedResultsController *)fetchedResultsController
{
    if (_fetchedResultsController != nil) {
        return _fetchedResultsController;
    }

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    // Edit the entity name as appropriate.
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Bookmark" inManagedObjectContext:self.context];
    [fetchRequest setEntity:entity];
    [NSFetchedResultsController deleteCacheWithName:@"Folder"];
    NSPredicate *pred = [NSPredicate predicateWithFormat:@"folder == %@", self.folder];
    [fetchRequest setPredicate:pred];

    // Set the batch size to a suitable number.
    [fetchRequest setFetchBatchSize:20];

    // Edit the sort key as appropriate.

    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"title" ascending:YES];
    NSArray *sortDescriptors = @[sortDescriptor];

    [fetchRequest setSortDescriptors:sortDescriptors];

    // Edit the section name key path and cache name if appropriate.
    // nil for section name key path means "no sections".
    NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.context sectionNameKeyPath:nil cacheName:@"Folder"];
    aFetchedResultsController.delegate = self;
    self.fetchedResultsController = aFetchedResultsController;

    NSError *error = nil;
    if (![self.fetchedResultsController performFetch:&error]) {
        // Replace this implementation with code to handle the error appropriately.
        // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development.
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }

    return _fetchedResultsController;
} 
```

如果 NSEntityDescription 实体是`NSEntityDescription *entity = [NSEntityDescription entityForName:@"Folder" inManagedObjectContext:self.context];`它会因错误而崩溃，

> ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“在实体中找不到密钥路径文件夹”。

我怎样才能解决这个问题？我被这个问题难住了。

Folder实体与书签实体是一对多的关系，书签实体有以下属性，title，url。Folder 有以下属性，title、displayOrder、isFolder。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T08:46:22.900

```
NSPredicate *pred = [NSPredicate predicateWithFormat:@"folder == %@", self.folder]; 
```

当您的实体是书签时，此行很好。如果您只是将实体更改为文件夹，并保留此谓词，则提取请求将查找`folder`文件夹实体上的键，根据您上面的数据模型描述，该键不存在。如果要获取所有文件夹，请不要设置谓词。

要允许文件夹包含文件夹，您需要定义从文件夹实体到自身的关系，如下所示：

![在此处输入图像描述](../Images/b52ced42ba0fbf7f6e5a6aaf97de5852.png)

在这里，Folder 实体有两个关系，一个称为子文件夹的一对多关系，以及它的逆关系，一个称为父文件夹的一对一关系。顶级文件夹`nil`为其父文件夹。

在获取文件夹中包含的文件夹时，您可以简单地使用由返回的集合`folder.subfolders`，或者使用获取请求谓词 where `"parentFolder == %@",folder`。

# perl - 如何在 Perl 中以这种格式 'gi|216 ATGCTGTGCTGATGCTG' 拆分此字符串 'gi|216ATGCTGATGCTGTG'？

> ID：13890049
> 
> 赞同：-3
> 
> 时间：2012-12-15T06:40:47.400
> 
> 标签：perl

我正在解析fasta对齐文件，其中包含

```
gi|216CCAACGAAATGATCGCCACACAA
gi|21-GCTGGTTCAGCGACCAAAAGTAGC 
```

我想将此字符串拆分为：

```
gi|216 CCAACGAAATGATCGCCACACAA
gi|21- GCTGGTTCAGCGACCAAAAGTAGC 
```

对于第一个字符串，我使用

```
$aar=split("\d",$string); 
```

但这没有用。我应该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T07:01:00.250

所以你正在解析一些遗传数据，每行都有一个`gi|`前缀，后跟一系列数字和连字符，然后是核苷酸序列？如果是这样，您可以执行以下操作：

```
my ($number, $nucleotides);
if($string =~ /^gi\|([\d-]+)([ACGT]+)$/) {
    $number      = $1;
    $nucleotides = $2;
}
else {
    # Broken data?
} 
```

这假设您已经去掉了前导和尾随空格。如果你这样做，你应该得到第一个和`$number = '216'`第二个的and 。`$nucleotides = 'CCAACGAAATGATCGCCACACAA'``$number = '216-'``$nucleotides = 'GCTGGTTCAGCGACCAAAAGTAGC'`

看起来[BioPerl](http://search.cpan.org/dist/BioPerl/)有一些东西可以处理 fasta 数据，所以你可能想使用 BioPerl 的工具而不是自己动手。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T07:04:52.690

这就是我将如何去做。

```
#!/usr/bin/perl -Tw

use strict;
use warnings;
use Data::Dumper;

while ( my $line = <DATA> ) {

    my @strings =
        grep {m{\A \S+ \z}xms}                        # no whitespace tokens
        split /\A ( \w+ \| [\d-]+ )( [ACTG]+ ) /xms,  # capture left & right
        $line;

    print Dumper( \@strings );
}

__DATA__
gi|216CCAACGAAATGATCGCCACACAA
gi|21-GCTGGTTCAGCGACCAAAAGTAGC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T16:26:03.130

如果您只想添加一个空格（无法从您的问题中真正看出），请使用[替换](http://www.comp.leeds.ac.uk/Perl/sandtr.html)。*在ACTG*的任何分组前放置一个空格：

```
$string =~ s/([ACTG]+)/ \1/; 
```

或在任何数字和破折号分组后添加一个选项卡：

```
$string =~ s/([\d-]+)/\1\t/; 
```

请注意，这将`$string`在原地替换。

# google-app-engine - 升级到 1.7.4 后无法部署

> ID：13890054
> 
> 赞同：12
> 
> 时间：2012-12-15T06:41:17.367
> 
> 标签：google-app-engine

我今天升级到 GAE 1.7.4 并在尝试部署时看到以下错误：

```
Preparing to deploy:
    Created staging directory at: 'C:\Users\VSKUMA~1.ST-\AppData\Local\Temp\appcfg4811921061542689032.tmp'
    Scanning for jsp files.
    Compiling jsp files.
java.lang.RuntimeException: Cannot get the System Java Compiler. Please use a JDK, not a JRE. 
```

我已经在构建路径中指向了 JDK，这一切都运行良好，直到 GAE 1.7.3

由于某些原因，我无法卸载现有的 GRE。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-17T02:29:00.013

至少对我来说，强制 Eclipse 使用不同的虚拟机本身是有效的。添加，例如：

```
-vm
C:\Program Files\Java\<jdk1.6.0_38>\bin\javaw.exe 
```

到 eclipse.ini 文件的前两行*，然后重新启动 Eclipse。

**感谢安德烈*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T03:28:25.450

最后我手动卸载了jre，这只帮助我解决了这个问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T17:26:02.270

是的@Vik，我在更新到 GAE 1.7.3 时遇到了这个问题，问题的解决方案是重新安装 JRE ......但是！如果您正在使用 Eclipse，而这也不起作用，请尝试重新安装整个 IDE。（我必须这样做，它对我有用 ¬¬）

# iphone - 为所有的navigationcontroller 和navigationitem 设置titleview

> ID：13890062
> 
> 赞同：2
> 
> 时间：2012-12-15T06:42:18.250
> 
> 标签：iphone, objective-c, ios, uinavigationcontroller, uinavigationbar

```
[[[UINavigationBar appearance] setTitleView:button] 
```

我尝试使用上面的代码行将标题视图设置为所有导航项的按钮，但它不起作用。如何通过在 appdelegate 中编写小代码来为我的项目中的所有导航栏设置标题视图？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T07:36:30.490

**自定义导航栏的外观**

> 可以修改 barStyle、tintColor 和 translucent 属性，但绝对不能直接更改 UIView 级别的属性，例如 frame、bounds、alpha 或 hidden 属性。

有关更多详细信息，您可以关注苹果文档[UINavigationBar 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationBar_Class/Reference/UINavigationBar.html)

**编辑->**

我解决了你的问题

```
[[UINavigationBar appearance] addSubview:yourView]; 
```

其他[导航相关查询](https://stackoverflow.com/questions/13488710/how-to-set-a-picture-programmatically-in-a-navbar/13488781#13488781)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T06:53:15.290

试试这哥们...

```
//put whatever object in this view..for example button that you want to put...
UIView* ctrl = [[UIView alloc] initWithFrame:navController.navigationBar.bounds];
ctrl.backgroundColor = [UIColor yellowColor];
ctrl.autoresizingMask = UIViewAutoresizingFlexibleWidth;
[navController.navigationBar addSubview:ctrl]; 
```

让我知道它是否有效！！！！

快乐编码！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T06:53:47.217

这就是您在 addDelegate 中创建导航控制器并为其设置标题的方式，您必须将以下代码添加到 didFinishLaunchingWithOptions 方法。请注意，您需要为 viewController 设置一个根视图，该视图控制器将显示在 navigationController 中。

```
 yourViewController *mainVC = [[yourViewController alloc]init];
  UINavigationController *navigationController1 = [[UINavigationController alloc] initWithRootViewController:mainVC];
  navigationController1.title = @"title";
[window addSubview:navigationController1.view]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T07:36:28.193

如果你使用iOS4，你可以覆盖drawRect

```
@implementation UINavigationBar (UINavigationBarCategory)

-(void)drawRect:(CGRect)rect
{

    UIImageView *itleImageView = //create object
    [self addSubView:titleImageView];
     //set title view in navigation bar
}
@end 
```

iOS 5,

```
if ([[UIDevice currentDevice].systemVersion floatValue] >= 5.0) {
    if ([self.navigationController.navigationBar respondsToSelector:@selector( setBackgroundImage:forBarMetrics:)]){

   UIImageView *itleImageView = //create object
   [self.navigationController.navigationBar addSubView:titleImageView];
    }
} 
```

我想这是一个权利，因为我没有实施。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-30T14:21:49.507

我想在每个 NavigationController 中添加一个徽标，所以我创建了一个子类 `UINavigationController`并在`viewDidLoad`-Method中使用它

```
UIImage *logo =[UIImage imageNamed:@"logo"];
CGFloat navWidth = self.navigationBar.frame.size.width;
CGFloat navHeight = self.navigationBar.frame.size.height;

UIImageView *logoView = [[UIImageView alloc] initWithFrame:CGRectMake(navWidth-logo.size.width - 5,
                                                                      (navHeight - logo.size.height) / 2,
                                                                      logo.size.width,
                                                                      logo.size.height)];

logoView.image = logo;

[self.navigationBar addSubview:logoView]; 
```

# c# - 节点的 Treeview 字体颜色总是在我的 asp.net(C# 4.0) 页面中显示为蓝色？

> ID：13890071
> 
> 赞同：0
> 
> 时间：2012-12-15T06:43:39.090
> 
> 标签：c#, asp.net, c#-4.0, treeview

我在我的 ASP.NET 页面中添加了一个 TreeView 控件。当我看到 aspx 文件时，它的前景色设置为黑色。但是当我在浏览器中看到时，它默认更改为蓝色。

我只想以黑色显示树节点前景色...

这是我的代码...

```
 <asp:TreeView ID="TreeView1" runat="server" ImageSet="Arrows" 
                                    ExpandDepth="0" ShowCheckBoxes="None" onselectednodechanged="TreeView1_SelectedNodeChanged" 
                                    style="margin-left: 5px" Font-Names="Verdana" ForeColor="Black" NodeWrap="True" 
                                    Height="250px" NodeStyle-CssClass="Color" Width="275px" Font-Size="X-Small" >
                                </asp:TreeView> 
```

请指导我摆脱这个问题......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T06:59:39.137

试试这个 ：

```
<asp:TreeView ID="tree1" runat="server">
            <Nodes>
                <asp:TreeNode Text="A"></asp:TreeNode>
                <asp:TreeNode Text="B"></asp:TreeNode>
                <asp:TreeNode Text="C"></asp:TreeNode>
            </Nodes>
            <NodeStyle CssClass="Color" />
        </asp:TreeView>

<style type="text/css">
        .Color{
            color:black !important;
        }
    </style> 
```

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T06:23:32.493

试试这个

每当您添加名为 childNode 的节点时，您必须设置名为 SelectAction 的属性，如下所示

`childNode.SelectAction = TreeNodeSelectAction.None;`

默认情况下 SelectAction 将被选中，因此您将获得文本的蓝色超链接。

如果您在静态中添加这些元素，请这样做

```
<Nodes>

 <asp:TreeNode Text="Node1" SelectAction="None"></asp:TreeNode>

</Nodes> 
```

希望能帮助到你！！！

# javascript - 观察路线并更改指令范围内的变量。

> ID：13890077
> 
> 赞同：0
> 
> 时间：2012-12-15T06:44:41.667
> 
> 标签：javascript, angularjs

我在下面创建了一个指令，它根据提供给它的数据创建一组按钮。

```
angular.module('btnbar.directive', ['messaging']).
directive("btnBar", function(){
  return {
    restrict: 'E',
      $scope.buttons = [{href: '#/students', icon:'icon-ok'},
                         {href: '#/students', icon:'icon-remove'},
                         {href: '#/students/new', icon:'icon-plus'}];    
    },
    template:'<div class="btn-toolbar">' +
      '<a class="btn" ng-repeat="b in buttons" href={{b.href}}>' +
      '<i class={{b.icon}}></i></a></div>',
    replace:true
  }
}); 
```

上述指令效果很好。每次视图中的 ng-view 更改时，我都想为按钮传递一个新数组。

所以我想做以下两件事 -

1.  注意路线的变化。

2.  在更改路线时，更改 'btnbar.directive' 范围内的 'buttons' 变量。

我怎么做 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T13:16:24.280

您可以为其注入 $location 服务监视，然后在发生某些事情时相应地更新 $scope.buttons。这将是我的尝试

```
angular.module('btnbar.directive', ['messaging']).
directive("btnBar", ['$location', function($location){
  return {
    restrict: 'E',
    template:'<div class="btn-toolbar">' +
      '<a class="btn" ng-repeat="b in buttons" href={{b.href}}>' +
      '<i class={{b.icon}}></i></a></div>',
    replace:true,
    link: function($scope, $element, $attrs) {
        $scope.buttons = [{href: '#/students', icon:'icon-ok'},
                          {href: '#/students', icon:'icon-remove'},
                          {href: '#/students/new', icon:'icon-plus'}];
        // What for the location
        $scope.$watch(function() {
            // You can define what part of the $location you want to watch for
            // E.g. $location.search().something (if you are only interested in that)
            return $location;
        }, function(newValue, oldValue) {
            // Do something with the $scope.buttons;
        });
    }
  }
}]); 
```

我希望这会有所帮助。

# android - NinaOldAndroid 中的 ViewHelper 在 onCreate() 方法之外不起作用

> ID：13890080
> 
> 赞同：0
> 
> 时间：2012-12-15T06:45:04.273
> 
> 标签：android, android-animation

我尝试设置`ViewHelper.setPivotY(test, 0);`方法`onClick()`，但它不起作用。动画仍然缩放到 centerY。这是我的代码。我不知道我错在哪里？

公共类 NewClassTest 扩展 Activity{

```
LinearLayout test;
FrameLayout content;
Button btn;

boolean toggle = true;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.test_activity);

    test = (LinearLayout) findViewById(R.id.test);

    content = (FrameLayout) findViewById(R.id.content);
    content.setVisibility(View.INVISIBLE);

    btn = (Button) findViewById(R.id.button1);
    btn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            // ViewHelper.setPivotY(test, 0); does not work
            runAnimation(toggle);
            toggle = !toggle;
        }
    });
    ViewHelper.setPivotY(test, 0); // work

}

private void runAnimation(boolean in){
    AnimatorSet animSet = new AnimatorSet();
    ObjectAnimator anim = null, anim2 = null;
            // ViewHelper.setPivotY(test, 0); also does not work
    if(in){
        anim = ObjectAnimator.ofFloat(test, "scaleY", 1, 1 - (((float)content.getHeight()) / ((float) test.getHeight())));
        anim2 = ObjectAnimator.ofFloat(content, "translationY", content.getHeight(), 0);
        animSet.addListener(new Animator.AnimatorListener() {

            @Override
            public void onAnimationStart(Animator animation) {
                // TODO Auto-generated method stub

                content.setVisibility(View.VISIBLE);
            }

            @Override
            public void onAnimationRepeat(Animator animation) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onAnimationEnd(Animator animation) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onAnimationCancel(Animator animation) {
                // TODO Auto-generated method stub

            }
        });
    }else {
        anim = ObjectAnimator.ofFloat(test, "scaleY", 1 - ((float)content.getHeight()) / ((float) test.getHeight()), 1);
        anim2 = ObjectAnimator.ofFloat(content, "translationY", 0, content.getHeight());
        animSet.addListener(new Animator.AnimatorListener() {

            @Override
            public void onAnimationStart(Animator animation) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onAnimationRepeat(Animator animation) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onAnimationEnd(Animator animation) {
                // TODO Auto-generated method stub
                content.setVisibility(View.INVISIBLE);
            }

            @Override
            public void onAnimationCancel(Animator animation) {
                // TODO Auto-generated method stub

            }
        });
    }
    animSet.setDuration(1000).play(anim2).with(anim);
    animSet.start();
} 
```

感谢您的帮助！。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:49:23.600

也发生在我身上。在带有 android 4.1 的 HTC One S 上测试它并没有奏效，但在带有 android 2.2 的三星 Galaxy I 中它按预期工作。

改成`ViewHelper.setPivotY(test, 0.00000001f);`解决了=\

不知道是HTC、android还是nineoldandroids的bug

# android - 如何用内容进行 Android 布局包装？

> ID：13890092
> 
> 赞同：0
> 
> 时间：2012-12-15T06:47:00.667
> 
> 标签：android, android-layout, android-relativelayout

我的 android 应用程序的内容从布局部分增加，但我想在内容增加时包装布局。我可以在一个相对布局上调整我的所有内容，还是可以在任何其他布局上调整？

**布局代码**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/ttl"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/ep"
        android:textColor="#00ccff"
        android:textSize="18sp" 
        android:textStyle="bold"
        android:gravity="center"
        android:layout_marginLeft="70dp"
        android:layout_marginTop="15dp"      
        />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:src="@drawable/ic_launcher" />
    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/eprice" 
        android:layout_marginTop="64dp"
        android:textColor="#BBB000"
        android:textSize="14sp"
        android:textStyle="bold" />

    <EditText
        android:id="@+id/ep"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="60dp"
        android:text="@string/epval"
        android:inputType="text"
        android:layout_marginLeft="245dp"
        />
        <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/molcal" 
        android:layout_marginTop="100dp"
        android:textColor="#00cc00"
        android:textSize="18sp"
        android:textStyle="bold"
         />
        <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/molfac" 
        android:layout_marginTop="135dp"
        android:textColor="#BBB000"
        android:textSize="14sp"
        android:textStyle="bold" />

         <EditText
        android:id="@+id/molex"
        android:layout_width="100dp"
        android:layout_height="wrap_content"
        android:layout_marginTop="122dp"
        android:text="@string/molex"
        android:inputType="text"
        android:layout_marginLeft="230dp"
        />

         <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/frght" 
        android:layout_marginTop="180dp"
        android:textColor="#BBB000"
        android:textSize="14sp"
        android:textStyle="bold" />

         <EditText
        android:id="@+id/frght"
        android:layout_width="100dp"
        android:layout_height="wrap_content"
        android:layout_marginTop="167dp"
        android:text="@string/frghtport"
        android:inputType="text"
        android:layout_marginLeft="230dp"
        />
          <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/whlfrg" 
        android:layout_marginTop="225dp"
        android:textColor="#BBB000"
        android:textSize="14sp"
        android:textStyle="bold" />

         <EditText
        android:id="@+id/whar"
        android:layout_width="100dp"
        android:layout_height="wrap_content"
        android:layout_marginTop="212dp"
        android:text="@string/whlfrgval"
        android:inputType="text"
        android:layout_marginLeft="230dp"
        />

                <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/storage" 
        android:layout_marginTop="270dp"
        android:textColor="#BBB000"
        android:textSize="14sp"
        android:textStyle="bold" />

         <EditText
        android:id="@+id/storage"
        android:layout_width="100dp"
        android:layout_height="wrap_content"
        android:layout_marginTop="257dp"
        android:text="@string/storageval"
        android:inputType="text"
        android:layout_marginLeft="230dp"
        />

         <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/expdev" 
        android:layout_marginTop="305dp"
        android:textColor="#BBB000"
        android:textSize="14sp"
        android:textStyle="bold" />

         <EditText
        android:id="@+id/expdev"
        android:layout_width="100dp"
        android:layout_height="wrap_content"
        android:layout_marginTop="302dp"
        android:text="@string/expdeval"
        android:inputType="text"
        android:layout_marginLeft="230dp"
        />

                <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/clear" 
        android:layout_marginTop="350dp"
        android:textColor="#BBB000"
        android:textSize="14sp"
        android:textStyle="bold" />

         <EditText
        android:id="@+id/clear"
        android:layout_width="100dp"
        android:layout_height="wrap_content"
        android:layout_marginTop="347dp"
        android:text="@string/clearval"
        android:inputType="text"
        android:layout_marginLeft="230dp"
        />
        <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/survey" 
        android:layout_marginTop="395dp"
        android:textColor="#BBB000"
        android:textSize="14sp"
        android:textStyle="bold" />

         <EditText
        android:id="@+id/survey"
        android:layout_width="100dp"
        android:layout_height="wrap_content"
        android:layout_marginTop="392dp"
        android:text="@string/surveyval"
        android:inputType="text"
        android:layout_marginLeft="230dp"
        />

          <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/transit" 
        android:layout_marginTop="440dp"
        android:textColor="#BBB000"
        android:textSize="14sp"
        android:textStyle="bold" />

         <EditText
        android:id="@+id/transit"
        android:layout_width="100dp"
        android:layout_height="wrap_content"
        android:layout_marginTop="438dp"
        android:text="@string/transitval"
        android:inputType="text"
        android:layout_marginLeft="230dp"
        />
               <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/total" 
        android:layout_marginTop="485dp"
        android:textColor="#BBB000"
        android:textSize="14sp"
        android:textStyle="bold" />

         <EditText
        android:id="@+id/total"
        android:layout_width="100dp"
        android:layout_height="wrap_content"
        android:layout_marginTop="483dp"
        android:text="@string/totval"
        android:inputType="text"
        android:layout_marginLeft="230dp"
        />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T07:06:17.683

好的，这是一个好问题。您可以设置布局的高度和宽度来包装内容，如果您需要添加其他内容，您可以使用以下标签：

```
android:layout_below="@+id/textView1"
android:layout_above="@+id/textView1"
android:layout_toRightOf="@+id/textView1"
android:layout_toLeftOf="@+id/textView1" 
```

据我说，相对布局是最好用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T07:29:24.577

请使用下面的 XML 代码代替您的代码，它将解决您的问题。

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/ttl"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="70dp"
            android:layout_marginTop="15dp"
            android:gravity="center"
            android:text="ep"
            android:textColor="#00ccff"
            android:textSize="18sp"
            android:textStyle="bold" />

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:src="@drawable/ic_launcher" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="64dp"
            android:text="eprice"
            android:textColor="#BBB000"
            android:textSize="14sp"
            android:textStyle="bold" />

        <EditText
            android:id="@+id/ep"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="245dp"
            android:layout_marginTop="60dp"
            android:inputType="text"
            android:text="epval" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="100dp"
            android:text="molcal"
            android:textColor="#00cc00"
            android:textSize="18sp"
            android:textStyle="bold" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="135dp"
            android:text="molfac"
            android:textColor="#BBB000"
            android:textSize="14sp"
            android:textStyle="bold" />

        <EditText
            android:id="@+id/molex"
            android:layout_width="100dp"
            android:layout_height="wrap_content"
            android:layout_marginLeft="230dp"
            android:layout_marginTop="122dp"
            android:inputType="text"
            android:text="molex" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="180dp"
            android:text="frght"
            android:textColor="#BBB000"
            android:textSize="14sp"
            android:textStyle="bold" />

        <EditText
            android:id="@+id/frght"
            android:layout_width="100dp"
            android:layout_height="wrap_content"
            android:layout_marginLeft="230dp"
            android:layout_marginTop="167dp"
            android:inputType="text"
            android:text="frghtport" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="225dp"
            android:text="whlfrg"
            android:textColor="#BBB000"
            android:textSize="14sp"
            android:textStyle="bold" />

        <EditText
            android:id="@+id/whar"
            android:layout_width="100dp"
            android:layout_height="wrap_content"
            android:layout_marginLeft="230dp"
            android:layout_marginTop="212dp"
            android:inputType="text"
            android:text="whlfrgval" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="270dp"
            android:text="storage"
            android:textColor="#BBB000"
            android:textSize="14sp"
            android:textStyle="bold" />

        <EditText
            android:id="@+id/storage"
            android:layout_width="100dp"
            android:layout_height="wrap_content"
            android:layout_marginLeft="230dp"
            android:layout_marginTop="257dp"
            android:inputType="text"
            android:text="storageval" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="305dp"
            android:text="expdev"
            android:textColor="#BBB000"
            android:textSize="14sp"
            android:textStyle="bold" />

        <EditText
            android:id="@+id/expdev"
            android:layout_width="100dp"
            android:layout_height="wrap_content"
            android:layout_marginLeft="230dp"
            android:layout_marginTop="302dp"
            android:inputType="text"
            android:text="expdeval" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="350dp"
            android:text="clear"
            android:textColor="#BBB000"
            android:textSize="14sp"
            android:textStyle="bold" />

        <EditText
            android:id="@+id/clear"
            android:layout_width="100dp"
            android:layout_height="wrap_content"
            android:layout_marginLeft="230dp"
            android:layout_marginTop="347dp"
            android:inputType="text"
            android:text="clearval" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="395dp"
            android:text="survey"
            android:textColor="#BBB000"
            android:textSize="14sp"
            android:textStyle="bold" />

        <EditText
            android:id="@+id/survey"
            android:layout_width="100dp"
            android:layout_height="wrap_content"
            android:layout_marginLeft="230dp"
            android:layout_marginTop="392dp"
            android:inputType="text"
            android:text="surveyval" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="440dp"
            android:text="transit"
            android:textColor="#BBB000"
            android:textSize="14sp"
            android:textStyle="bold" />

        <EditText
            android:id="@+id/transit"
            android:layout_width="100dp"
            android:layout_height="wrap_content"
            android:layout_marginLeft="230dp"
            android:layout_marginTop="438dp"
            android:inputType="text"
            android:text="transitval" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="485dp"
            android:text="total"
            android:textColor="#BBB000"
            android:textSize="14sp"
            android:textStyle="bold" />

        <EditText
            android:id="@+id/total"
            android:layout_width="100dp"
            android:layout_height="wrap_content"
            android:layout_marginLeft="230dp"
            android:layout_marginTop="483dp"
            android:inputType="text"
            android:text="totval" />
    </RelativeLayout>

</ScrollView> 
```

# c++ - DLL 显示的对话框在 Qt Creator 项目中具有 Win98/Classic 样式控件，但在 Visual Studio 中主题正确

> ID：13890100
> 
> 赞同：1
> 
> 时间：2012-12-15T06:48:20.393
> 
> 标签：c++, qt, dll, themes

这很奇怪——我在我的项目中链接到一个非 Qt DLL，并且那个 DLL 显示了一个对话框。

当我使用 Qt Creator+MinGW 编译我的项目时，对话框没有主题 - 它具有 Win98/Classic 风格的矩形控件。

![在此处输入图像描述](../Images/3f186734cab1aea3fe9b3f87ec8f4dd1.png)

当我使用 Qt Addin 在 Visual Studio 2010 中导入同一个项目并编译并运行它，而不对项目进行任何更改时，从 DLL 显示的对话框具有正常的 Win7 主题外观（我在 Win7 上）。

![在此处输入图像描述](../Images/36d5b2c38dd23cd9082d9a4b0a456bf0.png)

这仅影响 DLL 显示的对话框 - EXE 本身显示的所有对话框的主题都是正确的。

我链接到的 Qt 版本是 4.8.1，适用于 Qt Creator 和 VS2010。

什么可能导致这种奇怪的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T11:37:21.950

这可能是因为默认情况下，Visual Studio 在您的可执行文件中包含一个清单文件，其中包含初始化它的必要内容。gui 的主题需要一个清单才能成为操作系统之一（XP、Vista、7）。*请参阅[此答案](https://stackoverflow.com/questions/4403458/how-do-i-use-the-default-gui-theme-on-windows)和此[MSDN 文章](http://msdn.microsoft.com/en-us/library/bb773175%28v=VS.85%29.aspx)。*

请注意，它与 Qt gui 无关，因为 Qt 小部件的渲染不是通过 OS 渲染器完成的，而是通过[QStyle](http://doc.qt.digia.com/qt/qstyle.html)完成的。

# .net - 一个控制台应用程序，许多配置文件

> ID：13890101
> 
> 赞同：0
> 
> 时间：2012-12-15T06:48:31.087
> 
> 标签：.net, app-config

我有一个 .NET 控制台应用程序（带有 10 个引用的自定义 dll：s），它将通过不同的配置文件（app.config 和自定义 .config 文件）多次重复使用。

简单的解决方案是将所有 exe 和 dll:s 复制并粘贴到不同的目录，并更改每个目录的 .config 文件。

但这使得更新代码时变得困难。

如何在不复制（二进制）代码的情况下完成此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T06:52:29.023

从第二个或第三个配置文件所在的其他目录执行程序。

Windows 通常首先在 exe 文件目录中查找，因此您引用的 assamblys 应该没有问题。

# ipad - 无法使用 UIImagePickerController 定位图像

> ID：13890103
> 
> 赞同：1
> 
> 时间：2012-12-15T06:48:46.203
> 
> 标签：ipad, uiimagepickercontroller

我正在尝试使用 UIIMagePickerController 在我的 iPad 应用程序中选择图像。当我运行模拟器时，弹出窗口显示：“没有照片。您可以使用 iTunes 将照片和视频同步到 iPad 上。”。

这意味着什么？我在模拟器中运行应用程序，如何告诉 UIIMagePickerController 在哪里可以找到图像？我可以使用我的资源组中的图像吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T12:09:09.960

模拟器有自己的相机胶卷，但默认情况下它没有任何图像。您不能只告诉模拟器查看 macs 文件系统中的某个文件夹，因此您需要将图像添加到模拟器相机胶卷

最简单的方法是：（重复任意数量的图像）

> *   打开模拟器
> *   开放野生动物园
> *   将图像拖到 safaris 页面上（以便打开图像）
> *   长按图片然后选择保存到相机胶卷

# javascript - 如何在每个函数调用上打开 UI 对话框？

> ID：13890104
> 
> 赞同：0
> 
> 时间：2012-12-15T06:48:52.467
> 
> 标签：javascript, jquery, dialog, jquery-ui-dialog

我想每次`OpenDialog()`调用方法时都打开对话框及其内容。

**功能：**

```
function OpenDialog(){
    $("#seeContent").dialog({
                autoOpen: "false",
                stack: "true",
                height: "600",
                width: "700",
                resizable: "false"
            });
} 
```

**函数调用：**

```
<input type="button" onclick="OpenDialog()"> 
```

`Note:`第一次调用时它工作正常，第二次调用时它会覆盖第一次调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T06:58:36.983

HTML：

```
<input type="button" id="open_dialog">
<div id="content"></div> 
```

JS：

```
$('#open_dialog').click(function(){
var data = getData();     //Get new data
$('#content').html(data); //Replace old data
$('#content').dialog({    //Open dialog
     autoOpen: "false",
     stack: "true",
     height: "600",
     width: "700",
     resizable: "false"
    });
}); 
```

本质上，每次单击打开对话框时，都应先加载新数据，然后再打开对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T10:18:47.610

帮助我创建对话框的`clone()`副本。以下是我的工作代码。

```
jQuery("#seeContent").clone().dialog(
            { autoOpen: "false",
              stack: "true",
              height: "600",
              width: "700",
              resizable: "false" }
  }); 
```

我发布了这个答案，因为我可以帮助别人。

希望，它会帮助你。谢谢。！！

# java - jGroups jar 给出异常

> ID：13890105
> 
> 赞同：0
> 
> 时间：2012-12-15T06:49:34.550
> 
> 标签：java, jgroups

我们有一个遗留项目，我们正在使用 jgroups-all 2.2.9.1 jar。过去几天我们遇到了一个问题，我们的服务器崩溃了

```
 exception :
      java.lang.IllegalArgumentException: timeout value is negative
      at java.lang.Object.wait(Native Method)
      at org.jgroups.protocols.ring.UdpRingNode.receiveToken(UdpRingNode.java:59)
      at org.jgroups.protocols.TOTAL_TOKEN$TokenTransmitter.run(TOTAL_TOKEN.java:1116) 
```

我们认为这是由于我们使用的旧 jgroups jar 造成的。但是如果我们升级 jar 文件，则会出现另一个问题。新 jar已从包**协议中删除了子包****环**（org.jgroups.protocol.ring）。

 **所以我的问题是我们应该如何进行？如果我必须更改 udpring 的实现，那么我应该使用什么来代替？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T07:03:03.030

这个例外讲述了整个故事：

`java.lang.IllegalArgumentException: timeout value is negative`

必须有一个对方法的调用，该方法的参数需要一个正值，并且您可能给它一个负值，因此它会引发异常。

想象一下我有一个`java.util.Date`对象，然后我调用一个方法将年份设置为

```
java.util.Date d = new java.util.Date();
d.setYear(-123); 
```

然后它可能会抛出这种异常，因为我无法为年份指定负值。

因此，只需检查您的代码在何处访问引发此异常的 jar 代码，并检查传递的参数值是否正确。**

# jquery - 如何运行 Facebook 风格的图像编辑 jQuery 插件

> ID：13890114
> 
> 赞同：1
> 
> 时间：2012-12-15T06:52:08.387
> 
> 标签：jquery

我在网上找到了[FaceBook Style Image Editing jQuery Plugin](http://netindonesia.net/blogs/cipto/archive/2009/10/24/jquery-plugin-edit-image-facebook-style.aspx)的脚本，但它似乎不起作用

这是我的代码 test.html ：

**//调用一个jquery**

```
<script type="text/javascript" src="http://localhost/app/js/jquery/jquery-1.6.4.min.js"> 
```

**//调用一个css**

```
<style type="text/css">
 //css code that obtain from website
<style> 
```

**//调用一个js应用**

```
<script type="text/javascript"> 
//js code that is obtained from website
</script> 
```

**//调用应用程序**

```
</script>
    $('#albump').editFaceBook();        
</script> 
```

**//添加图片**

```
<img id ="albump" src="http://localhost/app/imgs/album.gif"> 
```

**我做错了什么吗？或者这个代码是错误的？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-11T01:15:28.180

您需要添加此就绪功能

```
 <script type="text/javascript" src="http://localhost/app/js/jquery/jquery-1.6.4.min.js">
   <script>
    $(document).ready(function(){
    $("#albump").editFaceBook();
    });
   <script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T08:16:27.677

查看您发布的文档链接的第二行 - 它`<div>`仅适用于 's。将您的图像包装在 div 中并在其上调用插件：

```
<div id="albump">
    <img src="http://localhost/app/imgs/album.gif" />
</div>

<script type="text/javascript">
    $("#albump").editFacebook();
</script> 
```

# javascript - JQuery Mobile 列表没有得到正确的样式

> ID：13890116
> 
> 赞同：1
> 
> 时间：2012-12-15T06:52:14.443
> 
> 标签：javascript, jquery, html, css, jquery-mobile

我的 html 文件中有一个无序列表

```
<ul data-role="listview" id="mylist" data-inset="true" data-theme="c" data-dividertheme="a" >

</ul> 
```

列表元素从 js 文件中的数据库填充

```
$('#mylist').append('<li><a href="#"> <h1 class="myHeader">'+item.name+'</h1><p class="myParagraph">'+item.state+'<br>'+item.zipcode+'</p></a></li>'); 
```

这就是我在样式表中所做的

```
.myHeader.ui-li-heading {
    color: #000000;
    font-family: Helvetica;
}

.myParagraph.ui-li-desc {
    color: #333;
    overflow: show;
    text-overflow: clip;
    white-space: normal;
    height: 28px;
    margin-bottom: 0px;
} 
```

问题是列表没有得到正确的样式。我做错了吗？有什么解决办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T07:31:17.947

你错过了：

```
$('#mylist').listview('refresh'); 
```

这是由您的代码制作的示例：http: [//jsfiddle.net/Gajotres/Z6wzQ/](http://jsfiddle.net/Gajotres/Z6wzQ/)

更多信息可以在这里找到：http: [//jquerymobile.com/test/docs/lists/docs-lists.html](http://jquerymobile.com/test/docs/lists/docs-lists.html)。查看标题**更新列表**。

# jquery - 在函数中加载新页面

> ID：13890119
> 
> 赞同：0
> 
> 时间：2012-12-15T06:52:40.150
> 
> 标签：jquery, jquery-mobile

我想要做的是在锚中加载一个函数来更改 jquery mobile 中的页面

这是简化的 HTML：

```
<div data-role="page" id="oldPage">
    <ul>
       <li><a href="newPage()">Link 1</a></li>
       <li><a href="newPage()">Link 2</a></li>
       <li><a href="newPage()">Link 3</a></li>
    </ul>
</div>
<div data-role="page" id="newpage">
</div> 
```

这是脚本：

```
 function newPage() {
       $.mobile.changePage('#newpage');
     } 
```

但是当我单击链接时，我收到消息“错误加载页面”。如何通过单击链接加载功能以更改到此新页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T07:29:22.403

会，`href="javascript:newPage()"`但我不推荐

而是考虑

```
<div data-role="page" id="oldPage">
    <ul>
       <li><a href="#page1" id="someId1">Link 1</a></li>
       <li><a href="#page2" id="someId2">Link 2</a></li>
       <li><a href="#page3" id="someId3">Link 3</a></li>
    </ul>
</div>
<div data-role="page" id="newpage">
</div>

$(function() {
  $("#oldPage a").on("click",function() { 
    $.mobile.changePage($(this).attr("href"));
 });
}); 
```

我猜你的意思是

```
$(function() {
  $("#oldPage a").on("click",function() { 
    $("#oldPage").load($(this).attr("href"));
 });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T09:22:25.560

我认为你做错了而不是 href 你应该使用 onclick 事件

```
<li><a onclick="newPage()" href="#">Link 1</a></li> 
```

coz href 基本上用于加载或更改页面以及链接的功能内部，`preventDefault()`以便仅执行该功能而不是您的链接。

# c# - 检索包含特定子字符串 C# 的字符串

> ID：13890125
> 
> 赞同：0
> 
> 时间：2012-12-15T06:53:44.953
> 
> 标签：c#, regex, string, substring

我有一个字符串格式的输出，如下所示：

“ABCDED 0000A1.txt PQRSNT 12345”

我想在上面的字符串中检索具有 .txt 的子字符串。例如，对于上面它应该返回 0000A1.txt。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T07:12:30.487

您可以像已经建议的那样在空白边界处拆分字符串，也可以像这样重复匹配相同的正则表达式：

```
var input = "ABCDED 0000A1.txt PQRSNT 12345 THE.txt FOO";
var match = Regex.Match (input, @"\b([\w\d]+\.txt)\b");
while (match.Success) {
    Console.WriteLine ("TEST: {0}", match.Value);
    match = match.NextMatch ();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T07:07:34.400

如果空格是分隔符，则拆分将起作用。如果您使用其他分隔符，您可以根据需要添加

```
 string input = "ABCDED 0000A1.txt PQRSNT 12345";
 string filename = input.Split(' ').FirstOrDefault(f => System.IO.Path.HasExtension(f)); 
```

filname = "0000A1.txt" 这适用于任何扩展名

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T07:15:43.507

您可以使用`c#`,`regex`和`pattern`, `match`:)

这是代码，插入试试。请给出意见。

```
string test = "afdkljfljalf dkfjd.txt lkjdfjdl"; 
string ffile = Regex.Match(test, @"\([a-z0-9])+.txt").Groups[1].Value;
Console.WriteLine(ffile); 
```

[参考：正则表达式](http://rubular.com/r/ffiWzDyFT2)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-10T21:36:01.823

我做了这样的事情：

```
string subString = "";
char period = '.';
char[] chArString;
int iSubStrIndex = 0;

if (myString != null)
{
    chArString = new char[myString.Length];
    chArString = myString.ToCharArray();

    for (int i = 0; i < myString.Length; i ++)
    {
        if (chArString[i] == period)
            iSubStrIndex = i;
    }

    substring = myString.Substring(iSubStrIndex);
} 
```

希望有帮助。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-15T06:59:25.783

首先使用将字符串拆分为数组

```
char[] whitespace = new char[] { ' ', '\t' };
string[] ssizes = myStr.Split(whitespace); 
```

然后在数组中找到.txt...

```
// Find first element starting with .txt.
//
string value1 = Array.Find(array1,
    element => element.Contains(".txt", StringComparison.Ordinal)); 
```

现在您的 value1 将具有“0000A1.txt”

快乐编码。

# objective-c - 在 Xcode 中停止声音

> ID：13890127
> 
> 赞同：0
> 
> 时间：2012-12-15T06:53:48.980
> 
> 标签：objective-c, audio

***大家好，请看下面的代码，我希望能够在单击同一个按钮、单击另一个按钮甚至返回主屏幕时停止声音。不知道在这里做什么，***

**FoxViewController.m**

```
#import "FoxViewController.h"
#import <AVFoundation/AVAudioPlayer.h>
AVAudioPlayer *newPlayer_Fox;

@interface FoxViewController ()

@end

@implementation FoxViewController

-(IBAction) Fox;
{
    NSString *soundFilePath = [[NSBundle mainBundle] pathForResource: @"new"ofType: @"mp3"];
NSURL *fileURL = [[NSURL alloc] initFileURLWithPath: soundFilePath];
newPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL: fileURL error: nil];
[newPlayer play];

}

- (id)initWithNibName:(NSString*)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
 {
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
}
return self;
}

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view.
}

 - (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

@end 
```

**FoxViewController.h**

```
#import <UIKit/UIKit.h>
#import <AVFoundation/AVFoundation.h>
#import <AudioToolbox/AudioToolbox.h>
AVAudioPlayer *newPlayer;

@interface FoxViewController : UIViewController

-(IBAction)Fox;

@end 
```

***贾斯汀，非常感谢您的帮助。***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T10:59:40.303

在文件中保持一个`flag`说`BOOL soundPlay`作为全局变量`FoxViewController.h`

现在在`FoxViewController.m's viewDidLoad`方法中

```
 soundPlay = TRUE; 
```

操作按钮将是这样的：

```
-(IBAction) Fox;
{
 if(soundPlay){
   soundPlay = FALSE; //made false for next time another condition will be used.
   NSString *soundFilePath = [[NSBundle mainBundle] pathForResource: @"new"ofType: @"mp3"];
   NSURL *fileURL = [[NSURL alloc] initFileURLWithPath: soundFilePath];
 newPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL: fileURL error: nil];
  [newPlayer play];
 }
 else
 {
    if([newPlayer isPlaying])
    {
       [newPlayer stop];
    }  
 }
} 
```

For `stopping sound`in`background`添加此方法，如果不添加

```
 -(void)viewWillDisappear:(BOOL)animated
 {
   [super viewWillDisappear:animated];

   //stop background sound
   if([newPlayer isPlaying])
   {
    [newPlayer stop];
   }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-10T16:15:31.263

总结一下，停止声音文件的句子是：

```
AudioServicesDisposeSystemSoundID (soundFileObject); 
```

解释（重要理解）：

我有一个包含 18 个不同声音文件的表格视图。当用户选择一行时必须发出相应的文件，并且在选择另一行时，它必须停止前一个声音并播放其他。

所有这些东西都是必要的：

1）在“Build Phases”内的“Link Binary With Libraries”内添加到您的项目“AudioToolbox.framework”

2）在头文件（在我的项目中它称为“GenericTableView.h”）中添加这些句子：

```
#include <AudioToolbox/AudioToolbox.h>

CFURLRef soundFileURLRef;
SystemSoundID soundFileObject;

@property (readwrite) CFURLRef soundFileURLRef;
@property (readonly) SystemSoundID soundFileObject; 
```

3）在实现文件（在我的项目中它称为“GenericTableView.m”）添加这些句子：

```
@synthesize soundFileURLRef;
@synthesize soundFileObject; 
```

在您的“行动”实施中，或者在我的情况下，在：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

// -----------------------------------------------------------------------
// -----------------------------------------------------------------------
// -----------------------------------------------------------------------
//
// That is the question: a way to STOP sound file
//
// -----------------------------------------------------------------------
// Very important to STOP the sound file
AudioServicesDisposeSystemSoundID (soundFileObject);

// -----------------------------------------------------------------------
// -----------------------------------------------------------------------
// -----------------------------------------------------------------------

// In my project "rowText" is a field that save the name of the 
// corresponding sound (depending on row selected)
// It can be a string, @"Alarm Clock Bell" in example

// Create the URL for the source audio file.
// URLForResource:withExtension: method is new in iOS 4.0.
NSURL *soundURL = [[NSBundle mainBundle] URLForResource:rowText withExtension:@"caf"];

// Store the URL as a CFURLRef instance
self.soundFileURLRef = (CFURLRef) [soundURL retain];

// Create a system sound object representing the sound file.
AudioServicesCreateSystemSoundID (soundFileURLRef,&soundFileObject);

AudioServicesPlaySystemSound (soundFileObject);

[soundURL release];
} 
```

4）最后，在同一个实现文件中（在我的项目中它称为“GenericTableView.m”）：

```
- (void)dealloc {
[super dealloc];

AudioServicesDisposeSystemSoundID (soundFileObject);
//CFRelease (soundFileURLRef);
} 
```

我必须评论“CFRelease (soundFileURLRef)”，因为当用户离开表格视图时应用程序意外结束。

所有这些代码都是由苹果公司按比例分配的。在此链接中，您甚至可以找到直接在 iPhone 模拟器中测试的示例代码。

[https://developer.apple.com/library/ios/samplecode/SysSound/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008018-Intro-DontLinkElementID_2](https://developer.apple.com/library/ios/samplecode/SysSound/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008018-Intro-DontLinkElementID_2)

# c# - Shape type binding

> ID：13890130
> 
> 赞同：2
> 
> 时间：2012-12-15T06:54:41.693
> 
> 标签：c#, wpf

I've bind `ObservableCollection` of Layer to a `TreeView` in WPF .

Layer definition is :

```
public class Layer 
{
    public Guid Id { get; set; }
    public string Name { get; set; }
    public string Color { get; set; }
    public GeoType Type { get; set; }
}

public enum GeoType { Area, Line, Point } 
```

This is `TreeView` XAML :

```
<TreeView  Grid.Column="0"
          ItemsSource="{Binding Layers}">
    <TreeView.ItemTemplate>
        <HierarchicalDataTemplate ItemsSource="{Binding SubLayers}">
            <StackPanel Orientation="Horizontal">

                <Canvas Background="LightGray">
                    <Ellipse Fill="{Binding Color}"
                             Height="15"
                             Width="15"
                             StrokeThickness="5"
                             Stroke="{Binding Color}"/>
                </Canvas>

                <TextBlock Margin="20,0,0,0" Text="{Binding Path=Name}"/>
            </StackPanel>
        </HierarchicalDataTemplate>
    </TreeView.ItemTemplate>
</TreeView> 
```

I want to specify shape type based on `GeoType` property. I mean if `GeoType` is Line instead of canvas in above XAML it should be Line. How can I do it using binding? Should I create converter?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T07:56:02.157

You can do it using the with pure XAML.

```
...
<Window.Resources>
    <DataTemplate x:Key="LineTemplate">
        <Line />
    </DataTemplate>
    <DataTemplate x:Key="EllipseTemplate">
        <Ellipse />
    </DataTemplate>
    ... etc
</Window.Resources>
...

<TreeView  Grid.Column="0"
          ItemsSource="{Binding Layers}">
    <TreeView.ItemTemplate>
        <HierarchicalDataTemplate ItemsSource="{Binding SubLayers}">
            <StackPanel Orientation="Horizontal">
                <Canvas Background="LightGray">
                    <ContentControl Content="{Binding}">
                        <ContentControl.Style>
                            <Style TargetType="ContentControl">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Path=Type}" Value="{StaticResource local:GeoType.Line}">
                                        <Setter Property="ContentTemplate" Value="{StaticResource LineTemplate}" />
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding Path=Type}" Value="{StaticResource local:GeoType.Ellipse}">
                                        <Setter Property="ContentTemplate" Value="{StaticResource EllipseTemplate}" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </ContentControl.Style>
                    </ContentControl>
                </Canvas>

                <TextBlock Margin="20,0,0,0" Text="{Binding Path=Name}"/>
            </StackPanel>
        </HierarchicalDataTemplate>
    </TreeView.ItemTemplate>
</TreeView> 
```

It is only one of many possible solutuion. **local** is the namespace where your **GeoType** is. You should decorate the templates inside the resources to use data binding.

# css - 在不编辑引导文件的情况下撤消引导媒体声明？

> ID：13890131
> 
> 赞同：0
> 
> 时间：2012-12-15T06:54:51.157
> 
> 标签：css, twitter-bootstrap, stylesheet

无论如何，我可以在后续的样式表中收回它，而不必从引导响应中删除它。我不喜欢直接更改引导表。

```
@media (max-width: 767px)
    body {
        padding-right: 20px;
        padding-left: 20px;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T06:59:56.840

哎呀，当我尝试这个时，我的支架丢失了，但它有效！

```
@media (max-width: 767px) {
    body {
        padding-right: 0px;
        padding-left: 0px;
    }
} 
```

# html - 嵌套的 Div 不能很好地融入容器 Div

> ID：13890134
> 
> 赞同：1
> 
> 时间：2012-12-15T06:55:08.887
> 
> 标签：html, css, dojo, positioning

我有一个在另一个容器 div (panelContainer) 中创建的 dojox 图表 (chartDiv)。

即使我将 chartDiv 的宽度和高度设置为 90%，它也会在 chartDiv 中引入滚动条，或者如果我更改 ChartDiv 的填充和边距设置，它会溢出到父容器之外。

我知道这将是一个基本问题，但我一直在玩很多不同的 CSS 设置，但似乎没有什么可以解决将 chartDiv 保持在 panelContainer 的范围内（占用 95% 的空间）

![在此处输入图像描述](../Images/9cf410082397d707ab08e6f2353894f1.png)

[这个小提琴](http://fiddle.jshell.net/jakc/WsrHs/)可能会帮助你发现我哪里出错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T17:50:22.633

当您制作没有宽度/高度的图表（或 dojox.gfx 画布）时，它会尽力从您放入的容器中确定其尺寸。但它可能会感到困惑！

在你的小提琴的情况下，#chart 有一个已知的宽度，因为它是一个块元素，并且从 panelBG 继承了它的宽度，它是 panelContainer 宽度的 100%。

#chart div 并没有真正的高度，因为块元素是 0px 高，直到你把东西放进去（或者给它添加一些样式）。因此，（我认为）图表只是假设高度与宽度成比例。

在您的 CSS 中，我看到您有一个宽度和高度为 90% 的 #chartDiv 规则。我猜您打算将其用作#chart。但这实际上并不能完全解决问题！

假设您更改了它，图表现在将使用 90%x90% 作为宽度/高度，但如果您尝试一下，您会发现标签/轴的位置仍然不正确。

因为您已将标题容器浮动到左侧，所以图表容器从同一“行”开始并尝试使其内容“浮动”在标题容器周围。这会使轴标签错位（绿色），而实际图表（svg/canvas，粉红色）下降到标题容器下方。

![花车](../Images/d7f832557ff5abdea724cfcda6781cb3.png)

要解决此问题，请告诉图表容器不要在两侧浮动：

```
#chart {
    width: 90%;
    height: 90%;
    clear: both;
} 
```

不过，浮动任何东西并不是真正必要的，将高度设置为 90% 并不总是理想的。我在更新的小提琴中提出了一个建议：http: [//fiddle.jshell.net/froden/WsrHs/4/](http://fiddle.jshell.net/froden/WsrHs/4/)。

不同之处在于标题容器是一个跨越顶部的 div，而图表容器是绝对定位的，因此它可以填充下面留下的任何空间。然后，您可以在 panelContainer 上设置宽度/高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T03:37:29.653

绝对定位的元素从正常流程中取出。这就是为什么某些元素正在扩展到其容器之外的原因。我感觉你的花车也参与其中，但是小提琴有点太复杂了，需要制作一个更简单的版本。

# mysql - Drupal 在远程 mysql 上安装

> ID：13890139
> 
> 赞同：0
> 
> 时间：2012-12-15T06:56:41.893
> 
> 标签：mysql, drupal, installation, remote-server

我正在尝试在远程 mysql 服务器上安装 drupal。我已经在 mysql 中创建了用户并授予了权限。

我可以像这样“mysql -u xxxx -h 10.xxx.yy.zz3 -p”通过我的网络服务器的命令行进行连接。

但是当我尝试安装drupal时，我得到“SQLSTATE [28000] [1045]用户'xxxx'@'localhost'的访问被拒绝”。我已授予“xxxx”@“10.xxx.yy.zz3”的权限，但 drupal 将 localhost 而不是 IP 附加到用户名。我已将 settings.php 更改为 mysql 服务器 IP。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T10:57:26.317

不要编辑`settings.php`文件，请尝试以下操作：

安装过程中的第三个屏幕（*数据库配置*）让您在远程 MySQL 服务器上设置数据库。为此，请展开*高级选项*并输入数据库主机。

我不能保证这会起作用，但这是我设置 Drupal 以使用远程 MySQL 服务器的方式，我从来没有遇到过这个问题。顺便说一句，我总是使用规范域名（例如`mysql.example.org`）而不是 IP 地址。

# sql - SQL JOIN 从两个表中获取详细信息

> ID：13890140
> 
> 赞同：0
> 
> 时间：2012-12-15T06:56:45.917
> 
> 标签：sql, sql-server, database

我有 3 张桌子

1.  `User_Details` 带列 ( `user_id, name`)
2.  `Stock_Details` 带列 ( `user_id foreign key, stocks`)
3.  `Billing_Details`带列 ( `user_id foreign key, billing`)

如何使用和显示用户`Stock_Details`列表`billing_Details`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T07:20:48.967

```
SELECT u.user_id,
       u.name,
       b.billing,
       s.stocks
FROM user_details u
LEFT JOIN billing_details b on b.user_id = u.user_id
LEFT JOIN stock_details s on s.user_id = u.user_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T07:00:41.120

请试试：

```
SELECT 
    T1.user_id,
    T1.name,
    T2.stocks,
    T3.billing
FROM
    User_Details T1 INNER JOIN Stock_Details T2 ON T1.User_id=T2.User_id
        INNER JOIN Billing_Details T3 ON T2.User_id=T3.User_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T12:58:32.503

如果您想显示库存表或帐单表中的记录，请尝试此...

```
select <your required fields> 
From User_Details ud inner join Stock_Details sd on ud.user_id=sd.user_id
Union 
select <your required fields> 
From User_Details ud inner join billing_Details bd on ud.user_id=bd.user_id
where ud.user_id not in (select user_id from stock_details) 
```

注意：字段在联合和相同的顺序中是相同的。否则它会返回错误。

# environment-variables - 使用scons运行编译程序时如何定义环境变量

> ID：13890153
> 
> 赞同：0
> 
> 时间：2012-12-15T06:59:17.793
> 
> 标签：environment-variables, scons

我确实编写了我的 SConstruct 文件，所以我通过以下方式构建和运行程序`scons run`

```
program = env.Program('build/output', Glob('build/test/*.cpp'))
env.Default(program)
env.Alias('run', program, program[0].abspath) 
```

我可以编译我的程序并毫无问题地运行它，但是当我尝试在我的程序中使用 glut 和 opengl 时，出现以下错误：

> */home/tran/workspace/bobail/build/test/test
> freeglut (/home/tran/workspace/bobail/build/test/test): 无法打开显示''*

经过一番搜索，我发现我编译的程序需要将环境变量 DISPLAY 设置为`DISPLAY=:0`. 我尝试使用 Scons Export 命令，但到目前为止没有成功。

有人可以告诉我该怎么做。

编辑：如果我从命令行而不是 Scons 环境执行它，我的程序可以正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T07:33:10.690

我发现了如何做到这一点。您需要检索 DISPLAY 全局环境并将其导入 scons 环境中。你使用这个环境来定义运行程序的别名。

```
test_env = Environment()
test_env.Append(ENV = {'DISPLAY' : os.environ['DISPLAY']})
test = test_env.Program(build_path + '/test/test', Glob(build_path + '/test/*.cpp'))
test_env.Alias('check', test, test[0].abspath) 
```

# ruby - 无法创建 rvmrc，RVM 不是函数，使用“rvm use ...”选择红宝石将不起作用

> ID：13890155
> 
> 赞同：0
> 
> 时间：2012-12-15T06:59:36.343
> 
> 标签：ruby, rvm

```
alex@ubuntu:~/Documents/ruby_projects/my_project$ rvm --create --rvmrc 1.9.3@my_project 
```

这个给了我

```
RVM is not a function, selecting rubies with 'rvm use ...' will not work.

You need to change your terminal emulator preferences to allow login shell.
Sometimes it is required to use `/bin/bash --login` as the command.
Please visit https://rvm.io/integration/gnome-terminal/ for a example. 
```

为什么我无法以这种方式创建 rvmrc？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T07:07:05.583

可能是您`rvm`以某种方式损坏了您的安装。可以通过破坏它所包含的各种 shell 脚本文件来修复它，但解决该问题的最简单方法是重新安装它。

如果在现有安装之上重新安装不起作用，请在安装之前尝试完全删除它：

```
rvm implode 
```

通常最好在它被销毁后创建一个新的 shell，以便从头开始。RVM 有各种各样的钩子，即使在它被内爆之后，它们也可以保留在任何现有的 shell 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T07:36:52.470

您需要阅读消息并按照说明进行操作。

rvm 的基本用途是：

```
rvm [use] <ruby-version> 
```

省略 use 关键字仍然意味着使用 ruby​​ 但不会显示消息。

# android - 当我在主类中扩展活动时，如何使用基本适配器过滤列表项？

> ID：13890160
> 
> 赞同：0
> 
> 时间：2012-12-15T07:00:17.857
> 
> 标签：android, android-listview, filtering

在这里我正在编写代码，其中我扩展了 baseadapter，并且我已经设置了要在列表视图上显示的所有数据，我想从列表视图中搜索数据

```
public class Listadapter extends BaseAdapter {

    public Listadapter() {
        super();
    }

    public int getCount() {
        return productList.size();
    }

    public long getItemId(int position) {
        return productList.indexOf(getItem(position));
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflator = ProductList.this.getLayoutInflater();

        TextView txtprodName, txtcategory, txtOfferDate;
        ImageView ProductImage;

            convertView = inflator.inflate(R.layout.product_list_item, null);                                   

            txtprodName = (TextView) convertView.findViewById(R.id.txtprodName);
            txtcategory = (TextView) convertView.findViewById(R.id.txtcategory);
            txtOfferDate = (TextView) convertView.findViewById(R.id.txtOfferDate);
            ProductImage = (ImageView) convertView.findViewById(R.id.ProductImage);

            HashMap<String, String> hm = productList.get(position);

        //txtUserName.setText(lstUsers.get(position).getFirst_Name()+" "+lstUsers.get(position).getLast_Name());
        txtprodName.setText(hm.get(TAG_PRODUCT_NAME));
        txtcategory.setText(hm.get(TAG_CATEGORY_NAME));
        txtOfferDate.setText(hm.get(TAG_OFFER_START_TIME));

        if(drawable.get(position)!=null)
            ProductImage.setImageDrawable(drawable.get(position));
        else
            ProductImage.setImageResource(R.drawable.nopic_place);

        return convertView;
    }

    @Override
    public Object getItem(int arg0) {
        // TODO Auto-generated method stub
        return null;
    }
} 
```

现在如何在 OnTextChanged() 中调用 listadapter 进行过滤和搜索...我已经用简单的适配器做到了这一点..但它与 baseadapter 产生了问题

```
lstProductList.setAdapter(new Listadapter());

            inputSearch.addTextChangedListener(new TextWatcher() {

                @Override
                public void onTextChanged(CharSequence cs, int arg1,
                        int arg2, int arg3) {
                    // When user changed the Text
                    /*( (SimpleAdapter) lstProductList.getAdapter()).getFilter().filter(
                            cs);*/

                    } 
```

# twitter - 如何通过 Twitter API 拉取名人列表？

> ID：13890162
> 
> 赞同：-3
> 
> 时间：2012-12-15T07:00:27.860
> 
> 标签：twitter, twitter-oauth, twitter4j

如何通过 Twitter API 提取名人列表和不同类别？就像在这个网站上[http://www.twellow.com/categories/entertainment](http://www.twellow.com/categories/entertainment) ... 它在推特 API 上显示艺人名单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T20:33:44.860

该网站的类别似乎主要依赖于列出自己的用户。Twitter 本身并不公开诸如“名人”或“艺人”之类的类别。

# html - 如何定义不同的 CSS 转换而不互相踩踏

> ID：13890164
> 
> 赞同：0
> 
> 时间：2012-12-15T07:00:51.693
> 
> 标签：html, css, css-transforms

如果一个类为元素添加了旋转，而另一个类添加了比例，我如何在 CSS 中定义它们而不会使它们相互踩踏。

```
<!-- HTML snippet -->
<div class="class1 class2"></div>

/* CSS snippet */
.class1 { transform:rotate(45deg); }
.class2 { transform:scale(0.5); } 
```

在上面的示例中，div 只会被缩放，因为 class2 中的 transform 属性定义覆盖了 class 1 中的属性。如何获得这两种不同的样式规则来应用这些不同的转换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T07:04:25.413

不幸的是，我相信您将需要按照以下方式做一些事情

```
<div class="class1"><span class="class2"></span></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T07:06:50.453

[演示](http://jsfiddle.net/tutspack/dQY2g/)

CSS

```
 .class1 {
        margin-top:100px;
        width:100px;
        height:30px;
        background-color:#000;
        transform:rotate(45deg);
    } .class2 {
         width:100px;
        height:30px;
        background-color:#00f;
        transform:scale(0.5);
    } 
```

HTML

```
<div class="class1"></div>

<div class="class2"></div> 
```

您可能必须使用 2 个 div 或一次在 span 内

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T07:07:42.870

尝试

```
/* CSS snippet */
.class1 { transform:rotate(45deg); }
.class1.class2 { transform:scale(0.5); } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T09:02:18.220

我试过了，效果很好。我认为它只需要在旧浏览器前添加关键字。

```
.class1{-moz-transform: rotate(20deg);
-wibkit-transform: rotate(20deg);
-o-transform: rotate(20deg);
-ms-transform: rotate(20deg)}

.class2{-moz-transform: scale(.5);
-webkit-transform: scale(.5);
-o-transform: scale(.5);
-ms-transform: scale(.5)} 
```

# java - spring框架中如何设计bean

> ID：13890172
> 
> 赞同：0
> 
> 时间：2012-12-15T07:01:40.153
> 
> 标签：java, spring, javabeans

我是 Spring 框架的新手。也许这更像是一个 Java EE bean 设计问题，而不是与 Spring 框架相关的问题。无论如何，我只是拍摄它，看看我能把自己弄得多么清楚。

所以我有一个服务。该服务将连接字符串作为构造函数参数。然后您可以使用该服务将文件上传到连接字符串指示的位置。

因此，您将从以下内容开始：

```
public class MyService{
    public MyService(String connectionStr){ ... }
} 
```

当您需要此类服务时，请致电：

```
MyService service = new MyService("xxx");
... 
```

这就是我以前做的。没有什么花哨。现在，如果我在 Spring 下在 Java 中执行此操作，我会以某种方式希望该服务成为一个 bean。我需要这样做：

```
@Component
public class MyService{
    @Autowired
    public MyService(@Value(...some connection string...) String connectionStr) {...}
} 
```

但是我很困惑如何在编译时注入依赖项？我永远不知道我将传递什么连接字符串来创建服务。当我阅读 Spring 教程时，它们中的大多数都有在 XML 配置文件中编码的参数。我可以像上面那样设计一个 Spring bean，但需要在运行时传递参数吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T07:32:27.243

你可以设计一个这样的方法：

```
void upload(String location,XXX other parameters); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T07:35:11.020

我没有真正得到你的问题，但会尝试回答。

检查[这里](https://stackoverflow.com/questions/6172993/when-to-choose-spring-framework)或谷歌检查你是否真的想去春天。来到您的查询中，对于您的服务，您必须在 spring 上下文中定义类似这样的内容。

```
<bean id="myService" class="com.blah.MyService">
    <constructor-arg>
        <value>http://HOST/test/</value>
    </constructor-arg>
</bean> 
```

您的服务等级将是，

```
public class MyService{

    public MyService(String connectionString) {...}
} 
```

这是您在应用程序中调用服务的方式

```
ApplicationContext context = new ClassPathXmlApplicationContext(
                                new String[] { "context.xml" });
                MyService service = (MyService) context
                                .getBean("myService"); 
```

以上也可以使用注释来实现。[在这里](http://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch04s11.html)查看更多详情

# php - 来自数组复选框的两个值

> ID：13890176
> 
> 赞同：0
> 
> 时间：2012-12-15T07:01:54.820
> 
> 标签：php, mysql

所以我有一个医院收费的mysql表。我的程序目前只获得检查程序的价格。但是现在，我还想在检查时获取过程名称。

事务.php

```
while($row = mysql_fetch_array($result))
{
     echo ' <tr> <td>'.$row[0].'</td> <td>'.$row[1].'</td><td>'.$row[2].'</td>';
     $procedure=$row['procedure'];
     echo '<td><input type="checkbox" name="er[]" value="$price."|".$procedure"></td>';
     echo "</tr>";
}
echo '</table>'; 
```

计算.php

```
 <?php
      if(isset($_POST['er']))
      {
        $ercharge=$_POST['er'];
        $totalofer = array_sum($ercharge);  
      }
      if(isset($_POST['ultrasound']))
      {
        $x=$_POST['ultrasound'];
        $totalofultrasound =  array_sum($x);
      }
      if(isset($_POST['confinement']))
      {
        $y=$_POST['confinement'];
        $totalofconfinement =  array_sum($y);
      }
      $total = $totalofer + $totalofultrasound + $totalofconfinement;
      $p = explode("|", $ercharge);
      echo $p;
      echo  $total;
?> 
```

它只获得价格行。value 属性可以有两个值吗？我不能只做另一个不合适的复选框。

编辑：爆炸功能不起作用。它说：警告：explode() 期望参数 2 是字符串，数组在第 18 行的 C:\xampp\htdocs\computation.php 中给出

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T07:11:47.443

您应该在 HTML 中拆分参数：

```
 echo '<td><input type="checkbox" name="checked[$row_index][]" value="1">';
    echo '<input type="hidden" name="prices[$row_index][]" value="$price">';
    echo '<input type="hidden" name="procedures[$row_index][]" value="$procedure"></td>'; 
```

where`$row_index`在每一行（`tr`标签）上递增

顺便说一句，explode 将作用于 er 数组的项目，而不是数组本身。尝试：

```
foreach ($er as $item) {
  var_dump( explode( "|", $item ) );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T07:20:47.700

我不确定我是否理解您的问题，但您不能将复选框的名称属性设置为过程名称吗？看起来您正在将名称设置为 er[] 数组，但您以后再也不会引用它。

# asp.net - ASP 移动兼容网站

> ID：13890179
> 
> 赞同：1
> 
> 时间：2012-12-15T07:02:40.487
> 
> 标签：asp.net, jquery-mobile, mobile

我已经使用 aspx 完成了一个 cms 网站，我需要使该网站与移动设备兼容。使网站移动兼容的 asp 技术有哪些？

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T07:40:33.433

为移动设备浏览器开发 ASP.NET 页面与为桌面浏览器开发页面没有本质区别。为了帮助您为移动设备创建应用程序，ASP.NET 提供了专门用于移动 Web 开发的 System.Web.Mobile 命名空间。

示例代码：

[**支持移动设备的 ASP.NET Web 窗体/MVC 应用程序示例**](http://aspnetmobilesamples.codeplex.com/)

参考这个：

[用于移动设备的 ASP.NET 网站](http://msdn.microsoft.com/en-us/library/ms178619%28v=vs.100%29.aspx)

[ASP.NET 中的移动支持](http://www.asp.net/mobile)

[jQuery 移动框架](http://jquerymobile.codeplex.com/)

# iphone - 如何在 UITextView 中的任何光标位置在 UITextView 中插入 UIButton

> ID：13890184
> 
> 赞同：1
> 
> 时间：2012-12-15T07:03:38.053
> 
> 标签：iphone, objective-c, cursor, position, uitextview

在我的应用程序中，我有一个`UITextView`. 在该`UITextView`用户输入文本时，当用户单击 **UIButton（已在工具栏中）**时，需要`UIButton`在光标当前位置插入一个。我怎样才能得到光标的 X 和 Y 坐标。以编程方式？

我的代码在**UIButton 下面（已经在工具栏中）**

```
-(void)inserButton
{
    UIButton *myButton  =   [UIButton buttonWithType:UIButtonTypeCustom];
    myButton.frame      =   CGRectMake(30, 5, 10, 10);
    UIImage *Chkimg = [UIImage imageNamed:@"unchk.png"];
    [myButton setBackgroundImage:Chkimg forState:UIControlStateNormal];
    [note addSubview:myButton];
} 
```

在这里我需要替换值

```
myButton.frame = CGRectMake(X, Y, 10, 10); 
```

是否可以获取光标的 X 和 Y 值。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T09:32:18.250

你可以使用`caretRectForPosition`方法来找到你的光标点也许然后你可以向前迈进

```
CGPoint cursorPosition = [textview caretRectForPosition:textview.selectedTextRange.start].origin; 
```

# iphone - iPhone：无法使用 AudioStreamer 流式传输 m3u8 url

> ID：13890188
> 
> 赞同：3
> 
> 时间：2012-12-15T07:04:11.483
> 
> 标签：iphone, audio-streaming, audiostreamer, m3u8

我正在使用*Matt Gallagher 的* **AudioStreamer**在应用程序中执行音频流，`URL`它来自服务器，现在它的类型`.m3u8`格式，问题是 ON，在它是`.mp3`类型和正常流式传输之前。它显示错误“未找到音频数据”。但是我尝试在模拟器`URL`中的**Safari**浏览器中播放，并且播放效果很好，所以`URL`.

我一直在谷歌搜索很长时间，但它以这两个 SO 问题结束。[Question-1](https://stackoverflow.com/questions/9922700/how-to-play-m3u8-audio-file)，[Question-2](https://stackoverflow.com/questions/2715015/streaming-to-iphone-via-m3u8)，但没有一个答案是肯定的，`MPMoviePlayerController`但我想用相同的方式播放它。

所以我深入研究了**AudioStreamer** .h 和 .m 文件的代码，在那里我了解到文件类型选择的逻辑在#line no 处。555

```
 + (AudioFileTypeID)hintForFileExtension:(NSString *)fileExtension { .... } 
```

需要`AudioFileTypeID`返回那里，列表中定义`AudioFile.h`的`AudioToolbox.framework`不包含`.m3u8`文件类型所以我不能在这里返回它（我尝试在那里修补不同的类型）。

我试图找到任何替代类型（可以用来代替这个），但没有得到任何结果。然后我浏览了[Apple Doc](https://developer.apple.com/library/mac/#documentation/MusicAudio/Reference/AudioFileConvertRef/Reference/reference.html)和[问题讨论](https://github.com/mattgallagher/AudioStreamer/issues/43)，但都没有帮助我！

PS 我已经检查`AudioToolbox.framework`了`iOS6.0.`文件类型的可用性，但它根本不存在。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T07:23:32.973

您可以尝试使用 mpmovieviewcontroller。我还使用它在我的一个应用程序中播放流媒体音频。对于流式内容（如来自网络服务或互联网的音频/视频），它是完美的播放器。而且它看起来也像 iPhone 默认播放器。搜索一些关于它的教程并实现它。它也很容易实现。

# android - 将图像发送到网络服务器时出现 OutOfMemoryException

> ID：13890200
> 
> 赞同：0
> 
> 时间：2012-12-15T07:06:52.347
> 
> 标签：android, base64, out-of-memory

因此，要将图像发送到 Web 服务器，我需要将其编码为 base64，然后在服务器端解码。

这就是我所关注的。

但是我在这行代码中得到了 OutOfMemoryException：

```
httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs)); 
```

并且图像大小为**1mb**。那么，有什么替代方法可以做到这一点？

我读到这个：

[使用 Http Post 发送图像](https://stackoverflow.com/questions/2935946/sending-images-using-http-post#answers)

建议使用**MultipartEntity**。但是我到底在哪里可以找到这些库？因为其中 1 个链接已损坏。

**代码：**

```
Uri selectedImageUri = data.getData();
String selectedImagePath = getPath(selectedImageUri);

try {
    File imageFile = new File(selectedImagePath);
    Bitmap bitmap = BitmapFactory.decodeFile(imageFile
            .getAbsolutePath());
    setImage.setImageBitmap(bitmap);

    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    bitmap.compress(Bitmap.CompressFormat.JPEG, 100, baos);
    byte[] b = baos.toByteArray();
    base64code = Base64.encodeToString(b, Base64.DEFAULT);
    } catch (Exception e) {

    e.printStackTrace();
    } 
```

可能一种方法可能是降低质量。但是如果我将它设置为**20**或**30**并且图像已经是低质量 1（取自低端设备）。我可能会得到一个质量很差的图像。

做一些检查大小并根据它降低质量的事情。我不认为是个好主意。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T07:21:21.010

使用 MultipartEntity 将图像上传到服务器是不错的选择之一。

MultipartEntity 库下载：

[apache-mime4j-0.6.jar](http://www.java2s.com/Code/JarDownload/apache-mime4j/apache-mime4j-0.6.jar.zip)

[httpmime-4.0.1.jar](http://www.java2s.com/Code/JarDownload/httpmime/httpmime-4.0.1.jar.zip)

希望它可以帮助你。

谢谢。

# sql - NoSQL 的开源 SQL 连接器（如 MongoDB）

> ID：13890208
> 
> 赞同：0
> 
> 时间：2012-12-15T07:09:03.833
> 
> 标签：sql, mongodb, tsql, nosql

> **可能重复：**
> [对 mongodb 的 sql 查询？](https://stackoverflow.com/questions/4615916/sql-query-to-mongodb)

我最近遇到了 Quest 数据连接器，可以使用 MongoDB 等 NoSQL 数据库进行 SQL 查询。但是，我认为这只是开发用途。是否有任何开源连接器允许对 NoSQL 数据库进行 SQL 查询？最特别的是 MongoDB。

# android - 为什么我的回调在后台一段时间后为空（包括示例应用程序）

> ID：13890215
> 
> 赞同：1
> 
> 时间：2012-12-15T07:11:28.457
> 
> 标签：android, android-fragments

我有`FragmentActivity`两个标签，它们是`ListFragment`s。每个`ListFragment`都有一个回调。

（**注意**：如果有人注意到，这个问题的大部分是从我自己的问题[Callback after orientation change become null](https://stackoverflow.com/questions/13655944/callback-after-orientation-change-becomes-null)重新散列的，但这是一个不同的问题，因为这与旋转无关，但我希望了解我的实际问题回调。）

回调示例

[如http://developer.android.com/training/basics/fragments/communicating.html](http://developer.android.com/training/basics/fragments/communicating.html)所述，回调与*onAttach(...)*方法内部相关联

```
OnTab1Listener mTab1Callback;

public interface OnTab1Listener {
    public void onTab1Update();
}

@Override
public void onAttach(Activity activity) {
    Log.d(TAG, "onAttach");
    super.onAttach(activity);

    try {
        mTab1Callback = (OnTab1Listener)activity;
    } catch (ClassCastException e) {
        throw new ClassCastException(activity.toString() + " must implement OnTab1Listener");
    }
} 
```

后来，我`FragmentActivity`通过这个正常工作的回调与通信。

在应用程序被发送到后台一段时间后，我将应用程序带到前面并触发将使用回调的东西，回调为*空*，我的应用程序崩溃。我相信一旦它在后台并且系统进行垃圾收集就会发生这种情况。

这是一个在正常执行期间工作正常的示例调用。

```
public void toggleEnabled(View v) {
    Log.d(TAG, "toggleEnabled");

    // null pointer here
    mTab1Callback.onTab1Update();
} 
```

**问题**

1.  如果东西被垃圾收集，为什么**mTab​​1Callback**被垃圾收集而不是恢复？我的印象是`Activity`生命周期和`Fragment`生命周期将重新启动，包括*onAttach(...)*如果部分引用被垃圾收集。
2.  这是如何正确修复的？

**示例应用**

我创建了一个展示这种行为的示例应用程序。完整的源代码在这里[http://www.2shared.com/file/kkgFejUq/broken_example.html](http://www.2shared.com/file/kkgFejUq/broken_example.html)

**示例应用程序堆栈跟踪**

```
FATAL EXCEPTION: main
java.lang.IllegalStateException: Could not execute method of the activity
at android.view.View$1.onClick(View.java:3591)
at android.view.View.performClick(View.java:4084)
at android.widget.CompoundButton.performClick(CompoundButton.java:100)
at android.view.View$PerformClick.run(View.java:16966)
at android.os.Handler.handleCallback(Handler.java:615)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4745)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.reflect.InvocationTargetException
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at android.view.View$1.onClick(View.java:3586)
... 12 more
Caused by: java.lang.NullPointerException
at com.example.myapp.Tab2.toggleEnabled(Tab1.java:87)
at com.example.myapp.MainActivity.onClick(MainActivity.java:50)
... 15 more 
```

这是*Tab1.java:87*

```
mTab1Callback.onTab1Update(); 
```

如果您让应用程序进入后台，做一些其他的事情，例如玩一会儿游戏，听音乐等，然后将其返回到前台并单击其中一个复选框，这将成为一个空指针。

万一这很重要，我将应用程序图标放在启动器上并从那里启动它，然后在我运行其他应用程序一段时间后将其带到前台。这是它崩溃的时候。

我也不能让它在模拟器上崩溃，只有真正的硬件。当手机插入计算机时，它似乎不太可能崩溃，如果在测试时拔掉电源，它似乎更容易崩溃。

TabsAdapter与此有*​​关吗？*

此外，这使用了文件中包含的*SherlockActionBar 。*它应该用作*MyApp*的库。

**更新**

我开始看到*getActivity()*在哪里为*空*，并且在旋转或长期在后台运行之后，它唯一为空的地方是触发回调的*toggleEnabled()*函数内部。

这似乎表明罪魁祸首是不再存在的`MainActivity`引用 a 。`Fragment`

结合空间代码，这本质上是我在单击in后引用*toggleEnabled()*函数的方式。（完整代码见附件示例）`CheckBox``Tab1`

```
public void onClick(View v) {
     Tab1 tab = (Tab1)mTabsAdapter.getItem(0);
     tab.toggleEnabled(v);
} 
```

所以我深入研究`TabsAdapter`了*getItem(...)*。这里有什么

私有 ArrayList mFragments = new ArrayList(); // 设置标签等的代码 @Override public Fragment getItem(int position) { Fragment frag = mFragments.get(position); if (frag.getActivity() == null) Log.d(TAG, "getItem: Activity is null");

```
return mFragments.get(position); 
```

}

在旋转之前会发生什么，*getActivity()*不是*null*。旋转后，*getActivity()*为*null*。这似乎表明它没有重新创建我认为`Fragment`的正确的。`Context`然而，这就是我对这类事情的了解结束的地方。

我可以制作`mFragments`静态并且它可以工作，但我觉得这不是一个正确的解决方案。

有谁知道为什么`Fragment`s 没有正确连接`Activity`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T22:38:54.750

OnAttach 看起来以类似于 onCreate 的方式调用，即仅在创建时调用一次，因此当您从后台恢复时，将跳过此方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T19:18:43.290

> 有谁知道为什么片段没有正确附加的活动？

这是因为工作方式`ViewPager`。当您第一次设置`ViewPager`（以及实例化两个片段）时，它将调用该`getItem()`方法并接收正确的`Fragment`. 一旦你旋转手机，它`Activity`连同其中的所有`Fragments`东西都将被销毁并重新创建。此时，`ViewPager`将尝试在内部重新创建它的状态，并使`Fragments`与之前的状态相匹配，并构造他自己的`Fragments`。`Fragments`您使用该方法添加的您自己的`addTab`方法将不会被使用，因为在旋转手机后，该`getItem()`方法将不会被初始调用`Fragments`。问题是，使用您当前的代码，您调用该`getItem`方法来`Fragments`获取`ViewPager`这将从`Fragments`列表中检索 。这些片段是简单的实例，没有绑定到 ，`Activity`因此方法中设置的回调`onAttach()`是`null`.

主要问题是`getItem`不能调用 a`FragmentPagerAdapter`来获得`Fragment`那个位置。关于如何做到这一点，stackoverflow 上有很多问题。我已经编写了下面的方法，以始终在片段列表中包含正确的片段，无论做什么`ViewPager`（例如，通过删除您设置的片段）。您当前的代码将保持不变，只需添加：

```
@Override
public Object instantiateItem(ViewGroup container, int position) {
    Fragment created = (Fragment) super
            .instantiateItem(container, position);
    if (position < mFragments.size()) {
        Fragment fromList = mFragments.get(position);           
        if (!created.equals(fromList)) {
            mFragments.set(position, created);
        }
    } else {
        int difference = position - mFragments.size();
        if (difference == 0) {
            mFragments.add(created);                
        } else {
            for (int i = 0; i < difference - 1; i++) {
                mFragments.add(null);
            }
            mFragments.add(created);
        }
    }
    return created;
} 
```

到`TabsAdapter`. 它应该放弃任何手动创建`Fragments`的有利于 ViewPager 自己的片段。看看它是否有效。

还：

*   不要使用`setRetainInstance(true)`
*   使用引用的静态字段时要小心，`Context`以避免内存泄漏（例如，您`MyObjectAdapter`应该将其设为实例字段而不是静态字段）。

# java - 将 jfxrt 移动到 lib/ext 以用于 OSGI

> ID：13890216
> 
> 赞同：3
> 
> 时间：2012-12-15T07:11:41.983
> 
> 标签：java, osgi, javafx, bndtools

有人建议，解决 javafx 类加载和 osgi 问题的部分方法是将 jfxrt 移动到 Java 安装 lib/ext 目录，以便在 JVM 启动时加载它。

如果这是在 Java 的私有安装中完成的，则 javafx 类在设计时可用，但在安装 javafx 包时在运行时找不到。

有可能这可以工作吗？

我在 Eclipse 中使用 felix 和 bndtools 作为 Ubuntu 12.04 上的开发环境。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T09:32:48.827

首先，使用 javafx 包的包必须使用`Import-Package`.

接下来，您需要获取系统捆绑包以导出包。默认情况下，系统包只导出标准的 JRE 包和 OSGi 框架包；您可以通过设置属性来扩展它`org.osgi.framework.system.packages.extra`。由于您使用的是 Bndtools（好！），您可以按如下方式设置属性：

```
-runsystempackages: javafx.foo,javafx.bar... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T11:56:05.867

我最近发布了[Drombler FX](http://wiki.drombler.org)的第一个早期访问版本，这是一个基于 OSGi 和 Maven（POM-first）的 JavaFX 模块化富客户端平台。

你可以在这里阅读更多关于它的信息：http: [//puces-blog.blogspot.ch/2012/12/drombler-fx-building-modular-javafx.html](http://puces-blog.blogspot.ch/2012/12/drombler-fx-building-modular-javafx.html)

[入门： http](http://wiki.drombler.org/GettingStarted) ://wiki.dromler.org/GettingStarted

生成的输出在这里解释： [http ://wiki.drombler.org/GettingStarted#dromler-fx-sample-application-the-binaries-explained](http://wiki.drombler.org/GettingStarted#drombler-fx-sample-application-the-binaries-explained)

（我不必移动任何 JavaFX JAR。）

# r - R中回归的可视化图

> ID：13890218
> 
> 赞同：0
> 
> 时间：2012-12-15T07:12:08.690
> 
> 标签：r, regression

我正在尝试在 R 中运行基本的时间序列回归。

```
reg<-lm(y~x)
summary(reg)
Call:lm(formula = y ~ x)

Residuals:
     Min       1Q   Median       3Q      Max 
-100.188  -21.600    0.503   21.999   97.296 

Coefficients:
             Estimate Std. Error t value Pr(>|t|)    
(Intercept) 102.53835    4.66296  21.990   <2e-16 ***
x            -0.03687    0.04524  -0.815    0.415 
```

但是，我还想要 y 变量、模型的投影和下面的残差的可视化图。R中是否有能力进行这种回归？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T07:55:41.243

我不完全确定你想要绘制什么。以下为您提供了两张图 - 一张带有数据和模型预测，另一张带有残差。

```
par(mfrow=c(2,1))  # Two plots in one window

plot(x,y)                # Your datapoints
lines(x,predict(reg))    # The model prediction

plot(x, residuals(reg), ylab='Residuals')    # x vs. residuals 
```

R 的线性模型绘图工具相当不错。我强烈建议您查看 的输出`plot(reg)`，如果解释正确，它可能会为您提供比绘图更多的信息。

# c - malloc on (char**)

> ID：13890222
> 
> 赞同：0
> 
> 时间：2012-12-15T07:13:12.793
> 
> 标签：c, malloc, exec, posix, fork

好吧，我正在尝试使用 C 为 linux 编写一个 shell。使用函数 fork() 和 execl()，我可以执行每个命令，但现在我一直在尝试读取参数：

```
char * command;
char ** c_args = NULL;

bytes_read = getline (&command, &nbytes, stdin);

command = strtok(command, "\n ");
int arg = 0;
c_arg = strtok(NULL, "\n ");
while( c_arg != NULL ) {
    if( c_args == NULL ) {
        c_args = (char**) malloc(sizeof(char*));
    }
    else {
        c_args = (char**) realloc( c_args, sizeof(char*) * (arg + 1) );
    }
    c_args[arg] = (char*) malloc( sizeof(char)*1024 );
    strcpy( c_args[arg], c_arg );
    c_arg = strtok(NULL, "\n ");
    arg++;
}
...
pid_t pid = fork()
...
...
execl( <path>, command, c_args, NULL)
...
... 
```

这样，当我尝试传递参数时，我会从命令中得到错误，例如：

```
ls -l 
```

给我：

```
ls: cannot access p��: No such file or directory 
```

我知道问题在于 c_args 分配。它出什么问题了？

干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T07:20:05.303

您不能`execl()`用于变量的参数列表；您需要使用`execv()`或其变体之一（`execve()`,`execvp()`等）。仅`execl()`当您知道编译时将出现的所有参数时才能使用。在大多数情况下，一般的 shell 不会知道这一点。一个例外是当您执行以下操作时：

```
execl("/bin/sh", "/bin/sh", "-c", command_line, (char *)0); 
```

在这里，您正在调用 shell 以将单个字符串作为命令行运行（没有其他参数）。但是，当您在完整的 shell 中处理人们在键盘上键入的内容时，您将无法知道他们在编译时键入了多少参数。

在最简单的情况下，您应该使用：

```
execvp(c_args[0], c_args); 
```

第零个参数，命令名，应该是你传递给`execvp()`. 如果这是一个简单的文件名（否`/`），那么它将在您的`$PATH`环境变量的目录中查找该命令。如果命令名包含斜杠，那么它将查找指定的（相对或绝对）文件名，如果存在则执行，如果不存在则失败。其他参数都应该在以空结尾的列表中`c_args`。

现在，可能还有其他内存分配问题；我没有仔细检查代码。不过，您可以通过参数列表的诊断打印来检查它们：

```
char **pargs = c_args;
while (*pargs != 0)
    puts(*pargs++); 
```

这会将每个参数打印在单独的行上。请注意，它在遇到空指针之前不会停止；至关重要的是，您将终止指向参数字符串的指针列表。

您的这段代码：

```
c_args[arg] = (char*) malloc( sizeof(char)*1024 );
strcpy( c_args[arg], c_arg ); 
```

在通常情况下看起来像是矫枉过正，在极端情况下看起来内存分配不足。当您复制字符串时，请分配足够的长度。我看到你`strtok()`用来分解一个字符串——它适用于 shell 的早期版本，但是当你开始处理命令行时`ls -l>$tmp`，你会发现`strtok()`' 在你开始之前践踏你的分隔符阅读它成为主要责任。但是，当您使用它时，您可能不必像那样复制参数；你可以设置`c_args[arg++] = result_from_strtok;`. 当您确实需要复制时，您可能应该使用`strdup()`; 例如，它不会忘记为尾随分配足够的空间`'\0'`，并且既不会过度分配也不会分配不足。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T08:17:57.363

乔纳森有一个很好的答案，我只是想补充一些东西。

您*可以*使用`popen`or`system`直接由 shell 执行。它们通常不受欢迎，因为它们可以很容易地注入，但如果你正在编写一个开放的 shell，我看不出使用它们有什么害处。

如果您要使用有限的 shell（它接受类似 sh 的语法），请查看[wordexp](http://linux.die.net/man/3/wordexp)。它做了很多，但根据我的经验，它做得太多了，特别是如果你正在尝试编写一个适度安全的解释器（它会做一些愚蠢的事情，比如波浪号扩展和变量替换）。

# sql - 如何在选择中使用变量

> ID：13890223
> 
> 赞同：0
> 
> 时间：2012-12-15T07:13:14.497
> 
> 标签：sql

如何在 select 中使用变量，如下所示：

```
 SELECT @V_BALANCE_PRIN=E.REC_PRINCIPAL_OS AS BALANCE_PRINCIPAL 
 FROM CR_TERMINATION_DTL E 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T18:43:48.567

You do need 2 queries to do this I believe, you can declare and assign the variable at the same time, but not select it. If you do a select @variable = (query) you don't get the result displayed, you just assign the value.

So I think the best you can do (to use the fewest lines) is:

```
DECLARE @V_BALANCE_PRIN NVARCHAR(10) = (SELECT E.REC_PRINCIPAL_OS FROM CR_TERMINATION_DTL E)
SELECT @V_BALANCE_PRIN AS BALANCE_PRINCIPAL 
```

Obviously your data type will have to match, and you will also have to make sure that the subquery only returns a single value as pointed out by Justin, otherwise it will error.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T07:32:21.453

两个查询怎么样：

```
SELECT @V_BALANCE_PRIN=E.REC_PRINCIPAL_OS FROM CR_TERMINATION_DTL E
SELECT @V_BALANCE_PRIN AS BALANCE_PRINCIPAL 
```

# php - 比较开始日期和结束日期的 PHP 验证

> ID：13890224
> 
> 赞同：0
> 
> 时间：2012-12-15T07:13:18.177
> 
> 标签：php, validation

下面的代码显示了开始日期和结束日期的比较，如果结束日期大于开始日期，则显示错误

但我想做的是如何用我不知道的完整 PHP 代码编写相同的功能。任何人都可以帮助在 PHP 编码中编写以下功能吗

**HTML**

```
<input type="text" id="starddate" />
<input type="text" id="enddate" />
<div id="msg"></div>
<input type="submit" id="submit" /> 
```

**jQuery**

```
jQuery.validator.addMethod("greaterThan", 
function(value, element, params) {

    if (!/Invalid|NaN/.test(new Date(value))) {
        return new Date(value) > new Date($(params).val());
    }

    return isNaN(value) && isNaN($(params).val()) 
        || (parseFloat(value) > parseFloat($(params).val())); 
},'Must be greater than {0}.');

$("#enddate").rules('add', { greaterThan: "#startdate" }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T07:18:10.747

```
if ((strtotime($_POST['startdate'])) > (strtotime($_POST['enddate'])))
{
    // Start date is in front of end date!
}
else
{
    // Ok
} 
```

# ruby-on-rails-3 - 骨干结构提示

> ID：13890226
> 
> 赞同：0
> 
> 时间：2012-12-15T07:13:41.060
> 
> 标签：ruby-on-rails-3, backbone.js

Backbone 新手，想知道是否有任何 Backbone 专家可以就如何构建以下应用程序提供建议：

用户登录以查看仪表板。仪表板有 6 个窗格，每个窗格的内容由每个用户的首选项列表（具有属性 panelone：contentA、paneltwo：contentD 等的主干模型）确定

窗格上方是内容类型的水平列表。用户应该能够将内容类型拖放到窗格上以保存它并立即在该窗格中呈现内容。

例如，如果 ContentF 放在 Pane3 上，则 Pane3 保存 ContentF ( Model.set('Pane3: ContentF' ) 并使用 ContentF 的模板更新自身。

具体来说，如何在路由器、视图和模板之间划分此功能？

谢谢，交流

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T13:17:03.950

我不能认为自己是骨干专家，反正那是我的两分钱。

我建议你使用[Marionette](http://marionettejs.com/)，这是一个建立在 Backbone 之上的框架，可以大大简化事情。

您可以将仪表板视图设置为布局，并将每个面板设置为其中的一个区域。这样，您可以在不影响其他面板的情况下更新每个面板的内容，并通过 Marionette 的内置内存管理清除所有附加到旧视图的事件和内容。

此外，我认为您的路由器不应受到面板内容更改的太大影响，它应该只呈现分配给该特定内容的视图，因此它只需要能够访问列表模型。每个视图都有其特定的模板，仅此而已！

# c# - 我有一个带有数字区域的列表，我想建立一个包含所有数字的列表，我该怎么做？

> ID：13890231
> 
> 赞同：-1
> 
> 时间：2012-12-15T07:14:20.103
> 
> 标签：c#

我有一个列表，看起来像这样：

```
in index[0] "Test 0 Length 32 [41 - 73]"
in index[1] "Test 1 Length 22 [81 - 103]" 
```

等等。

我需要从每个索引中获取所有数字。例如，在新列表中我需要： 41,42,43,44,45,46,47....73 然后从索引 [1] 中获取数字，然后在新列表中的 73 之后继续 81 ,82,83,84,85....103

因此，新的列表将包含所有数字。

要计算长度，例如 32 或 22 我正在做：

```
int len = LR[i].end - LR[i].start; 
```

Lr[i].end 是 73，Lr[i].start 是 41

所以我需要计算并获取 41 到 73 之间的所有数字，包括 41 和 73，然后将它们添加到新列表中，然后到下一个迭代，其中 LR[i].end 是 103，开始是 81，然后再次获取数字并添加他们到名单

所以最后列表将包含一大行中的所有数字。

我该怎么做 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T07:58:43.340

```
List<string> list = new List<string>()
{
    "Test 0 Length 32 [41 - 73]",
    "Test 1 Length 22 [81 - 103]"
};

var numbers = 
   list.SelectMany(
          s => Regex.Matches(s, @"\[(\d+)[ -]+(\d+)\]")
               .Cast<Match>()
               .Select(m => m.Groups.Cast<Group>().Skip(1).Select(x=>x.Value)
                                                          .ToArray())
               .Select(x => new {start=int.Parse(x[0]), end=int.Parse(x[1]) })
               .SelectMany(x => Enumerable.Range(x.start, x.end- x.start + 1))
        )
       .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T07:51:25.927

我不确定 LR 的内容是什么，但我假设您将范围编号作为有效的整数（否则，您将不得不使用 regex 或 String.IndexOf 来查找它们）。

但是，如果您有对象列表，其中对象看起来像这样：

```
class pairs
{  
int item1;   
int item2;    
} 
```

那么您可以轻松地执行以下操作（请参阅[Enumerable.Range](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.range.aspx)）
Enumerable.Range 接受两个参数：start 和 count。要获得计数，我们必须从下限中减去上限并加一以包含上限值。：

```
var values = new List<int>();
list.ForEach(x =>values.AddRange(Enumerable.Range(x.Item1, x.Item2 - x.Item1 + 1))); 
```

[使用Tuple](http://msdn.microsoft.com/en-us/library/system.tuple.aspx)的工作控制台应用程序：

```
var list = new List<Tuple<int, int>>();
            list.Add(Tuple.Create(41, 73));
            list.Add(Tuple.Create(81, 103));
            list.Add(Tuple.Create(120, 150));
            // So, now we have three pair of values.   41-73, 81-103, 120-150

            //Now we can loop through the list and generate sequence using Enumerable.Range like this: 
            var values = new List<int>();
           list.ForEach(x =>values.AddRange(Enumerable.Range(x.Item1, x.Item2 - x.Item1 + 1)));

            //And print out items.
            values.ForEach(x => Console.WriteLine(x));
            //will print 41,42,43......73, 81,82,83....,103, 120, 121,.....150 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T07:57:12.443

SelectMany 将为您提供一个连接的子序列序列，因此以下将为您提供每个范围内所有数字的列表。

```
ranges.SelectMany(r => Enumerable.Range(r.start, r.end - r.start + 1)).ToList(); 
```

# php - 在没有cookie且不使用URL的情况下在php中维护会话

> ID：13890237
> 
> 赞同：0
> 
> 时间：2012-12-15T07:15:08.113
> 
> 标签：php, session

我有一个问题，当一个人登录时，他应该被限制为只有一个 IP 地址。他应该不能同时通过不同的机器登录，所以有没有办法在不使用会话 cookie 和在 URL 中不使用会话 ID 的情况下保持会话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T07:23:17.397

是的，通过在数据库中编写会话。除了您编写的常规会话数据（id 和用户数据）和 user_ip。因此，当会话处于活动状态时，您可以限制来自另一个 ip/机器甚至浏览器的用户访问（如果您将会话唯一性设置为 IP 和浏览器标头 - 用户 agnet ）

请检查下面的链接，了解如何扩展会话处理程序和保存/读取数据库（因此不使用 cookie）

[在php中的数据库中设置会话](https://stackoverflow.com/questions/2950355/set-session-in-database-in-php)

还有这个

[使用数据库和IP地址的PHP用户身份验证？](https://stackoverflow.com/questions/11076762/php-user-authentication-using-database-and-ip-address)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T07:24:53.867

您可以创建一个数据库表，在用户登录时使用会话 ID 进行更新，并在用户注销时将其删除。登录时，您可以检查数据库以确保数据库中没有活动会话。

# c# - System.Web.Mvc.AjaxHelper 不包含“BeginForm”的定义

> ID：13890242
> 
> 赞同：1
> 
> 时间：2012-12-15T07:16:06.800
> 
> 标签：c#, asp.net-mvc

System.Web.Mvc.AjaxHelper 不包含“BeginForm”的定义我在我的 mvc3 项目中遇到此错误请帮我解决这个问题

这是我的代码：

```
@{
    ViewBag.Title = "Register";
    Layout = "~/Views/Shared/_MyLayout.cshtml";
}
@model FoodMart.Models.AccountModel
@using (Ajax.BeginForm("Register", new AjaxOptions { UpdateTargetId = "result" }))
{   
<div id="result" style="width:800px">    
<fieldset style="width:100%">
<legend><span style="font-size:larger; color:Green; font-family:Arial">Register Here</span></legend>
 <table style="width:100%">
 <tr>
 <td>@Html.LabelFor(m => m.users.FirstName,"Enter First Name")</td>
 <td>@Html.TextBoxFor(m => m.users.FirstName, new { style = "width:150px" })</td>
 <td><span style="font-size:medium; color:Green;">@Html.ValidationMessageFor(m=>m.users.FirstName)</span></td>
 </tr>
 <tr>
 <td>@Html.LabelFor(m => m.users.Landline)</td>
 <td>@Html.TextBoxFor(m => m.users.Landline, new { style = "width:150px" })</td>

 </tr>

 <tr>
 <td><input type="submit" value="Register" /></td>
 <td></td>
 </tr>

 </table>
</fieldset>
</div>    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T07:25:56.817

`AjaxHelper.BeginForm`是在命名空间中定义的扩展方法`System.Web.Mvc.Ajax`。

`web.config`您的文件夹中是否定义了此命名空间`Views`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-02T11:04:50.800

您是否尝试在视图顶部插入此指令？

```
@using System.Web.Mvc.Ajax 
```

# html - td 的宽度被忽略

> ID：13890243
> 
> 赞同：0
> 
> 时间：2012-12-15T07:16:08.483
> 
> 标签：html, css

我已经`table-layout: fixed`为列设置了 、 width 和 padding ，但是每 22px 的实际宽度比它应该的要高。什么会导致这种情况？

![插图](../Images/9c3734579c442bd8c003eef1f45dfd4c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T09:49:51.270

您已将表格宽度设置为 1000 像素，单元格宽度也设置为像素，因此它们加起来不会达到 1000 像素。显然，浏览器必须使单元格更宽或忽略整个表格上的设置。作为作者，您最好做出这样的选择，例如通过简单地删除表格上的宽度设置。

# ruby-on-rails-3 - TinyMCE - 将所有格式和样式输出作为类

> ID：13890244
> 
> 赞同：2
> 
> 时间：2012-12-15T07:16:28.467
> 
> 标签：ruby-on-rails-3, tinymce

为了避免 XSS，我正在清理输入。如果我允许某些属性（例如样式），我[不确定并且无法找到明确的答案](https://stackoverflow.com/questions/5371648/is-span-style-safe-for-sanitize)，如果允许`style`in sanitize 将阻止 xss 与否。（答案中给出的示例是 sanitize 不允许的，也不会导致 XSS）

例如，如果用户选择从左到右的文本方向或从右到左的文本方向按钮，输出将是

```
<span style="direction:ltr"> user text </span> 
```

我想避免这种情况并以某种方式使它像这样

```
<span class="LTR"> user text </span> 
```

之后我会在不同的 CSS 中更改 LTR 类。

我尝试更改tinymce.yml，但我能做的最好的就是打破表格而不是让它工作。

有人可以给我一个如何做到这一点的例子，这样我就可以为所有格式和样式做到这一点？（或者更好地使用`nokogiri`或类似地解析它并自己更改它？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T08:48:36.783

我会做类似以下的事情

```
var editor = tinymce.get('your_editor_id');
$(ed.getBody()).find('[style=direction:ltr]').attr('style','').addClass('LTR'); 
```

您可以将 tinymce[设置](http://www.tinymce.com/wiki.php/Configuration%3asetup)配置参数与要执行此操作的事件一起使用：

```
tinyMCE.init({
   ...
   setup : function(ed) {
      ed.onKeyUp.add(function(ed, evt) {
          $(ed.getBody()).find('[style=direction:ltr]').attr('style','').addClass('LTR');
      });
   }
}); 
```

# visual-studio - 迁移后出现参数异常

> ID：13890247
> 
> 赞同：0
> 
> 时间：2012-12-15T07:16:55.907
> 
> 标签：visual-studio, xaml

我使用 VS2012 将我的 WPF 项目从 2008 年迁移到 2012 年，但是对于 XAML 文件，它向我显示了类似的错误

```
System.ArgumentException
'{DependencyProperty.UnsetValue}' is not a valid value for the 'System.Windows.Controls.Image.Source' property on a Setter.

   at Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.WaitForCompletion(NestedCallContext nestedCallContext, BlockingCall call, WaitHandle timeoutSignal)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.MarshalOutSynchronous(Action action, Int32 targetApartmentId, WaitHandle aborted, WaitHandle timeoutSignal)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.MarshalOut(Action action, Int32 targetApartmentId, WaitHandle aborted, CallSynchronizationMode syncMode, WaitHandle timeoutSignal)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.MarshalOut[TValue](RemoteHandle`1 targetObject, Action action, CallSynchronizationMode syncMode)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.MarshalOut[TResult,TValue](RemoteHandle`1 targetObject, Func`2 func, CallSynchronizationMode syncMode)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.LocalDesignerService.CreateDesignerImpl(IHostSourceItem item, IHostTextEditor editor, RemoteCancellationToken remoteCancelToken)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.LocalDesignerService.<>c__DisplayClass12.<Microsoft.Expression.DesignHost.IDesignerService.CreateDesigner>b__11(RemoteCancellationToken remoteToken)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.LocalDesignerService.CallWithCancellation[TResult](CancellationToken cancelToken, Func`2 func)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.LocalDesignerService.Microsoft.Expression.DesignHost.IDesignerService.CreateDesigner(IHostSourceItem item, IHostTextEditor editor, CancellationToken cancelToken)
   at Microsoft.Expression.DesignHost.IsolatedDesignerService.IsolatedDesignerView.CreateDesignerViewInfo(CancellationToken cancelToken) 
```

# eclipse - Eclipse 和 CDT，有时 build 不会生成新的二进制文件

> ID：13890249
> 
> 赞同：1
> 
> 时间：2012-12-15T07:17:25.817
> 
> 标签：eclipse, eclipse-cdt

系统是Linux。我有一个用 eclipse 打开的 C++ 项目。在另一个窗口中，我在创建二进制文件的文件夹中有一个终端。通常我编辑项目，构建它，然后从终端执行二进制文件，它可以工作。但是有时似乎构建不会更新二进制文件。任何人都知道如何解决这种行为？

注意：我不想一直手动进行清理，因为不舒服，特别是因为我的触摸板的右键单击在 Linux 下效果不佳。但是，如果清洁是自动完成的，那就没问题了。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T23:08:28.910

您是否在构建设置设置之前自动保存？如果在构建 eclipse 之前不保存项目，将不会创建新的二进制文件。

# java - 更新超过 10K 记录的休眠性能问题

> ID：13890254
> 
> 赞同：1
> 
> 时间：2012-12-15T07:19:43.787
> 
> 标签：java, performance, hibernate

我目前正在尝试进行批量上传操作，其中我需要解析 excel 并将详细信息更新到数据库中。问题是数据需要存储到多个表中并保持关系。问题不是当我有大约 50-100 条记录要更新时，而是当我有大约 50000 条记录要更新时受到很大影响。上传需要很长时间，有时浏览器会放弃等待响应到达。请在下面找到代码和映射文件。请让我知道我可以做些什么来提高性能并更快地完成处理。

**注意：**级联都是必需的。

```
***.hbm.xml
    <?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated Mar 19, 2012 9:24:47 AM by Hibernate Tools 3.3.0.GA -->
<hibernate-mapping>
    <class name="com.****.****.hibernate.****" table="V_ACCOUNT_DIM">
        <id name="acctDimIdN" type="long">
            <column name="ACCT_DIM_ID_N" precision="10" scale="0" />
             <generator class="sequence">
                <param name="sequence">ACCOUNT_DIM_SEQ</param>
            </generator>
        </id>
        <property name="gdwIdN" type="long">
            <column name="GDW_ID_N" precision="38" scale="0" not-null="true" />
        </property>
        <property name="pycisInstnIdN" type="java.lang.Long">
            <column name="PYCIS_INSTN_ID_N" precision="10" scale="0" />
        </property>
        <property name="acctNotesC" type="string">
            <column name="ACCT_NOTES_C" length="4000" />
        </property>
        <property name="trdSysShrtNmC" type="string">
            <column name="TRD_SYS_SHRT_NM_C" length="100" />
        </property>
        <property name="reimbAuthorizeD" type="date">
            <column name="REIMB_AUTHORIZE_D" length="7" />
        </property>
        <property name="reimbInitD" type="date">
            <column name="REIMB_INIT_D" length="7" />
        </property>
        <property name="reimbEffD" type="date">
            <column name="REIMB_EFF_D" length="7" />
        </property>
        <property name="acctGainLossAmtN" type="java.lang.Double">
            <column name="ACCT_GAIN_LOSS_AMT_N" precision="15" />
        </property>
        <property name="buySellIndC" type="string">
            <column name="BUY_SELL_IND_C" length="10" />
        </property>
        <property name="navImpcN" type="java.lang.Double">
            <column name="NAV_IMPC_N" precision="15" />
        </property>
        <property name="delIndC" type="string">
            <column name="DEL_IND_C" length="1" not-null="true" />
        </property>
        <property name="updUsrC" type="string">
            <column name="UPD_USR_C" length="12" />
        </property>
        <property name="updTsD" type="date">
            <column name="UPD_TS_D" length="7" />
        </property>
        <property name="insUsrC" type="string">
            <column name="INS_USR_C" length="12" not-null="true" />
        </property>
        <property name="insTsD" type="date">
            <column name="INS_TS_D" length="7" not-null="true" />
        </property>
        <set name="incidentAcctSecFacts" table="V_INCIDENT_ACCT_SEC_FACT" inverse="true" lazy="true" fetch="select" cascade="all-delete-orphan"  >
            <key>
                <column name="ACCT_DIM_ID_N" precision="22" scale="0" not-null="true" />
            </key>
            <one-to-many class="com.****.***.***.I***Fact" />
        </set>
        <set name="incidentAcctFacts" table="V_INCIDENT_ACCT_FACT" inverse="true" lazy="true" fetch="select" cascade="all-delete-orphan"  >
            <key>
                <column name="ACCT_DIM_ID_N" precision="22" scale="0" not-null="true" />
            </key>
            <one-to-many class="com.****.***.***.I***Fact" />
        </set>
        <set name="accountAttachmentFacts" table="V_ACCOUNT_ATTACHMENT_FACT" inverse="true" lazy="true" fetch="select" cascade="all-delete-orphan"  >
            <key>
                <column name="ACCT_DIM_ID_N" precision="22" scale="0" not-null="true" />
            </key>
            <one-to-many class="com.****.***.***.A****Fact" />
        </set>
    </class>
</hibernate-mapping>

I****Dim.hbm.xml

    <?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated Mar 19, 2012 9:24:47 AM by Hibernate Tools 3.3.0.GA -->
<hibernate-mapping>
    <class name="com.****.***.***.I****Dim" table="V_****_DIM">
        <id name="incidentDimIdN" type="long">
            <column name="INCIDENT_DIM_ID_N" precision="10" scale="0" />
            <generator class="sequence">
                <param name="sequence">INCIDENT_DIM_SEQ</param>
            </generator>
        </id>
        <property name="errMemoIdC" type="string">
            <column name="ERR_MEMO_ID_C" length="60" not-null="true" unique="true" />
        </property>
        <property name="errMemoD" type="date">
            <column name="ERR_MEMO_D" length="7" />
        </property>
        <property name="idD" type="date">
            <column name="ID_D" length="7" not-null="true" />
        </property>
        <property name="incidentD" type="date">
            <column name="INCIDENT_D" length="7" not-null="true" />
        </property>
        <property name="ntfcD" type="date">
            <column name="NTFC_D" length="7" not-null="true" />
        </property>
        <property name="totGainLossN" type="java.lang.Double">
            <column name="TOT_GAIN_LOSS_N" precision="18"  scale="2"/>
        </property>
        <property name="ovrdAttachedAcctC" type="string">
            <column name="OVRD_ATTACHED_ACCT_C" length="1" />
        </property>
        <property name="gainLossCalcMthdC" type="string">
            <column name="GAIN_LOSS_CALC_MTHD_C" length="4000" />
        </property>
        <property name="deemedAnErrC" type="string">
            <column name="DEEMED_AN_ERR_C" length="1" not-null="true" />
        </property>
        <property name="errRatifiedC" type="string">
            <column name="ERR_RATIFIED_C" length="1" not-null="true" />
        </property>
        <property name="errAcctUsedC" type="string">
            <column name="ERR_ACCT_USED_C" length="1" not-null="true" />
        </property>
        <property name="aprvPrcsC" type="string">
            <column name="APRV_PRCS_C" length="4000" />
        </property>
        <property name="incidentShrtDescC" type="string">
            <column name="INCIDENT_SHRT_DESC_C" length="4000" />
        </property>
        <property name="incidentSumC" type="string">
            <column name="INCIDENT_SUM_C" length="4000" />
        </property>
        <property name="incidentNotesC" type="string">
            <column name="INCIDENT_NOTES_C" length="4000" />
        </property>
        <property name="delIndC" type="string">
            <column name="DEL_IND_C" length="1" not-null="true" />
        </property>
        <property name="updUsrC" type="string">
            <column name="UPD_USR_C" length="12" />
        </property>
        <property name="updTsD" type="date">
            <column name="UPD_TS_D" length="7" />
        </property>
        <property name="insUsrC" type="string">
            <column name="INS_USR_C" length="12" not-null="true" />
        </property>
        <property name="insTsD" type="date">
            <column name="INS_TS_D" length="7" />
        </property>
        <set name="incidentAttachmentFacts" table="V_****FACT" inverse="true" lazy="true" fetch="select" cascade="all-delete-orphan"  >
            <key>
                <column name="INCIDENT_DIM_ID_N" precision="10" scale="0" not-null="true" />
            </key>
            <one-to-many class="com.****.***.***.I***Fact" />
        </set>
        <set name="incidentActionItemFacts" table="V_****_FACT" inverse="true" lazy="true" fetch="select" cascade="all-delete-orphan"  >
            <key>
                <column name="INCIDENT_DIM_ID_N" precision="22" scale="0" />
            </key>
            <one-to-many class="com.****.***.***.I****Fact" />
        </set>
        <set name="incidentAcctSecFacts" table="V_****FACT" inverse="true" lazy="true" fetch="select" cascade="all-delete-orphan"  >
            <key>
                <column name="INCIDENT_DIM_ID_N" precision="22" scale="0" not-null="true" />
            </key>
            <one-to-many class="com.***.***.****.IncidentAcctSecFact" />
        </set>
        <set name="irgMemberAssignmentFacts" table="V_IRG_MEMBER_ASSIGNMENT_FACT" inverse="true" lazy="true" fetch="select" cascade="all-delete-orphan"  >
            <key>
                <column name="INCIDENT_DIM_ID_N" precision="22" scale="0" />
            </key>
            <one-to-many class="com.***.***.****.IrgMemberAssignmentFact" />
        </set>
        <set name="incidentAcctFacts" table="V_INCIDENT_ACCT_FACT" inverse="true" lazy="true" fetch="select" cascade="all-delete-orphan"  >
            <key>
                <column name="INCIDENT_DIM_ID_N" precision="22" scale="0" not-null="true" />
            </key>
            <one-to-many class="com.***.***.****.IncidentAcctFact" />
        </set>
        <set name="acctAttachmentFacts" table="V_ACCOUNT_ATTACHMENT_FACT" inverse="true" lazy="true" fetch="select" cascade="all-delete-orphan"  >
            <key>
                <column name="INCIDENT_DIM_ID_N" precision="22" scale="0" not-null="true" />
            </key>
            <one-to-many class="com.***.***.****.AccountAttachmentFact" />
        </set>
    </class>
</hibernate-mapping>

CerSecurityDim.hbm.xml

<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated Mar 19, 2012 9:24:47 AM by Hibernate Tools 3.3.0.GA -->
<hibernate-mapping>
    <class name="com.***.***.****.CerSecurityDim" table="V_CER_SECURITY_DIM">
        <id name="cerSecuDimIdN" type="long">
            <column name="CER_SECU_DIM_ID_N" precision="22" scale="0" />
             <generator class="sequence">
                <param name="sequence">CER_SECURITY_DIM_SEQ</param>
            </generator>
        </id>
        <property name="fmrCusipC" type="string">
            <column name="FMR_CUSIP_C" length="30" not-null="true" />
        </property>
        <property name="tckrC" type="string">
            <column name="TCKR_C" length="30" />
        </property>
        <property name="secuNmC" type="string">
            <column name="SECU_NM_C" not-null="true" />
        </property>
        <property name="numOfShrTrdN" type="java.lang.Long">
            <column name="NUM_OF_SHR_TRD_N" precision="10" scale="0" />
        </property>
        <property name="secuGainLossN" type="java.lang.Double">
            <column name="SECU_GAIN_LOSS_N" precision="15" />
        </property>
        <property name="buySellIndC" type="string">
            <column name="BUY_SELL_IND_C" length="10" />
        </property>
        <property name="delIndC" type="string">
            <column name="DEL_IND_C" length="1" not-null="true" />
        </property>
        <property name="updUsrC" type="string">
            <column name="UPD_USR_C" length="12" />
        </property>
        <property name="updTsD" type="date">
            <column name="UPD_TS_D" length="7" />
        </property>
        <property name="insUsrC" type="string">
            <column name="INS_USR_C" length="12" not-null="true" />
        </property>
        <property name="insTsD" type="date">
            <column name="INS_TS_D" length="7" not-null="true" />
        </property>
        <set name="incidentAcctSecFacts" table="V_INCIDENT_ACCT_SEC_FACT" inverse="true" lazy="true" fetch="select" cascade="all-delete-orphan"  >
            <key>
                <column name="SECU_DIM_ID_N" precision="22" scale="0" not-null="true" />
            </key>
            <one-to-many class="com.***.***.****.IncidentAcctSecFact" />
        </set>
    </class>
</hibernate-mapping>

IncidentAcctFact.hbm.xml

<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated Mar 19, 2012 9:24:47 AM by Hibernate Tools 3.3.0.GA -->
<hibernate-mapping>
    <class name="com.***.***.****.IncidentAcctFact" table="V_INCIDENT_ACCT_FACT">
        <id name="incidentAcctFactIdN" type="long">
            <column name="INCIDENT_ACCT_FACT_ID_N" precision="22" scale="0" />
            <generator class="sequence">
                <param name="sequence">INCIDENT_ACCT_FACT_SEQ</param>
            </generator>
        </id>
        <many-to-one name="accountDim" class="com.***.***.****.AccountDim" fetch="select">
            <column name="ACCT_DIM_ID_N" precision="22" scale="0" not-null="true" />
        </many-to-one>
        <many-to-one name="incidentDim" class="com.***.***.****.IncidentDim" fetch="select">
            <column name="INCIDENT_DIM_ID_N" precision="22" scale="0" not-null="true" />
        </many-to-one>
       <!--  <many-to-one name="attachmentTypeDim" class="com.***.***.****.AttachmentTypeDim" fetch="select">
            <column name="ATTACHMENT_TYPE_DIM_ID_N" precision="22" scale="0" not-null="false" />
        </many-to-one> -->
        <property name="relEffFromD" type="date">
            <column name="REL_EFF_FROM_D" length="7" />
        </property>
        <property name="relEffThruD" type="date">
            <column name="REL_EFF_THRU_D" length="7" />
        </property>
        <property name="ltstRelIndC" type="string">
            <column name="LTST_REL_IND_C" length="1" />
        </property>
        <property name="delIndC" type="string">
            <column name="DEL_IND_C" length="1" not-null="true" />
        </property>
        <property name="updUsrC" type="string">
            <column name="UPD_USR_C" length="12" />
        </property>
        <property name="updTsD" type="date">
            <column name="UPD_TS_D" length="7" />
        </property>
        <property name="insUsrC" type="string">
            <column name="INS_USR_C" length="12" />
        </property>
        <property name="insTsD" type="date">
            <column name="INS_TS_D" length="7" />
        </property>
    </class>
</hibernate-mapping>

IncidentAcctSecFact.hbm.xml

<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated Mar 19, 2012 9:24:47 AM by Hibernate Tools 3.3.0.GA -->
<hibernate-mapping>
    <class name="com.***.***.****.IncidentAcctSecFact" table="V_INCIDENT_ACCT_SEC_FACT">
        <id name="incidentAcctSecIdN" type="long">
            <column name="INCIDENT_ACCT_SEC_ID_N" precision="22" scale="0" />
            <generator class="sequence">
                <param name="sequence">INCIDENT_ACCT_SEC_FACT_SEQ</param>
            </generator>
        </id>
        <many-to-one name="accountDim" class="com.***.***.****.AccountDim" fetch="select">
        <column name="ACCT_DIM_ID_N" precision="22" scale="0" not-null="true" />
        </many-to-one>
        <many-to-one name="cerSecurityDim" class="com.***.***.****.CerSecurityDim" fetch="select">
            <column name="SECU_DIM_ID_N" precision="22" scale="0" not-null="true" />
        </many-to-one>
        <many-to-one name="incidentDim" class="com.***.***.****.IncidentDim" fetch="select">
            <column name="INCIDENT_DIM_ID_N" precision="22" scale="0" not-null="true" />
        </many-to-one>
         <property name="relEffFromD" type="date">
             <column name="REL_EFF_FROM_D" length="7" />
         </property>
         <property name="relEffThruD" type="date">
             <column name="REL_EFF_THRU_D" length="7" />
         </property>
         <property name="ltstRelIndC" type="string">
             <column name="LTST_REL_IND_C" length="1" />
         </property>
         <property name="delIndC" type="string">
             <column name="DEL_IND_C" length="1" />
         </property>
         <property name="updUsrC" type="string">
             <column name="UPD_USR_C" length="12" />
         </property>
         <property name="updTsD" type="date">
             <column name="UPD_TS_D" length="7" />
         </property>
         <property name="insUsrC" type="string">
             <column name="INS_USR_C" length="12" />
         </property>
         <property name="insTsD" type="date">
             <column name="INS_TS_D" length="7" />
         </property>
    </class>
</hibernate-mapping>

The method where the actual processing is as follows.

   public boolean retrieveDataAndParseFile(IncidentDetailsForm incidentDetailsForm,  BaseViewBean baseViewBean$Session, 
                                                ActionMessages errors) throws Exception {
        boolean savedStatus = false;    
        boolean deletedstatus = false;

        /*List<AccountDim> accountsList = new ArrayList<AccountDim>();
        List<CerSecurityDim> cerSecuList = new ArrayList<CerSecurityDim>();
        List<IncidentAcctSecFact> inciAcctSecFactList = new ArrayList<IncidentAcctSecFact>();
        List<IncidentAcctFact> inciAcctFactList = new ArrayList<IncidentAcctFact>();
        List<IncidentDim> incidentList = new ArrayList<IncidentDim>();*/

        try {
            double totalSecGL= 0.00;
            double secTrdNetTotal= 0.00;
            DecimalFormat twoDForm = new DecimalFormat("#.##");

            String loginUser = baseViewBean$Session.getLoggedInUser().getUserId();
            List<Long> addedElementList = new ArrayList<Long>();

            CerSecurityDim cerSecDim = null;
            AccountDim account = null;
            IncidentAcctSecFact iasFact = null;
            IncidentAcctFact iaFact = null;
            long incidentId = baseViewBean$Session.getIncidentDim$Session().getIncidentDimIdN();
            IncidentDim incident = (IncidentDim)incidentDimDao.findById(IncidentDim.class, incidentId);
            ExcelListenerBean beanDetails;

            List<AccountDim> acctList = new ArrayList<AccountDim>();
            List <CerSecurityDim> cerSecList = new ArrayList<CerSecurityDim>();
            List <IncidentAcctSecFact> iasFactList = new ArrayList<IncidentAcctSecFact>();

            for (Map.Entry<Integer, ExcelListenerBean> entry : baseViewBean$Session.getExcelRecords().entrySet())
            {
                beanDetails = entry.getValue();

                //Initialize the net amounts for incorrect trade and correction trade.
                secTrdNetTotal= 0;

                cerSecDim = new CerSecurityDim();
                account = new AccountDim();
                iasFact = new IncidentAcctSecFact();
                iaFact = new IncidentAcctFact();

                //
                Object[] pycisDet = investmentDimDao.getPyCISIdByShrtName(beanDetails.getShortName());
                if(pycisDet != null && pycisDet.length > 0){
                    account.setPycisInstnIdN((Long)pycisDet[0]);
                    account.setGdwIdN((Long)pycisDet[1]);
                    account.setTrdSysShrtNmC(beanDetails.getShortName());
                    if(!addedElementList.contains((Long)pycisDet[0])){
                        addedElementList.add((Long)pycisDet[0]);
                    } 
                } 

                //
                cerSecDim.setFmrCusipC(beanDetails.getFmrCusip());
                SecurityDim sec = getSecDetailsByCusip(beanDetails.getFmrCusip());
                if(sec != null){
                    cerSecDim.setSecuNmC(sec.getSecuNmC());
                    cerSecDim.setTckrC(sec.getTckrC());
                }else {
                    cerSecDim.setSecuNmC("UNKNOWN");
                    cerSecDim.setTckrC("UNKNOWN");
                }

                //
                cerSecDim.setNumOfShrTrdN(beanDetails.getIncorrectTrdShares().longValue());

                //
                cerSecDim.setBuySellIndC(beanDetails.getIncorrectTrdBuySell().toUpperCase());
                account.setBuySellIndC(beanDetails.getIncorrectTrdBuySell().toUpperCase());

                //
                secTrdNetTotal  = Double.valueOf(twoDForm.format(beanDetails.getIncorrectTrdNet())) +
                                                Double.valueOf(twoDForm.format(beanDetails.getCorrectionTrdNet()));

                //
                totalSecGL = totalSecGL + secTrdNetTotal;

                boolean updatedStatus = false;

                // create the relationship and then add to the respective lists.
                cerSecDim.setInsUsrC(loginUser);
                cerSecDim.setInsTsD(AppGlobalUtil.getCurrentTimeStamp());
                cerSecDim.setDelIndC(AppGlobalConstants.HardCodedValues.No);

                if(!acctList.isEmpty()){
                    for( AccountDim olderAccount :acctList){
                        if(olderAccount.getPycisInstnIdN().compareTo(account.getPycisInstnIdN()) == 0) {
                            double newAcctGainLossAmt=0;
                            double oldAcctGainLossAmt=0;
                            if(account.getAcctGainLossAmtN() != null){
                                newAcctGainLossAmt = account.getAcctGainLossAmtN();
                            }
                            if(olderAccount.getAcctGainLossAmtN() != null){
                                oldAcctGainLossAmt = olderAccount.getAcctGainLossAmtN();
                            }
                            double newGLAmt = newAcctGainLossAmt + oldAcctGainLossAmt;
                            account = olderAccount;
                            account.setAcctGainLossAmtN(newGLAmt);
                            updatedStatus = true;
                        }
                    }
                }

                if(!cerSecList.isEmpty()){
                    for(CerSecurityDim olderCerSecDim : cerSecList){
                        if(olderCerSecDim.getFmrCusipC().equals(cerSecDim.getFmrCusipC())) {
                            cerSecDim = olderCerSecDim;
                            double newSecuGainLoss = 0;
                            double oldSecuGainLoss = 0;
                            if(cerSecDim.getSecuGainLossN() != null){
                                newSecuGainLoss = cerSecDim.getSecuGainLossN();
                            }
                            if(olderCerSecDim.getSecuGainLossN() != null){
                                oldSecuGainLoss = olderCerSecDim.getSecuGainLossN();
                            }
                            cerSecDim.setSecuGainLossN(newSecuGainLoss + oldSecuGainLoss);

                            for(IncidentAcctSecFact olderIASFact : iasFactList){
                                if(olderIASFact != null && olderIASFact.getCerSecurityDim() != null
                                        && olderIASFact.getCerSecurityDim().getFmrCusipC().equals(cerSecDim.getFmrCusipC())){
                                    iasFact = olderIASFact;
                                }
                            }
                        }
                    }
                }
                if(!deletedstatus){
                    deleteAllImpactedAccounts(baseViewBean$Session);
                    deletedstatus = true;
                }
                totalSecGL = Double.valueOf(twoDForm.format(totalSecGL));

                account.setInsUsrC(loginUser);
                account.setInsTsD(AppGlobalUtil.getCurrentTimeStamp());
                account.setDelIndC(AppGlobalConstants.HardCodedValues.No);
                accountDimDao.saveOrUpdate(account);

                iasFact.setAccountDim(account);
                iasFact.setIncidentDim(incident);
                iasFact.setCerSecurityDim(cerSecDim);
                iasFact.setInsUsrC(loginUser);
                iasFact.setInsTsD(AppGlobalUtil.getCurrentTimeStamp());
                iasFact.setDelIndC(AppGlobalConstants.HardCodedValues.No);

                cerSecDim.getIncidentAcctSecFacts().add(iasFact);
                account.getIncidentAcctSecFacts().add(iasFact);
                incident.getIncidentAcctSecFacts().add(iasFact);

                if(!updatedStatus){ 
                    iaFact.setAccountDim(account);
                    iaFact.setIncidentDim(incident);
                    iaFact.setInsUsrC(loginUser);
                    iaFact.setInsTsD(AppGlobalUtil.getCurrentTimeStamp());
                    iaFact.setDelIndC(AppGlobalConstants.HardCodedValues.No);

                    incident.getIncidentAcctFacts().add(iaFact);
                    account.getIncidentAcctFacts().add(iaFact);
                }
                incident.setTotGainLossN(totalSecGL);

                cerSecurityDimDao.saveOrUpdate(cerSecDim);
                incidentAcctSecFactDao.saveOrUpdate(iasFact);
                if(!updatedStatus){
                    accountDimDao.saveOrUpdate(account);
                }
                if(!acctList.contains(account)){
                    acctList.add(account);
                }
                if(!cerSecList.contains(cerSecDim)){
                    cerSecList.add(cerSecDim);
                }
                if(!iasFactList.contains(iasFact)){
                    iasFactList.add(iasFact);
                }
                if(!updatedStatus){
                    incidentAcctFactDao.saveOrUpdate(iaFact);
                }
                incidentDimDao.saveOrUpdate(incident);

                NumberFormat formatter = new DecimalFormat("#0.00");
                incidentDetailsForm.setTotalGainLoss(formatter.format(totalSecGL));

                savedStatus = true;

                /*accountsList.add(account);
                cerSecuList.add(cerSecDim);
                inciAcctSecFactList.add(iasFact);
                inciAcctFactList.add(iaFact);
                incidentList.add(incident);*/
            }

        } catch (Exception e) {
            logger.error(e.getMessage());
            e.printStackTrace();
            throw e;
        }
        finally{
            baseViewBean$Session.getExcelRecords().clear();
            baseViewBean$Session.setExcelRecords(null);
        }

        /*accountDimDao.saveOrUpdateAll(accountsList);
        cerSecurityDimDao.saveOrUpdateAll(cerSecuList);
        incidentAcctSecFactDao.saveOrUpdateAll(inciAcctSecFactList);
        incidentAcctFactDao.saveOrUpdateAll(inciAcctFactList);
        incidentDimDao.saveOrUpdateAll(incidentList);*/

        return savedStatus;
    }

The dao functions are accessed from another file. 

Please let me know how i can increase my performance. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T07:42:19.973

问题是您试图从浏览器执行此操作，其中页面的默认超时为 30 秒。您应该从应用程序中执行此操作，以便您可以控制等待上传记录的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T10:46:43.980

我有相似的问题。

*   确保您拥有加入和搜索字段的所有键。
*   可能您可以将文件存储在临时位置，然后通过并行线程处理它。
*   另一种选择是使用无状态会话（网上几乎没有信息，请参阅休眠手册）我不确定是否有填充 ManyToMany 集合的选项。
*   通过在内存中保存表的副本来缓存 getOrCreate 查询可能会对您有所帮助（但您可能会遇到 OutOfMemory 异常，因此将 -Xmx 参数传递给您的应用程序）。
*   所有这些可能都无法解决您的问题。我决定使用本机 sql 查询来实现这些插入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T17:30:27.937

有多个问题需要关注：

1.  长时间运行的操作应该异步运行。例如，如果您使用的是 Spring，则可以注释`@Async`。那么您的事务将不受网络连接或浏览器/HTTP 超时的影响。
2.  Hibernate 中的批处理操作可能非常慢。即使您设置了 JDBC 批处理，并且即使您按照[Hibernate 文档中](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/batch.html)的说明进行操作，您仍然会感谢您使用的是 ORM。ORMS 最适合用于维护面向对象操作的状态，而不是用于任何单个对象的状态不太相关的批处理操作。
3.  Hibernate 中的批处理操作可能非常挑剔。例如，Hibernate 批处理文档没有指出您需要在配置中设置其他标志以确保它正确批处理。有关详细信息，请参阅[此帖子](http://abramsm.wordpress.com/2008/04/23/hibernate-batch-processing-why-you-may-not-be-using-it-even-if-you-think-you-are/)。

归根结底，ORM 总是比基本 SQL 慢。考虑切换到基本 SQL，可能连接 SQL 语句以减少数据库访问次数，或者使用存储过程，将批量数据传递给 proc 并让它运行插入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-04T17:47:41.663

当您打开会话时，请使用 openStatelessSession 并在最后调用 session.update。这样，persistentcontext 不能在缓存中有 10000 个对象，并且所有更新都发生在 db 中。

# javascript - 通过 Javascript 中的“var”paasing 属性名称获取 JSON 属性值

> ID：13890258
> 
> 赞同：1
> 
> 时间：2012-12-15T07:19:54.103
> 
> 标签：javascript, json

在 json 中，我们可以通过传递变量 value 来获取属性值。方法

当我的“returnData”json对象中存在“name”属性时，它对我有用

```
 // It works 
               var getColValue= returnedData[0].name 
```

但它给出了未定义的错误

```
 // It Not works 
               var refVar ="name";
               var getColValue= returnedData[0].refVar; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T07:25:07.373

使用方括号表示法：

```
returnedData[refVar]; 
```

换句话说，这两者基本上是等价的：

```
returnedData["name"] === returnedData.name 
```

请注意，使用方括号表示法允许您设置/获取对点表示法无效的属性名称。例如，`returnedData.some-prop`不是一个有效的 Javascript 对象，但是`returnedData["some-prop"]`是。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T07:25:16.457

```
var getColValue= returnedData[refVar]; 
```

应该管用。请试一试。

# iphone - UIActionSheet 中的 UIDatePicker 在更新标签上的日期时出现问题

> ID：13890260
> 
> 赞同：1
> 
> 时间：2012-12-15T07:20:01.860
> 
> 标签：iphone, ios5

我是IOS开发的新手。我正在开发一个应用程序，该应用程序需要用户填写表格以获取用户详细信息。详细信息包括我使用 UIDatePicker 的出生日期字段。我正在以编程方式添加那些 UIDatePicker 和 UIActionSheet，并希望更新标签上的日期。日期正在更新，但它们在同一标签上被覆盖。

这是代码

```
-(IBAction)dateButtonClicked:(id)sender {

    actionSheet = [[UIActionSheet alloc] initWithTitle:@"Choose Date"delegate:self cancelButtonTitle:@"cancel" destructiveButtonTitle:nil otherButtonTitles:@"Select",nil];                                                           
    [actionSheet showInView:self.view ];
    [actionSheet setFrame:CGRectMake(0, 117, 320, 383)];

}

- (void)willPresentActionSheet:(UIActionSheet *)actionSheet {
    datePickerView = [[UIDatePicker alloc] initWithFrame:CGRectMake(0, 40, 320, 216)];
    [datePickerView  setMinuteInterval:5];
    [datePickerView  setTag: kDatePickerTag];
    [actionSheet addSubview:datePickerView];
    datelabel = [[UILabel alloc] init];
    datelabel.frame = CGRectMake(55, 92, 300, 50);
    datelabel.backgroundColor = [UIColor clearColor];
    datelabel.textColor = [UIColor blackColor];
    datelabel.font = [UIFont fontWithName:@"Verdana-Bold" size: 12.0];
    datelabel.textAlignment = UITextAlignmentCenter;
    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    [formatter setDateFormat: @"MM/dd/YYYY h:mm a"];
    datelabel.text = [NSString stringWithFormat:@"%@",
                      [formatter stringFromDate:[NSDate date]]];
    [self.view addSubview:datelabel];
    NSArray *subviews = [actionSheet subviews];
    [[subviews objectAtIndex:SelectButtonIndex] setFrame:CGRectMake(20, 266, 280, 46)];
    [[subviews objectAtIndex:CancelButtonIndex] setFrame:CGRectMake(20, 317, 280, 46)];
}

- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {
    if (buttonIndex != [actionSheet cancelButtonIndex]) {

        [datePickerView addTarget:self
                       action:@selector(LabelChange:)
             forControlEvents:UIControlEventValueChanged];

        // UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Date" message:msg delegate:nil cancelButtonTitle: @"Dismiss" otherButtonTitles:nil];
       // [alert show];
    }
}

- (void)LabelChange:(id)sender{
    NSDateFormatter *df = [[NSDateFormatter alloc] init];
    df.dateStyle = NSDateFormatterMediumStyle;
    datelabel.text = [NSString stringWithFormat:@""];
    datelabel.text = [NSString stringWithFormat:@"%@",
                      [df stringFromDate:datePickerView.date]];
} 
```

请让我知道需要进行更改才能使此类问题无效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T09:48:15.343

这段代码对我来说就像一个魅力！

## 在 .h 文件中

```
#import <UIKit/UIKit.h>

@interface EXPViewController : UIViewController <UIPickerViewDataSource,       UIPickerViewDelegate, UIActionSheetDelegate>{
UIActionSheet *pickerViewPopup;
UIDatePicker *pickerView;
IBOutlet UILabel *dateLabel;
}

- (IBAction)dateButtonClicked:(id)sender;

@end 
```

## 在 .m 文件中：

```
-(IBAction)dateButtonClicked:(id)sender{
 [self showPickerView];
}

-(void)showPickerView {

pickerViewPopup = [[UIActionSheet alloc] initWithTitle:nil delegate:self cancelButtonTitle:nil destructiveButtonTitle:nil otherButtonTitles:nil];

pickerView = nil;
    pickerView = [[UIDatePicker alloc] initWithFrame:CGRectMake(0, 44, 0, 0)];
    ((UIDatePicker*)pickerView).datePickerMode = UIDatePickerModeDate;
    ((UIDatePicker*)pickerView).date = [NSDate date];

UIToolbar *pickerToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
pickerToolbar.barStyle = UIBarStyleBlackOpaque;
[pickerToolbar sizeToFit];

NSMutableArray *barItems = [[NSMutableArray alloc] init];

UIBarButtonItem *cancelBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemCancel target:self action:@selector(cancelButtonPressed:)];
[barItems addObject:cancelBtn];

UIBarButtonItem *flexSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:self action:nil];
[barItems addObject:flexSpace];

UIBarButtonItem *doneBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(doneButtonPressed:)];
[barItems addObject:doneBtn];

[pickerToolbar setItems:barItems animated:YES];
[barItems release];

[pickerViewPopup addSubview:pickerToolbar];
[pickerViewPopup addSubview:pickerView];
[pickerViewPopup showInView:self.view];
[pickerViewPopup setBounds:CGRectMake(0, 0, 320, 464)];
}

-(void)doneButtonPressed:(id)sender {
//Do something here here with the value selected using [pickerView date] to get that value
    NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    [dateFormat setDateFormat:@"dd, MMM YYYY"];
    NSString* dateString = [dateFormat stringFromDate:((UIDatePicker*)pickerView).date];
   yourLabel.text = dateString;

[pickerViewPopup dismissWithClickedButtonIndex:1 animated:YES];
}

-(void)cancelButtonPressed:(id)sender{
[pickerViewPopup dismissWithClickedButtonIndex:1 animated:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T09:48:24.030

这是因为每当您的`dateButtonClicked`操作触发时，`datePickerView`并且`datelabel`一次又一次地分配，所以只需做一件事，将您的代码`datePickerView`和`datelabel`代码放在 dateButtonClicked clicked 之外，您可以放入`viewDIdLoad`

您可以实现选择器的委托方法，

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{

} 
```

# php - 缓存 fsockopen 结果？

> ID：13890262
> 
> 赞同：0
> 
> 时间：2012-12-15T07:20:12.180
> 
> 标签：php, fsockopen

是否有可能将 fsockopen 的结果显示为 5 分钟？这是我需要的，因为网站加载缓慢，我使用 fsockopen 从 0.00001s 页面加载到 1.00137s 页面加载时间（这是服务器没有响应的时候。

代码：

```
<?php $fp = @fsockopen('127.0.0.1', '666');
if ($fp) { echo 'online'; }else{ echo 'offline'; }?> 
```

# vb.net - VB.NET 使用 newtonsoft 将 JSON 反序列化为匿名对象返回错误

> ID：13890267
> 
> 赞同：1
> 
> 时间：2012-12-15T07:21:07.910
> 
> 标签：vb.net, json, json.net

我想将 VB.NET 中的服务调用返回的 JSON 反序列化为匿名类型，但我遇到了错误。它使用动态类型在 C# 中工作，但我不知道如何在 VB 中做到这一点。

这是我从 Web 服务调用返回的 JSON：

`{"format":"png","height":564,"width":864}`

这是我上面分配给参数文本的VB代码json：

```
Dim testObj = Newtonsoft.Json.JsonConvert.DeserializeObject(text) 
```

但是当我尝试访问 testObj.format 时，抛出异常并显示消息

```
{"Public member 'format' on type 'JObject' not found."} 
```

我已经加了`Option Strict Off`。我不想使用对象/类来反序列化 JSON。如果它在 C# 中将其分配给动态类型将可以正常工作。

有人可以帮忙吗？我不是 VB 专家，但我需要在 VB 上运行它。TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:44:11.953

```
Dim js As New System.Web.Script.Serialization.JavaScriptSerializer
Dim testObj = js.Deserialize(source, New Object().GetType()) 
```

然后您可以通过以下方式访问键（属性名称）/值：

```
value=testobj(key) 
```

还有一件事，您可以通过以下方式访问您的 Newtonsoft 密钥（属性名称）/值：

```
value=testObj.item(key) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:57:35.850

```
Dim js As New System.Web.Script.Serialization.JavaScriptSerializer
Dim DeSerialObjEventData = New With {.Prop1 = String.Empty, .Prop2 = String.Empty, .Prop3 = String.Empty}...
Dim testObj = js.DeserializeAnnonomusType(source, DeSerialObjEventData) 
```

# iphone - 分配帧时从不读取初始化期间存储的值

> ID：13890268
> 
> 赞同：0
> 
> 时间：2012-12-15T07:21:19.527
> 
> 标签：iphone

```
CGRect bannerFrame = testView.frame;
bannerFrame = CGRectMake(0, 236, 480, 32);
testView.frame = bannerFrame; 
```

我**在初始化期间将值存储到“bannerFrame”，**在分析中永远不会读取此警告。我该如何解决？

谢谢你的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T07:38:45.963

最初分配`testView.frame`是无用的，因为您已`CGRectMake(0, 236, 480, 32);`在下一行分配。所以按照以下方式进行...

```
CGRect bannerFrame = CGRectMake(0, 236, 480, 32);
testView.frame = bannerFrame; 
```

现在分析器不会抱怨:)

# vsto - 如何区分主项目和子项目的任务

> ID：13890269
> 
> 赞同：1
> 
> 时间：2012-12-15T07:21:19.600
> 
> 标签：vsto, ms-office, ms-project

使用 Microsoft Project VSTO，我能够遍历项目中的所有任务。

这种方法的问题在于，如果一个文件有一个主项目和多个子项目，则主项目的任务集合将包含来自所有项目（主项目和子项目）的任务。

有什么方法可以区分任务是来自主项目还是子项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T19:39:26.740

最简单的方法是`Task.Project`返回您的任务所属的项目的名称[链接](http://msdn.microsoft.com/en-us/library/ff863203.aspx)，您还可以通过`Task.Subproject` [链接](http://msdn.microsoft.com/en-us/library/office.vbapj.chm132614.aspx)从您的主项目的“ancor”任务中获取子项目的名称。还有一个字段可以告诉您子项目是只读的还是您可以更新它：`Task.SubProjectReadOnly` [link](http://msdn.microsoft.com/en-us/library/ff861429.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T21:32:16.813

如果您只想访问主项目，从摘要任务开始并递归处理每个任务的子项目可能会更快，从而停止代表外部子项目的任务的递归。这样，您就不必触及每一项任务。

# php - 如何从任何地方运行“php phpunit.phar”CLI？

> ID：13890272
> 
> 赞同：13
> 
> 时间：2012-12-15T07:21:24.683
> 
> 标签：php, phpunit, command-line-interface

我刚刚安装了 phpunit.phar 并正在尝试设置它。我要做的是将 phpunit.phar 放在一个路径中，以便我可以直接从 php cli 的任何地方运行它。此时，它在我的 include_path 中，我可以从任何地方将它包含在脚本中。但是，我认为我需要做的是从 cli“php phpunit.phar”运行它。

这是可行的还是合适的？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-15T07:25:54.247

我认为 phpunit.phar 只需要在你的路径变量中。或者使用以下内容编写一个位于 /usr/bin 的小脚本：

```
#!/bin/sh
php /path/to/phpunit.phar 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-10T06:51:34.973

如果您使用的是窗户

1.  创建名为 phpunit.bat 的 bat 文件
2.  越过下面的行
3.  将文件保存在您想要的任何位置
4.  在windows上设置路径变量

> ```
> %~dp0php.exe %~dp0pharcommand.phar %* 
> ```

现在您可以在 cmd 提示符下运行

```
phpunit --v 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-29T22:40:00.990

[根据http://phpunit.de/getting-started.html](http://phpunit.de/getting-started.html)，这不再是必要的。您可以简单地将 phpunit.phar 重命名为 phpunit，chmod 可执行文件，并将其放在您的路径（通常是 /usr/local/bin）中，它应该会自动检测解释器指令。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-06T16:45:29.240

您可以从任何地方运行它。只需给出正确的路径：

```
/usr/share/pear/exec/phpunit.phar -c app 
```

# assembly - 给定 MBR 汇编代码，堆栈如何工作？关于 MBR 的几个问题

> ID：13890275
> 
> 赞同：1
> 
> 时间：2012-12-15T07:21:35.757
> 
> 标签：assembly

这一段是什么意思：

```
MOV     SI,SP
PUSH    AX
POP     ES 
```

ES 如何获得 0000:7c00（以及进一步的 DS）

在这个 MBR 模型中？

```
0000:7C00 FA            CLI                     disable int's
0000:7C01 33C0          XOR     AX,AX           set stack seg to 0000
0000:7C03 8ED0          MOV     SS,AX
0000:7C05 BC007C        MOV     SP,7C00         set stack ptr to 7c00
0000:7C08 8BF4          MOV     SI,SP           SI now 7c00
0000:7C0A 50            PUSH    AX
0000:7C0B 07            POP     ES              ES now 0000:7c00
0000:7C0C 50            PUSH    AX
0000:7C0D 1F            POP     DS              DS now 0000:7c00
0000:7C0E FB            STI                     allow int's
0000:7C0F FC            CLD                     clear direction
0000:7C10 BF0006        MOV     DI,0600         DI now 0600 
```

我发布它就像一些特殊情况（或未记录的过程） - 在中断 CLI / STI 之前和之后，被阻止。

/upd 源添加：[http ://www.nondot.org/sabre/os/files/Booting/mbr.txt](http://www.nondot.org/sabre/os/files/Booting/mbr.txt)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T07:42:29.947

`ES`它本身并不指向 0000:7c00，因为 ES 是 16 位的。这些评论应该说的是，`DS:SI`两者`ES:SI`都指向 0000:7c00。

这是因为`DS`和`ES`都通过推入`AX`（此时包含 0）设置为 0，然后弹出段寄存器。由于`SI`给出了值 7c00，您将同时拥有`DS:SI`并`ES:SI`指向 0000:7c00（实模式下的绝对地址是`segment * 0x10 + offset`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T09:05:33.067

这是我对代码的解释：

```
0000:7C00 FA        CLI               disable int's
0000:7C01 33C0      XOR     AX,AX     AX = 0x0000
0000:7C03 8ED0      MOV     SS,AX     SS = 0x0000
0000:7C05 BC007C    MOV     SP,7C00   SS:SP = 0x0000:0x7C00
0000:7C08 8BF4      MOV     SI,SP     SI = 0x7C00
0000:7C0A 50        PUSH    AX
0000:7C0B 07        POP     ES        ES = 0x0000
0000:7C0C 50        PUSH    AX
0000:7C0D 1F        POP     DS        DS = 0x0000
0000:7C0E FB        STI               allow int's
0000:7C0F FC        CLD               clear direction
0000:7C10 BF0006    MOV     DI,0600   DI = 0x0600

                    MOV CX,0100       CX = 0x0100
                    REP MOVSW         Copy 256 words (512 bytes)
                                        from 0x0000:0x7C00 to
                                        0x0000:0x0600
                    JMP ??            Jump to relocated code 
```

我编了最后3条指令；但我几乎可以保证这就是实际的 MBR 所做的。这样做的原因是 MBR 通常在 0x7C00 加载操作系统的引导扇区并且不能覆盖自己，因此必须首先重新定位自己。

我不知道他们为什么不使用`MOV ES,AX`而`MOV DS,AX`不是推/弹出。两个版本都花费 2 个字节（例如 2 个字节`MOV ES,AX`与 1 个字节`PUSH AX`加上另一个字节`POP ES`），因此差异无关紧要（当您只有 512 个字节可用且其中 66 个必须是时，代码大小是最重要的最后的分区表和魔术签名）。

# c++ - 初始化数组数组 - 麻烦

> ID：13890281
> 
> 赞同：9
> 
> 时间：2012-12-15T07:22:35.933
> 
> 标签：c++, c, arrays, multidimensional-array, clang

好的，我知道在 C++ 中 - 比如说二维 - 数组可以这样初始化：

```
int theArray[5][3] = { 
    {1,2,3},
    {4,5,6},
    {7,8,9},
    {10,11,12},
    {13,14,15} 
}; 
```

现在，如果我想使用预先存在的数组作为`theArray`'s 元素怎么办？

**例如**

```
// A, B, C, D,... have already been declared as :
// `const U64 A[] = { 1,2,3,4 };` etc...

const U64 multiDimArray[12][64] = { 
     A, B, C, D, E, F,  
     G, H, I, J, K, L
}; 
```

这个，虽然抛出一个**错误：**

```
cannot initialize an array element of type 'const U64' 
(aka 'const unsigned long long') with an lvalue of type 'const U64 [64]' 
```

我明白这一点，但希望你能看到我的。

有没有一种解决方法可以让我轻松实现相同的目标？（任何建议 - 也许使用 Boost 的东西？ - 欢迎）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T08:06:46.663

如果您使用 C++11，则 an 的初始化列表`array`很灵活：

```
std::array< array<U64, 64>, 12> multiDimArray = {
     A, B, C, D, E, F,  
     G, H, I, J, K, L
}; 
```

可以正常工作，假设`A..L`是`std::array<64, U64>`.

该数组确实没有c 样式数组的**开销。**[点击此处获取官方参考。](http://en.cppreference.com/w/cpp/container/array)

> “一些元素的数组的大小和效率相当于相应的 C 样式数组 T[N] 的大小和效率。” （来自参考）

* * *

我说的是“灵活”，因为您可以像这样使用混合初始化列表：

```
std::array<int, 3> first_row = {1,2,3};
std::array<array<int, 3>, 2> a={
  first_row,
  {2, 2, 2}
}; 
```

您可以将其用作固定大小的数组，具有相同的操作：

```
a[1][2]=2; a[0][1]=1; a[0][2]=3; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-15T07:51:50.370

我知道为什么这很有用，但是，在 C 中，仅使用数组的变量名将返回数组在内存中的地址。编译器不知道在编译期间实际存储在 A 中的内容，因此这是行不通的。

作为替代方案，您可以做的是使用 memcpy 并将元素复制到数组中（但它不会是`const`），或者您可以使用 a`#define A { 1, 2, 3, 4 }`然后可能执行以下操作：

```
#define A_val { 1, 2, 3, 4 }
#define B_val { 5, 6, 7, 8 }
const U64 multiDimArray[12][64] = {
    A_val,
    B_val,
    // and so on and so forth
}
const U64 A[4] = A_val; // if you need this
const U64 B[4] = B_val; // you can do it like this 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-15T08:08:46.447

您可以使用二维数组实际上是一维指针数组这一事实来发挥您的优势。以下初始化应该适合您。

```
const U64 *multiDimArray[12] = { 
     A, B, C, D, E, F,  
     G, H, I, J, K, L
}; 
```

# android - 从我的 Android 应用程序启动另一个应用程序会导致问题

> ID：13890282
> 
> 赞同：0
> 
> 时间：2012-12-15T07:22:56.340
> 
> 标签：android, android-intent

我有一个 Android 应用程序（让我们将其称为“主应用程序”），它将根据用户操作启动另一个应用程序（让我们将其称为“帮助应用程序”）。考虑以下场景。

1.  用户 A 登录到我的主应用程序
2.  我的主应用程序启动 Helper 应用程序，其中包含特定于用户 A 的详细信息（在 Intent 中作为附加内容发送）
3.  用户 A 最小化 Helper 应用程序
4.  用户 A 从我的主应用程序中注销
5.  用户 B 登录到我的主应用程序
6.  我的主应用程序尝试使用特定于用户 B 的详细信息启动 Helper 应用程序（在 Intent 中作为 extras 发送）。但它不是新创建的 Helper 应用程序。它只是将以前的 Helper 应用程序带到前台，其中包含旧用户 A 的详细信息。

我试图在 onNewIntent() 中捕捉新意图，但它从未被触发（在清单中将活动声明为 singleTop）。

我的问题是如何每次以新的意图启动 Helper 应用程序。感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T07:31:26.053

您可以使用 SharedPreferences 解决当前问题：

当用户 B 登录到我的主应用程序时，创建一个[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)：

```
 SharedPreferences mainPrefs = 
             this.getSharedPreferences("mainappliction", MODE_WORLD_READABLE);
 SharedPreferences.Editor prefsEditor = mainPrefs.edit();
 prefsEditor.putString("user_detailone", "userdetailone");
 prefsEditor.putString("user_detailtwo", "userdetailtwo");
 prefsEditor.commit(); 
```

并且在每次应用程序恢复时在 Helper 应用程序中读取所有最新详细信息`SharedPreferences`并根据用户的最新详细信息更新 UI

```
@Override
public void onResume()
{
   SharedPreferences mainPrefs =
         this.getSharedPreferences("mainappliction", MODE_WORLD_READABLE);
   String struserdetailone = mainPrefs.getString("user_detailone", "nothing");
   //......

  //update your Helper application UI here according user details
    super.onResume();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T07:30:24.623

您需要从 Helper 应用程序中覆盖 onPause() 方法。

像这样 ：

```
 protected void onPause() {
            super.onPause();
           // Toast.makeText(getApplicationContext(), "Paused", Toast.LENGTH_LONG).show();
          finish();
    } 
```

因此，每当您的帮助应用程序进入后台时，它将由这段代码完成。

每次您都会获得具有新意图的 Helper 应用程序。

希望它可以帮助你。

谢谢。

# transactions - JMS 事务

> ID：13890287
> 
> 赞同：6
> 
> 时间：2012-12-15T07:23:59.200
> 
> 标签：transactions, jms, message-queue

数据库事务是一个熟悉的概念。

```
try {
  ...
  ..
  updateDB()
  ..
  ...
  commit();
} catch error {
  rollback();
} 
```

如果发生任何错误，updateDB 所做的任何更改都将被丢弃。

我想知道消息队列事务回滚将撤消什么。

```
try{
  ...
  ...
  //EDIT: swapped the order of receive and send
  Message m = queue1.receiveMessage(..)
  ..
  ..
  queue2.sendMessage(..)
  ..
  ..
  commit();
} catch error {
  rollback();
} 
```

具体来说，回滚会做什么

1.  取消发送消息
2.  取消接收消息，即将收到的消息放回队列

还是我将数据库 tx 类比延伸得太远了。

谢谢

*编辑*：我并不是暗示发送和接收操作是相关的。我只想说有两个操作可以改变消息代理的状态——receive 将从队列中取出一条消息，如果有的话，其他消费者将无法使用该消息。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-15T09:59:42.560

发送的回滚是直截了当的，消息不会被放入 queue2。

接收回滚通常会将消息放回队列 (queue1)。根据您的 JMS 提供程序设置和配置，消息将被重新传递多次。如果事务回滚太多次（太多是可配置的），它将被放入“回退队列”（或死信队列），这样它就不会阻塞队列中的其他消息。回退的消息通常需要一些手动错误处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T07:27:23.360

是的，你把它拉得太远了。

在交易模式下，您`queue.receiveMessage()`将永远不会返回（假设它被设置为等待特定的回复消息，而不仅仅是“任何”消息），仅仅是因为`queue.sendMessage()`还没有真正发送消息（它将在交易完成时发送）坚定的）。

顺便说一句，这是一个常见的错误。当使用 JMS（它是一种异步协议）进行同步通信时，很自然地将发送/接收周期视为由一个事务组成。然而，事实并非如此。一旦你`sendMessage()`在交易模式下发行，什么都不会发生；只有在提交事务时才会发送消息。

# iphone - 添加 CHCSVPARSER 时出现错误

> ID：13890296
> 
> 赞同：1
> 
> 时间：2012-12-15T07:25:23.430
> 
> 标签：iphone, ios, ipad, csv, ios6

从此链接[CHCSVParser](https://github.com/davedelong/CHCSVParser)，我按照分步方法进行操作，但出现 1 个错误

```
/CHCSVParser.h Semantic Issue- Property attributes 'assign' and 'weak' are mutually exclusive 
```

我从 5 天开始就一直在尝试实现这个。我尝试了很多方法，但仍然无法解决这个错误。请指导我解决这个问题。我是 iOS 的菜鸟。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T07:45:11.090

就个人而言，我建议简单`__weak`地`parserDelegate`删除`CHCSVParser.h`. 无论如何，这是非 ARC 代码，所以`assign`已经足够好了。

顺便说一句，你在 ARC 项目中使用它吗？如果是这样，您必须使用[`-fno-objc-arc`](http://developer.apple.com/library/ios/releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011226-CH1-SW15)标志告诉您的项目这些文件没有使用自动引用计数：

![关闭 CHCSV 代码的 ARC](../Images/53ac8bc08418351635de8b63e7aaffa8.png)

# iphone - UIImageView setFrame：在 UITableViewCell 中不起作用

> ID：13890299
> 
> 赞同：1
> 
> 时间：2012-12-15T07:25:38.253
> 
> 标签：iphone, objective-c, ios, uiimageview, uiimage

我有一个`UIImageView`自定义的`UITableViewCell`，我想调整它的大小，我将它的视图模式设置为 LEFT。要调整大小，我正在应用以下代码。

```
[cell.IBImage setFrame:CGRectMake(201,12,50,20)]; 
```

我的图像宽度是 100，我想减小到 50，但它仍然以 100 的宽度显示我。如果我将查看模式设置为`Scale To Fill`它可以正常工作，但我希望将其查看模式设置为 LEFT。

完整的方法 cellForRowAtIndexPath 如下所示：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"DetailCell";

DetailCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"DetailCell" owner:self options:nil];

cell = (DetailCell *)[topLevelObjects objectAtIndex:0];

clsDetailResponse *Response = [self.Histories objectAtIndex:[indexPath row]];

[cell.IBUsernameLabel setText:[NSString stringWithFormat:@"%@ %@", Response.Firstname, Response.Lastname]];

[cell.IBImage setFrame:CGRectMake(201, 12, 50, 20)];

return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T13:40:34.693

您正在调整 imageView 框架而不是图像的大小，以便您可以根据需要裁剪图像，

```
UIImage *ima = cell.image.image;
CGRect cropRect = CGRectMake(0, 0, 50,20);
CGImageRef imageRef = CGImageCreateWithImageInRect([ima CGImage], cropRect);
[cell.image setImage:[UIImage imageWithCGImage:imageRef]];
CGImageRelease(imageRef);
cell.image.frame=CGRectMake(10, 10, 50, 20); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T08:56:46.477

在 DetailCell 类中设置 IBImage 帧

```
-(void)layoutSubviews: 
```

方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T09:21:33.163

将以下行添加到文件的所有者，以确保它知道如何响应帧更改。

```
 [self setAutoresizingMask:UIViewAutoresizingFlexibleHeight|UIViewAutoresizingFlexibleWidth];
    [self setClipsToBounds:YES];
    [self setAutoresizesSubviews:YES]; 
```

# c - 通过读取设备文件打印FAT32文件系统信息

> ID：13890300
> 
> 赞同：0
> 
> 时间：2012-12-15T07:25:48.193
> 
> 标签：c, linux

我想编写一个程序，可以通过读取设备文件（例如，名为 fat32.disk 的设备文件）打印出 FAT32 文件系统的信息，例如每个簇的扇区数。我如何在 C 中做到这一点？我应该使用读取文件`fopen("fat32.disk","r")`吗？那么如何定位到 fat32.disk 中 Volume ID 上存储的信息呢？像`sectors_per_cluster = 0x0D`我的脚本中的东西？

# mysql - MySQL 的 T-SQL 连接器

> ID：13890307
> 
> 赞同：0
> 
> 时间：2012-12-15T07:27:10.227
> 
> 标签：mysql, sql, tsql

有什么方法可以在 MySQL 数据库中使用 T-SQL 查询，比如拥有一个可以理解 TSQL 并可以连接到 MySQL 的数据连接器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-18T14:12:46.873

简短的回答，不。

当您开发或找到可以将 T-SQL 语法转换为 MySQL（正确）的接口时；您可能已经学习了编写所需的 MySQL 所需的语法。

老实说，这并没有什么不同。它会拓宽你的知识面，让你灵活地使用其他类型的数据库查询语言。

# ssrs-2008 - 如何适应报告的内容，以便我们可以在 A4 尺寸上打印

> ID：13890309
> 
> 赞同：8
> 
> 时间：2012-12-15T07:27:17.700
> 
> 标签：ssrs-2008, reporting-services

我在 ssrs 2008 r2 中创建了一个报告。它比正常的 A4 尺寸大。所以当我用 word 导出报告时，我可以清楚地看到它，但是当我看到报告的打印预览到 word 时，它的内容会从右端。我认为这是由于报告大小。有什么方法可以让我们在导出时将内容放入 ms 字中，以便用户可以清楚地打印出 A4 尺寸。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-15T12:20:56.323

唯一的方法是在构建报表时物理减小报表的大小，因为报表生成器中没有自动大小功能。

1.  右键单击和灰色背景上的属性。然后根据需要更改大小和方向。

2.  然后单击白色主体并确保属性栏已打开。展开大小属性选项并设置报表的大小以反映先前的选择。

3.  也不要忘记设置边距，因为这会影响报表上的可打印空间量。

4.  最后确保您更改字体和报告部分的大小以适应所需的大小。

我希望在报告生成器中看到用于导出的自动调整大小功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-27T19:56:55.597

这是因为您的报告内容大小大于报告大小。A4 页面的报告大小为 8.5*11 英寸，如果您的内容大于报告大小，则会将列移动到下一个。

调整每个 Tablix 的大小，使其小于您的报告大小。

选择 Tablix 以查看属性。展开尺寸选项并相应地调整宽度和高度。

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-21T08:39:59.480

只需在报表生成器属性中增加纸张尺寸的高度和宽度。没有任何意义，但它对我有用。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-10-14T10:43:04.607

在报表属性中的报表生成器中更改报表的宽度，使其超出数据的宽度。导出到 Word 和 PDF 将意味着它适合页面宽度。您还可以调整高度，以便报告填充您所需的纸张尺寸。

# javascript - KineticJS 在 Jsfiddle 中工作，而不是在我的网站上

> ID：13890321
> 
> 赞同：0
> 
> 时间：2012-12-15T07:30:27.500
> 
> 标签：javascript, jquery, html, canvas, kineticjs

我尝试了一个托管在我自己的服务器上的简单 KineticJS 示例，但将 4 个句柄放置在图像的 4 个角时遇到问题。手柄点将位于错误的位置，如下面的屏幕截图所示。然而，手柄在 jsfiddle 中的位置正确！

**jsfiddle：http:** [//jsfiddle.net/NPB77/](http://jsfiddle.net/NPB77/)

![在此处输入图像描述](../Images/58c72957acb5b2078a0a7a071a307ac9.png)

我对 KineticJS 很陌生，如果我能指出正确的方向，我将不胜感激，谢谢！

* * *

## 更新

**jsfiddle：http:** [//jsfiddle.net/NPB77/1/](http://jsfiddle.net/NPB77/1/)

通过放置`addAnchor`在`imageObj.onload()`函数内解决。

```
var imageObj = new Image();
imageObj.onload = function() {
    var thing = new Kinetic.Image({
        x: 0,
        y: 0,
        image: imageObj
    });

    addAnchor(thingGroup, 0, 0, "topLeft");
    addAnchor(thingGroup, imageObj.width, 0, "topRight");
    addAnchor(thingGroup, imageObj.width, imageObj.height, "bottomRight");
    addAnchor(thingGroup, 0, imageObj.height, "bottomLeft");

    thingGroup.add(thing);
    stage.draw();
};

imageObj.src = 'http://www.html5canvastutorials.com/demos/assets/darth-vader.jpg'; 
```

但是，现在当我拖动应该重新缩放图像的角手柄时，出现错误：

```
Uncaught TypeError: Cannot call method 'setPosition' of undefined 
```

这里出了什么问题？我不明白为什么`group.get(".topLeft")`不起作用，这是范围问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T10:08:48.100

当你`thing`在你的`initStage`函数中创建时，给它一个你可以稍后引用的 id。
所以它看起来像这样......

```
var thing = new Kinetic.Image({
    x: 0,
    y: 0,
    image: imageObj,
    id: "thingImage"
}); 
```

..然后在您的`update`函数中，您可以像这样引用它...

```
var image = group.get("#thingImage")[0]; 
```

这是一个工作示例...
[http://jsfiddle.net/NPB77/2/](http://jsfiddle.net/NPB77/2/)

# angularjs - 如何将 2 个模型绑定到 Angular 中的一个输入字段？

> ID：13890331
> 
> 赞同：75
> 
> 时间：2012-12-15T07:32:00.317
> 
> 标签：angularjs

无论如何，我可以将两个模型值绑定到一个输入字段吗？

假设我有输入字段，我想成为范围内两个变量的值，例如：

```
<input type="text" model="sn_number; id" > 
```

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2012-12-15T08:21:34.413

你不能，但有一些解决方法。

### 1.使用ngChange更新其他模型

```
<input type="text" 
       ng-model="sn_number" 
       ng-change="id=sn_number"/> 
```

### 2.你可以观察一个模型，当有变化时，更新另一个

```
$scope.$watch('sn_number', function(v){
  $scope.id = v;
}); 
```

`id`如果您想让它们保持同步，您还需要注意变化。

[这里的例子](http://plnkr.co/edit/rDvTSdK9V5ozzgxdjNhX?p=preview)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-11-28T09:26:39.017

您可以立即绑定字段，不仅在 ng-change 中，而且实际上它不是数据绑定，它唯一的角度表达式

```
 <label>Name</label>
  <input type="text" ng-model="name" value="{{name}}"/>

  <label>Key</label>
  <input type="text" ng-model="key" value="{{key=name}}" />
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-04-30T21:11:36.137

将输入绑定到模型中的两个变量是没有意义的。绑定是双向的，所以如果模型更新，字段也会更新，反之亦然。如果您要绑定到两个变量，那么唯一的事实来源是什么？

但是，您可以使用 ng-change 调用控制器上的方法，该方法可以在字段更改时设置两个变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-04T07:19:55.120

使用 ng-init

```
<div ng-controller="ctrl" ng-init="model = { year: '2013', month:'09'}"> 
```

或者

```
<div ng-repeat="c in contact" ng-init="likes = { food: 'steak', drink:'coke'}"> 
```

# ios - 使用计划任务的 PHP 服务器脚本的 Ios 推送通知

> ID：13890334
> 
> 赞同：1
> 
> 时间：2012-12-15T07:32:29.457
> 
> 标签：ios, cron, push-notification

我正在为苹果设备实现推送通知服务。使用 php 脚本，只有当 php 脚本从浏览器命中时，它才会推送通知。当我通过浏览器点击服务器 php 脚本时，它会将通知推送到 Apple 设备。我的 php 脚本是...

// 在苹果设备中发送通知的方法结束

```
function sendNotificationToAppleDevice($token,$message)
    {
    /////////////////////////////////////////////For apple divice////////////////////////////////

$passphrase='1234';
// Create a stream to the server
$streamContext = stream_context_create();
stream_context_set_option($streamContext, 'ssl', 'local_cert', 'sample.pem');
stream_context_set_option($streamContext, 'ssl', 'passphrase', $passphrase);

$apns = stream_socket_client( 'ssl://gateway.sandbox.push.apple.com:2195', $error,$errorString,60,STREAM_CLIENT_CONNECT, $streamContext);

// You can access the errors using the variables $error and $errorString

// Now we need to create JSON which can be sent to APNS
        $inc=0;                  
$load = array(
'aps' => array(
'alert' => $message,
'badge' =>$inc,
)
);
$inc++;
$payload = json_encode($load);
// The payload needs to be packed before it can be sent
$apnsMessage = chr(0) . chr(0) . chr(32);
$apnsMessage .= pack('H*', str_replace(' ', '', $token));
$apnsMessage .= chr(0) . chr(strlen($payload)) . $payload;

// Write the payload to the APNS

fwrite($apns, $apnsMessage);

echo "just wrote " . $payload;

// Close the connection

fclose($apns);
    } 
```

当此脚本被浏览器命中时，此脚本运行良好并成功发送通知。

现在，当我从计划任务中的 cron 作业运行此脚本时，它不会向设备发送任何通知。它导致......

> 警告：stream_socket_client()：SSL 操作失败，代码为 1。OpenSSL 错误消息：错误：14094410：SSL 例程：SSL3_READ_BYTES：sslv3 警报握手失败在 sample.php
> 
> 警告：stream_socket_client(): 无法在线在 sample.php 中启用加密
> 
> 警告：stream_socket_client(): 无法连接到 ssl://gateway.sandbox.push .apple.com:2195 (Unknown error) in sample.php 在线
> 
> 警告：fwrite() 期望参数 1 是资源，在线 sample.php 中给出的布尔值
> 
> 警告：fclose() 期望参数 1 是资源，在线 sample.php 中给出的布尔值

此功能和错误有什么问题..请任何人帮助我...

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T10:49:16.447

经过大量研究后，我终于找到了漏洞在哪里..

您只需更改一行即可将此方法与 cron 作业一起使用..:-)

更改此行

```
stream_context_set_option($streamContext, 'ssl', 'local_cert', 'sample.pem'); 
```

到

```
stream_context_set_option($streamContext, 'ssl', 'local_cert', 'your FULL path of pem file'); 
```

对于我的情况，我使用

```
stream_context_set_option($streamContext, 'ssl', 'local_cert', 'C:\Websites\games\project_name\sample.pem'); 
```

仅此而已...希望您的问题现在可以解决..

# android - 通过按下按钮显示数据库的记录

> ID：13890336
> 
> 赞同：1
> 
> 时间：2012-12-15T07:32:50.793
> 
> 标签：android, database, button

我正在开发一个Android应用程序，我想在数据库中保存一些数据，然后通过按下按钮来检索它们，但是由于我的构造函数方法的签名，我无法通过这种方式检索数据。我该如何实现这一目标？

这是我的 DBAdapter.java

```
package com.example.databaseandroid10;

import android.content.ContentValues;

public class DBAdapter 
{
    public static final String KEY_ROWID = "_id";
    public static final String KEY_ISBN = "isbn";
    public static final String KEY_TITLE = "title";
    public static final String KEY_PUBLISHER = "publisher";    
    private static final String TAG = "DBAdapter";

    private static final String DATABASE_NAME = "books";
    private static final String DATABASE_TABLE = "titles";
    private static final int DATABASE_VERSION = 1;

    private static final String DATABASE_CREATE =
        "create table titles (_id integer primary key autoincrement, "
        + "isbn text not null, title text not null, " 
        + "publisher text not null);";

    private final Context context; 

    private DatabaseHelper DBHelper;
    private SQLiteDatabase db;

    public DBAdapter(Context ctx) 
    {
        this.context = ctx;
        DBHelper = new DatabaseHelper(context);
    }

    private static class DatabaseHelper extends SQLiteOpenHelper 
    {
        DatabaseHelper(Context context) 
        {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) 
        {
            db.execSQL(DATABASE_CREATE);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, 
        int newVersion) 
        {
            Log.w(TAG, "Upgrading database from version " + oldVersion 
                    + " to "
                    + newVersion + ", which will destroy all old data");
            db.execSQL("DROP TABLE IF EXISTS titles");
            onCreate(db);
        }
    }    

    //---opens the database---
    public DBAdapter open() throws SQLException 
    {
        db = DBHelper.getWritableDatabase();
        return this;
    }

    //---closes the database---    
    public void close() 
    {
        DBHelper.close();
    }

    //---insert a title into the database---
    public long insertTitle(String isbn, String title, String publisher) 
    {
        ContentValues initialValues = new ContentValues();
        initialValues.put(KEY_ISBN, isbn);
        initialValues.put(KEY_TITLE, title);
        initialValues.put(KEY_PUBLISHER, publisher);
        return db.insert(DATABASE_TABLE, null, initialValues);
    }

    //---deletes a particular title---
    public boolean deleteTitle(long rowId) 
    {
        return db.delete(DATABASE_TABLE, KEY_ROWID + 
                "=" + rowId, null) > 0;
    }

    //---retrieves all the titles---
    public Cursor getAllTitles() 
    {
        return db.query(DATABASE_TABLE, new String[] {
                KEY_ROWID, 
                KEY_ISBN,
                KEY_TITLE,
                KEY_PUBLISHER}, 
                null, 
                null, 
                null, 
                null, 
                null);
    }

    //---retrieves a particular title---
    public Cursor getTitle(long rowId) throws SQLException 
    {
        Cursor mCursor =
                db.query(true, DATABASE_TABLE, new String[] {
                        KEY_ROWID,
                        KEY_ISBN, 
                        KEY_TITLE,
                        KEY_PUBLISHER
                        }, 
                        KEY_ROWID + "=" + rowId, 
                        null,
                        null, 
                        null, 
                        null, 
                        null);
        if (mCursor != null) {
            mCursor.moveToFirst();
        }
        return mCursor;
    }

    //---updates a title---
    public boolean updateTitle(long rowId, String isbn, 
    String title, String publisher) 
    {
        ContentValues args = new ContentValues();
        args.put(KEY_ISBN, isbn);
        args.put(KEY_TITLE, title);
        args.put(KEY_PUBLISHER, publisher);
        return db.update(DATABASE_TABLE, args, 
                         KEY_ROWID + "=" + rowId, null) > 0;
    }
} 
```

这是我的主类，我在 OnClick 方法的主体中收到错误：

```
package com.example.databaseandroid10;

import android.os.Bundle;

public class DatabaseAndroid10 extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_database_android10);

        //---btnshow---
        Button btnShow=(Button)findViewById(R.id.btnShowInfo);

        btnShow.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {

                DBAdapter db = new DBAdapter(this); 

      //---get all titles---

        db.open();
        Cursor c = db.getAllTitles();
        if (c.moveToFirst())
        {
            do {          
                DisplayTitle(c);
            } while (c.moveToNext());
        }
        db.close(); 
            }
        });

        //---add 3 titles---
      /*  db.open();        
        long id;
        id = db.insertTitle(
                "0470285818",
                "C# 2008 Programmer's Reference",
                "Wrox");        
        id = db.insertTitle(
                "047017661X",
                "Professional Windows Vista Gadgets Programming",
                "Wrox");

        id=db.insertTitle(
                "224436998",
                "Guide",
                "Apress");

        db.close();
        */

    }

    //---Display Method---
    public void DisplayTitle(Cursor c)
    {
        Toast.makeText(this, 
                "id: " + c.getString(0) + "\n" +
                "ISBN: " + c.getString(1) + "\n" +
                "TITLE: " + c.getString(2) + "\n" +
                "PUBLISHER:  " + c.getString(3),
                Toast.LENGTH_LONG).show();        
    } 

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_database_android10, menu);
        return true;
    }
} 
```

多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T07:35:07.013

`DBAdapter db = new DBAdapter(this);` 在班级级别移动：

```
public class DatabaseAndroid10 extends Activity {
 DBAdapter db ;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_database_android10);

  db = new DBAdapter(DatabaseAndroid10.this); 

    //---btnshow---
    Button btnShow=(Button)findViewById(R.id.btnShowInfo);

    btnShow.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {

           //your code here 
```

**问题 ： -**

因为在创建数据库或执行数据库操作的当前代码中，您正在传递按钮视图上下文而不是当前活动或应用程序上下文。

**解决方案 ： -**

将当前活动上下文传递给应用程序上下文到 DBAdapter，以便在应用程序级别创建或管理数据库

# html - 页脚没有到达底部

> ID：13890341
> 
> 赞同：0
> 
> 时间：2012-12-15T07:33:42.110
> 
> 标签：html, css

```
My CSS CODE

footer {
        background-color: #242424;
        bottom: 0;
        clear: both;
        color: #727272;
        height: 210px;
        left: 0;
        line-height: 20px;
        position: absolute;
        width: 100%;
        z-index: 1;
    } 
```

我的 HTML 代码

```
 <footer></footer> 
```

这是我的[网站](http://www.doers.lk/)

你可以看到中间的页脚栏。为什么我使用了正确的 CSS ？？？任何帮助，将不胜感激 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T07:52:15.393

用于`position: relative`在主体内容下方显示页脚或`position: fixed`将其粘贴在页面底部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T07:56:38.417

使用 position: relative 代替 position: absolute;

我看到你使用了 min-height: 2000px; .请使用它，因为您的内容经过了这一点

```
 body {
        background-color: #FFFFFF;
        font-size: 14px;
        margin: 0 auto;
        min-height: 2000px;
        width: 980px;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T07:56:41.950

消除

```
min-height: 2000px; 
```

从身体

# android - Android 服务意外关闭

> ID：13890343
> 
> 赞同：3
> 
> 时间：2012-12-15T07:33:51.407
> 
> 标签：android, service, broadcastreceiver

我有一个带有 BroadcastReceiver 的服务，它通过“exampleMethod()”方法与活动通信。该服务启动并正常工作，但一段时间后它被 Android 停止，我必须重新启动它。是否可以确保服务不会长时间停止？

```
public class SMS_Service extends Service{
    private BroadcastReceiver rec_sms = new BroadcastReceiver() {   
        @Override
        public void onReceive(Context context, Intent intent) {
               MainActivity.exampleMethod();
        }
    };

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        // We want this service to continue running until it is explicitly
        // stopped, so return sticky.
        return START_STICKY;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T07:49:00.030

> 一段时间后服务被Android停止

首先重要的是为什么你的服务被android系统停止了，

当用户直接与该进程的一个组件（即一个活动）交互时，Android 将非常努力地保持该进程运行，并且您不会看到它被杀死，除非在特殊情况下。

*   如果是由于内存不足，那么什么都做不了。当为了内存而杀死某些东西时，整个进程（包括应用程序对象）都被杀死并且此时没有代码在其中执行。

*   如果服务只是因为不再需要运行而被销毁，它的 onDestroy() 将被调用，当以后需要该服务时，会创建一个新实例并调用 onCreate()。

> 是否可以确保服务不会长时间停止？

这是不可能的。您可以获得的最接近的方法是通过 startForeground()，但即使这样也不能保证您的服务将永远存在。

而且，这在 Android 中是一个严重的反模式。用户讨厌试图永远运行的应用程序，这就是我们必须与任务杀手等竞争的原因。

# javascript - 使用 underscore.js 和 Backbone.marionette 模板化引导轮播

> ID：13890357
> 
> 赞同：0
> 
> 时间：2012-12-15T07:36:44.033
> 
> 标签：javascript, backbone.js, underscore.js, marionette

我是多层次、嵌套的视图结构的最后一步——复合视图的集合。

但是，基于图像信息数组，我正在尝试渲染引导轮播，其中优先级最高的图像被赋予默认的“项目活动”类。

```
 <%=_.each(images, function(x){
              if (x.priority_order = 1)
                {return 

                  "<div class='item active'>
                    <img class='responsive-image' src=" + x.image + " alt=''>
                    <div class='container'>
                      <div class='carousel-caption'>
                        <h1>" + x.title + "</h1>
                      </div>
                    </div>
                  </div>"
                }
              else
                {return

                  "<div class='item'>
                    <img class='responsive-image' src" + x.image + " alt=''>
                    <div class='container'>
                      <div class='carousel-caption'>
                        <h1>" + x.title + "</h1>
                      </div>
                    </div>
                  </div>"}
            })%> 
```

**注意：**以上内容只是为这篇文章手动漂亮地打印出来。在实际代码中，换行符被删除，否则你会得到：

**`Uncaught SyntaxError: Unexpected token ILLEGAL`**

当一切都说完了，这仍然不能正确渲染。我是否遗漏了什么，或者下划线可以执行此操作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T08:03:02.223

你在那里写它的方式是语法错误诱饵。（另外，使用字符串文字在很大程度上违背了使用模板的目的，不是吗？）

我会`<% %>`为逻辑部分、`<%= %>`渲染部分使用代码块，并将 HTML 作为标记，而不是作为字符串文字：

```
<% _.each(images, function(x){ %>
  <% if (x.priority_order == 1){ %>
    <div class='item active'>
      <img class='responsive-image' src=" + x.image + " alt=''>
      <div class='container'>
        <div class='carousel-caption'>
          <h1> <%= x.title %></h1>
        </div>
      </div>
    </div>
  <%  } %>
<%  } %> 
```

另外，这是一个错字——`if (x.priority_order = 1)`应该是相等运算符`==`。

[JSFiddle](http://jsfiddle.net/5T2TJ/2/)

就像一个注释——如果你出于某种原因绝对必须将标记放入字符串文字中，那么你不能在字符串中包含新行。它必须是这样的内[联](http://jsfiddle.net/YYPdA/1/)：

```
print "<div class='item active'><img class='responsive-image' src='" + x.image + "' alt=''><div class='container'><div class='carousel-caption'><h1>" + x.title + "</h1></div></div></div>"; 
```

或使用类似的附加字符串`+`：

```
print "<div class='item active'>" + 
    "<img class='responsive-image' src='" + x.image + "' alt=''>" + 
        "<div class='container'>" + 
            "<div class='carousel-caption'>" +
                "<h1>" + x.title + "</h1></div></div></div>"; 
```

# php - 通过生成动态变量使 PHP 数据库类通用

> ID：13890359
> 
> 赞同：3
> 
> 时间：2012-12-15T07:37:01.243
> 
> 标签：php, php-parse-error

请看代码，数组包含表的表字段名

```
class User {
    public $db_fields = array('id', 'username', 'password', 'first_name', 'last_name');

    public $id;
    public $username;
    public $password;
    public $first_name;
    public $last_name;

} 
```

这个想法是用一个函数删除公共变量，以便它自动从我可以访问的数组中创建公共变量---

**例子**

我想删除

```
public $id;
public $username;
public $password;
public $first_name;
public $last_name; 
```

部分，并希望它由`$db_fields`数组自动生成。

这样我就可以通过

```
$user = new User();
$user->username = "Ismail"; 
```

我所做的是

```
extract($db_fields); 
```

但它给出了一个错误：

> 解析错误：语法错误，意外的 T_VARIABLE，在第 3 行的 C:\xampp\htdocs\advphp\dbclass\extractex.php 中需要 T_FUNCTION

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T08:15:33.587

您可以一起删除`$db_fields`所有内容并依赖于 SQL 查询返回的列，如下所示：

```
class User
{
    private $_data;
    public function __construct($id = null) {
        //TODO: Load data into $this->_data for user of $id
    }

    public function __get($name) {
        if (array_key_exists($name, $this->_data))
            return $this->_data[$name];

        return NULL;
    }

    public function __set($name, $value) {
        $this->_data[$name] = $value;
    }

    public function UpdateUser(){
        //TODO: update the database with any changes to the user data or do an insert for new user
    }
} 
```

然后您可以动态获取/设置属性，而无需像这样首先声明它们：

```
$newUser = new User();
$newUser->username = "Ismail";
$newUser->UpdateUser(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T09:14:49.350

不幸的是，如果您尝试使用`extract($db_fields);`它需要从构造函数或函数之类的方法内部运行的方法，那么您的想法将不起作用。`extract($db_fields);`它会为你提取变量，但它们不会公开它们将是该函数的本地变量，例如，如果你尝试这个

```
function __construct(){
    extract($db_fields);
    // the $id will be available in the constructor only
    // it will get disposed when this method finished executing
} 
```

另一种方法是使用属性或 setter 和 getter 方法

```
<?php
class User {
    private $db_fields = array(
                        'id', 
                        'username', 
                        'password' => 'ismailPassword', 
                        'first_name',
                        'last_name'
      );

    function getValue($key){
       if (array_key_exists($key, $this->db_fields)){
            return $this->db_fields[$key];
       }
       return NULL;
    }

    function setValue($key, $value){
        $this->db_fields[$key] = $value;        
    }
}

$user = new User();
$user->setValue('username', 'Ismail');
echo " Username: ";
echo $user->getValue('username');
echo "\n\n Password: ";
echo $user->getValue('password');
?> 
```

你可以在这里测试代码[http://codepad.org/8MwBwdut](http://codepad.org/8MwBwdut)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T07:51:18.423

如果您的数据库结果返回键值对，您可以这样做：

```
$array = array();
while (($r = $result->fetch_array()) != false){
   $obj = new \stdClass();
   foreach($r as $key => $value){
       $obj->$key = $value;
   }
   $array[] = $obj;
} 
```

# javascript - 如何不允许旧浏览器用户查看我的页面？

> ID：13890361
> 
> 赞同：-1
> 
> 时间：2012-12-15T07:37:29.277
> 
> 标签：javascript

我想检查用户的浏览器是否支持查询，如果不支持，则网页不会显示，只显示一句话说您的浏览器无法查看页面。但是没有 Jquery ，我对原始 javascript 如何做这样的 `#('body').html('u cant view the page');`事情知之甚少。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T07:44:39.883

您可以将其放在 HTML 的顶部：

```
<!--[if lt IE 9]> 
  <meta http-equiv="refresh" content="0;url=old.html"> 
<![endif]--> 
```

如果你也这样做：

```
<!--[if lt IE 9]> 
<meta http-equiv="refresh" content="10;url=http://aarp.org">
<pre>
You have a browser that I do not, will not, and cannot support you using.

Please, go away now. Run along!
</pre>
<![endif]-->
<!--[if gt IE 8]> 
<html>
... Nothing to see here
</html>
<![endif]--> 
```

它会将访问者重定向到一个页面（没有上述...），该页面将告诉他们您有多不喜欢他们的浏览器。如果重定向需要一点时间，那么无论如何。他们在等待时会得到一个空白页。

请注意，这并没有考虑到您不太喜欢的其他浏览器。歌剧？没有。火狐？纳达。傲游？那还在吗？苹果浏览器？嗯。也不是那个。

因此，这仅适用于您特别不喜欢的 IE。否则，您可能希望包含一个脚本包含，该脚本包含基于某种浏览器嗅探进行重定向。请注意，众所周知，它们很容易被击败。

但是，如果您想阻止仍然存在的少数 Netscape 顽固分子，请查看**[Quirksmode 的浏览器检测文章](http://www.quirksmode.org/js/detect.html)**。嗯，很彻底。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T07:42:36.947

### 使用 IE 条件注释

```
<!--[if lte IE 9]>
Sorry, Upgrade your browser!
<![endif]--> 
```

### 教程：

1.  [QuirksMode 条件注释](http://www.quirksmode.org/css/condcom.html)
2.  [MSDN](http://msdn.microsoft.com/en-us/library/ms537512%28v=vs.85%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T07:53:56.790

我不确定你的意思

但是对于不支持javascript或javascript被禁用的浏览器，使用`<noscript>`标签显示消息

对于本机 javascript，您可以使用`document.write("Hello World!")`将任何消息写入文档网

```
<script >
    document.write("Hello World!")
</script>
<noscript>Your browser does not support JavaScript!</noscript> 
```

# mysql - mysql 用 UTF 等价物替换 html 特殊字符

> ID：13890363
> 
> 赞同：2
> 
> 时间：2012-12-15T07:38:18.547
> 
> 标签：mysql, encoding, utf-8

我有一个数据库，其中一些元素由 HTML 特殊字符组成：

```
| Universidad Tecnol&amp;#243;gica Nacional - UTN                                                  |
| Instituto Tecnol&amp;#243;gico de Buenos Aires                                                   |
| Instituto Superior del Profesorado &amp;quot;Dr. Joaqu&amp;#237;n V. Gonz&amp;#225;lez&amp;quot; |
| Escuela Nacional de N&amp;#225;utica &amp;quot;Manuel Belgrano&amp;quot;                         |
| Conservatorio Nacional de M&amp;#250;sica &amp;quot;Carlos L&amp;#243;pez Buchardo&amp;quot;     |
| Instituto Argentino de Computacion - IAC                                                         |
| Conservatorio de Superior de M&amp;#250;sica &amp;quot;Manuel de Falla&amp;quot;                 | 
```

我需要将其转换为正确的 UTF 格式。**我可以做得比仅仅遍历数据库并从每个代码映射到等效符号更好吗？**

```
&amp;#225; -> 'á'
&amp;quot; -> '"'
... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T16:22:16.127

正如[我在上面的评论](https://stackoverflow.com/questions/13890363/mysql-substitute-html-special-chars-with-utf-equivalents#comment19820380_13890363)中提到的，非常不清楚您在自己的情况下要做什么。

> 我可以做得比仅仅遍历数据库并从每个代码映射到等效符号更好吗？

嗯，是。您可以用它们的替换字符替换字符代码实体（例如`&#123;`和`&#x01ab;`），而无需在“映射”中查找字符代码。但是命名实体（例如`&quot;`）总是需要被查找。

这是我解决一般情况的尝试：

1.  创建一个表来存储在 HTML 中定义的命名字符实体：

    ```
    CREATE TABLE ents (
      ref VARCHAR(8) NOT NULL COLLATE utf8_bin,
      rep CHAR(1)    NOT NULL,
      PRIMARY KEY (ref)
    ); 
    ```

2.  填充此表 - 我建议使用脚本，例如来自 PHP：

    ```
    $dbh = new PDO("mysql:dbname=$dbname", $username, $password);
    $dbh->setAttribute(PDO::ATTR_EMULATE_PREPARES, FALSE);
    $ins = $dbh->prepare('INSERT INTO ents (ref, rep) VALUES (?, ?)');
    $t = get_html_translation_table(HTML_ENTITIES);
    foreach ($t as $k => $v) $ins->execute([substr($v, 1, -1), $k]); 
    ```

3.  定义一个 SQL 函数来执行实体替换（在适用的情况下使用此表，或者通过字符代码）：

    ```
    DELIMITER ;;

    CREATE FUNCTION dhe(s TEXT) RETURNS TEXT
    BEGIN
      DECLARE n, p, i, t INT DEFAULT 0;
      DECLARE r VARCHAR(12);
      entity_search: LOOP
        SET n := LOCATE('&', s, n+1);
        IF (!n) THEN
          LEAVE entity_search;
        END IF;

        IF (SUBSTRING(s, n+1, 1) = '#') THEN
          CASE
            WHEN SUBSTRING(s, n+2, 1) RLIKE '[[:digit:]]' THEN
              SET t := 2, p := n+2, r := '[[:digit:]]';
            WHEN SUBSTRING(s, n+2, 1) = 'x' THEN
              SET t := 3, p := n+3, r := '[[:xdigit:]]';
            ELSE ITERATE entity_search;
          END CASE;
        ELSE
          SET t := 1, p := n+1, r := '[[:alnum:]_]';
        END IF;

        SET i := 0;
        reference: LOOP
          IF SUBSTRING(s, p+i, 1) NOT RLIKE r THEN
            IF SUBSTRING(s, p+i, 1) RLIKE '[[:alnum:]_]' THEN
              ITERATE entity_search;
            END IF;
            LEAVE reference;
          END IF;
          IF i = 8 THEN ITERATE entity_search; END IF;
          SET i := i + 1;
        END LOOP reference;

        SET s := CONCAT(
          LEFT(s, n-1),
          CASE t
            WHEN 1 THEN COALESCE(
              (SELECT rep FROM ents WHERE ref = SUBSTRING(s, p, i))
            , SUBSTRING(s, n, i + IF(SUBSTRING(s, p+i, 1)=';',1,0))
            )
            WHEN 2 THEN CHAR(SUBSTRING(s, p, i))
            WHEN 3 THEN CHAR(CONV(SUBSTRING(s, p, i), 16, 10))
          END,
          SUBSTRING(s, p + i + IF(SUBSTRING(s, p+i, 1)=';',1,0))
        );
      END LOOP entity_search;
      RETURN s;
    END;;

    DELIMITER ; 
    ```

4.  应用此函数*两次*以解码您的（显然）双重编码表：

    ```
    UPDATE my_table SET my_column = dhe(dhe(my_column)); 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T15:22:33.040

看起来这将是一次性解决方案，所以我不会考虑太多通用的东西。我只想找到所有转义符号，例如（用对您的表的引用替换联合）：

```
SELECT DISTINCT IF(@p:=LOCATE('&amp;', s), 
                   SUBSTR(s, @p, LOCATE(';', s, @p+5)-@p+1),
                   NULL) as e_chars
FROM (
SELECT 'Universidad Tecnol&amp;#243;gica Nacional - UTN' as s
UNION ALL
SELECT 'Instituto Tecnol&amp;#243;gico de Buenos Aires'
UNION ALL
SELECT 'Instituto Superior del Profesorado &amp;quot;Dr. Joaqu&amp;#237;n V. Gonz&amp;#225;lez&amp;quot;'
UNION ALL
SELECT 'Escuela Nacional de N&amp;#225;utica &amp;quot;Manuel Belgrano&amp;quot;'
UNION ALL
SELECT 'Conservatorio Nacional de M&amp;#250;sica &amp;quot;Carlos L&amp;#243;pez Buchardo&amp;quot;'
UNION ALL
SELECT 'Instituto Argentino de Computacion - IAC'
UNION ALL
SELECT 'Conservatorio de Superior de M&amp;#250;sica &amp;quot;Manuel de Falla&amp;quot;'
) as s; 
```

受到：

```
'&amp;#243;'
'&amp;quot;'
'&amp;#225;'
'&amp;#250;' 
```

然后我会写一个简单的更新查询，如：

```
UPDATE t1 SET
s = REPLACE(s, '&amp;#243;', 'ó'),
s = REPLACE(s, '&amp;quot;', ''''),
s = REPLACE(s, '&amp;#225;', 'á'),
s = REPLACE(s, '&amp;#250;', 'ú')
WHERE LOCATE(s, '&amp;'); 
```

然后你可以重复第一个查询，看看是否还有剩余的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T16:37:03.087

MySQL 不提供任何功能来解码 HTML 实体。MySQL 不关心 HTML，也不会专门为它提供任何功能。

如果您不希望这些在数据库中，则需要在插入字符串之前对其进行解码。如果您使用的是 PHP，那么[html_entity_decode()](http://php.net/manual/en/function.html-entity-decode.php) 函数可能就是您要寻找的。

至于那些已经在数据库中的，您将需要创建一个 PHP 脚本来遍历并读取每一行，处理它，然后用新的解码行替换旧行。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-09T16:01:09.893

你可以通过几种方式来解决这个问题。

**将所有 HTML 实体数据更新为正确的编码**

这是最好的长期解决方案。不断在 html 实体之间进行转换是在浪费 CPU 时间。这对于 1 个查询（100 毫秒或更短）来说可能并不多，但可以将其扩展到 1,000 多个用户，每秒执行数十次，并且很快就会变成有意义的 CPU 时间。

**使用 SQL 存储过程/函数进行转换。**

我过去做过几次，这是一个快速修复。好处是您可以重用此功能，但是您必须手动添加要转换的每个 HTML 实体实例，这很快就会变得乏味。这是我写的函数。

```
CREATE DEFINER = `root`@`localhost` FUNCTION `NewProc`(x longtext)
 RETURNS longtext
    NO SQL
    DETERMINISTIC
BEGIN
DECLARE TextString LONGTEXT;
SET TextString = x ;

#quotation mark
IF INSTR( x , '&quot;' )
THEN SET TextString = REPLACE(TextString, '&quot;','"') ;
END IF ;

#apostrophe 
IF INSTR( x , '&apos;' )
THEN SET TextString = REPLACE(TextString, '&apos;','"') ;
END IF ;

#ampersand
IF INSTR( x , '&amp;' )
THEN SET TextString = REPLACE(TextString, '&amp;','&') ;
END IF ;

#less-than
IF INSTR( x , '&lt;' )
THEN SET TextString = REPLACE(TextString, '&lt;','<') ;
END IF ;

#greater-than
IF INSTR( x , '&gt;' )
THEN SET TextString = REPLACE(TextString, '&gt;','>') ;
END IF ;

#non-breaking space
IF INSTR( x , '&nbsp;' )
THEN SET TextString = REPLACE(TextString, '&nbsp;',' ') ;
END IF ;

#inverted exclamation mark
IF INSTR( x , '&iexcl;' )
THEN SET TextString = REPLACE(TextString, '&iexcl;','¡') ;
END IF ;

#cent
IF INSTR( x , '&cent;' )
THEN SET TextString = REPLACE(TextString, '&cent;','¢') ;
END IF ;

#pound
IF INSTR( x , '&pound;' )
THEN SET TextString = REPLACE(TextString, '&pound;','£') ;
END IF ;

#currency
IF INSTR( x , '&curren;' )
THEN SET TextString = REPLACE(TextString, '&curren;','¤') ;
END IF ;

#yen
IF INSTR( x , '&yen;' )
THEN SET TextString = REPLACE(TextString, '&yen;','¥') ;
END IF ;

#broken vertical bar
IF INSTR( x , '&brvbar;' )
THEN SET TextString = REPLACE(TextString, '&brvbar;','¦') ;
END IF ;

#section
IF INSTR( x , '&sect;' )
THEN SET TextString = REPLACE(TextString, '&sect;','§') ;
END IF ;

#spacing diaeresis
IF INSTR( x , '&uml;' )
THEN SET TextString = REPLACE(TextString, '&uml;','¨') ;
END IF ;

#copyright
IF INSTR( x , '&copy;' )
THEN SET TextString = REPLACE(TextString, '&copy;','©') ;
END IF ;

#feminine ordinal indicator
IF INSTR( x , '&ordf;' )
THEN SET TextString = REPLACE(TextString, '&ordf;','ª') ;
END IF ;

#angle quotation mark (left)
IF INSTR( x , '&laquo;' )
THEN SET TextString = REPLACE(TextString, '&laquo;','«') ;
END IF ;

#negation
IF INSTR( x , '&not;' )
THEN SET TextString = REPLACE(TextString, '&not;','¬') ;
END IF ;

#soft hyphen
IF INSTR( x , '&shy;' )
THEN SET TextString = REPLACE(TextString, '&shy;','­') ;
END IF ;

#registered trademark
IF INSTR( x , '&reg;' )
THEN SET TextString = REPLACE(TextString, '&reg;','®') ;
END IF ;

#spacing macron
IF INSTR( x , '&macr;' )
THEN SET TextString = REPLACE(TextString, '&macr;','¯') ;
END IF ;

#degree
IF INSTR( x , '&deg;' )
THEN SET TextString = REPLACE(TextString, '&deg;','°') ;
END IF ;

#plus-or-minus 
IF INSTR( x , '&plusmn;' )
THEN SET TextString = REPLACE(TextString, '&plusmn;','±') ;
END IF ;

#superscript 2
IF INSTR( x , '&sup2;' )
THEN SET TextString = REPLACE(TextString, '&sup2;','²') ;
END IF ;

#superscript 3
IF INSTR( x , '&sup3;' )
THEN SET TextString = REPLACE(TextString, '&sup3;','³') ;
END IF ;

#spacing acute
IF INSTR( x , '&acute;' )
THEN SET TextString = REPLACE(TextString, '&acute;','´') ;
END IF ;

#micro
IF INSTR( x , '&micro;' )
THEN SET TextString = REPLACE(TextString, '&micro;','µ') ;
END IF ;

#paragraph
IF INSTR( x , '&para;' )
THEN SET TextString = REPLACE(TextString, '&para;','¶') ;
END IF ;

#middle dot
IF INSTR( x , '&middot;' )
THEN SET TextString = REPLACE(TextString, '&middot;','·') ;
END IF ;

#spacing cedilla
IF INSTR( x , '&cedil;' )
THEN SET TextString = REPLACE(TextString, '&cedil;','¸') ;
END IF ;

#superscript 1
IF INSTR( x , '&sup1;' )
THEN SET TextString = REPLACE(TextString, '&sup1;','¹') ;
END IF ;

#masculine ordinal indicator
IF INSTR( x , '&ordm;' )
THEN SET TextString = REPLACE(TextString, '&ordm;','º') ;
END IF ;

#angle quotation mark (right)
IF INSTR( x , '&raquo;' )
THEN SET TextString = REPLACE(TextString, '&raquo;','»') ;
END IF ;

#fraction 1/4
IF INSTR( x , '&frac14;' )
THEN SET TextString = REPLACE(TextString, '&frac14;','¼') ;
END IF ;

#fraction 1/2
IF INSTR( x , '&frac12;' )
THEN SET TextString = REPLACE(TextString, '&frac12;','½') ;
END IF ;

#fraction 3/4
IF INSTR( x , '&frac34;' )
THEN SET TextString = REPLACE(TextString, '&frac34;','¾') ;
END IF ;

#inverted question mark
IF INSTR( x , '&iquest;' )
THEN SET TextString = REPLACE(TextString, '&iquest;','¿') ;
END IF ;

#multiplication
IF INSTR( x , '&times;' )
THEN SET TextString = REPLACE(TextString, '&times;','×') ;
END IF ;

#division
IF INSTR( x , '&divide;' )
THEN SET TextString = REPLACE(TextString, '&divide;','÷') ;
END IF ;

#capital a, grave accent
IF INSTR( x , '&Agrave;' )
THEN SET TextString = REPLACE(TextString, '&Agrave;','À') ;
END IF ;

#capital a, acute accent
IF INSTR( x , '&Aacute;' )
THEN SET TextString = REPLACE(TextString, '&Aacute;','Á') ;
END IF ;

#capital a, circumflex accent
IF INSTR( x , '&Acirc;' )
THEN SET TextString = REPLACE(TextString, '&Acirc;','Â') ;
END IF ;

#capital a, tilde
IF INSTR( x , '&Atilde;' )
THEN SET TextString = REPLACE(TextString, '&Atilde;','Ã') ;
END IF ;

#capital a, umlaut mark
IF INSTR( x , '&Auml;' )
THEN SET TextString = REPLACE(TextString, '&Auml;','Ä') ;
END IF ;

#capital a, ring
IF INSTR( x , '&Aring;' )
THEN SET TextString = REPLACE(TextString, '&Aring;','Å') ;
END IF ;

#capital ae
IF INSTR( x , '&AElig;' )
THEN SET TextString = REPLACE(TextString, '&AElig;','Æ') ;
END IF ;

#capital c, cedilla
IF INSTR( x , '&Ccedil;' )
THEN SET TextString = REPLACE(TextString, '&Ccedil;','Ç') ;
END IF ;

#capital e, grave accent
IF INSTR( x , '&Egrave;' )
THEN SET TextString = REPLACE(TextString, '&Egrave;','È') ;
END IF ;

#capital e, acute accent
IF INSTR( x , '&Eacute;' )
THEN SET TextString = REPLACE(TextString, '&Eacute;','É') ;
END IF ;

#capital e, circumflex accent
IF INSTR( x , '&Ecirc;' )
THEN SET TextString = REPLACE(TextString, '&Ecirc;','Ê') ;
END IF ;

#capital e, umlaut mark
IF INSTR( x , '&Euml;' )
THEN SET TextString = REPLACE(TextString, '&Euml;','Ë') ;
END IF ;

#capital i, grave accent
IF INSTR( x , '&Igrave;' )
THEN SET TextString = REPLACE(TextString, '&Igrave;','Ì') ;
END IF ;

#capital i, acute accent
IF INSTR( x , '&Iacute;' )
THEN SET TextString = REPLACE(TextString, '&Iacute;','Í') ;
END IF ;

#capital i, circumflex accent
IF INSTR( x , '&Icirc;' )
THEN SET TextString = REPLACE(TextString, '&Icirc;','Î') ;
END IF ;

#capital i, umlaut mark
IF INSTR( x , '&Iuml;' )
THEN SET TextString = REPLACE(TextString, '&Iuml;','Ï') ;
END IF ;

#capital eth, Icelandic
IF INSTR( x , '&ETH;' )
THEN SET TextString = REPLACE(TextString, '&ETH;','Ð') ;
END IF ;

#capital n, tilde
IF INSTR( x , '&Ntilde;' )
THEN SET TextString = REPLACE(TextString, '&Ntilde;','Ñ') ;
END IF ;

#capital o, grave accent
IF INSTR( x , '&Ograve;' )
THEN SET TextString = REPLACE(TextString, '&Ograve;','Ò') ;
END IF ;

#capital o, acute accent
IF INSTR( x , '&Oacute;' )
THEN SET TextString = REPLACE(TextString, '&Oacute;','Ó') ;
END IF ;

#capital o, circumflex accent
IF INSTR( x , '&Ocirc;' )
THEN SET TextString = REPLACE(TextString, '&Ocirc;','Ô') ;
END IF ;

#capital o, tilde
IF INSTR( x , '&Otilde;' )
THEN SET TextString = REPLACE(TextString, '&Otilde;','Õ') ;
END IF ;

#capital o, umlaut mark
IF INSTR( x , '&Ouml;' )
THEN SET TextString = REPLACE(TextString, '&Ouml;','Ö') ;
END IF ;

#capital o, slash
IF INSTR( x , '&Oslash;' )
THEN SET TextString = REPLACE(TextString, '&Oslash;','Ø') ;
END IF ;

#capital u, grave accent
IF INSTR( x , '&Ugrave;' )
THEN SET TextString = REPLACE(TextString, '&Ugrave;','Ù') ;
END IF ;

#capital u, acute accent
IF INSTR( x , '&Uacute;' )
THEN SET TextString = REPLACE(TextString, '&Uacute;','Ú') ;
END IF ;

#capital u, circumflex accent
IF INSTR( x , '&Ucirc;' )
THEN SET TextString = REPLACE(TextString, '&Ucirc;','Û') ;
END IF ;

#capital u, umlaut mark
IF INSTR( x , '&Uuml;' )
THEN SET TextString = REPLACE(TextString, '&Uuml;','Ü') ;
END IF ;

#capital y, acute accent
IF INSTR( x , '&Yacute;' )
THEN SET TextString = REPLACE(TextString, '&Yacute;','Ý') ;
END IF ;

#capital THORN, Icelandic
IF INSTR( x , '&THORN;' )
THEN SET TextString = REPLACE(TextString, '&THORN;','Þ') ;
END IF ;

#small sharp s, German
IF INSTR( x , '&szlig;' )
THEN SET TextString = REPLACE(TextString, '&szlig;','ß') ;
END IF ;

#small a, grave accent
IF INSTR( x , '&agrave;' )
THEN SET TextString = REPLACE(TextString, '&agrave;','à') ;
END IF ;

#small a, acute accent
IF INSTR( x , '&aacute;' )
THEN SET TextString = REPLACE(TextString, '&aacute;','á') ;
END IF ;

#small a, circumflex accent
IF INSTR( x , '&acirc;' )
THEN SET TextString = REPLACE(TextString, '&acirc;','â') ;
END IF ;

#small a, tilde
IF INSTR( x , '&atilde;' )
THEN SET TextString = REPLACE(TextString, '&atilde;','ã') ;
END IF ;

#small a, umlaut mark
IF INSTR( x , '&auml;' )
THEN SET TextString = REPLACE(TextString, '&auml;','ä') ;
END IF ;

#small a, ring
IF INSTR( x , '&aring;' )
THEN SET TextString = REPLACE(TextString, '&aring;','å') ;
END IF ;

#small ae
IF INSTR( x , '&aelig;' )
THEN SET TextString = REPLACE(TextString, '&aelig;','æ') ;
END IF ;

#small c, cedilla
IF INSTR( x , '&ccedil;' )
THEN SET TextString = REPLACE(TextString, '&ccedil;','ç') ;
END IF ;

#small e, grave accent
IF INSTR( x , '&egrave;' )
THEN SET TextString = REPLACE(TextString, '&egrave;','è') ;
END IF ;

#small e, acute accent
IF INSTR( x , '&eacute;' )
THEN SET TextString = REPLACE(TextString, '&eacute;','é') ;
END IF ;

#small e, circumflex accent
IF INSTR( x , '&ecirc;' )
THEN SET TextString = REPLACE(TextString, '&ecirc;','ê') ;
END IF ;

#small e, umlaut mark
IF INSTR( x , '&euml;' )
THEN SET TextString = REPLACE(TextString, '&euml;','ë') ;
END IF ;

#small i, grave accent
IF INSTR( x , '&igrave;' )
THEN SET TextString = REPLACE(TextString, '&igrave;','ì') ;
END IF ;

#small i, acute accent
IF INSTR( x , '&iacute;' )
THEN SET TextString = REPLACE(TextString, '&iacute;','í') ;
END IF ;

#small i, circumflex accent
IF INSTR( x , '&icirc;' )
THEN SET TextString = REPLACE(TextString, '&icirc;','î') ;
END IF ;

#small i, umlaut mark
IF INSTR( x , '&iuml;' )
THEN SET TextString = REPLACE(TextString, '&iuml;','ï') ;
END IF ;

#small eth, Icelandic
IF INSTR( x , '&eth;' )
THEN SET TextString = REPLACE(TextString, '&eth;','ð') ;
END IF ;

#small n, tilde
IF INSTR( x , '&ntilde;' )
THEN SET TextString = REPLACE(TextString, '&ntilde;','ñ') ;
END IF ;

#small o, grave accent
IF INSTR( x , '&ograve;' )
THEN SET TextString = REPLACE(TextString, '&ograve;','ò') ;
END IF ;

#small o, acute accent
IF INSTR( x , '&oacute;' )
THEN SET TextString = REPLACE(TextString, '&oacute;','ó') ;
END IF ;

#small o, circumflex accent
IF INSTR( x , '&ocirc;' )
THEN SET TextString = REPLACE(TextString, '&ocirc;','ô') ;
END IF ;

#small o, tilde
IF INSTR( x , '&otilde;' )
THEN SET TextString = REPLACE(TextString, '&otilde;','õ') ;
END IF ;

#small o, umlaut mark
IF INSTR( x , '&ouml;' )
THEN SET TextString = REPLACE(TextString, '&ouml;','ö') ;
END IF ;

#small o, slash
IF INSTR( x , '&oslash;' )
THEN SET TextString = REPLACE(TextString, '&oslash;','ø') ;
END IF ;

#small u, grave accent
IF INSTR( x , '&ugrave;' )
THEN SET TextString = REPLACE(TextString, '&ugrave;','ù') ;
END IF ;

#small u, acute accent
IF INSTR( x , '&uacute;' )
THEN SET TextString = REPLACE(TextString, '&uacute;','ú') ;
END IF ;

#small u, circumflex accent
IF INSTR( x , '&ucirc;' )
THEN SET TextString = REPLACE(TextString, '&ucirc;','û') ;
END IF ;

#small u, umlaut mark
IF INSTR( x , '&uuml;' )
THEN SET TextString = REPLACE(TextString, '&uuml;','ü') ;
END IF ;

#small y, acute accent
IF INSTR( x , '&yacute;' )
THEN SET TextString = REPLACE(TextString, '&yacute;','ý') ;
END IF ;

#small thorn, Icelandic
IF INSTR( x , '&thorn;' )
THEN SET TextString = REPLACE(TextString, '&thorn;','þ') ;
END IF ;

#small y, umlaut mark
IF INSTR( x , '&yuml;' )
THEN SET TextString = REPLACE(TextString, '&yuml;','ÿ') ;
END IF ;

RETURN TextString ;
END; 
```

**转换代码中的实体。**

正如 JMack 所提到的，此功能内置于 PHP 以及各种其他语言（如 Ruby、Java 等）中。这是另一个快速修复。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-13T14:25:00.380

如果我是你，我会交叉手指并注意：

*   在运行任何类型的操作之前，我都会进行备份。
*   我一直在做一个测试，告诉我更换是否成功。
*   我记录了我所做的查询，以便我可以做一些 UNDO 操作。
*   我不使用任何需要应用*两次*的东西，因为它不完整。

我可能会做的是创建一些生成查询的 PHP 例程，每行一个。检查包含双编码值的行并生成所需的更改。

这是在 WHERE 条件中处理每行的唯一 ID（主键），以便知道哪些行被更改，而不是哪些数据。

如果你完成了，你可以对数据库运行这个 SQL 作为一个批处理。您还可以针对实际数据库的副本运行它，以便进行某种试运行并稍后进行一些质量检查。

希望这可以帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-28T23:59:16.843

我必须做同样的事情，虽然我的字段是 UTF-8 所以''='%20'。这是一个要修复的简单查询（在我的表上工作..当然你需要自己调整）：

```
update TABLE set FIELD_NAME=replace(FIELD_NAME,'&amp;#225','á'); 
```

我从一个类似的问题中得到了这个：[Search and replace part of string in database](https://stackoverflow.com/questions/605768/search-and-replace-part-of-string-in-database)

此外，如果您有少量字符替换，这仍然很容易做到。

# xcode - 无法在“邮件”应用程序中执行 AppleScript

> ID：13890369
> 
> 赞同：5
> 
> 时间：2012-12-15T07:39:17.483
> 
> 标签：xcode, macos, plugins, applescript, apple-mail

我创建了一个邮件插件，并在外发邮件的“发送”按钮旁边添加了“按钮”，

![在此处输入图像描述](../Images/72b015ff27dc6b1430843377566d4bb3.png)

现在我也想从我的按钮发送外发邮件，我也为此编写了applescript

```
activate application "Mail"
tell application "System Events"
    tell application process "Mail"
        log "foo"
        tell menu bar 1
            tell menu bar item "Message"
                tell menu "Message"
                    click menu item "Send"
                end tell
            end tell
        end tell
    end tell
end tell 
```

此脚本在 Applescript 编辑器中工作，但不能通过我的按钮单击工作

我也在 Xcode 中执行了 applescript，比如

```
NSURL* url = [NSURL fileURLWithPath:path];
NSDictionary* errors = [NSDictionary dictionary];    
NSAppleScript* appleScript = [[NSAppleScript alloc] initWithContentsOfURL:url error:&errors];
[appleScript executeAndReturnError:&errors]; 
```

执行脚本后，我收到错误：-

```
NSAppleScriptErrorAppName = "System Events";
NSAppleScriptErrorBriefMessage = "Can't get menu bar 1 of application process \"Mail\". Invalid index.";
NSAppleScriptErrorMessage = "System Events got an error: Can't get menu bar 1 of application process \"Mail\". Invalid index.";
NSAppleScriptErrorNumber = "-1719";
NSAppleScriptErrorRange = "NSRange: {0, 0}"; 
```

所以我已经尝试了所有的东西但没有成功。

所以请帮我解决这个问题

感谢您的任何建议或帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T08:39:11.583

该菜单项确实有一个键盘快捷键，因此您也可以使用它。你试过这个吗？

```
activate application "Mail"
tell application "System Events"
    tell application process "Mail"
        keystroke "d" using {command down, shift down}
    end tell
end tell 
```

# php - utf8 表示为普通文本

> ID：13890370
> 
> 赞同：2
> 
> 时间：2012-12-15T07:39:24.027
> 
> 标签：php, utf-8, utf

```
$text = "\xd0\xa2\xd0\xb0\xd0\xb9\xd0\xbd\xd0\xb0";
$text = iconv('UTF-8', 'UTF-8//IGNORE', $text);
var_dump($text); //Тайна - good
$text = file_get_contents('log.txt');
$text = iconv('UTF-8', 'UTF-8//IGNORE', trim($text));
var_dump($text); // \xd0\xa2\xd0\xb0\xd0\xb9\xd0\xbd\xd0\xb0 - bad 
```

为什么如果`\xd0\xa2\xd0\xb0\xd0\xb9\xd0\xbd\xd0\xb0`从文件中读取字符串`iconv`不起作用以及如何修复它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T08:05:39.767

字符串文字和文件中的文本不等价。`$text`已经是 utf-8 (Тайна) 并且 iconv 对它没有任何作用。这是因为您使用[转义序列](http://php.net/manual/en/regexp.reference.escape.php)将实际的二进制值放入字符串中。文件中的数据`\xd0\xa2\xd0\xb0\xd0\xb9\xd0\xbd\xd0\xb0`不会被转义，因为它是从文件中读取并存储在变量中的，因此它不是字符串文字。试试这个来转换数据

```
$text = file_get_contents('log.txt');
$text = str_replace('\x', '', trim($text));
$text = pack('H*', $text);
var_dump($text); 
```

# objective-c - NSIndexPath 2 个索引

> ID：13890373
> 
> 赞同：1
> 
> 时间：2012-12-15T07:40:29.280
> 
> 标签：objective-c, ios

我正在做一些涉及其中包含照片的集合视图，并且在选择其中一个单元格时，它将进入一个显示更大图像的新视图。

继承人为segue做准备

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    if ([segue.identifier isEqualToString:@"showPhotoSegue"]) {
        NSIndexPath *ip = [self.photoCollectionView indexPathForCell:sender];
        PhotoDisplayViewController *viewController = segue.destinationViewController;
        Photo* photo = [self.fetchedResultsController objectAtIndexPath:ip];
        NSLog(@"setting PHOTO at indexPath %@", ip);
        [viewController setPhoto:[UIImage imageWithContentsOfFile:photo.url]];
    }

} 
```

继承人 didSelectItemAtIndexPath

```
-(void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath{
    NSString *identifier = @"showPhotoSegue";
    [self performSegueWithIdentifier:identifier sender:self];
    NSLog(@"Selected item at %@", indexPath);
} 
```

我的视图总是空的，所以我添加了打印行语句，看起来输出总是像

```
Selected cell at <NSIndexPath 0x1e084940> 2 indexes [0, 0], detail view controller 
```

所以我的问题是，为什么 NSIndexPath 总是一对 2 索引，以及如何在我的 prepareforsegue 中使用它来设置 segue 的视图

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T07:52:50.770

在`prepareForSegue:sender:`中，您期望`sender`成为`UICollectionViewCell`.

在`collectionView:didSelectItemAtIndexPath:`中，您将`self`(your `UICollectionViewDelegate`) 作为`sender`参数传递。我怀疑您的集合视图委托*不是*集合视图单元。

与其发送集合视图委托`sender`并期望接收单元格`sender`，为什么不传递索引路径`sender`并期望接收它`sender`呢？

```
static NSString const *kShowPhotoSegueIdentifier = @"showPhotoSegue";

- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath {
    [self performSegueWithIdentifier:kShowPhotoSegueIdentifier sender:indexPath];
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([segue.identifier isEqualToString:kShowPhotoSegueIdentifier]) {
        [self prepareForShowPhotoSegue:segue withIndexPath:sender];
    }
}

- (void)prepareForShowPhotoSegue:(UIStoryboardSegue *)segue withIndexPath:(NSIndexPath *)indexPath {
    PhotoDisplayViewController *viewController = segue.destinationViewController;
    Photo* photo = [self.fetchedResultsController objectAtIndexPath:indexPath];
    [viewController setPhoto:[UIImage imageWithContentsOfFile:photo.url]];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T07:52:19.950

`NSIndexPath`是用于表示目录树的文件结构。在表 (indexPathForCell:) 的上下文中，它包含一个节和行索引。

> 索引路径中的每个索引表示从树中的一个节点到另一个更深节点的子数组的索引。例如，索引路径 1.4.3.2 指定图 1 所示的路径。

[文档中的](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSIndexPath_Class/Reference/Reference.html)更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T12:52:38.697

NSIndexPath 主要用于 UITableView 它将考虑 Section 以及 Row 的地方..

所以无论你想在哪里使用 NSIndexPath，你都可以访问行和部分。

所以我要求你使用 indexpath.row 作为你的索引变量，如果 indexpath.section 对你没有用..

# mysql - 重新计算以修复 mysql 中的主 ID

> ID：13890375
> 
> 赞同：1
> 
> 时间：2012-12-15T07:40:44.340
> 
> 标签：mysql

在插入带有主键的 5 行表并删除中间数据后如何重新计算以修复主计数？例如我有这一行

```
|id |name

| 0 |mahdi
| 1 |mojtaba
| 2 |maryam 
```

从行中删除 mojtaba 后，我有这个：

```
|id |name

| 0 |mahdi
| 2 |maryam 
```

如何重新计算 id 以修复此表：

```
|id |name

| 0 |mahdi
| 1 |maryam 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T08:01:15.813

我会说这不是主键的***FIX***，而是主键的***MESS***。

如果您将此主键作为其他一些表的外键，那么在更新上述内容的同时处理这些将是非常乏味的工作。

# javascript - 在页面加载时插入 DOM 元素，而不是之后

> ID：13890377
> 
> 赞同：5
> 
> 时间：2012-12-15T07:41:22.307
> 
> 标签：javascript, dom, google-chrome-extension

我正在开发一个 chrome 扩展，它将一个 div 插入到 dom 的 body 元素中。现在我正在创建一个在加载时触发以创建元素的事件处理程序。这当然意味着页面加载完成，然后我的div被插入，这意味着用户看到没有div的页面，直到加载完成，然后div弹出。我希望 div 在页面加载时在那里。有没有办法在编写任何其他元素之前劫持 body 元素？或者我是否必须以某种方式隐藏内容，直到所有内容都加载完毕，这当然意味着用户会看到一段时间的空白屏幕。

如果可能的话，我想避免使用 jQuery。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T08:35:35.297

我不是 100% 确定，但是查看 Chrome 扩展开发人员指南，看起来如果您使用的是内容脚本并将`run_at`扩展清单中的字段指定为`document_start`，那么它应该在构建 DOM 之前注入文件。

# sencha-touch - Sencha Touch 应用程序在 Visual Studio 和 Android 模拟器的浏览器中显示为空白

> ID：13890379
> 
> 赞同：1
> 
> 时间：2012-12-15T07:41:42.653
> 
> 标签：sencha-touch

我刚开始使用 Sencha Touch 并下载了它的免费商业版。我在 Visual Studio 中尝试了以下示例，但 Sencha Touch 应用程序在浏览器中显示为空白。我在 Safari（5.1.7 版）和 Chrome（23 版）中尝试过。[我还可以在 safari 中看到下载的 Sencha 框架提供的示例，但在 Chrome 中看不到）。我使用 IDE eclipse 在 Android 中尝试过的相同应用程序。但也有 android 模拟器什么也没显示。

请帮我找出问题所在。

代码：-

```
 <!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title></title>
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <meta name="author" content="" />
    <meta name="viewport" content="width=device-width; initial-scale=1.0" />
    <!-- !CSS -->
    <link href="/content/css/sencha-touch.css" rel="stylesheet" type="text/css" />
    <!-- !JS -->
    <script src="/content/js/sencha-touch.js" type="text/javascript"></script>
    <script type="text/javascript">
        Ext.setup({
            onReady: function () {
                // create the root panel
                new Ext.Panel({
                    fullscreen: true,
                    html: "Sencha Touch is ready!"
                });
            }
        });
</script>
</head>
<body>
</body>
</html> 
```

![在此处输入图像描述](../Images/cd46b083968a33909331e3fbb2b86ef6.png)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T07:07:16.147

最好使用（调试时）**Google Chrome**并且不能在~~IE 或 Firefox~~中工作。

如果您在 Google Chrome 中启动，您将看到结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T03:53:06.827

您是否尝试过将 index.html 文件设置为启动页面？

在 VS 解决方案资源管理器中，右键单击 index.html 文件，然后选择设置为起始页。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T05:44:55.050

如果您使用的是 Visual Studio，那么您显然在 Windows 上使用 IIS 服务器。要使其正常工作，只需将扩展名为 .json 的新 MIME 类型“JSON”添加到您的我们的服务器。IIS 默认不处理 json mime 类型。祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T04:24:22.087

[我认为您应该在此处](http://docs.sencha.com/touch/2-0/#!/guide/getting_started)查看入门文档。

您将使用 Visual Studio 作为文本编辑器，这很棒，但[Architect](http://www.sencha.com/products/architect/)产品可能会帮助您加快速度，我认为有免费版本。

如果您仍然遇到问题，浏览器“控制台”中的错误将有助于解决您可能遇到的其他错误。

# iphone - 在 Iphone SDK 的导航栏上添加多个按钮

> ID：13890380
> 
> 赞同：0
> 
> 时间：2012-12-15T07:41:52.507
> 
> 标签：iphone, ios, xcode, uinavigationcontroller, uinavigationbar

我想将两个带有自定义图像的按钮添加到具有特定位置的导航栏。

我找到了解决方案，但它适用于右/左导航栏按钮。

我的代码是：

```
 NSMutableArray *buttons = [[NSMutableArray alloc] initWithCapacity:2];
 UIToolbar *tools = [[UIToolbar alloc]
                    initWithFrame:CGRectMake(0.0f, 0.0f, 90.0f, 55.01f)];
// Add Pin button.

UIBarButtonItem *bi1 = [[UIBarButtonItem alloc] initWithTitle:@"Edit" style:UIBarButtonItemStylePlain target:self action:@selector(Edit:)];
bi1.style = UIBarButtonItemStyleBordered;
bi1.width = 45;
[buttons addObject:bi1];
[bi1 release];

// Add Hot Spot button.
UIBarButtonItem *bi2 = [[UIBarButtonItem alloc] initWithTitle:@"+" style:UIBarButtonItemStylePlain target:self action:@selector(Add:)];
bi2.style = UIBarButtonItemStyleBordered;
[buttons addObject:bi2];
[bi2 release];

// Add buttons to toolbar and toolbar to nav bar.
[tools setItems:buttons animated:NO];
[buttons release];

 // Add toolbar to nav bar.
UIBarButtonItem *twoButtons = [[UIBarButtonItem alloc] initWithCustomView:tools];
[tools release];
self.navigationItem.rightBarButtonItem = twoButtons;
[twoButtons release]; 
```

**我怎样才能做到这一点？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T07:47:34.100

```
UIView *vieww =[[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
[vieww addSubview:yourBtn1];
[vieww addSubview:yourBtn2];

[self.navigationController.navigationBar addSubview:vieww]; 
```

如果你想删除 yourButtonView 那么 make 是全局对象；

```
in .h

UIView *vieww; 
```

并且在`.m`

```
-(void)viewWillDisappear:(BOOL)animated
{
    [vieww removeFromSuperview];
} 
```

或者按照这个获取更多 [链接](https://stackoverflow.com/questions/13488710/how-to-set-a-picture-programmatically-in-a-navbar#comment18517078_13488710)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T09:10:06.250

如果您使用的是 >iOS 5，请使用它。

```
UIBarButtonItem *btn1=[[UIBarButtonItem alloc] initWithTitle:@" + " style:UIBarButtonItemStyleDone target:self action:@selector(action1:)];
    UIBarButtonItem *btn2=[[UIBarButtonItem alloc] initWithTitle:@" - " style:UIBarButtonItemStyleDone target:self action:@selector(action2:) ];
self.navigationItem.rightBarButtonItems=[NSArray arrayWithObjects:btn1,btn2,nil]; 
```

对于 < iOS 5，您可以使用以下内容：

```
UIToolbar* tools = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 160, 44.01)];
        tools.barStyle = UIBarStyleBlackOpaque;
        // create the array to hold the buttons, which then gets added to the toolbar
        NSMutableArray* buttons = [[NSMutableArray alloc] initWithCapacity:4];
        [buttons addObject:btn1];
        [buttons addObject:btn2];
        [tools setItems:buttons animated:NO];
        self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:tools]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T07:47:24.973

您可以创建一个 UIView，在该视图上添加两个按钮，而不是添加工具栏。

```
 UIBarButtonItem *twoButtons = [[UIBarButtonItem alloc] initWithCustomView:yourView]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-10T11:43:32.570

如果您想结合使用情节提要执行此操作，请查看[此问题](https://stackoverflow.com/questions/9897978/cant-assign-multiple-buttons-to-uinavigationitem-when-using-storyboard-with-ios/17019667#17019667)。

# matlab - ButtonDown 事件有时不起作用 matlab

> ID：13890381
> 
> 赞同：0
> 
> 时间：2012-12-15T07:41:57.860
> 
> 标签：matlab, matlab-guide

我在 matlab 中有两个文本框和一个按钮。使用 GUIDE 设计表格。我使用以下代码将值从一个文本框复制到另一个文本框。该代码有时而不是总是有效。我无法找到它工作的场景以及这段代码有什么问题。

```
function pushbutton1_ButtonDownFcn(hObject, eventdata, handles)
myTextBox1 = findobj('Tag','edit1');
myTextBox2 = findobj('Tag','edit2');
str = get(myTextBox1,'String');
set(myTextBox2,'String',str); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T11:51:06.890

It worked when i gave the code in pushbutton1_Callback(...) function. Thanks.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T12:54:42.007

鉴于评论，可以肯定地说这段代码没有任何问题。

这还不是一个解决方案，但很明显你在错误的地方搜索。

您要检查的两件事：

*   您的程序在调用函数时所处的状态，可能相关变量发生了一些奇怪的事情。
*   您用作输入的文件的可用性是否存在问题，如果您在文件更新后立即使用文件，这可能是导致问题的原因。

# android - 进度对话框无法停止

> ID：13890384
> 
> 赞同：4
> 
> 时间：2012-12-15T07:42:20.497
> 
> 标签：android

我是 android 新手。我在我的应用程序中使用进度对话框，但它无法停止。在我的应用程序中，我正在使用 webview。在第一个活动中，我有连接按钮。在第二个活动中，连接到 facebook 代码可用。在第二个活动代码中：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.facebook);
    wvFacebook.setWebViewClient(new MyWebViewClient()); 
    wvFacebook.loadUrl(strFacebook);
} 

private class MyWebViewClient extends WebViewClient 
{            
    public boolean shouldOverrideUrlLoading(WebView view, String url) 
    {
        view.getSettings().setJavaScriptEnabled(true);
        view.loadUrl(url);
        return true;
    }

    @Override
    public void onPageStarted(WebView view, String url, Bitmap favicon) {

        super.onPageStarted(view, url, favicon);
        prDialog = ProgressDialog.show(getParent(), "In progress", "Loading, please wait...");
    }

    @Override
    public void onPageFinished(WebView view, String url) {
        Log.e("status","calling....");
        super.onPageFinished(view, url);
        prDialog.dismiss();
        Log.e("status","calling next......");
    }
} 
```

单击连接按钮时，将执行第二个活动并获取 facebook 页面。但进度对话框无法停止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T08:20:01.647

像这样试试

首先在您的`onCreate()`

```
ProgressDialog progressDialog =new  ProgressDialog(getApplicationContext());
progressDialog.setMessage("Please Wait"); 
```

`onPageStarted()`然后在方法中显示对话框。

```
progressDialog .show(); 
```

然后在您的`onPageFinished()`方法中将其关闭

```
progressDialog.cancel(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T13:03:19.803

仅使用此代码并尝试一下，

```
@Override
        public void onPageFinished(WebView view, String url) {
            Log.e("status","calling....");
            super.onPageFinished(view, url);
            if (prDialog != null || prDialog.isShowing())
                prDialog.dismiss();
            Log.e("status","calling next......");
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T12:17:30.277

不应在 onPageStart 中创建 Dialog，加载网页时，可能会多次调用 onPageStart()。

在 onPageStart 中，您创建了一个新对话框而不关闭旧对话框，因此旧对话框将始终显示。

要解决这个问题，您有很多选择：

1.  正如 lmran 所说，只在 onCreate() 中创建一次对话框。在 onPageStarted 中显示它并在 onPageFinished 中关闭。
2.  在创建新对话框之前，请关闭旧对话框。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-13T06:40:17.197

```
 @Override
        public void onPageFinished(WebView view, String url) {

            try{
                    if (prDialog.isShowing()|| prDialog!= null) {
                        prDialog.dismiss();
                        prDialog= null; /*** Add ***/
                    }

                    }catch(Exception exception){
                        exception.printStackTrace();
                    }

            }
        } 
```

您也可以访问以下链接以获取完整的详细信息...

[http://androiddubd.blogspot.com/2014/07/how-to-show-progress-dialog-or-loader.html](http://androiddubd.blogspot.com/2014/07/how-to-show-progress-dialog-or-loader.html)

# javascript - ASP.Net Web 应用程序 Jquery Photoviewer 和 Ajaxical 更新

> ID：13890391
> 
> 赞同：3
> 
> 时间：2012-12-15T07:44:06.130
> 
> 标签：javascript, jquery, asp.net, vb.net, updatepanel

[我的网站](http://new.mnarfezhom.com/)有一个错误。

请转到右数第三个菜单：

![在此处输入图像描述](../Images/a42e38672e37433e655329cdad307f25.png)

有些图像会在 jquery photoviewer 中显示 onlclick。这很好用。

现在问题来了，我点击下面页面底部的 Ajaxical 更新按钮：

![在此处输入图像描述](../Images/3ff5833e4e1bf9d611d588f26b239df2.png)

> 响应后 jquery photoviewer 无法正常工作。它将图像作为单独的链接打开，而不是在 photoviewer 中打开

.

这是选项卡的代码：

```
<div class="tab-pane" id="aakhir_alshur">
            <asp:UpdatePanel ID="Up_GQ_Cont" runat="server"  UpdateMode="Conditional">
                <ContentTemplate>
                <asp:ObjectDataSource ID="obj_Photos" runat="server" 
                SelectMethod="Articles_GetBy_Status_and_Type_oreder_by_Insert_Date_DESC" 
                TypeName="CntrlDBFunctions">
                <SelectParameters>
                    <asp:Parameter DefaultValue="published" Name="Status" Type="String" />
                    <asp:Parameter DefaultValue="PHOTOS" Name="Type" Type="String" />
                </SelectParameters>
            </asp:ObjectDataSource>
                <asp:GridView ID="ds_Photos" runat="server" AutoGenerateColumns="False" 
                    DataSourceID="obj_Photos" AllowPaging="True" CellPadding="0" 
                    GridLines="None" PageSize="7" ShowHeader="False">
                    <Columns>
                        <asp:TemplateField>
                            <ItemTemplate>
                                <asp:Label ID="Label1" runat="server" Text='<%# content( eval("Article_ID"), eval("Article_Title"), eval("Article_Subtitle"), eval("Wrote_by"), eval("Main_Photo"), eval("Main_Photo_Caption"), eval("Article_Content"), eval("Attachment"), eval("photo"),eval("video"), eval("Audio"), eval("Article_Type"), eval("Article_Date"), eval("Insert_Date"), eval("Lang"), 3) %>'></asp:Label>
                            </ItemTemplate>
                        </asp:TemplateField>
                    </Columns>
                    <PagerSettings Visible="False" />
                </asp:GridView>
                <div class="last">
                    <asp:Button ID="btn_More_Photos" type="button" runat="server" CssClass="last" Text="المزيد" CausesValidation="False" />
                    <asp:Label ID="lbl_More_Photos" Visible="false" runat="server" Text="<br>لا توجد مواضيع أخرى"></asp:Label></div>
                </ContentTemplate>
                </asp:UpdatePanel>
                <asp:UpdateProgress ID="UpdateProgress1" runat="server" AssociatedUpdatePanelID="Up_GQ_Cont"> 
```

这是ajaxical按钮的作用：

```
 Protected Sub btn_More_Feeds_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btn_More_Feeds.Click
        DS_post.PageSize = DS_post.PageSize + 15
        DS_post.DataBind()

        If DS_post.Rows.Count < DS_post.PageSize Then
            btn_More_Feeds.Visible = False
            lbl_More_Feeds.Visible = True
        End If
    End Sub 
```

任何帮助将不胜感激。

*下面给出的解决方案工作正常。现在，当我单击第一个选项卡（最后一个视频）时，经过 ajaxical 更新后，视频不会出现。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T07:58:59.323

您的问题是在 UpdatePanel 完成后您没有更新 JavaScript 代码。从您的页面中获取 JavaScript 代码，我将其更改为：

```
$(document).ready(function ()
{
    // set the handlers
    var prm = Sys.WebForms.PageRequestManager.getInstance();
    prm.add_initializeRequest(InitializeRequest);
    prm.add_endRequest(EndRequest);

    // init on page load
    PrettyPhotoInit();
});

function InitializeRequest(sender, args) {
}

function EndRequest(sender, args) {
    // init again after the UpdatePanel
    PrettyPhotoInit();
}

function PrettyPhotoInit()
{
    $("a[rel^='prettyPhoto']").prettyPhoto();

    /*$(".gallery:first a[rel^='prettyPhoto']").prettyPhoto({animation_speed:'normal',theme:'light_square',slideshow:3000, autoplay_slideshow: true});
    $(".gallery:gt(0) a[rel^='prettyPhoto']").prettyPhoto({animation_speed:'fast',slideshow:10000, hideflash: true});

    $("#custom_content a[rel^='prettyPhoto']:first").prettyPhoto({
    custom_markup: '<div id="map_canvas" style="width:260px; height:265px"></div>',
    changepicturecallback: function(){ initialize(); }
    });

    $("#custom_content a[rel^='prettyPhoto']:last").prettyPhoto({
    custom_markup: '<div id="bsap_1259344" class="bsarocks bsap_d49a0984d0f377271ccbf01a33f2b6d6"></div><div id="bsap_1237859" class="bsarocks bsap_d49a0984d0f377271ccbf01a33f2b6d6" style="height:260px"></div><div id="bsap_1251710" class="bsarocks bsap_d49a0984d0f377271ccbf01a33f2b6d6"></div>',
    changepicturecallback: function(){ _bsap.exec(); }
    });*/

} 
```

你的问题类似于这些：

*   [Gridview Jquery DatePicker中的Asp.Net UpdatePanel](https://stackoverflow.com/questions/3341623/asp-net-updatepanel-in-gridview-jquery-datepicker/3341741#3341741)
*   [jquery 手风琴在 asp.Net 回发后没有重新启动](https://stackoverflow.com/questions/13856717/jquery-accordion-not-re-initiating-after-an-asp-net-postback/13856997#13856997)

您可能需要进行更多更改；我不知道您调用了哪些其他库或其他 JavaScript 文件，但这是一般的想法。

您的视图状态也很大。通过关闭不需要的控件上的视图状态来减少它，然后压缩它。

## 视频初始化：

页面使用“ [flowplayer](http://flowplayer.org/) ”来显示和播放视频。为了使其正常工作，您需要在通过 UpdatePanel 加载每个新内容后对 flowplayer 进行初始化。

您现在要做的就是随时调用脚本。这是您页面中的一行：

### 现在：

```
<a href='/2011108218271.flv' style='display:block;width:100%; height:201px'  id='player_1184'></a>
<script> flowplayer('player_1184', '/flash/flowplayer-3.2.7.swf', {clip: {autoPlay: false,autoBuffering: true}});</script> 
```

每个视频后面都有初始化它的脚本。这不适用于 Ajax，也不适用于 UpdatePanel，因为当您加载新内容时，整行就像文本，当您在页面上呈现它时，浏览器不会编译它（JavaScript 不会运行）。

正确的做法是写video标签，当页面完全加载后，初始化video。在 Flowplayer的“[初始化](http://flowplayer.org/docs/)”文档中，您需要将视频占位符定义为：

### 必须为：

```
<div class="player" data-engine="flash">
   <video preload="none">
      <source type="video/x-flv" src="/2011108218271.flv"/>
   </video>
</div> 
```

每个视频都会有一个如上所述的行，然后将所有行初始化为：

```
 // install flowplayer to an element with CSS class "player"
   $(".player").flowplayer({ swf: "/swf/flowplayer-.swf" }); 
```

最终代码将是：

```
$(document).ready(function ()
{
    // set the handlers
    var prm = Sys.WebForms.PageRequestManager.getInstance();
    prm.add_initializeRequest(InitializeRequest);
    prm.add_endRequest(EndRequest);

    // init on page load
    PrettyPhotoInit();
    InitFlowPlayer();
});

function InitializeRequest(sender, args) {
}

function EndRequest(sender, args) {
    // init again after the UpdatePanel
    PrettyPhotoInit();
    // init again the videos
    InitFlowPlayer();
}

function InitFlowPlayer()
{
   // install flowplayer to an element with CSS class "player"
   $(".player").flowplayer({ swf: "/swf/flowplayer-.swf" });
}

function PrettyPhotoInit()
{
    $("a[rel^='prettyPhoto']").prettyPhoto();

    /*$(".gallery:first a[rel^='prettyPhoto']").prettyPhoto({animation_speed:'normal',theme:'light_square',slideshow:3000, autoplay_slideshow: true});
    $(".gallery:gt(0) a[rel^='prettyPhoto']").prettyPhoto({animation_speed:'fast',slideshow:10000, hideflash: true});

    $("#custom_content a[rel^='prettyPhoto']:first").prettyPhoto({
    custom_markup: '<div id="map_canvas" style="width:260px; height:265px"></div>',
    changepicturecallback: function(){ initialize(); }
    });

    $("#custom_content a[rel^='prettyPhoto']:last").prettyPhoto({
    custom_markup: '<div id="bsap_1259344" class="bsarocks bsap_d49a0984d0f377271ccbf01a33f2b6d6"></div><div id="bsap_1237859" class="bsarocks bsap_d49a0984d0f377271ccbf01a33f2b6d6" style="height:260px"></div><div id="bsap_1251710" class="bsarocks bsap_d49a0984d0f377271ccbf01a33f2b6d6"></div>',
    changepicturecallback: function(){ _bsap.exec(); }
    });*/

} 
```

# .net - 在nodejs中解密.Net cookie

> ID：13890393
> 
> 赞同：5
> 
> 时间：2012-12-15T07:44:19.573
> 
> 标签：.net, node.js, cryptography, aes

我在 .Net 中创建了一个加密的 cookie，我正在尝试在 nodejs 中解密它的内容。但是nodejs不断抛出异常“TypeError：DecipherFinal失败”

在 .Net 中，我使用带有密钥的 AES 加密方法

`932D86BB1448EEAA423F38495A2290746D81C27E55D1DC264279537006D6F4CC.`

我的 web.config 文件有以下行

```
<machineKey validationKey="A5326FFC9D3B74527AECE124D0B7BE5D85D58AFB12AAB3D76319B27EE57608A5A7BCAB5E34C7F1305ECE5AC78DB1FFEC0A9435C316884AB4C83D2008B533CFD9" 
decryptionKey="932D86BB1448EEAA423F38495A2290746D81C27E55D1DC264279537006D6F4CC" 
validation="SHA1" decryption="AES"  /> 
```

在 .Net 中生成我的 cookie 的代码如下所示：

```
var ticket = new FormsAuthenticationTicket(0, "test", DateTime.Now, DateTime.Now.AddYears(1), true, "test");
var encryptedTicket = FormsAuthentication.Encrypt(ticket);
Response.Cookies.Add(new HttpCookie(cookieName, encryptedTicket)); 
```

解密cookie的nodejs代码是

```
var crypto = require('crypto');
var logger = require('winston');
var deckey = "932D86BB1448EEAA423F38495A2290746D81C27E55D1DC264279537006D6F4CC";

function hex2a(hex) {
  var str = '';
  for (var i = 0; i < hex.length; i += 2)
    str += String.fromCharCode(parseInt(hex.substr(i, 2), 16));
  return str;
}

function decrypt(cookie) {          
  var ivc = cookie, iv, cipherText, ivSize = 16, res;

  ivc = new Buffer(ivc, 'hex');
  iv = new Buffer(ivSize);

  cipherText = new Buffer(ivc.length - ivSize);
  ivc.copy(iv, 0, 0, ivSize);
  ivc.copy(cipherText, 0, ivSize);

  iv = new Buffer(Array(16));
  c = crypto.createDecipheriv('aes-256-cbc', hex2a(deckey), iv.toString());
  res = c.update(cipherText, 'binary');
  res += c.final('binary'); //<-- throws TypeError: DecipherFinal fail
  return res;
 } 
```

我有点迷茫，我会很感激关于可能是什么问题的提示或想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-27T17:48:39.660

您可以在此处查看 Encryp 和 Decrypt 的源代码以及所有不同的可能性（Framework20SP1、Framework20SP2 等）

[https://github.com/Microsoft/referencesource/blob/master/System.Web/Security/FormsAuthentication.cs](https://github.com/Microsoft/referencesource/blob/master/System.Web/Security/FormsAuthentication.cs)

我花了几个小时才读完这段代码，但一旦你得到它，就可以为你的特定加密设置编写一个简单的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T16:15:25.453

键不是字符串，看一下方法`fromCharCode()`：

> 该`fromCharCode()`方法将 Unicode 值转换为字符。

这意味着任何十六进制都将转换为文本字符，而`createDecipheriv()`方法指定：

> key 和 iv 必须是“二进制”编码的字符串或缓冲区。

请注意，这只是可能存在的问题之一，我还没有时间运行代码（还）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-12T11:01:07.793

您的问题可能是默认打开的自动填充失败。您想通过添加以下内容来关闭它：

```
c.setAutoPadding(false); 
```

# facebook - 如何使用带有 Web Tools 2012.2 的 ASP.NET MVC 4 在 Facebook 应用程序中为 Facebook:VerifyToken:User 创建值？

> ID：13890397
> 
> 赞同：1
> 
> 时间：2012-12-15T07:45:41.040
> 
> 标签：facebook, asp.net-mvc-4

我正在使用 ASP.NET 和 Web 工具 2012.2。我在 ASP.NET MVC 4 Web 应用程序和 .Net Framework 4.5 的目标下创建了一个 Facebook 应用程序。[我可以通过https://developers.facebook.com/apps](https://developers.facebook.com/apps)创建 AppId 和 AppSecret，但应用程序请求 Facebook:VerifyToken:User 的值。究竟如何创建一个并让应用程序工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T10:29:42.260

项目模板中的“Facebook:VerifyToken:User”设置是可选的，在 UserRealtimeUpdateController 中使用。只有当您的应用程序想要支持 Facebook 实时更新时，您才需要设置此项。有关实时更新的更多信息，请参阅此链接：[https ://developers.facebook.com/docs/reference/api/realtime/](https://developers.facebook.com/docs/reference/api/realtime/)

VerifyToken 由您在创建实时更新订阅时设置。

希望这可以帮助，

姚

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T10:41:22.560

我为 Facebook:AppNamespace 设置提供了一个值（根据我阅读的文献以及 Facebook 表单上的说明，这应该是可选的）。一旦我这样做了，问题就消失了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T09:37:16.370

您可以使用 DotNetOpenAuth 或 Facebook C# SDK 对 Facebook 进行身份验证并请求访问令牌。看看 DotNetOpenAuth 中的 FacebookClient，我已经成功地使用它来请求访问令牌。您需要传递正确的范围参数以获得所需的权限。您能否详细说明您的应用程序需要如何与 Facebook 交互？

# mysql - MySQL：如何替换字段中除最后 4 个字符之外的所有字符？（保护信用卡号）

> ID：13890398
> 
> 赞同：0
> 
> 时间：2012-12-15T07:45:48.300
> 
> 标签：mysql, replace

我有一个名为“booking”的 mySQL 数据库表，其中包含一列信用卡号。显然这不好也不安全，我真的只需要该字段的最后 4 位数字。我需要一个 mySQL 调用来修复这个错误。

有没有一种方法可以让一条 SQL 语句遍历整个数据库表并替换所有 Visa、Mastercard、Discover 卡号（长度不同），并用 XXX 覆盖除最后 4 个字符之外的所有字符。或者我是否需要编写一些循环遍历每条记录的东西来进行替换？

该表称为“booking”，字段称为“creditcardnumber”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T07:56:09.853

像这样试试

```
SELECT
  CONCAT(
    REPEAT('X', CHAR_LENGTH(card_number) - 4),
    SUBSTRING(card_number, -4)
  ) AS masked_card
FROM
  table_name ; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-15T08:01:20.070

检查此[参考： * SQLFIDDLE](http://sqlfiddle.com/#!2/8ec2f/1)。不要介意表模式，它只是示例旧数据。我将第一条记录更改为信用卡号（duh - 它不是以 5、4 或 3 开头；）但`LAPD`确实有效。

询问：

```
select right(hasha,4),
lpad(right(hasha,4),length(hasha),'x')
from actors
where id = 1
; 
```

结果：

```
RIGHT(HASHA,4)  LPAD(RIGHT(HASHA,4),LENGTH(HASHA),'X')
3456            xxxxxxxxxxxx3456 
```

# php - 如何通过 Twitter API 拉取经过验证的帐户列表？

> ID：13890406
> 
> 赞同：3
> 
> 时间：2012-12-15T07:47:50.617
> 
> 标签：php, twitter

> **可能重复：**
> [如何仅在 Twitter 上搜索已验证帐户的帖子？](https://stackoverflow.com/questions/4268193/how-do-i-search-twitter-for-posts-by-verified-accounts-only)

如何通过 Twitter API 拉取 Twitter 上的名人列表？

看起来有一种方法可以通过 API 来完成，但是当我转到文档时，我没有找到它。

这是一个包含所有艺人的网站示例：

```
http://www.twellow.com/categories/entertainment 
```

我想知道他们是怎么做到的。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-15T07:58:24.000

你必须使用那里的 api 来做到这一点这里是链接

> [https://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline](https://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline)

您可以像这样调用查询`screen_name`，您想要的名人的名字在哪里以及`count`您想要检索最多 200 条推文

> [https://api.twitter.com/1.1/statuses/user_timeline.json?screen_name=twitterapi&count=2](https://api.twitter.com/1.1/statuses/user_timeline.json?screen_name=twitterapi&count=2)

# asp.net-mvc-4 - ASP.NET MVC 4 捆绑不起作用

> ID：13890408
> 
> 赞同：3
> 
> 时间：2012-12-15T07:48:11.747
> 
> 标签：asp.net-mvc-4, bundle

我为一个简单的 MVC 4 项目使用了 Intranet 模板。我试图将我的 css 和 js 分开捆绑。一切正常，直到我更改我的 web.config debug=false 以利用缩小。

当我在不调试的情况下运行项目时，应用程序挂起并查看 firebug 和 fiddler，它似乎没有发出对捆绑包的请求。

我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-15T20:11:43.987

确保您没有尝试缩小 js 的最小版本，并且您拥有来自 nuget 的最新 webgrease (1.3)。

# iphone - 如何在foursquare场地搜索中避免任何类别

> ID：13890412
> 
> 赞同：1
> 
> 时间：2012-12-15T07:49:27.703
> 
> 标签：iphone, foursquare

我想要除“公园”以外的所有类别的场地。如何在我的foursquare场地搜索中排除“公园”？任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:44:54.677

您不能通过 API 指定要排除的类别。但是，您可以在您的应用程序中删除所有类别与公园类别匹配的场所。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-06T23:41:51.177

您可以在场地搜索中指定`categoryId`（以逗号分隔的类别列表），并选择不包括与您正在谈论的公园类型有关的任何类别。[Foursquare Venue Search Doc](https://developer.foursquare.com/docs/venues/search)您可以使用此方法仅排除一个或多个类别。以下是 Foursquare 类别的列表：

[Foursquare 场地类别列表](https://developer.foursquare.com/categorytree)

# java - 组合 (OR) 任意正则表达式

> ID：13890416
> 
> 赞同：6
> 
> 时间：2012-12-15T07:49:59.023
> 
> 标签：java, regex, optimization

**tl; dr**有没有办法在 Java 中将任意正则表达式或/组合成单个正则表达式（用于匹配，而不是捕获）？

* * *

在我的应用程序中，我收到来自用户的两个列表：

1.  正则表达式列表
2.  字符串列表

并且我需要输出 (2) 中与 (1) 中的任何正则表达式都不匹配的字符串列表。

我有明显的幼稚实现（迭代（2）中的所有字符串；对于每个字符串迭代（1）中的所有模式；如果没有模式匹配，则将字符串添加到将返回的列表中）但我想知道如果可以将所有模式组合成一个模式并让正则表达式编译器利用优化机会。

显然，OR-combine regex 的明显方法是，`(regex1)|(regex2)|(regex3)|...|(regexN)`但我很确定这不是正确的做法，因为我无法控制各个 regex（例如，它们可以包含所有向后/向前引用的方式）。因此，我想知道您是否可以建议一种更好的方法来组合 java 中的任意正则表达式。

* * *

注意：这只是上面的暗示，但我会明确表示：我只匹配字符串 - 我不需要使用捕获组的输出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T22:57:04.057

一些正则表达式引擎（例如 PCRE）具有结构`(?|...)`. 它就像一个非捕获组，但具有一个很好的功能，即在每个交替组中都从相同的初始值开始计数。这可能会立即解决您的问题。因此，如果您可以选择为此任务切换语言，那应该可以解决问题。

[**编辑：**事实上，它仍然会导致*命名*捕获组冲突的问题。事实上，该模式甚至无法编译，因为组名不能被重用。]

否则，您将不得不操纵输入模式。hyde 建议重新编号反向引用，但我认为有一个更简单的选择：将所有组命名为组。您可以向自己保证，这些名称是独一无二的。

所以基本上，对于每个输入模式，您都会创建一个唯一标识符（例如，增加一个 ID）。然后最棘手的部分是在模式中找到捕获组。您将无法使用正则表达式执行此操作。您必须自己解析模式。如果您只是简单地遍历模式字符串，这里有一些关于要注意什么的想法：

*   进入和离开字符类时请注意，因为字符类内部的括号是文字字符。
*   也许是最棘手的部分：忽略所有后跟`?:`, `?=`, `?!`, `?<=`, `?<!`,的左括号`?>`。此外，还有选项设置括号：`(?idmsuxU-idmsuxU)`或者`(?idmsux-idmsux:somePatternHere)`也没有捕获任何内容（当然可以有这些选项的任何子集，并且它们可以按任何顺序排列 -`-`也是可选的）。
*   现在你应该只剩下左括号了，它们要么是普通的捕获组，要么是命名的 on: `(?<name>`。最简单的方法可能是对它们一视同仁——即同时具有数字和名称（如果未设置名称，则名称等于数字）。然后你用类似的东西重写所有这些`(?<uniqueIdentifier-md5hashOfName>`（连字符实际上不能是名称的一部分，你只会有你的递增数字后跟散列 - 因为散列是固定长度的，所以不会有任何重复；几乎在至少）。确保记住该组最初的编号和名称。
*   每当遇到反斜杠时，都有三个选项：
    1.  下一个字符是一个数字。你有一个编号的反向引用。将所有这些数字替换为`k<name>`您`name`为该组生成的新组名。
    2.  下一个字符是`k<...>`. 再次将其替换为相应的新名称。
    3.  下一个字符是别的。跳过它。它同时处理括号的转义和反斜杠的转义。
*   我认为Java可能允许前向引用。在这种情况下，您需要两次通过。首先要重命名所有组。然后更改所有引用。

一旦对每个输入模式都完成了此操作，您就可以安全地将所有输入模式与`|`. 除了反向引用之外的任何其他功能都不应导致此方法出现问题。至少只要你的模式是有效的。当然，如果你有输入`a(b`，`c)d`那么你就有问题了。但是，如果您不检查模式是否可以自行编译，您将始终拥有它。

我希望这可以为您指明正确的方向。

# security - 如何在 mosync 中加密/解密我们的 sqlite 数据库

> ID：13890419
> 
> 赞同：1
> 
> 时间：2012-12-15T07:50:37.877
> 
> 标签：security, encryption, github, xor, mosync

我已经在 mosync 中使用 XOR 函数完成了加密/解密，并且效果很好。但是在用于二进制文件（SQLite 数据库）时，它显示文件无法打开的错误。然后我使用了像 C++ 这样的 fread 函数，但它也不起作用。我想添加与 github 项目相同的文件加密。

# google-app-engine - Objectify4中的一对多关系

> ID：13890420
> 
> 赞同：0
> 
> 时间：2012-12-15T07:50:50.707
> 
> 标签：google-app-engine, google-cloud-datastore, objectify

我正在使用 Java 与 GAE 合作。我只是在创建一个具有学生和课程关系的示例应用程序。我有很多分支机构和很多学生。每个分支可以有很多学生，我试过了

```
 ObjectifyService.register(Course.class);
    ObjectifyService.register(Student.class);
    Course course = new Course();
    course.setName("ss");
    course.setBranch("cs");
    ofy().save().entity(course).now();

    Student stu = new Student();
    stu.setName("student1");
    Key<Course> courseKey = new Key<Course>(Course.class, course.getId()); // getting error here
    stu.setCourse(courseKey);
    System.out.println("saving");
    ofy().save().entity(stu).now(); 
```

我不确定如何在 objecitfy4 中定义这种关系。我按照教程[http://www.eteration.com/objectify-an-easy-way-to-use-google-datastore/](http://www.eteration.com/objectify-an-easy-way-to-use-google-datastore/)

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T17:02:44.107

查看 Key 的 Javadocs。代替公共构造函数，有一个更方便的创建者方法，它需要更少的 <> 泛型类型：

```
Key<Course> courseKey = Key.create(Course.class, course.getId()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T12:16:13.210

您可以使用两个键：

1.  首先是 GAE 低级 `com.google.appengine.api.datastore.Key`和
2.  第二，物化的`com.googlecode.objectify.Key`。

您可以将两者与 Objectify 一起使用（因为它们最终会转换为低级 API）。

两者都没有公共构造函数，因此您不能`new`与它们一起使用。

使用低级键，您将使用[`KeyFactory.createKey("Course", course.getId())`](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/datastore/KeyFactory#createKey%28java.lang.String,%20long%29). 使用 objectify 键，您将使用`com.googlecode.objectify.Key.create(Course.class, course.getId())`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T08:58:17.520

当我们使用 Objectify 时，如果我们需要为 condition(KeyFactory.createKey("Course", course.getId()) 创建任何 Key，在 course 对象中，Id 字段应该用索引指定。它可以正常工作。

# java - Java的multi catch中异常变量的类型是什么？

> ID：13890423
> 
> 赞同：3
> 
> 时间：2012-12-15T07:51:21.047
> 
> 标签：java, exception-handling, java-7

> **可能重复：**
> [在 Java 7 多捕获块中，捕获的异常的类型是什么？](https://stackoverflow.com/questions/8393004/in-a-java-7-multicatch-block-what-is-the-type-of-the-caught-exception)

在 Java 的新 multi-catch 构造中，必须为异常变量假设什么异常类型：

```
try{
   //-- do error prone stuff
}
catch (ExceptionTypeA | ExceptionTypeB e) {
   //-- e.methodA() or e.methodB() ?
} 
```

如果`ExceptionTypeA`并且`ExceptionTypeB`是自定义实用程序方法的自定义异常，那么，`e`编写代码时是什么类型？，可以调用哪些方法`e`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T08:07:07.287

e 的类型将是 ExceptionA 和 ExceptionB 最接近的父类型。如果他们只是扩展异常，那么类型将是异常。

如果您为不同的异常情况调用不同的方法，例如`methodA if ExceptionA`，`methodB for ExceptionB`您不应该使用 multi-catch。如果 ExceptionA 和 ExceptionB 都扩展了一个公共超类型并覆盖了其中一个方法，那么您可以使用它。

# mysql - mysql更新语句执行太慢

> ID：13890425
> 
> 赞同：0
> 
> 时间：2012-12-15T07:51:29.530
> 
> 标签：mysql, sql-update

我的问题中有两个表如下。

```
CREATE TABLE `t_user_relation` (
  `User_id` INT(32) UNSIGNED NOT NULL  ,
  `Follow_id` INT(32) UNSIGNED NOT NULL ,
  PRIMARY KEY (`User_id`,Follow_id)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

CREATE TABLE `t_user_info`(
    `User_id` int(32) unsigned NOT NULL  ,
    `User_name` varchar(20) NOT NULL ,
    `User_avatar` varchar(60) NOT NULL ,
    `Msg_count` int(32) unsigned DEFAULT '0' ,
    `Fans_count` int(32) unsigned DEFAULT '0' ,
    `Follow_count` int(32) unsigned DEFAULT '0' ,
    PRIMARY KEY (`User_id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

我要做的是更新 t_user_info 表的 Fans_count 字段。我的更新声明如下：

```
 UPDATE t_user_info set t_user_info.Fans_count=(SELECT COUNT(*) FROM t_user_relation
 WHERE t_user_relation.Follow_id=t_user_info.User_id); 
```

但它执行起来真的很慢！表 t_user_info 包含 20,445 条记录，t_user_relation 包含 1,809,915 条记录。谁能帮我提高速度！感谢您的任何建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T08:19:42.277

我会试试这个：

```
UPDATE
  t_user_info inner join
  (SELECT Follow_id, COUNT(*) as cnt
   FROM t_user_relation
   GROUP BY Follow_id) s
  on t_user_info.User_id=s.Follow_id
SET t_user_info.Fans_count=s.cnt 
```

我正在使用子查询来计算`Follow_id`表中每个的行数`t_user_relation`：

```
SELECT Follow_id, COUNT(*) as cnt
FROM t_user_relation
GROUP BY Follow_id 
```

然后我用 加入这个查询的结果`t_user_info`，并更新`Fans_count`连接成功的位置，将其设置为在子查询中计算的计数。

像这样编写的查询通常运行得更快，因为子查询的结果行在连接之前只计算一次，而在您的解决方案中，您的子查询为每个用户行计算一次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T08:04:43.180

在处理数据库上的大量记录时，您希望远离通配符 ( `*`) 并利用[索引](http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html)。

# clojure - 如何从 Clojure 中的列表中删除项目

> ID：13890428
> 
> 赞同：3
> 
> 时间：2012-12-15T07:52:13.103
> 
> 标签：clojure

我想按号码删除房间。如您所见，房间是原子列表并包含原子。我遇到了一个异常：IllegalArgumentException 不知道如何从以下位置创建 ISeq：core.main$delete_room_by_id$fn__7541 clojure.lang.RT.seqFrom (RT.java:487)

我有这个代码：

```
(comment ------------- * DATA * ----------------- )
(def rooms "atomic list of atoms - rooms" (atom '()))

(comment ------------- * UTILS * ----------------- )

(defn enter-value [message]
     (do (println message) (read-line)))

(comment ------------- * ADD ROOM * ----------------- )

(defn save-room "The function that will save provided room." 
     [number num-of-beds price]
     (swap! rooms conj (atom {:number number 
                              :num-of-beds num-of-beds
                              :price price 
                              :is-ocupated false})))

(defn enter-room "This function will create room based on user input." []
     (let [number (enter-value "Number...")
           num-of-beds (enter-value "Number of beds...")
           price (enter-value "Price...")]
       (save-room number num-of-beds price)))

(comment ------------- * DELETE ROOM * ----------------- )

(defn delete-room-by-number "Delete room by number."
     [number]
     (swap! rooms remove #(not (= (:number @%) number)))) 
```

我认为交换！函数不要像我想要的那样为删除函数设置参数。我认为最后的命令是：（删除房间#（不是（=（：数字@％）数字）））。这不好，因为我必须取消引用 @rooms 之类的房间并将其作为删除函数的第二个参数传递。

感谢您阅读本文。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-15T08:42:35.177

两个函数有错误。save-room 中的值不应该是原子中的映射，而只是映射，因为否则您将原子保存在原子中。也 delete-by-room-number 包含一个错误，匿名函数没有正确编写。

```
(defn save-room "The function that will save provided room." 
           [number num-of-beds price]
           (swap! rooms conj {:number number :num-of-beds num-of-beds :price price :is-ocupated false}))

(defn delete-room-by-number [num]
     (swap! rooms #(remove (fn [room] (= (:number room) num)) %))) 
```

**更新：**

更常见的做法是将不可变的、可能嵌套的数据结构存储在 atom/ref 等中。更好的选择可能是不使用列表，而是使用矢量或地图，如下所示：

```
(def room-map {1 {:nums-of-beds 2 :price 30}, 2 {:nums-of-beds 4 :price 60}}) 
```

这样您就可以使用房间号作为密钥。这样你就永远不会有重复的房间号，因为地图键必须是唯一的。

您可以使用 assoc-in、update-in 等更新地图：

```
(def new-room-map (assoc-in room-map [2 :nums-of-beds] 40)) 
```

新房间地图的价值：`{1 {:nums-of-beds 2, :price 30}, 2 {:nums-of-beds 40, :price 60}}`

如果您要获取房间的地图表示，请将函数 assoc-in 与 swap 结合使用！并且您的房间地图的更新版本将存储在 atom 中。如果您无法理解这一点，我建议您阅读有关这些功能的更多信息：

[http://clojuredocs.org/clojure_core/clojure.core/swap](http://clojuredocs.org/clojure_core/clojure.core/swap)！ [http://clojuredocs.org/clojure_core/clojure.core/assoc-in](http://clojuredocs.org/clojure_core/clojure.core/assoc-in)

# iphone - 导航栏后退按钮操作即使在按钮之后也执行

> ID：13890431
> 
> 赞同：2
> 
> 时间：2012-12-15T07:52:26.210
> 
> 标签：iphone, objective-c, ios

这看起来像一个非常简单的问题但我不知道错误在哪里。我有一个导航栏我正在放置一个自定义导航栏后退按钮该操作是通过“粉红色”颜色执行的，如下图所示

![在此处输入图像描述](../Images/662a1738f0d228dbbb35214c7b6d188a.png)

我的代码如下：

```
//-------back button  start
    UIImage *myImage1 = [UIImage imageNamed:@"Back.png"];
    UIButton *myButton1 = [UIButton buttonWithType:UIButtonTypeCustom];
    [myButton1 setImage:myImage1 forState:UIControlStateNormal];
    myButton1.showsTouchWhenHighlighted = YES;
    myButton1.frame = CGRectMake(0.0, 3.0, 40,30);
    [myButton1 addTarget:self action:@selector(back) forControlEvents:UIControlEventTouchUpInside];
    UIBarButtonItem *leftButton = [[UIBarButtonItem alloc] initWithCustomView:myButton1];
    self.navigationItem.leftBarButtonItem = leftButton;
    //-------back button  end 
```

我什至尝试过这种方式，例如“myButton1.frame = CGRectMake(0.0, 3.0, 20,30);”

即使我也尝试更改按钮的宽度和高度。然后它只是减少后退按钮的宽度。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T08:08:32.670

您可以将按钮大小设置为图像大小。

```
myButton1.frame = CGRectMake(0.0, 0.0, 30.0,30.0); 
```

请检查图像周围是否有任何阴影和透明度。

# android - 检查是否成功将提要发布到 Facebook

> ID：13890443
> 
> 赞同：0
> 
> 时间：2012-12-15T07:55:41.820
> 
> 标签：android, facebook

我一直在寻找如何做到这一点，我修改了我的 Display.java 像：

```
public class Display extends ListActivity {
.
.
.

public class WallPostRequestListener extends BaseRequestListener {

    public void onComplete(final String response, final Object state) {
        Display.this.runOnUiThread(new Runnable() {
            public void run() {
                Toast.makeText(getBaseContext(), "Successfully shared on Facebook!", Toast.LENGTH_LONG).show();
            }
        });
    }
} 
```

我想在`Toast`成功发布时显示一条消息。我没有这样做。但我可以在我的 facebook 主页上看到该帖子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T09:12:48.027

不会检查响应就可以了。如果响应代码是 200，那么我认为您可以确定该帖子已成功。

# maven - maven-enunciate-plugin NullPointerException 生成文档

> ID：13890447
> 
> 赞同：1
> 
> 时间：2012-12-15T07:56:27.520
> 
> 标签：maven, enunciate

我正在尝试运行 maven-enunciate-plugin:1.26.2:docs 并面临 NUllPointerException。

我唯一想要的是这里描述的文档生成[http://docs.codehaus.org/display/ENUNCIATE/Documentation+Only](http://docs.codehaus.org/display/ENUNCIATE/Documentation+Only)，所以我的 pom.xml 是：

```
...

<plugin>
    <groupId>org.codehaus.enunciate</groupId>
    <artifactId>maven-enunciate-plugin</artifactId>
    <version>1.26.2</version>
            <configuration>
                <docsDir>${project.build.directory}/docs</docsDir>
            </configuration>
            <executions>
                <execution>
                    <goals>
                        <goal>docs</goal>
                    </goals>
                </execution>
            </executions>
</plugin>

... 
```

但是，它启动：

```
Caused by: org.apache.maven.plugin.MojoExecutionException: Problem assembling the enunciate app.
at org.codehaus.enunciate.DocsMojo.execute(DocsMojo.java:100)
at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
... 19 more
Caused by: java.lang.NullPointerException
at org.codehaus.enunciate.modules.java_client.JavaClientDeploymentModule.isGenerateJsonJar(JavaClientDeploymentModule.java:892)
at org.codehaus.enunciate.modules.java_client.JavaClientDeploymentModule.doCompile(JavaClientDeploymentModule.java:501)
at org.codehaus.enunciate.modules.BasicDeploymentModule.step(BasicDeploymentModule.java:113)
at org.codehaus.enunciate.main.Enunciate.doCompile(Enunciate.java:286)
at org.codehaus.enunciate.main.Enunciate$Stepper.step(Enunciate.java:1738)
at org.codehaus.enunciate.main.Enunciate$Stepper.stepTo(Enunciate.java:1766)
at org.codehaus.enunciate.DocsMojo.execute(DocsMojo.java:96) 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-06T14:21:19.070

作为记录。我正在使用 v.1.27 并遇到了这个问题：[https](https://jira.codehaus.org/browse/ENUNCIATE-771) : //jira.codehaus.org/browse/ENUNCIATE-771 然后我碰到了 v.1.28 并遇到了上面提到的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T18:15:26.633

尝试版本 1.27。如果仍然发生，请打开一个错误。

# python - 为什么 numpy.sum 在添加生成器的元素时返回 float64 而不是 uint64？

> ID：13890451
> 
> 赞同：4
> 
> 时间：2012-12-15T07:56:58.863
> 
> 标签：python, numpy

我刚刚遇到了这种奇怪的行为[`numpy.sum`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.sum.html)：

```
>>> import numpy
>>> ar = numpy.array([1,2,3], dtype=numpy.uint64)
>>> gen = (el for el in ar)
>>> lst = [el for el in ar]
>>> numpy.sum(gen)
6.0
>>> numpy.sum(lst)
6
>>> numpy.sum(iter(lst))
<listiterator object at 0x87d02cc> 
```

根据文档，结果应该与`dtype`可迭代的相同，但是为什么在第一种情况下`numpy.float64`返回 a 而不是 a `numpy.uint64`？为什么最后一个示例没有返回任何类型的总和也没有引发任何错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T08:21:52.620

一般来说，numpy 函数在使用生成器时并不总是像您期望的那样。要创建一个 numpy 数组，您需要在创建它*之前*知道它的大小和类型，而这对于生成器来说是不可能的。如此多的 numpy 函数要么不适用于生成器，要么在依赖 Python 内置函数的情况下执行此类操作。

然而，出于同样的原因，在 Numpy 上下文中使用生成器通常不是很有用。从 Numpy 对象生成生成器并没有真正的优势，因为无论如何您都必须将整个 Numpy 对象保存在内存中。如果您需要所有类型都保持您指定的状态，那么您不应该将 Numpy 对象包装在生成器中。

更多信息：从技术上讲， to 的参数`np.sum`应该是“类似数组”的对象，而不是可迭代的。类数组[在文档](http://docs.scipy.org/doc/numpy/reference/generated/numpy.array.html)中定义为：

> 数组、任何公开数组接口的对象、其`__array__`方法返回数组的对象或任何（嵌套）序列。

阵列接口[在此处](http://docs.scipy.org/doc/numpy/reference/arrays.interface.html)记录。基本上，数组必须具有固定的形状和统一的类型。

Generators don't fit this protocol and so aren't really supported. Many numpy functions are nice and will accept other sorts of objects that don't technically qualify as array-like, but a strict reading of the docs implies you can't rely on this behavior. The operations may work, but you can't expect all the types to be preserved perfectly.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-15T08:13:18.217

如果参数是生成器，则`sum`使用 Python 的内置函数。

`numpy.sum`您可以在(numpy/core/fromnumeric.py)的源代码中看到这一点：

```
 0     if isinstance(a, _gentype):
  1         res = _sum_(a)
  2         if out is not None:
  3             out[...] = res
  4             return out
  5         return res 
```

`_gentype`只是 , 的别名`types.GeneratorType`，并且`_sum_`是内置的`sum`.

如果你尝试申请`sum`and `gen`，`lst`你会看到结果是一样的：`6.0`。

的第二个参数`sum`是`start`，默认为*0*，这是使你的结果 a 的一部分`float64`。

```
In [1]: import numpy as np

In [2]: type(np.uint64(1) + np.uint64(2))
Out[2]: numpy.uint64

In [3]: type(np.uint64(1) + 0)
Out[3]: numpy.float64 
```

**编辑**：顺便说一句，我找到了一张关于这个问题的票，它被标记为`wontfix`：[http ://projects.scipy.org/numpy/ticket/669](http://projects.scipy.org/numpy/ticket/669)

# php - 使用 cron 作业发送带有不同附件的大量电子邮件

> ID：13890453
> 
> 赞同：3
> 
> 时间：2012-12-15T07:57:13.950
> 
> 标签：php, codeigniter, cron, mass-emails

我正在构建一个 Web 应用程序。此应用程序的主要功能之一是，它根据用户的偏好向所有用户发送电子邮件，可以每周或每月设置。电子邮件发送必须使用 cron 执行。电子邮件将包含一个 csv 或 xml 文件，该文件实际上是系统为用户生成的报告。这意味着，每个用户将获得不同的文件。并且可能有成千上万的用户。我正在为应用程序使用**codeigniter**框架。

我的问题是，这种情况的有效方法是什么？我以前没有使用 cronjob。所以，我担心这种执行所需的服务器资源。我还想知道发送 1000 封这样的电子邮件需要多少时间，他们是否有可能执行超时或服务器崩溃？我应该使用codeigniter内置的电子邮件类吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T08:26:53.053

通过 cron 作业运行此类任务应该没有问题，因为@Ranty 说没有超时，在 CLI 中，最大执行时间设置为无限制。

所需的时间取决于您的服务器，检索您将附加的 csv 的时间......正如@Ranty 所说，这是在晚上运行您的 cronjobs 的不错选择。

最后是的，如果您使用 CI，为什么不使用 codeigniter 的内置电子邮件类？要通过命令行运行脚本，请阅读：[http ://ellislab.com/codeigniter/user-guide/general/cli.html](http://ellislab.com/codeigniter/user-guide/general/cli.html)

# android - 添加外部 jar 和使用库项目有什么区别？

> ID：13890454
> 
> 赞同：2
> 
> 时间：2012-12-15T07:57:22.350
> 
> 标签：android, jar, android-library

在android中添加外部jar和使用库项目有什么区别？我们可以从库项目中提取 jar 并将其作为外部 jar 导入到我们的主应用程序中吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T08:15:36.597

**在android中添加外部jar和使用库项目有什么区别？**

`There is almost no difference in achieving a task between these two except a minor digression.`也就是说，如果您添加 jar，则必须使用该外部 jar 中定义的任何内容，并且 jar 提供的功能无法更改。如果您包含库项目，如果您不想使用默认功能，则可以使用源代码并对功能进行更改。两者都有自己的缺点和优点。正如我所说，通过包含库项目，您可以自定义功能，但您可能不知道是否会影响任何其他取决于您正在使用的功能的东西。但是，如果您非常谨慎，那也没什么大不了的。添加一个 jar 不会让您自定义，但是再次遵循预定义的功能很容易:)。希望这可以帮助。

对于您的第二个问题：**我们可以从库项目中提取 jar 并将其作为外部 jar 导入到我们的主应用程序中吗？**

不完全是，但你可以。请参阅CommonsWare 给出的[这个很好的答案，但有很多限制。](https://stackoverflow.com/questions/7973822/how-to-convert-an-android-library-project-to-an-external-jar)

# objective-c - 在滚动视图中定位堆叠的 NSTextView 子视图

> ID：13890459
> 
> 赞同：1
> 
> 时间：2012-12-15T07:58:46.033
> 
> 标签：objective-c, nstextview, nsscrollview, subviews

这可能是一个冗长的解释，但我宁愿说太多也不愿说不够。简而言之，我需要以编程方式将一系列堆叠的 textViews 嵌入到单个 scrollView 中，但我无法让它工作。我的工作基于文档中的文本架构示例代码。

[http://developer.apple.com/library/mac/#documentation/TextFonts/Conceptual/CocoaTextArchitecture/TextSystemArchitecture/ArchitectureOverview.html](http://developer.apple.com/library/mac/#documentation/TextFonts/Conceptual/CocoaTextArchitecture/TextSystemArchitecture/ArchitectureOverview.html)

我可以很好地以编程方式创建一个 textView，但我不能在滚动视图中创建两个并让它们作为一个移动并且可以编辑。有一个很好的小图表解释了如何使用相同的基本概念创建分页，但没有随附的代码，我自己也没有成功。我制作了一个可悲的重叠文本视图拼贴画，到目前为止只有一个是可编辑的。

此外，如果有实现此目的的标准方法，将不胜感激朝正确方向轻推。

这是我的代码：

```
float w = self.windowView.frame.size.width;
float h = self.windowView.frame.size.height*.5;
NSSize halfSize = NSMakeSize(w,h);

textStorage = [[NSTextStorage alloc]
               initWithString:@"Here's to the ones who see things different."];
NSLayoutManager *layoutManager;
layoutManager = [[NSLayoutManager alloc] init];
[textStorage addLayoutManager:layoutManager];
NSTextContainer *textContainer;
textContainer = [[NSTextContainer alloc]
                 initWithContainerSize:halfSize];
[layoutManager addTextContainer:textContainer];

NSTextContainer *textContainer2;
textContainer2 = [[NSTextContainer alloc]
                 initWithContainerSize:halfSize];
[layoutManager addTextContainer:textContainer2];

self.windowView = [[NSTextView alloc]
            initWithFrame:_windowView.frame
            textContainer:textContainer];

[self.window setContentView:_windowView];
[self.window makeKeyAndOrderFront:nil];
[self.window makeFirstResponder:_windowView];

NSTextView *textView = [[NSTextView alloc]init];
    [textView setTextContainer:textContainer2];

[self.windowView addSubview:textView];
[textView setFrameSize:halfSize];
NSPoint thePoint = NSMakePoint(0, self.windowView.frame.size.height);
[textView setFrameOrigin:thePoint];
[textView setEditable:YES];
[textView setNeedsDisplay:YES]; 
```

我应该提一下。我是一个爱好者，但绝不是一个特别称职的程序员。完全自学。（嗯，实际上我买的书做了大部分的教学）。我刚刚完成了 Hillegrass 的 Mac OSX 可可编程，我正在做一些个人学习项目来让事情顺利进行。我想制作一个编剧应用程序，它以不同的方式格式化场景标题、描述、对话框、字符等，并将一堆信息附加到每个部分，以便站在一个块上可以显示有关该特定片段的信息（场景信息）。

我一直在制作迷你应用程序来测试我需要的所有内容，到目前为止，我已经阅读了文档中的文本属性指南和文本布局指南，并了解了很多。我对大多数事情都使用核心数据和绑定，但我被困在可以说是应用程序最重要的部分。让主 scrollView 显示堆叠的不同样式文本块，应用程序的其他部分可以单独访问这些块。（我的想法是创建一个 NSTextView 数组并使用当前索引将一组信息项链接到特定块，尽管我一直认为这感觉像是一种绑定工作。）

提前致谢！

*   奥马尔

# excel - 具有 2 个搜索值的 Excel VLOOKUP

> ID：13890460
> 
> 赞同：2
> 
> 时间：2012-12-15T07:58:46.403
> 
> 标签：excel, vlookup

我有一个公式，它充当具有两个值的 VLOOKUP。它在 A 列中查找 x 并在 B 列中查找 y，当两者都在同一行中找到时，它会返回 C 列中的值。这个公式的问题是它不会停止计算，每次我更改任何值时字段（不仅仅是 A、B 或 C），或者只是向下滚动它开始计算的页面，使其无法使用。

公式以 Ctrl + Shift + Return 结束

```
{=INDEX(C:C;MATCH("x"&"y";A1:A99&B1:B99;0))} 
```

任何人都知道如何在不减慢 excel 速度的情况下获得相同的结果。

谢谢，加雷斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T11:22:38.017

您可以尝试使用 LOOKUP 的替代方法

`=LOOKUP(2;1/(A1:A99="x")/(B1:B99="y");C1:C99)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T15:29:33.917

如果您可以通过添加辅助列使电子表格变得丑陋，那么可能在一个新列中（在要返回的列的左侧）写下 ="x"&"y" 值并使用标准 Vlookup从那里。

数组公式最终会让你陷入困境。

# c# - MVC 模式差异

> ID：13890467
> 
> 赞同：12
> 
> 时间：2012-12-15T08:00:33.893
> 
> 标签：c#, model-view-controller, interface

我只需要一些我可以阅读的文章的链接或一些关于 MVC (C#) 中使用的不同模式的基本解释。

目前我倾向于使用视图模型模式构建我的 Web 应用程序。对于每个视图，我都有一个视图模型。我喜欢这种方法纯粹是因为模型中可能不需要太多垃圾，我可以在这里使用一些基本的数据注释。

我现在还在视图模型本身内构建我的视图模型（不确定这是否正确？），以便我可以使我的控制器尽可能简单。

但是有时我发现自己在控制器中添加了很多逻辑，我认为这对我来说也很好，这就是控制器的用途。

现在基于上述内容，正如我所说，我可以非常愉快地构建我的应用程序，而不会出现任何重大问题。然而，在我正常浏览代码示例等时，我经常发现不同的开发人员使用了很多其他方法来完成我上面所做的事情，我想解释一下它们都适合在一起。

我经常看到提到“使用你的存储库来做废话”。我确实“有时”使用存储库，但这主要是用于模型查询，我知道我将来会重新使用它，它总是变成有点垃圾场。这里的最佳做法是什么？

我还看到提到的“接口”和“服务层”我在这里完全迷失了.. 对我来说，大多数示例似乎只是添加越来越多的步骤来实现相同的目标。如何/为什么使用它们？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T08:37:01.020

我不能说这是最佳实践，但这就是我使用的方法，以及为什么，我们开始吧：

* * *

## 1\. 存储库。

它们的结构是这样的：

共有三个基本接口`IRead<>`，`IReadCreate<>`和`IReadCreateDelete<>`。

```
interface IRead<T>
{ 
    T FindOne(int id);
    IQueryable<T> GetOne(int id);
    IQueryable<T> FindAll(Expression<Func<T, bool>> predicate);
}

interface IReadCreate<T> : IRead<T>
{ 
    T Create();
    void Create(T entity);
}

interface IReadCreateDelete<T> : IReadCreate<T>
{ 
    void Delete(int id);
    void Delete(T entity);
    void DeleteWhere(Expression<Func<T, bool>> predicate);
} 
```

所有其他接口如下所示：

```
interface ICategoriesRepository : IReadCreate<Category>
{
    IQueryable<Category> GetAllActive();
} 
```

它们都在它们所依赖的数据源上提供了额外的有用功能。这意味着，我无法访问我的实现存储库中的其他类型存储库。这应该在**Services**上完成。（往下看。）

这种方法的主要目标是显示调用代码（来自另一个程序集，因为我所有的存储库、服务和其他合同都在单独的 DLL 项目中定义（作为接口））它可以做什么（比如读取和创建项目）以及什么它不能做（比如删除项目）。

* * *

## 2\. 服务

服务和实现业务逻辑的最佳方式。他们应该实现所有重要的逻辑方法。为了实现这种实现，他们需要一些存储库依赖，而`Dependency Injector`. 我更喜欢使用**Ninject**，因为它允许我像这样注入依赖属性：

```
internal class CategoriesService : ICategoryService
{
    public ICategoriesRepository CategoriesRepository { get; set; }
    public IWorkstationsRepository WorkstationsRepository { get; set; }

    // No constructor injection. I am too lazy for that, so the above properties 
    // are auto-injected with my custom ninject injection heuristic.

    public void ActivateCategory(int categoryId)
    {
        CategoriesRepository.FindOne(categoryId).IsActive = true;
    }
} 
```

服务的目标是从控制器和存储库中消除业务逻辑。

* * *

## 3\. 视图模型

很酷的事情，正如你所说，但原因是你为什么要自己建立它们，这是我无法理解的。我为此使用了**自动映射**器（带有可查询的扩展），它允许我创建如下视图：

假设我有一个需要模型的**视图。**`IEnumerable<TicketViewModel>`我要做的是：

```
public class FooController : Controller
{
     public IMappingEngine Mapping { get; set; } // Thing from automapper.
     public ITicketsRepository TicketsRepository { get; set; }

     public ViewResult Tickes()
     { 
         return View(TicketsRepository.GetAllForToday().Project(Mapping)
             .To<TicketViewModel>().ToArray();
     }
} 
```

就是这样。对存储库的简单调用，它调用底层数据源（另一种模式。我不会写它，因为它的抽象仅用于测试。），它调用数据库（或你实现的任何东西`IDataSource<T>`）。Automapper 自动映射`Ticket`to`TicketViewModel`和 form 数据库，我检索**了我的 ViewModel 列所需的唯一数据库，包括单个请求中的交叉表**。

* * *

## 结论

还有很多要说的，但我希望这能给你一些思考。我使用的所有模式和程序都是：

1.  自动映射器（映射）；
2.  Ninject（依赖注入）；
3.  存储库（数据访问）；
4.  数据源（从数据源中读取的数据）；
5.  服务（数据交互）；
6.  ViewModels（数据传输对象）；
7.  也许我会编辑添加其他内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-15T08:52:12.370

当我开始阅读您的帖子时，我在想您可能正在寻找的是对 SOLID 原则的理解。最后提到接口和服务层。有趣的。

有很多文章庆祝 SOLID 和 DRY 的圣杯（许多不了解 DRY 倡导者真正提出的建议）。但是 .NET 世界中的一般想法是，不要转到 aspx 中自动生成的 Page_Load 并开始随意输入所有内容，直到页面完成它应该做的事情。MVC 来救援。

你说你有每个视图的模型。我会称之为声音。即使两个模型相同，它们也只是相等，而不是相同。例如：NewsItem 不是 EventItem。如果你想扩展一个，它不应该影响另一个。

然后您继续说您正在视图模型本身中生成模型。这听起来倒退了。但是您说这样做是为了保持控制器清洁。好的！您的思维方式中缺少的是服务。

您要做的是将实际执行任何类型工作的所有代码移动到服务中。服务可以基于一个方面、一个特性或为什么不基于一个控件。现在看一个 Web 项目，我看到：VisitorService、NewsfeedService、CalendarService、CachingService、MainMenuService、HeaderService、FooterService 等等等等。

在这种情况下，控制器只负责向执行某些工作的服务（或多个服务）请求模型。然后将该模型转发到视图。

一旦您将“业务逻辑”融入服务，您就可以轻松地将 IoC（控制反转）应用到您的项目中，如果这让您满意的话。我还没有对 IoC 投票。我有一种令人毛骨悚然的好处，它的好处并不像广告宣传的那么大，而且你可以肯定地没有代码膨胀。但 IoC 确实要求您在编写代码之前进行思考。

For a very easy going tutorial on IoC, I recommend Ninject. Not only does it feature Ninjas, but samurais, swords and shuriken as well. That's a lot cooler than cars and animals.

[https://github.com/ninject/ninject/wiki/Dependency-Injection-By-Hand](https://github.com/ninject/ninject/wiki/Dependency-Injection-By-Hand)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-15T08:43:54.200

**控制器：**

从理论上讲，您的控制器应该只处理“数据”。将信息片段从一个地方移动到另一个地方。

小例子：

1.  控制器接收带有一些参数的请求“GetMessage”。
2.  将此数据发送到服务层。在服务层中，您正在访问存储库返回消息。
3.  控制器接收到这个消息（或者如果没有空值）并决定它是否应该将收到的消息发回，或者可能存在错误并且应该以某种方式通知用户。

所有“理论上”的业务逻辑都应该在某个服务层之后。这样您就可以轻松地测试所有内容。控制器中的逻辑使一些测试更加困难。

**接口：**

基于界面的设计现在非常流行。尤其是所有处理依赖注入的 IOC 容器。但是，如果您从这个概念开始，请不要担心这些关键字。如果您知道存储库模式，那么首先尝试使用 IRepository 接口，而不是通过具体类访问存储库，而是使用 IRepository。（只需将控制器中的字段从 Repository 更改为 IRepository）。

[一般关于接口](http://www.c-sharpcorner.com/UploadFile/rmcochran/csharp_interrfaces03052006095933AM/csharp_interrfaces.aspx)

您将在更复杂的场景中看到接口的好处，但是有一种技术可以向您展示这种方法的所有荣耀。单元测试+模拟。

# php - GD 可以在渐进式 JPEG 中选择隔行扫描的深度吗？

> ID：13890468
> 
> 赞同：2
> 
> 时间：2012-12-15T08:00:58.097
> 
> 标签：php, gd, jpeg

我知道使用[`imageinterlace`](http://php.net/imageinterlace)它可以创建渐进式图像，但我需要知道是否可以实际要求渐进式的特定步骤。假设 Jpeg 文件是使用 3 级扫描创建的，我可以将其降级到仅 2 级或 1 级吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T08:30:21.040

这似乎不是您在构建 JPEG 时可以实际控制的事情。

来自[维基百科关于 JPEG 的文章](http://en.wikipedia.org/wiki/JPEG#Entropy_coding)：

> Baseline JPEG 还支持渐进式编码。顺序编码一次编码单个块的系数（以锯齿形方式），渐进式编码一次编码所有块的相似位置系数，然后是所有块的下一个定位系数，依此类推。因此，如果图像被划分为 N 个 8×8 块 {B0,B1,B2, ..., Bn-1}，那么渐进式编码对所有块编码 Bi(0,0)，即对所有 i = 0 , 1, 2, ..., N-1。接下来是编码所有块的 Bi(0,1) 系数，然后是所有块的第 Bi(1,0) 系数，然后是所有块的第 Bi(2,0) 系数，依此类推。这里应该注意，一旦所有位置相似的系数都被编码，下一个要编码的位置就是锯齿形遍历中下一个出现的位置，如[上图](http://en.wikipedia.org/wiki/File%3aJPEG_ZigZag.svg)。

鉴于描述，没有办法实际控制 JPEG 隔行扫描的性质。遍数是标准和图像格式本身的一部分。

它在[大多数其他图像格式](http://en.wikipedia.org/wiki/Interlacing_(bitmaps))中同样不可控，其中大多数在其标准中也明确调用了一个且只有一个隔行扫描公式，除了 TGA，它有两个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-10T02:09:03.023

JPEG 图像实际上不是隔行扫描的。Progressive JPEG 允许您分解每个 8x8 数据块的 DC 系数和 AC 系数范围。这会细化数据，但每次扫描都适用于所有像素（与实际隔行扫描不同）。

JPEG 允许您指定逐行图像的扫描次数。JPEG 术语是“光谱选择”。对于 AC 系数，您还可以灵活地对扫描进行排序。

问题是 JPEG 在这方面具有很大的灵活性，因此很难创建允许您利用所有这些灵活性的编程或用户界面。

每个组件必须至少进行 2 次扫描（否则不会是渐进式的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-10T00:38:39.203

Photoshop 允许您选择渐进式 JPEG 的扫描次数（3、4 或 5）。

imageinterlace 的 $interlace 值是 int 而不是 bool，这让我想知道 > 0 的值是否不仅仅是启用它，而是选择扫描次数。手册没有确认这一点，但可能值得一试。

另外，我不知道扫描计数是否存在低于 3 或高于 5。在这种情况下，您会认为他们必须提及它，因此您不会选择 1 作为值……但谁知道呢。我可能会玩一点。

# sql-server - 避免使用 sa 登录从我的应用程序访问我的数据库的最佳方法

> ID：13890469
> 
> 赞同：0
> 
> 时间：2012-12-15T08:01:01.833
> 
> 标签：sql-server, asp.net-mvc

我开发了一个查询 SQL Server 数据库的 ASP.NET MVC 应用程序。到目前为止，我使用 sa 登录来查询我的数据库，但我知道这不是一个好主意。

**我的问题**：我不知道如何继续使用另一个帐户从我的应用程序访问我的数据库。

*   我是否必须创建一个新的登录名`\Security\Logins\`

或者

*   我是否必须在`\Databases\PLATONDB\Security\Users\`

![在此处输入图像描述](../Images/4ebd8572d81659ed53849c01de3323e4.png)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T08:09:16.353

您必须在数据库的 /security/users 文件夹中创建它并分配正确的权限。

虽然可以在互联网上找到有关此主题的大量信息和教程..

[http://msdn.microsoft.com/en-us/library/aa337545.aspx](http://msdn.microsoft.com/en-us/library/aa337545.aspx)

[http://social.msdn.microsoft.com/forums/en-US/Vsexpressinstall/thread/fcbe9a07-6d93-4f9e-95e7-84b99a721d23](http://social.msdn.microsoft.com/forums/en-US/Vsexpressinstall/thread/fcbe9a07-6d93-4f9e-95e7-84b99a721d23)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T08:18:56.633

你将需要两者。
\Security\Logins\ 的用户或组以及 \Databases\PLATONDB\Security\Users\ 中的分配，
这可以通过设置登录到 PLATONDB 的默认数据库一步完成

# android - 错误屏幕上的 ligbdx 触摸监听器

> ID：13890472
> 
> 赞同：3
> 
> 时间：2012-12-15T08:01:13.503
> 
> 标签：android, libgdx

最近开始使用带有表格/舞台/按钮等的 libgdx 编写 MenuScreen 但是我意识到即使在进入下一个屏幕之后，原始 MenuScreen 的按钮仍然是可点击的 :(

大致是这样的：

1.  应用程序启动，查看`MainMenu`屏幕
2.  单击一个按钮（例如：“选项”），请参阅选项屏幕
3.  单击选项屏幕中的某个位置，该屏幕中的 MainMenu 按钮曾经是（例如关于）
4.  转到“关于”屏幕

当您看到“选项”屏幕时，如果您**没有**单击 MainMenu 具有按钮的位置，则“选项”屏幕将正常/预期工作。

因此，从这种行为来看，MainMenu 屏幕似乎仍然存在（只是隐藏）并且所有按钮侦听器仍然处于活动状态。

清理 MainMenu 屏幕的正确方法是什么？（我想通常清理 libgdx 屏幕）

重要的代码位：

```
public class MainMenu implements Screen {

    public MainMenu() {
        // ..setting up font, camera etc

        stage = new Stage();
        stage.setCamera(camera);
        Table table = new Table();
        table.setWidth(300);
        table.setHeight(480);
        stage.addActor(table);

        TextButton options = new TextButton("Options", buttonStyle);
        options.addListener(new ButtonClickListener(app.options));
        table.add(options).pad(20);
        table.row();        

        // ... more buttons, eg About...

        Gdx.input.setInputProcessor(stage);
    }

    private class ButtonClickListener extends ClickListener {
        private final Screen screen;

        private ButtonClickListener(Screen screen) {
            this.screen = screen;
        }

        @Override
        public void touchUp(InputEvent event, float x, float y, int pointer, int button) {
            app.setScreen(this.screen);
        }
    }

    public void render(float delta) {
        Gdx.gl.glClearColor(0, 0, 0, 1);
        Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT);

        camera.update();

        spriteBatch.begin();
        stage.draw();
        spriteBatch.end();
    }

    // ... show(), resize(), hide(), pause(), resume() are all no-ops

    @Override
    public void dispose() {
        stage.dispose();
        spriteBatch.dispose();
        font.dispose();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T18:51:56.590

您的阶段仍在处理输入。它是否可见并不重要。除非新屏幕设置了新处理器，否则您应该手动删除它。您还应该手动调用 dispose，因为它从未被自动调用（libgdx 仅调用 hide()）。

因此，您可以在 hide(); 中处理和删除处理器；

```
Gdx.input.setInputProcessor(null);
this.dispose() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-24T02:21:10.213

我遇到过类似的问题，但幸运的是我遇到了一个解决方案，甚至 Gdx.input.setInputProcessor(null); 没有帮助。

解决方案：请添加**stage.clear();** 在 hide(){} 方法中，这显着解决了同样的问题。

# c - 需要递归函数的解决方案

> ID：13890480
> 
> 赞同：2
> 
> 时间：2012-12-15T08:02:51.277
> 
> 标签：c, gcc

```
#include <stdio.h>

void call(int n )
{
    if ( n > 0 )
    {
        call(--n) ;
        printf("\n%d",n) ;
        call(--n) ;
    }
}

int main(void )
{
    int a = 3 ;
    call(a) ;
    return 0 ;
} 
```

在上面提到的代码中，我很难理解其背后的逻辑。我得到 0 1 2 0 作为输出。为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T08:13:15.020

```
call(3)
│ n3=3
│ --n3 (n3=2)
├╴call(2)
│ │ n2=2
│ │ --n2 (n2=1)
│ ├╴call(1)
│ │ │ n1=1
│ │ │ --n1 (n1=0)
│ │ ├╴call(0)
│ │ │ └ return
│ │ │
│ │ │ printf("\n0");           ⇦ 0
│ │ │
│ │ │ --n1 (n1=-1)
│ │ ├╴call(-1)
│ │ │ └ return
│ │ └ return
│ │
│ │ printf("\n1")              ⇦ 1
│ │
│ │ --n2 (n2=0)
│ ├╴call(0)
│ │ └ return
│ └ return
│
│ printf("\n2");               ⇦ 2
│
│ --n3 (n3=1)
├╴call(1)
│ │ n1=1
│ │ --n1 (n2=0)
│ ├╴call(0)
│ │ └ return
│ │
│ │ printf("\n0");             ⇦ 0
│ │
│ │ --n1 (n1=-1)
│ ├╴call(-1)
│ │ └ return
│ └ return
└ return 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-15T08:28:58.180

首先，找到你的基本情况：`call(n), when n<=0`什么都不做，只是返回。

在一般情况下，`code(n)`定义说：“递减`n`并递归（一直向下）；当控件返回时，打印`n`（保留其值），再次递减并再次递归”。

或者，使用方程式：

```
call(n) | when(n<=0) = NO-OP
call(n) | otherwise  = call(n-1), print(n-1), call(n-2) 
```

所以，

```
call(1) = call(0), print(0), call(-1)
        = print(0)

call(2) = call(1), print(1), call(0)
        = print(0), print(1)

call(3) = call(2), print(2), call(1)
        = (print(0), print(1)), print(2), print(0) 
```

* * *

继续，

```
call(4) = 0120+3+01
call(5) = 0120301+4+0120
call(6) = 012030140120+5+0120301
.... 
```

似乎我们可以生成不确定的结果输出序列，只保留两个最近的值：

```
(n,a,b) --> (n+1,b,b+n+a) 
```

因此，它不是向下*递归到基本情况，而是描述**远离*起始情况的核心递归`(2,0,1)`（该`1`情况被一个特殊的事实所涵盖`(1,_,0)`）。我们可以将其编码为实际的无限增长（即*“无限”*）序列，或者我们可以从中创建一个无限循环。

这种非终止计算的目的是什么？为了*描述*结果的计算，*一般来说*。但是，当我们达到 的目标值时，当然很容易缩短这样的计算`n`。

好处？我们得到了一个迭代循环，而不是递归！

```
output(1) = "0"
output(n) | when(n>1) = 
   let {i = 2, a="0", b="1"}
   while( i<n ):
      i,a,b = (i+1),b,(b+"i"+a)
   return b 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T09:13:39.713

当试图理解代码流时，我无法避免我使用一个简单的策略：

以详细的方式记录输出。例如，您可以映射应用程序的流程，而不是在调用函数中使用简单的 printf 语句。这是一个例子

```
#include <stdio.h>

void call(int n, int depth)
{
    printf("%.*s(enter) n is (%d)\n", ++depth, "-----", n);
    if ( n > 0 )
    {
        call(--n, depth) ;

        call(--n, depth) ;
    }
    printf("%.*s(exit) n is (%d)\n", depth--, "-----", n);
}

int main(void )
{

    int a = 3 ;

    call(a, 0) ;
    getchar();
    return 0 ;
} 
```

这将导致：

```
-(enter) n is (3)
--(enter) n is (2)
---(enter) n is (1)
----(enter) n is (0)
----(exit) n is (0)
----(enter) n is (-1)
----(exit) n is (-1)
---(exit) n is (-1)
---(enter) n is (0)
---(exit) n is (0)
--(exit) n is (0)
--(enter) n is (1)
---(enter) n is (0)
---(exit) n is (0)
---(enter) n is (-1)
---(exit) n is (-1)
--(exit) n is (-1)
-(exit) n is (1) 
```

# ruby-on-rails - Fullcalendar Rails 3.2 - PG::Error

> ID：13890481
> 
> 赞同：0
> 
> 时间：2012-12-15T08:02:54.937
> 
> 标签：ruby-on-rails, json, postgresql, ruby-on-rails-3.2

我正在尝试使用 rails 3.2 为我的应用程序使用 fullcalendar，并将 postgresql 用于 dbms。说到点子上，

关于模型 event.rb

```
class Event < ActiveRecord::Base

  attr_accessible :all_day, :ends_at, :description, :name, :starts_end

  scope :between, lambda {|start_time, end_time|
    {:conditions => ["? < starts_at < ?", Event.format_date(start_time), Event.format_date(end_time)] }
  }

  # need to override the json view to return what full_calendar is expecting.
  # http://arshaw.com/fullcalendar/docs/event_data/Event_Object/
  def as_json(options = {})
    {
      :id => self.id,
      :name => self.name,
      :description=> self.description || "",
      :start => starts_at.rfc822,
      :end => ends_at.rfc822,
      :allDay => self.all_day,
      :recurring => false,
      :url => Rails.application.routes.url_helpers.event_path(id),
      #:color => "red"
    }

  end

  def self.format_date(date_time)
    Time.at(date_time.to_i).to_formatted_s(:db)
  end

end 
```

对于starts_at 和ends_at，我使用的是日期类型（不是日期时间）

在 events.js.coffee 上

```
$(document).ready ->
  $('#calendar').fullCalendar
    editable: true,
    header:
      left: 'prev,next today',
      center: 'title',
      right: 'month,agendaWeek,agendaDay'
    defaultView: 'month',
    height: 500,
    slotMinutes: 30,

    eventSources: [{
      url: '/admin'+'/events',
    }],

    timeFormat: 'h:mm t{ - h:mm t} ',
    dragOpacity: "0.5"

    eventDrop: (event, dayDelta, minuteDelta, allDay, revertFunc) ->
      updateEvent(event);

    eventResize: (event, dayDelta, minuteDelta, revertFunc) ->
      updateEvent(event);

updateEvent = (the_event) ->
  $.update "/events/" + the_event.id,
    event:
      name: the_event.name,
      starts_at: "" + the_event.start,
      ends_at: "" + the_event.end,
      description: the_event.description 
```

在控制器 admin/events_controller.rb

```
def index
    @events = Event.scoped
    @events = Event.between(params['start'], params['end']) if (params['start'] && params['end'])

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @events }
    end
  end 
```

首先，我插入一个事件并成功，当运行到 localhost:3000/admin/events/ 时，我收到以下错误，例如

```
 Event Load (14.0ms)  SELECT "events".* FROM "events" WHERE ('2012-11-25 00:00:
    00' < starts_at < '2013-01-06 00:00:00')
    PG::Error: ERROR:  syntax error at or near "<"
    LINE 1: ...events"  WHERE ('2012-11-25 00:00:00' < starts_at < '2013-01...
                                                                 ^
    : SELECT "events".* FROM "events"  WHERE ('2012-11-25 00:00:00' < starts_at < '2
    013-01-06 00:00:00')
    Completed 500 Internal Server Error in 100ms

    ActiveRecord::StatementInvalid (PG::Error: ERROR:  syntax error at or near "<"
    LINE 1: ...events"  WHERE ('2012-11-25 00:00:00' < starts_at < '2013-01...
                                                                 ^
    : SELECT "events".* FROM "events"  WHERE ('2012-11-25 00:00:00' < starts_at < '2
    013-01-06 00:00:00')): 
```

**更新**

改变条件

```
{:conditions => [
  "starts_at > ? and starts_at < ?",
  Event.format_date(start_time), Event.format_date(end_time)
] } 
```

并在命令提示符下

```
 Event Load (2.0ms)  SELECT "events".* FROM "events" WHERE (starts_at > '2012-1
-25 00:00:00' and starts_at < '2013-01-06 00:00:00')
ompleted 200 OK in 31ms (Views: 15.0ms | ActiveRecord: 12.0ms) 
```

但事件未显示在日历中:(

**更新 2**

我正在尝试来自和事件显示的示例应用程序。

```
Started GET "/events?start=1353776400&end=1357405200&authenticity_token=rTzzn2j+
DpUwKRwjPAdSjfq17glTu8dFjrKo2dGbEo8=&_=1355566671618" for 127.0.0.1 at 2012-12-1
5 17:17:51 +0700
Processing by EventsController#index as JSON
  Parameters: {"start"=>"1353776400", "end"=>"1357405200", "authenticity_token"=
>"rTzzn2j DpUwKRwjPAdSjfq17glTu8dFjrKo2dGbEo8=", "_"=>"1355566671618"}
  ←[1m←[36mEvent Load (1.0ms)←[0m  ←[1mSELECT "events".* FROM "events" WHERE ('2
012-11-25 00:00:00' < starts_at < '2013-01-06 00:00:00')←[0m
Completed 200 OK in 34ms (Views: 31.0ms | ActiveRecord: 1.0ms) 
```

注意：资源事件

这是我的应用程序

```
Started GET "/admin/events?start=1353776400&end=1357405200&_=135556713595
4" for 127.0.0.1 at 2012-12-15 17:25:36 +0700
Processing by Admin::EventsController#index as JSON
  Parameters: {"start"=>"1353776400", "end"=>"1357405200", "_"=>"1355567135954"}
 Admin Load (2.0ms)  SELECT "public"."admins".* FROM "public"."ad
mins" WHERE "public"."admins"."id" = 25 LIMIT 1
  Account Load (6.0ms)  SELECT "public"."accounts".* FROM "public"."accounts" WH
ERE "public"."accounts"."admin_id" = 25 LIMIT 1
  Event Load (3.0ms)  SELECT "events".* FROM "events" WHERE (starts_at > '2012-1
1-25 00:00:00' and starts_at < '2013-01-06 00:00:00')
Completed 200 OK in 101ms (Views: 72.0ms | ActiveRecord: 24.0ms) 
```

注意：命名空间管理员（管理员/事件）下的资源事件，并且我有架构的多租户，管理员使用公共架构登录后登录更改到其他架构（子域）。

我将类型日期更改为日期时间

在 psql 上

```
education_development=# SELECT * FROM subdomain.events WHERE (starts_at > '2
012-11-25 00:00:00' and starts_at < '2013-01-06 00:00:00')
education_development-# ;
 id |     name      |       starts_at        |        ends_at         | all_day
|   description    |         created_at         |         updated_at
----+---------------+------------------------+------------------------+---------
+-----------------+----------------------------+----------------------------
  1 | New Year 2013 | 2013-01-01 00:00:00+07 | 2013-01-01 00:00:00+07 | f
| New Year 2013 | 2012-12-15 06:53:50.695456 | 2012-12-15 06:53:50.695456
(1 row) 
```

谁能帮我？谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T08:33:27.910

你不能，但像：

```
a < starts_at < b 
```

在 WHERE 子句中，这不是有效的 SQL。但是，您可以输入：

```
starts_at > a AND starts_at < b 
```

你可能想要：

```
{:conditions => [
  "starts_at > ? and starts_at < ?",
  Event.format_date(start_time), Event.format_date(end_time)
] } 
```

顺便说一句，带参数作用域的推荐方法是[使用类方法](http://guides.rubyonrails.org/active_record_querying.html#passing-in-arguments)：

> 使用类方法是接受范围参数的首选方式。

所以你可能想要：

```
def self.between(start_time, end_time)
  where('starts_at > :lo and starts_at < :up',
    :lo => Event.format_date(start_time),
    :up => Event.format_date(end_time)
  )
end 
```

# sql - 执行 SQL 语句是否可以同时与 SQL 语句和变量一起使用

> ID：13890483
> 
> 赞同：0
> 
> 时间：2012-12-15T08:03:05.033
> 
> 标签：sql, sql-server, ssis, task, execute

是否有可能设计 Execute SQL Task 使得当它从 SQL 的数据库中读取时，任务 A 被执行，而当它从变量中读取时，任务 B 被执行？这意味着 Execute SQL Task 同时与 SQL Statement 和 Variables 一起工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T21:14:03.517

因此，您希望在运行时根据您是否从 SQL 数据库中检索值来设置 Execute SQL 任务的 SqlStatementSource 属性。如果没有检索到值，您希望将其设置为预先存在的变量的值。

1.  创建一个执行 SQL 任务以检索您的 SQL 数据库值并将其分配给变量 DatabaseSQL。我假设如果没有找到值，您的查询将返回 NULL。
2.  将默认值分配给变量 DefaultSQL。
3.  在执行 SQL 任务中，为 SqlStatementSource 属性创建一个表达式并将表达式设置为

    REPLACENULL(@User::DatabaseSQL, @User::DefaultSQL)

# box-api - 在 Box 中使用新的 OAuth 2

> ID：13890485
> 
> 赞同：5
> 
> 时间：2012-12-15T08:04:03.490
> 
> 标签：box-api

我正在尝试将新的 Box 身份验证 API 与 OAuth 一起使用。我想使用我当前使用的盒子帐户的凭据来授权我的应用程序。

OAuth 的配置请求重定向 URI，我不知道必须在那里输入什么。在之前的身份验证方法中，给了以下 URI [http://www.box.net/api/1.0/auth/](http://www.box.net/api/1.0/auth/) {ticket}，但这是在获得身份验证票后完成的。

我是 OAuth 的新手，所以我的问题可能有点明显......但我想知道如何使用盒子帐户用户的凭据进行身份验证。

我在 Windows 应用程序中执行此操作，因此我还想了解如何显示请求的响应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-07T10:06:32.390

当我四处寻找有关为桌面创建 Box.net 应用程序的答案时，试图获得登录身份验证所花费的时间比它真正应该拥有的要多......

因此，我决定在我的网站上整理一篇文章，介绍创建可以登录并使用其 SDK 的 C# .Net 4.0 桌面应用程序的过程。这是使用他们新的 OAuth 2.0 登录系统。

首先，我们使用标准 HttpWebRequest 对象发送初始 Web 请求，以获取用于 OAuth 2.0 登录的 UI 网页。Web 响应返回后，我们将其转换为 Stream 以供我们的 Web 浏览器使用。重定向 URI 可以是任何基于 HTTPS 的 URI。

```
string baseURI = "https://www.box.com/api/oauth2/authorize?";
string responseType = "&response_type=code";
string clientId = "&client_id=YOUR OWN CLIENT ID";
string redirectURI = "&redirect_uri=https://app.box.com/services/poc_connector"; 

var targetUri = new Uri(baseURI + responseType + clientId + redirectURI);
HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create(targetUri); 
```

要将 Stream 注入 Web 浏览器控件，我们使用 document 属性

```
webBrowser1.DocumentStream = view; 
```

一旦完成，用户的所有操作都由网络浏览器控件处理。在用户按下“授予访问权限”按钮时捕获身份验证令牌。我们为 web-browsers Navigated 事件添加了一个事件监听器。

```
private void webBrowser1_Navigated(object sender, WebBrowserNavigatedEventArgs e)
{
    if (e.Url.AbsolutePath != "blank" && e.Url.ToString().Contains("&code="))
    {
        Token = e.Url.ToString().Substring(e.Url.ToString().IndexOf("&code="));
        Token = Token.Replace("&code=", String.Empty);
        this.Close();
    }
} 
```

链接我的原创文章和源码：[link](http://yicksolutions.com/corporateBlog_Article_BoxDemo.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T21:22:08.313

OAuth 2 流程的第一步是将用户发送到`https://api.box.com/oauth2/authorize`response_type 和 client_id 作为请求的参数。重定向 URL 将与您在 V1 中设置的相同。例如，如果您的 client_id 是 123456，您可以将用户定向到

```
https://api.box.com/oauth2/authorize?response_type=code&client_id=123456 
```

[请参阅此处了解更多信息](http://developers.box.com/oauth/)。

# java - Activity not found exception even if it is declared in manifest

> ID：13890486
> 
> 赞同：1
> 
> 时间：2012-12-15T08:04:13.070
> 
> 标签：java, android, eclipse, thread-safety, avd

This is my logcat file which shows activity not found exception, even though I have declared it in manifest file.whenever I launch my app in eclipse avd "unfortunately has stopped" warning pops out. please help me with this.

```
12-15 07:42:47.833: E/AndroidRuntime(770): FATAL EXCEPTION: Thread-75
12-15 07:42:47.833: E/AndroidRuntime(770): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=my.example.myproject.SELECTION }
12-15 07:42:47.833: E/AndroidRuntime(770):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1622)
12-15 07:42:47.833: E/AndroidRuntime(770):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1417)
12-15 07:42:47.833: E/AndroidRuntime(770):  at android.app.Activity.startActivityForResult(Activity.java:3370)
12-15 07:42:47.833: E/AndroidRuntime(770):  at android.app.Activity.startActivityForResult(Activity.java:3331)
12-15 07:42:47.833: E/AndroidRuntime(770):  at android.app.Activity.startActivity(Activity.java:3566)
12-15 07:42:47.833: E/AndroidRuntime(770):  at android.app.Activity.startActivity(Activity.java:3534)
12-15 07:42:47.833: E/AndroidRuntime(770):  at my.example.myproject.FullscreenActivity$3.run(FullscreenActivity.java:72) 
```

* * *

Java code and manifest file is as shown below

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_fullscreen);
        final View controlsView = findViewById(R.id.fullscreen_content_controls);
        final View contentView = findViewById(R.id.fullscreen_content);
        iol = (Button)findViewById(R.id.iolCalculation);
        help = (Button)findViewById(R.id.sHelp);
        about = (Button)findViewById(R.id.sAbout);
        Thread iolthread=new Thread(){
            public void run(){
                try{
                    iol.setOnClickListener(new View.OnClickListener() {

                            @Override
                            public void onClick(View v) {
                                // TODO Auto-generated method stub
                                setContentView(R.layout.selection);
                            }
                    });
                    Intent iolIntent=new Intent("my.example.myproject.SELECTION");
                    startActivity(iolIntent);
                }
                finally{
                    finish();
                }
            }
        };  
        iolthread.start(); 
```

* * *

**Manifest file**

```
<application
        android:allowBackup="true"
        android:theme="@style/AppTheme">"
        <activity
            android:name=".FullscreenActivity"
            android:configChanges="orientation|keyboardHidden|screenSize"
            android:label="@string/app_name"
            android:theme="@style/FullscreenTheme" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Selection"
            android:configChanges="orientation|keyboardHidden|screenSize"
            android:label="@string/app_name"
            android:theme="@style/FullscreenTheme" >

                <action android:name="my.example.myproject.SELECTION" />

                <category android:name="android.intent.category.DEFAULT" />

        </activity>
    </application> 
```

* * *

I am a beginner in android programming and stack overflow. Bare me if there is any mistake. Below is my main xml file

```
 <FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/black"
    tools:context=".FullscreenActivity" >

    <!--
         The primary full-screen view. This can be replaced with whatever view
         is needed to present your content, e.g. VideoView, SurfaceView,
         TextureView, etc.
    -->

    <TextView
        android:id="@+id/fullscreen_content"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:gravity="center"
        android:keepScreenOn="true"/>

    <!--
         This FrameLayout insets its children based on system windows using
         android:fitsSystemWindows.
    -->

    <FrameLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@color/Black"
        android:fitsSystemWindows="true" >

        <LinearLayout
            android:id="@+id/fullscreen_content_controls"
            style="?buttonBarStyle"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="bottom|center_horizontal"
            android:background="@color/black_overlay"
            android:orientation="horizontal"
            tools:ignore="UselessParent" >
        </LinearLayout>

        <Button
            style="@style/ButtonBarButton"
            android:layout_width="222dp"
            android:layout_height="62dp"
            android:layout_marginLeft="45dp"
            android:layout_marginTop="75dp"
            android:background="@color/black"
            android:paddingLeft="20dp"
            android:id="@+id/iolCalculation"
            android:text="@string/Button"
            android:textColor="@color/WhiteSmoke"
            android:textStyle="bold" />

        <Button
            style="@style/ButtonBarButton"
            android:layout_width="222dp"
            android:layout_height="62dp"
            android:layout_marginLeft="45dp"
            android:id="@+id/sHelp"
            android:layout_marginTop="139dp"
            android:background="@color/Black"
            android:gravity="center"
            android:paddingLeft="10dp"
            android:text="@string/Button1"
            android:textColor="@color/WhiteSmoke"
            android:textStyle="bold" />

        <Button
            style="@style/ButtonBarButton"
            android:layout_width="222dp"
            android:layout_height="62dp"
            android:id="@+id/sAbout"
            android:layout_marginLeft="45dp"
            android:layout_marginTop="203dp"
            android:background="@color/Black"
            android:paddingLeft="10dp"
            android:text="@string/Button2"
            android:textColor="@color/WhiteSmoke"
            android:textStyle="bold" >

        </Button>
</FrameLayout>

</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T08:11:51.153

It looks like you forgot to add intent-filter tag to second activity. Try following manifest change

```
 <activity
        android:name=".Selection"
        android:configChanges="orientation|keyboardHidden|screenSize"
        android:label="@string/app_name"
        android:theme="@style/FullscreenTheme" >
        <intent-filter>
            <action android:name="my.example.myproject.SELECTION" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-15T08:12:05.540

Write below code

```
Intent mInSelection=new Intent(MainActivity.this,Selection.class);
startActivity(mInSelection); 
```

instead of

```
Intent iolIntent=new Intent("my.example.myproject.SELECTION");
startActivity(iolIntent); 
```

And write below code into your manifest.xml file

```
<activity
    android:name=".Selection"
    android:configChanges="orientation|keyboardHidden|screenSize"
    android:label="@string/app_name"
    android:theme="@style/FullscreenTheme" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity> 
```

instead of

```
<activity
    android:name=".Selection"
    android:configChanges="orientation|keyboardHidden|screenSize"
    android:label="@string/app_name"
    android:theme="@style/FullscreenTheme" >

    <action android:name="my.example.myproject.SELECTION" />

    <category android:name="android.intent.category.DEFAULT" />

</activity> 
```

it will solve your problem.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-07T12:41:40.500

I know I am late but it can help others. Just add this

```
Intent mInSelection=new Intent(MainActivity.this,my.example.myproject.SELECTION.class);
startActivity(mInSelection); 
```

it will surely help you.

# mysql - 从表中获取数据，其中日期介于给定日期和 1 周前

> ID：13890487
> 
> 赞同：1
> 
> 时间：2012-12-15T08:04:33.087
> 
> 标签：mysql, date, select, datediff

我有数据库**dbadmin**，表 - **tbl_empreimburse**和**fields-emp_id,rem_amount,rem_date**。

我想检索从给定日期到一周前的数据。我试过这个查询，

```
SELECT SUM(rem_amount),DATEADD(dd, -7, "2012-01-10")  
FROM tbl_empreimburse 
GROUP BY emp_id 
HAVING emp_id='5' AND rem_date BETWEEN DATEADD(dd, -7, "2012-01-10") AND "2012-01-10" 
```

它给了我错误“ **FUNCTION dbadmin.DATEADD 不存在**”。我需要将“2012-01-10”转换为日期格式吗？请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T09:13:41.493

试试这个：

此查询给出您为员工 ID 5 和 7 天的日期期间指定的结果。

```
SELECT emp_id, SUM(rem_amount) 
FROM tbl_empreimburse 
WHERE emp_id='5' AND DATEDIFF('2012-12-31', rem_date) BETWEEN 0 AND 7; 
```

**或者**

下面的查询为您提供所有员工数据。

```
SELECT emp_id, SUM(rem_amount) 
FROM tbl_empreimburse 
GROUP BY emp_id 
HAVING DATEDIFF('2012-12-31', rem_date) BETWEEN 0 AND 7; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T08:28:56.843

检查此[*SQLFIDDLE 参考](http://sqlfiddle.com/#!2/81d48/2)。:)

我不确定您为什么在`group by`这里使用子句...

样品日期：

```
ID  AMOUNT  RDATE
1   3400    January, 01 2012 00:00:00+0000
2   5000    January, 10 2012 00:00:00+0000
3   3000    January, 02 2012 00:00:00+0000
5   1000    January, 05 2012 00:00:00+0000
5   2000    January, 04 2012 00:00:00+0000
2   2000    February, 10 2012 00:00:00+0000 
```

询问：

```
select * from emp
where id = 5; 
```

**这是获取总和的查询**

```
select id, sum(amount)
from emp
where rdate between '2012-01-10' - interval 7 day
and '2012-01-10'
and id = 5
; 
```

结果： **员工 ID 的所有记录 = 5**

```
ID  AMOUNT  RDATE
5   1000    January, 05 2012 00:00:00+0000
5   2000    January, 04 2012 00:00:00+0000 
```

**按员工 ID 计算的金额总和 = 5**

```
ID  SUM(AMOUNT)
5   3000 
```

# jquery - 在 JSP 的 for 循环中添加 Li 元素，但 li a:first ， last 或 nth child 总是给出最后一个元素

> ID：13890489
> 
> 赞同：3
> 
> 时间：2012-12-15T08:04:38.160
> 
> 标签：jquery, css, css-selectors

我是 Jquery 和 CSS 的新手。我正在尝试根据 JSP -for 循环中的某些条件添加 li 元素，如下所示：

```
<ul id="my-criteria-list" >
<%        
for( int i = 0 ; i < mychoices.length ; i++ )
{
  if( i > 0 )
  { 
  %>
   <li class="divider">|</li>  
  <%
  }%>
  <li class="my-criteria"><a href="Landing Page" onclick="goTo(this);"><%=mychoices[i])%></a></li>
    <%
}
  %>       
</ul> 
```

MyChoices 长度为 4，JSP 页面正确显示所有 li 元素。但是当我这样做时

```
 $('li a:first-child').trigger('click'); 
```

甚至

```
 $('li a:nth-child(1)').trigger('click'); 
```

只选择最后一个元素。所以这意味着只有一个元素`<LI>`？我需要触发第一个`<LI>`元素的点击。任何帮助/建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T08:07:41.703

您的代码正在选择第一个孩子`a`而不是父母`li`。您要做的是选择`li`父项中的第一个子项`ul`，然后选择并单击该子项`a`。

尝试这个：

```
$('ul#my-criteria-list li:first-child').find("a").trigger('click'); 
```

# android - 我的 android 应用程序在我的模拟器上运行良好，但在设备中崩溃了

> ID：13890491
> 
> 赞同：-1
> 
> 时间：2012-12-15T08:05:02.260
> 
> 标签：android, crash, ondraw, invalidation

当我在模拟器中运行我的应用程序时，它运行良好，但在我的设备中它崩溃了。

当我打开我的活动并调用该`ondraw`方法时，我认为这`Invalidate();`是问题所在：

```
protected void onDraw(Canvas canvas) {
    // TODO Auto-generated method stub

    getinfoGFX.open();

    String d = "";
    semesterNo = getinfoGFX.getDataSemestersNo(s);
    semestrYear = getinfoGFX.getDataSemestersYear(s);
    semestrId = getinfoGFX.getDataSemestersID(s);

    LastGPA = getinfoGFX.getDataLastGPA(s);
    LastHourse = getinfoGFX.getDataLastHourse(s);
    Type = getinfoGFX.getGPAType(s);

    subAllGrades = getinfoGFX.getdataAllSubjectsGrades(semestrId);
    subAllHourse = getinfoGFX.getdataAllSubjectsHourse(semestrId);

    pText1.setColor(Color.BLACK);
    pText1.setTextSize(35);
    pText1.setTextAlign(Align.CENTER);
    pText1.setTypeface(font);
    pText1.setStyle(Paint.Style.STROKE);
    pText1.setStrokeWidth(5);

    pText2.setColor(Color.BLACK);
    pText2.setTextAlign(Align.CENTER);
    pText2.setTypeface(font);
    pText2.setTextSize(35);
    pText2.setColor(Color.WHITE);
    pText2.setStrokeWidth(0);

    pText3.setColor(Color.BLACK);
    pText3.setTextSize(35);
    pText3.setTextAlign(Align.RIGHT);
    pText3.setTypeface(font);
    pText3.setStyle(Paint.Style.STROKE);
    pText3.setStrokeWidth(5);

    pText4.setColor(Color.BLACK);
    pText4.setTextAlign(Align.RIGHT);
    pText4.setTypeface(font);
    pText4.setTextSize(35);
    pText4.setColor(Color.WHITE);
    pText4.setStrokeWidth(0);

    rect1.setColor(Color.rgb(79, 129, 189));
    rect1.setStrokeWidth(0);
    rect1.setStyle(Paint.Style.FILL_AND_STROKE);
    rect2.setColor(Color.BLACK);
    rect2.setStrokeWidth(0);
    rect2.setStyle(Paint.Style.FILL_AND_STROKE);
    int count = 0;

    canvas.drawColor(Color.alpha(0));
    dy-=10;
    canvas.translate(0, dy);
    for (int i = 0; i < semesterNo.length; i++) {
        float height = (getMeasuredHeight() / 8);
        float startY = (getMeasuredHeight() / 8) * count;
        float semYearStartX = getMeasuredWidth() / 4, semYearStartY = startY, semYearEndX = semYearStartX
                + semYearStartX + semYearStartX, semYearEndY = semYearStartY
                + height;
        float semNoStartX = 0, semNoStartY = semYearEndY, semNoEndX = getMeasuredWidth(), semNoEndY = semNoStartY
                + height;
        float GradeStartX = 0, GradeStartY = semNoEndY, GradeEndX = getMeasuredWidth() / 4, GradeEndY = GradeStartY
                + height;
        float HourseStartX = GradeEndX, HourseStartY = semNoEndY, HourseEndX = getMeasuredWidth() / 2, HourseEndY = GradeStartY
                + height;
        float SubNameStartX = HourseEndX, SubNameStartY = semNoEndY, SubNameEndX = getMeasuredWidth(), SubNameEndY = GradeStartY
                + height;

        canvas.drawRect(GradeStartX, GradeStartY, GradeEndX, GradeEndY,
                rect2);
        canvas.drawRect(GradeStartX + 3, GradeStartY + 3, GradeEndX - 3,
                GradeEndY - 3, rect1);
        canvas.drawRect(HourseStartX, HourseStartY, HourseEndX, HourseEndY,
                rect2);
        canvas.drawRect(HourseStartX + 3, HourseStartY + 3, HourseEndX - 3,
                HourseEndY - 3, rect1);
        canvas.drawRect(SubNameStartX, SubNameStartY, SubNameEndX,
                SubNameEndY, rect2);
        canvas.drawRect(SubNameStartX + 3, SubNameStartY + 3,
                SubNameEndX - 3, SubNameEndY - 3, rect1);
        canvas.drawRect(semNoStartX, semNoStartY, semNoEndX, semNoEndY,
                rect2);
        canvas.drawRect(semNoStartX + 3, semNoStartY + 3, semNoEndX - 3,
                semNoEndY - 3, rect1);
        canvas.drawRect(semYearStartX, semYearStartY, semYearEndX,
                semYearEndY, rect2);
        canvas.drawRect(semYearStartX + 3, semYearStartY + 3,
                semYearEndX - 3, semYearEndY - 3, rect1);

        canvas.drawText("السنة رقم" + semestrYear[i],
                (semYearEndX + semYearStartX) / 2,
                (semYearEndY + semYearStartY) / 2, pText1);
        canvas.drawText("السنة رقم" + semestrYear[i],
                (semYearEndX + semYearStartX) / 2,
                (semYearEndY + semYearStartY) / 2, pText2);

        canvas.drawText("الفصل الدراسي " + semesterNo[i], semNoEndX,
                (semNoStartY + semNoEndY) / 2, pText3);
        canvas.drawText("الفصل الدراسي " + semesterNo[i], semNoEndX,
                (semNoStartY + semNoEndY) / 2, pText4);

        canvas.drawText("الدرجة", (GradeStartX + GradeEndX) / 2,
                (GradeStartY + GradeEndY) / 2 + 15, pText1);
        canvas.drawText("الدرجة", (GradeStartX + GradeEndX) / 2,
                (GradeStartY + GradeEndY) / 2 + 15, pText2);

        canvas.drawText("الساعات", (HourseEndX + HourseStartX) / 2,
                (HourseEndY + HourseStartY) / 2 + 15, pText1);
        canvas.drawText("الساعات", (HourseEndX + HourseStartX) / 2,
                (HourseEndY + HourseStartY) / 2 + 15, pText2);

        canvas.drawText("اسم المادة", (SubNameEndX + SubNameStartX) / 2,
                (SubNameEndY + SubNameStartY) / 2 + 15, pText1);
        canvas.drawText("اسم المادة", (SubNameEndX + SubNameStartX) / 2,
                (SubNameEndY + SubNameStartY) / 2 + 15, pText2);
        subjectsId = getinfoGFX.getdataSubjectsID(semestrId[i]);
        semesterF = getinfoGFX.getdataSemesterIdF(semestrId[i]);
        subName = getinfoGFX.getdataSubjectsName(semestrId[i]);
        subHourse = getinfoGFX.getdataSubjectsHourse(semestrId[i]);
        subGrades = getinfoGFX.getdataSubjectsGrades(semestrId[i]);
        count++;
        for (int k = 0; k < subName.length; k++) {

            startY = (getMeasuredHeight() / 8) * count;
            semYearStartX = getMeasuredWidth() / 4;
            semYearStartY = startY;
            semYearEndX = semYearStartX + semYearStartX + semYearStartX;
            semYearEndY = semYearStartY + height;
            semNoStartX = 0; 
            semNoStartY = semYearEndY;
            semNoEndX = getMeasuredWidth();
            semNoEndY = semNoStartY+ height;
            GradeStartX = 0;
            GradeStartY = semNoEndY;
            GradeEndX = getMeasuredWidth() / 4;
            GradeEndY = GradeStartY+ height;
            HourseStartX = GradeEndX;
            HourseStartY = semNoEndY; 
            HourseEndX = getMeasuredWidth() / 2; 
            HourseEndY = GradeStartY + height;
            SubNameStartX = HourseEndX;
            SubNameStartY = semNoEndY;
            SubNameEndX = getMeasuredWidth();
            SubNameEndY = GradeStartY+ height;

            canvas.drawRect(GradeStartX, GradeStartY, GradeEndX, GradeEndY,
                    rect2);
            canvas.drawRect(GradeStartX + 3, GradeStartY + 3, GradeEndX - 3,
                    GradeEndY - 3, rect1);
            canvas.drawRect(HourseStartX, HourseStartY, HourseEndX, HourseEndY,
                    rect2);
            canvas.drawRect(HourseStartX + 3, HourseStartY + 3, HourseEndX - 3,
                    HourseEndY - 3, rect1);
            canvas.drawRect(SubNameStartX, SubNameStartY, SubNameEndX,
                    SubNameEndY, rect2);
            canvas.drawRect(SubNameStartX + 3, SubNameStartY + 3,
                    SubNameEndX - 3, SubNameEndY - 3, rect1);

            canvas.drawText(subGrades[k], (GradeStartX + GradeEndX) / 2,
                    (GradeStartY + GradeEndY) / 2 + 15, pText1);
            canvas.drawText(subGrades[k], (GradeStartX + GradeEndX) / 2,
                    (GradeStartY + GradeEndY) / 2 + 15, pText2);

            canvas.drawText(subHourse[k], (HourseEndX + HourseStartX) / 2,
                    (HourseEndY + HourseStartY) / 2 + 15, pText1);
            canvas.drawText(subHourse[k], (HourseEndX + HourseStartX) / 2,
                    (HourseEndY + HourseStartY) / 2 + 15, pText2);

            canvas.drawText(subName[k], (SubNameEndX + SubNameStartX) / 2,
                    (SubNameEndY + SubNameStartY) / 2 + 15, pText1);
            canvas.drawText(subName[k], (SubNameEndX + SubNameStartX) / 2,
                    (SubNameEndY + SubNameStartY) / 2 + 15, pText2);
            count++;
        }
        count+=subName.length+1;

    }
    getinfoGFX.close();
    canvas.drawText(LastGPA, getMeasuredWidth()/2, getMeasuredHeight()/2, pText1);
    canvas.drawText(LastGPA, getMeasuredWidth()/2, getMeasuredHeight()/2, pText2);
    invalidate();

    super.onDraw(canvas);

} 
```

当我删除该`invalidate();`行时，它不会崩溃，但我需要在我的应用程序中使用它。

**更新：**这是错误日志

```
 12-15 13:25:17.765: E/AndroidRuntime(4096): FATAL EXCEPTION: main
12-15 13:25:17.765: E/AndroidRuntime(4096): android.database.CursorWindowAllocationException: Cursor window allocation of 2048 kb failed. # Open Cursors=752 (# cursors opened by this proc=752)
12-15 13:25:17.765: E/AndroidRuntime(4096):     at android.database.CursorWindow.<init>(CursorWindow.java:108)
12-15 13:25:17.765: E/AndroidRuntime(4096):     at android.database.CursorWindow.<init>(CursorWindow.java:100)
12-15 13:25:17.765: E/AndroidRuntime(4096):     at android.database.AbstractWindowedCursor.clearOrCreateWindow(AbstractWindowedCursor.java:198)
12-15 13:25:17.765: E/AndroidRuntime(4096):     at android.database.sqlite.SQLiteCursor.clearOrCreateWindow(SQLiteCursor.java:289)
12-15 13:25:17.765: E/AndroidRuntime(4096):     at android.database.sqlite.SQLiteCursor.fillWindow(SQLiteCursor.java:139)
12-15 13:25:17.765: E/AndroidRuntime(4096):     at android.database.sqlite.SQLiteCursor.getCount(SQLiteCursor.java:133)
12-15 13:25:17.765: E/AndroidRuntime(4096):     at android.database.AbstractCursor.moveToPosition(AbstractCursor.java:196)
12-15 13:25:17.765: E/AndroidRuntime(4096):     at android.database.AbstractCursor.moveToFirst(AbstractCursor.java:236)
12-15 13:25:17.765: E/AndroidRuntime(4096):     at com.example.gpa.dataBase.getdataSemesterIdF(dataBase.java:453)
12-15 13:25:17.765: E/AndroidRuntime(4096):     at com.example.gpa.semestersGFX.onDraw(semestersGFX.java:162)
12-15 13:25:17.765: E/AndroidRuntime(4096):     at android.view.View.draw(View.java:13767)
12-15 13:25:17.765: E/AndroidRuntime(4096):     at android.view.View.getDisplayList(View.java:12718)
12-15 13:25:17.765: E/AndroidRuntime(4096):     at android.view.View.getDisplayList(View.java:12762)
12-15 13:25:17.765: E/AndroidRuntime(4096):     at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:3151)
12-15 13:25:17.765: E/AndroidRuntime(4096):     at android.view.View.getDisplayList(View.java:12654)
12-15 13:25:17.765: E/AndroidRuntime(4096):     at android.view.View.getDisplayList(View.java:12762)
12-15 13:25:17.765: E/AndroidRuntime(4096):     at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:3151)
12-15 13:25:17.765: E/AndroidRuntime(4096):     at android.view.View.getDisplayList(View.java:12654)
12-15 13:25:17.765: E/AndroidRuntime(4096):     at android.view.View.getDisplayList(View.java:12762)
12-15 13:25:17.765: E/AndroidRuntime(4096):     at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:3151)
12-15 13:25:17.765: E/AndroidRuntime(4096):     at android.view.View.getDisplayList(View.java:12654)
12-15 13:25:17.765: E/AndroidRuntime(4096):     at android.view.View.getDisplayList(View.java:12762)
12-15 13:25:17.765: E/AndroidRuntime(4096):     at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:3151)
12-15 13:25:17.765: E/AndroidRuntime(4096):     at android.view.View.getDisplayList(View.java:12654)
12-15 13:25:17.765: E/AndroidRuntime(4096):     at android.view.View.getDisplayList(View.java:12762)
12-15 13:25:17.765: E/AndroidRuntime(4096):     at android.view.HardwareRenderer$GlRenderer.draw(HardwareRenderer.java:1144)
12-15 13:25:17.765: E/AndroidRuntime(4096):     at android.view.ViewRootImpl.draw(ViewRootImpl.java:2275)
12-15 13:25:17.765: E/AndroidRuntime(4096):     at android.view.ViewRootImpl.performDraw(ViewRootImpl.java:2147)
12-15 13:25:17.765: E/AndroidRuntime(4096):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1958)
12-15 13:25:17.765: E/AndroidRuntime(4096):     at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1112)
12-15 13:25:17.765: E/AndroidRuntime(4096):     at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4518)
12-15 13:25:17.765: E/AndroidRuntime(4096):     at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
12-15 13:25:17.765: E/AndroidRuntime(4096):     at android.view.Choreographer.doCallbacks(Choreographer.java:555)
12-15 13:25:17.765: E/AndroidRuntime(4096):     at android.view.Choreographer.doFrame(Choreographer.java:525)
12-15 13:25:17.765: E/AndroidRuntime(4096):     at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
12-15 13:25:17.765: E/AndroidRuntime(4096):     at android.os.Handler.handleCallback(Handler.java:615)
12-15 13:25:17.765: E/AndroidRuntime(4096):     at android.os.Handler.dispatchMessage(Handler.java:92)
12-15 13:25:17.765: E/AndroidRuntime(4096):     at android.os.Looper.loop(Looper.java:137)
12-15 13:25:17.765: E/AndroidRuntime(4096):     at android.app.ActivityThread.main(ActivityThread.java:4898)
12-15 13:25:17.765: E/AndroidRuntime(4096):     at java.lang.reflect.Method.invokeNative(Native Method)
12-15 13:25:17.765: E/AndroidRuntime(4096):     at java.lang.reflect.Method.invoke(Method.java:511)
12-15 13:25:17.765: E/AndroidRuntime(4096):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1008)
12-15 13:25:17.765: E/AndroidRuntime(4096):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:775)
12-15 13:25:17.765: E/AndroidRuntime(4096):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T08:20:52.043

**编辑：** 查看错误日志，看起来您的问题出在`getinfoGFX`课堂上。在您的`getdata...`方法中，您似乎正在为 SQL 查询创建游标。检查以确保`close()`在退出之前调用光标上的方法。

* * *

对 Invalidate() 的调用是一个问题。在我看到日志之前不确定它是否会导致崩溃，但您基本上是在将其设置为连续重绘。从 android 文档 Invalidate 执行以下操作 -

> 使整个视图无效。如果视图可见，onDraw(android.graphics.Canvas) 将在未来的某个时间点被调用。这必须从 UI 线程调用。

如果您在执行操作时从 onDraw 例程内部调用它，则可以使 onDraw 函数始终运行。

# frameworks - 创建第一个 Zend Framework 2 项目的问题

> ID：13890493
> 
> 赞同：0
> 
> 时间：2012-12-15T08:05:09.573
> 
> 标签：frameworks, zend-framework2

ZF 2 在 MAMP 上运行。目前，我阅读了 Forrest Lyman 的“Pro Zend 框架技术：构建完整的 CMS 项目”。

如果我在 Firefox 中调用该项目，我会得到 ZF 2 欢迎页面。福雷斯特写道：

> > 首先需要更新 application/configs/application.ini，将布局资源添加到生产部分，如清单 2-7 所示。

清单 2-7。将布局资源添加到 application/configs/application.ini

resources.layout.layoutPath = APPLICATION_PATH "/layouts/scripts" <<

模块文件夹包含一个应用程序文件夹。但是没有 configs 文件夹，也没有 application.ini。

我必须创建它吗？

ZF1和ZF2有区别吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T08:23:33.200

ZF 1 和 ZF 2 之间存在巨大差异。我相信那本书是使用 ZF1.8 编写的。所以你最好使用 ZF 1 的版本。如果你使用的版本比 1.10 更新，那么本书的原始代码在某些地方可能无法按预期工作。

在大多数情况下，那本书中的代码仍然非常好，书中的信息也很好，尽管如果您在尝试练习之前具备 ZF 1 的工作知识会更好。这是一本中级水平的书。首先尝试[Zend Framework in Action](http://www.zendframeworkinaction.com/)或至少[Rob Allen 的教程](http://akrabat.com/zend-framework-tutorial/)。

# paypal - PayPal 部分授权总是被拒绝

> ID：13890496
> 
> 赞同：0
> 
> 时间：2012-12-15T08:06:16.723
> 
> 标签：paypal

**问题**：我已经实现了“部分授权”（第 72 页），但是每当我尝试运行可以使用它的事务时，结果都是拒绝。

**设置**：我正在使用带有 PayPal Payment Pro Payflow Edition（又名 PayFlow Pro Gateway 和 PayPal Merchant Account）的 API 处理交易。

**交易中使用的卡**：Visa 礼品卡和美国运通礼品卡。此功能适用于礼品卡和其他预付费产品。PayPal 的文档示例中特别提到了礼品卡。

**交易日志**：

这是被拒绝的部分授权的日志。申请的原始金额为 25.00 美元，尽管这张签证礼品卡上只有 2.00 美元。我应该已经收到了 2.00 美元的批准金额的回复。相反，我得到了下降。

```
-> PARTIALAUTH:Y TENDER:C ACCT:**** VERBOSITY:HIGH TRXTYPE:A EXPDATE:0618 AMT:25.00
<- RESULT:12 CARDTYPE:0 PROCAVS:G IAVS:N PROCCVV2:I EXPDATE:0618 RESPMSG:Declined: 15005-This transaction cannot be processed. LASTNAME:NotProvided ACCT:**** AMT:25.00 PNREF:************ AVSZIP:X AVSADDR:X HOSTCODE:15005 TRANSTIME:2012-12-14 12:43:04 CVV2MATCH:X 
```

作为比较，当我以低于卡上金额的金额运行同一张卡时，它没有问题：

```
-> TENDER:C VERBOSITY:HIGH ACCT:**** AMT:.11 TRXTYPE:A EXPDATE:0618 PARTIALAUTH:Y
<- AMT:0.11 AVSZIP:X PPREF:***************** ACCT:**** AUTHCODE:111111 TRANSTIME:2012-12-14 12:41:46 LASTNAME:NotProvided IAVS:N PROCAVS:G RESPMSG:Approved PNREF:************ RESULT:0 EXPDATE:0618 PROCCVV2:I CARDTYPE:0 AVSADDR:X CVV2MATCH:X CORRELATIONID:*************

-> TENDER:C ORIGID:************ TRXTYPE:D
<- RESULT:0 PENDINGREASON:completed PNREF:************ FEEAMT:0.11 PAYMENTTYPE:instant RESPMSG:Approved PPREF:************ CORRELATIONID:************* 
```

我相信 API 调用在这两种情况下应该并且实际上是相同的。部分授权的要点是你不知道什么时候需要它，所以如果你想要它，应该为所有交易启用它——这意味着你总是附加两个额外的参数`VERBOSITY=HIGH`and 和`PARTIALAUTH=Y`。

任何想法为什么这不起作用。该功能对我的应用程序非常重要，也是我使用 PayPal 的主要原因之一。

我希望我错过了一些简单的东西，比如 manager.paypal.com 中的设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T20:40:55.347

从我可以看到你做的一切都是正确的。当发生这种情况时，您唯一能做的就是直接联系 PayPal。

您可以通过 www.paypal.com/mts 进行操作，或者如果您登录到您的 PayPal 帐户并进入通过电话联系部分，您应该会直接看到一个单独的电话号码以获取技术支持。

我建议向 MTS 提交一张票，然后再打电话，但是当你打电话时，请他们参考你的票。无论如何，他们都会希望您发布一个，但如果您只这样做，很可能暂时不会得到答复，不幸的是。不过，我很幸运能在电话中找到他们，并且可以通过这种方式更快地完成工作。

The only thing I can think of that might be an issue here is that you're using the PayFlow gateway with PayPal as your merchant. While the PayFlow gateway supports this, PayPal may not. It may only work if you're using a 3rd party merchant account on the PayFlow gateway.

That's something they will need to confirm or deny as I haven't specifically tested this myself, but again, I don't see that you're doing anything incorrectly.

# javascript - 在 Chrome 控制台中递归运行 SetTimeout？

> ID：13890497
> 
> 赞同：-2
> 
> 时间：2012-12-15T08:06:17.820
> 
> 标签：javascript

> **可能重复：**
> [Javascript setTimeout 函数重复](https://stackoverflow.com/questions/13268385/javascript-settimeout-function-repeat)

我按 CTRl-SHIFT-J 进入控制台。然后我输入：

```
window.setTimeout(function() { alert(1985); } , 1000); 
```

它执行一次警报，然后输出显示：

```
window.setTimeout(function() { alert(2); } , 1000);
4 
```

即之后的一些数字。但它不会像我想要的那样重复警报并每秒弹出一个 2。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T08:11:01.887

`setTimeout`- 一次
`setInterval`- 重复

# git - 为什么我无法将 Git Url 添加到我的 Jenkins？

> ID：13890500
> 
> 赞同：3
> 
> 时间：2012-12-15T08:06:44.790
> 
> 标签：git, jenkins, bitbucket

我对 git 和 Jenkins 都很陌生。

当我这样做时，我将`ssh`密钥添加到了 bitbucket 和本地计算机中：

```
git clone git@bitbucket.org:username/repo.git 
```

我可以克隆。

但是，当我将相同的 url ( `git@bitbucket.org:username/repo.git`) 添加到 Jenkins 存储库 url 时，我收到以下错误：

```
Failed to connect to repository : Command "git ls-remote -h git@bitbucket.org:username/repo.git HEAD" returned status code 128:
stdout: 
stderr:  Permission denied (publickey). 
fatal: The remote end hung up unexpectedly 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-15T08:44:36.623

您还需要为 Jenkins 用户设置 ssh 密钥。

一般的想法是您登录 Jenkins 框，并成为“jenkins”用户。你可以给你的 Jenkins 用户打电话，所以一定要使用正确的名字。一旦您成为 Jenkins 用户，您就可以使用它`ssh-keygen`来创建一组新的 ssh 密钥。然后您可以将它们作为[部署密钥](http://blog.bitbucket.org/2012/06/20/deployment-keys/)添加到您的存储库中。

这也可能有用：[Configuring Jenkins with Bitbucket](https://stackoverflow.com/questions/12096942/configuring-jenkins-with-bitbucket)

# java - 将文本框值传递给 servlet

> ID：13890509
> 
> 赞同：-2
> 
> 时间：2012-12-15T08:08:20.237
> 
> 标签：java, jsp, servlets

在我的 JSP 中，我有一个包含地址路径的文本框。我需要将此地址值传递给`Servlet`. 如何将文本框值传递给 servlet？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T08:32:02.073

```
<html>
  <head>
    <title>Testing JSP</title>
  </head>
  <body>
    <h1>Welcome to JSP</h1>
    <form action="myjsp.jsp" method="POST" >
            <input type="text" name="name" />
      <p> 
        <input type="submit" name="Submit" value="Submit name" />

      </p>
    </form>
  </body>
</html>

<%
    String name = request.getParameter("name");

%> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T08:26:04.300

我认为您需要使用 Request 对象来获取该值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T08:31:19.477

**我的.jsp**

```
<form name="myForm" action="myServlet" method="post">
<input type="text" name="mytext" />
<input type="submit" name="Submit" value="Submit name" />
</form> 
```

在您的页面中编写上述代码`jsp`（即**my.jsp**）。

**我的Servlet.java**

```
PrintWriter out = response.getWriter();
String text = request.getParameter("mytext");
 out.println(text); 
```

上面的代码将写在您的`servlet`页面中（即**myServlet.java**）。

**注意： -**`action`根据您的更改表格`servlet`。就我而言，我在这里写了**myServlet**。

# ios - 固定分组 UITableView 中的边距？

> ID：13890522
> 
> 赞同：1
> 
> 时间：2012-12-15T08:11:22.697
> 
> 标签：ios, uitableview

我有一个与分组样式的 UITableView 相关的问题。在我的应用程序的一个特殊视图中，表格视图需要在表格内容（部分）周围有一个固定的边距。默认情况下，UITableView 会根据表格宽度更改此边距。现在这是我的问题。我想实现这个边距在改变表格宽度时不会改变。

我已经通过继承 UITableViewCell 并覆盖 layoutSubviews 方法来管理它以设置固定的左/右边距。但是顶部/底部边距仍然与表格宽度有关。

谁能帮我解决这个问题？

问候马努

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T10:27:32.063

可能使 table.frame.size.height 更大（并用新高度的一半补偿 origin.y）会起作用。您还应该使用表格的 scrollIndicatorInsets 方法来固定滚动条位置，使其不进入不可见部分。

# html - 如何将html组件放在顶部边框上 元素

> ID：13890526
> 
> 赞同：2
> 
> 时间：2012-12-15T08:12:51.260
> 
> 标签：html

我想在我的表单周围创建边框，还想在我的表单周围创建的顶部边框线上放置一些 HTML 组件。检查我创建的示例表单和在顶部边界线上重叠的单选按钮。您能否指导我如何实现类似类型的输出。

--- O 家 O 办公室 ---------------------------------
|                            ***_* __ *_* __ *_* __ *_* __ *_* __ *_***            |
| 地址： | | |
| | | |
| | | |
| | ***_* __ *_* __ *_* __ *_* __ *_* ___****| |
|* ****__ *_* __ *_* __ *_* __ *_* __ *_* _**             |
| 电话号码： | ***_* __ *_* __ *_* __ *_* __ *_* ____** | |
| |
|------------------------------------------------- --------*** 

 **** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T08:17:50.393

你可以使用一个[`<fieldset>`](https://developer.mozilla.org/en-US/docs/HTML/Element/fieldset)和[`<legend>`](https://developer.mozilla.org/en-US/docs/HTML/Element/legend)

```
<form>
  <fieldset>
    <legend><input type="radio" name="location"> home  <input type="radio" name="location"> office</legend>
    form elements
 </fieldset>
<form> 
```

[**演示**](http://jsfiddle.net/kbyC4/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T08:21:23.943

```
 <form>
     <fieldset>
      <legend><input type=radio> home  <input type=radio> office</legend>

    Address: <input type="text"><br>

    Phone No: <input type="tel" ><br>

     </fieldset>
    </form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T08:16:18.720

html中的使用`Fieldset`和标签`legend`***

# c++ - 导致分段错误的avl树的实现

> ID：13890528
> 
> 赞同：0
> 
> 时间：2012-12-15T08:12:55.783
> 
> 标签：c++, algorithm, templates, struct

我正在尝试实现一个 avl 树。这是我第一次这样做，所以我的代码充满了错误。例如，当我在 avl 树中插入一个元素时，它会导致分段错误。更具体地说，我第一次在树上插入一个元素是可以的，但是第二次插入会导致运行时错误。这是我的代码：

**avl_tree.hpp**

```
template< class key_t, class compare_t=std::less< key_t > >
struct avl_tree {
private:
  struct node {
    node *l, *r;
    int h, size;
    key_t key;
    node( key_t k ) : l( 0 ), r( 0 ), h( 1 ), size( 1 ), key( k ) {}
    void u() {
      h=1+std::max( ( l?l->h:0 ), ( r?r->h:0 ) );
      size=( l?l->size:0 ) + ( r?r->size:0 ) + 1;
    }
  } *root;
  compare_t cmp;

  node* rotl( node *x ) {
    node *y=x->r;
    x->r=y->l;
    y->l=x;
    x->u(); y->u();
    return y;
  }
  node* rotr( node *x ) {
    node *y=x->l;
    x->l=y->r;
    y->r=x;
    x->u(); y->u();
    return y;
  }
  node* balance( node *x ) {
    x->u();
    if( x->l->h > 1 + x->r->h ) {
      if( x->l->l->h < x->l->r->h ) x->l = rotl( x->l );
      x = rotr( x );
    } else if( x->r->h > 1 + x->l->h ) {
      if( x->r->r->h < x->r->l->h ) x->r = rotr( x->r );
      x = rotl( x );
    }
    return x;
  }
  node* _insert( node *t, key_t k ) {
    if( t==NULL ) return new node( k );
    if( cmp( k, t->key ) ) { std::cout<<"going left."<<std::endl; t->l = _insert( t->l, k ); }
    else { std::cout<<"going right."<<std::endl; t->r = _insert( t->r, k ); }
    std::cout << "calling balance." << std::endl;
    return balance( t );
  }
  void _inorder( node *t ) {
    if( t ) {
      _inorder( t->l );
      std::cout << t->key << " ";
      _inorder( t->r );
    }
  }
public:
  avl_tree() : root( 0 ) {}

  void insert( key_t k ) { 
    root = _insert( root, k );
  }
  void inorder() { _inorder( root ); }
}; 
```

**主文件**

```
#include <iostream>
#include "avl_tree.hpp"

using namespace std;

int main() {
  avl_tree< int > avl;
  for( int i=0; i<5; ++i ) {
    int tmp;
    scanf( "%d", &tmp );
    avl.insert( tmp );
  }
  avl.inorder();

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T08:36:41.723

发表评论作为答案：
崩溃的可能原因在于`balance`方法，当访问`l`和`r`成员时`node`。当树中只有 2 个节点时，其中一个是可能的`NULL`，因此添加`NULL`-check（就像在方法中完成的方式一样`u`）可能会有所帮助。

旁注：要`scanf`在代码中使用，您需要包含`<cstdio>`，或者更好的是，您可以使用`cin`to read `tmp`。

希望这可以帮助！

# javascript - 无法让空气应用程序加载项目中包含的 html 文件

> ID：13890538
> 
> 赞同：0
> 
> 时间：2012-12-15T08:14:30.710
> 
> 标签：javascript, apache-flex, air, flashdevelop

我想在我的空中应用程序中使用 JavaScript，但无法让空中应用程序加载本地（包含）html 文件。

这是html文件的内容：

```
<html>
<head>
<script>
function setHeader(st) {
    document.getElementById('hiTitle').innerHTML = st;
}
</script>
</head>
<body>
<h1 id="hiTitle">Hello there</h1>
</body>
</html> 
```

这是 mxml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<mx:WindowedApplication xmlns:mx="http://www.adobe.com/2006/mxml">
    <mx:Script>
    <![CDATA[
    private function tracehtml():void {
        trace(htmlZ);
        htmlZ.htmlLoader.window.setHeader("never works");
    }
    ]]>
    </mx:Script>

    <mx:Panel x="10" y="10" width="252" height="100%"
    layout="absolute" title="The local html file">
        <mx:HTML
            id="htmlZ"
            location="script.html"
            enabled="true"
            paddingLeft="4"
            paddingRight="4"
            width="100%" height="100%"/>
    </mx:Panel>

    <mx:Button x="270" y="65" label="Highlight &gt;&gt;"
        click="tracehtml()"/>

</mx:WindowedApplication> 
```

如果我像这样更改 mx:html 的位置： location="http://labs.adobe.com/"

它确实显示了 html，两个文件都位于同一目录中。

在构建项目时，将 flex 4.6 sdk 与 flashbuilder 一起使用，不会出现错误或警告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T13:44:38.567

flashbuilder 的答案很简单。将 html 文件和 js 文件放在名为 assets 的文件夹中，并将该文件夹放在应用程序的 bin 目录中。

现在，当使用 F5(Projcet => Test Project) 运行 air 应用程序时，它可以工作了。

在项目文件夹中有一个名为 bat 的文件夹。我检查了 bat 文件，Packager 将工作目录更改为 bin，然后告诉 adt (Adobe Air Developer Tool) 将所有内容包含在当前目录 (=bin) 中。

打开命令提示符并转到项目文件夹，然后键入以下命令：

```
bat\SetupSDK.bat
bat\CreateCertificate.bat
(wait a minute)
bat\SetupApplication.bat
bat\Packager.bat 
```

对于那些不使用 flashbuilder 的人，adt 命令如下（项目名称是 google）：

```
adt -package  -storetype pkcs12 -keystore "bat\Google.p12" -storepass fd air\Google.air application.xml -C bin . 
```

现在在 air 文件夹下创建了一个 air 文件，用 winrar 打开它（它是一个 zip 文件）并确认 assets 目录在那里。

双击文件启动安装程序，打开已安装的应用程序后，它以及在 flashdevelop 中测试时都可以工作。

# sql - 基于同一张表的另一列的sql表中一列的数据更新

> ID：13890539
> 
> 赞同：2
> 
> 时间：2012-12-15T08:15:00.960
> 
> 标签：sql, database

我有 2 个表，其中 sql 中有 4 列和 5 列，第 1 个表中有 4 列，如 ID - Parant - Position - Assign Id (ID+Position)

在第二个表五列中，如分配 ID - ID - L1- L2- L3

根据分配 id 和 ID 列从第一个表 L1、L2、L3 分配 id 和 ID 自动更新

我想查询 L1 列以更新数据，如此过程

在assign Id列中查找（ID + Left），如果与记录匹配，则从ID列中复制与assign Id匹配的记录并粘贴到L1列

请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T08:37:32.643

您可以使用 update with join 来更新表列。

示例：[http ://sqlfiddle.com/#!2/07622](http://sqlfiddle.com/#!2/07622)

# java - 使用非 Comparable 类创建 TreeSet：为什么会出现运行时异常，而不是编译时错误？

> ID：13890542
> 
> 赞同：16
> 
> 时间：2012-12-15T08:15:54.757
> 
> 标签：java, generics, treeset

如果我创建一个未实现 Comparable 的任意类，并尝试将其用作树集，则在插入对象时它会在运行时引发异常：

```
public class Foo {
}

public TreeSet<Foo> fooSet = new TreeSet<Foo>();
fooSet.add(new Foo()); // Throws a ClassCastException exception here: Foo is not comparable 
```

我不是 Java 专家，但是这方面的某些东西似乎是以一种我没有预料到的方式动态输入的（ala Python）。TreeSet 的实现有没有办法指定它的泛型类型参数必须实现 Comparable 以便可以在编译时捕获？非泛型函数可以将接口作为参数；泛型是不可能的吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-15T08:19:07.023

`TreeSet`以这种方式实现，因为您可以[选择提供](https://docs.oracle.com/javase/8/docs/api/java/util/TreeSet.html#TreeSet-java.util.Comparator-)a [`Comparator`](http://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html)，在这种情况下，元素不需要是[`Comparable`](http://docs.oracle.com/javase/8/docs/api/java/lang/Comparable.html). 在不将实现拆分为多个类的情况下支持这两种行为的唯一方法是包含运行时检查——这只是该类作者的设计决定。

公开工厂方法`TreeSet`而不是公共构造函数本来是一种使用更严格的泛型类型约束来维护编译时检查的方法，但这将打破核心集合 API 为其公开公共无参数和复制构造函数的约定实现类。正如您在评论中指出的那样，[番石榴](https://github.com/google/guava)的收藏品走的是工厂路线，恕我直言，它更适合它。

# iphone - Cocos2d：关闭邮件编辑器视图后应用程序崩溃

> ID：13890547
> 
> 赞同：0
> 
> 时间：2012-12-15T08:16:44.883
> 
> 标签：iphone, ios, cocos2d-iphone

在我的应用程序中，我有 7 个按钮，按下向下箭头后，我在该视图中显示 3 个按钮，它显示其他 3 个按钮

1.Facebook 分享 2.twitter 分享 3.告诉朋友 4.报告 5.入门指南 6.访问我的网站 7.反馈

```
 LIKE THIS MY VIEW
    ====================
          ^        ---->up arrow

      facebook share

      Twitter share

      Tell a friend

           V      ---->down arrow 
```

我正在使用 mailcomposerview 作为“告诉朋友”按钮和“报告”按钮

当我按下“告诉朋友”或“报告”按钮时，它会在关闭后打开 mailcomposerview，我无法移动向上和向下箭头......如果我按下向上和向下箭头，它会打开相同的邮件 composerview ，它也没有打开 facebook 分享和 twitter 分享

请帮我解决这个问题

## 按下箭头时我的编码

```
 -(void)arrTapped1:(id)sender
 {
CCMenuItem *item2=(CCMenuItem*)sender;
int k=item2.tag;
    ////CCLOG(@"k tapp=%dhelp=%d",k,helpVal);

    NSLog(@"HelpVal%i",helpVal);
if(k==51)
{
    if(helpVal<3)
    { 
        id action1=[CCMoveBy actionWithDuration:0.3 position:ccp(0,+260)];
        id callfun1=[CCCallFunc actionWithTarget:self selector:@selector(enabled1) ]; 

        [item2 setIsEnabled:YES];
        [(CCSprite*)[self getChildByTag:10] runAction:[CCSequence actions:action1,callfun1,nil]];
        [self performSelector:@selector(downWardsMove)];
            }

}
else //if(k==50)
        {
    if(helpVal>1)
    {  

        id action1=[CCMoveBy actionWithDuration:0.3 position:ccp(0,-260)];
        id callfun1=[CCCallFunc actionWithTarget:self selector:@selector(enabled1) ]; 
        [item2 setIsEnabled:YES];

        [(CCSprite*)[self getChildByTag:10] runAction:[CCSequence actions:action1,callfun1,nil]];
        [self performSelector:@selector(upWardsMove)];
    }   } }

    //code for upwards & downwards move
    //--------------------------------

  -(void)upWardsMove
   {
      [upArrItem setIsEnabled:NO];
  [downArrItem setIsEnabled:NO];
  self.isTouchEnabled=NO;
  helpVal--;
  [(CCMenu*)[self getChildByTag:53] setVisible:YES];
  [downArrItem setIsEnabled:YES];
      if(helpVal==1)
  {
    [(CCMenu*)[self getChildByTag:52] setVisible:NO];
    [upArrItem setIsEnabled:NO];
  } 
   }

-(void)downWardsMove
 {
    [upArrItem setIsEnabled:NO];
[downArrItem setIsEnabled:NO];
self.isTouchEnabled=NO;
    helpVal++;
    [(CCMenu*)[self getChildByTag:52] setVisible:YES];
[upArrItem setIsEnabled:YES];
if(helpVal==3){
    [(CCMenu*)[self getChildByTag:53] setVisible:NO];
    [downArrItem setIsEnabled:NO];
}
}
 -(void)enabled1
  {
self.isTouchEnabled=YES;
[upArrItem setIsEnabled:YES];
[downArrItem setIsEnabled:YES];
if(helpVal==3)
{
    [(CCMenu*)[self getChildByTag:53] setVisible:NO];
    [downArrItem setIsEnabled:NO];
}
if(helpVal==1)
{
    [(CCMenu*)[self getChildByTag:52] setVisible:NO];
    [upArrItem setIsEnabled:NO];
}
   }

 //sending mail code
//------------------

-(void)sendMail
{
  mailComposer = [[UIViewController alloc] init];
  [[[CCDirector sharedDirector] openGLView] addSubview:mailComposer.view];
  MFMailComposeViewController *mailController= [[MFMailComposeViewController alloc] init];                
  mailController.mailComposeDelegate = self;    
  [mailController setSubject:msgSubject];
  [mailController setMessageBody:mailContent isHTML:YES];
  NSArray *toRecipients = [NSArray arrayWithObject:@"Info@ask.com"];
  [mailController setBccRecipients:toRecipients];
  [mailComposer presentModalViewController:mailController animated:NO];
  mailComposer.view.transform = CGAffineTransformMakeRotation( CC_DEGREES_TO_RADIANS(90.0f ) );
  [mailController release];
  [[CCDirector sharedDirector] setDeviceOrientation: kCCDeviceOrientationLandscapeRight]     
  }

 -(void)mailComposeController:(MFMailComposeViewController*)mailController didFinishWithResult: (MFMailComposeResult)result  error:(NSError*)error
 {
    [mailComposer dismissModalViewControllerAnimated:YES];
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T08:57:42.310

这是我在应用程序中使用的代码的一部分，它在 iOS 4.0 - iOS 6.0 中运行良好。看一看：

```
-(void)sendMessageToEmail:(NSString *)message withSubject:(NSString *)subject
{
    if([self _isIOS6andHigher]) {

        NSArray *activities = @[message];
        UIActivityViewController *viewController = [[UIActivityViewController alloc] initWithActivityItems:activities applicationActivities:nil];

        AppController *app = (AppController*) [[UIApplication sharedApplication] delegate];
        [[app navController] presentViewController:viewController animated:YES completion:nil];
        [viewController release];

    } else {

        MFMailComposeViewController* mailController = [[MFMailComposeViewController alloc] init];
        mailController.mailComposeDelegate = self;
        [mailController setSubject:subject];
        [mailController setMessageBody:message isHTML:NO];

        AppController *app = (AppController*) [[UIApplication sharedApplication] delegate];
        [[app navController] presentModalViewController:mailController animated:YES];
        [mailController release];
    }
}

- (void)mailComposeController:(MFMailComposeViewController*)controller
      didFinishWithResult:(MFMailComposeResult)result
                    error:(NSError*)error
{
    [controller dismissModalViewControllerAnimated:YES];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T14:40:15.153

你永远不会发布 mailComposer：

```
mailComposer = [[UIViewController alloc] init]; 
```

这可能会导致它泄漏并作为视图保持活动状态。这可以解释缺少触摸事件的原因，因为邮件编写器可能仍会拦截触摸。

# android - 从 Android 模拟器连接到 MYSQL 数据库错误

> ID：13890548
> 
> 赞同：-1
> 
> 时间：2012-12-15T08:16:48.143
> 
> 标签：android

我正在尝试在 mysql 数据库中插入纬度和经度值，但它显示以下错误

1.  **http 连接 org.apache.http.conn.HttpHostConnectException 出错：连接到 * *http://localhost****被拒绝**

    ```
    //My main.java code is :

    public void insertdata()
    {
    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
     nameValuePairs.add(new BasicNameValuePair("Lat","34"));
    nameValuePairs.add(new BasicNameValuePair("Lon","72"));

    //http post
    try{
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new      
       HttpPost("http://localhost/androidconnection/insertdata.php");
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        InputStream is = entity.getContent();
        Log.i("postData", response.getStatusLine().toString());
    }

    catch(Exception e)
    {
        Log.e("log_tag", "Error in http connection "+e.toString());
    } 
    ```

    }

    //在服务器端我的php插入代码是“insertdata.php”

    ```
     <?php
        mysql_connect("localhost","root","");
         mysql_select_db("PeopleData");
       //retrieve the data
       $lat = $_POST['lat'];
      $lon = $_POST['lon'];

      $sql = "INSERT INTO coords (Lat, Lon) VALUES('$lat', '$lon')";

           if (!mysql_query($sql, $sqlCon))
        {
            die('Error: ' . mysql_error());
         }
       else
        {
          //echo "1 record added";
           }

                ?> 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T08:24:33.450

`localhost`指当前运行代码的机器，在本例中是 Android 手机（或模拟器）。**为了从android模拟器访问主机，您可以使用ip地址：10.0.2.2**

更改您的网址，如下所示：

该行`HttpPost("http://localhost/androidconnection/insertdata.php");` 应如下所示：`HttpPost("http://10.0.2.2/androidconnection/insertdata.php");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T08:19:26.240

尝试转换

```
localhost 
```

和你的

```
web server IP Address. 
```

这里，`HttpPost("http://localhost/androidconnection/insertdata.php");`

还要确保您`Internet`在清单文件中添加了权限。

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

希望它可以帮助你。

谢谢。

# asp.net-mvc - ASP.net MVC - 控制器操作方法如何获取参数值？

> ID：13890550
> 
> 赞同：2
> 
> 时间：2012-12-15T08:17:16.317
> 
> 标签：asp.net-mvc, scaffolding

我知道这个问题的标题不是很漂亮。我有更好的表达方式。

让我们看看下面的代码：

**查看删除操作：**

```
@model LearningMVC.Models.Blog

@{
    ViewBag.Title = "Delete";
}

<h2>Delete</h2>

<h3>Are you sure you want to delete this?</h3>
<fieldset>
    <legend>Blog</legend>

    <div class="display-label">
         @Html.DisplayNameFor(model => model.URL)
    </div>
    <div class="display-field">
        @Html.DisplayFor(model => model.URL)
    </div>
</fieldset>
@using (Html.BeginForm()) {
    <p>
        <input type="submit" value="Delete" /> |
        @Html.ActionLink("Back to List", "Index")
    </p>
} 
```

**删除操作的控制器操作**

```
[HttpPost, ActionName("Delete")]
        public ActionResult DeleteConfirmed(int id)
        {
            Blog blog = db.Blogs.Find(id);
            db.Blogs.Remove(blog);
            db.SaveChanges();
            return RedirectToAction("Index");
        } 
```

## 我的问题是，这个方法到底是怎么得到它的参数的？！

# php - 从php获取json数据并在jquery中使用

> ID：13890551
> 
> 赞同：1
> 
> 时间：2012-12-15T08:17:25.923
> 
> 标签：php, jquery, json, parsing

这是我第一次使用 JSON。我正在尝试使用 ajax 从 php 脚本中获取 JSON 数据。但我收到此错误**“Error.Parsing JSON Request failed”“undefined”。**帮帮我这是我的 php 脚本**test.php**

```
 $data='{
  "one": "One",
 "two": "Two",
 "three": "Three"
   }';

 header('Content-type: application/json');
 echo json_encode($data); 
```

在这里我得到数据**getdata.php**

```
 var sURL = 'http://www.example.com/test.php';   

$.ajax({
            type: "GET",
                            url:sURL,
                            dataType:"jsonp",
                            crossDomain:true,
                            data: {transid:trans_id , bookingdate: dateVal, bookingtime: timeVal, People: peopleVal,affiliateid: affiliate },
                            async: false,
                            contentType:"application/json; charset=utf-8",
                            success: function (data){
                                                                                    var result = JSON.parse(data);
                                            alert(result);
                                            },
                                            error: function (x, e) {

        if (x.status == 0) {
            alert(x.response);
            alert(x + " " + e);
            alert('You are offline!!\n Please Check Your Network.');
        }
        else if (x.status == 404) {
            alert('Requested URL not found.');
        }
        else if (x.status == 500) {
            alert('Internel Server Error.');
        }
        else if (e == 'parsererror') {

            alert('Error.\nParsing JSON Request failed.' + e.statusText);
            alert(x.response);
        } else if (e == 'timeout') {
            alert('Request Time out.');
        } else {
            alert('Unknow Error.\n' + x.responseText);
        }
    }

                            }); 
```

这是我的第一个问题，请原谅任何错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T08:26:00.783

在您使用`jsonp`时，添加如下回调函数

```
var sURL = 'http://www.example.com/test.php';   

$.ajax({
            type: "GET",
                            url:sURL,
                            dataType:"jsonp",
                            jsonp : "callback",
                            jsonpCallback: "jsonpcallback",
                            crossDomain:true,
                            data: {transid:trans_id , bookingdate: dateVal, bookingtime: timeVal, People: peopleVal,affiliateid: affiliate },
                            async: false,
                            contentType:"application/json; charset=utf-8",
                            success: function (data){
                                                                                    var result = JSON.parse(data);
                                            alert(result);
                                            },
                                            error: function (x, e) {

        if (x.status == 0) {
            alert(x.response);
            alert(x + " " + e);
            alert('You are offline!!\n Please Check Your Network.');
        }
        else if (x.status == 404) {
            alert('Requested URL not found.');
        }
        else if (x.status == 500) {
            alert('Internel Server Error.');
        }
        else if (e == 'parsererror') {

            alert('Error.\nParsing JSON Request failed.' + e.statusText);
            alert(x.response);
        } else if (e == 'timeout') {
            alert('Request Time out.');
        } else {
            alert('Unknow Error.\n' + x.responseText);
        }
    }

 });

function jsonpcallback(rtndata) {
  alert(rtndata.one);
} 
```

在 PHP 中 make`$data as array`然后使用`json_encode()`返回回调。

```
 $data=array(
  "one"=>"One",
  "two"=>"Two",
  "three"=>"Three"
 );
 header('Content-type: application/json');
 echo $_GET['callback']. '('. json_encode($data) . ')'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T08:22:27.780

改变你的

```
 dataType:"jsonp", 
```

到

```
dataType:"json", 
```

# c - 为什么必须使用malloc？

> ID：13890554
> 
> 赞同：1
> 
> 时间：2012-12-15T08:17:45.150
> 
> 标签：c, variables, memory, memory-management, malloc

据我了解， malloc 函数接受一个变量并按要求分配内存。在这种情况下，它将要求编译器准备内存以适应 20 个 double 变量的等价性。我的理解方式是否正确，为什么必须使用它？

```
double *q;

q=(double *)malloc(20*sizeof(double));

for (i=0;i<20; i++)
{
    *(q+i)= (double) rand();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T08:25:07.603

您不必在以下情况下使用`malloc()`：

1.  如您的示例所示，大小在编译时是已知的。
2.  您正在使用具有 VLA（可变长度数组）支持的 C99 或 C2011。

请注意，`malloc()`在运行时分配内存，而不是在编译时。编译器仅在确保调用正确函数的范围内参与；就是`malloc()`这样分配的。

您的示例提到“十个整数的等价性”。20 很少与`double`10 占用相同的空间`int`。通常，10`double`将占用与 20 相同的空间`int`（当`sizeof(int) == 4`和`sizeof(double) == 8`，这是一个非常常见的设置）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-15T08:20:05.907

它用于在运行时而不是编译时分配内存。因此，如果您的数据数组基于来自用户、数据库、文件等的某种输入，那么`malloc`一旦知道所需的大小，就必须使用它。

该变量`q`是一个指针，这意味着它在内存中存储了一个地址。`malloc`要求系统创建一段内存并返回该段内存的地址，该地址存储在`q`. 所以`q`指向你请求的内存的起始位置。

必须注意不要`q`无意中改变。例如，如果您这样做：

```
q = (double *)malloc(20*sizeof(double));
q = (double *)malloc(10*sizeof(double)); 
```

您将无法访问 20 的第一部分`double`并引入内存泄漏。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-15T08:38:49.523

当您使用时，`malloc`您是在询问系统“嘿，我想要这么多字节的内存”，然后他会说“对不起，我已经用完了”或“好的！这是您想要的内存的地址。不要”不要失去它”。

将大数据集放在堆中（`malloc`从中获取内存）并将指向该内存的指针放在堆栈中（代码执行发生的地方）通常是一个好主意。这在内存有限的嵌入式平台上变得更加重要。您必须决定如何在堆栈和堆之间分配物理内存。堆栈过多，您无法动态分配大量内存。堆栈太少，您可以直接调用函数（也称为堆栈溢出：P）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-15T08:34:42.847

正如其他人所说， malloc 用于分配内存。重要的是要注意 malloc 将从堆中分配内存，因此内存是持久的，直到它被`free`'d。否则，如果没有 malloc，声明类似的东西`double vals[20]`会在堆栈上分配内存。当您退出该函数时，该内存将从堆栈中弹出。

例如，假设您在一个函数中并且您不关心值的持久性。那么以下将是合适的：

```
void some_function() {
    double vals[20];
    for(int i = 0; i < 20; i++) {
        vals[i] = (double)rand();
    }
} 
```

现在，如果您有一些全局结构或存储数据的东西，其生命周期比函数的生命周期长，则需要使用 malloc 从堆中分配内存（或者，您可以将其声明为全局变量，并且内存将为您预先分配）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-15T08:22:16.853

在您的示例中，您可以在`double q[20];`没有 the 的情况下声明`malloc`它会起作用。

`malloc`是获取动态分配内存的标准方法（通常构建在 Linux`malloc`等低级内存获取原语之上）。`mmap`

您希望获得动态分配的内存资源，特别是当分配的事物（这里是您的`q`指针）的大小取决于运行时参数（例如取决于输入）时。不好的选择是静态分配所有数据，但是数据的静态大小是一个强大的内置限制，您不喜欢这样。

动态资源分配使您能够在便宜的平板电脑（具有半 GB 的 RAM）和昂贵的超级计算机（具有 TB 的 RAM）上运行相同的程序。您可以分配不同大小的数据。

不要忘记测试结果`malloc`；它可能会因返回 NULL 而失败。至少，代码：

```
 int* q = malloc (10*sizeof(int));
 if (!q) {
    perror("q allocation failed");
    exit(EXIT_FAILURE);
 }; 
```

并*始终初始化* `malloc`-ed 内存（您可能更喜欢使用`calloc`将分配的内存归零）。

不要忘记稍后`free`的`malloc`-ed 内存。在 Linux 上，了解如何使用[valgrind](http://valgrind.org/)。害怕[内存泄漏](http://en.wikipedia.org/wiki/Memory_leak)和[悬空指针](http://en.wikipedia.org/wiki/Dangling_pointer)。认识到某些数据的活跃性是整个程序的非模块化属性。阅读[垃圾收集](http://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29)！，并考虑使用[Boehm 的保守垃圾收集器](http://www.hpl.hp.com/personal/Hans_Boehm/gc/)（通过调用`GC_malloc`而不是`malloc`）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-15T08:22:41.230

您用于`malloc()`在`C`. （在 处分配内存`run time`）你使用它是因为有时你不知道你在编写程序时会使用多少内存。当您知道数组在编译时将包含多少个元素时，您不必使用它。

另一件需要注意的重要事情是，如果你想从一个函数返回一个数组，你需要返回一个没有在函数内部*定义***的**数组。相反，您需要动态分配一个数组（在**堆上**）并返回一个指向该块的指针：

```
int *returnArray(int n) 
{
    int i;
    int *arr = (int *)malloc(sizeof(int) * n);
    if (arr == NULL) 
    {
        return NULL; 
    }

    //...
    //fill the array or manipulate it
    //... 

    return arr; //return the pointer
} 
```

# php - 为 jquery post 获取每个值的多个值

> ID：13890557
> 
> 赞同：0
> 
> 时间：2012-12-15T08:18:06.103
> 
> 标签：php, jquery

我有这个 url 用于从 jquery 发布数据。如何获取`$_POST['reciver']`每个值的多个

```
test.php?peygham=&onvan=&startdate=&enddate=&sal=5&nimsal=1&visible=1&pages=1&reciver%5B%5D=687&reciver%5B%5D=695&reciver%5B%5D=690 
```

jQuery：

```
$('#to option').prop('selected',true);
$.post("save.php",{ 
                    peygham:$('#peygham').val(), 
                    onvan:$('#onvan').val() , 
                    startdate:$('#startdateM').val() , 
                    enddate:$('#enddateM').val(),
                    sal:$('#sal').val() , 
                    nimsal:$('#nimsal').val(), 
                    visible:$('#visible').val() , 
                    pages:$('#pages').val() , 
                    reciver:$('#to').val() /* => MULTI VALUE */
                    },
    function(data){

        $('#message').show();
        $('#message').html(data.message);
        setTimeout(function() {$('#message').hide();}, 10000);
        //window.location = "http://aou.ir/manage/preForm/test.php";            
    },'json');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T08:21:28.873

你可以把它作为数组

```
foreach($_POST['reciver'] as $value){
  echo $value;
} 
```

# java - 在 Java 中刷新单个控制台行

> ID：13890559
> 
> 赞同：0
> 
> 时间：2012-12-15T08:18:35.910
> 
> 标签：java, io, outputstream

我正在实现一个命令行 mp3 播放器。

我想像这样显示 mp3 持续时间

```
Now Playing :: hello.mp3 Duration :: 1.20 
```

但是当我使用 System.out.println 它显示

```
Now Playing :: hello.mp3 Duration :: 1.20 
Now Playing :: hello.mp3 Duration :: 1.21 
Now Playing :: hello.mp3 Duration :: 1.22 
Now Playing :: hello.mp3 Duration :: 1.23 
Now Playing :: hello.mp3 Duration :: 1.24 
Now Playing :: hello.mp3 Duration :: 1.25
..... 
```

基本上通过线程获取更新的持续时间，我想在一行中显示它，我的意思是持续时间必须在单行中更新。我看过`Flushable interface`但没看懂。请帮帮我

这是我的线程

```
while(p.getPlayer().isComplete() == false){
String bOutput = "\r Duration ::" + (int) ((p.getPlayer().getPosition() / (1000*60)) % 60) + " : " + (int) (p.getPlayer().getPosition() / 1000) % 60;
//p.getBufferedOutputStream().write(bOutput.getBytes());
//p.getBufferedOutputStream().flush();
System.out.println(bOutput);

Thread.sleep(1000);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T08:24:00.900

很明显，某事正在`println`多次调用。如果您不想要多行，请更改您的代码，使其不这样做。

这既不是线程的“错误”，也不是 的`println`，与刷新无关。问题在于您的代码逻辑......但我们不能再说什么，因为您还没有向我们展示它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T09:11:01.487

```
while(p.getPlayer().isComplete() == false){
String bOutput = "Duration ::" + (int) ((p.getPlayer().getPosition() / (1000*60)) % 60) + " : " + (int) (p.getPlayer().getPosition() / 1000) % 60;
System.out.println(bOutput+"\r");

Thread.sleep(1000);
} 
```

这是解决我的问题。

注意：**我没有看到任何效果`Eclipse Console`，当我运行它时`CMD`它的工作原理**

# wordpress - WordPress RSS 错误：“找不到文件 simplepie.php。”

> ID：13890564
> 
> 赞同：0
> 
> 时间：2012-12-15T08:19:24.507
> 
> 标签：wordpress, rss, simplepie

我正在尝试在我的博客中包含一个 RSS 提要，`fetchfeed()`并在 sidebar.php 中循环浏览这些项目。我得到的不是提要，而是“找不到文件 simplepie.php”。我搜索了一段时间，只能找到对 class-simplepie.php 的引用，而不是 simplepie.php。有谁知道这里发生了什么？

这是我的代码：

```
<?php if(function_exists('fetch_feed')): ?>
    <?php include_once(ABSPATH.WPINC.'/feed.php');
    $feed = fetch_feed('feed URL');
    $limit = $feed->get_item_quantity(5);
    $items = $feed->get_items(0, $limit);
    if(!$items) {
        echo "There was an error.";
    } else { ?>
        <?php foreach($items as $item): ?>
            <div class="sidebar_post">
                <p class="date"><?php echo $item->get_date('F j, Y'); ?></p>
                <h5><?php echo $item->get_title(); ?></h5>
                <p><?php echo $item->get_content(); ?></p>
            </div>
        <?php endforeach; ?>
<? } ?>
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T08:22:18.517

将此行添加到您的 wp-config.php

定义（'WP_MEMORY_LIMIT'，'64M'）；

# android - 没有在我的代码中获取图像的资源 ID

> ID：13890567
> 
> 赞同：3
> 
> 时间：2012-12-15T08:19:57.457
> 
> 标签：android, listview, android-resources, baseadapter

我正在尝试在每一行中使用 Imageviews 制作一个自定义列表视图，该视图将通过我从数据库中获取的字符串设置其图像资源。数据库只包含图像的名称，我需要从资源中加载它。我已经尝试了所有按名称获取资源的方法，但该函数始终返回 0。无论我做什么，我都无法根据名称获取我的 id。这是我正在使用的自定义适配器....

公共类 OwnAddptor 扩展 BaseAdapter {

```
private LayoutInflater mInflater;
String[] names;
String[] detailarray;
String[] adapimage;
int size;
Context mycont;

public OwnAddptor(Context context,String[] poi_names,String[] details,String[] imageadap) {

        mInflater = LayoutInflater.from(context);
        this.names = poi_names;
        this.detailarray = details;
        this.adapimage = imageadap;
        this.mycont = context;

}

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return names.length;
}

@Override
public Object getItem(int puhj) {
    // TODO Auto-generated method stub
    return puhj;
}

@Override
public long getItemId(int arg0) {
    // TODO Auto-generated method stub
    return arg0;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View vi=convertView;
     ViewHolder holder;

        if (vi == null) {
            vi = mInflater.inflate(R.layout.blockview, null);
            holder = new ViewHolder();
            holder.headline = (TextView) vi.findViewById(R.id.head_line);
            holder.detail = (TextView) vi.findViewById(R.id.detail);
            holder.image = (ImageView) vi.findViewById(R.id.image);
            vi.setTag(holder);
        } 
        else {  
            holder = (ViewHolder) vi.getTag();  
        }  
        holder.headline.setText(names[position]);
        holder.detail.setText(detailarray[position]);
       // Drawable imgdraw = mycont.getResources().getDrawable(adapimage[position]);
        holder.image.setImageDrawable(getAndroidDrawable(adapimage[position], mycont));
        System.out.println(adapimage[position]);
        return vi;

    }

    static class ViewHolder {
        TextView headline;
        TextView detail;
        ImageView  image;
    }
    public int getImageId(Context context, String name) {
        System.out.println("current name"+name);
        return context.getResources().getIdentifier("drawable/"+name, null, context.getPackageName());

    }
    static public Drawable getAndroidDrawable(String pDrawableName,Context cont){

        int resourceId=Resources.getSystem().getIdentifier(pDrawableName, "drawable", cont.getPackageName());
        System.out.println("resource ids****"+resourceId);
        if(resourceId==0){
            return null;
        } else {
            return Resources.getSystem().getDrawable(resourceId);
        }
    }
} 
```

这是我查询数据库并将数组传递给自定义适配器类的主要活动。文本视图根据位置正确设置。唯一的问题是从资源文件夹中获取图像的 int id。公共类 MainActivity 扩展 Activity {

```
DataBaseHelper baseHelper ;
SQLiteDatabase database;
OwnAddptor adapcustom;
 TextView  detail;
 ListView  view;
 TextView headline;
 String[] name;
 String[] images;
 String[] desc;
 int[] imgids;   
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    List<RowItem> rowItems;

      view = (ListView) findViewById(R.id.mylist);
     baseHelper = new DataBaseHelper(this);
        try
        {
         baseHelper.createDatabase(); 
        }
        catch (IOException ioe)
        {
           throw new Error("Unable to create database");
        }
        try
        {
          baseHelper.openDataBase();

        }
        catch(SQLException sqle)
        {
           throw sqle;
        }
      database = baseHelper.getReadableDatabase();
      Cursor cursor= database.rawQuery("Select * from tblArpoi_local", null);
      int i = 0;

          if (cursor.getCount()>0) {
              cursor.moveToFirst();
              name = new String[cursor.getCount()];
              desc = new String[cursor.getCount()];
              images= new String[cursor.getCount()];
              imgids = new int[cursor.getCount()];
      while (cursor.moveToNext()) {
        images[i]= "poi_"+cursor.getString(cursor.getColumnIndex("arPoiImageLink"));
        name[i] = cursor.getString(cursor.getColumnIndex("arPoiName"));
        desc[i] = cursor.getString(cursor.getColumnIndex("arPoiDescription"));

                i++;
    }

      System.out.println("****"+images.length);
      database.close();
      cursor.close();
      adapcustom = new OwnAddptor(this,name,desc,images);
      view.setAdapter(adapcustom);

          }
}
 public static int getImageId(Context context, String name) {
        System.out.println("current name"+name);
        return context.getResources().getIdentifier("drawable/"+name, null, context.getPackageName());

 } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T17:35:55.220

我用这个

```
context.getResources().getIdentifier(drawableResourceName, "drawable", context.getPackageName()); 
```

它就像一个沙姆一样工作。

你可以试着打电话

```
holder.image.setImageDrawable(context.getResources().getIdentifier(drawableResourceName, "drawable", context.getPackageName())); 
```

代替

```
holder.image.setImageDrawable(getAndroidDrawable(adapimage[position], mycont)); 
```

希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T09:16:16.577

试试这个，它会解决你的问题。

```
ImageView my_image = (ImageView) findViewById(R.id.my_imageView);
my_image.setBackgroundResource(getResId("ic_launcher")); 
```

声明以下函数以从传递的可绘制字符串名称中获取可绘制资源 ID。

```
public static int getResId(String drawableName) {    
    try {
        Class res = R.drawable.class;
        Field field = res.getField(drawableName);
        int drawableId = field.getInt(null);
        System.out.println("resource ids****"+drawableId);
        return drawableId;
    } catch (Exception e) {
        Log.e("MyTag", "Failure to get drawable id.", e);
        return 0;
    }
} 
```

而已。

希望它可以帮助你。

谢谢。

# html - GraphViz HTML 嵌套表格

> ID：13890568
> 
> 赞同：3
> 
> 时间：2012-12-15T08:19:59.643
> 
> 标签：html, html-table, graphviz

我正在使用 GraphViz 来制作表格结构。我正在使用这种`record`风格，但盒子没有排成一行。鉴于[这个](https://stackoverflow.com/questions/2067669/how-to-get-graphviz-records-to-have-cells-that-line-up)问题的答案，我想我会改用 HTML 样式。但是，我似乎无法正确嵌套表格。这是我的点代码：

```
digraph test {
    graph [ratio=fill];
    node [label="\N", fontsize=15, shape=plaintext];
    graph [bb="0,0,352,154"];
    arset [label=<
        <TABLE ALIGN="LEFT">
            <TR>
                <TD>Top left</TD>
                <TD>
                    <TABLE>
                        <TR><TD>Row 1</TD></TR>
                        <TR><TD>Row 2</TD></TR>
                    </TABLE>
                </TD>
            </TR>
            <TR>
                <TD>Bottom Left</TD>
                <TD>
                    <TABLE>
                        <TR><TD>Row 1</TD></TR>
                        <TR><TD>Row 2</TD></TR>
                    </TABLE>
                </TD>
            </TR>
        </TABLE>
    >, ];
} 
```

这是输出：

![在此处输入图像描述](../Images/9676c6f49c6dd970f0b61b00dce0dfb9.png)

这么多额外的行！谁能帮我弄清楚如何正确制作嵌套表？另一方面，详细说明如何使用记录显示使单元格对齐的链接问题的答案就足够了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T12:15:42.910

我已将 BORDER="0" 添加到内部表中

```
digraph test {
    graph [ratio=fill];
    node [label="\N", fontsize=15, shape=plaintext];
    graph [bb="0,0,352,154"];
    arset [label=<
        <TABLE ALIGN="LEFT">
            <TR>
                <TD>Top left</TD>
                <TD>
                    <TABLE BORDER="0">
                        <TR><TD>Row 1</TD></TR>
                        <TR><TD>Row 2</TD></TR>
                    </TABLE>
                </TD>
            </TR>
            <TR>
                <TD>Bottom Left</TD>
                <TD>
                    <TABLE BORDER="0">
                        <TR><TD>Row 1</TD></TR>
                        <TR><TD>Row 2</TD></TR>
                    </TABLE>
                </TD>
            </TR>
        </TABLE>
    >, ];
} 
```

这是结果

![在此处输入图像描述](../Images/905b3557a287f0f38df3bdfc5ea98e00.png)

您可以在[这里](http://www.graphviz.org/doc/info/shapes.html#html)找到许多其他选项来控制 HTML 布局

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-20T15:44:26.650

而不是这个：

```
<TD>
  <TABLE BORDER="0">
    <TR><TD>Row 1</TD></TR>
    <TR><TD>Row 2</TD></TR>
  </TABLE>
</TD> 
```

你也可以这样做：

```
<TD COLSPAN="2">Row 1<BR/>Row 2</TD> 
```

# android - 如何在 simplecursoraapter 中仅选择一列并将其传递给另一个活动？

> ID：13890574
> 
> 赞同：1
> 
> 时间：2012-12-15T08:20:40.260
> 
> 标签：android, sqlite, cursor, simplecursoradapter

我的主要活动中有一个游标来查询数据库的**两列**并使用简单的游标适配器显示它们。

```
private Cursor doQuery() {
return(db.getReadableDatabase().rawQuery("SELECT RestaurantID AS _id, RestaurantName, StoreNo "
+ "FROM RestaurantList ORDER BY RestaurantName", null));

}

public void onPostExecute() {
SimpleCursorAdapter adapter;

if (Build.VERSION.SDK_INT>=Build.VERSION_CODES.HONEYCOMB) {
adapter=new SimpleCursorAdapter(this, R.layout.activity_all_restaurants,
        doQuery(), new String[] {
    RestaurantDB.colRestaurantName,
    RestaurantDB.colRestaurantStore },
    new int[] { R.id.title, R.id.value },
    0);
}
else {
adapter=new SimpleCursorAdapter(this, R.layout.activity_all_restaurants,
        doQuery(), new String[] {
    RestaurantDB.colRestaurantName,
    RestaurantDB.colRestaurantStore },
    new int[] { R.id.title, R.id.value });
}

setListAdapter(adapter);

} 
```

我想要做的是，当用户单击特定项目时，会弹出另一个活动，为用户提供更多信息，这意味着我还需要显示存储在同一项目的**许多其他列中的数据。**我的问题是我该怎么做。我以为我应该使用onListItemClick，但我不知道如何将主活动中选择的项目与新活动相关联。

此外，在主要活动中，我在列表中有两个文本视图，分别显示 colRestaurantName 和 colRestaurantStore。当我使用 onListItemClick 时，如何才能检索 colRestaurantName？

我可以执行以下操作来检索位置，但我不知道如何在新活动中使用它：

```
@Override
public void onListItemClick(ListView parent, View v, int position,
    long id){
Cursor c = ((SimpleCursorAdapter)parent.getAdapter()).getCursor();
selection = String.valueOf(c.getPosition());
Intent i = new Intent(AllRestaurants.this, RestaurantsInfo.class);
i.putExtra("restaurantSelection", selection);
startActivity(i);      
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T08:30:10.577

实现`onListItemClick`listview 并获取 textview 文本并将其发送到下一个活动：

```
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
       TextView tv = (TextView)v.findViewById(R.id.title);
      String strcolRestaurantName=tv.getText().toString();

      Intent intent =new Intent(CurrentActivity.this,NextActivity.class);
      Bundle bundle = new Bundle();
      bundle.putString("RestaurantName",strcolRestaurantName);
      intent.putExtras(bundle);
      startActivity(intent);
}} 
```

并在 NextActivity 中获取 Intent ，如 onCreate ：

```
Intent i = getIntent();
Bundle extras = i.getExtras();

String strRestaurantName = extras.getString("RestaurantName"); 
```

# multithreading - 在与 OSX 命令行不同的线程中运行程序？

> ID：13890581
> 
> 赞同：1
> 
> 时间：2012-12-15T08:21:34.350
> 
> 标签：multithreading, macos, shell, command-line

我正在开发一个 node.js 服务器应用程序。为了加快这个过程，我已经配置了我的编辑器，所以`node <current_file>`当我按下一个键时它会使用命令运行当前文件。问题是：当文件启动服务器时，编辑器会阻塞。如何更改该命令以使其在后台运行 node.js？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T08:17:01.097

`&`您可以通过在末尾添加一个来异步启动它：

`node <current_file> &`

# java - 如何在 Java 中删除 Vector 中的多个元素？

> ID：13890584
> 
> 赞同：0
> 
> 时间：2012-12-15T08:22:01.497
> 
> 标签：java, file, vector

我从 .txt 文件中读取了所有 id 并将这些 id 插入到 Vector 中。

```
 String pathSelectedfile = fileChooser.getSelectedFile().getAbsolutePath();
            File selectedFile = new File(pathSelectedfile);
            Scanner readFile = new Scanner(selectedFile);

            Vector ids=new Vector();
            while (readFile.hasNextLine()) {
                String id= readFile.nextLine();
                ids.addElement(id);
            } 
```

然后我想删除 Vector.i 中的多个 id。我可以通过 for 循环来做到这一点，但信息太大了。tnx 很多

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T08:34:35.050

完全删除重复的 id，您可以使用以下内容：

```
 Set<String> ids=new LinkedHashSet<String>();
        Set<String> duplicates=new HashSet<String>();
        while (readFile.hasNextLine()) {
            String id= readFile.nextLine();
            if(!ids.add(id)) {
                duplicates.add(id);
            }
        }
        ids.removeAll(duplicates) 
```

请注意，与 Vector 不同，LinkedHashSet 是不同步的。在大多数情况下，这不是一件坏事，但如果您确实需要同步它，请使用 Collections.synchronizedSet() 包装它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T08:40:09.923

删除多个值

```
 Vector vector = new Vector();
    vector.add("value1");
    vector.add("value2");
    vector.add("value3");
    vector.add("value4");
    System.out.println("Size : "+vector.size());
    // to remove single value
    vector.remove("value1");
    System.out.println("Size : "+vector.size());
    Vector itemsToRemove = new Vector();
    itemsToRemove.add("value3");
    itemsToRemove.add("value4");
    //remove multiple values
    vector.removeAll(itemsToRemove);
    System.out.println("Size : "+vector.size());

    //to remove all elements
    vector.removeAllElements();
    // or
    vector.clear(); 
```

但是不要使用`Vector`考虑使用，`ArrayList`因为 Vector 是过时的集合。阅读本文：[为什么 Java Vector 类被认为已过时或不推荐使用？](https://stackoverflow.com/questions/1386275/why-is-java-vector-class-considered-obsolete-or-deprecated)

`ArrayList<String> idList = new ArrayList()`如果您仅在列表中存储 String 元素，也可以使用泛型。

如果要在添加元素时跳过重复项`Vector`，请使用以下代码

```
 Vector vector = new Vector() {
        @Override
        public synchronized boolean add(Object e) {
            if(!contains(e)){
                return super.add(e);
            }
            System.out.println("Element " + e +" is duplicate");
            return false ;
        }
    }; 
```

但是，如果您只想添加独特的元素，请使用`Set`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T08:32:13.690

阅读 javadoc 并注意以`remove` [http://docs.oracle.com/javase/6/docs/api/java/util/Vector.html](http://docs.oracle.com/javase/6/docs/api/java/util/Vector.html)开头的方法。这应该是你的第一个方法而不是 SO。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T09:03:20.180

如果您“想删除 Vector 中的多个 id”，请执行以下操作

```
ids = new Vector(new HashSet(ids)) 
```

# mysql - 显示来自 2 个表的记录和计数

> ID：13890586
> 
> 赞同：-2
> 
> 时间：2012-12-15T08:22:09.967
> 
> 标签：mysql, sql

我的要求在此链接[Requirement](http://www.sqlfiddle.com/#!2/73ac4/1)中。如果我们运行查询，我们将分别获得计数为 3 的 Chennai 和 Pune，因为 chennai 和 pune 的 regionid 存在于表中。但我也需要将班加罗尔和德里显示为 0。我怎么做

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T08:27:24.690

您可以使用`LEFT JOIN`

```
SELECT A.region_name, COUNT(B.ID)
FROM TableA A 
LEFT JOIN TableB B
ON A.ID = B.ID
GROUP BY A.ID 
```

### [请参阅此 SQLFiddle 演示](http://sqlfiddle.com/#!2/7623a/5)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T04:20:31.627

您没有将 Banglore 和 Delhi 设为 0，因为您正在加入表格，`region_id`而那些`region_id`^((1))在表格中不可用，`Leads`因此您将得到Banglore 和 Delhi 的`vehicle_id`= `NULL`（[**请参阅此**](http://sqlfiddle.com/#!2/73ac4/9)）。因此，当您写作时`WHERE B.vehicle_id = 2`，您的结果中不会出现班格洛尔和德里。所以删除`WHERE`条件会给你你想要的结果（[**见这个**](http://sqlfiddle.com/#!2/73ac4/4)）。如果你想保持这个条件，你可以通过使用`Region.vehicle_id = 2`代替来做到这一点`Leads.vehicle_id = 2`。

### 请参阅[此 SQLFiddle](http://sqlfiddle.com/#!2/73ac4/8)。

[(1)`region_id`班加罗尔和德里。]

# java - Apache Jackrabbit 与滚动您的内容存储库

> ID：13890595
> 
> 赞同：1
> 
> 时间：2012-12-15T08:23:46.597
> 
> 标签：java, apache, jcr

我正在考虑将 Apache Jackrabbit 用于个人项目，但想知道使用它与自定义内容存储库或内容存储在文件系统中的传统数据库相比有哪些优点/缺点。

我不确定我是否喜欢 JCR 的树形结构，所以如果你能解释其背后的设计决策（adv/dis），它也会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T21:24:01.157

使用现有的 JCR 实现有几个好处，例如[Jackrabbit](http://jackrabbit.apache.org)或[ModeShape](http://modeshape.org)。首先，您可以立即免费获得许多功能：

*   **分层数据存储**- 大量数据自然是分层的，JCR 存储库允许您以应用程序访问数据的方式组织数据。任何以 URI、日期/时间、类别或文件夹结构为关键字的内容都自然适合存储在存储库中。
*   **使用标准 Java API** - JCR API 是带有 TCK 的标准 Java API，这意味着您的应用程序可以依赖于标准行为，而不是绑定到特定的 JCR 实现。
*   **灵活的模式实施**- 您可以通过定义和使用节点类型的方式来选择是否以及在何处实施节点结构和属性值。
*   **数据演化**——你的数据结构可能会随着时间的推移而演化，而 JCR 使这很容易做到。
*   **查询和全文搜索**- 您的应用程序可以浏览数据，也可以独立于位置查询内容。JCR 查询语言非常丰富，它们支持全文搜索。
*   **事务**- 您可以控制事务边界，这意味着 JCR 会话可以参与由您的应用程序或其容器控制的 JTA 事务。
*   **事件**- 当添加、更改或删除节点和/或属性时，可以通知您的应用程序。
*   **集群**- 通过跨多个进程集群 JCR 存储库来扩展您的应用程序。每个实现都以不同的方式配置集群，但它们对客户端应用程序的行为相同。
*   **版本控制**- JCR 包括用于版本控制内容的标准机制。它可能不适合所有用例，但在适合时非常方便。
*   **锁定**- JCR 包含一种用于短期锁定的标准机制，当您的应用程序需要确保部分存储库仅由一个进程更新时，该机制很有用。

如果其中一些功能对您很重要，那么您绝对应该考虑重用现有的实现而不是自己动手——否则您将花费​​所有时间来实现这些功能。

但是，如果这些功能都不适合您的用例，那么您应该考虑其他数据存储技术：

*   当您的数据非常受限、架构不太可能更改太频繁或您的数据是扁平的（一些键类型的大量值）时，关系数据库非常有用。（请注意，许多 JCR 实现可以将内容存储在关系数据库中，因此“我必须将我的数据存储在关系数据库中”并不是您的应用程序直接使用关系数据库的好理由。）
*   当您需要通过唯一键存储任意值并且所有访问都通过获取和放置时，键值存储非常有用。这些值通常对商店是不透明的。
*   文档存储类似于键值存储，只是存储知道值的结构。一些文档存储支持查询。
*   其他存储技术也有自己的优势。

其他要考虑的事情是您是否需要或想要最终一致的数据库或强一致的数据库。针对强一致性数据库编写许多“常规”应用程序要容易得多，事实上，大多数 JCR 存储库（包括 Jackrabbit 和 ModeShape）都是强一致性的。

# sql - 如何聚合表中的数据点？

> ID：13890599
> 
> 赞同：0
> 
> 时间：2012-12-15T08:24:19.740
> 
> 标签：sql, statistics, aggregate-functions, h2

假设我有下表 -

```
CREATE TABLE data_points (t DATETIME PRIMARY KEY, value INTEGER); 
```

我想通过计算表中每 10 个点的平均值来聚合数据。

即如果表有 20 个数据点，则结果是两个聚合点。第一个聚合点是 1-10 个数据点的平均值，第二个是 11-20 个数据点的平均值。

这可能使用 SQL 查询吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T09:08:55.557

你是这个意思吗？查询在 MS SQL 服务器中工作。

```
SELECT AVG([VALUE]) OVER (PARTITION by par), * 
FROM (
    SELECT ((ROW_NUMBER() OVER(ORDER BY [VALUE]))-1)/10 par, * FROM TableName
)X 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T09:29:25.687

This one seem to do what you want in MYSQL.

```
SELECT 
    avg(value) as `average`, 
    10*FLOOR(value/10) AS `valueBucket`, 
    CONCAT(10*FLOOR(value/10),'-',10*FLOOR(value/10)+9) AS `range`
FROM 
    data_points 
GROUP BY
    valuebucket
; 
```

[http://sqlfiddle.com/#!2/b4468/53/0](http://sqlfiddle.com/#!2/b4468/53/0)

# c# - Windows Phone 8 快速应用程序恢复：未声明“ActivationPolicy”属性

> ID：13890608
> 
> 赞同：1
> 
> 时间：2012-12-15T08:25:17.270
> 
> 标签：c#, windows-phone-8

当我在 WMAppManifest.xml 中添加快速应用恢复属性后尝试编译时，我在计算机上尝试的任何项目都会在 VS2012 中出现此错误：“未声明‘ActivationPolicy 属性’。

我尝试了 3 个不同的 Windows Phone 8 项目，包括来自 Microsoft 的示例。当我尝试编译时，它们都给出了错误。它正在添加打破它的这个属性：`ActivationPolicy="Resume"` 到这一行： `<DefaultTask Name="_default" NavigationPage="MainPage.xaml" />`

我已经修复了我的 WP8 安装。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T17:59:59.273

好的，非常抱歉发布此信息。我找到了自己的解决方案。

我刚刚完全卸载然后重新安装了 Windows Phone 8 SDK。（修复没用）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T05:15:26.793

Check the file YamanoteCommonTypes.xsd in C:\Program Files (x86)\Microsoft Visual Studio 11.0\Xml\Schemas

In that file, cut & paste the following xml defitions over the existing ones:

```
<xs:simpleType name="ST_ActivationPolicyThirdParty">
<xs:annotation>
    <xs:documentation>
    The activation policy of a 3rd party task
    </xs:documentation>
</xs:annotation>
<xs:restriction base="xs:string">
    <xs:enumeration value="Resume"/>
    <xs:enumeration value="Replace"/>
</xs:restriction>
</xs:simpleType> 
```

and

```
<xs:complexType name="CT_ThirdPartyExtendedAppTask">
<xs:annotation>
<xs:documentation>
    Represents an entry point container
</xs:documentation>
</xs:annotation>
<xs:sequence>
    <xs:element name="BackgroundServiceAgent" type="CT_BackgroundServiceAgent" minOccurs="0" maxOccurs="unbounded"/>
</xs:sequence>
<xs:attribute name="Name" type="xs:ID" use="required"/>
<!-- These attributes will only be parsed if the runtimetype is ST_RuntimeType::ModernNative -->
<xs:attribute name="ImagePath" type="y:ST_String" use="optional" />
<xs:attribute name="ImageParams" type="y:ST_String" use="optional" />
</xs:complexType> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T17:23:17.463

你会得到这个的另一个原因是因为你有一个尚未升级到 WP8 的旧 wp7 项目。

# c++ - 无法使用缓冲区对象绘制

> ID：13890610
> 
> 赞同：0
> 
> 时间：2012-12-15T08:25:58.230
> 
> 标签：c++, opengl, graphics

因此，我正在尝试研究 vbo 并仅做一些示例，但 opengl 正在杀死我。我已经尝试了四个小时来完成这个代码工作，但我不知道为什么这不起作用。我试图用不同的颜色绘制 4 个正方形。但是如果我尝试使用`GL_POINTS`我在屏幕上只看到 4 个点进行绘制，并且应该是 9 个点。如果我尝试使用`GL_QUADS`它，就不要画任何东西。有趣的是，当我更改此行时：

```
glDrawElements(GL_POINTS, 16, GL_UNSIGNED_BYTE, BUFFER_OFFSET(0)); 
```

对此：

```
glDrawElements(GL_POINTS, 64, GL_UNSIGNED_BYTE, BUFFER_OFFSET(0)); 
```

Opengl 绘制了 9 个点，但仅此而已，GL_QUADS 不起作用。拜托，有人给我一个关于这个问题的光，它正在杀死我！完整的代码在这里：

```
#define GL_GLEXT_PROTOTYPES
#include<GL/glut.h>
#include<iostream>
using namespace std;

#define BUFFER_OFFSET(offset) ((GLfloat*) NULL + offset)

#define VERTICES 0
#define INDICES 1
#define NUM_BUFFERS 2

void init_2(){

GLuint buffers[NUM_BUFFERS];

GLfloat vertices[][3]= { 
                {0.0, 0.0,  0.0},
                {0.0, 40.0, 0.0},
                {0.0, 80.0, 0.0},
                {40.0, 0.0, 0.0},
                {40.0, 40.0, 0.0},
                {40.0, 80.0, 0.0},
                {80.0, 0.0, 0.0},
                {80.0, 40.0, 0.0},
                {80.0, 80.0, 0.0}
              };

GLuint indices[][4] = {
              {0, 1, 4, 3}, 
              {1, 2, 5, 4}, 
              {3, 4, 7, 6}, 
              {4, 5, 8, 7}
            };    

glGenBuffers(NUM_BUFFERS, buffers);

glBindBuffer(GL_ARRAY_BUFFER, buffers[VERTICES]);
glBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);

glVertexPointer(3, GL_FLOAT, 0, BUFFER_OFFSET(0));

glEnableClientState(GL_VERTEX_ARRAY);

glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, buffers[INDICES]);
glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(indices), indices, GL_STATIC_DRAW);
}

void display(void){  

glPushMatrix();         
glDrawElements(GL_POINTS, 16, GL_UNSIGNED_BYTE, BUFFER_OFFSET(0));
glPopMatrix();
glutSwapBuffers();
}

void init() 
{
  glClearColor(0.0, 0.0, 0.0, 0.0);
  gluOrtho2D((GLdouble) -1.0, (GLdouble) 90.0, (GLdouble) -1.0, (GLdouble) 90.0);  
  init2();
}

int main(int argv, char** argc) {

  glutInit(&argv, argc);
  glutInitDisplayMode(GLUT_RGB | GLUT_DOUBLE);
  glutInitWindowSize(500,500);
  glutInitWindowPosition(100,100); 
  glutCreateWindow("myCode.cpp");
  init();
  glutDisplayFunc(display);
  glutMainLoop();

  return 0;  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T08:39:06.123

这是问题所在：

```
GLuint indices[][4] = {
...
glDrawElements(GL_POINTS, 16, GL_UNSIGNED_BYTE, BUFFER_OFFSET(0)); 
```

您声明`GLuint`索引，然后告诉`glDrawElements`您正在给它字节。

`GLuint`是 32 位类型，所以每个有 4 个字节。由于您的索引数据非常小，每个 32 位值只有底部字节中的数据，其余部分为零。

所以在前 16 个字节中，也就是前 4 个`GLuint`，只有 4 个离散值，所以你看到 4 个点。如果您尝试 64（即 16 * 4），您将看到全部 9 个点。然而，这些点与很多零混合在一起，所以当你尝试渲染为 时`GL_QUADS`，不会绘制任何内容。

# jquery - 用于触发 3D 变换的 JQuery 类

> ID：13890613
> 
> 赞同：0
> 
> 时间：2012-12-15T08:26:33.470
> 
> 标签：jquery, html, class, css, 3d

我正在寻找一种很好的方法来提示 css3 3d 转换，方法是使用 JQuery 向 html 标记添加类。我有一个这样的菜单：

```
<ul>
    <li class="menu1"><a href="#">Item 1</a></li>
    <li class="menu2"><a href="#">Item 2</a></li>
    <li class="menu3"><a href="#">Item 3</a></li>
    <li class="menu4"><a href="#">Item 4</a></li>
    <li class="menu5"><a href="#">Item 5</a></li>
    <li class="menu6"><a href="#">Item 6</a></li>
</ul> 
```

例如，如果单击“.menu1 a”，我想将“show1”类添加到 html 标记中。'show2' 如果单击 '.menu2 a' 等。

然而，为了让我的转换正常工作，我还需要添加另一个类，然后在 3 秒等设定时间后删除。因此，如果单击“.menu1 a”，则 html 类将“show1 zoom”持续 3 秒，然后只是“show1”。如果单击“.menu2 a”，则 html 类将是“show2 twirl”。

我不介意在脚本中手动设置转换的名称（缩放、旋转等），但如果它更容易/更整洁，我可以在 li 上使用类系统，例如 'menu1 p-show1 t-zoom '。

我在[这里](http://codepen.io/daviestar/pen/tpoJc)有一个半成品的例子。如果您检查 html 标记（单击 html 旁边的齿轮）并将 html 类从“show1”更改为“show2 zoom”，您将看到所需的过渡，应该是立方体旋转到正确的一侧 (.show2) 以及顶部的花式过渡（.zoom）。除了我根本无法工作的 .js 之外，一切都正常工作！

**新的演示[在这里](http://static.houseofyum.co.uk/cube/)。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T08:50:33.470

[**旧 CodePen 演示**](http://codepen.io/joe/pen/JlCjH)

PS我认为这些过渡很棒！

**编辑：**

修复前 3 秒点击转换错误的代码更改：

```
var currentShow, currentTransition, currentTimeout;

$('.menu ul li a').click(function() {
    var $this = $(this);
    var $li = $this.closest('li');
    var index = $li.attr('class').replace(/menu/, '');
    var $html = $li.closest('html');

    $html.removeClass(currentShow);

    if (currentTransition) {
        $html.removeClass(currentTransition);
        clearTimeout(currentTimeout);
        setTimeout(function () {
            DoTransition(index, $html); 
        },50);
    } else {
        DoTransition(index, $html); 
    }

});

function DoTransition(index, $html) {
    currentShow = 'show'.concat(index);
    currentTransition = GetTransitionString(index);

    $html.addClass(currentShow + ' ' + currentTransition);

    currentTimeout = setTimeout(function() {
        $html.removeClass(currentTransition);
        currentTransition = null;
    }, 3000);
}

function GetTransitionString(index) {
    var transition;

    switch (parseInt(index)) {
        case 1:
            transition = 'zoom';
            break;
        case 2:
            transition = 'zoom';
            break;
        case 3:
            transition = 'zoom';
            break;
        case 4:
            transition = 'zoom';
            break;
        case 5:
            transition = 'zoom';
            break;
        case 6:
            transition = 'zoom';
            break;
    }

    return transition;
} 
```

[**更新的 CodePen 演示**](http://codepen.io/zebra/pen/yCeLB)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T14:40:03.290

这是一个精简版：

```
$('.menu ul li a').click(function() {
    var i = $(this).parent('li').index() + 1, 
       mc = $(this).parent('li').attr('class'),
      trg = $(this).closest('html'),
       cc = trg.attr('class'),
       newclass;
       switch (i) {
           case 1: var effect = 'zoom';
               break;
           case 2: var effect = 'spin-light';
               break;
           case 3: var effect = 'stutter';
               break;
           case 4: var effect = 'flatten';
               break;
           case 5: var effect = 'wander';
               break;
           case 6: var effect = 'open';
               break;                               
       }
      newclass = mc+' show'+i+' '+effect+' -webkit-';
      trg.attr('class', newclass).delay(3000).queue(function(){$(this).removeClass(effect);$(this).dequeue();}); 
}); 
```

我研究了很长时间的 CSS 动画问题。只有边 1 和边 2 有可点击的菜单。由于某种原因，其他方面遇到了问题。右键单击并检查元素将我带到立方体包装器。根据我所做的研究，我猜这`::before`与`::after` [更多信息有关](http://webdesign.tutsplus.com/tutorials/htmlcss-tutorials/css3-animations-the-hiccups-and-bugs-youll-want-to-avoid/)

我希望这一切都有帮助。

# php - 需要从php中获取json格式

> ID：13890616
> 
> 赞同：0
> 
> 时间：2012-12-15T08:26:44.387
> 
> 标签：php, json

**我得到这样的 json 格式**

```
[{"service":{"title":"karthik","city":"chennai"}},{"service":{"title":"siva","city":"madurai"}}] 
```

**从代码**

```
$rt = array();
$rt["service"]["title"] = karthik;
$rt["service"]["city"] = chennai;

$t = array();
$t["service"]["title"] = siva;
$t["service"]["city"] = madurai;

echo json_encode(array($rt,$t)); 
```

**但我需要此代码的相同格式的 json 结果**

```
$a=mysql_query("SELECT  title,city,category,parentid,pay,task.id 
FROM task");
while($row=mysql_fetch_array($a))
{
$jsonrow=new stdClass;
$jsonrow->title=$row['title'];
$jsonrow->city=$row['city'];

$jsonresponse=new stdClass;
$jsonresponse->service=$jsonrow;

}

echo json_encode(array($jsonresponse)); 
```

**但实际上我从上面的代码得到的结果是**

```
[{"service":{"title":"Event Help","city":"Santa Fe"}}] 
```

请有人帮我解决这个问题......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T08:33:25.280

使用数组存储查询返回的所有值

```
$array = array();
$a=mysql_query("SELECT  title,city,category,parentid,pay,task.id 
FROM task");
while($row=mysql_fetch_array($a))
{
  $jsonrow=new stdClass;
  $jsonrow->title=$row['title'];
  $jsonrow->city=$row['city'];

  $jsonresponse=new stdClass;
  $jsonresponse->service=$jsonrow;
  $array[] = $jsonresponse;
}

echo json_encode(array($array)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T08:33:07.573

你正在覆盖`$jsonresponse`你的while循环，你应该把它添加到数组和`json_encode`这个数组中

```
$response = array();

while( ... ){
    ...
    $response[] = $jsonresponse;
}
echo json_encode($response); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T08:31:19.597

试试这样

```
 $a=mysql_query("SELECT  title,city,category,parentid,pay,task.id  FROM
  task");

  $jsonrow=new stdClass;
  $jsonresponse=new stdClass;
  while($row=mysql_fetch_array($a)) {

  $jsonrow->title=$row['title']; $jsonrow->city=$row['city'];    
  $jsonresponse->service=$jsonrow;

   } 
```

# css - 如何使用 compass sass 生成具有最少空白空间的精灵？

> ID：13890619
> 
> 赞同：0
> 
> 时间：2012-12-15T08:27:16.727
> 
> 标签：css, compass-sass, css-sprites

如何使用 compass sass 生成具有最少空白空间的精灵？
我找不到任何设置选项来获得精灵图功能的智能布局。
但我发现

```
$dropcap-layout:smart
@import "dropcap/*.png";
can do the job. 
```

但不适用于精灵图功能。有人帮忙吗？

```
$map: sprite-map("sprite_common/*.png");
%sprite_common{
    background-image: sprite-url($map);
    background-repeat: no-repeat;
}

@mixin common_output($sprite){
    @extend %sprite_common;
    width: image-width(sprite-file($map, $sprite));
    height: image-height(sprite-file($map, $sprite));
    background-position: sprite-position($map,$sprite);
}

.top_tabs .arrow{
    @include common_output(checkout_setting__crumb_arrow);
} 

.uc_pagination .previous .arrow{
    @include common_output(account__center_prev_page);
}
...... 
```

![在此处输入图像描述](../Images/7e809423c23c895a6e832a43ee2e31d6.png)

顺便说一句，如何生成没有随机字符的精灵 png？
例如，我想要 sprite_common.png 但不是 sprite_common-s2788fbf16e.png

# c# - WPF：图中的宽度列

> ID：13890623
> 
> 赞同：0
> 
> 时间：2012-12-15T08:27:38.980
> 
> 标签：c#, wpf, graph, charts

我正在写作是因为我对 wpf 及其图形有疑问。基本上，我想创建一个柱形图。我的问题是我无法设置列的宽度。在互联网上，我只看到了固定宽度的列的示例。

我的 XAML 代码是这样的：

```
<Grid Height="871" Width="572">
        <chartingToolkit:Chart Height="337" HorizontalAlignment="Left"    Margin="65,0,0,496" Name="columnChart" Title="Column Series Demo" VerticalAlignment="Bottom" Width="440">
            <chartingToolkit:Chart.Axes>
                <chartingToolkit:LinearAxis Title="Wireless Power" Orientation="Y" Interval="100" />
                <chartingToolkit:LinearAxis Title="Time" Orientation="X" Interval="100" />
            </chartingToolkit:Chart.Axes>
            <chartingToolkit:ColumnSeries Name="myGraph" IndependentValuePath="Key" ItemsSource="{Binding}" AnimationSequence="FirstTo"/>             
        </chartingToolkit:Chart>
</Grid> 
```

后面的代码是：

```
private void showColumnChart(){

    List<KeyValuePair <int, int>> valueList = new List<KeyValuePair<int, int>>();
    valueList.Add(new KeyValuePair<int, int>(12, 55));
    valueList.Add(new KeyValuePair<int, int>(15, 60));
    columnChart.DataContext = valueList;
} 
```

现在，我的目的是代表我白天无线的强度。但是可能有没有连接的时候，那么电源就没有了，或者有的时候，例如，从晚上 7 点到晚上 8 点，信号强度等于-78db。我以前收集在一个数据库中，现在我想代表它们。所以我的目标是，例如考虑 24 小时的时间间隔，将条形图放在图表上，其中 x 轴是无线功率的检测时间，而 y 轴是功率。

我希望我已经解释清楚了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T10:22:06.297

事实上，与您分享我的 Wpf-toolkit / 图表实验：我希望我从未在我的磁盘上安装过它。
使用它会更快：

1.  画布。（甚至是一个很好的旧网格）。
2.  对象的一个​​或多个 DataTemplate。
3.  处理缩放的控制器对象（如果需要）。
4.  然后是 Canvas 中的 ItemControl，绑定到 ObservableCollection。

毕竟，条形图只不过是一组样式化的矩形......

我的建议：避免使用 Wpf 工具包，它没有记录。不可能有一个清晰的想法，例如，如何根据需要处理颜色。当您检查对象时，论坛上的一些教程/答案根本无法应用：规格更改了很多次。
因此，要么图表的预设适合你，然后去做，但如果你想自由设计你的组件，你自己或选择一个记录/工作的库会更好。

如果你去另一个库，我帮不了你更多：谷歌是你的朋友，
如果你想自己做，我很快就让你开始了：

![条形图示例的快照](../Images/a2f5c8b1d720827490374bf167923b0e.png)

```
<Window x:Class="MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:l="clr-namespace:WpfApplication1"
        Title="MainWindow"
        Width="525"
        Height="350"
        Loaded="Window_Loaded">
    <Window.Resources>
        <DataTemplate DataType="{x:Type l:Datata}">
            <Rectangle Width="10"
                       Height="{Binding SomeValue}"
                       VerticalAlignment="Bottom"
                       Margin="10,0"
                       Fill="Black" />
        </DataTemplate>

    </Window.Resources>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="10" />
            <ColumnDefinition />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition />
            <RowDefinition Height="10" />
        </Grid.RowDefinitions>
        <!--  Vertical Axis  -->
        <Path Grid.Row="0"
              Grid.RowSpan="2"
              Grid.Column="0"
              Stretch="Fill"
              Stroke="Black"
              StrokeThickness="2">
            <Path.Data>
                <LineGeometry StartPoint="0,0" EndPoint="0,1" />
            </Path.Data>
        </Path>
        <!--  Horizontal axis  -->
        <Path Grid.Row="1"
              Grid.Column="0"
              Grid.ColumnSpan="2"
              Stretch="Fill"
              Stroke="Black"
              StrokeThickness="2">
            <Path.Data>
                <LineGeometry StartPoint="0,0" EndPoint="1,0" />
            </Path.Data>
        </Path>

        <StackPanel Orientation="Horizontal"  Margin="0,5" >
           </StackPanel>
        <ItemsControl    Grid.Row="0" Grid.Column="1"   ItemsSource="{Binding AllValues}"  VerticalAlignment="Bottom">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Horizontal"/>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
        </ItemsControl>
    </Grid>
</Window> 
```

# dll - 从导入的 DLL 调用 Metatrader MQL4/MQL5 函数

> ID：13890624
> 
> 赞同：7
> 
> 时间：2012-12-15T08:27:49.723
> 
> 标签：dll, metatrader4, mql4, metatrader5, mql5

我想从我自己在 Metatrader 中导入的 DLL 调用 MQL4 或 MQL5 函数。

是否可以？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T10:43:25.553

森林，

就我在过去 2 年使用 MetaTrader 的经历而言，没有真正的方法可以从外部 DLL 调用 MQL 函数。但是有一些自定义构建的 API 与您想要实现的目标非常相似：

[MT4 API](http://www.mt4api.net/)

[MetaTrader™ Java / .Net API](http://www.nj4x.com/)

这些 API 在某种程度上允许您使用开箱即用的 MQL 功能

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-13T21:55:30.030

# 原则

在外汇领域数百人*年之后，除了尝试将水推上山或支付 500 美元以上的工具包之外，还有另一种方法可以与其他流程协调顺畅而优雅的 MT4 终端合作，这将停止一旦构建 524-> 构建 562-> 构建 586-> 构建 600-> 构建 609-> 构建 624->... 再次移动，就可以在下一次冲击时工作

# 一个不存在的玩具

是的，MT4 架构并没有公开它自己的接口，以允许自己被通过 DLL 等处理外部低级调用的不确定义务“干扰”。

# 如何修复它

尽管如此，可以颠倒架构并使 MT4 终端充当轻量级瘦客户端，运行智能消息库，通过该库暴露 MT4 功能以进行远程调用 (RPC)。

# 例子

通过这种方式，`Python`节点可以收集 MT4 数据进行数值处理，

与`PHP`节点并行处理远程系统日志的方式相同，

与`C++`节点可以集成另一个任务的方式相同，

同样，另一个`Python`节点可以充当 CLI 终端界面，使用自定义特定脚本语法语言通过命令行/stdio 命令 MetaTrader 端活动

简单——无论您的应用程序基础设施需要什么，都可以通过这种方式完成

（甚至可以改进本机 MT4 线程的较差实时特性，以获得更好的软实时可预测性和低延迟的大规模并行架构.. 并且仍然处于更安全的一面，免受鱼雷攻击由任何下一个“新”-MQL4 )

**nota bene：**想象一下无形的威胁，“new”中的 headbang 碰撞**`MQL4.56789`**，除其他外**`string`**，虽然被语法提出为字符串，但实际上不是 a`string`而是 a**`struct`**并且您之前所有与 DLL 相关的工作只是有要重新工作和环绕以模拟字符串结构或新的 DLL 接口，必须针对这些情况设计，这些情况在缓冲中返回一个值`ArrayOfBYTEs`，哪`MQL4.56789`一方可以接收和处理，但它不能释放它自己和内存泄漏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-04T17:28:02.580

如果您的 DLL 是一个 .NET DLL 是可以接受的，那么您可以尝试 这个名为 NQuotes 的[MT4 .NET集成库。](http://www.nquotes.net)

使用这个库，可以从您的 DLL 访问任何 MQL4 函数。

# java - 在特定单词之后打印字符串的其余部分

> ID：13890644
> 
> 赞同：1
> 
> 时间：2012-12-15T08:31:57.453
> 
> 标签：java, string, word

我有一个字符串

> saya dan anda saya dan adik dan ayah,saya dan siapa?

在我的程序中，用户输入一个单词，然后程序只显示单词后面的字符串。例如我输入

> 安达

我想要的输出是

> saya dan adik dan ayah,saya dan siapa?

我有这个代码

```
String kalimat = "saya dan anda saya dan adik dan ayah,saya  dan siapa?";
int kataSebelum = kalimat.indexOf("anda");
if (kataSebelum > 0){
kalimat = kalimat.substring(kataSebelum);
 System.out.println("Kalimat baru = " +kalimat); 
```

但我得到了

> anda saya dan adik dan ayah,saya dan siapa?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T08:40:31.880

`kalimat.indexOf("anda");`返回 的起始索引`"anda"`。将 的长度添加`"anda"`到该索引以获取匹配后开始的子字符串。

```
kalimat = kalimat.substring(kataSebelum + "anda".length()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T08:42:32.180

```
public static void main(String[] args) {
        String str = "the quick brown fox jumps over the lazy dog";
        String remove = "quick";
        int length = remove.length();
        int idx = str.indexOf(remove);
        System.out.println("idx: " + idx);
        String output = str.substring(idx + length + 1); // add one more for the whitespace
        System.out.println(output);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T08:43:57.130

```
 String kalimat = "saya dan anda saya dan adik dan ayah,saya  dan siapa?";
            int kataSebelum = kalimat.indexOf("anda");
            if (kataSebelum > 0){
            kalimat = kalimat.substring(kataSebelum+inputStr.length());
             System.out.println("Kalimat baru = " +kalimat);
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T08:44:43.917

`String.indexOf(String str)`将返回与 str 匹配的第一个字符的位置。所以你需要做的就是用str的长度来抵消这个值。

```
String kalimat = "saya dan anda saya dan adik dan ayah, saya dan siapa?";
int kataSebelum = kalimat.indexOf("anda");
if(kataSebelum > 0) {
    kataSebelum += "anda".length();
    kalimat = kalimat.substring(kataSebelum);
    System.out.println("Kalimat baru = " + kalimat);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-15T08:45:28.900

试试这个：

```
String kalimat = "saya dan anda saya dan adik dan ayah,saya  dan siapa?";
int kataSebelum = kalimat.indexOf("anda")+"anda".length;
if (kataSebelum >= "anda".length){
kalimat = kalimat.substring(kataSebelum);
System.out.println("Kalimat baru = " +kalimat); 
```

# java - 接口实现是否曾经需要/使用过 Java @Override 注释？

> ID：13890649
> 
> 赞同：0
> 
> 时间：2012-12-15T08:32:48.730
> 
> 标签：java, eclipse, annotations, overriding

我已经下载了一个开源 Java 项目，`JMapViewer`.

[http://svn.openstreetmap.org/applications/viewer/jmapviewer/](http://svn.openstreetmap.org/applications/viewer/jmapviewer/)

将其导入 Eclipse 后，会出现许多编译器错误，所有这些错误都与`@Override`从接口实现的方法前面的符号有关。我完全理解这个错误，因为我只会将`@Override`符号用于覆盖超类方法（扩展，而不是实现）的方法，我认为这是唯一的预期用途（即使这样我也不认为它是必需的） .

这个项目已经有 4 个月没有维护了，但是它确实有很长的修改历史和社区贡献。如果它们阻止编译，我无法弄清楚为什么这些`@Override`注释会存在，但根据我的经验，我不得不考虑那些将它们放在那里的人，以前的项目贡献者，有一些我不清楚的充分理由。项目文档说它是为 JDK 1.5 使用而设计的，所以我尝试在 Eclipse 中交替在 1.5、1.6 和 1.7 下编译它，并且在每种情况下结果都是一样的......编译器对那些非常不满意符号是它们所在的位置。

所以......我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T08:34:27.450

这取决于您使用的是 Java 5 还是 Java 6。`@Override`仅在 Java 6 中添加了接口重写方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T08:34:55.463

您看到的文档是正确的。`@override`自 JDK 1.6 起，编译器应在实现接口方法的方法上接受

尝试从命令行编译以确保它不是 eclipse 仍在使用 1.5 编译器。

# c# - 无论如何在不安装本地 TFS 服务器的情况下测试 TFS Api

> ID：13890656
> 
> 赞同：0
> 
> 时间：2012-12-15T08:33:39.860
> 
> 标签：c#, asp.net, tfs

我需要使用 TFS API 编写概念证明（从 tfs 服务器获取有关工作项的数据并将这些数据放入我们的表中）。

任何机构都可以建议一种方法来做到这一点，而无需设置我自己的 TFS 服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T10:43:27.880

您可以在 MS Cloud TFS 上设置一个，现在位于[tfs.visualstudio.com](http://tfs.visualstudio.com/)（以前称为 TFSPreview.com。

> 使用 TFS，您的代码可以从任何地方访问。您可以直接从 Visual Studio 和 Eclipse 签入代码，也可以使用命令行工具从 Xcode 和其他 IDE 签入代码。由于一切都在云中，您的团队可以快速开始，无需管理基础设施。

# symfony - Symfony2：如何在不配置虚拟主机的情况下在根目录运行应用程序

> ID：13890658
> 
> 赞同：0
> 
> 时间：2012-12-15T08:33:47.027
> 
> 标签：symfony, directory, root

我使用 iPage 作为主机，我无法编辑虚拟主机，应用程序现在运行在

```
http://www.xxxx.com/Symfony/web/app_dev.php 
```

是否有可能做出一些让我在这个 URL 中运行的技巧：

```
http://www.xxxx.com/app_dev.php 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T11:32:09.357

是的。看看这里：

[Symfony 2：如何从共享主机的 url 中删除“/web/”文件夹？](https://stackoverflow.com/questions/11929435/symfony-2-how-to-remove-the-web-folder-from-the-url-in-a-shared-hosting/11936099#11936099)

因此，您需要将所有“网络”内容复制到 public_html（网络根目录）中，并将其余部分放在同一级别：每个目录（如 src、供应商等）（就像我给你的例子一样）

# javascript - 使用javascript在文件上传中查找文件大小

> ID：13890659
> 
> 赞同：0
> 
> 时间：2012-12-15T08:33:52.767
> 
> 标签：javascript, asp.net

我想在文件上传控件中调整文件的大小。我在 Internet Explorer 中遇到错误。但这是在其他浏览器中工作的代码。以下代码

```
var fuDocument = document.getElementById('<%= fupAttachment.ClientID %>');
  var file = fuDocument.files[0];
            if (file != null) {
                var fileSize = file.size;
} 
```

错误“files.0”为空或不是对象

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T09:15:15.817

我唯一能想到的就是使用那些好的 ol' ActiveX 对象：

```
var axFile = new ActiveXObject("Scripting.FileSystemObject");
var fileObj = axFile.getFile(document.getElementById('<%= fupAttachment.ClientID %>').value);
var fileSize = {bytes: fileObj.size,
                kBytes: Math.round(fileObj.size/1024),
                mBytes: Math.round((fileObj.size/1024)/1024)}; 
```

这应该为旧版本的 IE 提供支持，完整版本*可能*类似于：

```
var axFile, fileSize, 
fuDocument = document.getElementById('<%= fupAttachment.ClientID %>');
if (fuDocument.files)
{
    fileSize = fuDocument.files[0].size || 0;//default value = 0
}
else
{
    axFile = new ActiveXObject("Scripting.FileSystemObject");
    fileSize = (axFile.getFile(fuDocument.value) || {size:0}).size;//default to object literal, with size: 0 property --> avoids errors, and defaults to size value of zero
}
return fileSize;//console.log, alert... whatever you want 
```

# phpexcel - phpexcel折线图不采用单元格值

> ID：13890662
> 
> 赞同：2
> 
> 时间：2012-12-15T08:34:20.007
> 
> 标签：phpexcel

我正在使用 php excel 生成图表，但它不采用单元格值。作为参考，您可以参考[http://uvresins.net/images/xls.png](http://uvresins.net/images/xls.png)

我的图表变量返回：

PHPExcel_Chart 对象 (

```
[_name:PHPExcel_Chart:private] => chart1
[_worksheet:PHPExcel_Chart:private] => 
[_title:PHPExcel_Chart:private] => PHPExcel_Chart_Title Object
    (
        [_caption:PHPExcel_Chart_Title:private] => Scgcc
        [_layout:PHPExcel_Chart_Title:private] => 
    )

[_legend:PHPExcel_Chart:private] => PHPExcel_Chart_Legend Object
    (
        [_position:PHPExcel_Chart_Legend:private] => tr
        [_overlay:PHPExcel_Chart_Legend:private] => 
        [_layout:PHPExcel_Chart_Legend:private] => 
    )

[_xAxisLabel:PHPExcel_Chart:private] => 
[_yAxisLabel:PHPExcel_Chart:private] => PHPExcel_Chart_Title Object
    (
        [_caption:PHPExcel_Chart_Title:private] => Value ($k)
        [_layout:PHPExcel_Chart_Title:private] => 
    )

[_plotArea:PHPExcel_Chart:private] => PHPExcel_Chart_PlotArea Object
    (
        [_layout:PHPExcel_Chart_PlotArea:private] => 
        [_plotSeries:PHPExcel_Chart_PlotArea:private] => Array
            (
                [0] => PHPExcel_Chart_DataSeries Object
                    (
                        [_plotType:PHPExcel_Chart_DataSeries:private] => lineChart
                        [_plotGrouping:PHPExcel_Chart_DataSeries:private] => stacked
                        [_plotDirection:PHPExcel_Chart_DataSeries:private] => 
                        [_plotStyle:PHPExcel_Chart_DataSeries:private] => 
                        [_plotOrder:PHPExcel_Chart_DataSeries:private] => Array
                            (
                                [0] => 0
                                [1] => 1
                                [2] => 2
                            )

                        [_plotLabel:PHPExcel_Chart_DataSeries:private] => Array
                            (
                                [0] => PHPExcel_Chart_DataSeriesValues Object
                                    (
                                        [_dataType:PHPExcel_Chart_DataSeriesValues:private] => String
                                        [_dataSource:PHPExcel_Chart_DataSeriesValues:private] => Worksheet!$B$1
                                        [_formatCode:PHPExcel_Chart_DataSeriesValues:private] => 
                                        [_marker:PHPExcel_Chart_DataSeriesValues:private] => 
                                        [_pointCount:PHPExcel_Chart_DataSeriesValues:private] => 1
                                        [_dataValues:PHPExcel_Chart_DataSeriesValues:private] => Array
                                            (
                                            )

                                    )

                                [1] => PHPExcel_Chart_DataSeriesValues Object
                                    (
                                        [_dataType:PHPExcel_Chart_DataSeriesValues:private] => String
                                        [_dataSource:PHPExcel_Chart_DataSeriesValues:private] => Worksheet!$C$1
                                        [_formatCode:PHPExcel_Chart_DataSeriesValues:private] => 
                                        [_marker:PHPExcel_Chart_DataSeriesValues:private] => 
                                        [_pointCount:PHPExcel_Chart_DataSeriesValues:private] => 1
                                        [_dataValues:PHPExcel_Chart_DataSeriesValues:private] => Array
                                            (
                                            )

                                    )

                                [2] => PHPExcel_Chart_DataSeriesValues Object
                                    (
                                        [_dataType:PHPExcel_Chart_DataSeriesValues:private] => String
                                        [_dataSource:PHPExcel_Chart_DataSeriesValues:private] => Worksheet!$D$1
                                        [_formatCode:PHPExcel_Chart_DataSeriesValues:private] => 
                                        [_marker:PHPExcel_Chart_DataSeriesValues:private] => 
                                        [_pointCount:PHPExcel_Chart_DataSeriesValues:private] => 1
                                        [_dataValues:PHPExcel_Chart_DataSeriesValues:private] => Array
                                            (
                                            )

                                    )

                            )

                        [_plotCategory:PHPExcel_Chart_DataSeries:private] => Array
                            (
                                [0] => PHPExcel_Chart_DataSeriesValues Object
                                    (
                                        [_dataType:PHPExcel_Chart_DataSeriesValues:private] => String
                                        [_dataSource:PHPExcel_Chart_DataSeriesValues:private] => Worksheet!$A$2:$A$6
                                        [_formatCode:PHPExcel_Chart_DataSeriesValues:private] => 
                                        [_marker:PHPExcel_Chart_DataSeriesValues:private] => 
                                        [_pointCount:PHPExcel_Chart_DataSeriesValues:private] => 5
                                        [_dataValues:PHPExcel_Chart_DataSeriesValues:private] => Array
                                            (
                                            )

                                    )

                            )

                        [_smoothLine:PHPExcel_Chart_DataSeries:private] => 
                        [_plotValues:PHPExcel_Chart_DataSeries:private] => Array
                            (
                                [0] => PHPExcel_Chart_DataSeriesValues Object
                                    (
                                        [_dataType:PHPExcel_Chart_DataSeriesValues:private] => Number
                                        [_dataSource:PHPExcel_Chart_DataSeriesValues:private] => Worksheet!$B$2:$B$6
                                        [_formatCode:PHPExcel_Chart_DataSeriesValues:private] => 
                                        [_marker:PHPExcel_Chart_DataSeriesValues:private] => 
                                        [_pointCount:PHPExcel_Chart_DataSeriesValues:private] => 5
                                        [_dataValues:PHPExcel_Chart_DataSeriesValues:private] => Array
                                            (
                                            )

                                    )

                                [1] => PHPExcel_Chart_DataSeriesValues Object
                                    (
                                        [_dataType:PHPExcel_Chart_DataSeriesValues:private] => Number
                                        [_dataSource:PHPExcel_Chart_DataSeriesValues:private] => Worksheet!$C$2:$C$6
                                        [_formatCode:PHPExcel_Chart_DataSeriesValues:private] => 
                                        [_marker:PHPExcel_Chart_DataSeriesValues:private] => 
                                        [_pointCount:PHPExcel_Chart_DataSeriesValues:private] => 5
                                        [_dataValues:PHPExcel_Chart_DataSeriesValues:private] => Array
                                            (
                                            )

                                    )

                                [2] => PHPExcel_Chart_DataSeriesValues Object
                                    (
                                        [_dataType:PHPExcel_Chart_DataSeriesValues:private] => Number
                                        [_dataSource:PHPExcel_Chart_DataSeriesValues:private] => Worksheet!$D$2:$D$6
                                        [_formatCode:PHPExcel_Chart_DataSeriesValues:private] => 
                                        [_marker:PHPExcel_Chart_DataSeriesValues:private] => 
                                        [_pointCount:PHPExcel_Chart_DataSeriesValues:private] => 5
                                        [_dataValues:PHPExcel_Chart_DataSeriesValues:private] => Array
                                            (
                                            )

                                    )

                            )

                    )

            )

    )

[_plotVisibleOnly:PHPExcel_Chart:private] => 1
[_displayBlanksAs:PHPExcel_Chart:private] => 0
[_topLeftCellRef:PHPExcel_Chart:private] => A13
[_topLeftXOffset:PHPExcel_Chart:private] => 0
[_topLeftYOffset:PHPExcel_Chart:private] => 0
[_bottomRightCellRef:PHPExcel_Chart:private] => H30
[_bottomRightXOffset:PHPExcel_Chart:private] => 10
[_bottomRightYOffset:PHPExcel_Chart:private] => 10 
```

)

AND FromArray 有值：

大批 （

[0] => 数组 (

```
 [0] => 

        [1] => 12/2011

        [2] => 01/2012

        [3] => 02/2012
    )

[1] => Array
    (
        [0] => QATAR
        [1] => 102.77
        [2] => 100
        [3] => 102.13
    )

[2] => Array
    (
        [0] => SAUDI ARABIA
        [1] => 102.74
        [2] => 100
        [3] => 98.22
    )

[3] => Array
    (
        [0] => KUWAIT
        [1] => 94.82
        [2] => 100
        [3] => 102.28
    )

[4] => Array
    (
        [0] => U.A.E.
        [1] => 101.22
        [2] => 100
        [3] => 99.94
    )

[5] => Array
    (
        [0] => OMAN
        [1] => 101.73
        [2] => 100
        [3] => 100.42
    ) 
```

)

请告诉我我这边出了什么问题，如果没有，那么 y 图表不会出现。

# html - CSS 下拉菜单

> ID：13890666
> 
> 赞同：0
> 
> 时间：2012-12-15T08:34:52.847
> 
> 标签：html, css

我正在尝试创建 2 级下拉菜单。我有点靠近并卡住了。请协助我完成它。

这是**[JsBin](http://jsbin.com/eyarap/7/edit)**

```
 li{list-style:none;line-height:30px;}
 a{text-decoration:none;color:#c3c3c3;font-family:consolas;width:100%;}
 a:hover{color:white;}

 li{padding:5px;background-color:#5970B2;}

 /*li*/a:hover{background-color:grey;}
 ul#sddm{position:relative;}

 ul#sddm ul{display:none;}

 ul#sddm>li{float:left;}

 ul#sddm>li:hover>ul 
 {white-space: nowrap;display:block;position:absolute;margin:0;padding:0;}

 ul#sddm ul li:hover ul
 {white-space: nowrap;display:block;margin-left:150px;
   position:absolute;margin-top:0;padding:0;}

 ul#sddm ul li:hover ul>li{} 
```

如果有人解释我做错了什么，这对我有好处..

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T09:13:08.077

这是演示[http://jsfiddle.net/dineshswami/4pLt3/1/的小提琴](http://jsfiddle.net/dineshswami/4pLt3/1/)

css的变化：

```
a{text-decoration:none;color:#c3c3c3;font-family:consolas; display:block;padding:2px;}

ul#sddm>li{float:left; position:relative;}

ul#sddm ul li:hover ul{white-space: nowrap;display:block;margin-left:150px;position:absolute;margin-top:0;padding:0;left:-2px;margin-top:-39px;} 
```

**html 的变化：**我删除了内联 css

问题：问题是您通过提供内联 css 来强制元素，因此它们无法正确对齐到它们想要的位置。你提到绝对的位置变化不大。所以我改变了你可以在上面的 CSS 中看到的 left 和 top 值。

正如我上面提到的问题，让我详细解释一下：

1.  要将标签扩展到`<a>`标签的整个宽度，`<li>`我刚刚删除了 css`width: 100%;`并添加了新的 css 规则`display:block;padding:2px;`

2.  为了调整第一个下拉宽度，我从 html 中删除了整个内联 css。因此所有元素都能够根据文本占据整个宽度。

3.  要调整第二级下拉，我将顶部和左侧属性设置为`left:-2px;margin-top:-39px;`为什么我这样做，因为在第一级下拉和第二级之间存在间隙，并且 margin-top 为 -39px，因为你已经给出了 line-height:30px; 这增加了高度，所以我设置了边距顶部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T09:23:14.303

更改顶部和左侧属性以调整我已编辑[jsdin](http://jsbin.com/eyarap/14/)

# jquery - 无序列表项 以编程方式给出时无法保留课程

> ID：13890668
> 
> 赞同：0
> 
> 时间：2012-12-15T08:34:54.603
> 
> 标签：jquery, asp.net

我的问题是我试图在单击项目时更改 li 项目的类。我成功了，但问题是 li 项目被赋予了课程，但它无法保留课程。

我的html和jquery是这样的

```
 $(document).ready(function () {        

            //On Click Event
            $("ul.tabs li").click(function () {

            $("ul.tabs li").removeclass("active"); //Remove any "active" class
            $(this).addClass("active"); //Add "active" class to selected tab                     

        });
    });

</script>

<div class="menu_nav">
     <ul class="tabs">
        <li><a href="default.aspx"><span>Home Page</span></a></li>
        <li><a href="support.aspx"><span>Support</span></a></li>
        <li><a href="aboutus.aspx"><span>About Us</span></a></li>
        <li><a href="services.aspx"><span>Services</span></a></li>
        <li><a href="contactus.aspx"><span>Contact Us</span></a></li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T08:48:35.227

> $("ul.tabs li").addClass("active"); //删除任何“活动”类

您在上面的语句中添加类，您需要使用[**removeClass()**](http://api.jquery.com/removeClass/)方法而不是添加类

**[现场演示](http://jsfiddle.net/rajaadil/WMdVv/)**

```
$("ul.tabs li").removeClass("active"); //this will remove active class from all tabs
$(this).addClass("active"); //Add "active" class to selected tab 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T09:34:14.460

您的代码是正确的，但这里有一个错字：

```
$("ul.tabs li").removeclass("active");
             //   ----^----------------make "c" in caps "C" 
```

并确保阻止链接的默认行为，否则您会刷新页面。

```
$("ul.tabs li").click(function (e) {
   e.preventDefault();
   // then all your code stuff here 
```

# r - R 根据次要字段条件获取数据帧上的唯一记录

> ID：13890669
> 
> 赞同：4
> 
> 时间：2012-12-15T08:35:01.773
> 
> 标签：r

更新和简化

我有一个非常大的表（约 700 万条记录），其结构如下。

```
temp <- read.table(header = TRUE, stringsAsFactors=FALSE,
                   text = "Website Datetime    Rating
A 2007-12-06T14:53:07Z        1
A 2006-07-28T03:52:26Z        4
B 2006-11-02T11:06:25Z        2
C 2007-06-19T06:56:08Z        5
C 2009-11-28T22:27:58Z        2
C 2009-11-28T22:28:13Z        2") 
```

我要检索的是每个网站具有最高评分的独特网站：

```
Website    Rating
A    4
B    2
C    5 
```

我尝试使用 for 循环，但它太慢了。有没有其他方法可以实现这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T10:08:53.953

```
 do.call( rbind, lapply( split(temp, temp$Website) , 
                               function(d) d[ which.max(d$Rating), ] ) )
  Website             Datetime Rating
A       A 2006-07-28T03:52:26Z      4
B       B 2006-11-02T11:06:25Z      2
C       C 2007-06-19T06:56:08Z      5 
```

由于您的“日期时间”变量实际上还不是日期或日期时间对象，因此您可能应该首先转换为日期对象。

`which.max`将选择最大的第一个项目。

```
>  which.max(c(1,1,2,2))
[1] 3 
```

所以阿难在这方面的警告可能不正确。数据表方法肯定会更快，如果机器内存适中，也可能会成功。上面的方法可能会沿途制作多个副本，而 data.table 函数不需要复制那么多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T09:27:23.740

我可能会探索该`data.table`软件包，但没有更多详细信息，以下示例解决方案很*可能* ***不是*** *您需要*的。我提到这一点是因为，特别是，每组匹配的“评分”记录可能不止一个`max`；你想如何处理这些案件？

```
library(data.table)
temp <- read.table(header = TRUE, stringsAsFactors=FALSE,
                text = "Website Datetime    Rating
                        A       2012-10-9   10
                        A       2012-11-10  12
                        B       2011-10-9   5")
DT <- data.table(temp, key="Website")
DT
#    Website   Datetime Rating
# 1:       A  2012-10-9     10
# 2:       A 2012-11-10     12
# 3:       B  2011-10-9      5
DT[, list(Datetime = Datetime[which.max(Rating)], 
          Rating = max(Rating)), by = key(DT)]
#    Website   Datetime Rating
# 1:       A 2012-11-10     12
# 2:       B  2011-10-9      5 
```

我建议为了获得*更好*的答案，您可能希望包含诸如日期时间变量如何影响您的聚合之类的信息，或者每个组是否可能有多个“最大值”值。

*如果您想要与最大值匹配的**所有**行，则修复很容易：*

```
DT[, list(Time = Times[Rating == max(Rating)], 
          Rating = max(Rating)), by = key(DT)] 
```

* * *

如果您确实只想要该`Rating`专栏，那么有*很多*方法可以解决这个问题。按照与上述相同的步骤转换为 a `data.table`，尝试：

```
DT[, list(Datetime = max(Rating)), by = key(DT)]
     Website Datetime
# 1:       A        4
# 2:       B        2
# 3:       C        5 
```

或者，保持原来的 "temp" `data.frame`，尝试`aggregate()`：

```
aggregate(Rating ~ Website, temp, max)
    Website Rating
# 1       A      4
# 2       B      2
# 3       C      5 
```

* * *

另一种方法，使用`ave`：

```
temp[with(temp, Rating == ave(Rating, Website, FUN=max)), ] 
```

# javascript - 如何反转 ul li javascript asp.net

> ID：13890670
> 
> 赞同：0
> 
> 时间：2012-12-15T08:35:20.457
> 
> 标签：javascript, html, html-lists

我有一个使用英文版和阿拉伯文版的 ul li 菜单。现在，在阿拉伯语版本中，菜单必须以相反的顺序排列，我们如何才能实现我的代码是

```
 <ul id="menu">
        <li><a href="../Default.aspx">
            <img src="../images/logoheader.png" height="24px" alt="Home" /></a></li>
        <li><a href="../Lgs.aspx?confirm=1">
            <%=Resources.Fields.lgs%></a> </li>
        <li><a href="../CustomPage.aspx?Pid=2">
            <%=Resources.Fields.aboutus%></a> </li>
        <li><a href="../Login.aspx?confirm=1">
            <%=Resources.Fields.login%>
        </a><a href="../Signup.aspx?confirm=1">
            <%=Resources.Fields.register%></a> </li>
            <li><a href="#">
                <%=Resources.Fields.more_new%></a></li>
    </ul> 
```

这将显示如下 LG | 关于我们 | 登录 | 注册 | 更多的

我想在javascript中像这样反转它

更多 | 注册 | 登录 | 关于我们 | LG | 家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T08:50:30.157

我的建议`li`是以适当的顺序在服务器端输出元素。

但是如果您想在客户端处理它：除非您需要支持 IE7 或更早版本，否则您不需要 JavaScript。

几个客户端选项供您选择：

1.  HTML`dir`属性*（不适用于 IE7 及更早版本，适用于 IE8 及更高版本）*

2.  CSS `direction: rtl` *（不适用于 IE7 及更早版本，适用于 IE8 及更高版本）*

3.  JavaScript *（甚至适用于 IE6）*

### 1\. HTML`dir`属性

您可以使用以下`dir`属性`ul`：

```
<ul id="menu" dir="RTL"> 
```

如果`li`元素是`inline-block`，那将颠倒它们的顺序。

[实例](http://jsbin.com/ejagen/1)| [来源](http://jsbin.com/ejagen/1/edit)

我建议在页面消失之前在服务器端应用该属性，但如果您需要在 JavaScript 中执行此操作：

```
document.getElementById("menu").dir = "RTL"; 
```

[实例](http://jsbin.com/ejagen/2)| [来源](http://jsbin.com/ejagen/2/edit)

### 2.CSS

您也可以通过应用 CSS 来做到这一点：

```
#menu {
  direction: rtl;
} 
```

[实例](http://jsbin.com/ejagen/3)| [来源](http://jsbin.com/ejagen/3/edit)

### 3\. JavaScript

但是 JavaScript 解决方案是按顺序遍历列表项，从第二个开始，然后使用`insertBefore`DOM 方法将每个项移到顶部。你最终的顺序颠倒了。看起来像这样：

```
var list = document.getElementById("menu");
var child, sibling;

if (list.childNodes.length > 1) {
  for (child = list.firstChild.nextSibling; child; child = sibling) {
    sibling = child.nextSibling;
    list.insertBefore(child, list.firstChild);
  }
} 
```

[实例](http://jsbin.com/ejagen/4)| [来源](http://jsbin.com/ejagen/4/edit)

* * *

以上所有内容都调整了`li`元素的顺序，但没有调整其中文本的方向，我假设您正在其他地方处理。但如果不是，只需将此 CSS 应用于您想要制作 RTL 而不是 LTR 的任何元素：

```
relevant_selector {
  direction:rtl;
  unicode-bidi:bidi-override;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T08:42:47.067

您将必须添加 jquery 并在正文中使用以下内容

```
 ul = $('#menu'); // your parent ul element
ul.children().each(function(i,li){ul.prepend(li)}); 
```

# python - pandas：生成并绘制平均值

> ID：13890673
> 
> 赞同：9
> 
> 时间：2012-12-15T08:35:45.310
> 
> 标签：python, matplotlib, plot, pandas

我有一个熊猫数据框，例如：

```
In [61]: df = DataFrame(np.random.rand(3,4), index=['art','mcf','mesa'],
                        columns=['pol1','pol2','pol3','pol4'])

In [62]: df
Out[62]: 
          pol1      pol2      pol3      pol4
art   0.661592  0.479202  0.700451  0.345085
mcf   0.235517  0.665981  0.778774  0.610344
mesa  0.838396  0.035648  0.424047  0.866920 
```

我想用跨基准策略的平均值生成一行，然后绘制它。

目前，我这样做的方式是：

```
df = df.T
df['average'] = df.apply(average, axis=1)
df = df.T
df.plot(kind='bar') 
```

有没有一种优雅的方法来避免双重换位？

我试过：

```
df.append(DataFrame(df.apply(average)).T)
df.plot(kind='bar') 
```

这将附加正确的值，但不会正确更新索引并且图表会混乱。

一个澄清。双转置的代码结果是这样的：![在此处输入图像描述](../Images/0c9a84dcad1f15c4063bec6f60fe550e.png) 这就是我想要的。显示政策的基准和平均值，而不仅仅是平均值。我只是好奇我能不能做得更好。

请注意，图例通常是混乱的。修复：

```
ax = df.plot(kind='bar')
ax.legend(patches, list(df.columns), loc='best') 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-15T09:36:15.513

您可以简单地使用 and 的实例方法`mean`而`DataFrame`不是绘制结果。不需要转置。

```
In [14]: df.mean()
Out[14]: 
pol1    0.578502
pol2    0.393610
pol3    0.634424
pol4    0.607450

In [15]: df.mean().plot(kind='bar')
Out[15]: <matplotlib.axes.AxesSubplot at 0x4a327d0> 
```

![政策.png](../Images/21a8e3910c5f389d054ed49596c234c3.png)

## 更新

如果要绘制所有列的条形图和平均值，则可以`append`表示：

```
In [95]: average = df.mean()

In [96]: average.name = 'average'

In [97]: df = df.append(average)

In [98]: df
Out[98]: 
             pol1      pol2      pol3      pol4
art      0.661592  0.479202  0.700451  0.345085
mcf      0.235517  0.665981  0.778774  0.610344
mesa     0.838396  0.035648  0.424047  0.866920
average  0.578502  0.393610  0.634424  0.607450

In [99]: df.plot(kind='bar')
Out[99]: <matplotlib.axes.AxesSubplot at 0x52f4390> 
```

![第二个情节](../Images/6309832053c97e7d4c0a49e17dfbc341.png)

如果您的布局不适合子图，[`tight_layout`](http://matplotlib.org/users/tight_layout_guide.html#tight-layout-guide)将调整 matplotlib 参数。

# c# - 从 png 文件添加剪贴画

> ID：13890675
> 
> 赞同：2
> 
> 时间：2012-12-15T08:36:10.583
> 
> 标签：c#, bmp

我在将剪贴画（来自 png 文件）添加到 bmp 对象时遇到问题。我在 jpeg 图像中添加了一些剪贴画，保存后，我得到了一个谜团：一些剪贴画存在于保存的图像中，但有些没有。

这是我如何将剪贴画添加到图像的代码：

```
 using (System.Drawing.Graphics gfx = System.Drawing.Graphics.FromImage(this._image))
        {
            gfx.CompositingMode = CompositingMode.SourceOver;
            gfx.CompositingQuality = CompositingQuality.HighQuality;
            gfx.InterpolationMode = InterpolationMode.HighQualityBicubic;

            gfx.DrawImage(image, posX, posY, newWidth, newHeight);
            gfx.Save();
        } 
```

谁能解释我做错了什么或为什么会出现这种情况？

编辑：当我在 ASP.NET 应用程序中使用此代码时会发生这种情况，当我在 Windows 应用程序中使用它时一切都很好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T09:12:29.900

我不确定这是否是您的问题的原因，但线`gfx.Save()`不会将您绘制的图像保存回图像，而是保存`Graphics`对象的状态。为了将更改保存回图像，请确保调用`Image.Save()`方法并仔细检查以确保您没有在代码中的某处恢复以前的图像。有关它`Graphics.Save`方法的更多信息可以在这里找到：http: [//msdn.microsoft.com/en-us/library/system.drawing.graphics.save](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.save(v=vs.100).aspx) (v=vs.100).aspx 。

**更新**

您在评论中写道，这是一个透明度问题。如果这是原因，请查看从文件加载剪贴画图像的代码。这也可能是由图像文件中使用的各种像素格式引起的。将您的图像加载算法更改为类似这样可以解决问题：

*   加载你的背景图片，假设它是这样完成的：`Image backgroundImg = new Bitmap(backgroundImgPath);`
*   创建一个新的空图像作为所有图像的基础：`this._image = new Bimap(backgroundImg.Width, backgroundImg.Height, PixelFormat.Format32bppArgb);`
*   `backgroundImg`用_ `this._image`_`gfx.CompositingMode = CompositingMode.SourceCopy;`
*   然后，您可以像现在一样绘制剪贴画（只需注释掉`gfx.Save();`方法）

让我知道这是否有帮助。

# java - JSF 读取文本文件

> ID：13890676
> 
> 赞同：-3
> 
> 时间：2012-12-15T08:36:19.533
> 
> 标签：java, javabeans

我一直在到处搜索有关如何使用 JSF 将 .txt 文件中的内容显示到网页上的信息，但没有成功。

从我的想法/猜测来看，基本的 jsf 形式将类似于

```
<h:outputText value="#{beanName.printTextFileMethod}"/> 
```

或者其他的东西。

关于如何设置 bean 的帮助表示赞赏。我尝试使用 InputStream/BufferedStream，只是试图摆脱代码中的红线时遇到了很多问题。此外，我在定义相对路径方面绝对是可怕的。绝对路径似乎不适用于输入流？

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T08:56:50.813

```
 public class TextFileBean{   
        String completeMessage = null;
         public TextFileBean(){
          try{
           //read data from the text file
           java.io.BufferedReader in=
              new java.io.BufferedReader(
                new java.io.InputStreamReader(
                  TextFileBean.this.getClass().
                   getResourceAsStream("txtFile.txt"
               )));
 System.out.println("in :" +in);
           readData(in);
           in.close();
           } catch (java.io.IOException IOex) {
             System.out.println("IO Error :" +IOex);
           }
         }    

        private void readData(BufferedReader br) {
        // dosomethig
        String line = null;     
        StringBuffer appendMessage = null;
        try {
            appendMessage = new StringBuffer(16384);
            while ((line = br.readLine()) != null) {
                appendMessage.append(line);
                appendMessage.append('\n');
            }
            if (appendMessage != null) {
                completeMessage = appendMessage.toString();
            }
        } catch (Exception e) {
        }

    }

    public String printTextFileMethod()
    {

        System.out.println("completeMessage:: "+ completeMessage);         
            return completeMessage;
     }

  } 
```

# javascript - 检测两个移动物体之间的碰撞

> ID：13890678
> 
> 赞同：1
> 
> 时间：2012-12-15T08:36:24.233
> 
> 标签：javascript, jquery, web-applications

我有一个基本的 Space Invaders 类型的游戏，我无法识别玩家的射击何时击中外星人。（我只检查 Alien2 atm，左起一秒）。由于它们都在移动，我决定检查碰撞的唯一方法是使用基于范围的 if 语句（具有 2 个顶部坐标和一个左侧坐标），或者直接将沿 Y 轴的位置与 Jquery 进行比较。

我目前正在使用基于范围的解决方案，但到目前为止它还没有奏效（不知道为什么）。

到目前为止我的代码：

```
 if (key == "87"/*&& document.getElementById('BarrelOne').id=='BarrelOne'*/){
            var Invader2 = document.getElementById('Alien2');
            var Shot1 = document.getElementById('ShortShot');
            Shot1.style.webkitAnimationPlayState="running";
            setTimeout(function(){
                Shot1.style.webkitAnimationPlayState="paused";
            }, 1200);   

            if(document.elementFromPoint(625.5, 265.5) == Shot1){
                Invader2.style.visibility="hidden"; 
            }
        }; 
```

小提琴：

[http://jsfiddle.net/ZJxgT/2/](http://jsfiddle.net/ZJxgT/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:01:32.257

我建议不要浪费时间重新发明轮子，而是建议切换（如果仍然可能，取决于你的时间期限）到[**一个真正的 2D 游戏引擎，用于 Javascript**](http://gamequeryjs.com)，[易于碰撞检测](http://gamequeryjs.com/demos/2/)。

还要检查：[Javascript 的 2D 引擎](https://stackoverflow.com/questions/10172191/2d-engines-for-javascript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T10:01:43.823

我做了类似的事情，我发现使用[gameQuery](http://gamequeryjs.com/)更容易实现。

测试碰撞：

```
var collided = $("#div1").collision("#div2"); 
```

[你可以在这里](http://gamequeryjs.com/demos/2/)看到完整的工作示例

**编辑**

如果您遇到问题，[请查看 API](http://gamequeryjs.com/documentation/api/)。例如，要了解如何使用冲突，请查看[API 的这一部分](http://gamequeryjs.com/documentation/api/#collision)。

`collision`作品如下：

> 此方法返回与所选元素冲突的元素列表，但仅返回与作为参数给出的过滤器匹配的元素列表。它需要两个可选参数（它们的顺序并不重要）。过滤器是用于检测碰撞的字符串过滤元素，它应该包含函数应该搜索碰撞的所有元素。例如，如果您寻找可能包含在组中的“foo”类元素的冲突，您将使用过滤器“.group,.foo”。

所以，写这样的东西：

```
$("#ShortShot").collision("#Alien2").hide();
// will return the alien if it collides with ShortShot 
```

或者，隐藏它们：

```
if (($("#ShortShot").collision("#Alien2")).length) {
    $("#ShortShot").remove();
    $("#Alien2").remove();
} 
```

# delphi - 在 Delphi 中使自定义拖动图像不透明

> ID：13890680
> 
> 赞同：9
> 
> 时间：2012-12-15T08:36:24.313
> 
> 标签：delphi, drag-and-drop

我已经毫无问题地实现了自定义拖动图像。

我从**TDragControlObject**继承了一个类并覆盖了它的**GetDragImages**函数并将位图添加到**TDragImageList**，使白色像素透明。

它可以工作，白色像素是不可见的（透明的），但剩余的位图不是不透明的。

有没有办法改变拖动对象的这种行为？

![在此处输入图像描述](../Images/c3536d0149c8ace436a2046c4e6b6a65.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-15T15:52:06.467

您可以使用[`ImageList_SetDragCursorImage`](http://msdn.microsoft.com/en-us/library/bb775221%28v=vs.85%29.aspx). 这通常用于提供拖动图像与光标图像的合并图像，然后通常隐藏真实光标以防止混淆（显示两个光标）。

系统不会像拖动图像那样将光标图像与背景混合。因此，如果您提供与光标图像相同的拖动图像，在相同的偏移量处，并且不隐藏实际的光标，您最终会得到一个带有光标的*不透明拖动图像。*（类似地，可以使用一个空的拖动图像，但我发现前一种设计更容易实现。）

下面的示例代码 (XE2) 使用 W7x64 并在带有 XP 的 VM 中进行了测试。

```
unit Unit1;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants,
  System.Classes, Vcl.Graphics, Vcl.Controls, Vcl.Forms, Vcl.Dialogs,
  Vcl.StdCtrls;

type
  TForm1 = class(TForm)
    Button1: TButton;
    Button2: TButton;
    procedure Button2MouseDown(Sender: TObject; Button: TMouseButton;
      Shift: TShiftState; X, Y: Integer);
    procedure Button2StartDrag(Sender: TObject; var DragObject: TDragObject);
    procedure Button2EndDrag(Sender, Target: TObject; X, Y: Integer);
  private
    FDragObject: TDragObject;
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

uses
  commctrl;

{$R *.dfm}

type
  TMyDragObject = class(TDragObjectEx)
  private
    FDragImages: TDragImageList;
    FImageControl: TWinControl;
  protected
    function GetDragImages: TDragImageList; override;
  public
    constructor Create(ImageControl: TWinControl);
    destructor Destroy; override;
  end;

constructor TMyDragObject.Create(ImageControl: TWinControl);
begin
  inherited Create;
  FImageControl := ImageControl;
end;

destructor TMyDragObject.Destroy;
begin
  FDragImages.Free;
  inherited;
end;

function TMyDragObject.GetDragImages: TDragImageList;
var
  Bmp: TBitmap;
  Pt: TPoint;
begin
  if not Assigned(FDragImages) then begin
    Bmp := TBitmap.Create;
    try
      Bmp.PixelFormat := pf32bit;
      Bmp.Canvas.Brush.Color := clFuchsia;

      // 2px margin at each side just to show image can have transparency.
      Bmp.Width := FImageControl.Width + 4;
      Bmp.Height := FImageControl.Height + 4;
      Bmp.Canvas.Lock;
      FImageControl.PaintTo(Bmp.Canvas.Handle, 2, 2);
      Bmp.Canvas.Unlock;

      FDragImages := TDragImageList.Create(nil);
      FDragImages.Width := Bmp.Width;
      FDragImages.Height := Bmp.Height;
      Pt := Mouse.CursorPos;
      MapWindowPoints(HWND_DESKTOP, FImageControl.Handle, Pt, 1);
      FDragImages.DragHotspot := Pt;
      FDragImages.Masked := True;
      FDragImages.AddMasked(Bmp, clFuchsia);
    finally
      Bmp.Free;
    end;
  end;
  Result := FDragImages;
end;

//--

procedure TForm1.Button2MouseDown(Sender: TObject; Button: TMouseButton;
  Shift: TShiftState; X, Y: Integer);
begin
  (Sender as TWinControl).BeginDrag(False);

  // OnStartDrag is called during the above call so FDragImages is
  // assigned now.
  // The below is the only difference with a normal drag image implementation.
  ImageList_SetDragCursorImage(
      (FDragObject as TMyDragObject).GetDragImages.Handle, 0, 0, 0);
end;

procedure TForm1.Button2StartDrag(Sender: TObject; var DragObject: TDragObject);
begin
  DragObject := TMyDragObject.Create(Sender as TWinControl);
  DragObject.AlwaysShowDragImages := True;
  FDragObject := DragObject;
end;

end. 
```

上述代码的屏幕截图：

![在此处输入图像描述](../Images/872e343dd5a69e2e5e6f859f6e6d530b.png)

（请注意，实际光标是 crNoDrop，但捕获软件使用的是默认光标。）

如果您想查看系统对图像的真正作用，请更改上述`ImageList_SetDragCursorImage`调用以提供热点，例如

```
ImageList_SetDragCursorImage(
    (FDragObject as TMyDragObject).GetDragImages.Handle, 0, 15, 15);
// ShowCursor(False); // optional 
```

现在您将能够同时看到半透明和不透明的图像。

# ajax - 如何使用 AjaxBehaviorEvent 获取 selectedDate？

> ID：13890684
> 
> 赞同：7
> 
> 时间：2012-12-15T08:37:06.183
> 
> 标签：ajax, jakarta-ee, primefaces

```
<h:outputLabel id="remainingDays" value="#{bean.DueDate}" title="#{bean.remainingDays}"  >
<p:ajax listener="#{bean.listenerMethid}" update="remainingDays,remainingDays" process="remainingDays" event="mouseover"></p:ajax>
</h:outputLabel>
<p:tooltip for="remainingDays" id="tooltip" />

public void listenerMethod(AjaxBehaviorEvent event){

} 
```

如何在 listenerMethod() 中使用 AjaxBehaviorEvent 获取 Duedate

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-15T13:15:39.687

这应该作为通过 AjaxBehaviorEvent 获取值的一般方法：

```
public void listenerMethod(AjaxBehaviorEvent event) {
    String dueDate = (String) ((UIOutput)event.getSource()).getValue();
} 
```

但是，在您的情况下，您可以通过变量（或 getter）访问它，因为它与 listenerMethod 位于同一个 bean 中。

# asp.net - 寻找用于在 .Net / SQL 中的自定义应用程序或网页中映射 GPS 点的最佳 Google 解决方案

> ID：13890685
> 
> 赞同：0
> 
> 时间：2012-12-15T08:37:15.950
> 
> 标签：asp.net, sql, gps, cellular-network

现场大量 GPS 设备具有不同的坐标“心跳”，通过蜂窝网络中继到具有 .Net 前端的专用 SQL 框。想在应用程序中使用 Google 地球来绘制和跟踪选定的单位。关于最适用于哪个 Google 产品和相关 API 的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T09:06:10.877

尝试这个。navigator.geolocation.getCurrentPosition 将使用 GPS 获取移动设备上的当前位置。

```
https://developers.google.com/maps/articles/geolocation 
```

# programming-languages - 在 Io 语言中，1 proto 和 1 type 有什么区别？

> ID：13890686
> 
> 赞同：2
> 
> 时间：2012-12-15T08:37:21.350
> 
> 标签：programming-languages, prototype, iolanguage

```
Io> 1 proto == Number
==> true
Io> 1 type == Number
==> false
Io> 1 proto
==> 0
Io> 1 type
==> Number 
```

我对此感到非常困惑。有人对此有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T13:40:08.383

这是因为*type*是一个序列，而*protos*是一个对象列表。

```
Io> (1 proto) type
==> Number

Io> 1 hasProto("Number")
==> false

Io> 1 hasProto(Number)
==> true

Io> (1 type) type
==> Sequence

Io> 1 type == "Number"
==> true 
```

有趣的是……

```
Io> 1 protos
==> list(0) 
```

...而不是返回`list(Number)`. 但是由于 0（零）是一个 Number 对象，那么我怀疑这不会导致 protos 出现问题！

# wordpress - 如何在 WordPress 的自定义主题中添加小部件？

> ID：13890687
> 
> 赞同：3
> 
> 时间：2012-12-15T08:37:22.937
> 
> 标签：wordpress, wordpress-theming

所以问题是这样的。我开始学习WordPress。现在，我遇到了一个非常酷的插件（[http://wordpress.org/extend/plugins/wp-tagcanvas/](http://wordpress.org/extend/plugins/wp-tagcanvas/)）。现在，当我使用内置主题并激活插件时，我可以在侧边栏看到它。一切都很好，直到这里。现在，我尝试拥有自己的自定义主题。我知道 21 侧边栏上的所有小部件都是由于许多模板文件之一中的一些函数调用而出现的。所以我破译我需要在我的 sidebar.php 中进行类似的调用。

```
<?php if ( is_active_sidebar( 'sidebar-1' ) ) : ?>
<div id="first" class="widget-area" role="complementary"> 
```

所以现在“搜索”小部件出现在我的侧边栏中。伴随着它，我看到一个标题“标签云”，然后什么也没有。同时，如果我使用 21-11 主题，我会得到一个功能齐全的 3d 云小部件。

我已经浏览了插件的 readme.txt 文件。我已经正确地遵循了那里的说明，因为我能够在 21 主题中看到云小部件。

任何人都可以帮助我解决我在这里做错了什么或者我遗漏了什么。

我的另一个问题是如何使用它的索引来显示一个小部件。我写了这些行：

```
<?php $the_sidebars = wp_get_sidebars_widgets();
print_r( $the_sidebars); ?> 
```

给出以下输出：

```
Array ( [wp_inactive_widgets] => Array ( [0] => calendar-2 [1] => search-3 ) [sidebar-1] => Array ( [0] => search-2 [1] => tag-cloud-html5 ) [sidebar-2] => Array ( ) [sidebar-3] => Array ( ) [sidebar-4] => Array ( [0] => rss-2 ) [sidebar-5] => Array ( ) ) 
```

那么，如果我需要在某个地方显示 rss 小部件，我该如何使用它的索引呢？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T19:40:14.883

显然，我终于想通了。

问题是我错过了在我的文件中调用**wp_head操作。**这个插件在**wp_head**动作中被激活。由于没有为我的主题调用该操作，因此该插件未注册且未显示。另一方面，像所有其他好的主题一样，21 个主题正在调用 wp_head，因此在激活该主题时会显示云。

关于按索引调用，我在其他论坛发现，_widget 函数需要小部件名称作为参数传递。所以这不适用于索引。如果有人发现其他情况，请告诉我。

因此，将此问题标记为已解决。

# javascript - 如何在 Phonegap 中创建嵌套目录

> ID：13890698
> 
> 赞同：4
> 
> 时间：2012-12-15T08:39:40.360
> 
> 标签：javascript, android, html, cordova, html5-filesystem

我试过[这个](https://stackoverflow.com/questions/10961000/nested-directory-creator-phonegap)，但它根本不能满足我的要求。我写一个新的：

```
var file_system;
var fs_root;
window.requestFileSystem(LocalFileSystem.PERSISTENT, 1024*1024, onInitFs, request_FS_fail);

function onInitFs(fs) {
  file_system= fs;
  fs_root= file_system.root;
  alert("ini fs");
  create_Directory();
  alert("ini fs done.");
}
var string_array;
var main_dir= "story_repository/"+ User_Editime;
string_array= new Array("story_repository/",main_dir, main_dir+"/rec", main_dir+"/img","story_repository/"+ User_Name );

function create_Directory(){
  var start= 0;
  var path="";
  while(start < string_array.length) {
    path = string_array[start];
    alert(start+" th created directory " +" is "+ path);
    fs_root.getDirectory(
      path,
      {create: true, exclusive: false},
      function(entry) {
        alert(path +"is created.");
      },
      create_dir_err()
    );
    start++;
  }//while loop
}//create_Directory

function create_dir_err() {
  alert("Recursively create directories error.");
}

function request_FS_fail() {
  alert("Failed to request File System ");
} 
```

虽然创建了目录，但它发送给我

> ErrorCallback:"alert("递归创建目录错误。");"

首先，我认为这段代码行不通，因为我试过这个，但失败了：

```
window.requestFileSystem(
  LocalFileSystem.PERSISTENT,
  0,
  //request file system success callback.
  function(fileSys) {
    fileSys.root.getDirectory(
      "story_repository/"+ dir_name,
      {create: true, exclusive: false},
      //Create directory story_repository/Stallman_time.
      function(directory) {
        alert("Create directory: "+ "story_repository/"+ dir_name);
        //create dir_name/img/
        fileSys.root.getDirectory {
          "story_repository/"+ dir_name + "/img/",
          {create: true, exclusive: false},
          function(directory) {
            alert("Create a directory: "+ "story_repository/"+ dir_name + "/img/");
            //check.
            //create dir_name/rec/
            fileSys.root.getDirectory {
              "story_repository/"+ dir_name + "/rec/",
              {create: true, exclusive: false},
              function(directory) {
                alert("Create a directory: "+ "story_repository/"+ dir_name + "/rec/");
                //check.
                //Go ahead.
              },
              createError
            }
            //create dir_name/rec/
          },
          createError
        }
        //create dir_name/img
      },
      createError
    );
  },
  //Create directory story_repository/Stallman_time.
  createError());
} 
```

我只是反复打电话`fs.root.getDirectory`，但它失败了。但是第一个几乎一样...

1.  到底有什么问题？为什么第一个总是给我ErrorCallback？
2.  为什么第二个不能工作？
3.  有没有人有更好的解决方案？（没有 ErrorcallBack 消息）

ps：我在Android和PhoneGap 1.7.0上工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T11:00:45.377

我无法找出您的代码中的错误。我有一个通过 PhoneGap 2.0 编写 localIO 的库。我已经从那里为您的要求抽象了代码。看看它是否适用于1.7。抽象后我没有测试过代码。您可能需要修复错误（如果有）。

```
 var fsroot = fs.root; // initialize this

  function fileGetDir(path, cb) {
    var fnGetOrCreateDir = function(p, de) {
      var entry = p.shift();
      if (entry) {
        de.getDirectory(entry, {
          create : true
        }, function(dirEntry) {
          fnGetOrCreateDir(p, dirEntry);
        }, fileFSError);
      } 
      else
        if (cb) cb(de);
    };

    if (path) {
      var arPath = path.split("/");
      fnGetOrCreateDir(arPath, fsroot);
    }
    else {
      if (cb) cb(fsroot);
    }
  }

  function fileFSError(e) {
    console.log(e.code);
    try {
      console.log("fileFSError: " + JSON.stringify(e));
    } catch (err) {}
  }

function printSuccess(dirEntry) {
    console.log(dirEntry.fullPath);
}

// Now create your directories like:
var main_dir= "story_repository/"+ User_Editime;
fileGetDir(mainDir + "/rec", printSuccess);
fileGetDir(mainDir + "/img", printSuccess);
fileGetDir("story_repository/"+ User_Name, printSuccess); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-05T16:52:27.817

cordova-phoengap 有一个简单的文件管理器：

[https://github.com/torrmal/cordova-simplefilemanagement](https://github.com/torrmal/cordova-simplefilemanagement)

您可以递归地创建目录：

```
//CREATE A DIRECTORY RECURSIVELY

var a = new DirManager(); // Initialize a Folder manager
a.create_r('folder_a/folder_b',Log('created successfully')); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-17T02:00:59.237

如果根“story_repository”的第一个目录不存在，您对 getDirectory 的第一次调用将调用错误回调，因为在不存在的目录中创建 dir_name 的调用将在本机端出错。

“story_repository”是否存在？

# sql - cakephp复杂查询多个'OR'条件

> ID：13890704
> 
> 赞同：4
> 
> 时间：2012-12-15T08:41:35.480
> 
> 标签：sql, cakephp

我想用 cakephp 进行这样的查询：

```
WHERE text LIKE '%keyword%' 
AND 
(
    (text LIKE '%something%') 
    OR (text LIKE '%something%') 
    OR (...)
) 
AND 
(
    (text LIKE '%other%') 
    OR (text LIKE '%other%') 
    OR (...)
) 
NOT 
(
    (text LIKE '%dont include%') 
    OR (text LIKE '%dont include%') 
    OR (...)
) 
```

这是我的 $conditions 代码：

```
$conditions = array
(
    'Tweet.text LIKE' => '%keyword%',
    'AND' => array(
        array(
            'OR' => array(
                // topic
                array('Tweet.text LIKE' => '%something%'),
                array('Tweet.text LIKE' => '%something%')
            )
        ),
        array(
            'OR' => array(
                // sentiment
                array('Tweet.text LIKE' => '%other%'),
                array('Tweet.text LIKE' => '%other%')
            )
        )
    ),
    'NOT' => array(
        array('Tweet.text LIKE' => '%dont include%'),
        array('Tweet.text LIKE' => '%dont include%')
    )
); 
```

我正在使用 Debugger::dump() 方法显示结果，结果只是使用最后一个“或”条件，而不是两个“或”条件：

```
array(
    'Tweet.text LIKE' => '%keyword%',
    'OR' => array(
        (int) 0 => array(
            'Tweet.text LIKE' => '%other%'
        ),
        (int) 1 => array(
            'Tweet.text LIKE' => '%other%'
        )
    ),
    'NOT' => array(
        (int) 0 => array(
            'Tweet.text LIKE' => '%dont include%'
        ),
        (int) 1 => array(
            'Tweet.text LIKE' => '%dont include%'
        )
    )
) 
```

我的问题是，如何进行同时使用“或”条件的查询？

请尽快回复..提前谢谢:)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-16T02:12:54.377

尝试以下操作：

```
$conditions = array(
    'Tweet.text LIKE' => '%aa%',  //implied and
    array( //implied and
        'or' => array(
            array('Tweet.text LIKE' => '%11%'),
            array('Tweet.text LIKE' => '%22%'),
            array('Tweet.text LIKE' => '%33%'),
            ...
        )   
    ),
    array( //implied and
        'or' => array(
            array('Tweet.text LIKE' => '%123%'),
            array('Tweet.text LIKE' => '%456%'),
            array('Tweet.text LIKE' => '%789%'),
            ...
        )   
    )
    'not' => array(
        'or' => array(
            array('Tweet.text LIKE' => '%x%'),
            array('Tweet.text LIKE' => '%y%'),
            array('Tweet.text LIKE' => '%z%'),
            ...
        )   
    )
) 
```

### 将会

```
text LIKE aa 
    AND ( either 11, 22, 33 ) 
    AND (either 123, 456, 789) 
    BUT NOT (x || y || z)` 
```

任何未指定`or`或`and`为`not`的数组`and`。无需手动指定。

# android - android Activity 可以设计成不用重写各种生命周期方法吗？

> ID：13890707
> 
> 赞同：0
> 
> 时间：2012-12-15T08:42:01.173
> 
> 标签：android, android-lifecycle

当我在 android 上编写我的活动时，我必须重写很多“生命周期”方法，例如`onCreate`，`onActivityResult`：

```
class MyAcitivity extends Activity {

    @Override
    public void onCreate(...) {}

    @Override
    public void onStart(...) {}

    @Override
    public void onActivityResult(...) {}

    @Overide
    public void onBackPressed(...) {}
} 
```

我不喜欢这样，因为我发现我的逻辑代码被拆分到课堂上的任何地方。我在这种方法中做了一些操作，但我必须在另一种方法中处理结果。

像这样设计 Activity 是唯一的方法吗？有没有其他解决方案可以让我在不覆盖超类方法的情况下做同样的事情？

* * *

**更新**

> 我在这种方法中做了一些操作，但我必须在另一种方法中处理结果。

例如：

```
public void onCreate(...) {
    startActivityForResult(new Intent(this, AnotherAcitity.class), INTENT_ANOTHER);
}

public void onActivityResult(...) {
    if(requestCode == INTENT_ANOTHER)  {
        // do something
    }
} 
```

**再次更新**

我知道如何使用这些生命周期方法，我在想的是“设计”。是否有任何不同的方式来设计android（理论上）而不用“覆盖生命周期方法”来编写活动。手机上的ios和win8是和android一样的设计吗？如果我开发一个 ios 或 win8 应用程序，我是否必须像在 android 上那样覆盖各种生命周期方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T08:44:42.870

您只需要覆盖您在 Activity 中使用的方法。因此，如果您的活动简单显示了一个已在 XML 中填充的帮助页面，您只需覆盖`onCreate()`并调用`setContentView()`.

一般来说，如果你的重写方法是这样的：

```
public void myOverridenMethod() {
    super.myOverridenMethod();
} 
```

也就是说，它只包含一个超级调用，你不需要覆盖它。

在您提供的示例中，您必须覆盖适当的生命周期方法，因为这些方法的调用超出了您的控制范围，除非您愿意为您的设备开发自定义 ROM。

**编辑**

Android 生命周期方法由系统在应用程序生命周期中的特定预定义点调用。

您不能以不同的方式设计 Activity，就好像您这样做 Android 不知道哪种方法可以做什么。但是，它确切地知道何时在 Android 生命周期中调用哪个方法。通过使用您自己的方法而不是这些方法，您将拥有一个 Android 无法与之交互的应用程序。

此外，许多生命周期方法（例如`onCreate()`等）有助于设置应用程序的初始部分（例如获取它`Context`）。

iOS、Windows Phone 和 BlackBerry 具有相似的生命周期方法，但它们并不总是具有完全相同的 Android 等效方法，因为它们都是不同的平台，并且处理它们的应用程序的方式也不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T09:00:58.833

这只是一个通用的框架模式，框架不依赖于你，只是通知你，你的所有动作对于框架都是可选的。它被称为[**控制反转**](http://martinfowler.com/bliki/InversionOfControl.html)。

这与直接的编程风格相反，在这种风格中，您决定应用程序的所有内容，并向框架发出命令。

Google 开发人员设计了 Activity 类，Android 只能通过它们工作。Android 会随时调用这些方法。Android 不关心你在这些方法中做了什么，它只关心通知你生命周期事件。

由于一切都是*可选*的，你只需要填写你真正感兴趣的地方。一个空的 Activity 运行得很好。

```
 public class MyActivity extends Activity { } 
```

如果需要做任何额外的事情，**只需在正确的位置添加代码**：

```
 public class MyActivity extends Activity { 
   @Override
   public void onCreate(...) {
      //---whatever you want to do in this stage of life cycle----
   }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T08:54:03.550

您不一定需要覆盖活动的所有生命周期方法。他们都是为了一个特定的目的

**[onCreate()](http://developer.android.com/reference/android/app/Activity.html#onCreate%28android.os.Bundle%29)**：

> 在第一次创建活动时调用。这是您应该进行所有常规静态设置的地方：创建视图、将数据绑定到列表等。此方法还为您提供了一个包含活动先前冻结状态的 Bundle（如果有的话）。始终跟在 onStart() 之后。

**[onRestart()](http://developer.android.com/reference/android/app/Activity.html#onRestart%28%29)**：

> 在您的活动停止后、再次开始之前调用。始终跟随 onStart()

**[onStart()](http://developer.android.com/reference/android/app/Activity.html#onStart%28%29)**：

> 当活动对用户可见时调用。如果活动进入前台，则为 onResume()，如果活动被隐藏，则为 onStop()。

**[onResume()](http://developer.android.com/reference/android/app/Activity.html#onResume%28%29)**：

> 当 Activity 开始与用户交互时调用。此时，您的活动位于活动堆栈的顶部，用户输入将转到它。始终跟随 onPause()。

**[暂停（）](http://developer.android.com/reference/android/app/Activity.html#onPause%28%29)：**

> 当活动进入后台但尚未（尚未）被杀死时，作为活动生命周期的一部分调用。onResume() 的对应项。当活动 B 在活动 A 之前启动时，将在 A 上调用此回调。在 A 的 onPause() 返回之前不会创建 B，因此请确保此处不要做任何冗长的事情。

**[onStop()](http://developer.android.com/reference/android/app/Activity.html#onStop%28%29)**：

> 当您不再对用户可见时调用。接下来您将收到 onRestart()、onDestroy() 或什么也没有，这取决于以后的用户活动。
> 
> 请注意，在调用 onPause() 方法后系统没有足够内存来保持活动进程运行的低内存情况下，可能永远不会调用此方法。

**[onDestroy()](http://developer.android.com/reference/android/app/Activity.html#onDestroy%28%29)**：

> 在您的活动被销毁之前您收到的最后一个电话。这可能是因为 Activity 正在完成（有人在其上调用了 finish()，或者因为系统正在临时销毁该 Activity 实例以节省空间。您可以使用 isFinishing() 方法区分这两种情况。

# ios - 来自不同网络的 iOS GameCenter 连接

> ID：13890715
> 
> 赞同：2
> 
> 时间：2012-12-15T08:43:47.723
> 
> 标签：ios, connection, game-center, multiplayer

我制作了一款 iOS 多人 GameCenter 游戏，但在发布之前发现了一个我不知道如何解决的问题。在编码过程中，我使用了 Ray Wenderlich 教程[http://www.raywenderlich.com/3276/how-to-make-a-simple-multiplayer-game-with-game-center-tutorial-part-12](http://www.raywenderlich.com/3276/how-to-make-a-simple-multiplayer-game-with-game-center-tutorial-part-12)
显示了 GameCenter 视图控制器，连接创建和游戏可以玩，直到两个设备都在同一个 Wifi 网络上。如果我关闭手机上的 Wifi 并使用 3G 网络，然后尝试开始新游戏 - 在这种情况下不再建立连接。两台设备都能找到对方，但挂在“正在连接...”屏幕上。看起来像
- (void)match:(GKMatch *)theMatch player:(NSString *)playerID didChangeState:(GKPlayerConnectionState)state
不叫。任何想法如何解决它或至少理解问题到底出在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T09:09:04.523

1.  我认为在您的特定情况下，问题在于您的 3G ISP 限制了来自必要端口的连接。[苹果文档](http://support.apple.com/kb/HT4307?viewlocale=en_US&locale=en_US)说：

    > 要使用 Game Center ... 必须为端口 443 (TCP)、3478-3497 (UDP)、4398 (UDP)、5223 (TCP)、16384-16387 (UDP) 和 16393-16472 (UDP) 启用端口转发

    尝试在通过蓝牙连接到 iPhone 的 iPad 上播放时，我也遇到了这个问题：每台设备上都有“正在连接...”屏幕。但是当我使用内置的 iPad 3G（具有不同的资费计划）时，一切都很好。

2.  只是提醒一下，在正常的配对场景下`match:player:didChangeState:`可能不会被调用。您还应该检查`match.expectedPlayerCount`：

    ```
    - (void)matchmakerViewController:(GKMatchmakerViewController *)viewController didFindMatch:(GKMatch *)theMatch {
        //...
        if (theMatch.expectedPlayerCount == 0) {
            NSLog(@"Ready to start match!");
        }
    } 
    ```

3.  我也预计“正在连接...”屏幕会出现类似问题，但在 Wifi 网络上。它仅在 iOS6 上复制，并且在我之前尝试过 rematch 之后`-[GKMatch rematchWithCompletionHandler:^(GKMatch *match, NSError *error) {}]`。

    一台设备挂在“正在连接...”屏幕上，但另一台设备`matchmakerViewController:didFindMatch:`被成功调用，但有趣的是，`match.expectedPlayerCount`数组`0` **同时** `match.playerIDs`为空。

    我认为发生这样的错误是因为我试图找到一个新的匹配，而之前的匹配试图同时在后台线程上重新连接。并且因为那个新的匹配被*破坏*了。

    决定是等待*rematchCompletion*被调用，然后才尝试找到新的匹配。没有`GKMatch`取消重新匹配的接口，所以我使用`[[GKMatchmaker sharedMatchmaker] cancel]`并在几秒钟后调用*rematchCompletion*并出现错误，我们准备开始寻找新的匹配。

    我还发现旧的未起诉 GKMatch 实例没有被释放并继续存在于 GameKit 框架中的某个地方。如果与他们的工作没有正确完成（即没有断开连接，或者在我的情况下没有取消重赛），他们可能会导致问题。`-[GKMatch disconnect]`因此，在删除对匹配对象的最后一个强引用之前，不要忘记调用并完成任何其他类型的工作。

# c# - 换行或换行

> ID：13890723
> 
> 赞同：0
> 
> 时间：2012-12-15T08:44:45.913
> 
> 标签：c#, wpf, ellipse, wrappanel

我有一个`Ellipse`内部控件，我将此控件插入到`WrapPanel`foreach 中。有谁知道如何使用**Break**或**Newline**`Ellipse`将一些与其他分开：

 ****```
foreach (var system in provider.Systems)
{
    foreach (var fx in system.Fxes)
    {
        panel1.Children.Add(TrunkControl());
    }

    panel1.Children.Add(new SeperatorControl());
} 
```

我想在内部 foreach 之后添加新行或中断。我只是不知道我`SeperatorControl`应该是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T09:01:06.423

您可以将所有椭圆添加到另一个`StackPanel`，然后将其添加到您的主`StackPanel`

因此 panel1 将设置为 Vertical 并且您将添加新的 StackPanels 以及所有 Ellipse ，堆栈面板中没有新行之类的东西。

```
 foreach (var system in provider.Systems)
        {
            var stackpanel = new StackPanel { Orientation = Orientation.Horizontal };
            foreach (var fx in system.Fxes)
            {
                stackpanel.Children.Add(TrunkControl());
            }
            panel1.Children.Add(stackpanel); 
        } 
```

结果： ![在此处输入图像描述](../Images/47708017c2f42d4d09cf8aa27d18629b.png)****

# java - 寻找碰撞侧？

> ID：13890725
> 
> 赞同：0
> 
> 时间：2012-12-15T08:44:54.137
> 
> 标签：java, android, collision

在我的突围风格游戏（Java 和 AndEngine）中，我必须找出与球碰撞的砖块的哪一面。换句话说，我想根据它的碰撞面反弹球。如果我的球撞到砖的顶部或底部；我会用 弹跳它`rotation = 180-rotation;`，否则，用`rotation = 360-rotation;`

![详细图片](../Images/9ae0aaab837c67ef85efd22e1a1891fd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T09:06:38.133

好吧，这是一个解决方案：

当发生碰撞时，您可以测量四个角中的每一个角与球中心之间的距离。

碰撞边缘位于距离球最近的两个角之间。

# iphone - Instagram iPhone 挂钩 - 照片未导出

> ID：13890729
> 
> 赞同：0
> 
> 时间：2012-12-15T08:45:36.537
> 
> 标签：iphone, objective-c, xcode, instagram

你能告诉我，我做错了什么，照片没有显示在新的 Instagram 中吗？它根本不在那里出口。

编辑：我看到的问题是它没有显示在 Instagram 的预览中。当我去“下一步”时，会看到一个缩略图。如果重要的话，我的输出图片是 1000x1000。

```
NSString *savePath = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/Image.igo"];

// Write image to PNG
[UIImageJPEGRepresentation(preview.image, 1.0) writeToFile:savePath atomically:YES];

NSURL *instagramURL = [NSURL URLWithString:@"instagram://app"];

if ([[UIApplication sharedApplication] canOpenURL:instagramURL]) 
{
    //imageToUpload is a file path with .ig file extension
    documentInteractionController = [UIDocumentInteractionController interactionControllerWithURL:[NSURL fileURLWithPath:savePath]];

    documentInteractionController.UTI = @"com.instagram.exclusivegram";
    documentInteractionController.delegate = self;

    documentInteractionController.annotation = [NSDictionary dictionaryWithObject:@"bla bla bla" forKey:@"InstagramCaption"];
    [documentInteractionController presentOpenInMenuFromRect:CGRectZero inView:self.view animated:YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T09:42:46.900

[http://help.instagram.com/customer/portal/articles/884829-images-doesn-t-display-when-importing-from-3rd-party-app-ios-only-](http://help.instagram.com/customer/portal/articles/884829-images-doesn-t-display-when-importing-from-3rd-party-app-ios-only-)

这是来自 Instagram 的官方信息。

# sql - 更新 SQL Server CE 表的最佳方法是什么？

> ID：13890730
> 
> 赞同：0
> 
> 时间：2012-12-15T08:45:39.127
> 
> 标签：sql, sql-server-ce, crud

我有 2 张桌子。
表**电影**
- id (PK)
- 标题
- 类型

表**剧集**
- id (PK)
- 剧集 (PK)
- 标题

每部电影都有一些剧集。

**电影**

```
---------------------------------
| id | title       | type       |
|----|-------------|------------|
| 1  | movie1      | 3 episodes |
| 2  | movie2      | 2 episodes |
--------------------------------- 
```

**插曲**

```
----------------------------------------
| id | episode     | title             |
|----|-------------|-------------------|
| 1  | 1           | movie1 episode 1  |
| 1  | 2           | movie1 episode 2  |
| 1  | 3           | movie1 episode 3  |
| 2  | 1           | movie2 episode 1  |
| 2  | 2           | movie2 episode 2  |
---------------------------------------- 
```

如果我更新记录 id="1" （在两个表上），我经常使用：
表**电影**：

```
Update Movie set title='...', type='...' where id=1; 
```

表**剧集**

```
Delete from Episode where id=1;
Insert into Episode(id, episode, title) values('...', '...', '...'); 
```

我认为更新 Table Episode 是一种愚蠢的方式。我只是想不出另一种更新记录的方法，考虑到用户可能会更改、添加或删除表上的某些记录，然后将所有更改保存到数据库。

有人有其他解决方案吗？

**编辑：**

前任。用户对 Table Episode (just id=1)
**Episode进行了一些更改**

```
----------------------------------------
| id | episode     | title             |
|----|-------------|-------------------|
| 1  | 1           | movie1 episode 1  |
| 1  | 2           | movie1 episode 1a |
| 1  | 3           | movie1 episode 2  |
| 1  | 4           | movie1 episode 3a |
| 1  | 5           | movie1 episode 3b |
---------------------------------------- 
```

如何将所有更改存储到数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T08:54:24.570

我认为这个查询可以解决你的问题：

```
update Movie m inner join Episode e on m.id = e.id and m.id = 1 set m.title = 'your_value', e.title = 'your value' 
```

数据库：MYSQL 5.5

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T09:03:48.747

我建议稍微改变一下你的表结构，然后你就不需要所有的更新了。

即 Movie.Type 可以通过在剧集（按电影 ID）上执行 SELECT COUNT(*) 来计算。我不明白为什么需要存储 Movie.Type，并且 Episode.Title 也可以计算，您只需将 Episode Title 存储在 Episode 表中，而不是 Movie Title + Episode Title。这样，您可以只计算查询中的标题，而不是存储冗余数据，然后担心如何更新它。

# regex - 复杂的正则表达式匹配词（有可能吗？）

> ID：13890731
> 
> 赞同：0
> 
> 时间：2012-12-15T08:45:44.947
> 
> 标签：regex, utf-8

我想要一个正则表达式来匹配所有不匹配的希腊语（utf-8）单词：

*   以`.`
*   以`-`
*   以`'`
*   以数字结尾 (1-9)
*   从...开始`.`
*   从...开始`,`
*   从...开始`-`
*   第一个字母是大写
*   所有字母都是大写的

这可能吗？为了匹配希腊词，我使用`\p{Greek}{3,}`匹配至少 3 个字符的希腊 UTF-8 词。

我用 ruby​​ 编写程序，但如果可以用 perl 或任何其他 cli 工具/语言完成，我将编写一个脚本来将输出转储到文本文件中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T09:16:27.717

```
(?<!\S)(?=\S*\p{Greek})(?![-,.\p{Lu}])(?![\p{Lu}\P{L}]+\b)\S+(?<![-.'1-9])(?!\S) 
```

让我们分解一下这个野兽：

*   正则表达式的核心是`\S+`中间，被一堆正负断言包围。
*   `(?<!\S)`- 单词前面不能有非空白字符。这确保我们不会在单词中间开始匹配。
*   `(?=\S*\p{Greek})`- 某处必须至少有一个希腊字母。
*   `(?![-,.\p{Lu}])`- 单词不能以破折号、逗号、点或大写字母开头`\p{Lu}`。
*   `(?![\p{Lu}\P{L}]+\b)`- 单词不得全部为大写字母和符号。
*   `(?<![-.'1-9])`- 单词不得以破折号、圆点、撇号或数字 1 到 9 结尾。
*   `(?!\S)`- 单词后面不能有非空白字符。这确保我们不会在一个单词中间结束我们的匹配。

# android - 如何在android中打开前置摄像头预览？

> ID：13890732
> 
> 赞同：0
> 
> 时间：2012-12-15T08:46:02.940
> 
> 标签：android, xml, android-manifest

现在我正在开发相机应用程序，因为我同时需要前置和后置摄像头。我的要求是，当我首先打开我的应用程序时，它会显示背面视图，而且当我按下一个按钮时，我有一个按钮，它将切换到前置摄像头表面视图和同样，当我第二次按下按钮时，它会再次切换到后置摄像头，因为我编写了这段代码。

```
 import android.app.Activity;
        import android.app.AlertDialog;
        import android.content.Context;
        import android.hardware.Camera;
        import android.hardware.Camera.CameraInfo;
        import android.hardware.Camera.Size;
        import android.os.Bundle;
        import android.util.Log;
        import android.view.Menu;
        import android.view.MenuInflater;
        import android.view.MenuItem;
        import android.view.SurfaceHolder;
        import android.view.SurfaceView;
        import android.view.View;
        import android.view.ViewGroup;
        import android.view.Window;
        import android.view.WindowManager;

        import java.io.IOException;
        import java.util.List;

        import com.example.R;

        public class MainActivity extends Activity {
             private Preview mPreview;
                Camera mCamera;
                int numberOfCameras;
                int cameraCurrentlyLocked;

                // The first rear facing camera
                int defaultCameraId;

            protected void onCreate(Bundle savedInstanceState) 
              {
                super.onCreate(savedInstanceState);
                // Hide the window title.
                requestWindowFeature(Window.FEATURE_NO_TITLE);
                getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);

                // Create a RelativeLayout container that will hold a SurfaceView,
                // and set it as the content of our activity.
                mPreview = new Preview(this);
                setContentView(mPreview);

                // Find the total number of cameras available
                numberOfCameras = Camera.getNumberOfCameras();

                // Find the ID of the default camera
                CameraInfo cameraInfo = new CameraInfo();
                    for (int i = 0; i < numberOfCameras; i++)
                   {
                        Camera.getCameraInfo(i, cameraInfo);
                        if (cameraInfo.facing == CameraInfo.CAMERA_FACING_BACK)
                        {
                            defaultCameraId = i;
                        }
                    }
            }

            @Override
            protected void onResume() {
                super.onResume();

                // Open the default i.e. the first rear facing camera.
                mCamera = Camera.open();
                cameraCurrentlyLocked = defaultCameraId;
                mPreview.setCamera(mCamera);
            }

            @Override
            protected void onPause() {
                super.onPause();

                // Because the Camera object is a shared resource, it's very
                // important to release it when the activity is paused.
                if (mCamera != null) {
                    mPreview.setCamera(null);
                    mCamera.release();
                    mCamera = null;
                }
            }

            @Override
            public boolean onCreateOptionsMenu(Menu menu) {

                // Inflate our menu which can gather user input for switching camera
                MenuInflater inflater = getMenuInflater();
                inflater.inflate(R.menu.camera_menu, menu);
                return true;
            }

            @Override
            public boolean onOptionsItemSelected(MenuItem item) {
                // Handle item selection
                switch (item.getItemId()) {
                case R.id.switch_cam:
                    // check for availability of multiple cameras
                    if (numberOfCameras == 1) {
                        AlertDialog.Builder builder = new AlertDialog.Builder(this);
                        builder.setMessage("camera_alert")
                               .setNeutralButton("Close", null);
                        AlertDialog alert = builder.create();
                        alert.show();
                        return true;
                    }

                    // OK, we have multiple cameras.
                    // Release this camera -> cameraCurrentlyLocked
                    if (mCamera != null) {
                        mCamera.stopPreview();
                        mPreview.setCamera(null);
                        mCamera.release();
                        mCamera = null;
                    }

                    // Acquire the next camera and request Preview to reconfigure
                    // parameters.
                    mCamera = Camera
                            .open((cameraCurrentlyLocked + 1) % numberOfCameras);
                    cameraCurrentlyLocked = (cameraCurrentlyLocked + 1)
                            % numberOfCameras;
                    mPreview.switchCamera(mCamera);

                    // Start the preview
                    mCamera.startPreview();
                    return true;
                default:
                    return super.onOptionsItemSelected(item);
                }
            }

            class Preview extends ViewGroup implements SurfaceHolder.Callback {
                private final String TAG = "Preview";

                SurfaceView mSurfaceView;
                SurfaceHolder mHolder;
                Size mPreviewSize;
                List<Size> mSupportedPreviewSizes;
                Camera mCamera;

                Preview(Context context) {
                    super(context);

                    mSurfaceView = new SurfaceView(context);
                    addView(mSurfaceView);

                    // Install a SurfaceHolder.Callback so we get notified when the
                    // underlying surface is created and destroyed.
                    mHolder = mSurfaceView.getHolder();
                    mHolder.addCallback(this);
                    mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
                }

                public void setCamera(Camera camera) {
                    mCamera = camera;
                    if (mCamera != null) {
                        mSupportedPreviewSizes = mCamera.getParameters().getSupportedPreviewSizes();
                        requestLayout();
                    }
                }

                public void switchCamera(Camera camera) {
                   setCamera(camera);
                   try {
                       camera.setPreviewDisplay(mHolder);
                   } catch (IOException exception) {
                       Log.e(TAG, "IOException caused by setPreviewDisplay()", exception);
                   }
                   Camera.Parameters parameters = camera.getParameters();
                   parameters.setPreviewSize(mPreviewSize.width, mPreviewSize.height);
                   requestLayout();

                   camera.setParameters(parameters);
                }

                @Override
                protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
                    // We purposely disregard child measurements because act as a
                    // wrapper to a SurfaceView that centers the camera preview instead
                    // of stretching it.
                    final int width = resolveSize(getSuggestedMinimumWidth(), widthMeasureSpec);
                    final int height = resolveSize(getSuggestedMinimumHeight(), heightMeasureSpec);
                    setMeasuredDimension(width, height);

                    if (mSupportedPreviewSizes != null) {
                        mPreviewSize = getOptimalPreviewSize(mSupportedPreviewSizes, width, height);
                    }
                }

                @Override
                protected void onLayout(boolean changed, int l, int t, int r, int b) {
                    if (changed && getChildCount() > 0) {
                        final View child = getChildAt(0);

                        final int width = r - l;
                        final int height = b - t;

                        int previewWidth = width;
                        int previewHeight = height;
                        if (mPreviewSize != null) {
                            previewWidth = mPreviewSize.width;
                            previewHeight = mPreviewSize.height;
                        }

                        // Center the child SurfaceView within the parent.
                        if (width * previewHeight > height * previewWidth) {
                            final int scaledChildWidth = previewWidth * height / previewHeight;
                            child.layout((width - scaledChildWidth) / 2, 0,
                                    (width + scaledChildWidth) / 2, height);
                        } else {
                            final int scaledChildHeight = previewHeight * width / previewWidth;
                            child.layout(0, (height - scaledChildHeight) / 2,
                                    width, (height + scaledChildHeight) / 2);
                        }
                    }
                }

                public void surfaceCreated(SurfaceHolder holder) {
                    // The Surface has been created, acquire the camera and tell it where
                    // to draw.
                    try {
                        if (mCamera != null) {
                            mCamera.setPreviewDisplay(holder);
                        }
                    } catch (IOException exception) {
                        Log.e(TAG, "IOException caused by setPreviewDisplay()", exception);
                    }
                }

                public void surfaceDestroyed(SurfaceHolder holder) {
                    // Surface will be destroyed when we return, so stop the preview.
                    if (mCamera != null) {
                        mCamera.stopPreview();
                    }
                }

                private Size getOptimalPreviewSize(List<Size> sizes, int w, int h) {
                    final double ASPECT_TOLERANCE = 0.1;
                    double targetRatio = (double) w / h;
                    if (sizes == null) return null;

                    Size optimalSize = null;
                    double minDiff = Double.MAX_VALUE;

                    int targetHeight = h;

                    // Try to find an size match aspect ratio and size
                    for (Size size : sizes) {
                        double ratio = (double) size.width / size.height;
                        if (Math.abs(ratio - targetRatio) > ASPECT_TOLERANCE) continue;
                        if (Math.abs(size.height - targetHeight) < minDiff) {
                            optimalSize = size;
                            minDiff = Math.abs(size.height - targetHeight);
                        }
                    }

                    // Cannot find the one match the aspect ratio, ignore the requirement
                    if (optimalSize == null) {
                        minDiff = Double.MAX_VALUE;
                        for (Size size : sizes) {
                            if (Math.abs(size.height - targetHeight) < minDiff) {
                                optimalSize = size;
                                minDiff = Math.abs(size.height - targetHeight);
                            }
                        }
                    }
                    return optimalSize;
                }

                public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
                    // Now that the size is known, set up the camera parameters and begin
                    // the preview.
                    Camera.Parameters parameters = mCamera.getParameters();
                    parameters.setPreviewSize(mPreviewSize.width, mPreviewSize.height);
                    requestLayout();

                    mCamera.setParameters(parameters);
                    mCamera.startPreview();
                }

            }
        }

        and my menu.xml
        <?xml version="1.0" encoding="utf-8"?>
        <menu xmlns:android="http://schemas.android.com/apk/res/android">
            <item android:id="@+id/switch_cam"
                  android:title="@string/switch_cam" />
        </menu>

        when i write this code i get error

        menu cannot be resolved or is not a field and 
        switch_cam cannot be resolved or is not a field
        pleae help me 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T08:58:44.213

```
if(valueofcam.equalsIgnoreCase("front")){
            // Find the ID of the default camera
            CameraInfo cameraInfo = new CameraInfo();
                for (int i = 0; i < numberOfCameras; i++) {
                    Camera.getCameraInfo(i, cameraInfo);
                    if (cameraInfo.facing == CameraInfo.CAMERA_FACING_FRONT) {
                        defaultCameraId = i;
//                      Toast.makeText(getApplicationContext(), "front", Toast.LENGTH_LONG).show();
                    }
                    else if (cameraInfo.facing == CameraInfo.CAMERA_FACING_BACK) {
                        defaultCameraId = i;
//                      Toast.makeText(getApplicationContext(), ""+defaultCameraId, Toast.LENGTH_LONG).show();
                    }
                }
    }

    camera = Camera.open(defaultCameraId); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-21T08:24:20.767

使用 Google 的 cameraview，并将此对象调整为`activity_main.xml`：

```
 <com.google.android.cameraview.CameraView
            android:id="@+id/camera"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:adjustViewBounds="true"
            app:autoFocus="true"
            app:aspectRatio="4:3"
            app:facing="front"
            app:flash="off"
            android:background="@android:color/black" /> 
```

网址：[https ://github.com/google/cameraview](https://github.com/google/cameraview)

# android - 通过 EditText 字符串将数据插入数据库

> ID：13890734
> 
> 赞同：0
> 
> 时间：2012-12-15T08:46:34.547
> 
> 标签：android, database, insert, android-edittext

在Android应用程序中，我想通过三个EditText视图从用户那里获取输入，然后按ta按钮我想将它们保存到我的数据库中，但是当我按下按钮时，一个意外错误使我的应用程序关闭。应该如何我管这个？

这是我的按钮：

```
//---btnInsert
        Button btnInsert=(Button)findViewById(R.id.btnInsert);

        btnInsert.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                DBAdapter    db = new DBAdapter(DatabaseAndroid10.this); 
                 long id;
                 String ISBN;
                 String Title;
                 String Publisher;

                 EditText txtISBN=(EditText)findViewById(R.id.txtISBN);
                 EditText txtTitle=(EditText)findViewById(R.id.txtTitle);
                 EditText txtPublisher=(EditText)findViewById(R.id.txtPublisher);

                  ISBN = txtISBN.getText().toString();
                  Title=txtTitle.getText().toString();
                  Publisher=txtPublisher.getText().toString();

                  id = db.insertTitle(
                            ISBN,Title,Publisher);    

                    db.close();
            }   
        }); 
```

这是我的 DBAdapter：

```
package com.example.databaseandroid10;

import android.content.ContentValues;

public class DBAdapter 
{
    public static final String KEY_ROWID = "_id";
    public static final String KEY_ISBN = "isbn";
    public static final String KEY_TITLE = "title";
    public static final String KEY_PUBLISHER = "publisher";    
    private static final String TAG = "DBAdapter";

    private static final String DATABASE_NAME = "books";
    private static final String DATABASE_TABLE = "titles";
    private static final int DATABASE_VERSION = 1;

    private static final String DATABASE_CREATE =
        "create table titles (_id integer primary key autoincrement, "
        + "isbn text not null, title text not null, " 
        + "publisher text not null);";

    private final Context context; 

    private DatabaseHelper DBHelper;
    private SQLiteDatabase db;

    public DBAdapter(Context ctx) 
    {
        this.context = ctx;
        DBHelper = new DatabaseHelper(context);
    }

    private static class DatabaseHelper extends SQLiteOpenHelper 
    {
        DatabaseHelper(Context context) 
        {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) 
        {
            db.execSQL(DATABASE_CREATE);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, 
        int newVersion) 
        {
            Log.w(TAG, "Upgrading database from version " + oldVersion 
                    + " to "
                    + newVersion + ", which will destroy all old data");
            db.execSQL("DROP TABLE IF EXISTS titles");
            onCreate(db);
        }
    }    

    //---opens the database---
    public DBAdapter open() throws SQLException 
    {
        db = DBHelper.getWritableDatabase();
        return this;
    }

    //---closes the database---    
    public void close() 
    {
        DBHelper.close();
    }

    //---insert a title into the database---
    public long insertTitle(String isbn, String title, String publisher) 
    {
        ContentValues initialValues = new ContentValues();
        initialValues.put(KEY_ISBN, isbn);
        initialValues.put(KEY_TITLE, title);
        initialValues.put(KEY_PUBLISHER, publisher);
        return db.insert(DATABASE_TABLE, null, initialValues);
    }

    //---deletes a particular title---
    public boolean deleteTitle(long rowId) 
    {
        return db.delete(DATABASE_TABLE, KEY_ROWID + 
                "=" + rowId, null) > 0;
    }

    //---retrieves all the titles---
    public Cursor getAllTitles() 
    {
        return db.query(DATABASE_TABLE, new String[] {
                KEY_ROWID, 
                KEY_ISBN,
                KEY_TITLE,
                KEY_PUBLISHER}, 
                null, 
                null, 
                null, 
                null, 
                null);
    }

    //---retrieves a particular title---
    public Cursor getTitle(long rowId) throws SQLException 
    {
        Cursor mCursor =
                db.query(true, DATABASE_TABLE, new String[] {
                        KEY_ROWID,
                        KEY_ISBN, 
                        KEY_TITLE,
                        KEY_PUBLISHER
                        }, 
                        KEY_ROWID + "=" + rowId, 
                        null,
                        null, 
                        null, 
                        null, 
                        null);
        if (mCursor != null) {
            mCursor.moveToFirst();
        }
        return mCursor;
    }

    //---updates a title---
    public boolean updateTitle(long rowId, String isbn, 
    String title, String publisher) 
    {
        ContentValues args = new ContentValues();
        args.put(KEY_ISBN, isbn);
        args.put(KEY_TITLE, title);
        args.put(KEY_PUBLISHER, publisher);
        return db.update(DATABASE_TABLE, args, 
                         KEY_ROWID + "=" + rowId, null) > 0;
    }
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T08:51:20.483

在将值插入数据库之前您没有打开数据库，所以会出现这个错误，所以

写在下面的代码行

```
db.open();  // For Open Database 
```

前

```
id = db.insertTitle(ISBN,Title,Publisher);  // For Insert value into Database 
```

它会解决你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T08:54:13.230

**问题 ：：**

在向数据库添加新值之前，您没有打开数据库

**解决方案 ：：**

首先更改打开数据库的代码：

```
db.open(); // open database here  before inserting 

id = db.insertTitle(ISBN,Title,Publisher);    

db.close(); //close database here  after inserting 
```

# ajax - 在 JSP 中使用 Ajax 检查用户名可用性并停止表单提交

> ID：13890743
> 
> 赞同：-1
> 
> 时间：2012-12-15T08:48:38.260
> 
> 标签：ajax, validation, jsp

我是 ajax 新手，我正在尝试通过在 JSP 中使用 Ajax 和 JavaScript 创建 gmail 类型的用户名可用性检查。

我的代码适用于用户名可用性检查，但当用户名不可用时，我无法停止表单提交。

为了检查用户名的可用性，我使用了 onkeyup() 来检查每个字符，但是为了防止表单提交，我在表单标签中使用了 onsubmit()。

对于执行流程检查，我在此代码中使用了警报语句：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
<script type="text/javascript" language="javascript">
function returnFunction(str)
{
    alert("1");
    var flag = new Boolean(false);
    usernameValidation(str);
    alert("2");
    function usernameValidation(str)
    {
        alert("3");
        var xmlHttpRequest;
        if(window.XMLHttpRequest)
        {
            alert("4");
            xmlHttpRequest = new XMLHttpRequest();
            alert("5");
        }
        else
        {
            alert("6");
            xmlHttpRequest = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlHttpRequest.onreadystatechange = function()
        {
            alert("7");
            if(xmlHttpRequest.readyState==4 && xmlHttpRequest.status==200)
            {
                alert("8");
                if(xmlHttpRequest.responseText=="available")
                {
                    flag=new Boolean(true);
                    alert("9 flag:"+flag);
                    document.getElementById("myDiv").innerHTML="username is available";
                }
                else
                {
                    flag=new Boolean(false);
                    alert("10 flag:"+flag);
                    document.getElementById("myDiv").innerHTML="username is already taken";
                }
            }
        };
        xmlHttpRequest.open("POST", "UsernameCheck", true);
        xmlHttpRequest.setRequestHeader("Content-Type","application/x-www-form-urlencoded");        
        xmlHttpRequest.send("uname="+str);
    };
    alert("before return flag is:"+flag);
    return flag;
};
    function formValidation(){
        if(returnFunction(document.f1.username.value))
            {
              alert("caught flage:true");
              return true;
            }
        else{
            alert("caught flage:false");
            return false;
        }
    }
</script>

</head>
<body>
<form method="post" action="register"  name="f1" onsubmit="return formValidation()">
    User Name:<div id="myDiv1"><input type="text" name="username" size="20" onkeyup="returnFunction(this.value)"></div>
            <span id="myDiv" style="color: red"></span>

            <input type="submit" value="register">
            </form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T17:11:20.730

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
<script type="text/javascript" language="javascript">
function getXMLHttpRequest(){
      var xmlHttpReq = false;
      // to create XMLHttpRequest object in non-Microsoft browsers
      if (window.XMLHttpRequest) {
        xmlHttpReq = new XMLHttpRequest();
      } 
      else if (window.ActiveXObject) {
        try {
          // to create XMLHttpRequest object in later versions
          // of Internet Explorer
          xmlHttpReq = new ActiveXObject("Msxml2.XMLHTTP");
        } catch (exp1) {
          try {
            // to create XMLHttpRequest object in older versions
            // of Internet Explorer
            xmlHttpReq = new ActiveXObject("Microsoft.XMLHTTP");
          } catch (exp2) {
            xmlHttpReq = false;
          }
        }
      }
      return xmlHttpReq;
    };
    function usernameValidation(str)
    {
        if (str.length==0) 
        { 
            document.getElementById("uname").innerHTML="should not be empty";
            return false;
        }
        else if(str.length<=4)
        {
                document.getElementById("uname").innerHTML="need more than 4 charachers";
                return false;
        }
        else{
                var xmlHttpRequest = getXMLHttpRequest();
                xmlHttpRequest.onreadystatechange =function()
                {
                    if (xmlHttpRequest.readyState < 4 && xmlHttpRequest.readyState > 0)
                    {
                        document.getElementById("uname").innerHTML = "<img src='images/load.gif' alt='checking...' width=16 height=16/>";
                    }
                    if (xmlHttpRequest.readyState == 4 && xmlHttpRequest.status == 200)
                    {
                        if(xmlHttpRequest.responseText=="available")
                        {
                            document.getElementById("uname").innerHTML = "<img src='images/ok.png' alt='username available' width=16 height=16/>";
                            document.getElementById("uname1").innerHTML = ".";
                        }
                        else
                        {
                            document.getElementById("uname").innerHTML = "username not available";
                        }
                    }
                };
                xmlHttpRequest.open("POST", "UsernameCheck", true);
                xmlHttpRequest.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
                xmlHttpRequest.send("uname="+str);

            };
    };

function userSubmitValidation(){
    var msg = document.getElementById("uname1").innerHTML;  
    if(msg=='.'){
        return true;
    }
    else{
        return false;
    }
};

</script>

</head>
<body>

<form method="post" action="register"  name="f1"  onsubmit="return userSubmitValidation()">
    User Name:<div id="myDiv1"><input type="text" name="username" size="20" onkeyup="usernameValidation(this.value)" onblur="usernameValidation(this.value)"></div>
            <span id="uname" style="color: red"></span><span id="uname1" style="color: white"></span>

            <input type="submit" value="register">
            </form>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T09:35:42.853

Ajax 是异步的，因此您对 returnFunction 的调用不需要返回正确的标志，它将始终返回 false，因为很可能只有在方法完成（onresponse）后才会触发成功函数。因此，您需要确保使用布尔值接收 Ajax cal 的响应`completed`，并不断检查它直到它为真。

```
<script type="text/javascript" language="javascript">
function returnFunction(str)
{
alert("1");
var flag = new Boolean(false);
var completed = new Boolean(false);
usernameValidation(str);
alert("2");
function usernameValidation(str)
{
    alert("3");
    var xmlHttpRequest;
    if(window.XMLHttpRequest)
    {
        alert("4");
        xmlHttpRequest = new XMLHttpRequest();
        alert("5");
    }
    else
    {
        alert("6");
        xmlHttpRequest = new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlHttpRequest.onreadystatechange = function()
    {
        alert("7");
        if(xmlHttpRequest.readyState==4 && xmlHttpRequest.status==200)
        {
            alert("8");
            if(xmlHttpRequest.responseText=="available")
            {
                flag=new Boolean(true);
                alert("9 flag:"+flag);
                document.getElementById("myDiv").innerHTML="username is available";
            }
            else
            {
                flag=new Boolean(false);
                alert("10 flag:"+flag);
                document.getElementById("myDiv").innerHTML="username is already taken";
            }
        }
    };
    xmlHttpRequest.open("POST", "UsernameCheck", true);
    xmlHttpRequest.setRequestHeader("Content-Type","application/x-www-form-urlencoded");        
    xmlHttpRequest.send("uname="+str);
};
alert("before return flag is:"+flag);
return flag;
};
function formValidation(){
   returnFunction(username);
   while(!completed) {
   //wait for ajax response
   }
   if(flag)
        {
          alert("caught flage:true");
          return true;
        }
    else{
        alert("caught flage:false");
        return false;
    }
}
 </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T09:57:38.687

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
<script type="text/javascript" language="javascript">

var flag = new Boolean(false);
function returnFunction(str)
{
alert("1");

usernameValidation(str);
alert("2");
function usernameValidation(str)
{
    alert("3");
    var xmlHttpRequest;
    if(window.XMLHttpRequest)
    {
        alert("4");
        xmlHttpRequest = new XMLHttpRequest();
        alert("5");
    }
    else
    {
        alert("6");
        xmlHttpRequest = new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlHttpRequest.onreadystatechange = function()
    {
        alert("7");
        if(xmlHttpRequest.readyState==4 && xmlHttpRequest.status==200)
        {
            alert("8");
            if(xmlHttpRequest.responseText=="available")
            {
                flag=new Boolean(true);
                alert("9 flag:"+flag);
                document.getElementById("myDiv").innerHTML="username is available";
            }
            else
            {
                flag=new Boolean(false);
                alert("10 flag:"+flag);
                document.getElementById("myDiv").innerHTML="username is already taken";
            }
        }
    };
    xmlHttpRequest.open("POST", "UsernameCheck", true);
    xmlHttpRequest.setRequestHeader("Content-Type","application/x-www-form-urlencoded");        
    xmlHttpRequest.send("uname="+str);
};
alert("before return flag is:"+flag);
return flag;
};
function formValidation(){
    if(returnFunction(document.f1.username.value))
        {
          alert("caught flage:true");
          document.f1.submit();

        }
    else{
        alert("caught flage:false");
        alert("Username chossen by u is already taken.Please choose different Username");
    }
}
</script>

</head>
<body>
<form method="post" action="register"  name="f1" >
User Name:<div id="myDiv1"><input type="text" name="username" size="20"         onkeyup="returnFunction(this.value)"></div>
        <span id="myDiv" style="color: red"></span>

        <input type="submit" value="register">
        </form>
</body> 
</html> 
```

进行这样的更改它将起作用。如果有任何问题请告知。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T20:08:03.107

我也是 ajax 的新手，我正在尝试做和你一样的事情。我已经使用 ajax 和 jsp 成功检查了用户名的可用性。然后我坚持的事情即使用户名不可用，点击提交按钮后页面仍然提交。然后我用javascript来解决这个问题。我将返回的文本与之前声明的另一个文本进行了比较。如果检查成功，那么它将转到下一页，否则不会。有关详细信息，请查看此页面->“[基于 Ajax 的用户名可用性检查，然后生成一些用户名以在 jsp 中使用](https://stackoverflow.com/questions/14158312/ajax-based-username-availablity-checking-and-then-generating-some-username-to-us)”。查看 sample.jsp 代码。在该代码中，ai 在名为“conditions()”的函数中进行了检查。在该函数中，变量“checkvalue”保存了由可用性检查生成的返回文本。然后我将其与文本“可用”进行比较。如果匹配，则页面将提交其他明智的不。我不确定这是你想知道的，如果是，那么我的回答是否对你有帮助。谢谢你，祝你好运..

# c - 将本地化字符串转换为 C 中的浮点数

> ID：13890745
> 
> 赞同：2
> 
> 时间：2012-12-15T08:48:42.820
> 
> 标签：c

我有浮点数`char[]`。它是本地化字符串，`DE`没有小数点分隔符。是否有任何标准方法可以将此类字符串转换为浮点数？我正在寻找更好的东西然后“替换，用.和使用”。`PL``','``'.'``atoi`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T09:17:41.360

正如@Omkant 建议的那样，`strtod()`将为您做：

```
setlocale(LC_NUMERIC, "de_DE.UTF-8");
errno = 0;
val = strtod(myString, &endPtr);
if (errno)
{
    // Handle error
}
if (*endPtr)
{
    // This tells you that the string had a trail, e.g. "250.99USD"
} 
```

您可以使用 NULL 代替 &endPtr，如果您确定永远不会尝试转换零，则可以使用`val`零来检查错误而不是设置`errno`：

```
// Faster, sloppier version
setlocale(LC_NUMERIC, "de_DE.UTF-8");
if (!(val = strtod(myString, NULL)))
{
    // An error occurred, provided myString was not legitimately zero
    // AND is not so large a value as to create overflow.
} 
```

在某些情况下，稍微贵一点的**sscanf**会更好，因为`strtod`可以接受其他数字格式，例如十六进制。在某些情况下，您可能*不*希望允许一些不是“正确”浮点数的东西，例如 3.14159，使其通过转换阶段；`strtod()`将允许它。

此外，`strtod()`将接受（并且在草率的版本中，**不检测**）字符串，例如“INFERIOR”（将被解释为带有 ERIOR 尾部的 INFinity）。不太可能，但在某些情况下，如果该值在用户的控制之下，它可能会导致应用程序漏洞。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T08:54:15.757

AFAIK，[sscanf(3)](http://linux.die.net/man/3/sscanf)和[strtod(3)](http://linux.die.net/man/3/strtod)都应该处理[locale](http://linux.die.net/man/7/locale)。之前适当地调用[setlocale(3) 。](http://linux.die.net/man/3/setlocale)

# c++ - 用户定义类的哈希函数。如何结交朋友？:)

> ID：13890747
> 
> 赞同：18
> 
> 时间：2012-12-15T08:49:33.337
> 
> 标签：c++, hash, c++11, unordered-map

我有一个 C 类，它有一个`string* ps`私有数据成员。
现在，我想要一个`unordered_map<C, int>`需要自定义哈希函数的函数。

[根据 c++ 参考](http://en.cppreference.com/w/cpp/utility/hash)，我可以这样做

```
namespace std {
  template<>
  class hash<C> {
  public:
    size_t operator()(const C &c) const
    {
      return std::hash<std::string>()(*c.ps);
    }
  };
} 
```

`operator()`问题是我似乎无法结交`C`朋友以便我可以访问`ps`.

我试过这个：

```
class C;
template<>
class std::hash<C>;
class C{
  //...
  friend std::hash<C>::operator ()(const C&) const; // error: Incomplete type 
};
// define hash<C> here. 
```

但它说 Incomplete type ... in nested name specifier ...

我也无法扭转定义，因为如果稍后定义了 C 类，`hash<C>`则无法知道`ps`.

我在这里做错了什么？这种情况如何在不`ps`公开的情况下解决？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-15T08:58:09.813

试试这个：

```
class C;
namespace std {
  template<>
  struct hash<C> {
  public:
    size_t operator()(const C &c) const; // don't define yet
  };
}
class C{
  //...
  friend size_t std::hash<C>::operator ()(const C&) const;
};
namespace std {
  template<>
  size_t hash<C>::operator()(const C &c) const {
    return std::hash<std::string>()(*c.ps);
  }
} 
```

或这个：

```
class C;
template<>
struct std::hash<C>;
class C{
  friend struct std::hash<C>; // friend the class, not the member function
}; 
```

（我还没有编译，所以可能有语法错误）

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-11T19:41:37.100

我建议添加如下方法

```
class C
{
....
public:  const string* get_ps() const { return ps; }
....
}; 
```

并在您的哈希专业化中使用它。

# svn - 如何从 svn 获取提交的行数

> ID：13890749
> 
> 赞同：1
> 
> 时间：2012-12-15T08:49:38.123
> 
> 标签：svn, version

我需要获取每个用户在命令模式下提交的行数。我在 Ubuntu 机器上使用 rabbit SVN。谁能帮我得到这个

我使用以下语法将提交的文件导出为 XML。svn log -v --xml svnpath > /home/admin/Desktop/project.xml

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T09:08:29.600

不能肯定地说它是否适用于rabbit SVN，但[该站点](http://www.commandlinefu.com/commands/view/2787/prints-total-line-count-contribution-per-user-for-an-svn-repository)建议使用以下oneliner：

`svn ls -R | egrep -v -e "\/$" | xargs svn blame | awk '{print $2}' | sort | uniq -c | sort -r`

# delphi - Indy 10首先在delphi中从服务器开始通信

> ID：13890751
> 
> 赞同：2
> 
> 时间：2012-12-15T08:49:57.783
> 
> 标签：delphi, tcp, client-server, indy, tthread

在 TCPServer/Client 组件编写的 Socket 应用程序中，通常我们激活服务器端，然后将客户端连接到服务器，当我们需要从一侧获取或发送数据到另一侧时，首先我们从客户端向服务器发送命令，然后进行通信开始。

但问题是我们总是需要从客户端开始对话！

我想问一下在没有客户端请求的情况下从服务器端随机开始对话有什么想法吗？

我需要这个功能来从服务器端通知客户端。例如，当注册用户（客户端）连接到服务器时，其他连接的用户（在其他客户端），必须从服务器发送通知给所有用户（如雅虎通）。

我正在使用**TIdCmdTCPServer**和**TIdTCPClient**组件

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-15T18:59:13.603

您正在使用`TIdCmdTCPServer`. 根据定义，它向客户端发出的命令发送响应。对于你所要求的，你应该使用`TIdTCPServer`，然后你可以在事件中做任何你想做的`TIdTCPServer.OnExecute`事情。

您要求的是可行的，但其实施取决于您对协议的特定需求。

如果您只想发送未经请求的服务器到客户端的消息，并且从不响应客户端到服务器的命令，那么实现相当简单。需要时使用`TIdContext.Connection.IOHandler`。您可以循环访问列表中的现有客户端`TIdTCPServer.Contexts`，例如在`TIdTCPServer.OnConnect`和`TIdTCPServer.OnDisconnect`事件中。在客户端，您需要一个计时器或线程来定期检查服务器消息。查看`TIdCmdTCPClient`并`TIdTelnet`获取相关示例。

但是，如果您需要在同一连接上混合客户端到服务器命令和未经请求的服务器到客户端消息，则必须将协议设计为异步工作，这会使实现更加复杂。未经请求的服务器消息可以随时出现，甚至在响应客户端命令之前。命令需要包含在响应中回显的值，以便客户端可以匹配响应，并且数据包需要能够区分响应和未经请求的消息。您还必须在服务器端为每个客户端提供自己的出站队列。您可以使用该`TIdContext.Data`属性。然后，您可以在需要时将服务器消息添加到队列中，并让`OnExecute`事件在不做任何其他事情时定期发送队列。您仍然需要客户端的计时器/线程，并且它需要处理对客户端命令的响应和未经请求的服务器消息，因此您不能使用`TIdConnection.SendCmd()`或相关的方法，因为它不知道最终会读取什么。

我之前曾多次在 Embarcadero 和 Indy 论坛上发布过这两种方法的示例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-15T11:18:31.967

If you want to see working code examples where server sends data, check out Indy IdTelnet: the telnet client uses a thread to listen to server messages. There is only one socket, created by the client, but the server uses the same socket for its messages to the client, at any time.

The client starts the connection, but does not have to start a conversation by saying 'HELLO' or something like that.

Technically, the client only needs to open the socket connection, without sending any additional data. The client can remain quiet as long as he wants, even until the end of the connection.

The server has a socket connection to the client as soon as the client has connected. And over this socket, the server can send data to the client.

Of course, the client has to read from the connection socket to see the server data. This can be done in a loop in a background thread, or even in the main thread (not in a VCL application of course as it would block).

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-15T09:09:21.720

客户端发起通信。这就是客户端的定义——发起通信的参与者。但是，一旦建立连接，双方就可以发送数据。因此，客户端连接到服务器。服务器维护所有已连接客户端的列表。当服务器想要发送通信时，它只是将数据发送到所有连接的客户端。

由于客户端发起通信，因此在通信中断的情况下，客户端的工作是重新建立连接。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-18T11:14:27.853

最后，这是我用来解决问题的代码：

```
// Thread at client-side
procedure FNotifRecieverThread.Execute;
var
  str: string;
  MID: Integer;
  TCP1: TIdTCPClient;
begin
  if frmRecieverMain.IdTCPClient1.Connected then
  begin
    TCP1 := TIdTCPClient.Create(nil);
    TCP1.Host := frmRecieverMain.IdTCPClient1.Host;
    TCP1.Port := frmRecieverMain.IdTCPClient1.Port;
    TCP1.ConnectTimeout := 20000;

    while True do
    begin
      try
        TCP1.Connect;

        while True do
        begin
          try
            str := '';
            TCP1.SendCmd('checkmynotif');

            TCP1.Socket.WriteLn(IntToStr(frmRecieverMain.UserID));
            str := TCP1.Socket.ReadLn;

            if Pos('showmessage_', str) = 1 then
            begin
              MID := StrToInt(Copy(str, Pos('_', str) + 1, 5));
              frmRecieverMain.NotifyMessage(MID);
            end
            else
            if str = 'updateusers' then
            begin
              LoadUsers;

              frmRecieverMain.sgMsgInbox.Invalidate;
              frmRecieverMain.sgMsgSent.Invalidate;
              frmRecieverMain.cbReceipent.Invalidate;
            end
            else
              if str = 'updatemessages' then
            begin
              LoadMessages;
              frmRecieverMain.DisplayMessages;
            end;
          except
            // be quite and try next time :D
          end;          

          Sleep(2000);
        end;
      finally
        TCP1.Disconnect;
        TCP1.Free;
      end;

      Sleep(5000);
    end;
  end;
end; 
```

* * *

```
// And command handlers at server-side
procedure TfrmServer.cmhCheckMyNotifCommand(ASender: TIdCommand);
var
  UserID, i: Integer;
  str: string;
begin
  str := 'notifnotfound';
  UserID := StrToIntDef(ASender.Context.Connection.Socket.ReadLn, -1);

  for i := 0 to NotificationStack.Count - 1 do
    if NotificationStack.Notifs[i].Active and
      (NotificationStack.Notifs[i].UserID = UserID)
    then
    begin
      NotificationStack.Notifs[i].Active := False;
      str := NotificationStack.Notifs[i].NotiffText;
      Break;
    end;

  ASender.Context.Connection.Socket.WriteLn(str);
end; 
```

* * *

```
// And when i want to some client notificated from server, I use some methodes like this:
procedure TfrmServer.cmhSetUserOnlineCommand(ASender: TIdCommand);
var
  UserID, i: Integer;
begin
  UserID := StrToIntDef(ASender.Context.Connection.Socket.ReadLn, -1);

  if UserID <> -1 then
  begin
    for i := 0 to OnLineUsersCount - 1 do // search for duplication...
      if OnLineUsers[i].Active and (OnLineUsers[i].UserID = UserID) then
        Exit; // duplication rejected!    

    Inc(OnLineUsersCount);
    SetLength(OnLineUsers, OnLineUsersCount);

    OnLineUsers[OnLineUsersCount - 1].UserID := UserID;
    OnLineUsers[OnLineUsersCount - 1].Context := ASender.Context;
    OnLineUsers[OnLineUsersCount - 1].Active := True;

    for i := 0 to OnLineUsersCount - 1 do      // notify all other users for refresh users list
      if OnLineUsers[i].Active and (OnLineUsers[i].UserID <> UserID) then
      begin
        Inc(NotificationStack.Count);
        SetLength(NotificationStack.Notifs, NotificationStack.Count);

        NotificationStack.Notifs[NotificationStack.Count - 1].UserID := OnLineUsers[i].UserID;
        NotificationStack.Notifs[NotificationStack.Count - 1].NotiffText := 'updateusers';
        NotificationStack.Notifs[NotificationStack.Count - 1].Active := True;
      end;
  end;
end; 
```

# ios - iOS将颜色转换为RGB

> ID：13890756
> 
> 赞同：2
> 
> 时间：2012-12-15T08:50:42.533
> 
> 标签：ios, uicolor

我有一个接收 a`UIColor`并需要使用它的 RGBA 值的函数。到目前为止我所做的是使用`CGColorGetComponents`，但这不适用于其他色彩空间（例如`[UIColor blackColor]`灰度）。使用 getRed green blue（在 iOS 5 中）也不起作用`[UIColor blackColor]`（返回 false）。

有什么简单的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T09:10:40.833

以下方法应该适用于大多数情况（图案颜色除外）。将其作为类别添加到 UIColor。

```
- (void)getRGBA:(CGFloat*)buffer {
        CGColorRef clr = [self CGColor];
        NSInteger n = CGColorGetNumberOfComponents(clr);
        const CGFloat *colors = CGColorGetComponents(clr);
        switch (n) {
        case 2:
            for(int i = 0; i<3; ++i){
                buffer[i] = colors[0];
            }
            buffer[3] = CGColorGetAlpha(clr);
            break;
        case 3:
            for(int i = 0; i<3; ++i){
                buffer[i] = colors[i];
            }
            buffer[3] = 1.0;
            break;
        case 4:
            for(int i = 0; i<4; ++i){
                buffer[i] = colors[i];
            }
            break;
        default:
            break;
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T08:55:30.827

`getRed:...`如果颜色不在 RGB 颜色空间中，将返回 false。几乎唯一的其他选择是灰度色彩空间，所以如果你尝试`getWhite:alpha:`，你应该得到有效的值。这种颜色的 RGBA 等效项将具有 R、G 和 B 值中的每一个的白色值。

# javascript - 有人可以解释 WebRTC API 文档吗？

> ID：13890760
> 
> 赞同：4
> 
> 时间：2012-12-15T08:51:44.680
> 
> 标签：javascript, video-streaming, webrtc

所以我[在 WebRTC 上找到了这篇 W3 文章，](http://dev.w3.org/2011/webrtc/editor/webrtc.html)同时寻找一种方法来制作一个完全可以在没有插件的浏览器中运行的视频聊天程序（并指出，据我所知，MediaStream 似乎只能在 Chrome 中运行）。

对于熟悉此 API 的人来说，我的问题相当简单。我只想知道在哪里可以找到包含使用此 API 的客户端示例代码的文档，或者如果不存在，您能否在当前规范下提供一个工作示例？一个演示，或者只是一些“简单”的代码来连接到 STUN 服务器并演示这个 API 的基本功能。

请注意，我不是在要求已弃用的客户端。例如，`webkitPeerConnection`不推荐使用，虽然`webkitRTCPeerConnection`在链接中指定，但现在是当前构造函数。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T12:01:45.200

我创建了资源指南：[WebRTC 入门](https://docs.google.com/document/d/1GpVqJWxvJ58w6K8Ey-p1BOn6zIABWTj4URiY26d910o/edit)。

我还更新了[关于 HTML5 Rocks 的 WebRTC 文章](http://www.html5rocks.com/en/tutorials/webrtc/basics/)。

最重要的是，我建议通读 W3C Editor's Draft 中的[简单 RTCPeerCconnection 示例](http://www.html5rocks.com/en/tutorials/webrtc/basics/#toc-signalling)。这给出了一个完整但易于理解的 RTCPeerConnection 大纲，包括信令。

信令是交换会话控制消息、网络和媒体信息的过程。从 JavaScript 的角度来看，这可能是 WebRTC 最难理解的部分，也是最重要的部分。

webkitRTCPeerConnection 是 Chrome 中现在实现的名称。一旦标准化过程稳定，前缀将被删除。

MediaStream 在 Chrome、Opera 和 Firefox 中实现：请参阅[simpl.info/gum](http://www.simpl.info/getusermedia)中的跨平台示例。

# php - PHP 会话 VS PHP cookie

> ID：13890764
> 
> 赞同：0
> 
> 时间：2012-12-15T08:52:25.223
> 
> 标签：php, session, cookies

> **可能重复：**
> [PHP 会话或 cookie](https://stackoverflow.com/questions/11151597/php-session-or-cookie)

我们正在开发一个新项目，我们希望从页面到页面跟踪有关用户的一些信息，在安全性、可靠性和服务器使用方面，使用会话还是使用 cookie 更好？使用一种方法或另一种方法的优缺点是什么。

例如，跟踪用户是否成功登录，或跟踪用户选择的语言。

基本上，我们想知道如何决定是否应该使用 cookie 或会话，显然，如果我们想跟踪在不同场合甚至不同日期对页面的不同访问中发生的数据，答案将是使用 cookie，但是什么关于在不关闭浏览器的情况下跟踪页面导航。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T10:09:51.567

**cookie**是服务器在 HTTP 响应标头中发送给客户端的一小段文本。客户端将其存储在本地，并将其与请求标头中的每个请求一起返回给服务器。这允许在其他无状态的 HTTP 协议中实现某些*状态。*

**会话**是一个通常*在 cookie 之上*实现的概念。服务器将无意义的唯一会话令牌（随机 id）作为 cookie 发送给客户端，客户端在每次请求时返回它。服务器端这个 id 与一些数据相关联。每次客户端在请求中将其会话令牌发送回服务器时，服务器都会查找与该令牌关联的数据。

会话 ID 在客户端和服务器之间来回传输也可以通过将会话 ID 嵌入到所有 URL 或表单请求中来实现，它不必是 cookie。但是，在 URL 中嵌入会话 ID 是一个坏主意，因为如果 URL 在不同用户之间共享（见下文），这会导致意外的会话传输。这些天会话通常使用 cookie 客户端实现。

从概念上讲，cookie 和会话非常相似，它们都在 HTTP 中实现状态。不同之处在于 cookie 只能存储少量数据，这些数据在每次请求时来回传输并且可由用户编辑（因为它是存储在客户端上的信息）；而会话存储服务器端的所有数据，因此仅受服务器资源的限制。会话存在的唯一漏洞是，如果用户可以猜测或窃取另一个用户的会话 ID，他就可以冒充该用户。这称为[会话劫持](http://en.wikipedia.org/wiki/Session_hijacking)。普通 cookie 没有任何安全性，不应该用于任何重要的事情（例如，用户可以查看和编辑内容，因此存储`userloggedin=yes`在 cookie 中是您能做的最糟糕的事情）。

# c# - EF：在数据库中搜索新创建的对象并更新冲突的旧对象

> ID：13890765
> 
> 赞同：0
> 
> 时间：2012-12-15T08:52:26.717
> 
> 标签：c#, asp.net-mvc, entity-framework, linq-to-entities

我们有一个名为的模型`Model1`，它有两个属性。`Model1.Time`,`Model1.Text`而且`Model1.Value`, 当然它也有 ID 作为要求。

我们从 SOAP 服务接收值并将它们注册到我们的数据库，但问题是：我们必须检查这些值是否已经可用。最好的方法是什么？

基本上我们使用的是 linq 查询。

```
DataContext db = new DataContext();
var x = (from y in db.Models where y.Value != new.Value && y.Text != new.Text select y).toList();
if  { (x.Count == null) db.Models.Add(new); }
else {
foreach (var y in x) {
if (y.Time < new.Time) {
     y.Time = new.Time;
     y.Value = new.Value;
     y.Text = new.Text;
     db.ObjectStateManager.ChangeObjectState(y, EntityState.Modified);
}
}
db.SaveChanges();
} 
```

你认为吗？这是唯一可能的方法还是有更合适的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T20:26:35.307

如果您没有该服务提供的 ID，那么我认为您所拥有的就是您能做的最好的。或者至少是近似的最佳值。如果不了解更多关于您的用例或您要保存的内容，很难为您提供更好的解决方案。

你有什么工作吗？您发布的代码是否有更具体的内容需要帮助？

# iphone - 将渐变层添加到分组的 UITableViewCell 时出现框架问题

> ID：13890766
> 
> 赞同：1
> 
> 时间：2012-12-15T08:52:46.377
> 
> 标签：iphone, objective-c, ios, uitableview

我有一个 UITableViewCell 子类，我添加了这样的叠加渐变：

```
-(id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super initWithCoder:aDecoder];
    if (self) {

        // add a layer that overlays the cell adding a subtle gradient effect
        _gradientLayer = [CAGradientLayer layer];
        _gradientLayer.frame = self.bounds;
        _gradientLayer.colors = @[(id)[[UIColor colorWithWhite:1.0f alpha:0.2f] CGColor],
                                  (id)[[UIColor colorWithWhite:1.0f alpha:0.1f] CGColor],
                                  (id)[[UIColor clearColor] CGColor],
                                  (id)[[UIColor colorWithWhite:0.0f alpha:0.1f] CGColor]];
        _gradientLayer.locations = @[@0.00f, @0.01f, @0.95f, @1.00f];
        [self.layer insertSublayer:_gradientLayer atIndex:0];
    }
    return self;
}
-(void) layoutSubviews {
    [super layoutSubviews];
    // ensure the gradient layers occupies the full bounds
    _gradientLayer.frame = self.contentView.frame;
} 
```

问题是，渐变没有覆盖我的附件视图占用的空间： ![在此处输入图像描述](../Images/1462566a4a828aa2bcbcf65610980e85.png)

您还可以在左上角看到它也没有弯曲。

如何让渐变占据整个单元格空间？

编辑 - - -

如下所示，我添加了：

```
+(Class)layerClass
{
    return [CAGradientLayer class];
} 
```

并将单元格的 init 方法更改为：

```
-(id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super initWithCoder:aDecoder];
    if (self) {
        _gradientLayer = (CAGradientLayer*)self.layer;
        _gradientLayer.colors = @[(id)[[UIColor colorWithWhite:1.0f alpha:0.2f] CGColor],
                                  (id)[[UIColor colorWithWhite:1.0f alpha:0.1f] CGColor],
                                  (id)[[UIColor clearColor] CGColor],
                                  (id)[[UIColor colorWithWhite:0.0f alpha:0.1f] CGColor]];
        _gradientLayer.locations = @[@0.00f, @0.01f, @0.95f, @1.00f];
    }
    return self;
} 
```

但是，现在渐变显示如下： ![在此处输入图像描述](../Images/ca073179e6264c682fab59a3bdc33873.png)

EDIT 2 --------- Tarks 下面的建议，在 UIView 中使用渐变然后分配给单元格的背景给出了这个结果！ ![在此处输入图像描述](../Images/26925422e9f019528a13886bdfd1b16c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T08:57:41.393

以不同的方式进行。在您的子类中覆盖该`+layerClass`方法：

```
+(Class)layerClass
{
    return [CAGradientLayer class];
} 
```

这样，您的单元格的顶层将是渐变层。然后只需将您的投射`self.layer`到`CAGradientLayer`并设置其颜色和位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T11:43:25.370

在您的情况下，这可能是解决方案：

使用资产/动态创建的渐变图像并`[UIColor colorWithPatternImage:gradientImage]`用于设置`backgroundColor`单元格的属性。

如果你想使用你的图层解决方案，你必须为你的渐变图层设置一个蒙版，但是蒙版的形状取决于单元格在部分中的位置等等......

您应该避免在渐变中使用透明度/alpha，至少在您的示例中您不需要它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T14:42:31.787

我认为让这个工作的唯一方法是使用`backgroundView`单元格的属性。否则，您总是会遇到单元格边框和附件视图的问题。只需将渐变层包装在 UIView 中，然后将其设置为背景视图。如果你想偷懒，有人已经这样做了：

[https://github.com/ole/OBGradientView](https://github.com/ole/OBGradientView)

`selectedBackgroundView`如果您也希望将其设置为渐变，您还必须设置该属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T08:59:23.590

附件和编辑视图被添加到内容视图之外——内容视图并不总是填充单元格。

将图层的框架设置为 self.bounds，而不是 self.contentView.frame。

# javascript - 防止 JQuery 加载时出现错误 503

> ID：13890769
> 
> 赞同：0
> 
> 时间：2012-12-15T08:53:08.450
> 
> 标签：javascript, jquery, error-handling

这是我在喊话箱更新上的代码：

```
function updateShoutbox(){
    $("#shoutdiv").load("shoutbox.php", { 'action': 'update' } , 
    function (responseText, textStatus, req) {
        if (textStatus == "error") {
          return false;
        }
    });
}

$(document).ready(function(){
updateShoutbox();
var auto_refresh = setInterval(
function ()
{
updateShoutbox();
$("#shoutdiv").scrollTop($("#shoutdiv")[0].scrollHeight);
}, 6000); 
```

它每隔几分钟返回错误：

> 喊话框.php 返回错误：
> 
> 暂停服务

有没有办法处理这个错误并以某种方式隐藏它？

我编辑了我的代码，以便停止在喊话框更新时显示任何错误，但它仍然每分钟显示此错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T09:33:40.857

好的，让我们以这个为例：

```
$(document).ready(function(){
    (function iterate(i) {
        if (!!i) {
            console.log('iteration #', i--);

            setTimeout(function next(){
                iterate(i);
            }, 1000);
        }
    })(10);
});​ 
```

[http://jsfiddle.net/userdude/6C8yp/](http://jsfiddle.net/userdude/6C8yp/)

如果您查看控制台，您会看到它倒计时，直到`i`等于`0`，或者`i`没有给出（这`!!`就是那里的意思）。我在这里做的是每秒循环一次，但只有在最后一个循环完成之后。我正在喂我的循环。

看看你在这里有什么，我可能会这样做：

```
$(document).ready(function($){
    var $shoutbox = $("#shoutdiv"),
        timer;

    (function update(){
        var opts = {
            url: 'shoutbox.php',
            action: 'update',
            complete: wait
        };

        $.ajax(opts);

        function wait(res, status, req){
            if (status == 200) {
                $shoutbox
                    .append(res)
                    .scrollTop($shoutbox[0].scrollHeight);

                timer = setTimeout(update, 6000);
            }
        }

    })();
});​ 
```

[http://jsfiddle.net/userdude/whsPn/](http://jsfiddle.net/userdude/whsPn/)

[http://jsfiddle.net/userdude/whsPn/1/](http://jsfiddle.net/userdude/whsPn/1/)

好的，所以我们上面的内容应该主要模拟您在问题中的代码。你会注意到我`complete: wait`在里面有这个部分，并且`setTimeout()`在那个回调中。而且..只有在`status`返回`200`（成功）时才会调用它。

现在，您可以转到`complete: wait`，`success: wait`并`status == 200`完全删除 if 语句。当然，如果您*确实*想再次运行更新，但可能会做一些不同的事情，这是您的机会。

另请注意，在链接的小提琴中，我有一些虚拟代码。因此，不要只是复制/分页小提琴中的内容，否则您会遇到错误并且根本无法运行。

**编辑**：糟糕，发现`url =`. 固定的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T09:24:45.267

如果您想“隐藏”您的错误，而不是首先查找错误原因，请在 $.load 中的回调函数中尝试此操作：

```
function (responseText, textStatus, req) {
  if(req.status!=200&&req.status!=302) {
    return false;
  }
  //update the shoutbox
} 
```

至少对我来说，这似乎是防止随机错误通过您的检查的最可靠方法。

# windows - 设置包含单词的窗口的位置

> ID：13890773
> 
> 赞同：0
> 
> 时间：2012-12-15T08:54:01.653
> 
> 标签：windows, macos, applescript, move

我想将特定应用程序的窗口移动到确定的坐标。

我制作了一个小原始脚本，但我希望以更优雅和更实用的方式拥有它。它应该只移动标题中包含确定单词的窗口。也许我们应该在标题中创建一个带有那个词的窗口列表，然后循环浏览它们以放置这些坐标。

我怎样才能做到这一点？

这就是我到目前为止所写的：

```
tell application "System Events"
    tell process "AppIT"
        (*
    {804, 368}
{536, 368}
{268, 368}
{0, 368}
{804, 22}
{536, 22}
{268, 22}
{0, 22}
*)
        set position of window 1 to {0, 22}
        set position of window 2 to {268, 22}
        set position of window 3 to {536, 22}
        set position of window 4 to {804, 22}
        set position of window 5 to {0, 368}
        set position of window 6 to {268, 368}
        set position of window 7 to {536, 368}
        set position of window 8 to {804, 368}

        set position of window 9 to {0, 22}
        set position of window 10 to {268, 22}
        set position of window 11 to {536, 22}
        set position of window 12 to {804, 22}
        set position of window 13 to {0, 368}
        set position of window 14 to {268, 368}
        set position of window 15 to {536, 368}
        set position of window 16 to {804, 368}

        set position of window 17 to {0, 22}
        set position of window 18 to {268, 22}
        set position of window 19 to {536, 22}
        set position of window 20 to {804, 22}
        set position of window 21 to {0, 368}
        set position of window 22 to {268, 368}
        set position of window 23 to {536, 368}
        set position of window 24 to {804, 368}
    end tell
end tell 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T09:16:10.013

```
tell application "System Events"
    tell process "TextEdit"
        set w to windows where title contains "text"
        set position of item 1 of w to {0, 22}
        set position of item 2 of w to {268, 22}
    end tell
end tell 
```

# android - 应用在移动 google play 中不可见

> ID：13890776
> 
> 赞同：0
> 
> 时间：2012-12-15T08:54:06.220
> 
> 标签：android, google-play

> **可能重复：**
> [通过智能手机浏览 Android Market 时应用程序不显示](https://stackoverflow.com/questions/8557958/app-doesnt-show-up-when-browsing-android-market-via-smartphone)

我已经开发了一个应用程序并将其成功上传到 android 市场，但是当我使用网络浏览器搜索我的应用程序时，它是可见的，但是在谷歌上使用移动搜索时它不可见。

不知道怎么回事..?? 帮我..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T09:10:30.847

您的清单很可能缺少：

```
<supports-screens 
    android:xlargeScreens="true" 
    android:largeScreens="true" 
    android:normalScreens="true"
    android:smallScreens="true" 
    android:anyDensity="true" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T09:17:01.333

我认为发布选项存在问题。

登录开发者控制台。检查您是否选中了“发布选项”下的“所有国家/地区”复选框。并检查您的应用是否支持所有屏幕布局。

# vb.net - 连接 tcpListen 而不在客户端定义服务器的 IP？

> ID：13890782
> 
> 赞同：-1
> 
> 时间：2012-12-15T08:54:53.540
> 
> 标签：vb.net

现在我正在制作一个在客户端服务器上工作的程序。在 vb net 中，我使用的是套接字通信。我遇到的问题是如何连接服务器而不在客户端定义服务器的 ip。为什么我被问到这个？

好吧，有时服务器的IP总是在变化。可能在重新启动计算机时发生。现在我要连接两台计算机，我使用套接字通信。但在我们使用它之前，必须先定义客户端和服务器端。也许定义IP是不必要的？

解决这种情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T13:18:04.420

该`Socket.Connect`方法可以采用主机名或 IPAddress，因此只要服务器的主机名不变，您就可以使用它。

# android - 如何仅在 WiFi 上启用 android 备份代理？

> ID：13890783
> 
> 赞同：-1
> 
> 时间：2012-12-15T08:54:53.677
> 
> 标签：android, wifi, backup, radio, 4g

我编写了一个 BackupAgent 来备份我的数据，但我只想在连接 WiFi 而不是 GPRS/3G/4G 时启用备份。我可以以编程方式控制它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T10:06:52.920

Wifi 状态始终可以如下所示：

1) 使用 Context.getSystemService(Context.WIFI_SERVICE) 方法获取 WifiManager 对象

2) 使用 [isWifiEnabled](http://developer.android.com/reference/android/net/wifi/WifiManager.html#isWifiEnabled%28%29)类了解 Wifi 的状态。

要知道手机数据连接的状态，使用
TelephonyManager tm = Context.getSystemService(Context.TELEPHONY_SERVICE) 获取一个Instance，然后使用

Tm值。[getDataState](http://developer.android.com/reference/android/telephony/TelephonyManager.html#getDataState%28%29)了解数据连接的状态。

现在，当 getDataState 的返回值为 TelephonyManager.DATA_DISCONNECTED 且 isWifiEnabled 的返回值为 true 时运行 BackupAgent。

为了能够在连接（3G/WiFi）断开后禁用备份，创建一个新方法如下：

```
enter code here  
protected void checkMyConnectivity()

{

if (tm.getDataState ==  TelephonyManager.DATA_DISCONNECTED && wm.isWifiEnabled==true)

return true;

else

return false;

}` 
```

并在您想要检查连接性时使用此代码，如果返回值为 false，请停止上传。如果您想非常具体，请改用 while 循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T05:47:35.077

1) 每当您没有使用 Wifi 服务的 wifi 时，如果没有 wifi，则以编程方式从手机设置中取消帐户

AccountManager accountManager = AccountManager.get(this); 帐户[] 帐户 = accountManager.getAccounts(); Log.i(TAG,"账户大小"+accounts.length); `for(Account acc:accounts){ Log.d(TAG,"acc name "+acc.name+" acc type "+acc.type); boolean isSync = ContentResolver.isSyncActive(acc, ContactsContract.Settings.CONTENT_URI.toString()); Log.d(`在此处输入代码`TAG,"isSync "+isSync); cr.setSyncAutomatically(acc, , false);// 此处取消同步邮件帐户 }

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-13T09:54:53.703

```
protected boolean isWifiConnectivity() {
    TelephonyManager telephonyManager = (TelephonyManager) getContext().getSystemService(Context.TELEPHONY_SERVICE);
    WifiManager wifiManager = (WifiManager) getContext().getSystemService(Context.WIFI_SERVICE);
    return (telephonyManager.getDataState() == TelephonyManager.DATA_DISCONNECTED && wifiManager.isWifiEnabled());
} 
```

# jquery - 防止在jquery mobile中切换固定标题

> ID：13890787
> 
> 赞同：1
> 
> 时间：2012-12-15T08:55:43.943
> 
> 标签：jquery, jquery-mobile

在 jquerymobile 中，我在这里创建了一个固定的标题：http: [//jquerymobile.com/test/docs/toolbars/bars-fixed.html](http://jquerymobile.com/test/docs/toolbars/bars-fixed.html)

您可以看到，当您点击屏幕上的任何位置（除了点击表单的元素）时，此工具栏会切换（显示或隐藏）。

现在我有了一个div，并在这个div标签上写了一些onclick事件的函数，这里的问题是当我点击这个div时，工具栏也被切换了。我只是想在我点击 div 时阻止此切换，当我点击屏幕上的其他位置时，此工具栏仍会正常发生此事件。

如果您对这个问题有任何线索，请帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T09:11:33.353

你需要的是这样的：

```
 event.stopPropagation(); 
```

它甚至会阻止传播到父 div。

我还为您创建了一个示例：http: [//jsfiddle.net/Gajotres/Xz2np/](http://jsfiddle.net/Gajotres/Xz2np/)。您可以删除/添加 event.stopPropagation() 以查看它是如何工作的。

# django - django app 模块和相对导入

> ID：13890788
> 
> 赞同：2
> 
> 时间：2012-12-15T08:55:46.443
> 
> 标签：django

嘿，我想在我的应用程序中使用一些 python 模块。问题是这个模块必须在 app 文件夹中“托管”。所以我将模块放在 myapp/packagaes 文件夹（myapp/packages/modulename）中，然后我尝试将它加载到 django 应用程序中`from myapp.packages import modulename`- 这工作正常，直到模块由从该模块导入其他一些子模块的子模块组成 - 然后导入路径是错误的因为`myapp.`在导入路径之前没有前缀。

例如：

```
myapp/packages/module/submodule1/...
myapp/packages/module/submodule2/... 
```

并在`myapp/packages/module/submodule1/__init__.py`：

```
import module.submodule2 # this will fail because it should be import myapp.module.submodule2 
```

那么如何在不修改模块源的情况下克服这种情况呢？

# logging - 如何将 dmesg 时间戳转换为自定义日期格式？

> ID：13890789
> 
> 赞同：149
> 
> 时间：2012-12-15T08:55:52.240
> 
> 标签：logging, timestamp, kernel, dmesg

我试图了解`dmesg`时间戳，发现很难将其转换为 java 日期/自定义日期格式。

示例 dmesg 日志：

```
[14614.647880] airo(eth1): link lost (missed beacons) 
```

那么如何转换`14614.647880`为标准日期呢？

* * *

## 回答 #1

> 赞同：242
> 
> 时间：2012-12-15T09:01:47.740

理解`dmesg`时间戳非常简单：它是自内核启动以来的时间，以秒为单位。因此，有了启动时间 ( `uptime`)，您可以将秒数相加并以您喜欢的任何格式显示。

或者更好的是，您可以使用 的`-T`命令行选项`dmesg`并解析人类可读的格式。

从[手册页](http://manpages.ubuntu.com/manpages/raring/en/man1/dmesg.1.html)：

```
-T, --ctime
    Print human readable timestamps. The timestamp could be inaccurate!

    The time source used for the logs is not updated after system SUSPEND/RESUME. 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-10-09T12:39:08.017

[在回答博士](https://stackoverflow.com/users/115655/dr)的帮助下，我编写了一个解决方法，可以将转换放入您的 .bashrc。如果您没有任何时间戳或已经正确的时间戳，它不会破坏任何东西。

```
dmesg_with_human_timestamps () {
    $(type -P dmesg) "$@" | perl -w -e 'use strict;
        my ($uptime) = do { local @ARGV="/proc/uptime";<>}; ($uptime) = ($uptime =~ /^(\d+)\./);
        foreach my $line (<>) {
            printf( ($line=~/^\[\s*(\d+)\.\d+\](.+)/) ? ( "[%s]%s\n", scalar localtime(time - $uptime + $1), $2 ) : $line )
        }'
}
alias dmesg=dmesg_with_human_timestamps 
```

此外，很好地阅读了 dmesg 时间戳转换逻辑以及在没有时间戳时如何启用时间戳： https: [//supportcenter.checkpoint.com/supportcenter/portal?eventSubmit_doGoviewsolutiondetails= &solutionid=sk92677](https://supportcenter.checkpoint.com/supportcenter/portal?eventSubmit_doGoviewsolutiondetails=&solutionid=sk92677)

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2016-04-01T16:21:33.040

对于 RHEL/CentOS 6 等没有“dmesg -T”的系统，我喜欢之前[lucas-cimon](https://stackoverflow.com/users/636849/lucas-cimon)提供的“dmesg_with_human_timestamps”功能。不过，我们的一些正常运行时间较长的盒子有点麻烦。事实证明，dmesg 中的内核时间戳是从单个 CPU 保存的正常运行时间值得出的。随着时间的推移，这与实时时钟不同步。因此，最近 dmesg 条目的最准确转换将基于 CPU 时钟而不是 /proc/uptime。例如，在此处的特定 CentOS 6.6 机器上：

```
# grep "\.clock" /proc/sched_debug  | head -1
  .clock                         : 32103895072.444568
# uptime
 15:54:05 up 371 days, 19:09,  4 users,  load average: 3.41, 3.62, 3.57
# cat /proc/uptime
32123362.57 638648955.00 
```

考虑到 CPU 正常运行时间以毫秒为单位，这里有近 5 1/2 小时的偏移量。所以我修改了脚本并在过程中将其转换为原生 bash：

```
dmesg_with_human_timestamps () {
    FORMAT="%a %b %d %H:%M:%S %Y"

    now=$(date +%s)
    cputime_line=$(grep -m1 "\.clock" /proc/sched_debug)

    if [[ $cputime_line =~ [^0-9]*([0-9]*).* ]]; then
        cputime=$((BASH_REMATCH[1] / 1000))
    fi

    dmesg | while IFS= read -r line; do
        if [[ $line =~ ^\[\ *([0-9]+)\.[0-9]+\]\ (.*) ]]; then
            stamp=$((now-cputime+BASH_REMATCH[1]))
            echo "[$(date +"${FORMAT}" --date=@${stamp})] ${BASH_REMATCH[2]}"
        else
            echo "$line"
        fi
    done
}

alias dmesgt=dmesg_with_human_timestamps 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2015-12-10T02:18:31.290

所以[KevZero](https://reddit.com/u/KevZero)要求一个不那么笨拙的解决方案，所以我想出了以下内容：

```
sed -r 's#^\[([0-9]+\.[0-9]+)\](.*)#echo -n "[";echo -n $(date --date="@$(echo "$(grep btime /proc/stat|cut -d " " -f 2)+\1" | bc)" +"%c");echo -n "]";echo -n "\2"#e' 
```

这是一个例子：

```
$ dmesg|tail | sed -r 's#^\[([0-9]+\.[0-9]+)\](.*)#echo -n "[";echo -n $(date --date="@$(echo "$(grep btime /proc/stat|cut -d " " -f 2)+\1" | bc)" +"%c");echo -n "]";echo -n "\2"#e'
[2015-12-09T04:29:20 COT] cfg80211:   (57240000 KHz - 63720000 KHz @ 2160000 KHz), (N/A, 0 mBm), (N/A)
[2015-12-09T04:29:23 COT] wlp3s0: authenticate with dc:9f:db:92:d3:07
[2015-12-09T04:29:23 COT] wlp3s0: send auth to dc:9f:db:92:d3:07 (try 1/3)
[2015-12-09T04:29:23 COT] wlp3s0: authenticated
[2015-12-09T04:29:23 COT] wlp3s0: associate with dc:9f:db:92:d3:07 (try 1/3)
[2015-12-09T04:29:23 COT] wlp3s0: RX AssocResp from dc:9f:db:92:d3:07 (capab=0x431 status=0 aid=6)
[2015-12-09T04:29:23 COT] wlp3s0: associated
[2015-12-09T04:29:56 COT] thinkpad_acpi: EC reports that Thermal Table has changed
[2015-12-09T04:29:59 COT] i915 0000:00:02.0: BAR 6: [??? 0x00000000 flags 0x2] has bogus alignment
[2015-12-09T05:00:52 COT] thinkpad_acpi: EC reports that Thermal Table has changed 
```

如果您希望它执行得更好，请将 proc 中的时间戳放入变量中：)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-07-10T08:45:36.377

在最新版本的 dmesg 中，您只需调用`dmesg -T`.

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-06-13T22:05:21.957

如果您没有例如在 Andoid 上的`-T`选项，您可以使用该版本。以下还解决了其他一些问题：`dmesg``busybox`

1.  格式前面`[0.0000]`有一些看起来像错位的颜色信息，前缀如`<6>`.
2.  从浮点数制作整数。

它的灵感来自[这篇博文](https://blog.sleeplessbeastie.eu/2013/10/31/how-to-deal-with-dmesg-timestamps/)。

```
#!/bin/sh                                                                                                               
# Translate dmesg timestamps to human readable format                                                                   

# uptime in seconds                                                                                                     
uptime=$(cut -d " " -f 1 /proc/uptime)                                                                                  

# remove fraction                                                                                                       
uptime=$(echo $uptime | cut -d "." -f1)                                                                                 

# run only if timestamps are enabled                                                                                    
if [ "Y" = "$(cat /sys/module/printk/parameters/time)" ]; then                                                          
  dmesg | sed "s/[^\[]*\[/\[/" | sed "s/^\[[ ]*\?\([0-9.]*\)\] \(.*\)/\\1 \\2/" | while read timestamp message; do      
    timestamp=$(echo $timestamp | cut -d "." -f1)                                                                       
    ts1=$(( $(busybox date +%s) - $uptime + $timestamp ))                                                               
    ts2=$(busybox date -d "@${ts1}")                                                                                    
    printf "[%s] %s\n" "$ts2" "$message"                                                                                
  done                                                                                                                  
else                                                                                                                    
  echo "Timestamps are disabled (/sys/module/printk/parameters/time)"                                                   
fi 
```

但是请注意，此实现非常缓慢。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-02-05T02:41:37.007

您需要参考 /proc/stat 中的“btime”，这是系统最近一次启动时的 Unix 纪元时间。然后您可以基于该系统启动时间，然后添加 dmesg 中给出的经过秒数来计算每个事件的时间戳。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-08-14T10:37:42.090

对于较旧的 Linux 发行版，另一种选择是使用包装脚本，例如在 Perl 或 Python 中。

在此处查看解决方案：

[http://linuxaria.com/article/how-to-make-dmesg-timestamp-human-readable?lang=en](http://linuxaria.com/article/how-to-make-dmesg-timestamp-human-readable?lang=en) [http://jmorano.moretrix.com/2012/03/dmesg-human-readable-timestamps/](http://jmorano.moretrix.com/2012/03/dmesg-human-readable-timestamps/)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-11-09T21:46:41.503

其他答案似乎没有提到的一个警告是，显示的时间`dmesg` **没有考虑任何 sleep/suspend time**。因此，在某些情况下，使用的通常答案`dmesg -T`不起作用，并显示完全错误的时间。

这种情况的解决方法是在已知时间向内核日志写入一些内容，然后使用该条目作为参考来计算其他时间。显然，它只会在最后一次挂起后工作一段时间。

因此，要显示自上次启动以来可能已暂停的机器上最近条目的正确时间，请使用我[在此处的其他答案](https://serverfault.com/a/973370/63361)中的类似内容：

```
# write current time to kernel ring buffer so it appears in dmesg output
echo "timecheck: $(date +%s) = $(date +%F_%T)" | sudo tee /dev/kmsg

# use our "timecheck" entry to get the difference
# between the dmesg timestamp and real time
offset=$(dmesg | grep timecheck | tail -1 \
| perl -nle '($t1,$t2)=/^.(\d+)\S+ timecheck: (\d+)/; print $t2-$t1')

# pipe dmesg output through a Perl snippet to
# convert it's timestamp to correct readable times
dmesg | tail \
| perl -pe 'BEGIN{$offset=shift} s/^\[(\d+)\S+/localtime($1+$offset)/e' $offset 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-11-12T14:07:59.647

`dmesg -T`可能会显示错误的时间，与`date`命令输出不同。

解决方法是带 -k、--dmesg 的 journalctl。我正在使用 -k 因为它更短：

```
journalctl -k 
```

它只会显示内核消息和正确的时间。

仅显示与短语匹配的内核行：

```
journalctl -kg phrase 
```

# python - 与 Web 浏览器集成

> ID：13890792
> 
> 赞同：0
> 
> 时间：2012-12-15T08:56:14.277
> 
> 标签：python, browser, integration

我正在尝试为 Linux 制作一个下载管理器，就像 Internet 下载管理器一样。

我想知道 IDM 如何在不使用任何扩展程序 (Chrome) 或附加组件 (Firefox) 的情况下与浏览器集成此外，如果我能知道我们在浏览器上的视频（下载此视频）中所说的覆盖。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T12:55:45.217

我相当肯定这样的程序确实使用了扩展和插件。

事实上，我快速浏览了您提到的 IDM，它包含`IDMGCExt.crx`（chrome 扩展）和一个`idmmzcc.xpi`（firefox 插件），其中一些 dll 可能是 Windows shell 和 IE 扩展...

我能想到的唯一另一种方法是编写一个[NPAPI](http://en.wikipedia.org/wiki/NPAPI) -plugin，它可以同时涵盖许多兼容的浏览器，但是在没有这些的情况下编写一个与浏览器交互的程序在今天的浏览器中是不可能的。

# actionscript-3 - 如何在闪存中显示硬盘驱动器中的图像

> ID：13890793
> 
> 赞同：0
> 
> 时间：2012-12-15T08:56:19.010
> 
> 标签：actionscript-3, flash

我想从硬盘加载图像并显示在我的 Flash 电影中当我点击按钮时我的代码很少，它会打开超链接，所以任何人都知道图像加载功能

```
package{

    import flash.display.Sprite;
    import flash.events.MouseEvent;
    import flash.net.navigateToURL;
    import flash.net.URLRequest;

    public class Main extends Sprite{

        public function Main():void{
            z_cst.addEventListener(MouseEvent.CLICK,buttonClick);    
            z_kp.addEventListener(MouseEvent.CLICK,buttonClick);     
            z_kr.addEventListener(MouseEvent.CLICK,buttonClick);   
            z_ka.addEventListener(MouseEvent.CLICK,buttonClick);   
            z_rs.addEventListener(MouseEvent.CLICK,buttonClick);   
            z_c.addEventListener(MouseEvent.CLICK,buttonClick);   
            z_vp.addEventListener(MouseEvent.CLICK,buttonClick);  
            z_cr.addEventListener(MouseEvent.CLICK,buttonClick);   
            z_cs.addEventListener(MouseEvent.CLICK,buttonClick);   
        }

        private function buttonClick(e:MouseEvent):void{
            var url:URLRequest=new URLRequest();
            switch(e.target.name){
                case "z_cst": url.url="http://www.star.com"; break;
                case "z_kp": url.url="http://www.star.com"; break;
                case "z_kr": url.url="http://www.star.com"; break;
                case "z_ka": url.url="http://www.star.com"; break;
                case "z_rs": url.url="http://www.gear.com"; break;
                case "z_c": url.url="http://www.apple.com"; break;
                case "z_vp": url.url="http://www.images.com"; break;
                case "z_cr": url.url="http://www.buy.com"; break;
                case "z_cs": url.url="http://www.contact.com"; break;
            }
            navigateToURL(url,"_blank");
        }
    }   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T01:19:26.457

查找用于加载图像的 Loader{} 类 - [http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Loader.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Loader.html)

* * *

## 添加了一些代码 - （希望评论中的代码可以格式化为代码）

从您的评论看来，您会得到它。您缺少的是您需要调用 Loader 对象的 load() 方法并将 URLRequest 对象传递给它。下面是一些代码，在您之前的代码之后松散地执行此操作：

```
private function buttonClick(e:MouseEvent):void {
    var loader:Loader = new Loader();
    this.addChild(loader);

    switch(e.target.name) {
        case "z_cst":
            loader.load(new URLRequest("/data/1.jpg"));
            break;
        case "z_kp":
            loader.load(new URLRequest("/data/2.jpg"));
            break;
        case "z_kr":
            loader.load(new URLRequest("/data/3.jpg"));
            break;
        default:
            trace("buttonClick() - No matching name found");
            this.removeChild(loader); // remove the Loader object from the stage as it is 'empty'
            break;
    }
} 
```

我将“默认”块添加到 switch 块以帮助检查可能的错误。Loader 对象是一个显示对象，因此您可以像任何其他显示对象一样定位它。

# ruby-on-rails - 无法启动 Rails 服务器，出现很多“加载错误”

> ID：13890796
> 
> 赞同：1
> 
> 时间：2012-12-15T08:56:32.120
> 
> 标签：ruby-on-rails, rubygems, ruby-1.8.7

我正在尝试在我的 ubuntu 上设置一个现有的朋友项目，我使用 rvm 安装了 ruby​​ ree-1.8.7 并运行`rvm use`命令切换到该 ruby​​。然后在 app 文件夹中运行 bundle install 并安装了所有的 gem（有很多）

现在我尝试运行`rails server`，但出现大量错误。我不会复制所有文本，因为它很大，但这是它的基本外观。我该如何解决这个问题？

```
/home/schaller/.rvm/gems/ree-1.8.7-2012.02/gems/activesupport-3.0.9/lib/active_support/dependencies.rb:239:in `require': no such file to load -- twitter-text (LoadError)
from /home/schaller/.rvm/gems/ree-1.8.7-2012.02/gems/activesupport-3.0.9/lib/active_support/dependencies.rb:239:in `require'
from /home/schaller/.rvm/gems/ree-1.8.7-2012.02/gems/activesupport-3.0.9/lib/active_support/dependencies.rb:225:in `load_dependency'
from /home/schaller/.rvm/gems/ree-1.8.7-2012.02/gems/activesupport-3.0.9/lib/active_support/dependencies.rb:596:in `new_constants_in'
from /home/schaller/.rvm/gems/ree-1.8.7-2012.02/gems/activesupport-3.0.9/lib/active_support/dependencies.rb:225:in `load_dependency'
from /home/schaller/.rvm/gems/ree-1.8.7-2012.02/gems/activesupport-3.0.9/lib/active_support/dependencies.rb:239:in `require'
from /home/schaller/.rvm/gems/ree-1.8.7-2012.02/gems/twitter-2.0.0/lib/twitter/status.rb:9
from /home/schaller/.rvm/gems/ree-1.8.7-2012.02/gems/activesupport-3.0.9/lib/active_support/dependencies.rb:239:in `require'
from /home/schaller/.rvm/gems/ree-1.8.7-2012.02/gems/activesupport-3.0.9/lib/active_support/dependencies.rb:239:in `require'
from /home/schaller/.rvm/gems/ree-1.8.7-2012.02/gems/activesupport-3.0.9/lib/active_support/dependencies.rb:225:in `load_dependency'
from /home/schaller/.rvm/gems/ree-1.8.7-2012.02/gems/activesupport-3.0.9/lib/active_support/dependencies.rb:596:in `new_constants_in'
from /home/schaller/.rvm/gems/ree-1.8.7-2012.02/gems/activesupport-3.0.9/lib/active_support/dependencies.rb:225:in `load_dependency'
from /home/schaller/.rvm/gems/ree-1.8.7-2012.02/gems/activesupport-3.0.9/lib/active_support/dependencies.rb:239:in `require'
from /home/schaller/.rvm/gems/ree-1.8.7-2012.02/gems/twitter-2.0.0/lib/twitter/user.rb:5
from /home/schaller/.rvm/gems/ree-1.8.7-2012.02/gems/activesupport-3.0.9/lib/active_support/dependencies.rb:239:in `require' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T09:01:08.953

它不是大量的错误，它只是一个错误，你看到的是堆栈跟踪:)

真正的错误是：

```
`require': no such file to load -- twitter-text (LoadError) 
```

因此，将 twitter-text 添加到您的 Gemfile 并重试；）

# jquery - 更好的 API 来检索经度/纬度数据

> ID：13890800
> 
> 赞同：1
> 
> 时间：2012-12-15T08:57:28.030
> 
> 标签：jquery, json, api

```
$.getJSON('http://api.wipmania.com/jsonp?callback=?', function (data) {
  $("#hello").html('Latitude: ' + data.latitude +
        '<br /> Longitude: ' + data.longitude +
        '<br /> Country: ' + data.address.country);
});​ 
```

我经常使用上面的代码来获取`latitude,longitude,country`. 但是很多时候它不能正常工作

```
Latitude: 0
Longitude: 0
Country: Unknown 
```

有没有更好的 API 来获得这些结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T09:06:57.510

我一直使用 smart-ip 作为 HTML5 的地理定位 API 的后备，但从来没有真正遇到过任何问题？

```
$.getJSON('http://smart-ip.net/geoip-json/?callback=?', function (data) {
    $("#hello").html('Latitude: ' + data.latitude +
        '<br /> Longitude: ' + data.longitude +
        '<br /> Country: ' + data.countryName);
});​ 
```

[**小提琴**](http://jsfiddle.net/4mry4/)

谷歌也是一个不错的选择，但谷歌地图的[TOS](https://developers.google.com/maps/terms)明确指出：

> 在没有相应的 Google 地图的情况下，您不得使用或显示内容（来自 Maps API），除非 Maps API 文档明确允许您这样做，或获得 Google 的书面许可。

# c# - 如何重定向到登录页面客户端

> ID：13890805
> 
> 赞同：0
> 
> 时间：2012-12-15T08:58:27.540
> 
> 标签：c#, jquery, asp.net-mvc

当会话到期时，我想重定向到登录页面。如何也可以在客户端事件上完成

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T13:13:38.017

像这样试试

```
function redirectme()
{
@if(Session["key"]==null)
{
<text>window.location.href='/Account/Login';</text>
}
} 
```

希望这对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T09:01:55.130

您可以通过 javascript 调用控制器方法，然后将重定向代码放入控制器方法中来完成它。这样，javascript 将检查会话是否过期，如果是，它将调用我们的方法，然后调用客户端的重定向。

# .net - Telerik Reports：如何按 DateTime 的日期分组？

> ID：13890808
> 
> 赞同：0
> 
> 时间：2012-12-15T08:58:32.190
> 
> 标签：.net, telerik, reporting, telerik-reporting

我需要一个报告，其中将列出一组事件，并且我需要将这些事件按事件 DateTime 的 Date 组件分组。

当我创建一个组时，我可以确定记录分组所依据的表达式，但我找不到检索 DateTime 日期的函数。所以我想我不需要使用这些表达式并确定如何以编程方式进行分组，但我不知道如何做到这一点。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-29T21:21:29.527

[在此处](http://www.telerik.com/help/reporting/expressions-extending-expressions.html)查看自定义表达式扩展。这将允许您在 CLR (C#/VB) 中编写自己的表达式，然后像使用内置 Telerik 表达式一样使用它们。

# python - scrapy BaseSpider 类是否有“规则”选项

> ID：13890810
> 
> 赞同：0
> 
> 时间：2012-12-15T08:59:07.873
> 
> 标签：python, scrapy

我已经看到很多关于 SO 的问题，人们在询问他们何时从 BaseSpider 或 InitSpider 继承。

[在scrapy中设置粘性cookie](https://stackoverflow.com/questions/11949667/setting-sticky-cookie-in-scrapy)

```
class TestSpider(InitSpider):
    ...
    rules = (Rule(SgmlLinkExtractor(allow=('products/./index\.html', )), callback='parse_page'),)

    def init_request(self):
        return Request(url = self.init_url, callback=self.parse_js) 
```

现在我已经看到 BaseSPider 没有任何“规则”选项，但人们仍在写它。

我想知道我是否错了

我也没有看到任何高级成员在问题中提到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T18:18:51.957

根据不同类型蜘蛛的源代码，我们可以得出以下结论。

实施规则：

*   [CrawlSpider](https://github.com/scrapy/scrapy/blob/master/scrapy/contrib/spiders/crawl.py)（Rule 类从第 17 行到第 28 行定义，并在第 32 行作为数据成员添加到 CrawlSpider 类）

不执行规则：

*   [基地蜘蛛](https://github.com/scrapy/scrapy/blob/master/scrapy/spider.py)
*   [初始化蜘蛛](https://github.com/scrapy/scrapy/blob/master/scrapy/contrib/spiders/init.py)
*   [XMLFeedSpider](https://github.com/scrapy/scrapy/blob/master/scrapy/contrib/spiders/feed.py)

如果您因为有人在除 CrawlSpider 之外的蜘蛛中定义规则的所有示例而不相信这一点，您可以通过创建一个引用`callback1`并包含以下语句的规则来测试这一点`callback1`：

`print "We're in callback1 so the rule must work"`

如果您在运行非 CrawlSpider 蜘蛛时看到该语句，那么您知道规则已实现。

# c# - .NET 中的权限/角色框架

> ID：13890815
> 
> 赞同：2
> 
> 时间：2012-12-15T08:59:31.767
> 
> 标签：c#, .net, permissions, user-roles

我有一个 3 层应用程序（客户端、服务器、dbms），我正在寻找一个 Permission-/roleframework。我知道带有 GlassFish 的 Java EE 中的角色/权限框架。我正在寻找的框架应该接近。

使用权限，我想验证特定角色的用户是否可以使用业务案例。

你知道这样的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T09:56:06.843

在 .NET 中，您通常会使用内置的 Membership 提供程序。您可以开箱即用地使用它，或者实现一组接口，为您提供所需的所有功能。您可以在此处找到有关它的所有信息：

[http://msdn.microsoft.com/en-us/library/aa479021.aspx](http://msdn.microsoft.com/en-us/library/aa479021.aspx)

SO上的这个问题有更多关于你为什么要使用它的细节：

[*不*使用 asp.net 会员提供程序是个坏主意吗？](https://stackoverflow.com/questions/2969043/is-not-using-the-asp-net-membership-provider-a-bad-idea)

[Rhino.Security](https://github.com/ayende/rhino-security)将是一个现有的替代方案。我自己从来没有用过，所以我不能推荐它。你会在这个博客上找到很多信息：http: [//ayende.com/blog/tags/rhino-security](http://ayende.com/blog/tags/rhino-security)

# ssl - 使用特殊规则签署证书请求

> ID：13890816
> 
> 赞同：0
> 
> 时间：2012-12-15T08:59:41.553
> 
> 标签：ssl, openssl, certificate, ssl-certificate

好吧，我不确定我是否正确指定了问题。

当我浏览网页时，我检查了几个 SSL 证书，并注意到即使是根证书也没有设置应用程序的所有属性（或者它被称为）。

当我创建自己的 CA 证书时，它具有：

-所有发行规则，

-所有应用规则。

此根签名的新证书具有：

-所有应用规则。

Cert 公司为 Class 1、Class 2、EV 制作了另一个属性。是否可以使用 OpenSSL 设置这些规则。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:21:08.750

如果您在谈论 KeyUsage（例如，代码签名或客户端身份验证），那么 openSSL 可以添加这些属性。下面是创建具有特定 KeyUsage 属性的 CSR（证书签名请求）的示例。

创建一个`test.conf`使用此内容调用的文本文件：

```
[req]
distinguished_name = req_distinguished_name
req_extensions     = v3_user_req

[req_distinguished_name]
countryName                     = Country Name (2 letter code)
stateOrProvinceName             = State or Province Name (full name)
localityName                    = Locality Name (city, district)
organizationName                = Organization Name (company)
organizationalUnitName          = Organizational Unit Name (department, division)
commonName                      = Common Name (hostname, IP, or your name)

countryName_default             = US
stateOrProvinceName_default     = Utah
localityName_default            = MyOrganization
organizationName_default        = MyDepartment
organizationalUnitName_default  = MyUnitName
commonName_default              = myserver.mydomain.com

[ v3_user_req ]
basicConstraints       = CA:FALSE
keyUsage               = digitalSignature, keyEncipherment
nsCertType             = client, server, email, objsign 
```

现在运行这个命令：

```
openssl req -new -nodes -newkey rsa:2048 -config test.conf -keyout hostname.key -out hostname.csr
x509v3_config 
```

您的 CSR 将在`hostname.csr`此`X509v3 Key Usage`部分中：

```
X509v3 Key Usage:
  Digital Signature, Key Encipherment 
```

# c# - 旋转附加到其他对象的对象

> ID：13890820
> 
> 赞同：1
> 
> 时间：2012-12-15T09:00:45.683
> 
> 标签：c#, xna, xna-4.0

我有一个关于包含动画对象集合的单个网格（建筑物）的问题（这些对象构成了完整的建筑物，在建造时以不同的速度和旋转从地面升起）。

网格中的动画对象都有自己的位置和旋转动画轨迹。我将它从 3DS Max 导出为 ASE，将其转换为专有格式，然后在我的游戏引擎中使用它。

因此，此刻，我可以成功显示网格中所有动画对象的动画位置。执行以下操作：

比例、旋转和平移变量是建筑物的变换信息。这对所有子对象都有效。pos 变量表示子对象相对于建筑物中心的位置。

```
foreach (GeometricObject geoObject in mesh.GeoObjects)
{
  Vector3 pos = geoObject.AnimationData.PositionTrack[(int)m_keyFrameTime];
  Vector3 translatedPos = new Vector3(translation.X + pos.X, 
                                      translation.Y + pos.Y, 
                                      translation.Z + pos.Z)
  _eRenderer.ActiveCamera.World = Matrix.CreateScale(scale) *
                    Matrix.CreateFromQuaternion(rotation) *
                    Matrix.CreateTranslation(translatedPos);
} 
```

这完美地显示了动画建筑（从地面升起），并且所有子对象都处于正确的位置。

现在，当我尝试旋转子对象时，问题就出现了。我尝试了很多不同的方法，但是在我旋转子对象后，子对象的翻译似乎总是一团糟。这是我目前拥有的，但它仍然一团糟：

```
foreach (GeometricObject geoObject in mesh.GeoObjects)
{
  Vector3 pos = geoObject.AnimationData.PositionTrack[(int)m_keyFrameTime];
  Vector3 translatedPos = new Vector3(translation.X, translation.Y, translation.Z)

  Matrix rotateSubObjects; 
  rotateSubObjects = Matrix.CreateTranslation(new Vector3(pos.X, pos.Y, pos.Z));
  rotateSubObjects *= Matrix.CreateFromQuaternion(geoObject.AnimationData.RotationTrack[(int)m_keyFrameTime]);

  _eRenderer.ActiveCamera.World = Matrix.CreateScale(scale) *
                    Matrix.CreateFromQuaternion(rotation) *
                    Matrix.CreateTranslation(translatedPos) *
                                  rotateSubObjects;
} 
```

我已经读过我可能需要将子对象转换回其原点以使其围绕其原点旋转，然后将其转换回其世界位置，但我不确定在这种情况下如何执行此操作。

我没有想法，任何帮助将不胜感激！问候，瑞安。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T16:12:28.080

您正在寻找的转换是这样的：

```
Matrix positionRotationMatrix = Matrix.CreateTranslation(-parentPosition) 
                               * Matrix.CreateFromQuaternion(parentRotation) 
                               * Matrix.CreateTranslation(parentPosition);
Vector3 translation = Vector3.Transform(parentPosition + relativePosition,
                               positionRotationMatrix); 
```

您使用新的子对象位置（`translation`变量）定义您的世界矩阵：

```
Matrix worldMatrix = Matrix.CreateScale(scale)
                * Matrix.CreateFromQuaternion(rotation)
                * Matrix.CreateFromQuaternion(parentRotation)
                * Matrix.CreateTranslation(translation); 
```

* * *

为了演示，这是一个正围绕其位置旋转的立方体（父级），带有一个箭头，其位置和旋转是**相对于其父级**位置和旋转定义的。箭头跟随立方体旋转，并独立地围绕它的 Z 轴旋转。

![在此处输入图像描述](../Images/8270bf15a8c7a174cbf39bc086524a9f.png)

用于演示的值：

```
parentPosition = Vector3(-1.1f, 0f, -2); //cube
relativePosition = Vector3(0, 0, -3); //arrow
parentRotation = Quaternion.CreateFromRotationMatrix(
                       Matrix.CreateRotationZ(angle) 
                     * Matrix.CreateRotationY(angle) 
                     * Matrix.CreateRotationX(0.5f));
rotation = Quaternion.CreateFromYawPitchRoll(0f, 0f, angle);
angle += 0.05f; 
```

# javascript - 如何提高 kendotreeviewchekbox 单击事件的选中/未选中？

> ID：13890826
> 
> 赞同：2
> 
> 时间：2012-12-15T09:01:09.410
> 
> 标签：javascript, html, kendo-ui

在我的项目中，我有两个 kendogrids 和一个 kendochart，一个 kendotreeview。在基于选定复选框图形和网格值的选中树视图复选框时，必须更改。如何为此编写代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-27T13:55:02.590

如果我理解正确，你想听树视图[检查](http://docs.telerik.com/kendo-ui/api/javascript/ui/treeview#events-check)事件吗？Kendo UI Treeview 检查事件在用户选中或取消选中复选框后触发。

# android - 在 EditText 上打字时出现平板电脑键盘问题

> ID：13890827
> 
> 赞同：1
> 
> 时间：2012-12-15T09:01:11.050
> 
> 标签：android, keyboard

目前我开始使用**平板电脑**，在这里我面临着我不知道的问题。

在这里，当我单击**EditText**时，它被聚焦，我可以看到哪个 EditText 被聚焦在这里。像这样。 ![图像](../Images/974b68cfd379a38cdca7677aa7db32c0.png)

参见上面的 Qty 列编辑文本被聚焦。这工作得很好。

**这是问题**

```
 When I am trying to write any digit on the keyboard then the selected 
EditText gets hidden by the keyboard. I can still type in the EditText. 
```

**请确定。**

```
I can still type in the EditText. 
But can't see while typing. This is the issue i am facing. 
```

这是我在edittext上写任何东西时的另一个屏幕截图。

![img2](../Images/2c1a461298646911ea515bc4aece03cb.png)

我想在输入时查看编辑文本。

请帮我解决这个问题。

提前致谢..

# api - 使用 Asp.Net、RavenDB 和 OAuth 支持进行身份验证

> ID：13890829
> 
> 赞同：9
> 
> 时间：2012-12-15T09:01:25.240
> 
> 标签：api, asp.net-mvc-4, oauth-2.0, ravendb, membership-provider

构建一个也需要 API 的网站，因此（可能）OAuth 支持登录我怀疑如何处理他的用户和身份验证部分。

所以我有一个带有 RavenDB 的 ASP.NET MC4 应用程序。

最好的方法是什么？

*   要使用 RavenDB 的成员资格提供程序之一并在 API 部分中单独处理 Oauth？前任。格里芬的解决方案[在这里](https://github.com/jgauffin/griffin.mvccontrib/wiki/Membershipprovider)。

*   或者制作一个自定义解决方案，重新实现会员废话并支持 OAuth。

我真的不知道从哪里开始，任何关于如何做到这一点的建议表示赞赏。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-21T05:38:54.980

![在此处输入图像描述](../Images/8a080391a37981028bd9b66bb4309085.png)

** [Clicky-click 获取 GitHub 项目](https://github.com/PureKrome/WorldDomination.Web.Authentication)**

IMO，忘记存储用户名和密码。那是疯话！让人们使用他们的 Facebook、Google 或 Twitter 凭据登录。这是普通网站的 80%。

身份验证和存储凭据是 IMO 的两个不同任务。例如，我不在乎您在哪里进行身份验证..一旦您这样做了..我不在乎您如何存储该数据:)

就个人而言，我会将其存储在 RavenDb 中……但这是我个人的选择。

因此-> 将这两个任务分开是（IMO）至关重要的。

![在此处输入图像描述](../Images/3cb138d82a433c20e5013de798a971b4.png)

所以[让我们看一些codez](https://github.com/PureKrome/WorldDomination.Web.Authentication/blob/master/Samples/WorldDomination.Web.Authentication.Test.Mvc.Advanced/Controllers/HomeController.cs#L59) ....

```
public ActionResult AuthenticateCallback(string providerKey)
{
    // SNIP SNIP SNIP SNIP

    var model = new AuthenticateCallbackViewModel();
    try
    {
        // SNIP SNIP SNIP SNIP

        // Complete the authentication process by retrieving the UserInformation from the provider.
        model.AuthenticatedClient = _authenticationService.CheckCallback(providerKey, Request.Params, state.ToString());

        // Create a new user account or update an existing account.
        // Whatever you end up doing, this is the part u want to
        // pass this data to your repository (eg. RavenDb, Sql Server, etc)
        // I'll use RavenDb in this example...
        // And yes .. this is a contrite example. U might want to check for
        // existing email or id or whatever u need to do, etc.
        var myUser = Mapper.Map(model.AuthenticatedClient);
        session.Store(myUser);
        session.SaveChanges();

        // SNIP SNIP SNIP SNIP
    }
    catch (Exception exception)
    {
        model.Exception = exception;
    }

    return View(model);
} 
```

所以让我们看看我做了什么。我已经剪掉了任何冗长的东西（值检查等），这只是这个 SO 答案中的噪音。

首先，我处理 Authenticate 回调。例如。我刚刚去了 Facebook，它说'是的！你是你' .. 它又回到了我的网站，我要求它给我一些数据。

接下来......我们从 Facebook 获得了一些数据......但这可能不是我们想要在 RavenDb 中放入的格式。因此，我将其从旧格式转换为新的 Shiney`User`类，这就是您将保留在 Db 中的内容。

第三 - 我将它存储在数据库中。 **这是您可以执行任何自定义数据库逻辑的地方**

而已。

> > 模块化的东西

结束。

现在对不起..距离《天启》还有几个小时。我必须做好自己的准备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T16:29:18.990

出色地。会员提供商很臃肿。如果您不打算使用其中的功能而只使用 OAuth，我不会使用它们。不幸的是，MVC4 中提供的 SimpleMembership 和 oath 提供程序更加混乱。

所以你的选择是：

1.  使用 SimpleMembership
2.  内置的 OAuth 支持
3.  使用自定义成员资格提供程序
4.  使用自定义 oauth 提供程序

如果您打算坚持 #3，我建议您使用我的（在 Griffin.MvcContrib 中）。建立会员服务提供商并非易事。

至于 oauth，您有一个解决方案，例如：[https ://github.com/rafek/SimpleSocialAuth](https://github.com/rafek/SimpleSocialAuth)

# ruby-on-rails - emacs -rails-reloaded 不起作用

> ID：13890831
> 
> 赞同：0
> 
> 时间：2012-12-15T09:01:33.263
> 
> 标签：ruby-on-rails, emacs

我想使用 emacs-rails-reloaded。所以，我从[github](https://github.com/dima-exe/emacs-rails-reloaded)安装了它。但是，当我执行 bytecompile 步骤时，我会收到关于运行时需要 cl 包的警告。因此，我将以下内容添加到我的 .emacs 文件中。

```
(require 'cl) 
```

但是，警告仍然存在。我完整的 .emacs 文件如下：

```
(add-to-list 'load-path "~/.emacs.d/plugins")
(setq load-path (cons (expand-file-name "~/.emacs.d/emacs-rails-reloaded") load-path))
(require 'snippet)
(require 'find-recursive)
(require 'cl)
(require 'inf-ruby)
(autoload 'inf-ruby "inf-ruby" "Run an inferior Ruby process" t)
(autoload 'inf-ruby-setup-keybindings "inf-ruby" "" t)
(eval-after-load 'ruby-mode
  '(add-hook 'ruby-mode-hook 'inf-ruby-setup-keybindings))
(require 'rails-autoload)
(require 'color-theme)
(setq visible-bell t) 
```

当我运行 Mx rails/console 时，我收到一条消息说“符号的函数定义无效：劣质红宝石模式”。[我已经从github](https://github.com/nonsequitur/inf-ruby/blob/master/inf-ruby.el)安装了 inf-ruby来解决这个问题，但它似乎不起作用。请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T13:37:16.777

你使用的是什么版本的 Emacs？如果是 24，你可以从橘子酱中获得 inf-ruby - [http://marmalade-repo.org/packages/inf-ruby](http://marmalade-repo.org/packages/inf-ruby)

您需要将 marmalade 安装为软件包存储库，此处提供了详细帮助：http: [//emacswiki.org/emacs/ELPA#toc2](http://emacswiki.org/emacs/ELPA#toc2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T04:05:27.453

> 最新提交 0b95b63805 dima-exe 于**4 年前创作**

这可能是你的暗示。是的，它已过时且不受支持。

`emacs-rails`我所知道的唯一稍微更新的版本是[remvee 对原始模式的分叉](https://github.com/remvee/emacs-rails)。

# c# - 如何在 Windows 8 样式应用程序中将对象从框架传递到另一个框架

> ID：13890836
> 
> 赞同：2
> 
> 时间：2012-12-15T09:02:23.553
> 
> 标签：c#, windows-8, windows-store-apps

我有问题，我现在无法弄清楚。我正在尝试开发一个 Windows-8 风格的应用程序并且我坚持实现这个功能。

我有一个**MainWindow**，其中包含一个 ListBox 和一个 Button （可以说**addButton**）。

当我单击按钮时，我导航到一个新页面，让我们说**AddCustomerPage** with this.Frame.Navigate(typeof (AddCustomerPage));

**AddCustomerPage**有 1 个 textBox 和 1 个按钮（可以说**doneButton**。当我单击按钮时，我希望将 textBox 中的字符串添加到上一页的 ListBox 中。

这是我当前的功能： 1\. 创建 MainWindow。

1.  点击添加按钮

2.  AddCustomer 页面已创建。MainWindow 被破坏（问题）。

3.  点击完成按钮

4.  使用具有 1 个项目的 ListBox 创建 MainWindow 对象。

5.  重复添加过程，我总是得到一个带有 1 个项目的 ListBox 的 MainWindow。

谢谢您的帮助。这是代码：

```
public sealed partial class MainPage : Page
{
    public MainPage()
    {
        this.InitializeComponent();

        this.brainPageController = new PageController();

        // add items from the List<String> to the listBox
        listGoals.ItemsSource = brainPageController.GetListGoals();
    }

    protected override void OnNavigatedTo(NavigationEventArgs e)
    {
        var parameter = e.Parameter as String;
        // a simple controller that adds a string to a List<string>
        brainPageController.AddGoal(parameter);
    }

    private void addButton_Click(object sender, RoutedEventArgs e)
    {
        this.Frame.Navigate(typeof (GoalsInfo));
    }

    // VARIABLES DECLARATION
    private PageController brainPageController;
}

public sealed partial class GoalsInfo : WinGoalsWIP.Common.LayoutAwarePage
{
    public GoalsInfo()
    {
        this.InitializeComponent();
        this.brainPageController = new PageController();
    }

    protected override void LoadState(Object navigationParameter, Dictionary<String, Object> pageState)
    {
    }
    protected override void SaveState(Dictionary<String, Object> pageState)
    {
    }

    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        brainPageController.AddGoal(nameTextBox.Text);

        this.Frame.Navigate(typeof(MainPage), nameTextBox.Text);
    }
    // VARIABLES DECLARATION
    PageController brainPageController;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-15T12:26:44.610

```
Frame.Navigate(typeof(MainPage), nameTextBox.Text); 
```

然后在 OnNavigatedTo 的`MainPage`

```
protected override void OnNavigatedTo(NavigationEventArgs e)
{
    string text = e.Parameter as string;
    if (text != null) {
        //Do your stuff
    }
} 
```

如果你想缓存你的 MainPage 然后这样做

```
public MainPage()
    {
        this.InitializeComponent();
        //This will cache your page and every time you navigate to this 
        //page a new page will not be created.
        this.NavigationCacheMode = Windows.UI.Xaml.Navigation.NavigationCacheMode.Enabled;

        this.brainPageController = new PageController();

        // add items from the List<String> to the listBox
        listGoals.ItemsSource = brainPageController.GetListGoals();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T10:59:47.357

试试这个我希望它有帮助

[快速入门：在页面之间导航](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh771188.aspx)

# android - 无法获取网站图标

> ID：13890839
> 
> 赞同：1
> 
> 时间：2012-12-15T09:02:48.463
> 
> 标签：android, favicon

我无法从 url 获取收藏图标。我的链接看起来像我拥有 android 权限并尝试重新启动我的模拟器。但仍然是相同的结果。网址是

```
http://www.feeds.bbci.co.uk/favicon.ico 
```

我试过这个

```
 public static Bitmap getBitmapFromURL(String src) {
        try {
            URL url = new URL(src);
            HttpURLConnection connection = (HttpURLConnection) url.openConnection();
            connection.setDoInput(true);
            connection.connect();
            InputStream input = connection.getInputStream();
            Bitmap myBitmap = BitmapFactory.decodeStream(input);
            return myBitmap;
        } catch (IOException e) {
            e.printStackTrace();
            return null;
        }
    } 
```

但错误是

```
connection.connect(); 
```

例外是

```
java.net.UnknownHostException: www.feeds.bbci.co.uk 
```

***更新********

将链接更改为

```
URL url = new URL("HTTP://bbc.co.uk/favicon.ico"); 
```

但现在得到空值

```
 Bitmap myBitmap = BitmapFactory.decodeStream(input); 
```

# java - 单击不同的按钮时，使 Canvas 对象绘制不同的形状？

> ID：13890846
> 
> 赞同：0
> 
> 时间：2012-12-15T09:03:47.170
> 
> 标签：java, awt

我通常使用 Python 编程，但几个小时前一些朋友问我是否可以帮助他们完成 Java 作业。所以我从大约几个小时前开始学习Java。

无论如何，他们需要一个程序来直观地展示空气动力学在高速行驶时如何影响某些物体。不过没有什么复杂的，可能只是一个球左右，所以一个简单的圆圈就足够了。

我刚刚掌握了 ActionListeners 之类的东西，但是当单击鼠标按钮时，如何使 Canvas 对象中显示的对象发生变化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T09:09:58.017

在画布上[添加一个 MouseListener](http://docs.oracle.com/javase/6/docs/api/java/awt/Component.html#addMouseListener%28java.awt.event.MouseListener%29)`mouseClicked()` ，在监听器的方法中，改变画布绘制的对象的状态，并调用 canvas`repaint()`方法，以便画布根据修改后的状态重新绘制自己。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T09:20:36.437

我建议扩展 a`JPanel`并使用`paintComponent()`而不是 a `Canvas`，因为这是相当过时的 AWT 东西。基本上，您需要做的是向您最终使用的`MouseListener`任何调色板（`Canvas`或）添加一个，并在侦听器的覆盖中，绘制您喜欢的东西。每次更改后也要调用（您可以创建一个计时器来定期为您执行此操作 - 请参阅[此](https://stackoverflow.com/questions/2972651/java-repaint-component-every-second)问题的第一个答案）。`JPanel``mouseClicked()``repaint()`

当涉及到画一个球时，我建议使用 Java2D API（请看`Ellipse2D`）而不是普通的`drawOval()`（起初这似乎是一种简单的方法）。这样做的原因是`Ellipse2D`允许您使用一堆非常有用的方法（`setFrame()`例如，参见 参考资料），并且是一个维护状态的“真实对象”。您可以轻松地使用组合来创建具有所需行为的形状类，将`Ellipse2D`用作形状的图形表示。`drawOval()`然而，如果不制造一碗凌乱的程序面条，使用起来要困难得多。

# sql - 如何使用sql从两个表中选择行

> ID：13890851
> 
> 赞同：2
> 
> 时间：2012-12-15T09:04:22.537
> 
> 标签：sql

我想从表 A where`UserId=1`和表 B where中选择行`UserName=xxx`。

如果 A 和 B 的行相同，我们可以使用 group。

**表 A**

```
Session    UserId
-----------------
1           1
2           2 
```

**表 B**

```
Session    Username
-------------------
1           xxx
11          xxx
12          xxx 
```

**用户表**

```
UserId    Username
------------------
1         xxx 
```

现在我想从表 a`where userid = 1`和表 b中获取行`where username = xxx`。如果来自 a 和 b 的会话相同，我们可以将其分组。

```
Session
==========
1
11
12 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T09:45:38.233

> 现在我想从用户 ID = 1 的表 a 和用户名 = xxx 的表 b 中获取行。如果来自 a 和 b 的会话相同，我们可以将其分组。

在我看来，您正在要求从两个表`union`中筛选`session`出的值，并且当您想要不同的集合时，您确实想要`union`而不是`union all`（`union all`实际上是比 更常见的要求`union`）：

```
select session from table_a where userid = 1
union
select session from table_b where username = xxx 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T09:18:45.557

试试这个，如果有任何语法错误，对不起。

```
SELECT A.UserId, B.Username FROM A LEFT JOIN B ON A.Session= B.Session GROUP BY A.Session; 
```

它将从表 A 和 B 中检索与会话匹配的所有记录。

现在，将您的附加条件包含到现有查询中。像这样的东西......

```
SELECT A.UserId, B.Username FROM A LEFT JOIN B ON A.Session= B.Session 
WHERE A.UserId = 1 AND B.Username = 'xxx' GROUP BY A.Session; 
```

希望它会帮助你。谢谢。！！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T09:16:52.417

以下是`TSql`针对 SQL Server 的。也试着了解一下`table JOIN`。这里有[一些很好的例子](http://blog.sqlauthority.com/2009/04/13/sql-server-introduction-to-joins-basic-of-joins/)

```
SELECT A.Session, A.UserId
FROM A JOIN B ON A.Session = B.Session --Joining A and B using Session here
WHERE A.UserId = 1 AND B.Username = 'xxx' 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-15T09:06:46.693

Mysql 有办法做到这一点。[看看这个](http://dev.mysql.com/doc/refman/5.0/en/join.html)

* * *

我会做的最好的：

```
SELECT `table1`.`column`, `table2`.`column` FROM `table1`, `table2` WHERE conditon 
```

# ajax - 为什么谷歌搜索 api 结果计数如此可怕地错误？

> ID：13890853
> 
> 赞同：0
> 
> 时间：2012-12-15T09:05:12.207
> 
> 标签：ajax, search, google-api

我想不通这个。看看这个： [https](https://ajax.googleapis.com/ajax/services/search/web?v=1.0&q=%22making%20music%20online%22) ://ajax.googleapis.com/ajax/services/search/web?v=1.0&q= %22making%20music%20online%22 运行 json 代码，你会看到估计结果计数和结果计数为 852。

现在看看这个： [https ://www.google.com/search?q=making%20music%20online#hl=en&safe=active&tbo=d&sclient=psy-ab&q=%22making+music+online%22&oq=% 22制作+音乐+在线%22&gs_l=serp.3..0j0i7j0l2.3685.5917.0.6135.2.2.0.0.0.147.285.0j2.2.0.les%3B..0.0...1c.1.dw7rngOgsj8&pbx=1&bav=on. 2,or.r_gc.r_pw.r_cp.r_qf.&bvm=bv.1355325884,d.Yms&fp=9f4c4ebd74ec7e5&bpcl=39967673&biw=1366&bih=653](https://www.google.com/search?q=making%20music%20online#hl=en&safe=active&tbo=d&sclient=psy-ab&q=%22making+music+online%22&oq=%22making+music+online%22&gs_l=serp.3..0j0i7j0l2.3685.5917.0.6135.2.2.0.0.0.0.147.285.0j2.2.0.les%3B..0.0...1c.1.dw7rngOgsj8&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&bvm=bv.1355325884,d.Yms&fp=9f4c4ebd74ec7e5&bpcl=39967673&biw=1366&bih=653)

我们得到 1,890,000。这不是一个小故障。这是一个非常大的区别。为什么？我错过了什么吗？

感谢您的帮助

# wordpress - 将子目录重定向到根域

> ID：13890856
> 
> 赞同：0
> 
> 时间：2012-12-15T09:05:34.407
> 
> 标签：wordpress, .htaccess, redirect, subdirectory

我想将我网站上的整个子目录，即[http://www.mydomain.com/subdirectory](http://www.mydomain.com/subdirectory)重定向到我网站的根域[http://www.mydomain.com](http://www.mydomain.com)有人可以告诉我如何通过 .htaccess 进行操作?

我曾尝试使用 Cpanel 并启用通配符重定向，但遗憾的是它不起作用！

该子目录实际上是一个单独的 WordPress 安装。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T09:09:21.830

看看这个：[301重定向](http://www.webweaver.nu/html-tips/web-redirection.shtml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-15T13:07:32.140

将以下 .htaccess 文件放入根目录：

```
Redirect /subdirectory http://www.example.com 
```

（需要`mod_alias`加载）或使用`mod_redirect`.htaccess 文件并将其放入子目录：

```
RewriteEngine On
RewriteRule (.*) http://www.example.com/$1 
```

有关mod_rewrite 文档，请参阅：[http ://httpd.apache.org/docs/current/rewrite/。](http://httpd.apache.org/docs/current/rewrite/)

# python - Python：将金额分成数千和十万

> ID：13890857
> 
> 赞同：-1
> 
> 时间：2012-12-15T09:05:42.167
> 
> 标签：python, split, integer

我有一个金额对象，我想将它分成十万和千。因此，例如说`amount = 2,50,000`我想将其拆分为`lakhs = 2,00,000`and `thousands = 50,000`。

目前我正在使用以下方法。

```
def split_amount(value):
    """ A custom method to Split amount into Lakhs and Thousands """
    tho, lak = 0, 0
    digits = list(str(value))

    if len(digits) < 4:
        print 'Error :  Amount to small to split'
    elif len(digits) == 4:
        tho = ('').join(digits[-4:])
    elif len(digits) == 5:
        tho = ('').join(digits[-5:])
    elif len(digits) == 6:
        tho = ('').join(digits[-5:])
        lak = ('').join(digits[-6:])
    elif len(digits) >= 7:
        tho = ('').join(digits[-5:])
        lak = ('').join(digits[-7:])
    else:
        print "Error : Unknown Error"

    if int(tho) <= 0:
        thousands = 0 
    else:
        thousands = int(tho)

    if (int(lak) - int(tho) <= 0): 
        lakhs = 0 
    else:
        lakhs = int(lak) - int(tho)

    return (lakhs, thousands) 
```

这段代码看起来很难看，我相信有更好更短的方法。你能帮助我以更好的方式实现我想要的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T09:10:26.523

如果我正确阅读了您的问题，您为什么不使用模数运算符？

```
amount = 250000

thousands = amount % 100000
lakhs = amount - thousands 
```

# objective-c - 调用 NSDictionary 值作为方法

> ID：13890858
> 
> 赞同：2
> 
> 时间：2012-12-15T09:05:46.343
> 
> 标签：objective-c

我怎样才能调用一个函数，该函数的名称存储为一个 NSDictionary 的值？基本上我需要将字符串类型转换为方法名称/调用。这可能吗？

```
[thisCellContent objectForKey:@"callFunction"] //the object contains the function name to be called

//call this value as function, something similar to this ..
[self [thisCellContent objectForKey:@"callFunction"]] 
```

这样的事情可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T09:08:36.543

不像这样，但您可以使用运行时/反射：

```
NSString *s = [thisCellContent objectForKey:@"callFunction"];
SEL sel = NSSelectorFromString(s);
[self performSelector:sel withObject:nil]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-15T09:11:11.467

我建议将 Objective-C 块放入字典中。然后您可以调用该块（如果您愿意，它可以调用其他东西）。像这样的东西：

```
//In code that sets up the dictionary
void (^thingToCall)() = [^{ /* any code you want to run here */ } copy];
[dictionary setObject:thingToCall forKey:@"callFunction"];

//In code that uses the dictionary
void (^thingToCall)() = [dictionary objectForKey:@"callFunction"]; 
thingToCall(); //call the block 
```

# c++ - 循环跳过每隔一行？

> ID：13890859
> 
> 赞同：-1
> 
> 时间：2012-12-15T09:06:02.207
> 
> 标签：c++, loops, line, skip

嗯，我的循环跳过了每隔一行，我将这个 5 15 16 17... 与这个 17 37 5... 进行比较，并试图找出数字何时匹配。而且我不确定它为什么会跳线。

```
for(int j=0;j<fileMaxLines;j++){

        for(int k=0;k<fileMaxLines;k++){
            //cout <<"            " <<EInfo[j].idSE <<endl;
            if(EInfo[j].idSE == ETran[k].idIV){
                temphours = ETran[k].numbOfHoursIV;

                 cout <<EInfo[j].idSE << " -->" << ETran[k].idIV;
                 cout << "right"<<endl;
                 k=fileMaxLines;
                 break;
            }
            else{
                //cout <<EInfo[j].idSE << " -->" << ETran[k].idIV << endl;
            }
            cout <<EInfo[j].idSE << " -->" << ETran[k].idIV << endl;
        }
        EInfo[j].numbOfHoursSE = temphours;
             j++;

      } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T09:07:37.473

你增加`j`了两次：

```
for(int j=0;j<fileMaxLines;j++){ // here

    for(int k=0;k<fileMaxLines;k++){
        //cout <<"            " <<EInfo[j].idSE <<endl;
        if(EInfo[j].idSE == ETran[k].idIV){
            temphours = ETran[k].numbOfHoursIV;

             cout <<EInfo[j].idSE << " -->" << ETran[k].idIV;
             cout << "right"<<endl;
             k=fileMaxLines;
             break;
        }
        else{
            //cout <<EInfo[j].idSE << " -->" << ETran[k].idIV << endl;
        }
        cout <<EInfo[j].idSE << " -->" << ETran[k].idIV << endl;
    }
    EInfo[j].numbOfHoursSE = temphours;
         j++; // and here

  } 
```

# c# - Xamarin.Mac 和 Mono:OSX 的区别在哪里

> ID：13890861
> 
> 赞同：11
> 
> 时间：2012-12-15T09:06:21.667
> 
> 标签：c#, macos, mono, monomac, xamarin.mac

Xamarin.Mac 和 Mono:OSX 之间的区别在哪里。我知道 Xamarin 买了 Mono，所以我认为它应该是一样的。但是 Mono:OSX 似乎是免费的，而 Xamarin.Mac 至少要 399 美元。那么两者的区别在哪里呢？

*   Xamarin.Mac -> [http://xamarin.com/mac](http://xamarin.com/mac)
*   单声道：OSX -> [http://www.mono-project.com/Mono:OSX](http://www.mono-project.com/Mono:OSX)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-01T10:48:44.737

[以下是 xamarin.com（ http://docs.xamarin.com/mac/guides](http://docs.xamarin.com/mac/guides) 2013 年 1 月 1 日）上一篇文章的摘录，该文章回答了您的问题。

**MonoMac 和 Xamarin.Mac 有什么区别？**

Xamarin.Mac 基于开源 MonoMac 项目构建。Xamarin.Mac 由 MonoMac 的维护者开发，尽管贡献也继续流向 MonoMac。

Xamarin.Mac 具有以下附加功能：

*   Mono Runtime 的商业许可证
*   绑定到新框架
*   创建独立的应用程序包，而不依赖于 Mono。

这些将在以下部分中详细描述。

**绑定到新框架**

以下是 Xamarin.Mac 中包含的新框架和 API：

*   核心蓝牙
*   游戏套件
*   新的 MountainLion AppKit API
*   场景套件
*   StoreKit
*   Mono 运行时的商业许可

Xamarin.Mac 还附带来自 Xamarin 团队的商业支持，并且 Xamarin.Mac 产品具有即将推出的功能的已发布路线图。

Mono 运行时许可证是一种商业许可证，允许开发人员重新分发其基于 Mono 的应用程序，而不受 GNU LGPL v2 条款的约束。这允许您发布到 Apple App Store 以及分发嵌入 Mono 运行时的应用程序，而无需为最终用户重新链接提供源代码或目标文件。

**创建独立的应用程序包**

Xamarin.Mac 通过允许开发人员发布一个应用程序包来扩展 MonoMac，其中包括他们的软件以及 Mono 运行时所需的部分，而无需您的用户自己获取 Mono 运行时并将其单独安装在他们的系统上。

此功能也用于 AppStore 部署。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-15T09:38:19.643

我不是来自 Xamarin，所以下面只是我自己的理解，

1.  Xamarin.Mac 基于 Mono:OSX。它不是来自不知名的地方。
2.  Xamarin.Mac 通过集成 MonoDevelop、Mono 核心运行时、MonoMac 以及可能的一些非开源插件/实用程序，提供了开发 Mac 应用程序的简化体验。使用 Xamarin.Mac 比自行组装整个工具链更容易。
3.  Xamarin.Mac 附带支持合同。这可以吸引专业的 Mac 开发人员和企业，因为他们需要支持合同来确保自己产品的可支持性。

无论如何，我们可以报名参加研讨会并了解它是什么，

[http://resources.xamarin.com/intro-to-xamarin.mac.html](http://resources.xamarin.com/intro-to-xamarin.mac.html)

顺便说一句，“Xamarin 购买了 Mono”的说法并不准确。可以在 Miguel de Icaza 的这篇博文中找到正确的术语，

[http://tirania.org/blog/archive/2011/Jul-18.html](http://tirania.org/blog/archive/2011/Jul-18.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T10:13:46.040

Xam.Mac 填补了 OSX 上 Mono 的许多空白。

例如，有与通知的本机 OSX API 的绑定。

对我们来说最大的胜利是使用 OSX FSEvents 的 FileSysteWatcher。这很棒。它还具有 OSX 兼容版本的 NetworkAvailability。Mono 仅支持 Linux/Windows

# java - 如何在eclipse或jar-file-explorer中查看jar文件的内容

> ID：13890867
> 
> 赞同：10
> 
> 时间：2012-12-15T09:07:02.950
> 
> 标签：java, eclipse, jar, eclipse-plugin

我正在做一个项目，我需要知道我的 web 项目中包含的 jar 文件的内容。我正在使用 Eclipse 朱诺。但是 Netbeans 提供了这些功能来查看 jar 文件的内容。请建议我如何在 Eclipse 中实现这一点。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-15T09:19:19.353

在项目资源管理器中，您应该有一个图标，看起来像一堆书，如下所示：

![类路径容器](../Images/4755209b051e3acef42f8d79f3dabb85.png)

只需展开包含您的依赖项的那个（可能标记为“引用的库”），您就可以像往常一样浏览。

注意：您可能需要指定每个 jar 的源位置（右键单击 jar > Properties > Java source attachment）

[图片由 JBoss 社区提供]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-31T16:34:54.847

将`jar`需要添加到库选项卡中的构建路径（如果尚未添加），以便在引用的库下查看

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-06T09:09:43.733

请使用 Eclipse 插件**zipeditor**来查看 jars、zips 或 wars 的内容： 进入更新站点：http: [//zipeditor.sourceforge.org/update](http://zipeditor.sourceforge.org/update)并享受。这是迄今为止在 Eclipse 中处理档案的最佳选择。

# java - GORM中如何在GRAILS的class列和hibernate的DTYPE列之间进行转换

> ID：13890868
> 
> 赞同：1
> 
> 时间：2012-12-15T09:07:13.813
> 
> 标签：java, hibernate, grails, mapping, grails-orm

我有以下问题。我得到了一个由 Java 中的 JPA/Hibernate 生成的数据库模式。我有一个用于继承层次结构的表。为此，Hibernate 使用 DTYPE 列来区分层次结构中类的具体实现。

我现在需要将相同的层次结构加载到 GRAILS 域对象。但是 GRAILS 使用名为“类”的列来保存具体实现的名称，我无法找到任何方法来更改此映射。所以我的问题是：有没有办法将 GRAILS 的“类”列映射到 Hibernate 的 DTYPE 列？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T15:01:37.153

您可以自定义用于[基类`mapping`闭包](http://grails.org/doc/latest/ref/Database%20Mapping/discriminator.html)中的鉴别器列的名称。

```
class TopOfTheHierarchy {
  …
  static mapping = {
    discriminator column: "DTYPE"
  }
} 
```

要使用类名以外的其他内容作为鉴别器*值*，您可以为每个子类使用类似的映射条目

```
class ChildClass {
  …
  static mapping = {
    discriminator "child"
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T14:36:18.607

如果你已经有一个数据库模式，你可以尝试使用[Grails 数据库逆向工程插件](http://www.grails.org/plugin/db-reverse-engineer)从你的模式生成你的 Grails 域类。

# javascript - 带有“主题”的 JavaScript 关联数组

> ID：13890872
> 
> 赞同：1
> 
> 时间：2012-12-15T09:07:42.143
> 
> 标签：javascript, multidimensional-array

首先，对不起我的英语，希望我能很好地向你解释我的问题。

我想创建一个基于主题的测验，我需要帮助构建包含主题、问题和答案的数组。到目前为止，我得到了这个：

```
var aarhus={
       question: 'Is this a aarhus question?',
       answer1:'yes',
       answer2:'no',
       answer3:'I dunno',
       answer4:'stfu',
       correctAnswer:'stfu'
       };

var multimedia={
       question: 'Is this a multimedia question?',
       answer1:'yes',
       answer2:'no',
       answer3:'I dunno',
       answer4:'stfu',
       correctAnswer:'stfu'
       };

var general={
       question: 'Is this a general question?',
       answer1:'yes',
       answer2:'no',
       answer3:'I dunno',
       answer4:'stfu',
       correctAnswer:'stfu'
       }; 
```

我有 3 个代表主题的数组。它们存储问题、4 个可能的答案和正确答案。问题是我在每个主题中只有一个问题。所以我的问题是——如何向主题添加更多问题？我需要能够通过主题内的答案访问任何问题（假设每个主题有 2 个问题，每个问题都有自己的答案）。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T09:12:18.760

只是为了挑剔，那些是“普通”对象而不是数组。不过，您可以使用嵌套对象和数组对问题进行分组：

```
var questions =
{
    theme1:
    [
        {
            question: "this is question 1",
            answers: ["one", "two", "three"],
            correct: "two"
        },
        {
            question: "this is question 2",
            answers: ["one", "two", "three"],
            correct: "three"
        }
    ],
    theme2:
    [
        {
            question: "this is question 1",
            answers: ["one", "two", "three"],
            correct: "two"
        },
        {
            question: "this is question 2",
            answers: ["one", "two", "three"],
            correct: "three"
        }
    ]
}

//To access the second question of theme 2
questions.theme2[1].question 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T09:10:30.570

只需将主题设为数组即可：

```
var general=[{
   question: 'Is this a general question?',
   answer1:'yes',
   answer2:'no',
   answer3:'I dunno',
   answer4:'stfu',
   correctAnswer:'stfu'
   }]; 
```

然后，您可以使用以下方法向主题添加新问题`array.push`：

```
general.push({
   question: 'Is this a second general question?',
   answer1:'yes',
   answer2:'no',
   answer3:'I dunno',
   answer4:'stfu',
   correctAnswer:'stfu'
}); 
```

像访问任何数组一样访问它们：

```
var questionIndex = 1; // question #2 in the theme
console.log(general[questionIndex].question); // "Is this a second general question?" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T09:28:34.813

也许这个解决方案会有所帮助：

```
<html><head><title>Test</title></head>
<script>
var MULTIMEDIA = 'Multimedia';

var question1 = {
   question: 'Is this a multimedia question1?',
   answer1:'yes',
   answer2:'no',
   answer3:'I dunno',
   answer4:'stfu',
   correctAnswer:'stfu'
   };
var question2 = {
   question: 'Is this a multimedia question2?',
   answer1:'yes',
   answer2:'no',
   answer3:'I dunno',
   answer4:'stfu',
   correctAnswer:'stfu'
   };
var question3 = {
   question: 'Is this a multimedia question3?',
   answer1:'yes',
   answer2:'no',
   answer3:'I dunno',
   answer4:'stfu',
   correctAnswer:'stfu'
   };

var questions = [];    
questions[0] = question1;
questions[1] = question2;
questions[2] = question3;

var theme = {
questions : questions
}
var themes = [];
themes[MULTIMEDIA] = theme;
</script>
<body>
<label>

<script>
var questionNo = 0;
document.write(themes[MULTIMEDIA].questions[questionNo].question + '<br>');
document.write('<ul>');
document.write('<li>' + themes[MULTIMEDIA].questions[questionNo].answer1 + '</li>');
document.write('<li>' + themes[MULTIMEDIA].questions[questionNo].answer2 + '</li>');
document.write('<li>' + themes[MULTIMEDIA].questions[questionNo].answer3 + '</li>');
document.write('</ul>');

</script>

</label>
</body>
</html> 
```

# hadoop - mrjob 文档中的“MRJOB_CONF 指定的位置”

> ID：13890873
> 
> 赞同：0
> 
> 时间：2012-12-15T09:07:44.930
> 
> 标签：hadoop, mapreduce, hadoop-streaming, elastic-map-reduce, mrjob

mrjob 文档中的“MRJOB_CONF 指定的位置”是哪个路径？链接到 mrjob 文档：[http ://mrjob.readthedocs.org/en/latest/guides/configs-basics.html](http://mrjob.readthedocs.org/en/latest/guides/configs-basics.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T13:29:47.393

这基本上意味着每当在机器中设置 MRJOB 时，它都需要将自身初始化（例如设置 hadoop 配置）到一组值。这些实际上是人们将要设置的配置，并且会列在一个名为`mrjob.conf`. 现在，MRJOB 将在以下 2 个位置查找此文件：

*   `~/.mrjob.conf` （这实际上是在用户的主文件夹下创建的隐藏文件）
*   `/etc/mrjob.conf`

# javascript - 在跨子域服务器端和 JavaScript 上设置/删除 Cookie

> ID：13890876
> 
> 赞同：1
> 
> 时间：2012-12-15T09:08:01.903
> 
> 标签：javascript, asp.net, session, cookies, citrix

我有**domain.com**、**sub1.domain.com**和**sub2.domain.com**。从**sub1.domain.com**的站点，我调用脚本在**domain.com**上设置 cookie，如下所示

```
document.cookie = "KEY=Value; domain=.domain.com; path=/; expires=Thu, 01 Jan 2013 00:00:01 GMT"; 
```

我检查浏览器并查看该 cookie。看起来不错。之后我去**sub2.domain.com**修改或删除我创建的 cookie。

```
document.cookie = "KEY=Deleted; domain=.domain.com; path=/; expires=Thu, 01 Jan 1990 00:00:01 GMT"; 
```

但是没有运气，Cookie 仍然存在，价值仍然存在。我应该怎么做才能从子域中删除根 cookie？

编辑：

为了清楚起见：我使用 citrix 单点登录在两个域上进行身份验证。我们只需要登录到 .domain.com 和 citric 将验证其余部分。但问题是它没有退出机制，所以我决定清除 cookie。当我使用浏览器插件清除它时它会起作用。但是当涉及到代码（javascript）时，它就行不通了。有谁知道这个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T04:45:57.540

好的，我知道问题所在！那些 cookie 是 httponly cookie，这意味着我们不能通过 javascript 访问。我必须在服务器端修改它们

```
HttpCookie expiredCookie = new HttpCookie("CookieName");
expiredCookie.Expires = DateTime.UtcNow.AddDays(-1);
expiredCookie.Path = "/";
expiredCookie.Domain = ".domain.com";
Response.Cookies.Add(expiredCookie); 
```

# ruby-on-rails - Sinatra 与 Rails 重置会话每个请求

> ID：13890877
> 
> 赞同：0
> 
> 时间：2012-12-15T09:08:02.827
> 
> 标签：ruby-on-rails, ruby, session, sinatra

我有一个 Rails Web 应用程序，我需要为移动客户端创建 API。我为此选择了一个 Sinatra Web 框架。但是我的 Sinatra 应用程序有问题，每次请求后所有数据会话都丢失了。我的 API 看起来像这样（lib/api/core.rb）：

```
module Api
  class Core < Sinatra::Base
    set :session_secret, 'secret'
    enable :sessions

    get '/foo' do
      content_type :json
      session['foo'] = 'some value'
    end

    get '/bar' do
      content_type :json
      session['foo']#everytime is nil
    end

  end
end 
```

在我的 route.rb 中，我写道：

```
constraints :subdomain => 'api' do
  mount Api::Core => '/'
end 
```

我使用 Rails 3.2.8，Sinatra 1.3.3

**我的问题是如何在请求之间存储数据（需要我进行身份验证）？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T14:00:46.113

您的 API 应该是无状态的。身份验证通常使用随每个请求一起发送的令牌来完成。有关详细信息，请参阅 RailsCast [#352 保护 API](http://railscasts.com/episodes/352-securing-an-api)。

# android - 安卓电话管理器

> ID：13890878
> 
> 赞同：1
> 
> 时间：2012-12-15T09:08:05.557
> 
> 标签：android

我总是收到这个错误：12-15 09:46:48.434: E/TelephonyManager(5127): getDefaultSim is sim1

当我打电话时：

```
TelephonyManager mTelephonyMgr = (TelephonyManager) this.getSystemService(Context.TELEPHONY_SERVICE);

if( mTelephonyMgr != null && mTelephonyMgr.getDeviceId() != null )
      deviceImei = mTelephonyMgr.getDeviceId();
if (mTelephonyMgr != null && mTelephonyMgr.getSimState() == TelephonyManager.SIM_STATE_READY)
country = mTelephonyMgr.getSimCountryIso(); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-15T09:14:49.920

有3个不同的类别...

```
1) Features supported and documented

2) Features available and un-documented

3) Features unavailable 
```

因此双 sim 卡功能可用但未记录在案，因此未得到官方支持。

话虽如此，这并不意味着它不能使用，它只是意味着 android（或就此而言 google 甚至制造商）不负责支持您的应用程序功能。

但它可能只是工作，例如。联系人是类似的东西。

然后您可能会问，如果没有记录，每个人都如何知道这些功能。嘿，android 是开源的 .. 去查看代码并自己找到它。这就是我猜多 sim 开发人员所做的。

# c# - 在 ASP.Net 中搜索筛选选定数量验证

> ID：13890879
> 
> 赞同：0
> 
> 时间：2012-12-15T09:08:20.023
> 
> 标签：c#, javascript, asp.net, .net, validation

我有一组下拉列表和 2 个文本框作为 ASP.net (C#) 数据搜索页面中的过滤器字段。我想找到一种方法来验证所选过滤器，以便用户必须提供至少 2 个搜索过滤器。这意味着用户必须选择至少 1 个下拉菜单并为一个文本框提供文本或选择 2 个下拉菜单。

实现这一目标的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T10:28:51.740

如果您使用的是 jQuery，您可以使用它来执行您所指的操作，而无需发布到服务器。

这是我模拟的一个完整的测试页面，它将检查值。只要该类中的两个或多个`select`元素具有`SearchSelect`除 then 以外的值，`null`否则`""`该函数将返回 true。如果不是，它会将未选中的框着色为红色。您还可以显示一条错误消息，让他们知道他们需要选择另一个过滤器......或在那个程度上的东西。

```
<html>
    <head>
        <title></title>
        <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.3.min.js"></script>
        <script>
            function CheckFilters() {
                var count = 0;
                $('.SearchSelect').addClass('badSelect');
                $('.SearchSelect').each(function() {
                    var sl = $(this);
                    if (sl.val() != null && sl.val() !== "") {
                        count++;
                        sl.removeClass('badSelect');
                    }
                });
                if (count >= 2) {
                    $('.SearchSelect').removeClass('badSelect');
                    return true;
                } else {
                    return false;
                }
            }
            $(document).ready(function(){
                $('#SubmitButton').click(function(e) {
                    if(!CheckFilters()) e.preventDefault();
                    else alert("Success"); // in your case this line will probably be excluded and you will probably do nothing which will allow the POST/GET request to process
                });
            });
        </script>
        <style>
            .badSelect{
                border: 1px solid red;
            }
        </style>
    </head>
    <body>
        <form>
        <select class="SearchSelect" id="One">
            <option value="">Select A Filter</option>
            <option value="hasValue">Has a Value</option>
        </select><br /> 
        <select class="SearchSelect" id="Two">
            <option value="">Select A Filter</option>
            <option value="hasValue">Has a Value</option>
        </select> <br /> 
        <select class="SearchSelect" id="Three">
            <option value="">Select A Filter</option>
            <option value="hasValue">Has a Value</option>
        </select> <br />
        <button type="button" id="SubmitButton">Submit</button></form>
    </body>
</html> 
```

# c# - 如何在 MVVM 模型中管理平铺用户控件（具有列表框绑定）？

> ID：13890880
> 
> 赞同：2
> 
> 时间：2012-12-15T09:08:24.103
> 
> 标签：c#, silverlight, windows-phone-7, xaml, windows-phone-7.1

//这是用户控制代码

```
<ListBox  Name="OvernightAverageListBox"  ItemsSource="{Binding Path=OvernightAverageCollections}" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"  >
 <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel Name="items" Background="{Binding BackColor}" Height="200" Width="200">
                <TextBlock  Height="46" HorizontalAlignment="Left" Margin="26,10,0,0" Name="currentRate" Text="{Binding  Current_rate}" VerticalAlignment="Top" FontSize="36" />
                <TextBlock Height="22" HorizontalAlignment="Left" Margin="26,20,0,0" Name="rate_difference" Text="{Binding RateChange_Value}" VerticalAlignment="Top" FontSize="20" />
                <TextBlock Height="30" HorizontalAlignment="Left" Margin="26,30,0,0" Name="productName" Text="{Binding Product_name}" VerticalAlignment="Top" FontSize="24" />
            </StackPanel>
        </DataTemplate>
    </ListBox.ItemTemplate> 
```

//这是视图上的绑定代码

```
<controls:PanoramaItem Header="Overnight Average" Tap="RateTile_Tap">
            <Grid x:Name="overnightAverage">
             <views:OvernightAverageTileControl x:Name="eventsView">       </views:OvernightAverageTileControl>
            </Grid>
        </controls:PanoramaItem>
</ListBox> 
```

现在根据我的代码，瓷砖是垂直的，这意味着每个瓷砖都排成一排。但我希望它们水平和垂直地出现意味着每行有两个瓷砖。请分享你的建议我是 xaml 设计的新手。

第一张图片显示了我得到的东西。

第二张图片是我想要的。

谢谢 ：）

![这就是它的到来。](../Images/fb2f684a335abafa43e57f63e3a6ba5a.png)

![但我想要这种](../Images/01cc36f745a83fb95336dd27c6a7256f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T12:04:26.110

您可以将 DataTemplate 中的 StackPanel 替换为[Grid](http://msdn.microsoft.com/en-us/library/system.windows.controls.grid%28v=vs.95%29.aspx)：

```
<DataTemplate>
    <Grid Name="items" Background="{Binding BackColor}" Height="200" Width="200">
        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition/>
            <RowDefinition/>
        </Grid.RowDefinitions>
        <TextBlock Grid.Column="0" Grid.Row="0" Text="{Binding Current_rate}" ... />
        <TextBlock Grid.Column="1" Grid.Row="0" Text="{Binding RateChange_Value}" ... />
        <TextBlock Grid.Column="0" Grid.Row="1" Text="{Binding Product_name}" ... />
    </Grid>
</DataTemplate> 
```

您还可以通过设置[ColumnDefinition.Width](http://msdn.microsoft.com/en-us/library/system.windows.controls.columndefinition.width%28v=vs.95%29.aspx)和[RowDefinition.Height](http://msdn.microsoft.com/en-us/library/system.windows.controls.rowdefinition.height%28v=vs.95%29.aspx)属性来指定列的绝对或相对宽度和行的高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:35:52.970

我在 2011 年 10 月的工具包中使用 WrapPanel 成功完成了它。 [http://www.windowsphonegeek.com/upload/articles/WrapPanelDemo.zip](http://www.windowsphonegeek.com/upload/articles/WrapPanelDemo.zip)

# php - 计算混合数组php中字符串的次数

> ID：13890885
> 
> 赞同：5
> 
> 时间：2012-12-15T09:09:01.517
> 
> 标签：php, recursion, multidimensional-array

我想要一种简单的方法来计算字符串“Apple”在给定中出现的次数

```
# My Array  :

$arr = array(
             1 => "Apple",
             2 => "Orange",
             3 => array(1=>"Bananna",2=>"Apple"),
             4 => "Grape",
             5 => "Apple",
             6 => array(1=>"Grape"),
             7 => "Orange");

# Want to count only "Apple"

$needle         = "Apple";

# My Function :

 function arrsearch($needle,$haystack,$return) {
    if(!is_array($haystack)) {
      return false;
    } 
    foreach($haystack as $key=>$val) {
        if(is_array($val)) {
              $return     = arrsearch($needle,$val,$return);
        }else if(strtolower($val) == strtolower($needle)) {
          $return[] = $key;
        }
    }
    return $return;
 }

 $var = arrsearch("Apple",$arr,array());
 echo " Output : ".count($var);

 # Output : 3 
```

我使用上面的函数来查找数组中字符串“Apple”的次数。给我推荐一个最好的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-15T09:17:04.773

你可以使用[`array_walk_recursive`](http://php.net/manual/en/function.array-walk-recursive.php)：

```
function search_for($arr, $term)
{
    $count = 0;

    array_walk_recursive($arr, function($item, $idx, $term) use (&$count) {
      if (false !== stripos($item, $term)) {
          ++$count;
      }
    }, $term);

    return $count;
}

search_for($arr, 'Apple'); // returns 3 
```

该表达式`function($item, $idx, $term) use (&$count) { .. }`是一个[匿名函数](http://php.net/manual/en/functions.anonymous.php)声明；它就像一个普通函数一样工作，但是你可以通过使用`use ($var)`或者`use (&$var)`如果你也需要修改它来从父作用域继承变量。更多示例可以在手册页上找到。

**更新**

对于 PHP < 5.3 的版本，您必须使用对象封装计数器：

```
class RecursiveArraySearcher
{
    private $c = 0;

    public static function find($arr, $term)
    {
        $obj = new self;

        array_walk_recursive($arr, array($obj, 'ismatch'), $term);

        return $obj->c;
    }

    public function ismatch($item, $key, $term)
    {
        if (false !== stripos($item, $term)) {
            ++$this->c;
        }
    }
}

echo RecursiveArraySearcher::find($arr, 'Apple'); // 3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T09:39:34.283

另一种解决方案是展平数组并计算值：

```
<?php

function search_for($arr, $term) {
  $flatten_array = array();
  $it = new RecursiveIteratorIterator(new RecursiveArrayIterator($arr));
  foreach($it as $v) {
    $flatten_array[] = $v;
  }

  $count_values = array_count_values($flatten_array);
  return $count_values[$term];
}

echo search_for($arr, 'Apple'); // print 3 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-15T09:55:08.693

您可以使用这样的递归函数..

```
function finditem($item,$array){
    $count = 0;
    foreach($array as $key => $value){
        if(is_array($value) == true){
            $countx = finditem($item,$value);
            $count = $count + $countx;
        }else if($value == $item)
            $count++;
    }
    return $count;
}

echo finditem("Apple",$arr); 
```

希望能帮助到你。

# android - 如何在 SqlLite 数据库中插入选定的图像？

> ID：13890886
> 
> 赞同：0
> 
> 时间：2012-12-15T09:09:04.017
> 
> 标签：android

我的代码没有在数据库中插入图像。如何在数据库中插入选定的图像，并检索它？我正在关注本教程：

> [http://vimaltuts.com/android-tutorial-for-beginners/android-sqlite-database-example](http://vimaltuts.com/android-tutorial-for-beginners/android-sqlite-database-example)

下面的代码需要哪些修改才能在数据库中插入选定的图像？

```
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Intent;
import android.database.Cursor;
import android.graphics.Bitmap;
import android.graphics.Bitmap.CompressFormat;
import android.graphics.BitmapFactory;
import android.graphics.drawable.BitmapDrawable;
import android.net.Uri;
import android.os.AsyncTask;
import android.os.Bundle;
import android.provider.MediaStore;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.Toast;

   public class AddEditCountry extends Activity {

 private long rowID; 
 private EditText nameEt;
 private EditText capEt;
 private EditText codeEt;

 private EditText Donedate;
 private EditText Notes;
 private EditText Person;
 private  ImageView imageView1;
 Bitmap yourSelectedImage;

   @Override
  public void onCreate(Bundle savedInstanceState) 
   {
      super.onCreate(savedInstanceState); 
      setContentView(R.layout.add_country);

      nameEt = (EditText) findViewById(R.id.Address);
      capEt = (EditText) findViewById(R.id.Stage);
      codeEt = (EditText) findViewById(R.id.Dueby);

      Donedate = (EditText) findViewById(R.id.Donedate);

      Notes = (EditText) findViewById(R.id.Notes);
      Person = (EditText) findViewById(R.id.Person);

      imageView1 = (ImageView) findViewById(R.id.imageView1);
      Button Browse = (Button) findViewById(R.id.Browse);

      Browse.setOnClickListener(new View.OnClickListener() 
        {
            public void onClick(View v) 
            {               
                Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
                intent.setType("image/*");
                startActivityForResult(intent, 0);
            }
        });        

      Bundle extras = getIntent().getExtras(); 

      if (extras != null)
      {
         rowID = extras.getLong("row_id");
         nameEt.setText(extras.getString("name"));  
         capEt.setText(extras.getString("cap"));  
         codeEt.setText(extras.getString("code"));  
         Donedate.setText(extras.getString("Location"));  
         Notes.setText(extras.getString("Notes")); 
         Person.setText(extras.getString("Person")); 

      }

      Button saveButton =(Button) findViewById(R.id.saveBtn);
      saveButton.setOnClickListener(new OnClickListener() {

          public void onClick(View v) 
          {
             if (nameEt.getText().length() != 0)
             {
                AsyncTask<Object, Object, Object> saveContactTask = 
                   new AsyncTask<Object, Object, Object>() 
                   {
                      @Override
                      protected Object doInBackground(Object... params) 
                      {
                         saveContact();
                         return null;
                      }

                      @Override
                      protected void onPostExecute(Object result) 
                      {
                         finish();
                      }
                   }; 

                saveContactTask.execute((Object[]) null); 
             }

             else
             {
                AlertDialog.Builder alert = new  
 AlertDialog.Builder(AddEditCountry.this);
                alert.setTitle(R.string.errorTitle); 
                alert.setMessage(R.string.errorMessage);
                alert.setPositiveButton(R.string.errorButton, null); 
                alert.show();
             }
          } 
     });
   }

   private void saveContact() 
   {

    //   ByteArrayOutputStream outStr = new ByteArrayOutputStream();
    //   yourSelectedImage.compress(CompressFormat.PNG, 100, outStr);
    //   byte[] blob = outStr.toByteArray();

      DatabaseConnector dbConnector = new DatabaseConnector(this);

      if (getIntent().getExtras() == null)
      {
          dbConnector.insertContact(nameEt.getText().toString(),
                  capEt.getText().toString(),
                  codeEt.getText().toString(),
                  Donedate.getText().toString(),
                  Notes.getText().toString(),
                  Person.getText().toString()
                  //,blob

              );
      }
      else
      {
         dbConnector.updateContact(rowID,
            nameEt.getText().toString(),
            capEt.getText().toString(), 
            codeEt.getText().toString(), 
            Donedate.getText().toString(),
         Notes.getText().toString(),
          Person.getText().toString()
          //, blob

         );
      }
   }

   @Override
   protected void onActivityResult(int requestCode, int resultCode, Intent  
   imageReturnedIntent) {
       super.onActivityResult(requestCode, resultCode, imageReturnedIntent);

       switch(requestCode) {
       case 0:
           if(resultCode == RESULT_OK){
               Uri selectedImage = imageReturnedIntent.getData();
               String[] filePathColumn = {MediaStore.Images.Media.DATA};

               Cursor cursor = getContentResolver().query(selectedImage,  
  filePathColumn, null, null, null);
               cursor.moveToFirst();

               int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
               String filePath = cursor.getString(columnIndex); // file path  
  of selected image
               cursor.close();
                       //  Convert file path into bitmap image using below  
 line.
               yourSelectedImage = BitmapFactory.decodeFile(filePath);

                       // put  bitmapimage in your imageview
               imageView1.setImageBitmap(yourSelectedImage);
           }
       }
    }

        }

       import android.content.Context;
    import android.database.Cursor;
   import android.database.SQLException;
    import android.database.sqlite.SQLiteDatabase;

  public class DatabaseConnector {

private static final String DB_NAME = "WorldCountries";
private SQLiteDatabase database;
private DatabaseOpenHelper dbOpenHelper;

public DatabaseConnector(Context context) {
    dbOpenHelper = new DatabaseOpenHelper(context, DB_NAME, null, 1);
}

   public void open() throws SQLException 
   {
      //open database in reading/writing mode
      database = dbOpenHelper.getWritableDatabase();
   } 

   public void close() 
   {
      if (database != null)
         database.close();
   }       

   public void insertContact(String name, String cap, String code, String 
      LocationEd, String Notes, String Person)
           ///,byte[] blob) 
           {
              ContentValues newCon = new ContentValues();
              newCon.put("name", name);
              newCon.put("cap", cap);
              newCon.put("code", code);

              newCon.put("Location",LocationEd);
              newCon.put("Notes",Notes);
              newCon.put("Person",Person);
          //    newCon.put("Image", blob);

              open();
              database.insert("country", null, newCon);
              close();
           }

           public void updateContact(long id, String name, String 
    cap,String code,String LocationEd, String Notes, String Person)
                   //,byte[] blob) 
           {
              ContentValues editCon = new ContentValues();
              editCon.put("name", name);
              editCon.put("cap", cap);
              editCon.put("code", code);
              editCon.put("Location", LocationEd);
              editCon.put("Notes", Notes);
              editCon.put("Person", Person);
            //  editCon.put("Image", blob);

              open();
              database.update("country", editCon, "_id=" + id, null);
              close();
           }

           public Cursor getAllContacts() 
           {
              return database.query("country", new String[] {"_id",   
    "name"}, 
                 null, null, null, null, "name");
           }

           public Cursor getOneContact(long id) 
           {
              return database.query("country", null, "_id=" + id, null,   
   null, null, null);
           }

           public void deleteContact(long id) 
           {
              open(); 
              database.delete("country", "_id=" + id, null);
              close();
           }
   }

   import android.content.Context;
   import android.database.sqlite.SQLiteDatabase;
   import android.database.sqlite.SQLiteDatabase.CursorFactory;
   import android.database.sqlite.SQLiteOpenHelper;

  public class DatabaseOpenHelper extends SQLiteOpenHelper {

public DatabaseOpenHelper(Context context, String name,
        CursorFactory factory, int version) {
    super(context, name, factory, version);
}

@Override
public void onCreate(SQLiteDatabase db) {
    String createQuery = "CREATE TABLE country (_id integer primary key    
 autoincrement,name text,cap text,code text,Location double,Notes text,Person 
  text,blob BLOB);";              
    db.execSQL(createQuery);    

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

}

   }

       import java.io.ByteArrayInputStream;

   import android.app.Activity;
  import android.app.AlertDialog;
 import android.content.DialogInterface;
 import android.content.Intent;
 import android.database.Cursor;
 import android.graphics.Bitmap;
 import android.graphics.BitmapFactory;
 import android.graphics.Canvas;
 import android.net.Uri;
 import android.os.AsyncTask;
 import android.os.Bundle;
 import android.provider.MediaStore;
 import android.view.Menu;
 import android.view.MenuInflater;
 import android.view.MenuItem;
 import android.view.View;
 import android.widget.Button;
  import android.widget.ImageView;
 import android.widget.TextView;

 public class ViewCountry extends Activity {

   private long rowID;
   private TextView nameTv;
   private TextView capTv;
   private TextView codeTv; 

   private TextView Locationlb; 
   private TextView Noteslb; 
   private TextView Personlb; 

   byte[] byteImage2 = null;

   private  ImageView imageView2;
   Bitmap yourSelectedImage;

   @Override
   public void onCreate(Bundle savedInstanceState) 
   {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.view_country);

      setUpViews();
      Bundle extras = getIntent().getExtras();
      rowID = extras.getLong(CountryList.ROW_ID); 
   }

   private void setUpViews() {
       nameTv = (TextView) findViewById(R.id.nameText);
       capTv = (TextView) findViewById(R.id.capText);
       codeTv = (TextView) findViewById(R.id.codeText);

       Locationlb = (TextView) findViewById(R.id.Location_lbl);

       Noteslb = (TextView) findViewById(R.id.Notes_lbl);
       Personlb = (TextView) findViewById(R.id.Person_lbl);

       imageView2= (ImageView) findViewById(R.id.imageView2);
          Button Browse2 = (Button) findViewById(R.id.Browse2);

          Browse2.setOnClickListener(new View.OnClickListener() 
            {
                public void onClick(View v) 
                {               
                    Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
                    intent.setType("image/*");
                    startActivityForResult(intent, 0);
                }
            });        

   }

   @Override
   protected void onResume()
   {
      super.onResume();
      new LoadContacts().execute(rowID);
   } 

   private class LoadContacts extends AsyncTask<Long, Object, Cursor> 
   {
      DatabaseConnector dbConnector = new DatabaseConnector(ViewCountry.this);

      @Override
      protected Cursor doInBackground(Long... params)
      {
         dbConnector.open();
         return dbConnector.getOneContact(params[0]);
      } 

      @Override
      protected void onPostExecute(Cursor result)
      {
         super.onPostExecute(result);

         result.moveToFirst();
         // get the column index for each data item
         int nameIndex = result.getColumnIndex("name");
         int capIndex = result.getColumnIndex("cap");
         int codeIndex = result.getColumnIndex("code");

         int LocationIndex = result.getColumnIndex("Location");
         int NotesIndex = result.getColumnIndex("Notes");
         int PersonIndex = result.getColumnIndex("Person");

   //      byte[] blob = result.getBlob("image");
   //      byte[] data = result.getBlob(result.getColumnIndex("image"));
      //   byte[] blob    result.getColumnIndex(MyBaseColumn.MyTable.ImageField));

         nameTv.setText(result.getString(nameIndex));
         capTv.setText(result.getString(capIndex));
         codeTv.setText(result.getString(codeIndex));
         Locationlb.setText(result.getString(LocationIndex));

         Noteslb.setText(result.getString(NotesIndex));
         Personlb.setText(result.getString(PersonIndex));

    //     ByteArrayInputStream input = new ByteArrayInputStream(byteImage2);

    //     Bitmap bit = BitmapFactory.decodeStream(input);
     //    imageView2.setImageBitmap(bit);
       //  imageView2.setImageURI(byteImage2);

         imageView2.setImageBitmap(yourSelectedImage);

         result.close();
         dbConnector.close();
      }
   } 

   @Override
   public boolean onCreateOptionsMenu(Menu menu) 
   {
      super.onCreateOptionsMenu(menu);
      MenuInflater inflater = getMenuInflater();
      inflater.inflate(R.menu.view_country_menu, menu);
      return true;
   }

   @Override
   public boolean onOptionsItemSelected(MenuItem item) 
   {
      switch (item.getItemId())
      {
         case R.id.editItem:
            Intent addEditContact =
               new Intent(this, AddEditCountry.class);

            addEditContact.putExtra(CountryList.ROW_ID, rowID);
            addEditContact.putExtra("name", nameTv.getText());
            addEditContact.putExtra("cap", capTv.getText());
            addEditContact.putExtra("code", codeTv.getText());

            addEditContact.putExtra("Location", Locationlb.getText());

            addEditContact.putExtra("Notes", Noteslb.getText());

            addEditContact.putExtra("Person", Personlb.getText());

        //    addEditContact.putExtra("blob", yourSelectedImage);

            startActivity(addEditContact); 
            return true;

         case R.id.deleteItem:
            deleteContact();
            return true;

         default:
            return super.onOptionsItemSelected(item);
      } 
   }

   private void deleteContact()
   {

      AlertDialog.Builder alert = new AlertDialog.Builder(ViewCountry.this);

      alert.setTitle(R.string.confirmTitle); 
      alert.setMessage(R.string.confirmMessage); 

      alert.setPositiveButton(R.string.delete_btn,
         new DialogInterface.OnClickListener()
         {
            public void onClick(DialogInterface dialog, int button)
            {
               final DatabaseConnector dbConnector = 
                  new DatabaseConnector(ViewCountry.this);

               AsyncTask<Long, Object, Object> deleteTask =
                  new AsyncTask<Long, Object, Object>()
                  {
                     @Override
                     protected Object doInBackground(Long... params)
                     {
                        dbConnector.deleteContact(params[0]); 
                        return null;
                     } 

                     @Override
                     protected void onPostExecute(Object result)
                     {
                        finish(); 
                     }
                  };

               deleteTask.execute(new Long[] { rowID });               
            }
         }
      );

      alert.setNegativeButton(R.string.cancel_btn, null).show();
   }

   protected void onActivityResult(int requestCode, int resultCode, Intent  
   imageReturnedIntent) {
       super.onActivityResult(requestCode, resultCode, imageReturnedIntent);

       switch(requestCode) {
       case 0:
           if(resultCode == RESULT_OK){
               Uri selectedImage = imageReturnedIntent.getData();
               String[] filePathColumn = {MediaStore.Images.Media.DATA};

               Cursor cursor = getContentResolver().query(selectedImage,  
  filePathColumn, null, null, null);
               cursor.moveToFirst();

               int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
               String filePath = cursor.getString(columnIndex); // file path  
   of selected image
               cursor.close();
                       //  Convert file path into bitmap image using below  
   line.
               yourSelectedImage = BitmapFactory.decodeFile(filePath);

                       // put  bitmapimage in your imageview
               imageView2.setImageBitmap(yourSelectedImage);
           }
       }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T09:44:50.077

不要将图像放入数据库。将文件保存在文件系统（SD 卡或内部存储）上，并将对它的引用放入数据库中。但是不要直接放图片。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T09:54:22.773

无需将二进制 blob 放入数据库。数据库的主要目标是被*查询*，即它组织数据以便以后快速定位。图像是一个字节序列，您将无法根据它过滤查询，因此只需将图像存储在文件系统中，并可能采用以行 ID 命名的约定。

# vb.net - Webkitdotnet 打印问题

> ID：13890897
> 
> 赞同：0
> 
> 时间：2012-12-15T09:10:13.347
> 
> 标签：vb.net, webkit.net

我使用 webkitdotnet 和 vb.net 来制作一个小型浏览器，

我做到了，当我在浏览器上使用打印按钮时，它会打印出来，但我想从网页端打印它。

```
<body onload="printdiv('printable_area')"> 
```

它没有得到命令，也没有打印或显示打印对话框，我想要的是

在网站中是否有用于打印的代码。`<a hred="javascript:print()">Print</a>`或`<body onload="print()">`浏览器必须静默打印。

对不起我的英语，它非常糟糕。

# html - IE7、8、9浏览器中的HTML列表搞砸了

> ID：13890901
> 
> 赞同：0
> 
> 时间：2012-12-15T09:10:32.333
> 
> 标签：html, css, xhtml, html-lists

我为希伯来客户创建了一个网站。这是现场演示链接：

[**实时链接**](http://wf.net23.net/demo/eweb/13/)

带有“关于我们”、“联系方式”、“注册”、“登录”链接的第一行在任何 ie 浏览器中均未正确显示。图标应显示在文本的右侧。我尝试了不同的浮动和边距、填充，但它只会把事情搞砸。

请问如何更正此代码？

```
 <div class="logobar">
    <div class="logobar_content">
        <a href="#" class="logo"></a>
        <ul class="toplinks">
            <li><a href="#" class="info_icon">About Us</a></li>
            <li><a href="#" class="envelope_icon">Contact</a></li>
            <li><a href="#" class="pen_icon">Register</a></li>
            <li><a href="#" class="lock_icon">Log In</a></li>
        </ul>

        <div class="left">
            <p class="scart">
                <span>0</span>items<a href="#">Checkout</a>
            </p>

            <form action="post" class="search_form">
                <input type="text" id="search" class="search" />
                <input type="submit" id="submit" class="submit" value="" />                    
            </form>
        </div>
    </div>
</div>

    /*=========== LOGO BAR =========*/
.logobar {
    height: 95px;
    overflow: hidden;
    position: relative;
    margin: 0 auto;
    width: 100%;
    background: #f0f0f0 url(../images/logobar_repeat.png) 0 0 repeat-x;
}

.logobar_content {
    width: 960px;
    margin: 0 auto;
    position: relative;
    overflow: hidden;
}

.logo {
    background: url(../images/logo.png) 0 0 no-repeat;
    position: relative;
    float: right;
    width: 312px;
    height: 71px;
    margin-top: 13px;
}

ul.toplinks {
    float: left;
    width: 500px;
    margin-top: 15px;
}

.toplinks li {
    float: right;
    list-style: none;
    border-left: 1px solid #888;
    padding: 0 13px 0 20px;
}

.toplinks li a {
    padding: 0 0 0 35px;
    font-family: Trebuchet MS, Arial, sans-serif;
    font-size: 12px;
    text-transform: uppercase;
    color: #444;
    text-decoration: none;
    text-align: right;
}

.toplinks li a.info_icon, .toplinks li a.envelope_icon, .toplinks li a.pen_icon, .toplinks li a.lock_icon {
    background: url(../images/info_icon.png) 0px 0 no-repeat;
    width: 18px;
    height: 15px;
}

.toplinks li a.envelope_icon {
    background: url(../images/envelope_icon.png) 0 0 no-repeat;
}

.toplinks li a.pen_icon {
    background: url(../images/pen_icon.png) 0 0 no-repeat;
}

.toplinks li a.lock_icon {
    background: url(../images/lock_icon.png) 0 0 no-repeat;
}

.scart {
    background: #eee url(../images/basket2.png) 95% 2px no-repeat;
    float: right;
    height: 25px;
    margin: 17px 0px 0 25px;
    padding: 3px 40px 0px 10px;
    border: 1px solid #ccc;
}

.scart a {
    float: right;
    color: #ff720c;
    font-weight: bold;
    font-size: 14px;
    margin-left: 5px;
}

.scart span {
    margin-left: 4px;
}

.search_form {
    float: left;
    clear: left;
    height: 26px;
    margin-top: 20px;
    background: url(../images/search_left2.png) 100% 0 no-repeat;
}

.search {
    background: url(../images/search_repeat.jpg) 0 0 repeat-x;
    border: none;
    margin: 0 11px 0 0px;
    float: right;
    width: 170px;
    height: 26px;
}

.submit {
    background: url(../images/search_right2.png) 0 0 no-repeat;
    width: 35px;
    height: 26px;
    float: left;
    border: none;
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T10:45:20.903

完成它是如此简单，请参阅下面的 css 规则并根据需要进行更改。

```
.toplinks li a.lock_icon {
    background: url("../images/lock_icon.png") no-repeat scroll 95% 0 transparent;
}

.toplinks li a {
    color: #444444;
    font-family: Trebuchet MS,Arial,sans-serif;
    font-size: 12px;
    padding: 0 35px 0 0; // See the css padding i changed to right 
    text-align: right;
    text-decoration: none;
    text-transform: uppercase;
} 
```

![在此处输入图像描述](../Images/f7c6b393dac9f51c44471c4e15263fa8.png)

# java - 在 Android Manifest.xml 中接收短信

> ID：13890903
> 
> 赞同：4
> 
> 时间：2012-12-15T09:10:49.130
> 
> 标签：java, android, xml, sms

我尝试在我的应用中接收短信，但我认为问题出在我的 AndroidManifest.xml 文件中

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.amin_amini.smstestmobi"
      android:versionCode="1"
      android:versionName="1.0.0">
    <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="15" />
    <uses-permission android:name="android.permission.RECEIVE_SMS"/>
    <uses-permission android:name="android.permission.SEND_SMS"/>
    <uses-permission android:name="android.permission.READ_SMS"/>
    <application android:icon="@drawable/ic_launcher" android:label="@string/app_name">
        <activity android:name=".SMS"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <receiver android:name=".SmsReceiver"
                  android:enabled="true"
                  android:exported="true"
                  android:permission="android.permission.BROADCAST_SMS"> 
            <intent-filter android:priority="1000"> 
                <action android:name="android.provider.Telephony.SMS_RECEIVED"/> 
            </intent-filter> 
        </receiver> 
    </application>
</manifest> 
```

我的 SmsReceive.java 是这样的

```
package com.amin_amini.smstestmobi;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsMessage;
import android.widget.Toast;

public class SmsReceiver extends BroadcastReceiver
{   
    @Override
    public void onReceive(Context context, Intent intent) 
    {
    //---get the SMS message passed in---
    Bundle bundle = intent.getExtras();        
    SmsMessage[] msgs = null;
    String str = "";            
    if (bundle != null)
    {
        //---retrieve the SMS message received---
        Object[] pdus = (Object[]) bundle.get("pdus");
        msgs = new SmsMessage[pdus.length];            
        for (int i=0; i<msgs.length; i++)
         {
            msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                
            str += "SMS from " + msgs[i].getOriginatingAddress();                     
            str += " :";
            str += msgs[i].getMessageBody().toString();
            str += "\n";
        }
        //---display the new SMS message---
        Toast.makeText(context, str, Toast.LENGTH_SHORT).show();
    }                   
    Toast.makeText(context, "Hey", Toast.LENGTH_SHORT).show();
    }
} 
```

我确定我的问题出在 manifest.xml 中，因为

```
 Toast.makeText(context, "Hey", Toast.LENGTH_SHORT).show(); 
```

不显示任何东西。
我该怎么办 ？

编辑：正如我们的朋友在下面所说的那样，我使用了

```
 Log.i("Hey","Hey" ); 
```

在我的函数中，但 LogCat 中不会显示任何内容所以我很确定我的问题出在我 AndroidManifest.xml 注意：我在 HTC Sensation 上使用 android 4.0.3

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T16:33:22.753

将您的接收器代码更改为该代码，它将对您有所帮助，如果仍然无法正常工作，则可能是您安装了另一个具有更高优先级的 SMS 应用程序并将中止广播服务。

```
 <receiver android:name=".SmsReceiver"> 
        <intent-filter android:priority="1000">
            <action android:name="android.intent.action.PHONE_STATE" />
            <action android:name="PACKAGE_NAME.android.action.broadcast"/> 
             <action android:name="android.provider.Telephony.SMS_RECEIVED"></action>
        </intent-filter> 
    </receiver> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T10:42:51.313

是的，您的代码在这里运行良好。

这是我的 androidmanifest

```
<receiver android:name=".SmsReceiver" >
            <intent-filter >
                <action android:name="android.provider.Telephony.SMS_RECEIVED" />
            </intent-filter>
        </receiver> 
```

我已经添加了这些权限

```
<uses-permission android:name="android.permission.SEND_SMS" />
<uses-permission android:name="android.permission.READ_SMS" />
<uses-permission android:name="android.permission.RECEIVE_SMS" /> 
```

或下载此[代码](http://zohaibbrohi.blogspot.com/2012/11/recieve-sms-and-show-it-in-activity-as.html).. 我做了这个。它接收短信并在对话框中显示。

# iis - 检索具有 CLSID {000209FF-0000-0000-C000-000000000046} 的组件的 COM 类工厂

> ID：13890906
> 
> 赞同：4
> 
> 时间：2012-12-15T09:10:56.863
> 
> 标签：iis, windows-xp, asp.net-4.0, iis-5

我使用 Windows XP_SP_3 和 IIS 5（本地主机），使用 asp.net4 构建站点并使用以下代码：

```
Application appClass = new Application();
Document wordDoc = appClass.Documents.Add(Server.MapPath("~") + @"Files\tmp.docx");
wordDoc.SaveAs(@"e:\hp\Files\" + TextBox1.Text + ".docx");
wordDoc.Close(); 
```

如果使用 VS2010 运行站点，则可以。但如果使用 IIS 5（本地主机）运行，则会显示此错误：

> 由于以下错误，检索具有 CLSID {000209FF-0000-0000-C000-000000000046} 的组件的 COM 类工厂失败：80070005 访问被拒绝。（来自 HRESULT 的异常：0x80070005 (E_ACCESSDENIED)）。
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.UnauthorizedAccessException：检索具有 CLSID {000209FF-0000-0000-C000-000000000046} 的组件的 COM 类工厂失败，原因是以下错误：80070005 访问被拒绝。（来自 HRESULT 的异常：0x80070005 (E_ACCESSDENIED)）。
> 
> ASP.NET 无权访问请求的资源。考虑向 ASP.NET 请求标识授予对资源的访问权限。ASP.NET 有一个基本进程标识（通常是 IIS 5 上的 {MACHINE}\ASPNET 或 IIS 6 和 IIS 7 上的网络服务，以及 IIS 7.5 上配置的应用程序池标识），如果应用程序不是模拟的，则使用该标识。如果应用程序通过 模拟，则身份将是匿名用户（通常是 IUSR_MACHINENAME）或经过身份验证的请求用户。
> 
> 要授予 ASP.NET 对文件的访问权限，请在资源管理器中右键单击该文件，选择“属性”并选择“安全”选项卡。单击“添加”以添加相应的用户或组。突出显示 ASP.NET 帐户，然后选中所需访问权限的框。
> 
> 源错误：
> 
> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

* * *

我打开组件服务>计算机>右键单击我的电脑>选择属性> COM Sucrity>启动和激活...>编辑默认值>添加>高级>

我没有找到用户 IIS (IIS_IUSRS)。所以选择 ASP.NET 并确定并检查 Local Launch & Remote Launch & Local Activation & Remote Activation。

休息系统并再次使用 iis5 运行站点。但再次显示错误！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-29T06:19:04.807

1.  转到**控制面板 -> 管理工具 -> 组件服务**
2.  通过单击组件服务 -> 计算机 -> 我的电脑 -> DCOM 配置展开树
3.  搜索 CLSId **00020906-0000-0000-C000-000000000046**（用于 word 应用程序） **注意：如果搜索 CLSId 未找到，则按“Windows Word Application”搜索。**
4.  通过选择 **00020906-0000-0000-C000-000000000046**这个 CLSId 现在右键单击属性
5.  在“属性”区域中，单击“安全”选项卡。
6.  从所有（启动和激活权限、访问权限、配置权限）中选择自定义选项。
7.  将新名称全部添加为 NETWORK SERVICE，并允许此名称的所有权限。
8.  转到同一属性区域中的身份选项卡，选择选项作为**此用户**，然后添加用户名（这是本机的管理员）和密码。点击应用，确定。
9.  刷新组件服务并检查您的应用程序是否正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-26T05:06:18.730

启动 Internet 信息服务 (IIS)。右键单击应用程序的虚拟目录，然后单击“属性”。单击目录安全选项卡。在匿名访问和身份验证控制下，单击编辑。确保未选中匿名访问复选框，并且集成 Windows 身份验证是唯一选中的复选框。将 ASP.NET 配置为使用带有模拟的 Windows 身份验证，使用以下配置

```
...
<authentication mode="Windows"/>
<identity impersonate="true"/>
... 
```

# closures - 何时在 Go 中使用匿名函数？

> ID：13890910
> 
> 赞同：4
> 
> 时间：2012-12-15T09:11:14.160
> 
> 标签：closures, go

Go 支持匿名函数/闭包，这让我想起了 Python 中的 Lambda，什么时候在你的代码中使用它们比较理想？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T09:47:52.460

jnml 已经给出了匿名函数有用的一种情况。

我要补充一点，当您只需要传递一个不会在其他地方调用的函数时，您可以使用它们：

**Goroutine 启动：**

```
go func() {
    ...
}() 
```

**将一些代码传递给函数：**

```
http.Handle("/ws", websocket.Handler(func(ws *websocket.Conn) {
  ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-15T09:34:56.867

我认为[函数文字](http://golang.org/ref/spec#Function_literals)最有意义，因为它们是闭包的事实是有用/使用的。考虑例如：

```
type handler func()

func HanldeSomething(h handler)  {
        //...
        h()
        // ...
}

func Elsewhere() {
        var foo int
        HandleSomething(handler(func(){
                fmt.Println("debug: foo in Elsewhere is", foo)
        }))
} 
```

这样，当在其中`h`被调用时，`HandleSomething`它可以使用`Elsewhere`. 这在很多情况下都很方便。

# java - 如何在限制访问的jsp页面中显示4个按钮？

> ID：13890911
> 
> 赞同：1
> 
> 时间：2012-12-15T09:11:13.610
> 
> 标签：java, struts

我想以限制的方式在 JSp 页面（BOMDisplay.jsp）中显示 4 个按钮。

意味着，还有另一个页面（RoleTransaction 页面），我们必须在其中选择类别（下拉）和角色（下拉），并且有各种复选框旨在为特定角色选择。这些复选框值取自数据库。当我们选择类别和角色并选择该特定角色的复选框并单击“保存”按钮时，这 4 个按钮应以限制方式显示在 JSp 页面（BOMDisplay.jsp）中（基于选择的复选框）那个特殊的角色）。四个按钮是假设： -

1.  按钮1
2.  按钮2
3.  按钮3
4.  按钮4

这四个按钮是新插入到数据库中的，以便特定角色可以选择这些按钮的任意组合。

单击保存按钮后，控件转到 TransactionAction，然后转到 TransationBO，然后转到 TransactionDAO。我必须以我之前提到的限制性方式实现按钮在 BOMDisplay.jsp 中可用的概念。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T09:38:07.347

在 spring 中，我们使用 spring 安全特性 sec:authorize。在struts 中，您可以附加一个角色并显示该角色所需的内容。@struts.action path="/customer" 角色="查看器，编辑器"

在 struts-config.xml 中指定角色

# c++ - avl树中删除过程的实现

> ID：13890913
> 
> 赞同：1
> 
> 时间：2012-12-15T09:11:34.027
> 
> 标签：c++, algorithm

我目前正在实施 avl 树。更正 [插入过程](https://stackoverflow.com/questions/13890528/implementation-of-avl-tree-causing-segmentation-fault/ "插入程序")后，我开始执行另一个过程，从 avl 树中删除给定节点。但我真的被困住了。并不是我不明白它是如何工作的，或者如何实现它，而是我真的很关心代码的复杂性，以及我认为很难实现的删除功能。有人可以指出我在 avl 树中的删除功能的简短易懂的实现吗？

到目前为止，这是我的代码：

```
struct avl_tree {
private:
  struct node {
    node *l, *r;
    int h, size;
    key_t key;
    node( key_t k ) : l( 0 ), r( 0 ), h( 1 ), size( 1 ), key( k ) {}
    void u() {
      h=1+std::max( ( l?l->h:0 ), ( r?r->h:0 ) );
      size=( l?l->size:0 ) + ( r?r->size:0 ) + 1;
    }
  } *root;
  compare_t cmp;

  int h( node *x ) { return ( x?x->h:0 ); }

  node* rotl( node *x ) {
    node *y=x->r;
    x->r=y->l;
    y->l=x;
    x->u(); y->u();
    return y;
  }
  node* rotr( node *x ) {
    node *y=x->l;
    x->l=y->r;
    y->r=x;
    x->u(); y->u();
    return y;
  }
  node* balance( node *x ) {
    x->u();
    if( h( x->l ) > 1 + h( x->r ) ) {
      if( h( x->l->l ) < ( x->l?h( x->l->r ):0 ) )  x->l = rotl( x->l );
      x = rotr( x );
    } else if( h( x->r ) > 1 + h( x->l ) ) {
      if( h( x->r->r ) < ( x->r?h( x->r->l ): 0 ) ) x->r = rotr( x->r );
      x = rotl( x );
    }
    return x;
  }
  node* _insert( node *t, key_t k ) {
    if( t==NULL ) return new node( k );
    if( cmp( k, t->key ) ) { t->l = _insert( t->l, k ); }
    else { t->r = _insert( t->r, k ); }
    return balance( t );
  }
  void _inorder( node *t ) {
    if( t ) {
      _inorder( t->l );
      std::cout << t->key << " ";
      _inorder( t->r );
    }
  }
  node* _find( node *t, key_t k ) {
    if( !t ) return t;
    if( cmp( t->key, k ) ) return _find( t->l, k );
    else if( cmp( k, t->key ) ) return _find( t->r, k );
    else return t;
  }
  node* _min( node *t ) {
    if( !t || !t->l ) return t;
    else return _min( t->l );
  }
  node* _max( node *t ) {
    if( !t || !t->r ) return t;
    else return _max( t->r );
  }
public:
  avl_tree() : root( 0 ) {}

  void insert( key_t k ) { root = _insert( root, k ); }
  void inorder() { _inorder( root ); }
  node* find( key_t k ) { return _find( root, k ); }
  node* min() { return _min( root ); }
  node* max() { return _max( root ); }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T11:33:14.377

因此，如果您了解从 AVL-tree 中删除的工作原理，我只想对这段代码的复杂性说几句话。当然它是渐近最优的 O(log n)，但常数不是最好的。您可以将 _extractmin 和 _min 的调用替换为一个函数。这将通过返回一对两个指针（最小值和平衡结果）一次完成。

```
node* _extractmin( node *t ) {
    if ( !t->l ) return t->r;
    t->l = _extractmin(t->l);
    return balance(t);
}

node* _remove( node *t, key_t k )
{
    if ( !t ) return t;

    if (cmp(k, t->key)) 
        t->l = _remove(t->l, k);
    else if (cmp(t->key, k)) 
        t->r = _remove(t->r, k);
    else
    {
        node *l = t->l;
        node *r = t->r;
        delete t;
        if ( !r ) return l;
        node *m = _min(r);
        m->r = _extractmin(r);
        m->l = l;
        return balance(m);
    }
    return balance(t);
}

void remove( key_t k ) { root = _remove( root, k ); } 
```

# iphone - 将 NSDate 转换为 NSString 时出现 NSDateFormatter 问题

> ID：13890917
> 
> 赞同：1
> 
> 时间：2012-12-15T09:11:47.520
> 
> 标签：iphone, ipad, ios6, nsdate, nsdateformatter

`NSDateFormatter`提供默认日期

```
2001-01-01 00:00:00 +0000 
```

我需要将其格式化为 January, 01 2013 04:00:00 的格式

这是我的代码：

```
NSDateFormatter *formatter=[[NSDateFormatter alloc] init];
[formatter setDateFormat:@"MMMM, dd yyyy HH:mm:ss"];
NSDate *startDt=[_calendarDetailsDict objectForKey:@"dtStart"];
NSDate *endDt=[_calendarDetailsDict objectForKey:@"dtEnd"];
NSString *str=[formatter stringFromDate:startDt];
NSString *str1=[formatter stringFromDate:endDt]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T09:30:36.453

```
 NSString *dateStr =@"2012-09-15 00:11:59";
 NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
 [dateFormat setDateFormat:@"yyyy-MM-dd hh:mm:ss"];
 NSDate *date = [dateFormat dateFromString:dateStr];
 dateFormat setDateFormat:@"MMMM, dd yyyy HH:mm:ss"];
 NSString *dateString = [dateFormat stringFromDate:date];
 NSLog(@"date: %@", dateString); 
```

可以帮助你。

# css - 广告不显示在混合论坛插件中？

> ID：13890921
> 
> 赞同：1
> 
> 时间：2012-12-15T09:12:22.750
> 
> 标签：css, plugins

我使用混合论坛插件。广告未在此处显示。我想使用此广告格式代码。但不显示此插件。仅显示 html 代码。不是广告。我怎么能解决这个问题。[我的网站](http://forum.dewdropzone.com)。

```
clicksor_enable_pop = true; clicksor_frequencyCap = -1;
durl = '';clicksor_enable_layer_pop = false;
//default banner house ad url 
clicksor_default_url = '';
clicksor_banner_border = ''; clicksor_banner_ad_bg = '';
clicksor_banner_link_color = ''; clicksor_banner_text_color = '';
clicksor_layer_border_color = '';
clicksor_layer_ad_bg = ''; clicksor_layer_ad_link_color = '';
clicksor_layer_ad_text_color = ''; clicksor_text_link_bg = '';
clicksor_text_link_color = ''; clicksor_enable_text_link = true;
clicksor_layer_banner = false; 
```

[联盟营销](http://www.yesadvertising.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T11:24:12.347

我解决了我的问题。我想向其他面临这个问题的人展示它。

转到 /mingle-forum/fs-admin/fs-admin.php 并找到此代码

```
 $mingleforum->ads_options = array(  'mf_ad_above_forum_on'          => $_POST['mf_ad_above_forum_on'],
                                                'mf_ad_above_forum'             => wp_kses_post($_POST['mf_ad_above_forum_text']),
                                                'mf_ad_below_forum_on'          => $_POST['mf_ad_below_forum_on'],
                                                'mf_ad_below_forum'             => wp_kses_post($_POST['mf_ad_below_forum_text']),
                                                'mf_ad_above_branding_on'       => $_POST['mf_ad_above_branding_on'],
                                                'mf_ad_above_branding'          => wp_kses_post($_POST['mf_ad_above_branding_text']),
                                                'mf_ad_above_info_center_on'    => $_POST['mf_ad_above_info_center_on'],
                                                'mf_ad_above_info_center'       => wp_kses_post($_POST['mf_ad_above_info_center_text']),
                                                'mf_ad_above_quick_reply_on'    => $_POST['mf_ad_above_quick_reply_on'],
                                                'mf_ad_above_quick_reply'       => wp_kses_post($_POST['mf_ad_above_quick_reply_text']),
                                                'mf_ad_above_breadcrumbs_on'    => $_POST['mf_ad_above_breadcrumbs_on'],
                                                'mf_ad_above_breadcrumbs'       => wp_kses_post($_POST['mf_ad_above_breadcrumbs_text']),
                                                'mf_ad_below_first_post_on'     => $_POST['mf_ad_below_first_post_on'],
                                                'mf_ad_below_first_post'        => wp_kses_post($_POST['mf_ad_below_first_post_text']),
                                                'mf_ad_custom_css'              => strip_tags($_POST['mf_ad_custom_css'])
                                                ); 
```

并更改为：

```
 $mingleforum->ads_options = array(  'mf_ad_above_forum_on'          => $_POST['mf_ad_above_forum_on'],
                                                'mf_ad_above_forum'             => $_POST['mf_ad_above_forum_text'],
                                                'mf_ad_below_forum_on'          => $_POST['mf_ad_below_forum_on'],
                                                'mf_ad_below_forum'             => $_POST['mf_ad_below_forum_text'],
                                                'mf_ad_above_branding_on'       => $_POST['mf_ad_above_branding_on'],
                                                'mf_ad_above_branding'          => $_POST['mf_ad_above_branding_text'],
                                                'mf_ad_above_info_center_on'    => $_POST['mf_ad_above_info_center_on'],
                                                'mf_ad_above_info_center'       => $_POST['mf_ad_above_info_center_text'],
                                                'mf_ad_above_quick_reply_on'    => $_POST['mf_ad_above_quick_reply_on'],
                                                'mf_ad_above_quick_reply'       => $_POST['mf_ad_above_quick_reply_text'],
                                                'mf_ad_above_breadcrumbs_on'    => $_POST['mf_ad_above_breadcrumbs_on'],
                                                'mf_ad_above_breadcrumbs'       => $_POST['mf_ad_above_breadcrumbs_text'],
                                                'mf_ad_below_first_post_on'     => $_POST['mf_ad_below_first_post_on'],
                                                'mf_ad_below_first_post'        => $_POST['mf_ad_below_first_post_text'],
                                                'mf_ad_custom_css'              => strip_tags($_POST['mf_ad_custom_css'])
                                                ); 
```

我认为您可以解决使用 mingle 论坛插件的问题。

# c++ - 在函数中使用函数的 C++ 给出未解析的外部符号

> ID：13890923
> 
> 赞同：0
> 
> 时间：2012-12-15T09:12:37.073
> 
> 标签：c++, function

尝试在 Visual Studio 2010 中编译下面的代码给了我两个关于未解析外部符号的错误。我很确定问题是因为我在一个函数中使用了一个函数，但我不知道具体我做错了什么。代码对我来说看起来不错。

```
#include <iostream>

using namespace std;

class fraction
{
  public:
    int gcd(int, int);
    void simplifyfraction();
  private:
    int integral, numerator, denominator;
};

int main(){
    return 0;
}

int gcd(int numerator, int denominator)
{
    if (denominator > numerator)
       return gcd(denominator, numerator);
    if (numerator == denominator)
       return numerator;
    if (numerator%denominator == 0)
       return denominator;
    return gcd(numerator, numerator-denominator);
}

void fraction::simplifyfraction()
{
    int mygcd;
    mygcd = gcd(numerator, denominator);
    numerator = numerator/mygcd;
    denominator = denominator/mygcd;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T09:15:19.433

的定义`gcd()`不使用类名限定，并被视为独立函数，与类中声明的成员函数*不同*。`gcd()``fraction`

As`gcd()`从编译器中调用，`fraction::simplifyfraction()`搜索一个名为的函数`gcd()`，它找到的第一个函数声明在与 相同的范围内`simplifyfraction()`，即`fraction::gcd()`没有定义（它没有找到完全定义的独立`gcd()`函数）。链接器随后抱怨它有一个未解析的符号。

更正更改为：

```
int fraction::gcd(int numerator, int denominator)
{
} 
```

* * *

请注意，这也可以通过不`gcd()`作为成员函数来解决（它不访问 的任何成员变量`fraction`，所有变量都作为参数传递）或者`gcd()`in的调用`fraction::simplifyfraction()`可以更改为：

```
mygcd = ::gcd(numerator, denominator); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T09:15:55.550

您的 gcd 实现并没有将自己声明为分数的成员函数。

你需要写：

```
int fraction::gcd(int numerator, int denominator) 
```

# avfoundation - 将摆动图标添加到视频

> ID：13890926
> 
> 赞同：4
> 
> 时间：2012-12-15T09:13:14.320
> 
> 标签：avfoundation

有人可以帮我将一个图标合并到一个随着视频播放而摆动的视频。我已将动画添加到摆动图标，但只有一个静态图标会合并到视频中。如果有人可以帮助我，我将不胜感激。

我给你我使用的代码

```
//- (void)exportDidFinish:(AVAssetExportSession*)session{

    NSLog(@"baseView subviews : %@", [baseView subviews]);

    UIGraphicsBeginImageContext(baseView.bounds.size);
    [baseView.layer renderInContext:UIGraphicsGetCurrentContext()];
    //[self wobbleVideo:baseView];

    UIImage *resultImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    aLayer = [CALayer layer];
    aLayer.frame = CGRectMake(0, 0, 320, 380);
    aLayer.bounds = CGRectMake(0, 0, 320, 380);
    aLayer.contents = (id) resultImage.CGImage;
    aLayer.opacity = 1;
    aLayer.backgroundColor = [UIColor clearColor].CGColor;
    aLayer.geometryFlipped = YES;
    [aLayer addAnimation:[self getShakeAnimation] forKey:@"transform"];

    AVURLAsset *asset = [AVURLAsset URLAssetWithURL:rotatedVideoUrl options:nil];
    cmp = [AVMutableComposition composition];

    AVMutableCompositionTrack *videoComposition = [cmp addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];
    AVMutableCompositionTrack *audioComposition = [cmp addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];
    AVAssetTrack *sourceVideoTrack = [[asset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];
    AVAssetTrack *sourceAudioTrack = [[asset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0];
    [videoComposition insertTimeRange:CMTimeRangeMake(kCMTimeZero, [asset duration]) ofTrack:sourceVideoTrack atTime:kCMTimeZero error:nil] ;
    [audioComposition insertTimeRange:CMTimeRangeMake(kCMTimeZero, [asset duration]) ofTrack:sourceAudioTrack atTime:kCMTimeZero error:nil] ;

    animComp = [AVMutableVideoComposition videoComposition];
    animComp.renderSize = CGSizeMake(320, 360); 
    animComp.frameDuration = CMTimeMake(1,30);
    CALayer *parentLayer = [CALayer layer];
    CALayer *videoLayer = [CALayer layer];
    parentLayer.frame = CGRectMake(0, 0, 320, 360);
    videoLayer.frame = CGRectMake(0, 0, 320, 360); 
    [parentLayer addSublayer:videoLayer];
    [parentLayer addSublayer:aLayer];
    animComp.animationTool = [AVVideoCompositionCoreAnimationTool videoCompositionCoreAnimationToolWithPostProcessingAsVideoLayer:videoLayer  inLayer:parentLayer];

    // to gather the audio part of the video
    NSArray *tracksToDuck = [cmp tracksWithMediaType:AVMediaTypeAudio];
    NSMutableArray *trackMixArray = [NSMutableArray array];
    for (NSInteger i = 0; i < [tracksToDuck count]; i++) {
        AVMutableAudioMixInputParameters *trackMix = [AVMutableAudioMixInputParameters audioMixInputParametersWithTrack:[tracksToDuck objectAtIndex:i]];
        [trackMix setVolume:10 atTime:kCMTimeZero];
        [trackMixArray addObject:trackMix];
    }
    audioMix = [AVMutableAudioMix audioMix];
    audioMix.inputParameters = trackMixArray;

    AVMutableVideoCompositionInstruction *instruction = [AVMutableVideoCompositionInstruction videoCompositionInstruction];
    instruction.timeRange = CMTimeRangeMake(kCMTimeZero, [asset duration]);
    AVMutableVideoCompositionLayerInstruction *layerVideoInstruction = [AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:videoComposition];
    [layerVideoInstruction setOpacity:1.0 atTime:kCMTimeZero];
    instruction.layerInstructions = [NSArray arrayWithObject:layerVideoInstruction] ;
    animComp.instructions = [NSArray arrayWithObject:instruction];
    [self exportMovie:self];

}

//WOBBLE ANIMATION-------------------------------------
- (CAKeyframeAnimation*)getShakeAnimation {

    CAKeyframeAnimation* animation = [CAKeyframeAnimation animationWithKeyPath:@"transform"];

    CGFloat wobbleAngle = 0.06f;

    NSValue* valLeft = [NSValue valueWithCATransform3D:CATransform3DMakeRotation(wobbleAngle, 0.0f, 0.0f, 1.0f)];
    NSValue* valRight = [NSValue valueWithCATransform3D:CATransform3DMakeRotation(-wobbleAngle, 0.0f, 0.0f, 1.0f)];
    animation.values = [NSArray arrayWithObjects:valLeft, valRight, nil];

    animation.autoreverses = YES;
    animation.duration = 0.125;
    animation.repeatCount = HUGE_VALF;

    return animation;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T05:06:14.057

使用 CABasicAnimation 来实现你想要的。我在这里粘贴了一个示例。请看一下并告诉我您是否仍然面临问题。

CALayer *parentLayer = [CALayer 层]; CALayer *videoLayer = [CALayer 层];

```
parentLayer.sublayerTransform = CATransform3DMakeRotation(0.0f, 1.0f, -1.0f, 1.0f);

 parentLayer.frame = CGRectMake(0, 0, 320, (window.bounds.size.height - 50));
videoLayer.frame = CGRectMake(0, 0, 320, (window.bounds.size.height - 50));

parentLayer.geometryFlipped = NO;
[parentLayer addSublayer:videoLayer];

//---- adding wobble image to the video ----//
for (UIImageView * individualImageViews in [baseView subviews])
{
    aLayer = [CALayer layer];

    float newY = ((window.bounds.size.height - 50) - (individualImageViews.frame.origin.y + individualImageViews.frame.size.height)); // frame is taken like this because the layer was getting flipped

    aLayer.frame = individualImageViews.frame;
    aLayer.bounds = individualImageViews.frame;
    aLayer.frame = CGRectMake(individualImageViews.frame.origin.x, newY , individualImageViews.frame.size.width, individualImageViews.frame.size.height) ;
    aLayer.bounds = CGRectMake(individualImageViews.frame.origin.x, newY , individualImageViews.frame.size.width, individualImageViews.frame.size.height);

    aLayer.contents = (id) individualImageViews.image.CGImage;
    aLayer.opacity = 1;
    aLayer.backgroundColor = [UIColor clearColor].CGColor;
    aLayer.geometryFlipped = NO;

    CABasicAnimation *trans = [CABasicAnimation animationWithKeyPath:@"transform"];

    CGFloat wobbleAngle = 0.3f;

    NSValue* valLeft;
    NSValue* valRight;

    valLeft = [NSValue valueWithCATransform3D:CATransform3DMakeRotation(wobbleAngle, 0.0f, 0.0f, 1.0f)];
    valRight = [NSValue valueWithCATransform3D:CATransform3DMakeRotation(-wobbleAngle, 0.0f, 0.0f, 1.0f)];

    trans.fillMode = kCAFillModeForwards;
    trans.duration = 1;
    trans.fromValue = valLeft;
    trans.toValue = valRight;
    trans.cumulative = NO;
    trans.repeatDuration = 10;
    trans.autoreverses = YES;

    //trans.autoreverses = YES;
    //trans.repeatCount = HUGE_VALF;
    //trans.fromValue = [NSNumber numberWithFloat:1.0];
    //trans.toValue = [NSNumber numberWithFloat:0.0];;

    // need this for export
    trans.beginTime = 1e-100;
    trans.removedOnCompletion = NO;

    [aLayer addAnimation:trans forKey:@"transform"];

    [parentLayer addSublayer:aLayer];
} 
```

一切顺利，亲爱的。

# html - 将 LINK 元素和 SCRIPT 元素存储在单独的文件中

> ID：13890932
> 
> 赞同：1
> 
> 时间：2012-12-15T09:14:14.007
> 
> 标签：html

我们可能必须在 HTML 页面的头部元素中放置大量 LINK 元素和 SCRIPT 元素。也可能有很多页面具有相同的上述元素。因此，我们可以将它们全部放在一个文件中，并且只将包含文件的链接放在 HTML 头元素中吗？

例如：类似的东西，

```
<link href="links.something"> etc 
```

代替

```
<HEAD>

<link href="css/home.css" rel="stylesheet" type="text/css" media="screen" />
<link href="css/images.css" rel="stylesheet" type="text/css" media="screen" />
<link href="images/favicon.ico" rel="shortcut icon" type="image/x-icon" />

<link href="css/smoothness/jquery-ui-1.9.2.custom.css" rel="stylesheet">
<script src="js/jquery-1.8.3.js"></script>
<script src="js/jquery-ui-1.9.2.custom.js"></script>`

<HEAD> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T09:21:53.723

您可以从服务器端脚本（例如 PHP）动态生成它们，我已经使用 CodeIgniter MVC 框架完成了这项工作，尽管您可以使用直接 PHP 来完成。

您也可以使用模板引擎（如 Smarty）来做同样的事情。

直接php：

```
<head>
include('js_files.php');
</head> 
```

CI MVC（在控制器中），这是相当复杂的，网上有很多更好的例子：

```
$jsfiles = $this->load->model('head_files');
$head = $this->load->view('head', $jsfiles, false); 
```

我不确定 Smarty，因为我只是自己开始使用它，这是我开始使用它的主要原因，不幸的是我丢失了我看到的教程的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T09:32:50.467

在您的情况下，最好使用 PHP `include`s
例如，页面将被编码为部分：`header.php`，`footer.php`，并且主要内容也将动态加载。

```
<html>
<head>
<?php 
include('header.php'); //PHP file that holds all the links(not anchor links) and scripts
?>
</head>
<body>
<?php 
include('body.php?page=whatever');
include('footer.php');
?>
</body>
</html> 
```

通过这样做，您只需编辑一个文件即可对多个文件进行更改。

# python - Python 的 time.time() 是否返回本地或 UTC 时间戳？

> ID：13890935
> 
> 赞同：649
> 
> 时间：2012-12-15T09:14:57.827
> 
> 标签：python, time, timezone

Python 时间模块中是否`time.time()`返回系统时间或 UTC 时间？

* * *

## 回答 #1

> 赞同：867
> 
> 时间：2012-12-15T09:33:42.543

该[`time.time()`](https://docs.python.org/2/library/time.html#time.time)函数返回自纪元以来的秒数，以秒为单位。请注意，“纪元”定义为 UTC 时间 1970 年 1 月 1 日的开始。因此，时代是根据 UTC 定义的，并建立了一个全球时刻。无论您身在何处，“经过几秒”（time.time()）都会在同一时刻返回相同的值。

这是我在计算机上运行的一些示例输出，也将其转换为字符串。

```
Python 2.7.3 (default, Apr 24 2012, 00:00:54) 
[GCC 4.7.0 20120414 (prerelease)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import time
>>> ts = time.time()
>>> print ts
1355563265.81
>>> import datetime
>>> st = datetime.datetime.fromtimestamp(ts).strftime('%Y-%m-%d %H:%M:%S')
>>> print st
2012-12-15 01:21:05
>>> 
```

该`ts`变量是以秒为单位返回的时间。然后我使用`datetime`库将其转换为字符串，使其成为人类可读的字符串。

* * *

## 回答 #2

> 赞同：334
> 
> 时间：2012-12-15T10:24:06.267

这是可以在文本文件中使用**的时间戳的文本形式。**（问题的标题与过去不同，因此更改了此答案的介绍以阐明如何将其解释为时间。[2016-01-14 更新]）

`.now()`您可以使用以下的或`.utcnow()`来获取时间戳作为字符串`datetime.datetime`：

```
>>> import datetime
>>> print datetime.datetime.utcnow()
2012-12-15 10:14:51.898000 
```

与预期`now`不同`utcnow`- 否则它们的工作方式相同：

```
>>> print datetime.datetime.now()
2012-12-15 11:15:09.205000 
```

您可以显式地将时间戳呈现给字符串：

```
>>> str(datetime.datetime.now())
'2012-12-15 11:15:24.984000' 
```

或者您可以更明确地以您喜欢的方式格式化时间戳：

```
>>> datetime.datetime.now().strftime("%A, %d. %B %Y %I:%M%p")
'Saturday, 15\. December 2012 11:19AM' 
```

如果你想要 ISO 格式，使用`.isoformat()`对象的方法：

```
>>> datetime.datetime.now().isoformat()
'2013-11-18T08:18:31.809000' 
```

您可以在变量中使用它们进行计算和打印而无需转换。

```
>>> ts = datetime.datetime.now()
>>> tf = datetime.datetime.now()
>>> te = tf - ts
>>> print ts
2015-04-21 12:02:19.209915
>>> print tf
2015-04-21 12:02:30.449895
>>> print te
0:00:11.239980 
```

* * *

## 回答 #3

> 赞同：153
> 
> 时间：2013-04-30T12:02:37.907

根据#squiguy 的回答，为了得到一个真正的时间戳，我会从浮点数中输入它。

```
>>> import time
>>> ts = int(time.time())
>>> print(ts)
1389177318 
```

至少是这个概念。

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2013-11-17T20:41:30.983

答案可能两者都不是，也可能两者兼而有之。

*   既不：`time.time()`返回大约自 Epoch 以来经过的秒数。结果不依赖于时区，因此它既不是 UTC 也不是本地时间。这是["Seconds since the Epoch" 的 POSIX 定义](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap04.html#tag_04_15)。

*   两者：`time.time()`不需要同步系统的时钟，因此它反映了它的价值（尽管它与本地时区无关）。不同的计算机可能同时得到不同的结果。另一方面，如果您的计算机时间*是*同步的，那么很容易从时间戳中获取 UTC 时间（如果我们忽略闰秒）：

    ```
    from datetime import datetime

    utc_dt = datetime.utcfromtimestamp(timestamp) 
    ```

关于如何在各种 Python 版本中从 UTC 时间获取时间戳，请参阅[如何根据 UTC 将日期转换为自纪元以来的秒数？](https://stackoverflow.com/a/8778548/4279)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2020-06-14T22:56:14.257

要使用日期时间库获取本地时间戳，Python 3.x

```
#wanted format: year-month-day hour:minute:seconds

from datetime import datetime

# get time now
dt = datetime.now()
# format it to a string
timeStamp = dt.strftime('%Y-%m-%d %H:%M:%S')

# print it to screen
print(timeStamp) 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-10-31T17:32:23.710

我最终安顿下来：

```
>>> import time
>>> time.mktime(time.gmtime())
1509467455.0 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-08-20T00:07:43.693

在特定时区没有“纪元”之类的东西。纪元被明确定义为特定的时间点，因此如果您更改时区，时间本身也会发生变化。具体来说，这次是`Jan 1 1970 00:00:00 UTC`。所以`time.time()`返回自纪元以来的秒数。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-07-30T13:52:49.450

时间戳始终是 UTC 时间，但是当您调用`datetime.datetime.fromtimestamp` 它时，它会返回与此时间戳对应的本地时区中的时间，因此结果取决于您的语言环境。

```
>>> import time, datetime

>>> time.time()
1564494136.0434234

>>> datetime.datetime.now()
datetime.datetime(2019, 7, 30, 16, 42, 3, 899179)
>>> datetime.datetime.fromtimestamp(time.time())
datetime.datetime(2019, 7, 30, 16, 43, 12, 4610) 
```

存在`arrow`具有不同行为的不错的库。在同样的情况下，它会返回带有 UTC 时区的时间对象。

```
>>> import arrow
>>> arrow.now()
<Arrow [2019-07-30T16:43:27.868760+03:00]>
>>> arrow.get(time.time())
<Arrow [2019-07-30T13:43:56.565342+00:00]> 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-02-19T06:35:06.217

`time.time()` 返回 unix 时间戳。您可以使用`datetime`库来获取本地时间或 UTC 时间。

```
import datetime

local_time = datetime.datetime.now()
print(local_time.strftime('%Y%m%d %H%M%S'))

utc_time = datetime.datetime.utcnow() 
print(utc_time.strftime('%Y%m%d %H%M%S')) 
```

# c# - C# 字符串到句子

> ID：13890946
> 
> 赞同：1
> 
> 时间：2012-12-15T09:16:23.287
> 
> 标签：c#, string

有没有办法将没有空格的字符串转换为正确的句子？例如“WhoAmI”需要转换为“Who Am I”

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-15T09:19:10.617

*如果您只是*在谈论在每个大写字母之前插入一个空格，则正则表达式替换会这样做：

```
using System;
using System.Text.RegularExpressions;

class Test
{
    static void Main()
    {
        var input = "WhoAmI";
        var output = Regex.Replace(input, @"\p{Lu}", " $0").TrimStart();
        Console.WriteLine(output);
    }
} 
```

但是，我怀疑会有重大的极端案例。请注意，上面使用`\p{Lu}`的不仅仅是`[A-Z]`处理非 ASCII 大写字母；`A-Z`如果您只需要处理 ASCII，您可能会发现更简单。`TrimStart()`调用是删除否则你会得到的前导空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T14:33:12.503

您可以使用 LINQ

```
string words = "WhoAmI";
string sentence = String.Concat(words.Select(letter => Char.IsUpper(letter) ? " " + letter 
                                    : letter.ToString()))
                                    .TrimStart(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T09:19:38.730

如果字符串中的每个单词都以大写字母开头，您可以将每个以大写字母开头的部分转换为空格分隔的字符串。

# c# - 如何在ext.net2.0中集成flowplayer？

> ID：13890947
> 
> 赞同：0
> 
> 时间：2012-12-15T09:16:23.563
> 
> 标签：c#, asp.net, flowplayer, ext.net

我尝试将 Flow Player 集成到 Ext.net 中。如何在代码（.cs 文件）中设置视频源。

```
<ext:Panel ID="VideoPanel" runat="server" Split="true">
<Content>
          <div class="flowplayer">
               <video src="../video/Ganesh.mp4"></video>
          </div>
 </Content>
 </ext:Panel> 
```

我可以通过代码（.cs 文件）添加视频源吗

我在我的广播页面中使用视频。它在表单面板中使用

我的 ASPX 代码是：-----

```
<ext:FormPanel 
                    ID="FormPanel1" 
                    runat="server" 
                    Region="East" Title="Broadcasting Details"
                    Split="true"
                    Margins="0 5 5 5"
                    Frame="true" ColumnWidth="0.3" 
                    Width="280"
                    DefaultAnchor="100%">
                    <Items>
                        <ext:TextField ID="TextTitle" runat="server" FieldLabel="Title" Name="title" />
                        <ext:TextField ID="TextShortDescription" runat="server" FieldLabel="Short Description" Name="shortDescription" />
                        <ext:Label ID="descriptionLabel" Text="Description" runat="server"></ext:Label>
                        <ext:HtmlEditor ID="TextDescription" Name="descriptionContent" runat="server">
                        </ext:HtmlEditor>
                        <ext:Checkbox ID="CheckIsPublic" runat="server" FieldLabel="IsPublic" Name="isPublic" />
                        <ext:Panel runat="server" Layout="HBoxLayout" Split="true" Frame="true">
                            <Items>
                                <ext:Checkbox ID="CheckisEmbedded" runat="server" FieldLabel="Is Embedded" Name="isEmbedded">
                                   <Listeners>
                                        <Change Fn="changeText" />
                                   </Listeners> 
                                </ext:Checkbox>
                                <ext:ToolbarFill ID="ToolbarFill2" runat="server"></ext:ToolbarFill>
                                <ext:TextField ID="TextEmbeddedCode" runat="server" Name="embeddedCode" Region="West">
                                    <Listeners>
                                        <Change Fn="isFromOtherSite_Checked" />
                                    </Listeners>
                              </ext:TextField>

                            </Items>
                        </ext:Panel>
                        <ext:Panel ID="VideoPanel" runat="server" Split="true">
                            <Content>
                                    <div runat="server" id="videoDiv" class="flowplayer">
                                       <video runat="server" id="video1" ></video>
                                    </div>
                            </Content>
                       </ext:Panel>

                        <ext:FileUploadField ID="fileUploadBroadCast" runat="server" FieldLabel="Broadcast File" Name="fileName" Hidden="false" />
                        <ext:Hidden ID="newsIdHidden" runat="server" Name="broadcastingId" />
                    </Items>
                    <BottomBar>
                        <ext:Toolbar ID="Toolbar2" runat="server">
                        <Items>
                            <ext:Button ID="Button1" runat="server" Text="Save" Icon="Tick">
                               <DirectEvents>
                                    <Click OnEvent="SaveButton_Click"></Click>
                                </DirectEvents>
                            </ext:Button>
                            <ext:Button ID="Button2" runat="server" Text="Reset Fields" Icon="Reload">
                                <DirectEvents>
                                    <Click OnEvent="Reset_Click"></Click>
                                </DirectEvents>
                            </ext:Button>

                            <ext:Button ID="Button3" runat="server" Text="Delete" Icon="Decline">
                                <DirectEvents>
                                    <Click OnEvent="Delete_Click"></Click>
                                </DirectEvents>
                            </ext:Button>
                        </Items>
                        </ext:Toolbar>
                    </BottomBar>
                </ext:FormPanel> 
```

并在directevent方法中设置src，这段代码是：

```
protected void Select(object sender, DirectEventArgs e)
{
            this.Video1.Attributes.Add("src", "Ganesh.mp4");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T10:41:53.553

如果添加 runat="server" 属性和 .ID，您应该能够设置其他属性。

**例子**

```
<%@ Page Language="C#" %>

<script runat="server">
    protected void Page_Load(object sender, EventArgs e)
    {
        this.Video1.Attributes.Add("src", "http://example.com/");
    }
</script>

<!DOCTYPE html>

<html>
<head runat="server">
    <title>Example</title>
</head>
<body>
    <form runat="server">
        <video ID="Video1" runat="server"></video>
    </form>
</body>
</html> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T07:53:07.363

试试这个：

```
<%@ Page Language="C#" %>

<%@ Register Assembly="Ext.Net" Namespace="Ext.Net" TagPrefix="ext" %>

<script runat="server">
    protected void Page_Load(object sender, EventArgs e)
    {
        videoSrc.Attributes.Add("src", "http://stream.flowplayer.org/bauhaus/624x260.webm");
    }

    protected void ButtonClick(object sender, DirectEventArgs e)
    {
        X.AddScript("flowplayer().load('http://stream.flowplayer.org/bauhaus/624x260.webm')");
    }
</script>

<!DOCTYPE html>

<html>
<head runat="server">
    <title>Ext.NET Examples</title>
    <!-- player skin -->
   <link rel="stylesheet" type="text/css" href="flowplayer/skin/minimalist.css" />

   <!-- site specific styling -->
   <style>
   body { font: 12px "Myriad Pro", "Lucida Grande", sans-serif; text-align: center; padding-top: 5%; }
   .flowplayer { width: 80%; }
   </style>

    <!-- flowplayer depends on jQuery 1.7.1+ (for now) -->
   <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>

   <!-- include flowplayer -->
   <script src="flowplayer/flowplayer.min.js"></script>
</head>
<body>
    <ext:ResourceManager runat="server" SourceFormatting="True" ScriptMode="Debug" />

    <ext:Panel runat="server">
        <Content>
            <div class="flowplayer" data-swf="flowplayer.swf" data-ratio="0.417">
              <video runat="server" ID="video">
                 <source ID="videoSrc" runat="server" type="video/webm" />
              </video>
           </div>
        </Content>
    </ext:Panel>

    <ext:Button runat="server" OnDirectClick="ButtonClick" Text="Change video"></ext:Button>
</body>
</html> 
```

# java - Java - 原子地删除（非空）目录

> ID：13890949
> 
> 赞同：6
> 
> 时间：2012-12-15T09:16:30.260
> 
> 标签：java, concurrency, io

在 Java 应用程序中，有没有办法以原子方式（关于其他正在运行的进程）删除非空目录？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T09:18:23.480

操作系统（Windows、Unix）不支持此操作，但您可以做的是重命名目录，甚至将其移开，然后再将其删除。

# c++ - 如何将 utf16 ushort 数组转换为 utf8 std::string？

> ID：13890953
> 
> 赞同：6
> 
> 时间：2012-12-15T09:17:02.603
> 
> 标签：c++, utf-8, c++11, utf-16

目前我正在编写一个插件，它只是一个现有库的包装器。插件的主机传递给我一个 utf-16 格式的字符串，定义如下

typedef 无符号短 PA_Unichar；

并且包装的库只接受一个 const char* 或一个 std::string utf-8 格式的字符串我尝试编写一个转换函数，如

```
std::string toUtf8(const PA_Unichar* data)
{
std::wstring_convert<std::codecvt_utf8_utf16<char16_t>,char16_t> convert;
return std::string(convert.to_bytes(static_cast<const char16_t*>(data));
} 
```

但显然这不起作用，给我一个编译错误“不允许从'const指针'（又名'const unsigned short *'）到'const char16_t *'的static_cast”

那么最优雅/正确的方法是什么？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T21:07:52.467

您可以使用构造函数将`PA_unichar`字符串转换为字符串，然后按照您的尝试使用构面：`char16_t``basic_string(Iterator, Iterator)``std::codecvt_utf8_utf16`

```
std::string conv(const PA_unichar* str, size_t len)
{
  std::u16string s(str, str+len);
  std::wstring_convert<std::codecvt_utf8_utf16<char16_t>,char16_t> convert;
  return convert.to_bytes(s);
} 
```

我*认为*这是对的。不幸的是，我无法对此进行测试，因为我的实现还不支持它。我有一个`wstring_convert`我计划包含在 GCC 4.9 中的实现，但我没有一个实现`codecvt_utf8_utf16`来测试它。

# python - 无法让最简单的管道示例在scrapy中工作

> ID：13890969
> 
> 赞同：10
> 
> 时间：2012-12-15T09:19:32.533
> 
> 标签：python, scrapy

这是我的简单代码，我没有让它工作。

我从`initspider`

这是我的代码

```
class MytestSpider(InitSpider):
    name = 'mytest'
    allowed_domains = ['example.com']
    login_page = 'http://www.example.com'
    start_urls = ["http://www.example.com/ist.php"]

    def init_request(self):
        #"""This function is called before crawling starts."""
        return Request(url=self.login_page, callback=self.parse)

    def parse(self, response):
        item = MyItem()
        item['username'] = "mytest"
        return item 
```

# 管道

```
class TestPipeline(object):
    def process_item(self, item, spider):
            print item['username'] 
```

**如果尝试打印该项目，我会收到同样的错误**

我得到的错误是

```
 File "crawler/pipelines.py", line 35, in process_item
            myitem.username = item['username']
        exceptions.TypeError: 'NoneType' object has no attribute '__getitem__' 
```

我的问题是`InitSpider`。我的管道没有获取项目对象

# 项目.py

```
class MyItem(Item):
    username = Field() 
```

# 设置.py

```
BOT_NAME = 'crawler'

SPIDER_MODULES = ['spiders']
NEWSPIDER_MODULE = 'spiders'

DOWNLOADER_MIDDLEWARES = {

    'scrapy.contrib.downloadermiddleware.cookies.CookiesMiddleware': 700 # <-
}

COOKIES_ENABLED = True
COOKIES_DEBUG = True

ITEM_PIPELINES = [

'pipelines.TestPipeline',

]

IMAGES_STORE = '/var/www/htmlimages' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-02T07:25:23.823

`pipelines.TestPipeline`缺少订单号。它应该是类似的东西`ITEM_PIPELINES = {'pipelines.TestPipeline': 900}`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-10T01:51:54.430

`process_item`您的功能还有另一个问题。根据[官方文档](http://doc.scrapy.org/en/latest/topics/item-pipeline.html)：

> 为每个项目管道组件调用此方法，并且必须返回带有数据的字典、项目（或任何后代类）对象或引发 DropItem 异常。丢弃的项目不再由其他管道组件处理。

在您的情况下，您可以在函数末尾添加一个 return 语句：

```
def process_item(self, item, spider):
    print item['username']
    return item 
```

如果不包含 return 语句，则此管道的返回值为`None`. 这就是为什么下面的管道抱怨——你不能做`item['username']`when `item`is `None`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-21T00:20:20.390

这就是我所做的并且有效：

1.  在您的`MytestSpider`课程中，只需以这种方式编写`parse`函数：

    ```
    def parse(self, response):
        yield {'username': "mytest"} 
    ```

2.  删除`items.py`，我没有创建任何 Item 类，它仍然有效

3.  在您的管道代码中：

    ```
    class TestPipeline(object):

        def process_item(self, item, spider):
            print item['username'] 
    ```

在我的测试代码中，似乎我`yield`在蜘蛛中的所有内容都将成为 Pipeline 中的项目`process_item`，但产量结果必须是字典，或 Item 对象......就像上面的第一个答案一样。

4.  在settings.py中，我不知道你的整个项目结构，因为这里的路径可能决定你是否会得到输出。我假设'crawler' 是一个文件夹，其中你有另一个名为'spiders' 的文件夹，你的蜘蛛代码在这个'spiders' 文件夹中。您的 pipelines.py 也在“爬虫”文件夹下对我来说，这很有效：

    ```
    BOT_NAME = 'crawler'

    SPIDER_MODULES = ['crawler.spiders']
    NEWSPIDER_MODULE = 'crawler.spiders'

    ROBOTSTXT_OBEY = True
    DOWNLOAD_DELAY = 3

    ITEM_PIPELINES = {
       'crawler.pipelines.ScrapeNewsPipeline': 400,
    } 
    ```

5.  最后，为了运行代码，我使用的是python终端，cd到你有爬虫文件夹的代码文件夹，然后执行

    ```
    scrapy runspider crawler/spiders/my_test_spider.py 
    ```

虽然我的测试代码与你的不是 100% 相同，但希望这可能会有所帮助

# scala - 使用 Scala 和 Jackson-Mapper 反序列化 MongoDB 文档导致 UnrecognizedProperty _id

> ID：13890970
> 
> 赞同：0
> 
> 时间：2012-12-15T09:19:36.723
> 
> 标签：scala, mongodb, jackson

我使用 Jackson 作为映射器在 Scala 中定义了以下类。

```
package models

import play.api.Play.current
import org.codehaus.jackson.annotate.JsonProperty
import net.vz.mongodb.jackson.ObjectId
import play.modules.mongodb.jackson.MongoDB
import reflect.BeanProperty
import scala.collection.JavaConversions._
import net.vz.mongodb.jackson.Id
import org.codehaus.jackson.annotate.JsonIgnoreProperties

case class Team( 
  @BeanProperty @JsonProperty("teamName") var teamName: String,
  @BeanProperty @JsonProperty("logo") var logo: String,
  @BeanProperty @JsonProperty("location") var location: String,
  @BeanProperty @JsonProperty("details") var details: String,
  @BeanProperty @JsonProperty("formOfSport") var formOfSport: String) 

object Team {
  private lazy val db = MongoDB.collection("teams", classOf[Team], classOf[String])

  def save(team: Team) { db.save(team) }

  def getAll(): Iterable[Team] = {
    val teams: Iterable[Team] = db.find()    
    return teams
  }

  def findOneByTeamName(teamName: String): Team = {
    val team: Team = db.find().is("teamName", teamName).first
    return team
  }

} 
```

插入 mongodb 没有问题，并且`_id`会自动为每个文档插入一个。

但现在我想尝试读取（或反序列化）文档，例如通过调用`findOneByTeamName`. 这总是会导致我使用and`UnrecognizedPropertyException for _id.`创建实例。即使有自己的 ObjectId，这也不起作用，并且被区别对待。`Team.apply``Team.unapply``_id``id`

任何人都可以帮助如何获取实例或如何反序列化吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-10T16:40:54.893

我正在使用 play-mongojack。这是我的课。你的对象定义很好。

```
import com.fasterxml.jackson.annotation.JsonProperty
import com.fasterxml.jackson.databind.ObjectMapper
import org.mongojack.{MongoCollection, JacksonDBCollection}
import org.mongojack.ObjectId
import org.mongojack.WriteResult
import com.mongodb.BasicDBObject

import scala.reflect.BeanProperty
import javax.persistence.Id
import javax.persistence.Transient
import java.util.Date
import java.util.List
import java.lang.{ Long => JLong }
import play.mongojack.MongoDBModule
import play.mongojack.MongoDBPlugin
import scala.collection.JavaConversions._
class Event (
  @BeanProperty @JsonProperty("clientMessageId") val clientMessageId: Option[String] = None,
  @BeanProperty @JsonProperty("conversationId") val conversationId: String
  ) {
  @ObjectId @Id @BeanProperty var messageId: String = _ // don't manual set messageId
  @BeanProperty @JsonProperty("uploadedFile") var uploadedFile: Option[(String, String, JLong)] =  None // the upload file(url,name,size)
  @BeanProperty @JsonProperty("createdDate") var createdDate: Date = new Date()
  @BeanProperty @Transient var cmd: Option[(String, String)] =  None // the cmd(cmd,param)

  def createdDateStr() = {
    val format = new java.text.SimpleDateFormat("yyyy-MM-dd HH:mm:ss")
    format.format(createdDate)
  }
} 
```

# c# - 我如何比较两个列表？ 和 索引

> ID：13890977
> 
> 赞同：-1
> 
> 时间：2012-12-15T09:20:46.047
> 
> 标签：c#

这是代码：

```
var numbers =
               lightningsRegions.SelectMany(
          s => Regex.Matches(s, @"\[(\d+)[ -]+(\d+)\]")
               .Cast<Match>()
               .Select(m => m.Groups.Cast<Group>().Skip(1).Select(x => x.Value)
                                                          .ToArray())
               .Select(x => new { start = int.Parse(x[0]), end = int.Parse(x[1]) })
               .SelectMany(x => Enumerable.Range(x.start, x.end - x.start + 1))
        )
       .ToList();

                for (int i = 0; i < list_of_histogramsR.Count ; i++)
                {
                  if (list_of_histogramsR[i] == numbers[i])
                    {

                    }
                } 
```

我将变量数视为索引数。最后数字包含5372个数字。所以 thr 5272 中的每个数字就像一个索引。

现在我有这个`List<long[]> list_of_histogramsR`包含 16595 个索引。我想检查是否有任何数字中的数字`list_of_histogramsR`作为索引号然后做一些事情。

例如，数字中的第一个数字是 41。因此，当 list_of_histogramsR == 的索引号 41 到数字中的数字 41 时，做一些事情。然后对于变量编号中的下一个数字也是如此。

问题是在 IF 行我得到错误：错误 33 运算符'=='不能应用于'long []'和'int'类型的操作数

为什么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T09:23:31.263

您可以使用`Contains`检查列表是否包含特定数字（将 int 转换为 a `long`）：

```
list_of_histogramsR[i].Contains((long)numbers[i]) 
```

# php - Fine Uploader 3.0 上传后获取 php 更改的文件名

> ID：13890981
> 
> 赞同：0
> 
> 时间：2012-12-15T09:21:12.660
> 
> 标签：php, javascript, jquery, ajax

上传后获取文件名我几乎没有问题（用于上传更改名称的 PHP 脚本与我想要的 md5），但是上传程序可以使用从 pc 上传的文件名。我需要从 Ajax 的响应中获取文件名。

任何的想法 ？

PS我用

*   jQuery - 1.8.3
*   精细上传器 - 3.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T09:53:55.897

如果您先将文件保存在服务器上，然后只更改文件名并将它们保存在数据库中，该怎么办？

# php - 将表单变量发送到外部页面并从服务器获取 html

> ID：13890986
> 
> 赞同：0
> 
> 时间：2012-12-15T09:22:10.487
> 
> 标签：php, jquery, ajax, json, jsonp

我不知道这是否可能，我想要的只是从发送到外部页面的表单结果中获取 html 或纯文本。

在这种情况下，我有一个将变量发送到外部服务器的表单，结果发送到 iframe，我如何从 iframe 中检索 html 或文本？这是正确的方法吗？

我试图这样做只是为了简化我的代理机构的重复过程......

```
<form name="form" method="post" action="https://www.externalpage.com" target="iframe">
    <input type="hidden" name="a" value="0000"/>
    <input type="hidden" name="b" value="0001" />
    <input type="hidden" name="c" value="0002" />
  <p>
    <input type="submit" id="button" value="Submit" />
  </p>
</form>
<iframe name="iframe" scrollbars="no"></iframe> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T09:41:42.403

假设您正在使用 jquery 的标签

```
var myresult = $('iframe[name="iframe"]').html(); 
```

应该做的工作。

//编辑：刚刚注意到 iframe 来自外部域，它可能受同源策略的约束，在这种情况下，上面的代码可能不起作用

# java - 迭代归约到空矩阵

> ID：13890987
> 
> 赞同：3
> 
> 时间：2012-12-15T09:22:13.753
> 
> 标签：java, algorithm, optimization, graph, matrix

这就是问题所在：我得到了一个类似的矩阵

输入：

```
1 1 1
1 1 1
1 1 1 
```

在每一步，我都需要找到一个由 1 和 0 组成的“第二个”矩阵，在同一行或同一列上没有两个 1。然后，我将从原始矩阵中减去第二个矩阵。我将重复这个过程，直到我得到一个全为 0 的矩阵。此外，我需要采取尽可能少的步骤。

我需要在 O(n) 时间内打印所有“第二个”矩阵。在上面的示例中，我可以通过按顺序减去这三个矩阵，分 3 步得到空矩阵：

预期输出：

```
1 0 0
0 1 0
0 0 1

0 0 1
1 0 0
0 1 0

0 1 0
0 0 1
1 0 0 
```

我编写了一个尝试，其中我找到了第一个最大值并根据该值的索引创建第二个矩阵。但是对于上述输入，我得到 4 个输出矩阵，这是错误的：

我的输出：

```
1 0 0 
0 1 0 
0 0 1 

0 1 0 
1 0 0 
0 0 0 

0 0 1 
0 0 0 
1 0 0 

0 0 0 
0 0 1 
0 1 0 
```

我的解决方案适用于大多数测试用例，但不适用于上面给出的测试用例。有人可以给我一些关于如何进行的指示，或者找到一种保证最优性的算法吗？

有效的测试用例：

输入：

```
0 2 1
0 0 0
3 0 0 
```

输出

```
0 1 0
0 0 0
1 0 0

0 1 0
0 0 0
1 0 0 

0 0 1
0 0 0
1 0 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T13:53:44.047

每行/列的总和并取其中最大的总和为您提供减少到空矩阵所需的矩阵减法的最佳数量。

* * *

例如：

```
1 2 4 0 = 7
2 2 0 1 = 5
0 0 1 0 = 1
3 0 2 1 = 6
= = = =
6 4 7 2 
```

这意味着该矩阵将需要 7 次最佳减法才能清空。

* * *

我相信从这个倒数并从具有该值的列/行中删除将解决您的问题（我不确定选择这些的有效方法 - 蛮力？）。
您还可以使用以前的方法删除多余的元素。

* * *

例如（使用上面的矩阵）。

第 7 步：
我们**必须**从第 1 行和第 3 列中减去。

```
0 0 1 0
0 0 0 0
0 0 0 0
0 0 0 0 
```

解决了这个问题，所以现在我们可以使用您以前的方法来删除“奖励”元素。

```
0 0 1 0
1 0 0 0
0 0 0 0
0 0 0 1 
```

现在再次应用每行/列的总和并继续下一步。

第 6 步：

```
1 2 3 0 = 6
1 2 0 1 = 4
0 0 1 0 = 1
3 0 2 0 = 5
= = = =
5 4 6 1 
```

下一个减法：

```
0 0 1 0
0 1 0 0
0 0 0 0
1 0 0 0 
```

等等。

* * *

注意：这仍然不适用于“全 1”矩阵，因为您遇到了从每行和每列中选择 1 的问题（与您在示例中所做的相同）。

但是有人可能能够扩展我的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T23:02:08.853

我很确定这是[精确覆盖问题](http://en.wikipedia.org/wiki/Exact_cover_problem)的某种变体，已知它是 NP 完全的。您提出的算法是一个简单的贪心解决方案。贪婪解决方案的问题在于，它们通常运作良好，足以让你相信贪婪是好的，然后突然让你高高在上，寻找更好的解决方案。（例如，考虑全球经济。）无论如何，Knuth 的[Dancing](http://en.wikipedia.org/wiki/Dancing_Links) [Links](http://arxiv.org/pdf/cs/0011047v1.pdf)技术是解决问题的标准方法（精确设置封面，而不是全球经济）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T09:28:53.487

1) If all you want to do is iterate through all the elements in your matrix...

2) then all you have to do is loop `for (int i=0; i < rows*cols; i++) {}` ...

3) And such a loop is *ALREADY* O(n) (i.e. it increases LINEARLY with the #/elements in your matrix)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T09:39:25.077

令行数 = 列数 = N

```
for iteration=1:N
  for row=1:N
      cell(row,(row+iteration)%N) := 0 
```

迭代次数为 N。在每次迭代中，N 个将变为 0

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-15T09:56:23.630

我不完全确定这是否是您所追求的，但您能否创建一个可用列的列表并将它们标记为用于每次迭代。

例如：

```
repeat until an empty matrix
  mark all columns as available
  for each row
    find the maximum value in all available columns and store it's coordinates
    mark that column as unavailable
  print, decrement and clear the list of stored coordinates 
```

* * *

这不起作用，但它确实显示了 user1459032 正在使用的算法。

# java - java访问修饰符

> ID：13890988
> 
> 赞同：2
> 
> 时间：2012-12-15T09:22:19.977
> 
> 标签：java

```
Modifier    Class   Package Subclass    World
public      Y          Y       Y           Y
protected   Y          Y       Y           N
no modifier Y          Y       N           N
private     Y          N       N           N 
```

没有修饰符（默认修饰符）只能从同一个包访问，而不能从子类访问。

如果子类在同一个包中怎么办？子类可以访问它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T09:24:31.257

> 如果子类在同一个包中怎么办？子类可以访问它吗？

是的。“而不是子类”只是“子类不能自动访问它” - 它不像是明确*阻止*子类访问它。

有关详细信息，请参阅[Java 语言规范第 6.6 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.6)。尤其：

> 否则，我们说有默认访问，只有当访问发生在声明类型的包内时才被允许。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T09:24:41.413

> 没有修饰符（默认修饰符）只能从同一个包访问，而不能从子类访问。

是的，它是可访问的，在同一个包中的所有类中都不能访问修饰符（默认修饰符）。

```
 pkg1;
    class CWithDefAccess{
    }

    pkg1;
    public class anotherclass {
       //can access CWithDefAccess as they are in the same package
    }

    pkg1;
    public class Foo extends CWithDefAccess {
    //can access CWithDefAccess as they are in the same package
    }

    pkg1; 
    public class Baz extends anotherClass{
    //can access CWithDefAccess as they are in the same package
    } 
```

# iphone - 标签栏无法使用 iPhone-5 或 Retina 显示屏调整大小

> ID：13890991
> 
> 赞同：0
> 
> 时间：2012-12-15T09:22:48.513
> 
> 标签：iphone, uitabbarcontroller, retina-display, iphone-5, autoresize

![Retina 或 iPhone5 屏幕中的标签栏问题](../Images/6550fcc908b21d9b3f7d5cd2115ce30e.png)

我在 iOS 6 的应用程序中使用了使用故事板的标签栏控制器。

在普通或 iPhone-4 中，屏幕布局很好。但在 iPhone-5 或 Retina 显示器中，我被 Tabbar Controller 布局卡住了..:(

对此有任何具体设置吗？请尽快告诉我解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T11:51:34.723

这段代码至少对我有用。

代码 ：：

```
if ([[UIScreen mainScreen] bounds].size.height == 568)
{
    [view setFrame:CGRectMake(view.frame.origin.x, 519, view.frame.size.width, view.frame.size.height)];
}
else if ([[UIScreen mainScreen] bounds].size.height == 480)
{
    [view setFrame:CGRectMake(view.frame.origin.x, 431, view.frame.size.width, view.frame.size.height)];
} 
```

# html - 找不到网站的 css 文件

> ID：13890992
> 
> 赞同：0
> 
> 时间：2012-12-15T09:22:55.867
> 
> 标签：html, css, django, web

> **可能重复：**
> [在 Django 中包含 css](https://stackoverflow.com/questions/6125661/including-css-in-django)

我对网络前端没有太多经验。

我正在尝试将论坛应用程序集成到 django 中。( [http://www.pybbm.org](http://www.pybbm.org) )

我成功运行了该应用程序（我可以在 看到论坛`http://localhost/forum/`）
但是没有任何 css 看起来很糟糕。

我尝试将我在 www.pybbm.org 中找到的所有内容都包括在内`css files`，`less files`但这似乎无助于让它看起来更好。

任何人都可以看看该网站的css文件在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T10:20:35.940

CSS的缩写是Cascading StyleSheet，所以它负责网站的布局。css 文件可能存储在名为 CSS 或 style 的目录中，有时也存储在主目录中。找到 css 文件的方法是打开 index.html 文件并搜索扩展名为 .css 的文件。您可以在 index.html 文件的开头找到该行文本。当你找到 .css 文件时，你也会看到它的保存位置，比如 /main/style/style.css 问题解决了吗？

# c# - Asp.net ImageUrl 网络表单

> ID：13890993
> 
> 赞同：0
> 
> 时间：2012-12-15T09:22:59.043
> 
> 标签：c#, asp.net, vb.net, webforms, imageurl

这绝对是一个简单的问题，但我仍然不知道它到底是为了什么。谁能告诉我是什么`ImageUrl='<%# Eval("FileName") %>'`意思？我仍然不明白为什么我们需要包含`%#`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T10:09:44.243

在这条线...

```
ImageUrl='<%# Eval("FileName") %>' 
```

ImageURL 您的 asp:ImageButton 控件的属性，用于指定要使用的图像文件的 URL

'<% 和 %>' 标签之间的代码被写入在服务器上执行

'#' 用于指定服务器端执行的结果将被绑定听到

Eval KeyWord 用于评估来自 DataSourse 的特定列值（您指定 ("--hear--")）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T09:30:10.583

`<%# Eval("FileName") %>` is used in the context of binding data from a collection to a control. Probably the value for the imageurl is coming from a property of an object in the collection

For example, `List<Photo>` where `Photo` has a property of `FileName`. If you are binding that to a gridview, a repeater, etc, you'll access that property for each item in the collection when binding to such controls

*   [Asp.net data binding overview](http://support.microsoft.com/kb/307860)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T09:30:21.647

当您使用 , 等模板控件`Repeater`时`GridView`，您实际上是在数据记录列表中进行迭代，`<%# Eval("FileName") %>`这里的意思是给我名为 的列的值`FileName`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-15T09:30:53.757

在这里，我们使用了 Eval 函数，该函数用于单向数据绑定。FileName 是您要关联的字段名称。<%# %> 中写入的任何内容都由 asp.net 引擎解析，然后生成纯客户端脚本和 html 标记的网页源。因此 Eval 函数由 ASP.net 引擎在服务器端执行。

# http - HTTP 接受“级别”？

> ID：13890996
> 
> 赞同：8
> 
> 时间：2012-12-15T09:23:04.503
> 
> 标签：http

我一直在阅读[HTTP/1.1 标头](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.1)和第 14.1 节（接受）中的一些示例标头，它们使用`accept-extension`s （我相信它们就是这样）称为`level=1`,`level=2`等。

我遇到的问题是他们使用这些`level=X`东西就好像他们所做的事情应该是显而易见的。文件只是无法解释它还是我遗漏了什么？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-25T18:16:14.020

# ...几年后

用户 TomWardrop 指出（*从评论到这个答案*）：

> 它曾经是 text/html 媒体类型规范的一部分，用于指示您想要的 HTML 版本，但使用得不多（如果有的话），所以它被删除了。请参阅[ietf.org/rfc/rfc2854.txt](https://www.ietf.org/rfc/rfc2854.txt)。

[来自RFC 的](https://www.ietf.org/rfc/rfc2854.txt)摘录：

> 请注意，[HTML20] 包含一个可选的“级别”参数；实际上，该参数从未使用过，并且已从本规范中删除。[HTML30] 还建议了一个“版本”参数；实际上，该参数也从未使用过，并且已从本规范中删除。

这似乎是迄今为止最好的答案。

我将下面的原始答案留给后代。

* * *

# 概括

[通过查看IETF](https://www.rfc-editor.org/rfc/rfc2616)和[W3C](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)以及 Internet 上其他地方的网站的RFC-2616（征求意见），似乎`level`没有很好地记录或解释该扩展。它似乎也没有被任何人用于标题中，这表明它可能会被忽略。

# RFC

在 RFC 中，该`level`参数出现在一些示例中，但从未提及或明确表达过*它所扮演*的角色。

`level`在有关优先级的示例中使用：

> 媒体范围可以被更具体的媒体范围或特定媒体类型覆盖。如果多个媒体范围适用于给定类型，则最具体的引用具有优先权。例如，
> 
> ```
>  Accept: text/*, text/html, text/html;level=1, */* 
> ```
> 
> 具有以下优先级：
> 
> ```
>  1) text/html;level=1
>     2) text/html
>     3) text/*
>     4) */* 
> ```

***来源：** [IEFT RFC-2616 p.100](https://www.rfc-editor.org/rfc/rfc2616)和[W3C RFC2616 部分“14.1 Accept”](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)*

看到两个示例中类型排序方式之间的差异，它的优先级似乎`text/html;level=1`高于`text/html`，这意味着`level`扩展必须赋予它该优先级。根据下降的特异性，最后两个显然是进一步排序的。

现在这带来了品质因数，`q`。它在 RFC 中得到了很好的解释。它可以是[和](http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.9)[之间`0``1`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.9)的任何东西。值越大，类型的优先级越高。RFC 有一个同时使用`q`和的示例`level`：

> 与给定类型相关联的媒体类型质量因子是通过查找与该类型匹配的具有最高优先级的媒体范围来确定的。例如，
> 
> ```
>  Accept: text/*;q=0.3, text/html;q=0.7, text/html;level=1,
>             text/html;level=2;q=0.4, */*;q=0.5 
> ```
> 
> 将导致关联以下值：
> 
> ```
>  text/html;level=1         = 1
>     text/html                 = 0.7
>     text/plain                = 0.3
>     
>     image/jpeg                = 0.5
>     text/html;level=2         = 0.4
>     text/html;level=3         = 0.7 
> ```

***来源：** [IEFT RFC-2616 p.100](https://www.rfc-editor.org/rfc/rfc2616)和[W3C RFC2616 部分“14.1 Accept”](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)*

由此看来，`level`' 值用于降低优先级（1 具有最高优先级，2 次高，等等）。这是有道理的，但是当与`Accept:`标题一起使用时，它根本没有任何意义：

1.  首先，`q`参数已经从类型中神奇地消失了，在关联中（下图）。就像作者假设它们被省略的原因很明显，但忘记告诉我们为什么很明显。

2.  其次，`Accept:`标头中的类型和关联（如下）中显示的类型不是同一类型。例如，`image/jpeg`标题中从未提及类型，并且`text/*`关联中缺少类型。

我无法解释这一切意味着什么。

# Zend 框架讨论

在[回答有关`level`参数](http://zend-framework-community.634137.n4.nabble.com/HTTP-Accept-header-question-for-Zend-Http-Header-namespace-td4355114.html)的问题时，有一些有趣的东西。

### `q`并`level`互相恭维

> [...] q 因子是最受关注的因子。但是，您也可以指定一个“级别”，这些 CAN 的行为也类似于优先级，但按照优先级递减的顺序进行操作（即，级别 1 的优先级高于级别 2）。他们在规范中的例子是人为的，而且，tbh，充其量是令人困惑的 [...]

`q`参数是你应该使用的，参数`level`是*可以*使用的。好的，但它仍然没有弄清楚它究竟做了什么，以及它应该如何影响类型的优先级。

### 用于支持的类型/规格版本

> “级别”的另一个记录用例是指示类型的_version_。例如，“级别 1”可能表示该规范的第一个可用版本。在这种情况下，它不是优先级，而是一个_descriptor_ [...]

因此，一种指示*支持的类型版本的*方法。现在，这实际上更有意义：

```
text/html;level=5;q=1
text/html;level=4.01;q=0.9
; Etc. 
```

然而，不知何故，我怀疑`level`应该用于此目的。如果是这样的话，它可能会被称为更具描述性的东西，例如`version`，或简单地`v`（例如`q`）。

### 相互矛盾的含义

> 不幸的是，“级别”选择器的含义相互矛盾，所以我不能 100% 确定我们应该默认支持它；另一方面，“q”是有据可查的。

是的。含义冲突，没有很好的记录。该`level`物业几乎没有什么用处。

# 我发现的其他东西

在互联网上的其他地方寻找问题/答案，我发现：

*   一份完全没有提及[的严肃老派文件](http://www.w3.org/Protocols/HTTP/HTRQ_Headers.html#z3)`level`。它实际上提到了另外两个，`mxs`和`mxb`。
*   [Moz Dev 页面](https://developer.mozilla.org/en-US/docs/HTTP/Content_negotiation)列出`Accept`了来自各种浏览器的常见标头。无处`level`使用。事实上，我从未见过它在 RFC 之外使用过。

# 结论

总之，我认为可以肯定地说这`level`是浪费时间。它的文档记录很差，在实践中没有太多使用（如果使用的话），而且它比它的价值更令人困惑。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-14T06:35:01.693

“级别”只是媒体类型参数的一个示例。它不参与计算偏好。

（现在的相关规范是[http://greenbytes.de/tech/webdav/draft-ietf-httpbis-p2-semantics-26.html#header.accept](http://greenbytes.de/tech/webdav/draft-ietf-httpbis-p2-semantics-26.html#header.accept)）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-09-02T06:30:32.187

稍微扩展[Julian Reschke 的正确答案。](https://stackoverflow.com/a/23053440/99717)答案提到了直接来自[规范的](https://www.rfc-editor.org/rfc/rfc7231#section-5.3.2)“媒体类型参数” ：

```
Accept = #( media-range [ accept-params ] )

     media-range    = ( "*/*" / ( type "/" "*" ) / ( type "/" subtype )) *( OWS ";" OWS parameter )
     accept-params  = weight *( accept-ext )
     accept-ext = OWS ";" OWS token [ "=" ( token / quoted-string ) ] 
```

其中[参数](https://www.rfc-editor.org/rfc/rfc7231#section-3.1.1.1)定义为：

```
parameter = token "=" ( token / quoted-string ) 
```

也就是说，一个名称/值对（参见[token](https://www.rfc-editor.org/rfc/rfc7230#section-3.2.6)）。因此，在示例中，“level=1”只是合法“参数”*的*示例。从这个意义上说，它并没有什么特别之处。如果您花时间解析定义的 Backus-Naur，您会发现，在所有示例中，“level=x”**必须是**媒体类型参数。

关于示例*为什么*专门使用“级别”，**我认为HTTP规范示例中的“级别”是指HTML级别**。在所有示例中，level 修改了 text/html 媒体类型。我为 HTML 级别找到的最佳定义是：

“有四个官方级别 [0-4] 或 HTML 一致性版本。每个级别都包含一组标签，更高级别包括来自其以下所有标签的标签。”

[http://scholar.lib.vt.edu/reports/soasis-slides/slide4.html](http://scholar.lib.vt.edu/reports/soasis-slides/slide4.html)

即，如果请求需要 HTML 元素/属性的子集，则可以使用 Accept 来请求较低级别的 HTML。例如，HTML 级别 0 定义了 DOCTYPE 元素，但直到级别 3 才定义“版本”属性；因此 HTML 级别 0-2 将/不应在`<!DOCTYPE>`声明中包含 Version 属性。

[http://www.december.com/html/spec/level0.html](http://www.december.com/html/spec/level0.html)

[http://www.december.com/html/spec/level3.html](http://www.december.com/html/spec/level3.html)

“级别”似乎是 HTML 的一个旧方面/功能。我可以找到很少的引用，没有一个是清楚的（例如，HTML 级别和主要版本之间有区别吗？），而且我能找到的大多数都是旧的。但是，**最新的[Apache httpd 服务器文档](http://httpd.apache.org/docs/2.4/content-negotiation.html)仍然说他们支持内容协商中的“级别”**，并建议它可能与版本同义，至少在那个实现中：

“4.选择具有最高'级别'媒体参数的变体（用于给出文本/html媒体类型的版本）。”

**请注意，[IANA 注册](http://www.iana.org/assignments/media-types/text/html)中心没有提到任何关于“级别”**作为 text/html 参数的内容。如果不出意外，那就是对我说：“不要使用它。”

有趣的是，DOM 规范仍然使用“级别”这个词。

[http://www.w3.org/TR/DOM-Level-2-HTML/](http://www.w3.org/TR/DOM-Level-2-HTML/)

[http://www.w3.org/TR/DOM-Level-3-Core/](http://www.w3.org/TR/DOM-Level-3-Core/)

ETC..

# iphone - 你如何从一个故事板转到另一个故事板？不在情节提要中查看

> ID：13890997
> 
> 赞同：2
> 
> 时间：2012-12-15T09:23:04.723
> 
> 标签：iphone, objective-c, ios, xcode, storyboard

嗨，我创建了两个故事板文件，但我不知道如何在它们之间切换。为了在一个故事板中切换，我设置了标识符并使​​用以下代码：

```
[self performSegueWithIdentifier:@"identifier" sender:self]; 
```

此代码在用于切换情节提要时使应用程序崩溃。

请帮忙

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-15T09:41:17.843

## iOS 9.0 的更新答案

您可以使用情节提要中的情节提要引用将转场的目的地设置为另一个情节提要中的视图控制器。将故事板引用从对象库拖到源故事板。使用目标故事板的名称和该故事板中目标视图控制器的标识符对其进行配置。然后，您可以使用参考作为源故事板中转场的目的地。

有关详细信息，请参阅[*Storyboard 帮助*](https://developer.apple.com/library/prerelease/ios/recipes/xcode_help-IB_storyboard/Chapters/AddSBReference.html)[中的“添加对另一个 Storyboard 的引用”](https://developer.apple.com/library/prerelease/ios/recipes/xcode_help-IB_storyboard/Chapters/AddSBReference.html)*。*

 *## 原始答案

看看[*UIStoryboard 类参考*](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIStoryboard_Class/Reference/Reference.html)。

您可以使用`+[UIStoryboard storyboardWithName:bundle:]`. 拥有故事板对象后，您可以通过发送它`instantiateInitialViewController`或`instantiateViewControllerWithIdentifier:`. 然后你可以用那个视图控制器做任何你想做的事情：以模态方式呈现它，将它推送到导航控制器上，将它添加到标签栏控制器等。

您无法在不同情节提要中的场景之间创建转场，因此您不能使用`performSegueWithIdentifier:sender:`从一个情节提要中的场景过渡到另一个情节提要中的场景。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-15T12:57:59.530

我找到了我自己问题的答案！

这是我的问题的代码：

```
-(void)viewDidLoad {

    if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone) {
        CGSize result = [[UIScreen mainScreen] bounds].size;

        if(result.height == 480){}
        if(result.height == 568){[self performSelector:@selector(inch4) withObject:nil afterDelay:0];}}}

-(void)inch4 {

    UIStoryboard *storyBoard;

    storyBoard = [UIStoryboard storyboardWithName:@"iPhone4inch" bundle:nil];
    UINavigationController *init4inchViewController = [storyBoard instantiateViewControllerWithIdentifier:@"MainMenu4inch"];
    [self presentModalViewController:init4inchViewController animated:NO];

} 
```

这是切换故事板文件的代码：

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"storyboard2" bundle:nil];
[self presentModalViewController:[storyboard instantiateViewControllerWithIdentifier:@"storyboard2initialviewcontroller"] animated:NO]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-17T12:41:13.373

很快，这就像下面一样简单。:)

```
 let sb = UIStoryboard(name: "DestinationStoryboard", bundle: nil)
    let vc = sb.instantiateInitialViewController() {
       present(vc, animated: true, completion: nil)
    } 
```*

# javascript - 为什么 querySelectorAll 在 jsPerf 上使用 data-xyz 工作，但在我的代码中却不行？

> ID：13890999
> 
> 赞同：0
> 
> 时间：2012-12-15T09:23:20.953
> 
> 标签：javascript, jquery, custom-data-attribute, jsperf, selectors-api

我在玩`jsperf`,`querySelectorAll`和`data-xyz`属性。

这是我当前的 jsperf：[jqmData 与属性选择器](http://jsperf.com/jqmdata-vs-attribute-selecotr/4)

关键部分在`js`测试中：

```
document.body.querySelectorAll('data-role') 
```

请注意，我没有使用任何方括号 []，它仍然可以正常运行，并且比所有其他选择器都好。我将它提高到一个页面上的 200 多个数据角色元素，它仍然运行得更快。

[然后我在这里](http://www.franckreich.de/jqm/test.html)尝试了我自己的测试页面（参见 Firebug），唉......当我省略方括号时，nodeList 是空的。

**问题：**
jsperf 使用了什么魔法，所以选择器在那里工作，而不是在我的虚拟网站上工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T09:25:33.663

您的测试不会检查选择器是否实际匹配任何内容。`querySelectorAll`当它知道没有任何`data-role`标签并因此可以立即返回 empty时，获胜也就不足为奇了`NodeList`。:-)

事实上，如果您对每个测试添加检查以确保它确实获得了正确数量的元素，则该测试`querySelectorAll`失败：http: [//jsperf.com/jqmdata-vs-attribute-selecotr/5](http://jsperf.com/jqmdata-vs-attribute-selecotr/5)