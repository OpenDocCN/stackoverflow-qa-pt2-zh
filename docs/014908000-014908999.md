# StackOverflow 问答 14908000-14908999

# php - 会话验证码总是错误的

> ID：14908000
> 
> 赞同：1
> 
> 时间：2013-02-16T07:21:18.570
> 
> 标签：php

这是我使用的验证码的链接[点击这里](http://labs.abeautifulsite.net/simple-php-captcha/)问题是当我发布验证码时，它总是在我进行验证时说它不正确。它总是显示错误消息，因此它无法正确验证我如何使用会话 ['captcha']['code'] 而不会弄乱每个回帖 某些错误，例如回帖后必须更改并且在会话中有所不同但是当我打印（$_SESSION）时，值就在那里，可以输入和匹配验证码。

PHP：都在同一个页面上。

```
<?PHP 
session_start();
$_SESSION['captcha'] = captcha();
$captcha_code = $_POST["captcha_code"];

if(isset($_POST["captcha_code"]) ){
    do verification here //
    if(....) {
        if(strtolower($captcha_code) !=  strtolower($_SESSION["captcha"]["code"])) {                

            $error_message .= "<li>The code you entered is incorrect.</li>";    
            $hasError = true;
        }   
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T12:51:40.603

由于我无法验证 captcha.php 文件的内容 - 我对您的问题无能为力。然而，这是一种可能。

你的 $_SESSION['captcha'] = captcha(); 对我来说似乎不正确{因为我找不到 captcha.php 的来源}。如果它在与发布的表单相同的页面加载上设置会话，那么您如何确定在使用 print_r($_SESSION) 调用时设置的不是不同的验证码会话？如果你明白我的意思。在您的 captcha() 函数（captcha.php 文件）中，是否也在此处设置会话，而不确认虚假帖子？因此，更改 $_POST 的页面加载？换句话说 - 它是否确保在验证用户输入之前发布表单时它不会“重置”。

captcha.php 代码在哪里？

此外，您似乎缺少 include("captcha.php"); 在 session_start() 之后；称呼。那可能是你的问题。但是，无法确认。

# ios - 我的 bundel ID 与配置应用 ID 完全匹配。为什么它不起作用？

> ID：14908002
> 
> 赞同：0
> 
> 时间：2013-02-16T07:21:28.770
> 
> 标签：ios, iphone, sdk, ios6

我得到类似的东西：

代码签名错误：找不到与应用程序标识符“bundleID”匹配的有效配置文件

其中 bundleID 完全等于提供的 AppID。

为什么它不起作用？

我已经阅读了其他各种问题，但没有解决方案。代表苹果公司很烦人。

编辑：我检查了三次。配置文件的“App ID”字段与 Xcode 中项目摘要顶部的“Bunde Identifier”字段完美匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T07:30:08.093

*   使用创建的配置文件交叉检查 appId
*   **您可以使用textedit**打开配置文件并检查它包含的 appId 是否与您提供的相同
*   从组织者**中删除当前配置文件后，**下载并安装配置文件
*   目标>构建设置>代码签名身份调试和发布更改为当前配置文件

**更新：** 使包/标识符只是“QtAnimatedTiles”然后您将看到代码签名标识中的选项设置并运行:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T07:45:39.140

在目标的构建设置中，选中“代码签名身份”。如果它有多个条目，请为所有条目选择适当的临时配置文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T08:14:58.583

请检查以下几点：

1-> 您是否选择了正确的 AP ID 来创建临时配置文件？

2-> 再次匹配捆绑标识符。

3-> 再次创建配置文件以及应用程序 ID。

# php - 选择由 jquery 和 $_POST 同时填充的标签

> ID：14908003
> 
> 赞同：0
> 
> 时间：2013-02-16T07:21:29.067
> 
> 标签：php, jquery, codeigniter

我有一个选择标签，它的选项由 jquery 预先填充，并带有对页面数据库 onload 的 ajax 调用。但是，可以有另一个选项，其中在 select 选项中的 HTML 端有这样的东西。

```
<select id="brandList" name="brand">
     <?php                      
      if(isset($reference_shirt['brand']))
    {
    echo '
     <option>' . $reference_shirt['brand'] . '</option>
      ';
    }
    ?>
 </select> 
```

但是 php 部分不起作用。如何确定先加载哪个？还是我可以设置一个变量来做到这一点？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T08:13:49.133

要在 CI 中使用 PHP 加载值，您必须将来自控制器的值传递为：

```
$this->load->view->('view_name',$arrValues); 
```

和数组应该是这样的：

```
 $arrValues['reference_shirt']=array('brand'=>$val); 
```

然后只有您可以访问视图中的这些值。

在视图中获取值后，创建一个隐藏字段，例如：

```
<input type="hidden" id="brand" value="<?php echo isset($reference_shirt['brand']))? $reference_shirt['brand']:''?>"> 
```

现在使用 Jquery，您可以检查品牌是否具有价值：

```
 if($("#brand").val()==''){
    //Load values using ajax
 } 
```

这样！

希望对您有所帮助！

# lifecycle - 客户端可以显式销毁无状态会话 bean 吗？

> ID：14908004
> 
> 赞同：1
> 
> 时间：2013-02-16T07:21:30.923
> 
> 标签：lifecycle, stateless-session-bean

ejb 容器控制 bean 的生命周期，通常客户端不需要关心 bean 的生命周期。但我仍然想知道是否有办法从 Method-Ready-Pool 中显式删除/销毁无状态会话 bean 实例？

对于有状态会话 bean，我们可以调用一个注解 @remove 的方法来删除该有状态会话 bean。但它不适用于无状态会话 bean。

# exception - AxWindowsMediaPlayer 播放歌曲

> ID：14908005
> 
> 赞同：0
> 
> 时间：2013-02-16T07:21:46.460
> 
> 标签：exception, audio, visual-studio-2012, axwindowsmediaplayer

我可以帮忙用 AxWindowsMediaPlayer 播放音频文件吗？

我正在使用 Visual Basic.net 2012 Ultimate。

这是我的代码：

```
Imports AxWMPLib

Public Class Form1

Public WithEvents MediaPlayerObject As AxWindowsMediaPlayer = New AxWindowsMediaPlayer

Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
    MediaPlayerObject = New AxWindowsMediaPlayer
    MediaPlayerObject.Ctlenabled = True
    MediaPlayerObject.URL = "C:\Users\Simon\Music\Music\CanLucidDream\108761__soundbytez__birds-late-morning.wav"
    MediaPlayerObject.Ctlcontrols.play()
End Sub 
```

结束类

尝试访问任何对象属性或方法时出现以下错误：

> AxInterop.WMPLib.dll 中出现“System.Windows.Forms.AxHost.InvalidActiveXStateException”类型的未处理异常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-08T21:57:36.173

你需要注意的是

```
-MediaPlayerObject.URL = "C:\Users\Simon\Music\Music\CanLucidDream\108761__soundbytez__birds-late-morning.wav"- 
```

应该是这样的；

```
MediaPlayerObject.URL = "C:\\\Users\\\Simon\\\Music\\\Music\\\CanLucidDream\\\108761__soundbytez__birds-late-morning.wav" 
```

或像这样；

```
MediaPlayerObject.URL = @"C:\Users\Simon\Music\Music\CanLucidDream\108761__soundbytez__birds-late-morning.wav" 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-20T20:32:40.660

在使用任何属性或方法之前，您需要调用 BeginInit() 和 EndInit()。

```
MediaPlayerObject.BeginInit()
MediaPlayerObject.EndInit()
MediaPlayerObject.CtlEnabled = True 
```

# c# - 在字段上调用方法

> ID：14908007
> 
> 赞同：0
> 
> 时间：2013-02-16T07:22:00.910
> 
> 标签：c#, reflection.emit, il

我只是好奇如何使用`Emit`.

我生成了这个类

```
public class AClass : IDynamicProxyTestInterface
{
    private DynamicProxy<IDynamicProxyTestInterface> proxy;
    public AClass(DynamicProxy<IDynamicProxyTestInterface> p)
    {
        proxy = p;
    }

    public void Hello()
    {
        // Here I want to do the following
        Int32 code = 123456;
        proxy.HandleCall(code);
    }
} 
```

评论部分是我一直在努力弄清楚的。

我有这个代码（注释掉的东西是我一直在打开和关闭的东西，试图让它工作）

```
var methodBuilder = typeBuilder.DefineMethod(
    methodInfo.Name,
    MethodAttributes.Public | MethodAttributes.Virtual,
    methodInfo.ReturnType, 
    methodInfo.GetParameters().Select(p => p.GetType()).ToArray()
    );
var methodIlGen = methodBuilder.GetILGenerator();

// Add proxy call to method
var emptyAction = new DynamicProxyOnBuilder();
ProxyCalls.Add(methodInfo.GetHashCode(), emptyAction);

// Drop method info hash into local variable 0
//var hash = methodInfo.GetHashCode();
//methodIlGen.Emit(OpCodes.Ldc_I4, hash);
//methodIlGen.DeclareLocal(typeof(Int32), false);
//methodIlGen.Emit(OpCodes.Stloc_0);

// Create local variable for instance of this DynamicProxy
methodIlGen.Emit(OpCodes.Ldarg_0);
methodIlGen.Emit(OpCodes.Ldflda, proxyField);
var var2 = methodIlGen.DeclareLocal(this.GetType());
methodIlGen.Emit(OpCodes.Stloc,var2);
////methodIlGen.EmitWriteLine(proxyField);
////methodIlGen.Emit(OpCodes.St);
//methodIlGen.Emit(OpCodes.Ldloc,var2);
methodIlGen.Emit(OpCodes.Call, this.GetType().GetMethods().First(x => x.Name == "HandleCall")); 
```

有什么想法我在这里做错了吗？

`Common Language Runtime detected an invalid program.`顺便说一句，我得到的错误是 `JIT Compiler encountered an internal limitation.`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T10:51:40.920

通常在这种情况下最好的办法是用 c# 编写代码，编译它，然后检查编译后的 IL。

在您的情况下，尽管您缺少的主要内容是您的方法必须以“ret”指令结束，并且 HandleCall 应该是虚拟的。所以你只需要（假设 HandleCall 有一个 void 返回类型）

```
Ldflda [proxyField]   // push the this pointer
Ldc_I4 123            // push the argument
Callvirt [HandleCode] // call the method
Ret                   // return 
```

# c# - linq2sql 事务范围超时

> ID：14908009
> 
> 赞同：0
> 
> 时间：2013-02-16T07:22:07.993
> 
> 标签：c#, transactionscope, timeoutexception

我在一个函数中添加了一个事务范围，该函数每晚都会清除一些表并添加新项目。

我收到以下错误的问题：

内部异常：事务超时 事务已中止。

这项工作大约需要 12 分钟才能完成，在添加事务处理后，我现在每次运行该函数时都会收到此错误。

我的代码：

```
 XalSqlDataContext db = new XalSqlDataContext();
        db.CommandTimeout = 3600;

        TransactionOptions options = new TransactionOptions();
        options.IsolationLevel = System.Transactions.IsolationLevel.ReadCommitted;
        options.Timeout = new TimeSpan(0, 40, 0);

        using (TransactionScope txScope = new TransactionScope(TransactionScopeOption.Required, options))
        {
           //my code
        } 
```

但我仍然得到超时。

我的 ms sql 问题的任何线索。

我能够在没有任何帮助的情况下将 .net 2.0 的机器配置中的事务超时更改为一小时。

我的代码在 .net 3.5 下运行，但我的 .net 3.5 文件夹下没有 machine.config 文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T07:30:10.527

**TransactionManager**有一个最大超时。检查 machine.config。我认为即使您将数据上下文的超时设置为高于最大值，它也会被忽略，并且将使用 machine.config 值，因此您需要调整 machine.config 文件。

[http://msdn.microsoft.com/en-us/library/system.transactions.transactionmanager.maximumtimeout.aspx](http://msdn.microsoft.com/en-us/library/system.transactions.transactionmanager.maximumtimeout.aspx)

# java - 三维数组

> ID：14908010
> 
> 赞同：2
> 
> 时间：2013-02-16T07:22:11.143
> 
> 标签：java, multidimensional-array

我想将图像像素存储在一个三维数组中，我做了：

```
public class ImageProcessing {
    private BufferedImage image;
    int p = image.getWidth();
    int q = image.getHeight();
    int r = 3;
    private int[][][] data = new int[p][q][r]; 
```

然后我从该图像中获取像素值并将其存储到该数组中，然后按如下方式创建构造函数：

```
public ImageProcessing(BufferedImage img){
        image = img;
        for(int x = 0; x < image.getWidth(); x++){
            for(int y = 0; y < image.getHeight(); y++){
                int px = image.getRGB(x,y);
                int alpha = (px >> 24) & 0xFF;
                int red = (px >> 16) & 0xFF;
                int green = (px >> 8) & 0xFF;
                int blue = px & 0xFF;
                data[x][y][0] = alpha;
                data[x][y][1] = red;
                data[x][y][2] = green;
                data[x][y][3] = blue;
            }
        }
    } 
```

然后我想检索它以将图像转换为灰度，如下所示：

```
public BufferedImage greyscale(){   
        for(int x = 0; x < p ; x++){
            for(int y = 0; y < q ; y++){
                int avg = (data[x][y][1] + data[x][y][2] + data[x][y][3]/3);
                int grey = (data[x][y][0]<<24) + (avg<<16) + (avg<<8) + avg;
                image.setRGB(x, y, grey);
            }
        }
        return image;
    } 
```

但是当我运行它时，我显示如下错误我不知道它是什么意思以及如何解决它？

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at ImageProcessing.<init>(ImageProcessing.java:6)
    at Main$1.run(Main.java:14)
    at java.awt.event.InvocationEvent.dispatch(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$000(Unknown Source)
    at java.awt.EventQueue$1.run(Unknown Source)
    at java.awt.EventQueue$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source) 
```

如何解决？任何想法 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T07:38:08.920

显然，这将是因为，

```
 private BufferedImage image;       // had not initialized image
    int p = image.getWidth();          // will be null
    int q = image.getHeight();         // same here
    int r = 3;
    private int[][][] data = new int[p][q][r]; 
```

你还没有初始化`BufferedImage image`所以，它当前会指向null，当你初始化`p = image.getWidth();`and 时`int q = image.getHeight();`，没有任何值，所以

`private int[][][] data = new int[p][q][r];`

上述语句将抛出`NE`.

您应该只在 Class 中声明数组，并且应该在您的类的构造函数中使用 initializing 对其进行初始化`image`。

* * *

编辑：

查看下面的代码，它初始化`BufferedImage`然后做同样的事情，它的工作正常！！

```
public class ArrayInitialize {
    public static void main(String ar[]){
        File file = new File("Image.jpg");
        BufferedImage img = new BufferedImage(240, 240, BufferedImage.TYPE_INT_ARGB);
        try {
            img = ImageIO.read(file);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        int p = img.getWidth();          // will be null
        int q = img.getHeight();         // same here
        int r = 3;
        int count = 0;
        int[][][] data = new int[p][q][r];
        for(int i=0;i<p;i++){
            for(int j=0;j<q;j++){
                for(int k=0;k<r;k++){
                    count++;
                }
            }
        }
        System.out.println(count);
    }
} 
```

我认为，在初始化`BufferedImage`if 你得到一个`NullPointerException`then 之后，你的方法有一些问题`getImage()`，可能是它不能正常工作。

并查看评论

> int r=3 应该是 int r=4 不是吗。每种颜色有 4 个成分。

# php - Pear Mail，无法将发件人设置为错误

> ID：14908013
> 
> 赞同：1
> 
> 时间：2013-02-16T07:22:20.633
> 
> 标签：php, email, gmail, pear

我安装了 Pear Mail，并在尝试发送邮件时收到以下错误。网上搜了下，没有答案，不知道是怎么回事？嗨，我安装了 Pear Mail，在尝试发送邮件时收到以下错误。网上搜了下，没有答案，不知道是怎么回事？

```
unable to set sender to [me@gmail.com] 
```

代码：

```
 <?php

    // Include the Mail package
   require "Mail.php";

   // Identify the sender, recipient, mail subject, and body
   $sender    = "me@gmail.com";
   $recipient = "jason@example.com";
   $subject   = "Thank you for your email!";
   $body      = "I'll get back to you as soon as I can!";

   // Identify the mail server, username, password, and port
   $server   = "ssl://smtp.gmail.com";
   $username = "me@gmail.com";
   $password = "supersecret";
   $port     = "465";

   // Set up the mail headers
   $headers = array(
      "From"    => $sender,
      "To"      => $recipient,
      "Subject" => $subject
   );

   // Configure the mailer mechanism
   $smtp = Mail::factory("smtp",
      array(
        "host"     => $server,
        "username" => $username,
        "password" => $password,
        "auth"     => true,
        "port"     => 465
      )
   );

   // Send the message
   $mail = $smtp->send($recipient, $headers, $body);

   if (PEAR::isError($mail)) {
      echo ($mail->getMessage());
   }

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-10T15:38:38.033

这是一个很长的镜头，但我想你已经设置了自己的 gmail 帐户。否则您将无法冒充 me@gmail.com

# java - 解析字符串并获取字符数的 Java 程序

> ID：14908015
> 
> 赞同：-4
> 
> 时间：2013-02-16T07:22:44.757
> 
> 标签：java, string, parsing

我应该编写一个程序来解析分子并获取原子数。像这样：C6H12OH 和输出应该是`C=6, O=1, H=13`

这是我到目前为止写的代码：

```
class ParseMolecule 
{ 
    public static void main(String s[])
    {
        System.out.println("The atoms count in the molecule C6H12OH is :" + getElementsMap("C6H12OH"));
    }

    public static Map<String, Integer> getElementsMap(String molecule) 
    {
        for(char c : molecule.toCharArray())
        {
            System.out.println(c);
        }
    }
} 
```

这不是我的作业或任何东西。我刚刚在一个网站上找到了这个，我试图弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T08:04:28.950

您可以从以下内容开始（仅适用于由单个字符表示的元素）：

```
 String input = "C6H12OH";
   Pattern p = Pattern.compile("([A-Z])([0-9]*)");
   Matcher m = p.matcher(input);
   Map <Character, Integer> atoms = new HashMap<Character, Integer>();
   while (m.find()) {
       Character element = m.group(1).charAt(0);
       Integer count =  Integer.parseInt(m.group(2).equals("") ? "1" : m.group(2));
       atoms.put(element, count + (atoms.get(element) == null ? 0 : atoms.get(element)));
   }
   System.out.println(atoms); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T16:49:38.443

伪代码：

```
char last = 0
for (char c: input)
  if (!isDecimal(c))
    if (count == 0) // no number between 2 characters
      count = 1
    map[last] += count
    last = c
    count = 0
  else
    count = count*10 + charToInt(c)
    last = 0 
```

# design-patterns - C# 创建模式推荐

> ID：14908020
> 
> 赞同：0
> 
> 时间：2013-02-16T07:24:22.897
> 
> 标签：design-patterns

假设我有一堂课

```
 public class Widget
    {
        public int PropA { get; set; }
        public int PropB { get; set; }
        public int PropC { get; set; }
    } 
```

我有一个方法

```
 public Widget CreateWidget(int propA, int propB, int propC)
    {
        Widget w = new Widget();
        w.PropA = propa;
        w.PropB = propB;
        w.PropC = propC;
        return w;
    } 
```

现在，我知道，随着时间的推移，小部件总是会获得更多的属性。您能否推荐一种模式，使我不必在每次 Widget 对象更改时返回并修改 CreateWidget 方法，或者至少使其更易于维护？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T09:26:22.400

您可能需要考虑构建器模式。可以在[这里](http://sourcemaking.com/design_patterns/builder)找到一个体面的解释。

# python - 通过整数的连续性分隔列表

> ID：14908021
> 
> 赞同：0
> 
> 时间：2013-02-16T07:24:23.920
> 
> 标签：python, list, math, tuples, signal-processing

我想知道是否有人可以帮助我找出一种从某些 xy 数据集中获取与峰值相关的 x 索引的好方法。我知道 d2y/dx2<0 和 dy/dx=0 表示 x 处的峰值中心。拐点在 d2y/dx2=0 和 |dy/dx|>0。但我想将数据从拐点到拐点作为一个列表。（所以列表列表，因为我需要得到几个峰）

所以，我也能够为拐点到拐点的值列表提出这个：

```
inflection_indices = [x for x in list( np.where( dY2dX2 < 0.0 )[0] )] 
```

但是，这只是给了我一个所有峰的列表。

我想要一个列表列表，其中整个列表的每个元素都是一个单独的峰值。

像这样：[14,15,16,17,18,19,20,89,90,91,92,93,94,204,205,206,207]

当我想要这个时：[[14,15,16,17,18,19,20]，[89,90,91,92,93,94]，[204,205,206,207]]

感谢您对此的任何帮助，我将不胜感激。

**编辑：**我完全删除了所有元组等，所以我可以稍后添加它们，我认为这个问题现在更成为问题的核心。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T23:17:23.123

我想我找到了答案，但它根本不是很优雅......

```
self.list_of_peak_indeces = [x for x in list(np.where(self.dY2dX2 < 0.0)[0])]
temp_list = []
self.main_lists_of_peak_indices = []
difference_between_indices = np.hstack([np.diff(self.list_of_peak_indeces), np.diff(self.list_of_peak_indeces)[-1]+1])
    for index, item in enumerate(self.list_of_peak_indeces):
        if(np.absolute(difference_between_indices[index])!=1):
            if(temp_list!=[]):
                temp_list.append(item)
                self.main_lists_of_peak_indices.append(temp_list)
            temp_list = []
        else:
            temp_list.append(item) 
```

# sql-server-2008-r2 - 动态 Where 子句：没有得到输出

> ID：14908027
> 
> 赞同：0
> 
> 时间：2013-02-16T07:25:03.343
> 
> 标签：sql-server-2008-r2, dynamic-sql

我在它的语句中创建了一个动态`WHERE`子句它已成功创建，但我得到的输出为 0。有什么想法我错了吗？`SELECT``Stored Procedure``SQL SERVER 2008-R2.`

这是我的SP：

```
CREATE PROCEDURE [dbo].[SPData]
@Id int = NULL,
@Requester varchar(20) = NULL,
@Suggester varchar(20) = NULL
AS
BEGIN
DECLARE @sql nvarchar(4000)
SELECT @sql=' [Id], [Suggester], [Requester] from CRM.dbo.Request_Table WHERE 1=1 '
If (@Id) IS NOT NULL
        SELECT @sql=@sql + ' AND Id=(@Id) '
If (@Suggester) IS NOT NULL
        SELECT @sql=@sql + ' AND Suggester like (@Suggester) '
If (@Requester) IS NOT NULL
        SELECT @sql=@sql + ' AND Requester like (@Requester) '
END
GO 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T08:42:01.840

> 任何想法我错了？

构建动态 SQL 后，您还必须使用[sp_executesql](http://msdn.microsoft.com/en-us/library/ms188001%28v=sql.105%29.aspx)执行它。

我相信这会让你感兴趣。[T-SQL 中的动态搜索条件](http://www.sommarskog.se/dyn-search-2008.html)

```
ALTER PROCEDURE [dbo].[SPData]
@Id int = NULL,
@Requester varchar(20) = NULL,
@Suggester varchar(20) = NULL
AS
BEGIN
DECLARE @sql nvarchar(4000)
SELECT @sql='SELECT [Id], [Suggester], [Requester] from CRM.dbo.Request_Table WHERE 1=1 '
If (@Id) IS NOT NULL
        SELECT @sql=@sql + ' AND Id=(@Id) '
If (@Suggester) IS NOT NULL
        SELECT @sql=@sql + ' AND Suggester like (@Suggester) '
If (@Requester) IS NOT NULL
        SELECT @sql=@sql + ' AND Requester like (@Requester) '

EXEC sp_executesql @sql, 
                   N'@id int, @Requester varchar(20), @Suggester varchar(20)', 
                   @Id, @Requester, @Suggester

END 
```

# java - Html Parser 标记类访问

> ID：14908031
> 
> 赞同：0
> 
> 时间：2013-02-16T07:25:19.933
> 
> 标签：java, javascript, html, html-parsing

我想在 html 代码中访问一个类

```
<id="main" class="cop">
<div class="body">
  <table class="" summary="">
     <colgroup class="game_title">//1
 <col class="thumb">
 <col class="game_title">//2
 </colgroup>

<tbody class="">
     <tr class="game">
 <td class="thumb">
 <a rel="nofollow" href=""><img src="" alt="Grudger thumbnail"></a>
 </td>
 <td class="game_title">//3

 **<div class=**"game_title"**><a href="">Grudger</a></div>//I want to access this class only** 
```

我使用代码作为

```
Element INFORM = source.getElementById("main").getAllElementByclass("game_title"); 
```

用于访问`game_title`具有元素 Gruger 的类，但此代码无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T07:31:22.397

试试 JQuery 类[选择器](http://api.jquery.com/class-selector/)

或使用 JavaScript 尝试 document.getElementsByClassName('game_title')

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T07:28:43.073

尝试这个

```
<script type="text/javascript">

   $(document).ready(function($){
      $result = $(#main .game_title).html();
   });

</script> 
```

# c - C prog - 用户输入输入时需要检查字符串的一部分

> ID：14908035
> 
> 赞同：0
> 
> 时间：2013-02-16T07:26:01.437
> 
> 标签：c, string, input, sequence

我正在尝试编写一个程序，在该程序中，我需要在运行时从用户那里获取输入时检查何时按下了一系列字符。我不知道该怎么做。例如，我的字符序列（关键字）：

```
togo 
```

我的意见是：

```
iamreadytogohome 
```

一旦我写“togo”，我的标志变量应该从 0 变为 1。我不应该按 enter 然后检查输入字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T08:03:39.257

POSIX assumed - you can use the standard terminal control interface declared in `<termios.h>` (error checking omitted for clarity):

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <termios.h>
#include <unistd.h>

static void init_getc_unbuf()
{
    struct termios term = { 0 };
    tcgetattr(0, &term);

    term.c_lflag &= ~ICANON;
    term.c_cc[VMIN] = 1;
    term.c_cc[VTIME] = 0;
    tcsetattr(0, TCSANOW, &term);
}

int getc_unbuf()
{
    char c;
    static int initted = 0;
    if (!initted) {
        init_getc_unbuf();
        initted = 1;
    }

    read(STDIN_FILENO, &c, 1);
    return c;
}

int main(int argc, char *argv[])
{
    char line[128];
    char buf[128] = { 0 };
    char *p = buf;

    printf("Enter string to search for:\n");
    fgets(line, sizeof(line), stdin);
    char *nl = strchr(line, '\n');
    if (nl != NULL) *nl = 0;

    printf("Now start typing:\n");

    do {
        *p++ = getc_unbuf();
    } while(strstr(buf, line) == NULL);

    printf("\nThe string you are searching for has been entered.\n");
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T08:05:19.260

对于 Windows，您可以执行以下操作：

```
#include <stdio.h>
#include <conio.h>

int main()
{
    char c;
    int flag=0,state=0;

    while(flag == 0)
    {
        c = getch();
        if(state==0 && c=='t') state = 1;
        else if(state==1 && c=='o') state = 2;
        else if(state==2 && c=='g') state = 3;
        else if(state==3 && c=='o') flag = 1;
        else state = 0;
    }
    printf("togo entered");

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T07:56:52.250

您可能实现“在用户键入时进行检查”的唯一方法是使用“原始”输入法。不幸的是，这很重要，并且取决于您运行的实际系统 - Windows 和 Linux 完全不同，如果您使用的是 MacOS 或 Solaris，则与 Linux 略有不同。

“原始”输入的原理是关闭行编辑和缓冲，应用程序将在输入时获取每个字符，而不是“熟”模式，即数据保存在缓冲区中，直到用户点击回车.

我敢肯定，谷歌搜索会让您找到如何在您的操作系统上执行此操作 - 搜索“如何在不输入 -insert-OS-here 的情况下读取输入”应该可以做到。

但是请注意，您很可能必须处理所有行编辑 - 例如，按退格键只会将“退格键”发送到您的程序，而不是删除最后输入的字符。退格键是我的“最热门键”之一...

然后，您所需要的只是一个状态机来跟踪您在 , 和 的序列中的位置，`t`并在您点击after时设置一个标志。如果这些字符之间有其他东西，显然状态机需要重新启动。`o``g``o``o``g`

# javascript - 将函数表达式传递给带有变量的 new Function()

> ID：14908036
> 
> 赞同：0
> 
> 时间：2013-02-16T07:26:06.597
> 
> 标签：javascript, function

这是有史以来最令人困惑的事情。标题可能没有多大意义。我尽力了。希望我能清楚。好的，我正在查看来自谷歌频道 api 的井字游戏示例。

在javascript部分。

他们有这样的东西；

```
sendMessage = function(param) {
  alert(param);
  //this part actually sends message to server, 
  //for simplicity lets assume it pops up alert.    
  }

init = function(){
  var input = 3;
  var submitButton = document.getElementById('submitButton');
  submitButton.onclick = new Function('sendMessage(' + input + ')');
}

setTimeout(init, 100); 
```

这会弹出一个警报并打印 3。我不确定它是如何工作的。但它有效。如果有人能解释这一点，那也太好了。我在其他任何地方都找不到像这样使用 new Function() 的地方。

问题是，如果输入是一个字符串，

```
var input = "test"; 
```

这不起作用，并且没有弹出警报。

感谢您的任何解释和帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T07:39:37.720

`Function`构造函数通过将`eval`其参数作为函数体来工作。

```
... = new Function('sendMessage(' + input + ')'); 
```

类似于

```
... = eval("function(){sendMessage("+input+")}"; 
```

对于 numeric `input`s，这是可行的，因为它们的文本表示作为数字文字工作。对于文本输入，它没有。通过做可以获得有限的支持

```
... = new Function('sendMessage("'+input+'")'); 
```

更通用的方法是使用

```
... = new Function('sendMessage("'+JSON.stringify(input)+'")'); 
```

但是，我建议使用立即调用的函数表达式 (IIFE) 来避免`eval`对对象的任何形式和依赖`JSON`，这在非常旧的浏览器中不存在 (IE<8)：

```
... = (function(input){
  return function(){
    sendMessage(input)
  }
})(input) 
```

或者，如果`input`变量没有改变，你不需要捕获它的值：

```
... = function(){ sendMessage(input) } 
```

或者，如果你不在`this`sendMessage 内部使用，你可以使用`bind`（IE8 需要 shimming）：

```
... = sendMessage.bind(undefined, input) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T07:28:54.507

当输入为字符串时，函数调用变为：

```
sendMessage(string) 
```

这实际上应该是：

`sendMessage("string")`或者 `sendMessage('string')`

```
sendMessage = function(param) {
  alert(param);   
  }

init = function(){
  var input = '"string"';
  var submitButton = document.getElementById('submitButton');
  submitButton.onclick = new Function('sendMessage(' + input + ')');
}

setTimeout(init, 100); 
```

这是[小提琴](http://jsfiddle.net/xUeLn/)，看看你如何使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T07:37:56.387

函数的参数被评估..也就是说它被执行了。这就是它起作用的原因。

当您传递一个字符串时，它不起作用仅仅是因为您传递的该字符串将被视为对象或变量而不是字符串。我们都知道它不存在。

IE

这有效：

```
submitButton.onclick = new Function('sendMessage(3)'); 
```

这不会：

```
submitButton.onclick = new Function('sendMessage(test)'); //because test does not exist 
```

但这会

```
submitButton.onclick = new Function('sendMessage("test")'); 
```

因此，如果您将代码更改为：

```
submitButton.onclick = new Function('sendMessage("' + input + '")'); 
```

那么一切都很好

# android - 从android sqlite中的另一个表中设置特定行的所有列

> ID：14908038
> 
> 赞同：0
> 
> 时间：2013-02-16T07:26:21.400
> 
> 标签：android, sqlite

我有两个具有相同数据结构的表。一张表被更新，`server`另一张被更新`locally`。例如，如果`server_table`先更新，我想更新`local_table`. 对此的 sqlite 语句是什么？我搜索了它，但得到了 Insert 语句。更新的声明是什么？这会影响我的主键吗`"_id"`？因为我使用它来填充`listviews`

问候，帕尔瓦兹·巴斯卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T07:42:50.590

在您的字段上创建唯一键，然后在更新时使用 for`INSERT OR REPLACE INTO`语句。您需要在至少一列上具有唯一索引。

如果不存在，INSERT 将插入记录，如果存在，则 REPLACE 将更新。

[也请参考这个链接。](http://sqlite.org/lang_conflict.html)

# gwt - GWT LayoutPanel 冻结超链接

> ID：14908040
> 
> 赞同：0
> 
> 时间：2013-02-16T07:26:35.790
> 
> 标签：gwt

我是 GWT 的新手。

我有一个包含多个组件的复杂页面。我正在为我的项目使用 MVP 和 UiBinder。
我的问题是页面中的超链接（面包屑）现在不起作用，就好像它们只是文本一样。

我检查得很好，在演示者/事件处理等方面没有问题。在我看来这是一个设计问题。我无法弄清楚。

你们能帮帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-16T10:01:04.883

根据您的架构，有两种解决方案：

A）您正在使用 Places/Activity：在这种情况下，请继续使用 HyperLink 小部件，但添加 TargetHistoryToken 属性由于未给出项目模块，我只能猜测标记未完成，您应该添加 .gwt-Hyperlink { } 到你的 CSS。

B）您没有使用 Places/Activity：使用 Anchor 并设置 href 属性

# javascript - 在选择表格行中的单选按钮时，应更改行的颜色

> ID：14908046
> 
> 赞同：0
> 
> 时间：2013-02-16T07:27:09.237
> 
> 标签：javascript, html, struts

我正在使用 struts 1.3.8 和 hibernate 开发员工注册模块。我需要显示一个动态生成的表格以显示所有注册请求。

我的要求是...

> 在包含特定员工的所有详细信息的每一行中，有 2 个单选按钮用于批准*和*拒绝。如果单击行（除单选按钮外的任何位置），整行的颜色应为粉红色。如果单击*拒绝*单选按钮，则整行的颜色应变为红色，单击*批准*单选按钮时，行颜色应为绿色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T07:37:58.850

您可以像这样为每一行分配一个行ID

```
<tr id="row1"><td>YOUR CONTENT HERE</td></tr> 
```

在单选按钮选择事件上，将以下函数调用为`changeColor(this.id)`

```
function changeColor(id)
{
//and now on the click of approve button, do this is javascript function:

    document.getElementById(id).setAttribute("style","background-color:green");

//and similarly, on reject:

    document.getElementById(id).setAttribute("style","background-color:red");
} 
```

我希望你明白这个想法...

# visual-studio - 在 Visual Studio 中是否有重新格式化段落行的工具？

> ID：14908050
> 
> 赞同：1
> 
> 时间：2013-02-16T07:28:04.867
> 
> 标签：visual-studio

如今，大多数文本编辑器都包含一个名为 Wrap Lines 或 Reformat Paragraph 的功能或类似的功能，可让您突出显示文本块并重新格式化每行，使其以任意指定的长度换行。据我所知，Visual Studio RTM 中没有类似的东西，但有没有添加它的扩展？我无法通过谷歌找到任何东西。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T07:31:17.863

在 VS Professional（或更高版本）中，编辑 -> 高级 -> 自动换行。

这至少可以追溯到 VS 9（又名 VS 2008）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T10:21:51.813

ReSharper，可以格式化换行

[http://www.jetbrains.com/resharper/features/code_formatting.html](http://www.jetbrains.com/resharper/features/code_formatting.html)

# scala - 如何将 SORM 框架与 Play 框架一起使用？

> ID：14908054
> 
> 赞同：3
> 
> 时间：2013-02-16T07:28:40.163
> 
> 标签：scala, orm, playframework, sorm

我发现[SORM](http://sorm-framework.org/)非常有趣且很有前途，但我找不到将它与任何指南集成的方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-21T04:06:08.943

1.  安装 Play >= 2.1.0。
2.  使用 Play 的指南生成项目
3.  将适当的 SORM 和所选数据库的依赖项添加到生成的`project/Build.scala`中，例如：

    ```
    val appDependencies = Seq(
      "org.sorm-framework" % "sorm" % "0.3.8",
      "com.h2database" % "h2" % "1.3.168"
    ) 
    ```

4.  在同一个文件中，确保您的项目依赖于 SORM 所依赖的相同 Scala 版本（对于 SORM 0.3.8，它是 Scala 2.10.1）：

    ```
    val main = play.Project(appName, appVersion, appDependencies).settings(
      scalaVersion := "2.10.1"
    ) 
    ```

    *如果你错过了这一步，你可能会碰到[这个问题](https://stackoverflow.com/q/16925870/485115)。*

5.  放置所有案例类和SORM`app/models/package.scala`的实例声明，例如：

    ```
    package models

    case class A( name : String )
    case class B( name : String )

    import sorm._
    object Db extends Instance(
      entities = Set(Entity[A](), Entity[B]()),
      url = "jdbc:h2:mem:test"
    ) 
    ```

    *请注意，没有要求遵循这些命名和位置约定 - 例如，您可以将 SORM 实例放在您的控制器或其他地方，如果您愿意。*

6.  使用SORM`app/controllers/Application.scala`实施一些控制器操作，例如：

    ```
    package controllers

    import play.api.mvc._
    import models._

    object Application extends Controller {

      def index = Action {
        val user = Db.save(A("test"))
        Ok(user.id.toString)
      }

    } 
    ```

    这将打印出已保存`A`案例类值的生成 id。

7.  `play run`使用or`play start`命令运行你的服务器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-02T21:33:10.350

Play 已更新为使用新的构建文件格式

参考：[Build.scala 不是在游戏中创建的](https://stackoverflow.com/questions/18946539/build-scala-is-not-created-in-play)

您可以从 build.sbt 文件继续

外汇：

```
libraryDependencies ++= Seq(
  jdbc,
  cache,
  "org.sorm-framework" % "sorm" % "0.3.8",
  ws,
  specs2 % Test
) 
```

对于新用途：

[在 Play Framework 2.3.8 中使用 SORM](https://stackoverflow.com/questions/28759698/using-sorm-with-play-framework-2-3-8)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-21T01:17:17.043

```
libraryDependencies ++= Seq(
jdbc,
cache,
ws,
"org.sorm-framework" % "sorm" % "0.3.22",
"com.h2database" % "h2" % "1.3.168",
"org.scalatestplus.play" %% "scalatestplus-play" % "1.5.1" % Test
) 
```

# iphone - 解释 SDWebImage 代码中的 __weak 和 __strong 使用原因

> ID：14908057
> 
> 赞同：5
> 
> 时间：2013-02-16T07:28:49.450
> 
> 标签：iphone, ios, automatic-ref-counting, objective-c-blocks, sdwebimage

我想我很好理解强关键字和弱关键字，但我不明白它在下面的代码中是如何使用的。此代码来自 Olivier Poitrey 的 SDWebImage，可在 github 上找到。我理解这里描述的强弱关键字：[iOS5 中强弱存储的解释](https://stackoverflow.com/questions/9262535/explanation-of-strong-and-weak-storage-in-ios5)

下面的代码以一种让我好奇的方式使用了 __weak 和 __strong 关键字。它不是我习惯于看到弱使用的子父关系或委托模式。但是，我确信这是一种经常使用的模式，正如我之前在其他代码中看到的那样。它在另一个线程上运行的块之前设置一个 __weak 引用。然后，在块内，它将弱引用设置为强引用。

我确信这个好的和优雅的代码，所以我试图理解它。如果“self”在块运行之前不再存在，弱自引用将归零。当块运行时，强引用也将设置为零。因此，它会知道杀死其余的操作，因为 self 不再存在。我做对了吗？

现在，如果我们不使用 __weak 和 __strong 关键字会发生什么？如果我们只是在块内部检查 self == nil 会怎样。由于块复制整个树，“自我”永远不会为零吗？

有人可以帮助揭开这段令人敬畏的代码的神秘面纱吗？有人可以验证或否定我的假设吗？

```
- (void)setImageWithURL:(NSURL *)url placeholderImage:(UIImage *)placeholder options:(SDWebImageOptions)options progress:(SDWebImageDownloaderProgressBlock)progressBlock completed:(SDWebImageCompletedBlock)completedBlock;
{
    [self cancelCurrentImageLoad];

    self.image = placeholder;

    if (url)
    {
        __weak UIImageView *wself = self;
        id<SDWebImageOperation> operation = [SDWebImageManager.sharedManager downloadWithURL:url options:options progress:progressBlock completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType, BOOL finished)
        {
            __strong UIImageView *sself = wself;
            if (!sself) return;
            if (image)
            {
                sself.image = image;
                [sself setNeedsLayout];
            }
            if (completedBlock && finished)
            {
                completedBlock(image, error, cacheType);
            }
        }];
        objc_setAssociatedObject(self, &operationKey, operation, OBJC_ASSOCIATION_RETAIN_NONATOMIC);
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-16T07:35:47.460

该`downloadWithUrl:`方法可能需要很长时间。在那个时候，用户可能决定离开，消除对`SDWebImage`对象的需要。为了便于对象的早期清理，外部`self`引用是弱的。这样，*`downloadWithUrl`不会阻止`SDWebImage`被释放*。

当然，如果你真的想使用`self`，你需要一个强有力的参考。因此，在完成块中`downloadWithUrl`获取对`self`. 如果对象在这段时间内消失，`sself`将会`nil`。否则，它将是一个有效的强引用，表明`SDWebImage`对象还在，此时对象将完成它的工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T07:38:39.847

> 我确信这个好的和优雅的代码，所以我试图理解它。如果“self”在块运行之前不再存在，弱自引用将归零。当块运行时，强引用也将设置为零。因此，它会知道杀死其余的操作，因为 self 不再存在。我做对了吗？

不，你想太多了。`__weak`存储限定符就是这样：一个限定符。明确未保留的对象`__weak`，但如果从强变量分配，它们不仅会自动设置为 nil。事实上，这会破坏弱变量的目的！

> 现在，如果我们不使用 __weak 和 __strong 关键字会发生什么？如果我们只是在块内部检查 self == nil 会怎样。由于块复制整个树，“自我”永远不会为零吗？

检查实际上是不必要的，因为运行时将消息解析为 nil 到 nil（尽管如此，它可能对以后的实现很重要，谁知道呢）。你对这个很满意：如果没有那个“弱到强”的小舞，那么 self 将被块保留，有可能创造一个非常讨厌的保留循环。这就是我可以开始将这一切联系在一起的地方：

因为我们不希望块保留我们的变量，但我们也希望它在块的范围内是强的，所以不会发生任何奇怪的事情，将 self 分配给一个弱指针。当块发生在我们的弱指针上时，它不允许保留它，所以 self 的引用计数保持不变，然后一旦进入块，我们就回到一个强大的 self 变量，所以弱的变量被释放，我们不必再担心了。实际上，这意味着我们有一个可靠的保证，在整个块的执行过程中，self 要么是一个值，要么是 nil。很整洁吧？

# php - .htaccess 变量重定向问题

> ID：14908073
> 
> 赞同：1
> 
> 时间：2013-02-16T07:31:08.573
> 
> 标签：php, .htaccess, redirect

我无法重定向我的变量。我如何重定向所有内容，以便当用户访问时`http://domain.com/v1/v2/`，它实际上是`http://domain.com/index.php?a1=v1&a2=v2`？

对不起，我的英语不好。我尝试了很多事情，但都失败了。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T07:40:20.967

我不确定以下一个，但试试这个，

```
RewriteEngine on
RewriteCond %{SCRIPT_FILENAME} !-d  
RewriteCond %{SCRIPT_FILENAME} !-f  
RewriteRule ^(.*)/(.*) ./index.php?a1=$1&a2=$2 
```

如果您有任何建议或问题，请告诉我，您正面临

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T07:43:58.937

```
Options +FollowSymLinks
RewriteEngine on
RewriteRule ^(.*)/(.*)/$ /index.php?a1=$1&a2=$2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T07:54:52.267

你可以试试这个：

```
Options +FollowSymlinks
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI} ^/([^/]+)/([^/]+)/?  [NC]
RewriteCond %{REQUEST_URI} !index\.php          [NC]
RewriteRule .*    index.php?a1=%1&a2=%2         [L] 
```

内部映射：

`http://domain.com/v1/v2/`带或不带斜杠

至：

`http://domain.com/index.php?a1=v1&a2=v2`

字符串`v1`和`v2`假定是动态的，而`index.php`假定是固定的。

对于永久且可见的重定向，请替换`[L]`为`[R=301,L]`.

# jquery - 垂直菜单的Jquery问题

> ID：14908074
> 
> 赞同：0
> 
> 时间：2013-02-16T00:00:39.293
> 
> 标签：jquery, css

我创建了一个垂直的 wordpress 菜单，我正在尝试使用 Jquery 代码（来自用于创建 HTML 菜单的 Internet）使子菜单出现在其父母的右侧（目前出现在 -屏幕。

这是我的菜单的 CSS：

```
/* First Level Menu */
#vert-menu li {
    margin: 0;
    padding: 0;
    list-style-type: none;
    font: bold 13px arial;
    width: 180px;
    }

#vert-menu li a {
    display: block;
    overflow: auto;
    color: orange;
    text-decoration: none;
    padding: 6px;
    border-bottom: 1px solid #000000;
    background-color: black;
    }

#vert-menu li a:link, #vert-menu li a:visited, #vert-menu li a:active {
    color: white;
    }

#vert-menu li a:hover {
    background-color:orange;
    color:white;
    }

/* End First Level Menu */

#vert-menu li ul a {
    display: block;
    overflow: auto;
    color: white;
    text-decoration: none;
    padding: 6px;
    border-bottom: 1px solid #000000;
    border-right: 1px solid #000000;
    }

#vert-menu li ul a:link, #vert-menu li ul a:visited, #vert-menu li ul a:active {
    background-color: orange;
    }

#vert-menu li ul a:hover {
    background-color:orange;
    color:white;
    }

#vert-menu li ul li {
    position: absolute;
    width: 180px;
    top: 0;
    visibility: hidden;
} 
```

Jquery 代码或我在 header.php 文件中调用它的方式可能有问题。

这是JQuery：

```
$("document").ready(function() {

// Function triggered when mouse hovers over a menu item
// Looking for a LI item that has a UL for a child element
// If it does trigger the function on mouseover
$('#vert-menu li a').parent().has('ul').mouseover(function() {

    // offset() returns the top & left relative position on the doc for LI
    tagOffset = $(this).offset();

    /* I use the following to get the tag name for this 
    getTagName = $(this).get(0).tagName;
    alert(getTagName); */

    // Get distance from the left for the LI
    offsetLeft = tagOffset.left;

    // Get distance from the top for the LI
    offsetTop = tagOffset.top;

    // Move the new popup 180px to the left (Width of parent UL) 
    popOutOffsetLeft = offsetLeft + 180;

    // Get the id for the first UL contained in the LI
    closeParent = $(this).closest("ul").attr("id");

    // Checking if the UL is a second level of third level popup menu
    if (closeParent == 'vert-menu')
    {
        // Make menu visible and move it into position on the document
        $(this).find('ul').first().css({'visibility' : 'visible', 'left' : popOutOffsetLeft + 'px', 'top' : offsetTop + 'px'});
    } else {
        // Find offset for the UL that surrounds the third level popup
        secondOffset = $(this).find('ul').last().parent().offset();

        // Subtract the top offset from the second menu to position properly
        secondOffsetTop = secondOffset.top - offsetTop;

        // Correct the positioning on offset left
        secondOffsetLeft = offsetLeft - 10;

        // Make menu visible and move it into position on the document
        $(this).find('ul').last().css({'visibility' : 'visible', 'left' : secondOffsetLeft + 'px', 'top' : secondOffsetTop + 'px'});
    }
});

// When the mouse moves off the menu hide everything
$('#vert-menu li a').parent().has('ul').mouseout(function() {
    $(this).find('ul').css({'visibility' : 'hidden'});
});

}); 
```

以防万一我在头文件中犯了一个错误，下面是调用 jquery 文件的方式：

```
!-- BEGIN JS -->
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
    <script type="text/javascript" src="<?php echo get_template_directory_uri(); ?>/js/superfish.js"></script>
    <script type="text/javascript" src="<?php echo get_template_directory_uri(); ?>/js/jquery.fancybox-1.3.4.pack.js"></script>
    <script type="text/javascript" src="<?php echo get_template_directory_uri(); ?>/js/jquery.scrollTo.js"></script>
    <script type="text/javascript" src="<?php echo get_template_directory_uri(); ?>/js/scripts.js"></script>
    <script type="text/javascript" src="<?php echo get_template_directory_uri(); ?>/js/jquery.tools.min.js"></script>
    <script type="text/javascript" src="<?php echo get_template_directory_uri(); ?>/js/jquery.baseball-menu.js"></script> 
```

[这是菜单](http://www.botkai.com/baseball)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T03:44:59.077

尝试删除样式末尾的 li 并添加 padding:0 ，如下所示：

```
 #vert-menu li ul {
    position: absolute;
    width: 180px;
    top: 0;
    visibility: hidden;
    padding: 0;
   } 
```

在这种情况下，您可以使用更少的代码执行相同的操作，如下所示：

```
$("document").ready(function() {
  $('#vert-menu li a').parent().has('ul').hover(
        function () {$('ul', this).stop().show(500); },
        function () {$('ul', this).stop().hide(300); });
}); 
```

并替换我上面提到的 ul 中的可见性：由 display:none 隐藏。

我用的是 1.7.2 jquery 版本

# facebook - Facebook Graph API 搜索页面位置

> ID：14908078
> 
> 赞同：1
> 
> 时间：2013-02-16T07:31:27.327
> 
> 标签：facebook, api, facebook-graph-api, location

使用 Facebook Graph API，是否可以通过搜索位置来查找特定类别下的 Facebook 页面？

示例：如果我想搜索纽约布鲁克林并返回该位置的所有音乐家页面，我可以使用 Graph API 执行此操作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:29:39.523

不幸的是，“语言环境”参数已从 Graph API 中的搜索功能中撤消：/ Imho fb 犯了巨大的错误。这是一个摘要：[http ://socialmemos.com/you-are-doing-it-wrong-facebook/](http://socialmemos.com/you-are-doing-it-wrong-facebook/)

# shell - 在awk中按固定宽度分割线

> ID：14908085
> 
> 赞同：0
> 
> 时间：2013-02-16T07:32:10.057
> 
> 标签：shell

实际上我有一个 XML 文件。下面是文件的内容。

```
<charge_amt>1.90</charge_amt>

<charge_amt>-89</charge_amt> 
```

我想分开费用（1.90）并检查它是否为负数。如果是非负数，则用 0 代替电荷。

输出 ：

```
<charge_amt>0</charge_amt>

<charge_amt>-89</charge_amt> 
```

请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T08:07:34.407

尝试`sed`：

```
sed -e 's@<charge_amt>[^-][^<]*</charge_amt>@<charge_amt>0</charge_amt>@g' < file > newfile 
```

请注意，如果文本中有空格、`charge_amt`节点上的属性或任何其他有趣的事情，这将不会很好。所以对此要非常小心，并在出现问题的第一个迹象时使用真正的 XML 解析器。

# email - Opencart 在联系人电子邮件中添加姓名和电子邮件以及消息

> ID：14908086
> 
> 赞同：2
> 
> 时间：2013-02-16T07:32:12.137
> 
> 标签：email, opencart, contact

我通过联系查询表只收到用户的**消息。**我正在尝试在查询电子邮件中添加他们的姓名和电子邮件。我没有得到要更改的确切文件。

有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T09:01:35.547

在**目录/控制器/信息/contact.php** 中找到该行

```
$mail->setText(strip_tags(html_entity_decode($this->request->post['enquiry'], ENT_QUOTES, 'UTF-8'))); 
```

替换`$this->request->post['enquiry']`为`$msg_body`

在此行之前添加以下行

```
$msg_body = "Sender's Name : ".$this->request->post['name']."  Sender's email : ".$this->request->post['email']. "  Enquiry :".$this->request->post['enquiry']; 
```

# php - mysqli 更新查询是否应该返回结果？

> ID：14908087
> 
> 赞同：14
> 
> 时间：2013-02-16T07:32:18.043
> 
> 标签：php, mysql, mysqli

我正在将我的 PHP 代码从 mysql 更新到 mysqli，但我似乎找不到这个问题的答案：Do mysqli update queries return a result？

使用mysql，我可以做到

```
$result = mysql_query("UPDATE `data` SET `field1` = 1 WHERE `key` = '$mykey'); 
```

即使查询不返回任何行，$result 也会为真。

不过，现在，在 mysqli 代码中，我有类似这样的内容（为清楚起见，删除了错误处理）：

```
$stmt = $mysqli->prepare("UPDATE `data` SET `field1` = 1 WHERE `key` = (?)")
$stmt->bind_param("s", $mykey);
$stmt->execute();
$result = $stmt->get_result(); 
```

$result 是假的。

作为记录，查询是有效的（忽略我可能将其转录到 stackoverflow 中的任何拼写错误）并且 field1 已按预期在数据库中正确更新。此外，get_result() 对选择查询也很有效，所以这不是 get_result() 不可用的问题。

基本上，我只想知道这种改变的行为是否是预期的，或者我是否应该继续尝试在某个地方找到一些错误。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-16T07:39:01.670

准备好的语句执行

```
 $stmt->execute(); 
```

[`execute()`](http://php.net/manual/en/mysqli-stmt.execute.php)成功时返回 TRUE，失败时返回 FALSE 。

因为`UPDATE`, `DELETE`,`INSERT`不产生任何结果集，所以不需要使用`get_result()`. 如果您需要知道受影响行的总数，可以使用该`mysqli_stmt_affected_rows()`函数来完成。

因此您的代码可能如下所示

```
$stmt = $mysqli->prepare("UPDATE `data` SET `field1` = 1 WHERE `key` = (?)")
$stmt->bind_param("s", $mykey);
$stmt->execute();
//You can get the number of rows affected by your query
$nrows = $stmt->affected_rows;
if (!$nrows) {
    //Nothing has been updated
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-16T07:46:49.853

非 SELECT 查询没有“结果集”，因此`get_result`对它们来说毫无意义。如果您想知道是否修改查询（`UPDATE`、`INSERT`或`DELETE`），请使用`$stmt->affected_rows`. 这将是 0 或非零，具体取决于查询是否执行任何操作。

# android - 如何在选项卡片段中添加列表视图

> ID：14908100
> 
> 赞同：1
> 
> 时间：2013-02-16T07:33:30.740
> 
> 标签：android

我创建了三个片段来展示我的主要活动。这是三个片段活动之一：

```
public static class Fragment1 extends Fragment {
    /**
     * The fragment argument representing the section number for this
     * fragment.
     */
    String[] values=new String[]{"India", "java", "c++","Ad.Java", "Linux", "Unix"};
    public Fragment1() {
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // Create a new TextView and set its text to the fragment's section
        // number argument value.
        View v = inflater.inflate(R.layout.center, null);
        return v;
    }
} 
```

我想在这个片段中显示一个 listView。我尝试在`onCreateView()`方法中使用此代码：

```
ArrayAdapter<String> adapter=new ArrayAdapter<String>(Main.this,android.R.layout.simple_list_item_1,values);
        setListAdapter(adapter); 
```

但它显示错误..如何做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T07:46:02.260

这段代码对你有帮助..

```
 String[] values=new String[]{"India", "java", "c++","Ad.Java", "Linux", "Unix"};
   ListView lv;
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View v = inflater.inflate(R.layout.center, container, false);
perform(v);

    return v;
}

public void perform(View v) {
lv = (ListView)v.findViewById("your view id");
ArrayAdapter<String> adapter=new ArrayAdapter<String>(getActivity(),android.R.layout.simple_list_item_1,values);
    lv.setAdapter(adapter); 
```

}

# javascript - 使用 Google Chrome Frame 测试 Internet Explorer 8？

> ID：14908101
> 
> 赞同：0
> 
> 时间：2013-02-16T07:33:34.653
> 
> 标签：javascript, internet-explorer, google-chrome, internet-explorer-8, cross-browser

我有一个有点复杂的基于 javascript 的 web 应用程序 UI 界面。由于其复杂性，使其与 IE8 完全兼容或可降解并不容易，因此我计划通知将使用此 Web 应用程序作为服务的注册用户安装 Google chrome 框架：[http ://www.google .com/chromeframe?quickenable=true](http://www.google.com/chromeframe?quickenable=true) - （我希望这将有助于更新 IE8 并使其更像 Chrome？）问题是 - 在我的机器上我已经有 IE9 并且需要保留它，不想卸载它。有什么在线方法可以让我*使用 google chrome 框架插件*测试 IE8吗？我知道能够让我们在 IE8 中查看我们的网页的勺子和浏览器截图，但我需要使用**添加了 google chrome 框架**的 IE8 来查看它。有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T07:36:00.420

微软为他们在不同操作系统版本上的所有浏览器版本提供了一堆虚拟机映像。您也许可以将 Chrome 框架插件安装到您要测试的 IE8 版本中。

[http://www.microsoft.com/en-us/download/details.aspx?id=11575](http://www.microsoft.com/en-us/download/details.aspx?id=11575)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T01:50:25.650

I recommend [http://www.browserstack.com/](http://www.browserstack.com/). It offers pretty much any browser / OS combination you would want to test.

# ruby-on-rails - Rails 自定义验证器名称错误

> ID：14908108
> 
> 赞同：2
> 
> 时间：2013-02-16T07:35:21.743
> 
> 标签：ruby-on-rails

我创建了一个自定义的 Rails 验证器，我命名`URLValidator`它来验证 URL。这似乎符合[Rail 对驼峰式缩写词的命名约定](https://stackoverflow.com/questions/9293031/ruby-naming-convention-letter-case-for-acronyms-in-class-module-names)。

在我的模型中，我正在验证我的 URL，如下所示：

```
validates :url, :presence => true, :url => true 
```

当我运行测试时，出现以下错误：

```
`rescue in block in validates': Unknown validator: 'UrlValidator' (ArgumentError) 
```

有什么方法可以让 Rails 使用正确的约定或指定我想用于 :url 的自定义验证器的名称？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T09:22:52.047

您的验证器应命名为`UrlValidator`（ camelized 的结果`'url'`）：

```
# Validator for the `url` attribute
class UrlValidator< ActiveModel::EachValidator
  def validate_each(record, attribute, value)
    # to be implemented
  end
end

def Foo < ActiveRecord::Base 
   validates :url, :presence => true
end 
```

[链接到文档](http://api.rubyonrails.org/classes/ActiveModel/Validator.html)

或者，要坚持使用名称`URLValidator`，您可以使用[`validates_with`](http://api.rubyonrails.org/classes/ActiveModel/Validations/ClassMethods.html#method-i-validates_with)：

```
class URLValidator< ActiveModel::EachValidator
  def validate(record)
    # check on record.url, to be implemented
  end
end

def Foo < ActiveRecord::Base 
   validates_with URLValidator
end 
```

或更通用的版本（如果属性的名称并不总是`url`）

```
class URLValidator< ActiveModel::EachValidator
  def validate(record)
    value = record.send(options[:on])
    # check value, to be implemented
  end
end

def Foo < ActiveRecord::Base 
   validates_with URLValidator, :on => :url
end 
```

# tcl - regsub 匹配为 lindex 索引，针对 irc 控制字符

> ID：14908109
> 
> 赞同：2
> 
> 时间：2013-02-16T07:35:31.073
> 
> 标签：tcl, eggdrop

好吧，在过去的 10 多个小时里，我一直在互联网上搜索，但没有运气或成功。

我正在尝试将 irc 控制代码（颜色等）转换为 html，输入文本是从 eggdrop tcl 绑定事件中提取的。粗体/下划线工作正常..尚未测试斜体，但这不是问题所在。

..问题是，我的正则表达式似乎匹配了错误的字符。我设置了我的正则表达式——我假设从以前的编码经验中了解（主要是 php/js）——来匹配`\003(\d+)[,]?(\d*)(.*?)`，因为我想要控制字符后面的数字，然后用作列表中的索引，提取必要的 html 十六进制颜色。但是，被拉出的数字似乎甚至不是数字，在终端中没有正确显示，而是似乎是一个控制字符（根据我使用 gedit 的经验）。

我的过程的代码如下，它是一个更大的脚本的一部分，它将文本记录到一个文件中。其他一切都有效，但这个过程。

对于这个问题..我到底做错了什么？我收到的唯一错误消息类似于“（控制字符）无效索引”。

```
proc logger:control {text} {

    set val {
        {FFF}
        {000}
        {00007F}
        {009000}
        {FF0000}
        {7F0000}
        {9F009F}
        {FF7F00}
        {FFFF00}
        {00F800}
        {00908F}
        {00FFFF}
        {0000FF}
        {FF00FF}
        {7F7F7F}
        {CFD0CF}
    }

    while {[regsub {\002(.*?)\002} $text {<b>\1</b>} text]} {}
    while {[regsub {\037(.*?)\037} $text {<u>\1</u>} text]} {}
    while {[regsub {\035(.*?)\035} $text {<i>\1</i>} text]} {}
    while {[regsub {\003([0-9]+)[,]?(\d*)(.*?)} $text "</span><span style='color: [lindex $val \1] ;'>\3" text]} {}
    # ^ the line that throws the error
    while {[regsub {\003[^\d]} $text {$text</span>} text]} {}

    return $text
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T17:35:14.583

正如你所说，问题是这一行：

```
while {[regsub {\003([0-9]+)[,]?(\d*)(.*?)} $text "</span><span style='color: [lindex $val \1] ;'>\3" text]} {} 
```

第*一个*问题是 Tcl`\digit`立即在替换中进行解释，因为您已经用`"`双引号引用了它`"`。修复？使用大括号：

```
while {[regsub {\003([0-9]+)[,]?(\d*)(.*?)} $text {</span><span style='color: [lindex $val \1] ;'>\3} text]} {} 
```

第二*个*问题是，之后您将在文本中获得文字 Tcl 命令片段。可能不是你想要的！唉，这里没有像`/e`Perl 中的标志那样的东西。你需要一种完全不同的方法：

```
# First, defang any Tcl metacharacters
set text [string map {\\ \\\\ [ \\[ ] \\] $ \\$} $text]
# Second, do the replacements, inserting Tcl fragments
while {[regsub {\003([0-9]+)[,]?(\d*)(.*?)} $text {</span><span style='color: [lindex $val \1] ;'>\3} text]} {}
# Third, do the substitutions we just inserted
set text [subst $text] 
```

请注意，在使用此技巧时，您必须小心确保您的 RE 考虑到额外的反斜杠。值得庆幸的是，在您的情况下，因为您的模式与反斜杠不匹配，所以没有什么区别。

# java - 使用正则表达式进行拆分（使用正则表达式的经验有限）

> ID：14908110
> 
> 赞同：0
> 
> 时间：2013-02-16T07:35:32.230
> 
> 标签：java, regex, string, split, substring

我对正则表达式的经验和知识有限。我需要做的是将一个字符串拆分为多个子字符串。

有问题的字符串是

```
String str =
   "Brayden Schenn, C GAMES PLAYED: 13, GOALS: 3, ASSISTS: 6," +
   " POINTS: 9, PLUS/MINUS: 5, PIM: 7"; 
```

我想把它分成子字符串，其他字符串，即。

```
String gamesPlayed = "13";
String goals = "3";
etc 
```

或类似的东西，这样我就可以找出父字符串中有多少个进球、助攻等。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T07:44:08.403

我会：

*   首先拆分使用`,`
*   然后使用拆分`:`

我在 Java 方面的经验几乎为零，但这就是我的建议：

```
String initialStr =
   "GAMES PLAYED: 13, GOALS: 3, ASSISTS: 6, POINTS: 9,"+
   " PLUS/MINUS: 5, PIM: 7";
String colon = ": ";
Map< String, Integer> keyValuePairs = new HashMap<>();// Java 7 diamond    
String[] parts = initialStr.split(",");
for( String keyValue : parts ) {
   String[] pair = keyValue.split(colon);
   keyValuePairs.put( pair[0], Integer.parseInt( pair[1] ));
} 
```

询问 keyValuePairs 如下：

```
assert keyValuePairs.get( "GAMES PLAYED" ) == 13; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T07:46:56.697

您可以使用以下正则表达式`(([\w/]+):\s?(\d+)),?`来匹配`key:value`字符串中的所有内容，然后只需提取`GOALS`with`group(2)`和`3`with `group(3)`。

正则表达式如下所示：

```
(            # capture key/value (without the comma)
  (          # capture key (in group 2)
    [\w/]+   # any word character including / one or more times
  )
  :          # followed by a colon
  \s?        # followed by a space (or not)
  (          # capture value (in group 3)
    \d+      # one or mor digit
   )
)
,?           # followed by a comma (or not) 
```

考虑到您的字符串，它应该与以下内容匹配：

```
PLAYED: 13
GOALS: 3
ASSISTS: 6
POINTS: 9
PLUS/MINUS: 5
PIM: 7 
```

这是Java代码：

```
String s = "Brayden Schenn, C GAMES PLAYED: 13, GOALS: 3, ASSISTS: 6, POINTS: 9, PLUS/MINUS: 5, PIM: 7";
Matcher m = Pattern.compile("(([\\w/]+):\\s?(\\d+)),?").matcher(s);
Map<String, Integer> values = new HashMap<String, Integer>();
// find them all
while (m.find()) {
   values.put(m.group(2), Integer.valueOf(m.group(3)));
}
// print the values
System.out.println("Games Played: " + values.get("PLAYED"));
System.out.println("Goals: " + values.get("GOALS"));
System.out.println("Assists: " + values.get("ASSISTS"));
System.out.println("Points: " + values.get("POINTS"));
System.out.println("Plus/Minus: " + values.get("PLUS/MINUS"));
System.out.println("Pim: " + values.get("PIM")); 
```

# c# - 为什么记录在数据库中插入两次而不是一次？

> ID：14908115
> 
> 赞同：0
> 
> 时间：2013-02-16T07:36:00.907
> 
> 标签：c#, asp.net, sql-server-2008

我只单击 GridView 中的链接按钮一次，但每次都会插入两次记录。我尝试应用断点，但仍然无法弄清楚。我做错了什么？

**资源：**

```
 <asp:GridView ID="GridViewUserScraps" ItemStyle-VerticalAlign="Top" AutoGenerateColumns="False"
    GridLines="None" Width="100%" ShowHeader="False" runat="server" AlternatingRowStyle-BackColor="#A5A5A5"
    CellPadding="4" ForeColor="#333333" DataKeyNames="ScrapId" 
    OnRowCommand="GridViewRowCommand">
    <Columns>
    <asp:TemplateField>
    <ItemTemplate>
    <table align="left" cellpadding="1" cellspacing="2">
    <tr>
    <td>
    <a href='<%#getUserHREF(Container.DataItem)%>'>
    <img align="middle" src='<%#getSRC(Container.DataItem)%>' border="0" width="50px" /></a>
    </td>
    <td>
    &nbsp;</td>
    </tr>
    </table>
    <div align="justify">
    <%#DataBinder.Eval(Container.DataItem, "Message")%>
    <br />
    <br />
    </div>
    <span class="SmallBlackText">Posted On: &nbsp;</span>
    <asp:Label ID="lblSendDate" runat="server" Text='<%#DataBinder.Eval(Container.DataItem,"SendDate")%>'></asp:Label>
    </span>
    <br />
    <%-- <asp:LinkButton ID="lnklike" runat="server" 
    CommandArgument="<%# ((GridViewRow) Container).RowIndex %>" 
    CommandName="LikeCmd">Like</asp:LinkButton>
    &nbsp;&nbsp;&nbsp;
    <asp:LinkButton ID="lnkunlike" runat="server">unlike</asp:LinkButton>--%>

    <asp:LinkButton ID="lnklike" runat="server" CommandName="like" CommandArgument='<%# Eval("ScrapId")%>'>Like</asp:LinkButton>
    <asp:LinkButton ID="lnkunlike" runat="server"  CommandName="unlike" CommandArgument='<%# Eval("ScrapId")%>'>unlike</asp:LinkButton>

    &nbsp;&nbsp;
    <asp:Label ID="lbllike" runat="server" Text="likes:"></asp:Label>
    <%-- <asp:Label ID="lbllikecount" runat="server" Text="0"></asp:Label>--%>

    <asp:Label ID="Label1" runat="server" Text='<%# Controls_GetUserScraps.abc((int)Eval("ScrapId")) %>' />
    <%--<asp:Label ID="Label1" runat="server" Text='<%# WebPageName.StaticMethodName((int)Eval("ScrapId")) %>' />--%>

    &nbsp;&nbsp;
    <asp:Label ID="lblthumbsdown" runat="server" Text="ThumbsDown:"></asp:Label>
    <asp:Label ID="Label2" runat="server" 
    Text='<%# Controls_GetUserScraps.xyz((int)Eval("ScrapId")) %>'></asp:Label>

    </ItemTemplate>
    </asp:TemplateField>
    </Columns>
    <RowStyle BackColor="#EFF3FB" />
    <FooterStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
    <PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" />
    <SelectedRowStyle BackColor="#D1DDF1" Font-Bold="True" ForeColor="#333333" />
    <HeaderStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
    <EditRowStyle BackColor="#2461BF" />
    <AlternatingRowStyle BackColor="White" />
    </asp:GridView> 
```

**代码背后：**

```
protected void GridViewRowCommand(Object sender, GridViewCommandEventArgs e)
{
    var scrapId = Int32.Parse(e.CommandArgument.ToString());
    switch (e.CommandName)
    {
    case "like":

        string chklike = "select likestatus from tbl_like where fromid='"+Session["UserId"]+"' and scrapid='"+scrapId+"'";
        int a = dbo.GetLikesMethod(chklike);
        string chkthumbsdown = "select thumbsdownstatus from tbl_like where fromid='"+Session["UserId"]+"' and scrapid='"+scrapId+"'";
        int b = dbo.GetLikesMethod(chkthumbsdown);

        if (a == 0 && b==0)
        {
            string sendlike = "insert into tbl_like (ScrapId,FromId,LikeStatus) values('" + scrapId + "','" + Session["UserId"] + "',1)";
            dbo.insert(sendlike);                       
            GetUserScraps(int.Parse(Request.QueryString["Id"].ToString()));
        }
        else if(a!=0)
        {

            Response.Write("already liked");
        }
        else if (b != 0)
        {
            Response.Write("you can not like something you already downvoted!");
        }

        break;
    case "unlike":

        string chkthumbsdown1 = "select thumbsdownstatus from tbl_like where fromid='"+Session["UserId"]+"' and scrapid='"+scrapId+"'";
        int b1 = dbo.GetLikesMethod(chkthumbsdown1);

        if (b1 == 0)
        {
            string sendthumbsdown = "insert into tbl_like (ScrapId,FromId,thumbsdownstatus) values('" + scrapId + "','" + Session["UserId"] + "',1)";
            dbo.insert(sendthumbsdown);                       
            GetUserScraps(int.Parse(Request.QueryString["Id"].ToString()));
        }
        else
        {
            Response.Write("already THumbsDowned!");
        }

        break;
    }
}

public DataTable insert(string q)
{
    DataTable dt = new DataTable();
    SqlCommand cmd = new SqlCommand(q,con);
    try
    {
        SqlDataAdapter da = new SqlDataAdapter(cmd);
        da.Fill(dt);
        con.Open();
        cmd.ExecuteNonQuery();
        con.Close();

    }
    catch { };
    return dt;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T11:17:26.070

为了在数据库中插入行，您为什么要使用 dataadapter。

当您使用 da.Fill(dt) 时，它已经在执行 sql 字符串。你再次以 cmd.ExecuteNonQuery() 的形式执行它

试试这样的代码

```
 public bool insert(string q)
  {   
     bool result=false;
     SqlCommand cmd = new SqlCommand(q,con);
       try
        {       
          con.Open();
          cmd.ExecuteNonQuery();
          con.Close();
          result=true
        }
       catch { };
       return result; 
      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T07:48:29.673

不要使用 GridViewRowCommand 事件，而是尝试在按钮上使用 OnClick 事件处理程序。这可能会解决问题。

# android - 在 Onclick 事件中.. 我有错误

> ID：14908119
> 
> 赞同：0
> 
> 时间：2013-02-16T07:36:33.827
> 
> 标签：android, onclick, onclicklistener

```
public void clickImage(View v) {
        if (v.getId() == R.id.a_01_b) {
            Toast.makeText(this, "1", Toast.LENGTH_LONG).show();
        }
        else if (v.getId() == R.id.a_02_b) {
            Toast.makeText(this, "2", Toast.LENGTH_LONG).show();
        }
        else if (v.getId() == R.id.a_03_b) {
            Toast.makeText(this, "3", Toast.LENGTH_LONG).show();
        }
    } 
```

我在 mainactivity.java 中这样写..

并且，在 XML 中。我在每个 ImageView 中都写了 android:onClick="clickImage" 。

但它在我在这里写的第一句话中犯了这样的错误。

```
Multiple markers at this line
- Syntax error on token ")", ; expected
- Syntax error on token "(", ; expected
- void is an invalid type for the variable clickImage 
```

..这是什么错误？我必须做什么..？我认为代码中没有错误..

请给我解决方案..

PS我清理了 Project ，但它是一样的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T08:06:18.647

您的 mainactivity.java 中有一些语法错误。也许您将 clickImage 方法放在另一个方法中。或者别的什么，如果没有看到完整的代码就不可能准确地说出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T07:49:17.120

**请注意**`clickImage()`，使用 XML onClick，Android 将仅在当前 Activity 中查找 onClick 方法。如果您正在使用片段，请务必记住这一点，因为即使您使用片段添加 XML，Android 也不会`onClick`在用于添加 XML 的片段的 .java 文件中查找方法。

所以我们需要知道你是在使用 framents 还是多活动调用

### 编辑>

你的xml没有错误，你的java活动似乎有错误，因为我没有你的java，我会给你一个独立于你的xml的解决方案

```
ImageView im;
im = (ImageView)findViewById(R.id.a_01_b);
im.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Toast.makeText(this, "1", Toast.LENGTH_LONG).show();
            }
        }); 
```

在你的 xml 中删除这个

```
android:onClick="clickImage" 
```

### 编辑 2

在你的java类的顶部放这个：

```
import android.view.View.OnClickListener;
import android.widget.ImageView; 
```

在你的代码中这样做：

```
ImageView im;
im = (ImageView)findViewById(R.id.a_01_b);
im.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Toast.makeText(YourActivityName.this, "1", Toast.LENGTH_LONG).show();
            }
        }); 
```

而不是`YourActivityName`把你的活动的名称

# c - 仅当变量总和等于 1 时才执行代码

> ID：14908121
> 
> 赞同：-3
> 
> 时间：2013-02-16T07:37:47.027
> 
> 标签：c

如果我有这样的事情：

```
double a = 1.0f;
double b = 1.0f;
double c = 1.0f;
double d = 1.0f;

a /= 3.0f;    // 0.3333...
b /= 3.0f;
c /= 3.0f;

if ((a+b+c) == 1)
    puts("sum equals 1");
if (3*a == 1)
    puts("product equals 1");
if (d == 1)
    puts("d equals 1"); 
```

**不出所料**，只有第三个执行。如果一些自变量之和正好等于 1，是否有一种简单的方法来执行代码？

编辑：我真的知道为什么 (1/3.0) + (1/3.0) + (1/3.0) 不是 1。但我不知道另一种方式来问它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T07:53:35.930

尝试打印 a+b+c 以及 a+b+c-1 并比较结果。您会注意到 a+b+c-1 的结果并不完全是 0。这始终是一个问题，因为浮点运算不能提供无限精度。

一种可能的解决方案是测试 abs(a+b+c-1) 是否小于某个阈值。另一种解决方案是切换到没有浮点的实现，例如使用分子、分母的表示。另一种解决方案是实现区间算术并检查结果中是否包含零。

在您的情况下，最佳解决方案取决于您实际想要实现的目标。

# iphone - 如何清除 IOS 应用程序库缓存（已下载的图像）

> ID：14908131
> 
> 赞同：1
> 
> 时间：2013-02-16T07:39:23.260
> 
> 标签：iphone, ios, image, caching

我正在使用下载异步图像。我从我的网络服务器获得了很多图像，但都是临时的，我不会缓存它们中的任何一个。但该应用程序显然将下载图像保存在 /Library/Caches 中。我该如何解决？

有什么方法可以防止缓存下载的图像？或者从缓存中删除它们？

我尝试了这两种不同的方法：

```
#pragma mark - Method 1

- (void)method1{
    NSURL *imageURL = [NSURL URLWithString:self.photoLink];
    [self setImage:[UIImage imageNamed:@"nut"] forState:UIControlStateNormal];
    dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0ul);
        dispatch_async(queue, ^{
        NSData *data = [NSData dataWithContentsOfURL:imageURL options:NSDataReadingUncached error:NULL];
        dispatch_async(dispatch_get_main_queue(), ^{
            [self setImage:[UIImage imageWithData:data] forState:UIControlStateNormal];
            });
        });
    //}
}

#pragma mark - Method 2

- (void)method2{

    NSOperationQueue *queue = [[NSOperationQueue alloc]init];

    // The Placeholder
    [self setImage:[UIImage imageNamed:@"nut"] forState:UIControlStateNormal];

    NSInvocationOperation *operation = [[NSInvocationOperation alloc] initWithTarget:self
                                                                            selector:@selector(loadDataAsyc)
                                                                              object:nil];
    [queue addOperation:operation];

    [operation release];
}
-(void)loadDataAsyc{

    // create a local autorelease pool since this code runs not on main thread
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

    NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:self.photoLink] options:NSDataReadingUncached error:NULL];
    UIImage *image = [UIImage imageWithData:data];

    [self performSelectorOnMainThread:@selector(showImage:) withObject:image waitUntilDone:NO];

    [pool release];
}
-(void)showImage:(UIImage *)image{
    [self setImage:image forState:UIControlStateNormal];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T12:10:29.310

缓存将在需要时清空，即当应用程序收到内存不足警告时。您没有理由自己这样做，也没有可用的公共 API。

* * *

**注意**
**当操作系统为您管理某些事情时，您无需担心。**

* * *

但是，如果您真的想清除缓存，请按照此操作

```
NSFileManager *filemgr;

filemgr = [NSFileManager defaultManager];

if ([filemgr removeItemAtPath: [NSHomeDirectory() stringByAppendingString:@"/Library/Caches"] error: NULL]  == YES)
    NSLog (@"Remove successful");
else
    NSLog (@"Remove failed");

[filemgr createDirectoryAtPath: [NSHomeDirectory() stringByAppendingString:@"/Library/Caches"] withIntermediateDirectories:NO attributes:nil error:nil]; 
```

# javascript - angularJS中& vs @和=有什么区别

> ID：14908133
> 
> 赞同：242
> 
> 时间：2013-02-16T07:39:36.613
> 
> 标签：javascript, angularjs

我对 AngularJS 很陌生。任何人都可以向我解释这些 AngularJS 运算符之间的区别：`&, @ and =`当用适当的例子隔离范围时。

* * *

## 回答 #1

> 赞同：382
> 
> 时间：2013-02-16T13:14:10.963

`@`允许将指令属性上定义的值传递给指令的隔离范围。该值可以是一个简单的字符串值 ( `myattr="hello"`)，也可以是一个带有嵌入表达式的 AngularJS 插值字符串 ( `myattr="my_{{helloText}}"`)。将其视为从父范围到子指令的“单向”通信。John Lindquist 有一系列简短的截屏视频来解释其中的每一个。@ 的截屏视频在这里：[https ://egghead.io/lessons/angularjs-isolate-scope-attribute-binding](https://egghead.io/lessons/angularjs-isolate-scope-attribute-binding)

`&`允许指令的隔离范围将值传递到父范围以在属性中定义的表达式中进行评估。请注意，指令属性隐含地是一个表达式，并且不使用双花括号表达式语法。这在文字中更难解释。& 的截屏在这里：[https ://egghead.io/lessons/angularjs-isolate-scope-expression-binding](https://egghead.io/lessons/angularjs-isolate-scope-expression-binding)

`=`在指令的隔离范围和父范围之间设置双向绑定表达式。子范围的更改会传播到父范围，反之亦然。将 = 视为 @ 和 & 的组合。= 的截屏视频在这里：[https ://egghead.io/lessons/angularjs-isolate-scope-two-way-binding](https://egghead.io/lessons/angularjs-isolate-scope-two-way-binding)

最后是一个截屏视频，在一个视图中显示了所有三个一起使用：[https ://egghead.io/lessons/angularjs-isolate-scope-review](https://egghead.io/lessons/angularjs-isolate-scope-review)

* * *

## 回答 #2

> 赞同：110
> 
> 时间：2014-12-30T09:31:43.223

我想从 JavaScript 原型继承的角度来解释这些概念。希望有助于理解。

有三个选项可以定义指令的范围：

1.  `scope: false`：角度默认。该指令的作用域正是它的父作用域之一 ( `parentScope`)。
2.  `scope: true`: Angular 为这个指令创建了一个作用域。范围原型继承自`parentScope`.
3.  `scope: {...}`: 隔离范围解释如下。

指定`scope: {...}`定义一个`isolatedScope`. An`isolatedScope`不从 继承属性`parentScope`，虽然`isolatedScope.$parent === parentScope`. 它通过以下方式定义：

```
app.directive("myDirective", function() {
    return {
        scope: {
            ... // defining scope means that 'no inheritance from parent'.
        },
    }
}) 
```

`isolatedScope`无法直接访问`parentScope`. 但有时指令需要与`parentScope`. 他们通过`@`和`=`进行通信`&`。**关于使用符号的主题`@`，`=`并且`&`正在谈论使用的场景`isolatedScope`**。

它通常用于不同页面共享的一些通用组件，例如Modal。隔离范围可防止污染全局范围，并且易于在页面之间共享。

这是一个基本指令：http: [//jsfiddle.net/7t984sf9/5/](http://jsfiddle.net/7t984sf9/5/)。要说明的图像是：

![在此处输入图像描述](../Images/576cc86c641dbdc9afb191139ba528d1.png)

# `@`: 单向绑定

`@`只需将属性从`parentScope`to传递给`isolatedScope`. 它被称为`one-way binding`，这意味着您不能修改`parentScope`属性的值。如果你熟悉 JavaScript 继承，你可以很容易地理解这两种场景：

*   如果绑定属性是原始类型，如`interpolatedProp`示例中所示：您可以修改`interpolatedProp`，但`parentProp1`不会更改。但是，如果您更改 的值`parentProp1`，`interpolatedProp`将被新值覆盖（当 angular $digest 时）。

*   如果绑定属性是某个对象，例如`parentObj`: 因为传递给`isolatedScope`的是一个引用，修改值将触发此错误：

    `TypeError: Cannot assign to read only property 'x' of {"x":1,"y":2}`

# `=`: 双向绑定

`=`被称为`two-way binding`，这意味着任何修改`childScope`都会更新 中的值`parentScope`，反之亦然。此规则适用于基元和对象。如果你把绑定类型改成`parentObj`be `=`，你会发现可以修改的值`parentObj.x`。一个典型的例子是[`ngModel`](https://docs.angularjs.org/api/ng/directive/ngModel)。

# `&`: 函数绑定

`&`允许指令调用一些`parentScope`函数并从指令中传递一些值。例如，检查[JSFiddle: & in directive scope](https://jsfiddle.net/6jwhcemb/2/)。

在指令中定义一个可点击的模板，如：

```
<div ng-click="vm.onCheck({valueFromDirective: vm.value + ' is from the directive'})"> 
```

并使用如下指令：

```
<div my-checkbox value="vm.myValue" on-check="vm.myFunction(valueFromDirective)"></div> 
```

变量`valueFromDirective`通过 . 从指令传递到父控制器`{valueFromDirective: ...`。

参考：[了解范围](https://github.com/angular/angular.js/wiki/Understanding-Scopes)

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2013-02-16T07:49:49.120

不是我的小提琴，但[http://jsfiddle.net/maxisam/QrCXh/](http://jsfiddle.net/maxisam/QrCXh/)显示了差异。关键部分是：

```
 scope:{
            /* NOTE: Normally I would set my attributes and bindings
            to be the same name but I wanted to delineate between 
            parent and isolated scope. */                
            isolatedAttributeFoo:'@attributeFoo',
            isolatedBindingFoo:'=bindingFoo',
            isolatedExpressionFoo:'&'
        } 
```

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2017-09-03T09:53:48.860

**@** : 单向绑定

**=** : 双向绑定

**&** : 函数绑定

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-06-27T17:19:53.580

**AngularJS – 隔离作用域 – @ vs = vs &**

* * *

带有解释的简短示例可在以下链接中找到：

[http://www.codeforeach.com/angularjs/angularjs-isolated-scopes-vs-vs](http://www.codeforeach.com/angularjs/angularjs-isolated-scopes-vs-vs)

**@——单向绑定**

在指令中：

```
scope : { nameValue : "@name" } 
```

鉴于：

```
<my-widget name="{{nameFromParentScope}}"></my-widget> 
```

**= – 双向绑定**

在指令中：

```
scope : { nameValue : "=name" },
link : function(scope) {
  scope.name = "Changing the value here will get reflected in parent scope value";
} 
```

鉴于：

```
<my-widget name="{{nameFromParentScope}}"></my-widget> 
```

**& – 函数调用**

在指令中：

```
scope : { nameChange : "&" }
link : function(scope) {
  scope.nameChange({newName:"NameFromIsolaltedScope"});
} 
```

鉴于：

```
<my-widget nameChange="onNameChange(newName)"></my-widget> 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-12-16T12:34:03.393

我花了很长时间才真正掌握了这一点。对我来说，关键是要理解“@”用于您想要就地评估并作为常量传递到指令中的东西，其中“=”实际上传递了对象本身。

有一篇很好的博客文章解释了这一点：[http ://blog.ramses.io/technical/AngularJS-the-difference-between-@-&-and-=-when-declaring-directives-using-isolate-scopes](http://blog.ramses.io/technical/AngularJS-the-difference-between-@-&-and-=-when-declaring-directives-using-isolate-scopes)

# testing - 谁能解释为什么这里的答案是 2？

> ID：14908136
> 
> 赞同：-2
> 
> 时间：2013-02-16T07:39:42.227
> 
> 标签：testing, qa

我怀疑以下问题的答案应该是**4**但样本的答案说它是**2**。我试图找到正确答案的证据，但没有成功。

**配置管理系统通常不会提供：**

1.  将客户要求与版本号联系起来。
2.  将测试结果与预期结果进行比较的设施。
3.  软件组件源代码版本的精确差异。
4.  限制对源代码库的访问。

    答案：2

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T07:59:21.813

您说的是 SAP 配置管理系统。答案确实是 2，因为 CM 用于跟踪您在 SAP 中配置的内容。

1.  不同版本有什么样的要求 -> true
2.  测试结果 -> 我们没有跟踪 CM 中的测试结果
3.  源代码的差异 -> 是的，就像 CVS
4.  限制对源代码的访问 -> 是的，您可以从 CM 跳转到 SPRO 等中的任何事务。

# jquery - Ajax 成功取代 div

> ID：14908139
> 
> 赞同：0
> 
> 时间：2013-02-16T07:40:19.013
> 
> 标签：jquery, html, ajax

我有ajax功能：

**在 html 文件中，我有类似的内容：**

```
<div id="datos98" style="display:none;">
</div>
<div id="datos99" style="display:none;">
</div>
<div id="usuario">
    <table id="rowed2"></table>
    <div id="prowed2"></div>
</div>
<script src="rowedex2.js" type="text/javascript"> </script> 
```

**在我的 js 文件的某些地方，我有一个这样的 ajax 函数：**

```
$.ajax({
    type: 'POST',
    url : 'server2.php',
    data: &ciudadh=juan&corporacionh=&radicado=&ultima=&anotaciones=&oper=addf&id='+allRows+'',

    beforeSend: function(){
        $('#mensaje5').show().html('<br><br><h2>Por favor  espere....<br><img src="c.gif" width="100" height="100" alt="cargando" border="0">');
    },

    success: function (data){
        $('#datos99').html(data);
    },

    complete: function(){
        $('#datos99').show();
    }
}); 
```

该功能很好，但是当此功能成功时，数据会加载到此

```
<div id="datos99" style="display:none;">
</div> 
```

但是数据太长了，所以我需要这个 div 取代底部的其他 div（在`datos99`div 的下方）。所以可以读取所有信息（加载的数据 ajax 和它之前停留在这里的数据）。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T08:14:40.973

用这个改变你的代码

```
$.ajax({
type: 'POST',
url : 'server2.php',
data: 'ciudadh=juan&corporacionh=&radicado=&ultima=&anotaciones=&oper=addf&id='+allRows,

beforeSend: function(){
    $('#mensaje5').show().html('<br><br><h2>Por favor  espere....<br><img src="c.gif" width="100" height="100" alt="cargando" border="0">');
},

success: function (data){
    $('#datos99').html(data);
}
 }).complete(function(){
    $('#datos99').show();
 }); 
```

或对此：

```
$.ajax({
type: 'POST',
url : 'server2.php',
data: 'ciudadh=juan&corporacionh=&radicado=&ultima=&anotaciones=&oper=addf&id='+allRows,

beforeSend: function(){
    $('#mensaje5').show().html('<br><br><h2>Por favor  espere....<br><img src="c.gif" width="100" height="100" alt="cargando" border="0">');
},

success: function (data){
    $('#datos99').html(data);
     $('#datos99').show();
}, 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T08:20:20.390

你的问题不是很清楚，但我会尝试一下。如果我理解您的问题，我认为您的问题与您分配`<div id="datos99">`的固定高度为 900px 的事实有关。因此，当它填充从 ajax 调用返回的数据时，它会弄乱您的布局。发生这种情况是因为返回的数据太大而无法放入 div。

您可以通过将`overflow: auto`CSS 添加到`<div id="datos99">`. 这将允许您的 ajax 数据很好地适合 div 并在数据大于 div 的高度时提供滚动条

**CSS：**

```
#datos99 {
    position: absolute; 
    top: 320px; 
    left: 25px; 
    width: 674px; 
    padding: 50px; 
    height: 900px;
    overflow: auto;
 } 
```

PS您应该编辑您的问题并提供更多信息。它将帮助我们更好地回答您的问题。我还会调整您的问题并更清楚地说明您的问题。

# spotify - Preview API 中缺少身份验证

> ID：14908141
> 
> 赞同：1
> 
> 时间：2013-02-16T07:40:46.630
> 
> 标签：spotify

我希望能够从 Spotify 中连接到我的 Facebook 应用程序（Coke Highlights 允许这样做）。

但是，在 Preview API（我的应用程序需要它）中，authenticateWithFacebook 似乎丢失了：

[http://developer.spotify.com/technologies/apps/docs/09321954e7.html](http://developer.spotify.com/technologies/apps/docs/09321954e7.html)

最接近的是：

[https://developer.spotify.com/technologies/apps/docs/preview/api/api-facebook-facebooksession.html](https://developer.spotify.com/technologies/apps/docs/preview/api/api-facebook-facebooksession.html)

您可以在哪里使用 showConnectUI，但这似乎不起作用并且没有记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-15T19:45:03.740

该`auth`模块一开始并不存在，但现在它是 Spotify Apps API 的一部分。您可以在[其文档页面](https://developer.spotify.com/docs/apps/api/1.0/api-auth-auth.html)上阅读更多相关信息。它看起来像这样：

```
 require(['$api/auth#Auth'], function(Auth) {
    var appId = '<your_app_id>',
        permissions = ['user_about_me'];

    var auth = new Auth();
    auth.authenticateWithFacebook(appId, permissions)
      .done(function(params) {
        if (params.accessToken) {
          console.log('Your access token: ' + params.accessToken);
        } else {
          console.log('No access token returned');
        }
      }).fail(function(req, error) {
          console.error('The Auth request failed with error: ' + error);
      });
    }
  }); 
```

此外，[GitHub 上](https://github.com/spotify/apps-tutorial)的Tutorial App 中有[一个工作示例](https://github.com/spotify/apps-tutorial/blob/master/tutorials/facebook/authenticate.html)。

# sql - 类似 SQL 的搜索字符串以

> ID：14908142
> 
> 赞同：72
> 
> 时间：2013-02-16T07:41:08.080
> 
> 标签：sql

学习 SQL。有一个带有字段标题的简单桌面游戏。我想根据标题进行搜索。如果我有一个名为 的游戏`Age of Empires III: Dynasties`，并且我使用`LIKE`with parameter `Age of Empires III: Dynasties`，一切正常，搜索返回具有该名称的记录。但如果我用 搜索`Age of Empires III`，它不会返回任何记录：

```
SELECT * from games WHERE (lower(title) LIKE 'age of empires III'); 
```

这不会返回任何东西。我应该使用其他东西代替`LIKE`吗？

我正在使用 MySQL。

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2013-02-16T07:52:57.063

```
SELECT * from games WHERE (lower(title) LIKE 'age of empires III'); 
```

上面的查询没有返回任何行，因为您正在寻找任何行中都不存在的“帝国时代 III”确切的字符串。

因此，为了与具有不同字符串的字符串匹配，`'age of empires'`您需要使用该字符串作为子字符串`'%your string goes here%'`

更多关于[mysql 字符串比较](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html)

你需要试试这个

```
SELECT * from games WHERE (lower(title) LIKE '%age of empires III%'); 
```

在 Like`'%age of empires III%'`中，它将在您的行中搜索任何匹配的子字符串，并将显示在结果中。

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2013-02-16T07:45:53.477

您需要使用通配符**%**：

```
SELECT * from games WHERE (lower(title) LIKE 'age of empires III%'); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2019-03-29T07:34:21.347

除了使用`%`,`age of empires III`小写是`age of empires iii`这样你的查询应该是：

```
select *
from games
where lower(title) like 'age of empires iii%' 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-16T07:45:21.913

`COLLATE UTF8_GENERAL_CI`将作为忽略案例工作。利用：

```
SELECT * from games WHERE title COLLATE UTF8_GENERAL_CI LIKE 'age of empires III%'; 
```

或者

```
SELECT * from games WHERE LOWER(title) LIKE 'age of empires III%'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-10T00:48:39.480

在 SQL 中，%---% 匹配介于两者之间的任何字符。 `select * from table_name where column_name line '%kk%';`将匹配任何包含 'ss' 的字符串，例如：

*   llsll
*   ssll 如果你想匹配字符串的开头，你应该使用'ss%'。 `select * from table_name where column_name line 'ss%';`此查询将仅返回 ssll。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-10T03:08:55.337

如果您使用不带 % 的“like”运算符，则 like 将作为等号 (=) 工作，这意味着您的代码将如下所示：

```
select * from games where lower(title)= 'age of empires iii'; 
```

所以它没有找到任何匹配的数据，然后什么也没有返回。

但是，如果您只想将标题的一部分与您的参数进行比较，则应使用 % 符号。您可以在不同的位置使用它，这取决于数据库的逻辑。

一般用在参数的开头和结尾，代码如下：

```
select * from games where lower(title) like '%age of empires iii%'; 
```

即使开头或结尾或两者都有不匹配的字符，这也会搜索标题列中的值。它将搜索的重要条件是值作为参数发送给 like 运算符（在这种情况下，该值是“帝国时代 iii”）在标题字段的某处找到（在这种情况下，标题是“帝国时代 III : Dynasties")，并且此条件为真，因此将返回该行以及任何其他具有相同大小写的行。

# android - 在没有用户交互的情况下发送邮件与android中的Intent

> ID：14908143
> 
> 赞同：2
> 
> 时间：2013-02-16T07:41:09.203
> 
> 标签：android, email, android-intent, sendmail

我想在用户单击按钮时发送邮件，并且在那之后我不应该进行任何交互，并且应该使用移动设备中的电子邮件客户端自动发送邮件。

请帮助我找到解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T08:31:02.877

我同意@TGMClains 如果您希望手机中没有用户与邮件客户端的交互，那么您需要创建自己的电子邮件客户端...查看以下帖子。

[在不使用默认/内置应用程序的情况下使用 JavaMail API 在 Android 中发送电子邮件](https://stackoverflow.com/questions/2020088/sending-email-in-android-using-javamail-api-without-using-the-default-built-in-a/2033124#2033124)

希望这能解决你的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T07:50:10.110

根本不可能在没有用户交互的情况下通过 Gmail 等电子邮件客户端发送电子邮件。

除了 Java Mail API，我建议你用 PHP 编写任何 Web API，并在那里编写代码来发送邮件并在你的 Android 代码中调用这个 Web API。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T07:50:23.060

在你的`onClick()`放这个：

```
startActivity(new Intent(Intent.ACTION_SENDTO, Uri.parse("mailto:to@gmail.com")); 
```

# sql - SQL Server 中的 OrderBy 将正值放在负值之前

> ID：14908147
> 
> 赞同：9
> 
> 时间：2013-02-16T07:42:06.083
> 
> 标签：sql, sql-server, sql-order-by

我在 SQL Server 中有一个表，其中包含一个“int”类型的列。该列可以包含正值和负值。我想根据该列值进行排序，使该列中具有正值的行排在负值之前。

例子：

```
Code SortColumn
A     1
B     5
C    -1
D    -3
E     0
F     2 
```

期望的输出：

```
Code SortColumn
E        0
A        1
F        2
B        5
C       -3
D       -1 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-16T07:53:50.907

```
Select * from Table
order by 
Case when sortcolumn<0 then 1 else 0 end
,sortcolumn 
```

# wpf - 将应用程序级样式应用于所有文本框

> ID：14908148
> 
> 赞同：24
> 
> 时间：2013-02-16T07:42:14.570
> 
> 标签：wpf, xaml, styles

如何将 Application.xaml 中定义的样式应用于特定窗口中的所有文本框？我不想`Style="{StaticResource MyStyle}"`用它们中的每一个都打字，因为实际上有几十个。这是 WPF + VS2010。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-16T07:46:30.527

然后只需将其添加`Style`到您的`App.Xaml`或您的`Theme.xaml`（如果您有的话）甚至您的（`Window.Resources`如果您只有 1的话） `Window`，只要确保您没有设置`x:Key`

例子：

这将适用于所有`TextBoxes`（没有 x:Key）

```
<Style TargetType="{x:Type TextBox}">
    <Setter Property="Foreground" Value="Red" />
</Style> 
```

必须使用 TextBoxes`Style="{StaticResource MyStyle}"`才能使用它：

```
<Style x:Key="MyStyle" TargetType="{x:Type TextBox}">
    <Setter Property="Foreground" Value="Red" />
</Style> 
```

# html - 我的 Html/CSS 代码中有这个三角形，但我不知道那是什么

> ID：14908154
> 
> 赞同：-1
> 
> 时间：2013-02-16T07:43:54.037
> 
> 标签：html, css

看看这个

```
 th.asc a:after {
    content: '▲';
} 
```

可以在键盘上键入什么可以使该符号出现？这个符号是什么？我应该什么时候使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T07:45:51.807

该字符将在`<a>`标签内的`th`标签之后呈现，并且可能查看您的类名`asc`它表示**升序排序**，它仅用作表示升序排序的图标

更多关于 CSS[内容](http://css-tricks.com/css-content/)属性

关于[三角形字符的信息](http://www.fileformat.info/info/unicode/char/25b2/index.htm)

```
th.asc a:after
     ---^---
/* This makes the content character render after the <a> tag which is inside 
   th having class .asc which I assume stands for ascending, if you use :before 
   instead of :after, triangle will be rendered before the <a> tag text */ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T08:00:18.783

It is a Unicode character, that besides giving support to all the different alphabets in the world, have graphics chars.

You have a lot of pages to look for unicode characters. One specially curious is

[shapecatcher](http://shapecatcher.com/)

where you can draw the shape that you wanty.

Specifying them in the CSS is easy, you just have to put the number behind a backslash

'\25A0'

is a square

# hadoop - 安装 Hadoop 后 RHIPE 安装错误，R 用于单节点集群？

> ID：14908156
> 
> 赞同：0
> 
> 时间：2013-02-16T07:44:06.003
> 
> 标签：hadoop

我正在尝试使用此链接安装 RHIP，

[http://ksssblogs.blogspot.com/2011/09/working-of-r-on-hadooprhipe.html](http://ksssblogs.blogspot.com/2011/09/working-of-r-on-hadooprhipe.html)

我在执行“R CMD INSTALL Rhipe_0.69.tar.gz”时成功配置了所有东西

我收到这个错误，

```
[root@localhost ~]# R CMD INSTALL Rhipe_0.69.tar.gz
* installing to library ‘/usr/local/lib/R/library’
* installing *source* package ‘Rhipe’ ...
checking for gcc... gcc -std=gnu99
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... no
checking for suffix of executables...
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc -std=gnu99 accepts -g... yes
checking for gcc -std=gnu99 option to accept ISO C89... none needed
configure: creating ./config.status
config.status: creating src/Makevars
** libs
g++ -I/usr/local/lib/R/include -DNDEBUG  -I/usr/local/include    -fpic  -g -O2  -I.  -g -O2  -DUSEAUTOSHORT -DHAVE_UINTPTR_T    `/usr/local/lib/R/bin/R CMD config --cppflags` `pkg-config --cflags protobuf` -c rexp.pb.cc -o rexp.pb.o
In file included from rexp.pb.cc:4:
rexp.pb.h:12:2: error: #error This file was generated by a newer version of protoc which is
rexp.pb.h:13:2: error: #error incompatible with your Protocol Buffer headers. Please update
rexp.pb.h:14:2: error: #error your headers.
rexp.pb.h: In member function ‘void REXP::clear_rawvalue()’:
rexp.pb.h:672: error: ‘kEmptyString’ is not a member of ‘google::protobuf::internal’
rexp.pb.h: In member function ‘void REXP::set_rawvalue(const std::string&)’:
rexp.pb.h:682: error: ‘kEmptyString’ is not a member of ‘google::protobuf::internal’
rexp.pb.h: In member function ‘void REXP::set_rawvalue(const char*)’:
rexp.pb.h:689: error: ‘kEmptyString’ is not a member of ‘google::protobuf::internal’
rexp.pb.h: In member function ‘void REXP::set_rawvalue(const void*, size_t)’:
rexp.pb.h:696: error: ‘kEmptyString’ is not a member of ‘google::protobuf::internal’
rexp.pb.h: In member function ‘std::string* REXP::mutable_rawvalue()’:
rexp.pb.h:703: error: ‘kEmptyString’ is not a member of ‘google::protobuf::internal’
rexp.pb.h: In member function ‘std::string* REXP::release_rawvalue()’:
rexp.pb.h:710: error: ‘kEmptyString’ is not a member of ‘google::protobuf::internal’
rexp.pb.h:714: error: ‘kEmptyString’ is not a member of ‘google::protobuf::internal’
rexp.pb.h: In member function ‘void STRING::clear_strval()’:
rexp.pb.h:853: error: ‘kEmptyString’ is not a member of ‘google::protobuf::internal’
rexp.pb.h: In member function ‘void STRING::set_strval(const std::string&)’:
rexp.pb.h:863: error: ‘kEmptyString’ is not a member of ‘google::protobuf::internal’
rexp.pb.h: In member function ‘void STRING::set_strval(const char*)’:
rexp.pb.h:870: error: ‘kEmptyString’ is not a member of ‘google::protobuf::internal’
rexp.pb.h: In member function ‘void STRING::set_strval(const char*, size_t)’:
rexp.pb.h:877: error: ‘kEmptyString’ is not a member of ‘google::protobuf::internal’
rexp.pb.h: In member function ‘std::string* STRING::mutable_strval()’:
rexp.pb.h:884: error: ‘kEmptyString’ is not a member of ‘google::protobuf::internal’
rexp.pb.h: In member function ‘std::string* STRING::release_strval()’:
rexp.pb.h:891: error: ‘kEmptyString’ is not a member of ‘google::protobuf::internal’
rexp.pb.h:895: error: ‘kEmptyString’ is not a member of ‘google::protobuf::internal’
rexp.pb.cc: In member function ‘void REXP::SharedCtor()’:
rexp.pb.cc:256: error: ‘kEmptyString’ is not a member of ‘google::protobuf::internal’
rexp.pb.cc: In member function ‘void REXP::SharedDtor()’:
rexp.pb.cc:265: error: ‘kEmptyString’ is not a member of ‘google::protobuf::internal’
rexp.pb.cc: In member function ‘virtual void REXP::Clear()’:
rexp.pb.cc:296: error: ‘kEmptyString’ is not a member of ‘google::protobuf::internal’
rexp.pb.cc: In member function ‘void STRING::SharedCtor()’:
rexp.pb.cc:905: error: ‘kEmptyString’ is not a member of ‘google::protobuf::internal’
rexp.pb.cc: In member function ‘void STRING::SharedDtor()’:
rexp.pb.cc:915: error: ‘kEmptyString’ is not a member of ‘google::protobuf::internal’
rexp.pb.cc: In member function ‘virtual void STRING::Clear()’:
rexp.pb.cc:945: error: ‘kEmptyString’ is not a member of ‘google::protobuf::internal’
make: *** [rexp.pb.o] Error 1
ERROR: compilation failed for package ‘Rhipe’
* removing ‘/usr/local/lib/R/library/Rhipe’
* restoring previous ‘/usr/local/lib/R/library/Rhipe’ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:43:28.770

您遇到的问题是由于缺少 bin-utils。你安装的是这个 Ubuntu 吗？如果是这样，您需要安装 binutils-gold 包。

```
sudo apt-get install binutils-gold 
```

# php - 如何从 PHP 中的递归函数中计算 xml 的元素？

> ID：14908161
> 
> 赞同：0
> 
> 时间：2013-02-16T07:45:00.250
> 
> 标签：php, recursion, simplexml

这是我尝试过的，但数字是错误的，我不知道为什么

![在此处输入图像描述](../Images/ad214c16189693fd7eb587c6917e0b25.png)

它应该是 1、2、3、4、5 等等。

这是我的PHP代码：

```
function GetNavigations(SimpleXMLElement $element, $level = 0, $mrg = 0)
{   
    $value = trim((string) $element); 
    $children = $element->children(); 
    $attributes = $element->attributes();
    //echo '<ul>';  
    if(count($children) == 0 && !empty($value))
    {   
    if($element->getName() == 'GroupName')
        {
            if($attributes['ParentId'] != '')
            {
                //$mrg = $level/2 * 10;
                echo '<li>'.$mrg.'<a class="btngroup" href="load.php?active=menu&group_name_id='.$attributes['GroupNameId'].'">'.$element.'</a></li>';
            }   
        }
    }

    if(count($children))
    {
        foreach($children as $child)
        {
            GetNavigations($child, $level+1, $mrg+1);
        } 
    }
    //echo '</ul>';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T21:47:19.127

`GetNavigations($child, $level+1, $mrg+1)`将相同的值传递`$mrg`给一个节点的所有子节点，无论它有多少子节点，因为`$mrg`在该循环内的其他任何地方都没有改变。而不是`$mrg+1`，您可以通过`++$mrg`- 或者更具可读性，添加`$mrg++;`为之前的行，然后通过`$mrg`。

但是，您仍然会遇到问题，该函数只知道显示了多少直接子代，而不知道有多少后代 - 如果您`GetNavigations`使用 的`$mrg`值调用`2`，并且它显示 20 个嵌套项，那么您的下一个值`$mrg`将是`3`，而不是`23`！尽管它们都具有相同的名称，但每次运行该函数时，都会有一个新`$mrg`变量。

为了解决这个问题，您可以：

*   通过`$mrg`引用传入（通过将函数声明更改为`function GetNavigations(SimpleXMLElement $element, $level = 0, &$mrg)`添加`&`，以便函数的所有副本都可以写入同一个变量。
*   `$mrg`将out的新值作为函数的值传递`return`。

我可能更喜欢第二种方法，因为任何阅读代码的人都更清楚发生了什么：

```
function GetNavigations(SimpleXMLElement $element, $level = 0, $mrg = 0)
{   
    /* [snip] */

    if($element->getName() == 'GroupName')
    {
            // Increment counter, because we're displaying something
            $mrg++;

            /* [snip] */
    }

    /* [snip] */

    if(count($children))
    {
        foreach($children as $child)
        {
            // Recurse, and get incremented value of counter
            $mrg = GetNavigations($child, $level+1, $mrg);
        } 
    }

    /* [snip] */

    // Let caller know where the counter has got to
    return $mrg;
} 
```

# android - 在imageadapter中将url数组设置为imageview

> ID：14908163
> 
> 赞同：0
> 
> 时间：2013-02-16T07:45:31.210
> 
> 标签：android, video

我遇到问题了`connection.connect();`

`android.os.NetworkOnMainThreadException in android`

我收到此错误如何将 asychtask 设置为此图像适配器我无法在 imageview 中显示该 url 图像

```
public class ImageAdapter extends BaseAdapter {
    private Context context;
    public static final String[] videos={

    "http://img.youtube.com/vi/QshNtQsiL7Y/1.jpg","http://img.youtube.com/vi/5_-tL63516w/1.jpg",
                "http://img.youtube.com/vi/CDEg9npvBa0/1.jpg"};
    private ImageView imageview;
        public ImageAdapter(Context c) {
            // TODO Auto-generated constructor stub
            context=c;
        }

        @Override
        public int getCount() {
            // TODO Auto-generated method stub
            return videos.length;
        }

        @Override
        public Object getItem(int position) {
            // TODO Auto-generated method stub
            return videos[position];
        }

        @Override
        public long getItemId(int position) {
            // TODO Auto-generated method stub
            return 0;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            // TODO Auto-generated method stub
            ImageView imageview = new ImageView(context);
            imageview.setImageBitmap(getBitmapFromURL(videos[position]));
            return imageview;
        }
        public static Bitmap getBitmapFromURL(String src) {  
            try {
                URL url = new URL(src);
                HttpURLConnection connection = (HttpURLConnection) url
                        .openConnection();
                connection.setDoInput(true);
                connection.connect();
                InputStream input = connection.getInputStream();
                Bitmap mybitmap = BitmapFactory.decodeStream(input);
                return mybitmap;

            } catch (Exception ex) {

                ex.printStackTrace();
                return null;
            }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T08:23:56.297

当应用程序尝试在 HoneyComb 或更高版本的主线程上执行网络操作时，会引发此异常......因此，为了在列表视图中执行图像的异步加载，您可以使用延迟加载概念....有很多图书馆……请找到一些……的链接

[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

[ListView 中图像的延迟加载](https://stackoverflow.com/questions/541966/how-do-i-do-a-lazy-load-of-images-in-listview)

希望能帮助到你

# android - 如何跨会话保存 ListView 数据？

> ID：14908167
> 
> 赞同：1
> 
> 时间：2013-02-16T07:45:54.847
> 
> 标签：android, sqlite, android-listview

**介绍：**

冒着关闭问题的风险，无论如何我都会尝试问它。我确实搜索了很多，但大多数都是关于`ListView`在方向更改期间保存状态并在返回`Activity`. 这不是我要找的。

诸如 Twitter 应用程序和其他几个类似应用程序的应用程序将恢复到您上次使用该应用程序时的相同状态。当您返回应用程序时，任何新数据（如果可用）都会加载到当前位置之上。

在我当前的设置中，我使用了三个类。

1.  `public class NewNotifications extends SherlockFragment {....} // THE FRAGMENT WHERE THE DATA IS PROCESSED`
2.  `public class NewNotificationsAdapter extends BaseAdapter {....} // THE ADAPTER FOR THE CUSTOM LISTVIEW`
3.  `public class NotificationsData {} // A HELPER SETTER / GETTER CLASS`

当前显示的所有数据都是使用 Facebook SDK 实时获取的，一切正常。但我担心发生的大量数据使用。例如，上述三个类协同工作以显示当前登录用户的任何新/旧通知。但是每次用户单击*通知*按钮时，无论是新通知，都会再次获取相同的数据。这让我想到了首要问题。

**问题：**

主要问题是，`ListView`无论设备在做什么，Twitter 等应用程序如何存储确切的位置？我可以重新启动手机 20 次，仍然回到相同的状态。

显然，数据存储在某处。他们将它们存储在文件中`Database`还是`SharedPreference`文件中？*我倾向于认为`Database`。*但我很想知道任何其他选择。我自然也倾向于认为在处理接收到的数据的同时（*在 Fragment 中*）存储接收到的数据将是最好的选择。

*他们是否有任何图书馆可以完成我的 Google foo 找不到的这项任务？还是我必须自己为这样的任务创建逻辑？*不管有什么建议，我都愿意接受每一个建议。我不是在寻找一个懒惰的现成解决方案。我只是寻求建议/方向。:-)

我很抱歉这个问题的状态非常主观，很可能会被关闭。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T08:23:59.653

如果您想保存来自您的应用程序的数据，您想在您的应用程序中恢复，无论应用程序生命周期在做什么，您都需要将数据独立地保存在内部数据库或内部/外部设备存储中。

# php - php从数组/mysql查询中提取并为每行定义变量而不覆盖

> ID：14908170
> 
> 赞同：0
> 
> 时间：2013-02-16T07:46:00.773
> 
> 标签：php, mysql, arrays, extract

我有一个 mySQL 数据库，它在 index.php 的表中被查询和显示。我有一个名为的文件，它处理从查询中输出的每个表中`up.php`的单击。我需要有一个变量，我可以从查询的每个单独行中的字段中提取该变量，以便在单击时将变量传递给要操作的 up.php 文件。现在变量刚刚被覆盖，等于查询到的最后一行的值，并且数据库经常更新，所以我不能只为每一行设置一个，它必须是动态的。`<a>``index.php``<a>`

这是 index.php 文件

```
<?php
$sql = mysql_query("SELECT * FROM blogData ORDER BY id DESC");
//query for even numbered rows where mes_id = even
$sql2=mysql_query("SELECT * FROM messages WHERE mod(mes_id,2) = 0 ORDER BY mes_id DESC");
//query for odd numbered rows where mes_id = even
$sql3=mysql_query("SELECT * FROM messages WHERE mod(mes_id,2) = 1 ORDER BY mes_id DESC");

while(($row = mysql_fetch_array($sql))AND($row2 = mysql_fetch_array($sql2))AND($row3 = mysql_fetch_array($sql3)) ){
$id = $row['id'];
$title = $row['title'];
$content = $row['content'];
$category = $row['category'];
$podcast = $row['podcast'];
$datetime = $row['datetime'];

$message1=$row2['msg'];

//******* this is the variable from the query that needs to be held and not overwritten ********
$mes_id1=$row2['mes_id'];

$totalvotes1=$row2['totalvotes'];

$message2=$row3['msg'];

//******* this is the second variable from the query that needs to also be held and not overwritten *******
$mes_id2=$row3['mes_id'];

$totalvotes2=$row3['totalvotes'];

//attempting to implement this array...? not sure how to use it correctly...
$valuess[]=$row2['mes_id'];

//******* I was trying to use these session variables in up.php but they were being overwritten in the query ********
$_SESSION['message1'] = $row2['msg'];
$_SESSION['message2'] = $row3['msg'];
$_SESSION['mes_id1'] = $row2['mes_id'];
$_SESSION['mes_id2'] = $row3['mes_id'];
$_SESSION['totalvotes1'] = $row2['totalvotes'];
$_SESSION['totalvotes2'] = $row3['totalvotes'];
$_SESSION['valuess'] = $valuess[1];
?>

<?php
// variable used to display file name of $podcast without the extension
$noext = $podcast;
$echodub = rawurlencode($podcast);
// code to display $noext without the file extension
$info = pathinfo($noext);
$noext_name =  basename($noext,'.'.$info['extension']);
?>

<!--  ********* echo php variables in html format, in a table with the class of "podcast" -->
<table class="podcast" border="1">
<tr>
    <td class="title">
     <?php echo $title; ?>
    </td>
    <td class="timeandcategory">
     <?php echo $datetime; ?>  <br>
     <?php echo $category; ?>
     <?php echo $_SESSION['mes_id1']; ?>
     <?php echo $_SESSION['mes_id2']; ?>
     <?php echo session_id(); ?>
    </td>
</tr>
<tr>
    <td class="content">
     <?php echo $content; ?>
    </td>
    <td class="myfblike">

 <span class='st_fblike_large' displayText='Facebook Like'></span><br>
     <span class='st_facebook_large' displayText='Facebook'></span><br>
     <span class='st_twitterfollow_large' displayText='Twitter Follow'></span><br>
     <span class='st_pinterest_large' displayText='Pinterest'></span><br>
     <span class='st_email_large' displayText='Email'></span><br>
     <span class='st_sharethis_large' displayText='ShareThis'></span><br>

    </td>

</tr>
<tr>
    <td class="audio">
     <!--echo the audio file -->
      <ul class="playlist">
       <li><a href="<?php echo"uploads/$podcast"; ?>"><?php echo"$noext_name"; ?></a></li>

      </ul>

    </td>
    <td>

     <!-- ********** this is the cell in the table where the veriables need to be held and sent to up.php ******** -->

<div id="main">
<div id="left">
<span class='up'><a href="up.php" class="" id="<?php echo $valuess[1]; ?>" name="up"><img src="up.png" alt="Down" /></a></span><br />
<?php echo $_SESSION['totalvotes1'] ?><br />
</div>
<div id="message">
<?php echo $_SESSION['message1'] ?>
</div>
<div class="clearfix"></div>
</div>
//********the down.php file is the same as the up.php file... just with opposite variables... im not concerned with this yet until i get the variables to display correctly in up.php
<div id="main">
<div id="left">
<br />
<?php echo $_SESSION['totalvotes2'] ?><br />
<span class='down'><a href="down.php" class="" id="<?php echo $_SESSION['mes_id2']; ?>" name="down"><img src="down.png" alt="Down" /></a></span>
</div>
<div id="message">
<?php echo $_SESSION['message2'] ?>
</div>
<div class="clearfix"></div>
</div>

    </td>
</tr>

</table>

<br>
<?php
 }
?> 
```

这是 up.php 文件

```
up.php

<?php
session_start();
include("config.php");

$message1 = $_SESSION['message1'];
$message2 = $_SESSION['message2'];
$mes_id1 = $_SESSION['mes_id1'];
$mes_id2 = $_SESSION['mes_id2'];
$totalvotes1 = $_SESSION['totalvotes1'];
$totalvotes2 = $_SESSION['totalvotes2'];
$ip=$_SERVER['REMOTE_ADDR'];

$ip_sql=mysql_query("select ip_add from Voting_IP where mes_id_fk='$mes_id1' and ip_add='$ip'");
$count=mysql_num_rows($ip_sql);
$ip_sql2=mysql_query("select ip_add from Voting_IP where mes_id_fk='$mes_id2' and ip_add='$ip'");
$count2=mysql_num_rows($ip_sql2);
//********* testing if these variables are being passed.....
echo $mes_id1;
echo $mes_id2;
$valuess[0] = $_SESSION['valuess'];
echo $valuess[0];
//********
// if the user has already voted, execute script
if($count==0 && $count2!=0)
{
$sql = "update Messages set totalvotes=totalvotes+1  where mes_id='$mes_id1'";
mysql_query( $sql);
$sql_in = "insert into Voting_IP (mes_id_fk,ip_add) values ('$mes_id1','$ip')";
mysql_query( $sql_in);
$sql = "update Messages set totalvotes=totalvotes-1  where mes_id='$mes_id2'";
mysql_query( $sql);
$sql_in = "DELETE FROM Voting_IP WHERE mes_id_fk='$mes_id2'";
mysql_query( $sql_in);
// if the user has not voted, execute script
}
else if($count==0 && count2==0)
{
$sql = "update Messages set totalvotes=totalvotes+1  where mes_id='$mes_id1'";
mysql_query( $sql);
$sql_in = "insert into Voting_IP (mes_id_fk,ip_add) values ('$mes_id1','$ip')";
mysql_query( $sql_in);
echo $mes_id1;
echo $mes_id2;
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T07:50:45.983

你可以这样试试。希望这会对你有所帮助

```
<?php
$sql = mysql_query("SELECT * FROM blogData ORDER BY id DESC");
//query for even numbered rows where mes_id = even
$sql2=mysql_query("SELECT * FROM messages WHERE mod(mes_id,2) = 0 ORDER BY mes_id DESC");
//query for odd numbered rows where mes_id = even
$sql3=mysql_query("SELECT * FROM messages WHERE mod(mes_id,2) = 1 ORDER BY mes_id DESC");

$count_variable = 0;

while(($row = mysql_fetch_array($sql))AND($row2 = mysql_fetch_array($sql2))AND($row3 = mysql_fetch_array($sql3)) ){
$id = $row['id'];
$title = $row['title'];
$content = $row['content'];
$category = $row['category'];
$podcast = $row['podcast'];
$datetime = $row['datetime'];

$message1=$row2['msg'];

//******* this is the variable from the query that needs to be held and not overwritten ********
$mes_id1=$row2['mes_id'];

$totalvotes1=$row2['totalvotes'];

$message2=$row3['msg'];

//******* this is the second variable from the query that needs to also be held and not overwritten *******
$mes_id2=$row3['mes_id'];

$totalvotes2=$row3['totalvotes'];

//attempting to implement this array...? not sure how to use it correctly...
$valuess[]=$row2['mes_id'];

//******* I was trying to use these session variables in up.php but they were being overwritten in the query ********
$_SESSION['message1'][$count_variable] = $row2['msg'];
$_SESSION['message2'][$count_variable] = $row3['msg'];
$_SESSION['mes_id1'][$count_variable] = $row2['mes_id'];
$_SESSION['mes_id2'][$count_variable] = $row3['mes_id'];
$_SESSION['totalvotes1'][$count_variable] = $row2['totalvotes'];
$_SESSION['totalvotes2'][$count_variable] = $row3['totalvotes'];
$_SESSION['valuess'][$count_variable] = $valuess[1];

$count_variable++;
?>

<?php
// variable used to display file name of $podcast without the extension
$noext = $podcast;
$echodub = rawurlencode($podcast);
// code to display $noext without the file extension
$info = pathinfo($noext);
$noext_name =  basename($noext,'.'.$info['extension']);
?> 
```

这将返回一个会话数组，如下所示：

数组（'message1'：{0：'mnhj'，1：'jhf'}，'message2'：{0：'jhg'，1：'jhgjh'}）；ETC...

# c# - OOP C#：如何编写在 WinForm 和控制台中都可以使用的吐出数组的方法？

> ID：14908172
> 
> 赞同：-1
> 
> 时间：2013-02-16T07:46:27.963
> 
> 标签：c#, oop

我正在尝试编写一种可在 winform 和控制台中使用的方法。

这是我的代码：

```
 public class BeerKoozie
    {
        public bool IsSinging = false;
        //Your classes aren't working because you didn't have a constructor method.
        public BeerKoozie()
        {
            for (int beerCount = 0; beerCount < 100; beerCount++)
            {
                beerCollection[beerCount] = new Beer();

                if (beerCount == 99)
                {
                    IsSinging = true;
                }
            }
        }

        //needs a collection representing one hundred beers.
        Beer[] beerCollection = new Beer[100];

        // needs a notion of a current beer
        public int CurrentBeer = 99;

        // needs a notion of going to the next beer.
        public string DrinkAbeerAndSingTheSong()
        {
            //BeerKoozie.bee
            //foreach (Beer value in beerCollection)
            //foreach (Beer value in beerCollection)
            do(Beer i in beerCollection)
            {
                beerCollection[CurrentBeer].IsFull = false;

                CurrentBeer--;

            } while (CurrentBeer > 0);

            return CurrentBeer.ToString() + "... beers on the wall";

        } 
```

每当我尝试在最后打印`beerCollection[CurrentBeer]`出来时`.ToString`，方法的名称就会打印出来。那么，对于迭代整个数组，同时保持业务端和视图分离的平台无关方法，应该使用哪种模式呢？我可以轻松地编写一个仅适用于控制台或 winform 的方法，并使用其特定的字符串。 **（我的代码不可编译，因为我在弄乱该方法时破坏了它，并且无法将其恢复到以前的状态。我现在也有功能齐全的代码，因此无法重现该问题。）**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T07:56:29.987

从哪里开始？？？？！！！我不认为有任何可能的远程可以想象的方式可以编译......我将逐步完成并逐步建立我的答案。

好的，使用您的循环，请改为执行以下操作：

```
foreach(Beer i in beerCollection)
{
    i.IsFull = false;
} 
```

请注意`while`消失了（它与集合的 foreach 迭代无关），并且您的公开可见的索引/计数器消失了。

接下来，您的构造函数中的循环：

```
for (int i = 0; i < 100; i++)
{
    beerCollection[i] = new Beer();
}

IsSinging = true; 
```

更改`beerCount`为`i`- 这是一个语义参数，`i`是引用循环索引器的标准方式，并且键入要短得多，您不需要长的描述性名称。请注意`IsSinging`已移至循环外部 - 您只需在循环结束时设置它，您不需要条件语句来查看是否该设置它。

最后，回答你的问题：

> 如何编写一个吐出在 WinForm 和控制台中都有效的数组的方法？

这在两者中都有效 - 数组是一种语言结构，完全独立于您设置的项目/可执行文件类型。`BeerKoozie`是可以在其中任何一个中使用的类 - 只需将一个新的类库项目添加到您的解决方案，将`BeerKoozie`类添加到该新项目，然后您可以从引用新类项目的任何其他项目/程序集中调用它。

> 有没有办法多次返回？

不，那里没有。你完全搞混了——行`CurrentBeer.ToString() + "... beers on the wall";`需要在循环内，否则你正在做的就是调用函数，遍历整个集合并只返回一次。我建议您使用类似于以下内容的内容（我正在按照您的要求使用 do/while 循环）：

```
public string DrinkAbeerAndSingTheSong()  
{  
    CurrentBeer = beerCollection.Length - 1;  //take 1 off, remember the array index is zero based   
    //StringBuilder sb = new StringBuilder();
    do
    {
        beerCollection[CurrentBeer].IsFull = false;
        //sb.AddLine(CurrentBeer + "... beers on the wall");
        //Console.Writeline(CurrentBeer + "... beers on the wall");
        CurrentBeer--;
    } while (CurrentBeer > 0);

    return CurrentBeer + "... beers on the wall";
    //sb.AddLine(CurrentBeer + "... beers on the wall");  //don't forget the last line of the song
    //return sb.ToString();
} 
```

有了这个，您有几个选择，具体取决于您要实现的目标。您不想调用该方法 100 次来调整数组中啤酒的计数和状态，因此您应该在循环内完成所有工作。我假设您想要在动作发生时打印出歌曲的每一行，或者您想要返回整首歌曲，所以我已经包含了这两个 - 只需取消注释相应的代码并播放即可。

# javascript - 如何通过单击输入按钮触发功能

> ID：14908179
> 
> 赞同：0
> 
> 时间：2013-02-16T07:47:34.860
> 
> 标签：javascript, button, input, meteor

我想知道如何在单击输入按钮后让我的输入字段提交其数据，我目前已对其进行了设置，以便在您键入 enter 时它可以工作。

**js**

```
Messages = new Meteor.Collection('messages');

if (Meteor.is_client){

   ////////// Helpers for in-place editing //////////

  // Returns an event_map key for attaching "ok/cancel" events to
  // a text input (given by selector)
  var okcancel_events = function (selector) {
    return 'keyup '+selector+', keydown '+selector+', focusout '+selector;
  };

  // Creates an event handler for interpreting "escape", "return", and "blur"
  // on a text field and calling "ok" or "cancel" callbacks.
  var make_okcancel_handler = function (options) {
    var ok = options.ok || function () {};
    var cancel = options.cancel || function () {};

    return function (evt) {
      if (evt.type === "keydown" && evt.which === 27) {
        // escape = cancel
        cancel.call(this, evt);
      } else if (evt.type === "keyup" && evt.which === 13) {
        // blur/return/enter = ok/submit if non-empty
        var value = String(evt.target.value || "");
        if (value)
          ok.call(this, value, evt);
        else
          cancel.call(this, evt);
      }
    };
  };//added as test

    Template.entry.events = {};

    Template.entry.events[okcancel_events('#messageBox')] = make_okcancel_handler({
      ok:function(text, event){
        var nameEntry = document.getElementById('name');
        if(nameEntry.value != ""){
          var ts = Date.now() / 1000;
          Messages.insert({name: nameEntry.value, message: text, time: ts});
          event.target.value = "";
        }//if statment ends
      }
    });

  Template.messages.messages = function () {
    return Messages.find({}, { sort: {time: -1} });
  };
} 
```

**html**

```
<head>
  <title>tutorial</title>
</head>

<body>
 {{> entry}}

 {{> messages}}
</body>

<template name="entry">
    <p>
    <input type="text" id="name" placeholder="your name">
    <input type="text" id="messageBox" placeholder="your message">
    <input type="button" id="submit">
    </p>
</template>

<template name="messages">
    {{#each messages}}
        {{> message}} <!--echo of message template-->
    {{/each}}
</template>

<template name="message">
    <p><strong>{{name}}:</strong>{{message}}</p>
</template> 
```

该代码出现以下错误

```
Your app is crashing. Here's the latest log.

app/tuts.js:58
  Template.messages.messages = function () {
  ^^^^^^^^
SyntaxError: Unexpected identifier
    at /Users/anderskitson/Sites/tuts/.meteor/local/build/server/server.js:113:21
    at Array.forEach (native)
    at Function._.each._.forEach (/usr/local/meteor/lib/node_modules/underscore/underscore.js:79:11)
    at run (/Users/anderskitson/Sites/tuts/.meteor/local/build/server/server.js:99:7)
Exited with code: 1
Your application is crashing. Waiting for file change. 
```

我在下面做了以下但仍然出现错误

```
 if (Meteor.isServer) {
  Template.entry.events({
    'click #submit': function() {
        var nameEntry = document.getElementById('name');
        if(nameEntry.value != ""){
            var ts = Date.now() / 1000;
            Messages.insert({name: nameEntry.value, message: $('#messageBox').val(), time: ts});
        }
    }
}
} 
```

错误

```
Your app is crashing. Here's the latest log.

app/tuts.js:57
}
^
SyntaxError: Unexpected token }
    at /Users/anderskitson/Sites/tuts/.meteor/local/build/server/server.js:113:21
    at Array.forEach (native)
    at Function._.each._.forEach (/usr/local/meteor/lib/node_modules/underscore/underscore.js:79:11)
    at run (/Users/anderskitson/Sites/tuts/.meteor/local/build/server/server.js:99:7)
Exited with code: 1
Your application is crashing. Waiting for file change. 
```

**这是整个js文件**

```
Messages = new Meteor.Collection('messages');

if (Meteor.is_client){

   ////////// Helpers for in-place editing //////////

  // Returns an event_map key for attaching "ok/cancel" events to
  // a text input (given by selector)
  var okcancel_events = function (selector) {
    return 'keyup '+selector+', keydown '+selector+', focusout '+selector;
  };

  // Creates an event handler for interpreting "escape", "return", and "blur"
  // on a text field and calling "ok" or "cancel" callbacks.
  var make_okcancel_handler = function (options) {
    var ok = options.ok || function () {};
    var cancel = options.cancel || function () {};

    return function (evt) {
      if (evt.type === "keydown" && evt.which === 27) {
        // escape = cancel
        cancel.call(this, evt);
      } else if (evt.type === "keyup" && evt.which === 13) {
        // blur/return/enter = ok/submit if non-empty
        var value = String(evt.target.value || "");
        if (value)
          ok.call(this, value, evt);
        else
          cancel.call(this, evt);
      }
    };
  };//added as test

    Template.entry.events = {};

    Template.entry.events[okcancel_events('#messageBox')] = make_okcancel_handler({
      ok:function(text, event){
        var nameEntry = document.getElementById('name');
        if(nameEntry.value != ""){
          var ts = Date.now() / 1000;
          Messages.insert({name: nameEntry.value, message: text, time: ts});
          event.target.value = "";
        }//if statment ends
      }
    });

    if (Meteor.isServer) {
  Template.entry.events({
    'click #submit': function() {
        var nameEntry = document.getElementById('name');
        if(nameEntry.value != ""){
            var ts = Date.now() / 1000;
            Messages.insert({name: nameEntry.value, message: $('#messageBox').val(), time: ts});
        }
    }
});
}

  Template.messages.messages = function () {
    return Messages.find({}, { sort: {time: -1} });
  };
} 
```

**这是整个html文件** 教程

```
<body>
 {{> entry}}

 {{> messages}}
</body>

<template name="entry">
    <p>
    <input type="text" id="name" placeholder="your name">
    <input type="text" id="messageBox" placeholder="your message">
    <input type="button" id="submit">
    </p>
</template>

<template name="messages">
    {{#each messages}}
        {{> message}} <!--echo of message template-->
    {{/each}}
</template>

<template name="message">
    <p><strong>{{name}}:</strong>{{message}}</p>
</template> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T15:04:22.993

只需为点击添加一个事件处理程序（在 之间`Meteor.isClient`）

```
Template.entry.events['click #submit'] = function() {
        var nameEntry = document.getElementById('name');
        if(nameEntry.value != ""){
            var ts = Date.now() / 1000;
            Messages.insert({name: nameEntry.value, message: $('#messageBox').val(), time: ts});
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T14:17:00.997

写这个的最干净的方法（如果你不使用咖啡脚本，你应该使用），是

在 JavaScript 中

```
Template.entry.events({
 'click #submit' : function(event) {
        var nameEntry = document.getElementById('name');
        if(nameEntry.value != ""){
            var ts = Date.now() / 1000;
            Messages.insert({name: nameEntry.value, message: $('#messageBox').val(), time: ts});
        }
    }
}) 
```

在 CoffeeScript 中

```
Template.entry.events 
    "click #submit": (event) ->
      nameEntry = document.getElementById("name")
      unless nameEntry.value is ""
        ts = Date.now() / 1000
        Messages.insert
          name: nameEntry.value
          message: $("#messageBox").val()
          time: ts 
```

# macos - 通过 shell 脚本了解当前在 mac 中登录用户的语言

> ID：14908180
> 
> 赞同：0
> 
> 时间：2013-02-16T07:47:36.753
> 
> 标签：macos, shell

在mac中知道用户语言设置（语言名称就够了）的终端命令是什么？你能提供shell脚本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T08:00:08.903

您可以使用 获取用户的语言首选项*列表*`defaults read NSGlobalDomain AppleLanguages`。OS X 将按优先顺序降序使用语言（如果第一个在特定应用程序中不可用）。在我的机器上：

```
$ defaults read NSGlobalDomain AppleLanguages
(
    en,
    ja,
    fr,
    de,
    es,
    it,
    pt,
    "pt-PT",
    nl,
    sv,
    nb,
    da,
    fi,
    ru,
    pl,
    "zh-Hans",
    "zh-Hant",
    ko,
    ar,
    cs,
    hu,
    tr
) 
```

在`bash`中，要获得第一个（主要的 UI 语言），您可以使用这个（公认的混乱）脚本切掉第一个：

```
 langs=(`defaults read NSGlobalDomain AppleLanguages`)
 echo ${langs[1]/,/} # langs[0] is the open bracket 
```

# groovy - 谁能告诉我 groovy 的区别？

> ID：14908181
> 
> 赞同：0
> 
> 时间：2013-02-16T07:48:12.177
> 
> 标签：groovy

我正在学习 Groovy 以在 Soap UI 中使用它。

我想知道它的使用位置和使用位置之间的基本`[]`区别`()`。

`[]`- 我知道这是一个数组..

典型的例如，

***`()`用法：***

```
def r = testRunner.testCase.testSuite.getTestCaseByName("Session").getTestStepByName("InvalidLoginAttempt").run(testRunner, context); 
```

***`[]`用法：***

```
def r = testRunner.testCase.testSuite.testCases["Login"].getTestStepByName("InvalidLoginAttempt").run(testRunner, context); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T10:40:45.460

欢迎使用 Groovy 编程！

当`[]`在对象旁边使用时，它会调用对象的底层`getAt()`方法。

括号是用来*调用方法的*，所以*可以*用来调用`getAt`方法。它因实施而异。

您可以将其视为语法糖，因此您不必调用整个方法。例如，在数组列表上：

```
def list = [10, 20, 30, 40]

assert list[2] == 30
assert list.getAt(3) == 40
assert list.get(0) == 10 
```

它们都有效，但`[]`符号更短。

我敢打赌 SoapUI::TestCases`getAt`可能会调用`getTestCaseByName`，因此它们是同一操作的别名。

另外值得注意的是：`[]`分配给变量时，会创建一个 ArrayList。当与等号 ( `list[0] = 90`) 一起使用时，它会调用`setAt()`对象/集合的方法。

# c - GNU Autotools - 如何处理必需但可能缺少的标题？

> ID：14908182
> 
> 赞同：0
> 
> 时间：2013-02-16T07:48:13.520
> 
> 标签：c, autotools

我想知道使用 GNU Autotools 处理所需标头的最佳实践解决方案。这是我的一行`configure.ac`

```
AC_CHECK_HEADERS_ONCE(argp.h) 
```

如果`argp.h`系统上缺少 ，则 configure 只会声明

```
...
checking for argp.h... no
... 
```

但什么也不做。当然，程序将无法编译，因为预期的标头不存在，并且将包含包含在`#ifdef HAVE_ARGP_H`指令中，并且可能添加一个`#else #error [...]`构造会做我想要的，但这似乎相当乏味。

**有没有一种好方法可以在配置**时间而不是编译时间错误地丢失但需要的标头？

谢谢，安迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T08:01:41.420

Replace your `AC_CHECK_HEADERS_ONCE` call with:

```
AC_CHECK_HEADER([argp.h], [], AC_MSG_ERROR([cannot find required header argp.h])) 
```

This variant won't define `HAVE_ARGP_H`, but you don't need that anyway since your code requires that header unconditionally. The error stops the configure process.

# php - 在php中执行单例模式类

> ID：14908195
> 
> 赞同：0
> 
> 时间：2013-02-16T07:50:27.637
> 
> 标签：php, singleton

对于我的项目，我创建了一个名为 DBAccess.php 的类文件，这是一个旨在维护单例模式的类，即该类在项目的运行时只有一个实例。现在我的问题是假设我正在运行该项目我的计算机和我的朋友正在另一台计算机上运行项目，我将共享同一个 DBAccess 类实例，或者我的每个活动都有一个实例，我的朋友有另一个实例？实际上我对运行没有任何更广泛的想法- 单例模式类的时间执行。任何机构都可以分享想法

# c# - WPF Datagrid：如何以编程方式更改单个单元格的边框厚度？

> ID：14908196
> 
> 赞同：0
> 
> 时间：2013-02-16T07:50:34.447
> 
> 标签：c#, wpf, wpfdatagrid

我是 WPF 新手

我试图根据列和行索引更改单个单元格的边框。到目前为止，我已经有了获取列和行索引的代码。

现在我需要得到'那个单元格'并改变它的边界..

这是我的代码，但它不起作用：

我从网上得到了这个方法：

```
 public static T GetVisualChild<T>(Visual parent) where T : Visual
    {
        T child = default(T);
        int numVisuals = VisualTreeHelper.GetChildrenCount(parent);
        for (int i = 0; i < numVisuals; i++)
        {
            Visual v = (Visual)VisualTreeHelper.GetChild(parent, i);
            child = v as T;
            if (child == null)
                child = GetVisualChild<T>(v);
            else
                break;
        }    return child;
    } 
```

然后这是我需要更改单元格属性的地方..

```
 int rows = 0;
            int col = 0;
        while (col < myDG.Columns.Count)
        {
            rows = 0;
            while (rows < myDG.Items.Count)
            {
                DataGridRow row = (DataGridRow)myDG.ItemContainerGenerator.ContainerFromIndex(rows);

                if (row != null)
                {

                    DataGridCellsPresenter presenter = GetVisualChild<DataGridCellsPresenter>(row);
                    DataGridCell cell = (DataGridCell)presenter.ItemContainerGenerator.ContainerFromIndex(col);

                    cell.BorderThickness = new Thickness (2,2,2,2);
                    cell.BorderBrush= Brushes.Black;

                rows++;
            }
            col++;
        } 
```

任何想法？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T07:57:37.040

尽量避免在您的 WPF 应用程序中隐藏代码。更喜欢将厚度属性设置为数据上下文上的绑定属性。

然后您可以通过设置 valueconverter 将此值转换为该属性的有效值。

这是一个非常基本的示例： [http ://wpftutorial.net/DataBindingOverview.html](http://wpftutorial.net/DataBindingOverview.html)

因此，如果您是 WPF 新手，请尝试搜索一些有关 MVVM 的视频。
Laurent Bignon 做了一些很好的解释整个概念

# php - 合并多维数组

> ID：14908199
> 
> 赞同：0
> 
> 时间：2013-02-16T07:50:42.220
> 
> 标签：php, multidimensional-array, merge

我在 PHP 中有一个具有这种结构的数组：

```
Array
(
  [7] => Array
    (
      [6] => Array
        (
          [200000000] => Array
            (
              [201000001] => Array
                (
                  [201000002] => Entry
                  [201000003] => History
                  [201000004] => Statistic
                  [201000005] => Edit
                )

            )

        )

      [7] => Array
        (
          [200000000] => Array
            (
              [201000001] => Array
                (
                  [201000002] => Entry
                  [201000005] => Edit
                )

              [201000006] => Request
              [201000007] => Array
                (
                  [201000008] => Array
                    (
                      [201000009] => Inbox
                      [201000010] => Cancellation
                    )

                )

            )

        )

    )

) 
```

我怎样才能把这个数组变成这样的东西：

```
Array
(
  [7] => Array
    (
      [6] => Array
        (
          [200000000] => Array
            (
              [201000001] => Array
                (
                  [201000002] => Entry
                  [201000003] => History
                  [201000004] => Statistic
                  [201000005] => Edit
                )

              [201000006] => Request
              [201000007] => Array
                (
                  [201000008] => Array
                    (
                      [201000009] => Inbox
                      [201000010] => Cancellation
                    )
                )
            )
        )
    )
) 
```

如果有 PHP 内置函数可以做到这一点，那更好？或者也许是一个没有太多循环的函数？

之前谢谢...

# android - 安卓手指画法

> ID：14908201
> 
> 赞同：0
> 
> 时间：2013-02-16T07:50:46.170
> 
> 标签：android, android-canvas, surfaceview

当手指在电话屏幕上移动时，我正在使用 sufaceview 绘制路径。但是当我快速移动手指时，所有点都没有注册，我面临着闪烁

```
 @Override
public void run() {
    while(running){ 
        running = true;
        if(!holder.getSurface().isValid())
            continue;

        Canvas canvas = holder.lockCanvas();
        canvas.drawCircle(right, bottom, 2, paint);
        holder.unlockCanvasAndPost(canvas);
    }
}

@Override
public boolean onTouch(View view, MotionEvent event){
    switch(event.getAction()){
    case MotionEvent.ACTION_MOVE:
        right = event.getX();
        bottom = event.getY();
        break;
    }
    return true;
} 
```

有人可以帮忙吗？

在此先感谢，贾根

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T07:53:29.887

`onSurfaceCreate()`在方法中启动线程。IE

```
@Override

public void surfaceCreated(SurfaceHolder holder)

{
     //write your code here
} 
```

它需要连续的事件。首选此链接 [http://www.mindfiresolutions.com/Using-Surface-View-for-Android-1659.php](http://www.mindfiresolutions.com/Using-Surface-View-for-Android-1659.php)

# ios - 弹出驻留在我的 UIView-Objective C 中的图像图标

> ID：14908202
> 
> 赞同：1
> 
> 时间：2013-02-16T07:50:46.863
> 
> 标签：ios, objective-c, uipopovercontroller

我确实有一个带有图像图标的视图，我想在单击该图标时弹出该图像。我认为这是可能的`UIpopovercontroller`。我是 iPhone 开发的新手。希望你的帮助。谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T08:17:32.933

你可以这样做，在 .h 文件中创建你的图标的出口并选择用户交互属性

```
{
    UIImageView *imgView;
    UIImageView *closeimgView;
}
    @property (strong, nonatomic) IBOutlet UIImageView *iconIv; 
```

并在 .m 文件中。

```
 - (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    UITapGestureRecognizer* ivGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(ivTapped:)];

    [imageIv addGestureRecognizer:ivGesture];
}
- (void)ivTapped:(id)sender
{
    imgView = [[UIImageView alloc] initWithFrame:CGRectMake(35, 50, 250, 350)]; //create appropriate frame
    imgView.image = [UIImage imageNamed:@"iPhone.jpg"];
    imgView.contentMode = UIViewContentModeCenter;

    [self.view addSubview:imgView];

    closeimgView = [[UIImageView alloc] initWithFrame:CGRectMake(275, 45, 25, 25)]; //create appropriate frame
    closeimgView.image = [UIImage imageNamed:@"close_btn.png"];
    closeimgView.userInteractionEnabled =YES;
    closeimgView.contentMode = UIViewContentModeCenter;
    [self.view addSubview:closeimgView];

    UITapGestureRecognizer* closeivGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(closeivTapped:)];

    [closeimgView addGestureRecognizer:closeivGesture];

}

- (void)closeivTapped:(id)sender
{
    [imgView removeFromSuperview];
     [closeimgView removeFromSuperview];
} 
```

# java - 在 JPanel 中执行 ActionListener

> ID：14908208
> 
> 赞同：1
> 
> 时间：2013-02-16T07:51:32.030
> 
> 标签：java, swing, jpanel, actionlistener

在这里，我想在按下按钮时执行一个动作，这很容易，但主要问题是要在扩展的 JPanel 中执行。可能有一个简单的解决方案，例如向该特定按钮添加动作侦听器并调用 actionperformed 事件，但我的情况并非如此，我有 4 个按钮（t1、t2、t3、t4）所有这些按钮都将在单个 ActionPerfomed 中运行事件 ae（查看代码段）。稍后您可以看到调用另一个 JButton 的代码 tr 和 rf 调用 actionlistener 和 actionperformed 事件。

为了清楚易懂，您可以看一下代码...

```
 class Tracker extends JPanel
{

public static void main(String[] args) {
    new Tracker();    }

public Tracker()
{

JButton tr=new JButton("TRACKER APPLET");
tr.setBounds(720,170,100,20);

JButton rf=new JButton("REFRESH");
rf.setBounds(200,170,100,20);

boolean tc1=false,tc2=false,tc3=false,tc4=false;

JButton t1=new JButton(" ");
t1.addActionListener(this);
JButton t2=new JButton(" ");
t2.addActionListener(this);
JButton t3=new JButton(" ");
t3.addActionListener(this);
JButton t4=new JButton(" ");
t4.addActionListener(this);

public void actionPerformed(ActionEvent ae)
{
    if(ae.getSource()==t1)
    {
            tc1=true;
    }
    if(ae.getSource()==t2)
    {
            tc2=true;
    }
    if(ae.getSource()==t3)
    {
            tc3=true;
    }
    if(ae.getSource()==t4)
    {
            tc4=true;
    }

}

tr.addActionListener(new ActionListener(){
 public void actionPerformed(ActionEvent e){

    EventQueue.invokeLater(new Runnable() {
        @Override
        public void run() {
            try {
                UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
            } catch (ClassNotFoundException ex){}
            catch(InstantiationException ex){}
            catch(IllegalAccessException ex){}
            catch(UnsupportedLookAndFeelException ex) {}

                //some food here....

                           }
                        });
            }
             });        

    rf.addActionListener(new ActionListener(){
 public void actionPerformed(ActionEvent e){

    EventQueue.invokeLater(new Runnable() {
        @Override
        public void run()
        {
            try {
                UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } 
            catch (ClassNotFoundException ex){}
            catch(InstantiationException ex){}
            catch(IllegalAccessException ex){}
            catch(UnsupportedLookAndFeelException ex) {}
                         //some extra work runs here...
        }
    });
 }
    });
add(tr);
add(rf);
add(t1);
add(t2);
add(t3);
add(t4);
} 
```

我的问题是我无法将 ActionListener 实现为已经扩展 JPanel 的主类。我只是想使用 Jbuttons :: 想要在按时间顺序按下按钮 (t1|t2|t3|t4) 和 JButtons(tr|rf) 时执行单个操作..

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T07:54:14.480

```
class Tracker extends JPanel implements ActionListener 
```

您的代码包含一些方法到方法...

此代码有效：

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class Tracker extends JPanel implements ActionListener {
   public Tracker() {
      tr.setBounds( 720, 170, 100, 20 );
      tr.addActionListener( this );

      rf.setBounds( 200, 170, 100, 20 );
      rf.addActionListener( this );

      t1.addActionListener( this );
      t2.addActionListener( this );
      t3.addActionListener( this );
      t4.addActionListener( this );
      add(tr);
      add(rf);
      add(t1);
      add(t2);
      add(t3);
      add(t4);
   }

   @Override
   public void actionPerformed( ActionEvent e ) {
      Object src = e.getSource();
      if( src == t1 ) {
         tc1 = true;
      }
      else if( src == t2 ) {
         tc2 = true;
      }
      else if( src == t3 ) {
         tc3 = true;
      }
      else if( src == t4 ) {
         tc4 = true;
      }
      else if( src == tr ) {

      }
      else if( src == rf ) {

      }
   }

   private final JButton tr = new JButton( "TRACKER APPLET" );
   private final JButton rf = new JButton( "REFRESH" );
   private final JButton t1 = new JButton( " " );
   private final JButton t2 = new JButton( " " );
   private final JButton t3 = new JButton( " " );
   private final JButton t4 = new JButton( " " );
   boolean tc1 = false, tc2 = false, tc3 = false, tc4 = false;

   public static void main( String[] args ) {
      JFrame frame = new JFrame( "" );
      frame.add( new Tracker());
      frame.pack();
      frame.setLocationRelativeTo( null );
      frame.setVisible( true );
   }
} 
```

# java - 输出文本文件中最长的单词

> ID：14908209
> 
> 赞同：0
> 
> 时间：2013-02-16T07:51:43.437
> 
> 标签：java, android, bufferedreader, string-length

我创建了一个文本文件，将每个单词写入`editText`android 应用程序的框中。我还尝试使用`bufferedreader`. 问题是，我只想输出创建的列表中最长的单词，但我似乎无法比较所有输入的字符串。我的谷歌搜索只提供了有关比较两个字符串长度的信息。如何比较文本文件中每一行的长度？谁能指导我下一步该怎么做？

**我的代码如下所示：**

```
 try
   {
        File myFile = new File("/sdcard/logger.file");
        FileInputStream fIn = new FileInputStream(myFile);
        BufferedReader myReader = new BufferedReader(
                new InputStreamReader(fIn));
        String aDataRow = "";
        String aBuffer = "";
        while ((aDataRow = myReader.readLine()) != null)
        {
            aBuffer += aDataRow + "\n";
        }
        show.setText(aBuffer);
        myReader.close();
        Toast.makeText(getBaseContext(),
                "Done reading SD 'mysdfile.txt'",
                Toast.LENGTH_SHORT).show();
        }
   catch (Exception e) 
   {
        Toast.makeText(getBaseContext(), e.getMessage(),
                Toast.LENGTH_SHORT).show();
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T08:31:25.503

我不知道你的文本文件是什么样的，但如果你每行只有一个单词，你可以使用两个字符串的比较。事实上，您在从文件中读取每个单词/行时已经“触摸”了它，为什么不直接比较它们呢？我修改了你的代码，使它应该做你想做的事。

```
try
{
    File myFile = new File("/sdcard/logger.file");
    FileInputStream fIn = new FileInputStream(myFile);
    BufferedReader myReader = new BufferedReader(
            new InputStreamReader(fIn));
    String longestString ="";
    String aDataRow = "";
    String aBuffer = "";
    while ((aDataRow = myReader.readLine()) != null)
    {
        if(longestString.length()<=aDataRow.length()){
            longestString = aDataRow;
        }
        aBuffer += aDataRow + "\n";
    }
    //So here you defenitly got your longestWord in "longestString"
    show.setText(aBuffer);
    myReader.close();
    Toast.makeText(getBaseContext(),
            "Done reading SD 'mysdfile.txt'",
            Toast.LENGTH_SHORT).show();
    }
catch (Exception e) 
{
    Toast.makeText(getBaseContext(), e.getMessage(),
            Toast.LENGTH_SHORT).show();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T08:34:07.910

您可以使用 java.util.Scanner，

```
 try
   {
        File myFile = new File("/sdcard/logger.file");
        Scanner scanner = new Scanner(myFile);
        String bigWord = "";
        while (scanner.hasNextLine()) {
            Scanner wordScanner = new Scanner(scanner.nextLine());
            while (wordScanner.hasNext()) {
                String str = wordScanner.next();
                if(str.length() > bigWord.lenght())
                    bigWord = str;
            }
        }
        show.setText(bigWord);
        Toast.makeText(getBaseContext(),
                "Done reading SD 'mysdfile.txt'",
                Toast.LENGTH_SHORT).show();
   }
   catch (Exception e) 
   {
        Toast.makeText(getBaseContext(), e.getMessage(),
                Toast.LENGTH_SHORT).show();
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T08:00:15.123

解决此问题的一种易于理解的方法是将其分为两个步骤。

第一步是将所有单独的单词读入一个大数组或列表中。第二步是遍历数组或列表，找到最长的单词。我不确定您是要获得最长的行还是最长的单词。也许他们是一样的。

无论如何，对于您的具体问题，您需要：

列表行 = new ArrayList<>();

然后你需要替换 aBuffer += aDataRow + "\n"; 用这个：lines.add(aDataRow);

然后当你读完文件后，你只需要有一些像这样的代码：

```
int biggest = 0;
String big_word = "";
for (String row : lines) {
    if (row.length() > biggest) {
        biggest = row.length();
        big_word = row;
    }
}

Toast.makeText(getBaseContext(), "Biggest word is " + big_word, Toast.LENGTH_SHORT).show(); 
```

人们会认识到可以将列表的创建和文件的读取结合起来，但是这种方法更容易理解。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T10:49:54.983

[番石榴](http://code.google.com/p/guava-libraries/)解决方案：

```
 String longestWord = Files.readLines(new File("/sdcard/logger.file"), Charsets.UTF_8, 
        new LineProcessor<String>() {

            TreeSet<String> set = new TreeSet(new Comparator<String>() {
                @Override public int compare(String o1, String o2) {
                    return o1.length() - o2.length();
                }
            });

         @Override public boolean processLine(String line) {
             set.addAll(Sets.newHashSet(Splitter.on(" ").split(line)));
             return true;
         }

         @Override public String getResult() {
            return set.last();
         }
    }); 
```

# .htaccess - Google Apps：到另一个域的 HTTP 301？

> ID：14908211
> 
> 赞同：0
> 
> 时间：2013-02-16T07:52:22.737
> 
> 标签：.htaccess, http-status-code-301, google-apps

我买了一个 Google Apps 的域名，并在上面设置了邮件服务。我的 DNS A 记录当前指向一个不存在的 Google 站点（我不喜欢 Google 站点）。如何`HTTP 301`重定向到另一个域？我是否必须单独购买网站上的托管空间`nearlyfreespeech.net`，更改我的 DNS 记录，然后上传一个`.htaccess`，还是有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T10:00:09.943

您必须单独购买托管空间。没有其他办法。

# ruby-on-rails - 在 Heroku 上可以实现类似 websocket 的实时行为吗？

> ID：14908212
> 
> 赞同：0
> 
> 时间：2013-02-16T07:52:25.590
> 
> 标签：ruby-on-rails, heroku, websocket, socket.io, real-time

我正在考虑在 Rails 中制作一个国际象棋应用程序，其中需要将移动从服务器异步推送到客户端浏览器（最好使用 websockets）。

但是，从我所做的少量研究来看，Heroku 似乎不支持 websockets。但是使用配置为使用长轮询而不是 websockets 的 socket.io 有另一种选择。

长轮询是否不足以满足 5 分钟闪电战之类的国际象棋游戏的延迟要求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T10:34:06.380

Heroku Cedar 堆栈支持 HTTP 流和长轮询： [https ://devcenter.heroku.com/articles/request-timeout#longpolling_and_streaming_responses](https://devcenter.heroku.com/articles/request-timeout#longpolling_and_streaming_responses)

它不支持 WebSocket。但是你可以使用像[Faye](http://faye.jcoglan.com/ruby.html)这样的框架并使用 XHR 作为传输机制。似乎有一个项目。请参阅： [是否可以在 Heroku 上托管 FAYE？](https://stackoverflow.com/questions/5123136/is-it-possible-to-host-faye-on-heroku)

如果您想在游戏客户端中使用 WebSocket 并在 Heroku 上使用后端，那么我现在知道的唯一解决方案是使用 Pusher（我为插件工作）： [https ://addons.heroku.com/pusher](https://addons.heroku.com/pusher)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T01:39:35.627

一个更接近 Websockets 的替代方案是[Server Sent Events](https://developer.mozilla.org/en-US/docs/Server-sent_events/Using_server-sent_events)。从服务器到客户端是单向的（您可以继续对客户端->服务器方向发出标准请求）。

Heroku 似乎确实支持服务器发送事件，大多数支持 Websockets 的浏览器也是如此（IE10 是不支持的例外）。

# windows - 启动应用程序时 jvm.dll 丢失错误

> ID：14908220
> 
> 赞同：5
> 
> 时间：2013-02-16T07:54:02.767
> 
> 标签：windows, dll, path, java

我试图在 Windows 7 64 位上运行 CapeClear SOA Editor 应用程序，但它无法启动并产生一个错误，指出它无法加载 jvm.dll。我安装了 64 位 JDK 版本 7u13。

**唯一可行的**是安装 32 位版本的 JDK，然后将 JAVA_HOME 变量设置为指向 32 位版本`C:\Program Files (x86)\Java\jdk1.7.0_13`

为什么会这样？我可以做些什么来解决这个问题，以便我的 JAVA_HOME 指向 64 位 JDK 和 SOA 编辑器应用程序启动时没有错误？

PS 我尝试将 jvm.dll 从`C:\Program Files (x86)\Java\jdk1.7.0_13\jre\bin\server`和复制`C:\Program Files (x86)\Java\jdk1.7.0_13\jre\bin\client`到与 SOAEditor.exe 相同的文件中，但这没有帮助。

更新 1：使用 listdll.exe 我验证了 SOA 编辑器已加载`C:\Program Files (x86)\Java\jdk1.7.0_13\jre\bin\client\jvm.dll`

Update2：添加`C:\Program Files (x86)\Java\jdk1.7.0_13\jre\bin\client\`到路径变量也没有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T13:46:47.053

在命令提示符下，您可能想尝试使用以下命令注册文件：

> regsvr32 jvm.dll

另外，应该注意的是，混合 32 位和 64 位安装和 DLL 是一个非常糟糕的主意。

# ios - 如何在使用openGl ES跟踪目标图像时在ios相机中加载3D动画模型

> ID：14908224
> 
> 赞同：1
> 
> 时间：2013-02-16T07:54:29.963
> 
> 标签：ios, opengl-es, vuforia

当 Camera 从 App 启动并检测到 Marker Image a 3d Animated Character Should Appear in my Camera 时，我想使用 OpenGl ES 加载 3d 动画模型。任何人都可以建议一些对我有用的帮助或教程。我已经使用 vuforia 创建了一个目标图像，但它只加载 .obj 文件中的 3D 模型，但现在我想加载具有 .md5 或 .dae 等这种模型扩展的 3D 动画模型。

# c# - 无法打开 Access ODBC 连接

> ID：14908226
> 
> 赞同：0
> 
> 时间：2013-02-16T07:54:49.847
> 
> 标签：c#, ms-access, odbc, connection-string

我有一个程序可以测试它是否可以建立数据库连接。它可以通过 ODBC 连接到 SQL Server db，也可以通过 ODBC 连接到 Microsoft Access (.mdb)。Sql 一工作正常，但我不知道如何让访问一工作。

```
System.Data.Odbc.OdbcConnection odbcConn = new System.Data.Odbc.OdbcConnection();
if ({SQL})//If SQL, setup SQL server connection string
    odbcConn.ConnectionString = @"Driver={SQL Server};Server={server};Database={DB};@";Uid=     {uid};Pwd={pwd};";
else //Otherwise it's access so setup access string
    odbcConn.ConnectionString = @"Driver={Microsoft Access Driver (*.mdb)};Dbq={path}\test.mdb;Pwd={pwd};";

string testQuery = "SELECT 1";
OdbcCommand odbcComm = new OdbcCommand(testQuery);
try
{
   odbcComm.Connection = odbcConn;
   odbcConn.Open();
   odbcComm.ExecuteNonQuery();
} 
```

这适用于 SQL 服务器。不管我做什么，我都无法使用 Access 进行连接，即使我有另一个程序只是使用该连接字符串进行访问并且工作正常，但它在这里不起作用。我尝试执行以下操作：

```
odbcComm.CommandText = "Select 1";
OdbcDataReader data = odbcComm.ExecuteReader(); 
```

那也没有用。我错过了什么？我必须做什么才能打开 Access 连接？它在 odbcConn.Open() 行失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T08:00:22.640

Well just figured out by own problem about 2 minutes too late. Turns out there is no 64-bit driver for Microsoft Access. By app was targeting 64-bit and so it wasn't able to find the drier. I simply changed to x86 and it worked fine.

# php - 列出脚本文件中的所有类和方法

> ID：14908228
> 
> 赞同：1
> 
> 时间：2013-02-16T07:55:12.577
> 
> 标签：php

在选择特定脚本文件后，我想将所有类及其方法名称以及方法类型（公共、私有、受保护）输出到数组中。

这将用于创建权限系统，管理员可以在其中指定特定用户组可以访问的类。

例如，在脚本文件 test.php 中，它具有以下内容：

```
class test{

public function dostuff(){

}

private function hide(){

}
} 
```

它应该给我一个像这样的列表：类：测试方法：dostuff（公共）隐藏（私人）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T08:21:50.960

好的，这就是我的建议：

```
// Get new class name

$classes = get_declared_classes();
include 'your_php_file.php';
$diff = array_diff(get_declared_classes(), $classes);
$class = reset($diff);

// Get class's methods

$methods = get_class_methods($class);

// Print them out

echo "Class : ".$class;
foreach ($methods as $method) {
    echo "$method\n";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T08:31:42.497

```
<?php
$file="test_class.php";
$fp = fopen($file, 'r');
$class = $buffer = '';
$method = $buffer = '';
while(!feof($fp))
{
    $buffer .= fread($fp, 512);
    if (preg_match('/class\s+(\w+)(.*)?\{/', $buffer, $matches)) {
        $class = $matches[1];
        //break;
    }
    if (preg_match_all('/function\s+(\w+)(.*)?\{/', $buffer, $match)) {
        $method = $match[1];
        //print_r($match);
        //break;
    }
}

echo "class:".$class."<br />";
//print_r($method);
foreach($method as $key=>$val)
{
echo "method : ".$val."<br />";
}

?> 
```

# intellij-idea - 如何在 Intellij IDEA 中应用“打字到达右边距时换行”？

> ID：14908230
> 
> 赞同：5
> 
> 时间：2013-02-16T07:55:25.543
> 
> 标签：intellij-idea

`Cody Style`如果我在->首选项中设置“打字到达右边距时换行”`General`并定义了一个新的边距，如何将此新设置应用于文件以便重新格式化？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-16T14:42:00.310

好简单：

*   在项目视图中选择模块的根目录
*   在代码菜单中选择“重新格式化...”

**编辑**

忘了提到这个重要的细节：

IDE 设置 > 代码样式 > Java > 换行和大括号 > 确保不超过右边距

必须检查。（至少要重新格式化 java 文件，存在其他文件的相同复选框）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-18T00:06:13.553

在 IntelliJ 14 中，您可以在每种语言的基础上设置右边距，方法是转到

> IDE 设置 > 代码样式 > $LANGUAGE > 换行和大括号 > 右边距（列）：

并设定一个新值。

# regex - 文本框中百分比类型条目的正则表达式匹配

> ID：14908234
> 
> 赞同：-1
> 
> 时间：2013-02-16T07:56:34.260
> 
> 标签：regex

我希望正则表达式严格匹配以格式化“两位、十进制和两位”，如 11.11 或 11 可以，但 1.11 或 111.1 或 111.11 无效

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T08:04:54.103

**正则表达式：**

```
^\d{2}(?:\.\d{2})?$ 
```

**例子 ：**

```
11.11
11
1.11 
111.1
111.11 
```

火柴 ：

```
11.11
11 
```

**演示：**

[http://regexr.com?33prh](http://regexr.com?33prh)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T08:06:13.267

鉴于您的示例，也许这就是您想要的：

```
^\d{2}(?:\.\d{2})?$ 
```

解释：

*   `^`- 字符串开头（或行开头，如果多行模式开启）（感谢@dr.kameleon 提醒我）
*   `\d`- 一个数字
*   `{2}`- 两次
*   `(?:`- 非捕获组的开始
    *   `\.\d{2}`- 一个文字句点和两个数字
*   `)`- 一组结束
*   `?`- 也许
*   `$`- 字符串结尾（或行尾，如果多行模式打开）

含义：两位数，也可能是小数点和另外两位数

不要忘记在您的正则表达式风格中应用任何必要的转义 ( `/delimiters/`, `doubled\\backslashes`...)

# authentication - mifare 卡的身份验证错误“6982：不满足安全状态”

> ID：14908239
> 
> 赞同：3
> 
> 时间：2013-02-16T07:57:01.297
> 
> 标签：authentication, command, smartcard, mifare

我有 pc/sc 读卡器和非接触式卡（mifare 卡），我可以连接到卡，也成功执行 getdate 命令，但是当我想验证时，我看到这个错误“6982：安全状态不满意”我试过了这 3 个不同的身份验证命令，但我对所有这些命令都收到相同的错误。

```
FF 88 00 00 06 FF FF FF FF FF FF
FF 88 00 00 60 12
FF 88 00 00 05 01 00 12 60 00 
```

我该如何解决这个错误？我的错误是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T06:01:55.097

我找到了答案，我使用了这个命令并且它有效`<ff 88 00 00 60 00>`

# iphone - 如何在 iPhone 中从视图控制器访问 NSMutableDictionary 的数据到上一个视图控制器

> ID：14908240
> 
> 赞同：0
> 
> 时间：2013-02-16T07:57:02.687
> 
> 标签：iphone, objective-c, nsmutabledictionary

我想做的是在 UITableview 中显示 NSMutableDictionary 中的数据，但是，当用户按下后退按钮并进入上一个视图控制器时，我想在 tableview 中显示。我在哪个 tableview 上有一个视图控制器，但是每当用户推送该视图并转到下一个视图时，都会有一些文本字段，该文本字段文本值我保存在一个字典中，现在我想在上一个视图控制器中访问该字典以显示数据表视图。

我已经为该字典设置了 setter 和 getter。然后我也得到空字典。请帮助我，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T09:47:06.673

有两种方法可以解决您的问题。

1.  您可以使用数据容器类来保存视图控制器之间的所有共享数据。[http://iphonedevsdk.com/forum/iphone-sdk-development/54859-sharing-data-between-view-controllers-other-objects.html](http://iphonedevsdk.com/forum/iphone-sdk-development/54859-sharing-data-between-view-controllers-other-objects.html)

2.  通过使用委托：[在视图控制器之间传递数据](https://stackoverflow.com/questions/5210535/passing-data-between-view-controllers)

# javascript - 仅从内联样式获取背景图像的 URL

> ID：14908244
> 
> 赞同：1
> 
> 时间：2013-02-16T07:57:14.420
> 
> 标签：javascript, jquery, html

相当简单，我需要知道是否添加了自定义图像来覆盖默认值，以及是否必须获取其 url。

（自定义图像将始终通过内联样式添加）

我可以将 url 从属性中解析出来，我只需要在它是内联的情况下获取它。

**更新**

我有一个想法，一开始我不想提出来保留所有想法。

``.indexOf("background-image")`我在获取后检查元素`.attr('style')`，如果是这样，`!== -1`那么我获取`.css('backgroundImage')`并使用正则表达式解析 url。

我只是不相信这是最好的解决方案，但它正在工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T08:28:29.020

你可以：

```
var elem = $("div");

if(elem.attr("style").search("background-image") > -1){
   console.log(elem[0].style.backgroundImage)
} 
```

小提琴：http: [//jsfiddle.net/uJ3Nm/](http://jsfiddle.net/uJ3Nm/)

# c# - 迭代 Excel 引用范围的最快方法 ("C20:F22")

> ID：14908248
> 
> 赞同：3
> 
> 时间：2013-02-16T07:58:06.950
> 
> 标签：c#, excel, range, loops

假设此字符串变量是 Excel 中的一系列单元格：

```
string RangeReference = "C20:F22"; 
```

所以我需要这样的参考列表`RangeReference`：

```
List<string> GetAllReferencesInRange(string RangeReference) { } 
```

对于这种情况，我们将有：

```
GetAllReferencesInRange(RangeReference);
//=
//C20
//D20
//E20
//F20
//C21
//D21
//E21
//F21
//C22
//D22
//E22
//F22 
```

如果`RangeReference = "AG9:AI11";`然后：

```
GetAllReferencesInRange(RangeReference);
//=
//AG9
//AH9
//AI9
//AG10
//AH10
//AI10
//AG11
//AH11
//AI11 
```

那么最快的方法是什么？

**更新：**

我知道这个问题根本与 Excel 无关，但我使用 OpenXML SDK 2.5 来获取 Excel 文件和元素，所以也许 OpenXML 中有一种我不知道的简单方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T11:42:35.410

我发现了一些东西，但我不知道这是不是最快的方法。

起初，我构建了一个存储列名和相关数字的字典：

```
Dictionary<string, ulong> ColumnsInNumber = new Dictionary<string, ulong>();
string Alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
ulong SpecialNumber = 0;

foreach (char FirstChar in Alphabet)
   ColumnsInNumber.Add(FirstChar.ToString(), SpecialNumber++);

foreach (char FirstChar in Alphabet)
   foreach (char SecondChar in Alphabet)
      ColumnsInNumber.Add(string.Format("{0}{1}", FirstChar, SecondChar), SpecialNumber++);

foreach (char FirstChar in Alphabet)
   foreach (char SecondChar in Alphabet)
      foreach (char ThirdChar in Alphabet)
          ColumnsInNumber.Add(string.Format("{0}{1}{2}", FirstChar, SecondChar, ThirdChar), SpecialNumber++); 
```

在 Excel 2010 中，最后一列名称是“XFD”，在上面我们将数字设置为从“A”到“ZZZ”的列

所以我们可以迭代行和列：

```
string FirstColumn = GetColumnName(GetFirstCellReference(RangeReference));
string LastColumn = GetColumnName(GetLastCellReference(RangeReference));
uint FirstRow = GetRowNumber(GetFirstCellReference(RangeReference));
uint LastRow = GetRowNumber(GetLastCellReference(RangeReference));

List<string> Result = new List<string>();

for (uint row = FirstRow; row <= LastRow; row++)
{
   for (ulong column = ColumnsInNumber[FirstColumn]; column <= ColumnsInNumber[LastColumn]; column++)
   {
     string ColumnName = ColumnsInNumber.Where(kv => kv.Value == column).FirstOrDefault().Key;
     Result.Add(string.Format("{0}{1}", ColumnName, row));
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T08:57:29.433

首先检查它的格式是否正确，然后：

```
 static readonly List<char> alphabetUpper = new List<char> { 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z' };
    static public IEnumerable<string> GetRange(string arg)
    {
        arg = arg.ToUpperInvariant();
        string[] ranges = arg.Split(':');
        ulong range0 = ulong.Parse((new string((from char c in ranges[0] where char.IsDigit(c) select c).ToArray())));
        ulong range1 = ulong.Parse ((new string((from char c in ranges[1] where char.IsDigit(c) select c).ToArray())));
        ranges[0] = new string((from char c in ranges[0] where !char.IsDigit(c) select c).ToArray());
        ranges[1] = new string((from char c in ranges[1] where !char.IsDigit(c) select c).ToArray());
        IEnumerable<int> arrayindexes0 = from c in ranges[0] select alphabetUpper.IndexOf(c);
        IEnumerable<int> arrayindexes1 = from c in ranges[1] select alphabetUpper.IndexOf(c);
        foreach (IEnumerable<int> f in (from i in arrayindexes0 from e in arrayindexes1 select new List<int>() {i, e}))
        {
            foreach (int i in f)
            {
                foreach (ulong o in LongRange(range0, range1))
                {
                    yield return alphabetUpper[i] + o.ToString();
                }
            }
        }
    }
    static IEnumerable<BigInteger> LongRange (BigInteger first, BigInteger second)
    {
        BigInteger difference = second - first;
        for (BigInteger i = 0; i <= difference; i++)
        {
            yield return first + i;
        }
    } 
```

目前适用于单字母，我正在努力让更多行发生。

# php - 如何在 PHP 中获取一年中的最后一个星期日

> ID：14908251
> 
> 赞同：1
> 
> 时间：2013-02-16T07:58:39.957
> 
> 标签：php, date, strtotime

我需要为一年的最后一个星期日创建一个到期日期。我知道我可以使用`strtotime`函数来传递“上周日”之类的内容，这可以应用于当年吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T08:10:41.630

[`strtotime`](http://php.net/strtotime)你可以使用，它是相对于当前年份的：`'last'` *`space` `dayname` `space`* `'of'` *`monthname`*

```
strtotime('last sunday of december') 
```

有关可用格式，请参阅[相对格式^(*文档*)](http://php.net/datetime.formats.relative)。

[在线演示](http://eval.in/10321)/[沙盒测试](http://sandbox.onlinephpfunctions.com/code/5a620cad862989fa34d671bf3210e613a2d55593)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T08:07:39.027

一种方法：

```
echo "Last Sunday of 2013 is: ".date('Y-m-d', strtotime('01/01/2014'.' last Sunday')); 
```

这将产生

```
Last Sunday of 2013 is: 2013-12-29 
```

一周内所有天的[沙盒测试](http://sandbox.onlinephpfunctions.com/code/e1500e87e9613a0b3acdf2ca779a5b4490ffa02f)

**更新**：代码已更新以解决@hakre 正确指出的问题。无论如何，@Austin Brunkhorst 建议的方法可能是正确的方法。

# mysql - MySQL 5.6 中的选择性产品安装

> ID：14908252
> 
> 赞同：1
> 
> 时间：2013-02-16T07:58:41.970
> 
> 标签：mysql

MySQL 5.6 Community Edition Installation 安装以下文件夹，但我只想单独安装服务器，不需要任何连接器或excel或文档。我应该如何进行自定义安装来满足我的需要。

C:\Program Files\MySQL>目录

驱动器 C 中的卷没有标签。

卷序列号为 96FE-9B3F

C:\Program Files\MySQL 目录

2013 年 2 月 13 日下午 1:15。

13-02-2013 下午 01:15 ..

13-02-2013 PM 01:14 连接器 C++ 1.1.2

13-02-2013 PM 01:14 连接器 J 5.1.23

13-02-2013 PM 01:15 连接器 NET 6.6.5

13-02-2013 PM 01:14 连接器 ODBC 5.2.4

13-02-2013 PM 01:15 MySQL 文档 5.6.10

13-02-2013 PM 01:14 MySQL For Excel 1.1.0

2013 年 13 月 2 日下午 12:05 MySQL 安装程序

2013 年 13 月 2 日下午 01:14 MySQL 通知程序 1.0.3

13-02-2013 PM 01:13 MySQL 服务器 5.6

13-02-2013 PM 01:21 MySQL Workbench CE 5.2.46

13-02-2013 PM 01:15 示例和示例 5.6.10

0 个文件 0 个字节

13 Dir(s) 71,534,161,920 字节空闲

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:57:13.310

*   启动 MySQL5.6 安装程序

*   在*设置类型*步骤中，选择**自定义**：（[来源：][[canardpc.com](http://tof.canardpc.com/view/59bffdc9-1022-4601-8750-97f8f21154a0.jpg)][）]
    [![设置类型](../Images/82e46dda60ed86e2f4db0ca18dbda0e8.png)](https://i.stack.imgur.com/287iY.jpg)

如果需要，更改安装路径和/或数据路径，

*   在下一步*Feature Selection*中，只需选择您需要的**MySQL Server** 5.6.10 即可：（[来源：][[canardpc.com](http://tof.canardpc.com/view/076e9e82-519e-4eae-b029-ea739deb09df.jpg)][）]
    [![特征选择](../Images/9ad601765121cba4b7a5b1dd5d0c22d6.png)](https://i.stack.imgur.com/LgBqD.jpg)

*   像往常一样完成 MySQL 服务器的安装和配置（这部分有很多教程）

# jquery - 当服务器端验证失败时，Codeigniter 在 JQuery Colorbox 中重新填充表单

> ID：14908253
> 
> 赞同：1
> 
> 时间：2013-02-16T07:58:46.437
> 
> 标签：jquery, codeigniter, popup

我正在创建一个基本的 CRUD。除了表格重新填充外，一切正常。这是我在做什么的详细信息。

我正在显示所有员工的列表。有一些链接添加新的。并与每个员工一起编辑和删除。现在在 Add New 或 Edit 我填充 jquery Colorbox 并在其中加载我的表单。这是点击我的控制器方法的链接。

```
<a 
    href="<?php echo site_url('employees/form/'.$employee['id']);?>" 
    id="popUpEditFormTrigger" 
    return="<?php echo site_url('employees/entries'); ?>"
>Add New</a> 
```

正如您在此处看到的，我正在使用控制器方法来加载表单。这工作正常。在彩盒 form.js 中，这里有一些代码。

```
var dataString = $('#updateForm').serialize();
var url = $('#updateForm').attr('url');
$.ajax({
    type: "POST",
    url: url,
    data: dataString,
    success: function() {                
        $.fn.colorbox.close();                
    }
}); 
return false; 
```

当 ajax 成功时，它会关闭颜色框。return false 防止列表视图走得更远，然后

```
return="<?php echo site_url('employees/entries'); ?>" 
```

运行并刷新表中的条目。

控制器

```
public function submit()
{
    $this->load->library('form_validation');

    $this->form_validation->set_rules('name',' Employee Name'.'trim|required');
    $this->form_validation->set_rules('salary',' Salary'.'trim|required');
    $this->form_validation->set_rules('description',' Description'.'trim|required');

    if($this->form_validation->run()){
        $data['name']           =   $post['name'];
        $data['salary']         =   $post['salary'];
        $data['description']    =   $post['description'];

        $result =   $this->employeesModel->insertEmployee($data);
    }else{
        $this->load->view('employee_form');
    }
} 
```

问题 ：

问题是我想在颜色框中重新填充表单，以便我可以显示用户验证错误。但无论是否执行插入或验证失败，颜色框总是关闭。如果验证失败，我想在颜色框中再次填充表单并防止超链接属性返回到 site_url('employees/entries')。我怎样才能做到这一点？我确信 JQuery 可以处理这个，但我不知道如何。需要的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T09:01:34.843

嘿，我不知道 Ajax，但我在我的应用程序中使用带有 JS 的颜色框。我也仅将其用于相同目的。

将您`colorbox.js`的文件包含在视图文件中，您将调用此`Add New`链接。

```
<a href="javascript:add_new('<?php echo $employee['id']  ?>')">Add new</a> 
```

一旦用户单击此链接，这将调用您需要在文件末尾编写的 JS 函数。

```
function show_channels(employee_id) { 

$.colorbox({href:"<?php echo ROOT_FOLDER ?>/controller_name/show_channels/" + employee_id,iframe:true,width:'515px',height:'374px'});
} 
```

现在颜色框将加载我在上面的 javascript 函数中指定的 url。

现在您需要编写一个控制器函数来处理数据。

```
public function submit()
{
$this->load->library('form_validation');

$this->form_validation->set_rules('name',' Employee Name'.'trim|required');
$this->form_validation->set_rules('salary',' Salary'.'trim|required');
$this->form_validation->set_rules('description',' Description'.'trim|required');

if($this->form_validation->run()){
    $data['name']           =   $post['name'];
    $data['salary']         =   $post['salary'];
    $data['description']    =   $post['description'];

    $result =   $this->employeesModel->insertEmployee($data);
}else{
    $this->load->view('employee_form');
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T11:14:24.250

好的，您在这里提出的概念是导致问题的原因。如果没有验证错误，您想关闭表单。但使用成功功能并不意味着。`success function`无论. `ajax request`_ `php`所以你需要做的是......

在php方面：

```
if(ok){
$data['res'] = '1'; // which means that everything is ok
}
else{
$data['res'] = '0'; // which means that you had a problem with your validation.
}
// then pass the data in json format or any other format you need. 
```

上面的代码只是澄清这个想法的一个**示例。**

那么重要的是..在你的jquery方面：

```
success: function(data) {                
        if(data.res == '1')
        {
            $.fn.colorbox.close();  
         }
        else
        { // display the errors
        }  
    } 
```

所以这个成功函数告诉你`ajax request`已经成功了。所以在里面你可以检查验证是否正常。

# javascript - Javascript图像滑块问题

> ID：14908254
> 
> 赞同：0
> 
> 时间：2013-02-16T07:58:55.743
> 
> 标签：javascript, image-rotation

我使用了以下幻灯片代码，可[在此论坛页面上找到](http://www.dynamicdrive.com/forums/showthread.php?52588-Fading-Rotating-Background-Images&s=e46a29188b64352a870f7fcec16335af&p=219512#post219512)

这是代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<TITLE>New Restaurant - Crete</TITLE>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="Imagetoolbar" content="no">
<link rel="shortcut icon" href="favicon.ico">

<script type="text/javascript" language="JavaScript1.2">

//Background Image Slideshow- © Dynamic Drive (www.dynamicdrive.com)
//For full source code, 100's more DHTML scripts, and TOS,
//visit http://www.dynamicdrive.com

//Specify background images to slide
var bgslides=new Array()
bgslides[0]="http://www.google.com/img1.jpg"
bgslides[1]="http://www.google.com/img2.jpg"
bgslides[2]="http://www.google.com/img3.jpg"
bgslides[3]="http://www.google.com/img4.jpg"
bgslides[4]="http://www.google.com/img5.jpg"
bgslides[5]="http://www.google.com/img6.jpg"

//preload images
var processed=new Array()
for (i=0;i<bgslides.length;i++){
processed[i]=new Image()
processed[i].src=bgslides[i]
}
</script>

<style type="text/css">
<!--
   html, body, #wrapper {
      height:100%;
      margin: 0;
      padding: 0;
      border: none;
      text-align: center;
      overflow:hidden;
   }
   #wrapper {
      margin: 0 auto;
      text-align: center;
      vertical-align: top;
      width: 550px;
   }
   .image {
    position:relative;
    float:left; /* optional */
   }
   .image .text {
    position:absolute;
    top:30px; /* in conjunction with left property, decides the text position */
    left:0;
    width:550px; /* optional, though better have one */
    }
    p {
    font-family:Trajan Pro, serif;
    font-size:medium;
    font-weight:bold;
    color:white;
    }
    h1 {
    font-family:Trajan Pro, serif;
    font-weight:bold;
    font-size:x-large;
    color:white;
    text-align:center;
    }
    body {
    background-attachment:fixed;
    background-repeat: no-repeat;
    /*Use center center in place of 300 200 to center bg image*/
    background-position: center;
    }

#bg {
  position:absolute;z-Index:0;left:0px;top:0px;
}

#bg IMG{
  position:absolute;left:0px;top:0px;
}

-->
</style>
</head>

<body>
<div id="bg" >
<img  src="http://www.google.com/img1.jpg">
<img  src="http://www.google.com/img2.jpg">
<img  src="http://www.google.com/img3.jpg">
<img  src="http://www.google.com/img4.jpg">
<img  src="http://www.google.com/img5.jpg">
<img  src="http://www.google.com/img6.jpg">
</div>

<script type="text/javascript">
// Animate (11-January-2010)
// by Vic Phillips http://www.vicsjavascripts.org.uk

// To progressively change the Left, Top, Width, Height or Opacity of an element over a specified period of time.
// With the ability to scale the effect time on specified minimum/maximum values
// and with three types of progression 'sin' and 'cos' and liner.

// **** Application Notes

// **** The HTML Code
//
// when moving an element the inline or class rule style position of the element should be assigned as
// 'position:relative;' or 'position:absolute;'
//
// The element would normally be assigned a unique ID name.
//

// **** Initialising the Script.
//
// The script is initialised by assigning an instance of the script to a variable.
// e.g A = new zxcAnimate('left','id1')
// where:
//  A           = a global variable                                                               (variable)
//  parameter 0 = the mode(see Note 1).                                                           (string)
//  parameter 1 = the unique ID name or element object.                                           (string or element object)
//  parameter 1 = the initial value.                                                              (digits, default = 0)

// **** Executing the Effect
//
// The effect is executed by an event call to function 'A.animate(10,800 ,5000,[10,800]);'
// where:
//  A           = the global referencing the script instance.                                 (variable)
//  parameter 0 = the start value.                                                            (digits, for opacity minimum 0, maximum 100)
//  parameter 1 = the finish value.                                                           (digits, for opacity minimum 0, maximum 100)
//  parameter 2 =  period of time between the start and finish of the effect in milliseconds. (digits or defaults to previous or 0(on first call) milliSeconds)
//  parameter 3 = (optional) to scale the effect time on a specified minimum/maximum.         (array, see Note 3)
//                 field 0 the minimum value. (digits)
//                 field 1 the maximum value. (digits)
//  parameter 3 = (optional) the type of progression, 'sin', 'cos' or 'liner'.                (string, default = 'liner')
//                 'sin' progression starts fast and ends slow.
//                 'cos' progression starts slow and ends fast.
//
//  Note 1:  Examples modes: 'left', 'top', 'width', 'height', 'opacity.
//  Note 2:  The default units(excepting opacity) are 'px'.
//           For hyphenated modes, the first character after the hyphen must be upper case, all others lower case.
//  Note 3:  The scale is of particular use when re-calling the effect
//           in mid progression to retain an constant rate of progression.
//  Note 4:  The current effect value is recorded in A.data[0].
//  Note 5:  A function may be called on completion of the effect by assigning the function
//           to the animator intance property .Complete.
//           e.g. [instance].Complete=function(){ alert(this.data[0]); };
//

// **** Functional Code(1.58K) - NO NEED to Change

function zxcAnimate(mde,obj,srt){
 this.to=null;
 this.obj=typeof(obj)=='object'?obj:document.getElementById(obj);
 this.mde=mde.replace(/\W/g,'');
 this.data=[srt||0];
 return this;
}

zxcAnimate.prototype.animate=function(srt,fin,ms,scale,c){
 clearTimeout(this.to);
 this.time=ms||this.time||0;
 this.neg=srt<0||fin<0;
 this.data=[srt,srt,fin];
 this.mS=this.time*(!scale?1:Math.abs((fin-srt)/(scale[1]-scale[0])));
 this.c=typeof(c)=='string'?c.charAt(0).toLowerCase():this.c?this.c:'';
 this.inc=Math.PI/(2*this.mS);
 this.srttime=new Date().getTime();
 this.cng();
}

zxcAnimate.prototype.cng=function(){
 var oop=this,ms=new Date().getTime()-this.srttime;
 this.data[0]=(this.c=='s')?(this.data[2]-this.data[1])*Math.sin(this.inc*ms)+this.data[1]:(this.c=='c')?this.data[2]-(this.data[2]-this.data[1])*Math.cos(this.inc*ms):(this.data[2]-this.data[1])/this.mS*ms+this.data[1];
 this.apply();
 if (ms<this.mS) this.to=setTimeout(function(){oop.cng()},10);
 else {
  this.data[0]=this.data[2];
  this.apply();
  if (this.Complete) this.Complete(this);
 }
}

zxcAnimate.prototype.apply=function(){
 if (isFinite(this.data[0])){
  if (this.data[0]<0&&!this.neg) this.data[0]=0;
  if (this.mde!='opacity') this.obj.style[this.mde]=Math.floor(this.data[0])+'px';
  else zxcOpacity(this.obj,this.data[0]);
 }
}

function zxcOpacity(obj,opc){
 if (opc<0||opc>100) return;
 obj.style.filter='alpha(opacity='+opc+')';
 obj.style.opacity=obj.style.MozOpacity=obj.style.KhtmlOpacity=opc/100-.001;
}

</script>

<script type="text/javascript">
<!--

function BGFade(o){
 var p=document.getElementById(o.ID)
 if (p){
  var bgs=p.getElementsByTagName('IMG');
  this.bgs=[];
  for (var z0=0;z0<bgs.length;z0++){
   this.bgs[z0]=new zxcAnimate('opacity',bgs[z0]);
  }
  this.nu=z0-1;
  this.ms=o.Duration||1000;
  this.hold=o.Hold||this.ms*2;
  if(this.nu>0){
   this.Rotate();
  }
 }
}

BGFade.prototype.Rotate=function(){
 this.bgs[this.nu].obj.style.zIndex='0';
 this.bgs[this.nu].animate(100,0,this.ms);
 this.nu=++this.nu%this.bgs.length;
 this.bgs[this.nu].obj.style.zIndex='1';
 this.bgs[this.nu].obj.style.left=-(this.bgs[this.nu].obj.width-zxcWWHS()[0])/2+'px';  // horizontal center
 this.bgs[this.nu].obj.style.top=-(this.bgs[this.nu].obj.height-zxcWWHS()[1])/2+'px';  // vertical center
 this.bgs[this.nu].animate(0,100,this.ms);
 var oop=this;
 this.to=setTimeout(function(){ oop.Rotate(); },this.hold);
}

function zxcByClassName(nme,el,tag){
 if (typeof(el)=='string') el=document.getElementById(el);
 el=el||document;
 for (var tag=tag||'*',reg=new RegExp('\\b'+nme+'\\b'),els=el.getElementsByTagName(tag),ary=[],z0=0; z0<els.length;z0++){
  if(reg.test(els[z0].className)) ary.push(els[z0]);
 }
 return ary;
}

function zxcWWHS(){
 if (window.innerHeight) return [window.innerWidth-10,window.innerHeight-10,window.pageXOffset,window.pageYOffset];
 else if (document.documentElement.clientHeight) return [document.documentElement.clientWidth-10,document.documentElement.clientHeight-10,document.documentElement.scrollLeft,document.documentElement.scrollTop];
 return [document.body.clientWidth,document.body.clientHeight,document.body.scrollLeft,document.body.scrollTop];
}

new BGFade({
 ID:'bg',        // the unique id name of the container div.                    (string)
 Duration:1000,  // the duration of the fade effect in milli seconds.           (digits)
 Hold:2000       // the duration of the change between images in milli seconds. (digits)
});
//-->
</script>
</body>

</html> 
```

我有一个问题，这是一个奇怪的错误。如果您有超过 3 张图像（4 张或更多图像），那么会发生的不是淡入下一张图像，而是淡入倒数第二张图像。如果您只有三个图像，它工作正常。但我需要 6 张图片。

例如，如果我有 6 张图像，那么：
图像#1 出现，
然后图像#1 淡入图像#5，然后图像#2 出现，
然后图像#2 淡入图像#5，然后图像#3 出现，
然后图像#3 淡入图像#5，然后出现图像#4，
然后图像#4 淡入图像#5，然后出现图像#5，
然后图像#5 淡入图像#6，然后图像#6 出现，
然后图像#6淡入图像#1，然后出现图像#1

如您所见，当它到达倒数第二张图像时，它开始正常工作。但是，如果您重新加载页面，则循环会以这个奇怪的错误重新开始。

但应该发生的是：
图像#1 出现，
然后图像#1 淡入图像#2，
然后图像#2 淡入图像#3，
然后图像#3 淡入图像#4，
然后图像#4 淡入图像# 5，
然后图像#5淡入图像#6，
然后图像#6淡入图像#1

你能告诉我如何解决这个问题，以便淡入淡出在 3 张以上的图像上正常工作吗？

**注意：** *图像太大不是问题。如果它是 1px x 1px 图像，也会发生同样的事情。*

（注：演示图像不再存在）

* * *

* * *

好的，所以我正在取得进展——

显示 SECOND TO LAST 的原因似乎是因为显然所有图像都显示在重复框中；只是，随着数量的增加，它们就会消失。除了最后一个图像之外，所有图像的不透明度都为 1，最后一个图像的不透明度为 -0.001，这使其隐藏，因此您看到倒数第二个而不是最后一个。

但是应该发生的是所有，但第一个应该被赋予不透明度-0.001，直到他们的数字出现。（当他们的号码出现时，由于某种原因，他们的副本消失了，并且 javascript 手动覆盖了具有不透明度的 HTML 元素的页面 CSS。）

* * *

* * *

**解决了！！！！耶！！！！**

好的，所以您需要添加以下 CSS：

```
#bg img {
    opacity: -0.001;
} 
```

请注意，您需要使用 !important 强制图像位置。例如，bg 的 div id 的完整 CSS 是：

```
#bg {
  position: absolute;
  z-Index:0;
}

#bg img {
  position: absolute;
  top: 50px !important;
  left: 50px !important;
  opacity: -0.001;
} 
```

[http://jsfiddle.net/6CWud/16/](http://jsfiddle.net/6CWud/16/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T23:17:58.393

**解决了！！！！耶！！！！**

好的，所以您需要添加以下 CSS：

```
#bg img {
    opacity: -0.001;
} 
```

请注意，您需要使用 !important 强制图像位置。例如，bg 的 div id 的完整 CSS 是：

```
#bg {
  position: absolute;
  z-Index:0;
}

#bg img {
  position: absolute;
  top: 50px !important;
  left: 50px !important;
  opacity: -0.001;
} 
```

[http://jsfiddle.net/6CWud/16/](http://jsfiddle.net/6CWud/16/)

# uiview - UIView 阴影问题与方向

> ID：14908255
> 
> 赞同：2
> 
> 时间：2013-02-16T07:58:59.227
> 
> 标签：uiview, orientation, layer, uibezierpath, dropshadow

我有`UiTableView within UiView`。我想设置`corner radius & shadow`为`UIView`. 我正在使用此代码来提供`shadow with corner`并且工作正常。

```
myView.backgroundColor = [UIColor clearColor];
[myView.layer setCornerRadius:10.0f];
[myView.layer setBorderColor:[UIColor lightGrayColor].CGColor];
[myView.layer setBorderWidth:1.0f];
[myView.layer setShadowColor:[UIColor blackColor].CGColor];
[myView.layer setShadowOpacity:0.8];
[myView.layer setShadowRadius:3.0];
[myView.layer setShadowOffset:CGSizeMake(2.0, 2.0)];

// below line is for smooth scrolling
[myView.layer setShadowPath:[UIBezierPath bezierPathWithRect:myView.bounds].CGPath];` 
```

一切正常`Portrait mode`。我的应用程序都受支持`Orientation`，我们正在使用`Autoresizing property`它。当我改变方向时`Shadow is displaying according to frame of Portrait mode`。这如何管理两个方向。

知道如何`setShadowPath`根据 Orientation OR bound 进行更改吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T12:47:36.143

我找到了自己的解决方案。我有一个创建的方法`- (void) viewWithEffects: (UIView*) myView {// copy the shadow code from the question}`。现在我将此方法称为`- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation{}`.

因此，当方向更改 `didRotateFromInterfaceOrientation`调用时，它将`Corner with Shadow effects.`根据`Autoresize`您的视图将阴影设置为您的视图。如果您的应用程序不支持两个方向，则不需要这样做。打个电话就行了`viewdidload or viewwillAppear`。我希望它会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T10:37:09.300

iOS6 Rotation 试试这个代码，让我知道它是否适合你

```
 - (BOOL)shouldAutorotate
{
    if (UIDeviceOrientationIsLandscape([UIDevice currentDevice].orientation))
    {
    self.view.backgroundColor = [UIColor redColor];
    }
else if (UIDeviceOrientationIsPortrait([UIDevice currentDevice].orientation))
   {
    self.view.backgroundColor = [UIColor blackColor];
   }

return YES;
} 
```

# mobile - 如何将我的手机与我的星号 ivr 系统连接

> ID：14908257
> 
> 赞同：2
> 
> 时间：2013-02-16T07:59:06.493
> 
> 标签：mobile, set, asterisk, ivr

我正在尝试将我的手机（诺基亚 N95）连接到我的星号（ivr）系统，但是每次我在手机上进行 sip 配置时，注册失败都会出现在我的手机屏幕上，有时它会出现在我的笔记本电脑屏幕上的星号 CLI “找不到匹配的对等体”，因为“注册失败”出现在移动设置屏幕上

这是我系统的设置（sip 文件）

```
 [4007]
 username=4007
 type=friend
 secret=rock7
 host=dynamic
 callerid=4007
 context=default 
```

以下是我在我的手机上做的事情（诺基亚 N95）

```
 Profile name=default
 Service profile=IETF
 Default access point=PTCL-BB  (where PTCL-BB is the wifi internet connection 
                                my mobile set and system are connected with)

 Public user name=sip:4007@192.168.1.3 (192.168.1.3 ip address of my system)
 Use compression=No
 Registration=Always on
 Use security=No

 Proxy server settings:

 Proxy server address=sip:192.168.1.3
 Realm=192.168.1.3
 User name=4007
 Password=rook7
 Allow loose routing=Yes
 Transport type=Auto
 Port=5060

 Register server settings:

 Register server address=sip:192.168.1.3
 Realm=192.168.1.3
 User name=4007
 Password=rook7
 Transport type=Auto
 Port=5060 
```

我怎样才能解决我的手机注册这个问题？感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T22:52:43.663

为什么你只是不谷歌设置？这里是：

[http://blog.laimbock.com/2008/02/25/nokia-n95-sip-and-asterisk-14/](http://blog.laimbock.com/2008/02/25/nokia-n95-sip-and-asterisk-14/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T12:55:24.587

我也有这个问题。现在我解决了。首先使用 Internet Call 注册您的 SIP 连接，并将默认设置为 Internet 电话。

# ios - iPad中的NSDocument目录路径问题？

> ID：14908258
> 
> 赞同：1
> 
> 时间：2013-02-16T07:59:07.357
> 
> 标签：ios, ipad, cocoa-touch, nsdocumentdirectory

我在 iPad 应用程序中工作，使用 Xcode 4.3.2 开发我的应用程序，我从 Web 服务获取 pdf 文件（URL），并在 NSDocumentDirectory 路径中下载 pdf 文件，然后从 NSDocument 目录路径中检索 pdf 文件以显示在

```
 NSString *pathlink = (NSDocument Directory Path)
  NSURL *pdfUrl = [NSURL fileURLWithPath:pathlink];
  pdf = CGPDFDocumentCreateWithURL((CFURLRef)pdfUrl);
  CFRelease(pdfUrl);

Below this classes for Curl page animation:
LeavesCache.h
LeavesView.h
LeavesViewController.h
Utilities.h 
```

然后每个页面都打开 curl 动画并在我的 ipad 模拟器中运行，并且工作正常。然后我尝试在我的 iPod 设备中运行这个应用程序，设备版本是 ios6.1，所以我在 iTunes 连接中插入 ipa 文件来运行它。当我点击打开pdf文件时应用程序崩溃了，我尽力了，但我不知道，请帮助我。

感谢提前

错误：

```
Ipad ReportCrash[7011] <Notice>: Formulating crash report for process PublishGenieApplication[7008]
Ipad com.apple.launchd[1] (UIKitApplication:com.everestindia.apps[0x7e28][7008]) <Warning>: (UIKitApplication:com.everestindia.apps[0x7e28]) Job appears to have crashed: Segmentation fault: 11
Ipad backboardd[26] <Warning>: Application 'UIKitApplication:com.everestindia.apps[0x7e28]' exited abnormally with signal 11: Segmentation fault: 11
Ipad ReportCrash[7011] <Error>: libMobileGestalt copySystemVersionDictionaryValue: Could not lookup ReleaseType from system version dictionary
 Ipad ReportCrash[7011] <Notice>: Saved crashreport to /var/mobile/Library/Logs/CrashReporter/genieapplication_2013-02-16-131259_Ipad.plist using uid: 0 gid: 0, synthetic_euid: 501 egid: 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T09:17:12.120

```
CFURLRef pdfURL = (CFURLRef)[[NSURL alloc] initFileURLWithPath:myFilePath];
pdf = CGPDFDocumentCreateWithURL(pdfURL);
CFRelease(pdfURL); 
```

# vb.net - 如何使用 LINQ 连接 DataTable 和 SQL 表

> ID：14908260
> 
> 赞同：0
> 
> 时间：2013-02-16T07:59:18.170
> 
> 标签：vb.net, linq

我需要`DataTable`使用 LINQ 连接一个和一个 SQL 表。

这是 LINQ 查询：

```
from c in db.Staging
join c1 in tagging on c.RPT_ID equals c1.RPT_ID
select c 
```

但是我收到以下错误：

> System.NotSupportedException：本地序列不能在查询运算符的 LINQ to SQL 实现中使用，但 Contains 运算符除外。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T08:04:14.497

只有当您加入的所有记录都首先在内存中时，您才能执行此操作。您需要执行以下操作。

```
var s = db.Staging.ToList(); 
var joinedResult = from c in s
                 join c1 in tagging on c.RPT_ID = c1.RPT_ID
                 select c; 
```

调用 ToList() 会导致 SQL 执行并从数据库中获取所有记录。如果数据库中有很多记录，这并不好。

实际上，您可能想要做的是以下事情。

```
var IDs = tagging.Select(t=>t.RPT_ID).ToArray();
var matches = db.Staging.Where(s=>IDs.Contains(s.RPT_ID); 
```

这只会在数据库中找到您在数据表中具有 ID 的暂存记录。如果你有一个大的临时表，效率会更高。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T08:06:14.140

尝试这个：

```
from c in db.Staging
join c1 in tagging on c.RPT_ID = c1.RPT_ID
select c 
```

我没有 VS 来确认，但我认为它打破了“等于”，因为它是一个内置的 .NET 函数。LINQ 无法将所有函数转换为 TSQL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-06T10:11:07.227

```
db = new YourContext();
MyClass t = new MyClass ();
var listOfIEnumerableData = from myClass in t.GetMyClassData()
                            select new MyClass { ID = myClass.ID, Name=myClass.Name,Description=myClass.Description};

var v = (from t1 in db.DbClass.AsEnumerable()
         join t2 in listOfIEnumerableData on t1.DbClassFK equals t2.ID
         select new VmMyClass
             {
                 MyClass = t1,
                 DbClass = t2
             }).OrderByDescending(x => x.Acc_Chart1.ID).Take(100).AsEnumerable();

this.DataList = v; 
```

# javascript - update time values real time for comments on a page

> ID：14908281
> 
> 赞同：-2
> 
> 时间：2013-02-16T08:02:22.747
> 
> 标签：javascript, real-time

i want to be able to update the time values of all comments on a page as in the time elapsed. i know that i should be running a script with `setInterval()` or may be use long polling, don't know if this is a preferred technique.

Moreover, even if i get the updated values(maybe in an array) of all comments in JS response, how am i supposed to assign the values to related comments.

If there is some other logic i should use, please suggest and help with it.

I think it would be more or less like push notification functionality.

**EDIT: ** since this has been downvoted already, but also that i have now posted the question, i would appreciate if people would suggest me something please..

**update**: I achieved the above functionality by recreating the PHP function which calculated elapsed time in JavaScript which is as follows:

```
function calcTime(date){

if(date == ""){
  return "No date provided";
}

periods = new Array("second", "minute", "hour", "day", "week", "month", "year", "decade");
lengths = new Array("60","60","24","7","4.35","12","10");

now = Math.round(new Date().getTime() / 1000);
unix_date = date;

// check validity of date
if(unix_date == ""){
    return "bad date";
 }

// future date or past date
if(now > unix_date){
 difference = now - unix_date;
 tense = "ago";
} else {
  difference = unix_date - now;
  tense = "from now";
}

for(var j=0;difference >= lengths[j] && j < (lengths.length) - 1; j++){
difference /= lengths[j];
}
difference = Math.round(difference);

 if(difference != 1){
    periods[j] += "s";  
}

return difference+" "+periods[j]+" "+tense ;

} 
```

in the HTML returned a hidden value with the timestamp from database and then looped through the results in JS to get the new values using `setInterval()` function, thereby eliminating the need to call php and unnecessary initiating ajax requests. something like this:

```
(function(){
  setInterval(function (){
  timeValues = document.getElementsByClassName('unixTime');
  abbrValues = document.getElementsByClassName('full_timestamp');
  len = timeValues.length;
  alen = abbrValues.length;

  for(i=0; i<len;i++){
 ut = timeValues[i].value;
   for(j=0;j<alen;j++){
    abbrValues[i].innerHTML = calcTime(ut);
      }
      }

   },10000);

 })(); 
```

Thanks everyone who tried to help and i appreciate the moderators for reopening this question.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T08:04:30.907

尝试这个

```
 $(document).ready(function(){
          setInterval("getTime();", 30000);
     }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T08:09:52.940

好吧，如果您使用的是 Jquery，那么评论部分必须有一个标签，您要在其中存储“时间”，所以如果该标签有一个 ID ='timeid'，那么它就像这样简单，其中响应是新的时间分钟或任何你想要的

```
function getTime(){
 $.ajax(){
 // get response here
 //
 $('#timeid').val(response.' minutes');

 }
 } 
```

# mysql - VB.NET MYSQL Multiple Queries

> ID：14908282
> 
> 赞同：1
> 
> 时间：2013-02-16T08:02:25.797
> 
> 标签：mysql, vb.net

I have vb.net desktop app that uses mysql. I can connect remotely without any problem. I have timer control that query the database every 10 secs. Now I want to execute multiple Functions without using multiple connections.

```
Private Sub Timer__Tick()...
    call GET_QUEUED_EMAILS
    call Function2
    Call Function3
End sub 
```

sample function:

```
Public Function GET_QUEUED_EMAILS(ByVal sql As String)
    Try
             ' Load From DB
            GlobalFunctions.db_connect()
            Dim reader As New MySqlDataReader
            Dim command As MySqlCommand = connection.CreateCommand()
            command.CommandText = sql

            reader = command.ExecuteReader
            If (reader.HasRows) Then
                While (reader.Read())

                       message_id = reader(0).ToString
                       message_status = reader(2).ToString

                    Exit While
                End While
                reader.Close()
                GlobalFunctions.connection.Close()
               call another function here....
            Else
                reader.Close()
                GlobalFunctions.connection.Close()

            End If
        End If
    Catch ex As Exception
           MessageBox.Show("Error" & ex.Message)
        End Try

End Sub' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-22T08:05:52.040

当第一个计时器结束时使用三个计时器启动第二个计时器

```
Private Sub Timer1__Tick()...
    call GET_QUEUED_EMAILS
    Timer2.Start
    Timer1.Stop
End sub
Private Sub Timer2__Tick()...
    call Function2
    Timer3.Start
    Timer2.Stop
End sub
Private Sub Timer3__Tick()...
    call Function3
    Timer3.Start
End sub 
```

# c# - How add .net Framework4 in Installshield 2009

> ID：14908288
> 
> 赞同：1
> 
> 时间：2013-02-16T08:02:39.420
> 
> 标签：c#, installshield

I am using Installshield 2009 and I create a setup (install script project)

Now I want to change my setup to .NET 4 in Installshield

How do I do it?

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:54:17.447

InstallShield[为 IS2010 创建了一个扩展包，](http://kb.flexerasoftware.com/selfservice/documentLink.do?externalID=Q209084)但您使用的是 2009。InstallShield 包含一个 prereq 编辑器，您可以使用它来编写您自己的 prereqs。.NET 3.0 的教程可以在这里找到：

[使用 InstallShield 12 安装 .NET Framework 3.0](http://blog.iswix.com/2006/11/using-installshield-12-to-install-net.html)

和

[教程：将安装先决条件添加到 InstallShield 包](http://shieldmaster.wordpress.com/2009/04/26/tutorial-adding-setup-prerequisites-to-installshield-package/)

我打赌你也可以下载 IS2010 eval，应用扩展包，然后将 .PRQ 文件复制到你的 IS2009 安装...

# ruby - 无法在 Windows 中使用 Aptana Studio 3 启动 ruby 程序的调试器

> ID：14908291
> 
> 赞同：1
> 
> 时间：2013-02-16T08:03:16.760
> 
> 标签：ruby, aptana, aptana3, ruby-debug

作为这个问题的标题，我无法`rb`在 Aptana Studio 3 中开始调试我的文件。这是“控制台”视图的输出：

```
c:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:247:in `to_specs': Could not find ruby-debug-base (>= 0) amongst [actionmailer-3.2.1, actionpack-3.2.1, activemodel-3.2.1, activerecord-3.2.1, activerecord-sqlserver-adapter-3.2.1, activeresource-3.2.1, activesupport-3.2.1, archive-tar-minitar-0.5.2, arel-3.0.2, bigdecimal-1.1.0, builder-3.0.0, bundler-1.0.22, cgi_multipart_eof_fix-2.5.0, coffee-rails-3.2.2, coffee-script-2.2.0, coffee-script-source-1.2.0, columnize-0.3.6, erubis-2.7.0, execjs-1.3.0, fastthread-1.0.1-x86-mswin32, gem_plugin-0.2.3, hike-1.2.1, i18n-0.6.0, io-console-0.3, journey-1.0.2, json-1.5.4, linecache-0.43-x86-mswin32, linecache19-0.5.12, mail-2.4.1, mime-types-1.17.2, minitest-2.5.1, mongrel-1.1.5-x86-mswin32-60, multi_json-1.1.0, mysql-2.7.3-x86-mswin32, pg-0.13.1-x86-mingw32, polyglot-0.3.3, rack-1.4.1, rack-cache-1.1, rack-ssl-1.3.2, rack-test-0.6.1, rails-3.2.1, railties-3.2.1, rake-0.9.2.2, rb-readline-0.4.2, rbx-require-relative-0.0.9, rdoc-3.9.4, ruby-debug-base-0.10.3-x86-mswin32, ruby-debug-base19x-0.11.30.pre10, ruby-debug-ide-0.4.17.beta16, ruby-debug-ide-0.4.5, ruby_core_source-0.1.5, rubyzip-0.9.6.1, sprockets-2.1.2, sqlite3-1.3.5-x86-mingw32, sqlite3-ruby-1.3.3, thor-0.14.6, tilt-1.3.3, tiny_tds-0.5.1-x86-mingw32, treetop-1.4.10, tzinfo-0.3.31] (Gem::LoadError)
    from c:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:256:in `to_spec'
    from c:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/specification.rb:435:in `find_by_name'
    from c:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems.rb:209:in `rescue in try_activate'
    from c:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems.rb:206:in `try_activate'
    from c:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:58:in `rescue in require'
    from c:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:35:in `require'
    from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/ruby-debug-ide-0.4.17.beta16/lib/ruby-debug-ide.rb:6:in `<top (required)>'
    from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/ruby-debug-ide-0.4.17.beta16/bin/rdebug-ide:8:in `require_relative'
    from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/ruby-debug-ide-0.4.17.beta16/bin/rdebug-ide:8:in `<top (required)>'
    from c:/RailsInstaller/Ruby1.9.3/bin/rdebug-ide:19:in `load'
    from c:/RailsInstaller/Ruby1.9.3/bin/rdebug-ide:19:in `<main>' 
```

我查过了，不明白为什么找不到`ruby-debug-base`。这是的输出`gem list --local`

```
actionmailer (3.2.1)
actionpack (3.2.1)
activemodel (3.2.1)
activerecord (3.2.1)
activerecord-sqlserver-adapter (3.2.1)
activeresource (3.2.1)
activesupport (3.2.1)
archive-tar-minitar (0.5.2)
arel (3.0.2)
bigdecimal (1.1.0)
builder (3.0.0)
bundler (1.0.22)
cgi_multipart_eof_fix (2.5.0)
coffee-rails (3.2.2)
coffee-script (2.2.0)
coffee-script-source (1.2.0)
columnize (0.3.6)
erubis (2.7.0)
execjs (1.3.0)
fastthread (1.0.1 i386-mswin32)
gem_plugin (0.2.3)
hike (1.2.1)
i18n (0.6.0)
io-console (0.3)
journey (1.0.2)
json (1.5.4)
linecache (0.43 mswin32)
linecache19 (0.5.12)
mail (2.4.1)
mime-types (1.17.2)
minitest (2.5.1)
mongrel (1.1.5 x86-mswin32-60)
multi_json (1.1.0)
mysql (2.7.3 mswin32)
pg (0.13.1 x86-mingw32)
polyglot (0.3.3)
rack (1.4.1)
rack-cache (1.1)
rack-ssl (1.3.2)
rack-test (0.6.1)
rails (3.2.1)
railties (3.2.1)
rake (0.9.2.2)
rb-readline (0.4.2)
rbx-require-relative (0.0.9)
rdoc (3.9.4)
ruby-debug-base (0.10.3 mswin32)
ruby-debug-base19x (0.11.30.pre10)
ruby-debug-ide (0.4.17.beta16, 0.4.5)
ruby_core_source (0.1.5)
rubyzip (0.9.6.1)
sprockets (2.1.2)
sqlite3 (1.3.5 x86-mingw32)
sqlite3-ruby (1.3.3)
thor (0.14.6)
tilt (1.3.3)
tiny_tds (0.5.1 x86-mingw32)
treetop (1.4.10)
tzinfo (0.3.31) 
```

我的红宝石环境：

```
RubyGems Environment:
  - RUBYGEMS VERSION: 1.8.16
  - RUBY VERSION: 1.9.3 (2012-02-16 patchlevel 125) [i386-mingw32]
  - INSTALLATION DIRECTORY: C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1
  - RUBY EXECUTABLE: C:/RailsInstaller/Ruby1.9.3/bin/ruby.exe
  - EXECUTABLE DIRECTORY: C:/RailsInstaller/Ruby1.9.3/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86-mingw32
  - GEM PATHS:
     - C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1
     - C:/Users/TrungHieu/.gem/ruby/1.9.1
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
  - REMOTE SOURCES:
     - http://rubygems.org/ 
```

我使用**RailsInstaller 2.1.0**来安装我的 ruby​​。

谁能帮我制作调试器wotk。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T21:40:27.860

使用 Window->show view 添加“服务器”选项卡，然后将其用于您的特定应用程序。我让它与快速调试器（gemfile 中的用户 gem 调试器）一起工作，你很高兴。

[https://github.com/cldwalker/debugger](https://github.com/cldwalker/debugger)

# java - Java中的基本三角函数

> ID：14908299
> 
> 赞同：4
> 
> 时间：2013-02-16T08:04:32.170
> 
> 标签：java, trigonometry

几天来我一直在为这个问题苦苦挣扎，所以经过大量谷歌搜索后，我决定在这里问。

无论如何，我需要使用该`Math.tan()`方法，但它并不能真正按我的意愿工作。因为如果我设置了一个双变量：`double i = opposite/adjacent`然后使用该`Math.tan()`方法，它只会返回 0.0！例如：

```
double i = 480/640;
System.out.println(Math.tan(i)); 
```

但它仍然返回零！我读到该`Math.tan()`方法仅返回“弧度”值。但正因为如此，它不应该返回零？还是我错了？我知道如果我使用一个真正的计算器并做 tan(480/640) 它会返回我想要的。

所以我希望有人理解我并愿意帮助我！提前致谢！（顺便说一句，我很抱歉英语不好）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T08:13:02.023

在`int`计算中，`480/640`是`0`。所以`i`will 的结果是`0.0`。

你需要写`double i = 480.0/640;`（至少有一个数字必须写为 a `double`）。

你也可以写：`double a = 480, b = 640;`然后如果你写`double i = a/b;`，你会得到很好的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T08:12:44.973

当您在没有强制转换的情况下进行数学运算时，Java 将首先隐式地生成文字整数 - 在您的情况下，这确实会导致 0。

在进行数学运算之前先转换值，就可以了：

```
 double i = 480D/640D;
    System.out.println(i); 
```

或者

```
 double i = (double)480/(double)640;
    System.out.println(i); 
```

或者

```
 double numerator = 480;
    double denominator = 640;
    double i = numerator / denominator;
    System.out.println(i); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T08:07:25.507

写`double i = 480.0/640.0;`的`480/640`理解为整数除法，所以给0

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-16T08:12:25.730

在某一方面的变化

双 i = (双) 480/640;

# .htaccess - 删除扩展名时目录的htaccess问题

> ID：14908303
> 
> 赞同：2
> 
> 时间：2013-02-16T08:05:23.410
> 
> 标签：.htaccess, redirect, file-extension

我使用 htaccess 从 URL 中删除 .php 扩展名。当存在同名的文件和目录时，就会出现问题。通过删除 .php 扩展名，服务器认为我正在尝试访问一个拒绝访问的目录。

示例 **www.europe.com/italy.php**变成**www.europe.com/italy**但由于我有一个名为 italy 的文件夹，服务器拒绝访问说“禁止访问，您无权访问 /italy/服务器”

这是我的 HTACCESS

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On

## hide .php extension
# To externally redirect /dir/foo.php to /dir/foo
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s([^.]+)\.php [NC]
RewriteRule ^ %1 [R,L,NC]

## To internally redirect /dir/foo to /dir/foo.php
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^ %{REQUEST_URI}.php [L] 
```

**更新：**最终代码就像一个魅力！

```
DirectorySlash Off

IndexOptions FancyIndexing
Options All
RewriteEngine on

RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /([^/]+/)*[^.]+\.php
RewriteRule ^(([^/]+/)*[^.]+)\.php$ http://www.yoursite.com/$1 [R=301,L]

RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(([^/]+/)*[^/.]+)$ /$1.php [L] 
```

# hadoop - 简单的猪加入和处理两个袋子

> ID：14908305
> 
> 赞同：2
> 
> 时间：2013-02-16T08:05:27.593
> 
> 标签：hadoop, apache-pig

我有以下简单的猪脚本，

```
AA = LOAD 'A' USING PigStorage(',') as (f1,f2,f3);
BB = LOAD 'B' AS (f1);
C = foreach AA generate f1;
C = JOIN AA BY f1 LEFT OUTER, BB BY f1 using 'replicated';
D = FOREACH C GENERATE FLATTEN((IsEmpty(AA) ? null : AA));
store D into 'd'; 
```

但是当我运行时，它给了我这个错误：

无效的标量投影：AA：需要从关系中投影列才能用作标量

能否请你帮忙？

最好的，萨拉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T18:18:26.430

根据[IsEmpty](http://pig.apache.org/docs/r0.10.0/func.html#isempty)文档：

> ,,检查包或地图是否为空"

在您的情况下，它不起作用，因为*C*只是一个包含一个元组/行的*外袋，其中包含来自**AA*和*BB*的字段：

```
C: {AA::f1: int,AA::f2: chararray,AA::f3: chararray,BB::f1: int} 
```

您可以在*AA*的每个字段上应用[Bincond](http://pig.apache.org/docs/r0.10.0/basic.html#arithmetic)运算符来检查和替换值，例如：

 *```
D = foreach C generate (AA::f1 is null ? '-1' : AA::id) ... ; 
```

但是，如果您坚持使用 IsEmpty，那么以下将完成这项工作：

```
D = foreach C {
 bg = TOBAG(TOTUPLE(AA::f1,AA::f2,AA::f3));
 generate IsEmpty(bg) ...;
} 
```

注意：
我认为 IsEmpty 部分的 Pig 文档中可能存在拼写错误。 [在前面](http://pig.apache.org/docs/r0.8.1/piglatin_ref2.html#IsEmpty)的示例中，**cogroup**用于连接两个关系，这创建了一个 IsEmpty 可以在其上操作的内袋。[后来](http://pig.apache.org/docs/r0.10.0/func.html#isempty)这被左连接取代，这会导致您描述的相同问题。*

# java - 关于hibernate和JFreechart的问题

> ID：14908311
> 
> 赞同：0
> 
> 时间：2013-02-16T08:05:56.347
> 
> 标签：java, hibernate, jfreechart

我有个问题。`gnujaxp.jar`从 JFreechart Libs放入后。我的应用程序将不再工作。我没有抛出问题

```
org.hibernate.InvalidMappingException: Unable to read XML
    org.hibernate.util.xml.MappingReader.readMappingDocument(MappingReader.java:101) 
```

我确信`gnujaxp.jar`来自 JFreechart 库的库是导致问题的原因。因为在我再次删除它之后。我的应用程序再次工作。

我的问题是。我该如何解决这个问题。或者如果 hibernate 和 jfreechart 之间真的存在冲突，在生成图表时是否有其他选择？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T14:14:34.260

既然您要求替代方案，请尝试[XChart](http://xeiam.com/xchart.jsp)。免责声明：我是该项目的首席开发人员。我们一直在开发即将推出的 2.0.0 版本，其中将包括许多简洁的东西，包括条形图和面积图、样式管理器、右键单击另存为、对数轴和主题。它被设计成超轻量级并且没有依赖。如果您有任何功能要求，请随时[在此处](https://github.com/timmolter/XChart/issues?state=open)添加。

# windows - Windows Server 2008 Core = -无效的别名动词

> ID：14908317
> 
> 赞同：0
> 
> 时间：2013-02-16T08:06:28.070
> 
> 标签：windows, windows-server-2008, windows-server-2008-r2

目前在我的 Uni microsoft 类的虚拟机上运行 server 2008 Core。我必须使用以下命令更改计算机名称；

```
WMIC ComputerSystem Where name = "%computername%" call Rename Name "MSN-SC-004" 
```

我似乎得到了错误

```
= -Invalid alias verb 
```

有任何想法吗？我尝试了很多名称等变体。如果有帮助，我正在研究“MCTS Guide to Windows Server 2008”图书活动 2-8。

谢谢xo

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T15:12:24.233

> wmic 计算机系统，其中 name="OLDNAME" 调用重命名 name="NEWNAME"

注意：'='前后没有空格

# vb.net - 我可以在水晶报表中控制子报表详细信息部分的高度吗

> ID：14908320
> 
> 赞同：0
> 
> 时间：2013-02-16T08:06:53.670
> 
> 标签：vb.net, visual-studio, crystal-reports, visual-studio-2005, subreport

```
 Dim mainRp As New MainReport
Dim subRp As New SubReportTest

subRp.Section3.Height = 500

 CrystalReportViewer1.ReportSource = mainRp 
```

上面的代码不起作用，也没有显示任何错误

但没有这样的事情

```
mainRp.Subreports("SubReportTest.rpt").Section3.Height = 500
mainRp.Subreports("SubReportTest.rpt").????? 'for set the height of subreport 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:35:47.490

查看 ReportDocument 类定义，我会说，是的：http: [//msdn.microsoft.com/en-us/library/aa664718 (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa664718(v=vs.71).aspx)

虽然，我之前没有测试过，但要注意单位是缇而不是像素 :)

# postgresql - PostgreSQL 中有没有办法自动设置记录的更新时间？

> ID：14908321
> 
> 赞同：1
> 
> 时间：2013-02-16T08:07:11.347
> 
> 标签：postgresql, timestamp, sql-update

有没有办法在表的定义中设置记录的更新时间，就像在插入记录时使用将默认值设置为 NOW() 函数一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T01:33:38.843

您最好的选择是触发器。这是一个简单的选项，自包含：

```
CREATE TABLE triggertest (
    id serial,
    test text,
    last_modified timestamp default now()
);

CREATE FUNCTION update_last_modified() RETURNS TRIGGER
LANGUAGE PLPGSQL AS
$$
BEGIN
   NEW.last_modified := now();
   RETURN NEW;
END;
$$;
CREATE TRIGGER update_timestamp BEFORE UPDATE ON triggertest 
FOR EACH ROW EXECUTE PROCEDURE update_last_modified();

insert into triggertest (test) values ('test');

select * from triggertest; 
```

这将返回：

```
 id | test |       last_modified        
----+------+----------------------------
  1 | test | 2013-02-16 17:30:41.678707
(1 row) 
```

对于我们的更新测试：

```
 update triggertest set test = 'another';

  select * from triggertest; 
```

这返回

```
 id |  test   |      last_modified       
 ----+---------+--------------------------
   1 | another | 2013-02-16 17:31:38.1126
 (1 row) 
```

# c - 插入排序 C 代码无法正常工作，它只对前两个元素进行排序

> ID：14908330
> 
> 赞同：0
> 
> 时间：2013-02-16T08:08:08.840
> 
> 标签：c, algorithm, insertion-sort

我无法找出这段代码中的错误，这段代码没有错误，但没有给出正确的结果。

```
#include <stdio.h>

int main(int argc, const char *argv[])
{

    int a[10], n, i, j, k, value_to_insert, hole_pos;
    printf("Enter the total no: of elements in an array");
    scanf("%d", &n);

    for (i = 0; i < n; i++) {
        scanf("%d", &a[i]);
    }

    for (j = 1; j <= n; j++) {
        value_to_insert=a[j];
        hole_pos=j;

        while (j > 0 && value_to_insert < a[hole_pos - 1]) {
            a[hole_pos]=a[hole_pos-1];
            hole_pos=hole_pos-1;
        }

        a[hole_pos] = value_to_insert;
    }

    printf("Sorted Array \n");
    for (k = 0; k < n; k++)
        printf("%d\n", a[k]);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T08:24:53.427

而不是循环条件`j <= n`应该有`j < n`

而不是`j > 0`应该有`hole_pos > 0`

如果你编写代码，你应该知道它是如何以及做什么的。你为什么要`j > 0`在那个while循环中写，`j`甚至没有在循环中递减？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T08:56:27.210

行中有错误 `for (j = 1; j <= n; j++) value_to_insert=a[j];` 当 j 的值等于 n 时，您正在越过数组的边界。所以应该是 `for (j = 1; j < n; j++)value_to_insert=a[j];`

另一个错误在行中 `while (j > 0 && value_to_insert < a[hole_pos - 1])`

这里条件`j>0`总是为真，因为 j 从 1 开始。这一行应该写成

`while (hole_pos > 0 && value_to_insert < a[hole_pos - 1])`.

每次递减时，`hole_pos`您都应该在进入循环之前检查它。希望这可以帮助。

# ruby-on-rails-3 - 我如何在关联属性上应用 rails sort_by

> ID：14908337
> 
> 赞同：0
> 
> 时间：2013-02-16T08:10:07.053
> 
> 标签：ruby-on-rails-3, sorting

我有这些联想

```
 class Job
     has_many :job_applications
   end 

   def JobApplication
     belongs_to :job
     has_one :vote_count
   end

   def VoteCount
     #attribute counts  And counts can be 4,5,1,2,6...
     belongs_to :job_application
   end 
```

现在我想排序

```
 @job = 1  #id = 1

      job_applications = @job.job_applications.sort_by!{|a| a.vote.counts} 
```

我需要包括所有工作申请，如果工作申请没有投票关联，它应该是 0。但我没有例外。

任何帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T09:28:25.427

您应该通过以下方式处理零投票关联：

```
 job_applications = @job.job_applications.sort_by!{|a| a.try(:vote).try(:counts) || 0} 
```

# javascript - 递归动画抛出：超出最大调用堆栈大小

> ID：14908340
> 
> 赞同：0
> 
> 时间：2013-02-16T08:10:38.167
> 
> 标签：javascript, jquery, jquery-ui

我们目前正在尝试将我们网页中使用的 jquery 从 1.8 升级到 1.10.1，但这破坏了页面中的一些功能。我能够隔离实际代码并且很惊讶地看到这一点。我之前运行的递归动画代码抛出错误。下面是代码。

```
 <script>
         $(document).ready(function(){
             glowOpenItems(500);
         });
         function glowOpenItems(duration){

                    $('#dialog').addClass('glowed',duration, function(){ 
                        $(this).removeClass('glowed',duration,function(){glowOpenItems(duration)});
                    });

            }
    </script>
    <style>
        .glowed{
                box-shadow: 0px 0px 40px 3px #e14f1c;
              }
    </style>
    <div id="dialog" title="Basic dialog">
      <p>Test Code</p>
    </div> 
```

进一步调查发现这东西有效

```
$(document).ready(function(){

            animate();
         });

         function animate() {
                $('#dialog').animate({backgroundColor:'#ffcc00'}, 500, function(){
                    $('#dialog').animate({backgroundColor:'#3b5998'}, 500, function(){
                            animate();
                    });
                });
            } 
```

但是，每当将动画方法更改为**addClass**时，都会收到“未捕获的 RangeError：超出最大调用堆栈大小”。好像jquery的addclass有变化。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T08:18:35.843

你的递归中没有`base case`。所以简单地说它不会脱离递归（无限递归。）。这就是为什么你得到最大的调用堆栈错误。尝试添加可以中断递归的基本情况。

在您的情况下`'[id$="reqGlowPanel"]').length>0 && run == true`，任何表达式都不会随着函数的执行而改变。因此，如果它们是真实的，那么它们将一直是真实的。

尝试这样的事情：（这只是一个逻辑，所以语法可能会出错。）

```
function glowOpenItems(duration){

                duration--   //decrease your duration in each call
                if(duration <= 0) 
                    return //the base case   
                else
                    $('#dialog').addClass('glowed',duration, function(){ 
                    $(this).removeClass('glowed',duration,function()    {glowOpenItems(duration)});
                }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T08:21:46.033

考虑部分：

```
$j('[id$="highlightPanelOpenRequiredItems"]').removeClass('glowed',duration,glowOpenItems(duration)); 
```

我想你应该放入`glowOpenItems(duration)`一个内联函数：

```
$j('[id$="highlightPanelOpenRequiredItems"]').removeClass('glowed',duration,function(){glowOpenItems(duration);}); 
```

另外，你不应该执行 jQuery 选择器太多次。考虑将选定的 jQuery 对象分配给一个变量并重用它。

# python - 在 Java Web 应用程序中使用 python 进行后端搜索

> ID：14908344
> 
> 赞同：0
> 
> 时间：2013-02-16T08:11:13.447
> 
> 标签：python, search, web-applications, backend

我正在开发一个实现登录/注销和搜索功能的 java web 应用程序。我刚刚开始学习 python，听说 python 的搜索字典实现具有良好的性能优势。目前我正在使用 servlet 进行搜索，这似乎有点慢，那么如何在我的 Web 应用程序中使用 python 在后端进行搜索并提供快速结果。

我尝试搜索这个问题，发现这个问题 [Java Python Integration](https://stackoverflow.com/questions/1119696/java-python-integration)。接受的答案谈到了 Jython，但我不太了解它，因为我是 python 的新手。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T10:31:29.277

Python 的字典功能不会比 Java 的字典功能 (HashMap) 快，所以（至少对我而言）如果您的目标只是提高搜索性能，听起来您正走入死胡同。

但是，我使用 Python 对 Java 项目的性能改进进行了原型设计，使用它以一种比 Java Web 应用程序更容易的方式测试新工具。

例如，测试用基于更简单的 Sphinx 搜索的搜索替换基于 Lucence 的复杂搜索 -- [http://sphinxsearch.com/](http://sphinxsearch.com/) -- 使用 Python 我可以从命令行与基于 Web 的搜索一起进行测试，并修改代码快速查看结果。

最终，我没有理由不能使用 Java 中的 Sphinx Search，但是使用 Python 可以让我在不影响实时 Web 应用程序的情况下对搜索进行原型设计和调整。

# c# - 网络爬虫无需浏览器即可获取基于 ajax 的链接

> ID：14908345
> 
> 赞同：0
> 
> 时间：2013-02-16T08:11:36.640
> 
> 标签：c#, ajax, web-crawler

有没有一种简单的方法来执行 ajax 并检索 ajax 结果，而无需使用自动 Web 浏览器或没有外部库的旧方法？是否有一些高级算法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T20:17:47.990

没有。JS代码需要在本地编译，然后在本地执行。

代码：[https](https://svn.arachnode.net/svn/arachnodenet/trunk/Renderer/) ://svn.arachnode.net/svn/arachnodenet/trunk/Renderer/UN/PW：Public/Public

您可以从 SVN 客户端获取路径，删除 Arachnode.* 引用并拥有 FAST JavaScript 解释器。它使用 mshtml.dll，它为 AxShDocVw.dll 提供动力，后者为 .NET WebBrowser 控件提供动力，并且比 .NET 控件快约 6 倍。

[https://svn.arachnode.net/svn/arachnodenet/trunk/Renderer/HtmlRenderer.cs](https://svn.arachnode.net/svn/arachnodenet/trunk/Renderer/HtmlRenderer.cs)是首先要阅读的文件。

谢谢，迈克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T08:33:09.423

我不知道没有任何外部库的任何方法，但是 Htmlunit 很棒（用 java 编写）并且有 ac# 包装器，您可以在这里尝试：[https ://github.com/HtmlUnit/NHtmlUnit](https://github.com/HtmlUnit/NHtmlUnit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T17:57:21.070

试试nutch。一般来说，所有不受 robots.txt 限制且不需要用户输入的内容都可以被爬虫抓取。

# php - 如何在 Heroku 上部署 Laravel 4 应用程序？

> ID：14908347
> 
> 赞同：6
> 
> 时间：2013-02-16T08:12:08.847
> 
> 标签：php, heroku, laravel, composer-php, laravel-4

我知道 Heroku 支持 Cedar 堆栈中的许多不同环境，包括[PHP](http://net.tutsplus.com/tutorials/php/quick-tip-deploy-php-to-heroku-in-seconds/)。
Laravel 4 应用程序的典型文件夹结构如下：

```
app/
bootstrap/
public/
    packages/
    index.php
vendor/
composer.json
phpunit.xml 
```

注意2点：

1.  主要的**index.php**文件不在根目录下，在 public 文件夹下。

2.  有一个**composer.json**文件，Heroku 需要像 Ruby 应用程序中的 gems 一样自动安装所有项目依赖项。

所以我的问题是：
有没有办法在 Heroku 上部署这种应用程序？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T01:43:40.733

您需要使用自定义 buildpack 来设置文档根目录并执行一个也集成了 composer 的脚本。在[Heroku 的 Buidlpack 中](https://github.com/heroku/heroku-buildpack-php)，您需要更新 bin/compile 脚本来处理 composer 和 conf/httpd.conf 来设置文档根目录。此外，Heroku 的 buildpack 没有编译 mcrypt，因此 Laravel 4 无法使用该 buildpack。[我在 buildpack 的分支中](https://github.com/winglian/heroku-buildpack-php)包含了许多更新，包括 mcrypt、composer 和自定义文档根。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-07T15:55:10.553

Heroku 最近发布了一个官方的 PHP buildpack [https://github.com/heroku/heroku-buildpack-php](https://github.com/heroku/heroku-buildpack-php)。它是新的，我最初遇到了一些麻烦。但它应该改进。它支持 PHP 或 HHVM。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-22T15:07:08.470

可以在 Procfile 中指定应用程序的入口点，将其放在应用程序的根目录中。在您的情况下，内容将是：

```
web: vendor/bin/heroku-php-apache2 public/ 
```

[https://devcenter.heroku.com/articles/getting-started-with-php#define-a-procfile](https://devcenter.heroku.com/articles/getting-started-with-php#define-a-procfile)

# javascript - 对鼠标悬停的影响

> ID：14908351
> 
> 赞同：1
> 
> 时间：2013-02-16T08:12:37.613
> 
> 标签：javascript, jquery, css, jquery-ui

我正在尝试在我的网站中实现一项功能。我想使用 Stack Overflow 中使用的效果，当**鼠标移到用户配置文件**上并**打开显示用户配置文件的框时。**那里用的是什么效果？？我试过`fade`了，`toggle`但他们不是那个..

# php - 与默认的 Ubuntu 构建相比，为什么使用大量 CPU 重新编译 PHP？

> ID：14908355
> 
> 赞同：5
> 
> 时间：2013-02-16T08:13:21.860
> 
> 标签：php, optimization, ubuntu, compilation

我有一个连续运行的多进程 PHP (CLI) 应用程序。最初，我使用的是 PHP (5.3.2-1ubuntu4.18) 的标准 Ubuntu 10.04 包构建。但是，我正在尝试优化内存使用，因为每个进程使用的内存量限制了我可以在任何给定时间运行的分叉数量（因为我的可用内存量是有限的）。按照[preinheimer](https://stackoverflow.com/a/14877107/896660)给出的建议，我重新编译了 PHP，禁用了所有扩展，然后仅重新启用了我的应用程序所需的那些（mysql、curl、pcntl、posix 和 json）。我的配置命令是：

```
'./configure'  '--prefix=/usr/local/phpbare' '--with-config-file-path=/etc \
/php5/clibare' '--disable-all' '--with-mysql=mysqlnd' '--with-curl' \
'--enable-pcntl' '--enable-posix' '--enable-json' 
```

这个新的“基本”构建允许我的应用程序运行，但令我惊讶的是，当*我*`top`使用. （在 top 报告的数量通常为 0-1% 之前，通常占 CPU 的 15-20%）。是否有可能我错过了一些 php 扩展，它以某种方式优化脚本以使用更少的计算资源？？？或者 Ubuntu 构建可能针对 Ubuntu 架构进行了优化，而我的自定义构建缺少这些优化？如果是这样，我如何确定在 Ubuntu 构建中使用了哪些优化，以便在我的“基本”构建中重新创建它们？

 *这是来自 的输出片段，`ps aux | grep php`用于在下面的评论中证明我的观点：

```
root  12952  0.3  0.9  33176  4968 pts/2    S    Feb14  11:15 s.php 5
root  12955  0.3  0.9  32664  4732 pts/2    S    Feb14  11:12 s.php 5
root  12958  0.3  0.9  32664  4796 pts/2    S    Feb14  10:51 s.php 5
root  12961  0.3  0.9  32740  4752 pts/2    S    Feb14  11:07 s.php 5
root  14162  0.3  0.9  33000  4904 pts/2    S    Feb14  10:51 s.php 5
root  14165  0.3  1.0  33256  5340 pts/2    S    Feb14  10:56 s.php 5
root  23426  9.5  1.1  13492  6040 pts/2    S    Feb15 151:38 s.php 1 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-17T19:21:02.587

操作码缓存使 PHP 快了好几倍。确保您已安装[APC](http://pecl.php.net/package/APC)等扩展程序。

您还可以检查`phpinfo()`标准包以查看`configure`它使用了哪些选项并使用相同的选项重新编译以检查这是配置问题还是其他问题，例如不同的编译器或库。*

# html - div 框高度

> ID：14908356
> 
> 赞同：2
> 
> 时间：2013-02-16T08:13:21.783
> 
> 标签：html, height, alignment

另一个 CSS 问题。

我在标签内有 div 框`<li>`，在标签内`<ul>`。每个 div 标签都包含一张图片，图片下方有文字。图像的大小都相同，但文本的长度不一样 - 所以 div 框的大小也不一样。我希望图像的顶部对齐，但现在它们看起来更像楼梯。我尝试改变 div 的高度，但这会将盒子向下延伸，而不是向上延伸。这是我到目前为止的相应代码。

```
<ul>
        <li class="line2"><div style="width:284px;border:3px;border-style:solid;"><img class="border" src="/images/icons/1.png" width="284" height="164" alt=""/><p>Paragraph.</p></div></li>
        <li class="line2"><div style="width:284px;border:3px;border-style:solid;"><img class="border" src="/images/icons/2.png" width="284" height="164" alt=""/><p>Longer Paragraph</p></div></li>
        <li class="line2"><div style="width:284px;border:3px;border-style:solid;"><img class="border" src="/images/icons/3.png" width="284" height="164" alt=""/><p>Longest Paragraph</p></div></li>
        </ul> 
```

（边界只是让我可以看到我正在使用的东西）

我意识到我可以将图像和文本分成不同的 div，但是我已经有很多不同的 div，我觉得我有点过分了。如果这是最好的方法，我会的，但我想确定。

如果有人可以提供帮助，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T21:05:18.633

除了最明显的东西，我什么都试过了；我`<br/>`在文本下添加了低于最高标签的标签。我知道可能有更好的方法来做到这一点，但最简单的方法对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T08:35:59.120

标签基本上添加了一个`<div>`带有换行符的逻辑划分。这就是为什么它像楼梯一样显示。所以我建议，你应该尝试`<span>`使用标签，通过它你可以水平对齐你的盒子；我希望这有帮助

# c# - 如何在调用后立即在 C# 中返回一个字符串。？

> ID：14908362
> 
> 赞同：1
> 
> 时间：2013-02-16T08:13:52.997
> 
> 标签：c#, jquery, asp.net, .net, google-visualization

这是谷歌图表的示例.. 我正在使用 c#.net.. 我应该在 C# 中做什么来返回一个字符串来代替这里的 getData.php..

```
function drawChart() {
      var jsonData = $.ajax({
          url: "getData.php",
          dataType:"json",
          async: false
          }).responseText; 
```

我曾尝试使用类来解决它，但它没有奏效..可以使用网络服务还是他们的任何其他方式..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T08:54:22.703

像这样更改您的 JavaScript 代码。

```
var jsonData = $.ajax({
      url: "MyWebService.asmx/GetData",
      dataType:"json",
      async: false
      }).responseText; 
```

创建一个名为*MyWebService.asmx*的网络服务，并在它的代码隐藏中编写，

```
using System;
using System.Web;
using System.Web.Services;
using System.Web.Script.Serialization;

[System.Web.Script.Services.ScriptService]
public class MyWebService: System.Web.Services.WebService 
{
    [WebMethod]
    public string GetData()
    {
        return "your desired string";
    }
} 
```

# python - 将 Pymunk 与 Pyinstaller 一起使用

> ID：14908363
> 
> 赞同：1
> 
> 时间：2013-02-16T08:14:05.220
> 
> 标签：python, pyinstaller, chipmunk, pymunk

从字面上看，我没有发现任何可以提供帮助的谷歌搜索。即使对于 py2exe，但我想使用 pyinstaller。

我的问题是模块（pymunk [aka Chipmunk]）未完全包含在 exe 构建中。它可能缺少某种 dll。基本上它缺少一个我不知道如何解决的依赖项。

```
Failed to load pymunk library.

This error usually means that you don't have a compiled version of chipmunk in
the correct spot where pymunk can find it. pymunk does not include precompiled
chipmunk library files for all platforms.

The good news is that it is usually enough (at least on *nix and OS X) to
simply run the compile command first before installing and then retry again:

You compile chipmunk with
> python setup.py build_chipmunk
and then continue as usual with
> python setup.py install
> cd examples
> python basic_test.py

(for complete instructions please see the readme file)

If it still doesnt work, please report as a bug on the issue tracker at
http://code.google.com/p/pymunk/issues
Remember to include information about your OS, which version of python you use
and the version of pymunk you tried to run. A description of what you did to
trigger the error is also good. Please include the exception traceback if any
(usually found below this message).

Traceback (most recent call last):
  File "<string>", line 2, in <module>
  File "C:\python26\lib\site-packages\PyInstaller\loader\iu.py", line 386, in importHook
    mod = _self_doimport(nm, ctx, fqname)
  File "C:\python26\lib\site-packages\PyInstaller\loader\iu.py", line 480, in doimport
    exec co in mod.__dict__
  File ".\build\pyi.win32\CollisionUtil\out00-PYZ.pyz\pymunk", line 53, in <module>
  File "C:\python26\lib\site-packages\PyInstaller\loader\iu.py", line 431, in importHook
    mod = self.doimport(nm, ctx, ctx + '.' + nm)
  File "C:\python26\lib\site-packages\PyInstaller\loader\iu.py", line 480, in doimport
    exec co in mod.__dict__
  File ".\build\pyi.win32\CollisionUtil\out00-PYZ.pyz\pymunk._chipmunk", line 14, in <module>
  File ".\build\pyi.win32\CollisionUtil\out00-PYZ.pyz\pymunk.libload", line 68, in load_library
  File ".\build\pyi.win32\CollisionUtil\out00-PYZ.pyz\ctypes", line 431, in LoadLibrary
  File ".\build\pyi.win32\CollisionUtil\out00-PYZ.pyz\ctypes", line 353, in __init__
WindowsError: [Error 126] The specified module could not be found 
```

Chipmunk 库是通过 ctypes 模块包装的，因此只要这些消息来自 Chipmunk，它就假定它正在被编译。从 Python 的角度来看，这对我没有帮助。也许不吧。

谁能告诉我如何修复 pyinstaller 的这种依赖关系？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T17:31:55.957

您需要包含 chipmunk.dll 文件（如果您想在 osx 上运行它，则需要 .dylib 文件，对于 linux 则需要 .so 文件）。一个快速的 hacky 选项是手动将其复制到生成的 .exe 文件所在的位置。另一种选择是让 pyinstaller 为您包含它。我不是 pyinstaller 的专家，但一种方法是编辑 pyinstaller 创建的 .spec 文件。

就像是：

```
import os, pymunk
pymunk_dir = os.path.dirname(pymunk.__file__)
chipmunk_libs = [
    ('chipmunk.dll', os.path.join(pymunk_dir, 'chipmunk.dll'), 'DATA'),
]
#... 
coll = COLLECT(exe,
               a.binaries + chipmunk_libs,
               a.zipfiles,
               a.datas,
               strip=None,
               upx=True,
               name=os.path.join('dist', 'basic_test')) 
```

我创建了一个完整的示例并将其提交给 pymunk trunk。看看[https://github.com/viblo/pymunk/blob/master/examples/pyinstaller_basic_test.spec](https://github.com/viblo/pymunk/blob/master/examples/pyinstaller_basic_test.spec)（请注意，这个例子在开始时有一点路径黑客，它在 sys.path.insert(0 ,'..'). 鉴于您的程序已经可以找到 pymunk 并且您将规范文件放在同一个位置，您将不需要该部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-02-28T19:28:45.293

我使用带有 pymunk==6.0.0 的 pyinstaller 遇到了同样的问题

解决方法是将pymunk文件夹中的_chipmunk.pyd文件重命名为chipmunk.dll。

根据此答案，它们是相同的文件类型，但具有不同的扩展名，此解决方法使编译器能够找到文件并完成其任务。 [https://stackoverflow.com/questions/8262884/python-c-extension-use-extension-pyd-or-dll#:~:text=4%20Answers&text=pyd%20files%20are%20just%20dll,from%20normal %20dlls%2C%20I%20recommend%20.&text=dll%20in%20windows](https://stackoverflow.com/questions/8262884/python-c-extension-use-extension-pyd-or-dll#:%7E:text=4%20Answers&text=pyd%20files%20are%20just%20dll,from%20normal%20dlls%2C%20I%20recommend%20.&text=dll%20in%20windows)。

# jquery - jQuery Tokeninput add input on click

> ID：14908367
> 
> 赞同：1
> 
> 时间：2013-02-16T08:14:40.333
> 
> 标签：jquery, jquery-tokeninput

I am using jQuery Tokeninput and works perfectly. I let user select category from the Tokeninput box. Now, I need to put a button which will open a popup screen and it will let user to insert a new category to Database. After user inserts the new category, popup will close and I want that new category be in the Tokeninput box as a token.

here is my code,

```
<script type="text/javascript">
$(document).ready(function () {
    $("#demo-input-facebook-theme").tokenInput("http://iyihekim.com/MedBulCategory_Service.aspx", {

        onAdd: function (item) {
            $.cookie("Kat_" + item.name, item.id);
        },
        onDelete: function (item) {
            var date = new Date();
            date.setTime(date.getTime());
            $.cookie("Kat_" + item.name, item.id, { expires: date });
        },

        theme: "facebook"

    });
}); 
```

I know that if I add prepopulate function as below, It will create it on Load but I want to call that function after popup box closes

```
<script type="text/javascript">
$(document).ready(function () {
    $("#demo-input-facebook-theme").tokenInput("http://iyihekim.com/MedBulCategory_Service.aspx", {
         // added this***************************
        prePopulate: [
            {id: 123, name: "Slurms MacKenzie"},
            {id: 555, name: "Bob Hoskins"},
            { id: 9000, name: "Kriss Akabusi" }],

        onAdd: function (item) {
            $.cookie("Kat_" + item.name, item.id);
        },
        onDelete: function (item) {
            var date = new Date();
            date.setTime(date.getTime());
            $.cookie("Kat_" + item.name, item.id, { expires: date });
        },

        theme: "facebook"

    });
}); 
```

Please help

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-08T12:39:24.357

这听起来像是你可以使用“add”事件来做的事情。

```
$("#demo-input-facebook-theme").tokenInput("add", {id: x, name: y}) 
```

# linq - 是否可以在不使用关键字 new 的情况下使用 LINQ 选择多个变量？

> ID：14908371
> 
> 赞同：0
> 
> 时间：2013-02-16T08:15:08.697
> 
> 标签：linq, linq-to-objects

有没有办法在下面的代码中选择 a 和 b 而没有 new 关键字？

```
(from a in Enumerable.Range(1, 9)
from b in Enumerable.Range(1, 9) select a,b).ToArray(); 
```

**编辑** 我的目标是避免像 new {ax = a, bx = b} 这样重命名

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T08:22:59.600

您也可以使用元组类，而不必指定变量

```
 IEnumerable<Tuple<int, int>> c = (from a in Enumerable.Range(1, 9)
                                          from b in Enumerable.Range(1, 9)
                                          select new Tuple<int, int>(a, b)); 
```

# excel - 如何抑制更新链接警告？

> ID：14908372
> 
> 赞同：119
> 
> 时间：2013-02-16T08:15:17.813
> 
> 标签：excel, vba

我正在尝试编写一个打开许多 Excel 文件的脚本。我不断收到提示：

```
This workbook contains links to other data sources. 
```

我希望不显示此消息，以便我的脚本可以自动浏览所有工作簿，而无需单击`Don't Update`每个工作簿。目前我正在使用以下内容：

```
function getWorkbook(bkPath as string) as workbook

Application.EnableEvents=False
Application.DisplayAlerts=False
getWorkbook=Workbooks.Open(bkPath,updatelinks:=0,readonly:=false)

end function 
```

但是，该消息仍然出现。我该如何压制它？

编辑：对于链接断开的工作簿，似乎会出现此消息；我没有看到该`This workbook contains one or more links that cannot be updated`消息，因为我设置`DisplayAlerts`为 false。工作簿链接到我们 Windows 服务器上一个文件夹中的等效文件，因此当从该文件夹中删除匹配文件时（作为我们业务流程的一部分发生），链接会中断。链接断开时是否可以抑制警告？

另外，我正在使用 Excel 2010。

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2013-02-16T08:45:29.643

**更新：**

在总结和讨论了所有细节之后，我花了 2 个小时检查选项，这次更新是 dot all `i`s.

## 准备工作

首先，我在由 VMWare 提供支持的 Clean Win7 SP1 Ultimate x64 虚拟机上执行了干净的 Office 2010 x86 安装（这是我日常测试任务的常规程序，因此我部署了许多）。

然后，我只更改了以下 Excel 选项（即所有其他选项在安装后保持不变）：

*   `Advanced > General > Ask to update automatic links` **检查**：

![要求更新自动链接](../Images/eed67d81c555a6e46ea78ba33efbd080.png)

*   `Trust Center > Trust Center Settings... > External Content > Enable All...`（尽管与数据连接相关的那个对于这种情况很可能并不重要）：

![外部内容](../Images/c1ef116782ab472f41f796f4d6480676.png)

## 前提条件

`C:\`我完全按照`@Siddharth Rout`他更新的答案中的建议准备并放入工作簿（为方便起见共享）： [https ://www.dropbox.com/s/mv88vyc27eljqaq/Book1withLinkToBook2.xlsx 然后](https://www.dropbox.com/s/mv88vyc27eljqaq/Book1withLinkToBook2.xlsx)**删除**链接的书，以便共享中的链接书不可用（肯定）。

## 手动开启

上面的共享文件在打开时显示（具有上面列出的 Excel 选项）2 个警告 - 按出现顺序：

**警告 #1**

![此工作簿包含指向其他数据源的链接](../Images/a843d10e8ff2e97d1859a46b7e142061.png)

单击后，`Update`我预计会得到另一个：

**警告 #2**

![此工作簿包含一个或多个无法更新的链接](../Images/7f8d8219df37c5708a6083a5da518130.png)

所以，我想我的测试环境现在非常类似于`OP`'s) 到目前为止一切顺利，我们终于去

## VBA 开幕

现在我将逐步尝试所有可能的选项以使图片清晰。为简单起见，我将仅共享相关的代码行（最后将共享带有代码的完整示例文件）。

**1.简单的Application.Workbooks.Open**

```
Application.Workbooks.Open Filename:="C:\Book1withLinkToBook2.xlsx" 
```

毫不奇怪 - 这会产生两个警告，就像上面的手动打开一样。

**2\. Application.DisplayAlerts = False**

```
Application.DisplayAlerts = False
Application.Workbooks.Open Filename:="C:\Book1withLinkToBook2.xlsx"
Application.DisplayAlerts = True 
```

此代码以**WARNING #1**结尾，并且单击的任一选项 ( `Update`/ `Don't Update`) 都不会产生进一步的警告，即`Application.DisplayAlerts = False`抑制**WARNING #2**。

**3\. Application.AskToUpdateLinks = False**

```
Application.AskToUpdateLinks = False
Application.Workbooks.Open Filename:="C:\Book1withLinkToBook2.xlsx"
Application.AskToUpdateLinks = True 
```

与 相反`DisplayAlerts`，此代码仅以**WARNING #2**结束，即`Application.AskToUpdateLinks = False`抑制**WARNING #1**。

**4.双重错误**

```
Application.AskToUpdateLinks = False
Application.DisplayAlerts = False
Application.Workbooks.Open Filename:="C:\Book1withLinkToBook2.xlsx"
Application.DisplayAlerts = True
Application.AskToUpdateLinks = True 
```

显然，这段代码最终会抑制**BOTH WARNINGS**。

**5.更新链接：=假**

```
Application.Workbooks.Open Filename:="C:\Book1withLinkToBook2.xlsx", UpdateLinks:=False 
```

最后，这个 1 行解决方案（最初由 提出`@brettdj`）的工作方式与 Double False：**NO WARNINGS**显示相同！

## 结论

除了良好的测试实践和非常重要的已解决案例（我可能每天在将工作簿发送给第 3 方时都会遇到此类问题，现在我准备好了），还学到了 2 件事：

1.  无论版本如何，Excel 选项都很重要——尤其是当我们谈到 VBA 解决方案时。
2.  每一个问题都有简短而优雅的解决方案 - 以及不明显和复杂的解决方案。再证明一个！）

非常感谢为解决方案做出贡献的每个人，尤其是提出问题的 OP。希望我的调查和详尽描述的测试步骤不仅对我有帮助）

以上代码示例的示例文件共享（多行特意注释）：[https ://www.dropbox.com/s/9bwu6pn8fcogby7/NoWarningsOpen.xlsm](https://www.dropbox.com/s/9bwu6pn8fcogby7/NoWarningsOpen.xlsm)

**原始答案**（使用某些选项针对**Excel 2007进行了测试）：**

这段代码对我来说很好 - 它循环遍历使用通配符指定的所有 Excel 文件`InputFolder`：

```
Sub WorkbookOpening2007()

Dim InputFolder As String
Dim LoopFileNameExt As String

InputFolder = "D:\DOCUMENTS\" 'Trailing "\" is required!

LoopFileNameExt = Dir(InputFolder & "*.xls?")
Do While LoopFileNameExt <> ""

Application.DisplayAlerts = False
Application.Workbooks.Open (InputFolder & LoopFileNameExt)
Application.DisplayAlerts = True

LoopFileNameExt = Dir
Loop

End Sub 
```

我尝试使用外部链接不可用的书籍 - 没有警告。

示例文件：[https ://www.dropbox.com/s/9bwu6pn8fcogby7/NoWarningsOpen.xlsm](https://www.dropbox.com/s/9bwu6pn8fcogby7/NoWarningsOpen.xlsm)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-02-16T08:41:05.360

打开 Excel 的 VBA 编辑器并在即时窗口中输入（见截图）

```
Application.AskToUpdateLinks = False 
```

关闭 Excel，然后打开您的文件。它不会再次提示您。请记住在关闭工作簿时重置它，否则它也不适用于其他工作簿。

**截图**：

![在此处输入图像描述](../Images/35a985f7f70a28055fabdf9d69a72d7e.png)

**编辑**

所以将它应用到您的代码中，您的代码将如下所示

```
Function getWorkbook(bkPath As String) As Workbook
    Application.AskToUpdateLinks = False
    Set getWorkbook = Workbooks.Open(bkPath, False)
    Application.AskToUpdateLinks = True
End Function 
```

**跟进**

Sigil，下面的代码也适用于链接断开的文件。这是我的测试代码。

测试条件

1.  创建 2 个新文件。命名它们`Sample1.xlsx`并将`Sample2.xlsx`它们保存在`C:\`
2.  在 的单元格`A1`中`Sample1.xlsx`，键入此公式`='C:\[Sample2.xlsx]Sheet1'!$A$1`
3.  保存并关闭这两个文件
4.  删除 Sample2.xlsx！！！
5.  打开一个新工作簿，它的模块粘贴此代码并运行`Sample`。你会注意到你不会得到提示。

**代码**

```
Option Explicit

Sub Sample()
    getWorkbook "c:\Sample1.xlsx"
End Sub

Function getWorkbook(bkPath As String) As Workbook
    Application.AskToUpdateLinks = False
    Set getWorkbook = Workbooks.Open(bkPath, False)
    Application.AskToUpdateLinks = True
End Function 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-08-17T05:24:03.530

Excel 2016 我在创建工作簿/文件时遇到了类似的问题，然后我更改了名称，但不知何故保留了旧的工作簿名称。经过大量的谷歌搜索......好吧，在那里没有找到任何最终答案......

转到数据 -> 编辑链接 -> 启动提示（在底部），然后选择最适合您的选项。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-05-17T00:06:58.477

当我在 Excel 中手动打开我的工作簿（而不是通过 VBA 以编程方式打开它）时，我想抑制询问您是否希望更新指向另一个工作簿的链接的提示。我尝试包括：`Application.AskToUpdateLinks = False`作为我宏中的第一行，`Auto_Open()`但这不起作用。然而我发现，如果你把它放在模块中的`Workbook_Open()`函数中`ThisWorkbook`，它会很好地工作——对话框被抑制，但更新仍然在后台静默发生。

```
 Private Sub Workbook_Open()
    ' Suppress dialog & update automatically without asking
    Application.AskToUpdateLinks = False
End Sub 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-12-11T15:00:10.710

（我没有足够的代表点来添加评论，但我想在此处添加一些清晰的答案）

Application.AskToUpdateLinks = False 可能不是您想要的。

如果设置为 False，则 MS Excel**将**尝试自动更新链接，它不会事先提示用户，有点违反直觉。

如果您要在**不**更新链接的情况下打开文件，正确的解决方案应该是：

**Workbook.Open(UpdateLinks:=0)**

相关链接： [AskToUpdateLinks=False 和 UpdateLinks:=0 的区别](https://stackoverflow.com/questions/45599597/difference-in-asktoupdatelinks-false-and-updatelinks-0)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-16T18:43:46.727

我找到了一个临时解决方案，至少可以让我处理这份工作。我编写了一个简短的 AutoIt 脚本，等待“更新链接”窗口出现，然后单击“不更新”按钮。代码如下：

```
while 1
if winexists("Microsoft Excel","This workbook contains links to other data sources.") Then
   controlclick("Microsoft Excel","This workbook contains links to other data sources.",2)
EndIf
WEnd 
```

到目前为止，这似乎奏效了。但是，我真的很想找到一个完全是 VBA 的解决方案，这样我就可以使它成为一个独立的应用程序。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-11-19T13:26:35.903

希望在解决这个问题（或部分问题）时提供一些额外的输入。

这将适用于`Excel`从另一个打开文件。*Peter L. 先生*的一行代码用于更改，使用以下代码：

```
Application.Workbooks.Open Filename:="C:\Book1withLinkToBook2.xlsx", UpdateLinks:=3 
```

这是在`MSDS`. 结果是它只是更新所有内容（是的，所有内容）而没有警告。如果您录制宏，也可以检查这一点。

在`MSDS`中，它指的是`MS EXCEL 2010`和`2013`。我想这`MS EXCEL 2016`也包括在内。

我有`MS EXCEL 2013`，并且情况与此主题几乎相同。所以我有一个文件（调用它`A`），其中的`Workbook_Open`事件代码总是卡在**更新链接提示符**上。我有另一个文件（称为它`B`）连接到这个文件，并且**数据透视表**强制我打开该文件`A`，以便可以加载数据模型。由于我想在后台静默打开文件，`A`我只使用上面写的行，加上`Windows("A.xlsx").visible = false`一个.`A``B`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-01-05T11:52:39.003

就像对这次谈话的警告一样。要删除更新链接通知，您可以在 workbook_open() 中执行类似的操作。

```
Private Sub workbook_Open()
Application.ThisWorkbook.UpdateLinks = xlUpdateLinksNever 
#Your code goes here
Application.ThisWorkbook.UpdateLinks = xlUpdateLinksAlways
End Sub 
```

# qt - 从 QListView 中选择值并在提交时将其传递给下一个窗口？

> ID：14908373
> 
> 赞同：0
> 
> 时间：2013-02-16T08:16:00.197
> 
> 标签：qt, qlistview, qabstractlistmodel

我`QListView`用来显示来自 MySQL 数据库的简单名称列表，现在我需要在单击**Next >**按钮时将选定的值发送到下一个窗口，我是 Qt 的新手，看到了`QAbstractListModel`类，但我没有得到哪个使用方法和方法，请指导我，提前谢谢你。

![在此处输入图像描述](../Images/0c0a22812398870acc6cf92ca8e90c6d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T13:41:58.940

给你一些伪代码......

主窗口.h

```
class MainWindow : public QMainWindow
{
...
signals:
   void sendListText(const QString&);
private slots:
   void nextClicked(void);

...
}; 
```

主窗口.cpp

```
MainWindow::MainWindow(QWidget* parent)
{
    ui.setupUi(this);
    connect( ui.nextButton, SIGNAL( clicked() ), this, SLOT( nextClicked() ) );
}

MainWindow::nextClicked(void)
{
    QModelIndex current = ui.list->currentIndex();
    qDebug() << current.data().toString();
    emit(sendListText(current.data().toString());
} 
```

其他窗口.h

```
class OtherWindow
{
    ...
public slots:
    void setEditText(const QString&);

}; 
```

其他窗口.cpp

```
void OtherWindow::setEditText(const QString& text)
{
    // add your text
} 
```

现在您必须将 连接到您可以访问它们`MainWindow::sendListText()`的插槽。`OtherWindow::setEditText()`

苏龙仔

# html - 动态添加div时的css浮动问题

> ID：14908383
> 
> 赞同：-4
> 
> 时间：2013-02-16T08:17:47.747
> 
> 标签：html, css

我的设计如下：

![](../Images/492ad51fccbefb02c879e8e333c6b4bb.png)

当我在任何块（第 1、第 2、第 3 或第 4）之后添加新 div 时，它会破坏位于其下方的 div。

当我在第一个 div 之后添加 div 时，设计采用以下内容：

![](../Images/f1612c272b020f786dbbb2a25e97a804.png)

div 的 CSS 规则就是：

```
width: 430px; margin-bottom:40px; float:left(for 1st and 3rd) or right(for 2nd and 4th) 
```

附加的 div 的 CSS 规则：

```
height:20px; width:20px; clear:both; overflow:hidden 
```

是什么导致了这个问题？

为什么底部 div 定位在右侧而不是向下滑动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T08:28:53.403

我建议您使用表格，您的问题将很容易解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T08:31:18.100

**CSS：**

```
 .div
        {
            width: 400px;
            margin: 20px;
            float: left;
            border: 1px solid #000;
        }
        .divwrapper
        {
            width: 900px;
        } 
```

**HTML：**

```
<div class="divwrapper">
        <div class="div">
            Hello 1Div
        </div>
        <div class="div">
            Hello 2Div
        </div>
        <div class="div">
            Hello 3Div
        </div>
        <div class="div">
            Hello 4Div
        </div>
    </div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T08:33:44.540

你应该为所有的 div 写 css

```
div{
   width:80px;
  float:left;
  border:1px solid black;
  padding:5px;
  margin:5px;
  height:50px;
} 
```

但是，我认为 css 解决方案不是通过简单的文本给出的。所以

请看小提琴[http://jsfiddle.net/pvnq8/1/](http://jsfiddle.net/pvnq8/1/)

# passenger - 木偶在安装红宝石之前订购乘客安装

> ID：14908384
> 
> 赞同：0
> 
> 时间：2013-02-16T08:17:56.500
> 
> 标签：passenger, puppet

我在“安装红宝石”步骤之前执行“安装乘客”的木偶遇到了一些麻烦。我尝试过几种方式来设置顺序，但我似乎错过了它。我的最终目标是将此清单用于`vagrant up`

```
[root@twdev01 ~]# uname -a
Linux twdev01 2.6.32-279.22.1.el6.x86_64 #1 SMP Wed Feb 6 03:10:46 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux
[root@twdev01 ~]# cat /etc/redhat-release 
CentOS release 6.3 (Final)
[root@twdev01 ~]# puppet -V
3.0.2 
```

这是我的清单（基于[https://gist.github.com/btisdall/3600897](https://gist.github.com/btisdall/3600897)）：

```
[root@twdev01 ~]# cat /etc/puppet/manifests/site.pp 
# Create TWDEV Environment

stage { 'req-install': before => Stage['rvm-install'] }

class misc {
    package {
        [
        'vim-enhanced', 'lsof', 'screen', 'lftp'
        ]:
        ensure => installed,
    }
}

class requirements {
  group { "puppet": ensure => "present", }
}

class seedRubyDownload {
    include seed-ruby-download
}

class installrvm {
  include rvm
  rvm::system_user { vagrant: ; }
}

class installruby {
    rvm_system_ruby {
        'ruby-1.9.3-p374':
        ensure      => 'present',
        default_use => true,
    }
}

class installpassenger { 
    class {
        'rvm::passenger::apache':
            version     => '3.0.19',
            ruby_version    => 'ruby-1.9.3-p374',
            mininstances    => '3',
            maxinstancesperapp  => '0',
            maxpoolsize     => '30',
            spawnmethod     => 'smart-lv2';
    }
}

class { requirements: stage => "req-install" }
class { installrvm: }
class { seedRubyDownload: before => Class[Installruby] }
class { installruby: require => Class[Installrvm] }
class { installpassenger: require => Class[Installruby] }
class { misc: }
#class { nginx: } 
```

这是种子红宝石下载（仅包括完整性）：

```
[root@twdev01 ~]# cat /etc/puppet/modules/seed-ruby-download/manifests/init.pp 
class seed-ruby-download {

  file {
    'ruby-source':
    ensure      => present,
    path        => '/usr/local/rvm/archives/ruby-1.9.3-p374.tar.bz2',
    source      => 'puppet:///modules/seed-ruby-download/ruby-1.9.3-p374.tar.bz2',
    mode        => '664',
    owner       => 'root',
    group       => 'rvm';

    'rubygems-source':
    ensure      => present,
    path        => '/usr/local/rvm/archives/rubygems-1.8.25.tgz',
    source      => 'puppet:///modules/seed-ruby-download/rubygems-1.8.25.tgz',
    mode        => '664',
    owner       => 'root',
    group       => 'rvm';

    'yaml-source':
    ensure      => present,
    path        => '/usr/local/rvm/archives/yaml-0.1.4.tar.gz',
    source      => 'puppet:///modules/seed-ruby-download/yaml-0.1.4.tar.gz',
    mode        => '664',
    owner       => 'root',
    group       => 'rvm';

  }
} 
```

这是输出`puppet apply -v --debug /etc/puppet/manifests/site.pp`：

```
[root@twdev01 ~]# puppet apply -v --debug /etc/puppet/manifests/site.pp
Info: Loading facts in /etc/puppet/modules/firewall/lib/facter/iptables.rb
Info: Loading facts in /etc/puppet/modules/rvm/lib/facter/rvm_installed.rb
Info: Loading facts in /etc/puppet/modules/stdlib/lib/facter/facter_dot_d.rb
Info: Loading facts in /etc/puppet/modules/stdlib/lib/facter/pe_version.rb
Info: Loading facts in /etc/puppet/modules/stdlib/lib/facter/puppet_vardir.rb
Info: Loading facts in /etc/puppet/modules/stdlib/lib/facter/root_home.rb
Warning: Could not retrieve fact fqdn
Debug: importing '/etc/puppet/modules/rvm/manifests/init.pp' in environment production
Debug: Automatically imported rvm from rvm into production
Warning: Config file /etc/puppet/hiera.yaml not found, using Hiera defaults
Debug: hiera(): Hiera YAML backend starting
Debug: hiera(): Looking up rvm::install_rvm in YAML backend
Debug: hiera(): Looking for data source common
Debug: hiera(): Cannot find datafile /var/lib/hiera/common.yaml, skipping
Debug: hiera(): Looking up rvm::version in YAML backend
Debug: hiera(): Looking for data source common
Debug: hiera(): Cannot find datafile /var/lib/hiera/common.yaml, skipping
Debug: importing '/etc/puppet/modules/rvm/manifests/dependencies.pp' in environment production
Debug: Automatically imported rvm::dependencies from rvm/dependencies into production
Debug: importing '/etc/puppet/modules/rvm/manifests/dependencies/centos.pp' in environment production
Debug: Automatically imported rvm::dependencies::centos from rvm/dependencies/centos into production
Debug: Executing '/bin/rpm --version'
Debug: Executing '/bin/rpm -ql rpm'
Debug: Executing '/bin/rpm -ql rpm'
Debug: Executing '/bin/rpm --version'
Debug: importing '/etc/puppet/modules/rvm/manifests/system.pp' in environment production
Debug: Automatically imported rvm::system from rvm/system into production
Debug: importing '/etc/puppet/modules/rvm/manifests/system_user.pp' in environment production
Debug: Automatically imported rvm::system_user from rvm/system_user into production
Debug: importing '/etc/puppet/modules/seed-ruby-download/manifests/init.pp' in environment production
Debug: Automatically imported seed-ruby-download from seed-ruby-download into production
Debug: importing '/etc/puppet/modules/rvm/manifests/passenger/apache.pp' in environment production
Debug: Automatically imported rvm::passenger::apache from rvm/passenger/apache into production
Debug: hiera(): Looking up rvm::passenger::apache::poolidletime in YAML backend
Debug: hiera(): Looking for data source common
Debug: hiera(): Cannot find datafile /var/lib/hiera/common.yaml, skipping
Debug: hiera(): Looking up rvm::passenger::apache::rvm_prefix in YAML backend
Debug: hiera(): Looking for data source common
Debug: hiera(): Cannot find datafile /var/lib/hiera/common.yaml, skipping
Debug: importing '/etc/puppet/modules/rvm/manifests/passenger/apache/centos/pre.pp' in environment production
Debug: Automatically imported rvm::passenger::apache::centos::pre from rvm/passenger/apache/centos/pre into production
Debug: importing '/etc/puppet/modules/rvm/manifests/passenger/gem.pp' in environment production
Debug: Automatically imported rvm::passenger::gem from rvm/passenger/gem into production
Debug: importing '/etc/puppet/modules/rvm/manifests/passenger/apache/centos/post.pp' in environment production
Debug: Automatically imported rvm::passenger::apache::centos::post from rvm/passenger/apache/centos/post into production
Debug: Scope(Class[Rvm::Passenger::Apache::Centos::Post]): Retrieving template rvm/passenger-apache-centos.conf.erb
Debug: template[/etc/puppet/modules/rvm/templates/passenger-apache-centos.conf.erb]: Bound template variables for /etc/puppet/modules/rvm/templates/passenger-apache-centos.conf.erb in 0.00 seconds
Debug: template[/etc/puppet/modules/rvm/templates/passenger-apache-centos.conf.erb]: Interpolated template /etc/puppet/modules/rvm/templates/passenger-apache-centos.conf.erb in 0.00 seconds
Debug: Puppet::Type::Package::ProviderPacman: file /usr/bin/pacman does not exist
Debug: Puppet::Type::Package::ProviderOpenbsd: file pkg_add does not exist
Debug: Puppet::Type::Package::ProviderUrpmi: file urpmi does not exist
Debug: Puppet::Type::Package::ProviderUp2date: file /usr/sbin/up2date-nox does not exist
Debug: Puppet::Type::Package::ProviderSunfreeware: file pkg-get does not exist
Debug: Puppet::Type::Package::ProviderAptrpm: file apt-get does not exist
Debug: Puppet::Type::Package::ProviderNim: file /usr/sbin/nimclient does not exist
Debug: Puppet::Type::Package::ProviderPkg: file /usr/bin/pkg does not exist
Debug: Puppet::Type::Package::ProviderAix: file /usr/sbin/installp does not exist
Debug: Puppet::Type::Package::ProviderPortupgrade: file /usr/sbin/pkg_info does not exist
Debug: Puppet::Type::Package::ProviderFreebsd: file /usr/sbin/pkg_add does not exist
Debug: Puppet::Type::Package::ProviderZypper: file /usr/bin/zypper does not exist
Debug: Puppet::Type::Package::ProviderAptitude: file /usr/bin/aptitude does not exist
Debug: Puppet::Type::Package::ProviderSun: file /usr/sbin/pkgadd does not exist
Debug: Puppet::Type::Package::ProviderPorts: file /usr/sbin/pkg_info does not exist
Debug: Puppet::Type::Package::ProviderApt: file /usr/bin/apt-get does not exist
Debug: Puppet::Type::Package::ProviderHpux: file /usr/sbin/swlist does not exist
Debug: Puppet::Type::Package::ProviderFink: file /sw/bin/fink does not exist
Debug: Puppet::Type::Package::ProviderRug: file /usr/bin/rug does not exist
Debug: Puppet::Type::Package::ProviderPortage: file /usr/bin/emerge does not exist
Debug: Puppet::Type::Package::ProviderPkgin: file pkgin does not exist
Debug: Puppet::Type::Package::ProviderDpkg: file /usr/bin/dpkg does not exist
Debug: Failed to load library 'ldap' for feature 'ldap'
Debug: Puppet::Type::User::ProviderLdap: feature ldap is missing
Debug: Puppet::Type::User::ProviderUser_role_add: file roledel does not exist
Debug: Puppet::Type::User::ProviderPw: file pw does not exist
Debug: Puppet::Type::User::ProviderDirectoryservice: file /usr/bin/dsimport does not exist
Debug: Puppet::Type::Rvm_gem::ProviderGem: file /usr/local/rvm/bin/rvm does not exist
Debug: Puppet::Type::Rvm_gem::ProviderGem: file /usr/local/rvm/bin/rvm does not exist
Debug: Puppet::Type::Rvm_system_ruby::ProviderRvm: file /usr/local/rvm/bin/rvm does not exist
Debug: Puppet::Type::Rvm_system_ruby::ProviderRvm: file /usr/local/rvm/bin/rvm does not exist
Debug: Failed to load library 'ldap' for feature 'ldap'
Debug: Puppet::Type::Group::ProviderLdap: feature ldap is missing
Debug: Puppet::Type::Group::ProviderPw: file pw does not exist
Debug: Puppet::Type::Group::ProviderDirectoryservice: file /usr/bin/dscl does not exist
Debug: Creating default schedules
Debug: Using settings: adding file resource 'plugindest': 'File[/var/lib/puppet/lib]{:ensure=>:directory, :backup=>false, :loglevel=>:debug, :path=>"/var/lib/puppet/lib", :links=>:follow}'
Debug: Using settings: adding file resource 'statefile': 'File[/var/lib/puppet/state/state.yaml]{:ensure=>:file, :backup=>false, :loglevel=>:debug, :mode=>"660", :path=>"/var/lib/puppet/state/state.yaml", :links=>:follow}'
Debug: Using settings: adding file resource 'rundir': 'File[/var/run/puppet]{:ensure=>:directory, :backup=>false, :loglevel=>:debug, :mode=>"755", :path=>"/var/run/puppet", :links=>:follow}'
Debug: Using settings: adding file resource 'clientbucketdir': 'File[/var/lib/puppet/clientbucket]{:ensure=>:directory, :backup=>false, :loglevel=>:debug, :mode=>"750", :path=>"/var/lib/puppet/clientbucket", :links=>:follow}'
Debug: Using settings: adding file resource 'lastrunfile': 'File[/var/lib/puppet/state/last_run_summary.yaml]{:ensure=>:file, :backup=>false, :loglevel=>:debug, :mode=>"644", :path=>"/var/lib/puppet/state/last_run_summary.yaml", :links=>:follow}'
Debug: Using settings: adding file resource 'ssldir': 'File[/var/lib/puppet/ssl]{:ensure=>:directory, :backup=>false, :owner=>"puppet", :loglevel=>:debug, :mode=>"771", :path=>"/var/lib/puppet/ssl", :links=>:follow}'
Debug: Using settings: adding file resource 'graphdir': 'File[/var/lib/puppet/state/graphs]{:ensure=>:directory, :backup=>false, :loglevel=>:debug, :path=>"/var/lib/puppet/state/graphs", :links=>:follow}'
Debug: Using settings: adding file resource 'logdir': 'File[/var/log/puppet]{:ensure=>:directory, :group=>"puppet", :backup=>false, :owner=>"puppet", :loglevel=>:debug, :mode=>"750", :path=>"/var/log/puppet", :links=>:follow}'
Debug: Using settings: adding file resource 'privatekeydir': 'File[/var/lib/puppet/ssl/private_keys]{:ensure=>:directory, :backup=>false, :owner=>"puppet", :loglevel=>:debug, :mode=>"750", :path=>"/var/lib/puppet/ssl/private_keys", :links=>:follow}'
Debug: Using settings: adding file resource 'clientyamldir': 'File[/var/lib/puppet/client_yaml]{:ensure=>:directory, :backup=>false, :loglevel=>:debug, :mode=>"750", :path=>"/var/lib/puppet/client_yaml", :links=>:follow}'
Debug: Using settings: adding file resource 'statedir': 'File[/var/lib/puppet/state]{:ensure=>:directory, :backup=>false, :loglevel=>:debug, :mode=>"1755", :path=>"/var/lib/puppet/state", :links=>:follow}'
Debug: Using settings: adding file resource 'lastrunreport': 'File[/var/lib/puppet/state/last_run_report.yaml]{:ensure=>:file, :backup=>false, :loglevel=>:debug, :mode=>"640", :path=>"/var/lib/puppet/state/last_run_report.yaml", :links=>:follow}'
Debug: Using settings: adding file resource 'publickeydir': 'File[/var/lib/puppet/ssl/public_keys]{:ensure=>:directory, :backup=>false, :owner=>"puppet", :loglevel=>:debug, :path=>"/var/lib/puppet/ssl/public_keys", :links=>:follow}'
Debug: Using settings: adding file resource 'confdir': 'File[/etc/puppet]{:ensure=>:directory, :backup=>false, :loglevel=>:debug, :path=>"/etc/puppet", :links=>:follow}'
Debug: Using settings: adding file resource 'privatedir': 'File[/var/lib/puppet/ssl/private]{:ensure=>:directory, :backup=>false, :owner=>"puppet", :loglevel=>:debug, :mode=>"750", :path=>"/var/lib/puppet/ssl/private", :links=>:follow}'
Debug: Using settings: adding file resource 'client_datadir': 'File[/var/lib/puppet/client_data]{:ensure=>:directory, :backup=>false, :loglevel=>:debug, :mode=>"750", :path=>"/var/lib/puppet/client_data", :links=>:follow}'
Debug: Using settings: adding file resource 'certdir': 'File[/var/lib/puppet/ssl/certs]{:ensure=>:directory, :backup=>false, :owner=>"puppet", :loglevel=>:debug, :path=>"/var/lib/puppet/ssl/certs", :links=>:follow}'
Debug: Using settings: adding file resource 'requestdir': 'File[/var/lib/puppet/ssl/certificate_requests]{:ensure=>:directory, :backup=>false, :owner=>"puppet", :loglevel=>:debug, :path=>"/var/lib/puppet/ssl/certificate_requests", :links=>:follow}'
Debug: Using settings: adding file resource 'vardir': 'File[/var/lib/puppet]{:ensure=>:directory, :backup=>false, :loglevel=>:debug, :path=>"/var/lib/puppet", :links=>:follow}'
Debug: /File[/var/lib/puppet/ssl/public_keys]: Autorequiring File[/var/lib/puppet/ssl]
Debug: /File[/var/lib/puppet/state/graphs]: Autorequiring File[/var/lib/puppet/state]
Debug: /File[/var/lib/puppet/state]: Autorequiring File[/var/lib/puppet]
Debug: /File[/var/lib/puppet/state/last_run_report.yaml]: Autorequiring File[/var/lib/puppet/state]
Debug: /File[/var/lib/puppet/state/state.yaml]: Autorequiring File[/var/lib/puppet/state]
Debug: /File[/var/lib/puppet/clientbucket]: Autorequiring File[/var/lib/puppet]
Debug: /File[/var/lib/puppet/state/last_run_summary.yaml]: Autorequiring File[/var/lib/puppet/state]
Debug: /File[/var/lib/puppet/ssl/private]: Autorequiring File[/var/lib/puppet/ssl]
Debug: /File[/var/lib/puppet/lib]: Autorequiring File[/var/lib/puppet]
Debug: /File[/var/lib/puppet/client_data]: Autorequiring File[/var/lib/puppet]
Debug: /File[/var/lib/puppet/ssl/certificate_requests]: Autorequiring File[/var/lib/puppet/ssl]
Debug: /File[/var/lib/puppet/ssl/certs]: Autorequiring File[/var/lib/puppet/ssl]
Debug: /File[/var/lib/puppet/ssl/private_keys]: Autorequiring File[/var/lib/puppet/ssl]
Debug: /File[/var/lib/puppet/ssl]: Autorequiring File[/var/lib/puppet]
Debug: /File[/var/lib/puppet/client_yaml]: Autorequiring File[/var/lib/puppet]
Debug: Finishing transaction 70336344903840
Debug: Loaded state in 0.00 seconds
Info: Loading facts in /etc/puppet/modules/firewall/lib/facter/iptables.rb
Info: Loading facts in /etc/puppet/modules/rvm/lib/facter/rvm_installed.rb
Info: Loading facts in /etc/puppet/modules/stdlib/lib/facter/facter_dot_d.rb
Info: Loading facts in /etc/puppet/modules/stdlib/lib/facter/pe_version.rb
Info: Loading facts in /etc/puppet/modules/stdlib/lib/facter/puppet_vardir.rb
Info: Loading facts in /etc/puppet/modules/stdlib/lib/facter/root_home.rb
Debug: Loaded state in 0.00 seconds
Info: Applying configuration version '1361001784'
Debug: /Stage[main]/Seedrubydownload/before: requires Class[Installruby]
Debug: /Stage[req-install]/before: requires Stage[rvm-install]
Debug: /Stage[main]/Installrvm/Rvm::System_user[vagrant]/Exec[/usr/sbin/usermod -a -G rvm vagrant]/require: requires User[vagrant]
Debug: /Stage[main]/Installrvm/Rvm::System_user[vagrant]/Exec[/usr/sbin/usermod -a -G rvm vagrant]/require: requires Group[rvm]
Debug: /Stage[main]/Rvm::Passenger::Apache::Centos::Post/Exec[passenger-install-apache2-module]/require: requires Rvm_gem[passenger]
Debug: /Stage[main]/Rvm::Passenger::Apache::Centos::Post/Exec[passenger-install-apache2-module]/require: requires Package[httpd]
Debug: /Stage[main]/Rvm::Passenger::Apache::Centos::Post/Exec[passenger-install-apache2-module]/require: requires Package[httpd-devel]
Debug: /Stage[main]/Rvm::Passenger::Apache::Centos::Post/Exec[passenger-install-apache2-module]/require: requires Package[mod_ssl]
Debug: /Stage[rvm-install]/Rvm::Dependencies/require: requires Class[Rvm::Dependencies::Centos]
Debug: /Stage[rvm-install]/Rvm::System/Exec[system-rvm]/require: requires Class[Rvm::Dependencies]
Debug: /Stage[main]/Installpassenger/require: requires Class[Installruby]
Debug: /Stage[main]/Rvm::Passenger::Apache::Centos::Post/File[/etc/httpd/conf.d/passenger.conf]/require: requires Exec[passenger-install-apache2-module]
Debug: /Stage[main]/Installruby/require: requires Class[Installrvm]
Debug: /Stage[rvm-install]/before: requires Stage[main]
Debug: /Stage[main]/Seed-ruby-download/File[rubygems-source]: Autorequiring Group[rvm]
Debug: /Stage[main]/Seed-ruby-download/File[ruby-source]: Autorequiring Group[rvm]
Debug: /Stage[main]/Seed-ruby-download/File[yaml-source]: Autorequiring Group[rvm]
Debug: /Schedule[daily]: Skipping device resources because running on a host
Debug: /Schedule[monthly]: Skipping device resources because running on a host
Debug: /Schedule[hourly]: Skipping device resources because running on a host
Debug: /Schedule[never]: Skipping device resources because running on a host
Debug: /Schedule[weekly]: Skipping device resources because running on a host
Debug: /Schedule[puppet]: Skipping device resources because running on a host
Debug: Prefetching yum resources for package
Debug: Executing '/bin/rpm --version'
Debug: Executing '/bin/rpm -qa --nosignature --nodigest --qf '%{NAME} %|EPOCH?{%{EPOCH}}:{0}| %{VERSION} %{RELEASE} %{ARCH}
''
Debug: Exec[system-rvm](provider=posix): Executing 'bash -c '/usr/bin/curl -s https://raw.github.com/wayneeseguin/rvm/master/binscripts/rvm-installer -o /tmp/rvm-installer ;                 chmod +x /tmp/rvm-installer ;                 rvm_bin_path=/usr/local/rvm/bin rvm_man_path=/usr/local/rvm/man /tmp/rvm-installer --version latest ;                 rm /tmp/rvm-installer''
Debug: Executing 'bash -c '/usr/bin/curl -s https://raw.github.com/wayneeseguin/rvm/master/binscripts/rvm-installer -o /tmp/rvm-installer ;                 chmod +x /tmp/rvm-installer ;                 rvm_bin_path=/usr/local/rvm/bin rvm_man_path=/usr/local/rvm/man /tmp/rvm-installer --version latest ;                 rm /tmp/rvm-installer''
Notice: /Stage[rvm-install]/Rvm::System/Exec[system-rvm]/returns: executed successfully
Debug: /Stage[rvm-install]/Rvm::System/Exec[system-rvm]: The container Class[Rvm::System] will propagate my refresh event
Debug: Class[Rvm::System]: The container Stage[rvm-install] will propagate my refresh event
Debug: Executing '/usr/local/rvm/bin/rvm ruby-1.9.3-p374 do gem list --local passenger$'
Debug: Executing '/usr/local/rvm/bin/rvm ruby-1.9.3-p374 do gem install -v 3.0.19 --include-dependencies --no-rdoc --no-ri passenger'
Error: Could not update: Execution of '/usr/local/rvm/bin/rvm ruby-1.9.3-p374 do gem install -v 3.0.19 --include-dependencies --no-rdoc --no-ri passenger' returned 1: Ruby ruby-1.9.3-p374 is not installed.

Error: /Stage[main]/Rvm::Passenger::Gem/Rvm_gem[passenger]/ensure: change from absent to 3.0.19 failed: Could not update: Execution of '/usr/local/rvm/bin/rvm ruby-1.9.3-p374 do gem install -v 3.0.19 --include-dependencies --no-rdoc --no-ri passenger' returned 1: Ruby ruby-1.9.3-p374 is not installed.

Notice: /Stage[main]/Rvm::Passenger::Apache::Centos::Post/Exec[passenger-install-apache2-module]: Dependency Rvm_gem[passenger] has failures: true
Warning: /Stage[main]/Rvm::Passenger::Apache::Centos::Post/Exec[passenger-install-apache2-module]: Skipping because of failed dependencies
Notice: /Stage[main]/Rvm::Passenger::Apache::Centos::Post/File[/etc/httpd/conf.d/passenger.conf]: Dependency Rvm_gem[passenger] has failures: true
Warning: /Stage[main]/Rvm::Passenger::Apache::Centos::Post/File[/etc/httpd/conf.d/passenger.conf]: Skipping because of failed dependencies
Notice: /Stage[main]/Seed-ruby-download/File[rubygems-source]/ensure: defined content as '{md5}1376a258d43c53750a8df30e67853e10'
Debug: /Stage[main]/Seed-ruby-download/File[rubygems-source]: The container Class[Seed-ruby-download] will propagate my refresh event
Notice: /Stage[main]/Seed-ruby-download/File[ruby-source]/ensure: defined content as '{md5}944e73eba9ee9e1f2647ff32ec0b14b2'
Debug: /Stage[main]/Seed-ruby-download/File[ruby-source]: The container Class[Seed-ruby-download] will propagate my refresh event
Notice: /Stage[main]/Seed-ruby-download/File[yaml-source]/ensure: defined content as '{md5}36c852831d02cf90508c29852361d01b'
Debug: /Stage[main]/Seed-ruby-download/File[yaml-source]: The container Class[Seed-ruby-download] will propagate my refresh event
Debug: Class[Seed-ruby-download]: The container Stage[main] will propagate my refresh event
Debug: Exec[/usr/sbin/usermod -a -G rvm vagrant](provider=posix): Executing check '/bin/cat /etc/group | grep rvm | grep vagrant'
Debug: Executing '/bin/cat /etc/group | grep rvm | grep vagrant'
Debug: /Stage[main]/Installrvm/Rvm::System_user[vagrant]/Exec[/usr/sbin/usermod -a -G rvm vagrant]/unless: rvm:x:503:vagrant
Debug: Executing '/usr/local/rvm/bin/rvm list strings'
Debug: Executing '/usr/local/rvm/bin/rvm install ruby-1.9.3-p374'
Debug: Executing '/usr/local/rvm/bin/rvm alias create default ruby-1.9.3-p374'
Notice: /Stage[main]/Installruby/Rvm_system_ruby[ruby-1.9.3-p374]/ensure: created
Debug: /Stage[main]/Installruby/Rvm_system_ruby[ruby-1.9.3-p374]: The container Class[Installruby] will propagate my refresh event
Debug: Class[Installruby]: The container Stage[main] will propagate my refresh event
Debug: Finishing transaction 70336356537940
Debug: Storing state
Debug: Stored state in 0.01 seconds
Notice: Finished catalog run in 287.29 seconds
Debug: Using settings: adding file resource 'rrddir': 'File[/var/lib/puppet/rrd]{:ensure=>:directory, :group=>"puppet", :backup=>false, :owner=>"puppet", :loglevel=>:debug, :mode=>"750", :path=>"/var/lib/puppet/rrd", :links=>:follow}'
Debug: Finishing transaction 70336344986940
Debug: Received report to process from twdev01
Debug: Processing report from twdev01 with processor Puppet::Reports::Store
[root@twdev01 ~]# 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T04:28:36.563

所以，经过进一步研究，我发现其他人也有同样的问题。

[https://github.com/blt04/puppet-rvm/issues/57](https://github.com/blt04/puppet-rvm/issues/57)

它已经修复：

[https://github.com/blt04/puppet-rvm/pull/60](https://github.com/blt04/puppet-rvm/pull/60)

...但未集成，因此只需应用上面的修复，其中涉及编辑`rvm/manifests/passenger/gem.pp`并使其看起来像：

```
class rvm::passenger::gem($ruby_version, $version) {
  rvm_gem {
    "passenger":
      ensure       => $version,
      require => Rvm_system_ruby["${ruby_version}"],
      ruby_version => $ruby_version;
  }
} 
```

# javascript - 如何使用 require.js 延迟加载脚本？

> ID：14908386
> 
> 赞同：0
> 
> 时间：2013-02-16T08:18:10.163
> 
> 标签：javascript, requirejs

我们有一个非平凡的 JS 应用程序，它由许多小应用程序组成，是否可以使用 require.js 以惰性方式实际加载每个小应用程序的脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T08:29:09.357

是的，你可以，这也是你使用 require.js 的主要原因之一

```
$(window).on('start.miniapp1', function () {
    require(["miniapp1"], function() {
        // Execute code for mini app 1
    });
}); 
```

# django - Django URL 别名

> ID：14908392
> 
> 赞同：0
> 
> 时间：2013-02-16T08:18:58.173
> 
> 标签：django, django-urls

我想用 /special.html 之类的 url 制作一些特殊页面。实际上它应该只是文章应用程序中某个页面的别名（例如/articles/2012/03/22/）

我需要在 urls.conf 中写一些魔法（那是什么魔法？）还是只能通过网络服务器规则？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T08:23:49.260

我建议您在您的应用程序中执行此操作。你可以在你的路由中传入视图参数。

就像是：

```
url('^/special.html$', articleView,
   {"year": "2012", "month": "03", "id":"1234" }, "article") 
```

# java - 带有 AWS 的 tomcat 7

> ID：14908397
> 
> 赞同：0
> 
> 时间：2013-02-16T08:20:07.810
> 
> 标签：java, tomcat, amazon-web-services

使用 EC2 创建一个实例并进行部署。一切正常，但一个问题是：我应该通过以下方式访问我的应用程序： [http](http://ec2-50.31.43.compute1.aws.com/applicationName) ://ec2-50.31.43.compute1.aws.com/applicationName或者有没有办法避免 URL 中的 applicationName。我应该能够使用 URL 访问我的应用程序：http: [//ec2-50.31.43.compute1.aws.com/applicationName](http://ec2-50.31.43.compute1.aws.com/applicationName)

我尝试通过在 server.xml 中添加以下内容使我的应用程序在 tomcat 中成为默认应用程序

WEB-INF/web.xml

如果我使用域名访问 URL，则此方法有效但在我的应用程序中，其他链接不起作用。还尝试将我的war文件重命名为ROOT，然后也存在同样的问题。

是否有任何其他解决方案，以便我可以使用域名访问我的应用程序，并且我的所有链接都可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T08:26:10.207

将您的应用程序存储为`ROOT.war`并添加`<base href="http://my:8080/root/url">`到您的 JSP 页面的顶部。

# javascript - 添加选项以增加 youtube 视频的低音

> ID：14908400
> 
> 赞同：0
> 
> 时间：2013-02-16T08:21:41.803
> 
> 标签：javascript, youtube, youtube-api

我正在尝试将视频添加到我的网站。除了添加视频之外，我还想要一个增加或减少音频低音的选项。我获取了 Youtube API，但找不到任何方法。如果可以用 JavaScript 完成，有什么想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T21:23:12.813

没有任何受支持的 JavaScript API 可用于处理 YouTube 视频的音频（或视觉元素）。

# netbeans - 包 net.proteanit.sql 不存在

> ID：14908405
> 
> 赞同：1
> 
> 时间：2013-02-16T08:21:54.413
> 
> 标签：netbeans

我无法导入 net.proteanit.sql.DbUtils，得到这个错误包 net.proteanit.sql 不存在。我错过了什么图书馆，在哪里可以得到它？

导入 net.proteanit.sql.DbUtils；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T17:41:05.757

这意味着您需要添加`.jar`具有此包的外部文件。您可以参考[此处](https://stackoverflow.com/questions/4879903/how-to-add-a-jar-in-netbeans)寻求帮助以将外部 jar 添加到您的项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-29T05:15:57.793

> 项目>>项目（应用程序）>>右键单击库>>选择属性>>编译

如果有损坏的东西（例如 rs2xml.jar），请将其删除并将其替换为与您删除的对象相同的内容。

# php - 将数据序列化/规范化为 JSON：如何以编程方式更改输出映射？

> ID：14908409
> 
> 赞同：0
> 
> 时间：2013-02-16T08:22:31.503
> 
> 标签：php, json, serialization, symfony

我有以下控制器/动作：

```
 public function messagesAction()
  {
    $encoders = array(new JsonEncoder());
    $normalizers = array(new GetSetMethodNormalizer());
    $serializer = new Serializer($normalizers, $encoders);
    $message = $this->getDoctrine()
      ->getRepository('AcmeStoreBundle:Message')
      ->findAll();
    $response = new Response($serializer->serialize($message, 'json')); 
    $response->headers->set('Content-Type', 'application/json');
    return $response;
  }
} 
```

它发送以下json：

```
[
    {
        "id": 1,
        "iam": 1,
        "youare": 2,
        "lat": 50.8275853,
        "lng": 4.3809764,
        "msgbody": "Lorem ipsum lorem ipsum lorem ipsum"
    },
    {
        "id": 2,
        "iam": 1,
        "youare": 2,
        "lat": 50.8307348,
        "lng": 4.3734823,
        "msgbody": "What up?"
    }
] 
```

我没有命名键，我的 Javascript fw (Ember) 很难获取一些对象。

我想将 Json 输出更改为：

```
[
    {
      "message": {
        "id": "1",
        "iam": "male",
        "youare": "female",
        "lat": "50.8307348"
      }
    }
] 
```

我知道我可以使用正则表达式，但我真的不知道在哪里。如您所见，我正在使用标准的开箱即用序列化程序（这是我可以返回有效 Json 的唯一方法）。它是否带有做我想做的事情的选项？（奖励：我还想在发送数据之前对其进行操作..）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T14:25:22.900

为了解决这类问题，我开发了一个 sf2 包来将数据导出为不同的格式，您可以只使用 twig 模板自定义输出

[https://github.com/IDCI-Consulting/ExporterBundle](https://github.com/IDCI-Consulting/ExporterBundle)

希望这会有用。

# javascript - 如何使用 javascript 访问 Div 标签的内部文本？

> ID：14908417
> 
> 赞同：-1
> 
> 时间：2013-02-16T08:23:50.553
> 
> 标签：javascript, html

```
<div class="main_box">
  <div class="div_r">
    <div class="div_l">Hello</div>
  </div>
</div>
<script>
alert(document.getElementsByClassName('main_box').childNodes[1].innerHTML);
</script> 
```

我想参考“main_box”类来获取“div_l”类的内部内容。我已经尝试了上面的代码，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T08:25:08.247

像这样：

```
 document.getElementsByClassName('main_box')[0].childNodes[1].childNodes[1].innerHTML 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T08:26:12.103

```
alert(document.getElementsByClassName('main_box')[0].childNodes[1].innerHTML
                                                 ^^^-- 
```

您需要告诉 WHICH 节点获取子节点，因为 gEBCN() 返回节点**LIST**，而不仅仅是单个节点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T08:26:48.333

使用 jQuery 怎么样？

**例子 ：**

```
var value = $('.main_box .div_r .div_l').html(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T08:27:45.277

在[jQuery](http://api.jquery.com/text/)中：

```
$('.main_box .div_l').text() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-16T08:56:45.200

有不同的变体可以实现这一目标。正如已经回答的那样，您可以使用 getElementsByClassName，唯一错过的是此函数返回一个数组。

```
 document.getElementsByClassName('main_box').... 
```

较新的语法（ie < 9 不支持）是：

a) 如果您期望多个元素：

```
 document.querySelectorAll('.main_box .div_r .div_l')[0].innerHTML 
```

b）如果您期望最多一个：

```
 document.querySelector('.main_box .div_r .div_l').innerHTML 
```

# angularjs - Angular.js：部分页面中的脚本标签？

> ID：14908419
> 
> 赞同：1
> 
> 时间：2013-02-16T08:23:59.403
> 
> 标签：angularjs

我们正在编写一个 angular.js+require.js 应用程序...

是否可以在加载部分页面时以惰性方式加载 require.js 模块？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T11:15:09.370

在当前版本的 AngularJS (1.x) 中，所有模块都需要预先加载，因此无法按需加载（这可能会在下一个版本中改变）。

您今天可以按需加载的是局部和全局定义的控制器。人们正在尝试使用 require.js 和 AngularJS 的不同方法，[这个问题](https://stackoverflow.com/q/12645720/1418796)有更多信息。

话虽如此，与其他框架相比，上面通常使用 AngularJS 编写的代码非常简洁。因此，它可以安全地预先下载（一些非常大的应用程序使用这种方法）。所以我建议不要把 require.js 放在前面。

# ruby - 在 IRB 中使用“p”、“print”和“puts”混淆 Ruby 的输出机制

> ID：14908424
> 
> 赞同：-2
> 
> 时间：2013-02-16T08:24:55.383
> 
> 标签：ruby

```
>> p "hi"; puts p "hello"
"hi"
"hello"
hello
=> nil 
```

从输出中可以很清楚地看到，`"hi"`并且`"hello"`已经被两个`p`. 然后`puts`打印在下面；

```
hello
=> nil 
```

但问题是：作为`p`回报

```
"hello" 
=> "hello" 
```

什么`puts`从左边或右边收到的`p`？现在为了更深入地了解这一点，我尝试了以下方法：

```
>> p "hi"; puts print "hello"
"hi"
hello
=> nil 
```

看了上面，我的理解是`p`打印了它的一个。与以下输出部分混淆。

```
hello
=>nil 
```

是`hello`印刷`print`的时候左边的`=> nil`哪里？如果我认为`puts`已经用`print`返回值触发了，`nil`那么输出应该是

```
hello

=>nil # the extra blank line is for `nil.to_s` . 
```

但从实际输出我无法得出结论。如果我认为`puts`已经用`print`s 打印值触发了，`hello`那么输出应该是

```
hello
=>nil # then where the output of print statement went out? 
```

但从实际输出我无法得出结论。

我正在使用 Ubuntu 12.10 和 Ruby 1.9.3。谁能帮助我了解发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T09:11:21.063

你的例子是一样的

```
p("hi")
puts(print("hello")) 
```

您最终没有在输出中出现空行的原因是它`print`没有在其输出中附加换行符。

`print`写入`hello`标准输出，返回 nil，然后将写入（在同一行）`nil.to_s`（即空字符串）后跟换行符，因此您得到的输出与您编写的完全相同`puts("hello")`

# c# - 在 C# 中将偏移量复制到文件的偏移量

> ID：14908428
> 
> 赞同：0
> 
> 时间：2013-02-16T08:25:22.323
> 
> 标签：c#, file, copy, offset

我有一堆非常大的视频文件 (.ts)，范围从 3GB 到 10GB。其中很多都有特定的错误，我的解决方案是简单地删除包含错误的部分。我已经知道我想要保留的部分的开始和结束偏移量，我希望简单地读入主文件并从 start_offset 复制到 end_offset 到同一文件夹中的新文件中。

例如，我有主视频 MAIN.ts，大小为 5.5GB。假设它有两个这样的错误。我想保留偏移量（十进制，而不是十六进制）0 到 1174698823（错误开始前的字节）并将其保存到新文件 PART1.ts。然后我想通过偏移量 4126897791（第二个错误开始）保留偏移量 1257553244（错误结束后的字节）并将其保存为 PART2.ts。然后我需要将文件末尾的偏移量 4207333028 保存为 PART3.ts。基本上我只是剪下大约 155MB 的文件并将其分成三部分。如果我实际上可以在*不*创建多个新文件的情况下进行剪切，而是将它们彼此附加，*然后*编写整个新文件，那将是一个奖励（或者我可以`copy /b`稍后使用）。

我一直在研究文件流和字节数组，我知道 2GB 的限制。我该如何解决这个问题，然后如果我要保留的块的长度> 2GB，我该如何编写它？我不确定如何使用有限长度的缓冲区来做到这一点。如果可能的话，我也想有一个进度条来显示已经写了多少。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T08:30:18.663

您绝对不需要创建新文件。您可以只打开一次输出文件和一次输入文件，然后通过在输入文件中查找来附加块，然后将输入流中的一个部分复制到输出流，然后再移动到下一个部分。

```
 using (var output = File.Create("output.ts"))
 using (var input = File.OpenRead("input.ts"))
 {
     AppendChunk(output, input, 0, 1174698823L);
     AppendChunk(output, input, 1257553244L, 4126897791L);
 }

 ...

 private static void AppendChunk(Stream output, Stream input,
                                 long start, long end)
 {
     // TODO: Argument validation
     long size = end - start;
     byte[] buffer = new byte[32 * 1024]; // Copy 32K at a time
     input.Position = start;
     while (size > 0)
     {              
         int bytesRead = input.Read(buffer, 0, Math.Min(size, buffer.Length));
         if (bytesRead <= 0)
         {
             throw new EndOfStreamException("Not enough data");
         }
         output.Write(buffer, 0, bytesRead);
         size -= bytesRead;
     }
 } 
```

要集成进度条，您可能需要事先计算出要复制的总大小，然后在循环中增加到目前为止复制的总大小，并以这种方式更新进度条。不要忘记，如果这是在 WinForms 或 WPF 中，则不应在 UI 线程上执行任何 IO 工作。

# internationalization - 国际版 NerdDinner

> ID：14908429
> 
> 赞同：0
> 
> 时间：2013-02-16T08:25:50.540
> 
> 标签：internationalization, nerddinner

嗨，我一直在使用国际版：ASP.NET MVC 3 Internationalization - Part 2 (NerdDinner)： [http ://afana.me/post/aspnet-mvc-internationalization-part-2.aspx](http://afana.me/post/aspnet-mvc-internationalization-part-2.aspx)

不幸的是，这包含一个主要错误。问题是我已经下载了代码/项目并进行了构建并将其发布到本地文件夹（有一些小错误需要修复才能发布），然后将文件上传到我的 webhotel。主页看起来还可以，但后来我查看了谷歌网站管理员工具并在网站上进行了爬网，发现网站中没有一个页面可以被索引，甚至根节点也无法被谷歌爬虫获取：

这是我在尝试获取根 (www.thehomepage.com) 或站点中的任何页面时遇到的错误：

页面无法访问

HTTP/1.1 500 内部服务器错误

```
 [NullReferenceException: Object reference not set to an instance of an object.]
       NerdDinner.Controllers.BaseController.ExecuteCore() +164
       System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +97
       System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) +10
       System.Web.Mvc.&lt;&gt;c__DisplayClassb.&lt;BeginProcessRequest&gt;b__5() +37
       System.Web.Mvc.Async.&lt;&gt;c__DisplayClass1.&lt;MakeVoidDelegate&gt;b__0() +21
       System.Web.Mvc.Async.&lt;&gt;c__DisplayClass8`1.&lt;BeginSynchronous&gt;b__7(IAsyncResult _) +12
       System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
       System.Web.Mvc.&lt;&gt;c__DisplayClasse.&lt;EndProcessRequest&gt;b__d() +50
       System.Web.Mvc.SecurityUtil.&lt;GetCallInAppTrustThunk&gt;b__0(Action f) +7
       System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +22
       System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +60
       System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9
       System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8963149
       System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&amp; completedSynchronously) +184

//I have below copy/paste some code from the project which I think may be relevant:

public class BaseController : Controller
{
    protected override void ExecuteCore()
    {
        string cultureName = null;
        // Attempt to read the culture cookie from Request
        HttpCookie cultureCookie = Request.Cookies["_culture"];
        if (cultureCookie != null)
            cultureName = cultureCookie.Value;
        else
            cultureName = Request.UserLanguages[0]; // obtain it from HTTP header AcceptLanguages

        // Validate culture name
        cultureName = CultureHelper.GetImplementedCulture(cultureName); // This is safe

        // Modify current thread's cultures            
        Thread.CurrentThread.CurrentCulture = new System.Globalization.CultureInfo(cultureName);
        Thread.CurrentThread.CurrentUICulture = Thread.CurrentThread.CurrentCulture;

        base.ExecuteCore();
    }
}

//And from the global.asax, this may be relevant

    void MvcApplication_PostAuthenticateRequest(object sender, EventArgs e)
    {
        HttpCookie authCookie = HttpContext.Current.Request.Cookies[FormsAuthentication.FormsCookieName];
        if (authCookie != null)
        {
            string encTicket = authCookie.Value;
            if (!String.IsNullOrEmpty(encTicket))
            {
                FormsAuthenticationTicket ticket = FormsAuthentication.Decrypt(encTicket);
                NerdIdentity id = new NerdIdentity(ticket);
                GenericPrincipal prin = new GenericPrincipal(id, null);
                HttpContext.Current.User = prin;
            }
        }
    }

    void MvcApplication_AuthenticateRequest(object sender, EventArgs e)
    {
    }

    /* NerdDinner i18n Custom caching */
    public override string GetVaryByCustomString(HttpContext context, string arg)
    {
        // It seems this executes multiple times and early, so we need to extract language again from cookie.
        if (arg == "culture") // culture name (e.g. "en-US") is what should vary caching
        {
            string cultureName = null;
            // Attempt to read the culture cookie from Request
            HttpCookie cultureCookie = Request.Cookies["_culture"];
            if (cultureCookie != null)
                cultureName = cultureCookie.Value;
            else
                cultureName = Request.UserLanguages[0]; // obtain it from HTTP header AcceptLanguages

            // Validate culture name
            cultureName = CultureHelper.GetImplementedCulture(cultureName); // This is safe

            return cultureName.ToLower();// use culture name as cache key, "es", "en-us", "es-cl", etc.
        }

        return base.GetVaryByCustomString(context, arg);
    }
} 
```

希望有人可以看看并告诉什么是拒绝谷歌爬虫，这样我就无法获取任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T09:54:07.313

该`Request.UserLangauges`对象基于使用来自浏览器的请求。googlebot 的爬虫不是浏览器，因此您应该首先测试是否`Request.UserLangauges`不为空，如下所示：

```
 if (cultureCookie != null)
       cultureName = cultureCookie.Value;
    else {
       if (Request.UserLanguages != null && Request.UserLanguages.Length > 0)
           cultureName = Request.UserLanguages[0];
       else
           cultureName = "the culture you'd like to use";
    } 
```

# mysql - 无法启动服务器：在 TCP/IP 端口上绑定：无法分配请求的地址

> ID：14908430
> 
> 赞同：18
> 
> 时间：2013-02-16T08:25:52.727
> 
> 标签：mysql, ubuntu

我昨天重新启动了我的服务器，不幸的是现在无法启动mysql。

错误日志如下：

```
root@site-digger:/var/log/mysql# cat error.log 
130216 16:11:32 [Note] Plugin 'FEDERATED' is disabled.
130216 16:11:32  InnoDB: Initializing buffer pool, size = 8.0M
130216 16:11:32  InnoDB: Completed initialization of buffer pool
130216 16:11:33  InnoDB: Started; log sequence number 0 1382359817
130216 16:11:33 [ERROR] Can't start server: Bind on TCP/IP port: Cannot assign requested address
130216 16:11:33 [ERROR] Do you already have another mysqld server running on port: 3306 ?
130216 16:11:33 [ERROR] Aborting

130216 16:11:33  InnoDB: Starting shutdown...
130216 16:11:38  InnoDB: Shutdown completed; log sequence number 0 1382359817
130216 16:11:38 [Note] /usr/sbin/mysqld: Shutdown complete
... 
```

我检查并没有发现任何程序正在使用 3306，请参阅以下内容。

```
root@site-digger:/var/log/mysql# sudo netstat
Active Internet connections (w/o servers)
Proto Recv-Q Send-Q Local Address           Foreign Address         State      
tcp        0      0 site-digger.com:59367   li566-52.members.li:ssh ESTABLISHED
tcp        0      0 site-digger.com:ssh     61.150.56.248:65255     ESTABLISHED
tcp        0    216 site-digger.com:ssh     61.150.56.248:61553     ESTABLISHED
tcp        0      0 site-digger.com:www     1.82.9.18:55526         TIME_WAIT  
Active UNIX domain sockets (w/o servers)
Proto RefCnt Flags       Type       State         I-Node   Path
unix  2      [ ]         DGRAM                    600880492 
unix  3      [ ]         STREAM     CONNECTED     600845962 
unix  3      [ ]         STREAM     CONNECTED     600845961 
unix  3      [ ]         STREAM     CONNECTED     600596531 
unix  3      [ ]         STREAM     CONNECTED     600596530 
```

我试过sudo mysql start。但仍然无法正常工作。操作系统：Ubuntu 11.10

netstat -a -t 的结果如下：

```
root@site-digger:/var/log/mysql# netstat -a -t
Active Internet connections (servers and established)
Proto Recv-Q Send-Q Local Address           Foreign Address         State      
tcp        0      0 *:www                   *:*                     LISTEN     
tcp        0      0 *:ssh                   *:*                     LISTEN     
tcp        0      0 *:https                 *:*                     LISTEN     
tcp        0  20824 site-digger.com:59367   li566-52.members.li:ssh ESTABLISHED
tcp        0      0 site-digger.com:ssh     61.150.56.248:65255     ESTABLISHED
tcp        0     52 site-digger.com:ssh     61.150.56.248:61553     ESTABLISHED
tcp        0      0 site-digger.com:www     crawl-66-249-73-2:45760 TIME_WAIT  
tcp        0      0 site-digger.com:www     218.30.103.146:49094    TIME_WAIT  
tcp6       0      0 [::]:ssh                [::]:*                  LISTEN 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-16T08:27:47.143

端口 33 **06**。不是**60**。Netstat 仅显示活动连接，而不显示仅在侦听的空闲连接。您需要`netstat -a -t`（仅显示 tcp 端口）。

# windows-8 - Windows 8 所有应用的屏幕分辨率要求是什么

> ID：14908436
> 
> 赞同：1
> 
> 时间：2013-02-16T08:26:54.360
> 
> 标签：windows-8, windows-store-apps

我正在 Windows 8 中开发 Windows 商店应用程序。任何人都可以帮助我了解平板电脑、手机、桌面的屏幕分辨率的详细信息。Microsoft 推荐的最小和最大屏幕尺寸要求是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T12:05:22.593

我认为[这是](http://msdn.microsoft.com/library/windows/apps/hh780612.aspx)您可能正在寻找的文章。

“[捕捉”视图](http://msdn.microsoft.com/en-us/library/windows/apps/hh465371.aspx)也应单独考虑。

编辑：@jim-oneil 纠正了我并提供了[手机正确分辨率](http://msdn.microsoft.com/en-US/library/windowsphone/develop/jj206974%28v=vs.105%29.aspx)的链接。

# java - ProcessBuilder 中的撇号

> ID：14908437
> 
> 赞同：1
> 
> 时间：2013-02-16T08:26:58.187
> 
> 标签：java, processbuilder

我需要使用 ProcessBuilder 在 linux 中构建以下命令：

```
sudo packit -t UDP -S 1000 -D 1200 -s 127.0.0.1 -d 192.168.1.1 -c 5 -n 12345 -p '0x 80 64 45 78 00 00 27' 
```

我尝试使用以下代码：

```
commands.add("sudo"); commands.add("packit");
commands.add("-t"); commands.add("UDP");
commands.add("-S"); commands.add("1000");
commands.add("-D"); commands.add("1200");
commands.add("-s"); commands.add("127.0.0.1");
commands.add("-d"); commands.add("192.168.1.1");
commands.add("-c"); 
String a = "5"; commands.add(a);
String b = "-n 12345"; commands.add(b);
String c = "-p '0x 80 64 45 78 00 00 27'"; commands.add(c);
ProcessBuilder pb = new ProcessBuilder(commands);
Process process = pb.start(); 
```

没有语法错误，但结果与终端的结果不同。当我删除时，`String c = "-p '0x 80 64 45 78 00 00 27'"; commands.add(c);`我得到与终端结果相同的结果。我认为问题是撇号（'），请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T09:41:25.407

我认为这些是错误的：

```
String b = "-n 12345"; commands.add(b);
String c = "-p '0x 80 64 45 78 00 00 27'"; commands.add(c); 
```

选项 ( `-n`, `-p`) 与其参数分开：

```
commands.add("-n"); commands.add("12345");
commands.add("-p"); commands.add("0x 80 64 45 78 00 00 27"); 
```

还要注意那里没有额外的引号。这些只是外壳需要的。

# cordova - 外部链接 jquery 手机gap 返回

> ID：14908439
> 
> 赞同：0
> 
> 时间：2013-02-16T08:27:13.180
> 
> 标签：cordova, jquery-mobile, hyperlink

我正在尝试使用我的 phonagap 应用程序加载外部页面，但是当我使用后退按钮返回我的应用程序时，javascript 和 css 没有加载。

我的应用程序看起来像这样： [http ://coenraets.org/blog/2011/10/sample-application-with-jquery-mobile-and-phonegap/](http://coenraets.org/blog/2011/10/sample-application-with-jquery-mobile-and-phonegap/)

我在 index.html 中包含我所有的脚本和 css，而不是在其他页面中。

我只是使用这样的链接转到外部链接：

```
<a href="http://www.stackoverflow.com" >Test</a> 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T14:41:07.180

您可以使用 phonegap 的 InAppBrowser API。

[http://docs.phonegap.com/en/2.4.0/cordova_inappbrowser_inappbrowser.md.html#InAppBrowser](http://docs.phonegap.com/en/2.4.0/cordova_inappbrowser_inappbrowser.md.html#InAppBrowser)

这将导致返回应用程序而不重新加载脚本和 css。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T15:58:45.737

我喜欢 Childbrowser (CB) 插件（或 inAppBrowser）：

如果这是您的链接，请添加一个类，例如“extLink”

> <a href="#" class="extLink">测试</a>

然后绑定到任何具有该类并在**CB** Window 中打开的 click 事件：

> $(".extLink").on('click', function(event){ window.plugins.childBrowser.showWebPage(' [http://www.stackoverflow.com/](http://www.stackoverflow.com/) ', { showNavigationBar: true });

或者您可以使用**inAppBrowser** (Cordova/PG 2.3+)

> $(".extLink").on('click', function(event){
> var ref = window.open(' [http://www.stackoverflow.com/](http://www.stackoverflow.com/) ', '_blank', 'location=yes')} );

# android - 如何在谷歌地图版本 2 中通过 AsyncTask 或 Handler 一直显示标记

> ID：14908440
> 
> 赞同：6
> 
> 时间：2013-02-16T08:27:17.727
> 
> 标签：android, google-maps

我要做的最后一件事是：我的应用程序中有谷歌地图，带有一些按钮和额外的东西。但我还必须始终在我的地图内显示标记的更新位置（我将从外部设备而不是安卓手机的 gps 传感器获取数据）。所以我想先使用线程，然后更改为 AsyncTask，正如您在我的代码中看到的那样，并尝试在那里使用 addMarker 方法，但每次运行它时，map 都会停止工作。我现在只想在地图上显示一个标记，但现在成功了！GoogleMap 地图无法通过 UI 线程和 AsyncTask 内部访问，为什么？有人遇到过这个吗？我应该怎么做才能解决这个问题...请帮助

```
 package com.example.mapsversion2;

    //All imports

    public class MainActivity extends Activity  {
    static final LatLng exmpoint = new LatLng(59.331438,18.064957);

    public static GoogleMap map;

    Button button;
    Button waypointButton;
    Button destinationButton;
    Marker wayPoint;
    TextView positiontext;
    int countclick= 3;
    public static DataModel autoboxdata= new DataModel();
    public static Bitmap arrowBitmap;
    Marker currentPlace;
    MapFragment mapF;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
     mapF = ((MapFragment) getFragmentManager().findFragmentById(R.id.map));
     map= mapF.getMap();
     map.setMapType(GoogleMap.MAP_TYPE_HYBRID);

    //  positiontext = (TextView) findViewById(R.id.position);

    // Move the camera instantly to hamburg with a zoom of 15.
    map.moveCamera(CameraUpdateFactory.newLatLngZoom(exmpoint,15));

    // Zoom in, animating the camera.
    map.animateCamera(CameraUpdateFactory.zoomTo(6), 2000, null);

    addListenerOnButton();
    map.setOnMarkerDragListener(this);

    new PositionUpdate1().execute(); 
  }
    @Override
  public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
  }

  public void addListenerOnButton() {

        destinationButton= (Button) findViewById(R.id.destinationB);

        destinationButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                //do something
            }
        });     
    }

  }

    public class PositionUpdate1  extends AsyncTask<Void, Void, Void>{

    @Override
    protected Void doInBackground(Void...arg0) {
        // TODO Auto-generated method stub

        map.addMarker(new MarkerOptions()
            .position(hereIam) );

        System.out.println("hej");
        return null;
    } 
  }
    } 
```

这是LogCat：

```
02-17 18:57:17.805: E/AndroidRuntime(9905): FATAL EXCEPTION: main
02-17 18:57:17.805: E/AndroidRuntime(9905): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.mapsv2/com.example.mapsv2.MainActivity}: java.lang.NullPointerException
02-17 18:57:17.805: E/AndroidRuntime(9905):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2100)
02-17 18:57:17.805: E/AndroidRuntime(9905):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
02-17 18:57:17.805: E/AndroidRuntime(9905):     at android.app.ActivityThread.access$600(ActivityThread.java:140)
02-17 18:57:17.805: E/AndroidRuntime(9905):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
02-17 18:57:17.805: E/AndroidRuntime(9905):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-17 18:57:17.805: E/AndroidRuntime(9905):     at android.os.Looper.loop(Looper.java:137)
02-17 18:57:17.805: E/AndroidRuntime(9905):     at android.app.ActivityThread.main(ActivityThread.java:4898)
02-17 18:57:17.805: E/AndroidRuntime(9905):     at java.lang.reflect.Method.invokeNative(Native Method)
02-17 18:57:17.805: E/AndroidRuntime(9905):     at java.lang.reflect.Method.invoke(Method.java:511)
02-17 18:57:17.805: E/AndroidRuntime(9905):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
02-17 18:57:17.805: E/AndroidRuntime(9905):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
02-17 18:57:17.805: E/AndroidRuntime(9905):     at dalvik.system.NativeStart.main(Native Method)
02-17 18:57:17.805: E/AndroidRuntime(9905): Caused by: java.lang.NullPointerException
02-17 18:57:17.805: E/AndroidRuntime(9905):     at com.example.mapsv2.MainActivity.onCreate(MainActivity.java:140)
02-17 18:57:17.805: E/AndroidRuntime(9905):     at android.app.Activity.performCreate(Activity.java:5206)
02-17 18:57:17.805: E/AndroidRuntime(9905):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1083)
02-17 18:57:17.805: E/AndroidRuntime(9905):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064)
02-17 18:57:17.805: E/AndroidRuntime(9905):     ... 11 more
02-17 18:57:17.935: E/android.os.Debug(2287): !@Dumpstate > dumpstate -k -t -z -d -o /data/log/dumpstate_app_error 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-17T18:03:06.120

您正在尝试在后台线程中向地图添加标记，但您无法从 UI 线程以外的线程更新 Android 中的 UI。因此，将您的`map.addMarker`调用移至`onPostExecute`后台操作完成后在 UI 线程中调用的方法：

```
public class PositionUpdate1  extends AsyncTask<Void, Void, Location> {

    @Override
    protected Location doInBackground(Void...arg0) {
        // get your location...
        return hereIam;
    }

    @Override
    protected void onPostExecute(Location loc) {
        map.addMarker(new MarkerOptions().position(loc));
    }
} 
```

如果要连续更新标记，最简单的方法是使用`Handler`：

```
public class MainActivity extends Activity {

    final int MARKER_UPDATE_INTERVAL = 2000; /* milliseconds */
    Handler handler = new Handler();

    GoogleMap map;
    Marker marker;
    Location location;

    Runnable updateMarker = new Runnable() {
        @Override
        public void run() {
            marker.remove();
            marker = map.addMarker(new MarkerOptions().position(location));

            handler.postDelayed(this, MARKER_UPDATE_INTERVAL);
        }
    };

    @Override
    public void onCreate(Bundle savedInstanceState) {
        map = ...; // get map
        location = ...; // get location
        marker = map.addMarker(new MarkerOptions().position(location));

        handler.postDelayed(updateMarker, MARKER_UPDATE_INTERVAL);
    }

    @Override
    protected void onDestroy() {
        handler.removeCallbacks(updateMarker);

        super.onDestroy();
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-19T15:01:29.487

你可以做这样的事情。在 doInBackground 中加载您需要的数据并在 onProgressUpdate 中绘制标记。要调用 onProgressUpdate，只需从 doInBackground 执行 publishProgress()。这样您就可以从 ASyncTask 中更新 UI。为我工作。

```
public class CDrawHotspotsAsync extends AsyncTask<Void, CHotspot, Boolean>
{
private final Context mCntxt;
private final GoogleMap mGMap;

// ---------------------------------------------------------

public CDrawHotspotsAsync(Context cntxt, GoogleMap gmap)
{
    this.mCntxt = cntxt;
    this.mGMap = gmap;
}

// ---------------------------------------------------------

private void drawMarker(GoogleMap gmap, CHotspot hotspot)
{
    // Set marker options
    MarkerOptions mo = new MarkerOptions();
    mo.position(hotspot.getPosition());
    mo.title(hotspot.getName());
    String descr = hotspot.getAddress() + ", " + hotspot.getPostal() + ", " + hotspot.getCity();
    mo.snippet(descr);
    mo.icon(BitmapDescriptorFactory.fromResource(R.drawable.hotspot_marker));

    // Add marker to map
    gmap.addMarker(mo);
}

// ---------------------------------------------------------

@Override
protected Boolean doInBackground(Void... params)
{
    // Get hotspots from database
    CHotspotList hotspots = new CHotspotList(this.mCntxt);
    ArrayList<CHotspot> arrHotspots = hotspots.getHotspotList();

    for (CHotspot hotspot : arrHotspots)
    {
        // Publish progress
        publishProgress(hotspot);
    }

    // Always return true
    return true;
}

// ---------------------------------------------------------

@Override
protected void onProgressUpdate(CHotspot... hotspot)
{
    // Draw the marker
    drawMarker(this.mGMap, hotspot[0]);
}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-08T06:38:15.403

如果您的异步任务正在加载多个标记，您可以执行以下操作：

```
private class AddMarker implements Runnable {

    private GoogleMap map;
    private MarkerOptions options;

    public AddMarker(GoogleMap map, MarkerOptions options) {
        this.map = map;
        this.options = options;
    }

    @Override
    public void run()
    {
        map.addMarker(options);
    }
}
Runnable addMarker = new AddMarker(map, markerOptions);
activity.runOnUiThread(addMarker); 
```

而且，当然，您应该使用活动对象构造异步任务。

# html - 选择框动态更改值的事件是什么

> ID：14908443
> 
> 赞同：0
> 
> 时间：2013-02-16T08:27:43.910
> 
> 标签：html

这是选择框中的代码

```
 <select id="localityvalid" onchange="getLocalitiesList('local')>
<option  value="1">hello</option>
   -------------------

 somewhere i did the following dynamically adding `<option selected='selected' value="+results.id+">"+results.value+"</option>` 
```

当我使用下拉列表更改选择框时，执行 getLocalitiesList() 但是当我动态添加值时不是。是否有任何事件可以确认该方法？否则该怎么做？

如果我附加新的选择框

```
 <select id="localityvalid" onchange="getLocalitiesList('local')>
`<option selected='selected' value="+results.id+">"+results.value+"</option>` 
```

然后我需要调用该方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T08:52:56.710

当您调用类似“getLocalitiesList(this.value);”的方法时

*   函数getLocalitiesList（值）{
*   警报（值）；
*   // 做你想做的事（比如改变一些值）
*   }

你可以得到你选择的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T08:53:11.583

如果要触发该函数，则需要在附加该新动态选项后立即单独调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T08:58:19.780

动态添加值后使用 selectObject.fireEvent('onchange') 。

# php - mysqli 准备好的语句无法读取 unicode

> ID：14908446
> 
> 赞同：1
> 
> 时间：2013-02-16T08:28:00.340
> 
> 标签：php, mysqli, prepared-statement

假设 `Adams’ Inn` `America’s Best Inn`存储在db表中`establishment`

我必须检查 `Adams’ Inn` `America’s Best Inn`一个变量`$EstablishmentName`

```
$stmt = $sql->prepare("SELECT ID FROM `establishment` WHERE Name=? LIMIT 1");
$stmt->bind_param("s",$EstablishmentName);
$stmt->execute();
$stmt->store_result();
print $stmt->num_rows; 
```

问题是我找不到他们。

**输出** `0`

**附注**else你最终会`$EstablishmentName`出错`mb_convert_string($EstablishmentName,'HTML-ENTITIES')``Illegal mix of collations (latin1_swedish_ci,IMPLICIT) and (utf8_general_ci,COERCIBLE) for operation '='`

**更新：**我`set_charset('utf8')`用于客户端；表字符集是 utf8，排序规则是`utf8_general_ci`. 文本被编码为原始文本。我正在使用以下数据库管理器：SQLyog 和 PHPMyAdmin。

**更新#2：**我附上了屏幕截图，让您看看我正在告诉正确的字符集。

![截图_1](../Images/b1ad43b3022d163e2e00c5a36669e03b.png)

我用`$sql->set_charset('utf-8');`

```
大批
(
    [品牌名称] => 美国最佳价值旅馆
    [尝试1] => 1
)

大批
(
    [品牌名称] => 亚当斯旅馆
    [尝试1] => 0
)

大批
(
    [品牌名称] => 大使套房酒店
    [尝试1] => 1
)

大批
(
    [品牌名称] => 安伯利套房酒店
    [尝试1] => 1
)

大批
(
    [品牌名称] => 美国最佳价值旅馆
    [尝试1] => 0
)

```

**更新＃3**好的，对不起。该列`Name`是`latin1_swedish_ci`。
我已经更新了专栏`Name`：

```
ALTER TABLE establishment MODIFY NAME VARCHAR(64) CHARACTER SET utf8 COLLATE utf8_general_ci; 
```

这应该在没有`mb_convert_string()`现在的情况下工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-04T07:31:10.773

就放

```
mysqli_set_charset($db_connection, 'utf8'); 
```

在你的数据库连接之后。

**例子**

```
$con=mysqli_connect("localhost", "root", "xxxxx","database");
mysqli_set_charset($con, 'utf8'); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-16T09:11:47.383

我唯一能说的是我在这里看到了很多困惑

*   准备好的语句在这里无关紧要，因为它们只实现数据替换的方法，但不会改变数据本身。您将获得相同的结果，直接将值添加到数据库中。
*   mb_convert_string 不会导致 Illegal mix of collat​​ions 错误，因为此错误是由内部内部编码冲突触发的，而不是由数据格式触发的。
*   没有代码可以证明存储的值等于用于检查的值

假设您可以`Adams’ Inn America’s Best Inn`根据 id 获取值，我建议您检索它，然后手动比较。var_dump() 他们。如果您仍然看不到差异 - 首先使用 urlencode()

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-22T08:56:28.507

**这解决了问题：**

```
iconv('windows-1250', 'utf-8', $EstablishmentName); 
```

# postgresql - 有没有办法设置一个选项，即使有错误也会导致 PostgreSQL 脚本继续？

> ID：14908451
> 
> 赞同：3
> 
> 时间：2013-02-16T08:29:05.463
> 
> 标签：postgresql, error-handling, continue

是否有一个命令来设置一个选项，即使有错误也会导致 PostgreSQL 脚本继续？

例如，有时当我将电子表格中的大量数据插入到表中时，我使用公式创建 INSERT 语句，然后将语句复制到文件中并执行它们，或者将它们复制到 PgAdmin 中以运行它们。准确性并不总是很重要，我不希望整个过程因为几条记录而失败。

语法错误不是这里的问题，只是由于某些错误而失败的命令，例如尝试创建已经存在的索引或插入重复记录。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T12:14:21.240

如果使用`psql`，你想要：

```
\set ON_ERROR_ROLLBACK on 
```

从[手册](http://www.postgresql.org/docs/current/static/app-psql.html#APP-PSQL-VARIABLES)：

> ON_ERROR_ROLLBACK
> 
> 打开时，如果事务块中的语句产生错误，则忽略该错误并继续事务。在交互时，此类错误仅在交互会话中被忽略，而不是在读取脚本文件时。关闭时（默认值），事务块中生成错误的语句会中止整个事务

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-23T19:13:16.463

聚会有点晚了，但我正在对该主题进行一些研究，并在这里找到了一篇出色的文章： [Postgres ON_ERROR_ROLLBACK 解释](https://www.endpointdev.com/blog/2015/02/postgres-onerrorrollback-explained/)

# compilation - LD_LIBRARY_PATH 在链接和运行之间改变

> ID：14908454
> 
> 赞同：0
> 
> 时间：2013-02-16T08:29:56.627
> 
> 标签：compilation, dynamic-linking

假设我们有 2 个具有相同 SONAME 和接口的库（A 和 B）。开发人员在编译时链接到 A，但用户在运行前设置了 $LD_LIBRARY_PATH。一切都很正常，但用户不知道他们使用了与开发人员想要的不同的库。

我是编译的学习者，不确定这只是一种技巧，是否应该避免。我知道向编译器提供“-Wl，--rpath”会优先考虑运行时链接路径，但不确定软件开发中最“标准”的策略是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T08:35:41.623

如果用户设置了 LD_LIBRARY_PATH，这意味着他们*确实*知道他们得到了一个不同的库。这就是他们首先设置 LD_LIBRARY_PATH 的原因。如果他们想要默认库，他们就不会设置那个 env var。这是一个非常明确的设置，意味着“我知道我在做什么，我有我的理由”。

至于回答实际问题，rpath 是一种标准方法，许多库使用它或将其作为构建时配置选项提供。你确定它会覆盖 LD_LIBRARY_PATH 吗？AFAIK，它没有。而且不应该这样做，因为这会使用户无法更改默认库搜索路径。

# javascript - 骨干网未在保存时触发请求

> ID：14908457
> 
> 赞同：1
> 
> 时间：2013-02-16T08:30:33.913
> 
> 标签：javascript, rest, backbone.js

我得到了这个非常简单的访客模型

```
define([
], function() {
  Guest = Backbone.Model.extend({

    urlRoot : ftd.settings.rest + '/guest',

    defaults: {
      id : '',
      name : '',
      accessToken : ''
    },

    validate: function( attr ) {
      var errors = [];
      if(attr.name.length < 4) {
        errors.push({message : "You nickname, must be atleast 4 chars", name : 'guestNickname'});
      }
      return errors;
    }
  });

  return Guest;
}); 
```

然后我得到了一个首页视图，客人注册的地方，基本上这发生在单击提交按钮时。

```
createGuest: function( ev ) {
  ev.preventDefault();
  // Get nickname.
  var guest = new Guest();
  guest.bind( 'error', function( model, errors ) {
        _.each( errors, function( err ) {
      $('input[name=' + err.name + ']').addClass('invalid');
      // add a meesage somewhere, using err.message
          }, this );
  });

  guest.save({
    'name' : $('input[name="guestNickname"]').val()
  }, {
    wait:true,
    success:function(model, response) {
      console.log('Successfully saved!');
    },
    error: function(model, error) {
      console.log(error);
    }
  });
}, 
```

所以我从我的输入元素中取了名字，然后我把它放到了保存方法中。问题是，Backbone 没有向服务器发送请求，只是触发了错误事件。其中打印一个空的错误数组。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T09:17:06.720

[如果验证](http://backbonejs.org/#Model-validate)成功，您应该不返回任何内容。

由于您返回的是一个空数组，因此它假定该数组是验证错误。

试试这个：

```
validate: function( attrs ) {
      var errors = [];
      if(attrs.name.length < 4) {
        errors.push({message : "You nickname, must be atleast 4 chars", name : 'guestNickname'});
      }
      if(errors.length > 0){
          return errors;
      }
    } 
```

# html - 如何制作h7、h8等新的标题标签号？

> ID：14908463
> 
> 赞同：9
> 
> 时间：2013-02-16T08:31:48.263
> 
> 标签：html

我怎样才能进入另一个标题`HTML`？

我用过`<h1>`, `<h2>`, `<h3>`,和`<h4>`,现在我想添加,因为我需要使用不同的文本类型。`<h5>``<h6>``<h7>``<h8>`

如果你不能这样做，有没有办法调用`CSS`文本表，除了`<p>`和`<h1>`- `<h6>`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-16T08:35:29.487

您可以在样式表中声明它

```
h7, h8, h9 { /* You can just go on adding headings */
   display: block; /* Because this is block level element */
}

h7 {
   font-size: /*Whatever */ ;
}

h8 {
   font-size: /*Whatever */ ;
} 
```

但我建议你不要这样做，因为它没有任何语义，从 SEO 的角度来看也会很糟糕

也看看[html5shiv](http://code.google.com/p/html5shiv/)，只需在脚本中添加你想要的元素

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-05-03T12:42:11.050

到目前为止发布的答案都不是完全正确的。有些相当具有误导性。

在 html5 中，您确实可以使用`h7`,`h8`等等，并使用相应的 css 选择器选择它们，但从语义上讲，**这些不是标题**，它们只是具有未知语义的元素 - 很像 div 和 span。`display`如果所有浏览器都一致地处理这些“自定义”元素而至少没有提供 CSS 值，我也会感到惊讶。

但是您**可以**`role`使用属性指定缺少的语义`"heading"`，这对于屏幕阅读器等辅助技术非常重要。它可能（可以想象）在一定程度上影响 SEO，但还有很多比这更大的 SEO 问题。

指定高于 6 的标题级别的正确方法是包含属性`aria-level="7"`（或您喜欢的任何级别）。如果您将此属性应用于除`h1`-`h6`您还需要`role="heading"`.

因此，根据[w3](https://www.w3.org/WAI/GL/wiki/Using_role%3Dheading) ，以下任何“h7”示例都是有效且正确的：

`<h1 aria-level="7">...`（标题语义由“h1”提供，但 7 覆盖 1）

`<h7 role="heading" aria-level="7">...`（标题语义由 提供`role`）

`<div role="heading" aria-level="7">...`（标题语义由 提供`role`）

当然，要在 css 中选择其中任何一个，您可以执行以下操作：

```
*[aria-level="7"] {
    font-size:0.5em;
} 
```

最后：不要将不同级别的标题相互嵌套！众所周知，这会使所有屏幕阅读器感到困惑，而且可能也不是有效的 HTML。在开始新的标题元素之前完全关闭每个标题元素。如果您使用 ，很容易忽略这一点`div`，并且验证器很可能不会注意到该错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-16T11:38:42.490

在我的另一个完全不相关的问题上，我收到了这个问题的答案：

* * *

您不能制作标题 7，因为只有六个不同的 HTML 标题（h1、h2、h3、h4、h5 和 h6；参考：[http](http://www.w3schools.com/tags/tag_hn.asp) ://www.w3schools.com/tags/tag_hn.asp ），但是您可以使用以下 CSS 代码制作标题 6：

```
h6.special { color:#464646; outline:0;
    font-family:Raleway, sans-serif; font-size:17px; } 
```

这个 HTML 代码：

```
<h6 class="special">I am special!</h6> 
```

* * *

此解决方案不会损坏 seo，而且相当简单。我只是虽然我应该让每个人都知道。作为一个附带问题，你能改变“特殊”吗？说如果我把它改成

```
h6.raleway { color:#464646; outline:0;
    font-family:Raleway, sans-serif; font-size:17px; } 
```

这个 HTML 代码：

```
<h6 class="raleway">I am raleway!</h6> 
```

这行得通吗？再次感谢您的所有回答！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-16T08:42:52.503

简单的方法是使用类

```
.h7{ font-size:10px;}
.h8{font-size:7px;} 
```

以这种方式使用它并与 spans divs 一起使用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-16T08:44:02.490

h7、h8、h9 不是有效的 html 标签，浏览器可以用它做它想做的事。您可以创建自己的 css 类并使用 h2、h3 等 css 属性。

**像：**

```
 h7{
        display: block;
        font-size: 0.51em;
        -webkit-margin-before: 2.99em;
        -webkit-margin-after: 2.99em;
        -webkit-margin-start: 0px;
        -webkit-margin-end: 0px;
        font-weight: bold;
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-16T09:54:39.253

如果您确实需要第 6 级以下的标题（这意味着您的文档在结构和部分嵌套方面对应于一本大书），请使用带有属性的`div`元素。`class`（使用“自定义标签”之类`h7`的不符合规范，会导致 IE 出现问题，并产生使用标题的错觉——它们不会是标题，对于搜索引擎、大纲构建等）示例：

```
<style>
.h7 { font-weight: bold; margin-top: 1em; }
</style>

<div class=h7>Some text</div> 
```

（很难将标题设置为 7 或 8 级，以便在外观上清楚地反映该级别，并且最顶层的字体大小不会过大。）

理论上，您可以使用 HTML5`section`元素来定义文档中的部分、章节、节、小节等的嵌套结构，例如`h1`每个`section`. 通过 HTML5 CR，`section`元素的嵌套定义了标题的级别，因此在第 7 级嵌套中，`<h1>`将是第 7 级标题。但即使对于通常喜欢 HTML5 的人来说，这也可能会让人感到困惑，并且要在 IE 上的旧版本中使用它，您需要`<script>document.createElement('section')</script> as well as`section{display:block}` 以及使用上下文选择器格式化标题的代码。

“我需要使用的不同文本类型”的表述表明您可能正在寻找样式元素的可能性。在这种情况下，使用`div`or`p`或其他一些元素，`class`根据需要具有适合内容和结构的属性，并在 CSS 中进行样式设置。

# python - heroku 上每个用户的线程

> ID：14908464
> 
> 赞同：1
> 
> 时间：2013-02-16T08:31:58.800
> 
> 标签：python, heroku

我正在构建一个 python/flask 网络应用程序，除其他外，它允许用户通过 xmpp 聊天。我使用 slimxmpp 来完成这项工作，它具有事件驱动的结构。当收到消息时，xmpp 实例将运行一个定义为处理传入消息的方法。

因此，每个活动用户都需要运行一个线程来监听传入的消息。我的问题是，我如何在heroku上实现这一点？

正如heroku 所描述的那样，我不能真正将python-rq 用于背景工作。假设用户开始聊天，然后我们可以将“xmpp 侦听”作业排入队列以执行。然后工作人员检索作业，并开始侦听传入消息。工作人员在聊天结束之前不会返回，从而阻塞了其他聊天用户的队列。您可以为每个聊天用户配备一个工作人员，但这会非常昂贵（考虑到 heroku 对工作进程的收费）。

我想我需要的是一个作业队列，工作人员可以在其中为该作业启动一个线程，然后在第一个作业完成之前从队列中执行另一个作业。然后，单个工作人员可以一次侦听许多用户的传入消息。

这可能吗？或者我应该如何在heroku上这样做？

# android - listFragment 没有通过 FragmentActivity 上的 findFragmentById 刷新

> ID：14908465
> 
> 赞同：0
> 
> 时间：2013-02-16T08:32:05.987
> 
> 标签：android, android-layout, android-listfragment

我有一个 listfragment 和 FragmentActivity。在 oncreate 我可以通过以下方式填充我的 listFragment：

```
/**
 * Create and update adapter that can set list of user
 */
private void setListUser(){

    if(getListAdapter()==null){
        // init adapter
        adapter=new UserArrayAdapter(getActivity(),
                friends);
        setListAdapter(adapter);  
    }
    else
    {
        //update adapter
        adapter.notifyDataSetChanged();
    }                       
} 
```

现在，在我的 FragmentActivity 中，我想做一个搜索（并升级我的列表）：

```
 public boolean onQueryTextSubmit(String newText) {
        ListUser lt = (ListUser)
                getSupportFragmentManager().findFragmentById(R.id.listuser_fragment);
        if (lt != null) {
            lt.refreshList(newText);
        } 
```

refreshList 进行搜索（它有效..），我调用 setListUser() 但我看不到刷新。为什么？notifyDataSetChanged() 它有效 - 我试过了。谢谢！

**这是刷新列表：**

```
public void refreshList(String toSearch){
    friends= SearchUser(toSearch, this.getActivity().getApplication());
    setListUser();
} 
```

# jquery - 如何在同位素中使用动态容器？

> ID：14908469
> 
> 赞同：0
> 
> 时间：2013-02-16T08:33:00.950
> 
> 标签：jquery, css, jquery-masonry, jquery-isotope

在 Web 应用程序的不同部分重复使用 Isotope 容器的上下文中，我需要调整容器的大小。但是，在为小布局添加和删除 CSS 类之后，容器不再占用全部空间。

请参阅 JSFiddle：http: [//jsfiddle.net/mulderp/ptLzx/5/](http://jsfiddle.net/mulderp/ptLzx/5/)

```
$container.addClass('small'); 
```

这会按预期调整容器的大小。

```
 $container.removeClass('small');
 $container.isotope('shuffle'); 
```

预计将取回原始容器。这不起作用。

任何线索如何让设置工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T13:08:36.937

这看起来像是一个时间问题，这往往发生在同位素中。

如果您在 shuffle 方法周围放置一个 1000 毫秒的 setTimeout() ，它就可以工作 - 因此确认问题......

```
$('#large').click(function(){
    $container.removeClass('small');
    var timer = setTimeout(function(){
        $container.isotope('shuffle');      
    },1000);
}); 
```

超时一点也不理想，但它确实说明了同位素需要在更新之前完成。我建议使用不同的计时器进行测试，直到你找到合适的。

我还建议使用`$container.isotope('reLayout')`over ，`$container.isotope('shuffle')`除非您特别需要对项目进行洗牌，该方法正是为此而创建的。

# matlab - 需要一个好的边缘检测程序来检测粗糙表面的重叠物体

> ID：14908470
> 
> 赞同：3
> 
> 时间：2013-02-16T08:33:02.917
> 
> 标签：matlab, opencv, image-processing, edge-detection

我需要在我的项目中检测边缘以进行形状检测。目前我正在使用 MATLAB，但如果它提供更好的输出，我对 openCV 很满意。所以这就是问题所在。我拥有的示例图像具有粗糙表面的重叠对象。我正在使用此代码并获得良好的输出，但表面的粗糙度仍然使我的输出降级。我在 MATLAB 中使用此代码：

```
a = imread('D:\images\wheatstarch.jpg');
I = rgb2gray(a);
imshow(I)
thresold = graythresh(I);
se1=strel('diamond',2);
I1=imerode(I,se1);
bw = edge(I1,'canny'); 
figure;
imshow(bw); 
```

我得到这个输出：http: [//i49.tinypic.com/vg7fns.png](http://i49.tinypic.com/vg7fns.png)

需要更好的输出，以便我可以将输出用于形状检测。

输入图片下载 [http://www.profimedia.si/photo/wheat-starch-granules/profimedia-0035237439.jpg](http://www.profimedia.si/photo/wheat-starch-granules/profimedia-0035237439.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T08:39:40.963

你最好看看[BSDS](http://www.eecs.berkeley.edu/Research/Projects/CS/vision/grouping/resources.html)，他们有最先进的边缘检测，应该比 Canny 好得多。
他们也有源代码（为 Linux 编译的 matlab）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T17:28:57.240

在 Photoshop 中使用该文件，photoshop 查找边缘边缘，然后是一个级别命令，它提供的输出更像您正在寻找的。我不建议您使用 Photoshop，Photoshop 是一种方便的工具，用于可视化处理图形文件的方法。我总是编写自己的代码，所以不能提出任何现成的解决方案。

我看到的是 Photoshop 的查找边缘给出了边缘硬度的灰度结果，而您正在寻找的对象是边缘最硬的对象。

您得到的似乎是图像首先转换为黑白（如 level 命令），然后找到边缘。转换为黑白是在阴影中创建任意线条，然后对其进行跟踪。这导致在原始图像中显示为阴影中的灰色平滑过渡到跟踪中的人造线。

通过以灰度创建边缘，然后将灰度边缘转换为黑白，灰度的平滑移动不会产生任何边缘。

# php - 致命错误：在第 12 行的 /usr/www/users/weddiycvvx/index.php 中调用未定义函数 mysql_connect()

> ID：14908475
> 
> 赞同：1
> 
> 时间：2013-02-16T08:33:30.687
> 
> 标签：php, mysql

我无法让 MySql 连接。请协助，我对PHP相当陌生。

```
mysql_connect('sql5.jnb3.host-h.net', 'user', 'password'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T08:36:10.833

您需要安装 php mysql 模块。

您可以从您的发行版包管理器或从 pecl.php.net 获取它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T08:38:27.977

在您的 php.ini 文件中，搜索这样的一行，`;extension=php_mysql.dll`然后简单地从该行的开头删除该`;`字符。如果您没有安装 mysql 扩展，请查看此链接以获取有关如何安装它的说明：[http](http://www.php.net/manual/en/mysql.installation.php) ://www.php.net/manual/en/mysql.installation.php 。根据上面的链接，您还应该指定您的扩展目录：

`extension_dir="YOUR_EXTENSION_DIRECTORY"`

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-02-16T08:41:19.260

像这样建立连接

```
$con = mysql_connect("localhost","user","pass");

mysql_select_db("dbname",$con); 
```

# xcode - 我可以使用 Jenkins XCode 插件在 Linux 系统上构建 iPad 项目吗？

> ID：14908478
> 
> 赞同：2
> 
> 时间：2013-02-16T08:34:06.570
> 
> 标签：xcode, jenkins, xcodebuild

我可以使用 Jenkins XCode 插件在 Linux 系统上构建 iPad 项目吗？只编译生成ipa文件进行持续构建

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T16:34:44.287

Jenkins XCode 插件只有在安装了 Mac OSX 和 XCode 的系统上运行时才能正常工作。有问题的系统可以是 Jenkins 主代理或从代理。

在原始海报的情况下，使用带有 Mac OSX+XCode 从属的 Linux Jenkins Master，其中 Mac 从属处理作业的构建——这将起作用。

# java - 带有自己的 Jbutton 的 Jinternalframe 不起作用

> ID：14908480
> 
> 赞同：0
> 
> 时间：2013-02-16T08:34:20.950
> 
> 标签：java, swing, layout, jinternalframe

我已经创建了 Jinternal 框架并在其中添加了一些按钮。如果我制作 new JInternalFrame("Blah", false, false, false, true); 那么它就不能正常工作。例如，如果一帧被最大化并且如果尝试最小化另一个面板，那么最大面板也会被最小化。但是如果全部为真，那么它可以正常工作。我的目标是创建我自己的按钮来执行最小/最大/恢复和关闭。请在下面找到代码

```
package Project;

import java.awt.Component;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.GridLayout;
import java.awt.event.*;
import java.beans.PropertyVetoException;
import java.util.ArrayList;
import java.util.List;
import javax.swing.JButton;
import javax.swing.JDesktopPane;
import javax.swing.JFrame;
import javax.swing.JInternalFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.UIManager;
import javax.swing.plaf.basic.BasicInternalFrameTitlePane;
import javax.swing.plaf.basic.BasicInternalFrameUI;

public class Test5 implements MouseListener {

    private JDesktopPane pane;
public int mouseCount;
    public static void main(String[] args) {
        new Test5();
    }
    private int xpos = 0;
    private int ypos = 0;

    public Test5() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception exp) {
                    exp.printStackTrace();
                }
                pane = new Test5.DesktopPane() {
                    @Override
                    public Dimension getPreferredSize() {
                        return new Dimension(400, 400);
                    }
                };
                pane.add(newInternalFrame());
                pane.add(newInternalFrame());
                pane.add(newInternalFrame());

                JFrame frame = new JFrame();
                frame.add(pane);
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public JInternalFrame newInternalFrame() {
        final JInternalFrame inf = new JInternalFrame("Blah", false, false, false, true);
        inf.setLocation(xpos, ypos);
        inf.setSize(200, 100);
        inf.setVisible(true);

        xpos += 50;
        ypos += 50;

        JPanel jp = new JPanel();
        JLabel jl = new JLabel("panel" + xpos);

        JButton jb = new JButton("_");
        JButton jb2 = new JButton("[]");
        JButton jb3 = new JButton("X");

        inf.setLayout(new GridLayout(2, 2));
        jp.add(jl);
        jp.add(jb);
        jp.add(jb2);
        jp.add(jb3);

        inf.add(jp);
        jb.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                try {
                    if (inf.getLayer() == JDesktopPane.FRAME_CONTENT_LAYER) {
                        pane.remove(inf);
                        pane.add(inf, JDesktopPane.DEFAULT_LAYER);
                        pane.revalidate();
                        pane.repaint();
                    }
                    inf.pack();
                    inf.setIcon(true);
                } catch (PropertyVetoException ex) {
                    ex.printStackTrace();
                }

            }
        });
        jb2.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                try {
                    if (inf.isMaximum()) {//restore
                        inf.pack();
                    } else {//maximize
                        inf.setMaximum(true);

                    }
                    pane.remove(inf);
                    pane.add(inf, JDesktopPane.FRAME_CONTENT_LAYER);
                    pane.revalidate();
                    pane.repaint();
                } catch (Exception e) {
                    e.printStackTrace();
                }

            }
        });
        jb3.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                try {
                    inf.dispose();
                } catch (Exception ex) {
                    ex.printStackTrace();
                }

            }
        });

        BasicInternalFrameTitlePane titlePane = (BasicInternalFrameTitlePane) ((BasicInternalFrameUI) inf.getUI()).getNorthPane();
        inf.remove(titlePane);
        return inf;
    }

    public class DesktopPane extends JDesktopPane {

        @Override
        public void doLayout() {
            super.doLayout();
            List<Component> icons = new ArrayList<Component>(25);
            int maxLayer = 0;

            for (Component comp : getComponents()) {
                if (comp instanceof JInternalFrame.JDesktopIcon) {
                    icons.add(comp);
                    maxLayer = Math.max(getLayer(comp), maxLayer);
                }
            }

            maxLayer++;
            int x = 0;
            for (Component icon : icons) {

                int y = getHeight() - icon.getHeight();
                icon.setLocation(x, y);
                x += icon.getWidth();
                setLayer(icon, maxLayer);
            }
        }
    }

    @Override
    public void mouseClicked(MouseEvent me) {
        mouseCount=me.getClickCount();
        if(mouseCount==2)
        {
            System.out.println("clicked"+mouseCount);
        }
        // TODO Auto-generated method stub

    }

    @Override
    public void mouseEntered(MouseEvent arg0) {
        System.out.println("clicked"+mouseCount);
        // TODO Auto-generated method stub

    }

    @Override
    public void mouseExited(MouseEvent arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void mousePressed(MouseEvent arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void mouseReleased(MouseEvent arg0) {
        // TODO Auto-generated method stub

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T08:55:10.873

你当然喜欢用艰难的方式做事。

该测试基本上会将任何最大化的窗口推到后台。当我有一个最大化的窗口时，我能够毫无问题地最小化和恢复其他框架。

如果要将帧移动到另一层，只需使用`JLayered#setLayer(Component, int)`，您无需删除和添加它们。

```
public class Test5 implements MouseListener {

    private JDesktopPane pane;
    public int mouseCount;

    public static void main(String[] args) {
        new Test5();
    }

    private int xpos = 0;
    private int ypos = 0;

    public Test5() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception exp) {
                    exp.printStackTrace();
                }
                pane = new Test5.DesktopPane() {
                    @Override
                    public Dimension getPreferredSize() {
                        return new Dimension(400, 400);
                    }

                };
                pane.add(newInternalFrame(), 10);
                pane.add(newInternalFrame(), 10);
                pane.add(newInternalFrame(), 10);

                JFrame frame = new JFrame();
                frame.add(pane);
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public JInternalFrame newInternalFrame() {
        final JInternalFrame inf = new JInternalFrame("Blah", false, false, false, true);
        inf.setLocation(xpos, ypos);
        inf.setSize(300, 300);
        inf.setVisible(true);

        xpos += 50;
        ypos += 50;

        JPanel jp = new JPanel();
        JLabel jl = new JLabel("panel" + xpos);

        JButton jb = new JButton("_");
        JButton jb2 = new JButton("[]");
        JButton jb3 = new JButton("X");

        inf.setLayout(new GridLayout(2, 2));
        jp.add(jl);
        jp.add(jb);
        jp.add(jb2);
        jp.add(jb3);

        inf.add(jp);
        jb.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                try {
                    inf.setIcon(true);
//                    if (inf.getLayer() == JDesktopPane.FRAME_CONTENT_LAYER) {
//                        pane.remove(inf);
//                        pane.add(inf, JDesktopPane.DEFAULT_LAYER);
//                        pane.revalidate();
//                        pane.repaint();
//                    }
//                    inf.pack();
//                    inf.setIcon(true);
                } catch (PropertyVetoException ex) {
                    ex.printStackTrace();
                }

            }

        });
        jb2.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                try {
                    inf.setMaximum(!inf.isMaximum());
                    if (inf.isMaximum()) {
                        ((JLayeredPane)inf.getParent()).setLayer(inf, 0);
                    } else {
                        ((JLayeredPane)inf.getParent()).setLayer(inf, 10);
                    }
//                    if (inf.isMaximum()) {//restore
//                        inf.pack();
//                    } else {//maximize
//                        inf.setMaximum(true);
//
//                    }
//                    pane.remove(inf);
//                    pane.add(inf, JDesktopPane.FRAME_CONTENT_LAYER);
//                    pane.revalidate();
//                    pane.repaint();
                } catch (Exception e) {
                    e.printStackTrace();
                }

            }

        });
        jb3.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                Container parent = inf.getParent();
                inf.dispose();
                parent.remove(inf);
                //                try {
                //                    inf.dispose();
                //                } catch (Exception ex) {
                //                    ex.printStackTrace();
                //                }

            }

        });

//        BasicInternalFrameTitlePane titlePane = (BasicInternalFrameTitlePane) ((BasicInternalFrameUI) inf.getUI()).getNorthPane();
//        inf.remove(titlePane);
        return inf;
    }

    public class DesktopPane extends JDesktopPane {

        @Override
        public void doLayout() {
            super.doLayout();
            List<Component> icons = new ArrayList<Component>(25);
            int maxLayer = 0;

            for (Component comp : getComponents()) {
                if (comp instanceof JInternalFrame.JDesktopIcon) {
                    icons.add(comp);
                    maxLayer = Math.max(getLayer(comp), maxLayer);
                }
            }

            maxLayer++;
            int x = 0;
            for (Component icon : icons) {

                int y = getHeight() - icon.getHeight();
                icon.setLocation(x, y);
                x += icon.getWidth();
                setLayer(icon, maxLayer);
            }
        }

    }

    @Override
    public void mouseClicked(MouseEvent me) {
        mouseCount = me.getClickCount();
        if (mouseCount == 2) {
            System.out.println("clicked" + mouseCount);
        }
        // TODO Auto-generated method stub

    }

    @Override
    public void mouseEntered(MouseEvent arg0) {
        System.out.println("clicked" + mouseCount);
        // TODO Auto-generated method stub

    }

    @Override
    public void mouseExited(MouseEvent arg0) {
        // TODO Auto-generated method stub
    }

    @Override
    public void mousePressed(MouseEvent arg0) {
        // TODO Auto-generated method stub
    }

    @Override
    public void mouseReleased(MouseEvent arg0) {
        // TODO Auto-generated method stub
    }

} 
```

顺便说一句，这...

```
BasicInternalFrameTitlePane titlePane = (BasicInternalFrameTitlePane) ((BasicInternalFrameUI) inf.getUI()).getNorthPane();
inf.remove(titlePane); 
```

`NullPointerException`MacOS下会生成一个

**更新了错误信息**

Windows Look & Feel 实现中有一个“错误”，`DesktopManager`当另一个窗口被图标化时，它想要恢复所有最大化的窗口。

一个简单的解决方法是`DefaultDesktopManager`改用。

当您创建 时`JDesktopPane`，请使用此...

```
pane.setDesktopManager(new DefaultDesktopManager()); 
```

在你添加任何东西之前......

# php - 如何更改字段的顺序？

> ID：14908483
> 
> 赞同：-1
> 
> 时间：2013-02-16T08:35:20.263
> 
> 标签：php, drupal

当我管理字段（主页 » 管理 » 结构 » 内容类型 » 文章 » 管理字段）时，更改字段的类型。

在数据库中，字段的权重存储在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T23:59:07.690

权重在“field_config_instance”表的“data”列中。请注意，数据列存储了一个序列化的数组。例如，这里是我的数据库中一个字段的数据列。我用粗体突出了权重字段。您会注意到每个视图模式也有一个相应的权重，出现在“管理显示”页面上。

```
a: 6: {
    s: 5: "label";
    s: 7: "Address";
    s: 8: "required";
    b: 1;
    s: 6: "widget";
    a: 4: {
        s: 4: "type";
        s: 21: "addressfield_standard";
        s: 6: * * "weight";
        i: -10 * * ;
        s: 8: "settings";
        a: 2: {
            s: 15: "format_handlers";
            a: 2: {
                i: 0;
                s: 7: "address";
                i: 1;
                s: 12: "name-oneline";
            }
            s: 19: "available_countries";
            a: 0: {}
        }
        s: 6: "module";
        s: 12: "addressfield";
    }
    s: 7: "display";
    a: 3: {
        s: 7: "default";
        a: 5: {
            s: 5: "label";
            s: 6: "hidden";
            s: 4: "type";
            s: 20: "addressfield_default";
            s: 6: "weight";
            i: -10;
            s: 8: "settings";
            a: 2: {
                s: 19: "use_widget_handlers";
                i: 1;
                s: 15: "format_handlers";
                a: 1: {
                    i: 0;
                    s: 7: "address";
                }
            }
            s: 6: "module";
            s: 12: "addressfield";
        }
        s: 8: "customer";
        a: 5: {
            s: 5: "label";
            s: 6: "hidden";
            s: 4: "type";
            s: 20: "addressfield_default";
            s: 6: "weight";
            i: -10;
            s: 8: "settings";
            a: 2: {
                s: 19: "use_widget_handlers";
                i: 1;
                s: 15: "format_handlers";
                a: 1: {
                    i: 0;
                    s: 7: "address";
                }
            }
            s: 6: "module";
            s: 12: "addressfield";
        }
        s: 13: "administrator";
        a: 5: {
            s: 5: "label";
            s: 6: "hidden";
            s: 4: "type";
            s: 20: "addressfield_default";
            s: 6: "weight";
            i: -10;
            s: 8: "settings";
            a: 2: {
                s: 19: "use_widget_handlers";
                i: 1;
                s: 15: "format_handlers";
                a: 1: {
                    i: 0;
                    s: 7: "address";
                }
            }
            s: 6: "module";
            s: 12: "addressfield";
        }
    }
    s: 8: "settings";
    a: 1: {
        s: 18: "user_register_form";
        b: 0;
    }
    s: 11: "description";
    s: 0: "";
} 
```

尼拉夫·梅塔

[Drupal 开发人员](http://redcrackle.com)

# r - bar_plot ggplot：bar和x轴标签上的值之间的冲突

> ID：14908492
> 
> 赞同：2
> 
> 时间：2013-02-16T08:36:05.490
> 
> 标签：r, ggplot2

我正在努力使用我的代码创建一个带有 ggplot2 的条形图，在其中我尝试`y`在条形顶部添加值，但不移动`x`轴的标签。 非常适合在条形图上添加值，但是当旋转 45°（即标签的最后一个字母粘在轴上）时`geom_text`，我无法正确调整轴标签。`x`

我的数据

```
 dput(graph)
structure(list(x = structure(1:9, .Label = c("AAAAAAAAAAAAA", 
"BBBBBBBB", "CCCCCCCCCCCCCCCC", "DDDDD", "EEEEEEEE", "FFFFFFF", 
"GGGGGGGGGGGGGGG", "HHHHHHHHHHHHHH", "IIIII"), class = "factor"), 
    y = c(1L, 5L, 10L, 1000L, 20L, 15L, 45L, 30L, 35L)), .Names = c("x", 
"y"), class = "data.frame", row.names = c(NA, -9L)) 
```

我的代码：

```
graph <- read.table("input.txt",header=T,sep=";")
output <- ggplot(graph,aes(x=x,y=y))+
    geom_bar(stat="identity")+
    geom_text(aes(label=y,y=(y+25)))+
    scale_x_discrete()+
    scale_y_continuous(limits=c(0,max(50 + graph$y)))+
    theme(axis.text.x=element_text(angle=45,vjust=0))
print(output) 
```

我无法发布输出的图像，但是除了`x`轴的刻度线适合标签的中间`x`而不是标签的最后一个字母之外，该图看起来很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T09:07:06.220

您应该添加`hjust=1`并`axis.text.x=`更改`vjust=0`为`vjust=1`. 要更改条形的外观，您可以尝试使用 y 值的转换，例如平方根，使用`scale_y_sqrt()`. 仅`geom_text()`应调整的位置。

```
output <- ggplot(graph,aes(x=x,y=y))+
  geom_bar(stat="identity")+
  geom_text(aes(label=y,y=(y+c(10,10,10,50,10,10,10,10,10))))+
  scale_y_sqrt(limits=c(0,max(50 + graph$y)),breaks=c(10,100,250,500,1000))+
  theme(axis.text.x=element_text(angle=45,vjust=1,hjust=1))
output 
```

![在此处输入图像描述](../Images/b4b5252022fd841f55fcf604ebe3e626.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T09:34:13.503

这是一个类似 ggplot2 的格子版本：

```
library(lattice)
library(latticeExtra)
barchart(y~x, data=dat,
         scales = list(x = list(rot=45,cex=1.5)),
         par.settings = ggplot2like(), axis = axis.grid,
         panel=function(x,y,...){
           panel.barchart(x,y,...)
           panel.text(x,y,label=y,col='red',
                      adj=c(0.5,-0.5),cex=2)
         }) 
```

![在此处输入图像描述](../Images/14f127955bba46df4f31001bcff125eb.png)

**编辑**

为了减少条形级别之间的差异，这里的一个想法是使用对数刻度：

```
library(lattice)
library(latticeExtra)
barchart(y~x, data=dat,
         scales = list(x = list(rot=45,cex=1.5),
                       y = list(log=10)),
         par.settings = ggplot2like(), axis = axis.grid,
         yscale.components = yscale.components.log10ticks,
         panel=function(x,y,...){
           panel.barchart(x,y,...)
           panel.text(x,y,label=10^y,col='red',
                      adj=c(0.5,-0.5),cex=2)
         }) 
```

![在此处输入图像描述](../Images/bf8494c18fc910d9a5d0bd160918279b.png)

# django - Django 图片错误和 {% url admin:index %}

> ID：14908495
> 
> 赞同：0
> 
> 时间：2013-02-16T08:37:06.037
> 
> 标签：django

我正在使用本教程[http://lightbird.net/dbe/blog.html](http://lightbird.net/dbe/blog.html)制作一个简单的博客 我有一个问题和一个我想解决的问题。:]

问题是我的博客看起来不像轻鸟示例中的博客，第二个问题是我的 bbase.html 中的这种语法 {% url admin:index %} 我没有将命名空间注册为 admin 而是注册为 namespace = ' blog' 在我的主 URL 中，我不明白这个语法是如何工作的 {% url admin:index %}

![在此处输入图像描述](../Images/79703d252c7bc6f56d0a5227fae16a7d.png) ![在此处输入图像描述](../Images/078fe125273b37fd610b720f363f46e9.png)

我的主要 URLconf 是：

```
 from django.conf.urls import patterns, include, url
 from django.contrib import admin
 from django.conf import settings
 admin.autodiscover()
 urlpatterns = patterns('',                  
     url(r'^admin/', include(admin.site.urls)),
     url(r'^cool/', include('blog.urls', namespace='blog')),

 ) 
```

我的博客 URLconf 是：

```
from django.conf.urls import patterns,include,url
from django.contrib import admin
from django.conf import settings

urlpatterns = patterns('blog.views',
        url(r'^$','main', name='main'),

) 
```

我的观点.py

```
from django.core.paginator import Paginator, InvalidPage, EmptyPage
from django.core.urlresolvers import reverse
from django.shortcuts import render_to_response
from blog.models import *

def main(request):
    """Main listing."""
    posts = Post.objects.all().order_by("-created")
    paginator = Paginator(posts, 2)

    try: page = int(request.GET.get("page", '1'))
    except ValueError: page = 1

    try:
        posts = paginator.page(page)
    except (InvalidPage, EmptyPage):
        posts = paginator.page(paginator.num_pages)

    return render_to_response("list.html", dict(posts=posts, user=request.user)) 
```

我的 bbase.html 位于 C:\djcode\mysite\blog\templates

```
 <?xml version="1.0" encoding="UTF-8"?>
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <head> <title>{% block title %}MyBlog{% endblock %}</title> </head>

 <body>
     <div id="sidebar"> {% block sidebar %} {% endblock %} </div>
     <div id="container">
         <div id="menu">
             {% block nav-global %}

                 <!-- MENU -->
                 <h3>MyBlog</h3>
                 {% if user.is_staff %}
                 <a href="{% url admin:index %}">Admin</a>
                 <a href="{% url admin:blog_post_add %}">Add post</a>
                 {% endif %}

             {% endblock %}
         </div>

         <div id="content">
             {% block content %}{% endblock %}
         </div>
     </div>

 </body>
 </html> 
```

我的 list.html

```
{% extends "bbase.html" %}

{% block content %}
    <div class="main">

         <!-- Posts  -->
         <ul>
             {% for post in posts.object_list %}
                 <div class="title">{{ post.title }}</div>
                 <ul>
                     <div class="time">{{ post.created }}</div>
                     <div class="body">{{ post.body|linebreaks }}</div>
                 </ul>
             {% endfor %}
         </ul>

         <!-- Next/Prev page links  -->
         {% if posts.object_list and posts.paginator.num_pages > 1 %}
    <div class="pagination" style="margin-top: 20px; margin-left: -20px; ">
        <span class="step-links">
            {% if posts.has_previous %}
                <a href= "?page={{ posts.previous_page_number }}">newer entries &lt;&lt; </a>
            {% endif %}

            <span class="current">
                &nbsp;Page {{ posts.number }} of {{ posts.paginator.num_pages }}
            </span>

            {% if posts.has_next %}
                <a href="?page={{ posts.next_page_number }}"> &gt;&gt; older entries</a>
            {% endif %}
              </span>
          </div>
          {% endif %}

      </div>

{% endblock %} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T09:49:22.417

url 标签`{% url admin:index %}`链接到应用程序的`index`视图`admin`。admin 命名空间是正确的，因为您在模式中包含了您的 admin url：

```
url(r'^admin/', include(admin.site.urls)), 
```

请注意，您尚未为`admin`应用程序设置命名空间，因此它默认为`admin`.

如果您想链接到应用程序中的`index`视图，`blog`您可以使用`{% url blog:index %}`.

如果您是 Django 新手，我个人建议在包含 url 模式时忽略命名空间功能。如果您想区分不同应用程序中具有相同名称的两个视图，或者同一应用程序的两个不同实例，它可能会很有用，但在这里，它似乎只会给您带来不必要的混淆。另一方面，我总是建议[为你的 url patterns 命名](https://docs.djangoproject.com/en/dev/topics/http/urls/#naming-url-patterns)，这可以解决许多 url pattern 问题。

# iphone - 我应该为我的 iPhone 应用程序使用哪种样式

> ID：14908499
> 
> 赞同：2
> 
> 时间：2013-02-16T08:37:53.907
> 
> 标签：iphone, xcode, ios6

嗨，我是 IOS 编程的新手。我想制作一个小册子应用程序只读取没有用户输入的功能。我应该选择基于窗口或基于视图的样式。我下载了 Xcode，它没有基于窗口的应用程序，只有基于视图？你能告诉我学习应用程序开发的好教程吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T08:49:44.347

对于这种类型的应用程序，您应该选择基于页面的应用程序，请参见下图

![在此处输入图像描述](../Images/8520ad73249ca7b4a850d3ab506edc2d.png)

这提供了在现实世界中阅读时通过滑动来更改书籍或小册子等页面的基本结构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T08:56:05.177

您说您是 iOS 开发的新手；听起来您对 iOS 开发*很陌生？*

你有开发者账号吗？developer.apple.com 上免费提供的文档非常好。从那里开始肯定没有坏处。例如，以下是他们提供的一些指南：

立即开始开发 iOS 应用程序 [https://developer.apple.com/library/ios/#referencelibrary/GettingStarted/RoadMapiOS/chapters/Introduction.html](https://developer.apple.com/library/ios/#referencelibrary/GettingStarted/RoadMapiOS/chapters/Introduction.html)

iOS 编程指南 [https://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007072](https://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007072)

查看 iOS 控制器编程指南 [https://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007457](https://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007457)

开发者视频也很不错： [https ://developer.apple.com/videos/](https://developer.apple.com/videos/)

您需要登录您的开发者帐户以获取这些...

玩一些东西。查看一些示例代码。写一些基本的东西。在开始第一个应用程序之前获得一点动力可能是个好主意。发现一些最初的“哦，我明白它是如何工作的”......

希望有帮助。

# visual-c++ - 如何在富编辑控件中以表格格式打印数据

> ID：14908502
> 
> 赞同：0
> 
> 时间：2013-02-16T08:38:28.953
> 
> 标签：visual-c++, mfc

我是应用程序开发的新手。我创建了一个应用程序，该应用程序预计将在 RichEditControl2 中以表格格式显示以下数据，但我面临字符间距问题。

日期 MilsStone Sub 2012-03-12 需求/票证分析 需求理解 2.0 2012-03-14 设计开发/文档设计 3.0 2012-03-15 设计设计审查 3.0 2012-03-15 编码和单元测试开发 4.0

在这种情况下，我无法设置宽度（使用 AddDataToDisplayBox 中的 Format()）。请帮忙。

```
void Csdlc_verifierDlg::AddDataToDisplayBox(int index,COLORREF color, bool bold, bool italic, bool underline)

{
    CString strTemp;
    char buf[255]={0};
    record_data record = mRecData.GetAt(index); 
    strTemp.Format("%-15s%-50s%-50s%-5s%-15s",record.date,record.milestone,record.tasktype,record.effort,record.name);  
    AddLine(strTemp,NEWLINE,color,bold,italic,underline);
}

int Csdlc_verifierDlg::AddLine(CString str, int seperator, COLORREF color, bool bold, bool italic, bool underline)
{           
    int txtLen = mRichEditCtrl.GetTextLength();

    // Save number of lines before insertion of new text
    int nOldLines = mRichEditCtrl.GetLineCount();

    // Initialize character format structure
    CHARFORMAT cf = {0};
    cf.cbSize = sizeof(CHARFORMAT);
    cf.dwMask = CFM_COLOR|CFM_BOLD|CFM_ITALIC|CFM_UNDERLINE|CFM_CHARSET|CFM_SPACING; //Mask validates the active field in this case.
    cf.dwEffects = (bold ? CFE_BOLD : 0) | (italic ? CFE_ITALIC : 0) | (underline ? CFE_UNDERLINE : 0);
    cf.crTextColor = color;

    //Add newline character, if required.
    switch(seperator)
    {
    case NEWLINE:
        str.AppendChar('\n');
        break;

    case SPACE:
        str.AppendChar(' ');
        break;
    }
    //Insert data at the end.
    mRichEditCtrl.SetSel(txtLen, -1); // Set the cursor to the end of the text area and deselect everything.
    mRichEditCtrl.ReplaceSel(str); // Inserts when nothing is selected.

    // Apply formating to the just inserted text.
    mRichEditCtrl.SetSel(txtLen-(nOldLines-1), mRichEditCtrl.GetTextLength());
    mRichEditCtrl.SetSelectionCharFormat(cf);

    // Scroll by the number of lines just inserted
    mRichEditCtrl.LineScroll(mRichEditCtrl.GetLineCount() - nOldLines); 
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T18:42:59.387

要在 Rich Edit 控件中创建对齐的列，您需要创建一个固定间距字体，例如“Courier”，并使用 mRichEditCtrl.SetFont(...); 为控件设置该字体；

可以通过在列之间使用制表符'\t'来创建一些具有比例空间字体的列对齐效果，但这仅在每行文本具有大致相同的列文本宽度时才有效。如果一行使用完整的 50 个字符，而另一行只有几个字符，则单个 '\t' 将不足以对齐。对于这些情况，您需要进行额外的处理，根据列中的字符数计算要插入的制表符数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T01:00:20.010

如果您来自同一所学校，或者只是在不同的论坛上发布了相同的问题，请在[此处查看答案](http://www.codeproject.com/Questions/547188/howplustoplusprintplusdataplusinplustabularplusfor)

# php - 将变量和字符串一起存储在另一个 php 变量中

> ID：14908505
> 
> 赞同：0
> 
> 时间：2013-02-16T08:39:09.677
> 
> 标签：php, variables, sass

我试图将一个 sass 变量存储在一个 php 变量中，问题是两者都用前面的 $ 符号声明，因此混淆了 php parser 。像这样的一些事情：

```
$color = "$brandColor:#".$_POST["value"].";"; 
```

输出是：

注意：未定义变量：第 12 行 C:\xampp\htdocs\sassy\function.php 中的brandColor

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T08:42:04.190

尝试这个

```
$color = '$brandColor:#'.$_POST["value"].';'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T08:40:50.787

尝试使用单引号 ' 而不是双引号 "

# php - Magento：管理类别表单未显示

> ID：14908506
> 
> 赞同：5
> 
> 时间：2013-02-16T08:39:37.277
> 
> 标签：php, magento

我正在研究magento项目并且有一些问题，我在网上搜索了很多，但没有找到与此相关的任何内容。

1）在管理>目录>管理类别类别表格不显示，它显示一秒钟，然后在完全加载后消失。
2）我使用firebug查看html下是否有任何数据，但加载后会删除。
3) ajax 没有出现在管理员 firebug 控制台中。
4) 我从 firebug **NET**选项卡中获得了 ajax 发布 url，并在另一个选项卡中打开它并在那里找到响应。
5）单击左侧栏父类别加号子项也未加载
6）未加载任何类别...

如果有人有以前的经验或猜测发生了什么，请提供帮助。![在此处输入图像描述](../Images/13055762ec67d4ee00e243c40b12e679.png)

更新了 chrome 的错误屏幕 ![在此处输入图像描述](../Images/8923b4a63c4a6666247df2b29b448f4c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T05:33:40.707

你需要做一些基本的调试来回答这个问题。启用错误日志并检查页面上的错误，如果您还没有错误消息，这有望给您一条错误消息。检查系统日志

如果您有任何新模块，请暂时删除它们。尝试恢复到有效的旧版本代码，然后查看两个版本之间的变化。

尝试增加 PHP memory_limit 并检查一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T23:20:43.833

鉴于两个屏幕抓取都表明一个或多个索引已过时。从那些开始。

接下来删除这些文件夹，`/var/cache` `/var/session` `/var/full_page_cache`（在 Magento 根目录下）您需要登录删除`/var/session`

禁用任何最近安装的扩展或修改。

# c - 我们如何终止这个 C 代码？

> ID：14908507
> 
> 赞同：3
> 
> 时间：2013-02-16T08:39:38.260
> 
> 标签：c, eof

此 c 代码来自 K&R。即使我输入-1，它也会连续运行。我在 Fedora 17 中使用 Eclipse。这段代码有什么问题？它将如何终止？甚至 CTRL+D 也无法结束它！

```
#include<stdio.h>
int main(void)
{
    int c;

    c = getchar();
    while(c != EOF)
    {
        putchar(c);
        c = getchar();
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T08:40:26.907

> 它一直在运行，即使我输入 -1

在 Unix 上，您需要键入 Ctrl-D 来表示文件结束。

* * *

正如 Mooing Duck 指出的那样，[这似乎是 Eclipse 中的一个错误](https://stackoverflow.com/questions/4711098/passing-end-of-transmission-ctrl-d-character-in-eclipse-cdt-console)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T08:40:49.070

发送 EOF 字符。

在 Linux 的终端中使用 CTRL-D。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-17T00:25:19.073

原来是eclipse IDE的问题。在 Eclipse 之外，代码运行良好。unix 的 CTRL+D 是 EOF（内部为 -1）。eclipse中有一个解决方法。对于需要 EOF 的每个应用程序，转到 RUN --> RUN CONFIGURATION... --> 在主选项卡中向下滚动并取消选中“将进程输入和输出连接到终端”。现在运行代码。CTRL+D 应该可以工作。对于每个应用程序，您必须单独应用此技巧。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-22T23:18:41.270

在 Mac 中也是 Cmd + D。我很确定在 Windows 中是 Windows + D

# iphone - 应用程序终止时未调用 ABAddressBookRegisterExternalChangeCallback？

> ID：14908508
> 
> 赞同：1
> 
> 时间：2013-02-16T08:39:42.163
> 
> 标签：iphone, ios, abaddressbook

`ABAddressBookRegisterExternalChangeCallback`工作案例：

*   按主页按钮进入本机通讯录中的后台更改（添加，删除，更改），（打开应用程序）进入前台 `ExternalChangeCallback`接收。

`ABAddressBookRegisterExternalChangeCallback`不工作的情况：

*   双击主页按钮从扩展坞中杀死应用程序，`ExternalChangeCallback`启动应用程序时未收到本机通讯录中的更改

# c# - 评估代码隐藏

> ID：14908509
> 
> 赞同：2
> 
> 时间：2013-02-16T08:39:43.580
> 
> 标签：c#, asp.net, listview, eval, code-behind

在这段代码中，我尝试使用 ID 为“Label”的控件“Label”，这项工作但我也想从实体数据源中获取当前的“AuthorUserID”字段我知道我可以这样做，`<%# Eval("AuthorUserID" %>)` 但我想接受这个代码隐藏方法中的字段，在本例中为“ChatListView_ItemDataBound”方法。

如何在后面的代码中获取当前字段（“AuthorUserID”）？

代码隐藏：

```
protected void ChatListView_ItemDataBound(object sender, ListViewItemEventArgs e)
{
    if (e.Item.ItemType == ListViewItemType.DataItem)
    {
        if (e.Item.FindControl("Label") != null)
        {
        }
    }
} 
```

标记：

```
 <asp:ListView ID="ChatListView" runat="server" DataSourceID="EntityDataSourceUserPosts" OnItemDataBound="ChatListView_ItemDataBound">
    <ItemTemplate>
        <div class="post">
            <div class="postHeader">
                <h2><asp:Label ID="Label1" runat="server" 
                    Text= '<%# Eval("Title")  + " by " + this.GetUserFromPost((Guid?)Eval("AuthorUserID")) %>' ></asp:Label></h2>
                    <asp:Label ID="Label" runat="server" Text="" Visible="True"></asp:Label>
                <div class="dateTimePost">
                   <%# Eval("PostDate")%>
                </div>
            </div>
            <div class="postContent">
                <%# Eval("PostComment") %>
            </div>
        </div>
    </ItemTemplate>
</asp:ListView> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T09:05:34.327

尝试这个。将标记更改为

```
<asp:Label ID="Label" runat="server" 
        Text="" 
        Visible='<%# CheckIfAuthorIsUser(Eval("AuthorID")) %>'>
</asp:Label> 
```

在代码隐藏上，执行此操作

```
protected bool CheckIfAuthorIsUser(object authorID)
{
    if(authorID == null){ return false;}
    //else compare the passed authorid parameter with the logged in userid and return the appropriate boolean value

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T08:54:14.897

根据我们的评论，这段代码可能会有所帮助

在页面中创建一些属性，该属性将返回说 UserID 然后

```
<ItemTemplate>

  <asp:Label ID="lbl" Visible='<%# UserID == Convert.ToInt32(Eval("AuthorID")) %>' />

</ItemTemplate> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T09:02:28.650

尝试这个

将数据键添加到您的 ListView

```
<asp:ListView ID="ChatListView" runat="server" OnItemDataBound="ChatListView_ItemDataBound"
        DataKeyNames="AuthorUserID"> 
```

并在 Code behind 中获取该密钥

```
string AuthorUserID = ChatListView.DataKeys[e.Item.DataItemIndex].Value.ToString(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T08:59:46.700

您可以使用`ListViewItemEventArgs e`

```
protected void ChatListView_ItemDataBound(object sender, ListViewItemEventArgs e)
    {
        if (e.Item.ItemType == ListViewItemType.DataItem)
        {
            if (e.Item.FindControl("Label") != null)
            {
               var AuthorUserID = (string)e.Item.DataItem.e.Item.DataItem.AuthorUserID ;
            }
        }
    } 
```

**注意** 我不知道你是有界`class object`还是 a `datatable`，如果你有界一个数据表，你应该注意转换存储在`DataItem`

基本上`e.Item.DataItem`保存来自您的数据源的数据

欲了解更多信息，请查看：

*   [在 DataBound 事件上获取绑定到 ListView 的数据](https://stackoverflow.com/questions/858001/get-data-being-bound-to-listview-on-databound-event)
*   [http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.itemdatabound.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.itemdatabound.aspx)

# github - 如何在 GitHub Pages 上设置自定义 404 页面？

> ID：14908512
> 
> 赞同：9
> 
> 时间：2013-02-16T08:40:05.240
> 
> 标签：github, http-status-code-404, github-pages

我正在尝试在 Github Pages 上设置自定义 404 页面。

我在这里创建了一个页面：http: [//garemoko.github.com/TinCanCoUK/404.html](http://garemoko.github.com/TinCanCoUK/404.html)直接访问时有效。

但是，如果我访问[http://garemoko.github.com/TinCanCoUK/foo.html](http://garemoko.github.com/TinCanCoUK/foo.html) ，我会得到默认的 Github 404 页面。

有任何想法吗？我在 master 和 gh-pages 目录中都有 404.html。

**背景：** 这对于这个站点来说尤其重要，因为我正在从一个使用 : 在我无法复制的 url 中的 mediawiki 站点移动，所以我不得不更改我所有的 URL。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-16T08:58:32.350

看起来这仅在您使用自定义域时才有效

[https://help.github.com/articles/custom-404-pages](https://help.github.com/articles/custom-404-pages)

> 很高兴知道：自定义 404 仅在从 Pages 域的根目录提供服务时才有效，例如使用自定义域或用户页面存储库的项目。不使用自定义域的项目页面上的自定义 404 页面将不起作用。

请参阅[此](https://help.github.com/articles/setting-up-a-custom-domain-with-pages)设置自定义域

# java - DAO 接口

> ID：14908515
> 
> 赞同：0
> 
> 时间：2013-02-16T08:40:28.653
> 
> 标签：java, interface, dao, crud

如果为 DAO/存储库创建接口，您将如何处理实体？例如，如果 WidgetDaoImpl（实现接口 WidgetDao）对 Widget 对象进行 CRUD 操作，则接口和实体位于不同的模块中（例如，分别为“api”和“domain”）。模块 api 依赖于域是没有意义的，那么你将如何协调它呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T08:49:23.843

根据您的描述，您无法避免 DAO 接口和数据实体之间的依赖关系。数据实体描述了您正在使用的数据，因此将它们放在数据层接口上非常有意义。

# html - css伪选择器不适用于div

> ID：14908522
> 
> 赞同：0
> 
> 时间：2013-02-16T08:40:59.523
> 
> 标签：html, css, css-transitions

我试图在我的页面一侧创建一个固定菜单。但是，我希望它部分隐藏并仅在悬停时展开。我尝试使用 css 和伪选择器来做到这一点，但它不起作用。

HTML：

```
<div id="sideMenu">
    <ul>
        <li>Wide Screen</li> <!--turn sidebar on/off-->
        <li>Random Border</li> <!--randomize vidcontain border-->
        <li>Control Bar</li> 
    </ul>
</div> 
```

CSS：

```
#sideMenu{
    position: fixed;
    left: -95px;
    top: 250px;
    height:100px;
    width:100px;
    background-color: #D4D048;
    z-index:-1;
    display:block;
}
#sideMenu:hover{
   left: 0px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T08:54:28.390

div 上的 Z-index 阻止了 div 识别它被悬停，因此不应用与悬停有关的规则。增加 z-index 位置解决了这个问题。

# javascript - 我可以默认隐藏一个 div 直到 JavaScript 调用淡入它吗？

> ID：14908524
> 
> 赞同：1
> 
> 时间：2013-02-16T08:41:07.340
> 
> 标签：javascript, css

我的页面上有一个 div 并使用 JavaScript 隐藏它，直到用户单击文本字段。这将淡入div。我遇到的问题是页面加载时 div 快速在页面上闪烁然后隐藏。有没有一种方法可以将我的 div 设置为默认隐藏，然后只有在用户单击文本区域时才会出现 div？目前它会在页面加载然后隐藏时闪烁一秒钟。

Iv'e 尝试将 CSS 样式放入，`display:none;`但这意味着 div 根本不会淡入。

```
<script>
$(".search_prompt").hide();
$(function() {
    $(".search_prompt").hide();
    var focusin_flag = false,
    focusout_flag = false;
    $("#text").focusin(function() {
        if (!focusin_flag) {
            $(".search_prompt").show();
            focusin_flag = true;
        }
    }).focusout(function () {
        if (!focusout_flag ) {
            $(".search_prompt").hide();
            focusout_flag = true;
        } 
        function timeout_init() {
            setTimeout('search_prompt()', 2000);

        }

    });
});        
</script> 
```

这是我的CSS：

```
.search_intro {
  font-family: Arial, Helvetica, sans-serif;
  font-size: 11px;
  color: #181469;
  background-image: url(../img/icons/info-icon.png);
  background-repeat: no-repeat;
  background-position: 12px center;
  border: #CCC 1px solid;
  margin-top: 87px;
  margin-left:460px;
  position: absolute;
  width:198px;
  height:80px;
  background-color:#FFF;
  -moz-box-shadow: 0px 1px 8px #CCC;
  -webkit-box-shadow: 0px 1px 8px #CCC;
  box-shadow: 0px 1px 8px #030303;
  z-index:100;
  display:none;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T08:42:13.787

它可能正在闪烁，因为尚未加载外部 .css。尝试通过内联 css 隐藏它：

```
<div style="display: none">...</div> 
```

所以最后在加载其余css时它是不可见的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-17T06:16:11.080

You can try this:

```
function myFunction() {
  var demoDiv = document.getElementById("demo-div");
  demoDiv.classList.remove("hidden");
  demoDiv.classList.add("not-hidden");
}
```

```
.hidden {
  display: none;
}

.not-hidden {
  margin: 10px;
  padding: 10px;
  border: 1px solid black;
  text-align: center;
  display: block;
  animation-name: example;
  animation-duration: 2s;
}

@keyframes example {
  0% { opacity: 0; }
  25% { opacity: 0.25; }
  50% { opacity: 0.5; }
  75% { opacity: 0.75; }
  100% { opacity: 1; }
}
```

```
<button onclick="myFunction()">View Div</button>

<div class="hidden" id="demo-div">
  <img src="https://www.gstatic.com/webp/gallery/1.sm.jpg">
  <p>Ut pharetra sollicitudin lobortis. Mauris viverra eros sed diam tristique ornare. Ut commodo iaculis velit non ullamcorper. Suspendisse ultricies, lectus finibus commodo ultricies, urna nibh porta justo, sit amet ultricies sapien sapien non dui.</p>
</div>
```

# android - 如何为摩托罗拉 Atrix 2 配置 ADB

> ID：14908528
> 
> 赞同：2
> 
> 时间：2013-02-16T08:41:32.867
> 
> 标签：android, installation, driver, adb, motorola

我正在尝试为 android 开发安装 OEM USB 驱动程序。但是当我在命令提示符下执行 adb devices 时，我的设备没有列出。也不会在 DDMS 中列出。我猜我的系统（Windows 7 64 位）不是检测手机（摩托罗拉 Atrix 2，ICS 4.0.4）作为安卓手机。
当我转到设备管理器时，我看不到任何选项，例如 Android 手机和 Android 复合设备管理器。我从摩托罗拉网站安装了驱动程序。这是[驱动程序链接](https://motorola-global-portal.custhelp.com/app/answers/detail/a_id/88481)。我尝试安装 pdanet+，它说没有检测到安卓手机。我正在使用摩托罗拉电缆并在 MTA USB 模式下使用手机。

当我尝试从设备管理器安装或更新驱动程序时，输入 \extras\google\usb_driver\ 文件夹，它说驱动程序是最新的。（推荐方式[http://developer.android.com/tools/extras/ oem-usb.html](http://developer.android.com/tools/extras/oem-usb.html) ) 任何想法或建议如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-23T05:40:44.030

是的。它在我完成出厂/重置后工作。我按照这些说明进行操作。

[从这个论坛](http://forum.xda-developers.com/showthread.php?t=1784689)复制

我最初也有同样的问题。我做了一些研究，并在 Moto 支持论坛上找到了一个帖子，其中使用官方 Razr ICS 的人遇到了同样的问题。最终为我解决的是：

- 卸载 A2 的所有驱动程序，重新启动

-安装这些驱动程序，重新启动

-恢复出厂设置（设置->隐私->恢复出厂设置，或类似的东西）。是的，我知道这很烦人，但这是必要的。

- 手机重启后，只需登录谷歌即可。不要卸载任何应用程序或做类似的事情。也不要启用 USB 调试。

- 连接所有 3 种不同的连接模式。等待驱动程序每次下载。如果驱动程序下载失败，请卸载它（不是 MotoHelper），重新启动计算机，在手机上启用未知来源的安装，然后重复此步骤。- 一旦你安装了所有这些驱动程序，是时候用 ADB 重新安装它们了！启用 USB 调试并重复上一步 - 安装所有驱动程序后，重新启动以进行良好的测量。但是你现在应该很好地做你想做的任何事情。

希望这可以帮助。我知道这是一种非常迂回的方式，但它有效:.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-17T09:26:28.073

我再次格式化我的手机，它工作。

# android - Android WebView 未从缓存中加载第二页

> ID：14908533
> 
> 赞同：12
> 
> 时间：2013-02-16T08:42:58.493
> 
> 标签：android, caching, webview

我有一个仅包含一个网站的 Android 应用程序。我希望该应用程序缓存网站页面以供离线使用。

我正在做一个简单的测试以查看缓存是否正常工作，但不幸的是，它无法加载我之前在离线模式下以在线模式加载的页面。为了让事情更清楚，我在在线模式下加载了以下 2 页。

```
webView.loadUrl("http://www.bmimobile.co.uk/why-bmi.php", getHeaders());
webView.loadUrl("http://www.bmimobile.co.uk/", getHeaders()); 
```

.

我希望将“why-bmi.php”页面以及后续页面[http://www.bmimobile.co.uk/](http://www.bmimobile.co.uk/)加载到缓存中。后一页上有一个指向第一页的链接。如果我然后退出应用程序并关闭网络适配器然后返回应用程序“ [http://www.bmimobile.co.uk/](http://www.bmimobile.co.uk/) ”页面确实显示但是当我单击“why-bmi”链接时页面不显示。我简短的吐司消息显示“错误加载页面”。

谁能告诉我为什么 webview 没有缓存加载的页面以供以后离线使用？

这是主要活动，我已经扩展了定义 appcachepath 的 Application 对象。

提前致谢

马特

```
package uk.bmi.mobile;

import java.io.File;
import java.util.HashMap;
import java.util.Map;
import android.app.Activity;
import android.content.Context;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.os.Bundle;
import android.util.Log;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.webkit.WebViewClient;

public class MainActivity extends Activity {

    private WebView webView;
    private static final String TAG = MainActivity.class.getSimpleName();
    ApplicationExt bmiAppObj;

    //instruct server to set it's headers to make resources cachable
    private Map<String, String> getHeaders() {
        Map<String, String> headers = new HashMap<String, String>();
        headers.put("IS_ALEX_APP", "1");
        return headers;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Log.e(TAG, "in onCreate in mainactivity");

    }      //end of oncreate

    private boolean isNetworkAvailable() {
        ConnectivityManager connectivityManager = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo activeNetworkInfo = connectivityManager.getActiveNetworkInfo();
        return activeNetworkInfo != null;
    }

    @Override
    protected void onResume() {
        super.onResume();

        Log.e(TAG, "in onResume in mainactivity");
        webView = (WebView)findViewById(R.id.webView1);
        bmiAppObj = (ApplicationExt)getApplication();

        if(isNetworkAvailable() == true){

            webView.getSettings().setSupportZoom(true);
            webView.getSettings().setBuiltInZoomControls(true);
            webView.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);
            webView.setScrollbarFadingEnabled(true);
            webView.getSettings().setLoadsImagesAutomatically(true);
            webView.getSettings().setDomStorageEnabled(true);
            webView.getSettings().setAppCacheEnabled(true);
            // Set cache size to 8 mb by default. should be more than enough
            webView.getSettings().setAppCacheMaxSize(1024*1024*8);
            // This next one is crazy. It's the DEFAULT location for your app's cache
            // But it didn't work for me without this line.
            // UPDATE: no hardcoded path. Thanks to Kevin Hawkins
            String appCachePath = getApplicationContext().getCacheDir().getAbsolutePath();
            Log.e(TAG, "appCachePath = " + appCachePath);
            webView.getSettings().setAppCachePath(appCachePath);
            webView.getSettings().setAllowFileAccess(true);

            webView.getSettings().setJavaScriptEnabled(true);

            // Load the URLs inside the WebView, not in the external web browser
            webView.setWebViewClient(new WebViewClient());  
            webView.getSettings().setCacheMode(WebSettings.LOAD_DEFAULT);

            webView.loadUrl("http://www.bmimobile.co.uk/why-bmi.php", getHeaders());
            webView.loadUrl("http://www.bmimobile.co.uk/", getHeaders());

            }else{

                webView.getSettings().setSupportZoom(true);
                webView.getSettings().setBuiltInZoomControls(true);
                webView.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);
                webView.setScrollbarFadingEnabled(true);
                webView.getSettings().setLoadsImagesAutomatically(true);
                webView.getSettings().setDomStorageEnabled(true);
                webView.getSettings().setAppCacheEnabled(true);
                // Set cache size to 8 mb by default. should be more than enough
                webView.getSettings().setAppCacheMaxSize(1024*1024*8);
                // This next one is crazy. It's the DEFAULT location for your app's cache
                // But it didn't work for me without this line.
                // UPDATE: no hardcoded path. Thanks to Kevin Hawkins
                String appCachePath = getApplicationContext().getCacheDir().getAbsolutePath();
                Log.e(TAG, "appCachePath = " + appCachePath);
                webView.getSettings().setAppCachePath(appCachePath);
                webView.getSettings().setAllowFileAccess(true);

                webView.getSettings().setJavaScriptEnabled(true);

                // Load the URLs inside the WebView, not in the external web browser
                webView.setWebViewClient(new WebViewClient());  

                webView.getSettings().setCacheMode(WebSettings.LOAD_CACHE_ONLY);

                webView.loadUrl("http://www.bmimobile.co.uk/", getHeaders());

            }

    }

    @Override
    public File getCacheDir()
    {
        // NOTE: this method is used in Android 2.1
        Log.e(TAG, "getcachedir");
        return getApplicationContext().getCacheDir();
    }

    @Override
    protected void onSaveInstanceState(Bundle outState)
    {
        super.onSaveInstanceState(outState);

        // Save the state of the WebView
        webView.saveState(outState);
    }

    @Override
    protected void onRestoreInstanceState(Bundle savedInstanceState)
    {
        super.onRestoreInstanceState(savedInstanceState);

        // Restore the state of the WebView
        webView.restoreState(savedInstanceState);
    }

}//end of mainActivity 
```

.

```
package uk.bmi.mobile;

import java.io.File;

import android.app.Application;
import android.os.Environment;
import android.util.Log;

public class ApplicationExt extends Application
{
    private static final String TAG = ApplicationExt.class.getSimpleName();
    // NOTE: the content of this path will be deleted
    //       when the application is uninstalled (Android 2.2 and higher)
    protected File extStorageAppBasePath;

    protected File extStorageAppCachePath;

    Webservice webservice;
    BmiDB bmiDb;

    @Override
    public void onCreate()
    {
        super.onCreate();
         Log.e(TAG, "inside appext");

         webservice = new Webservice(this);
         bmiDb = new BmiDB(this);
        // Check if the external storage is writeable
        if (Environment.MEDIA_MOUNTED.equals(Environment.getExternalStorageState()))
        {

            // Retrieve the base path for the application in the external storage
            File externalStorageDir = Environment.getExternalStorageDirectory();

            if (externalStorageDir != null)
            {
                // {SD_PATH}/Android/data/com.devahead.androidwebviewcacheonsd
                extStorageAppBasePath = new File(externalStorageDir.getAbsolutePath() +
                    File.separator + "Android" + File.separator + "data" +
                    File.separator + getPackageName());
            }

            if (extStorageAppBasePath != null)
            {
                // {SD_PATH}/Android/data/com.devahead.androidwebviewcacheonsd/cache
                extStorageAppCachePath = new File(extStorageAppBasePath.getAbsolutePath() +
                    File.separator + "cache");

                boolean isCachePathAvailable = true;

                if (!extStorageAppCachePath.exists())
                {
                    // Create the cache path on the external storage
                    isCachePathAvailable = extStorageAppCachePath.mkdirs();
                }

                if (!isCachePathAvailable)
                {
                    // Unable to create the cache path
                    extStorageAppCachePath = null;
                }
            }
        }
    }//end of onCreate

    @Override
    public File getCacheDir()
    {
        // NOTE: this method is used in Android 2.2 and higher

        if (extStorageAppCachePath != null)
        {
            // Use the external storage for the cache
            Log.e(TAG, "extStorageAppCachePath = " + extStorageAppCachePath);
            return extStorageAppCachePath;
        }
        else
        {
            // /data/data/com.devahead.androidwebviewcacheonsd/cache
            return super.getCacheDir();
        }
    }
} 
```

.这是应用程序首次以在线模式加载时的日志记录

```
02-16 08:38:52.744: I/NONPRIME(8871): <CallBackProxy> Send to WebViewClient.
02-16 08:38:56.314: D/skia(8871): ----- started: [1 325] http://www.bmimobile.co.uk/images/mobile/bg-index.png
02-16 08:38:56.499: D/skia(8871): ----- started: [1 64] http://www.bmimobile.co.uk/CubeCore/modules/cubeMobile/images/bg-black-bar.png
02-16 08:38:56.509: D/skia(8871): ----- started: [26 20] http://www.bmimobile.co.uk/images/mobile/home-icon.png
02-16 08:38:56.529: D/skia(8871): ----- started: [275 189] http://www.bmimobile.co.uk/images/mobile/home-img.png
02-16 08:38:56.549: D/skia(8871): ----- started: [320 450] http://www.bmimobile.co.uk/images/mobile/welcome/bg-welcome.jpg
02-16 08:38:56.554: D/skia(8871): ----- started: [270 38] http://www.bmimobile.co.uk/images/mobile/welcome/next.png
02-16 08:38:56.584: D/skia(8871): ----- started: [16 17] http://www.bmimobile.co.uk/images/mobile/why.png
02-16 08:38:56.584: D/skia(8871): ----- started: [18 17] http://www.bmimobile.co.uk/images/mobile/services.png
02-16 08:38:56.584: D/skia(8871): ----- started: [20 15] http://www.bmimobile.co.uk/images/mobile/visit.png
02-16 08:38:56.589: D/skia(8871): ----- started: [20 15] http://www.bmimobile.co.uk/images/mobile/consultants.png
02-16 08:38:56.589: D/skia(8871): ----- started: [13 19] http://www.bmimobile.co.uk/images/mobile/contact.png 
```

.

这是我退出应用程序关闭网络适配器然后以离线模式回到应用程序时的日志记录。

```
02-16 08:41:37.799: E/MainActivity(8871): in onResume in mainactivity
02-16 08:41:37.804: E/ApplicationExt(8871): extStorageAppCachePath = /storage/sdcard0/Android/data/uk.bmi.mobile/cache
02-16 08:41:37.804: E/MainActivity(8871): appCachePath = /storage/sdcard0/Android/data/uk.bmi.mobile/cache
02-16 08:41:37.834: W/dalvikvm(8871): disableGcForExternalAlloc: false 
```

[edit1] 实际上，在仔细检查日志记录时，它似乎在在线模式下加载时发生了变化。下面是 omline 模式下的 logcat。缓存存储似乎有问题。

```
02-19 15:16:10.497: E/ApplicationExt(5467): inside appext
02-19 15:16:10.687: E/ApplicationExt(5467): extStorageAppCachePath = /storage/sdcard0/Android/data/uk.bmi.mobile/cache
02-19 15:16:10.722: E/MainActivity(5467): in onCreate in mainactivity
02-19 15:16:10.727: E/MainActivity(5467): in onResume in mainactivity
02-19 15:16:10.737: E/ApplicationExt(5467): extStorageAppCachePath = /storage/sdcard0/Android/data/uk.bmi.mobile/cache
02-19 15:16:10.737: E/MainActivity(5467): appCachePath = /storage/sdcard0/Android/data/uk.bmi.mobile/cache
02-19 15:16:10.792: E/(5467): file /data/data/com.nvidia.NvCPLSvc/files/driverlist.txt: not found!
02-19 15:16:10.792: I/(5467): Attempting to load EGL implementation /system/lib//egl/libEGL_tegra_impl
02-19 15:16:10.807: I/(5467): Loaded EGL implementation /system/lib//egl/libEGL_tegra_impl
02-19 15:16:10.842: I/(5467): Loading GLESv2 implementation /system/lib//egl/libGLESv2_tegra_impl
02-19 15:16:10.882: E/SQLiteLog(5467): (1) no such table: CacheGroups
02-19 15:16:10.882: D/WebKit(5467): ERROR: 
02-19 15:16:10.882: D/WebKit(5467): Application Cache Storage: failed to execute statement "DELETE FROM CacheGroups" error "no such table: CacheGroups"
02-19 15:16:10.882: D/WebKit(5467): external/webkit/Source/WebCore/loader/appcache/ApplicationCacheStorage.cpp(558) : bool WebCore::ApplicationCacheStorage::executeSQLCommand(const WTF::String&)
02-19 15:16:10.882: E/SQLiteLog(5467): (1) no such table: Caches
02-19 15:16:10.882: D/WebKit(5467): ERROR: 
02-19 15:16:10.882: D/WebKit(5467): Application Cache Storage: failed to execute statement "DELETE FROM Caches" error "no such table: Caches"
02-19 15:16:10.882: D/WebKit(5467): external/webkit/Source/WebCore/loader/appcache/ApplicationCacheStorage.cpp(558) : bool WebCore::ApplicationCacheStorage::executeSQLCommand(const WTF::String&)
02-19 15:16:10.882: E/SQLiteLog(5467): (1) no such table: Origins
02-19 15:16:10.882: D/WebKit(5467): ERROR: 
02-19 15:16:10.882: D/WebKit(5467): Application Cache Storage: failed to execute statement "DELETE FROM Origins" error "no such table: Origins"
02-19 15:16:10.882: D/WebKit(5467): external/webkit/Source/WebCore/loader/appcache/ApplicationCacheStorage.cpp(558) : bool WebCore::ApplicationCacheStorage::executeSQLCommand(const WTF::String&)
02-19 15:16:10.882: E/SQLiteLog(5467): (1) no such table: DeletedCacheResources
02-19 15:16:10.992: E/ApplicationExt(5467): extStorageAppCachePath = /storage/sdcard0/Android/data/uk.bmi.mobile/cache
02-19 15:16:11.022: W/dalvikvm(5467): disableGcForExternalAlloc: false
02-19 15:16:13.787: I/NONPRIME(5467): <CallBackProxy> Send to WebViewClient.
02-19 15:16:21.427: D/skia(5467): ----- started: [1 325] http://www.bmimobile.co.uk/images/mobile/bg-index.png
02-19 15:16:21.517: D/skia(5467): ----- started: [1 64] http://www.bmimobile.co.uk/CubeCore/modules/cubeMobile/images/bg-black-bar.png
02-19 15:16:21.542: D/skia(5467): ----- started: [26 20] http://www.bmimobile.co.uk/images/mobile/home-icon.png
02-19 15:16:21.577: D/skia(5467): ----- started: [275 189] http://www.bmimobile.co.uk/images/mobile/home-img.png
02-19 15:16:21.597: D/skia(5467): ----- started: [270 38] http://www.bmimobile.co.uk/images/mobile/welcome/next.png
02-19 15:16:21.677: D/skia(5467): ----- started: [16 17] http://www.bmimobile.co.uk/images/mobile/why.png
02-19 15:16:21.677: D/skia(5467): ----- started: [20 15] http://www.bmimobile.co.uk/images/mobile/visit.png
02-19 15:16:21.677: D/skia(5467): ----- started: [18 17] http://www.bmimobile.co.uk/images/mobile/services.png
02-19 15:16:21.687: D/skia(5467): ----- started: [20 15] http://www.bmimobile.co.uk/images/mobile/consultants.png
02-19 15:16:21.687: D/skia(5467): ----- started: [13 19] http://www.bmimobile.co.uk/images/mobile/contact.png
02-19 15:16:21.692: D/skia(5467): ----- started: [320 450] http://www.bmimobile.co.uk/images/mobile/welcome/bg-welcome.jpg 
```

.

[注意] 如果我在在线模式下单击why-bmi按钮然后退出应用程序，请关闭适配器然后再次单击why-bmi按钮然后它会显示“错误加载页面”消息。

但是，如果我更改为以下网址，则会显示我的 SO 页面。如果我单击指向我的赏金页面（此页面）的链接，然后脱机，SO 页面将按预期显示，但如果您在离线模式下单击赏金链接，则它会显示。所以 SO 站点和 bmi 站点之间存在差异。

```
if(isNetworkAvailable() == true){

            webView.getSettings().setSupportZoom(true);
            webView.getSettings().setBuiltInZoomControls(true);
            webView.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);
            webView.setScrollbarFadingEnabled(true);
            webView.getSettings().setLoadsImagesAutomatically(true);
            webView.getSettings().setDomStorageEnabled(true);
            webView.getSettings().setAppCacheEnabled(true);
            // Set cache size to 8 mb by default. should be more than enough
            webView.getSettings().setAppCacheMaxSize(1024*1024*8);
            // This next one is crazy. It's the DEFAULT location for your app's cache
            // But it didn't work for me without this line.
            // UPDATE: no hardcoded path. Thanks to Kevin Hawkins
            String appCachePath = getApplicationContext().getCacheDir().getAbsolutePath();
            Log.e(TAG, "appCachePath = " + appCachePath);
            webView.getSettings().setAppCachePath(appCachePath);
            webView.getSettings().setAllowFileAccess(true);

            webView.getSettings().setJavaScriptEnabled(true);

            // Load the URLs inside the WebView, not in the external web browser
            webView.setWebViewClient(new WebViewClient());  
            webView.getSettings().setCacheMode(WebSettings.LOAD_DEFAULT);

            //webView.loadUrl("http://www.bmimobile.co.uk/why-bmi.php", getHeaders());
            //webView.loadUrl("http://www.bmimobile.co.uk/", getHeaders());

            webView.loadUrl("http://stackoverflow.com/users/532462/turtleboy?tab=bounties");
            webView.loadUrl("http://stackoverflow.com/users/532462/turtleboy");
            }else{

                webView.getSettings().setSupportZoom(true);
                webView.getSettings().setBuiltInZoomControls(true);
                webView.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);
                webView.setScrollbarFadingEnabled(true);
                webView.getSettings().setLoadsImagesAutomatically(true);
                webView.getSettings().setDomStorageEnabled(true);
                webView.getSettings().setAppCacheEnabled(true);
                // Set cache size to 8 mb by default. should be more than enough
                webView.getSettings().setAppCacheMaxSize(1024*1024*8);
                // This next one is crazy. It's the DEFAULT location for your app's cache
                // But it didn't work for me without this line.
                // UPDATE: no hardcoded path. Thanks to Kevin Hawkins
                String appCachePath = getApplicationContext().getCacheDir().getAbsolutePath();
                Log.e(TAG, "appCachePath = " + appCachePath);
                webView.getSettings().setAppCachePath(appCachePath);
                webView.getSettings().setAllowFileAccess(true);

                webView.getSettings().setJavaScriptEnabled(true);

                // Load the URLs inside the WebView, not in the external web browser
                webView.setWebViewClient(new WebViewClient());  

                webView.getSettings().setCacheMode(WebSettings.LOAD_CACHE_ONLY);

               // webView.loadUrl("http://www.bmimobile.co.uk/", getHeaders());
                webView.loadUrl("http://stackoverflow.com/users/532462/turtleboy");

            }

    } 
```

[编辑2]

```
 <?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="uk.bmi.mobile"
        android:versionCode="5"
        android:versionName="1.0.4" >

        <!-- GCM requires Android SDK version 2.2 (API level <img src="http://www.androidhive.info/wp-includes/images/smilies/icon_cool.gif" alt="8)" class="wp-smiley"> or above. -->
        <uses-sdk
            android:minSdkVersion="8"
            android:targetSdkVersion="16" />

        <!-- GCM connects to Internet Services. -->
        <uses-permission android:name="android.permission.INTERNET" />

        <!-- GCM requires a Google account. -->
        <uses-permission android:name="android.permission.GET_ACCOUNTS" />

        <!-- Keeps the processor from sleeping when a message is received. -->
        <uses-permission android:name="android.permission.WAKE_LOCK" />

        <!-- Creates a custom permission so only this app can receive its messages. -->
        <permission
            android:name="uk.bmi.mobile.permission.C2D_MESSAGE"
            android:protectionLevel="signature" />

        <uses-permission android:name="uk.bmi.mobile.permission.C2D_MESSAGE" />

        <!-- This app has permission to register and receive data message. -->
        <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />

        <!-- Network State Permissions to detect Internet status -->
        <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

        <!-- Permission to vibrate -->
        <uses-permission android:name="android.permission.VIBRATE" />

    <uses-permission android:name="android.permisson.ACCESS_WIFI_STATE"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"/>

        <!-- Main activity. -->
        <application
            android:icon="@drawable/bmi_icon"
            android:label="@string/app_name"
            android:name="uk.bmi.mobile.ApplicationExt" >
            <!-- Register Activity -->
            <activity
                android:name=".RegisterActivity"
                android:label="@string/app_name" >
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />

                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>

            <!-- Main Activity -->
            <activity
                android:name="uk.bmi.mobile.MainActivity"
                android:configChanges="orientation|keyboardHidden"
                android:label="@string/app_name"
                 android:screenOrientation="portrait" >
            </activity>

            <receiver
                android:name="com.google.android.gcm.GCMBroadcastReceiver"
                android:permission="com.google.android.c2dm.permission.SEND" >
                <intent-filter>

                    <!-- Receives the actual messages. -->
                    <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                    <!-- Receives the registration id. -->
                    <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

                    <category android:name="uk.bmi.mobile" />
                </intent-filter>
            </receiver>

            <service android:name="uk.bmi.mobile.GCMIntentService" />
        </application>

    </manifest> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-22T01:19:56.880

这不是您问题的确切答案，因为您询问的是 webview 缓存。但是，它可以达到相同的结果。

```
// saving page from web to file 
File file = new File(this.getExternalFilesDir(null), "fileName.html");
FileUtils.copyURLToFile(new URL("http://www.bmimobile.co.uk/why-bmi.php"), file);

// loading saved file in webview
webview.loadUrl("file://" + file.getPath()); 
```

这是一种更灵活的方法，因为您可以控制加载、保存等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T05:09:04.823

另一个非常灵活和强大的选项是使用 HTML5 来管理应用程序中的缓存。

看看[http://diveintohtml5.info/offline.html](http://diveintohtml5.info/offline.html)

您可以简单地在您的应用程序中启用缓存并从 Web 端本身管理缓存。

此致

阿曼高塔姆

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T11:21:56.380

这是可行的，它的小傻瓜。URL中有一个重定向来自

`http://www.bmimobile.co.uk/` 至 `http://www.bmimobile.co.uk/index.php`

你应该试试

> webView.loadUrl(" [http://www.bmimobile.co.uk/why-bmi.php](http://www.bmimobile.co.uk/why-bmi.php) ", getHeaders()); webView.loadUrl(" [http://www.bmimobile.co.uk/index.php](http://www.bmimobile.co.uk/index.php) ", getHeaders());

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T16:16:56.407

也许解决您的问题的方法是在加载 webview 的同时发出 HTTP get 请求。

获取请求的结果可以持久存储在 sharedpreferences 中的字符串中，它将是您的 php 呈现的 HTML。

在您的 android 生命周期中，您可以确定应用程序是否离线，如果离线，您可以从字符串加载网站的最后保存版本

`webview.loadData(yourSavedString, "text/html", "UTF-8");`

虽然如果有图像，您将不得不做出额外的考虑，但如果图像不是动态的，您可以将它们存储在应用程序的资产文件夹中，并将保存的字符串中的 URL 替换为资产位置。

虽然它不能解决您的 webview 不缓存的原因，但它会实现相同的最终目标或离线查看页面

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-23T18:50:30.910

有时 WebView 不能被原生缓存。如果页面标题包含以下字段，WebView 将无法缓存该页面的内容。

```
Cache-Control: no-store, no-cache
Pragma: no-cache 
```

在这种情况下，您将不得不修改服务器上的页面属性来解决缓存问题。

# antlr3 - antlrworks 中 Lexer.java 的 specialStateTransition(int s, IntStream _input) 方法中的代码太大

> ID：14908535
> 
> 赞同：0
> 
> 时间：2013-02-16T08:43:17.487
> 
> 标签：antlr3, antlrworks

我是 Antlrworks 的新手。我正在编写组合语法文件来解析 XML 文件。XML 文件很大很复杂。

语法中定义了许多词法分析器规则。Antlrworks 1.4.3 生成代码没有任何问题。但是当我使用它调试代码时，会产生以下错误。

```
 [13:29:42] D:\Antlr\Grammer Files\output\OrigionalSampleCDFXMLLexer.java:6472: code too large
[13:29:42]         public int specialStateTransition(int s, IntStream _input) throws NoViableAltException {
[13:29:42]                    ^
[13:29:42] 1 error. 
```

以下是我的组合语法文件中定义的词法分析器规则：

```
DATEFORMATE : DIGIT DIGIT DIGIT DIGIT '-' DIGIT DIGIT '-' DIGIT DIGIT;

TIMEFORMATE : 'T' ( DIGIT DIGIT ':'  DIGIT DIGIT ':'  DIGIT DIGIT );

CATEGORY_SW_CS_COLLECTION  :     'FEATURE' | 'COLLECTION'; // These are fixed

CATEGORY_SW_INSTANCE  :  'VALUE' | 'DEPENDENT_VALUE' | 'BOOLEAN' |'ASCII' | 'VAL_BLK' | 'CURVE' | 
                     'MAP' | 'STRUCTURE' | 'UNION' |
                     'VALUE_ARRAY' | 'CURVE_ARRAY' |'MAP_ARRAY' | 'STRUCTURE_ARRAY';

CATEGORY_SW_AXIS_CONT  :     'FIX_AXIS' | 'STD_AXIS' ;

CATEGORY_COMMON_IN_AXIS_INSTANCE
    :   'CURVE_AXIS' |'RES_AXIS' | 'COM_AXIS' ;

CATEGORY_SW_INSTANCE_TREE  : 'VCD' | 'NO_VCD' ; 

CATEGORY_MSRSW  : 'CDF20' ; 

FLAG_VALUES
    :   'TRUE' | 'FALSE';

ATTR_EQ :  {tagMode}? => '=' ;

PCDATA : {!tagMode}? =>  (~'<')* ; 

//NMTOKENS: {tagMode}? => ( '\"' (NMTOKEN ' ')* '\"' | '\''(NMTOKEN ' ')* '\'') ;

NMTOKEN :   {tagMode}? => ( '\"' NMTOKEN_CHAR* '\"' | '\''NMTOKEN_CHAR* '\'');

ID  : {tagMode}? => ( '\"' LETTER (LETTER | DIGIT | '_' )* '\"'
                | '\''  LETTER (LETTER | DIGIT | '_' )* '\''
                )
            ;

CDATA :
        {tagMode}? =>  ( '\"' (~('\"\'&<>'))*  '\"'
        | '\'' (~('\"\'&<>'))* '\''
        )
    ;

TAG_START_OPEN : '<' {tagMode = true;};

TAG_END_OPEN :   '</' {tagMode = true;};

TAG_CLOSE : {tagMode}? => '>' {tagMode = false;};

TAG_EMPTY_CLOSE : {tagMode}? => '/>' {tagMode = false;};

fragment NMTOKEN_CHAR: (LETTER | DIGIT | '_' | '-' | '.' | ':');

fragment LETTER : 'A'..'Z' | 'a'..'z' | 'ü'; 

//fragment Exponent : ('e'|'E') ('+'|'-')? (DIGIT)+ ;

fragment DIGIT : '0'..'9';

WS  :  {tagMode}? => (' ' | '\t'| '\r' | '\n')+ {$channel=99;} ; 
```

当然，我在同一个文件中有解析器规则；-)。

通过用“*”替换大部分“+”来纠正词法分析器规则不起作用。

词法分析器规则有问题吗？？？？

> 另一个问题：

尝试将一些词法分析器规则从组合语法文件移动到另一个词法分析器语法文件。在这种情况下，将词法分析器语法导入组合语法会出现问题。它说“Lexer 文件名”未定义修复想法“创建语法文件”。

```
grammar SampleCDFXML;

options {
language = Java;
output=AST;
tokenVocab=XMLBaseLexer; 

}

import XMLBaseLexer ; // Here it says undefined import "XMLBaseLexer" 
```

'XMLBaseLexer' 是词法分析器语法，它具有原始组合语法中的一些词法分析器规则。

我在许多网站上搜索了导入问题，但没有得到答案。

请有人提出解决问题的想法。

很感谢任何形式的帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:53:31.687

有一些更新。如果我在 Antlrworks2 中运行相同的组合语法，它就可以工作。需要进行一些语法修改才能使其在 Antlrworks2 上运行。例如：`{$channel=99;}`被替换`->channel(99)`。

谢谢！！

# java - Wicket 面板中的 Ajax 不起作用

> ID：14908536
> 
> 赞同：0
> 
> 时间：2013-02-16T08:43:20.233
> 
> 标签：java, ajax, wicket

我的页面上有一些带有一个文本字段的面板。我想为我的所有文本字段添加 ajax 行为，但它仅适用于第一个文本字段 - 仅当我更改 ajax 请求发送的第一个文本字段时。

它们必须是面板，因为我想改进这些添加其他组件。

听到是我的代码。

```
public class TestPage extends WebPage {

    private BigDecimal test1 = new BigDecimal("1");
    private BigDecimal test2 = new BigDecimal("2");
    private BigDecimal test3 = new BigDecimal("3");
    private BigDecimal test4 = new BigDecimal("4");

    public TestPage() {
        Form<?> form = new Form<Void>("form");
        add(form);

        form.add(new TestPanel("test1", test1));
        form.add(new TestPanel("test2", test2));
        form.add(new TestPanel("test3", test3));
        form.add(new TestPanel("test4", test4));
    }

    private class TestPanel extends Panel {
        private BigDecimal amount;

        private TestPanel(String id, BigDecimal amount) {
            super(id);
            this.amount = amount;

            TextField<BigDecimal> = new TextField<BigDecimal>("amount", new PropertyModel<BigDecimal>(this, "amount"));
            add(textField);
            textField.add(new TestBehavior());
            textField.setRequired(true);
        }
    }

    public class TestBehavior extends OnChangeAjaxBehavior {

        @Override
        protected void onUpdate(AjaxRequestTarget target) {
            //this text is pirinting only when I change the first text field
            System.out.println("---------- TestBehavior.onUpdate() ----------------");
        }
    }
} 
```

测试页.html

```
<html xmlns:wicket="http://wicket.apache.org">
<body>
    <form wicket:id="form" class="form-horizontal">
        <span wicket:id="test1"></span>
        <span wicket:id="test2"></span>
        <span wicket:id="test3"></span>
        <span wicket:id="test4"></span>
    </form>
</body>
</html> 
```

测试页$TestPanel.html

```
<html xmlns:wicket="http://wicket.apache.org">
<body>
<wicket:panel xmlns:wicket="http://wicket.apache.org">
    <input wicket:id="amount" id="amount" type="text" class="input-small"/>
</wicket:panel>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T09:23:55.980

从. `id="amount"`_ `<input>`而是设置在`TextField` `.setOutputMarkupId(true);`

# javascript - res.redirect() 与 nodejs 中的一个数组

> ID：14908537
> 
> 赞同：2
> 
> 时间：2013-02-16T08:43:42.427
> 
> 标签：javascript, node.js, express

我正在使用[快递](https://github.com/visionmedia/express)3.0.3。

```
return res.redirect('/finished/'+result[0].code) 
```

在这段代码中，我查询了一个 mongodb，我得到了一个 POST ajax 方法查询的结果，但是我从 post url 重定向到一个带有参数的 get url`result.code`

所以我返回给用户一个只包含结果代码的页面，但是我发现我必须从结果中添加更多信息才能返回给用户，所以我怎样才能重定向到 /finished 但传递一个数组而不是一个参数...

# c++ - 骰子计数器无法正常工作（初学者）

> ID：14908539
> 
> 赞同：1
> 
> 时间：2013-02-16T08:43:48.593
> 
> 标签：c++, counter

这是为了模拟投掷 2 个 6 面骰子而编写的。但是当我投入 10 次投掷时，它会随机投掷任意数量的 (4, 5, 6 etc.) 。我错过了什么吗？

```
#include <iostream>
#include <cmath>
#include <cstdlib>
#include <ctime>

using namespace std;

int throwDice()                // returns random number ranged 2-12
{
    int x = (rand() % 11) + 2;
    return x;
}

int main()
{
    srand (time(NULL));
    int y;
    cout << "Roll dice how many times?" << endl;
    cin >> y;

    int a2 = 0;
    int a3 = 0;
    int a4 = 0;
    int a5 = 0;
    int a6 = 0;
    int a7 = 0;
    int a8 = 0;
    int a9 = 0;
    int a10 = 0;
    int a11 = 0;
    int a12 = 0;

    for (int i = 0; i < y; i++)
    {
        throwDice();

    if (throwDice() == 2)
        a2++;
    else if (throwDice() == 3)
        a3++;
    else if (throwDice() == 4)
        a4++;
    else if (throwDice() == 5)
        a5++;
    else if (throwDice() == 6)
        a6++;
    else if (throwDice() == 7)
        a7++;
    else if (throwDice() == 8)
        a8++;
    else if (throwDice() == 9)
        a9++;
    else if (throwDice() == 10)
        a10++;
    else if (throwDice() == 11)
        a11++;
    else if (throwDice() == 12)
        a12++;
    }
    cout << "2 = " << a2 << endl;
    cout << "3 = " << a3 << endl;
    cout << "4 = " << a4 << endl;
    cout << "5 = " << a5 << endl;
    cout << "6 = " << a6 << endl;
    cout << "7 = " << a7 << endl;
    cout << "8 = " << a8 << endl;
    cout << "9 = " << a9 << endl;
    cout << "10 = " << a10 << endl;
    cout << "11 = " << a11 << endl;
    cout << "12 = " << a12 << endl;

    system("pause");
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T08:47:30.877

*   您调用`throwDice()`一次以生成抛出（正确），然后在`if`语句中的每个评估条件中再次调用（不正确）。将 throw 的结果保存在一个变量中，并在您的检查中使用该变量。

*   您的`throwDice`函数不*模拟*两个 6 面骰子被抛出，但它模拟一个 11 面骰子（上面印有数字 2-11）被抛出。这会有所不同。（虽然这不是一个编程问题，而是一个数学问题。一旦你理解了它背后的数学，就很容易纠正你的函数。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T08:55:11.057

我会写这段代码：

```
#include <iostream>
#include <cmath>
#include <cstdlib>
#include <ctime>

using namespace std;

int throwDice()                // returns random number ranged 2-12
{
    int x = (rand() % 11) + 2;
    return x;
}

int main()
{
    srand (time(NULL));
    int y;
    cout << "Roll dice how many times?" << endl;
    cin >> y;
    int total[13];
    for( int i = 2; i <= 12; i++ )
        total[i] = 0;

    for (int i = 0; i < y; i++)
    {
        total[throwDice()]++;
    }

    for (int i = 2; i <= 12; i++)
        cout << i << " = " << total[i] << endl;

    system("pause");
} 
```

更简单，更容易理解。

好吧，这是您的代码的问题：

您在所有语句`throwDice`中重复调用该函数。`if`您只需在循环的每次迭代中调用一次，存储结果并比较结果。您不应该每次都调用它进行比较。每一个电话都会给你一个新的结果。

您还可以在我的代码中看到使用数组如何简化整个代码。在这里，我浪费了两个数组元素（0 和 1），这可以通过简单的索引算术来避免。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T08:55:01.117

你的循环应该看起来像

```
int result;
for (int i = 0; i < y; i++)
{
    result = throwDice();

if (result == 2)
    a2++;
else if (result == 3)
    a3++;
else if (result == 4)
    a4++;
else if (result == 5)
    a5++;
else if (result == 6)
    a6++;
else if (result == 7)
    a7++;
else if (result == 8)
    a8++;
else if (result == 9)
    a9++;
else if (result == 10)
    a10++;
else if (result == 11)
    a11++;
else if (result == 12)
    a12++;
} 
```

此外，该`throwDice()`功能不等同于掷 2 个骰子。您创建了一个函数，该函数将所有值从 2 滚动到 12 的机会均等。例如，当您掷 2 个骰子时，掷 6 的可能性远大于掷 12。您应该在两者之间创建两个数字1 和 6 并将它们相加以获得`throwDice()`函数的返回值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T12:12:15.547

我知道这并不能回答问题，但我不禁想知道如果 C++11 可供您使用，您是否可以从 C++11 中受益：

```
#include <random>

std::minstd_rand prng;
std::uniform_int_distribution<int> dice (1, 6);

int throwDice ()
{
    return (dice(prng) + dice(prng));
}

int main ()
{
    prng.seed(time(NULL));

    // (code)
} 
```

# javascript - 如何从html调用jquery代码中的外部函数？

> ID：14908543
> 
> 赞同：6
> 
> 时间：2013-02-16T08:44:24.497
> 
> 标签：javascript, jquery, html, function

我需要加载函数以从 HTML 文件中包含的外部 JS 获取数据，我正在这样做：

```
<body onLoad="getTicket();">
......
</body> 
```

或这个：

```
<html>
<body>
    <head>
    <script src="js/jquery.js" type="text/javascript"></script>
    <script src="js/functions.js" type="text/javascript"></script>
    <script>
        $(document).ready(function() {
            getTicket();
        });
    <script>
    </head>
<body>
</html> 
```

或这个：

```
<html>
<body>
    <head>
    <script src="js/jquery.js" type="text/javascript"></script>
    <script src="js/functions.js" type="text/javascript"></script>
    <script>
        getTicket();
    <script>
    </head>
<body>
</html> 
```

我在functions.JS中有这个：

```
functioOne() {

}

functionTwo() {

}

$(document).ready(function() {
    ...
    .....
    function getTicket() {
        //to do
    }
}); 
```

但不起作用并在控制台中显示：

```
Uncaught ReferenceError: getTicket is not defined 
```

问候。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-16T08:47:18.583

您的`getTicket`函数仅在 jQuery 闭包（匿名函数）的上下文（范围）中定义。而是在全局范围内定义它（在文件的其他地方而不是作为“函数参数”）。

如果您需要该范围内的变量，请将它们封装在命名空间（对象）中，或将其声明为`window.getTicket = function() { /* ... */}`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-16T08:54:37.253

尝试将`function getTicket(){}`外部或`doc ready`：

```
functio One() {

}

function Two() {

}
function getTicket() {
    //to do
}

$(document).ready(function() {
...
.....
   getTicket();
}); 
```

您的包含顺序是完美的，没有问题。

```
<script src="js/jquery.js" type="text/javascript"></script>
<script src="js/functions.js" type="text/javascript"></script> 
```

这很好。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-16T08:47:59.877

你可以这样做：

```
$(document).ready(function() {
  ...
  .....
  window.getTicket = function() {
    //to do
  } 
}); 
```

文件准备好后，您就可以调用 getTicket

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T08:47:13.823

添加`<script type="text/javascript src="external.js"></script>`到`head`.

然后您必须等待文档完全加载。

问题是您的代码以这种方式执行：

*   执行 external.js
*   您的函数未定义，因为文档尚未完成加载
*   你调用未定义的函数
*   文件准备好了

恕我直言，我认为在 $(document).ready 中定义函数不是一个好主意。通常定义该函数会更简单，然后在 $(document).ready 中*调用它。*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-16T08:48:45.433

在调用函数之前，您必须包含 js 文件。如果你这样做：

```
<html>
<body>
    <head>
    <!-- include script files here.(jquery and custom script files) -->
    <script>
        $(document).ready(function() {
            getTicket();
        });
    </script>
    </head>
<body>
</html> 
```

您必须在调用该函数之前包含您的脚本文件。

# algorithm - 懒惰评估和短路评估之间有什么区别？

> ID：14908548
> 
> 赞同：19
> 
> 时间：2013-02-16T08:45:04.500
> 
> 标签：algorithm, terminology, lazy-evaluation, short-circuiting

来自维基百科：

**[懒惰的评价](http://en.wikipedia.org/wiki/Lazy_evaluation)**是：

> 在编程语言理论中，惰性求值或按需调用是一种求值策略，它将表达式的求值延迟到需要它的值为止

**[短路评估](http://en.wikipedia.org/wiki/Short-circuit_evaluation)**为：

> 短路求值、最小求值或麦卡锡求值表示某些编程语言中某些布尔运算符的语义，其中仅在第一个参数不足以确定表达式的值时才执行或评估第二个参数

那么它们之间有什么区别，例如当我有：

```
if(false && true && true) {
    //boo
} 
```

据我所知，编译器不会在之后执行表达式，`false`因为我有`&&`所以整个表达式将是`false`最终的。（对？）

那么这种行为称为**延迟评估**还是**短路评估**？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-16T09:27:06.830

不同之处在于，在惰性求值的情况下，仅在需要时才对表达式进行求值，而在短路求值的情况下，表达式求值会在您知道结果后立即停止。这是一种正交的概念。

惰性求值可应用于任何计算（短路方案通常仅与布尔值一起使用）。**它不会切断无用的计算，而是延迟整个计算，直到需要它的结果。**

```
variable = bigAndSlowFunc() or evenSlowerFnc()
if (carry out heavy computations)
  print "Here it is: ", variable
else
  print "As you wish :-)" 
```

如果评估是惰性的，`variable`则仅当我们选择进入 的第一个 ( `then`) 分支时才会计算`if`，否则不会。在评估阶段（当我们为 准备参数时`print`）短路方案可用于决定是否需要调用`evenSlowerFnc`.

因此，在您的示例中，这是短路评估，因为没有发生计算延迟。

# objective-c - 实体填充数据后的核心数据关系

> ID：14908554
> 
> 赞同：1
> 
> 时间：2013-02-16T08:46:34.740
> 
> 标签：objective-c, core-data, relationship, relationships

我有两个实体 Team 和 TeamMembers，它们最初填充了来自两个 json 文件的数据。

因此，目前这些实体之间没有任何联系。在两个实体都填满数据后，此时是否可以建立关系？

实体现在看起来像这样

团队

*   ID
*   队名

团队成员

*   ID
*   idTeam
*   成员

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T09:55:29.197

我你还没有做，定义关系

*   `members`*：从Team*到*TeamMembers*的多对多关系，
*   `team`*：从TeamMembers*到*Team*的一对一关系，

并将这些设置为相互的反向关系。

现在，如果你有 a`Team *theTeam`和 a`TeamMember *theMember`你刚刚设置

```
theMember.team = theTeam 
```

建立这些对象之间的关系。

如果团队和成员的数量不太大，您可以简单地遍历所有团队和成员，并在 id 匹配时设置关系。

或者，您可以为每个团队执行一个获取请求，获取具有匹配 id 的所有成员，然后设置关系。

# c# - 如何确定互联网连接是否可用？

> ID：14908559
> 
> 赞同：8
> 
> 时间：2013-02-16T08:47:32.513
> 
> 标签：c#, windows-runtime, windows-store-apps

如何确定 Windows 商店应用程序中是否有 Internet 连接？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-16T08:59:44.290

您可以使用[`NetworkInformation`该类](http://msdn.microsoft.com/en-us/library/windows/apps/br207293.aspx)来检测它；此示例代码添加了一个事件处理程序，每次连接状态更改时都会调用该处理程序；

```
NetworkInformation.NetworkStatusChanged += 
    NetworkInformation_NetworkStatusChanged; // Listen to connectivity changes

static void NetworkInformation_NetworkStatusChanged(object sender)
{
    ConnectionProfile profile = 
        NetworkInformation.GetInternetConnectionProfile();

    if ((profile != null) && profile.GetNetworkConnectivityLevel() >=
                NetworkConnectivityLevel.InternetAccess)
    {
        // We have Internet, all is golden
    }
} 
```

当然，如果您只想检测一次而不是在它更改时收到通知，您可以从上面进行检查，而无需监听 change 事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-13T04:23:33.077

```
using Windows.Networking.Connectivity;      

public static bool IsInternetConnected()
{
    ConnectionProfile connections = NetworkInformation.GetInternetConnectionProfile();
    bool internet = (connections != null) && 
        (connections.GetNetworkConnectivityLevel() == NetworkConnectivityLevel.InternetAccess);
            return internet;
} 
```

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2014-02-15T09:46:50.267

刚刚编写了异步函数来做到这一点：

```
 private void myPingCompletedCallback(object sender, PingCompletedEventArgs e)
    {
        if (e.Cancelled)
            return;

        if (e.Error != null)
            return;

        if (e.Reply.Status == IPStatus.Success)
        {
            //ok connected to internet, do something
        }
    }

    private void checkInternet()
    {
        Ping myPing = new Ping();
        myPing.PingCompleted += new PingCompletedEventHandler(myPingCompletedCallback);
        byte[] buffer = new byte[32];
        int timeout = 1000;
        PingOptions options = new PingOptions(64, true);
        try
        {
            myPing.SendAsync("google.com", timeout, buffer, options);
        }
        catch
        {
        }
    } 
```

# matlab - 如何在 MATLAB 中的 3D 表面（由补丁构建）上绘制 3D 轮廓？

> ID：14908560
> 
> 赞同：1
> 
> 时间：2013-02-16T08:47:47.240
> 
> 标签：matlab, 3d, patch, contour, geometry-surface

`MATLAB`我刚刚使用下面的代码创建了一个 3D 表面：

```
p = patch ( 'Vertices' , XYZ , 'Faces' , F ) ;

set ( gca , 'CLim' , [-2000 1500] ) ;

set ( p , 'FaceColor' , 'interp' , 'FaceVertexCData' , V , 'EdgeColor' , 'none' , ...

... 'CDataMapping' , 'scaled' ) ;

axis 'equal'; 
axis 'tight';
set(gca, 'YDir','normal'); 
```

其中`XYZ`是一个`352x3`包含 3D 表面点坐标的矩阵。 `F`是一个`700x3`包含连接点的面的矩阵。 `V`是一个`352x1`矩阵，包含 3D 表面的 352 个点中的每一个上的值。

**现在这是一个问题：*如何在表面上绘制 3D 轮廓！！？***

我已经尝试过`contour3`函数，但它要求输入矩阵的维度与现在不同。（我可能需要使用meshgrid，但不幸的是我的XYZ点分布不规则。但是我不确定我是否可以这样做，因为我正在使用补丁功能。）

请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T17:52:23.243

一种可能的解决方案可能是将数据插值到常规网格，然后使用`contour3`函数。检查手册的`TriScatteredInterp`功能。简而言之，您应该首先构造插值：

```
F = TriScatteredInterp(XYZ(:,1), XYZ(:,2), XYZ(:,3)); 
```

然后，您必须在常规位置评估插值`qx`并`qy`（使用 获得`meshgrid`）并获得相应的值`qz`：

```
ti = 0:0.1:10;
[qx, qy] = meshgrid(ti, ti);  
qz = F(qx, qy); 
```

最后，您可以使用`contour3`：

```
contour3(qx, qy, qz, 30); 
```

希望能帮助到你。

# xslt - 如何使用 XSLT 拆分 XML 标记

> ID：14908562
> 
> 赞同：0
> 
> 时间：2013-02-16T08:47:56.383
> 
> 标签：xslt

我有一个类似这样的源 XML（如下所示），其中有一个 PR 标签，在该标签下可以有多个 Pr Line 标签，但在最终的 XML 中，我希望拆分源 XML（包含多个 Pr Line 标签）如目标xml所示。

来源：

```
 <PRSet>
   <PR>
    <PRNUM>100</PRNUM> 
    <VENDOR>XYZ LLC</VENDOR> 
    <PRLINE>
      <PRLINENUM>101</PRLINENUM>
      <DESCRIPTION>Burner Lamp</DESCRIPTION> 
    </PRLINE>

    <PRLINE>
      <PRLINENUM>102</PRLINENUM>
      <DESCRIPTION>Stove</DESCRIPTION>
    </PRLINE>
   </PR>
  </PRSet> 
```

当单个 PR 标签中有多个 PRLine 标签时，最终的 xml 应如下所示：

目标：

```
<PRSet>
 <PR>
  <PRNUM>100</PRNUM> 
  <VENDOR>XYZ LLC</VENDOR> 
 <PRLINE>
  <PRLINENUM>101</PRLINENUM>
  <DESCRIPTION>Burner Lamp</DESCRIPTION> 
 </PRLINE>
</PR>

 <PR>
  <PRNUM>100</PRNUM> 
  <VENDOR>XYZ LLC</VENDOR> 
 <PRLINE>
  <PRLINENUM>102</PRLINENUM>
  <DESCRIPTION>Stove</DESCRIPTION>
 </PRLINE>
</PR> 
```

任何人都可以提供如何使用 XSLT 转换实现此目的的解决方案。提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T09:29:13.823

您描述的转换可以使用以下 XSLT 样式表来实现：

```
<xsl:stylesheet version="1.0"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output method="xml" omit-xml-declaration="yes" indent="yes"/>

    <xsl:template match="PRSet">
        <xsl:copy>
            <xsl:apply-templates select="PR/PRLINE" />
        </xsl:copy>
    </xsl:template>

    <xsl:template match="PRLINE">
        <PR>
            <xsl:copy-of select="../PRNUM|../VENDOR|." />
        </PR>
    </xsl:template>

</xsl:stylesheet> 
```

# swing - Scala/Swing：ListenTo 在 BoxPanel 范围内刚刚创建的按钮不起作用？

> ID：14908567
> 
> 赞同：0
> 
> 时间：2013-02-16T08:48:16.730
> 
> 标签：swing, scala, subscribe

我正在构建一个具有可变数量和按钮配置的应用程序，该应用程序需要监听按钮单击事件并处理它们。

由于按钮数量和配置的要求，我觉得我必须在范围内调用`listenTo`刚刚动态创建的按钮。`BoxPanel`但是我发现按钮的事件不会被接收。

但是，如果我记得一个创建的按钮，并`listenTo`在 的范围之外调用`BoxPanel`，那么它的事件将被接收。

我想知道为什么`listenTo`不在 BoxPanel 的范围内工作是怎么回事？无论如何，我没有看到这种用法的任何编译器错误。

下面是我的示例代码：

```
import scala.swing._
import scala.swing.event._

object TouchSelectUI extends SimpleSwingApplication {
  val touchMap = Vector(
    Vector("a", "b", "c"),
    Vector("d", "e", "g")
    // more may be defined in the future
  )
  val keyDemension = new Dimension(40, 25)
  def top = new MainFrame {
    title = "Touch Select Experiment"
    val input = new TextArea {
      columns = 80
      text = ""
    }
    var aButtonRemebered = new Button()
    contents = new FlowPanel {
      require(touchMap.size > 0, {println("The touch key definition is empty!")})
      for (c <- 0 until touchMap(0).size) {
    contents += new BoxPanel(Orientation.Vertical) {
      for (r <- 0 until touchMap.size) {
        val key = new Button {
        text = touchMap(r)(c)
          }
        contents += key
        aButtonRemebered = key
        listenTo(key) // listenTo here does not work.
      }
    }
      }
    contents += input 
    }

    //listenTo(aButtonRemebered) // Here listTo would work to deliver the event to the following reaction!
    reactions += {
      case ButtonClicked(b) => {
    println(s"Button clicked!")
    val c = b.text
    input.text = input.text + c
      }
    }
  }
} 
```

非常感谢你的帮助！

于

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T09:34:17.200

你是这个意思吗？

```
object TouchSelectUI extends SimpleSwingApplication {

  //..

  def top = new MainFrame {

    val main = this

    //..

    contents = new FlowPanel {
      //..
      for (c <- 0 until touchMap(0).size) {
        contents += new BoxPanel(Orientation.Vertical) {
          for (r <- 0 until touchMap.size) {
            val key = new Button
            //..
            main listenTo key
          }
        }
      }
    }
  }
} 
```

* * *

## 编辑

[Luigi Plinge](https://stackoverflow.com/users/770361/luigi-plinge)有一个很好的建议，而不是这个：

```
 def top = new MainFrame {

    val main = this 
```

你也可以这样做：

```
 def top = new MainFrame { main => 
```

他还提供了以下链接：

*   [与 ''this'' 没有类型/差异的显式自引用](https://stackoverflow.com/questions/8073263/explicit-self-references-with-no-type-difference-with-this)
*   [如何为 javax.swing.Timer 编写 Scala 包装器](https://stackoverflow.com/questions/6825729/how-to-write-a-scala-wrapper-for-javax-swing-timer)

# php - PHP 将第二个数组中的匹配数据放在第一个数组的顶部

> ID：14908572
> 
> 赞同：0
> 
> 时间：2013-02-16T08:48:54.933
> 
> 标签：php, arrays

我有一个这样的数组：

```
1-  
    Array ( [55] => latest 
            [2] => block2 
            [3] => featured 
            [56] => News 
            [4] => portfolio 
            [57] => archive  ) 
```

另一个是由用户选择构建的，它看起来像这样：即。

```
2-   Array ( [0] => 56 
             [1] => 55 
             [2] => 4) 
```

所以从数组一个中选择了3个ID，我要做的是让数组（2）上的这些值在第一个数组中重新排序，这样数组看起来像这样；

```
3- /*results*/ 

    Array ( [56] => News 
            [55] => latest 
            [4] => portfolio 
            [2] => block2 
            [3] => featured  
            [57] => archive  ) 
```

如果您发现我应该更改数组结构中的任何内容以获取或任何解决方案，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T08:55:38.187

像这样试试

arr1 =

```
Array ( [55] => latest 
        [2] => block2 
        [3] => featured 
        [56] => News 
        [4] => portfolio 
        [57] => archive  ) 
```

arr2 =

```
Array ( [0] => 56 
         [1] => 55 
         [2] => 4)

foreach($arr1 as $key1 => $val1)
{
    foreach($arr2 as $key2 => $val2)
    {
        if($val2 == $key1)
            $arr3[$val2] = $val1;
    }
}
print_r($arr3); 
```

它会给你

# api - Backbone / Marionette 模型 url 链接

> ID：14908573
> 
> 赞同：1
> 
> 时间：2013-02-16T08:49:17.253
> 
> 标签：api, backbone.js, marionette

我有一个 node.js 后端使用 express-resource 来管理我的猫鼬模型。

我有一个 MarionetteJS 前端。

我的示例中的两个对象是组织和项目。

我的服务器将资源连接到类似的 uri`example.com/api/v1/organization/12/project`

当我从 mongodb 为它们提供服务时，这些 id 是独一无二的。如果我只做就行了`../project/2`

但是要接收组织内的项目，由于无国籍，我只能做第一个。

我现在在客户端有 Backbone 模型。我确定这样的基本 url`api/v1/organization`工作正常，但我怎样才能获得组织的项目？我是否必须创建一个带有基本 url 的新模型`api/v1/organization/:orgId/project`？

我该怎么做呢？

我希望你能理解我想说的话，任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T09:48:23.540

你可以这样做：

```
var ProjectModel = Backbone.Model.extend({
   initialize: function(attrs, options) {
       if( options && options.organizationId){
          this.urlRoot = 'example.com/api/v1/organizations/' + options.organizationId + '/projects';
       }
   }
});

var ProjectCollection = Backbone.Collection.extend({
   initialize: function(models, options) {
       this.url = 'example.com/api/v1/organizations/' + options.organizationId + '/projects';
   },
});

// fetch one single project, not in a collection
var model = new ProjectModel({id: 4}, {organizationId: 7});
model.fetch();

// fetch all projects
var collection = new ProjectCollection(null, {organizationId: 7});
collection.fetch(); 
```

当模型在集合中时，它不需要`urlRoot`，因为 Backbone 将使用模型的集合`url`作为基础。

# python - 如何从 matplotlib 中删除框架（pyplot.figure vs matplotlib.figure）（frameon=False 在 matplotlib 中有问题）

> ID：14908576
> 
> 赞同：208
> 
> 时间：2013-02-16T08:49:38.117
> 
> 标签：python, matplotlib

要删除图中的框架，我写

```
frameon=False 
```

与 完美搭配`pyplot.figure`，但`matplotlib.Figure`仅移除灰色背景，框架保持不变。另外，我只想显示线条，而所有其余的图形都是透明的。

用 pyplot 我可以做我想做的事，我想用 matplotlib 做这件事，出于某种长期的原因，我宁愿不提来扩展我的问题。

* * *

## 回答 #1

> 赞同：327
> 
> 时间：2015-02-25T13:22:29.640

`ax.axis('off')`，正如乔金顿指出的那样，将删除除绘制线之外的所有内容。

对于那些只想删除框架（边框）并保留标签、代码等的人，可以通过访问`spines`轴上的对象来做到这一点。给定一个轴对象`ax`，以下应该删除所有四个边的边框：

```
ax.spines['top'].set_visible(False)
ax.spines['right'].set_visible(False)
ax.spines['bottom'].set_visible(False)
ax.spines['left'].set_visible(False) 
```

并且，如果从图中删除`x`和`y`刻度：

```
 ax.get_xaxis().set_ticks([])
 ax.get_yaxis().set_ticks([]) 
```

* * *

## 回答 #2

> 赞同：208
> 
> 时间：2013-02-16T18:03:21.257

首先，如果您使用`savefig`，请注意它会在保存时覆盖图形的背景颜色，除非您另外指定（例如`fig.savefig('blah.png', transparent=True)`）。

但是，要在屏幕上移除坐标轴和图形的背景，您需要同时设置`ax.patch`和`fig.patch`不可见。

例如

```
import matplotlib.pyplot as plt

fig, ax = plt.subplots()
ax.plot(range(10))

for item in [fig, ax]:
    item.patch.set_visible(False)

with open('test.png', 'w') as outfile:
    fig.canvas.print_png(outfile) 
```

![在此处输入图像描述](../Images/a79a1de5ff1296a62c7666bfce7b78f5.png)

（当然，在 SO 的白色背景上你是看不出来的，但一切都是透明的……）

如果您不想显示除线条以外的任何内容，请使用以下命令关闭轴`ax.axis('off')`：

```
import matplotlib.pyplot as plt

fig, ax = plt.subplots()
ax.plot(range(10))

fig.patch.set_visible(False)
ax.axis('off')

with open('test.png', 'w') as outfile:
    fig.canvas.print_png(outfile) 
```

![在此处输入图像描述](../Images/127b15498a77d50cffec37e5d6dee6ea.png)

但是，在这种情况下，您可能希望轴占据整个图形。如果您手动指定轴的位置，您可以让它占据整个图形（或者，您可以使用`subplots_adjust`，但这对于单个轴的情况更简单）。

```
import matplotlib.pyplot as plt

fig = plt.figure(frameon=False)
ax = fig.add_axes([0, 0, 1, 1])
ax.axis('off')

ax.plot(range(10))

with open('test.png', 'w') as outfile:
    fig.canvas.print_png(outfile) 
```

![在此处输入图像描述](../Images/b72fa2b6db71e84fd73c0ddb38ab7043.png)

* * *

## 回答 #3

> 赞同：98
> 
> 时间：2018-09-24T04:28:49.993

在较新版本的 matplotlib 中摆脱丑陋框架的最简单方法：

```
import matplotlib.pyplot as plt
plt.box(False) 
```

如果您确实必须始终使用面向对象的方法，那么请执行以下操作：`ax.set_frame_on(False)`.

* * *

## 回答 #4

> 赞同：64
> 
> 时间：2017-03-11T22:04:13.930

在[@peeol 的优秀答案的](https://stackoverflow.com/a/28720127/1534017)基础上，您还可以通过以下方式移除框架

```
for spine in plt.gca().spines.values():
    spine.set_visible(False) 
```

举个例子（整个代码示例可以在这篇文章的末尾找到），假设你有一个这样的条形图，

[![在此处输入图像描述](../Images/b84658bdabf05dd7d0077bf83dec573b.png)](https://i.stack.imgur.com/8csGd.png)

您可以使用上面的命令删除框架，然后保留`x-`和`ytick`标签（未显示图）或删除它们

```
plt.tick_params(top='off', bottom='off', left='off', right='off', labelleft='off', labelbottom='on') 
```

在这种情况下，可以直接标记条形；最终的情节可能是这样的（代码可以在下面找到）：

[![在此处输入图像描述](../Images/5494834fee50b2b9ba43e91e48b84ff5.png)](https://i.stack.imgur.com/8csGd.png)

以下是生成绘图所需的全部代码：

```
import matplotlib.pyplot as plt
import numpy as np

plt.figure()

xvals = list('ABCDE')
yvals = np.array(range(1, 6))

position = np.arange(len(xvals))

mybars = plt.bar(position, yvals, align='center', linewidth=0)
plt.xticks(position, xvals)

plt.title('My great data')
# plt.show()

# get rid of the frame
for spine in plt.gca().spines.values():
    spine.set_visible(False)

# plt.show()
# remove all the ticks and directly label each bar with respective value
plt.tick_params(top='off', bottom='off', left='off', right='off', labelleft='off', labelbottom='on')

# plt.show()

# direct label each bar with Y axis values
for bari in mybars:
    height = bari.get_height()
    plt.gca().text(bari.get_x() + bari.get_width()/2, bari.get_height()-0.2, str(int(height)),
                 ha='center', color='white', fontsize=15)
plt.show() 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2019-08-22T22:04:35.153

[正如我在这里](https://stackoverflow.com/questions/925024/how-can-i-remove-the-top-and-right-axis-in-matplotlib/57617515#57617515)回答的那样，您可以通过样式设置（样式表或 rcParams）从所有绘图中删除刺：

```
import matplotlib as mpl

mpl.rcParams['axes.spines.left'] = False
mpl.rcParams['axes.spines.right'] = False
mpl.rcParams['axes.spines.top'] = False
mpl.rcParams['axes.spines.bottom'] = False 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2019-09-02T11:23:26.460

# 问题

我在使用轴时遇到了类似的问题。类参数是`frameon`，但 kwarg 是`frame_on`。 [轴API](https://matplotlib.org/api/axes_api.html)
`>>> plt.gca().set(frameon=False)`
`AttributeError: Unknown property frameon`

# 解决方案

`frame_on`

# 例子

```
data = range(100)
import matplotlib.pyplot as plt
fig, ax = plt.subplots()
ax.plot(data)
#ax.set(frameon=False)  # Old
ax.set(frame_on=False)  # New
plt.show() 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2019-08-22T08:53:19.750

```
df = pd.DataFrame({
'client_scripting_ms' : client_scripting_ms,
 'apimlayer' : apimlayer, 'server' : server
}, index = index)

ax = df.plot(kind = 'barh', 
     stacked = True,
     title = "Chart",
     width = 0.20, 
     align='center', 
     figsize=(7,5))

plt.legend(loc='upper right', frameon=True)

ax.spines['right'].set_visible(False)
ax.spines['top'].set_visible(False)

ax.yaxis.set_ticks_position('left')
ax.xaxis.set_ticks_position('right') 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2013-06-03T12:50:00.170

我经常这样做：

```
from pylab import *
axes(frameon = 0)
...
show() 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2020-06-19T21:39:01.963

```
plt.axis('off')
plt.savefig(file_path, bbox_inches="tight", pad_inches = 0) 
```

plt.savefig 本身就有这些选项，只需要在之前设置轴

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-04-13T11:48:24.113

```
plt.box(False)
plt.xticks([])
plt.yticks([])
plt.savefig('fig.png') 
```

应该做的伎俩。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-05-12T09:44:59.500

这是另一个解决方案：

```
img = io.imread(crt_path)

fig = plt.figure()
fig.set_size_inches(img.shape[1]/img.shape[0], 1, forward=False) # normalize the initial size
ax = plt.Axes(fig, [0., 0., 1., 1.]) # remove the edges
ax.set_axis_off() # remove the axis
fig.add_axes(ax)

ax.imshow(img)

plt.savefig(file_name+'.png', dpi=img.shape[0]) # de-normalize to retrieve the original size 
```

# c# - 我可以在运行时将 TransfromBlock 中的一个 Func“热交换”为另一个吗？

> ID：14908577
> 
> 赞同：0
> 
> 时间：2013-02-16T08:49:41.657
> 
> 标签：c#, task-parallel-library, func, tpl-dataflow

我有以下设置`TransformBlock`：

```
private void SetupTestModule()
{
    Func<int, int> func1 = new Func<int, int>(input =>
        {
            return (input + 1);
        });

    Func<int, int> func2 = new Func<int, int>(input =>
        {
            return (input + 2);
        });

    TransformBlock<int, int> transform = new TransformBlock<int, int>(func1);
} 
```

我想知道我是否可以在运行时将 func1 换成 func2，以及这个 transformBlock 和其他数据块之间的所有链接是否会保持不变？理想情况下，在交换功能时，我只是希望新的转换适用于所有新传入的项目。显然，通过这种简单化的方法，我不会对当前在队列中的项目以及如何处理它们做出假设。我只是想知道分配一个新的 Func 是否会导致运行时错误或导致 transformBlock 被取消链接。谁能分享一些见解？

编辑：在这里发布 Jon 的建议和代码一些非常基本的测试代码。让我好奇的是，它可以在有无`volatile`关键字的情况下使用。为什么我们需要`volatile`？

```
public class TransformBlockHotSwap
{
    private TransformBlock<int, int> transformBlock;
    private ActionBlock<int> actionBlock;

    public TransformBlockHotSwap()
    {

        SwappableFunction<int, int> swappable = new SwappableFunction<int, int>(item => item + 1);
        transformBlock = new TransformBlock<int, int>(item => swappable.Execute(item));
        actionBlock = new ActionBlock<int>(item => Console.WriteLine(item));
        transformBlock.LinkTo(actionBlock);

        Func<int, int> func2 = new Func<int,int>(item => item * item);

        for (int index = 1; index <= 100; index++)
        {
            transformBlock.Post(index);

            Thread.Sleep(500);

            if (index == 5)
            {
                swappable.Swap(func2);
            }
        }
    }
}

public class SwappableFunction<TInput, TOutput>
{
    private Func<TInput, TOutput> func;

    public SwappableFunction(Func<TInput, TOutput> func)
    {
        this.func = func;
    }

    public void Swap(Func<TInput, TOutput> newFunc)
    {
        func = newFunc;
    }

    public TOutput Execute(TInput input)
    {
        return func(input);
    }
} 
```

编辑（包括谓词交换）：

```
public class TransformBlockHotSwap
{
    private TransformBlock<int, int> transformBlock;
    private ActionBlock<int> actionBlock;

    public TransformBlockHotSwap()
    {
        Func<int, int> defaultFunction = new Func<int, int>(item => item);
        Func<int, int> func2 = new Func<int, int>(item => item * item);
        Predicate<int> defaultPredicate = new Predicate<int>(item => true);
        Predicate<int> pred2 = new Predicate<int>(item =>
            {
                if (item % 2 == 0)
                {
                    return true;
                }
                else
                {
                    return false;
                }
            });

        SwappableFunction<int, int> swappableFunction = new SwappableFunction<int, int>(defaultFunction);
        SwappablePredicate<int> swappablePredicate = new SwappablePredicate<int>(defaultPredicate);

        transformBlock = new TransformBlock<int, int>(item => swappableFunction.Execute(item));
        actionBlock = new ActionBlock<int>(item => Console.WriteLine(item));
        transformBlock.LinkTo(actionBlock, item => swappablePredicate.Execute(item));

        for (int index = 1; index <= 100; index++)
        {
            transformBlock.Post(index);

            if (index == 10)
            {
                swappablePredicate.Swap(pred2);
            }

            Thread.Sleep(200);
        }

        Console.WriteLine("Done");
        Console.ReadKey();
    }
}

public class SwappableFunction<TInput, TOutput>
{
    private volatile Func<TInput, TOutput> func;

    public SwappableFunction(Func<TInput, TOutput> defaultFunction)
    {
        this.func = defaultFunction;
    }

    public void Swap(Func<TInput, TOutput> newFunc)
    {
        func = newFunc;
    }

    public TOutput Execute(TInput input)
    {
        return func(input);
    }
}

public class SwappablePredicate<TInput>
{
    private volatile Predicate<TInput> predicate;

    public SwappablePredicate(Predicate<TInput> defaultPredicate)
    {
        this.predicate = defaultPredicate;
    }

    public void Swap(Predicate<TInput> newPredicate)
    {
        predicate = newPredicate;
    }

    public bool Execute(TInput input)
    {
        return predicate(input);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T08:59:01.150

我不希望您能够这样做 - 但您可以轻松*编写*一个委托的函数：

```
public class SwappableFunction<TInput, TOutput>
{
    private volatile Func<TInput, TOutput> func;

    public SwappableFunction(Func<TInput, TOutput> func)
    {
        this.func = func;
    }

    public void Swap(Func<TInput, TOutput> newFunc)
    {
        func = newFunc;
    }

    public TOutput Execute(TInput input)
    {
        return func(input);
    }
} 
```

然后：

```
var swappable = new SwappableFunction<int, int>(input => input + 1);
var block = new TransformBlock<int, int>(swappable.Execute);
// Later...

swappable.Swap(input => input + 2); 
```

**重要**- 我不能 100% 确定`volatile`这里的使用 - 我通常不喜欢使用`volatile`，因为它的语义令人困惑。使用`Interlocked.CompareExchange`可能会更好 - 但代码会明显更长，我想先了解重点:)

# android - 带有 actionLayout 的 Android 操作栏菜单项无法正常工作

> ID：14908578
> 
> 赞同：29
> 
> 时间：2013-02-16T08:49:42.563
> 
> 标签：android, drop-down-menu, menu, android-actionbar, submenu

嗨，我正在开发一个 Android 应用程序。在我的应用程序中，我使用的是 Sherlock 动作。我在操作栏中定义了几个菜单项，如下所示

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item
        android:id="@+id/card_menu"
        android:actionLayout="@layout/action_button"
        android:showAsAction="always"
        android:title="cards">
        <menu>
            <item
                android:id="@+id/C1"
                android:title="C1"/>
            <item
                android:id="@+id/C2"
                android:title="c2"/>
            <item
                android:id="@+id/C3"
                android:title="C3"/>
        </menu>
    </item>
    <item
        android:id="@+id/notification"
        android:actionLayout="@layout/notification_icon"
        android:icon="@drawable/notification"
        android:showAsAction="always"
        android:title="Notifications"/>

    <item
        android:id="@+id/filter"
        android:icon="@drawable/filter"
        android:showAsAction="always"
        android:title="Filter"/>
</menu> 
```

我的 action_button 看起来像：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

    <ImageView
        android:id="@+id/menu_img"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/spinner_ab_focused_maroon"/>
    <TextView
        android:id="@+id/menu_text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@+id/imageView0"
        android:text="C1"/>
</RelativeLayout> 
```

现在一切都显示了，但我的问题是，当我单击`card_menu item`定义子菜单的位置并定义动作布局时。它没有显示那些子菜单。我的其他菜单项工作正常。仅当我为包含无法显示子菜单的子菜单的项目定义操作布局时。如果我删除动作布局，它工作正常。

我知道如果我们为项目定义动作布局，那么我们必须手动处理点击监听器。我以以下方式做到了

```
final MenuItem item = menu.findItem(R.id.card_menu);
        item.getActionView().setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                onOptionsItemSelected(item);
                Toast.makeText(getActivity(), "click on menu", Toast.LENGTH_SHORT).show();
            }
        }); 
```

我能够处理该项目的单击事件，但无法显示下拉子菜单项。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-02-27T22:59:55.720

在您的活动中尝试此代码。
请务必正确设置您的

> R.menu.menu标识符
> 
> R.id.menuitemidentifier

```
@Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.actionbarhelpmenu, menu);
        final Menu m = menu;
        final MenuItem item = menu.findItem(R.id.ActionConnection);
        item.getActionView().setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {   
                m.performIdentifierAction(item.getItemId(), 0);
            }
        });
        return true;
    } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-04-03T11:20:58.983

接受的答案对我不起作用。我的子菜单在不同的设备上表现不同。在摩托罗拉 Moto X 上是这样的： ![在此处输入图像描述](../Images/dd148a028ca456ce90751d2e9fc67da6.png)

您可以看到子菜单的位置错误（我单击了 ActionBar 右侧的气泡图标）。

所以最后我想出了不同的解决方案：改用 PopupMenu。代码如下所示：

```
@Override
public void onCreateOptionsMenu(final Menu menu, MenuInflater inflater) {
    super.onCreateOptionsMenu(menu, inflater);
    inflater.inflate(R.menu.menu_fragment_chat, menu);
    final MenuItem item = menu.findItem(R.id.menu_item_actionbar_avatar);
    MenuItemCompat.getActionView(item).setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            showProfileMenuPopup(v);
        }
    });
}

public void showProfileMenuPopup(View v) {
    PopupMenu popup = new PopupMenu(getActivity(), v);
    MenuInflater inflater = popup.getMenuInflater();
    inflater.inflate(R.menu.menu_avatar_actions, popup.getMenu());
    popup.setOnMenuItemClickListener(new PopupMenu.OnMenuItemClickListener() {
        @Override
        public boolean onMenuItemClick(MenuItem menuItem) {
            return false;
        }
    });
    popup.show();
} 
```

它奏效了:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-03T03:05:58.773

参考[答案](https://stackoverflow.com/a/23936117/6821581)

如果动作布局中有按钮，为了从菜单项中获取回调，不要忘记设置按钮

```
android:clickable="false" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-02-17T13:23:23.477

完整的工作代码

```
 <item
    android:title="search"
    android:id="@+id/mSearch"
    app:actionLayout="@layout/my_custom_menu_item"
    android:orderInCategory="100"
    app:showAsAction="always"/> 
```

代码：

```
@Override
public boolean onCreateOptionsMenu(final Menu menu) {
    getMenuInflater().inflate(R.menu.menu,menu); MenuItem item = menu.findItem(R.id.mSearch);
    ImageView iv= (ImageView) item.getActionView().findViewById(R.id.search_1);
    iv.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            Toast.makeText(context, "clicked", Toast.LENGTH_SHORT).show();
        }
    });
    return true;
} 
```

# objective-c - 将 NSURL 作为字符串存储在 Core Data 中

> ID：14908580
> 
> 赞同：5
> 
> 时间：2013-02-16T08:49:59.283
> 
> 标签：objective-c, core-data, nsurl

我开始使用 Core Data，只是对存储 URL 之类的东西有疑问。

我目前已将其配置为可转换的，它工作正常，但是我觉得它可能不必要地存储了多余的数据，因为它可以很容易地用文本表示，我想知道我是否应该将绝对 URL 存储为字符串和在加载时实例化一个 NSURL 对象（我怀疑是这种情况），如果是这样，应该如何实现？

到目前为止，我的研究使我认为可能使用 mogenerator 然后重写属性访问器来处理字符串和 NSURL 之间的转换。只是想了解这是如何或通常是如何完成的，或者我是否只是通过打扰来为自己制造困难。

干杯尼克

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-10T08:38:20.653

答案在某种程度上取决于 URL 实际上*是*.

### 对于`file`URL

使用`NSURL`的例程来生成书签数据并存储它。这使您对文件移动具有弹性，并且可以包括沙盒应用程序的安全范围。

### 对于其他一切

您的选择是存储：

*   字符串表示来自`-absoluteString`
*   数据表示来自`CFURLGetBytes()`
*   使用生成的数据`NSCoder`

最后一个可能仅在您拥有由 a 组成的 URL`-baseURL`并希望保留该知识时才有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-16T09:32:35.983

取决于 Monogenerator 与否，我将使用第二种方法。覆盖“getters”和“setters”，执行从 URL 到字符串的映射

```
NSString *urlString = [url absoluteString]; 
```

并使用`setPrimitiveValue:forKey:`及其对应物

```
- (void)setYourURL:(NSURL*)newURL {
    [self willChangeValueForKey:@"yourURL"]; // call to notify the world you are modifying that property
    NSString* yourURLAsString = // perform the conversion here...
    [self setPrimitiveValue:yourURLAsString forKey:@"yourURL"];
    [self didChangeValueForKey:@"yourURL"]; // call to notify the world you've modified that property
} 
```

如果您的 URL 有空格，您也可以考虑将它们替换为`stringByReplacingPercentEscapesUsingEncoding:`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-10-09T15:57:12.670

在*Xcode 9*和*iOS 11+*中，您可以简单地使用新的**URI**类型来存储`URL`.

# regex - awk 从正则表达式中乘以排除

> ID：14908583
> 
> 赞同：0
> 
> 时间：2013-02-16T08:50:15.920
> 
> 标签：regex, bash, awk

我有一个小文件：

```
 # Format
    # <iface_name>,<ip_addr>,<ip_netmask>,<broadcast>,<eth_addr>,<status>,<obtaining_method>

    eth0,192.168.0.11,255.255.255.0,192.168.0.255,4A:DD:00:00:05:00,up,static
    lv0,172.20.8.12,255.255.248.0,172.20.15.255,4A:DD:00:FF:15:01,down,static
    #lv0:0,172.20.16.12,255.255.248.0,172.20.23.255,4A:DD:00:FF:15:01,down,static
    #lv0:1,172.20.24.12,255.255.248.0,172.20.31.255,4A:DD:00:FF:15:01,down,static
    lv1,172.21.8.11,255.255.248.0,172.21.15.255,4A:DD:00:FF:15:02,down,dhcp
    #lv1:0,172.21.16.1,255.255.248.0,172.21.23.255,4A:DD:00:FF:15:02,down,static
    #lv1:1,172.21.24.1,255.255.248.0,172.21.31.255,4A:DD:00:FF:15:02,down,static
    mv0,10.100.0.1,255.255.255.0,10.100.0.255,40:FD:00:00:01:0A,up,static
    lp0,172.22.0.12,255.255.255.0,172.22.0.255,4A:DD:00:FF:15:04,down,static
    lp1,172.22.1.12,255.255.255.0,172.22.1.255,4A:DD:00:FF:15:05,down,static
    dummy0,192.168.111.100,255.255.255.0,192.168.111.255,00:00:00:00:00:00,down,static 
```

我有一个想法，在一个周期内获取所有接口参数，并做了这个表达式：

```
 #!/bin/sh

    SPATH=/mnt/dcu/tmp/

    for INTERFACE in $(awk -F\, '/^[^#]/ {print $1}' $SPATH/ifaces); do
        INTERFACE_SETTINGS=$(awk -F\, '$1 ~ interface_name {print $2,$3,$4,$5,$6,$7}' interface_name=$INTERFACE $SPATH/ifaces)
        set $INTERFACE_SETTINGS
        IPADDR=$1
        NETMASK=$2
        BROADCAST=$3
        MACADDR=$4
        STATE=$5
        METHOD=$6

        sed -r -i -e "/$INTERFACE/s/^([^,]*,)([^,]*,)([^,]*,)([^,]*,)([^,]*,)([^,]*,)([^,]*)$/$INTERFACE,$IPADDR,$NETMASK,$BROADCAST,$MACADDR,$STATE,$METHOD/" /etc/network/ifaces
    done 
```

但它执行以下操作：

```
 # Format
     # <iface_name>,<ip_addr>,<ip_netmask>,<broadcast>,<eth_addr>,<status>,<obtaining_method>

     eth0,192.168.0.11,255.255.255.0,192.168.0.255,4A:DD:00:00:05:00,up,static
     lv0,172.20.8.12,255.255.248.0,172.20.15.255,4A:DD:00:FF:15:01,down,static
     lv0,172.20.8.12,255.255.248.0,172.20.15.255,4A:DD:00:FF:15:01,down,static
     lv0,172.20.8.12,255.255.248.0,172.20.15.255,4A:DD:00:FF:15:01,down,static
     lv1,172.21.8.11,255.255.248.0,172.21.15.255,4A:DD:00:FF:15:02,down,dhcp
     lv1,172.21.8.11,255.255.248.0,172.21.15.255,4A:DD:00:FF:15:02,down,dhcp
     lv1,172.21.8.11,255.255.248.0,172.21.15.255,4A:DD:00:FF:15:02,down,dhcp
     mv0,10.100.0.1,255.255.255.0,10.100.0.255,40:FD:00:00:01:0A,up,static
     lp0,172.22.0.12,255.255.255.0,172.22.0.255,4A:DD:00:FF:15:04,down,static
     lp1,172.22.1.12,255.255.255.0,172.22.1.255,4A:DD:00:FF:15:05,down,static
     dummy0,192.168.111.100,255.255.255.0,192.168.111.255,00:00:00:00:00:00,down,static 
```

它会得到更改和已评论的接口。

我试图为它做任何例外 - 但它不适用于一行：

```
 awk -F\, '{ if ($1 !~ /[#]|^$/interface_name ) {print $2,$3,$4,$5,$6,$7} }' interface_name=lv0 /etc/network/ifaces
    192.168.0.1 255.255.255.0 192.168.0.255 4A:DD:00:00:01:0A up static
    172.20.8.1 255.255.248.0 172.20.15.255 4A:DD:00:FF:15:01 up static
    172.21.8.1 255.255.248.0 172.21.15.255 4A:DD:00:FF:15:02 down static
    10.10.0.1 255.255.255.0 10.10.0.255 40:FD:00:00:01:0A down static
    172.22.0.1 255.255.255.0 172.22.0.255 4A:DD:00:FF:15:04 down static
    172.22.1.1 255.255.255.0 172.22.1.255 4A:DD:00:FF:15:05 down static
    192.168.111.111 255.255.255.0 192.168.111.255 00:00:00:00:00:00 down static 
```

我怎么能为我的案子做呢？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T12:47:32.730

您已经在使用 awk 那么为什么要添加一个 shell 循环和一个 sed 命令呢？

看起来您要做的只是将 /etc/network/ifaces 中的值替换为具有相同接口名称的 $SPATH/ifaces 中的值。如果是这样，整个事情就是：

```
awk -F, 'NR==FNR{a[$1]=$0; next} {print ($1 in a ? a[$1] : $0}' $SPATH/ifaces /etc/network/ifaces > tmp && mv tmp /etc/network/ifaces 
```

看起来注释行和空白行不会成为问题，因为它们只会在无关紧要的文件之间匹配（空白为空白，每个文件中的前几行相同，并且没有注释掉“真正的”数据行在你的第二个文件中），但如果他们这样做了，那么在解析第一个文件时只需调整它以排除它们：

```
awk -F, 'NR==FNR{if (!/^(#|$)/) a[$1]=$0; next} {print ($1 in a ? a[$1] : $0}' $SPATH/ifaces /etc/network/ifaces > tmp && mv tmp /etc/network/ifaces 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T09:35:41.063

`awk`要根据变量匹配模式`bash`，您可以执行以下操作：

```
awk -v interface_name=$inter '$0 ~ interface_name {print $0}' inputfile 
```

此命令将 bash 变量传递`$inter`给`awk`变量`interface_name`（注意`-v`选项），然后过滤变量中包含字符串的所有行（带有`$0 ~ interface_name`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T10:32:55.753

已经这样做了，但非常感谢用户**user000001**

```
 awk -F\, '{ if ($1 !~ /[#]|^$/interface_name  && $1 ~ interface_name) {print $2,$3,$4,$5,$6,$7} }' interface_name=lv0 /etc/network/ifaces
    172.20.8.1 255.255.248.0 172.20.15.255 4A:DD:00:FF:15:01 up static 
```

# html - 定位固定 div 以粘贴在父级内部

> ID：14908589
> 
> 赞同：3
> 
> 时间：2013-02-16T08:51:50.027
> 
> 标签：html, css

我的代码是这样的，

## HTML

```
<div class="container">
    <div class="button"></div>
</div> 
```

## CSS

```
.container { position: relative; }
.button { position: fixed; top: 0; right: 0;  } 
```

这是一个响应式页面，当重新调整窗口大小时，容器的宽度会动态变化。即使页面正在滚动，我也想`.button`将容器内部粘贴在右上角。但是我的代码显示在屏幕右上角的`.button`外部。`.container`

请帮我解决这个问题。

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T08:58:44.423

你应该使用`position: absolute`这个。

```
.container { position: relative; }
.button { position: absolute; top: 0; right: 0; } 
```

[**JSFiddle 示例**](http://jsfiddle.net/ynt2f/)。

`position: fixed`定位在窗口上，而不是父级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T08:55:30.307

据我所知`position:fixed;`，与主窗口有关，而不是与父母有关。

# java - HIbernate Many to Many with self entity 使用注解

> ID：14908591
> 
> 赞同：0
> 
> 时间：2013-02-16T08:52:06.783
> 
> 标签：java, spring, hibernate, jakarta-ee, hibernate-annotations

我在休眠多对多关系中遇到问题。

我有一个名为的表`Projects`，其中包含以下字段：

> （项目编号、项目名称、创建日期、项目经理）

我还填充了一个名为`team`project(Multiple select Combobox) 的字段，它关联了多个项目成员。

因此，当我使用 Hibernate 将项目数据保存到`Projects`表中时，我希望`Project_team`生成另一个名为的表。它应包含以下字段：

> (project_id, team_member_id)

因此，例如，如果我输入诸如 (Project Title="ERP",Created Date="16/2/1013" ,Project Manager="XYZ") 之类的数据，我应该有另一个表 project_team (project_id=1, team_member_id=1)。

它会是自我多对多关系还是其他关系？我是否应该为 Team_member 制作另一个 bean，然后我必须执行多对多？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T09:29:22.360

`Team`您需要创建一个联结表来处理 a和 a之间的多对多关联`Project`，但是您不需要此联结表的 bean 或类。`PROJECT`以下示例将在和之间创建单向关联`PARTICIPANT`。您需要创建一个`TEAM_MEMBER`or`PARTICIPANT`表才能执行此关联。

**项目.java**

```
public class Project{

@ManyToMany(cascade={CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH}, targetEntity = Participant.class)
@JoinTable(name = "PROJECT_TEAM", joinColumns = { @JoinColumn(name = "TEAM_MEMBER_ID", referencedColumnName = "PROJECT_ID") }, 
inverseJoinColumns = { @JoinColumn(name = "PARTICIPANT_ID", referencedColumnName = "PARTICIPANT_ID") })

    private List<Participant> team = new ArrayList<Participant>();

    //Accessors - get/setTeam method
} 
```

此答案假定以下数据模型已到位：

```
CREATE TABLE PROJECT(
   PROJECT_ID int,
   PROJECT_TITLE varchar(50),
   CREATED_DATE DATE,
   PROJECT_MANAGER varchar(50)
);

CREATE TABLE PARTICIPANT(
   PARTICIPANT_ID int,
   NAME varchar(50),
   PROJECT_ID int
);

CREATE TABLE PROJECT_TEAM(
   PROJECT_ID int,
   PARTICIPANT_ID int
); 
```

# asp.net-mvc - ASP.NET MSTest Runner 通过浏览器运行单元测试

> ID：14908593
> 
> 赞同：1
> 
> 时间：2013-02-16T08:52:25.567
> 
> 标签：asp.net-mvc, asp.net-mvc-3, sitecore, sitecore6

我们正在构建一个 sitecore Web 应用程序，单元测试基于 MSTest。我查看了下面有 asp.net nunit 测试运行器的链接：http: [//www.codeflood.net/testrunner/](http://www.codeflood.net/testrunner/)

但是，我们不想将 nUnit 框架用于开箱即用的 MSTest 套装。如果有任何现有的测试运行器或者将 nUnit Test 运行器转换为 MSTest 运行器有多容易，有人可以帮忙吗？

我们要使用测试运行器的原因是在 HTTPContext 中运行单元测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T12:45:24.403

根据这个 stackoverflow[帖子](https://stackoverflow.com/questions/2054994/is-there-an-api-for-running-visual-studio-unit-tests-programmatically)，MSTest 使用的 API 是密封的和私有的，这不会帮助您公开模仿 NUnit TestSuiteBuilder 功能的测试运行器。

如果您有足够的决心，它仍然可以通过反射来完成，但是使用 MSTest 周围的技术限制来构建一个案例以将需要 Sitecore 上下文的单元测试迁移到 NUnit 可能会更简单。

# interface - uml 中的类与接口

> ID：14908612
> 
> 赞同：2
> 
> 时间：2013-02-16T08:55:32.053
> 
> 标签：interface, class-design, uml, class-diagram

正如我们在 OOP 中所知道的，接口提供了一组没有实现的操作，而类则相反。

在面向对象的设计中，我们使用 uml 接口有一组没有实现的操作，而类也有一组没有实现的操作（我知道类除了它的操作之外还有属性）？

***那么，UML 有什么区别呢？***

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T09:27:45.767

> 正如我们在 OOP 中所知道的，接口提供了一组没有实现的操作，而类则相反。

不完全正确 -*抽象*类是声明了一个或多个方法但未定义的类（在 C++ 和 Java 中，这些是*抽象*方法）。你可以定义一个类，它的所有方法都是抽象的——在这种情况下，它与接口非常相似。

不过，UML 中的一个关键思想是，接口是*暴露*给其他类或组件的一组方法。目的是定义一组操作。

然而，转向编程，可以将方法抽象化以帮助开发（例如，通过确保所有子类都有实现）。这个方法可能纯粹是类内部的。

最后一个观察：UML 中的术语接口和类并不完全等同于一种语言中的接口和类，比如 Java。例如，Java 不允许多*类*继承。相反，Java`interface`允许一个类实现多种类型（不是类 - 一个细微的区别）

**编辑**

速记技术用语：

*   **声明**：向系统说明变量或操作存在及其类型或签名
*   **定义**：与声明相同，但另外提供变量或操作的完整实现
*   **接口**：一组操作声明
*   **类型**：对象的接口和其他操作
*   **类**：对象的类定义（而不是声明）对象的实现方式，包括其内部状态和操作的实现

*定义是声明，类是类型。*
*（请参阅[Type 和 Class 有什么区别？](https://stackoverflow.com/questions/468145/what-is-the-difference-between-type-and-class)）*

> 接口的目的是定义一组操作，但我们是否对类也定义一组操作？

所以接口的目的是声明（而不是定义）一组其他对象想要使用的*公共操作。*一个类（在 UML 中）是一组完整的操作（公共的和私有的）。一个类（在 Java、C++ 等中）另外*定义了*所有非抽象操作。

所以关键是*意图*：当系统的其他组件要使用一组操作时，使用**接口**。当您使用 UML 来描述（组件、算法等的）实现时，请使用**class**。

> 当我去假设实现这些操作的类时，我看不到这些操作的任何实现，因为图表描述了这些操作或任何迹象表明实现？

[UML 工具](https://en.wikipedia.org/wiki/UML_tool)用于*建模*，因此故意避免提供输入操作定义的位置 - 留待以后使用。这个想法是你：

*   在 UML 中定义模型
*   使用 UML 工具生成目标语言的代码
*   （有些允许您将代码导入回工具中，以使用在实施期间所做的任何更改来修改模型。这称为“往返”建模，旧的[TogetherJ](https://en.wikipedia.org/wiki/Borland_Together)产品擅长于此）

这种故意的差距（您可能会说缺陷）意味着 UML 中的“定义”与“声明”是没有意义的。对不起。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T18:22:04.687

也许您刚刚看到了为描述概览而创建的模型，而不是对系统进行完全建模，但是您可以在大多数 UML 工具中对类操作的行为进行建模，并且某些工具还可以对可以[执行](http://en.wikipedia.org/wiki/Executable_UML)的行为进行充分建模。

可以使用 UML 状态机、使用 UML 动作语义或以其他几种方式对与操作相关的行为进行建模。很多时候，这在模型中被忽略了——去到那个级别的细节并不总是有用的，所以实现可能只是在与操作相关的文档中暗示。但是 UML 中的具体类肯定有与其操作相关的具体行为，所以 UML 和编程的区别在于 UML 侧重于*行为*而不是*实现*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T09:36:15.733

根据[维基百科](http://en.wikipedia.org/wiki/Unified_Modeling_Language#Structure_diagrams)-

> 统一建模语言（UML）是面向对象软件工程领域的标准化通用建模语言。统一建模语言包括一组图形符号技术，用于创建面向对象的软件密集型系统的可视化模型。

所以，最重要的是 UML 是通用的和图形化的。它不仅仅是关于类和接口。UML 提供了一种可视化系统架构蓝图的标准方法。软件建设需要一个计划。结构图、行为图、交互图有助于在多个维度和详细级别进行可视化，这适用于新系统和旧系统。统一通用，适应大型系统并行开发。

当我想到 UML 时，想到的一个术语是**软件质量**。近年来困扰软件行业的一件事是糟糕的软件设计。尽管软件行业在过去十年中表现相当不错，但全球化的影响正在改变软件的设计方式。

# ruby-on-rails - 带有 Rails 的 PDFKit 使用 render_to_string 创建格式错误的文本

> ID：14908614
> 
> 赞同：0
> 
> 时间：2013-02-16T08:55:56.277
> 
> 标签：ruby-on-rails, ruby, encoding, pdfkit

我正在使用 PDFKit 将部分视图呈现为 PDF 文件。但是，我在尝试使用 render_to_string （首选方法）而不是外部 Web 请求时遇到了一些问题。

**使用 url 呈现时的 pdf 文件：**

```
html = "#{root_url}/contracts/#{@contract.id}"
pdf = PDFKit.new(html, page_size: 'Letter').to_pdf 
```

![正确的文本](../Images/c36799694cd1ade316e8564ffa14ce74.png)

**使用 render_to_string 渲染时的 pdf 文件：**

```
html = render_to_string :partial => "agreement"
pdf = PDFKit.new(html , page_size: 'Letter').to_pdf
*from the console*
html => "\n\n<style>\n  #contract h2{text-align: center; margin-bottom: 10px;}\n  #contract em{font-weight: bold; text-decoration: underline; font-style: normal;}\n  #contract p.tab{margin-left: 25px;}\n  #contract ol{list-style:lower-alpha;}\n  #contract ol li{margin-left: 25px; font-size: 1em; line-height: 1.615em; color: #555; margin-bottom: 5px;}\n  #contract b{font-weight: bold;}\n  #contract p p{margin-left: 10px;}\n</style>\n<div id=\"contract\">\n <p>This agreement (“&lt;b>Agreement</b>”) is entered into... 
```

![格式错误的文本](../Images/3b91dbebd3fa33c1e10e460300abfb54.png)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T09:20:51.877

您在源部分中有弯曲的引号。控制台输出显示：

```
...<p>This agreement (“&lt;b>Agreement</b>”)... 
```

弯引号是 UTF-8 字符，但 PDFKit 默认将它们解析为 ASCII。看到[这个问题](https://stackoverflow.com/questions/7367187/how-to-use-utf-8-in-pdfkit-in-rails)。

* * *

**编辑**：传入直接呈现的字符串需要字符串使用 UTF-8 编码。Ruby 1.9 默认执行此操作。在 Ruby 1.8 中，尝试以下操作：

```
html = render_to_string :partial => "agreement", :encoding => "UTF-8" 
```

# php - 然后将 Wordpress 查询帖子放入数组

> ID：14908618
> 
> 赞同：0
> 
> 时间：2013-02-16T08:56:14.793
> 
> 标签：php, arrays, wordpress

我想将 WP_Query 输出到一个数组。例如我最近 10 个帖子标题的数组或最后一个帖子 url 的数组

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T13:48:09.383

如果你想将结果从`WP_Query()`另一个数组中收集，你可以试试这个：

```
$my_array=array();

// the query
$args=array('post_type' => 'post','posts_per_page'=>10,'orderby'=>'date', 'order'=>'ASC');
$my_query = new WP_Query($args);

if ($my_query->have_posts()) : 
    while ($my_query->have_posts()) : $my_query->the_post(); 
        $my_array[]=get_the_title(get_the_ID());
    endwhile;
endif;

// debug: 
print_r($my_array);
print_r($my_query); 
```

这个例子会给你最后10个帖子标题到数组中`$my_array()`

# asp.net - 在 ASP.NET 项目中附加 ASPNETDB，打开时出错

> ID：14908624
> 
> 赞同：0
> 
> 时间：2013-02-16T08:57:27.403
> 
> 标签：asp.net, sql-server-2008, aspnetdb

我在我的 ASP.NET 项目中附加了 ASPNETDB。快照是我尝试在服务器资源管理器中打开它时收到的错误消息。![在此处输入图像描述](../Images/34be2d52bb9860dbd4182b45c222c808.png)

我已经从这个文件夹运行了 aspnet_regsql.exe： **C:\Windows\Microsoft.NET\Framework\v4.0.30319**

我正在使用 .NET 4.0、VS2010 和 SQL Server 2008 R2

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T09:49:15.133

我的实例 SQLEXPRESS 没有升级。这就是导致问题的原因。

所以我从中得到的是我的 Sql Server 是 R2 但实例没有升级。

这个 [链接](https://stackoverflow.com/questions/6782206/i-have-sql-server-2008-r2-installed-but-i-still-cant-run-the-project-and-open?lq=1) 帮助我解决了这个问题。

谢谢。

# java - 格式化的剪贴板 Java

> ID：14908629
> 
> 赞同：4
> 
> 时间：2013-02-16T08:58:21.617
> 
> 标签：java, formatting, mime-types, clipboard, copy-paste

我在试图弄清楚如何在保存到系统剪贴板时保留 Java 程序中的文本格式时遇到问题。

它不适用于诸如 Microsoft 的 Wordpad 或 Lotus Symphony 之类的东西。相反，如果我在 Word 中创建一个格式化字符串并复制它，那么它可以在我尝试将其粘贴到的所有试用案例中正常工作。

我不想使用任何外部资源，例如 org.eclipse.*。

以下是我编译的一些链接，它们可能会帮助我指出正确的方向。

我觉得好像我没有使用正确的 Data Flavor？ [http://docs.oracle.com/javase/1.5.0/docs/api/java/awt/datatransfer/DataFlavor.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/awt/datatransfer/DataFlavor.html)

我发现这个链接谈了很多关于 dataflavors 的内容，但并没有说明将哪个链接用于格式化文本。我确实理解这在每个操作系统上可能都不一样，我需要检查以确保它在我正在使用的操作系统上受支持。

[http://www.javaworld.com/cgi-bin/mailto/x_java.cgi?pagetosend=/export/home/httpd/javaworld/javaworld/javatips/jw-javatip61.html&pagename=/javaworld/javatips/jw-javatip61。 html&pageurl=http://www.javaworld.com/javaworld/javatips/jw-javatip61.html&site=jw_core](http://www.javaworld.com/cgi-bin/mailto/x_java.cgi?pagetosend=/export/home/httpd/javaworld/javaworld/javatips/jw-javatip61.html&pagename=/javaworld/javatips/jw-javatip61.html&pageurl=http://www.javaworld.com/javaworld/javatips/jw-javatip61.html&site=jw_core)

感谢您在高级方面的所有帮助，我真的很感激！

担

**编辑**

我目前正在使用来自以下网址的一些代码：http: [//lists.apple.com/archives/java-dev/2004/Jul/msg00359.html](http://lists.apple.com/archives/java-dev/2004/Jul/msg00359.html)进行了一些小改动。我目前遇到的问题是我需要以两种不同的格式将数据传输到剪贴板。“text/rtf”和“text/plain”看到有些程序不支持RTF。我正在使用内部剪贴板来查看剪贴板内部的内容。我可以成功放置 RTF 或纯文本，但不能同时放置两者。当我这样做时，只会添加最后一个。非常感谢您的帮助！

总之，我不能同时使用两种不同的数据风格设置剪贴板。

```
import java.awt.datatransfer.*;
import java.io.*;

public class clipBoard
{
public static final String RTF_STRING = "{\\rtf1\\ansi\\deff0 {\\fonttbl {\\f0 Courier;}}\r  \n{\\colortbl;\\red0\\green0\\blue0;\\red255\\green0\\blue0;}\r\nThis line is the default color\\line\r\n\\cf2\r\n\\tab This line is red and has a tab before it\\line\r\n\\cf1\r\n\\page This line is the default color and the first line on page 2\r\n}\r\n";
public static final DataFlavor RTF_FLAVOR = new DataFlavor("text/rtf", "Rich Formatted Text");

public static void main(String[] args){
 Clipboard cb = Toolkit.getDefaultToolkit().getSystemClipboard();
 Transferable t = new MyTransferable(
 new ByteArrayInputStream(RTF_STRING.getBytes()), RTF_FLAVOR);
 cb.setContents(t, null);
}

static class MyTransferable implements Transferable
{
    private Object data = null;
    private DataFlavor flavor;

    public MyTransferable(Object o, DataFlavor df)
    { data = o; flavor = df; }

    public Object getTransferData (DataFlavor df) throws
    UnsupportedFlavorException, IOException
    {
        if (!flavor.isMimeTypeEqual(flavor))
            throw new UnsupportedFlavorException(df);
        return data;
    }

    public boolean isDataFlavorSupported (DataFlavor df)
    {
        return flavor.isMimeTypeEqual(df);
    }

    public DataFlavor[] getTransferDataFlavors()
    {
        DataFlavor[] ret = {flavor};
        return ret;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T08:04:00.157

在朋友塞巴斯蒂安和洛根的大量搜索和反复试验和帮助之后，似乎已经弄清楚了。这允许在 Java 中一次将多种格式的数据保存到剪贴板，同时还保留文本的样式和格式。希望这可以帮助某人。这也是一个很好的资源。[http://www.pindari.com/rtf1.html](http://www.pindari.com/rtf1.html)

```
import java.awt.*;
import java.awt.datatransfer.*;
import java.io.*;

public class clipBoard{
//Creates the RTF string 
private static final String RTF_STRING = "{\\rtf1\\ansi\\deff0\r\n{\\colortbl;\\red0\\green0\\blue0;\\red255\\green0\\blue0;}\r\nThis line is the default color\\line\r\n\\cf2\r\nThis line is red\\line\r\n\\cf1\r\nThis line is the default color\r\n}\r\n}";
//Creates the plain text string
private static final String PLAIN_STRING = "This line is the default color \n This line is red \n This line is the default color";
//Array of data for specific flavor
private static final Object data[] = {new ByteArrayInputStream(RTF_STRING.getBytes()),new ByteArrayInputStream(PLAIN_STRING.getBytes())};
//Plain favor
private static final DataFlavor PLAIN_FLAVOR = new DataFlavor("text/plain", "Plain Flavor");
//RTF flavor
private static final DataFlavor RTF_FLAVOR = new DataFlavor("text/rtf", "Rich Formatted Text");
//Array of data flavors
private static final DataFlavor flavors[] = {RTF_FLAVOR,PLAIN_FLAVOR};

public static void main(String[] args){
    //Create clip board object
    Clipboard cb = Toolkit.getDefaultToolkit().getSystemClipboard();
    //Create transferable object
    Transferable p = new MyTransferable(data,flavors);
    //Transfer to clip board
    cb.setContents(p, null);
}

static class MyTransferable implements Transferable{
    //Array of data
    private Object dataA[] = null;
    //Array of flavors
    private DataFlavor flavorA[] = null;

    //Transferable class constructor
    public MyTransferable(Object data[], DataFlavor flavors[]){
        //Set the data passed in to the local variable
        dataA = data;
        //Set the flavors passes in to the local variable
        flavorA = flavors;
    }

    public Object getTransferData (DataFlavor df) throws UnsupportedFlavorException, IOException{
        //If text/rtf flavor is requested
        if (df.getMimeType().contains("text/rtf")){
            //Return text/rtf data
            return dataA[0];
        }
        //If plain flavor is requested
        else if (df.getMimeType().contains("text/plain")){
            //Return text/plain data
            return dataA[1];
        }
        else{
            throw new UnsupportedFlavorException(df);
        }
    }

    public boolean isDataFlavorSupported (DataFlavor df){
        //If the flavor is text/rtf or tet/plain return true
        if(df.getMimeType().contains("text/rtf") || df.getMimeType().contains("text/plain")){
            return true;
        }
        //Return false
        else{
            return false;
        }
    }

    public DataFlavor[] getTransferDataFlavors(){
        //Return array of flavors
        return flavorA;
    }
 }
} 
```

# javascript - 使用 JavaScript 附加 SVG 对象

> ID：14908631
> 
> 赞同：0
> 
> 时间：2013-02-16T08:58:30.463
> 
> 标签：javascript, svg

我是 JavaScript 和 SVG 的新手，可以成功生成内联 SVG 对象并更改属性。

我还尝试剪切和粘贴代码以动态添加 SVG 对象，但没有成功。这是我尝试过的代码...

```
<html>
<head>
<script>
function setColor(color)
{
document.getElementById("rect").style.fill = color;
document.getElementById("rect").setAttribute("height",100);
document.getElementById("line").style.stroke = color;
document.getElementById("myLine").style.stroke = "blue";
}
    var myrect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
    myrect.setAttribute("id", "myrect"); 
    myrect.setAttribute("fill","red");
    myrect.setAttribute("stroke","black");
    myrect.setAttribute("stroke-width","5");
    myrect.setAttribute("x", "100");
    myrect.setAttribute("y", "100");
    myrect.setAttribute("width", "300");
    myrect.setAttribute("height", "300");
    svg.appendChild(myrect);
    </script>
</head>
<body>

<svg xmlns="http://www.w3.org/2000/svg" version="1.1" style="width: 300px; height: 250px">
<rect x="50" y="20" width="200" height="200" style="fill:red; stroke:black; stroke-width:3" id="rect" />

<line x1="0" y1="0" x2="200" y2="200" style="stroke:rgb(255,0,0);stroke-width:2" id="line"/>

<line x1="10" y1="10" x2="200" y2="200" style="stroke:rgb(255,0,0);stroke-width:5" id="myLine"/>

</svg>

<button onclick="setColor('red');">Red</button>
<button onclick="setColor('green');">Green</button>
<button onclick="setColor('blue');">Blue</button>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T09:05:20.927

您的问题是，您尝试修改 DOM 的某些部分，这些部分当时未解析。只需将`<script>`标签移动到页面底部并`<rect>`在此处创建标签即可：

```
<html>
<head>
<script>
function setColor(color)
{
document.getElementById("rect").style.fill = color;
document.getElementById("rect").setAttribute("height",100);
document.getElementById("line").style.stroke = color;
document.getElementById("myLine").style.stroke = "blue";
}
    </script>
</head>
<body>

<svg xmlns="http://www.w3.org/2000/svg" version="1.1" style="width: 300px; height: 250px" id="mySvg">
<rect x="50" y="20" width="200" height="200" style="fill:red; stroke:black; stroke-width:3" id="rect" />

<line x1="0" y1="0" x2="200" y2="200" style="stroke:rgb(255,0,0);stroke-width:2" id="line"/>

<line x1="10" y1="10" x2="200" y2="200" style="stroke:rgb(255,0,0);stroke-width:5" id="myLine"/>

</svg>

<button onclick="setColor('red');">Red</button>
<button onclick="setColor('green');">Green</button>
<button onclick="setColor('blue');">Blue</button>

<script>
    var svg = document.getElementById( 'mySvg' );
    var myrect = document.createElementNS( "http://www.w3.org/2000/svg", 'rect');
    myrect.setAttribute("id", "myrect"); 
    myrect.setAttribute("fill","red");
    myrect.setAttribute("stroke","black");
    myrect.setAttribute("stroke-width","5");
    myrect.setAttribute("x", "100");
    myrect.setAttribute("y", "100");
    myrect.setAttribute("width", "300");
    myrect.setAttribute("height", "300");
    svg.appendChild(myrect);
</script>
</body>
</html> 
```

此外，您应该明确选择`<svg>`元素然后添加到它。使用，例如， `getElementById()`为此。

**[工作示例小提琴](http://jsfiddle.net/LfF2H/)**

# ruby-on-rails - Rails 页面缓存附加了奇怪的符号

> ID：14908639
> 
> 赞同：0
> 
> 时间：2013-02-16T08:59:16.963
> 
> 标签：ruby-on-rails, ruby-on-rails-3, caching

当我在 rails 中启用页面缓存时，我注意到奇怪的字符`Â`被附加到像`©`,`«`和`»`.

例如

```
© Company 2013 
```

变成

```
Â© Company 2013 
```

并且

```
«  => Â« 
»  => Â» 
```

我不知道为什么会这样。有什么建议可以解决这个问题吗？

*   导轨 3.2.11
*   红宝石 1.9.3p194
*   网络服务器：WEBrick 1.3.1
*   操作系统 Ubuntu 12.10

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T12:13:37.427

可能与编码混淆。

尝试在打开 head 标签后立即将带有 UTF-8 字符集的元标头添加到您的应用程序中：

```
<meta http-equiv="content-type" content="text/html; charset=UTF-8" /> 
```

# android - 如何开始学习Android内核开发

> ID：14908644
> 
> 赞同：5
> 
> 时间：2013-02-16T08:59:35.847
> 
> 标签：android, linux-kernel, embedded-linux

我将开始在Android系统内核开发下工作，我没有想法。我所知道的是，我必须具备 Linux、c 和 C++ 方面的知识，而且我拥有所有这些知识，但我应该开始一些培训，所以我需要一些第一步。任何帮助，将不胜感激。谢谢大家

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T09:43:38.053

Android 内核（以及如何构建它们的基本构建说明）可以在[http://source.android.com/source/building-kernels.html](http://source.android.com/source/building-kernels.html)找到。你需要一个可root的手机来安装自定义内核，我会推荐Linux作为开发者平台。也许最好先写一些 USB 驱动程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T18:03:00.227

如果您没有可 root 的设备，请尝试为模拟器构建内核。这是明确给出步骤的链接。使用以下步骤在您的 linux 主机上尝试：

[使用 Android Emulator 编译和测试 Android 内核](https://stackoverflow.com/questions/1809774/android-kernel-compile-and-test-with-android-emulator)

和

[https://groups.google.com/forum/?fromgroups=#!topic/android-kernel/KsJhSEy4E1I](https://groups.google.com/forum/?fromgroups=#!topic/android-kernel/KsJhSEy4E1I)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T15:25:39.197

我不确定这是否有用，但您可以咨询您正在使用或想要使用的硅制造商。我知道飞思卡尔有完整的 Android 构建树（包括 u-boot 和 Linux）可用。我怀疑其他公司会有类似的构建树，特别是如果他们有可用于特定芯片的参考平台。在手机市场之外，Android 本身是一种嵌入式操作系统，已包含在自动售货机等产品中。

# iphone - 尝试使用 facebook Scrumptious 登录时出错

> ID：14908645
> 
> 赞同：0
> 
> 时间：2013-02-16T08:59:44.957
> 
> 标签：iphone, facebook, ios6

尝试使用 facebook Scrumptious 登录时，它显示以下错误，我应该在哪里访问 facebook id？

```
2013-02-16 14:23:21.283 roulocalapp[2378:c07] Application tried to push a nil view 
controller on target <UINavigationController: 0x945b180>.
2013-02-16 14:23:21.288 roulocalapp[2378:c07] *** Terminating app due to uncaught
exception 'com.facebook.sdk:InvalidOperationException', reason: 'FBSession: No AppID 
provided; either pass an AppID to init, or add a string valued key with the appropriate
id    named FacebookAppID to the bundle *.plist' 
```

![在此处输入图像描述](../Images/58864ceb8f28f5c3224fd8e72d692d25.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T09:06:12.377

请按照以下步骤解决您的问题：

在 Xcode 中打开你的项目。

在您支持的文件中找到 yourprojectname.plist 文件。

添加一个名为“FacebookAppID”的条目并将其值设置为“fb12786126112789”（使用您的应用程序 ID，前面带有“fb”）

添加一个 URL 类型，确保它是一个字典，在第 0 项，添加 'URL Schemes' 并在其中添加一个字符串，它应该是您的应用程序 ID - 类似于这个 'fb12786126112789'（确保它应该以 fb' 开头） .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-03T01:00:58.587

我有同样的问题，发现我在 FacebookAppID 的末尾有一个空格，因为我复制粘贴了名称。我的 .plist 密钥是“FacebookAppID” - 仔细检查您的密钥是否包含任何空格。

# delphi - 如何通过代码在delphi中设置Timage wrapmode？

> ID：14908648
> 
> 赞同：0
> 
> 时间：2013-02-16T08:59:47.477
> 
> 标签：delphi, firemonkey

（使用 firemonkey 和 xe3）。嗨，我创建了一个 img。

```
 img := Timage.Create(fsbCanvas);
  with img do
    begin
      Parent:=fsbCanvas;
      position.X:=frmMainUI.CurrentMouseX;
      position.y:=frmMainUI.CurrentMouseY;
      Bitmap.LoadFromFile('1.jpg');
      Visible:=true;
    end; 
```

现在我想将它的 wrapmode 设置为 iwStreach。所以我添加了这个： `Timagewrapmode.iwStreach`但我收到一条错误消息，提示“预期语句但找到表达式”。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T09:17:50.217

您必须以`WrapMode`这种方式设置图像属性：

```
img.WrapMode := TImageWrapMode.iwStretch; 
```

请注意，枚举必须使用其类型名称完全限定。

这是因为编译器指令[`"$SCOPEDENUMS"`](http://docwiki.embarcadero.com/RADStudio/XE3/en/Simple_Types#Scoped_Enumerations)在`FireMonkey`应用程序中默认处于启用状态。

# php - 根据收件人字段中的地址路由传入的电子邮件

> ID：14908651
> 
> 赞同：0
> 
> 时间：2013-02-16T09:01:12.770
> 
> 标签：php, email, mta

如何配置邮件服务器来解析每条传入消息的“TO”字段，如果它是表单，`<uniqueID>.CommonID.User1@domain.com`则将电子邮件路由到 user1@domain.com。否则交付给预期的收件人。看来我需要在 MTA 中配置/创建一个处理程序。我应该使用 SMTP 中继吗？

作为一个附带问题，Godaddy 是否公开了这种类型的功能，因为我目前正在通过它们托管我的网页和电子邮件服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T10:48:03.147

使用 Procmail 很容易做到这一点。

```
:0
* ^To: <uniqueID>\.CommonID\.User1@domain\.cim
! User1@domain.com 
```

目前尚不清楚应该表示什么`<uniqueID>`，`CommonID`但如果它们可以表示为正则表达式，那么您就大功告成了。

LDA 可以将标准输入的电子邮件传递给您编写的任何程序。Procmail 专门用于此目的，因此即使您想用 PHP 编写程序，从 Procmail 调用它而不是直接从 LDA 调用它也可能有意义。

# php - 图像的表创建不同的外键

> ID：14908652
> 
> 赞同：0
> 
> 时间：2013-02-16T09:01:22.080
> 
> 标签：php, mysql

我有一个插入更多 3 个表的代码。发生的情况是，如果我同时创建一个新帐户，我会在图像表中为该帐户上传图像。该代码做得很好，但现在的问题是它为每个图像提供了一个唯一的引用 user_Id，但为该用户上传的所有图像都应该具有来自用户表的相同 ID。我正在使用一个关系数据库，其中用户表有一个主键 user_id 作为外键引用其他表。下面是我的代码： 蚂蚁帮助将不胜感激。

```
<?php
#connect to the db
require_once('db.inc.php');
?>
<?php
#code to deal with the picture uploads 
#target folder 
$target = 'image_uploads/';
  if(isset($_FILES['image_name'])===true){
  $files = $_FILES['image_name'];
  for($x = 0 ; $x < count($files['name']); $x++){
  $name = $files['name'][$x] ;
  $temp_name = $files['tmp_name'][$x];
  #extention filter it takes only the extension  want 
$allowed ='gif,png,jpg,pdf';
$extension_allowed= explode(',',$allowed );  
$file_extention = pathinfo($name, PATHINFO_EXTENSION);
if(array_search($file_extention,$extension_allowed)){
}else {
echo 'We only allow gif, png ,jpg';
  exit();
} #extention  filter ends here 
  #check the size of the image 
  $file_size = $files['size'][$x];
  if($file_size > 2097152){
  echo 'The file should be lesS than 2MB';
  exit();
  }
    #check the size of the image  ends here
  #Rename images 
  $sub = substr(md5(rand()),0,7);
  #the above generates char and numbesr 
  $rand = rand(0,100000);
  $rename = $rand.$sub.$name;
  #Rename images ends here
  $move = move_uploaded_file($temp_name,$target.$rename); 

#code to deal with the picture uploads ends here 
?>
<?php 
$date_created= date('y-m-d h:i:s a');
$username=(isset($_POST['username']))? trim($_POST['username']): '';
$Previllage =(isset($_POST['Previllage']))? trim($_POST['Previllage']): '';
#second tanble values 
$title=(isset($_POST['title']))? trim($_POST['title']): '';
$firstname=(isset($_POST['firstname']))? trim($_POST['firstname']): '';
$lastname=(isset($_POST['lastname']))? trim($_POST['lastname']): '';
$client_code=(isset($_POST['client_code']))? trim($_POST['client_code']): '';
$job_approval=(isset($_POST['job_approval']))? trim($_POST['job_approval']): '';
$address=(isset($_POST['address']))? trim($_POST['address']): '';
$cell=(isset($_POST['cell']))? trim($_POST['cell']): '';
$tel=(isset($_POST['tel']))? trim($_POST['tel']): '';
$email=(isset($_POST['email']))? trim($_POST['email']): '';
$company=(isset($_POST['company']))? trim($_POST['company']): '';
$province=(isset($_POST['province']))? trim($_POST['province']): '';
$username= substr(md5(rand()),0,7);
$Pas=substr(md5(rand()),0,4);
$Password =(md5($Pas));
$user =(isset($_POST['$user']))? trim($_POST['$user']): '';
$ip_address = $_SERVER['REMOTE_ADDR'];
try{
$query="INSERT INTO tish_user(username,Password,Previllage,date_created)
VALUES(:username,:Password,:Previllage,:date_created)";
$insert = $con->prepare($query);
$insert->execute(array(
':username'=>$username,
':Password'=>$Password,
':Previllage'=>$Previllage,
':date_created'=>$date_created));
#end of first table
################################################
#You select the first Id and put it in a variable then 
$id_last = ("SELECT LAST_INSERT_ID()");
$result =$con->prepare($id_last);
$result->execute();
$last_id = $result->fetchColumn();
############################## Last Id query Ends here
#insert into  clientinfo table 
$clientinfor="INSERT INTO tish_clientinfo(title,firstname,lastname,user_id)
VALUES(:title,:firstname,:lastname,$last_id)";
$clientinfor_insert = $con->prepare($clientinfor);
$clientinfor_insert->execute(array(
':title'=>$title,
':firstname'=>$firstname,
':lastname'=>$lastname));
#end of clien infor 
################################################
$security="INSERT INTO tish_security(ip_address,user_id)
VALUES(:ip_address,$last_id)";
$security_insert = $con->prepare($security);
$security_insert->execute(array(
':ip_address'=>$ip_address));
##########################end of security 
############ images 
$images ="INSERT INTO tish_images(user_id,image_name,date_registered)
VALUES($last_id,:image_name,:date_registered)";
$images_insert = $con->prepare($images);
$images_insert->execute(array(
':image_name'=>$rename,
':date_registered'=>$date_created));
############# property table##########################################################
/*$property ="INSERT INTO tish_propertyinfo(user_id,date_registered)
VALUES($last_id,:date_registered)";
$property_insert = $con->prepare($images);
$property_insert->execute(array(':date_registered'=>$date_created));
*/}catch(PDOException $e){
echo $e->getMessage();
}

  } 
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T09:05:27.463

图像表中的 user_id 是否有自动增量？并且 checknwether $last_id 包含任何内容，我认为ni 是 NULL。

# asp.net - 背景颜色不添加

> ID：14908658
> 
> 赞同：0
> 
> 时间：2013-02-16T09:01:56.827
> 
> 标签：asp.net, html, css, background-color

我有一张桌子：

```
<div class="Bar" > 
        <table width="100%">
            <tr>
                <td width="20%">
                   <asp:LinkButton ID="LnkHome" runat="server" ForeColor="Black" Text="Home"></asp:LinkButton>
                </td>
                <td width="20%">
                                   </td>
                <td width="20%">
                                  </td>
                <td width="20%">
                                   </td>
                <td width="20%">

                </td>
            </tr>
        </table>
    </div> 
```

我尝试通过css在桌子上添加背景颜色

```
.Bar table tr td
{
    background-color:Maroon;

    } 
```

但没有给出背景颜色。感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T09:10:59.377

**css**

```
 .Bar table tr td
        {
            background-color: Maroon;
            height:50px;
        } 
```

**html**

```
<div class="Bar">
        <table width="100%">
            <tr>
                <td width="20%">Hello
                </td>
                <td width="20%">Hello
                </td>
                <td width="20%">Hello
                </td>
                <td width="20%">Hello
                </td>
                <td width="20%">Hello
                </td>
            </tr>
        </table>
    </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T09:08:28.317

我试过了，有效

[小提琴](http://jsfiddle.net/vals/59rTL/)

```
<div class="Bar" > 
    <table width="100%">
        <tr>
            <td width="20%">aaaaaaaaaaaa</td>
            <td width="20%"></td>
            <td width="20%">aaa
                              </td>
            <td width="20%">
                               </td>
            <td width="20%">

            </td>
        </tr>
    </table>
</div>

.Bar table tr td
{
    background-color:Maroon;
    color: white;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T09:12:08.153

它工作正常。我认为你的问题来自`<td></td>`标签，那是空的。看到这里[http://jsfiddle.net/sYfLR/](http://jsfiddle.net/sYfLR/)

# php - 如何从文件路径中删除重复的斜杠

> ID：14908662
> 
> 赞同：-2
> 
> 时间：2013-02-16T09:02:32.067
> 
> 标签：php

这个问题之前已经被问过并且没有任何答案就关闭了

第二次幸运，我之前的问题被关闭了：[https](https://stackoverflow.com/questions/14903375/php-clean-up-path-with-duplicate-slashes) ://stackoverflow.com/questions/14903375/php-clean-up-path-with-duplicate-slashes看起来我错过了问号以明确我的问题曾是。

问题：

1.  如何从字符串中删除重复的斜杠？请参阅下面的代码和示例。
2.  windows（wamp）如何支持使用正斜杠的文件路径？写 c:/wamp 感觉不对，但似乎工作正常，这是我不确定的原因。

代码：

```
<?php
function clean($full_path){
    return str_replace(array("\\", "//", "\/", "/\"), DIRECTORY_SEPARATOR, $full_path);
}

$paths = array(
 'var/www/tpl//main.tpl',
 'C:\wamp\www\/tpl\\main.tpl',
 'C:\wamp\www/\tpl\main.tpl');

 foreach($paths as $path){
     echo "Before: $url\nAfter:  ".clean($path)."\n---------------------\n";
 }
 ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T09:05:37.240

我认为你需要逃避反斜杠。尝试这个：

```
<?php

function clean($full_path){
    return str_replace(array(
        "\\\\",
        "\\/", 
        "//", 
        "\\/", 
        "/\\"), DIRECTORY_SEPARATOR, $full_path);
}

$paths = array(
 'var/www/tpl//main.tpl',
 'C:\wamp\www\/tpl\\main.tpl',
 'C:\wamp\www/\tpl\main.tpl');

 foreach($paths as $path){
     echo "Before: $path <br/> After:  ".clean($path)."<br/>---------------------<br/>";
 }

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T09:16:23.877

> windows（wamp）如何支持使用正斜杠的文件路径？写 c:/wamp 感觉不对，但似乎工作正常，这是我不确定的原因。

PHP 很好地支持了这一点。实际上，多年来，您可以直接使用它，而不是[`DIRECTORY_SEPARATOR`](http://php.net/dir.constants)因为它有助于轻松编写跨平台代码。

但是请注意这是 WAMP 中的网络共享：

```
\\host\share\path\to\file.ext 
```

所以“只是”删除双斜杠实际上是一个坏主意。您可能想要的称为[`realpath`](http://php.net/realpath).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T09:19:31.617

您可以使用`preg_match();`或`str_replace();`。

# eclipse - 开始将 Eclipse GIT 与现有项目一起使用...项目文件被移动

> ID：14908665
> 
> 赞同：4
> 
> 时间：2013-02-16T09:03:31.473
> 
> 标签：eclipse, git, version-control

[昨天我想按照http://www.vogella.com/articles/EGit/article.html](http://www.vogella.com/articles/EGit/article.html)上的说明开始在现有项目上使用 Eclipse eGIT

本教程建议将 git 存储库放在工作区之外，我遵循了这个建议。

在步骤“5.5。使用 Git Staging 视图进行初始提交”之后，我提交了我的初始提交。然后我继续编辑我仍然打开的源文件之一。但是当我试图保存我的更改时，Eclipse 抱怨源文件不再存在。

然后我检查了我的工作区和 git 文件夹，项目文件只在 git 中。教程中没有提到这一点。这是正常行为吗？

更令人惊讶的是：为了继续正常使用我已经打开的文件，我`copied`将项目子文件夹从 .git 返回到工作区文件夹。现在一切似乎都很好。我的更改反映在工作区文件夹以及 Git 暂存视图和 git 文件夹中的“未暂存更改”中。

这是预期的行为吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T00:07:59.477

我发现文件真的被移动了。我需要关闭所有打开的项目文件，然后再次从包资源管理器中打开它们（这将从 git 存储库中打开文件）。

# javascript - 检查网站的内容变化

> ID：14908666
> 
> 赞同：0
> 
> 时间：2013-02-16T09:03:55.853
> 
> 标签：javascript, google-chrome-extension

我正在尝试编写一个**Google chrome 扩展程序**，它可以检查网站的任何新文章（内容更新）。由于这必须使用**javascript 代码**来完成，所以我如何监控任何使用 javascript 代码知道其 web url 的给定网站。

任何与此相关的教程或文章都会非常有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T09:10:49.143

你没有说你需要用所说的信息做什么，但一个非常简单的方法是抓取网站并为每个页面创建一个 md5 哈希（或任何哈希），并将其与存储的哈希值进行比较。如果它不是相同的值，则发生了一些变化（可能是非常小的变化，但您没有指定需要多大的变化）。

可以在[http://pajhome.org.uk/crypt/md5/](http://pajhome.org.uk/crypt/md5/)上找到示例 JavaScript 哈希码。

# java - 每次在android中单击按钮时如何在listview中显示EditText的值

> ID：14908670
> 
> 赞同：0
> 
> 时间：2013-02-16T09:04:20.323
> 
> 标签：java, android

我有两个 EditText 字段**，即名称和标记以及一个添加按钮。**

每次单击“添加”按钮时，我都必须显示 EditText 值。

但是，我只能在列表视图上显示一个值。

当我再次单击“添加”按钮时，其先前的值将被删除，而较新的值将显示在列表视图中。

我想在列表视图中填充整个列表。

```
public class MainActivity extends Activity {
EditText name1;
EditText marks1;
private ListView lv;
ArrayAdapter<String> aa;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState); 
   requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
        WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.activity_main);

    TextView markshee = (TextView)findViewById(R.id.textView3); 
    markshee.setText("");

    Button btnAdd = (Button) findViewById(R.id.button1);
    btnAdd.setOnClickListener(new Button.OnClickListener() {

        public void onClick(View v) {

            try{
                name1 = (EditText)findViewById(R.id.editText1);   
                 String name = name1.getText().toString();

                marks1 = (EditText)findViewById(R.id.editText2);   
                String marks = marks1.getText().toString();

                if(name.equals("") || marks.equals("")){

                    String str="Don't Leave any field blank !";

                    Toast toast = Toast.makeText(MainActivity.this, str, Toast.LENGTH_SHORT);
                    toast.setGravity(Gravity.CENTER, 0, 0);
                    toast.show();
                   }
                   else { 

                        TextView marksheet = (TextView)findViewById(R.id.textView3); 
                        marksheet.setText("Marks Sheet");
                        marksheet.setTextColor(Color.BLUE);

                        TextView nam = (TextView)findViewById(R.id.textView4); 
                        nam.setText("Name");
                        nam.setTextColor(Color.RED);

                        TextView mar = (TextView)findViewById(R.id.textView5); 
                        mar.setText("Marks");
                        mar.setTextColor(Color.RED);

                    name1.setText("");
                    marks1.setText("");

                    lv = (ListView) findViewById(R.id.listView1);
                    lv.setItemsCanFocus(true);

                   ArrayList<String> data = new ArrayList<String>();
                     data.add("  "+name+"                         "+marks);

                     aa =      
                     new ArrayAdapter<String>(MainActivity.this,android.R.layout.simple_list_item_1, data);

                     lv.setAdapter(aa); 

                   }
                }catch(Exception ex)
                {
                    System.out.println(ex.getStackTrace());
                }
         }
    });

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T09:12:37.203

试试这个：你声明 ArrayList 是公共的，否则它会在每次点击和 sotre 最后一个项目时创建

```
 public class MainActivity extends Activity {
 EditText name1;
  EditText marks1;
 private ListView lv;
 ArrayAdapter<String> aa;
 ArrayList<String> data = new ArrayList<String>();
 @Override
 protected void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState); 
 requestWindowFeature(Window.FEATURE_NO_TITLE);
 getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
    WindowManager.LayoutParams.FLAG_FULLSCREEN);
setContentView(R.layout.activity_main);

TextView markshee = (TextView)findViewById(R.id.textView3); 
markshee.setText("");

Button btnAdd = (Button) findViewById(R.id.button1);
btnAdd.setOnClickListener(new Button.OnClickListener() {

    public void onClick(View v) {

        try{
            name1 = (EditText)findViewById(R.id.editText1);   
             String name = name1.getText().toString();

            marks1 = (EditText)findViewById(R.id.editText2);   
            String marks = marks1.getText().toString();

            if(name.equals("") || marks.equals("")){

                String str="Don't Leave any field blank !";

                Toast toast = Toast.makeText(MainActivity.this, str, Toast.LENGTH_SHORT);
                toast.setGravity(Gravity.CENTER, 0, 0);
                toast.show();
               }
               else { 

                    TextView marksheet = (TextView)findViewById(R.id.textView3); 
                    marksheet.setText("Marks Sheet");
                    marksheet.setTextColor(Color.BLUE);

                    TextView nam = (TextView)findViewById(R.id.textView4); 
                    nam.setText("Name");
                    nam.setTextColor(Color.RED);

                    TextView mar = (TextView)findViewById(R.id.textView5); 
                    mar.setText("Marks");
                    mar.setTextColor(Color.RED);

                name1.setText("");
                marks1.setText("");

                lv = (ListView) findViewById(R.id.listView1);
                lv.setItemsCanFocus(true);

                 data.add("  "+name+"                         "+marks);

                 aa =      
                 new ArrayAdapter<String>(MainActivity.this,android.R.layout.simple_list_item_1, data);

                 lv.setAdapter(aa); 

               }
            }catch(Exception ex)
            {
                System.out.println(ex.getStackTrace());
            }
     }
});

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T09:10:55.893

不要创建和初始化你的`data`inside `onClick`，而是尝试在`onCreate`方法中初始化它，然后在里面`onClick`添加新条目：

```
ArrayList<String> data = new ArrayList<String>();
Button btnAdd = (Button) findViewById(R.id.button1);
btnAdd.setOnClickListener(new Button.OnClickListener(){

     public void onClick(View v) {
          .....
          .....
          .....
          data.add("  "+name+"                         "+marks);
          ....
      }
} 
```

使用您现有的代码，当您的`onClick`方法被调用时，您`data`每次都会创建一个新列表并向其中添加一个条目，因此它只显示一个值。

**更新：**

让我们看一个例子：假设有一个类，我需要在调用一个方法时获得增量值，`getIncrementValue`每次调用它时都应该返回当前值 +1。

这是它的代码：

```
public class MyClass{
  public int getIncrementValue(){

    int a = 0;
    a = a+1;
    return a;
  }
} 
```

现在，如果我像这样调用此方法：

```
MyClass m = new MyClass();
System.out.println(m.getIncrementValue()); //prints  1
System.out.println(m.getIncrementValue()); //prints  1  should print 2 right
System.out.println(m.getIncrementValue()); //prints  1  should print 3 right 
```

您会看到，每次它只打印一个值而不是递增值。

这是因为每次我调用`getIncrementValue()`时，我都在声明和初始化一个新变量`a = 0`并递增它并返回它，因此每次它递增到 1 并返回 1（而不是 2 和 3 等等）

为此，我需要稍微更改我的类，`variable a`在该方法之外声明使其成为类变量（在您的情况下`ArrayList<String> data = new ArrayList<String>();`，在该行之后声明`ArrayAdapter<String> aa;`）

公共类 MyClass{ int a = 0; 公共 int getIncrementValue(){ a = a+1; 返回一个；} }

现在，如果我像这样调用此方法：

```
MyClass m = new MyClass();
System.out.println(m.getIncrementValue()); //prints  1
System.out.println(m.getIncrementValue()); //prints  2  should print 2 right
System.out.println(m.getIncrementValue()); //prints  3  should print 3 right 
```

现在您可以理解为什么您的代码会发生这种情况。

所以试着稍微调整一下你的代码，它会没事的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-03T12:39:18.567

根据您的问题，我为您做了一些事情..我创建了两个编辑文本作为名称和标记，并创建了两个列表名称作为 list 和 list2...和一个添加按钮...运行此代码，**您的 min sdk 版本应该是 11** .. 否则它将不起作用....当您在编辑文本框中输入值并单击添加按钮时，这些值将显示在两个不同的列表中，并且永远不会删除以前的值.....按照我的代码。 ..

**MainActivity.java**

```
package com.example.textview;

import java.util.ArrayList;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ListView;

public class MainActivity extends Activity {

EditText Name, Marks;
Button Add;
ListView lv, lv2;

ArrayList<String> list = new ArrayList<String>();
ArrayAdapter<String> adapter;
ArrayList<String> list2 = new ArrayList<String>();
ArrayAdapter<String> adapter2;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
      Name=(EditText)findViewById(R.id.name);
      Marks=(EditText)findViewById(R.id.marks);

      Add=(Button)findViewById(R.id.add);

      lv=(ListView)findViewById(R.id.list);  
      lv2=(ListView)findViewById(R.id.list2);  

  adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, list);
      lv.setAdapter(adapter);
  adapter2 = new ArrayAdapter<String>(this,    android.R.layout.simple_list_item_activated_1, list2);
      lv2.setAdapter(adapter2);

      Add.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {

                 String name = Name.getText().toString();
                 String marks = Marks.getText().toString();
                    if(name.length() > 0 && marks.length() > 0)
                    {
                        list.add(name);
                        adapter.notifyDataSetChanged();
                        list2.add(marks);
                        adapter2.notifyDataSetChanged();

                    }
            }
            });

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

 } 
```

**activity_main.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".MainActivity" >

<ListView
    android:id="@+id/list"
    android:layout_width="match_parent"
    android:layout_height="200dp"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_toLeftOf="@+id/textView2" >

</ListView>

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/list"
    android:layout_marginTop="36dp"
    android:text="Enter name"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<EditText
    android:id="@+id/name"
    android:layout_width="80dp"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/list"
    android:layout_alignRight="@+id/textView1"
    android:layout_below="@+id/textView1"
    android:layout_marginTop="15dp"
    android:ems="10"
    android:inputType="textPersonName" >

    <requestFocus />
</EditText>

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/textView1"
    android:layout_alignBottom="@+id/textView1"
    android:layout_marginLeft="28dp"
    android:layout_toRightOf="@+id/textView1"
    android:text="Enter marks"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<ListView
    android:id="@+id/list2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_above="@+id/textView1"
    android:layout_alignLeft="@+id/textView2"
    android:layout_alignParentTop="true"
    android:layout_alignRight="@+id/textView2" >

</ListView>

<EditText
    android:id="@+id/marks"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/name"
    android:layout_alignLeft="@+id/textView2"
    android:layout_alignRight="@+id/textView2"
    android:ems="10" />

<Button
    android:id="@+id/add"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/name"
    android:layout_marginTop="33dp"
    android:layout_toRightOf="@+id/name"
    android:text="ADD" />

</RelativeLayout> 
```

**你的 min sdk 版本应该是 11**

# html - HTML 加载页面 à la blogger.com

> ID：14908680
> 
> 赞同：0
> 
> 时间：2013-02-16T09:06:51.740
> 
> 标签：html, css

我正在尝试确定最简洁的方式来实现一个简短的加载屏幕，该屏幕将显示给我的网站的访问者，而 JavaScript 在后台加载一些数据，对其进行处理并相应地更新 DOM。

我喜欢 blogger.com 对其主题之一所做的事情，特别是[这个](http://blog.datomic.com/)主题。它似乎完全用灰色背景填充屏幕，顶部有一个旋转图像，然后在所有基础工作完成后淡出。

有没有人碰巧知道他们是如何达到这种效果的？我只是在 Firebug 中闲逛并没有走得太远。看起来它没有被隐藏或从 DOM 中删除。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T09:20:07.233

```
<script type="text/javascript">

function removeOverlay(){
//code to remove the div waiting overlay
}
</script>

<body onload="removeOverlay()">

<div id='mainContainer'>

// this overlay style is in one word ugly, modify it to your style :p

<div id='waitiongOverlay' style='position:absolute;border:1px solid red; background:red; top:0; left:0; width:99%; height:99%; z-index:100;'></div>

</div>
</body> 
```

# django - 从表单django将数据插入表中

> ID：14908684
> 
> 赞同：0
> 
> 时间：2013-02-16T09:08:05.230
> 
> 标签：django, django-models, django-views

我想将表单中的数据插入数据库。以下是型号：

```
from django.db import models
from django.forms import ModelForm
# Create your models here.

class Recipe(models.Model):
title=models.CharField(max_length=200)

class User(models.Model):
fname=models.CharField(max_length=30)
lname=models.CharField(max_length=30)

class Recipe2User(models.Model):
user_id=models.ForeignKey(User)
recipe_id=models.ForeignKey(Recipe)

class Ingredient(models.Model):
recipe_id=models.ForeignKey(Recipe)
name=models.CharField(max_length=200)

class Prepration_step(models.Model):
recipe_id=models.ForeignKey(Recipe)
step=models.CharField(max_length=1000)

class RecipeForm(ModelForm):
class Meta:
    model=Recipe
 fields=['title'] 
```

我创建了一个包含食谱名称、成分和准备步骤的表格。
下面是处理帖子的视图：

```
def createRecipe_form(request):
  c = {}
  c.update(csrf(request))
  return render_to_response('create.html',c)

def create_recipe(request):
    if request.method == 'POST':
       form=RecipeForm(request.POST)
       if form.is_valid():
         title=form.cleaned_data['recipe_name']
         r=Recipe(title)
         r.save()
         return HttpResponseRedirect('display.html')
       else:
         form=RecipeForm()
         return  render(request, 'create.html', {
        'form': form,
    }) 
```

这是我创建的 html 表单

```
 <html>
    <head>
    <title>Create-Recipe</title>
    </head>
    <body>
    <h1>My Recipe-Create a recipe</h1>
        <form action="/recipe/submit-recipe/" method="post">
        {% csrf_token %}
          {% if errors %}
         <div id="errors">
            <ul>
        {% for error in errors %}
        <li>{{ error }}</li>
        {% endfor %}
    </ul>
    </div>
{% endif %}
    Title:
    <input type="text" name="recipe_name" placeholder="Ex:Gobi Masala"><br>

    Ingredient:
    <textarea rows="4" name="recipe_ingredient" cols="50" placeholder="Ex: 2 cups rice,1/2 teaspoon oil"></textarea><br>

    Preparation:
    <textarea rows="4" name="recipe_preparation" cols="50" placeholder="Ex:Pour oil in frying pan,Fry onions till they turn light brown"></textarea><br>

    <input type="submit" value="OK">
</form> 
```

请告诉我如何在食谱、配料和 Prepration_step 表中插入食谱标题、配料和步骤，因为我是 django 的新手。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T09:17:59.080

**表格.py**

```
class RecipeForm(ModelForm):
    class Meta:
        model = Recipe 
```

**视图.py**

```
def create_recipe(request):
    if request.method == 'POST':
        form=RecipeForm(request.POST)
        if form.is_valid():
            form.save()
            return HttpResponseRedirect(reverse('app_name:url_name'))
    return  render(request, 'create.html', {
        'form': RecipeForm(),
    }) 
```

**html**

```
<form action="/recipe/submit-recipe/" method="post">
    {% csrf_token %}
    {{form.as_p}}
    <input type="submit" value="OK">
</form> 
```

# version-control - 开始使用化石

> ID：14908687
> 
> 赞同：3
> 
> 时间：2013-02-16T09:08:17.537
> 
> 标签：version-control, fossil

我刚开始接触化石。我选择化石的原因是：

*   跨平台
*   单个可执行文件
*   单个存储库文件（典型扩展名 .fossil）
*   据说很容易使用（但它们不是全部吗？）

我有几个问题。上下文：假设我想跟踪几个目录中每个文件的更改，这些目录恰当地命名为 dir1、dir2 等。假设我想在 U 盘上保留一份副本。假设当我在 Linux 和 Windows 分区之间来回移动时，我想在同一张磁盘的另一个分区上保留一份副本。我是唯一的用户，可能并不总是可以访问互联网。

1.  我想将 dir1.fossil 存储在 dir1 之外。我可以这样做吗？用户手册说明告诉我从 dir1 内部创建 dir1.fossil，这就是当前在我的设置中创建 dir1.fossil 的位置。理想情况下，我希望将我的 dir1.fossil、dir2.fossil 等文件一起存储在另一个目录中，例如名为fossilreposdir 并位于根目录下。可能的？

2.  我想将一个 USB 闪存驱动器插入我的笔记本电脑，并以即插即用的方式从中推/拉存储库。

3.  如果可能的话，我还想在不使用 USB 记忆棒的情况下跨我的 windows 和 linux 分区推/拉存储库。

如果设置它太让人头疼（对于我可怜的脑袋），我将求助于简单的 .fossil 存储库来回复制粘贴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T15:21:19.827

1.  是的。

2.  是的。

3.  你想用什么？我，我使用 Dropbox 来保存我的存储库。然后每台使用 Dropbox 注册的机器都可以访问我的所有存储库。

> ```
> // into working directory
> cd ../dir1
> // create repository somewhere else
> fossil new ../fossilreposdir/test.fsl
> // open remote repo in local working directory
> fossil open ../fossilreposdir/test.fsl test.fsl
> // add files
> fossil addremove
> // commit
> fossil ci 
> ```

# c# - 确保下载完成

> ID：14908688
> 
> 赞同：0
> 
> 时间：2013-02-16T09:08:24.743
> 
> 标签：c#, .net, webclient

我正在使用一个`for`循环，其中**Webclient**类`Downloadstring()`方法用于加载外部 url 。Url 由 SMS 服务提供商提供，其中添加了手机号码和要传输的消息。
但是对于数组中指定的所有手机号码，消息并未提交到 SMS 网关，`phNos[]`即某些号码的下载 Url 被跳过。这主要发生在数组末尾的手机号码上。

如何确保程序等待直到为特定数字加载 url，然后程序继续前进。

```
WebClient cli = new WebClient();
for (i=0;i<phNos.Length;i++)
{
    string url = @"http://example.com?DestNo=" + phNos[i] + "&msg=" + message; 
    cli.DownloadString(url);  
} 
```

或者我也使用过 `System.Net.HttpWebRequest`，但问题仍然存在。

```
 for (i=0;i<phNos.Length;i++)
    {
        string url = @"http://example.com?DestNo=" + phNos[i] + "&msg=" + message; 
        Uri targetUri = new Uri(url);
        HttpWebRequest hwb = (HttpWebRequest)HttpWebRequest.Create(targetUri);

        System.Net.HttpWebResponse response = hwb1.GetResponse();
        int status = (int)response.StatusCode;

        if (status == 200)
        {

            Response.Write("Successfully transmitted" + status);
        }
    } 
```

是否有任何其他替代方法可以确保消息 100% 提交。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T09:18:09.713

我会为每个调用实例化一个 webclient 并在调用 downloadstring 后处理它，就像这样

```
foreach(var phone in phNos)
{
  using(WebClient cli= new WebClient())
  {
     url = String.Format(@"http://aaa.bbb.ccc.ddd?DestNo={0}&msg={1}", phone, message); 
     string result = cli.DownloadString(url); 
     // check if result has somekind of errorreport maybe? 
     Trace.WriteLine(result);  // optionally write it to a trace file
  }
} 
```

明确处理它可能有助于更快地关闭底层网络连接，因为我怀疑连接的绝对数量会导致问题。节流也可能是一种选择（每分钟向网关发送更少的呼叫）

如果这是 10000 或 100000 次呼叫，您和短信网关之间的网络组件可能是罪魁祸首。想想 adsl 调制解调器/vpn 软件/路由问题，甚至是 sms 网关本身。

如果仍然不能解决问题：尝试[Fiddler](http://www.fiddler2.com/fiddler2/version.asp)和/或[Wireshark](http://www.wireshark.org/download.html)深入检查 http 流量甚至 tcp/ip 流量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T09:26:31.167

你的代码看起来不错。DownloadString 被阻塞，如果发生错误，它应该引发异常。SMS网关如何响应您的请求？您应该查看他们的文档，因为您可能可以编写一个函数来测试一切是否正常。

```
const int MAX_RETRY = 10;
WebClient cli= new WebClient();

for(i=0;i<phNos.Length;i++)
{
    url = @"http://aaa.bbb.ccc.ddd?DestNo=" + phNos[i] + "&msg=" + message;

    int cntRetry = 0;

    while (!TestResult(cli.DownloadString(url)) && cntRetry < MAX_RETRY)
        ++cntRetry;
} 
```

问题可能是您在很短的时间内向网关提交了太多请求。您可以尝试在某处放置一些**Thread.Sleep(1000)**调用，看看情况是否会好转。

```
WebClient cli= new WebClient();
for(i=0;i<phNos.Length;i++)
{
    Thread.Sleep(1000);
    url = @"http://aaa.bbb.ccc.ddd?DestNo=" + phNos[i] + "&msg=" + message; 
    cli.DownloadString(url);  
} 
```

您还可以结合上述两个示例，使用可能较低的**MAX_RETRY**和**Thread.Sleep**值。

```
const int MAX_RETRY = 5;
WebClient cli= new WebClient();

for(i=0;i<phNos.Length;i++)
{
    url = @"http://aaa.bbb.ccc.ddd?DestNo=" + phNos[i] + "&msg=" + message;

    int cntRetry = 0;

    while (!TestResult(cli.DownloadString(url)) && cntRetry < MAX_RETRY) {
        Thread.Sleep(500);
        ++cntRetry;
    }
} 
```

# maven - m2eclipse 编译失败

> ID：14908690
> 
> 赞同：4
> 
> 时间：2013-02-16T09:08:42.620
> 
> 标签：maven, maven-2, m2eclipse

当我从命令行（使用 far managerR）运行“mvn site”时，一切正常，它将所有必要的 jar 下载到存储库并执行任务。

但是当我尝试使用 m2eclipse 插件从 eclipse 做同样的事情（mvn 站点）时，它告诉我：

```
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building jdbc_maven 0.0.1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-resources-plugin:2.5:resources (default-resources) @ jdbc_maven ---
[debug] execute contextualize
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 1 resource
[INFO] 
[INFO] --- maven-compiler-plugin:3.0:compile (default-compile) @ jdbc_maven ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 7 source files to G:\workspace\jdbc_maven\target\classes
[INFO] -------------------------------------------------------------
[ERROR] COMPILATION ERROR : 
[INFO] -------------------------------------------------------------
[ERROR] G:\workspace\jdbc_maven\src\main\java\com\nixsolutions\JdbcRoleDao.java:[8,23] error: package org.apache.log4j does not exist
[ERROR] G:\workspace\jdbc_maven\src\main\java\com\nixsolutions\JdbcRoleDao.java:[13,16] error: cannot find symbol
[ERROR]   symbol:   class Logger
  location: class JdbcRoleDao
G:\workspace\jdbc_maven\src\main\java\com\nixsolutions\User.java:[5,23] error: package org.apache.log4j does not exist
[ERROR] G:\workspace\jdbc_maven\src\main\java\com\nixsolutions\User.java:[28,16] error: cannot find symbol
[ERROR]   symbol:   class Logger
  location: class User
G:\workspace\jdbc_maven\src\main\java\com\nixsolutions\JdbcUserDao.java:[13,23] error: package org.apache.log4j does not exist
[ERROR] G:\workspace\jdbc_maven\src\main\java\com\nixsolutions\JdbcUserDao.java:[19,16] error: cannot find symbol
[ERROR]   symbol:   class Logger
  location: class JdbcUserDao
G:\workspace\jdbc_maven\src\main\java\com\nixsolutions\JdbcRoleDao.java:[13,29] error: cannot find symbol
[ERROR]   symbol:   variable Logger
  location: class JdbcRoleDao
G:\workspace\jdbc_maven\src\main\java\com\nixsolutions\User.java:[28,29] error: cannot find symbol
[ERROR]   symbol:   variable Logger
  location: class User
G:\workspace\jdbc_maven\src\main\java\com\nixsolutions\JdbcUserDao.java:[19,29] error: cannot find symbol
[INFO] 9 errors 
[INFO] -------------------------------------------------------------
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1.387s
[INFO] Finished at: Sat Feb 16 11:05:13 EET 2013
[INFO] Final Memory: 7M/154M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.0:compile (default-compile) on project jdbc_maven: Compilation failure: Compilation failure:
[ERROR] G:\workspace\jdbc_maven\src\main\java\com\nixsolutions\JdbcRoleDao.java:[8,23] error: package org.apache.log4j does not exist
[ERROR] G:\workspace\jdbc_maven\src\main\java\com\nixsolutions\JdbcRoleDao.java:[13,16] error: cannot find symbol
[ERROR] symbol:   class Logger
[ERROR] location: class JdbcRoleDao
[ERROR] G:\workspace\jdbc_maven\src\main\java\com\nixsolutions\User.java:[5,23] error: package org.apache.log4j does not exist
[ERROR] G:\workspace\jdbc_maven\src\main\java\com\nixsolutions\User.java:[28,16] error: cannot find symbol
[ERROR] symbol:   class Logger
[ERROR] location: class User
[ERROR] G:\workspace\jdbc_maven\src\main\java\com\nixsolutions\JdbcUserDao.java:[13,23] error: package org.apache.log4j does not exist
[ERROR] G:\workspace\jdbc_maven\src\main\java\com\nixsolutions\JdbcUserDao.java:[19,16] error: cannot find symbol
[ERROR] symbol:   class Logger
[ERROR] location: class JdbcUserDao
[ERROR] G:\workspace\jdbc_maven\src\main\java\com\nixsolutions\JdbcRoleDao.java:[13,29] error: cannot find symbol
[ERROR] symbol:   variable Logger
[ERROR] location: class JdbcRoleDao
[ERROR] G:\workspace\jdbc_maven\src\main\java\com\nixsolutions\User.java:[28,29] error: cannot find symbol
[ERROR] symbol:   variable Logger
[ERROR] location: class User
[ERROR] G:\workspace\jdbc_maven\src\main\java\com\nixsolutions\JdbcUserDao.java:[19,29] error: cannot find symbol 
```

这是我的 pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>jdbc_maven</groupId>
    <artifactId>jdbc_maven</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <packaging>jar</packaging>

    <name>jdbc_maven</name>
    <url>http://maven.apache.org</url>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>
    </properties>

    <dependencies>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.8.1</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>org.dbunit</groupId>
            <artifactId>dbunit</artifactId>
            <version>2.4.8</version>
        </dependency>

        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-simple</artifactId>
            <version>1.6.4</version>
        </dependency>

        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>1.6.4</version>
        </dependency>

        <dependency>
            <groupId>com.h2database</groupId>
            <artifactId>h2</artifactId>
            <version>1.3.169</version>
        </dependency>

        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.17</version>
            <exclusions>
                <exclusion>
                    <groupId>javax.jms</groupId>
                    <artifactId>jms</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>com.sun.jmx</groupId>
                    <artifactId>jmxri</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>com.sun.jdmk</groupId>
                    <artifactId>jmxtools</artifactId>
                </exclusion>
            </exclusions>
        </dependency>

    </dependencies>

    <build>
        <plugins>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-site-plugin</artifactId>
                <version>3.0</version>
                <configuration>
                    <reportPlugins>
                        <plugin> 
                            <groupId>org.apache.maven.plugins</groupId> 
                            <artifactId>maven-surefire-report-plugin</artifactId> 
                            <version>2.8</version> 
                        </plugin> 
                        <plugin> 
                            <groupId>org.apache.maven.plugins</groupId> 
                            <artifactId>maven-checkstyle-plugin</artifactId> 
                            <version>2.6</version> 
                            <configuration> 
                                <configLocation>sun_checks.xml</configLocation> 
                            </configuration> 
                        </plugin> 
                        <plugin> 
                            <groupId>org.apache.maven.plugins</groupId> 
                            <artifactId>maven-javadoc-plugin</artifactId> 
                            <version>2.6.1</version> 
                        </plugin> 
                    </reportPlugins>
                </configuration>
            </plugin>

            <!-- JDK 1.7 COMPILER - DON'T TOUCH -->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>3.0</version>
                <configuration>
                    <source>1.7</source>
                    <target>1.7</target>
                    <showDeprecation>true</showDeprecation>
                    <showWarnings>true</showWarnings> 
                    <executable>${env.JAVA_HOME}/bin/javac</executable>
                    <fork>true</fork> 
                </configuration>
            </plugin>
            <!-- JDK 1.7 COMPILER - DON'T TOUCH -->

        </plugins>
    </build>

</project> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T11:44:47.043

这有时会发生在 m2eclipse 中，这是因为当您向 pom.xml 添加新的依赖项时，m2e 会自动将其添加到类路径中，并且这个类路径生成存在一些问题。

一个快速而肮脏的解决方法是

*   `Remove the project from the eclipse`
*   现在`navigate to the project folder`和`delete .settings directory and .classpath file`
*   `Import the project into the eclipse`作为一个“Maven项目”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T15:47:08.207

在 Eclipse 中执行 project->clean（也尝试刷新项目）。当您从命令行编译代码时，有时会在 eclipse 中引起一些问题，并且必须在 eclipse 中重新编译代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-13T22:18:31.030

我有同样的问题，我想我已经找到了解决方案。问题是在运行配置下，您项目的 maven 配置没有刷新整体配置中的新设置。

这是我的解决方案：

1.  在运行按钮（带有绿色三角形的那个）中，选择运行配置
2.  进入“maven build”类别并查找您的项目之一
3.  检查 maven 运行时、JRE 和类似的配置是否正确：这些值在 eclipse 中更改时不会刷新
4.  应用更改并运行

这个解决方案对我有用（我一直在使用 value maven 运行时，在嵌入式和外部之间切换，这似乎是问题所在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-06T07:34:21.710

使用 m2eclipse、目标 javadoc:javadoc 或 javadoc:jar 生成文档时出现同样的问题，同时 Project -> Generate Javadoc 工作正常。在第一种情况下，错误的类路径似乎有问题。
解决方法：

1.run Project -> Generate Javadoc with check option "Save the settings of the Javadoc export as an antscript"
2\. javadoc.xml 将生成
3\. 运行 m2eclipse，失败后 javadoc.sh, options, packages 将在 /site/ apidocs/
4\. 从 javadoc.xml 获取类路径的内容并将类路径放入选项文件
5\. 运行 ./javadoc.sh

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-17T10:43:23.473

每个使用 m2eclipse 插件并苦苦挣扎的人，这里是我的提示：

1) 使用你自己的 maven，而不是在 m2eclipse 中构建，你可以在 m2eclipse 首选项中切换到它

2）将存储库位置从愚蠢的 C:\Users\current_user-m2\repository 更改为 D:\repository 或任何其他没有 ~ 或任何其他特殊升的正常路径

3）在恐慌之前用你自己的Maven检查控制台中的所有内容。例如我的命令 mvn site mvn install mvn tomcat:redeploy

从控制台工作出色，但在 Eclipse 内部失败。这意味着 m2eclipse 参数是错误的，您应该设置自己的参数。

4）不要依赖上下文命令（右键单击-运行为-maven测试/站点/构建）在运行中创建自己的命令-maven构建-在菜单中选择正确版本的JRE（在我的情况下为1.7）并添加任何其他参数都不要忘记给这个命令命名，例如：“maven tomcat:redeploy JDK 7”——这将给你一个很好的机会来运行你想要的任何东西，并且不会面临 90% 的 m2eclipse 问题和错误。

PS 我在 maven 2 和 m2eclipse 上苦苦挣扎了 20 多个小时。希望我的提示对某些人有用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-21T15:13:01.223

在 pom.xml 中确保您在编译时具有 log4j 范围

```
<dependency>
    <groupId>org.apache.logging.log4j</groupId>
    <artifactId>log4j-api</artifactId>
    <version>2.5</version>
    <scope>compile</scope>
</dependency>

<dependency>
    <groupId>org.apache.logging.log4j</groupId>
    <artifactId>log4j-web</artifactId>
    <version>2.5</version>
    <scope>compile</scope>
</dependency> 
```

它仍然将 log4j.jars 放入 .war。

# cuda - 如何阅读 GigaThread 全局调度程序？

> ID：14908693
> 
> 赞同：-4
> 
> 时间：2013-02-16T09:08:47.463
> 
> 标签：cuda, gpgpu, gpu

是否可以访问 GigaThread 全局调度程序的代码？

我的目的是知道调度程序在给定时刻使用了多少 SM（假设 GigaThread 全局调度程序是负责决定特定应用程序需要使用多少 SM 以及特别需要使用哪些 SM 的调度程序）。那么有什么方法可以让调度程序维护一个日志并在每次为应用程序使用一组新的 SM 时更新它，其中包含 SM 的数量或 SM 的 ID？

这将帮助我查看日志文件，以便在我需要信息时检查调度程序最近使用了多少 SM。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T17:19:40.250

目前没有公开的方法来跟踪计算工作分配器。

可以使用 %smid 和 %clock 检测内核代码以收集此信息。这可以在每个扭曲或每个线程块的基础上完成。

计算工作分配器尝试让所有 SM 保持忙碌。

# java - 如何从存储过程中获取mysql游标值

> ID：14908696
> 
> 赞同：0
> 
> 时间：2013-02-16T09:09:45.527
> 
> 标签：java, mysql, jdbc, java-stored-procedures

如何在 java 程序中获取 mysql 游标值。

这是我的mysql存储过程

```
delimiter //
CREATE PROCEDURE cursor_student()
BEGIN
DECLARE row_count INT DEFAULT 0;
DECLARE exit_flag INT DEFAULT 0;
DECLARE sid varchar(30);
DECLARE sname varchar(50);
DECLARE rst CURSOR FOR 
    SELECT sid, sname FROM student WHERE class = '11th';

DECLARE CONTINUE HANDLER FOR SQLSTATE '02000' SET exit_flag=1;

OPEN rst;
fetch_loop: LOOP

    FETCH rst INTO sid, sname;  
    IF exit_flag THEN 
        LEAVE fetch_loop;
    END IF;
    SET row_count = row_count +1;
END LOOP;
CLOSE rst;  
SELECT 'number of rows fetched =', row_count;
END; 
```

这是我的simlpe java程序来读取上面的存储过程

```
import java.sql.CallableStatement;
import java.sql.Date;
import java.sql.DriverManager;
import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

public class StoredProcedure {

public static void main(String[] args) {
    Connection dbConnection = null;
    String url = "jdbc:mysql://localhost:3306/";
    String db = "test";
    String driver = "com.mysql.jdbc.Driver";
    ResultSet rs = null;
    CallableStatement callableStatement = null;
    String getDBUSERCursorSql = "{call cursor_student}";
    try {
        Class.forName(driver);
        dbConnection = DriverManager.getConnection(url + db, "root", "");
        try {

            callableStatement = dbConnection.prepareCall(getDBUSERCursorSql);

            callableStatement.executeUpdate();

            rs = callableStatement.getResultSet();

            while (rs.next()) {

                System.out.println("sid "+rs.getString(1)  +"  name  "+rs.getString(2));
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

}

上述java程序的输出是

```
 sid number of rows fetched =  name  6 
```

但我想显示 sid 和 sname 的值

```
+------+-------+
| sid  | sname |
+------+-------+
| 1    | asdf  |
| 2    | dff   |
| 3    | gggg  |
| 4    | tttt  |
| 5    | mmmm  |
| 6    | .uyy  |
+------+-------+ 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2014-08-11T12:55:24.657

我觉得你的SP有问题。

您能否根据此 SP 示例进行更改？我没有执行，但我认为是的

```
DROP PROCEDURE IF EXISTS  mysql_cursor_example $$
CREATE PROCEDURE mysql_cursor_example ( IN in_name VARCHAR(255) )
BEGIN
  -- First we declare all the variables we will need
  DECLARE l_name    VARCHAR(255);
  -- flag which will be set to true, when cursor reaches end of table
  DECLARE exit_loop BOOLEAN;         

  -- Declare the sql for the cursor
  DECLARE example_cursor CURSOR FOR
    SELECT name status_update
    FROM employees
    WHERE name = name_in;

  -- Let mysql set exit_loop to true, if there are no more rows to iterate
  DECLARE CONTINUE HANDLER FOR NOT FOUND SET exit_loop = TRUE;

  -- open the cursor
  OPEN example_cursor;

  -- marks the beginning of the loop
  example_loop: LOOP

    -- read the name from next row into the variable l_name
    FETCH  example_cursor INTO   l_name;

    -- check if the exit_loop flag has been set by mysql, 
    -- if it has been set we close the cursor and exit 
    -- the loop
    IF exit_loop THEN
        CLOSE example_cursor;
        LEAVE example_loop;
    END IF;

  END LOOP example_loop;
END $$

DELIMITER ; 
```

# google-drive-api - 从 2013 年 2 月 14 日开始，尝试构建驱动器服务时出现“为此 api 生成发现文档时出错”

> ID：14908700
> 
> 赞同：2
> 
> 时间：2013-02-16T09:10:17.190
> 
> 标签：google-drive-api

在驱动器服务上调用构建时，我间歇性地收到此错误。我可以使用一个简单的程序来重现这一点，该程序将 JSON 凭据存储到一个文件中。

```
#!/usr/bin/python

import httplib2
import sys
from apiclient.discovery import build
from oauth2client.client import Credentials

json_creds = open('creds.txt', 'r').read()
creds = Credentials.new_from_json(json_creds)

http = httplib2.Http()
http = creds.authorize(http)

try:
    drive_service = build('drive', 'v2', http=http)
except Exception:
    sys.exit(-1) 
```

当我在循环中运行它时，我看到了相当多的错误，循环中的这段代码对我来说有 15-25% 的时间失败。

```
i=0; while [ $i -lt 100 ]; do python jsoncred.py || echo FAIL ; i=$(( $i + 1 )); done | grep FAIL | wc -l 
```

现在，当我采用相同的代码并将“drive”替换为“oauth2”时，代码运行没有问题

我已经确认我使用的 OAuth 令牌是有效的并且具有正确的范围：

“expires_in”：2258，

“范围”：“ [https://www.googleapis.com/auth/userinfo.profile](https://www.googleapis.com/auth/userinfo.profile) [https://www.googleapis.com/auth/drive](https://www.googleapis.com/auth/drive) [https://www.googleapis.com/auth/userinfo.email](https://www.googleapis.com/auth/userinfo.email) ”，

查看我的应用程序日志，这似乎开始于 2013 年 2 月 14 日下午 1 点 PST。我没有推送任何新代码，所以我想知道这是否是 API 的问题。API中是否存在导致此问题的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T03:28:24.843

谷歌看到一些关于发现文档错误率增加的报告。请暂时重试 500 错误，您应该会成功。

有人可能会争辩说，无论如何你都应该为这个调用设置重试逻辑，因为这是一种很好的做法，但是当前的级别太高了，所以，对此感到抱歉。

*更新：*这现在应该得到修复。

# mysql - 如何解决此错误 1064

> ID：14908709
> 
> 赞同：0
> 
> 时间：2013-02-16T09:11:34.557
> 
> 标签：mysql

```
create table reg (
    usrid varchar(10),
    pwd varchar2(10) not null,
    hque varchar(20),
    hans varchar(10),
    fname varchar2(10) not null,
    lname varchar(10) not null,
    dob date not null,
    add varchar(10) not null,
    city varchar(10) not null,
    pin number(6) not null,
    state varchar(10) not null,
    country varchar(10) not null,
    ccname varchar(10) not null,
    ccno varchar(10) not null,
    email varchar(30) not null,
    primary key(usrid)
); 
```

上面的陈述给了我错误

> ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'varch ar(10) ,pwd varchar(10) not null, hque varch' 附近使用正确的语法

谁能帮我找出我的陈述有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T09:23:14.593

一些东西;

*   在 MySQL 中，`VARCHAR2`并且`NUMBER`不是有效类型。创建表似乎是从 Oracle 复制和粘贴的。

*   在 MySQL 中，`add`除非用反引号引用，否则它不是有效的列名。

# php - 将删除操作作为 POST 请求发送

> ID：14908712
> 
> 赞同：1
> 
> 时间：2013-02-16T09:12:13.807
> 
> 标签：php, javascript, html

我有一个数据网格，其中包含要删除的批量操作以及单次删除。

这是我的数据网格的快照：

![在此处输入图像描述](../Images/3b45b8b8354d125912ff3cbfaf690961.png)

我的数据网格如下：

```
 <form method="post" action="">
   <table>
      <tr>
         <td><input type="checkbox" value="1" name="checkIds[]"/></td>
         <td>user</td><td><a href="user/delete/1"><img src="delete.png"/></a></td>
      </tr>
   </table>
 </form> 
```

使用批量操作删除时，我可以将数据作为帖子提交。目前对于使用删除按钮操作的单个删除，如您在操作列中所见，我只是放置超链接或将其作为 GET 请求发送。据我所知，删除操作应使用 POST 或 DELETE 以避免网络爬虫意外删除我的数据。我想到了一种将其作为 POST 操作发送的解决方案，如下所示：

```
 <form method="post" action="user/delete/1" id="form_id_1"></form><a href="#" onclick="//submit form"><img src="delete.png"/></a> 
```

问题是这个表单标签将在我的父表单标签内，它违反了 html 标准，因为表单标签不能在另一个表单标签内

如何在此处发送单个删除操作的发布请求？请问有什么逻辑吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T09:52:17.073

不要添加其他表格。只需添加另一个提交按钮。使用相同的表单处理程序，并让它检查是否有任何“删除我”提交按钮`$_POST`（只有在单击它们时才会发生）。

不过，您必须对所有操作使用 POST。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T10:00:21.643

我提出了如下解决方案。如果我做错了请纠正我

```
 <form method="post">
  <table>
  // datagrid
  <a href="delete" data="4"><img src="delete.png"/></a>
  </table>
  <input type="hidden" value="" name="id"/>

  // to distinguish between single delete and bulk delete
  <input type="hidden" name="single_delete" value="" id="single_delete_flag"/>
  </form>

  //js
  //onclick handler for anchor action delete:
  $("#id").attr("value",$(this).attr("data"));
  $("#single_delete_flag").attr("value","1");
  $("form").submit();

  //delete.php
  check if request if post
  check if single_delete is 1, then single delete
  else if check bulk delete 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T10:18:54.077

尝试：

```
 <form method="post" action="">
   <table>
      <tr>
         <td><input type="checkbox" value="1" name="checkIds[]"/></td>
         <td>user</td><td><input type="submit" class="sdelete" name="sdelete" value="<?= $ID; ?>" /></td>
      </tr>
   </table>
 </form> 
```

从那里，您将使用 css 来修改`.sdelete`外观，在 PHP 中，您可以通过以下方式获得单个删除：

```
if(isset($_POST['sdelete'])) {
    $id = $_POST['sdelete'];
    //use $id to delete a single entry from DB, and then produce new output
} 
```

这应该完美无缺。^^

# objective-c - 在每行末尾添加 \n

> ID：14908715
> 
> 赞同：1
> 
> 时间：2013-02-16T09:12:45.747
> 
> 标签：objective-c, cocoa

您好，我有这个非常简单的应用程序。在我的主窗口中，有一个 NSTextView，我可以从中获取文本。这意味着粘贴在其中的文本将是每行 1 个句子。还有一个按钮，通过单击按钮，粘贴在 NSTextView 中的文本将在每行的末尾添加一个“\n”。我怎么做？

前任。粘贴你好 Stackoverflow。我今天过得很好。

格式化 Hello Stackoverflow 后。\n 我今天过得很愉快。\n

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T09:18:29.910

听起来你只需要替换每个`.`字符，`.\n`尽管会有例外，例如，如果输入 IP 地址或浮点数，它会搞砸。

但在一般情况下：

```
NSString *transformed = [input stringByReplacingOccurrencesOfString:@"."
                                                         withString:@".\n"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T09:18:31.963

您可以将输入文本中出现的每个句点替换`'.'`为句点后跟换行符`'.\n'`：

```
NSString *str = @"Hello Stackoverflow. I am having a good day.";

str = [str stringByReplacingOccurrencesOfString:@"."
                                     withString:@".\n"]; 
```

这是一个非常简单的示例，假设所有行都以句点结尾，并且一行文本中没有句点

# javascript - JSON.parse 在 PhoneGap 中不起作用

> ID：14908717
> 
> 赞同：0
> 
> 时间：2013-02-16T09:13:17.437
> 
> 标签：javascript, ios, xcode, json, cordova

我正在开发一个需要将用户数据作为 JSON 格式保存在文件中的程序。将我的数据保存为 JSON 效果很好，但是当我尝试使用`JSON.parse`它来解析我存储的 JSON 时它不起作用。这是我存储数据的代码：

```
function writeUser(data) {
    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, function(fs){
        fs.root.getFile('user.data', {create: true, exclusive: false}, function(fe){
            fe.createWriter(function(writer){
                //Its converts my data to JSON here
                writer.write(JSON.stringify(data));
                //It displays this so I knows its been written!
                console.log('File written');
            }, failwrite);
        }, failwrite);
    }, failwrite);
}
function failwrite(error) {
    console.log(error.code);
} 
```

这是读取我的数据的代码：

```
function readUser(){
    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, function(fs){
        fs.root.getFile('user.data', null, function(fe){
            fe.file(function(file){
                return readAsText(file);
            }, failread);
        }, failread);
    }, failread);
}
function readAsText(file) {
    var reader = new FileReader();
    reader.onloadend = function(evt) {
        console.log(evt.target.result);
    };
    return reader.readAsText(file);
} 
```

它以字符串的形式返回我的数据，这是我得到的字符串`{"status":"true","id":"1","password":"xx"}`，但是当我将 JSON.parse 与我的数据一起使用时，它返回身份不明的对象。这是它使用的部分`JSON.parse`：

```
readUser();
var user = JSON.parse(readUser());
console.log(user); 
```

它甚至不会使用解析的 JSON 运行我的 console.log 命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T09:29:52.220

readUser 不返回任何内容。该文件的内容在 readAsText 回调中可用。你必须 json 解析 evt.target.result 并从那里继续。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-11T18:15:27.563

供阅读使用：

```
jsonVariable = jQuery.parseJSON(evt.target.result); 
```

写作用途：

```
writer.write(JSON.stringify(propFileJson)); 
```

# sql - 连接两个 InnerJoin 查询

> ID：14908721
> 
> 赞同：0
> 
> 时间：2013-02-16T09:14:57.593
> 
> 标签：sql, inner-join

我有这两个查询，我不知道如何将它们连接在一起。他们来了：

```
command.CommandText = "
    SELECT sl.Reg_No,sr.ID_Number,sr.Name,sr.Course,sl.Date,sl.Time_IN,sl.Time_Out,sl.ScheduleId 
    FROM student_logs sl 
         INNER JOIN student_records sr ON sl.Student_Reg_No=sr.Reg_No 
    WHERE sl.date between '" & fromDateTimePicker.Value.ToShortDateString & "' and '" & toDateTimePicker.Value.ToShortDateString & "' 
    ORDER BY Reg_No DESC";

command.CommandText = "
    SELECT sls.StudentLogStatusDescription 
    FROM studentlogstatus sls 
         INNER JOIN student_logs sl ON sls.StudentLogStatusId=sl.StudentLogStatusId  
    ORDER BY Reg_No DESC"; 
```

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T09:22:52.067

一个语句中可以有多个 join，因此可以将两个语句组合起来得到：

```
command.CommandText = 
    "SELECT sl.Reg_No,sr.ID_Number,sr.Name,sr.Course,sl.Date,
        sl.Time_IN,sl.Time_Out,sl.ScheduleId,sls.StudentLogStatusDescription 
    FROM student_logs sl 
        INNER JOIN student_records sr ON sl.Student_Reg_No=sr.Reg_No 
        INNER JOIN studentlogstatus sls 
              ON sls.StudentLogStatusId=sl.StudentLogStatusId  
    WHERE sl.date between '" & fromDateTimePicker.Value.ToShortDateString & 
                  "' and '" & toDateTimePicker.Value.ToShortDateString & "' 
    ORDER BY Reg_No DESC"; 
```

# google-chrome - 从概念上讲，二进制和源代码兼容性有什么区别？

> ID：14908722
> 
> 赞同：2
> 
> 时间：2013-02-16T09:15:05.143
> 
> 标签：google-chrome, compilation, webkit

在 chromium 源代码中的 webkit 上下文中，它说它是源兼容的，但不是二进制兼容的。它是否建议我们构建 webkit 的 .dll 文件并使用 chrome 二进制文件构建它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T09:17:24.320

（这个答案没有谈论 WebKit 的具体背景——不清楚你所说的各种“它说”部分到底是什么意思。我试图给出一个更笼统的答案。）

假设我们有一个名为 LibFoo 的库，并且您已经构建了一个名为 SuperBar 的应用程序，它使用 LibFoo v1。

现在 LibFoo v1.1 出来了。

*   如果这是*二进制兼容*的，那么您应该可以直接放入新的二进制文件，SuperBar 将使用新代码工作而无需*任何*其他更改
*   如果这只是*源代码兼容*，那么您需要针对 v1.1 重建 SuperBar，然后才能使用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-27T22:52:44.917

我会从[链接的角度来考虑](https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-5.html#jvms-5.4)

> 链接是获取类或接口并将其组合到 Java 虚拟机的运行时状态以便可以执行的过程。

> 如果需要，链接一个类或接口涉及验证和准备该类或接口、其直接超类、其直接超接口及其元素类型（如果它是数组类型）。

如果引入新的更改会破坏**链接**，那么它与源（代码）不兼容*（以及`binary compatible`）*

如果引入新的更改不会破坏**链接**，那么它至少是`binary compatible`

# django - 装饰器中的 Django 视图参数

> ID：14908724
> 
> 赞同：0
> 
> 时间：2013-02-16T09:15:19.047
> 
> 标签：django, python-2.7, django-views

我有一个函数，我不想用一个参数把它变成一个装饰器，请任何人帮忙

```
def get_permission(request,permission_level):
    if has_permission(request,permission_level):#this is another function
        #my work will be done here
    else:
        raise Http404 
```

我只是想在我看来像这样使用它

```
@get_permission(permission_level)
def a_view(request) 
```

有人可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T09:40:33.017

看看[django/contrib/auth/decorators.py](https://github.com/django/django/blob/stable/1.4.x/django/contrib/auth/decorators.py)，类似

```
from functools import wraps
from django.utils.decorators import available_attrs

def get_permission(permission_level):
    def decorator(func):
        @wraps(func, assigned=available_attrs(func))
        def _wrapped(request, *args, **kwargs):
            if has_permission(request, permission_level): 
                'special logic goes here...'
                return func(request, *args, **kwargs)
            else:
                raise Http404 
```

检查[如何制作功能装饰器链？](https://stackoverflow.com/questions/739654/understanding-python-decorators)和[PEP 318](http://www.python.org/dev/peps/pep-0318/)用于编写装饰器。

或者你可以直接在[django/contrib/auth/decorators.py](https://github.com/django/django/blob/stable/1.4.x/django/contrib/auth/decorators.py)`user_passes_test`中使用or ，如果装饰器只是检查权限来确定返回的结果。`permission_required`

# jquery - jQuery Ajax $.post 问题：字符“+”消失

> ID：14908725
> 
> 赞同：0
> 
> 时间：2013-02-16T09:15:20.403
> 
> 标签：jquery, post, geshi

我正在研究一个所见即所得的部分和一个插入源代码的部分，如 PHP/HTML/Perl/etc...

我使用 de PHP Geshi 通过 jQuery 突出显示代码。

一切正常，我的代码很好，但我在返回的代码中丢失了字符“+”。

我认为问题出在“$.post”解释“+”例如在发送中添加一个新参数，我错了。

我什至不是 POST 或 GET 是获取包含许多奇怪字符的源代码的正确解决方案......我对新想法很感兴趣......

jQuery 代码：

```
$('#valider_code').click(function() { 
    // On selectionne le contenue du textarea

    var code = $("#code").val();
    code = addslashes(code);
    // On cache le div
    $('#input_code').hide();

    $.post('/get_geshi.php', { "code" : code, "langage" : langage }, function(data) {

    data = data.replace(/\n|\r|\r\n/g, '<br>');
       // On insert le code
    var embed = '<div id="code_source">'+ data +'</div>';
        if($.browser.msie) {
            var selection = editor.contentWindow.document.selection;
            var range = selection.createRange();
            range.pasteHTML(embed);

        }
        else {
        execCommand("inserthtml", embed);
        }
        langage = "";
        code = $("#code").val('');

    }); // Fin get
    return false; // prevent default
  }); 
```

get_geshi.php

```
<?php
require_once('geshi.php');

$source = stripslashes(urldecode($_POST["code"]));

$language = $_POST["langage"];

$geshi =& new GeSHi($source, $language);
echo $geshi->parse_code();

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T11:29:41.480

Y 输入这一行（Perl 代码）：

```
$line =~ /\s+(\S+)$/; 
```

它返回这一行：

```
$line =~ /\s (\S )$/; 
```

“+”下降。

# java - 在另一个类中更改 int 时出现空指针异常

> ID：14908726
> 
> 赞同：0
> 
> 时间：2013-02-16T09:15:41.050
> 
> 标签：java, android, nullpointerexception, int

我看了又看，找不到答案。但这是我的问题。我想根据主游戏类中的刻度来更改另一个类中的 int 。这是代码：

痕迹：

```
 02-16 02:10:58.605: W/dalvikvm(1578): threadid=13: thread exiting with uncaught                 exception (group=0x40c5ca68)
    02-16 02:10:58.615: E/AndroidRuntime(1578): FATAL EXCEPTION: Thread-16720
    02-16 02:10:58.615: E/AndroidRuntime(1578): java.lang.NullPointerException
    02-16 02:10:58.615: E/AndroidRuntime(1578):     at    com.mojang.ld22.Game.tick(Game.java:374)
    02-16 02:10:58.615: E/AndroidRuntime(1578):     at   com.mojang.ld22.Game.iterate(Game.java:300)
    02-16 02:10:58.615: E/AndroidRuntime(1578):     at com.mojang.ld22.GameActivity$4.run(GameActivity.java:136)
    02-16 02:10:58.615: E/AndroidRuntime(1578):     at java.lang.Thread.run(Thread.java:856) 
```

Game.java 片段

```
 public void tick() {
    tickCount++;

    ...
    ...
    ...

        if (tickCount % 1000 == 0) {
            if (rising) {
                lightlvl++;
Would error here too        clock.time++;    <-----------

                if (lightlvl >= 8) {
                    rising = false;
                }

            } else {
                lightlvl--;
    LINE 374 ---------->        clock.time--;    <------------

                if (lightlvl <= -2) 
                    rising = true;
            }
        }
    }

} 
```

和时钟.java

```
 package com.mojang.ld22.entity;

    import com.mojang.ld22.crafting.Crafting;
    import com.mojang.ld22.entity.particle.TextParticle;
    import com.mojang.ld22.entity.particle.TimeClock;
    import com.mojang.ld22.gfx.Color;
    import com.mojang.ld22.gfx.Screen;
    import com.mojang.ld22.screen.CraftingMenu;
    import com.mojang.ld22.item.FurnitureItem;

    public class Clock extends Furniture {

/**
 * 
 */
private static final long serialVersionUID = 3146189783597003582L;

Player player;
public int time = 0;
public int clock = 1;
public boolean rising = false;

public Clock() {
    super("Clock");
    col = Color.get(-1, 100, 321, 431);
    sprite = 10;
    xr = 3;
    yr = 2;

}

@Override
public void tick(){
    if (time <= 0)
        clock = 1;
    if (time == 1)
        clock = 1;
    if (time == 2)
        clock = 2;
    if (time == 3)
        clock = 3;
    if (time == 4)
        clock = 4;
    if (time == 5)
        clock = 5;
    if (time == 6)
        clock = 6;
    if (time == 7)
        clock = 7;
    if (time == 8);
        clock = 8;
}

@Override
public void render(Screen screen){
    int col = Color.get(-1, 531, 000, 534);
    //incorrect times TODO
    if (clock == 8)
        screen.render(x - 8, y - 8, 7 + 11 * 32, col, 0);
    if (clock == 6)
        screen.render(x - 8, y - 8, 8 + 11 * 32, col, 0);
    //noon midnight
    if (clock == 5)
        screen.render(x - 8, y - 8, 9 + 11 * 32, col, 0);
    if (clock == 4)
        screen.render(x - 8, y - 8, 10 + 11 * 32, col, 0);
    //Before noon after noon
    if (clock == 3)
        screen.render(x - 8, y - 8, 11 + 11 * 32, col, 0);
    if (clock == 2)
        screen.render(x - 8, y - 8, 12 + 11 * 32, col, 0);
    //730pm 530pm
    if (clock == 1)
        screen.render(x - 8, y - 8, 13 + 11 * 32, col, 0);
    if (clock == -1)
        screen.render(x - 8, y - 8, 14 + 11 * 32, col, 0);
}
} 
```

是的，这不漂亮。当我无法将任何 int 从 game.java 拉到 clock.java 时，这基本上是我尝试的所以这是为了测试发送它。我不能使用单独的刻度，因为在玩家从他/她的库存中拉出它之前不会创建clock.java。

我希望这是从那时起。如果您需要，我可以提供更多代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T09:17:50.307

`rising`为 false，因此执行 else 分支并且`clock`为 null，这将引发 NullPointerException。

顺便说一句，您可以这样编写 tick 方法：

```
public void tick(){
    if (time <= 0) clock = 1;
    else if (time <= 8) clock = time;
} 
```

# html - 无法删除右边距

> ID：14908727
> 
> 赞同：2
> 
> 时间：2013-02-16T09:15:59.107
> 
> 标签：html, css, margin

这是 HTML 的一部分：

```
<fieldset>
  <table class="pensioners-view-tbl-pension-info"
  </table>
<fieldset> 
```

这是与这两个元素相关的 CSS：

```
 fieldset { border-radius:7px;padding-top:15px;}
  .pensioners-view-tbl-pension-info { margin-left: 5%;} 
```

这里是 UI 的快照：![在此处输入图像描述](../Images/f5edf73497d525a6100d41fd04f53b39.png)

如您所见，我没有对右边距设置任何约束，既不是在字段集中作为 padding-right，也没有在表格本身作为 margin-right。如何删除表格的右边距，至少将其向右移动一点？我试图将表格宽度设置为 100%，但它不起作用，它只是跨越了字段集。

编辑：这是[JSFIddle](http://jsfiddle.net/K4LPa/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T09:44:12.067

删除桌子上的边距，给它一个 100% 的宽度。然后将填充添加到字段集中。

您忘记删除边距，这会使整个宽度与字段集发生偏移。

# java - 从 R.raw 文件夹打开文件

> ID：14908732
> 
> 赞同：1
> 
> 时间：2013-02-16T09:16:42.287
> 
> 标签：java, android, inputstream, hashset, getresource

我正在尝试使用输入流从我的 R.raw 文件夹中打开文件。但我总是得到这个错误：

```
'The method getResources() is undefined for the type Wordchecker' 
```

当我尝试使用快速修复时，出现另一个错误。就像这个：

```
'The method openRawResource(int) is undefined for the type Object'... 
```

这是我的代码：

```
public class Wordchecker {
    public static void main(String arg[]){
        HashSet <String> newset = new HashSet <String>();
        try{
            //opening file of words
            InputStream is = getResources().openRawResource(R.raw.wordlist);
            DataInputStream in = new DataInputStream(is);  
            BufferedReader br = new BufferedReader(new InputStreamReader(in));  
            String strLine;

            //reading file of words
            while ((strLine = br.readLine()) != null) {  
                newset.add(strLine);  //adding word to the hash set newset
            }
            in.close();
        }catch (Exception e){
            e.printStackTrace();
        }
    }

    private static Object getResources() {
        // TODO Auto-generated method stub
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T09:21:23.953

您的问题是您没有扩展 Activity。你不能打电话`getResources()`，因为它不存在

如果没有 Activity 类，您将无法使用 getResources()，直到您将上下文作为参数传递

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T09:24:43.463

您需要在某处引用[Context ，因为](http://developer.android.com/reference/android/content/Context.html)[getResources()](http://developer.android.com/reference/android/content/Context.html#getResources%28%29)是 Context 中的一个方法。

在您的构造函数中获取它的一个实例：

```
public class Wordchecker {
    Context mContext;

    public Wordchecker(Context c) {
        mContext = c;
        init()
    }

    public void init() {
        HashSet <String> newset = new HashSet <String>();
        try{
            //opening file of words
            InputStream is = getResources().openRawResource(R.raw.wordlist);
            DataInputStream in = new DataInputStream(is);  
            BufferedReader br = new BufferedReader(new InputStreamReader(in));  
            String strLine;
            //reading file of words
            while ((strLine = br.readLine()) != null) {  
                newset.add(strLine);  //adding word to the hash set newset
            }
            in.close();
        }catch (Exception e){
            e.printStackTrace();
        }
    }
} 
```

然后使用 Activity 或 Service 或任何扩展 Context 的对象创建此类的对象：

```
Wordchecker wordchecker = new Wordchecker(this); 
```

确保`wordchecker = new Wordchecker(this);`在`onCreate()`或之后

# eclipse - 特定部分的代码格式

> ID：14908734
> 
> 赞同：1
> 
> 时间：2013-02-16T09:16:52.700
> 
> 标签：eclipse, code-formatting, eclipse-pdt

我正在使用 Eclipse PDT 开发一个 YII 项目。我想知道如何告诉 Eclipse 将代码的特定部分视为 JavaScript，并相应地对其进行格式化。假设我们有以下代码：

```
 $scriptToBeInjected = "
                    /*how can I format this section in JavaScript code style?*/ 
                   var someJsVariable = function(){};
                    /*end of JavaScript code style*/ 
                            ";

      registerScript('scriptToBeInjected',$scriptToBeInjected,CClientScript::POS_END);
 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:02:52.600

选择部分并按“ctrl + shift + F”，它将自动排列代码。

# jsp - JSP 页面中的 PropertyNotFoundException

> ID：14908735
> 
> 赞同：1
> 
> 时间：2013-02-16T09:16:56.483
> 
> 标签：jsp, el, propertynotfoundexception

我有一个Java bean类如下

```
public class Users extends dbConnect
{
   private int UserId;  

   public int getUserId() 
   {
    return UserId;
   }

   public void setUserId(int userId) 
   {
     UserId = userId;
   }
} 
```

我的 Servlet 中有一个 doGet 方法，它获取 javabean 类中的值并显示在 JSP 页面中。ListUsers 方法将从数据库中返回一个列表。

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException 
    {
        List<Users> arrUserList = new ArrayList<Users>();

        Users objUser = new Users();
        arrUserList   = objUser.listUsers();

        for(Users Userobj : arrUserList)
        {
            System.out.println(Userobj.getUserId());
        }

        request.setAttribute("arrUserDetails", arrUserList);

        RequestDispatcher rst = request.getRequestDispatcher("ListUsers.jsp");
        rst.forward(request, response);
    } 
```

当我在 for 循环中打印 UserId 的值时，它显示 UserId。但它没有显示在我的 JSP 页面中。

```
<%@ page  import="com.acme.users.Users"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>

<c:forEach items="${arrUserDetails}" var="account">
<tr>
      <td>
         <c:out value="${account.UserId}" />
      </td>
    </tr>
</c:forEach> 
```

它显示**javax.el.PropertyNotFoundException**。我检查了堆栈中的异常并确保 bean 名称和 getters 方法相同。但它仍然显示错误。

控制台中的消息如下

```
Feb 16, 2013 2:44:19 PM org.apache.catalina.core.ApplicationDispatcher invoke
SEVERE: Servlet.service() for servlet jsp threw exception
javax.el.PropertyNotFoundException: Property 'UserId' not found on type com.acme.users.Users
    at javax.el.BeanELResolver$BeanProperties.get(BeanELResolver.java:223)
    at javax.el.BeanELResolver$BeanProperties.access$400(BeanELResolver.java:200)
    at javax.el.BeanELResolver.property(BeanELResolver.java:311)
    at javax.el.BeanELResolver.getValue(BeanELResolver.java:85)
    at javax.el.CompositeELResolver.getValue(CompositeELResolver.java:67)
    at org.apache.el.parser.AstValue.getValue(AstValue.java:169)
    at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:189)
    at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:985)
    at org.apache.jsp.ListUsers_jsp._jspx_meth_c_005fout_005f0(ListUsers_jsp.java:170)
    at org.apache.jsp.ListUsers_jsp._jspx_meth_c_005fforEach_005f0(ListUsers_jsp.java:124)
    at org.apache.jsp.ListUsers_jsp._jspService(ListUsers_jsp.java:84)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:419)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:391)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:471)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
    at com.acme.users.ListUsers.doGet(ListUsers.java:36)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:395)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:250)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:166)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-16T09:27:12.497

您正在使用`UserId`which 是*字段*的名称（顺便说一下，它违反了 Java 命名约定 - 就像`dbConnect`类名一样）。

JSP 想要使用*属性*——getter 和setter。您试图让它调用的方法是`getUserId`，但属性名称（在 JavaBeans 中）只是`userId`. 因此，如果您将代码更改为：

```
 <c:out value="${account.userId}" /> 
```

它应该工作。您还应该更改您的类以使用名为 just`userId`或什至的字段`id`（假设它已经是用户 - 这部分是隐式的）。

值得回顾 JSP/JSTL/JavaBeans 教程——您会注意到它们*都*使用以小写字母开头的属性名称，例如`${foo.age}`调用`getAge()`方法。

从[PropertyDescriptor](http://docs.oracle.com/javase/7/docs/api/java/beans/PropertyDescriptor.html)构造函数的文档（也出现在 JavaBeans 规范中）：

> 通过具有 getFoo 和 setFoo 访问器方法，为遵循标准 Java 约定的属性构造 PropertyDescriptor。因此，如果参数名称是“fred”，它将假定 writer 方法是“setFred”，而 reader 方法是“getFred”（或布尔属性的“isFred”）。**请注意，属性名称应以小写字符开头，在方法名称中将大写。**

（强调我的。）

目前尚不清楚是否有*任何*方法名称可以让`${account.UserId}`工作 - 如果没有，那么我认为错误消息可能会更清晰。（或者它可能只是更宽容一点。）

附加点：

*   目前尚不清楚为什么当您的类`Users`似乎代表单个用户时会被调用
*   不清楚它是否应该扩展一个与数据库连接有关的类——毕竟用户*不是数据库连接。*我怀疑你应该更加努力地让每个班级只对一个概念负责。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T09:30:20.167

好吧，你已经尝试`account.userId`过了，我猜它奏效了。

这是因为当您使用`account.UserId`它时会搜索该属性`userId`，而不是`UserId`因此它会显示该错误。

从 获取对象属性的[BeanELResolver的 javadocs](http://docs.oracle.com/javaee/6/api/javax/el/BeanELResolver.html)

> ```
> public java.lang.Object getValue(ELContext context,
>                                  java.lang.Object base,
>                                  java.lang.Object property) 
> ```
> 
> 提供的属性名称将首先被强制转换为字符串。如果属性是基础对象的可读属性，根据 JavaBeans 规范（这很重要），则返回 getter 调用的结果。如果 getter 抛出异常，则将其传播给调用者。如果该属性未找到或不可读，`PropertyNotFoundException`则抛出 a。

因此，当您违反 JavaBeans 规范时，它无法根据 JavaBeans 规范找到属性，因此会引发该异常

# java - 如何将war文件部署者上的第三方类加载到tomcat中

> ID：14908741
> 
> 赞同：0
> 
> 时间：2013-02-16T09:17:15.643
> 
> 标签：java, jakarta-ee, tomcat, servlets, jms

要求：

我有两个模块：

1) JMSClient (jar) 2) webapplication (war)

这两个程序作为个人运行良好。

现在我的要求是，在将 webappication 部署到 TomcatServer 时，应该调用 JMSClient jar 中的 MyListnear 类，并且 JMSClient 应该启动并运行。

为了满足这个要求，我在`WEB-INF\lib` 更新的 web.xml 文件下部署了 JMSClient.jar

```
<listener>
        <listener-class>com.jmsapiclient.JMSListener</listener-class>
</listener> 
```

我不确定这是正确的。一些机构可以帮助我采取更好的方法。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T10:50:37.740

如果您的 JMSListener 实现了该接口，那么如果上下文已初始化`javax.servlet.ServletContextListener`，它将通过消息通知。`contextInitialized(ServletContextEvent arg0)`

如果您使用 Servlet 3.0 规范实现 Web 应用程序，您可以使用 @WebListener ( `javax.servlet.annotation.WebListener`) 注释您的类。因此没有必要（但仍然可以）在 web.xml 文件中声明它。

这意味着它们部署在相同的上下文中。

# windows - OpenGL - 直接渲染到位图

> ID：14908743
> 
> 赞同：6
> 
> 时间：2013-02-16T09:17:37.323
> 
> 标签：windows, delphi, opengl, rendering, delphi-7

我正在制作一个包含一堆小窗口和控件（2D 渲染）的应用程序，我想将每个窗口和控件渲染到它自己的位图。这是到目前为止：

```
uses dglOpenGL;
...
var BMP: TBitmap;
    DC, RC: HDC;
...
function TMainForm.Init: Boolean;
begin
  Result := InitOpenGL;
  if Result = True then
  begin
    BMP := TBitmap.Create;
    BMP.PixelFormat := pf24bit;
    BMP.Width := 1280;
    BMP.Height := 1024;

    DC := (BMP.Canvas.Handle);
    RC := CreateRenderingContext(DC,
                                 [opGDI, opDoubleBuffered], // tried changing, didn't help
                                 24,
                                 24,
                                 0,
                                 0,
                                 0,
                                 0);
    ActivateRenderingContext(DC, RC);

    glClearColor(0.27, 0.4, 0.7, 0.0); // light blue
    glViewport(0, 0, 1280, 1024);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity;
    glOrtho(0, 1280, 0, 1024, -1, 10);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity;
  end;
end; 
```

渲染过程：

```
 glClear(GL_COLOR_BUFFER_BIT or GL_DEPTH_BUFFER_BIT);

  // red quad
  glColor3f(1, 0, 0);
  glBegin(GL_QUADS);
    glVertex2f(100, 100);
    glVertex2f(1280-100, 100);
    glVertex2f(1280-100, 1024-100);
    glVertex2f(100, 1024-100);
  glend;

  // swap
  SwapBuffers(DC); 
```

但是没有输出。
如果我使用`MainForm.Canvas.Draw(0, 0, BMP);`，则会出现一个白色矩形。

我想在位图上渲染东西，因为我可以用位图做很多事情（绘制其他图像，绘制文本，模糊），但如果有另一种方法来进行屏幕外渲染，那没关系......

那么如何设置我的应用程序进行离屏渲染呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-16T11:46:46.230

必须创建与目标设备上下文匹配的 OpenGL 上下文。对于窗口，它们的创建方式与位图不同。请参阅 [http://msdn.microsoft.com/en-us/library/windows/desktop/dd368826(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd368826(v=vs.85).aspx) ，尤其`dwFlags`是

> PFD_DRAW_TO_WINDOW 缓冲区可以绘制到窗口或设备表面。
> 
> PFD_DRAW_TO_BITMAP 缓冲区可以绘制到内存位图。

但是，您应该尽快为您的 DIB DC 创建渲染上下文。为什么？因为它会非常慢，因为 DIB 部分上的 OpenGL 渲染上下文将使用仅支持在 CPU 上运行的 OpenGL-1.1 的软件光栅化器。

相反，您应该创建一个 Framebuffer 对象，附加一个颜色渲染缓冲区附件，并在完成后将其`glReadPixels`添加到您的 DIBSection 中。更容易，更快。

### 由于评论请求而更新

（我不知道为什么 StackOverflow 没有正确的语法着色，即弄清楚哪里是评论，哪里不是）

```
// flushes the OpenGL error queue and
// counts the total number of errors
int flushGLErrors(void)
{
    int i = 0;
    while( glGetError() != GL_NO_ERROR ) {
        i++;
    }

    return i;
}

// returns a HBITMAP or NULL.
// The HBITMAP must be freed using DeleteObject 
HBITMAP ReadPixelsToHBITMAP(
    int x,
    int y,
    int width,
    int height )
{
    void *pdata = NULL;

    /* Note that this values only makes sense if we know a target
     * output size like if we put the image to paper. */ 
    const int physical_resolution = 2835; /* 72 DPI */

    BITMAPINFOHEADER bmih = {
        /* .biSize          = */ sizeof(bmih),
        /* .biWidth         = */ width,
        /* .bi.Height       = */ height,
        /* .biPlanes        = */ 1,                   /* mandatory */
        /* .biBitCount      = */ 24,                  /* 8 bits per pixel */
        /* .biCompression   = */ BI_RGB,              /* uncompressed */
        /* .biSizeImage     = */ 0,                   /* implicit */
        /* .biXPelsPerMeter = */ physical_resolution, /* ignored */
        /* .biYPelsPerMeter = */ physical_resolution, /* ignored */
        /* .biClrUsed       = */ 0,                   /* no palette */
        /* .biClrImportant  = */ 0
    };

    HBITMAP hbm = CreateDIBSection(
        hdc, /* may be different than the DC used for OpenGL */
        (PBITMAPINFO)&bmih, /* can do this cast, because no palette is used */
        DIB_RGB_COLORS,
        &pdata,
        NULL,
        0
    );

    if( !hbm ) {
        return NULL;
    }

    flushGLErrors();

    glPixelStorei(GL_PACK_SWAP_BYTES,   GL_FALSE);
    glPixelStorei(GL_PACK_LSB_FIRST,    GL_TRUE);
    glPixelStorei(GL_PACK_ROW_LENGTH,   0);
    glPixelStorei(GL_PACK_IMAGE_HEIGHT, 0);
    glPixelStorei(GL_PACK_SKIP_PIXELS,  0);
    glPixelStorei(GL_PACK_SKIP_ROWS,    0);
    glPixelStorei(GL_PACK_ALIGNMENT,    1);

    if( glGetError() != GL_NO_ERROR ) {
        DeleteObject(hbm);
        return NULL;
    }

    glReadPixels(x, y, width, height, GL_BGR, GL_UNSIGNED_BYTE, pdata);

    if( glGetError() != GL_NO_ERROR ) {
        DeleteObject(hbm);
        return NULL;
    }

    return hbm;
} 
```

# javascript - 模式中的 JavaScript、正则表达式、var

> ID：14908747
> 
> 赞同：2
> 
> 时间：2013-02-16T09:17:47.910
> 
> 标签：javascript, regex, replace

现在，我有这个替换：

```
var newcontent = newcontent
                .replace(/<div id="container_gallery_"(.*)><\/div>/gi,""); 
```

是否可以传递一个变量来代替`<div id="container_gallery_`？

我的

```
function delAlbum(a) { } 
```

执行此替换，我想将变量`a`放入

-编辑-

感谢您提供的信息！少掉头发！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T09:23:52.940

[您可以通过对象符号](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)而不是速记符号来构建 RegExp ：

```
function delAlbum(a) {
    var regex = new RegExp( a + '"(.*)><\/div>', 'gi' );

    var newcontent = newcontent
                    .replace( regex,"");
    // ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T09:24:24.863

要将变量放入正则表达式，您需要将正则表达式构造为字符串，然后将其传递给 RegExp 对象构造函数，如下所示：

```
var target = a + "(.*)></div>";
var newcontent = newcontent.replace(new RegExp(target, "gi"), ""); 
```

一般来说，在不受控制的 HTML 上进行正则表达式匹配是一个坏主意，而在来自`.innerHTML`属性的 HTML 上进行匹配则是一个非常糟糕的主意，因为有很多合法的 HTML 方法可以破坏你的正则表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T12:59:27.527

正如其他响应者所说，您可以为此使用 RegExp 构造函数。但是，当您使用它时，您应该摆脱它`(.*)`。假设它是为了消耗它所拥有的任何其他属性`<div>`，你最好使用`[^<>]*`. 这将一次将匹配限制为一个元素；`(.*)`是终极逃脱艺术家。

但我很好奇：你真的在传递字符串`<div id="container_gallery_"`，包括 HTML 元素的第一部分吗？还是您只是传递了属性值的替换（例如`container_gallery_`）？如果是这种情况，这个正则表达式应该更好地为您服务：

```
var regex = new RegExp('<div\s+"` + (your var) + '"[^<>]*></div>', 'gi' );

I'm assuming the `id` attribute is always in the first position which generally not a safe assumption, but it makes the regex a lot easier, both to write and to read. ;) 
```

并且不要忘记检查传入的字符串是否存在 HTML 属性中的非法字符。

# iphone - arc 禁止合成具有未指定存储属性的objective-c 对象的属性。（看下面）

> ID：14908754
> 
> 赞同：0
> 
> 时间：2013-02-16T09:18:26.163
> 
> 标签：iphone, ios5, automatic-ref-counting

当我声明财产时，我努力解决弧问题。

```
@property (readonly) NSMutableDictionary* activeTransfers;

@synthesize activeTransfers; 
```

当我声明属性时，我得到一个错误。（弧禁止合成具有未指定存储属性的objective-c对象的属性。），我必须做些什么来解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T09:36:56.210

将您的财产声明更改为：

@property (nonatomic,strong) NSMutableDictionary* activeTransfers; 然后检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T09:41:19.977

只需使用：

```
@property(strong) NSMutableDictionary *activeTransfers; 
```

并且不需要在.m中合成

# sql-server - 需要帮助来自文本的 XML

> ID：14908757
> 
> 赞同：0
> 
> 时间：2013-02-16T09:18:33.667
> 
> 标签：sql-server, xml, tsql

我有来自 txt 文件的 xml 我收到奇怪的错误（对我来说） txt 文件中有 2 个客户和 6 个产品

原样

结果集是

```
CUSTID  ORDER ID               
98295   29199752211 0   1   2321
98295   29199752211 0   1   76
98295   29199752211 0   2   179
98295   29199752211 0   3   180
98295   29199752211 0   4   320
98295   29199752211 0   5   NULL 
```

为什么客户ID相同？文本文件中有 2 个。如果我可以使用一些帮助，我会很高兴。

```
 SELECT
            (SELECT LNGNO FROM ARTUT13.DBO.TBLFATURA WHERE TXTOZELKOD=(c6.value('(//FISLER/FIS/FISID)[1]','VARCHAR(100)'))),--[LNGNO] 
            0,--[BYTTUR] 
            c6.value('(KALEMNO)[1]','VARCHAR(100)'),--[LNGKALEMSIRA]
            (SELECT LNGKOD FROM ARTUT13.DBO.TBLURUN WHERE TXTKOD=(c6.value('(URUNKODU)[1]','VARCHAR(100)'))),
            c6.value('(MIKTAR)[1]','VARCHAR(100)'),--[DBLMIKTAR]
            1,--[BYTBIRIMSIRA]
            1,--[DBLCEVRIM]
            c6.value('(BIRIMFIYAT)[1]','VARCHAR(100)'),--[DBLBIRIMFIYAT]
            0,--[BYTKAYITTIP] 
            0,--[BYTDETAYMAL] 
            c6.value('(KDV)[1]','VARCHAR(100)'),--[DBLKDVORANI]
            c6.value('(FIYAT)[1]','VARCHAR(100)'),--[DBLNETFIYAT]
            '',--[TXTOZELKOD]
            0,--[LNGVADEGUNU]
            GETDATE(),--[TRHSONISLEMTARIHI] 
            'MUHASEBE2',--[TXTSONISLEMHOST]
            '',--[DBLOTV] 
            c6.value('(//FISLER/FIS/FISID)[1]','VARCHAR(100)'),--[TXTOZELKOD1] 
            ''--[TXTOZELKOD2]
        from
        (select cast(c1 as xml) from OPENROWSET (BULK 'C:\AKTAR\FATURA.txt',SINGLE_BLOB
        ) as T1(c1) )as  T2(c2)
        outer apply c2.nodes('FISLER/FIS/KALEMLER/KALEM')  T6(c6) 
```

文本文件包含

```
 <FISLER>
       <FIS>
          <FISTIPI>SATIS</FISTIPI>
          <FISID>29199752211</FISID>
          <FISNO>a67502</FISNO>
          <IPTAL>0</IPTAL>
          <TARIH>13.02.2013</TARIH>
          <MUSKODU>35170339P</MUSKODU>
          <MUSADI>MEHMET PEHLIVAN - MORTAN GIDA MEHMET PEHLIVAN</MUSADI>
          <VERGIDAIRESI>KARABURUN MAL MD</VERGIDAIRESI>
          <VERGINO>47035582576</VERGINO>
          <DEPOKODU>01</DEPOKODU>
          <ODEMETIPI>6</ODEMETIPI>
          <TOPLAMBRUT>1200.24</TOPLAMBRUT>
          <TOPLAMISKONTO>60.01</TOPLAMISKONTO>
          <TOPLAMKDV>205.24</TOPLAMKDV>
          <TOPLAMNET>1345.47</TOPLAMNET>
          <SATISTEMSILCISIKODU>001</SATISTEMSILCISIKODU>
          <DAGITICIKODU></DAGITICIKODU>
          <ARACKODU></ARACKODU>
          <ARACPLAKA></ARACPLAKA>
          <SEVKNO></SEVKNO>
          <VADETARIHI>06.03.2013</VADETARIHI>
          <KALEMLER>
             <KALEM>
                <KALEMNO>1</KALEMNO>
                <URUNKODU>4009011024</URUNKODU>
                <URUNADI>EFE KLASİK RAKI45º-100clx12AD TAVA( 63,50 FİYATLI)</URUNADI>
                <MIKTAR>24</MIKTAR>
                <BIRIMFIYAT>50.01</BIRIMFIYAT>
                <FIYAT>1200.24</FIYAT>
                <BIRIM></BIRIM>
                <KDV>18</KDV>
                <ISKONTOLAR>
                   <ISKONTO>
                      <price>1200.24</price>
                      <KODU></KODU>
                      <ADI>Ürün İsk.1</ADI>
                      <TIPI></TIPI>
                      <ORAN>5</ORAN>
                      <TUTAR>60.012</TUTAR>
                   </ISKONTO>
                </ISKONTOLAR>
             </KALEM>
          </KALEMLER>
       </FIS>
       <FIS>
          <FISTIPI>SATIS</FISTIPI>
          <FISID>29199773107</FISID>
          <FISNO>a67511</FISNO>
          <IPTAL>0</IPTAL>
          <TARIH>13.02.2013</TARIH>
          <MUSKODU>100242</MUSKODU>
          <MUSADI>NUMBER ONE APART OTEL RESTAURANT</MUSADI>
          <VERGIDAIRESI>KARABURUN</VERGIDAIRESI>
          <VERGINO>50545253560</VERGINO>
          <DEPOKODU>01</DEPOKODU>
          <ODEMETIPI>6</ODEMETIPI>
          <TOPLAMBRUT>2634.24</TOPLAMBRUT>
          <TOPLAMISKONTO>195.21</TOPLAMISKONTO>
          <TOPLAMKDV>439.03</TOPLAMKDV>
          <TOPLAMNET>2878.06</TOPLAMNET>
          <SATISTEMSILCISIKODU>001</SATISTEMSILCISIKODU>
          <DAGITICIKODU></DAGITICIKODU>
          <ARACKODU></ARACKODU>
          <ARACPLAKA></ARACPLAKA>
          <SEVKNO></SEVKNO>
          <VADETARIHI>06.03.2013</VADETARIHI>
          <KALEMLER>
             <KALEM>
                <KALEMNO>1</KALEMNO>
                <URUNKODU>4001017212</URUNKODU>
                <URUNADI>EFE YAŞ ÜZÜM RAKISI (45º) - 70 cl 12LI KOLİ</URUNADI>
                <MIKTAR>12</MIKTAR>
                <BIRIMFIYAT>47.03</BIRIMFIYAT>
                <FIYAT>564.36</FIYAT>
                <BIRIM></BIRIM>
                <KDV>18</KDV>
                <ISKONTOLAR>
                   <ISKONTO>
                      <price>564.36</price>
                      <KODU></KODU>
                      <ADI>Ürün İsk.1</ADI>
                      <TIPI></TIPI>
                      <ORAN>10</ORAN>
                      <TUTAR>56.436</TUTAR>
                   </ISKONTO>
                </ISKONTOLAR>
             </KALEM>
             <KALEM>
                <KALEMNO>2</KALEMNO>
                <URUNKODU>4001012324</URUNKODU>
                <URUNADI>EFE YAŞ ÜZÜM RAKISI (45º) - 20 cl 24 LU KOLİ</URUNADI>
                <MIKTAR>24</MIKTAR>
                <BIRIMFIYAT>16.07</BIRIMFIYAT>
                <FIYAT>385.68</FIYAT>
                <BIRIM></BIRIM>
                <KDV>18</KDV>
                <ISKONTOLAR>
                   <ISKONTO>
                      <price>385.68</price>
                      <KODU></KODU>
                      <ADI>Ürün İsk.1</ADI>
                      <TIPI></TIPI>
                      <ORAN>10</ORAN>
                      <TUTAR>38.568</TUTAR>
                   </ISKONTO>
                </ISKONTOLAR>
             </KALEM>
             <KALEM>
                <KALEMNO>3</KALEMNO>
                <URUNKODU>4001013724</URUNKODU>
                <URUNADI>EFE YAŞ ÜZÜM RAKISI (45º) - 35 cl 24 LU KOLİ</URUNADI>
                <MIKTAR>24</MIKTAR>
                <BIRIMFIYAT>26.66</BIRIMFIYAT>
                <FIYAT>639.84</FIYAT>
                <BIRIM></BIRIM>
                <KDV>18</KDV>
                <ISKONTOLAR>
                   <ISKONTO>
                      <price>639.84</price>
                      <KODU></KODU>
                      <ADI>Ürün İsk.1</ADI>
                      <TIPI></TIPI>
                      <ORAN>10</ORAN>
                      <TUTAR>63.984</TUTAR>
                   </ISKONTO>
                </ISKONTOLAR>
             </KALEM>
             <KALEM>
                <KALEMNO>4</KALEMNO>
                <URUNKODU>4001011013</URUNKODU>
                <URUNADI>EFE YAŞ ÜZÜM RAKISI (45º) - 100 cl 12LI TAVA</URUNADI>
                <MIKTAR>6</MIKTAR>
                <BIRIMFIYAT>60.37</BIRIMFIYAT>
                <FIYAT>362.22</FIYAT>
                <BIRIM></BIRIM>
                <KDV>18</KDV>
                <ISKONTOLAR>
                   <ISKONTO>
                      <price>362.22</price>
                      <KODU></KODU>
                      <ADI>Ürün İsk.1</ADI>
                      <TIPI></TIPI>
                      <ORAN>10</ORAN>
                      <TUTAR>36.222</TUTAR>
                   </ISKONTO>
                </ISKONTOLAR>
             </KALEM>
             <KALEM>
                <KALEMNO>5</KALEMNO>
                <URUNKODU>4010017001</URUNKODU>
                <URUNADI>EFE 5 YILLIK RAKI45º-70clx3AD KOLİ</URUNADI>
                <MIKTAR>6</MIKTAR>
                <BIRIMFIYAT>113.69</BIRIMFIYAT>
                <FIYAT>682.14</FIYAT>
                <BIRIM></BIRIM>
                <KDV>18</KDV>
             </KALEM>
          </KALEMLER>
       </FIS>
    </FISLER> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T10:36:25.013

1）您的问题不清楚：如何`CUSTID`从该 XML 中提取？**该 XML中没有`CUSTID`元素。**

2) 很可能，原因是（如果我查看您的源代码）使用绝对引用 ( `.value('(//element...)[1]',...)`) 而不是相对引用 ( `.value('(element...)[1]',...)`)。

样本：

```
DECLARE @x XML;
SET @x = N'<...>';
SELECT  c6.value('(//FISLER/FIS/FISID)[1]','VARCHAR(100)') AS AbsoluteRef_FISID
FROM    @x.nodes('FISLER/FIS/KALEMLER/KALEM')  T6(c6)

SELECT  c6.value('(FISID)[1]','VARCHAR(100)') AS RelativeRef_FISID
FROM    @x.nodes('FISLER/FIS')  T6(c6) 
```

结果：

```
AbsoluteRef_FISID
-------------------
29199752211
29199752211
29199752211
29199752211
29199752211
29199752211

RelativeRef_FISID
-------------------
29199752211
29199773107 
```

`//`表示绝对引用，并且`c6.value('(//FISLER/FIS/FISID)[1]','VARCHAR(100)')`只会从该 XML 中提取第一个 ( `[1]`)值。`FISID`

`.value('(FISID)[1]',...)`使用相对引用（相对于`nodes('FISLER/FIS') T6(c6)`），结果将包含*所有* `FISID`值。如果您运行此查询

```
SELECT  c6.query('.') AS XmlNode
FROM    @x.nodes('FISLER/FIS')  T6(c6); 
```

您将得到两行，这意味着`.nodes('FISLER/FIS')`将提取两行

```
XmlNode
----------------------------------------------------------------------------
<FIS><FISTIPI>SATIS</FISTIPI><FISID>29199752211</FISID><FISNO>a67502</FISNO>
<FIS><FISTIPI>SATIS</FISTIPI><FISID>29199773107</FISID><FISNO>a67511</FISNO> 
```

从`@x XML`变量。从这一点（两行）开始，value 方法将为每一行`.value('(FISID)[1]',...)`提取第一个`FISID`( )。`(FISID)[1]`因此，您将获得两个`FISID`值。

[SQLFiddle 演示](http://www.sqlfiddle.com/#!3/759c5/7)

# actionscript-3 - Adobe Flash AS3：在具有 MouseEvent 的列表中获取所选项目的数据

> ID：14908758
> 
> 赞同：0
> 
> 时间：2013-02-16T09:18:39.900
> 
> 标签：actionscript-3, flash-cs4

我有一个歌曲列表，如果我双击一个项目，它将播放歌曲。我这样做。aList 是列表的实例名称。

```
aList.addEventListener(MouseEvent.DOUBLE_CLICK, changeSong);

function changeSong(e:MouseEvent) {
     ....
     song = e.target.selectedItem.data;
     ....
} 
```

我在 (song = e.target.selectedItem.data;) 部分有错误。好像我使用了错误的属性。

```
ReferenceError: Error #1069: Property selectedItem not found on    fl.controls.listClasses.CellRenderer and there is no default value.
at playlist_fla::MainTimeline/changeSong() 
```

有谁知道如何正确获取项目的数据。因为我认为我的语法是错误的。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T10:37:32.890

您为 List 组件的 dataProvider 分配了什么？

`e.target.data`是具有附加属性的对象。

如果您不确定数据对象的属性，您可以像这样迭代：

```
for (var property:String in data)
{
    trace("data." + property + " = " + data[property]);
} 
```

如果它是您尝试分配给歌曲变量的标准 itemRenderer 的标签，您可能会成功：

`song = e.target.listData.label;`

# php - 使用联合在分组前寻求更有效的排序方式

> ID：14908760
> 
> 赞同：0
> 
> 时间：2013-02-16T09:18:49.670
> 
> 标签：php, mysql, sql, join

以下代码适用于我正在寻找的内容，但我正在尝试查看是否有更好的方法来创建有效的新闻提要。此新闻提要应该选择最近的评论和/或喜欢等，但只显示每个用户最近的（即如果约翰喜欢 2 个项目并评论了 3 个项目，则只显示最近的评论和喜欢。请注意涉及多个UNION。

```
SELECT * 
FROM (SELECT username, time, comment FROM comments ORDER BY time DESC) AS temp 
GROUP by username 
UNION 
SELECT * 
FROM (SELECT username, time, likes FROM likes ORDER BY time DESC) AS temp 
GROUP BY username 
ORDER BY time DESC
LIMIT 10 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T09:28:41.817

我认为你可以`JOIN`在两个表上`username`，但这会给你额外的列而不是联合，比如：

```
SELECT
  c1.username,
  c1.`time` AS CommentTime,
  c1.comment,
  l1.`time` AS LikeTime,
  l1.likes
FROM comments AS c1
INNER JOIN
(
   SELECT username, MAX(`time`) LatestTime
   FROM Comments 
   GROUP BY username
) AS c2  ON c1.username = c2.username
        AND c1.`time`   = c2.LatestTime
INNER JOIN Likes l1 ON c1.username = l2.username
INNER JOIN 
(
   SELECT username, MAX(`time`) LatestTime
   FROM Likes
   GROUP BY username   
) AS l2  ON l1.username = l2.username
        AND l1.`time`   = l2.latestTime
ORDER BY c1.`time` DESC
LIMIT 10; 
```

这将为您`username`提供最新的评论和最新`likes`的最新时间。

# jquery - jquery datepicker spring mvc 日期格式

> ID：14908761
> 
> 赞同：1
> 
> 时间：2013-02-16T09:18:50.387
> 
> 标签：jquery, spring, hibernate, spring-mvc, jquery-ui-datepicker

当我用 datepicker 保存一个对象时，它是好的。但是当我尝试更新时，我会遇到问题。在更新休眠期间返回日期对象，如 2012-3-4，这进入 jquery datepicker 字段。日期选择器字段不知道此格式，并且在更新期间不会保存日期，因为日期格式不正确。jquery 日期格式为 mm/dd/yyyy。我想在日期选择器中保留这种格式。

我该怎么办？

jQuery

```
$( "#event_end_date" ).datepicker(); 
```

.jsp

```
 <f:input path="activity.eventDate" type="text" style="width: 90%"/> 
```

控制器部分

```
 @RequestMapping("/activity/{id}")
public String updateActivity(Model model, @PathVariable Long id) {
    Activity activity =  (Activity) databaseDao.load(id, Activity.class);
    ActivityVO act = new ActivityVO();
    act.setActivity(activity);
    model.addAttribute("activityVO", act);
    return "activity/create-activity";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T09:54:28.197

使用 Spring 时，您有很多可能性来控制日期格式。我个人更喜欢CustomPropertyEditor，但你可以给注释驱动格式一个机会。您可以查看以下我的资源列表：

[http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/validation.html](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/validation.html)

[@DateTimeFormat 无法正常工作](https://stackoverflow.com/questions/8827122/datetimeformat-not-working-properly)

[Spring Java @DateTimeFormat](https://stackoverflow.com/questions/9885883/spring-java-datetimeformat)

[Spring MVC 类型转换：PropertyEditor 还是 Converter？](https://stackoverflow.com/questions/12544479/spring-mvc-type-conversion-propertyeditor-or-converter)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T10:57:00.177

我关注了[http://ankeetmaini.wordpress.com/2012/01/24/binding-date-in-spring/](http://ankeetmaini.wordpress.com/2012/01/24/binding-date-in-spring/) 它解决了问题

```
@InitBinder
    public void initBinder(WebDataBinder webDataBinder) {
             SimpleDateFormat dateFormat = new SimpleDateFormat("MM/dd/yyyy");
             dateFormat.setLenient(false);
             webDataBinder.registerCustomEditor(Date.class, new CustomDateEditor(dateFormat, true));
         } 
```

# c# - C# 游戏服务器架构

> ID：14908762
> 
> 赞同：1
> 
> 时间：2013-02-16T09:19:03.730
> 
> 标签：c#, design-patterns, tcp, tcpclient, tcplistener

我想知道如何编写一个“好”的游戏服务器。我有一些想法，但我从来没有制作过服务器，我不想最终写出愚蠢的代码。

我知道如何处理 TCP 连接等，但我的问题是如何在服务器和客户端之间进行通信。

例如：我写了一个像 TicTacTow 这样的游戏。现在一个用户点击了一个单元格，我想告诉那个服务器。服务器应验证用户是否可以单击该单元格并告诉客户端。如果服务器告诉是；您可以单击客户端将其显示为“X”。

现在我的问题是：我究竟如何告诉服务器我要单击该字段。我在这里遇到了另一个问题，他们最终使用了命令模式。但如果我理解正确，我将不得不创建一个实现接口的命令。我序列化该命令的一个实例并将其发送到服务器。服务器执行命令。但我必须解决主要问题：

1.  如果该命令将 tictacto 的单元格设置为 X。我如何告诉服务器他必须将我需要将单元格设置为 X 的 GameBoard 传递给接口 ICommand 的调用方法。
2.  这不是非常不安全吗？我的意思是我可以编写一个命令来删除我的所有文件或停止服务器并将其发送到服务器。我不相信命令模式是个好主意。

所以我正在寻找更好的东西。我只想为我的客户端和服务器提供一个简单且可扩展的架构。有什么好的模式吗？

哦，还有一个问题：您会使用序列化程序还是自己编码数据？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-16T09:42:01.587

是什么让您产生了直接使用对象序列化的想法？对于游戏服务器来说这将是一件非常糟糕的事情，因为它很慢，很容易崩溃（特别是如果你有一个复杂的对象图要序列化）并且通常是hackish。解决方案是从头开始设计和实现您自己的游戏通信协议——幸运的是这很容易。

序列化主要在乏味的业务应用程序和数据层中完成，目标是在异构系统之间轻松传输数据，这就是经常使用基于 XML 的序列化的原因。这些要求不适用于游戏。

请注意，序列化对象仅序列化数据成员，而不序列化方法。因此，您对恶意代码被发送的担忧是没有根据的。

无论如何，服务器设计的第一条规则是*永远不要信任客户端*——这意味着游戏服务器需要在内存中维护当前游戏状态的副本，并将游戏规则应用于客户端发送的每个游戏移动消息。

从鸟瞰的角度来看，这是我设计井字游戏系统的方式：

### 协议

因为对游戏状态的更改是事件驱动的并且是基于回合的，所以基于动词和参数的协议效果最好。我会有以下动词，假设这严格来说是一个 2 人游戏（使用 2 个客户端和一个服务器）

#### 客户端到服务器

```
JOIN
READY
MOVE (x, y)
QUIT 
```

#### 服务器到客户端

```
JOINED
ISREADY
MOVED (player, x, y)
DENIED (reason)
LEFTGAME (player) 
```

客户端到服务器的动词应该是不言自明的。您会注意到服务器到客户端动词是原始客户端到服务器消息的代理版本，除了 MOVED 包含移动玩家的 ID，还包含 DENIED 以通知客户端他们的移动被拒绝。LEFTGAME 动词用于表示其他玩家已经退出。

### 服务器

这是假设井字游戏服务器的不完整伪代码实现。我写的代码只涉及应用程序的网络层，所有围绕井字游戏规则和动作的实际逻辑都包含在`TicTacToeBoard`类中，这里不做描述，但是实现起来应该很简单。

`Task`服务器逻辑发生在单个线程中，如果您使用 .NET 中的现代/ IO API，则可以非常轻松地在单个线程中完成多路分离传入消息的逻辑`async`，否则使用每个远程连接一个线程可以很快以及处理它的简单方法（2人游戏不需要担心缩放 - 但这不会很好地扩展到数百名玩家，只是说）。（处理这些远程连接的代码这里不详述，它隐藏在 abstract `WaitForAndGetConnection`、`GetLastIncomingMessage`和`SendMessage`方法后面）。

```
 // Ready-room state
    connection1 = WaitForAndGetConnection();
    connection2 = WaitForAndGetConnection();
    SendMessage( connection1, "JOINED" ); // inform player 1 that another player joined

    p1Ready = false, p2Ready = false;
    while(message = GetLastIncomingMessage() && !p1Ready && !p2Ready) {
        if( message.From == connection1 && message.Verb == "READY" ) p1Ready = true;
        if( message.From == connection2 && message.Verb == "READY" ) p2Ready = true;        
    }

    SendMessage( connection1, "ISREADY" ); // inform the players the game has started
    SendMessage( connection2, "ISREADY" ); // inform the players the game has started

    // Game playing state
    TicTacToeBoard board = new TicTacToeBoard(); // this class represents the game state and game rules

    p1Move = true; // indicates whose turn it is to move
    while(message = GetLastIncomingMessage()) {

        if( message.Verb == "MOVE" ) {

            if( p1Move && message.From == connection1 ) {
                 if( board.Player1Move( message.X, message.Y ) ) {
                    SendMessage( connection1, "MOVED (1, " + message.X + "," + message.Y + " )");
                    SendMessage( connection2, "MOVED (1, " + message.X + "," + message.Y + " )");
                    p1Move = false;
                } else {
                    SendMessage( message.From, "DENIED \"Disallowed move.\".");
                }

            } else if( !p1Move && message.From == connection2 ) {

                if( board.Player2Move( message.X, message.Y ) ) {
                    SendMessage( connection1, "MOVED (2, " + message.X + "," + message.Y + " )");
                    SendMessage( connection2, "MOVED (2, " + message.X + "," + message.Y + " )");
                    p1Move = true;
                } else {
                    SendMessage( message.From, "DENIED \"Disallowed move.\".");
                }

            } else {
                SendMessage( message.From, "DENIED \"It isn't your turn to move\".");
            }
            if( board.IsEnded ) { 
                // handle game-over...
            } 
        } else if( message.Verb == ... // handle all of the other verbs, like QUIT 
        }
    } 
```

# mercurial - Mercurial 中的软链接

> ID：14908763
> 
> 赞同：13
> 
> 时间：2013-02-16T09:19:20.660
> 
> 标签：mercurial, symlink, hardlink

Mercurial 中是否存在与 NIX 目录或文件的软链接或硬链接等价的东西。

基本上，文件（或目录）链接到“其他地方”的文件并遵循该位置的版本（与我认为必须合并的常规分支不同）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-16T18:36:55.503

存储库内部的 Mercurial 版本软链接非常棒。它会检测它们、记录它们并为您创建它们。是否有您正在寻找的特定用例？与到达存储库外部的链接最接近的是子存储库，它是指向另一个存储库的特定版本的指针。

**符号链接工作**

```
(df)Ry4ans-MacBook-Air:~ ry4an$ hg init olav
(df)Ry4ans-MacBook-Air:~ ry4an$ cd olav/
(df)Ry4ans-MacBook-Air:olav ry4an$ echo this > target
(df)Ry4ans-MacBook-Air:olav ry4an$ ln -s target link
(df)Ry4ans-MacBook-Air:olav ry4an$ ls -l
total 16
lrwxr-xr-x  1 ry4an  staff     6B Feb 16 19:25 link@ -> target
-rw-r--r--  1 ry4an  staff     5B Feb 16 19:25 target
(df)Ry4ans-MacBook-Air:olav ry4an$ hg commit -A -m "link and its target"
adding link
adding target
(df)Ry4ans-MacBook-Air:olav ry4an$ hg log -p
changeset:   0:42a41a431661
tag:         tip
user:        Ry4an Brase <ry4an-hg@ry4an.org>
date:        Sat Feb 16 19:26:17 2013 -0500
summary:     link and its target

diff -r 000000000000 -r 42a41a431661 link
--- /dev/null   Thu Jan 01 00:00:00 1970 +0000
+++ b/link  Sat Feb 16 19:26:17 2013 -0500
@@ -0,0 +1,1 @@
+target
\ No newline at end of file
diff -r 000000000000 -r 42a41a431661 target
--- /dev/null   Thu Jan 01 00:00:00 1970 +0000
+++ b/target    Sat Feb 16 19:26:17 2013 -0500
@@ -0,0 +1,1 @@
+this

(df)Ry4ans-MacBook-Air:olav ry4an$ hg update null
0 files updated, 0 files merged, 2 files removed, 0 files unresolved
(df)Ry4ans-MacBook-Air:olav ry4an$ ls -l
(df)Ry4ans-MacBook-Air:olav ry4an$ hg update tip
2 files updated, 0 files merged, 0 files removed, 0 files unresolved
(df)Ry4ans-MacBook-Air:olav ry4an$ ls -l
total 16
lrwxr-xr-x  1 ry4an  staff     6B Feb 16 19:26 link@ -> target
-rw-r--r--  1 ry4an  staff     5B Feb 16 19:26 target 
```

**但是硬链接没有**

```
$hg commit -Am "hardlinks target"
adding link
adding target
$hg log -p
changeset:   0:ec9407634133
tag:         tip
user:        Chris Wesseling <chris.wesseling@cwi.nl>
date:        Wed Mar 13 23:14:44 2013 +0100
summary:     hardlinks target

diff -r 000000000000 -r ec9407634133 link
--- /dev/null   Thu Jan 01 00:00:00 1970 +0000
+++ b/link      Wed Mar 13 23:14:44 2013 +0100
@@ -0,0 +1,1 @@
+foo
diff -r 000000000000 -r ec9407634133 target
--- /dev/null   Thu Jan 01 00:00:00 1970 +0000
+++ b/target    Wed Mar 13 23:14:44 2013 +0100
@@ -0,0 +1,1 @@
+foo

$ls -lin
total 8
276702 -rw-r--r-- 2 1204653 5900 4 13 mrt 23:14 link
276702 -rw-r--r-- 2 1204653 5900 4 13 mrt 23:14 target
$hg update null
0 files updated, 0 files merged, 2 files removed, 0 files unresolved
$hg update tip
2 files updated, 0 files merged, 0 files removed, 0 files unresolved
$ls -lin
total 8
276719 -rw-r--r-- 1 1204653 5900 4 13 mrt 23:15 link
276721 -rw-r--r-- 1 1204653 5900 4 13 mrt 23:15 target 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-01-29T16:20:16.137

# *nix 上的路径审计

在 *nix 系统上，[`hg`Mercurial](https://www.mercurial-scm.org/guide/)审核符号链接*（“符号链接”）*以确保引用路径的安全性。例如，**绝对路径和空路径被认为是不安全的**，因此不会添加到存储库中。

Mercurial 开发人员尚未记录此功能。但是，[源代码包含一条注释](https://www.mercurial-scm.org/repo/hg/file/f15c646bffc7/mercurial/scmutil.py#l61)，解释有点模糊：

```
class pathauditor(object):
    '''ensure that a filesystem path contains no banned components.
    the following properties of a path are checked:

    - ends with a directory separator
    - under top-level .hg
    - starts at the root of a windows drive
    - contains ".."
    - traverses a symlink (e.g. a/symlink_here/b)
    - inside a nested repository (a callback can be used to approve
      some nested repositories, e.g., subrepositories)
    ''' 
```

在 Windows 上，由于各种原因不支持符号链接，请参阅：

*   [https://www.mercurial-scm.org/bts/issue1825](https://www.mercurial-scm.org/bts/issue1825)
*   [https://www.mercurial-scm.org/bts/issue2579](https://www.mercurial-scm.org/bts/issue2579)

# sql - 根据条件插入日期时间值

> ID：14908765
> 
> 赞同：0
> 
> 时间：2013-02-16T09:19:32.570
> 
> 标签：sql, sql-server, time-and-attendance

希望我能在存储过程中根据条件插入日期时间得到一些帮助。

我有以下测试查询，当条件为真时，它会在午夜插入额外的一拳。

```
Declare
@Clock datetime = dateadd(dd ,0, datediff(dd,0,'02-07-2013'))
,@Status varchar(50) = 'CLockin'
,@UID varchar(10) ='001'
,@UserName varchar(50)='ABC'

IF EXISTS (SELECT UID, Clock From TestRecord
Where CONVERT(VARCHAR(8),Clock,108) >'00:00:00' and
CONVERT(VARCHAR(8),Clock,108) <'02:00:00')

INSERT INTO TestRecord 
(CLock,Status,UID,UserName)
Values (@Clock,@Status,@UID,@UserName) 
```

因此，通过下表，

```
Date          UID        UserName          Status          Clock
====          ===        ========          ======          =====
02/06/2012    001        ABC               Clockin         17:00
02/07/2013    001        ABC               ClockIn         00:59 
```

上面的查询将在午夜创建一个额外的打孔。

```
Date          UID        UserName          Status          Clock
====          ===        ========          ======          =====
02/06/2012    001        ABC               Clockin         17:00
02/07/2013    001        ABC               ClockIn         00:00
02/07/2013    001        ABC               ClockIn         00:59 
```

然后上表将移至如下所示。

```
Date        UID       Name         In        Out       Total
====        ===       ====         ==        ===       =====
02/06       001       ABC          17:00     17:00      0
02/07       001       ABC          00:00     00:59      0.98 
```

几天来，我一直在尝试弄清楚如何在前一天插入另一拳。即，虽然 02/07 将获得午夜打孔，但 02/06 还需要 02/06 23:59 打孔，我已经使用上述相同查询对其进行了测试，但我得到的最接近的是

```
declare @Clock datetime =CONVERT(VARCHAR(12),'23:59') 
```

这给了我。1900/01/01 23:59

我的问题是。我应该如何运行查询以获取正确格式的日期和时间？有什么办法可以使用条件中的日期。即，当表格中的日期时间>00:00 和<02:00 时，从表格中插入日期时间00:00 和日期时间-1 23:59。

谢谢..

进一步挖掘，并从这里的好人那里得到提示。我现在可以像这样在 2 部分中声明日期时间..

```
Declare @date datetime = dateadd(dd ,-1, datediff(dd,0,'02-07-2013'))
,@time datetime = CONVERT(VARCHAR(12),'23:59')
,@mydt datetime
SET @mydt=Cast(@date+ ' ' + @time as datetime) 
```

然后运行带有值的插入（@mydt ...）

其他绝望的尝试是执行以下操作..

```
Declare @date datetime 
SET @date = (Select Clock from CONVERT(VARCHAR(8),Clock,108) >'00:00:00' 
and CONVERT(VARCHAR(8),Clock,108) <'02:00:00') 
```

但这会引发错误。子查询返回超过 1 个值。当子查询跟随 =、!=、<、<=、>、>= 或子查询用作表达式时，这是不允许的。

# ruby-on-rails-3 - 用于heroku和开发的procfile

> ID：14908769
> 
> 赞同：0
> 
> 时间：2013-02-16T09:20:18.673
> 
> 标签：ruby-on-rails-3, heroku, foreman, procfile

我`Procfile`对在本地机器和 heroku 中使用 on development有点困惑

为了在我的本地机器上启动 Rails，我需要

```
web: bundle exec rails server -p $PORT

worker:  bundle exec rake jobs:work 
```

当我使用时有效`foreman`

但是heroku运行

```
bundle exec thin start -R config.ru -e production -p 48378 
```

我在里面写了什么，`Procfile`所以它对我的本地机器和heroku来说会很好吗？

# php - 如何调整图像大小并保持宽高比并上传

> ID：14908773
> 
> 赞同：0
> 
> 时间：2013-02-16T09:21:19.523
> 
> 标签：php, image, image-resizing, aspect-ratio

我有一个按钮，可以将背景图像上传到文件夹并将文件名保存到数据库，但我不知道如何在上传之前调整图像大小。其实我面临两个问题。1 - 如何调整图像大小并上传。2 - 如何将图像显示为具有不同尺寸的 div 的背景图像。

我到目前为止所做的：

**html**

```
<div class="image_load_div">
 <form id="imageform" enctype="multipart/form-data" method="post" action="upload.php">
   <input name="photoimg" id="photoimg" type="file"/>
 </form>
</div> 
```

**javascript**

```
$("#imageform").ajaxForm().submit(); 
```

**php - 上传文件**

```
$valid_formats = array("jpg", "png", "gif", "bmp");
if(isset($_POST) and $_SERVER['REQUEST_METHOD'] == "POST") {
   name = $_FILES['photoimg']['name'];
   $size = $_FILES['photoimg']['size'];
   if(strlen($name)) {
 list($txt, $ext) = explode(".", $name);
 if(in_array($ext,$valid_formats)) {
   if($size<(1024*1024)) {
          session_start();
      $id = $_SESSION['QuestionId'];
      $path = "/images/Img/".$id."_bg.".$ext;

          if( move_uploaded_file($_FILES["photoimg"]["tmp_name"],$path) ) {
             // Save the file name into database
          }
        else { echo "<script>alert('Upload failed');</script>"; }
   else { echo "<script>alert('Image file size max 1 MB');</script>"; }                 
    else {  echo "<script>alert('Invalid file format..');</script>"; }  
 else { echo "<script>alert('Please select image..!');</script>";   exit; } 
```

我想将图像保存为 height:408px; 宽度：490px；并且在显示图像时我想显示这个图像宽度：174px；高度：108px； ***IMP !在上传和显示时，需要考虑纵横比；*** 现在上传正在工作。

请帮我解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T10:56:57.887

这是有效且经过良好测试的代码。希望它对你有用。

调用方法：

```
$newname="xyz";
$filename=$_FILES['featured-img']['name'];
$extension=strtolower(substr(strrchr($filename, '.'), 1)); //Get extension
$extension=trim($extension);
$newfilename=$newname.$extension;
$newfilename=preg_replace('/\s+/', '_',$newfilename);

$target1 = "directory_path".$newfilename;
if(move_uploaded_file($_FILES['featured-img']['tmp_name'],$target1));   
scaleImage($target1,500, 350, $target1); 
```

方法定义：

```
function scaleImage($source_image_path, $maxWidth, $maxHeight, $thumbnail_image_path){

          list($source_image_width, $source_image_height, $source_image_type) = getimagesize($source_image_path);
    switch ($source_image_type) {
        case IMAGETYPE_GIF:
            $source_gd_image = imagecreatefromgif($source_image_path);
            break;
        case IMAGETYPE_JPEG:
            $source_gd_image = imagecreatefromjpeg($source_image_path);
            break;
        case IMAGETYPE_PNG:
            $source_gd_image = imagecreatefrompng($source_image_path);
            break;
    }
    if ($source_gd_image === false) {
        return false;
    }
    $thumbnail_image_width=$maxWidth;
    $thumbnail_image_height=$maxHeight;

    $thumbnail_gd_image = imagecreatetruecolor($thumbnail_image_width, $thumbnail_image_height);
    imagecopyresampled($thumbnail_gd_image, $source_gd_image, 0, 0, 0, 0, $thumbnail_image_width, $thumbnail_image_height, $source_image_width, $source_image_height);
    imagejpeg($thumbnail_gd_image, $thumbnail_image_path, 90);
    imagedestroy($source_gd_image);
    imagedestroy($thumbnail_gd_image);
    return true;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T09:23:35.707

您可以为此使用 CSS，并且仍然保持比例。

```
<img src="image.png" style="max-width: 400px;"> 
```

然后你可以使用 php 使图像的尺寸更小作为*捕获所有*最大尺寸，然后使用 CSS 微调它的大小

# asp.net - Flash 到 ASP.NET

> ID：14908777
> 
> 赞同：0
> 
> 时间：2013-02-16T09:21:48.403
> 
> 标签：asp.net, flash

我制作了一个 Flash 游戏，当他的用户完成游戏时，他单击一个按钮，将他发送回 ASPX 文件（这是将 DATA 保存到 DB 所必需的），然后在保存信息后重新加载回 SWF 文件.

当用户单击此按钮时，它会在浏览器的角落显示加载百分比。

加载进度指示什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T09:40:18.413

在 Flash 电影或效果 ..etc 上的帧。当帧完成时，电影就完成了。然后在最后一帧你可以调用一个函数，你可以做任何你想做的事情。

# asp.net - 从 umbraco 搜索中排除节点

> ID：14908778
> 
> 赞同：3
> 
> 时间：2013-02-16T09:21:56.727
> 
> 标签：asp.net, umbraco

我已经创建了 umbraco 搜索，在其中我想要一些不应该被搜索的节点，所以我能做的是我应该在搜索条件中定义一些东西，或者我应该在检查配置文件的设置或索引设置代码中做一些事情

```
 <IndexSet SetName="DemoIndexSet" IndexPath="~/App_Data/TEMP/ExamineIndexes/DemoIndex/">
<IndexAttributeFields/>
<IndexUserFields/>
<IncludeNodeTypes/>
<ExcludeNodeTypes>
<add Name="News" />
</ExcludeNodeTypes>
</IndexSet> 
```

并检查设置文件

```
<add name="DemoIndexer" type="UmbracoExamine.LuceneExamineIndexer, UmbracoExamine" runAsync="true"
     supportUnpublished="false"
     supportProtected="true"
     interval="10"
     analyzer="Lucene.Net.Analysis.WhitespaceAnalyzer, Lucene.Net" indexSet="DemoIndexSet"/> 
```

和用户控制代码是

```
public static class SearchResultExtensions
    {
        public static string FullUrl(this SearchResult sr)
        {
            return umbraco.library.NiceUrl(sr.Id);
        }

    }

 SearchTerm = Request.QueryString["s"];

            if (string.IsNullOrEmpty(SearchTerm)) return;

            SearchResults = ExamineManager.Instance.SearchProviderCollection["DemoSearcher"].Search(SearchTerm,true).ToList();

            SearchResultListing.DataSource = SearchResults;
            SearchResultListing.DataBind(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T13:06:29.920

如果要排除节点类型，只需将其放在 IndexSet 标记之间

```
<IndexSet ...>
  ...
  <ExcludeNodeTypes>
    <add Name="NameNodeType" />
  </ExcludeNodeTypes>
</IndexSet> 
```

[有关codeplex 检查](http://examine.codeplex.com/wikipage?title=UmbracoExamine)的更多信息

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T16:53:32.543

In your DocumentType add a field "includeInSearchIndex" of type true/false. Then add this field in your Examine index configuration

```
<IndexUserFields>
  <add Name="includeInSearchIndex"/>
</IndexUserFields> 
```

Then use a create a custom query to search for everything where this field is not checked.

```
var Searcher = ExamineManager.Instance.SearchProviderCollection["WebsiteSearcher"];            
var query = searchCriteria.Field("includeInSearchIndex", "0").
    Or().Field("includeInSearchIndex", "").Compile();
var searchResults = Searcher.Search(query); 
```

Check out [this page](https://umbraco.com/blog/examining-examine/) for more info about the Examine index and the search queries

# php - 删除单个字符串中的字符

> ID：14908779
> 
> 赞同：-2
> 
> 时间：2013-02-16T09:21:59.217
> 
> 标签：php, html, xampp, notepad++

例子：

```
 $name1="abcdefg";
  $name2="csawea";

Output: bdfgsw 
```

我想制作一个 php 代码，删除所有相同的字符及其在 Input1 和 Input2 中的重复，我在 PHP 中是新的，所以我对代码有点困惑，我知道 strrpos，substr func 但我需要看到一个成品为了理解流程。天呐！！

其他例如：

```
$name1= "aaabb";
$name2= "bccc";

Output: aaaccc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T09:24:45.247

使用`preg_match();`或`str_replace();`。

# php - 如何使用 php 将现有文件添加到谷歌驱动器？

> ID：14908784
> 
> 赞同：1
> 
> 时间：2013-02-16T09:22:51.860
> 
> 标签：php, file-upload, google-drive-api

我已经使用以下代码在谷歌驱动器上添加了一个新文件。

```
<?php

// inclusione delle librerie del client
require_once 'google-api-php-client/src/Google_Client.php';
require_once 'google-api-php-client/src/contrib/Google_DriveService.php';

// istanza dell'oggetto di classe relativo al client
$drive = new Google_Client();

// credenziali per l'autenticazione
$drive->setClientId('id');
$drive->setClientSecret('secret');
$drive->setRedirectUri('urn:ietf:wg:oauth:2.0:oob');
$drive->setScopes(array('https://www.googleapis.com/auth/drive'));

// istanza dell'oggetto di classe relativo al servizio
$gdrive = new Google_DriveService($drive);

// salvataggio del token in una variabile
$_GET['code']= 'code';

// memorizzazione del token in un file
file_put_contents('token.json', $drive->authenticate());

// lettura delle informazioni contenute nel file
$drive->setAccessToken(file_get_contents('token.json'));

// istanza dell'oggetto di classe relativo al file per i test
$doc = new Google_DriveFile();

// intestazioni per il file di test
$doc->setTitle('Test Progetto Drive');
$doc->setDescription('Documento di prova');
$doc->setMimeType('text/plain');

// lettura del contenuto del file e restituzione sotto forma di stringa
$content = file_get_contents('progettodrive.txt');

// generazione del file per il test
$output = $gdrive->files->insert($doc, array(
'data' => $content,
'mimeType' => 'text/plain',
));

// stampa del risultato
print_r($output);

?> 
```

如果我想添加现有文件，我应该改变什么？对于 ecample，我想添加一个文件夹中已有的 pdf，我必须做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T03:31:23.890

我认为您想要的是将文件移动到文件夹中。在这种情况下，您可以使用[drive.parents.insert](https://developers.google.com/drive/v2/reference/parents/insert)方法。请参阅该页面上的 PHP 示例以获取完整示例，但您的 API 调用将类似于：

```
$service->parents->insert($fileId, $newParent); 
```

# php - 在 PHP 中克隆包含对象的 SplHeap

> ID：14908786
> 
> 赞同：1
> 
> 时间：2013-02-16T09:22:54.317
> 
> 标签：php, clone, spl

我想知道如何克隆一个包含对象的扩展类 SplHeap。例如，如果 FooHeap 扩展了 SplHeap，那么 FooHeap 是否可以有一个 __clone 方法并克隆它的对象元素？

```
class FooHeap extends SplHeap{
    public function compare($value1, $value2){.... }

    public function __clone(){

        // how do I access its elements to clone?
    }
} 
```

或者，如果我必须创建一个新的 FooHeap 对象并重新插入对象元素的克隆，有没有办法（例如从上到下，或从下到上）我应该重新插入克隆的元素以确保优化性能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T11:13:51.093

SplHeap 的本质是它自动对所有插入的值（如对象）进行排序，并在对其进行迭代时，从堆中删除每个值。

克隆堆时，插入的值也会被复制，但对象不会被克隆，而是按预期复制为引用。

通常的方法是遍历存储的数据并克隆找到的每个对象。但是因为迭代会删除节点，所以您必须在某处收集它们并重新插入。

没有选择的顺序，因为你所能做的就是“得到下一个”。

如果您确实担心性能，请测量！

我发现这段代码正在工作：

```
class MyHeap extends SplHeap
{

    public function compare($a, $b)
    {
        return (strcmp(get_class($a), get_class($b)));
    }

    public function __clone()
    {
        echo "Im cloning in ";
        foreach ($this as $obj) {
            $clones[] = clone($obj);
        }
        foreach ($clones as $obj) {
            $this->insert($obj);
        }
        var_dump($this);
    }
}

$heap = new MyHeap();

$obj1 = new stdClass();
$heap->insert($obj1);
$obj2 = new stdClass();
$heap->insert($obj2);

var_dump($heap);

$clone = clone($heap);

var_dump($clone);
foreach ($clone as $insert) {
    var_dump($insert);
}
foreach ($heap as $insert) {
    var_dump($insert);
} 
```

输出：

```
class MyHeap#1 (0) {
}
Im cloning in class MyHeap#4 (0) {
}
class MyHeap#4 (0) {
}
class stdClass#6 (0) {
}
class stdClass#7 (0) {
}
class stdClass#2 (0) {
}
class stdClass#3 (0) {
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T09:52:10.820

通过定义函数 __clone，您可以指定要为克隆对象更改哪些变量。在下一个示例中，我将 $cloned 设置为 true。原来的对象有`$clone = false`，克隆的有`$cloned = true`。因此 $data 保持不变。

```
<?php

class FooHeap extends SplHeap {
    public $data = "asd"  ;
    private $cloned = false ;

    public function __clone(){
          $this->cloned = true ;
        $this->rewind() ; //Just rewind iterator back to start, if you need
    }

    public function compare(){

    }
}

$original = new FooHeap() ;
$original->insert("some stuff") ;
$original->insert(100) ;

$clone = clone $original  ; //Data nodes are cloned from original object

$data = array() ;
$length = $clone->count() ;

for ($i = 0 ; $i < $length ; $i++){
    $data[] = $clone->current() ; //Access current data node and store it in data
    $clone->next() ;                // Move to the next data node
}

var_dump($data) ; //Check your data array

?> 
```

# ruby - MiniMagick 影响在调整代码大小之前出现的 Amazon S3 文件

> ID：14908787
> 
> 赞同：0
> 
> 时间：2013-02-16T09:23:09.397
> 
> 标签：ruby, sinatra, rmagick, minimagick, grape

我正在尝试上传来自帖子的全尺寸图像，然后对其进行缩略图并将缩略图放在 S3 上。但是，我遇到了一个奇怪的问题，即我的调整大小代码似乎正在影响完整大小的图像，即使 S3 应该在发生任何调整大小之前存储它。这是说明它的代码片段...

```
AWS::S3::S3Object.store(fullPath, open(params[:photo][:tempfile]), BS.config[:service][:aws][:bucket], :access => :public_read)

  thumbnail = MiniMagick::Image.open(params[:photo][:tempfile].path)
  thumbnail.combine_options do |c|
    c.resize('200x200^')
    c.gravity('center')
    c.crop('200x200+0+0')
  end

  AWS::S3::S3Object.store(thumbnailPath, thumbnail.to_blob, BS.config[:service][:aws][:bucket], :access => :public_read) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T23:02:28.817

即使您在调整大小之前调用`store`，也不能保证调整大小的代码不会在存储代码完成之前开始，并且由于涉及网络延迟并且[S3Object](http://amazon.rubyforge.org/doc/classes/AWS/S3/S3Object.html#M000044)的文档特别指出较大的文件（其中图像文件可以肯定会被分类）将被分块发送，很可能您正在修改尚未发送的文件。

不管是什么原因，简单的答案是制作文件的副本并调整其大小。

# python - 我的例外有什么问题？

> ID：14908789
> 
> 赞同：34
> 
> 时间：2013-02-16T09:23:13.923
> 
> 标签：python, exception-handling, syntax-error, except

我的除了有一个 SyntaxError：

```
try:
    opts, args = getopt.getopt(sys.argv[1:], 'P:D:H:d:u:p:nvhmJi:c:Ml:TB:',
            ['host=', 'port=', 'directory=', 'user=', 'password=',
             'daemon=', 'noauth', 'help', 'verbose', 'mysql', 
             'icounter=', 'config=', 'nolock', 'nomime', 'loglevel', 'noiter',
             'baseurl='])
except getopt.GetoptError, e:
    print usage
    print '>>>> ERROR: %s' % str(e)
    sys.exit(2) 
```

我得到错误：

```
File "main.py", line 199

except getopt.GetoptError, e:

SyntaxError: invalid syntax 
```

有人知道吗？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-02-16T09:54:12.913

您使用 python3 并且在 python3[中 raise 语法不再接受逗号分隔的 arguments](http://docs.pythonsprints.com/python3_porting/py-porting.html)。

改用`as`：

```
except getopt.GetoptError as e: 
```

这种形式也向后兼容 2.6 和 2.7。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-16T09:30:58.633

您的语法对于捕获异常无效

你应该写`except getopt.GetoptError as e:` 而不是`except getopt.GetoptError, e:`

# database - 美德玛特如何检测属于产品的图像

> ID：14908793
> 
> 赞同：0
> 
> 时间：2013-02-16T09:23:43.180
> 
> 标签：database, image, joomla, virtuemart

我在产品卡中添加了一些图片。之后，只有表 #__virtuemart_medias 被更改。所以我认为已经添加了绑定产品及其图像所需的所有信息。对？但是我看不到它，因为没有“product_id”之类的字段或类似的字段。我只看到字段'vendor_id'并且：

```
virtuemart_media_id (AUTO_INCREMENT)
file_title
file_description
file_meta
file_mimetype
file_type
file_url
file_url_thumb
file_is_product_image
file_is_downloadable
file_is_forSale
file_params
shared
published
created_on
created_by
modified_on
modified_by
locked_on
locked_by 
```

这对我来说没有意义。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-25T13:10:53.423

对于 Virtuemart 2.0.10

经过长时间的搜索并且没有解决方案，我得到了这个修复，所以我想出了我自己的，但无论如何都很粗糙。您可以通过在第 74 行附近的 components/com_virtuemart/views/invoice/tmpl/invoice_items.php 中创建一个新标签并添加此代码来执行此操作。

```
<?php
         if (!empty($item->product_quantity)) {

             $db = JFactory::getDBO();
             $qs = "SELECT file_url_thumb FROM #__virtuemart_medias WHERE virtuemart_media_id = (SELECT virtuemart_media_id FROM #__virtuemart_product_medias WHERE virtuemart_product_id =".$item->virtuemart_product_id.")"; //print_r($qs);
  $db->setQuery($qs);
  $item2 = $db->loadAssocList();
         foreach($item2 as $file_thumb){
            //echo $file_thumb['file_url_thumb'];
             ?>
             <img src="<?php  echo JURI::root () . $file_thumb['file_url_thumb'] ?>" />
             <?php
             }
          }

        ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T04:50:35.367

您问题中的第一个信息是不够的。

您使用的是哪个版本的虚拟机？

如果您使用的是 VM2.0 或更高版本，那么您可以`jos_virtuemart_product_medias` 在此表中找到一个表名 VM 保留产品 ID 和媒体 ID。您将从该表中获得分配给产品的所有图像。

希望这可以帮助你..

# android - Opencv SDK for Android 中的 opencv "C" 方法

> ID：14908794
> 
> 赞同：0
> 
> 时间：2013-02-16T09:23:43.220
> 
> 标签：android, c++, c, opencv, image-processing

我已经下载了用于 Android 开发的 opencv2.4.2 Android SDK。我需要将一些 Opencv“C”代码转换为 android-opencv。但我可以在 android-opencv 中找到任何“C”函数。我只能在 Android opencv 中看到“CPP”功能。

例如，`"detectmultiscale"`图书馆有没有，但我找不到`"CvHaardetectobjects"`. 此外，我找不到任何以`"Cv"`.

当我使用“C”函数时，如果我在 Android-opencv 中也有相同的函数会很好。在android opencv中是否有可能获得或只有我们有CPP方法。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T11:01:52.260

好的，如果您已经为 Android 安装了 OpenCV，那么您有 Java 类和方法可用于您的目的；如果你真的想使用 C++ 对象，你必须去在 NDK 中开发......

但是在您的情况下，确实 `CvHaardetectobjects`在 OpenCv 上没有 Java for android；但在这种情况下，您可以将 HaarCascade 加载到 a`CascadeClassifier`中，然后您可以使用它`detectMultiScale`来执行基于 HaarCascade 的检测。

你得到相同的结果`CvHaardetectobjects`。

请看下面的代码：

```
/////////////Load the HaarCascade file into the clsssifier 
try {
        InputStream is3 = getResources().openRawResource(R.raw.haarcascade_mcs_mouth);
        File cascadeDir = getDir("cascade", Context.MODE_PRIVATE);
        File mCascadeFile = new File(cascadeDir, "haarcascade_mcs_mouth.xml");
        FileOutputStream os3 = new FileOutputStream(mCascadeFile);

        byte[] buffer = new byte[4096];
        int bytesRead;
        Log.e("","Non c'è problema PRIMA della lettura del file");
        while ((bytesRead = is3.read(buffer)) != -1) {
        os3.write(buffer, 0, bytesRead);
        }
        is3.close();
        os3.close();
        Log.e("","Non c'è problema con la lettura del file");
        mJavaDetector = new CascadeClassifier(mCascadeFile.getAbsolutePath());
        if (mJavaDetector.empty()) {
        Log.e(TAG, "Failed to load cascade classifier");
        mJavaDetector = null;
        } else
        Log.e(TAG, "Loaded cascade classifier from " + mCascadeFile.getAbsolutePath());

        } catch (IOException e) {
        e.printStackTrace();
        Log.e(TAG, "Failed to load cascade. Exception thrown: " + e);
        }
    //////Call detectMultiScale with the Detector that contains the cascade     
        mJavaDetector.detectMultiScale(mat,MapofRect,1.15,4,0,new Size(25,15),new Size(face.width(),face.height()/2)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T12:15:33.133

OpenCV for Android 是基于 C++ 函数的，所以你会更好地找到 C++/Python <---> Android/Java 之间的关系。

您还可以[在此处浏览 Android/Java 功能。](http://docs.opencv.org/java/)

此外，有些东西可能已被弃用，而 CvHaardetectobjects 看起来就是其中之一。它似乎已被[C++: CascadeClassifier::detectMultiScale](http://docs.opencv.org/modules/objdetect/doc/cascade_classification.html#cascadeclassifier-detectmultiscale)或 [Java: CascadeClassifier.detectMultiScale 取代](http://docs.opencv.org/java/org/opencv/objdetect/CascadeClassifier.html)。

# ios - 使用来自 xib 的视图创建自定义类的实例

> ID：14908805
> 
> 赞同：0
> 
> 时间：2013-02-16T09:24:50.520
> 
> 标签：ios, objective-c, cocoa-touch, xib

我有一些自定义视图，由于各种原因，实际上只能使用笔尖进行设置。现在我想初始化这些笔尖，或者从这些笔尖创建视图（对象）。使用下面的代码这样做是可行的，但我不知道在生成这些 init 方法时会调用哪些方法。我不得不使用 drawRect 方法来做各种设置工作。

```
NSArray *bundleL = [[NSBundle mainBundle] loadNibNamed:@"nibName" owner:self options:nil];
                    for (id object in bundleL) {
                        if ([object isKindOfClass:[MyClass class]]){
                            myObject = (MyClass *)object;
                        }
                    } 
```

之间有什么区别`myObject = (MyClass *)object;`，哪个“有效”，而不是`myObject = [myClass alloc]initWithSomeMethod];`到目前为止对我不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T09:28:28.133

`[[MyClass alloc] init]`返回该类的一个新实例：一个不同于 XIB 文件中的对象。`myObject = object;`只需执行简单的指针分配 -`myObject`并将`object`指向内存中的相同对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T02:44:24.040

做更多的调查，我认为做我想做的事情的正确方法如下：

```
CustomView *aview = [[[NSBundle mainBundle] loadNibNamed:@"CustomXib" owner:self options:nil]objectAtIndex:0];
[self.view addSubview:aview]; 
```

# android - 在哪里可以找到软键图标？

> ID：14908806
> 
> 赞同：0
> 
> 时间：2013-02-16T09:25:06.183
> 
> 标签：android, icons

我想使用软键图标，如返回键（返回上一屏幕）、主页键和显示最近的应用程序键向用户发送一些消息（他们往往不太了解使用 Android）。有人可以告诉我在哪里可以找到这些图标。我正在使用安卓冰淇淋三明治。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T09:30:07.563

在 Android-sdks 提供的源文件安装 API 版本，在那里你可以找到系统资源。您也可以通过 android.R.drawable.ic_... 在您的应用程序中引用它们，但不建议这样做。

# android - 如何找到地理点之间的距离？

> ID：14908807
> 
> 赞同：2
> 
> 时间：2013-02-16T09:25:43.833
> 
> 标签：android, geopoints, overlayitem

下午好。我有以下代码

```
 ParseQuery query = new ParseQuery("MyOb");
    query.findInBackground(new FindCallback() {
       public void done(List<ParseObject> myOb, ParseException e) {
         if (e == null) { 
            for ( i = 0; i < myOb.size(); i++) {

            geo1Dub = myOb.get(i).getParseGeoPoint("location").getLatitude();
                geo2Dub = myOb.get(i).getParseGeoPoint("location").getLongitude();
                geo1Int = (int) (geo1Dub*1E6);
            geo2Int = (int) (geo2Dub*1E6);
            pointGet = new GeoPoint(geo1Int, geo2Int);           

                    OverlayItem overlayitem = new OverlayItem(pointGet, title, title);               
            itemizedoverlay.addOverlay(overlayitem);                                 

                  } 

            mapOverlays.add(itemizedoverlay);
            mapView.postInvalidate();
          } else {

         }
       }
     }); 
```

从该站点，我正在获取点并将它们显示在地图上。请告诉我如何使用

> distanceBetween(double startLatitude, double startLongitude, double endLatitude, double endLongitude, float[] 结果)

向我表明这一点。我的立场将是关键

```
 point = new GeoPoint(geoLat.intValue(), geoLng.intValue()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T09:37:19.533

**两个地理点之间的距离：-**

```
public static double distFrom(double lat1, double lng1, double lat2, double lng2) {
            Double EARTH_RADIUS = 6371.00; 
            double earthRadius = EARTH_RADIUS;
            double dLat = Math.toRadians(lat2-lat1);
            double dLng = Math.toRadians(lng2-lng1);

            double a = Math.sin(dLat/2) * Math.sin(dLat/2) +
                    Math.cos(Math.toRadians(lat1)) * Math.cos(Math.toRadians(lat2)) *
                    Math.sin(dLng/2) * Math.sin(dLng/2);
            double c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
            double dist = earthRadius * c;
            return new Float(dist).floatValue();
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T09:33:45.410

从中创建`Location`对象`GeoPoints`并且您有`distanceTO()`方法。

[http://developer.android.com/reference/android/location/Location.html](http://developer.android.com/reference/android/location/Location.html)

```
float distance[] = 0.0f;
double lat = Double.valueOf(point.getLatitudeE6()/1E6);
double lat = Double.valueOf(point.getLongitudeE6()/1E6);
Location.distanceBetween(geo1Dub, geo2Dub, lat, lng, distance); 
```

您将以米为单位的距离可变`distance[0]`

# ruby-on-rails-3 - 范围 DESC 的排序结果

> ID：14908810
> 
> 赞同：0
> 
> 时间：2013-02-16T09:26:36.557
> 
> 标签：ruby-on-rails-3, scope

我的帖子模型中有这个范围

```
scope :tynewydd_posts, :include => :department, :conditions => {"departments.name" => "Ty Newydd"} 
```

我想按照创建的顺序对返回的结果进行排序，所以最新的帖子优先

我试过

```
scope :tynewydd_posts, :include => :department, :conditions => {"departments.name" => "Ty Newydd"}.order("posts.created_at DESC") 
```

但我得到未定义的方法顺序：hash，所以我想我不能在这里使用这个方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T09:46:34.230

试试这个方法：

```
scope :tynewydd_posts, 
      :include => :department, 
      :conditions => {"departments.name" => "Ty Newydd"}, 
      :order => "posts.created_at DESC" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T10:02:10.630

`order`是传递给范围的可能选项，如下所示：

`scope :tynewydd_posts, :include => :department, :conditions => {"departments.name" => "Ty Newydd"}, :order => "posts.created_at DESC"`

或者更好的是，正确的 Rails 3 语法，例如：

`scope :tynewrdd_posts, includes(:department).where('departments.name' => 'Ty Newydd').order('posts.created_at DESC')`

# iphone - 从 Titanium 中的 Amazon S3 存储桶下载文件

> ID：14908818
> 
> 赞同：0
> 
> 时间：2013-02-16T09:27:57.900
> 
> 标签：iphone, ios, amazon-s3, titanium, titanium-mobile

我想知道使用 Appcelerator Titanium 从 Amazon S3 Bucket 下载文件对象的方法。

谁能帮我这个

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:50:30.617

```
 var downloadingFileUrl = "Url of the file that need to be downloaded"

//File path where downloaded file will be saved
var fileSavingPath = Titanium.Filesystem.getFile(Titanium.Filesystem.applicationDataDirectory,"file_Path");

 //Define the http client
 var myHttpClient = Ti.Network.createHTTPClient();

//On success of downloading
myHttpClient.onload = function(){

 //Write the file to the desired path
fileSavingPath.write(httpClient.responseData);
};

//Open the url to download
myHttpClient.open("GET",  downloadingFileUrl);

//Send request
 myHttpClient.send(null); 
```

# android - android NumberPicker 样式，如 Eclipse

> ID：14908820
> 
> 赞同：1
> 
> 时间：2013-02-16T09:28:15.970
> 
> 标签：android, numberpicker

我在一个 xml 文件中有两个 NumberPickers，它们在应用程序中以普通方式显示。当我在 Eclipse 中更改为图形视图时，它们会以漂亮的边框背景显示。我怎样才能在我的应用程序中得到这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T09:50:58.393

我不确定这是否是您的意思，但我认为此视图取决于设备上安装的 Android 版本。即，Android 2.0 设备以与 4.0 设备上的其他样式显示数字选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-14T00:13:50.900

这就是你需要的……

**[SimonVT/android-numberpicker](https://github.com/SimonVT/android-numberpicker)**

> 这是 Android 4.2 NumberPicker 的向后移植。

因此，您可以获得 4.2 主题的较低 API 的 android 版本。

设置非常简单，请尝试库包中的示例项目。

# node.js - 发出包含 JSON 正文的 POST 请求时，request.body 为空

> ID：14908823
> 
> 赞同：3
> 
> 时间：2013-02-16T09:28:40.143
> 
> 标签：node.js, mongodb, express

我在这个问题上挣扎了几个小时，我觉得我被困住了。我正在做 NodeJS、ExpressJS 和 MongoDB 的教程。我在 ExpressJS 上构建了一个简单的 API。

发出包含 JSON 正文的 cURL POST 请求时，req.body 为空，因此我看到一个错误。

特此提供一些来源/详细信息：

卷曲请求：

```
curl -i http://localhost:3000/wines -X POST -H "Content-Type: application/json" -d "{'name': 'New Wine', 'year': '2009'}" 
```

路线：

```
app.post('/wines', wines.addWine); 
```

API方法：

```
exports.addWine = function (req, res) {
console.log('Req body' + req.body);
var wine = req.body;
console.log('Adding wine: ' + JSON.stringify(wine));

db.collection('wines', function (err, collection) {
    collection.insert(wine, {safe:true}, function (err, result) {
        if (err) {
            res.send({'error':'An error has occurred'});
        } else {
            console.log('Success: ' + JSON.stringify(result[0]));
            res.send(result[0]);
        }
    });
});
} 
```

抛出以下错误：

```
Listening on port 3000...
Connected to 'winedb' database
Req bodyundefined
Adding wine: undefined
TypeError: Cannot read property '_id' of undefined
    at insertAll (/home/ebsk/Documents/Dev/Node/nodecellar/node_modules/mongodb            /lib/mongodb/collection.js:291:39)
    at Collection.insert (/home/ebsk/Documents/Dev/Node/nodecellar/node_modules/mongodb    /lib/mongodb/collection.js:92:3)
    at exports.addWine (/home/ebsk/Documents/Dev/Node/nodecellar/routes/wines.js:56:20) 
```

期待收到你的消息。在此先感谢您的任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T23:36:37.977

如果您在 express 中遇到请求正文的问题，您首先应该检查的是应用程序是否配置为使用`bodyParser`，即：

```
app.use(express.bodyParser()); 
```

在这种特殊情况下，您可以检查您的实现是否与[示例](https://github.com/ccoenraets/nodecellar/blob/master/server.js)匹配。

# java - Java IO - 文件夹创建错误

> ID：14908827
> 
> 赞同：0
> 
> 时间：2013-02-16T09:29:07.953
> 
> 标签：java

我无法使用以下代码创建文件夹。

```
import java.io.File;

public class Fileupload
{
public static void main(String[] args) 
    {
        File f = new File("C:\\BOS\\BOS-5.8-Tomcat-6.0.35\\webapps\\bonita\\ECR-DZ-00013\\Ranjeet\\");
        if (f.exists())
        {
            System.out.println("Already Present");
        }
        else
        {
            f.mkdir();
            System.out.println("Created");
        }
    }
 } 
```

如果我从路径中删除我的名字“Ranjeet”，那么它就会被创建，否则文件夹不是由相同的代码创建的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-16T09:31:28.027

我们知道的不够多，无法*确定*这是答案，但是...

[`mkdir`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#mkdir%28%29)依赖于已经存在的父目录。因此，除非已经存在，否则它将无法创建`Ranjeet`目录。`ECR-DZ-00013`

但是，您可以使用[`mkdirs`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#mkdirs%28%29)它来根据需要创建所有中间目录：

> 创建由此抽象路径名命名的目录，包括任何必要但不存在的父目录。请注意，如果此操作失败，它可能已成功创建一些必要的父目录。

# php - PDO 插入和执行

> ID：14908832
> 
> 赞同：0
> 
> 时间：2013-02-16T09:29:22.483
> 
> 标签：php, mysql, pdo

作为序言，我对 mysql 的了解非常有限，因此我决定尝试使用 PDO，因为我听说它使用起来更安全。话虽如此，如果您在尝试帮助我时发现任何注射责任，请告诉我！无论如何，我在如何处理 PDO 查询的输出以及一般执行时遇到问题......

我尝试做的第一件事是获取表单数据，然后搜索数据库以查看是否有其他人使用相同的用户名或相同的电子邮件：

```
if(isset($_POST['name']) && !empty($_POST['name']) AND isset($_POST['password']) && !empty($_POST['password']) AND $_POST['password'] == $_POST['password2'] AND isset($_POST['email']) && !empty($_POST['email']) AND isset($_POST['year']) && !empty($_POST['year']) AND isset($_POST['termsandconditions']) && !empty($_POST['termsandconditions'])){
        $name = $_POST['name'];
            $password = $_POST['password'];
        $email = $_POST['email'];
        foreach ($_POST['year'] as $year);
        $termsandconditions = $_POST['termsandconditions'];

        $idqry = $sql->prepare("SELECT id FROM users WHERE username = :idcheck");
        $idqry->bindParam(':idcheck', $name, PDO::PARAM_STR,20);
        $idqry->execute();

        $emailqry = $sql->prepare("SELECT id FROM users WHERE email = :idcheck");
        $emailqry->bindParam(':emailcheck', $email, PDO::PARAM_STR, 40);
        $emailqry->execute(); 
```

稍后，我尝试使用 PDO 查询检查重复的用户名/电子邮件并创建不同的条件：

```
if(!eregi("^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.(edu)$", $email)){
        // Return Error - Invalid Email
        $msg = 'The email you have entered is invalid, please try again.<br />*NOTE: You must use a .edu email to be able to register!';
    }elseif($idqry != FALSE){
        $msg = "That username has already been used, please try another one.";
    }elseif($emailqry != FALSE){
        $msg = 'That email has already been used, <a class=statusmsg href="../recovery/">need to recover your password?</a>.';
    }else{
        $msg = 'Your account has been made, <br /> please verify it by clicking the activation link that has been sent to your email.';
        $hash = md5(rand(0,1000));
        $hashedpass = password_hash($password, PASSWORD_BCRYPT);

        $sqlinsert = $sql->prepare("INSERT INTO users (username, password, email, hash, year, termsandconditions) VALUES (:username, :password, :email, :hash, :year, :termsandconditions)");
        $sqlinsert->execute(array(
                            ':username' => $name,
                            ':password' => $hashedpass,
                            ':email' => $email,
                            ':hash' => $hash,
                            ':year' => $year,
                            ':termsandconditions' => $termsandconditions));
    }
} 
```

当我尝试对此进行测试时，我总是得到“该用户名已被使用，请尝试另一个”的 $msg 输出。（即使我输入了唯一的用户名）

你看有什么不对吗？另外，是否可以绑定参数数据库插入？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T13:39:46.853

我认为你想要做的是这个。

```
$idqry = $sql->prepare("SELECT id FROM users WHERE username = :idcheck");
$idqry->bindParam(':idcheck', $name, PDO::PARAM_STR,20);
$idqry->execute();
//This is how you get the number of rows returned
$rowCount = $idqry->rowCount();

if ($rowCount > 0){
echo 'user name taken';
}else{
echo 'user name available';
} 
```

我相信你可以解决剩下的:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T09:38:37.110

执行命令的返回值是 TRUE 或 FALSE 值，具体取决于查询是否成功，因此只要查询可以成功执行（这意味着表存在，选择有效，mysql 有效），那么它就会为真。（澄清：如果用户名不存在，则返回的结果是空集，但它仍然是结果，因此查询成功。）

您应该检查是否没有返回任何结果，因为这确实表明用户名不存在：

```
$idqry->execute();
$count = $idqry->rowCount();

if ($count != 0) {
    // ERROR
} 
```

如前所述，也可以使用 rowCount() 而不是像我最初使用的那样获取所有内容。即使您试图保证最多 1 个结果，这也比获取所有数据更有效。

# html - 使用绝对位置垂直居中对齐图像

> ID：14908835
> 
> 赞同：1
> 
> 时间：2013-02-16T09:29:56.360
> 
> 标签：html, css

我正在尝试创造一些东西

[像这样](http://jsfiddle.net/7x673/8/)

```
<div class="model-info">
<div class="mainholder">
  <div class="divImage centeredImageContainer" align="center"> 
  <a href="talent_view.aspx?uid=e7385d69-8659-4ab4-a55d-d693ca9ba816">
        <img  class='centeredImage' style='width:80px;' src="http://t0.gstatic.com/images?    q=tbn:ANd9GcRX9N8qSDD4OhL9XH0N8RTbf3bObBR5TrqKeyUFxi-ZpAKQxyVsrw" alt="Anne" title="Anne">
   </a>
 </div> 
```

CSS如下：

```
.centeredImageContainer
{
  position:relative;
 }
 .centeredImage
{position: absolute;
top: 0;
bottom: 0;
margin: auto;
left: 0;
right: 0;} 
```

但是当我尝试以绝对位置垂直居中图像时，它会扰乱所有设计，

[像这样](http://jsfiddle.net/7x673/6/)

图像是动态的，没有固定大小。

此外，当我更改 px 中的 .divimage 高度时，它接受但在 % 中时，它适用于 0px 高度。

如何将此图像设置为垂直居中。还是我错过了什么？

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T11:40:45.797

当图像没有固定大小时很困难。abbood 的另一种解决方案是将图像设置为 div 的背景图像并将背景位置设置为`center center`：

```
<div style="height: 600px">         
    <a href="#">
            <div style="text-align:center; height:100%; border-style:solid;  background: url(http://t0.gstatic.com/images?q=tbn:ANd9GcRX9N8qSDD4OhL9XH0N8RTbf3bObBR5TrqKeyUFxi-ZpAKQxyVsrw) no-repeat center center;">
            </div>
    </a>
</div> 
```

缺点是无法更改图像大小，除非使用 CSS3 属性`background-size`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T11:21:35.363

看我的[jsfiddle](http://jsfiddle.net/abbood/Kv87E/)

基本上我使用了这个技巧：

```
 <div class="outer"> 
  <div class="middle">
    <div class="inner">
      <!-- content to be vertically centered-->
    </div>
  </div>
 </div> 
```

和CSS：

```
.outer {
    display: table;
    position: static;
    height: 9.22em; /* the height you want to center according to */

}
.middle {
    display: table-cell;
    vertical-align: middle;
    position: static;
}
.inner {
    margin-left: auto;
    margin-right: auto;
} 
```

笔记：

*   应避免使用绝对定位.. b/c 它将元素从文档流中取出.. 这会导致意外结果，例如您的情况
*   在我的解决方案中，您必须知道要居中的高度..所以在我的情况下..我认为右表的高度约为 9.22em..所以我把它放了。

# regex - 使用 sed 匹配除正斜杠以外的非数字

> ID：14908836
> 
> 赞同：2
> 
> 时间：2013-02-16T09:29:58.233
> 
> 标签：regex, linux, unix, sed

我知道我可以使用以下方法匹配非数字：

sed 's/[^0-9]//g'

但是我如何匹配除正斜杠之外的非数字？

先感谢您。

〜克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T09:35:16.360

> 我如何匹配除正斜杠以外的非数字？

当我这样改写问题时，我发现更容易考虑这一点：

> 我如何匹配除数字和正斜杠之外的所有内容？

为此，只需将正斜杠添加到字符类：

```
sed 's/[^0-9/]//g' 
```

这就是说您要匹配除数字和正斜杠之外的所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T09:30:51.007

也许是这样：

```
sed 's/[^0-9/]|//g' 
```

# javascript - 加载音频缓冲区并使用音频标签播放它

> ID：14908838
> 
> 赞同：9
> 
> 时间：2013-02-16T09:30:09.313
> 
> 标签：javascript, html, html5-audio

我正在尝试从 URL 加载音频缓冲区，然后播放它。[我从这个HTML5 Rocks Tutorial](http://www.html5rocks.com/en/tutorials/webaudio/intro/)获得了大部分代码。

```
var request = new XMLHttpRequest();
request.open('GET', $(this).attr('data-url'), true);
request.responseType = 'arraybuffer';

request.onload = function() {
    console.log(request);
    context.decodeAudioData(request.response, function(buffer) {
        console.log(buffer);
        $('#play').click(function() {
              var source = context.createBufferSource();
              source.connect(context.destination);
              source.noteOn(0);
        }).removeAttr('disabled');
    }, function(err) { console.log(err); });
};
request.send(); 
```

但是，然后我按下`#play`按钮，没有任何反应。`source.noteOn(0)`被调用，我使用调试器检查了它。并且所有对象都已正确加载和创建，但我听不到任何声音。

此外，看起来，当我使用这种方法时，我需要重建一个具有所有控件的完整播放器。我想做的，为了节省工作并确保它更好地工作，就是把它`buffer`放入一个`<audio/>`，所以它可以在那里播放。

我知道`audio.src`可以将文件名放在那里，但我需要使用音频缓冲区。我试过了

```
audio.src = buffer;
audio.load() 
```

但这没有用。

那里有什么资料吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2019-11-13T07:35:20.290

为了回答真正的问题，而不是“不要使用音频元素”，我想提供另一种解决方案。我想向用户展示音频控件，因此我需要一个解决问题的方法。

实际上，您只需要将 转换`ArrayBuffer`为 a `Blob`，获取它的 URL 并将其映射到`<audio>`元素的`src`属性：

```
const blob = new Blob([arrayBuffer], { type: "audio/wav" });
const url = window.URL.createObjectURL(blob);
audioElement.src = url; 
```

请不要忘记相应地更改 mime 类型并且不要忘记调用

```
window.URL.revokeObjectURL(url); 
```

卸载页面/组件以进行垃圾收集时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T19:00:30.753

如果您只想播放音频文件，您可能希望使用`<audio>`标签为简单起见。（并且不限于 webkit 浏览器）。

在您的示例中，您没有设置缓冲区*源节点*的缓冲区：
如果您想保留整体结构，您可以简单地添加行`source.buffer = buffer`，例如：

```
context.decodeAudioData(request.response, function(buffer) {
    $('#play').click(function() {
          var source = context.createBufferSource();
          source.buffer = buffer;
          source.connect(context.destination);
          source.noteOn(0);
    }).removeAttr('disabled');
}, function(err) { console.log(err); }) 
```

（通过将音频解码与事件处理分开，您的代码的可读性将会提高）。

您的其他问题`audio.src`：
您应该设置`audio.src`为音频文件的*URL*。

# php - SQL 语法错误 - 查看手册

> ID：14908839
> 
> 赞同：0
> 
> 时间：2013-02-16T09:30:10.777
> 
> 标签：php, sql

```
 <?php     function createLead($CuFirst, $CuLast, $COBool, $COFirst, $COLast, $CuAddrs1,
    $CuAddrs2, $CuCity, $CuZip, $CuEmail, $CuDphone, $CuHphone, $CuCphone, $BuildYr, $HoAge, $NoWindows,
    $NoWindowQuote, $WindowType1, $WindowType2, $WindowType3, $WindowType4, $GlassType1, $GlassType2,
    $Doors1, $Doors2, $Doors3, $Doors4, $Issue1, $Issue2, $Issue3, $Issue4, $Issue5, $Issue6, $Issue6,
    $Issue7, $Event, $Staff, $DigiSign, $Comments) {
        $CreateLead = "INSERT INTO  'rbaevent'.'leadentry' ('CuLast','CuFirst','COBool','COFirst','COLast','CuAddrs1','CuAddrs2','City','Zip','Email',
'DPhone','HPhone','CPhone','Built','AgeWindows','NoWindows','NoWinQuote','Aluminium','Vinyl',
'Wood','Clad','Single','Double','Entry','Patio','French','None','Cost','Cold','Clean',
'Fogging','Hard','Rotting','Peeling','Secure','Event','selectname','DigiSign','Comments')
 VALUES ('$CuFirst', '$CuLast','$COBool', '$COFirst', '$COLast', '$CuAddrs1', '$CuAddrs2',
'$CuCity', '$CuZip', '$CuEmail','$CuDphone', '$CuHphone', '$CuCphone', '$BuildYr', '$HoAge',
'$NoWindows', '$NoWindowQuote','$WindowType1', '$WindowType2', '$WindowType3', '$WindowType4',
'$GlassType1', '$GlassType2','$Doors1', '$Doors2', '$Doors3', '$Doors4', '$Issue1', '$Issue2',
'$Issue3', '$Issue4', '$Issue5','$Issue6', '$Issue6', '$Issue7',  '$Event', '$Staff',
'$DigiSign' ,'$Comments')";
         return $CreateLead; } 
```

**这是错误消息：**

*您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在 ''leadentry'('CuLast', 'CuFirst', 'COBool', 'COFirst', 'COLast', 'CuAddrs1', 'CuA' at 1号线*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T09:34:52.960

在 SQL 查询中指向表时不能使用这些引号

```
INTO  'rbaevent'.'leadentry' ( 
```

应该

```
INTO  `rbaevent`.`leadentry` ( 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T09:39:50.557

将您的代码更改为：您使用了错误的 '' 您必须使用键盘上 TAB 按钮上方的 ``

```
 function createLead($CuFirst, $CuLast, $COBool, $COFirst, $COLast, $CuAddrs1,     $CuAddrs2, $CuCity, $CuZip, $CuEmail, $CuDphone, $CuHphone, $CuCphone, $BuildYr, $HoAge, $NoWindows, $NoWindowQuote, $WindowType1, $WindowType2, $WindowType3, $WindowType4, $GlassType1, $GlassType2, $Doors1, $Doors2, $Doors3, $Doors4, $Issue1, $Issue2, $Issue3, $Issue4, $Issue5, $Issue6, $Issue6, $Issue7, $Event, $Staff, $DigiSign, $Comments) {
     $CreateLead = "INSERT INTO  `rbaevent`.`leadentry` (
      `CuLast`,
      `CuFirst`,
      `COBool`,
      `COFirst`,
      `COLast`,
      `CuAddrs1`,
      `CuAddrs2`,
      `City`,
      `Zip`,
      `Email`,
      `DPhone`,
      `HPhone`,
      `CPhone`,
      `Built`,
      `AgeWindows`,
      `NoWindows`,
      `NoWinQuote`,
      `Aluminium`,
      `Vinyl`,
      `Wood`,
      `Clad`,
      `Single`,
      `Double`,
      `Entry`,
      `Patio`,
      `French`,
      `None`,
      `Cost`,
      `Cold`,
      `Clean`,
      `Fogging`,
      `Hard`,
      `Rotting`,
      `Peeling`,
      `Secure`, 
      `Event`, 
      `selectname`,
      `DigiSign`,
       `Comments`)
    VALUES ('$CuFirst', '$CuLast', '$COBool', '$COFirst', '$COLast', '$CuAddrs1', '$CuAddrs2', '$CuCity', '$CuZip', '$CuEmail', '$CuDphone', '$CuHphone', '$CuCphone', '$BuildYr', '$HoAge', '$NoWindows', '$NoWindowQuote', '$WindowType1', '$WindowType2', '$WindowType3', '$WindowType4', '$GlassType1', '$GlassType2', '$Doors1', '$Doors2', '$Doors3', '$Doors4', '$Issue1', '$Issue2', '$Issue3', '$Issue4', '$Issue5', '$Issue6', '$Issue6', '$Issue7',  '$Event', '$Staff', '$DigiSign' ,'$Comments')";
  return $CreateLead;
 } 
```

就是这样！

# qr-code - 计算二维码最大数据容量的公式？

> ID：14908842
> 
> 赞同：4
> 
> 时间：2013-02-16T09:30:36.410
> 
> 标签：qr-code

我在网上的几个地方（例如[这里](https://developers.google.com/chart/infographics/docs/qr_codes)和[这里](http://blog.qr4.nl/page/QR-Code-Data-Capacity.aspx)和[这里](http://www.qrcode.com/en/vertable1.html)）看到了一个表格，显示了每种类型的 QR 码（1 到 40）可以根据字符类型和 EC 级别显示的字符数。

我无法找到或解决的是用于生成此表的公式？

即 QR_Type & EC_Level & Character_Type => 最大字符长度

在给定选定的 EC 级别并通过检测字符集和字符串长度的情况下，我想使用此公式计算出可用于显示输入字符串的最低 QR 类型。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T12:38:43.880

它没有公式。虽然它当然遵循一般趋势，您可以使用简单的线性函数进行近似，但由于几个方面的舍入，确切的截止值会有所不同 - 版本中的代码字数，交错块的数量，EC /数据块的数量. 如果你需要一个准确的答案，你需要一张桌子。

# php - Magento 管理员登录问题

> ID：14908854
> 
> 赞同：0
> 
> 时间：2013-02-16T09:31:30.233
> 
> 标签：php, magento, login

我刚刚在我的电脑上安装了 magento cms，但它无法让我登录。即使我已经检查了所有的登录凭据。所以有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T09:42:55.447

很简单。

它不能“存储”cookie。

用点创建一个虚拟主机。

或者如果很难通过 lo 127.0.0.1 或 127.0.1.1 访问它

理想情况下，将虚拟主机配置为运行 magento 是一种好方法。虚拟主机可以是：`mysite.local`指向`/var/www/magento`

希望有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T09:39:39.883

请检查您的 url 它不应该是 localhost 而不是使用 127.0.0.1。它可能有效

# c# - 将语言 (LTR/RTL) 机制添加到捆绑 MVC 4

> ID：14908855
> 
> 赞同：5
> 
> 时间：2013-02-16T09:31:51.257
> 
> 标签：c#, css, asp.net-mvc, bundle

**背景**

*   我正在构建一个多语言系统
*   我正在使用 MVC 4 捆绑功能
*   我有从右到左 (RTL)`Javascripts`和`Styles`从左到右 (LTR) 语言的不同文件

目前我处理这种情况如下：

**捆绑配置文件**

```
 //Styles for LTR 
 bundles.Add(new StyleBundle("~/Content/bootstarp").Include(
                "~/Content/bootstrap.css",
                "~/Content/CustomStyles.css"));

 // Styles for RTL
 bundles.Add(new StyleBundle("~/Content/bootstrapRTL").Include(
            "~/Content/bootstrap-rtl.css",
            "~/Content/CustomStyles.css"));

 //Scripts for LTR
 bundles.Add(new ScriptBundle("~/scripts/bootstrap").Include(
            "~/Scripts/bootstrap.js",
            "~/Scripts/CmsCommon.js"
            ));

 //Scripts for RTL
 bundles.Add(new ScriptBundle("~/scripts/bootstrapRTL").Include(
            "~/Scripts/bootstrap-rtl.js",
            "~/Scripts/CmsCommon.js"
            )); 
```

**视图中的实现：**

```
@if (this.Culture == "he-IL")
{
    @Styles.Render("~/Content/bootstrapRTL")
}
else
{
    @Styles.Render("~/Content/bootstrap")
} 
```

**问题：**

我想知道是否有更好的方法来实现它，我希望：

处理检测哪种文化的逻辑，并将正确的文件拉到包中（后面的代码）而不是在视图中。

所以在视图中我要做的就是调用一个文件。

如果我将逻辑留在视图中，则意味着我必须在每个视图中处理它。我想避免它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-23T09:50:08.890

您不需要使用开关和魔术字符串。您可以使用以下属性检查文化是否为 RTL：

```
Thread.CurrentThread.CurrentCulture.TextInfo.IsRightToLeft 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T10:12:37.477

尝试自定义 HTML 助手：

```
public static class CultureHelper
{
    public static IHtmlString RenderCulture(this HtmlHelper helper, string culture)
    {
        string path = GetPath(culture);
        return Styles.Render(path);
    }

    private static string GetPath(string culture)
    {
        switch (culture)
        {
            case "he-IL": return "~/Content/bootstarpRTL";
            default: return "~/Content/bootstarp";
        }
    }
} 
```

# list - 如何在 FreePascal 中生成 50 个随机数（0 到 100 之间）的列表

> ID：14908859
> 
> 赞同：0
> 
> 时间：2013-02-16T09:32:25.660
> 
> 标签：list, sequence, freepascal

有人可以帮我在 FreePascal 中生成 50 个随机数（0 到 100 之间）的列表吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T20:13:28.917

假设您想要一个包含 50 个整数的数组，您可以使用以下代码。首先它使用[`Randomize`](http://www.freepascal.org/docs-html/rtl/system/randomize.html)procedure初始化随机数生成器。然后它将数组从低索引迭代到高索引（相反，您也可以使用常量范围），并使用该函数`for I := 0 to 49 to`为该数组的每个元素生成一个 0 到 100 范围内的随机数。[`Random`](http://www.freepascal.org/docs-html/rtl/system/random.html)该[`Random`](http://www.freepascal.org/docs-html/rtl/system/random.html)函数返回一个大于或等于 0 且小于该函数唯一参数的随机数：

```
var
  I: Integer;
  IntArray: array[0..49] of Integer;
begin
  Randomize;
  for I := Low(IntArray) to High(IntArray) do
    IntArray[I] := Random(101);
  ...
end; 
```

# c++ - boost.asio boost::asio::ip::tcp::resolver::async_resolve 不起作用

> ID：14908860
> 
> 赞同：2
> 
> 时间：2013-02-16T09:32:26.683
> 
> 标签：c++, sockets, boost, boost-asio

我按照 Boost.Asio 教程实现了一个简单的 TCP 客户端，但我在第一步被阻止，`boost::asio::ip::tcp::resolver::async_resolve`不起作用，永远不会调用 ResolverHandler：

```
 void client::start()
    {
        socket_.reset(new boost::asio::ip::tcp::socket(io_service_));
        // Start an asynchronous resolve to translate the server and service names
        // into a list of endpoints.
        tcp::resolver::query query(server_address_, server_port_);
        resolver_.async_resolve(query,
            boost::bind(&client::handle_resolve, 
            shared_from_this(),
            boost::asio::placeholders::error,
            boost::asio::placeholders::iterator));
    } 
```

如上所示源代码，我创建了一个`io_service`, a `socket`, a`resolver`和一个解析器`query`对象，然后调用`resolver_.async_resolve()`方法，但是 ResolverHandler`client::handle_resolve`几乎从不被调用，有时在应用程序第一次启动时， ResolverHandler 可能会被调用一两次，但仅此而已。

我阅读了官方文档，但一无所获。有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T18:49:22.767

如果完成处理程序没有被调用——很可能你没有`io_service`正确运行：例如。它的`run`循环可能被其他一些没有返回的处理程序阻塞，或者它可能由于缺少工作等而退出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T14:36:19.847

这对我有用：

```
void SSLSocket::Connect(SSLSocket* psSLS, const string& serverPath, const string& port)
{
   boost::shared_ptr<boost::asio::io_service> IOServ(new boost::asio::io_service);
   // Create the resolver and query objects to resolve host name in serverPath to an ip address.
   IOService = IOServ; // IOService defined as a class member in the .h file.
   boost::asio::ip::tcp::resolver resolver(*IOService);
   boost::asio::ip::tcp::resolver::query query(serverPath, port);
   ...
} 
```

上面的代码使用了同步方法.vs。您的代码正在使用的异步方法。如果要继续异步执行，则将 io_service 对象和查询对象设为类变量。还要意识到 async_resolve 方法会立即返回而无需执行任何操作。在调用您的 handle_resolve 方法之后，地址会被异步解析。

# jquery - 如何在烧瓶中使用从 ajax 发布的数据？

> ID：14908864
> 
> 赞同：62
> 
> 时间：2013-02-16T09:32:47.060
> 
> 标签：jquery, python, ajax, flask

我无法从 jquery ajax 获取数据。

```
$('#clickme').click( function() {
    var data = save_input(); // data

    data['_sid'] = $survey_id;  // survey_id injected from flask
    data['_uip'] = $user_ip; // user_ip injected from flask, request.remote_addr

    $.ajax({
        type : "POST",
        url : "{{ url_for('mod.load_ajax') }}",
        data: JSON.stringify(data),
        contentType: 'application/json;charset=UTF-8',
        success: function(result) {
            console.log(result);
        }
    });

    console.log(data);
}); 
```

从代码来看，`data`是一个类似的javascript对象

```
{
    'foo' : 'foo',
    'bar' : 'bar',
    'fo_' : 42,
} 
```

我想在烧瓶中做的是：

```
@mod.route('/load_ajax', methods=["GET", "POST"])
def load_ajax():
    if request.method == "POST":
        # load _sid and _uip from posted JSON and save other data
        # but request.form is empty.
        # >>> request.form
        # ImmutableMultiDict([]) 
        return str(request.form) 
```

看，ajax 请求发出但没有数据提交。我`console.log(data)`使用 ajax，所以我可以看到我`data`在 jquery 的变量中确实有一些有意义的数据。但是 ajax 视图中的 request.form 是空的。我的数据在哪里提交？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-06-13T08:20:59.223

尝试

```
 $.ajax({
    type : "POST",
    url : "{{ url_for('mod.load_ajax') }}",
    data: JSON.stringify(data, null, '\t'),
    contentType: 'application/json;charset=UTF-8',
    success: function(result) {
        console.log(result);
    }
}); 
```

然后从服务器，您可以像这样引用数据中的变量：

```
request.json['foo'] 
```

由于内容类型被指定为`application/json`数据在`request.json`

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-16T09:49:32.837

根据您的示例，您没有发送键值对，而是将 JSON 字符串分配给 jQuery 数据选项。如评论中所述，您必须对 JSON 进行字符串化，创建一个带有键的对象（将用于从烧瓶中访问 JSON 字符串），然后将其分配给 jQuery 数据键。

```
 $.ajax({
            type : "POST",
            url : "{{ url_for('mod.load_ajax') }}",
            data: {json_str: JSON.stringify(data)},
            contentType: 'application/json;charset=UTF-8',
            success: function(result) {
                console.log(result);
            }
        });

    @mod.route('/load_ajax', methods=["GET", "POST"])
    def load_ajax():
        if request.method == "POST":
            # load _sid and _uip from posted JSON and save other data
            # but request.form is empty.
            # >>> request.form
            # ImmutableMultiDict([]) 
            return str(request.form['json_str']
     ) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-07-04T21:38:56.770

在烧瓶一侧，使用：

```
data = request.get_json() 
```

变量数据现在有您使用 ajax 发送的字典，您现在可以使用 python 操作它

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-17T03:12:57.583

您是否尝试过删除 contentType？您假设将数据发布到 Flask。

你能尝试添加假数据吗

数据：{“你好”：“世界”}在ajax里面？只是为了检查 hello world 是否到达 request.form

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-27T14:31:41.270

从 Ajax 获取数据（Flask）

html:

```
<input type="text" id="inputbox" autocomplete="off"> 
```

JS：

```
 $(document).ready(function(){
        $("#inputbox").on("input",function(e){
            inputbox = $("#inputbox").val();
            console.log(inputbox)
            $.ajax({
                method: "post",
                url: "/path",
                data: {inputbox},
                success:function(res){

                }
            })
        });
    }); 
```

.py：

```
search_value = request.form.get("text") 
```

# android - Android 应用 > Restlet + Objectify > Google App Engine = 不支持的媒体类型 (415) - 不支持的媒体类型

> ID：14908867
> 
> 赞同：1
> 
> 时间：2013-02-16T09:33:29.883
> 
> 标签：android, google-app-engine, restlet, objectify

-您好，我按照本教程进行操作，并通过从 Android 应用程序调用的 Restlet Web 服务（使用 Objectify）将数据存储在 Google App Engine 中：

**[http://www.tutos-android.com/webservice-rest-android-appengine-restlet-objectify](http://www.tutos-android.com/webservice-rest-android-appengine-restlet-objectify)**

本教程使用名为 "User" 的模型类：

*   用户.java
*   用户控制器.java
*   用户控制器接口.java

现在我想使用我自己的名为“Track”的模型类并构建我自己的应用程序。

所以我创建了一个新的 Android 项目，一个新的 Restlet Server 项目，并创建了一个新的 Google 引擎应用程序，只是为了保持整洁。

简而言之，除了我使用“Tracks”而不是“Users”之外，我的编码与本教程相同：

*   轨道.java
*   TrackController.java
*   TrackControllerInterface.java

当我通过 Android 应用调用 create 方法时，我得到一个： **“不支持的媒体类型 (415) - 不支持的媒体类型”**

**我的界面：**

```
public interface TrackControllerInterface {
    @Put
    void create(Track track);

    @Get
    Container getAllTracks();
} 
```

**我的 RestletDispatch ：**

```
public class RestletDispatch extends Application
{
  @Override
  public synchronized Restlet createInboundRoot()
  {
    final Router router = new Router(getContext());
    router.attach("/track", TrackController.class);
    return router;
  }
} 
```

**我的 Track 服务器端（我删除了除了名称之外的所有额外属性）：**

```
public class Track implements Serializable {

    private static final long serialVersionUID = 2028908999105872121L;

    @Id
    private Long id;
    private String name;

    public Track() {

    }

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
} 
```

**我的 TrackController 服务器端：**

```
import static com.restlet.pcn.vttracks.server.OfyService.ofy;

public class TrackController extends ServerResource implements
    TrackControllerInterface {

    public TrackController() {
    }

    @Override
    public void create(Track track) {
        Track tk = new Track();
        tk.setName(track.getName());
        ofy().put(tk);
    }

    @Override
    public Container getAllTracks() {
        Container content = null;
        List tracks = new ArrayList();

        Query<Track> qTracks = ofy().query(Track.class);

        for (Track track : qTracks){
            tracks.add(track);
        }
        content = new Container();
        content.setTrack_list(tracks);

        return content;
    }
} 
```

**Android App 中的调用：**

```
EditText name = (EditText) findViewById(R.id.track_create_name);
Track track = new Track();
track.setName(name.getText().toString());
final TrackController tc = new TrackController();
try {
    tc.create(track);
} catch (Exception e) { 
```

**在 Google App Engine 的日志中，我看到：**

93.0.180.137 - - [16/Feb/2013:00:46:07 -0800] “PUT **/rest/track** HTTP/1.1” 415 546 - “Restlet-Framework/2.0rc4” “vttracks-app-test2.appspot。 com" ms=1407 cpu_ms=1027 cpm_usd=0.000061 实例=00c61b117c40b5128fe48b35a014925f9d2f

我尝试在界面中使用 String 而不是 Track 并且它在没有 415 错误的情况下工作，因此 Track 类的定义/使用一定存在问题：

```
public interface TrackControllerInterface {
    @Put
    void create(String trackName);

    @Get
    Container getAllTracks();
} 
```

**- 当我从“用户”“重构”到“跟踪”时，我错过了什么？**

**- 我必须检查什么来纠正这些框架的“415 错误”？**

我寻找了关于 415 的其他问题，但找不到任何关于这个案例的指针。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:38:54.487

我想知道您在客户端和服务器端都使用了哪个扩展来序列化/反序列化您的 Track 对象... org.restlet.jackson... 我认为问题围绕着这个方面。

蒂埃里

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T19:18:54.173

好的，我发现了问题所在：服务器端的“Track”类的包和客户端的“Track”类的包不同，导致序列化问题。

当我重构时，我创建了新项目并重新组织了包......

感谢蒂埃里和科马的回答。

# javascript - 如何在 javaScript SpellChecker 中自定义现有字典？

> ID：14908868
> 
> 赞同：0
> 
> 时间：2013-02-16T09:33:34.223
> 
> 标签：javascript, jquery, asp.net

我第一次使用**Javascript Spllcheck**。我使用的是**ASP.Net 2008** ***( [http://www.javascriptspellcheck.com/](http://www.javascriptspellcheck.com/) )***，并且根据安装指南，我已将包括 ASPNetSpell.dll 在内的所需文件添加到“/bin /ASPNetSpell.dll" 。

```
here i've added only one dictionary "English (International).dic" and i've deleted all the contents of this file and added few own custom words like :
AB
ABCD
abcd
abc
Hello
World

finally while i am running my page (textarea : Hello AB ABCD abc abb abcd abd Worlb. This Example show....). 

here as per my dictionary correct words are : Hello,abc,abcd... but except Caps : AB & ABCD its showing all remaing words are wrong word. also its not showing any suggesstions for all those words. 
```

任何人都可以检查并让我知道我哪里出错了以及我必须遵循哪些步骤。（最后我必须与 CKEDITOR 4 集成。）

```
My Browser is : GChrome (Version 24.0.1312.57 m), FF (18.0.2)
My Operating System is: Win XP
A URL showing the error is: local only 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T04:56:10.840

字典文件**不可手动编辑**。

有***2 个选项可以将自定义单词添加到字典中***：

```
1\.  Add new words to "dictionaries/custom.txt" (file must contain one word per each line.)
2\.  Use the “Dictionary Encoder” to prepare a dictionary file.

    Bellow is the link to download dictionary encoder.

    http://aspnetspell.com/downloads/beta/encoder.zip 
```

我已经向编码器输入了一个**文本文件**，作为输出我得到了一个字典（**.dic**）文件。（根据“dictionaries/custom.txt”文件，我还在文本文件中每行添加了一个单词。）

# android - 如何使用两个 TextView 将 TextView 的文本放在一行的左侧？

> ID：14908877
> 
> 赞同：0
> 
> 时间：2013-02-16T09:34:49.890
> 
> 标签：android, android-linearlayout, textview, gravity, layout-gravity

我想使用 LinearLayout 将两个 TextViews 的文本放置在单行的左侧。一个 TextView 在左侧，另一个在右侧。整行文本将与垂直位于同一行。这是我的 XML：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="top|center"
    android:orientation="vertical"
    tools:context=".Butcegiris" >

    <ScrollView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical"
        tools:ignore="UselessParent" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_margin="5dp"
            android:background="@android:color/background_light"
            android:orientation="vertical" >

            <LinearLayout
                android:id="@+id/tableRow1"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal" >

                <TextView
                    android:id="@+id/textButtonBakici"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:text="@string/textBakici" />

                <LinearLayout
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="left"
                    android:layout_weight="1"
                    android:gravity="left"
                    android:orientation="horizontal" >

                <TextView
                    android:id="@+id/textButtonBakici2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="@string/textBakici" />
                </LinearLayout>

            </LinearLayout>

            <LinearLayout
                android:id="@+id/tableRow2"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal" >

                <TextView
                    android:id="@+id/textKrediAraba"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:text="@string/textKrediAraba" />

                 <LinearLayout
                     android:layout_width="wrap_content"
                     android:layout_height="wrap_content"
                     android:layout_gravity="left"
                     android:layout_weight="1"
                     android:gravity="left"
                     android:orientation="horizontal" >

                <TextView
                    android:id="@+id/textKrediAraba2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="@string/textKrediAraba" />
                </LinearLayout>
            </LinearLayout> 
```

及其观点；

![在此处输入图像描述](../Images/fd1633a2b4c26f51b84326ff14775326.png)

垂直，数字将在同一行。非常感谢您的帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T12:18:48.660

我认为你应该看看[TableLayout](http://developer.android.com/reference/android/widget/TableLayout.html)类。它应该看起来好多了。

当然，如果你认为会有很多项，可以考虑为每个字段使用具有恒定宽度的[listView 。](http://developer.android.com/guide/topics/ui/layout/listview.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T12:32:42.090

您的带有 layout_weight 的元素应该将 layout_width 设置为 match_parent：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="top|center"
    android:orientation="vertical"
    tools:context=".Butcegiris" >

    <ScrollView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical"
        tools:ignore="UselessParent" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_margin="5dp"
            android:background="@android:color/background_light"
            android:orientation="vertical" >

        <LinearLayout
            android:id="@+id/tableRow1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/textButtonBakici"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="@string/textBakici" />

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_gravity="left"
                android:layout_weight="1"
                android:gravity="left"
                android:orientation="horizontal" >

                <TextView
                    android:id="@+id/textButtonBakici2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="@string/textBakici" />
                </LinearLayout>        
            </LinearLayout>

            <LinearLayout
                android:id="@+id/tableRow2"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal" >

                <TextView
                    android:id="@+id/textKrediAraba"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:text="@string/textKrediAraba" />

                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:layout_gravity="left"
                        android:layout_weight="1"
                        android:gravity="left"
                        android:orientation="horizontal" >

                    <TextView
                        android:id="@+id/textKrediAraba2"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="@string/textKrediAraba" />
                </LinearLayout>
            </LinearLayout> 
```

# ruby-on-rails - Rails 3.2.12 中的重构链接

> ID：14908878
> 
> 赞同：3
> 
> 时间：2013-02-16T09:34:50.833
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

# 重构丑陋的 URL

我从一个工作链接到一个新的工作应用程序，但是为应用程序生成的 URL 感觉有点乱，我想知道是否有办法清理它。

有没有办法摆脱这个不那么漂亮的网址？：

```
http://localhost:3000/applications/new?application%5Bjob_id%5D=1 
```

对于这个更清洁的人？：

```
http://localhost:3000/applications/new 
```

提前致谢！

# 编码：

### 作业控制器：

```
def show
  @job = Job.find(params[:id])
end 
```

### 工作展示：

```
<%= link_to "New Application", new_application_path(:application => { :job_id => @job.id }) %> 
```

### 应用控制器

```
def new
  @application = Application.new(params[:application])
end 
```

### 新申请

```
<%= form_for @application do |f| %>

  <%= f.hidden_field :job_id, :value => @application.job_id %>

  <%= f.label :email %>:
  <%= f.text_field :email %>

  <br />

  <%= f.submit "Submit" %>

<% end %> 
```

# 编辑

（添加了 rake 路由和 routes.rb）

### 耙路线

```
 applications GET    /applications(.:format)          applications#index
                 POST   /applications(.:format)          applications#create
 new_application GET    /applications/new(.:format)      applications#new
edit_application GET    /applications/:id/edit(.:format) applications#edit
     application GET    /applications/:id(.:format)      applications#show
                 PUT    /applications/:id(.:format)      applications#update
                 DELETE /applications/:id(.:format)      applications#destroy
            jobs GET    /jobs(.:format)                  jobs#index
                 POST   /jobs(.:format)                  jobs#create
         new_job GET    /jobs/new(.:format)              jobs#new
        edit_job GET    /jobs/:id/edit(.:format)         jobs#edit
             job GET    /jobs/:id(.:format)              jobs#show
                 PUT    /jobs/:id(.:format)              jobs#update
                 DELETE /jobs/:id(.:format)              jobs#destroy 
```

### 路由.rb

```
resources :applications

resources :jobs 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T12:11:03.043

如果您不想使用`nested routes`（我建议使用嵌套路由）。但是有很多解决方案可以解决问题。为了避免`URL`(ie) `http://localhost:3000/applications/new?application%5Bjob_id%5D=1`to 中的参数`http://localhost:3000/applications/new`。您需要`form`在显示页面中使用而不是`link`. 您可以执行以下操作：

```
 <%= form_tag url_for(new_application_path) do %>
    <%= hidden_field_tag "application['job_id']", @job_id %> 
    <%= submit_tag "New application" %>
  <% end %> 
```

# layout - liferay多列布局上的struts2 portlet显示已损坏

> ID：14908881
> 
> 赞同：1
> 
> 时间：2013-02-16T09:35:09.313
> 
> 标签：layout, struts2, liferay, portlet

我有一个struts2 liferay portlet，它工作正常，直到它在一列布局页面中。在 view.jsp（portlet 的第一页）中，我有一个映射到 goToPrivilege 操作的 struts 表单

```
<s:form id="privilegeForm" action="goToPrivilege" namespace="/view"> 
```

在 struts.xml 我使用 goToPrivilege 重定向到 privilegeAction

```
<action name="goToPrivilege" class="defaultAdmin" method="goToPrivilege">
        <result type="redirectAction">
            <param name="actionName">privilegeAction</param>
            <param name="needAssessmentId">${needAssessmentId}</param>
        </result>
</action>
    <action name="privilegeAction" class="privilegeAction">
        <result>/html/needAssessmentAdmin/privilege.jsp</result>
        <result name="error">/html/needAssessmentAdmin/error.jsp</result>
    </action> 
```

结果是：用户重定向到 privilege.jsp 页面。它在单列布局中运行良好，但是当我将此 portlet 放在具有两列布局和用户提交表单的页面中时，privilege.jsp 的内容显示在 portlet 区域之外的页面底部： ![在此处输入图像描述](../Images/e9ef988360aa2445894dca149bed2122.png) 如何解决这个问题和我的portlet 就像一个 portlet 一样工作（在门户的任何地方使用）。

有关更多信息，我使用 liferay 5.2.3 Struts2 和 Spring

编辑：在 view.jsp 我没有什么特别的。它只是一种形式。在 privilege.jsp 我有一些不可见的 div（充当 jquery popUp），然后是一个带有 jquery Gird 的表加载它

```
 ...
<portlet:resourceURL var="privilegeurl" >
    <portlet:param name="struts.portlet.action"
        value="/grid/privilegeGrid" />
</portlet:resourceURL>
<portlet:resourceURL var="privilegeediturl">
    <portlet:param name="struts.portlet.action" 
        value="/grid/privilegeEdit"/>
</portlet:resourceURL>
...

         <!-- Add Dialog -->
    <div id="adddialog" title='<%= res.getString("needAssessment.add")%>'>
        <s:form id="addPrivilegeForm">
            <s:hidden id="needAssessmentId" name="needAssessmentId"/>
            <table>
 ...
            </table>
            <s:submit onclick="closeAddDialog();" key="submit" id="submitaddPrivilege" />
        </s:form>
    </div>
    <script type="text/javascript">
...
j.query('#addPrivilegeForm').submit(function(event){
     // fire off the request to actionEditUrl
    j.query.ajax({
        url: "<%=privilegeediturl%>",
        type: "post",
        data: {
            'needAssessmentId':j.query('#needAssessmentId').val(),
            'roleId': j.query('#addRoleId').val(),
            'startDuration': j.query('#addStartDuration').val(),
            'endDuration': j.query('#addEndDuration').val()
        },
        // callback handler that will be called on success
        success: function(response, textStatus, jqXHR){
            j.query('#privilegeGrid').trigger( 'reloadGrid' );
        },
        // callback handler that will be called on error
        error: function(jqXHR, textStatus, errorThrown){
            // log the error to the console
           alert(
                "The following error occured: "+
                textStatus, errorThrown
            );
        }
    });
     // prevent default posting of form
    event.preventDefault();
});
</script>

    <!-- Back Button -->

     <%if(!isPersian){ %>
    <div style="text-align :right;direction: rtl">
    <%}else { %>
    <div style="text-align: left; direction: ltr">
    <%} %>
    <button onclick="goBack();" id="backButton"><%=res.getString("back")%></button>
    <s:form id="backForm" cssStyle="display:none" action="defaultAdminView" namespace="/view">
    </s:form>

    </div>
    <script type="text/javascript">
    function goBack(){
        document.forms["backForm"].submit();
    }
    j.query('#backButton').button();
    </script>

     <%if(isPersian){ %>
    <div style="text-align :right;direction: rtl ">
    <%}else { %>
    <div style="text-align: left;direction: ltr">
    <%} %>
     <button id="addPrivilegeButton"><%=res.getString("needAssessment.add") %></button>
    </div>

    <script type="text/javascript">
    j.query('#addPrivilegeButton').button().click(function(event){
        addPrivilege();
        return false;
    });

    </script> 
    <br/>

    <!-- Privilege grid -->
    <table id="privilegeGrid" style="width: 100%"></table>
    <div id="pager2"></div> 
```

我通过ajax加载这个网格

```
j.query("#privilegeGrid").jqGrid({
        url:'<%=privilegeurl.toString()%>&' + '&needAssessmentId=' + needId ,
        datatype : "json",
        colNames : [ 
                    ...
                   ],
        colModel : [
                    ...
                   ],
        rowNum : 10,
        rowList : [ 10, 20, 30 ],
        pager : '#pager2',
        sortname : 'id',
        viewrecords : true,
        jsonReader : {
            repeatitems : false,
            id : "0"
        },
        height : '100%',
        width : 900,
        caption : '<%=res.getString("privileges")%>',
        ...

    });

 j.query("#privilegeGrid").jqGrid('navGrid', '#pager2', {edit : false,add : false,del : false}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T00:33:04.237

您的 HTML 格式不正确。默认情况下，Struts2 使用`xhtml`主题，这意味着除其他外，该`<s:form>`标签将为您生成表格。您正在将另一个`<table>`标签放入该标签生成的表格中`<s:form>`。

# javascript - Jquery获取li href的父级

> ID：14908885
> 
> 赞同：1
> 
> 时间：2013-02-16T09:35:45.383
> 
> 标签：javascript, jquery

嗨，我想得到这个李的父母

```
 <li><a href="/panasonic/index.php/en/site/wheretobuy" class="WTB"></a>
        <ul>        
    <li><a href="/panasonic/index.php/en/showroom/index" id="myid" > testing</a> </li>    
       </ul>    
   </li> 
```

如何获得“myid”的父 href。

我只有这个

```
document.write($('#myid').parent('li').find('a').attr('href')); 
```

显示“.../showroom/index”，我使用 document.write() 只是为了测试。

我希望它显示“.../wheretobuy”，并且必须通过“myid”访问

这里是这里

[http://fiddle.jshell.net/86powers/YLYxF/](http://fiddle.jshell.net/86powers/YLYxF/)

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T09:39:33.253

```
$('#myid').closest('ul').parent().find('a').attr('href') 
```

这应该有效。

# jquery - 在 Jquery 中添加 On() 事件而不是 live() 事件

> ID：14908887
> 
> 赞同：0
> 
> 时间：2013-02-16T09:35:52.450
> 
> 标签：jquery, asp.net

我现在有点困惑，在我更改为 Jquery 1.9.1 之前，我使用`live()`事件将事件绑定到 document.ready 上的按钮，但现在我被迫更改`.live()`为`.on()`事件，并且我的按钮停止工作。所以我以前的代码可能看起来像：

```
$(document).ready(function () {
    $("#button").live('click', buttonEvent);
}); 
```

之后：

```
$(document).ready(function () {
    $("#button").on('click', buttonEvent);
}); 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T09:37:29.160

```
$(document).ready(function () {
     $(document).on('click', '#button', buttonEvent); 
}); 
```

jQuery`.on()`可用于委托元素上的事件。它的模式有点不同但更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T09:41:13.660

您可以在此页面上看到所需的更改[Live to On](http://api.jquery.com/live/)

取自该页面的内容如下，它们演示了语法更改：

```
1 $("a.offsite").live("click", function(){ alert("Goodbye!"); }); // jQuery 1.3+
2 $(document).delegate("a.offsite", "click", function(){ alert("Goodbye!"); }); // jQuery 1.4.3+
3 $(document).on("click", "a.offsite", function(){ alert("Goodbye!"); }); // jQuery 1.7+ 
```

# load - 如何（重新）加载 Racket (X)REPL 中的文件？

> ID：14908888
> 
> 赞同：10
> 
> 时间：2013-02-16T09:36:05.620
> 
> 标签：load, scheme, racket, read-eval-print-loop

假设我有一个像

```
#lang racket/base
(define (hello) (print "Hello"))
... more definitions ... 
```

我想加载文件中的定义以在 (X)REPL 中交互地使用它们。我怎么做？

如果我启动 (X)REPL 和`(load "/tmp/hello.rkt")`，则该`hello`功能对我不可用：

```
-> (hello)
; hello: undefined; 
```

如果 I `(require (file "/tmp/hello.rkt"))`，结果是一样的。现在我*可以* `(enter! (file "/tmp/hello.rkt"))`然后`(hello)`工作，但这似乎相当......不直观且对初学者不友好。

这确实是应该这样做的方式吗？我应该简单地阅读模块和命名空间以轻松浏览和试验我的代码，还是有一种更简单的方式我忽略了？

注意我发现[你如何通过命令行将文件加载到球拍中？](https://stackoverflow.com/questions/6380327/how-do-you-load-a-file-into-racket-via-command-line)，但这仅说明了如何*运行*该文件。不是如何在 REPL 中加载它，因此您可以测试/调试一些特定的定义，然后编辑、重新加载等。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-16T18:06:20.880

由于以模块开头的文件`#lang`，因此如果您使用它们，它什么也不做`load`。（实际上它做了一些事情，但可能对你没有帮助。）最好避免`load`完全使用，假装它不存在。

现在，使用`require`是正确的，但它所做的是实例化模块并让您访问它提供的名称。在你的情况下，你没有提供任何东西，这意味着你不能使用你的`hello`. 为此，您可以添加`(provide hello)`到文件中。但这可能不是您想要的，因为您似乎想要调试代码。（即，您不会希望`provide`模块中的所有内容都只是为了处理事情。）

所以正确使用的是`enter!`，或者如果您使用的是 xrepl，那么有一个更方便的`,en`命令。这将实例化模块并使 repl 使用模块的命名空间，因此您可以访问所有内容。（而且你不需要它。）如果你改变它`load`，`require`你也可以多次使用它来重新加载代码。但请注意，它存在一些问题，因此您可能需要安装一个[夜间版本](http://pre.racket-lang.org/installers)才能使用它。

最后，您可能知道这一点，但与 DrRacket 一起工作通常会使事情变得更容易。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T12:00:20.963

将 放在`#lang racket/base`文件顶部就是将文件标记为模块形式（这是[#lang 简写](http://docs.racket-lang.org/guide/Module_Syntax.html#%28part._hash-lang%29)）；因此，加载文件只是为 . 添加模块定义`(file "/tmp/hello.rkt")`，正如您在需要该路径时发现的那样。

如果您只是想试验一组定义并尝试以交互方式加载它们，您可以尝试从文件顶部*删除。*`#lang racket/base`我在这里用一对“Racket toplevel”（rktl）文件来说明这一点：

```
% cat hello-unhashed.rktl
(define (hello) (print "Hello") (newline))
% cat hello2-unhashed.rktl
(define (hello) (print "Hello2") (newline))
% racket
Welcome to Racket v5.3.2.
> (load "hello-unhashed.rktl")
> (hello)
"Hello"
> (load "hello2-unhashed.rktl")
> (hello)
"Hello2"
> (load "hello-unhashed.rktl")
> (hello)
"Hello"
> (exit)
% 
```

请注意，以上述方式在顶层工作时有很多陷阱。要了解我在说什么，请尝试使用谷歌搜索“球拍顶级无望”或“plt 计划顶级无望”

# android - 如何在android的onactivityresult中获取图像路径

> ID：14908901
> 
> 赞同：0
> 
> 时间：2013-02-16T09:38:08.603
> 
> 标签：android, image, file, android-intent

在我的应用程序中，我正在从 sdcard 中检索图像文件。n 将路径发送回先前的活动。但我无法在以前的活动中获得路径。请帮助我。下面是代码-

第一项活动-

```
public class Work extends Activity {
String imagepath;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

}

public void importFile(View v){

    Intent intent=new Intent(this,ImportFile.class);

    startActivityForResult(intent, 1);

}
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);

    if(requestCode==1)
    {
        //here i wanto get image path.
    }
} 
```

}

第二个活动——

```
 public class ImportFile extends Activity implements OnCheckedChangeListener{

 TableLayout tl;
 Intent i;
 ImageView im;
 int idcount;
 Uri uri[];
 Uri[] imagefiles;
String filepath[];
String[] image=new String[100];
 TextView nameoffile,sizeoffile,line;
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mylist);
        File file = new File(Environment.getExternalStorageDirectory()
            + File.separator + "gallery" //folder name
        );
        if (!file.exists()) {
            file.mkdirs();
        }
          File f = new File("/sdcard/download");
            File[] files = f.listFiles();
        int j=0;
        for(int i = 0; i < files.length; i++,j++) {
            File file1 = files[i];
            //take the file name only
            long size = file1.length()/1024;
             String myfile = file1.getPath().substring(file1.getPath().lastIndexOf("/")+1,file1.getPath().length()).toLowerCase(); 
            System.out.println("file is : "+files[i]);
            if(myfile.endsWith(".jpeg")||myfile.endsWith(".png")|| myfile.endsWith(".gif") || myfile.endsWith(".jpg"))
            {
                System.out.println("file is : "+files[i]);
                image[j]=file1.getAbsoluteFile().toString();
            }               
        }
       }

    @Override
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
        int j;
        imagesPaths = new ArrayList<String>();
        // TODO Auto-generated method stub
        for(j=1;j<idcount;j++){
            if(ch[j].isChecked())
            {
                System.out.println("PPPPPPPPPPPPPPPPPP"+j);
                i=new Intent();
                i.putExtra("files",image[++j]);
                setResult(RESULT_OK, i);
                finish();
            }       
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T09:45:33.250

```
imagesPaths = new ArrayList<String>();
// TODO Auto-generated method stub
for(j=1;j<idcount;j++){
    if(ch[j].isChecked())
    {
        System.out.println("PPPPPPPPPPPPPPPPPP"+j);
        imagesPaths.add(image[++j]); 
    }   
}  
i=new Intent();
i.putExtra("files",imagesPaths);  
setResult(RESULT_OK, i);
finish();
}  

if(requestCode==1)
{
   ArrayList<String> imagesPaths = data.getStringArrayListExtra("files");

} 
```

# asp.net-mvc-4 - base64图像序列到视频输出文件

> ID：14908906
> 
> 赞同：1
> 
> 时间：2013-02-16T09:38:48.347
> 
> 标签：asp.net-mvc-4, html5-canvas

网络 MVC4 应用程序。如何在我的 asp.net mvc4 应用程序中生成视频文件。我有一组 URL，它们是 base64 格式的图像序列，从画布输出生成。请建议我控制器代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T17:31:37.653

这是发送画布数据的 ajax 和接收它的控制器代码：

```
// Send the canvas image to the server using ajax
// You can modify this ajax to fit your needs,

var canvas=getElementById("yourCanvas");
var image = canvas.toDataURL("image/png");
image = image.replace('data:image/png;base64,', '');

$.ajax({
    type: 'POST',
    url: 'yourController/UploadImage',
    data: '{ "imageData" : "' + image + '" }',
    contentType: 'application/json; charset=utf-8',
    dataType: 'json',
    success: function(msg){ console.log(msg); }
});

// receive the 64bit encoded string in the controller
// I just convert it to an Image,
// but you can do what you want with the MemoryStream

[HttpPost]
public ActionResult UploadImage(string imageData)
{
    byte[] byteArray = System.Convert.FromBase64String(imageData);

    // convert to an image (or do whatever else you need to do)
    Image image;
    using(MemoryStream s=new MemoryStream(byteArray){
        image=Image.FromStream(ms);
    }
    return("done");
} 
```

# jquery - 手动滚动添加类在这里不起作用

> ID：14908908
> 
> 赞同：1
> 
> 时间：2013-02-16T09:38:53.893
> 
> 标签：jquery, html, css

这是 JSFiddle 链接：http: [//jsfiddle.net/asif097/HHEqx/](http://jsfiddle.net/asif097/HHEqx/)

你好呀，

`active`在上面的链接中，您会发现单击链接时会添加一个类`('.nav-inner a')`，同时页面也会滚动。（更多理解见代码）：

```
$(document).ready(function() {

    $('html, body').animate({
            scrollTop: $(".target1").offset().top
    }, 1000);

    $('#link1').click(function() {
        $('html, body').animate({
            scrollTop: $(".target1").offset().top
        }, 1000);
        $('.nav-inner a').removeClass("active");
        $(this).addClass("active");
    });
    $('#link2').click(function() {
        $('html, body').animate({
            scrollTop: $(".target2").offset().top,
        }, 1000);
        $('.nav-inner a').removeClass("active");
        $(this).addClass("active");
    });
    $('#link3').click(function() {
        $('html, body').animate({
            scrollTop: $(".target3").offset().top
        }, 1000);
        $('.nav-inner a').removeClass("active");
        $(this).addClass("active");
    });

}); 
```

**现在**我希望这种情况发生，当我手动滚动 addClass() 时以相同的方式运行。试过这个：

```
 $('html, body').scroll(function ()
{
    if(($('html, body').scrollTop())<1000)
    {
        $(".nav-inner a").removeClass('active');
        $(".nav-inner a:nth-child(1)").addClass('active');
    }
    else if(($('html, body').scrollTop())<2000)
    {
        $(".nav-inner a").removeClass('active');
        $(".nav-inner a:nth-child(2)").addClass('active');
    }
    else
    {
        $(".nav-inner a").removeClass('active');
        $(".nav-inner a:nth-child(3)").addClass('active');
    }
}); 
```

**但是**，不起作用。任何人都可以修复我的代码吗？（期待解释）

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T09:52:01.557

替换`$('html, body').scroll()`为`$(window).scroll()`

并`$('html, body').scrollTop()`与`$(window).scrollTop()`

看看：[演示](http://jsfiddle.net/HHEqx/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T09:54:38.287

[http://jsfiddle.net/HHEqx/4/](http://jsfiddle.net/HHEqx/4/)

```
$(window).scroll(function (){
    var scrll = $(this).scrollTop();
    if(scrll < 1000)
    {
        $(".nav-inner a").removeClass('active');
        $(".nav-inner a:nth-child(1)").addClass('active');
    }
    else if(scrll < 2000)
    {
        $(".nav-inner a").removeClass('active');
        $(".nav-inner a:nth-child(2)").addClass('active');
    }
    else
    {
        $(".nav-inner a").removeClass('active');
        $(".nav-inner a:nth-child(3)").addClass('active');
    }
}); 
```

# javascript - 将加载的javascript替换为head中新加载的javascript

> ID：14908909
> 
> 赞同：0
> 
> 时间：2013-02-16T09:38:57.400
> 
> 标签：javascript, javascript-events

我有一个网页，它在下面的函数调用时加载 javascript。

```
loadjavascript:function(v_url) 
    {
        if (v_url != indef && v_url != ' ') {

            var filename = '../includes/javascript.php?url=' + v_url;

            var fileref=document.createElement('script');
                fileref.setAttribute("type","text/javascript");
                fileref.setAttribute("src", filename);
            if (typeof fileref!="undefined")
                document.getElementsByTagName("head")[0].appendChild(fileref);
        }   
    } 
```

当我签入 firebug 时，我可以看到加载了这么多相同的 javascript。

为了解决这个问题，我想做的是 -

1）如果未加载javascript，则调用该函数时，将其加载并附加到head。2）如果调用函数并且它是已经存在于头部部分的相同javascript，则不要加载新的，**而是运行已经存在的javascript**。

它可以完成还是在javasctript中是不可能的..任何人都可以分享一些想法如何做到这一点..

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T09:51:46.830

这个问题表明需要重构。但回答实际问题：:-)

> 1）如果未加载javascript，则调用该函数时，将其加载并附加到head。

这部分很简单，只需遍历 中的现有`script`元素`head`：

```
var head = document.getElementsByTagName('head')[0];
var list = head.getElementsByTagName('script');
var index, script, found;

found = false;
for (index = 0; !found && index < list.length; ++index) {
    script = list[index];
    if (script.src.indexOf('?url=' + v_url) !== -1) { // Or however precise you want to be
        found = true;
    }
}
if (found) {
    // It was found, don't load it again
}
else {
    // It wasn't found, load it
} 
```

> 2）如果调用函数并且它是已经存在于头部部分的相同javascript，则不要加载新的，而是运行已经存在的javascript。

这部分需要更改相关脚本。基本上，如果脚本如下所示：

```
function defineSomeFunction() {
    // ...
}
function defineSomeOtherFunction() {
    // ...
}
if (foo) {
    bar();
}
if (thisCondition) {
    thatAction();
}
// etc. 
```

...需要对其进行修改，使其正在执行的所有*内联*操作（上面的两个`if`语句）实际上都由一个函数完成，如下所示：

```
function defineSomeFunction() {
    // ...
}
function defineSomeOtherFunction() {
    // ...
}
function inlineStuff() {
    if (foo) {
        bar();
    }
    if (thisCondition) {
        thatAction();
    }
    // etc.
}
inlineStuff(); 
```

然后，当您检测到它已经加载过一次时，而不是再次加载它，只需调用该`inlineStuff`函数即可。

如果您有多个这些（并且看起来确实如此），则需要确保`inlineStuff`函数名称是唯一的，并且可以由 推断或定义`v_url`，因此您知道要调用哪个函数。然后您可以通过在 上引用它来调用它`window`，因为这是所有全局变量的去向。

```
var functionName = figureOutFunctionNameFromURL(v_url);
window[functionName](); 
```

# mvvm - 如何将下拉列表更新为默认值

> ID：14908910
> 
> 赞同：0
> 
> 时间：2013-02-16T09:38:58.747
> 
> 标签：mvvm, kendo-ui, cascadingdropdown

我有 2 个下拉列表级联。

我使用 MVVM。

用户故事：

1.  从第一个 DDL 中选择值（自动启用第二个 DDL 并推送数据）
2.  从第二个 DDL 中选择值
3.  单击添加（在模型中的数据源中添加值字段）

这是工作。

我需要将第一个 DDL 更新为默认值（“选择...”）并自动禁用第二个 DDL，但第一个 DDL 是默认值。

这是怎么做的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T14:22:21.860

第一个 DDL 有 ID = "myFirstDDL" 。然后

```
var firstDDL = $('#myFirstDDL').data('kendoDropDownList');// kendo object
firstDDL.dataSource.read(); // re-new data from Your Server - if you need this.
firstDDL.select(0);//update first DDL to default value ("Select...") and automatically disable second DDL 
```

# file - 在phonegap应用程序中下载文件

> ID：14908912
> 
> 赞同：0
> 
> 时间：2013-02-16T09:39:20.270
> 
> 标签：file, cordova

我找到了一个将文件下载到我的设备 sd 卡的功能

```
application.downloadFile = function(file, callback)
{
    window.requestFileSystem(
    LocalFileSystem.PERSISTENT, 0, 
    function onFileSystemSuccess(fileSystem) {
        fileSystem.root.getFile(
        "dummy.html", {create: true, exclusive: false}, 
        function gotFileEntry(fileEntry) {
        var sPath = fileEntry.fullPath.replace("dummy.html","");
        var fileTransfer = new FileTransfer();
        fileEntry.remove();

        fileTransfer.download(
            application.api+file,
            sPath + "assas.json",
            function(theFile) {
                console.log("download complete: " + theFile.toURI());
                application.dataPath = theFile.toURI();
                callback();
            },
            function(error) {
                console.log("download error source " + error.source);
                console.log("download error target " + error.target);
                console.log("upload error code: " + error.code);
            }
          );
        });
    });
}; 
```

该代码工作正常，但它将代码下载到我的 SD 卡中，我想直接在我的应用程序中下载我的文件。

在`www/datas`

但我真的不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T14:37:22.557

不幸的是 WWW 文件夹是只读的，你不能写入它。您只能写入文件系统。

# c# - 在 Windows 8 中将内容添加到 groupeditemspage

> ID：14908913
> 
> 赞同：3
> 
> 时间：2013-02-16T09:39:26.727
> 
> 标签：c#, windows-8, httpclient

当我创建 GroupedItemsPage 时，它​​有 DataModel/SampleDataSource.cs 例如

但是如何添加从 Internet 加载并使用 Fizzler 修改的内容？

```
 public sealed class SampleDataSource
  {
    string a = "";
    private static SampleDataSource _sampleDataSource = new SampleDataSource();

    private ObservableCollection<SampleDataGroup> _allGroups = new ObservableCollection<SampleDataGroup>();
    public ObservableCollection<SampleDataGroup> AllGroups
    {
        get { return this._allGroups; }
    }

    public static IEnumerable<SampleDataGroup> GetGroups(string uniqueId)
    {
        if (!uniqueId.Equals("AllGroups")) throw new ArgumentException("Only 'AllGroups' is supported as a collection of groups");

        return _sampleDataSource.AllGroups;
    }

    public static SampleDataGroup GetGroup(string uniqueId)
    {
        // Simple linear search is acceptable for small data sets
        var matches = _sampleDataSource.AllGroups.Where((group) => group.UniqueId.Equals(uniqueId));
        if (matches.Count() == 1) return matches.First();
        return null;
    }

    public static SampleDataItem GetItem(string uniqueId)
    {
        // Simple linear search is acceptable for small data sets
        var matches = _sampleDataSource.AllGroups.SelectMany(group => group.Items).Where((item) => item.UniqueId.Equals(uniqueId));
        if (matches.Count() == 1) return matches.First();
        return null;
    }

    public async Task<string> DownloadStringContent()
    {
        HttpClient client = new HttpClient();
        var response = await client.GetAsync(new Uri("http://www.google.com"));
        var result = await response.RequestMessage.Content.ReadAsStringAsync();

        return result;
    }

    public async void setA()
    {
        a = await DownloadStringContent();
        while (a == "") ;
    }

    public SampleDataSource()
    {
        setA();
        String ITEM_CONTENT = a;
        //String ITEM_CONTENT = String.Format("Item Content: {0}\n\n{0}\n\n{0}\n\n{0}\n\n{0}\n\n{0}\n\n{0}",
          //          "Curabitur class aliquam vestibulum nam curae maecenas sed integer cras phasellus suspendisse quisque donec dis praesent accumsan bibendum pellentesque condimentum adipiscing etiam consequat vivamus dictumst aliquam duis convallis scelerisque est parturient ullamcorper aliquet fusce suspendisse nunc hac eleifend amet blandit facilisi condimentum commodo scelerisque faucibus aenean ullamcorper ante mauris dignissim consectetuer nullam lorem vestibulum habitant conubia elementum pellentesque morbi facilisis arcu sollicitudin diam cubilia aptent vestibulum auctor eget dapibus pellentesque inceptos leo egestas interdum nulla consectetuer suspendisse adipiscing pellentesque proin lobortis sollicitudin augue elit mus congue fermentum parturient fringilla euismod feugiat");

        var group1 = new SampleDataGroup("Group-1",
                "Group Title: 1",
                "Group Subtitle: 1",
                "Assets/DarkGray.png",
                "Group Description: Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus tempor scelerisque lorem in vehicula. Aliquam tincidunt, lacus ut sagittis tristique, turpis massa volutpat augue, eu rutrum ligula ante a ante");
        group1.Items.Add(new SampleDataItem("Group-1-Item-1",
                "Item Title: 1",
                "Item Subtitle: 1",
                "Assets/LightGray.png",
                "Item Description: Pellentesque porta, mauris quis interdum vehicula, urna sapien ultrices velit, nec venenatis dui odio in augue. Cras posuere, enim a cursus convallis, neque turpis malesuada erat, ut adipiscing neque tortor ac erat.",
                ITEM_CONTENT,
                group1));
        group1.Items.Add(new SampleDataItem("Group-1-Item-2",
                "Item Title: 2",
                "Item Subtitle: 2",
                "Assets/DarkGray.png",
                "Item Description: Pellentesque porta, mauris quis interdum vehicula, urna sapien ultrices velit, nec venenatis dui odio in augue. Cras posuere, enim a cursus convallis, neque turpis malesuada erat, ut adipiscing neque tortor ac erat.",
                ITEM_CONTENT,
                group1));
        group1.Items.Add(new SampleDataItem("Group-1-Item-3",
                "Item Title: 3",
                "Item Subtitle: 3",
                "Assets/MediumGray.png",
                "Item Description: Pellentesque porta, mauris quis interdum vehicula, urna sapien ultrices velit, nec venenatis dui odio in augue. Cras posuere, enim a cursus convallis, neque turpis malesuada erat, ut adipiscing neque tortor ac erat.",
                ITEM_CONTENT,
                group1));
        group1.Items.Add(new SampleDataItem("Group-1-Item-4",
                "Item Title: 4",
                "Item Subtitle: 4",
                "Assets/DarkGray.png",
                "Item Description: Pellentesque porta, mauris quis interdum vehicula, urna sapien ultrices velit, nec venenatis dui odio in augue. Cras posuere, enim a cursus convallis, neque turpis malesuada erat, ut adipiscing neque tortor ac erat.",
                ITEM_CONTENT,
                group1));
        group1.Items.Add(new SampleDataItem("Group-1-Item-5",
                "Item Title: 5",
                "Item Subtitle: 5",
                "Assets/MediumGray.png",
                "Item Description: Pellentesque porta, mauris quis interdum vehicula, urna sapien ultrices velit, nec venenatis dui odio in augue. Cras posuere, enim a cursus convallis, neque turpis malesuada erat, ut adipiscing neque tortor ac erat.",
                ITEM_CONTENT,
                group1));
        this.AllGroups.Add(group1);
    }
} 
```

我想通过从 httpclient 下载字符串来修改 SampleDataSource 中的字符串，但是 a 中没有任何内容

我怎么处理这个？请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T00:05:55.690

也许在 MSDN 文档中阅读核心级别..

Web 服务返回 2 模型方法：

*   普通法
*   异步方法

如果要使用异步方法，请在方法中声明标识“异步”子句。如果调用网络服务方法异步并且如果添加“等待”子句：方法等待网络方法响应。在这个时候，不要到达代码行下方。

并且构造函数不支持异步子句。

将您的集合绑定到控件。仍在下载以控制显示。派生您的类 INotifyProperty。

问候。

# lucene.net - 如何在 Lucene.Net 中进行 IN 查询

> ID：14908918
> 
> 赞同：1
> 
> 时间：2013-02-16T09:40:05.917
> 
> 标签：lucene.net

我添加了一个字段，`ID`其中`STORE NO`和字段将仅包含唯一 ID。`NOT ANALYZED``index.ID`

我想使用`IN`查询。例如，如果我只想通过在索引中搜索 id 为 1、2、3、4 的文档，我尝试了 QueryParser 用空格 1 2 3 4 分隔 id。

它确实给了我。但是有没有其他更快更可行的方法呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T05:24:53.347

如果您看一下[这个问题](https://stackoverflow.com/questions/14405203/how-to-query-for-terms-in-a-collection-using-lucene-net-similar-to-sqls-in-ope)，还有其他一些方法可以实现`IN`运算符。

默认情况下，传递给`Lucene.Net`（空格分隔的术语）的所有术语都是 ORed。执行，

```
Id: 1 2 3 4 
```

将返回与传递的任何 id 匹配的所有文档。

你可以使用类似的东西，

```
var collection = new[] { "1", "2", "3", "4" };
var query = new QueryParser(version, propertyName, analyzer)
    .Parse(string.Join(" ", collection)); 
```

将术语列表作为运算符传递给 Lucene.Net `IN`。

# c# - ListView 中的 InsertItemTemplate 不出现

> ID：14908919
> 
> 赞同：0
> 
> 时间：2013-02-16T09:40:08.480
> 
> 标签：c#, asp.net, templates

当我在 ListView 控件中创建 InsertItemTemplate 时，它​​不会出现。为什么 ？这段代码的问题在哪里？运行 TextBox 控件时，我看不到“输入文本”。

```
<asp:ListView ID="ChatListView" runat="server" DataSourceID="EntityDataSourceUserPosts" OnItemDataBound="ChatListView_ItemDataBound">
    <ItemTemplate>
            <div class="postContent">
                <%# Eval("PostComment") %>
            </div>
        </div>
    </ItemTemplate>
    <InsertItemTemplate>
        <asp:Label ID="Label2" runat="server" Text="ENTER TEXT"></asp:Label>
        <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
    </InsertItemTemplate>

</asp:ListView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T09:51:19.343

您是否像下面这样设置 InsertItemPosition：

```
protected void btn_Click(object sender, EventArgs e)
    {
        ChatListView.InsertItemPosition = InsertItemPosition.FirstItem;
    } 
```

# c# - 为什么需要在 Visual Studio 2010 中更改 X86 平台

> ID：14908927
> 
> 赞同：-1
> 
> 时间：2013-02-16T09:40:57.743
> 
> 标签：c#, .net, winforms, visual-studio-2010, dll

我正在尝试在我的 WindowsForm 应用程序中使用[这篇文章项目](http://www.codeproject.com/Articles/3582/Word-Control-for-NET?fid=14182&df=10000&mpp=25&noise=3&prof=False&sort=Position&view=Quick&spc=Relaxed&fr=76#xx0xx)。

我正在使用 Visual Studio 2010。您可以在上面的链接下载并运行测试应用程序。

我的问题是当我在项目中使用以下 DLL 列表时。

```
Interop.Office.dll

Interop.VBIDE.dll

Interop.Word.dll 
```

我必须更改项目配置设置。

**配置管理器（从运行按钮附近的解决方案配置组合框打开）=> 平台 => 到 x86。**

1.  为什么我们必须将平台更改为 x86？
2.  如果我将平台更改为 x86？项目会在 64 位机器上运行吗？

请帮我..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T09:46:26.493

这是因为您的 C# 程序的内存模型必须与您要调用的任何非托管 DLL 的内存模型相匹配。因为 Microsoft Office DLL 是 32 位的，所以您的程序也必须是 32 位的。

不过，它仍然可以在 64 位机器上正常运行！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T09:48:08.180

1.  您将更改为 x86，因为您使用依赖于平台的 dll。
2.  是的，它将作为 WOW64 运行。

# django - 在表单集中上传相同的图像文件返回 ValueError

> ID：14908931
> 
> 赞同：0
> 
> 时间：2013-02-16T09:41:27.233
> 
> 标签：django, django-forms

我一直在使用 django 1.4 做一个表单集，用户可以用来上传一个或多个图像。

formset 在向导步骤中使用，但在 done 方法中手动处理 is_valid 检查和 formset.save()。

表单集的行为非常奇怪，当我在表单集中选择不同的图像时，它可以完美地工作。但是，当我在两个字段中上传相同的图像时，出现以下错误

```
ValueError at /item/post-project/

I/O operation on closed file 
```

这很奇怪，不知道如何调试这样的问题，我尝试使用一个函数来替换文件字段中的 upload_to 参数以始终使用 uuid 字段，以防由于文件命名重复而引发此错误，但确实如此不解决问题。

这是我的功能

```
AttachmentFormSet   = inlineformset_factory(Item, Attachment, extra=attachment_form_extra, max_num=8, can_delete=False, form=AttachmentForm)
formset = AttachmentFormSet(request.POST, request.FILES, instance=instance,)
if formset.is_valid():
  formset.save() 
```

关于如何解决这个问题的任何建议？

错误堆栈

```
Environment:

Request Method: POST
Request URL: http://127.0.0.1:8000/item/post-project/

Django Version: 1.4.3
Python Version: 2.7.2
Installed Applications:
('admin_tools',
 'admin_tools.theming',
 'admin_tools.menu',
 'admin_tools.dashboard',
 'django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'django.contrib.admindocs',
 'social_auth',
 'account',
 'item',
 'sponsor',
 'pages',
 'misc.helper')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "/Users/mo/Projects/pythonic/yrok-env/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/Users/mo/Projects/pythonic/yrok-env/lib/python2.7/site-packages/django/contrib/auth/decorators.py" in _wrapped_view
  20\.                 return view_func(request, *args, **kwargs)
File "/Users/mo/Projects/pythonic/yrok-env/yrok/yrok/apps/item/views.py" in post_item
  105\.     return response(request)
File "/Users/mo/Projects/pythonic/yrok-env/lib/python2.7/site-packages/django/views/generic/base.py" in view
  48\.             return self.dispatch(request, *args, **kwargs)
File "/Users/mo/Projects/pythonic/yrok-env/lib/python2.7/site-packages/django/contrib/formtools/wizard/views.py" in dispatch
  223\.         response = super(WizardView, self).dispatch(request, *args, **kwargs)
File "/Users/mo/Projects/pythonic/yrok-env/lib/python2.7/site-packages/django/views/generic/base.py" in dispatch
  69\.         return handler(request, *args, **kwargs)
File "/Users/mo/Projects/pythonic/yrok-env/yrok/yrok/apps/item/wizards.py" in post
  109\.                 return self.render_done(form, **kwargs)
File "/Users/mo/Projects/pythonic/yrok-env/lib/python2.7/site-packages/django/contrib/formtools/wizard/views.py" in render_done
  328\.         done_response = self.done(final_form_list, **kwargs)
File "/Users/mo/Projects/pythonic/yrok-env/yrok/yrok/apps/item/wizards.py" in done
  156\.         formset.save()
File "/Users/mo/Projects/pythonic/yrok-env/lib/python2.7/site-packages/django/forms/models.py" in save
  497\.         return self.save_existing_objects(commit) + self.save_new_objects(commit)
File "/Users/mo/Projects/pythonic/yrok-env/lib/python2.7/site-packages/django/forms/models.py" in save_new_objects
  628\.             self.new_objects.append(self.save_new(form, commit=commit))
File "/Users/mo/Projects/pythonic/yrok-env/lib/python2.7/site-packages/django/forms/models.py" in save_new
  731\.             obj.save()
File "/Users/mo/Projects/pythonic/yrok-env/yrok/yrok/apps/item/models.py" in save
  327\.         super(Attachment, self).save(force_insert=force_insert, force_update=force_update, using=using)
File "/Users/mo/Projects/pythonic/yrok-env/lib/python2.7/site-packages/django/db/models/base.py" in save
  463\.         self.save_base(using=using, force_insert=force_insert, force_update=force_update)
File "/Users/mo/Projects/pythonic/yrok-env/lib/python2.7/site-packages/django/db/models/base.py" in save_base
  551\.                 result = manager._insert([self], fields=fields, return_id=update_pk, using=using, raw=raw)
File "/Users/mo/Projects/pythonic/yrok-env/lib/python2.7/site-packages/django/db/models/manager.py" in _insert
  203\.         return insert_query(self.model, objs, fields, **kwargs)
File "/Users/mo/Projects/pythonic/yrok-env/lib/python2.7/site-packages/django/db/models/query.py" in insert_query
  1593\.     return query.get_compiler(using=using).execute_sql(return_id)
File "/Users/mo/Projects/pythonic/yrok-env/lib/python2.7/site-packages/django/db/models/sql/compiler.py" in execute_sql
  911\.         for sql, params in self.as_sql():
File "/Users/mo/Projects/pythonic/yrok-env/lib/python2.7/site-packages/django/db/models/sql/compiler.py" in as_sql
  872\.                 for obj in self.query.objs
File "/Users/mo/Projects/pythonic/yrok-env/lib/python2.7/site-packages/django/db/models/fields/files.py" in pre_save
  249\.             file.save(file.name, file, save=False)
File "/Users/mo/Projects/pythonic/yrok-env/lib/python2.7/site-packages/django/db/models/fields/files.py" in save
  86\.         self.name = self.storage.save(name, content)
File "/Users/mo/Projects/pythonic/yrok-env/lib/python2.7/site-packages/django/core/files/storage.py" in save
  45\.         name = self._save(name, content)
File "/Users/mo/Projects/pythonic/yrok-env/lib/python2.7/site-packages/django/core/files/storage.py" in _save
  195\.                         for chunk in content.chunks():
File "/Users/mo/Projects/pythonic/yrok-env/lib/python2.7/site-packages/django/core/files/base.py" in chunks
  63\.             self.seek(0)

Exception Type: ValueError at /item/post-project/
Exception Value: I/O operation on closed file 
```

# api - 当每次调用改变系统状态时如何测试应用程序？

> ID：14908932
> 
> 赞同：0
> 
> 时间：2013-02-16T09:41:58.040
> 
> 标签：api, testing

当您拥有可以调用 100 次并且产生相同结果的方法时，测试很简单。但是你如何测试像 Api 这样的东西，你有这样的东西：

```
int CreateUser(username,password); //returns the id of the user, -1 if error
int SubmitOrder(username,password,productName,quantity);//returns the id of the order -1 if error
int CancelOrder(username,password,orderId); //returns -1 if error 
```

您将如何测试此 Api 是否有效？如何创建测试数据？我不能为它编写单元测试，我不能使用相同的测试数据，因为我不能创建一个用户两次（用户名是唯一的）。当我提交订单时，我总是得到不同的 orderIds 作为响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T09:49:42.767

您需要找到某种方法将系统“重置”到众所周知的初始状态，即没有用户也没有订单的状态。

您还需要找到一些方法来观察系统中的状态。这种方式实际上可能具有破坏性，即它可能会修改甚至损坏系统的状态，但是尽管如此。在您的情况下，方法`CreateUser`可以用作这样的观察者来检查用户是否已经存在，因为已知`-1`在这种情况下会返回。

以下是您的一个测试用例的样子：

```
reset (); // Each test case should start with reset
assertNotEquals (-1, CreateUser ("foo", "bar")); // This should work fine
assertEquals (-1, CreateUser ("foo", "zoo")); // Make sure user "foo" does exist
assertNotEquals (-1, SubmitOrder ("foo", "bar", "apple", 1)); // Make sure user can pass authentication
assertEquals (-1, SubmitOrder ("foo", "zoo", "apple", 1)); // Make sure password is actually checked 
```

上面的测试用例检查是否`CreateUser`实际创建了具有给定名称和密码的用户，并且不允许创建两个具有相同名称的用户。

这是另一个测试用例：

```
reset ();
CreateUser ("foo", "bar");
orderID = SubmitOrder ("foo", "bar", "apple", 1); // Submit order
assertNotEquals (-1, CancelOrder (orderID)); // Make sure order was really created
assertEquals (-1, CancelOrder (orderID)); // Make sure order was cancelled 
```

等等。当然，最好找到更直接的方法来观察系统状态，例如直接查询数据库。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-16T09:57:25.823

我假设你在谈论一些 OOP 语言。我认为您可以通过单元测试和依赖注入来解决您的问题。核心理念：

*   首先你测试你的数据库类
*   在测试 API 时，您将 FakeDataBase 类注入其中（共享相同的接口）

因此，在测试环境中，API 会写入其他一些假数据库，或者只是将查询打印到文件中，然后您只需检查该文件的内容是否符合您的预期。

很棒的视频：

[http://www.youtube.com/watch?feature=player_embedded&v=wEhu57pih5w#](http://www.youtube.com/watch?feature=player_embedded&v=wEhu57pih5w#)！

[http://en.wikipedia.org/wiki/Dependency_injection](http://en.wikipedia.org/wiki/Dependency_injection)

[http://en.wikipedia.org/wiki/Unit_testing](http://en.wikipedia.org/wiki/Unit_testing)

# wpf - 如何检测未关闭的前台线程（wpf）

> ID：14908933
> 
> 赞同：0
> 
> 时间：2013-02-16T09:41:59.673
> 
> 标签：wpf, multithreading

对于大规模的 wpf 应用程序，有很多线程。也许它是一个套接字线程。我的问题是如何检测阻止我的应用程序关闭的前台线程！我将应用程序更改为 consolo，所以我可以输出日志！但是当我关闭 UI 窗口时，Consolo Win 没有关闭，我不知道为什么，我已经释放了我使用的非托管资源。有什么工具可以帮我检测吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T02:44:04.030

遍历 Process.GetCurrentProcess().Threads 属性 (ProcessThreadCollection) 检查具有 IsBackground 属性 == false 的线程；这些是前台线程，它们会阻止 Windows 在它们运行时关闭进程。调用 Thread.Kill 将强制终止线程。

# magento - list.phtml 中特定产品的 Magento 调用块

> ID：14908938
> 
> 赞同：0
> 
> 时间：2013-02-16T09:42:48.943
> 
> 标签：magento, php

我想为 list.phtml 上的每个产品打印一些附加数据，这些数据将取决于产品。例如，为每个产品打印带有 New 和 Sale 标签的 html（这只是一个示例）。我想以某种方式将逻辑与 .phtml 文件分开，并保留在 phtml 中只是一个调用。实现它的最佳方法是什么？我还想最小化覆盖核心文件并使其更加独立。我的想法是：

1.  创建我自己的块，在 .phtml 中创建并调用它，并使用 setData 将我的产品传递给那里：

    ```
    $this->getLayout()->createBlock("namespace/block")->
    setTemplate("path/to/template")->setData('product', $_product) 
    ```

    然后在我的块 .php 文件中调用 getProduct() 。但由于某些原因，它不起作用。

2.  对我来说最好看的解决方案，但不确定是否允许。在布局文件中创建新块并使用`getChildHtml('block_name')`. 但我不知道如何传递当前产品或如何使其能够通过我的 .php 文件中的 $this 访问。

3.  覆盖产品块并添加我自己的方法，如 getRibbons()。对我来说最糟糕的解决方案，因为这将要求在 .php 块中写入 html 并将覆盖核心块。

我对magento很陌生，也许我缺少一些基本概念？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T11:31:26.900

扩展您的 Product Block PHP 并在其中添加您想要的新方法。然后在你`module.xml`引用核心产品块的地方，用你新创建的块替换它。

现在，您可以使用 PHTML 文件轻松调用 PHP 块的方法`$this`

# css - 垂直对齐表单助手

> ID：14908941
> 
> 赞同：0
> 
> 时间：2013-02-16T09:43:14.600
> 
> 标签：css, ruby-on-rails

我正在使用以下代码来生成表单。目前，没有任何样式，所有的 CSS 文件都是空的。

```
<h1>New Post</h1>
<%= form_for @post do |f| %>
  <%= f.text_field :title %>
  <%= f.text_area :body %>
  <%= f.submit %>
<% end %> 
```

这是application.rb的内容

```
<!DOCTYPE html>
<html>
<head>
  <title>Bloog</title>
  <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>
</head>
<body>
  <div class="sidebar two columns">
    <nav>
      <ul>
        <li><%= link_to "New post...", new_post_path %></li>
      </ul>
    </nav>
  </div>
  <div>
    <%= yield %>
 </div>
</body>
</html> 
```

这会生成一个水平对齐的表单，而不是垂直堆叠元素。

![使用默认 from_for 助手的水平表单](../Images/4209c04b4df29d07ef92c2c27728a91c.png)

我希望它看起来像这样，这是我所期望的默认行为。

![我如何认为 from 将呈现](../Images/bfe1a37b60c404d949025b0307d957e0.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T09:53:06.487

向元素添加一些装箱以对它们进行分组。例如，div 或段落，就像在默认脚手架中所做的那样。

像这样使用它：

```
<h1>New Post</h1>
<%= form_for @post do |f| %>
  <p><%= f.text_field :title %></p>
  <p><%= f.text_area :body %></p>
  <p><%= f.submit %></p>
<% end %> 
```

# android - 所有 Android project.properties 选项的完整列表

> ID：14908945
> 
> 赞同：7
> 
> 时间：2013-02-16T09:43:53.843
> 
> 标签：android, android-manifest, adt, android-library

我只知道以下属性，我想要一个完整的列表。

这指定了目标 API 级别（示例中的 API 级别 17）：

```
target=android-17 
```

这指定项目是否为库：

```
android.library=true 
```

这以Android方式指定包含的库（库项目的目录合并到包含项目的相应目录中）：

```
android.library.reference.1=../relative/path/to/library/one
android.library.reference.2=../relative/path/to/library/two
...
android.library.reference.n=../relative/path/to/library/n 
```

这指定是否将`AndroidManifest.xml`库项目的清单文件 ( ) 合并到包含项目的清单文件中：

```
manifestmerger.enabled=true 
```

我在我的项目中看到了前三个（由 Eclipse 生成），从[SDK Tools - Revisions - SDK Tools, Revision 20 (June 2012)](http://developer.android.com/tools/sdk/tools-notes.html)中找到了最后一个，很难找到。

官方网站/文档/Android源中是否有完整列表？

**-- 2013 年 2 月 17 日编辑 --**

感谢[android 开发](https://stackoverflow.com/users/878126/)人员提醒我该`proguard.config`属性，该属性在默认`project.property`文件中留下了注释。

这指定了[ProGuard](http://developer.android.com/tools/help/proguard.html)配置文件的路径：

```
proguard.config=${sdk.dir}/tools/proguard/proguard-android.txt:proguard-project.txt 
```

有两个变量可用：`${sdk.dir}`和`${user.home}`。更多信息可以在[ProGuard 文档](http://developer.android.com/tools/help/proguard.html)中找到。

相关文章：

[android - 使用新的“manifestmerger”属性](https://stackoverflow.com/questions/10976635/)

[图书馆项目清单文件合并了吗？](https://stackoverflow.com/questions/4457219/)

[在发布模式下使用 manifestmerger 时出现问题](https://stackoverflow.com/questions/11313062/)

# php - PHP - 简单的数学，硬编码。0.000126% 到 1/10000 的分数等

> ID：14908949
> 
> 赞同：1
> 
> 时间：2013-02-16T09:44:31.293
> 
> 标签：php, math

我需要把小百分比变成大分数。如果我有**0.000126%**的百分比- 我想把它变成*1/10,000*的一小部分 - 等等。我如何将一小部分变成不是最低常见分数的分数。

方程的答案很简单。

```
0.000126% = 0.00126/10% = 0.0126/100% = 0.126/1000% = ... = 126/1000000% 
```

然后找出共同因素。2 进入每个，所以这与*63/500000*相同。这就像我能做到的那样简单。

因此，在代码中 - 我如何得到这个该死的分数。Grrrr....令人沮丧的oO！几次尝试 - 我每次都失败了。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T11:56:35.660

这是一个 PHP 函数，它使用连分数来找到给定（正）浮点数的有理逼近，其相对误差小于给定容差。

```
<?php
function float2frac($n, $tolerance = 1.e-6) {
    $h1=1; $h2=0;
    $k1=0; $k2=1;
    $b = $n;
    do {
        $a = floor($b);
        $aux = $h1; $h1 = $a*$h1+$h2; $h2 = $aux;
        $aux = $k1; $k1 = $a*$k1+$k2; $k2 = $aux;
        $b = 1/($b-$a);
    } while (abs($n-$h1/$k1) > $n*$tolerance);

    return "$h1/$k1";
}

printf("%s\n", float2rat(66.66667)); # 200/3
printf("%s\n", float2rat(sqrt(2)));  # 1393/985 
```

我已经写了更多关于这个算法及其工作原理的文章，甚至还有一个 JavaScript 演示：http: [//jonisalonen.com/2012/converting-decimal-numbers-to-ratios/](http://jonisalonen.com/2012/converting-decimal-numbers-to-ratios/)

# jquery-ui-dialog - 关于 jQuery UI 小部件的广泛教程/文档

> ID：14908950
> 
> 赞同：1
> 
> 时间：2013-02-16T09:45:07.117
> 
> 标签：jquery-ui-dialog, slickgrid, jquery-ui-widget-factory, jquery-ui-widget

如果在其他任何地方都对此有所回答，请请求宽恕（指向该链接的链接将非常有帮助）

我无法在 $.widget 上找到好的教程或文档。UI 文档对此有所限制。我正在寻找的是有关如何有效定义事件和调用自定义小部件的文档。如何拦截来自基本小部件的事件。什么是最佳实践，以及推荐的设计模式。

可悲（并且令人惊讶）我发现的唯一文档是[http://msdn.microsoft.com/en-us/library/hh404085.aspx](http://msdn.microsoft.com/en-us/library/hh404085.aspx)。

我正在构建（或尝试构建）一个自定义小部件（以 ui.dialog 为基础），它将在其中托管一个 slickgrid 和一些用于导航数据的按钮（slickgrid 默认按钮不够好，因为数据源是大量 ajax 驱动的） .

到目前为止，我的进步非常好，我开始佩服 $.widget 的强大功能。由于我在这里处于学习曲线上，因此我希望获得一些有关最佳实践的专家建议和指导。

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T18:55:24.950

这是关于如何使用 jQuery-UI 构建小部件的一个很好的介绍

[http://net.tutsplus.com/tutorials/javascript-ajax/coding-your-first-jquery-ui-plugin/](http://net.tutsplus.com/tutorials/javascript-ajax/coding-your-first-jquery-ui-plugin/)

也

[http://ajpiano.com/widgetfactory](http://ajpiano.com/widgetfactory)

他们还列出了他们的参考资料，这些参考资料直接将您链接到有关此事的更多教程和文档。

基础是您将定义一个小部件名称

```
$.widget('ui.widget_name', {
    options: {
        overrideableOption: true,
    },
    _create: function () {
        //fires when you first create the widget, and can be used as a callback for the 'create' event
    },
    _additional_events.....
}); 
```

`ui`然后您可以使用命名空间后的命名约定来调用您的小部件

```
$(element).widget_name({overrideableOption: false}); 
```

希望这能让你开始。

# bash - bash：部分匹配到一个完整的单词

> ID：14908958
> 
> 赞同：4
> 
> 时间：2013-02-16T09:46:43.357
> 
> 标签：bash, command, pattern-matching, dispatch

我编写了一个 bash 脚本，它将命令作为第一个位置参数，并使用 case 构造作为类似于以下的调度：

```
do_command() {
  # responds to invocation `$0 command ...`
}

do_copy() {
  # respond to invocation: `$0 copy...`
}

do_imperative() {
  # respond to invocation: `$0 imperative ...`
}

cmd=$1
shift
case $cmd in
command)
  do_command $*
  ;;
copy)
  do_copy $*
  ;;
imperative)
  do_imperative $*
  ;;
*)
  echo "Usage: $0 [ command | copy | imperative ]" >&2
  ;;
esac 
```

该脚本决定基于哪个函数调用`$1`，然后将剩余的参数传递给该函数。我想在不同的部分匹配上添加能力调度，但我想以一种优雅的方式来做到这一点（优雅的定义是一种既易于阅读又不会过于冗长以至于令人眼花缭乱或分散注意力的方式）。

显而易见的功能（但不优雅）的解决方案可能是这样的：

```
case $cmd in
command|comman|comma|comm|com)
  do_command $*
  ;;
copy|cop)
  do_copy $*
  ;;
imperative|imperativ|imperati|imperat|impera|imper|impe|imp|im|i)
  do_imperative $*
  ;;
*)
  echo "Usage: $0 [ command | copy | imperative ]" >&2
  ;;
esac 
```

如您所见，显式枚举每个命令名称的所有不同排列可能会变得非常混乱。

有那么一刻，我认为使用这样的通配符匹配可能没问题：

```
case $cmd in
com*)
  do_command $*
  ;;
cop*)
  do_copy $*
  ;;
i*)
  do_imperative $*
  ;;
*)
  echo "Usage: $0 [ command | copy | imperative ]" >&2
  ;;
esac 
```

这不那么碍眼。但是，这可能会导致不良行为，例如 where `do_command`is called when `$1`is given as "comblah" 或其他不应被视为有效参数的东西。

我的问题是：在用户可以提供任何不同截断形式的预期命令的情况下，正确调度此类命令的最优雅（如上定义）方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T14:48:57.640

## Bash 中命令调度的模式匹配

似乎你们中的一些人喜欢使用解析器在调度逻辑之前找到完整的命令匹配的想法。对于大型命令集或长词集，这可能是最好的方法。我把下面的乱七八糟的东西放在一起——它使用内置的参数扩展子字符串删除进行了 2 次传递。我似乎工作得很好，它使调度逻辑保持清晰，不会因解决部分命令而分心。我的 bash 版本是 4.1.5。

```
#!/bin/bash
resolve_cmd() {
  local given=$1
  shift
  local list=($*)
  local inv=(${list[*]##${given}*})
  local OIFS=$IFS; IFS='|'; local pat="${inv[*]}"; IFS=$OIFS
  shopt -s extglob
  echo "${list[*]##+($pat)}"
  shopt -u extglob
}
valid_cmds="start stop status command copy imperative empathy emperor"

m=($(resolve_cmd $1 $valid_cmds))
if [ ${#m[*]} -gt 1 ]; then
  echo "$1 is ambiguous, possible matches: ${m[*]}" >&2
  exit 1
elif [ ${#m[*]} -lt 1 ]; then
  echo "$1 is not a recognized command." >&2
  exit 1
fi
echo "Matched command: $m" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T10:51:37.883

我想出了以下解决方案，它应该适用于任何与 bourne 兼容的 shell：

```
disambiguate() {
    option="$1"
    shift
    found=""
    all=""
    comma=""
    for candidate in "$@"; do
        case "$candidate" in
            "$option"*)
                found="$candidate"
                all="$all$comma$candidate"
                comma=", "
        esac
    done    
    if [ -z "$found" ] ; then
        echo "Unknown option $option: should be one of $@" >&2
        return 1;
    fi
    if [ "$all" = "$found" ] ; then
        echo "$found"
    else
        echo "Ambigious option $option: may be $all" >&2
        return 1
    fi
}    
foo=$(disambiguate "$1" lorem ipsum dolor dollar)
if [ -z "$foo" ] ; then exit 1; fi
echo "$foo" 
```

是的，它的源代码`disambiguate`并不漂亮，但我希望你大部分时间都不必看*这段代码。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-26T10:33:49.150

### 更新1：

**match**使用（部分）命令作为第一个位置参数调用，然后是要测试的字符串。在多个匹配中，每个部分匹配都将用大写进行提示。

```
# @pos 1 string
# @pos 2+ strings to compare against
# @ret true on one match, false on none|disambiguate match
match() {

    local w input="${1,,}" disa=();
    local len=${#input}; # needed for uppercase hints
    shift;

    for w in $*; do
        [[ "$input" == "$w" ]] && return 0;
        [[ "$w" == "$input"* ]] && disa+=($w);
    done

    if ! (( ${#disa[*]} == 1 )); then
        printf "Matches: "
        for w in ${disa[*]}; do
            printf "$( echo "${w:0:$len}" | tr '[:lower:]' '[:upper:]')${w:${len}} ";
        done
        echo "";
        return 1;
    fi

    return 0;
} 
```

使用示例。可以调整**match以打印/返回整个非消歧命令，否则****do_something_with**将需要一些逻辑来解析部分命令。（类似于我的第一个答案）

```
cmds="start stop status command copy imperative empathy emperor"

while true; do
    read -p"> " cmd
    test -z "$cmd" && exit 1;
    match $cmd $cmds && do_something_with "$cmd";
done 
```

### 第一个答案：案例方法；使用前需要一些逻辑，以解决消除歧义的部分匹配。

```
#!/bin/bash
# script.sh

# set extended globbing, in most shells it's not set by default
shopt -s extglob;

do_imperative() {
    echo $*;
}

case $1 in
    i?(m?(p?(e?(r?(a?(t?(i?(v?(e))))))))))
        shift;
        do_imperative $*;
        ;;
    *)
        echo "Error: no match on $1";
        exit 1;
        ;;
esac

exit 0; 
```

**i** , **im** , **imp**直到**命令式**匹配。shift 会将第二个位置参数设置为第一个，含义；如果脚本被称为：

```
./script.sh imp say hello 
```

将解决成

```
do_imperative say hello 
```

如果您希望进一步解析速记命令，也可以在函数中使用相同的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-09T16:33:39.250

这是一个仅适用于 bash 的简单（甚至可能是优雅的）解决方案，因为它依赖于特定于 bash 的`compgen`命令。

此版本假定始终调用操作函数，`do_X`其中`X`命令名称为。在调用该函数之前，需要设置`$commands`一个以空格分隔的合法命令列表；假设合法命令将是简单的单词，因为函数名称不能包含特殊字符。

```
doit () {
    # Do nothing if there is no command
    if (( ! $# )); then return 0; fi;
    local cmd=$1
    shift
    local -a options=($(compgen -W "$commands" "$cmd"));
    case ${#options[@]} in 
        0)
            printf "Unrecognized command '%b'\n" "$cmd" >> /dev/stderr;
            return 1
        ;;
        1)
            # Assume that the action functions all have a consistent name
            "do_$options" "$@"
        ;;
        *)
            printf "Ambigous command '%b'. Possible completions:" "$cmd";
            printf " %s" "${options[@]}";
            printf "\n";
            return 1
        ;;
    esac
}

do_command () { printf "command %s\n" "$@"; }
do_copy () { printf "copy %s\n" "$@"; }
do_imperative () { printf "imperative %s\n" "$@"; }
commands="command copy imperative" 
```

试运行：

```
$ doit cop a "b c"
copy a
copy b c
$ doit comfoo a "b c"
Unrecognized command 'comfoo'
$ doit co a "b c"
Ambigous command 'co'. Possible completions: command copy
$ doit i a "b c" 
```

如果您确信没有`do_X`可用的杂散变量，您也可以使用`compgen`来制作命令列表：

```
command=$(compgen -Afunction do_ | cut -c4-) 
```

或者，您可以使用相同的系统来制作解析器，然后使用正常的 case 语句处理返回的选项：

```
# resolve cmd possible-commands
resolve () {
    # Fail silently if there is no command
    if [[ -z $1 ]]; then return 1; fi;
    local cmd=$1
    shift
    local commands="$*"
    local -a options=($(compgen -W "$commands" "$cmd"));
    case ${#options[@]} in 
        0)
            printf "Unrecognized command '%b'\n" "$cmd" >> /dev/stderr;
            return 1
        ;;
        1)
            echo $options
            return 0
        ;;
        *)
            printf "Ambigous command '%b'. Possible completions:" "$cmd";
            printf " %s" "${options[@]}";
            printf "\n";
            return 1
        ;;
    esac
}

$ resolve com command copy imperative && echo OK
command
OK
$ resolve co command copy imperative && echo OK
Ambigous command 'co'. Possible completions: command copy
$ resolve copx command copy imperative && echo OK
Unrecognized command 'copx' 
```

目的是编写如下内容：

```
cmd=$(resolve "$1" "$commands") || exit 1
case "$cmd" in
  command) 
# ... 
```

# jqgrid - JQgrid：如果填充一列，则更改整行的字体颜色

> ID：14908962
> 
> 赞同：2
> 
> 时间：2013-02-16T09:47:13.963
> 
> 标签：jqgrid, fonts, compiler-errors, jqgrid-formatter

我已经阅读了一些帖子，但由于我是 jqgrid 的新手，我仍然无法关注。我有一个 jqgrid，它有 5 列，但一开始是空的。做一些更新后，它会被填满。

我希望 JQgrid 更改此行的字体颜色，因此如果填充此行，则将字体颜色更改为蓝色。

```
jQuery("#list").jqGrid({
....
colModel :[ 
        {name:'prob_id', index:'prob_id', hidden:true, width:10}, 
        {name:'Model',index:'Model',width:100,editable:true,search:true,stype:'text',searchoption:{sopt:['cn']}}, 
        {name:'Serial', index:'Serial',width:80,editable:true,search:true,stype:'text',searchoptions:{sopt:['cn']}},
        {name:'Lotno', index:'Lotno', width:50, editable:true,
                 search:true,
                 stype:'text',
                 searchoption:{sopt:['cn']}},
        {name:'Detail', index:'Detail', hidden:true,width:70,formatter:myformat}
                                        ],
....

function myformat ( cellvalue, options, rowObject )
                {
                        if (!empty(cellvalue)){
                        return '<font color="blue">' + cellvalue + '</font>';//or use classes
                        } else{
                        return '<font color="black">' + cellvalue + '</font>';//or use classes
                        }
                } 
```

我想更改具有详细信息字段值的所有行的字体颜色

但我收到一个错误：

```
empty is not defined 
```

* * *

更新

试试这种方式：我决定将条件移动到：

```
function myformat ( cellvalue, options, rowObject )
                {
                        if (cellvalue == "closed"){
                        return '<font color="blue">' + cellvalue + '</font>';//or use classes
                        } else{
                        return '<font color="black">' + cellvalue + '</font>';//or use classes
                        }
                } 
```

它有效，但似乎只有一列变成蓝色，我想要有条件的整行`CLOSED`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T04:07:38.383

在下面给出的代码中尝试 afterInsertRow 和 setRowData

```
 afterInsertRow: function(rowid, rowData, rowelem) {
   var detail= rowData['Detail'];
   if(detail=="Closed"){
$(this).jqGrid('setRowData', rowid, false, { color: '#000' });
  }else {
$(this).jqGrid('setRowData', rowid, false, { color: '#FF0000' });
    }
    }, 
```

删除 gridView:true （如果 gridView 为 true，则 afterInsertRow 将不起作用）

# html - 连简单的下拉菜单都做不出来

> ID：14908976
> 
> 赞同：1
> 
> 时间：2013-02-16T09:49:07.047
> 
> 标签：html, css, drop-down-menu

我正在尝试为下拉菜单和所有其他内容制作布局。我只是想不出最简单和最干净的方法。我的菜单被隐藏了，因为我的标题溢出被隐藏了。如果我将其设置为自动，所有内容都会变得疯狂。请帮帮我。

[http://codepen.io/luzlol/pen/hbijI](http://codepen.io/luzlol/pen/hbijI) — 我在这里尝试。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T10:04:31.140

下拉列表仍然是标题的一部分，即使它的定位是绝对的，所以无论要显示在标题**之外**但实际上是**在里面**，都需要可见。

```
header {
  background: blue;
  overflow: visible;
} 
```

[**演示**](http://codepen.io/anon/pen/qpcja)

要定位`absolute`元素，您需要使用`top left right bottom`.

例子：

`top:10px;`：将其向底部移动 10 像素。 `left:30px;`: 向右移动 30 像素。

# python - 在opencv和python中复制图像的一部分

> ID：14908986
> 
> 赞同：0
> 
> 时间：2013-02-16T09:50:30.733
> 
> 标签：python, opencv, image-processing

我正在尝试通过识别原始图像的模板，然后复制与这些模板匹配的区域，使用 opencv 将图像拆分为多个子图像。我是opencv的新手！我使用以下方法识别了子图像：

```
result = cv2.matchTemplate(img, template, cv2.TM_CCORR_NORMED) 
```

经过一些清理后，我得到一个称为点的元组列表，我在其中迭代以显示矩形。tw 和 th 分别是模板的宽度和高度。

```
for pt in points:
    re = cv2.rectangle(img, pt, (pt[0] + tw, pt[1] + th), 0, 2)
    print('%s, %s' % (str(pt[0]), str(pt[1])))
    count+=1 
```

我想要完成的是将八边形（[https://dl.dropbox.com/u/239592/region01.png](https://dl.dropbox.com/u/239592/region01.png)）保存到单独的文件中。

我怎样才能做到这一点？我读过一些关于轮廓的东西，但我不知道如何使用它。理想情况下，我想勾勒出八角形的轮廓。

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T15:50:29.427

如果模板匹配对您有用，请坚持下去。例如，我考虑了以下模板：

![在此处输入图像描述](../Images/811aa722dbd946c50ac9a905ea5caad5.png)

然后，我们可以对输入进行预处理，使其成为二进制并丢弃小组件。在这一步之后，进行模板匹配。然后是通过丢弃接近的匹配来过滤匹配的问题（我为此使用了一种虚拟方法，因此如果匹配太多，您可能会看到它需要一些时间）。在我们确定哪些点相距很远（从而识别出不同的六边形）之后，我们可以通过以下方式对它们进行微调：

*   按y坐标排序；
*   如果两个相邻项目的 y 坐标开始太近，则将它们都设置为相同的 y 坐标。

现在您可以按适当的顺序对该点列表进行排序，以便以光栅顺序完成作物。使用提供的切片很容易实现裁剪部分`numpy`。

```
import sys
import cv2
import numpy

outbasename = 'hexagon_%02d.png'

img = cv2.imread(sys.argv[1])
template = cv2.cvtColor(cv2.imread(sys.argv[2]), cv2.COLOR_BGR2GRAY)
theight, twidth = template.shape[:2]

# Binarize the input based on the saturation and value.
hsv = cv2.cvtColor(img, cv2.COLOR_BGR2HSV)
saturation = hsv[:,:,1]
value = hsv[:,:,2]
value[saturation > 35] = 255
value = cv2.threshold(value, 0, 255, cv2.THRESH_OTSU)[1]
# Pad the image.
value = cv2.copyMakeBorder(255 - value, 3, 3, 3, 3, cv2.BORDER_CONSTANT, value=0)

# Discard small components.
img_clean = numpy.zeros(value.shape, dtype=numpy.uint8)
contours, _ = cv2.findContours(value, cv2.RETR_LIST, cv2.CHAIN_APPROX_SIMPLE)
for i, c in enumerate(contours):
    area = cv2.contourArea(c)
    if area > 500:
        cv2.drawContours(img_clean, contours, i, 255, 2)

def closest_pt(a, pt):
    if not len(a):
        return (float('inf'), float('inf'))
    d = a - pt
    return a[numpy.argmin((d * d).sum(1))]

match = cv2.matchTemplate(img_clean, template, cv2.TM_CCORR_NORMED)

# Filter matches.
threshold = 0.8
dist_threshold = twidth / 1.5
loc = numpy.where(match > threshold)
ptlist = numpy.zeros((len(loc[0]), 2), dtype=int)
count = 0
print "%d matches" % len(loc[0])
for pt in zip(*loc[::-1]):
    cpt = closest_pt(ptlist[:count], pt)
    dist = ((cpt[0] - pt[0]) ** 2 + (cpt[1] - pt[1]) ** 2) ** 0.5
    if dist > dist_threshold:
        ptlist[count] = pt
        count += 1

# Adjust points (could do for the x coords too).
ptlist = ptlist[:count]
view = ptlist.ravel().view([('x', int), ('y', int)])
view.sort(order=['y', 'x'])
for i in xrange(1, ptlist.shape[0]):
    prev, curr = ptlist[i - 1], ptlist[i]
    if abs(curr[1] - prev[1]) < 5:
        y = min(curr[1], prev[1])
        curr[1], prev[1] = y, y

# Crop in raster order.
view.sort(order=['y', 'x'])
for i, pt in enumerate(ptlist, start=1):
    cv2.imwrite(outbasename % i,
            img[pt[1]-2:pt[1]+theight-2, pt[0]-2:pt[0]+twidth-2])
    print 'Wrote %s' % (outbasename % i) 
```

如果您只想要六边形的轮廓，则裁剪`img_clean`而不是`img`（但按光栅顺序对六边形进行排序是没有意义的）。

这是在不修改上面代码的情况下为您的两个示例剪切的不同区域的表示：

![在此处输入图像描述](../Images/65c4333f8f61f9ee9a9582b46e36f75d.png) ![在此处输入图像描述](../Images/2953b66018458fbcf4b39c38565a94b4.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T11:46:00.193

对不起，我不明白你的问题是如何关联 matchTemplate 和 Contours。

无论如何，下面是一个使用轮廓的小技巧。假设您的其他图像也与您提供的图像相同。我不确定它是否适用于您的其他图像。但我认为这将有助于创业。自己尝试一下并进行必要的调整和修改。

我做了什么 ：

1 - 我需要八边形的边缘。因此，使用 Otsu 的阈值图像并应用膨胀和腐蚀（或使用您喜欢的任何适用于所有图像的方法，`beware of the edges in left edge of image`）。

2 - 然后找到轮廓（更多关于轮廓：http: [//goo.gl/r0ID0](http://goo.gl/r0ID0)

3 - 对于每个轮廓，找到它的凸包，找到它的面积（A）和周长（P）

4 - 对于一个**完美的八角形**，`P*P/A = 13.25 approximately`. 我在这里使用它并剪切并保存它。

5 - 你可以看到裁剪它也去除了八角形的一些边缘。如果需要，请调整裁剪尺寸。

代码 ：

```
import cv2
import numpy as np

img = cv2.imread('region01.png')
gray = cv2.cvtColor(img,cv2.COLOR_BGR2GRAY)
ret,thresh = cv2.threshold(gray,0,255,cv2.THRESH_BINARY_INV+cv2.THRESH_OTSU)
thresh = cv2.dilate(thresh,None,iterations = 2)
thresh = cv2.erode(thresh,None)

contours,hierarchy = cv2.findContours(thresh,cv2.RETR_LIST,cv2.CHAIN_APPROX_SIMPLE)
number = 0

for cnt in contours:
    hull = cv2.convexHull(cnt)
    area = cv2.contourArea(hull)
    P = cv2.arcLength(hull,True)

    if ((area != 0) and (13<= P**2/area <= 14)):
        #cv2.drawContours(img,[hull],0,255,3)
        x,y,w,h = cv2.boundingRect(hull)
        number = number + 1
        roi = img[y:y+h,x:x+w]
        cv2.imshow(str(number),roi)
        cv2.imwrite("1"+str(number)+".jpg",roi)

cv2.imshow('img',img)
cv2.waitKey(0)
cv2.destroyAllWindows() 
```

这 6 个八边形将存储为单独的文件。

希望能帮助到你 ！！！

# asp.net - umbraco 中的导航菜单

> ID：14908990
> 
> 赞同：0
> 
> 时间：2013-02-16T09:51:09.617
> 
> 标签：asp.net, xslt, content-management-system, umbraco

我正在使用 umbraco cms。在这里，我在多语言网站的导航菜单中遇到问题。我的 xslt 文件代码如下。它只呈现英文菜单。我是 umbraco 的新手。那么任何人都可以告诉我，我必须在哪里更改此代码以使其根据不同的语言正常工作。我的代码是

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE xsl:stylesheet [
  <!ENTITY nbsp "&#x00A0;">
]>
<xsl:stylesheet
  version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:msxml="urn:schemas-microsoft-com:xslt"
  xmlns:umbraco.library="urn:umbraco.library" xmlns:Exslt.ExsltCommon="urn:Exslt.ExsltCommon" xmlns:Exslt.ExsltDatesAndTimes="urn:Exslt.ExsltDatesAndTimes" xmlns:Exslt.ExsltMath="urn:Exslt.ExsltMath" xmlns:Exslt.ExsltRegularExpressions="urn:Exslt.ExsltRegularExpressions" xmlns:Exslt.ExsltStrings="urn:Exslt.ExsltStrings" xmlns:Exslt.ExsltSets="urn:Exslt.ExsltSets"
  exclude-result-prefixes="msxml umbraco.library Exslt.ExsltCommon Exslt.ExsltDatesAndTimes Exslt.ExsltMath Exslt.ExsltRegularExpressions Exslt.ExsltStrings Exslt.ExsltSets ">

  <xsl:output method="xml" omit-xml-declaration="yes" indent="yes"/>

  <xsl:param name="currentPage"/>
  <xsl:variable name="rootPage" select="$currentPage/ancestor-or-self::root"/>
    <xsl:variable name="siteRoot" select="$currentPage/ancestor-or-self::*[@level = 1]" />
  <xsl:variable name="propertyAlias" select="/macro/PropertyAlias"/>

  <xsl:template match="/">

    <xsl:variable name="homepage" select="$currentPage/ancestor-or-self::Homepage"/>
    <xsl:variable name="nodeIds" select="umbraco.library:Split($homepage/*[name()=$propertyAlias],',')" />

      <ul class="navigation fc">
        <xsl:for-each select="$nodeIds/value">
        <xsl:variable name="linkNone" select="$rootPage//*[@isDoc][@id = string(current()/.)]"/>
        <xsl:if test="string-length($linkNone/@id)> 0">
        <li>
            <xsl:attribute name="class">
              <xsl:if test="$currentPage/ancestor-or-self::*[@level &gt; 1]/@id = $linkNone/@id">
            <xsl:text>selected</xsl:text>
              </xsl:if>
              <xsl:if test="position() = last()">
                <xsl:text> last</xsl:text>
              </xsl:if>

            </xsl:attribute>

          <xsl:choose>
            <xsl:when test="string-length($linkNone/umbracoUrlAlias) > 0">
              <a href="{$linkNone/umbracoUrlAlias}">
                <xsl:value-of select="$linkNone/@nodeName"/>
              </a>
              <xsl:if test="position() != last()">
                <xsl:text> | </xsl:text>
              </xsl:if>              
            </xsl:when>
            <xsl:otherwise>
              <a href="{umbraco.library:NiceUrl($linkNone/@id)}">
                <xsl:value-of select="$linkNone/@nodeName"/>
              </a>
              <xsl:if test="position() != last()">
                <xsl:text> | </xsl:text>
              </xsl:if>      
            </xsl:otherwise>
          </xsl:choose>

        </li>
        </xsl:if>
      </xsl:for-each>

      </ul>
  </xsl:template>

</xsl:stylesheet>​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T21:08:27.313

您永远不应该使用 $rootPage 。对于多语言或多站点，您希望在当前内容 ($siteRoot) 上方的主页处停止。

看起来您的导航是由主页上的选择器选择的。有什么理由不让内容树结构决定导航？在这种情况下可能会更简单。

如果这没有帮助，请发布您的内容树结构示例。

# ruby-on-rails - 从生产日志中恢复 Redmine 数据

> ID：14908995
> 
> 赞同：0
> 
> 时间：2013-02-16T09:51:47.877
> 
> 标签：ruby-on-rails, ruby, logging, redmine

我在 Redmine 有一个项目，有 600 多个问题。我将所有问题移至另一个项目。我不知道此举会删除自定义字段的所有数据！

因此，所有自定义字段值现在都丢失了。在此操作之前我没有备份数据库，因为我真的不认为移动问题会造成任何伤害，因为移动是 UI 中的本机功能。

我注意到的是，production.log 包含所有创建和更新的事件。我所有的 600 个问题都在生产日志中。如何使用这些日志语句来重复操作？如果我可以导入所有日志操作，我可以将它写入的自定义字段迁移到原始 Redmine 实例并恢复我的值。

条目如下所示：

```
Processing IssuesController#update (for XX.XX.XX.X at 2013-02-07 11:19:54) [PUT]
Parameters: {"_method"=>"put", "authenticity_token"=>"nWNSSRYjHhN0BGb+Ya8M4pYWPPgsfdM=", "issue"=>{"assigned_to_id"=>"", "custom_field_values"=>{"10"=>"", "5"=>"Not translated", "1"=>"fi", "8"=>"http://screencast.com/t/ODknR8K", "9"=>"", "3"=>"", "4"=>""}, "done_ratio"=>"0", "due_date"=>"", "priority_id"=>"4", "estimated_hours"=>"", "start_date"=>"2013-02-07", "subject"=>"1\tInstallation in English", "tracker_id"=>"1", "lock_version"=>"0", "description"=>"Steps:\r\nOpen Nitro\r\n\r\nProblem:\r\nNot localized"}, "controller"=>"issues", "time_entry"=>{"hours"=>"", "activity_id"=>"", "comments"=>""}, "attachments"=>{"1"=>{"description"=>""}}, "id"=>"3876", "action"=>"update", "commit"=>"Submit", "notes"=>""} 
```

我真的希望有办法，任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T10:07:33.880

您可以使用像样的文本编辑器和/或电子表格应用程序并进行大量查找和替换，并构建一系列 UPDATE SQL 命令并直接在数据库上运行它们（测试优先！！）

*   从日志中提取
*   删除不必要的信息
*   复制到电子表格
*   将文本拆分为列
*   添加具有必要 SQL 命令“UPDATE SET 等”复制到该列的所有行等的列。
*   连接列以使每行一个文本命令
*   将连接的数据导出到文本文件
*   以 sql 对测试数据库运行
*   如果一切顺利，以 sql 形式针对生产数据库运行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T11:10:12.063

“参数：”之后的日志条目看起来像一个常规的 Ruby 哈希定义。我会将其解析出来并将`eval`其返回为哈希变量。

从那里你需要剥离元素并将它们插入数据库。我会使用 Sequel 来做到这一点，但使用适合你的。

与 RedMine 支持人员交谈并获取他们的表的架构，以便您了解哪些数据在哪里以及所需的数据库驱动程序。