# StackOverflow 问答 13553000-13553999

# tsql - SQL Server CE 中的 STUFF((SELECT......)) 函数出现 T-SQL 错误

> ID：13553001
> 
> 赞同：1
> 
> 时间：2012-11-25T16:30:33.167
> 
> 标签：tsql

在 Visual Studio 2008 中使用 SQL Server CE，我尝试像这样查询数据库：

```
select          
   [INTESTAZIONE Ente], 
   [INTESTAZIONE Tipo],
   [INTESTAZIONE Anno], 
   [INTESTAZIONE Protocollo], 
   COUNT([Mittenti Mittente]) AS [N.MITTENTI],
   [Mittenti Mittente] AS [MITTENTI],
   STUFF(
           (SELECT ',' + [Mittenti Mittente] AS [ELENCO MITTENTI]
            FROM ElencoMittenti
            WHERE [ElencoMittenti.[Mittenti  Mittente]] = [Elenco_Ricorsi.[Mittenti Mittente]]
            FOR XML PATH('')), 1, 1, '' ) AS [RISULTATO]
from    
   Elenco_Ricorsi
group by 
   [INTESTAZIONE Ente], [INTESTAZIONE Tipo],[INTESTAZIONE Anno], 
   [INTESTAZIONE Protocollo], [Mittenti Mittente] 
```

我需要`STUFF((SELECT.....)`命令来构建一个数组作为这个查询的结果。

此查询给出错误：

> *错误中的令牌 = SELECT”，问题来自嵌套的“选择”*

我已经读过这也可以用 SQL Server Compact Edition 来做，所以我认为我在查询中犯了一些错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T15:28:14.740

引用表格时，您的括号位于错误的位置，您需要将方括号括在 [tablename].[columnname] 周围，我提供了一个应该可以使用的修改版本：

```
 SELECT  [INTESTAZIONE Ente] ,
        [INTESTAZIONE Tipo] ,
        [INTESTAZIONE Anno] ,
        [INTESTAZIONE Protocollo] ,
        COUNT([Mittenti Mittente]) AS [N.MITTENTI] ,
        [Mittenti Mittente] AS [MITTENTI] ,
        STUFF(( SELECT  ',' + [Mittenti Mittente] AS [ELENCO MITTENTI]
                FROM    ElencoMittenti
                WHERE   [ElencoMittenti].[Mittenti  Mittente] = [Elenco_Ricorsi].[Mittenti Mittente]
              FOR
                XML PATH('')
              ), 1, 1, '') AS [RISULTATO]
FROM    Elenco_Ricorsi
GROUP BY [INTESTAZIONE Ente] ,
        [INTESTAZIONE Tipo] ,
        [INTESTAZIONE Anno] ,
        [INTESTAZIONE Protocollo] ,
        [Mittenti Mittente] 
```

# c# - Castle DynamicProxy 拦截器在不同程序集上存在问题

> ID：13553004
> 
> 赞同：5
> 
> 时间：2012-11-25T16:30:48.520
> 
> 标签：c#, castle-dynamicproxy

我有这样的场景：

我正在使用拦截器来捕获对主项目引用的程序集内部类（我们称之为功能）的调用。程序集功能由 NuGet 安装（它不是公开的，而是我们内部的）并引用了另一个程序集（我们称之为核心）。主要项目也引用了程序集核心。核心包含用作被拦截方法之一的参数类型的类定义。

只要主项目和功能引用相同版本的核心库，这一切都可以正常工作。当这个版本不同并且被拦截的方法使用 Core 中的类型作为方法参数时，就会出现问题。

在这种情况下，会引发异常，指出`A strongly-named assembly is required.`：

```
[FileLoadException: Could not load file or assembly 'Core, Version=0.2.2.30, Culture=neutral, PublicKeyToken=null' or one of its dependencies. A strongly-named assembly is required. (Exception from HRESULT: 0x80131044)] 
 Castle.Proxies.Invocations.IBasketService_Update.InvokeMethodOnTarget() +0
 Castle.DynamicProxy.AbstractInvocation.Proceed() +116
 Project.Basket.BasketServiceUpdatedInterceptor.Intercept(IInvocation invocation) in c:\(...)\Basket\BasketServiceUpdatedInterceptor.cs:20
 Castle.DynamicProxy.AbstractInvocation.Proceed() +604
 Castle.Proxies.IBasketServiceProxy.Update(ProductId productId, UInt16 quantity) +210 (...) 
```

Core 0.2.2.30 的版本是程序集 Feature 所期望的版本，主项目使用例如版本 0.2.2.31。Castle DynamicProxy 无法找到版本为 0.2.2.30 的 Core，这是正确的，因为该确切的程序集未部署到 bin 文件夹。

请注意，在我们的场景中，不同版本的 Core 是完全正常的情况。功能程序集预期的版本高于指定的版本 - 不是确切的版本。

我不确定 DynamicProxy 在它的装配期望中是否应该不那么严格，我是否必须接受这个限制。我编写了简单的代理类来克服这个问题，所以它不再阻止我，但它阻止我们在我们的解决方案中使用 DynamicProxy。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T01:01:37.453

该问题是由于 DP 是针对已签名程序集生成的，然后正在使用程序集的未签名版本。

解决方案是确保在这两种情况下都使用签名程序集，或者强制 DynamicProxy 仅生成未签名程序集。

# autoloader - 加载几个类。如何使用 Restler3 AutoLoader？

> ID：13553007
> 
> 赞同：1
> 
> 时间：2012-11-25T16:31:15.683
> 
> 标签：autoloader, restler

**第一：**
感谢您提供的这个伟大的“Restler”！

**我的背景：**
我使用 Restler 3 构建我自己的 API 并返回我的用户的总分（在游戏上）。示例 : "www.mysite.com/api/score/12345" => 返回用户 id "12345" 的总分（json 对象）

但是，要获得总分（来自不同的游戏），我需要使用我自己的库（称为“scorers”）及其类：
- vendor/damGames/scorers/scoreGameA.class.php
- vendor/damGames/scorers/ scoreGameB.class.php
- 供应商/damGames/scorers/scoreGameC.class.php
- 等等...

**我的问题是：**
要加载我的库的类，我应该使用“Luracast\Restler\AutoLoader”吗？我不明白怎么...否则，我该怎么办？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T18:16:06.150

**我找到的唯一解决方案：在名为“** *Score*
” 的 Restler 类的第一行中，我输入：

 *```
use Luracast\Restler\RestException;
use damGames\scorers\scoreGameA;
use damGames\scorers\scoreGameB;
use damGames\scorers\scoreGameC;
... 
```

这是一个好方法吗？你有更好的吗？*

# java - 查找数组中出现次数最多的元素 [java]

> ID：13553009
> 
> 赞同：8
> 
> 时间：2012-11-25T16:32:08.787
> 
> 标签：java

我必须在双数组中找到出现次数最多的元素。我是这样做的：

```
int max = 0;
for (int i = 0; i < array.length; i++) {
       int count = 0;
       for (int j = 0; j < array.length; j++) {
         if (array[i]==array[j])
             count++;
   }
  if (count >= max)
      max = count;
 } 
```

程序可以运行，但是太慢了！我必须找到更好的解决方案，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-25T16:34:45.717

**更新：**

*   正如 Maxim 所指出的，在这里使用[HashMap](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)将是比[Hashtable](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Hashtable.html)更合适的选择。
*   这里的假设是您不关心并发性。如果需要同步访问，请改用[ConcurrentHashMap](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ConcurrentHashMap.html)。

* * *

您可以使用[HashMap](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)来计算双精度数组中每个唯一元素的出现次数，这将：

*   以线性**O(n)**时间运行，并且
*   需要**O(n)**空间

**伪代码**将是这样的：

*   遍历数组的所有元素一次：**O(n)**
    *   对于访问的每个元素，检查其键是否已存在于 HashMap 中：**O(1)，已摊销**
    *   如果没有（第一次看到这个元素），那么将它作为 [key: this element, value: 1] 添加到你的 HashMap 中。**O(1)**
    *   如果确实存在，则将键对应的值加 1。**O(1)，摊销**
*   完成构建 HashMap 后，遍历映射并找到具有最高关联值的键 - 这就是出现次数最多的元素。**在）**

**部分代码解决方案**，让您了解如何使用 HashMap：

```
import java.util.HashMap;
...

    HashMap hm = new HashMap();
    for (int i = 0; i < array.length; i++) {
        Double key = new Double(array[i]);
        if ( hm.containsKey(key) ) {
            value = hm.get(key);
            hm.put(key, value + 1);
        } else {
            hm.put(key, 1);
        }
    } 
```

我将作为练习离开，以了解如何在之后遍历 HashMap 以找到具有最高值的键；但如果你遇到困难，只需添加另一条评论，我会给你更多提示 =)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-25T16:42:17.157

使用`Collections.frequency`选项：

```
 List<String> list = Arrays.asList("1", "1","1","1","1","1","5","5","12","12","12","12","12","12","12","12","12","12","8");
      int max = 0;
      int curr = 0;
      String currKey =  null;
      Set<String> unique = new HashSet<String>(list);

          for (String key : unique) {
                curr = Collections.frequency(list, key);

               if(max < curr){
                 max = curr;
                 currKey = key;
                }
            }

          System.out.println("The number "  + currKey + " happens " + max + " times"); 
```

输出：

`The number 12 happens 10 times`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-05-07T12:29:36.763

Java 8 的解决方案

```
 int result = Arrays.stream(array)
           .boxed()
           .collect(Collectors.groupingBy(i->i,Collectors.counting()))
           .values()
           .stream()
           .max(Comparator.comparingLong(i->i))
           .orElseThrow(RuntimeException::new)); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-11-25T16:43:49.457

我会建议另一种方法。我不知道这是否会更快。

快速排序数组。使用内置的 Arrays.sort() 方法。

现在比较相邻的元素。考虑这个例子：

1 1 1 1 4 4 4 4 4 4 4 4 4 4 4 4 9 9 9 10 10 10 29 29 29 29 29 29

当相邻元素不相等时，您可以停止计算该元素。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-05-31T14:40:50.880

解决方案 1：使用 HashMap

```
class test1 {
    public static void main(String[] args) {

    int[] a = {1,1,2,1,5,6,6,6,8,5,9,7,1};
    // max occurences of an array
    Map<Integer,Integer> map = new HashMap<>();
      int max = 0 ; int chh = 0 ;
      for(int i = 0 ; i < a.length;i++) {
          int ch = a[i];
          map.put(ch, map.getOrDefault(ch, 0) +1);
      }//for
      Set<Entry<Integer,Integer>> entrySet =map.entrySet();

      for(Entry<Integer,Integer> entry : entrySet) {
          if(entry.getValue() > max) {max = entry.getValue();chh = entry.getKey();}

      }//for
    System.out.println("max element => " + chh);
    System.out.println("frequency => " + max);
    }//amin
}
/*output =>
max element => 1
frequency => 4

*/ 
```

解决方案 2：使用计数数组

```
public class test2 {
    public static void main(String[] args) {
         int[] a = {1,1,2,1,5,6,6,6,6,6,8,5,9,7,1};
    int max = 0 ; int chh = 0;
    int count[] = new int[a.length];
    for(int i = 0 ; i <a.length ; i++) {
        int ch = a[i];
        count[ch] +=1 ;
    }//for

    for(int i = 0 ; i <a.length ;i++)  {
        int ch = a[i];
        if(count[ch] > max) {max = count[ch] ; chh = ch ;}
    }//for
         System.out.println(chh); 
    }//main
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-08-13T10:49:34.757

这是一个Java解决方案-

```
 List<Integer> list = Arrays.asList(1, 2, 2, 3, 2, 1, 3);
        Set<Integer> set = new HashSet(list);
        int max = 0;
        int maxtemp;
        int currentNum = 0;
        for (Integer k : set) {
            maxtemp = Math.max(Collections.frequency(list, k), max);
            currentNum = maxtemp != max ? k : currentNum;
            max = maxtemp;
        }
        System.out.println("Number :: " + currentNum + " Occurs :: " + max + " times"); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-08-09T18:00:33.447

```
int[] array = new int[] { 1, 2, 4, 1, 3, 4, 2, 2, 1, 5, 2, 3, 5 };

Long max = Arrays.stream(array).boxed().collect(Collectors.groupingBy(i -> i, Collectors.counting())).values()
                .stream().max(Comparator.comparing(Function.identity())).orElse(0L); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-07-11T15:06:00.520

```
public static void main(String[] args) {

   int n;

   int[] arr;

    Scanner in = new Scanner(System.in);
    System.out.println("Enter Length of Array");
    n = in.nextInt();
    arr = new int[n];
    System.out.println("Enter Elements in array"); 

    for (int i = 0; i < n; i++) {
        arr[i] = in.nextInt();
    }

    int greatest = arr[0];

    for (int i = 0; i < arr.length; i++) {
        if (arr[i] > greatest) {
            greatest = arr[i];
        }

    } 

    System.out.println("Greatest Number " + greatest);

    int count = 0;

    for (int i = 0; i < arr.length; i++) {
        if (greatest == arr[i]) {
            count++;
        }
    }

    System.out.println("Number of Occurance of " + greatest + ":" + count + " times");

    in.close();
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-10-26T17:23:57.333

继续您编写的伪代码，请尝试以下编写的代码：-

```
public static void fetchFrequency(int[] arry) {
        Map<Integer, Integer> newMap = new TreeMap<Integer, Integer>(Collections.reverseOrder());
        int num = 0;
        int count = 0;
        for (int i = 0; i < arry.length; i++) {
            if (newMap.containsKey(arry[i])) {
                count = newMap.get(arry[i]);
                newMap.put(arry[i], ++count);
            } else {
                newMap.put(arry[i], 1);
            }
        }
        Set<Entry<Integer, Integer>> set = newMap.entrySet();
        List<Entry<Integer, Integer>> list = new ArrayList<Entry<Integer, Integer>>(set);
        Collections.sort(list, new Comparator<Map.Entry<Integer, Integer>>() {

            @Override
            public int compare(Entry<Integer, Integer> o1, Entry<Integer, Integer> o2) {
                return (o2.getValue()).compareTo(o1.getValue());
            }
        });

        for (Map.Entry<Integer, Integer> entry : list) {
            System.out.println(entry.getKey() + " ==== " + entry.getValue());
            break;
        }
        //return num;
    } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-02-25T05:45:54.283

这就是我在java中实现的方式..

```
import java.io.*;
class Prog8
{
    public static void main(String[] args) throws IOException 
    {
        BufferedReader br=new BufferedReader(new InputStreamReader(System.in));
        System.out.println("Input Array Size:");
        int size=Integer.parseInt(br.readLine());
        int[] arr= new int[size];
        System.out.println("Input Elements in Array:");
        for(int i=0;i<size;i++)
            arr[i]=Integer.parseInt(br.readLine());
        int max = 0,pos=0,count = 0;
        for (int i = 0; i < arr.length; i++)
        {
            count=0;
            for (int j = 0; j < arr.length; j++) 
            {
                if (arr[i]==arr[j])
                    count++;
            }
            if (count >=max)
            {
                max = count;
                pos=i;
            }
        }

        if(max==1)
            System.out.println("No Duplicate Element.");
        else
            System.out.println("Element:"+arr[pos]+" Occourance:"+max);
    }
} 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2017-10-06T04:39:11.973

您可以在一个循环中解决此问题，而无需使用 HashMap 或 O(1) 空间复杂度的任何其他数据结构。

初始化两个变量 count = 0 和 max = 0（如果数组中有负数，则初始化 Integer.MIN_VALUE）

这个想法是您将扫描数组并检查当前数字，

*   如果它小于你当前的最大值......那么什么都不做
*   如果它等于您的最大值 ...然后增加计数变量
*   如果它大于您的最大值..然后将最大值更新为当前数字并将计数设置为 1

代码：

```
int max = 0, count = 0;
for (int i = 0; i < array.length; i++) {
    int num = array[i];
    if (num == max) {
        count++;
    } else if (num > max) {
        max = num;
        count = 1;
    }
} 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2020-08-12T16:19:28.740

这是 Ruby 解决方案：

```
def maxOccurence(arr)
  m_hash = arr.group_by(&:itself).transform_values(&:count)
  elem = 0, elem_count = 0
  m_hash.each do |k, v|
    if v > elem_count
        elem = k
        elem_count = v
    end
  end
  "#{elem} occured #{elem_count} times"
end

p maxOccurence(["1", "1","1","1","1","1","5","5","12","12","12","12","12","12","12","12","12","12","8"]) 
```

输出：

```
"12 occured 10 times" 
```

# java - 爪哇；具有用户定义长度的新创建数组上的空指针

> ID：13553014
> 
> 赞同：0
> 
> 时间：2012-11-25T16:32:49.817
> 
> 标签：java

所以，在公共类声明之后，我声明了一个数组，如下所示：

```
public String[] accept; 
```

从这里开始，我希望获取用户输入以查看该数组应该有多长 - 然后，我们将进入一个循环以使用字符串填充数组。我将以下内容放入一个方法中；

```
if (scanner.hasNextInt()) {
wcount = scanner.nextInt();
//create the array.
String accept[] = new String[wcount];
}
System.out.println(accept.length); 
```

但不幸的是，不好。Java 返回；

```
Exception in thread "main" java.lang.NullPointerException 
```

显然，尝试直接进入 for 循环来填充数组也会得到相同的结果。乍一看，我假设这与它被初始化为方法本身之外的公共数组有关 - 但老实说我不太确定。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T16:35:47.933

您在 if 块中声明了一个新数组，该数组隐藏了您之前声明的数组。当块退出时，变量超出范围，您会得到一个 NPE 试图访问（未更改的）实例变量。更改您的代码以实际初始化您的实例变量，如下所示：

```
if (scanner.hasNextInt()) {
    wcount = scanner.nextInt();

    //create the array.
    accept = new String[wcount];
}
System.out.println(accept.length); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T16:36:05.210

您正在重新创建一个新`accept []`的局部变量。改变你的循环如下

```
if (scanner.hasNextInt()) {
  wcount = scanner.nextInt();
  //create the array.
  accept = new String[wcount];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T16:37:38.637

更改`String accept[]`为仅`accept`在`if`语句内，您将在该范围内重新声明一个新的，留下旧的`null`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T16:41:29.770

```
String accept[] = new String[wcount]; 
```

声明一个变量，并将对新字符串数组的引用存储到其中。

您可能想改用先前声明的变量。为此，只需直接使用赋值表达式：

```
accept = new String[wcount]; 
```

# c - Cuda C - 链接器错误 - 未定义的引用

> ID：13553015
> 
> 赞同：14
> 
> 时间：2012-11-25T16:33:00.953
> 
> 标签：c, cuda, linker-errors

我很难编译一个只有两个文件的简单 cuda 程序。

main.c 看起来像这样：

```
#include "my_cuda.h"

int main(int argc, char** argv){
   dummy_gpu();
} 
```

cuda.h 看起来像这样：

```
#ifndef MY_DUMMY
#define MY_DUMMY

void dummy_gpu();

#endif 
```

my_cuda.cu 文件如下所示：

```
#include <cuda_runtime.h>
#include "my_cuda.h"

__global__ void dummy_gpu_kernel(){
   //do something
}

void dummy_gpu(){
   dummy_gpu_kernel<<<128,128>>>();
} 
```

但是，如果我编译我总是收到以下错误：

```
gcc  -I/usr/local/cuda/5.0.35/include/ -c main.c
nvcc  -c my_cuda.cu
gcc  -L/usr/local_rwth/sw/cuda/5.0.35/lib64 -lcuda -lcudart -o md.exe main.o my_cuda.o 
main.o: In function `main':
main.c:(.text+0x15): undefined reference to `dummy_gpu'
collect2: ld returned 1 exit status 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-25T16:42:02.937

你有符号名称修改的问题。`nvcc`使用主机 C++ 编译器来编译主机代码，这意味着符号[名称修改](http://en.wikipedia.org/wiki/Name_mangling)应用于 CUDA 工具链发出的代码。

这个问题有两种解决方案。第一个是`dummy_gpu`使用 C 链接定义，因此将您的更改`my_cuda.cu`为以下内容：

```
extern "C" {
#include "my_cuda.h"
}

.....

extern "C"
void dummy_gpu(){
   dummy_gpu_kernel<<<128,128>>>();
} 
```

请注意，您需要将链接命令更改为：

```
gcc -L/usr/local_rwth/sw/cuda/5.0.35/lib64 -o md.exe main.o my_cuda.o -lcuda -lcudart 
```

因为需要在使用它们的目标文件*之后指定 CUDA 共享库。*

您的第二种选择是使用`g++`或`nvcc`进行链接，在这种情况下，整个问题应该消失。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-25T16:44:55.433

您有 C/C++ 链接问题。nvcc 正在以 C++ 方式装饰事物，但您的 gcc 编译器正在使用 C 样式链接处理事物。一个简单的修复方法是将你的 main.c 重命名为 main.cpp，然后使用 g++ 而不是 gcc 重复你的命令

# javascript - Json字符串数组格式日期时间字段-yyyy-MM-dd hh:mm:ss

> ID：13553017
> 
> 赞同：1
> 
> 时间：2012-11-25T16:33:35.180
> 
> 标签：javascript, arrays, vb.net, json

我有一个 json 数组字符串，我从数据库中获取数据，我需要将 DateAndTime 字段格式化为以下格式：yyyy-MM-dd hh:mm:ss，它需要是动态的作为传递的数据除了 DateAndTime 之外，通过将始终不同

以下是我到目前为止所尝试的。

ASPX

```
var chartData = <%= DataToJSONChart() %>;
var new_data = []   
for (var i = 0; i < chartData.length; i++) {
   var date = new Date(parseInt(chartData[i].DateAndTime.substr(6)));
   new_data.push(date);
 }
 chartData.tblGeneral = new_data; 
```

VB

```
Public Function DataToJSONChart() As String
Dim dt As DataTable
Dim ds As New DataSet()
ds = ChartData(4, DateTime.Parse("2012-06-01 00:00:00"), DateTime.Parse("2012-06-10 23:59:59"))
dt = ds.Tables(0)
Dim serializer As System.Web.Script.Serialization.JavaScriptSerializer = New System.Web.Script.Serialization.JavaScriptSerializer()
Dim rows As New List(Of Dictionary(Of String, Object))
Dim row As Dictionary(Of String, Object)
For Each dr As DataRow In dt.Rows
row = New Dictionary(Of String, Object)
For Each col As DataColumn In dt.Columns
row.Add(col.ColumnName, dr(col))
Next
rows.Add(row)
Next
serializer.MaxJsonLength = Int32.MaxValue
Return serializer.Serialize(rows)
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T18:12:33.120

您可以通过在服务器端检查其列名来格式化*DateTime*：

```
For Each dr As DataRow In dt.Rows
    row = New Dictionary(Of String, Object)
    For Each col As DataColumn In dt.Columns
        If col.ColumnName = "DateTimeColumnName" Then
            Dim dt As DateTime = DateTime.Parse(dr(col).ToString())
            row.Add(col.ColumnName, dt.ToString("yyyy-MM-dd hh:mm:ss"))
        Else
            row.Add(col.ColumnName, dr(col))
        End If
    Next
    rows.Add(row)
Next 
```

# listview - android更改listview中1项的背景颜色

> ID：13553018
> 
> 赞同：1
> 
> 时间：2012-11-25T16:33:37.177
> 
> 标签：listview, android-listview

我尝试更改列表视图中所选项目的背景，当我滚动列表视图时，我选择了更多项目。我知道它发生了，因为我回收了我的项目列表，但我找不到解决这个问题的方法

这是我的代码： 类 BabyAdapter 扩展 ArrayAdapter {

```
 BabyHolder babyholder;

    BabyAdapter(ArrayList<BabyHolder> list) {
        super(BabyNames.this, R.layout.namerow, R.id.tvName, list);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = super.getView(position, convertView, parent);
        TextView tv = (TextView) row.getTag();

        if(tv == null){
            tv = (TextView) row.findViewById(R.id.tvName);
            row.setTag(tv);
        }

        row.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                v.setBackgroundColor(Color.BLUE);

            }
        });

        babyholder = getItem(position);
        tv.setTag(Integer.valueOf(position));
        tv.setText(babyholder.name);

        return row;
    }
}

public BabyHolder getItem(int position) {
    return (((BabyAdapter) getListAdapter()).getItem(position));
} 
```

谢谢您的帮助 ：]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T05:46:17.453

您可以转到用于扩展 listView 的 layout.xml 文件，并将背景设置为如下所示：

```
android:background="?android:attr/selectableItemBackground" 
```

# c++ - 检查 C++ 中的管理访问权限

> ID：13553019
> 
> 赞同：0
> 
> 时间：2012-11-25T16:33:59.627
> 
> 标签：c++, windows, qt, winapi

> **可能重复：**
> [检测程序是否以完全管理员权限运行](https://stackoverflow.com/questions/4230602/detect-if-program-is-running-with-full-administrator-rights)

如何查看用户有哪些权限？

我需要检查对 C:/Windows/SomeFolder 的写访问权限

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T16:40:04.103

最好的方法是写入该文件夹（即在其中创建一个文件或您的最终目标是什么）。如果失败，错误代码应该指出出了什么问题——你可能没有足够的权限或没有剩余的磁盘空间等。在做某事之前检查权限就像问你是否可以问——最好只是问。更不用说你有权写作的竞争条件了，在你真正写作之前它就已经消失了。

# scala - 为什么 Scala 编译器不能推断 Stream 类型的操作？

> ID：13553020
> 
> 赞同：1
> 
> 时间：2012-11-25T16:34:15.900
> 
> 标签：scala, stream

可以说我想要一个`Stream`正方形。声明它的一种简单方法是：

```
scala> def squares(n: Int): Stream[Int] = n * n #:: squares(n + 1) 
```

但是这样做会产生错误：

```
<console>:8: error: overloaded method value * with alternatives:
  (x: Double)Double <and>
  (x: Float)Float <and>
  (x: Long)Long <and>
  (x: Int)Int <and>
  (x: Char)Int <and>
  (x: Short)Int <and>
  (x: Byte)Int
 cannot be applied to (scala.collection.immutable.Stream[Int])
       def squares(n: Int): Stream[Int] = n * n #:: squares(n + 1)
                                            ^ 
```

那么，为什么 Scala 不能推断出`n`显然是 a的类型`Int`？有人可以解释发生了什么吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-25T16:37:47.440

这只是一个优先级问题。您的表达式被解释为`n * (n #:: squares(n + 1))`，这显然不是很好的类型（因此出现错误）。

您需要添加括号：

```
def squares(n: Int): Stream[Int] = (n * n) #:: squares(n + 1) 
```

顺便说一句，这不是*推理*问题，因为类型是已知的（即，`n`已知是 type `Int`，因此不需要推理）。

# c# - 如何使用 linq 初始化重复元素的数组？

> ID：13553022
> 
> 赞同：9
> 
> 时间：2012-11-25T16:34:28.380
> 
> 标签：c#, linq

目前，我正在使用这样的东西来构建一个包含 10 个对象的列表：

```
myList = (from _ in Enumerable.Range(0, 10) select new MyObject {...}).toList() 
```

这是基于我的 python 背景，我会写：

```
myList = [MyObject(...) for _ in range(10)] 
```

请注意，我希望我的列表包含我的对象的 10 个实例，而不是同一个实例 10 次。

这仍然是在 C# 中做事的明智方式吗？以这种方式通过简单的 for 循环执行此操作是否有成本？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-25T17:01:10.633

在这种情况下，Fluent API 看起来更具可读性，但不太容易看出代码的意图：

```
var list = Enumerable.Range(0, 10).Select(_ => new MyObject()).ToList(); 
```

简单的 if 循环快速且易于理解，但它也隐藏了意图 - 创建 10 个项目的列表

```
List<MyObject> list = new List<MyObject>();
for (int i = 0; i < 10; i++)
     list.Add(new MyObject()); 
```

最好的可读性是构建器，它将描述您的意图

```
public class Builder<T>
    where T : new()
{
    public static IList<T> CreateListOfSize(int size)
    {
        List<T> list = new List<T>();
        for (int i = 0; i < size; i++)
            list.Add(new T());
        return list;
    }
} 
```

用法：

```
var list = Builder<MyObject>.CreateListOfSize(10); 
```

这个解决方案速度很快，就像简单的循环一样，意图非常明确。同样在这种情况下，我们要编写的代码量最少。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-25T16:46:39.180

就个人而言，我认为`Enumerable.Repeat`缺少过载。一个方便的添加将是这样的：

```
public static class EnumerableEx
{
    public static IEnumerable<T> Repeat<T>(int amt, Func<T> producer)
    {
        for(var i = 0; i < amt; ++i)
        {
            yield return producer();
        }
    }
} 
```

所以你可以

```
EnumerableEx.Repeat(10, () => new object()) //.ToList() 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-25T16:58:31.403

你可以试试：

```
Enumerable.Range(0, 1000).Select(x => new MyObject()).ToArray(); 
```

# hadoop - Apache Pig Mapreduce 模式

> ID：13553029
> 
> 赞同：0
> 
> 时间：2012-11-25T16:35:11.677
> 
> 标签：hadoop, apache-pig

尝试在 mapreduce 模式下运行 pig 时出现以下异常，

错误 4010：在类路径中找不到 hadoop 配置（在类路径中找不到 hadoop-site.xml 和 core-site.xml）。如果您打算使用本地模式，请在命令行中输入 -x local 选项

我有以下 hadoop 类路径集，

导出 HADOOP_INSTALL=/media/Software/hadoop-1.0.4

谢谢

# input - Webkit 占位符文本跳转

> ID：13553031
> 
> 赞同：3
> 
> 时间：2012-11-25T16:35:18.713
> 
> 标签：input, webkit, placeholder

我有`<input />`一个占位符。输入是自定义设计的，即它没有边框、没有轮廓、自定义高度、自定义宽度、自定义背景颜色、自定义文本颜色以及具有特定字体大小和行高的自定义字体。该字体是使用引用 *.ttf 文件的 @font-face 导入的。

问题在于，当专注于输入字段时，占位符文本会跳高约 2-3px，只是在模糊时跳回。

这里输入字段的定义：

```
@font-face{
    font-family: SourceSansProExtraLight;
    src: url('../fonts/Source_Sans_Pro/SourceSansPro-ExtraLight.ttf');
}

#search_input{

    background-color: #f0f0f0;
    outline: none;
    border: none;
    padding: 0;
    margin: 0;

    width: 236px;
    padding-left: 12px;
    width: 224px; /* width (236) - padding-left */

    font-family: SourceSansProExtraLight;
    font-size: 30px;
    line-height: 30px;
    color: #5e5e5e;

    height: 52px;

} 
```

这是一个演示该问题的 GIF：

![占位符跳转](../Images/2eb8761ecf4ac19b9ce976bf408174d8.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T07:19:46.753

请检查您是否为 input:focus 选择器编写了任何可能导致问题的 css。如果您没有为 input:focus 编写任何 css，请为此编写 css 以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-09T09:05:12.527

使用 input[type="text"] 没有问题。如果高度和行高相等，我只有 input[type="number"] 有问题：

```
input[type="number"] {
    height: 30px;
    line-height: 30px; 
} 
```

但是如果我降低行高，效果就会消失：

```
input[type="number"] {
    height: 30px;
    line-height: 28px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-18T17:57:44.497

Chrome 为插入符号保留空间。

行的高度必须大于 1.11 个单位的字体高度（*在我的系统上*）。

例子：

```
font-size = 30px
line-height = 30px * 1.11 = round(33,3px) = 33px 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-21T20:56:38.293

当`outline-offset: 0`输入有`:focus`. 这为我在 WebKit 上修复了跳跃占位符错误。我也在设置`outline: none`和展示一个 custom `box-shadow`，这可能是原因。

# android-fragmentactivity - 通过使用片段在方向更改期间保留数据

> ID：13553033
> 
> 赞同：1
> 
> 时间：2012-11-25T16:35:44.277
> 
> 标签：android-fragmentactivity

我试图理解片段。我读到的所有例子都是关于有一个主要活动，然后是两个子片段。问题是我的程序只有 1 个活动。我可以把它变成一个片段吗？当前的ui主类

 `````
public class MainActivity extends Activity {} 
````  `我能做到吗

 `````
public class MainActivity extends Fragment {} 
````  `我正在尝试创建的程序将不断监控电话变量并在 textView 中显示日志。当用户更改方向或操作系统破坏 ui 时的其他更改时，我不想丢失日志。

UI 基本上是 1 个 textView，它被一个可运行对象填充，该可运行对象每 5 秒使用链表的内容更新 textView。我基本上不想丢失链表的内容。

我检查了 getLastNonConfigurationInstance() 但它似乎已贬值，所以我不想使用它

任何帮助将不胜感激。

阿米什人

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-29T03:39:17.510

在这里找到答案：http: [//blog.webagesolutions.com/archives/458](http://blog.webagesolutions.com/archives/458)

所以经过大量搜索后，我发现如果添加以下内容： android:configChanges="orientation|screenSize"

在androidManifest.xml中，从纵向模式切换到横向模式时，操作系统不会破坏活动。

我的 xml 文件如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.axr0284.phonecontrol"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="14"
        android:targetSdkVersion="15" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.axr0284.phonecontrol.MainActivity"
            android:label="@string/app_name" 
            android:configChanges="orientation|screenSize">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

希望这对某人有所帮助，阿米什人````

# php - 提交表单时未捕获前置字段。- jQuery/PHP

> ID：13553035
> 
> 赞同：-1
> 
> 时间：2012-11-25T16:35:52.807
> 
> 标签：php, jquery, database, forms

我预先

```
$('.VHere').prepend('<input type="checkbox" value="test1" id="testid">'); 
```

并写入数据库。通过表单发布时，不会捕获#testid。它捕获表单中除此之外的所有其他字段。此外，如果重新加载页面，则会捕获此特定字段。

知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T16:39:33.150

我们需要查看更多代码，但没有`name`与 this 相关联`input`，这可能是内容未添加到 DB 的原因。

我想会是

```
$('.VHere').
   prepend('<input type="checkbox" name="testid" value="test1" id="testid">'); 
```

在哪里`testid`填充字段

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T16:49:41.690

这可能有效吗？

```
$('.VHere').prepend('<input type="checkbox" name="testid" checked="checked" value="test1" id="testid">'); 
```

因为未选中的框不能像 AD7six 所说的那样与 post 一起提交`name`，当然对于 post 和 catch back 很重要。

# jquery - jQuery 和 history.js 示例

> ID：13553037
> 
> 赞同：13
> 
> 时间：2012-11-25T16:36:07.357
> 
> 标签：jquery, html, history.js

我在使用 jQuery 的 history.js 时遇到了一点麻烦。我只是想让导航集与后退按钮一起工作（他们似乎做得很好）。然而。当我单击后退按钮时，url 会更改为旧的（这又是好的，也是我想要的），但内容并没有按照应有的方式替换。

为了使这更容易理解，这里有一些代码。

```
 <ul class="content_links">
        <li><a href="/historyapi/pages/content_page_1.html">Content page 1</a></li>
        <li><a href="/historyapi/pages/content_page_2.html">Content page 2</a></li>
        <li><a href="/historyapi/pages/content_page_3.html">Content page 3</a></li>
        <li><a href="/historyapi/pages/content_page_4.html">Content page 4</a></li>
        <li><a href="/historyapi/pages/content_page_5.html">Content page 5</a></li>
    </ul>
    <div id="content">
        <p>Content within this box is replaced with content from supporting pages using javascript and AJAX.
    </div> 
```

显然，我想要的是将页面内容加载到内容中，使用 .load() 可以轻松轻松地完成，然后如果用户使用后退按钮，我希望后退按钮向后移动。目前 URL 发生变化，但框中的内容没有变化。我将如何改变或修复它？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-25T16:44:24.083

尝试以下操作：

```
<ul class="content_links">
    <li><a href="/historyapi/pages/content_page_1.html">Content page 1</a></li>
    <li><a href="/historyapi/pages/content_page_2.html">Content page 2</a></li>
    <li><a href="/historyapi/pages/content_page_3.html">Content page 3</a></li>
    <li><a href="/historyapi/pages/content_page_4.html">Content page 4</a></li>
    <li><a href="/historyapi/pages/content_page_5.html">Content page 5</a></li>
</ul>
<div id="content">
    <p>Content within this box is replaced with content from supporting pages using javascript and AJAX.
</div>

<script>
$(function() {

    // Prepare
    var History = window.History; // Note: We are using a capital H instead of a lower h
    if ( !History.enabled ) {
         // History.js is disabled for this browser.
         // This is because we can optionally choose to support HTML4 browsers or not.
        return false;
    }

    // Bind to StateChange Event
    History.Adapter.bind(window,'statechange',function() { // Note: We are using statechange instead of popstate
        var State = History.getState();
        $('#content').load(State.url);
        /* Instead of the line above, you could run the code below if the url returns the whole page instead of just the content (assuming it has a `#content`):
        $.get(State.url, function(response) {
            $('#content').html($(response).find('#content').html()); });
        */
        });

    // Capture all the links to push their url to the history stack and trigger the StateChange Event
    $('a').click(function(evt) {
        evt.preventDefault();
        History.pushState(null, $(this).text(), $(this).attr('href'));
    });
});
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-15T13:13:27.160

似乎以下位不起作用：

```
$.get(State.url, function(response) {
  $('#content').html($(response).find('#content').html());
}); 
```

您必须先将“响应”转换为 dom 元素，然后才能对其使用“查找”。像这样：

```
$.get(State.url, function(response) {
    var d = document.createElement('div');
    d.innerHTML = response;
    $('#content').html($(d).find('#content').html());
}); 
```

# android - 如何发送 JSON 数据

> ID：13553039
> 
> 赞同：0
> 
> 时间：2012-11-25T16:36:35.487
> 
> 标签：android, json

我有很多数据要发送到服务器。格式是 JSON，我的平台是 Android。我想知道以某种方式将数据分成较小的数据包或一次发送所有数据是否明智？在不同的线程中运行发送代码也是个好主意吗？我使用 HTTPPost 通过 Android 发送数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T16:48:27.520

创建更小的数据包会导致更多的开销，因此需要发送更多的数据。此外，所有网络都应在单独的线程（而不是 UI 线程）上执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T16:49:31.573

是使用“许多”HTTP 请求还是只使用一个取决于您的程序流程。一方面，您不想通过网络发送您不确定是否需要的数据，因此发布一篇涵盖所有内容的帖子可能是个坏主意。另一方面，减少请求的数量将减少与每个请求相关的开销，从而减少发送所花费的总时间。

是的，总是在 UI 线程之外执行网络操作。就系统的其余部分而言，这些速度慢得令人无法忍受。

# - 维杰尼

> ID：13553042
> 
> 赞同：0
> 
> 时间：2012-11-25T16:36:40.447
> 
> 标签：

Vigenère 密码是 1553 年开发的一种加密算法，直到 19 世纪中叶才被认为是不可破解的。

# javascript - 通过推送更新数组类型的主干模型属性

> ID：13553045
> 
> 赞同：1
> 
> 时间：2012-11-25T16:36:53.127
> 
> 标签：javascript, backbone.js, model

这真的是向主干模型中的数组添加项目的最佳方式吗？

```
// TODO: is there a better syntax for this?
this.set(
    'tags',
    this.get('tags').push('newTag')
) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T17:14:51.237

你可以像这样实现model.push：

```
var model, Model;

Model = Backbone.Model.extend({
  defaults: { tags: [] },
  push: function(arg, val) {
    var arr = _.clone(this.get(arg));
    arr.push(val);
    this.set(arg, arr);
  }
});
model = new Model;
model.on("change:tags", function(model, newTags) {
  console.log(newTags)
});
model.push("tags", "New tag1")
model.push("tags", "New tag2") 
```

但也许你应该在 Collection 中存储标签，监听它的事件并更新模型`tags`属性。

```
var model, Model, Tags, Tag;

// Override id attribute for Tag model
Tag = Backbone.Model.extend({
  idAttribute: "name"
});

Tags = Backbone.Collection.extend({model: Tag});

Model = Backbone.Model.extend({
  initialize: function() {
    this.tags = new Tags;
    this.tags.on("add remove reset", this.updateTags, this);
  },
  updateTags: function() {
    this.set("tags", this.tags.pluck("name"))
  }
});

model = new Model;
model.on("change:tags", function(model, newTags) {
  console.log(newTags)
});

// Reset tags
model.tags.reset([{name: "New tag1"}, {name: "New tag2"}]);

// Add tags
model.tags.add({name: "New tag3"});

// Remove tag
model.tags.remove(model.tags.get("New tag3")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T16:46:59.000

如果您的模型具有这样的数组属性

```
TestModel = Backbone.Model.extend({
  defaults:{
    return {
       things:[]
    }
  }
}); 
```

向模型 TestModel 上的事物添加项目

```
var test = new TestModel;
test.set({things:item}); 
```

# android - 与 SMS 对话列表相关的 SGS-3 错误？

> ID：13553046
> 
> 赞同：6
> 
> 时间：2012-11-25T16:37:05.313
> 
> 标签：android, sms, android-contentprovider, samsung-mobile

此问题已多次报告，但仍未解决。[我在三星的开发者网站](http://developer.samsung.com/search/searchList.do?searchTop=content://mms-sms/conversations)或[StackOverflow](https://stackoverflow.com/questions/12664101/mms-content-provider-issue-samsung-galaxy-s3)中阅读了所有与该主题相关的消息/线程

让我用几句话再次描述整个问题：

1.  开发人员过去常常通过简单的查询来获取 SMS 对话列表，例如：

    `Uri.parse("content://mms-sms/conversations/"); Cursor cursor = context.getApplicationContext().getContentResolver().query(uri, null, null, null, null);`

    或类似的东西。这里的关键点是URI地址：`content://mms-sms/conversations`

2.  每个人都知道这是非官方的，并且一个人这样做需要自己承担风险 -[请参阅此处的证明链接](http://android-developers.blogspot.ru/2010/05/be-careful-with-content-providers.html)

3.  但是，关键点是一个简单的事实，此代码仅在三星 Galaxy S3 和某些型号的 Galaxy Tab 2 中无法正常工作。它`NullPointerException`使用堆栈跟踪生成：

    `java.lang.NullPointerException at android.os.Parcel.readException(Parcel.java:1431) at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:188) at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:140) at android.content.ContentProviderProxy.query(ContentProviderNative.java:366) at android.content.ContentResolver.query(ContentResolver.java:372) at android.content.ContentResolver.query(ContentResolver.java:315)`

在世界其他地方/宇宙的所有其他设备中，它运行良好！奇怪吧？

我知道这样的答案：嘿，伙计，这是你的问题，因为不能保证上述 URI 的存在/正确性，但是，有人有更富有成效的想法吗？

我已经通过他们的论坛向三星的开发人员发布了问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-30T07:37:10.633

最后我想出了如何克服上述问题（我不确定它是错误，但无论如何它看起来像一个错误）。

可以通过此查询检索对话列表：

```
Uri.parse("content://mms-sms/conversations?simple=true"); 
Cursor cursor = context.getApplicationContext().getContentResolver().query(uri, null, null, null, null); 
```

这里的关键点是 URI `content://mms-sms/conversations?simple=true`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T07:50:30.150

我也遇到了这个问题，atm好像没有解决办法。检查了@barmaley 的答案，它也为我产生了同样的异常

@edit my friend just checked this on his sgs3 and it works! but he cannot get body/adress column, but its a start! It is very very weird that it works on his not on mine. Mine sgs3 is from Polish distribution and his is from usa... if there is difference between regions this can be worse than expected

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-06-17T01:10:26.583

If only interested in SMS conversations, and want addition SMS columns you don't get with `content://mms-sms/conversations?simple=true`, then you can try doing your own grouping on the SMS in the ContentResolver query.

*   uri = `content://sms`
*   projection = `"DISTINCT " + Inbox.THREAD_ID, Inbox.ADDRESS, Inbox.BODY, Inbox.DATE` etc...
*   selection = `Inbox.THREAD_ID + " IS NOT NULL) GROUP BY (" + Inbox.THREAD_ID`
*   sortOrder = `Inbox.DEFAULT_SORT_ORDER`

Note that I had to insert a dummy condition 'IS NOT NULL' before GROUP BY, because of the way that ContentResolver adds brackets to the database query it generates.

# algorithm - 算法：记住一幅画

> ID：13553048
> 
> 赞同：1
> 
> 时间：2012-11-25T16:37:20.360
> 
> 标签：algorithm, language-agnostic, drawing

我还不打算将图像转换成文件（而且我不知道我是否会这样做）。

图纸是由定制的绘图程序（用户绘制的）制作的。当我调整应用程序的大小时，绘图消失了，因为它没有被重绘。那是因为图像没有以任何方式被记住。我需要一个算法来记忆绘图，所以它可以在整个应用程序刷新后重新绘制。

我想到的一种算法是记住每个像素的位置和颜色。但我不认为这是一个好主意。

我目前正在使用 Java，但我需要一种与语言无关的算法。不过，我会接受用代码解释的解决方案。

我应该使用什么算法来记住整个绘图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T16:40:58.717

你可以记住用户的动作：例如，如果他/她画了一条线，那么就记住开始和结束地址。如果他/她免提绘制了一幅画，那么你就记住了单个像素（你必须！）。

这允许仅通过操纵坐标来调整任何图形的大小、旋转等。

然后“绘图”变成了一个动作列表：

```
{
    LINE_DRAWING,
    x1, y1, x2, y2,
    pen, color, thickness...
}
{
    ...
} 
```

要重绘，只需扫描相同的列表并再次调用适当的子例程。根据语言的不同，可以将列表表示为数组、链表、双向链表，并实现元素删除等事情。

在文件中，我建议使用某种标记格式：

```
two bytes - element type
four bytes - this element's length
variable-size data depending on element type 
```

同样，要“加载”图形，您只需按顺序扫描文件并填充内存结构。

您可以搜索“矢量绘图”以获取更多详细信息和提示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T16:41:18.727

有很多选择。正如你所说，一个是记住图像像素。您还可以简单地记住生成绘图的所有用户操作，并在需要重建绘图时重放它们。

根据绘图程序为用户提供的工具，另一种方法是构建更紧凑的图像表示。例如，如果绘图程序只提供绘制线条的可能性，您可以记住线条端点的集合（以及颜色、线条粗细以及任何其他相关的线条数据）。这以一种明显的方式推广到更大的几何基元集。

对于徒手绘图，您可以记住笔触路径以及当时设置的任何笔触设置。根据您的程序提供的笔画工具的复杂性，这最终可能会比简单地记住绘图像素更多的数据。但是，它确实允许，例如，如果画布展开，则缩放绘图。

# codeigniter - 将模型数据从视图传递到子视图

> ID：13553052
> 
> 赞同：0
> 
> 时间：2012-11-25T16:37:46.467
> 
> 标签：codeigniter, fatal-error, php

> **可能重复：**
> [调用非对象上的成员函数](https://stackoverflow.com/questions/54566/call-to-a-member-function-on-a-non-object)

在我的主页视图中，我试图将数据传递给我的标题子视图

```
<?php
  $this->load->model('header2');
  $head = $this->header2->HeaderData();
  $this->load->view('head_view', $head);
?> 
```

但我收到此错误：

> 消息：未定义的属性：CI_Loader::$header2
> 致命错误：在第 6 行的 H:\Forum\application\views\homepage_view.php 中的非对象上调用成员函数 HeaderData()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T19:57:24.923

在控制器方法中编写您的代码并仅在那里加载您的视图表单，并使用这样的代码

```
 $this->load->model('header2');
 $data['head'] = $this->header2->HeaderData();
 $this->load->view('head_view', $head); 
```

并在 head_view.php 视图中以 $head 的形式访问此属性，如下所示

```
echo '<pre>';
print_r($head);
echo '</pre>'; 
```

如果你在加载主视图，然后在其中调用子视图，那么你在加载视图时不需要传递值，你可以直接访问子视图中的值，所以你可以直接`$head`在 subivew 中使用。

# iphone - 在不显示消息编辑器或在 iphone 的背景中发送短信

> ID：13553054
> 
> 赞同：-1
> 
> 时间：2012-11-25T16:38:03.227
> 
> 标签：iphone, background-process, sendmessage

嗨，可以在后台发送短信吗？我的新要求是在没有互联网连接的情况下发送短信。我正在尝试 MFMessageViewComposer 但它显示了弹出视图。

我们如何在不显示此弹出窗口的情况下发送消息？有没有其他方法可以做这件事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T16:56:15.180

[以编程方式发送短信，没有短信编辑器窗口](https://stackoverflow.com/questions/9570642/iphone-sdk-send-sms-programmatically-without-the-sms-composer-window)希望有帮助......看起来是一个类似的问题。根据发帖者的说法，ios6 不允许您在后台发送短信，除非使用第三方 API，例如[Nexmo](http://www.nexmo.com/)，后者提供 REST API 来使用 HTTP 发送消息。

要使用 Nexmo 发送消息，只需发送类似[http://rest.nexmo.com/sms/json?api_key=n3xm0rocks&api_secret=12ab34cd&from=MyCompany20&to=447525856424&text=hello+hd1](http://rest.nexmo.com/sms/json?api_key=n3xm0rocks&api_secret=12ab34cd&from=MyCompany20&to=447525856424&text=hello+hd1)的请求，您将返回 JSON，更改端点如果您愿意，可以转到 xml。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T16:55:12.903

这不被允许。例如，如果我开发一个应用程序向我的服务器发送征税短信以获取资金怎么办？这就是主要原因...我还可以向随机数发送非法或垃圾短信...这就是用户必须验证发送的原因。

# javascript - Twig：{% javascripts %} 中的评论

> ID：13553055
> 
> 赞同：6
> 
> 时间：2012-11-25T16:38:20.590
> 
> 标签：javascript, symfony, twig

我的树枝文件中有这样的情况：

```
{% javascripts
    'js/functions.js'
    'js/plugins.js'
    'js/editor.js'
    'js/calendar.js'
%} [...] 
```

我很想评论一些脚本使用

```
{% javascripts
    {# 'js/functions.js' #}
    'js/plugins.js'
    'js/editor.js'
    'js/calendar.js'
%} [...] 
```

但这是不允许的，我得到一个`Unexpected character "#"`错误。

有没有一种常见的做法来处理这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T12:43:20.980

显然，这是不受支持的树枝语法。因此，如何隐藏它取决于您。我会做这样的事情：

```
{#    'js/functions.js'#}
{% javascripts
    'js/plugins.js'
    'js/editor.js'
    'js/calendar.js'
%} [...] 
```

# c++ - 大量使用 pow(x,y)

> ID：13553057
> 
> 赞同：-2
> 
> 时间：2012-11-25T16:38:41.433
> 
> 标签：c++, math.h

我正在输入一个数字 n，其中 1<=n<=10^5。我需要一个长度为 n 的数字。所以我使用 pow(10,n-1) 但是当 n=100000 时它不起作用。错误是什么？

编辑：它的 codeforces div2 第 152 轮问题 B。

Chilly Willy 想要找到长度为 n 的最小数，这样它就可以同时被所有 Willy 已经知道的数（2、3、5 和 7）整除。帮助他。

数字的长度是十进制表示中不带前导零的位数。

输入 单个输入行包含单个整数 n (1 ≤ n ≤ 10^5)。

我的代码可以工作到 n=19。它在预测试 9 中失败。

```
#include<iostream>
#include<math.h>
using namespace std;

int main()
{
int f=0;
unsigned long long n;unsigned long long out;
cin>>n;
unsigned long long num=1;unsigned long long lim=10;
for(unsigned long long z=0;z<n;z++)
{num=num*10;lim=lim*10;}num=num/10;lim=lim/10;
for(;num<lim;num++)
{
if((num%2==0)&&(num%3==0)&&(num%5==0)&&(num%7==0)){f=1;out=num;break;}
}

if(f==1){cout<<out;}
else if(f==0){cout<<"-1";}

return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T18:41:25.333

处理大数并非易事。您不能为此仅使用 , , 等`int`内置`double`类型。`long`为了计算一个有 100000 位的数字，你需要有超过 300000 位（几千字节）；这绝非易事。相反，您可以在不计算的情况下打印答案！

说一个数`num`能被 2、3、5 和 7 整除与`num % 210 == 0`. 因此，您的问题的答案如下所示：

```
100000000000... (really many zeros) ...00000xy0 
```

您只需要找到两个数字 x 和 y，然后打印上面的“数字”。

所以你必须计算`pow(10, 99999) % 210`而不计算`pow(10, 99999)`。为此，请从 10 开始`pow(10, 0) = 1`并依次乘以 10：

```
pow(10, 0) % 210 = 1
pow(10, 1) % 210 = (1   * 10) % 210 = 10
pow(10, 2) % 210 = (10  * 10) % 210 = 100
pow(10, 3) % 210 = (100 * 10) % 210 = (1000 % 210) = 160
pow(10, 4) % 210 = (160 * 10) % 210 = (1600 % 210) = 130
pow(10, 5) % 210 = (130 * 10) % 210 = (1300 % 210) = 40
... 
```

以这种方式计算后`pow(10, 99999) % 210`（假设它是`xyz`），相加`210 - xyz`将使数字可被 210 整除。因此，要输出答案，请打印`1`，然后打印 99996 次`0`，然后打印`210 - xyz`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T16:43:44.573

对于典型的 32 位和 64 位浮点数据类型（`float`和`double`），它们被限制在以下范围内：

```
float:  3.4E +/- 38  (that is, 3.4 * 10^(+/-38))  (with 7 digits of precision)
double: 1.7E +/- 308 (that is, 1.7 * 10^(+/-308)) (with 15 digits of precision) 
```

具有 100000 位数字的数字完全超出了这些数据类型的范围。因此，它失败了（以某种方式），尽管你没有告诉我们它是如何失败的。

# java - 一种对 DoubleLinkedList 中数百万个单词进行排序的有效算法

> ID：13553058
> 
> 赞同：0
> 
> 时间：2012-11-25T16:39:15.477
> 
> 标签：java, performance, sorting, linked-list, search-engine

我正在使用 Java 开发一个简单的搜索引擎。

搜索引擎首先将包含要搜索的文件（txt 文件）的目录名称作为输入，并且在每个文件中包含许多单词。

然后搜索引擎为目录中遇到的所有单词创建一个倒排索引。引擎读取每个文件并将每个单词插入到 doubleLinkedList 中。

问题是，当我处理包含 100 个 .txt 文件的目录时：

索引时间：~201ms 排序时间：2463ms

* * *

排序一个目录包含 1000 个文件

索引时间：2461ms 排序时间：922654ms

* * *

排序一个目录包含 10000 个文件

**大约 10 小时 :(**

* * *

1.  有什么方法可以减少执行时间？

2.  我使用了插入排序，所以对排序算法有什么建议吗？

DoubleLinkedList 类的实现

```
public class DoubleLinkedList<T> {
    private Node<T> head;
    private Node<T> current;

    public DoubleLinkedList(){
        head = current = null;
    }
    public boolean empty(){
        return head == null;
    }
    public boolean last(){
        return current.next==null;
    }
    public boolean first(){
        return current.previous == null;
    }
    public boolean full(){
        return false;
    }
    public void findFirst(){
        current = head;
    }
    public void findNext(){
        current = current.next;
    }
    public void findPrevious(){
        current = current.previous;
    }
    public T retrieve(){
        return current.data;
    }
    public void update(T val){
        current.data = val;
    }
    public void insert(T val){
        if(head == null){
            head = current = new Node<T>(val);
        }else{
            Node<T> tmp = new Node<T>(val);
            tmp.next = current.next;
            tmp.previous = current;
            if(current.next != null)
                current.next.previous = tmp;
            current.next = tmp;
            current = tmp;
        }
    }
    public void remove(){
        if(current == head){
            head = head.next;
            if(head!=null){
                head.previous=null;
            }
        }else{
            current.previous.next = current.next;
            if(current.next!=null){
                current.next.previous = current.previous;
            }
        }
        if(current.next == null){
            current = head;
        }else{
            current = current.next;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T16:43:18.763

插入排序在（最坏情况）`O(n^2)`时间内运行。

`O(nlogn)`您可以尝试在 (IIRC)时间内运行的 Mergesort、QuickSort 或 HeapSort 。这会快得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T16:46:13.757

当然还有更快的方法。事实上，有[几十种更快的方法](http://en.wikipedia.org/wiki/Sorting_algorithm):-)

但除非你喜欢重新发明轮子，否则你可以简单地使用`Collections.sort(list)`. 此外，如果性能很重要，我建议使用`ArrayList`相当 a `LinkedList`，因为它允许更好的引用位置并占用更少的内存。

对于长度为 10000 的列表，与插入排序相比，这应该将执行时间减少 3 个数量级（即 1000 倍）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T17:04:15.340

使用`ArrayList`, 然后调用`list.trim()`来删除空的保留列表空间，然后只需调用`Collections.sort(list)`. 比`LinkedList`差 99.5% `ArrayList`。

如果这仍然很慢：接下来只需尝试：
使用 `ArrayList`，构建一个`String[] words`，然后排序`Arrays.sort( words)`
。Collection.sort 使用（修改后的）MergeSort。

> 该算法提供有保证的 n log(n) 性能。

通过避免集合的开销，您可以做得更快一点，我曾经使用 MyArrayListInt 和 Quicksort 做到这一点。

# html - img 的伪元素奇怪行为

> ID：13553064
> 
> 赞同：0
> 
> 时间：2012-11-25T16:39:35.490
> 
> 标签：html, css

试图在其下方制作有关图像的信息。但是有一个问题......伪元素不可见..

```
<img info="hey guys" src="http://i024.radikal.ru/1211/4c/809c7c2dfa74.jpg">
<div info="I'm working, but I'm inside the block"></div>

div {
    height: 100px;
    margin: 10px;
    background: yellow;
}
div[info]::after, img[info]::after {
    content: attr(info);
    display: block;
    margin: 3px;
    color: black;
    font-style: italic;
} 
```

[Jsfiddle DEMO](http://jsfiddle.net/9f62H/8/)

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T16:43:50.737

`img`元素不能有伪元素，因为它们不能有子元素——<code>::before 被插入到元素中。它看起来像这样：

```
<img><before></img> 
```

或者至少它不是由[规范定义的](http://www.w3.org/TR/CSS2/generate.html#before-after-content)

> 该规范没有完全定义 :before 和 :after 与替换元素的交互（例如 HTML 中的 IMG）。这将在未来的规范中更详细地定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T16:44:02.493

伪元素附加/附加到元素的内容。由于 an `<img>`（和 an`<input>`例如）没有内容，因此不能在其上应用伪元素。

# javascript - 将 DOM 元素添加到 Javascript 中的构造函数

> ID：13553065
> 
> 赞同：0
> 
> 时间：2012-11-25T16:39:44.597
> 
> 标签：javascript, dom

如果我有一个构造函数并想插入一个 DOM 元素，我该怎么做？我想我需要将它转换为字符串，但我不确定并且我不太清楚如何转换它。谢谢你。

```
function MyFunk(domElementVar,domElementString) {

this.domeElementVar = document.getElementById(this.domeElementString);

}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T16:55:56.800

您当前的函数是一个接受两个参数的构造函数：一个元素和一个字符串。这意味着您可以将其称为`new MyFunk(document.getElementById(...), "...")`.

相反，您想要的是一个只接受字符串并找到元素本身的构造函数。注意：

*   对于参数，不要使用`this.`. 它们是函数内部可用的变量。
*   对于正在构造的对象的属性，请使用`this.`.

所以：

```
function MyFunk(domElementString) {
  this.domeElementVar = document.getElementById(domeElementString);
} 
```

# arrays - 如何在 Fortran 中将简单数组转换为二维数组（矩阵）？

> ID：13553068
> 
> 赞同：1
> 
> 时间：2012-11-25T16:40:08.603
> 
> 标签：arrays, matrix, fortran

我必须从文件中读取数据并将所有数据存储在一维数组中。但是，我必须将一些数据存储在矩阵（二维数组）中，我该怎么做？

例如，如果我的数据是`1x7`数组`[1,2,3,1,5,2,8]`，并且第一个到第 6 个属于矩阵`2x3`，我该如何存储在一个新的数组变量中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T16:56:47.223

假设您的 7 元素数组被调用`array7`，那么下面的表达式应该返回一个`2x3`包含 的前 6 个元素的数组`array7`

```
reshape(array7(1:6),[2,3]) 
```

如果这会将元素以错误的顺序放入新数组中，请尝试

```
reshape(array7(1:6),[2,3],order=[2,1]) 
```

请注意，我在第二个版本中使用了一个命名的可选参数，还有另一个可选参数 ( `pad`)，默认情况下，它是`reshape`.

# android - 在 ArrayAdapter 中使用 Inflator 时，主题不会应用于列表项布局

> ID：13553070
> 
> 赞同：0
> 
> 时间：2012-11-25T16:40:25.100
> 
> 标签：android, android-layout

我有一个 ListView 和一个自定义适配器。我还得到了在适配器内部膨胀的列表项的布局`getView()`。当我使用样式将主题应用于列表项`@style/MyStyle`时，不会应用该样式。然而，当我`setTheme(R.style.MyStyle)`在充气后使用时，这种风格确实有效。这很烦人，因为我必须以编程方式将主题应用于适配器内的控件。

有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T19:05:32.013

你试过 adapter.notifyDataSetInvalidated(); 设置主题后？考试。

```
 adapter.notifyDataSetChanged();

    listView.setTheme(R.style.MyStyle);

    adapter.notifyDataSetInvalidated(); 
```

# c++ - int 转换运算符 'Class 后跟 int 是非法的' main 的返回类型应该是 'int' 而不是 'class'

> ID：13553077
> 
> 赞同：1
> 
> 时间：2012-11-25T16:41:13.490
> 
> 标签：c++

我现在正在从一本书中自学 C++，其中一个练习是编写一个 Date 类，它将它保存的日期转换为一个唯一的整数。但是，当我运行我的程序时，我无法弄清楚我遇到的这个错误。我在 C++ 2010 上编程。

错误是：

`error C2628: 'Date' followed by 'int' is illegal (did you forget a ';'?)`

`error C3874: return type of 'main' should be 'int' instead of 'Date'`

奇怪的是我试图将我的主要更改为简单地“返回 0；” 并且仍然会出现上述错误。有任何想法吗？

这是我的代码：

```
#include "stdafx.h"
#include <iostream>

using namespace std;

class Date{
private:
    int day, month, year; //declaring variables

public:

    //declare constructor
    Date(int inputDay=1, int inputMonth=1, int inputYear=2012)
    :day(inputDay), month(inputMonth),year(inputYear){};

    // declare conversion operator for integers
    operator int(){
        return year*10000+month*100+day;
    }
}

int main() {
    Date today(25,11,2012);
    return today;
    //doesn't matter if I delete above 2 lines and write return 0; both errors still occur
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-25T16:42:34.037

您需要`;`在类定义之后添加一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T17:34:26.957

我希望以下代码能回答您的问题！

```
#include <iostream.h>

class Date
{
private:
int day, month, year; //declaring variables
long int result;

public:

//declare constructor
Date(int inputDay, int inputMonth, int inputYear)
{
this.day=inputDay;
this.month=inputMonth;
this.year=inputYear;
// declare conversion operator for integers
result=year*10000+month*100+day;
cout<<"Result = "<<result<<"\n";
}
};

int main() 
{
Date today(25,11,2012);
return 0;
} 
```

# android - 使用 ACTION.SEND 发送图像

> ID：13553083
> 
> 赞同：0
> 
> 时间：2012-11-25T16:41:37.310
> 
> 标签：android, image, android-intent

我在资产文件夹中有文件，我如何使用 ACTION.SEND 意图将它们发送到 Gmail 或除 Facebook 之外的其他应用程序（我知道如何使用 JSON）？我正在使用此代码，但它不起作用，我尝试了很多东西，即使将文件附加到 GMAIL 也是成功的，但是发送时，什么都不会发布到 Gmail 帐户！

```
 Intent sendIntent = new Intent(Intent.ACTION_SEND);
 sendIntent.putExtra("sms_body", body);
 sendIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse("file:///android_assets/T1.png");
 sendIntent.setType("image/png");
 startActivity(sendIntent); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T17:10:34.643

```
Intent emailIntent = new Intent(Intent.ACTION_SEND);
emailIntent.putExtra(Intent.EXTRA_EMAIL, new String[]{"test@test.com"});
emailIntent.putExtra(Intent.EXTRA_SUBJECT, "Email subject");
emailIntent.putExtra(Intent.EXTRA_TEXT, Html.fromHtml("<b>Bold message body</b>"));
emailIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse("file:/sdcard/test.txt"));
emailIntent.setType("application/octet-stream");
startActivity(Intent.createChooser(emailIntent, "Send Email")); 
```

# cocos2d-iphone - 在 Box2d 中理解身体定位时遇到问题。关于事情如何运作的任何指示？

> ID：13553085
> 
> 赞同：0
> 
> 时间：2012-11-25T16:41:39.277
> 
> 标签：cocos2d-iphone, box2d, game-physics, physics-engine

我正在努力学习和理解 box2d。这是我的问题：

我正在尝试制作一辆简单的汽车，车身现在看起来像这样：

![在此处输入图像描述](../Images/808488392366beed0c68222a034ea937.png)

现在我正在尝试添加一个轮子，创建轮体，并假设我将使用 b2RevolutionJoint 将轮子链接到车身。

在我到达那个部分之前，我只想能够将轮子定位在它的位置上，所以相对于 bodyCar Body。我该如何正确地做到这一点？

我在网上看到的是这样的：

```
bodyDef2.position.Set(axle2->GetWorldCenter().x + 1.3*cos(-M_PI/3), axle2->GetWorldCenter().y + 0.3*sin(-M_PI/3)); 
```

但是，我不明白该表达式的 cos 和 sin 部分。

我想要做的是：

```
backWheelDef.position = b2Vec2(carBody->GetWorldCenter().x - 20.0/PTM_RATIO,carBody->GetWorldCenter().y); 
```

由于我的 carBody 顶点定义如下所示：

```
b2Vec2 vertices[] = {
        b2Vec2(100.0/PTM_RATIO,15.0/PTM_RATIO),
        b2Vec2(100.0/PTM_RATIO,30.0/PTM_RATIO),
        b2Vec2(50.0/PTM_RATIO,65.0/PTM_RATIO),
        b2Vec2(20.0/PTM_RATIO,65.0/PTM_RATIO),
        b2Vec2(0.0/PTM_RATIO,45.0/PTM_RATIO),
        b2Vec2(0.0/PTM_RATIO,15.0/PTM_RATIO)

    }; 
```

上述定位轮子的方法的结果看起来有点正确（见下面的截图），但如果你看看上面的数字，它没有多大意义。

由于 carBody 宽度为 100.0/PTM_RATIO，我假设 GetWorldCenter().x 将返回一个等于 50.0/PTM_RATIO 的值。

所以车轮位置会在 30.0/PTM_RATIO 计算之后，对吗？

好吧，如果您查看下面的结果，车轮 x 定位似乎在 20.0/PTM_RATIO。

![在此处输入图像描述](../Images/140cc681866abee55bcedc0ab8d32b52.png)

**有人可以解释一下如何在 Box2D 中使用与其他机构相关的定位机构吗？一旦我清楚了这些事情，我将继续使用关节将它们连接起来**

非常感谢！

**稍后编辑基于 iforce2d 答案：**

感谢 iforce2d 的回答，并感谢您在 box2d 世界中提供的所有良好见解。你说的完全正确，但这不是我的问题。

一旦我发现 GetWorldCenter 返回重心，GetPosition 返回对象的位置原点，就很容易将我的轮子准确地放置在我需要它与 carBody 相关的位置。尽管我仍然得到它出现在身体下方的行为，但我知道一旦我将关节添加到方程中，这将得到修复。

现在我有另一个与这个定位问题有关的问题。看看下面的图片：

![在此处输入图像描述](../Images/aa95fe753c61136acd1389762d899afc.png)

**一旦我将它们的锚点设置如下，这是我的关节应该看起来的正确方式吗？我对他们从原点而不是从锚点A到锚点B有点困惑**

再次感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T21:01:28.060

您首先将车轮放在车身内部，因此在前两到三个时间步长中，两个车身将移动以纠正重叠。它可能发生得如此之快以至于你看不到它，但有明显的迹象，即车轮恰好位于汽车边缘，车身略微旋转。

如果您暂停模拟（只是不要调用 Step），您应该会看到您希望看到的物体。

添加关节后，默认行为是两个连接的实体不会相互碰撞，因此您不会看到此问题。

# c# - 如何设置先出现哪些表单

> ID：13553088
> 
> 赞同：11
> 
> 时间：2012-11-25T16:42:06.333
> 
> 标签：c#, winforms

我是一名初学者 c# 程序员，我正在熟悉 Windows 窗体应用程序。我有 2 个表单，我试图了解如何将其中一个设置为运行应用程序时出现的第一个表单。

有没有办法设置它，或者我必须按照它们出现的顺序创建表单？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-25T16:43:36.300

在`Program.cs`中，您将看到以下代码行

```
Application.Run(new Form1()); 
```

此行显示`Form1`.
你可以改变它来做任何你想做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-10T06:04:36.300

在 Program.cs 中，您将看到以下代码行

应用程序.运行（新 Form1（））；此行显示 Form1。你可以改变它来做任何你想做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T17:04:49.970

在您的视觉工作室中，当您打开项目时，默认情况下 program.cs 将打开。

```
 static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new Form1());
    } 
```

你可以看到上面的 Application.Run(new Form1());

无论您在此处键入什么表单名称，只要您首先开始，此表单就会运行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T16:46:20.277

在 Program.cs 中编写

```
Application.Run(new YourMainForm()); 
```

# iphone - iOS 块 - 使用未声明的标识符 self

> ID：13553090
> 
> 赞同：3
> 
> 时间：2012-11-25T16:42:23.390
> 
> 标签：iphone, ios, ipad, block

我是块新手。我在一个单身人士中，我这样做

```
void (^ myBlock)() = ^(){ [self doStuff]; }; 
```

我收到此错误**使用未声明的标识符 self。**

doStuff 是单例中的一个方法。

但是如果这个块是在另一个方法中声明的，Xcode 就可以了。

这是为什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T22:48:20.500

你不应该`self`直接在一个块中调用。
相反，您应该从块中创建一个安全的块指针`self`并在块内访问它。

```
__block id safeBlockSelf = self;
void (^ myBlock)() = ^(){ [safeBlockSelf doSomething]; }; 
```

请参阅[实现 API 时如何避免在块中捕获自我？](https://stackoverflow.com/q/7853915/856880)更多细节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T16:48:48.220

您可以在界面中定义块并在 @implementation 文件中的任何方法（包括初始化程序）中进行初始化，如下所示：

```
@interface YourClass {
   void (^ myBlock)();
}

@implementation YourClass

  - (void)yourMethod {
    myBlock = ^(){ [self doStuff]; };
  }

@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T22:32:24.260

**因为每个方法都通过 self 作为隐藏参数。**self 是一个和其他变量一样的变量，如果在方法中，块可以“看到它/捕获它”

如果它不在方法中，则 self 不是在任何地方设置的变量，并且该块无法“看到它”

# java - is equals() 和 toHashCode 影响向量 add() remove() 方法的行为

> ID：13553094
> 
> 赞同：1
> 
> 时间：2012-11-25T16:42:51.703
> 
> 标签：java, vector, equals, hashcode

如主题： Is equals() 影响向量 add() remove() 方法的行为。

我有`Vector<T> v;`

`remove()`1.如果我不重新定义`equals()`或在其中`hashCode()`起作用，该方法是否正确`type T`？

`add()`2.如果我不重新定义`equals()`或在其中`hashCode()`起作用，该方法是否正确`type T`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T16:46:25.023

1.  如果您没有定义`equals()`for `T`，`Vector.remove`将使用默认`equals()`实现，即对象标识 ( `==`)。
2.  `Vector.add()`不使用`equals()`。它会很高兴地添加重复项。

在任何一种情况下，`Vector`根本不使用`hashCode`，因此执行`hashCode`（或缺少）根本不会影响操作`Vector`。但是，如果重新定义`equals()`元素类型，则必须重新定义`hashCode()`其他集合结构才能正常工作。

PS您可能应该使用`ArrayList`而不是`Vector`. 从[文档中`Vector`](http://docs.oracle.com/javase/7/docs/api/java/util/Vector.html)：

> 如果不需要线程安全实现，建议使用`ArrayList`.`Vector`

即使需要线程安全的实现，通常最好还是提供自己的同步。提供的单函数调用同步`Vector`通常在错误的粒度上。

# ios - 在多个屏幕上使用相同的 UITableViewController

> ID：13553096
> 
> 赞同：1
> 
> 时间：2012-11-25T16:43:02.617
> 
> 标签：ios, delegates, uitableview

在我的应用程序中，我在几个不同的页面中显示了一个活动提要。所以我不是在复制代码，这个提要有它自己的 UITableViewController 代码。对于每个页面，我想指定这个提要（表格）应该显示的区域，并在每个地方使用相同的 UITableViewController 代码。我该怎么做？所有的逻辑/代码都应该由那个 UITableViewController 处理，而不是基本的 VC

我尝试创建一个包含所有行/节/点击逻辑的特定 UITableViewController (FeedViewController) 类。然后，对于我放入 UITableView 的每个页面，分配 FeedViewController，并将委托/数据源设置为 FeedViewController。这很好*用，除非我想在新屏幕上推送或调用 reloadData*（基于用户与表格的交互方式）。我必须将委托消息发送回基本 VC，例如“pushThisView”或“reloadThisTable”。**这看起来很脏。**

我怎样才能做到这一点，以便嵌入式 UITableViewController 可以重新加载它*自己的*表，并将新视图推送/关闭到父 VC 上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T18:28:20.690

[`UIViewController`您应该使用类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)中描述的容器视图控制器。这允许您将任何内容嵌入到任何具有自定义框架和过渡的`UIViewController`父级中。[虽然您会在文档和此答案](https://stackoverflow.com/questions/8379759/how-does-view-controller-containment-work-in-ios-5)`UIViewController`中找到您需要了解的所有内容，但这里有一个代码示例可以帮助您进行设置：

```
FeedViewController *feedViewController = ... // create your view controller
[self addChildViewController:feedViewController];
feedViewController.view.frame = ... // frame for view
[self.view addSubview: feedViewController.view];

[feedViewController didMoveToParentViewController:self]; 
```

# java - 关于 JFrame、JLabel 和 ContentPane 的概念问题

> ID：13553097
> 
> 赞同：1
> 
> 时间：2012-11-25T16:43:15.397
> 
> 标签：java, swing, jframe, jlabel, contentpane

我只是用awt学习窗口编程。

我看穿了几个代码，但我无法理解 JFrame、JLabel 和 ContentPane 的概念。

我认为 JFrame 只制作外框。ContentPane 是包含具有内容（文本、按钮、单选等）的 JLabel 的容器。

我不知道这是正确的TT

为什么我问这个是我没有结合内容。我不能一次制作 TextField 和 InternalFrame。

我想知道这个概念。我希望你能正确回答我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T17:02:39.117

您需要清楚地了解 AWT 与 Swing。这是[Swing 或 AWT 的一个很好的解释：哪个适合您？](http://www.ibm.com/developerworks/grid/library/os-swingswt)

**JFame :**
java.awt.Frame 的扩展版本，增加了对 JFC/Swing 组件架构的支持。看看[如何制作框架](http://docs.oracle.com/javase/tutorial/uiswing/components/frame.html)

**JLabel :**
短文本的显示组件，例如`Name :`等`Phone Number :`，请参阅[如何使用标签](http://docs.oracle.com/javase/tutorial/uiswing/components/label.html)

**Container :**
Container 是一个包含或包裹其他组件的组件。它有助于在 GUI 中将相关组件组合在一起。[Swing Containers](http://oreilly.com/catalog/jswing/chapter/ch08.pdf)文件

# scala - 什么是“多态性点菜”，我如何从中受益？

> ID：13553100
> 
> 赞同：80
> 
> 时间：2012-11-25T16:43:19.973
> 
> 标签：scala, functional-programming, typeclass, multimethod

在他的演讲[Simple Made Easy](http://www.infoq.com/presentations/Simple-Made-Easy)中，Rick Hickey 谈到了“**点菜多态**”（大约 30:00 进入视频）。在相同的上下文中，他还提到了 Haskell 的[类型类](http://en.wikipedia.org/wiki/Type_class)和 Clojure 的[多方法](http://en.wikipedia.org/wiki/Multiple_dispatch)（和协议）。

由于我对这些概念不是很熟悉，因此我想了解它在尝试实现**简单**性时的用处。我对**Scala**中有关此概念的任何示例或展示特别感兴趣。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-11-27T09:45:27.843

您可以*按需选择**多态*作为多态。

 *Clojure 社区对“*点菜多态*”一词感到自豪，因为 Clojure 支持多种多态策略。他们之中有一些是：

*   [基于原型的多态性](https://stackoverflow.com/questions/5024211/clojure-adding-functions-to-defrecord-without-defining-a-new-protocol)

*   继承多态性

    这是Java使用的多态策略。Clojure 通过代理支持这一点。在进行 Java 互操作时很有用。

*   协议

    Clojure 的协议就像 Haskell 的 TypeClass。

*   多方法

    虽然协议基于第一个参数的类型提供多态分派，但多方法更加灵活，可以基于方法的（任何）参数的任何函数进行分派。

*多态点菜*意味着“选择最适合您情况的多态策略。它们都在您的工具箱中。”

您可以`TypeClass`使用隐式在 Scala 中实现模式。如果您想要真实世界的示例，请阅读[Scalaz 源代码。](https://github.com/scalaz/scalaz)Scala 不支持语言级别的多方法，但我想在即将到来的 2.10 宏的帮助下这是可能的。

至于好处，TypeClass 和 Multimethod 等高级多态策略可以帮助解决[Expression Problem](http://en.wikipedia.org/wiki/Expression_problem)。

> “目标是按情况定义数据类型，在这种情况下，可以在数据类型上添加新的情况并在数据类型上添加新的函数，而无需重新编译现有代码，同时保持静态类型安全（例如，无强制转换）”。

顺便说一句，这个问题太大了，不适合单个 StackOverflow 问题。我的建议是熟悉这些概念，然后你就会明白它们的用处。*

# android - 从反编译的 .apk 创建 Android .apk

> ID：13553107
> 
> 赞同：-3
> 
> 时间：2012-11-25T16:44:18.700
> 
> 标签：android

我使用 dex2jar 反编译了一个 Android .apk 文件，使用 jd-gui "File > Save All Sources" 获取了 java 源文件，并得到了一个 .zip 文件和其中的 java 文件。我完全按照本“指南”中的步骤进行操作：http: [//a4apphack.com/security/sec-code/extract-android-apk-from-market-and-decompile-it-to-java-source](http://a4apphack.com/security/sec-code/extract-android-apk-from-market-and-decompile-it-to-java-source)。

然后我对几个 java 文件做了一些更改，现在我想知道如何重新创建一个 apk 文件。

使用 apktool 进行反编译，backsmali 和 smali 工具使用 .smali 文件，但现在我有 .java 文件...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T16:55:33.137

AFAIK你不能。将 Smali 文件转换为 java 并不完美，而且 99% 的时间您都不会得到准确的代码，因此如果有办法重新编译它，它很可能无法运行并且会崩溃（取决于源代码的复杂性）。如果你想修改一个应用程序（我不建议这样做。**说真的，不要这样做，没有开发人员的明确批准！**）你必须修改 smali 文件，然后你可以使用 apktool 重新编译它这个：

```
apktool b <app name> 
```

然后签名：

```
java -jar SignApk.jar key.pem key.pk8 <app name>.apk <app name>_signed.apk 
```

# jquery - Fancybox v2.1.3

> ID：13553110
> 
> 赞同：0
> 
> 时间：2012-11-25T16:44:44.983
> 
> 标签：jquery, fancybox

嗨，所有花式盒子爱好者。我如何在这里插入助手：

```
 $(document).mouseleave(function() {
         $.fancybox("#feedback_form");
     });​ 
```

我被困在那里了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T18:06:39.227

（我猜）你可以这样做：

```
 $(document).mouseleave(function() {
         var options = {
           openEffect: 'elastic',
           helpers: {
             title: {
               type: 'inside'
             }
           }
         };
         $.fancybox("#feedback_form", options);
     });​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T16:49:06.000

这个问题不是很清楚，但我猜你正在寻找这样的东西？

```
 $(document).mouseleave(function() {
         $("#feedback_form").show(); // this will remove the 'display:none'
         $("#feedback_form").fancybox();
 });​ 
```

# android - 从/到活动共享数据

> ID：13553112
> 
> 赞同：0
> 
> 时间：2012-11-25T16:44:50.963
> 
> 标签：android, android-activity

```
Intent i = new Intent(getApplicationContext(), NewActivity.class);
i.putExtra("new_variable_name","value");
startActivity(i);

Bundle extras = getIntent().getExtras();
if (extras != null) {
String value = extras.getString("new_variable_name");
} 
```

我的情况有点不同：我的主要活动调用了另一个（索引活动）：

```
Intent index = new Intent(this, Index.class);
startActivity(index); 
```

从索引活动中，用户可以从列表中进行选择。

所以，我需要将索引的类变量传递给主要活动。如何？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T18:36:09.207

好的，我完成了：

主要活动：

```
Intent i = new Intent(this, Index.class);
  startActivityForResult(i, 1); 
```

指数：活动：

```
 button1.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {   
            String result = "1";
            Intent returnIntent = new Intent();
             returnIntent.putExtra("result",result);
             setResult(RESULT_OK,returnIntent);     
             finish(); 
```

主要活动：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

    if (requestCode == 1) {

         if(resultCode == RESULT_OK){

          String result=data.getStringExtra("result");
          value=result;
     }

    if (resultCode == RESULT_CANCELED) {
         //Write your code on no result return 

    }}
    } 
```

“结果”是索引活动中的正确变量，但我需要将该变量用于主类，而不仅仅是在该方法中。

所以我希望将“结果”变量分享给整个班级。

方法是什么？

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T16:47:00.947

您需要使用 Activity 的方法`startActivityforResult`。

[请参阅此处](http://micropilot.tistory.com/1577)应如何使用它的示例。

基本上这个想法是用来`Bundles`在活动之间传递数据。这样，即使活动因资源不足而在一段时间前被破坏，系统也可以恢复活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T16:50:26.327

```
Intent intent= new Intent(this, Index.class);
i.putExtra("data", "data");
startActivity(intent); 
```

在 Index 类中使用这个：

```
Bundle extras = getIntent().getExtras();
String data = extras.getString("data"); 
```

# c - char数组用strtok分割ip

> ID：13553113
> 
> 赞同：0
> 
> 时间：2012-11-25T16:44:51.587
> 
> 标签：c

我正在尝试从文件中拆分像 127.0.0.1 这样的 IP 地址：

使用以下 C 代码：

```
pch2 = strtok (ip,".");
printf("\npart 1 ip: %s",pch2);
pch2 = strtok (NULL,".");
printf("\npart 2 ip: %s",pch2); 
```

IP 是一个字符 ip[500]，它包含一个 ip。

打印时将 127 作为第 1 部分打印，但作为第 2 部分打印 NULL？

有人能帮我吗？

编辑：

整体功能：

```
FILE *file = fopen ("host.txt", "r");
char * pch;
char * pch2;
char ip[BUFFSIZE];
IPPart result;

if (file != NULL)
{
    char line [BUFFSIZE]; 
    while(fgets(line,sizeof line,file) != NULL)
    {
        if(line[0] != '#')
        {
                            pch = strtok (line," ");
            printf ("%s\n",pch);

            strncpy(ip, pch, strlen(pch)-1);
            ip[sizeof(pch)-1] = '\0';

            //pch = strtok (line, " ");
            pch = strtok (NULL," ");
            printf("%s",pch);

            pch2 = strtok (ip,".");
            printf("\nDeel 1 ip: %s",pch2);
            pch2 = strtok (NULL,".");
            printf("\nDeel 2 ip: %s",pch2);
            pch2 = strtok(NULL,".");
            printf("\nDeel 3 ip: %s",pch2);
            pch2 = strtok(NULL,".");
            printf("\nDeel 4 ip: %s",pch2);

        }
    }
    fclose(file);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T17:02:04.863

你做一个

```
strncpy(ip, pch, sizeof(pch) - 1);
ip[sizeof(pch)-1] = '\0'; 
```

这应该是

```
strncpy(ip, pch, strlen(pch));
ip[strlen(pch)] = '\0'; 
```

或者更好，只是

```
strcpy(ip, pch); 
```

因为`sizeof(pch) - 1`is `sizeof(char*) - 1`，在 32 位机器上只有 3 个字节。这对应于 3 个字符，即“127”，这与您观察到的第二个`strtok()`给出 NULL 一致。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T16:59:00.793

我使用您的代码如下，它适用于我

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

char ip[500] = "127.0.0.1";

int main() {
    char *pch2;
    pch2 = strtok (ip,".");
    printf("\npart 1 ip: %s",pch2);
    pch2 = strtok (NULL,".");
    printf("\npart 2 ip: %s",pch2);
    return 0; 
} 
```

执行

```
linux$ gcc -o test test.c
linux$ ./test

part 1 ip: 127
part 2 ip: 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T17:04:02.360

发现问题，Visual Studio 将 0 添加到指针中，这与 NULL 相同...

# c# - 在 Windows 8 中将集合保存到页面状态？

> ID：13553121
> 
> 赞同：0
> 
> 时间：2012-11-25T16:45:18.217
> 
> 标签：c#, windows-8, windows-runtime

我有一个将网络漫画图像加载到 FlipView 的应用程序，我想将其保存为页面状态，但是我似乎在将列表保存到 LocalSettings 时遇到了一些麻烦。有没有办法让我序列化这些数据，以便我可以保存 FlipView 的状态？这是漫画的代码：

```
public class Comic
{
    public int Month { get; set; }
    public int Num { get; set; }
    public string Link { get; set; }
    public int Year { get; set; }
    public string News { get; set; }
    public string Safe_Title { get; set; }
    public string Transcript { get; set; }
    public string Alt { get; set; }
    public string Img { get; set; }
    public string Title { get; set; }
    public int Day { get; set; }

    public Comic() { }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T20:38:17.553

[LocalSettings](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdata.localsettings.aspx)中的每个元素都必须是受支持的[Window Runtime 类型](http://msdn.microsoft.com/en-us/library/windows/apps/br205768.aspx)，因此您无法保存类实例本身，但您可以创建复合值并设置各个属性。查看[ApplicationDataCompositeValue的代码示例](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdatacompositevalue.aspx)

或者，您可以序列化为 JSON 并存储为单个字符串（如果总长度 < 8K）或使用[LocalFolder](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdata.localfolder.aspx)与 LocalSettings 中的文件。

# php - Javascript：如何替换 [] 和“？

> ID：13553123
> 
> 赞同：3
> 
> 时间：2012-11-25T16:46:00.217
> 
> 标签：php, javascript, regex, arrays, split

我从 PHP 发送一个数组，将其编码为 JSON，并将其发送到 JavaScript 值。现在我想在逗号上拆分数组`,`。这很好用，但是当调用数组中的第一个和最后一个字符串时，我可以看到一个`[`,`]`和`"`.

我可以解决问题`"`，但是`[`and`]`似乎是个问题。

我现在的代码：

```
data_array[i].replace(/["[]]/g,""); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-25T16:47:59.497

如果您将字符串值`"[5,4,7,2,1]"`从 PHP 传输到 Javascript，您应该将`JSON decode`其转换为原生 Javascript 对象/数组。

```
var receivedData = "[5,4,7,2,1]";
    receivedData = JSON.parse( receivedData ); 
```

从那时起，您可以`receivedData`像普通*数组一样访问*

```
console.log( receivedData[ 2 ] );  // 7 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T16:48:44.753

您应该转义特殊字符：

```
data_array[i].replace(/["[\]]/g,""); 
```

# scala - Scala 将 while 循环扩展为 do-until 表达式

> ID：13553127
> 
> 赞同：9
> 
> 时间：2012-11-25T16:46:21.027
> 
> 标签：scala

我正在尝试用 Scala 做一些实验。我想重复这个实验（随机），直到出现预期的结果并得到那个结果。如果我使用 while 或 do-while 循环执行此操作，那么我需要编写（假设“body”代表实验，“cond”表示是否符合预期）：

```
do {
  val result = body
} while(!cond(result)) 
```

但是，它不起作用，因为最后一个条件不能引用循环体中的局部变量。我们需要像这样修改这个控制抽象：

```
def repeat[A](body: => A)(cond: A => Boolean): A = {
  val result = body
  if (cond(result)) result else repeat(body)(cond)
} 
```

它以某种方式工作，但对我来说并不完美，因为我需要通过传递两个参数来调用此方法，例如：

```
val result = repeat(body)(a => ...) 
```

我想知道是否有更有效和更自然的方法来做到这一点，使它看起来更像一个内置结构：

```
val result = do { body } until (a => ...) 
```

在这篇文章中找到了*一个针对没有返回值*的 body 的出色解决方案：[如何在重复直到之前使 Scala 控制抽象？](https://stackoverflow.com/questions/3036058/how-does-one-make-scala-control-abstraction-in-repeat-until)，最后一个单行答案。它`body`在该答案中的部分不返回值，因此`until`可以是新`AnyRef`对象的方法，但该技巧不适用于此处，因为我们想要返回`A`而不是`AnyRef`. 有什么办法可以做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T20:31:55.533

您正在混合编程风格并因此而陷入困境。

除非您在其中执行某种副作用，否则您的循环仅适用于加热处理器。

```
do {
  val result = bodyThatPrintsOrSomething
} until (!cond(result)) 
```

因此，如果您要使用副作用代码，只需将条件放入 var 中：

```
var result: Whatever = _
do {
  result = bodyThatPrintsOrSomething
} until (!cond(result)) 
```

或等价物：

```
var result = bodyThatPrintsOrSomething
while (!cond(result)) result = bodyThatPrintsOrSomething 
```

或者，如果您采用函数式方法，则无论如何您都必须返回计算结果。然后使用类似的东西：

```
Iterator.continually{ bodyThatGivesAResult }.takeWhile(cond) 
```

（有一个众所周知的烦恼是`Iterator`没有做好所有好的工作加上列表中的第一个坏的工作）。

或者您可以使用`repeat`尾递归的方法。如果您不相信它，请检查字节码（使用`javap -c`），添加`@annotation.tailrec`注释以便编译器在它不是尾递归时抛出错误，或者使用以下`var`方法将其编写为 while 循环：

```
def repeat[A](body: => A)(cond: A => Boolean): A = {
  var a = body
  while (cond(a)) { a = body }
  a
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-26T09:32:58.223

只需稍加修改，您就可以将当前方法转换为一种迷你流式 API，从而产生接近您想要的语法：

```
class run[A](body: => A) {
  def until(cond: A => Boolean): A = {
    val result = body
    if (cond(result)) result else until(cond)
  }
}
object run {
  def apply[A](body: => A) = new run(body)
} 
```

由于`do`是保留字，我们必须使用`run`. 结果现在看起来像这样：

```
run {
  // body with a result type A
} until (a => ...) 
```

**编辑：**

我刚刚意识到我几乎重新发明了链接[问题](https://stackoverflow.com/questions/3036058/how-does-one-make-scala-control-abstraction-in-repeat-until)中已经提出的内容。扩展该方法以返回类型`A`而不是的一种可能性`Unit`是：

```
def repeat[A](body: => A) = new {
  def until(condition: A => Boolean): A = {
    var a = body
    while (!condition(a)) { a = body }
    a     
  }   
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-12T21:44:26.903

只是为了记录之前提出的建议的派生，我采用了尾递归实现`repeat { ... } until(...)`，它还包括对迭代次数的限制：

```
def repeat[A](body: => A) = new {
  def until(condition: A => Boolean, attempts: Int = 10): Option[A] = {
    if (attempts <= 0) None
    else {
      val a = body
      if (condition(a)) Some(a)
      else until(condition, attempts - 1)
    }
  }
} 
```

这允许循环在`attempts`执行主体后退出：

```
scala> import java.util.Random
import java.util.Random

scala> val r = new Random()
r: java.util.Random = java.util.Random@cb51256

scala> repeat { r.nextInt(100) } until(_ > 90, 4)
res0: Option[Int] = Some(98)

scala> repeat { r.nextInt(100) } until(_ > 90, 4)
res1: Option[Int] = Some(98)

scala> repeat { r.nextInt(100) } until(_ > 90, 4)
res2: Option[Int] = None

scala> repeat { r.nextInt(100) } until(_ > 90, 4)
res3: Option[Int] = None

scala> repeat { r.nextInt(100) } until(_ > 90, 4)
res4: Option[Int] = Some(94) 
```

# php - 从单个查询中获取多条记录

> ID：13553129
> 
> 赞同：0
> 
> 时间：2012-11-25T16:46:26.970
> 
> 标签：php, html, mysql, sql

你好这里的人是我的查询

```
UPDATE `talent2db`.`talent_employee` SET `Rec_Status` = 'I' WHERE `talent_employee`.`Emp_Id` = '241074' AND `talent_employee`.`Rec_Status` = 'A' ;

UPDATE `talent2db`.`talent_employee` SET `Rec_Status` = 'I' WHERE `talent_employee`.`Emp_Id` = '785062' AND `talent_employee`.`Rec_Status` = 'A' ; 
```

通过使用上面的查询 IAM 尝试将“rec_status”从“A”设置为“I”，正如我们所见，我们正在尝试更新具有两个不同 emp_id 的两名员工......是否可以通过只编写一个查询来更新。 ..?? 它应该是这样的

```
UPDATE `talent2db`.`talent_employee` SET `Rec_Status` = 'I' WHERE `talent_employee`.`Emp_Id` = '785062,241074' AND `talent_employee`.`Rec_Status` = 'A' ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T16:50:21.080

您可以像这样使用条件（`talent_employee`. `Emp_Id`= '785062,241074' OR `talent_employee`. `Emp_Id`= '785062'）

以下是实际查询

```
UPDATE `talent2db`.`talent_employee` SET `Rec_Status` = 'I' WHERE (`talent_employee`.`Emp_Id` = '785062,241074' OR `talent_employee`.`Emp_Id` = '785062') AND `talent_employee`.`Rec_Status` = 'A' ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T16:50:18.727

使用`OR`从句。

```
UPDATE `talent2db`.`talent_employee` 
SET    `rec_status` = 'I' 
WHERE  (`talent_employee`.`emp_id` = '785062' OR `talent_employee`.`emp_id` = '241074') 
AND `talent_employee`.`rec_status` = 'A'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T16:51:08.040

尝试使用`IN`子句。

```
UPDATE `talent2db`.`talent_employee` 
SET `Rec_Status` = 'I' 
WHERE `talent_employee`.`Emp_Id` IN ('785062','241074') AND 
      `talent_employee`.`Rec_Status` = 'A' ; 
```

# php - 为什么我使用 curl 会得到错误的数据？

> ID：13553130
> 
> 赞同：0
> 
> 时间：2012-11-25T16:46:28.493
> 
> 标签：php, curl

我尝试获取 rss，但由于某种原因我得到了错误的数据：

```
$url = "http://rss.news.yahoo.com/rss/oddlyenough";
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_HEADER, 0);
$xml = curl_exec($ch);      
curl_close($ch);
echo htmlentities($xml, ENT_QUOTES, "UTF-8"); 
```

输出：

```
<!-- rc2.ops.ch1.yahoo.com uncompressed/chunked Sun Nov 25 15:57:06 UTC 2012 --> 
```

如果我尝试以其他方式加载这些数据，我会得到正确的数据。例如这个作品：

```
$xml = simplexml_load_file('http://rss.news.yahoo.com/rss/oddlyenough');
print "<ul>\n";
foreach ($xml->channel->item as $item){
  print "<li>$item->title</li>\n";
}
print "</ul>"; 
```

你能告诉我使用 curl 的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T16:55:34.163

你正在`Location`遇到障碍。

添加此选项：

```
 curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1); 
```

以便拥有：

```
$url = "http://rss.news.yahoo.com/rss/oddlyenough";
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_HEADER, 0);
$xml = curl_exec($ch);      
curl_close($ch);
echo htmlentities($xml, ENT_QUOTES, "UTF-8"); 
```

## 细节

当您运行上述代码时，您从 Yahoo! 收到的第一个答案！是：

```
HTTP/1.0 301 Moved Permanently
Date: Sun, 25 Nov 2012 16:31:36 GMT
P3P: policyref="http://info.yahoo.com/w3c/p3p.xml", CP="CAO DSP COR CUR ADM DEV TAI PSA PSD IVAi IVDi CONi TELo OTPi OUR DELi SAMi OTRi UNRi PUBi IND PHY ONL UNI PUR FIN COM NAV INT DEM CNT STA POL HEA PRE LOC GOV"
Cache-Control: max-age=3600, public
Location: http://news.yahoo.com/rss/oddlyenough
Vary: Accept-Encoding
Content-Type: text/html; charset=utf-8
Age: 1586
Content-Length: 81
Via: HTTP/1.1 rc4.ops.ch1.yahoo.com (YahooTrafficServer/1.20.10 [cHs f ])
Server: YTS/1.20.10

<!-- rc4.ops.ch1.yahoo.com uncompressed/chunked Sun Nov 25 16:31:36 UTC 2012 --> 
```

它告诉你使用新地址**http://news.yahoo.com/rss/oddlyenough**。

实际上，如果您直接使用新地址，您的原始代码**可以工作**（直到他们再次更改地址，也就是说......）并且速度更快，只发出一个请求而不是两个请求。

# objective-c - 取消按钮不会关闭 iOS 模拟器中的 ComposeMail 窗口

> ID：13553139
> 
> 赞同：2
> 
> 时间：2012-11-25T16:47:48.747
> 
> 标签：objective-c, ios, xcode, mfmailcomposeviewcontroller

我的实现很简单：

在`.h`文件中，我正在实施`MFMailComposeViewControllerDelegate`

在`.m`文件中，我有以下代码：

```
-(void)MailCurrentViewAsAttachment
{   
    if ( [MFMailComposeViewController canSendMail] ) {
        MFMailComposeViewController * mailComposer = [[MFMailComposeViewController alloc] init];
        mailComposer.delegate = self;
        [mailComposer addAttachmentData:imageData mimeType:@"image/jpeg" fileName:@"attachment.jpg"];

        [self presentViewController:mailComposer animated:YES completion:nil];
    }
}

-(void)mailComposeController:(MFMailComposeViewController *)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError *)error
{
    [self dismissViewControllerAnimated:YES completion:nil];
} 
```

上面的变量`imageData`是 UIImage 类型的，我确信它没有任何问题：所需的图像在撰写邮件窗口中正确显示。

但是，单击“取消”按钮不会关闭“撰写”窗口。我错过了什么？

注意：我使用 iOS 6 和最新版本的 xcode，我的应用是通用应用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T16:54:49.953

您设置了错误的代表。你要：

```
mailComposer.mailComposeDelegate = self; 
```

`MFMailComposeViewController`延伸`UINavigationController`。所以设置`delegate`是针对`UINavigationControllerDelegate`.

# c++ - 计算文件中字符的频率。C++

> ID：13553140
> 
> 赞同：0
> 
> 时间：2012-11-25T16:47:57.190
> 
> 标签：c++, character, frequency

任务是使用频率表（不区分大小写字母）将（给定文本文件）遇到的拉丁字符打印到文件 f1。该表必须按字母顺序排序。到目前为止，我的程序只计算字母 A。我在创建遍历整个字母表并将表格打印到另一个文件中的循环时遇到问题，你能帮我解决这些问题吗？

```
#include <stdio.h>
const char FILE_NAME[] = "yo.txt";
#include <stdlib.h> 
#include <iostream>
using namespace std;
int main() {
    int   count = 0;  /* number of characters seen */
    FILE  *in_file;    /* input file */

    /* character or EOF flag from input */
    int             ch;

    in_file = fopen(FILE_NAME, "r");
    if (in_file == NULL) {
        printf("Cannot open %s\n", FILE_NAME);
        system("Pause");
        exit(8);
    }

    while (1) {
        char cMyCharacter = 'A';
        int value = (int)cMyCharacter;
        ch = fgetc(in_file);
        if (ch == EOF){
            break;
        }
        int file_character = (int) ch;
        if (file_character == value || file_character == value+ 32) {
             count++;
        }
    }

    printf("Number of characters in %s is %d\n", FILE_NAME, count);
    char cMyCharacter = 'A';
    int iMyAsciiValue = (int)cMyCharacter;
    cout << iMyAsciiValue;
    system("Pause");
    fclose(in_file);

    return 1;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T17:15:51.510

首先，为 a 到 z 的频率获取一个大小为 26 的数组

```
int freq[26] = {0}; 
```

`freq[0]`对于'a'，`freq[1]`对于'b'等。

二、改变

```
if (file_character == value || file_character == value+ 32) 
```

至

```
if (file_character >= 'a' && file_character <= 'z') 
```

对于所有小写字母（即“a”到“z”）。

三、获取index并count by

```
freq[file_character - 'a']++; 
```

,`file_character - 'a'`计算索引，其余部分计算。

第四，打印`freq`数组。

五、添加

```
else if (file_character >= 'A' && file_character <= 'Z') 
```

对于大写字符，并相应地更改后续代码。

[这是你的功课，你应该试着自己弄清楚整个程序。我希望这个答案能为您提供足够的提示。]

# c++ - 评估 vector::empty() 正在使程序崩溃

> ID：13553144
> 
> 赞同：-1
> 
> 时间：2012-11-25T16:48:30.437
> 
> 标签：c++, vector, crash

我目前正在编写另一个程序（特别是游戏）的扩展，并且我已经坚持了几个小时来解决以下问题。

每当玩家（客户端）连接到游戏服务器时，`OnClientConnected(int client_number);`都会调用该函数。在这个函数中，我创建了一个`CPlayer`存储玩家信息的类的实例，例如健康、速度和我可能需要的任何其他数据。然后，此实例由以下类存储：

```
class CPlayerManager
{
    std::vector<Player*> *player_list;

    public:
    CPlayerManager();
    ~CPlayerManager();
    void AddPlayer(client_id)
    *CPlayer GetPlayerInstance(client_id);
}

CPlayerManager()
{
     player_list = new std::vector<Player*>;
}

~CPlayerManager()
{
     delete player_list;
}

void CPlayerManager::AddPlayer(client_id)
{
     CPlayer *player = new CPlayer(client_id);
     player_list->push_back(player);
}

void *CPlayerManager::GetPlayerInstance(client_id)
{
     if(player_list->empty())
     {
         return NULL;
     }

     for(std::vector<CPlayer*>::size_type i = 0; i != player_list->size(); i++)
 {
    int client = player_list->at(i)->GetClientId();
    if(client_id == client)
    {
        return player_list->at(i);
    }
 }
 return NULL;
} 
```

原始游戏函数使用客户端索引作为参数和返回值，所以我需要一直从客户端索引中获取玩家实例。问题出在`GetPlayerInstance`功能上。当实例尚未初始化和存储任何客户端时，可能会调用此函数`CPlayerManager`，因此我们可能有一个空向量。每当向量为空时调用该`GetPlayerInstance`函数，整个游戏服务器都会崩溃。我已经调试了一下，我注意到程序崩溃了：

```
//Code reaches here
if(player_list->empty())
{
    //code does not reach here
    return NULL;
} 
```

在我对声明`bool empty = player_list->empty())`进行评估之前，一直在做。`empty``if`

什么可能导致这种奇怪的崩溃？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T16:58:41.923

您的`CPlayerManager`类没有复制赋值运算符或复制构造函数。因此，如果您复制它，删除一个实例将删除另一个实例的向量，从而导致灾难。（遵循[三规则](http://en.wikipedia.org/wiki/Rule_of_three_%28C%2B%2B_programming%29)。）

真的，这段代码应该从轨道上被核弹。您不需要指向向量的指针，也不需要指针向量。这两件事都是自找麻烦。

# coq - 在 coq 中使用已经证明的 lema/theorem/corollary

> ID：13553145
> 
> 赞同：2
> 
> 时间：2012-11-25T16:48:37.560
> 
> 标签：coq

我正在尝试在 Coq 中进行证明，并且我想使用我已经定义和证明的引理。下面的代码可以吗？

```
Lemma conj_comm:
forall A B : Prop, A /\ B -> B /\ A.
Proof.
intros.
destruct H.
split.
exact H0.
exact H.
Qed.

Lemma not_conj_comm:
forall A B : Prop, ~(A /\ B) -> ~(B /\ A).
Proof.
intros.
intro.
unfold not in H.
apply H.
use H0. 
```

在上面我想使用 A /\B 与 B /\ A 相同的事实来证明 ~(A /\ B) 与 ~(B /\ A) 相同。是否可以使用我证明的引理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T17:02:04.067

您可以使用[`apply`](http://coq.inria.fr/refman/Reference-Manual011.html#htoc220)`<lemma>.`

这里有一个例子

[http://blog.mikael.johanssons.org/archive/2007/08/coq-and-simple-group-theory/](http://blog.mikael.johanssons.org/archive/2007/08/coq-and-simple-group-theory/)

看到上面写着的那一行`apply unit_uniq`

# android - 下载 hdpi、mdpi 和 ldpi 绘图并使用它们

> ID：13553149
> 
> 赞同：1
> 
> 时间：2012-11-25T16:48:51.203
> 
> 标签：android, android-layout

是否可以在运行时从给定的 URL 加载 hdpi、mdpi 和 ldpi 的可绘制对象并使用它们？

如果没有，我该如何克服密度问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T17:45:32.063

根据屏幕密度，您可以设置图像 URL，

```
DisplayMetrics metrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(metrics);
switch(metrics.densityDpi){
     case DisplayMetrics.DENSITY_LOW:
                url = "your_ldpi_url";
                break;
     case DisplayMetrics.DENSITY_MEDIUM:
                url = "your_mdpi_url";
                break;
     case DisplayMetrics.DENSITY_HIGH: 
                url = "your_hdpi_url";  
                break;
} 
```

您可以获取该图像并使用，

```
try {
    InputStream is = (InputStream) this.fetch(url);
    image = Drawable.createFromStream(is,"src");
} catch (MalformedURLException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T17:03:50.380

不可能。构建项目后，您无法执行此操作。用这个：

```
res/drawable-ldpi/my_icon.png        // bitmap for low density
res/drawable-mdpi/my_icon.png        // bitmap for medium density
res/drawable-hdpi/my_icon.png        // bitmap for high density
res/drawable-xhdpi/my_icon.png       // bitmap for extra high density 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T17:13:51.390

如果您真的非常想要，您可以[在运行时获取屏幕密度](https://stackoverflow.com/questions/3166501/getting-the-screen-density-programmatically-in-android)并根据结果[下载位图。](http://android-developers.blogspot.com/2010/07/multithreading-for-performance.html)但是，这是支持多种屏幕密度的一种非常低效的方法，应该避免。

如果您需要适当调整*必须*下载的图像（而不是每次运行时都会出现的图像）的大小，请查看[BitmapDrawable](http://developer.android.com/reference/android/graphics/drawable/BitmapDrawable.html)类。

# php - 如何在 PHP 中循环使用字符串作为索引的数组

> ID：13553153
> 
> 赞同：0
> 
> 时间：2012-11-25T16:49:15.907
> 
> 标签：php, arrays, string, loops

我必须用索引 AZ（字母表）创建一个数组。每个索引必须有一个值 0。所以我制作了这个数组：

```
$alfabet = array(
'A' => 0,
'B' => 0,
'C' => 0,
'D' => 0,
'E' => 0,
'F' => 0,
'G' => 0,
'H' => 0,
'I' => 0,
'J' => 0,
'K' => 0,
'L' => 0,
'M' => 0,
'N' => 0,
'O' => 0,
'P' => 0,
'Q' => 0,
'R' => 0,
'S' => 0,
'T' => 0,
'U' => 0,
'V' => 0,
'W' => 0,
'X' => 0,
'Y' => 0,
'Z' => 0
); 
```

我还从文件中获取了文本 ($text = file_get_contents('tekst15.txt');) 我已将该文件中的字符放入数组中： $textChars = str_split ($text); 并从 AZ 排序：sort($textChars);

我想要的是（使用 for 循环）当他在 textChars 数组中找到一个 A 时，另一个索引为 A 的数组的值增加一（比如：$alfabet[A]++;

谁能帮我解决这个循环？我有这个自动取款机：

```
for($i = 0; $i <= count($textChars); $i++){

while($textChars[$i] == $alfabet[A]){
$alfabet[A]++;
}

}
echo $alfabet[A]; 
```

问题 1：我想将 alfabet 数组循环到，所以现在我只检查 A 但我想检查所有索引。问题2：这现在为我尝试的每个字母索引返回 7，所以它完全错误:)

我对我的英语感到抱歉，但感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T16:56:13.377

听说过**[`foreach`](http://il.php.net/manual/en/control-structures.foreach.php)**循环吗？

```
foreach ($textChars as $index => $value) {
    $alfabet[$value]++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T17:05:18.787

我假设你的`$textChars`数组看起来像

```
$textChars = array (
    0 => 'A',
    1 => 'A',
    2 => 'B',
); 
```

如果是这样，您可以遍历它并使用它的值来检查给定索引是否存在`$alfabet`，然后增加它。

```
foreach($textChars as $char){
    if(isset($alfabet[$char])){
        $alfabet[$char]++;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T17:09:33.753

该[`count_chars()`](http://www.php.net/count_chars)功能可以立即为您提供该信息：

```
$stats = count_chars(file_get_contents('tekst15.txt'));

echo $stats['A']; // number of 'A' occurrences
echo $stats['O']; // number of 'O' occurrences 
```

从您的代码：

```
while($textChars[$i] == $alfabet[A]){
   $alfabet[A]++;
} 
```

完全没有意义；它将文本文件中的每个字符与最初的值`$alfabet[A]`（`0`甚至不是字母！）进行比较。

正确的说法是：

```
$alfabet[$textChars[$i]]++; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T17:15:35.993

```
$fp = fopen('tekst15.txt', 'r');
if (!$fp) {
    echo 'Could not open file tekst15.txt';
}
while (false !== ($char = fgetc($fp))) {
    if(isset($alfabet[strtoupper($char)]))
    { $alfabet[strtoupper($char)] = $alfabet[strtoupper($char)]+1; }
} 
```

# http - 现在不需要 Expires 标头吗？

> ID：13553160
> 
> 赞同：3
> 
> 时间：2012-11-25T16:49:55.247
> 
> 标签：http, caching, cdn, cache-control, expires-header

我看到大玩家（即 akamai）开始一起放弃`Expires`标题并且只使用`Cache-Control`，例如

```
curl -I https://fbcdn-sphotos-e-a.akamaihd.net/hphotos-ak-snc7/395029_379645875452936_1719075242_n.jpg

HTTP/1.1 200 OK
Last-Modified: Fri, 01 Jan 2010 00:00:00 GMT
Date: Sun, 25 Nov 2012 16:46:43 GMT
Connection: keep-alive
Cache-Control: max-age=1209600 
```

那么还有什么理由继续使用`Expires`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T16:53:11.103

*Cache-Control*在 HTTP 1.1 中被引入以取代*Expires*。如果两个标头都存在，则[*Cache-Control*优先于*Expires*](https://www.rfc-editor.org/rfc/rfc2616#section-14.9.3)：

> 如果响应包含 Expires 标头和 max-age 指令，则 max-age 指令将覆盖 Expires 标头，即使 Expires 标头更具限制性。对于给定的响应，此规则允许源服务器向 HTTP/1.1（或更高版本）缓存提供比 HTTP/1.0 缓存更长的到期时间。如果某些 HTTP/1.0 缓存不正确地计算年龄或过期时间，这可能很有用，可能是由于时钟不同步。

但仍有一些客户端只能使用 HTTP 1.0。因此，对于 HTTP 1.0 请求/响应，您仍应使用*Expires*。

# image - facebook图像与另一个图像合并

> ID：13553171
> 
> 赞同：1
> 
> 时间：2012-11-25T16:51:13.523
> 
> 标签：image, facebook-graph-api, merge

脸书图像合并

嗨，我想开发一个 facebook 应用程序。它将在哪里进行测验，然后将个人资料图片合并到证书图像中。结果。

index.php 文件如下

```
<?php
include_once "fbmain.php";
//if user is logged in and session is valid.
if ($user){
//fql query example using legacy method call and passing parameter
try{
$fql = "select name, hometown_location, sex, pic_square from user where uid=" . $user;
//http://developers.facebook.com/docs/reference/fql/
$param = array(
'method' => 'fql.query',
'query' => $fql,
'callback' => ''
);
$fqlResult = $facebook->api($param);
}
catch(Exception $o){
d($o);
}
}
//set page to include default is home.php
$page = isset($_REQUEST['page']) ? $_REQUEST['page'] : "home.php";
include_once "template.php";
?> 
```

home.php 如下

```
<?php
echo '<div id="namaz_content">';
echo '</div>';
echo $userInfo['picture'];
//Get the current users id
$uid = $facebook->getUser();
//create the url
$profile_pic = "http://graph.facebook.com/".$uid."/picture?width=80&height=80";
//echo the image out
echo "<img src=\"" . $profile_pic . "\" />";
echo '<img src="image.php?name=My name is Tushar&result=A%2D&taka=1000&subject=math" />';
?> 
```

image.php 文件如下

```
<?php
$text=$_GET['name'];
$result=$_GET['result'];
$subject=$_GET['subject'];
$taka='Tk. '.$_GET['taka'].'/-';
$dest = imagecreatefromjpeg('certificate.jpg');
$src = imagecreatefromjpeg('7e142c8d.jpg');
// Allocate A Color For The Text
$red = imagecolorallocate($dest,255,0,0);
$blue= imagecolorallocate($dest,0,0,255);
// Set Path to Font File
$font_path = 'bdquiz.ttf';
// Set Text to Be Printed On Image
// Print Text On Image
imagettftext($dest, 20, 0, 192, 240, $red, $font_path, $text);
imagettftext($dest,35, 0, 72, 380, $red, 'arial.ttf', $result);
imagettftext($dest,15, 0, 318, 420, $red, 'arial.ttf', $taka);
imagettftext($dest,15, 0, 270, 348, $blue, 'arial.ttf', $subject);
imagecopymerge($dest, $src, 468, 186, 0, 0, 80, 80, 100); //have to play with these numbers for it to work for you, etc.
//header('Content-Type: image/png');
imagejpeg($dest);
imagedestroy($dest);
imagedestroy($src);
?> 
```

这工作正常。但我希望在 image.php 中使用用户个人资料图片而不是 '7e142c8d.jpg' 解决方案是什么？请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T17:44:46.083

我不确定你在编码方面有多好，所以我分步解释。

在 home.php 中

在顶部添加：

`session_start();`

并将其添加到 profile_pic 之后的下一行

`$_SESSION['profilepic']=$profile_pic;`

现在在 image.php 中，在顶部添加这个

`session_start();`

改变这个

`$src = imagecreatefromjpeg('7e142c8d.jpg');`

至

`$src = imagecreatefromjpeg('$_SESSION['profilepic']');`

或者，如果您不想了解如何操作，只想让事情正常工作，请复制粘贴此内容。（我希望你想学习而不是复制粘贴。）

**主页.php**

```
<?php
session_start();
echo '<div id="namaz_content">';
echo '</div>';
echo $userInfo['picture'];
//Get the current users id
$uid = $facebook->getUser();
//create the url
$profile_pic = "http://graph.facebook.com/".$uid."/picture?width=80&height=80";
$_SESSION['profilepic'] = $profile_pic;
//echo the image out
echo "<img src=\"" . $profile_pic . "\" />";
echo '<img src="image.php?name=My name is Tushar&result=A%2D&taka=1000&subject=math" />';
?> 
```

**图片.php**

```
<?php
session_start();
$text=$_GET['name'];
$result=$_GET['result'];
$subject=$_GET['subject'];
$taka='Tk. '.$_GET['taka'].'/-';
$dest = imagecreatefromjpeg('certificate.jpg');
$src = imagecreatefromjpeg('$_SESSION['profilepic']');
// Allocate A Color For The Text
$red = imagecolorallocate($dest,255,0,0);
$blue= imagecolorallocate($dest,0,0,255);
// Set Path to Font File
$font_path = 'bdquiz.ttf';
// Set Text to Be Printed On Image
// Print Text On Image
imagettftext($dest, 20, 0, 192, 240, $red, $font_path, $text);
imagettftext($dest,35, 0, 72, 380, $red, 'arial.ttf', $result);
imagettftext($dest,15, 0, 318, 420, $red, 'arial.ttf', $taka);
imagettftext($dest,15, 0, 270, 348, $blue, 'arial.ttf', $subject);
imagecopymerge($dest, $src, 468, 186, 0, 0, 80, 80, 100); //have to play with these numbers for it to work for you, etc.
//header('Content-Type: image/png');
imagejpeg($dest);
imagedestroy($dest);
imagedestroy($src);
?> 
```

# html - 在html表格中设置列宽不显示滚动条

> ID：13553172
> 
> 赞同：0
> 
> 时间：2012-11-25T16:51:15.467
> 
> 标签：html, css, html-table

我正在尝试创建一个 HTML 表格，其中列宽是动态更改的，如果表格宽度大于容器，则会出现一个水平滚动条。

但是，我似乎无法让它工作 - 当我设置容器宽度时，它充当表格的上限，即使我明确设置列的宽度（使用 CSS 或 Jquery）表格拒绝显示正确的宽度。即使我设置了“溢出：滚动”，滚动条也永远不会激活。

当列宽变小时，表格宽度也应该减小，这就是为什么我不能使用表格宽度 = 100%。

***注意***：我知道如果每次更改列宽时都明确设置表格宽度（例如表格宽度=500px），则可以绕过此问题。我希望有一个更优雅的解决方案......

这是代码：

**JFiddle**：http: [//jsfiddle.net/sangil/NdY22/](http://jsfiddle.net/sangil/NdY22/)

**HTML**

```
<div class="container">
<table>
    <thead>
        <tr>
            <th class="a">th 1</th>
            <th>th 2</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>td 1</td>
            <td>td 2</td>
        </tr>
    </tbody>
</table>
</div> 
```

**CSS**

```
table {
    table-layout: fixed;
    border: 1px solid black;
    border-collapse: collapse;
}

table td {
    border: 1px solid black;
}

table th {
    border: 1px solid black;
    background-color: lightsteelblue;
}

.container{
    border: 1px solid lightsteelblue;
    width: 300px; 
    overflow: auto;                
} 
```

**JS**

```
$(function() {
   $('.a').width(500);
}); 
```

​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T18:40:56.947

**编辑：**

```
<div STYLE=" height: 100px; width: 100px; font-size: 12px; overflow: auto;">
    <table bgcolor="green">
       <tr><td bgcolor="blue">testing </td></tr>
       <tr><td>free php scripts;/td></tr>
       <tr><td bgcolor="blue">free php scripts</td></tr>
       <tr><td>free php scripts</td></tr>
       <tr><td bgcolor="blue">free php scripts</td></tr>
   </table>
</div> 
```

[见参考](http://www.hscripts.com/tutorials/css/scrollable-table.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T18:49:48.060

不确定我是否正确理解了您的问题。如果您在表格中使用滚动条，那么您可以通过使用类来简单地做到这`display: block`一点`.a`：

```
.a {
    width: 400px;
    display:block;
} 
```

[工作演示](http://jsfiddle.net/NdY22/26/)

# linux - 运算符是什么意思|| 在 Linux 外壳中？

> ID：13553173
> 
> 赞同：10
> 
> 时间：2012-11-25T16:51:38.153
> 
> 标签：linux, shell

我在 .sh 脚本中找到了这段代码：

```
 (test -x "$1" || which "$1") 
```

这个运算符`||`是什么意思？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-25T16:53:32.397

它等效于具有短路评估的布尔“或”，这样只有当第一个命令返回与“false”相对应的某个值时，它才会执行第二个命令。例如：

```
false || echo "foo" 
```

呼应“foo”，而

```
true || echo "foo" 
```

什么都不打印。`&&`运营商提供免费操作。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-25T16:54:08.717

它的意思是：

如果第一个命令成功第二个将永远不会被执行

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T16:54:39.883

双管道的作用是执行第一个命令，如果成功则停止执行，否则将执行第二个命令。

它与&&相反。

# c++ - Boost.Python - 与正在运行的 C++ 程序通信

> ID：13553174
> 
> 赞同：1
> 
> 时间：2012-11-25T16:51:51.543
> 
> 标签：c++, python, boost, boost-python

我阅读了一些 Boost.Python 教程，并且知道如何从 Python 调用 C++ 函数。但我想要做的是创建将始终在后台运行的 C++ 应用程序和能够从该 C++ 应用程序实例调用 C++ 函数的 Python 脚本。C++ 应用程序将是一个游戏服务器，它必须一直运行。我知道我可以使用套接字/共享内存等进行这种通信，但是可以使用 Boost.Python 来实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T03:09:34.427

Boost python 对于将 C++ 对象暴露给 python 很有用。

由于您正在谈论从 python 与*已经运行的*应用程序进行交互，并且脚本的生命周期比游戏服务器的生命周期短，我不认为 boost python 是您正在寻找的，而是某种形式的进程间通信。

虽然您可以在 C++ 中创建 IPC 机制，然后使用 boost python 将其公开给 python，但我怀疑这是您想要做的。

# vb.net - 无法枚举进程模块

> ID：13553176
> 
> 赞同：1
> 
> 时间：2012-11-25T16:52:22.447
> 
> 标签：vb.net, process, handle

我试图制作一个文件解锁器，它获取使用该文件的进程并将其杀死以使其能够被删除。当我的目标文件是 WMP 文件时没关系。但是当涉及到 dll 和 iso 时，我无法让它工作。我在这条线上遇到了问题：

用于获取进程名称。任何帮助表示赞赏。

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles BtnShow.Click
  Dim files As New List(Of String)
  files.Add(OpenFileDialog1.FileName)
  Dim Processes As List(Of Process) = Util.GetProcessesUsingFiles(files)
  RichTextBox1.AppendText(vbCrLf & "Processes that using the file is:")
  For Each p As Process In Processes
    TextBox1.Text = (Path.GetFileName(p.MainModule.FileName))
    TextBox1.Text = TextBox1.Text.Replace(".exe", "")
  Next
  Timer1.Start()
End Sub
  Private Sub Button3_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles BtnKill.Click
    If TextBox1.Text = ("Nothing") Then
        MsgBox("No proccess is using that file.")
    ElseIf MsgBox("Proccess(es) killed") Then
    End If
    For Each p As Process In System.Diagnostics.Process.GetProcessesByName(Path.GetFileName(TextBox1.Text))

        Try
            p.Kill()
            ' possibly with a timeout
            p.WaitForExit()
            ' process was terminating or can't be terminated - deal with it
        Catch winException As Win32Exception
            ' process has already exited - might be able to let this one go
        Catch invalidException As InvalidOperationException
        End Try
    Next 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-11-30T11:11:18.007

我已经有了解决方案。只需添加 Try..Catch..

# android - Android - 添加太多图像时应用程序崩溃

> ID：13553179
> 
> 赞同：2
> 
> 时间：2012-11-25T16:52:57.933
> 
> 标签：android

我的应用需要列出一项特定活动的文本和图像。列表的每一行有 2 列 - 1 列用于图像，1 列用于字符串。

如果图像数量很少（十个或更少），它就可以工作。当它超过 10（有时是 15）时，应用程序将崩溃。如何使这适用于十多个图像？

以下是列出文本和图像的代码。前 2 行从 strings.xml 检索数据。谢谢。

```
 pic=res.obtainTypedArray(R.array.site_pic);
            arr_site = getResources().getStringArray(R.array.site_name); 

    TableLayout tl = (TableLayout)findViewById(R.id.myTableLayout);

    for(int i=0; i<num_site; i++)
    {
         final TableRow tr = new TableRow(this);

         tr.setLayoutParams(new LayoutParams(
                        LayoutParams.FILL_PARENT,
                        LayoutParams.WRAP_CONTENT));
         tr.setPadding(0, 10, 0, 10);

         ImageView iv = new ImageView(this);
         iv.setImageDrawable(pic.getDrawable(i));
         iv.setAdjustViewBounds(true);
         iv.setMaxHeight(80);
         iv.setPadding(5, 5, 15, 5);             
         tr.addView(iv);

         TextView tv1 = new TextView(this);
         tv1.setText(arr_site[i]);
         tv1.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
                 LayoutParams.WRAP_CONTENT));
         tv1.setGravity(Gravity.LEFT);           
         tr.addView(tv1);

         tl.addView(tr,new TableLayout.LayoutParams(
                 LayoutParams.FILL_PARENT,
                 LayoutParams.WRAP_CONTENT));                            
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-09T05:21:14.263

如果您的图像尺寸是高分辨率的，那可能就是问题所在。根据我的经验，尽一切可能减小图像尺寸 - 但保持质量至关重要。

此外，如果所有其他方法都失败了，一个简单的修复（如果你还没有尝试过）是添加

**机器人：大堆=“真”**

在**`<application>`**您的 AndroidManifest.xml 文件的标签中。这是我自己的清单文件中的一个示例：

```
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme"
    android:largeHeap="true"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-09T07:47:21.207

使用`ViewHolder`逻辑。当您使用 ViewHolder 时，您的图像只是在滚动时替换为其他图像。另外，我建议您可以使用`GridView`显示您所说的项目。

这是参考：http: [//developer.android.com/training/improving-layouts/smooth-scrolling.html](http://developer.android.com/training/improving-layouts/smooth-scrolling.html)

这是一个教程： http: [//www.learn2crack.com/2014/01/android-custom-gridview.html](http://www.learn2crack.com/2014/01/android-custom-gridview.html)

# ios - 设置 UIButton 背景图像停止动画

> ID：13553180
> 
> 赞同：1
> 
> 时间：2012-11-25T16:52:58.880
> 
> 标签：ios, uiviewanimation

我尝试在动画完成中设置背景图像，基本上它可以防止动画发生。这是动画的代码：

```
 [UIView animateWithDuration: 0.5f animations: ^
                {
                //[buttonPanel setBackgroundImage: [UIImage imageNamed: imageName] forState: UIControlStateNormal];
                CGFloat yOrigin = buttonFrame.origin.y - (self.bounds.size.height - buttonFrame.size.height);
                yOrigin -= buttonFrame.size.height;
                buttonPanel.frame = CGRectMake(buttonFrame.origin.x, yOrigin, buttonFrame.size.width, buttonFrame.size.height);
                }
                completion: ^(BOOL finished)
                    {
                    [UIView animateWithDuration: 0.5f animations:^
                        {
[buttonPanel setBackgroundImage: [UIImage imageNamed: imageName] forState: UIControlStateNormal];
                        [self setAlpha: 1.0f];
                        }];
                    }]; 
```

如果我删除 setBackgroundImage: 消息，它只会正确地动画到新的帧位置。为什么？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T01:58:07.830

好的，新的答案！你的评论给了我需要的线索。你说：

> 使按钮返回初始帧是有原因的。基本上任何操作，例如从此 UIViewController 调用模态 UIViewController 将按钮设置为初始 Fram 位置

正确的。因为显示模态控制器然后关闭它会导致您的视图出现，并导致布局发生。您必须使用自动布局！自动布局会导致这种情况发生。所以这里的问题是您不了解在使用自动布局时如何更改视图的位置/大小（在动画或任何其他时间）。

规则很简单。**为束缚而活的人，因束缚而死。**如果您使用自动布局，则不得更改任何内容的框架。您必须通过更改约束来进行所有位置/大小调整。

奇妙的是，这通常比改变框架更容易和简单！您不必获取框架、更改框架并分配框架；相反，您通常可以`constant`直接更改约束。

在此示例中，我为 UITextView 的收缩设置动画，以便当键盘从屏幕底部（iPhone）升起时，整个 UITextView 将可见：

```
[UIView animateWithDuration:duration.floatValue
                 animations:
 ^{
     self.bottomConstraint.constant = -r.size.height;
     [self.view layoutIfNeeded];
 } completion:nil]; 
```

这就是如何为约束设置动画：当您更改 时`constant`，您还必须在动画的每个瞬间调用`layoutIfNeeded`以获取新布局。

所以，我并不是说你不使用自动布局是错误的。它是“选择加入”；您可以在需要时开始使用，可以在某些笔尖中使用它，而不是在其他笔尖中使用，等等。但它比旧的布局方式强大得多，并且在许多方面它会导致更简单的代码 - 一旦你*知道*如何使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T18:08:17.757

`backgroundImage`不是可动画的属性，那么为什么要将它设置在动画块中？尝试在所有动画之前设置它。只是一个猜测，但值得一试。

编辑：我刚试过这个：

```
[UIView animateWithDuration:0.4 animations:^{
    CGRect r = self.otherButton.frame;
    r.origin.y += 100;
    self.otherButton.frame = r;
    [self.otherButton setBackgroundImage:[UIImage imageNamed:@"car.jpg"] 
                                forState:UIControlStateNormal];
}]; 
```

它工作得很好。所以我无法重现您的问题。您的代码中是否还有其他事情您没有告诉我们？换句话说，试着把它简化为一个更简单的情况，然后重新构建它，这样你就会发现事情出错的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T20:33:56.670

好的，

我发现了这个疯狂的问题，我有一个 UIViewController，使用 Autolayout 检查它弄乱了我所有的动画。即使您选中了 UIViewController 使用 Autolayout，它也会弄乱所有控制器，可能是因为我不使用 UINavigationController，而且 segues 是模态的。

这是。

# python - 这个字符 - ㎜ - 引发 UnicodeEncodeError

> ID：13553185
> 
> 赞同：5
> 
> 时间：2012-11-25T16:54:15.070
> 
> 标签：python, unicode, encoding, python-3.x, gb2312

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-25T17:26:07.523

# ruby-on-rails - 具有用户身份验证的 Rails Web 应用程序是否有“模板”？

> ID：13553187
> 
> 赞同：2
> 
> 时间：2012-11-25T16:54:28.930
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

是否可以通过将现有的 Rails 应用程序（最好是已设置用户身份验证系统的应用程序）更改为模板来执行您希望它执行的操作？

我希望有类似 wordpress 之类的东西适用于 php，我可以添加它以使其做我想做的事情。Wordpress 已经内置了用户身份验证和其他重要的东西。然后我可以进去让它做我想做的事。

这个问题可能揭示了对框架概念的根本误解，但我不得不问。

ps - 问这个问题的另一种方法可能是“我可以使用带有用户身份验证的基本 Rails 应用程序，然后重构它并添加我自己的模型吗？”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T18:09:31.907

这两个解决方案似乎是我正在寻找的：

[https://github.com/RailsApps/rails-composer/](https://github.com/RailsApps/rails-composer/)

和

[http://blog.bryanbibat.net/2011/01/03/starting-a-professional-rails-app-with-haml-rspec-devise-and-web-app-theme/](http://blog.bryanbibat.net/2011/01/03/starting-a-professional-rails-app-with-haml-rspec-devise-and-web-app-theme/)

我将通过教程并报告回来。

# php - 按顺序上传文件

> ID：13553191
> 
> 赞同：0
> 
> 时间：2012-11-25T16:54:51.780
> 
> 标签：php, javascript, file-upload

我想按顺序上传文件。当我这样做时，我最后上传的文件将进入文件系统，而我的 php 代码将看不到我之前上传的文件。有人有类似的问题吗？

```
function inputImages() 
{
    print_r($_FILES);
    $images_number = count($_FILES['images']['name']);
    $uploadDir = 'tmp_name/';
    $images = array();

    for ($i=0; $i<$images_number; $i++) {
        $fileName = $_FILES['images']['name'][$i];
        $tmpName  = $_FILES['images']['tmp_name'][$i];
        $permanentname = sha1($tmpName.$fileName.rand()).substr($fileName,-4);
        $filePath = $uploadDir . $permanentname;
        $result = move_uploaded_file($tmpName, $filePath);  
        if (!$result) {
         $ErrorMessage.= "Error uploading <strong>file</strong>";
        } else {
            array_push($images, $permanentname);            
        }        
    }
    return $images;
} 
```

# html - 使溢出中的一个元素完全可见：隐藏元素

> ID：13553197
> 
> 赞同：0
> 
> 时间：2012-11-25T16:55:31.600
> 
> 标签：html, css

请检查[http://jsfiddle.net/mtN6R/9/](http://jsfiddle.net/mtN6R/9/)

```
.tooltip{
    color:red;
}
.wrapper {
    overflow:hidden;
    height:50px;
    border:1px solid black;
    width:50px;
    position:relative;
}

<div class="wrapper">
    <div class='tooltip'>A big tooltip which should be visible fully</div>
     A lot of text<br> 
          A lot of text<br>      
</div> 
```

我需要 .tooltip 使其完全可见，但我不能将它放在包装器之外。我们可以对该示例进行样式化，以便 .tooltip 将显示在包装器上方，而其余内容将保持原样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T17:40:35.650

我认为你想要的是只有你的内容本身`overflow: hidden`就可以了：

CSS：

```
.tooltip{
    color:red;
}
.wrapper {
    position:relative;
}
.inner {
    overflow:hidden;
    height:50px;
    border:1px solid black;
    width:50px;
} 
```

HTML：

```
<div class="wrapper">
    <div class='tooltip'>A big tooltip which should be visible fully</div>
    <div class="inner">
        A lot of text<br>
        A lot of text<br>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T17:02:02.407

**[当然，给工具提示一个绝对位置，然后像在这个jsFiddle 示例](http://jsfiddle.net/j08691/mtN6R/6/)**中那样根据需要移动东西

```
.tooltip{
    color:red;
    position: absolute;
    top:0;
}
.wrapper {
    overflow:hidden;
    height:50px;
    border:1px solid black;
    width:50px;
    margin-top: 20px;
}​ 
```

# html - Flash动画替代品

> ID：13553201
> 
> 赞同：0
> 
> 时间：2012-11-25T16:55:58.003
> 
> 标签：html, flash, animation

我有客户要求可以在 ipad 上运行的动画。为此，它必须是非闪存。他们还希望动画在 IE 中工作。我的问题是，是否有最佳实践？我假设使用 flash 并使用 flash html5 导出导出。嗅出画布功能并为 IE6/7/8 闪存提供后备。原因是使用 flash IDE 时间线构建复杂角色动画的速度要快得多，而且 css3 的性能更好。或者最好的做法是用javascript构建所有东西，比如greensock，然后一个接一个地构建它。或者，对于没有安装 Flash 且不支持画布的 IE 用户，是否有一些东西可以将 Flash 或画布动画转换为 javascript？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-17T06:43:42.273

试试 Adob​​e Edge。

[http://html.adobe.com/edge/animate/](http://html.adobe.com/edge/animate/)

看起来非常令人印象深刻。

# api - 与谷歌图书 api 连接

> ID：13553203
> 
> 赞同：0
> 
> 时间：2012-11-25T16:56:04.870
> 
> 标签：api, android-intent, web

我正在做一个课堂项目，由于我是 Android 上的 Web API 新手，所以我四处寻找可以在我的 android 项目中使用的示例 Google 书籍 Intent。我什至尝试使用 JSON，但不知道如何继续。如果有人可以帮助我使用示例 google 代码 android 类来使用 uri 获取内容，我会喜欢的。谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T04:41:06.063

您必须注册到 google API 并获取**API 密钥**

[https://code.google.com/apis/console/?pli=1#project:713668701465](https://code.google.com/apis/console/?pli=1#project:713668701465)

在**服务**链接 => **ON** Books API

在**API Access**链接 => 在 Simple API Access 下获取**API KEY**

并按照此说明

[https://developers.google.com/books/](https://developers.google.com/books/)

例如：www.googleapis.com/books/v1/volumes?q=isbn:1419705849&key={您的 api 密钥}

# ios - iOS：UITabbar 中类似 iTunes 的徽章

> ID：13553206
> 
> 赞同：1
> 
> 时间：2012-11-25T16:56:13.207
> 
> 标签：ios, cocoa-touch, uitabbarcontroller, storyboard, uitabbaritem

我有`UITabBarController`一个`Storyboard`。现在，它有 5 `UITabBarItems`。当我在另一个时`UITabBarItem`，我想更新另一个 UITabBarItem（我的“下载”）上的徽章，`iTunes`就像当您购买歌曲或专辑时应用程序使用这个“类似跳跃”的动画一样。这可能吗？如果是，如何？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T03:04:17.240

是的...

像我称之为“发送到下载”类型的动画这样的动画有很多。我会用一个例子来回答这个问题。

**警告：这个例子比我想要的更多地打破了`MVC`范式，但它已经足够长了。**

我将使用这样的简单故事板（事实上，正是这样）：

![显示带有两个视图控制器的 tabBarController 的情节提要。 第一视图控制器和下载视图控制器。](../Images/444222738ae21214e7611caf92982f09.png)

我将从描述“First View Controller - First”开始：

视图中的许多按钮连接到一个列出的`IBAction`方法。这就是该视图控制器所需的所有描述。这是它的`.m`文件：（截断）

```
//#import "First_View_Controller.h"
@interface First_View_Controller ()
@property (weak, nonatomic) DownloadViewController *downloadViewController;
@end

@implementation First_View_Controller
@synthesize downloadViewController = _downloadViewController;
-(DownloadViewController *)downloadViewController{
    if (!_downloadViewController){
        // Code to find instance of DownloadViewController in the tabBarController's view controllers.
        for (UIViewController *vc in self.tabBarController.viewControllers) {
            if ([vc isKindOfClass:[DownloadViewController class]]){
                _downloadViewController = (DownloadViewController *)vc;
                break;
            }
        }
    }
    return _downloadViewController;
}
-(IBAction)buttonPush:(UIButton *)button{
    [self.downloadViewController addADownload:nil withViewToAnimate:button];
}
// Other typical VC crap...
@end 
```

这`IBAction`是相当不言自明的。它`DownloadViewController`通过查看 tabBarController 的视图控制器获取对 的实例的引用，并将视图传递给该实例以进行动画处理。

现在为`DownloadViewController.m`. 这是很多代码。我已经评论了它，试图说清楚：

```
#import "DownloadViewController.h"
#import <QuartzCore/QuartzCore.h>
// A Category on UITabBar to grab the view of a tab by index.
@implementation UITabBar (WhyIsntThisBuiltIn)
-(UIView *)nj_ViewOfTabNumber:(NSUInteger)number{
    if (number == NSNotFound) return nil;
    // Fairly standard method for getting tabs, getting the UIControl objects from the 'subviews' array.
    // I pulled the next few lines from an SO question.
    NSMutableArray *tabs = [[NSMutableArray alloc] init];
    [self.subviews enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop){
        if ([(NSObject *)obj isKindOfClass:UIControl.class]){
            [tabs addObject:obj];
        }
    }];
    // The code above gets the tabs' views, but they may not be in the correct order.
    // This sort is required if a view controller has been replaced,...
    // Since, in that case, the order in which the tabs' views appear in the 'subviews' array will not be the left-to-right order.
    [tabs sortUsingComparator:^NSComparisonResult(UIView *obj1, UIView *obj2){
        CGFloat v1 = obj1.center.x;
        CGFloat v2 = obj2.center.x;
        if (v1<v2) return NSOrderedAscending;
        if (v1>v2) return NSOrderedDescending;
        return NSOrderedSame;
    }];
    // This if is required for the case where the view controller is in the "more" tab.
    if (number >= tabs.count) number = tabs.count-1;
    return [tabs objectAtIndex:number];
}
@end
// A Category on UITabBarController to get the view of a tab that represents a certain view controller.
@implementation UITabBarController (WhyIsntThisBuiltIn)
-(UIView *)nj_viewOfTabForViewController:(UIViewController *)viewController{
    // Find index of the passed in viewController.
    NSUInteger indexOfViewController = [self.viewControllers indexOfObject:viewController];
    if (indexOfViewController == NSNotFound) return nil;
    // Return the view of the tab representing the passed in viewController.
    return [self.tabBar nj_ViewOfTabNumber:indexOfViewController];
}
@end

// Insert required warning about using #defines here.
#define MY_ANIMATION_DURATION 0.8
@implementation DownloadViewController{
    NSUInteger _numberOfDownloads;
}
-(void)updateBadgeValue{
    self.tabBarItem.badgeValue = [NSString stringWithFormat:@"%i",_numberOfDownloads];
}
// This method creates a "snapshot" of the animation view and animates it to the "downloads" tab.
// Removal of the original animationView must, if desired, be done manually by the caller.
-(void)addADownload:(id)someDownload withViewToAnimate:(UIView *)animationView{
    // update model...
    _numberOfDownloads++;

    // Animate if required
    if (animationView){

        // Create a `UIImageView` of the "animationView" name it `dummyImageView`
        UIGraphicsBeginImageContextWithOptions(animationView.frame.size, NO, [[UIScreen mainScreen] scale]);
        [animationView.layer renderInContext:UIGraphicsGetCurrentContext()];
        UIImage *dummyImage = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();
        UIImageView *dummyImageView = [[UIImageView alloc] initWithImage:dummyImage];
        dummyImageView.frame = animationView.frame;

        // Determine UIView of tab using non-private API.
        UITabBarController *tabBarController = self.tabBarController;
        UIView *downloadsTab = [tabBarController nj_viewOfTabForViewController:self];

        // Determine animation points in tabBarController's view's coordinates.
        CGPoint animationStartPoint = [tabBarController.view convertPoint:dummyImageView.center fromView:dummyImageView.superview];
        CGPoint animationEndPoint = [tabBarController.view convertPoint:downloadsTab.center fromView:downloadsTab.superview];
        CGFloat totalXTravel = animationEndPoint.x - animationStartPoint.x;
        // This is an arbitrary equation to create a control point, this is by no means canonical.
        CGPoint controlPoint = CGPointMake(animationEndPoint.x, animationStartPoint.y - fabs(totalXTravel/1.2));

        // Create the animation path.
        UIBezierPath *path = [[UIBezierPath alloc] init];
        [path moveToPoint:animationStartPoint];
        [path addQuadCurveToPoint:animationEndPoint controlPoint:controlPoint];

        // Create the CAAnimation.
        CAKeyframeAnimation *moveAnimation = [CAKeyframeAnimation animationWithKeyPath:@"position"];
        moveAnimation.duration = MY_ANIMATION_DURATION;
        moveAnimation.path = path.CGPath;
        moveAnimation.removedOnCompletion = NO;
        moveAnimation.fillMode = kCAFillModeBoth;

        [tabBarController.view addSubview:dummyImageView];
        dummyImageView.center = animationStartPoint;

        // Animate the move.
        [dummyImageView.layer addAnimation:moveAnimation forKey:@""];

        // Use the block based API to add size reduction and handle completion.
        [UIView animateWithDuration:MY_ANIMATION_DURATION
                         animations:^{
                             dummyImageView.transform = CGAffineTransformMakeScale(0.3, 0.3);
                         }
                         completion:^(BOOL b){
                             // Animate BIG FINISH! nah, just...
                             [dummyImageView removeFromSuperview];
                             [self updateBadgeValue];
                         }];
    }
}
// Other typical VC crap...
@end 
```

就是这样。运行时，此代码从左上角的按钮产生相当强烈的跳跃，但右侧的按钮，尤其是右下角的按钮，有点被扔掉了。随着动画的结束，下载选项卡上的徽章开始计数。当您在 iTunes 上购买内容时，Apple 使用的效果相当不错。

**请记住将 Quartz 框架添加到您的应用程序中。**

# java - 如何加快向 postgres 数据库的导入过程？

> ID：13553210
> 
> 赞同：1
> 
> 时间：2012-11-25T16:56:16.193
> 
> 标签：java, postgresql-8.4

我正在使用 java (jdbc) 将一些数据从 10Gb 文件导入到 postgres 数据库表中。导入过程需要更多 12 小时才能完成，因此需要改进导入过程。我尝试了用于插入的复制命令。一些选择命令也与插入表一起运行。任何人都可以提出提高速度的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T17:02:53.997

当需要数百万行时，标准 SQL`INSERT`语句的开销通常太大。`INSERT`10 GiB 的数据实际上并没有那么多，但对于（您要么有一个巨大的事务，要么提交/回滚每个 INSERT）来说肯定太多了。

有一个不错的[*14.4。在官方文档中填充数据库*](http://www.postgresql.org/docs/current/interactive/populate.html)章节。*14.4.2\. 使用`COPY`*对您来说特别有趣：

> 用于`COPY`在一个命令中加载所有行，而不是使用一系列 INSERT 命令。该`COPY`命令针对加载大量行进行了优化；它不如 灵活`INSERT`，但对大数据加载产生的开销要小得多。由于`COPY`是单个命令，因此如果您使用此方法填充表，则无需禁用自动提交。

# 也可以看看：

*   [将批量插入 Postgres 的最快方法是什么？](https://stackoverflow.com/questions/758945)

# c# - C# 资源与 XAML 资源

> ID：13553212
> 
> 赞同：1
> 
> 时间：2012-11-25T16:56:22.487
> 
> 标签：c#, .net, visual-studio-2010, xaml, resources

我是初学者，我对 .net 术语有点困惑。我可以为应用程序本地化和图片、图标创建资源……我还可以为 ControlTemplate 或 DataTemplate 创建资源……

两个不同的东西是同一个名字吗？或者在 XAML 中定义的资源与在 Visual Studio 中添加定义的资源之间是否存在关系？

非常感谢您的回答。问候， 拉德克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T17:33:22.737

不，它们不一样。也许你应该考虑仔细看看你*生产*的东西。我认为您应该下载[JustDecompile](http://www.telerik.com/products/decompiler.aspx)并养成查看输出工件的习惯。即使代码级别的术语相似，您也会看到它们在输出程序集中是完全不同的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T17:22:13.630

它们不是同一件事。传统的 .NET 资源（图像、字符串等）有时在 WPF 世界中称为*二进制*资源，而 WPF 使用的资源（通常在 XAML 中定义）称为*逻辑*资源。

# c# - 在 JavaScript 中访问 C# 变量

> ID：13553215
> 
> 赞同：1
> 
> 时间：2012-11-25T16:56:35.087
> 
> 标签：c#, javascript, windows-8

我正在开发 Windows 8 应用程序，其中我必须在 java 脚本函数中访问 C# 类的变量，但不幸的是我不知道该怎么做：我的 C# 类代码是：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace Pakistan_Tour
{
   public class UniversalValues
{
   public static double xC;
   public static double yC;

public  static  int selectedcity;

     public int retcity() 
    {
        return selectedcity;

    }
    public void setcity(int val)
    {
         selectedcity=val;
    }
    public void setxy(double x, double y)
    {
        xC = x;
        yC = y;

    }
    public double getx()
    {
        return xC;
    }
    public double gety()
    {
        return yC;
    }

 }
} 
```

我必须访问变量的值：我正在执行的 java 脚本中的 xC 和 yc：

```
 function initialize() {

        var x = "<%=xC%>";

        var y = "<%=yC%>";
} 
```

但不工作，请帮助我，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T17:02:43.920

这是关于从 JS 调用 C#的[演练。](https://web.archive.org/web/20200723233729/https://docs.microsoft.com/en-us/previous-versions/hh779077(v=vs.110)?redirectedfrom=MSDN)另外，看看这个[问题](https://stackoverflow.com/questions/9521047/can-i-use-objects-created-in-c-sharp-within-metro-ui-javascript-code)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T17:14:04.817

尝试将 c# 变量作为参数传递给您的 JS 函数

```
<script type="text/javascript">
    generateMarkersForSideBar(<%=this.LatLangStringForMap%>);
</script> 
```

在cs代码中

```
string _LatLangStringForMap;
public string LatLangStringForMap
{
  get { return _LatLangStringForMap; }
  set { _LatLangStringForMap = value; }
} 
```

# database - 用户配置文件架构 - 如何处理包含多个信息的列？

> ID：13553218
> 
> 赞同：0
> 
> 时间：2012-11-25T16:57:05.087
> 
> 标签：database, database-schema

我正在构建一个数据库，其中有这两个表：

1) [users] 包含以下列：id、用户名、密码、电子邮件（以及更多）。

2) [user_profile] 包含有关用户的更多信息，例如：性别、身高、县、语言等。

我的问题是关于第二张桌子的。将信息存储在可能有多个答案的列（例如语言或宠物）中的好方法是什么？如果我存储了这样的信息，我的模式仍然是一个好主意吗？到目前为止，我唯一的想法是将多个选项一起存储在一个列中，并用“-”字符之类的东西分隔它们。稍后，当我从数据库中提取信息时，我将从这些列中拆分信息，这些列可以通过“-”包含多个选项。

这是一个好主意吗？有更好的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T17:19:07.953

只要您想在从表中获取一行后进行额外的解析，您提出的解决方案似乎就很好。尽管我想到了其他几个选择。两者都需要创建新表。我不是专家架构设计师，所以请随意批评我的选择。

1）这里以语言为例，创建一个语言表，它将枚举所有语言选项。然后再创建一个表来指定从配置文件到语言的映射。所以你的两张新桌子是

```
Language: Language_Id, Language

User_Profile_Language_Mapping: Profile_Id, Language_Id 
```

这样，只需向 User_Profile_Language_Mapping 表中添加一个条目，就可以将配置文件关联到任意多的语言。

2) 这次以 Pets 为例，是创建另一个将用户配置文件映射到宠物的表。

```
User_Profile_Pets: Profile_Id, Pet 
```

我不知道您要存储有关宠物的哪些信息，但它可能只是宠物名称、宠物类型，也可能是 Pet 表中的外键，您可以在其中指定有关该宠物的大量信息。

我喜欢选项 1 用于可以枚举所有可能性（如语言）的数据，我喜欢选项 2 用于可能存在无限数量的可能性（如宠物名称）

# bash - Bash：执行外部脚本时如何锁定

> ID：13553219
> 
> 赞同：3
> 
> 时间：2012-11-25T16:57:10.313
> 
> 标签：bash, flock

这是我的 bash 代码：

```
(
flock -n -e 200 || (echo "This script is currently being run" && exit 1)
    sleep 10

    ...Call some functions which is written in another script...

    sleep 5

) 200>/tmp/blah.lockfile 
```

我连续从两个 shell 运行脚本，只要第一个处于“sleep 5”，一切正常，这意味着另一个没有启动。但是，当第一个轮到从另一个脚本（其他文件）执行代码时，第二个运行开始执行。

所以我在这里有两个问题：

1.  我应该怎么做才能防止该脚本及其所有“子代”在脚本或其“子代”仍在运行时运行。（除了“孩子”之外，我没有找到更合适的表达方式来运行另一个脚本，对此感到抱歉:)）。

2.  根据手册页， -n 导致进程在未能获得锁定时退出，但据我所知，它只是等到它可以运行。我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-25T17:31:33.490

你的问题可能很普通。即，

```
false || ( exit 1 ) 
```

不会导致脚本退出。相反，exit 指示子shell 退出。因此，将您的第一行更改为：

```
flock -n -e 200 || { echo "This script is currently being run"; exit 1; } >&2 
```

# php - php 函数将描述拆分为 68 个字符长的行

> ID：13553221
> 
> 赞同：0
> 
> 时间：2012-11-25T16:57:30.520
> 
> 标签：php, pdf

我只是想知道是否有人可以帮助我。我整天都在想办法解决这个问题。我有这些变量

```
$booking['occasion']
$booking['date']
$booking['venue'] 
```

我想像这样对它们进行描述。

$description = "$venue $date 为 $occasion 提供 DJ 的押金";

我想在这样的 pdf 文件中显示超过 3 或 4 行的描述

```
$pdf->writeHTMLCell(139, 5, '20', '125', $line1, '', 1, 1, true, 'L', true);
$pdf->writeHTMLCell(139, 5, '25', '125', $line2, '', 1, 1, true, 'L', true);
$pdf->writeHTMLCell(139, 5, '30', '125', $line3, '', 1, 1, true, 'L', true);
$pdf->writeHTMLCell(139, 5, '35', '125', $line4, '', 1, 1, true, 'L', true);
$pdf->writeHTMLCell(139, 5, '40', '125', $line5, '', 1, 1, true, 'L', true); 
```

我想在每 68 个字符后将描述换行到下一行，但只想在完成的单词后换行

任何人都可以帮我创建一个函数来将描述分成 3 或 4 行到目前为止我有这个代码，我知道它是我想要的。

```
$description = "Deposit for suppling a DJ and Equipment for a $occasion on the 
$date in $venue";
$decriptionLength = strlen($description);
if($decriptionLength <= 68){
  $line1 = $description;    
}
elseif($decriptionLength > 68)
{
  $line1 = substr($description, 0, 68);
  $line2 = substr($description, 68, 136);
} 
```

这段代码甚至会在一个单词的中间换行，所以我不想要这个。我知道这可能会有很多问题，但如果有人能想出一些代码，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T17:06:08.147

该`wordwrap()`功能可能会有所帮助。

[http://php.net/manual/en/function.wordwrap.php](http://php.net/manual/en/function.wordwrap.php)

```
$wordwrapped = wordwrap($description, 139, "\n");

$lines = explode("\n", $wordwrapped);

$line1 = $lines[0];
$line2 = $lines[1];

if (count($lines) > 3) {

    $third_line = "";

    for ($idx = 1; $idx < count($lines); $idx++) {
        $third_line .= $lines[$idx] . " ";
    }

    $line3 = $third_line;

}

else {

    $line3 = $lines[2];

} 
```

# javascript - (true == x) === !!x 什么时候是假的？

> ID：13553222
> 
> 赞同：2
> 
> 时间：2012-11-25T16:57:36.417
> 
> 标签：javascript

JavaScript 有不同的相等[比较运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comparison_Operators)

*   平等的`==`
*   严格相等`===`

它也有一个[逻辑非](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Logical_Operators#Logical_NOT_%28!%29) `!`，我倾向于考虑使用一个双逻辑非，，`!!x`基本上与`true == x`.

但是**我知道情况并非总是如此**，例如`x = []`因为`[]`istruthy for但*falsy* *for*。`!`*`==`*

 *那么，对于哪个`x`s 会`(true == x) === !!x`给出错误？或者，什么是*虚假*的，`==`但不是`!!`（反之亦然）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-25T17:03:39.020

> *“那么，`x`s 会`(true == x) === !!x`为哪一个`false`？”*

任何`x`其布尔转换与其通过[抽象相等比较算法](http://es5.github.com/#x11.9.3)进行的转换不同的地方。

* * *

一个例子是一个只有空格的字符串：

```
var x = " "; 
```

它的布尔转换是`true` *（与任何非空字符串一样）*，但它的`==`比较是`false`因为只有空格的字符串将转换为数字`0`，而`true`值将转换为数字`1`，而那些值不是平等的。

```
x == true; // false
!!x;       // true 
```

* * *

`==`或显示正在比较的最终值：

```
Number(true) == Number(x);
 //      1   ==        0

1 == 0; // false 
```

* * *

并显示 的结果`!!x`，它相当于：

```
Boolean(x);  // true 
```

* * *

所以你的原始表达可以***粗略地***看成如下：

```
 var x = " ";

   (Number(true) == Number(x)) === Boolean(x);
// (         1   ==        0 ) ===        true
//                   ( false ) ===        true

   false === true; // false 
```

我说“粗略”是因为这肯定不会捕获上面链接的算法的所有细节，并且对于提供给操作数的所有值也不相同。

要了解如何`==`处理其操作数，您确实需要稍微研究一下算法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-25T17:01:08.787

松散的平等与真实性无关。

松散相等的规则基本上涉及比较`.valueOf()`每个对象的函数结果。
有关更多详细信息，请参阅[规范](http://ecma262-5.com/ELS5_HTML.htm#Section_11.9.3)。*

# android - 在我移出部分标题后，带有部分的 Android IndexableList 不会滚动

> ID：13553223
> 
> 赞同：0
> 
> 时间：2012-11-25T16:57:56.723
> 
> 标签：android, android-adapter

我有一个 IndexedList，它在右侧显示我使用以下链接实现的索引：

[可索引列表视图](https://github.com/woozzu/IndexableListView)

现在在索引视图中，我有每个字母的部分。我面临的问题是，当我从节标题开始滚动时（它不应该滚动列表），但是当我到达标题末尾时，列表应该开始滚动，这并没有发生。这意味着**如果我从标题开始滚动列表永远不会滚动**。我指的是下面的SectionedAdapter：

[分段适配器](http://jsharkey.org/blog/2008/08/18/separating-lists-with-headers-in-android-09/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T17:01:37.730

你可以使用这个[库](https://github.com/ragunathjawahar/simple-section-adapter)。这是可用于 Android 的 ListView 的最简单的 Section Adapter。

# java - 我的位向量有什么问题？

> ID：13553232
> 
> 赞同：0
> 
> 时间：2012-11-25T16:58:57.197
> 
> 标签：java, algorithm, bit-manipulation, bit, bitvector

我正在尝试创建一个由`int[]`.
所以我有以下代码：

```
public class BitVector {  

  int[] vector = new int[1 << 16];  

  public void setBit(int nextInt) {  
    nextInt = nextInt & 0xFFFF;  
    int pos = nextInt / 32;  
    int offset = nextInt % 32;  
    vector[pos] |= (1 << offset);    
  }

  public int findClearedBit() {  

    for(int i = 0;  i < vector.length; i++){              
            for(int j = 0; j < 8; j++){  
                if((vector[i] & (1 << j)) == 0)   
            return i * 32 +  j;  
        }  
    }  

    return -1;  
   }  

} 
```

我知道也许我应该使用`byte[]`等，但我想知道为什么这种方式不起作用。
这个想法是我`int`从一个流中传入并保留低 16 位并将相应的位标记为设置。因此，当我遍历向量时，我会发现缺少数字（由低 16 位表示）。
但我得到错误的结果。所以我相信我的处理是错误的。
有任何想法吗？

**更新：**
我有一个 32 位整数流。*当我阅读它们时，我尝试通过使用低 16 位*并设置位向量（发布的代码）来标记缺失的数字。
我还尝试找到第二次读取流的高 16 位丢失。
因此，虽然缺少的数字是： `231719592`= ( `1101110011111100001010101000`) = ( `3535`- `49832`) 当我读取流时，我没有得到`49832`缺少的低位，但是`65536`

**更新2：**

```
public int findMissingInt(File f)throws Exception{  
    Scanner sc = new Scanner(f);  
    int SIZE = 1 << 16; 
    int[] occurences = new int[SIZE];  
    while(sc.hasNext()){  
    occurences[getIdx(sc.nextInt())]++;  
    }  

    int missingUpper = -1;  
    for(int i = 0; i < occurences.length; i++){  
    if(occurences[i] < SIZE){  
        System.out.println("Found upper bits:"+i);  
        missingUpper = i;  
        break;  
    }  
    }
    if(missingUpper == -1){   
    return -1;  
    }  
    //Arrays.fill(occurences, 0);  //I reused this. Bellow changed after answer of Peter de Rivaz 
    BitVector v = new BitVector(new int[1 << (16-5)]);  
    sc = new Scanner(f);
    while(sc.hasNext()){  
    v.setBit(sc.nextInt());  
    }  

    int missingLower = v.findClearedBit();
    System.out.println("Lower bits:"+missingLower);   
    return createNumber(missingUpper, missingLower);  

}   

private int createNumber(int missingUpper, int missingLower) {  
        int result = missingUpper;  
        result = result << 16;  

        return result | missingLower;  
}  

public int getIdx(int nextInt) {          
    return (nextInt >>> 16);        
} 
```

我得到：

```
Missing number=231719592  
Found upper bits:3535 //CORRECT  
Lower bits:-1  //WRONG
Actual missing number=-1  //WRONG 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T18:39:32.510

我认为有两个问题：

1.  您的数组有 65536 个条目，但您在每个条目中存储 32 位，因此您只需要 65536/32 个条目。

2.  您在每个 int 中存储 32 位，但在查找间隙时仅检查 j 从 0 到 7

第一个错误意味着您的程序将 65536 报告为缺少的 16 位数字。第二个错误意味着您的程序没有发现丢失的数字。

即改变

```
int[] vector = new int[1 << 16]; 
```

到

```
int[] vector = new int[1 << (16-5)]; 
```

和改变

```
for(int j = 0; j < 8; j++) 
```

到

```
for(int j = 0; j < 32; j++) 
```

## 编辑

从评论来看，问题实际上是如何在 RAM 有限的情况下找到丢失的数字。这个问题的答案可以[在 stackoverflow](https://stackoverflow.com/questions/6164597/algorithm-question-on-file-search-indexing)上找到。

更高级别的代码中还有一个额外的错误。

在填充位集的第二遍期间，您应该只包括具有匹配高位的数字。

即改变

```
v.setBit(sc.nextInt()); 
```

类似于

```
int nx = sc.nextInt();
if (getIdx(nx)==missingUpper)
  v.setBit(nx); 
```

# parsing - 为什么 Parsec 不允许在 buildExpressionParser 表中的运算符之前出现空格

> ID：13553237
> 
> 赞同：0
> 
> 时间：2012-11-25T16:59:12.330
> 
> 标签：parsing, haskell, parsec

在下面的代码中，我可以使用 Parsec 正确解析每个标记后的空格：

```
whitespace = skipMany (space <?> "")

number :: Parser Integer
number = result <?> "number"
  where
  result = do {
    ds <- many1 digit;
    whitespace;
    return (read ds)
  }

table = result
  where
  result = [
    [Infix (genParser '*' (*)) AssocLeft, 
     Infix (genParser '/' div) AssocLeft],
    [Infix (genParser '+' (+)) AssocLeft, 
     Infix (genParser '-' (-)) AssocLeft]]
  genParser s f = char s >> whitespace >> return f

factor = parenExpr <|> number <?> "parens or number"
  where
  parenExpr = do {
    char '(';
    x <- expr;
    char ')';
    whitespace;
    return x
  }

expr :: Parser Integer
expr = buildExpressionParser table factor <?> "expression" 
```

但是，在尝试**仅在运算符****之前和之后**解析空格时出现解析错误：

```
whitespace = skipMany (space <?> "")

number :: Parser Integer
number = result <?> "number"
  where
  result = do {
    ds <- many1 digit;
    return (read ds)
  }

table = result
  where
  result = [
    [Infix (genParser '*' (*)) AssocLeft, 
     Infix (genParser '/' div) AssocLeft],
    [Infix (genParser '+' (+)) AssocLeft, 
     Infix (genParser '-' (-)) AssocLeft]]
  genParser s f = whitespace >> char s >> whitespace >> return f

factor = parenExpr <|> number <?> "parens or number"
  where
  parenExpr = do {
    char '(';
    x <- expr;
    char ')';
    return x
  }

expr :: Parser Integer
expr = buildExpressionParser table factor <?> "expression" 
```

解析错误是：

```
$ ./parsec_example < <(echo "2 * 2 * 3")
"(stdin)" (line 2, column 1):
unexpected end of input
expecting "*" 
```

为什么会这样？**是否有其他方法可以仅**解析运算符周围的空白？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T17:24:36.317

当我测试您的代码时，`2 * 2 * 3`解析正确，但`2 + 2`没有。解析失败是因为解析器`*`消耗了一些输入并且在该位置未启用回溯，因此无法尝试其他解析器。

由创建的表达式解析器`buildExpressionParser`尝试依次解析每个运算符，直到一个成功。解析`2 + 2`时，会出现以下情况：

*   第一个`2`由 匹配`number`。其余的输入是` + 2`（注意开头的空格）。
*   解析器`genParser '*' (*)`应用于输入。它占用空间，但与字符不匹配`+`。
*   其他中缀运算符解析器自动失败，因为某些输入被`genParser '*' (*)`.

您可以通过将解析器的关键部分包装在`try`. 这将保存输入，直到 after`char s`成功。如果`char s`失败，则`buildExpressionParser`可以回溯并尝试另一个中缀运算符。

```
genParser s f = try (whitespace >> char s) >> whitespace >> return f 
```

这个解析器的缺点是，因为它回溯到中缀运算符之前的前导空格之前，它会重复扫描空格。通常在成功匹配后解析空格会更好，就像 OP 的第一个解析器示例一样。

# javascript - iFrame 未在 FireFox 的选项卡中加载

> ID：13553241
> 
> 赞同：0
> 
> 时间：2012-11-25T17:00:16.390
> 
> 标签：javascript, jquery, firefox, iframe, twitter-bootstrap

我一直有这个奇怪的问题，我认为我已经接近解决但想要一些输入。它与这里的问题有关：[Firefox 和多个 iframe 未加载](https://stackoverflow.com/questions/13551632/firefox-and-multiple-iframes-not-loading)我在一个页面上加载了 4 个 iframe，每个 iframe 在一个单独的选项卡中。这些选项卡是使用 Twitter Bootstrap 制作的。

现在，FireFox 真正奇怪的部分来了。iframe 仅适用于当前选项卡与 iframe 一起显示的情况。未显示 div 的其他选项卡中的 iframe 都有 javascript 错误并且不起作用。但是，如果我将所有 iframe 放入正在显示的同一选项卡中，它们就可以工作。

对此有合乎逻辑的解释吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-12-23T17:09:46.873

我最近遇到了一个与此非常相似的问题。根据我的发现，如果在声明中使用 iframe 的“display:none”值可能会导致 Firefox 出错。有一些反对意见在这里[设置 iFrame CSS 在加载期间显示：无，](https://stackoverflow.com/questions/12661614/setting-iframe-css-to-displaynone-during-load)但我通过研究发现这是 Firefox 中的一个常见问题。（编辑：此错误的另一个链接-> [https://bugzilla.mozilla.org/show_bug.cgi?id=548397](https://bugzilla.mozilla.org/show_bug.cgi?id=548397)）

话虽如此，当我意识到并非新实例中的每个 iframe 都不是在 HTML5 中加载，而是在 HTML4 中加载时，我的问题就消失了。

# c# - 如何将多个文件附加到电子邮件

> ID：13553242
> 
> 赞同：2
> 
> 时间：2012-11-25T17:00:32.717
> 
> 标签：c#, asp.net, email, telerik, radupload

如何将多个文件附加到发送电子邮件。

我使用以下方法发送电子邮件。

```
 public static void sendMail(string to, string from, string password, string subject, string body, int dep_code)
        {
                MailMessage mail = new MailMessage();
                SmtpClient smtp = new SmtpClient();
                if (to == "")
                    to = "-------";
                MailAddressCollection m = new MailAddressCollection();
                m.Add(to);
                mail.Subject = subject;
                mail.From = new MailAddress(from);

                string banneredBody = @"<table width='100%' border='0' dir='rtl'>" +
                                          "<tr>" +
                                            "<td align='center'><img src=cid:Image1  /></td>" +
                                          "</tr>" +
                                          "<tr>" +
                                            "<td align='center'>" + body + "</td>" +
                                          "</tr>" +
                                       "</table>";

                mail.Body = banneredBody;
                //mail.Body = body;
                mail.IsBodyHtml = true;
                mail.ReplyTo = new MailAddress(from);
                mail.To.Add(m[0]);
                smtp.Host = "....";
                smtp.Port = 25;
                smtp.EnableSsl = false;
                smtp.Credentials = new System.Net.NetworkCredential(from, password);
                ServicePointManager.ServerCertificateValidationCallback = delegate(object s, X509Certificate certificate, X509Chain chain, SslPolicyErrors sslPolicyErrors) { return true; };

                smtp.Send(mail);

        } 
```

* * *

如何传递文件参数来附加它们。

我使用[RadAsyncUpload](http://demos.telerik.com/aspnet-ajax/asyncupload/examples/overview/defaultcs.aspx)：

```
 private List<Telerik.Web.UI.UploadedFileInfo> uploadedFiles = new List<Telerik.Web.UI.UploadedFileInfo>();
        public List<Telerik.Web.UI.UploadedFileInfo> UploadedFiles
        {
            get { return uploadedFiles; }
            set { uploadedFiles = value; }
        } 
```

* * *

```
 private void PopulateUploadedFilesList()
        {
            foreach (UploadedFile file in rad_upload.UploadedFiles)
            {
                UploadedFileInfo uploadedFileInfo = new UploadedFileInfo(file);
                UploadedFiles.Add(uploadedFileInfo);
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T18:37:42.937

您应该使用以下`Attachments`属性：

```
foreach (var file in UploadedFiles)
{
    mail.Attachments.Add(file);
} 
```

顺便说一句，您可以使用`MailAddress`指定要将邮件发送到的地址：

```
mail.To.Add(new MailAddress(to)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T17:08:54.560

`MailMessage`有一个名为`Attachments`...的属性...您需要添加要发送到该属性的所有附件...一些示例源代码和解释可以在 MSDN[此处](http://msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.attachments.aspx)和[此处找到](http://msdn.microsoft.com/en-us/library/system.net.mail.attachment.aspx)。

# cloud - SaaS实践基础和项目

> ID：13553247
> 
> 赞同：0
> 
> 时间：2012-11-25T17:01:11.390
> 
> 标签：cloud, saas, openstack, iaas

所以我需要一些方向。我想了解云软件即服务（SaaS）的实际初始化。问题是我想创建一个简单的云服务，它可以让我从远程机器在这个云上运行程序。据我了解，我需要某种特定的骨干项目来启动这个系统，类似于 OpenStack 或 Apache Cloud for Infostructure as a Service。当然也可能是我理解的完全错误，即使有这样的项目，也不是开源的，免费的。我也可以理解基于 IaaS 构建的 SaaS，但问题是，我根本找不到任何实用信息。如果有任何类型的免费许可 SaaS 项目或推荐相关文章或以至少模糊的方向解释一切，有人可以放纵我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T00:57:29.357

听起来您真正想做的只是创建一个可水平扩展的基础架构，以供在公共云中使用。

[http://www.slideshare.net/Clogeny/scalable-architecture-on-amazon-aws-cloud](http://www.slideshare.net/Clogeny/scalable-architecture-on-amazon-aws-cloud)

关于如何处理这个问题有很多演示和讨论。我已经链接了一个似乎很容易访问的谷歌。

# cuda - 哪个更好 ？循环内核或循环内核用于 CUDA GPU

> ID：13553248
> 
> 赞同：0
> 
> 时间：2012-11-25T17:01:11.050
> 
> 标签：cuda, gpu

设备 GeForce GTX 680

在程序中，我有很长的数组要在内核内部处理。（大约 1 GB 的整数）。根据需要，我的数组按顺序分为块，有一些重叠（块之间的重叠为 k）。我有每个块的固定大小（块大小为 m）。现在，数组将按顺序划分 (0,m) (mk, (mk) +m) ,....)

根据上面的计算，我的程序中不需要的块大约是 (1GB / m) 由于 GPU 中的块总数是有限的，我怎样才能有效地做到这一点？我应该从主机以迭代方式调用内核，而内核内部没有任何循环吗？或者我应该调用内核一次，然后在内核内部循环进行多次迭代？还是我应该只调用一次内核，总块数=（1 GB / m）？

什么可以作为该程序的块数的最佳值以及什么方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T19:26:11.107

对于您的应用程序的第一个版本，我建议以下顺序：

在里面：

*   在 GPU 上为 GPU 上两个不重叠的数组块分配空间（插槽 1 和 2）
*   将第一个不重叠的块复制到插槽 1

环形：

*   将下一个不重叠的块复制到插槽 2
*   运行在插槽 1 上运行并部分进入插槽 2 的内核
*   将插槽 2 的内容复制到插槽 1（GPU 到 GPU 内存复制）

在以后的版本中，您可以通过交替复制到插槽 1 和插槽 2 并将寻址包装在内核中来避免 GPU 到 GPU 复制，这样它就不会溢出插槽 2，而是从插槽 1 的开头开始。想想看槽 1 和槽 2 排列成环形缓冲区。您还可以通过在内核运行在以前的插槽上时添加更多插槽并将阵列的块异步复制到新插槽来提高性能。

# python - python请求登录网站返回403

> ID：13553249
> 
> 赞同：1
> 
> 时间：2012-11-25T17:01:16.687
> 
> 标签：python, django, pyramid, python-requests

我正在尝试使用`requests`登录网站，但您可以猜到我遇到了问题

这是我正在使用的代码

```
import requests

EMAIL = '***'
PASSWORD = '***'
URL = 'https://portal.bitcasa.com/login'

client = requests.session(config={'verbose': sys.stderr})
login_data = {'username': EMAIL, 'password': PASSWORD,}
r = client.post(URL, data=login_data, headers={"Referer": "foo"})
print r 
```

如果我打印出来，`r.text`我会得到

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
<head><script type="text/javascript">var NREUMQ=NREUMQ||[];NREUMQ.push(["mark","firstbyte",new Date().getTime()])</script>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="robots" content="NONE,NOARCHIVE">
  <title>403 Forbidden</title>
  <style type="text/css">
    html * { padding:0; margin:0; }
    body * { padding:10px 20px; }
    body * * { padding:0; }
    body { font:small sans-serif; background:#eee; }
    body>div { border-bottom:1px solid #ddd; }
    h1 { font-weight:normal; margin-bottom:.4em; }
    h1 span { font-size:60%; color:#666; font-weight:normal; }
    #info { background:#f6f6f6; }
    #info ul { margin: 0.5em 4em; }
    #info p, #summary p { padding-top:10px; }
    #summary { background: #ffc; }
    #explanation { background:#eee; border-bottom: 0px none; }
  </style>
</head>
<body>
<div id="summary">
  <h1>Forbidden <span>(403)</span></h1>
  <p>CSRF verification failed. Request aborted.</p>

</div>

<div id="explanation">
  <p><small>More information is available with DEBUG=True.</small></p>
</div>

<script type="text/javascript">if(!NREUMQ.f){NREUMQ.f=function(){NREUMQ.push(["load",new Date().getTime()]);var e=document.createElement("script");e.type="text/javascript";e.src=(("http:"===document.location.protocol)?"http:":"https:")+"//"+"d1ros97qkrwjf5.cloudfront.net/42/eum/rum.js";document.body.appendChild(e);if(NREUMQ.a)NREUMQ.a();};NREUMQ.a=window.onload;window.onload=NREUMQ.f;};NREUMQ.push(["nrfj","beacon-1.newrelic.com","0e859e0620",778660,"ZAZRbUcHWBAHURFYX11MdUxbBUIKCVxKVVpSDVRWGwtfBwJeAEZRQQYdWkYUUFklQRdXZloGRHRcAlIPA0UEQ1UdE0FWVgNFEDlEDFRH",0,7,new Date().getTime(),"","","","",""])</script></body>
</html> 
```

他们正在使用 django 和金字塔的组合。

我已经玩了大约两天了，但是很明显，一无所获。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-25T17:37:54.840

登录页面使用 CSRF 令牌来防止跨站点脚本攻击。您需要先检索该令牌。

登录页面设置了一个具有相同令牌的 cookie，我们需要先加载登录页面并获取该令牌，然后再将其传递给登录 POST：

```
client = requests.session()

# Retrieve the CSRF token first
client.get(URL)  # sets the cookie
csrftoken = client.cookies['csrftoken']

login_data = dict(username=EMAIL, password=PASSWORD, csrfmiddlewaretoken=csrftoken)
r = client.post(URL, data=login_data, headers={"Referer": "foo"}) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-25T17:05:50.053

如错误消息所示，您缺少[csrf 令牌](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/)

您需要先`GET`进入登录页面，读取 csrf 令牌，然后`POST`将其连同其余的表单数据一起返回

# java - Maven 3 插件 - 如何以编程方式排除依赖项及其所有传递依赖项？

> ID：13553250
> 
> 赞同：1
> 
> 时间：2012-11-25T17:01:16.733
> 
> 标签：java, maven, maven-3, maven-plugin

我正在开发一个 Maven 3 插件，当插件中的配置设置为时，我想排除一些依赖项及其传递依赖`true`项。

我不想`<exclusions>`在 POM 本身中使用，即使在配置文件中也是如此。我想以*编程*方式排除这些依赖项。实际上，当插件配置设置为`true`.

我试过了 ：

```
@Mojo(requiresDependencyResolution=ResolutionScope.COMPILE, name="compileHook",defaultPhase=LifecyclePhase.COMPILE)
public class compileHook extends AbstractMojo
{
    @Override
    public void execute() throws MojoExecutionException, MojoFailureException
    {
        // ...
        Set<Artifact> artifacts = this.project.getArtifacts();
        for(Artifact artifact : artifacts)
        {
            if("org.package.to.remove".equalsIgnoreCase(artifact.getGroupId()))
            {
                artifact.setScope("provided");
            }
        }
        // ...
    }
} 
```

由于这发生在该`compile`阶段，它确实会删除组 id 为“org.package.to.remove”的工件，使其在打包时将其 jar 包含在 war 中。但这***并没有删除那些依赖项添加的传递工件***！

以编程方式从包含在最终 .jar/.war 中删除某些依赖项及其传递依赖项的最佳方法是什么？

# xcode - XCode构建解析错误'程序中的意外@'

> ID：13553253
> 
> 赞同：1
> 
> 时间：2012-11-25T17:01:59.083
> 
> 标签：xcode, parsing, animation, build

我正在关注在 Mountain Lion 10.8.2 中使用 Xcode 版本 4.5.2 创建动画的教程。在尝试构建下面的代码时，我***在程序中出现 Parse Error Unexpected '@' 出现***在 ' ***hopAnimation=*** ' 行。在搜索时，我发现了以不同方式构建简单动画的示例，但似乎没有解决这个特定问题。我是 XCode 编程的菜鸟，如果有人可以帮助我纠正语法，我将不胜感激。我还要感谢 stackflow 的所有贡献者，使之成为如此宝贵的资源。搜索我之前的大多数问题的答案似乎总是让你们排在结果列表的顶部。

```
 **ViewController.m**
    - (void)viewDidLoad
    {
        // load all the frames of our animation into an array
        NSArray *hopAnimation;
        hopAnimation=[[NSArray alloc] arrayWithObjects:
                      [UIImage imageNamed:@”frame-1.png”],
                      [UIImage imageNamed:@”frame-2.png”],
                      [UIImage imageNamed:@”frame-3.png”],
                      [UIImage imageNamed:@”frame-4.png”],
                      [UIImage imageNamed:@”frame-5.png”],
                      [UIImage imageNamed:@”frame-6.png”],
                      [UIImage imageNamed:@”frame-7.png”],
                      [UIImage imageNamed:@”frame-8.png”],
                      [UIImage imageNamed:@”frame-9.png”],
                      [UIImage imageNamed:@”frame-10.png”],
                      [UIImage imageNamed:@”frame-11.png”],
                      [UIImage imageNamed:@”frame-12.png”],
                      [UIImage imageNamed:@”frame-13.png”],
                      [UIImage imageNamed:@”frame-14.png”],
                      [UIImage imageNamed:@”frame-15.png”],
                      [UIImage imageNamed:@”frame-16.png”],
                      [UIImage imageNamed:@”frame-17.png”],
                      [UIImage imageNamed:@”frame-18.png”],
                      [UIImage imageNamed:@”frame-19.png”],
                      [UIImage imageNamed:@”frame-20.png”],nil];

        self.bunnyView1.animationImages=hopAnimation;
        self.bunnyView2.animationImages=hopAnimation;
        self.bunnyView3.animationImages=hopAnimation;
        self.bunnyView4.animationImages=hopAnimation;
        self.bunnyView5.animationImages=hopAnimation;
        self.bunnyView1.animationDuration=1;
        self.bunnyView2.animationDuration=1;
        self.bunnyView3.animationDuration=1;
        self.bunnyView4.animationDuration=1;
        self.bunnyView5.animationDuration=1;
       [super viewDidLoad];
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T17:04:54.467

没有调用 init 方法`arrayWithObjects`。有`initWithObjects`，或者只是`[NSArray arrayWithObjects]`（没有alloc），但这不起作用。此外，您的引号是“智能引号”，即卷曲引号。我不知道在 Xcode 中是不是这样，但您可能也必须使用直引号 (") 才能使其工作。

# .htaccess - 重写htaccess中的麻烦

> ID：13553266
> 
> 赞同：0
> 
> 时间：2012-11-25T17:03:03.927
> 
> 标签：.htaccess, mod-rewrite, redirect

所以我有一种奇怪的麻烦。我有一个重写规则

```
mysite.com/brand.php?brand=example&ref=ex1 
```

至

```
mysite.com/brand/example/ex1 
```

我设法做到了，但还有另一个问题：当你输入这个时：

```
mysite.com/brand/example/ex1.html 
```

或者

```
mysite.com/brand/example/ex1.php 
```

我明白了：

```
mysite.com/brand/example/ex1?ref=ex1.php&brand=example 
```

谁能告诉我为什么会得到这个重定向以及如何摆脱它？

我试过这个：

```
RedirectMatch   ^brand/([A-Za-z0-9-\.\_]+)/([A-Za-z0-9-\.\_]+)php$ /brand/$1/$2 
```

或这个：

```
RedirectMatch   ^brand/([A-Za-z0-9-\.\_]+)/([A-Za-z0-9-\.\_]+)\.php$ /brand/$1/$2 
```

但它根本行不通。

请任何人帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T20:15:00.073

我会用`mod_rewrite`这个：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} =/brand.php
RewriteCond %{QUERY_STRING} ^brand=([^&]+&ref=(.+)$
RewriteRule .* /brand/%1/%2? [L,R] 
```

`RewriteRule`仅当两者都`RewriteCond`有效时才应用。第一个`RewriteCond`将请求 URL 与 进行比较`/brand.php`，第二个将正则表达式与查询字符串匹配，并将匹配项分别存储在`%1`和`%2`中。

其中`RewriteRule`是使用查询字符串中的匹配部分重写的 URL。

# java - 在命令提示符下运行 Java 程序

> ID：13553269
> 
> 赞同：0
> 
> 时间：2012-11-25T17:03:15.420
> 
> 标签：java, command-prompt

我对这个概念做了很多研究，但我似乎无法在命令提示符下运行 java 程序。假设我们有一个像这样的简单程序：

```
public class Hello_World {
    public static void main(String[] args) {
        System.out.println("Hello World!");
    }
} 
```

在命令提示符下，我尝试了：

```
javac Hello_World.java 
```

但我得到：

```
'javac' is not recognized as an internal or external command, operable program or batch file 
```

所以我在 BlueJ 上编译它，然后这样做：

```
java Hello_World.java 
```

但它说“无法加载或找到主类Hello_World”！

我目前使用的是 Windows 7，并在 Notepad++ 和 BlueJ 上制作了程序（编译）。有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T17:08:39.163

[这](http://docs.oracle.com/javase/tutorial/essential/environment/paths.html) 详细解释了设置类路径必须做的事情。主要你需要设置你的环境变量，以便你的 shell 找到正确的目录`javac`来编译你的程序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T17:15:32.650

```
javac' is not recognized .. 
```

当你没有将你的 java bin 目录指向你的路径环境变量时。因为bin目录是javac.exe存在的地方。

去做吧。

```
1) right click on mycomputer property
2) go to Advance system settings.
3) go to environment variable.
4) In system variable click on path
5) go to edit mode and provide your path to java bin directory. 
```

在我的情况下`C:\Program Files\Java\jdk1.7.0_01\bin;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T17:22:52.520

```
'javac' is not recognized as an internal... 
```

意味着操作系统不知道`javac`程序的位置。将其添加到`PATH`或显式运行

```
 my\path\to\file\javac Hello_World.java 
```

编译将转换`*.java`为`*.class`

`Hello_World.class`文件应该根据它的`package`指令定位。由于您没有人，因此在您的情况下，它应该位于您将运行的同一目录中`java`。

要运行您的课程，请指定它的名称而不是文件名

```
java Hello_world 
```

寻找类是启动的重要组成部分，并按规则发生。

# javascript - 访问外部范围

> ID：13553272
> 
> 赞同：1
> 
> 时间：2012-11-25T17:03:40.380
> 
> 标签：javascript, oop

我正在创建一个用户集合，该集合能够在其中获取单个用户。这将用于从另一个系统进行匹配，所以我希望加载用户一次，然后能够在以后进行微调/匹配。但是，我在从内部方法访问外部用户集合时遇到问题。

```
function Users(){

    var allUsers;

    this.getUsers = function () {
        // ajax to that Jasmine behaves    
        $.ajax({
            url: '../app/data/jira_users.json',
            async: false,
            dataType: 'json',
            success: function(data) {
                allUsers = data;
            }
        });
        return allUsers;
    };

    this.SingleUser = function (name) {
        var rate = 0.0;
        var position;

        this.getRate = function () {
            if(position === undefined){
                console.log('>>info: getting user position to then find rate');
                this.getPosition();
            }

            $.ajax({
                url: '../app/data/rates.json',
                async: false,
                dataType: 'json',
                success: function(data) {
                    rate = data[position];
                }
            });
            return rate;
        };

        this.getPosition = function () {
            console.log(allUsers);
            //position = allUsers[name];
            return position;
        };

        //set name prop for use later I guess.
        this.name = name;
    };
} 
```

以及开始这一切的测试：

```
it("get single user's position", function(){
    var users = new Users();
    var someone = new users.SingleUser('bgrimes');
    var position = someone.getPosition();
    expect(position).not.toBeUndefined();
    expect(position).toEqual('mgr');
}); 
```

getPosition 方法是问题（这可能很明显），因为 allUsers 始终未定义。我在这里是另一种尝试，我尝试了几种方法。我认为问题是如何开始调用 Users.getUsers，但我也不确定我使用的外部和内部变量是否正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T17:09:01.850

您填充数据的`allUsers`方法有缺陷
jquery 中的 ajax 调用是异步的，因此每次调用`users.getAllUsers`都将返回没有任何内容，当稍后调用 jquery ajax 的成功函数时，`allUsers`将被填充

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T17:09:09.533

`this.getUsers()`不会工作。它的返回与`allUsers`获取数据的 ajax 请求无关，因为 ajax 是**异步**的。与 相同`getRate()`。

您必须使用回调方法，`getUsers()`使用回调引用进行调用，当 ajax 请求完成时，它将数据传递给回调函数。

就像是：

```
this.getUsers = function (callback) {
    // ajax to that Jasmine behaves    
    $.ajax({
        url: '../app/data/jira_users.json',
        async: false,
        dataType: 'json',
        success: function(data) {
            callback(data);
        }
    });
}; 
```

电话将按照以下方式进行：

```
var user_data = null;
Users.getUsers(function(data) {
    user_data = data;
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T17:18:01.287

尽管其他人是正确的，因为当您输入它时这将不起作用，但我看到用例是一个 jasmine 测试用例。因此，有一种方法可以使您的测试成功。通过执行以下操作，您无需实际运行任何类型的服务器来进行测试。

```
var dataThatYouWouldExpectFromServer = {
    bgrimes: {
        username: 'bgrimes',
        show: 'chuck',
        position: 'mgr'
    }
};

it("get single user's position", function(){
    var users = new Users();
    spyOn($, 'ajax').andCallFake(function (ajaxOptions) {
        ajaxOptions.success(dataThatYouWouldExpectFromServer);
    });
    users.getUsers();
    var someone = new users.SingleUser('bgrimes');
    var position = someone.getPosition();
    expect(position).not.toBeUndefined();
    expect(position).toEqual('mgr');
}); 
```

这将使 ajax 调用返回您*希望*它返回的任何内容，这还允许您模拟失败、意外数据等的测试。您可以随时将“dataThatYouWouldExpectFromServer”设置为您想要的任何内容。这可以在您想要测试几个不同的结果但不希望每个结果都有一个 JSON 文件的情况下提供帮助。

Sorta-edit - 这将修复测试用例，但可能不会修复代码。我的建议是，每当您依赖 ajax 调用返回时，请确保您调用的方法具有“回调”参数。例如：

```
var users = new Users();
users.getUsers(function () {
    //continue doing stuff
}); 
```

您可以嵌套它们，或者您可以（最好）创建回调，然后将它们用作彼此的参数。

```
var users = new Users(), currentUser;

var showUserRate = function () {
    //show his rate
    //this won't require a callback because we know it's loaded.
    var rate = currentUser.getRate(); 
}

var usersLoaded = function () {
    //going to load up the user 'bgrimes'
    currentUser = new users.SingleUser('bgrimes');
    currentUser.getRate(showUserRate);
}

users.getUsers(usersLoaded); 
```

# java - 将 CSV 数据导入 JFrame

> ID：13553277
> 
> 赞同：0
> 
> 时间：2012-11-25T17:04:38.930
> 
> 标签：java, swing, csv

我需要帮助导入此类信息（CSV 文件）。

```
Stanmore College,51.612767,-0.311072 
```

它按以下顺序排列：地点、经度、纬度。

如何使用上述数据从 CSV 文件导入数据？

我为用户创建了一个`JFileChooser`&`ActionListener`来加载 CSV 文件...

```
//---- btnLoadCSV ----
            btnLoadCSV.setText("Load from CSV");
            btnLoadCSV.setHorizontalAlignment(SwingConstants.LEFT);
            btnLoadCSV.setMnemonic('L');
            btnLoadCSV.addActionListener(new ActionListener() {
                public void actionPerformed(ActionEvent e) {
                    jfc = new JFileChooser();
                    FileNameExtensionFilter filter = new FileNameExtensionFilter(
                            "CSV files (*csv)", "csv");
                    jfc.setFileFilter(filter);
                    int ret = jfc.showOpenDialog(GoogleApp.this);
                    if(ret == JFileChooser.APPROVE_OPTION)
                    {
                        File f = jfc.getSelectedFile();
                        String s = f.getAbsolutePath();
                    }
                }
            });
            panel1.add(btnLoadCSV, new TableLayoutConstraints(5, 1, 5, 1, TableLayoutConstraints.FULL, TableLayoutConstraints.FULL)); 
```

导入时，它应该从文件中获取数据并将数据放入其中`JLabels` （但我不知道从这里做什么......）

```
Place: label7 
Longitude: ttfLon 
Latitude: ttfLat 
```

非常感谢！

完整的代码/类（如果你需要的话）：

```
import Task.*;
import Task.Manager.*;
import Task.ProgressMonitor.*;
import Task.Support.CoreSupport.*;
import Task.Support.GUISupport.*;
import com.jgoodies.forms.factories.*;
import info.clearthought.layout.*;
import org.apache.commons.httpclient.*;
import org.apache.commons.httpclient.methods.*;

import javax.imageio.*;
import javax.swing.*;
import javax.swing.border.*;
import java.awt.*;
import java.awt.event.*;
import java.awt.image.*;
import java.beans.*;
import java.text.*;
import java.util.concurrent.*;
import javax.swing.filechooser.FileNameExtensionFilter;
import javax.swing.JFileChooser;
import java.awt.event.ActionListener;
import java.io.File;
import java.awt.event.ActionEvent;

public class GoogleApp extends JFrame {
//XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
// data members
//XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
/** reference to task */
private SimpleTask _task;
/** this might be null. holds the image to display in a popup */
private BufferedImage _img;
/** this might be null. holds the text in case image doesn't display */
private String _respStr;

//XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
// main method...
//XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

public static void main(String[] args) {
  Utils.createInEDT(GoogleApp.class);
}

//XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
// constructor
//XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

private void doInit() {
  GUIUtils.setAppIcon(this, "burn.png");
  GUIUtils.centerOnScreen(this);
  setVisible(true);

  int W = 28, H = W;
  boolean blur = false;
  float alpha = .7f;

  try {
    btnGetMap.setIcon(ImageUtils.loadScaledBufferedIcon("ok1.png", W, H, blur, alpha));
    btnQuit.setIcon(ImageUtils.loadScaledBufferedIcon("charging.png", W, H, blur, alpha));
  }
  catch (Exception e) {
    System.out.println(e);
  }

  _setupTask();
}

/** create a test task and wire it up with a task handler that dumps output to the textarea */
@SuppressWarnings("unchecked")
private void _setupTask() {

  TaskExecutorIF<ByteBuffer> functor = new TaskExecutorAdapter<ByteBuffer>() {
    public ByteBuffer doInBackground(Future<ByteBuffer> swingWorker,
                                     SwingUIHookAdapter hook) throws Exception
    {

      _initHook(hook);

      // get the uri for the static map
      String uri = MapLookup.getMap(Double.parseDouble(ttfLat.getText()),
                                    Double.parseDouble(ttfLon.getText()),
                                    Integer.parseInt(ttfSizeW.getText()),
                                    Integer.parseInt(ttfSizeH.getText()),
                                    Integer.parseInt(ttfZoom.getText())
      );
      sout("Google Maps URI=" + uri);

      // get the map from Google
      GetMethod get = new GetMethod(uri);
      new HttpClient().executeMethod(get);

      ByteBuffer data = HttpUtils.getMonitoredResponse(hook, get);

      try {
        _img = ImageUtils.toCompatibleImage(ImageIO.read(data.getInputStream()));
        sout("converted downloaded data to image...");
      }
      catch (Exception e) {
        _img = null;
        sout("The URI is not an image. Data is downloaded, can't display it as an image.");
        _respStr = new String(data.getBytes());
      }

      return data;
    }

    @Override public String getName() {
      return _task.getName();
    }
  };

  _task = new SimpleTask(
      new TaskManager(),
      functor,
      "HTTP GET Task",
      "Download an image from a URL",
      AutoShutdownSignals.Daemon
  );

  _task.addStatusListener(new PropertyChangeListener() {
    public void propertyChange(PropertyChangeEvent evt) {
      sout(":: task status change - " + ProgressMonitorUtils.parseStatusMessageFrom(evt));
      lblProgressStatus.setText(ProgressMonitorUtils.parseStatusMessageFrom(evt));
    }
  });

  _task.setTaskHandler(new
      SimpleTaskHandler<ByteBuffer>() {
        @Override public void beforeStart(AbstractTask task) {
          sout(":: taskHandler - beforeStart");
        }
        @Override public void started(AbstractTask task) {
          sout(":: taskHandler - started ");
        }
        /** {@link SampleApp#_initHook} adds the task status listener, which is removed here */
        @Override public void stopped(long time, AbstractTask task) {
          sout(":: taskHandler [" + task.getName() + "]- stopped");
          sout(":: time = " + time / 1000f + "sec");
          task.getUIHook().clearAllStatusListeners();
        }
        @Override public void interrupted(Throwable e, AbstractTask task) {
          sout(":: taskHandler [" + task.getName() + "]- interrupted - " + e.toString());
        }
        @Override public void ok(ByteBuffer value, long time, AbstractTask task) {
          sout(":: taskHandler [" + task.getName() + "]- ok - size=" + (value == null
              ? "null"
              : value.toString()));
          if (_img != null) {
            _displayImgInFrame();
          }
          else _displayRespStrInFrame();

        }
        @Override public void error(Throwable e, long time, AbstractTask task) {
          sout(":: taskHandler [" + task.getName() + "]- error - " + e.toString());
        }
        @Override public void cancelled(long time, AbstractTask task) {
          sout(" :: taskHandler [" + task.getName() + "]- cancelled");
        }
      }
  );
}

private SwingUIHookAdapter _initHook(SwingUIHookAdapter hook) {
  hook.enableRecieveStatusNotification(checkboxRecvStatus.isSelected());
  hook.enableSendStatusNotification(checkboxSendStatus.isSelected());

  hook.setProgressMessage(ttfProgressMsg.getText());

  PropertyChangeListener listener = new PropertyChangeListener() {
    public void propertyChange(PropertyChangeEvent evt) {
      SwingUIHookAdapter.PropertyList type = ProgressMonitorUtils.parseTypeFrom(evt);
      int progress = ProgressMonitorUtils.parsePercentFrom(evt);
      String msg = ProgressMonitorUtils.parseMessageFrom(evt);

      progressBar.setValue(progress);
      progressBar.setString(type.toString());

      sout(msg);
    }
  };

  hook.addRecieveStatusListener(listener);
  hook.addSendStatusListener(listener);
  hook.addUnderlyingIOStreamInterruptedOrClosed(new PropertyChangeListener() {
    public void propertyChange(PropertyChangeEvent evt) {
      sout(evt.getPropertyName() + " fired!!!");
    }
  });

  return hook;
}

private void _displayImgInFrame() {

  final JFrame frame = new JFrame("Google Static Map");
  GUIUtils.setAppIcon(frame, "71.png");
  frame.setDefaultCloseOperation(DISPOSE_ON_CLOSE);

  JLabel imgLbl = new JLabel(new ImageIcon(_img));
  imgLbl.setToolTipText(MessageFormat.format("<html>Image downloaded from URI<br>size: w={0}, h={1}</html>",
                                             _img.getWidth(), _img.getHeight()));
  imgLbl.addMouseListener(new MouseListener() {
    public void mouseClicked(MouseEvent e) {}
    public void mousePressed(MouseEvent e) { frame.dispose();}
    public void mouseReleased(MouseEvent e) { }
    public void mouseEntered(MouseEvent e) { }
    public void mouseExited(MouseEvent e) { }
  });

  frame.setContentPane(imgLbl);
  frame.pack();

  GUIUtils.centerOnScreen(frame);
  frame.setVisible(true);
}

private void _displayRespStrInFrame() {

  final JFrame frame = new JFrame("Google Static Map - Error");
  GUIUtils.setAppIcon(frame, "69.png");
  frame.setDefaultCloseOperation(DISPOSE_ON_CLOSE);

  JTextArea response = new JTextArea(_respStr, 25, 80);
  response.addMouseListener(new MouseListener() {
    public void mouseClicked(MouseEvent e) {}
    public void mousePressed(MouseEvent e) { frame.dispose();}
    public void mouseReleased(MouseEvent e) { }
    public void mouseEntered(MouseEvent e) { }
    public void mouseExited(MouseEvent e) { }
  });

  frame.setContentPane(new JScrollPane(response));
  frame.pack();

  GUIUtils.centerOnScreen(frame);
  frame.setVisible(true);
}

/** simply dump status info to the textarea */
private void sout(final String s) {
  Runnable soutRunner = new Runnable() {
    public void run() {
      if (ttaStatus.getText().equals("")) {
        ttaStatus.setText(s);
      }
      else {
        ttaStatus.setText(ttaStatus.getText() + "\n" + s);
      }
    }
  };

  if (ThreadUtils.isInEDT()) {
    soutRunner.run();
  }
  else {
    SwingUtilities.invokeLater(soutRunner);
  }
}

private void startTaskAction() {
  try {
    _task.execute();
  }
  catch (TaskException e) {
    sout(e.getMessage());
  }
}

public GoogleApp() {
  initComponents();
  doInit();
}

private void quitProgram() {
  _task.shutdown();
  System.exit(0);
}

private void initComponents() {
  // JFormDesigner - Component initialization - DO NOT MODIFY  //GEN-BEGIN:initComponents
  // Generated using JFormDesigner non-commercial license
  dialogPane = new JPanel();
  contentPanel = new JPanel();
  panel1 = new JPanel();
  label2 = new JLabel();
  ttfSizeW = new JTextField();
  label4 = new JLabel();
  ttfLat = new JTextField();
  btnGetMap = new JButton();
  btnLoadCSV = new JButton();
  label3 = new JLabel();
  ttfSizeH = new JTextField();
  label5 = new JLabel();
  ttfLon = new JTextField();
  btnQuit = new JButton();
  label1 = new JLabel();
  label6 = new JLabel();
  label7 = new JLabel();
  ttfZoom = new JTextField();
  scrollPane1 = new JScrollPane();
  ttaStatus = new JTextArea();
  panel2 = new JPanel();
  panel3 = new JPanel();
  checkboxRecvStatus = new JCheckBox();
  checkboxSendStatus = new JCheckBox();
  ttfProgressMsg = new JTextField();
  progressBar = new JProgressBar();
  lblProgressStatus = new JLabel();

  //======== this ========
  setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
  setTitle("GMaps App Loader");
  setIconImage(null);
  Container contentPane = getContentPane();
  contentPane.setLayout(new BorderLayout());

  //======== dialogPane ========
  {
    dialogPane.setBorder(new EmptyBorder(12, 12, 12, 12));
    dialogPane.setOpaque(false);
    dialogPane.setLayout(new BorderLayout());

    //======== contentPanel ========
    {
        contentPanel.setOpaque(false);
        contentPanel.setLayout(new TableLayout(new double[][] {
            {TableLayout.FILL},
            {TableLayout.PREFERRED, TableLayout.FILL, TableLayout.PREFERRED}}));
        ((TableLayout)contentPanel.getLayout()).setHGap(5);
        ((TableLayout)contentPanel.getLayout()).setVGap(5);

        //======== panel1 ========
        {
            panel1.setOpaque(false);
            panel1.setBorder(new CompoundBorder(
                new TitledBorder("Configure the inputs or load from CSV..."),
                Borders.DLU2_BORDER));
            panel1.setLayout(new TableLayout(new double[][] {
                {0.17, 0.17, 0.17, 0.17, 0.05, TableLayout.FILL},
                {TableLayout.PREFERRED, TableLayout.PREFERRED, TableLayout.PREFERRED}}));
            ((TableLayout)panel1.getLayout()).setHGap(5);
            ((TableLayout)panel1.getLayout()).setVGap(5);

            //---- label2 ----
            label2.setText("Size Width");
            label2.setHorizontalAlignment(SwingConstants.RIGHT);
            panel1.add(label2, new TableLayoutConstraints(0, 0, 0, 0, TableLayoutConstraints.FULL, TableLayoutConstraints.FULL));

            //---- ttfSizeW ----
            ttfSizeW.setText("512");
            panel1.add(ttfSizeW, new TableLayoutConstraints(1, 0, 1, 0, TableLayoutConstraints.FULL, TableLayoutConstraints.FULL));

            //---- label4 ----
            label4.setText("Latitude");
            label4.setHorizontalAlignment(SwingConstants.RIGHT);
            panel1.add(label4, new TableLayoutConstraints(2, 0, 2, 0, TableLayoutConstraints.FULL, TableLayoutConstraints.FULL));

            //---- ttfLat ----
            ttfLat.setText("52.95907");
            panel1.add(ttfLat, new TableLayoutConstraints(3, 0, 3, 0, TableLayoutConstraints.FULL, TableLayoutConstraints.FULL));

            //---- btnGetMap ----
            btnGetMap.setText("Get Map");
            btnGetMap.setHorizontalAlignment(SwingConstants.LEFT);
            btnGetMap.setMnemonic('G');
            btnGetMap.addActionListener(new ActionListener() {
                public void actionPerformed(ActionEvent e) {
                    startTaskAction();
                }
            });
            panel1.add(btnGetMap, new TableLayoutConstraints(5, 0, 5, 0, TableLayoutConstraints.FULL, TableLayoutConstraints.FULL));

            //---- btnLoadCSV ----
            btnLoadCSV.setText("Load from CSV");
            btnLoadCSV.setHorizontalAlignment(SwingConstants.LEFT);
            btnLoadCSV.setMnemonic('L');
            btnLoadCSV.addActionListener(new ActionListener() {
                public void actionPerformed(ActionEvent e) {
                    jfc = new JFileChooser();
                    FileNameExtensionFilter filter = new FileNameExtensionFilter(
                            "CSV files (*csv)", "csv");
                    jfc.setFileFilter(filter);
                    int ret = jfc.showOpenDialog(GoogleApp.this);
                    if(ret == JFileChooser.APPROVE_OPTION)
                    {
                        File f = jfc.getSelectedFile();
                        String s = f.getAbsolutePath();
                    }
                }
            });
            panel1.add(btnLoadCSV, new TableLayoutConstraints(5, 1, 5, 1, TableLayoutConstraints.FULL, TableLayoutConstraints.FULL));

            //---- label3 ----
            label3.setText("Size Height");
            label3.setHorizontalAlignment(SwingConstants.RIGHT);
            panel1.add(label3, new TableLayoutConstraints(0, 1, 0, 1, TableLayoutConstraints.FULL, TableLayoutConstraints.FULL));

            //---- ttfSizeH ----
            ttfSizeH.setText("512");
            panel1.add(ttfSizeH, new TableLayoutConstraints(1, 1, 1, 1, TableLayoutConstraints.FULL, TableLayoutConstraints.FULL));

            //---- label5 ----
            label5.setText("Longitude");
            label5.setHorizontalAlignment(SwingConstants.RIGHT);
            panel1.add(label5, new TableLayoutConstraints(2, 1, 2, 1, TableLayoutConstraints.FULL, TableLayoutConstraints.FULL));

            //---- ttfLon ----
            ttfLon.setText("-1.182468");
            panel1.add(ttfLon, new TableLayoutConstraints(3, 1, 3, 1, TableLayoutConstraints.FULL, TableLayoutConstraints.FULL));

            //---- btnQuit ----
            btnQuit.setText("Quit");
            btnQuit.setMnemonic('Q');
            btnQuit.setHorizontalAlignment(SwingConstants.LEFT);
            btnQuit.setHorizontalTextPosition(SwingConstants.RIGHT);
            btnQuit.addActionListener(new ActionListener() {
                public void actionPerformed(ActionEvent e) {
                    quitProgram();
                }
            });
            panel1.add(btnQuit, new TableLayoutConstraints(5, 2, 5, 2, TableLayoutConstraints.FULL, TableLayoutConstraints.FULL));

            //---- label1 ----
            label1.setText("Zoom");
            label1.setHorizontalAlignment(SwingConstants.RIGHT);
            panel1.add(label1, new TableLayoutConstraints(0, 2, 0, 2, TableLayoutConstraints.FULL, TableLayoutConstraints.FULL));

            //---- ttfZoom ----
            ttfZoom.setText("17");
            ttfZoom.setToolTipText("Enter Zoom Number. Max 19.");
            panel1.add(ttfZoom, new TableLayoutConstraints(1, 2, 1, 2, TableLayoutConstraints.FULL, TableLayoutConstraints.FULL));

            //---- Spare ----
            label6.setText("Place");
            label6.setHorizontalAlignment(SwingConstants.RIGHT);
            panel1.add(label6, new TableLayoutConstraints(2, 2, 2, 2, TableLayoutConstraints.FULL, TableLayoutConstraints.FULL));

            //---- Sparetextbox ----
            label7.setText("-- CSV Only --");
            panel1.add(label7, new TableLayoutConstraints(3, 2, 3, 2, TableLayoutConstraints.FULL, TableLayoutConstraints.FULL));
        }
        contentPanel.add(panel1, new TableLayoutConstraints(0, 0, 0, 0, TableLayoutConstraints.FULL, TableLayoutConstraints.FULL));

        //======== scrollPane1 ========
        {
            scrollPane1.setBorder(new TitledBorder("System.out - displays all status and progress messages, etc."));
            scrollPane1.setOpaque(false);

            //---- ttaStatus ----
            ttaStatus.setBorder(Borders.createEmptyBorder("1dlu, 1dlu, 1dlu, 1dlu"));
            ttaStatus.setToolTipText("<html>Task progress updates (messages) are displayed here,<br>along with any other output generated by the Task.<html>");
            scrollPane1.setViewportView(ttaStatus);
        }
        contentPanel.add(scrollPane1, new TableLayoutConstraints(0, 1, 0, 1, TableLayoutConstraints.FULL, TableLayoutConstraints.FULL));

        //======== panel2 ========
        {
            panel2.setOpaque(false);
            panel2.setBorder(new CompoundBorder(
                new TitledBorder("Status - control progress reporting"),
                Borders.DLU2_BORDER));
            panel2.setLayout(new TableLayout(new double[][] {
                {0.45, TableLayout.FILL, 0.45},
                {TableLayout.PREFERRED, TableLayout.PREFERRED}}));
            ((TableLayout)panel2.getLayout()).setHGap(5);
            ((TableLayout)panel2.getLayout()).setVGap(5);

            //======== panel3 ========
            {
                panel3.setOpaque(false);
                panel3.setLayout(new GridLayout(1, 2));

                //---- checkboxRecvStatus ----
                checkboxRecvStatus.setText("Enable \"Recieve\"");
                checkboxRecvStatus.setOpaque(false);
                checkboxRecvStatus.setToolTipText("Task will fire \"send\" status updates");
                checkboxRecvStatus.setSelected(true);
                panel3.add(checkboxRecvStatus);

                //---- checkboxSendStatus ----
                checkboxSendStatus.setText("Enable \"Send\"");
                checkboxSendStatus.setOpaque(false);
                checkboxSendStatus.setToolTipText("Task will fire \"recieve\" status updates");
                panel3.add(checkboxSendStatus);
            }
            panel2.add(panel3, new TableLayoutConstraints(0, 0, 0, 0, TableLayoutConstraints.FULL, TableLayoutConstraints.FULL));

            //---- ttfProgressMsg ----
            ttfProgressMsg.setText("Connecting to Google Maps...");
            ttfProgressMsg.setToolTipText("Set the task progress message here");
            panel2.add(ttfProgressMsg, new TableLayoutConstraints(2, 0, 2, 0, TableLayoutConstraints.FULL, TableLayoutConstraints.FULL));

            //---- progressBar ----
            progressBar.setStringPainted(true);
            progressBar.setString("progress %");
            progressBar.setToolTipText("% progress is displayed here");
            panel2.add(progressBar, new TableLayoutConstraints(0, 1, 0, 1, TableLayoutConstraints.FULL, TableLayoutConstraints.FULL));

            //---- lblProgressStatus ----
            lblProgressStatus.setText("task status listener");
            lblProgressStatus.setHorizontalTextPosition(SwingConstants.LEFT);
            lblProgressStatus.setHorizontalAlignment(SwingConstants.LEFT);
            lblProgressStatus.setToolTipText("Task status messages are displayed here when the task runs");
            panel2.add(lblProgressStatus, new TableLayoutConstraints(2, 1, 2, 1, TableLayoutConstraints.FULL, TableLayoutConstraints.FULL));
        }
        contentPanel.add(panel2, new TableLayoutConstraints(0, 2, 0, 2, TableLayoutConstraints.FULL, TableLayoutConstraints.FULL));
    }
    dialogPane.add(contentPanel, BorderLayout.CENTER);
  }
  contentPane.add(dialogPane, BorderLayout.CENTER);
  setSize(675, 485);
  setLocationRelativeTo(null);
  // JFormDesigner - End of component initialization  //GEN-END:initComponents
}

// JFormDesigner - Variables declaration - DO NOT MODIFY  //GEN-BEGIN:variables
// Generated using JFormDesigner non-commercial license
private JPanel dialogPane;
private JPanel contentPanel;
private JPanel panel1;
private JLabel label2;
private JTextField ttfSizeW;
private JLabel label4;
private JTextField ttfLat;
private JButton btnGetMap;
private JButton btnLoadCSV;
private JLabel label3;
private JTextField ttfSizeH;
private JLabel label5;
private JTextField ttfLon;
private JButton btnQuit;
private JLabel label1;
private JLabel label6;
private JLabel label7;
private JTextField ttfZoom;
private JScrollPane scrollPane1;
private JTextArea ttaStatus;
private JPanel panel2;
private JPanel panel3;
private JCheckBox checkboxRecvStatus;
private JCheckBox checkboxSendStatus;
private JTextField ttfProgressMsg;
private JFileChooser jfc;
private JProgressBar progressBar;
private JLabel lblProgressStatus;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T14:33:40.993

您可以简单地将整个内容读取为字符串并将其拆分。试试下面的

```
import java.util.io
import java.util.scanner

File file = new File("file source");
Scanner fileScanner = new Scanner(file);

fileString = fileScanner.nextLine();
info = fileString.split(","); 
```

# java - IF 语句仅在其前面带有它正在测试的值的“sysout”时才执行

> ID：13553280
> 
> 赞同：1
> 
> 时间：2012-11-25T17:04:47.287
> 
> 标签：java, multithreading, if-statement

我收到一个非常奇怪的错误。我有以下代码：

```
while (true) {
    System.out.println(model.getLightState());
    if (model.getLightState() == 1) {
        System.out.println("Entered..");
        view.driveThroughJunction();
        break;
    }
} 
```

现在，当灯光状态变为“1”时，我的程序进入 if 语句并执行正常的代码。但这仅在进入 while 循环后有该打印输出语句时才有效。我觉得这很奇怪。'sysout' 行会对 if 语句有任何影响吗？显然它适用于上述情况。

为什么会这样？

编辑：

```
(in the model class)
public final byte getLightState() {
    return lightChanger.getLightValue();
}

(in lightchanger class)
public byte getLightValue() {
    return light.getState();
}

(in the light class)
public final byte getState() {
    return this.state;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T17:17:28.717

您有同步问题，导致**可见性**问题。如果在读写多个线程共享的变量时不使用同步，则无法保证一个线程写入的值对其他线程可见。

要解决此问题，您需要执行以下操作之一：

*   使`state`领域`volatile`
*   将`state`字段类型更改为`AtomicInteger`
*   同步对字段的每次访问`state`（使用`synchronized`关键字），当然每次都使用相同的锁。

您的 sysout 调用使该值可见，因为它在内部调用了一些将寄存器状态刷新到主存储器的方法（例如，通过写入易失性字段或调用同步方法）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T17:21:35.597

您应该将模型实例声明为**volatile**。

Java 中的 Volatile 关键字用作 Java 编译器和线程的指示符，它们不缓存此变量的值并始终从主内存中读取它。因此，如果您想通过实现共享读取和写入操作是原子操作的任何变量，您应该将它们声明为 volatile 变量。

阅读更多：http: [//javarevisited.blogspot.com/2011/06/volatile-keyword-java-example-tutorial.html#ixzz2DFw4l8AW](http://javarevisited.blogspot.com/2011/06/volatile-keyword-java-example-tutorial.html#ixzz2DFw4l8AW)

从您的评论中可以看出，不止一个线程正在访问同一个模型实例并在同一个模型实例中执行读/写。如果没有**volatile**线程，确实会缓存模型实例的值，因此最终会出现脏读。随着`System.out.println`发生，您的读/写操作会延迟一点（由于输出写入），因此线程能够从主内存刷新缓存值。

# perl - 使用 Perl 和 Mojolicious 替换经过身份验证的用户代理登录/页面抓取

> ID：13553284
> 
> 赞同：1
> 
> 时间：2012-11-25T17:04:53.923
> 
> 标签：perl, authentication, user-agent, mojolicious

我正在尝试移植一些使用旧 Perl 模块编写的旧 Web 抓取脚本，以便仅使用 Mojolicious 工作。

使用 Mojo 编写了一些基本脚本，但对使用安全登录站点的经过身份验证的登录以及如何使用[`Mojo::UserAgent`](https://metacpan.org/module/Mojo%3a%3aUserAgent)脚本进行处理感到困惑。不幸的是，我在文档中看到的唯一示例是没有表单的基本身份验证。

我试图转换为使用 Mojo:UserAgent 的 Perl 脚本如下：

```
#!/usr/bin/perl

use LWP;
use LWP::Simple;
use LWP::Debug qw(+);
use LWP::Protocol::https;
use WWW::Mechanize;
use HTTP::Cookies;

# login first before navigating to pages
# Create our automated browser and set up to handle cookies
my $agent = WWW::Mechanize->new();
$agent->cookie_jar(HTTP::Cookies->new());
$agent->agent_alias( 'Windows IE 6' );  #tell the website who we are (old!)

# get login page

$agent->get("https://reg.mysite.com")
$agent->success or die $agent->response->status_line;

# complete the user name and password form
$agent->form_number (1);
$agent->field (username => "user1");
$agent->field (password => "pass1");
$agent->click();

#try to get member's only content page from main site on basis we are now "logged in" 
$agent->get("http://www.mysite.com/memberpagesonly1");
$agent->success or die $agent->response->status_line;

$member_page = $agent->content();
print "$member_page\n"; 
```

所以上面的工作正常。如何转换为在 Mojolicious 中做同样的工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T18:51:48.567

Mojolicious 是一个 Web 应用程序框架。虽然`Mojo::UserAgent`作为一个低级 HTTP 用户代理工作得很好，并且提供了一些无法使用的功能（特别是对异步请求和 IPV6 的原生支持），但它们都不像Web 抓取`LWP`那样方便使用。`WWW::Mechanize`

`WWW::Mechanize``LWP::UserAgent`与互联网接口的子类，并用于`HTML::Form`处理它找到的表单。`Mojo::UserAgent`没有处理 HTML 表单的工具，因此构建相应的 HTTP 请求一点也不简单。诸如使用（`GET`或`POST`）表单字段名称的 HTTP 方法以及隐藏字段的默认值的插入等信息都是由`HTML::Form`程序员自动完成的，如果您限制自己使用`Mojo::UserAgent`.

在我看来，即使尝试`Mojo::UserAgent`与 with 结合使用`HTML::Form`也是有问题的，因为前者需要一个`Mojo::Transaction::HTTP`对象来表示填写表单的提交，而后者会生成`HTTP::Request`用于 with 的对象`LWP`。

简而言之，除非您愿意大量重写，否则`WWW::Mechanize`我认为没有办法使用`Mojolicious`模块重新实现您的软件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T22:00:35.373

您可以使用`WWW::Mechanize`与 Web 服务器对话，并且可以使用[Mojo::DOM](https://metacpan.org/module/Mojo%3a%3aDOM)作为解析器从 Mojolicious' 中受益。两个世界中最好的... :)

# asp.net - 登录不使用自定义配置文件

> ID：13553293
> 
> 赞同：1
> 
> 时间：2012-11-25T17:06:05.337
> 
> 标签：asp.net, asp.net-membership, webforms, asp.net-profiles, asp.net-4.5

这是一个 Web 表单应用程序项目 (WAP)。我正在以编程方式创建具有[自定义配置文件](http://leedumond.com/blog/asp-net-profiles-in-web-application-projects/)属性的用户，并且可以看到用户数据保留在 Users 表中，但不在 aspnet_membership 或 Memberships 表中。使用自定义注册表单创建新用户后，登录失败。**任何人都可以建议故障排除清单吗？**

```
MembershipCreateStatus status = MembershipCreateStatus.Success;
MembershipUser newUser 
    = Membership.CreateUser(userNameTxt.Text.Trim(), passwordTxt.Text, 
        emailTxt.Text, questionTxt.Text, answerTxt.Text, true, out status);
Roles.AddUserToRole(userNameTxt.Text.Trim(), "Member");

// Gather and save Profile info
CustomProfile profile = CustomProfile.GetProfile(userNameTxt.Text.Trim());
profile.Personal.Email = emailTxt.Text.Trim();
profile.Personal.FirstName = firstNameTxt.Text.Trim();
profile.Personal.LastName = lastNameTxt.Text.Trim();
profile.Save(); 
```

**错误消息：**您的登录尝试不成功。请再试一次。

**发生了什么：** CreateUser 返回 null

```
 <providers>
          <remove name="DefaultMembershipProvider"/>
          <add 
              name="DefaultMembershipProvider" 
              type="System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
              connectionStringName="LocalSqlServer" 
              enablePasswordRetrieval="false" 
              enablePasswordReset="true" 
              requiresQuestionAndAnswer="true" 
              requiresUniqueEmail="false" 
              minRequiredPasswordLength="6" 
              minRequiredNonalphanumericCharacters="0" 
              passwordAttemptWindow="1000" 
              passwordFormat="Hashed"
              applicationName="/" />
      </providers>

<remove name="LocalSqlServer" />
    <add name="LocalSqlServer" 
      connectionString="Initial Catalog=MYDB;Data Source=WIN2K8;Integrated Security=SSPI;"
      providerName="System.Data.SqlClient" />
    <remove name="MYDBConn" />
      <add name="MYDBConn" connectionString="Initial Catalog=MYDB;Data Source=WIN2K8;Integrated Security=SSPI;"
          providerName="System.Data.SqlClient" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:56:18.890

在从您的代码创建用户之前，请确保您可以使用[ASP.Net Configuration](http://www.asp.net/web-forms/tutorials/moving-to-aspnet-20/membership)创建用户。

![在此处输入图像描述](../Images/8a28a6fa45060ed5a13bb2f3b0b28af7.png)

以下是一些建议[“您的登录尝试不成功。请重试。” - ASP.NET 登录控件。](http://www.codeproject.com/Articles/27682/Your-Login-Attempt-was-not-Successful-Please-Try)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T03:36:20.523

显然，在 .NET 4 中，使用的默认哈希算法是 HMACSHA256，而不是以前的 Framework 版本中的 SHA1。我在这里找到了解决方案：

[ASP.NET Membership - 用户密码存储](http://forums.softfluent.com/default.aspx?g=posts&t=233)

[从 3.5 升级到 ASP.net 4.0 后登录失败](https://stackoverflow.com/questions/2739196/login-fails-after-upgrade-to-asp-net-4-0-from-3-5)

我刚刚调整了 SHA1 的配置文件，如下所示：

```
<membership defaultProvider="DefaultMembershipProvider" hashAlgorithmType="SHA1">
    ...
</membership> 
```

# c++ - 客户端和服务器之间的游戏通信使用哪种协议

> ID：13553299
> 
> 赞同：1
> 
> 时间：2012-11-25T17:07:12.223
> 
> 标签：c++, game-engine, marmalade

我只需要建议或教程链接，我正在制作多人 RTS 游戏，并且游戏将进行密集通信（我正在使用 C++ 和橘子酱制作客户端，用于 ios/android 上的跨平台）。我应该使用哪种协议进行通信（TCP、HTTP 长轮询——以避免 const 向服务器或 websocket 发送请求）？有谁知道用于 ARM 的 websockets 的优秀 C++ 库？

# c++ - 如何用键盘输入填充 C++ 向量？

> ID：13553301
> 
> 赞同：1
> 
> 时间：2012-11-25T17:07:31.667
> 
> 标签：c++, vector, user-input

诀窍在于我还不知道字符串的大小。我需要能够向用户询问一个词，并且这个词将存储在一个向量中。

```
int main()
{

    vector<char> word (80);

    // get the word from user
    for(int i=0 ; getchar() != '\n' ; i++)
        {
            cin >> word[i];
        }
    // print the word from user
    for(int i=0 ; i<=word.size() ; i++)
        {
            cout << word[i] << endl;
        }

    return 0;
} 
```

**编辑：**只是我想捕获从键盘输入的单词、任何单词、字符串等。示例：假设我想将单词“obvious”添加到向量中，以便以后可以操作向量。所以我输入“obvious”，然后按回车键，然后就可以了，我有一个大小为 7 的向量，其中包含“obvious”一词。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T17:08:57.917

```
std::string str;

// I'm confused about whether you want a line, or a word.
// this gets a line
std::getline(std::cin, str);

// this gets a word
// std::cin >> str;

vector<char> word(str.begin(), str.end()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T17:10:37.670

我认为这个问题经常被问和回答。显而易见的方法是

```
std::vector<char> word{std::istreambuf_iterator<char>(std::cin),
                       std::istreambuf_iterator<char>()}; 
```

... 或使用 C++ 2003 编译但经过调整以避免最令人烦恼的解析的等效版本。

如果您只想读取部分输入，例如，只是一行，您需要稍微调整它：

```
for (std::istreambuf_iterator<char> it(std::cin), end;
     it != end && *it != '\n'; ++it)
{
    word.push_back(*it);
}
++it; 
```

在任何一种情况下，关键是让`std::vector<char>`增长到必要的大小。

# objective-c - Objective-C 子类化和未来兼容性

> ID：13553305
> 
> 赞同：4
> 
> 时间：2012-11-25T17:07:42.687
> 
> 标签：objective-c, subclassing

Objective-C 支持子类化和类别，允许您向现有类添加方法。这是我的情况。

```
// Made at earlier than iOS 5.x
@interface MyVC : UIViewController
- (void)childViewControllers;
@end 
```

`childViewControllers`iOS 5.0之前没有这个方法。我可以毫无顾虑地添加该方法。但是现在`UIViewController`有了一个带有名称的方法。如果我构建为 iOS 4.x 编写的遗留代码，该方法将被覆盖，它会产生不可预知的结果。

有什么技术可以保护我的代码免受此类问题的影响吗？这可能发生在类别或（也许）其他东西上。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T17:19:12.890

一种选择是为所有方法名称添加前缀。每当您扩展标准框架类时，请执行此操作。

由于没有像 Java 中那样的命名空间，因此同样的技术用于类名以避免将来可能发生的冲突。

这是另一个需要考虑的想法。这种情况多久发生一次？您需要权衡通过返回并重命名您的方法并更新受影响的代码来处理罕见的名称冲突与必须提出前缀命名方案并每天一遍又一遍地输入这些额外字符的努力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T17:29:48.830

在处理诸如 Obj-C 之类的后期绑定系统时，必须时刻警惕命名冲突。

不幸的是，这意味着您总是面临此类问题的风险。在这种情况下，您在 4.x 时代没有做错任何事。你所做的只是为一个好主意写一个好名字！但苹果也喜欢这个名字，他们的东西每次都会优先。你最好的办法是在你的类和方法名中添加一个前缀，特别是在扩展 Apple 的东西时。

在这种情况下，只需重命名您的方法。好消息是，在移动世界中，您无需在维护新应用程序版本的同时修补旧应用程序版本。任何时候在市场上都只有一个版本的应用程序是合法的。这意味着您可以对代码库进行永久性更改，而不必担心更改对您的应用程序的 v5.1.6 有效，但对 v6.0.2 则不行。当用户更新时，他们总是更新到最新版本。

你将以艰难的方式积累经验（你现在正在这样做），就像我在有一个非常重要的方法时所做的那样，称为`description`.

# javascript - JQuery Snippet 不是一直触发，只是有时触发

> ID：13553306
> 
> 赞同：1
> 
> 时间：2012-11-25T17:08:01.640
> 
> 标签：javascript, wordpress, jquery

我使用我在 GitHub 上找到的一个简单脚本为 WP 构建了一个插件。该插件工作正常，因为它将 JS 加载到站点的非管理页面上。

然而，JS 只在某些地方开火。

该脚本应该找到所有内部链接并使它们平滑滚动到页面上的目标位置。

这是网站上的一个很好的示例页面：http: [//bigbrownbeaver.net/have-me-build-your-site/](http://bigbrownbeaver.net/have-me-build-your-site/)

在左侧页面的最底部，有一个指向页面顶部的链接。当你点击它时，这个插件的 JS 会触发，并且它会平滑地滚动到顶部。然而...

当您单击页面上的任何其他内部链接时，（其中有相当多的链接位于页面顶部，在两个深色列中的任何一个内）相同的脚本不会触发？？？

几天来我一直试图找到答案，但我很茫然。有人能跟我一起追吗？这是插件的整个代码：

```
<?php
/*
Plugin Name: Smooth Scrolling Links
Plugin URI: http://bigbrownbeaver.net
Description:Adds a js smooth scrolling effect to all links on your site that point to other parts of a page or post
Version: 1.0
Author: Aaron
Author URI: http://bigbrownbeaver.net/newsletter/
*/

/*  Copyright 2013  Aaron > BigBrownBeaver.Net

This program is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License, version 2, as 
published by the Free Software Foundation.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
*/

//load required script

add_action('wp_head', 'smooth_scrolling_links');

function smooth_scrolling_links() { ?>

<?php if ( !is_admin() ) { ?>

    <script type="text/javascript">

    (function($) {
            $.fn.smoothscrolling = function() {

                function scrollto(destination, hash) {

                    // Change the hash first, then do the scrolling.
                    var scrollmem = $(document).scrollTop();
                    window.location.hash = hash;
                    $(document).scrollTop(scrollmem);
                    $("html,body").animate({
                        scrollTop: destination
                    }, 800);

                }

                if (typeof $().on == "function") {

                    $(document).on('click', 'a[href^="#"]', function() {

                        var href = $(this).attr("href");

                        if ($(href).length == 0) {

                            var nameSelector = "[name=" + href.replace("#", "") + "]";

                            if (href == "#") {
                                scrollto(0, href);
                            }
                            else if ($(nameSelector).length != 0) {
                                scrollto($(nameSelector).offset().top, href);
                            }
                            else {
                                // fine, we'll just follow the original link. gosh.
                                window.location = href;
                            }
                        }
                        else {
                            scrollto($(href).offset().top, href);
                        }
                        return false;
                    });
                }

                else {
                    $('a[href^="#"]').click(function() {
                        var href = $(this).attr("href");

                        if ($(href).length == 0) {

                            var nameSelector = "[name=" + href.replace("#", "") + "]";

                            if (href == "#") {
                                scrollto(0, href);
                            }
                            else if ($(nameSelector).length != 0) {
                                scrollto($(nameSelector).offset().top, href);
                            }
                            else {
                                // fine, we'll just follow the original link. gosh.
                                window.location = href;
                            }
                        }
                        else {
                            scrollto($(href).offset().top, href);
                        }
                        return false;
                    });
                }
            };

        })(jQuery);

        jQuery(document).ready(function(){
            jQuery().smoothscrolling();
        });

    </script>

<?php }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T17:18:03.310

我认为这可能是因为“返回页面顶部”链接仅在其 href 中有锚点：

```
<a href="#wrap" rel="nofollow">...</a> 
```

而其他人有一个完整的网址：

```
<a href="http://bigbrownbeaver.net/have-me-build-your-site/#1">...</a> 
```

如果您查看 Javscript，您会看到该插件仅在寻找以哈希*开头的锚点。*这就是`^=`在例如

```
$(document).on('click', 'a[href^="#"]', function() {
    ... 
```

如果你`"http://bigbrownbeaver.net/have-me-build-your-site/#1"`用 just `"#1"`then 替换那些也应该工作。

# jquery - Fancybox v2.1.3 ajax加载表单

> ID：13553308
> 
> 赞同：0
> 
> 时间：2012-11-25T17:08:21.360
> 
> 标签：jquery, fancybox

再次向所有花式盒爱好者致敬。我被 ajax 卡住了，将外部 html 表单加载到当前查看的 html 文件中。我在以这种方式引入 html 的标记中使用带有 class="fancybox.ajax" 的隐藏触发器：

```
$('body').prepend('<a class="fancybox fancybox.ajax" href="form.html" style="display: none;"></a>'); 
```

以便接下来可以通过以下方式将表单带入 html：

```
$(".fancybox.ajax").trigger('click'); 
```

但这失败了。也许我需要“开”或“活”。我不知道是否有更好的方法来实现这一点。然后我想对表单提交进行一些js检查，但这将如何运行？也许对“on”有一些好处

```
 $('#submit').on(click, function({ .... })); 
```

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T18:42:26.463

不如试试

```
$(".fancybox").trigger('click'); 
```

...该类`fancybox`用于将此类选择器绑定到fancybox，而`fancybox.ajax`该类用于定义内容的类型（您不需要使用`live`，因为fancybox v2.x已经使用了该方法）

另一方面，如果您想对表单提交执行一些操作，请尝试将`.on()`方法绑定到`form`选择器（而不是`submit`按钮），例如

```
$('#formSelector').on("submit", function({ //do somthing })); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T20:48:29.133

好的，提交带有ajax的表单的答案只是

```
$("#submit").live('click', function() { ... }); 
```

到现在为止，我绝不能让 on() 工作。

# backbone.js - 连接主干视图的正确方法

> ID：13553309
> 
> 赞同：2
> 
> 时间：2012-11-25T17:08:26.293
> 
> 标签：backbone.js, backbone-views, backbone-events

```
我有两种看法：
   1 LeftView（当 RightView 最小化时最大化，反之亦然）
   2 RightView（含）
      - 收集
         - RightItemView（渲染 RightItemModel）

```

当 RightView 最大化并且用户单击 RightItemView 时，我想最大化 LeftView 并根据单击的 RightItemView 中的数据显示一些内容。

连接它们的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T19:16:45.623

我建议使用 Backbone.Events 模块：

[http://backbonejs.org/#Events](http://backbonejs.org/#Events)

基本上，这一行就是创建事件调度程序所需的全部内容：

```
var dispatcher = _.clone(Backbone.Events); 
```

然后，您的所有视图都可以使用全局调度程序触发/侦听事件。

因此，在 RightItemView 中，您将在 click 事件中执行以下操作：

```
dispatcher.trigger('rightItemClick', data); // data is whatever you need the LeftView to know 
```

然后，在 LeftView 的初始化函数中，您可以监听事件并调用您的相关函数：

```
dispatcher.on('rightItemClick', this.maximizeAndDisplayData); 
```

假设您的 LeftView 将具有如下功能：

```
maximizeAndDisplayData: function(data) {
    // do whatever you need to here
    // data is what you passed with the event
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T20:12:03.447

@jordanj77 提到的解决方案绝对是满足您要求的正确方法之一。只是出于好奇，我想到了另一种方法来达到同样的效果。`EventDispatcher`我们为什么不使用底层模型作为我们的，而不是使用单独的来在两个视图之间进行通信`EventDispatcher`？让我们试着从这些方面思考。

首先，向名为的模型添加一个新`boolean`属性并将其默认为. 每当用户选择 时，将模型的属性设置为 true。这将触发模型上的事件。`RightItem``current``false``RightItemView``current``change:current`

```
var RightItem = Backbone.Model.extend({
  defaults: {
    current: false,
  }
});

var RightItemView = Backbone.View.extend({
  events: {
    'click li': 'changeCurrent'
  }

  changeCurrent: function() {
    this.model.set('current', true);
  }
}); 
```

另一方面，`LeftView`将`RightItem`在创建期间收到一个 Backbone.Collection 模型。你无论如何都会有这个实例来提供`RightView`不是吗？在其初始化方法中，`LeftView`将监听`change:current`事件。当事件发生时，`LeftView`会将`current`当前显示的模型的属性更改为 false 并开始显示触发此事件的新模型。

```
var LeftView = Backbone.View.extend({
  initialize: function() {
    this.collection.on('change:current', this.render, this);
  },

  render: function(model) {
    // Avoid events triggered when resetting model to false
    if(model.get('current') === true) {

      // Reset the currently displayed model
      if (this.model) {
        this.model.set('current') = false;
      }

      // Set the currently selected model to the view
      this.model = model;

      // Display the view for the current model
    }
  }
});

var leftView = new LeftView({
  // Use the collection that you may have given the RightView anyways
  collection: rightItemCollection 
}); 
```

这样，我们就可以使用底层模型作为左右视图之间的通信方式，而不是`EventDispatcher`为我们使用代理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T22:15:20.617

@Ganeshji 给出的解决方案启发了我做一个活生生的[例子](http://plnkr.co/edit/br0AfG?p=preview)

我为此创建了 2 个视图。

```
var RightView = Backbone.View.extend({
  el: $('.right_view'),

  template: _.template('<p>Right View</p>'),

  renderTemplate: function () {
      this.$el.html('');
      this.$el.append(this.template());  
      this.$link = this.$el.append('<a href="#" title="some data" id="left_view_max">Item to view</a>').children('#left_view_max'); 
  },

  events: {
      'click #left_view_max'    :   'maxLeftView'
  },

  maxLeftView: function () {
    //triggering the event for the leftView
    lView.trigger('displayDataInLeftView', this.$link.attr('title'));
  },

  initialize: function (options) {  
      this.renderTemplate();
  }
});

var LeftView = Backbone.View.extend({
  el: $('.left_view'),

  template: _.template('<p>Left View</p>'),

  renderTemplate: function () {
      this.$el.html('');
      this.$el.append(this.template());
  },

  displayDataInLeftView: function (data) {
    this.$el.append('<p>' + data + '</p>');
  },

  initialize: function (options) {
    //set the trigger callback
    this.on('displayDataInLeftView', this.displayDataInLeftView, this);
    this.renderTemplate(); 
  }
});

 var lView = new LeftView();
 var rView = new RightView(); 
```

希望这可以帮助。

# java - Java 中的内容窗格

> ID：13553315
> 
> 赞同：2
> 
> 时间：2012-11-25T17:08:59.420
> 
> 标签：java, swing, contentpane

我是编程新手，只是在学习 JFrame 等，在这里我读了 ContentPane 就像这样“组件进入“内容窗格”，而不是直接在框架中。” 当我搜索内容窗格时，我读到了包含层次结构，这让我很难理解，

有人可以帮我解释一下 ContentPane 的概念和 Gui Component 的包含层次结构吗

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-25T17:13:06.677

我认为这张图清楚地描述了你想要的东西：

![在此处输入图像描述](../Images/23554d8e5acf54aa08c870e8f64a3096.png)

# actionscript-3 - 检测对象何时真正从舞台上移除

> ID：13553319
> 
> 赞同：0
> 
> 时间：2012-11-25T17:09:32.647
> 
> 标签：actionscript-3, apache-flex, flex3

我想检测对象是否确实从舞台上移除了。我在这里和其他地方检查了很多答案，并且不知道如何注意到该对象确实已从舞台上移除（我的意思是它不再显示在舞台上）。下面的代码是我最后的测试：

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml">
    <mx:Canvas width="100%" height="50%" backgroundColor="gray" id="c1">
        <mx:Canvas id="cChild" backgroundColor="black" width="20" height="20" 
        left="20" top="20" 
        removedFromStage="trace('removed from stage ' + event.target)" 
        removed="trace('removed ' + event.target)">
        </mx:Canvas>
    </mx:Canvas>
    <mx:Canvas width="100%" height="50%" backgroundColor="white"  id="c2">
    </mx:Canvas>
    <mx:Button label="add child" click="c2.addChild(c1)" />
    <mx:Button label="add child2" click="addChild(c1)" />
</mx:Application> 
```

我不明白我在控制台输出中发现了什么：

```
removed MainFlex0.c1.cChild.border
  - before click 'add child'
removed from stage MainFlex0.c1.cChild
removed MainFlex0.c2.c1.cChild.border
  - after click 'add child', before 'add child2'
removed from stage MainFlex0.c2.c1.cChild
removed MainFlex0.c1.cChild.border
  - after click 'add child2' 
```

是否有任何条件我可以检查并确保该对象真的“即将从舞台上移除”？

萨拉姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T20:32:45.143

```
if( !c1.stage ){
// it is not on stage
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T18:00:47.330

`removedFromStage`在项目从舞台上移除之前被调用。如果您在该事件处理程序中不执行任何操作，则该元素将被删除。

# python - 有没有更优雅的方法来处理这个刮板中的空值？

> ID：13553321
> 
> 赞同：2
> 
> 时间：2012-11-25T17:09:47.747
> 
> 标签：python, datetime, coding-style, strptime, pep

现在我已经弄清楚了[如何在 python 中进行 strtotime？](https://stackoverflow.com/questions/13546936/how-do-i-strtotime-in-python)我想知道是否有更优雅的方法来处理带有空日期的条目，如果我尝试 strptime() 它们会返回错误。

```
warrant_issued = cells[4].get_text().strip()
try:
    warrant_issued_no = datetime.strptime(warrant_issued, '%m/%d/%Y')
except:
    warrant_issued_no = '' 
```

这行得通，但我在每一行解析四个或五个日期，它看起来既冗长又重复。我在想我应该定义一个函数，但是还有其他方法可以让这更 Pythonic 吗？

为简洁起见，我`from datetime import datetime`一开始就这样`datetime.strptime()`做了。否则我需要`datetime.datetime.strptime()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T17:13:51.473

我认为定义一个函数并只捕获你知道如何处理的异常正是这样做的方法。

```
def parse_datetime(warrant_issued):
   try:
      warrant_issued_no = datetime.strptime(warrant_issued, '%m/%d/%Y')
   except ValueError:
      warrant_issued_no = ''

warrants_issued = [ parse_datetime(cell.get_text().strip()) for cell in cells ] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T20:34:51.017

我认为你可能会做一些与**@mgilson**所说的类似的事情，但是用一个`if`statement 而不是`try/catch`，因为你可能会意外地发现你无意的错误。

我的理解是，您要在此处捕获的错误是日期字段为空白时，所以这就是我要处理的。

```
def parse_datetime(warrant_issued):
    # Using Python's "truthiness" to take care of both '' and None, however it comes out
    if warrant_issued:
        warrant_issued_no = datetime.strptime(warrant_issued, '%m/%d/%Y')
    else:
        warrant_issued_no = ''

warrants_issued = [parse_datetime(cell.get_text().strip()) for cell in cells] 
```

这样，如果你最终得到一些其他错误，但仍然抛出 a`ValueError`但不是从那里没有日期，它会抛出一个异常，你将能够处理它。

# css - CSS：使 iframe 充满和高度，没有滚动条

> ID：13553324
> 
> 赞同：2
> 
> 时间：2012-11-25T17:09:53.200
> 
> 标签：css

如何在 iframe 上获得完整高度，因此如果超出指定值，我就没有滚动条`height: 500px;`- 我只想拥有页面滚动条而不是 iframe 滚动条。

我知道你可以隐藏滚动条，但是你看不到 iframe 中的所有内容。

你怎么能做到这一点？

width: 100% 完美，但 height: 100% 不会。

检查[http://jsfiddle.net/5PKqf/](http://jsfiddle.net/5PKqf/)

如果它有效，它应该在 iframe 中显示整个网站

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T17:12:39.913

给 html 一个高度：100%

```
html{ height: 100%; } 
```

# javascript - D3.js：使用鼠标滚轮滚动缩放 x 轴和数据

> ID：13553325
> 
> 赞同：4
> 
> 时间：2012-11-25T17:10:03.490
> 
> 标签：javascript, graph, svg, d3.js, visualization

我搜索了其他相关问题，但无论是因为我是 D3 新手，还是作为编码员生疏，我都无法弄清楚。

我有一个图表，我希望能够通过仅在 a 轴和数据上滚动鼠标滚轮来放大。现在，我让整个图形在鼠标滚轮的滚动上缩放，而不仅仅是 x 轴。

编辑：这是我的最终目标，但可能有放大/缩小限制（虽然一次只有一件事）： http: [//mbostock.github.com/d3/talk/20111018/#15](http://mbostock.github.com/d3/talk/20111018/#15)

看起来有来自该示例的代码发布在这里：[https ://github.com/mbostock/d3/blob/master/examples/zoom-pan/zoom-pan-transform.html](https://github.com/mbostock/d3/blob/master/examples/zoom-pan/zoom-pan-transform.html)

```
graph.attr("transform", "translate(" + d3.event.translate + ")" + " scale(" + d3.event.scale + ")"); 
```

到目前为止，我已经在这里删除了我的代码：http: [//jsfiddle.net/toddsherman/x3uWK/](http://jsfiddle.net/toddsherman/x3uWK/)

任何见解或方向表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T01:32:36.373

部分答案，在源代码中作为参考给出的 jsfiddle 中，有：

```
chart.select(".xaxis").call(xAxis);
chart.select(".yaxis").call(yAxis); 
```

它指的是您可能感兴趣的东西：

```
xAxis = d3.svg.axis().scale(x);
yAxis = d3.svg.axis().scale(y).orient("left"); 
```

x 和 y 似乎是缩放函数：

```
var x = d3.time.scale().domain([minDate, maxDate]).range([0, graph_width]);

var y = d3.scale.linear()
    .domain([0, max_val])
    .range([graph_height, 0]); 
```

此外，缩放功能有不同的转换：

```
chart.selectAll(".chart rect").attr("transform", "translate(" + d3.event.translate[0] + ",0)scale(" + d3.event.scale + ", 1)"); 
```

translate 参数只是 X 轴和 Y 轴的 0 值。scale 参数仅包含 X 轴和 Y 轴的 1 值。

也就是说，我不确定如何提供更多帮助

# php - 登录页面中的mysqli查询

> ID：13553327
> 
> 赞同：0
> 
> 时间：2012-11-25T17:10:07.773
> 
> 标签：php, sql, phpmyadmin

我认为我的 crypt() 有问题；php函数。我的错误日志中没有显示任何错误。

我在验证登录页面时遇到了困难。

```
 if( $page_mode == 'Login' )
{
require "globe.php";
    //simple post from below
    $username = htmlentities(trim($_POST['username']));
    $username = mysqli_real_escape_string($mysqli, $username);
    $password = trim($_POST['password']);
    $query = mysqli_query($mysqli, "SELECT * FROM Persons WHERE Username = '$username'");
    $row = mysqli_fetch_assoc($query);
    $numrows = mysqli_num_rows($query);
    $dbuser = $row['Username'];
    $dbpass = $row['Password'];
    $hashed_password = crypt($password, $dbpass);

    if( ($username == '') || ($password == '') ) {
        $error_string .= '<font color=red>You have left either the username or password field blank!</font>';
        }
    else if ($numrows == 0)
    {
        $error_string .= '<font color=red>No username can be found!</font>';
        }
    else if ($numrows == 1)
    {

       if ($password == $hashed_password)
       {
       $error_string .= '<font color=red>Details checked out</font>';
       }
    }
    else {
            $error_string .= '<font color=red>There was an error. Please contact an Admin</font>';

    }
} 
```

当我输入用户名和密码进行测试时，不会显示任何错误提示。

如果有人能解决这个问题将不胜感激

应该提到该错误仅在使用 usepass 检查 dbpass 时才开始出现

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T18:42:51.723

你有

```
$password = trim($_POST['password']);
$dbpass = $row['Password'];
$hashed_password = crypt($password, $dbpass);

if ($password == $hashed_password) 
```

这会将登录表单中的明文密码与散列密码进行比较。但是您必须将散列密码与存储在数据库中的散列密码进行比较。所以，这应该是

```
if ($hashed_password == $dbpass) 
```

因为在数据库中，只存储散列密码。

出于调试目的，您应该回显`$hashed_password`并`$dbpass`查看这是什么错误以及如何出错。[`Crypt`](http://php.net/manual/en/function.crypt.php)还指出，如果给定不合适的盐，该地穴可能会失败。返回的字符串将少于 13 个字符。

# php - 使用 AJAX 发送具有可变数量字段的表单，$_POST 数组为空

> ID：13553329
> 
> 赞同：0
> 
> 时间：2012-11-25T17:10:10.817
> 
> 标签：php, javascript, ajax, forms

我正在尝试使用 post 方法将表单数据发送到 PHP 脚本。因为字段的数量和名称是可变的，所以我遍历 $_POST 数组。当将表单“直接”发送到 PHP 文件时，它工作得很好，但是由于不同的原因，我需要/想要让 PHP 脚本在后台运行，而不需要重新加载表单的页面。所以我尝试使用 AJAX ...但是在执行脚本时 $_POST 数组是空的。

这是我用来简单地回显表单输入的 PHP 文本脚本 (process_form_fields.php)：

```
echo "DEBUG: Script Output start.<br />";
foreach($_POST as $name => $value)
{
    echo "DEBUG: $name = $value <br />";
}
echo "DEBUG: End of script output.<br />"; 
```

sdection 中的 JavaScript / AJAX 代码如下所示：

```
<script type="text/javascript" language="javascript">
    xmlhttp = new XMLHttpRequest();

    function process_form()
    {
        xmlhttp.onreadystatechange =
        function()
        {
            if(xmlhttp.readystate == 4)
            {
                document.getElementById("status_message_box").innerHTML = xmlhttp.responseText;
            }
            else
            {
                document.getElementById("status_message_box").innerHTML = "<i>loading (status:" + xmlhttp.status + xmlhttp.responseText + ")</i>";
            }
        }
        xmlhttp.open("POST", "http://mydomain.com/modules/process_form_fields.php", true);
        xmlhttp.send();
    }
</script> 
```

这就是表单的样子：

```
<form action="process_form_fields.php" method="post" class="niceform">
<input type="submit" value="submit">
<div class="set_options">
    <dl>
        <dt>
            <label for="1">Option 1:</label>
        </dt>
        <dd>
            <select size="1" name="Option 1" id="Option 1">
                <option value="Alpha">Alpha (1pt)</option>
                <option value="Beta">Beta (5pt)</option>
                <option value="Gamma">Gamma (20pt)</option>
            </select>
        </dd>
    </dl>
    <dl>
        <dt><label for="2">Option 2:</label></dt>
        <dd>
            <select size="1" name="Option 2" id="Option 2">
                <option value="Red">Red (0pt)</option>
                <option value="Blue">Blue (0pt)</option>
            </select>
        </dd>
    </dl>
    <dl>
        <dt>
            <label for="3">Option 3:</label>
        </dt>
        <dd>
            <select size="1" name="Option X" id="Option X">
                <option value="Foo">Foo (-5pt)</option>
                <option value="Bar">Bar (42pt)</option>
            </select>
        </dd>
    </dl>
</form> 
```

将表单直接发送到 PHP 文件会创建以下输出，就像它应该的那样：

```
DEBUG: Script Output start.
DEBUG: Option 1 = Alpha (1pt)
DEBUG: Option 2 = Blue (0pt)
DEBUG: Option X = Bar (42pt)
DEBUG: End of script output. 
```

使用上面的 AJAX 输出仅是：

```
DEBUG: Script Output start.
DEBUG: End of script output. 
```

我想我可能在这里遗漏了一些简单的东西，但我太盲目了，无法将手指放在上面。我希望有人能指出我正确的方向。重要的是 HTML 表单具有可变数量的字段，并且这些字段不以任何方式编号/序列化（可能是“选项 1”、“选项 2”、“最喜欢的黄色香蕉形状水果”和“年龄”例如）。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T17:22:28.433

您没有使用 ajax 请求发送数据，这应该可以：

```
 var dataString = $('form').serialize();
    xmlhttp.send(dataString); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T17:17:04.413

您没有在请求中发送任何数据！XMLHttpRequest 不会自动捕获表单数据。您必须明确说明要传递的变量。您必须使用 javascript 来捕获表单字段的值，将它们串入查询中，然后使用`xmlhttp.send()`.

尝试类似：

```
xmlhttp.open("POST","http://mydomain.com/modules/process_form_fields.php",true);
xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
xmlhttp.send("option1=A&option2=B&option3=C"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T17:21:11.230

jquery 可以避免这种复杂且难以调试的代码。

使用这样的东西：

```
$.ajax({
  url: "test.html",
  data: {data:yourdata}
}).done(function() { 
    //your success function
}); 
```

就是这样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T17:17:50.113

[要像 HTML 表单一样 POST 数据，请使用 setRequestHeader() 添加 HTTP 标头。在 send() 方法中指定要发送的数据：](http://www.w3schools.com/ajax/ajax_xmlhttprequest_send.asp)。
在您的情况下，这里`send();`是空的，这就是为什么您得到一个空的 $_POST 数组

# c - 如何在 avr-gcc 中定义一个计时器

> ID：13553337
> 
> 赞同：0
> 
> 时间：2012-11-25T17:10:50.647
> 
> 标签：c, avr-gcc, atmel

我正在学习使用 avr-gcc，但我不知道如何解决以下任务：

*来自端口 B 的 8 位应以 500 毫秒的间隔从 0 到 1 交替设置。*

我感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T19:57:21.767

你可以使用`#include <util/delay.h>`, 如果你写 :`_delay_loop_2(1000);`你会有 1 毫秒的延迟；你可以使用这个功能：

```
void delay()
{

    for(int i=0;i<500;i++) 

        _delay_loop_2(1000);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T11:57:10.680

看看这个例子。这是一个非常基本的代码`timer0`：

```
#include<avr/io.h>
#include<avr/interrupt.h>
#define F_CPU 1000000UL
unsigned int t=0;
main()
{
    DDRD=0xFF;
    TCCR0=(1<<CS00);
    TCNT0=0;
    TIMSK=(1<<TOIE0);
    sei();
    while(1);
}
ISR(TIMER0_OVF_vect)
{
    t++;
    if(t==40000)
    {
        PORTD=~PORTD;
        t=0;
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T03:25:31.643

正如@Alex 所说，你可以`#include <util/delay.h>`，但是使用提供的代码（@Alex）你可以简单地使用`_delay_ms(500);`

这将为您提供 500 毫秒的延迟。

选择权在您手中，请记住，在这两种情况下，您的时钟频率都必须正确地定义给您的编译器：

16MHz 示例：`#define F_CPU 16000000UL`

# java - Android，客户端服务器通信

> ID：13553338
> 
> 赞同：1
> 
> 时间：2012-11-25T17:10:59.057
> 
> 标签：java, android, sockets, client-server, multiplayer

我有一个简单的问题，我要创建一个多人 Android 应用程序，我要遵循的网络方法是客户端服务器，一个用户将成为服务器，而其他 3 个用户可以连接到它，主机将使用他们的 Wi-Fi 热点，而其他 3 个使用他们的 WiFi 连接到该热点。

现在我对网络的了解非常低，我对它不是 100% 满意，但我想学习它以供将来参考，但我的问题是这个。

我该怎么做呢？有谁知道这方面的好教程？当我在做 CS 风格时，什么协议最适合 WiFi？UDP？TCP？我做了一些研究，但你觉得最好的选择是什么？此外，该应用程序只需要发送整数，根本不需要发送大量数据。

帆布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T17:22:27.950

从您的角度来看，UDP 和 TCP 之间的主要区别主要在于 UDP 不能保证被传递。如果您要发送大量流量（频繁的整数更新），您应该使用 UDP 进行流量，使用 TCP 进行通信设置。如果流量比使用 TCP 低。

有关通信，请参见套接字。 [简单教程在这里开始](http://www.helloandroid.com/tutorials/simple-connection-example-part-ii-tcp-communication)

当然，您应该使用服务和线程进行通信。

# autohotkey - 使用 AutoHotkey 选择插入符号前的最后 N 个字符

> ID：13553340
> 
> 赞同：2
> 
> 时间：2012-11-25T17:11:21.560
> 
> 标签：autohotkey, caret

有没有办法用自动热键选择最后*N*个符号？

我正在制作一个复制 Sublime Text 的重复函数（`Ctrl`+ `Shift`+ `D`）的函数。我希望在通过复制文本之前选择文本`SendInput ^C{right}^V`

从技术上讲，我可以做类似的事情：

```
selectBefore(n){
    Loop, %n% {
        SendInput +{Left}
    }
} 
```

但这表明表现不佳。

另一种方法是玩`Shift`+ `Home`。例如，`Send +{Home}`，然后计算所选符号的数量，然后`Send {Left}`重复`Send +{Home}`，依此类推，直到达到重复字符串的长度。

我没有看到任何更好的选择。

在插入符号之前选择*N*个符号是否有一种好的基本方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T09:50:23.253

从我读到的关于 ST2 的内容（感谢您让我知道）是 ^+d 复制选定的文本，或者如果没有选择任何内容，则复制整行。

这行得通吗？

```
TempCB = %ClipBoard% ; Park clipboard (text) content, Other content (format, images, etc.) will be lost.
ClipBoard = ; Clear clipboard
Send, ^c ; Grab selected text
Sleep, 100 ; Wait 0.1 seconds for clipboard (clipboard will not get filled if nothing is selected)
if (Clipboard = "") ; Nothing selected, thus copy whole line
{
    Send, {Home}+{End}^c ; Select line and copy to clipbard
}
MoveBack := StrLen(ClipBoard)
MoveFwd := MoveBack
MoveBack++ ; Move one step back further back due to earlier step {right}
Send, {Right}{Left}^v{Right}{left %Moveback%}+{Right %MoveFwd%} ; Go to end of selected text (in MS notepad this is will jump over the first next char., thus a jump back as well), add a space and paste.
ClipBoard = %TempCB% ; Restore (text part) of previous clipboard content.
Return 
```

我在 MS 记事本中对此进行了测试，其他编辑器的行为可能有所不同（尤其是在跳到所选文本的末尾时）。该脚本现在复制并粘贴选定的文本并突出显示新粘贴的文本。

# html - 带有多选的文件上传对话框

> ID：13553341
> 
> 赞同：0
> 
> 时间：2012-11-25T17:11:23.737
> 
> 标签：html, file-upload, dialog, internet-explorer-9

我正在开发一种文件上传解决方案，该解决方案为现有选项增加了灵活性。标准工作正常，但不允许选择多个文件。有很多解决方案可以解决这个问题，我知道这一点，但我正在研究 Facebook 已经实施的解决方案。IE9 及以下版本不支持“multiple=true”名称；Facebook 通过提供一个文件对话框（在 IE 上）来欺骗这一点，该对话框允许多选并将结果反馈给 Flash 上传处理程序。我的问题是：如何打开该文件对话框（允许多选）？一旦完成，我就可以从那里处理结果（将多个文件发送到我的上传处理程序不是问题，也不是区分 IE9 和其他浏览器/平台）。

# vim - Vim 拼写检查 Latex 的新命令定义

> ID：13553342
> 
> 赞同：1
> 
> 时间：2012-11-25T17:11:31.630
> 
> 标签：vim, spell-checking, vim-plugin

我的问题很简单，我也希望有解决方案：vim-spell plugin doesn't colorize the wrong words in `\newcommand`'s definition in LaTeX files：

```
 \newcommand{\mycommand}{Helllo World} 
```

`Helllo`不会是红色的。当我删除它周围的括号时，`Helllo world`它被标记为一个坏词。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T18:52:42.760

我试图解决与乳胶文件中的拼写有关的问题，并在 vim_use 组中获得了帮助。请阅读 [谷歌群组界面](https://groups.google.com/d/topic/vim_use/qPMuFerx86k/discussion)中的消息以获取完整的详细信息。

尝试将以下内容添加到您的 ~/.vim/after/ftplugin/tex.vim 文件中：

```
syn region texMyCmdSpell matchgroup=texStatement
      \ start='\\newcommand{.*{' end='}$'
      \ contains=@Spell
      \ containedin=texCmdBody 
```

这似乎对我有用。开始模式只是由一个新命令定义，结束模式`}`后跟一个换行符。

# java - Java中递归的八个皇后

> ID：13553344
> 
> 赞同：0
> 
> 时间：2012-11-25T17:12:31.543
> 
> 标签：java

这是我的八皇后的 Java 代码。我不知道为什么它会放置八次相同的结果。在此代码中，不包括对角线。

```
import java.util.*;

class eightTeight {
    Set<Integer> s = new HashSet<Integer>();

    public void print() {
        if (s.size() < 8) {
            for (int i = 0; i < 8; i++) {
                if (!s.contains(i)) {
                    s.add(i);
                    print();
                }
            }
        }
        System.out.println(s);
        return;
    }
} 
```

似乎一旦 return 运行， s 仍然保留数据。感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T18:43:25.657

它是由您的递归调用引起的

```
print(); 
```

你应该意识到JAVA***中没有全局变量***。每次调用“print()”时，只会使用空的“Set”，然后将 sth 添加到其中，然后将其打印出来。这里有八次递归，因此控制台有八次打印出同样的东西。这就是为什么你辜负了期望。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T17:15:53.170

“我不知道为什么它会连续八次获得相同的结果”。

因为您递归地调用该方法 8 次，并且每次都打印结果。

```
for(int i=0;i<8;i++){
            if(!s.contains(i)){
                s.add(i);
                print();
            }
        } 
```

将打印带到方法之外。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T17:17:15.520

在 Java 中，当您将对象传递给方法时，您复制了对该对象的引用。因此，对该对象的所有引用（包括您在调用方法中保留的引用）都可以看到对该对象所做的更改。

有两种解决方案：

1.  复制`HashSet`之前的修改，并对副本进行修改。如果找到解决方案，请返回新副本。如果它不起作用，请退回原件。

2.  使用依赖于索引的数据结构，因此您可以忽略所有不应设置的值。例如一个数组，如果你正在迭代第五个皇后，你可以忽略第五个、第六个、第七个和第八个皇后的值（如果它们已设置）。

我发现用 int 数组实现的皇后问题更清楚，但这留给每个人的口味。

# java - ByteBuffer Little Endian 插入不起作用

> ID：13553349
> 
> 赞同：25
> 
> 时间：2012-11-25T17:12:50.950
> 
> 标签：java, android, bytebuffer, endianness

我必须在遗留系统和安卓设备之间进行双向通信。遗留系统使用小端字节序。我已经成功实现了接收部分，但是发送不起作用。

奇怪，因为对我来说似乎 ByteBuffer 类出现故障（我简直不敢相信）

```
 ByteBuffer byteBuffer = ByteBuffer.allocate(4);
    byteBuffer.order(ByteOrder.LITTLE_ENDIAN);
    byteBuffer = ByteBuffer.allocate(4);
    byteBuffer.putInt(88);
    byte[] result = byteBuffer.array(); 
```

结果：[0, 0, 0, 88]

```
 ByteBuffer byteBuffer = ByteBuffer.allocate(4);
    byteBuffer.order(ByteOrder.BIG_ENDIAN);
    byteBuffer = ByteBuffer.allocate(4);
    byteBuffer.putInt(88);
    byte[] result = byteBuffer.array(); 
```

结果也相同： [0, 0, 0, 88]

但是，如果我没记错小端排序应该返回： [88, 0, 0, 0]

那么我错过了什么？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-25T17:28:06.633

出于某种奇怪的原因，您正在重新初始化字节缓冲区并丢弃以前更改字节序的副本。以下代码对我来说很好用：

```
ByteBuffer byteBuffer = ByteBuffer.allocate(4);
byteBuffer.order(ByteOrder.BIG_ENDIAN);
byteBuffer.putInt(88);
byte[] result = byteBuffer.array();
System.out.println(Arrays.toString(result)); 
```

打印 [0, 0, 0, 88]

```
ByteBuffer byteBuffer = ByteBuffer.allocate(4);
byteBuffer.order(ByteOrder.LITTLE_ENDIAN);
byteBuffer.putInt(88);
byte[] result = byteBuffer.array();
System.out.println(Arrays.toString(result)); 
```

打印 [88, 0, 0, 0]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-30T22:12:11.110

在相关说明中：

这段代码：

```
 int unicodePointsLen = textContent.length() * 2;
 ByteBuffer unicodePointsBuffer = ByteBuffer.allocateDirect(unicodePointsLen);
 short unicodePointValue;
 for (int i = 0; i < textContent.length(); i++) 
 {  
     unicodePointValue = (short)textContent.charAt(i);
     unicodePointsBuffer.put((byte)(unicodePointValue & 0x00FF)).put((byte)(unicodePointValue >> 8));
 } 
```

比这快大约 25%：

```
 int unicodePointsLen = textContent.length() * 2;
 ByteBuffer unicodePointsBuffer = ByteBuffer.allocateDirect(unicodePointsLen);
 unicodePointsBuffer.order(ByteOrder.LITTLE_ENDIAN);
 for (int i = 0; i < textContent.length(); i++) 
 {  
     unicodePointsBuffer.putShort((short)textContent.charAt(i));  
 } 
```

使用 JDK 1.8。

I am trying to pass unicode points from JAVA to C++ through JNI and the first method is the fastest I found. Curious that it is faster than the second snippet.

# android - 字符串变量最终为空，我不知道为什么

> ID：13553352
> 
> 赞同：0
> 
> 时间：2012-11-25T17:13:12.710
> 
> 标签：android

我一直在努力创建一个允许用户拍照并使用意图通过电子邮件发送此图像的活动。我创建了文件名并将其存储在一个字符串中，但它最终将它的值拿走了。当它被重置为 null 时，我最终创建了另一个字符串变量来保存它的值，这样我就可以确保没有任何东西可以更改它的值，但第二个字符串也最终为 null。我使用字符串的值并将其传递给意图，以便将刚刚拍摄的图像添加为附件。谁能看到这个变量为什么以及如何改变它的值？

这是我的课，有评论：

```
public class ImproveActivity extends Activity implements OnClickListener{
private static final String JPEG_FILE_PREFIX = "Improve_";
private static final String JPEG_FILE_SUFFIX = ".jpg";
private Bitmap mImageBitmap;
private ImageView mImageView;
private File storageDir;
private String mCurrentPhotoPath;
Button share, capture;
private String _path;
private File f;
//This variable holds file name
private String imageFileName;
//I am storing the file name variable here to keep its value
private String temp;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
       setContentView(R.layout.improve_layout);
       mImageView = (ImageView)findViewById(R.id.imgview);
       capture = (Button)findViewById(R.id.capture);
       share = (Button)findViewById(R.id.share);

       capture.setOnClickListener(this);
       share.setOnClickListener(this);

}

private void dispatchTakePictureIntent() {

    if(isIntentAvailable(getApplicationContext(), MediaStore.ACTION_IMAGE_CAPTURE)){

        Intent takePictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
        ;
        try {
            //f is the image
            f = createImageFile();

            takePictureIntent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(f));
            startActivityForResult(takePictureIntent, 1);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            Toast.makeText(getApplicationContext(), "error creating image", Toast.LENGTH_LONG).show();
        }

    }
    else{
        Toast.makeText(getApplicationContext(), "no camera available", Toast.LENGTH_LONG).show();
    }

}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent intent){
    Toast.makeText(getApplicationContext(), "returning", Toast.LENGTH_LONG).show();

    if (requestCode == 1) {

        mImageBitmap = BitmapFactory.decodeFile(mCurrentPhotoPath);
        if (mImageBitmap == null) {
            // bitmap still null
        } else {
            // set bitmap in imageview
            mImageView.setImageBitmap(mImageBitmap);
        }
    }

}

private File createImageFile() throws IOException {
    // Create an image file name
    String timeStamp = 
        new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());
   imageFileName = JPEG_FILE_PREFIX + timeStamp + "_";
   //display the current image file name
    Toast.makeText(getApplicationContext(), imageFileName, Toast.LENGTH_LONG).show();

    File file = new File(getAlbumDir().getAbsolutePath());
    file.mkdirs();              
    Toast.makeText(getApplicationContext(), imageFileName, Toast.LENGTH_LONG).show();
    File image = File.createTempFile(
        imageFileName, 
        JPEG_FILE_SUFFIX  
    );

    mCurrentPhotoPath = image.getAbsolutePath();
    temp = imageFileName;
    return image;

}

private File getAlbumDir() {
    return storageDir = new File(
            Environment.getExternalStoragePublicDirectory(
                Environment.DIRECTORY_DCIM
            ), 
            "Camera"
        );
}

public static boolean isIntentAvailable(Context context, String action) {
    final PackageManager packageManager = context.getPackageManager();
    final Intent intent = new Intent(action);
    List<ResolveInfo> list =
            packageManager.queryIntentActivities(intent, PackageManager.MATCH_DEFAULT_ONLY);
    return list.size() > 0;
}

@Override
public void onClick(View v) {
    switch(v.getId()){
    case R.id.capture :
        dispatchTakePictureIntent();
        //displaying the value of the string imageFileName, it is what it should be, the file name
        Toast.makeText(getApplicationContext(), imageFileName, Toast.LENGTH_LONG).show();

        //displaying the file name in temp at this point it is still the file name I need
        Toast.makeText(getApplicationContext(), "temp is " +temp, Toast.LENGTH_LONG).show();
        break;
        //Once the image is saved, clicking share to open chooser
    case R.id.share:

        //displaying the temp string the file name is gone it is now null ????
        Toast.makeText(getApplicationContext(), "temp is " +temp, Toast.LENGTH_LONG).show();

        Intent picMessageIntent = new Intent(android.content.Intent.ACTION_SEND);  
        picMessageIntent.setType("image/jpg");  
        File downloadedPic =  new File(  
            Environment.getExternalStoragePublicDirectory(  
            Environment.DIRECTORY_DCIM),  
            "Camera/"+ temp+"jpg");  //I want to use the file name string to send the image via email
        picMessageIntent.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(downloadedPic));  
        startActivity(Intent.createChooser(picMessageIntent, "Send your picture using:"));  
        break;
    }
} 
```

如果有人能阐明这是如何发生的，我将不胜感激。

这是 logcat，我打开活动，拍照，保存，然后返回活动视图，我按下分享，吐司显示 temp 的值，同时选择器打开。

```
11-25 17:56:34.573: D/dalvikvm(12037): GC_EXTERNAL_ALLOC freed 1176 objects / 87312 bytes in 53ms
11-25 17:56:39.313: W/IInputConnectionWrapper(12037): showStatusIcon on inactive InputConnection
11-25 17:56:49.803: W/System.err(12037): java.lang.NullPointerException: Argument must not be null
11-25 17:56:49.808: W/System.err(12037):    at java.io.FileInputStream.<init>(FileInputStream.java:78)
11-25 17:56:49.808: W/System.err(12037):    at java.io.FileInputStream.<init>(FileInputStream.java:134)
11-25 17:56:49.808: W/System.err(12037):    at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:349)
11-25 17:56:49.808: W/System.err(12037):    at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:399)
11-25 17:56:49.808: W/System.err(12037):    at com.seweb.app.ImproveActivity.onActivityResult(ImproveActivity.java:94)
11-25 17:56:49.808: W/System.err(12037):    at android.app.Activity.dispatchActivityResult(Activity.java:3890)
11-25 17:56:49.808: W/System.err(12037):    at android.app.ActivityThread.deliverResults(ActivityThread.java:3511)
11-25 17:56:49.808: W/System.err(12037):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:3115)
11-25 17:56:49.808: W/System.err(12037):    at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:3143)
11-25 17:56:49.813: W/System.err(12037):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2684)
11-25 17:56:49.813: W/System.err(12037):    at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3815)
11-25 17:56:49.813: W/System.err(12037):    at android.app.ActivityThread.access$2400(ActivityThread.java:125)
11-25 17:56:49.813: W/System.err(12037):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2037)
11-25 17:56:49.818: W/System.err(12037):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-25 17:56:49.818: W/System.err(12037):    at android.os.Looper.loop(Looper.java:123)
11-25 17:56:49.818: W/System.err(12037):    at android.app.ActivityThread.main(ActivityThread.java:4627)
11-25 17:56:49.818: W/System.err(12037):    at java.lang.reflect.Method.invokeNative(Native Method)
11-25 17:56:49.818: W/System.err(12037):    at java.lang.reflect.Method.invoke(Method.java:521)
11-25 17:56:49.823: W/System.err(12037):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
11-25 17:56:49.823: W/System.err(12037):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
11-25 17:56:49.823: W/System.err(12037):    at dalvik.system.NativeStart.main(Native Method)
11-25 17:56:50.273: D/dalvikvm(12037): GC_EXTERNAL_ALLOC freed 1920 objects / 108152 bytes in 136ms 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T17:28:04.570

您应该将字符串[永久保存](http://developer.android.com/guide/topics/data/data-storage.html)在[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)、数据库或通用文件中。

当您离开 Activity 以使用内置相机应用拍照时，您的应用会进入后台。如果需要额外的内存，后台的任何应用程序都有被操作系统杀死的风险。如果发生这种情况，您的所有变量都将重置为其默认的空值...

* * *

 **从您的 LogCat 中**添加：****

 **```
java.lang.NullPointerException: Argument must not be null
    ...
    at com.seweb.app.ImproveActivity.onActivityResult(ImproveActivity.java:94) 
```

我猜第 94 行是：

```
mImageBitmap = BitmapFactory.decodeFile(mCurrentPhotoPath); 
```

如果应用程序在幕后被销毁并重新启动，这是有道理的。当应用程序像这样完全重新启动时，*只* `onCreate()`调用，而不是`createImageFile()`任何其他方法。

也保存`mCurrentPhotoPath`在 SharedPreferences 中，并在为 null时`imageFileName`恢复这些值。`onActivityResult()``mCurrentPhotoPath`

* * *

**使用 SharedPreferences**
将这些方法添加到您的 Activity 中：

```
private void savePreferences(){
    // We need an Editor object to make preference changes.
    SharedPreferences.Editor editor = getPreferences(MODE_PRIVATE).edit();
    editor.putString("imageFileName", imageFileName);
    editor.putString("mCurrentPhotoPath", mCurrentPhotoPath);

    // Commit the edits!
    editor.commit();
}

private void restorePreferences() {
    SharedPreferences settings = getPreferences(MODE_PRIVATE);
    imageFileName = settings.getString("imageFileName", "");
    mCurrentPhotoPath = settings.getString("mCurrentPhotoPath", "");
} 
```

我忽略`temp`了，正如您所说，这只是`imageFileName`您调试时的重复。
现在我们需要在适当的时候调用这些方法。首先让我们在离开 Activity 拍照之前保存两个字符串：

```
try {
    savePreferences();
    ...
    startActivityForResult(takePictureIntent, 1);
} 
```

然后检查是否需要重新加载这些值`onActivityResult()`：

```
if (requestCode == 1) {
    if(mCurrentPhotoPath == null)
        restorePreferences();

    mImageBitmap = BitmapFactory.decodeFile(mCurrentPhotoPath);
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T17:22:30.337

尝试初始化您的变量：

```
String temp = ""; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T17:29:17.697

是的，初始化您的变量防止获得 NullPointerException，但问题是，为什么此时它为空。你确定，如果你得到一个空字符串，就会拍一张照片吗？请显示堆栈跟踪，您的 CreateImageFile-Method 可能有问题，此方法是否会引发异常？如果是，则无法初始化此字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-24T18:59:57.107

我建议不要将其保存在 shareprefrences 中，而是将其保存在 savedInstanceState 中。

您可以致电存储：

```
@Override
public void onSaveInstanceState(Bundle savedInstanceState) {
    savedInstanceState.putAll(getIntent().getExtras());
    savedInstanceState.putString("currentPhotoPath", mCurrentPhotoPath);
    super.onSaveInstanceState(savedInstanceState);
} 
```

并在 onCreate 调用中恢复：

```
 if (savedInstanceState != null) {
mCurrentPhotoPath = savedInstanceState.getString("currentPhotoPath", mCurrentPhotoPath);
    } 
```

所以这就是发生的事情：

1.  mCurrentPhotoPath 是事先创建的文件的路径
2.  用户转到相机并在 Activity 被销毁之前保存 mCurrentPhotoPath。
3.  用户返回 Activity 并在 onActivityResult 之前调用 onCreate。4.在onCreate里面，Activity恢复mCurrentPhotoPath
4.  onActivityResult 被调用

您还可以查看这些页面以获得更好的解释：

[https://developer.android.com/training/basics/activity-lifecycle/recreating.html](https://developer.android.com/training/basics/activity-lifecycle/recreating.html)

[https://developer.android.com/training/camera/photobasics.html](https://developer.android.com/training/camera/photobasics.html)**

# python - python：使用 ctypes 处理 c malloc 变量

> ID：13553353
> 
> 赞同：0
> 
> 时间：2012-11-25T17:13:14.010
> 
> 标签：python, malloc, ctypes

我正在玩一些 python ctypes，可能有人可以告诉我一些优雅的方法来处理用`malloc`.

所以，这是一个非常愚蠢的 c 代码，可以解释我在寻找什么。

```
#include <stdio.h>
#include <stdlib.h>

char * stringa;
int numero = 0;
int * numero_2;

void crea_variabili_dyn() {

    if ( numero_2 == NULL) {
        numero_2 = malloc(1 * sizeof(int));
        *numero_2 = 2;        
        }

    }

void incrementa() {

    numero += 1;
    *numero_2 += 11;
    }

void ciao() {

    crea_variabili_dyn();
    stringa = "cane.huu";
    incrementa();
    printf("%d\n", numero);
    printf("%d\n", *numero_2);    
    printf("%s\n", stringa);
    incrementa();
    printf("%d\n", numero);
    printf("%d\n", *numero_2);    
    printf("%s\n", stringa);
}

void main (void) {

    //printf("%d\n", numero);
    ciao();
    //printf("%d\n", numero);

} 
```

我编译它： gcc -shared -o playing_ctypes.so playing_ctypes.c

然后我用python玩它：

```
import ctypes

testlib = ctypes.CDLL('/home/gnommaro/Dev/C/playing_ctypes.so')

c_numero = ctypes.c_int.in_dll(testlib, "numero")
c_numero_2 = ctypes.c_int.in_dll(testlib, "numero_2")

c_numero
c_numero_2

testlib.ciao()

c_numero
c_numero_2 
```

众所周知`c_numero`，它是一个整数，当从 python 终端调用时，它返回`c_long(54)`

同时`c_numero_2`是一个动态分配的缓冲区，当它被调用时，它返回`c_void_p(147438576)`或`c_long(147438576)`

它取决于声明的 ctypes 导出类型。

当我调用`testlib.ciao()`一切正常时，但如果我想增加、减少或只是任意更改这些 ctypes 整数之一的值，我可以用这种方式覆盖它：

```
c_numero.value = 89 
```

正如我们看到的整数，它工作得很好。但是对于 malloched 变量`c_number_2`，该属性`.value`返回缓冲区的地址（？），如果我想更改其中的值（整数）怎么办？

或者，在其他世界中，如何使用 ctypes 导出指针并以优雅的方式使用其内容值。

可能我会使用`memcpy`或编写一种 python.ctypes 处理程序，但是，首先编写一些难看的硬编码，我必须寻求你的帮助。

有吗？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T20:35:26.000

您可以像在 C 中一样索引 ctypes 指针，但不要像在 C 中那样写入缓冲区的末尾。

```
from ctypes import *

dll = CDLL('msvcrt')
dll.malloc.restype = c_void_p
n = dll.malloc(5 * sizeof(c_int))
n = cast(n,POINTER(c_int))
for i in range(5):
    print('uninitialized value',n[i])
    n[i] = i
    print('new value',n[i]) 
```

输出：

```
uninitialized value 6815752
new value 0
uninitialized value 0
new value 1
uninitialized value 6128720
new value 2
uninitialized value 0
new value 3
uninitialized value 0
new value 4 
```

请注意，您可以对 malloc 的重新类型撒谎以跳过演员表：

```
dll.malloc.restype = POINTER(c_int) 
```

可以像这样访问您的全局变量：

```
c_numero_2 = POINTER(c_int).in_dll(testlib, "numero_2")
c_numero_2[0] = 1
c_numero_2[1] = 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T18:18:07.873

好的，看来我可以在三行代码中做到这一点

```
c_long_p = ctypes.POINTER(ctypes.c_long)
c_numero_2_ptr = ctypes.cast(c_numero_2.value, c_long_p)
c_numero_2_ptr.content 
```

就是这样:) 干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T19:04:26.007

这绝对是最优雅的方式：

```
c_numero_2_content  = (ctypes.c_long).from_address(c_numero_2.value) 
```

# iphone - 尝试使用 Reskit 库，但我仍然有一些错误

> ID：13553365
> 
> 赞同：1
> 
> 时间：2012-11-25T17:14:01.250
> 
> 标签：iphone, ios

我编写这段代码是为了从foursquare API获取有关最近餐厅的信息，但是根据我的模型获取ID和场地名称时遇到问题..我不知道到底是什么错误，但我在控制台中有错误消息说：

W restkit.object_mapping:RKObjectMappingOperation.m:244 keyPath 'id' 处的值转换失败。没有从 '__NSArrayI' 转换为 'NSString' 的策略

我希望找到任何东西来帮助我解决问题？

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    /* need to change base on our API */
    RKURL *baseUrl = [RKURL URLWithBaseURLString:@"https://api.Foursquare.com/v2"];

    RKObjectManager *objectManager = [RKObjectManager objectManagerWithBaseURL:baseUrl];
    objectManager.client.baseURL = baseUrl;

    /* solve the problem tomorrow inshaallah */
    RKObjectMapping *resturantMapping = [RKObjectMapping mappingForClass:[Resturant class]];
    [resturantMapping mapKeyPathsToAttributes:@"id",@"ID",@"name",@"name", nil];
    resturantMapping.rootKeyPath = @"venue"; 
    [objectManager.mappingProvider setMapping:resturantMapping forKeyPath:@"response.groups.items.veue"];

    RKObjectMapping *locationMapping = [RKObjectMapping mappingForClass:[Location class]];
    [locationMapping mapKeyPathsToAttributes:@"address", @"address", @"city", @"city", @"country", @"country", @"crossStreet", @"crossStreet", @"postalCode", @"postalCode", @"state", @"state", @"distance", @"distance", @"lat", @"lat", @"lng", @"lng", nil];

    [resturantMapping mapRelationship:@"location" withMapping:locationMapping];
    [objectManager.mappingProvider setMapping:locationMapping forKeyPath:@"location"];

 [self sendRequest]; 
}

-(void)sendRequest {

    NSString *latLon = [NSString stringWithFormat:@"%g,%g",self.userCurrentLocation.coordinate.latitude,self.userCurrentLocation.coordinate.longitude];
    NSString *clientID = CLIENT_ID;
    NSString *clientSecret = CLIENT_SECRET;

    NSDictionary *queryParams;
    queryParams = [NSDictionary dictionaryWithObjectsAndKeys:latLon, @"ll", clientID, @"client_id", clientSecret, @"client_secret", @"food", @"section", @"50", @"limit", nil];
    RKObjectManager *objectManager = [RKObjectManager sharedManager];

    RKURL *URL = [RKURL URLWithBaseURL:[objectManager baseURL] resourcePath:@"/venues/explore" queryParameters:queryParams];
    [objectManager loadObjectsAtResourcePath:[NSString stringWithFormat:@"%@?%@", [URL resourcePath], [URL query]] delegate:self];

} 
```

# java - 如果我在写入连接之前获得 InputStream，则会出现错误 500

> ID：13553369
> 
> 赞同：1
> 
> 时间：2012-11-25T17:14:39.270
> 
> 标签：java, http, httprequest, httpurlconnection

下面的代码

```
OutputStream outputWeb = conn.getOutputStream();

File file = new File("myfile");
InputStream inputFile = new FileInputStream(file);

InputStream inputWeb = conn.getInputStream();           

while((ch=inputFile.read()) >= 0) {
    outputWeb.write(ch);
} 
```

导致`IOException`消息“服务器返回 HTTP 响应代码：500 for URL：myurl”就在从连接中获取 InputStream 的行。

虽然下面的代码不会导致任何异常并且工作正常

```
OutputStream outputWeb = conn.getOutputStream();

File file = new File("myfile");
InputStream inputFile = new FileInputStream(file);

while((ch=inputFile.read()) >= 0) {
    outputWeb.write(ch);
}

InputStream inputWeb = conn.getInputStream(); 
```

唯一的区别是在一些写入连接之后获取输入流。

如何从 API 合约中推断出这一点？发生了什么，为什么？

**连接配置**

```
URL url = new URL("https://myurl");
HttpURLConnection conn;

// creating http connection 
conn = (HttpURLConnection) url.openConnection();
conn.setRequestMethod("POST");
conn.setDoOutput(true);
conn.setDoInput(true);
conn.setRequestProperty("Content-type", "audio...."); 
```

**更新**

现在原则上很清楚，但我仍然希望在 API 合同中看到这一点。即它应该写在某个地方，直到写一些东西我才能生成输入流。在任何情况下，实现都可以允许这样做，只是迫使该流的读者等待。

# php - 填写 php 表单 --> 上传文件 ---> 发送带有附件的邮件

> ID：13553370
> 
> 赞同：-1
> 
> 时间：2012-11-25T17:14:43.793
> 
> 标签：php, file-upload, email-attachments

我知道这个问题被问了好几次，但我没有找到有效的答案。

正如标题所说，我有一个输入文件类型的 php 表单，在提交时，所有数据都将通过电子邮件发送，包括作为附件的文件，为什么我找不到任何工作脚本。

请帮忙。

更新我的答案

```
$fileatt  = $_FILES['uploadfile']['tmp_name'];
$fileatt_type = $_FILES['uploadfile']['type'];
$fileatt_name = $_FILES['uploadfile']['name'];

$subject = "Some Subject goes here";
$uploadedfile = $_FILES['uploadfile']['name'];
$headers = "From: " . strip_tags($_POST['email']) . "\r\n";
$headers .= "Reply-To: ". strip_tags($_POST['email']) . "\r\n";
$headers .= "MIME-Version: 1.0\r\n";
$headers .= "Content-Type: text/html; charset=utf-8\r\n";
$headers .= "Content-Type: application/octet-stream; name=\"".$fileatt_name."\"\r\n";
$headers .=  "Content-Transfer-Encoding: base64\r\n";

    // create a boundary string. It must be unique
      $semi_rand = md5(time());
      $mime_boundary = "==Multipart_Boundary_x{$semi_rand}x";

      // Add the headers for a file attachment
      $headers .= "\nMIME-Version: 1.0\n" .
                  "Content-Type: multipart/mixed;\n" .
                  " boundary=\"{$mime_boundary}\"";

     if (is_uploaded_file($fileatt)) {
      // Read the file to be attached ('rb' = read binary)
      $file = fopen($fileatt,'rb');
      $data = fread($file,filesize($fileatt));
      fclose($file);

      // Base64 encode the file data
      $data = chunk_split(base64_encode($data));  
     }
//begin of HTML message 
$message ="This is a multi-part message in MIME format.\n\n";
$semi_rand = md5(time());
$mime_boundary = "==Multipart_Boundary_x{$semi_rand}x";
$message .= "--{$mime_boundary}\n" .
                  "Content-Type: {$fileatt_type};\n" .
                  " name=\"{$fileatt_name}\"\n" .
                  //"Content-Disposition: attachment;\n" .
                  //" filename=\"{$fileatt_name}\"\n" .
                  "Content-Transfer-Encoding: base64\n\n" .
                  $data . "\n\n" .
                  "--{$mime_boundary}--\n"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T17:19:57.297

你没有找到它，因为你没有很好地搜索。
在这里，学习本教程：

-填写表格并使用此上传文件： [http](http://www.9lessons.info/2012/04/file-upload-progress-bar-with-jquery.html)
: //www.9lessons.info/2012/04/file-upload-progress-bar-with-jquery.html -使用[phpmailer](http://phpmailer.worxware.com/index.php?pg=tutorial)添加附件使用此：[phpMailer 附件](https://stackoverflow.com/questions/6322610/phpmailer-attachment)

# javafx-2 - 我在哪里可以下载 JavaFX 2.2 源代码？

> ID：13553375
> 
> 赞同：21
> 
> 时间：2012-11-25T17:15:32.983
> 
> 标签：javafx-2, netbeans-7

我需要链接`Netbeans 7.2.1`到`source of JavaFX 2.2.3`，我已经查看了 Oracle 网站……但我没有找到它！欢迎任何帮助

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-25T18:01:58.957

JavaFX 2.2 只是部分开源。
您可以从以下 zip 链接下载打开的部分：

[http://hg.openjdk.java.net/openjfx/2.2/master/rt](http://hg.openjdk.java.net/openjfx/2.2/master/rt)

**JavaFX 8**

JavaFX 8 今天是完全开源的。

用于构建 JavaFX 8（和[SceneBuilder](http://www.oracle.com/technetwork/java/javafx/tools/index.html)设计工具）的源代码位于：

[http://hg.openjdk.java.net/openjfx/8/master/rt](http://hg.openjdk.java.net/openjfx/8/master/rt)

更高版本（包括 Java 8 更新）的源代码位于源代码林中，其概述位于：

[http://hg.openjdk.java.net/openjfx](http://hg.openjdk.java.net/openjfx)

*   [使用 OpenJDK 8 构建 JavaFX 8 的说明](https://wiki.openjdk.java.net/display/OpenJFX/Building+OpenJFX)

如果您不需要构建 JavaFX 8 并且只需要 zip 中的运行时源代码，那么它们位于[JDK 8 下载](https://jdk8.java.net/download.html)`javafx-src.zip`的文件中。

在 OS X 上，该`javafx-src.zip`文件位于：

/Library/Java/JavaVirtualMachines/jdk1.8.0.jdk/Contents/Home/javafx-src.zip

**IDE 设置**

配置 Idea 以了解源代码的说明如下：

[JavaFX 源代码未显示](https://stackoverflow.com/questions/13407017/javafx-source-code-not-showing-in-intellij-idea)

对于 NetBeans，您可以尝试：

[如何在 Netbeans 7 中附加缺少的 Java JDK 源](https://stackoverflow.com/questions/11071265/how-to-attach-missing-java-jdk-sources-in-netbeans-7)

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2013-04-22T09:58:23.360

相信我，如果您已经安装了最新版本的 jdk 并在 netbeans 中设置了 jdk 版本，那么它不会询问。

在我的情况下，我在文件夹 C:\Program Files\Java\jdk1.7.0_07\jre\lib 中找到了 jar 文件，只需在项目中添加所有 jar 文件即可。

# mongodb - 如何处理mongodb中的复杂查询？

> ID：13553385
> 
> 赞同：0
> 
> 时间：2012-11-25T17:17:09.050
> 
> 标签：mongodb, sorting, pymongo

我使用mongodb保存时空数据，文档项结构如下：

```
doc = { time:t,
        geo:[x,y]
      } 
```

如果两个文档的不同定义为：

```
dist(doc1, doc2) = |t1-t2| + |x1-x2| + |y1 - y2| 
```

如何通过 mongodb 查询文档并按与给定文档 doc0 ={ time:t0, geo:[x0,y0] } 的距离对结果进行排序？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T20:50:51.233

您可以信任 mongodb 来完成该任务，而不是手动计算距离。Mongodb[内置了地理空间查询支持](http://www.mongodb.org/display/DOCS/Geospatial+Indexing#GeospatialIndexing-Querying)。

这看起来像这样：

```
db.docs.find( { 
  "time": "t0", 
  "geo" : { $near : [x0,y0] } 
} ).limit(20) 
```

结果将是给定位置附近的所有文档`[x0,y0]`，按到该点的距离自动排序。

# php - MySQL SUM 每个不同的 Client_ID

> ID：13553392
> 
> 赞同：0
> 
> 时间：2012-11-25T17:17:30.040
> 
> 标签：php, mysql

目标是创建前十名回头客名单。我有一个“项目”表，其中每个项目都有一个 Client_ID。

我需要的是让 SQL 查询返回在项目表中出现最多的 Client_ID 的前十个结果。

我试过这个：

```
select COUNT(DISTINCT Client_ID) AS 'Top Clients' FROM projects; 
```

但说实话，我只是不确定我怎么能做到这一点。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T17:35:08.623

使用这个问题[MySQL：计算不同值的出现次数](https://stackoverflow.com/questions/1346345/mysql-count-occurrences-of-distinct-values)

```
SELECT Client_ID, COUNT(*) as TopClient FROM projects GROUP BY Client_ID ORDER BY TopClient DESC LIMIT 10; 
```

这行得通吗？

# c# - 桌面 C# 应用程序中未发生文本框突出显示

> ID：13553395
> 
> 赞同：0
> 
> 时间：2012-11-25T17:17:38.033
> 
> 标签：c#, .net, winforms

在桌面 C# 窗体或窗口中，我有一个搜索框，即 TextBox，当用户尝试使用 Ctrl + A 突出显示文本时，系统释放声音。有什么东西可以让文本框控件接受 Ctrl + A？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T17:23:54.190

试试这个：

```
 private void textBox1_keyDown(object sender, KeyEventArgs e)
        {
            if (e.Control & e.KeyCode == Keys.A)
                textBox1.SelectAll();
        } 
```

# objective-c - 将 UIButton 对象名称转换为字符串格式

> ID：13553396
> 
> 赞同：-2
> 
> 时间：2012-11-25T17:17:45.663
> 
> 标签：objective-c, uibutton

我的程序中有很多自定义按钮，我需要使用方法来获取它们的名称。我已经想出了如何通过他们的标签来获取他们的名字，但只是一个指向它的指针。我需要的是字符串中的名称。

这是我正在使用的：

```
-(void)pickRandomToHide {
    for (int check = 1; check <=5; check++)
    {
        int eventNumber = 1 + arc4random() % 43;
        UIButton *pick;
        pick = (UIButton *)[_mapImageView viewWithTag:eventNumber];
        [pick setAlpha: 0.5];
        NSString *buttonName;
        buttonName = [pick currentTitle];
        NSLog(@"%@",buttonName);
    }
} 
```

NSLog 只给出了 'Null' 五次。但是 5 个按钮正在消失，所以开始工作了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T17:21:13.080

你是什​​么意思按钮的“名称”？你是说上面的文字吗？您可以使用 UIButton 的`textLabel`属性，该属性将返回一个 UILabel。然后，您可以读取该标签的`text`属性以获取按钮的标题。简而言之：

```
NSString *buttonName = pick.titleLabel.text; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T18:17:17.877

如果我理解正确，您希望能够检索分配给对象的变量名称。
这是不可能的，因为在编译期间变量名会被其他符号替换。

但它也不是必需的，因为您始终可以跟踪指针。如果您的代码取决于变量名，那么您做错了什么。

# java - 仅在 Rserve 上采购 r 文件一次

> ID：13553397
> 
> 赞同：5
> 
> 时间：2012-11-25T17:17:47.170
> 
> 标签：java, r, rserve

我编写了一个小型 Java 客户端，它在[Rserver](http://www.rforge.net/Rserve/)上进行一些计算。为此，服务器端有`functions.r`- 和`libraries.r`文件，必须先获取这些文件，然后才能进行实际计算。

目前我在每个新连接上加载文件：

```
import org.rosuda.REngine.Rserve.RConnection;

public class RserveTester {

  public void doOnRserve() {
    RConnection c = new RConnection( "rserve.domain.local" );
    c.login( "foo", "user" );
    c.eval("source(\"/home/rserve/lib/libraries.r\")");
    c.eval("source(\"/home/rserve/lib/functions.r\")");
    c.eval( "someCalculation()" )
    c.close();
  }  
} 
```

由于客户端的某些事件在一分钟内`doOnRserve()`调用了几次。

我的问题是：是否有可能只采购一次库，以便在所有新的 RSession 期间都可以使用它们而无需单独采购？

我在客户端尝试了类似的东西：

```
c.serverSource("/home/rserve/lib/libraries.r" )
c.serverSource("/home/rserve/lib/functions.r" ) 
```

这给了我以下异常（不知道为什么这不起作用`eval`）：

```
 org.rosuda.REngine.Rserve.RserveException: serverSource failed, request status: access denied (local to the server) 
```

我可以用特定的启动 Rserve`.Rprofile`吗？

**编辑：**

基本上，有三种可能的方法：

1.  让 /home/rserve/.Rprofile 获取 .r 文件。但是每次我打电话时，这个接缝都可以找到它们`new RConnection()`
2.  启动 Rserve 时将源命令直接传递给 R（不知道如何执行此操作）。
3.  我的首选方法：使用 serverSource() 从客户端执行此操作，这会引发这些“拒绝访问”异常。

**编辑2：**

保留版本 v0.6-8 (338)

适用于 x86_64-pc-linux-gnu 的 R 版本 2.15.2。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T21:22:31.383

这可以通过`source`在配置文件中添加行来轻松完成，即

```
source "/foo/bar.R" 
```

在启动时`/etc/Rserv.conf`将来源`/foo/bar.R`。如果要使用另一个配置文件，请使用`--RS-conf`命令行参数来指定它。最后，Rserve 1.x 也支持`--RS-source`命令行选项。

如果文件路径中没有引号，则可能会出现 File Not Found Error。

顺便说一句：您提到`serverSource()`拒绝访问 - 这意味着您没有在 Rserve 中启用控制命令（`control enable`在配置或`--RS-enable-control`命令行中）。

PS：Rserve 问题请使用 stats-rosuda-devel 邮件列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T18:08:05.593

是的你可以。永远记住这一点：

```
R> fortunes::fortune("Yoda")

Evelyn Hall: I would like to know how (if) I can extract some of the information 
             from the summary of my nlme.
Simon Blomberg: This is R. There is no if. Only how.
   -- Evelyn Hall and Simon 'Yoda' Blomberg
      R-help (April 2005)

R> 
```

或者作为`Rserve`州的文档：

> \description{ 以守护程序模式启动 Rserve（仅限 unix）。
> 
> 任何与 Rserve 无关的附加参数将直接传递给底层 R。有关配置、使用和命令行参数，请参阅 [http://www.rforge.net/Rserve](http://www.rforge.net/Rserve)上的在线文档。使用 \code{R CMD Rserve --help} 获得简要帮助。

# algorithm - 图旅行算法

> ID：13553399
> 
> 赞同：11
> 
> 时间：2012-11-25T17:17:56.230
> 
> 标签：algorithm, graph-algorithm

我有一个有趣的图论问题。我得到一棵树 T，它有 n 个节点和一组边。当然，T 是无向的。每条边都有权重，表示它必须被访问多少次（至少）。我们正在使用边从一个节点到另一个节点，任务是找到满足上述条件所需的最少步骤。我可以从任何节点开始。

例如，这棵树（括号中的边权重）：

1 - 2 (1)

2 - 3 (1)

3 - 4 (2)

4 - 5 (1)

4 - 6 (1)

我们需要 8 步才能走这棵树。例如：1->2->3->4->3->4->5->4->6

我不知道如何处理这个算法。是否有可能找到这个最佳游览，或者我们不能直接找到这个最小数量？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T18:57:48.613

根据每条边的权重向图形添加额外的边。（即如果 a->b 的权重为 3，那么您的图形应该包括 a 和 b 之间的 3 个无向边连接）。

那么你试图找到的就是这张图上的欧拉轨迹。

欧拉轨迹可以是封闭的（如果 start==end）或开放的（如果 start!=end）。

如果所有节点的度数相等，则存在闭合路径。

如果除 2 之外的所有节点都具有偶数度，则存在开放路径。

可以使用 Fleury 算法找到路径（如果速度太慢，也存在更快的线性算法）。

如果您的图不满足欧拉轨迹的要求，则只需添加最少数量的额外边，直到满足。

这样做的一种方法是在树上执行深度优先搜索，并跟踪可以添加到每个子树的最小边数，以便它具有 0、1 或 2 个奇数度的顶点。这应该花费与树中节点数成线性关系的时间。

## 示例代码

此 Python 代码计算图的最短步数。（要构建图，您应该将其视为有根图，并为远离根的每条边添加边）

```
from collections import defaultdict
D=defaultdict(list)
D[1].append((2,1))
D[2].append((3,1))
D[3].append((4,2))
D[4].append((5,1))
D[4].append((6,1))
BIGNUM=100000

class Memoize:
    def __init__(self, fn):
        self.fn = fn
        self.memo = {}
    def __call__(self, *args):
        if not self.memo.has_key(args):
            self.memo[args] = self.fn(*args)
        return self.memo[args]

@Memoize
def min_odd(node,num_odd,odd,k):
    """Return minimum cost for num_odd (<=2) odd vertices in subtree centred at node, and using only children >=k

    odd is 1 if we have an odd number of edges into this node from already considered edges."""
    edges=D[node]
    if k==len(edges):
        # No more children to consider, and no choices to make
        if odd:
            return 0 if num_odd==1 else BIGNUM
        return 0 if num_odd==0 else BIGNUM

    # We decide whether to add another edge, and how many of the odd vertices to have coming from the subtree
    dest,w0 = edges[k]
    best = BIGNUM
    for extra in [0,1]:
        w = w0+extra
        for sub_odd in range(num_odd+1):
            best = min(best, w + min_odd(dest,sub_odd,w&1,0) + min_odd(node,num_odd-sub_odd,(odd+w)&1,k+1) )

    return best

root = 1
print min( min_odd(root,2,0,0),min_odd(root,0,0,0) ) 
```

# php - 性能方面的插值（直接插入字符串）VS串联

> ID：13553402
> 
> 赞同：3
> 
> 时间：2012-11-25T17:18:02.823
> 
> 标签：php, string, performance, string-concatenation

结合 2 个字符串时，以下哪种方法更快？为什么它可以跑得更快？

PHP代码：

```
$str1 = 'Hello';
$str2 = 'World'; 
```

方法一：

```
$txt = $str1.$str2; 
```

方法二：

```
$txt = "$str1$str2"; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T17:26:11.117

**操作码比较**

代码：

```
$a=1; 
$b=2; 
echo "$a$b"; 
```

操作码：

```
 1     0  >   ASSIGN                                                   !0, 1
         1      ASSIGN                                                   !1, 2
         2      ADD_VAR                                          ~2      !0
         3      ADD_VAR                                          ~2      ~2, !1
         4      ECHO                                                     ~2
         5    > RETURN                                                   null 
```

代码：

```
$a=1; 
$b=2; 
echo $a.$b; 
```

操作码：

```
 1     0  >   ASSIGN                                                   !0, 1
         1      ASSIGN                                                   !1, 2
         2      CONCAT                                           ~2      !0, !1
         3      ECHO                                                     ~2
         4    > RETURN                                                   null 
```

**中间结论**

连接少了一个操作码，高兴！并非如此，我们仍然需要测试实际的运行时性能。

要查看任何一段代码生成的操作码，请查看出色的[`vld`扩展](http://pecl.php.net/vld)

**运行时性能**

在工作站上运行超过 0.5m 次迭代（平均超过 10 次运行）：

*   内联：0.9793s
*   级联：0.9252s

**结论**

串联速度更快，尽管它不太可能影响任何特定应用程序的性能。

# php - 升级到 PHP 5.3.19 后子 pid 退出信号 Segmentation fault (11)

> ID：13553403
> 
> 赞同：2
> 
> 时间：2012-11-25T17:18:07.147
> 
> 标签：php, yum

我昨晚将我的 centos 机器上的 PHP 升级到 5.3.19，现在我的应用程序的某些部分（尤其是在提交运行多个较大查询的表单时）我在 /var/log/httpd/error_log 中收到以下错误

```
child pid xxxx exit signal Segmentation fault (11) 
```

在 Chrome 中，它显示以下内容 ![在此处输入图像描述](../Images/003af87682dace990aaa20e492f1be8e.png)

有谁知道如何解决这个问题，或者甚至知道如何使用 YUM 恢复到以前版本的 PHP。

更新：这里描述了问题，但我不确定解决方案。我们加载一个相当大的 SQL 文件并逐步运行其中的每个查询，如果我没记错的话，这就是“递归”部分：http: [//bitdepth.thomasrutter.com/2010/05/16/php-递归原因分段错误/](http://bitdepth.thomasrutter.com/2010/05/16/php-recursion-causes-segmentation-fault/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T21:28:23.363

我认为递归在这里不是问题。如果是这样，您的脚本很可能会在更新之前导致相同的问题。

其中一个 php 模块可能不是最新的。您是否在更新之前使用 pear 手动编译或安装模块？如果是这样，必须针对新的 php 版本重新编译这些模块。

要找出可以手动编译的模块，请将`/etc/php.d`文件夹中的 ini 文件与

```
yum list installed | grep "php" 
```

这列出了所有定期安装的 php 相关软件包，这些软件包在更新后不会导致问题

要找出您可能使用 pecl 安装了哪些软件包，您还可以运行以下命令：

```
# pecl list
Installed packages, channel pecl.php.net:
=========================================
Package   Version State
memcached 2.1.0   stable
ssh2      0.11.3  beta 
```

如果您得到这样的列表，请使用更新这些模块

```
 pecl upgrade-all 
```

如果您有未使用 pecl 安装且未使用 yum 安装的活动模块，这些模块将手动编译并需要重新编译

在这种情况下，您可以按照此处批准答案的步骤 [https://serverfault.com/questions/261268/how-to-build-missing-php-5-3-extensions-on-centos-5-6](https://serverfault.com/questions/261268/how-to-build-missing-php-5-3-extensions-on-centos-5-6)

# node.js - 'Express' 不是识别命令（Windows）

> ID：13553404
> 
> 赞同：43
> 
> 时间：2012-11-25T17:18:24.717
> 
> 标签：node.js, express

好的，我正在 Windows (7) 上运行节点。使用 npm 我刚刚将模块安装到 d:\ 目录。因此我的文件结构如下所示：

```
D:\
  -myproject
     -node_modules
        -.bin
        -express 
```

但是，当我在这个“myproject”目录中时，我似乎无法运行“express”，例如：

```
D:\myproject\express site
'express' is not recognized as an internal or external command, operable program or batch file. 
```

我做错什么了吗？

* * *

## 回答 #1

> 赞同：163
> 
> 时间：2014-05-03T04:00:27.867

尝试：

```
npm install -g express-generator@3 
```

这为我解决了问题。

**编辑**：对于版本 4

```
npm install express-generator -g 
```

说明：express是express js的依赖包。express-generator 是用于启用 express 命令和创建示例项目等的包。假设这是为了与 express 的 cli 工具解耦项目依赖而单独保留的。

另一个 SO 参考：[https ://stackoverflow.com/a/41311733/1666582](https://stackoverflow.com/a/41311733/1666582)

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-11-26T14:15:21.810

我的猜测是您没有在全球范围内安装 Express。[您可以使用以下命令（请参阅http://expressjs.com/guide.html](http://expressjs.com/guide.html) ）全局安装 express（因此在您的 PATH 中可用）：

```
npm install -g express 
```

您安装它的方式仅在您安装它的文件夹中可用，这种方法没有任何问题。在全球范围内使用它几乎没有什么优势。

如果 express 不在您的 PATH 中，您可以通过输入完整路径来运行它：

```
\myproject\node_modules\.bin\express.cmd 
```

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2014-10-25T20:43:58.843

以下是在命令行中键入的内容以使其在 Windows 中工作：

```
npm install express-generator -g 
```

[来源：[http://expressjs.com/starter/generator.html]](http://expressjs.com/starter/generator.html])

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2015-04-17T09:02:35.533

随着 Express 4.0.0 的发布，您似乎需要做

```
 npm install -g express-generator. 
```

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2016-01-04T01:02:34.850

我们需要为 express 全局目录设置路径

C:\Users[User_Name]\AppData\Roaming\npm\

添加新路径后，请重新打开 CMD 控制台

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-06-14T12:00:32.207

尝试了所有这些，但从未奏效。通过启动安装并选择修复选项来修复 Node.js 会很神奇。

干杯

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-01-16T02:04:26.907

对我有用的是：

我使用了 windows 命令提示符而不是 node.js 命令提示符。

在 Windows 10 中，只需在 Windows 搜索栏中键入“节点”

您会看到一个 node.js 桌面应用程序和一个 node js 命令提示符。

选择“节点js命令提示符”

在命令提示符下输入

```
npm install express-generator -g 
```

然后导航到某处并输入：

```
express your-website-text-here -e 
```

将生成一个包含快速文件的目录。现在您也不会看到 express 错误。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-06-09T23:24:26.527

当您安装 Node.js 时，以下路径将添加到 Windows OS %Path% 变量中，我假设在其他操作系统上也会发生类似情况：

`C:\Users\<your-windows-username>\AppData\Roaming\npm`

就我而言，因为我为雇主使用的工作 Windows 笔记本电脑严重限制了员工可以在他们的机器上执行的操作（即许多操作需要提升的管理员权限），所以 Node.js 被阻止将上述路径添加到 Windows`%Path%`环境变量，令我懊恼的是，Node.js 的安装对此保持沉默。导航到上面的文件夹，您会注意到该`express`命令存在于那里，请参见下面的屏幕截图。

我是怎么想出来的？我在没有管理员权限限制的个人家用 Windows 机器上进行了 Node.js 的全新安装，就像我的工作机器一样，比较了之前和之后的`%Path%`值，并注意到添加了该路径。我的工作机器不见了。

我别无选择，只能手动将路径添加到`%Path%`，然后`express`从我运行它的任何路径中识别出来。

[![在此处输入图像描述](../Images/7f94925d1d248c60b7f5b13cc0360db6.png)](https://i.stack.imgur.com/kwnBE.png)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-11-15T20:34:12.420

我能够解决这个问题：

```
npm install express-generator -g 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-05-12T06:30:06.790

我能够使用以下软件包安装进行修复：

```
npm install express-generator -g 
```

谢谢

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-07-27T18:45:48.590

我尝试了上述所有解决方案，但我没有运气。打开“Node.js”命令提示符并以管理员身份尝试。它对我来说很好。不要尝试使用 Windows 命令提示符。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-06-24T14:35:03.163

我有同样的问题并理解解决方案，但我不明白为什么，运行 npm install -g express，express.bat 不会自动添加到路径中。

使用 npm install -g express 运行具有相同的结果。下载包并存储在 node_modules 中，但 express.bat 没有添加到路径中。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-04-11T08:07:39.180

以管理员身份运行 node 命令提示符，然后安装 express globaly
*npm install -g express*
然后转到要安装 express generator 的文件夹，打开命令提示符并运行此命令
*npm install express-generator*，它将解决问题

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2016-04-29T06:11:14.503

我已经尝试了上述所有解决方案，但它对我没有用，最后我重新安装了更新版本的[node.js](https://nodejs.org/en/)并再次开始表达安装过程。它对我有用。

```
npm install -g express
npm install -g express-generator 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2012-11-25T17:30:13.600

你用什么命令打开目录？

该错误意味着 CMD 在当前目录中找不到“express”可执行文件。

使用“PUSHD”命令或“CD /D”而不是“CD”

```
@Echo OFF
PUSHD "D:\myproject\express" || (Echo bad folder)
express.exe "site"
Pause&Exit 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2012-11-25T17:32:00.143

Express 在其他地方加载，而不是在 Windows 路径环境变量中。您需要找到已安装express.exe 并添加路径。也许像 ;"C:\Program Files\Express\bin";

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-10-06T21:14:21.313

从项目目录运行“npm install express”和“npm install express-generator”将解决问题（如果有帮助的话）。

但是，这并不能解决全球化的问题。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-06-02T05:51:30.247

如果您在创建项目时获得此文件夹的权限，则可以检查该文件夹的权限

快递项目

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2019-07-18T04:13:37.670

像这样更改 package.json 文件中的脚本部分

```
"scripts": {
"start": "node app.js" 
```

}

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-06-12T07:56:12.877

我也遇到了类似的问题，最后我尝试使用 node.js 命令提示符而不是 windows 命令提示符并且它有效。因此，从 node.js 命令提示符尝试。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2020-08-30T10:33:32.713

尝试了所有这些但对我不起作用。此外，我尝试了不同的来源，但从未为我工作过。
最后，发现我需要强制运行命令。它对我有用。
**确保以管理员身份运行命令。**

```
 npm install -g --force express-generator 
```

它将覆盖现有的快递文件。

* * *

## 回答 #22

> 赞同：-5
> 
> 时间：2014-05-05T05:43:42.280

使用 npm start .. 然后 app.js 运行 .. 可以在通常的端口 3000 上监听

# javascript - 将参数传递给javascript函数

> ID：13553407
> 
> 赞同：6
> 
> 时间：2012-11-25T17:18:36.707
> 
> 标签：javascript, parameter-passing

> **可能重复：**
> [循环内的 Javascript 闭包 - 超时后循环中的简单实用示例](https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example)
> [javascript 变量范围/闭包](https://stackoverflow.com/questions/9029021/javascript-variable-scope-closure-in-loop-after-timeout)

您能否逐步解释为什么结果不同？

**片段 A**（警报 10）

```
for(var i=0; i<10; i++) if(i==3) setTimeout(function() {alert(i);}, 100); 
```

**片段 B**（警报 3）

```
for(var i=0; i<10; i++) if(i==3) setTimeout((function(p) {
   return function() {alert(p);}
} )(i), 100); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T17:22:10.727

变量的作用域是全局作用域（`window`在浏览器中）或函数。

在第一种情况下`i`，定义在包含`for`循环的范围内。这就是为什么在执行给定的回调之前它仍然会变化，直到循环结束`setTimeout`。

在第二种情况下，中间函数包含并保留另一个变量`p`。请注意，如果没有测试，这将是有效的，因为这对于每个`setTimeout`.

# c - 优化 O(n^2) 到 O(n)（未排序的字符串）

> ID：13553408
> 
> 赞同：1
> 
> 时间：2012-11-25T17:18:37.990
> 
> 标签：c, arrays, sorting, optimization

我在这里遇到了优化问题。我想让这段代码在 O(n) 中运行，我已经尝试了几个小时。

字节数组 c 包含一个字符串， e 包含相同的字符串，但已排序。整数数组 nc 和 ne 包含字符串中的索引，例如

```
c:
s l e e p i n g
nc:
0 0 0 1 0 0 0 0 
e:
e e g i l n p s
ne:
0 1 0 0 0 0 0 0 
```

现在的问题是 get_next_index 是线性的 - 有没有办法解决这个问题？

```
void decode_block(int p) {
    BYTE xj = c[p];
    int nxj = nc[p];

    for (int i = 0; i < block_size; i++) {
        result[i] = xj;
        int q = get_next_index(xj, nxj, c, nc);
        xj = e[q];
        nxj = ne[q];
    }

    fwrite(result, sizeof (BYTE), block_size, stdout);
    fflush(stdout);
}

int get_next_index(BYTE xj, int nxj, BYTE* c, int* nc) {
    int i = 0;
    while ( ( xj != c[i] ) || ( nxj != nc[i] ) ) {
      i++;
    }
    return i;
} 
```

这是[Burrows-Wheeler](http://en.wikipedia.org/wiki/Burrows%E2%80%93Wheeler_transform)实现的一部分

它开始于

```
xj = c[p]
nxj = nc[p] 
```

接下来我必须 block_size (= 长度 c = 长度 nc = 长度 e = 长度 ne) 次

*   将结果 xj 存储在结果中

*   找到 c[i] == xj 的数字索引

*   xj 现在是 e[i]

ne 和 nc 仅用于确保 e 和 c 中的每个字符都是唯一的 (e_0 != e_1)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T17:48:58.763

由于你的宇宙（即一个字符）很小，我认为你可以摆脱线性时间。为此，您需要~~一个链表和~~ *任何序列容器*的查找表。

首先，您遍历已排序的字符串并填充一个查找表，该表允许您找到给定字符的第一个列表元素。例如，您的查找表可能看起来像`std::array<std::list<size_t>,(1<<sizeof(char))> lookup`. 如果你不想要 a `list`，你也可以使用 an`std::deque`甚至`std::pair<std::vector,size_t>`while 第二个项目代表向量的第一个有效条目的索引（这样你以后不需要弹出元素，而只是增加指数）。

因此，对于排序字符串中的每个元素`c`，您将其附加到`lookup[c]`.

现在，当您遍历*未排序*的数组时，对于每个元素，您可以在查找表中查找相应的索引。完成后，在查找表中弹出最前面的元素。

总而言之，这是线性的时间和空间。

* * *

澄清; 初始化查找表时：

```
// Instead of a list, a deque will likely perform better,
// but you have to test this yourself in your particular case.
std::array<std::list<size_t>,(1<<sizeof(char))> lookup;
for (size_t i = 0; i < sortedLength; i++) {
  lookup[sorted[i]].push_back(i);
} 
```

`i`在*未排序*数组中查找索引的“第一个索引”时：

```
size_t const j = lookup[unsorted[i]].front();
lookup[unsorted[i]].pop_front();
return j; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T17:49:02.510

扫描一次`xj`并`nxj`建立一个查找表。这是两个 O(n) 操作。

最明智的方法是使用二叉树，按`xj`or的值排序`nxj`。该节点将包含您寻找的索引。这会将您的查找减少到 O(lg n)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T18:10:52.477

这是我对 Burrowes-Wheeler 变换的完整实现：

```
u8* bwtCompareBuf;
u32 bwtCompareLen;

s32 bwtCompare( const void* v1, const void* v2 )
{
   u8* c1 = bwtCompareBuf + ((u32*)v1)[0];
   u8* c2 = bwtCompareBuf + ((u32*)v2)[0];

   for ( u32 i = 0; i < bwtCompareLen; i++ )
   {
      if ( c1[i] < c2[i] ) return -1;
      if ( c1[i] > c2[i] ) return +1;
   }
   return 0;
}

void bwtEncode( u8* inputBuffer, u32 len, u32& first )
{
   s8* tmpBuf = alloca( len * 2 );

   u32* indices = new  u32[len];

   for ( u32 i = 0; i < len; i++ ) indices[i] = i;

   bwtCompareBuf = tmpBuf;
   bwtCompareLen = len;
   qsort( indices.data(), len, sizeof( u32 ), bwtCompare );

   u8* tbuf = (u8*)tmpBuf + ( len - 1 );
   for ( u32 i = 0; i < len; i++ )
   {
      u32 idx = indices[i];
      if ( idx == 0 ) idx = len;
      inputBuffer[i] = tbuf[idx];
      if ( indices[i] == 1 ) first = i;
   }

   delete[] indices;
}

void bwtDecode( u8* inputBuffer, u32 len, u32 first )
{
   // To determine a character's position in the output string given
   // its position in the input string, we can use the knowledge about
   // the fact that the output string is sorted.  Each character 'c' will
   // show up in the output stream in in position i, where i is the sum
   // total of all characters in the input buffer that precede c in the
   // alphabet, plus the count of all occurences of 'c' previously in the
   // input stream.

   // compute the frequency of each character in the input buffer
   u32 freq[256] = { 0 };
   u32 count[256] = { 0 };
   for ( u32 i = 0; i < len; i++ )
      freq[inputBuffer[i]]++;

   // freq now holds a running total of all the characters less than i
   // in the input stream
   u32 sum = 0;
   for ( u32 i = 0; i < 256; i++ )
   {
      u32 tmp = sum;
      sum += freq[i];
      freq[i] = tmp;
   }

   // Now that the freq[] array is filled in, I have half the
   // information needed to position each 'c' in the input buffer.  The
   // next piece of information is simply the number of characters 'c'
   // that appear before this 'c' in the input stream.  I keep track of
   // that information in the count[] array as I go.  By adding those
   // two numbers together, I get the destination of each character in
   // the input buffer, and I just write it directly to the destination.
   u32* trans = new u32[len];
   for ( u32 i = 0; i < len; i++ )
   {
      u32 ch = inputBuffer[i];
      trans[count[ch] + freq[ch]] = i;
      count[ch]++;
   }

   u32 idx = first;
   s8* tbuf = alloca( len );
   memcpy( tbuf, inputBuffer, len );
   u8* srcBuf = (u8*)tbuf;
   for ( u32 i = 0; i < len; i++ )
   {
      inputBuffer[i] = srcBuf[idx];
      idx = trans[idx];
   }

   delete[] trans;
} 
```

O(n) 中的解码。

# mysql - MYSQL：mysql中的动态列->名字，姓氏到全名：

> ID：13553409
> 
> 赞同：2
> 
> 时间：2012-11-25T17:18:41.233
> 
> 标签：mysql, sql, dynamic

我想知道你是否有两列可以说

```
first name. 
last name. 
```

您存储在数据库中的内容。

您可以在数据库中创建一个“动态”列“全名”，自动根据名字和姓氏创建名称吗？

```
firstname   |lastname   |fullname (this goes automatically)
-----------------------------------------
foo         |bar        |foo bar 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-25T17:21:07.640

如果您只想选择全名，您可以这样做：

```
 select concat(firstname, ' ', lastname) as fullname from users 
```

如果你真的想要一个列（即能够对其执行更新），那么这是不可能的，AFAIK。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T17:23:05.843

你可以尝试这样的事情：

```
 SELECT CONCAT(firstname, ' ', lastname) as firstlast FROM users 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-22T11:58:53.180

这还确保不添加空格：

```
SELECT IF(ISNULL(firstname), lastname, CONCAT(firstname, ' ', lastname)) AS fullname FROM users 
```

# actionscript-3 - 如何防止点击空白阶段或至少识别它？

> ID：13553415
> 
> 赞同：0
> 
> 时间：2012-11-25T17:19:45.723
> 
> 标签：actionscript-3, flash, adobe

我在舞台上随机 x 和 y 添加了一些动画剪辑实例（一个简单的苹果图像）。现在我试图点击每一个来删除它们。

这是我的代码：

```
public function Apples() {

    for(var count:int=1; count<=10; count++){
        var apple = new Apple();
        apple.x = Math.random() * stage.stageWidth;
        apple.y = Math.random() * stage.stageHeight;    
        apple.name = count;
        stage.addChild(apple);
        }

stage.addEventListener(MouseEvent.CLICK, onClick);

    function onClick(e:MouseEvent):void{
        var displayObject:DisplayObject = (DisplayObject) (e.target);
        displayObject.parent.removeChild(displayObject);
        }
} 
```

我的问题是我想知道什么时候所有的苹果都被移走了。

我尝试在每次`onClick`调用时添加一个简单的计数器，这样一旦达到显示的相同数量的苹果，我就会显示游戏结束消息，但这里的问题是，如果你点击空舞台而不是苹果，然后计数仍然增加。

有没有办法阻止用户点击舞台，或者有一种方法可以识别舞台是否已被点击以获得 if 条件？

或者也许有完全不同的方式来实现我所需要的？

谢谢你的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T18:03:24.113

由于您正在向`Apple`舞台添加实例，因此您可以检查是否在您的 onClick 处理程序中单击了 Apple

```
function onClick(e:MouseEvent):void{
    var apple:Apple = e.target as Apple;
    if(apple) {
       apple.parent.removeChild(apple);
    }
} 
```

如果您不单击苹果，则苹果实例将为空。

我可能会将苹果保存在一个数组中，并在它们从舞台/父级中删除后将它们从数组中删除。然后，您需要做的就是检查舞台上是否还有苹果，检查该数组的长度。

# ruby-on-rails - 使用 CLI 在 AWS Elastic Beanstalk 上部署 RoR 项目

> ID：13553416
> 
> 赞同：0
> 
> 时间：2012-11-25T17:19:48.357
> 
> 标签：ruby-on-rails, amazon-web-services, amazon-elastic-beanstalk

一些背景。我在 AWS 上创建了一个帐户，以试用用于部署 RoR 应用程序的 AWS Elastic Beanstalk 解决方案。然后我按照亚马逊网站上的指南（[Eb 入门](http://docs.amazonwebservices.com/elasticbeanstalk/latest/dg/create_deploy_Ruby_rails.html)）进行操作，效果很好。

然而，我对此感到困惑，当我使用 eb cli 工具创建应用程序并从我的账户中指定 AWS 访问密钥 ID 和 AWS 秘密访问密钥时，它不会显示在我的 AWS 管理控制台中。

我是否需要执行一些特殊任务来在从 CLI 工具创建的应用程序与我的 AWS 管理控制台之间建立连接？

我找不到其他人有这个问题，不知道我是否在这里遗漏了一些明显的东西。创建应用程序时，我遵循了[指南。](http://docs.amazonwebservices.com/elasticbeanstalk/latest/dg/create_deploy_Ruby_rails.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T17:25:50.803

我完全忽略了您可以在顶部菜单中选择区域的事实。默认区域是弗吉尼亚北部，我正在部署到欧洲（爱尔兰）。

如果其他人在谷歌上搜索这个问题，请继续提问和回答。

# scala - 未找到：类型注册？

> ID：13553418
> 
> 赞同：1
> 
> 时间：2012-11-25T17:19:57.610
> 
> 标签：scala, playframework-2.0

我遵循了本教程：http: [//yobriefca.se/blog/2012/05/08/starter-for-10-scala/](http://yobriefca.se/blog/2012/05/08/starter-for-10-scala/) 运行应用程序后，我得到了这个：

![在此处输入图像描述](../Images/e4f6a6a7b6cd5c5cc7c93a6a0d55b5bf.png)

我确信本教程和应用程序中的代码完全相同。

我正在使用`Play 2.0.4`. 本教程使用`Play 2.0.1`. 不确定这是原因还是因为依赖版本？

**教程：**

斯卡拉 (2.9.1)

蒙哥 (2.0.4)

**我：**

斯卡拉 (2.9.2)

蒙哥 (2.2.1)

# google-chrome - 如何强制 Chrome 不缓存重定向？

> ID：13553420
> 
> 赞同：7
> 
> 时间：2012-11-25T17:20:20.160
> 
> 标签：google-chrome, caching, redirect

一个简单的 HTML 代码：

```
<img src="http://someaddr/image.php"> 
```

image.php 是一个脚本，它返回一个随机重定向到具有所有必要的无缓存标头的静态图像：

```
Cache-Control: no-cache, no-store, must-revalidate
Pragma: no-cache
Expires: 0
Location: http://someaddr/random_image_12345.jpg 
```

问题：来回导航到此 HTML 页面时，Chrome（最新的 win/mac）不会重新验证 address `http://someaddr/image.php`。

我尝试过使用重定向 302 和 303（在 RFC 中有更强的要求，它不应该被浏览器缓存）。这就像 IE、FireFox、Opera 中的魅力一样。他们总是刷新`http://someaddr/image.php`。但 Chrome 没有。

我什至在 Chrome 中使用过开发人员工具，似乎在网络日志中它甚至没有显示任何尝试（缓存或不缓存） fetching `http://someaddr/image.php`。网络日志仅显示一个已连接到`http://someaddr/random_image_12345.jpg`（缓存）的连接。怎么这么破……

我知道将查询字符串放入图像源的天真/简单的解决方案：

```
 <img src="http://someaddr/image.php?refresh={any random number or timestamp}"> 
```

但我不喜欢/不能使用这样的黑客。还有其他选择吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-25T23:58:41.613

**尝试 307 重定向**

**但是，如果您因为缓存重定向而无法访问无法使用的链接...**

这不会清除缓存，但如果您正在拉头发试图访问已重定向缓存的链接，它是一种快速且可能的绕过它的路线。

将链接地址复制到地址栏中，并在地址中添加一些 GET 信息。

**示例** 如果您的网站是[http://example.com](http://example.com)

```
Put a ?x=y at the end of it 
( example.com?x=y ) - the x and y could be anything you want. 
```

如果已经有 ? 在 url 后面有一些信息

```
( example.com?this=that&true=t ) - try to add &x=y to the end of it...

( example.com?this=that&true=t&x=y ) 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-11-25T18:03:56.200

从 另一个问题中发布的[链接：](http://www.webscalingblog.com/performance/caching-http-headers-last-modified-and-etag.html)

```
 The first header Cache-Control: must-revalidate means that browser must send validation request every time even if there is already cache entry exists for this object.
Browser receives the content and stores it in the cache along with the last modified value.
Next time browser will send additional header:
If-Modified-Since: 15 Sep 2008 17:43:00 GMT

This header means that browser has cache entry that was last changed 17:43.
Then server will compare the time with last modified time of actual content and if it was changed server will send the whole updated object along with new Last-Modified value.

If there were no changes since the previous request then there will be short empty-body answer:
HTTP/1.x 304 Not Modified 
```

您可以使用 HTTP 的 etags 和最后修改日期来确保您不会发送它已经缓存的浏览器数据。

```
$last_modified_time = filemtime($file); 
$etag = md5_file($file); 

header("Last-Modified: ".gmdate("D, d M Y H:i:s", $last_modified_time)." GMT"); 
header("Etag: $etag"); 

if (@strtotime($_SERVER['HTTP_IF_MODIFIED_SINCE']) == $last_modified_time || 
    trim($_SERVER['HTTP_IF_NONE_MATCH']) == $etag) { 
    header("HTTP/1.1 304 Not Modified"); 
    exit; 
} 
```

# c++ - C++ OpenGL fstream 问题

> ID：13553421
> 
> 赞同：0
> 
> 时间：2012-11-25T17:20:41.667
> 
> 标签：c++, linux, opengl

我目前正在开发一个项目（c++），包括制作一个日志文件，其中包含使用 fstream 在编译和运行时收集的一些信息。在分别使用 GL_VENDOR/GL_VERSION/GL_RENDERER 的 glGetString() 命令时，流停止打印，因此我的日志文件在我使用这些命令中的任何一个时停止。信息在整个运行过程中直接打印在文件中。OpenGL 版本是最新的。

编辑：
示例：
buildLog.open ("Release/build.log");
buildLog << "\n供应商：" << glGetString( GL_VENDOR );

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T17:26:32.240

我还没有真正学习过 OpenGL，所以这有点推测，但我看到它返回一个`GLubyte *`. 也许有一个铸造问题。我也会尝试检查失败/坏/eof，看看它是否揭示了任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T23:08:22.657

`glGetString()`需要（与大多数 OpenGL 函数一样）当前的 GL 上下文才能正常工作。

# printing - 从 Web 直接创建矢量图形以进行打印

> ID：13553423
> 
> 赞同：1
> 
> 时间：2012-11-25T17:20:46.470
> 
> 标签：printing

我想知道有哪些技术可以从网络上生成高分辨率打印质量的矢量图。并想知道每个的利弊，请。

例如，客户使用预定义图像和自由文本的组合设计自己的艺术品以在某些项目上打印。我想以 300dpi 基于矢量的 PDF 格式输出它，该 PDF 可以直接发送给打印制作团队，然后他们可以通过打印机以任何格式运行它，而无需创建图稿。

抱歉，如果有人问过这个问题，但我找不到明确说明存在哪些技术的答案。

非常感谢本

# c++ - GLUT 游戏中的 C++ LNK 2019 错误

> ID：13553425
> 
> 赞同：0
> 
> 时间：2012-11-25T17:20:51.247
> 
> 标签：c++, glut, lnk2019

为糟糕的问题标题道歉，我不知道如何问这个。我在尝试编译我的 GLUT 游戏时遇到 LNK2019 错误，我无法找出导致错误的原因。

错误： main.obj ：`error LNK2019: unresolved external symbol "public: void __thiscall asteroid::animateAsteroid(void)" (?animateAsteroid@asteroid@@QAEXXZ) referenced in function "void __cdecl idle(void)" (?idle@@YAXXZ)`

小行星.h

```
class asteroid
{
public:
asteroid(void); //constructer
~asteroid(void); //deconstructer

void Draw();
void createAsteroid();
float generateAsteroidLocation(float a, float b);
void animateAsteroid();
}; 
```

asteroid.cpp（麻烦功能）

```
#include "asteroid.h"
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#define _USE_MATH_DEFINES
#include <math.h>
#include <ctime>
#include <GL/glut.h>

float asteroidX,asteroidY, V;
bool locationGenerated = false;

asteroid::asteroid(void){

}

asteroid::~asteroid(void){

}
void animateAsteroid(){
float dt = 3500;
float Dx = 25 - asteroidX;
float Dy = 25 - asteroidY;
float Cx = asteroidX + Dx / sqrt(Dx*Dx+Dy*Dy) * V * dt;
float Cy = asteroidY + Dy / sqrt(Dx*Dx+Dy*Dy) * V * dt;
asteroidX = Cx;
asteroidY = Cy;
} 
```

Main.cpp（我得到错误的函数）

```
void idle(void)
{
glutPostWindowRedisplay(glutGetWindow());
Asteroid.animateAsteroid();
} 
```

对于解决此问题的任何帮助，我将不胜感激。

谢谢，丹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T17:39:15.370

在 asteroid.cpp 文件中，您在方法声明中缺少类名：

```
void asteroid::animateAsteroid(){
... 
```

# c++ - Makefile 错误：缺少分隔符，使用 SDL 和 OpenGL 编译

> ID：13553426
> 
> 赞同：0
> 
> 时间：2012-11-25T17:20:52.693
> 
> 标签：c++, opengl, gcc, makefile, sdl

我正在使用[这个通用的 makefile](http://sourceforge.net/projects/gcmakefile/)。

使用此自定义选项：

```
# The pre-processor options used by the cpp (man cpp for more).
CPPFLAGS  = -Wall -I/Library/Frameworks/SDL.framework/Headers

# The options used in linking as well as in any direct use of ld.
LDFLAGS   = -framework SDL -framework Cocoa -framework OpenGL

# The executable file name.
# If not specified, current directory name or `a.out' will be used.
PROGRAM   = app

# The source file types (headers excluded).
# .c indicates C source files, and others C++ ones.
SRCEXTS = .c .C .cc .cpp .CPP .c++ .cxx .cp .m

clean:
    $(RM) $(OBJS) $(PROGRAM) $(PROGRAM) 
```

代替：

```
# The pre-processor options used by the cpp (man cpp for more).
CPPFLAGS  = -Wall

# The options used in linking as well as in any direct use of ld.
LDFLAGS   = 

# The executable file name.
# If not specified, current directory name or `a.out' will be used.
PROGRAM   = 

# The source file types (headers excluded).
# .c indicates C source files, and others C++ ones.
SRCEXTS = .c .C .cc .cpp .CPP .c++ .cxx .cp

clean:
    $(RM) $(OBJS) $(PROGRAM) $(PROGRAM).exe 
```

[在这里](http://pastebin.com/fqXxDesJ)你可以找到我正在运行的 makefile 的完整版本。

我正在使用带有 gcc 4.2.1 的 Mac OS X 10.6.8，并尝试使用`main.cpp`SDL和 OpenGL 进行编译。`SDLMain.m``SDLMain.h`

弹出的错误是：

> main.d:1: ***缺少分隔符。停止。

并且文件 main.d（由 makefile 生成）是这样的：

```
-n ./
main.o: main.cpp 
```

有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T17:33:35.187

您展示的 Makefile [exerpt] 没有显示如何`main.d`创建，但它似乎包含在实际的`Makefile`. 它可能意味着包含make 语法`main.cpp`的依赖项。`-n ./' is clearly not valid`现在尝试删除文件，如果它被重新生成，您需要找到它是如何生成的并修复它。要查看它是如何再次生成的，请删除文件并使用

```
make -p 2>&1 | tee mkerr 
```

完成后，`mkerr`将包含`make`命令的输出，包括它使用的规则。在某处有如何构建`.d`文件的规则。运气好的话，删除文件可以解决问题......

根据发布到[pastebin](http://pastebin.com/fqXxDesJ)的代码，问题是如何`%.d`创建文件的规则：

```
%.d: %.cpp
    @echo -n $(dir $<) > $@
    @$(DEPEND.d) $< << $@ 
```

问题是`echo`发现的不理解`-n`旨在避免任何换行符的选项。规则的第一行应该为文件添加一个目录前缀。esiaast 修复是找到一个更好`echo`的理解`-n`选项。虽然，您可能需要使用不同的外壳，因为`echo`它往往是内置的外壳！在这种情况下，您最好在`echo`没有行为异常的版本上使用完整路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T17:57:35.920

我替换`echo -n`为`printf`它解决了问题：

```
# Rules for creating dependency files (.d).
#------------------------------------------

%.d:%.c
    @printf $(dir $<) > $@
    @$(DEPEND.d) $< >> $@

%.d:%.C
    @printf $(dir $<) > $@
    @$(DEPEND.d) $< >> $@

%.d:%.cc
    @printf $(dir $<) > $@
    @$(DEPEND.d) $< >> $@

%.d:%.cpp
    @printf $(dir $<) > $@
    @$(DEPEND.d) $< >> $@

%.d:%.CPP
    @printf $(dir $<) > $@
    @$(DEPEND.d) $< >> $@

%.d:%.c++
    @printf $(dir $<) > $@
    @$(DEPEND.d) $< >> $@

%.d:%.cp
    @printf $(dir $<) > $@
    @$(DEPEND.d) $< >> $@

%.d:%.cxx
    @printf $(dir $<) > $@
    @$(DEPEND.d) $< >> $@

%.d:%.m
    @printf $(dir $<) > $@
    @$(DEPEND.d) $< >> $@ 
```

# ruby - 如何在 RSpec 中存根混合方法

> ID：13553427
> 
> 赞同：0
> 
> 时间：2012-11-25T17:20:52.367
> 
> 标签：ruby, rspec, tdd, mongoid

我正在使用 Mongoid 类将 Ruby 对象持久保存到 MongoDB。示例对象：

```
class Option
  include Mongoid::Document

  field :name, type: String
  field :created_at, type: Time, default: ->{ Time.now }

end 
```

在我的测试中，我发现自己在创建后存根实例以避免对象碰到 mongo：

```
o1 = Option.new
o1.stub(:save!).and_return true #stub method
o1.name = 'red'
o1.save! 
```

明显的问题是我需要为每个实例都这样做。有没有办法可以存根该`Mongoid::Document.save!`方法，即混合？这样我就可以知道任何使用混合的文档都会被`save!`存根。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T17:46:38.257

当然，您可以使用 monkeypatch `Mongoid::Document`，但我建议不要这样做，其他测试可能需要 original `save!`。工厂方法可以减轻重复存根的不便：

```
def option_with_stubbed_save
  option = Option.new
  option.stub(:save!).and_return true
  option
end 
```

# c# - 尝试构建一个正则表达式来匹配标记的用户名

> ID：13553431
> 
> 赞同：0
> 
> 时间：2012-11-25T17:21:06.547
> 
> 标签：c#, .net, regex, facebook, string

我正在尝试构建一个匹配标记的 facebook 用户名（@username1 @user.name、@user_name 等）的正则表达式（在 C# 中）。我认为 facebook 用户名可以包含字母数字、破折号、句点和下划线字符。

这一个只匹配字母数字字符，但我需要一个也接受句点、破折号或下划线的字符：

```
MatchCollection results = Regex.Matches(text, "@\\w+"); 
```

任何帮助，非常感谢，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T17:23:03.627

试试这个：

```
MatchCollection results = Regex.Matches(text, @"@[\w.-]+"); 
```

但是，这也将匹配电子邮件地址的域部分（因为根据您的规范，点是允许的字符）。如果您不希望这样，您可以添加一个否定的后向断言，以确保在 : 之前没有非空格字符`@`：

```
MatchCollection results = Regex.Matches(text, @"(?<!\S)@[\w.-]+"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T17:38:18.210

使用“完整列表”版本：

```
MatchCollection results = Regex.Matches(txt, @"(?:^|(?<=\s))@[a-zA-Z0-9_.-]+(?=\s|$)"); 
```

或短版（`\w`= `[a-zA-Z0-9_]`）

```
MatchCollection results = Regex.Matches(txt, @"(?:^|(?<=\s))@[\w.-]+(?=\s|$)"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T17:46:03.740

你也可以这样做

```
List<string> tagedNames=Regex.Matches(text,@"(?<=(\s|^))@[\w.-]+")
                             .Cast<Match>()
                             .Select(x=>x.Value)
                             .ToList<string>(); 
```

# iphone - 在使用 php 上传到服务器之前旋转图像

> ID：13553432
> 
> 赞同：0
> 
> 时间：2012-11-25T17:21:06.643
> 
> 标签：iphone, objective-c, ios, xcode

我已经构建了一个将图像上传到我的服务器的 iPhone 应用程序，它工作正常，但是从我的 iPhone 摄像头捕获的图像在上传时正在旋转

我搜索了它，我找到了解决问题的代码

```
-(UIImage *)scaleAndRotateImage:(UIImage *)image { // here we rotate the image in its orignel
int kMaxResolution = 640; // Or whatever

CGImageRef imgRef = image.CGImage;

CGFloat width = CGImageGetWidth(imgRef);
CGFloat height = CGImageGetHeight(imgRef);

CGAffineTransform transform = CGAffineTransformIdentity;
CGRect bounds = CGRectMake(0, 0, width, height);
if (width > kMaxResolution || height > kMaxResolution) {
    CGFloat ratio = width/height;
    if (ratio > 1) {
        bounds.size.width = kMaxResolution;
        bounds.size.height = roundf(bounds.size.width / ratio);
    }
    else {
        bounds.size.height = kMaxResolution;
        bounds.size.width = roundf(bounds.size.height * ratio);
    }
}

CGFloat scaleRatio = bounds.size.width / width;
CGSize imageSize = CGSizeMake(CGImageGetWidth(imgRef), CGImageGetHeight(imgRef));
CGFloat boundHeight;
UIImageOrientation orient = image.imageOrientation;
switch(orient) {

    case UIImageOrientationUp: //EXIF = 1
        transform = CGAffineTransformIdentity;
        break;

    case UIImageOrientationUpMirrored: //EXIF = 2
        transform = CGAffineTransformMakeTranslation(imageSize.width, 0.0);
        transform = CGAffineTransformScale(transform, -1.0, 1.0);
        break;

    case UIImageOrientationDown: //EXIF = 3
        transform = CGAffineTransformMakeTranslation(imageSize.width, imageSize.height);
        transform = CGAffineTransformRotate(transform, M_PI);
        break;

    case UIImageOrientationDownMirrored: //EXIF = 4
        transform = CGAffineTransformMakeTranslation(0.0, imageSize.height);
        transform = CGAffineTransformScale(transform, 1.0, -1.0);
        break;

    case UIImageOrientationLeftMirrored: //EXIF = 5
        boundHeight = bounds.size.height;
        bounds.size.height = bounds.size.width;
        bounds.size.width = boundHeight;
        transform = CGAffineTransformMakeTranslation(imageSize.height, imageSize.width);
        transform = CGAffineTransformScale(transform, -1.0, 1.0);
        transform = CGAffineTransformRotate(transform, 3.0 * M_PI / 2.0);
        break;

    case UIImageOrientationLeft: //EXIF = 6
        boundHeight = bounds.size.height;
        bounds.size.height = bounds.size.width;
        bounds.size.width = boundHeight;
        transform = CGAffineTransformMakeTranslation(0.0, imageSize.width);
        transform = CGAffineTransformRotate(transform, 3.0 * M_PI / 2.0);
        break;

    case UIImageOrientationRightMirrored: //EXIF = 7
        boundHeight = bounds.size.height;
        bounds.size.height = bounds.size.width;
        bounds.size.width = boundHeight;
        transform = CGAffineTransformMakeScale(-1.0, 1.0);
        transform = CGAffineTransformRotate(transform, M_PI / 2.0);
        break;

    case UIImageOrientationRight: //EXIF = 8
        boundHeight = bounds.size.height;
        bounds.size.height = bounds.size.width;
        bounds.size.width = boundHeight;
        transform = CGAffineTransformMakeTranslation(imageSize.height, 0.0);
        transform = CGAffineTransformRotate(transform, M_PI / 2.0);
        break;

    default:
        [NSException raise:NSInternalInconsistencyException format:@"Invalid image orientation"];

}

UIGraphicsBeginImageContext(bounds.size);

CGContextRef context = UIGraphicsGetCurrentContext();

if (orient == UIImageOrientationRight || orient == UIImageOrientationLeft) {
    CGContextScaleCTM(context, -scaleRatio, scaleRatio);
    CGContextTranslateCTM(context, -height, 0);
}
else {
    CGContextScaleCTM(context, scaleRatio, -scaleRatio);
    CGContextTranslateCTM(context, 0, -height);
}

CGContextConcatCTM(context, transform);

CGContextDrawImage(UIGraphicsGetCurrentContext(), CGRectMake(0, 0, width, height), imgRef);
UIImage *imageCopy = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

return imageCopy;
} 
```

但我不知道如何使用它

你能帮我么 ？

上传动作是

```
- (IBAction)pushUpload {

    NSData *imageData = UIImageJPEGRepresentation(imageview.image, 90);
    NSString *urlString = @"http://www.domain.com/upload.php";

    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
    [request setURL:[NSURL URLWithString:urlString]];
    [request setHTTPMethod:@"POST"];

    NSString *boundary = @"---------------------------14737809831466499882746641449";
    NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@", boundary];
    [request addValue:contentType forHTTPHeaderField:@"Content-Type"];

    NSMutableData *body = [NSMutableData data];
    [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[@"Content-Disposition: form-data; name=\"userfile\"; filename=\".jpg\"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[@"Content-Type: application/octet-stream\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[NSData dataWithData:imageData]];
    [body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [request setHTTPBody:body];

    NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
    NSString *returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];

    NSRange rangeValue = [returnString rangeOfString:@"http://" options:NSCaseInsensitiveSearch];

    if (rangeValue.length > 0){

        NSLog(@"%@", returnString);

    }

    else {
        NSLog(@"%@", returnString);
    }

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T17:24:31.907

尝试：

```
- (IBAction)pushUpload {

    NSData *imageData = UIImageJPEGRepresentation([self scaleAndRotateImage:imageview.image], 90);
    NSString *urlString = @"http://www.domain.com/upload.php";

    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
    [request setURL:[NSURL URLWithString:urlString]];
    [request setHTTPMethod:@"POST"];

    NSString *boundary = @"---------------------------14737809831466499882746641449";
    NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@", boundary];
    [request addValue:contentType forHTTPHeaderField:@"Content-Type"];

    NSMutableData *body = [NSMutableData data];
    [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[@"Content-Disposition: form-data; name=\"userfile\"; filename=\".jpg\"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[@"Content-Type: application/octet-stream\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[NSData dataWithData:imageData]];
    [body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [request setHTTPBody:body];

    NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
    NSString *returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];

    NSRange rangeValue = [returnString rangeOfString:@"http://" options:NSCaseInsensitiveSearch];

    if (rangeValue.length > 0){

        NSLog(@"%@", returnString);

    }

    else {
        NSLog(@"%@", returnString);
    }
 }
```

# c# - 使用 Lambda 按列表分组

> ID：13553437
> 
> 赞同：0
> 
> 时间：2012-11-25T17:21:23.303
> 
> 标签：c#, linq, lambda

我有一个简单的对象：

```
public class obj
    {
        public Int32 id { get; set; }

        public Int32 source { get; set; }
} 
```

现在我有一个列表：`List<obj>`10 个对象，其中 5 个源设置为`100`，3 个源设置为`200`，2 个源设置为`2500`

我需要按来源分组，这将产生三个项目`100`，`200`和`2500`。我还需要按计数订购，如下所示：

```
5 100
3 200 
2 2500 
```

最终结果是我想获得最高计数的源，在这种情况下将是`100`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T17:24:55.090

```
var res = lst.GroupBy(o=>o.source)
             .Select(grp=>new {Count=grp.Count(),Source=grp.Key}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T17:28:15.503

这将为您提供最高数量的来源：

```
int topSource = list.GroupBy(o => o.source)
                    .OrderByDescending(g => g.Count())
                    .First()
                    .Key; 
```

解释

*   按源值对项目进行分组（它将创建三个组）
*   按每个组中的项目计数对组进行排序
*   选择第一组（它将有最大项目数）
*   获取分组键（即源值）

# haskell - 使用 ParSec 整数函数给出一个 Int？

> ID：13553438
> 
> 赞同：0
> 
> 时间：2012-11-25T17:21:23.907
> 
> 标签：haskell, parsec

我需要使用 Parsec 从整数函数中获取 Int 类型。我现在的代码是

```
aTerm =  parens aExpression
     <|> liftM GetV identifier
     <|> liftM N integer 
```

其中 N 的类型是

```
N    :: Num a => a -> Expr a 
```

我得到的错误是

```
Shane.hs:227:18:
    Couldn't match expected type `Int' with actual type `Integer'
    Expected type: Text.Parsec.Prim.ParsecT String u0 Identity Int
      Actual type: Text.Parsec.Prim.ParsecT String u0 Identity Integer
    In the second argument of `liftM', namely `integer'
    In the second argument of `(<|>)', namely `liftM N integer'
Failed, modules loaded: none. 
```

是否可以在这里提取 Int 类型？以某种方式使用 fromInteger？从 Int 更改为 Integer 不是一种选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T17:23:39.383

这应该有效。

```
aTerm =  parens aExpression
     <|> liftM GetV identifier
     <|> liftM (N . fromInteger) integer 
```

# jquery - 针对低带宽的测试站点？

> ID：13553441
> 
> 赞同：1
> 
> 时间：2012-11-25T17:21:51.960
> 
> 标签：jquery, html, css

> **可能重复：**
> [如何测试站点的低带宽？](https://stackoverflow.com/questions/3396645/how-to-test-a-site-for-low-bandwidth)

有没有办法像在慢速互联网连接上一样测试我的网站 - 我需要模拟低速来测试网站的反应

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T17:25:30.557

[http://www.websiteoptimization.com/services/analyze/](http://www.websiteoptimization.com/services/analyze/)该网站分析您的网站并输出低带宽的加载时间和一些更有用的东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T18:36:25.897

有一个名为**Throttle** for Firefox 的插件可以做到这一点，您可以安装它，然后将下载或上传速度限制到某个限制。

问题是插件的创建者停止支持它，但是有这个非官方的修改版本[http://www.mediafire.com/?oqkcqdc0c8be4ll](http://www.mediafire.com/?oqkcqdc0c8be4ll)可以与较新版本的 Firefox 一起使用。

# javascript - 小数验证允许通过 Javascript 在按键事件上的小数点后两位数

> ID：13553444
> 
> 赞同：1
> 
> 时间：2012-11-25T17:22:25.987
> 
> 标签：javascript, asp.net, decimal

**我需要在按键**事件中使用纯 Javascript 限制用户在小数点后输入两位数。请帮助..

例如：123.45 -> 正确 123.45.6 -> 不正确

```
function checkDec(el) {
    var ex = /^[0-9]+\.?[0-9]*$/;
    if (ex.test(el.value) == false) {
        el.value = el.value.substring(0, el.value.length - 1);
    }
}

<asp:TextBox ID="txttest0" runat="server" onkeydown="checkDec(this);" ></asp:TextBox> 
```

我尝试过这种方式，但需要在 Keypress 中使用它。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T17:26:46.403

也许您可以使用 parseFloat 更正该值：

```
<input onchange="this.value = parseFloat(this.value) || ''" type="text" /> 
```

我将其更改为 onchange 因为否则它会阻止您输入 . 一点也不。然而，这意味着它只会在您模糊输入时验证一次。

**编辑**

* * *

那这样呢？

JS：

```
function validateFloatKeyPress(el, evt) {

    var charCode = (evt.which) ? evt.which : event.keyCode;
    if (charCode != 46 && charCode > 31
        && (charCode < 48 || charCode > 57)) {
        return false;
    }

    if (charCode == 46 && el.value.indexOf(".") !== -1) {
        return false;
    }

    return true;
} 
```

HTML：

```
<input onkeypress="return validateFloatKeyPress(this, event)" type="text" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T18:20:51.060

我也有同样的问题。这段代码解决了我的问题。它不仅可以格式化你的十进制数，还可以消除空格。试试这个。在我的情况下，我允许用户输入“+”或“-”，所以我也检查了这个验证。我已经调用了这个函数**onblur**事件。希望这对你有帮助，

```
<script type="text/javascript">
        function checkforvalidation() {
            var txtvalue = document.getElementById('<%=txtspherical.ClientID %>').value;
            var leftstr = "";
            var rightstr = "";
            var tempstr = "";
            var operator = "";
            txtvalue = txtvalue.replace(/\s/g, '');
            document.getElementById('<%=txtspherical.ClientID %>').value = txtvalue;
            if (txtvalue.indexOf(".") != -1) {

                leftstr = txtvalue.split(".")[0];
                rightstr = txtvalue.split(".")[1];
                if (leftstr.indexOf("-") == 0 || leftstr.indexOf("+") == 0) {

                    operator = leftstr.substr(0, 1);
                    tempstr = leftstr.substr(1, leftstr.length - 1);

                    leftstr = ltrim(tempstr, '0');

                    if (leftstr.length == 0) {
                        leftstr = '0';
                    }

                    if (rightstr.indexOf("-") == -1 || rightstr.indexOf("+") == -1) {

                        rightstr = ltrim(rightstr, '0');

                        rightstr = chkdecimalpoints(rightstr);
                        if (operator != null || operator != "") {
                            txtvalue = operator + leftstr + "." + rightstr;
                        }
                        else {
                            txtvalue = leftstr + "." + rightstr;
                        }
                        document.getElementById('<%=txtspherical.ClientID %>').value = txtvalue;
                    }
                    else {
                        document.getElementById('<%=txtspherical.ClientID %>').value = "";
                    }
                }
                else {

                    tempstr = leftstr.substr(0, leftstr.length);
                    leftstr = ltrim(tempstr, '0');
                    if (leftstr.length == 0) {
                        leftstr = '0';
                    }
                    if (rightstr.indexOf("-") == -1 || rightstr.indexOf("+") == -1) {

                        rightstr = rtrim(rightstr, '0');
                        rightstr = chkdecimalpoints(rightstr);
                        txtvalue = leftstr + "." + rightstr;
                        document.getElementById('<%=txtspherical.ClientID %>').value = txtvalue;
                    }
                }
            }
            else if (txtvalue.indexOf("-") == -1 || txtvalue.indexOf("+") == -1) {

                txtvalue = ltrim(txtvalue, '0');
                if (txtvalue.length == 0) {
                    txtvalue = '0';
                }
                if (operator != null || operator != "") {
                    txtvalue = operator + txtvalue + ".00";
                }
                // txtvalue = leftstr + "." + rightstr;
                document.getElementById('<%=txtspherical.ClientID %>').value = txtvalue;
            }
            else if (txtvalue.indexOf("-") == 0 || txtvalue.indexOf("+") == 0) {

                operator = txtvalue.substr(0, 1);
                tempstr = txtvalue.substr(1, leftstr.length - 1);
                txtvalue = alltrim(tempstr, '0');
                if (operator != null || operator != "") {
                    txtvalue = operator + txtvalue + ".00";
                    document.getElementById('<%=txtspherical.ClientID %>').value = txtvalue;
                }
            }
        }

        function chkdecimalpoints(rightstr) {
            if (rightstr.length == 0) {
                rightstr = '00';

                return rightstr;

            }
            else if (rightstr.length == 1) {
                rightstr = rightstr + '0';
                return rightstr;
            }
            else if (rightstr.length > 2) {

                var tempvar = rightstr.substr(2, 1);

                if (tempvar >= 5) {

                    tempvar = parseInt(rightstr.substr(1, 1)) + 1;
                    tempvar = rightstr.substr(0, 1) + tempvar.toString();
                    if (tempvar.length > 2) {
                        tempvar = tempvar.substr(0, 2);
                    }
                    return tempvar;
                }
                else {

                    tempvar = rightstr.substr(0, 2);
                    return tempvar;
                }
            }
            else {
                return rightstr;
            }
        }
        function ltrim(str, chars) {
            chars = chars || "\\s";
            return str.replace(new RegExp("^[" + chars + "]+", "g"), "");
        }
        function rtrim(str, chars) {
            chars = chars || "\\s";
            return str.replace(new RegExp("[" + chars + "]+$", "g"), "");
        }
        function alltrim(str, chars) {
            chars = chars || "\\s";
            return str.replace(new RegExp("^[" + chars + "]+$", "g"), "");
        }

    </script> 
```

HTML 源代码：

```
<asp:TextBox ID="txtspherical" runat="server" OnBlur="javascript:checkforvalidation();">
        </asp:TextBox> 
```

# javascript - 加载元素时执行javascript函数

> ID：13553448
> 
> 赞同：1
> 
> 时间：2012-11-25T17:22:29.947
> 
> 标签：javascript, html

当 HTML 元素从 AJAX 出现时，我如何执行 javascript 函数。这是我的想法，但它不执行闪烁：

```
 <!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Node JS</title>
    <style type="text/css">
      html , body {
        font: normal 0.9em arial , helvetica;
      }
    </style>
    <script src="http://0.0.0.0:3000/socket.io/socket.io.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript">

    var a=0;
    function blinkColor()
    {
      document.getElementById("red").style.background="red"
      setTimeout("setblinkColor()",500)
    }

    function setblinkColor()
    {
      a++;
      if (a<4){
      document.getElementById("red").style.background=""
      setTimeout("blinkColor()",500)
      }
      else{
      document.getElementById("red").style.background=""
      }
    }

     $(document).ready(function() {
      var socket = io.connect('http://0.0.0.0:3000');
      var out = "";
      socket.on('populate', function(data) {
        $.each(data, function(i, obj) {
    if(obj['Ping'] == "FALSE"){
          out += "<li id='red'><font color='red'>"+obj.Vardas+" is down..."+obj.Data+"</font></li>";
    }
    else{
          out += "<li><font color='green'>"+obj.Vardas+" is up......."+obj.Data+"</font></li>"; 
    }
        });
    $('#database').html(out);
      });
    });
    </script>
  </head>
  <body onload = "blinkColor()">
  <div style="float:right; overflow:scroll; height: 400px; width: 30%">
    <ul id ='database'></ul>
  </div>
  </body>
</html> 
```

在从套接字加载数组中，获取值并生成 html 列表对象。生成列表，但我希望当元素出现时它会闪烁几秒钟。我需要为此调用 blinColor() 函数。

我添加了 test.html 以使用 getElementsByClass 调用元素，但它不起作用......似乎很简单：

```
<html>
<head>
<script>
    var a=0;
    function blinkColor()
    {
      document.getElementsByClass('blink').style.background="red"
      setTimeout("setblinkColor()",500)
    }

    function setblinkColor()
    {
      a++;
      if (a<4){
      document.getElementsByClass('blink').style.background=""
      setTimeout("blinkColor()",500)
      }
      else{
      document.getElementsByClass('blink').style.background=""
      }
    }
</script>
</head>

<body onload="blinkColor()">
<h1 class="blink">Hello World!</h1>
<p class="blink">Hello World!</p>
</body> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-26T17:10:40.967

您的代码有几个问题：

*   getElementsByClass 应该是 getElementsByClassName
*   背景应该是背景颜色

示例代码：

```
var blinks=document.getElementsByClassName('blink');
for (var i=0,blinksCount=blinks.length;i<blinksCount;i++) {
    blinks[i].style.backgroundColor="red";
} 
```

# sql - SQL：与/或与多对多连接匹配

> ID：13553450
> 
> 赞同：2
> 
> 时间：2012-11-25T17:22:52.037
> 
> 标签：sql, postgresql, many-to-many

我是一个 SQL 新手，试图了解如何做一个稍微复杂的查询。在 Rails 3 应用程序中工作时，照片和术语之间存在多对多关系。设置非常简单：

```
photos: id

terms: id

photos_terms: photo_id | term_id 
```

我想做的是在任意一组术语中找到 AND 和 OR 匹配项。例如，在伪 SQL 中：

```
Select Photos where Term ID in (1 or 2) and (3 or 4 or 5) and (6). 
```

你怎么能写出这样的查询？作为参考，我使用的是 PostgreSQL。

* * *

*更新*响应鲁本斯的回答，这里有更多信息可能有助于解释分组，但我不确定它是否相关：

还有另一个模型，分类法，所以`taxonomies`表。每个术语都属于一个分类法，分类法可以是包容性的（意味着可以应用该分类法中的多个术语）或排他性的（意味着该分类法中的术语是互斥的，只有一个可以适用）。

表关系是这样的：

```
terms: id | taxonomy_id

taxonomy: id | inclusive(boolean) 
```

分组将是来自不同分类法的术语，您总是希望每个分组都有一个 AND 匹配。您希望在包含分类法的术语之间进行 AND 匹配，并且希望在排他分类法中的术语之间进行 OR 匹配。

再举一个伪代码示例，如果我们有以下内容：

```
Taxonomy: Color (inclusive = true)
Terms: Red, Blue, Green

Taxonomy: Location (inclusive = false)
Terms: NY, NJ, PA, MD 
```

我可能想这样查询：

```
Photos where terms in (red and blue) and (NY or NJ). 
```

那有意义吗？FWIW 这些术语就像高度结构化的标签。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T17:33:01.907

你可能想要类似的东西

```
SELECT photo_id FROM photos JOIN photos_terms ON (photos.id = photo_id)
WHERE term_id IN (1,2,3,4,5,6)
GROUP BY photo_id
HAVING
 bool_or(term_id IN (1,2))
 AND bool_or(term_id IN (3,4,5))
 AND bool_or(term_id = 6) 
```

（条件是可选的，但可能会加快速度）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T17:48:26.083

```
SELECT * FROM photos p
WHERE 1=1
AND EXISTS ( SELECT * FROM photos_term pt
    WHERE pt.photo_id = p.id AND term_id IN (1,2)
    )
AND EXISTS ( SELECT * FROM photos_term pt
    WHERE pt.photo_id = p.id AND term_id IN (3,4,5)
    )
AND EXISTS ( SELECT * FROM photos_term pt
    WHERE pt.photo_id = p.id AND term_id IN (6)
    )
    ; 
```

# javascript - 窗口加载中的 JavaScript

> ID：13553454
> 
> 赞同：1
> 
> 时间：2012-11-25T17:23:03.617
> 
> 标签：javascript, jquery

我想将下面的脚本设置为在页面加载时开始，这样如果输入了公司名称，增值税字段将自动显示，有人可以帮我吗？

```
//--></script> 
<script type="text/javascript"><!--
$('.colorbox').colorbox({
    width: 560,
    height: 560
});
$("input[name=company]").blur(function() {
  if($(this).val().length>0) {
    $("#vat").show();
    $("#fiscal").hide();
    $("#vat").find("input").eq(0).focus();
  } else {
    $("#vat").hide();
    $("#fiscal").show();
    $("#fiscal").find("input").eq(0).focus();
  }
});

//--></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T17:30:23.267

**尝试这个：**

```
$(function() {
    showvat($("input[name=company]"));
    $("input[name=company]").blur(function() {
        showvat($(this));
    });
});

function showvat(element) {
    if(element.val().length>0) {
        $("#vat").show(); 
        $("#fiscal").hide();
        $("#vat").find("input").eq(0).focus();
    } else {
        $("#vat").hide();
        $("#fiscal").show();
        $("#fiscal").find("input").eq(0).focus();
    }
} 
```

**注意：**

`$(function() {..});`是相同的`$(document).ready(function() {});`

**您还可以将该功能附加到`$(window).load(function(){})`;**

*   [$(document).ready(function() {..})](http://api.jquery.com/ready/)
*   [$(window).load(function(){..}](http://api.jquery.com/load-event/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T17:29:37.220

这是此工作的示例：http: [//jsfiddle.net/fPtJ8/](http://jsfiddle.net/fPtJ8/)

```
$(document).ready(function() {
    // original code here
}); 
```

这就是你要找的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T17:29:40.403

由于您使用的是 JQuery，我可能会使用

```
$(document).ready(function(){
   // your code...
}); 
```

或者

```
$(window).load(function(){
   // your code...
}); 
```

前者在`DOM`“准备好”进行操作后运行您的代码。后者在加载所有页面元素（图像等）后运行您的代码

查看此 SO 帖子以获取更多信息：[window.onload 与 $(document).ready()](https://stackoverflow.com/questions/3698200/window-onload-vs-document-ready)

# c# - TabControl 的 ContextMenu 在第二次打开时“闪烁”

> ID：13553456
> 
> 赞同：0
> 
> 时间：2012-11-25T17:23:10.073
> 
> 标签：c#, wpf, contextmenu, tabcontrol

My`ContextMenu`在再次打开时显示出奇怪的行为，即第二次“右键单击”菜单关闭并在新位置再次打开；菜单是 a 的一部分`TabControl`。

基本上，当我右键单击`TabControl`菜单时，菜单会正常打开，但如果我在菜单已经打开的情况下再次右键单击，旧的会消失，而新的（在新的鼠标位置）会在正常打开之前“闪烁”一次。看起来菜单很快打开，然后关闭，然后正常打开。

首先，我认为这可能与单击 时引发的另一个事件有关`TabControl`，但删除此事件并没有帮助。

如果有人想要一些代码，请询问。但我认为代码没有帮助，因为这里的相关代码完全是微不足道的。

**编辑：**

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Grid>
    <TabControl Height="287" HorizontalAlignment="Left" Margin="12,12,0,0" Name="tabControl1" VerticalAlignment="Top" Width="479">
        <TabControl.ContextMenu>
            <ContextMenu IsEnabled="True" StaysOpen="True">
                <MenuItem Header="Test1"></MenuItem>
                <MenuItem Header="Test1"></MenuItem>
                <MenuItem Header="Test1"></MenuItem>
                <MenuItem Header="Test1"></MenuItem>
                <MenuItem Header="Test1"></MenuItem>
                <MenuItem Header="Test1"></MenuItem>
                <MenuItem Header="Test1"></MenuItem>
                <MenuItem Header="Test1"></MenuItem>
            </ContextMenu>
        </TabControl.ContextMenu>
        <TabItem Header="tabItem1" Name="tabItem1">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="40*" />
                    <ColumnDefinition Width="150*" />
                </Grid.ColumnDefinitions>
            </Grid>
        </TabItem>
    </TabControl>
</Grid>
</Window> 
```

没有其他代码被添加到 .cs 文件中，并且发生了这种行为。

# c - C中的AES文件加密

> ID：13553462
> 
> 赞同：0
> 
> 时间：2012-11-25T17:24:00.507
> 
> 标签：c, gcc, windows-7, aes

我需要使用 GCC 在 Windows 7 平台上编译 MIT 大学发布的 AES C 源代码。起初我遇到了一些“丢失文件”错误，现在我解决了所有这些错误，我收到了一个链接器错误“未定义对 WinMain16 的引用”。

我正在使用代码块。

我做了什么：

*   将 aes.c 代码复制到带有代码块的新项目中
*   复制所需的头文件
*   编译 aes.c 文件

可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T18:18:01.137

你编译的代码可能只是一个库，导出函数如`aes_encrypt()`.

为了能够将其编译成可执行文件，您需要告诉库实际**执行**某些操作，就像[这里](https://stackoverflow.com/questions/6908785/openssl-libcrypto-aes-128-encoding-using-the-key)一样（只是为了理解这个想法；该代码可能使用不同的库）。

库通常提供“测试文件”，请尝试检查 MIT 库包。

还尝试使用该库查找 AES 实现。

## 更新

您引用的[源代码](http://stuff.mit.edu/afs/sipb/project/vlcplayer/old/src/ffmpeg/libavutil/aes.c)具有`main()`条件定义的功能，因此您需要定义`TEST`才能编译它，并且您需要编译*控制台应用程序*，而不是GUI Windows应用程序。Windows GUI 应用程序需要一个`WinMain()`函数，而控制台应用程序需要一个`main()`函数。

# php - split() PHP 方法用explode() 改变但仍然给我同样的错误

> ID：13553467
> 
> 赞同：0
> 
> 时间：2012-11-25T17:24:54.703
> 
> 标签：php, posix-ere

我为大学做一些 php 项目。需要创建简单的 PHP 聊天客户端。我这样做了，但是在我拆分字符串的响应文件中，我收到了以下消息：![在此处输入图像描述](../Images/e32c938861a905423ec1c7051f0ceeb7.png)

我试图用explode（）改变，但它仍然给我同样的错误。重新启动apache并清理但仍然有同样的错误。有人可以告诉我解决这个问题的方法是什么。

我的 response.php 文件是：

```
<?php
$lastreceived=$_POST['lastreceived'];
$room_file=file("room1.txt",FILE_IGNORE_NEW_LINES);
for($line=0;$line<count($room_file);$line++){
$messageArr=str_split("<!@!>",$room_file[$line]);
if($messageArr[0]>$lastreceived)echo $messageArr[1]."<br>";
}
echo "<SRVTM>".$messageArr[0];
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T17:30:22.173

改为使用`preg_split`。

```
array preg_split ( string $pattern , string $subject [, int $limit = -1 [, int $flags = 0 ]] ) 
```

在你的情况下：

```
preg_split ("/<!@!>/",$room_file[$line]); 
```

# postgresql - 没有小写的 PostgreSQL tsearch2

> ID：13553468
> 
> 赞同：2
> 
> 时间：2012-11-25T17:25:00.103
> 
> 标签：postgresql, case-sensitive

我使用 PostgreSQL 中的 tsearch2 从文本中提取 url。使用默认工具一切正常，但 YouTube 链接存在问题：我从解析器获得的网址都是小写的 - 而 YT 链接不能。

我做了一些研究，发现没有可以禁用降低的选项 - 我所能做的就是编写自己的解析器。

我对吗？也许有什么神奇的方法可以让解析器区分大小写？如果没有 - 是否有人编写了适当的解析器？如果也没有 - 你有什么建议，如何正确地做到这一点？:)

谢谢你的帮助，xaru

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T03:54:50.413

您可以通过区分大小写的 LIKE 重新检查 tsearch 结果。如果没有太多冲突，那么这个解决方案应该很快

```
SELECT * FROM (SELECT url
                  FROM your_tab
                 WHERE to_tsvector(..) @@ to_tsquery(..)
                 OFFSET 0) s
  WHERE s.url LIKE '%Bbx%' 
```

# php - 在不使用 session_start() 或任何替代方法的情况下使用 php 更改 url 路径

> ID：13553473
> 
> 赞同：0
> 
> 时间：2012-11-25T17:25:18.697
> 
> 标签：php, include, include-path

我在我的网站上运行 adsense 并使用 php 包括放置整个 adsense 代码的文件，名为 ga1.php、ga2.php、ga3.php 和 ga4.php。除了链接颜色外，代码中的所有内容都是相同的，这意味着在每次刷新页面或转到我网站上的任何其他页面时，都会使用新的包含，其中包含具有新链接颜色的 Google Adsense 代码。这一切都由以下代码处理：

```
<?php 
session_start();

if (isset($_SESSION['cnt'])){$_SESSION['cnt'] += 1; if( $_SESSION['cnt'] > 4)$_SESSION['cnt'] =1;}
else {$_SESSION['cnt'] = 1;}
include("/var/www/vhosts/MySite.com/httpdocs/includes/ga" . $_SESSION['cnt'] . ".php");

?> 
```

一切正常，除了一件事，我不想使用，`session_start()`因为它在标头响应中设置了以下内容：

```
Set-Cookie:   PHPSESSID=u8rvtkbjas94ifsa5okhskkim5; path=/
Expires:      Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control:no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma:   no-cache 
```

我可以`session_start()`在我的一些页面上，需要跟踪会话但不是全部，所以如果有的话，寻找一些解决方案来解决我的问题？

您的建议对我来说总是很有价值，并且总是非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T18:16:13.953

您可以使用 GET 命令将数字传递给其他页面。只需将 _SESSION 替换为 _GET 并添加到包含的末尾：

```
include("/var/www/vhosts/MySite.com/httpdocs/includes/ga" . $_GET['cnt'] . ".php?cnt=".$_GET['cnt']); 
```

或者，您可以使用以下命令获取 ga 后的数字：

```
$cnt=substr($_SERVER['REQUEST_URI'], -5, 1); 
```

希望这可以帮助！

# cocoa - tableCellView 内的 NSButton：如何对基于视图的 NSTableView/NSArrayController 使用“动作调用”

> ID：13553479
> 
> 赞同：0
> 
> 时间：2012-11-25T17:25:35.650
> 
> 标签：cocoa, core-data, interface-builder, nstableview, nsarraycontroller

对于基于视图的 NSTableView/NSarrayController：如何使用来自 tableCellView 内的 NSButton 的“动作调用”来更改实体的属性？

我有以下设置：

*   具有一列的“基于视图”的 NSTableview。
*   一个使用“实体模式”并绑定到核心数据实体的 NSarrayController。

![演示应用程序的图片](../Images/98578071a1fe25f012fc3c03606f0b86.png)

我想使用按钮中的操作调用来更新实体。例如，将“bool”属性设置为 true。

如果我只是使用“模型键路径”并将其设置为 objectValue.escaped，则该按钮被禁用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-06T00:44:02.490

我能够通过在按钮本身（NSTableCellView 中的视图类）上设置一个操作来实现此功能，然后将 NSTableView 的委托设置为实现选择器的类。然后它会按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T10:12:42.497

为了澄清我的问题：

如果我的数据源有另一个客户端，例如通过网络服务连接并且我想触发一个事件。我会使用实体属性来通知客户。因此，我向 tableCellView 添加了一个按钮。

我从连接到核心数据实体作为对象控制器的 NSTableView 和 NSArrayController 开始。文本字段、图像、复选框和弹出按钮在绑定到控件后立即起作用。但我发现没有可行的解决方案来绑定“按钮”。（我试图子类化控件、表格、单元格视图和按钮但没有成功。）

最后我切换到动作/委托方法。使用方法**rowForView:**、**itemAtRow:**和**表示对象：**可以修改实体的属性。

我对这种不优雅的解决方案（outlineView/分离代码）不满意。如果 arrayControl 有解决方案，请告诉我。

# multithreading - 使用 GCD 和 MagicalRecord 时出现臭名昭著的错误 133000

> ID：13553484
> 
> 赞同：1
> 
> 时间：2012-11-25T17:26:07.153
> 
> 标签：multithreading, core-data, grand-central-dispatch, magicalrecord

核心数据和多线程：

1.  在一种情况下保存
2.  等待完成
3.  获取对象 ID 并从其他上下文中请求它。

我收到错误 133000，后台线程上的对象为 NIL。好像保存没有完成。为什么？

```
    __block 章节数据 *ch1;
     [MagicalRecord saveInBackgroundWithBlock:^(NSManagedObjectContext *localContext) {
        ch1 = [ChapterData MR_createInContext:localContext];
        ch1.name = @"我的章节";
    } 完成：^{
        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
            NSError *错误；
            NSManagedObject *ch2ByObjectId = [[NSManagedObjectContext MR_contextForCurrentThread] existingObjectWithID:ch1.objectID error:&error];
            GHAssertNotNil(ch2ByObjectId, @"Ch2 by Ch1 对象 id 为 NIL");
        });

    }];

```

据我了解，这应该可行，但断言失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T15:52:36.070

我不确定您是否仍然遇到此问题，但这是我迟到的回复：您实际上并没有在 ManagedObjectContext 上调用保存方法。您只要求在“localContext”中创建对象，但不执行保存。

# python - GAE/Python 每个请求都会导致一个新进程

> ID：13553487
> 
> 赞同：0
> 
> 时间：2012-11-25T17:26:10.460
> 
> 标签：python, google-app-engine

当任何单个请求进入时，我都会收到此警告。似乎该进程将在处理请求后立即关闭。

由于我无法发布图像，我将复制并粘贴一些日志。

```
2012-11-25 09:12:37.441 /task/process-block 200 1609ms 0kb AppEngine-Google; (+http://code.google.com/appengine)
I 2012-11-25 09:12:37.440 This request caused a new process to be started for your application, and thus caused your application code to be loaded for the first time. This requ...

2012-11-25 09:12:26.054 /task/process-block 200 2160ms 0kb AppEngine-Google; (+http://code.google.com/appengine)
I 2012-11-25 09:12:26.053 This request caused a new process to be started for your application, and thus caused your application code to be loaded for the first time. This requ...

2012-11-25 09:12:14.036 /task/process-block 200 3156ms 0kb AppEngine-Google; (+http://code.google.com/appengine)
I 2012-11-25 09:12:14.036 This request caused a new process to be started for your application, and thus caused your application code to be loaded for the first time. This requ... 
```

据我了解，当没有请求进入时，一个处理应该至少停留 15 分钟，但上面的日志显示该进程被杀死的时间不超过 10 秒。目前我只能看到一个动态类型的实例（在我签出时我看不到任何实例运行前几个小时），即使它完成了前一个实例的处理，该实例也不会响应请求。相反，将生成一个新实例并响应请求。

是bug还是设置问题？我的应用程序使用 python 2.7 线程安全，我将最大空闲实例设置为 1，将最小挂起延迟设置为 15.0s。

### 更新：

我将 Max Idle Instances 更改为 50，问题仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T15:34:35.570

运行两天后，问题消失。被推入队列的任务是一项相当耗时的任务，因为它需要从互联网上检索一些数据，通常需要 1 秒以上。

现在任务的运行时间平均减少到200ms，因为它已经赶上了数据生产者，所以大部分时间它只是发现没有更多的数据需要处理并返回。

所以我猜测当GAE收到一个请求时，它会先预测这个请求是否能在1秒内完成。如果答案是肯定的，GAE 将使用现有的流程来处理它；否则它将启动一个新进程并保留旧进程以处理其他短时请求。这可以解释为什么总是有一个新进程，这也可以解释为什么某些实例有相当长的年龄但没有处理很多请求。

# asp.net-mvc-4 - MVC 4 Web API 模板 Visual Studio 2012 Express 中的无效字符

> ID：13553489
> 
> 赞同：0
> 
> 时间：2012-11-25T17:26:36.850
> 
> 标签：asp.net-mvc-4, visual-studio-2012, asp.net-web-api

我尝试在 Visual Studio 2012 Express Web 版中创建一个**MVC 4 Web API 项目**，但出现错误：**'。' 十六进制值 0x00，是无效字符。第 1 行位置 1。**这是从法语翻译过来的，所以在英语中可能不完全相同。在项目创建结束时弹出错误消息。项目已创建，但 FilterConfig.cs 和 RouteConfig.cs 为空。所以它不编译。

当我使用 Internet 应用程序模板而不是 Web API 时，我确实得到了同样的错误，但这次是 HomeController.cs 是空的。任何人都知道我应该怎么做？

# adb - 禁用滑动解锁

> ID：13553490
> 
> 赞同：2
> 
> 时间：2012-11-25T17:26:42.647
> 
> 标签：adb

我有一个已扎根的 Velocity Cruz T301。屏幕校准有点关闭，我无法访问主屏幕。（几乎不可能使用滑动解锁。）基本上，它会向右滑动，但不足以解锁。我知道应用程序“nolock”会解决这个问题，但由于我什至无法访问主屏幕，我不确定如何打开这个应用程序。

我尝试了三种不同的 ROM（Official Cruz、SJHill 和 Davik。）

如果我能找到 ADB shell 命令来禁用滑动锁定，我想我可以保存这个平板电脑。我试过adb shell input keyevent 82，但是不行。

我的 PC 上也安装了 Android Commander。有了这个，我可以安装应用程序，只是不能访问这些功能。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-23T07:43:44.703

要解锁，请键入

```
adb shell monkey --pct-motion 100 100 
```

这将向设备发送 100 个伪随机滑动事件；-)

为此，您需要按下电源按钮以使其处于活动状态。（当然也存在一个按键事件）

如需更复杂，请查看（不相关的）monkeyrunner：http: [//developer.android.com/tools/help/monkeyrunner_concepts.html](http://developer.android.com/tools/help/monkeyrunner_concepts.html)

解锁幻灯片后，如果您仍然无法点击应用程序启动它，请查看[how-to-use-adb-to-send-touch-events-to-device-using-sendevent-command](https://stackoverflow.com/questions/3437686/how-to-use-adb-to-send-touch-events-to-device-using-sendevent-command/18959654#18959654)。

# mysql - 在哪些情况下，我应该为多列创建一个索引，而不是为每一列创建一个单独的索引？

> ID：13553491
> 
> 赞同：1
> 
> 时间：2012-11-25T17:26:46.547
> 
> 标签：mysql, sql

在哪些情况下，我应该为多列创建一个索引，而不是为每一列创建单独的索引？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T17:29:41.050

如果您的查询条件包含多列。如果将所有列形式条件添加到索引。您将加快执行速度。使用`EXPLAIN`命令检查添加索引前后的执行计划。当然，不要添加太多列，尤其是不同类型的列，因为添加索引可能没有任何好处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T17:52:12.863

它不必是非此即彼的情况。假设您有一个 ORDERS 表：

```
orderid integer,
orderdate date,
etc... 
```

和一个 ORDERDETAIL 表

```
orderid integer,
lineno integer,
productID integer,
etc... 
```

您可能需要一个索引，`orderdetail.orderid`因为您将一直对其进行查找，并且 DBMS 将使用它来验证您的外键查找时的引用完整性`orders`。然而，你可能最终会做很多看起来像这样的选择：

```
select *
from orderdetail
where orderid=?
order by lineno 
```

在这种情况下，索引`orderdetail.orderid,orderdetail.lineno`将是有益的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T17:48:00.340

组合索引将有助于大多数场景。如果你有一张像下面这样的表格。

考虑下表。

用户

```
+-----------+--------------+------+-----+---------+-------+
| Field     | Type         | Null | Key | Default | Extra |
+-----------+--------------+------+-----+---------+-------+
| ID        | int(11)      | YES  |     | NULL    |       |
| USER      | varchar(100) | YES  |     | NULL    |       |
| EMAIL_ID  | varchar(200) | YES  |     | NULL    |       |
| MODE      | varchar(50)  | YES  |     | NULL    |       |
| TIMESTAMP | bigint(20)   | YES  |     | NULL    |       |
+-----------+--------------+------+-----+---------+-------+ 
```

在此表中，我们正在审核用户操作，例如 'SIGNIN' 、 'SIGNUP' 、 'CLOSE' 。在这种情况下，我们希望从该表中更快地获取详细信息。但这将有数以百万计的条目。

值在我的表中。

```
 select * from Users;
+------+----------+-----------------------+--------+---------------+
| ID   | USER     | EMAIL_ID              | MODE   | TIMESTAMP     |
+------+----------+-----------------------+--------+---------------+
|    1 | kannan   | kannanrbk.r@gmail.com | SIGNIN | 1353864896000 |
|    2 | bharathi | bharathikannan.r      | SIGNUP | 1353864934000 |
|    2 | mack     | mack@gmail.com        | SIGNIN | 1353865121000 |
|    2 | david    | david@gmail.com       | SIGNIN | 1353865130000 |
+------+----------+-----------------------+--------+---------------+ 
```

询问 ：

```
select EMAIL_ID from Users where TIMESTAMP > 1353864896000; 
```

解释输出：

```
 +----+-------------+-------+------+---------------+------+---------+------+------+-------------+
| id | select_type | table | type | possible_keys | key  | key_len | ref  | rows | Extra       |
+----+-------------+-------+------+---------------+------+---------+------+------+-------------+
|  1 | SIMPLE      | Users | ALL  | NULL          | NULL | NULL    | NULL |    4 | Using where |
+----+-------------+-------+------+---------------+------+---------+------+------+-------------+ 
```

查看解释输出

它检查表中的完整行。因为，这个查询不是作为`range`一个查询来执行的。我们要为`TIMESTAMP`column 创建索引。

解释为时间戳列创建索引后的输出。

```
 +----+-------------+-------+------+---------------+------+---------+------+------+-------------+
| id | select_type | table | type | possible_keys | key  | key_len | ref  | rows | Extra       |
+----+-------------+-------+------+---------------+------+---------+------+------+-------------+
|  1 | SIMPLE      | Users | ALL  | t_dx          | NULL | NULL    | NULL |    4 | Using where |
+----+-------------+-------+------+---------------+------+---------+------+------+-------------+ 
```

它仍然没有作为 range query 执行。因为我们只索引了`TIMESTAMP`column 。我们想创建一个组合索引`TIMESTAMP,EMAIL_ID`来执行这个查询作为范围一。

```
create index t_dx on Users(TIMESTAMP,EMAIL_ID); 
```

解释创建组合索引后的输出。

```
 +----+-------------+-------+-------+---------------+------+---------+------+------+--------------------------+
| id | select_type | table | type  | possible_keys | key  | key_len | ref  | rows | Extra                    |
+----+-------------+-------+-------+---------------+------+---------+------+------+--------------------------+
|  1 | SIMPLE      | Users | range | t_dx          | t_dx | 9       | NULL |    3 | Using where; Using index |
+----+-------------+-------+-------+---------------+------+---------+------+------+--------------------------+ 
```

现在，它作为范围查询执行并查看检查的行数，它只扫描超过给定时间标准。组合索引将有助于大型表。

# python - 生成输出而不丢失前导零

> ID：13553495
> 
> 赞同：1
> 
> 时间：2012-11-25T17:27:17.450
> 
> 标签：python, sage

我正在使用圣人数学（它使用 Python（或多或少））来做一些涉及密码学的工作。这涉及使用您异或生成密码或消息的二进制密钥。通常，输入数据是 nn 十六进制，因此我必须转换为二进制才能查看发生了什么。这是我拥有二进制文件后正在做的事情的一个例子。

```
my_cip=0b01101.....
my_mes=0b0110....
ot_mes=0b011...
my_key=0b0000....
key_fn=0b00....
altcip=0b011011..
print my_key.__xor__(ot_mes).binary() 
```

问题是，当我使用实用函数将 ascii 转换为二进制和十六进制转换为二进制时，结果会丢弃任何前导零。

我不知道有多少被丢弃，所以我一直在预测结果中应该有多少位，并在结果的前面贴上适当数量的零。

**这是我的问题！** 有没有办法强制将前导零包含在调用结果中（例如）？

```
`print Integer(0x6c73.....).binary() ?` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T17:35:42.733

*使用格式（）*

见文档[Python 格式文档](http://docs.python.org/2/library/functions.html#format)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T18:51:22.987

[您可以在此处](https://stackoverflow.com/questions/339007/python-nicest-way-to-pad-zeroes-to-string)找到类似的问题。它向您展示了如何很好地填充零。

# javascript - document.getElementById().value 没有设置值

> ID：13553497
> 
> 赞同：15
> 
> 时间：2012-11-25T17:27:26.120
> 
> 标签：javascript, html

浏览器是铬（在ubuntu下）

这是一段代码：（当然）警报消息显示正确的值。但是 points 元素没有得到正确的值，它实际上是空的。谁能告诉我为什么？

以下是点元素的定义方式。

```
<input type='number' id='points' value='0'/> 
```

这就是 javascript 代码应该如何填充它。

```
alert(request.responseText);

document.getElementById("points").value=request.responseText; 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-25T17:42:12.700

您的响应几乎可以肯定是一个字符串。您需要确保将其转换为数字：

```
document.getElementById("points").value= new Number(request.responseText); 
```

您可能会仔细查看您的 responseText。听起来您正在获得一个包含引号的字符串。如果您通过 AJAX 获取 JSON 数据，则通过`JSON.parse()`.

```
document.getElementById("points").value= new Number(JSON.parse(request.responseText)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-25T17:36:31.197

根据我对 Chrome 的测试：

如果将`number`输入设置为数字，则可以正常工作。

如果您将`number`输入设置为只包含数字的字符串，那么它可以正常工作。

如果您将`number`输入设置为包含数字和一些空格的字符串，则它将输入空白。

在您真正关心的服务器响应中的数据之后，您可能有一个空格或换行符。

改为使用`document.getElementById("points").value = parseInt(request.responseText, 10);`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T17:33:21.517

我能想象的唯一情况是，您在*Chrome*或*Safari等**webkit*浏览器上运行它，并且您的返回值 in包含一个*字符串 value*。**`responseText`**

 ***在那个星座中，无法显示该值（它将变为空白）

示例：http: [//jsfiddle.net/BmhNL/2/](http://jsfiddle.net/BmhNL/2/)

* * *

我的意思是，我期望一个错误/双重编码的字符串值。Webkit 浏览器对`type`=更加严格`number`。如果“仅”存在空白问题，您可以尝试隐式调用`Number()`构造函数，例如

```
document.getElementById("points").value = +request.responseText; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T17:36:20.183

问题显然不在于 javascript。这是一个快速片段，向您展示代码的工作原理。

```
document.getElementById('points').value = 100; 
```

[http://jsfiddle.net/eqTm2/1/](http://jsfiddle.net/eqTm2/1/)

如您所见，javascript 完美地将新值分配给输入元素。如果您能详细说明这个问题，将会很有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-03T13:56:06.460

**请参阅下面的代码片段** 

在 HTML 页面中

```
<input id="test" type="number" value="0"/> 
```

在 Java 脚本中

```
document.getElementById("test").value=request.responseText;// in case of String 
document.getElementById("test").value=new Number(responseText);// in case of Number 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-20T16:42:04.157

**@slashingweapon 以另一种方式回答：**
对我来说这有效：

```
document.getElementById("points").setAttribute('value', new Number(request.responseText)); 
```

或者

```
document.getElementById("points").setAttribute('value', new Number(JSON.parse(request.responseText))); 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-07-30T07:03:47.447

尝试使用，

```
$('#points').val(request.responseText); 
```***

# android - JSONArray 与 JSONObject

> ID：13553501
> 
> 赞同：2
> 
> 时间：2012-11-25T17:28:07.050
> 
> 标签：android, json, api, parsing

为什么我的 JSONArray 作为 JSONObject 返回？或者也许我错了。我正在尝试从位于[此处](http://free.worldweatheronline.com/feed/weather.ashx?q=11212&format=json&num_of_days=5&key=e85709956f235457122411)的 JSON 解析一些数据。我阅读了有关此主题的先前 SO 问题（例如问题问[在这里](https://stackoverflow.com/questions/12164161/android-json-jsonarray-cannot-be-converted-to-jsonobject)，我学到的是正确区分 JSONArray 和 JSONObject 很重要。

在我看来，两者都是，更具体地说，它看起来像 JSONObjects 的 JSONArray，每个都包含名称：值对。我正在尝试“深入挖掘以获取我的数据”，就像建议的答案一样，但是我在第 96 行得到了 JSONException，就是这个。我想也许“数据”不是数组的正确名称，但 JSON 仅在我使用该字符串时才会打印在 LogCat 中。任何帮助将不胜感激。

第 96 行 weatherData = json.getJSONArray("data");

我在下面粘贴了相关代码。

```
public String getWeatherData() {

    String url = "http://free.worldweatheronline.com/feed/weather.ashx?q="
            + zipCode
            + "&format=json&num_of_days=5&key=e8570995";

    // Create a JSON Parser instance
    JSONParser jParser = new JSONParser();

    // getting JSON String from URL
    JSONObject json = jParser.getJSONFromUrl(url);
    // Log.e("WeatherProvider", "Got JSON from URL");
    /*
     * try { currentCond = json.getString("data"); } catch (JSONException
     * e1) { // TODO Auto-generated catch block e1.printStackTrace(); }
     */

    try {
        // Get array of weather data
        weatherData = json.getJSONArray("data");

        Log.e("WeatherProvider", "JSONArray is not null");

        if (weatherData != null) {
            // loop through the data array
            for (int i = 0; i < weatherData.length(); i++) {
                JSONArray innerJSONArray = weatherData.getJSONArray(i);
                JSONObject object = innerJSONArray.getJSONObject(i);

                // Store each json item in a variable
                currentCond = object.getString("value");

                Log.e("WeatherProvider", "current conditin is "
                        + currentCond);
            }

        }

    } catch (Exception e) {
        e.printStackTrace();
    }

    return currentCond;
} 
```

}

日志猫：

```
11-25 12:03:33.439: W/System.err(4502): org.json.JSONException: Value {"weather":        [{"windspeedMiles":"19","winddirection":"W","date":"2012-11-25","precipMM":"0.0","winddirDe    gree":"280","winddir16Point":"W","weatherIconUrl":[{"value":"http:\/  \/www.worldweatheronline.com\/images\/wsymbols01_png_64\/wsymbol_0001_sunny.png"}],"tempMinC":"4","windspeedKmph":"31","tempMaxC":"7","weatherCode":"113","tempMaxF":"44","weatherDesc":[{"value":"Sunny"}],"tempMinF":"39"},{"windspeedMiles":"13","winddirection":"WNW","date":"2012-11-26","precipMM":"0.0","winddirDegree":"290","winddir16Point":"WNW","weatherIconUrl":[{"value":"http:\/\/www.worldweatheronline.com\/images\/wsymbols01_png_64\/wsymbol_0001_sunny.png"}],"tempMinC":"4","windspeedKmph":"21","tempMaxC":"8","weatherCode":"113","tempMaxF":"46","weatherDesc":[{"value":"Sunny"}],"tempMinF":"40"},{"windspeedMiles":"13","winddirection":"NW","date":"2012-11-27","precipMM":"4.5","winddirDegree":"320","winddir16Point":"NW","weatherIconUrl":[{"value":"http:\/\/www.worldweatheronline.com\/images\/wsymbols01_png_64\/wsymbol_0017_cloudy_with_light_rain.png"}],"tempMinC":"0","windspeedKmph":"21","tempMaxC":"8","weatherCode":"296","tempMaxF":"47","weatherDesc":[{"value":"Light rain"}],"tempMinF":"32"},{"windspeedMiles":"13","winddirection":"WNW","date":"2012-11-28","precipMM":"0.0","winddirDegree":"300","winddir16Point":"WNW","weatherIconUrl":[{"value":"http:\/\/www.worldweatheronline.com\/images\/wsymbols01_png_64\/wsymbol_0001_sunny.png"}],"tempMinC":"1","windspeedKmph":"21","tempMaxC":"7","weatherCode":"113","tempMaxF":"44","weatherDesc":[{"value":"Sunny"}],"tempMinF":"33"},{"windspeedMiles":"15","winddirection":"WNW","date":"2012-11-29","precipMM":"0.0","winddirDegree":"286","winddir16Point":"WNW","weatherIconUrl":[{"value":"http:\/\/www.worldweatheronline.com\/images\/wsymbols01_png_64\/wsymbol_0001_sunny.png"}],"tempMinC":"2","windspeedKmph":"23","tempMaxC":"4","weatherCode":"113","tempMaxF":"40","weatherDesc":[{"value":"Sunny"}],"tempMinF":"35"}],"current_condition":[{"observation_time":"04:33 PM","cloudcover":"75","pressure":"1013","visibility":"16","temp_C":"4","temp_F":"39","windspeedMiles":"19","precipMM":"0.0","winddirDegree":"270","winddir16Point":"W","weatherIconUrl":[{"value":"http:\/\/www.worldweatheronline.com\/images\/wsymbols01_png_64\/wsymbol_0002_sunny_intervals.png"}],"humidity":"48","windspeedKmph":"30","weatherCode":"116","weatherDesc":[{"value":"Partly Cloudy"}]}],"request":[{"type":"Zipcode","query":"11212"}]} at data of type org.json.JSONObject cannot be converted to JSONArray
11-25 12:03:33.449: W/System.err(4502):     at org.json.JSON.typeMismatch(JSON.java:96)
11-25 12:03:33.449: W/System.err(4502):     at org.json.JSONObject.getJSONArray(JSONObject.java:548)
11-25 12:03:33.449: W/System.err(4502):     at com.brightr.weathermate.providers.WeatherProvider.getWeatherData(WeatherProvider.java:90)
11-25 12:03:33.449: W/System.err(4502):     at com.brightr.weathermate.activities.MainActivity.onClick(MainActivity.java:49)
11-25 12:03:33.449: W/System.err(4502):     at android.view.View.performClick(View.java:2532)
11-25 12:03:33.449: W/System.err(4502):     at android.view.View$PerformClick.run(View.java:9293)
11-25 12:03:33.449: W/System.err(4502):     at android.os.Handler.handleCallback(Handler.java:587)
11-25 12:03:33.449: W/System.err(4502):     at android.os.Handler.dispatchMessage(Handler.java:92)
11-25 12:03:33.449: W/System.err(4502):     at android.os.Looper.loop(Looper.java:150)
11-25 12:03:33.449: W/System.err(4502):     at android.app.ActivityThread.main(ActivityThread.java:4263)
11-25 12:03:33.449: W/System.err(4502):     at java.lang.reflect.Method.invokeNative(Native Method)
11-25 12:03:33.449: W/System.err(4502):     at java.lang.reflect.Method.invoke(Method.java:507)
11-25 12:03:33.449: W/System.err(4502):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
11-25 12:03:33.449: W/System.err(4502):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
11-25 12:03:33.449: W/System.err(4502):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T17:34:33.177

它不是一个数组，而是一个 JSON 对象，由一个名为 weather 的数组组成。这应该可以解决问题：

```
weatherData = json.getJSONObject("data").getJSONArray("weather"); 
```

# c# - 无效的表达式术语“else” | ; 预期 (C#)

> ID：13553503
> 
> 赞同：1
> 
> 时间：2012-11-25T17:28:14.360
> 
> 标签：c#

这可能是迄今为止我遇到的最奇怪的错误之一。

```
private void BUEquals_Click(object sender, EventArgs e)
            {
                input2 = float.Parse(TBAnswer.Text);

                if (choice == 0)
                    TBAnswer.Text = (input1 + input2).ToString();
                else if (choice == 1)
                    TBAnswer.Text = (input1 - input2).ToString();
                    TBStored.Text = TBStored.Text + '-' + (input2).ToString();
                else if (choice == 2)
                    TBAnswer.Text = (input1 * input2).ToString();
                else
                    TBAnswer.Text = (input1 / input2).ToString();
                input1 = 0;
            } 
```

自从我添加第 9 行以来，第 10 行一直在抛出我无法理解的错误。“else”有一个红色下划线，表示它是一个无效的表达式术语，“if”有一个红色下划线，表示需要一个分号。

有任何想法吗？老实说，我在这里什么都没有。提前致谢！

编辑：好的，事实证明这是我犯过的最新手的错误。谢谢您的帮助！想知道我自己要花多长时间才能看到它……

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T17:29:39.670

您在第二个 case 语句周围缺少 { }。

```
 if (choice == 0)
       TBAnswer.Text = (input1 + input2).ToString();
   else if (choice == 1)
   {   // Added
       TBAnswer.Text = (input1 - input2).ToString();
       TBStored.Text = TBStored.Text + '-' + (input2).ToString();
   }   // Added
   else ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T17:30:17.417

您忘记在代码中用括号括起来两行。

```
else if (choice == 1)
   TBAnswer.Text = (input1 - input2).ToString();
   TBStored.Text = TBStored.Text + '-' + (input2).ToString();
else if (choice == 2) 
```

应该：

```
else if (choice == 1) {
   TBAnswer.Text = (input1 - input2).ToString();
   TBStored.Text = TBStored.Text + '-' + (input2).ToString();
} else if (choice == 2) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T17:32:13.653

第二个`else if`是两行，因此应该在一个块中。

由于您不使用块，因此编译器会看到该`if`语句是完整的，因为它没有立即跟随 else 或 else if。

要解决此问题，只需将第二个 else 设置为块：

```
 if (choice == 0)
                TBAnswer.Text = (input1 + input2).ToString();
            else if (choice == 1)
            {
                TBAnswer.Text = (input1 - input2).ToString();
                TBStored.Text = TBStored.Text + '-' + (input2).ToString();
            }
            else if (choice == 2)
                TBAnswer.Text = (input1 * input2).ToString();
            else
                TBAnswer.Text = (input1 / input2).ToString(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T17:41:45.490

这里逐行解释，留下没关系的行

```
private void BUEquals_Click(object sender, EventArgs e)
        {
          1:  input2 = float.Parse(TBAnswer.Text);

          2:  if (choice == 0)
          3:      TBAnswer.Text = (input1 + input2).ToString();
          4:  else if (choice == 1)
          5:      TBAnswer.Text = (input1 - input2).ToString();
          6:      TBStored.Text = TBStored.Text + '-' + (input2).ToString(); 
```

第 6 行可能存在一个问题，条件“if”如果需要执行超过 1 个语句，则必须使用花括号“{ }”将其括在一个块中。

```
 7:  **else** if (choice == 2) 
```

第 7 行有一个问题，因为 else 应该始终与 IF 结合使用。由于您没有对使用条件执行的语句使用括号，因此编译器发现 else 语句存在问题 -

```
 8:      TBAnswer.Text = (input1 * input2).ToString();
            else
                TBAnswer.Text = (input1 / input2).ToString();
            input1 = 0;
        } 
```

# xml-serialization - 即使“关于”对话框显示已加载，也无法在 Mono 中使用 System.XML

> ID：13553507
> 
> 赞同：0
> 
> 时间：2012-11-25T17:28:40.443
> 
> 标签：xml-serialization, monodevelop, system.xml

我在这里变得绝望；我正在尝试将 XML 序列化与 Mono 中的一些香草类一起使用。[DataContract] 和 [DataMember] 无法解析，使用 System.XML 是不可能的；它只是不在列表中，并且不会编译建议缺少的程序集引用。

在 About 对话框中，我可以清楚地看到 System.XML 库已加载。我怎样才能让我的项目可以访问它？

MonoDevelop 3.0.5
运行时：Mono 2.10.9 (tarball)，GTK 2.24.10，GTK# (2.12.0.0)，包版本：210090011

我真的不知道该怎么办了，请帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T12:57:27.890

About 对话框表明它已加载到 MonoDevelop 本身，因为 MD 使用 System.Xml。那里的程序集列表纯粹用于诊断 MD 问题。

您需要在 Solution Pad 中找到您的项目，然后找到“References”文件夹。这不是一个实际的文件夹，而是您的项目引用的程序集的表示。双击它以进入“编辑参考”对话框，您可以从中添加更多参考。您也可以通过“参考”文件夹和“项目”菜单中右键单击菜单中的“编辑参考”命令到达那里。

# c++ - 如何分配子类的方法成员指针？

> ID：13553514
> 
> 赞同：3
> 
> 时间：2012-11-25T17:29:45.047
> 
> 标签：c++, templates, subclass, member-function-pointers, mem-fun

我的问题有点复杂。我有一个具有 Ports 对象的类（e：Component）。当一个组件创建一个端口对象时，它会将其方法之一传递给端口构造函数。

方法签名：

```
typedef std::vector<std::string> (Component::*ComponentMethod)(std::vector<std::string>); 
```

如果我这样做，它工作正常：

```
// in class Component

std::vector<std::string> Component::test_method( std::vector<std::string> ) {
    std::cout << "Hello !\n";
    // Do stuff
}

// Port ctor : Port( ComponentMethod callback );
Port* p = new Port(&Component::test_method); 
```

嗯...现在，我的问题是我创建了 Component 类的子类，但我不知道如何将 sublcasses 方法传递给 Port。

```
// in class SubtypeComponent

std::vector<std::string> SubtypeComponent::test_method2( std::vector<std::string> ) {
    std::cout << "Hello !\n";
    // Do stuff
}

// Port ctor : Port( ComponentMethod callback );
Port* p = new Port(&SubtypeComponent::test_method2);
// ERROR :'( 
```

看起来很正常：我猜编译器需要精确的 Component (only) 方法。

--> 我正在寻找在端口中“动态”分配方法的解决方案（但我认为这是不可能的）

--> 也许另一个解决方案应该是使用模板？（定义“模板方法指针”而不是“组件方法指针”），但我不确定。

任何帮助，将不胜感激 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T17:36:03.480

指针到成员的转换起初有点反直觉。指向基成员的指向成员的指针可以隐式转换为指向派生类型的指向成员的指针（相反的变化），但反之则不然。

如果您真的考虑一下，它确实是有道理的：如果您有一个指向基成员的指针，那么它可以应用于派生类型，因为它保证有一个基子对象。相反，指向派生类型的成员的指针可能指向基类型中不存在的成员，因此转换没有意义。

这是您的设计中必须解决的问题，如果您想持有指向基类型的成员指针，则指针**必须**引用基中存在的成员（在这种情况下，表达式`&derived::member`是类型`T base::*`并且存在无需转换），并且它们之前不能存储在派生类型的指向成员的指针中（存储后，编译器无法知道指针是指基的成员还是派生的成员）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T17:39:34.943

您显然不能将指向派生类型成员的指针转换为指向基类成员的指针：这将允许在基对象上调用派生类型的成员而不会破坏类型系统！如果有的话，转换应该以相反的方式工作，即，您可能能够将指向 a 成员的指针转换为指向派生类型成员的指针（但是，我*认为*这也是不可能的，但我不确定）。

完全绕过这个问题的方法是使用类型擦除的函数类型来传递。例如，您可以使用 a`std::function<std::vector<std::string>(std::vector<std::string>)`并将其设置为引用您的对象。如果您确实需要传入不同的对象作为参数，您可以将指针或对基的引用传递`dynamic_cast<D&>(r)`给预期的类型（如果在错误的对象上调用异常，则处理异常）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-03T22:30:33.187

您可以使用模板适配器，因为指向成员的指针可以这样转换：

```
struct Base {
  bool foo(int);
};

struct Child : Base {
  bool foo(int);
};

// real functional type
using Function = std::function<bool(Base*,int)>;
// adapter template for children classes member functions
template <class T>
using MemberFunction = (T::*)(int);

// real user function
void user(Function function);
// adapter template for children classes member functions
template <class T>
void user(MemberFunction<T> function) {
  // pointers-to-members can be casted
  user(static_cast<MemberFunction<Base>>(function));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T20:00:20.037

最简单的方法可能是让 Component 有一个名为 example 的虚拟方法`test_method`。然后你可以将一个指向组件的指针传递给 Port 的构造函数，然后 Port 可以调用这个虚拟方法：

```
Component* c = new Component();
// Port ctor : Port( Component* component );
Port* p = new Port(c); // Port would then call c->test_method(); 
```

或者

```
SubtypeComponent* sc = new SubtypeComponent();
// Port ctor : Port( Component* component );
Port* p = new Port(sc); // Port would then call sc->test_method(); 
```

但是，如果由于某种原因这不能给您足够的灵活性，那么还有另一种方法可以解决您的问题：您需要传递一个类型而不是方法指针。然后，此类型保存方法（和对象，因为没有对象就不能调用方法）。这是这种类型的一个示例（如果您有可用的 C++11，您也可以使用 std::function）：

```
class Handler {
    public:
    virtual std::vector<std::string> handle (std::vector<std::string> arguments) = 0;
};

template <class C> class Method: public Handler {
    C* object;
    std::vector<std::string> (C::*method) (std::vector<std::string>);
    public:
    Method (C *object, std::vector<std::string>(C::*method)(std::vector<std::string>)) {
        this->object = object;
        this->method = method;
    }
    virtual std::vector<std::string> handle (std::vector<std::string> arguments) {
        // call the method
        return (object->*method) (arguments);
    }
}; 
```

现在您修改您的 Port 类构造函数以将指向 Handler 的指针作为参数。然后你可以写：

```
Component* c = new Component();
// Port ctor : Port( Handler* handler );
Port* p = new Port(new Method<Component>(c, &Component::test_method)); 
```

和

```
SubtypeComponent* sc = new SubtypeComponent();
// Port ctor : Port( Handler* handler );
Port* p = new Port(new Method<SubtypeComponent>(sc, &SubtypeComponent::test_method2)); 
```

也看看这些问题：
[C++ member function pointers in class and subclass](https://stackoverflow.com/questions/7574430/c-member-function-pointers-in-class-and-subclass)
[Method pointer cast](https://stackoverflow.com/questions/6307566/method-pointer-casting)

# grails - 如何从插件将控制器脚手架到域类？

> ID：13553516
> 
> 赞同：2
> 
> 时间：2012-11-25T17:29:56.947
> 
> 标签：grails, plugins, scaffolding

我安装了一个插件，并想从插件中构建一个域类。对于我的项目自己的域类`Foo`，我添加`scaffold = true`到`FooController`. 如果我尝试这样做，它会显示在控制器列表中，但没有生成视图（404 错误）。我在控制器中导入了类。

知道什么是错的或如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T18:25:30.747

Try to scaffold using class name:

```
static scaffold = DomainClassFromPlugin 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-09T21:03:04.143

如果您是插件编辑器，您应该可以在 BuildConfig.groovy 中添加脚手架插件

```
 compile ":scaffolding:2.0.1" 
```

然后应该对域类运行您的**generate**或**generate-all**命令以创建控制器和/或视图。

现在，如果您无权访问插件源，那么从使用具有您想要搭建的域的插件的应用程序中，我认为您将无法访问。您必须自己编写代码。

# asp.net - ASP.NET 母版页中的 POST 方法

> ID：13553519
> 
> 赞同：0
> 
> 时间：2012-11-25T17:30:19.350
> 
> 标签：asp.net, html, vb.net

这是来自 blueimp File Upload 的代码片段。似乎对`<form action="FileTransferHandler.ashx" method="post" enctype="multipart/form-data">`我不起作用。

我正在使用母版页。当我`<form action="FileTransferHandler.ashx" method="post" enctype="multipart/form-data">`从页面中删除并添加`action="FileTransferHandler.ashx" method="post" enctype="multipart/form-data"`到`form`母版页的标签时。它开始工作。为什么？？

```
 <div id="fileupload">
        <form action="FileTransferHandler.ashx" method="post" enctype="multipart/form-data">
            <div class="fileupload-buttonbar">
                <label class="fileinput-button">
                    <span>Add files...</span>
                    <input type="file" name="files[]" multiple="multiple" />
                </label>
                <button type="button" class="delete button">Delete all files</button>
                <div class="fileupload-progressbar"></div>
            </div>
        </form>
        <div class="fileupload-content">
            <table class="files"></table>
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T23:32:27.023

正如您所注意到的，`Master Page`有一个 (server side) `form`。您不能嵌套表单 - 这是您`<form/>`在（内容）页面中添加（附加）标签时所做的事情。

你可以——

*   将按钮的[`PostBackUrl`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.postbackurl.aspx)属性设置`Post`为其他目标。

*   为页面使用不同的`Master Page`（或根本不使用）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-28T10:51:00.650

您也可以从内容页面使用它。

您所要做的就是在内容页面中用 div 标签替换表单标签。它对我有用。

# java - 休眠 ID 映射

> ID：13553523
> 
> 赞同：0
> 
> 时间：2012-11-25T17:30:46.870
> 
> 标签：java, hibernate, mapping

我想知道为什么 hibernate 将 id 映射到单独的类中，这很烦人！

所以，我有这张表 Productlanguages ，其中每一行都有一个 id。这个 id 设置为自动递增，所以通常我不必自己添加它。然而，休眠自动映射添加了一个带有以下代码的新类 ProductlanguageId：http: [//pastebin.com/Dwy17BX1](http://pastebin.com/Dwy17BX1)。

现在 productlanguages 的 id 被设置为这个类的一个对象。

谁能告诉我为什么hibernate创建了这个类以及我应该如何使用这个类？因为我真的不知道。

**编辑：** 我发现这是因为这个表的主键是由三列组成的。您可以在[此屏幕截图](https://i.stack.imgur.com/614lH.png)中看到这一点： ![在此处输入图像描述](../Images/b4957f1177a758008d4c8e52bdacd31d.png)

但是，我仍然不知道如何创建这个Id，因为ProductlanguageId类中的id需要自动生成。事实并非如此。谁能告诉我如何确保这是自动完成的？

我已经使用 netbeans 自动生成了映射。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T17:34:02.457

为什么需要使用嵌入式复合 ID？如果它是嵌入的，那​​么您实际上可以采用两种方式 - 要么使用来自同一类的字段（但是你会遇到问题，例如在通过 id 获取对象期间），或者通过添加额外的类（你是如何做到的）。

但这一切只有在您使用复合 ID 时才需要，如果您的 ID 只是一个整数，您可以使用本机 ID 生成器，您不需要为此创建单独的类。

# java - swing默认选择文本

> ID：13553524
> 
> 赞同：1
> 
> 时间：2012-11-25T17:30:48.997
> 
> 标签：java, swing, focus, jtextfield, jtextarea

默认情况下，有什么方法可以在事件发生时`JTextField`自动选择文本？`JTextArea``focusGained`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T17:33:04.313

你刚刚说了怎么做——一个 FocusListener 的 focusGained 事件。

然后，您可以通过 FocusEvent 的方法获取其焦点已获得的 JComponent，然后在其上`getSource()`调用该`selectAll()`方法。

就像是：

```
FocusAdapter selectAllFocusAdapter = new FocusAdapter() {
  public void focusGained(FocusEvent e) {
    final JTextComponent tComponent = (JTextComponent) e.getSource();
    SwingUtilities.invokeLater(new Runnable() {

      @Override
      public void run() {
        tComponent.selectAll();
      }
    });
    tComponent.selectAll();
  }
};

myJTextField.addFocusListener(selectAllFocusAdapter);
otherJTextField.addFocusListener(selectAllFocusAdapter);
myTextArea.addFocusListener(selectAllFocusAdapter); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-25T17:34:15.040

这就是你需要的：

```
jTextField1.selectAll(); 
```

更多内容如下：

```
jTextField1.addFocusListener(new FocusListener() {

        @Override
        public void focusGained(FocusEvent e) {
            if(jTextField1.getText().equals(initialText))
                //jTextField1.setText("");
                jTextField1.selectAll();
        }

        @Override
        public void focusLost(FocusEvent e) {
            if(jTextField1.getText().equals(""))
                jTextField1.setText("whatever");
        }
    }); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-25T17:35:45.073

你期待像

```
 class MyFocusTextField extends JTextField {
    {
        addFocusListener(new FocusListener() {

            @Override
            public void focusGained(FocusEvent e) {
                FocusTextField.this.select(0, getText().length());
            }

            @Override
            public void focusLost(FocusEvent e) {
                FocusTextField.this.select(0, 0);
            }
        });
    }
} 
```

# python - 如何通过示例计算给定算法的 O(n, x)？

> ID：13553526
> 
> 赞同：-1
> 
> 时间：2012-11-25T17:30:55.327
> 
> 标签：python, algorithm, computer-science, asymptotic-complexity

我想计算给定算法的运行时间 O(n, x) = Theta(n, x) 取决于 n 和 x 大量（> 100）个示例（算法需要多长时间 n 和 x ）。实际上有办法做到这一点吗？

我知道运行时间会随着 n 和 x (!) 的增加而增加，但我认为连贯性太复杂了，无法通过“手动”计算出 O(n, x)，因为 n 或 x mac 会像 n ^ x 一样增加，或者更糟。

顺便提一句。我最喜欢解决这个问题的语言是 Python 或 PHP。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T17:52:46.293

[有一个名为Eureqa](http://creativemachines.cornell.edu/eureqa)的免费工具可能会让您感兴趣。你可以给它数据，它会找到适合你数据的候选方程。例如，您在不同的输入大小上运行算法并记录每个的执行时间，然后将这些数据提供给 Eureqa。然后它将为您提供适合您数据的数学方程式。

许多算法的运行时间高度依赖于输入数据中的特定值。因此，这并不总是用于进行渐近分析的好方法，因为您只是不知道您的数据是否正在将算法推向极限。

但是，我们使用渐近分析作为达到目的的一种手段——我们经常希望选择一种*可能*在现实世界中对现实世界数据运行良好的算法。而且，这就像基准测试，但你会获得很棒的额外数学洞察力。另外，请记住，渐近分析本身有点让步，我们需要简化和降低我们的期望以获得一些简单到有用的答案。

观看他们的 youtube 视频[http://www.youtube.com/watch?v=NhC1Qb-PQ5Q](http://www.youtube.com/watch?v=NhC1Qb-PQ5Q)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T17:42:08.413

最好的方法是非常仔细地查看算法并分析每个步骤以计算平均和最坏情况运行时类。

如果这不可行，您可以使用相对较小的数字运行算法，并将它们相互比较。如果运行时间按任何参数的顺序是指数的，那么即使相差 10 或 20，它也应该是显而易见的。简单地绘制运行时间，比如说

*   x = 10 和 y 在范围内 (50)
*   y = 10 和 x 在范围内 (50)
*   x 在范围内 (50)，y=x

应该给你一个粗略的想法。当运行时间变大时，您可以提前中止，例如大于`(1,1)`.

这应该会给您一个粗略的估计，但您应该清楚它既不精确（您的测试数据可能无意中遵循某些模式并遇到一个好的案例）也不足够（所涉及的因素可能非常小 - 您不会正确识别，比如说，`x + 0.0001 * 1.05^y`）。幸运的是，在许多情况下，指数算法的基数明显大于 1。

在 Python 中，您可以使用该[`timeit`](http://docs.python.org/3/library/timeit.html)模块来正确测量运行时。

# capistrano - capistrano 部署 - 基本命令失败

> ID：13553527
> 
> 赞同：1
> 
> 时间：2012-11-25T17:31:22.210
> 
> 标签：capistrano

我正在尝试按照[本指南](http://de.slideshare.net/mauricio.linhares/deploying-your-rails-application-to-a-clean-ubuntu-10)在 ubuntu（12.10）上使用 nginx、unicorn 和 capistrano 设置 rails 堆栈。我决定使用 RVM 进行 ruby​​ 安装。

到目前为止我安装的内容：

*   所有依赖库（imagemagick、git、mysql-server 等）
*   nginx (1.2.1)
*   rvm (1.17) 和 ruby​​ (1.9.2)
*   宝石：rails (3.1.6), unicorn (4.4.0), capistrano (2.13.5), ...

在本地，我进入

```
$ capify . 
```

有效（在顶部提到的部署指南中，在第 8 页）

但我被困在下一部分'cap deploy：setup'（在指南上，第12页）：

```
$ cap deploy:setup
/Users/chuck/.rvm/gems/ruby-1.9.2-p290@shop/gems/capistrano-2.13.5/lib/capistrano/configuration/variables.rb:26:in `set': you must specify exactly one of either a value or a block (ArgumentError)
  from ./config/deploy.rb:4:in `load'
  from /Users/chuck/.rvm/gems/ruby-1.9.2-p290@shop/gems/capistrano-2.13.5/lib/capistrano/configuration/loading.rb:93:in `instance_eval'
  from /Users/chuck/.rvm/gems/ruby-1.9.2-p290@shop/gems/capistrano-2.13.5/lib/capistrano/configuration/loading.rb:93:in `load'
  from /Users/chuck/.rvm/gems/ruby-1.9.2-p290@shop/gems/capistrano-2.13.5/lib/capistrano/configuration/loading.rb:172:in `load_from_file'
  from /Users/chuck/.rvm/gems/ruby-1.9.2-p290@shop/gems/capistrano-2.13.5/lib/capistrano/configuration/loading.rb:89:in `load'
  from /Users/chuck/.rvm/gems/ruby-1.9.2-p290@shop/gems/capistrano-2.13.5/lib/capistrano/configuration/loading.rb:86:in `block in load'
  from /Users/chuck/.rvm/gems/ruby-1.9.2-p290@shop/gems/capistrano-2.13.5/lib/capistrano/configuration/loading.rb:86:in `each'
  from /Users/chuck/.rvm/gems/ruby-1.9.2-p290@shop/gems/capistrano-2.13.5/lib/capistrano/configuration/loading.rb:86:in `load'
  from Capfile:4:in `load'
  from /Users/chuck/.rvm/gems/ruby-1.9.2-p290@shop/gems/capistrano-2.13.5/lib/capistrano/configuration/loading.rb:93:in `instance_eval'
  from /Users/chuck/.rvm/gems/ruby-1.9.2-p290@shop/gems/capistrano-2.13.5/lib/capistrano/configuration/loading.rb:93:in `load'
  from /Users/chuck/.rvm/gems/ruby-1.9.2-p290@shop/gems/capistrano-2.13.5/lib/capistrano/configuration/loading.rb:172:in `load_from_file'
  from /Users/chuck/.rvm/gems/ruby-1.9.2-p290@shop/gems/capistrano-2.13.5/lib/capistrano/configuration/loading.rb:89:in `load'
  from /Users/chuck/.rvm/gems/ruby-1.9.2-p290@shop/gems/capistrano-2.13.5/lib/capistrano/configuration/loading.rb:86:in `block in load'
  from /Users/chuck/.rvm/gems/ruby-1.9.2-p290@shop/gems/capistrano-2.13.5/lib/capistrano/configuration/loading.rb:86:in `each'
  from /Users/chuck/.rvm/gems/ruby-1.9.2-p290@shop/gems/capistrano-2.13.5/lib/capistrano/configuration/loading.rb:86:in `load'
  from /Users/chuck/.rvm/gems/ruby-1.9.2-p290@shop/gems/capistrano-2.13.5/lib/capistrano/cli/execute.rb:65:in `block in load_recipes'
  from /Users/chuck/.rvm/gems/ruby-1.9.2-p290@shop/gems/capistrano-2.13.5/lib/capistrano/cli/execute.rb:65:in `each'
  from /Users/chuck/.rvm/gems/ruby-1.9.2-p290@shop/gems/capistrano-2.13.5/lib/capistrano/cli/execute.rb:65:in `load_recipes'
  from /Users/chuck/.rvm/gems/ruby-1.9.2-p290@shop/gems/capistrano-2.13.5/lib/capistrano/cli/execute.rb:31:in `execute!'
  from /Users/chuck/.rvm/gems/ruby-1.9.2-p290@shop/gems/capistrano-2.13.5/lib/capistrano/cli/execute.rb:14:in `execute'
  from /Users/chuck/.rvm/gems/ruby-1.9.2-p290@shop/gems/capistrano-2.13.5/bin/cap:4:in `<top (required)>'
  from /Users/chuck/.rvm/gems/ruby-1.9.2-p290@shop/bin/cap:19:in `load'
  from /Users/chuck/.rvm/gems/ruby-1.9.2-p290@shop/bin/cap:19:in `<main>' 
```

而且它似乎不依赖于部署：设置。

我随机尝试了一些其他 capistrano 命令，但总是收到相同的错误消息“您必须准确指定值或块之一（ArgumentError）”

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T08:20:47.340

固定的。

这是一个愚蠢的错误，我在 deploy.rb 中有两次'set :scm, :git'。

# android - 如何使 NumberPicker 不再重复

> ID：13553531
> 
> 赞同：34
> 
> 时间：2012-11-25T17:31:49.273
> 
> 标签：android, repeat, recurring, numberpicker

是否有任何属性可以告诉（标准）NumberPicker 在其最后一个值之后停止？例如，如果我的 MinValue 是 0 而我的 MaxValue 是 5，NumberPicker 只会在 5 之后重复，这样用户就可以无休止地滚动。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-11-25T18:35:27.020

如果您设置了最小值/最大值，请尝试以下操作：

```
yourNumberPicker.setWrapSelectorWheel(false); 
```

这对你有用吗？

## 编辑

对于时间选择器：

```
timePicker.setOnTimeChangedListener(new TimePicker.OnTimeChangedListener() {
   public void onTimeChanged(TimePicker view, int hourOfDay, int minute) {
     if(hourOfDay>max) {
       TimePicker.setHour(max):
     }
     updateDisplay(hourOfDay, minute);
   }
}); 
```

它不是经过测试的代码，但这可能是您可以执行此操作的方式。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-05-25T07:08:09.770

这个[答案](https://stackoverflow.com/a/24963508/2630035)帮助了我：

```
public void updatePickerValues(String[] newValues){
  picker.setDisplayedValues(null);
  picker.setMinValue(0);
  picker.setMaxValue(newValues.length -1);
  picker.setWrapSelectorWheel(false);
  picker.setDisplayedValues(newValues);
} 
```

显然顺序很重要。

# python - 如何消除文件中的空行

> ID：13553532
> 
> 赞同：2
> 
> 时间：2012-11-25T17:31:57.233
> 
> 标签：python, file, lines

我正在做一个项目，我必须管理一个客户列表，该列表存储在一个 txt 文件中。我的问题如下，当我使用列表时，我将它上传到内存到一个`list=[]`变量中，然后我使用它，实际上是一个对象列表，当我尝试从列表中删除某一行时，我的问题就出现了，我将它从表格中删除，`list=[]`然后我用新列表重写了 txt 文件，但问题是我留下了空白行，当我尝试再次执行程序时，无法读取列表。我还想提一下，我做了一个功能来消除空白行，但它似乎不起作用，有什么帮助吗？

这是消除空行的功能

```
def elimina_client(self):
    f = open("clienti.txt","r")
    lines=f.readlines()
    f.close
    f = open("clienti.txt","w")   
    for line in lines:
        if line!="":
             f.write(line) 
```

这是重写文件的函数

```
def rescrie_clienti(self):
    """This function rewrites the clienti document"""
    with open(self.fisier2,'w') as f:
        for i in range(0,len(lista.lista_clienti)):
                if i==len(lista.lista_clienti)-1 :
                    s =str(lista.lista_clienti[i].get_identitate())+","+str(lista.lista_clienti[i].get_nume())+","+str(lista.lista_clienti[i].get_cnp()+","+str(lista.lista_clienti[i].get_filme_inchiriate())+","+str(lista.lista_clienti[i].get_inchirieri()))
                    f.write("\n")
                    f.writelines(s)
                else:
                    s =str(lista.lista_clienti[i].get_identitate())+","+str(lista.lista_clienti[i].get_nume())+","+str(lista.lista_clienti[i].get_cnp()+","+str(lista.lista_clienti[i].get_filme_inchiriate())+","+str(lista.lista_clienti[i].get_inchirieri()))
                    f.writelines(s) 
```

这是从内存列表中删除项目的实际功能

```
def sterge_client(self,ident):
    "Deletes a client from the list"
    k=0
    for element in self.lista_clienti:
        if element.get_identitate()==ident:
            self.lista_clienti.remove(element)
            k=1
    if k==0:
        raise RepositoryException(["Nu exista acest ID!"]) 
```

这是应该从文件中删除 a 行的函数，它实际上所做的是用`list=[]`没有给定元素的 new 重写列表，然后“消除”空格，但它似乎不起作用，任何人都知道为什么 ？

```
def sterge_client2(self,ident):
    lista.sterge_client(ident)
    self.rescrie_clienti()
    self.elimina_client() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-25T17:56:41.973

```
def elimina_client(self):
    with open("clienti.txt","r") as f:
        lines=f.readlines()

    with open("clienti.txt","w") as f:  
        [f.write(line) for line in lines if line.strip() ] 
```

带有迭代器的 Python3：

```
#!/usr/bin/env python3

def elimina(fsrc, fdst):
  with open(fsrc,'r') as src, open(fdst,'w') as dst:
    [ dst.writelines(line) for line in src if line.strip() ]

if __name__ == '__main__':
  elimina('text.txt','text_out.txt') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T17:43:43.690

在函数中删除该行。不要在您正在循环的列表上使用 remove() 。创建一个包含您想要的所有行的临时列表并将其返回：

```
def sterge_client(self,ident):
    "Deletes a client from the list"
    k=0
    templist = list()
    for element in self.lista_clienti:
        if element.get_identitate()!= ident:
           templist.append(element)
        else:
            k=1
    if k==0:
        raise RepositoryException(["Nu exista acest ID!"])

    return templist 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T17:46:03.717

迭代列表并从中删除元素并不是一个好主意。我会这样写：

```
self.lista_clienti = [element for element in self.lista_clienti if element.get_identitate()!=ident] 
```

这将创建所有元素的列表，除了具有给定 id 的元素，并设置在现有元素的位置。

如果您需要验证 - 只需在删除之前获取 lista_clienti 的长度并将其与之后的长度进行比较。如果它们相等 - 引发错误。

还有一些注意事项：

*   总是尝试使用`with`语句，在处理文件时，这将确保文件在任何情况下都关闭。您的`elimina_client`功能非常不安全（但当然最好将其删除）。
*   不要连接字符串，使用`+`, 使用格式语句或 .join() 方法。
*   我认为所有行都结束是个好主意`\n`——这也会变得`rescrie_clienti`更简单。

# jquery-mobile - jquery mobile一起移动所有滑块

> ID：13553539
> 
> 赞同：0
> 
> 时间：2012-11-25T17:32:36.733
> 
> 标签：jquery-mobile

我正在尝试做一个简单的鞋子尺寸转换器。我已经相应地更新了所有滑块的值，并且我知道如何获取它们的值，但是我希望能够在更改事件时一起更新滑块。

我该怎么做？

```
<!DOCTYPE html>
<html>
<head>
    <title>jQM Demo 1</title>
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
    <meta name="viewport" content="width=device-width">
</head>
<body>

<div data-role="page" id="mens" data-add-back-btn="true">

    <div data-role="header">
        <h1>Men's Size</h1>
    </div>

    <div data-role="content">
        <form action="#" method="get">
            <label for="europe" class="ui-hidden-accessible">Europe:</label>
            <input type="range" name="europe" id="europe" value="38" min="38" max="47" step="0.5" data-highlight="true" data-theme="b" data-track-theme="c" orientation="vertical"/>
            <label for="us" class="ui-hidden-accessible">USA:</label>
            <input type="range" name="us" id="us" value="5.5" min="5.5" max="12.5" step="0.5" data-highlight="true" data-theme="b" data-track-theme="c" orientation="vertical"/>

            <label for="uk" class="ui-hidden-accessible">UK:</label>
            <input type="range" name="uk" id="uk" value="5" min="5" max="12" step="0.5" data-highlight="true" data-theme="b" data-track-theme="c" orientation="vertical" />

            <label for="japan" class="ui-hidden-accessible">JAPAN:</label>
            <input type="range" name="japan" id="japan" value="23.5" min="23.5" max="30.5" step="0.5" data-highlight="true" data-theme="b" data-track-theme="c" orientation="vertical" />
        </form>
    </div>

<script>
    var self = this;
    this.sliderTouchUp = function() {
        var currentVal = $('#europe').val();
        console.log("val change to " + currentVal);
    };
    $('.ui-slider').live('mouseup', self.sliderTouchUp);
    $('.ui-slider').live('touchend', self.sliderTouchUp);

</script>

<div data-role="footer">

</div>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T18:43:44.927

这应该这样做，请测试它并告诉我这是你一直想要的：

```
 $("input#europe, input#us, input#uk, input#japan").live("slidestop", function() {
       $(this).mouseup();
       var changeVal = ($(this).val() - $(this).attr('min'))/($(this).attr('max') - $(this).attr('min'));
       changeSliders(changeVal, $(this).attr('id'));    
   });

   function changeSliders(changeVal, sliderID){
       $("input#europe, input#us, input#uk, input#japan").each(function(){
           var newValue = parseFloat($(this).attr('min')) + parseFloat(($(this).attr('max') - $(this).attr('min')))*changeVal;
           if($(this).attr('id') != sliderID) { 
               $(this).val(newValue);
           }
       });
       $("input#europe, input#us, input#uk, input#japan").slider('refresh');    
   } 
```

您可以添加任意数量的滑块，只需在此处添加/删除元素：

```
$("input#europe, input#us, input#uk, input#japan") 
```

也在函数的同一个地方。

[这](http://jsfiddle.net/Gajotres/PzTeX/)是一个活生生的例子。

# javascript - 俄罗斯方块 CSS 响应式、动态设计

> ID：13553548
> 
> 赞同：4
> 
> 时间：2012-11-25T17:33:12.050
> 
> 标签：javascript, jquery, html, css, responsive-design

假设我们有一些块：

```
<div class="block"></div> 
```

共有三种尺寸`block`：

```
<div class="block b1x1"></div>
<div class="block b2x1"></div>
<div class="block b1x2"></div> 
```

例如`b1x1`是`width:50px;height:50px;`，`b2x1`是`width:100px;height:50px;`

现在假设我们的网站上有很多块，它们完全混合在一起：

```
<div class="block b1x1"></div>
<div class="block b2x1"></div>
<div class="block b2x1"></div>
<div class="block b1x1"></div>
<div class="block b1x1"></div>
<div class="block b2x1"></div>
<div class="block b1x2"></div>
<div class="block b2x1"></div>
.. etc 
```

但是我们想让它们保持整洁，想象一下你用这个积木玩俄罗斯方块。

所以两个问题：

1.  如何使用 CSS/JS 组织块结构？任何已知的算法/jquery 插件/解决方案？从哪儿开始？
2.  当访问者更改浏览器窗口大小时该怎么办？（见图片）
3.  更多尺寸呢（例如 3x4 等）

![在此处输入图像描述](../Images/b8000ee4bb86ff0f88c4ae78100c2496.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T17:35:35.010

[jQuery Masonry](http://masonry.desandro.com/)怎么样？它用 jQuery 完成了你想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T17:35:46.773

试试 jquery 插件：`masonry`，随心所欲[http://masonry.desandro.com/](http://masonry.desandro.com/)

# android - 将进度/搜索栏比例更改为非线性（例如对数）

> ID：13553549
> 
> 赞同：12
> 
> 时间：2012-11-25T17:33:20.333
> 
> 标签：android, progress-bar, seekbar

是否可以将 Progress- 或 Seekbars 的缩放更改为非线性？

如果是这样，如何改变？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-07-31T08:52:36.183

例如：

```
weightSeekBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {

// place onStartTrackingTouch(SeekBar seekBar) and onStopTrackingTouch(SeekBar seekBar) here

@Override
public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
        userWeight = ((progress * progress) / (1000.0f * 1000.0f)) * (maxWeight - minWeight) + minWeight; // Approximate an exponential curve with x^2.
        }
    }); 
```

反之亦然：

```
weightSeekBar.setProgress((int) (Math.sqrt(((userWeight - minWeight) / (maxWeight - minWeight)) * 1000.0f * 1000.0f))); 
```

# c# - 将 XNA 3.1 转换为 XNA 4.0。StorageContainer.TileLocation

> ID：13553552
> 
> 赞同：2
> 
> 时间：2012-11-25T17:33:24.457
> 
> 标签：c#, file-io, xna, xna-4.0

我正在尝试在我的 XNA 4.0 游戏中保存高分信息。我已经阅读了如何使用 StorageContainer.TileLocation 的方法，这在 XNA 4.0 中显然不可用。这是 SaveHighScores 方法

```
 public static void SaveHighScores(HighScoreData data, string filename)
        {
            // Get the path of the save game
            string fullpath = Path.Combine(StorageContainer.TitleLocation, filename);

            // Open the file, creating it if necessary
            FileStream stream = File.Open(fullpath, FileMode.OpenOrCreate);
            try
            {
                // Convert the object to XML data and put it in the stream
                XmlSerializer serializer = new XmlSerializer(typeof(HighScoreData));
                serializer.Serialize(stream, data);
            }
            finally
            {
                // Close the file
                stream.Close();
            }
        } 
```

TitleLocation 是什么给了我一个错误，后来我发现它在 XNA 4.0 中不再可用

有什么方法可以在 XNA 4.0 中完成这项工作，或者如果没有，如何在 XNA 4.0 中完成而不是使用 StorageContainer.TitleLocation？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:07:14.627

尝试[StorageContainer.OpenFile 方法](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.storage.storagecontainer.openfile%28v=xnagamestudio.40%29.aspx)

# android - 通过xml根据正/负数更改textView颜色

> ID：13553555
> 
> 赞同：-1
> 
> 时间：2012-11-25T17:33:38.303
> 
> 标签：android, textview

我想知道是否有任何选项可以仅通过 xml 来描述基于文本视图颜色的正数或负数。如果通过 xml 不可能，那么我怎么能在 java 中做到这一点，因为我的代码使数字从正数变为负数，反之亦然，许多时间和颜色在应用程序启动时保持不变

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T17:39:09.703

像这样：（myTV 是你的`TextView`）

```
int number = Integer.parseInt(myTV.getText());
if(number<0){
     myTV.setTextColor(getResources().getColor(R.color.negativeColor));
}
else{
     myTV.setTextColor(getResources().getColor(R.color.positiveColor));
} 
```

在 XML 中没有办法做到这一点......

# php - Google Analytics 访问令牌在 3600 秒（1 小时）后过期

> ID：13553556
> 
> 赞同：0
> 
> 时间：2012-11-25T17:33:48.927
> 
> 标签：php, authentication, terminal, access-token, google-analytics-api

我正在使用 Google 分析 API (PHP) 来检索我的帐户信息，我使用以下方式检索了刷新令牌：

```
if (isset($_SESSION['token'])) {

// echo $_SESSION['token'].'<br />';

$authObj = json_decode($_SESSION['token']);
$accessToken = $authObj->access_token;
$refreshToken = $authObj->refresh_token;
$tokenType = $authObj->token_type;
$expiresIn = $authObj->expires_in;

echo 'access_token = ' . $accessToken;
echo '<br />';
echo 'refresh_token = ' . $refreshToken;
echo '<br />';
echo 'token_type = ' . $tokenType;
echo '<br />';
echo 'expires_in = ' . $expiresIn;
echo '<br />';
} 
```

之后我复制了返回的值`$refreshToken`，我注释了前一个函数并调用了如下方法：

```
$refreshToken  = '1/YZiV9J********vMjey8*****************';
$client->refreshToken($refreshToken); 
```

这很完美，但是一个小时后它通过一个错误告诉我访问令牌已过期。

我怎么知道访问令牌已过期，我找到了这篇[文章](https://stackoverflow.com/questions/10882294/refresh-a-access-token-with-google-analytics-api)，这家伙解决了他的问题，但他没有发布答案。以及如何使用相同的刷新令牌生成一个新令牌而无需再次通过授权过程，因为我正在通过终端运行我的代码。

我在下面发布了我项目的一个片段。

谢谢！

```
require_once 'google-api-php-client/src/Google_Client.php';
require_once 'google-api-php-client/src/contrib/Google_AnalyticsService.php';
$scriptUri = 'http://domainname.com';

session_start();

$client = new Google_Client();
$client->setApplicationName('Google Analytics project');

$client->setClientId('************.apps.googleusercontent.com');
$client->setClientSecret('S**********************1T');

$client->setRedirectUri($scriptUri);

$client->setDeveloperKey('**************************-1c');
$client->setScopes(array('https://www.googleapis.com/auth/analytics.readonly'));

$client->setAccessType('offline'); 
$client->setUseObjects(true);

if (isset($_GET['code'])) {  
$client->authenticate();  
$_SESSION['token'] = $client->getAccessToken(); 

$redirect = 'http://' . $_SERVER['HTTP_HOST'] . $_SERVER['PHP_SELF'];  
header('Location: ' . filter_var($redirect, FILTER_SANITIZE_URL));
}

if (isset($_SESSION['token'])) {    
$authObj = json_decode($_SESSION['token']);
$accessToken = $authObj->access_token;
$refreshToken = $authObj->refresh_token;
$tokenType = $authObj->token_type;
$expiresIn = $authObj->expires_in;
}

if (!$client->getAccessToken()) {  

$authUrl = $client->createAuthUrl();  
print "<a class='login' href='$authUrl'>Connect Me!</a>";
} else {  
// Create analytics service object. See next step below.
$analytics = new Google_AnalyticsService($client);
runMainDemo($analytics);
}

function runMainDemo(&$analytics) {  

try {    
// Step 2\. Get the user's first profile ID.    
$profileId = getProfileId($analytics);    
if (isset($profileId)) {      
    // Step 3\. Query the Core Reporting API.      
    $results = getResults($analytics, $profileId);      
    // Step 4\. Output the results.      
    printResults($results);    
    }  
} 
catch (apiServiceException $e) {    
// Error from the API.    
print 'There was an API error : ' . $e->getCode() . ' : ' . $e->getMessage();  
} 
catch (Exception $e) {    
print 'There wan a general error : ' . $e->getMessage();  
}
}

function getProfileId(&$analytics) {
    //My code to retrieve data
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T22:46:53.610

响应包含令牌的有效期。因此，您可以存储到期时间，并在发出请求之前对其进行检查。

在伪代码中：

```
$expiry = getDate().now + $expires_in;
//later
if(getDate().now > $expiry) {
   //our token is expired. get a new one
} 
```

避免在本地再次执行身份验证过程的唯一方法是让服务器代理您的身份验证请求，并将结果返回给您的客户端。通过代理请求，你基本上有一个 webapp 服务器位于某个地方（heroku、engineyard、ec2、你的后院 w/e），然后你向它发送令牌请求。它反过来向 google 发出身份验证请求，获取新令牌，并将结果返回给您。

这样做的全部目的是出于安全原因迫使您定期重新认证。如果有办法绕过它，它就不会很安全。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-27T15:20:08.767

这是我的解决方案！

```
function getProfileId(&$analytics) {

      for ($i=0;i<10;$i++){

             **My code to retrieve data**
             // I called the method 'refreshToken' as following

             $GLOBALS['client']->refreshToken($GLOBALS['refreshToken']); 
       }
} 
```

$GLOBALS 用于调用外部变量，请查看此[链接](http://php.net/manual/en/reserved.variables.globals.php)以获取有关 $GLOBALS 如何工作的更多信息。

所以每次我通过循环时，我都会生成一个新的访问令牌，所以我永远不会用完访问令牌。

# c# - 带有独立存储设置的 FormatException

> ID：13553562
> 
> 赞同：1
> 
> 时间：2012-11-25T17:34:46.007
> 
> 标签：c#, windows-phone-7, xna, windows-phone, isolatedstorage

将 a 序列化为`Dictionary<string,Person>`IsolatedStorageSettings 时遇到问题。我正在执行以下操作：

```
public Dictionary<string, Person> Names = new Dictionary<string, Person>();

if (!IsolatedStorageSettings.ApplicationSettings.Contains("Names"))
        {
            //Add to dictionary
            Names.Add("key", new Person(false,
                new System.Device.Location.GeoCoordinate(0, 0),
                new List<GeoCoordinate>() 
                {
                    new GeoCoordinate(35.8974, 14.5099),
                    new GeoCoordinate(35.8974, 14.5099),
                    new GeoCoordinate(35.8973, 14.5100),
                    new GeoCoordinate(35.8973, 14.5099)
                }));
            //Serialize dictionary to IsolatedStorage
            IsolatedStorageSettings.ApplicationSettings.Add("Names", Names);
            IsolatedStorageSettings.ApplicationSettings.Save();
        } 
```

这是我的 Person 类：

```
[DataContract]
public class Person
{
    [DataMember]
    public bool Unlocked { get; set; }
    [DataMember]
    public GeoCoordinate Location { get; set; }
    [DataMember]
    public List<GeoCoordinate> Bounds { get; set; }

    public Person(bool unlocked, GeoCoordinate location, List<GeoCoordinate> bounds)
    {
        this.Unlocked = unlocked;
        this.Location = location;
        this.Bounds = bounds;
    }
} 
```

该代码第一次运行，但是在第二次运行时，我`System.FormatException`在 if 条件下得到了一个。任何帮助将不胜感激，谢谢。

PS：我尝试了 IsolatedStorageSettings.ApplicationSettings.Clear() 但调用`Clear`也给出了`FormatException`.

我发现了一些新东西……异常发生了 25 次，或者至少是它在“输出”窗口中出现的次数。然而，在那之后，数据被完美地反序列化。如果它们不停止程序的执行，我应该担心异常吗？

编辑：这是发生异常时的调用堆栈：

```
mscorlib.dll!double.Parse(string s, System.Globalization.NumberStyles style, System.IFormatProvider provider) + 0x17 bytes  
System.Xml.dll!System.Xml.XmlConvert.ToDouble(string s) + 0x4b bytes    
System.Xml.dll!System.Xml.XmlReader.ReadContentAsDouble() + 0x1f bytes  
System.Runtime.Serialization.dll!System.Xml.XmlDictionaryReader.XmlWrappedReader.ReadContentAsDouble() + 0xb bytes  
System.Runtime.Serialization.dll!System.Xml.XmlDictionaryReader.ReadElementContentAsDouble() + 0x35 bytes   
System.Runtime.Serialization.dll!System.Runtime.Serialization.XmlReaderDelegator.ReadElementContentAsDouble() + 0x19 bytes  
mscorlib.dll!System.Reflection.RuntimeMethodInfo.InternalInvoke(System.Reflection.RuntimeMethodInfo rtmi, object obj, System.Reflection.BindingFlags invokeAttr, System.Reflection.Binder binder, object parameters, System.Globalization.CultureInfo culture, bool isBinderDefault, System.Reflection.Assembly caller, bool verifyAccess, ref System.Threading.StackCrawlMark stackMark)   
mscorlib.dll!System.Reflection.RuntimeMethodInfo.InternalInvoke(object obj, System.Reflection.BindingFlags invokeAttr, System.Reflection.Binder binder, object[] parameters, System.Globalization.CultureInfo culture, ref System.Threading.StackCrawlMark stackMark) + 0x168 bytes 
mscorlib.dll!System.Reflection.MethodBase.Invoke(object obj, object[] parameters) + 0xa bytes   
System.Runtime.Serialization.dll!System.Runtime.Serialization.XmlFormatReader.ReadValue(System.Type type, string name, string ns, System.Runtime.Serialization.XmlObjectSerializerReadContext context, System.Runtime.Serialization.XmlReaderDelegator xmlReader) + 0x138 bytes 
System.Runtime.Serialization.dll!System.Runtime.Serialization.XmlFormatReader.ReadMemberAtMemberIndex(System.Runtime.Serialization.ClassDataContract classContract, ref object objectLocal, System.Runtime.Serialization.DeserializedObject desObj) + 0xc4 bytes    
System.Runtime.Serialization.dll!System.Runtime.Serialization.XmlFormatReader.ReadClass(System.Runtime.Serialization.DeserializedObject desObj, System.Runtime.Serialization.ClassDataContract classContract, int membersRead) + 0xf3 bytes 
System.Runtime.Serialization.dll!System.Runtime.Serialization.XmlFormatReader.Deserialize(System.Runtime.Serialization.XmlObjectSerializerReadContext context) + 0x36 bytes 
System.Runtime.Serialization.dll!System.Runtime.Serialization.XmlFormatReader.InitializeCallStack(System.Runtime.Serialization.DataContract clContract, System.Runtime.Serialization.XmlReaderDelegator xmlReaderDelegator, System.Runtime.Serialization.XmlObjectSerializerReadContext xmlObjContext, System.Xml.XmlDictionaryString[] memberNamesColl, System.Xml.XmlDictionaryString[] memberNamespacesColl) + 0x77 bytes    
System.Runtime.Serialization.dll!System.Runtime.Serialization.CollectionDataContract.ReadXmlValue(System.Runtime.Serialization.XmlReaderDelegator xmlReader, System.Runtime.Serialization.XmlObjectSerializerReadContext context) + 0x5d bytes  
System.Runtime.Serialization.dll!System.Runtime.Serialization.XmlObjectSerializerReadContext.ReadDataContractValue(System.Runtime.Serialization.DataContract dataContract, System.Runtime.Serialization.XmlReaderDelegator reader) + 0x3 bytes  
System.Runtime.Serialization.dll!System.Runtime.Serialization.XmlObjectSerializerReadContext.InternalDeserialize(System.Runtime.Serialization.XmlReaderDelegator reader, string name, string ns, ref System.Runtime.Serialization.DataContract dataContract) + 0x10e bytes  
System.Runtime.Serialization.dll!System.Runtime.Serialization.XmlObjectSerializerReadContext.InternalDeserialize(System.Runtime.Serialization.XmlReaderDelegator xmlReader, System.Type declaredType, System.Runtime.Serialization.DataContract dataContract, string name, string ns) + 0xb bytes   
System.Runtime.Serialization.dll!System.Runtime.Serialization.DataContractSerializer.InternalReadObject(System.Runtime.Serialization.XmlReaderDelegator xmlReader, bool verifyObjectName) + 0x124 bytes 
System.Runtime.Serialization.dll!System.Runtime.Serialization.XmlObjectSerializer.ReadObjectHandleExceptions(System.Runtime.Serialization.XmlReaderDelegator reader, bool verifyObjectName) + 0xe bytes 
System.Runtime.Serialization.dll!System.Runtime.Serialization.XmlObjectSerializer.ReadObject(System.Xml.XmlDictionaryReader reader) + 0x7 bytes 
System.Runtime.Serialization.dll!System.Runtime.Serialization.XmlObjectSerializer.ReadObject(System.IO.Stream stream) + 0x17 bytes  
System.Windows.dll!System.IO.IsolatedStorage.IsolatedStorageSettings.Reload() + 0xa3 bytes  
System.Windows.dll!System.IO.IsolatedStorage.IsolatedStorageSettings.IsolatedStorageSettings(bool useSiteSettings) + 0x20 bytes 
System.Windows.dll!System.IO.IsolatedStorage.IsolatedStorageSettings.ApplicationSettings.get() + 0xd bytes 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T19:43:57.073

看起来 GeoCoordinate 可能无法序列化。您可以尝试使用两个双打存储来创建自己的类，然后在检索时将它们转换回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T14:39:55.560

首先确保您的代码将运行无异常而不保存到独立存储。然后你可以尝试只设置值而不是添加。

```
IsolatedStorageSettings settings = IsolatedStorageSettings.ApplicationSettings;
settings["Names"] = Names;
settings.Save(); 
```

# php - php代码中的警告

> ID：13553563
> 
> 赞同：1
> 
> 时间：2012-11-25T17:34:57.913
> 
> 标签：php, wordpress, wordpress-theming

> 警告：array_keys() 期望参数 1 是数组，字符串在第 34 行的 /home/hennacur/public_html/shop/wp-content/themes/montezuma/includes/image_meta.php 中给出
> 
> 警告：在第 40 行的 /home/hennacur/public_html/shop/wp-content/themes/montezuma/includes/image_meta.php 中为 foreach() 提供的参数无效

```
 function bfa_image_size() {
$meta = wp_get_attachment_metadata();
echo $meta['width']. '&times;' . $meta['height'];
    }

    function bfa_image_meta( $args = '' ) {

$defaults = array(
    'keys' => '',
    'before' => '', 
    'after' => '',
    'item_before' => '', 
    'item_after' => '',
    'item_sep' => ' &middot; ',
    'key_before' => '',
    'key_after' => ': ',
    'value_before' => '',
    'value_after' => '',
    'display_empty' => FALSE    
);

$r = wp_parse_args( $args, $defaults );
extract( $r, EXTR_SKIP );

$meta = wp_get_attachment_metadata();

$string_array = array();

       // All keys, alphabetically sorted, as provided by wp_get_attachment_metadata()
if( $keys == '' ) {
    $array_keys = array_keys( $meta['image_meta'] );  ---***line34***       
// Only keys specificed in parameter:
} else {
    $array_keys = array_map( 'trim', explode( ',', $keys ) );
}

foreach( $array_keys as $key ) { --***line 40***

    $value = $meta['image_meta'][$key];

    if( $display_empty === TRUE || ( $value != '' && $value != '0' ) ) {

        if( $key == 'created_timestamp' )
            // Transform timestamp into readable date, based on default WP date/time settings:
            $value = date( get_option('date_format') . ' - ' . get_option('time_format'), $value );

        // Prettify key
        $key = ucwords( str_replace( '_', ' ', $key ) );
        $key = $key == 'Iso' ? 'ISO' : $key;

        $key = str_replace( 
            array(
                'Aperture',
                'Credit',
                'Camera',
                'Caption',
                'Created Timestamp',
                'Copyright',
                'Focal Length',
                'ISO',
                'Shutter Speed',
                'Title'
            ),
            array(
                __( 'Aperture', 'montezuma' ),
                __( 'Credit', 'montezuma' ),
                __( 'Camera', 'montezuma' ),
                __( 'Caption', 'montezuma' ),
                __( 'Timestamp', 'montezuma' ),
                __( 'Copyright', 'montezuma' ),
                __( 'Focal Length', 'montezuma' ),
                __( 'ISO', 'montezuma' ),
                __( 'Shutter Speed', 'montezuma' ),
                __( 'Title', 'montezuma' )
            ),      
            $key
        ); 
```

我有上面的代码。出现警告的原因可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T17:37:50.530

试试这个（你可以看到这个警告，因为 $array_keys 的类型为字符串或其他）如果 stetmen：

```
 if(is_array($array_keys) && !empty($array_keys)) { // foreach stetment here } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T17:38:44.807

警告说明了一切。

`array_keys() expects parameter 1 to be array, string given`告诉你一个字符串被传递给`array_keys()`而不是一个数组。

因此，`$meta['image_meta']`可能不是一个数组。

因此`$array_keys`，当您尝试应用它时，不会将其设置为数组，从而导致您的下一个警告`foreach`。

# google-drive-api - 以矢量格式驱动图标资产

> ID：13553567
> 
> 赞同：1
> 
> 时间：2012-11-25T17:35:32.187
> 
> 标签：google-drive-api

Google 云端硬盘图标资产缺少 72 和 96 图标尺寸以符合 Android 要求。

是否也可以包含原始 Illustrator 文件？

# php - PHP DOM 从第一个 ul 元素获取项目

> ID：13553572
> 
> 赞同：3
> 
> 时间：2012-11-25T17:35:52.977
> 
> 标签：php, dom, element

我有一个看起来像这样的 html 文件：

```
<ul>
 <li>item 1</li>
 <li>item 2</li>
 <li>item 3</li>
</ul>
<ul>
 <li>smth 1 2 3..</li>
 <li>another</li>
<ul>
<ul>
 <li>smth 1 2 3..</li>
 <li>another</li>
<ul> 
```

我试图仅从第一个 ul 列表中获取元素。我正在使用此代码，但它返回错误：

```
<?php
    $dom = new DOMDocument();
            $dom->loadHTML($data);
            $postalCodesList = $dom->getElementsByTagName('ul');
            foreach ($postalCodesList->item(0) as $postalCodesList) {
                 echo $postalCodesList->nodeValue.'<br />';

            }
?> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-25T17:42:38.073

将 DomNode 传递给 foreach 将不允许您遍历其子节点，您可以轻松获取`li`s 列表并遍历它们。

```
<?php
    $dom = new DOMDocument();
    $dom->loadHTML($data);
    $postalCodesList = $dom->getElementsByTagName('ul');
    foreach ($postalCodesList->item(0)->getElementsByTagName('li') as $postalCodesList) {
        echo $postalCodesList->nodeValue.'<br />';                    
    }
?> 
```

[**演示**](http://codepad.org/49Uh3kjD)

# php - 如何在加密/加盐期间防止捕获 php ajax 登录

> ID：13553575
> 
> 赞同：0
> 
> 时间：2012-11-25T17:36:07.990
> 
> 标签：php, ajax, encryption, login, salt

如果密码在ajax之前被加密，那么如何阻止黑客捕获加密密码并使用它来登录？

是否应该事先从后端发送独特的盐？
难道黑客也不能捕获它吗？

**我的问题的背景：**
我完成了本教程
[http://www.wikihow.com/Create-a-Secure-Login-Script-in-PHP-and-MySQL](http://www.wikihow.com/Create-a-Secure-Login-Script-in-PHP-and-MySQL)
**教程浏览器端的摘要**
在将密码发送到后端之前对其进行加密它存储在数据库中

从那个链接，我脑海中出现的第一条评论是
“如何防止黑客捕获散列密码并登录？”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T17:40:00.220

没有。在客户端上散列密码是一个糟糕的主意。

浏览器和服务器之间的通信应使用 SSL（通过 HTTPS）正确加密。

客户端的散列有两个效果：

*   它通过暗示它可以替代 SSL 给网站所有者提供了一种虚假的安全感
*   它增加了对 JavaScript 的依赖

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T18:12:16.773

这有点傻，真的。正如 Quentin 所说，此时您所做的只是更改密码**，**您并没有让它变得更安全。现在，密码不是“私人字符串”，而是 sha1('私人字符串')。如果你对它进行十六进制编码，它恰好是'5ee913d43470d39020f15ac10ff9cf7a8761b55a'。

您所做的只是将一个密码换成另一个密码。

要安全地交换密码，最好的选择是使用 HTTPS。把手放下。如果由于某种原因您无法使 HTTPS 正常工作，或者您不想为证书付费，那么您将不得不发挥创造力。

您最难克服的问题是用户设置密码的初始阶段。在不使用公钥加密的情况下，您最好的选择是在表单中传递一个随机生成的对称密钥，并使用该密钥在客户端加密密码，并在服务器端解密。如果有人碰巧在观看交易，它可能会被破坏。但这是一个没有公钥加密就无法解决的问题。

设置密码后，可以非常安全地进行登录。当服务器为客户端呈现登录表单时，它可以生成一个随机数作为表单的一部分：

```
<input type='hidden' name='nonce' value='b45354f5b437c82beeed71d4d56ef3a47d0df2d3'/>
Username: <input type='text' name='username'/><br/>
Password: <input type='password' name='password'/> 
```

客户端使用 Javascript 和加密库（例如[crypt-js](http://code.google.com/p/crypto-js/)）创建散列消息。消息应包括时间戳、用户名和随机数。然后创建一个 HMAC。

```
var ts = Math.round((new Date()).getTime() / 1000);
var message = '' + ts + ':' + username + ':' + nonce;
var hash = CryptoJS.HmacSHA1(message, password); 
```

长话短说，散列是与密码一起散列的消息。

现在将消息和哈希发送到服务器。服务器必须反转该过程：

*   将消息解析为随机数、日期和用户名
*   确保随机数与提供给客户的随机数相同
*   确保日期是最近的（例如在最后 5 分钟内）
*   找回用户的密码
*   执行 HMAC 计算，并确保结果等于客户端提供的哈希。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T17:44:04.057

您发布的教程不仅在客户端散列......它们也在服务器端散列。

基本上在那个注册页面上，JavaScript 会对用户的密码进行哈希处理并将其发送到服务器。据推测，这是为了阻止某人在传输过程中获取密码。一旦散列密码被发送到服务器端，它就会被再次加盐和散列。

这种方法是安全的......但我不确定如果你使用的是 HTTPS，我是否看到了在客户端上散列的优点，你应该这样做。

# python - 如何使用 flash 为基于文本的 python 游戏创建 GUI？

> ID：13553578
> 
> 赞同：0
> 
> 时间：2012-11-25T17:36:44.473
> 
> 标签：python, flash, user-interface, integrate

我们有一个基于文本的 python 游戏（不使用 pygame），我们想给它一个 GUI。这个想法是有一个背景层图像（如小酒馆或商店）和其他图像层（例如出现的字符）。我们需要的另一件事是有一个用于信息显示的集成文本框，以及一种选择下一步要做什么的方法（你想去森林吗？（y/n））。

有没有一种快速实现这些目标的好方法？

如果没有，那我们该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T18:56:02.010

您可能需要考虑[pyjs](http://pyjs.org)。它允许您完全用 Python 编写基于 JavaScript 的 Web 应用程序。对于您的需求规范，这将是一个可行的平台。

# php - PHP + AJAX 发送数据（链接）麻烦

> ID：13553580
> 
> 赞同：1
> 
> 时间：2012-11-25T17:36:56.347
> 
> 标签：php, javascript, ajax, url-encoding

我使用自己的 AJAX 代码发送数据，它工作，AJAX 发送 & PHP 代码获取一个变量，但是：

当我尝试发送链接（例如：[http](http://abc.com/abc+/) ://abc.com/abc++ ）或类似文件夹名称的 var时，`+`它会返回不带`+`.

AJAX 发送数据`&data='+encodeURIComponent(data)+'`和 PHP 获取`urldecode($data);`

`+`我的问题是如何在不从字符串中删除字符的情况下从 POST 数据中获取 PHP 变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T17:43:22.683

[`rawurldecode()`](http://php.net/rawurldecode)在 PHP 中使用。[`rawurldecode()`](http://php.net/rawurldecode)不会将加号 (+) 解码为空格[`urldecode()`](http://php.net/urldecode)。

这样，无论您的 JavaScript 将加号字符作为文字字符串`+`还是作为编码字符串发送`%2B`，PHP 都会将其解码为加号字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T17:43:40.220

`+`在 URL 中使用时是特殊含义字符并替换空格 ( `)。如果你想传递`+`文字，你也必须对其进行编码（to `%2b`）。通常，您应该始终传递用于构建 URL 的任何内容`urlencode()`以避免出现问题。`

 `看看它是怎么回事：

```
echo urlencode(' + ');   // spaces around `+` 
```

给

```
+%2B+ 
```

更多关于[RFC 3986](http://www.faqs.org/rfcs/rfc3986.html)或[PHP 文档中的 url 编码](http://php.net/urlencode)`

# image - 是否有相当于背景大小的img（javascript）：封面？

> ID：13553581
> 
> 赞同：8
> 
> 时间：2012-11-25T17:37:07.053
> 
> 标签：image, css

我正在开发一种以网格形式展示照片的响应式设计。照片本身可以是所有纵横比和尺寸。此外，放置它们的网格单元也不是固定宽度，它们会随着您调整浏览器的大小而缩放。此外，每个网格单元虽然在宽度和高度上是动态的，但大小相同，而与其中的图像无关。

为了在这种高度动态的情况下正确显示照片，我找到了一个有效的方法：每张照片基本上都是一个 div，并将图像设置为背景图像。为了在动态大小的网格内正确缩放图像的未知宽度/高度，我使用了 CSS3 的 background-size:cover 功能。

最终结果非常棒，它在 UI 和显示方面完全符合我的要求。尽管如此，我对这个解决方案的可访问性降低并不满意：它不是 SEO 友好的，也不是插件友好的（想想社交插件）。因此，我试图重现我所拥有的工作情况，但这次使用良好的旧 img 标签而不是 CSS 背景。

我知道有 IE8 及以下用于 background-size:cover 的 polyfill，但我不是在寻找那个，我正在寻找基于 img 标签的解决方案。我还发现了一些使用绝对定位技术以及 CSS 的 clip 属性的文章，但请记住，我的设计没有什么是绝对大小的。

我想我正在寻找的是一个 javascript 例程，它具有 background-size:cover 用于动态调整大小的逻辑，在源（图像尺寸）和目标（显示框）的大小都是动态的情况下。

**是否有这样一个相当于 background-size:cover 的 JavaScript 可以在 img 标签上工作？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-07T00:47:43.003

这是旧的，但我最近发现了一个新的解决方案。

不要让 img 显示 div 的背景图像，而是创建一个图像：

```
<div>
    <img src="mypic.jpg"/>
</div>
<style>
    div {
        width:200px;
        height:200px;
    }
    img {
        box-sizing:border-box;
        width:100%;
        height:100%;
        background: url(mypic.jpg) no-repeat center center;
        background-size:cover;
        padding:50%;
    }
</style> 
```

将包含的 div 设置为您想要的图像的宽度/高度。然后将图像以 100% 的宽度/高度放入其中，并将 src 设置为您想要的 img。还要设置你想要的img作为img的背景图片。将背景大小设置为覆盖，并将填充设置为 50%。

诀窍是 50% 的填充。img 宽度/高度是固定的，因此当您增加填充时，图像会变得越来越小。50% 正是隐藏它需要多少，现在您只是看到图像的背景图像显示为您想要的方式，但它仍然可以访问！

[http://jsfiddle.net/t72xgbw0/](http://jsfiddle.net/t72xgbw0/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-10T04:02:21.767

考虑到可访问性和 SEO，我使用 jQuery 创建了一个非常相似的问题的解决方案，它没有重现背景封面的逻辑，而是利用了它。

图像实际上成为具有背景的容器的角色，并且以编程方式添加背景封面。

```
$imagesContainer.find('img').each(function(i, elem){
  $(elem).css({
    backgroundSize : 'cover',
    backgroundImage : 'url("' + $(elem).attr('src') + '")',
    backgroundPosition : 'center',
    display : 'block',
    height : '100%', // Or any size needed.
    width : '100%'
  });
  $(elem).removeAttr('src');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-08T11:22:46.920

我找到了一种使用 css 和 javascript 用图像覆盖容器的好方法：

HTML：

```
<div class="container">
  <img src="image.jpg"/>
</div> 
```

CSS：

```
img {
  position: absolute;
  min-width: 100%;   // To cover container
  min-height: 100%;  // To cover container
  top: 50%;          // To move image corner to center of container
  left: 50%;         // To move image corner to center of container
} 
```

Javascript：

```
$('img').css({
  'margin-top': -$('img').height()/2,   // To move to center of image
  'margin-left': -$('img').width()/2    // To move to center of image
}); 
```

确保在图像加载后运行 javascript。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-13T03:15:15.103

我相信你想做两件事：

1.  让图像填满窗口
2.  确保图像垂直和水平居中。

问题是（如果您想保持图像的纵横比）是您必须根据图像和浏览器大小将其垂直和水平居中。

`display:table`您可以使用 和 的组合以及`margin:0 auto`智能高度/宽度设置来制作纯 CSS 解决方案。

见小提琴：http: [//jsfiddle.net/5yVYM/3/](http://jsfiddle.net/5yVYM/3/)

```
.wrapper {
    display:table;
    text-align: center;
    margin:0 auto;
    width:100%;
    height:100%;
}

.wrapper div {
    display:table-cell;
    vertical-align:middle;
    max-width:100%;
    max-height:100%;
}

img {
    width:100%;
    height:auto;
} 
```

# asp.net - ASP.NET Site.css 不会改变

> ID：13553582
> 
> 赞同：5
> 
> 时间：2012-11-25T17:37:22.570
> 
> 标签：asp.net, css

我打开了一个新的 ASP.NET MVC 项目并运行它。之后，我在 Site.css 中更改了一些行。但是，当我再次运行项目并在浏览器中找到该元素时，我意识到样式信息在我更改之前是相同的。停止并重新运行，但也没有运气。

然后我打开了一个新项目并在运行该项目之前进行了更改并且它起作用了。现在我需要对 Site.css 进行另一项更改，但我也无法对其进行更改。任何想法我在这里做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-25T17:39:08.020

css 可能已被缓存。您需要刷新浏览器。Ctrl+ F5

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T17:52:08.447

更新：添加到**@cocre8or**的答案：在您的项目中，您似乎正在缓存。要使缓存**无效**，您可能有一个配置值。只需更改该值即可在网站上获取最新的 CSS。

# php - 在mysql和其他条件下选择最后插入的行

> ID：13553583
> 
> 赞同：0
> 
> 时间：2012-11-25T17:37:24.167
> 
> 标签：php, mysql

## 我有表名会计年度

* * *

这些是列

*   id（自动递增）
*   开始（财政年度开始日期）
*   end（财政年度结束日期）
*   活动（0（打开）或 1（关闭））

*   开始列包含日期，例如 2012-01-01

*   结束列包含日期，例如 2013-12-31

我想知道财政年度的开始和结束日期

## 这些是条件

1.  这是开放的，即0，
2.  它也应该是最后插入的。

## 这是我尝试过的查询请根据我的条件更新我的查询

```
SELECT CONCAT(BEGIN,'/',END) AS YEAR FROM fiscalyear WHERE active='0' ORDER BY `id` DESC LIMIT 1 
```

* * *

上面的查询以这种格式选择日期：2012-01-01/2013-12-31 但我想以这种格式打印选定的日期 2012-13..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T17:41:46.723

`id`如果您想要最后一行，您可以按自动递增的 DESC 顺序对表格进行排序。

```
SELECT `BEGIN`,`END` 
FROM `fiscalyear` 
WHERE `active`='0' 
ORDER BY `id` DESC
LIMIT 1 
```

需要注意的是BEGIN和END是MySQL中的保留字，应该用“`”表示为字段

至于打印日期，我推荐 PHP 类[DateTime](http://php.net/manual/en/class.datetime.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T19:54:41.580

## 这是我需要的查询

```
SELECT
CONCAT(DATE_FORMAT(`BEGIN`, '%Y'), '-',
DATE_FORMAT(`END`, '%y')) AS mydates 
```

FROM `0_fiscal_year` WHERE `closed`= 0 ORDER BY `id`DESC LIMIT 1

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T17:44:27.527

按`id`主键排序，并使用 a `LIMIT 1`，因此您只能获得最后一条记录。使用内置`DATE_FORMAT`格式化您的日期。

```
SELECT
    CONCAT(DATE_FORMAT(`BEGIN`, '%Y'), '-',
    DATE_FORMAT(`END`, '%Y')) AS mydates
FROM
    `fiscalyear`
WHERE
    `active` = 0
ORDER BY
    `id` DESC
LIMIT 1 
```

编辑：我将查询更改为连接年份，因此它将输出`2012-2013`. 结果将在`mydates`. 如果您希望结束年份`13`而不是`2013`格式，则在格式字符串中使用`%y`小写字母。`y`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T17:47:14.153

关于第二个问题，您可以将数据库中的 Begin 和 End 定义为 DateTime （我记得在 mySQL 中定义了一些类似的数据类型），然后您可以使用此函数：

```
/* Analyzes time-date and returns mktime!*/
function analyze_time_date($tdstr)
{
    // tdstr : 2010-08-12 11:41:14
    //         0000000000111111111
    //         0123456789012345678
    $year   = (int)substr($tdstr,0,4);
    $month  = (int)substr($tdstr,5,2);
    $day    = (int)substr($tdstr,8,2);

    $hour   = (int)substr($tdstr,11,2);
    $minute = (int)substr($tdstr,14,2);
    $second = (int)substr($tdstr,17,2);

    return mktime($hour,$minute,$second,$month,$day,$year);
}

/*  */
function format_time_date($tdstr,$format)
{
        return date($format,analyze_time_date($tdstr));
} 
```

当您想在数据库中插入新行时，您应该`'date time field name' = NOW()`在 SQL 查询中使用。

# android - 使用 Gson 反序列化 JSON Facebook 提要

> ID：13553584
> 
> 赞同：1
> 
> 时间：2012-11-25T17:37:38.583
> 
> 标签：android, json, gson

我有来自 Facebook 的 JSON 响应，其结构如下：

```
{
    "data": [
      {
         "id": "105458566194298_411506355589516",
         "message": "...",
         "type": "status",
         "created_time": "2012-11-25T17:26:41+0000",
         "updated_time": "2012-11-25T17:26:41+0000",
         "comments": {
            "count": 0
      },
      {
         "id": "105458566194298_411506355589516",
         "message": "...",
         "type": "status",
         "created_time": "2012-11-25T17:26:41+0000",
         "updated_time": "2012-11-25T17:26:41+0000",
         "comments": {
            "count": 0
      }
    ]
} 
```

我正在尝试使用 Gson 库对其进行反序列化：

```
public class FacebookPost {
    public String Message;
    public String Created_time;
} 
```

* * *

```
Gson gson = new GsonBuilder().create();

Type listType = new TypeToken<ArrayList<FacebookPost>>() {}.getType();

ArrayList<FacebookPost> userList = gson.fromJson(responseJsonString, listType); 
```

`"data": [ ]`如果响应不是包装在- 容器中，这显然会起作用。但是我如何告诉 gson`data`在 JSON 响应中查看呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T17:41:23.747

你应该这样做：

```
InputStream source = retrieveStream(url);
Gson gson = new Gson();
Reader reader = new InputStreamReader(source);
APIResponse response = gson.fromJson(reader, APIResponse.class); 
```

和：

```
Public class APIResponse{

    ArrayList <FacebookPost> data;

    public class FacebookPost {
        public String message;
        public String created_time;
    }
} 
```

# solr - Solr 4.0 是否能够使用连接对文档进行排序？

> ID：13553590
> 
> 赞同：4
> 
> 时间：2012-11-25T17:38:09.937
> 
> 标签：solr

我想使用不同 Solr 核心中的值对文档进行排序。用例是相当标准的：我有一个电影目录（缓慢更新）和一组个人电影推荐，它们每天计算并表示为浮点值。目前，我必须在 DIH（SQL 查询中的大连接）中对所有这些值进行非规范化，并每天重新加载完整索引（一个文档 = 一部电影），这是一个沉重的负担。我想在第二个核心中索引每日建议并继续对浮点值进行排序。

Solr 4.0 连接功能允许过滤数据（fq 参数）：它是否也适用于排序？如果是，确切的语法是什么？

# winforms - C# Winforms 自定义控件，propertychange 上的绑定不起作用并导致选项卡问题

> ID：13553592
> 
> 赞同：0
> 
> 时间：2012-11-25T17:38:15.210
> 
> 标签：winforms, c#-4.0, data-binding, custom-controls

我刚刚将使用 CSLA 的旧 .NET 1.1 Winforms 应用程序升级到 .NET 4.0 和支持使用 INotifyPropertyChanged 接口的更高版本的 CSLA。

这样做的很大一部分原因是数据绑定得到了改进——例如，能够在绑定时更新更改而不是在验证时进行更新（制表符关闭）。

我有自定义用户控件，NumberBox。本质上，它只是一个带有一些属性的文本框，例如数字类型、小数位数等。我已经公开了一个名为 BindableValue的类型**对象的公共属性。**正是这个属性，我将我的 CSLA 类（继承验证规则、属性更改和各种东西的标准 .NET 类）**整数**属性绑定到，在这种特殊情况下，它的类属性是整数。

我升级后的问题如下：

1.  如果我在我的数字框控件中输入一个值，例如 1234，它不会将该值推回它绑定到的类属性中，直到我关闭标签，即使我已经为自定义 BindableValue 属性配置了一个对象绑定源更新模式设置为属性更改。
2.  在 (1) 中输入值后，如果我返回并删除该值，我将被阻止关闭或单击数字框。我已将 VS2010 设置为在抛出 .NET 异常时抛出，但它没有中断。

我已经有一段时间没有做 WinForms 的东西了，所以我有点不知从何开始。任何提示以及解决方案将不胜感激。

**编辑：** 我已经尝试了许多不同的事情，但进展不快，现在真的很令人沮丧：

1.  我遵循了[MSDN](http://msdn.microsoft.com/en-us/library/ms229615%28v=vs.100%29.aspx)上的信息，即我添加了一个 ComplexBindingProperties 属性，在文本框的 private keyUp 事件处理程序中略有不同我引发了链接文章 OnBindableValueChanged() 所示的事件。但是，在所有情况下，我的事件 BindableValueChanged 始终为空。
2.  我阅读了与 (1) 类似的文章，但他们没有使用 EventHandler 声明事件，而是使用了 PropertyChangedEventHandler，尝试了相同的结果。
3.  我添加了 DefaultBindingProperty 属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T13:28:10.370

[您也可以在我的公司博客上阅读有关此经验的信息 - [OCC 博客 - 绑定问题](http://blog.oxfordcc.co.uk/dotnet-control-value-not-pushed-to-binding-source/)]

我终于想通了，所以想在这里分享它，以节省其他人在 Google 中阅读大量回复说它们有效但在 .NET 4.0 中似乎不再适用的单调乏味。

好的，我在 Google 上读到的很多东西一直告诉我，我的用户控件必须使用 EventHandler 或 PropertyChangedEventHandler 委托进行 Changed 事件——不同的页面表示不同的委托。我都试过了 - 失败了！

我在 .NET 4.0 中必须做的事情实际上要好得多。简单地说，就像我将用户控件绑定到的类一样，我必须实现 INotifyPropertyChanged 接口。然后在我的用户控件中，当我想推回我的源对象时，我刚刚引发了 PropertyChanged 事件（例如 PropertyChanged("BindableValue"); ），定义了接口，嘿，一切都很好了。

上面的内容要优雅得多，但不幸的是，谷歌索引的文章、论坛和帖子还没有赶上 .NET 4.0 的内容，所以所有现有的东西都会让你陷入死胡同和沮丧。我希望这可以节省其他人很多时间。

# python - OpenCV与python，捕获混淆

> ID：13553597
> 
> 赞同：0
> 
> 时间：2012-11-25T17:38:47.553
> 
> 标签：python, opencv

我买了一个树莓派并使用 Archlinux 映像 SD，我正在尝试学习计算机视觉，因为我打算将树莓派连接到一个 arduino 板上并做一些机器人。

我试图将 opencv 与 python 一起使用，所以我按照教程在 Archlinux 上安装 opencv 并尝试了以下代码：

```
import cv2.cv as cv

capture = cv.CaptureFromCAM(-1)
cv.SetCaptureProperty(capture,cv.CV_CAP_PROP_FRAME_WIDTH,  640)
cv.SetCaptureProperty(capture,cv.CV_CAP_PROP_FRAME_HEIGHT, 480)

img = cv.QueryFrame(capture)

print "Captured "
cv.SaveImage("output.jpg",img3) 
```

我有几个问题。我收到这些错误

```
VIDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument 
```

我认为它们是警告，因为执行结束并创建了“output.jpg”，但图像被弄乱了。我包括了图像，所以你可以看到它的样子。

此外，我可以将分辨率更改为 320x240，因为它只会创建一个全黑图像。

在过去的两天里，我一直在互联网上寻找解决方案，但我陷入了死胡同……所以我真的很感谢任何可以帮助我的人。

谢谢！![在此处输入图像描述](../Images/613209c4bacc3fd093dda79904d0a388.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:16:08.640

我认为我发现了我的问题......看起来如果我在打开相机后执行 time.sleep(3) 图像正在被正确捕获。

我不是 100% 确定是否是这样，但自从我这样做以来它一直在工作。如果这适用于我的下一次测试，我会及时通知你，但现在我建议这样做。

# facebook-graph-api - Graph API 调用次数限制

> ID：13553599
> 
> 赞同：2
> 
> 时间：2012-11-25T17:38:58.613
> 
> 标签：facebook-graph-api, limit

我计划开发一个应用程序，但开发人员告诉我每个 IP 每 600 秒有 600 次调用的限制。该应用程序有很多场景，这还不够。有没有办法以某种方式增加限制？或者 Facebook 是否提供任何高级帐户或可能具有没有此类限制的年费的东西？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T18:15:43.183

如果您超过或计划超过以下任何阈值，请与我们联系，因为您可能会受到附加条款的约束：（>5M MAU）或（>100M API 调用/天）或（>50M 印象/天）。来自：[https ://developers.facebook.com/policy/](https://developers.facebook.com/policy/)

每天 100M API 查询应该针对单个应用程序。所以这应该限制你，但我认为这并不重要。

另一件事，你在问题中提到的，我也在其他地方读过。

**我发现每 600 秒，每个令牌和每个 IP 有 600 次调用是关于它们阻止你的地方。**

来自：[http ://www.quora.com/Whats-the-Facebook-Open-Graph-API-rate-limit](http://www.quora.com/Whats-the-Facebook-Open-Graph-API-rate-limit)

请注意，它是**per token**。每个其他用户也有不同的访问令牌和 IP。如果它恰好是从服务器运行的 cron，那么只要您不断更改令牌，我仍然认为他们不会抓住您的 IP。

要实现的另一件事是实时更新 API，它会在发生变化时 ping 您，因此您不必运行 24*7 监控脚本。

PS：实时更新是错误的！亲身经历过。

# soundmanager2 - 在 soundmanager2 中创建播放列表

> ID：13553601
> 
> 赞同：2
> 
> 时间：2012-11-25T17:39:09.240
> 
> 标签：soundmanager2

如何使用来自**json**对象或**数组的数据在****soundmanager2**中创建播放列表？soundmanager2 是否有本机播放列表工具，还是我必须为每条记录编写自己的代码，如*createsound* () 和*destroysound* () ？

 ******* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T02:26:46.910

除非你想要一个[Muxtape 风格的播放列表](http://www.schillmania.com/projects/soundmanager2/demo/page-player/)，否则你将不得不自己制作一个。******

# svn - svn，从“trunk/project”布局切换到“project/trunk”

> ID：13553608
> 
> 赞同：0
> 
> 时间：2012-11-25T17:39:38.757
> 
> 标签：svn

不久前，我使用 cvs2svn 从 cvs 迁移到 svn。这在表单中创建了一个默认的 repo 布局：

```
/trunk
    /project1
    /project2
    ...
/branches
/tags 
```

从我目前所见，首选方法是在每个项目下都有主干（不确定分支和标签应该在哪里？）

我的 svn repo 大约 1.8G，主干下大约有 30 个项目。标签和分支文件夹是空的。是否可以更改布局，是否值得做？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T20:30:44.803

如果您希望基于项目的根，在这种情况下的逻辑树是（IMNSHO），在 ProjectN 目录下与该项目的主干相同级别具有标签和分支。

> 是否可以更改布局，是否值得做？

是的，“这取决于......”你必须执行很多`svn mkdir`并且`svn mv`避免过程中的错误和错误输入

我个人更喜欢“每个项目的 repo”，因为巨型共享存储库的缺点多于优点，如果你准备好努力工作，一次性拆分过程（也许清理：1.8GB 是**可怕的大小**）repo 可能会更好时间和注意力的投入

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T20:28:21.870

通常认为最好的做法是为每个项目拥有这些文件夹，以使版本控制更容易发布、错误修复等。您不太可能需要将所有项目分支在一起（除非它们通过共同的依赖关系紧密相关，即使你需要或不需要，它也是有争议的）。

你怎么做取决于你的要求。从简化的角度来看，svn 分支只是文件夹，所以你*可以*这样做：

```
/trunk
    /project1
        /trunk
        /branches
        /tags
    /project2
        /trunk
        /branches
        /tags 
```

`trunk`除非您想分支*整个*代码库，否则这基本上会使顶层变得多余，但如果您选择这样做，可能会使您的转换更容易。如果这永远不会成为要求，我也会考虑删除这些顶级文件夹。

相关的问题是您是否应该有多个存储库以允许更多自定义（每个项目的单独挂钩、单独的权限约束等），或者一个大型存储库可以避免对存储库配置进行不必要的重复。

# cocoa - 如何接受 Dock 公开窗口上的拖动？

> ID：13553609
> 
> 赞同：2
> 
> 时间：2012-11-25T17:39:45.087
> 
> 标签：cocoa, drag-and-drop, dock, apple-expose

当您拖动到停靠图标并暂停时，该应用程序的所有窗口都会在类似暴露的视图中被带到前面。拖动到这些窗口将以蓝色勾勒出窗口，但是如何让窗口实际接受拖放？在这个暴露过程中要查询什么？

我原以为它可能会被视为 NSWindow 本身的一个下降，但事实并非如此。（当它们通常可见时，我可以成功地拖放到我的窗口上。）

# java - 来自资源的大图像获取异常

> ID：13553610
> 
> 赞同：3
> 
> 时间：2012-11-25T17:39:46.350
> 
> 标签：java, android, bitmap, android-viewpager

我按照此链接中的示例进行操作： [Android 中的 Viewpager 示例](http://androidtrainningcenter.blogspot.com/2012/10/viewpager-example-in-android.html)

它工作正常，但是当我放置自己的高分辨率图像（大尺寸）时，它给了我例外：

**java.lang.OutOfMemoryError: 位图大小超出 VM 预算**。

我发布了一个关于该问题的旧问题，但由于这个原因它关闭了它，我尝试并搜索了很多，最后我找到了解决方案：通过以下方式缩放我的图像以避免内存异常：

作者在stackfllow和android开发站点中的建议和答案，我以波纹管代码结束，也以同样的异常结束，我认为我的代码有一些错误，因为我还在学习java和android开发，但我可以结束与，请任何帮助或建议将不胜感激，

谢谢 。

我的代码：

**ViewPagerAdapter**

```
 public class ViewPagerAdapter extends PagerAdapter {

Activity activity;
int imageArray[];

public ViewPagerAdapter(Activity act, int[] imgArra) {
    imageArray = imgArra;
    activity = act;
                           }

public int getCount() {
    return imageArray.length;
                        }

public Object instantiateItem(View collection, int position) {
    ImageView view = new ImageView(activity);
    view.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,
            LayoutParams.MATCH_PARENT));
    view.setScaleType(ScaleType.FIT_XY);
    view.setBackgroundResource(imageArray[position]);
    ((ViewPager) collection).addView(view, 0);
    return view;
                              }

@Override
public void destroyItem(View arg0, int arg1, Object arg2) {
    ((ViewPager) arg0).removeView((View) arg2);
                              }

@Override
public boolean isViewFromObject(View arg0, Object arg1) {
    return arg0 == ((View) arg1);
                                     }

@Override
public Parcelable saveState() {
    return null;
                                       }
public static Bitmap decodeSampledBitmapFromResource(String imageArra,
        int reqWidth, int reqHeight) {      

        // First decode with inJustDecodeBounds=true to check dimensions
    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeFile(imageArra, options);

 // Calculate inSampleSize
    options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight);

    // Decode bitmap with inSampleSize set
    options.inJustDecodeBounds = false;
    return BitmapFactory.decodeFile(imageArra, options);
                                       }

    public static int calculateInSampleSize(
            BitmapFactory.Options options, int reqWidth, int reqHeight) {
    // Raw height and width of image
    final int height = options.outHeight;
    final int width = options.outWidth;
    int inSampleSize = 1;

    if (height > reqHeight || width > reqWidth) {
        if (width > height) {
            inSampleSize = Math.round((float)height / (float)reqHeight);
        } else {
            inSampleSize = Math.round((float)width / (float)reqWidth);
                      }
                          }
    return inSampleSize;}} 
```

**页面指​​示器活动**：

```
 public class PageIndicatorActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    ViewPagerAdapter adapter = new ViewPagerAdapter(this, imageArra);
    ViewPager myPager = (ViewPager) findViewById(R.id.myfivepanelpager);
    myPager.setAdapter(adapter);
    myPager.setCurrentItem(0);
                                 }

private int imageArra[] = { R.drawable.one, R.drawable.two,
        R.drawable.three, R.drawable.four,
        R.drawable.five, R.drawable.six,
        R.drawable.seven, R.drawable.eight,R.drawable.nine,
                          R.drawable.ten };  } 
```

**logcat 堆栈**：

```
 FATAL EXCEPTION: main
     java.lang.OutOfMemoryError: bitmap size exceeds VM budget
at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:563)
at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:439)
at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:697)
at android.content.res.Resources.loadDrawable(Resources.java:1709)
at android.content.res.Resources.getDrawable(Resources.java:581)
at android.view.View.setBackgroundResource(View.java:7586)
at com.horizontalscrollviewwithpageindicator.ViewPagerAdapter.instantiateItem
        (ViewPagerAdapter.java:33)
at android.support.v4.view.PagerAdapter.instantiateItem(PagerAdapter.java:110)
at android.support.v4.view.ViewPager.addNewItem(ViewPager.java:692)
at android.support.v4.view.ViewPager.populate(ViewPager.java:875)
at android.support.v4.view.ViewPager.populate(ViewPager.java:772)
at android.support.v4.view.ViewPager.onMeasure(ViewPager.java:1234)
at android.view.View.measure(View.java:8366)
at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1017)
at android.widget.LinearLayout.measureVertical(LinearLayout.java:386)
at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
at android.view.View.measure(View.java:8366)
at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
at android.view.View.measure(View.java:8366)
at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
at android.view.View.measure(View.java:8366)
at android.view.ViewRoot.performTraversals(ViewRoot.java:844)
at android.view.ViewRoot.handleMessage(ViewRoot.java:1865)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:3687)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T19:05:49.750

尝试以下提示。

**-** Android 可以很好地处理`.png`图像，格式中相同**大小**`.jpg`的图像会创建一个`OutOfMemoryError`.

**有关官方 Android 开发者网站的解决方案，请参阅此链接：**

[http://developer.android.com/training/displaying-bitmaps/load-bitmap.html](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T23:47:47.123

You never use the method to scale the images, also your inSampleSize needs to be a power of two(i believe). These images are way too big (4.5 mb that you stated in your previous post). On top of a huge bitmap being stored, the view pager keeps 3 views in memory at any given time. Your memory allocated for your view pager is something like >13.5mb. Replace your instantiate view with the following:

```
ImageView myView = new ImageView(context);
BitmapFactory.Options options = new BitmapFactory.Options();
    options.inSampleSize = 4;

Bitmap bitmap = BitmapFactory.decodeResource(activity.getResouces(), imageArray[position], options );
myView.setImageBitmap(bitmap);

((ViewPager) view).addView(myView);   

return myView; 
```

If this still provides an error, use options.inSampleSize = 8;

# java - 如何使用 DOM (JAVA) 在 XML 文档中添加 Doctype

> ID：13553614
> 
> 赞同：6
> 
> 时间：2012-11-25T17:40:43.007
> 
> 标签：java, xml, dom, doctype

我在 java 中使用 DOM 创建了一个 XML 文档。我无法添加文档类型。我想要这样的文档类型。

```
<!DOCTYPE IndInfo PUBLIC "EDAFileSomething" "EDAFileSomething_2_0.dtd"> 
```

这是文档创建代码。

```
DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
DocumentBuilder docBuilder = docFactory.newDocumentBuilder();
Document doc = docBuilder.newDocument(); 
```

这是变压器对象代码。

```
TransformerFactory transformerFactory = TransformerFactory.newInstance();
            Transformer transformer = null;
            try {
                transformer = transformerFactory.newTransformer();
            } catch (TransformerConfigurationException ex) {
                Logger.getLogger(Reader.class.getName()).log(Level.SEVERE, null, ex);
            }
            DOMSource source = new DOMSource(doc);
            try {

                StreamResult result = new StreamResult(System.out);
                transformer.transform(source, result);
            } catch (TransformerException ex) {
                Logger.getLogger(Reader.class.getName()).log(Level.SEVERE, null, ex);
            }

            System.out.println("File saved!"); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-05-15T20:54:01.717

您可以使用 DOM 构造 doctype 并将 doctype 设置为输出属性。

```
TransformerFactory transformerFactory = TransformerFactory.newInstance();
Transformer transformer = transformerFactory.newTransformer();
transformer.setOutputProperty(OutputKeys.INDENT, "yes");
transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, "no");
transformer.setOutputProperty(OutputKeys.METHOD, "xml");
DOMImplementation domImpl = document.getImplementation();
DocumentType doctype = domImpl.createDocumentType("doctype",
    "-//Oberon//YOUR PUBLIC DOCTYPE//EN",
    "YOURDTD.dtd");
transformer.setOutputProperty(OutputKeys.DOCTYPE_PUBLIC, doctype.getPublicId());
transformer.setOutputProperty(OutputKeys.DOCTYPE_SYSTEM, doctype.getSystemId());
DOMSource source = new DOMSource(document);
StreamResult result = new StreamResult(new File(database));
transformer.transform(source, result); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T19:16:23.127

如果 `DOMImplementation`通过调用 上的`getDOMImplementation()`方法获得 的实例，`DocumentBuilder`则可以使用该`createDocument`方法创建`Document`具有指定文档类型的新的。

它还有一个`createDocumentType`创建`DocumentType`对象的方法

请参阅[http://docs.oracle.com/javase/1.5.0/docs/api/org/w3c/dom/DOMImplementation.html](http://docs.oracle.com/javase/1.5.0/docs/api/org/w3c/dom/DOMImplementation.html)和[http://docs.oracle.com/javase/1.5.0/docs/ api/javax/xml/parsers/DocumentBuilder.html](http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/parsers/DocumentBuilder.html) 了解更多信息。

# windows - 如何获取 Windows SYSTEM 用户令牌

> ID：13553615
> 
> 赞同：2
> 
> 时间：2012-11-25T17:40:55.213
> 
> 标签：windows, psexec, createprocessasuser, auth-token

操作系统是启用了 UAC 的 Windows 7 或更高版本。调用过程具有管理员权限，已由 UAC 框确认。

我想在用户 SYSTEM 下生成一个新的控制台窗口（cmd.exe）（不要问为什么）。我可以使用 Sysinternals 的 PsExec 工具或类似工具以交互方式执行此操作，但我没有源代码，我需要了解它是如何工作的。

我知道我必须调用 CreateProcessAsUser() 并且在第一个参数 (hToken) 设置为 NULL 时可以正常工作，但现在我需要知道如何获取 hToken。我知道我可以通过调用 LogonUser() 来获得这样的令牌 - 但不能用于 SYSTEM。我将如何获得 SYSTEM 的令牌？

我想过使用 DuplicateTokenEx()，但这需要一个我没有的原始令牌。

我是否必须查询进程列表，找到任何 SYSTEM 进程并尝试复制该令牌或其他什么？我不想对 PsExec 工具或其他这样做的工具之一进行反向工程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T22:06:12.667

通常，您会安装并启动一项服务，并配置为以 SYSTEM 身份登录。然后，您可以使用[`OpenProcessToken`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379295%28v=vs.85%29.aspx)和[`DuplicateTokenEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa446617%28v=vs.85%29.aspx)制作令牌的副本。

您可能需要使用[`SetTokenInformation`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379591%28v=vs.85%29.aspx)更改令牌的会话 ID 以匹配交互式用户的会话 ID。您需要充当操作系统的一部分权限才能执行此操作，因此您应该从服务本身内部执行此操作。准备好使用重复令牌后，您可以使用[`DuplicateHandle`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724251%28v=vs.85%29.aspx)将句柄复制到管理进程中，或者（使用正确的选项）您也可以直接从服务启动命令 shell。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-17T20:15:12.707

或者以最大允许访问权限打开 winlogon 进程，尝试打开进程令牌（也以最大允许权限），然后尝试使用模拟权限复制此 winlogon 句柄。在win8.1上这将成功。在其他情况下，您需要使用 null 或您自己的管理进程令牌临时更改令牌 dacl

# c - 具有可变数量参数的打印函数

> ID：13553616
> 
> 赞同：1
> 
> 时间：2012-11-25T17:40:57.750
> 
> 标签：c

我有这个功能：

```
void print(THashEntry *entry, ...)
{
    va_list parameters;

    va_start(parameters, entry);

    while (true)
    {
        THashEntry *currentEntry = va_arg(parameters, THashEntry *);
        if (!currentEntry)
        {
            break;
        }

        printf("%s\n", currentEntry->value);
    }

 va_end(parameters);
} 
```

我将这些条目的地址传递给函数，然后我想访问它们的成员“值”并打印它。

但是，当我尝试通过 va_arg 获取参数时，它返回的不是第一个参数，而是第二个参数，当另一个循环进入时，它是分段错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T17:46:01.293

正如 John Kugelman 在[他的回答](https://stackoverflow.com/a/1056442/19679)中所说，这里有一些将可变数量的参数传递给 printf/sprintf 的良好做法：-

```
 void Error(const char* format, ...)
 {
  va_list argptr;
  va_start(argptr, format);
  vfprintf(stderr, format, argptr);
  va_end(argptr);
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T00:08:54.923

似乎有很多答案，但就我个人而言，我从来没有找到一种动态计算 va_list 中 args 数量的好方法。

也就是说，有几种方法可以解决它：

*   使用 qrdl 指出的 NUMARGS(...) 宏
*   像 main 一样将 args 的数量传递给函数`void print(int numArgs, MyEntry *entry, ...)`
*   使用 NULL 终止列表

后者恰好是我个人的偏好，因为它往往与我的（而且看起来也像你的）直觉一致，即如何赶上列表的末尾。见下文：

```
 #import <stdarg.h>

 typedef struct MyEntry {
     int a;
     int b;
 } MyEntry;

 void print(int numArgs, MyEntry *entry, ...) {

     va_list parameters;

     va_start(parameters, entry);

     MyEntry *m;
     for ( m = entry; m != NULL; m = va_arg(parameters, MyEntry *))  {        
         printf("%d\n", (int)m->a);
     }

     va_end(parameters);
 }

 int main(int argc, char *argv[]) {

     MyEntry entry = { 10, 20 };
     MyEntry entry2 = { 30, 40 };
     MyEntry entry3 = { 50, 60 };
     MyEntry entry4 = { 70, 80 };
     MyEntry entry5 = { 90, 100 };

     print(2, &entry, &entry2, &entry3, &entry4, &entry5, NULL);
     return 1;
 } 
```

快乐编码！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T17:55:17.567

`va_arg``NULL`当您到达参数列表的末尾时不会返回。正如`man va_arg`所说：

> 会出现随机错误

因此，要解决它，您要么需要将多个参数传递给您的`print`函数，要么需要结束终止符。

要在编译时自动计算参数数量，可以使用宏

```
#define NUMARGS(...)  (sizeof((int[]){__VA_ARGS__})/sizeof(int)) 
```

[在此答案](https://stackoverflow.com/questions/2124339/c-preprocessor-va-args-number-of-arguments/2124433#2124433)中查看更多详细信息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T18:00:59.547

我很抱歉插入您的设计，但这可能是使用的替代方法

```
 struct abc {
    int a;
    char b[10];
 };

 void f(int size, abc* a) {
    for (int i = 0; i < size; i++) {
    abc x = a[i];
    }
 }

int _tmain(int argc, _TCHAR* argv[])
{
abc *arrAbc = new abc[10];
for (int i = 0; i < 10; i++) {
    arrAbc[i].a = 0;
}
f(10, arrAbc);
} 
```

# performance - 将静态内容从应用程序服务器移动到 Web 服务器以获得更好的性能

> ID：13553619
> 
> 赞同：0
> 
> 时间：2012-11-25T17:41:13.450
> 
> 标签：performance, webserver

我在 WebSphere 6 上运行应用程序，与任何其他应用程序一样，我的应用程序同时具有静态内容和动态内容，现在我计划将我的所有静态内容（如 JS、CSS 和图像）移动到 Tomcat 6 我从图像开始，我把所有webApp 文件夹中的图片
现在我访问此图片的网址是`http://localh0st:8080/MYAPP/visa.gif`

在我的 Jsp 中，我正在访问此图像，如下所示

```
<img class=card title=VISA alt=VISA src="http://localh0st:8080/Hello/MC.gif"></img> 
```

在 JSP 中提到所有的 URL 似乎不是最好的方法，你能建议我一些关于这个的最佳实践吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:17:25.210

如果我是你，我会在你的应用程序前面安装一个 http 服务器（例如 Apache）

Apache 服务器（http，不是 tomcat）在传递内容方面非常高效，并且还可以将请求代理到另一台服务器。

然后我建议您将所有静态资源移动到 Apache http 服务器中，并将代理模块添加到 Apache http 并将所有不是 gif、jpg、css、js 以及任何非静态的请求转发到您的 websphere 服务器.

如果您设法正确隔离所有内容，您将避免重写应用程序的所有 url。

# azure - 确定哪个用户创建了 Azure (Ubuntu) Linux 服务器（使用“快速创建”）

> ID：13553621
> 
> 赞同：14
> 
> 时间：2012-11-25T17:41:22.623
> 
> 标签：azure, virtual-machine, ubuntu-12.04

我在 Azure 虚拟机上创建了一个 Ubuntu Linux 服务器。

我使用“快速创建”而不是图库并输入了密码，但没有选择用户名（不是一个选项）。现在我正在尝试使用密码和“root”通过 SSH 连接到我的服务器，它说 - 访问被拒绝。

哪个用户是由“快速创建”向导创建的？

谢谢， 阿维亚德

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-25T17:59:02.287

据我所知，您应该尝试`azureuser`使用“快速创建”和“图库”选项创建的默认用户名。

这是我记得得到的对话框：

![在此处输入图像描述](../Images/beea2d2c93d28a5343900419a0a1d926.png)

# mongodb - 我应该在哪里为 MongoDB 添加 --rest 选项？

> ID：13553623
> 
> 赞同：10
> 
> 时间：2012-11-25T17:41:25.113
> 
> 标签：mongodb

我需要将 mongodb 与 --rest 选项一起使用。但是mongodb是在开机时自动启动的，所以我想我需要修改一个文件什么的。

我在哪里可以添加这个 --rest 选项？

我在 /etc/init/mongodb.conf 有这个文件，不确定要编辑什么：

```
# Ubuntu upstart file at /etc/init/mongodb.conf

limit nofile 20000 20000

kill timeout 300 # wait 300s between SIGTERM and SIGKILL.

pre-start script
mkdir -p /var/lib/mongodb/
mkdir -p /var/log/mongodb/
end script

start on runlevel [2345]
stop on runlevel [06]

script
  ENABLE_MONGODB="yes"
  if [ -f /etc/default/mongodb ]; then . /etc/default/mongodb; fi
  if [ "x$ENABLE_MONGODB" = "xyes" ]; then exec start-stop-daemon --start --quiet --chuid mongodb --exec  /usr/bin/mongod -- --config /etc/mongodb.conf; fi
end script 
```

这个文件位于 /etc/init.d/mongodb：

```
#!/bin/sh -e
# upstart-job
#
# Symlink target for initscripts that have been converted to Upstart.

set -e

INITSCRIPT="$(basename "$0")"
JOB="${INITSCRIPT%.sh}"

if [ "$JOB" = "upstart-job" ]; then
    if [ -z "$1" ]; then
        echo "Usage: upstart-job JOB COMMAND" 1>&2
    exit 1
    fi

    JOB="$1"
    INITSCRIPT="$1"
    shift
else
    if [ -z "$1" ]; then
        echo "Usage: $0 COMMAND" 1>&2
    exit 1
    fi
fi

COMMAND="$1"
shift

if [ -z "$DPKG_MAINTSCRIPT_PACKAGE" ]; then
    ECHO=echo
else
    ECHO=:
fi

$ECHO "Rather than invoking init scripts through /etc/init.d, use the service(8)"
$ECHO "utility, e.g. service $INITSCRIPT $COMMAND"

# Only check if jobs are disabled if the currently _running_ version of
# Upstart (which may be older than the latest _installed_ version)
# supports such a query.
#
# This check is necessary to handle the scenario when upgrading from a
# release without the 'show-config' command (introduced in
# Upstart for Ubuntu version 0.9.7) since without this check, all
# installed packages with associated Upstart jobs would be considered
# disabled.
#
# Once Upstart can maintain state on re-exec, this change can be
# dropped (since the currently running version of Upstart will always
# match the latest installed version).

UPSTART_VERSION_RUNNING=$(initctl version|awk '{print $3}'|tr -d ')')

if dpkg --compare-versions "$UPSTART_VERSION_RUNNING" ge 0.9.7
then
    initctl show-config -e "$JOB"|grep -q '^  start on' || DISABLED=1
fi

case $COMMAND in
status)
    $ECHO
    $ECHO "Since the script you are attempting to invoke has been converted to an"
    $ECHO "Upstart job, you may also use the $COMMAND(8) utility, e.g. $COMMAND $JOB"
    $COMMAND "$JOB"
    ;;
start|stop)
    $ECHO
    $ECHO "Since the script you are attempting to invoke has been converted to an"
    $ECHO "Upstart job, you may also use the $COMMAND(8) utility, e.g. $COMMAND $JOB"
    if status "$JOB" 2>/dev/null | grep -q ' start/'; then
        RUNNING=1
    fi
    if [ -z "$RUNNING" ] && [ "$COMMAND" = "stop" ]; then
        exit 0
    elif [ -n "$RUNNING" ] && [ "$COMMAND" = "start" ]; then
        exit 0
    elif [ -n "$DISABLED" ] && [ "$COMMAND" = "start" ]; then
        exit 0
    fi
    $COMMAND "$JOB"
    ;;
restart)
    $ECHO
    $ECHO "Since the script you are attempting to invoke has been converted to an"
    $ECHO "Upstart job, you may also use the stop(8) and then start(8) utilities,"
    $ECHO "e.g. stop $JOB ; start $JOB. The restart(8) utility is also available."
    if status "$JOB" 2>/dev/null | grep -q ' start/'; then
        RUNNING=1
    fi
    if [ -n "$RUNNING" ] ; then
        stop "$JOB"
    fi
    # If the job is disabled and is not currently running, the job is
    # not restarted. However, if the job is disabled but has been forced into the
    # running state, we *do* stop and restart it since this is expected behaviour
    # for the admin who forced the start.
    if [ -n "$DISABLED" ] && [ -z "$RUNNING" ]; then
        exit 0
    fi
    start "$JOB"
    ;;
reload|force-reload)
    $ECHO
    $ECHO "Since the script you are attempting to invoke has been converted to an"
    $ECHO "Upstart job, you may also use the reload(8) utility, e.g. reload $JOB"
    reload "$JOB"
    ;;
*)
    $ECHO
    $ECHO "The script you are attempting to invoke has been converted to an Upstart" 1>&2
    $ECHO "job, but $COMMAND is not supported for Upstart jobs." 1>&2
    exit 1
esac 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-25T18:47:04.493

`/etc/mongodb.conf`通过添加一行来启用 REST 接口可能更简洁：

```
rest = true 
```

[此处](http://docs.mongodb.org/v2.4/reference/configuration-options/#rest)记录了该设置。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-05-15T13:08:46.283

MongoDB 2.6 版已切换到 YAML 配置文件。需要以下两个条目来防止出现以下启动警告： `mongodb WARNING: --rest is specified without --httpinterface`

```
net:
  http:
    enabled: true
    RESTInterfaceEnabled: true 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-10T14:18:30.727

当您使用命令启动服务器时，请使用这样的命令`mongod`添加`--rest`选项。`mongod``mongod --rest`

请参阅[mongod-MongoDB 手册 2.6](https://docs.mongodb.com/v2.6/reference/program/mongod/#bin.mongod)。

运行命令完成后，您可以使用以下简单的 Restful API：

```
http://127.0.0.1:28017/databaseName/collectionName/ 
```

[这](https://docs.mongodb.com/ecosystem/tools/http-interfaces/#simple-rest-api)是简单的 RestFul API 文档。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-03-20T09:49:11.630

只需使用启动服务器`mongod --rest`

注意：默认情况下，由于安全问题，其余 API 不可访问。可以在 访问 Web 界面`localhost:<port>`，其中的数字`1000`大于 mongod 端口。例如，您的 mongodb 服务器在`27017`（默认情况下）运行，那么您可以在以下位置访问 mongodb

```
http://127.0.0.1:28017/<db-name>/<collection-name>/ 
```

# android - 在 Google Maps Android 中搜索特定位置

> ID：13553629
> 
> 赞同：-1
> 
> 时间：2012-11-25T17:42:00.110
> 
> 标签：android, google-maps

我在 Google Map Android 中的搜索位置有问题

这是我的 cari.java 代码

```
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;
import java.util.Locale;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.Intent;
import android.location.Address;
import android.location.Geocoder;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.EditText;
import android.widget.TextView;

public class cari extends com.google.android.maps.MapActivity {

       TextView error,pt;
       EditText cm;
       String i,returnStringLancar,stat;
       Geocoder geoCoder;
       GeoPoint p;
       MapController controller;
       MapView map;
        /** Called when the activity is first created. */

       @Override

        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.search);

            pt=(TextView)findViewById(R.id.peta);
            cm=(EditText)findViewById(R.id.cariMap);

       }

       public void clickHandler(View view){
           Intent a = null;
            switch (view.getId()){
            case R.id.show:
                geoCoder = new Geocoder(getApplicationContext(),
                        Locale.getDefault());
                List<Address> addresses;
                try {
                    addresses = geoCoder.getFromLocationName(cm.getText().toString(),5);
                if(addresses.size() > 0)
                {
                     p = new GeoPoint( (int) (addresses.get(0).getLatitude() * 1E6), 
                                      (int) (addresses.get(0).getLongitude() * 1E6));

                       controller.animateTo(p);
                       controller.setZoom(12);

                       MapOverlay mapOverlay = new MapOverlay();
                     List<Overlay> listOfOverlays = map.getOverlays();
                     listOfOverlays.clear();
                     listOfOverlays.add(mapOverlay);

                       map.invalidate();
                       cm.setText("");
                }
                else
                {
                        AlertDialog.Builder adb = new AlertDialog.Builder(cari.this);
                        adb.setTitle("Google Map");
                        adb.setMessage("Please Provide the Proper Place");
                        adb.setPositiveButton("Close",null);
                        adb.show();
                }
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
                break;
       }
       }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }
} 
```

这是我的 MapOverlay.java

```
import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapView;

import android.app.Activity;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Point;
import android.os.Bundle;

class MapOverlay extends com.google.android.maps.Overlay
{
    Context context;
    GeoPoint p;
    public boolean draw(Canvas canvas, MapView mapView, 
    boolean shadow, long when) 
    {
        super.draw(canvas, mapView, shadow);                   

        //---translate the GeoPoint to screen pixels---
        Point screenPts = new Point();
        mapView.getProjection().toPixels(p, screenPts);

        //---add the marker---
        Bitmap bmp = BitmapFactory.decodeResource(
            context.getResources(), R.drawable.icon);            
        canvas.drawBitmap(bmp, screenPts.x, screenPts.y-32, null);         
        return true;
    }
} 
```

该程序的目的是通过地址在谷歌地图中搜索位置（例如：第五大道）。

但是当我部署它时，它会显示如下错误：

> java.lang.RuntimeException：无法实例化活动 ComponentInfo{udin.googlemap2/udin.googlemap2.GoogleMap2}：

和这个：

> java.lang.ClassNotFoundException：加载程序dalvik.system.PathClassLoader中的udin.googlemap2.GoogleMap2 [/system/framework/com.google.android.maps.jar:/data/app/udin.googlemap2-1.apk]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T05:38:16.300

检查`<uses-library android:name="com.google.android.maps" />`android manifest中是否给出..就可以了。

# c++ - C++中的十进制转二进制

> ID：13553634
> 
> 赞同：0
> 
> 时间：2012-11-25T17:42:40.260
> 
> 标签：c++, binary, type-conversion, decimal

我是 C++ 的初学者，今天我想自己写一个小程序，将十进制数转换为二进制数。代码看起来像这样：

```
#include <iostream>
void binaryConvert(int);
int main() {
    using namespace std;
    cout << "Enter decimal number for conversion:" << endl;
    int dec;
    cin >> dec;
    binaryConvert(dec);
}
void binaryConvert(int number) {
    using namespace std;
    while(number > 0) {
        int bin = number % 2;
        number /= 2;
        cout << bin;
    }
} 
```

从逻辑上讲，这个程序会以相反的方式打印二进制文件。我花了很长时间试图弄清楚如何反转二进制数字的顺序，以便在遇到这段代码时二进制数字会以正确的方式出现：

```
void binaryConvert(int number) {
    using namespace std;
    if(number > 0) {
        int bin = number % 2;
        number /= 2;
        binaryConvert(number);
        cout << bin;
    }
} 
```

我知道这可能是一个愚蠢的问题（我是一个绝对的初学者），但我不明白为什么这段代码会以正确的顺序打印这些位。此外，如果在 cout 执行之前再次调用该函数，那么这些位实际上是如何被打印出来的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T17:45:32.043

基本上是因为在“binaryConvert”之后调用了“cout”。这就像将所有位放在一个堆栈中，然后打印它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T17:46:52.233

它利用递归，直到基本情况被击中（数字<= 0）才打印最后的bin，然后它将上升到堆栈跟踪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T17:47:32.463

这个函数是一个递归函数。它以递归方式调用自己，先打印出最低有效数字，然后再打印出最高有效数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-24T04:48:48.957

```
int num;
string BinaryRepresentation="";
cout<<"Input:";
cin>>num;
string  newstring= "";

bool h;
h = true;

while(h){
    BinaryRepresentation += boost::lexical_cast<std::string>( num % 2 );
    num = num / 2;
    if ( num < 1){
        h = false;
    }
}
for ( int i = BinaryRepresentation.size() - 1; i >= 0; i--){
    newstring += BinaryRepresentation[i];

}
     cout<< "Binary Representation: " << newstring <<endl; 
```

}

该程序的主要思想是找到数字的提示并将数字除以2并继续重复相同的过程直到数字变为0。您需要反转字符串以获得二进制等价物输入的号码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-26T12:58:41.883

正如您正确提到的那样，您的程序在输出时反转了二进制文件。以正确的顺序将二进制文件放入第二个代码仅在获得最后一位后才开始提供输出。输出的顺序是 bin 到 bin，因此我们获得了所需的输出。以下代码可能有助于您进一步理解：http: [//ideone.com/Qm0m7L](http://ideone.com/Qm0m7L)

```
void binaryConvert(int number) {
    if(number > 0) {
        int bin = number % 2;
        number /= 2;
        cout << bin<<" one"<<endl;
        binaryConvert(number);
        cout << bin<<" two"<<endl;
    }
} 
```

得到的输出是：

```
0 one
0 one
0 one
1 one
1 two
0 two
0 two
0 two 
```

“一”之前的输出是您的程序所给出的。我希望你能理解其中的区别。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-31T17:21:34.207

当我在网上搜索从十进制转换为二进制时，没有找到一个简单易懂的解决方案。所以我自己写了一个程序。就这样吧。

```
 #include <iostream>
#include <string>
#include <sstream>

using namespace std;
void dtobin(int n)
{
   ostringstream oss;
   string st="";
if(n<0)
{
    cout<<"Number is negative";
    return;
}
   int r;
while(n!=1)
{

    r=n%2;
    oss<<st<<r;
    n/=2;
}
oss<<st<<1;
st=oss.str();
cout<<st;
//To reverse the string
int len=st.length();
int j=len-1;
char x;
for(int i=0;i<=len/2-1;i++)
{
    x=st[i];
    st[i]=st[j];
    st[j]=x;
    --j;
}
cout<<endl<<st;
}

  int main()
{
  int n;
  cout<<"ENTER THE NUMBER";
  cin>>n;
  dtobin(n);
  return 0;
} 
```

# iphone - CallStateDisconnected 仅检测到来电，而不是从我的应用程序发出的呼叫

> ID：13553635
> 
> 赞同：12
> 
> 时间：2012-11-25T17:42:40.220
> 
> 标签：iphone, objective-c, core-telephony

如果我从我的应用程序拨打电话，我无法检测到通话结束（状态 CallStateDisconnected）。但是，如果我在我的应用程序处于活动状态时接到电话，我可以检测到该状态。当从我的应用程序开始呼叫时，我还会收到两次或 3 次状态 CTCallStateDialing。它曾经在iOS5下工作，iOS6出现这个问题。

我的应用程序删除代码；

```
 self.callCenter = [[CTCallCenter alloc] init];
self.callCenter.callEventHandler = ^(CTCall* call) {

    // anounce that we've had a state change in our call center
    NSDictionary *dict = [NSDictionary dictionaryWithObject:call.callState forKey:@"callState"]; //BREAKPOINT HERE

    [[NSNotificationCenter defaultCenter] postNotificationName:@"CTCallStateDidChange" object:self userInfo:dict]; 

}; 
```

奇怪的是，这一切正常，如果我在 callEventHandler 块中放置断点并在调用完成后恢复执行，那么我会正确地得到 CallStateDisconnected。

然后我在视图控制器中订阅通知，并在收到通知时执行此代码：

```
- (void)ctCallStateDidChange1:(NSNotification *)notification
 {
  NSString *call = [[notification userInfo] objectForKey:@"callState"];

if ([call isEqualToString:CTCallStateDisconnected])
{
    NSLog(@"Call has been disconnected");

}
else if([call isEqualToString:CTCallStateDialing])
{

    NSLog(@"Call start");
}
else if ([call isEqualToString:CTCallStateConnected])
{
    NSLog(@"Call has just been connected");
}
else if([call isEqualToString:CTCallStateIncoming])
{
    NSLog(@"Call is incoming");
}
else
{
    NSLog(@"None");
} 
```

}

我像这样从我的应用程序拨打电话：

```
 UIWebView *callWebview = [[UIWebView alloc] init];
        [self.view addSubview:callWebview];
        NSURL *telURL = [NSURL URLWithString:number];
        [callWebview loadRequest:[NSURLRequest requestWithURL:telURL]]; 
```

我还记录了应用程序状态，我得到了`- (void)applicationDidBecomeActive:(UIApplication *)application`

在我开始通话后，我去`- (void)applicationDidEnterBackground:(UIApplication *)application`

通话结束后返回`- (void)applicationDidBecomeActive:(UIApplication *)application.`

这很奇怪，`DidBecomeActive`在调用之后和进入后台之前调用吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T06:31:22.087

这是来自 iOS 5 手机的日志：

```
2012-12-02 22:00:00.252 TestPhone[2297:707] didFinishLaunchingWithOptions:
2012-12-02 22:00:00.352 TestPhone[2297:707] applicationDidBecomeActive:
2012-12-02 22:00:06.708 TestPhone[2297:707] applicationWillResignActive:
2012-12-02 22:00:10.582 TestPhone[2297:1c03] Call start
2012-12-02 22:00:11.016 TestPhone[2297:707] applicationDidBecomeActive:
2012-12-02 22:00:12.536 TestPhone[2297:707] applicationWillResignActive:
2012-12-02 22:00:12.564 TestPhone[2297:707] applicationDidEnterBackground:
2012-12-02 22:00:36.543 TestPhone[2297:707] applicationWillEnterForeground:
2012-12-02 22:00:36.769 TestPhone[2297:707] applicationDidBecomeActive:
2012-12-02 22:00:36.840 TestPhone[2297:2e07] Call has been disconnected
2012-12-02 22:00:36.854 TestPhone[2297:707] applicationWillResignActive:
2012-12-02 22:00:49.885 TestPhone[2297:707] applicationDidBecomeActive: 
```

这是来自 iOS 6 手机的日志：

```
2012-12-03 06:27:55.401 TestPhone[7734:907] didFinishLaunchingWithOptions:
2012-12-03 06:27:55.462 TestPhone[7734:907] applicationDidBecomeActive:
2012-12-03 06:28:01.396 TestPhone[7734:907] applicationWillResignActive:
2012-12-03 06:28:04.345 TestPhone[7734:907] applicationDidBecomeActive:
2012-12-03 06:28:04.401 TestPhone[7734:1803] Call start
2012-12-03 06:28:05.824 TestPhone[7734:907] applicationWillResignActive:
2012-12-03 06:28:05.826 TestPhone[7734:907] applicationDidEnterBackground:
2012-12-03 06:28:17.318 TestPhone[7734:907] applicationWillEnterForeground:
2012-12-03 06:28:17.329 TestPhone[7734:907] applicationDidBecomeActive: 
```

“断开连接”消息刚刚消失。（这不是答案，而是观察。）

这是我使用的代码。II 在 xcode 中使用 xib 中的单个按钮创建了一个单视图应用程序，这就是我的 UIViewController 的全部内容：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    self.callCenter = [[CTCallCenter alloc] init];
    self.callCenter.callEventHandler = ^(CTCall* myCall) {
        NSString *call = myCall.callState;
        if ([call isEqualToString:CTCallStateDisconnected])
            NSLog(@"Call has been disconnected");
        else if([call isEqualToString:CTCallStateDialing]) 
            NSLog(@"Call start");
        else if ([call isEqualToString:CTCallStateConnected])
            NSLog(@"Call has just been connected");
        else if([call isEqualToString:CTCallStateIncoming])
            NSLog(@"Call is incoming");
        else
            NSLog(@"None");
    };
}

- (IBAction)callButtonPressed:(id)sender {
    NSString *number = @"tel:01234567890";
    UIWebView *callWebview = [[UIWebView alloc] init];
    callWebview.frame = self.view.frame;    
    [self.view addSubview:callWebview];
    NSURL *telURL = [NSURL URLWithString:number];
    [callWebview loadRequest:[NSURLRequest requestWithURL:telURL]];
}
@end 
```

# android - 我如何在android中显示webview的特定部分

> ID：13553637
> 
> 赞同：0
> 
> 时间：2012-11-25T17:43:01.000
> 
> 标签：android, webview, android-websettings

经过许多帖子后，我仍然无法解决在我的应用程序中显示部分 webview 的方式，我真正想要的是显示 HTML 正文中存在的网页的特定部分。建议一些有用的解决方案来解决问题

# json - CloudFlare JSON Perl 解析

> ID：13553640
> 
> 赞同：2
> 
> 时间：2012-11-25T17:43:42.513
> 
> 标签：json, perl, cloudflare

这是我的子程序：

```
my $json = JSON->new;
my $decoded_json = from_json( $response->decoded_content, { utf8  => 1 } );

print Dumper($decoded_json->{"response"}->{"recs"}->{"objs"}, length($decoded_json->{"response"}->{"recs"}->{"objs"})) . "\r\n";
foreach($decoded_json->{"response"}->{"recs"}->{"objs"}) {
    # need to get name..
    #print Dumper($_, length($_)) . "\r\n";
} 
```

我正在从一个网站（实际上是 CloudFlare）获取 JSON 并尝试解析数据。这是 JSON 的一个示例。我试图从每个结果中获取“名称”，如果“名称”是我想要的，我将获得另一个字段。

```
 'response' => {
                      'recs' => {
                                  'count' => 4,
                                  'has_more' => bless( do{\(my $o = 0)}, 'JSON::XS::Boolean' ),
                                  'objs' => [
                                              {# <-- these
                                                'ttl_ceil' => 86400,
                                                'ttl' => '1',
                                                'content' => '[SNIPPED]',
                                                'zone_name' => 'xyz.info',
                                                'display_content' => '[SNIPPED]',
                                                'ssl_status' => undef,
                                                'name' => 'xyz.info',
                                                'prio' => undef,
                                                'auto_ttl' => 1,
                                                'display_name' => 'xyz.info',
                                                'props' => {
                                                             'pending_ssl' => 0,
                                                             'cf_open' => 0,
                                                             'proxiable' => 1,
                                                             'expired_ssl' => 0,
                                                             'ssl' => 0,
                                                             'vanity_lock' => 0,
                                                             'expiring_ssl' => 0,
                                                             'cloud_on' => 1
                                                           },
                                                'rec_tag' => '[SNIPPED]',
                                                'rec_id' => '[SNIPPED]',
                                                'type' => 'A',
                                                'ssl_id' => undef,
                                                'ssl_expires_on' => undef,
                                                'service_mode' => '1'
                                              },
                                              { # < -- these
                                                'ttl_ceil' => 86400,
                                                'ttl' => '1',
                                                'content' => '0.0.0.0',
                                                'zone_name' => 'xyz.info',
                                                'display_content' => '0.0.0.0',
                                                'ssl_status' => undef,
                                                'name' => 'zzz.xyz.info',
                                                'prio' => undef,
                                                'auto_ttl' => 1,
                                                'display_name' => 'zzz',
                                                'props' => {
                                                             'pending_ssl' => 0,
                                                             'cf_open' => 0,
                                                             'proxiable' => 1,
                                                             'expired_ssl' => 0,
                                                             'ssl' => 0,
                                                             'vanity_lock' => 0,
                                                             'expiring_ssl' => 0,
                                                             'cloud_on' => 1
                                                           },
                                                'rec_tag' => '[SNIPPED]',
                                                'rec_id' => '[SNIPPED]',
                                                'type' => 'A',
                                                'ssl_id' => undef,
                                                'ssl_expires_on' => undef,
                                                'service_mode' => '1'
                                              },
                    },
      'result' => 'success'
    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T17:57:25.483

您正在迭代引用（单个标量），而不是引用数组的内容：

```
foreach (@{ $decoded_json->{response}{recs}{objs} })
         ^^                                       ^ 
```

# java - 在文件中写入 PEM 编码证书 - java

> ID：13553642
> 
> 赞同：1
> 
> 时间：2012-11-25T17:43:59.693
> 
> 标签：java, certificate, x509

再会。

我最近使用充气城堡 API 创建了 X.509 证书。

我需要保存证书结果而不是显示结果。

我尝试使用 FileOutputStream，但它不起作用。

问候

结果如下

-----开始证书----- MIICeTCCAeKgAwIBAgIGATs8OWsXMA0GCSqGSIb3DQEBCwUAMBsxGTAXBgNVBAMT...

-----结束证书-----

代码如下

```
import java.io.FileOutputStream;
//example of a basic CA

public class PKCS10CertCreateExample
{
    public static X509Certificate[] buildChain() throws Exception
    {
        //create the certification request
        KeyPair pair = chapter7.Utils.generateRSAKeyPair();
        PKCS10CertificationRequest request =
PKCS10ExtensionExample.generateRequest(pair);

        //create a root certificate
        KeyPair rootPair=chapter7.Utils.generateRSAKeyPair();
        X509Certificate rootCert = X509V1CreateExample.generateV1Certificate
(rootPair);

        //validate the certification request
        if(!request.verify("BC"))
        {
            System.out.println("request failed to verify!");
            System.exit(1);
        }

        //create the certificate using the information in the request
        X509V3CertificateGenerator certGen = new X509V3CertificateGenerator();

        certGen.setSerialNumber(BigInteger.valueOf(System.currentTimeMillis()));
        certGen.setIssuerDN(rootCert.getSubjectX500Principal());
        certGen.setNotBefore(new Date(System.currentTimeMillis()));
        certGen.setNotAfter(new Date(System.currentTimeMillis()+50000));
        certGen.setSubjectDN(request.getCertificationRequestInfo().getSubject());
        certGen.setPublicKey(request.getPublicKey("BC"));
        certGen.setSignatureAlgorithm("SHA256WithRSAEncryption");

    certGen.addExtension(X509Extensions.AuthorityKeyIdentifier, false, new AuthorityKeyIdentifierStructure(rootCert));
    certGen.addExtension(X509Extensions.SubjectKeyIdentifier, false, new SubjectKeyIdentifierStructure(request.getPublicKey("BC")));
    certGen.addExtension(X509Extensions.BasicConstraints, true, new BasicConstraints(false));
        //certGen.addExtension(X509Extensions.KeyUsage, true, new BasicConstraints(false));
        certGen.addExtension(X509Extensions.KeyUsage, true, new KeyUsage(KeyUsage.digitalSignature | KeyUsage.keyEncipherment));
        certGen.addExtension(X509Extensions.ExtendedKeyUsage, true, new ExtendedKeyUsage(KeyPurposeId.id_kp_serverAuth));

        //extract the extension request attribute
        ASN1Set attributes = request.getCertificationRequestInfo().getAttributes();

        for(int i=0;i!=attributes.size();i++)
        {
           Attribute attr = Attribute.getInstance(attributes.getObjectAt(i));

           //process extension request
           if(attr.getAttrType().equals(PKCSObjectIdentifiers.pkcs_9_at_extensionRequest))
           {
                   X509Extensions extensions = X509Extensions.getInstance(attr.getAttrValues().getObjectAt(0));

                   Enumeration<?> e = extensions.oids();
                   while(e.hasMoreElements())
                   {
                       DERObjectIdentifier oid = (DERObjectIdentifier)e.nextElement();
                       X509Extension ext = extensions.getExtension(oid);

                       certGen.addExtension(oid, ext.isCritical(), ext.getValue().getOctets());
                   }   
               }       
           }
        X509Certificate issuedCert = certGen.generateX509Certificate(rootPair.getPrivate());
        return new X509Certificate[]{issuedCert, rootCert};
        }

        public static void main(String[] args) throws Exception
        {
            X509Certificate[] chain = buildChain();
            PEMWriter pemWrt = new PEMWriter(new OutputStreamWriter(System.out));
            pemWrt.writeObject(chain[0]);
            //pemWrt.writeObject(chain[1]);
            pemWrt.close();

            //write it out
            //FileOutputStream fOut = new FileOutputStream("pkcs10req.req");
            //fOut.write(chain[0].toString());
            //fOut.write()
            //System.out.println(chain[0].toString());          
            //fOut.close();

        }

    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T17:02:01.383

插入以下方法..

```
 public static void pemEncodeToFile(String filename, Object obj, char[] password) throws Exception{
    PEMWriter pw = new PEMWriter(new FileWriter(filename));
       if (password != null && password.length > 0) {
           pw.writeObject(obj, "DESEDE", password, new SecureRandom());
       } else {
           pw.writeObject(obj);
       }
       pw.flush();
       pw.close();
    } 
```

并像这样调用 pemEncodeToFile 方法。

```
pemEncodeToFile("pkcs10.pem", chain[0], null); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T21:22:19.247

根据[文档](http://www.bouncycastle.org/docs/pkixdocs1.5on/org/bouncycastle/openssl/PEMWriter.html)，`PEMWriter`期望`Writer`在其构造函数中实现。所以你可能需要一个`FileWriter`not a `FileOutputStream`。

# java - 如何在 MySQL 中保存对象数组

> ID：13553645
> 
> 赞同：0
> 
> 时间：2012-11-25T17:44:04.320
> 
> 标签：java, mysql, hibernate

我有一个客户表、关系表和项目表

现在 1 个客户可以有 1 个关系，但可以有多个 Items 。

我的客户实体中有这个

```
 @ManyToOne(fetch = FetchType.EAGER)
@JoinColumn(name = "relationId")
private Relation relationId; 
```

所以现在每当我创建一个新客户时，关系表中的新行也会创建，并且该关系表的 ID 保存在我的客户表内的“relationId”列中。

但是我怎样才能对我的客户表中的项目列做同样的事情，因为当我创建一个客户时，那个客户可能有多个项目，所以我们可以为那个单一的客户创建多行。

所以也许我在客户表内的 itemsColumn 中需要类似 1、2、5 的内容。

或任何其他方法..

对于上述方法，我需要我的 itemsColumn 类型为 Array ，但是如何实现这一点，即如何在 mySql 中保存对象数组。

用任何方法解决我的这个问题的任何想法。

# vb.net - 获取 visio 形状单元格的结果值

> ID：13553646
> 
> 赞同：0
> 
> 时间：2012-11-25T17:44:09.993
> 
> 标签：vb.net, visio

例如，我似乎无法为形状的单元格调用 Shape.Cells("Controls.Point.X").ResultIU 的单元格结果获得正确的值。特定的单元格公式包含内部变量。我想要该单元格的评估最终值。

# c++ - 如何用二进制表示在long int中查找数字？C++

> ID：13553648
> 
> 赞同：-1
> 
> 时间：2012-11-25T17:44:20.017
> 
> 标签：c++, binary, find

如果我们在 int long 中有经典的**十进制格式**，我们可以这样做：

```
const long int NUMBER = 4577;         
const long int DIGIT_TO_FIND = 5;

long int thisNumber = NUMBER >= 0 ? NUMBER : -NUMBER; 
long int thisDigit;

while (thisNumber != 0)
{
    thisDigit = thisNumber % 10;    
    thisNumber = thisNumber / 10;    
    if (thisDigit == DIGIT_TO_FIND)
    {
        printf("%d contains digit %d", NUMBER, DIGIT_TO_FIND);
        break;
    }
} 
```

但是**int long**中的**二进制表示**或**八进制表示**呢？我们有：

 **```
const long int NUMBER = 01011111; // octal
const long int DIGIT_TO_FIND1 = 0;         
const long int DIGIT_TO_FIND2 = 1; 
```

*正确输入*：

```
01010101
11111111 
```

*输入错误*：

```
02010101 (because two)
00000009 (because nine) 
```

我们需要检查**int long 是否只包含 0 或 1**。检查正确输入的最简单方法是什么？也许只是简单的问题，但不知道，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T18:11:26.970

要检查一个数字是否是有效的二进制数字，请将其与 进行比较`1`：

```
if (thisDigit > 1)
{
    printf("%d contains digit %d", NUMBER, thisDigit);
    break;
} 
```

正如@Pubby 所指出的，你有一个八进制数而不是一个十进制数，所以使用`8`代替`10`来计算数字：

```
thisDigit = thisNumber % 8;    
thisNumber = thisNumber / 8; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T18:12:16.053

如果我理解你的问题是这样的 -

```
#include <iostream>

bool check(int number, int search_1, int search_2)
{
    while(number > 0)
    {
        int digit = number % 10;
        number    = number / 10;
        if (digit != search_1 && digit != search_2)
            return false;
    }
    return true;
}

int main()
{
    const int DIGIT_TO_FIND1 = 0;
    const int DIGIT_TO_FIND2 = 1;

    int number1 = 1001001;
    std::cout << "Checking " << number1 << " : " << check(number1, DIGIT_TO_FIND1, DIGIT_TO_FIND2) <<" \n";

    int number2 = 12110101;
    std::cout << "Checking " << number2 << " : " << check(number2, DIGIT_TO_FIND1, DIGIT_TO_FIND2) <<" \n";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T19:16:48.083

我的解决方案。这真的很简单。

```
 bool check(int long number)
   {
     return ((number % 10 != 0) && (number % 10) != 1);
   } 
```**

# visual-studio-2010 - 使用 Odbc 将 Visual Studio 与受密码保护的 M Access 2003 文件连接

> ID：13553653
> 
> 赞同：0
> 
> 时间：2012-11-25T17:45:06.500
> 
> 标签：visual-studio-2010, ms-access, passwords

我有一个访问密码保护的数据库。我正在使用 Visual Studio 2010 和 ODBC。

必须添加哪一行代码才能成功连接以访问受保护的文件？

我正在使用这段代码：

```
Imports System.Data.Odbc
Imports System

Public Class DatabaseFunctions

    Shared con As OdbcConnection

    Public Shared Sub CreateConnection()

        con = New OdbcConnection
        con.ConnectionString = "Dsn=XXX"
        con.Open()

    End Sub

    Private Shared Sub CheckConnection()

        If con Is Nothing OrElse con.State = ConnectionState.Closed Then
            CreateConnection()
        End If

    End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T19:43:47.243

将此添加到您的 CreateConnection() 函数代码中：

```
Public Shared Sub CreateConnection()
        con = New OdbcConnection
        'con.ConnectionString = "Dsn=XXX"
        con.ConnectionString = "Dsn=XXX;uid=sa;pwd=passwordRIGHT;"
        con.Open()
End Sub 
```

[这](http://support.microsoft.com/kb/310985)是几个数据库的方法

# r - 重用代码块中的空格

> ID：13553654
> 
> 赞同：2
> 
> 时间：2012-11-25T17:45:06.787
> 
> 标签：r, whitespace, sweave

我开始学习 R 和 Sweave 并且在过去的几个小时里试图找出一个问题，根据我的 Google-fu 来说，这个问题似乎相当不为人知或不常见（因为我只发现了两个对这个问题的引用） .

即，在 Sweave 中重用代码块时，似乎[不允许任何前面的空格](https://stat.ethz.ch/pipermail/r-help/2011-March/272617.html)。例如：

```
\documentclass{article}

\begin{document}

<<label=fig1boxplot, include=FALSE>>=
boxplot(mpg~cyl,data=mtcars) 
@

\begin{figure}
\centering
<<label=fig1, fig=TRUE, echo=FALSE>>=
<<fig1boxplot>>
@
\end{figure}

\end{document} 
```

如果任何以开头的行前面有任何空白，则将无法按预期工作`<<`（错误取决于缩进的行）。我在 R 开发人员邮件列表上找到了一种[解决](https://stat.ethz.ch/pipermail/r-devel/2011-April/060627.html)方法，它可以让我缩进重用块的行（`<<figboxplot>>`）但仍然不能缩进任何其他块（`<<label=...`）

*   **为什么 Sweave 不允许有重复使用的代码块的空白，特别是因为该变通方法确实实现起来非常简单？**
*   **如何解决这个问题并尽可能多地缩进块（或任何 Sweave 代码）？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T20:10:30.447

简短的回答是[`knitr`](http://yihui.name/knitr)改用它，它允许缩进代码块。

对于您在 Sweave 上的问题，答案也很简短：这是设计使然（至少目前如此）。我个人的经验是，正如你所说，即使在实施工作方面微不足道，也很难实现。这是 R 附加包的一个很好的理由。

# java - 这是合并排序的正确实现吗？

> ID：13553659
> 
> 赞同：0
> 
> 时间：2012-11-25T17:45:40.277
> 
> 标签：java

我担心为每个递归步骤创建 3 个数组可能会占用太多空间，但我真的想不出另一种方法。请告诉我它有什么问题。

```
public static int[] split(int [] vector){

    if(vector.length <= 1 || vector == null) 
        return vector;
    int len = vector.length;

    int[] list1 = new int[len / 2];
    // If the number of elements is odd the second list will be bigger
    int[] list2 = new int[len / 2 + (len % 2)];

    // Here we assign the elements to 2 separate lists
    for(int x = 0; x < len / 2; x++)
        list1[x] = vector[x];
    for(int j = 0, i = len / 2; j < list2.length; i++, j++)
        list2[j]=vector[i];

    // Apply the recursion, this will eventually order the lists
    list1 = split(list1);
    list2 = split(list2);

    // Here we take the 2 ordered lists and merge them into 1
    int i = 0, a = 0, b = 0;
    int[] listfinal = new int[len];
    while(i < len){
        if(a >= list1.length){
            listfinal[i] = list2[b]; 
            b++;
        } else if(b >= list2.length){
            listfinal[i] = list1[a]; 
            a++;
        } else if(list1[a] <= list2[b]){
            listfinal[i] = list1[a]; 
            a++;
        } else if(list1[a] > list2[b]){
            listfinal[i] = list2[b]; 
            b++;
        }
        i++;
    }
    return listfinal; // Return the merged and ordered list
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T18:04:59.083

您不需要创建多个临时数组来进行归并排序。您做错的是复制数组以传递给递归调用；您应该改为传递原始数组。

查看 JDK 中合并排序的实现可能会提供一些信息——查看 Arrays.java 的第 1146[行](http://hg.openjdk.java.net/jdk6/jdk6/jdk/file/tip/src/share/classes/java/util/Arrays.java)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T19:28:51.760

这是在顶层分配一个等于输入大小的单个数组并将其重新用于所有递归的代码。在一百万个整数上，这在我的机器上大约需要 300 毫秒，而 Java 库排序需要 230 毫秒。好吧，不用调整努力，我猜...

```
// Sort the elements of a between lo and hi inclusive.
private static void sortImpl(int [] a, int lo, int hi, int [] tmp) {

    if (hi <= lo) return;

    // Recur on sublists.
    int mid = (hi + lo) / 2;
    sortImpl(a, lo, mid, tmp);
    sortImpl(a, mid + 1, hi, tmp);

    // Move past items already in the right place.
    int t1 = lo;
    while (a[t1] < a[mid + 1]) t1++;

    // Merge sublists into result.
    int p1 = t1;
    int p2 = mid + 1;
    int i = t1;
    System.arraycopy(a, t1, tmp, t1, mid - t1 + 1);
    while (p1 <= mid)
        a[i++] = (p2 > hi || tmp[p1] < a[p2]) ? tmp[p1++] : a[p2++];
}

public static void sort(int [] a) {
    sortImpl(a, 0, a.length - 1, new int[a.length]);
} 
```

# jquery - jQuery Cycle onAfter 触发太快

> ID：13553660
> 
> 赞同：0
> 
> 时间：2012-11-25T17:45:48.437
> 
> 标签：jquery, jquery-cycle

我正在使用带有一个事件的[jQuery Cycle](http://jquery.malsup.com/cycle/)插件，该`onAfter()`事件应该在转换完成时触发。该函数检查具有 opacity:1 的元素，并将其第一个子 div 复制到另一个元素中......

```
function onAfter(){
    var theslide = $('#slides > div').filter(function() {
        return $(this).css('opacity') == '1';
    });
    $(theslide.children('div')).clone().appendTo('#content', function(){
        $('#content').fadeIn(800);
    });
}; 
```

它几乎可以工作 - 它在页面加载时触发良好，但在随后的转换中似乎运行得太快，这意味着实际上没有元素具有 opacity:1 并且没有任何内容被复制。

如果我像这样稍微延迟函数的重要部分（例如，使用警报）......

```
function onAfter(){
    alert(something);
    var theslide = $('#slides > div').filter(function() {
        return $(this).css('opacity') == '1';
    });
    ...
}; 
```

...这似乎给了它足够的时间来找到一个完全不透明的 div。

我的问题是，我怎样才能正确可靠地确保有一个完全不透明的 div 供代码查找？

# php - 将 PHP 错误转换为异常

> ID：13553661
> 
> 赞同：5
> 
> 时间：2012-11-25T17:45:55.007
> 
> 标签：php, exception, exception-handling

我编写了错误处理类，它将所有错误分为正常错误（通知、警告、...）和严重错误。

现在我发现将所有错误转换为异常是一个好习惯。它还会缩短我的代码。

但是，我不确定如何处理这个......

1.  是否存在不会停止脚本执行的异常以及会停止脚本执行的异常？如果没有...如何区分转换后的错误？
2.  将错误转换为异常是通过调用 set_error_handler() 并在其中抛出新的 ErrorException() 来完成的……下一步是什么？set_exception_handler() 是自动调用的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T17:48:49.797

1.  捕获的异常不会停止您的脚本，**所有未捕获的**异常都会停止。

2.  不，[**`set_exception_handler()`**](http://php.net/manual/en/function.set-exception-handler.php)不会自动调用，如果你愿意，你*可以这样做。*

    您设置的异常处理程序`set_exception_handler()`在异常未被捕获后被调用，它是在脚本终止之前被调用的*最后一段代码。*确保它不会导致错误/异常，否则会以失败告终。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T18:11:43.273

> 1.  是否存在不会停止脚本执行的异常以及会停止脚本执行的异常？如果没有...如何区分转换后的错误？

如果异常被捕获，它们不会停止脚本执行。要识别转换后的错误：

```
try {
    // ...
} catch (ErrorException $e) {
    // converted error (probably)
} catch (Exception $e) {
    // another kind of exception; this basically catches all
} 
```

或者：

```
function handle_exception(Exception $e)
{
    if ($e instanceof ErrorException) {
        // converted error (probably)
    } else {
        // another kind of exception
    }
}
set_exception_handler('handle_exception'); 
```

*请注意，`ErrorException`任何代码都可以抛出它，但它仅用于转换`set_error_handler()`注册函数中的常规错误。*

> 1.  将错误转换为异常是通过调用 set_error_handler() 并在其中抛出新的 ErrorException() 来完成的……下一步是什么？set_exception_handler() 是自动调用的吗？

如果您的错误处理函数抛出`ErrorException`的错误没有在代码中的其他任何地方捕获，`set_exception_handler()`则将调用已注册的异常处理程序（使用设置）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-25T17:49:20.973

任何未捕获的异常都将停止执行您的脚本。

> 当抛出异常时，语句后面的代码将不会被执行，PHP 将尝试找到第一个匹配的 catch 块。 **如果未捕获到异常，则会发出 PHP 致命错误**，并带有“未捕获的异常 ...”消息，除非已使用 set_exception_handler() 定义了处理程序。

请参阅[有关此的文档](http://php.net/manual/en/language.exceptions.php)

至于`set_exception_handler()`- 它不会自动调用，但它是您对发生的问题做出反应的最后手段

> 如果在 try/catch 块中未捕获到异常，则设置默认异常处理程序。调用 exception_handler 后将停止执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-24T12:38:48.823

请记住，您只能将*警告*转换为异常，错误不能转换为异常，因为错误处理程序没有运行。

```
set_error_handler(function ($severity, $message, $file, $line) {
  echo 'You will never see this.'
});

// Provoke an error
function_that_does_not_exist(); 
```

可以使用关闭功能“捕捉”它们，但这超出了问题的范围。

# php - 运行常量脚本

> ID：13553665
> 
> 赞同：-6
> 
> 时间：2012-11-25T17:46:10.920
> 
> 标签：php, datetime, toggle, ads

我正忙着编写一个带有过期日期的广告的网站。到期日后，广告将无法再在网站上展示。通常，我如何为到期日期运行脚本是使用登录作为触发器来运行它。但是对于广告，我不能等到有人登录才能查看广告。

所有页面上已经运行了大量的 JavaScript，所以我宁愿不添加更多......但如果有必要我会添加。

我不确定如何添加脚本以使用 PHP 持续运行，仅在 JS 脚本中使用 setInterval()。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T17:51:42.580

您的问题似乎非常不一致，但似乎您的方法完全错误。要拥有即将到期的项目，您不要在到期日期到来或类似的情况下手动停用它们。您只需将到期日期作为项目的一部分（例如，数据库中的一列），然后在选择项目时选择**尚未过期的项目。**例如：

```
SELECT * FROM `ads` WHERE `expiry_date` > NOW() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T17:52:09.117

你的意思是在不重新加载/刷新页面的情况下运行脚本，对吧？那么据我所知，javascript 解决方案是最好的选择。一些 setInterval 来检查，也许脚本显示隐藏在 php 中的东西，但处理程序应该是 java/ajax

# ip - 名称记录更改未加载站点

> ID：13553666
> 
> 赞同：1
> 
> 时间：2012-11-25T17:46:26.240
> 
> 标签：ip

我在澳大利亚注册了一个域名。该站点托管在 Rackspace 上的 VPS 服务器上。我希望该域指向 VPS，因此更改了 Plesk Panel 中的 IP 地址。进行了这些更改后，我尝试加载域，但它没有加载，而是加载了我的 ISP 的站点未找到错误。

所以我做了一个 ping，结果响应表明该域正按预期指向我的 Rackspace ip。我检查了 Apache 的访问和错误日​​志，但没有发现任何条目表明 Apache 收到了请求。

我已经在这几天了，但似乎无法弄清楚出了什么问题。将不胜感激任何帮助解决这个问题。

# c# - ListBox，选择索引变化

> ID：13553667
> 
> 赞同：0
> 
> 时间：2012-11-25T17:46:27.493
> 
> 标签：c#, list, listbox

一个用于访问，一个用于取货，当用户将访问或取货之一添加到列表中时，它也会添加到列表框中以向用户显示。

我的问题是，当我单击列表框中的项目时，例如 Indexchanged，我希望它打开与访问或交付相关的新 GUI，因此，如果他们单击访问，它会打开访问表单，如下所示代码，但我怎样才能让它区分列表，以便它知道要打开哪种形式？

```
 private void lstVisits_SelectedIndexChanged(object sender, EventArgs e)
    {
        //Allow the user to click on the listbox to open a visit
        //This event is called after the user has clicked on the list
        int index = lstVisits.SelectedIndex;
        //Get the index of the Visit that the user has clicked upon

        Visits selected = theList.getVisits(index);
        //Get the visits object from the list

        Visitsform.visits = selected;
        //Ensure that the appointment form references the selected visit

        Visitsform.ShowDialog();
        //Show the visits form

        updateList();
        //update the list as the user may have deleted the appointment 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T18:23:44.177

如果两个列表中的项目都存储在同一个列表框中，那么您可以使用如下内容：

编辑：如果要从列表框中获取对象，则应将它们作为对象添加到列表框中，例如：

```
Visits v = new Visit();
Pickups p = new Pickup();
lstVisits.Items.Add(v);
lstVisits.Items.Add(p);    

private void lstVisits_SelectedIndexChanged(object sender, EventArgs e)
            {
                if (listBox1.SelectedItems.Count > 0)
                {
                    object o = listBox1.SelectedItems[0];
                    if (o is Visits)
                    {
                        Visits visit = (Visits)o;
                        Visitsform.visits = visit;
                        Visitsform.ShowDialog();
                    }
                    else
                    {
                        Deliveries delivery = (Deliveries)o;
                        Deliveriesform.visits = visit;
                        Deliveriesform.ShowDialog();
                    }
                }
            } 
```

# less - less.css：多个选择器的转义插值字符串

> ID：13553669
> 
> 赞同：1
> 
> 时间：2012-11-25T17:46:51.337
> 
> 标签：less, mapnik

[回答：carto.css 编译器不支持less.css 的这个特性]

我正在为[TileMill](http://mapbox.com/tilemill/)制作一个样式表，它将使用[Carto](http://mapbox.com/carto/api/2.1.0/)（less.css 的扩展）进行处理。换句话说，我正在使用 LESS 制作一个使用一些自定义语法的样式表。

我有一个作为字符串分配给变量的选择器列表，如下所示：

```
@water: "[natural='water'], [waterway='river'], [waterway='stream'], [waterway='waterfall'], [waterway='canal'], [landuse='reservoir'], [landuse='basin'], [amenity='pool'], [amenity='swimming_pool'], [amenity='fountain']"; 

@dirt: "[natural='beach'], [natural='sand'], [natural='scree'], [landuse='bedrock outcrop'], [landuse='quarry'], [natural='land'], [amenity='track']"; 
```

我希望能够在我的样式表中使用这些作为选择器，或多或少像这样（这不起作用）：

`(~'@{water}') { polygon-fill: #bbb; }`

我想在我的样式表中结束的是：

`[natural='water'], [waterway='river'], [waterway='stream'], [waterway='waterfall'], [waterway='canal'], [landuse='reservoir'], [landuse='basin'], [amenity='pool'], [amenity='swimming_pool'], [amenity='fountain']{ polygon-fill: #bbb; }`

我希望有一种方法可以加入选择器组，如下所示：

`@water, @dirt { polygon-fill: #bbb; }`

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:25:35.423

[carto.css 编译器不支持less.css 的这个特性](https://github.com/mapbox/tilemill/issues/1824#issuecomment-10769872)

# jquery - 单击 div 时在两个 div 之间切换

> ID：13553671
> 
> 赞同：3
> 
> 时间：2012-11-25T17:47:05.183
> 
> 标签：jquery

我想在示例中具有与此处相同的翻转功能：

[http://jsfiddle.net/lakario/VPjX9/](http://jsfiddle.net/lakario/VPjX9/)

我想要的唯一不同是两个div（page1，page2）之间的翻转 - 将是当我点击然后而不是按钮时。

这是代码：

```
HTML:

<button type="button" id="go">FLIP</button>
<div class="container">
     <div class="page1">
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque euismod mauris    metus, ac consectetur felis. Cras consectetur, est vel malesuada faucibus, ligula enim suscipit elit, ut ornare quam urna quis felis. In hac habitasse platea dictumst.
     </div>
   <div class="page2">
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis interdum, odio vel   condimentum varius, nibh nunc 
    </div>
</div>

 JS:

$('#go').click(function() {
var page1 = $('.page1');
var page2 = $('.page2');
var toHide = page1.is(':visible') ? page1 : page2;
var toShow = page2.is(':visible') ? page1 : page2;

toHide.removeClass('flip in').addClass('flip out').hide();
toShow.removeClass('flip out').addClass('flip in').show();
});​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T17:51:37.107

简单，只需将您的点击选择器从更新`$('#go')`为`$('.page1, .page2')`：

```
$('.page1, .page2').click(function() {
    var page1 = $('.page1');
    var page2 = $('.page2');
    var toHide = page1.is(':visible') ? page1 : page2;
    var toShow = page2.is(':visible') ? page1 : page2;

    toHide.removeClass('flip in').addClass('flip out').hide();
    toShow.removeClass('flip out').addClass('flip in').show();
});​ 
```

[演示](http://jsfiddle.net/VPjX9/173/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T17:51:27.447

只需将您的 javascript 更改为：

```
$('.container').click(function() {
    var page1 = $('.page1');
    var page2 = $('.page2');
    var toHide = page1.is(':visible') ? page1 : page2;
    var toShow = page2.is(':visible') ? page1 : page2;

    toHide.removeClass('flip in').addClass('flip out').hide();
    toShow.removeClass('flip out').addClass('flip in').show();
});​ 
```

# ant - Ant 属性文件中的条件属性

> ID：13553673
> 
> 赞同：17
> 
> 时间：2012-11-25T17:47:25.113
> 
> 标签：ant, build.xml

是否可以有条件地在 Ant**属性文件**（而不是`build.xml`）中设置属性值？例如，如果`apache.root`设置了属性 -`my_property`将是`${apache.root}/myapp`，`/var/www/myapp`否则。如果没有，通常的做法是什么 - 可重用`build.xml`文件？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-26T07:21:02.497

使用[条件](http://ant.apache.org/manual/Tasks/condition.html)任务：

```
<project name="demo" default="run">

    <condition property="my_property" value="${apache.root}/myapp" else="/var/www/myapp">
        <isset property="apache.root"/>
    </condition>

    <target name="run">
        <echo message="my_property=${my_property}"/>
    </target>

</project> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T19:07:17.407

您可以根据环境或条件变量包含不同的属性文件。例如

```
 <echo>Building ${ant.project.name} on OS: ${os.name}-${os.arch}</echo>
<property file="build-${os.name}.properties" /> 
```

这将包括一个名为“build-Windows 7.properties”或“build-Linux.properties”的文件，具体取决于运行构建的位置。当然，属性指令在当前目录和主目录中查找。所以属性文件可以是构建源的一部分，也可以是构建帐户的主目录。

您可以使用条件标签生成属性文件的部分名称以及选择

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-01T13:57:04.570

您可以使用的最简单的条件之一是：

```
<exec executable="hostname" outputproperty="hostname"/>
<condition property="python" value="/usr/bin/python3.4">
  <equals arg1="${hostname}"    arg2="host0"/>
</condition>
<property name="python" value="/usr/bin/python"/> 
```

例如，以适应不同的 python 安装路径。这里，默认安装路径是 /usr/bin/python 除了 host0 是 /usr/bin/python3.4

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-14T22:48:50.610

OP 在询问属性文件，而不是在 ant 构建文件中。不幸的是，不能从属性文件中完成条件。您可以做的是为每组依赖属性设置单独的属性文件。例如：

**构建.xml**

```
<condition property="app.name" value="appA">
    <equals arg1="${appName}" arg2="A" />
</condition>
<condition property="app.name" value="appB">
    <equals arg1="${appName}" arg2="B" />
</condition>
<property file="${app.name}.properties" />
<!-- since properties are immutable, set your defaults here -->
<property name="apache.root" value="/var" />
<property file="restOfProps.properties" /> 
```

**appA.properties**

```
apache.root=/appA 
```

**restOfProps.properties**

```
my_property=${apache.root}/myapp 
```

# android - 在sqlite中创建多个表的问题

> ID：13553676
> 
> 赞同：10
> 
> 时间：2012-11-25T17:47:47.727
> 
> 标签：android, sqlite, android-sqlite

我正在使用以下代码在数据库中创建多个表。但是，我不明白为什么会出现这个问题。

```
private static final String TABLE_SMSFilter = "SMSFilter";

public void onCreate(SQLiteDatabase db)
    {
        Log.d("Test", "Control is in Oncreate()");
        String CREATE_SMSSSCHEDULE_TABLE = "CREATE TABLE " + TABLE_SMSSchedule
                + "(" + KEY_ID + " INTEGER PRIMARY KEY autoincrement,"
                + KEY_NUMBER + " TEXT)";

        String CREATE_PROFILE_SCHEDULE_TABLE = "CREATE TABLE "
                + TABLE_ProfileSchedule + "(" + ProfileSchedule_ID
                + " INTEGER PRIMARY KEY autoincrement,"
                + ProfileSchedule_NUMBER + " TEXT, "
                + ProfileSchedule_ProfileMode + " TEXT,"
                + ProfileSchedule_CalendarID + "INTEGER)";

        String CREATE_SMS_FILTER_TABLE = "CREATE TABLE " + TABLE_SMSFilter
                + "(" + SMSFilter_ID + " INTEGER PRIMARY KEY autoincrement,"
                + SMSFilter_NUMBER + " TEXT)";

        db.execSQL(CREATE_SMSSSCHEDULE_TABLE);
        db.execSQL(CREATE_PROFILE_SCHEDULE_TABLE);
        db.execSQL(CREATE_SMS_FILTER_TABLE);
    }

    // Upgrading database
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
    {
        // Drop older table if existed
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_SMSSchedule);
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_ProfileSchedule);

        db.execSQL("DROP TABLE IF EXISTS " + TABLE_SMSFilter);

        // Create tables again
        onCreate(db);
    } 
```

这是插入功能

```
public void addSMSFilter(SMSFilter filterVariable)
    {

        SQLiteDatabase db = this.getWritableDatabase();

        ContentValues values = new ContentValues();
        values.put(SMSFilter_NUMBER, filterVariable.getPhoneNumber()); // Contact
                                                                        // Name
        // values.put(KEY_PH_NO, contact.getPhoneNumber()); // Contact Phone

        Log.d("test", "inserting" + filterVariable.getPhoneNumber());
        // Inserting Row
        db.insert(TABLE_SMSFilter, null, values);

        db.close(); // Closing database connection
    } 
```

现在在我的主要活动中，我使用此代码插入此表

```
DatabaseHandler db = new DatabaseHandler(this);

        SMSFilter sms = new SMSFilter("1234556");
        db.addSMSFilter(sms); 
```

但它给了我没有找到表“SMSFILTER”的错误。

日志结果在这里

```
11-25 22:52:22.643: I/Database(12209): sqlite returned: error code = 1, msg = no such table: SMSFilter
11-25 22:52:22.643: E/Database(12209): Error inserting PhoneNo=1234556
11-25 22:52:22.643: E/Database(12209): android.database.sqlite.SQLiteException: no such table: SMSFilter: , while compiling: INSERT INTO SMSFilter(PhoneNo) VALUES(?);
11-25 22:52:22.643: E/Database(12209):  at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
11-25 22:52:22.643: E/Database(12209):  at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:91)
11-25 22:52:22.643: E/Database(12209):  at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:64)
11-25 22:52:22.643: E/Database(12209):  at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:80)
11-25 22:52:22.643: E/Database(12209):  at android.database.sqlite.SQLiteStatement.<init>(SQLiteStatement.java:36)
11-25 22:52:22.643: E/Database(12209):  at android.database.sqlite.SQLiteDatabase.compileStatement(SQLiteDatabase.java:1212)
11-25 22:52:22.643: E/Database(12209):  at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1610)
11-25 22:52:22.643: E/Database(12209):  at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1484)
11-25 22:52:22.643: E/Database(12209):  at com.scheduler.database.DatabaseHandler.addSMSFilter(DatabaseHandler.java:327)
11-25 22:52:22.643: E/Database(12209):  at com.schedule.test.TestActivity.onCreate(TestActivity.java:31)
11-25 22:52:22.643: E/Database(12209):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1069)
11-25 22:52:22.643: E/Database(12209):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2751)
11-25 22:52:22.643: E/Database(12209):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2803)
11-25 22:52:22.643: E/Database(12209):  at android.app.ActivityThread.access$2300(ActivityThread.java:135)
11-25 22:52:22.643: E/Database(12209):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2136)
11-25 22:52:22.643: E/Database(12209):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-25 22:52:22.643: E/Database(12209):  at android.os.Looper.loop(Looper.java:144)
11-25 22:52:22.643: E/Database(12209):  at android.app.ActivityThread.main(ActivityThread.java:4937)
11-25 22:52:22.643: E/Database(12209):  at java.lang.reflect.Method.invokeNative(Native Method)
11-25 22:52:22.643: E/Database(12209):  at java.lang.reflect.Method.invoke(Method.java:521)
11-25 22:52:22.643: E/Database(12209):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
11-25 22:52:22.643: E/Database(12209):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
11-25 22:52:22.643: E/Database(12209):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T17:29:07.410

`onUpgrade``databse version number`更改时调用。更新表时，您需要增加数据库`version number`，在方法中指定新表创建查询`onCreate`并放入方法`ALTER TABLE`以`onUpgrade`更新以前版本的表。当Android检测到数据库版本不匹配时，会`onUpgrade`自动调用方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-19T20:56:04.220

请注意，仅在第一次创建数据库物理文件时才调用*onCreate 。*似乎没有调用*onCreate*方法，因为数据库已经存在于 SDCard 中的某处。因此未创建表*SMSFilter 。*您需要将 onCreate 中的代码复制到*onUpgrade*方法（在 drop table 命令之后）。此外，要触发*onUpgrade*，您必须增加数据库版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-20T11:57:31.320

```
String CREATE_PROFILE_SCHEDULE_TABLE = "CREATE TABLE "
            + TABLE_ProfileSchedule + "(" + ProfileSchedule_ID
            + " INTEGER PRIMARY KEY autoincrement,"
            + ProfileSchedule_NUMBER + " TEXT, "
            + ProfileSchedule_ProfileMode + " TEXT,"
            + ProfileSchedule_CalendarID + "INTEGER)"; 
```

将此更新为

```
String CREATE_PROFILE_SCHEDULE_TABLE = "CREATE TABLE "
            + TABLE_ProfileSchedule + "(" + ProfileSchedule_ID
            + " INTEGER PRIMARY KEY autoincrement,"
            + ProfileSchedule_NUMBER + " TEXT, "
            + ProfileSchedule_ProfileMode + " TEXT,"
            + ProfileSchedule_CalendarID + " INTEGER)"; 
```

您的日程表创建代码不起作用，因为在最后一行没有空格 b/w 整数和列名正在创建问题。

# objective-c - UILocalNotification 有时不通知我

> ID：13553677
> 
> 赞同：2
> 
> 时间：2012-11-25T17:47:50.903
> 
> 标签：objective-c, ios, uilocalnotification

在我的应用程序中，我每次打开应用程序时都会安排一些 UILocalNotification，但有时会发生 uilocalnotification 未触发并且不通知我，并且当它们不再触发时，要修复它我必须重新安装应用程序iPhone，所以我很好地解释了我，通知工作有一段时间，然后有一天不再工作并且修复它我必须重新安装它，所以为了调查我已经创建了这个方法当应用程序激活时调用它：

```
-(void)checkNotification {

for (UILocalNotification *someNotification in [[UIApplication sharedApplication] scheduledLocalNotifications]) {

    NSLog(@"%@",someNotification.alertBody);
    NSLog(@"%@",someNotification.fireDate);
}
} 
```

我看到所有通知都已安排好，还有日期，这是一个例子：

```
2012-11-25 18:36:36.532 TestApp[672:907] This is a notification.
2012-11-25 18:36:37.482 TestApp[672:907] 2012-11-27 10:00:00 +0000 
```

所以我不明白为什么我没有收到通知......有什么帮助吗？

**编辑：** 我以这种方式创建通知：

```
UILocalNotification *localNotification = [[UILocalNotification alloc] init];
localNotification.fireDate = myNewDate;
localNotification.timeZone = [NSTimeZone defaultTimeZone];
localNotification.alertBody = @"This is a notification.";
localNotification.soundName = @"smallBell.mp3";
[[UIApplication sharedApplication] scheduleLocalNotification:localNotification]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:01:27.103

您可能会或可能不会收到警报消息。这取决于您的应用程序是否正在运行以及处于何种状态，例如在前台处于活动状态、在后台处于活动状态或根本不运行。

请参阅这篇文章进行澄清 - [http://www.thekspace.com/home/component/content/article/62-uilocalnotification-demystified.html](http://www.thekspace.com/home/component/content/article/62-uilocalnotification-demystified.html)

# mysql - 交集表 MySQL

> ID：13553679
> 
> 赞同：1
> 
> 时间：2012-11-25T17:48:03.060
> 
> 标签：mysql, intersection

我做了三张表，其中两张只是关于客户和产品的信息，第三张只是保存产品的数量（更具体的信息）

两个说明吧！我放了一张[表格草图并要求输出](http://i.stack.imgur.com/EgZb9.png)

问题1：像我一样这样做是个好主意吗？

问题 2：我正在使用 PHP，所以当我尝试使用子信息填充数组以构建附件图像中显示的“要求”表时，这很糟糕吗？

非常感谢

# postgresql - postgresql 9.1 上的 SELECT 性能问题

> ID：13553680
> 
> 赞同：0
> 
> 时间：2012-11-25T17:48:05.433
> 
> 标签：postgresql, io, ubuntu-12.04, postgresql-9.1

我正在 ubuntu 12.04 上构建一个大型 postgres 9.1 数据库，其中一个表包含大约 8000 万行左右。每当我运行 SELECT 语句时：

```
SELECT * FROM db WHERE ID=1; 
```

执行只返回几千行的查询大约需要 2.5 分钟。在磁盘 I/O 上运行一些诊断程序后，我认为这不是问题，但以防万一下面是诊断程序的输出。（我有 2GB 的 RAM）我不太确定这里有什么好的输出，但考虑到互联网上其他服务器的统计数据，这似乎是一个大概。

```
time sh -c "dd if=/dev/zero of=bigfile bs=8k count=500000 && sync"

500000+0 records in
500000+0 records out
4096000000 bytes (4.1 GB) copied, 106.969 s, 38.3 MB/s

real    1m49.091s
user    0m0.248s
sys     0m9.369s 
```

我对 postgresql.conf 进行了相当大的修改，将有效缓存提高到 75% 的内存，将 shared_buffers 提高到 25%，将 checkpoint_segments 提高到 15，work_mem 提高到 256MB，autovacuum，内核上的 SHMMAX 等等。我有一些性能提升，但不超过好 5%。网络不应该是一个问题，因为即使在 localhost 上运行它仍然需要很长时间。我计划添加更多数据，查询时间似乎随着行数的增加而快速增长。

看来我应该能够在几秒钟内运行这些 SELECT 语句，而不是几分钟。关于这个瓶颈可能在哪里的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T18:00:24.930

抱歉，如果这是不可原谅的明显，但是您在 ID 列上有索引吗？

另外，虽然我不是在责怪磁盘，但您只是测试了顺序带宽，它很少告诉您有关延迟的信息。虽然我不得不说，即使是这样的衡量标准，38 MB/s 也令人印象深刻......

# c# - WPF 设计器 System.InvalidOperationException

> ID：13553681
> 
> 赞同：0
> 
> 时间：2012-11-25T17:48:15.587
> 
> 标签：c#, wpf, wcf

我有一个 WPF 窗口，它调用连接到 WCF Web 服务的类库。这个Window的构造函数调用类库来获取一些数据。

运行解决方案时一切正常，但是当我尝试在设计模式下打开窗口时，出现此错误：

在 ServiceModel 客户端配置部分中找不到引用合同“FinancesService.IAccountingService”的默认端点元素。这可能是因为没有为您的应用程序找到配置文件，或者因为在客户端元素中找不到与此合同匹配的端点元素。

我试过谷歌，但它只说我的问题是配置文件，但我的主项目中有配置。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T18:05:22.080

您可以使用[DesignerProperties.GetIsInDesignMode](http://msdn.microsoft.com/en-us/library/system.componentmodel.designerproperties.getisindesignmode.aspx)来检测设计模式，并避免尝试调用您的 Web 服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T18:01:41.947

当您将控件从设计器放入某种形式时，Visual Studio 会执行您的控件代码（至少是 ctor）。当您的控件由 VS 实例化并且您的代码确实包含一些用于连接到远程端点的代码时，您将收到此异常，因为您的控件将您的“正常”进程假定为托管进程。

最简单的事情是检查您的 ctor 以了解执行过程。如果它是 devenv.exe，那么您可以跳过 wcf 连接调用以显示您的控件。您应该注意不会发生后续异常，但现在这应该是一件容易的事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T18:03:31.727

最简单的解决方案似乎是从 WPF 窗口的 Loaded 事件处理程序执行 WCF 服务调用，作为奖励，它会使您的应用程序看起来更具响应性。

# tridion - 用户生成内容 - 动态检索热门内容

> ID：13553688
> 
> 赞同：3
> 
> 时间：2012-11-25T17:48:50.123
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

查看 Tridion SP1 2011 中的 UGC 文档，是否可以动态查询“流行”内容 - 因此返回按评级或评论数量排序的所有页面或组件？

UGC 命令似乎处理单个页面/组件上的评论/评级 - 但不根据该数据查询内容。

当您安装 UGC 时，CD Web Service 中是否有可用的东西？

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T19:27:06.327

我绝对可以回答你的这部分问题：

> 当您安装 UGC 时，CD Web Service 中是否有可用的东西？

是的。当您安装 UGC 时，您的 CD Web 服务将获得这些 UGC 项目类型的新集合：

*   注释
*   物品统计
*   收视率
*   用户

您可以像这样获得最受欢迎的商品：

```
.../odata.svc/ItemStats?$orderby=AverageRating desc 
```

如果您先对其进行过滤，然后限制结果的数量，则可能会导致查询速度稍快：

```
.../odata.svc/ItemStats?$orderby=AverageRating desc&$filter=AverageRating gt 0.0&$top=5 
```

我希望这`ItemStats`可能也可以通过 Java 和 .NET API 获得。

# sql - 我如何运行 SQL 函数 QUERY

> ID：13553692
> 
> 赞同：0
> 
> 时间：2012-11-25T17:49:06.133
> 
> 标签：sql, oracle, function

我有 4 张桌子

*   `EMPLOYEE`( `E#, NAME`)，主键为`E#`
*   `DRIVER`( `E#, L#`)，主键是`E#`引用`EMPLOYEE`
*   `TRIP`( `T#, L#`), 主键是`T#`, 外键`L#`引用`DRIVER`
*   `TRIPPT`( `T#, PT#`) 主键是`T#`引用`TRIP`

我创建了一个函数来查找驱动程序执行的最长点的长度（pt# 的总数）

到目前为止我的查询：

```
create or replace function LONGPT (DL# in TRIP.L#%type)
   return TRIPPT.PT#%type
IS
   TRIPPT#   TRIPPT.PT#%type;
begin
   select max (PT#)
     into TRIPPT# 
     from TRIPPT
    where T# in (select T#
                   from TRIP
                  where L# = DL#);

   return nvl (TRIPPT#, 0);
end LONGPT; 
```

如何进行选择查询以显示`NAME`员工 LONGPT。不执行行程点的驱动程序名称也需要在查询中。

我努力了：

```
SELECT DRIVER.L# AS License_No, LONGTPT(TRIP.L#) AS "LONGEST POINT" 
FROM DRIVER 
   LEFT OUTER JOIN TRIP on DRIVER.L# = TRIP.L#; 
```

这仅查询 L# 和 LONGEST Point。

谁能指导我如何在显示员工姓名和我的函数 LONGPT 时执行选择语句。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T02:23:35.757

这是我设法弄清楚的工作查询。

```
SELECT DISTINCT EMPLOYEE.NAME, LONGPT(TRIP.L#) AS "LONGEST Point"
FROM DRIVER Join EMPLOYEE ON DRIVER.E# = EMPLOYEE.E# LEFT OUTER JOIN 
TRIP on DRIVER.L# = TRIP.L#; 
```

# mysql - SQL - 组合 3 个表问题

> ID：13553694
> 
> 赞同：2
> 
> 时间：2012-11-25T17:49:25.567
> 
> 标签：mysql, sql, join

我很抱歉，因为我是 SQL 和 stackoverflow 的新手。另外，我没有设计数据库，目前无法更改。我有以下表格：

**客户**(ClientId , Client_Name)
**Client_Purchases** (Purchase_id, ClientID, Credits, Credits_logged)
**Service_Log** (LogId, Purchase_id, log_date)

我想显示所有积分为 0 的客户，按最近的 log_date 排列。为此，我想先取总和（Credits - Credits_logged），如果它们等于 0，那么我知道客户没有剩余信用（记住客户可以有多个 Client_Purchases）。然后按最近的 log_date 安排，这似乎是我遇到问题的地方。

如果我执行以下操作：

```
SELECT  a.ClientId, a.Client_Name, (max(c.log_date))
FROM `Client_Purchases` AS a, Clients AS b, Service_Log AS c
WHERE b.ClientId=a.ClientId AND a.Purchase_id = c.Purchase_id
GROUP BY a.ClientId
HAVING sum(a.Credits-a.Credits_logged) = 0
ORDER BY (max(c.log_date)) DESC 
```

这几乎是正确的，只是它仍然显示可能已经购买的客户。我认为问题在于通过 Purchase_id 连接表的某个地方。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T17:52:50.183

您是否尝试过这样做：-

```
 SELECT a.ClientId, a.Client_Name, (max(c.log_date)) 
 FROM Client_Purchases AS a, Clients AS b, Service_Log AS c
 WHERE b.clientid=a.clientid       //stuid is not a column in your table as mentioned
 AND a.Purchase_id = c.Purchase_id 
 GROUP BY a.ClientId 
 HAVING sum(a.Credits-a.Credits_logged) = 0 
 ORDER BY (max(c.log_date)) 
 DESC 
```

# java - commons-net-3.1

> ID：13553695
> 
> 赞同：1
> 
> 时间：2012-11-25T17:49:26.823
> 
> 标签：java, apache-commons-net

对不起，如果这是一个愚蠢的问题，但我不知道如何做到这一点......我`commons-net-3.1`从[commons.apache.org](http://commons.apache.org/net/download_net.cgi)下载，但我不知道如何在我的 Java 系统库或其他任何我能找到的地方拥有它从使用它。我需要使用 org.apache.commons.io.FileUtils。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T17:52:11.540

您需要通过浏览下载/提取的二进制文件夹来将 jar 文件导入/添加到您的项目中。

例如在 Eclipse 中，右键单击项目 -> 构建路径 -> 库 -> 添加外部 jar

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T17:55:54.353

这对于您正在尝试做的事情可能有点过头了，但请使用依赖管理系统而不是手动管理您的依赖。现在需要更多的设置，但您稍后会获得回报（并且任何从事您项目的其他人都会感谢您）。

例如，看看[maven 。](http://maven.apache.org/)

# matlab - 无法在 Matlab 中绘制图形'??? 使用 ==> mtimes' 时出错（内部矩阵尺寸必须一致。）

> ID：13553697
> 
> 赞同：0
> 
> 时间：2012-11-25T17:49:41.017
> 
> 标签：matlab

当我在 MatLab 中输入这个方程时，我收到以下错误：

```
x=linspace(0,8*pi,1000);
y=x*sin(x);

??? Error using ==> mtimes
Inner matrix dimensions must agree. 
```

非常感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T17:55:07.433

您的问题与绘图无关。

但是你想要逐元素乘法。例如，.* 而不是 *

x=linspace(0,8*pi,1000); y=x.*sin(x);

[http://stuff.mit.edu/afs/sipb/project/www/matlab/imatlab/node10.html](http://stuff.mit.edu/afs/sipb/project/www/matlab/imatlab/node10.html)

# php - “调用时传递引用已被删除”

> ID：13553698
> 
> 赞同：4
> 
> 时间：2012-11-25T17:49:46.083
> 
> 标签：php, wordpress, dotcloud

我正在尝试使用此 repo 在 Dotcloud 上部署 Wordpress，但日志中出现错误：

```
18:59:19: [www.0] Running postinstall script...
18:59:21: [www.0] PHP Fatal error:  Call-time pass-by-reference has been removed in /home/dotcloud/rsync-1353715101184/dotcloud-scripts/feed-wp-config.php on line 86 
```

查看[feed-wp-config.php 中的第 86 行](https://github.com/qpleple/wordpress-on-dotcloud/blob/master/dotcloud-scripts/feed-wp-config.php#L86)，它显示：

```
$content = preg_replace('/(define\(\'' . $property . '\', \')(.*)(\'\);)/', '${1}' . $value . '${3}', $content, -1, &$count); 
```

当我进入 Wordpress 开始页面时，它说：“似乎没有 wp-config.php 文件。在我们开始之前我需要这个。”

我已将[其交叉发布到 repo 的 Github 问题跟踪器](https://github.com/qpleple/wordpress-on-dotcloud/issues/2)，但由于尚未收到回复，我也将其发布在这里，希望有人知道答案。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-25T17:53:26.543

替换 `&$count`为`$count`. `&`意味着您希望通过引用而不是值传递变量：

[文档说](http://php.net/manual/en/language.references.pass.php)

> 函数调用没有参考符号 - 仅在函数定义上。仅函数定义就足以通过引用正确传递参数。从 PHP 5.3.0 开始，当您在 foo(&$a); 中使用 & 时，您将收到一条警告说“调用时传递引用”已被弃用。

所以如果你想通过引用函数来传递变量，你应该`&`在函数声明中使用：

现在应该这样做：

```
// right
function foo(&$var) {
...
}

foo($foo); 
```

但不是这样（当您收到此警告时）：

```
function foo($var) {
...
}

foo(&$foo);   // <--- wrong 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T17:51:52.737

删除行`&$count`尾的 & 符号。

~~请记住，这是 wordpress 中的核心 hack，它会在更新时丢失。~~.

# java - 错误在哪里？寻找多数

> ID：13553700
> 
> 赞同：2
> 
> 时间：2012-11-25T17:50:00.920
> 
> 标签：java

我想在数组中找到大多数（大多数时间出现的数字）。我有一个排序数组并使用这些循环：

```
for(int k = 1;k < length;k++)
{
    if(arr[k-1] == arr[k])
    {
        count++;
        if(count > max)
        {
            max = count;
            maxnum = arr[k-1];
        }
    } else {
        count = 0;
    }
} 
```

或者

```
for(int h=0;h<length;h++)
{
    for(int l=1;l<length;l++)
    {
        if(arr[h] == arr[l])
        {
            count++;
            if(count > max)
            {
                max = count;
                maxnum = arr[h];
            }
        } else count = 0;
    }
} 
```

他们是相似的。当我在小型阵列上尝试它们时，一切似乎都很好。但是在具有 N 个元素 0<=N<=500000 的长期数组中，每个元素 K 0<=K<=10^9 他们给出错误的答案。这是错误的解决方案[http://ideone.com/y2gvnX](http://ideone.com/y2gvnX)。我知道有更好的算法可以找到多数，但我只需要知道我的错误在哪里。

我真的找不到它:(非常感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T18:03:22.883

首先，您应该使用`first algorithm`, 因为您的数组已排序。第二个算法不必要地遍历数组两次。

现在你`first algorithm`几乎是正确的，但它有**两个问题**： -

*   第一个问题是您正在设置`count = 0`，在其他部分，它应该设置为`1`。因为每个元素至少出现一次。
*   其次，您不需要`max`每次都在`if`. 只要 `increment count`，直到`if-condition`满足 ，并尽快`condition fails`，检查`current count`with `current max`，并相应地重置当前最大值。

这样，您`max`将不会在每次迭代时都被检查，而只会在发现*不匹配*时检查。

所以，你可以试试这个代码： -

```
 // initialize `count = 1`, and `maxnum = Integer.MIN_VALUE`.
    int count = 1;
    int max = 0;
    int maxnum = Integer.MIN_VALUE;

    for(int k = 1;k < length;k++)
     {
         if(arr[k-1] == arr[k]) {
              count++;   // Keep on increasing count till elements are equal

         } else {
             // if Condition fails, check for the current count v/s current max

             if (max < count) {   // Move this from `if` to `else`
                 max = count;
                 maxnum = arr[k - 1];
             }
             count = 1;  // Reset count to 1\. As every value comes at least once.
         }
     } 
```

**笔记 ： -**

这种方法的问题是，如果两个数字说 -`1`和`3`，出现相同的次数 - 这是最大值，那么`max`计数将被计算`3`（假设`3`在 之后`1`，并且`maxnum`将包含`3`和忽略`1`。但它们都应该被考虑。

所以，基本上，你不能使用 a`for loop`和维护 a`count`来解决这个问题。

更好的方法是创建一个`Map<Integer, Integer>`, 并将每个值的计数存储在其中。然后在`sort`那个。`Map``value`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T17:57:48.240

只有对数组进行了排序，您的第一个算法才有意义。

您的第二个算法只是在错误的地方将计数设置为零。您想在进入内部`for`循环之前将计数设置为零。

```
 for(int h=0;h<length;h++)
 {
  count = 0;
  for(int l=0;l<length;l++)
  {
   if(arr[h] == arr[l])
   {
    count++;
    if(count > max)
    {
     max = count;
     maxnum = arr[h];
    }
   }
  }
 } 
```

此外，您不需要`count`在内部循环中每次都检查。

```
 max = 0;
 for(int h=0;h<length;h++)
 {
  count = 0;
  for(int l=0;l<length;l++)
  {
   if(arr[h] == arr[l])
    count++;
  }
  if(count > max)
  {
   max = count;
   maxnum = arr[h];
  }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T18:03:04.597

我很容易看到的错误是，如果所有元素都是不同的，那么最后的最大值为 0。但是它必须为 1。因此，当您在“其他”情况下更新计数时，将其更新为 1 而不是 0，作为新元素被发现，其计数为 1。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T18:03:44.083

你的第一个算法对我来说看起来是正确的。第二个（这是您的链接代码使用的）每次循环都需要一些初始化。此外，内循环不需要`1`每次都启动；它可以开始于`h + 1`：

```
for(int h=0; h<length; h++)
{
    count = 1; // for the element at arr[h]
    for(int l=h + 1; l<length; l++)
    {
        if(arr[h] == arr[l])
        {
            count++;
        }
    }
    if(count > max)
    {
        max = count;
        maxnum = arr[h];
    }
} 
```

第一个算法对于排序数组要好得多。即使对于未排序的数组，对数组（或它的副本）进行排序然后使用第一个算法而不是使用第二个算法也会更便宜。

请注意，如果存在关联（例如根据`[1, 1, 2, 2, 3]`@Rohit 的评论对于数组），这将找到具有最大计数的第一个值（按排序顺序）。

# java - 我如何获得目录和子目录中的所有文本文件？

> ID：13553703
> 
> 赞同：1
> 
> 时间：2012-11-25T17:50:18.693
> 
> 标签：java, file

我知道如何通过此代码创建列表以包含目录中的所有文件

```
String path = "c:/test";
File folder = new File(path);
File[] listOfFiles = folder.listFiles(); 
```

但是如果我有目录有文件和子目录并且子目录有文件和子子目录等等..

我如何创建列表包含目录和子目录中的所有文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T17:56:48.383

你可以这样做：

```
protected java.util.List<File> setDirMap(File inputDir) {
    if (!inputDir.isDirectory()) {
        throw new IllegalArgumentException("Input File is not a directory");
    }
    Set<File> ans = new HashSet<File>();
    ans.add(inputDir);
    File[] dir = inputDir.listFiles(new FileFilter() {

        @Override
        /**
         * Returns true if pathname is a directory. False if not
         */
        public boolean accept(File pathname) {

            if (pathname.isDirectory()) {
                return true;
            } else {
                return false;
            }
        }
    });
    ans.addAll(Arrays.asList(dir));
    for (File current : dir) {
        ans.addAll(setDirMap(current));
    }
    return new ArrayList<File>(ans);

} 
```

这将返回所有目录和子目录。然后，您可以检查每个目录是否有任何您想要的内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T18:19:19.160

Try this code, this uses recursion....

```
import java.io.File;
import java.util.ArrayList;

public class FindIt {

    private ArrayList<String> arList = new ArrayList<String>();

    public void find(String s) {

        File f = new File(s);

        File[] fArr = f.listFiles();

        for (File x : fArr) {

            if (x.isFile()) {

                if (x.getName().endsWith(".txt")) {

                    arList.add(x.getName());

                }

                else {

                    continue;
                }

            }

            else {

                find(x.getAbsolutePath());
            }
        }

    }

    public static void main(String[] args) {

        FindIt f = new FindIt();
        f.find("D:\\xtop");

        for (String fileName : f.arList) {

            System.out.println(fileName);
        }
    }

} 
```

# ruby-on-rails - 从单元测试中调用模型方法

> ID：13553706
> 
> 赞同：0
> 
> 时间：2012-11-25T17:50:31.020
> 
> 标签：ruby-on-rails, unit-testing, devise

我正在为我的模型添加单元测试，并且在对`gem 'devise'`. 这是我的测试代码：

```
require 'test_helper'

class UserTest < ActiveSupport::TestCase
  test "should not save user without name" do    
    user = User.new

    user.email = "david@test.com"
    user.password = "david123"

    assert !user.save, "Saved user without name"
  end
end 
```

运行测试时`ruby -Itest test/unit/user_test.rb`出现以下错误：

```
 1) Error:
test_should_not_save_user_without_email(UserTest):
ActiveRecord::StatementInvalid: PG::Error: ERROR:  column "password" of relation "users"  does not exist
LINE 1: INSERT INTO "users" ("name", "email", "password", "created_a...
                                          ^
: INSERT INTO "users" ("name", "email", "password", "created_at", "updated_at", "id") VALUES ('David', 'david@test.com', 'david123', '2012-11-25 17:43:02', '2012-11-25 17:43:02', 127326141) 
```

显然devise提供的password方法没有被调用。运行此测试的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T18:00:45.237

刚刚发现问题不在于测试代码，而是我`password`在用户的固定装置中设置了一个值。

# c - 有符号和无符号值是什么意思？

> ID：13553707
> 
> 赞同：22
> 
> 时间：2012-11-25T17:50:58.000
> 
> 标签：c

在 C 中是什么`signed`意思？我有这张表要显示：

![在此处输入图像描述](../Images/39770c11fe205ab8d412b6c2276707c9.png)

这`signed char` `128`对`+127`. `128`也是一个正整数，那么这怎么可能`+128`呢`+127`？或者做`128`和`+127`有不同的含义？我指的是 Apress[开始 C](http://www.apress.com/9781590597354)书。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-25T17:53:58.713

有符号整数可以表示负数；未签名的不能。

有符号整数如果溢出则具有未定义的行为，而无符号整数使用模数环绕。

请注意，该表不正确。首先，它缺少`-`符号（例如 -128 到 +127）。其次，该标准不保证这些类型*必须*在这些范围内。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-25T18:48:31.407

默认情况下，C 中的数值是有符号的，这意味着它们可以是负数也可以是正数。另一方面，无符号值不允许负数。

因为它只是关于内存，所以最后所有的数值都以二进制形式存储。一个 32 位无符号整数可以包含从所有二进制 0 到所有二进制 1 的值。当涉及到 32 位有符号整数时，这意味着它的一个位（最高有效位）是一个标志，它将值标记为正数或负数。所以，这是解释问题，它告诉值是有符号的。

正符号值的存储方式与无符号值相同，但负数使用*二进制补码*方法存储。

如果要在二进制中写入负值，首先写入正数，然后将所有位取反，最后加 1。当*二进制补码*中的负值与相同大小的正数相加时，结果将为 0。

在下面的示例中，让我们处理 8 位数字，因为它很容易检查：

```
positive 95: 01011111
negative 95: 10100000 + 1 = 10100001 [positive 161]
          0: 01011111 + 10100001 = 100000000
                                    ^
                                    |_______ as we're dealing with 8bit numbers,
                                             the 8 bits which means results in 0 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-25T17:53:09.293

该表缺少缺点。有符号字符的范围是-128 到+127；同样适用于桌子上的其他类型。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-25T18:49:09.383

这是书中的一个错字；signed char 从 -128 变为 127。

有符号整数使用[二进制补码](https://en.wikipedia.org/wiki/Two%27s_complement)表示形式存储，其中第一位用于指示符号。

在 C 中，字符只是 8 位整数。这意味着它们可以从 -(2^7) 变为 2^7 - 1。这是因为我们使用数字的最后 7 位和符号的第一位。0 表示正数，1 表示负数（以二进制补码表示）。

*   最大的正 7 位数是 (01111111)b = 2^7 - 1 = 127。
*   最小的负 7 位数是 (11111111)b = -128
    （因为 11111111 是 10000000 = 2^7 = 128 的二进制补码）。

无符号字符没有符号，因此它们可以使用所有 8 位。从 (00000000)b = 0 到 (11111111)b = 255。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-25T17:55:38.947

带符号的数字是带有 + 或 - 的数字。例如 +2 和 -6 是有符号数。有符号数可以存储正数和负数，这就是它们具有更大范围的原因。即-32768到32767

无符号数字只是没有符号的数字。他们总是积极的。它们的范围是从 0 到 65535。

希望能帮助到你

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-25T17:53:20.847

有符号通常意味着数字前面有一个 + 或 - 符号。这意味着 unsigned int、unsigned shorts 等不能为负数。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-04-07T11:47:53.830

没有人提到这一点，但表中的 int 范围是错误的：它是

```
-2^(31) to 2^(31)-1 
```

IE，

```
-2,147,483,648 to 2,147,483,647 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-25T18:03:16.817

首先，您的表格是错误的……缺少负数。参考 char.... 类型，您可以表示所有 256 种可能性，因为 char 有一个字节表示 2^8。所以现在你有两种选择来设置你的范围。从 -128 到 +128 或 0 到 255。第一个是有**符号字符**，第二个是**无符号字符**。如果您使用整数，请注意您使用的是哪种操作系统。16 位、32 位或 64 位。整数（16 位、32 位、64 位）。char 始终只有 8 位值。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-25T17:59:01.327

有符号整数可以具有负值和正值。而无符号整数只能有正值。

[对于使用二进制补码的](http://en.wikipedia.org/wiki/Two%27s_complement)有符号整数，这是最常用的，范围是（取决于整数的位宽）：

`char s -> range -128-127`

unsigned char 具有以下范围：

`unsigned char s -> range 0-255`

# java - 使用 RoboGuice 避免类范围工厂

> ID：13553708
> 
> 赞同：0
> 
> 时间：2012-11-25T17:51:15.327
> 
> 标签：java, android, roboguice

我正在尝试在我的 Android 项目中使用 Model-View-Presenter 模式。我正在使用带有[AssistedInject](http://code.google.com/p/google-guice/wiki/AssistedInject)的优秀 RoboGuice 项目来管理我的依赖项。我正在为创建演示者实例的风格而苦苦挣扎。

AssistedInject 似乎要求我首先*注入*一个工厂以创建演示者，然后使用该工厂创建演示者的实例。注入（似乎）仅在类范围级别起作用；我无法*注入*局部变量。我的方法不需要工厂和演示者；我只关心工厂足够长的时间来生成一个演示者。我想避免保留大部分无用的工厂。

## 更多详情

在我的模式实现中，我为每个演示者和视图选择保持对另一个的引用。通常必须向演示者传递一个或多个用于与模型交互的“服务”对象。Android Activity 是（MVP）视图的实现。Activity 必须是任何 Android 应用程序的组合根。因此，每个活动都必须实例化一个演示者，并且该演示者需要服务以及对视图的引用。

一般来说，主持人看起来像

```
public class GreatStuffPresenter {
    private final SomeService service;
    private final GreatStuffView view;

    @Inject
    public GreatStuffPresenter(SomeService service, @Assisted GreatStuffView view) {
        this.service = service;
        this.view = view;
        bind();
    }

    public void bind() {
        Record r = service.getSomeRecord();
        view.setField(r.field);
    }
} 
```

和活动看起来像

```
public class GreatStuffActivity extends RoboActivity {
    @Inject private final GreatStuffPresenterFactory presenterFactory;
    private GreatStuffPresenter presenter;

    @Override
    public void onCreate(...) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.create_update_record);

        presenter = presenterFactory.create(this);
    }
} 
```

## 怎么办？

我不满意我必须`presenterFactory`在实例级别确定范围；我只在`onCreate()`. 我是否错过了 RoboGuice 可以为我表演的一些额外魔法？如果没有，我应该使用更好的做法或模式来避免这种不必要的范围界定吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T17:18:08.363

最后，我决定获取 RoboGuice 注射器，向它索要我的工厂实例，然后创建我正在寻找的演示者。我对这种方法相当满意；我不会用我不会使用的变量污染我的班级，而且这条线看起来相当简单。

```
public class GreatStuffActivity extends RoboActivity {
    private GreatStuffPresenter presenter;

    @Override
    public void onCreate(...) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.create_update_record);

        presenter = RoboGuice.getInjector(this).getInstance(GreatStuffPresenterFactory.class).create(this);
    }
} 
```

# mysql - 1242 - 子查询在子查询中返回多于 1 行

> ID：13553715
> 
> 赞同：0
> 
> 时间：2012-11-25T17:51:43.510
> 
> 标签：mysql, sql

我正在尝试获取每个员工的待处理金额总数。以下查询工作正常：

```
SELECT SUM(amount) 
FROM pending
WHERE MONTH < DATE_SUB(curdate() , INTERVAL 1 MONTH) 
GROUP BY class 
```

但是当我尝试将它添加为子查询时，它给了我以下错误：

> 1242 - 子查询返回多于 1 行

```
SELECT
  (period_diff(date_format(now(), '%Y%m'),
     date_format(MONTH, '%Y%m'))) AS months,
  pending.amount,
  pending.admission_numb,
  pending.month,
  staff.name,
  staff.class, (
    SELECT SUM(amount) 
    FROM pending
    WHERE MONTH < DATE_SUB(curdate(), INTERVAL 1 MONTH) 
    GROUP BY class
  )
FROM
  pending JOIN staff
  ON pending.admission_numb = staff.admission
GROUP BY admission
ORDER BY CAST( staff.class AS UNSIGNED ) , staff.class 
```

任何帮助将不胜感激..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T18:03:52.657

由于您的子查询返回不止一行（我希望它会为每个类返回一行），您需要在 from 子句中加入您的子查询：

```
SELECT
  (period_diff(date_format(now(), '%Y%m'), date_format(MONTH, '%Y%m'))) AS months,
  pending.amount,
  pending.admission_numb,
  pending.month,
  staff.name,
  staff.class,
  sums.tot
FROM
  pending JOIN staff ON pending.admission_numb = staff.admission
  JOIN  (
    SELECT class, SUM(amount) as tot 
    FROM pending
    WHERE MONTH < DATE_SUB(curdate(), INTERVAL 1 MONTH)
    GROUP BY class
  ) sums on staff.class = sums.class
GROUP BY admission
ORDER BY CAST( staff.class AS UNSIGNED ) , staff.class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T17:56:34.697

这很简单，真的。子查询只能返回一行。这就是错误消息告诉您的内容。您提供的查询很可能返回不止一行（实际上每个类一个）。由于您没有提供任何输出，我只能猜测这是真的。

要修复它，您需要更改该查询以返回一行。也许您摆脱了`GROUP BY`，或者您选择了最大（或最小）的总和并将其返回。这取决于您的业务需求。

# ios - 当应用程序处于后台时重复任务（例如从服务器拉取某些东西），没有 APNs

> ID：13553718
> 
> 赞同：2
> 
> 时间：2012-11-25T17:51:51.713
> 
> 标签：ios, background, push-notification

除了使用推送通知来触发应用程序以定期运行某些代码（特别是：从服务器拉取新消息）之外，是否有苹果认可的良好替代方案？

*   伪装成 VoIP 应用程序不是一个好的选择（不会被批准，请参阅[iPhone：重复后台任务](https://stackoverflow.com/questions/6064747/iphone-repeating-background-task)）
*   我不能使用位置更新，如果用户不四处走动，它应该可以工作

在模拟器中，使用`beginBackgroundTaskWithExpirationHandler`with`dispatch_async`会给你 10 分钟的后台时间，我发现如果后台“自行重启”，该`backgroundTimeRemaining`属性似乎总是​​被重置为 10 分钟。这是代码。

```
- (void) work
{
    UIApplication *application = [UIApplication sharedApplication];

    NSLog(@"bg %@ (T-%.1f seconds)",
          [NSDate date],
          [application backgroundTimeRemaining]);
    sleep(10);

    [application endBackgroundTask:_bgTask];
    _bgTask = UIBackgroundTaskInvalid;

    [self startTask];
}

- (void)startTask
{
    UIApplication *application = [UIApplication sharedApplication];
    _bgTask = [application beginBackgroundTaskWithExpirationHandler:^{
        NSLog(@"expired at %@", [NSDate date]);

        [application endBackgroundTask:_bgTask];
        _bgTask = UIBackgroundTaskInvalid;
    }];

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND,
                                             0),
                   ^{ [self work]; });
}

- (BOOL) application:(UIApplication*)application didFinishLaunchingWithOptions:(NSDictionary*)launchOptions
{
    /* ... */

    [self startTask];

    /* ... */
} 
```

在后台运行某些东西是一种公认​​的做法吗？我的意思是，大多数时候我只是`sleep(...)`想重复一个网络请求或做一些有用的事情，但应用程序永远不会真正进入完全后台模式。有没有人有这种方法的经验？提示：仅在模拟器上测试，没有其他正在运行的应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-05-18T23:23:25.893

[Apple 批准的替代方案在https://developer.apple.com/library/ios/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/BackgroundExecution/BackgroundExecution.html](https://developer.apple.com/library/ios/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/BackgroundExecution/BackgroundExecution.html)中列出

查看“表 3-1 应用程序的后台模式”，从服务器重复获取信息的两个相关替代方案是“后台获取”或“远程通知”。

“远程通知”是推送通知，您说您不想使用。

* * *

因此，“后台提取”是相关的选择。例如，请参阅[https://blog.newrelic.com/2016/01/13/ios9-background-execution](https://blog.newrelic.com/2016/01/13/ios9-background-execution) “机会性地下载远程内容”。

但是，这并没有给您（开发人员）在 Android 中的控制程度。有“setMinimumBackgroundFetchInterval”，但请注意这是一个最小值：iOS 决定何时调用您的应用程序进行下一次后台提取。（Apple 专注于整体电池使用情况和设备响应能力；一旦您的应用程序在后台运行，设计得可以优雅地工作，而不管给予多少关注。）

注意：如果用户终止了您的应用程序，“后台获取”将随之终止。这是设计使然。（从用户的角度来看，这是一件好事：大多数应用程序在被杀时应该保持死机。）

* * *

考虑结合使用“推送通知”（remote-notification）和“后台获取”。例如，如果用户允许您的应用程序“推送通知”，那么每天进行一次推送，并向用户发送文本通知。如果他们打开该通知，那将打开您的应用程序。然后开始数据获取。如果他们点击主页按钮，请使用“后台获取”在一天中定期继续获取数据。

非常注重电池的用户可能会定期关闭所有应用程序。如果他们今天不想被您的应用打扰，他们会忽略或删除您应用的推送通知。认为这是一件好事：在用户没有积极使用您的应用程序的日子里，您不会因为耗尽电池电量而惹恼用户。

喜欢严格控制手机上运行的内容的用户将不允许您的应用推送通知。（例如，我讨厌每天收到短信通知。不要打电话给我，我会打电话给你。）在这种情况下，一旦你的应用程序被杀死，你就无能为力了（因为推送通知是唯一的方法复活你死掉的应用程序，而我，用户，对此说“不”）。请务必考虑如何为此类用户提供服务。（当他们第一次重新打开您的应用时，您的内容可能已经过时。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T19:00:22.440

您无法在普通 iPhone 上执行此操作。如果你找到了解决办法，Apple 最终会修复漏洞并拒绝你的应用程序。

我不知道越狱的iphone，我怀疑它们可能会以某种方式出现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-22T21:35:50.783

我认为您可以使用“本地通知”来触发在特定时间发生的事情。

[https://developer.apple.com/library/content/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/SchedulingandHandlingLocalNotifications.html#//apple_ref/doc/uid/TP40008194-CH5-SW1](https://developer.apple.com/library/content/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/SchedulingandHandlingLocalNotifications.html#//apple_ref/doc/uid/TP40008194-CH5-SW1)

# android - “State.CONNECTED”：CONNECTED 无法解析或不是字段

> ID：13553719
> 
> 赞同：0
> 
> 时间：2012-11-25T17:51:56.887
> 
> 标签：android, state

我想检查我的 Android 应用程序是否已连接到 Internet。我复制了我在一本书中读到的代码，这里是：

```
ConnectivityManager cm = (ConnectivityManager) getSystemService(CONNECTIVITY_SERVICE);
                    NetworkInfo networkInfo = cm.getActiveNetworkInfo();
                    int networkType = networkInfo.getType();
                    android.net.NetworkInfo.State networkState = networkInfo.getState();
                    if (networkState.compareTo(State.CONNECTED)==0)
                    {
                        //We are connected!!!
                    } 
```

我还授予我的应用访问网络状态的权限，但 Eclipse 在 State.CONNECTED 旁边说：

**CONNECTED**无法解析或不是字段。

现在连书都错了？x（提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T17:55:24.587

您导入了错误的状态更改

```
if (networkState.compareTo(State.CONNECTED)==0)

```

至

```
if (networkState.compareTo(android.net.NetworkInfo.State.CONNECTED)==0)

```

# java - 了解 FlateDecode 编码的 PDF 流

> ID：13553720
> 
> 赞同：0
> 
> 时间：2012-11-25T17:52:01.117
> 
> 标签：java, pdf

**我在IText**中对 PDF 的平面解码流进行了编码，不幸的是，我有一个干净的文本，但无法准确说出它的含义......在**PDF 32000**中没有关于这个主题的文档......关于这个问题的任何其他文档?

***例子***

```
q
0 0 1 rg
0 0 520 150 re
f
0 g
Q
q
BT
36 806 Td
ET
Q 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-25T20:39:06.287

[ISO 32000-1:2008](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)（这是您称为*PDF 32000*的文档，不是吗？）记录了您的示例流的所有内容，尤其是第 8 章**图形**和第 9章**文本**：

```
q 
```

8.4.2*图形状态堆栈*：**q 操作符应将整个图形状态的副本压入堆栈。**

```
0 0 1 rg 
```

表 74*颜色运算符*：**rg - 与 RG 相同，但用于非描边操作。**

同上：**RG - 将描边颜色空间设置为 DeviceRGB（或 DefaultRGB 颜色空间；参见 8.6.5.6，“默认颜色空间”）并设置用于描边操作的颜色。每个操作数应为介于 0.0（最小强度）和 1.0（最大强度）之间的数字。**

```
0 0 520 150 re 
```

表 59*路径构造运算符*：**re - 将矩形作为完整的子路径附加到当前路径，左下角 (x, y) 以及用户空间中的宽度和高度。**

```
f 
```

表 60*路径绘制运算符*：**f - 填充路径，使用非零缠绕数规则确定要填充的区域（参见 8.5.3.3.2，“非零缠绕数规则”）。任何打开的子路径都应在填充之前隐式关闭。**

```
0 g 
```

表 74*颜色运算符*：**g - 与 G 相同，但用于非描边操作**

同上：**G - 将描边颜色空间设置为 DeviceGray（或 DefaultGray 颜色空间；参见 8.6.5.6，“默认颜色空间”）并设置用于描边操作的灰度级。gray 应为 0.0（黑色）和 1.0（白色）之间的数字。**

```
Q
q 
```

8.4.2*图形状态堆栈*：**q 操作符应将整个图形状态的副本压入堆栈。Q 操作符应该通过从堆栈中弹出它来将整个图形状态恢复到它以前的值。**

```
BT 
```

9.4.1*一般*（在 9.4*文本对象*中）：**文本对象以 BT 运算符开始，以 ET 运算符结束**

```
36 806 Td 
```

表 108*文本定位运算符*：**Td - 移动到下一行的开头，从当前行的开头偏移 (tx, ty)。tx 和 ty 应表示以未缩放的文本空间单位表示的数字。更准确地说，此操作员应执行这些分配**

```
ET 
```

9.4.1*一般*（在 9.4*文本对象*中）：**文本对象以 BT 运算符开始，以 ET 运算符结束**

```
Q 
```

8.4.2*图形状态堆栈*：**Q 操作符应通过从堆栈中弹出它来将整个图形状态恢复到其以前的值。**

如果您对其中一项操作的细节有疑问，您会在周围的明文中找到大量信息。如果学习后仍有问题，请随时提出。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T19:19:56.607

所以基本上这将：

1）从页面的原点（左下角）绘制一个填充的 100% 蓝色矩形，宽度为 520，高度为 120 个单位（大约等于 7.2 x 1.6 英寸）

2）没有任何文本命令做任何事情。“Td”运算符更改文本矩阵，但由于页面上没有绘制文本，您将看不到任何内容。而且因为它嵌入在“q .. Q”对中，所以它也不会对页面上跟随它的任何内容产生任何影响。

# iphone - 剪裁逆图？

> ID：13553727
> 
> 赞同：3
> 
> 时间：2012-11-25T17:52:44.160
> 
> 标签：iphone, geometry, drawing, core-graphics, clipping

我想删除以下图像的蓝色部分。如何剪裁图形的反面？（我相信这是提出问题的正确方法）

三角形的示例代码：（如果有更好的三角形代码，我也会接受！;）

```
 int lineWidth = 4;

    int w = size.size.width;
    int h = size.size.height - lineWidth;

    CGPoint top = CGPointMake(0+(w/2)+.5, 0);

    CGContextClipToRect(ctx, CGRectMake(0, 0, w, h));
    CGContextStrokePath(ctx);

    CGContextMoveToPoint(ctx, top.x, top.y);
    CGContextAddLineToPoint(ctx, top.x + (w/2), top.y + h  );
    CGContextAddLineToPoint(ctx, top.x - (w/2), top.y + h   );
    CGContextAddLineToPoint(ctx, top.x, top.y);

    CGContextFillPath(ctx);

    CGContextSetLineWidth(ctx, lineWidth);
    CGContextSetLineCap(ctx, kCGLineCapRound);
    CGContextMoveToPoint(ctx, top.x, top.y);
    CGContextAddLineToPoint(ctx, top.x + (w/2), top.y + h  );
    CGContextAddLineToPoint(ctx, top.x - (w/2), top.y + h   );
    CGContextAddLineToPoint(ctx, top.x, top.y);

    CGContextStrokePath(ctx); 
```

![在此处输入图像描述](../Images/fdc2c50033c51fa9a566b7b447c308fb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:22:04.633

一个简单的解决方案是使用 UIBazierPath。根据您的意图绘制一条 Bazier 路径。然后调用 [path addClip] 方法。它将剪辑封闭路径之外的所有内容。
例如，以下代码使您的视图变得圆滑。

```
UIBezierPath *path = [UIBezierPath bezierPathWithRoundedRect:self.bounds
                                           byRoundingCorners:UIRectCornerAllCorners
                                                 cornerRadii:CGSizeMake(6.0, 6.0)];
[path addClip]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T14:33:03.487

要剪辑任何路径的倒数，只需在剪辑中添加一个封闭的矩形。

在这种情况下，如果我没听错的话，您想剪裁形状的红色笔触。通常，由于描边路径的线宽，这在石英中并不是一件容易的事。当然，对于这两个形状，我们可以计算红色笔触的轮廓并围绕它进行裁剪。但是一个通用的解决方案需要一种方法来计算包含的路径，包括线宽。

还有其他包括位图蒙版的方法——但最好的解决方案取决于你到底在画什么。我刚刚遇到了一个类似的问题，我可以使用专门的石英混合模式非常优雅有效地解决它。这在很大程度上取决于绘制前 centtext 的内容以及结果应如何与 UI 的其余部分混合。

# web-services - Grails 中的 RESTful Web 服务

> ID：13553728
> 
> 赞同：1
> 
> 时间：2012-11-25T17:52:44.830
> 
> 标签：web-services, grails

我使用 Grails 制作了 OCR 服务，一切运行良好。我想为它制作一个 Web 服务。RESTfull WS的输入应该是mime格式（客户端会发送一些XML格式的图片和相关信息到这个WS）。我如何在 Grails 中实现这一点？任何示例代码来指导我？

谢谢，

礼萨

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:51:52.343

These days, most people do by writing one or more controllers that accept and return text/json (or text/xml if you really want).

Grails has great libraries on board for parsing these requests, all of which are part of the Groovy language:

*   [JsonSlurper](http://groovy.codehaus.org/gapi/groovy/json/JsonSlurper.html)
*   [XmlSlurper](http://groovy.codehaus.org/Reading+XML+using+Groovy%27s+XmlSlurper)
*   [JsonBuilder](http://groovy.codehaus.org/gapi/groovy/json/JsonBuilder.html)
*   [MarkupBuilder](http://groovy.codehaus.org/Creating+XML+using+Groovy%27s+MarkupBuilder) (for making xml)

I have used the approach above successfully on a project. You will end up with Controllers that are easy to unit test, which is a huge productivity win.

# c# - Windows 应用商店应用程序：xaml 中的泛型

> ID：13553731
> 
> 赞同：1
> 
> 时间：2012-11-25T17:52:57.997
> 
> 标签：c#, xaml, generics, windows-runtime, winrt-xaml

是否可以在 XAML 中为 Windows Store App 实例化泛型类型？

例如，我有页面基类：

```
public class PageBase<T> : Page
{
} 
```

如何`PageBase<string>`在 XAML 中创建类型的页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T17:56:12.660

不，开箱即用是不可能的。

您可以尝试一种解决方法（例如[此处](http://blogs.msdn.com/b/mikehillberg/archive/2006/10/06/limitedgenericssupportinxaml.aspx)），但从个人经验来看，我不建议这样做，事情变得非常混乱。我们已经尝试实现上述解决方案，但结果证明修改设计比从 XAML 处理泛型更容易。

在您的情况下，我建议使用特定类型从您的基页创建派生类。

# sqlite - node.js - 确定何时由于没有行而不调用每行异步函数

> ID：13553736
> 
> 赞同：5
> 
> 时间：2012-11-25T17:53:22.600
> 
> 标签：sqlite, node.js

我正在尝试编写将在 SQLite 查询不返回结果时执行的代码。然而，Node.js 的异步特性使这变得困难。我不知道我是否可以在回调函数中编写代码，因为当我使用会导致空结果的输入进行测试时，什么也没有发生。

我正在做

```
 db.each("SELECT pid, collection , photo FROM photos WHERE collection = '"+collection_id+"' AND pid = '"+photo_id+"' ", function(err, row) {
      console.log("PHOTO FOUND");

//code inside the callback function

  });
    //code I want 
```

具体来说，我想呈现一些通用的东西，以防用户请求不在数据库中的东西我该怎么办？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-25T18:53:54.777

这是来自您似乎正在使用的包的[API 文档（强调我的）：](https://github.com/developmentseed/node-sqlite3/wiki/API)

> ## Database#each(sql, [param, ...], [callback], [complete])
> 
> 使用指定的参数运行 SQL 查询，并为每个结果行调用回调。该函数返回数据库对象以允许函数链接。参数与`Database#run`函数相同，区别如下：
> 
> 回调的签名是`function(err, row) {}`. **如果结果集成功但为空，则永远不会调用回调。**在所有其他情况下，每个检索到的行都会调用一次回调。调用顺序与结果集中的行顺序完全对应。
> 
> **调用所有行回调后，如果存在，将调用完成回调。第一个参数是一个错误对象，第二个参数是检索到的行数。**如果您只指定一个函数，它将被视为行回调，如果您指定两个，第一个（==倒数第二个）函数将是行回调，最后一个函数将是完成回调。
> 
> 如果您知道查询只返回非常有限的行数，使用 Database#all 一次检索所有行可能更方便。

所以，看起来你的代码应该是这样的：

```
var sql = "SELECT pid, collection , photo FROM photos WHERE collection = '"+collection_id+"' AND pid = '"+photo_id+"' ";
db.each(sql, function(err, row) {
  console.log("PHOTO FOUND");
  //code inside the callback function
}, function(err, rows) {
  if (rows == 0) {
    //code I want
  }
}); 
```

# c - C 程序查找 on 函数的数量并显示所有函数

> ID：13553743
> 
> 赞同：2
> 
> 时间：2012-11-25T17:54:26.603
> 
> 标签：c, algorithm, recursion, discrete-mathematics

我必须编写一个 C 程序（用于我的离散数学作业），找到从集合`A (|A| = m)`到集合的函数数量`B (|B|=n)`并显示所有这些函数。我使用代码计算的 on 函数数：

```
for(k=0; k<n; k++)
    x = x + pow( -1, k) * combination( n, n - k ) * pow( ( n - k ), m); 
```

其中组合是查找可能组合数的函数。

例如，如果 A = {1,2,3}, B={a,b,c}，则从公式计算的到函数的数量为 3^3 - 3(2^3) + 3 = 6。一种可能解决方案是 f = {(1,a),(2,b),(3,c)} [我知道这是一个解决方案]。

但我的问题是：如何显示每一个解决方案！？这只是一个简单的例子。但是如果 m 和 n 值增加（假设 m>=n），那么可能的函数数量会成倍增加！例如，如果 m=7 和 n=4，则有 8400 个函数！

我想不出任何方法来显示 A 和 B 之间存在的每个函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T19:40:31.537

前段时间我回答了一个类似的问题，但 m 和 n 是相等的`m = n`。（你必须递归思考才能解决这个问题），根据你的评论，我认为可能的答案是：`{(1,a)(2,b)(3,c)}, {(2,a)(3,b)(1,c)}, {(3,a)(1,b)(2,c)}, {(3,a)(2,b)(1,c)}, {(2,a)(1,b)(3,c)} and {(1,a)(3,b)(2,c)}`那么这是我的食谱：

1.  用它们的初始值设置 2 个数组，让我们称它们为`letters`和`numbers`。

    ```
    *---*---*---*                          *---*---*---*
    | a | b | c | <---letters.             | 1 | 2 | 3 | <---numbers.
    *---*---*---*                          *---*---*---* 
    ```

2.  选择其中一个数组作为您的支点，我选择了`letters`，它将是静态的。

    ```
    *---*---*---*                          *---*---*---*
    | a | b | c | <---STATIC.              | 1 | 2 | 3 | <---DYNAMIC.
    *---*---*---*                          *---*---*---* 
    ```

3.  根据需要逆时针或顺时针旋转动态数组，您必须`i element of numbers`使用`i element of letters`.

    ```
    *---*---*---*               *---*---*---*                 *---*---*---* 
    | 1 | 2 | 3 |   -(Print)->  | 2 | 3 | 1 |    -(Print)->   | 3 | 1 | 2 |
    *---*---*---*               *---*---*---*                 *---*---*---* 
    ```

所以你在这一点上得到：`{(1,a)(2,b)(3,c)}, {(2,a)(3,b)(1,c)}, {(3,a)(1,b)(2,c)}`, 3 丢失了。

1.  `i element`与`n element`动态数组的交换。

    ```
    *---*---*---*                                     *---*---*---*
    | 1 | 2 | 3 |   ---------( Swap (0<->2) )-------> | 3 | 2 | 1 | 
    *---*---*---*                                     *---*---*---* 
    ```

2.  重复步骤 3。

    ```
    *---*---*---*               *---*---*---*                 *---*---*---* 
    | 3 | 2 | 1 |   -(Print)->  | 2 | 1 | 3 |    -(Print)->   | 1 | 3 | 2 |
    *---*---*---*               *---*---*---*                 *---*---*---* 
    ```

所以你得到了错过的子集：`{(3,a)(2,b)(1,c)}, {(2,a)(1,b)(3,c)} and {(1,a)(3,b)(2,c)}`.

如果您有超过 3 个示例 4\. 简单：（`1234`旋转 N 次，其中 N 是变量的数量并随着每次移动打印），交换 1 和 4 -> `4231`（旋转和打印），交换 2 和 3 -> `4321`（旋转和打印），交换 4 和 1 --> `1324`（旋转和打印）。

我希望这会有所帮助。

# android - 点击图像视图以启动活动并在android中的同一图像视图上实现捏缩放

> ID：13553745
> 
> 赞同：0
> 
> 时间：2012-11-25T17:54:55.860
> 
> 标签：android, zooming

是否有任何可能的方法来执行单击以在图像视图上启动另一个活动并在同一图像视图上实现捏缩放，我都是独立完成的。

我的问题是我不知道是否可以集成它们，因为它们都使用事件**.ACTION_DOWN**

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T18:03:43.867

您需要使用 GestureDetectors，它们会为您做出以下区分：

*   SimpleOnGestureListener将通知您[进行](http://developer.android.com/reference/android/view/GestureDetector.SimpleOnGestureListener.html)简单的点击[`onSingleTapConfirmed()`](http://developer.android.com/reference/android/view/GestureDetector.SimpleOnGestureListener.html#onSingleTapConfirmed%28android.view.MotionEvent%29)。
*   SimpleOnScaleGestureListener[将](http://developer.android.com/reference/android/view/ScaleGestureDetector.SimpleOnScaleGestureListener.html)处理缩放手势。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T18:03:30.137

您可以使用 onDoubleTap 代替单击：

```
@Override
public boolean onDoubleTap(MotionEvent e)
{
    //open dialog with your image and zoom it
{ 
```

# ios - 当我使用 AudioQueue 作为低延迟输入时，AudioQueueBuffer 数据在几秒钟后变为零

> ID：13553746
> 
> 赞同：2
> 
> 时间：2012-11-25T17:54:58.747
> 
> 标签：ios, buffer, recording, audioqueue

我对 AudioQueueInput 有一个严重的问题。我分配每个音频队列缓冲区大小为 512 个样本（以 44.1kHZ 采样率）。我的回调函数编写如下：

```
void MyAudioQueueInputCallback (
                                void                                *inUserData,
                                AudioQueueRef                       inAQ,
                                AudioQueueBufferRef                 inBuffer,
                                const AudioTimeStamp                *inStartTime,
                                UInt32                              inNumberPacketDescriptions,
                                const AudioStreamPacketDescription  *inPacketDescs
                                )
{    
    ANSampleInput *input = (__bridge ANSampleInput *)inUserData;

    Float32 * samples = (Float32 *)inBuffer->mAudioData;
    Float32 * data = malloc(input.framesPerBuffer * sizeof(Float32 *));
    memcpy(data, samples, input.framesPerBuffer * input->audioFormat.mBytesPerFrame );
    AudioQueueEnqueueBuffer(input->audioQueue, inBuffer, 0, NULL);

    for (int i = 0; i < 512; i ++) {
        printf("%f",data[i]);
    }
} 
```

这段代码是为了测试目的而写的，所以我没有添加任何其他方法。但只是这个简单的代码会导致问题。

当我按下按钮开始录制时，数据数组充满了原始 PCM 值。然而，几秒钟后，数据变成了全零。

当我在我的 iPod touch 4 中测试我的项目时，我首先遇到了这个问题。在此之前，我的 iPhone 模拟器中的一切正常（数据不会为零）（延迟非常低）。我想也许 iPod touch 4 的 CPU 不够强大，无法处理非常低延迟的回调。但是现在没有任何理由我的 iPhone 模拟器有同样的问题（根据调试器中弹出的信息也有高延迟）。

我检查了我的代码，我认为它与许多示例代码相同。现在我真的很困惑，因为模拟器也不起作用。

我的 AudioQueueInput 的初始化代码如下：

```
- (id)initWithSampleRate:(NSUInteger)rate bufferSampleCount:(NSUInteger)sampleNumber
{
    if ((self = [super init])) {
        self.sampleRate = rate;

        audioFormat.mFormatID = kAudioFormatLinearPCM;
        audioFormat.mChannelsPerFrame = 1;
        audioFormat.mBitsPerChannel = 8 * sizeof(Float32);
        audioFormat.mFramesPerPacket = 1;
        audioFormat.mSampleRate = rate;
        audioFormat.mBytesPerFrame = sizeof(Float32);
        audioFormat.mBytesPerPacket = sizeof(Float32);
        audioFormat.mFormatFlags = kAudioFormatFlagIsNonInterleaved | kAudioFormatFlagIsPacked | kAudioFormatFlagIsFloat;

        OSStatus status = AudioQueueNewInput(&audioFormat, MyAudioQueueInputCallback,
                                             (void *)CFBridgingRetain(self), CFRunLoopGetCurrent(),
                                             kCFRunLoopDefaultMode, 0, &audioQueue);
        if (status != noErr) {
            return nil;
        }

        self.framesPerBuffer = sampleNumber;

        for (int i = 0; i < kBufferCount; i++) {
            status = AudioQueueAllocateBuffer(audioQueue, sizeof(Float32) * self.framesPerBuffer, &buffers[i]);
            if (status != noErr) {
                for (int j = i - 1; j >= 0; j--) {
                    AudioQueueFreeBuffer(audioQueue, buffers[j]);
                }
                AudioQueueDispose(audioQueue, NO);
                return nil;
            }
            AudioQueueEnqueueBuffer(audioQueue, buffers[i], 0, NULL);
        }
    }
    return self;
} 
```

请有人帮助我！

编辑：

意外的是，当我删除 for 循环以打印示例数组中的每个值时，它工作正常，即使我对示例数组进行了一些处理。这很奇怪，因为 printf 不应该比 FFT 算法花费更多的时间。无论如何，它现在有效。

# php - 我应该如何使用 CodeIgniter 划分我的代码？

> ID：13553747
> 
> 赞同：0
> 
> 时间：2012-11-25T17:55:01.787
> 
> 标签：php, codeigniter

我在网上搜索过，只发现样式代码帖子。我想使用 Code Igniter 编写网站，我想知道我应该如何维护我的代码。

例如：

我应该为静态页面使用一个类，为每个页面使用一个方法，还是为每个静态页面使用单独的文件。我应该使用相同的文件来加载动态页面还是不同的文件？

我可以使用一些通用代码并将其自动包含到每个类中吗？

我怎么能说 header_view footer_view 等然后加载-> view('whatever') 和页脚、页眉和其他文件会自动加载。也许有更好的方法来做到这一点？

一般来说，使用 CodeIgniter 编码时的最佳实践是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T18:25:13.837

You can use one single class for static pages (and use one method for each page).

You can use the same one to load dynamic pages, but it is better IMO to load them with a separate class. It will be easier to maintain later.

Using common code: You can always override the CI_Controller with your own, and instantiating controllers from yours. [Here is an example](http://www.lizjamieson.co.uk/394/getting-started-with-codeigniter-6/) about how to do it.

You can load multiple views in a single controller function. A view doesn't have to be a full html document. You can also load the same view multiple times (for example in a loop).

Best practices: CodeIgniter is an MVC framework. IMO, MVC is a best practice. Always use the framework's documented features if they are suitable for what you want to achieve ([CodeIgniter's documentation](http://codeigniter.com/user_guide/) is very good. That link is momentarily offline, so please try [this one](http://userguides.ellislab.com/codeigniter/)).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T19:51:24.603

Codeigniter 是一个基于 MVC 的框架，MVC 基本上是用于组织你的代码，所以最终由你决定如何使用它，这样你就可以长期使用它。基本上，当我在 codeigniter 中设计大型项目时，我试图在一个地方制作功能单元，让我们以任何简单的用户、基于消息的项目为例。

我试图通过对主要主题进行分组来实现功能，在这个示例中，用户将是一个控制器，在该控制器中将有诸如登录、注册、编辑、列出、forgot_password 之类的方法现在我将使用所有方法创建单个模型上述方法的数据。通过使用这种方法，我们的 url 也将变得有意义，例如 /user/login、/user/register 等

像这样，如果它的消息我将创建控制器消息并在其中添加所有相关方法，以便我的相关功能将在一个组中。

至于静态页面的问题，如果它们可以成为组的一部分，您也可以将它们分组在一个控制器中。

您还可以对静态页面使用 codeigniter 的缓存技术，以便您的页面加载速度更快

# c - 将 char 指针转换为无符号字符数组

> ID：13553752
> 
> 赞同：7
> 
> 时间：2012-11-25T17:55:30.323
> 
> 标签：c

我想将 char 指针转换为 unsigned char var，我想我可以通过强制转换来做到这一点，但它不起作用：

```
char * pch2;
//Code that puts something in pc2
part1 = (unsigned char) pch2; 
```

我有这个的代码：

```
result.part1 = (unsigned char *) pch2;
printf("STRUCT %s\n",result.part1); 
```

结果只是一个带有无符号字符数组的结构。

编辑：

```
 pch2 = strtok( ip, "." );

            while( pch2 != NULL ){
                printf( "x %d x: %s\n", i, pch2 );
                pch2[size-1] = '\0';

                if(i == 1)
                    result.part1 = (unsigned char *) pch2;
                if(i == 2)
                    result.part2 = (unsigned char *) pch2;
                if(i == 3)
                    result.part3 = (unsigned char *) pch2;
                if(i == 4)
                    result.part4 = (unsigned char *) pch2;
                i++;
                pch2 = strtok (NULL,".");
            }   
            printf("STRUCT %c\n",result.part1); 
```

结构：

```
typedef struct
{
    unsigned char part1;
    unsigned char part2;
    unsigned char part3;
    unsigned char part4;
} res; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T17:56:34.843

你投给`unsigned char`不是`unsigned char*`你忘记了`*`

```
part1 = (unsigned char*) pch2; 
```

如果`pch2`不是 null 终止程序将崩溃，如果幸运的话，当您使用 时`strlen`，您需要在使用打印之前先将其终止`pch2`，请尝试以下操作：

```
pch2[size-1] = '\0';  /* note single quote */
result.part1 = (unsigned char *) pch2; 
```

更新：像这样定义你的结构：

```
typedef struct
{
    const char *part1;
    const char *part2
    const char *part3;
    const char *part4;
} res; 
```

并分配给它而根本不进行转换：

```
result.part1 = pch2; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T18:05:23.367

> 我想将 char 指针转换为 unsigned char var

你确定吗？将指向 char 的指针转换为 unsigned char 不会有任何好处 - 值将被截断为 1 个字节，无论如何这将毫无意义。也许你想*取消引用*一个指针并获取它指向的值——那么你应该做这样的事情：

```
unsigned char part1 = (unsigned char)*pch2; 
```

在您编辑后，我看到这`part1`是字符数组 - 如果您的程序在使用后崩溃，您可能填写`pch2`不正确。也许你忘记了`'\0'`终结者？

编辑：

你看，现在最好用所有必需的信息来回答你的问题。你需要使用`strtok`吗？这会好吗？

```
 res result;
    char* ip = "123.23.56.33";

    sscanf(ip, "%hhu.%hhu.%hhu.%hhu", &result.part1, &result.part2, &result.part3, &result.part4); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T17:56:58.730

你想这样做：

```
part1 = (unsigned char*) pch2; 
```

代替：

```
part1 = (unsigned char) pch2; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-25T17:58:11.477

尝试这样的事情： -

```
 char *ph2;
 unsigned char *new_pointer = (unsigned char*) ph2; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-25T21:32:50.403

发现问题，忘记将 char pch2 转换为 unsigned int，然后我可以使用 %u 打印输出。代码：

```
unsigned int temp;

temp = atoi(pch2);

result.part1 = temp;
printf("Struct: %u\n",result.part1); 
```

谢谢你们的帮助！

# jquery-ui - jQueryUI 可排序列表触发链接

> ID：13553755
> 
> 赞同：1
> 
> 时间：2012-11-25T17:55:40.343
> 
> 标签：jquery-ui, jquery-ui-sortable

我正在使用 jQueryUI (1.9.2) 使两个列表可排序。两个列表都包含各种链接。当一个元素从一个列表拖放到另一个列表中时，一切都可以正常工作。但是，当我使用

```
receive:function(event, ui) {
  ui.item.empty();
} 
```

或者

```
receive:function(event, ui) {
  ui.item.html('whatever');
} 
```

然后，每次将链接从一个列表拖放到另一个列表时，都会在该链接上触发“点击事件”。很明显，这不应该发生。如何防止这些点击事件？已经尝试过类似的东西

```
receive:function(event, ui) {
  event.stopPropagation();
  event.preventDefault();
  ui.item.empty();
} 
```

以及注册一个禁用所有链接的启动功能。然而两者都没有奏效。那么如何在列表之间进行排序时禁用所有链接触发器呢？

# windows-phone-7 - Caliburn Micro 中的墓碑

> ID：13553760
> 
> 赞同：5
> 
> 时间：2012-11-25T17:56:17.987
> 
> 标签：windows-phone-7, caliburn.micro, tombstoning

我有带有项目（ObservableCollection）的 MainPageViewModel。在此页面上，我还有一个按钮，用于向 Items 添加新项目。

```
public class MainPageViewModel : Screen {
  private DateTime StartActivity = DateTime.MinValue;

  public ObservableCollection<ActivityViewModel> Items { get; set; }

  public MainPageViewModel(INavigationService navigationService) {
    this.Items = new ObservableCollection<ActivityViewModel>();
  }

  public void AddActivity(string activityName) {
    if (this.Items.Count == 0) {
      this.Items.Add(new ActivityViewModel() { 
        Activity = activityName, 
        Duration = 0 
      });

      StartActivity = DateTime.Now;
      }
    else {
      this.Items[this.Items.Count - 1].Duration = 10;
      this.Items.Add(new ActivityViewModel() { 
        Activity = activityName,
        Duration = 0 
      });

      StartActivity = DateTime.Now;
    }
  }
} 
```

添加新项目非常完美。

但是当应用程序在墓碑后激活时，来自项目的数据不会恢复。尝试为我的 ViewModel 创建 StorageHandler。没有帮助。我做错了什么？

```
public class MainPageViewModelStorage : StorageHandler<MainPageViewModel> {
  public override void Configure() {
    Property(x => x.Items)
        .InAppSettings()
        .RestoreAfterActivation();
  }
} 
```

还可以尝试为类和属性添加 [SurviveTombstone]，但 Visual Studio 不知道该属性。

```
public class ActivityViewModel : PropertyChangedBase {
  private string _activity;
  public string Activity {
    get {
      return _activity;
    }
    set {
      if (value != _activity) {
        _activity = value;
        NotifyOfPropertyChange(() => Activity);
      }
    }
  }

  private double _duration;
  public double Duration {
    get {
      return _duration;
    }
    set {
      if (value != _duration) {
        _duration = value;
        NotifyOfPropertyChange(() => Duration);
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T10:31:46.740

1.  你应该存储 not `InAppSettings`but `InPhoneState`。
2.  `Configure`如果调用方法，请检查断点。如果不是 - 你的引导程序有问题。大概`PhoneContainer.RegisterPhoneServices()`是失踪了
3.  打开在 Visual Studio 中捕获第一次机会异常（Ctrl+Alt+E，并勾选 CLR 异常）。可能您的视图模型无法正确反序列化。

# css - Google Chrome 中的最大宽度与最大高度

> ID：13553761
> 
> 赞同：0
> 
> 时间：2012-11-25T17:56:17.873
> 
> 标签：css

我正在尝试根据容器高度仅使用 CSS 来调整图像的大小。这是代码和[小提琴](http://jsfiddle.net/navyflower/GBgFh/2/)。

```
<div id="first">
<img src="http://www.helpinghomelesscats.com/images/cat1.jpg" width=360 height=360>  
</div>​

#first {
    height: 100px;
}
img {
    max-height: 100%;
    width: auto !important;
} 
```

设置 max-height 在 Chrome 中不起作用。图像被展平。在 Firefox 和 IE 中看起来还可以。但是，设置 max-width 在所有浏览器中都有效。

```
#first {
    width: 100px;
}
img {
    max-width: 100%;
    height: auto !important;
} 
```

有人可以告诉我，如何获得最大高度的正确结果，这也适用于 Chrome？

​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T18:00:15.297

有趣的是，Chrome 似乎并没有用“auto”覆盖固定宽度，尽管 Inspector 说它确实如此。

最简单的解决方案是不指定图像的`width`和`height`属性。

# jquery - 我不能用 jQuery 改变 CSS 属性

> ID：13553765
> 
> 赞同：1
> 
> 时间：2012-11-25T17:56:46.407
> 
> 标签：jquery, css

我尝试使用 Jquery 更改 css 属性。我愿意

```
wrapperInner.css('overflow', 'visible'); 
```

但价值仍然保持不变。我很警觉`alert(wrapperInner.css('overflow'))`，它显示`hidden`。这是这个的css

```
.tribe-events-calendar td div.wrapper div.wrapper_inner {
    position:relative;
    overflow:hidden!important;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T17:57:36.383

`!important`正在覆盖 jQuery 。去掉它。

使用`!important`是草率的，通常是一个坏主意——你会看到它是如何导致问题的。

如果您无法删除它，请添加一个具有您需要的样式的类：

```
var thing = $('div')   
thing.addClass('shown'); 
```

```
div {
    color: red !important;
}

.shown {
    color: blue !important;
} 
```

我使用了颜色，但这个概念适用。[演示](http://jsfiddle.net/akpy7/)

​</p>

# php - '如果变量等于变量 echo this' 导致白屏

> ID：13553769
> 
> 赞同：0
> 
> 时间：2012-11-25T17:57:16.993
> 
> 标签：php

基本上我有一个包含数据集中值的选择框，我需要做的是选择与数据集中另一个字段的值相等的那个。这是代码，非常感谢您的帮助:-)

```
<option value="<?php echo $row_menucats1['id'] ?> " 

<?php 

$cats1 = $row_menucats1['id'];
$cats2 = $row_options['sub_cat_id_link'];

if ($cats1 == '$cats2') { 

echo 'selected' 
}

?> > 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T17:58:35.087

有一个简单的语法错误。在 echo 语句后需要一个分号：

```
echo 'selected'; 
```

还有你的 if 语句： if`($cats1 == '$cats2')`需要：

`if ($cats1 == $cats2)`

您拥有它的当前方式，它是一个实际的字符串。

要打开[错误报告](http://php.net/manual/en/function.error-reporting.php)，您可以添加：`error_reporting(E_ALL);`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-25T17:59:26.960

你错过了一个分号：

```
echo 'selected'; // <-- here 
```

将来您应该打开错误报告或查看错误日志。白屏表示 500 内部服务器错误，在这种情况下表示 PHP 致命错误。

```
error_reporting(E_ALL);
ini_set('display_errors', '1'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T18:01:45.270

如果它导致白屏，您应该启用错误报告。阅读更多： http: [//php.net/manual/en/function.error-reporting.php](http://php.net/manual/en/function.error-reporting.php)

另请阅读：

```
<option value="<?php echo $row_menucats1['id'] ?> " 

<?php 

$cats1 = $row_menucats1['id'];
$cats2 = $row_options['sub_cat_id_link'];

if ($cats1 == $cats2) {  // '$cats2' is just a string, $cats2 is a variable

echo 'selected'; // You missed a semi colon here
}

?> > 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T18:08:21.643

```
 <option value="<?php echo $row_menucats1['id'] ?> " 

          <?php 

                $cats1 = $row_menucats1['id'];
                $cats2 = $row_options['sub_cat_id_link'];

                 if ($cats1 == '$cats2') { 

                  echo 'selected'; //semi colon is missing
              }

          ?> > 
```

请注意上面代码片段中提到的注释。这是可执行语句中缺少分号的语法错误。根据 PHP 的语法规则，每个可执行语句必须以分号结尾。

# java - 传递数组或序列以在 idl Java Corba 中运行

> ID：13553775
> 
> 赞同：1
> 
> 时间：2012-11-25T17:57:47.913
> 
> 标签：java, compiler-errors, corba

在尝试将数组或序列添加到 idl 文件中定义的函数时，例如

```
 // BackupDaemon.idl

  interface BackupDaemon;

  #ifndef BackupDaemon_idl
  #define BackupDaemon_idl

 typedef sequence<BackupDaemon> BackupDaemonList;

 #include "BackupExceptions.idl"

 interface BackupDaemon {

     boolean startBackup(in sequence<string> backupPathes ,in string backupDaemonMacAddress);

 };

 #endif 
```

我收到以下错误：-

```
Expected one of `float' `double' `long' `short' `un
signed' `char' `wchar' `boolean' `octet' `any' `string' `wstring' `<identifier>'
 `::' `ValueBase'; encountered `sequence'.
     boolean startBackup(in sequence<string> backupPathes ,in string backupDaemo
nMacAddress); 
```

那么如何将数组或序列传递给 idl 文件中定义的函数呢？提前致谢。^

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T18:23:24.177

序列不能直接用于 CORBA 操作。你首先需要`typedef`他们：

```
typedef sequence<string> BackupPathesStrings;

interface BackupDaemon {
     boolean startBackup(in BackupPathesStrings backupPathes, in string backupDaemonMacAddress);
 }; 
```

请参阅：[序列和数组](http://www.ibm.com/developerworks/library/co-cjct5/index.html#h5)

# c++ - textFileRead(char*) 的多重定义

> ID：13553780
> 
> 赞同：0
> 
> 时间：2012-11-25T17:58:16.103
> 
> 标签：c++, definition

我正在使用这个头文件来读取文本文件（我用它来加载着色器文件）并且我在两个不同的类中使用它。

我收到 textFileRead(char*) 的多重定义错误。

这是头文件：

```
#ifndef READFILE_H
#define READFILE_H

#include "stdio.h"
#include "stdlib.h"
#include "string.h"
#include "string"
#include "fstream"

char *textFileRead(char *fn) {

FILE *fp;
char *content = NULL;

int count=0;

if (fn != NULL) {
    fp = fopen(fn,"rt");

    if (fp != NULL) {

  fseek(fp, 0, SEEK_END);
  count = ftell(fp);
  rewind(fp);

        if (count > 0) {
            content = (char *)malloc(sizeof(char) * (count+1));
            count = fread(content,sizeof(char),count,fp);
            content[count] = '\0';
        }
        fclose(fp);
    }
}
return content;
}

#endif READFILE_H 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T18:04:35.030

您需要确保每个编译单元只包含一次头文件中的代码。为此，您将其放在文件的开头：

```
#ifndef READFILE_H
#define READFILE_H 
```

最后是：

```
#endif 
```

当然，每个文件的标识符 READFILE_H 应该是唯一的。接下来要做的是：只在头文件中保留函数和类的声明，实现应该存在于单独的实现文件（.c 或 .cpp 或 .cc）中。因此，在您的标题中，您将仅声明您的函数：

```
char *textFileRead(char *); 
```

并且您的函数的定义将在一个单独的 .c 文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T18:20:10.317

头文件中定义的函数需要标记为`inline`防止多重定义。

要么这样，要么将实现分离到实现文件中。

Include guards 防止在同一个翻译单元中出现多个定义，这是一个链接器问题。该符号在翻译单元中被多次定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T18:22:40.530

您在头文件中定义函数，这意味着编译器将在包含此头文件的每个源文件中复制相同的函数。在链接目标文件时，链接器将不知道要使用哪个版本。（它不能知道它们是一样的，只是它们的签名是一样的。）

解决此问题的一种方法是将实现移动到源文件，并将声明保留在头文件中，如下所示：

**读取文件.h**

```
#ifndef READFILE_H
#define READFILE_H

char *textFileRead(char *fn);

#endif 
```

**读取文件.cpp**

```
#include "readfile.h"
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <string>
#include <fstream>

char *textFileRead(char *fn) 
{
    FILE *fp;
    char *content = NULL;
    int count=0;

    /* ... code ... */

    return content;
} 
```

另一种解决方案是标记函数`inline`并将实现留在头文件中。像这样：

```
#ifndef READFILE_H
#define READFILE_H

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <string>
#include <fstream>

inline char *textFileRead(char *fn) 
{
    FILE *fp;
    char *content = NULL;

    /* ... code ... */

    return content;
} 
```

在最后一种情况下，编译器*可能会*选择在调用它的地方内联函数，而不是生成对它的调用。

也可以在上面的示例中使用`static`代替`inline`，或者将定义包围在匿名命名空间中。但是，这两种方法都不推荐。除非您有特定的原因想要潜在地内联您的函数并使其主体在头文件中可用，否则我会选择第一个替代方案。

# php - PHP simple_html_dom foreach

> ID：13553781
> 
> 赞同：0
> 
> 时间：2012-11-25T17:58:16.093
> 
> 标签：php, foreach, simple-html-dom

我从不同的页面 ($linkHtml) 获取 html，并希望从这些页面获取元素。有了这个我得到致命错误：调用非对象上的成员函数find（）。如果我将第二个 foreach 移出，我会从一页中得到我想要的结果。我应该如何从所有页面获取元素？

```
$url = 'http://page/';

foreach ($dataArray as $link) {
        $linkHtml = file_get_html($url . $link);

        foreach ($linkHtml->find('text') as $text) {

        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T18:10:11.557

我在 php.net 上找不到关于 file_get_html() 的任何文档！？我会用

```
$doc = new DOMDocument();
$doc->loadHTML(file_get_contents($url . $link))); 
```

[文件获取内容](http://php.net/manual/en/function.file-get-contents.php)

[domdocument.loadhtml](http://www.php.net/manual/en/domdocument.loadhtml.php)

# ios - 实现“无标记”增强现实的现有 AR 产品

> ID：13553784
> 
> 赞同：2
> 
> 时间：2012-11-25T17:58:43.670
> 
> 标签：ios, 3d, augmented-reality

事实

我需要开发一个 iPhone 应用程序，它应该能够查看一个空房间并将 3d 对象放入其中（家具）。我不介意房间的墙壁，理论上你也可以在开放空间使用它。唯一需要的是能够正确地将物体放置在“地板”上并环顾四周。

问题

你知道任何现有的 iOS AR 库可以做到这一点吗？我不想使用预先打印的图像或类似图像。该库必须能够识别设备的移动并相应地放置相机（计算视图矩阵），而无需任何外部标记。我尝试使用 CoreMotion 自己完成它，但我无法实现它（即使我很了解 3d 数学和物理）。如果没有免费的替代品，我愿意为产品付费。

# html - 是否可以在 html5 画布上扭曲图像？

> ID：13553787
> 
> 赞同：5
> 
> 时间：2012-11-25T17:59:01.873
> 
> 标签：html, canvas

我想制作一个安卓应用程序，您可以在其中用手指扭曲照片。像这样的东西[https://play.google.com/store/apps/details?id=com.rm.android.facewarp&hl=en](https://play.google.com/store/apps/details?id=com.rm.android.facewarp&hl=en)

我只想使用 html5、css3 和 javascript 这样做。可能吗？我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T18:12:42.140

我希望这个库会有所帮助：http: [//github.com/migurski/canvas-warp](http://github.com/migurski/canvas-warp)

这是它的功能演示：http: [//jsdo.it/canvastag/y56M](http://jsdo.it/canvastag/y56M)

# ios - 滑动使用 UITabbarController 作为根控制器的应用程序的整个屏幕

> ID：13553790
> 
> 赞同：0
> 
> 时间：2012-11-25T17:59:23.207
> 
> 标签：ios, menu, uitabbarcontroller

我在我的应用程序中使用了一个标签栏控制器，里面有几个视图控制器，只是普通的标准东西。最近，当我从内容视图中单击一个按钮时，我需要添加滑动整个屏幕的功能。

这就是我的 appdelegate 所做的：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
   self.window.root = self.tabBarController; //tabBarController is IBOutlet to the tabbar
} 
```

在我的一个视图控制器中，我这样做：

```
- (IBAction)filterButtonTapped:(id)sender {

    [UIView animateWithDuration:0.2 delay:0.0f options:UIViewAnimationOptionCurveEaseInOut  | UIViewAnimationOptionBeginFromCurrentState animations:^{
        //slide everything to the right?
        self.navigationController.view = CGAffineTransformMakeTranslation(260.0f, 0.0f);

    } completion:^(BOOL finished) {
       //do something, possibly show the view that comes up from the left 
    }]; 
```

你可能会问为什么按钮需要在 contentview 中，因为我想我的应用程序想要按照我猜的方式设计？

现在，标签栏的内容会滑动，但下面的标签栏不会滑动，我知道这是因为 self.navigationController.view 是标签栏内的内容视图。

我一直在尝试找到一种方法来滑动/动画整个东西但是从内容视图内部是否有可能到达根目录？

您对此有何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T18:46:01.413

您可以使用从任何 VC 内部访问您的标签栏控制器视图

```
self.tabBarController.view 
```

然后只需为该视图设置动画即可。

# facebook-graph-api - Facebook 发送对话框：检查用户是否允许向他发送私人消息

> ID：13553792
> 
> 赞同：0
> 
> 时间：2012-11-25T17:59:40.397
> 
> 标签：facebook-graph-api, facebook-javascript-sdk, message

在向 Facebook 用户 X 发送私人消息之前，我如何检查该用户是否允许向他发送消息？任何用户都可以通过更改隐私政策来禁用其他用户（不是他的朋友）向他发送私人消息的能力。

# haskell - 读取实例导致解析错误

> ID：13553794
> 
> 赞同：3
> 
> 时间：2012-11-25T18:00:17.013
> 
> 标签：haskell

我想实现一个 read 实例，使我能够读取一个字符串（例如：“- - 8 - 3 -”）并构造一个包含这些值的列表。

```
data Value a = Nul | Val a

showsValue :: (Show a) => Value a -> ShowS
showsValue (Val x) =  ("Value" ++) . shows x
showsValue (Nul)   =  ("Nothing 0" ++)

instance Show a => Show (Value a) where
    showsPrec _ x = showsValue x

instance Read a => Read (Value a) where
    readsPrec _ m = readsMatrix m

readsMatrix :: (Read a) => ReadS (Value a)
readsMatrix ('-':s) = [(Nul, rest) | (' ',rest) <- reads s]
readsMatrix s       = [(Val x,rest)| (x,' ':rest) <- reads s] 
```

执行此测试后：

```
read "- 8 - - 3" :: Value Int 
```

我得到错误`*** Exception: Prelude.read: no parse`

我在这里做错了什么？

*更新*

```
readsMatrix ('-':s) = [(Nul, dropWhile isSpace s)]
readsMatrix s = [(Val x, dropWhile isSpace rest) | (x,rest) <- reads s] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T19:01:44.930

在您的`readsMatrix`功能中，您有

```
readsMatrix ('-':s) = [(Nul, rest) | (' ',rest) <- reads s] 
```

这意味着在`'-'`消耗完之后，输入字符串的其余部分将传递给

```
reads :: ReadS Char 
```

但是 for 的`Read`实例`Char`需要一个用单引号括起来的字符，例如`'h'`.

要在结果中获取元素`(' ',rest)`，您需要 - 在它之前的可选空格之后 - 字符序列`'\'' : ' ' : '\'' : whatever`。您的预期输入中没有这些。你想要做的是删除 之后的空格`'-'`，所以如果空格是可选的，并且可能超过一个字符，

```
readsMatrix ('-':s) = [(Nul, dropWhile isSpace s)] 
```

会起作用（如果换行符、制表符等也被忽略）。如果您只想要一个强制空格，则模式应该是

```
readsMatrix ('-':' ':s) = [(Nul, s)] 
```

第二个等式

```
readsMatrix s       = [(Val x,rest)| (x,' ':rest) <- reads s] 
```

可以按原样工作，但要求值后跟一个空格，因此例如`readMatrix "3" :: [(Value Int, [Char])]`会返回一个空列表。

我想你也希望那里有可选的空间，所以也许

```
readsMatrix s = [(Val x, dropWhile isSpace rest) | (x,rest) <- reads s] 
```

是你想要的，但由于`reads`忽略了大多数类型的前导空格，

```
readsMatrix s = [(Val x, rest) | (x, rest) <- reads s] 
```

可能更好。

但是您不会忽略 a 之前的前导空格`'-'`，因此也需要这样做。

也许使用会更好地完成实施

```
lex :: ReadS String 
```

从`Prelude`, 大致按照 Haskell 语法将字符串拆分为标记，例如

```
ghci> lex "(12 + 34)  abc"
[("(","12 + 34)  abc")] 
```

拆分左括号，从其余部分`"12"`拆分令牌等。

`lex`使用, 以便适当忽略前导空格的一种可能性是

```
readsMatrix s = do
        (tok, rest) <- lex s
        case tok of
           "-" -> return (Nul, rest)
           _   -> case reads tok of
                    [(x,"")] -> return (Val x, rest)
                    _ -> [] 
```

最后，

```
read "- 8 - - 3" :: Value Int 
```

会导致一个`*** Exception: Prelude.read: no parse`偶数，因为`read`只有在转换后的标记后面只有空格时才会成功，但是在转换初始值之后`'-'`，输入的其余部分中还有四个可转换的标记。

```
read "- 8 - - 3" :: [Value Int] 
```

另一方面应该成功。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T20:00:24.347

## 更正读取值 a

首先，不要费心删除空格，这一切都可以通过以下方式处理`reads`：

```
readsMatrix :: (Read a) => ReadS (Value a)
readsMatrix ('-':s) = [(Nul, dropWhile (==' ') s)]
readsMatrix s       = [(Val x,rest)| (x,rest) <- reads s] 
```

您的读取实例现在适用于单个值：

```
*Main> read "4" :: Value Int
Value4
*Main> read "-" :: Value Int
Nothing 0 
```

## 更正 [Value a] 的读数

但是您想读取以空格分隔的列表，因此由于这是非标准行为，您需要编写自定义`readList :: :: ReadS [Value a]`

```
instance Read a => Read (Value a) where
    readsPrec _ m = readsMatrix m
    readList s = [(map read.words $ s,"")] 
```

所以现在

```
*Main> read "- 4 2 - 5" :: [Value Int]
[Nothing 0,Value4,Value2,Nothing 0,Value5] 
```

但不幸的是，

```
*Main> read "- 4 2 \n- 5 4" :: [Value Int]
[Nothing 0,Value4,Value2,Nothing 0,Value5,Value4] 
```

更糟糕的是，

```
*Main> read "- 4 2 \n- 5 4" :: [[Value Int]]
*** Exception: Prelude.read: no parse 
```

## 读取矩阵

我可以看到没有直接的解决方法，因为类中没有`readListOfLists`，`Read`所以为什么不制作一个独立的函数

```
matrix :: Read a => String -> [[Value a]]
matrix = map read.lines 
```

以便

```
*Main> matrix "3 4 -\n3 - 6\n4 5 -" :: [[Value Int]]
[[Value3,Value4,Nothing 0],[Value3,Nothing 0,Value6],[Value4,Value5,Nothing 0]] 
```

## 表演不是我会选择的

我认为你的`Show`实例`Value`有点误导（`Nul`上面没有零，`Val`没有写`Value`）。要么写

```
data Value a = Nul | Val a  deriving Show 
```

使其看起来原样或定义它以匹配`Read`实例

```
instance Show a => Show (Value a) where
  show Nul = "-"
  show (Val a) = show a 
```

# android - Android 上下文是可变的吗？

> ID：13553796
> 
> 赞同：3
> 
> 时间：2012-11-25T18:00:27.490
> 
> 标签：android

我想将应用程序上下文存储在一个静态成员中，就像[这样](https://stackoverflow.com/questions/2002288/static-way-to-get-context-on-android)，所以我可以在任何地方访问它、共享首选项、资源等。

我的问题是上下文是否可以在应用程序生命周期内自行更改，因此存储的上下文将无法以正确的方式工作，并且我无法访问共享首选项等。

或者上下文是不可变的，所以我可以毫无疑问地使用它？

谢谢你的回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T18:02:15.387

应用程序上下文在应用程序生命周期内保持不变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T18:20:17.880

Context is immutable during all work of app. And you can use it in static way to get resources, shared preferences, etc.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T18:10:40.983

当您查看此[帖子](https://stackoverflow.com/questions/987072/using-application-context-everywhere)的已接受答案时，您会发现这样做是可以的，但要小心处理...

> 这种方法有几个潜在的问题，尽管在很多情况下（比如你的例子）它会很好地工作。
> 
> 特别是在处理需要上下文的 GUI 时，您应该小心。例如，如果您将应用程序上下文传递给 LayoutInflator，您将得到一个异常。一般来说，您的方法非常好：在该 Activity 中使用 Activity 的 Context 是一种很好的做法，并且在传递超出 Activity 范围的上下文时使用 Application Context 以避免内存泄漏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T18:31:11.787

是的，您可以将它与共享偏好一起使用并获取资源等。

getApplicationContext() 函数应该这样做。它是否可变无关紧要。

# tfs - 如何在 TFS 中获取文件源控制统计信息？

> ID：13553804
> 
> 赞同：0
> 
> 时间：2012-11-25T18:01:00.313
> 
> 标签：tfs

我希望能够获得团队项目中最常更新的文件的列表（具有最相关变更集的文件）。

有什么方法可以做到这一点而无需使用 SDK 并编写自定义工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:43:42.537

如果您安装了 TFS 2012 报表服务，您可能能够从报表服务器或直接从统计数据库中获取此信息。如果您安装了它，您可以通过浏览器访问它：

```
http://TFSSERVER:80/Reports 
```

# asp.net-mvc - EF Persisting Columns 忽略那些不在视图中的列

> ID：13553810
> 
> 赞同：0
> 
> 时间：2012-11-25T18:01:39.963
> 
> 标签：asp.net-mvc, entity-framework

我有 mvc 视图，其中包含来自实体的一些列。当我执行 db.SaveChanges() 时，不属于视图的所有列都将使用 NULL 进行更新，因此会覆盖数据库记录中存在的任何值。这很蹩脚。我知道我可以为视图做 ModelView 并只绑定我想要的那些列。但我正在寻找一种方法来简单地告诉 EF，在此特定更新期间“忽略”列，不要更新 MvC 视图中不存在的列。我正在使用 EF 5。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T00:42:04.067

我想我需要的是这个

```
User u = db.Users.Find(user.UserID);
        if (u!=null) {

            TryUpdateModel(u);
if (ModelState.IsValid)
{
                db.SaveChanges();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T22:34:45.200

我不知道你为什么要避免创建一个单独的模型，但我想你知道你在做什么，所以也许可以尝试这种方法来欺骗 EF 认为属性没有改变：

```
var entry = context.Entry(obj);
entry.Property(name).IsModified = false; 
```

我自己没有尝试过，但在 EF 5 中应该可以。如果它不起作用，请尝试通过搜索`entry.CurrentValues.PropertyNames`集合来访问属性条目，然后`IsModified`将`false`.

# python - PyQt4 不会将我重定向到下一页

> ID：13553817
> 
> 赞同：2
> 
> 时间：2012-11-25T18:02:19.490
> 
> 标签：python, hyperlink, click, pyqt, qwebkit

下面的代码工作正常，除了一件事，它不遵循注册链接。但是，如果我转到我的实际浏览器并输入控制台类型：

```
document.getElementById("link-signup").click() 
```

它会将我重定向到所需的页面。我在想问题是因为我没有在设置中启用某些功能。但我不确定。

谢谢你的帮助

```
#! /usr/bin/env python2.7

from PyQt4.QtCore import *
from PyQt4.QtGui import *
from PyQt4.QtWebKit import *
import sys

class GrabberSettings(QWebPage):
    def __init__(self):
        QWebPage.__init__(self)
        self.settings().setAttribute(QWebSettings.AutoLoadImages, False)

class Grabber(QWebView):
    def __init__(self):
        QWebView.__init__(self)
        self.setPage(GrabberSettings())
        self.loadFinished.connect(self._loadComplete)
        self.doc = self.page().mainFrame().documentElement()

    def _loadComplete(self):
        print "Done"
        link = self.doc.findFirst('a[link-signup]')
        if link:
            print "link found"
        link.evaluateJavaScript('click()')

if __name__ == "__main__":
    app = QApplication(sys.argv)
    view = Grabber()
    gmail = QUrl('https://accounts.google.com')
    view.load(gmail)
    view.show()
    app.exec_() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T19:26:58.733

我认为`click()`失败可能与谷歌页面`A`在加载后如何使用javascript转换原始元素有关。如果您将`evaluateJavaScript()`调用包装在一个 中`alert()`，您可以看到该`click`方法是`null`

```
link.evaluateJavaScript('this.click') 
```

能够在链接上调用“点击”并不是 100% 的跨浏览器支持。它需要是一个按钮。

你有几个选择...

**(#1) 只需导航到链接的 href**

```
def _loadComplete(self):
    page = self.page()
    doc = page.currentFrame().documentElement()
    link = doc.findFirst('#link-signup')
    if link and not link.isNull():
        self.load(QUrl.fromEncoded(link.attribute('href').toAscii())) 
```

**(#2) 模拟点击网页视图**

```
def _loadComplete(self):
    page = self.page()
    doc = page.currentFrame().documentElement()
    link = doc.findFirst('#link-signup')
    if link and not link.isNull():
        pos = link.geometry().center()
        self._doMouseClick(page, pos)
    else:
        print "Link not found"

@staticmethod
def _doMouseClick(obj, pos):
    # mouse down
    evt = QMouseEvent(QEvent.MouseButtonPress, pos, 
                            Qt.LeftButton, Qt.LeftButton, Qt.NoModifier)
    QApplication.sendEvent(obj, evt)
    # mouse up
    evt = QMouseEvent(QEvent.MouseButtonRelease, pos, 
                            Qt.LeftButton, Qt.LeftButton, Qt.NoModifier)
    QApplication.sendEvent(obj, evt) 
```

**(#3) 通过 javascript 使链接可点击**

```
def _loadComplete(self):
    page = self.page()
    doc = page.currentFrame().documentElement()
    link = doc.findFirst('#link-signup')
    if link and not link.isNull():
        link.evaluateJavaScript("""
            var e = document.createEvent('MouseEvents');
            e.initEvent('click', true, true);
            this.dispatchEvent(e);  
        """) 
```

# ruby - 确定一个数组是否包含另一个数组的所有元素

> ID：13553822
> 
> 赞同：15
> 
> 时间：2012-11-25T18:03:17.843
> 
> 标签：ruby, arrays

我需要判断一个数组是否包含另一个*具有重复项*的数组的所有元素。

```
[1,2,3].contains_all? [1,2]   #=> true
[1,2,3].contains_all? [1,2,2] #=> false (this is where (a1-a2).empty? fails)
[2,1,2,3].contains_all? [1,2,2] #=> true 
```

因此，第一个数组必须包含与第二个数组中每个唯一元素的数量相同或相等的数量。

[这个问题为那些使用数组作为集合的人回答了这个问题](https://stackoverflow.com/questions/7387937/ruby-rails-how-to-determine-if-one-array-contains-all-elements-of-another-array)，但我需要控制重复项。

## 更新：基准

在 Ruby 1.9.3p194 上

```
def bench
  puts Benchmark.measure {
    10000.times do
      [1,2,3].contains_all? [1,2]
      [1,2,3].contains_all? [1,2,2]
      [2,1,2,3].contains_all? [1,2,2]
    end
  }
end 
```

结果是：

```
Rohit   0.100000   0.000000   0.100000 (  0.104486)
Chris   0.040000   0.000000   0.040000 (  0.040178)
Sergio  0.160000   0.020000   0.180000 (  0.173940)
sawa    0.030000   0.000000   0.030000 (  0.032393) 
```

## 更新 2：更大的数组

```
@a1 = (1..10000).to_a
@a2 = (1..1000).to_a
@a3 = (1..2000).to_a

def bench
  puts Benchmark.measure {
    1000.times do
      @a1.contains_all? @a2
      @a1.contains_all? @a3
      @a3.contains_all? @a2
    end
  }
end 
```

结果是：

```
Rohit    9.750000   0.410000  10.160000 ( 10.158182)
Chris   10.250000   0.180000  10.430000 ( 10.433797)
Sergio  14.570000   0.070000  14.640000 ( 14.637870)
sawa     3.460000   0.020000   3.480000 (  3.475513) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T18:44:30.997

```
class Array
  def contains_all? other
    other = other.dup
    each{|e| if i = other.index(e) then other.delete_at(i) end}
    other.empty?
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T18:14:28.370

这是一个幼稚而直接的实现（可能不是最有效的实现）。只需计算元素并比较两个元素及其出现次数。

```
class Array
  def contains_all? ary
    # group the arrays, so that 
    #   [2, 1, 1, 3] becomes {1 => 2, 2 => 1, 3 => 1}
    my_groups = group_and_count self
    their_groups = group_and_count ary

    their_groups.each do |el, cnt|
      if !my_groups[el] || my_groups[el] < cnt
        return false
      end
    end

    true
  end

  private
  def group_and_count ary
    ary.reduce({}) do |memo, el|
      memo[el] ||= 0
      memo[el] += 1
      memo
    end
  end

end

[1, 2, 3].contains_all? [1, 2]   # => true
[1, 2, 3].contains_all? [1, 2, 2] # => false
[2, 1, 2, 3].contains_all? [1, 2, 2] # => true
[1, 2, 3].contains_all? [] # => true
[].contains_all? [1, 2] # => false 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-25T18:44:34.820

看来你需要一个多重集。看看[这颗宝石](https://github.com/maraigue/multiset)，我认为它可以满足您的需求。

您可以使用 is 并执行类似的操作（如果交集等于第二个多重集，则第一个包含其所有元素）：

```
@ms1 & @ms2 == @ms2 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-25T18:25:04.910

计算出现次数并进行比较似乎是显而易见的方法。

```
class Array
   def contains_all? arr
       h = self.inject(Hash.new(0)) {|h, i| h[i] += 1; h}
       arr.each do |i|
           return false unless h.has_key?(i)
           return false if h[i] == 0
           h[i] -= 1
       end
       true
   end
end 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-15T15:54:18.193

```
class Array
  def contains_all?(ary)
    ary.uniq.all? { |x| count(x) >= ary.count(x) }
  end
end 
```

测试

```
irb(main):131:0> %w[a b c c].contains_all? %w[a b c]
=> true
irb(main):132:0> %w[a b c c].contains_all? %w[a b c c]
=> true
irb(main):133:0> %w[a b c c].contains_all? %w[a b c c c]
=> false
irb(main):134:0> %w[a b c c].contains_all? %w[a]
=> true
irb(main):135:0> %w[a b c c].contains_all? %w[x]
=> false
irb(main):136:0> %w[a b c c].contains_all? %w[]
=> true 
```

以下版本的代码更快更短。

```
class Array
  def contains_all?(ary)
    ary.all? { |x| count(x) >= ary.count(x) }
  end
end 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-25T18:30:00.100

用我自己的实现来回答，但绝对想看看是否有人能想出更有效的方法。（我不会接受我自己的答案）

```
class Array
  def contains_all?(a2)
    a2.inject(self.dup) do |copy, el|
      if copy.include? el
        index = copy.index el
        copy.delete_at index
      else
        return false
      end
      copy
    end
    true
  end
end 
```

和测试：

```
1.9.3p194 :016 > [1,2,3].contains_all? [1,2]   #=> true
 => true 
1.9.3p194 :017 > [1,2,3].contains_all? [1,2,2] #=> false (this is where (a1-a2).empty? fails)
 => false 
1.9.3p194 :018 > [2,1,2,3].contains_all? [1,2,2] #=> true
 => true 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-26T08:32:34.437

这个解决方案只会遍历两个列表一次，因此在线性时间内运行。但是，如果预计列表非常小，则开销可能会太大。

```
 class Array
    def contains_all?(other)
      return false if other.size > size
      elem_counts = other.each_with_object(Hash.new(0)) { |elem,hash| hash[elem] += 1 }
      each do |elem|
        elem_counts.delete(elem) if (elem_counts[elem] -= 1) <= 0
        return true if elem_counts.empty?
      end
      false
    end
  end 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-11-25T18:16:03.173

如果找不到方法，可以使用 ruby​​ 的*include 构建一个方法吗？*方法。

官方文档：[http ://www.ruby-doc.org/core-1.9.3/Array.html#method-i-include-3F](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-include-3F)

用法：

```
array = [1, 2, 3, 4]
array.include? 3       #=> true 
```

然后，你可以做一个循环：

```
def array_includes_all?( array, comparision_array )
  contains = true
  for i in comparision_array do
    unless array.include? i
      contains = false
    end
  end
  return contains
end

array_includes_all?( [1,2,3,2], [1,2,2] )    #=> true 
```

# windows-runtime - win8框架委托

> ID：13553831
> 
> 赞同：-1
> 
> 时间：2012-11-25T18:03:53.463
> 
> 标签：windows-runtime, .net-4.5

我有一个框架，它具有在引发另一个类中的事件时更新框架的功能。我有“IRCClient”和“MainFrame”类。IRCClient 类有一个事件'OnMessageRecvd'，MainFrame 有一个函数'HandleNewMessageReceived'。在 MainFrame 类中，我有变量“CurrentServer”和“CurrentChannel”来指示当前向用户显示的服务器上的哪个频道。

现在，当我在按钮的回调中设置“CurrentServer”和“CurrentChannel”时，它们有一个值，一切都很好。但是，当 IRCClient 的 'OnMessageRecvd' 事件调用 'HandleNewMessageReceived' 函数时，CurrentServer 和 CurrentChannel 都等于 MainFrame 的构造函数中声明的任何值（null）。

有谁知道这种行为的根源是什么？提前非常感谢。

编辑：下面是代码，我只发布了有问题的代码（任何使用 CurrentChannel 和 CurrentServer 属性的函数）并剪掉了不相关的代码。

```
// Main page, shows chat history.
public sealed partial class MainPage : LIRC.Common.LayoutAwarePage
{
    private uint maxMessages;
    IRCClient ircc;
    IRCHistory irch;
    string CurrentServer, CurrentChannel;

    // Does all the setup for this class.
    public MainPage()
    {
        this.InitializeComponent();

        ircc = App.ircc; // This is a global variable in the 'App' class.
        ircc.OnMessage += NewMessageReceived;

        irch = App.irch; // This is also a global variable in the 'App' class.
        currentChannel = currentServer = null;
    }

    // Restores the previous state.
    protected override void LoadState(Object navigationParameter, Dictionary<String, Object> pageState)
    {
        if (pageState != null)
        {
            if(pageState.ContainsKey("viewedChannel"))
            {
                // Retrieve required info.
                string[] viewedChannelTokens = (pageState["viewedChannel"] as string).Split('.');
                CurrentChannel = viewedChannelTokens[0];
                CurrentServer = viewedChannelTokens[1];

                // If the saved channel or server got corrupt
                if (string.IsNullOrEmpty(CurrentChannel) || string.IsNullOrEmpty(CurrentServer))
                {
                    // Check if a channel is open, if so, select it.
                    *snip* // Non-relevant code.
                }

                // Clear and load required history.
                ClearHistory();
                if(CurrentServer != null && CurrentChannel != null)
                    LoadHistory(CurrentServer, CurrentChannel);
            }
        }

        // Create buttons that switch to a channel
        *Snip* // Calls AddChannelButton
    }

    // Creates a button that, when clicked, causes the ChatHistoryView to display the ChannelHistory.
    void AddChannelButton(string Server, string Channel)
    {
        Button btn = new Button();
        btn.Content = Channel + "\n" + Server;
        btn.Width = 150;

        // A function to switch to another channel.
        btn.Click += (e, s) =>
        {
            ClearHistory(); // Clears the ChatHistoryVi.ew field.
            LoadHistory(Server, Channel); // Does the actual loading of the channel history

            CurrentChannel = Channel;
            CurrentServer = Server;
        };

        ChannelBar.Children.Add(btn);
    }

    // The function that is called by the IRCClient.OnMessageRecv event.
    public void NewMessageReceived(ref DataWriter dw, IRCServerInfo ircsi, IRCClient.RecvMessage recvmsg)
    {
        if (ircsi.Name == CurrentServer && CurrentChannel == recvmsg.recipient)
        {
            AddMessage(DateTimeToTime(DateTime.UtcNow), recvmsg.author, recvmsg.message);
        }
    }
}

// Responsible for creating, managing and closing connections.
public class IRCClient
{
    // A structure that describes a message.
    public struct RecvMessage
    {
        public string author;   // Nickname
        public string realName;
        public string ipAddress;
        public string recipient; // Indicates in what channel or private converstion.
        public string message;   // The actual message
    };

    // Describes how a function that handles a message should be declared.
    public delegate void MessageHandler(ref DataWriter dw, IRCServerInfo ircsi, RecvMessage msg);

    // Gets raised/called whenever a message was received.
    public event MessageHandler OnMessage;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T22:52:41.447

目前尚不清楚您所说的内容发生了什么，但是如果变量设置为您在检查它们时在构造函数中设置的值 - 这意味着您在期望它们被更改时尚未更改它们或者你设置一些其他变量的值，而不是你认为的那些。

不过，这些只是猜测，如果不显示代码，您不能期待更多的猜测。

# bison - Bison - 运算符优先级

> ID：13553837
> 
> 赞同：3
> 
> 时间：2012-11-25T18:05:04.827
> 
> 标签：bison, operator-precedence

我对 Bison 中的运算符优先级和关联性有疑问。

在每个示例中，我看到的作品都是这样`expr 'op' expr`的，例如：http://dinosaur.compilertools.net/bison/bison_8.html

但是，如果我使用 bison`%left`和其他关联工具，我会使用如下语法：

```
 expr|     expr binop expr
      |     expr relop expr
      |     expr logical_op expr 
```

和

```
 binop: '+' 
      | '-' 
      | '*' 
      | '/' 
      ;
 relop: EE
      | NE
      | LE
      | '<'
      | GE
      | '>'
      ;
 logical_op: AND
           | OR
           ; 
```

会使用关联性和优先级规则吗？

还是我需要`expr 'op' expr`为每个运算符写明确的？

我在问，因为当我尝试使用我发布的语法时，我会收到有关冲突的警告。

但是当我手工编写作品时，就像`expr '+' expr`我没有收到任何警告一样。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T15:05:08.317

为了使优先规则起作用，终端本身必须出现在模棱两可的产生式中。因此，您不能将终端分组为非终端并保留使用优先规则的能力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T23:52:57.603

我更喜欢添加语法规则（产生式）来说明运算符的优先级。[在这里](https://stackoverflow.com/questions/10972858/why-in-some-cases-i-cant-use-a-token-as-precedence-marker)查看我的答案。

# ruby - 如何在 Ruby Shoes 中为 ask_open_folder() 设置默认目录？

> ID：13553842
> 
> 赞同：1
> 
> 时间：2012-11-25T18:05:22.817
> 
> 标签：ruby, shoes

我正在使用 Shoes GUI 在 Ruby 中编写一个小应用程序。在这个应用程序中，用户需要选择几个目录作为导入目的地。有没有办法为*ask_open_folder()*提供默认路径（例如基于最后一次用户选择），所以用户不必每次调用函数时都从 main 开始？选择第五个目录后，这真的很烦人....

# c++ - 一个受支持的 C++ 联合的替代方案？

> ID：13553844
> 
> 赞同：3
> 
> 时间：2012-11-25T18:05:50.257
> 
> 标签：c++, unions

我认为联合对于我的想法来说是完美的，特别是当我认为我的代码应该在一个真正异构的机器系列上运行时，尤其是低功率机器，让我烦恼的是创建编译器的人似乎不太关心引入和提供良好的工会支持，例如，当涉及*无限制工会支持时，*[此表](http://wiki.apache.org/stdcxx/C++0xCompilerSupport)实际上是空的，这对我的项目来说是一个真正令人不快的观点。

 *有替代品`union`至少可以模仿相同的属性吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-25T18:21:21.333

大多数编译器都很好地支持联合，但不支持的是包含具有非平凡构造函数的成员的联合（不受限制的联合）。实际上，在创建联合时几乎总是需要自定义构造函数，因此没有不受限制的联合更多的是不便。

或者，您始终可以使用指向 malloc 内存的 void 指针，该内存具有足够大的成员大小。缺点是您需要显式类型转换。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-25T18:09:30.763

union 的一种流行替代方案是[Boost.Variant](http://www.boost.org/doc/libs/1_68_0/doc/html/variant.html)。

您在其中使用的类型必须是可复制构造的。

**更新：** C++17 引入了[std::variant](https://en.cppreference.com/w/cpp/utility/variant)。它的要求基于 Boost.Variant。它经过现代化改造以考虑 C++17 中的特性。它不承担与 C++98 编译器（如 Boost）兼容的开销。它随标准库免费提供。如果可用，最好将其用作工会的替代品。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-25T18:12:16.737

您总是可以使用显式强制转换来做本质上相同的事情：

```
struct YourUnion {
    char x[the size of your largest object];
    A &field1() { return *(A*)&x[0]; }
    int &field2() { return *(int*)&x[0]; }
};

YourUnion y;
new(&y.field1()) A(); // construct A
y.field1().~A(); // destruct A
y.field2() = 1;
// ... 
```

（与 Boost.Variant 等相比，这是零开销。）

**编辑：**更像工会，没有模板。*

# php - 调用一个php类函数语法

> ID：13553845
> 
> 赞同：0
> 
> 时间：2012-11-25T18:06:08.990
> 
> 标签：php, class, controller, zend-framework2, zend-controller-plugin

我目前正在从一个名为 ZfcUser for Zend 2 的模块中寻找这段代码：

```
namespace ZfcUser\Controller;

use Zend\Form\Form;
use Zend\Mvc\Controller\AbstractActionController;
use Zend\Stdlib\ResponseInterface as Response;
use Zend\Stdlib\Parameters;
use Zend\View\Model\ViewModel;
use ZfcUser\Service\User as UserService;
use ZfcUser\Options\UserControllerOptionsInterface;

class UserController extends AbstractActionController
{
/**
 * @var UserService
 */
protected $userService;
     .
     .

public function indexAction()
{
    if (!$this->zfcUserAuthentication()->hasIdentity()) {
        return $this->redirect()->toRoute('zfcuser/login');
    }
    return new ViewModel();
}
    .
    .
} 
```

在命名空间 ZfcUser\Controller\Plugin 中：

命名空间 ZfcUser\Controller\Plugin;

```
use Zend\Mvc\Controller\Plugin\AbstractPlugin;
use Zend\Authentication\AuthenticationService;
use Zend\ServiceManager\ServiceManagerAwareInterface;
use Zend\ServiceManager\ServiceManager;
use ZfcUser\Authentication\Adapter\AdapterChain as AuthAdapter;

class ZfcUserAuthentication extends AbstractPlugin implements ServiceManagerAwareInterface
{
/**
 * @var AuthAdapter
 */
protected $authAdapter;
    .
    .
/**
 * Proxy convenience method
 *
 * @return mixed
 */
public function hasIdentity()
{
    return $this->getAuthService()->hasIdentity();
}
/**
 * Get authService.
 *
 * @return AuthenticationService
 */
public function getAuthService()
{
    if (null === $this->authService) {
        $this->authService = $this->getServiceManager()->get('zfcuser_auth_service');
    }
    return $this->authService;
} 
```

我的问题：

*   从 indexAction() 中，控制器插件被调用而不被实例化（$this->zfcUserAuthentication()->hasIdentity()），控制器插件总是这样工作吗？
*   hasIdentity() 中到底发生了什么？我看到 getAuthService() 返回了一些东西，但没有返回 hasIdentity()。我不熟悉这种函数调用的高级类实现，所以我非常感谢这里的任何解释或我应该研究的主题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T18:57:01.817

我无法回答您的第一个问题，但关于您的第二个问题：

代码中的`getAuthService()`方法返回一个`AuthenticationService`对象，该对象有一个`hasIdentity()`方法。

所以有两种不同的`hasIdentity()`方法：

*   在`AuthenticationService`课堂上（[源代码在这里](https://github.com/zendframework/zf2/blob/master/library/Zend/Authentication/AuthenticationService.php)）。
*   在`ZfcUserAuthentication`您正在查看的课程中。

类中的这行代码`ZfcUserAuthentication`：

```
return $this->getAuthService()->hasIdentity(); 
```

做三件事：

*   `$this->getAuthService()`返回一个`AuthenticationService`对象。
*   `hasIdentity()`然后调用该对象的方法`AuthenticationService`，并返回一个`boolean`.
*   `boolean`然后返回。

想象一下将代码分成两部分：

```
// Get AuthenticationService object     Call a method of that object
$this->getAuthService()                 ->hasIdentity(); 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T19:01:42.693

Zend Framework 中的各种插件都是由插件管理器管理的，插件管理器是AbstractPluginManager 的子类，AbstractPluginManager 是ServiceManager 的子类。

`$this->zfcUserAuthentication()`AbstractController 在内部代理到 pluginmanager。

`AuthenticationService::hasIdentity()`检查在此请求或先前请求的成功身份验证尝试期间是否将某些内容添加到存储中： [请参阅此处](https://github.com/zendframework/zf2/blob/master/library/Zend/Authentication/AuthenticationService.php#L139)

# java - 线程本地存储与哈希表

> ID：13553846
> 
> 赞同：0
> 
> 时间：2012-11-25T18:06:25.890
> 
> 标签：java, multithreading, performance, thread-local

我有一个单例类，我需要存储一些特定于每个线程的字段。我正在考虑将这些字段作为 ThreadLocal 变量添加到单例中，或者使用同步的哈希表，其中键是线程 ID。关于哪个开销较低的任何建议？我之前看到了[性能比较](https://stackoverflow.com/questions/609826/performance-of-threadlocal-variable)，但这并不是我所需要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T19:11:25.747

`ThreadLocal` **本质**`HashMap`上是线程 ID 上的键控。你最好使用`ThreadLocal`.

还有（我相信）使用 ThreadLocals 在幕后为您进行进一步的优化。

# ant - 如何解析文件路径并获取其父目录的父目录？

> ID：13553847
> 
> 赞同：2
> 
> 时间：2012-11-25T18:06:26.727
> 
> 标签：ant

使用 Ant - 在构建文件中 - 我如何解析文件路径并获取其父目录的父目录？

```
<target name="test">
 <property name="jar"
  value="D:\F\D\r\org\springframework\spring-beans\3.0.7.R\spring-beans.jar" />
 <echo>${jar}</echo>
</target> 
```

我想得到这个结果：

```
D:\F\D\r\org\springframework\spring-beans 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-25T22:38:38.733

您可以使用 Ant[`dirname`任务](http://ant.apache.org/manual/Tasks/dirname.html)，并根据需要多次调用它来获取父母、父母的父母等：

```
<dirname file="${jar}" property="jar.dir" />
<dirname file="${jar.dir}" property="jar.dir.parent" />
<dirname file="${jar.dir.parent}" property="jar.dir.grandparent" /> 
```

*（您的示例结果看起来像包含 jar 的目录的父级（即`jar.dir.parent`，但您提到了父级的父级。）*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-13T12:42:56.540

简单来说，你可以在设置属性的时候尝试使用位置；像这样：

```
<property name="jar.parent.dir" location="${jar}/../.."/> 
```

你会得到：

```
D:\F\D\r\org\springframework\spring-beans 
```

# sql - SQL 子查询导致 LINQ 和实体框架代码优先

> ID：13553849
> 
> 赞同：2
> 
> 时间：2012-11-25T18:06:37.760
> 
> 标签：sql, linq, entity-framework, ef-code-first

我想进行一个查询，该查询将返回我的实体以及它们的关联实体之一。例如：

```
select *, (select COUNT(*) from Forms where Contact_Id = Contacts.Id) 
as FormsCount from Contacts; 
```

我的联系人实体有一个名为 FormsCount 的属性，但它没有被映射，因为表中没有类似名称的列。是否可以编写一个 LINQ 查询来返回我填写了附加 FormsCount 属性的联系人实体？

或者，如果我可以在单独的字段中获取 FormsCount 值并且可以手动将它们复制到实体中，我会很高兴。查询的结果可能是这种形式，例如：

```
{
  Contact Contact;
  int FormsCount;
} 
```

然后我可以遍历结果并将 FormsCount 复制到 Contact。也许这可以通过使用投影来实现？

我知道如何使用 2 个查询来做到这一点：a）首先获取联系人实体 b）获取第一个查询中返回的联系人的对或联系人 ID 和 FormsCount。

但我想使用一个查询来做到这一点。此外，我不希望 FormsCount 属性始终填写在我的联系人实体中，我希望对此进行控制。有任何想法吗？

谢谢， 迈克尔

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T21:15:55.653

你对投影是正确的。

如果`Contact`具有导航属性`Forms`，您可以投影：

```
from c in context.Contacts
select new { Contact = c, FormsCount = c.Forms.Count() } 
```

如果没有，您将不得不使用子查询：

```
from c in context.Contacts
select new
{
  Contact = c, 
  FormsCount = context.Forms.Count(f => f.Contact_Id == c.Id)
} 
```

EF 将在一个 SQL 查询中处理这两种情况。

# c# - JoinMulticastGroup 抛出无效参数异常？

> ID：13553852
> 
> 赞同：1
> 
> 时间：2012-11-25T18:06:55.817
> 
> 标签：c#, multicast

我在发送 udp 多播数据包的程序中使用以下代码，

但是我一开始就遇到了异常

```
 static void Main(string[] args)
    {
        UdpClient udpclient = new UdpClient();

        IPAddress multicastaddress = IPAddress.Parse("239.0.0.222");   

       // Here I get System.Net.Sockets.SocketException , An invalid argument was supplied
        udpclient.JoinMulticastGroup(multicastaddress);

        ... 
```

我有这个问题的机器是windows xp。当我在另一台机器（Windows 7）上运行相同的代码时，我没有得到这个异常，有什么想法可能是错的吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T09:26:37.920

为避免套接字错误 10048：

尝试：

```
UdpClient udpclient = new UdpClient();
IPEndPoint ipEndPoint = new IPEndPoint(IPAddress.Any, _listenPort);
udpclient.Client.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.ReuseAddress, true);
udpclient.ExclusiveAddressUse = false;
udpclient.Client.Bind(ipEndPoint); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:11:08.740

尝试向 udpclient 添加一个端口，例如

```
udpClient = new udpClient(9000) //or IPEndPoint with IPAddress and Port 
```

无论如何，与微软的 udpclient 打交道都很痛苦

# ruby-on-rails - Rails：正确的登录结构？

> ID：13553856
> 
> 赞同：0
> 
> 时间：2012-11-25T18:07:21.817
> 
> 标签：ruby-on-rails

我有一个“登录”功能 - :controller => "sessions" , :action => "new"

我还编辑了 :controller => "application" 以便如果我在网站上的任何地方并且我没有登录 - 我将被重定向到根路径：

```
before_filter :login_required
protected
  def login_required
    redirect_to "/" if not session[:user]
end 
```

但问题是现在我无法进入登录页面。

它曾经是 localhost:3000/sessions/new

我认为更改根路径会有所帮助，所以我将其添加到 routes.rb 中：

```
match '/', :controller => 'sessions', :action => 'new' 
```

之后 localhost:3000 开始在浏览器中给出错误“错误转发”。

我也不想将“/sessions/new/”作为我的默认位置。

有没有办法，当我转到“/”时 - 查看“/sessions/new/”的内容并且仍然将我的保护代码保留在应用程序控制器中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T19:15:43.187

您可以使用

```
skip_filter :login_required, :only => [:new] 
```

在 SessionController 中跳过 :new 操作的过滤器。此外，您可以通过以下方式匹配“/”：

```
 root :to => 'sessions#new' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T21:59:42.987

除了使用上述的 skip_filter 方法外，还可以考虑使用 Devise gem 进行用户身份验证，而不是自己滚动，除非您有充分的理由这样做。

# java - 搜索到一个属性字符串类型，一些带有 hql 的字符用于休眠

> ID：13553857
> 
> 赞同：0
> 
> 时间：2012-11-25T18:07:44.890
> 
> 标签：java, hibernate, hql

我不知道我能不能做到这一点。我有一个属性，我用 hibernate 存储一个字符串：`String tags`这个属性可以取值，例如：`tags="car,airplane,bycicle"`

现在我想获取其标签值包含子字符串“car”的实例：

```
Object A --> tags="car,airplane"
Object B --> tags="bycicle"
Object C --> tags="bycicle,car" 
```

返回 A 和 C

有什么办法可以做到这一点？

我尝试按标签对对象进行分类，然后恢复包含一个或多个特定标签的对象。

这个想法与 Stackoverflow 在您提出问题时对标签字段所做的相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T18:13:39.300

这正是数据库规范化很重要的原因。永远不应将多个值存储在单个列中。您应该有一个 Tag 实体，并且在您的实体和 Tag 实体之间有一个 ManyToMany 关联。如果你有，你可以简单地做

```
select p from Post p inner join p.tags tag where tag.name = 'car' 
```

使用您当前的设计，您最好的选择是

```
select p from Post p where p.tags like '%car%' 
```

但这会慢得多，并且会返回带有标签的帖子*care*或*vacarm*。

# symfony - symfony2 - 多对多关系/表格

> ID：13553858
> 
> 赞同：1
> 
> 时间：2012-11-25T18:07:47.430
> 
> 标签：symfony, doctrine-orm

我遇到了涉及多对多关系的 Symfony2 问题：我有一个用户实体和一个项目实体，它们与多对多关系链接：

我的用户实体：

```
class User implements UserInterface
{

[...]

/**
 * @ORM\ManyToMany(targetEntity="Project", inversedBy="users", cascade={"persist"})
 * @ORM\JoinTable(name="user_project",
 *     joinColumns={@ORM\JoinColumn(name="user_id", referencedColumnName="id")},
 *     inverseJoinColumns={@ORM\JoinColumn(name="project_id", referencedColumnName="id")}
 * )
 *
 * @var ArrayCollection $projects
 */
protected $projects; 
```

还有我的项目实体：

```
class Project
{

 [...]

 /**
 * @ORM\ManyToMany(targetEntity="User", mappedBy="projects")
 */
protected $users; 
```

Symfony2 创建了“链接”表（称为 user_project），然后我插入了一些行。例如，我有 2 个用户（id = 1 / id = 2）和 2 个项目（id = 1 / id = 2）。

在我的表 user_project 中，我插入了以下行：

1.  1 (user_id) - 1 (project_id)
2.  1 (user_id) - 2 (project_id)
3.  2 (user_id) - 1 (project_id)

因此，用户 1 被分配给项目 1 和 2，而用户 2 仅被分配给项目 1。

我的问题是我不知道如何为指定用户选择项目。例如，我想（在我的表单中）显示一个选择框，其中包含分配给我的用户的项目。（对于用户 2，我只想在我的选择框中有项目 1）

我的表格：

```
$builder->add('project', 'entity', array(
        'class' => 'WebaccessBugtrackerBundle:Project',
        'property' => 'name',
        'query_builder' => function($er) use ($userManager) {

            $qb = $er->createQueryBuilder('project')
            ->orderBy('project.name', 'ASC');

            $qb-> ????

            }
            return $qb;
        },
        'property' => 'name')); 
```

我希望你明白我在说什么，并希望你能帮助我:)

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T18:37:46.460

如果你已经为你的 User 实体创建了一个表单类，只需将它添加到 buildForm() 函数中：

```
$builder->add('projects') 
```

Symfony 应该猜到您想要一个包含该特定用户的项目的选择列表。

Symfony 文档中的更多信息：http: [//symfony.com/doc/current/book/forms.html#creating-form-classes](http://symfony.com/doc/current/book/forms.html#creating-form-classes)

# qt - Qt 从 A 类发射到 B 类中的插槽

> ID：13553860
> 
> 赞同：0
> 
> 时间：2012-11-25T18:07:53.740
> 
> 标签：qt, signals-slots

我正在尝试为我的 Gui 应用程序创建一个日志窗口。

我有名为 sql 和 MyService 的类

如何从类 sql 构建和发出信号以更新 MyService 日志窗口？

在 main.cpp 中：

```
 MyService myService;
    sql mySql;
    QObject::connect(mySql, SIGNAL(updateMyLog(QString(msg))),myService, 
    SLOT(updateMyLog(QString(msg)))); 
```

**编辑：**
我在我的 sql 类中忘记了 Q_OBJECT 并且错误 dosnt 不再显示

```
error: C2665: 'QObject::connect' : 
none of the 3 overloads could convert all the argument types 
```

**EDIT2：**
我的 updateMyLog 插槽是：

```
public slots:
void updateMyLog(QString logmessage); 
```

我得到不同的错误：

```
QObject::connect: No such signal sql::updateMyLog(QString msg) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T18:21:24.313

its seems i should do this:

```
QObject::connect(&mySql, SIGNAL(updateMyLog(QString)),&myService,
                 SLOT(updateMyLog(QString))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T18:23:08.970

Does it work if you write it like this?

```
QObject::connect(&mySql, SIGNAL(updateMyLog(QString)), &myService, 
SLOT(updateMyLog(QString))); 
```

Please note that you should pass pointers as the first and third parameters. As `myService` is not a pointer, you should get the memory address where it is allocated (a pointer to it).

# jquery - 鼠标滚动到锚点

> ID：13553862
> 
> 赞同：0
> 
> 时间：2012-11-25T18:08:14.387
> 
> 标签：jquery, css, mousewheel

第一个问题，希望大家帮忙！比起程序员，我更像是一个艺术专家，所以我完全迷失在这里。

所以！我想做的就是这个。

我正在设置一个具有 500% 高的单个 div 的页面。它包含 5 个 20% 高的 div，为我提供了 5 个大小适合任何屏幕的 div。这是关于 jFiddle 的示例：(http://jsfiddle.net/NwUvV/3/)

但。

我需要的是让我的鼠标滚轮在用户滚动时完美地滚动到每个 div。如，用户滚动鼠标滚轮，页面移动到 div #2（无论是锚点还是 ID）。我不希望人们能够在屏幕上显示 div 1 的一半和 div 2 的一半。这太丑了。

这是一个网站示例：[http ://www.beoplay.com/Products/BeoplayA9?utm_source=bang-olufsen.com&utm_medium=referral&utm_campaign=Bang-Olufsen.com%2BProduct%2BPage&utm_term=EXPERIENCE%2BA9&utm_content=BeoPlay%2BA9 %2B%3A%2BAll#一目了然](http://www.beoplay.com/Products/BeoplayA9?utm_source=bang-olufsen.com&utm_medium=referral&utm_campaign=Bang-Olufsen.com%2BProduct%2BPage&utm_term=EXPERIENCE%2BA9&utm_content=BeoPlay%2BA9%2B%3A%2BAll#at-a-glance)

看看如何使用鼠标滚轮将您完美地带到下一个 div？它看起来像是锁定在一个锚上并平滑地滚动到它，不是吗？

各位大侠有什么可以帮忙的吗？

提前非常感谢！

杰夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-31T16:37:21.093

不知道你最终是否明白了这一点，但我想我会在那里举一个例子......

最终我们需要拦截滚动事件并确定用户滚动的方式。

一旦我们知道哪个方向，我们就可以使用活动索引的存储变量，并根据活动元素的偏移量为主体设置动画。

```
// setup active index variable
var index = 0;
//  we will use this to determine scroll direction
var lastTop = 0;

$( window ).on( 'scroll', function( ev ) {
    // get the current top offset
    top = $( window ).scrollTop();
    // Determine direction
    if ( top > lastTop ) { 
        // down
        index++
        // handle animation
    } else {
        // up
        index--
        // handle animation
    }
    // update lastTop for next interaction
    lastTop = top;

} 
```

代码本身应该有足够的注释以了解正在发生的事情，但是如果您需要任何进一步的帮助或有任何问题，请告诉我。

在此处查看完整示例 [http://jsfiddle.net/NwUvV/71/](http://jsfiddle.net/NwUvV/71/)

可以使用一些清理来帮助进行转换（可能是带有后备的 css3）等，但希望它能够理解这一点，你可以从那里得到它。

包含的代码将考虑可变大小的元素，如果需要，请检查 css 中的注释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T19:43:38.887

给你，伙计！在这里查看示例[**示例**](http://videsignz.com/testing/divscrolling.php)

```
var tempScrollTop = 0;
var currentScrollTop = 0;
var scrollHeight = $(window).height();
var newHeight = 0;

function scrollIt() {

$(window).off('scroll', scrollIt);

    currentScrollTop = $(window).scrollTop();

    if (tempScrollTop < currentScrollTop) {
       newHeight = newHeight + scrollHeight;
       $('html').animate({scrollTop: newHeight}, 500, function(){
             var setScroll = setTimeout(function(){
                console.log('Animation Complete');
                tempScrollTop = $(window).scrollTop();
                $(window).on('scroll', scrollIt);
            }, 10);
        }); 

    } else if (tempScrollTop > currentScrollTop){
       newHeight = newHeight - scrollHeight;
       $('html').animate({scrollTop: newHeight}, 500, function(){
             var setScroll = setTimeout(function(){
                console.log('Animation Complete');
                tempScrollTop = $(window).scrollTop();
                $(window).on('scroll', scrollIt);
            }, 10);
        }); 
    }

}

$(window).on('scroll', scrollIt); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T18:17:46.437

使用jQuery的鼠标滚轮插件，可以检测滚动方向，设置滚动开始时的变量，返回false；滚动完成后，您可以触发自己的动画以检测到滚动事件的方向滚动窗口。

您能否按照 VIDesignz 的要求设置一个小提琴，以便可以使用上述示例创建一个版本？

# php - tinyMCE.execCommand 在单个页面上的两个不同文本区域上

> ID：13553867
> 
> 赞同：1
> 
> 时间：2012-11-25T18:08:30.467
> 
> 标签：php, javascript, javascript-events

这是一个用 tinyMCE 替换 textarea 上的文本的 javascript 函数。

`tinyMCE.execCommand('mceReplaceContent', false, text)`

在我的页面中，我有两个带有 tinyMCE 的文本区域，我只想修改一个。

我试图做一些研究，但研究并没有解决这个问题。

问候

# c++ - 对 stl 的头文件

> ID：13553872
> 
> 赞同：18
> 
> 时间：2012-11-25T18:09:27.773
> 
> 标签：c++, stl

我习惯于使用 stl pair 编写代码，而不包括任何特定的头文件来使用 pair。但是今天一位朋友告诉我，每当我使用 pair 时，我都应该使用*实用程序*头文件，否则我会在某些编译器上遇到问题。请告诉这是不是真的。如果我可以在不使用它的情况下编写代码，那么实用程序头的用途是什么。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-25T18:14:57.787

您几乎应该始终为您在程序中使用的每个类包含头文件，否则您将依赖于某些头文件在内部使用您感兴趣的类的事实，但这可能会在另一个编译器或版本上发生变化。您需要阅读类的引用（例如在 cppreference.com - [http://en.cppreference.com/w/cpp/utility/pair](http://en.cppreference.com/w/cpp/utility/pair)上）并检查您需要包含哪个头文件 - 如果`std::pair`您应该添加`#include <utility>`. 您不能依赖于这样一个事实，例如，当您使用诸如等之类的操纵器时，您的代码`iostream`已经包含`iomanip`并且您的代码可以编译`setw`。您不能 - 您始终应该参考语言规范并包含所需的标头。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-25T18:11:47.830

关键是您可能`<utility>`通过包含其他一些标头间接包含了标头。通常情况下，头文件被 C++ 实现中的其他头文件包含，而标准没有强制要求包含头文件。因此，通过包含`<utility>`，您可以确保您的代码在符合标准的实现中是可移植的（至少就这个特定问题而言）。

该标准指定它`std::pair`是 in `<utility>`，因此无论何时使用`std::pair`.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-25T18:16:15.310

您始终需要包含定义您使用的组件的标题。一些标准库将被实现以包含它们在内部使用的其他声明，但您根本不能依赖它。我认为标准库使声明可用而不需要它们可用是一个错误。

类模板`std::pair`由 提供`<utility>`。

# php - 如何处理要插入 mysql 的大型 CSV 文件

> ID：13553875
> 
> 赞同：1
> 
> 时间：2012-11-25T18:09:59.167
> 
> 标签：php, mysql, csv, insert

我现在正在解析一个 csv 文件（以 .txt 格式制作），但该文件未压缩大约 350mb。压缩后，它在 zip 文件中显示为 23mb。当我尝试解析 350mb 文件时，我的系统完全死机。我将这些行存储在这样的数组中。第一行是标题。

```
$fh = fopen($inputFile, 'r');
    $contents = fread($fh, filesize($inputFile)); // 5KB
fclose($fh);
//$contents = str_replace('"','',$contents);

$fileLines = explode("\n", $contents); // explode to make sure we are only using the first line. 
```

然后我遍历每一行以将其循环插入到 mySQL 中。由于该文件大约为 350mb，是否有办法从 .zip 文件（如 .zip_filename.txt）中解析它，或者甚至会有所作为？

文件太大，无法通过import方式直接插入mysql。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T18:12:23.980

使用内置函数[fgetcsv](http://php.net/manual/en/function.fgetcsv.php)：

```
<?php
$row = 1;
if (($handle = fopen($inputFile, "r")) !== FALSE) {
    while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
        $num = count($data);
        echo "<p> $num fields in line $row: <br /></p>\n";
        $row++;
        for ($c=0; $c < $num; $c++) {
            echo $data[$c] . "<br />\n";
        }
    }
    fclose($handle);
}
?> 
```

如果可能，也使用多插入。而不是运行多个查询：

```
insert into table (col1, col2) values("row1-col1", "row1-col2");
insert into table (col1, col2) values("row2-col1", "row2-col2"); 
```

像这样构建一个查询要快得多：

```
insert into table (col1, col2) 
values ("row1-col1", "row1-col2"),
       ("row2-col1", "row2-col2"); 
```

顺便说一句，您也可以[直接将文件加载到 mysql](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)中：

```
load data local infile 'file.csv' into table table_name fields terminated by ','
enclosed by '"'
lines terminated by '\n'
(col1, col2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T19:06:23.247

考虑使用[`LOAD DATA INFILE`](http://dev.mysql.com/doc/refman/5.6/en/load-data.html)，这将允许您直接插入 CSV 文件的内容。

# ruby-on-rails - rspec 规范无效选项：--default_path=spec

> ID：13553880
> 
> 赞同：1
> 
> 时间：2012-11-25T18:10:28.720
> 
> 标签：ruby-on-rails, rspec

我从 rspec 收到一个非常奇怪的错误：

```
$ rspec spec

invalid option: --default_path=spec 
```

我在 rails 4, ruby​​ 2 应用程序中，我已将所有内容更新为 rspec-rails 3.0.0.beta。我已经转储并重新安装了 rspec、.rspec 和 spec_helper.rb。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T18:53:14.723

您可能正在使用不同版本的 RSpec。测试在 balance-ruby 项目中运行良好。确保在 Gemfile 中有这一行：

```
gem "rspec", '~> 2.10' 
```

然后运行`bundle install`，最后再试一次`bundle exec rspec spec`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-19T06:04:32.670

这是旧的，但对于谷歌搜索的人来说：除了检查你的`Gemfile`，看看你的 repo 的`.rspec`配置文件，看看是否有问题。如果这不能解决问题，请检查您的环境以查看您是否有全局`.rspec`配置文件。试着`cat ~/.rspec`看看你是否有一个，是否有任何问题。全局配置给我带来了问题。

# android - 模拟器 2.2 上的活页夹事务失败，但 4.1 上没有

> ID：13553881
> 
> 赞同：0
> 
> 时间：2012-11-25T18:10:31.543
> 
> 标签：android, android-widget, imageview

我正在将 imageview 设置为来自 sd 卡的图像。这在 android 模拟器 4.1 上运行顺利，但是在 android 2.2 版的模拟器上它返回失败的活页夹事务。我觉得这很奇怪，无法弄清楚问题可能是什么。图像图像设置如下：

```
 try{
                    String pathName = Environment.getExternalStorageDirectory().getPath() + "/Drop Insight/" + c.getString(iID) + ".png";
                    File path = new File(pathName);
                    if(path.exists()){
                        BitmapFactory.Options options = new BitmapFactory.Options();
                        Bitmap bm = BitmapFactory.decodeFile(pathName, options);
                        remoteView.setImageViewBitmap(R.id.ivwidgetimage, bm);
                    }
                    else{
                        remoteView.setImageViewResource(R.id.ivwidgetimage, R.drawable.defaultpic);
                    }
                }
                catch (Exception e) {
                    Log.e(DEBUG_TAG, "Failed", e);
                } 
```

我已经尝试过 options.inSampleSize = 4; 但这并没有解决问题。

感谢您的任何解释和帮助。

```
11-25 19:22:04.992: D/dalvikvm(59): GC_EXPLICIT freed 3148 objects / 171272 bytes in 107ms
11-25 19:22:05.092: V/MediaProvider(216): /mnt/sdcard volume ID: 318247957
11-25 19:22:05.201: D/dalvikvm(282): GC_EXTERNAL_ALLOC freed 989 objects / 66344 bytes in 59ms
11-25 19:22:05.391: E/JavaBinder(59): !!! FAILED BINDER TRANSACTION !!!
11-25 19:22:05.401: D/dalvikvm(153): GC_EXPLICIT freed 4139 objects / 251136 bytes in 1278ms 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T18:43:02.600

对于像你这样的代码，这通常意味着位图太大。每个基于 Binder 的 IPC 事务限制为 1MB。我不知道这个限制是在 Android 4.x 中提出的，尽管这当然是可能的。

因此，请确保`setImageViewBitmap()`使用足够小的`Bitmap`.

# python - 在函数中实现脚本。一些建议？

> ID：13553884
> 
> 赞同：0
> 
> 时间：2012-11-25T18:10:36.080
> 
> 标签：python, performance, algorithm, coding-style, styles

首先，我对 Python（一个编程领域）还很陌生，但我想学习和转换一个由[jwpat7](https://stackoverflow.com/users/837847/jwpat7)开发的函数。给定一组从凸包导出的点

```
hull= [(560023.44957588764,6362057.3904932579), 
      (560023.44957588764,6362060.3904932579), 
      (560024.44957588764,6362063.3904932579), 
      (560026.94957588764,6362068.3904932579), 
      (560028.44957588764,6362069.8904932579), 
      (560034.94957588764,6362071.8904932579), 
      (560036.44957588764,6362071.8904932579), 
      (560037.44957588764,6362070.3904932579), 
      (560037.44957588764,6362064.8904932579), 
      (560036.44957588764,6362063.3904932579), 
      (560034.94957588764,6362061.3904932579), 
      (560026.94957588764,6362057.8904932579), 
      (560025.44957588764,6362057.3904932579), 
      (560023.44957588764,6362057.3904932579)] 
```

此脚本在此[帖子问题](https://stackoverflow.com/questions/13542855/python-help-to-implement-an-algorithm-to-find-the-minimum-area-rectangle-for-gi)之后返回所有可能区域的打印。jwpat7开发的代码是：

```
import math

def mostfar(j, n, s, c, mx, my): # advance j to extreme point
    xn, yn = hull[j][0], hull[j][1]
    rx, ry = xn*c - yn*s, xn*s + yn*c
    best = mx*rx + my*ry
    while True:
        x, y = rx, ry
        xn, yn = hull[(j+1)%n][0], hull[(j+1)%n][1]
        rx, ry = xn*c - yn*s, xn*s + yn*c
        if mx*rx + my*ry >= best:
            j = (j+1)%n
            best = mx*rx + my*ry
        else:
            return (x, y, j)

n = len(hull)
iL = iR = iP = 1                # indexes left, right, opposite
pi = 4*math.atan(1)
for i in range(n-1):
    dx = hull[i+1][0] - hull[i][0]
    dy = hull[i+1][1] - hull[i][1]
    theta = pi-math.atan2(dy, dx)
    s, c = math.sin(theta), math.cos(theta)
    yC = hull[i][0]*s + hull[i][1]*c    
    xP, yP, iP = mostfar(iP, n, s, c, 0, 1)
    if i==0: iR = iP
    xR, yR, iR = mostfar(iR, n, s, c,  1, 0)
    xL, yL, iL = mostfar(iL, n, s, c, -1, 0)
    area = (yP-yC)*(xR-xL) 
    print '    {:2d} {:2d} {:2d} {:2d} {:9.3f}'.format(i, iL, iP, iR, area) 
```

结果是：

```
i iL iP iR    Area
 0  6  8  0   203.000
 1  6  8  0   211.875
 2  6  8  0   205.800
 3  6 10  0   206.250
 4  7 12  0   190.362
 5  8  0  1   203.000
 6 10  0  4   201.385
 7  0  1  6   203.000
 8  0  3  6   205.827
 9  0  3  6   205.640
10  0  4  7   187.451
11  0  4  7   189.750
12  1  6  8   203.000 
```

我希望创建一个返回最小矩形的长度、宽度和面积的函数。前任：

```
Length, Width, Area = get_minimum_area_rectangle(hull)
print Length, Width, Area
18.036, 10.392, 187.451 
```

我的问题是：

1.  我需要创建一个函数还是两个函数。例如：def mostfar 和 get_minimum_area_rectangle
2.  hull 是一个价值列表。它是最好的格式吗？
    3.  遵循一种功能方法，我有一个问题要在里面集成 mostfar

提前致谢

1) 解决方案：在 Scott Hunter 建议的第一个解决方案之后的一个函数，我在将 mostfar() 集成到 get_minimum_area_rectangle() 中时遇到问题。任何建议或帮助都非常感谢，因为我可以学习。

```
#!/usr/bin/python
import math

def get_minimum_area_rectangle(hull):
    # get pi greek
    pi = 4*math.atan(1)
    # number of points
    n = len(hull)
     # indexes left, right, opposite
    iL = iR = iP = 1
    # work clockwise direction
    for i in range(n-1):
        # distance on x axis
        dx = hull[i+1][0] - hull[i][0]
        # distance on y axis
        dy = hull[i+1][1] - hull[i][1]
        # get orientation angle of the edge
        theta = pi-math.atan2(dy, dx)
        s, c = math.sin(theta), math.cos(theta)
        yC = hull[i][0]*s + hull[i][1]*c 
```

从这里开始，按照上面的 jwpat7 示例，我需要使用 mostfar()。在这一点上，我很难理解如何整合（抱歉，这个术语不正确）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T18:30:51.207

1.  您可以使用一个函数或两个函数，但使用两个函数可能更简洁、更容易。您可以按原样保留该`mostfar`功能。然后，只需通过添加函数定义行将代码的后半部分转换为函数：

    ```
    def get_minimum_area_rectangle(hull): 
    ```

    …然后缩进其余代码（以 开头`n = len(hull)`）以形成函数的主体。您还需要更改函数以返回您想要获取的值（长度、宽度和面积）。这将使您的代码保持模块化和干净，并且只需要很少的更改。

2.  `hull`为此目的，使用值列表似乎很好。另一种方法是使用数组（如 NumPy 数组），但在这种情况下，您将迭代地遍历数据，一次一个项目，而不是同时跨多个数据点进行任何计算。所以列表应该没问题。访问列表中的项目很快，与您必须做的数学相比，它不应该是一个瓶颈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T18:17:40.710

1.  您当然可以将其作为单个功能进行：稍微修改 mostfar，而不是打印找到的区域，跟踪最小的区域和随之而来的信息。或者你可以让它收集它正在打印的值到一个 lst 中，然后 GEAR 可以使用它来找到最小值。

编辑：（我错过了一些代码在最远之外）我将“脚本”部分（最远之后的代码）包装到一个函数中，并如上所述修改它。然后，您的“脚本”将只调用该函数，或者，如果使用第二个修改，则从返回的列表中找到最小值。

1.  我认为您对船体的表示没有任何问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T03:32:15.913

下面是一个示例，说明如何从您的代码中使其成为*仿函数*对象并使用它——以及对我认为值得的其他一些事情的一些更改。函子是充当函数角色但可以像对象一样操作的实体。

在 Python 中，两者之间的区别不大，因为函数已经是单例对象，但有时为一个对象创建一个专门的类很有用。在这种情况下，它允许将辅助函数制作为私有类方法，而不是您似乎反对这样做的全局或嵌套方法。

```
from math import atan2, cos, pi, sin

class GetMinimumAreaRectangle(object):
    """ functor to find length, width, and area of the smallest rectangular
        area of the given convex hull """
    def __call__(self, hull):
        self.hull = hull
        mostfar = self._mostfar  # local reference
        n = len(hull)
        min_area = 10**100  # huge value
        iL = iR = iP = 1  # indexes left, right, opposite
#        print '    {:>2s} {:>2s} {:>2s} {:>2s} {:>9s}'.format(
#                   'i', 'iL', 'iP', 'iR', 'area')
        for i in xrange(n-1):
            dx = hull[i+1][0] - hull[i][0]  # distance on x axis
            dy = hull[i+1][1] - hull[i][1]  # distance on y axis
            theta = pi-atan2(dy, dx)   # get orientation angle of the edge
            s, c = sin(theta), cos(theta)
            yC = hull[i][0]*s + hull[i][1]*c
            xP, yP, iP = mostfar(iP, n, s, c, 0, 1)
            if i==0: iR = iP
            xR, yR, iR = mostfar(iR, n, s, c,  1, 0)
            xL, yL, iL = mostfar(iL, n, s, c, -1, 0)
            l, w = (yP-yC), (xR-xL)
            area = l*w
#            print '    {:2d} {:2d} {:2d} {:2d} {:9.3f}'.format(i, iL, iP, iR, area)
            if area < min_area:
                min_area, min_length, min_width = area, l, w
        return (min_length, min_width, min_area)

    def _mostfar(self, j, n, s, c, mx, my):
        """ advance j to extreme point """
        hull = self.hull  # local reference
        xn, yn = hull[j][0], hull[j][1]
        rx, ry = xn*c - yn*s, xn*s + yn*c
        best = mx*rx + my*ry
        while True:
            x, y = rx, ry
            xn, yn = hull[(j+1)%n][0], hull[(j+1)%n][1]
            rx, ry = xn*c - yn*s, xn*s + yn*c
            if mx*rx + my*ry >= best:
                j = (j+1)%n
                best = mx*rx + my*ry
            else:
                return (x, y, j)

if __name__ == '__main__':

    hull= [(560023.44957588764, 6362057.3904932579),
           (560023.44957588764, 6362060.3904932579),
           (560024.44957588764, 6362063.3904932579),
           (560026.94957588764, 6362068.3904932579),
           (560028.44957588764, 6362069.8904932579),
           (560034.94957588764, 6362071.8904932579),
           (560036.44957588764, 6362071.8904932579),
           (560037.44957588764, 6362070.3904932579),
           (560037.44957588764, 6362064.8904932579),
           (560036.44957588764, 6362063.3904932579),
           (560034.94957588764, 6362061.3904932579),
           (560026.94957588764, 6362057.8904932579),
           (560025.44957588764, 6362057.3904932579),
           (560023.44957588764, 6362057.3904932579)]

    gmar = GetMinimumAreaRectangle()  # create functor object
    print "dimensions and area of smallest enclosing rectangular area:"
    print "  {:.3f}(L) x {:.3f}(W) = {:.3f} area".format(*gmar(hull))  # use it 
```

输出：

```
dimensions and area of smallest enclosing rectangular area:
  10.393(L) x 18.037(W) = 187.451 area 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T15:56:54.670

我正在发布另一个答案，显示如何按照我（和其他人）的建议进行操作，这只是将辅助函数嵌套在`mostfar()`被调用的主函数中。这在 Python 中很容易做到，因为嵌套函数可以访问其封闭范围的局部变量（就像`hull`在案例中一样）。我还`_mostfar()`按照约定重命名了该函数，以表明某些东西是私有的，但这并不是绝对必要的（永远，而且绝对不是这里）。

如您所见，尽管我确实简化了一些与嵌套函数无关的事情（因此它们可能会集成到您选择的任何答案中），但大多数代码与我的其他答案中的代码非常相似。

```
from math import atan2, cos, pi, sin

def get_minimum_area_rectangle(hull):
    """ find length, width, and area of the smallest rectangular
        area of the given convex hull """

    def _mostfar(j, n, s, c, mx, my):
        """ advance j to extreme point """
        xn, yn = hull[j]
        rx, ry = xn*c - yn*s, xn*s + yn*c
        best = mx*rx + my*ry
        k = j + 1
        while True:
            x, y = rx, ry
            xn, yn = hull[k % n]
            rx, ry = xn*c - yn*s, xn*s + yn*c
            if mx*rx + my*ry < best:
                return (x, y, j)
            else:
                j, k = k % n, j + 1
                best = mx*rx + my*ry

    n = len(hull)
    min_area = 10**100
    iL = iR = iP = 1  # indexes left, right, opposite
#   print '    {:>2s} {:>2s} {:>2s} {:>2s} {:>9s}'.format(
#              'i', 'iL', 'iP', 'iR', 'area')
    for i in xrange(n-1):
        dx = hull[i+1][0] - hull[i][0]  # distance on x axis
        dy = hull[i+1][1] - hull[i][1]  # distance on y axis
        theta = pi-atan2(dy, dx)   # get orientation angle of the edge
        s, c = sin(theta), cos(theta)
        yC = hull[i][0]*s + hull[i][1]*c
        xP, yP, iP = _mostfar(iP, n, s, c, 0, 1)
        if i==0: iR = iP
        xR, yR, iR = _mostfar(iR, n, s, c,  1, 0)
        xL, yL, iL = _mostfar(iL, n, s, c, -1, 0)
        l, w = (yP-yC), (xR-xL)
        area = l*w
#       print '    {:2d} {:2d} {:2d} {:2d} {:9.3f}'.format(i, iL, iP, iR, area)
        if area < min_area:
            min_area, min_length, min_width = area, l, w
    return (min_length, min_width, min_area)

if __name__ == '__main__':

    hull= [(560023.44957588764, 6362057.3904932579),
           (560023.44957588764, 6362060.3904932579),
           (560024.44957588764, 6362063.3904932579),
           (560026.94957588764, 6362068.3904932579),
           (560028.44957588764, 6362069.8904932579),
           (560034.94957588764, 6362071.8904932579),
           (560036.44957588764, 6362071.8904932579),
           (560037.44957588764, 6362070.3904932579),
           (560037.44957588764, 6362064.8904932579),
           (560036.44957588764, 6362063.3904932579),
           (560034.94957588764, 6362061.3904932579),
           (560026.94957588764, 6362057.8904932579),
           (560025.44957588764, 6362057.3904932579),
           (560023.44957588764, 6362057.3904932579)]

    print "dimensions and area of smallest enclosing rectangular area:"
    print "  {:.3f}(L) x {:.3f}(W) = {:.3f} area".format(
             *get_minimum_area_rectangle(hull)) 
```

# php - Joomla 网站：baseurl 不返回正确的 url

> ID：13553887
> 
> 赞同：0
> 
> 时间：2012-11-25T18:10:59.623
> 
> 标签：php, url, joomla, include

我使用 Joomla 2.5.7，但在一页中**遇到 $this->baseurl问题。**

**在我的 index.php 文件中，我使用baseurl**取消包含 .js 文件和 .css 文件，如下例所示：

```
 <script src="<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/js/jquery-1.2.6.min.js" type="text/javascript"></script> 
```

它在这种页面中运行良好：

> [http://mywebsite.com/index.php/myfolder](http://mywebsite.com/index.php/myfolder)

“myfolder”页面是一个类别的文章列表。

当我点击此页面中的一篇文章时，Joomla 使用此网址：

> [http://mywebsite.com/index.php/myfolder/article1](http://mywebsite.com/index.php/myfolder/article1)

在这里，一切都不正确（css，js，...），因为我的**baseurl**返回：

> /文件夹

代替 ：

> /

而且我在 index.php 中的包含不适合这个页面！

您是否已经遇到过这个问题？

如何解决？

我没有找到定义**baseurl**的地方，要更正它，你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-19T15:02:51.927

在模板中，您可以使用快捷方式`$this->baseurl`而不是`JURI::base( true )`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T18:26:49.737

用于`JURI::root()`获取 Joomla 的基根

[有关详细信息，请参阅此处](http://docs.joomla.org/JURI/root)的Joomla 文档页面。此外[，这个](http://forum.joomla.org/viewtopic.php?t=230710)Joomla 论坛帖子 - 虽然指的是 Joomla 1.6 的早期 RC，但也可能会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T21:56:22.680

首先，您在脚本顶部构建**此函数**

```
function thisSite($a){
$this_raw = parse_url($a);
$b = preg_replace('#^www\.(.+\.)#i', '$1', $this_raw['host']);
return $b; } 
```

然后你以这种方式使用**该功能**

```
$thisSite = JURI::root();
// $thisSite will echo http://www.mywebsite.com/
$thisSite_base = thisSite($thisSite);
// the function removes http:// and the www and the /path
echo $thisSite_base; 
```

**这将回响**

mywebsite.com

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T22:05:04.797

好的，感谢您的回答，但我认为您并没有清楚地理解我的问题仅在于包含文件夹的 url。

我通过在 configuration.php 中使用**live_site**变量找到了解决方案。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-25T18:22:58.970

I haven't tested these, but perhaps try one of them:

```
 JDocument::base
 JDocument::baseurl
 JURI::base() 
```

# c# - 使用错误

> ID：13553889
> 
> 赞同：16
> 
> 时间：2012-11-25T18:11:10.013
> 
> 标签：c#, .net, database, entity-framework-5

我有一个错误

> 在 using 语句中使用的类型必须隐式转换为“System.IDisposable”

在线的

```
using (var context = new EntityContainer()) 
```

这是我的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Data.SqlClient;
using System.Globalization;
using System.Data;
using System.Data.Entity;
using school.usi.susibar.model;

namespace school.usi.susibar.test
{
    class Program
    {

        public static void Main(string []args)
         {
            using (var context = new EntityContainer())
            {

                addOrderStatusType(context);

                Console.ReadLine();
            }
        } 

        private static void addOrderStatusType(EntityContainer context)
        {
            try
            {
                OrderStatusType type = new OrderStatusType
                {
                    Name = "Vyrizeno", 
                    CancelPermission = false, 
                    ChangePermission = false
                };
                context.OrderStatusTypes.Add(type);
                context.SaveChanges();
                Console.WriteLine("Pridano");
            }
            catch (Exception ex) {
                Console.WriteLine(ex.InnerException);
            }
        }
         }

            } 
```

EntityContainer() 看起来像这样......

```
//------------------------------------------------------------------------------
// <auto-generated>
//    This code was generated from a template.
//
//    Manual changes to this file may cause unexpected behavior in your application.
//    Manual changes to this file will be overwritten if the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

namespace school.usi.susibar.model
{
    using System;
    using System.Data.Entity;
    using System.Data.Entity.Infrastructure;

    public partial class EntityContainer : DbContext
    {
        public EntityContainer()
            : base("name=EntityContainer")
        {
        }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            throw new UnintentionalCodeFirstException();
        }

        public DbSet<Role> Roles { get; set; }
        public DbSet<Category> Categories { get; set; }
        public DbSet<Table> Tables { get; set; }
        public DbSet<OrderStatusType> OrderStatusTypes { get; set; }
        public DbSet<Person> Persones { get; set; }
        public DbSet<Item> Items { get; set; }
        public DbSet<Order> Orders { get; set; }
        public DbSet<Stock> Stocks { get; set; }
        public DbSet<ItemOrderList> ItemOrderLists { get; set; }
        public DbSet<ItemOrderStatus> ItemOrderStatuses { get; set; }
        public DbSet<PaymentOrderStatus> PaymentOrderStatuses { get; set; }
        public DbSet<Prepaid> Prepaids { get; set; }
    }
} 
```

编辑： DbContext 实现 IDisposable 并且我无法编辑 EntityContainer() 类，因为它是从模板生成的。

有什么想法有什么问题吗？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-11-25T18:50:21.977

从[这个答案](https://stackoverflow.com/a/12568836/4794)：

> 上下文仍然实现 IDisposable，但是如果您遇到错误...抱怨未实现 IDisposable，那么您的问题很可能是您的模型是在引用 EF5 的单独程序集中定义的，并且您没有添加 EF5 引用你的项目。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-06-21T12:24:05.997

答案是将 EntityFramework 程序集添加到引用中

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-25T18:18:14.163

如果要`EntityContainer`在`using`语句中使用，那么它必须实现[IDisposable](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)

尝试这个：

```
public partial class EntityContainer : DbContext, IDisposable
{
    public EntityContainer()
        : base("name=EntityContainer")
    {
    }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        throw new UnintentionalCodeFirstException();
    }

    public DbSet<Role> Roles { get; set; }
    public DbSet<Category> Categories { get; set; }
    public DbSet<Table> Tables { get; set; }
    public DbSet<OrderStatusType> OrderStatusTypes { get; set; }
    public DbSet<Person> Persones { get; set; }
    public DbSet<Item> Items { get; set; }
    public DbSet<Order> Orders { get; set; }
    public DbSet<Stock> Stocks { get; set; }
    public DbSet<ItemOrderList> ItemOrderLists { get; set; }
    public DbSet<ItemOrderStatus> ItemOrderStatuses { get; set; }
    public DbSet<PaymentOrderStatus> PaymentOrderStatuses { get; set; }
    public DbSet<Prepaid> Prepaids { get; set; }

    public void Dispose()
    {
        base.Dispose();
    }
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-02-18T16:16:05.977

我在调用项目的引用中添加了实体框架，它解决了我的问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-27T22:29:16.407

您可以尝试使用工作单元模式，例如这样。

```
public interface IUnitOfWork : IDisposable {
    void Save();
} 
```

然后你的部分 ObjectContext 可以实现`IUnitOfWork`接口：

```
public partial class EntityContainer : IUnitOfWork {
    public void Save() {
        this.SaveChanges();
    }

    void IDisposable.Dispose() {
        base.Dispose();
    }
} 
```

此方法允许我使用 using 指令而不会出错。使用示例（我将存储库模式与此结合使用）：

```
 public List<OrderModelView> GetAllOrdersAscByName() {

        using (IUnitOfWork context = new EntityContainer()) {
            Repository<Order> orderRepository = new Repository<Order>(context);

            var orders = orderRepository.GetAll()
                .Select(o => new OrderModelView {
                    OrderID = o.OrderID,
                    Name = o.Name,
                    OrderTypeCount = o.OrderTypes.Count
                })
                .OrderBy(o => o.Name)
                .ToList();

            return orders;
        }
    } 
```

希望这会有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-18T19:42:36.537

我们有一个页面抛出这个错误和`does not contain a definition for SaveChanges`错误。实体是在一个单独的项目中定义的，并且似乎使用了所有必要的引用。

我发现在编辑页面时从 Visual Studio 2012 切换到 2010 就足够了。这绝对不是理想的，但在我们将所有内容切换到 EF 5+ 之前它可以工作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-11-05T10:13:27.523

如果您使用 Visual Studio 2013 遵循“Pro C# 5.0 和 .Net 4.5 框架”第 23 章中的示例，则只需将其他 DLL 添加到 AutoLotDAL 文件夹中作为参考。

# c# - WPF 可重用 Style.Triggers

> ID：13553890
> 
> 赞同：1
> 
> 时间：2012-11-25T18:11:15.580
> 
> 标签：c#, wpf, mvvm

我如何重用以下触发器？我需要将它重用于窗口中的所有清除按钮。按钮仅在列表视图中选择项目时可见。所以我需要传递`Binding ElementName=teachers`as 参数。有没有办法做到这一点？

```
<Button Width="15"  Grid.Column="1" Content="X" Margin="0,2,5,2" Command="{Binding ClearSubjectCommand}" HorizontalAlignment="Center" HorizontalContentAlignment="Center" VerticalContentAlignment="Center">
    <Button.Style>
        <Style TargetType="{x:Type Button}">
            <Setter Property="Visibility" Value="Visible"></Setter>
            <Style.Triggers>
                <DataTrigger Binding="{Binding ElementName=teachers, Path=SelectedItem}" Value="{x:Null}">
                    <Setter Property="Visibility" Value="Collapsed"></Setter>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Button.Style>
</Button> 
```

* * *

***编辑***

尝试了附加属性。但没有成功。

```
<Button Width="15"  Grid.Column="1" Content="X" Margin="0,2,5,2" Command="{Binding ClearSubjectCommand}"
        HorizontalAlignment="Center" HorizontalContentAlignment="Center" VerticalContentAlignment="Center"
        local:ThemeProperties.BindingElementName="teachers" Style="{StaticResource cancelButton}"/> 
```

和风格，

```
<Style TargetType="{x:Type Button}" x:Key="cancelButton">
    <Setter Property="Visibility" Value="Visible"></Setter>
    <Style.Triggers>
        <DataTrigger Binding="{Binding  ElementName= local:ThemeProperties.BindingElementName, Path=SelectedItem}" Value="{x:Null}">
            <Setter Property="Visibility" Value="Collapsed"></Setter>
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

班级，

```
public static class ThemeProperties
{
    public static string GetBindingElementName(DependencyObject obj)
    {
        return (string)obj.GetValue(BindingElementNameProperty);
    }

    public static void SetBindingElementName(DependencyObject obj, string value)
    {
        obj.SetValue(BindingElementNameProperty, value);
    }

    // Using a DependencyProperty as the backing store for BindingElementName.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty BindingElementNameProperty =
        DependencyProperty.RegisterAttached("BindingElementName", typeof(string), typeof(ThemeProperties), new FrameworkPropertyMetadata("teachers"));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T18:26:17.727

如何将样式声明为 a并使用类似这样的标记扩展`Resource`重新使用它-`StaticResource`

```
<Window.Resources>
   <Style>
      <Style x:Key="CommonButtonStyle" TargetType="{x:Type Button}">
          <Setter Property="Visibility" Value="Visible"></Setter>
          <Style.Triggers>
              <DataTrigger Binding="{Binding ElementName=teachers,
                                       Path=SelectedItem}" 
                           Value="{x:Null}">
                    <Setter Property="Visibility" Value="Collapsed"></Setter>
              </DataTrigger>
          </Style.Triggers>
      </Style>
   </Style>
</Window.Resources> 
```

并将其用于不同的按钮 -

```
<Button x:Name="Button1" Style="{StaticResource CommonButtonStyle}"/>
<Button x:Name="Button2" Style="{StaticResource CommonButtonStyle}"/>
<Button x:Name="Button3" Style="{StaticResource CommonButtonStyle}"/> 
```

**更新**

如果`ListView`位于 的 Visual Tree 中的某个位置`Button`，您可以使用`RelativeSource`in 样式而不是使用`ElementName`in 绑定这样的东西 -

```
<DataTrigger Binding="{Binding Path=SelectedItem, RelativeSource={RelativeSource 
                                        FindAncestor, AncestorType=ListView}}" 
                           Value="{x:Null}"> 
```

但如果它们不相关，则需要使用`attached property`将参数传递给样式。[此处的](http://www.thomaslevesque.com/2011/10/01/wpf-creating-parameterized-styles-with-attached-properties/)此链接可能会帮助您入门。

**更新 2**

我已经让它与附加属性一起工作，但修改了你的代码。这里是 -

```
public static class ThemeProperties
{
    public static object GetSelectedValue(DependencyObject obj)
    {
        return (object)obj.GetValue(SelectedValueProperty);
    }

    public static void SetSelectedValue(DependencyObject obj, object value)
    {
        obj.SetValue(SelectedValueProperty, value);
    }

    public static readonly DependencyProperty SelectedValueProperty =
        DependencyProperty.RegisterAttached("SelectedValue", typeof(object), 
          typeof(ThemeProperties), new FrameworkPropertyMetadata(null, 
           FrameworkPropertyMetadataOptions.BindsTwoWayByDefault));     
} 
```

*XAML* -

```
 <Style TargetType="{x:Type Button}" x:Key="cancelButton">
        <Setter Property="Visibility" Value="Visible"/>
        <Style.Triggers>
            <Trigger Property="local:ThemeProperties.SelectedValue"
                         Value="{x:Null}">
                <Setter Property="Visibility" Value="Collapsed"></Setter>
            </Trigger>
        </Style.Triggers>
    </Style> 
```

这是您的 ListView 和按钮 -

```
 <StackPanel>
        <ListView x:Name="lstView" ItemsSource="{Binding Objects}">
            <ListView.ItemTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding Name}"/>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>
        <Button VerticalAlignment="Bottom" Height="30"  Width="100"
                local:ThemeProperties.SelectedValue="{Binding SelectedItem,
                            ElementName=lstView}"
                Style="{StaticResource cancelButton}"/>
    </StackPanel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T21:45:37.807

我真的很抱歉花了我这么长时间。但最后我明白了。我使用了自定义转换器，我知道这不是您想要的，但它工作得很好。它提供了您想要的功能。

首先是我的*SelectionToVisibilityConverter*

```
public class SelectionToVisibilityConverter : IValueConverter
{
    public object Convert(
        object value,
        Type targetType,
        object parameter,
        CultureInfo culture)
    {
        if (value == null)
        {
            return Visibility.Collapsed;
        }
        return Visibility.Visible;
    }

    public object ConvertBack(
        object value,
        Type targetType,
        object parameter,
        CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

这是我的看法：

```
 <UserControl.Resources>
    <Test:SelectionToVisibilityConverter x:Key="VisibilityConverter" />
</UserControl.Resources>
<Grid>
    <ListView Height="100" HorizontalAlignment="Left" Margin="29,29,0,0" Name="listView1" ItemsSource="{Binding Path=TestItems}" SelectedItem="{Binding Path=TestItemsSelectedItem}" VerticalAlignment="Top" Width="120" />
    <ListView Height="100" HorizontalAlignment="Left" Margin="155,29,0,0" Name="listView2" ItemsSource="{Binding Path=TestItems2}" SelectedItem="{Binding Path=TestItems2SelectedItem}"  VerticalAlignment="Top" Width="120" />
    <Button Content="Button" Command="{Binding Path=ReloadCommand}" Visibility="{Binding ElementName=listView1, Path=SelectedItem, Converter={StaticResource VisibilityConverter}}" Height="23" HorizontalAlignment="Left" Margin="29,135,0,0" Name="button1" VerticalAlignment="Top" Width="75" />
    <Button Content="Button" Command="{Binding Path=ReloadCommand}" Visibility="{Binding ElementName=listView2, Path=SelectedItem, Converter={StaticResource VisibilityConverter}}" Height="23" HorizontalAlignment="Left" Margin="155,135,0,0" Name="button2" VerticalAlignment="Top" Width="75" />
</Grid> 
```

请忽略 ListViews 上的 SelectedItem 和按钮上的 ReloadCommand。我用它来测试这个。每次更改某些 ListView 的选定项目时，都会重新评估相应按钮的可见性。

**编辑**

我的最后一个想法是创建自定义控件并为此控件定义样式/模板。像这样的东西：

```
 <Style x:Key="CustomControlStyle" TargetType="{x:Type Test:MyFirstCustomControl}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Test:MyFirstCustomControl}">
                    <Grid>
                        <ListView Height="100" HorizontalAlignment="Left" Margin="5, 5, 0, 0" Name="listView1" VerticalAlignment="Top" Width="120" />
                        <Button Content="Button" Height="23" HorizontalAlignment="Left" Margin="50,110,0,0" Name="button1" VerticalAlignment="Top" Width="75" />
                    </Grid>
                    <ControlTemplate.Triggers>
                        <DataTrigger Binding="{Binding ElementName=listView, Path=SelectedItem}" Value="{x:Null}">
                            <Setter Property="Visibility" TargetName="button1" Value="Collapsed"></Setter>
                        </DataTrigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

这样，触发器将在您设置的所有 MyFirstConstomControl 之间共享

```
Style="{StaticResource CustomControlStyle}" 
```

我不认为这很容易，但我不知道更好，所以我只是把我得到的。

# php - 代码有时会创建重复的行？

> ID：13553893
> 
> 赞同：0
> 
> 时间：2012-11-25T18:11:26.177
> 
> 标签：php, mysql, sql, pdo, race-condition

我有以下代码：

```
$sth = $dbh->prepare("SELECT * FROM stats WHERE player_id = :player_id AND data_type = :data_type");

$sth->bindParam(':player_id', $player_id);
$sth->bindParam(':data_type', $total_time_data_type_id);
$sth->execute();

$result = $sth->fetch();            

if(!$result){
    $sth = $dbh->prepare("INSERT INTO stats (player_id, offset, created, modified, last_check, data_type, data) VALUES (:player_id, :offset, UNIX_TIMESTAMP(), UNIX_TIMESTAMP(), '1', :total_time_data_type_id, '0')");

    $sth->bindParam(':player_id', $player_id);
    $sth->bindParam(':offset', $offset);
    $sth->bindParam(':total_time_data_type_id', $total_time_data_type_id);
    $sth->execute();

    if(!$sth){
        return false;
    }
    $sth = $dbh->prepare("SELECT * FROM stats WHERE player_id = :player_id AND data_type = :data_type");

    $sth->bindParam(':player_id', $player_id);
    $sth->bindParam(':data_type', $total_time_data_type_id);
    $sth->execute();

    $result = $sth->fetch();
    if(!$result){
        return false;
    }
}else{
    $sth = $dbh->prepare("UPDATE stats SET .....");
    //Do more stuff
} 
```

现在，有时这会创建重复的行（在大约 600 行中，有 23 个重复）。这让我感到困惑，因为在插入行之前，我明确检查了具有相同`player_id`and的行`data_type`。

`player_id`相同的或可以存在多行`data_type`，但每行不一样。

IE 这将是有效的：

```
ID | PLAYER_ID | DATA_TYPE
---|-----------|----------
1  | 15        | 7
2  | 15        | 18
3  | 92        | 7
4  | 115       | 23 
```

虽然这不会：

```
ID | PLAYER_ID | DATA_TYPE
---|-----------|----------
1  | 15        | 7        
2  | 32        | 18       
3  | 15        | 7        
4  | 115       | 23 
```

因此，我不能简单地将该`player_id`字段声明为唯一的。

我能想到的唯一可能导致此问题的事实是，上面的代码片段位于`foreach`平均大约 115 次迭代的循环内，并且在几秒钟内再次调用了此代码。有没有办法以编程方式防止这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T19:19:14.973

感谢大家的帮助，尤其是@nikita2206。这就是我解决问题的方法：

1.  删除了作为主键的列 ID。
2.  在（Player_id，data_type）上创建了新的主键。
3.  更改了 INSERT 语句：

从

```
$sth = $dbh->prepare("INSERT INTO stats (player_id, offset, created, modified, last_check, data_type, data) VALUES (:player_id, :offset, UNIX_TIMESTAMP(), UNIX_TIMESTAMP(), '1', :total_time_data_type_id, '0')"); 
```

至

```
$sth = $dbh->prepare("INSERT INTO stats (player_id, offset, created, modified, last_check, data_type, data) VALUES (:player_id, :offset, UNIX_TIMESTAMP(), UNIX_TIMESTAMP(), '1', :total_time_data_type_id, '0') ON DUPLICATE KEY UPDATE player_id = player_id"); 
```

* * *

通过非常快速地多次调用代码进行了测试，并且没有创建重复项。

# mysql - MySQL 通过列选择组！= x

> ID：13553909
> 
> 赞同：0
> 
> 时间：2012-11-25T18:12:45.487
> 
> 标签：mysql, sql, select-query

我正在尝试选择某个列没有特定值的行，例如 0，但我无法让它工作。

```
SELECT *
FROM rentals
GROUP BY date, rooms, price 
HAVING show_independently < 1 
```

如果`show_independently`是 1，那么我不想将它们分组。但是，即使大多数行`show_independently`的值为 0，此语句也不显示任何行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T18:14:25.330

```
SELECT date, rooms, price 
FROM rentals
WHERE show_independently < 1
GROUP BY date, rooms, price 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T18:16:53.017

使用聚合函数过滤数据时使用[`HAVING`](http://www.mysqltutorial.org/mysql-having.aspx)子句。

一个典型的查询`HAVING`：

```
SELECT yourColumn, aggregate_function(otherColumn)
FROM yourTable
WHERE yourColumn = someValue
GROUP BY yourColumn
HAVING aggregate_function(otherColumn) = someOtherValue 
```

我想你想使用一个`WHERE`子句：

```
SELECT date, rooms, price 
FROM rentals
WHERE show_independently < 1
GROUP BY date, rooms, price 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T18:37:24.190

如果您只想对*某些行*进行分组而将其他行不分组，则可以使用`UNION`：

```
SELECT *
FROM rentals
WHERE show_independently <> 1
GROUP BY date, rooms, price 
UNION ALL
SELECT *
FROM rentals
WHERE show_independently = 1 
```

这仅对那些`show_independently`不是 1 的部分进行分组，并包括其余部分而不对它们进行分组。

# c# - 在整个构建过程中自动生成我的 xml

> ID：13553910
> 
> 赞同：0
> 
> 时间：2012-11-25T18:12:54.990
> 
> 标签：c#, xml, serialization, auto-generate

假设我有一个序列化类（具有属性和所有内容的成员）。有没有办法可以在构建中自动生成它的相关 XML？这将是插入到 msi 中的必需文件...

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T18:20:39.220

考虑使用构建事件 - 您可以在构建后事件中生成文件。查看您的项目属性窗口。

# android - 创建挂起的意图时不再调用意图 filterEquals 和 filterHashCode

> ID：13553911
> 
> 赞同：0
> 
> 时间：2012-11-25T18:12:56.627
> 
> 标签：android, android-intent, android-pendingintent

我创建了几个具有相似待处理意图但内部值不同的通知。

单击任何通知时，只会触发最后注册的意图。

过去它曾经有效，因为`filterEquals()`and`filterHashCode()`被调用，这使得唯一性成为可能。现在，当我在这些方法中放置断点时，它们不再被调用。

关于发生了什么的想法？谢谢。

# sql - 通过连接到数据库查找最近的标记

> ID：13553912
> 
> 赞同：0
> 
> 时间：2012-11-25T18:13:06.270
> 
> 标签：sql, google-maps-api-3

感谢 Google Maps JavaScript v3，我有这段代码可以在特定坐标上放置一个标记：

```
function initialize() {
    var gm_latlong = new google.maps.LatLng(59.328615,13.485699);

    var gm_options = {
        zoom: 10,
        minZoom: 4,
        maxZoom: 20,
        center: gm_latlong,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        streetViewControl: false
    }

    var gm_map = new google.maps.Map(document.getElementById('google-maps'), gm_options);

    var gm_marker = new google.maps.Marker({
        position: gm_latlong,
        draggable: false,
        map: gm_map
    });
} 
```

很简单！但是我想获得这个位置最近的 5 个标记，它在这里变得很复杂 - 我不知道如何完成这个！我知道这段代码只打印一个标记，它应该是这个函数中的一个循环来做这样的事情。但我将坐标存储在我的数据库中，我想从那里获取它们。

这甚至可能吗？

提前致谢。

# java - getValueAt 的问题

> ID：13553913
> 
> 赞同：1
> 
> 时间：2012-11-25T18:13:13.850
> 
> 标签：java, file, matrix, jtable

> **可能重复：**
> [矩阵到 JTable](https://stackoverflow.com/questions/13552377/matrix-into-jtable)

这个功能好像有问题。我已经为 jTable 创建了一个模型，但它没有得到我需要的值。这是代码：

```
public class InsertMatToJTable extends AbstractTableModel{
String titre[] = {"age real", "sex real", "chest real", "resting_blood_pressure real",  "serum_cholestoral real","fasting_blood_sugar real","resting_electrocardiographic_results real","maximum_heart_rate_achieved real","exercise_induced_angina real","oldpeak real","slope real","number_of_major_vessels real","thal real", "class"};
    String line;
    float mat[][]= new float[370][13];
    float matrice_normalise[][]=new float[270][13];;
    int i = 1,j=1;
    Vector data;
public void InsertMatToJTable()
    {data= new Vector();
 try {
              FileInputStream fis = new FileInputStream("fichier.txt");
              BufferedReader br = new BufferedReader(new InputStreamReader(fis));

                while ((line = br.readLine()) != null) {
                            StringTokenizer st1 = new StringTokenizer(line, " ");
                            while (st1.hasMoreTokens())
                            {mat[i][j]=Float.valueOf(st1.nextToken()).floatValue(); 
                                                        j++;
                                                       if (j==13) {i++;j=1;}
                            }  

             }
             br.close();
         }catch(Exception e) {
                    e.printStackTrace();}

         Normalisation norm = new Normalisation(mat);

   // for(i=0;i<270;i++)
    //{for(j=0; j<14;j++)
    //{matrice_normalise[i][j]=norm.mat_normalised[i][j];
    //}
      matrice_normalise=norm.mat_normalised;

    }

@Override
public int getRowCount() {
    return 270;
}

@Override
public int getColumnCount() {
    return 13;
}

@Override
 public Object getValueAt(int rowIndex, int columnIndex) {
    return matrice_normalise[rowIndex][columnIndex];
}

public String getColumnName(int columnIndex) {
    return titre[columnIndex];

}
    } 
```

文本文件读取完成。该`matrice_normalise=norm.mat_normalised;`部分也有效。我已经分别对它们进行了测试，并且它们起作用了。

但是，表中填充了 0.0，它没有从`matrice_normalise`.

# windows - 如何从第 x 行到第 y 行读取文件（dos/win 批处理文件）

> ID：13553916
> 
> 赞同：5
> 
> 时间：2012-11-25T18:13:26.007
> 
> 标签：windows, batch-file, dos, findstr

我有一系列日志文件。

我用 findstr 解析这些日志文件以确定文本字符串的第一个实例，然后返回文件名和找到匹配项的行木材作为变量。

然后我使用 findstr 解析找到匹配项的文件以获取另一个文本字符串。我将匹配的行号作为变量返回。

我现在有了文件，开始和结束行号。

我需要返回行号之间的文本块。

所有输出都重定向到由变量 casenotes 表示的文本文件

这是我的代码：

```
:test
echo:            >> %casenotes%
echo:   test         >> %casenotes%
for /f "tokens=1,2* delims=:" %%a in ('findstr /N /C:"Optimize ThreadPools" *_MAGT_*.txt') do set startline=%%b & set filefoundin=%%a & goto part2
:part2
for /f "tokens=1,2* delims=:" %%a in ('findstr /N /C:"After optimization" %filefoundin%') do set endline=%%a & goto part3
:part3
echo:                       >> %casenotes%
echo: filefound in: %filefoundin%       >> %casenotes%
echo: startline is: %startline%     >> %casenotes%
echo: endline is:   %endline%       >> %casenotes%
echo:                       >> %casenotes%
     echo: now do something magic to read everything between lines %startline% and %endline% from %filefoundin% and redirect that output to %casenotes% 
```

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T19:03:00.293

试试这个：@echo off

```
set file_to_read=read.txt
set /a start_line=1
set /a end_line=6
set outfile=outfile
set counter=1

break > %outfile%
setlocal ENABLEDELAYEDEXPANSION

for /f "delims=*" %%A  in (%file_to_read%) do (
    if !counter! GEQ !start_line! (
        echo %%A
        echo %%A >> !outfile!
    )
    set /A counter=!counter!+1

    if !counter! GEQ !end_line! (
        goto :endLoop
    )
)
:endLoop 
```

这不会计算空行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T19:30:40.633

```
@Echo OFF

Set "File=Test.txt"
Set /A "Start_Line=3"
Set /A "End_Line=6"

For /F "Tokens=*" %%# In ('Type "%FILE%"') DO (
    Call Set /A "Line+=1"
    CMD /C "IF %%LINE%% GEQ %Start_Line% IF %%LINE%% LEQ %END_Line% (Echo %%#>>"Output.txt")"
)

Pause&Exit 
```

> 更新

另一种具有相同准确性的方法

```
@Echo OFF

Set    "File=Test.txt"
Set /A "Start_Line=3"
Set /A "End_Line=6"

For /F "Tokens=* delims=" %%# In ('Type "%FILE%"') DO (
    Set /A "Line+=1"
    CALL :READ_LINES "%%#"
)

:READ_LINES
(IF %LINE% GEQ %Start_Line% IF %LINE% LEQ %END_Line% (Echo %*>>"Output.txt") ELSE (GOTO:END)) & GOTO:EOF

:END
Pause&Exit 
```

对于任何其他类型的文本操作，您下次可以使用我的 TEXTMAN 子例程（西班牙语注释行，抱歉）：

```
 @Echo OFF

:: TEXT MANIPULATOR ROUTINE v0.1 
:: by Elektro H@cker

USO:
:TEXTMAN [ACCIÓN] [LÍNEA] [ARCHIVO] [TEXTO (Opcional)]

REM ACCIONES:
REM 
REM  AL  = ADD_LEFT           * AÑADIR TEXTO AL PRINCIPIO DE UNA LÍNEA
REM  AR  = ADD_RIGHT          * AÑADIR TEXTO AL FINAL DE UNA LÍNEA
REM  E   = ERASE              * ELIMINAR UNA LÍNEA
REM  I   = INSERT             * INSERTAR UNA LÍNEA (VACÍA O CON TEXTO)
REM  RL  = REPLACE_LINE       * REEMPLAZAR UNA LÍNEA
REM  RS  = REPLACE_STRING     * REEMPLAZAR PALABRAS DE UNA LÍNEA
REM  RSA = REPLACE_STRING_ALL * REEMPLAZAR PALABRAS EN TODAS LAS LÍNEAS
REM  C+  = CHARACTER_PLUS     * ELIMINAR LOS PRIMEROS "X" CARACTERES EN TODAS LAS LÍNEAS
REM  C-  = CHARACTER_LESS     * ELIMINAR LOS ÚLTIMOS  "X" CARACTERES EN TODAS LAS LÍNEAS
REM  L+  = LINE_PLUS          * CORTAR LAS PRIMERAS "X" LÍNEAS
REM  L-  = LINE_LESS          * CORTAR LAS ÚLTIMAS  "X" LÍNEAS

REM EJEMPLOS DE USO:

:: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: ::
::
:: Elimina la línea 3
:: Call :TEXTMAN E 3 "Test.txt"
::
:: Añade una frase al principio de la línea 3
:: Call :TEXTMAN AL 3 "Test.txt" "Elektro H@cker"
::
:: Añade una frase al final de la línea 3
:: Call :TEXTMAN AR 3 "Test.txt" "Elektro H@cker"
::
:: Inserta una línea vacía en la línea 3
:: Call :TEXTMAN I 3 "Test.txt"
::
:: Inserta una línea con texto en la línea 3
:: Call :TEXTMAN I 3 "Test.txt" "Elektro H@cker"
::
:: Reemplaza la línea 3 por completo
:: Call :TEXTMAN RL 3 "Test.txt" "Elektro H@cker"
::
:: Reemplaza las palabras "Elektro" por "H@cker" en la línea 3
:: Call :TEXTMAN RS 3 "Test.txt" "Elektro" "H@cker"
::
:: Reemplaza las palabras "Elektro" por "H@cker" en todas las líneas
:: Call :TEXTMAN RSA "Test.txt" "Elektro" "H@cker"
::
:: Elimina los 3 primeros caracteres de todas las líneas
:: Call :TEXTMAN C+ 3 "Test.txt"
::
:: Elimina los 3 uúltimos caracteres de todas las líneas
:: Call :TEXTMAN C- 3 "Test.txt"
::
:: Elimina las 3 primeras líneas
:: Call :TEXTMAN L+ 3 "Test.txt"
::
:: Elimina las 3 últimas líneas
:: Call :TEXTMAN L- 3 "Test.txt"
::
:: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: ::

PAUSE&EXIT

:TEXTMAN
(SET /A "A=0", "LINE=0", "TOTAL_LINES=0")  &  (CALL :%~1 %* || (ECHO Parametro incorrecto & Exit /B 1)) & (GOTO:EOF)
:AL
(For /F "usebackq tokens=*" %%@ in ("%~3") DO (Call Set /A "LINE+=1" && (CMD /C "IF NOT "%%LINE%%" EQU "%~2" (Echo %%@ >> "%~nx3.NEW") ELSE (Echo %~4%%@ >> "%~nx3.NEW")"))) && (CALL :RENAMER "%~3") & (GOTO:EOF)
:AR
(For /F "usebackq tokens=*" %%@ in ("%~3") DO (Call Set /A "LINE+=1" && (CMD /C "IF NOT "%%LINE%%" EQU "%~2" (Echo %%@ >> "%~nx3.NEW") ELSE (Echo %%@%~4 >> "%~nx3.NEW")"))) && (CALL :RENAMER "%~3") & (GOTO:EOF)
:E
(For /F "usebackq tokens=*" %%@ in ("%~3") DO (Call Set /A "LINE+=1" && (CMD /C "IF NOT "%%LINE%%" EQU "%~2" (Echo %%@ >> "%~nx3.NEW")"))) && (CALL :RENAMER "%~3") & (GOTO:EOF)
:I
(For /F "usebackq tokens=*" %%@ in ("%~3") DO (Call Set /A "LINE+=1" && (CMD /C "IF     "%%LINE%%" EQU "%~2" (IF NOT "%~4" EQU "" (Echo %~4 >> "%~nx3.NEW") ELSE (Echo. >> "%~nx3.NEW"))" & Echo %%@ >> "%~nx3.NEW"))) && (CALL :RENAMER "%~3") & (GOTO:EOF)
:RL
(For /F "usebackq tokens=*" %%@ in ("%~3") DO (Call Set /A "LINE+=1" && (CMD /C "IF NOT "%%LINE%%" EQU "%~2" (Echo %%@ >> "%~nx3.NEW") ELSE (Echo %~4 >> "%~nx3.NEW")"))) && (CALL :RENAMER "%~3") & (GOTO:EOF)
:RS
(For /F "usebackq tokens=*" %%@ in ("%~3") DO (Call Set /A "LINE+=1" && (CMD /C "IF NOT "%%LINE%%" EQU "%~2" (Echo %%@ >> "%~nx3.NEW") ELSE (CALL SET "STRING=%%@" && CALL ECHO %%STRING:%~4=%~5%% >> "%~nx3.NEW")"))) && (CALL :RENAMER "%~3") & (GOTO:EOF)
:RSA
(For /F "usebackq tokens=*" %%@ in ("%~2") DO (CALL SET "STRING=%%@" && (CALL ECHO %%STRING:%~3=%~4%% >> "%~2.NEW"))) && (CALL :RENAMER "%~2") & (GOTO:EOF)
:C+
(For /F "usebackq tokens=*" %%@ in ("%~3") DO (Call Set   "LINE=%%@" && (CALL ECHO %%LINE:~%~2%% >>    "%~nx3.NEW"))) && (CALL :RENAMER "%~3") & (GOTO:EOF)
:C-
(For /F "usebackq tokens=*" %%@ in ("%~3") DO (Call Set   "LINE=%%@" && (CALL ECHO %%LINE:~0,-%~2%% >> "%~nx3.NEW"))) && (CALL :RENAMER "%~3") & (GOTO:EOF)
:L+
(Call SET /A "A=%~2-1") && (Call TYPE "%~3" | @MORE +%%A%% > "%~nx3.NEW") && (CALL :RENAMER "%~3") & (GOTO:EOF)
:L-
(FOR /F %%X IN ('TYPE "%~3"') DO (CALL SET /A "TOTAL_LINES+=1")) & (CALL SET /A "TOTAL_LINES-=%~2-1") & (For /F "usebackq tokens=*" %%@ in ("%~3") DO (Call Set /A "LINE+=1" & Call echo " %%LINE%%!!| FINDSTR " %%TOTAL_LINES%% " && CALL :RENAMER "%~3" && GOTO:EOF || (Echo %%@ >> "%~nx3.NEW")))
:RENAMER
(REN "%~1" "%~nx1.BAK") & (MOVE /Y "%~nx1.BAK" "%TEMP%\" >NUL) & (REN "%~nx1.NEW" "%~nx1") & (GOTO:EOF) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T20:38:53.143

下面的批处理文件是最快的方法，特别是在文件很大的情况下。

```
echo: read everything between lines %startline% and %endline% from %filefoundin% and redirect that output to %casenotes%

setlocal EnableDelayedExpansion
set skip=
set /A skiplines=startline-1, numlines=endline-startline+1
if %skiplines% gtr 0 set skip=skip=%skiplines%
(for /F "%skip% delims=" %%a in (%filefoundin%) do (
   echo %%a
   set /A numlines-=1
   if !numlines! equ 0 goto part4
)) > %casenotes%
:part4 
```

如果文件包含感叹号，则需要稍作修改以避免延迟扩展。请，如果您需要，请索取。

请注意，此解决方案会忽略文件中的空行。如果需要，这个细节也可以解决。

安东尼奥

# c# - 如何在项目中编译 dll 并像参考一样使用它？

> ID：13553917
> 
> 赞同：-1
> 
> 时间：2012-11-25T18:13:36.273
> 
> 标签：c#, c#-2.0

我正在使用.Net framework 2.0，并且一直在寻找如何在我的项目中包含.dll。我希望这个 dll 在最终的 .exe 中编译，但我不知道如何。当我像任何文件一样将它添加到我的项目时，我的类无法访问这些函数，因为它们需要一个`[Dll Import]`. 当我将它添加为参考时，它会被粘贴到`Release`文件夹中。

有没有办法在不重新编码每个函数或将其用作参考的情况下访问我的 dll？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T20:25:26.153

您正在搜索的内容称为 ILmerge。

[http://research.microsoft.com/en-us/people/mbarnett/ilmerge.aspx](http://research.microsoft.com/en-us/people/mbarnett/ilmerge.aspx)

# matlab - 在matlab中有效地将图像分割成网格

> ID：13553919
> 
> 赞同：0
> 
> 时间：2012-11-25T18:13:51.967
> 
> 标签：matlab, matrix, sift, image-segmentation, vlfeat

目前，我正在使用下面的代码将图像分割成 cellSizeX 像素乘以 cellSizeY 像素的网格：

```
 grid = zeros(cellSizeX, cellSizeY, ColorCount, cellTotalX, cellTotalY);
    for i = 1:cellSizeX:(HorRowCount)        
        for j = 1:cellSizeY:(VertColumnCount)
                try
                    grid(:,:,:,icount, jcount) = img(i:i+cellSizeX-1, j:j+cellSizeY-1, :);
                catch

                end

            jcount = jcount + 1;

        end
        icount = icount + 1;
        jcount = 1;
    end 
```

虽然这段代码运行良好且令人满意，但有些事情让我烦恼：

1.  通过对 tic 和 toc 的一些测试，比较诸如 grid(:,:,:,icount,jcount) 和 grid(icount,jcount,:,:,:) 之类的切换索引位置，我看到了 grid(:,:,: ,icount,jcount) 是最快的。但是这里有什么可以改进的吗？

2.  仅当请求的 cellSizeX 和 cellSizeY 与图像 img 成比例时，该代码才有效。因此，在尺寸为 40 x 40 的图像上请求 9 x 9 的 cellSizeX 和 cellSizeY 将导致 matlab 抱怨超出矩阵的尺寸。对此有何建议？我不想简单地为这些单元格填写空白区域。**这些单元将在 Vlfeat SIFT 中进一步使用。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T18:49:27.573

1.  如何将图像转换为每个单元格大小为 CellSizeX x CellSizeY x ColorCount 的单元格数组，然后将所有这些单元格堆叠到单个数组网格中？

    `ca = mat2cell( img, cellSizeY * ones(1, cellTotalY), ...`
    `cellSizeX * ones(1, cellTotalX), ...`
    `ColorCount );`
    `grid = reshape( cat( 4, ca{:} ),...`
    `cellSizeX, cellSizeY, ColorCount, cellTotalX, cellTotalY);`

2.  图像处理社区习惯于根据边界处图像的值用非零值填充图像。查看函数`padarray`以获取更多信息。您可以填充输入图像，使其填充大小与 CellSizeX 和 CellSizeY 成比例（两个轴的填充不必相同）。

# arduino - avrdude.exe: 设置 AVR studio 6 外部工具后更新说明符错误中的无效文件格式“”

> ID：13553920
> 
> 赞同：2
> 
> 时间：2012-11-25T18:13:52.653
> 
> 标签：arduino, avr, avrdude

我在教程的帮助下将 avr studio 6 设置为 Arduino IDE：[http ://www.engblaze.com/tutorial-using-atmel-studio-6-with-arduino-projects/#final](http://www.engblaze.com/tutorial-using-atmel-studio-6-with-arduino-projects/#final)

我按照教程中的描述添加了一个外部工具，并使用了以下参数：

```
-CC:\Program Files (x86)\arduino-1.0.1\hardware/tools/avr/etc/avrdude.conf -v -v -patmega328p -carduino -P\\.\COM4 -b57600 -D -Uflash:w:"$(ProjectDir)Debug\$(ItemFileName).hex":i 
```

当我尝试刷新 Arduino Uno 板时，会导致以下错误：

```
avrdude.exe: invalid file format '\Users\UserName\Documents\ElectronicsProjects\bt-controller\software\gamecontroller\snes-controller\Debug\snes-contro.' in update specifier
avrdude.exe: error parsing update operation 'flash:w:C:\Users\UserName\Documents\ElectronicsProjects\bt-controller\software\gamecontroller\snes-controller\Debug\snes-contro.' 
```

我尝试重命名其中一个文件夹，因为其中一个名称第一次包含空格。然而问题仍然存在。我应该在参数中更改任何设置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-08-12T19:33:09.000

我做了同样的事情，在触发“Tools\Send to Arduino UNO”后，它返回了完全相同的错误消息。我刚刚通过在 \C: 中安装 Arduino IDE 来修复它，在文件名中没有空格的文件夹中（实际上我也忘记了正确的 COM 端口号......）。

正确的字符串似乎是： -CC:\Arduino\hardware/tools/avr/etc/avrdude.conf -v -p atmega328p -c arduino -P COM6 -b 115200 -D -U flash:w:"$(ProjectDir )Debug\$(ItemFileName).hex":i

波特率（-b 11500）可能不同，文件路径必须是正确的。此外，如果我在闪存之前单击最左侧窗口上的项目名称，程序只会看到正确的文件名（在我的版本中）......否则它会查找文件 main.hex，但没有找到它......

# chef-infra - 在 Windows 服务器上安装 Chef Solo

> ID：13553925
> 
> 赞同：5
> 
> 时间：2012-11-25T18:14:35.547
> 
> 标签：chef-infra

我是厨师和云的新手。我必须在 Windows Server 2008 上安装 Chef。我正在浏览这里的文档： [http ://wiki.opscode.com/display/chef/Installing+Chef+Client+on+Windows](http://wiki.opscode.com/display/chef/Installing+Chef+Client+on+Windows)

但是我不清楚其中的几个步骤。

我有一个非常简单的设置，它的主厨独奏，所以我只有一个 Windows 服务器，我正在尝试安装它并练习编写一些食谱。

这个你能帮我吗。上面链接中我不清楚的步骤是：步骤名称：复制验证密钥我不明白它在说哪个validation.pem。

提前感谢您的帮助..

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-25T19:09:09.443

如果您只想使用 Chef Solo，则无需对“validation.pem”、“'USERNAME'.pem”或“knife.rb”进行任何操作。

第 1 步：安装[Chef Windows MSI](https://www.opscode.com/chef/install.msi)。

第 2 步：阅读[Chef Solo 文档](http://docs.opscode.com/chef_solo.html)。

该页面上的路径特定于 Unix，但您应该能够将它们调整到适合您的 Windows 系统的位置。

基本上要使用 Chef Solo，您需要：

1.  一个solo.rb 配置文件。这应该指向您正在使用的食谱的位置，例如“C:\chef\cookbooks”

2.  描述节点的 JSON 文件（例如，创建 mynode.json），特别是要使用的运行列表，例如：

    { "run_list": ["recipe[windows]", "recipe[mycookbook_one"]] }

等等。

1.  在solo.rb 中指定位置的实际食谱。您可以从[Chef 社区站点](http://community.opscode.com/)下载几个已经在 Windows 上运行的软件，例如“windows”、“iis”、“sql_server”[等等](http://community.opscode.com/search?query=windows&scope=home)。

2.  运行 chef-solo 指定配置文件和 JSON 文件。您可能希望以管理员身份执行此操作。

    chef-solo -c solo.rb -j mynode.json

如果您遇到困难，[Chef 用户邮件列表](http://lists.opscode.com)是提问的好地方。

# triggers - 带有 tSQLt 的 FakeTable 删除触发器

> ID：13553928
> 
> 赞同：0
> 
> 时间：2012-11-25T18:14:54.667
> 
> 标签：triggers, tsqlt

我已经开始使用 tSQLt 并且即将测试触发器。我调用 FakeTable 过程并进行测试，但未执行触发器。如果不使用 FakeTable，则执行触发器。这似乎真的很糟糕，我找不到任何信息表明有任何方法可以读取它们。

然后我认为触发器已被 FakeTable 删除，但我可以在调用后重新创建它们并在我的测试中执行以下代码：

```
DECLARE @createTrigger NVARCHAR(MAX);
SELECT @createTrigger = OBJECT_DEFINITION(OBJECT_ID('MoveDataFromAToB'))    
EXEC tSQLt.FakeTable 'dbo.A';
EXEC(@createTrigger); 
```

我收到以下错误：“数据库中已经有一个名为'MoveDataFromAToB'的对象。{MoveDataFromAToB,14}（还有一个回滚错误->当前事务无法提交，也无法回滚到保存点。回滚整个事务。{Private_RunTest,60})"

任何对 tSQLt 有任何经验并知道此问题的任何解决方法的人吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T23:03:01.167

tSQLt backlog 上有一个 ApplyTrigger 方法，但还没有完成。现在您应该能够在测试中使用此代码：

```
DECLARE @createTrigger NVARCHAR(MAX);
SELECT @createTrigger = OBJECT_DEFINITION(OBJECT_ID('MoveDataFromAToB'));
DROP TRIGGER MoveDataFromAToB;    
EXEC tSQLt.FakeTable 'dbo.A';
EXEC(@createTrigger); 
```

您需要删除现有触发器，因为 FakeTable 不会删除原始表。它只是重命名它，使旧触发器完好无损；因此，您确实看到了名称冲突。

tSQLt 在每次测试结束时执行的回滚会将删除的触发器放回原处（除非您在代码中做了一些非常糟糕的事情）。如果您担心使用 sp_rename 而不是 drop 触发器。

我会将所有这些放入测试类中的辅助存储过程中，并从需要它的测试中调用它。这样，一旦我们在 tSQLt 中实现了更好的解决方案，您将只需要更改代码中的一个地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T08:46:41.990

感谢塞巴斯蒂安的回答。它也对我很有帮助:) 我为您提供的代码制作了一个存储过程。在“ApplyTrigger”功能可用之前，我将使用它：

```
CREATE PROCEDURE [tSQLt].[FakeTableWithTrigger]
    @TableName NVARCHAR(MAX),
    @TriggerName NVARCHAR(MAX),
    @SchemaName NVARCHAR(MAX) = NULL, --parameter preserved for backward compatibility. Do not use. Will be removed soon.
    @Identity BIT = NULL,
    @ComputedColumns BIT = NULL,
    @Defaults BIT = NULL
AS
BEGIN
   DECLARE @createTrigger NVARCHAR(MAX);
    SELECT @createTrigger = OBJECT_DEFINITION(OBJECT_ID(@TriggerName));
    EXEC('DROP TRIGGER ' + @TriggerName);    
    EXEC tSQLt.FakeTable @TableName, @SchemaName, @Identity, @ComputedColumns, @Defaults;
    EXEC(@createTrigger);   
END 
```

它在测试中的使用示例是：

```
exec tSQLt.FakeTableWithTrigger 'dbo.MyTable', 'MyTable_SyncTrigger', @Identity = 1 
```

# wordpress - 按分类定义自定义帖子类型的永久链接

> ID：13553932
> 
> 赞同：10
> 
> 时间：2012-11-25T18:15:12.683
> 
> 标签：wordpress, custom-post-type, permalinks

我想为产品和产品类型创建规范的永久链接。我已经确定了自定义帖子类型和自定义分类法，但我不知道是否可以使用分类法定义永久链接。例如，我的工作流程是这样的……

1.  我创建了一个名为**products**的自定义帖子类型。
2.  **然后我为产品类型**创建了一个自定义分类法。
3.  然后我添加一个名为**“椅子”**的产品类型，并将一个名为 **“红色椅子”**的产品添加到此类别。

一旦我创建了这个产品，查看这个产品**所需的永久链接结构**将被格式化为 ->

```
http://shop.com/products/chairs/red-chair 
```

这在wordpress 3.4中可能吗？我的自定义帖子类型中的元框允许选择为我的自定义分类定义的产品类型，并且每个产品只会有一种类型。

如果可能的话，如果可能的话，我还想包括所选产品类别的任何父项（例如，如果**“椅子”**类别是**“休息室”**类别的子项，则永久链接结构如下 ->

```
http://shop.com/products/lounge/chairs/red-chair 
```

以下是我创建自定义帖子类型和自定义分类的方法，我只需要帮助定义重写 / slug 规则以在永久链接中包含产品类型。

```
/* Custom Post Type - Products ------- */
function products_init() {
    $args = array(
        'public' => true,
        'label' => 'Products'
    );
    register_post_type( 'products', $args );
}
add_action( 'init', 'products_init' );

/* Custom Taxonomy - Product Type ------- */
add_action( 'init', 'create_prodtype' );
function create_prodtype() {
    $labels = array(
        'name' => _x( 'Product Type', 'products' ),
        'singular_name' => _x( 'Product Category', 'product' ),
        'search_items' =>  __( 'Search Product Types' ),
        'all_items' => __( 'All Product Types' ),
        'parent_item' => __( 'Products' ),
        'parent_item_colon' => __( 'Products:' ),
        'edit_item' => __( 'Edit Product Type' ),
        'update_item' => __( 'Update Product Type' ),
        'add_new_item' => __( 'Add New Product Type' ),
        'new_item_name' => __( 'New Product Type' ),
    );
    register_taxonomy(
        'products',
        array('products'),
        array(
            'rewrite' => array(
                'slug' => 'products',
                'hierarchical' => true
            ), 
            'with_front' => false,
            'labels' => $labels
    ));
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-26T16:53:05.120

**解决方案**

在 Jan Fabry 的这些帖子的帮助下，我已经弄清楚了->

> [https://wordpress.stackexchange.com/a/5478/10350](https://wordpress.stackexchange.com/a/5478/10350) [https://wordpress.stackexchange.com/a/22490/10350](https://wordpress.stackexchange.com/a/22490/10350)

我已将自定义帖子类型设置如下->

*   自定义帖子类型（register_post_type）-> **“产品”**
*   分类法（register_taxonomy）-> **“产品类型”**

* * *

**后端功能**

我重写了保存在后端的永久链接结构，以便保存永久链接以包含自定义分类类型 - “产品类型”

```
add_filter('post_type_link', 'product_type_permalink', 10, 4);
function product_type_permalink($post_link, $post, $leavename, $sample) {
    //If is custom post type "product"
    if ($post->post_type == 'product') {
        // Get current post object
        global $post;
        // Get current value from custom taxonomy "product-type"
        $terms = get_the_terms($post->id, 'product-type');
        // Define category from "slug" of taxonomy object
        $term = $terms[0]->slug;
        // Re-structure permalink with string replace to include taxonomy value and post name
        $permalink = str_replace('product/', 'product/' . $term . '/', $post_link);
    }
    return $permalink;
} 
```

将**永久链接设置**为“帖子名称”并保存。如果您将产品添加到类别并保存，则应重新编写永久链接以包含自定义分类定义，在本例中为“产品类型”。因此，如果您将*“Red Chair”*添加到*“Chairs”*类别中，URL 的格式将如下 ->

```
http://website.com/product/chairs/red-chair/ 
```

但是如果你尝试去这个页面，你会得到一个 404 错误。那是因为 wordpress 还不知道如何用这个 URL 查询数据库，所以你必须编写它。

**前端功能**

我们需要添加重写规则，以便 wordpress 可以获取我们的 url 并查询数据库。我们使用 wordpress 函数`add_rewrite_rule`将给定的永久链接翻译成查询字符串。

```
add_rewrite_rule(
    // The regex to match the incoming URL
    'product/([^/]+)/([^/]+)/?',
    // The resulting internal URL: `index.php` because we still use WordPress
    // `pagename` because we use this WordPress page
    // `designer_slug` because we assign the first captured regex part to this variable
    'index.php?product-type=$matches[1]&product=$matches[2]',
    // This is a rather specific URL, so we add it to the top of the list
    // Otherwise, the "catch-all" rules at the bottom (for pages and attachments) will "win"
    'top'
); 
```

在此函数中，matches 数组由 Wordpress 在每个斜杠处分解给定字符串定义。所以在这个例子中，正则表达式`([^/]+)`用于匹配每个斜线之间的任何内容。在此示例中，有 2 个级别，因此它匹配产品类型，然后是产品，并将它们添加到匹配数组中，其中 product-type = $matches [1](http://www.deluxeblogtips.com/meta-box/)和 product = $matches[2]。

这个重写规则翻译了这个->

```
product/chairs/red-chair/ 
```

进入这个->

```
index.php?product-type=chair&product=red-chair 
```

我们的数据库可以使用它来查询数据库并使用格式化的永久链接返回正确的产品页面。

这会抛出产品类型页面，因为 URL 中只有一个级别，即产品类型。这意味着重写规则当前将始终尝试识别查询字符串中定义的产品名称。所以为此我们还写了一个单级重写规则：

```
add_rewrite_rule('^product/([^/]*)?$','index.php?product-type=$matches[1]','top'); 
```

现在，这还将查询产品类型页面，因此如果我们想显示各种产品类型，我们可以像往常一样循环遍历分类，而在尝试链接到它们时不会抛出 404 错误。

**缺点**

这目前只会采用单一级别的分类，因此自定义分类结构不能是分层的。如果您指定多个分类，它将使用具有第一个 ID 的最多的分类来定义永久链接。一个潜在的解决方法是隐藏自定义帖子类型侧栏中显示的自定义分类菜单，并为分类添加一个元框，其中只能使用一个选择框。我为此使用[Meta Box 插件](http://www.deluxeblogtips.com/meta-box/)。（注意，这个插件没有任何管理菜单，它允许您通过创建数组在您的functions.php 中为自定义帖子类型编写元框 - 强烈推荐！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-21T13:47:37.653

@reekogi 这适用于产品自定义帖子类型，但会破坏所有其他帖子类型。

```
add_filter('post_type_link', 'product_type_permalink', 10, 4);
function product_type_permalink($post_link, $post, $leavename, $sample) {
    //If is custom post type "product"
    if ($post->post_type == 'product') {
        // Get current post object
        global $post;
        // Get current value from custom taxonomy "product-type"
        $terms = get_the_terms($post->id, 'product-type');
        // Define category from "slug" of taxonomy object
        $term = $terms[0]->slug;
        // Re-structure permalink with string replace to include taxonomy value and post name
        $permalink = str_replace('product/', 'product/' . $term . '/', $post_link);
    }
    return $permalink;
} 
```

**解决方法是将变量 $post_link 和 $permalink 更改为 $url**

```
function product_type_permalink($url, $post, $leavename, $sample) {
    //If is custom post type "product"
    if ($post->post_type == 'product') {
        // Get current post object
        global $post;
        // Get current value from custom taxonomy "product-type"
        $terms = get_the_terms($post->id, 'product-type');
        // Define category from "slug" of taxonomy object
        $term = $terms[0]->slug;
        // Re-structure permalink with string replace to include taxonomy value and post name
        $url = str_replace('product/', 'product/' . $term . '/', $url);
    }
    return $url;
}
add_filter('post_type_link', 'product_type_permalink', 10, 4); 
```

# xml - 将 Symfony 2 标签属性定义为 XML 配置中的数组？

> ID：13553933
> 
> 赞同：1
> 
> 时间：2012-11-25T18:15:14.680
> 
> 标签：xml, symfony, configuration, symfony-2.1

```
<service id="my_service">
    <tag name="my_transport" supports="feature1, feature2, feature3" />
</service> 
```

可以在处理 XML 配置时定义`supports`属性，而不是执行?`array``preg_split`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T00:21:28.047

没有办法将属性定义为`array`.

DependencyInjection 加载器不支持这一点。（例如，如果你尝试这个，从`yml`抛出异常加载）`A "tags" attribute must be of a scalar-type (...)`

[XmlFileLoader 加载标签](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/DependencyInjection/Loader/XmlFileLoader.php#L182)使用[phpize](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/DependencyInjection/SimpleXMLElement.php#L102)解析属性值为 null、布尔值、数字或字符串。

向服务定义添加标签不会覆盖之前添加的标签的定义，而是向数组添加新条目。

```
public function addTag($name, array $attributes = array())
{
    $this->tags[$name][] = $attributes;

    return $this;
} 
```

所以你应该尝试创建多个`<tag>`元素（如 Wouter J 所说）

如果你的 XML 文件会像

```
<service id="my_service">
    <tag name="my_transport" supports="feature1" />
    <tag name="my_transport" supports="feature2" />
    <tag name="my_transport" supports="feature3" />
</service> 
```

那么标签的 $attributes`my_transport`将是

```
Array
(
    [0] => Array
        (
            [supports] => feature1
        )

    [1] => Array
        (
            [supports] => feature2
        )

    [2] => Array
        (
            [supports] => feature3
        )

) 
```

及样品用法

```
use Symfony\Component\DependencyInjection\Reference;
use Symfony\Component\DependencyInjection\ContainerBuilder;
use Symfony\Component\DependencyInjection\Compiler\CompilerPassInterface;

class MyCompilerPass implements CompilerPassInterface
{
    public function process(ContainerBuilder $container)
    {
        $definition = $container->getDefinition('my_transport_service');

        // Extensions must always be registered before everything else.
        // For instance, global variable definitions must be registered
        // afterward. If not, the globals from the extensions will never
        // be registered.
        $calls = $definition->getMethodCalls();
        $definition->setMethodCalls(array());
        foreach ($container->findTaggedServiceIds('my_transport') as $id => $attributes) {
            // print_r($attributes);
            foreach($attributes as $attrs)
            {
                switch($attrs['supports']){
                  case 'feature1':
                      $definition->addMethodCall('addTransportFeature1', array(new Reference($id)));
                      break;
                  case 'feature2':
                      $definition->addMethodCall('addTransportFeature2', array(new Reference($id)));
                      break;
                  case 'feature3':
                      $definition->addMethodCall('addTransportFeature3', array(new Reference($id)));
                      break;
                }
            }
        }
        $definition->setMethodCalls(array_merge($definition->getMethodCalls(), $calls));
    }
} 
```

# gwt - 在 GWT 中需要将列表框的值设置为在其他选择中被选中的值

> ID：13553934
> 
> 赞同：2
> 
> 时间：2012-11-25T18:15:18.873
> 
> 标签：gwt, listbox

我有一个完整的搜索面板，其中包含ListBox，其值是从DB读取的。选择列表框中的项目并进行搜索。如果找不到结果，则搜索面板是凝结的（另外一个搜索面板），并且在凝结的搜索中，我们可以更改搜索条件，在列表框中选择了不同的项目。更改搜索条件后，如果进行搜索，当出现完整搜索面板时，完整搜索面板中列表框的值应与更改的值相同/在精简的搜索面板中选择。我们怎样才能做到这一点。

简单来说 - 如果我有两个列表框，加载一个列表框并将列表框的值设置为与另一个列表框相同。如果一个列表框的值发生更改，则另一个应该更改并且此列表框的值设置为在上一个中选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T19:33:02.487

我会做以下事情

```
//you have something like this
ListBox listbox1;
ListBox listbox2;

//add a change handler
listbox1.addChangeHandler(new ChangeHandler() {

@Override
public void onChange(ChangeEvent event) 
{
      int index = listbox1.getSelectedIndex();
      //do your update code here for listbox2
      //like a listbox2.setSelectedIndex(index) or something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:55:39.200

据我所知，它是一个简单的实现。在第一个列表框上添加一个值更改处理程序，并在 onChange 方法中执行您想要的任何操作。

关于没有搜索结果时您的面板需要折叠，您始终可以使用垂直面板并将其高度设置为 100% 并添加另一个面板或使用 Dock 面板并将面板添加到南或最佳使用披露面板并玩耍用它。

# objective-c - NSTableView 允许用户选择要显示的列

> ID：13553935
> 
> 赞同：9
> 
> 时间：2012-11-25T18:15:20.517
> 
> 标签：objective-c, macos, cocoa, nstableview, nsmenu

任何人都知道如何允许用户通过右键单击然后选择来选择要显示的 NSTableView 的哪些列？就像 iTunes 一样。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-26T10:28:51.507

我已经实现了这一点，并且以下内容应该可以在没有任何子类化的情况下使用。

首先在 IB 中实现一个空菜单，并连接到 Table Header View 的菜单输出。

此方法（从 awakeFromNib 调用）从标题构造菜单的内容（并包括防止用户隐藏主列的测试）

```
- (void)initViewHeaderMenu:(id)view {
    //create our contextual menu
    NSMenu *menu = [[view headerView] menu];
    //loop through columns, creating a menu item for each
    for (NSTableColumn *col in [view tableColumns]) {
        if ([[col identifier] isEqualToString:COLUMNID_NAME])
            continue;   // Cannot hide name column
        NSMenuItem *mi = [[NSMenuItem alloc] initWithTitle:[col.headerCell stringValue]
                                                    action:@selector(toggleColumn:)  keyEquivalent:@""];
        mi.target = self;
        mi.representedObject = col;
        [menu addItem:mi];
    }
    return;
} 
```

这会调用以下内容来执行实际的隐藏/取消隐藏

```
- (void)toggleColumn:(id)sender {
    NSTableColumn *col = [sender representedObject];
    [col setHidden:![col isHidden]];
} 
```

您还需要设置菜单的委托并实现以下设置状态：-

```
#pragma mark NSMenu Delegate Methods
-(void)menuWillOpen:(NSMenu *)menu {
    for (NSMenuItem *mi in menu.itemArray) {
        NSTableColumn *col = [mi representedObject];
        [mi setState:col.isHidden ? NSOffState : NSOnState];
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-16T09:49:45.470

我根据[这篇博客文章](http://www.fernlightning.com/doku.php?id=randd:dyntablecolumns)扩展了 Milliways 的出色答案，并添加了以下功能：

*   显示可见列的复选标记
*   坚持使用设置`NSUserDefaults`

**初始设置**：

```
// Your intial Startup code
[self setupHeaderMenu:self.yourTableView]; 
```

**创建菜单**：

**重要提示**：因为`col.identifier`您必须为 IB 中的每个表视图列设置一个“标识标识符”才能正常工作。

```
#pragma mark - Show Hide Columns
- (void)setupHeaderMenu:(NSTableView *)tableView {

    NSDictionary *savedCols = [[NSUserDefaults standardUserDefaults] dictionaryForKey:kUserDefaultsKeyVisisbleColumns];

    NSMenu *menu = [NSMenu new];
    for (NSTableColumn *col in tableView.tableColumns) {

        NSMenuItem *mi = [[NSMenuItem alloc] initWithTitle:[col.headerCell stringValue]
                                                    action:@selector(toggleColumn:)
                                             keyEquivalent:@""];
        mi.target = self;

        if(savedCols){
            BOOL isVisible = [savedCols[col.identifier] boolValue];
            [col setHidden:!isVisible];
        }

        mi.state = (col.isHidden ? NSOffState: NSOnState);
        mi.representedObject = col;
        [menu addItem:mi];
    }

    tableView.headerView.menu = menu;
    return;
} 
```

**切换方法**

切换方法将新配置保存在`NSUserDefaults`

```
- (void)toggleColumn:(NSMenuItem *)menu {
    NSTableColumn *col = menu.representedObject;

    BOOL shouldHide = !col.isHidden;
    [col setHidden:shouldHide];

    menu.state = (col.isHidden ? NSOffState: NSOnState);

    NSMutableDictionary *cols = @{}.mutableCopy;
    for( NSTableColumn *column in self.yourTableView.tableColumns){
        cols[column.identifier] = @(!column.isHidden);
    }

    [[NSUserDefaults standardUserDefaults] setObject:cols forKey:kUserDefaultsKeyVisibleColumns];
    if(shouldHide){
        [self.yourTableView sizeLastColumnToFit];
    } else {
        [self.yourTableView sizeToFit];
    }
} 
```

**菜单委托**

```
-(void)menuWillOpen:(NSMenu *)menu {
    for (NSMenuItem *mi in menu.itemArray) {
        NSTableColumn *col = [mi representedObject];
        [mi setState:col.isHidden ? NSOffState : NSOnState];
    }
} 
```

**结果**

因此，现在您可以选中/取消选中每一列，即使重新启动您的应用程序，配置也会被保存。

![隐藏列](../Images/5dc87c68204849f45535c2c88c5859cb.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-25T21:43:47.960

您需要将一个附加`NSMenu`到具有列的表的标题`NSMenuItems`并在右键单击时将其打开。我通过子类化`NSViewController`并在其中附加我的表格视图来做到这一点。该类也应该是一个`NSMenuDelegate`. 下面的例子。

.h 文件：

```
@interface UserManagedColumnsTableViewController : NSViewController <NSMenuDelegate>
@property (weak) IBOutlet NSTableView *tableView;
@end 
```

.m 文件：

```
@interface UserManagedColumnsTableViewController ()
- (void)toggleColumn:(id)sender;
@end

@implementation UserManagedColumnsTableViewController

- (void)awakeFromNib {
  [super awakeFromNib];
  NSMenu *columnsMenu = [[NSMenu alloc] initWithTitle:@""];
  for (NSTableColumn *column in self.tableView.tableColumns) {
    NSMenuItem *menuItem = [[NSMenuItem alloc] initWithTitle:[column.headerCell stringValue]
                                                      action:@selector(toggleColumn:)
                                               keyEquivalent:@""];
    menuItem.target = self;
    menuItem.representedObject = column;
    [columnsMenu addItem:menuItem];
  }
  columnsMenu.delegate = self;
  [self.tableView.headerView setMenu:columnsMenu];
}

#pragma mark - NSMenuDelegate conformance
- (void)menuWillOpen:(NSMenu *)menu {
  for (NSMenuItem *menuItem in menu.itemArray) {
    NSTableColumn *column = [menuItem representedObject];
    [menuItem setState:column.isHidden ? NSOffState : NSOnState];
  }
}

#pragma mark - Private Methods
- (void)toggleColumn:(id)sender {
  NSTableColumn *column = [sender representedObject];
  [column setHidden:![column isHidden]];
}

@end 
```

# android - 切换到不同活动时保存屏幕位置

> ID：13553936
> 
> 赞同：0
> 
> 时间：2012-11-25T18:15:23.823
> 
> 标签：android, android-layout, android-intent

我在滚动视图中有一个包含 30 个按钮的相对布局。我想知道的是是否有办法保存职位，即。当用户向下滚动到倒数第二个按钮并单击它以显示图像或文本时，当用户按下返回以选择不同的按钮以返回到最后一个位置（例如倒数第二个按钮）时，无需再次向下滚动？我有一个滑动抽屉，它工作得很好，但是使用按钮（它们是图像按钮）需要一段时间才能将所有按钮加载到屏幕上。而且我发现在没有滑动抽屉的情况下它加载速度更快，但现在每次返回按钮时都必须一直向下滚动到按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T18:32:21.103

Android 文档[在这里说](http://developer.android.com/reference/android/app/Activity.html)：

> [...] 您应该使用 onPause() 方法将任何持久性数据（例如用户编辑）写入存储。此外，方法 onSaveInstanceState(Bundle) 在将 Activity 置于此类后台状态之前被调用，允许您将 Activity 中的任何动态实例状态保存到给定的 Bundle 中，以便稍后在 onCreate(Bundle) 中接收该 Activity需要重新创建。

也许您只是偶然地重新创建了您的活动内容。

# jquery - 通过使用 jQuery 动态设置 CSS 值使图像在 div 中居中

> ID：13553937
> 
> 赞同：0
> 
> 时间：2012-11-25T18:15:28.813
> 
> 标签：jquery, html, css

在将图像缩放到 250px 的高度后，我试图根据图像的宽度将图像居中。

例如，如果我有一个尺寸为 625x450 的图像，并且在我的 CSS 文件中，将图像的高度设置为 250 像素，那么宽度将自动缩放为 347.22 像素。我希望能够检测到缩放后的宽度，然后设置 (width - height)/2 的左边距以使图像居中。

这个例子的硬编码形式的 CSS 看起来像这样（整个小提琴都[在这里](http://jsfiddle.net/davidsawyer/99PMd/5/)）：

```
.gallery {
    width: 250px;
    overflow: hidden;
    position: relative;
}

.gallery img {
    height: 250px;
    width: auto;
    margin-left: -48px;
} 
```

但我希望能够使用其他维度的图像即时执行此操作。我试图通过删除硬编码 CSS 的左边距线并添加一些 jQuery 来做到这一点（整个小提琴在[这里](http://jsfiddle.net/davidsawyer/99PMd/4/)）：

```
$(document).ready(function(){
    oldWidth = $('.gallery img').width();
    newMarg = (oldWidth - 250)/2);       
    $('.gallery img').css("margin-left", newMarg);
} 
```

不过，我在这种方法上没有取得任何成功。它必须与我搞砸的jQuery有关。我对我在这里尝试做的一切都很陌生，我觉得我可能会错过一些简单的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T19:03:03.833

正如[这篇文章中所建议的](https://stackoverflow.com/questions/4958385/center-img-inside-a-div-with-css)

我更改了您的 jsFiddle 以适应该帖子中的概念：

[jsFiddle](http://jsfiddle.net/99PMd/14/)

```
<div class="outer">
   <div class="inner">
       <img src="" />
   </div>
</div> 
```

和

```
.outer {
  width: 250px; overflow: hidden;
}
.inner {
  float: left; position: relative; left: 50%;
}
.inner img {
  height: 250px; display: block; position: relative; left: -50%;
} 
```

这个解决方案的优点是它不依赖于 javascript

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T18:19:58.530

如果将图片设置为display:block，可以使用margin: 0 auto;text-align:center;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T18:45:12.850

除了一些放错位置的括号外，你的减法倒退了：

```
$(document).ready(function() {
    oldWidth = $('.gallery img').width();
    newMarg = (250 - oldWidth) / 2;
    $('.gallery img').css("margin-left", newMarg);
});​ 
```

[http://jsfiddle.net/99PMd/10/](http://jsfiddle.net/99PMd/10/)

但是请注意，如果其中有多个`.gallery`或`img`内部，则该变量`oldWidth`将仅等于在 DOM 中找到的第一个此类图像。如果您有多个此类图像或多个画廊，则需要使用循环重构代码：

```
$(document).ready(function() {
    $('.gallery img').each(function() {
        oldWidth = $(this).width();
        newMarg = (250 - oldWidth) / 2;
        $(this).css("margin-left", newMarg);
    });
});​ 
```

[http://jsfiddle.net/99PMd/11/](http://jsfiddle.net/99PMd/11/)

现在就个人而言，我发现溢出这样的图像没有吸引力，所以我只是调整图像的大小以适应它的容器。这可以用纯 CSS 来完成：

```
.gallery img {
    height: auto;
    max-width:100%;
}​ 
```

[http://jsfiddle.net/99PMd/12/](http://jsfiddle.net/99PMd/12/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T18:53:18.267

[jsFiddle](http://jsfiddle.net/99PMd/13/)

```
$(window).load(function(){

   var galW = 250;
   var imgW = $('.gallery img').width();

   if(imgW>galW){
       $('.gallery img').css({marginLeft: (galW-imgW)/2 })   ;
   }

}); 
```

# opengl - 用于图像处理的 GPU 编程

> ID：13553942
> 
> 赞同：4
> 
> 时间：2012-11-25T18:15:57.417
> 
> 标签：opengl, image-processing, opencl, gpu

我正在做一个旨在控制双板人形机器人的项目。不幸的是，我们的硬件资源非常有限（[RB110 板和它的 mini PCI 显卡](http://robosavvy.com/store/product_info.php/products_id/1115)）。我计划将图像处理任务从 CPU 移植到可能的显卡处理器，但以前从未这样做过......我被建议使用 OpenCV，但似乎不可能，因为框架不支持我们的显卡处理器（Volari Z9s） . 然后我在 Linux Journal 上发现[了一篇有趣的帖子。](http://www.linuxjournal.com/content/image-processing-opengl-and-shaders)作者使用 OpenGL 处理从 v4l 设备检索的帧。

我对硬件 API 和 OpenGL/OpenCV 之间的关系有点困惑。为了使用 GPU，硬件是否需要图形编程框架（OpenGL/OpenCV）支持？我在哪里可以找到这样的 API？

我在 Google 上搜索了很多关于我的硬件的信息，不幸的是，供应商（[XGI 技术](http://www.xgitech.com/)）似乎已经灭绝了......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T19:01:15.383

> 为了使用 GPU，硬件是否需要图形编程框架（OpenGL/OpenCV）支持？我在哪里可以找到这样的 API？

OpenCL 和 OpenGL 都由 GPU 驱动程序转换为硬件指令，因此您的操作系统需要一个支持这些框架的驱动程序。大多数 GPU 驱动程序支持某些版本的 OpenGL，因此应该可以工作。

OpenGL 标准由[Khronos Group维护，您可以在](http://www.khronos.org/)[nehe](http://nehe.gamedev.net/)找到一些教程。

**OpenGL 的工作原理**

OpenGL 接受三角形作为输入，并根据发出绘制时的状态绘制它们。大多数 OpenGL 函数都可以通过操纵此状态来更改执行的操作。图像操作可以通过将输入图像加载为纹理并在纹理处于活动状态时绘制多个顶点来完成，从而生成新图像（或更通用的新二维数据网格）。

从版本 > 2（或使用正确的 ARB 扩展）开始，可以使用称为顶点和片段着色器的 GLSL 程序控制对图像执行的操作（有更多的着色器，但这些是最旧的）。每个顶点将调用一次顶点着色器，其结果被插值并转发到片段着色器。每次将新的片段（像素）写入结果时，都会调用片段着色器。

现在这都是关于读取和写入图像的，如何将其用于对象检测？使用 Vertices 将输入纹理跨越整个视口。除了计算 rgb 颜色并将它们存储在结果中，您可以编写一个计算灰度图像/渐变图像的片段着色器，然后检查每个像素的这些纹理，如果像素位于具有特定大小的循环的中心，是线条的一部分或者与周围环境相比具有相对较高的梯度（良好的功能），或者您可以找到一个很好的并行算法。（我自己没做过）

最终结果必须读回 CPU（有时您可以在执行此操作之前使用着色器来缩小数据）。OpenCL 给它一种不太像图形的感觉，并提供了更多的自由，但支持较少。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T18:55:40.047

首先，您需要着色器支持（[GLSL](http://en.wikipedia.org/wiki/GLSL)或[asm](http://en.wikipedia.org/wiki/ARB_%28GPU_assembly_language%29)）

通常的方法是使用您的图像（纹理）渲染全屏四边形并应用片段着色器。它被称为[后处理](http://en.wikibooks.org/wiki/OpenGL_Programming/Post-Processing)，并且受限于指令集和硬件所具有的其他限制。在基本 lvl 上，它允许您以并行方式对大型数据集应用简单（单个函数），这将产生另一个数据集。但是分支（如果支持的话）是第一个性能敌人，因为 GPU 由几个[SIMD 块组成](http://en.wikipedia.org/wiki/SIMD)

# r - 循环内的随机数据集

> ID：13553943
> 
> 赞同：-1
> 
> 时间：2012-11-25T18:15:56.567
> 
> 标签：r

这是我想做的事情：

我有一个时间序列数据框，让我们说 100 个长度为 600 的时间序列 - 每个都在数据框的一列中。

我想随机选取 4 个时间序列，然后为它们分配总和为 1 的随机权重（即 0.1、0.5、0.3、0.1）。使用那些我想计算 4 个加权时间序列变量（例如凸组合）之和的平均值。

我想这样做让我们说 100k 次并将每个结果存储在表格中

```
ts1.name, ts2.name, ts3.name, ts4.name, weight1, weight2, weight3, weight4, mean 
```

这样我就得到了 9*100k df。

我已经尝试了一些东西，但是 R 在循环方面非常糟糕，而且我知道由于 R 设计，面向矢量的解决方案更好。

这就是我所做的，我知道这很可怕

df 的形式为

```
v1,v2,v2.....v100
1,5,6,.......9
2,4,6,.......10
3,5,8,.......6
2,2,8,.......2
etc

e=NULL
for (x in 1:100000)
{
  s=sample(1:100,4)#pick 4 variables randomly
  a=sample(seq(0,1,0.01),1)
  b=sample(seq(0,1-a,0.01),1)
  c=sample(seq(0,(1-a-b),0.01),1)
  d=1-a-b-c
  e=c(a,b,c,d)#4 random weights
  average=mean(timeseries.df[,s]%*%t(e))
  e=rbind(e,s,average)#in the end i get the 9*100k df
  } 
```

该程序运行缓慢。

编辑：

> 感谢我的帮助，我不习惯思考 R，也不太习惯将每个问题转换为 R 中需要的矩阵代数方程。如果我想计算，问题就会变得有点复杂标准差。我需要协方差矩阵，我不确定我是否可以/如何从原始 timeseries.df 协方差矩阵中为每个样本选择随机元素，然后计算样本方差

```
t(sampleweights)%*%sample_cov.mat%*%sampleweights 
```

最终得到 ts.weighted_standard_dev 矩阵

> 最后一个问题如果我想引导原始 df x 次然后应用相同的计算来测试我的数据的稳健性，最好的方法是什么

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T20:05:57.617

好的，让我试着解决你的问题。作为前言：我想不出任何应用程序都适合做你正在做的事情。但是，这是由您判断的（尽管我对应用程序感兴趣......）

首先，请注意加权和的均值等于均值的加权和，如下所示：

![在此处输入图像描述](../Images/a8a04c320fd3d73bce1d522731dfcd23.png)

让我们生成一些示例数据：

```
timeseries.df <- data.frame(matrix(runif(1000, 1, 10), ncol=40))
n <- 4                # number of items in the convex combination
replications <- 100   # number of replications 
```

因此，我们可以*首先*计算所有列的平均值，然后使用这个平均值进行所有进一步的计算：

```
ts.means <- apply(timeseries.df, 2, mean) 
```

让我们创建一些示例：

```
samples <- replicate(replications, sample(1:length(ts.means), n)) 
```

以及这些样本的相应权重：

```
weights <- matrix(runif(replications*n), nrow=n)
# Now norm the weights so that each column sums up to 1:
weights <- weights / matrix(apply(weights, 2, sum), nrow=n, ncol=replications, byrow=T) 
```

那部分有点棘手。单独运行单个函数并进行少量复制，以弄清楚它们在做什么。请注意，我采用了不同的方法来生成权重：首先获取均匀分布的数据，然后通过它们的总和对其进行规范。结果应该与您的方法相同，但具有任意分辨率和更好的性能。

再有一点技巧：获取每个时间序列的平均值并将它们与刚刚计算的权重相乘：

```
ts.weightedmeans <- matrix(ts.means[samples], nrow=n) * weights
# and sum them up:
weights.sum <- apply(ts.weightedmeans, 2, sum) 
```

现在，我们基本上完成了 - 所有信息都可用并且可以使用。剩下的只是正确格式化 data.frame 的问题。

```
result <- data.frame(t(matrix(names(ts.means)[samples], nrow=n)), t(weights), weights.sum)

# For perfectness, use better names:
colnames(result) <- c(paste("Sample", 1:n, sep=''), paste("Weight", 1:n, sep=''), "WeightedMean") 
```

我会假设这种方法相当快 - 在我的系统上，代码需要 1.25 秒，重复次数是你所说的。

最后一句话：你很幸运，我正在寻找一些让我思考了一段时间的东西。您的问题不是以鼓励用户思考您的问题并给出好的答案的方式提出的。下次遇到问题时，我建议您之前阅读 www.whathaveyoutried.com 并尝试尽可能地分解问题。你的问题越具体，你的答案就会越快、质量越高。

* * *

## 编辑

您正确地提到，上面生成的权重并非均匀分布在整个值范围内。（我仍然不得不反对，即使 (0.9, 0.05, 0.025, 0.025) 也是可能的，但这不太可能）。

不过，现在我们在不同的联赛打球。我很确定您采用的方法也不是均匀分布的——最后一个值为 0.9 的概率远小于第一个值那么大的概率。老实说，关于根据 L_1 距离在单位球体上生成均匀分布的随机数，我没有为您准备好一个好主意。（实际上，它并不是一个真正的单位球体，但两个问题应该是相同的）。

因此，我不得不放弃这一点。

我建议您在 stats.stackexchange.com 上提出一个关于这些随机向量生成的新问题。使用正确的技术可能相当简单。但是，我怀疑带有该标题和相当长答案的这个问题会吸引潜在的响应者...（如果您在那边问问题，我会很感激一个链接，因为我想知道解决方案；）

关于方差：我不完全了解您要计算哪个标准差。如果您只想计算每个时间序列的标准差，为什么不使用内置函数`sd`？在上面的计算中，您可以直接替换`mean`它。

引导：这是一个全新的问题。通过开始新的问题来区分不同的主题。

# java - ArrayLists 比数组慢 2 倍

> ID：13553950
> 
> 赞同：6
> 
> 时间：2012-11-25T18:16:13.293
> 
> 标签：java, performance

我正在测试一种分子动力学算法，其中包括一个由**9 个双精度数组**组成的粒子类，用于存储粒子分量（3D 环境中的速度、力和位置）。

我使用 5 个输入大小测试算法：

```
Size (MB) Time (s)
0.06      0.36     (fits in cache L2)
0.14      1.79     (fits in cache L2)
0.60      36.86    (fits in cache L3)
1.35      182.24   (fits in cache L3)
17.38     566.55   (it only fits in RAM) 
```

比我将`Particles`布局从更改`array`为`ArrayList`. 为了有一个连续的内存块，我创建了 arrayList，其大小将占用：

```
ArrayList <Double> px = new ArrayList <Double>(Input_Size); 
```

我在上述睾丸的相同条件下运行该版本，结果是：

```
Size (MB) Time (s)
0.06      0.608
0.14      2.78
0.60      57.15
1.35      299.24
17.38     1436,42 
```

**测试环境为：**

AMD Opteron 处理器 6174，800 MHz，12 MB Cache L3，24 核；

我的速度降低了大约 2 倍。这是正常的吗？不应该期望在两个版本中几乎相同的时间，因为`ArrayList`像数组一样在内存中连续分配？

编辑：

```
Running with the option **-XX:+PrintCompilation**

  WITH ARRAY:

 1       java.util.jar.Manifest$FastInputStream::readLine (167 bytes)
  2       sun.nio.cs.UTF_8$Decoder::decodeArrayLoop (553 bytes)
  3       java.lang.String::hashCode (60 bytes)
  4       java.lang.String::charAt (33 bytes)
  5       sun.security.util.ManifestDigester::findSection (180 bytes)
  6       java.lang.Object::<init> (1 bytes)
  7       moldyn.random::update (104 bytes)
  8       moldyn.random::seed (80 bytes)
---   n   java.lang.StrictMath::log (static)
  9       java.lang.Math::log (5 bytes)
 10       moldyn.md::scalingVelocity (82 bytes)
 11       moldyn.Particles::distance (192 bytes)
  1%      moldyn.Particles::force @ 42 (211 bytes)
 12       moldyn.Particles::force (211 bytes)
 13       moldyn.Particles::domove (163 bytes)
 14       moldyn.Particles::domove_out (160 bytes)
  2%      moldyn.Particles::cicle_domove @ 5 (23 bytes)
 15       moldyn.Particles::update_force (49 bytes)
  3%      moldyn.Particles::cicle_forces @ 6 (27 bytes)
 16       moldyn.Particles::mkekin (141 bytes)
  4%      moldyn.Particles::cicle_mkekin @ 9 (33 bytes)
 17       moldyn.Particles::velavg (70 bytes)
  5%      moldyn.Particles::cicle_velavg @ 9 (37 bytes)
 18       moldyn.Particles::cicle_domove (23 bytes)
 19       moldyn.Particles::cicle_forces (27 bytes)
 20       moldyn.Particles::cicle_mkekin (33 bytes)
 21       moldyn.Particles::cicle_velavg (37 bytes)
36.763

WITH ArrayList <Double>....
----

  1       java.util.jar.Manifest$FastInputStream::readLine (167 bytes)
  2       sun.nio.cs.UTF_8$Decoder::decodeArrayLoop (553 bytes)
  3       java.lang.String::hashCode (60 bytes)
  4       java.lang.String::charAt (33 bytes)
  5       sun.security.util.ManifestDigester::findSection (180 bytes)
  6       java.lang.Object::<init> (1 bytes)
---   n   java.lang.System::arraycopy (static)
  7       java.lang.Number::<init> (5 bytes)
  8       java.util.ArrayList::ensureCapacity (58 bytes)
  9       java.lang.Double::valueOf (9 bytes)
 10       java.lang.Double::<init> (10 bytes)
 11       java.util.ArrayList::add (100 bytes)
 12       java.util.ArrayList::RangeCheck (48 bytes)
 13       java.util.ArrayList::set (21 bytes)
 14       moldyn.random::update (104 bytes)
 15       moldyn.random::seed (80 bytes)
---   n   java.lang.StrictMath::log (static)
 16       java.lang.Math::log (5 bytes)
 17       java.util.ArrayList::get (12 bytes)
 18       java.lang.Double::doubleValue (5 bytes)
 19       moldyn.md::scalingVelocity (120 bytes)
 20       moldyn.Particles::distance (240 bytes)
  1%      moldyn.Particles::force @ 42 (211 bytes)
 21       moldyn.Particles::force (211 bytes)
 22       moldyn.Particles::domove (337 bytes)
 23       moldyn.Particles::domove_out (292 bytes)
  2%      moldyn.Particles::cicle_domove @ 5 (23 bytes)
 24       moldyn.Particles::update_force (91 bytes)
  3%      moldyn.Particles::cicle_forces @ 6 (27 bytes)
 25       moldyn.Particles::mkekin (297 bytes)
  4%      moldyn.Particles::cicle_mkekin @ 9 (33 bytes)
 26       moldyn.Particles::velavg (118 bytes)
  5%      moldyn.Particles::cicle_velavg @ 9 (37 bytes)
 27       moldyn.Particles::cicle_domove (23 bytes)
 28       moldyn.Particles::cicle_forces (27 bytes)
 29       moldyn.Particles::cicle_mkekin (33 bytes)
 30       moldyn.Particles::cicle_velavg (37 bytes)
55.98 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T18:26:01.900

我有一些想法，但没有明确的答案：

1.  A`java.lang.Double`与`double`原语不同。可能是自动装箱开销和与`Double`对象一起出现的额外机械有所不同。我会比较字节码，看看是否属实。
2.  这听起来像是对班级内的客户隐藏`double []`或`List<Double>`隐藏的选择。`Particle`如果是这种情况，请使用数组，因为它是内部实现细节。
3.  我会小心用基准测试欺骗自己。
4.  我想知道您的`Particle`课程是否是可变的。那可能会有所作为。位置、速度和力是否不断变化并在您的对象中得到更新？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T18:23:36.923

我看到 2 个潜在问题：

1：数组周围对象的开销...

ArrayList 在 Array 中存储可变数量的对象。这类似于创建对象数组，但是使用 ArrayList，可以使用公开的方法轻松地从 ArrayList 添加和删除项目，并且可以动态调整其大小。

这可能非常方便，但它比使用许多元素时创建对象数组要慢。

如果您需要功能有限的非常灵活的 Array 类型的集合，ArrayList 可能是一个不错的选择。但是，如果您追求速度，则阵列将获胜。为避免内部重新复制 ArrayList 中的数组，您可以使用

```
ensureCapacity(int requestCapacity) 
```

2：在你的具体情况下，可能还会有很多装箱/拆箱来回进行`double`，`Double`这也会给你一些延迟。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T20:06:14.560

我建议不要在这个用例中使用数组或 ArrayList。您对此有一个非常明显的面向对象的解决方案，该解决方案被忽略以支持数组。

您应该使用组合来构建更好的结构化程序，它应该更易于阅读并且（可能）不会导致任何额外的开销。

例如。

```
import javax.vecmath.Vector3d;

public class Particle {

    private Vector3d velocity;
    private Vector3d force; // acceleration?
    private Vector3d position; 

    ...

} 
```

这样您就不必担心边界检查（如数组和 ArrayList 的情况），也不必担心自动装箱（如 ArrayLists 的情况）。您还可以获得粒子速度、加速度和位置的每个值都被恰当命名的好处。也就是说，谁知道`particle.getData()[7]`指的是什么，而用`particle.getPosition().y`它是很明显的。最后，[`Vector3d`](http://docs.oracle.com/cd/E17802_01/j2se/javase/technologies/desktop/java3d/forDevelopers/J3D_1_3_API/j3dapi/javax/vecmath/Vector3d.html)附带一些可能有用的内置功能。

# php - 使用类属性时的 PHP 复杂语法（大括号）

> ID：13553952
> 
> 赞同：0
> 
> 时间：2012-11-25T18:16:35.530
> 
> 标签：php, curly-braces

我正在阅读一本关于面向对象的 PHP 的书，并注意到作者在某些情况下使用了复杂的语法。在关于继承的章节中，他使用了以下代码：

```
// Declare the getSummaryLine() method
function getSummaryLine() {
// Define what the getSummaryLine() method does
     $base  = "$this->title ( {$this->producerMainName}, ";
     $base .= "{$this->producerFirstName} )";
     return $base;
} 
```

我的问题是，你为什么不直接使用：

```
// Declare the getSummaryLine() method
function getSummaryLine() {
// Define what the getSummaryLine() method does
     return "$this->title ( $this->producerMainName, $this->producerFirstName )";
} 
```

因为两者似乎都返回相同的东西？

如果这很明显，请原谅我。我已经阅读了手册中的 PHP 复杂语法，但它并没有让我更清楚。是安全问题、风格选择还是其他问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T18:20:02.813

They both achieve the same thing, but the reason for the compounded statement has to do with readability. Longer concatenated strings are simply easier to read, and is nothing more than a code flavour on the authors part.

The complex bit about this has to do with evaluation. Using curly braces you can do this:

```
echo "This works: {$arr['key']}"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T18:20:24.327

In this case, it's **only** a matter of style/preference.

The author *may feel* it's easier to read when it's spread out accross multiple lines and variables are inside curly braces.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T18:27:06.420

所有这些都是有效的。

作者可能只是为了可读性而使用连接，长行代码在书中也不太好。

在嵌入双引号时，您有时需要在数组/对象中的字符串周围使用 {}，否则您会看到语法错误。

```
// Declare the getSummaryLine() method
function getSummaryLine() {
// Define what the getSummaryLine() method does
     $base  = "$this->title ( {$this->producerMainName}, ";
     $base .= "{$this->producerFirstName} )";
     return $base;
} 
```

或者

```
// Declare the getSummaryLine() method
function getSummaryLine() {
// Define what the getSummaryLine() method does
     return "{$this->title} ( {$this->producerMainName}, {$this->producerFirstName} )";
} 
```

或者

```
// Declare the getSummaryLine() method
function getSummaryLine() {
// Define what the getSummaryLine() method does
     return $this->title.'( '.$this->producerMainName.', '.$this->producerFirstName.' )';
} 
```

# javascript - Filepicker.io 确保存储 url 选择文件

> ID：13553957
> 
> 赞同：0
> 
> 时间：2012-11-25T18:16:51.763
> 
> 标签：javascript, filepicker.io

这是我的文件选择器的样子

```
filepicker.pick({
  mimetypes: ['image/*'],
  services: ['COMPUTER', 'URL'],
  maxSize: 5 * 1000 * 1024
}, function(FPFile) {
  // do stuff to file
}); 
```

问题在于，选择了选择URL选择时，而不是将文件上传到文件选择器时，直接提供URL。这使得存储不可靠，因为外部主机可以删除文件等。

有没有一种简单的方法可以确保在使用 URL 上传文件时直接托管文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T00:26:53.513

有两种选择。

第一个是 Store API。当您收到 fpurl 时，调用`store`api，这会将文件直接保存到您的存储中。例如，如果人们可以随意选择文件，但您只想在他们选择保存某些内容时保留它们，这可能是最好的。例如，在上传新帖子时。如果他们最终不决定创建新帖子，为什么要保留项目？ [https://developers.filepicker.io/docs/web/#store](https://developers.filepicker.io/docs/web/#store)

第二个选项是用调用替换你`pick`的`pickAndStore`调用，它可以同时执行这两个操作，并且不必在回调 中执行`store`命令。[https://developers.filepicker.io/docs/web/#pickAndStore](https://developers.filepicker.io/docs/web/#pickAndStore)`pick`

虽然`pickAndStore`可能感觉它可以节省工作，但如果您有可能在用户选择数据后实际上不需要持久化数据，那么我会使用您自己的自定义回调走额外的距离（这是您创造差异的地方转换）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T19:00:19.697

最好的方法是使用 filepicker.store api -有关更多信息，请参阅[https://developers.filepicker.io/docs/web/#store](https://developers.filepicker.io/docs/web/#store)

# xforms - 使用 XForms 将 XML 元素作为 HTTP 标头发送

> ID：13553958
> 
> 赞同：1
> 
> 时间：2012-11-25T18:16:52.367
> 
> 标签：xforms, xsltforms

我对 XForms 很陌生，所以请多多包涵。我想知道是否可以做到以下几点：

我有一个 HTML 表单

```
<form>
    <input type="text" name="search-string"/>
    <input type="checkbox" name="search1" checked="checked" />Search option 1
    <input type="checkbox" name="search2" checked="checked" />Search option 2
    <input type="submit" />
</form> 
```

我想在 XForms 中表示它，并在提交时将其转换为 XML 元素，如下所示：

```
<data>
    <search1>my search string</search1>
    <search2>my search string</search2>
</data> 
```

只有在设置了相应的复选框并且它们都使用输入中的字符串填充时，才应设置`search1`and元素。`search2``search-string`

构建元素后，`data`我需要通过 POST http 请求发送它。

所有这些都可以仅使用 XForms 来完成，还是我需要使用 JS 之类的？

PS：如果有什么不同，我正在使用 XSLTForms。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T21:37:47.253

是的，这可以通过 XForms 完成，无需额外的 Javascript 指令。您需要两个实例：一个要提交，另一个用于填充第一个。

对于模型部分，这应该是这样的：

```
<xf:model>
  <xf:instance id="data">
    <data xmlns="">
      <search1/>
      <search2/>
    </data>
  </xf:instance>
  <xf:instance id="work">
    <work xmlns="">
      <b1 xsi:type="boolean"/>
      <b2 xsi:type="boolean"/>
      <search/>
    </work>
  </xf:instance>
  <xf:bind nodeset="instance('data')/search1" calculate="choose(instance('work')/b1,instance('work')/search,'')"/>
  <xf:bind nodeset="instance('data')/search2" calculate="choose(instance('work')/b2,instance('work')/search,'')"/>
  <xf:submission ref="instance('data') method="post" resource=".........."/>
</xf:model> 
```

-阿兰

# objective-c - 有没有比我的实现更好的方法来检查更新的文件？

> ID：13553964
> 
> 赞同：0
> 
> 时间：2012-11-25T18:17:43.087
> 
> 标签：objective-c, ios, nsstring, nsfilemanager

我有一个应用程序可以下载每隔几个月更新的 PDF，每次下载某个 PDF 时，我还会下载一个包含一个字符的 .txt 文件。每次我在服务器上上传更新的 PDF 时，我也会将服务器上 .txt 文件中的字符数加一。

当用户在我的应用程序中点击“更新”按钮时，我会将来自服务器的 .txt 文件中的字符串与本地 .txt 文件的字符串进行比较。

这是检查新 PDF 是否可用的一种非常轻量级的方法，但我想问是否有更好的方法或更轻松的方法来执行此操作，而无需为我拥有的每个 PDF 文件创建一个 .txt 文件服务器？

提前感谢您提供的任何帮助！

这是我用来检查新 PDF 的代码：

```
NSString *documentDirectory = [(AppDelegate *)[[UIApplication sharedApplication] delegate] applicationDocumentsDirectory];

NSString *path = [documentDirectory stringByAppendingPathComponent:@"test.txt"];

NSString *server = [NSString stringWithContentsOfURL:[NSURL URLWithString:@"foo.com/test.txt"] encoding:NSASCIIStringEncoding error:nil];

NSString *local = [NSString stringWithContentsOfFile:path encoding:NSASCIIStringEncoding error:nil];

if(![local isEqualToString:server])
{
   // I Download the new PDF and the new .txt file here;
   // simple NSURLConnection stuff, no need to elaborate
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T18:24:41.983

Off the top of my head, the HTTP `HEAD` method can be used to fetch just the headers rather than the data. If the creation date in the headers is later than the last date you downloaded the data, it's time to fetch a new copy. This can be done with `NSURLRequest` and `NSURLConnection`.

If your server doesn't support the `HEAD` request or something else prevents its use, you could have a second TXT file with a version/hash/unique identifier in it. Download that instead and compare against the stored value. If it's changed, download the full PDF and save the version text file to disk for reference later.

If security is an issue and you need to be able to trust the server, use HTTPS in either case.

# c# - 从两个字符串数组中删除重复项c#

> ID：13553966
> 
> 赞同：-1
> 
> 时间：2012-11-25T18:17:53.123
> 
> 标签：c#, c#-4.0

如何有效地从两个字符串数组中删除重复项？我想从`string[] a`单独的 a 中删除所有重复项`string[] b`

例如

```
a = { "1", "2", "3", "4"};
b = { "3", "4", "5", "6"}; 
```

我正在寻找的结果就是

```
c = { "5", "6"}; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-25T18:22:48.083

```
var final = b.Except(a).ToList(); 
```

![enter image description here](../Images/232f378e7b21b4ea2be41f81cc363506.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-25T18:22:44.503

[Enumerable.Except](http://msdn.microsoft.com/en-us/library/bb300779.aspx) produces set difference of two sequences

```
var c = b.Except(a).ToArray(); // gives you { "5", "6" } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-25T18:20:07.237

YOu can try using this:-

```
 List<string[]> moves = new List<string[]>();
 string[] newmove = { piece, axis.ToString(), direction.ToString() };
 moves.Add(newmove);
 moves.Add(newmove);

 moves = moves.Distinct().ToList(); 
```

or try this:-

```
 var c = b.Except(a).ToArray(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-27T21:35:01.727

```
 static void Main(string[] args)
        {        
             Foo(m.Length-1);
        }
        static string m = "1234"; 
        static string c = "3456"; 
        static int ctr = 0;
        static void Foo(int arg)
        {
            if (arg >= 0)
            {
                Foo(arg - 1);
                Console.Write(m[arg].ToString());
                for (int i = ctr; i <  m.Length; i++)
                {
                    if (c[i].ToString() == m[arg].ToString())
                    {
                        ctr++;
                        break;
                    }
                }  
                if(arg==m.Length-1)
                {
                    for (int i = ctr; i <m.Length; i++)
                    {
                        Console.Write(c[i].ToString());
                    }
                }
            }
         } 
```

# java - 无效的转义序列

> ID：13553976
> 
> 赞同：1
> 
> 时间：2012-11-25T18:19:18.627
> 
> 标签：java, regex

我想过滤掉所有包含 1 个数字和 3 个大写字母且总长度为 4 的单词。请参见此处的示例：http: //gskinner.com/RegExr/? [32taa](http://gskinner.com/RegExr/?32taa)

```
ArrayList<String> result = new ArrayList<String>();

for(int i = 0; i <= 10; i++){

    String message = resp.data.get(i).message;

    Matcher m = MY_PATTERN.matcher("\b(?=[^\d]*\d[^\d]*)[A-Z\d]{4}\b");

        while (m.find()) {
            String s = m.group(1);
            result.add(s);
        }
} 
```

但是当我将我的正则表达式模式传递给匹配器方法时，我得到了错误：

```
Invalid escape sequence (valid ones are  \b  \t  \n  \f  \r  \"  \'  \\ ) 
```

我需要`\d`用另一个字母交换吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T18:20:36.083

`Regex`不适合`String`...

所以你需要使用`\\d`而不是`\d`

**-**当你写`\` **java**时，期望要么`n`or `b`or or `t`or`a`和其他几个......**在**它之后，但是当你给`d`它它的生命时，你会感到震惊，想想到底是什么......我什么都不知道`\d`，所以我们需要告诉java`\` **应该按字面意思理解而不是期望它作为转义字符。**

**-**在 的情况下**。**（点）它变得更加复杂，当你给`"."`java字面意思但它是一个正则表达式，所以你需要让它看起来像那样，所以你在它前面加上前缀`\`，所以它变成`\.`了，现在再次出现与之前相同的问题开始为现在 java 接受`n`or `b`etc 之后，`\`但它得到 a `"."`，所以我们再次在它前面加上 another `\`，所以现在它变成了`\\.`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-25T18:20:27.790

在 Java 中，当在字符串中表示模式时，您需要`backslash`使用额外的反斜杠对 进行转义。

所以，`\b`应该是`\\b`，`\d`应该是`\\d`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-25T18:22:42.947

您的代码有两个问题：

*   您的模式是错误的，因为它允许更多数字 - 请参阅[http://regexr.com?32u3e](http://regexr.com?32u3e)

*   Java需要双转义斜杠...

使用正则表达式模式

```
\\b(?=[A-Z]*\\d[A-Z]*\\b)[A-Z\\d]{4}\\b 
```

# asp.net-mvc-3 - 尝试在我的控制器中调用代码但出现空引用错误

> ID：13553981
> 
> 赞同：0
> 
> 时间：2012-11-25T18:19:54.777
> 
> 标签：asp.net-mvc-3, orchardcms, mvcmailer

不想使问题过于复杂，但我认为我需要发布与此错误相关的所有代码。

使用[MvcMailer](https://github.com/smsohan/MvcMailer)并引入了一个单独的`Send`机制（用于 Orchard CMS 自己的电子邮件）。

**MvcMailer 代码：**

1) AskUsMailer.cs:

```
public class AskUsMailer : MailerBase, IAskUsMailer
{
    public AskUsMailer()
        : base()
    {
        //MasterName = "_Layout";
    }

    public virtual MvcMailMessage EMailAskUs(AskUsViewModel model)
    {
        var mailMessage = new MvcMailMessage { Subject = "Ask Us" };
        ViewData.Model = model;
        this.PopulateBody(mailMessage, viewName: "EMailAskUs");
        return mailMessage;
    }
} 
```

2) IAskUsMailer.cs：

```
public interface IAskUsMailer : IDependency
{
    MvcMailMessage EMailAskUs(AskUsViewModel model);
} 
```

3) AskUsController.cs: **(GETTING NULL REFERENCE ERROR BELOW)**

```
[Themed]
    public ActionResult Submitted()
    {
        //This is the new call (see new code below):
        //Note: Debugging steps through eMailMessagingService,
        //then shows the null reference error when continuing to
        //SendAskUs
        eMailMessagingService.SendAskUs(askUsData);
        //Below is normal MvcMailer call:
        //AskUsMailer.EMailAskUs(askUsData).Send();
        return View(askUsData);
    } 
```

注意： askUsData 在控制器的单独块中定义：

```
 private AskUsViewModel askUsData;
    protected override void OnActionExecuting(ActionExecutingContext 
        filterContext)
    {
        var serialized = Request.Form["askUsData"];
        if (serialized != null) //Form was posted containing serialized data
        {
            askUsData = (AskUsViewModel)new MvcSerializer().
                Deserialize(serialized, SerializationMode.Signed);
            TryUpdateModel(askUsData);
        }
        else
            askUsData = (AskUsViewModel)TempData["askUsData"] ?? 
                new AskUsViewModel();
        TempData.Keep();
    }
    protected override void OnResultExecuted(ResultExecutedContext 
        filterContext)
    {
        if (filterContext.Result is RedirectToRouteResult)
            TempData["askUsData"] = askUsData;
    } 
```

我不知道如何让我的 EMailMessagingService.cs（见下文）调用到控制器中，所以在控制器的一个单独块中我这样做了：

```
 private IEMailMessagingService eMailMessagingService;

    public AskUsController(IEMailMessagingService eMailMessagingService)
    {
        this.eMailMessagingService = eMailMessagingService;
    } 
```

我认为这是我问题的一部分。

**现在，新代码试图连接到 Orchard 的电子邮件：**

1）电子邮件消息服务.cs：

```
public class EMailMessagingService : IMessageManager
{
    private IAskUsMailer askUsMailer;
    private IOrchardServices orchardServices;
    public EMailMessagingService(IAskUsMailer askUsMailer, 
        IOrchardServices orchardServices)
    {
        this.orchardServices = orchardServices;
        this.askUsMailer = askUsMailer;
        this.Logger = NullLogger.Instance;
    }

    public ILogger Logger { get; set; }

    public void SendAskUs(AskUsViewModel model)
    {
        var messageAskUs = this.askUsMailer.EMailAskUs(model);
        messageAskUs.To.Add("email@email.com");
        //Don't need the following (setting up e-mails to send a copy anyway)
        //messageAskUs.Bcc.Add(AdminEmail);
        //messageAskUs.Subject = "blabla";

        Send(messageAskUs);
    }
    ....
} 
```

EMailMessagingService.cs 还包含 Send 方法：

```
 private void Send(MailMessage messageAskUs)
    {
        var smtpSettings = orchardServices.WorkContext.
            CurrentSite.As<SmtpSettingsPart>();

        // can't process emails if the Smtp settings have not yet been set
        if (smtpSettings == null || !smtpSettings.IsValid())
        {
            Logger.Error("The SMTP Settings have not been set up.");
            return;
        }

        using (var smtpClient = new SmtpClient(smtpSettings.Host, 
            smtpSettings.Port))
        {
            smtpClient.UseDefaultCredentials = 
                !smtpSettings.RequireCredentials;
            if (!smtpClient.UseDefaultCredentials &&
                !String.IsNullOrWhiteSpace(smtpSettings.UserName))
            {
                smtpClient.Credentials = new NetworkCredential
                    (smtpSettings.UserName, smtpSettings.Password);
            }

            if (messageAskUs.To.Count == 0)
            {
                Logger.Error("Recipient is missing an email address");
                return;
            }

            smtpClient.EnableSsl = smtpSettings.EnableSsl;
            smtpClient.DeliveryMethod = SmtpDeliveryMethod.Network;

            messageAskUs.From = new MailAddress(smtpSettings.Address);
            messageAskUs.IsBodyHtml = messageAskUs.Body != null &&
                messageAskUs.Body.Contains("<") && 
                messageAskUs.Body.Contains(">");

            try
            {
                smtpClient.Send(messageAskUs);
                Logger.Debug("Message sent to {0} with subject: {1}",
                   messageAskUs.To[0].Address, messageAskUs.Subject);
            }
            catch (Exception e)
            {
                Logger.Error(e, "An unexpected error while sending 
                    a message to {0} with subject: {1}", 
                    messageAskUs.To[0].Address, messageAskUs.Subject);
            }
        }
    } 
```

现在，在 EMailMessagingService.cs 中，我收到了一个错误，表明事情没有被实现，所以我自动生成了以下内容（不知道这是否是我的错误的一部分）：

```
 public void Send(Orchard.ContentManagement.Records.ContentItemRecord recipient, string type, string service, System.Collections.Generic.Dictionary<string, string> properties = null)
    {
        throw new NotImplementedException();
    }

    public void Send(System.Collections.Generic.IEnumerable<Orchard.ContentManagement.Records.ContentItemRecord> recipients, string type, string service, System.Collections.Generic.Dictionary<string, string> properties = null)
    {
        throw new NotImplementedException();
    }

    public void Send(System.Collections.Generic.IEnumerable<string> recipientAddresses, string type, string service, System.Collections.Generic.Dictionary<string, string> properties = null)
    {
        throw new NotImplementedException();
    }

    public bool HasChannels()
    {
        throw new NotImplementedException();
    }

    public System.Collections.Generic.IEnumerable<string> GetAvailableChannelServices()
    {
        throw new NotImplementedException();
    } 
```

2) IEMailMessagingServices.cs

```
public interface IEMailMessagingService
{
    MailMessage SendAskUs(AskUsViewModel model);
} 
```

MvcMailer 可以在没有这个添加的情况下正常工作（在 Orchard 之外），但我正试图让一切在 Orchard 内工作。

我只是无法弄清楚我做错了什么。有什么想法吗？

抱歉代码过多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T22:32:05.810

IEmailMessaginService 没有实现 IDependency，所以 Orchard 找不到它作为依赖项。这就是为什么它是空的。

# java - Is it possible to establish more than one bluetooth communication in android

> ID：13553983
> 
> 赞同：5
> 
> 时间：2012-11-25T18:20:00.013
> 
> 标签：java, android, bluetooth

I have android application the scan a Bluetooth device around, and connect them to start exchanging text.

I want the application to establish a communication with each Bluetooth device in the surrounding area and send text to all of them at once.

Is that possible to have multiple communication in android ? and if you have any examples ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:10:03.550

当然这是可能的。您是在谈论蓝牙 BR/EDR（2.x、3.0）还是蓝牙低功耗（4.0）？

对于蓝牙 BR/EDR，请使用[官方文档](http://developer.android.com/guide/topics/connectivity/bluetooth.html)开始。

1.  只需执行 SDP 即可查找范围内支持您的 UUID 的所有设备。[这里](http://developer.android.com/guide/topics/connectivity/bluetooth.html#DiscoveringDevices)是如何。
2.  然后使用 RFCOMM Connection[作为客户端](http://developer.android.com/guide/topics/connectivity/bluetooth.html#ConnectingAsAClient)连接到它们中的每一个。

显然，其他设备应该接受这个连接。如果这些也是 Android，请参阅“作为服务器连接”[一章](http://developer.android.com/guide/topics/connectivity/bluetooth.html#ConnectingAsAServer)。（基本上这意味着等待连接......）。

对于 Android 官方文档中未涵盖的内容，请参阅[此](http://wiresareobsolete.com/wordpress/2010/11/android-bluetooth-rfcomm/)。

您也可以只使用所有配对的设备，然后尝试连接它们（显然只有范围内的设备会连接）。

# c - Openmp没有加速并行循环

> ID：13553995
> 
> 赞同：3
> 
> 时间：2012-11-25T18:20:44.883
> 
> 标签：c, multithreading, performance, parallel-processing, openmp

我有以下令人尴尬的并行循环

```
//#pragma omp parallel for
for(i=0; i<tot; i++)
    pointer[i] = val; 
```

为什么取消注释 #pragma 行会导致性能下降？当我使用 openmp 并行化这个 for 循环时，程序运行时间略有增加。既然每个访问都是独立的，那不应该大大提高程序的速度吗？

是否有可能如果这个 for 循环没有针对较大的 tot 值运行，开销会减慢速度？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T19:25:23.867

在共享内存环境中使用多线程实现性能通常取决于：

1.  任务**粒度**；
2.  **并行任务之间的**负载均衡；****
***   并行**任务数/使用的核心数**；*   并行任务之间的**同步**量；*   算法**边界的**类型；*   机器**架构**。**

 **我将对上述各点进行简要概述。

1.  您需要检查**并行任务的粒度是否足以克服并行化的开销**（*例如，*线程创建和同步）。也许循环的迭代次数和计算`pointer[i] = val;`不足以证明创建线程的开销是合理的；然而，值得注意的是，太大的任务粒度也会导致问题，例如负载不平衡。

2.  *您必须测试负载平衡（每个*线程的工作量）。理想情况下，**每个线程应该计算相同数量的工作。**在您的代码示例中，这没有问题；

3.  你用的是超线程吗？！你使用的线程比内核多吗？！因为，如果是这样，线程将开始**“竞争”资源**，这会导致性能下降；

4.  通常，人们希望**减少线程之间的同步量。**因此，有时使用更细粒度的同步机制甚至数据冗余（以及其他方法）来实现这一点。您的代码没有这个问题。

5.  在尝试并行化您的代码之前，您应该分析它是否受内存限制、CPU 限制等。如果它受内存限制，则可以先改善缓存使用率，然后再处理并行化。对于此任务，强烈建议使用分析器。

6.  为了充分利用底层架构，多线程方法需要解决该架构的约束。例如，在架构中实现高效的多线程方法与在`SMP`架构中实现它是不同的`NUMA`。由于在后者中，必须考虑**内存亲和性**。

编辑：@Hristo lliev 的建议

7.  线程亲和性：“将线程绑定到内核总体上提高了性能，在 NUMA 系统上甚至更多，因为它提高了数据局部性。”

顺便说一句，我建议您阅读[英特尔开发多线程应用程序指南。](https://software.intel.com/content/www/us/en/develop/articles/intel-guide-for-developing-multithreaded-applications.html)**

# php - 代码未通过简单的 google.com 测试进行解析

> ID：13553997
> 
> 赞同：0
> 
> 时间：2012-11-25T18:20:51.503
> 
> 标签：php, parsing, screen-scraping

```
 <?php

$file = 'http://www.google.com';
$doc = new DOMDocument();
@ $doc->loadHTML(file_get_contents($file));

echo $doc->getElementsByTagName('span')->item(2)->nodeValue;

if (0 != $element->length) 
{
    $content = trim($element->item(2)->nodeValue);
    if (empty($content)) 
    {
        $content = trim($element->item(2)->textContent);
    }
    echo $content . "\n";
}

?> 
```

我试图从 google.com 的主页获取 span 标签的内部内容。这段代码应该输出第一个跨度标签，但它没有输出任何结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T18:28:35.277

这不是一个错误......第一个跨度`http://www.google.com`是空的，我不确定你还有什么期望

```
 <span class=gbtcb></span> <----------------  item(0)
 <span class=gbtb2></span> <----------------  item(1)
 <span class=gbts>Search</span> <-----------  item(2) 
```

尝试

```
$element = $doc->getElementsByTagName('span')->item(2);
var_dump($element->nodeValue); 
```

输出

```
Search 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T18:28:01.097

首先，请记住 HTML 不一定是有效的 XML。

除此之外，请检查您是否确实要解析一些内容；您需要`allow_url_fopen`启用才能`file_get_contents()`与 URL 一起使用。

一般来说，避免使用错误抑制运算符 (@)，因为它几乎肯定会在一段时间内再次咬你（而这一次很可能就是那个时候）；[在 SO 的其他地方](https://stackoverflow.com/questions/136899/suppress-error-with-operator-in-php)对此进行了讨论。

因此，作为第一步，切换到类似下面的内容，让我知道您是否收到任何内容。

```
// stop using @ to suppress errors
$contents = file_get_contents($file);
// check that you're getting something to parse
echo $contents; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T18:40:37.230

试试这个并告诉我们输出是什么

```
<?
echo ini_get('allow_url_fopen');
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T19:10:06.857

尝试使用 cURL 获取数据，然后将其加载到 DOMDocument 中：

```
<?php
$url = "http://www.google.com";
$ch = curl_init();
$timeout = 5;
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, $timeout);
$data = curl_exec($ch);
curl_close($ch);

$dom = new DOMDocument();
@$dom->loadHTML($data); //The @ is necessary to suppress invalid markup

echo $dom->getElementsByTagName('span')->item(2)->nodeValue;

if (0 != $element->length) 
{
    $content = trim($element->item(2)->nodeValue);
    if (empty($content)) 
    {
        $content = trim($element->item(2)->textContent);
    }
    echo $content . "\n";
}

?> 
```

# windows-8 - Where is BitmapImage / System.Windows.Media.Imaging?

> ID：13553998
> 
> 赞同：0
> 
> 时间：2012-11-25T18:20:58.417
> 
> 标签：windows-8

I want to Change the source of an Image programmatically.

I found that it's done with help of the class BitmapImage. The class is in System.Windows.Media.Imaging

But I don't have this package! I suppose I have to install something, but I don't know what and how. Searching also didn't help, I only find examples using this class, but not how to get the package. I'm using a fresh installation of Visual Studio Express 2012.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T18:58:55.970

`System.Windows.Media.Imaging.BitmapImage`是 WPF 的一部分，不能在 Windows 应用商店应用中使用。也许您正在寻找[`Windows.UI.Xaml.Media.Imaging.BitmapImage`](http://msdn.microsoft.com/library/windows/apps/BR243235).

# asp.net-mvc - What time a instance of an object created and assigned in dependency injection

> ID：13553999
> 
> 赞同：1
> 
> 时间：2012-11-25T18:20:58.243
> 
> 标签：asp.net-mvc, dependency-injection, structuremap

Suppose we have a controller in MVC,like to this:

```
public class HomeController : Controller
{
        IProductService _productService;
        ICategoryService _categoryService;
        IUnitOfWork _uow;
        public HomeController(IUnitOfWork uow, IProductService productService, ICategoryService categoryService)
        {
            _productService = productService;
            _categoryService = categoryService;
            _uow = uow;
        }

        // ...
} 
```

we use StructureMap for Dependency Injection,and now in Global..asax.cs we have a code like to this:

```
...           
 ObjectFactory.Initialize(x =>
            {
                x.For<IUnitOfWork>().HttpContextScoped().Use(() => new EFCodeFirstContext());
                x.ForRequestedType<ICategoryService>().TheDefaultIsConcreteType<EfCategoryService>();
                x.ForRequestedType<IProductService>().TheDefaultIsConcreteType<EfProductService>();
            });
... 
```

## Now my Question is:

for example what time a instance of EfCategoryService be created and assigned to _categoryService?

1- any time we use _categoryService in any method in this controller?

**OR**

2-Immediately when a request to this controller sended? for example,

www.sitename.com/Home

or

www.sitename.com/Home/News

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T19:09:56.280

You should let ASP .NET MVC know that you're using StructureMap for dependency injection.

You can do it by providing an `IControllerFactory`

Before wiring the routing (in the begining of your program) use this code-

```
ControllerBuilder.Current.SetControllerFactory(new StractureMapControllerFactory()); 
```

Where `StructureMapControllerFactory` will provide the implementation to use the DI container when instantiating Controllers

I've never done it with StructureMap but I guess someone has already implemented the ContorllerFactory for StructureMap.