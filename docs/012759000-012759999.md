# StackOverflow 问答 12759000-12759999

# sql - 如何从数据库中检索图像并在 UITableView 单元格上显示

> ID：12759008
> 
> 赞同：0
> 
> 时间：2012-10-06T10:35:20.197
> 
> 标签：sql, xcode, json, image, web-services

我在包含一个表的服务器（本地主机）上有一个 SQL 数据库（数据库名称：testdbb）。这是结构：

```
ID(Integer AutoIncrement)
Name(VARCHAR)
Message(TEXT)
Image(BLOB) 
```

这是 php 脚本的代码（文件名是`getJson.php`）：

```
<?php
$username = "root";
$database = "testdbb";

mysql_connect (localhost, $username);
@mysql_select_db ($database) or die ("ERROR");
$query = "SELECT *  FROM test";
$result = mysql_query($query) or die (mysql_error());
$num = mysql_numrows($result);
mysql_close();

while ($r = mysql_fetch_assoc($result)){
    $rows[] = $r;
}
echo json_encode ($rows);
?> 
```

你的名字`UIViewController`是`CompteInternet`。我定义了一个常量 ( `#define KGetUrl @"http://localhost/getJson.php"`)，并在`CompteInternet.m`.

这是方法中的代码`UITableView`：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    NSURL *url = [NSURL URLWithString:KGetUrl];
    NSData *data = [NSData dataWithContentsOfURL:url];
} 
```

我像这样检索图像：

```
UIImage * image = [UIImage imageWithData:data]; 
```

检索图像后，我想在 tableView 中显示它

```
cell.imageView.image = image; 
```

但它不起作用，所以我添加了一个`UIImageView`并命名它，`Image1`以便我可以显示图像：

```
[image1 setImage:image]; 
```

但它也不起作用。我尝试了另一种解决方案`NSDictionary`：

```
NSDictionary *info = [json objectAtIndex:indexPath.row];
cell.textLabel.text = [info objectForKey:@"Name"]; 
```

它向我展示了成功的结果，但它没有向我展示图像并且我没有得到任何错误。

# python - IronPython：使用参数调用`input()`时出现AttributeError

> ID：12759010
> 
> 赞同：1
> 
> 时间：2012-10-06T10:35:33.860
> 
> 标签：python, visual-studio, ironpython

虽然调用`input()`不带参数 ( `x = input()`) 的函数可以正常工作，但带参数 ( ) 调用`input()`会`x = input("Type something")`导致以下错误：

> AttributeError：“_DebuggerOutput”没有属性“错误”。

我究竟做错了什么？

**额外细节：**

*   我在 Visual Studio 2010 中使用 IronPython。
*   我使用的 Python 版本是 3.2.3（`print(sys.version))`输出`3.2.3`）。

# php - 是 `and` 最佳实践

> ID：12759011
> 
> 赞同：0
> 
> 时间：2012-10-06T10:35:43.610
> 
> 标签：php, syntax

[我在http://www.php.net/manual/en/function.str-split.php#78040](http://www.php.net/manual/en/function.str-split.php#78040)遇到了这个脚本

```
 /**
     Returns a formatted string based on camel case.
     e.g. "CamelCase" -> "Camel Case".
    */
    function FormatCamelCase( $string ) {
            $output = "";
            foreach( str_split( $string ) as $char ) {
                    strtoupper( $char ) == $char and $output and $output .= " ";
                    $output .= $char;
            }
            return $output;
    } 
```

古玩部分是：

```
strtoupper( $char ) == $char and $output and $output .= " "; 
```

我的问题

*   详细分解`strtoupper( $char ) == $char and $output and $output .= " ";`及其有效的原因
*   这不适用于`break`, `return`，`echo`但它适用于任何功能，包括`print`
*   这是最佳实践吗
*   这样的代码有什么优点或缺点吗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T10:38:58.953

它与

```
if (strtoupper( $char ) == $char) {
    if ($output) {
         $output .= " ";
    }  
} 
```

对于代码`A and B`，如果评估为真，`B`将执行。`A`

和is之间的区别比它们之间的`&&`, `and`is`&&`具有更高的优先级。`and``.=`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-06T10:49:49.577

[http://en.wikipedia.org/wiki/Short-circuit_evaluation](http://en.wikipedia.org/wiki/Short-circuit_evaluation)

正如其他答案所表明的那样，只有在前面的语句==true 时，才会执行每个后续语句。

这在代码中更相关，例如： if(foo and bar) { //do something }

如果 foo==false 则无需浪费时间评估 bar。

我不能说我在布尔逻辑之外使用短路评估来发挥我的优势，并且为了其他编码人员查看我的代码，我可能不会现在开始。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T10:41:24.903

```
 strtoupper( $char ) == $char and $output and $output .= " "; 
```

是一种简写，如果首先检查它是否是大写字符，如果是的话，他会转到下一个并检查是否`$output`不为空，然后在 $output 中添加一个空格

这不是最佳做法，但使用一个衬垫感觉很酷

优点是它很酷缺点是你需要一遍又一遍地阅读它才能理解它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T10:40:58.670

strtoupper( $char ) == $char 和 $output 和 $output .= " ";

方法

```
if(strtoupper( $char ) == $char && $output && $output.=" "){
// if string is equal than it checks for $output
//is that present?
// if  present than it checks for $output value
//and add a space to that if everything works fine than go to true part
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-06T16:26:28.790

您在这里有一个表达式，它由三个与逻辑`and`运算符连接的子表达式组成：

```
 strtoupper( $char ) == $char and $output and $output .= " ";
                             A      and    B    and       C 
```

由于运算符优先级，顺序是从左到右的直接顺序。

因为那是你可以通过的。我想你明白 A 和 B 和 C 自己做了什么。然而，如果这三个中的任何一个将评估`false`退出执行整个表达式，PHP 将会。该表达式一直运行到`false`正在执行（否则 PHP 无法说出结果，请参阅[Short-circuit evaluation](http://en.wikipedia.org/wiki/Short-circuit_evaluation)）。

它显示：字符为大写并输出，并在输出中添加空格。

如果字符不是大写，那句话就是错误的。所以它不会持续超过：

上面写着：字符不是大写的。

让我们拿这句话来说，这个字符是大写的。但没有输出：

上面写着：字符是大写的，没有输出。

最后让我们说有输出：

它显示：字符为大写并输出，并在输出中添加空格。

将编程语言视为一种用来表达某些东西的语言。

这只是一种常见的表达方式。有些程序员不习惯用它来编写富有表现力的表达式，在他们的心智模型中，它更像是基本的 if then else 写作风格：

```
if (A) then if (b) then C. 
```

上面写着：如果字符是大写的，那么如果输出，则在输出中添加一个空格。

做最适合你的事。只需阅读代码。它有助于：

```
strtoupper( $char ) == $char and $output and $output .= " "; 
```

字符为大写并输出并添加空格输出。

# python - PIL中的图像转换，pgm文件错误

> ID：12759013
> 
> 赞同：4
> 
> 时间：2012-10-06T10:35:52.397
> 
> 标签：python, image-processing, python-imaging-library

当尝试在 PIL python 库中执行以下操作时：

```
Image.open('Apple.gif').save('Apple.pgm') 
```

代码失败：

```
 Traceback (most recent call last):
  File "/home/eran/.eclipse/org.eclipse.platform_3.7.0_155965261/plugins/org.python.pydev_2.6.0.2012062818/pysrc/pydevd_comm.py", line 765, in doIt
    result = pydevd_vars.evaluateExpression(self.thread_id, self.frame_id, self.expression, self.doExec)
  File "/home/eran/.eclipse/org.eclipse.platform_3.7.0_155965261/plugins/org.python.pydev_2.6.0.2012062818/pysrc/pydevd_vars.py", line 376, in evaluateExpression
    result = eval(compiled, updated_globals, frame.f_locals)
  File "<string>", line 1, in <module>
  File "/usr/lib/python2.7/dist-packages/PIL/Image.py", line 1439, in save
    save_handler(self, fp, filename)
  File "/usr/lib/python2.7/dist-packages/PIL/PpmImagePlugin.py", line 114, in _save
    raise IOError, "cannot write mode %s as PPM" % im.mode
IOError: cannot write mode P as PPM 
```

该代码在转换为 BMP 时工作正常，但 JPG 也失败。奇怪的是，不同的文件（JPG 到 PGM）可以正常工作。

其他格式转换。那是：

```
Image.open('Apple.gif').save('Apple.bmp') 
```

作品。

知道为什么吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-06T10:46:27.083

您需要将图像转换为`RGB`模式才能使其正常工作。

```
im = Image.open('Apple.gif')
im = im.convert('RGB')
im.save('Apple.pgm') 
```

# php - 获取适用于所有服务器的 php 脚本目录名称

> ID：12759018
> 
> 赞同：-1
> 
> 时间：2012-10-06T10:36:23.153
> 
> 标签：php

我在路径中有一个 index.php 文件：[http ://www.example.com/inc/index.php](http://www.example.com/inc/index.php)

现在我需要获取到 inc 目录的路径，例如[http://www.example.com/inc/](http://www.example.com/inc/)

这是我在 index.php 中写的那行

```
'http://' . $_SERVER['SERVER_NAME'] . dirname($_SERVER['PHP_SELF']) . '/' 
```

它在apache服务器中工作。它在我的客户端系统中不起作用。他不确定他使用的是哪个服务器，但告诉了 apache 以外的其他内容。

非常感谢任何输入。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T10:54:33.417

这会给，

[http://www.example.com/inc/](http://www.example.com/inc/)

```
 <?php

     echo "http://".$_SERVER['HTTP_HOST'].dirname($_SERVER['PHP_SELF']) . '/';

 ?> 
```

实际上，什么不起作用？如果您没有得到 [http://www.example.com/inc/](http://www.example.com/inc/)加载的索引页面，则 index.php 在服务器中未设置为默认值。如果是 IIS 服务器，我认为默认页面是 index.html、default.html、default.asp - 请检查这个，而不是 index.php

为了进一步阅读，

[http://www.htmlgoodies.com/beyond/webmaster/article.php/3473251/Index-or-Default.htm](http://www.htmlgoodies.com/beyond/webmaster/article.php/3473251/Index-or-Default.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T10:46:05.563

dirname 函数正在查看文件系统。如果您尝试解析 URL 以访问目录，我建议您使用以下内容：

```
$pathComponents = explode('/', $_SERVER['PHP_SELF']);
array_pop($pathComponents);
$dirName = implode('/', $pathComponents) . '/'; 
```

这应该返回“inc/”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T10:53:50.063

你试过 $_SERVER['PATH_TRANSLATED'] 吗？请注意，在 Apache 2 上，这没有明确设置（需要配置设置）。请参阅此处：[PHP $_SERVER 手册](http://php.net/manual/en/reserved.variables.server.php)。

在我看来，这可能会对您有所帮助，但我无法访问我的托管空间中的 httpd.conf 文件来确认。

希望这可以帮助！

科布斯

# mysql - 存储过程和 mysql_insert_id 问题

> ID：12759023
> 
> 赞同：1
> 
> 时间：2012-10-06T10:37:33.703
> 
> 标签：mysql, stored-procedures, last-insert-id

我的问题是：我创建了一个从 php 到 mysql 的存储过程。现在，在有人谈论这种做法之前，该程序运行良好。问题是这样的，当我从 php 调用该过程并且我知道已输入一条记录时，mysql_insert_id() 返回 0...任何想法为什么？

哦，是的，我的 id 字段是 AUTO_INCREMENT 和 PRIMARY KEY

ps 如果有一种简单的方法可以在这里格式化我的代码，请告诉我。我把pre放在html中，但似乎效果不太好。

提前泰。

```
$PROCEDURE_INSERT_UPDATE_BOARD =
"
创建过程 InsertUpdateBoard(IN `pNewBoardUUID` CHAR(36),
                                   在 `pOldBoardUUID` CHAR(36) 中，
                                   在 `pSimName` VARCHAR(40) 中，
                                   在 `pOwnerName` VARCHAR(64) 中，
                                   在 `pOwnerUUID` CHAR(36) 中，
                                   在 `pLandmark` VARCHAR(80) 中，
                                   在 `pVersion` VARCHAR(10) 中，
                                   在`pManagerUUID` CHAR(36) 中，
                                   在 `pBoardURL` CHAR(80) 中，
                                   IN `pPassword` CHAR(8))
    开始   
        调用 InsertUpdateSims(`pSimName`);
        调用 InsertUpdateAvatars(`pOwnerName`, `pOwnerUUID`);

        插入板（`boardUUID`，`simId`，`ownerId`，`landmark`，
                                   `version`, `managerId`, `boardURL`, `password`)
                            值（`pOldBoardUUID`，                                      
                            （从 2starsglobal.sims 中选择 rS.id 作为 rS
                                    其中 rS.name=`pSimName`),
                            （从 2starsglobal.avatars 中选择 rA.id 作为 rA
                                    其中 rA.UUID = `pOwnerUUID`),
                            `pLandmark`，`pVersion`，
                            （从 2starsglobal.avatars 中选择 rA2.id 作为 rA2
                                    其中 rA2.UUID = `pManagerUUID`),
                            `pBoardURL`,
                            `pPassword`)
        在重复键更新`boardUUID`=`pNewBoardUUID`，
                    `地标`=`pLandmark`，`版本`=`pVersion`，
                    `boardURL`=`pBoardURL`;
    结尾
";

```

和 PHP 代码

```
function InsertUpdateBoard($boardNewUUID, $boardOldUUID, $simName, 
                           $ownerName, $ownerUUID, $boardLandmark,
                           $versionNumber, $managerUUID, $boardURL)
{ 
    $password = generatePassword(8);

    $query = "CALL InsertUpdateBoard('$boardNewUUID', '$boardOldUUID', '$simName', 
                                         '$ownerName', '$ownerUUID', '$boardLandmark', 
                                         '$versionNumber', '$managerUUID', '$boardURL',
                                         '$password')";

    mysql_query($query) or die("ERROR:QUERY_FAILED " . mysql_error());  

    if(mysql_affected_rows() > 0)
    {
        if(mysql_insert_id() > 0)
        {    
            echo "SUCCESS,$password";
        }
        else 
        {
            echo "SUCCESS"; 
        }
    }
    else
    {
        echo 'FAILED:BOARD_REGISTRATION_UPDATE'; 
    }       

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T15:40:22.550

用 google 十秒钟找到[这个页面](http://php.net/manual/en/mysqli.insert-id.php)

> 注意，如果你调用一个 MySQL 存储过程插入一条新记录，然后引用 $db->insert_id; 你会得到 0 回来，而不是最后插入的 ID。
> 
> 因此，有必要在 MySQL 存储过程中添加一行，例如
> 
> 选择 last_insert_id() 作为 intRecordKey；
> 
> 在插入之后，以便查询将返回新的键值。

# service - 以编程方式安装/更新/删除包

> ID：12759028
> 
> 赞同：1
> 
> 时间：2012-10-06T10:38:10.253
> 
> 标签：service, osgi, bundle, declarative

我是 osgi 的新手，想知道是否有可能有一个集中的机制来更新、安装或删除包。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T09:15:40.730

是的。您可以以编程方式执行此操作，这意味着有大量捆绑软件可以为您提供开箱即用的解决方案。它非常简单（而且非常有趣），以至于对于许多人来说，他们的第一个捆绑软件之一就是一个小的“管理代理”（正如 OSGi 规范所称的那样）。

最简单的解决方案是[Apache File Install](http://felix.apache.org/documentation/subprojects/apache-felix-file-install.html)。它跟踪一个目录并从那里安装/卸载。将它与 Google Drive 或 Dropbox 结合起来，您就拥有了一个大规模的全自动部署模型（它还处理配置，这非常重要）。

OSGi 规范现在有一个 OSGi Bundle Repository (OBR) 规范。这是一个非常强大的模型来描述允许管理代理计算/利用依赖关系的依赖关系（不仅仅是捆绑包）。这在 Felix 上得到了开箱即用的支持。

有无数管理 OSGi 框架的解决方案。Paremus、IBM Tivoli、ProSyst 和许多其他公司提供商业支持。并通过 Apache ACE 和 fusebundles 开源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T11:18:05.227

有两种通用方法可以做到这一点：让您的应用程序从托管捆绑包的存储库中“拉”捆绑包并自行更新，或者让外部供应应用程序“推送”捆绑包到您的应用程序。

对于拉式解决方案，我会说有：

*   Eclipse P2 由 Eclipse 的更新管理器使用。成熟、稳定，但可能有点难以进入，我也不确定 P2 是否可以与 Eclipse Equinox 以外的其他 OSGi 运行时一起使用
*   Apache Bundle Repository (OBR) 更简单一些，它在 OSGi 规范中。

对于推送解决方案，我想说看看 Apache Ace，从您的问题来看，我认为这最接近您想要做的事情。

# python - 重定向所有对 www 的请求。到根域

> ID：12759030
> 
> 赞同：3
> 
> 时间：2012-10-06T10:38:33.417
> 
> 标签：python, django, heroku, redirect, dns

我需要将来自的所有请求重定向`www.mysite.com`到`mysite.com`

我[在 rails 找到了解决方案](http://blog.dynamic50.com/2011/02/22/redirect-all-requests-for-www-to-root-domain-with-heroku/)，但是如何在 Django/Python 中做到这一点？

我能找到的唯一解决方案是由 GoDaddy 上的版主发布的。似乎我无法通过 GoDaddy 的 DNS 管理器解决此类问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2017-09-15T07:03:51.893

在 中创建自己的中间件`[PROJECT_NAME]/middleware.py`，如下所示：

```
from django.conf import settings
from django.http import HttpResponsePermanentRedirect
from django.utils.deprecation import MiddlewareMixin

class RemoveWWWMiddleware(MiddlewareMixin):
    """
    Based on the REMOVE_WWW setting, this middleware removes "www." from the
    start of any URLs.
    """
    def process_request(self, request):
        host = request.get_host()
        if settings.REMOVE_WWW and host and host.startswith('www.'):
            redirect_url = '%s://%s%s' % (
                request.scheme, host[4:], request.get_full_path()
            )
            return HttpResponsePermanentRedirect(redirect_url) 
```

然后，在您的项目中`settings.py`：

*   添加`REMOVE_WWW = True`
*   并添加`[PROJECT_NAME].middleware.RemoveWWWMiddleware`到`MIDDLEWARE`列表中，在 Django 的 SecurityMiddleware 之后，最好在 Django 的 Common Middleware 之前。
*   另外，当然，请确保您没有设置`PREPEND_WWW = True`

该中间件基于[Django 的 CommonMiddleware](https://docs.djangoproject.com/en/1.11/_modules/django/middleware/common/#CommonMiddleware)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T11:47:02.890

解决了这个问题：

```
from django.http import HttpResponsePermanentRedirect

class WWWRedirectMiddleware(object):
    def process_request(self, request):
        if request.META['HTTP_HOST'].startswith('www.'):
            return HttpResponsePermanentRedirect('http://example.com') 
```

# windows-runtime - 尝试在 WinRT 中创建名称包含冒号的文件夹时出现 HRESULT E_FAIL

> ID：12759031
> 
> 赞同：0
> 
> 时间：2012-10-06T10:38:33.750
> 
> 标签：windows-runtime, winrt-xaml

拥有一个 StorageFolder 对象并尝试创建一个名称中包含冒号的文件夹（不是在开头或结尾）会导致 COM 错误并显示 HRESULT 80004005 (HRESULT E_FAIL)。

示例：await ApplicationData.Current.TemporaryFolder.CreateFolderAsync("abc:xyz", CreationCollisionOption.OpenIfExists);

如果冒号在开头或结尾，我会收到 HRESULT 8007007b 消息“文件名、目录名或卷标语法不正确”。没关系。

我检查了其他无效字符，但只有一个冒号导致 E_FAIL。

如果用户输入文件夹名称，这可能会出现问题。解决方法当然是简单地检查文件名中的冒号。

有谁知道 E_FAIL 错误的可能原因？我假设 COM 认为文件夹名称以 URI 开头，但当然无法弄清楚它是哪种 URI。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T12:38:35.583

好吧，COM 臭名昭著的错误报告又回来了。多年来，我们已经被 .NET 的优秀和信息丰富的例外宠坏了，但那块地毯被 WinRT 拉走了。COM 是底层互操作机制，HRESULT 是报告错误的方式。

E_FAIL 是规范错误代码，您可以获得的唯一描述性文本是“未指定错误”。准确地说，处理该代码的 Microsoft 程序员不能或不想产生更具描述性的错误。另一个很棒的词是 E_UNEXPECTED，它翻译为“灾难性失败”。术语“灾难性”实际上是指错误消息的价值（如果您得到它）。

推测一下，“abc:xyz”路径字符串实际上是有效的。它指的是一个名为“xyz”的备用数据流，存储在文件“abc”中。因此，起初检查路径字符串不会引起臭味。但是，您正在使用该名称创建文件夹，而不是文件。文件夹不能有备用数据流。显然，这是很晚才发现的，为时已晚，无法产生更准确的错误代码。它*应该*产生了一个 Windows 错误，并且它们通过与 0x8007000 进行或运算来适当地包装在 HRESULT 中，但由于无法猜测的原因，这并没有完成。

无法发送有关此的反馈，Windows 组没有 DevDiv 的 connect.microsoft.com 等效项。幸好你知道是什么导致了错误。

# c++ - c++二维指针类数组报错（带openframeworks）

> ID：12759034
> 
> 赞同：-1
> 
> 时间：2012-10-06T10:39:00.893
> 
> 标签：c++, class, multidimensional-array, openframeworks

我正在尝试创建一个二维指针类数组。因为我需要一个类对象网格。现在我收到一条错误消息：

testApp.cpp|53|错误：'((testApp*)this)->testApp::myCell[i]'中的'operator[]'不匹配|

```
// this is cell.h
class Cell
{

public:
    int x;
}; 
```

.

```
// this is testApp.h

class testApp : public ofBaseApp{
public:

    int width;
    int height;
    int Grid;
    int space;
    float wWidth;
    float wHeight;
    Cell myCell;

    void setup();
    void update();
    void draw();
}; 
```

。// 这是 testapp.cpp // 这是错误所在

```
 void testApp::setup(){

Cell *myCell[5][5];
myCell[1][0]->x =2;
myCell[2][0]->x =1;
myCell[3][0]->x =23;
myCell[4][0]->x =4;
myCell[5][0]->x =7;
myCell[0][0]->x =4;

}

//--------------------------------------------------------------
void testApp::draw(){

ofSetColor(255,255,0);
for (int i = 0; i<5; i++) {
    int q = myCell[i][0]->x;     // i get the error here. 
    ofCircle(20*q,20*q,50);
}
} 
```

我不明白为什么在处理 myCell 指针和 x 参数时会出现问题。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T11:49:34.517

您有两个名为 的对象`myCell`。第一个是`testApp`with type的成员`Cell`：

```
class testApp : public ofBaseApp {
  public:
    // ...
    Cell myCell;
    // ...
} 
```

另一个名为的对象`myCell`是在您的`testApp::setup()`函数中创建的，类型为`array of 5 array of 5 pointer to Cell`.

```
void testApp::setup() {
    Cell *myCell[5][5]; // This hides the previous myCell
    // ...
} 
```

在`setup()`函数中，您隐藏了 member `myCell`。当函数结束时，数组版本的`myCell`超出范围并且不再存在。因此，首先，您要修复成员的定义`myCell`：

```
class testApp : public ofBaseApp {
  public:
    // ...
    Cell* myCell[5][5];
    // ...
} 
```

并删除`myCell`in的定义`setup()`：

```
void testApp::setup() {
    // ...
} 
```

您现在只有一个名为的对象`myCell`，它是一个指向`myCell`. 但是现在我们还有另一个问题要解决。你有这个指针数组，但它们当前没有指向任何地方——它们是*uninitialized*。您不能只是尝试这样做，`myCell[1][0]->x`因为`Cell`在 index 处没有指向对象`[1][0]`。

解决此问题的一种方法是遍历整个数组，`new`用于为所有`Cell`s 动态分配空间。你可以这样做：

```
void testApp::setup() {
    for (int i = 0; i < 5; i++) {
        for (int j = 0; j < 5; j++) {
            myCell[i][j] = new Cell();
        }
    }
    // ...
} 
```

但是，更好的方法是根本不使用动态分配 ( `new`)。如果您简单地定义`myCell`为 的数组`Cells`，而不是指向 的指针数组`Cell`，则`Cell`s 将自动分配到堆栈上。这涉及将成员定义更改为：

```
class testApp : public ofBaseApp {
  public:
    // ...
    Cell myCell[5][5];
    // ...
} 
```

现在，当您`testApp`创建实例时，将自动分配数组。现在您可以按如下方式设置数组的内容：

```
void testApp::setup() {
    myCell[1][0].x = 2;
    myCell[2][0].x = 1;
    // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T10:46:39.370

似乎您正在尝试引用`myCell`from `testApp::setup()`in `testApp::draw()`，但您只能访问`testApp::myCell`那里的成员，该成员属于类型`Cell`，因此不支持您想要的操作。

**编辑**

您提到的崩溃的一个可能来源可能是您的`setup()`功能。您在那里使用未初始化的指针。通过您在评论中提到的更改，您还应该将设置中的代码更改为：

```
void testApp::setup(){
  //remove the next line to not shadow the member declaration
  //Cell *myCell[5][5];
  //replace -> by . as you are not handling pointers anymore
  myCell[1][0].x =2;
  myCell[2][0].x =1;
  myCell[3][0].x =23;
  myCell[4][0].x =4;
  myCell[5][0].x =7;
  myCell[0][0].x =4;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T10:58:43.947

您的变量`myCell`仅在`testApp::setup`. 因此，您无法在`testApp::draw`. 考虑让它成为你`testApp`班级的一个属性。

# android - Robotium ClickOnButton(int ID) 方法导致“junit.framework.AssertionFailedError：索引为 2131034130 的按钮不可用！”

> ID：12759039
> 
> 赞同：4
> 
> 时间：2012-10-06T10:39:48.567
> 
> 标签：android, robotium

我正在使用 robotsium 进行测试，但无法弄清楚如何在没有文本的情况下单击按钮。测试失败并出现跟踪：

> junit.framework.AssertionFailedError：索引为 2131034130 的按钮不可用！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-07T18:01:42.833

索引系统是出于黑盒测试的原因所以如果您知道要单击的视图的资源 ID，您可以使用`solo.getView(R.id)`来获取对象，然后使用`solo.clickOnView(View view)`来单击它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T10:43:55.317

我发现实际的方法参数不是ID，而是“索引”，只要它意味着。所以我的解决方法是：

```
private void clickOnButtonByID(int ID) {
    // get a list of all ImageButtons on the current activity
    List<Button> btnList = solo.getCurrentButtons();
    for (int i = 0; i < btnList.size(); i++) {
        Button btn = btnList.get(i);
        // find button by id
        if (btn.getId() == ID) {
            // click on the button using index (not id !!!)
            solo.clickOnButton(i);
            // check if new activity is the 'About'
        } else {
            // other code
        }
    }
} 
```

# javascript - 追加表格行时不复制按钮

> ID：12759041
> 
> 赞同：3
> 
> 时间：2012-10-06T10:40:34.950
> 
> 标签：javascript, jquery, html

我在将按钮复制到附加行时遇到问题：

我有一个 jsfiddle：http: [//jsfiddle.net/Bjqr6/37/](http://jsfiddle.net/Bjqr6/37/)

在 jsfiddle 中，如果单击“Open Grid”链接并选择“True or False”按钮或“Yes or No”按钮，它将在底部显示这些按钮。

现在通过单击打开其中一个按钮（按钮将变为绿色）

现在的问题是，如果您单击“添加问题”按钮将按钮附加到表格行中，您会看到它不会将按钮复制到表格行中。

有谁知道为什么它不复制按钮并将它们附加到行中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T12:18:07.367

我基本上加了

```
var $ans = context.find('.answerBtnsOn');    
var $answer = $("<div class='answer'>Answer:<br/></div>").append($ans.val()); 
```

请参阅[http://jsfiddle.net/Bjqr6/40/](http://jsfiddle.net/Bjqr6/40/)。这是你想要的吗？

# sql-server - 即使停用词列表为空，如果包含停用词，全文搜索也不起作用

> ID：12759042
> 
> 赞同：18
> 
> 时间：2012-10-06T10:40:41.830
> 
> 标签：sql-server, full-text-search, stop-words, sql-server-2012-express

我希望能够搜索每个单词，所以我已经清除了停用词列表。比我重建的索引。但不幸的是，如果我输入一个带有停用词的搜索表达式，它仍然不会返回任何行。如果我只省略停用词，我会得到结果。例如“双重磨损留在原地” - 没有结果，“双重磨损留在原地” - 我得到的结果实际上也包含“in”。

有谁知道为什么会这样？我正在使用 SQL Server 2012 Express。

非常感谢！

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-06T11:24:04.337

同时，我设法解决了这个问题。问题是我有自己的停止列表，它确实是空的，但我的全文目录不是与我自己的停止列表相关联，而是与系统之一相关联。以下是解决停用词和全文搜索问题的几个有用查询：

查询停用词（不返回系统停用词！）：

```
select * from sys.fulltext_stopwords 
```

查询停止列表（不返回系统列表！）：

```
select * from sys.fulltext_stoplists 
```

检查目录中包含哪些单词：

```
SELECT * FROM sys.dm_fts_index_keywords(DB_ID('dbname'), OBJECT_ID('tablename')) 
```

检查关联：

```
select fulltext_catalog_id,stoplist_id, * from sys.fulltext_indexes; 
```

关闭停止列表：

```
ALTER FULLTEXT INDEX ON CremeSearchFT SET STOPLIST = OFF 
```

我希望它可以帮助某人。:)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-07-30T05:50:48.160

根据我的研究，它与全文索引停止列表选项有关，这是全文索引的主要属性之一。如果您将此选项设置为“系统”，则“系统停止列表”中包含的所有关键字都将不适用于您的`CONTAINS()`子句，不幸的是，此类情况将没有结果集。解决方案;

将此选项设置为“关闭”，这将绕过您的语言集中的停止列表检查。例如英语中的*you ，土耳其语中的**sen*。这些被标记为停用词，并且对于在此类搜索中排除 SQL Server 引擎是有意义的，除非您设置“系统”选项。所以，不要使用“系统”选项。为此，请在您的表存在的 db 上运行以下脚本：

```
ALTER FULLTEXT INDEX ON table_name SET STOPLIST = OFF 
```

创建自己的停止列表。在这种情况下，您可以定义您的特殊停用词并创建特定的停用词列表。因此，只有这些将被处理，因为它们对 SQL Server 引擎没有任何意义。创建后，您可以通过运行以下脚本开始使用它：

```
CREATE FULLTEXT STOPLIST myStoplist

GO

ALTER FULLTEXT STOPLIST [myStoplist] ADD 'you' LANGUAGE 'English'

GO

ALTER FULLTEXT INDEX ON table_name SET STOPLIST = [myStoplist]

GO 
```

我希望这会有所帮助:) 祝你好运......

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-07-06T08:34:34.030

如果有人感兴趣，我在 apolka 的答案中充实了检查关联查询，以提供更清晰的结果：

```
--Check the association:
SELECT
    ft_c.name AS [Catalog],
    s.name AS [Schema],
    o.name AS [Table],
    [StopList] =
    CASE
        WHEN ft_i.stoplist_id IS NULL THEN 'None'
        ELSE ISNULL(ft_sl.NAME, 'System')
    END
FROM 
    sys.fulltext_indexes AS ft_i LEFT OUTER JOIN
    sys.fulltext_stoplists AS ft_sl ON ft_sl.stoplist_id = ft_i.stoplist_id INNER JOIN
    sys.fulltext_catalogs AS ft_c ON ft_c.fulltext_catalog_id = ft_i.fulltext_catalog_id INNER JOIN
    sys.objects AS o ON o.object_id = ft_i.object_id INNER JOIN
    sys.schemas AS s ON s.schema_id = o.schema_id 
```

SSMS 中缺少这些东西太愚蠢了！

# javascript - 选择 t:selectManyCheckbox 中的所有复选框

> ID：12759046
> 
> 赞同：2
> 
> 时间：2012-10-06T10:41:10.613
> 
> 标签：javascript, jsf, jsf-2, checkbox, selectmanycheckbox

我使用 JSF 2.0 创建了 Web 应用程序，其中有许多复选框。我想在单击全选复选框时选中这些复选框。

我有以下代码

```
<t:selectBooleanCheckbox value="#{UserRegistration.selectAll}" onclick="selectAll(this)" />

<t:selectManyCheckbox value="#{UserRegistration.pagesSelected}" layout="pageDirection"  layoutWidth="4">
    <f:selectItem itemValue="registerForPatentss" itemLabel="Register New Applicant"/>
    <f:selectItem itemValue="success" itemLabel="Register New Project" />
    <f:selectItem itemValue="getReportss" itemLabel="Project Reports" />
    <f:selectItem itemValue="searhPatentss" itemLabel="Search For Project" />
    <f:selectItem itemValue="addUserss" itemLabel="Add User Account" />
    <f:selectItem itemValue="logPatentSystemss" itemLabel="System Log" />
    <f:selectItem itemValue="userlistss" itemLabel="Details Of Registered Users" />
</t:selectManyCheckbox> 
```

javascript是

```
<script language="javascript">
    function selectAll(checkbox) {
        alert('called me == ' + checkbox.checked);

        var elements = checkbox.form.elements;
        if (checkbox.checked==true) {
            alert('selecting all');
            for (var i = 0; i &lt; elements.length; i++) {
                var element = elements[i];
                alert('selecting all ' + element.checked + '==' + element.id + '==');
                if (/checkboxId$/.test(element.id)) {
                    alert('inside...')
                    element.checked = checkbox.checked;
                }
            }
        }
     }
</script> 
```

但是它不起作用。

为了进行测试，我添加了`alert('selecting all ' + element.checked + '==');`但是为此我得到了输出，`selecting all ====`即我没有得到`element.id`.

当我改变`<t:selectManyCheckbox`时，`<h:selectManyCheckbox`我得到了价值。

知道我做错了什么吗？

## 编辑 1

HTML 生成的输出是

```
<table id="favNumber4">
<tr><td><label><input type="checkbox" name="favNumber4" checked="checked" value="1" />&#160;Joomla Websites (Fahim M Parkar)</label></td><td><label><input type="checkbox" name="favNumber4" checked="checked" value="2" />&#160;iPhone Application (Fahim M Parkar)</label></td></tr>
<tr><td><label><input type="checkbox" name="favNumber4" checked="checked" value="3" />&#160;Project 001 (New Applicant Two)</label></td><td><label><input type="checkbox" name="favNumber4" value="4" />&#160;Project 002 (New Applicant Two)</label></td></tr>
<tr><td><label><input type="checkbox" name="favNumber4" value="5" />&#160;Project 003 (New Applicant Two)</label></td><td><label><input type="checkbox" name="favNumber4" value="6" />&#160;Project 004 (New Applicant Two)</label></td></tr>
<tr><td><label><input type="checkbox" name="favNumber4" value="7" />&#160;PP1 (Testing Applicant)</label></td><td><label><input type="checkbox" name="favNumber4" value="8" />&#160;PP2 (Testing Applicant)</label></td></tr>
<tr><td><label><input type="checkbox" name="favNumber4" value="9" />&#160;TA - PR001 (Testing Applicant)</label></td><td><label><input type="checkbox" name="favNumber4" value="10" />&#160;XXXXX 1 (XXXXX)</label></td></tr> 
```

## 编辑 2

请注意，我还有更多复选框，如下所示。

```
<h:selectManyCheckbox value="#{UserRegistration.rightSelected}" id="myRight">
    <f:selectItem itemValue="add" itemLabel="Add"/>
    <f:selectItem itemValue="delete" itemLabel="Delete" />
    <f:selectItem itemValue="edit" itemLabel="Edit" />
    <f:selectItem itemValue="invite" itemLabel="Invite For Projects" />
</h:selectManyCheckbox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T12:33:54.163

以下是我所拥有的......

```
<script language="javascript" type="text/javascript">
    function selectAllProjects() {
        var iLen=userRegisterForm.elements.length;
        for (var i=0; i&lt;iLen; i++) {
            if (document.userRegisterForm.elements[i].type == "checkbox" &amp;&amp; document.userRegisterForm.elements[i].value>=1) {
                document.userRegisterForm.elements[i].checked = true;
            }
        }
    }

    function deselectAllProjects() {
        var iLen=userRegisterForm.elements.length;
        for (var i=0; i&lt;iLen; i++) {
            if (document.userRegisterForm.elements[i].type == "checkbox" &amp;&amp; document.userRegisterForm.elements[i].value>=1) {
                document.userRegisterForm.elements[i].checked = false;
            }
        }
    }

</script>

| <a onclick="selectAllProjects();">Select All</a> |
<a onclick="deselectAllProjects();">Clear All</a> | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T11:27:34.053

我无法在服务器端提供帮助，但在您的客户端代码中：

```
> <script language="javascript"> 
```

语言属性在 HTML 4 中已弃用，并已从 HTML5 中删除。type 属性在 HTML 4 中是必需的，在 HTML5 中是可选的。它可以设置为`type="text/javascript"`，但实际上没有必要。

```
>     function selectAll(checkbox) {
>         alert('called me == ' + checkbox.checked);
> 
>         var elements = checkbox.form.elements;
>         if (checkbox.checked==true) { 
```

选中的属性是布尔值，所以你可以这样做：

```
 if (checkbox.checked) { 
```

等等。*可能更简单地循环元素并将复选框设置为与checkbox*相同的“选中状态” ，例如

```
 var checked = checkbox.checked;

  for (var i=0, iLen=elements.length; i<iLen; i++) {

    if (elements[i].type == "checkbox") {
      elements[i].checked = checked;
    }
  } 
```

# arrays - Excel VBA UDF - 无法将 UDF 产生的变量数组作为第二个 UDF 中的输入传递

> ID：12759047
> 
> 赞同：1
> 
> 时间：2012-10-06T10:41:21.330
> 
> 标签：arrays, excel, vba, user-defined-functions

我正在努力使用由我编写的 UDF 产生的数组作为另一个 UDF 的参数。

该函数返回#value 错误。

我不知道问题出在哪里。

下面是代码。

任何帮助/建议将不胜感激；）

这个有效..

```
Function fTA_GetSMA(ByRef varData As Variant, ByRef lPeriod As Long) As Variant

' This function computes a simple moving average over a defined period.

Dim l As Long
Dim dSum As Double
Dim var() As Variant

    Application.Volatile
    varData = varData.Value2
    ReDim var(LBound(varData, 1) To UBound(varData, 1), 1)
    For l = LBound(varData, 1) To UBound(varData, 1)
        If l < lPeriod Then
            dSum = dSum + varData(l, 1)
        ElseIf l = lPeriod Then
            dSum = dSum + varData(l, 1)
            var(l, 1) = dSum / lPeriod
        ElseIf l > lPeriod Then
            dSum = dSum + varData(l, 1) - varData(l - lPeriod, 1)
            var(l, 1) = dSum / lPeriod
        End If
    Next l
    fTA_GetSMA = var 
```

结束功能

**这一个也有效。**

Function fTA_GetTR(ByRef varData As Variant) As Variant ' 该函数计算金融时间序列的真实范围。' 输入数据必须是包含 O、H、L、C 的矩阵。

```
Dim var() As Variant
Dim l As Long
Dim dMaxTR As Double
Dim dMinTR As Double

    Application.Volatile
    varData = varData.Value2
    ReDim var(LBound(varData, 1) To UBound(varData, 1), 1)
    For l = LBound(varData, 1) To UBound(varData, 1)
        If l = 1 Then
            dMinTR = varData(l, 3)
            dMaxTR = varData(l, 2)
        ElseIf l > 1 Then
            dMaxTR = Application.WorksheetFunction.Max(varData(l, 2), varData(l - 1, 4))
            dMinTR = Application.WorksheetFunction.Min(varData(l, 3), varData(l - 1, 4))
        End If
        var(l, 1) = dMaxTR - dMinTR
    Next l

    fTA_GetTR = var 
```

结束功能

**这是一个不工作的..**

Function fTA_GetATR(ByRef varData As Variant, ByRef lPeriod As Long) As Variant ' 该函数计算给定周期数内金融时间序列的平均真实范围。'输入数据必须是一个包含O、H、L、C的矩阵。'平均公式是一个SMA

```
Dim var() As Variant
Dim varATR() As Variant

    ReDim var(LBound(varData, 1) To UBound(varData, 1), 1)
    ReDim varATR(LBound(varData, 1) To UBound(varData, 1), 1)
    var = fTA_GetTR(varData)
    varATR = fTA_GetSMA(var, lPeriod)
    Debug.Print varATR
    fTA_GetATR = varATR 
```

结束功能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T13:07:57.743

如果 Var 包含范围引用，则只能使用 VarData.Value2：如果 VarData 是变量数组，它将不起作用。
您的 UDF 期望 Range 参数作为输入（因为您使用 .Value2），但返回包含数组的变体。因此，当您使用来自不同 UDF 的输出调用其中一个时，它会失败，因为输入不是范围。
您可以通过设置断点并显示 Locals 窗口来检查 Var 变量包含的内容来检测这一点。
处理这个问题的方法是做这样的事情

```
if IsObject(VarData) then VarData=VarData.Value2 
```

# algorithm - 有效地解决了这种递归关系。[ 优于 O(N^2) ]

> ID：12759055
> 
> 赞同：1
> 
> 时间：2012-10-06T10:42:00.550
> 
> 标签：algorithm, complexity-theory, recurrence

我有一个递归关系，它是这样的：

> E( i, j ) = A[ i ] + A[ j ] + E( i+1, j-1 ) + E( i+2, j ) + E( i, j-2 ) ; 如果我！= j
> 
> E( 我, j ) = A[ 我 ] ; 如果（ i == j ）
> 
> E（ i, j ） = 0 ; 如果 i < 0 或 j < 0
> 
> A[ i ] 1 <= i <= N; 是简单的整数数组。

我想解决 E(1, N) 的时间复杂度比 O(N^2) 更好。我想知道我们是否可以为这种递归找到一些封闭形式的公式，或者可能是一种计算 E(1, N) 值的聪明方法？

欢迎任何提示，
在此先感谢。

编辑：
实际问题是这样的：

1.  我们有一个数组 A[]，2 个玩家轮流玩这个游戏。
2.  玩家可以以 0.5 的概率选择最左边或最右边的数字并将其添加到他的分数中（如果数组中剩下一个元素，他将简单地选择该数字并结束游戏）。
3.  问题是找到 Player1 将达到的预期分数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T13:21:35.390

关于您的重复关系：

这似乎有些困难，因为文章表明，对于 E(1,N)，我们需要 E(2,..) 和 E(3,..)，而其中的每一个又都需要其他具有更高“i”的条目"等等。

现在，重新排列这些术语，以便我们将具有最高“i”的 E 项隔离（一般来说，递归关系的一个好主意是查看不同的排列来隔离特定索引 - 最高、最低、中间一个，...）：

E(i+2,j) = E(i,j) - E(i,j-2) - E(i+1,j-1) - A(i) - A(j)

然后，将所有 i 向下移动 2（只需重写公式）

E(i,j) = E(i-2,j) - E(i-2,j-2) - E(i-1,j-1) - A(i-2) - A(j)。

然后，对于您正在寻找的 {i=1, j=N}，我们得到：

E(1,N) = E(-1,N) - E(-1,N-2) - E(0,N-1) - A(-1) - A(N) = -A(N) ，因为所有其他项都为零。

（当然，我假设 E(i,j) 和 A(i) 对于 i=0 / j=0 为零；当您仅为 NEGATIVE 索引指定零值时，您的规范可能是不完整的，但对于零指数）。

然后，关于您对基础案例的（已编辑）描述 - 两名玩家从 A 轮流参加，从左或右任意，直到 A 筋疲力尽：

从之前的结果来看，我认为您的递归关系不太可能描述潜在的游戏，给定结果 -A(N)... 因此，将这种递归关系放在一边（对于 i=1 无论如何它都已解决）。看看游戏本身，我们可能会得出什么关系。

[编辑后继续]

到目前为止，我还没有想出可以以封闭形式进行转换的东西，即比处理某种递归关系更快的东西。因此，目前，让我们写下我们如何以适合计算的方式描述游戏。

定义以下数量：

令 X(i,k) 为在第 #k 回合结束时项目#i（在数组 A 中）仍然存在（即尚未被任何玩家拿走）的概率（计算两个玩家的回合数）。当然，k 在我们的游戏中从 1 运行到 N，i 也是如此。出于验证目的，我们可能会注意到，对于所有 i，X(i,N) 必须为零：在游戏结束时，所有元素都已被取走。

如果我们可能需要（在公式评估中）“正常”范围之外的任何 X(i,k) 值，我们评估：

```
X(i,k)=1 for {1<=i<=N; k=0}: initially all elements in A are still there.
X(i,k)=0 whenever i<1 or i>N: no elements ever exist outside the (original) range of A. 
```

接下来，让 T(i,k) 是在第 #k 回合准确地（被任何玩家）拿走元素 #i 的概率。那必须是 0.5 * 它是最左边元素（当前）的概率，这相当于说元素 #(i-1) 在 PREVIOUS 回合结束时不存在，加上 0.5 * 它是最左边元素的概率最右边的元素（当前），这又等于说元素#(i+1) 在上一轮结束时不存在，而所有这些都必须乘以元素#i 本身在第一轮中存在的概率地方：

```
T(i,k) = X(i,k-1) * ( (1-X(i-1,k-1)) + (1-X(i+1,k-1)) ) / 2 
```

元素#i 在第 k 轮之后仍然存在的概率 X(i,k) 是它在上一轮结束时存在的概率，减去它在第 k 轮被取走的概率：

```
X(i,k) = X(i,k-1) - T(i,k) 
```

元素#i 与玩家#1 结束的概率是 T(i,k) 的所有回合 k 的总和，但仅计算 HIS 回合。让我们用 P(i,1) 来表示这个数量，其中 1 代表玩家 #1。

```
P(i,1) = sum{ k=1,3,...: T(i,k) } 
```

同样，对于玩家 #2：

```
P(i,2) = sum{ k=2,4,...: T(i,k) } 
```

玩家 #1 的预期得分是总和 S(1)：

```
S(1) = sum( i=1..N: P(i,1)*A(i) }, and likewise for player #2: S(2) = sum( i=1..N: P(i,2)*A(i) } 
```

看看上面的公式，我看不出有一种方法可以避免时间方面的 O(N2) 方法。内存使用可能是 O(N)，因为我们可能会继续运行总计并丢弃不再需要的旧“元素”数据。鉴于此 - 假设您没有处理过长的数组 A - 玩家将无法生存！- O(n2) 时间性能在实践中不应该是这样的问题。

```
int N  = sizeof(A);

// note on the code below: we'll use i as an integer running over the elements in A, and k running over the turns that players make.
// while in human parlance we would have them (both) run from 1 to N, the zero-based arrays of C++ make it more convenient to let them 
// run from 0 to N-1.

// initialize the running totals P(i), the accumulated (over turns) probabilities that element #i winds up with player #1.
// if we ever need the same for player #2, it's values are of course 1-P (that is: at the end of the game).
double* P = new double[N];
for (int i=0; i<N; i++)
{
  P[i] = 0; // before we start, there's little chance that player #1 has already taken any element.
}
// initialize the existence-array for the elements.
int* X = new int[N];
for (int i=0; i<N; i++)
{
  X[i] = 1; // initially all elements exist, i.e. have not yet been taken by any player.
}
// declare an array for processing the probabilities that elements are taken at a particular turn.
double* T = new double[N];

// iterate over the turns.
for (int k=0; k<N; k++)
{
  // for each element, calculate the probability that it is taken NOW.
  // the current values of X - the existence array - refer to the (end of the) previous turn.
  for (int i=0; i<N; i++)
  {
    // note: take care of the boundaries i=0 and i=N-1.
    if (i == 0)
    {
      T[i] = X[i] * ( 2 - X[i+1] ) / 2;
    }
    else if (i == N-1)
    {
      T[i] = X[i] * ( 2 - X[i-1] ) / 2;
    }
    else
    {
      T[i] = X[i] * ( 2 - X[i-1] - X[i+1] ) / 2;
    }
  } // element i
  // with the take-probabilities for this turn in place, update P - only at odd turns (i.e. k=even): P is for player #1 only.
  if (k % 2 == 0)
  {
    for (int i=0; i<N; i++)
    {
      P[i] += T[i];
    }
  }
  // finally - in this turn - update the existence array.
  for (int i=0; i<N; i++)
  {
    X[i] -= T[i];
  }

} // turn k

// result: calculate the expected score for player #1.
double score = 0;
for (int i=0; i<N; i++)
{
  score += P[i] * A[i];
} 
```

--

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-06T17:30:26.893

由于概率相等，这只是一个计数问题。

你能算出在第 k^th 回合选择 A[j] 的机会吗？

# javascript - 如何将 JQuery（或任何）js 库添加到 Android WebView 中加载的页面中？

> ID：12759060
> 
> 赞同：0
> 
> 时间：2012-10-06T10:42:33.950
> 
> 标签：javascript, android, jquery, webview, android-webview

如何将 JQuery 库添加到 Android WebView 中加载的页面中？我的网页视图：

```
 webview.getSettings().setJavaScriptEnabled(true);
 webview.loadUrl(url); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T19:40:19.277

我必须从 js 代码中删除转义符（如`\n`）。我也不得不等到 JQuery 被加载：

```
load.tryReady = function(time_elapsed) {  
   // Continually polls to see if jQuery is loaded.  
   if (typeof $ == "undefined") { // if jQuery isn't loaded yet...  
       if (time_elapsed <= 5000) { // and we havn't given up trying...  
           setTimeout("load.tryReady(" + (time_elapsed + 200) + ")", 200); // set a timer to check again in 200 ms.  
       } else {  
           alert("Timed out while loading jQuery.")  
       }  
   } else {  
      // Any code to run after jQuery loads goes here!  
   }  
} 
```

[http://www.coderanch.com/t/504284/HTML-CSS-JavaScript/dynamically-load-jQuery-javascript-library](http://www.coderanch.com/t/504284/HTML-CSS-JavaScript/dynamically-load-jQuery-javascript-library)

# php - 通过 Ajax/Jquery 打印 PHP 消息以形成表单

> ID：12759062
> 
> 赞同：-1
> 
> 时间：2012-10-06T10:43:05.800
> 
> 标签：php, jquery, ajax, forms

我有一个 jquery/bootstrap 表单。如果电子邮件地址已在使用中，我的 php 正在检查数据库。

如果电子邮件地址正在使用中，则会调用以下内容，但会转到新窗口。

`echo'<p class="error">An account already exists for this email address. Please use a different email address</p>'`;

这一切都很好，但现在我希望错误消息显示在 Jquery 表单上。我似乎无法解决如何做到这一点。

我知道我必须使用这个处理程序，但我不知道将错误消息放在哪里，也不知道这段代码如何知道从 php.ini 读取哪个错误消息。此外，我希望错误消息显示在表单的电子邮件字段旁边

```
$(document).ready(function() {
    $('#form').submit(function() {
        $.ajax({
            type: 'POST',
            url: "process.php",
            data: dataString,
            success: function() {
            }
        })
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T10:50:45.293

可以在`success`属性中执行处理错误消息。该函数可以接受一个`data`参数（来自 的响应`process.php`）。

```
success: function(data){
    //does data contain p.error?
    //get the contents of p.error, display it on the current page

    //for example:
    if( $(data).find("p.error.name").length ){
        //process name error here
        nameError = $(data).find("p.error.name").text();
        console.log(nameError);
    }
    if( $(data).find("p.error.email").length ){
        //process email error here
        emailError = $(data).find("p.error.email").text();
        console.log(emailError);
    }
} 
```

上面定义的成功函数假设`process.php`如下所示：

```
<div>
<p class="error name">Please enter a name.</p>
<p class="error email">Your email address is invalid.</p>

<!-- some other stuff here -->
</div> 
```

# android - 如何在 VideoView 中禁用触摸？

> ID：12759064
> 
> 赞同：0
> 
> 时间：2012-10-06T10:43:35.060
> 
> 标签：android, android-videoview

我正在使用 VideoView 播放视频。我想在播放视频时禁用任何触摸事件。只有电话的按钮才能工作。

我已经尝试过不同的方式。这里的 vv 是我的 VideoView。

```
 vv.setClickable(false);

      vv.onTouchEvent(null);

      vv.setEnabled(false); 
```

任何形式的帮助表示赞赏！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-06T10:51:31.910

尝试这个...

```
vv.setOnTouchListener(new View.OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        // do nothing here......
        return true;
    }
}); 
```

# asp.net - 谷歌地图 Subgurim 显示箭头折线

> ID：12759070
> 
> 赞同：1
> 
> 时间：2012-10-06T10:44:42.840
> 
> 标签：asp.net, google-maps, polyline, subgurim-maps

我在 ASP.net 中为 Google Maps 使用 Subgurim asp.net 控件。问题是我需要在地图上的两个点之间显示一条箭头折线。

以下是我的代码，但不幸的是我无法为此应用任何东西：

```
GLatLng from = new GLatLng(FromLan, FromLon);
GLatLng To = new GLatLng(ToLan, ToLon);

GLatLngBounds llbound = new GLatLngBounds(from, To);

GMap2.GZoom = GMap2.getBoundsZoomLevel(llbound);
GMap2.setCenter(llbound.getCenter());

GLatLng inside = llbound.getCenter();
bool isInside = llbound.contains(inside);

GPolyline objpolyline = new GPolyline();
objpolyline.points.Add(from);
objpolyline.points.Add(To);
objpolyline.color = "red";
objpolyline.colorNet = System.Drawing.Color.Red;
objpolyline.clickable = false;
objpolyline.PolylineID = "Route";
objpolyline.geodesic = true;
//Javascript Code
//pts1.push (new GLatLng(lat111, lng222));
//var poly1 =  new BDCCArrowedPolyline(pts1,"#FF0000",4,0.3,
//                                       null,30,7,"#0000FF",2,0.5);
//map.addOverlay(poly1);

GMap2.addPolyline(objpolyline);
//GMap2.addPolyline(objpolyline); 
```

问候，维沙尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T13:17:46.827

在我看来，您使用的是 Google Maps API v2。

有两个问题：

1.  它已被弃用，可能会在不到一年的时间内停止工作。
2.  Google Maps API v3 现在原生支持[“带箭头的折线”](https://google-developers.appspot.com/maps/documentation/javascript/examples/overlay-symbol-arrow)。

# django - 使用端口转发设置 django 测试服务器

> ID：12759074
> 
> 赞同：4
> 
> 时间：2012-10-06T10:45:29.043
> 
> 标签：django, django-facebook

我想设置 django 测试服务器，以便可以通过网址访问它（主要用于 facebook 测试）。为此，我正在使用与 apache 完美配合的 no-ip 服务。但是，当我尝试在端口 80 上启动测试服务器时，从同一个 Web URL 访问会出现问题加载页面。

我已经得出结论，路由器配置正确（端口转发适用于 apache）并且测试服务器正在本地运行。

所以我该怎么做？您对使用 facebook 集成开发 django 项目有什么建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-06T11:34:09.730

我还建议使用[`localtunnel`](http://progrium.com/localtunnel/)Ruby gem。它将为您提供一个可公开访问的网址，该网址将请求路由到本地绑定端口：

```
$ python manage.py runserver
$ localtunnel 8000
This localtunnel service is brought to you by Twilio.
Port 8000 is now publicly accessible from http://qw1e3.localtunnel.com ... 
```

与其他方法相比，我更喜欢它，尤其是在某些情况下，即使是开发工作，由于您使用的一些远程服务，您的应用程序也需要公开访问，在这种情况下，您可以以编程方式实例化`localtunnel`并执行所有必要的配置，而无需记录它或经历一遍又一遍手动执行它的痛苦。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-06T11:16:18.330

你在运行 python manage.py runserver 吗？尝试做`python manage.py runserver 192.168.1.2:80`（或者你的 IP 不是 192.168.1.2）。

# php - 使用 include_once 和 include

> ID：12759076
> 
> 赞同：0
> 
> 时间：2012-10-06T10:45:42.457
> 
> 标签：php, class

有时我必须使用它`include_once`，`include`这取决于页面的访问方式。例如：

**销售.php**

```
include("class/pdoDatabase.php");
include("class/ClassExample.php");

$obj = new ClassExample();
$obj->getNewItem(1); 
```

**类示例.php**

```
include_once("class/pdoDatabase.php");

class ClassExample {
  public function  getNewItem($id) { .. }
   public function addNew($id) { .. }
}

// Accessing this file directly via Ajax request 
if (isset($_POST['AddNew'])) {
   $obj = new ClassExample ();
   $obj->addNew($_POST['id']);
 }
} 
```

如果您访问 sales.php ，然后将加载`include("class/ClassExample.php");`，但是我必须使用`include_once`in ，`ClassExample.php`因为`pdoDatabase.php`可能已经加载了`sales.php`。如果您使用 POST 查询直接访问 ClassExample.php 文件，这意味着它必须加载文件并创建一个对象。

**问题**：问题是当您直接访问 ClassExample.php 时 - 它找不到 class/pdoDatabase.php。当 sales.php 加载 class/pdoDatabase.php 文件时它工作正常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T11:44:23.510

这不是 include_once 和包含差异的问题。这是相对路径的问题。包含始终使用相对于被调用 php 文件的路径。你有这个文件结构：

```
sales.php
[class]
 - pdoDatabase.php
 - ClassExample.php 
```

当你打电话时`sales.php`一切都好，但是当你打电话时`ClassExample.php`它试图找到`class/class/pdoDatabase.php`不存在的。

更改包含行中的`ClassExample.php`

```
include_once(dirname(__FILE__)."/pdoDatabase.php"); 
```

并在任何地方使用相同的模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T01:25:28.883

你这样做是不对的。

您应该使用在应用程序的引导阶段初始化的自动加载器，而不是手动加载每个类文件。类似于以下内容：

```
$root = __DIR__;

spl_autoload_register(function( $className ) use ( $root ){

    $className = str_replace( '\\', '/', $className );
    $filepath = $root . '/' . strtolower( $className ) . '.php';

    if ( !file_exists($filepath) )
    {
        return false;
    }

    require $filepath;
    return true;
}); 
```

要了解更多信息，请阅读[`spl_autoload_register()`](http://php.net/manual/en/function.spl-autoload-register.php)手册中的内容。

# php - PHP多维数组推送和循环

> ID：12759078
> 
> 赞同：0
> 
> 时间：2012-10-06T10:46:12.080
> 
> 标签：php, loops, multidimensional-array

当涉及到多维数组以及如何推送时，我在理解 PHP 中的编码时遇到了一些麻烦。这个想法是推动一个“属性”和一个“属性值”

我试过下面的公式

```
 $i = 0;
   $array = array();
    foreach($node as $a)
    {
        $strAtt = $node->PROP[$i]->attributes();
        $strVal = $node->PROP[$i]->PVAL;

        $output = $output.$strAtt." : ".$strVal."<BR>";
        $array[] = ($strAtt => $strVal); 
```

$array[] = ($ strAtt **=> $strVal);** 没有给我太大的成功。我试过**array_push($array, $strAtt => $strVal)** - 不走运..

作为一个额外的问题，我如何循环遍历数组并打印我的多维值？

**新代码**

```
while ($z->name === 'RECORD')
{

$node = new SimpleXMLElement($z->readOuterXML());

$Print = FALSE;
$output = "";
$i = 0;
foreach($node as $a)
{
    $strAtt = $node->PROP[$i]->attributes();
    $strVal = $node->PROP[$i]->PVAL;

    $output = $output.$strAtt." : ".$strVal."<BR>";
    $array[$strAtt] = $strVal;

    if(($i == 6) && ($node->PROP[$i]->PVAL == $ProductLookup))
    {
        $Print = TRUE;
        $Product = $node->PROP[$i]->PVAL;
    }       

    $i++;
}
if($Print == TRUE) {
    echo $output;
    echo "Product : ".$Product."<br>";
    var_dump($array);
    }

    //print_r($array);
    $print = FALSE;

// go to next <product />
$z->next('RECORD');
} 
```

添加了新代码。出于某种原因，当我转储它时，我的 $array 完全是空的，尽管我的 $Output 充满了文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T10:52:16.760

听起来您想要一个“关联”数组，而不一定是多维数组。对于关联数组，您不使用 array_push。只需这样做：

```
$array[$strAtt] = $strVal; 
```

然后循环数组只需这样做：

```
foreach ($array as $key => $value) {
    echo "$key = $value\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T11:06:48.253

通过[php](http://php.net/manual/en/language.types.array.php)中的数组，您将了解数组在 php 中是如何工作的。此外，如果您想向多维数组添加一个元素，您可以这样实现：

```
$node = array ("key1"=> array (a,b) , "key2"=> array (c,d));
$array = array();
foreach ($node as $key=>$value) {
    $array [$key] = $value;
} 
```

这将是`$array`循环后的结果：

```
array (
"key1"=> array (
a,b
) , 
"key2"=> 
array (c,d)
) 
```

希望有帮助，快乐的编码:)

# javascript - 除非单击特定元素，否则在模糊上触发 jquery 函数

> ID：12759083
> 
> 赞同：1
> 
> 时间：2012-10-06T10:46:42.240
> 
> 标签：javascript, jquery

我有一个登录表单。当输入聚焦时，“忘记密码”和“记住我”元素通过添加 css 类显示，当它们模糊时，通过删除“sho”类再次隐藏元素。`show`如果我单击其中一个或登录链接，我希望元素保留类“ ”

```
$(document).ready(function() {
    $('.login *').focus(showlogin);
    $('.login *').blur(hidelogin);
});

function showlogin(){
    $('.login .hidden').addClass("show");
}

function hidelogin(){
    $('.login .hidden').removeClass("show");
} 
```

html:

```
<form class="login">
  <input type="text"/>
  <input type="password"/>
  <a class="loginbutton" href="#">Log in</a>
  <br />
  <a class="hidden" href="#">Forgotten password</a>
  <label class="hidden"><input type="checkbox" /> Remember me</label>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T11:24:25.720

不是绑定到`blur`，而是绑定到登录表单外的单击。

这是我页面中的一些代码，当我在外部单击时关闭登录框，您可以根据需要对其进行调整：

```
 $(document).mousedown(function (e) {
        if ($(e.target).closest("#signin").length == 0) {
            $(".signin").removeClass("menu-open");
            $("fieldset#signin_menu").hide();
        }
    }); 
```

# sqlite - 在 4 个表上的 sqlite 中完全外连接

> ID：12759087
> 
> 赞同：6
> 
> 时间：2012-10-06T10:47:13.640
> 
> 标签：sqlite, full-outer-join

我需要基于一个共同的主键加入 4 个表。如果 sqlite 实现了完整的外部连接，它可能看起来像这样（不考虑优化）。

```
SELECT S.pair, C.ball, P.bluejeans, B.checkered 
FROM Socks S 
FULL OUTER JOIN Caps C 
FULL OUTER JOIN Pants P 
FULL OUTER JOIN Boxers B 
WHERE S.color = C.color AND S.color = P.color AND S.color = B.color; 
```

我看起来很长很努力，我发现最好的是这个 2 table sqlite full join 用左连接和联合 alls 实现：

```
SELECT employee.*, department.* 
FROM employee LEFT JOIN department 
ON employee.DepartmentID = department.DepartmentID 
UNION ALL SELECT employee.*, department.* 
FROM   department LEFT JOIN employee 
ON employee.DepartmentID = department.DepartmentID 
WHERE  employee.DepartmentID IS NULL; 
```

我正在尝试修改它以适用于超过 2 个表，但我是 SQL 新手，我并没有走得太远。是否有可能在合理的时间内得到这个结果？

我认为我对 3 个表有正确的实现（可能不正确），但我似乎仍然无法为 4 个表实现它。这是我对 3 个表的实现：

```
SELECT S.pair, C.ball, P.bluejeans 
FROM Socks S LEFT JOIN Caps C LEFT JOIN Pants P 
ON C.color = S.color AND P.color = S.color 
UNION ALL 
SELECT S.pair, C.ball, P.bluejeans 
FROM Socks S LEFT JOIN Caps C LEFT JOIN Pants P 
ON S.color = C.color AND S.color = P.color 
WHERE S.color IS NULL; 
```

任何帮助深表感谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-06T13:08:38.517

两个表之间`A`以及`B`在 SQLite 中的完全外连接的一般构造确实是：

```
SELECT ... FROM A LEFT JOIN B ON ...
UNION ALL
SELECT ... FROM B LEFT JOIN A ON ... WHERE A.key IS NULL 
```

现在为and之间的完全外连接[创建一个视图](http://www.sqlite.org/lang_createview.html) ：`SocksCaps``Socks``Caps`

```
CREATE VIEW SocksCaps AS
SELECT ... FROM Socks LEFT JOIN Caps ON ...
UNION ALL
SELECT ... FROM Caps LEFT JOIN Socks ON ... WHERE Socks.color IS NULL 
```

`Pants`对和做同样的事情`Boxers`。

然后像对待表一样对待这些视图，并使用相同的结构进行完全外连接：

```
SELECT ... FROM SocksCaps LEFT JOIN PantsBoxers ON ...
UNION ALL
SELECT ... FROM PantsBoxers LEFT JOIN SocksCaps ON ... WHERE SocksCaps.color IS NULL 
```

# objective-c - 对 statusItem 使用 NSString

> ID：12759090
> 
> 赞同：1
> 
> 时间：2012-10-06T10:47:36.650
> 
> 标签：objective-c, cocoa, title, menuitem

我想给我的 statusItem 一个标题，它应该改变它的内容。但是如果我声明一个变量，菜单栏中就不会出现任何内容。我在 .h 中的字符串：

```
@interface AppDelegate : NSObject <NSApplicationDelegate> { 

NSString *myString;

} 
```

使用普通文本一切都有效：`@"text"`但是当我这样做时.m：

```
-(void)awakeFromNib {
statusItem = [[[NSStatusBar systemStatusBar] statusItemWithLength:NSVariableStatusItemLength] retain];

[statusItem setTitle:myString];

[statusItem setMenu:statusMenu];
[statusItem setToolTip:@"my Tooltip"];
[statusItem setHighlightMode:YES];

} 
```

当然我给了字符串一些内容。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T18:15:54.847

问题是在初始化`awakeFromNib`之前调用。`myString`这就是为什么您的字符串文字有效但使用变量初始化却无效的原因。

你可以试试这个，因为在你的评论中你提到从课外设置标题。

(1) 将您的 ivar 更改`NSString *myString`为声明的属性：`@property (nonatomic, strong) NSString *myString;`

(2) 为您的状态项创建一个 ivar：`NSStatusItem *_statusItem;`并按照您的操作进行初始化，`awakeFromNib`但要使用此 ivar。

(3) 为您创建一个自定义设置器`myString`：

```
- (void)setMyString:(NSString *)aString {
   _myString = aString;
   [_statusItem setTitle:aString];
} 
```

如果你不需要`myString`其他任何东西，你可以省去它，只需实现一个公共方法来设置`NSStatusItem`标题。注意：要创建该状态项，您可能需要一些用于 UI 指标的占位符文本。不确定。

# drupal - drupal 7 中的干净 URL 测试失败

> ID：12759103
> 
> 赞同：2
> 
> 时间：2012-10-06T10:48:25.060
> 
> 标签：drupal, clean-urls

干净的 URL 测试失败。它在我的本地计算机上正常工作，当我将它上传到服务器时，我收到了这条消息，我无法启用干净的 url。我应该怎么做才能启用它？我也上传了htaccess。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T21:28:08.213

您需要确认在服务器上满足许多要求。在确认 Apache 允许您的本地 .htaccess 配置覆盖后（根据 Ayesh 的评论），我首先检查 info.php 以查看是否加载了 mod_rewrite。

确保在完成检查后删除 info.php，因为您不应该在生产服务器上使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-08T06:15:02.230

看看[Configure clean URLs](https://drupal.org/getting-started/clean-urls)，假设您使用的是 apache2

1.  在 apache 中启用 mod-rewrite

    `sudo a2enmod rewrite`

2.  vi /etc/apache2/sites-enabled/000-default，将 AllowOverride 从 None 更改为 All

> ```
> <Directory /var/www/>
>    Options Indexes FollowSymLinks MultiViews
>    AllowOverride All
>    Order allow,deny
>    allow from all
> </Directory> 
> ```

1.  vi httpd.conf，添加这个

> ```
> <Directory /var/www/>
>       RewriteEngine on
>       RewriteBase /
>       RewriteCond %{REQUEST_FILENAME} !-f
>       RewriteCond %{REQUEST_FILENAME} !-d
>       RewriteRule ^(.*)$ index.php?q=$1 [L,QSA]
> </Directory> 
> ```
> 
> 2.重启apache

```
sudo service apache2 restart 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-05T14:28:29.963

如果您的整个站点受密码保护（通过 cpanel/.htaccess），那么测试将不会通过。这可能不是解决方案，但值得检查。

我通过在 .htaccess 文件中注释掉以下行来禁用密码保护。

```
AuthType Basic
AuthName "public_html"
AuthUserFile "/home/********/.htpasswds/public_html/passwd"
require valid-user 
```

再次运行测试，如果通过，请勾选该框，然后确保取消注释先前注释的行。

# memory - Powershell: Create file in runspace session

> ID：12759112
> 
> 赞同：2
> 
> 时间：2012-10-06T10:50:42.283
> 
> 标签：memory, powershell, runspace

Just a quick on this morning.

Is it possible to create a file and store in it the Powershell runspace/session memory?

Something like:

```
out-file 'powershell session space'? 
```

instead of:

```
out-file C:\temp\system_info.txt 
```

I'm creating an e-mail template that catches data from the machine the script is run on and sends it to the domain admin. However if it's run by another user who for whatever reason hasn't got access to the 'temp' folder or even the C:\ drive, I want the file (script_info.txt) to be created in the memory of the PS session. Is that possible?

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T20:32:29.273

Found out it was this:

```
out-file "$env:TEMP\file.extention" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T11:04:39.983

Surely the user has write access to somewhere on the local drive.

Your other option may be [Memory-Mapped Files](http://msdn.microsoft.com/en-us/subscriptions/dd997372%28v=vs.110%29.aspx).

# .htaccess - htaccess 替换 url 中的空格并重定向

> ID：12759114
> 
> 赞同：1
> 
> 时间：2012-10-06T10:50:52.917
> 
> 标签：.htaccess, redirect, replace, space

我是新手，想解决一个问题。我读了同样的问题，但误解了：

> [htaccess 重定向网址，其中包含空格](https://stackoverflow.com/questions/11444026/htaccess-redirect-url-with-space-in-it)

请帮我。我的网站使用带有自定义字段和标签的 wordpress。

自定义字段有很多链接，例如：

```
http://domain.com/tag/Miss Earth
http://domain.com/tag/Miss World
http://domain.com/tag/Miss England
... 
```

（空格不是 %20）当然我也创建了标签：地球小姐、世界小姐、英格兰小姐……但以上链接不存在（空格（“”）必须替换为“-”，“M”必须替换为“m” " 和 "E" 由 "e"...

我需要使用 htaccess 将空格（“”）字符替换为“-”并自动重定向到真正的标签：

```
http://domain.com/tag/miss-earth
http://domain.com/tag/miss-world
http://domain.com/tag/miss-england 
```

请清楚地帮助我，我对htaccess很愚蠢。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T12:26:03.287

尝试将这些规则添加到文档根目录中的 htaccess 文件中，最好在文件中已有的任何 wordpress 规则之上：

```
RewriteEngine On
RewriteRule ^/?tag/(.*)\ (.*)$ /tag/$1-$2   [L,R=301] 
```

# c# - DropDown列表选择索引更改事件如何工作jquery？

> ID：12759115
> 
> 赞同：0
> 
> 时间：2012-10-06T10:51:01.110
> 
> 标签：c#, jquery, razor

jquery是怎么写的

DropDown列表选择索引更改事件如何工作jquery？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T10:56:16.797

您可以使用以下代码：

```
<select id="selDiv" name="selDiv">
       <option>111</option>
       <option>222</option>
       <option>333</option>
    </select>

    $('#selDiv').change(function(){
       /// you can write you code what you want to do...
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T10:55:39.250

```
<select class="target">
    <option value="option1" selected="selected">Option 1</option>
    <option value="option2">Option 2</option>
  </select>

$(document).ready(function(){

$('.target').change(function() {
  alert('Dropdown Changed');
});

}); 
```

**[进一步参考](http://api.jquery.com/change/)**

# windows-8 - 如何本地化 Windows 应用商店的应用显示名称？

> ID：12759119
> 
> 赞同：20
> 
> 时间：2012-10-06T10:51:30.210
> 
> 标签：windows-8, localization, windows-store-apps, windows-phone-8.1, manifest

[我在Windows Store Dashboard](https://appdev.microsoft.com/StorePortals/de-DE/Developer/)中为我的 Windows 8 应用程序注册了德语和英语名称。

之后我在我的解决方案中创建了两个文件：

```
Strings/de/Resources.resw with name "AppName" and value "German Title"
Strings/en/Resources.resw with name "AppName" and value "English Title" 
```

然后我点击**Edit App Manifest**。在**显示名称**字段中，我输入了“ms-resource:/AppName”，但是当我想构建我的应用程序时，我收到一个错误，提示找不到“NamedResource”。

我究竟做错了什么？

该[文档](http://msdn.microsoft.com/en-us/library/windows/apps/br230259.aspx#ApplicationUI)仅写道：“显示名称：指定向用户显示的应用程序的友好名称。此字符串是可本地化的”。但是我的应用清单中只有一个字段（称为显示名称）来指示我的应用名称。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-06T11:10:55.387

行。我找到了！对于“Package.appxmanifest”中的“显示名称”，我必须输入“ms-resource:AppName”。还应为“包显示名称”字段（在“打包”选项卡中）输入“ms-resource:AppName”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-19T18:46:54.513

我想为 Benny Neugebauer 的回答添加一个附录。如果您的 .resw 文件恰好存储在另一个程序集中（就像我的那样），您可能必须为其提供资源名称的完全限定路径。

例如，如果您的 AppName 字符串位于名为 的项目`OtherProject`和名为 的文件`AppResources`中，并且键为`AppName`，您将使用以下语法：

`ms-resource:OtherProject/AppResources/AppName`

# php - PHP 和 SQL 从 DateTime 获取 DB 中的最新条目

> ID：12759120
> 
> 赞同：0
> 
> 时间：2012-10-06T10:51:30.547
> 
> 标签：php, sql, json

我有一个 id、title、subject 和 datetime 的数据库，我正在调用一个 php 页面，该页面接收来自客户端的请求，以显示来自客户端的时间差异的数据库中的最新条目，并检查最后一个条目的日期时间. PHP代码如下

```
 $date = "2012-10-06 18:13:52";

//Establish a connection
$conn = mysql_connect('localhost','regadmin','regadmin');

//Select the mySQL db
$db = mysql_select_db('easy_comm', $conn);

$sql = mysql_query("SELECT `title`, `subject`,`date_sent` FROM `books` WHERE  `date_sent` > '$date'", $conn);
$count=mysql_num_rows($sql);

if($count != 0){
    $json = array('boolean' => true);
}
else{
    $json = array('boolean' => false);
    //echo "No record";
} 
```

从上面的代码和提供的 $date 变量来看，它总是返回 true，最后一个条目是 2012-10-06 18:10:52

我尝试转换为 UNIXTIMESTAMP 但同样的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T12:04:06.033

好吧，这对我来说已经足够好了。请确保您要比较日期的列肯定恰好是`DATETIME`列而不是 a`VARCHAR`或其他内容。请向我们发布数据库结构以查看排序规则，并尝试即时打印查询，然后在您的控制台中执行。

# svg - 拉斐尔图标提取路径

> ID：12759124
> 
> 赞同：0
> 
> 时间：2012-10-06T10:51:55.540
> 
> 标签：svg, raphael

我正在尝试基于 RaphaelJs 图标创建一些登录按钮，但在示例页面上只有 Twitter 路径可用！

因此，我希望了解如何从 Inkscape 中提取 SVG 路径并使用[http://upload.wikimedia.org/wikipedia/commons/](http://upload.wikimedia.org/wikipedia/commons/2/28/Google_free_icon.svg)为 Google更新[http://jsfiddle.net/aqoon/LN23r/5/上的示例](http://jsfiddle.net/aqoon/LN23r/5/)[2/28/Google_free_icon.svg](http://upload.wikimedia.org/wikipedia/commons/2/28/Google_free_icon.svg)文件

```
var facebookBtn = "",
    googleBtn = "M47.446122,148.46699L47.463496,149.0968L47.430196,149.09969C47.363594,148.8854247.278172,148.7259147.173az931,148.62119C47.069686,148.5164646.943725,148.464146.796048,148.4641C46.681186,148.464146.582493,148.4875146.499968,148.53432C46.417441,148.5811346.340465,148.6571446.269039,148.76235C46.124256,148.9775946.051865,149.2237246.051865,149.50074C46.051865,149.6329846.069239,149.7577346.103987,149.875C46.138734,149.9922846.189408,150.095846.256009,150.18556C46.385347,150.359346.54316,150.4461746.729448,150.44617C46.802803,150.4461746.871816,150.4307346.936487,150.39984C47.001155,150.3689547.054242,150.3264847.095748,150.27243C47.152694,150.1971547.181168,150.1078647.18117,150.00458C47.181168,149.9090347.155349,149.8400247.103711,149.79755C47.05207,149.7550846.96689,149.7338446.84817,149.73384L46.84817,149.70054L47.771883,149.70054L47.771883,149.73384C47.686942,149.7415647.62734,149.7533947.593076,149.76931C47.558809,149.7852447.533472,149.8125147.517065,149.85111C47.498724,149.8935947.489555,149.9780447.489557,150.10448C47.489555,150.1392347.491485,150.1932847.495348,150.26664L47.498244,150.29994C47.461564,150.2864347.434538,150.2796747.417165,150.27967C47.395929,150.2796747.368903,150.2907747.336087,150.31297C47.252112,150.3708847.154625,150.4152847.043626,150.44617C46.932625,150.4770646.815351,150.492546.691804,150.4925C46.521925,150.492546.368697,150.4635546.23212,150.40563C46.095541,150.3477245.984782,150.2647145.899844,150.15661C45.836139,150.0755345.787154,149.9790145.752889,149.86704C45.718624,149.7550845.701491,149.6363545.701491,149.51088C45.701491,149.338145.732378,149.1773945.794152,149.02875C45.855926,148.8801145.942795,148.7575346.054761,148.661C46.146456,148.5828246.252147,148.5224946.371835,148.48002C46.491521,148.4375646.617964,148.4163246.751165,148.41632C46.828382,148.4163246.900049,148.4235646.966168,148.43804C47.032284,148.4525247.102503,148.4761647.176826,148.50898L47.262248,148.54807C47.283481,148.5567647.302785,148.561147.320161,148.5611C47.358768,148.561147.388207,148.5297347.408479,148.46699L47.446122,148.46699z",
    twitterBtn = "M14.605,13.11c0.913-2.851,2.029-4.698,3.313-6.038c0.959-1,1.453-1.316,0.891-0.216c0.25-0.199,0.606-0.464,0.885-0.605c1.555-0.733,1.442-0.119,0.373,0.54c2.923-1.045,2.82,0.286-0.271,0.949c2.527,0.047,5.214,1.656,5.987,5.077c0.105,0.474-0.021,0.428,0.464,0.514c1.047,0.186,2.03,0.174,2.991-0.13c-0.104,0.708-1.039,1.167-2.497,1.471c-0.541,0.112-0.651,0.083-0.005,0.229c0.799,0.179,1.69,0.226,2.634,0.182c-0.734,0.846-1.905,1.278-3.354,1.296c-0.904,3.309-2.976,5.678-5.596,7.164c-6.152,3.492-15.108,2.984-19.599-3.359c2.947,2.312,7.312,2.821,10.555-0.401c-2.125,0-2.674-1.591-0.99-2.449c-1.595-0.017-2.608-0.521-3.203-1.434c-0.226-0.347-0.229-0.374,0.14-0.64c0.405-0.293,0.958-0.423,1.528-0.467c-1.651-0.473-2.66-1.335-3.009-2.491c-0.116-0.382-0.134-0.363,0.256-0.462c0.38-0.097,0.87-0.148,1.309-0.17C6.11,10.88,5.336,9.917,5.139,8.852c-0.186-1.006,0.005-0.748,0.758-0.46C9.263,9.68,12.619,11.062,14.605,13.11L14.605,13.11z",
    yahooBtn = "";

$('.twitterBtn').each(function(i) {
    paper = Raphael($(this)[0], 40, 40)
    paper.path(twitterBtn).attr({
        "fill": "#333"
    })
})
$('.googleBtn').each(function(i) {
    paper = Raphael($(this)[0], 40, 40)
    paper.path(googleBtn).attr({
        "fill": "#333"
    })
})​ 
```

我试图剥离 SVG 文件，这样我只有一层，只有“G”，但在[http://jsfiddle.net/aqoon/LN23r/5/](http://jsfiddle.net/aqoon/LN23r/5/)上没有显示，我错过了什么？

另外，我如何向 var googleBtn 添加额外的图层，因为当我在 Inkscape 中打开[http://upload.wikimedia.org/wikipedia/commons/2/28/Google_free_icon.svg](http://upload.wikimedia.org/wikipedia/commons/2/28/Google_free_icon.svg)时有很多图层和路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:28:29.403

Raphael 不支持（Raphael 中[的 SVG 文件，可以使用它们吗？](https://stackoverflow.com/questions/3135061/) ...）加载整个 SVG 图像并将其用作路径，因此这里唯一合理的选择是提取单独的路径并将它们存储在某种数据结构中，例如在老虎的例子（[http://raphaeljs.com/tiger.html）——](http://raphaeljs.com/tiger.html)检查那里的源代码。

SVG文件也可以有相当奇怪的内部坐标系，所以加载后调整视图框是值得的，像这样

```
 var path = paper.path(googleBtn).attr({
        "fill": "#333"
    });
    var bbox = path.getBBox();
    paper.setViewBox(bbox.x, bbox.y, bbox.width, bbox.height); 
```

要对不同的元素进行分组，可以使用 Raphael.Set [http://jsfiddle.net/LN23r/40/](http://jsfiddle.net/LN23r/40/)

```
 var shadow = paper.path(googleBtn).attr({"fill": "#0F0", "stroke":"none"}).translate(0.08,0.08);
    var path = paper.path(googleBtn).attr({"fill": "#333", "stroke":"none"});
    var set = paper.set(shadow, path);
    var bbox = set.getBBox();
    paper.setViewBox(bbox.x, bbox.y, bbox.width, bbox.height); 
```

对元素进行分组时，请注意它们在 SVG 文件中具有与之关联的变换矩阵（例如 transform="matrix(204.67566,0,0,204.67566,-9225.9642,-30242.949)"），这会影响元素的相应位置和比例。

总体而言，从 SVG 移植路径的过程并非微不足道，而是易于管理。还有一个插件可以帮助您，请参阅[https://github.com/wout/raphael-svg-import](https://github.com/wout/raphael-svg-import)

# java - 设置 log4j.properties 文件以登录 servlet

> ID：12759127
> 
> 赞同：-1
> 
> 时间：2012-10-06T10:52:00.160
> 
> 标签：java, properties, log4j

服务器是一个简单的码头服务器

如何设置 log4j.properties 文件我有一个正确的 log4j 属性文件，

但是在设置 log4j.properties

使用以下方式，我的 src 文件夹中有 log4j.properties

```
PropertyConfigurator.configure("log4j.properties"); 
```

当我在本地工作时它工作正常，但是当我创建一个 jar 文件并运行它时抛出一个异常，如**java.io.FileNotFoundException：**

我尝试提取它并在另一个名为资源的文件夹中创建它，并尝试通过以下方法访问它

```
PropertyConfigurator.configure("resources/log4j.properties"); 
```

即使在那之后它显示相同的错误

如何将整个项目导出为 jar 文件并使这个 log4j 问题起作用？

在自定义位置找到另一个链接 [Log4j 属性](https://stackoverflow.com/questions/875663/log4j-properties-in-a-custom-place)

并且需要设置类路径

```
java -Dlog4j.configuration=conf/log4j.properties -classpath ... 
```

不知道如何设置-classpath，也不知道这个方法能不能用！！

即使它作为 jar 文件导出，它也应该可以工作！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T11:18:38.473

如果`log4j.properties`资源目录在类路径中，您可以使用：

```
PropertyConfigurator.configure("classpath:resources/log4j.properties"); 
```

要查看 Jetty 的工作目录，您可以添加：

```
System.out.println(System.getProperty("user.dir")); 
```

在`PropertyConfigurator.configure`声明之前。这将允许您查看属性文件相对于服务器工作目录的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T10:57:42.603

为了使其立即工作，您可以从代码中配置它们：

```
Properties props = new Properties();
props.setProperty("<KEY>","VALUE");
PropertyConfigurator.configure(props); 
```

使用 log4j.properties 文件中的所有属性对 props 对象进行硬编码。

这不是您要求的解决方案，但如果您时间紧迫，它可能会很有帮助。

# c++ - QFileSystemWatcher::addPath 递归

> ID：12759131
> 
> 赞同：0
> 
> 时间：2012-10-06T10:52:22.203
> 
> 标签：c++, qt, directory, subdirectory, qfilesystemwatcher

大家好，我想用来`QFileSystemWatcher`递归地观察给定目录及其子目录的变化，但`void QFileSystemWatcher::addPath ( const QString & path )`没有让我这样做，所以有什么想法可以轻松完成，或者我应该自己实现它（提取所有目录和子目录和添加`void QFileSystemWatcher::addPaths ( const QStringList & paths )`) 下的文件？

任何帮助将不胜感激。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T16:31:15.990

类的[文档](http://doc-snapshot.qt-project.org/5.0/qfilesystemwatcher.html#details)`QFileSystemWatcher`没有说明递归监视是其合同的一部分。因此，正如您所暗示的，我认为一个解决方案可能是自己遍历目录树，将所有子目录及其文件收集在一个字符串列表中并使用

```
void QFileSystemWatcher::addPaths ( const QStringList & paths ) 
```

另外，我认为提及您正在使用的 qt 版本可能对您有用，因为根据此[线程](http://qt.gitorious.org/qt/qt/merge_requests/2611)， `QFileSystemWatcher`不推荐使用，并且应该用新的 api 替换它。

# android - Activity 启动时不显示片段

> ID：12759137
> 
> 赞同：0
> 
> 时间：2012-10-06T10:53:11.573
> 
> 标签：android, actionbarsherlock

我使用 Action Bar Sherlock 编写了一个 UI。我完成了交换片段（并显示自己的数据），但是当我的 Activity 创建时，什么都没有出现。

这是我的代码：

```
public class TabsActivity extends SherlockFragmentActivity{
    public static DetailedClinica detailedClinica=null;

     @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            SimpleClinica clinica = (SimpleClinica) getIntent().getParcelableExtra("clinica");
            try {
                detailedClinica = getDetailedClinica(clinica.getIdClinica().toString());
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (ExecutionException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

            ActionBar.Tab newTab0 = getSupportActionBar().newTab();
            newTab0.setText("Info");
            //fillFirstTab(clinica,newTab0);

            ActionBar.Tab newTab1 = getSupportActionBar().newTab();
            newTab1.setText("Dettagli");

            getSupportActionBar().addTab(newTab0);
            getSupportActionBar().addTab(newTab1);

            newTab0.setTabListener(new TabListener());
            newTab1.setTabListener(new TabListener());
     }

public class TabListener  implements ActionBar.TabListener {

    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        if (tab.getPosition() == 0){
            FragmentClinica fragmentClinica = new FragmentClinica();
            ft.replace(android.R.id.content, fragmentClinica);
        }else{
            FragmentDetailed fragmentDetailed = new FragmentDetailed();
            ft.replace(android.R.id.content, fragmentDetailed);
        }

    }

    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        FragmentClinica arg0 = new FragmentClinica();
        ft.detach(arg0);
    }

    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub

    } 
```

其中 FragmentClinica 是：

```
public class FragmentClinica extends Fragment {
    public View onCreateView(LayoutInflater inflater, ViewGroup group, Bundle saved){
        return inflater.inflate(R.layout.tab1, group, false);
    }

    @Override
    public void onActivityCreated (Bundle savedInstanceState){
        super.onActivityCreated(savedInstanceState);
        TextView textView = (TextView) getActivity().findViewById(R.id.textView1);
        textView.setText("Ciao");
    }
} 
```

建议？？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T11:57:17.757

When you do a `FragmentTransaction`, you have to commit the change

```
...
ft.commit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T12:06:00.097

我没有看到您设置选项卡内容的任何地方...

也许您需要取消注释以下代码行？

```
//fillFirstTab(clinica,newTab0); 
```

# mysql - 选择 T1 中但 T2 中没有的 id

> ID：12759138
> 
> 赞同：0
> 
> 时间：2012-10-06T10:53:21.620
> 
> 标签：mysql, join

我有两个表格和数据如下。

```
create table t1 (id int, name varchar(10));

create table t2 (id int, name varchar(10), t1id int);

insert into t1 values
(1,'value 1'),
(2,'value 2'),
(3,'value 3'),
(4,'value 3');

insert into t2 values
(1,'value 1',1),
(2,'value 2',1),
(3,'value 3',1),
(4,'value 3',2); 
```

我想要的是来自 T1 (id) 但不在 T2 (t1id) 中的 id 列表。

输出将是

3 , 4 作为 t1.id (3,4) 在 T2 (t1id) 中不存在。

## [原始数据](http://sqlfiddle.com/#!2/2fdb1/1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T10:55:05.787

```
SELECT id
  FROM t1
 WHERE NOT EXISTS (SELECT NULL
                     FROM t2
                    WHERE t2.t1id = t1.id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T10:55:30.230

为什么我提出问题后总是得到解决方案？

```
select id FROM t1 WHERE id NOT IN (select distinct(t1id) FROM t2); 
```

## [演示](http://sqlfiddle.com/#!2/ee250/1)

# java - 我可以在没有 Bouncy Castle 的情况下使用 PKCS#7 加密、解密、签名或验证数据吗？

> ID：12759141
> 
> 赞同：3
> 
> 时间：2012-10-06T10:53:49.710
> 
> 标签：java, cryptography, pkcs#7

我想使用 PKCS#7 Cryptographic Message Syntax 加密、解密、签名和验证数据。我看到了 Bouncy Castle 的示例代码。我想知道我可以在不使用 Bouncy Castle 库的情况下做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T20:19:18.493

标准 Java 库中不支持 PKCS7 消息。没有理由不使用像 Bouncycastle 这样的现有实现。它具有如此自由的许可证，您可能只需抓住它并说您编写了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T12:45:29.783

You should have fully compatible results using JCE and PKCS5.

# windows - 在 Visual Studio 2008 中为 Windows 应用程序创建独立的 .exe？

> ID：12759142
> 
> 赞同：2
> 
> 时间：2012-10-06T10:53:52.250
> 
> 标签：windows, installation, exe

我使用 Visual Studio 2008 在 C# 中创建了一个基于 Windows 的应用程序，它基本上扫描注册表，然后修复产生的错误。现在使用 msi 安装程序，我已经进行了设置，它工作正常。但是我遇到了一个新的要求。

通常在向用户/客户端提供设置后必须安装设置，安装后，在安装的文件夹中有很多我用来创建项目的 .dll。但我的要求是创建一个独立的 .exe，使用它我不必为我的用户提供安装文件。我需要做的就是使用这个单个 .exe 文件，我的整个项目应该执行并执行相同的扫描和修复注册表的过程。

我还尝试了“.NET Framework 2.0 中的 ClickOnce 部署”并得到错误“ClickOnce 不支持请求执行级别'requireAdministrator'”。并且还通过了链接 [“ClickOnce 不支持请求执行级别‘requireAdministrator’。”](https://stackoverflow.com/questions/11023998/clickonce-does-not-support-the-request-execution-level-requireadministrator)

但是我仍然觉得如果我能得到一个可以执行我的 Windows 窗体应用程序的独立 exe，我会很舒服。

有什么办法吗？

任何关于这件事的提示都会对我很有帮助。

提前致谢

~维克内什

# android - 如何在 Android 项目中向 ActionBar 添加下拉菜单？

> ID：12759145
> 
> 赞同：2
> 
> 时间：2012-10-06T10:55:03.683
> 
> 标签：android

我一直在开发 Android 应用程序，但我对 4+ 版本的 Android 了解不多。因此，请帮助我 - 我制作了带有导航标签的 Android 应用程序：

```
final ActionBar actionBar = getActionBar();
actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS); 
```

但我还需要将下拉菜单添加到 ActionBar 以实现其他目标。我可以做吗？如果可能，请给我一个例子。先感谢您。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-06T10:56:57.267

你可以使用一个叫做 android spinner 的东西。它看起来像这样：

![在此处输入图像描述](../Images/b9afe819c1574817ee10bf5e7eea09e7.png)

您也可以通过多种方式对其进行自定义以适应您的应用程序设计。

这是谷歌关于如何使用这些的很棒的教程：

[http://developer.android.com/guide/topics/ui/controls/spinner.html](http://developer.android.com/guide/topics/ui/controls/spinner.html)

如果您想将此添加到操作栏，您可以通过微调器适配器来完成，如下所述：http: [//developer.android.com/guide/topics/ui/actionbar.html#Dropdown](http://developer.android.com/guide/topics/ui/actionbar.html#Dropdown)

如果您想添加图标来执行某些操作，那么您可以看到：http: [//developer.android.com/guide/topics/ui/actionbar.html#ActionItems](http://developer.android.com/guide/topics/ui/actionbar.html#ActionItems)

如果您想在栏本身中执行某些操作（例如在 google 搜索应用程序中搜索），请参阅：http: [//developer.android.com/guide/topics/ui/actionbar.html#ActionView](http://developer.android.com/guide/topics/ui/actionbar.html#ActionView)

如果要添加导航选项卡，请参阅：http: [//developer.android.com/guide/topics/ui/actionbar.html#Tabs](http://developer.android.com/guide/topics/ui/actionbar.html#Tabs)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-11T05:29:03.980

到目前为止，我找到的绝对是最好和最简单的答案就在这里。

基本上，在这种情况下不需要自定义布局。只需设置actonViewClass：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:yourapp="http://schemas.android.com/apk/res-auto" >

  <item android:id="@+id/spinner"
    yourapp:showAsAction="ifRoom"
    yourapp:actionViewClass="android.widget.Spinner" />
</menu> 
```

然后像往常一样在 onCreateOptionsMenu 中处理它：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.menu_layout, menu);
    MenuItem item = menu.findItem(R.id.spinner);
    Spinner spinner = (Spinner) MenuItemCompat.getActionView(item);
    spinner.setAdapter(adapter); // set the adapter to provide layout of rows and content
    s.setOnItemSelectedListener(onItemSelectedListener); // set the listener, to perform actions based on item selection 
```

这是迄今为止最简单和最干净的解决方案。原作者 François POYER 致谢。

# css - 关于css边框、边距、内边距和宽度

> ID：12759148
> 
> 赞同：0
> 
> 时间：2012-10-06T10:55:30.997
> 
> 标签：css, width, border, margin, padding

使用 css 边框、边距、填充和宽度我遇到了一个额外的像素......

我知道一个元素的总宽度和高度是它的宽度、边框、边距和填充的总和。

如果您查看此[http://jsfiddle.net/Fs8HQ/](http://jsfiddle.net/Fs8HQ/)，似乎一切正常。当您单击按钮时，将一些像素从边框移动到边距会创建一个伪动画。

[现在让我们在http://jsfiddle.net/Fs8HQ/1/](http://jsfiddle.net/Fs8HQ/1/)中设置一个固定的宽度和高度（从 :active 中删除宽度和高度）：在 Firefox 和 Chrome 中，有一个额外的高度和一个额外的宽度像素可以移动所有相邻的元素。在 Opera 中有一个额外的宽度和两个额外的高度像素。他们来自哪里？

但是这里[http://jsfiddle.net/hJTpY/](http://jsfiddle.net/hJTpY/)将像素从边框移动到填充似乎可以解决所有问题，但是伪动画不一样。

在前两个小提琴中，边界被缩小到接近内容；在最后一个中，扩展的内容减少了边界。

为什么会这样？我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T12:23:04.383

这是我最近注意到的一个问题：

W3C 引入的默认 boxmodel 是`content-box`如果声明了正确的 doctype（与 Microsoft boxmodel 相矛盾，Microsoft boxmodel 可以通过在 IE 中使用 quirks-mode 来触发）。

但是，最近我注意到浏览器具有声明的 UA 样式`box-sizing:border-box`（仅适用于输入元素？）。这就是为什么您的技巧不起作用的原因，因为边框已计入宽度。要解决此问题，您必须声明`box-sizing:content-box`. 看到[这个问题](https://stackoverflow.com/questions/12707192/how-to-fix-agent-default-box-sizing-border-box-to-content-box-css3)处理同样的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T11:55:32.250

出现问题是因为当您固定宽度时，例如在 100px 时，带有边框的框的宽度将为 100px（由于 box-sizing 属性），因此您增加的边距不会通过框的缩小来补偿，当您不设置其宽度时会发生这种情况。

使用固定宽度和 box-sizing 设置为边框框，您根本不应该修改 margin 属性以避免其他框移动。

简单的解决方法当然是在 content-box 设置 box-sizing ：http: [//jsfiddle.net/Fs8HQ/7/](http://jsfiddle.net/Fs8HQ/7/)

有关 css box-sizing 属性的更多信息，请[访问](https://developer.mozilla.org/en-US/docs/CSS/box-sizing)。

# vb.net - 如何使用 Visual Basic 2008 Express Edition 打开 .txt 文件并将其显示在文本框中

> ID：12759151
> 
> 赞同：0
> 
> 时间：2012-10-06T10:55:53.780
> 
> 标签：vb.net, c#-to-vb.net

我正在使用[Visual Basic 2008 Express Edition](http://en.wikipedia.org/wiki/Microsoft_Visual_Studio_Express#Visual_Basic_Express)，这对我来说很新。我有一个浏览按钮，我添加代码的方式是当我单击浏览按钮时浏览文件并在标签框中显示其路径。

同样，我希望我选择的文件的内容显示在文本框中。我使用以下代码：

```
 Imports System.IO.StreamReader
    Dim oReader As StreamReader

    OpenFileDialog1.CheckFileExists = True
    OpenFileDialog1.CheckPathExists = True
    OpenFileDialog1.DefaultExt = "txt"
    OpenFileDialog1.FileName = ""
    OpenFileDialog1.Filter = "Text Files (*.txt)|*.txt|All Files (*.*)|*.*"
    OpenFileDialog1.Multiselect = False

    If OpenFileDialog1.ShowDialog = Windows.Forms.DialogResult.OK Then
        oReader = New StreamReader(OpenFileDialog1.FileName, True)
        RichTextBox1.Text = oReader.ReadToEnd
    End If 
```

但是我得到了该`Imports`行的语法错误，并且[StreamReader](https://msdn.microsoft.com/en-us/library/system.io.streamreader%28v=vs.110%29.aspx)未声明。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T11:08:48.403

您的 import 语句应该在文件的最顶部，在 Sub 或 Function 之外，并且您的 oReader 声明应该至少在类内部或方法内部。

此外，您的导入不正确。“Imports System.IO.StreamReader”应该是“Imports System.IO”，否则您将只能访问 StreamReader 中声明的类（如果有的话）。您真正想要的是导入 System.IO 命名空间，以便您可以访问该命名空间中声明的类型。

```
Imports System.IO

Public Class MyForm

    ' ... Whatever code you have for your form

    Public Sub OpenFile()

        Dim oReader As StreamReader

        OpenFileDialog1.CheckFileExists = True
        OpenFileDialog1.CheckPathExists = True
        OpenFileDialog1.DefaultExt = "txt"
        OpenFileDialog1.FileName = ""
        OpenFileDialog1.Filter = "Text Files (*.txt)|*.txt|All Files (*.*)|*.*"
        OpenFileDialog1.Multiselect = False

        If OpenFileDialog1.ShowDialog = Windows.Forms.DialogResult.OK Then
            oReader = New StreamReader(OpenFileDialog1.FileName, True)
            RichTextBox1.Text = oReader.ReadToEnd
        End If

    End Sub

End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T11:46:01.263

您应该导入`System.IO`命名空间。

并在代码中查看这些更改：

```
Dim oReader As StreamReader
openFileDialog1.CheckFileExists = True
openFileDialog1.CheckPathExists = True
openFileDialog1.DefaultExt = "txt"
openFileDialog1.FileName = ""
openFileDialog1.Filter = "Text Files (*.txt)|*.txt|All Files (*.*)|*.*"
openFileDialog1.Multiselect = False
If openFileDialog1.ShowDialog() = DialogResult.OK Then
    oReader = New StreamReader(openFileDialog1.FileName, True)
    richTextBox1.Text = oReader.ReadToEnd()
End If 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-14T08:04:36.650

```
Dim reader As StreamReader = My.Computer.FileSystem.OpenTextFileReader("C:\\testfile.txt")

    Dim a As String
    Dim B As String
    Do
        a = reader.ReadLine

        For i = 0 To a.Length

            If a.Substring(i, 1).ToString() = "{" Then

                B = B & a.Substring(i)

                LBL.Text = B
            End If
          'Iam Juman Mandra
        Next
    Loop Until a Is Nothing

    reader.Close() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-21T03:57:50.177

下面的代码非常简单，可以帮助您

打开文件代码

```
 If OpenFileDialog1.ShowDialog = Windows.Forms.DialogResult.OK Then
            Me.RichTextBox1.LoadFile(OpenFileDialog1.FileName, RichTextBoxStreamType.PlainText)

 End If 
```

保存代码

```
 If SaveFileDialog1.ShowDialog = DialogResult.OK Then

    RichTextBox1.SaveFile(SaveFileDialog1.FileName, RichTextBoxStreamType.PlainText)

End If 
```

# deployment - Erlang/OTP 生产应用部署简介

> ID：12759153
> 
> 赞同：18
> 
> 时间：2012-10-06T10:56:02.003
> 
> 标签：deployment, erlang, production, erlang-otp, mochiweb

我想在 VPS 上开发 Erlang/OTP 应用程序并将其部署到生产环境中。

我非常熟悉在本地机器上开发 Erlang 代码，我的问题是关于部署的。

基本上，我想知道我应该采取哪些步骤才能将 Erlang 代码从本地机器移动到生产服务器并使其运行，即可供用户使用。

*注意：我已经阅读了一些关于[Erlang 和命令行](http://www.trapexit.org/Running_Erlang_Code_From_The_Command_Line)、Erlang[代码](http://www.erlang.org/doc/man/code.html)模块、Erlang[版本](http://learnyousomeerlang.com/release-is-the-word#am-i-an-executable-yet)的文档，但我仍然不确定如何完成所需的任务。*

但是，我想在服务器上部署基于 Erlang 的软件比在[LAMP](http://www.unixmen.com/install-lamp-with-1-command-in-ubuntu-1010-maverick-meerkat/)`sudo tasksel`上部署要复杂一些。

我计划有一个 Erlang/OTP 应用程序，它有 Mochiweb、CouchDB ( [couchbeam](https://github.com/benoitc/couchbeam) ) 和[boss_db](https://github.com/evanmiller/boss_db)作为依赖项。

因此，关于在生产服务器上部署所有这些东西的*新手*问题如下：

*   我打算使用 Ubuntu Server 12.04；在生产中用于 Erlang/OTP 的 Linux 发行版是否有更好的选择？
*   应该如何组织所有代码？我应该将我的应用程序放入 /home/myapp/ 目录，然后将所有依赖项放入 /home/myapp/deps 吗？还是应该将所有依赖项放入/usr/local/lib/erlang/lib？（由代码返回：get_path()）。我应该以某种方式定期更新依赖项还是应该冻结它们？
*   服务器启动后如何使整个应用程序启动？它应该是某种 bash 脚本还是其他什么？
*   我知道 Erlang 允许热代码升级，但我应该如何组织呢？在 Rails 上我可以[用 git 更新代码，](http://www.hagenburger.net/BLOG/How-to-auto-deploy-Rails-apps-after-Git-push.html) Erlang 世界中是否存在类似的东西？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-06T14:32:35.583

有两种类型的依赖：内部和外部。如果您想以正确的方式进行操作（tm），则需要一些时间才能开始工作：

### 外部依赖：

首先考虑后者，*外部*依赖项是在您的应用程序运行之前必须运行的其他东西。例如 PostgreSQL 数据库或 Riak 集群。对于那些，您通常只使用 Ubuntu 中的常用工具来使其正常启动。我在使用`monit`这些任务方面有很好的经验：

[http://mmoni.com/monit/](http://mmonit.com/monit/)

### 内部依赖：

对于*内部*依赖，您需要将您的程序安排到Erlang VM 内的*应用程序中。*它们相互依赖，就像外部依赖一样。例如，您的主应用程序可能需要在启动之前运行记录器。然后你创建一个*release*。发布将 Erlang 二进制文件和必要的库/梁/应用程序复制到*发布*目录中，形成一个自包含的 Erlang 系统。它包含一个*引导脚本*，它告诉如何以正确的顺序启动应用程序并保持它们运行。因此，您可以压缩此版本，将其复制到服务器，然后启动它。这里介绍了一些基础知识：

[http://learnyousomeerlang.com/release-is-the-word](http://learnyousomeerlang.com/release-is-the-word)

但也请阅读之前关于应用程序的章节。你也可以`rebar`打电话`reltool`让你构建一个版本。这是我通常做的。

### 热升级：

可以通过多种方式处理生产中的热升级。您可以将梁移动到机器上然后部署它，获取外壳然后调用`l(Module)`以将其加载到正在运行的系统中。这适用于较小的修复。对于大型系统升级，您*可以*进行发布升级，这将在不停止服务的情况下即时升级正在运行的系统。但是，如果您的系统大多不共享，通常不值得。相反，您可以拥有多台机器并按顺序升级它们。

例如，您可以升级一台机器，然后使用像 HAProxy 这样的系统将所有请求的 2% 发送到新系统。然后系统地调高请求负载权重。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-07T01:10:59.850

虽然@I GIVE CRAP ANSWERS 给出了非常详尽的总结，但我觉得不得不使用[sync](http://github.com/rustyio/sync)，这有助于自动化模块的热重新编译和重新加载。

简单的方法是将同步指定为 rebar 依赖项，然后当您准备部署升级时，您可以`sync:go()`在 Erlang 节点上运行。这将启动同步引擎，它监视文件系统的变化。然后你可以使用 git 推送到你的服务器。Sync 会注意到文件的变化，重新编译它们，并自动加载新的梁。

然后，您可以`sync:stop()`立即运行以告诉系统停止监视文件系统更改（通常不建议在实时服务器上保持同步运行，只是为了防止意外重新编译，因为无论出于何种原因，源文件发生更改并且是无意的。

# ruby-on-rails - 在此实现每个 do 循环

> ID：12759155
> 
> 赞同：-1
> 
> 时间：2012-10-06T10:56:05.247
> 
> 标签：ruby-on-rails, ruby, highcharts

我将如何在这里实现每个循环并省略最后一条记录的逗号？代码基于[here](https://github.com/michelson/lazy_high_charts/wiki/Combination-Chart)。

```
@h = LazyHighCharts::HighChart.new('graph') do |f|
   f.series(:type=> 'pie',:name=> 'Total consumption', :data=> [
        #implement a each do loop here  
        @products.each do |p|
        {
           :name=> p.name, :y=> p.price
        },
        end
        ])
end 
```

我希望输出为：

```
{:name=> "Cereal", :y=> 5}, 
{:name=> "Dog Buscuits", :y=> 12},
{:name=> "Steak", :y=> 8} #i dont want a comma for the last record 
```

但我当前的循环最后放了一个逗号，所以我得到一个语法错误

```
{:name=> "Cereal", :y=> 5}, 
{:name=> "Dog Buscuits", :y=> 12},
{:name=> "Steak", :y=> 8}, #ERROR here 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T11:05:41.437

如果您需要一个数组作为输出，请使用 map

```
:data=> @products.map{ |p|{:name=> p.name, :y=> p.price} } 
```

# android - 如何以可靠的方式打开键盘保护？

> ID：12759156
> 
> 赞同：0
> 
> 时间：2012-10-06T10:56:12.093
> 
> 标签：android, keyguard

*重复警告：此问题涉及 Android API 的详细信息，适用于从某些前端和服务调用，SO 上有许多类似的线程，但仅关注前端。*

## 问题

我想以编程方式打开键盘保护，**例如**用户单击我的应用程序中的一个按钮并且手机被锁定（要使用手机用户必须先解锁它）。

问题是——我想找到一种坚如磐石的方法，它适用于每一种有效的情况。

## 尝试

我试过了：

*   `lockNow`with `DevicePolicyManager`-- 当屏幕关闭（但手机未锁定）时，此呼叫将被忽略（即未激活键盘保护）

*   `reenableKeyguard`with `KeyguardManager.KeyguardLock`-- 在所有可能的情况下都会忽略对方法的调用

*   `goToSleep`with `PowerManager`-- 我不能调用它，因为权限问题，`DEVICE_POWER`尽管我已经有这个权限集，它仍然需要

到目前为止，我追求第一种方式（`lockNow`）与额外的黑客以某种方式处理屏幕关闭时的情况，但它非常丑陋，因此我希望有一些简单的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T22:54:36.783

一种解决方案可能是在延迟后处理程序上使用线程。这里的问题是，即使屏幕关闭，线程也会保持活动状态，您的应用程序将处于暂停状态（除非进程被杀死）

```
Handler handler = new Handler();
handler.postDelayed(new Runnable() {
    @Override
    public void run() {
        keyLock.reenableKeyguard();
        Log.i("LOCK","key guard back on");
        finish();
    }
}, 300); 
```

另一种方法是使用定时器任务，但有时定时器任务可能会被杀死（不确定，但我过去的经验说不确定）

```
TimerTask Active = new TimerTask() {
@Override
public void run() {
    keyLock.reenableKeyguard();
    Log.i("LOCK","key guard back on");
    finish();
    }
};
Timer starter = new Timer();
starter.schedule(Active, 300); 
```

我不能 100% 确定这是您正在寻找的“坚如磐石的方式”，但我已经与设备策略管理器和键盘保护管理器一起工作了一段时间，我遇到了与 locknow() 类似的问题方法将关闭屏幕，然后重新打开具有以上 android 4.0 的设备。

我在查看 DDMS 调试日志并希望在某些设备上进行测试时遇到了这个解决方案。到目前为止，它并没有让我失望，所以无论如何这里是一个小费。

1.  禁用键盘保护
2.  调用 locknow()
3.  使用上述方法在 300 毫秒左右重新启用键盘保护......（我更喜欢处理程序，它对我来说就像一个魅力）

# java - 用户ID保存在哪里？

> ID：12759161
> 
> 赞同：0
> 
> 时间：2012-10-06T10:56:47.253
> 
> 标签：java, web, profile

我正在设计一个 Web 应用程序，它应该保留包含大量信息的用户个人资料，显然它从数据库中读取数据。

目前，我的会话中有用户名，每次我需要用户信息时都应该读取会话，然后创建配置文件类的对象（再次从数据库中读取数据）来检索用户信息，这是解决此类问题的最佳做法吗?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T11:21:03.747

这是性能和内存消耗之间的典型权衡。如果您想要一个快速的应用程序，请将整个用户配置文件保存在 HTTP 会话中，但要确保您的服务器中有足够的内存。

如果您想保持较低的资源消耗，请在会话中仅存储用户 ID，并在每次需要时从数据库中加载它。这也使集群更简单，因为要迁移的数据更少。

合理的妥协是使用后一种方法和一些缓存。这样，*热*用户（当前正在使用系统）被保存在内存中，而空闲用户或不经常访问的新页面被从缓存中清除（假设缓存小于 HTTP 会话的数量）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T11:22:25.663

同意 Obe6 的响应，最佳做法是确保配置文件不在会话中，然后从数据源中检索，然后将其附加到会话中。

当会话无效时，所有信息都会从会话中删除。IBM 有一篇很好的文章。 [http://www.ibm.com/developerworks/websphere/library/bestpractices/store_objects_in_httpsession.html](http://www.ibm.com/developerworks/websphere/library/bestpractices/store_objects_in_httpsession.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T11:01:30.573

通常，“最佳实践”是在会话中维护用户配置文件数据，并仅在第一次从数据库中加载所有需要的信息。

换句话说，`Profile`在你的 http 会话中维护一个类的实例（必须实现`Serializable`）。Profile 必须包含所有使用*频率更高*的信息。

请注意，“读取会话”就像读取 HashMap（因此在性能方面具有最低成本）。当`HttpSession`到期时，Profile 将被垃圾收集。

更新（根据您的评论）：

要计算（或查找）活跃用户（其他都是非活跃用户），一个典型的解决方案是`Profile`实现`HttpSessionBindingListener`接口。当`Profile`绑定到会话时，会收到通知，因此您可以增加静态计数器（例如 Profile 类的静态属性），并且可以在`Profile`未绑定时减少它（以编程方式未绑定或因为其会话已过期）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T12:45:16.037

Session is generally a good enough place to keep the user profile data. You need to quantify how much of data you are talking here. Let's say its 5KB per session, then, you could store up to 20000 user profile in memory using 100 MB of RAM. You can allocate heap to JVM accordingly based on the max. number of active sessions you expect on your site.

This is just one aspect. When you plan to scale the app by adding more app servers, then, you can even think of moving the sessions out to a out-of-process cache/memory stores such as memcached.

If all the user profile data you keep in session does not get rendered on each page, then, it may be a good idea only to keep bare minimum in session and fetch other data as per need.

# php - PHP - 检查子域是否存在的有效方法

> ID：12759166
> 
> 赞同：1
> 
> 时间：2012-10-06T10:57:10.650
> 
> 标签：php, url, subdomain

> **可能重复：**
> [获取 URL 子域的 PHP 函数](https://stackoverflow.com/questions/5292937/php-function-to-get-the-subdomain-of-a-url)

我正在寻找一种有效的方法来判断 URL 中是否存在子域。

域名将始终是固定的，例如 mydomin.com，但是如果未设置子域，我需要重定向。

我的一个想法是，如果有多个句点 (.)，则会设置一个子域，但我不确定如何实现这一点。

非常感谢。

**编辑：**对不起，不太清楚。我没有当前的解决方案，但是查看其他帖子，我可以看到几个有关如何获取子域的示例，例如

```
array_shift(explode(".",$_SERVER['HTTP_HOST'])); 
```

但我不想要子域，只是为了检查一个是否存在。子域可以是任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T11:02:30.380

我宁愿使用 apache 重写引擎（或任何网络服务器重写过程）：

```
# .htaccess 文件

RewriteCond %{HTTP_HOST} ^yourdomin\.com$
重写规则 (.*) http://sub.yourdomin.com/$1 [R=301,L]

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T11:06:07.893

您可以使用`parse_url`. 然后你把它分解为`explode()`：

```
function hasSubdomain($url) {
    $parsed = parse_url($url);
    $exploded = explode('.', $parsed["host"]);
    return (count($exploded) > 2);
} 
```

在谷歌上，你可以很容易地找到如何重定向某人。

# c# - 当焦点位于文本框的自动完成框时禁用键事件

> ID：12759177
> 
> 赞同：2
> 
> 时间：2012-10-06T10:59:00.290
> 
> 标签：c#, winforms, c#-4.0, textbox, key-events

在我的项目中有一个 Form `mainForm`，其中有两个 textBoxes`txtUserName`和`txtPassword`一个 button `btnLogin`。

我给出了以下`txtUserName`属性：

**txt用户名属性**

```
AutoCompleteCustomSource - Collection
                            --> Administrator
                            --> Clerk
AutoCompleteMode   - Suggest
AutoCompleteSource - CustomSource 
```

**btnLogin_Click 事件**

```
if (txtUserName.Text.Equals("Administrator") && txtPassword.Text.Equals("123"))
{
    //function to access admin features
}
else if (txtUserName.Text.Equals("Clerk") && txtPassword.Text.Equals("123"))
{
    //function to access clerk features
}
else
{
    MessageBox.Show("Please Enter correct details", "Login Error");
} 
```

我已将`mainForm` `keypreview`to`true`和实现的函数设置为 keyDown 事件，`mainForm`如下代码所示：

**mainForm_KeyDownEvent**

```
if (e.KeyCode.Equals(Keys.Enter))  //Invokes whenever Enter is pressed
{
    btnLogin_Click(sender,e);  //login
} 
```

现在我的问题是，只要焦点位于`txtUserName`并按下`A`，就会显示下拉菜单以选择“管理员”（它在集合中定义，如我在上面的属性中所示）。当我单击`Enter`键盘时，它显示 MessageBox 而不是选择“管理员”。我知道这是调用 .keydown 事件`mainForm`。如何禁用 keyDown 事件，当它在文本框下拉事件上时，我可以按下`enter`？

**编辑**：
我尝试了以下代码`public form()`：（*不工作*）

```
InitializeComponent();
if (txtUserName.AutoCompleteMode) { /* showing red scribbles */
            this.KeyDown -= mainForm_KeyDown;
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T12:55:55.590

您根本不应该处理 Enter 键。您可以删除您的`KeyDown`处理程序，而是使用[`AcceptButton`表单的属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.acceptbutton%28v=VS.100%29.aspx)来设置按下 Enter 时“单击”的按钮。当另一个控件已经处理了 Enter 键时，这应该*不会“单击”按钮。*

这对您的情况来说还不够，因为标准的 Windows 行为*是*让 Enter 键按下默认按钮。例如，按 Win+R 以获取“运行...”对话框，开始键入 C:\Use，按向下键选择 C:\Users，按 Enter，然后看看会发生什么。

为了覆盖该行为，您需要让文本框告诉表单它将自己处理 Enter 键，以便表单不会将其发送到默认按钮。这可以通过创建派生类并覆盖来完成`IsInputKey`：

```
public class MyTextBox : TextBox
{
    protected override bool IsInputKey(Keys keyData)
    {
        return base.IsInputKey(keyData) || ((keyData & ~Keys.Shift) == Keys.Enter && IsDroppedDown);
    }
} 
```

但是，`TextBox`使用[`SHAutoComplete`函数](http://msdn.microsoft.com/en-us/library/windows/desktop/bb759862%28v=vs.85%29.aspx)实现自动完成，它会在后台自动创建一个[`IAutoComplete`对象。](http://msdn.microsoft.com/en-us/library/bb776292%28v=vs.85%29.aspx)无法访问该对象，因此无法创建`IsDroppedDown`我使用的属性。`IsInputKey`它将使用 来实现[`IAutoCompleteDropDown.GetDropDownStatus`](http://msdn.microsoft.com/en-us/library/bb776285%28v=vs.85%29.aspx)，但由于该对象不可访问，因此您无法（可靠地）确定下拉列表是否正在显示。

您需要在*不*使用内置`AutoComplete*`属性的情况下实现自动完成，或者您需要*始终*抑制 Enter 键（删除`&& IsDroppedDown`上面的`IsInputKey`）。

**更新**`IAutoComplete`：这是手动创建对象的方法。字符串 Administrator 和 Clerk 是硬编码的。GetDropDownStatus 函数用于在下拉列表可见时抑制任何默认按钮对 Enter 的处理。欢迎反馈。

IAutoComplete.cs：

```
using System;
using System.Runtime.InteropServices;
using System.Runtime.InteropServices.ComTypes;

[ComImport]
[Guid("00bb2762-6a77-11d0-a535-00c04fd7d062")]
[InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
[CoClass(typeof(IAutoCompleteClass))]
interface IAutoComplete
{
    void Init(HandleRef hwndEdit, IEnumString punkACL, string pwszRegKeyPath, string pwszQuickComplete);
    void Enable(bool fEnable);
} 
```

IAutoComplete2.cs：

```
using System;
using System.Runtime.InteropServices;
using System.Runtime.InteropServices.ComTypes;

[Guid("EAC04BC0-3791-11d2-BB95-0060977B464C")]
[InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
interface IAutoComplete2
{
    void Init(HandleRef hwndEdit, IEnumString punkACL, string pwszRegKeyPath, string pwszQuickComplete);
    void Enable(bool fEnable);
    void SetOptions(AutoCompleteOptions dwFlag);
    AutoCompleteOptions GetOptions();
}; 
```

自动完成选项.cs：

```
using System;

[Flags]
enum AutoCompleteOptions : int
{
    None = 0x00,
    AutoSuggest = 0x01,
    AutoAppend = 0x02,
    Search = 0x04,
    FilterPrefixes = 0x08,
    UseTab = 0x10,
    UpDownKeyDropsList = 0x20,
    RtlReading = 0x40,
    WordFilter = 0x80,
    NoPrefixFiltering = 0x100,
} 
```

IAutoCompleteDropDown.cs：

```
using System;
using System.Runtime.InteropServices;
using System.Text;

[Guid("3CD141F4-3C6A-11d2-BCAA-00C04FD929DB")]
[InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
interface IAutoCompleteDropDown
{
    void GetDropDownStatus(out AutoCompleteDropDownFlags dwFlags, out StringBuilder wszString);
    void ResetEnumerator();
} 
```

AutoCompleteDropDownFlags.cs：

```
using System;

[Flags]
enum AutoCompleteDropDownFlags : int
{
    None = 0x00,
    Visible = 0x01
} 
```

IAutoCompleteClass.cs：

```
using System;
using System.Runtime.InteropServices;

[ComImport]
[Guid("00BB2763-6A77-11D0-A535-00C04FD7D062")]
class IAutoCompleteClass
{
} 
```

枚举字符串.cs：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.InteropServices;
using System.Runtime.InteropServices.ComTypes;

class EnumString : IEnumString
{
    const int E_INVALIDARG = unchecked((int)0x80070057);
    const int S_OK = 0;
    const int S_FALSE = 1;

    int current;
    string[] strings;

    public EnumString(IEnumerable<string> strings)
    {
        this.current = 0;
        this.strings = strings.ToArray();
    }

    public void Clone(out IEnumString ppenum)
    {
        ppenum = new EnumString(strings);
    }

    public int Next(int celt, string[] rgelt, IntPtr pceltFetched)
    {
        if (celt < 0)
            return E_INVALIDARG;

        int num = 0;
        while (current < strings.Length && celt != 0)
        {
            rgelt[num] = strings[current];
            current++;
            num++;
            celt--;
        }

        if (pceltFetched != IntPtr.Zero)
            Marshal.WriteInt32(pceltFetched, num);

        if (celt != 0)
            return S_FALSE;

        return S_OK;
    }

    public void Reset()
    {
        current = 0;
    }

    public int Skip(int celt)
    {
        if (celt < 0)
            return E_INVALIDARG;

        if (strings.Length - current > celt)
        {
            current = strings.Length;
            return S_FALSE;
        }

        current += celt;
        return S_OK;
    }
} 
```

MyTextBox.cs：

```
using System;
using System.Runtime.InteropServices;
using System.Text;
using System.Windows.Forms;

public class MyTextBox : TextBox
{
    IAutoComplete2 autoComplete;
    IAutoCompleteDropDown autoCompleteDropDown;

    public bool IsDroppedDown
    {
        get
        {
            if (autoCompleteDropDown == null)
                return false;

            AutoCompleteDropDownFlags dwFlags;
            StringBuilder wszString;
            autoCompleteDropDown.GetDropDownStatus(out dwFlags, out wszString);
            return (dwFlags & AutoCompleteDropDownFlags.Visible) != AutoCompleteDropDownFlags.None;
        }
    }

    protected override void CreateHandle()
    {
        base.CreateHandle();

        autoComplete = (IAutoComplete2)new IAutoComplete();
        autoCompleteDropDown = (IAutoCompleteDropDown)autoComplete;
        autoComplete.SetOptions(AutoCompleteOptions.AutoSuggest);
        autoComplete.Init(new HandleRef(this, this.Handle), new EnumString(new string[] { "Administrator", "Clerk" }), null, null);
    }

    protected override void DestroyHandle()
    {
        ReleaseAutoComplete();
        base.DestroyHandle();
    }

    protected override void Dispose(bool disposing)
    {
        if (disposing)
        {
            ReleaseAutoComplete();
        }
        base.Dispose(disposing);
    }

    protected override bool IsInputKey(Keys keyData)
    {
        return base.IsInputKey(keyData) || ((keyData & ~Keys.Shift) == Keys.Enter && IsDroppedDown);
    }

    void ReleaseAutoComplete()
    {
        if (autoComplete != null)
        {
            Marshal.ReleaseComObject(autoComplete);
            autoComplete = null;
            autoCompleteDropDown = null;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T11:17:37.427

您需要覆盖 keydown 事件处理程序。

```
 protected override void OnKeyDown(KeyEventArgs e)
    {
        //call original event handler. Remove it if you don't need it at all.
        base.OnKeyDown(e);

        //Insert your code here....
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T12:18:46.467

其实你有两个问题。

首先，将 txtUserName 的 AutoCompleteMode 属性设置为“SuggestAppend”，而不是简单的“Suggest”。这样，如果用户键入第一个或两个字母，正确的条目将自动附加到 txtUSerName.Text。

接下来，修改您的表单代码，如下所示：

```
void  Form1_KeyDown(object sender, KeyEventArgs e)
{
    if (e.KeyCode.Equals(Keys.Enter))  //Invokes whenever Enter is pressed
    {
        if (txtPassword.ContainsFocus)
        {
            btnLogin_Click(sender, e);  //login
        }
        else
        {
            this.txtPassword.Focus();
        }
    }
}

private void btnLogin_Click(object sender, EventArgs e)
{
    if (txtUserName.Text.Equals("Administrator") && txtPassword.Text.Equals("123"))
    {
        MessageBox.Show("Administrator");
    }
    else if (txtUserName.Text.Equals("Clerk") && txtPassword.Text.Equals("123"))
    {
        MessageBox.Show("Clerk");
    }
    else
    {
        MessageBox.Show("Please Enter correct details", "Login Error");
    }
} 
```

在上面，Key Down 事件处理代码测试密码文本框是否有焦点（意思是，用户可能已经输入了用户名和密码，并准备提交数据）。如果是这样，则调用 btnLogin_Click 事件。否则，（意思是 txtUserName 可能具有焦点）控制权被传递给 txtPassword 以继续数据输入。

更新：重新 - 您的评论：

只需像这样杀死 Key Down 事件处理程序中的逻辑：

修改后的事件处理代码：

```
void  Form1_KeyDown(object sender, KeyEventArgs e)
{
    if (e.KeyCode.Equals(Keys.Enter))  //Invokes whenever Enter is pressed
    {
        btnLogin_Click(sender, e);  //login
    }
} 
```

请注意，另一个小的改进（考虑到代码的整体结构）是使用组合框来选择用户名，并将自动完成源设置为“ListItems”，然后输入与文本框相同的选项。这需要用户从预定义的列表中进行选择。这仍然存在与之前类似的可扩展性问题，但如果用户在输入用户名数据时只是打错字，则为用户消除了不必要的步骤。

请记住，用户往往不喜欢弹出消息造成不必要的干扰。允许他们从下拉列表中选择适当的“用户名”，输入正确的密码，然后继续。

有一些更好的方法可以完成所有这些工作，但这应该可以调整您所拥有的工作秩序。

最后一点，让我观察一下，最终您可能希望找到一种更强大的方法来执行此类验证。任何时候您需要添加用户（在您的代码中，这些用户似乎更多地定义为“组”，您需要将其添加到条件事件处理树中。

您可能会检查加密文件或数据库中的持久用户名和密码，并在运行时将它们加载到字典或其他东西中。然后对用户/密码执行键/值查找。

或者其他的东西。

无论如何，希望这会有所帮助。

更新 2： 完整的代码全部在一个镜头中。这应该按照您的要求行事：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
            this.KeyDown +=new KeyEventHandler(Form1_KeyDown);
        }

        void  Form1_KeyDown(object sender, KeyEventArgs e)
        {
            if (e.KeyCode.Equals(Keys.Enter))  //Invokes whenever Enter is pressed
            {
                btnLogin_Click(sender, e);  //login
            }
        }

        private void btnLogin_Click(object sender, EventArgs e)
        {
            if (txtUserName.Text.Equals("Administrator") && txtPassword.Text.Equals("123"))
            {
                MessageBox.Show("Administrator");
            }
            else if (txtUserName.Text.Equals("Clerk") && txtPassword.Text.Equals("123"))
            {
                MessageBox.Show("Clerk");
            }
            else
            {
                MessageBox.Show("Please Enter correct details", "Login Error");
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-06T13:21:28.980

试试这个。希望当您的注意力集中在 txtUsername 或其他位置时，按 Enter 不会导致任何问题

如果您`a`输入`txtUserName`并按回车，您的`Admministrator`选择将从您的`autocompletecustomsource`使用中选择`regular expression`，焦点将转到`txtPassword`。我的正则表达式非常灵活，您可以对其进行一些限制，以从头开始严格匹配，也可以删除忽略大小写

`Regex rg = new Regex("^" + txtUserName.Text);`

```
 private void mainForm_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.KeyCode.Equals(Keys.Enter))// && !txtUserName.Focus())// && intFlag.Equals(0))
        {
            if (txtUserName.Text.Length > 0)
            {
                if (txtUserName.Focused)
                {
                    Regex rg = new Regex(txtUserName.Text, RegexOptions.IgnoreCase);
                    for (int i = 0; i < txtUserName.AutoCompleteCustomSource.Count; i++)
                    {
                        if (rg.IsMatch(txtUserName.AutoCompleteCustomSource[i]))
                        {
                            txtUserName.Text = txtUserName.AutoCompleteCustomSource[i];
                            txtPassword.Focus();
                            return;
                        }
                    }
                }
                if (txtPassword.Text.Length > 0)
                {
                    btnLogin_Click(null, null);  //login
                }
                else
                {
                    //MessageBox.Show("Please Give a Password");
                    txtPassword.Focus();
                }
            }
            else
            {
                //MessageBox.Show("Please Give a username");
                txtUserName.Focus();
            }
        }

        //if (txtPassword.ContainsFocus)
        //{
        //    btnLogin_Click(sender, e);  //login
        //}
        //else
        //{
        //    this.txtPassword.Focus();
        //}
    } 
```

# windows-phone-7 - WP7中的透明页面

> ID：12759180
> 
> 赞同：1
> 
> 时间：2012-10-06T11:00:16.440
> 
> 标签：windows-phone-7, xaml

在我的`WP7`应用程序中，我有 2 个页面，`page1`并且`page2`. 当用户导航到 时`page2`，我希望页面是透明的，以便`page1`可以在后台看到。我在中使用以下代码`page2`，但没有得到这种效果。

```
<phone:PhoneApplicationPage 
x:Class="BoxIt.Page3"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
FontFamily="{StaticResource PhoneFontFamilyNormal}"
FontSize="{StaticResource PhoneFontSizeNormal}"
Foreground="{StaticResource PhoneForegroundBrush}"
SupportedOrientations="Portrait" Orientation="Portrait"
mc:Ignorable="d" d:DesignHeight="768" d:DesignWidth="480"
shell:SystemTray.IsVisible="True"
 Opacity="0">

<!--LayoutRoot is the root grid where all page content is placed-->
<Grid x:Name="LayoutRoot" Opacity="0" Background="Transparent">

    <!--ContentPanel - place additional content here-->
    <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
        <Canvas HorizontalAlignment="Center" VerticalAlignment="Center" Width="400" Height="400">
            <TextBlock FontSize="30"  FontFamily="{StaticResource PoloBrush}" Canvas.Left="24" Canvas.Top="53" Height="30" Name="tb1" Text="" />
            <TextBlock FontSize="30" FontFamily="{StaticResource PoloBrush}" Canvas.Left="24" Canvas.Top="147" Height="30" Name="tb2" Text="" />
            <Button  ManipulationStarted="button1_ManipulationStarted" FontFamily="{StaticResource PoloBrush}" Canvas.Left="24" Canvas.Top="267" Content="Play again" Height="72" Name="button1" Width="179" />
            <Button  ManipulationStarted="button2_ManipulationStarted" FontFamily="{StaticResource PoloBrush}" Canvas.Left="209" Canvas.Top="267" Content="Menu" Height="72" Name="button2" Width="160" />
        </Canvas>
    </Grid>
</Grid> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T11:38:39.167

你不能那样做。当您执行导航 -`Page 1`隐藏时，会出现第 2 页。所以，你看不到第一页。

您可以对第 1 页显示一些透明的控制（如 yogesh 所说）。

否则，您可以将第 1 页渲染为位图并将其用作第 2 页的背景。

但我认为这不是 Metro 风格。我会使用其他 UI 决定。

# c++ - 在某些情况下禁用 MFC 中 CFileDialog 中的更改文件夹

> ID：12759183
> 
> 赞同：0
> 
> 时间：2012-10-06T11:00:29.383
> 
> 标签：c++, visual-c++, mfc, directory, visual-c++-2008

我正在尝试重载 CFiledialog 类以根据需要添加功能。我没有得到限制用户在某些情况下更改文件夹的解决方案，如下所述。

当用户尝试更改文件夹时。

*   我需要检查是否选择了任何文件夹？
*   如果选中，我需要检查是否有任何选定的文件夹包含所需的文件？
*   如果所选文件夹具有所需的文件，那么在这种情况下，我想禁用更改文件夹功能。

我试图覆盖`virtual void OnFolderChange();`函数，但是在文件夹已经更改之后调用此函数。

任何建议将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T05:34:48.993

我重写了 IDOK 的默认处理程序（即打开按钮）。与下面链接中的文章中的说明相同。

[http://www.codeguru.com/cpp/controls/toolbar/miscellaneous/article.php/c5497/Adding-Toolbar-button-in-CFileDialog.htm](http://www.codeguru.com/cpp/controls/toolbar/miscellaneous/article.php/c5497/Adding-Toolbar-button-in-CFileDialog.htm)

# java - 部署新版本 (com.google.common.cache.CacheBuilder)

> ID：12759188
> 
> 赞同：1
> 
> 时间：2012-10-06T11:02:09.903
> 
> 标签：java, google-app-engine

从昨天开始尝试上传我的应用程序的新版本（仅更改客户端代码），给了我以下异常（应用程序 id 是“riparautonline-hrd”）：

```
Uncaught exception from servlet
java.lang.NoClassDefFoundError: Could not initialize class com.google.common.cache.CacheBuilder
    at com.google.common.eventbus.EventBus.<init>(EventBus.java:158)
    at com.riparauto.server.guice.RestGuiceConfig.<init>(RestGuiceConfig.java:61)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:532)
    at java.lang.Class.newInstance0(Class.java:372)
    at java.lang.Class.newInstance(Class.java:325)
    at org.mortbay.jetty.webapp.WebXmlConfiguration.newListenerInstance(WebXmlConfiguration.java:650)
    at org.mortbay.jetty.webapp.WebXmlConfiguration.initListener(WebXmlConfiguration.java:631)
    at org.mortbay.jetty.webapp.WebXmlConfiguration.initWebXmlElement(WebXmlConfiguration.java:368)
    at org.mortbay.jetty.webapp.WebXmlConfiguration.initialize(WebXmlConfiguration.java:289)
    at org.mortbay.jetty.webapp.WebXmlConfiguration.configure(WebXmlConfiguration.java:222)
    at org.mortbay.jetty.webapp.WebXmlConfiguration.configureWebApp(WebXmlConfiguration.java:180)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1247)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.createHandler(AppVersionHandlerMap.java:219)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.getHandler(AppVersionHandlerMap.java:194)
    at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:134)
    at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:447)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:452)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:459)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:701)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:336)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:328)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:456)
    at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
    at java.lang.Thread.run(Thread.java:679) 
```

有人有/有同样的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T11:17:52.670

尝试清除所有已编译的类，然后重新编译。我在更改 AE sdk 版本时看到过这种事情。我不得不删除我认为的war/WEB-INF/classes。我删除了它并编译了所有内容，所以也许它是别的东西。我怀疑这是一个古老的课程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T09:02:58.787

确保 jsr305.jar 包含在您的类路径中

# excel - 设置 Excel 格式

> ID：12759189
> 
> 赞同：1
> 
> 时间：2012-10-06T11:02:14.517
> 
> 标签：excel, spreadsheet, validation

我想写`2-7`在excel电子表格中。当我写它时，它会自动转换为`2/7/2012`. 请让我知道如何克服这个愚蠢的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T11:03:55.070

从报价开始：

```
'2-7 
```

它应该工作。或者，您可以输入一个字符串：

```
="2-7" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T22:51:54.217

在输入数据之前将列格式化为文本。

# css - 如何将 JSF 组件对齐到中心

> ID：12759192
> 
> 赞同：10
> 
> 时间：2012-10-06T11:02:58.890
> 
> 标签：css, jsf, jsf-2, primefaces, alignment

在我的 JSF 2 - Primefaces 3 Web 应用程序中，我使用`<p:panelGrid>`和`<p:panel>`. 我在其中有多个组件，它们是左对齐的。我需要所有人都居中对齐。我们怎么能做到这一点我尝试使用 div 但它不起作用。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-07T00:08:05.770

查看生成的 HTML 输出并相应地更改 CSS。

如果您想要居中的 HTML 元素是[块元素](https://developer.mozilla.org/en-US/docs/Web/HTML/Block-level_elements)（`<div>`、`<p>`、`<form>`、`<table>`等，或强制为`display: block;`），那么您首先需要给它一个已知的宽度，然后您可以使用元素本身的CSS `margin: 0 auto;`。

如果您想要居中的 HTML 元素是一个[内联元素](https://developer.mozilla.org/en-US/docs/Web/HTML/Inline_elemente)（`<span>`、`<label>`、`<a>`、`<img>`等，或由 强制`display: inline;`），那么您可以使用 CSS`text-align: center;`在其父块元素上居中。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-04-21T12:51:09.100

如果您想将 primefaces:panelGrid 的内容设置为居中，您可以尝试以下操作：

```
<h:panelGrid column="1">

   <h:panelGroup style="display:block; text-align:center">

           your contents...

   </h:panelGroup>

</h:panelGrid> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-06T11:09:06.493

我们正在使用 RichFaces，但我们在这种情况下使用的解决方案也可能适用于 Primefaces。我们曾经用 css 设置内部元素的样式。
在浏览器中渲染页面后，您可以**查找源代码并找出渲染了哪些 HTML 元素**。然后**创建特定的 CSS**类并将整个面板或 panelGrid 中的内部元素设置为该类。

大多数时候，这是最简单的解决方案，也足够了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-06T15:51:48.510

尝试使用 css 和`p:panelGrid`columnClasses 属性：

`<p:panelGrid columnClasses="centered"> ... </p:panelGrid>` 然后在您的样式表中创建一个类，如：

`.centered { text-align: center; }`

如果您的`p:panelGrid`列中除了文本之外还有其他组件，请将 margin 属性添加到您的 css 类：

`.centered { text-align: center; margin-left: 50%; }`

# actionscript-3 - 在 Flash CS5 中，动作被分配给错误的关键帧

> ID：12759198
> 
> 赞同：1
> 
> 时间：2012-10-06T11:03:59.783
> 
> 标签：actionscript-3, flash-cs5

我正在使用 Flash CS5，并且自 AS2 时代以来就没有使用过 Flash。

我有一个动画剪辑符号，其中有一个动作层，其中我在第 1 帧有一个关键帧，在第 20 帧有一个关键帧。每个都应该有一个 stop(); 分配了动作，但是当我选择第 20 帧中的一个并开始写作时，小“a”出现在另一层的第 1 帧上。当我在该层的第 20 帧中制作关键帧并尝试分配动作时，它会产生相同的结果。它们出现在第一帧。

这是一个错误还是我错过了一些关于 AS3 的重要信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T17:37:15.687

事实上，AS3 对代码的实现方式更加挑剔（有充分的理由）。

您需要选择要放入代码的关键帧，然后使用您的操作窗口。正如 Markus 所说，确保您使用的是关键帧，而不是空帧。如果您尝试将代码写入空帧，它将默认为最近的关键帧。

此外，如果您有多个图层，并且说您的代码在 layer2 上，而您的对象在 layer1 上，如果您在 layer1 上有关键帧，并且打算在第 20 帧输入代码，但您的图层选择是 layer2，它将产生相同的结果如上所述。您必须确保正确的图层处于活动状态。动作窗口将只显示当前图层最近关键帧的代码。

希望能解决一些问题！

# http - 无法在 flex 移动应用程序中使用 yahoo 天气 api

> ID：12759201
> 
> 赞同：0
> 
> 时间：2012-10-06T11:04:15.050
> 
> 标签：http, flex4.5

我想在 flex 中获取 Yahoo 天气信息我想获取图像我想获取所有当前条件我的代码是:::

```
<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
    <s:HTTPService id="weatherService"
                   url="{BASE_URL}"
                   resultFormat="object"
                   result="weatherService_resultHandler(event)"
                   fault="weatherService_faultHandler(event)"
                   showBusyCursor="true">
        <s:request xmlns="">
            <w>{woeidInput.text.toString()}</w>             
        </s:request>
    </s:HTTPService>
</fx:Declarations>

<s:TextInput id="woeidInput" x="10" y="10" width="207" text="12744805"/>
<s:Button id="searchBtn" x="220" y="10" width="90" height="36" label="Search"/>
<s:Label id="cityName" x="134" y="82" height="17" fontSize="20" fontWeight="bold" text="Label"/>

<fx:Script>
    <![CDATA[
        import mx.rpc.events.FaultEvent;
        import mx.rpc.events.ResultEvent;
        private static const BASE_URL:String="http://weather.yahooapis.com/forecastrss?";
        private static const WOEID:String="615702";

        protected function weatherService_resultHandler(event:ResultEvent):void
        {
            // TODO Auto-generated method stub
            var result_weather_data:Object = event.result;

            cityName.text=result_weather_data.title;

        }

        protected function weatherService_faultHandler(event:FaultEvent):void
        {
            // TODO Auto-generated method stub

        }

    ]]>
</fx:Script> 
```

请给我一个解决方案，我是 flex 开发的新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T13:54:59.587

好的，我知道如何从 yahoo weather rss 获取一些信息。在脚本块中我改变了

```
<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
    <s:HTTPService id="weatherService"
                   url="{BASE_URL}"
                   resultFormat="e4x"
                   result="weatherService_resultHandler(event)"
                   fault="weatherService_faultHandler(event)"
                   showBusyCursor="true">
        <s:request xmlns="">
            <w>{woeidInput.text.toString()}</w>             
        </s:request>
    </s:HTTPService>
</fx:Declarations> 
```

现在在脚本块 II 中是这样的：

```
 protected function weatherService_resultHandler(event:ResultEvent):void
        {
            // TODO Auto-generated method stub
            var result_weather_data_xml:XML = new XML(event.result);
            var cityNameData:XMLList = result_weather_data_xml.descendants().attribute("city");
            var countryNameData:XMLList = result_weather_data_xml.descendants().attribute("country");
            var tempCData:XMLList = result_weather_data_xml.descendants().attribute("temp");
            var descripData:XMLList = result_weather_data_xml.descendants().attribute("text");
            var humidData:XMLList = result_weather_data_xml.descendants().attribute("humidity");

            var image:String;
            cityName.text=cityNameData + ", "+ countryNameData;
            tempData.text = tempCData+"\u00B0"+"F";
            descData.text = descripData[0];
            HumidityData.text = humidData+"%";
        } 
```

并且对于您想要在您的应用程序中的每一件事是给属性（“事物名称”）

# xcode - UIDatePicker 不更新 UILabel

> ID：12759203
> 
> 赞同：0
> 
> 时间：2012-10-06T11:04:19.657
> 
> 标签：xcode, ios5, uidatepicker

我有一个 UIDatePicker 并尝试根据用户选择的日期实时更新 UILabel。如果用户选择一个日期（比如 2012 年 1 月 21 日），然后改变主意（比如 2013 年 3 月 21 日），我希望 UILabel 能够反映这一变化。

到目前为止，UILabel 仅反映当前日期，即使用户从 UIDatePicker 中选择了另一个日期，也不会更新其文本。我还搜索了解决此问题的指针，但无济于事。任何帮助将不胜感激。谢谢。

到目前为止的代码：.h 文件，我有

```
@property (strong, nonatomic) IBOutlet UILabel *entryDateSetLabel;
@property (strong, nonatomic) IBOutlet UIDatePicker *entryDateSelected;

- (IBAction)datePickerDateChanged:(id)sender; 
```

datePickerDateChanged 连接到日期选择器的值更改事件

.m 文件，

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.entryDateSelected = [[UIDatePicker alloc] init];

    [self.entryDateSelected addTarget:self action:@selector(datePickerDateChanged:) forControlEvents:UIControlEventValueChanged];
}

- (IBAction)datePickerDateChanged:(id)sender {

    NSDateFormatter *outputFormatter = [[NSDateFormatter alloc] init];
    [outputFormatter setDateFormat:@"MMMM d, yyyy"];

    NSString *entryDateInString = [outputFormatter stringFromDate:self.entryDateSelected.date];

    [[self entryDateSetLabel] setText: entryDateInString];
} 
```

截图

![在此处输入图像描述](../Images/46c913e50257e1ad5791797946696d6d.png) ![在此处输入图像描述](../Images/578e803ba8e8d99fe8d5ad2a64e26cae.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T11:29:06.693

在“值更改”事件中连接数据选择器和

使用这个代码我从其他复制它所以你必须做一些改变

```
NSDate *today1 = pkrViewDate.date;
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"MMMM dd, yyyy"];
NSString *dateString11 = [dateFormat stringFromDate:today1];
lblDate.text=dateString11; 
```

ans 还检查当您滚动 datepicker 时“datePickerDateChanged”方法是否正在调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T23:24:48.840

刚刚解决了问题。:-)

viewDidLoad 应该是

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSDate *now = [NSDate date];
    [_entryDateSelected setDate:now animated:YES];

     //self.entryDateSelected = [[UIDatePicker alloc] init];

    [self.entryDateSelected addTarget:self action:@selector(datePickerDateChanged:) forControlEvents:UIControlEventValueChanged];
} 
```

希望这对其他人有帮助。

# jquery - 导航下拉菜单超出导航高度

> ID：12759207
> 
> 赞同：0
> 
> 时间：2012-10-06T11:05:26.947
> 
> 标签：jquery, html, css, drop-down-menu, navigation

我有这个示例[下拉示例](http://jsfiddle.net/GaUDJ/12/)

我的问题是我想在不增加导航高度的情况下扩展悬停在所有子项目上的能力现在我只能将鼠标悬停在 servic1 上如果我增加高度我可以控制更多子项目

```
 HTML:
 <ul id="nav">
            <div class="wrap">
                <a id="Faccebook" href="#" > <img src="../zeela/img/Facebook.png" /></a>

                <li>
                    <a      href="#">home</a>
                </li>
                <li>
                    <a href="#">about</a>
                </li>
                <li>
                    <a href="#" >srvices</a>
                    <ul id = "sub_menu">
                        <li>
                            <a href="#" >servic1</a>
                        </li>
                        <li>
                            <a href="#" >servic2</a>
                        </li>
                        <li>
                            <a href="#" >servic3</a>
                        </li>
                        <li>
                            <a href="#" >servic4</a>
                        </li>
                        <li>
                            <a href="#" >servic5</a>
                        </li>

                    </ul>
                </li>
            </div>
  </ul>
   <div class="wrap">
        <div id="MainTitle" >
            main titel text
        </div>
    </div> 
```

​ CSS

```
ul#nav img {
position:relative;top:0;bottom:0;margin:auto;
vertical-align: top;
padding-right: 20px;
}

#home {
font-size: 14px;
text-align: right;
}

ul#nav {
list-style-type: none;
margin: 0;
padding: 0;
width: 100%;
height:45px;
background-color: #e2e2e2; 
-moz-box-shadow: 1px 6px 1px #888;    
-webkit-box-shadow: 1px 6px 1px #888; 
box-shadow: 1px 6px 1px #888;

 }

ul#nav li {
float: left;
}

ul#nav li a {
text-decoration: none;
display: block;
text-align:center;
padding-left: 10px;
padding-top: 10px;
font-family: Tahoma;
font-size: 16px;
color: #666666;
font-weight: bold;
 z-index:9999;
}
ul#nav li a:hover {
font-family: Tahoma;
font-size: 14px;
color: #000000;
font-weight: bold;
}
ul#nav li a:focus {
font-family: Tahoma;
font-size: 14px;
color: #000000;
font-weight: bold;
}
ul#nav li ul {
position: absolute;
display: none;
 }
     ul#nav li ul li {
list-style-type: none;
float: none;
   }

#MainTitle {
padding-bottom: 50px;
padding-top: 50px;
padding-right: 30px;
font-family: Tahoma;
font-size: 35px;
color: #535353;
z-index: 9;
}

.wrap {

    position:relative;
    margin:0 auto;
          /*replace 900px with your width*/
    width:960px;

 } 
```

jQuery

```
 $("#nav").hover(function() {
        $("#sub_menu").show();
      }, function() {
        $("#sub_menu").hide();
       });​ 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T11:18:26.053

用这个替换你的 jQuery 函数：

```
$("#nav").on('mouseover',function() {
    $("#sub_menu").show();
});
$("#sub_menu").on('mouseout',function() {
    $(this).hide();
});​ 
```

并在您的子菜单中添加一个更高`z-index`的：

```
ul#nav li ul {
    position: absolute;
    display: none;
    z-index:10; /* add this line */
} 
```

它现在应该可以工作了，[**演示**](http://jsfiddle.net/gionaf/ubqbh/)

* * *

为了获得更好的结果，请在 "srvices" 中添加一个 id `li`：

```
<li id="subMenuSrvicesContainer">
<a href="#" >srvices</a>
/* ...etc... */ 
```

并用这个替换上面的函数：

```
$("#subMenuSrvicesContainer").on('mouseover',function() {
    $("#sub_menu").show();
});
$("#sub_menu").on('mouseout',function() {
    $(this).hide();
});​ 
```

[**演示**](http://jsfiddle.net/gionaf/PQ5Ct/)

# c - 不使用运算符将 两个数字相加

> ID：12759209
> 
> 赞同：1
> 
> 时间：2012-10-06T11:05:39.970
> 
> 标签：c, printf, addition

我正在寻找如何在不使用 ('+'/'++') 的情况下添加两个数字并通过 [链接](https://stackoverflow.com/questions/1149929/how-to-add-two-numbers-without-using-or-or-another-arithmetic-operator)。但是，我也找到了这个解决方案：

```
#include<stdio.h>
int add(int x, int y);

int add(int x, int y)
{
    return printf("%*c%*c",  x, ' ',  y, ' ');
}

int main()
{
    printf("Sum = %d", add(3, 4));
    return 0;
} 
```

有人可以解释*添加*功能中发生了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T11:11:57.700

```
return printf("%*c%*c",  x, ' ',  y, ' '); 
```

`*`格式中的表示`printf`用于打印字符的字段宽度取自`printf`, 在这种情况下`x`和的参数`y`。的返回值`printf`是打印的字符数。所以它打印一个`' '`字段宽度为 的`x`，一个字段宽度为 的`y`，`x + y`总共生成字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T11:12:41.923

那么会发生什么：`*`前面`c`告诉`printf`我们：

> 宽度未在格式字符串中指定，而是作为必须格式化的参数之前的附加整数值参数。

因此，这意味着第一个空格字符的宽度为`a`，第二个空格字符的宽度为`b`。同时`printf`返回打印的字符数，实际上是`a + b`字符。

# mysql - MySQL重结果读/写

> ID：12759213
> 
> 赞同：0
> 
> 时间：2012-10-06T11:05:57.850
> 
> 标签：mysql, locking

我在 PHP 中有这个彩票游戏。它非常简单，它由三个表组成：

```
awards:
 - ID
 - award_name

wingames:
 - ID
 - ID_award

allgames:
 - ID_user
 - won_game (bool)
 - award_id (if game not won, then it is 0) 
```

宣布在例如下午18:00 开始比赛。大约有 100 个用户不断点击“TRY TO WIN”。管理员有时会在桌面 wingames 中插入奖励 ID，以便下一个点击用户赢得此项目。

此按钮执行此操作：从 wingames 限制 1 中选择 id_award；- 如果没有行 - 用户输掉游戏，则进行以下查询：插入所有游戏 (id_user,won_game,award_id) 值 (43,false,0)；- 如果有一行 - 用户赢得游戏并且软件进行这两个查询： 插入所有游戏 (id_user,won_game,award_id) 值 (43,true,5); 从 wingames 中删除；

有一个问题：在执行“从 wingames 中删除”查询之前，另一个用户从该表中读取，有一个奖励给他。因此，当 2 个用户同时单击按钮时，可能会发生（并且已经发生），有两个赢家而不是一个。这是个大问题，因为我必须给两个奖品而不是一个。

我在互联网上查看了一些“锁定表”解决方法，但没有找到合适的示例。

您有任何（可能是快速而肮脏的）解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T13:18:28.297

正如 zerkms 提到的，您需要 SELECT .. FOR UPDATE。它将锁定游戏直到您的交易结束。

```
START TRANSACTION;

SELECT * FROM wingames FOR UPDATE;
/* from now on, only one request can continue, the others are blocked */

INSERT INTO allgames ...

DELETE FROM wingames WHERE ID = ...

COMMIT; 
```

您应该在两个交互式客户端上尝试此操作，以了解 FOR UPDATE 语句是如何工作的。

# python - 将 web 内容从 bash/curl 下载到 python

> ID：12759216
> 
> 赞同：-1
> 
> 时间：2012-10-06T11:06:12.410
> 
> 标签：python, bash, mechanize

我写了一个 bash 脚本来下载一些网页的内容。为了让它工作，我需要捕获一个 cookie，然后发送一些特殊的数据请求，然后我就可以找到正确的链接来下载它的内容。我的脚本如下所示：

```
#!/bin/bash  
for ((i=1;i<=$NB;++i)); do  
cookie=`curl -I "http://example.com/index.php" | grep Set-Cookie: | awk '{print $2}' |         cut -d ';' -f 1\`  # cath a cookie  
curl -b $cookie --data "a_piece_of_data" "http://example.com/index.php"  
curl -b $cookie "http://example.com/proper_link_$i" &> $i.html  
sleep 3  
done 
```

因为我需要稍后解析它以摆脱所有 html/xhtml 标签（只需提取纯文本），然后将其转换为 XML，我发现 Python 和它的 lib 将非常适合这样做。
所以我问你提示如何将我的脚本重写为 python？
到目前为止，这是我想出的，但它仍然远离我的 bash 示例：

```
import mechanize
import urllib2
import BeautifulSoup
import lxml

request = mechanize.Request("http://example.com/index.php")
response = mechanize.urlopen(request)
cj = mechanize.CookieJar()
cj.extract_cookies(response, request)
print cj 
```

任何帮助/提示表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T11:25:40.063

我会使用[请求库](http://docs.python-requests.org/en/latest/)

```
import requests
session = requests.session()
r = session.get('http://example.com/index.php')
# session.cookies now contains any relevant cookies which will be
# used in following requests of the session
page = session.get('http://example.com/your_other_page') 
```

然后用于`lxml`解析您的 HTML：

```
import lxml.html
page = lxml.html.fromstring(page.text) 
```

# javascript - phonegap 中 script 标签的 src 属性

> ID：12759225
> 
> 赞同：-1
> 
> 时间：2012-10-06T11:07:09.317
> 
> 标签：javascript, cordova

我可以在 phonegap 中使用以下代码行吗？

```
<script type="text/javascript" src="//js.live.net/v5.0/wl.js" ></script> 
```

其中 src 指向 skydrive 的 javascript api。是否可以在 phonegap 中使用 src 连接到服务器？或者它是否类似于从本地文件系统加载到浏览器的文件，如果上面的行在那里，它就不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T11:29:28.373

> 或者它是否类似于从本地文件系统加载到浏览器的文件，如果上面的行在那里，它就不起作用。

完全一样。您没有通过 HTTP 或 HTTPS 加载 PhoneGap 应用程序，因此您不能使用方案相对 URI 来加载通过这些方案可用的资源。

明确并使用`http://js.live.net/v5.0/wl.js`or `https://js.live.net/v5.0/wl.js`。

# excel - 在不打开excel的情况下运行宏

> ID：12759229
> 
> 赞同：3
> 
> 时间：2012-10-06T11:07:37.387
> 
> 标签：excel, excel-2007, vba

我想知道您如何将在 Excel VBA 上编写的 VBA 代码分配给某种过程/程序或与 dos 相关的文件路径，您可以直接将其分配给无需打开 excel。换句话说，我想要一个桌面图标，我可以激发我分配给的 vba 代码。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-10-13T08:46:05.387

你可以轻松做到。

在 VBS 文件（例如 example.vbs）中添加以下内容。这只是一个可以使用记事本编写的文本文件：

```
'Code should be placed in a .vbs file
Set objExcel = CreateObject("Excel.Application")
objExcel.Application.Run "'C:\path\to\my\excel\file\myExcelMacroFile.xlsm'!MyModule.MyFunctionName"
objExcel.DisplayAlerts = False
objExcel.Application.Quit
Set objExcel = Nothing 
```

然后你可以双击 VBS 文件来执行它。

资料来源：[http ://wellsr.com/vba/2015/excel/run-macro-without-opening-excel-using-vbscript/](http://wellsr.com/vba/2015/excel/run-macro-without-opening-excel-using-vbscript/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T15:07:54.390

如果 Excel 宏中的 VBA 不引用 Excel 对象，您只需将代码复制到文本文件中并将扩展名更改为 .VBS。但是，当您使用类型时，VB 脚本不喜欢它，只需从 Dim 语句中删除“AS something”即可。

我经常这样做是为了获得 Intellisense 的好处，而我不会使用记事本。

如果我的假设是正确的，那么您可能希望将标签更改为 VB 脚本而不是 Excel 以获得适当的帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-06T11:56:38.567

*If* I understand that right, you can simply write VBS code in a text file and rename it to .vbs (make sure file endings are visible in Windows). On doubleclick the file is executed by the Windows Scripting Host. VBS lacks some functionality of VBA but you can do a lot with CreateObject/GetObject.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T09:45:48.967

虽然学习曲线可能有点陡峭，但您可以考虑使用 AutoHotKey。这允许您创建自己的脚本，如果需要，可以将它们转换为（相当大的）.exe 文件。AutoHotKey 是免费的！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T13:44:12.640

编写一个打开 excel 的 cmd 或 ps1 并在该 excel 的启动中运行你的宏......然后在完成后关闭它。

这可能是一个解决方案，但您可能正在做一些在正确计划的环境中不必要的事情。

# php - 将数组从 PHP 发送到 AS3？

> ID：12759230
> 
> 赞同：0
> 
> 时间：2012-10-06T11:07:50.653
> 
> 标签：php, actionscript-3, flash

好的。我正在使用这种方法从 PHP 获取信息。

AS3：

```
function login_check (e:MouseEvent):void {

                    /*
                    check fields before sending request to php
                    */

                    if (login_username.text == "" || login_password.text == "") {

                        /*
                        if username or password fields are empty set error messages
                        */

                        if (login_username.text == "") {

                        login_username.text = "Enter your username";

                        } 

                        if (login_password.text == "") {

                        login_password.text = "Enter your password";

                        }

                    } else {

                        /*
                        init function to process login
                        */

                        login_process();

                    }

                }

                /*
                function to process our login
                */

                function login_process ():void {

                    /*
                    variables that we send to the php file
                    */

                    var phpVars:URLVariables = new URLVariables();

                    /*
                    we create a URLRequest  variable. This gets the php file path.
                    */

                    var phpFileRequest:URLRequest = new URLRequest("php/controlpanel.php");

                    /*
                    this allows us to use the post function in php
                    */

                    phpFileRequest.method = URLRequestMethod.POST;

                    /*
                    attach the php variables to the URLRequest
                    */

                    phpFileRequest.data = phpVars;

                    /*
                    create a new loader to load and send our urlrequest
                    */

                    var phpLoader:URLLoader = new URLLoader();
                    phpLoader.dataFormat = URLLoaderDataFormat.VARIABLES;           
                    phpLoader.addEventListener(Event.COMPLETE, login_result);

                    /*
                    now lets create the variables to send to the php file
                    */

                    phpVars.systemCall = "login_check";
                    phpVars.login_username = login_username.text;
                    phpVars.login_password = login_password.text;

                    /*
                    this will start the communication between flash and php
                    */

                    phpLoader.load(phpFileRequest);

                }

                /*
                function to show the result of the login
                */

                function login_result (event:Event):void {

                    /*

                    this autosizes the text field

                    ***** You will need to import flash's text classes. You can do this by: 

                    import flash.text.*;

                    */

                    login_result_text.autoSize = TextFieldAutoSize.LEFT;

                    /*
                    this gets the output and displays it in the result text field
                    */

                    if (event.target.data.login_result == "1") {
                        login_result_text.text = "Login In...";
                        this.gotoAndStop("login_loggedin");
                    }else{
                        login_result_text.text = "Username and password doesn't match.";
                    }

                } 
```

PHP：

```
print "login_registration_status=1"; 
```

并发送多个信息，例如`var1=1&var2=2`

但是，如何将数组从 PHP 发送到 AS3？以及如何使用 PHP 之类的 while(array) 来处理它。

希望可以有人帮帮我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T11:27:58.267

尝试类似：

```
<?php print 'arr=1,2,3&var1=123&var2=456'; ?> 
```

请注意，要使用 PHP 的`http_build_query`.

然后，在 AS3 中，`split`用逗号表示值：

```
var data:Array = arr.split(','); 
```

否则，您可以尝试使用 JSON 或 XML 来传输数据（而不是以 URI 格式序列化）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T11:14:04.950

您可能想使用`http_build_query`. 例子：

```
echo http_build_query(array(
                'key1' => 'value1',
                'key2' => 'value2',
                'key3' => 'value3')); 
```

将输出： `key1=value1&key2=value2&key3=value3`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T14:42:05.573

在敏感数据（身份验证：登录名、密码）的情况下，您可以并且应该使用 JSON。在 Flash Player 11 中，您可以像这样使用 JSON：

```
var arrayToSend:Array = [ 'abc', 'def', [1, 2, 3] ];

var JSONArrayToSend:String = JSON.stringify ( arrayToSend );
var arrayReceived:Array = JSON.parse ( JSONArrayReceived ); 
```

在 PHP 中：

```
$JSONArrayToSend = json_encode( $arrayToSend );
$arrayReceived = json_decode( $JSONArrayReceived ); 
```

在 Flash Player 10 及更早版本中，您将需要此库：[http ://code.google.com/p/as3corelib/](http://code.google.com/p/as3corelib/)

# objective-c - Core Data - Saving an Entity as a pList / dictionary

> ID：12759234
> 
> 赞同：3
> 
> 时间：2012-10-06T11:08:22.093
> 
> 标签：objective-c, ios, xcode, core-data, plist

I have a very simple app that has one CoreData Entity with a circular relationship to itself. I want to use this data as a plist in another app.

The relationship is 'to one' on the parent side & 'to many' on the child side.

Basically a tree with one item at the top and then children of that object, children of the child objects, etc...

I want to create a dictionary/pList from this data with the structure of the entity including the relationships. (Does that make sense?)

So far, with the help of other answers here, I can get a plist of all the objects (but all on the same "level") or a plist of the ultimate parent object (but the children relationship is faulted).

This is what I'm doing to try and get the data and save it to my desktop:

```
 NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:ENTITY_NAME];
    request.resultType = NSDictionaryResultType;

    NSError *fetchError = nil;
    NSArray *results = [self.databaseDocument.managedObjectContext executeFetchRequest:request error:&fetchError];

    NSLog(@"%@", results);

    NSString *caches = [NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES) lastObject];
    NSString *path = [caches stringByAppendingPathComponent:@"/../../../../../../../../Desktop/my.plist"];
    [results writeToFile:path atomically:NO]; 
```

At the moment there are only three objects. A main object, a child of that object, and a child of that child object.

This is giving me an plist which is an array with three objects in it.

If I include a predicate to only get the object that has no parent like this:

```
 NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:ENTITY_NAME];
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"parent == nil"];
    request.predicate = predicate;

    NSError *fetchError = nil;
    NSArray *results = [self.databaseDocument.managedObjectContext executeFetchRequest:request error:&fetchError];

    NSLog(@"%@", results);

    Item *mainItem = [results lastObject];

    NSArray *keys = [[[mainItem entity] attributesByName] allKeys];
    NSDictionary *dict = [mainItem dictionaryWithValuesForKeys:keys];

    NSString *caches = [NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES) lastObject];
    NSString *path = [caches stringByAppendingPathComponent:@"/../../../../../../../../Desktop/my.plist"];
    [dict writeToFile:path atomically:NO]; 
```

This gives me a directory but does not include the children.

Can anyone explain to me how I can get the plist structured like my entity is? In other words just one Directory with all the children contained within, and the children of each child within the Directory for that child, and so on...?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T12:06:51.920

There may well be a better way to export your Core Data entities to a plist while preserving the hierarchical structure of the relationships - I'm willing to be educated. I would approach processing them in a recursive method like this: (this is completely untested - meant only for illustrative purposes - also I'm not completely sure how you want the plist structured, etc.)

```
- (void)processEntity:(NSManagedObject *)object forMutableArray:(NSMutableArray *)mutableArray {
    NSMutableDictionary *entityInfo = [NSMutableDictionary new];

    // populate entityInfo with your object's properties
    // however you are doing that now...

    //  if this object has children - process them
    NSMutableArray *childArray = [NSMutableArray new];
    for( id child in object.children ) {
        [self processEntity:child forMutableArray:childArray];
    }

    [entityInfo setObject:childArray forKey:@"children"];
    [mutableArray addObject:entityInfo];
} 
```

So, you start the process by iterating over the top-level objects (those with no parent) then process them in `processEntity:forMutableArray:`

# c++ - 完成 IWavePlayer NAudio c++

> ID：12759242
> 
> 赞同：0
> 
> 时间：2012-10-06T11:09:18.273
> 
> 标签：c++, .net, audio, c++-cli, naudio

我在 VS2010 的 c++ 应用程序中使用 NAudio 播放音乐：

```
waveOutDevice = gcnew WaveOut();
volumeStream = gcnew WaveChannel32(gcnew Mp3FileReader("C:\\file.mp3"));
mainOutputStream = volumeStream;

waveOutDevice->Init(mainOutputStream);
waveOutDevice->Play(); 
```

它工作正常，但最后我必须进行清理。实际上，我必须 dispose() IWavePlayer（代码中的 waveOutDevice）。但是 Dispose() 和 Finalize() 不是 IWavePlayer 的成员（错误 C2039）。如果我不处理它，应用程序会给我一个 WaveOut 设计未关闭的错误。如何关闭它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T11:42:27.980

`WaveOut`类确实`waveOutClose`在其 Dispose 方法中调用 API，因此您可以并且您可能应该干净地完成播放。如果您担心的是您只持有 IWavePlayer 指针，而不是 WaveOut，那么为什么不持有这两个指针以便您可以正确终止。

# objective-c - 目标c：如何动态设置uiprogressview的时间和进度？

> ID：12759243
> 
> 赞同：0
> 
> 时间：2012-10-06T11:09:19.570
> 
> 标签：objective-c, nstimer, uiprogressview

假设我有一个大小为 (394,129,328,9) 的 UIProgressBar，我增加了高度

```
CGAffineTransform transform = CGAffineTransformMakeScale(1.0f, 3.0f);
PgView.transform = transform; 
```

我需要实现的是：如果我有 5 分钟的时间，progressView 应该填充一定数量并在 5 分钟结束时完全填充。1分钟和30分钟也是如此。

我正在执行这样的：

```
-(void)viewWillAppear:(BOOL)animated
{
    CGAffineTransform transform = CGAffineTransformMakeScale(1.0f, 3.0f);
    PgView.transform = transform;

    recievedData = 0.01;
    xpectedTotalSize = 1.0;
    PgView.progress = 0.0;
    [self performSelectorOnMainThread:@selector(makeMyProgressBarMoving) withObject:nil waitUntilDone:NO];
}

- (void)makeMyProgressBarMoving
{
    float actual = [PgView progress];
    if (actual < 1)
    {
        PgView.progress = actual + ((float)recievedData/(float)xpectedTotalSize);
        [NSTimer scheduledTimerWithTimeInterval:0.5 target:self selector:@selector(makeMyProgressBarMoving) userInfo:nil repeats:NO];
    }
    else{

    }
} 
```

它有效。但我想动态实现进度和时间间隔？任何的想法？？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-07T03:58:04.240

很难理解你的意图。正如我想的那样，您只想在新值可用时才更新进度条，而不是使用固定的计时器间隔进行更新。

这将导致简单的答案：每当您更改“recievedData”的值时更新您的进度条。因此，“makeMyProgressBarMoving”方法不需要计时器。此外，您不需要记住“实际”值。您可以直接将“receivedData/xpectedTotalSize”分配给进度条。

```
- (void) updateProgressBar
{
    PgView.progress =  ((float)receivedData/(float)xpectedTotalSize);
}

- (void) updateReceivedData
{
    if (receivedData < 20)
        receivedData += 1.0;
    else
        receivedData += 10.0;

    [self updateProgressBar];
}

-(void)viewWillAppear:(BOOL)animated
{
    receivedData = 0.0;
    xpectedTotalSize = 100.0;

    [NSTimer scheduledTimerWithTimeInterval:0.5 target:self selector:@selector(updateReceivedData) userInfo:nil repeats:YES];
} 
```

现在，一个计时器仍用于演示调用“updateReceivedData”，它只是递增“receivedData”并调用“updateProgressBar”。如您所见，'updateReceivedData' 不会线性增加，再次只是为了演示。如果计时器将按需调用“updateReceivedData”，那么进度条也将按需更新。现在这只是一个关于如何以及何时更新收到的数据的问题。这不是关于进度条的问题。

# java - 从其他位置（数据库、http...）加载 JSF facelets 文件（模板、视图）

> ID：12759245
> 
> 赞同：2
> 
> 时间：2012-10-06T11:09:52.850
> 
> 标签：java, jsf-2, facelets

我正在建立一个研究小组内部管理的网站。该网站背后的概念是，任何人都可以加载包含要包含在网页中的信息的字段和格式的数据模型。此外，我有一组视图（用于管理不同的数据模型）和一组模板（HTML4、HTML5、移动/平板设备的不同形式因素）。

我正在使用 mongo 作为数据库。

该网站以 URL 为中心。用户定义一个网页并在站点可用的 url 空间范围内为其分配一个 URL。因此，当请求到达网站时，视图提供者会为请求分配一个视图（并且该视图在代码中硬编码了模板）。

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:ice="http://www.icesoft.com/icefaces/component"
xmlns:ply="http://java.sun.com/jsf/composite/pervasive/layout"
template="/WEB-INF/templates/siteconfiguration/datamodelloader.tmpl.jspx"> 
```

如前面的示例所示，我将视图和模板都存储在 WEB-INF 文件夹中，我希望将它们存储在数据库的不同集合中。我想告诉 JSF 它们在哪里，或者向 JSF 提供包含模板和视图的输入流或字节数组，而不是将它们放在 WEB-INF 文件夹中。这样，我可以更方便地编辑、删除或更新它们。

然而，我迷路了。你能帮我么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T21:30:20.087

您可以注册一个自定义[ResourceResolver](http://docs.oracle.com/cd/E17802_01/j2ee/javaee/javaserverfaces/2.0/docs/api/javax/faces/view/facelets/ResourceResolver.html)（另请参阅[此](https://stackoverflow.com/questions/5379995/how-to-share-a-jsf-error-page-between-multiple-wars/5380452#5380452)答案）并使其指向一个 servlet，该 servlet 将返回一个动态生成的（或从数据库中获取的）视图。

# iphone - UISearchBar 键盘外观

> ID：12759253
> 
> 赞同：0
> 
> 时间：2012-10-06T11:11:18.957
> 
> 标签：iphone, ios, keyboard, uisearchbar

根据这个问题，我们可以更改 iOS 中任何 UITextField 的键盘外观[警报键盘可以用于 iOS 上的任何文本字段吗？](https://stackoverflow.com/questions/12311376/can-the-alert-keyboard-be-used-for-any-text-field-on-ios)

但是 UISearchBar 呢？有没有办法，因为`[searchBarInstance setKeyboardAppearance:UIKeyboardAppearanceAlert];`不起作用，因为 UISearchBar 缺少这种方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T11:16:59.830

你可以这样做，

```
for(UIView *subView in searchBar.subviews)
  if([subView isKindOfClass: [UITextField class]])
    [(UITextField *)subView setKeyboardAppearance: UIKeyboardAppearanceAlert]; 
```

见[iPhone UISearchBar & keyboardAppearance](https://stackoverflow.com/questions/1767470/iphone-uisearchbar-keyboardappearance)

# java - 用于保存文件的 Selenium firefox 配置文件

> ID：12759256
> 
> 赞同：0
> 
> 时间：2012-10-06T11:11:35.203
> 
> 标签：java, firefox, selenium, automation

> **可能重复：**
> [在 Firefox 中访问文件下载对话框](https://stackoverflow.com/questions/1176348/access-to-file-download-dialog-in-firefox)

我正在使用 selenium 和 firefox 从 Internet 下载文件。当我尝试下载文件时，我得到一个下载框，询问我是否要保存文件或“打开方式”。我想保存文件但不自动（想重命名文件名），我希望浏览器会问我在哪里保存文件。在 Firefox 设置中选择了“始终询问将文件保存在哪里”的选项，并且仍然..当我使用 selenium 运行脚本时，它不会询问我并保存文件。我如何设置 Firefox 配置文件来执行此操作？我在哪里可以看到所有的 Firefox 配置文件？感谢帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T20:17:51.703

调查了该问题的一些解决方法。想分享我的发现。关于一般使用 Selenium 的自动化浏览器对话框： *没有简单的方法可以让 Selenium 下载文件，因为浏览器使用无法由 JavaScript 控制的本机对话框，因此您需要一些“hack”。* 检查[这个](http://blog.codecentric.de/en/2010/07/file-downloads-with-selenium-mission-impossible/)

特别是关于 ffox 浏览器设置，*您可以将 Firefox 配置为[自动开始下载并将文件保存](http://kb.mozillazine.org/File_types_and_download_actions)在特定位置*。

或者使用它：

```
 FirefoxProfile firefoxProfile = new FirefoxProfile();

    firefoxProfile.setPreference("browser.download.folderList",2);
    firefoxProfile.setPreference("browser.download.manager.showWhenStarting",false);
    firefoxProfile.setPreference("browser.download.dir","c:\\downloads");
    firefoxProfile.setPreference("browser.helperApps.neverAsk.saveToDisk","text/csv");

    WebDriver driver = new FirefoxDriver(firefoxProfile);//new RemoteWebDriver(new URL("http://localhost:4444/wd/hub"), capability);

    driver.navigate().to("http://www.myfile.com/hey.csv"); 
```

希望这对你有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T11:50:31.030

selenium 使用的 firefox 配置文件带有 firefox 附带的默认选项。您必须在 selenium 代码中设置选项以询问、保存文件的位置。

# c# - C#：线程和多线程的概念

> ID：12759257
> 
> 赞同：-3
> 
> 时间：2012-10-06T11:11:41.960
> 
> 标签：c#

我一直在研究一些代码。我有一个问题：

C# 中的“线程”和“多线程”是什么意思？线程的作用是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T11:18:49.737

线程是在进程上下文中执行的指令序列。当程序使用多个执行线程允许每个线程根据分配给这些线程的优先级同时共享 CPU 时，就实现了多线程。

您可以参考此代码来学习线程

```
using System;
using System.Threading;

public class Alpha
{

   // This method that will be called when the thread is started
   public void Beta()
   {
      while (true)
      {
         Console.WriteLine("Alpha.Beta is running in its own thread.");
      }
   }
};

public class Simple
{
   public static int Main()
   {
      Console.WriteLine("Thread Start/Stop/Join Sample");

      Alpha oAlpha = new Alpha();

      // Create the thread object, passing in the Alpha.Beta method
      // via a ThreadStart delegate. This does not start the thread.
      Thread oThread = new Thread(new ThreadStart(oAlpha.Beta));

      // Start the thread
      oThread.Start();

      // Spin for a while waiting for the started thread to become
      // alive:
      while (!oThread.IsAlive);

      // Put the Main thread to sleep for 1 millisecond to allow oThread
      // to do some work:
      Thread.Sleep(1);

      // Request that oThread be stopped
      oThread.Abort();

      // Wait until oThread finishes. Join also has overloads
      // that take a millisecond interval or a TimeSpan object.
      oThread.Join();

      Console.WriteLine();
      Console.WriteLine("Alpha.Beta has finished");

      try 
      {
         Console.WriteLine("Try to restart the Alpha.Beta thread");
         oThread.Start();
      }
      catch (ThreadStateException) 
      {
         Console.Write("ThreadStateException trying to restart Alpha.Beta. ");
         Console.WriteLine("Expected since aborted threads cannot be restarted.");
      }
      return 0;
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T11:17:09.733

查看这些文章[C# 中的线程简介](http://www.codeproject.com/Articles/6678/Introduction-to-Threads-in-C)或[如何：创建和终止线程](http://msdn.microsoft.com/en-us/library/7a2f3ay4%28v=vs.80%29.aspx)

# android - Android facebook sdk 登录错误 1118578

> ID：12759261
> 
> 赞同：7
> 
> 时间：2012-10-06T11:12:48.180
> 
> 标签：android, facebook

一切正常，直到我想检查如果用户在没有可用互联网连接的情况下单击“使用 Facebook 登录”按钮会发生什么。

出现了一个祝酒词：

> 登录失败。请联系此应用程序的制造商，并要求他们向 Facebook 报告问题 #1118578。

在 logcat 我有：

> D/Facebook-authorize(2824)：用户取消登录。

我试图摆脱这个 toast 并在`onCancel()`方法中显示我自己的错误消息 - 但我找不到禁用那个 toast 的方法。当我再次启用 WiFi 时，单点登录不再起作用！

这可能是什么原因？

```
 private void fbLogin() {
    facebook.authorize(this, new String[] { "email" }, new DialogListener() {
        @Override
        public void onComplete(Bundle values) {
            app.save("fb_token", facebook.getAccessToken());
            app.save("fb_expire", facebook.getAccessExpires());
            mAsyncRunner.request("me", new meRequestListener());
        }
        @Override
        public void onFacebookError(FacebookError error) {}
        @Override
        public void onError(DialogError e) {}
        @Override
        public void onCancel() {}
    });
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    facebook.authorizeCallback(requestCode, resultCode, data);
} 
```

编辑：

要回答我自己的问题，请从已解决的 #1118578 问题`android:launchMode="singleInstance"`中的清单中删除。`<activity>`

但是，我确实需要`android:launchMode="singleInstance"`twitter OAuth 登录，因为浏览器通过新 Intent 将数据传递回活动。如果我没有`android:launchMode="singleInstance"`在清单中提供，则会启动一个新活动并且它不会收到 OAuth 验证程序。

**有没有办法解决这个问题，在同一个活动中使用 Facebook 和 Twitter 登录？** 我想到的唯一解决方案是使用 Twitter4j 的虚拟活动和`singleInstance`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:11:31.487

我克服这个问题的方法是将 twitter 中的回调从“twitter://callback”更改为“http://localhost/callback”，并从显现。

我仍然可以在 WebView 中获得响应（而不是像以前那样在 onResume() 上）：

```
yourwebview.setWebViewClient(new WebViewClient() {
  @Override
  public void onPageFinished(WebView view, String url) {
    // your_callback == http://localhost/callback
    if(url == null || !url.startsWith(your_callback))
      return;

    Uri         uri = Uri.parse(url);
    String      ov  = uri.getQueryParameter("oauth_verifier");
    AccessToken at  = null;
    ... 
```

# macos - Mac 终端搜索和移动名称中不包含模式的文件

> ID：12759262
> 
> 赞同：1
> 
> 时间：2012-10-06T11:12:51.453
> 
> 标签：macos, shell, unix, terminal

我使用一个程序来翻录广播音乐。可悲的是，不能将临时文件夹与完成的 mp3 稍后结束的文件夹分开。所以我无法将输出文件夹设置为自动添加到 iTunes。

我在编写java代码方面没问题，但没有使用shell脚本的经验。

我需要一个脚本，它像每 10 分钟一样遍历文件夹中的所有文件，如果它们不以字符串“Track”开头，则将它们移动到不同的位置。所有临时文件都称为“跟踪...”，因此它应该只移动完成的文件。有人可以帮我入门吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T12:29:10.990

编辑 crontab`EDITOR=nano crontab -e`并添加如下一行：

`*/10 * * * * shopt -s extglob; mv ~/Music/Temp/!(Track)*.mp3 ~/Music/iTunes/iTunes\ Media/Automatically\ Add\ to\ iTunes.localized/`

`shopt -s extglob`添加对`!()`. 见`/usr/share/doc/bash/bash.html`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T11:48:49.267

这是一个示例脚本。在取消注释移动文件的行之前，您应该正确设置 DESTINATION 目录。否则，您最终可能会将它们移动到不受欢迎的地方。

在终端中，cd 到您保存以下代码段的位置并运行以下命令来执行。

**准备工作：**

*   cd /保存/位置
*   chmod +x file_mover.sh # 使文件可执行

**安排工作：**

*   crontab -e
*   */10 * * * * /path/to/file_mover.sh
*   crontab -l # 查看计划任务列表

通过一些小的调整，您可以使其接受 CLI 选项。

```
#!/bin/bash 

# files to skip
REGEX='^TRACK'

# location to move the files
DESTINATION=/tmp/mydir

# directory to read from 
# PWD is the working directory
TARGET=${PWD}

# make the directory(ies) if it doesn't exists
if [ ! -f ${DESTINATION} ]; then
    mkdir -p ${DESTINATION}
fi

# get the collection of files in the 
for FILE in $( ls ${TARGET} )
do
    # if the current file does not begin with TRACK, move it
    if [[ ! ${FILE} =~ ${REGEX} ]]; then

        echo ${FILE}

        # SET THE DESTINATION DIRECTORY BEFORE UNCOMMENTING THE LINE BELOW

        # if [ -f ${FILE} ]; then # uncomment if you want to 
        # ensure it's a file and not a directory     
              # mv ${FILE} ${DESTINATION} # move the file 
        # fi # uncomment to ensure it's a file (end if)
    fi
done 
```

# c# - 使用 C# 增加或减少音频文件的音高

> ID：12759263
> 
> 赞同：1
> 
> 时间：2012-10-06T11:12:56.693
> 
> 标签：c#, audio, xna, soundeffect, pitch-shifting

我想增加和减少音频文件（.m4a、mp4 等）的音高。

我正在使用 Visual Studio 2008 和 .NET Framework 3.5

[我已经从MSDN](http://msdn.microsoft.com/en-us/library/dd940201.aspx)尝试了以下链接，但还没有成功

在上面的链接中，即使在导入之后`Microsoft.Xna.Framework.Audio`，它也无法识别`SoundEffectInstance`and`SoundEffect`类。

那么这个问题有什么解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T19:58:41.547

我想这可能会对你有所帮助。

[http://www.codeproject.com/Articles/245646/How-to-change-the-pitch-and-tempo-of-a-sound](http://www.codeproject.com/Articles/245646/How-to-change-the-pitch-and-tempo-of-a-sound)

请注意底部... ***2011 年 9 月 19 日：为 cpct_dll.dll 添加了 C# 包装器和用于 CPCT 的 GUI 演示。**

# java - JComponent 不绘制到 JPanel

> ID：12759264
> 
> 赞同：7
> 
> 时间：2012-10-06T11:13:02.533
> 
> 标签：java, swing, jpanel, jcomponent

我有一个扩展 JComponent 的自定义组件，它覆盖了 paintComponent(Graphics g) 方法，但是当我尝试将它添加到我的 JPanel 时它不起作用，没有绘制任何内容。这是我的代码：

```
public class SimpleComponent extends JComponent{

int x, y, width, height;

public SimpleComponent(int x, int y, int width, int height){
    this.x = x;
    this.y = y;
}

@Override
public void paintComponent(Graphics g){
    Graphics2D g2 = (Graphics2D) g;
    g2.setColor(Color.BLACK);
    g2.fillRect(x, y, width, height);
}
}

public class TestFrame{
public static void main(String[] args){
    JFrame frame = new JFrame();
    JPanel panel = new JPanel();
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    panel.setPreferredSize(new Dimension(400, 400));
    frame.add(panel);
    frame.pack();
    frame.setResizable(false);

    SimpleComponent comp = new SimpleComponent(10, 10, 100, 100);
    panel.add(comp);
    frame.setVisible(true);
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T11:17:08.610

它工作正常——组件被添加到 JPanel，但它有多大？如果你在 GUI 渲染后检查这个，你可能会发现你的组件的大小是 0, 0。

```
SimpleComponent comp = new SimpleComponent(10, 10, 100, 100);
panel.add(comp);
frame.setVisible(true);

System.out.println(comp.getSize()); 
```

考虑让您的 JComponent 覆盖 getPreferredSize 并返回一个有意义的 Dimension：

```
public Dimension getPreferredSize() {
  return new Dimension(width, height);
} 
```

如果您想使用 x 和 y，您可能也希望覆盖`getLocation()`。

**编辑**
您还需要设置宽度和高度字段！

```
public SimpleComponent(int x, int y, int width, int height) {
  this.x = x;
  this.y = y;
  this.width = width; // *** added
  this.height = height; // *** added
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2016-02-18T19:27:57.297

**哇！** 绝对不是正确答案！

您犯下的第一个绝对**红衣主教罪**是在非 EDT 线程中完成所有这些！！！这里没有篇幅可以解释……网络上只有大约 300 亿个地方可以了解它。

一旦所有这些代码`Runnable`在 EDT（事件调度线程）中执行，然后：

您**不需要**覆盖`preferredSize`（尽管您可以根据需要）...但您确实需要设置它。

您绝对**不应该直接**设置大小（`height`和`width`，或`setSize()`）！

您需要**做**的是让`java.awt.Container`, `panel`, 在您的示例中“自行布局”......有一个方法`Container.doLayout()`，但正如 API 文档中所说：

> 使该容器布置其组件。大多数程序不应直接调用此方法，而应调用 validate 方法。

因此，解决方案是：

```
SimpleComponent comp = new SimpleComponent(10, 10, 100, 100);
comp.setPreferredSize( new Dimension( 90, 90 ) );
panel.add(comp);

// the key to unlocking the mystery
panel.validate();

frame.setVisible(true); 
```

顺便说一句，请从我的经验中获益：我已经花了好几个小时试图理解这一切`validate, invalidate, paintComponent, paint`，等等。我仍然觉得我只是触及了表面。

# iphone - 使用 Core Data 更新数据库

> ID：12759268
> 
> 赞同：0
> 
> 时间：2012-10-06T11:13:38.223
> 
> 标签：iphone, ios, core-data

当应用程序从 Web 服务器获得响应时，我正在尝试更新我的本地数据库。当应用程序从 Web 服务器获取更新时，我通过将 id 与响应匹配来从本地数据库中获取数据并获取一行并执行更新代码，但本地数据库没有得到更新，也没有给出错误。应该怎么解决？？？

```
-(void)checkID:(NSMutableDictionary *)dict
{
    NSDictionary *dictEvent = [dict objectForKey:@"Event"];

    NSManagedObjectContext *context = [self managedObjectContext];

    NSManagedObject *selectedManagedObject = nil;

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc]init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Events" inManagedObjectContext:context];
    NSSortDescriptor *sortDescObj = [[NSSortDescriptor alloc] initWithKey:@"event_id" ascending:YES];
    NSError *error = nil;

    NSPredicate *predicate = [NSPredicate predicateWithFormat:[NSString stringWithFormat:@"user_id=%@ and event_id=%@",[NSNumber numberWithInt:[[dictEvent valueForKey:@"user_id"] intValue]],[NSNumber numberWithInt:[[dictEvent valueForKey:@"id"] intValue]]]];

    NSLog(@"Predicate = %@",predicate);

    NSArray *arrSortDescriptors = [NSArray arrayWithObject:sortDescObj];
    [fetchRequest setSortDescriptors:arrSortDescriptors];

    [fetchRequest setEntity:entity];
    [fetchRequest setReturnsDistinctResults:YES];

    [fetchRequest setPredicate:predicate];

    NSArray *arrResult = [context executeFetchRequest:fetchRequest error:&error];

    if ([arrResult count]>0) 
    {                
            NSArray *arrKey = [dictEvent allKeys];
            NSArray *arrValue = [dictEvent allValues];

           NSLog(@"ArrKey : %@\nArrValue : %@",arrKey,arrValue);

           selectedManagedObject = [arrResult objectAtIndex:0];

           for(int i = 0; i < [arrKey count] ; i++) 
           {
               NSLog(@"selectedMng :- %@",selectedManagedObject);
               NSLog(@"KEY: %@\t: %@",[arrKey objectAtIndex:i],[arrValue objectAtIndex:i]);
               if ([[arrKey objectAtIndex:i]isEqualToString:@"id"]) 
               {
                  [selectedManagedObject setValue:[arrValue objectAtIndex:i] forKey:@"event_id"]; 
               }
               else if([[arrKey objectAtIndex:i]isEqualToString:@"invited_status"])
               {
                   [selectedManagedObject setValue:[arrValue objectAtIndex:i] forKey:@"invite_status"];
               }
               else
               {
                   [selectedManagedObject setValue:[arrValue objectAtIndex:i] forKey:[arrKey objectAtIndex:i]];
               }

           }
           if (! [selectedManagedObject.managedObjectContext save:&error])  
           {
               NSLog(@"updateEntityIntoDataBaseNamed - Error :: %@", [error localizedDescription]);
           }
      // }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T13:30:14.367

您不能`stringWithFormat`在 内使用`predicateWithFormat`。您的谓词应该如下所示：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"user_id=%@ and event_id=%@",
    [NSNumber numberWithInt:[[dictEvent valueForKey:@"user_id"] intValue]],
    [NSNumber numberWithInt:[[dictEvent valueForKey:@"id"] intValue]]
]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T13:40:48.763

除了按照@Martin 的建议修改您的谓词

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"user_id=%@ && event_id=%@",
    [NSNumber numberWithInt:[[dictEvent valueForKey:@"user_id"] intValue]],
    [NSNumber numberWithInt:[[dictEvent valueForKey:@"id"] intValue]]
]; 
```

请注意，在两种情况下，您正在使用不匹配的键更新您的对象：id 和 event_id，以及受邀状态和邀请状态。

# javascript - 更改单击的菜单项 asp.net 母版页的样式表

> ID：12759269
> 
> 赞同：0
> 
> 时间：2012-10-06T11:13:39.477
> 
> 标签：javascript, jquery, asp.net, css

我有一个带有如下菜单的 asp.net 母版页：

```
 <menu id="menu">
    <nav id="main_nav">   
     <ul id="menu-primary">
      <li ><a href="./">Home</a></li>
      <li><a href="staff.aspx">Staff</a></li>
      <li><a href="">Sales</a></li>
      <li><a href="">Support</a></li>
      <li><a href="">Administration</a></li>
     </ul>
    </nav>
   </menu> 
```

在母版页中，我想更改单击的菜单项的 css。我有这个jQuery：

```
<script type="text/javascript">
    jQuery(document).ready(function () {
        $('ul li a').each(function () {
            var text_splited = $(this).text().split(" ");
            $(this).html("<span>" + text_splited.shift() + " " + text_splited.join(" ") + "</span> ");
        });

        // click on the first item on page load
        $('#menu-primary li').eq(0).click();

        $('#menu-primary li').click(function (e) {
            alert('here');
            // remove all active classes
            $('#menu-primary li').removeClass('current-menu-item');
            // add active class to clicked item
            $(this).addClass('current-menu-item');
        });
    });

</script> 
```

这是CSS

```
nav#main_nav ul li.current-menu-item a,
nav#main_nav ul li a:hover {background: url("../images/menu_bg.png") no-repeat scroll 0 -149px transparent; border-bottom:1px solid #edf7ff}
nav#main_nav ul li.current-menu-item a span,
nav#main_nav ul li a:hover span{background: url("../images/menu_bg.png") no-repeat scroll 100% -118px transparent;} 
```

这个有效：

// 点击页面加载的第一项 $('#menu-primary li').eq(0).click();

```
 $('#menu-primary li').click(function (e) {
         // remove all active classes
         alert($('#menu-primary li').html());
         $('#menu-primary li').removeClass('current-menu-item');
         // add active class to clicked item
         $(this).addClass('current-menu-item');
         return false;
     }); 
```

但是页面没有加载，因为 efunction 返回 false。

显示警报，但 css 未应用于单击的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T11:18:20.300

你能尝试做这样的事情吗

```
$("#menu-primary li.current-menu-item").removeClass("current-menu-item");
$(this).addClass("current-menu-item"); 
```

要设置默认选择第一个菜单项，`current-menu-item`请像这样向其添加类

```
<li class="current-menu-item"><a href="#">Menu Item</a></li> 
```

**[见工作样本](http://jsfiddle.net/8gz4k/)**

**基于页面 URL 的替代方法**

```
$('#menu-primary li a').each(function() {
    var path = window.location.href;
    var current = path.substring(path.lastIndexOf('/'));
    var url = $(this).attr('href');
    if(current=="")
    $('#menu-primary li a').first().addClass('current-menu-item');

        if (url == current) {

            $(this).addClass('current-menu-item');
    };
}); 
```

# php - 使用 preg_match 验证时间格式

> ID：12759276
> 
> 赞同：1
> 
> 时间：2012-10-06T11:14:50.443
> 
> 标签：php, regex, preg-match

我想使用验证时间输入（如上午 10:30、下午 2:30）`preg_match()`

我用这个，

```
 $pattern   =   "/([1-12]):([0-5])([0-9])( )(am|pm|AM|PM)/";
 if(preg_match($pattern,$time)){
   return true;
 } 
```

但是当我给出这样的输入时，`10:30 pmxxxx`它不会被验证。我不知道方法是否正确。请帮忙。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-06T12:07:52.357

# 日期时间解决方案

[您可以使用DateTime::createFromFormat](http://www.php.net/manual/en/datetime.createfromformat.php)验证所有日期/时间字符串：

## 功能

```
function isTimeValid($time) {
    return is_object(DateTime::createFromFormat('h:i a', $time));
} 
```

## 例子

```
foreach (['12:30 am', '13:30 am', '00:00 pm', '00:00 am', '12:30am', '15:50pm'] as $time) {
    echo "Time '$time' is " . (isTimeValid($time) ? "" : "not ") . "valid.\n";
} 
```

## 示例输出

```
Time '12:30 am' is valid.
Time '13:30 am' is not valid.
Time '00:00 pm' is valid.
Time '00:00 am' is valid.
Time '12:30am' is valid.
Time '15:50pm' is not valid. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T11:19:12.113

正则表达式中的`[...]`符号定义了*字符*类：应用于单个字符的东西。应该在这里使用它的替代：

```
0[1-9]|1[0-2] 
```

...所以整个正则表达式看起来像这样：

```
/^(?:0[1-9]|1[0-2]):[0-5][0-9] (am|pm|AM|PM)$/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T11:46:29.957

# 正则表达式解决方案

*   `[1-12]`不起作用，因为这不是范围定义，而是意味着开始`[`和`]` [结束字符类定义](http://www.php.net/manual/en/regexp.reference.meta.php)。
*   最后使用`/i` [模式修饰符](http://www.php.net/manual/en/reference.pcre.pattern.modifiers.php)，因此您不需要编写`PM, pm, pM, Pm, AM, am, aM, Am`组合。
*   PM 和 AM fetch 可以用`[ap]m`.
*   如果您希望验证整个字符串，则该字符串必须从头到尾都是有效的`^`and `$`。
*   我在时间和 pm|am 之间添加了`\h` [转义序列](http://www.php.net/manual/en/regexp.reference.escape.php)（水平空白字符），因此 time like`10:10am`可以有效。

## 代码：

```
$time = '10:30 am';
$pattern = '~^(0[0-9]|1[0-2]):([0-5][0-9])\h*([ap]m)$~i';
if (preg_match($pattern, $time, $m)) {
    print_r($m);
    return true;
} 
```

## 输出

```
Array
(
    [0] => 10:30 am
    [1] => 10
    [2] => 30
    [3] => am
) 
```

# c - 测量上下文切换的时间

> ID：12759280
> 
> 赞同：3
> 
> 时间：2012-10-06T11:15:20.710
> 
> 标签：c, time, semaphore, context-switch, microc

我开始熟悉 MicroC/OS-II 内核和多任务处理。我编写了以下两个使用信号量的任务：

```
#define TASK1_PRIORITY      6  // highest priority
#define TASK2_PRIORITY      7

void task1(void* pdata)
{
  while (1)
  { 
    INT8U err;
    OSSemPend(aSemaphore_task1, 0, &err);    
    int i;

    if (sharedAddress >= 0)
    {
        printText(text1);
        printDigit(++sharedAddress);
    }
    else
    {
        printText(text2);
        printDigit(sharedAddress);                      
    }  
    OSTimeDlyHMSM(0, 0, 0, 11);  
    OSSemPost(aSemaphore_task2);  
  }
}

void task2(void* pdata)
{
  while (1)
  { 
    INT8U err;
    OSSemPend(aSemaphore_task2, 0, &err);    
    sharedAddress *= -1; 
    OSTimeDlyHMSM(0, 0, 0, 4);                                 
    OSSemPost(aSemaphore_task1);
  }
} 
```

现在我想测量上下文切换时间，即处理器在这两个任务之间切换所需的时间。

这是否仅通过使用以下函数来完成`timer()`：

```
void task1(void* pdata)
{
  while (1)
  { 
    INT8U err;
    OSSemPend(aSemaphore_task1, 0, &err);    
    int i;

    if (sharedAddress >= 0)
    {
        printText(text1);
        printDigit(++sharedAddress);
    }
    else
    {
        printText(text2);
        printDigit(sharedAddress);                      
    }    
     OSTimeDlyHMSM(0, 0, 0, 11);
     OSSemPost(aSemaphore_task2);
     timer(start);
  }
}

void task2(void* pdata)
{
  while (1)
  { 
    timer(stop):
    INT8U err;
    OSSemPend(aSemaphore_task2, 0, &err);    
    sharedAddress *= -1;  
    OSTimeDlyHMSM(0, 0, 0, 4);                                
    OSSemPost(aSemaphore_task1);
  }
} 
```

还是我完全错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T21:27:58.477

恐怕您将无法使用任何 µC/OS 原语来测量上下文切换时间。上下文切换时间太小，无法通过 µC/OS 软计时器测量，这些软计时器很可能基于系统节拍的倍数（因此为几毫秒）——即使它取决于 CPU 的特定 µC/OS 端口建筑学。

您将不得不直接访问处理器的硬件计时器 - 您可能希望将其频率配置为可以处理的最大值。将其设置为自由运行定时器（不需要任何中断），并以它的计数值作为时基来测量切换时间。

或者您可以为您的架构阅读 OS_TASK_SW() 的 ASM 并计算所需的周期数；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T05:11:39.977

您可以使用 OSTimeGet API 来获取执行时间。uCOS 不使用 timer() 函数来获取执行时间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-06T20:57:49.703

为了进行性能测量，标准方法是首先校准您的工具。在这种情况下，它是您的计时器，或建议的时钟（如果您使用 C++）。

要校准它，您需要多次调用它（例如 1000 次）并查看每次平均需要多长时间。现在您知道测量时间的成本了。在这种情况下，它可能与您尝试测量的特征（上下文切换）处于相似范围（充其量）。

所以校准很重要。

让我们知道你的进展。

# windows - Windows Rails 3 Errno::ECONNABORTED & Authlogic 无法正常工作 & Development 500 错误

> ID：12759281
> 
> 赞同：0
> 
> 时间：2012-10-06T11:15:24.763
> 
> 标签：windows, ruby-on-rails-3, authlogic

我正在开发 Rails 应用程序，一切正常，但现在它开始出现问题。我已经使用 Authlogic 易腐令牌实现了 ActionMailer，现在，每次我尝试访问 UsersController#show 时，它只显示错误 500。

```
We're sorry, but something went wrong. 
```

并在服务器控制台中

```
Started GET "/users/1" for 127.0.0.1 at 2012-10-06 13:04:46 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  User Load (2.0ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
   (1.0ms)  BEGIN
   (1.0ms)  UPDATE `users` SET `last_request_at` = '2012-10-06 11:04:46', `perishable_token` = 'eFBAhfqGX2p04ZfYGb9w', `updated_at` = '2012-10-06 11:04:46' WHERE `users`.`id` = 1
   (3.0ms)  COMMIT
  User Load (1.0ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered users/show.html.erb within layouts/application (99.0ms)
Completed 500 Internal Server Error in 169ms 
```

development.log 是空的。此外，当我重新启动服务器时，我的会话不会过期，所以我在重新启动后保持登录状态。一段时间后，我发现有时服务器会抛出此错误

```
[2012-10-06 13:11:39] ERROR Errno::ECONNABORTED: Software v hostitelsk�m poc�taci ukoncil vytvoren� pripojen�.
    C:/Ruby193/lib/ruby/1.9.1/webrick/httpserver.rb:80:in `eof?'
    C:/Ruby193/lib/ruby/1.9.1/webrick/httpserver.rb:80:in `run'
    C:/Ruby193/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'
C:/Ruby193/lib/ruby/1.9.1/webrick/htmlutils.rb:19: warning: regexp match /.../n against to CP850 string
C:/Ruby193/lib/ruby/1.9.1/webrick/htmlutils.rb:20: warning: regexp match /.../n against to CP850 string
C:/Ruby193/lib/ruby/1.9.1/webrick/htmlutils.rb:21: warning: regexp match /.../n against to CP850 string
C:/Ruby193/lib/ruby/1.9.1/webrick/htmlutils.rb:22: warning: regexp match /.../n against to CP850 string 
```

我曾尝试使用 rails/console 一切正常。我没有选择，我被卡住了。我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T18:14:12.950

问题在于模型文件中的错误编码。我正在使用 UTF-8（用于 latin2 字符），我需要在我想使用变音符号的每个文件的开头添加它

```
#encoding: utf-8 
```

不幸的是，我不知道任何更好的方法。如果我在没有设置编码的文件中使用变音符号，rails 将抛出关于无效多字节字符（US-ASCII）的错误。所以 UsersController#show 使用**user.rb**方法，该方法使用**report.rb**方法。**method.rb**文件中有变音符号，但我忘记添加编码行。不知何故，Ruby on Rails 无法处理该错误。并导致 500 内部错误

# windows-phone-7 - 无法为 Windows Phone7 安装 Apache Cordova

> ID：12759284
> 
> 赞同：2
> 
> 时间：2012-10-06T11:16:19.537
> 
> 标签：windows-phone-7, windows-phone-7.1, cordova

我正在尝试使用适用于 windows phone7 的 Apache Cordova（Phonegap）创建应用程序。我按照链接[Apache Cordova For phone7 进行操作](http://docs.phonegap.com/en/2.1.0/guide_getting-started_windows-phone_index.md.html#Getting%20Started%20with%20Windows%20Phone)，但问题是无法在下载内容中找到 CordovaStarter-xxxzip 文件，如说明中所述，[下载链接](http://phonegap.com/download).Plz解决我的问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T16:48:13.210

事实上，VS 模板并没有与 phonegap 2.1 捆绑在一起。为了“安装”模板，您需要构建模板。只需在 Visual Studio 中打开 templates\full\CordovaSolution.sln，然后从文件菜单中选择“导出模板”。

您还可以测试位于 \lib\windows-phone\example 的示例解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-02T12:58:45.163

我有与上述相同的问题，我找到了一些解决方案。
使用 Visual Studio 2010 和 WindowsPhone 7.x SDK，我们在 Windows 7 中创建 Phongegap 应用程序，并使用 Visual Studio 2010 中的模板完成。在 Visual Studio 2010

**中创建项目的步骤：**

*   拳头下载WindowsPhoneSDK7 for windows 7 [Microsoft 下载中心](http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=27570/)
*   之后下载最新版本的[Phonegap SDK](http://phonegap.com/download)
*   解压下载的 Phpnegap sdk 后打开 lib/Windows Phone 文件夹
*   在此文件夹中单击“createTemplates.bat”文件，该文件生成 zip 文件，如**CordovaWP7_x_x_x.zip**
*   复制**CordovaWP7_x_x_x.zip**并粘贴到 **Visual Studio 2010\Templates\ProjectTemplates\Visual C#**
*   现在打开 Visual Studio 2010 并启动新项目，其中显示 **CordovaWP7_x_x_x.zip**模板，然后项目创建成功。

# ftp - 如何拥有服务器的离线副本？

> ID：12759291
> 
> 赞同：0
> 
> 时间：2012-10-06T11:17:18.830
> 
> 标签：ftp, sync

基本上，我想要的是 Dropbox 之类的东西，但它适用于我的整个服务器。

如果我将文件夹放入其中，它会在我的服务器上更新，并且可以通过我的 URL 访问。

如果我删除某些内容，它也会将其从服务器中删除。

它还可以作为我服务器上所有内容的离线备份。

有没有这样的应用程序？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T11:21:37.113

[FTPBox](http://ftpbox.org/)似乎做你想做的事。

# jquery - 解析 json url 时出错

> ID：12759293
> 
> 赞同：-4
> 
> 时间：2012-10-06T11:17:44.870
> 
> 标签：jquery, json

在解析页面时调用包含 json 数据的 url 时不显示错误，也不返回任何数据

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" " http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd ">
<html xmlns=" http://www.w3.org/1999/xhtml ">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Request json test</title> 
<script src="http://code.jquery.com/jquery-1.5.js"></script>

<script>
$(document).ready(function(){ 
    //attach a jQuery live event to the button
    $('#getdata-button').live('click', function(){
        alert("get data"); 
        $.getJSON('http://evonixtech.com/ColegSCIT/getlistabout.php', function(data) {  
            alert(" data alert"+data); //uncomment this for debug
            //alert (data.item1+" "+data.item2+" "+data.item3); //further debug
            //$('#showdata').html("<p>item1="+data.item1+" item2="+data.item2+" item3="+data.item3+"</p>");
        });
    });
});
</script> 
</head>
<body>
<a href="#" id="getdata-button">Get JSON Data</a>
<div id="showdata"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T11:26:42.090

[同源政策：](http://en.wikipedia.org/wiki/Same_origin_policy)

> 在计算中，同源策略是许多浏览器端编程语言（例如 JavaScript）的重要安全概念。该策略允许在来自同一站点的页面上运行的脚本无特定限制地访问彼此的方法和属性，但禁止跨不同站点的页面访问大多数方法和属性

# php - 用于分页的 wp pagenavi，对于帖子数量而言页面太多

> ID：12759295
> 
> 赞同：0
> 
> 时间：2012-10-06T11:17:57.630
> 
> 标签：php, wordpress, pagination

是否可以设置 wp-pagenavi，以便分页中的数字数量与帖子数量相关。

目前，即使一个类别中只有 3 或 4 个帖子，我仍然可以选择转到许多旧页面，这些页面显然只是空的。

这是一个示例，该类别中只有 4 个帖子... [http://limerickfc.hailstormcommerce.com/cms/?page_id=2466](http://limerickfc.hailstormcommerce.com/cms/?page_id=2466)

这是我用于循环的代码。

```
<?php 
             $paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
             query_posts("posts_per_page=12&paged=$paged");

             $archive_query = new WP_Query('cat=14&showposts=12&paged=' . $paged);
             ...
             if (have_posts()) : 
             while ($archive_query->have_posts()) : $archive_query->the_post(); 

                        ...do stuff
  ?>
            <?php endwhile; ?>
            <?php wp_pagenavi(); ?>
            <?php wp_reset_query(); ?>

               <?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T12:41:10.227

这不是我使用 WP-Pagenavi 的方式，您不需要包含自定义查询的分页部分，我认为这是您问题的根源。

```
$archive_query = new WP_Query('cat=14&showposts=12'); 
```

顺便说一句，showposts 已被弃用，取而代之的是`posts_per_page`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T15:40:57.823

我的解决方案...

```
<?php 
            $paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
              ?>

            <?php query_posts('cat=14&posts_per_page=3'."&paged=$paged"); ?>
            <?php
            $id = get_the_ID();
            $count = 0;
             if (have_posts()) : ?>
<?php while ( have_posts() ) : the_post(); 

........

            <?php endwhile; ?>

  <?php wp_pagenavi(); ?>
  <?php wp_reset_query();?>
  <?php endif; ?> 
```

# iphone - ByDefault NSURLConnection 是同步的还是异步的

> ID：12759297
> 
> 赞同：1
> 
> 时间：2012-10-06T11:18:11.957
> 
> 标签：iphone, objective-c, ios

> ByDefault NSURLConnection 是同步的还是异步的

相同的答案应该是什么。还有一个问题是：

> 委托和通知有什么区别。

我知道区别，但我很困惑，通知是本地通知还是 Apple 通知。或者 iPhone 中还有其他一些功能。因为我也读过`NSNotificationCenter`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-06T11:40:53.167

**问：** 默认 NSURLConnection 是同步的还是异步的

**答：** 这取决于您在 NSURLConnection 中调用的方法。但是大部分方法都是异步相关的。除了 sendSynchronousRequest:returningResponse:error:

同步加载数据

```
+ sendSynchronousRequest:returningResponse:error: 
```

异步加载数据

```
+ connectionWithRequest:delegate:
– initWithRequest:delegate:
– initWithRequest:delegate:startImmediately:
+ sendAsynchronousRequest:queue:completionHandler:
– start 
```

**问：** 委托和通知有什么区别。

**A：** 使用委托进行一对一的对象通信。例如，从 objA 收到的事件调用它的委托 objB 来执行它。使用通知进行一对多对象通信。例如 ObjA，ObjB 在 ObjA 事件上注册为观察者。当事件发生时，它会将消息发送给 ObjA 和 ObjB。

# php - 无法使用 php 在 mysql 数据库中保存日期

> ID：12759298
> 
> 赞同：0
> 
> 时间：2012-10-06T11:18:18.147
> 
> 标签：php, mysql, date, insert

即使我填写了日期的文本框，我在 php 中的日期也有问题，在数据库中我发现它是空的

这是我的 php 页面：

```
 <?php
session_start();
if (!array_key_exists("user", $_SESSION)) {
    header('Location: index.php');
    exit;
}
require_once("Includes/db.php");
$wisherID = WishDB::getInstance()->get_wisher_id_by_name($_SESSION['user']);

$wishDescriptionIsEmpty = false;
if ($_SERVER['REQUEST_METHOD'] == "POST") {
    if (array_key_exists("back", $_POST)) {
        header('Location: editWishList.php');
        exit;
    } else
    if ($_POST['wish'] == "") {
        $wishDescriptionIsEmpty = true;
    } else if ($_POST["wishID"] == "") {
        WishDB::getInstance()->insert_wish($wisherID, $_POST["wish"], $_POST["dueDate"]);
        header('Location: editWishList.php');
        exit;
    } else if ($_POST["wishID"] != "") {
        WishDB::getInstance()->update_wish($_POST["wishID"], $_POST["wish"], $_POST["dueDate"]);
        header('Location: editWishList.php');
        exit;
    }
}
?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
    <head>  
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link type="text/css" href="jquery-ui-1.8.24.custom/css/smoothness/jquery-ui-1.8.24.custom.css" rel="stylesheet" />
        <script type="text/javascript" src="jquery-ui-1.8.24.custom/js/jquery-1.8.0.min.js"></script>
        <script type="text/javascript" src="jquery-ui-1.8.24.custom/js/jquery-ui-1.8.24.custom.min.js"></script>
        <script type="text/javascript" src="jquery-ui-1.8.24.custom\development-bundle\ui\i18n\jquery.ui.datepicker-fr.js"></script>
        <script type="text/javascript">
            $(function() {
        $.datepicker.setDefaults( $.datepicker.regional[ "" ] );
        $( "#datepicker" ).datepicker( $.datepicker.regional[ "fr" ] );

    });         
        </script>
    </head>
    <body>
        <?php
        if ($_SERVER["REQUEST_METHOD"] == "POST")
            $wish = array("id" => $_POST["wishID"], "description" => $_POST["wish"], "due_date" => $_POST["dueDate"]);
        else
        if (array_key_exists("wishID", $_GET))
            $wish = mysqli_fetch_array(WishDB::getInstance()->get_wish_by_wish_id($_GET["wishID"]));
        else
            $wish = array("id" => "", "description" => "", "due_date" => "");
        ?>
        <form name="editWish" action="editWish.php" method="POST">
            <input type="hidden" name="wishID" value="<?php echo $wish["id"]; ?>" />
            <table>
                <tr>
                    <td>Describe your wish:</td>
                    <td><input type="text" name="wish"  value="<?php echo $wish['description']; ?>" /></td>
                    <td><?php if ($wishDescriptionIsEmpty) echo "Please enter description"; ?></td>
                </tr>
                <tr>
                    <td>When do you want to get it?</td>

                    <td><input type="text" name="due_date" id="datepicker" value="<?php echo $wish['due_date']; ?>" /></td>
                </tr>                
            </table>
            <input type="submit" name="saveWish" value="Save Changes"/>
            <input type="submit" name="back" value="Back to the List"/>

        </form>
        je suis 
        </br>

    </body>
</html> 
```

这是 db.php 中的对应方法：

```
function insert_wish($wisherID, $description, $dueDate) {
    $description = $this->real_escape_string($description);
    if ($duedate == '') {
        $this->query("INSERT INTO wishes (wisher_id, description)" .
                " VALUES (" . $wisherID . ", '" . $description . "')");
    } else
        $this->query("INSERT INTO wishes (wisher_id, description, due_date)" .
                " VALUES (" . $wisherID . ", '" . $description . "', '" . $dueDate . "')");
}    

public function update_wish($wishID, $description, $duedate) {
    $description = $this->real_escape_string($description);
    if ($duedate == null) {
        $this->query("UPDATE wishes SET description = '" . $description . "', due_date = NULL WHERE id = " . $wishID);
    } else
        $this->query("UPDATE wishes SET description = '" . $description . "', due_date = '" . $duedate . "' WHERE id = " . $wishID);
} 
```

我使用 datepicker 查询组件获取日期，你能检测到错误的位置吗 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T11:25:57.147

我认为您为输入元素提供了错误的名称。在下面替换

```
<input type="text" name="due_date" id="datepicker" 
       value="<?php echo $wish['due_date']; ?>" /> 
```

和

```
<input type="text" name="dueDate" id="datepicker" 
       value="<?php echo $wish['due_date']; ?>" /> 
```

您正在使用`$_POST["dueDate"]`获取日期值并且标记中的名称不正确。

**编辑 ：：**

正如@simonTifo 在评论中所说的“它返回给我确切的日期，它保存在数据库中的位，如 00-00-0000”，可能存在一些与格式相关的问题来克服这个问题，只需使用 php 中的**[date](http://php.net/manual/en/function.date.php)**函数。所以代码假设是：

```
WishDB::getInstance()->insert_wish($wisherID, $_POST["wish"], 
                              date('Y-m-d H:i:s', $_POST["dueDate"])); 
```

检查该功能手册并根据需要设置任何格式。

希望这会有所帮助！

# wpf - FocusVisualStyle 模板，将属性绑定到父级的

> ID：12759309
> 
> 赞同：0
> 
> 时间：2012-10-06T11:19:25.687
> 
> 标签：wpf, c#-4.0

我为我的用户控件创建了一个 FocusVisualStyle 并成功实现了覆盖。我的问题是我希望使用父级的一些属性，但 TemplateBinding 似乎不起作用。

控件的简化版本定义如下：

```
<Style TargetType="{x:Type local:Thought}">
  <Setter Property="FocusVisualStyle" Value="{StaticResource ThoughtFocusStyle}" />
  <Setter Property="Template">
    <Setter.Value>
      <ControlTemplate TargetType="{x:Type local:Thought}" >
        <Border BorderThickness="{TemplateBinding BorderThickness}" 
                BorderBrush="{StaticResource ThoughtBorderNormalBrush}">
          <!-- other controls -->
        </Border>
      </ControlTemplate>
    </Setter.Value>
   </Setter>
 </Style> 
```

我的自定义 FocusVisualStyle 定义如下：

```
<Style x:Key="ThoughtFocusStyle" TargetType="{x:Type Control}">
  <Setter Property="Template">
    <Setter.Value>
      <ControlTemplate TargetType="{x:Type Control}">
        <Border BorderThickness="{TemplateBinding BorderThickness}" 
                BorderBrush="{StaticResource ThoughtBorderFocusBrush}"/>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

如果我在 ThoughtFocusStyle 中硬编码 BorderThickness，它会按预期工作（Tab 进入控件），但使用 TemplateBinding 不会。我玩过RelativeSource，但似乎无法正确使用语法（对WPF来说仍然很新）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T13:43:16.557

尝试 ：

```
 <Border BorderThickness="{Binding 
                           RelativeSource={RelativeSource Mode=FindAncestor,         
                           AncestorType=Control},
                           Path=BorderThickness}"> 
```

# php - Wordpress - 使用元数据获取邮政编码并输出谷歌地图

> ID：12759310
> 
> 赞同：0
> 
> 时间：2012-10-06T11:19:24.893
> 
> 标签：php, mysql, wordpress, google-maps

我正在尝试使用元数据来获取邮政编码，例如：

```
$property->add_meta_box( 
    'Property Info', 
    array(
        array(
              'name'        => 'postcode',
              'label'       => 'Postcode',
              'type'        => 'text',
        );
     )
); 
```

在每个帖子类型上创建一个元框 - 属性。如果物业有邮政编码，我如何使用此邮政编码获取谷歌地图以在页面上动态生成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T13:18:05.850

我将展示我是如何做到的，但这是一年前的事了，基于谷歌地图/地理编码的更新，可能会有一个更新的、现代的答案。地理编码是将邮政编码转换为纬度/经度的过程的术语。当我使用它在各个帖子上显示地图时，这段代码都在我`single.php`的身上，你可以根据你的设置方式做不同的事情。

我最初使用 Yahoo Maps API 对邮政编码进行地理编码，然后使用 Google Maps 作为地图，因为 Google Map 的地理编码非常不准确。雅虎关闭了他们的服务，所以我将其更改为当时比谷歌地图更准确的谷歌本地搜索版本的地理编码（这是去年，2011 年）。

首先确保您在您的地图 API 中包含脚本`<head>`

[https://developers.google.com/maps/documentation/javascript/tutorial#api_key](https://developers.google.com/maps/documentation/javascript/tutorial#api_key)

和

```
<body onload="initialize()" onunload="GUnload()"> 
```

在您的模板中，您可以访问您的自定义选项（假设它的 id 为`postcode`），例如；

```
<?php $postcode = get_post_meta($post->ID, 'postcode', true); ?> 
```

然后使用以下 Javscript 对地址进行地理编码并生成您的地图（在 中`#map_canvas`）。

这是JS；

```
<script type="text/javascript">
var localSearch;
var map;
var icon;
var addressMarkerOptions;
google.load("search", "1");
google.load("maps", "2");
google.setOnLoadCallback(initialize);

function initialize()
{

    localSearch = new GlocalSearch();
    icon = new GIcon(G_DEFAULT_ICON);
    addressMarkerOptions = { icon:icon , draggable: false};

    map = new GMap2(document.getElementById("map_canvas"));
    map.addControl(new GSmallZoomControl3D ());
    var mapControl = new GMapTypeControl();
    plotAddress("<?php echo $postcode ?>");

}

/**
* This takes either a postcode or an address string
*
*/
function plotAddress(address)
{
  localSearch.setSearchCompleteCallback(null, 
function() {

  if (localSearch.results[0])
     {     
    var resultLat = localSearch.results[0].lat;
    var resultLng = localSearch.results[0].lng;
    var point = new GLatLng(resultLat,resultLng);
    var marker = new GMarker(point, addressMarkerOptions);
    map.setCenter(point, 15, G_HYBRID_MAP);
   }
});

localSearch.execute(address + ", UK");
}
</script> 
```

HTML如下；

```
<div id="streetview">
    <div id="map_canvas" style="width: 250px; height: 250px"></div>
</div> 
```

# android - android contentprovider 预处理文本

> ID：12759312
> 
> 赞同：-1
> 
> 时间：2012-10-06T11:19:38.910
> 
> 标签：android, sqlite

我正在使用 Android ContentProviders 来访问我的 android 应用程序的 sqlite 数据库。数据库中保存的一些文本需要我调用

```
public static Spanned fromHtml (String source)
```

一旦我从数据库中检索到它。这是因为商店文本包含

```
& apos;
```

等，转义的内容。

如何在我的 ListFragment 活动中显示检索到的文本之前对其进行处理。？

我必须为此创建一个自定义光标适配器吗？

或者我还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T11:27:02.540

当然你还有其他选择

1.  将其存储为 html 解码（您没有说 sql 数据库是如何填充的）
2.  从数据库中创建一个DAO，并让DAO实现逃逸方法

# java - 错误：无法找到或加载主类 First.class

> ID：12759313
> 
> 赞同：1
> 
> 时间：2012-10-06T11:20:03.020
> 
> 标签：java

我使用netbeans在java中制作了程序。它位于 d `:\sudhanshu\documents\netbeansprojects\Firstapp\src\firstapp`。它的名字是`First.java`。它运行成功并显示输出，`netbeans IDE.`但是当我尝试通过**cmd**运行它时显示上述错误。

**PATH**设置为`c:\program files\java\jdk1.7.0_07\bin` **classpath**设置为`.`

我也尝试将**类路径**设置为`c:\program files\java\jdk1.7.0_07\bin`但错误没有变化..

`javac First.java`正在运行，并且在程序所在的同一文件夹中创建了 CLASS 文件。

请帮帮我..我无法调试它..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T11:37:19.620

如果您的包裹是 : `somepackage`,

您已将`.java`文件保存在：`d:\sudhanshu\documents\netbeansprojects\Firstapp\src\firstapp`

然后在命令提示符下，转到上述目录并使用以下命令进行编译：-

```
javac -d . First.java   // Don't use javac First.java 
```

然后您的类文件将在`somepackage`上述路径内的文件夹中创建..即您的类文件将在`d:\sudhanshu\documents\netbeansprojects\Firstapp\src\firstapp\somepackage\First.class`

然后你应该去你的`.java.`文件保存的目录，并运行： -

```
java First 
```

从`d:\sudhanshu\documents\netbeansprojects\Firstapp\src\firstapp`目录..

**如果你想从任何地方运行这个类文件： -**

在您的类路径中添加`d:\sudhanshu\documents\netbeansprojects\Firstapp\src\firstapp`目录..

注意： - 您需要将包含您的包目录的目录添加到类路径..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T11:47:15.570

**-**如果你能够创建一个 .class 文件，那么我认为你已经成功安装了你的 Java

**小费：**

始终`java -version`在命令提示符下执行 a，如果它返回您系统上安装的 JDK 版本，那么您已经成功安装了 Java。

**-**现在我会建议您从类文件所在的同一目录执行此文件以执行该文件。

`java First`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T11:26:26.410

很可能您缺少使用包名称的执行。

您将从 src 目录执行主类：

```
D:\sudhanshu\documents\netbeansprojects\Firstapp\src> java firstapp.First 
```

# c# - 如果 reader 对象不为 null，则 HTML 中的 .Net 返回 true，否则返回 false

> ID：12759315
> 
> 赞同：1
> 
> 时间：2012-10-06T11:20:19.517
> 
> 标签：c#, asp.net, .net, c#-4.0, c#-3.0

我正在使用 DataList 来显示数据库中的一些数据并在 html 端填充字段。我现在需要根据 db 字段是否有数据来更改面板的可见性。

如果相关数据字段有内容，我需要能够显示面板，如果没有，则隐藏它。例如：

```
 <asp:Panel ID="pnlNew" runat="server" Style="margin:0; padding:0; width:42px; height:18px; bottom:5px; right:10px; float:right; position:relative; background:url(../_imgVideoBadge.png) no-repeat;" Visible='<%# Eval("cheese") != null %>' ToolTip="available"></asp:Panel> 
```

显然，这在可见属性方面不起作用。但希望它能让我了解我想要实现的目标。任何帮助将不胜感激。

我以前看过一些例子，这些例子是：

```
 a ?? b:c 
```

这如何适用于上述要求？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T14:01:51.340

`Visible='<%# Information.IsDBNull(Eval("cheese")) %>'`应该返回一个布尔值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T13:55:15.383

这是我设法解决的解决方案：

```
 (Eval("cheese").ToString().Trim() == String.Empty) ? false : true 
```

结果似乎是一个空字符串而不是空字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T11:28:53.510

```
protected void Page_Load(object sender, EventArgs e)
   {
      if (!Page.IsPostBack)          
        SqlConnection MyConnection;
        SqlCommand MyCommand;
        SqlDataReader MyReader;
        MyConnection = new SqlConnection();
        MyConnection.ConnectionString = ConfigurationManager.ConnectionStrings["AppConnectionString1"].ConnectionString;

        MyCommand = new SqlCommand();
        MyCommand.CommandText = "SELECT TOP 10 * From PRODUCTS";
        MyCommand.CommandType = CommandType.Text;
        MyCommand.Connection = MyConnection;

        MyCommand.Connection.Open();
        MyReader = MyCommand.ExecuteReader(CommandBehavior.CloseConnection);
        if (MyReader != null)
        {
            datalist1.DataSource = MyReader;
            datalist1.DataBind();
            pnlNew.Visible = true;
        }
        else
        {
            pnlNew.Visible = false;
        }
        MyCommand.Dispose();
        MyConnection.Dispose();
    }
} 
```

# java - Servlet 和 JSP 空白

> ID：12759316
> 
> 赞同：0
> 
> 时间：2012-10-06T11:20:25.303
> 
> 标签：java, database, servlets

大家好，我已经输入了一个查询数据库的页面，然后在数据库中输入了一些内容，但是当我去加载 servlet/jsp 页面时，它返回空白并且不确定发生了什么或为什么？我在 Eclipse 中编码，在查看控制台并没有打印出任何内容后，我认为我的代码有问题，但我看不到问题所在。

这是我的小服务程序

```
import java.io.IOException;
import java.io.PrintWriter;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.ArrayList;

import javax.servlet.RequestDispatcher;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

/**
 * Servlet implementation class TutorAssign
 */
@WebServlet("/TutorAssign")
public class TutorAssign extends HttpServlet {
    private static final long serialVersionUID = 1L;

    /**
     * @see HttpServlet#HttpServlet()
     */
    public TutorAssign() {
        super();
        // TODO Auto-generated constructor stub
    }

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
    }

    private void sendBack(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
         HttpSession session = request.getSession(true);
            //Set data you want to send back to the request (will be forwarded to the page)
            //Can set string, int, list, array etc.

         String sql = "SELECT l.id,s.name,l.day,l.time,l.room" +
                  " FROM subject s, lab l " +
                    " WHERE s.user_id="+(Integer)session.getAttribute("id");

          try{
            Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/wae","root","");
            System.out.println("got boobs");
            System.out.println(session.getAttribute("id"));

              Statement stmt = con.createStatement();
              ResultSet res = stmt.executeQuery(sql);
              System.out.println(res);
              ArrayList<String> list1 = new ArrayList<String>();
              ArrayList<String> list2 = new ArrayList<String>();
              if (res.next()){
                  do{
                       list1.add(res.getString(1));
                       list2.add(res.getString(2)+" "+res.getString(3)+" "+res.getString(4)+" "+res.getString(5));

                  }while(res.next());
              System.out.println("Outside");
              String[] arr1 = list1.toArray(new String[list1.size()]);
              String[] arr2 = list2.toArray(new String[list2.size()]);
              System.out.println(list1);
              request.setAttribute("res1", arr1);
              request.setAttribute("res2", arr2);

              }

          }catch (SQLException e) {
            } 
            catch (Exception e) {
            } 

            //Decides what page to send the request data to
            RequestDispatcher view = request.getRequestDispatcher("TutorAssign.jsp");
            //Forward to the page and pass the request and response information
            view.forward(request, response); 
    }

    /**
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

          int user_id = Integer.parseInt(request.getParameter("id"));
          int lab_id = 0;

          String message = null; 
          try {
              Class.forName("com.mysql.jdbc.Driver");
              Connection con = 
                DriverManager.getConnection("jdbc:mysql://localhost:3306/wae","root","");
            System.out.println("got connection"); 
            System.out.println(user_id);
            Statement s = con.createStatement(); 

            String sql = "INSERT INTO user_lab" + 
                      " (user_id, lab_id)" + 
                      " VALUES" + 
                      " ('" +  user_id + "'," + 
                         " '"  +  lab_id + "')"; 

              System.out.println(sql);
              int i = s.executeUpdate(sql); 
              if (i==1) {
                message = "Successfully assigned a tutor."; 
                response.sendRedirect("Lecturer_labs");
              } 

              s.close(); 
              con.close(); 
            } 
            catch (SQLException e) {
              message = "Error." + e.toString(); 
              boolean error = true; 
            } 
            catch (Exception e) {
              message = "Error." + e.toString(); 
              boolean error = true; 
            } 
            if (message!=null) {
              PrintWriter out = response.getWriter(); 
              out.println("<B>" + message + "</B><BR>"); 
              out.println("<HR><BR>"); 
            } 

          } 
// TODO Auto-generated method stub

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T11:27:35.057

我注意到您的 doGet 方法尚未实现。我会假设您的 sendBack 代码没有被调用

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
   sendBack(request,response);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T11:27:22.403

你有几个空的 catch 块。这意味着如果程序遇到问题，错误将被默默吞下，你不知道执行了哪些代码，跳过了哪些代码，因此结果未知。至少在 catch 块中记录错误，像这样（非常基本的示例，使用[java.util.logging](http://docs.oracle.com/javase/6/docs/api/java/util/logging/package-summary.html)

```
} catch (SQLException e) {
    logger.log(Level.INFO,"SQL Error encountered",e);        
} catch (Exception e) {
    logger.log(Level.INFO,"Other error encountered",e);        
} 
```

从正确处理错误开始，并研究程序遇到的错误。

除了这个问题，正如其他人指出的那样，你`doGet`的没有实现 - 所以如果你用它来调用页面，`GET`它不会做任何事情，因为`doGet`它是空的。它应该做点什么`POST`。

# python - 如何生成唯一的随机列表

> ID：12759318
> 
> 赞同：-4
> 
> 时间：2012-10-06T11:20:31.723
> 
> 标签：python, r, bioconductor

> **可能重复：**
> [随机抽样基因列表](https://stackoverflow.com/questions/12754724/random-sampling-a-list-of-genes)

我想从 19.000 个基因的宇宙中创建 1000 个包含 1652 个基因的随机列表。我决定更换，因为宇宙没有那么大。唯一的条件是列表之间可以包含相似的基因（由于替换），但每个列表不能包含超过一次的基因。因此它将在单个列表中是唯一的。对此有何建议？

例如：宇宙 = 字母[1:26]

期望的输出：

> ```
>  [[1]]  [[2]]   [[3]]   [[...]]
>    a      b       f
>    b      c       a
>    c      d       b
>    f      z       j
>    h      j       o 
> ```

我想避免这样的情况：

> ```
>  [[1]]  [[...]]
>   a   
>   a   
>   b   
>   c
>   c 
> ```

由于宇宙不是那么大，我不能设置 REPLACE = F。如果我设置 REPLACE = T，重复的元素会出现在列表中……这是我在分析中试图避免的。

提前致谢

E.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T11:29:01.923

此代码从宇宙中抽取 10 个样本中的 5 个样本，无需替换。我认为这就是你想要的：

```
Universe = letters[1:26]
replicate(5, sample(Universe, 10, replace = FALSE))

     [,1] [,2] [,3] [,4] [,5]
 [1,] "j"  "l"  "k"  "c"  "j" 
 [2,] "g"  "i"  "c"  "t"  "g" 
 [3,] "z"  "u"  "m"  "u"  "e" 
 [4,] "a"  "b"  "t"  "e"  "q" 
 [5,] "q"  "d"  "j"  "k"  "m" 
 [6,] "r"  "a"  "l"  "l"  "x" 
 [7,] "e"  "g"  "r"  "i"  "f" 
 [8,] "l"  "w"  "o"  "g"  "u" 
 [9,] "b"  "y"  "b"  "x"  "c" 
[10,] "u"  "j"  "x"  "a"  "b" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T11:27:50.820

不确定“REPLACE = T”是什么意思，但 random.sample 可能会做你想做的事

```
>>> import random
>>> import string
>>> universe = string.ascii_lowercase
>>> random.sample(universe, 5)
['z', 'n', 'p', 'u', 's'] 
```

用数字作为宇宙

```
>>> universe = range(19000)
>>> result = [random.sample(universe, 1652) for x in range(1000)] 
```

运行时间不到一秒钟。如果您想避免重复（一开始不太可能），您可以使用 set

```
>>> result = set()
>>> while len(result) < 1000:
...     result.add(tuple(random.sample(universe, 1652))) 
```

# c - 为什么这一直只返回我的单链表的一个节点？

> ID：12759324
> 
> 赞同：0
> 
> 时间：2012-10-06T11:21:53.410
> 
> 标签：c

我有一个结构，

```
 typedef struct song{
    string title;
    string artist;
    string album;
    string genre;
    float rating;
    struct song *next;
    }song_t; 
```

和删除功能，

```
 song_t *DeleteSong(song_t *head, string key){
    song_t *temp, *temp2, *holder;
    holder = (song_t *)malloc(sizeof(song_t));  
    temp = head;

    while(temp != NULL && strcasecmp(temp->title, key) != 0){
        temp = temp->next;
    }
    if(temp == NULL){
        newline;
        printf("Song not found.");
        newline;
        newline;
    }

    else if(temp == head){
        if(temp->next == NULL){
            temp->next = NULL;
            free(temp);
            return NULL;
        }
        else{
        head = temp->next;
        }
    }

    else if(temp->next == NULL){
        temp2 = head;

        while(temp2->next->next != NULL){
            temp2 = temp2->next;
        }
        holder = temp2->next->next;
        temp2->next = NULL;
    }

    else{
        temp2 = head;
        while(temp2->next != temp){
            temp2 = temp2->next;
        }
        holder = temp;
        temp2->next = temp->next;
        free(holder);
    }
    return head;
    } 
```

最后，一个删除重复的功能，

```
song_t *RemoveDuplicate(song_t *head){
    song_t *temp;
    song_t *temp2;
    temp = head;
    temp2 = temp->next;

    while(temp != NULL){
        while(temp2 != NULL){
            if(strcasecmp(temp->title,temp2->title) == 0 && strcasecmp(temp->artist,temp2->artist) == 0 && strcasecmp(temp->album,temp2->album) == 0 && strcasecmp(temp->genre,temp2->genre) == 0){
                if(temp2 == temp->next){
                    temp = DeleteSong(temp,temp2->title);
                }
                else{
                    temp2 = DeleteSong(temp2->next,temp2->title);
                }
            }
            temp2 = temp2->next;
        }
        temp = temp->next;
    }

    } 
```

但是，每当我在 main 中包含删除重复函数时，head = RemoveDuplicate(head);

结果总是只返回一个结构并删除整个列表。我认为 RemoveDuplicate 函数有问题，因为我测试了 DeleteSong 函数并且它运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T12:17:11.913

如果列表中的前两个条目是重复的，那么您第一次检查时似乎是：

```
if(temp2 == temp->next){
    temp = DeleteSong(temp,temp2->title);
} 
```

它将在列表的开头评估为 true。如果您的列表突然减少到列表的头部，您可能想检查从那里会发生什么。

我怀疑这个错误实际上可能是在 DeleteSong 函数中发现的，因为它看起来比我从我见过的其他单链表中回忆的要复杂一些。

在伪 C 中，我可能会尝试这样的事情：

```
to_delete = find_node_by_key( key )
return if to_delete == null

current = head
last    = null

if to_delete == current
{
    head = current->next
    to_mem_free = current
}
else do
{
    if to_delete == current
    {
        to_mem_free = current
        if ( last != null ) last->next = current->next
        break
    }

    last = current

} while (current = current->next) != null 
```

您可以将搜索要删除的节点与实际删除相结合，这样您就不必遍历列表两次。除非绝对必要，否则您可能还想尽量避免使用“temp”作为变量名，因为它经常引起混淆。

许多工具链都包含一个提供单链表的库。通过使用这样的库，您可以节省数小时的编码和调试时间，它可能还提供排序树或哈希列表，从而显着加快搜索速度，例如歌曲标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T14:04:08.110

```
holder = (song_t *)malloc(sizeof(song_t));
/* snip */
/* else if */
    holder = temp2->next->next;
/* else */
    holder = temp;
    temp2->next = temp->next;
    free(holder); 
```

当您分配时`holder = temp2->next->next;`（顺便说一句，它总是`NULL`在那里），或者`holder = temp;`，您将失去对`malloc`ed 内存的引用。由于您根本没有真正使用`holder`，因此解决方法是将其从函数中删除。在第一种情况下，除了分配一个 complex 之外，您没有以任何方式使用它`NULL`，在第二种情况下，删除`holder = temp;`和`free`ing`temp`是正确的方法。

还有一些奇怪的事情和错误：

```
song_t *DeleteSong(song_t *head, string key){
    song_t *temp, *temp2, *holder;
    holder = (song_t *)malloc(sizeof(song_t));  // as said, remove holder completely
    temp = head;

    /* Find song with given title */
    while(temp != NULL && strcasecmp(temp->title, key) != 0){
        temp = temp->next;
    }
    if(temp == NULL){
        newline;
        printf("Song not found.");
        newline;
        newline;
    }
    /* It's the very first in the list */
    else if(temp == head){
        if(temp->next == NULL){
            /* It's even the only one */
            temp->next = NULL;    // This runs only if temp->next is already NULL
            free(temp);           // Also free the members of temp, or you're leaking
            return NULL;
        }
        else{
            head = temp->next;    // You should now free temp and members, or you're leaking memory
        }
    }
    /* It's the last one in the list, but not the first */
    else if(temp->next == NULL){
        temp2 = head;
        /* Find the penultimate song */
        while(temp2->next->next != NULL){
            temp2 = temp2->next;
        }
        holder = temp2->next->next;
        temp2->next = NULL;    // You should now free temp and members, or you're leaking memory
    }
    /* Neither first nor last */
    else{
        temp2 = head;
        /* Find song before */
        while(temp2->next != temp){
            temp2 = temp2->next;
        }
        holder = temp;
        temp2->next = temp->next;
        free(holder);
    }
    return head;
} 
```

但除了泄漏之外，它是正确的，尽管不必要地复杂。

```
song_t *DeleteSong(song_t *head, string key) {
    song_t *prev = NULL, curr = head;
    /* Find song and node before that */
    while(curr != NULL && strcasecmp(curr->title, key) != 0) {
        prev = curr;
        curr = curr->next;
    }
    if (curr == NULL) {
        /* Not found */
        newline;
        printf("Song not found.");
        newline;
        newline;
    } else if (prev == NULL) {
        /* It's the very first song in the list
         * so let head point to its successor
         * and free the song; it doesn't matter
         * if it's the last in the list
         */
        head = curr->next;
        free(curr->title);   // Probably, but not if title isn't malloced
        free(curr->artist);  // Ditto
        free(curr->album);
        free(curr->genre);
        free(curr);
    } else {
        /* We have a predecessor, let that point
         * to the successor and free the song
         */
        prev->next = curr->next;
        free(curr->title); // See above
        free(curr->artist);
        free(curr->album);
        free(curr->genre);
        free(curr);
    }
    return head;
} 
```

`RemoveDuplicate`另一方面，您的功能并没有达到您的预期。除了副本立即跟随原件的情况和不复制的情况之间的区别（我看不出任何原因）之外，分配`temp = DeleteSong(temp,temp2->title);`分别。`temp2 = DeleteSong(temp2->next,temp2->title);`改变什么`temp`。`temp2`指向，但不是列表中相应的前任指向的位置。让我们用一点 ASCII 艺术来说明这个问题：

```
 temp    temp2
         |      |
         v      v
song1->song2->song3->song4->song5->... 
```

在哪里`song2`和`song3`是重复的。现在在 中`temp = DeleteSong(temp,temp2->title);`，由于两首歌是重复的，已经匹配的`head`参数，并且在你的版本中，已经完成了，所以列表根本没有改变，你只是得到`DeleteSong``DeleteSong``head = temp->next; return head;`

```
 temp temp2
              |   |
              v   v
song1->song2->song3->song4->... 
```

两个指针都指向同一个列表节点。在我的版本中，`DeleteSong`它释放了节点，`song1.next`现在将指向`free`d 内存，哎呀。

如果副本没有立即跟随原始，`temp2 = DeleteSong(temp2->next,temp2->title);`则可能找不到具有匹配标题的歌曲，因为搜索在已知匹配*之后*开始，在这种情况下，列表根本没有修改，`temp2`只是更改为指向后继。如果之后有匹配标题的歌曲，找到的副本仍然没有从列表中删除，并且之后的部分可能会改变，可能导致不健全的状态。如果`temp2`指向列表中倒数第二个节点，并且最后一个节点具有匹配的标题，则最后一个节点是`free`d，但是`next`副本的指针没有改变，所以现在它指向`free`d 内存，你有一个悬空指针（这是一个等待发生的段错误）。

另一个问题是`DeleteSong`和的删除标准`RemoveDuplicate`不同，前者只检查标题，后者还检查艺术家、专辑和流派，因此在后者中使用前一个功能可能会删除不应删除的歌曲（考虑封面版本）。

当你想从一个单链表中删除一个节点时，你需要一个指向前一个节点的指针才能改变它所指向的内容，否则你将创建悬空指针。我在上面给出了一个标准的方法，你基本上可以将它复制到内部循环中，但是在这里我们永远不会想要删除第一个节点，所以它有点简单：

```
// void, since head is never changed, only duplicates after the original are removed
void RemoveDuplicates(song_t *head) {
    song_t *orig = head, prev, curr;
    while(orig != NULL && orig->next != NULL) {
        prev = orig;
        curr = orig->next;
        while(curr != NULL) {
            // Find next song to remove
            while(curr != NULL && !meets_deletion_criteria(orig, curr)) {
                prev = curr;
                curr = curr->next;
            }
            // Now either curr is NULL, or it shall be deleted
            if (curr != NULL) {
                // Let the predecessor point to curr's successor
                prev->next = curr->next;
                clean_up(curr); // free all malloced members and the node itself
                curr = prev->next;
            }
        }
        orig = orig->next;
    }
} 
```

# android - 如何处理大量图片。哪些缩略图会显示在 Android 应用程序中？

> ID：12759327
> 
> 赞同：0
> 
> 时间：2012-10-06T11:22:53.560
> 
> 标签：android

我的 android 应用程序有问题。我使用了一个应用程序，它使用手机/平板电脑的内置相机制作图片。由于相机的高分辨率，这些图片有时尺寸很大。

现在我加载应用程序并创建一个 listView，其中图片的小缩略图位于左侧，右侧是一些文本。

我以这种方式创建图片：

```
Bitmap a = BitmapFactory.decodeFile(url);
int width = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 
         (float) 66.0, context.getResources().getDisplayMetrics());
int height = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 
         (float) 48.0, context.getResources().getDisplayMetrics());
Bitmap b = Bitmap.createScaledBitmap(a, width, height, false); 
```

问题是这一步需要相当长的时间。

有什么办法可以让这更快吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T11:32:40.963

没有办法让它更快，但你不应该阻塞 UI 线程。看

1.  AsyncTask （以及许多相关问题，例如[Using AsyncTask to load Images in ListView](https://stackoverflow.com/questions/7729133/using-asynctask-to-load-images-in-listview)）
2.  LruCache

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T11:47:38.880

这是我从这里使用的解决方案：[https ://stackoverflow.com/a/5934983/1369222](https://stackoverflow.com/a/5934983/1369222)

效果很好！

```
byte[] imageData = null;

        try     
        {

            final int THUMBNAIL_SIZE = 64;

            FileInputStream fis = new FileInputStream(fileName);
            Bitmap imageBitmap = BitmapFactory.decodeStream(fis);

            imageBitmap = Bitmap.createScaledBitmap(imageBitmap, THUMBNAIL_SIZE, THUMBNAIL_SIZE, false);

            ByteArrayOutputStream baos = new ByteArrayOutputStream();  
            imageBitmap.compress(Bitmap.CompressFormat.JPEG, 100, baos);
            imageData = baos.toByteArray();

        }
        catch(Exception ex) {

        } 
```

确保在异步或单独的线程任务中执行此操作，以免阻塞 UI 线程！

# fluent-nhibernate - 如何加快我的 Nhibernate 配置

> ID：12759328
> 
> 赞同：1
> 
> 时间：2012-10-06T11:23:03.620
> 
> 标签：fluent-nhibernate, asp.net-mvc-4

我有一个使用 fluent NHibernate 的 ASP.NET MVC4 web api，但是当我运行调试时，我第一次尝试访问任何使用数据库的站点需要 1.5 分钟，所以我发现[Fluent nHibernate 启动时间慢](https://stackoverflow.com/questions/4382870/fluent-nhibernate-slow-startup-time)，但我不确定如何利用它，

当它在实时服务器上运行时，它必须垃圾收集会话数据，因为如果我很长时间没有使用它，它需要很长时间才能再次配置。

是否有可能将其缩短到 10 秒以下而不是 1.5 分钟？

我当前的 SessionFactory 类看起来像这样

```
public class SessionFactory
{
    private static readonly string ConnString = System.Configuration.ConfigurationManager.ConnectionStrings["MySQLConnectionString"].ConnectionString;

    private static ISessionFactory _session;
    private static readonly object SyncRoot = new Object();

    private static ISessionFactory CreateSessionFactory()
    {
        return Fluently.Configure()
            .Database(MySQLConfiguration
            .Standard
            .ConnectionString(ConnString))
            .Mappings(m => m.FluentMappings
                .AddFromAssemblyOf<UserMap>())
                .ExposeConfiguration(UpdateSchema)
                .BuildSessionFactory();
    }

    private static void UpdateSchema(Configuration cfg)
    {
        new SchemaUpdate(cfg).Execute(false, true);
    }

    public static ISession Session
    {
        get
        {
            if (_session == null)
            {
                lock (SyncRoot)
                {
                    if (_session == null)
                        _session = CreateSessionFactory();
                }
            }
            return _session.OpenSession();
        }
    }
} 
```

这是 dotTrace 的屏幕截图![在此处输入图像描述](../Images/c9d51426dda4c4ad14797840a5505eff.png)

对我的主机上的请求进行计时，初始请求需要 1 分 50 秒，而那是在“实时”服务器上（我无法控制那里的 IIS）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:13:36.313

我可以看到这段代码有很多问题。您的 CreateSessionFactory 应该只在应用程序的生命周期中被调用一次。在 global.asax 中创建一个静态变量，并在 Application_Start() 中调用一次 CreateSessionFactory。同样在 global.asax 中，您想为 Application_BeginRequest 和 Application_EndRequest 设置一些事件。这是您要创建和销毁会话的地方。这是您在 Web 应用程序中的工作单元。您还应该将会话存储在 HttpContext 中。

```
public static ISession CurrentSession
{
    get { return (ISession)HttpContext.Current.Items[sessionkey]; }
    set { HttpContext.Current.Items[sessionkey] = value; }
}

protected void Application_BeginRequest()
{
    CurrentSession = SessionFactory.OpenSession();
}

protected void Application_EndRequest()
{
    if (CurrentSession != null)
        CurrentSession.Dispose();
} 
```

每次需要会话时，您的代码都会重新创建 SessionFactory。

# android - Android获取网页源

> ID：12759336
> 
> 赞同：0
> 
> 时间：2012-10-06T11:24:41.803
> 
> 标签：android, url, web

我想获取用户输入的网页的源代码。当他按下按钮时，他应该会在`TextView`. 这是我的代码：

```
final Button b = (Button) findViewById(R.id.button1);

        b.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub

                try {
                    URL url = null;
                    url = new URL(myEditText.getText().toString());
                    URLConnection conn = url.openConnection();
                    BufferedReader reader = new BufferedReader(
                            new InputStreamReader(conn.getInputStream()));
                    String line = "";
                    while ((line = reader.readLine()) != null) {
                        myTextView.append(line);

                    }

                } catch (Exception e) {

                    Log.e("ERR",e.getMessage());
                }

            }
        }); 
```

当我运行它时，我得到一个 NullPointerException

```
BufferedReader reader = new BufferedReader(new InputStreamReader(conn.getInputStream())); 
```

.-->Println 需要一条消息。

我不知道出了什么问题，因为这是来自视频教程。我已经`<uses-permission android:name="android.permission.INTERNET"/>`在 Manifest 中写了，所以一切都应该没问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T11:44:18.190

试试这个。

```
url = new URL("http://www.stackoverflow.com"); 
```

如果它有效，那么您需要为类似**isValidUrl()**设置验证？

因为用户可能输入了错误的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T11:45:10.397

```
 if(!TextUtils.isEmpty(myEditText.getText()))
             url = new URL(myEditText.getText().toString());
else
url=""; 
```

或者如果您使用的是最新版本，请检查 StrictMode 并将其删除

```
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
    StrictMode.setThreadPolicy(policy); 
```

还要检查 android 是否有网络可用

# android - 添加到线性布局时按钮不可见

> ID：12759337
> 
> 赞同：0
> 
> 时间：2012-10-06T11:25:24.527
> 
> 标签：android, android-layout

我想显示表格，在表格下方我想在表格布局的中心显示按钮，所以我将两者都包装在线性布局中，但现在它不显示。请帮我解决问题。这是我的 xml 布局文件=-

```
<LinearLayout 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
        android:layout_marginLeft="40dp"
        android:layout_marginRight="40dip"
        android:layout_marginTop="30dp"
        android:layout_toRightOf="@id/item">
    <TableLayout
        android:id="@+id/itemTable"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/border"
        android:orientation="horizontal"
        android:padding="3dip" >
    </TableLayout>

    <Button
        android:id="@+id/btn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="10dp"
        android:background="@drawable/list_selector"
        android:padding="10dp" 
        android:layout_gravity="center_horizontal"
        android:text=" Order " />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T11:47:11.480

添加`android:orientation="vertical"`到您的`LinearLayout`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T11:47:50.377

您是否有理由不使用RelativeLayout？

```
<RelativeLayout
android:layout_width="wrap_content"
android:layout_height="wrap_content"
    android:layout_marginLeft="40dp"
    android:layout_marginRight="40dip"
    android:layout_marginTop="30dp"
    android:layout_toRightOf="@id/item">
<TableLayout
    android:id="@+id/itemTable"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:background="@drawable/border"
    android:orientation="horizontal"
    android:padding="3dip" >
</TableLayout>

<Button
    android:id="@+id/btn"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="10dp"
    android:background="@drawable/list_selector"
    android:padding="10dp" 
    android:layout_below="@+id/itemTable"
    android:layout_gravity="center_horizontal"
    android:text=" Order " />
 </RelativeLayout> 
```

这样它应该很好地适应布局内部。

如果你的问题是你没有看到按钮，也许你的表太大了？你应该把它变小，或者把所有东西都放在一个漂亮的 ScrollView

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T11:42:32.190

将滚动视图添加为父级：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/scroll_view"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

<LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
        android:layout_marginLeft="40dp"
        android:layout_marginRight="40dip"
        android:layout_marginTop="30dp"
        android:layout_toRightOf="@id/item">
    <TableLayout
        android:id="@+id/itemTable"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/border"
        android:orientation="horizontal"
        android:padding="3dip" >
    </TableLayout>

    <Button
        android:id="@+id/btn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="10dp"
        android:background="@drawable/list_selector"
        android:padding="10dp" 
        android:layout_gravity="center_horizontal"
        android:text=" Order " />
</LinearLayout>

</Scrollview> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T11:45:24.773

将 android:gravity = "center_horizo​​ntal" 添加到线性布局并将 LinearLayout 的方向设置为垂直。

# c++ - 我应该为赋值运算符使用左值引用限定符吗？

> ID：12759340
> 
> 赞同：16
> 
> 时间：2012-10-06T11:25:48.977
> 
> 标签：c++, c++11, operator-overloading, assignment-operator

最近，我关注了关于 C++ 中表达式赋值的讨论，如下例所示：

```
string s1, s2, s3;
(s1 + s2) = s3; 
```

使用 C++11，可以将赋值运算符限制为左值引用（在左侧）。当如下声明赋值运算符时，编译器 Clang 由于类型不兼容而拒绝代码并显示错误消息。

```
auto operator=(const string& rhs) & -> string&;
auto operator=(string&& rhs) & -> string&; 
```

我在任何地方都没有看到这个。是否有充分的理由不为赋值运算符使用左值引用限定符（除了在大多数编译器中缺少支持）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-06T12:50:26.310

有趣的！我什至没有意识到这一点，花了我一段时间才找到它（这是[“将移动语义扩展到 *this”](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2007/n2439.htm)提案的一部分）。该符号在 8.3.5 [dcl.decl] 第 4 段中定义，以防有人想查看。

无论如何：现在，了解此功能似乎最有用的是使用它进行重载，并且如果调用函数的对象是左值或右值，则可能表现不同。用它来限制可以做什么，例如，赋值的结果似乎没有必要，特别是如果对象实际上是一个左值。例如，您可能希望语法从分配给一个右值返回一个右值：

```
struct T {
    auto operator=(T&) & -> T&;
    auto operator=(T&&) & -> T&;
    auto operator=(T&) && -> T;
    auto operator=(T&&) && -> T;
}; 
```

这里的目的是允许从分配结果中移动（尽管这是否值得，但我不确定：为什么不首先跳过分配？）。我认为我不会主要使用此功能来限制使用。

就个人而言，我喜欢有时从右值中获取左值的可能性，而赋值运算符通常是实现此目的的一种方式。例如，如果您需要将一个左值传递给一个函数，但您知道您不想对它使用任何东西，您可以使用赋值运算符获取一个左值：

```
#include <vector>
void f(std::vector<int>&);
int main()
{
    f(std::vector<int>() = std::vector<int>(10));
} 
```

这可能是对赋值运算符从右值获取左值的滥用，但这不太可能是偶然发生的。因此，我不会特意通过将赋值运算符限制为仅适用于左值来使这成为不可能。当然，从赋值中返回一个右值也可以防止这种情况发生。如果有的话，这两种用途中哪一种更有用，可能是一个考虑因素。

顺便说一句，clang 似乎支持您从 2.9 版开始引用的语法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-06T12:54:56.413

> 是否有充分的理由不为赋值运算符使用左值引用限定符（除了在大多数编译器中缺少支持）？

不，不是。使用 lvalue 或 rvalue 限定符为 lvalue 或 rvalue 对象构造正确的接口与使用 相同`const`，并且应该以相同的方式处理 - 每个函数都应考虑限制。分配给右值实际上没有意义，因此应该禁止。

您没有看到它的原因主要是编译器支持不佳 - rvalue refs`*this`有点像`thread_local`，大多数编译器实现者似乎已经将它放在“从 C++11 实现的功能”堆栈的底部附近。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-06T14:11:16.767

我对你的建议不是超级热心的一个原因是[我试图完全避免宣布特殊成员](http://rmartinho.github.com/2012/08/15/rule-of-zero.html)。因此，我的大多数赋值运算符都是隐式声明的，因此没有引用限定符。

Of course, for those times when I do write a class or class template to e.g. manage ownership (see conclusion in above link), I could take care to declare those operators for lvalues only. Since it has no effects on clients however, there isn't much of a point.

# php - 对象数据成员 --set null 或根本不设置，或者为不同的数据成员创建新对象？

> ID：12759343
> 
> 赞同：0
> 
> 时间：2012-10-06T11:26:17.113
> 
> 标签：php, class, object

我试图在几种不同类型的帖子上使用一个 php 对象。每种类型的帖子都有几个其他类型的帖子没有的额外数据成员。该对象将需要来自其他类的一些服务来检查`if( $something instanceof $object )`. 所以，使用扩展可能不起作用，我试图为所有人使用一个类。在对象类中，我应该将所有可能的数据成员列为默认值并将未使用的数据成员设置为空，还是忽略未使用的数据成员？

例如

```
class OBJ{

  // common members that share among all posts:
    public $id;
    public $url;
    public $embed_service

  //post has grade
    public $link_grade;

  //posts has license
    public $license;

  //posts has corresponding topics  
    public $comment_topic_id;

//different types of data comes from different actions, saved in one table.
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T11:32:10.890

您应该做的是使用*继承*并从公共对象派生不同类型的帖子：

```
class Post
{
  protected $Content = 'enter content';
}

class Blog extends Post
{
  protected $Categorie;
}

class Comment extends Post
{
  protected email;
} 
```

结果是：

*   所有类都有一个`Content`属性
*   blog 类有一个额外的`Category`属性
*   评论类有一个额外的`email` 属性

# optimization - 减少临时变量的数量

> ID：12759346
> 
> 赞同：0
> 
> 时间：2012-10-06T11:26:45.200
> 
> 标签：optimization, compiler-construction, compiler-development

我正在编写类似编译器的东西。问题如下：我有一个代码，由一系列分配组成：

```
 t1=a+b+c
    t2=t1*d
    t3=sqrt(t1+t2)
    t4=t2+5
    ... 
```

大多数“t”变量都是临时的。我想减少临时变量的数量，尽可能多地重复使用它们。所以，我需要重新排列代码，对表达式进行分组，让一些变量接近变量赋值，所以在计算这些表达式之后，变量可以被重用。当然，我想在此过程中保留代码逻辑。执行此操作的最佳算法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T11:33:25.253

您将查看变量的生命周期。当不再使用该变量时，您可以将其丢弃并重新使用其内存空间。例如：

```
t1=a+b+c
t2=t1*d
t3=sqrt(t1+t2)
// t1 is no longer used, free space to use for t4
t4=t2+5
// t2 is no longer used

...assuming only t3 and t4 is used later on 
```

您还可以查看生命周期如此短以至于甚至不需要分配的变量，例如：

```
t1 = a+b+c
t2 = t1 * 2 
```

这里`t1`只使用一次，在下一个语句中，所以你可以取上一个计算的结果并使用它：

```
t2 = (a+b+c) * 2 
```

# vb.net - Linq：拆分List（字符串）中的每个元素并选择所需的值

> ID：12759348
> 
> 赞同：0
> 
> 时间：2012-10-06T11:26:54.763
> 
> 标签：vb.net, linq, split, linq-to-objects

我想解析以下响应并选择值。我不想选择最后一行。谁能帮助我如何使用 LINQ 选择值？

“约翰：55

金：77

凯文：23

[生成时间：15/12/2011 12:03:45][响应时间：123.45ms]"

```
Dim Response as String

Dim values as System.Collections.Generic.List(of String)(Response.split(vbcrlf))

Dim dbs as New List(of Double)

dbs = from i in values
      Select i.split(":")(1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T11:41:12.990

类似的东西，如果最后一行总是以“[”开头

```
Dim dbs = Response.Split(vbCrLf)
         .Where(Function(m) !String.IsNullOrEmpty(m) And !m.StartsWith("["))
         .Select(Function(m) Convert.ToDouble(m.Split(":").Last().Trim())).ToList(); 
```

# python - 使用 Python 优化查找最近创建的前 10 个文件

> ID：12759350
> 
> 赞同：1
> 
> 时间：2012-10-06T11:27:03.740
> 
> 标签：python, algorithm

我试图找到一种最佳方式来提取最近使用 Python 从目录树中创建的文件，比如 10 个。我找到了许多[1, 2] 有趣的解决方案，但是，它们只涉及一个文件。

```
 ├── d1
                      │   ├── d1-1
                      │   ├── d1-1
                      :
                      ├── d2
                      │   ├── d2-1
                      │   └── d2-2
                      │   │   ├── f1.xxx
                      : :
                      │   │   ├── fn.xxx
                      ├── d3
                      │   ├── d3-1
                      :
                      : 
```

目前，我能想到的唯一方法是通过循环遍历同一棵树来迭代地附加结果，直到我想要 10 个结果；这种方法的问题在于它显然会很耗时......尤其是我的目录树可能很大。我想到的另一种解决方案涉及解析整个目录树并生成具有相应创建或修改日期的文件名路径，然后可能使用该“索引”文件来获取前 10 个最近的文件。数据库在这里可能会很有用，但是，目前它不是一个选择。

有谁知道实现这一目标的最佳方法？

[1] [Python 返回存储在目录中的最新 csv 文件的文件路径/文件名](https://stackoverflow.com/q/11900038/664424)
[2]在目录中[查找最新文件而不读取其所有内容](https://stackoverflow.com/q/4709968/664424)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T11:42:12.323

您可以编写一个生成器函数来返回创建时间和文件名，并使用该`heapq`模块相当有效地自动跟踪最新的“n”条目 - 例如：

```
import os
import heapq

def iterfiles(root):
    for base, dirs, files in os.walk(root):
        for filename in files:
            fullname = os.path.join(base, filename)
            yield os.stat(fullname).st_ctime, fullname

print heapq.nlargest(10, iterfiles('some path here')) 
```

`IOError`顺便说一句 - 如果权限不可用于统计文件，您可能必须处理（尝试/除了产量）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T11:57:08.757

```
import os
import heapq

basedir = ???

files = (os.path.join(x[0], fn) for x in os.walk(basedir) for fn in x[2])
print heapq.nlargest(10, files, key=lambda x:os.stat(x).st_ctime) 
```

# xpath - XPATH -- 查询定义的结果顺序

> ID：12759352
> 
> 赞同：3
> 
> 时间：2012-10-06T11:27:20.027
> 
> 标签：xpath

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T11:34:21.243

The `|` operator computes [the union of its operands](http://www.w3.org/TR/xpath/#node-sets) and with XPath 1.0 you simply get a set of nodes, the order is undefined, though most XPath APIs then return the result in document order or allow you to say which order you want or whether order matters (see for instance [http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathResult](http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathResult)).

With XPath 2.0 you get a sequence of nodes ordered in document order, with XPath 2.0 if you want the order of your subexpressions you would need to use the comma operator, not the union operator i.e. `element[@attr="a"] , element[@attr="b"] , element[@attr="c"]`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-06T16:39:54.203

> can I create an expression that guarantees the result to appear in the order as in the query, even if the elements appear in a different order in the document?

1.  Not with any XPath 1.0 engine -- they return the resulting XmlNodeList in document order.

2.  With XPath 2.0 one can specify that a sequence is to be returned, using the comma `,` operator, like this:

    element[@attr="a"] , element[@attr="b"] , element[@attr="c"]

3.  Finally, If you are limited with an XPath 1.0 implementation, one way of getting the results in the desired order is to evaluate these three XPath expressions:

    element[@attr="a"]

    element[@attr="b"]

    element[@attr="c"]

Then you can access the first result first, the second result -- second and the third result -- third.

# sql-server - 如何获取所有用户定义数据类型的脚本

> ID：12759354
> 
> 赞同：4
> 
> 时间：2012-10-06T11:27:20.750
> 
> 标签：sql-server

如何通过单个查询获取所有用户定义数据类型的脚本。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-06T15:19:09.937

尝试这个：

```
SET NOCOUNT ON

SELECT 'USE ' + QUOTENAME(DB_NAME(), '[') + '
GO';

SELECT '
IF  EXISTS (SELECT * FROM sys.types st JOIN sys.schemas ss ON st.schema_id = ss.schema_id WHERE st.name = N''' + st.[name] + ''' AND ss.name = N''' + ss.[name] + ''')
    DROP TYPE ' + QUOTENAME(ss.name, '[') + '.' + QUOTENAME(st.name, '[') + '
GO

CREATE TYPE ' + QUOTENAME(ss.name, '[') + '.' + QUOTENAME(st.name, '[') + ' FROM ' + 
QUOTENAME(bs.[name], '[') + 
    CASE bs.[name]
        WHEN 'char' THEN (CASE ISNULL(st.max_length, 0) WHEN 0 THEN '' WHEN -1 THEN '(MAX)' ELSE '(' + convert(varchar(10), st.max_length) + ')' END)
        WHEN 'nchar' THEN (CASE ISNULL(st.max_length, 0) WHEN 0 THEN '' WHEN -1 THEN '(MAX)' ELSE '(' + convert(varchar(10), st.max_length/2) + ')' END)
        WHEN 'varchar' THEN (CASE ISNULL(st.max_length, 0) WHEN 0 THEN '' WHEN -1 THEN '(MAX)' ELSE '(' + convert(varchar(10), st.max_length) + ')' END)
        WHEN 'nvarchar' THEN (CASE ISNULL(st.max_length, 0) WHEN 0 THEN '' WHEN -1 THEN '(MAX)' ELSE '(' + convert(varchar(10), st.max_length/2) + ')' END)
        WHEN 'numeric' THEN (CASE ISNULL(st.[precision], 0) WHEN 0 THEN '' ELSE '(' + convert(varchar(10), st.[precision]) + ', ' + convert(varchar(10), st.[scale]) + ')' END)
        WHEN 'decimal' THEN (CASE ISNULL(st.[precision], 0) WHEN 0 THEN '' ELSE '(' + convert(varchar(10), st.[precision]) + ', ' + convert(varchar(10), st.[scale]) + ')' END)
        WHEN 'varbinary' THEN (CASE st.max_length WHEN -1 THEN '(max)' ELSE '(' + convert(varchar(10), st.max_length) + ')' END)
        ELSE ''
    END + 
'
GO
'
FROM sys.types st 
    INNER JOIN sys.schemas ss ON st.[schema_id] = ss.[schema_id]
    INNER JOIN sys.types bs ON bs.[user_type_id] = st.[system_type_id]
WHERE st.[is_user_defined] = 1 -- exclude system types
ORDER BY st.[name], ss.[name] 
```

免责声明：我不是这个脚本的作者。只是我在我的个人图书馆里有它。不幸的是，作者的名字不在其中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-29T11:52:17.230

这是一个实际工作的脚本。
为所有用户定义的标量和表类型创建一个脚本（未使用 CLR 类型进行测试）：

```
-- http://www.sqlines.com/sql-server-to-oracle/create_type

SELECT 
      sch.name AS UDT_SCHEMA_NAME 
     ,userDefinedTypes.name AS UDT_TYPE_NAME 

    ,
    N'IF NOT EXISTS (SELECT * FROM sys.types st JOIN sys.schemas ss ON st.schema_id = ss.schema_id WHERE st.name = N''' + REPLACE(userDefinedTypes.name, '''', '''''') + N''' AND ss.name = N''' + REPLACE(sch.name, '''', '''''') + N''') '
    + NCHAR(13) + NCHAR(10) 
    +
    CASE WHEN userDefinedTypeProperties.IsTableType = 1 
        THEN N'CREATE TYPE ' + QUOTENAME(sch.name) + '.' + QUOTENAME(userDefinedTypes.name) + ' AS TABLE ( 
    ' + tAllColumns.column_definition  + N'
); ' 
        ELSE 
            + N'CREATE TYPE ' + QUOTENAME(sch.name) + '.' + QUOTENAME(userDefinedTypes.name) 
            + N' FROM ' 
            + tBaseTypeComputation.baseTypeName 
            + CASE WHEN userDefinedTypeProperties.is_nullable = 0 THEN N' NOT NULL' ELSE N'' END 
            + N'; ' 
    END AS SqlCreateUdt

FROM sys.types AS userDefinedTypes 

INNER JOIN sys.schemas AS sch 
    ON sch.schema_id = userDefinedTypes.schema_id 

LEFT JOIN sys.table_types AS userDefinedTableTypes 
    ON userDefinedTableTypes.user_type_id = userDefinedTypes.user_type_id 

LEFT JOIN sys.types AS systemType 
    ON systemType.system_type_id = userDefinedTypes.system_type_id 
    AND systemType.is_user_defined = 0 

OUTER APPLY 
    (
        SELECT 
             userDefinedTypes.is_nullable 
            ,userDefinedTypes.precision AS NUMERIC_PRECISION 
            ,userDefinedTypes.scale AS NUMERIC_SCALE 
            ,userDefinedTypes.max_length AS CHARACTER_MAXIMUM_LENGTH
            ,CASE WHEN userDefinedTableTypes.user_type_id IS NULL THEN 0 ELSE 1 END AS IsTableType 
            ,CONVERT(smallint, 
                    CASE -- datetime/smalldatetime  
                    WHEN userDefinedTypes.system_type_id IN (40, 41, 42, 43, 58, 61) THEN ODBCSCALE(userDefinedTypes.system_type_id, userDefinedTypes.scale) 
                    END
            ) AS DATETIME_PRECISION 
    ) AS userDefinedTypeProperties 

OUTER APPLY 
    (
        SELECT 
            systemType.name 
            + 
            CASE 
                WHEN systemType.name IN ('char', 'varchar', 'nchar', 'nvarchar', 'binary', 'varbinary') 
                    THEN N'(' 
                        + 
                        CASE WHEN userDefinedTypeProperties.CHARACTER_MAXIMUM_LENGTH = -1 THEN 'MAX'
                            ELSE CONVERT
                                (
                                    varchar(4)
                                    ,userDefinedTypeProperties.CHARACTER_MAXIMUM_LENGTH 
                                )
                        END 
                        + N')' 
                WHEN systemType.name IN ('decimal', 'numeric')
                    THEN N'(' + CONVERT(varchar(4), userDefinedTypeProperties.NUMERIC_PRECISION) + N', ' + CONVERT(varchar(4), userDefinedTypeProperties.NUMERIC_SCALE) + N')'
                WHEN systemType.name IN ('time', 'datetime2', 'datetimeoffset') 
                    THEN N'(' + CAST(userDefinedTypeProperties.DATETIME_PRECISION AS national character varying(36)) + N')' 
                ELSE N'' 
            END AS baseTypeName  
    ) AS tBaseTypeComputation 

OUTER APPLY 
    (
        SELECT 
            (
                SELECT 
                    -- ,clmns.is_nullable 
                    -- ,tComputedProperties.ORDINAL_POSITION
                    -- ,tComputedProperties.COLUMN_DEFAULT

                      CASE WHEN tComputedProperties.ORDINAL_POSITION = 1 THEN N' ' ELSE N',' END 
                    + QUOTENAME(clmns.name) 
                    + N' '
                    + tComputedProperties.DATA_TYPE 
                    + 
                    CASE 
                        WHEN tComputedProperties.DATA_TYPE IN ('char', 'varchar', 'nchar', 'nvarchar', 'binary', 'varbinary') 
                            THEN N'(' 
                                + 
                                CASE WHEN tComputedProperties.CHARACTER_MAXIMUM_LENGTH = -1 THEN 'MAX'
                                    ELSE CONVERT
                                        (
                                            varchar(4)
                                            ,tComputedProperties.CHARACTER_MAXIMUM_LENGTH 
                                        )
                                END 
                                + N')' 
                        WHEN tComputedProperties.DATA_TYPE IN ('decimal', 'numeric')
                            THEN N'(' + CONVERT(varchar(4), tComputedProperties.NUMERIC_PRECISION) + N', ' + CONVERT(varchar(4), tComputedProperties.NUMERIC_SCALE) + N')'
                        WHEN tComputedProperties.DATA_TYPE IN ('time', 'datetime2', 'datetimeoffset') 
                            THEN N'(' + CAST(tComputedProperties.DATETIME_PRECISION AS national character varying(36)) + N')' 
                        ELSE N'' 
                    END 
                    + CASE WHEN tComputedProperties.is_nullable = 0 THEN N' NOT NULL' ELSE N'' END 
                    + NCHAR(13) + NCHAR(10) 
                    AS [text()]
                FROM sys.columns AS clmns 
                INNER JOIN sys.types AS t ON t.system_type_id = clmns.system_type_id 
                LEFT JOIN sys.types ut ON ut.user_type_id = clmns.user_type_id 

                OUTER APPLY 
                    (
                        SELECT 
                             33 As bb 
                            ,COLUMNPROPERTY(clmns.object_id, clmns.name, 'ordinal')  AS ORDINAL_POSITION 
                            ,COLUMNPROPERTY(clmns.object_id, clmns.name, 'charmaxlen') AS CHARACTER_MAXIMUM_LENGTH 
                            ,COLUMNPROPERTY(clmns.object_id, clmns.name, 'octetmaxlen') AS CHARACTER_OCTET_LENGTH 
                            ,CONVERT(nvarchar(4000), OBJECT_DEFINITION(clmns.default_object_id)) AS COLUMN_DEFAULT 

                            ,clmns.is_nullable 
                            ,t.name AS DATA_TYPE

                            ,CONVERT(tinyint, 
                                CASE -- int/decimal/numeric/real/float/money  
                                    WHEN clmns.system_type_id IN (48, 52, 56, 59, 60, 62, 106, 108, 122, 127) THEN clmns.precision  
                                END
                             ) AS NUMERIC_PRECISION 

                            ,CONVERT(int, 
                                CASE -- datetime/smalldatetime  
                                    WHEN clmns.system_type_id IN (40, 41, 42, 43, 58, 61) THEN NULL  
                                    ELSE ODBCSCALE(clmns.system_type_id, clmns.scale) 
                                END
                             ) AS NUMERIC_SCALE

                            ,CONVERT(smallint, 
                                 CASE -- datetime/smalldatetime  
                                    WHEN clmns.system_type_id IN (40, 41, 42, 43, 58, 61) THEN ODBCSCALE(clmns.system_type_id, clmns.scale) 
                                 END
                            ) AS DATETIME_PRECISION 
                    ) AS tComputedProperties  

                WHERE clmns.object_id = userDefinedTableTypes.type_table_object_id 
                ORDER BY tComputedProperties.ORDINAL_POSITION 

                FOR XML PATH(''), TYPE 
            ).value('.', 'nvarchar(MAX)') AS column_definition 
    ) AS tAllColumns  

WHERE userDefinedTypes.is_user_defined = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T21:59:43.387

除了 vmvadivel 所说的（就像一个魅力！！）这是一个为你做的脚本，只需将代码转储到那里并将 sql 文件命名为 getTypesSelect.sql ，这将起作用：

```
 @echo off
cls

set /p SName=Server Name :
set /p UName=User Name :
set /p Pwd=Password :
set /p DbName=Database Name :

set /p choice=ARE YOU SURE TO EXECUTE SCRIPTS in %DbName% (y/n) ?

if '%choice%'=='y' goto begin
goto end

:begin
if exist addUserDefinedTypes.sql del addUserDefinedTypes.sql

@echo on

SQLCMD -S %SName% -d %DbName% -U %UName% -i "getTypesSelect.sql" -o addUserDefinedTypes.txt -P %Pwd%

rename addUserDefinedTypes.txt addUserDefinedTypes.sql

@notepad addUserDefinedTypes.sql

:end 
```

如果您计划在不同的数据库上运行（您可能会这样做），请从上面的 sql 查询中删除以下行

```
SELECT 'USE ' + QUOTENAME(DB_NAME(), '[') + '
GO'; 
```

# c# - c# 访问所有可用的 css 列表或属性集合

> ID：12759356
> 
> 赞同：0
> 
> 时间：2012-10-06T11:27:23.093
> 
> 标签：c#, .net, css, class, ienumerable

如何获取所有`Style`可用属性的列表？

就像在 Visual Studio 设计器模式中一样，每个支持的元素都有一个 IntelliSense 属性列表，因此只要您键入`style=`，您就会得到所有可用属性的提供。

我也希望在后面的代码中将它作为集合或列表提供。它不应该在公共内置的众所周知的.net中可用`class`吗？

我正在搜索`System.Web.UI.CssStyleCollection`但无法通过任何方法得到它。我确信它（应该）非常简单。提前致谢 ！

如[msdn](http://msdn.microsoft.com/en-us/library/system.web.ui.cssstylecollection.keys.aspx)中所述：

**指定**HTML 服务器控件的 CssStyleCollection

我试图拥有所有可用属性，而不仅仅是那些应用于给定页面中给定元素或控件的属性。感谢您的评论@Abody97

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:25:22.383

发现唯一的来源是[HtmlTextWriterStyle 枚举](http://msdn.microsoft.com/en-us/library/system.web.ui.htmltextwriterstyle.aspx)，以避免使用长名称

`HtmlTextWriterStyle.SomeProperty.ToString()`

```
 public sealed class StlProps
    {
       // in visual studio you can just mark the HtmlTextWriterStyle 
       // hit "F12" to its definition to have a list of properties
       // just copy it as const strings 
      public const string BgColor = "BackgroundColor",
                          BackgroundImage = "BackgroundImage",
                          BorderCollapse = "BorderCollapse", 
                          ...etc'

    } 
```

这将让您设置控件样式如下

```
controlID.Style.Add(stlProps.BgColor, "value from Color Class"); 
```

# python - 如何在 Python 中创建 shell 扩展上下文菜单（如 Dropbox）

> ID：12759364
> 
> 赞同：6
> 
> 时间：2012-10-06T11:28:02.327
> 
> 标签：python, windows-shell, win32com

我想创建一个上下文菜单外壳扩展，以配合我用 Python 编写的程序。

我尝试使用[pywin32](http://starship.python.net/crew/mhammond/win32/Downloads.html)`\Lib\site-packages\win32comext\shell\demos\servers\context_menu.py`中的演示（[这里](https://github.com/SublimeText/Pywin32/blob/master/lib/x64/win32comext/shell/demos/servers/context_menu.py)是文件），但它在我的 Win7 x64 上不起作用：它注册正常并添加了注册表项，但上下文菜单没有显示（即使经过重启）。所以我又搜索了一些，并记得 Dropbox 说只使用 Python 进行开发，我查看了他们的上下文菜单注册表项。我发现他们使用了：在他们的（虽然我已经阅读[了这个](http://www.codeproject.com/Articles/445/The-Complete-Idiot-s-Guide-to-Writing-Shell-Extens)和其他一些资源，但我仍然不太了解 shell 扩展）。所以看起来他们将 ac/c++ 代码编译为 dll 并使用它来调用 python 代码。`DropboxExt64.15.dll``InProcServer32`

我的问题是他们是怎么做到的？我在哪里可以找到有关如何使用此方法的资源（示例、指南等）？在 中使用该方法有什么缺陷`context_menu.py`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T01:39:43.240

您的扩展程序必须是 64 位才能显示在 Windows 7 x64 的资源管理器中。所以你需要使用 64 位 Python 和 64 位 pywin32。

大多数带有外壳扩展的应用程序，如 Dropbox，安装两个单独的外壳扩展，一个用于 32 位进程，一个用于 64 位进程。

[在 Windows 7 64 位中使用 32 位 shell 扩展](https://stackoverflow.com/questions/13747836/using-32-bit-shell-extensions-in-windows-7-64-bit)

# gpgpu - GPU 上下文切换

> ID：12759365
> 
> 赞同：1
> 
> 时间：2012-10-06T11:28:10.503
> 
> 标签：gpgpu, gpu, directx-11, compute-shader

我有一个程序，它首先渲染到纹理，然后将纹理传递给计算着色器进行处理，然后通过带纹理的全屏四边形将输出结果渲染到屏幕上。

我在 nVidia 的计算着色器编程指南中读到，每次调度计算着色器时，它都会启动 GPU 设备上下文切换，这不应该经常进行。

我现在很困惑。在我看来，在我的渲染管道中，GPU 两次切换上下文。对？在第一次调度呼叫期间，下一次我正常渲染全屏四边形时。

如果这是正确的，那么我可以通过像这样重新组织我的代码来避免一次切换。首先，渲染到纹理。其次，在计算着色器上进行处理。然后，在下一帧中，渲染结果，然后（仍然在下一帧）渲染纹理的所有更新，在计算着色器上进行处理......所以基本上每一帧的开始我都会渲染最后一帧的结果（第一帧将是一个例外）。那么只会有一个上下文切换，对吧？

但是GPU仍然需要在帧之间进行上下文切换，对吗？所以我的渲染管道的两个版本都有两个上下文切换。性能上不会有任何差异。我对么？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T19:46:05.733

上下文切换会带来很小的影响，但在您的情况下它可以忽略不计，因此您可以在同一帧中安全地在计算和渲染管道之间切换多次，而不必担心它。

在许多现代游戏中，同一管道中有超过 2 个开关（用于渲染的图形管道、用于光照的计算着色器、用于 fxaa 的像素着色器......）并且它们仍然运行良好。

# r - 如何查看函数内变量的值？

> ID：12759367
> 
> 赞同：1
> 
> 时间：2012-10-06T11:28:21.577
> 
> 标签：r

> **可能重复：**
> [调试 R 的一般建议？](https://stackoverflow.com/questions/4442518/general-suggestions-for-debugging-r)

在调试时，我经常想知道一个已完成执行的函数中使用的变量的值。怎样才能做到这一点？

例子：

我有功能：

```
MyFunction <- function() {
    x <- rnorm(10) # assign 10 random normal numbers to x
    return(mean(x))
} 
```

我想知道存储在**x**中的值，这些值在函数执行完毕并清理函数环境后对我不可用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T11:44:39.180

你提到了调试，所以我假设脚本后面不需要这些值，你只想检查发生了什么。在那种情况下，我总是做的是使用`browser`：

```
MyFunction <- function() {
    browser()
    x <- rnorm(10) # assign 10 random normal numbers to x
    return(mean(x))
} 
```

这会将您带入函数范围内的交互式控制台，允许您检查内部发生的情况。

有关 RI 中调试的一般信息，建议使用[此 SO 帖子](https://stackoverflow.com/questions/4442518/general-suggestions-for-debugging-r)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T11:36:41.760

```
MyFunction <- function() {
    x <- rnorm(10) # assign 10 random normal numbers to x
    return(list(x,mean(x)))
} 
```

这将返回一个列表，其中第一个元素是 x，第二个是它的平均值

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T11:34:04.710

你在这里有很多选择。`<<-`最简单的方法是在分配给 时使用运算符`x`。这也是最有可能[让你陷入困境](https://stackoverflow.com/questions/5526322/examples-of-the-perils-of-globals-in-r-and-stata)的。

```
> test <- function() x <- runif(1)
> x <- NA
> test()
> x
[1] NA
> test <- function() x <<- runif(1)
> test()
> x
[1] 0.7753325 
```

**编辑**

@PaulHeimstra 指出您希望将其用于调试。以下是一些通用技巧的指针：

[在 R 中调试的一般建议](https://stackoverflow.com/questions/4442518/general-suggestions-for-debugging-r)

我建议设置`options(error=recover)`或`trace()`与`browser()`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-06T12:03:06.400

There are already some good solutions, I'd like to add one possibility. I emphasize on the fact that you want to *know* the value of a variable used in a function *that has completed executing*. So there is maybe no need to assign those values, and you don't want (a priori) to stop execution. The solution is to simply use `print`. So it is not used by default but only when you want to debug, the option to print or not can be passed as a function argument:

```
MyFunction <- function(x, y, verbose = FALSE) {
    a <- x * y
    if (verbose) print(a)
    b <- x - y
    if (verbose) print(b)
    return(a * b)
} 
```

In general, you would run your function like this: `MyFunction(10, 4)` but when you want to see those intermediate results, do `MyFunction(10, 4, verbose = TRUE)`.

# php - 如何在php中进行升序

> ID：12759369
> 
> 赞同：1
> 
> 时间：2012-10-06T11:28:33.260
> 
> 标签：php, mysql, select

我有选择查询升序，如......

```
select DISTINCT
    (m.task_name) as TaskName, 
    m.activity_name as ActivityName,
    m.actual_score,
    m.score,
    m.section_name 
from 
    users u, 
    som_scores m 
where 
    m.ref_student_id = '".$row['userid']."' and 
    m.section_name IN('jws1','jws2','jws3','jws4','sm1','srs1','Pws1','Pws2','lws1','sp1') 
ORDER BY 
    m.section_name ASC 
```

我想按升序设置部分名称，并按 Task1 Task2 等顺序排列任务名称。

意味着我想显示数据

1) 部分名称 = jws1 和类似任务 Task1 Task2 Task3 Task4 的部分下

2) 部分名称 = jws2 和类似任务 Task1 Task2 Task3 Task4 的部分下

等等..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T11:32:08.440

只需添加二级订单`ORDER BY`

```
ORDER BY 
    section_name ASC,
    TaskName ASC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T11:34:30.967

使用这个查询

```
select DISTINCT(m.task_name) as TaskName, m.activity_name as ActivityName,m.actual_score,m.score,m.section_name from users u, som_scores m where m.ref_student_id = '".$row['userid']."' and m.section_name IN('jws1','jws2','jws3','jws4','sm1','srs1','Pws1','Pws2','lws1','sp1') ORDER BY m.section_name ASC,m.task_name ASC 
```

这将首先按部分排序，然后按任务名称排序

试试这个顺序

```
m.task_name+0 ASC 
```

或者

```
ORDER BY m.section_name ASC,CAST(SUBSTRING(m.task_name,LOCATE(' ',m.task_name)+1) AS SIGNED) ASC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T11:45:29.140

**我找到了这样的解决方案“ `cast( SUBSTRING(TaskName, 5 ) AS unsigned ) ASC`”**

```
select DISTINCT
        (m.task_name) as TaskName, 
        m.activity_name as ActivityName,
        m.actual_score,
        m.score,
        m.section_name 
    from 
        users u, 
        som_scores m 
    where 
        m.ref_student_id = '".$row['userid']."' and 
        m.section_name IN('jws1','jws2','jws3','jws4','sm1','srs1','Pws1','Pws2','lws1','sp1') 
    ORDER BY 
        m.section_name ASC,
        cast( SUBSTRING(TaskName, 5 ) AS unsigned ) ASC,
        ActivityName ASC 
```

# c# - 在c#程序中从日志文件中获取数据

> ID：12759375
> 
> 赞同：-1
> 
> 时间：2012-10-06T11:29:07.927
> 
> 标签：c#

我正在尝试研究如何创建 ac# 程序，该程序可以查看日志文件中的数据，该日志文件始终使用新数据进行更新。日志文件中的数据如下所示：

> CPU2：内存5（50070）CPU3：驱动器7（500）CPU6：内存10（1000）CPU2：内存5（50700）CPU2：内存5（60070）CPU3：驱动器7（500）CPU6：内存10（1000）CPU2：内存5（70000）CPU3：驱动器7（500）CPU6：内存10（1000）。

从日志文件中读取数据后，我希望能够列出日志文件中的最新数据，例如`memory5`，包括之前`[CPU2:]`的数据和之后的数据，`[70000]`以便程序不断监控日志文件并报告上述最新数据`memory5`，它将显示`CPU2: memory5 (70000)`

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T16:55:51.630

尝试这个：

```
private void LoadFile()
{
    try
    {
        using(FileStream fileStream = new FileStream(
            "logs/myapp.log",
            FileMode.Open,
            FileAccess.Read,
            FileShare.ReadWrite))
        {
            using(StreamReader streamReader = new StreamReader(fileStream))
            {
                this.textBoxLogs.Text = streamReader.ReadToEnd();
            }
        }
    }
    catch(Exception ex)
    {
        MessageBox.Show("Error loading log file: " + ex.Message);
    }
} 
```

有一篇关于如何做到这一点的非常有用的博客文章：[Read a file that is in use](http://coding.infoconex.com/post/2009/04/How-do-I-open-a-file-that-is-in-use-in-C.aspx)

# xcode - 使用 vm_read 和 vm_write 在 OS X 10.8.2 上读/写内存

> ID：12759378
> 
> 赞同：1
> 
> 时间：2012-10-06T11:29:30.907
> 
> 标签：xcode, macos, memory, ptrace, mach

这是我仅适用于 Xcode（4.5 版）的代码：

```
#include <stdio.h>
#include <mach/mach_init.h>
#include <mach/mach_vm.h>
#include <sys/types.h>
#include <mach/mach.h>
#include <sys/ptrace.h>
#include <sys/wait.h>
#include <Security/Authorization.h>

int main(int argc, const char * argv[]) {

    char test[14]   = "Hello World! "; //0x7fff5fbff82a

    char value[14]  = "Hello Hacker!";

    char test1[14];

    pointer_t buf;
    uint32_t sz;

    task_t task;

    task_for_pid(current_task(), getpid(), &task);

    if (vm_write(current_task(), 0x7fff5fbff82a, (pointer_t)value, 14) == KERN_SUCCESS) {

        printf("%s\n", test);
        //getchar();
    }

    if (vm_read(task, 0x7fff5fbff82a, sizeof(char) * 14, &buf, &sz) == KERN_SUCCESS) {

        memcpy(test1, (const void *)buf, sz);
        printf("%s", test1);
    }

    return 0;
} 
```

我也在尝试 ptrace 和其他东西，这就是为什么我也包含其他库。

第一个问题是这仅适用于 Xcode，我可以使用调试器找到变量的位置（内存地址）（在这种情况`test`下`value`为`test`上`test1`。

我实际上不明白 vm_write 是如何工作的（不完全）`task_for_pid()`，对于 2° 的问题是我需要在另一个进程上读写，这只是测试函数是否在同一个进程上工作，它可以工作（仅在 Xcode 上）。

我如何在其他进程上做到这一点？我需要读取一个位置（如何找到“某物”的地址？），这是第一个目标。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T21:50:13.700

对于您的问题，有解决方案：

*   第一个问题：OS X 有地址空间布局随机化。如果你想让你的内存图像固定和可预测，你必须用 NOPIE 设置编译你的代码。此设置（PIE = Position Independent Executable）负责允许 ASLR，它通过某个随机值“滑动”内存，每个实例都会更改。

*   我实际上不明白 vm_write 是如何工作的（不完全），对于 task_for_pid() 也是如此：

    Mach API 在“task”和“Thread”的较低级别抽象上运行，它们大致对应于 BSD“process”和“(u)thread”的抽象（有一些例外，例如 kernel_task，它没有 PID ，但让我们暂时忽略它）。task_for_pid 获得任务端口（将其视为“句柄”），如果您获得了端口 - 您可以自由地做任何您想做的事情。基本上，vm_* 函数在任何任务端口上运行——您可以在自己的进程（即 mach_task_self()）或从 task_for_pid 获得的端口上使用它。

    PID 的任务实际上并不一定需要root（即“sudo”）。它需要通过 OSX 上的 taskgated，传统上验证 procmod 或 procview 组的成员身份。您可以配置 taskgated ( /System/Library/LaunchDaemons/com.apple.taskgated.plist) 以进行调试。最终，顺便说一句，获取任务端口将需要一个权利（就像现在在 iOS 上所做的一样）。也就是说，最简单的方法是简单地成为root，而不是使用系统授权等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T08:04:36.493

您是否尝试使用“sudo”运行您的应用程序？如果没有 sudo，您将无法读取/写入其他应用程序的内存。

# delphi - 是否可以在运行时修改 VCL 样式？

> ID：12759379
> 
> 赞同：2
> 
> 时间：2012-10-06T11:29:48.113
> 
> 标签：delphi, delphi-xe2, vcl-styles

我有一个`TabControl`其中每个选项卡代表一组不同的数据。我的应用程序使用`VCL Styles`，因此设置`OwnerDraw`为`True`不会导致`OnDrawTab`被调用。`VCL Styles`我想知道是否有可能以某种方式拦截使用（在我的情况下为）绘制特定控件的例程`TabControl`，并更改控件的绘制方式（例如，更改`Canvas.Font`等）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-06T16:06:27.630

要使用 vcl 样式更改选项卡的字体颜色，您必须覆盖 Vcl.ComCtrls.TTabControlStyleHook 样式挂钩的 DrawTab 方法，并使用您自己的代码来绘制选项卡并设置颜色字体。

试试这个样本

```
uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.ComCtrls;

type
  TForm1 = class(TForm)
    PageControl1: TPageControl;
    TabSheet1: TTabSheet;
    TabSheet2: TTabSheet;
    TabSheet3: TTabSheet;
    TabSheet4: TTabSheet;
    TabSheet5: TTabSheet;
    TabSheet6: TTabSheet;
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

uses
  Vcl.Styles,
  Vcl.Themes;

{$R *.dfm}

type
  TTabFontColorStyleHook= class(Vcl.ComCtrls.TTabControlStyleHook)
  protected
    procedure DrawTab(Canvas: TCanvas; Index: Integer); override;
  end;

  TWinControlClass = class(TWinControl);
  TCustomTabControlClass = class(TCustomTabControl);

procedure TTabFontColorStyleHook.DrawTab(Canvas: TCanvas; Index: Integer);
var
  LDetails    : TThemedElementDetails;
  LImageIndex : Integer;
  LThemedTab  : TThemedTab;
  LIconRect   : TRect;
  R, LayoutR  : TRect;
  LImageW, LImageH, DxImage : Integer;
  LTextX, LTextY: Integer;
  LTextColor    : TColor;

    procedure DrawControlText(const S: string; var R: TRect; Flags: Cardinal);
    var
      TextFormat: TTextFormatFlags;
    begin
      Canvas.Font       := TWinControlClass(Control).Font;
      TextFormat        := TTextFormatFlags(Flags);
      Canvas.Font.Color := LTextColor;
      StyleServices.DrawText(Canvas.Handle, LDetails, S, R, TextFormat, Canvas.Font.Color);
    end;

    procedure AngleTextOut2(Canvas: TCanvas; Angle, X,
      Y: Integer; const Text: string);
    var
      LSavedDC: Integer;
    begin
      LSavedDC := SaveDC(Canvas.Handle);
      try
        SetBkMode(Canvas.Handle, TRANSPARENT);
        Canvas.Font.Orientation := Angle;
        Canvas.TextOut(X, Y, Text);
      finally
        RestoreDC(Canvas.Handle, LSavedDC);
      end;
    end;

begin
  if (Images <> nil) and (Index < Images.Count) then
  begin
    LImageW := Images.Width;
    LImageH := Images.Height;
    DxImage := 3;
  end
  else
  begin
    LImageW := 0;
    LImageH := 0;
    DxImage := 0;
  end;

  R := TabRect[Index];
  if R.Left < 0 then Exit;

  if TabPosition in [tpTop, tpBottom] then
  begin
    if Index = TabIndex then
      InflateRect(R, 0, 2);
  end
  else if Index = TabIndex then
    Dec(R.Left, 2) else Dec(R.Right, 2);

  Canvas.Font.Assign(TCustomTabControlClass(Control).Font);
  LayoutR := R;
  LThemedTab := ttTabDontCare;
  //Get the type of the active tab
  case TabPosition of
    tpTop:
      begin
        if Index = TabIndex then
          LThemedTab := ttTabItemSelected
        else if (Index = HotTabIndex) and MouseInControl then
          LThemedTab := ttTabItemHot
        else
          LThemedTab := ttTabItemNormal;
      end;
    tpLeft:
      begin
        if Index = TabIndex then
          LThemedTab := ttTabItemLeftEdgeSelected
        else if (Index = HotTabIndex) and MouseInControl then
          LThemedTab := ttTabItemLeftEdgeHot
        else
          LThemedTab := ttTabItemLeftEdgeNormal;
      end;
    tpBottom:
      begin
        if Index = TabIndex then
          LThemedTab := ttTabItemBothEdgeSelected
        else if (Index = HotTabIndex) and MouseInControl then
          LThemedTab := ttTabItemBothEdgeHot
        else
          LThemedTab := ttTabItemBothEdgeNormal;
      end;
    tpRight:
      begin
        if Index = TabIndex then
          LThemedTab := ttTabItemRightEdgeSelected
        else if (Index = HotTabIndex) and MouseInControl then
          LThemedTab := ttTabItemRightEdgeHot
        else
          LThemedTab := ttTabItemRightEdgeNormal;
      end;
  end;

  //draw the tab
  if StyleServices.Available then
  begin
    LDetails := StyleServices.GetElementDetails(LThemedTab);//necesary for  DrawControlText
    StyleServices.DrawElement(Canvas.Handle, LDetails, R);
  end;

  //get the index of the image (icon)
  if Control is TCustomTabControl then
    LImageIndex := TCustomTabControlClass(Control).GetImageIndex(Index)
  else
    LImageIndex := Index;

  //draw the image
  if (Images <> nil) and (LImageIndex >= 0) and (LImageIndex < Images.Count) then
  begin
    LIconRect := LayoutR;
    case TabPosition of
      tpTop, tpBottom:
        begin
          LIconRect.Left := LIconRect.Left + DxImage;
          LIconRect.Right := LIconRect.Left + LImageW;
          LayoutR.Left := LIconRect.Right;
          LIconRect.Top := LIconRect.Top + (LIconRect.Bottom - LIconRect.Top) div 2 - LImageH div 2;
          if (TabPosition = tpTop) and (Index = TabIndex) then
            OffsetRect(LIconRect, 0, -1)
          else
          if (TabPosition = tpBottom) and (Index = TabIndex) then
            OffsetRect(LIconRect, 0, 1);
        end;
      tpLeft:
        begin
          LIconRect.Bottom := LIconRect.Bottom - DxImage;
          LIconRect.Top := LIconRect.Bottom - LImageH;
          LayoutR.Bottom := LIconRect.Top;
          LIconRect.Left := LIconRect.Left + (LIconRect.Right - LIconRect.Left) div 2 - LImageW div 2;
        end;
      tpRight:
        begin
          LIconRect.Top := LIconRect.Top + DxImage;
          LIconRect.Bottom := LIconRect.Top + LImageH;
          LayoutR.Top := LIconRect.Bottom;
          LIconRect.Left := LIconRect.Left + (LIconRect.Right - LIconRect.Left) div 2 - LImageW div 2;
        end;
    end;
    if StyleServices.Available then
      StyleServices.DrawIcon(Canvas.Handle, LDetails, LIconRect, Images.Handle, LImageIndex);
  end;

  //draw the text of the tab
  if StyleServices.Available then
  begin

    //here you set the color of the font
    LTextColor:=clRed;

    if (TabPosition = tpTop) and (Index = TabIndex) then
      OffsetRect(LayoutR, 0, -1)
    else
    if (TabPosition = tpBottom) and (Index = TabIndex) then
      OffsetRect(LayoutR, 0, 1);

    if TabPosition = tpLeft then
    begin
      LTextX := LayoutR.Left + (LayoutR.Right - LayoutR.Left) div 2 - Canvas.TextHeight(Tabs[Index]) div 2;
      LTextY := LayoutR.Top + (LayoutR.Bottom - LayoutR.Top) div 2 + Canvas.TextWidth(Tabs[Index]) div 2;
      Canvas.Font.Color := LTextColor;
      AngleTextOut2(Canvas, 900, LTextX, LTextY, Tabs[Index]);
    end
    else
    if TabPosition = tpRight then
    begin
      LTextX := LayoutR.Left + (LayoutR.Right - LayoutR.Left) div 2 + Canvas.TextHeight(Tabs[Index]) div 2;
      LTextY := LayoutR.Top + (LayoutR.Bottom - LayoutR.Top) div 2 - Canvas.TextWidth(Tabs[Index]) div 2;
      Canvas.Font.Color := LTextColor;
      AngleTextOut2(Canvas, -900, LTextX, LTextY, Tabs[Index]);
    end
    else
     DrawControlText(Tabs[Index], LayoutR, DT_VCENTER or DT_CENTER or DT_SINGLELINE  or DT_NOCLIP);
  end;
end;

initialization
  TStyleManager.Engine.RegisterStyleHook(TCustomTabControl, TTabFontColorStyleHook);
  TStyleManager.Engine.RegisterStyleHook(TTabControl, TTabFontColorStyleHook);
end. 
```

这就是结果

![在此处输入图像描述](../Images/0d6364c6cb0d19ed4f6a0dd6d5514641.png)

当您需要使用 vcl 样式自定义选项卡表和页面控件组件时，还有一些资源可以帮助您。

*   [`Creating colorful tabsheets with the VCL Styles`](http://theroadtodelphi.wordpress.com/2012/04/12/creating-colorful-tabsheets-with-the-vcl-styles/)
*   [为 TTabColorControlStyleHook 添加边框](http://theroadtodelphi.wordpress.com/2012/04/14/added-border-to-ttabcolorcontrolstylehook/)
*   检查[Vcl.Styles.ColorTabs](http://code.google.com/p/vcl-styles-utils/source/browse/trunk/Common/Vcl.Styles.ColorTabs.pas)单元的代码，它是[vcl styles utils](http://code.google.com/p/vcl-styles-utils/source/browse/trunk/Common/Vcl.Styles.ColorTabs.pas)项目的一部分。
*   [如何更改主题 TabSheet 标题的文本颜色？](https://stackoverflow.com/questions/11866751/how-can-i-change-text-color-of-themed-tabsheet-caption)

# iphone - Xml 解析器属性

> ID：12759380
> 
> 赞同：0
> 
> 时间：2012-10-06T11:29:48.717
> 
> 标签：iphone, objective-c, ios, object, xml-parsing

我正在研究 XMLParser。我使用了 NSLog 并获得了以下 xml 字符串：

```
<table><tr><td><img src="http://www.24h.com.vn/upload/3-2012/images/2012-09-16/1347762760_bong-da-genoa-juve.jpg"width='80' height='80' /></td><td>(20h, 16/9) Juventus sẽ có trận đấu khó khăn tới sân của Genoa.</td></tr></table> 
```

如何在**img src**中获取链接。

我试过了：

```
else if([elementName isEqualToString:@"img"]) 
{ 
    currentString=[attributeDict objectForKey:@"src"]; 
    self.storingCharacter=YES; 
} 
```

但不成功。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T11:42:31.200

您需要实现一个 html 解析器来获取您想要的对象。我建议你使用[hpple](https://github.com/topfunky/hpple/)。

我从[解析 iPhone 上的 HTML](https://stackoverflow.com/questions/405749/parsing-html-on-the-iphone)中提取了 Albaregar 解决方案的片段，并根据您的需要对其进行了修改。我没有测试改编的片段，但它应该可以工作。

```
#import "TFHpple.h"

NSData *data = [[NSData alloc] initWithContentsOfFile:@"yourfile.html"];

// Create parser
xpathParser = [[TFHpple alloc] initWithHTMLData:data];

//Get the first img tag
NSArray *elements  = [xpathParser searchWithXPathQuery:@"//img[0]"];

// Access the first img attribute src
TFHppleElement *element = [elements objectAtIndex:0];

// Get the text within the src attribute
NSString *src_attr = [element content];  

[xpathParser release];
[data release]; 
```

# thrift - Thrift 生成的 Java 代码有没有比“Thrift: The Missing Guide”更完整的描述？

> ID：12759383
> 
> 赞同：1
> 
> 时间：2012-10-06T11:30:28.630
> 
> 标签：thrift

我正在寻找与[Protocol Buffers](https://developers.google.com/protocol-buffers/docs/reference/java-generated)类似的 Thrift Java 代码生成描述。但我能找到的最好的是[http://diwakergupta.github.com/thrift-missing-guide/#_java](http://diwakergupta.github.com/thrift-missing-guide/#_java)，它很旧（例如在添加工会之前）并且不详细。某处是否有这样的描述，或者是我查看 Thrift 测试的最佳选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T23:56:06.780

即使手头有 protobuf 文档，也很难准确地说出您在寻找什么。白皮书是（至少目前）最基本的文档，加上您已经找到的 Diwaker Gupta 的指南。

你想了解更多关于它是如何在内部工作的吗？那么，是的，此时最好的方法是使用教程，也许掌握一个调试器并遵循执行路径。

您想了解如何使生成的代码正常工作吗？同样在这里，看看教程和测试服务器/测试客户端对。

您只是好奇 Thrift 有什么可能？好吧，源路径中有许多测试用例和其他 IDL 文件，这有助于理解 IDL 的可能性。

最后同样重要的是，您可以自由地在邮件列表中提出具体问题。

# jquery - 将特定样式从一个元素复制到另一个元素

> ID：12759384
> 
> 赞同：0
> 
> 时间：2012-10-06T11:31:24.523
> 
> 标签：jquery, css, styles, copy, inline

我有这段代码可以复制一个元素的内容并将其放在另一个元素上。但我实际上想复制**内联样式**，尤其是定位。有没有办法只复制位置样式，以便`a.star`当我悬停时信息窗口会出现在确切的位置？

```
$(document).ready(function(){
  $('a.star').hover(function(){
    var instrument = '.instrument_info#' + $(this).attr('instrument');
    var htmlCode = $(instrument).html();
    $('.instrument_output .instrument_detail').html(htmlCode);
    $('.instrument_output').slideToggle();
  })
}); 
```

我想获得 this: 的内联定位`<div class="instrument_info" id="drums" style="top:95px; left:294px">`并将其放在另一个 div 中。如何在我的 jQuery 代码中插入它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T11:36:37.783

`.html()`根本不包括内联样式。你需要使用jQuery[`.css()`](http://api.jquery.com/css/)函数；

```
$(".target_elements").css({top: $("someElement").offset().top, left: $("someElement").offset().left}); 
```

并且由于`.offset()`返回一个`{top: ..., left: ...}`对象，您可以将上面的内容更紧凑地编写为：

```
$(".target_elements").css($("someElement").offset()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T11:47:49.877

您必须从一个 DOM 元素中读取这些属性并将它们分配给另一个。

```
 var foo_offset = $('#foo').offset() # returns {left: 100, top: 100}
 $('#bar').offset(foo_offset)        # #bar's offset set to #foo's 
```

Check out the [CSS documentation](http://api.jquery.com/category/css/). All of the methods are designed with a signature that provides you the actual value of the property when called and assign objects to those properties if called with an additional argument.

# python - 金字塔设置 mako.imports 不起作用

> ID：12759385
> 
> 赞同：4
> 
> 时间：2012-10-06T11:31:32.683
> 
> 标签：python, pyramid, mako

我正在尝试使用[mako.imports](http://pyramid.readthedocs.org/en/latest/narr/environment.html#mako-import)设置来避免在每个模板文件中导入模块。

最初我在每个模板的顶部都有一个模块级块，例如：

```
<%!
    import logging
%> 
```

我想用 .ini 文件中的设置替换它：

```
mako.imports = 'import logging' 
```

这不起作用，因为模板只是`NameError: name 'logging' is not defined`在我尝试使用它时抛出。

似乎 mako.imports 甚至没有被调用，因为设置如下：

```
mako.imports = 'import SpamAndEggs' 
```

不会抛出错误。

我正在使用 Pyramid 1.3 和 Mako 0.7.0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T11:45:35.253

从[pylons-discuss](https://groups.google.com/forum/?hl=en&fromgroups=#!topic/pylons-discuss/cOyeUkHRAN8)，语法是：

```
mako.imports = 
    import logging 
    import some.other.module 
```

用换行符分隔的导入语句。我认为文档应该用一个例子来说明这一点，因为 Python 人的“字符串列表”是相当不同的。

感谢迈克·梅里克。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T01:06:27.410

好的，所以看看 Pyramid 生成的 Mako 模板代码，它只是逐字输出该配置设置中的内容、引号、括号和所有内容。

所以，语法必须是：

`mako.imports = import logging`

多个进口为：

`mako.imports = import logging, some.other.module`

而**不是**这些：

```
mako.imports = 'import logging'
mako.imports = ['import logging', 'some.other.module']
mako.imports = import logging, import some.other.module 
```

最后一个抛出 a`mako.exceptions.SyntaxException`因为它不是有效的 Python，但前 2 个无声无息地失败，什么也不做，因为它们只是将文字输出为一行代码。

我没有从阅读“Python 语句的字符串列表，通常是单独的“导入”行”的[文档](http://pyramid.readthedocs.org/en/latest/narr/environment.html#mako-import)中推断出这一点（但也许我只是没有正确理解它）。

感谢 Mike Bayer在 Mako 上的[帖子。](https://groups.google.com/forum/#!topic/mako-discuss/RNUfqX12YHE)

# git - 无法继续 git rebase

> ID：12759390
> 
> 赞同：5
> 
> 时间：2012-10-06T11:32:09.510
> 
> 标签：git

这是我尝试过的。希望有人有时间来看看这个并提出一些建议。谢谢！

编辑：我相信我已经回答了我自己的问题：[https ://stackoverflow.com/a/12760672/906794](https://stackoverflow.com/a/12760672/906794)

*   克隆我的仓库

    ```
    $ git clone leoj3n/roots
    Cloning into 'roots'...
    remote: Counting objects: 3177, done.
    remote: Compressing objects: 100% (1362/1362), done.
    remote: Total 3177 (delta 2117), reused 2761 (delta 1792)
    Receiving objects: 100% (3177/3177), 1.40 MiB | 609 KiB/s, done.
    Resolving deltas: 100% (2117/2117), done.
    Checking out files: 100% (146/146), done. 
    ```

*   更改目录

    ```
    $ cd roots 
    ```

*   检查状态

    ```
    roots(parent) $ git status
    # On branch parent
    nothing to commit (working directory clean) 
    ```

*   添加上游

    ```
    roots(parent) $ git remote add upstream retlehs
    roots(parent) $ git remote
    origin
    upstream 
    ```

*   拿来

    ```
    roots(parent) $ git fetch --all
    Fetching origin
    Fetching upstream
    remote: Counting objects: 70, done.
    remote: Compressing objects: 100% (30/30), done.
    remote: Total 56 (delta 28), reused 51 (delta 23)
    Unpacking objects: 100% (56/56), done.
    From git://github.com/retlehs/roots
     * [new branch]      classic    -> upstream/classic
     * [new branch]      grunt      -> upstream/grunt
     * [new branch]      improve_sidebar_config -> upstream/improve_sidebar_config
     * [new branch]      master     -> upstream/master
     * [new branch]      vcard_refactor -> upstream/vcard_refactor
     * [new tag]         5.1.0      -> 5.1.0
     * [new tag]         5.2.0      -> 5.2.0
     * [new tag]         6.0.0      -> 6.0.0
     * [new tag]         6.1.0      -> 6.1.0 
    ```

*   重新定位`parent`到`upstream/master`

    ```
    roots(parent) $ git rebase -i upstream/master

    <<<<<< BEGIN WHAT I HAD IN vi >>>>>>
    pick 4904103 improved url cleaning for child themes
    s 986e6de added some is_child_theme() checks
    s 2860aee urls now look like /child/css/*
    s 4282ee0 Look for files in child, then in roots
    p bf9a89a Now using Theme Hook Alliance
    f 56d1211 Added THA utility script
    f 7702269 Added missing hooks
    f 14204d8 Support for multisite
    f aca4577 No more multisite rewrites
    f 8144b83 Revert some changes
    pick fbf1dec Added filter to disable sidebars
    pick 9b77e72 Added font-awesome
    f 161864d Remove test code
    <<<<<< END WHAT I HAD IN vi >>>>>> 
    ```

    然后我得到这个错误：

    ```
    error: could not apply 4904103... improved url cleaning for child themes

    When you have resolved this problem, run "git rebase --continue".
    If you prefer to skip this patch, run "git rebase --skip" instead.
    To check out the original branch and stop rebasing, run "git rebase --abort".
    Could not apply 4904103... improved url cleaning for child themes 
    ```

*   解决冲突

    ```
    roots(parent|REBASE-i) $ git mergetool
    merge tool candidates: opendiff kdiff3 tkdiff xxdiff meld tortoisemerge gvimdiff diffuse ecmerge p4merge araxis bc3 emerge vimdiff
    Merging:
    lib/config.php

    Normal merge conflict for 'lib/config.php':
      {local}: modified file
      {remote}: modified file
    Hit return to start merge resolution tool (opendiff): 
    2012-10-06 05:10:11.363 FileMerge[22088:707] Unable to load platform at path /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform
    2012-10-06 05:10:11.364 FileMerge[22088:707] Unable to load platform at path /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform 
    ```

    注意我在运行 Opendiff 时遇到了一些错误。

*   解决了冲突，所以继续

    ```
    roots(parent|REBASE-i) $ git rebase --continue
    You must edit all merge conflicts and then
    mark them as resolved using git add 
    ```

*   嗯？检查状态：

    ```
    roots(parent|REBASE-i) $ git status
    # Not currently on any branch.
    # You are currently rebasing.
    #   (all conflicts fixed: run "git rebase --continue")
    #
    # Changes to be committed:
    #   (use "git reset HEAD <file>..." to unstage)
    #
    #   modified:   lib/config.php
    #   modified:   lib/htaccess.php
    #
    # Untracked files:
    #   (use "git add <file>..." to include in what will be committed)
    #
    #   lib/config.php.orig 
    ```

*   删除合并备份文件

    ```
    roots(parent|REBASE-i) $ rm lib/config.php.orig 

    roots(parent|REBASE-i) $ git status
    # Not currently on any branch.
    # You are currently rebasing.
    #   (all conflicts fixed: run "git rebase --continue")
    #
    # Changes to be committed:
    #   (use "git reset HEAD <file>..." to unstage)
    #
    #   modified:   lib/config.php
    #   modified:   lib/htaccess.php
    # 
    ```

*   继续变基

    ```
    roots(parent|REBASE-i) $ git rebase --continue
    You must edit all merge conflicts and then
    mark them as resolved using git add 
    ```

*   嗯，尝试添加所有内容

    ```
    roots(parent|REBASE-i) $ git add -A

    roots(parent|REBASE-i) $ git rebase --continue
    You must edit all merge conflicts and then
    mark them as resolved using git add 
    ```

这是我放弃并提出这个问题的时候。

* * *

这里有更多信息：

```
roots(parent|REBASE-i) $ git diff-files --ignore-submodules
:100644 100644 f65cf1dc4573c51e54d7cf3772d06caf96726616 0000000000000000000000000000000000000000 assets/js/vendor/jquery-1.8.2.min.js 
```

我认为这可能与 mergetool opendiff 有关——请注意上面的错误。

```
roots(parent|REBASE-i) $ git config --list
user.name=xxxxxx
user.email=xxxxxx
credential.helper=osxkeychain
alias.pu=!git fetch origin -v; git fetch upstream -v; git merge upstream/master
alias.co=checkout
alias.ci=commit
alias.rb=rebase
color.ui=auto
core.excludesfile=/Users/xxxxxx/.gitignore_global
core.repositoryformatversion=0
core.filemode=true
core.bare=false
core.logallrefupdates=true
core.ignorecase=true
core.precomposeunicode=false
remote.origin.fetch=+refs/heads/*:refs/remotes/origin/*
remote.origin.url=git@github.com:leoj3n/roots.git
branch.parent.remote=origin
branch.parent.merge=refs/heads/parent
remote.upstream.url=git://github.com/retlehs/roots.git
remote.upstream.fetch=+refs/heads/*:refs/remotes/upstream/* 
```

令人惊讶的是，我能够使用 tortoisemerge 在我的 Windows 机器上重新定位。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T14:29:08.130

问题似乎是因为文件时间关闭。此 repo 位于网络驱动器上，可由 Windows 和 Mac 访问/修改...

看来，我需要做的只是更改单个配置项...

```
git config --global core.trustctime false 
```

该解决方案位于[https://stackoverflow.com/a/5255700/906794](https://stackoverflow.com/a/5255700/906794)

# c# - 带有自定义属性的 DropDownListFor 带有 - 在属性名称中？

> ID：12759396
> 
> 赞同：40
> 
> 时间：2012-10-06T11:33:16.410
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor, html.dropdownlistfor

问题：我需要像这样创建一个下拉列表：

```
<select id="ddCustomers" data-placeholder="Choose a customer" class="chzn-select" style="width:350px;" tabindex="1" multiple> 
```

现在我可以像这样添加自定义属性：

```
@Html.DropDownListFor(m => m.Id, Model.Values, new { @disabled = "disabled" }) 
```

不幸的是，如果变量名中有一个“-”，那么它就不会编译。

```
@Html.DropDownListFor(m => m.Id, Model.Values, new { @disabled = "disabled", @data-placeholder = "whatever" }) 
```

那么没有属性值的倍数呢？

如果我传递 Dictionary 或 NameValueColletion 而不是`new { @disabled = "disabled" }`，那么它会输出 NameValueColletion/Dictionary 的属性...

如何在属性键中传递带有特殊字符的属性？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-10-06T11:50:39.103

改用下划线

```
@data_placeholder = "whatever" 
```

由于 Mvc3 的“_”在渲染时被替换为“-”。这也适用于 Mvc5。

这很好用，因为下划线在 html 中的属性名称中是不可接受的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T07:20:54.920

啊，这很容易。
错误是声明字典`<string, string>` 而不是字典`<string, object>`（并在 cOption 中使用变量而不是属性）...

使用它的字典`<string, string>`使用对象“paramlist”重载，而不是 `IDictionary<string, object>`;)

```
@Html.DropDownListFor(model => model.Title, new SelectList(Model.ls, "value", "text"), Model.nvc)

 <!--
 @Html.DropDownList("myIdAndName", new SelectList(Model.ls, "value", "text"), Model.nvc)
 -->

    public ActionResult Index()
    {
        cHomeModel HomeModel = new cHomeModel();

        HomeModel.nvc.Add("class", "chzn-select");
        HomeModel.nvc.Add("data-placeholder", "Choose a customer");
        HomeModel.nvc.Add("style", "width:350px;");
        HomeModel.nvc.Add("tabindex", "1");
        HomeModel.nvc.Add("multiple", "multiple");
        HomeModel.nvc.Add("id", "lol");

        cOption option = null;

        for (int i = 0; i < 10; ++i)
        {
            option = new cOption();

            option.value = i.ToString();
            option.text = "text" + i.ToString();

            HomeModel.ls.Add(option);
        }

        return View(HomeModel);
    }

    public class cOption
    {
        public string value
        {
            get;
            set;
        }

        public string text
        {
            get;
            set;
        }

    }

    public class cHomeModel
    {
        public string Title = "MyDropDownListName";
        public List<cOption> ls = new List<cOption>();

        public System.Collections.Generic.Dictionary<string, object> nvc = new System.Collections.Generic.Dictionary<string, object>();

    } 
```

或更多Linqiq：

```
public ActionResult Index()
{
    cHomeModel HomeModel = new cHomeModel();

    HomeModel.nvc.Add("class", "chzn-select");
    HomeModel.nvc.Add("data-placeholder", "Choose a customer");
    HomeModel.nvc.Add("style", "width:350px;");
    HomeModel.nvc.Add("tabindex", "1");
    HomeModel.nvc.Add("multiple", "multiple");
    HomeModel.nvc.Add("id", "lol");

    HomeModel.ls = System.Linq.Enumerable.Range(0, 9)
            .Select(x => new cOption() { text = x.ToString(), value = x.ToString() })
            .ToList();

    // or otherwise: 
    HomeModel.ls = (
                 from i in System.Linq.Enumerable.Range(0, 9)
                 select new cOption() { text = i.ToString(), value = i.ToString() }
    ).ToList();

    return View(HomeModel);
} 
```

# javascript - Jquery / Canvas / .animate / 页面需要重新加载 / Internet Explorer

> ID：12759398
> 
> 赞同：1
> 
> 时间：2012-10-06T11:33:25.443
> 
> 标签：javascript, jquery, internet-explorer, html5-canvas

我有一个奇怪的问题，最近几天一直困扰着我，我会尽力解释它，并尝试提供尽可能多的细节来解决这个问题，在此先感谢。

**问题：**

请访问：[http](http://tinyurl.com/8td2n3n) ://tinyurl.com/8td2n3n并四处浏览，您会在页面的左侧看到一个带有挥舞旗帜/标签的块。

挥动的标志/标签是一个 Jquery .animate 画布在浏览网站时无法在 Internet Explorer 中正确显示，但在 Firefox、chrome 和 safari 中正确显示，但是在刷新同一页面时它将正确显示....？ ！？使困惑。

**目前发现：**

*   在 Internet Explorer 中重新加载同一页面时，它确实有效
*   运行 IE 脚本调试 (F12) 时出现错误：

行：87 错误：无法设置属性“宽度”的值：对象为空或未定义

第 87 行 = flag.width = h.width;

下面我发布了 javascript 块：

```
<script type="text/javascript">
var h = new Image;
h.onload = function(){
    var flag = document.getElementById('flag');
    var amp = 10;
    flag.width  = h.width;
    flag.height = h.height + amp*2;
    flag.getContext('2d').drawImage(h,0,amp,h.width,h.height);
    flag.style.marginLeft = -(flag.width/2)+'px';
    flag.style.marginTop  = -(flag.height/2)+'px';
    var timer = waveFlag( flag, h.width/10, amp );
};
h.src = 'img/wijnwijs-logo.png';

function waveFlag( canvas, wavelength, amplitude, period, shading, squeeze ){
    if (!squeeze)    squeeze    = 0;
    if (!shading)    shading    = 150;
    if (!period)     period     = 300;
    if (!amplitude)  amplitude  = 10;
    if (!wavelength) wavelength = canvas.width/10;

    var fps = 60;
    var ctx = canvas.getContext('2d');
    var   w = canvas.width, h = canvas.height;
    var  od = ctx.getImageData(0,0,w,h).data;
    // var ct = 0, st=new Date;
    return setInterval(function(){
        var id = ctx.getImageData(0,0,w,h);
        var  d = id.data;
        var now = (new Date)/period;
        for (var y=0;y<h;++y){
            var lastO=0,shade=0;
            var sq = (y-h/2)*squeeze;
            for (var x=0;x<w;++x){
                var px  = (y*w + x)*4;
                var pct = x/w;
                var o   = Math.sin(x/wavelength-now)*amplitude*pct;
                var y2  = y + (o+sq*pct)<<0;
                var opx = (y2*w + x)*4;
                shade = (o-lastO)*shading;
                d[px  ] = od[opx  ]+shade;
                d[px+1] = od[opx+1]+shade;
                d[px+2] = od[opx+2]+shade;
                d[px+3] = od[opx+3];
                lastO = o;
            }
        }
        ctx.putImageData(id,0,0);       
        // if ((++ct)%100 == 0) console.log( 1000 * ct / (new Date - st));
    },1000/fps);
}
</script> 
```

CSS是：

```
<style>
    #flag { position:relative; z-index:0;top:-25px;left:100px;}
</style> 
```

实际的 html 元素是：

```
<canvas id="flag"></canvas> 
```

我不知道该怎么做才能使这个工作，任何人有任何想法请拍摄，愿意尝试很多。

新的！！针对 CSS 调试进行了修改：新！

```
CSS:
-----------------------------------
#wijnwijs_block_left {}
#wijnwijs_block_left h4 {background:#4a1a32;}
#wijnwijs_block_left .block_content {line-height:145%;min-height:200px;padding:0 0 0 0;background:url(../img/categories_dark.png) 0 0 repeat-y;}
#wijnwijs_block_left .block_content a {font:normal 12px "Trebuchet MS";color:#c7d0d0;text-decoration:none;}
#wijnwijs_block_left .block_content a:hover {text-decoration:underline;}
#wijnwijs_block_left select {width:143px;height:26px;margin:7px 0 0 0;padding:3px;background:#fff;border:1px solid #fff;font:normal 12px "Trebuchet MS";color:#3b570e;}
-----------------------------------
div.column div.block {}
div.column div.block h4 {height:33px;padding:16px 0 0 28px;background:#4a1a32;font:normal 16px "Trebuchet MS";color:#fff;text-transform:uppercase;}
div.column div.block h4 a {font:normal 16px "Trebuchet MS";color:#fff;text-decoration:none;}
div.column div.block h4 a:hover {text-decoration:underline;}
div.column div.block .block_content {padding:0 28px 28px 28px;background:#4a1a32;}
div.column div.block ul.bullet {padding-top:21px;}
-----------------------------------
#wijnwijs_block_left {}
#wijnwijs_block_left h4 {background:#4a1a32;}
#wijnwijs_block_left .block_content {line-height:145%;min-height:200px;padding:0 0 0 0;background:url(../img/categories_dark.png) 0 0 repeat-y;}
#wijnwijs_block_left .block_content a {font:normal 12px "Trebuchet MS";color:#c7d0d0;text-decoration:none;}
#wijnwijs_block_left .block_content a:hover {text-decoration:underline;}
#wijnwijs_block_left select {width:143px;height:26px;margin:7px 0 0 0;padding:3px;background:#fff;border:1px solid #fff;font:normal 12px "Trebuchet MS";color:#3b570e;}
-----------------------------------
$(document).ready(function() {
    $('.wijnwijs1').cycle({
    fx: 'fade' // choose your transition type, ex: fade, scrollUp, shuffle, etc...
});
-----------------------------------
#flag { position:relative; top:25px;left:100px;}
.wijnwijs1 {
    width: 200px;
    height: 200px;
}
-----------------------------------
<div id="wijnwijs_block_left" class="block">
    <h4>&nbsp;</h4>
    <div class="block_content">
        <div style="position:relative;z-index:9999999;top:-30px;"><a href="wijnwijs.asp"><canvas id="flag"></canvas></a></div>
        <div class="wijnwijs1" style="position:relative;z-index:1;top:-67px;height:100px;">
            <a href="wijnwijs.asp"><img src="modules/wijnwijs/images/309155034_cigale classique.jpg" width="200px" height="200px"/></a>
            <a href="wijnwijs.asp"><img src="modules/wijnwijs/images/247715607_jose_galo_rueda.jpg" width="200px" height="200px"/></a>
            <a href="wijnwijs.asp"><img src="modules/wijnwijs/images/309155202_rocca_ernesto.jpg" width="200px" height="200px"/></a>
            <a href="wijnwijs.asp"><img src="modules/wijnwijs/images/309155137_corterosso.jpg" width="200px" height="200px"/></a>
            <a href="wijnwijs.asp"><img src="modules/wijnwijs/images/309155137_salvaterra_amarone.jpg" width="200px" height="200px"/></a>
            <a href="wijnwijs.asp"><img src="modules/wijnwijs/images/309155137_patriarche.jpg" width="200px" height="200px"/></a>
            <a href="wijnwijs.asp"><img src="modules/wijnwijs/images/309155137_st_salvaterra.jpg" width="200px" height="200px"/></a>
            <a href="wijnwijs.asp"><img src="modules/wijnwijs/images/309155202_xr_winemakers_premium.jpg" width="200px" height="200px"/></a>
            <a href="wijnwijs.asp"><img src="modules/wijnwijs/images/309156171_grigio_pg.jpg" width="200px" height="200px"/></a>
            <a href="wijnwijs.asp"><img src="modules/wijnwijs/images/309155459_rocca_grande_passolo.jpg" width="200px" height="200px"/></a>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T11:44:05.887

您收到此错误是因为您的图像是在带有 id 标志的画布之前加载的。刷新后它不会引发此错误，因为画布元素是在加载图像之前从缓存中加载的，因为您的图像始终设置为由您的 javascript 动态加载。将您在第三个脚本标记内的代码包装起来`$(document).ready()`，您应该不会再收到此异常。

**更新：** 这是图像向上移动的事情。最初加载页面时，携带画布的 div 具有不同的尺寸，直到在动画功能中修改画布。这就是图片跳起来的原因

```
<div style="position:relative;z-index:9999999;top:-30px;"><a href="wijnwijs.asp"><canvas id="flag"></canvas></a></div> 
```

一旦它被装载，它下面的容器就会就位。更具体地说，问题在于`margin-top: -63px`画布，因为这与 div 容器的定位不同。 ![在此处输入图像描述](../Images/bd80c8a8a0db7dffd5732259167cac18.png)

# context-free-grammar - 从给定语言构建上下文无关语法

> ID：12759403
> 
> 赞同：1
> 
> 时间：2012-10-06T11:34:18.487
> 
> 标签：context-free-grammar, automata

我需要帮助为给定语言构建 CFG。

`L = { x ∈ {a, b}* | x != x reversed }`，换句话说，`L`是 中所有回文的补集`L`。

我对如何解决这类问题而不是具体的解决方案更感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:55:33.917

好吧，我还没有想出解决此类问题的常见模式，但我想我知道如何解决这个问题：

`G(L)`首先考虑回文语言的 CFG `L`（让我们考虑二进制字母）：

```
S -> ""
S -> "0" S "0"
S -> "1" S "1"
S -> "1" // odd length case
S -> "0" // odd length case 
```

构造的想法`G(L)`是确保最后一个符号等于 S 中的第一个符号，因此，对于每个位置，对于由该语法产生的单词，从开头的第 th 个符号等于从结尾`i`的`i`第th 个符号。`i`

对于不是回文的单词`w`，我们希望确保存在这样一个位置`i`，即`i`开头的第 th 个符号*不*等于`i`结尾的第 th 个符号。所以，我们只有在产生的开头和结尾放置了不同的字母后才终止单词产生：

```
S -> "0" S "0"
S -> "1" S "1"
S -> "0" T "1"
S -> "1" T "0"
T -> ""
T -> "0" T "0"
T -> "1" T "1"
T -> "0" T "1" // we are allowed to put different symbols more than once
T -> "1" T "0" // we are allowed to put different symbols more than once
T -> "0"
T -> "1" 
```

你可以给出`S`状态«we have not put different letters yet»`T`的含义，以及«we have put different letters»的含义。注意我已经删除`S -> ""`了这个 CFG 中的规则，所以我们将只完成 from `T`，所以我们肯定会在生成单词时放置不同的字母。

# prolog - 使用 prolog 评估可能的情况

> ID：12759405
> 
> 赞同：1
> 
> 时间：2012-10-06T11:34:22.680
> 
> 标签：prolog

我正在尝试查看以下事实的可能情况。

```
don likes cain
bob does not like don
cain does not like aron
nobody likes someone who does not like him
aron likes everyone who likes bob
don likes everyone bob likes
everybody likes somebody 
```

我刚刚开始学习 prolog，我正在尝试在 prolog 中实现这一点，看看会出现多少种可能的情况。我在这里浏览了几个 prolog 线程，我也在使用“ [Learn prolog now](http://www.learnprolognow.org/) ”一书。所以这是我想出代码的最佳尝试。

```
likes(don, cain).
likes(aron,W):- likes(W,bob).
likes(don,M):- likes(bob,M).

(likes(aron,aron);likes(aron,bob));(likes(aron,cain);likes(aron,don)).

(likes(bob,aron);likes(bob,bob));(likes(bob,cain);likes(bob,don)).

(likes(cain,aron);likes(cain,bob));(likes(cain,cain);likes(cain,don)).

(likes(don,aron);likes(don,bob));(likes(don,cain);likes(don,don)).

not(likes(bob,don)).
not(likes(cain,aron)).

not(likes(Y,X)) :- not(likes(X,Y)). 
```

当我在 Ubuntu Linux 的 swipl 编译器中运行它时（在 winxp 的 VirtualBox 中），我得到以下错误

```
?- [test].
ERROR: /home/test.pl:11:
    '$record_clause'/2: No permission to modify static_procedure `(;)/2'
ERROR: /home/test.pl:13:
    '$record_clause'/2: No permission to modify static_procedure `(;)/2'
ERROR: /home/test.pl:15:
    '$record_clause'/2: No permission to modify static_procedure `(;)/2'
ERROR: /home/test.pl:17:
    '$record_clause'/2: No permission to modify static_procedure `(;)/2'
% test compiled 0.00 sec, 1,616 bytes
true. 
```

那么你能帮我解决这个问题吗......我在`not`这里用作谓词，网上的一些线程似乎提到了它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T12:36:51.753

在 Prolog 中，我们对什么是真的有一个相当自然的表示，但是当面对负面信息（比如否定）时，我们必须使我们的直觉适应 Prolog 提供的受限计算模型。

特别是，Prolog 语义基于[封闭世界假设](http://en.wikipedia.org/wiki/Closed_world_assumption)，我们可能会倾向于忽略不相关的命题 like `bob does not like don`，因为这只是说明没有肯定子句“bob likes don”。这种缺席确实在 Prolog 证明搜索中被“吸收”，并由`not`（Prolog 中唯一可用的，但操作符不太让人联想到“人类”解释，即`\+`意味着`not`）的“程序”定义形式化：

```
\+ X :- call(X), !, fail.
\+ X. 
```

有关更多说明，请参阅[此页面。](http://www.csupomona.edu/~jrfisher/www/prolog_tutorial/2_5.html)

所有这些介绍性的说我会引入一个 not_like/2 来明确表示“负面”知识。从语法上我们得到：

```
likes(don, cain).
not_likes(bob, don).
not_likes(cain, aron).
not_likes(X, Y) :- \+ likes(Y, X).
likes(aron, X) :- likes(X, bob).
likes(don, X) :- likes(bob, X).
likes(_, _). 
```

现在这些说法有意义吗？Prolog 从逻辑编程的实用方法的角度出发，并`run`针对此类进行查询，这对于*某些*编程任务`knowledge`非常有意义......

 ***评论建议的编辑**，我认为应该是`likes(_,_).`更好的代码而不是`everybody likes somebody`

```
likes(X, Y) :- \+ not_likes(X, Y). 
```

最后一个事实证明了这一点，但独立它不允许推断`not_likes(cain, aron).`*

# sql - 在 CREATE TABLE AS 语句中指定数据类型

> ID：12759407
> 
> 赞同：0
> 
> 时间：2012-10-06T11:34:36.877
> 
> 标签：sql, postgresql, syntax, type-conversion

我正在`dummy2`使用另一个表中的值创建一个表`dummy`。这是我的语法：

```
CREATE TABLE dummy2 AS SELECT
t1.zid AS orig_id,
t2.zid AS dest_id,
ABS(RANDOM()*(45-2)-45) AS dist
FROM dummy t1, dummy t2; 
```

`zid`中的属性`dummy`存储为`DOUBLE PRECISION`。但是，在新表中，我想将其数据类型更改为`INTEGER`. 我怎样才能做到这一点？我最初的想法是这样的（非常类似于我们在使用模式创建表时声明数据类型的方式：

```
CREATE TABLE dummy2 AS SELECT
t1.zid AS orig_id INTEGER,
t2.zid AS dest_id INTEGER,
ABS(RANDOM()*(45-2)-45) AS dist
FROM dummy t1, dummy t2; 
```

但它无法执行。谁能帮我解决这个问题？感谢帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T11:40:32.807

```
CREATE TABLE dummy2 AS SELECT
cast(t1.zid as integer) AS orig_id,
cast(t2.zid as integer) AS dest_id,
ABS(RANDOM()*(45-2)-45) AS dist
FROM dummy t1, dummy t2; 
```

# response - 如何找到 rhohub 使用的是哪个版本的 ruby ？

> ID：12759409
> 
> 赞同：0
> 
> 时间：2012-10-06T11:35:08.093
> 
> 标签：response, rack, rhodes

我在我的*rhohub*帐户中托管了一个*rhoconnect应用程序。*我的*rhomobile*应用程序需要*rhoconnect 3.2*和*ruby​​ 1.9*。如何找到*rhohub*使用的是哪个版本的*ruby* ​​？

 ***我试图通过在我的`config.ru`文件中添加以下行来改善响应时间。

```
# adjust the EventMachine Thread Pool size
require 'eventmachine'
EventMachine.threadpool_size = 25

# Rhoconnect server flags
Rhoconnect::Server.set     :use_async_model, true
# adjust the Rack FiberPool size
Rhoconnect::Server.set     :fiberpool_size, 150 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T09:28:40.413

命令提示符和使用 `ruby -v`将为您提供当前安装的 Ruby 版本。

问候，阿米特 C.***

# php - 使用 PHP 和 ODBC 从 Filemaker 的 BLOB（容器）字段读取 JPEG 文件，限制为 255 个字符

> ID：12759411
> 
> 赞同：0
> 
> 时间：2012-10-06T11:35:30.763
> 
> 标签：php, odbc, filemaker

我正在编写一个 windows php 5.3.5 内部网网站来连接 filemaker pro 11 数据库服务器。我使用 11.3.81.0 filemaker odbc 驱动程序版本。我想检索以 JPEG 格式存储的图像文件。按照文件制作者文档，我执行以下请求： **SELECT GetAs("PhotoA", 'JPEG') AS PhotoA FROM MyTable** 但我只得到一个限制为 255 个字符的字符串。如何超过这个限制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T14:16:00.297

您需要使用 GETAS 来返回容器字段的内容

从 Sales_Data 中选择 Company_Brochures 从 Sales_Data 中选择 GETAS(Company_Logo, 'JPEG')。

其中“JPEG”是图像文件的格式。

[这篇文章](https://stackoverflow.com/questions/1724415/filemaker-getas-how-to-display-container-field-on-webpage)中列出了许多可以使用的可能格式

我相信 FileMaker 始终会存储图像的 JPEG 版本以及您放入其中的任何其他格式。因此，您始终可以使用 JPEG 将其取出。

# sql-server-2008 - 从sql server 2008中的另一个字符串中提取字符串

> ID：12759412
> 
> 赞同：1
> 
> 时间：2012-10-06T11:35:37.797
> 
> 标签：sql-server-2008, substring

我有一个表格，我在其中保存表单 html，其中也包括这样的图像

```
<img src="../UploadedFiles/2143_logo.png" >
<img src="../UploadedFiles/2343_New_logo.jpeg" >
<img src="../UploadedFiles/2786_old_logo.bmp" > 
```

我想像这样为每条记录提取图像名称

```
2143_logo.png

2343_New_logo.jpeg

2786_old_logo.bmp 
```

我不知道如何完成请帮帮我

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T12:37:46.777

这是一种非常丑陋的方法：

```
select 
  replace(replace(reverse(left(reverse(yourColumn), charindex('/', reverse(yourColumn)) -1)), '>', ''), '"', '')
from yourtable 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/4fa05/12)

# android - AutoCompleteTextView dropDownSelector

> ID：12759419
> 
> 赞同：1
> 
> 时间：2012-10-06T11:37:06.720
> 
> 标签：android, autocomplete

我有一个 AutoCompleteTextView 组件，我想将其默认下拉选择器更改为另一种颜色。首先我尝试了: `android:dropDownSelector="#FF400000"`，但它根本没有出现选择器！接下来，我将颜色放入可绘制资源中：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <solid android:color="@android:color/holo_blue_dark"/>
</shape> 
```

并链接它：`android:dropDownSelector="@drawable/drop_down_selector"`，但效果相同（没有选择器）。接下来我发现有人打开了一个类似的问题，只是为了微调：[http](http://code.google.com/p/android/issues/detail?id=24922) ://code.google.com/p/android/issues/detail?id=24922 ，所以我尝试定义一种样式，如解决方案中所述：

```
<style name="AutoCompleteDropDown" parent="@android:style/Theme.Holo.Light">
    <item name="android:dropDownListViewStyle">@style/AutoCompleteSelector</item>
</style>
<style name="AutoCompleteSelector" parent="@android:style/Widget.Holo.Light.ListView">
    <item name="android:listSelector">#FF400000</item>
</style> 
```

并链接它：`style="@style/AutoCompleteDropDown"`，但它什么也没做（但是，自从我删除了该`dropDownSelector`属性后，默认选择器又回来了）。

那么我在这里错过了什么？我究竟做错了什么？

**更新：**好的，正如建议的那样，我也尝试了一个选择器：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
   <item android:state_selected="true" android:state_pressed="true" 
       android:state_focused="true" android:state_activated="true"
       android:drawable="@android:color/holo_green_light"/>
</selector> 
```

但它没有用，我仍然没有选择器（至少我看不到）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T07:01:33.827

主题和风格因意图而异。并使用不同的属性。主题为不同的小部件定义样式。样式定义小部件本身。主题应用于应用程序或活动。

1）如果您希望它仅用于一个小部件。

您需要转到/platforms//res/values/values.xml，了解如何为您的小部件定义样式（AutoCompleteTextView）。拿起所需的属性。定义与系统中相同的选择器，但需要进行修改。你甚至可以在 /res/drawable 中找到选择器

2）如果你想在整个应用程序中做到这一点：

a) 你需要去 /platforms//res/values/themes.xml

b）在那里您可以找到您为 AutoCompleteTextViewb 选择的主题中的样式

```
 <item name="autoCompleteTextViewStyle">
             @android:style/Widget.AutoCompleteTextView
        </item> 
```

c) 然后到 res/values/styles.xml

d) 在那里您可以找到小部件的样式。

e) 然后你需要扩展主题。并通过新创建的样式（如 1 选项）覆盖 autoCompleteTextViewStyle 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-04T09:46:56.287

尝试从适配器生成的视图中删除背景。这对我有帮助。

# sql - sql查询中的where子句也删除空值

> ID：12759427
> 
> 赞同：0
> 
> 时间：2012-10-06T11:39:02.087
> 
> 标签：sql, where-clause

我有这些表：

“用户”

```
id  email                name                 last_access
1   luca@gmail.com       Luca Pluto           2012-10-05 17:21:22.0
2   pippo@gmail.com      Irene Pippo          2012-10-05 17:22:25.0 
```

'Nets_permissions'

```
user_id         network_id  perm
1               1234        3
1               1235        1
2               1235        3 
```

我写了这个查询：

```
SELECT u.id, u.name, n.perm
FROM users as u LEFT OUTER JOIN nets_permissions as n
ON u.id = n.user_id
WHERE n.network_id=1234 AND n.perm <> 3 
```

因为我想要已经拥有 network_id (1234) 权限的用户，但也需要没有 network_id 权限的用户。换句话说，我会有这个结果查询：

```
2    null    null 
```

因为对于网络 1234，id=1 的用户 Luca Pluto 具有 perm=3，所以我想排除在外。相反，id=2 的用户 Irene Pippo 在 1234 网络上没有任何权限。所以它的行必须有 net_id 和 perm 设置为空。

我的查询结果为空。我不知道为什么。如果没有子句 n.perm <> 3 似乎工作得很好，但在空值之后也被遗漏了，不仅是 perm=3 的 rws。

我也尝试过这种方式：

```
SELECT u.id, u.name, n.perm FROM users as u LEFT OUTER JOIN 
(select * from nets_permissions WHERE network_id=1234) as n on u.id = n.user_id 
WHERE n.perm <> 3 
```

but it doesn't work. without the WHERE clause all works. After no. The result query is empty.

How I can resolve this problem? I need that the perm column is a value or null, I can't remove this column.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T18:04:59.363

The right solution is:

```
SELECT u.id, u.name, n.perm FROM users as u LEFT OUTER JOIN 
(select * from nets_permissions WHERE network_id=1234) as n on u.id = n.user_id 
WHERE (n.perm <> 3 or n.perm is NULL) 
```

Here [Working with NULL Values](http://dev.mysql.com/doc/refman/5.0/en/working-with-null.html) there is a expanation of the treatment of NULL values in MySQL

Thank you all for your help!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T11:43:01.067

Many SQL dialect use a special trinary logic with `NULL` the third possible value additional to `true` and `false`.

Anything compared to `NULL` results to `NULL` which in turn is handled as `false`.

So `x = null` will result in `false` for all `x`, just as `x != null`

If you want to include `NULL` values in the result you have to add special handling for that (Oracle syntax):

```
SELECT u.id, u.name, n.perm
FROM users as u LEFT OUTER JOIN nets_permissions as n
ON u.id = n.user_id
WHERE n.network_id=1234 
AND (n.perm <> 3 or n.perm is not null) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T11:52:34.760

```
SELECT u.id, u.name, n.perm
FROM 
    users as u 
    LEFT OUTER JOIN 
    nets_permissions as n ON u.id = n.user_id 
WHERE 
    n.network_id = 1234 and n.perm <> 3
    or
    n.network_id <> 1234
    or
    n.network_id is null 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-06T16:06:30.227

I like users that user the "JOIN" syntax. It has additional benefit, aside from making the code easier to read, that people don't realize.

```
SELECT u.id, u.name, n.perm
FROM users as u LEFT OUTER JOIN nets_permissions as n
ON u.id = n.user_id
AND n.network_id=1234 
WHERE COALESCE(n.perm,-1) <> 3 
```

# google-analytics - Google 网站的 Google Analytics（分析）跟踪代码错误

> ID：12759428
> 
> 赞同：0
> 
> 时间：2012-10-06T11:39:21.893
> 
> 标签：google-analytics, google-sites

当我在我的谷歌网站上运行跟踪代码时，它给出了以下错误：

> 第 8 行出错

我应该忽略它吗？或者这真的是一个错误？在这种情况下我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:14:54.887

如果您使用的是 Google 协作平台，您首先需要[启用分析](http://support.google.com/sites/bin/topic.py?hl=en&topic=1046096) ，然后`UA-xxxxx-xx`在 sites.google.com/site/ ***（您的站点名称）*** /system/app/pages的统计信息下的常规设置中添加您的分析网络媒体资源 ID ( ) /admin/settings 或 Google Apps 中的 sites.google.com/a/ ***（您的域名）*** /system/app/pages/admin/settings

# binding - 在 knockout.js 中绑定两个 observable

> ID：12759429
> 
> 赞同：5
> 
> 时间：2012-10-06T11:39:26.903
> 
> 标签：binding, knockout.js, observable, subscribe

我有两个简单的可观察对象，例如，

```
val1 = ko.observable("input1");
val2 = ko.observable("input2"); 
```

我希望他们表现得像一个人，所以当其中一个发生变化时，另一个也会发生变化。

我知道在一般情况下最好只使用一个 observable 并将其绑定到几个 dom 元素。但就我而言，这些可观察对象存在于不同的模板和对象中，因此它们不能是一个变量。

目前我订阅一个可观察到另一个，反之亦然：

```
val1.subscribe(function(v) {
    val2(v);
});
val2.subscribe(function(v) {
    val1(v);
}); 
```

但是，当您更改一个 observable 的值时，它会更新第二个，但这会导致连锁反应并再次无限更新第一个。

如何在两个单独的 observable 之间设置双向绑定，当您修改另一个时设置一个的值而不导致无限循环？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T10:50:47.410

你可以这样做：

```
vm1 = {
    val1: ko.observable('input1'),
    otherProperty: ko.observable('more')
}

vm2 = {
    val2: vm.val1,
    otherProperty: ko.observable('data')
} 
```

两者都`vm1.val1`解析`vm2.val2`为相同的可观察对象，因此具有相同的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T19:57:49.497

Sethi 的答案会起作用，但这可能会更好地与[计算的 observables一起使用](http://knockoutjs.com/documentation/computedObservables.html)

示例：http: [//jsbin.com/exipuq/1/edit](http://jsbin.com/exipuq/1/edit)

```
var viewModelA = function(){
  this.myVal = ko.observable();
};

var viewModelB = function(otherViewModel){
  this.compVal = ko.computed(function(){
    return otherViewModel.myVal(); 
  });
};

// create a new viewmodel like normal
var vma = new viewModelA();

// pass the instantiated view model 
// into the new one you're creating    
var vmb = new viewModelB(vma); 
```

# scala - 玩：绑定一个表单域到一个double？

> ID：12759430
> 
> 赞同：10
> 
> 时间：2012-10-06T11:39:42.840
> 
> 标签：scala, playframework-2.0

也许我只是忽略了一些明显的东西，但我不知道如何将表单字段绑定到 Play 控制器中的双精度。

例如，假设这是我的模型：

```
case class SavingsGoal(
timeframeInMonths: Option[Int],
amount: Double,
name: String
) 
```

（忽略我用双倍的钱，我知道这是个坏主意，这只是一个简化的例子）

我想像这样绑定它：

```
object SavingsGoals extends Controller {

    val savingsForm: Form[SavingsGoal] = Form(

        mapping(
            "timeframeInMonths" -> optional(number.verifying(min(0))),
            "amount" -> of[Double],
            "name" -> nonEmptyText
        )(SavingsGoal.apply)(SavingsGoal.unapply)

    )

} 
```

我意识到这个`number`助手只适用于整数，但我认为使用`of[]`可能允许我绑定一个双精度数。但是，我得到一个编译器错误：

```
Cannot find Formatter type class for Double. Perhaps you will need to import
play.api.data.format.Formats._ 
```

这样做无济于事，因为 API 中没有定义双重格式化程序。

这只是询问在 Play 中将表单字段绑定到双精度的规范方式是什么？

谢谢！

编辑：4e6 为我指明了正确的方向。这是我在他的帮助下所做的：

使用他链接中的片段，我将以下内容添加到 app.controllers.Global.scala：

```
object Global {

    /**
     * Default formatter for the `Double` type.
     */
    implicit def doubleFormat: Formatter[Double] = new Formatter[Double] {

      override val format = Some("format.real", Nil)

      def bind(key: String, data: Map[String, String]) =
        parsing(_.toDouble, "error.real", Nil)(key, data)

      def unbind(key: String, value: Double) = Map(key -> value.toString)
    }

    /**
     * Helper for formatters binders
     * @param parse Function parsing a String value into a T value, throwing an exception in case of failure
     * @param error Error to set in case of parsing failure
     * @param key Key name of the field to parse
     * @param data Field data
     */
    private def parsing[T](parse: String => T, errMsg: String, errArgs: Seq[Any])(key: String, data: Map[String, String]): Either[Seq[FormError], T] = {
      stringFormat.bind(key, data).right.flatMap { s =>
        util.control.Exception.allCatch[T]
          .either(parse(s))
          .left.map(e => Seq(FormError(key, errMsg, errArgs)))
      }
    }

} 
```

然后，在我的表单映射中：

```
mapping(
    "amount" -> of(Global.doubleFormat)
) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-03-25T09:53:00.073

如果您有 2.1 版本，则不需要使用全局格式。

只需导入：

```
import play.api.data.format.Formats._ 
```

并用作：

```
mapping(
    "amount" -> of(doubleFormat)
) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-06T13:39:53.203

实际上，主分支上[有](https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/scala/play/api/data/format/Format.scala#L117)预定义的格式化程序。`Double`因此，您应该切换到`2.1-SNAPSHOT`播放版本或只是复制实现。

# python - Windows 7 64bit 上的 Python 子进程 - 当 stdout=PIPE 时没有输出

> ID：12759431
> 
> 赞同：5
> 
> 时间：2012-10-06T11:39:46.917
> 
> 标签：python, windows, subprocess, popen

为另一个关于 Python 子进程的问题道歉，但我找不到这个问题的答案。

我遇到了一些在 Windows 7 64 位上调用子进程的 Python 代码的问题。当子进程的标准输出被发送到管道时，不会产生任何输出。子进程似乎可以毫无问题地运行和终止，它只是不产生任何输出。

编辑：相同的代码在 WinXP 32bit 上正常工作，所以我更新了问题标题。

```
# (listing 1)
from subprocess import *
#cmdline= (a valid command line)
proc = Popen(cmdline,shell=True,stdout=PIPE,stderr=PIPE)
out, err = proc.communicate()
print( out )
print( err ) 
```

这给出了输出

```
out:

err: 
```

但是，当子进程的输出未通过管道传输时，它会按预期生成输出：

```
# (listing 2)
proc = Popen(cmdline,shell=True)
proc.communicate() 
```

这为控制台提供了预期的输出。

我确信可执行文件实际上正在将其输出写入标准输出。我有 C 源代码，并添加了以下行：

```
fprintf(stdout, "HELLO"); 
```

同样，在运行清单 2 时会看到“HELLO”，但不会在清单 1 中看到。

我还尝试制作一个新的 C++ 可执行文件并从 cmdline 调用它：

```
#include <iostream>

int main()
{
    std::cout << "HELLO" << std::endl;
} 
```

同样的事情仍然发生 - 运行清单 2 时看到“HELLO”，但没有清单 1。

如果我将 cmdline 设置为“dir”，清单 1 和清单 2 都会发生预期的事情 - 目录内容将打印到控制台。

我尝试过的其他东西：Python 3.3 和 Python 2.7（结果相同）；bufsize=0（结果相同）；检查 proc.returncode（它是 0，正如预期的那样）；删除 stderr=PIPE （在这种情况下，清单 1 给出了预期的“err: None”）。

编辑-我还尝试了 = proc.stdout 而不是具有相同结果的communicate() 方法。Python 文档和其他问题表明，communicate() 方法是正确的使用方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T13:33:36.213

这根本不是 Python 问题。我的防火墙设置已将可执行文件“沙盒化”，这导致它们的输出被丢弃而没有任何警告或错误。

阻止它们执行会更有意义。我想我需要使用不同的防火墙软件。

# android - 抱歉，视频无法播放

> ID：12759432
> 
> 赞同：1
> 
> 时间：2012-10-06T11:40:07.347
> 
> 标签：android, video, mp4

我的本地服务器中有一个视频文件。我正在用视频文件的 URL 提供我的 android 代码。我在 Htdocs 文件夹的视频文件夹中有视频文件。我在stackoverflow上查找了相同的问题，但找不到解决方案。请帮忙。这是代码..

```
public class WatchActivity extends Activity {

String SrcPath = "http://localhost/video/Coldplay - In My Place.mp4";

   /** Called when the activity is first created. */
   @Override
   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.main);
       VideoView myVideoView = (VideoView)findViewById(R.id.myvideoview);
       myVideoView.setVideoURI(Uri.parse(SrcPath));
       myVideoView.setMediaController(new MediaController(this));
       myVideoView.requestFocus();
       myVideoView.start();
   }
} 
```

这是这个的logcat

```
10-06 12:02:11.473: D/MediaPlayer(332): Couldn't open file on client side, trying server side
10-06 12:02:11.523: E/MediaPlayer(332): error (1, -111)
10-06 12:02:11.723: E/MediaPlayer(332): Error (1,-111)
10-06 12:02:11.723: D/VideoView(332): Error: 1,-111
10-06 12:02:12.083: D/dalvikvm(332): GC_EXTERNAL_ALLOC freed 65K, 52% free 2609K/5379K, external 1813K/2137K, paused 50ms 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T11:43:23.000

首先你的链接是错误的。尝试使用`10.0.2.2`而不是`localhost`.

请尝试使用`.3gp`视频文件。

试试下面的链接。[http://daily3gp.com/vids/747.3gp](http://daily3gp.com/vids/747.3gp)

在清单文件中添加 Internet 权限。

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

**编辑 ：**

```
VideoView videoView = (VideoView)this.findViewById(R.id.videoView);
MediaController mc = new MediaController(this);
mc.setAnchorView(videoView);
mc.setMediaPlayer(videoView);
videoView.setMediaController(mc);
videoView.setVideoURI(Uri.parse("http://hermes.sprc.samsung.pl/widget/tmp/testh.3gp"));

videoView.requestFocus();
videoView.start(); 
```

# c# - 使用c#计算字符数组的第n个排列

> ID：12759439
> 
> 赞同：1
> 
> 时间：2012-10-06T11:40:52.590
> 
> 标签：c#, permutation

我想使用 c# 编写一个方法，即计算字符数组的第 n 个排列，并在不使用递归函数的情况下返回第 n 个排列的字符数组。
例如

`If the array is ABC the second permutation is ACB`.任何人都可以帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T15:35:26.343

词典排列算法通常不是递归的。此页面具有 ac# 变体，可以快速获得第 N 个排列

[http://www.mathblog.dk/project-euler-24-millionth-lexicographic-permutation/](http://www.mathblog.dk/project-euler-24-millionth-lexicographic-permutation/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T11:30:00.013

[codeproject.com 上](http://www.codeproject.com/Articles/26050/Permutations-Combinations-and-Variations-using-C-G)有一个很好的项目，关于有或没有重复的排列和变化。我猜你需要**不重复的排列**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T12:06:40.053

不够清楚你的排列逻辑是什么来为非递归算法提供帮助。

如果你想避免递归函数，我们可以循环运行处理逻辑 N 次。

```
public string GetPermutation(int n, string source)
        {

            for (int i = 0; i < n; i++)
            {
                //modify source
            }
            return source;
        } 
```

# javascript - Google Maps API - 如何显示或打开多个信息窗口？

> ID：12759440
> 
> 赞同：-2
> 
> 时间：2012-10-06T11:40:55.620
> 
> 标签：javascript, google-maps

> **可能重复：**
> [多个 Google 地图信息窗口](https://stackoverflow.com/questions/4381355/multiple-google-maps-infowindow)

我想同时打开 2 个或更多信息窗口，不知道这是否可行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T13:24:44.897

如果您使用的是 Google Maps API v3 而不仅仅是[Google Maps](http://maps.google.com)，正如您的标签所暗示的那样（尽管您确实应该将 google-maps-api-3 标签添加到帖子中），那么没有什么可以阻止您在以下位置打开多个信息窗口同时。您必须编写代码以避免这种情况。

# php - 在发布的 php web 系统中，哪些类型的错误应该停止系统？

> ID：12759441
> 
> 赞同：5
> 
> 时间：2012-10-06T11:40:58.827
> 
> 标签：php

在开发 php web 系统时，设置`E_ALL | E_STRICT`为 error_reporting 并处理包括通知错误在内的所有类型的错误是一种很好的做法。

但是在发布的系统中，发生通知错误时我应该停止系统吗？

或者我应该仅在发生 E_ERROR 时停止系统并忽略所有其他错误，例如 E_WARNING、E_NOTICE 或 E_STRICT？

我应该在我的自定义错误处理程序中处理哪些类型的错误并停止（退出）系统？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T11:46:38.650

当您开发代码时，您应该注意任何警告，包括通知。

对于生产，您不应该真正停止错误。相反，您可以使用它[`set_error_handler()`](http://php.net/manual/en/function.set-error-handler.php)来管理任何错误，例如`E_USER_ERROR`, `E_USER_WARNING`, `E_USER_NOTICE`. 将客户端重定向到自定义页面，针对任何类型的错误显示自定义消息。关键是不要留下默认的错误信息。

您应该始终拥有一个系统来报告您在生产服务器上遇到的任何错误（通过电子邮件等）并尽快处理它们。

在[php.net/set_error_handler 上](http://php.net/set_error_handler)，您有大量示例可以让您的生活更轻松，并帮助您跟踪错误和警告。

# php - 与模板中的其他 Mage 块类交互

> ID：12759443
> 
> 赞同：-2
> 
> 时间：2012-10-06T11:41:52.587
> 
> 标签：php, zend-framework, magento, magento-1.7

我目前正在尝试修改分页模板 ( `/app/design/frontend/default/mytheme/template/page/html/pager.phtml`) 以仅显示分页链接和一个在分页和显示单个页面上的所有项目之间切换的链接。

我已经弄清楚了后者：

```
<div class="show-all-toggle">
    <a class="show-all" href="<?php echo $this->getLimitUrl('all') ?>">Show All</a>
</div> 
```

而且我知道如何获取所有可用分页限制的列表：

```
$this->getAvailableLimit(); 
```

但是，我无法获得在管理后端设置的默认限制。

我真的不清楚模板和块类之间的关系，但是这个模板与[Mage_Page_Block_Html_Pager](http://docs.magentocommerce.com/Mage_Page/Mage_Page_Block_Html_Pager.html)相关联，所以我知道它`$this`具有该类的所有成员变量和函数。

我也知道[Mage_Adminhtml_Block_Widget_Grid](http://docs.magentocommerce.com/Mage_Adminhtml/Mage_Adminhtml_Block_Widget_Grid.html)有一个名为 的属性`$_defaultLimit`，它应该是管理面板中设置的默认分页限制。但是如何从不同的模板访问这个类属性呢？或者我会以完全错误的方式解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T11:34:20.270

如果您的寻呼机块在里面`<block type="catalog/product_list_toolbar" ...`-您可以尝试`$this->getParentBlock()->getDefaultPerPageValue()`。

# java - 避免在 Android 中合并 ACTION_MOVE MotionEvents

> ID：12759445
> 
> 赞同：2
> 
> 时间：2012-10-06T11:42:12.760
> 
> 标签：java, android, motionevent

我试图准确地从Android`ACTION_MOVE`中的 s 序列中读取增量。`MotionEvent`

然而，我用手指在屏幕上滑动的测试表明，在最初的 s 之后`ACTION_DOWN`，几个`MotionEvent`s 没有传递给听众。只有在进行了足够大的移动之后，`ACTION_MOVE`才会以相对较大的增量传递事件。在这第一个`ACTION_MOVE`事件之后，所有增量都再次变得非常小。

或者，也可以触摸屏幕 ( `ACTION_DOWN`) 并稍微移动一下，根本不会`ACTION_MOVE`传递任何事件。

我知道对于许多用途，具有一定的移动（内）敏感性是有益的。但是，有没有办法避免`ACTION_MOVE`事件合并，使得每一个小的初始动作都被传递？`ACTION_DOWN`是否可以在位置和第一个位置之间的最小距离上设置阈值`ACTION_MOVE`？

这是一些示例代码：

```
private float lastX;
private float lastY;

public boolean onTouch(View v, MotionEvent ev) {

    final float y = ev.getX();
    final float x = ev.getY();

    final int hs = ev.getHistorySize();

    final int ac = ev.getAction();
    switch(ac)
    {
        case MotionEvent.ACTION_DOWN:
        {
            this.lastX = x;
            this.lastY = y;
            Log.i("TEST", "Down at " + x + "/" + y + " (History size="+hs+")");
            return true;
        }
        case MotionEvent.ACTION_MOVE:
        {
            Log.i("TEST", "Move at " + x + "/" + y + ": Delta="+(lastX-x)+"/"+(lastY-y) + " (History size="+hs+")");
            this.lastX = x;
            this.lastY = y;
            return true;
        }
        case MotionEvent.ACTION_UP:
        {
            Log.i("TEST", "Up at " + x + "/" + y + " (History size="+hs+")");
            return true;
        }
    } 
} 
```

以及相应的输出：

```
Down at 376.0/259.0 (History size=0)
Move at 392.0/268.0: Delta=-16.0/-9.0 (History size=0)
Move at 394.0/268.0: Delta=-2.0/0.0 (History size=0)
Move at 395.0/269.0: Delta=-1.0/-1.0 (History size=0)
Move at 394.0/268.0: Delta=1.0/1.0 (History size=0)
Move at 396.0/269.0: Delta=-2.0/-1.0 (History size=0)
Move at 399.0/271.0: Delta=-3.0/-2.0 (History size=1)
Move at 401.0/272.0: Delta=-2.0/-1.0 (History size=0)
Move at 403.0/273.0: Delta=-2.0/-1.0 (History size=0)
Move at 404.0/273.0: Delta=-1.0/0.0 (History size=0)
Move at 405.0/274.0: Delta=-1.0/-1.0 (History size=0)
Move at 406.0/275.0: Delta=-1.0/-1.0 (History size=0)
Up at 406.0/275.0 (History size=0) 
```

换句话说，我想避免第二行（-16/-9）的大增量，但接收 1 或 2 的增量...

我在三星 Galaxy S2 和 Note 上进行了测试。

任何帮助或建议都非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T10:30:16.077

我不想告诉你，但这完全是三星的错，只会发生在 Galaxy S2 上。基本上，他们无缘无故地在输入驱动程序中添加了软件触摸阈值。

我曾经试图说服他们取消门槛，但他们似乎没有理解问题并告诉我这是*故意*的！尽管如此，他们还是在 Galaxy S3 中修复了它。

幸运的是，这不是硬件限制，因此如果您有一部有根手机或安装自定义 ROM，您可以绕过它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T15:05:06.707

我在某些应用程序中使用 MotionEvent 并没有遇到这个问题。

如果您使用的 SDK 版本 > 4，则 MotionEvent 支持多点触控。我正在我的应用程序上对此进行测试，并使用修改后的侦听器来获取触摸事件。代码如下：

```
private static PointF touchScreenStartPtArr[] = new PointF[10]; 
private static PointF touchScreenStopPtArr[] = new PointF[10]; 
private static PointF touchScreenCurrPtArr[] = new PointF[10]; 

OnTouchListener onTouchListenerMulti = new OnTouchListener() { 

    @Override 
    public boolean onTouch(View v, MotionEvent event) { 

        int action = event.getAction() & MotionEvent.ACTION_MASK; 
        int pointerIndex = (event.getAction() & MotionEvent.ACTION_POINTER_INDEX_MASK) >> MotionEvent.ACTION_POINTER_INDEX_SHIFT; 
        int fingerId = event.getPointerId(pointerIndex); 

        switch (action) { 
        case MotionEvent.ACTION_DOWN: 
        case MotionEvent.ACTION_POINTER_DOWN: 
            touchScreenStartPtArr[fingerId].x = event.getX(pointerIndex); 
            touchScreenStartPtArr[fingerId].y = event.getY(pointerIndex); 
            break; 
        case MotionEvent.ACTION_UP: 
        case MotionEvent.ACTION_POINTER_UP: 
        case MotionEvent.ACTION_CANCEL: 
            touchScreenStopPtArr[fingerId].x = event.getX(pointerIndex); 
            touchScreenStopPtArr[fingerId].y  = event.getX(pointerIndex); 
            break; 
        case MotionEvent.ACTION_MOVE: 
            int pointerCount = event.getPointerCount(); 
            for (int i = 0; i < pointerCount; i++) { 
                touchScreenCurrPtArr[fingerId].x = event.getX(i); 
                touchScreenCurrPtArr[fingerId].y = event.getY(i); 
            } 
            break; 
        } 
        return true; 
    } 
}; 
```

- 编辑 -

在华为 X5 设备上运行代码的结果：

```
Down at 387.29388/247.27272 (History size=0)
Move at 387.29388/247.27272: Delta=0.0/0.0 (History size=0)
Move at 387.29388/247.27272: Delta=0.0/0.0 (History size=0)
Move at 387.29388/245.39589: Delta=0.0/1.876831 (History size=0)
Move at 387.29388/244.92668: Delta=0.0/0.46920776 (History size=0)
Move at 387.29388/244.45747: Delta=0.0/0.46920776 (History size=0)
Move at 387.29388/243.98827: Delta=0.0/0.46920776 (History size=0)
Move at 387.29388/243.51906: Delta=0.0/0.46920776 (History size=0)
Move at 389.01614/243.51906: Delta=-1.7222595/0.0 (History size=0)
Move at 389.8773/243.51906: Delta=-0.861145/0.0 (History size=0)
Move at 389.8773/243.04985: Delta=0.0/0.46920776 (History size=0)
Move at 390.73843/243.04985: Delta=-0.861145/0.0 (History size=0)
Move at 390.73843/242.58064: Delta=0.0/0.46920776 (History size=0)
Move at 391.59958/242.58064: Delta=-0.861145/0.0 (History size=0)
Move at 391.59958/242.11143: Delta=0.0/0.46920776 (History size=0)
Move at 392.46072/242.11143: Delta=-0.861145/0.0 (History size=0)
Move at 392.46072/241.64223: Delta=0.0/0.46920776 (History size=0)
Move at 393.32187/241.64223: Delta=-0.861145/0.0 (History size=0)
Move at 394.183/241.64223: Delta=-0.861145/0.0 (History size=0)
Move at 394.183/241.17302: Delta=0.0/0.46920776 (History size=0)
Move at 395.04413/241.17302: Delta=-0.8611145/0.0 (History size=0)
Move at 395.04413/242.11143: Delta=0.0/-0.9384155 (History size=0)
Move at 395.04413/242.58064: Delta=0.0/-0.46920776 (History size=0)
Up at 395.04413/242.58064 (History size=0) 
```

看起来您可能有另一个侦听器从这个侦听器窃取事件。

我建议您在清洁项目中检查您的代码（您需要在最后添加“return false”），以确认它。

祝你好运。

# java - Servlets Jsp 和空指针

> ID：12759449
> 
> 赞同：0
> 
> 时间：2012-10-06T11:42:31.517
> 
> 标签：java, servlets, parameters

大家好，我有一个网站，讲师将导师分配给实验室，目前我有一个导师列表，我可以单击分配，然后将用户带到另一个页面，那里有一个下拉框，他们可以选择哪个实验室他们希望导师教书。它应该将实验室的ID和用户的ID提交到数据库。

目前，当用户获取导师列表时，他们单击一个名为“分配”的链接，该链接将导师 ID 放在 url 中，然后他们有一个他们可以选择的 tute 列表，一旦我选择了导师并单击提交我得到以下错误。

描述 服务器遇到一个内部错误 () 阻止它完成这个请求。

```
exception

java.lang.NumberFormatException: null
    java.lang.Integer.parseInt(Unknown Source)
    java.lang.Integer.parseInt(Unknown Source)
    TutorAssign.doPost(TutorAssign.java:97)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

sendBack 方法正在运行，但 doPost 没有运行，它指向我将请求参数设为 null 的行 - `int user_id = Integer.parseInt(request.getParameter("id"));`

我怎样才能解决这个问题？我将包括我的整个 servlet 以便更好地说明

```
import java.io.IOException;
import java.io.PrintWriter;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.ArrayList;

import javax.servlet.RequestDispatcher;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

/**
 * Servlet implementation class TutorAssign
 */
@WebServlet("/TutorAssign")
public class TutorAssign extends HttpServlet {
    private static final long serialVersionUID = 1L;

    /**
     * @see HttpServlet#HttpServlet()
     */
    public TutorAssign() {
        super();
        // TODO Auto-generated constructor stub
    }

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        sendBack(request, response);
    }

    private void sendBack(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
         HttpSession session = request.getSession(true);
            //Set data you want to send back to the request (will be forwarded to the page)
            //Can set string, int, list, array etc.
         int user_id = Integer.parseInt((String)request.getParameter("id"));
         String sql = "SELECT l.id,s.name,l.day,l.time,l.room" +
                  " FROM subject s, lab l " +
                    " WHERE s.user_id="+(Integer)session.getAttribute("id");

          try{
            Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/wae","root","");
            System.out.println("got a hj");
            System.out.println(session.getAttribute("id"));

              Statement stmt = con.createStatement();
              ResultSet res = stmt.executeQuery(sql);
              System.out.println(res);
              ArrayList<String> list1 = new ArrayList<String>();
              ArrayList<String> list2 = new ArrayList<String>();
              if (res.next()){
                  do{
                       list1.add(res.getString(1));
                       list2.add(res.getString(2)+" "+res.getString(3)+" "+res.getString(4)+" "+res.getString(5));

                  }while(res.next());
              System.out.println("Outside");
              String[] arr1 = list1.toArray(new String[list1.size()]);
              String[] arr2 = list2.toArray(new String[list2.size()]);
              System.out.println(list1);
              request.setAttribute("res1", arr1);
              request.setAttribute("res2", arr2);
              request.setAttribute("user_id", user_id);

              }

          }catch (SQLException e) {
            } 
            catch (Exception e) {
            } 

            //Decides what page to send the request data to
            RequestDispatcher view = request.getRequestDispatcher("TutorAssign.jsp");
            //Forward to the page and pass the request and response information
            view.forward(request, response); 
    }

    /**
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

        int user_id = Integer.parseInt((String)request.getParameter("id"));
          System.out.println(user_id);
          int lab_id = 0;
          System.out.println("I got a blow job");
          String message = null; 
          try {
              Class.forName("com.mysql.jdbc.Driver");
              Connection con = 
                DriverManager.getConnection("jdbc:mysql://localhost:3306/wae","root","");
            System.out.println("got connection"); 
            System.out.println(user_id);
            Statement s = con.createStatement(); 

            String sql = "INSERT INTO user_lab" + 
                      " (user_id, lab_id)" + 
                      " VALUES" + 
                      " ('" +  user_id + "'," + 
                         " '"  +  lab_id + "')"; 

              System.out.println(sql);
              int i = s.executeUpdate(sql); 
              if (i==1) {
                message = "Successfully assigned a tutor."; 
                response.sendRedirect("Lecturer_labs");
              } 

              s.close(); 
              con.close(); 
            } 
            catch (SQLException e) {
              message = "Error." + e.toString(); 
              boolean error = true; 
            } 
            catch (Exception e) {
              message = "Error." + e.toString(); 
              boolean error = true; 
            } 
            if (message!=null) {
              PrintWriter out = response.getWriter(); 
              out.println("<B>" + message + "</B><BR>"); 
              out.println("<HR><BR>"); 
            } 

          } 
// TODO Auto-generated method stub

} 
```

这是我的jsp代码

```
<form name ="TutorAssign" ACTION="TutorAssign" method="post">
        <input type="hidden" name="user_id" value="user_id"/>
        <select name="lab_id">
        <%
        for(int i=0; i<list1.length;i++)  
        { 
        out.println("<option value="+list1[i]+"> "+list2[i]+" </option>");

        } %>
        </select>
        <input type=SUBMIT value="Submit" name="Submit" />

        </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T11:50:29.907

当 HTTP POST 发生时，它似乎`id`没有被传递到您的 servlet。您可以通过添加合适的保护语句来防止这种情况：

```
if (request.getParameter("id") == null) {
   // handle non existance of id
} 
```

未传入的原因`id`是您的 JSP 表单中没有任何输入字段可传入此值。这看起来像：

```
<input type="hidden" name="id" value="your_id_here"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T12:02:22.387

问题在这里：

```
<form name ="TutorAssign" ACTION="TutorAssign" method="post">
        <select name="labs">
        <%
        for(int i=0; i<list1.length;i++)  
        { 
        out.println("<option value="+list1[i]+"> "+list2[i]+" </option>");

        } %>
        </select> 
```

进一步来说：

```
<select name="labs"> 
```

如果您将名称更改为`id`OR 使用`request.getParameter("labs")`，您可能会得到您想要的。

# php - 将javascript插入php

> ID：12759452
> 
> 赞同：0
> 
> 时间：2012-10-06T11:42:55.973
> 
> 标签：php, javascript, jquery, insert, datepicker

我在我的 php 应用程序中使用组件 datepicker，我想将 datepiker 组件的值影响到 php 数组的元素，如下所示：

```
<?php
    if ($_SERVER["REQUEST_METHOD"] == "POST")
        $wish = array("id" => $_POST["wishID"], "description" => $_POST["wish"], "due_date" => .datepicker( "getDate" ));
    else
    if (array_key_exists("wishID", $_GET))
        $wish = mysqli_fetch_array(WishDB::getInstance()->get_wish_by_wish_id($_GET["wishID"]));
    else
        $wish = array("id" => "", "description" => "", "due_date" => "");
    ?> 
```

但是当我运行此页面时出现错误：

```
Parse error: syntax error, unexpected 'getDate' (T_STRING), expecting ')' in C:\wamp\www\PhpProject1\editWish.php on line 48 
```

以及这一行的错误点：

```
"due_date" => .datepicker( "getDate" ) 
```

我怎么能做到这一点谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T12:02:07.043

You cannot intermix PHP and JavaScript code the way you tried. They are completely different languages, even processed on different parts of the application (JavaScript is client-side, PHP is server-side).

What you need to do is actually use the `.datepicker( "getDate" )` on your HTML page to populate an element in the same form where `wishID` and `wish` inputs are present (like a hidden input, or even text input) and then sumbit that form along to your PHP script. Then you will be able to do something like:

```
<?php
    if ($_SERVER["REQUEST_METHOD"] == "POST")
        $wish = array("id" => $_POST["wishID"], "description" => $_POST["wish"], "due_date" => $_POST['your_date_input_field']);
    else
    if (array_key_exists("wishID", $_GET))
        $wish = mysqli_fetch_array(WishDB::getInstance()->get_wish_by_wish_id($_GET["wishID"]));
    else
        $wish = array("id" => "", "description" => "", "due_date" => "");
?> 
```

# tdd - Presenter First（或其他测试驱动）Eclipse RCP 应用程序示例

> ID：12759458
> 
> 赞同：0
> 
> 时间：2012-10-06T11:43:42.377
> 
> 标签：tdd, eclipse-rcp, gui-testing

谷歌搜索“Test-Driven Development Eclipse RCP”或变体会带来相当多的演示文稿、论文等，但没有真正的示例代码或（甚至更好）以这种方式开发的重要开源应用程序。有没有？

# include - 如何在没有'/'的情况下包含lib？

> ID：12759460
> 
> 赞同：0
> 
> 时间：2012-10-06T11:43:52.870
> 
> 标签：include, vtk

例如：

我安装了 libvtk-5.8。

我尝试包含 vtkAppendPolyData.h 而不是 vtk-5.8/vtkAppendPolyData.h。

因为在一些我不想自己修补代码的库中使用了 include 方法。

怎么做？

谢谢~

# json - 将 JSON/YAML 解析为 Network.HTTP.Base.Request

> ID：12759464
> 
> 赞同：1
> 
> 时间：2012-10-06T11:44:07.870
> 
> 标签：json, haskell, yaml

我正在尝试解析 YAML 块并从中创建一个 Request 实例。所以基本上我有以下（的实现`FromJSON URI`，为了简洁`FromJSON RequestMethod`而`FromJSON Header`省略）：

```
...
instance FromJSON (Request r) where
  parseJSON (Object v) = Request <$>
    v .: "uri" <*>
    v .: "method" <*>
    v .: "headers" <*>
    v .: "body" 
```

尝试编译（使用 GHC）此代码会产生：

```
 No instance for (FromJSON r)
      arising from a use of `.:'
    In the second argument of `(<*>)', namely `v .: "body"'
    In the expression:
      Request <$> v .: "uri" <*> v .: "method" <*> v .: "headers"
      <*> v .: "body"
    In an equation for `parseJSON':
        parseJSON (Object v)
          = Request <$> v .: "uri" <*> v .: "method" <*> v .: "headers"
            <*> v .: "body" 
```

我觉得这是一个新手问题（这就是我），但显然 GHC 无法推断请求正文的类型（这似乎是多态的），而且我缺乏处理这个问题的技能。尽管我设法通过将实例声明替换为以下内容来“安抚”编译器：

```
instance FromJSON (Request Text) where
... 
```

并添加`{-# LANGUAGE FlexibleInstances #-}`选项，但我以某种方式确定它是错误的。那么，我该如何正确解析这个（以及类似的情况）？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T06:37:14.273

感谢@hammar，答案归结为以下两点：

1）为了能够加入计算，实例声明中的“r”（指请求体）必须限制为“FromJSON”类。

```
instance FromJSON r => FromJSON (Request r) where
  parseJSON (Object v) = Request <$>
    v .: "uri" <*>
    v .: "method" <*>
    v .: "headers" <*>
    v .: "body" 
```

2) 并且，当使用解析器时，必须明确通知它要处理的主体类型：

```
testJSON :: Maybe (Request Text)
testJSON = decode "{uri: 'http://example.com/', method: GET, headers: [], body: 'hello'}" 
```

我不确定这有多明显，但我猜 GHC 可以自己推断出类限制。还没有，也许。

# matlab - 识别叶片的裂片和凸起

> ID：12759471
> 
> 赞同：7
> 
> 时间：2012-10-06T11:44:54.367
> 
> 标签：matlab, image-processing, computer-vision, object-recognition

我需要一些帮助，我必须做一个关于树叶的项目。

我想用 MATLAB 制作它。

我的输入是一张叶子的图像（背景为白色），我需要知道关于叶子的两件事：

**1）找到裂叶（每个裂叶的像素）：**

*   将叶子放在可以检查的桌子或工作空间上。

*   查看您要识别的叶子。如果叶子看起来像有手指，这些被认为是裂片。一片叶子上可以有两个到多个裂片。

*   通过观察叶子下面的静脉来区分羽状叶和掌状叶。如果叶脉都来自叶基部的同一位置，则认为它是掌状裂片的。如果它们从一条中心线在叶子上的不同位置形成，则叶子呈羽状裂。

*   使用叶子字典识别叶子的类型。

![在此处输入图像描述](../Images/433c70bd3b0ddf3ac20c6c2921af84e9.png)

**2）找到大约叶子的颠簸数量：**

换句话说，找到每片叶子的“肿胀点”。 ![在此处输入图像描述](../Images/5c15c27b96e15546ea2c4e19024a7eb7.png)

**这些是叶子的例子：**

![在此处输入图像描述](../Images/506af4ed20975531dd5cd533d6675879.png) ![在此处输入图像描述](../Images/f3c50ef9def579caa935483167f997e9.png) ![在此处输入图像描述](../Images/245e01e684cc0876d8326bf7517cabab.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-06T12:54:36.307

我在[这里](http://fallgetaways.iloveny.com/LANDING_LEAF_IDENTIFIER.html)找到了一些叶子的例子。

这是我解决问题的尝试。在我找到的图像中，背景是完全黑色的。如果您的图像不是这样，您应该使用 Otsu 的阈值方法。

根据您的图像，我假设只能有 3 种类型的叶子： ![在此处输入图像描述](../Images/433c70bd3b0ddf3ac20c6c2921af84e9.png)

这个想法是进行blob分析。我使用开放的形态学操作来分离叶子。如果打开后只有一个斑点，我认为它不是复合的。如果叶子不是复合的，我会分析斑点的[坚固性。](http://www.mathworks.com/help/images/ref/regionprops.html#bqkf8j2)不够坚固意味着它们有裂片。

这里有些例子：

![在此处输入图像描述](../Images/546f68124d5c0ad920a1543e4bb93c46.png) ![在此处输入图像描述](../Images/c90eec16b10a5e0b24191009087a3175.png) ![在此处输入图像描述](../Images/2e3345c9bade51416154fc764da19773.png) ![在此处输入图像描述](../Images/5d82d2031ba8bd17fe1a04ffa66c0390.png)

```
function IdentifyLeaf(dirName,fileName)

    figure();
    im = imread(fullfile(dirName,fileName));
    subplot(1,3,1); imshow(im);

%   thresh = graythresh( im(:,:,2));
    imBw = im(:,:,2) > 0;
    subplot(1,3,2);imshow(imBw);

    radiusOfStrel = round( size(im,1)/20 ) ;
    imBwOpened = imopen(imBw,strel('disk',radiusOfStrel));

    subplot(1,3,3);imshow(imBwOpened);

    rpOpened = regionprops(imBwOpened,'Area');
    if numel(rpOpened)>1
        title('Pinnately Compound');
    else
        rp = regionprops(imBw,'Area','Solidity');
        %Leave only largest blob
        area = [rp.Area];
        [~,maxIndex] = max(area);
        rp = rp(maxIndex);

        if rp.Solidity < 0.9
            title('Pinnately Lobed');
        else
            title('Pinnately Veined');
        end
    end
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T12:47:15.210

我将通过使用“右手在墙上”算法在矢量中扫描叶子的周长，将其从 2d 转换为 1d 来解决这个问题。

我想，从这些数据中，可以找到一个主要的对称轴（例如拟合一条线）；将根据该轴计算周长的距离，然后可以简单地使用阈值+过滤来找到局部最大值和最小值以显示裂片/手指的数量......距离的直方图可以区分羽状裂片和羽状复叶.

检查周长曲率（从两个极端点）的另一个单一指标是[http://en.wikipedia.org/wiki/Sinuosity](http://en.wikipedia.org/wiki/Sinuosity)

不幸的是，识别静脉是一个完全不同的话题。

# java - 在 android 中启动系统和第三方应用程序

> ID：12759473
> 
> 赞同：0
> 
> 时间：2012-10-06T11:45:06.240
> 
> 标签：java, android, eclipse, android-intent

我现在已经搜索了很多，我找不到一种可靠的方法来运行日历、相机、facebook、twitter、insatgram 和 android 中的各种应用程序等应用程序。我知道我需要使用意图，但我该怎么做？我真的需要帮助！请帮助我，非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T12:22:26.130

Android中没有“运行应用程序”这样的概念。你开始活动。有才华的开发人员不会专注于特定的应用程序（例如，“facebook、twitter、insatgram”），因为这些应用程序可能不存在于任何给定的设备上。相反，您专注于通用功能（例如，使用`ACTION_SEND` `Intent`with`startActivity()`来共享某些内容，通过使用来创建启动器`PackageManager`以查找支持`ACTION_MAIN`和的活动`CATEGORY_HOME`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T12:27:32.780

如果您想从您的 android 应用程序启动其他应用程序，那么您应该知道该特定应用程序的包名称例如启动 facebook 使用

```
Intent intent = new Intent("android.intent.category.LAUNCHER");
intent.setClassName("com.facebook.katana", "com.facebook.katana.LoginActivity");
startActivity(intent); 
```

否则也可以使用

```
Intent LaunchIntent = getPackageManager().getLaunchIntentForPackage("com.package.address");
startActivity(LaunchIntent); 
```

如果您想启动为某种特定类型的操作安装的默认 android 应用程序，那么您可以为此使用[隐式意图](http://developer.android.com/training/basics/intents/sending.html)。例如，要启动一个浏览器，您可以使用

```
Uri webpage = Uri.parse("http://www.android.com");
Intent webIntent = new Intent(Intent.ACTION_VIEW, webpage);
startActivity(intent); 
```

您还应该查看[意图和意图过滤器](http://developer.android.com/guide/components/intents-filters.html)以及[如何允许其他应用程序打开您的应用程序](http://developer.android.com/training/basics/intents/filters.html)。

# android - XML 布局 - 滚动后按钮不可见

> ID：12759474
> 
> 赞同：1
> 
> 时间：2012-10-06T11:45:08.553
> 
> 标签：android, xml, android-layout, android-linearlayout, android-xml

我有一个如下的 XML 布局。我有一个文本视图，后跟一些复选框，然后是一个按钮。我已将所有复选框包含在线性布局中，并为此设置了滚动视图。向下滚动后我无法查看我的按钮，我该怎么办？

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView />

    <ScrollView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:fillViewport="true"
        android:orientation="vertical" >

        <LinearLayout>

            <CheckBox />

            <CheckBox />

            <CheckBox/>

            <CheckBox/>

            <CheckBox/>

            <CheckBox/>

            <CheckBox/>

            <CheckBox/>

            <CheckBox />

            <CheckBox/>

            <CheckBox />
        </LinearLayout>
    </ScrollView>

    <Button

    </Button>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T11:57:58.003

滚动视图有一个条件，滚动视图应该只有一个子视图，子视图可能包含子视图

如果你想显示你有使用视图 wight 概念的按钮

```
 <LinearLayout
        <TextView
    <ScrollView   
    <LinearLayout
      <CheckBox
        <CheckBox
        <CheckBox
        <CheckBox
        .

        <CheckBox
    LinearLayout>
    ScrollView>
        <Button
 android:layout_weight="1"

    LinearLayout > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T04:07:27.713

您必须使用 Relativelayout 或 FrameLayout 以获得更好的解决方案。这是使用相对布局的代码

```
 <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <Button
            android:id="@+id/relative_button"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
android:text="hello one"
             >
        </Button>

        <ScrollView
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_above="@id/relative_button"
             >

         <LinearLayout>

                <CheckBox />

                <CheckBox />

                <CheckBox/>

                <CheckBox/>

                <CheckBox/>

                <CheckBox/>

                <CheckBox/>

                <CheckBox/>

                <CheckBox />

                <CheckBox/>

                <CheckBox />
            </LinearLayout>
        </ScrollView>

    </RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T06:57:05.170

试试下面的代码。您需要将 Button 与底部对齐，并在 Button 顶部对齐包含复选框的 LinearLayout。我已经尝试过这段代码，它对我有用。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:text="ABC" />

    <ScrollView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/textView"
        android:layout_above="@+id/button"
        android:orientation="vertical" >

        <LinearLayout
            android:orientation="vertical"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <CheckBox
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />

            <CheckBox
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />

            <CheckBox
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />

            <CheckBox
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />

            <CheckBox
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />

            <CheckBox
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />

            <CheckBox
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />

            <CheckBox
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />

            <CheckBox
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />

            <CheckBox
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />

            <CheckBox
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />
        </LinearLayout>
    </ScrollView>

    <Button
        android:id="@+id/button"
        android:layout_centerHorizontal="true"
        android:layout_alignParentBottom="true"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

</RelativeLayout> 
```

# perl - 为什么我的 Perl 代码没有省略换行符？

> ID：12759480
> 
> 赞同：0
> 
> 时间：2012-10-06T11:45:37.307
> 
> 标签：perl

我正在阅读此文本文件以仅获取其中的单词并忽略所有类型的空格：

```
hello
now
    do you see this.sadslkd.das,msdlsa but 
      i   hoohoh 
```

这是我的 Perl 代码：

```
#!usr/bin/perl -w
require 5.004;

open F1, './text.txt';

while ($line = <F1>) {

    #print $line;
    @arr = split /\s+/, $line;
    foreach $w (@arr) {

        if ($w !~ /^\s+$/) {

            print $w."\n";
        }
    }
    #print @arr;
}
close F1; 
```

这是输出：

```
hello
now

do
you
see
this.sadslkd.das,msdlsa
but

i
hoohoh 
```

输出显示两个换行符，但我希望输出只是单词。我应该怎么做才能得到单词？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T13:56:37.183

你应该*总是* `use strict`和`use warnings`（优先于`-w`命令行限定符）在每个 Perl 程序的顶部，并在每个变量的第一个使用点使用`my`. 这样 Perl 会告诉你一些你可能会忽略的简单错误。

您还应该使用三参数形式的词法文件句柄`open`，并检查状态以确保它成功。除非您希望程序运行相当长的时间，否则显式关闭输入文件没有什么意义，因为 Perl 会在退出时为您关闭所有文件。

你真的需要`require`Perl v5.4 吗？那个版本是 15 年的，如果安装了比那个版本更旧的东西，那么你就有了博物馆！

你的程序会像这样更好：

```
use strict;
use warnings;

open my $fh, '<', './text.txt' or die $!;

while (my $line = <$fh>) {

    my @arr = split /\s+/, $line;

    foreach my $w (@arr) {
        if ($w !~ /^\s+$/) {
            print $w."\n";
        }
    }
} 
```

**注意**：我很抱歉。`warnings`编译指示和词法文件句柄仅在 v5.6 中引入，因此我的部分答案是无关紧要的。Perl 的最新版本是 v5.16，你真的应该升级

正如[Birei](https://stackoverflow.com/users/773159/birei)指出的那样，问题在于，当行有前导空格时，第一个分隔符*之前*有一个空字段。想象一下，如果您的数据是逗号分隔的，那么如果该行以逗号开头，您会希望 Perl 报告一个前导空字段。

要提取所有非空格字符，您可以使用正则表达式来完成该操作

```
my @arr = $line =~ /\S+/g; 
```

这可以通过使用单*引号*空格（*不是*正则表达式）的*默认*参数来模拟`split`

 **```
my @arr = $line =~ split ' ', $line; 
```

在这种情况下，它`split`的行为类似于`awk`实用程序，并按照您的预期丢弃任何前导的空字段。

如果让 Perl`$_`在读取循环中使用变量，这会更简单，因为所有参数 for`split`都可以默认：

```
while (<F1>) {
    my @arr = split;
    foreach my $w (@arr) {
        print "$w\n" if $w !~ /^\s+$/;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T11:53:46.790

这条线是问题所在：

```
@arr=split(/\s+/,$line); 
```

`\s+`在前导空格之前进行匹配。改为使用`' '`。

```
@arr=split(' ',$line); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T11:56:11.373

我相信在这一行：

```
if(!($w =~ /^\s+$/)) 
```

您想问这行是否没有任何内容 - 不要打印它。但 REGEX 中的“+”实际上强制它至少有 1 个空格。

如果您将“\s+”更改为“\s*”，您会发现它正在工作。因为 * 是 0 次或更多...**

# haskell - 为什么 (a, a) 不是函子？

> ID：12759481
> 
> 赞同：7
> 
> 时间：2012-10-06T11:45:40.717
> 
> 标签：haskell, typeclass, functor, type-systems

> **可能的重复：**
> [使 (a, a) 成为函子](https://stackoverflow.com/questions/4812633/making-a-a-a-functor)

我编写了以下快速排序的实现：

```
import Data.List (partition)

quicksort [] = []

quicksort (x:xs) =
    let (smaller, notSmaller) = partition (< x) xs
    in  quicksort smaller ++ x : quicksort notSmaller 
```

然后我想`quicksort`通过应用于`fmap`列表对来缩写两个递归调用：

```
quicksort (x:xs) =
    let (smaller, notSmaller) = fmap quicksort $ partition (< x) xs
    in  smaller ++ x : notSmaller 
```

但显然，`(a, a)`不是函子。这是为什么？我试图提供一个：

```
instance Functor (a, a) where
    fmap f (x, y) = (f x, f y) 
```

但是 ghci 不喜欢我的尝试：

```
Kind mis-match
The first argument of `Functor' should have kind `* -> *',
but `(a, a)' has kind `*'
In the instance declaration for `Functor (a, a)' 
```

谁能向我解释这个错误？我尝试了各种“修复”，但都没有奏效。

是否可以创建`(a, a)`一个实例`Functor`？还是类型系统不够表达？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-06T11:53:07.460

It's important to realise that it's not `(a,a)` that would be the functor, in the same way that `Maybe a` and `[a]` aren't functors. Instead, the functors are `Maybe` and `[]`.

A full explanation requires introducing the concept of *kinds*, which are like "types of types". Any concrete type has kind `*`. A *type constructor* like `Maybe` or `[]` takes a type and returns another type, so it has kind `* -> *`.

What's the kind of `(,)` (the constructor for pairs)? It needs two types, one for the first slot and one for the second slot, so it has kind `* -> * -> *`.

You can only make a functor out of things of kind `* -> *`, so the short answer to your question is *no*, you can't make `(,)` into a functor.

However, you can get around the limitation by wrapping the type. For example

```
newtype Pair a = P (a,a)

instance Functor Pair where
    fmap f (P (x,y)) = P (f x, f y) 
```

The newtype wrapper will be optimized away by the compiler, so this isn't any more expensive than what you were trying to do originally - it's just a little more verbose.

# powershell - Get-authenticodesignature 始终显示 NotSigned

> ID：12759482
> 
> 赞同：3
> 
> 时间：2012-10-06T11:45:40.967
> 
> 标签：powershell, digital-signature

任何人都知道为什么如果我在命令提示符下使用 sigverif， powershell 中的 get-authenticicodesignature 总是将 .dll 或 .exe 文件显示为**NotSigned**，而它显示为已**签名。**

sigverif 输出

```
 File                      Modified       Version             Status              Catalog              Signed By
------------------      ------------   -----------        ------------        -----------          -------------------
[c:\windows\system32]
batt.dll                 7/14/2009      2:6.1               Signed              nt5.cat             Microsoft Windows 
```

PowerShell 输出：

```
 PS> get-authenticodesignature C:\Windows\System32\batt.dll    

    Directory: C:\Windows\System32    

SignerCertificate                         Status                                 Path
-----------------                         ------                                 ----
                                          NotSigned                              batt.dll 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T06:32:33.933

Microsoft 有一个程序来确保设备驱动程序可靠且不太可能导致您的计算机出现问题。当 Microsoft 开发人员和第 3 方供应商创建新驱动程序时，可以将其提交给 Microsoft 内部的一个特殊部门进行“设备签名”。签名存储在驱动程序包中的一个 cat 文件中，即`sigverify.exe`检查。有关更多说明，请参阅[Windows 的驱动程序签名要求](http://msdn.microsoft.com/en-us/library/windows/hardware/gg487317.aspx)。

`get-authenticodesignature`用于检测其他可执行签名，即.EXE、.DLL 或.PS1。就 PowerShell 而言，您可以使用它`Set-AuthenticodeSignature`来签署您的代码。对于 .DLL 和 .EXE（无论它们是本机的还是托管的），您可以使用SDK 或 DDK 中的[signtool.exe](http://msdn.microsoft.com/en-us/library/8s9b9yaz%28v=vs.80%29.aspx)。结果可以显示在文件的属性中：

![在此处输入图像描述](../Images/107a08484ffeebdfc733629b88c10925.png)

它存在另一种签名，仅保留给托管代码。它被称为一个强大的名字。它用于为程序集提供标识。使用强名称对程序集进行签名可以验证它的唯一性并允许将其存储在全局程序集缓存中，这是使用[sn.exe](http://msdn.microsoft.com/en-us/library/k5b5tt23%28v=vs.80%29.aspx)完成的。它可以与前一个结合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-17T11:32:34.883

普通文件可以通过以下两种方式之一进行签名：嵌入式签名或目录签名。有关这两种方法的详细信息，请参阅[本文档的第 12 页。](https://msdn.microsoft.com/en-us/library/windows/hardware/dn653556(v=vs.85).aspx)

Get-AuthenticodeSignature 适用于嵌入签名的文件；但它将目录签名的文件报告为未签名。这已[作为一个错误报告](https://connect.microsoft.com/PowerShell/feedback/details/1121526/get-authenticodesignature-should-work-with-catalog-signed-files)给 PowerShell 团队，但显然还没有得到足够的支持来引起他们的注意。

作为一种解决方法，您可以使用 Sysinternals [Sigcheck](https://technet.microsoft.com/en-us/sysinternals/bb897441)，它可以正确处理目录签名文件。[在这个 github 代码](https://github.com/bklockwood/Powershell-PKI/blob/master/VerifyProtectedDirs.ps1)中有一个称为 Use-Sigcheck 的 Powershell 函数，它可能对你有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T13:21:18.687

sigverif 用于查找未签名的驱动程序并验证设备驱动程序（在 C:\WINDOWS\SYSTEM32\DRIVERS 下）。当您打开 Dll 的属性页面时，您是否看到“数字签名”选项卡？

# php - 在 drupal7 中扩展 Mytiny todo 模块

> ID：12759484
> 
> 赞同：1
> 
> 时间：2012-10-06T11:46:09.797
> 
> 标签：php, view, hook, block, alter

我正在尝试扩展*Mytiny* todo 模块。基本上，我想再添加两个字段，例如带有验证的重复和 url 字段。但是当我尝试使用 时`hook_block_view_alter()`，字段显示在块之外，而我想在任务表单字段中显示它。我正在尝试添加字段：

```
<?php
function todo_block_view_alter(&$data, $block)
{
dsm($block);
if (is_array($data['content']) && $block->module == 'system') {
$data = array();
$data['content'] ['name'] = array(
'#type' => 'textfield',
'#title' => 'Your Name',
'#size' => 60,
'#required' => TRUE,

);
}
} 
```

如果有人有答案，请尽快给我解决方案。

提前谢谢你。

# iphone - 按下快门后立即保存图像 iOS

> ID：12759486
> 
> 赞同：0
> 
> 时间：2012-10-06T11:46:15.623
> 
> 标签：iphone, ios, xcode, camera, shutter

以下方法可用的默认相机选择器行为如下：在用户按下快门按钮后，他们会看到一个预览，以及两个按钮，Retake 和 Use。

```
UIImagePickerController *picker = [[UIImagePickerController alloc] init];
picker.sourceType = UIImagePickerControllerSourceTypeCamera; 
```

**相反，我想模仿 iOS 默认相机工具的行为，即一旦拍摄图像，我希望将其保存，然后快门立即再次可用。**

这很简单，还是我需要使用 cameraOverlayView 属性和触发快门的自定义方法编写自定义工具栏？

```
picker.cameraOverlayView = [[UIView alloc] init];
[picker.cameraOverlayView addSubview:bottomToolBar]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T14:42:20.823

似乎我需要做的是创建一个 UIView 的实例，如下所示，它可以工作。

```
picker.cameraOverlayView = [[UIView alloc] initWithFrame:CGRectMake(
                                                  0, 0, 640, 960)]; 
```

对于我的实验，我刚刚创建了一个 UIButton，它以一个名为 takePicture 的方法为目标。takePicture 调用 [picker takePicture]; 反过来调用 imagePickerController:didFinishPickingImage:editingInfo: 通过委托调用 UIImageWriteToSavedPhotosAlbum(image,nil,nil,nil);。选择器没有被解雇，所以我可以继续拍照。

# php - MySQL 搜索 PHP 脚本

> ID：12759490
> 
> 赞同：-1
> 
> 时间：2012-10-06T11:46:41.237
> 
> 标签：php, mysql, search

我想创建一个脚本来搜索 MySQL 表（数据）。该表有两列（ID 和 PRICE）。搜索必须通过 ID 完成，价格必须显示在页面中，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T11:51:25.037

查询将是

```
select price from table_name where id = your_id 
```

# ruby - 在 IRB 中调用 bash 函数

> ID：12759491
> 
> 赞同：2
> 
> 时间：2012-10-06T11:46:47.803
> 
> 标签：ruby, bash

如果我在 shell 控制台下运行自定义 bash 函数：

```
~/w/dotfiles/ruby [g:master-] ¶ repository_root
/Users/tian/Documents/workspace/dotfiles 
```

如果我在 IRB 下运行自定义 bash 函数：

```
irb(main):001:0> `repository_root`
(irb):1: command not found: repository_root
=> "" 
```

我怎样才能在 IRB 中得到相同的结果？

```
# declare
repository_root () {
    if git_is_repository ; then
        git_show_repository_root
    fi
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T19:03:31.960

假设您的函数在您的一个 bash 配置文件中，您希望启动一个交互式 ( `-i`) 登录 ( `-l`) shell 来执行 ( `-c`) 您的函数：

```
output = %x{bash -lic 'repository_root'} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T13:34:00.993

一种方法是从函数中发出命令。

这是一个简短的操作方法

1.  创建一个调用该函数的 shell 脚本文件。
2.  在您的目录中创建一个`.bin`目录`HOME`并将其添加`$PATH`到`.bash_rc`.
3.  将 shell 脚本文件放在`.bin`.
4.  `source .bash_rc`更新`$PATH`您刚刚更改的变量。
5.  假设您命名了文件`fnx`，只需使用反引号运算符或`exec`运行命令 -`exec("fnx")`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T12:56:46.717

在哪里`repository_root`声明？

.bash_profile？.bashrc？

在使用之前尝试获取该文件`repository_root`

```
`. /path/to/file/declaring/repository_root; repository_root` 
```

# ios6 - 函数 `CGCMSUtilsGetICCProfileDataWithRenderingIntent' 已过时。为什么这个解决方案有效？

> ID：12759492
> 
> 赞同：0
> 
> 时间：2012-10-06T11:46:48.877
> 
> 标签：ios6

我正在维护一些其他人编写的代码，当我在 Xcode 4.5 上构建并在 iOS 6 上运行时，我得到了这个运行时“错误”

```
<Error>: The function `CGCMSUtilsGetICCProfileDataWithRenderingIntent' is obsolete and will be removed in an upcoming update. Unfortunately, this application, or a library it uses, is using this obsolete function, and is thereby contributing to an overall degradation of system performance. Please use `CGColorSpaceCopyICCProfile' instead. 
```

执行此代码时：

```
CGColorSpaceRef alternate   = CGColorSpaceCreateDeviceRGB();               
NSString *iccProfilePath = [[NSBundle mainBundle] pathForResource:@"sRGB Profile" ofType:@"icc"];
NSData *iccProfileData = [NSData dataWithContentsOfFile:iccProfilePath];
CGDataProviderRef iccProfile = CGDataProviderCreateWithCFData((CFDataRef)iccProfileData);

const CGFloat range[] = {0,1,0,1,0,1}; // min/max of the three components
CGColorSpaceRef colorSpace = CGColorSpaceCreateICCBased(3, range, iccProfile, alternate);

CGContextRef context = CGBitmapContextCreate(NULL, pageWidth, pageHeight, bitsPerComponent, bytesPerRow, colorSpace, kCGImageAlphaPremultipliedLast);

CGDataProviderRelease(iccProfile);

CGColorSpaceRelease(colorSpace);
CGColorSpaceRelease(alternate); 
```

当我在 iOS 5.1 上运行时没有错误。

我发现通过进行以下更改不会出现错误：

改变：

```
NSString *iccProfilePath = [[NSBundle mainBundle] pathForResource:@"sRGB Profile" ofType:@"icc"];
NSData *iccProfileData = [NSData dataWithContentsOfFile:iccProfilePath];
CGDataProviderRef iccProfile = CGDataProviderCreateWithCFData((CFDataRef)iccProfileData); 
```

至：

```
char fname[]= "sRGB Profile.icc";
CGDataProviderRef iccProfile = CGDataProviderCreateWithFilename(fname); 
```

我找不到任何对已弃用的**CGDataProviderCreateWithCFData**的引用。谁能解释问题的原因？似乎**CGDataProviderCreateWithCFData**正在使用**CGCMSUtilsGetICCProfileDataWithRenderingIntent**并且**CGDataProviderCreateWithFilename**正在使用**CGColorSpaceCopyICCProfile**，这表明**CGDataProviderCreateWithCFData**已被弃用。我对找到的解决方案感到不舒服，因为我不明白这一点。另外，我希望该解决方案对某人有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T21:47:03.497

因此，您将 sRGB 颜色配置文件附加到应用程序资源，然后在 iOS 运行时显式创建 sRGB 颜色配置文件。有必要吗？该文档似乎表明设备 RGB 实际上是 sRGB 颜色空间：

[Apple WWDC 色彩管理讲座](http://www.pupuweb.com/blog/wwdc-2012-session-523-practices-color-management-ken-greenebaum-luke-wallis/)

如果我们可以调用：

```
colorspace = CGColorSpaceCreateWithName(kCGColorSpaceSRGB); 
```

但这似乎在 iOS 上也不受支持。

# android - adb 找不到我的设备

> ID：12759495
> 
> 赞同：0
> 
> 时间：2012-10-06T11:47:10.797
> 
> 标签：android, device, adb, device-driver

我正在从 Eclipse 开发一个 android 应用程序，将我的 Acer ICONIATAB A 500 与 Android 3.0.1 连接起来。我没有任何问题。

现在我正在尝试在 Acer ICONIATAB A 501 上使用 Android 3.2 开发相同的应用程序，而我的 ADB 找不到新设备，而 Windows 可以找到它！我在我的平板电脑中设置了调试 USB 选项处于活动状态，并在 Windows 上安装了相应的驱动程序。我什至安装了最后一个 Google USB 驱动程序（修订版 7）

我尝试使用命令列出设备查找表单 adb

```
 adb devices 
```

从命令行，但附加的设备列表为空。

我能做些什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T11:49:46.353

执行这些行

```
adb kill-server
adb start-server 
```

如果是移动设备，检查设置，开发者选项，调试模式是否选中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-14T22:41:28.007

您需要`LGUnitedMobileDriver`从 LG 网站安装软件包，即使 Windows 7 自动为手机安装了 USB 驱动程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-26T15:58:36.430

尝试在您的计算机上更新您的 Android-SDK（在 Eclipse 或您使用的任何 IDE 中），这帮助我解决了类似的问题。

# c++ - 迭代器错误从非标量类型转换

> ID：12759498
> 
> 赞同：1
> 
> 时间：2012-10-06T11:47:21.610
> 
> 标签：c++, stl, iterator

我必须编写一段代码来从容器 std::list 中删除任何重复项。我测试了不同的方法，但其中一种会产生我不理解的错误。我报告错误的代码：

```
 std::list<clock_t> cList;
  for(int i = 0;i< 5 ; ++i){
    for(int j = 0;j < 1000000 ;++j);
    cList.push_back(generatorClock()());
  }
  cList.sort();
  std::list<clock_t> cListUnique;
  std::list<clock_t>::iterator itEnd1 = **std::unique_copy(cList.begin(),cList.end(),std::back_insert_iterator<std::list<clock_t> >(cListUnique) );** 
```

错误信息是

```
"error: conversion from ‘std::back_insert_iterator<std::list<long int> >’ to non-scalar type ‘std::list<long int>::iterator {aka std::_List_iterator<long int>}’ requested" 
```

为什么我会收到此错误？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T12:13:28.607

我假设将`**`它们放在那里是为了指示错误的产生位置，而不是实际来源的一部分。Using`**`在 C++ 中是一个糟糕的选择，因为它通常用于取消引用迭代器或指针。

也就是说，`std::unique_copy()`返回一个指示写入序列结束的迭代器。你正在写一个与 a`std::back_insert_iterator<std::list<clock_t> >`没有任何关系的 a，`std::list<clock_t>::iterator`即使它`std::back_insert_iterator<std::list<clock_t> >`是一个相同类型的列表。此外，您实际上并不需要它：您`cListUnique`将包含相应的唯一元素序列。这不像`std::unique()`您需要结束迭代器知道在哪里使用例如`erase()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T12:13:15.567

[unique_copy](http://www.sgi.com/tech/stl/unique_copy.html)的返回类型：

```
OutputIterator unique_copy(InputIterator first, InputIterator last, OutputIterator result); 
```

是`OutputIterator`。

尝试：

```
std::back_insert_iterator< std::list< int > > itEnd1 = std::unique_copy( cList.begin(), cList.end(), std::back_insert_iterator< std::list< int > >( cListUnique ) ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-16T22:26:50.510

`std::unique_copy`必须回来`std::back_insert_iterator`

因此，您应该尝试使用 back_insert_iterator，而不仅仅是迭代器：

```
std::list<clock_t>::back_insert_iterator itEnd1 = ... 
```

该错误基本上是它试图将 back_insert_iterator 分配给迭代器的 iAn。

# autotools - 在 autotools 项目中使用上层目录

> ID：12759499
> 
> 赞同：0
> 
> 时间：2012-10-06T11:47:37.230
> 
> 标签：autotools

我有一个具有以下结构的项目存储库：

```
回购/
  配置.ac
  生成文件.am
  项目1/
    配置.ac
    生成文件.am
    [来源]
  项目2/
    配置.ac
    生成文件.am
    [来源]
  项目3/
    配置.ac
    生成文件.am
    [来源]

```

现在我需要将目录（比如说`common_logic/`）添加到`repo/`并以某种方式修改`project1`并`project2`使用来自`common_logic`.

我可以看到的解决方案之一是在执行 Makefile.am`../common_logic/`之后`./configure`（或之前）复制`project1/`Makefile.am 以下行：

```
project1_la_CFLAGS += -I./common_logic

project1_la_SOURCES += ./common_logic/foo.h ./common_logic/foo.c

```

在这种情况下，既没有`make`也没有`make dist`被打破。然而，它对我来说就像一个拐杖。

`project1`无论如何，你能告诉我应该如何`project2`修改以使用新创建的文件夹吗？或者指出另一个解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T15:26:03.657

也许最好从以下位置构建一个便利库`common_logic`：

```
noinst_LTLIBRARIES = libcommonlogic.la
libcommonlogic_la_SOURCES = foo.c foo.h 
```

然后，在`project1`'s `Makefile.am`：

```
project1_la_LIBADD = ../common_logic/libcommonlogic.la 
```

# python - 处理python项目和文件组织

> ID：12759505
> 
> 赞同：2
> 
> 时间：2012-10-06T11:48:06.263
> 
> 标签：python

我正在不同的 .py 文件（例如 DisplayTools.py、CollectionTools.py...）中开发 python 函数，以便将它们作为工具导入到更通用的文件 Start.py 中。如果所有文件都在同一个目录中，它工作正常。我可以在 Start.py 中说“导入 DisplayTools”......但是如何以更项目的方式和更用户友好的方式组织它们（他们只需要在 Start.py 文件上工作）。例如有这样一个文件组织：

*   项目/

    启动.py

    *   工具/

        显示工具.py

        收集工具.py

我已经阅读了`__init__`文件的使用，但它们是如何工作的，将这些文件放在哪里以及它们包含什么？

如果您有一些帮助，请以这种方式组织我的项目。

非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T12:16:39.510

我会稍微重构您的代码组织，并给您的顶级目录一个更具描述性的名称。今天，我挑`happy_bananas`。因此，假设您像这样组织文件：

```
happy_bananas
   start.py
   DisplayTools.py
   CollectionTools.py 
```

那么你需要做的就是添加一个空`__init__.py`文件，你可以像使用任何其他包一样使用它，例如：

```
happy_bananas
   __init__.py
   start.py
   DisplayTools.py
   CollectionTools.py 
```

现在，如果你能做到：

`from happy_bananas import DisplayTools`

就像你以前一样。

现在，要将其安装到您的系统中，您需要将其打包并使用安装脚本。您可以使用Zed Shaw 的[Learn Python The Hard Way 练习 46](http://learnpythonthehardway.org/book/ex46.html)`distutils`来执行此操作，或者`setuptools`可能是现有最简单的关于如何执行此操作的描述。您真的可以按照那里的描述复制/粘贴这些文件，并最终得到如下目录结构：

```
happy_bananas
   setup.py
   tests
       test_happy_bananas.py
   happy_bananas
       __init__.py
       start.py
       DisplayTools.py
       .
       . 
```

然后，当您编写好安装脚本后，您可以进入您的文件夹并运行`python setup.py install`（或`python setup.py develop`）并能够`import happy_bananas`在任何文件中运行。

在单独的注释中，python 中的命名约定是使用蛇形大小写文件和函数名。因此`DisplayTools.py`，与其重命名，不如将其重命名`display_tools.py`。CamelCase 通常只保留给类名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T12:45:13.200

Well for starters i would simply change my files to have a set of functions and some main code since the files could also be executed.

For example:

```
if __name__ == "__main__":
    dosomething() 
```

Then in the main, you simply import the other scripts and you can use the functions used there without actually running the script.

# c# - 多个 WPF 列表框，一次只选择一个项目

> ID：12759507
> 
> 赞同：8
> 
> 时间：2012-10-06T11:48:07.470
> 
> 标签：c#, wpf, mvvm, binding, listbox

我正在使用 MVVM 并在一个窗口上显示两个列表框。我同时从这两个列表框绑定到不同的字段，分别称为 A 和 B。然后 A 和 B 都在修改 C。为了完成这项工作，我只想同时从两个列表框 IsSelected 中获得一个项目，以便 A当 B IsSelected 时不会覆盖 C。我该如何限制这个？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-06T16:24:07.753

我可以想到几种方法来做到这一点。

一种方法是您可以将`ListBox.SelectedIndex`2 个 ListBox 中的一个绑定到更改通知 ViewModel 属性。

例如在您的视图中：

```
<ListBox SelectedIndex="{Binding SelectedIndexA}">
     <ListBoxItem Content="Item 1"/>
     <ListBoxItem Content="Item 2"/>
</ListBox>
<ListBox SelectedIndex="{Binding SelectedIndexB}">
     <ListBoxItem Content="Item 1"/>
     <ListBoxItem Content="Item 2"/>
</ListBox> 
```

在您的 ViewModel 中：

```
public int SelectedIndexA
{
    get { return _selectedIndexA; }
    set
    {
        _selectedIndexA = value;
        _selectedIndexB = -1;
        OnPropertyChanged("SelectedIndexB");
    }
}

public int SelectedIndexB
{
    get { return _selectedIndexB; }
    set
    {
        _selectedIndexB = value;
        _selectedIndexA = -1;
        OnPropertyChanged("SelectedIndexA");
    }
} 
```

另一种方法是使用像“GroupName”这样的附加属性，您可以在其中对选择器（`ListBox`继承自`Selector`）进行分组，以确保`Selector`组中任何时候只有一个具有选定项。

例如：

```
public static class SingleSelectionGroup
{
    public static readonly DependencyProperty GroupNameProperty =
        DependencyProperty.RegisterAttached("GroupName", typeof(string), typeof(SingleSelectionGroup),
                                            new UIPropertyMetadata(OnGroupNameChanged));

    public static string GetGroupname(Selector selector)
    {
        return (string) selector.GetValue(GroupNameProperty);
    }

    public static void SetGroupName(Selector selector, string value)
    {
        selector.SetValue(GroupNameProperty, value);
    }

    private static void OnGroupNameChanged(DependencyObject dependencyObject, DependencyPropertyChangedEventArgs e)
    {
        var selector = (Selector) dependencyObject;

        if (e.OldValue != null)
            selector.SelectionChanged -= SelectorOnSelectionChanged;
        if (e.NewValue != null)
            selector.SelectionChanged += SelectorOnSelectionChanged;
    }

    private static void SelectorOnSelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        if (e.AddedItems.Count == 0)
            return;

        var selector = (Selector) sender;
        var groupName = (string) selector.GetValue(GroupNameProperty);
        var groupSelectors = GetGroupSelectors(selector, groupName);

        foreach (var groupSelector in groupSelectors.Where(gs => !gs.Equals(sender)))
        {
            groupSelector.SelectedIndex = -1;
        }
    }

    private static IEnumerable<Selector> GetGroupSelectors(DependencyObject selector, string groupName)
    {
        var selectors = new Collection<Selector>();
        var parent = GetParent(selector);
        GetGroupSelectors(parent, selectors, groupName);
        return selectors;
    }

    private static DependencyObject GetParent(DependencyObject depObj)
    {
        var parent = VisualTreeHelper.GetParent(depObj);
        return parent == null ? depObj : GetParent(parent);
    }

    private static void GetGroupSelectors(DependencyObject parent, Collection<Selector> selectors, string groupName)
    {
        var childrenCount = VisualTreeHelper.GetChildrenCount(parent);
        for (int i = 0; i < childrenCount; i++)
        {
            var child = VisualTreeHelper.GetChild(parent, i);
            var selector = child as Selector;
            if (selector != null && (string) selector.GetValue(GroupNameProperty) == groupName)
                selectors.Add(selector);

            GetGroupSelectors(child, selectors, groupName);
        }
    }
} 
```

在你看来：

```
<ListBox my:SingleSelectionGroup.GroupName="Group A">
    <ListBoxItem Content="Item 1 (Group A)"/>
    <ListBoxItem Content="Item 2 (Group A)"/>
</ListBox>
<ListBox my:SingleSelectionGroup.GroupName="Group A">
    <ListBoxItem Content="Item 1 (Group A)"/>
    <ListBoxItem Content="Item 2 (Group A)"/>
</ListBox>

<ListBox my:SingleSelectionGroup.GroupName="Group B">
    <ListBoxItem Content="Item 1 (Group B)"/>
    <ListBoxItem Content="Item 2 (Group B)"/>
</ListBox>
<ListBox my:SingleSelectionGroup.GroupName="Group B">
    <ListBoxItem Content="Item 1 (Group B)"/>
    <ListBoxItem Content="Item 2 (Group B)"/>
</ListBox> 
```

如果您必须在突出显示某个项目之前单击它两次，您可以使用如下快速解决方法：

```
<Style TargetType="ListBoxItem">
    <Style.Triggers>
        <EventTrigger RoutedEvent="GotKeyboardFocus">
            <BeginStoryboard>
                <Storyboard>
                    <BooleanAnimationUsingKeyFrames Storyboard.TargetProperty="(ListBoxItem.IsSelected)">
                        <DiscreteBooleanKeyFrame KeyTime="00:00:00" Value="True" />
                    </BooleanAnimationUsingKeyFrames>
                </Storyboard>
            </BeginStoryboard>
        </EventTrigger>
    </Style.Triggers>
</Style> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-03-05T20:53:42.593

如果有人在 ItemsControl 中使用过 ListBox/ListView 并**在使用上述答案后**遇到以下问题：

1.  当您单击 listbox1 中的任何项目时，该项目被选中。
2.  当您单击 listbox2 中的任何项目时，未选择 listbox1 的选定项目，但未选择 listbox2 中的任何项目。
3.  当您再次单击 listbox2 中的任何项目时，该项目被选中。

只需将以下 xaml 添加到 ListBoxItem 的样式中：

```
<Style  TargetType="ListBoxItem">
    <Style.Triggers>
        <Trigger Property="IsKeyboardFocusWithin" Value="True">
             <Setter Property="IsSelected" Value="True"></Setter>
        </Trigger>
    </Style.Triggers>
</Style> 
```

此外，如果有人**在使用上述答案中的代码后**出现以下错误：

```
GroupName is already registered by Selector 
```

请将`third parameter typeof(......)`依赖属性声明更改**为您的类的名称**。

# iphone - ARC 会释放 ViewdidLoad 方法中分配的内存吗？

> ID：12759509
> 
> 赞同：0
> 
> 时间：2012-10-06T11:48:20.830
> 
> 标签：iphone, ios, ipad

当我通过编辑中的重构将非弧项目转换为启用ARC的项目时，删除了dealloc方法中的释放方法并将保留关键字更改为强。但是我已经在viewdidload方法中分配了合成强变量。

它会自动释放吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T11:50:13.867

当您删除该视图集时`thatObject = nil;`

它会自动释放它。

希望能帮助到你..

# asp.net - 为什么回发不适用于下拉框

> ID：12759511
> 
> 赞同：-1
> 
> 时间：2012-10-06T11:48:37.413
> 
> 标签：asp.net, autopostback

我想在页面重新加载后保留选定的项目：

.aspx 的节选：

```
 <asp:DropDownList ID="MyDropDown" runat="server" AutoPostBack="true" 
        onselectedindexchanged="MyDropDown_SelectedIndexChanged">

    </asp:DropDownList> 
```

摘自 page_load 中的 .cs

```
 if (!IsPostBack)
        {
            PopulateDropDownList();
        } 
```

和

```
 private void PopulateDropDownList()
    {
        MyDropDown.Items.Add("1");
        MyDropDown.Items.Add("2");
    }

    protected void MyDropDown_SelectedIndexChanged(object sender, EventArgs e)
    {
        Response.Redirect(Request.RawUrl);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T11:51:05.163

Response.Redirect 刷新页面，您将失去选择索引的视图状态。您可以在重定向之前将所选索引放入会话中。

```
protected void MyDropDown_SelectedIndexChanged(object sender, EventArgs e)
{
    Session["MyDropDownSelectedIndex"] = MyDropDown.SelectedIndex.ToString();
    Response.Redirect(Request.RawUrl);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T11:52:13.327

您需要在 Page init 事件中填充下拉列表。如果您在页面加载事件期间这样做，则无法正确恢复视图状态（因为在页面加载事件之前未填充下拉列表），因此无法触发 on selected index changed 事件。

编辑：您可能希望缓存填充下拉列表的数据，以节省一些绕行到数据库的行程。我认为您也不需要在 on selected index changed 事件中重定向。

# asp.net-mvc-3 - 网站管理工具：无法连接到 SQL Server 数据库

> ID：12759513
> 
> 赞同：1
> 
> 时间：2012-10-06T11:48:50.560
> 
> 标签：asp.net-mvc-3, website-admin-tool

我正在开发一个 ASP.NET MVC3 应用程序，使用

1.  微软 SQL Server 专业版 2008
2.  微软 VS 2010 专业版
3.  实体框架作为模型类。

当我通过单击解决方案资源管理器中的 ASP.NET 配置启动 ASP.NET 网站管理工具时，在安全选项卡中显示错误：

**无法连接到 SQL Server 数据库。**

C:\Windows\Microsoft.NET\Framework\v4.0.30319\Config\machine.config 有一个连接字符串，

```
<connectionStrings>
        <add name="LocalSqlServer" connectionString="data   source=.\MSSQLSERVER;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true" providerName="System.Data.SqlClient"/>
</connectionStrings> 
```

我打开了 C:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet_regsql.exe 并配置数据库默认名为“aspnetdb”。但情况并没有得到改善。所以，请你帮我解决它。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T11:56:57.233

Have you tried the database server that **Visual Studio** attempts to use?

It should match the one specified in your **web.config** file.

To check to go: **Tools -> Options -> Database Tools -> Design-time Validation Database.**

You can then change the SQL Server instance which is used.

# java - Java - 将继承的变量设为私有

> ID：12759514
> 
> 赞同：0
> 
> 时间：2012-10-06T11:49:20.017
> 
> 标签：java, inheritance, access-modifiers, private-members

我需要将继承的实例变量设为私有；这可能吗？

IE，超类“实体”有一个 int 实例变量“健康”。

子类“僵尸”（扩展“实体”）如何从实体继承健康变量，并将其私有化？我不希望其他类能够直接访问健康变量，我想要为其设置和获取方法。

如果我不够具体，请告诉我；任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T11:51:02.667

简单地说：你不能。

这将打破超类的合同。你的类，作为一个`Entity`，像它的超类一样，暴露了一个名为 的字段`health`。如果您有能力将其设为私有，则在实例`Entity`（包括实体子类的实例）中使用此字段的所有代码都会与您的类中断......

如果可以，请更改超类（即`Entity`）以使该字段为私有。这是常见的做法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T11:51:26.863

您不能降低子类中超类的任何实例变量或方法的可见性。

假设您有一个带有`public method`.. 的超级类，并且假设您被允许降低`private`对子类的可见性..

然后看看当你创建这样的对象并访问超类的方法时会发生什么： -

```
SuperClass obj = new SubClass();
obj.pubMethod(); 
```

现在，**在编译时**，编译器看到该方法`pubMethod()`是 public in `SuperClass`，它将允许访问。请注意，它不会检查`instance type`RHS 上的 ..

现在，**在运行时**，当 JVM 检查实例是否属于 时`SubClass`，它将尝试调用的实际方法将在`SubClass`..

**但是等等**.. 你有没有看到当你去`JVM`搜索`pubMethod`时发生了什么......`SubClass``private`

 **这就是为什么它是不允许的。。

因此，您不能将其设为私有..

从[JLS](http://docs.oracle.com/javase/specs/jls/se5.0/html/classes.html)部分 - 8.4.8.3： -

> 覆盖或隐藏方法的访问修饰符（第 6.6 节）必须提供至少与覆盖或隐藏方法一样多的访问权限，否则会发生编译时错误。更详细地说：
> 
> *   如果被覆盖或隐藏的方法是公开的，那么覆盖或隐藏的方法必须是公开的；否则，会发生编译时错误。
>     
>     
> *   如果被覆盖或隐藏的方法是受保护的，那么覆盖或隐藏的方法必须是受保护的或公开的；否则，会发生编译时错误。
>     
>     
> *   如果被覆盖或隐藏的方法具有默认（包）访问权限，则覆盖或隐藏方法不能是私有的；否则，会发生编译时错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-06T11:53:10.527

在超类中将变量设为私有，并让所有子类使用访问器方法。

第二种选择是将其设置为包私有，并将您想要拒绝访问的那些类安排在另一个包中。如果您的 Zombie 与 Entity 特别接近（共享许多内部结构），而其他类与其超类的耦合更松散，这将是有意义的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-06T11:54:12.250

您不能对子类中的实例变量添加限制，即 of `health`is `protected`in`Enitity`它不能`private`在其中`Zombie`（您可以 make it `public`）。

但是，您可以`private`在其中创建健康`Entity`并定义一个`protected`getter 和 setter。子类可以使用这些方法。**

# ruby - 未定义符号：运行捆绑安装时的 SSLv2_method

> ID：12759518
> 
> 赞同：8
> 
> 时间：2012-10-06T11:50:29.307
> 
> 标签：ruby, rvm, bundler, sslv2

运行 bundler 安装我的 gem 时出现此错误。我环顾四周，除了在 r​​vm 上安装 openssl pkg 并重新安装所有 rubies 外，没有找到解决方案，这样做并没有解决问题，还有其他可能的解决方案吗？

这是我运行捆绑安装的输出：

```
Fetching gem metadata from https://rubygems.org/.Unfortunately, a fatal error has occurred. Please see the Bundler 
troubleshooting documentation at http://bit.ly/bundler-issues. Thanks! 
/home/octavius/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': /home/octavius/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/x86_64-linux/openssl.so: undefined symbol: SSLv2_method - /home/octavius/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/x86_64-linux/openssl.so (LoadError)
    from /home/octavius/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /home/octavius/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/openssl.rb:17:in `<top (required)>'
    from /home/octavius/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /home/octavius/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /home/octavius/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/net/https.rb:22:in `<top (required)>'
    from /home/octavius/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /home/octavius/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /home/octavius/.rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.2.1/lib/bundler/vendor/net/http/persistent.rb:447:in `ssl'
    from /home/octavius/.rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.2.1/lib/bundler/vendor/net/http/persistent.rb:216:in `connection_for'
    from /home/octavius/.rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.2.1/lib/bundler/vendor/net/http/persistent.rb:358:in `request'
    from /home/octavius/.rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.2.1/lib/bundler/fetcher.rb:149:in `fetch'
    from /home/octavius/.rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.2.1/lib/bundler/fetcher.rb:177:in `fetch_dependency_remote_specs'
    from /home/octavius/.rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.2.1/lib/bundler/fetcher.rb:135:in `fetch_remote_specs'
    from /home/octavius/.rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.2.1/lib/bundler/fetcher.rb:73:in `specs'
    from /home/octavius/.rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.2.1/lib/bundler/source.rb:234:in `block in remote_specs'
    from /home/octavius/.rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.2.1/lib/bundler/source.rb:232:in `each'
    from /home/octavius/.rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.2.1/lib/bundler/source.rb:232:in `remote_specs'
    from /home/octavius/.rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.2.1/lib/bundler/source.rb:165:in `fetch_specs'
    from /home/octavius/.rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.2.1/lib/bundler/source.rb:70:in `specs'
    from /home/octavius/.rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.2.1/lib/bundler/lazy_specification.rb:53:in `__materialize__'
    from /home/octavius/.rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.2.1/lib/bundler/spec_set.rb:86:in `block in materialize'
    from /home/octavius/.rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.2.1/lib/bundler/spec_set.rb:83:in `map!'
    from /home/octavius/.rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.2.1/lib/bundler/spec_set.rb:83:in `materialize'
    from /home/octavius/.rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.2.1/lib/bundler/definition.rb:113:in `specs'
    from /home/octavius/.rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.2.1/lib/bundler/definition.rb:108:in `resolve_remotely!'
    from /home/octavius/.rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.2.1/lib/bundler/installer.rb:81:in `run'
    from /home/octavius/.rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.2.1/lib/bundler/installer.rb:14:in `install'
    from /home/octavius/.rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.2.1/lib/bundler/cli.rb:230:in `install'
    from /home/octavius/.rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.2.1/lib/bundler/vendor/thor/task.rb:27:in `run'
    from /home/octavius/.rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.2.1/lib/bundler/vendor/thor/invocation.rb:120:in `invoke_task'
    from /home/octavius/.rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.2.1/lib/bundler/vendor/thor.rb:275:in `dispatch'
    from /home/octavius/.rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.2.1/lib/bundler/vendor/thor/base.rb:408:in `start'
    from /home/octavius/.rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.2.1/bin/bundle:14:in `block in <top (required)>'
    from /home/octavius/.rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.2.1/lib/bundler/friendly_errors.rb:4:in `with_friendly_errors'
    from /home/octavius/.rvm/gems/ruby-1.9.3-p125@global/gems/bundler-1.2.1/bin/bundle:14:in `<top (required)>'
    from /home/octavius/.rvm/gems/ruby-1.9.3-p125@global/bin/bundle:19:in `load'
    from /home/octavius/.rvm/gems/ruby-1.9.3-p125@global/bin/bundle:19:in `<main>'
    from /home/octavius/.rvm/gems/ruby-1.9.3-p125/bin/ruby_noexec_wrapper:14:in `eval'
    from /home/octavius/.rvm/gems/ruby-1.9.3-p125/bin/ruby_noexec_wrapper:14:in `<main>' 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-07T04:26:49.553

我做了以下事情，它解决了这个问题：

```
$ source ~/.rvm/scripts/rvm
$ rvm pkg install zlib
$ rvm pkg install openssl
$ sudo apt-get install libreadline-dev
$ rvm pkg install readline
$ rvm install 1.9.3 --with-openssl-dir=$rvm_path/usr
$ gem install rails 
```

# android - 如何在 android 4.0 mini pc 中完全隐藏组合栏或状态栏？

> ID：12759521
> 
> 赞同：0
> 
> 时间：2012-10-06T11:50:32.557
> 
> 标签：android, android-4.0-ice-cream-sandwich

如何以编程方式隐藏 android 4.0 mini pc 组合栏或状态栏？

我正在使用下面的代码，但它不起作用。

```
protected void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);

  requestWindowFeature(Window.FEATURE_NO_TITLE);
  this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T04:37:13.027

转到设置->显示->隐藏状态栏勾选隐藏

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T12:12:49.833

只需`android:theme="@android:style/Theme.NoTitleBar.Fullscreen"`在清单文件中为您的活动设置属性。有时，程序化的窗口操作会变得混乱。试试这个。

# php - Html2pdf 不支持 word-break:break-all css

> ID：12759523
> 
> 赞同：8
> 
> 时间：2012-10-06T11:50:47.337
> 
> 标签：php, word-wrap, html2pdf, word-break

大家好，我正在使用 html2pdf，它不支持 word-break:break-all css 有什么想法吗？

例子

```
 <td style="width:30%;word-break:break-all ;">
      testtestetstetstetstetstettstetstetstetstetstetstetstetstetstetstets
    </td> 
```

输出 pdf 宽度大于 30%，如字符串长度大小

输出pdf：testtestteststestttestttestttesttstetsttestttestttestttestttestttesttsets

我想要输出：

测试
测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-08T12:24:59.103

嗯，这很复杂。您的测试字符串太长，但不是由多个单词组成。这意味着断词不起作用，因为没有任何词可以断。显然，这很可能只是一个示例，在这种情况下，可能是 html2pdf 不支持相对宽度 and `word-break`，因此您可以尝试使用绝对宽度 and `word-break`。

也就是说，这是我知道会起作用的东西：PHP 中的自动[换行。](http://nl.php.net/wordwrap)因此，`echo $yourvar;`您可以使用`echo wordwrap($yourvar, 75, "\n", true)`instead 代替，它*总是*会切断字符串，即使它只是一根长字符串。让字符数与您正在寻找的宽度相匹配需要一些麻烦，但它会起作用。

```
<?php
$foo = str_repeat('test',12);
echo wordwrap($foo, 20, '<br />', true); 
```

输出：

```
testtesttesttesttest
testtesttesttesttest
testtest 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-14T20:04:04.343

尝试这个;

```
<td style="width:30%; word-wrap:break-word;">
   testtestetstetstetstetstettstetstetstetstetstetstetstetstetstetstets
</td> 
```

不是`word-break`这样`word-wrap`；

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-11T22:37:26.333

如果您希望长字符串始终包裹在边界容器中，我认为您应该能够通过**在原始字符串的每个字母之间****插入[零宽度空格字符](http://www.fileformat.info/info/unicode/char/200b/index.htm)（`&#8203;`或`\xe2\x80\x8b`**）来完成此操作。这将具有换行的效果，就好像每个字符都是它自己的单词一样，但不会向最终用户显示空格。这可能会给最终产品的文本搜索或索引带来麻烦，但从美学的角度来看，它应该可靠地完成任务。

因此：

```
testtestetstetstetstetstettstetstetstetstetstetstetstetstetstetstets 
```

变成

```
t&#8203;e&#8203;s&#8203;t&#8203;t&#8203;e&#8203;s&#8203;t&#8203;e&#8203;t&#8203;s&#8203;t&#8203;e&#8203;t&#8203;s&#8203;t&#8203;e&#8203;t&#8203;s&#8203;t&#8203;e&#8203;t&#8203;s&#8203;t&#8203;e&#8203;t&#8203;t&#8203;s&#8203;t&#8203;e&#8203;t&#8203;s&#8203;t&#8203;e&#8203;t&#8203;s&#8203;t&#8203;e&#8203;t&#8203;s&#8203;t&#8203;e&#8203;t&#8203;s&#8203;t&#8203;e&#8203;t&#8203;s&#8203;t&#8203;e&#8203;t&#8203;s&#8203;t&#8203;e&#8203;t&#8203;s&#8203;t&#8203;e&#8203;t&#8203;s&#8203;t&#8203;e&#8203;t&#8203;s&#8203;t&#8203;e&#8203;t&#8203;s 
```

（显示：“t​e​s​t​t​e​s​t​e​t​s​t​e​t​s​t​e​t​s​t​e​t​s t e t t t s t e t s t s t s t s t s t s t s t s t s t s s t s T E T E T S T E T E T S T E T S T S T E T S T S T S

因此，如果您包装它，它将完全包装到其容器的边界。**[这是一个小提琴的例子](http://jsfiddle.net/cs7aW/)**。

只需编写一个 PHP 脚本来循环字符串并插入空格：

```
$string="testtestetstetstetstetstettstetstetstetstetstetstetstetstetstetstets";
$new_string = "";
for($i=0;$i<strlen($string);$i++){
   if ($string[$i]==' ' || $string[$i+1]==' '){ //if it is a space or the next letter is a space, there's no reason to add a break character
      continue;
   }
   $new_string .= $string[$i]."&#8203;";
}
echo $new_string 
```

这是一个特别好的解决方案，因为与 不同的是`wordwrap()`，它会自动调整非固定宽度的字体（基本上是实际使用的字体的 99%）。

同样，如果您需要生成的 PDF 可搜索，这不是一个好方法，但它会让它*看起来*像您想要的那样。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-12T07:08:15.597

您只需在代码中使用 substr 函数。我为此举了一个例子。首先将您的输出放入变量中。

```
$get_value = "testtestetstetstetstetstettstetstetstet";
$first = substr("$get_value",0,3);
$second = substr("$get_value",4,7); 
```

等等。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-12T06:17:56.770

在您的测试中，单词 break 将不起作用，因为单词 break 仅在特定句子中的单词之间起作用。所以你可以使用多个单词的句子，然后尝试使用分词器

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-10-08T12:55:41.147

您可以使用`"\r\n"`打印换行符。确保使用双引号。如果您的字符串在变量中，那么您需要使用字数统计功能并附加此字符串。您还可以使用`PHP_EOL`来避免平台依赖性。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-10-23T12:20:34.750

html2pdf 不支持这个分词：break-all css

参考：[http ://www.yaronet.com/en/posts.php?sl=&h=0&s=151321#0](http://www.yaronet.com/en/posts.php?sl=&h=0&s=151321#0)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-22T07:44:27.667

您可以使用此方法。

```
<?php
$get_value = "testtestetstetstetstetstettstetstetstet";
$first = substr("$get_value",0,3);
$second = substr("$get_value",4,7);
$third = substr("$get_value",8,11);
?> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-08-12T07:21:30.970

我想添加一点自己对 HTML2PDF 和表格的经验。

我使用这个解决方案生成了一个 PDF，其中包含一个填充有交货确认（产品列表）的表格。此类列表可能包含多达数千个产品（行）。

我遇到了单元格中的格式和长字符串问题。第一个问题是，即使我将表格的宽度设置为 100% 和标题 ( `<th>`) 列的宽度（HTML2PDF 不支持`<colgroup>`，因此我无法*全局*定义它），表格也变得太宽 - 有些列超出了可见区域. 我使用`wordwrap()`with`<br />`作为分隔符来分解看起来像是在工作的长字符串。不幸的是，事实证明，如果第一行和最后一行有这么长的字符串，则整个表都将在*前面*加上*空*页。不是一个真正的混蛋，但也不好看。最终的解决方案是（适用于宽度可以超出可见区域的表格）：

*   **以像素为单位设置表格和每一**行 的固定宽度
    *   对于 A4 字母大小，我使用 550 像素的总宽度和默认边距，但您必须稍微调整一下才能在列之间分配宽度
*   在`wordwrap`使用空格或`&#8203;`/`\xe2\x80\x8b`作为分隔符

对于您希望以 100% 的可见区域宽度展开的小表格，可以使用以`%`.

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2014-11-24T21:00:12.053

我认为这个功能是一个跛行的解决方案。

```
function String2PDFString($string,$Length)
    {
    $Arry=explode(" ",$string);
    foreach($Arry as $Line)
        {
        if(strlen($Line)>$Length)
            $NewString.=wordwrap ($Line,$Length," ",true);
        else
            $NewString.=" ".$Line;
        }
    return $NewString;
    } 
```

# c++ - 无法显式调用默认构造函数

> ID：12759524
> 
> 赞同：3
> 
> 时间：2012-10-06T11:50:55.320
> 
> 标签：c++, constructor

> **可能重复：**
> [使用空括号调用默认构造函数时出错](https://stackoverflow.com/questions/180172/error-on-calling-default-constructor-with-empty-set-of-brackets)

为什么下面的代码编译没有问题但是当我换行时

```
MCl<char, a> tryout; 
```

至

```
MCl<char, a> tryout(); 
```

我收到“错误 C2228：'.ea' 左侧必须有类/结构/联合”？tryout() 不是对默认构造函数的调用吗？

这是完整的代码

```
template <class T, T myval> class MCl
{
public:
    T ea;
    MCl() : ea(myval)
    {
    }
};

int main()
{

    const char a = 'e';
    MCl<char, a> tryout;
    // MCl<char, a> tryout();

    cout << tryout.ea;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T11:52:32.937

```
MCl<char, a> tryout(); 
```

声明函数 tryout，它什么也不接收并返回`MCl<char, a>`。

n3337 8.2/1

> 选择是在**参数名称周围带有一组冗余括号的函数声明和以函数样式强制转换作为初始值设定项的对象声明之间进行选择。就像 6.8 中提到的歧义一样，解决方案是将任何可能是声明的构造视为声明。**[ 注意：声明可以通过非函数风格的强制转换、= 表示初始化或删除参数名称周围的多余括号来明确消除歧义。——尾注]

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-06T11:53:16.663

```
MCl<char, a> tryout(); 
```

这无论是作为函数原型还是通过 void 构造函数实例化都是模棱两可的。这种模棱两可已被掩盖为“最令人烦恼的解析”——它甚至在 C++03 标准本身中进行了讨论！

然而，人们往往不会提到 C++11 引入了一种新的语法来通过统一初始化来消除歧义。在这种新语法下，您的实例化`MCl`将表示为：

```
MCl<char, a> tryout{}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T16:07:18.627

声明一个变量；

```
MCl<char, a> tryout;    // uses default constructor if user defined one.
                        // If compiler generated constructor uses value-initialized
                        // of members which for POD types means uninitialized. 
```

是对函数的前向声明（称为试用）：

```
MCl<char, a> tryout(); 
```

您想要的可能是：（对于 C++11 的 C++03，请参阅 Mike Kwan）。

```
MCl<char, a> tryout  = MCl<char, a>(); // uses default constructor if user defined one.
                        // If compiler generated constructor uses zero-initialized
                        // of members which for POD types means 0 is placed in them. 
```

# svg - SVG中的多行可编辑文本区域

> ID：12759527
> 
> 赞同：2
> 
> 时间：2012-10-06T11:51:08.660
> 
> 标签：svg, textarea, multiline

我正在尝试在 SVG 中实现多行可编辑文本字段。[我在http://jsfiddle.net/ca4d3/](http://jsfiddle.net/ca4d3/)中有以下代码：

```
<svg width="1000" height="1000" overflow="scroll">
  <g transform="rotate(5)">
    <rect width="300" height="400" fill="#22DD22" fill-opacity="0.5"/>
  </g>
  <foreignObject x="10" y="10" overflow="visible" width="10000" height="10000"
  requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
    <p style="display:table-cell;padding:10px;border:1px solid red;
    background-color:white;opacity:0.5;font-family:Verdana;
    font-size:20px;white-space: pre;
    word-wrap: normal; overflow: visible; overflow-y: visible;
    overflow-x:visible;" contentEditable="true"
    xmlns="http://www.w3.org/1999/xhtml">

    Write here some text.
    Be smart and select some word.
    If you wanna be really COOL,
    paste here something cool!

    </p>
  </foreignObject>
</svg> 
```

在最新的 Chrome、Safari 和 Firefox 中，代码以某种方式工作，但在 Opera 和 IE 9 中则不行。

目标是：
0) 在最新的 Chrome、Safari、Firefox、Opera 和 IE 中工作，如果可能的话，在某些键盘上工作。
1) 保留空格并且文本仅在换行符上换行（适用于 Chrome、Safari 和 Firefox，但不适用于 Opera 和 IE 9 *）。
2) 文本字段是可编辑的（与 html 中的 textareas 和 contenteditable p 元素一样可靠和稳定）并且高度和宽度被扩展以适合文本（适用于 Chrome、Safari 和 Firefox，但不适用于 Opera 和 IE 9 *） .
3) Texfield 可以在保持文本可编辑性的同时进行转换（旋转、倾斜、翻译）（经过测试的旋转，但不适用于任何浏览器 *）。

*   编辑：[Foreignobject 旋转](http://jsfiddle.net/ca4d3/3/)适用于 Firefox 15.0.1，但不适用于 Safari 5.1.7 (6534.57.2)、Chrome 22.0.1229.79、Opera 12.02、IE 9。在 Mac OS X 10.6.8 上测试。

4）文本字段可以被剪切和屏蔽，但不一定保持文本可编辑性（尚未测试）。

*) 使用上面的代码

这些都可以用flash来实现，但是flash的问题太严重了，不适合我的目的（代码每小改一次，都得用flex重新编译，速度慢，字体大小有限制，跟踪技术是面向像素的，与 em 大小等无关）并且跨平台仍然存在差异。我想尝试一下 SVG！

**猜想：
我可以通过浏览器中当前的 SVG 支持来实现我的目标 0-4 吗？在这种情况下，SVG 2.0 会提供一些帮助吗？**

编辑：将 display:table 更改为 display:table-cell （并添加了新的 jsfiddle），因为 display:table 在第一个文本行上按下箭头时使该字段失去焦点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T21:36:22.077

似乎当编码器说“浏览器”时，接下来的两个词之一是“解决方法”。

因此，一种可能的解决方法是使用 contenteditable p，[将其放在 svg 之上](http://jsfiddle.net/yRH9Y/)并对其进行转换。

如果某些 svg 元素必须位于 contenteditable p 之上，那么我们必须在顶部再添加一个 svg。

这种组合可以通过 phantomjs 渲染为 png/pdf。

如果我们想要 svg 蒙版、剪辑或过滤器，它们在 html-elements 上的任何浏览器都不支持。[所以为了让它们工作，我们必须将可竞争的 p 上的文本转换为路径（使用来自服务器的字体数据或在更完整时使用它](http://fontificate.samlecuyer.com/)获取路径数据客户端）并屏蔽或剪辑这些。

解决方法不是很简单，但 SVG 对可编辑文本区域的支持非常差。[尽管此处](http://www.w3.org/TR/SVGTiny12/text.html#TextAreaElement)和[此处](http://www.w3.org/TR/SVGTiny12/text.html#editable-attribute)的规范相当陈旧，但目前几乎没有在任何浏览器中实现[可编辑文本区域。](http://jsfiddle.net/kWp8X/)Opera 12.02 有某种支持，但有问题：尝试[在此处](http://jsfiddle.net/kWp8X/)使用向上和向下箭头键移动光标。

# php - Magento：没有找到 Mage_Adminhtml_Promo_QuoteController？

> ID：12759528
> 
> 赞同：0
> 
> 时间：2012-10-06T11:51:10.923
> 
> 标签：php, magento-1.7, magento

我正在编写一些代码以可能扩展 Magento 中的某些模块，并且当我编写一个类来扩展 Mage_Adminhtml_Promo_QuoteController 时，我在使用 url: 测试我的类的控制器操作时遇到了一个错误`http://127.0.0.1/magenta_demo/index.php/pricebeat_admin/adminhtml_quote/generatecoupon`。这是我的本地主机

浏览器上输出的错误是：

致命错误：在第 3 行的 /Applications/XAMPP/xamppfiles/htdocs/magenta_demo/app/code/local/Pricebeat/controllers/Adminhtml/QuoteController.php 中找不到类“Mage_Adminhtml_Promo_QuoteController”

但是，当转到我的 IDE 并单击 Mage_Adminhtml_Promo_QuoteController 以从我创建的新类中转到该类时，我没有问题。

这是代码。

```
class Pricebeat_Adminhtml_QuoteController extends Mage_Adminhtml_Promo_QuoteController
{
        public function generateCouponAction(){
            echo 'Hello world. This is just testing.';
            exit;
        }
} 
```

除非我在直接结构上做错了什么，否则代码是否有任何问题，不断给我这个消息？

还有一件事。我检查了我的系统日志，输出的消息是：

2012-10-06T12:00:31+00:00 ERR (3): 警告: include(Mage/Adminhtml/Promo/QuoteController.php) [function.include]: 无法打开流: / 中没有这样的文件或目录Applications/XAMPP/xamppfiles/htdocs/magenta_demo/lib/Varien/Autoload.php 在第 95 行 2012-10-06T12:00:31+00:00 ERR (3): Warning: include() [function.include]: Failed打开“Mage/Adminhtml/Promo/QuoteController.php”以供包含（include_path='/Applications/XAMPP/xamppfiles/htdocs/magenta_demo/app/code/local:/Applications/XAMPP/xamppfiles/htdocs/magenta_demo/app/code/社区：/Applications/XAMPP/xamppfiles/htdocs/magenta_demo/app/code/core:/Applications/XAMPP/xamppfiles/htdocs/magenta_demo/lib:.:/Applications/XAMPP/xamppfiles/lib/php:/Applications/XAMPP/ xamppfiles/lib/php/pear') 在 /Applications/XAMPP/xamppfiles/htdocs/magenta_demo/lib/Varien/Autoload.第 95 行的 php

任何帮助将不胜感激。

多谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T12:23:13.043

好的，我发现了我的问题。这是引用源的链接。[http://prattski.com/2010/06/24/magento-overriding-core-files-blocks-models-resources-controllers/](http://prattski.com/2010/06/24/magento-overriding-core-files-blocks-models-resources-controllers/)

耶稣....

您必须明确包含您要覆盖的控制器类的文件。

# c++ - 在 Windows 中获取安装前缀的最佳方法是什么

> ID：12759529
> 
> 赞同：0
> 
> 时间：2012-10-06T11:51:14.850
> 
> 标签：c++, visual-studio-2010

我正在为 Linux 和 Windows 编译我的东西。在 Linux 上，通常，安装前缀是在编译时确定的，因此所有内容都可以硬编码在可执行文件中。在 Windows 上，我使用标准的 MSVC 安装屏蔽程序，它允许用户更改安装位置。我的问题是程序的 Windows 端口确定此安装前缀的“正确/正确”方式是什么。我是否找到可执行文件的位置，然后减去安装前缀？或者，在安装过程中注册表中有什么东西告诉我在哪里可以找到我的数据文件/等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T13:09:07.970

虽然您可以使用注册表（前提是您的安装设置了适当的密钥，无论是自动设置还是因为您告诉它），但我更喜欢只询问程序本身。使用参数调用[`GetModuleFileName()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683197%28v=vs.85%29.aspx)函数`NULL`以获取可执行文件的路径。

# java - Java：使用 Scanner 时总是收到 NoSuchElementException

> ID：12759534
> 
> 赞同：3
> 
> 时间：2012-10-06T11:51:38.010
> 
> 标签：java, exception, java.util.scanner

我有这个简单的代码：

```
 public class Example {
       public Example() {
          Scanner scanner = new Scanner(System.in);
          int row = scanner.nextInt();   // exception at this line
          scanner.close();
       }

    public static void main(String[] args) {
        Example ex1 = new Example();   // this line successfully operate
        Example ex2 = new Example();   // exception : no such element exception at above line
    }
  } 
```

我不知道为什么当代码运行到 ex2 时我总是收到此异常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T12:00:16.887

你应该在调用scanner.nextInt()之前添加if(Scanner.hasNext()); 您有例外，因为没有发现要读取的 int 。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-07T08:26:30.990

问题是因为您关闭了`Scanner`which 又关闭了底层`InputStream`（在本例中为标准输入）。当您再次尝试使用标准输入时，`Scanner`由于标准输入已关闭，因此无法检索任何数据。

如果直接从命令行运行，那么提供对标准输入的访问的正确方法是使用`Console`该类。控制台类提供了一个包装在 stdin 周围的 Reader，它有一个无操作关闭方法。例如。

```
public class Example {
   public Example() {
      Scanner scanner = new Scanner(System.console().reader()); 
      // note change on above line
      int row = scanner.nextInt();
      scanner.close();
   }
} 
```

请注意，如果您不是通过 Console 类访问标准输入，那么您可能会给自己带来问题。如果您不是直接从命令行调用 java 程序，那么您将无法访问控制台。例如，以下将调用会导致问题。

```
echo 2 3 | java Example 
```

或者

```
Process p = new ProcessBuilder("java", "Example").start();
// write data to process 
```

# sql - 如何在 CodeIgniter 中使用 Activerecord 插入表连接其他表？

> ID：12759536
> 
> 赞同：0
> 
> 时间：2012-10-06T11:51:59.673
> 
> 标签：sql, orm, codeigniter-datamapper, phpactiverecord

我是 CodeIgniter 和 ORM 的新手，希望你们能帮助我。

问题表：

```
CREATE TABLE `question` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `title` varchar(128) NOT NULL DEFAULT '',
  `content` text NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

答案表：

```
CREATE TABLE `answer` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `question_id` int(11) unsigned NOT NULL,
  `content` text NOT NULL,
  PRIMARY KEY (`id`),
  KEY `question_id` (`question_id`),
  CONSTRAINT `answer_ibfk_1` FOREIGN KEY (`question_id`) REFERENCES `question` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

等效的 SQL 是：

```
INSERT INTO answer(content, question_id) 
VALUES('Ironman', (select id 
                     from question 
                    where title ='favourite characters' 
                      and content = 'Who is your favourite characters in Avanger?')); 
```

任何人都可以告诉我如何实现相同的目标，但使用 CodeIgniter Activerecord？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T22:42:57.077

不要那样做，而是使用主键 (id) 直接插入到基表中。

# r - R：从三个相同列但名称不同的数据框构造一个表

> ID：12759537
> 
> 赞同：0
> 
> 时间：2012-10-06T11:52:05.620
> 
> 标签：r

我有三个可变行长的数据框：

```
df1 (column names a,b,c)

df2 (column names d,e,f)

df3 (column names g,h,i) 
```

如何将它们组合到一个表中（另一个数据框下的一个数据框）

```
table.all <- rbind(df1,df2,df3) 
```

仅适用于相同的列名，但我的列名不同。

然后将此表保存到 csv：

```
write.csv(table.all ,"table.all .csv") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T12:10:21.340

您要确保所有列都是相同的数据类型，否则会出现错误，但如果您的数据框具有相同的结构，那么解决方案可能是

```
df1 <- data.frame(a=1,b="a",c=3)
df2 <- data.frame(d=2,e="a",f=3)
df3 <- data.frame(g=3,h="a",i=3)
library(plyr)
ll <- list(df1,df2,df3)
ldply(ll, function(l){ names(l) <- c("col1","col2","col3") 
                       l}) 
```

这也适用于具有不同行数的数据框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T11:58:48.057

好吧，您必须在某个时候决定 final 的列名应该是什么`data.frame`。为什么不将所有列名设置为您想要的名称`rbind`呢？

# iphone - 在 iphone 中以 24 小时格式检索小时

> ID：12759539
> 
> 赞同：-1
> 
> 时间：2012-10-06T11:52:29.483
> 
> 标签：iphone, objective-c, cocoa-touch, datetime

我正在使用这种格式来获取时间

```
 NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    dateFormatter.dateFormat = @"hh";
    [dateFormatter setTimeZone:[NSTimeZone systemTimeZone]];

    NSString *date = [dateFormatter stringFromDate:now];

    NSInteger myHour = [date intValue]; 
```

问题是它返回例如`4Pm`我希望它返回`16`而不是 4。我该怎么做？我尝试用单个 h 替换 hh 无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T11:59:57.580

Here Your input:

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"hh"];
NSDate *Yourcurrenttime = [dateFormatter dateFromString:Yourstring]; 
```

And date converted to the String ..

```
[dateFormatter setDateFormat:@"HH"];
NSString *date = [dateFormatter stringFromDate:now];

NSInteger myHour = [date intValue]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T11:59:31.573

Here is answer :-

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    dateFormatter.dateFormat = @"HH";
    [dateFormatter setTimeZone:[NSTimeZone systemTimeZone]];

    NSString *date = [dateFormatter stringFromDate:[NSDate date]];

    NSInteger myHour = [date intValue];
    NSLog(@"%d",myHour); 
```

Hope it helps you!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T13:00:55.200

**它的 12 小时时间格式：-**

```
NSDateFormatter *timeFormat = [[NSDateFormatter alloc] init];
[timeFormat setDateFormat:@"hh a"];
NSString *theTime = [timeFormat stringFromDate:[NSDate date]];    
NSLog(@"time, %@",theTime); 
```

**它的 24 小时时间格式：-**

```
NSDateFormatter *timeFormat = [[NSDateFormatter alloc] init];
[timeFormat setDateFormat:@"HH"];
NSString *theTime = [timeFormat stringFromDate:[NSDate date]];    
NSLog(@"time, %@",theTime); 
```

# sqlite - 在 SQLite 中排序、排序和创建列

> ID：12759542
> 
> 赞同：2
> 
> 时间：2012-10-06T11:52:40.610
> 
> 标签：sqlite

我是一名学生，正在做一个项目，我必须使用 SQLite，但是我是 SQLite 的新手。我在下面描述了我的问题。

我有一个表格（包含 60000 行），其格式如下所示。

```
Date_Time           Country_City Temperature
4-10-2012 12:10:10  USA_NYC        20
4-10-2012 12:10:10  USA_LA         17
4-10-2012 12:10:10  USA_DC         19
4-10-2012 12:40:10  USA_LA         18
4-10-2012 12:40:10  USA_DC         18 
```

我必须如下所示对表格进行排序和创建，如果数据在 NYC 中丢失，则如果不是“NaN”，则必须加载以前的数据。

```
Date_Time         USA_NYC USA_LA USA_DC
4-10-2012 12:10:10 20      17     19
4-10-2012 12:40:10 20      18     18 
```

你能告诉我如何创建它，我可以排序和排序，但我不知道如何在 SQLite 中创建这样的。我将不胜感激任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T12:47:53.897

对于给定的时间戳和城市，以下查询获取该时间或之前的最新温度：

```
SELECT Temperature AS USA_NYC
FROM mytable
WHERE Country_City = 'USA_NYC'
  AND Date_Time LIKE '4-10-2012 %'
  AND Date_Time <= '4-10-2012 12:40:10'
  AND Temperature IS NOT NULL
ORDER BY Date_Time DESC
LIMIT 1 
```

（请注意，如果您使用 SQLite[支持的日期/时间格式](http://www.sqlite.org/lang_datefunc.html)`Date_Time`之一，则可以简化比较。）

我们还得到了我们想要一些温度的所有时间戳：

```
SELECT DISTINCT Date_Time FROM mytable 
```

现在我们结合这两个查询来获取每个时间戳的 NYC 值：

```
SELECT timestamps.Date_Time,
       (SELECT Temperature
        FROM mytable tvalues
        WHERE tvalues.Country_City = 'USA_NYC'
          AND tvalues.Date_Time LIKE substr(timestamps.Date_Time, 1, 10) || '%'
          AND tvalues.Date_Time <= timestamps.Date_Time
          AND tvalues.Temperature IS NOT NULL
        ORDER BY tvalues.Date_Time DESC
        LIMIT 1) AS USA_NYC
FROM (SELECT DISTINCT Date_Time
      FROM mytable) timestamps 
```

`LA`添加和列`DC`作为练习。（不可能从`Country_City`值自动生成这些列；SQLite 没有数据透视表函数。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T15:21:09.690

@Cl：谢谢你的澄清。练习的答案是

选择时间戳。日期时间，

```
 (SELECT Temperature
    FROM mytable tvalues
    WHERE tvalues.Country_City = 'USA_NYC'
      AND tvalues.Date_Time LIKE substr(timestamps.Date_Time, 1, 10) || '%'
      AND tvalues.Date_Time <= timestamps.Date_Time
      AND tvalues.Temperature IS NOT NULL
    ORDER BY tvalues.Date_Time DESC
    LIMIT 1) AS USA_NYC, 
   (SELECT Temperature FROM mytable tvalues WHERE tvalues.Country_City = 'USA_LA'
      AND tvalues.Date_Time LIKE substr(timestamps.Date_Time, 1, 10) || '%'
      AND tvalues.Date_Time <= timestamps.Date_Time
      AND tvalues.Temperature IS NOT NULL
    ORDER BY tvalues.Date_Time DESC
    LIMIT 1) AS USA_LA,     SELECT Temperature
    FROM mytable tvalues
    WHERE tvalues.Country_City = 'USA_DC'
      AND tvalues.Date_Time LIKE substr(timestamps.Date_Time, 1, 10) || '%'
      AND tvalues.Date_Time <= timestamps.Date_Time
      AND tvalues.Temperature IS NOT NULL
    ORDER BY tvalues.Date_Time DESC
    LIMIT 1) AS USA_DC, 
```

FROM (SELECT DISTINCT Date_Time FROM mytable) 时间戳

这是所需的解决方案，还是您期望有任何不同的更快的解决方案？

# c# - 将字体系列的用户首选项设置为 wpf mvvm 应用程序

> ID：12759544
> 
> 赞同：1
> 
> 时间：2012-10-06T11:52:51.000
> 
> 标签：c#, wpf, mvvm, user-preferences

如何在 c# 中将字体系列的用户首选项设置为 wpf mvvm 应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T13:30:13.167

您可以为 TargetType Window 创建一个全局 Style 并在那里设置 Preference 。

资源：

```
<Application.Resources>
    <Style TargetType="Window" x:Key="WindowStyle">
        <Setter Property="FontFamily" Value="{Binding FontFamilyPrefernce}" />                      
    </Style>        
</Application.Resources> 
```

风景 ：

```
 <Window Style="{StaticResource WindowStyle}">
      <Grid>
          <TextBox />
      </Grid>
 </Window> 
```

视图模型：

```
 public SomeViewModel()
    {
        FontFamilyPrefernce = new FontFamily("Algerian");
    }

    private FontFamily fontFamilyPrefernce;
    public FontFamily FontFamilyPrefernce 
    {
        get {return fontFamilyPrefernce ;}
        set
        {
            fontFamilyPrefernce = value;
            OnPropertyChanged("FontFamilyPrefernce");
        }
    } 
```

希望这可以帮助 ..

# iphone - 如何打开标准电话号码视图控制器

> ID：12759550
> 
> 赞同：0
> 
> 时间：2012-10-06T11:53:42.153
> 
> 标签：iphone, objective-c, ios

我的应用程序将收到一些电话号码，我想通过标准的 iOS 电话号码视图控制器向用户显示这些电话号码，如附图所示。

![iPhone 截图](../Images/df148abfb74bd8f813f77a7be585f536.png)

我正在寻找方法，如何在我的代码中打开这个视图控制器，并将电话号码传递给它。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T12:16:55.267

iOS的[地址簿编程指南](http://developer.apple.com/library/ios/#documentation/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/Introduction.html)涵盖了与用户地址簿交互的所有方式。听起来您想将电话号码添加到新联系人或现有联系人，因此[用户交互：提示和显示数据](http://developer.apple.com/library/ios/documentation/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/Chapters/UI_Controllers.html#//apple_ref/doc/uid/TP40007744-CH5-SW1)可能是最好的起点。

# python - 蟒蛇： os.spawn 。无法在后台启动 bash 进程

> ID：12759551
> 
> 赞同：2
> 
> 时间：2012-10-06T11:53:44.863
> 
> 标签：python, bash

任务是从 python 脚本执行 bash 脚本并让它在后台执行，即使 python 脚本将完成。我需要 UNIX 解决方案，我不在乎它是否不能在 Win 上运行。

Python脚本：

```
#!/usr/bin/env python
import os, commands
command = '/usr/bin/ssh localhost "/home/gd/test/python/back.sh  "   '
print os.spawnlp(os.P_NOWAIT,command)
print "Python done" 
```

/home/gd/test/python/back.sh ：

```
#!/usr/bin/bash

/bin/echo "started"
/bin/sleep 80
/bin/echo "ended" 
```

问题是，当 python 脚本启动时，我看到生成的进程的 PID 被打印出来。但是后台没有进程。当我使用 P_WAIT 时，我看到退出代码 127，这意味着在路径中找不到该命令。但是我已经提供了所有可能的路径？这些脚本与 commands.getouput 完美配合。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T12:52:15.340

像这样的东西应该工作

```
#!/usr/bin/env python
import os
command = ['/usr/bin/ssh', 'ssh', 'localhost', '/home/gd/test/python/back.sh']
print os.spawnlp(os.P_NOWAIT, *command)
print "Python done" 
```

注意这里最好使用[subprocess](http://docs.python.org/library/subprocess.html#replacing-the-os-spawn-family)模块而不是 spawn

```
#!/usr/bin/env python
from subprocess import Popen
command = ['/usr/bin/ssh', 'localhost', '/home/gd/test/python/back.sh']
print Popen(command)
print "Python done" 
```

# jquery - JQuery Mobile Listview 搜索类型

> ID：12759553
> 
> 赞同：0
> 
> 时间：2012-10-06T11:53:56.460
> 
> 标签：jquery, jquery-mobile

我在 JQuery Mobile listview 控件中搜索时遇到问题。

在 listview 默认搜索是这样的： Listview Items: AAA BBB CCC ABB BAB CBA

当我搜索“A”时，我会得到结果 Current Displaying Items: AAA ABB BAB CBA

但我想要这些物品：AAA ABB

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T13:19:59.863

添加[自定义过滤器回调](http://blog.safaribooksonline.com/2012/02/14/jquery-mobile-tip-write-your-own-list-view-filter-function/)。

尝试这样的事情（未经测试）：

```
var filter = function( text, searchString ) {
    return text.toLowerCase().indexOf( searchString ) !== 0;
};

$('#myListView').listview( 'option', 'filterCallback', filter ); 
```

我在手机上写了这个，所以这是我对这个答案的所有错误的借口。

# mysql - MySQL: Boolean fulltext, search for words that begin/end with x?

> ID：12759560
> 
> 赞同：0
> 
> 时间：2012-10-06T11:55:32.697
> 
> 标签：mysql, boolean, full-text-search

Is it possible to match against words that begin or end with the searchstring?

Example:

I want to find a column that contains the word "pineapple". I want to find that row by searching for "pine" or just "apple" if that's possible.

Can this be done?

Current code, if it helps:

```
SELECT id
FROM movies
WHERE MATCH (movies.movie_title)
AGAINST ('+word1 +word2' IN BOOLEAN MODE) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T12:48:04.303

对于您的示例：

```
select 'pineapple' regexp 'pine|apple'; 
```

对于更一般的情况，如果您可以使用准备好的语句，您可以在构建查询时为正则表达式字符串添加任何您想要的内容。如果有多个要匹配的内容，您可以构建一个复杂的表达式，或者针对结果和循环进行子选择，或者自连接。有很多方法可以解决这个问题。

# css - animation through CSS3

> ID：12759563
> 
> 赞同：0
> 
> 时间：2012-10-06T11:56:12.820
> 
> 标签：css

I'm expecting to see some animation on the circle. I doesn't! The circle remains stationary on page load. I've tried it in FF and Chrome. As far as I know the syntax is correct?

```
<!doctype html>
<html>
<head>
<title>CSS animations</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<style type="text/css">
#balloon-one {
background:yellow;
border-radius:50px;
border:2px solid #FFCC00;
position:absolute;
height:100px;
width:100px;
top:200px;
left:300px;
-webkit-animation: floataround 5s infinite;
}
@-webkit-keyframes float {
0% { -webkit-transform: translateX(-20px) translateY(10px); }
30% { -webkit-transform: translateX(10px) translateY(-20px); }
70% { -webkit-transform: translateX(-10px) translateY(20px); }
100% { -webkit-transform: translateX(-20px) translateY(10px); }

    0% { -moz-transform: translateX(-20px) translateY(10px); }
30% { -moz-transform: translateX(10px) translateY(-20px); }
70% { -moz-transform: translateX(-10px) translateY(20px); }
100% { -moz-transform: translateX(-20px) translateY(10px); }
}
</style>

</head>

<body>

<div id="balloon-one"></div>
</body>
</html> 
```

help

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T12:17:19.617

我可以在您的代码中看到几个错误。首先，您的动画设置为“floataround”，但您的动画名称只是“float”。然后你混合了 -moz 和 -webkit 前缀。这是您的 css 的更正版本：

```
#balloon-one {
    background:yellow;
    border-radius:50px;
    border:2px solid #FFCC00;
    position:absolute;
    height:100px;
    width:100px;
    top:200px;
    left:300px;
    -webkit-animation: float 5s infinite;
    -moz-animation: float 5s infinite;
    animation: float 5s infinite;
}
@-webkit-keyframes float {
    0% { -webkit-transform: translateX(-20px) translateY(10px); }
    30% { -webkit-transform: translateX(10px) translateY(-20px); }
    70% { -webkit-transform: translateX(-10px) translateY(20px); }
    100% { -webkit-transform: translateX(-20px) translateY(10px); }
}
@-moz-keyframes float {
    0% { -moz-transform: translateX(-20px) translateY(10px); }
    30% { -moz-transform: translateX(10px) translateY(-20px); }
    70% { -moz-transform: translateX(-10px) translateY(20px); }
    100% { -moz-transform: translateX(-20px) translateY(10px); }
}
@keyframes float {
    0% { transform: translateX(-20px) translateY(10px); }
    30% { transform: translateX(10px) translateY(-20px); }
    70% { transform: translateX(-10px) translateY(20px); }
    100% { transform: translateX(-20px) translateY(10px); }
} 
```

在chrome上试过了，可以的。没试过用火狐。

# c# - Remote Desktop Connection - C# Events

> ID：12759567
> 
> 赞同：6
> 
> 时间：2012-10-06T11:57:04.200
> 
> 标签：c#, .net, rdp

Got a small problem.

We have a internet-facing VPN from Netgear, to allow staff and teachers to access the school network using RDC from their home.

They login to the VPN using their web browser, click on one of our remote servers and they are RDC'ed in.

People though have a massive issue, with logging off. It seems to escape their head. All users are doing is clicking the Close button on the RDC Client, Which is not logging them off.

We are building a program to sort this out, The idea is to "hook" into the Remote Desktop API and then check if a session is disconnected, if it is, we log off the user.

The program would be running in the background as a service or a physical minimized EXE.

We are building this in C#. So does anyone know of any RDC Events that can be called using .NET 4? Ones that will allow us to know when the user is closing the session.

If you need anymore information on this, let me know.

Cheers

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-06T12:04:10.567

知道了。

称呼

```
SystemEvents.SessionSwitch += new SessionSwitchEventHandle SystemEvents_SessionSwitch); 
```

然后

```
 static void SystemEvents_SessionSwitch(object sender, SessionSwitchEventArgs e)
    {
        if (e.Reason == SessionSwitchReason.RemoteDisconnect || e.Reason == SessionSwitchReason.ConsoleDisconnect)
        {
            // Log off the user...

        }
        else
        {
            // Physical Logon
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T13:28:53.807

这比上面的其他答案更好。

```
 public Form1()
    {
        InitializeComponent();

        if (!WTSRegisterSessionNotification(this.Handle, NOTIFY_FOR_THIS_SESSION))
        {
            Marshal.ThrowExceptionForHR(Marshal.GetLastWin32Error());
        }
    }

    [DllImport("user32.dll")]
    public static extern int ExitWindowsEx(int uFlags, int dwReason);

    [DllImport("WtsApi32.dll")]
    private static extern bool WTSRegisterSessionNotification(IntPtr hWnd, [MarshalAs(UnmanagedType.U4)]int dwFlags);

    [DllImport("WtsApi32.dll")]
    private static extern bool WTSUnRegisterSessionNotification(IntPtr hWnd);

    // constants that can be passed for the dwFlags parameter
    const int NOTIFY_FOR_THIS_SESSION = 0;
    const int NOTIFY_FOR_ALL_SESSIONS = 1;

    // message id to look for when processing the message (see sample code)
    const int WM_WTSSESSION_CHANGE = 0x2b1;

    // WParam values that can be received: 
    const int WTS_CONSOLE_CONNECT = 0x1; // A session was connected to the console terminal.
    const int WTS_CONSOLE_DISCONNECT = 0x2; // A session was disconnected from the console terminal.
    const int WTS_REMOTE_CONNECT = 0x3; // A session was connected to the remote terminal.
    const int WTS_REMOTE_DISCONNECT = 0x4; // A session was disconnected from the remote terminal.
    const int WTS_SESSION_LOGON = 0x5; // A user has logged on to the session.
    const int WTS_SESSION_LOGOFF = 0x6; // A user has logged off the session.
    const int WTS_SESSION_LOCK = 0x7; // A session has been locked.
    const int WTS_SESSION_UNLOCK = 0x8; // A session has been unlocked.
    const int WTS_SESSION_REMOTE_CONTROL = 0x9; // A session has changed its remote controlled status.

    protected override void OnHandleDestroyed(EventArgs e)
    {
        // unregister the handle before it gets destroyed
        WTSUnRegisterSessionNotification(this.Handle);
        base.OnHandleDestroyed(e);
    }

    protected override void WndProc(ref Message m)
    {
        if (m.Msg == WM_WTSSESSION_CHANGE)
        {
            int value = m.WParam.ToInt32();
            if (value == WTS_REMOTE_DISCONNECT)
            {
                ExitWindowsEx(4, 0); // Logout the user on disconnect
            }
            else if (value == WTS_REMOTE_CONNECT)
            {
                MessageBox.Show("Welcome to the VPN. There is no need to Logout anymore, as when you close this session it will automatically log you out");
            }
        }
        base.WndProc(ref m);
    } 
```

# jquery - .each jQuery 迭代器调用一个普通函数，为什么不呢？

> ID：12759571
> 
> 赞同：1
> 
> 时间：2012-10-06T11:58:05.340
> 
> 标签：jquery

我需要在 jQuery.each() 中使用/重用外部（普通）函数，如下所示：

```
function foo(index,ele){
    if(!($(ele).attr("href")) || $(ele).attr("href") == "") {
        $(ele).addClass("yellow");
    }        
}
// INCORRECT, but WHY??
$("a").each(foo(index,domEle)); 
```

这是一个包含正确和错误案例[的 jsfiddle 示例。](http://jsfiddle.net/zTF22/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T11:59:47.477

因为您传递的是函数执行的结果，而不是函数本身

```
$("a").each(foo); // <-- this is how it should be written 
```

在这种情况下，传递了对该函数的引用，并且一切都按预期工作。

[http://jsfiddle.net/zerkms/zTF22/1/](http://jsfiddle.net/zerkms/zTF22/1/)

# php - Ranking / Popularity system

> ID：12759573
> 
> 赞同：2
> 
> 时间：2012-10-06T11:58:58.763
> 
> 标签：php, mysql, cakephp

I'm trying to work out the best way to weight my products and which order they should appear in on home page etc.

There are four metrics I want to crunch and turn into a ranking:

*   Purchases for the product
*   How old the product is (in days)
*   How many times the product has been saved
*   How many times the product has been viewed

Ideally, each of these will have an adjustable weighting:

Purchases: 40% Age: 10% Saves: 30% Views: 20%

I've had a read of [http://blog.linkibol.com/2010/05/07/how-to-build-a-popularity-algorithm-you-can-be-proud-of/](http://blog.linkibol.com/2010/05/07/how-to-build-a-popularity-algorithm-you-can-be-proud-of/)

Bayesian also seems like a good method as it smooths the averages out using constants.

Basically I'm looking for a library/plugin etc. that I can use in my CakePHP project to achieve this.

Any suggestions? Stack is CakePHP/Apache/MySQL

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T15:37:11.517

根据您的描述，这似乎可行：

```
SELECT ifnull(purchases,0) * .4 + ifnull(product_age,0) * .1 + ifnull(save_count,0) * .3 + ifnull(view_count,0) * .2 as weighting
FROM my_table 
```

或发布一组更新的要求...

# php - Comparator functions for alphabetic sorting with anonymous functions

> ID：12759575
> 
> 赞同：0
> 
> 时间：2012-10-06T11:59:16.497
> 
> 标签：php, syntax-error, anonymous-function, sorting

I have a two-dimensional array and want to sort it by name. I would like to use [usort()](http://php.net/manual/en/function.usort.php) with anonymous functions. How should my comparator function look like when I want to sort something alphabetically?

```
[names] => Array
(
    [0] => Array
        (
            [name] => Baba
            [prename] => Ali
        )

    [1] => Array
        (
            [name] => Pan
            [prename] => Peter
        )

) 
```

To sort, I tried this:

```
usort($names, function cmp($a, $b) {
    return strcmp($a['name'], $b['name']);
}); 
```

which gives me `unexpected T_STRING, expecting '('` on the first line.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T12:19:50.113

这个 bug 不是很明显，但再次思考匿名函数的概念，我得到了提示。函数名不能在那里。我的确切问题的正确解决方案是

```
usort($names, function ($a, $b) {
    return strcmp($a['name'], $b['name']);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T12:10:22.537

您可以使用`usort`

```
$names = Array(
"0" => Array("name" => "B","prename" => "A"),
"1" => Array("name" => "D","prename" => "B"),
"2" => Array("name" => "A","prename" => "C"),
"3" => Array("name" => "B","prename" => "D")

        ); 
```

示例 1

```
__xsort($names,"name");
var_dump($names); 
```

输出

```
array
  0 => 
    array
      'name' => string 'A' (length=1)
      'prename' => string 'C' (length=1)
  1 => 
    array
      'name' => string 'B' (length=1)
      'prename' => string 'A' (length=1)
  2 => 
    array
      'name' => string 'B' (length=1)
      'prename' => string 'D' (length=1)
  3 => 
    array
      'name' => string 'D' (length=1)
      'prename' => string 'B' (length=1) 
```

示例 2

```
__xsort($names,"prename");
var_dump($names); 
```

输出

```
array
  0 => 
    array
      'name' => string 'B' (length=1)
      'prename' => string 'A' (length=1)
  1 => 
    array
      'name' => string 'D' (length=1)
      'prename' => string 'B' (length=1)
  2 => 
    array
      'name' => string 'A' (length=1)
      'prename' => string 'C' (length=1)
  3 => 
    array
      'name' => string 'B' (length=1)
      'prename' => string 'D' (length=1)) 
```

使用的功能

```
function __xsort(&$names,$key) {
    usort($names, function ($a, $b) use($key) {
        if ($a[$key] == $b[$key]) {
            return 0;
        }
        return ($a[$key] < $b[$key]) ? - 1 : 1;
    });

    return $names;
} 
```

# c++ - C++ Loop: expected primary-expression before ‘;’ token

> ID：12759581
> 
> 赞同：2
> 
> 时间：2012-10-06T12:00:29.730
> 
> 标签：c++

I have a loop like below, I think the problem is with the inner for loops marked "See here". Whats the problem with that?

```
// measure time to write different sizes of data
for (int i = 0; i < sizeof(sizes)/sizeof(int); i++) {
    lengthMod = sizes[i]/sizeof(int) - 1;

    start = wall_clock_time();

    for (unsigned int j = 0; j < 10; j++) // << See here!!!
        tmp = 1;

    // force any write back cache to flush. read from other data source
    for (unsigned int j = 0; j < REPS; j++) // << Or here!!!
        tmp = j;

    end = wall_clock_time();
    timeTaken = ((float)(end - start))/1000000000;
    fprintf(stderr, "%d, %1.2f \n", sizes[i]/1024, ((float)(end - start))/1000000000);
} 
```

You can see the **[full source on GitHub](https://github.com/jiewmeng/cs3210-assign1/blob/master/cache-write.cpp)** ~line 32

* * *

```
g++ -O3 cache-write.cpp -o cache-write -lrt
cache-write.cpp: In function ‘int main()’:
cache-write.cpp:36:27: error: expected primary-expression before ‘;’ token
cache-write.cpp:36:27: error: expected ‘)’ before ‘;’ token
cache-write.cpp:36:29: error: name lookup of ‘j’ changed for ISO ‘for’ scoping [-fpermissive]
cache-write.cpp:36:29: note: (if you use ‘-fpermissive’ G++ will accept your code)
cache-write.cpp:36:32: error: expected ‘;’ before ‘)’ token
cache-write.cpp:44:11: error: ‘data1’ was not declared in this scope
make: *** [cache-write] Error 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T12:05:31.080

不要在声明 REPS 的地方使用 #define，而是使用

```
const unsigned int REPS = whatever; 
```

通常在 C++ 中避免使用#define，因为它很容易导致您遇到的那种问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T12:03:49.170

REPS 定义的末尾有一个分号：

```
#define REPS 128 * MB; 
```

# ruby-on-rails - How to get location of gem using bundler or Rails from within Ruby?

> ID：12759582
> 
> 赞同：1
> 
> 时间：2012-10-06T12:00:34.227
> 
> 标签：ruby-on-rails, ruby-on-rails-3, bundler

I need to get the current working directory of a gem from within a Rails application.

I currently use

```
`bundle show foo`.strip 
```

This works great in my environment, but:

*   it's slow because it requires loading a shell
*   it will probably break when somebody tries to run the app on Windows or on JRuby or when their $PATH points at a different ruby than the one used to start the app

So I'd like a way to do this without invoking a subshell.

The RDOC for Bundler hasn't been helpful. You used to be able to get this sort of information from Rails itself in Rails 2, but it appears that Rails 3 lets Bundler handle it.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T12:17:09.557

如果 gem 在您的 Gemfile/Gemfile.lock 中，它的路径会出现在`$LOAD_PATH`全局变量中。你可以利用这个事实：

```
$:.grep(/activerecord/).first 
```

`$:`是一样的`$LOAD_PATH`。你可以使用任何一个。

**另一种方法：**

```
Bundler.load.specs.find{|s| s.name == 'activerecord' }.try(:full_gem_path) 
```

# objective-c - NSDictionary 出错 - “对象数与键数不同”

> ID：12759583
> 
> 赞同：1
> 
> 时间：2012-10-06T12:00:36.287
> 
> 标签：objective-c, cocoa, nsdictionary, crash-reports

在将我的应用程序提交到 Mac App Store 以供审查后，我刚刚收到了一份崩溃报告（在发布时）：

```
Application Specific Information:
objc[1832]: garbage collection is ON
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[NSDictionary initWithObjects:forKeys:]: count of objects (0) differs from count of keys (2)'
terminate called throwing an exception
abort() called 
```

这是代码的一部分，我怀疑：

```
- (NSMutableDictionary*)getNewChapterWithTitle:(NSString*)title
{
    if (title==nil) title = [NSString stringWithFormat:@"Chapter %d",[[self appChapters] count]+1];

    // Align Justify
    NSMutableParagraphStyle * paragraphStyle = [[NSParagraphStyle defaultParagraphStyle] mutableCopy];
    [paragraphStyle setAlignment:NSJustifiedTextAlignment];

    // Set Font
    NSDictionary *font = [NSDictionary dictionaryWithObjects:[NSArray arrayWithObjects:[NSFont fontWithName:@"Garamond" size:15.0],paragraphStyle, nil] forKeys:[NSArray arrayWithObjects:NSFontAttributeName, NSParagraphStyleAttributeName, nil]];

    NSString* lipsum = @"\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc consequat fermentum faucibusPhasellus ac consequat metus. Sed at lectus sit amet tellus vulputate mollis vel suscipit metus. Nulla a sapien purus. Aenean sollicitudin lacus varius nisi faucibus nec lacinia mauris fermentum. Aliquam euismod quam rhoncus ipsum pulvinar quis condimentum magna imperdiet. Nullam augue leo, dictum tincidunt ullamcorper id, porta in lorem. Duis in vestibulum nisl.\
    \n\n\
    Donec imperdiet dignissim massa, at ultricies enim dignissim at. Etiam pharetra neque quis quam condimentum vitae viverra nisl volutpat. Vivamus urna ante, ultrices ut tincidunt id, auctor id est. Nunc eget diam purus, at viverra orci. Maecenas eu magna mi, id venenatis arcu. Maecenas ornare, tortor sit amet gravida placerat, diam urna lacinia nunc, a dictum arcu libero sed metus. Nulla pulvinar sapien vitae lectus faucibus quis tempus elit volutpat. Integer facilisis interdum lectus, sit amet dapibus enim mattis non. Donec sed pulvinar risus. Mauris in nulla urna, sit amet placerat turpis. Proin felis erat, pretium sed pharetra vel, tincidunt quis tortor. Donec ut nisi dui. Pellentesque gravida gravida justo, quis convallis leo euismod in. Nam pretium accumsan sapien ac interdum.";

    NSMutableAttributedString* theLipsum = [[NSMutableAttributedString alloc] initWithString:lipsum attributes:font];

    return [[NSMutableDictionary dictionaryWithObjectsAndKeys:
            [title retain],@"title",
            [theLipsum retain],@"content",
            [NSNumber numberWithInt:0],@"isMarkdown",
            nil] retain];
} 
```

您是否看到上述任何“明显”错误？（它被调用了 4-5 次，来自`awakeFromNib`，所以我想这是罪魁祸首......）

* * *

**提示：** s`retain`已添加在报告后；虽然我不知道它是否会有所帮助......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T12:05:48.757

`[NSFont fontWithName:@"Garamond" size:15.0]`可能返回`nil`。据我所知，它不是 OSX 上的默认字体。所以你的对象数组是空的，因为只有直到第一个对象`nil`被添加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T12:08:16.063

我认为问题出在这里 -`[NSFont fontWithName:@"Garamond" size:15.0]` 此代码返回 nil，因此数组为空。

可能是这种字体不是标准字体，但它已安装在您的计算机上。如果问题在这里，您应该将此字体添加到应用程序资源中。

# javascript - 获取div的href

> ID：12759589
> 
> 赞同：-1
> 
> 时间：2012-10-06T12:01:28.497
> 
> 标签：javascript, jquery, facebook

我在 div 中有一个链接：

```
<div class="embed">
<a href="http://google.com/"></a>
</div>​ 
```

所以现在我想附加 Facebook 评论系统：

```
$('.embed a').append('<div class="fb-comments" data-href="' + this + '" data-num-posts="1" data-width="470"></div>');​ 
```

正如你所看到的，我有'this'作为href，它对我不起作用。我想要链接的网址，我在上面附加评论系统。如何找到并实施此网址？示例：[JsFiddle](http://jsfiddle.net/ggRLh/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T12:03:59.077

`this is not available in this context`你必须自己使用那个元素`$('.embed a').attr('href')`

```
$('.embed a').append('<div class="fb-comments" data-href="' + $('.embed a').attr('href') + '" data-num-posts="1" data-width="470"></div>');​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T12:04:26.597

你可以通过做这样的事情来获得href

```
var href=$('.embed a').attr('href'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T12:05:46.847

如果您有多个`'.embed a'`，则需要对它们中的每一个进行操作并给出正确的 href ：

```
$('.embed a').each(function(){
    $(this).append('<div class="fb-comments" data-href="' + $(this).attr('href') + '" data-num-posts="1" data-width="470"></div>');
});​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-06T12:22:31.733

尝试如下：

```
$('.embed').find('a').attr('href'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-06T12:04:44.870

而`this`不仅仅是使用`$('.embed a').attr('href')`

你可以在这里看到：**[JS Fiddle](http://jsfiddle.net/ggRLh/2/)**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-06T12:05:18.810

您可以在函数`html`上下文中使用方法来引用您的锚链接。`html``this`

```
$('.embed a').html(function(i, c){
    return '<div class="fb-comments" data-href="' + this.href + '" data-num-posts="1" data-width="470"></div>'
}); 
```

如果要附加/前置 html 标记并且您的元素具有 html 内容，则可以连接 html 内容：

```
$('.embed a').html(function(i, current){
    return current + '<div class="fb-comments" data-href="' + this.href + '" data-num-posts="1" data-width="470"></div>'
}); 
```

# r - how to do predictions from cox survival model with time varying coefficients

> ID：12759590
> 
> 赞同：4
> 
> 时间：2012-10-06T12:01:28.617
> 
> 标签：r, prediction, survival-analysis, cox-regression

I have built a survival cox-model, which includes a `covariate * time` interaction (non-proportionality detected). I am now wondering how could I most easily get survival predictions from my model.

My model was specified:

```
coxph(formula = Surv(event_time_mod, event_indicator_mod) ~ Sex + 
    ageC + HHcat_alt + Main_Branch + Acute_seizure + TreatmentType_binary + 
    ICH + IVH_dummy + IVH_dummy:log(event_time_mod) 
```

And now I was hoping to get a prediction using `survfit` and providing `new.data` for the combination of variables I am doing the predictions:

```
survfit(cox, new.data=new) 
```

Now as I have `event_time_mod` in the right-hand side in my model I need to specify it in the new data frame passed on to `survfit`. This `event_time` would need to be set at individual times of the predictions. Is there an easy way to specify `event_time_mod` to be the correct time to `survfit`? Or are there any other options for achieving predictions from my model?

Of course I could create as many rows in the new data frame as there are distinct times in the predictions and setting to `event_time_mod` to correct values but it feels really cumbersome and I thought that there must be a better way.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-10-15T21:14:26.577

你已经完成了所谓的

> 一个明显但不正确的方法......

如在R包2.41-3 版[中的 Cox 模型小插图中使用时间相关协变量和时间相关系数中所述。](https://cran.r-project.org/web/packages/survival/vignettes/timedep.pdf)`survival`相反，您应该使用*时间转换功能*，即`tt`同一个小插图中所述的功能。该代码将类似于小插图中的示例

```
> library(survival)
> vfit3 <- coxph(Surv(time, status) ~ trt + prior + karno + tt(karno),
+                data=veteran,
+                tt = function(x, t, ...) x * log(t+20))
> 
> vfit3
Call:
coxph(formula = Surv(time, status) ~ trt + prior + karno + tt(karno), 
    data = veteran, tt = function(x, t, ...) x * log(t + 20))

              coef exp(coef) se(coef)     z       p
trt        0.01648   1.01661  0.19071  0.09  0.9311
prior     -0.00932   0.99073  0.02030 -0.46  0.6462
karno     -0.12466   0.88279  0.02879 -4.33 1.5e-05
tt(karno)  0.02131   1.02154  0.00661  3.23  0.0013

Likelihood ratio test=53.8  on 4 df, p=5.7e-11
n= 137, number of events= 128 
```

当你有一个术语时，`survfit`虽然不起作用`tt`

```
> survfit(vfit3, veteran[1, ])
Error in survfit.coxph(vfit3, veteran[1, ]) : 
  The survfit function can not yet process coxph models with a tt term 
```

但是，您可以使用 轻松获得`terms`线性预测变量或平均响应`predict`。[此外，您可以使用此处](https://stackoverflow.com/a/31316057/5861244)`tt`的答案随着时间的推移为术语创建术语。

# r - Simple introduction to linear models in R -

> ID：12759591
> 
> 赞同：-3
> 
> 时间：2012-10-06T12:01:35.250
> 
> 标签：r

It was hard for me to understand linear models in R. There are a lot of documents for the case, but many of them are technical manuals rather than teaching the concept.

I found [this article](http://users.monash.edu.au/~murray/stats/BIO4200/LinearModels.pdf) really simple and instructive, I hope it would be useful for the other people who have the same problem.

Do you have any better suggestion?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T12:07:00.660

你可以[在这里查看](http://data.princeton.edu/R/linearModels.html)或[线性混合模型](http://cran.r-project.org/doc/contrib/Fox-Companion/appendix-mixed-models.pdf)，它也简单易懂。

# django - 获取最近添加的对象。姜戈

> ID：12759594
> 
> 赞同：1
> 
> 时间：2012-10-06T12:01:39.303
> 
> 标签：django

如何获得最近添加的`Order`？

```
class Order(models.Model):
    STATUSS = (
        (u'E', u'Expected'),
        (u'S', u'Sent'),
        (u'F', u'Finished'),
        )

    who = models.ForeignKey(User, related_name='Owner')
    products = models.TextField()
    date = models.DateTimeField(auto_now_add=True)
    send = models.ForeignKey(Send)
    status = models.CharField(max_length=2, null=True, choices=STATUSS, default='O') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T12:40:28.470

我更喜欢 auto-increment `pk`，然后

```
Order.objects.latest('pk') 
```

只要使用默认代理主键，它就更简单、被索引并且准备就绪。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T12:05:41.883

如果*最近*您的意思是关于添加日期的最新订单，那么您可以使用：

```
Order.objects.order_by('-date')[0] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T12:25:44.293

如果您对“最近”的定义是“最后添加的”，则可以使用`latest()`

```
Order.objects.latest('date') 
```

要不就

```
Order.objects.latest() 
```

如果你有

```
class Meta:
    get_latest_by = 'date' 
```

在你的模型中。这来自 django 文档，[https: //docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.latest](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.latest)

如果您想要多个最新的，请说出过去 5 天的所有内容：

```
import datetime
Order.objects.filter(date__gte=datetime.date.today() - datetime.timedelta(days=5)) 
```

或者，如果您想要最后 10 条记录，无论多近，那么：

```
Order.objects.order_by('-date')[10] 
```

# mysql - 在 Mysql 中验证电子邮件地址

> ID：12759596
> 
> 赞同：28
> 
> 时间：2012-10-06T12:02:16.090
> 
> 标签：mysql, sql, validation, view

此查询创建一个 mysql 视图，该视图在一个表中捕获错误的电子邮件地址格式。因此，如果插入一行`rtrrg.com`作为电子邮件，它将被记录在视图中。我的问题是，如何使视图跟踪不止一张表。第二张桌子。

**SQL**

```
CREATE VIEW `invalid_emails` AS 
  select `table_with_email_column`.`email` AS `invalidemail` 
    from `table_with_email_column` 
   where ((locate(_latin1'', ltrim(rtrim(`table_with_email_column`.`email`))) <> 0) 
      or (left(ltrim(`table_with_email_column`.`email`), 1) = _latin1'@') 
      or (right(rtrim(`table_with_email_column`.`email`), 1) = _latin1'.') 
      or ((locate(_latin1'.', `table_with_email_column`.`email`,locate(_latin1'@', `table_with_email_column`.`email`)) -  locate(_latin1'@', `table_with_email_column`.`email`)) <= 1) 
      or ((length(ltrim(rtrim(`table_with_email_column`.`email`))) -  length(replace(ltrim(rtrim(`table_with_email_column`.`email`)), _latin1'@', _latin1''))) <> 1) 
      or (locate(_latin1'.', reverse(ltrim(rtrim(`table_with_email_column`.`email`)))) < 3) 
      or (locate(_latin1'.@', `table_with_email_column`.`email`) <> 0) 
      or (locate(_latin1'..', `table_with_email_column`.`email`) <> 0)); 
```

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-10-06T12:15:53.893

您可以使用 pure`SELECT`来验证电子邮件地址：

```
SELECT * FROM `users` WHERE `email` NOT REGEXP '^[^@]+@[^@]+\.[^@]{2,}$'; 
```

现在对于跟踪多个表的问题，您可以使用逗号分隔的表名吗？

```
SELECT * FROM `users`, `customers`, `clients`
         WHERE `email` NOT REGEXP "^[a-zA-Z0-9][a-zA-Z0-9.!#$%&'*+-/=?^_`{|}~]*?[a-zA-Z0-9._-]?@[a-zA-Z0-9][a-zA-Z0-9._-]*?[a-zA-Z0-9]?\\.[a-zA-Z]{2,63}$"; 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-12-11T13:00:20.200

对于正确的电子邮件验证，您可以使用此正则表达式，如下所示：

```
SELECT
    *
FROM
    `school`
WHERE
    `email` NOT REGEXP '^[a-zA-Z0-9][a-zA-Z0-9._-]*[a-zA-Z0-9._-]@[a-zA-Z0-9][a-zA-Z0-9._-]*[a-zA-Z0-9]\\.[a-zA-Z]{2,63}$'; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-07-18T13:20:02.873

简单`SELECT`的语句就足够了，例如：

```
 SELECT * FROM user WHERE email NOT 
 REGEXP '^[a-zA-Z0-9][+a-zA-Z0-9._-]*@[a-zA-Z0-9][a-zA-Z0-9._-]*[a-zA-Z0-9]*\\.[a-zA-Z]{2,4}$' 
```

此查询处理带有`+`符号的 Gmail 地址和主机为单个字母的地址。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-06T13:55:33.220

您可以在中使用 a `UNION`，`VIEW`但是您必须重复所有`WHERE`为您提供冗余代码的语句。因此，您将创建一个`VIEW`使您成为 a 的助手，`UNION`然后应用该`WHERE`子句。

演示在这里：**[SQL Fiddle 演示](http://sqlfiddle.com/#!2/2e3c7/1)**。

这将以某种方式适用于您的 SQL（未经测试）；

```
CREATE VIEW `invalid_emails_helper` AS
  select `table_with_email_column`.`email` AS `invalidemail` 
    from `table_with_email_column` 
union
  select `table_with_email_column`.`email` 
    from `second_table_with_email_column` 

CREATE VIEW `invalid_emails` AS 
  select `invalidemail` as `email`
    from `invalid_emails_helper` as `table_with_email_column` 
   where ((locate(_latin1'', ltrim(rtrim(`table_with_email_column`.`email`))) <> 0) 
      or (left(ltrim(`table_with_email_column`.`email`), 1) = _latin1'@') 
      or (right(rtrim(`table_with_email_column`.`email`), 1) = _latin1'.') 
      or ((locate(_latin1'.', `table_with_email_column`.`email`,locate(_latin1'@', `table_with_email_column`.`email`)) -  locate(_latin1'@', `table_with_email_column`.`email`)) <= 1) 
      or ((length(ltrim(rtrim(`table_with_email_column`.`email`))) -  length(replace(ltrim(rtrim(`table_with_email_column`.`email`)), _latin1'@', _latin1''))) <> 1) 
      or (locate(_latin1'.', reverse(ltrim(rtrim(`table_with_email_column`.`email`)))) < 3) 
      or (locate(_latin1'.@', `table_with_email_column`.`email`) <> 0) 
      or (locate(_latin1'..', `table_with_email_column`.`email`) <> 0)); 
```

`regex`是的，使用在互联网上随处可见的 as 来检查电子邮件地址的查询进一步简化了它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-06T12:25:42.693

```
SELECT
    *
FROM
    users
WHERE
    email NOT REGEXP ‘ ^[ a - zA - Z0 - 9 ][ a - zA - Z0 - 9._ -]*[ a - zA - Z0 - 9 ]@[ a - zA - Z0 - 9 ][ a - zA - Z0 - 9._ -]*[ a - zA - Z0 - 9 ]\.[ a - zA - Z ]{ 2,
    63 } $’ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-28T04:41:14.400

```
select EmailAddress from FindInvalidEmailAddressDemo
   -> where EmailAddress NOT LIKE '%_@_%._%'; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-02T06:48:15.167

使用 MySQL 9，您现在可以创建一个检查约束，该约束将验证存储在电子邮件地址列中的所有数据。这是一个`ALTER TABLE`声明：

```
ALTER TABLE `user` 
ADD CONSTRAINT `user.email_validation` 
    CHECK (`email` REGEXP "^[a-zA-Z0-9][a-zA-Z0-9.!#$%&'*+-/=?^_`{|}~]*?[a-zA-Z0-9._-]?@[a-zA-Z0-9][a-zA-Z0-9._-]*?[a-zA-Z0-9]?\\.[a-zA-Z]{2,63}$"); 
```

# mysql - MYSQL syntax join not equal

> ID：12759600
> 
> 赞同：0
> 
> 时间：2012-10-06T12:02:31.753
> 
> 标签：mysql, join, syntax, null

A mysql query is vexing me. I have some javascript that lets users assign people to a category by moving them back and forth between two buckets (boxes). The first bucket should be all people except those in second bucket (assigned to category). The second bucket consists of people in a category. Therefore, I need a mysql query for the first bucket that pulls all the people except those pulled in the second query (assigned to category).

I have one table of all people and a second of people assigned to categories. (There is also a third table of categories ignored here.) The following code returns the selected group for the second bucket (those in the category) but for the first bucket only pulls those already assigned to some category when I want it to include people who do not even appear in the catpeople table.

I think problem has something to do with NULL or my join but cannot figure it out. Would appreciate any suggestions:

people

```
id | name 
```

catpeople

```
id | catid | peopleid 
```

First query should pull all people except those in second query but it only pulls people who show up in catpeople table.

```
$sql1 = "SELECT * FROM `people` c
LEFT JOIN `catpeople` c 
on p.id = c.peopleid
WHERE catid <> '2'"; 
```

Second query works works fine (pulls people in category)

```
$sql2 = "SELECT * FROM `people` p
LEFT JOIN `catpeople` c 
on p.id = c.peopleid
WHERE catid = '2'"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T12:06:24.427

拥有让你的`catpeople.catid='2'`内在。如果您需要所有人将条件移动到：`WHERE``JOIN``ON`

```
$sql1 = "SELECT * FROM `people` p
LEFT JOIN `catpeople` c 
ON (p.id = c.peopleid AND catid <> '2')"; 
```

如果我正确理解了您的问题，则需要稍微修改此查询：

```
$sql1 = "SELECT p.* FROM `people` p
LEFT JOIN `catpeople` c 
ON (p.id = c.peopleid AND catid <> '2')"
WHERE c.id IS NULL ; -- I guess c.id is a primary key in catpeople.
--now it returns rows in people table that have no rows 
--associated with them in catpeople (or rows with catid =2 or catid is null) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T12:08:20.720

LEFT JOIN 无论如何都会拉人。使用 INNER JOIN 代替：

```
$sql1 = "SELECT * FROM `people` c
INNER JOIN `catpeople` c 
on p.id = c.peopleid AND catid <> 2; 
```

# c# - 模拟具有构造函数依赖项的抽象类（使用 Moq）

> ID：12759609
> 
> 赞同：10
> 
> 时间：2012-10-06T12:03:16.583
> 
> 标签：c#, mocking, moq, abstract-class

我有一个抽象类，其构造函数需要集合参数。我怎样才能模拟我的班级来测试它？

```
public abstract class QuoteCollection<T> : IEnumerable<T>
        where T : IDate
    {
        public QuoteCollection(IEnumerable<T> quotes)
        {
            //...
        }

        public DateTime From { get { ... } }

        public DateTime To { get { ... } }
    } 
```

传递给构造函数的集合中的每个项目都必须实现：

```
public interface IDate
{
    DateTime Date { get; }
} 
```

如果我要编写自定义模拟，它将如下所示：

```
public class QuoteCollectionMock : QuoteCollection<SomeIDateType>
{
    public QuoteCollectionMock(IEnumerable<SomeIDateType> quotes) : base(quotes) { }
} 
```

我可以通过 Moq 实现这一目标吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-06T13:30:35.747

您可以执行以下操作：

```
var myQuotes = GetYourQuotesIEnumerableFromSomewhere();
// the mock constructor gets the arguments for your classes' ctor
var quoteCollectionMock = new Mock<QuoteCollection<YourIDate>>(MockBehavior.Loose, myQuotes); 

// .. setup quoteCollectionMock and assert as you please .. 
```

这是一个非常简单的例子：

```
public abstract class AbstractClass
{
    protected AbstractClass(int i)
    {
        this.Prop = i;
    }
    public int Prop { get; set; }
}
// ...
    [Fact]
    public void Test()
    {
        var ac = new Mock<AbstractClass>(MockBehavior.Loose, 10);
        Assert.Equal(ac.Object.Prop, 10);
    } 
```

# git - 如何在 Github 中将开发分支设置为默认分支而不是 master？

> ID：12759615
> 
> 赞同：11
> 
> 时间：2012-10-06T12:04:08.813
> 
> 标签：git, github

我知道这可以在存储库的管理页面上完成。可以在那里设置另一个默认分支。这就是这个问题的答案。

但我发现（可能是一个错误？）以下内容。如果您的 master 分支和 develop 分支完全相同，那么 git clone 不会克隆默认的“develop”分支，但仍然是“master”！如果您向开发分支提交某些内容，删除您的克隆，然后再次克隆，您将获得开发分支！

这是 Git 行为还是 Github？并且可以修复它以使其始终发展吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-06T22:41:17.770

# android - ListView 项中的 TableRow

> ID：12759617
> 
> 赞同：0
> 
> 时间：2012-10-06T12:04:10.987
> 
> 标签：android, android-layout

我有一个`ListView`其中每一行都有以下
1。2 `TextView`
。`Button`

`TextView`s 可以包含多种长度的文本。所以列表以一种尴尬的方式出现。我认为解决方法是将每个 List 项设置为具有 2 个单元格（TextView 和 Button）的表格行。有没有办法做到这一点？或者可能有更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T12:09:05.270

您可以使用相对布局来显示该行。在相对布局中，在右侧放置一个按钮，将 align parent right 为 true，然后将 TextView 设置为 Button 的左侧以匹配父级。您也可以将 TextView 指定为单行，最后将椭圆大小指定为 true。这只是一个例子

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:gravity="center_vertical"
    android:layout_height="wrap_content" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:text="Button" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="match_parent"
        android:singleLine="true"
        android:ellipsize="end"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/button1"
        android:layout_alignBottom="@+id/button1"
        android:layout_toLeftOf="@+id/button1"
        android:text="This is your textView with a very long text. I hope this code serves your problem" />

</RelativeLayout> 
```

您还可以使用 2 个 TextView，这完全取决于您要显示的文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T12:06:59.783

LinearLayout 和它的权重属性。更多官方文档[http://developer.android.com/guide/topics/ui/layout/linear.html](http://developer.android.com/guide/topics/ui/layout/linear.html)

# .net - NamedpipeClientStream 无法连接，一直超时

> ID：12759618
> 
> 赞同：3
> 
> 时间：2012-10-06T12:04:22.490
> 
> 标签：.net, windows, named-pipes

我有一个主要基于以下内容编写的 Namedpipeserver：http:
[//msdn.microsoft.com/en-us/library/windows/desktop/aa365588](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365588(v=vs.85).aspx)
(v=vs.85).aspx 当我尝试从.NET 连接到它时使用此代码的客户端：

```
NamedPipeClientStream clientPipe = new NamedPipeClientStream(".",      
    "\\\\.\\pipe\\TTCUIHELPER_SEND_TTC_RECEIVE",PipeDirection.Out);
try
{        

    if (clientPipe != null)
    {
        clientPipe.Connect(5000);
        if (clientPipe.IsConnected == true)
        {
            byte[] bytes = pm.GetMessageData();
            clientPipe.Write(bytes, 0, bytes.Length);
            clientPipe.Flush(); 
            clientPipe.Dispose();
            clientPipe.Close();
        }
    }
}
catch (Exception Ex)
{
    System.Windows.MessageBox.Show(Ex.Message);
} 
```

然后连接总是超时。奇怪的是，如果我尝试使用 CPP 编写测试客户端，如下所示：

```
LPTSTR lpszPipename = TEXT("\\\\.\\pipe\\TTCUIHELPER_SEND_TTC_RECEIVE");
const TCHAR* lpvMessage=L"QQQQ";

HANDLE hPipe = CreateFile( 
    lpszPipename,   // pipe name 
    GENERIC_READ |  // read and write access 
    GENERIC_WRITE, 
    0,              // no sharing 
    NULL,           // default security attributes
    OPEN_EXISTING,  // opens existing pipe 
    0,              // default attributes 
    NULL);          // no template file 

// Break if the pipe handle is valid. 

DWORD cbWritten;
DWORD cbToWrite = (lstrlen(lpvMessage)+1)*sizeof(TCHAR);
_tprintf( TEXT("Sending %d byte message: \"%s\"\n"), cbToWrite, lpvMessage); 

BOOL fSuccess = WriteFile( 
    hPipe,                  // pipe handle 
    lpvMessage,             // message 
    cbToWrite,              // message length 
    &cbWritten,             // bytes written 
    NULL);                  // not overlapped 

if ( ! fSuccess) 
{
    _tprintf( TEXT("WriteFile to pipe failed. GLE=%d\n"), GetLastError() ); 
    return -1;
} 
```

然后完美无缺。如果它适用于 CPP 而不是 .NET，我会做错什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T09:33:33.193

只需从管道名称中丢失管道前缀，即仅使用名称本身：

```
"TTCUIHELPER_SEND_TTC_RECEIVE" 
```

.NET`NamedPipeClientStream`类在内部调用 Windows WriteFile API 时会为您添加前缀。

# java - MVC - SwingWorker 具有应更新视图的长时间运行进程

> ID：12759619
> 
> 赞同：6
> 
> 时间：2012-10-06T12:04:21.947
> 
> 标签：java, swing, model-view-controller, design-patterns, swingworker

**如何在使用具有长时间运行进程的 SwingWorker 时将视图与模型分离，该进程应将更新发送回控制器？**

*   我可以使用`SwingWorkers` `doInBackground()`来保持 EDT 响应，例如`model.doLongProcess()`从那里调用很棒！

*   我遇到的问题是尝试在流程完成之前取回数据，以更新视图的进度..

*   我知道我可以通过使用该方法来取回数据，`SwingWorkers` `publish()`但这我认为这迫使我`doLongProcess()`在 `doInBackground()`.

* * *

作为参考 MVC 实现我有一个看起来有点像这样：

[http://www.leepoint.net/notes-java/GUI/structure/40mvc.html](http://www.leepoint.net/notes-java/GUI/structure/40mvc.html)

```
/ structure/calc-mvc/CalcMVC.java -- Calculator in MVC pattern.
// Fred Swartz -- December 2004

import javax.swing.*;

public class CalcMVC {
    //... Create model, view, and controller.  They are
    //    created once here and passed to the parts that
    //    need them so there is only one copy of each.
    public static void main(String[] args) {

        CalcModel      model      = new CalcModel();
        CalcView       view       = new CalcView(model);
        CalcController controller = new CalcController(model, view);

        view.setVisible(true);
    }
} 
```

我有一个模型类，它将许多其他类包装在一起形成一个简单的控制器接口。

我真的不想将所有/部分/任何代码从这些类移动到控制器中 - 它不属于那里。

* * *

**更新：**

这是我正在采取的方法 - 它不是最干净的解决方案，它可能被视为`PropertyChangeSupport`在语义层面上对 .. 的滥用。

基本上所有具有长时间运行方法的低级类都会有一个`propertyChangeSupport`字段。长时间运行的方法会`firePropertyChange()`定期调用来更新方法的状态，而不一定要报告属性的变化——这就是我所说的语义滥用！

然后包装低级类的模型类捕获这些事件并发出它自己的高级`firePropertyChange`......`controller`可以监听......

**编辑：**

澄清一下，当我调用 firePropertyChange(propertyName, oldValue, newValue);

*   propertyName ---> 我滥用 propertyName 来表示一个 topicname
*   旧值 =null
*   newValue = 我要广播的消息

然后模型中的 PropertyChangeListener 或任何可以根据主题名称识别消息的地方。

因此，Iv 基本上将系统弯曲为像发布-订阅一样使用它....

* * *

我想代替上述方法，我可以向要更新的低级类添加一个进度字段，然后基于它的 firePropertyChange .. 这将符合它的预期使用方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T12:15:47.560

我认为发布/进程对是*将*数据从 SwingWorker 推送到 GUI 中。另一种传递信息的方法是让 GUI 或控件使用 PropertyChangeSupport 和 PropertyChangeListeners 从 SwingWorker 中*提取信息。*考虑

*   给你的模型一个 PropertyChangeSupport 字段，
*   给它添加和删除 PropertyChangeListener 方法
*   让它通知支持对象状态的变化。
*   让 SwingWorker 将 PropertyChangeListener 添加到模型中。
*   然后让 SwingWorker 通知控件或模型状态变化的视图。
*   SwingWorker 甚至可以使用发布/处理来自模型的更改信息。

**编辑**
关于您的更新：

> 基本上所有具有长时间运行方法的低级类都会有一个 propertyChangeSupport 字段。长时间运行的方法会定期调用 firePropertyChange() 来更新方法的状态，而不一定要报告属性的变化——这就是我所说的语义滥用！

我不建议你这样做。了解如果被监听的绑定属性没有改变，即使调用 firePC() 也不会通知任何 PropertyChangeListeners (PCL)。如果您需要轮询属性，那么我不会使用 PCL 来执行此操作。我会简单地对其进行投票，可能来自被投票的班级之外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T22:20:28.147

就我个人而言，`SwingWorker`我会创建一个公共`publish`方法，并将我的实例传递`SwingWorker`给长期运行的 Model 方法。这样，模型将更新推送到控件 ( `SwingWorker`)，然后再推送到视图。

这是一个示例 - 我将所有内容都放入一个文件中（为了运行简单），但我想通常你会有单独的文件/包来存放这些东西。

**编辑**

要将模型与控件分离，您必须有模型的观察者。我会实现一个`ProgressListener`继承`ActionListener`。该模型只是通知所有注册`ProgressListener`的人已经取得了进展。

```
import java.awt.event.*;
import java.util.*;
import javax.swing.*;

public class MVCSwingWorkerExample {

    public static void main(String[] args) {
        CalcModel      model      = new CalcModel();
        CalcView       view       = new CalcView();
        CalcController controller = new CalcController(model, view);
    }

    //Model class - contains long running methods ;)
    public static class CalcModel{

        //Contains registered progress listeners
        ArrayList<ActionListener> progressListeners = new ArrayList<ActionListener>();
        //Contains model's current progress
        public int status;

        //Takes in an instance of my control's Swing Worker
        public boolean longRunningProcess(MVCSwingWorkerExample.CalcController.Worker w){
            for(int i = 0; i < 60; i++){
                try {
                    //Silly calculation to publish some values
                    reportProgress( i==0 ? 0 : i*100/60);
                    Thread.sleep(1000);
                } catch (InterruptedException e) {
                    System.out.println("Whowsa!");
                    e.printStackTrace();
                }
            }
            return true;
        }

        //Notify all listeners that progress was made
        private void reportProgress(int i){
            status = i;
            ActionEvent e = new ActionEvent(this, ActionEvent.ACTION_FIRST, null);
            for(ActionListener l : progressListeners){
                l.actionPerformed(e);
            }
        }

        //Standard registering of the listeners
        public void addProgressListener(ActionListener l){
            progressListeners.add(l);
        }

        //Standard de-registering of the listeners
        public void removeProgressListener(ActionListener l){
            progressListeners.remove(l);
        }
    }

    //View Class - pretty bare bones (only contains view stuff)
    public static class CalcView{
        Box display;
        JButton actionButton;
        JLabel progress;

        public void buildDisplay(){
            display = Box.createVerticalBox();
            actionButton = new JButton("Press me!");
            display.add(actionButton);

            progress = new JLabel("Progress:");
            display.add(progress);
        }

        public void start(){
            final JFrame frame = new JFrame();
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.add(display);
            frame.pack();
            frame.setLocationRelativeTo(null);
            frame.setVisible(true);
        }
    }

    public static class CalcController{
        CalcModel model;
        CalcView view;

        public CalcController(CalcModel model, CalcView view){
            this.model = model;
            this.view = view;

            //Build the view
            view.buildDisplay();

            //Create an action to add to our view's button (running the swing worker)
            ActionListener buttonAction = new ActionListener(){
                @Override
                public void actionPerformed(ActionEvent e) {
                    Worker w = new Worker();
                    w.execute();
                }
            };
            view.actionButton.addActionListener(buttonAction);

            //Start up the view
            view.start();

        }

        //Notified when the Model updates it's status
        public class ProgressListener implements ActionListener{
            Worker w;

            public ProgressListener(Worker w){
                this.w = w;
            }

            @Override
            public void actionPerformed(ActionEvent e) {
                CalcModel model = (CalcModel)e.getSource();
                w.publishValue(model.status);
            }

        }

        //The worker - usually part of the control
        public class Worker extends SwingWorker<Boolean, Integer>{

            public Worker(){
                //Register a listener to pay attention to the model's status
                CalcController.this.model.addProgressListener(new ProgressListener(this));
            }

            @Override
            protected Boolean doInBackground() throws Exception {
                //Call the model, and pass in this swing worker (so the model can publish updates)
                return model.longRunningProcess(this);
            }

            //Expose a method to publish results
            public void publishValue(int i){
                publish(i);
            }

              @Override
              protected void process(java.util.List<Integer> chunks){
                  view.progress.setText("Progress:" + chunks.get(chunks.size()-1) + "%");
              }

             @Override
               protected void done() {
                   try {
                       view.progress.setText("Done");
                   } catch (Exception ignore) {
                   }
               }
        }
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T16:07:34.147

对于 Swing 下长时间运行的进程，您必须为此创建一个新线程，因此当此过程完成后，您必须在“Swing 线程”中更新 MVC，记住每个应用程序只有一个。

尝试找到一种方法让您的应用程序正在处理的用户知道，并且不要让他再次“乘法”，直到完成。

```
public class CalcController {

////////////////////////////////////////// inner class MultiplyListener
/**
 * When a mulitplication is requested. 1\. Get the user input number from the
 * View. 2\. Call the model to mulitply by this number. 3\. Get the result
 * from the Model. 4\. Tell the View to display the result. If there was an
 * error, tell the View to display it.
 */
class MultiplyListener implements ActionListener {

    public void actionPerformed(ActionEvent e) {
        final String userInput = m_view.getUserInput();
        new Thread(new Runnable() {
            @Override
            public void run() {
                try {
                    m_model.multiplyBy(userInput);
                } catch (NumberFormatException nfex) {
                    SwingUtilities.invokeLater(new Runnable() {
                        @Override
                        public void run() {
                            m_view.showError("Bad input: '" + userInput + "'");
                        }
                    });
                }
                SwingUtilities.invokeLater(new Runnable() {
                    @Override
                    public void run() {
                        m_view.setTotal(m_model.getValue());
                    }
                });
            }
        }).start();

    }
}//end inner class MultiplyListener

} 
```

# maven - Apache Felix Maven 插件不工作

> ID：12759622
> 
> 赞同：5
> 
> 时间：2012-10-06T12:04:43.150
> 
> 标签：maven, apache-felix

简单的。这是 maven pom.xml 中的 felix 插件：

```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.5.1</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>

        <!-- allows the route to be ran via 'mvn camel:run' -->
        <!-- <plugin> <groupId>org.apache.camel</groupId> <artifactId>camel-maven-plugin</artifactId> 
            <version>2.10.1</version> </plugin> -->

        <plugin>
            <groupId>org.apache.felix</groupId>
            <artifactId>maven-bundle-plugin</artifactId>
            <extensions>true</extensions>
            <configuration>
                <instructions>
                    <Bundle-SymbolicName>xyz</Bundle-SymbolicName>
                     <Export-Package>tutorial.simplerouter</Export-Package>
                </instructions>
            </configuration>
        </plugin>
    </plugins>
</build>` 
```

并且它没有正确生成 MANIFEST.MF 文件：

```
Manifest-Version: 1.0
Archiver-Version: Plexus Archiver
Created-By: Apache Maven
Built-By: rb
Build-Jdk: 1.6.0_35 
```

以上生成的 manifest.mf 是不正确的。

请告诉我为什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-07-02T18:58:35.587

也许有点晚了，但我曾经遇到过类似的问题。我通过添加`<packaging>bundle</packaging>`到 POM 来解决。

# asp.net - 使用比较验证器比较两个日期

> ID：12759626
> 
> 赞同：0
> 
> 时间：2012-10-06T12:05:03.437
> 
> 标签：asp.net

我正在尝试比较两个日期文本框以确保一个日期大于另一个日期。即使日期更大，我也会在拒绝此规则的情况下得到不稳定的响应。这段代码有什么问题吗？这是我的定义

```
 <asp:CompareValidator ID="CompareValidator1" runat="server" 
                    ControlToCompare="txtStDt" ControlToValidate="txtEdDt" 
                    ErrorMessage="End date must be later than the start date!" 
                    Operator="GreaterThan" Type="Date"  ValidationGroup="VG1">  
 </asp:CompareValidator> 
```

我在两个日期的文本框中与日历扩展器一起使用的日期格式是“dd/MMM/yyyy”。感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T12:09:50.980

确保在页面开头添加此内容并尝试比较以查看是否得到正确的结果

```
<%@ Page Language="C#" AutoEventWireup="false"
  CodeFile="Default.aspx.cs" Inherits="_Default" Culture="en-GB" %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T14:21:23.330

这取决于您的日期格式。您的代码仅适用于英国日期格式。[这](http://geekswithblogs.net/ptahiliani/archive/2009/07/04/how-to-use-compare-validator-with-ddmmyyyy-format-of-date.aspx)是一个例子。

# jquery - jquery ajax http状态码

> ID：12759627
> 
> 赞同：6
> 
> 时间：2012-10-06T12:05:03.850
> 
> 标签：jquery, ajax

我现在正在将我的脚本更改为 jquery。这是我的旧 JavaScript：

```
var request = (window.XMLHttpRequest) ? new XMLHttpRequest() : (window.ActiveXObject ? new window.ActiveXObject("Microsoft.XMLHTTP") : false);
request.open("GET", url, true);
request.onreadystatechange = updatePage;
request.send(null);

function updatePage() {
        if (request.readyState == 4) {
                if (request.status == 200) {
                    var response = request.responseText;
                    doSomething();
                } else if (request.status == 304) {
                    doSomethingElse();
                } else {
                }
        }
} 
```

我现在想将其更改为 jquery-ajax：

```
request = $.ajax({
    type: "GET",
    url: url,
    data: data,
    success: updatePage
}); 
```

如何测试请求返回的状态代码（和 responseText），就像我在旧脚本中所做的那样？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-06T12:07:39.033

试试这个：

```
request = $.ajax({
    type: "GET",
    url: url,
    data: data,
    statusCode: {
      200: function() {
        doSomething();
       },
      304:function(){
        doSomethingElse();
       }
     }
}); 
```

或者：

```
request = $.ajax({
    type: "GET",
    url: url,
    data: data,
    complete: function(e, xhr, settings){
       if(e.status === 200){

       }else if(e.status === 304){

       }else{

       }
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T12:09:29.900

您只需将此请求绑定到按钮单击或类似的事件

```
$('#btn').click({function(){
$.ajax({
    type: "GET",
    url: url,
    data: data,
    success: updatePage
});
}); 
```

您不需要真正针对变量保留此请求，因为**jQuery ajax**有一个**成功回调**，它将帮助您执行成功后的代码

# iphone - 在 box2d 中设置用户数据

> ID：12759628
> 
> 赞同：0
> 
> 时间：2012-10-06T12:05:18.367
> 
> 标签：iphone, objective-c, cocos2d-iphone, box2d

我正在 box2d / cocos2d 中编写一个游戏，其中的东西从天上掉下来，当它们接触到地板或玩家时，它们应该从场景中移除。我已经`ContactListener`按照[Ray Wenderlich 的教程](http://www.raywenderlich.com/606/how-to-use-box2d-for-just-collision-detection-with-cocos2d-iphone)实现了一个，但它的问题是，任何时候任何东西触及它都会被删除。

我需要的是某种方式来知道哪些是可以删除的对象。我看到`SetUserData`Box2d 中有一个函数，我可以在其中设置数据，但它不会接受`int`s 并且似乎只接受一个似乎增加了不必要的复杂性的类。

实现我想要的最简单的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T14:23:19.207

试试这个：

```
int yourInt = 2012;
body->SetUserData(@(yourInt)); 
```

它使用新的 Objective-C 文字语法将原始类型包装`int`在对象中。该对象被包裹在一个`NSNumber`.

`@(yourInt)`相当于说`[NSNumber numberWithInt:yourInt]`

# jsf - 优雅地处理“无法重建视图状态”错误

> ID：12759636
> 
> 赞同：1
> 
> 时间：2012-10-06T12:05:58.000
> 
> 标签：jsf, jsf-2, websphere

我的应用程序在 Apache MyFaces V2.0 上。应用服务器是 WebSphere V8.0。在使用如下 URL 进行安全测试期间，应用程序在浏览器中呈现错误，从而暴露应用程序服务器详细信息。我在 web.xml 中有以下条目。请提出一个解决方案来优雅地处理这种情况。

**Web.xml**

```
<error-page>
<exception-type>javax.faces.application.ViewExpiredException</exception-type>
<location>/error.xhtml</location>
</error-page>
<error-page>
<error-code>500</error-code>
<location>/error/error500.xhtml</location>
</error-page> 
```

**网址**

> localhost/app/test.xhtml?emailId=test1@abcd.com&clickSubmit=Save&javax.faces.ViewState=83eNclk%2FbIe05NjdSUOQtQqlm5FVhzOBEHXMRHzqXhuC7fG%2BpJS9xRI%2BxN9tCjZIPg2dA3%2B8Xdor%2Bj40Wjiy%2FxO3J%2Bu0lbQJFHXnGNxYwUUh102oPNugRXQAmHNJsjYDnxwh9w%3D%3D

**错误：**

> 错误页面异常
> 
> SRVE0260E: 服务器无法使用为您的应用程序指定的错误页面来处理下面打印的原始异常。
> 
> 原始例外：
> 
> 错误消息：javax.servlet.ServletException：/app/test.xhtml 找不到视图标识符的保存视图状态：/app/test.xhtml 错误代码：500 目标 Servlet：Faces Servlet 错误堆栈：javax.faces.application .ViewExpiredException org.apache.myfaces.lifecycle.RestoreViewExecutor.execute(RestoreViewExecutor.java:128)
> 
> ```
>  at org.apache.myfaces.lifecycle.LifecycleImpl.executePhase(LifecycleImpl.java:171)
> 
>  at org.apache.myfaces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
> 
>  at javax.faces.webapp.FacesServlet.service(FacesServlet.java:189) 
>  at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1224)
> 
>  at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:774)
> 
>  at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:456)
> 
>  at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:178)
> 
>  at com.ibm.ws.webcontainer.filter.WebAppFilterChain.invokeTarget(WebAppFilterChain. 
> ```

# c++ - NMake 模式规则

> ID：12759638
> 
> 赞同：7
> 
> 时间：2012-10-06T12:06:00.237
> 
> 标签：c++, compilation, makefile, nmake

嗨，我决定尝试学习如何通过命令行和 makefile 构建程序，而不是依赖 Visual Studio 来为我做这件事。在熟悉了编译成 .obj 文件和链接的过程之后，我开始使用 NMake。我编写了一个基本的 makefile 来尝试将位于多个文件夹中的源文件编译为 .obj 文件，将 .obj 文件的每个文件夹链接到 .lib 文件，然后将 .lib 文件链接到 .exe 文件。

```
CC=cl /c /EHsc /Fo
LIB=lib /OUT:
LINKER=link /OUT:
EXEC_NAME=Test.exe
DEL=del
MAKE=nmake
OUT=.\out

all: $(OUT)\*.lib
    $(LINKER)$(EXEC_NAME) *.lib

clean:
    $(DEL) $(OUT)

rebuild:
    $(MAKE) clean
    $(MAKE) all

$(OUT)%.lib: $(OUT)\%\*.obj
    $(LIB)%.lib $(OUT)%\*.obj

%(OUT)\%\:
    $(CC)$(OUT)\%\ .\%\*.cpp 
```

当我尝试运行它时，`nmake all`它告诉我：`NMAKE : fatal error U1073: don't know how to make '.\out\*.lib'`

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-04-10T08:21:11.813

可以理解，这个问题被忽略了一年半，但最近吸引了 4 票。

实际上没有提出任何问题，但隐含的问题是：*为什么不能`nmake`在我的 makefile 中遵循 %-pattern 规则？*

答案是 MS`nmake`根本不支持 %-pattern 规则。[MS`nmake`](http://msdn.microsoft.com/en-us/library/dd9y37ha.aspx)及其[推理规则](http://msdn.microsoft.com/en-us/library/4hxwz9ch.aspx)的文档很容易找到。

[GNU`make`](https://www.gnu.org/software/make/)和其他一些制作工具支持[%-pattern 规则](http://www.gnu.org/software/make/manual/html_node/Pattern-Rules.html)。`make`由于明显的错误，这里的 makefile 在 GNU 中也会失败。

# redirect - Joomla JError 不显示但随后出现

> ID：12759643
> 
> 赞同：0
> 
> 时间：2012-10-06T12:06:35.767
> 
> 标签：redirect, joomla

我有设置 JError 警告的 3d 方组件

```
JError::raiseWarning( 99, "Set your name please" );
$app = JFactory::getApplication();
$app->redirect($r); 
```

重定向到带有代码的控制器

```
function saveUserDetails(){
//some code here

//now I try to get that error which was set by raiseWarning
$other_errors = JError::getErrors();
print_r($other_errors);
die; 
```

它只返回空数组。为什么它不包含该错误？

好的，我尝试使用 Joomla 消息检查会话变量

```
$session =& JFactory::getSession();
$mes = $session->get('application.queue');
print_r($mes);
die; 
```

又是空的。这个错误在哪里，我无法理解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-20T13:49:18.103

如果在重定向后立即有新请求，您可能会丢失会话变量（JError 内容），使用 FireBug、Net 选项卡检查触发的请求，看看那里发生了什么。发布您获得的任何信息，但如果它不在 JErrors 中，则不应显示在网站上。

您能否提供指向实时站点的链接，以便我可以在那里进行测试并查看可以提供帮助的 HTTP 请求。

# java - 使用设计模式是否会使 java 代码变慢？

> ID：12759650
> 
> 赞同：7
> 
> 时间：2012-10-06T12:07:06.443
> 
> 标签：java, performance, design-patterns

使用设计模式是否会使 java 代码变慢？如果我使用额外的接口和语法结构（如类包装），我是否会组织得很好但代码很慢，或者不会让我的代码明显变慢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-06T12:09:36.377

这*不会*使您的代码*明显*变慢。由于某些函数调用包含在其他类或方法中，因此某些方法调用会慢一些，但人类不会注意到这一点。大约是纳秒。总是更喜欢具有良好可读性和可重用代码的优势。

我是一个高性能应用程序，您应该考虑在基于模式设计和实现代码*后将代码重构为更高的性能。*但通常这不是必需的。

和往常一样：这取决于使用的模式和程序的用例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-06T12:24:48.927

按照你的思路，一开始就不应该使用 Java，因为它充满了抽象层，可以更方便地编写正确和可维护的代码，但会将其速度降低到汇编程序或 C 的速度以下。如果你担心包装器使您的代码显着变慢，您可能有一个用例使 C 比 Java 更适合。

另一方面，您**绝对**应该注意不要过度设计和在代码中看到的每个问题上抛出大量模式。明智地使用模式，你可以清楚地看到好处，而不仅仅是你看到模式理论上可能适合的地方。

我更喜欢编码的方式是首先制作最简单、最愚蠢的解决方案来解决我的直接问题。如果以后我必须添加一两个更多类似的功能，从而导致代码重复或其他代码异味，我才会考虑引入适当的模式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T12:35:48.593

接口使您的代码更清晰，将来更容易更改，但对速度没有影响，因为它们的存在只是为了告诉编译器您的代码如何组合在一起。

设计模式模式是常见问题的常见解决方案。如果您遇到问题，请使用其中一种众所周知的解决方案。它会让你的程序变慢吗？这取决于您在可用解决方案之间做出的*选择*。您需要了解每种模式的权衡以便做出选择。

但是，如果不使用设计模式解决方案，您将使用自己的自制 DIY 解决方案；当我们这样做时，我们通常不会同时解决问题，或者解决问题的速度（在我们的时代和机器时代），或者对于未来的维护是可以理解的。最后一点是因为设计模式为我们提供了一种讨论问题和解决方案的新方式。一旦我们理解了这些新词汇，我们就可以更轻松地解决更复杂的问题。

那么它们会让你的程序变慢吗？不，他们让它发挥作用。快点。

享受你的模式阅读。如果您有实际问题要解决，它们会更有意义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T12:24:43.137

如前所述，使用设计模式的开销是微不足道的，可以肯定的是，只要看看一些像android这样需要性能的java项目的代码源，你会惊讶地发现它们都大量使用了设计模式。

然而，一些设计选择可能会影响性能，例如选择使用 List 而不是 hashmap，其中映射更合适。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-06T12:25:28.050

理想情况下，当使用允许的编程结构时，您不应该担心性能。JVM 擅长保持代码优化。大多数性能问题通常出现在我们编写与线程同步相关的代码以及我们执行 I/O（例如 DB 调用）的代码中。很少有额外的接口和类来使您的设计模块化和整洁不会受到伤害。如果您正在编写自己的依赖于使用反射和其他高级功能的框架，您可能需要小心一点，如果您做得不够理想，您可能会冒着增加性能瓶颈的风险。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-06T12:33:08.767

在大多数情况下，额外的代码包装会使代码变慢一些。但在某些情况下，这是不正确的。如果您迭代 >10 亿次迭代，额外的包装可能会明显变慢。好的做法是首先编写好的可读和可重用的代码。只有在那之后尝试分析和优化代码才会有最差的性能。通常您需要更改计算算法，但有时您需要编写解决方法代码。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-06T12:49:54.160

也许。像往常一样，在权衡时没有简单的答案。

您已经确定使用某种模式会使代码更清晰，但这可能会以牺牲性能为代价。所以你会怎么做？你用你最好的判断。通常这可能是首先尝试该模式，然后测试它是否足够快，然后根据需要进行优化。有时您已经知道它必须尽可能快，或者相反，代码不是性能关键的。

# java - 如何在 hadoop 应用程序中覆盖 InputFormat 和 OutputFormat

> ID：12759651
> 
> 赞同：1
> 
> 时间：2012-10-06T12:07:14.010
> 
> 标签：java, hadoop, io

我有一个应用程序需要读取一个文件，该文件是 ArrayList 的序列化结果。（`ArrayList<String>`，此列表中有 50000 条记录，大小：20MB）我不知道如何将数据读取到 hadoop 平台。我只知道我需要覆盖 InputFormat 和 OutpurFormat。我是hadoop平台的初学者。你能给我一些建议吗？

谢谢，

郑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T13:09:23.130

首先，您需要扩展 FileInputFormat，特别是实现抽象[FileInputFormat.createRecordReader](http://hadoop.apache.org/docs/r1.0.3/api/org/apache/hadoop/mapreduce/InputFormat.html#createRecordReader%28org.apache.hadoop.mapreduce.InputSplit,%20org.apache.hadoop.mapreduce.TaskAttemptContext%29)方法。

您可以查看[LineRecordReader](http://svn.apache.org/viewvc/hadoop/common/tags/release-1.0.3/src/mapred/org/apache/hadoop/mapreduce/lib/input/LineRecordReader.java?view=markup)（这是[TextInputFormat](http://svn.apache.org/viewvc/hadoop/common/tags/release-1.0.3/src/mapred/org/apache/hadoop/mapreduce/lib/input/TextInputFormat.java?view=markup)用于处理文本文件的内容）之类的源代码。

从那里你几乎是靠你自己的（即这取决于你的 ArrayList 是如何被序列化的）。查看 LineRecordReader 的源代码，并尝试将其与 ArrayList 的序列化方式相关联。

其他一些注意事项，您的文件格式是否可拆分？即，您是否可以在文件中寻找偏移量并从那里恢复流（文本文件可以，因为它们只是向前扫描到当前行的末尾，然后从那里开始）。如果您的文件格式使用压缩，您还需要考虑到这一点（例如，您不能随机寻找 gzip 文件中的某个位置）。默认情况下 FileInputFormat.isSplittable 将返回 true，您可能希望最初将其覆盖为 false。如果您坚持使用“不可分割”，请注意您的文件将由单个映射器处理（不管它的大小）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T21:46:44.117

在 Hadoop 上处理数据之前，您应该将数据上传到 HDFS 或其他支持的文件系统，如果它不是由其他东西上传到这里的话。如果您正在控制上传过程，您可以将上传阶段的数据转换为您可以轻松处理的内容，例如：

*   简单文本文件（每个数组项的行）
*   如果数组可以包含带有 '\n' 的行，则 SequenceFile

这是最简单的解决方案，因为您不必干预 Hadoop 的内部结构。

# c++ - 在 C++ 中为 Parcelable 选择数据

> ID：12759653
> 
> 赞同：3
> 
> 时间：2012-10-06T12:07:34.920
> 
> 标签：c++

在我之前用 CI 编写的程序中，我需要一个对象，其中包含多个“核心”数据，程序中的所有函数都可以访问这些数据，我最终选择了 a`struct`并且我使用了指向该结构的指针进行读取或写入数据；它既快又好，而且很便宜，因为访问指针可能是你在 C 中可以做的最便宜的事情之一，而且我从来没有找到更好的东西，所以我对这个解决方案很满意。

现在在 C++ 中我遇到了同样的问题，我需要共享一个由一些原始类型组成的状态，我很想使用所谓的 POD 之一，这基本上意味着，`struct`再次，但这次是为了安全起见。

假设我需要在我的程序中携带这个“Blob”数据，那么通过引用访问的结构是 C++ 中最快的东西吗？*getter*方法的成本是多少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T12:15:40.350

如果您的 getter 代码是内联的（在头文件中），那么编译器可以消除在其输出的机器代码中调用函数的需要。

例如：

```
class Data
{
private:
  int number_;
public:
  int GetNumber() { return number_; }
}; 
```

编译器会看到 GetNumber 的定义，会知道它的作用很简单，以及在哪里调用了 GetNumber()，它会简单地将其替换为 number_。因此，使用 getter 与直接访问成员将产生等效的代码，并且两者都将执行相同的操作。

# c - 如何为通过指针算术计算的内存地址赋值？

> ID：12759656
> 
> 赞同：0
> 
> 时间：2012-10-06T12:08:15.217
> 
> 标签：c, pointers, lvalue

我需要创建一个完全通用的链表，它可以包含枚举指定的任何类型的数据......

列表的一个节点具有以下结构：

```
 __________________
  |_____|_____|_____| 
```

第一个字段是 sizeof(nodeType) 字节，包含存储的信息类型。下一个字段的地址包含信息变量的地址。下一个字段具有下一个节点的地址，它可以是一个简单的节点或另一个链表。

基本上，我有一个 nodeType 枚举为：

```
 typedef enum{
    STRING, INT, NIL, LIST
 } nodType; 
```

我已经为这样的节点指针分配了内存：

```
 nodeType* node = malloc(sizeof(nodeType) + 2*sizeof(char*)); 
```

第一个 sizeof(nodeType) 字节包含存储的信息类型。我通过表达式为它分配了值 STRING：

```
 *node = STRING; 
```

现在，我希望下一个 sizeof(char*) 字节存储 char* 指针的地址。（机器上的所有指针都具有相同的大小？（是的，根据我的说法））.. 所以，我给它分配了一个值，例如：

```
 char* str = strdup("Hello");
 (char**)(char*(node) + sizeof(nodeType)) = &str; 
```

但是 GCC 会标记一个错误，因为赋值运算符的 LHS 不是左值。我需要为该地址分配值才能继续构建该列表。除了使用结构之外，在 c 中是否有一些优雅的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T12:12:54.410

你忘了取消引用：

```
*(char***)((char*)node + sizeof(nodeType)) = &str; 
```

取消引用操作的结果始终是左值。通常，如果您想将内存位置`p`视为指向类型的变量`T`，则需要将其强制转换为 a`T *`并取消引用：

```
*(T*)(p) = my_t_value; 
```

这适用于`T = char **`和的情况`p = (char *) node + sizeof(nodeType)`。

但这只是糟糕的设计。任何理智的人都不应该包含`***`. 此外，假设您的所有元素在内存中连续跟随，您可能会违反对齐约束。一个更简单的方法是这样的：

```
struct Node
{
    struct Node * next;

    nodType type;
    void * data;
}; 
```

用法：

```
struct Node * p = malloc(sizeof *p);
p->next = NULL;
p->type = STRING;
p->data = str; 
```

请注意，我选择将字符串直接存储为 a `char *`，而*不是*指向 a 的指针`char *`。统一的主题应该是列表节点拥有`p->data`并且应该`free(p->data);`在无条件删除节点时说。

# macos - 使用不同版本编译的 MacOSX 框架

> ID：12759666
> 
> 赞同：1
> 
> 时间：2012-10-06T12:09:17.993
> 
> 标签：macos, compiler-construction, frameworks

据我所知，可以在 Windows 中使用使用不同编译器版本编译的 DLL。MacOSX 框架是否具有相同的功能？也就是说，我可以用一个编译器编译一个框架，然后在使用不同编译器版本的程序中使用该框架吗？

我问的原因是需要编译一个输出框架的开源项目。该项目无法使用 gcc4.7 构建，我的代码使用 gcc4.7 功能。

# ios - 阅读 iPhone 崩溃日志时遇到问题？

> ID：12759670
> 
> 赞同：-2
> 
> 时间：2012-10-06T12:09:52.260
> 
> 标签：ios, crash-reports

我的朋友在我的应用程序在他的设备上崩溃后给我发了一份崩溃日志，但我不完全确定这意味着什么。这就是我认为的意思-由于调度队列SetupTimelineThumbnails的问题而崩溃。我可以从中获得任何进一步的信息，或者以任何方式更具体地说明问题可能是什么？

编辑：这是导入 XCode 管理器后的崩溃日志。在存档的版本中，我有 .dSYM 但除了导入它之外，我不知道如何配对它，如果它还没有的话。

```
Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x0000000000000000, 0x0000000000000000
Crashed Thread:  3

Last Exception Backtrace:
0   CoreFoundation                  0x398ec3e2 0x3982a000 + 795618
1   libobjc.A.dylib                 0x3445195e 0x34449000 + 35166
2   CoreFoundation                  0x39880736 0x3982a000 + 354102
3   CoreFoundation                  0x39880682 0x3982a000 + 353922
4   App                     0x00103844 0xe9000 + 108612
5   App                     0x001029cc 0xe9000 + 104908
6   App                     0x0012e7f6 0xe9000 + 284662
7   libdispatch.dylib               0x3286a78e 0x32869000 + 6030
8   libdispatch.dylib               0x3286db36 0x32869000 + 19254
9   libdispatch.dylib               0x3286b678 0x32869000 + 9848
10  libdispatch.dylib               0x3286e60e 0x32869000 + 22030
11  libdispatch.dylib               0x3286e7d4 0x32869000 + 22484
12  libsystem_c.dylib               0x36e0f7ec 0x36e09000 + 26604
13  libsystem_c.dylib               0x36e0f680 0x36e09000 + 26240

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0:
0   CoreFoundation                  0x3982de1e 0x3982a000 + 15902
1   CoreFoundation                  0x398b2024 0x3982a000 + 557092
2   CoreFoundation                  0x398afd80 0x3982a000 + 548224
3   CoreFoundation                  0x39874c3c 0x3982a000 + 306236
4   Foundation                      0x37b9dd4e 0x37b74000 + 171342
5   Foundation                      0x37b9dbe6 0x37b74000 + 170982
6   App                     0x000f738e 0xe9000 + 58254
7   App                     0x0012e07c 0xe9000 + 282748
8   UIKit                           0x3509d534 0x3504f000 + 320820
9   UIKit                           0x35082354 0x3504f000 + 209748
10  UIKit                           0x350997f2 0x3504f000 + 305138
11  UIKit                           0x3505588a 0x3504f000 + 26762
12  QuartzCore                      0x39fe34e6 0x39fe0000 + 13542
13  QuartzCore                      0x39fe3088 0x39fe0000 + 12424
14  QuartzCore                      0x39fe3fac 0x39fe0000 + 16300
15  QuartzCore                      0x39fe3996 0x39fe0000 + 14742
16  QuartzCore                      0x39fe37a8 0x39fe0000 + 14248
17  QuartzCore                      0x39fe360c 0x39fe0000 + 13836
18  CoreFoundation                  0x398c193e 0x3982a000 + 620862
19  CoreFoundation                  0x398bfc34 0x3982a000 + 613428
20  CoreFoundation                  0x398bff8e 0x3982a000 + 614286
21  CoreFoundation                  0x39833238 0x3982a000 + 37432
22  CoreFoundation                  0x398330c4 0x3982a000 + 37060
23  GraphicsServices                0x3971e336 0x39719000 + 21302
24  UIKit                           0x350a6284 0x3504f000 + 356996
25  App                     0x000ea6ee 0xe9000 + 5870
26  App                     0x000ea6a4 0xe9000 + 5796

Thread 1:
0   libsystem_kernel.dylib          0x3a2bcd98 0x3a2ab000 + 73112
1   libsystem_c.dylib               0x36e0fad6 0x36e09000 + 27350
2   libsystem_c.dylib               0x36e0f7f2 0x36e09000 + 26610
3   libsystem_c.dylib               0x36e0f680 0x36e09000 + 26240

Thread 2 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 2:
0   libsystem_kernel.dylib          0x3a2ac5d0 0x3a2ab000 + 5584
1   libdispatch.dylib               0x3286fd22 0x32869000 + 27938
2   libdispatch.dylib               0x3286b374 0x32869000 + 9076

Thread 3 name:  Dispatch queue: com.App.SetupTimelineThumbnails
Thread 3 Crashed:
0   libsystem_kernel.dylib          0x3a2bc350 0x3a2ab000 + 70480
1   libsystem_c.dylib               0x36e37fb2 0x36e09000 + 192434
2   libsystem_c.dylib               0x36e74366 0x36e09000 + 439142
3   libc++abi.dylib                 0x387c6dda 0x387c3000 + 15834
4   libc++abi.dylib                 0x387c4094 0x387c3000 + 4244
5   libobjc.A.dylib                 0x34451a58 0x34449000 + 35416
6   libc++abi.dylib                 0x387c4118 0x387c3000 + 4376
7   libc++abi.dylib                 0x387c41b0 0x387c3000 + 4528
8   libc++abi.dylib                 0x387c559a 0x387c3000 + 9626
9   libobjc.A.dylib                 0x3445199e 0x34449000 + 35230
10  CoreFoundation                  0x39880736 0x3982a000 + 354102
11  CoreFoundation                  0x39880682 0x3982a000 + 353922
12  App                     0x00103844 0xe9000 + 108612
13  App                     0x001029cc 0xe9000 + 104908
14  App                     0x0012e7f6 0xe9000 + 284662
15  libdispatch.dylib               0x3286a790 0x32869000 + 6032
16  libdispatch.dylib               0x3286db36 0x32869000 + 19254
17  libdispatch.dylib               0x3286b678 0x32869000 + 9848
18  libdispatch.dylib               0x3286e610 0x32869000 + 22032
19  libdispatch.dylib               0x3286e7d4 0x32869000 + 22484
20  libsystem_c.dylib               0x36e0f7ee 0x36e09000 + 26606
21  libsystem_c.dylib               0x36e0f680 0x36e09000 + 26240

Thread 4 name:  WebThread
Thread 4:
0   libsystem_kernel.dylib          0x3a2abe30 0x3a2ab000 + 3632
1   libsystem_kernel.dylib          0x3a2abfd0 0x3a2ab000 + 4048
2   CoreFoundation                  0x398c12b6 0x3982a000 + 619190
3   CoreFoundation                  0x398c002c 0x3982a000 + 614444
4   CoreFoundation                  0x39833238 0x3982a000 + 37432
5   CoreFoundation                  0x398330c4 0x3982a000 + 37060
6   WebCore                         0x35a46a80 0x35a3c000 + 43648
7   libsystem_c.dylib               0x36e1a0de 0x36e09000 + 69854
8   libsystem_c.dylib               0x36e19fa4 0x36e09000 + 69540

Thread 5:
0   libsystem_kernel.dylib          0x3a2bcd98 0x3a2ab000 + 73112
1   libsystem_c.dylib               0x36e0fad6 0x36e09000 + 27350
2   libsystem_c.dylib               0x36e0f7f2 0x36e09000 + 26610
3   libsystem_c.dylib               0x36e0f680 0x36e09000 + 26240

Thread 3 crashed with ARM Thread State (32-bit):
    r0: 0x00000000    r1: 0x00000000      r2: 0x00000000      r3: 0x3b551524
    r4: 0x00000006    r5: 0x003d5000      r6: 0x1dd4bb84      r7: 0x003d4c44
    r8: 0x1dd4bb60    r9: 0x00000300     r10: 0x00187a28     r11: 0x00000000
    ip: 0x00000148    sp: 0x003d4c38      lr: 0x36e37fb7      pc: 0x3a2bc350
  cpsr: 0x00000010

Binary Images:
   0xe9000 -   0x1befff +App armv7s  <bfbf44f854863f9a86cf808b00ba9536> /var/mobile/Applications/CB5BADE5-F797-425E-BF52-1E8F3F005CC4/App.app/App
 0x2ba2000 -  0x2ba6fff  AccessibilitySettingsLoader armv7s  <c21cac592f853fc09a46657db46d57bc> /System/Library/AccessibilityBundles/AccessibilitySettingsLoader.bundle/AccessibilitySettingsLoader
0x2fe86000 - 0x2fea6fff  dyld armv7s  <4047d926f58e36b98da92ab7a93a8aaf> /usr/lib/dyld
0x3123a000 - 0x3123ffff  IOMobileFramebuffer armv7s  <063f79a2305230b89900c04b76378a30> /System/Library/PrivateFrameworks/IOMobileFramebuffer.framework/IOMobileFramebuffer
0x31265000 - 0x3126ffff  IAP armv7s  <f2e6932e29f53497b95c7e50c3f9923f> /System/Library/PrivateFrameworks/IAP.framework/IAP
0x3135d000 - 0x31385fff  PrintKit armv7s  <455c5c48113536f19941597829f5cc4c> /System/Library/PrivateFrameworks/PrintKit.framework/PrintKit
0x313f1000 - 0x31453fff  CoreText armv7s  <0bc6f711a1ac33d39aff94b25aaa0ca9> /System/Library/Frameworks/CoreText.framework/CoreText
0x31473000 - 0x314aefff  libCGFreetype.A.dylib armv7s  <81be079eea38327bbc4359f51200d14b> /System/Library/Frameworks/CoreGraphics.framework/Resources/libCGFreetype.A.dylib
0x31578000 - 0x315cefff  CoreAudio armv7s  <d143b508df8c3bc59d278db2b2b21383> /System/Library/Frameworks/CoreAudio.framework/CoreAudio
0x315d1000 - 0x315d1fff  libCVMSPluginSupport.dylib armv7s  <915a58cccb823b83ba03668d3007ce93> /System/Library/Frameworks/OpenGLES.framework/libCVMSPluginSupport.dylib
0x316b4000 - 0x316b6fff  libcompiler_rt.dylib armv7s  <08d63fd4db4f3396811d3f3187467a51> /usr/lib/system/libcompiler_rt.dylib
0x317e1000 - 0x317e4fff  MobileSystemServices armv7s  <7f72cd5ef1ec364db87c3080862e3c13> /System/Library/PrivateFrameworks/MobileSystemServices.framework/MobileSystemServices
0x317fe000 - 0x31800fff  libCoreVMClient.dylib armv7s  <25e4ca5ddce53ba5ba2736bed63237e9> /System/Library/Frameworks/OpenGLES.framework/libCoreVMClient.dylib
0x31801000 - 0x31804fff  libcache.dylib armv7s  <9cf0ce4cf58b3e8586ded458cbc95220> /usr/lib/system/libcache.dylib
0x31805000 - 0x318bafff  CoreImage armv7s  <696af88ae10237e581e8d07e1a59b6a0> /System/Library/Frameworks/CoreImage.framework/CoreImage
0x318d0000 - 0x318fdfff  MobileAsset armv7s  <7b114cd2611739d2a98b69b0023f1de0> /System/Library/PrivateFrameworks/MobileAsset.framework/MobileAsset
0x3193c000 - 0x31951fff  libmis.dylib armv7s  <18b87986181632268bf01c995df438bf> /usr/lib/libmis.dylib
0x31983000 - 0x31984fff  CoreSurface armv7s  <bfa1ed28d7433ec5ad12745b93078f1e> /System/Library/PrivateFrameworks/CoreSurface.framework/CoreSurface
0x319ea000 - 0x319f6fff  GenerationalStorage armv7s  <5f33281960423a0abf8268cb6b9aab7f> /System/Library/PrivateFrameworks/GenerationalStorage.framework/GenerationalStorage
0x319f7000 - 0x319fefff  libsystem_notify.dylib armv7s  <a896789233633fec91d00805d21f6cc3> /usr/lib/system/libsystem_notify.dylib
0x31b41000 - 0x31b44fff  libmacho.dylib armv7s  <ce836c624c3735079b8fe7bc0f72feca> /usr/lib/system/libmacho.dylib
0x31cbf000 - 0x31ccbfff  libbsm.0.dylib armv7s  <128642f5406f38ffba77a8dc7a6d8626> /usr/lib/libbsm.0.dylib
0x31cf2000 - 0x31d16fff  Bom armv7s  <3edaffc2ff3138b6954fd2d22e355f2c> /System/Library/PrivateFrameworks/Bom.framework/Bom
0x31e8f000 - 0x31fccfff  vImage armv7s  <f2dd5658022d30198e860b960799d5da> /System/Library/Frameworks/Accelerate.framework/Frameworks/vImage.framework/vImage
0x3213d000 - 0x32144fff  OpenGLES armv7s  <387374ffea8f3408b35a5fba5e222539> /System/Library/Frameworks/OpenGLES.framework/OpenGLES
0x32145000 - 0x32190fff  libc++.1.dylib armv7s  <e8c6f2d59607309a81454875b7d93eb6> /usr/lib/libc++.1.dylib
0x323aa000 - 0x323e9fff  libGLImage.dylib armv7s  <bfcfd7a63ea53326b9b082d2446df88c> /System/Library/Frameworks/OpenGLES.framework/libGLImage.dylib
0x32417000 - 0x3241cfff  libcopyfile.dylib armv7s  <15974f7598923c18b960438d6974e425> /usr/lib/system/libcopyfile.dylib
0x32869000 - 0x32879fff  libdispatch.dylib armv7s  <2e16eff18cb734acbc785c17d8c3f234> /usr/lib/system/libdispatch.dylib
0x3298c000 - 0x3299efff  libvMisc.dylib armv7s  <912c72699619371ba4c373b6eb611bc7> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvMisc.dylib
0x3299f000 - 0x329c0fff  AccessibilityUtilities armv7s  <85081e495275387598e297b8a78b8ba9> /System/Library/PrivateFrameworks/AccessibilityUtilities.framework/AccessibilityUtilities
0x329cc000 - 0x32a52fff  libsqlite3.dylib armv7s  <1e104301acc635fdad72e4131c710495> /usr/lib/libsqlite3.dylib
0x32abf000 - 0x32ac0fff  libsystem_sandbox.dylib armv7s  <e3345ca5bafc3df2b3fb8391cc4edc67> /usr/lib/system/libsystem_sandbox.dylib
0x32ad4000 - 0x32ad7fff  MobileInstallation armv7s  <6691df41cfb435cda59a6128027475bc> /System/Library/PrivateFrameworks/MobileInstallation.framework/MobileInstallation
0x32afe000 - 0x32ca5fff  JavaScriptCore armv7s  <28a43291f5b63fe9ad803c4fb0035edd> /System/Library/PrivateFrameworks/JavaScriptCore.framework/JavaScriptCore
0x32e04000 - 0x32e08fff  IOSurface armv7s  <7f644c14a5fa3974b6aae0d8e4d0ae8a> /System/Library/PrivateFrameworks/IOSurface.framework/IOSurface
0x32e09000 - 0x32e37fff  Security armv7s  <9351745f735639b8942a016689073882> /System/Library/Frameworks/Security.framework/Security
0x33328000 - 0x33340fff  EAP8021X armv7s  <a2da6cb7c51d3258a239891eda670136> /System/Library/PrivateFrameworks/EAP8021X.framework/EAP8021X
0x3338e000 - 0x3338efff  vecLib armv7s  <2fbed315030d36afb00557a01ef2b67b> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/vecLib
0x333d3000 - 0x333e4fff  SpringBoardServices armv7s  <df3a7b3919923ed3b76e44e73a7090c5> /System/Library/PrivateFrameworks/SpringBoardServices.framework/SpringBoardServices
0x333e5000 - 0x333ebfff  libcommonCrypto.dylib armv7s  <7ea4bde974e83e06a8b3989b5f3c1031> /usr/lib/system/libcommonCrypto.dylib
0x3343b000 - 0x3343bfff  libSystem.B.dylib armv7s  <a3047fed3a583589bc1f9d5c68049da3> /usr/lib/libSystem.B.dylib
0x33460000 - 0x3349ffff  VideoToolbox armv7s  <cf6e97840d3539d49aeb8d0725151862> /System/Library/Frameworks/VideoToolbox.framework/VideoToolbox
0x334a0000 - 0x334a1fff  libdyld.dylib armv7s  <1133e18b4478308f95174734844e7cdb> /usr/lib/system/libdyld.dylib
0x334ad000 - 0x33645fff  MediaPlayer armv7s  <169a0a92b760331dae44a764d3635113> /System/Library/Frameworks/MediaPlayer.framework/MediaPlayer
0x33803000 - 0x33818fff  libresolv.9.dylib armv7s  <5310b06eb73a30fd8dbbbc7acc469d4a> /usr/lib/libresolv.9.dylib
0x3392a000 - 0x33be0fff  libLAPACK.dylib armv7s  <353bf25ab0d7351ca5168b1818c52a47> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libLAPACK.dylib
0x33c9f000 - 0x33d1cfff  HomeSharing armv7s  <267e27e410a53e9da541c3f7c2c566d3> /System/Library/PrivateFrameworks/HomeSharing.framework/HomeSharing
0x3411a000 - 0x34132fff  libsystem_info.dylib armv7s  <98afac2b9acf30c8a946d4afa54a60a6> /usr/lib/system/libsystem_info.dylib
0x34133000 - 0x34222fff  GeoServices armv7s  <fd66be0c386134aca3e1bb5414d1edd8> /System/Library/PrivateFrameworks/GeoServices.framework/GeoServices
0x34225000 - 0x3436efff  libicucore.A.dylib armv7s  <21afcbd26a6c3e31926ea9c2d8d31fc7> /usr/lib/libicucore.A.dylib
0x34374000 - 0x3439afff  libtidy.A.dylib armv7s  <016edc61ab923313991234f181ff8236> /usr/lib/libtidy.A.dylib
0x34449000 - 0x34547fff  libobjc.A.dylib armv7s  <40751f7e35b234caafba6639cbaa0dcc> /usr/lib/libobjc.A.dylib
0x3454a000 - 0x347d1fff  AudioToolbox armv7s  <1a06093bee1d310eb2e3fb356594ef36> /System/Library/Frameworks/AudioToolbox.framework/AudioToolbox
0x3485c000 - 0x34871fff  libxpc.dylib armv7s  <f1d00111e2403b58847450f12b7ab516> /usr/lib/system/libxpc.dylib
0x34874000 - 0x34874fff  Accelerate armv7s  <7f55d59e8dbc3675b1a4360f29fdc0f2> /System/Library/Frameworks/Accelerate.framework/Accelerate
0x34942000 - 0x34948fff  MobileKeyBag armv7s  <dfd64f821a0138a490d05c4b3d01e7ac> /System/Library/PrivateFrameworks/MobileKeyBag.framework/MobileKeyBag
0x34949000 - 0x3496dfff  OpenCL armv7s  <d124287f1bf03b2086e4be5b47414c46> /System/Library/PrivateFrameworks/OpenCL.framework/OpenCL
0x34997000 - 0x34a83fff  libBLAS.dylib armv7s  <647bee17a96830faae7fc43e1884c64a> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libBLAS.dylib
0x34a84000 - 0x34a89fff  CrashReporterSupport armv7s  <c76159e71f3b3a52aa432af6f67d4a62> /System/Library/PrivateFrameworks/CrashReporterSupport.framework/CrashReporterSupport
0x34a8a000 - 0x34ae2fff  CoreLocation armv7s  <c6e83df07a6c36c6b940c6524221f3d0> /System/Library/Frameworks/CoreLocation.framework/CoreLocation
0x34ae3000 - 0x34af0fff  TelephonyUtilities armv7s  <88aa5948c53b36169c6df76cabeedd63> /System/Library/PrivateFrameworks/TelephonyUtilities.framework/TelephonyUtilities
0x34b86000 - 0x34b92fff  libMobileGestalt.dylib armv7s  <e915389b3e38376791fac27ca2a14088> /usr/lib/libMobileGestalt.dylib
0x34c17000 - 0x34cc4fff  libxml2.2.dylib armv7s  <038b15f2b7c63712b612c0787615e060> /usr/lib/libxml2.2.dylib
0x34dd8000 - 0x34dd8fff  libkeymgr.dylib armv7s  <6fcdcd97e9f032aaa9b60461ceb13284> /usr/lib/system/libkeymgr.dylib
0x34de5000 - 0x34df4fff  CoreVideo armv7s  <f683995a6e66390bb80f81515947314f> /System/Library/Frameworks/CoreVideo.framework/CoreVideo
0x34fcf000 - 0x35034fff  CoreMedia armv7s  <8265880a81c13b119a3fa270ec9ae460> /System/Library/Frameworks/CoreMedia.framework/CoreMedia
0x3504f000 - 0x355a1fff  UIKit armv7s  <29801ef497b2323e8a98e0c141f7e4a0> /System/Library/Frameworks/UIKit.framework/UIKit
0x355d6000 - 0x3578afff  CoreData armv7s  <75872d32d14f37fcbe25940f0ef457c7> /System/Library/Frameworks/CoreData.framework/CoreData
0x357cc000 - 0x357dafff  libsystem_network.dylib armv7s  <d0f685e4b7db31ba900a7dd91091fa38> /usr/lib/system/libsystem_network.dylib
0x35869000 - 0x35880fff  BackBoardServices armv7s  <89be2b0c43cd3930ba8ac3a30ac9738e> /System/Library/PrivateFrameworks/BackBoardServices.framework/BackBoardServices
0x35881000 - 0x3594bfff  Celestial armv7s  <63911ba5bed3340eac6320c060763931> /System/Library/PrivateFrameworks/Celestial.framework/Celestial
0x359b9000 - 0x359c2fff  MobileWiFi armv7s  <ea9ace74d9663b208a80030a219a9d68> /System/Library/PrivateFrameworks/MobileWiFi.framework/MobileWiFi
0x359c3000 - 0x359defff  libRIP.A.dylib armv7s  <abb25846493f3533bc5a0d330436820d> /System/Library/Frameworks/CoreGraphics.framework/Resources/libRIP.A.dylib
0x35a3c000 - 0x3636cfff  WebCore armv7s  <657870f4c9e23bd3b2a66edf73ca86e2> /System/Library/PrivateFrameworks/WebCore.framework/WebCore
0x3640d000 - 0x36410fff  AggregateDictionary armv7s  <0475f4c9cdc0340a821dae7783ef1d5a> /System/Library/PrivateFrameworks/AggregateDictionary.framework/AggregateDictionary
0x36a9a000 - 0x36aadfff  AirTraffic armv7s  <f3beacefc02d388ea40485b5eca64b2e> /System/Library/PrivateFrameworks/AirTraffic.framework/AirTraffic
0x36b19000 - 0x36b1efff  CommonUtilities armv7s  <d6a401a9773b3eddbf1254207b1e6609> /System/Library/PrivateFrameworks/CommonUtilities.framework/CommonUtilities
0x36b36000 - 0x36b3afff  libGFXShared.dylib armv7s  <c22689d09e313ab08e82086f25e020fe> /System/Library/Frameworks/OpenGLES.framework/libGFXShared.dylib
0x36b77000 - 0x36b77fff  liblangid.dylib armv7s  <f5bb9330c5293a5d8bd03fb19b08aaff> /usr/lib/liblangid.dylib
0x36e09000 - 0x36e8ffff  libsystem_c.dylib armv7s  <d25f5cb4e6aa3e7e8928b97d1296ea4d> /usr/lib/system/libsystem_c.dylib
0x36f46000 - 0x37359fff  FaceCoreLight armv7s  <1533bd4f300b344283a1c0f2fbf1ac36> /System/Library/PrivateFrameworks/FaceCoreLight.framework/FaceCoreLight
0x37432000 - 0x3743bfff  AssetsLibraryServices armv7s  <ded1e960c8ac3cf094137d5bb8da2dc4> /System/Library/PrivateFrameworks/AssetsLibraryServices.framework/AssetsLibraryServices
0x3743e000 - 0x3743ffff  libremovefile.dylib armv7s  <2f1fdfc7535f391a8f3eeacd82407f0d> /usr/lib/system/libremovefile.dylib
0x379e3000 - 0x37a3bfff  libvDSP.dylib armv7s  <0ec7c11a75b73fd5a396ba1a3751d0f6> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvDSP.dylib
0x37a90000 - 0x37acafff  iTunesStore armv7s  <2328b672a907396dbc7dbf707c56aa3d> /System/Library/PrivateFrameworks/iTunesStore.framework/iTunesStore
0x37acb000 - 0x37b17fff  libstdc++.6.dylib armv7s  <70004197c40a37c2b3addd15bdf23ada> /usr/lib/libstdc++.6.dylib
0x37b45000 - 0x37b4cfff  XPCObjects armv7s  <388eb3736d793edf84303f5076737e6a> /System/Library/PrivateFrameworks/XPCObjects.framework/XPCObjects
0x37b74000 - 0x37d36fff  Foundation armv7s  <ce14923f5b5d30f8ada732293c0e3ef8> /System/Library/Frameworks/Foundation.framework/Foundation
0x37d7c000 - 0x37e58fff  WebKit armv7s  <362b2fa6841437a89970d5e350a62a5f> /System/Library/PrivateFrameworks/WebKit.framework/WebKit
0x37e59000 - 0x37e5bfff  TCC armv7s  <4356ca2596fb3b6dabd2db08925d7165> /System/Library/PrivateFrameworks/TCC.framework/TCC
0x37eb1000 - 0x37f09fff  ManagedConfiguration armv7s  <da174a94b3af3481b9dee3cf9e719b86> /System/Library/PrivateFrameworks/ManagedConfiguration.framework/ManagedConfiguration
0x37f6c000 - 0x38059fff  libiconv.2.dylib armv7s  <a27fa7116c8c3b9486c6726a4f580242> /usr/lib/libiconv.2.dylib
0x3805a000 - 0x38063fff  MediaRemote armv7s  <561bac350ae63afaad64b6aead3f3278> /System/Library/PrivateFrameworks/MediaRemote.framework/MediaRemote
0x38085000 - 0x380a1fff  libsystem_m.dylib armv7s  <310cc335e10a3beb938b2147cf2983b0> /usr/lib/system/libsystem_m.dylib
0x38416000 - 0x38564fff  MusicLibrary armv7s  <d01fd2b4c7953b01a00cd40f070c255d> /System/Library/PrivateFrameworks/MusicLibrary.framework/MusicLibrary
0x386cf000 - 0x386d5fff  libAccessibility.dylib armv7s  <59bcc37c4062396ba9d2614592849dce> /usr/lib/libAccessibility.dylib
0x387c3000 - 0x387d6fff  libc++abi.dylib armv7s  <4a187bebe5353c038ed99c3b211a9893> /usr/lib/libc++abi.dylib
0x387d8000 - 0x3882dfff  CoreTelephony armv7s  <8452232eeba332ab8df0e983cc4646ec> /System/Library/Frameworks/CoreTelephony.framework/CoreTelephony
0x38830000 - 0x3887cfff  IMFoundation armv7s  <205e8778b9963a9d8e55b6c8080bf704> /System/Library/PrivateFrameworks/IMFoundation.framework/IMFoundation
0x38a59000 - 0x38a59fff  libunwind.dylib armv7s  <6b55d71acd1c3aaab309855377445cc6> /usr/lib/system/libunwind.dylib
0x38c40000 - 0x38ce0fff  UIFoundation armv7s  <f62dc3c023b83d8fa9471d54e4a67fc1> /System/Library/PrivateFrameworks/UIFoundation.framework/UIFoundation
0x38ce1000 - 0x38ce8fff  CaptiveNetwork armv7s  <54c15d3db48531119a9c5c6d1ce6d23b> /System/Library/PrivateFrameworks/CaptiveNetwork.framework/CaptiveNetwork
0x38dd6000 - 0x38ddffff  libbz2.1.0.dylib armv7s  <7bd9ef027eee3c30b932ac9ccfad2b26> /usr/lib/libbz2.1.0.dylib
0x38de0000 - 0x38e00fff  libxslt.1.dylib armv7s  <d5b9c2c6876c35aa8fc11a6e9cf951aa> /usr/lib/libxslt.1.dylib
0x38e0a000 - 0x38e0ffff  liblaunch.dylib armv7s  <e7af690e65903c85a8bd5d1e95d41664> /usr/lib/system/liblaunch.dylib
0x38e3b000 - 0x38e3cfff  DataMigration armv7s  <491f30b9946f3023a1e7140ef569b305> /System/Library/PrivateFrameworks/DataMigration.framework/DataMigration
0x38e3d000 - 0x38e45fff  ProtocolBuffer armv7s  <c0be967a01b93f439a82d2ad89e1ad27> /System/Library/PrivateFrameworks/ProtocolBuffer.framework/ProtocolBuffer
0x38e46000 - 0x38e85fff  SystemConfiguration armv7s  <79422f6496e13885ae6370aa65f13155> /System/Library/Frameworks/SystemConfiguration.framework/SystemConfiguration
0x38e86000 - 0x38ebcfff  libcorecrypto.dylib armv7s  <a61af54e5e473e2e88e6745891bd31d9> /usr/lib/system/libcorecrypto.dylib
0x38f81000 - 0x38f97fff  libCRFSuite.dylib armv7s  <071f376981a53e69b1fc41c01e8e92d8> /usr/lib/libCRFSuite.dylib
0x39077000 - 0x39122fff  MediaControlSender armv7s  <848c5281ddc63c2abffcb920a88fbf67> /System/Library/PrivateFrameworks/MediaControlSender.framework/MediaControlSender
0x39147000 - 0x39280fff  CoreGraphics armv7s  <667bf12f24cd350299f36cc71e4a9ef5> /System/Library/Frameworks/CoreGraphics.framework/CoreGraphics
0x39359000 - 0x39431fff  StoreServices armv7s  <fb22825e814e3542b4547103b29aecbb> /System/Library/PrivateFrameworks/StoreServices.framework/StoreServices
0x39603000 - 0x39609fff  libsystem_dnssd.dylib armv7s  <47f7e2f908023cd0b376ab2216881145> /usr/lib/system/libsystem_dnssd.dylib
0x39630000 - 0x39716fff  AVFoundation armv7s  <840770e2b2a93a0ead9782aead45657d> /System/Library/Frameworks/AVFoundation.framework/AVFoundation
0x39719000 - 0x39724fff  GraphicsServices armv7s  <66b9208b8f1d32229a4957a56375152a> /System/Library/PrivateFrameworks/GraphicsServices.framework/GraphicsServices
0x3976a000 - 0x39787fff  PersistentConnection armv7s  <ac5005684e36383096e439d840f0ee10> /System/Library/PrivateFrameworks/PersistentConnection.framework/PersistentConnection
0x39821000 - 0x39828fff  liblockdown.dylib armv7s  <79275e7173d3396da07c5af6b8d73c4e> /usr/lib/liblockdown.dylib
0x3982a000 - 0x3995cfff  CoreFoundation armv7s  <b59e2456dc863cfe853b2101d90fa974> /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
0x3996b000 - 0x3996cfff  IOAccelerator armv7s  <034f09d31bc23d928d837741ffffff5c> /System/Library/PrivateFrameworks/IOAccelerator.framework/IOAccelerator
0x3998c000 - 0x3998dfff  libdnsinfo.dylib armv7s  <927eb7343a8531979a4065262928c344> /usr/lib/system/libdnsinfo.dylib
0x399a4000 - 0x399bdfff  DictionaryServices armv7s  <c96adbc2c8ec390aaf6c1312dc91b632> /System/Library/PrivateFrameworks/DictionaryServices.framework/DictionaryServices
0x399d3000 - 0x399d3fff  libsystem_blocks.dylib armv7s  <4850aef547de37a78c8ce0a61e4e3f99> /usr/lib/system/libsystem_blocks.dylib
0x39b1b000 - 0x39b8ffff  ProofReader armv7s  <ec06c705f1e83ba3997d78060cb7e052> /System/Library/PrivateFrameworks/ProofReader.framework/ProofReader
0x39b9d000 - 0x39bbbfff  WebBookmarks armv7s  <d3c84a2c2dae3226abe1697ec25ccf2e> /System/Library/PrivateFrameworks/WebBookmarks.framework/WebBookmarks
0x39bfb000 - 0x39c36fff  AppSupport armv7s  <24f40c0f426937b4b481f5eb497d0d06> /System/Library/PrivateFrameworks/AppSupport.framework/AppSupport
0x39c3d000 - 0x39d01fff  CFNetwork armv7s  <e51abfda7a5039a783fbd5cf84b06b41> /System/Library/Frameworks/CFNetwork.framework/CFNetwork
0x39d10000 - 0x39f95fff  MediaToolbox armv7s  <ffe42d2b233c332fb01eadad55c3414f> /System/Library/Frameworks/MediaToolbox.framework/MediaToolbox
0x39f96000 - 0x39fdffff  IOKit armv7s  <ed0ccdd9000e3908a5969f9026e575d2> /System/Library/Frameworks/IOKit.framework/Versions/A/IOKit
0x39fe0000 - 0x3a0f4fff  QuartzCore armv7s  <71f2f6e216403b5aa4fd186574f0d985> /System/Library/Frameworks/QuartzCore.framework/QuartzCore
0x3a0f5000 - 0x3a14efff  MobileCoreServices armv7s  <f4f013a8379e3af080d8bd852e1d0c00> /System/Library/Frameworks/MobileCoreServices.framework/MobileCoreServices
0x3a217000 - 0x3a29efff  CoreMotion armv7s  <ce9de8a02a8130eeb9915639a765b380> /System/Library/Frameworks/CoreMotion.framework/CoreMotion
0x3a2ab000 - 0x3a2c1fff  libsystem_kernel.dylib armv7s  <dc5563b496c539348db839fe00c8ee08> /usr/lib/system/libsystem_kernel.dylib
0x3a300000 - 0x3a4d8fff  ImageIO armv7s  <2c1cff5d59cf3c11a1f73c0301fe02dd> /System/Library/Frameworks/ImageIO.framework/ImageIO
0x3a4ef000 - 0x3a4fbfff  libz.1.dylib armv7s  <e2e7d8cd69183ea99a5cb0fc00b20217> /usr/lib/libz.1.dylib 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T12:12:32.367

看起来你的崩溃日志没有被符号化。您需要构建时生成的 dSym 文件。

您可能会发现这是一个有用的开始：[技术说明 TN2151：了解和分析 iOS 应用程序崩溃报告](http://developer.apple.com/library/ios/#technotes/tn2151/_index.html)

# java - Java jsoup使用线程不起作用

> ID：12759676
> 
> 赞同：0
> 
> 时间：2012-10-06T12:10:45.030
> 
> 标签：java, multithreading, jsoup, runnable, callable

我喜欢这样的页面：

```
www.foo1.bar
www.foo2.bar
www.foo3.bar
.
.
www.foo100.bar 
```

我正在使用库 jsoup 并使用 Thread 同时连接到每个页面：

```
Thread matchThread = new Thread(task);
matchThread.start(); 
```

每个任务，像这样连接到页面，并解析 HTML：

```
Jsoup.connect("www.fooX.bar").timeout(0).get(); 
```

获得大量这些异常：

```
java.net.ConnectException: Connection timed out: connect
at java.net.PlainSocketImpl.socketConnect(Native Method)
at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)
at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)
at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)
at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
at java.net.Socket.connect(Socket.java:529)
at sun.net.NetworkClient.doConnect(NetworkClient.java:158)
at sun.net.www.http.HttpClient.openServer(HttpClient.java:388)
at sun.net.www.http.HttpClient.openServer(HttpClient.java:523)
at sun.net.www.http.HttpClient.<init>(HttpClient.java:227)
at sun.net.www.http.HttpClient.New(HttpClient.java:300)
at sun.net.www.http.HttpClient.New(HttpClient.java:317)
at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:970)
at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:911)
at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:836)
at org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:404)
at org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:391)
at org.jsoup.helper.HttpConnection.execute(HttpConnection.java:157)
at org.jsoup.helper.HttpConnection.get(HttpConnection.java:146) 
```

jsoup 是否同时只允许 1 个线程？或者我做错了什么？**关于如何更快地连接到我的页面的任何建议，因为逐一进行需要很长时间。**

编辑：

所有 700 个线程都使用这种方法，也许这是问题或什么的。这个方法可以处理这么多线程还是单例？

```
private static Document connect(String url) {
    Document doc = null;
    try {
        doc = Jsoup.connect(url).timeout(0).get();
    } catch (IOException e) {
        System.out.println(url);
    }
    return doc; 
} 
```

编辑：整个线程代码

```
public class MatchWorker implements Callable<Match>{

private Element element;

public MatchWorker(Element element) {
    this.element = element;
}

@Override
public Match call() throws Exception {
    Match match = null;
            Util.connectAndDoStuff();
    return match;
} 
```

}

我的所有 700 个元素：

```
 Collection<Match> matches = new ArrayList<Match>();
    Collection<Future<Match>> results = new ArrayList<Future<Match>>();

 for (Element element : elements) {
        MatchWorker matchWorker = new MatchWorker(element);
        FutureTask<Match> task = new FutureTask<Match>(matchWorker);
        results.add(task);

        Thread matchThread = new Thread(task);
        matchThread.start();
    }
    for(Future<Match> match : results) {
        try {
            matches.add(match.get());
        } catch (Exception e) {
            e.printStackTrace();
        }
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-06T12:58:33.623

我试过这个：

```
 ExecutorService executorService = Executors.newFixedThreadPool(5);
    List<Future<Void>> handles = new ArrayList<Future<Void>>();
    Future<Void> handle;
    for (int i=0;i < 12; i++) {
        handle = executorService.submit(new Callable<Void>() {

            public Void call() throws Exception {
                Document d = Jsoup.connect("http://www.google.hr").timeout(0).get();
                System.out.println(d.title());
                return null;
            }
        });
        handles.add(handle);
    }

    for (Future<Void> h : handles) {
        try {
            h.get();
        } 
        catch (Exception ex) {
            ex.printStackTrace();
        }
    }

    executorService.shutdownNow(); 
```

它几乎立即完成并打印正确的标题。也许您有防火墙问题？（“连接超时”表示根本无法访问服务器）

编辑：

我用JSoup 1.7.1

编辑^2：

AFAIK，这应该证明关系 JSoup - Thread 没有问题，因为它最终使用线程..

编辑^3：

此外，如果您使用代理，则可以通过[以下](http://i4t.org/2007/05/04/java-http-proxy-settings/)方式设置代理设置。

编辑^4：

```
public static Document connect(String url) {
    Document doc = null;
    try {
        doc = Jsoup.connect(url).timeout(0).get();
    } catch (IOException ex) {
        ex.printStackTrace();
    }
    return doc;
} 
```

并重写了调用函数：

```
public Void call() throws Exception {                    
    System.out.println(App.connect("http://www.google.hr").title());
    return null;
} 
```

给出相同的结果。我唯一能想到的是一些隐式静态同步，但这没有多大意义，因为有一个超时异常：/请发布线程代码

编辑：

必须离开几个小时。在这里，我所有的三个课程都重写了

*   [应用程序](http://pastebin.com/05YKAz4x)
*   [匹配](http://pastebin.com/d1YVkhTi)
*   [火柴工人](http://pastebin.com/0Cjiuuaz)

仍然工作，较慢，但工作。我肯定会推荐使用固定线程池来提高性能。

但是，我认为这一定是网络问题。祝你好运 ：）

编辑：

连接超时意味着根本无法访问目标服务器。AFAIK，这意味着（服务器从未发送/客户端从未收到）[TCP SYN+ACK 消息](http://www.inetdaemon.com/tutorials/internet/tcp/3-way_handshake.shtml)。

可以得出的第一件事是目标服务器不在线，但是[这个问题还有更多可能的原因](https://stackoverflow.com/questions/3877572/what-could-cause-socket-connectexception-connection-timed-out)，一个可能是目标服务器的请求过载（在极端情况下，这是[（D）DoS攻击](http://en.wikipedia.org/wiki/Denial-of-service_attack)）。

目前，您尝试了并行方法 - 每个请求都在自己的线程中：

1）在 700 个线程中发出 700 个请求（实际上不是 700 个，而是你的操作系统可以接受的数量）

2）通过n<<700个线程的线程池发出700个请求

首先，您可以尝试在每个请求中放置一个随机睡眠形式 0 - 10 s

```
Thread.currentThread.sleep(new Random().nextInt(10000)) 
```

但鉴于目前的结果，这可能行不通。接下来的事情是用您在评论中提到的顺序方法替换并行 - 每个请求都从单个主线程的 for 循环内部一个接一个地运行。您也可以尝试将随机睡眠。

这是您可以采用的最温和（最慢）的方式，如果这不起作用，我不知道如何解决:(

编辑：

通过使用 *5 个线程的线程池，*我成功下载了 1141 场足球比赛的标题。

*   [应用程序](http://pastebin.com/CwFDixnQ)
*   [要求](http://pastebin.com/rZ20ZYwd)

这种网站保护他们的数据是合乎逻辑的，所以当你在开发和测试（使用*尽可能多的线程*运行）时，他们的系统很可能将你（r IP）识别为一个想要他们所有的爬虫数据，他们显然不喜欢也不想要那个，所以他们禁止你。他们只是决定甚至不拒绝您的请求，而是装死 - 因此连接超时。现在这是有道理的。呸 :)

如果这是正确的，您应该能够通过代理获取数据，但要*礼貌*并使用 < 10 个线程的线程池 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T13:57:01.973

Jsoup 只是调用 HTTPUrlConnection 进行连接。它对该连接是否失败没有影响。可能影响它的是防火墙和 DDOS 预防设备。网站拒绝大量同时连接并不奇怪。

# freemarker - Freemarker 替代[语法] if 条件与数字

> ID：12759680
> 
> 赞同：4
> 
> 时间：2012-10-06T12:11:15.003
> 
> 标签：freemarker

我正在使用另一种 freemarker 语法（带方括号的语法）。它工作正常，但我无法弄清楚如何使用 if 条件来检查一个数字是大于还是小于。以下是我的语法

```
[#if ${numberCoupons} <= 1]
    [#assign couponsText = 'coupon']
[/#if] 
```

这里“<”符号失败。你知道我在这里做错了什么吗？

还有可以与freemarker的替代语法一起使用的整个指令列表的任何文档吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T02:21:03.500

您应该能够使用以下任何一项：

```
[#if (numberCoupons <= 1)]
[#if numberCoupons &lt;= 1]
[#if numberCoupons lte 1]
[#if numberCoupons \lte 1] 
```

我会使用括号。

详见： http: [//freemarker.sourceforge.net/docs/dgui_template_exp.html#dgui_template_exp_comparison](http://freemarker.sourceforge.net/docs/dgui_template_exp.html#dgui_template_exp_comparison)

向下滚动一点到该部分中以“有一个小问题”开头的最后一段

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T18:45:17.853

在这种情况下，错误消息应该抱怨的是`{`，而不是`<`. 你在看好地方吗？无论如何，你不能`${...}`在那里使用。应该是简单`[#if numberCoupons <= 1]`的。

# github - Github：错误：找不到存储库。致命：远端意外挂断（不同）

> ID：12759681
> 
> 赞同：1
> 
> 时间：2012-10-06T12:11:18.310
> 
> 标签：github, jekyll

这是我的代码：

```
$ git clone https://github.com/Perrydu/jekyll-plumbious.git Perrydu.github.com
$ cd Perrydu.github.com
$ git remote set-url origin git@github.com:Perrydu/Perrydu.github.com.git
$ git push origin master 
```

终点站：

```
Last login: Sat Oct  6 19:54:15 on ttys000
Dus-MacBook-Pro:~ Perry$ $ git clone https://github.com/Perrydu/jekyll-plumbious.git Perrydu.github.com
-bash: $: command not found
Dus-MacBook-Pro:~ Perry$ git clone https://github.com/Perrydu/jekyll-plumbious.git Perrydu.github.com
Cloning into Perrydu.github.com...
remote: Counting objects: 34, done.
remote: Compressing objects: 100% (26/26), done.
remote: Total 34 (delta 3), reused 30 (delta 3)
Unpacking objects: 100% (34/34), done.
Dus-MacBook-Pro:~ Perry$ cd Perrydu.github.com
Dus-MacBook-Pro:Perrydu.github.com Perry$ git remote set-url origin git@github.com:Perrydu/Perrydu.github.com.git
Dus-MacBook-Pro:Perrydu.github.com Perry$ git push origin master
ERROR: Repository not found.
fatal: The remote end hung up unexpectedly
Dus-MacBook-Pro:Perrydu.github.com Perry$ 
```

jekyll-plumbious.git 是我的项目，例如 jekyll-bootstrap。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T12:21:48.833

我假设您正在按照此处描述的步骤进行操作：

*   [http://jekyllbootstrap.com/](http://jekyllbootstrap.com/)

从您的 GitHub 帐户看，好像问题在于您创建了一个名为`perrydu.github.com`的存储库，但您使用的 URL 引用的存储库`origin`是`Perrydu.github.com`。GitHub 存储库的名称区分大小写，所以我会进入 GitHub 管理界面，找到以小写命名的存储库 ( `perrydu.github.com`) 并将其重命名为`Perrydu.github.com`.

然后，几分钟后，您之前尝试过的 push 命令应该可以工作了。

# ruby-on-rails - 如何在rails中将current_user添加到user_id到form_for？

> ID：12759683
> 
> 赞同：13
> 
> 时间：2012-10-06T12:11:29.733
> 
> 标签：ruby-on-rails, form-for

我有一个用于创建材料的表格（标题、描述和内容 - 都是基本的）。表单很好地保存了这些详细信息，但它没有保存 user_id，它应该是 current_user 的 user_id。我该怎么做呢？这一定很容易，但到目前为止还没有任何效果。

```
def create 
   @material = Material.new(params[:material])
   if @material.save
     flash[:success] = "Content Successfully Created"
     redirect_to @material
   else
     render 'new'
   end
end 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-06T12:19:36.590

```
def create 
 @material = Material.new(params[:material])
 @material.user_id = current_user.id if current_user
 if @material.save
  flash[:success] = "Content Successfully Created"
  redirect_to @material
 else
  render 'new'
 end
end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-06T12:19:26.657

根据您的应用程序设置方式，有几种不同的方法可以做到这一点。如果用户和材料之间存在关系（用户有很多材料），您可以在控制器中使用它：

```
def create
  @material = current_user.materials.new(params[:material])
  # ...
end 
```

如果您没有这种关系，我仍然建议将其设置在控制器中，而不是表单中的隐藏字段。这将更安全，因为它不会让任何人篡改用户 id 值：

```
def create
  @material = Material.new(params[:material].merge(user_id: current_user))
  # ...
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-06T12:19:03.440

假设您在下面保存登录用户的对象`current_user`将适用于您

```
 @material = Material.new(params[:material])
   @material.user_id = current_user.id
   if @material.save 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-27T17:14:41.497

在创建对象之前需要对 Rails 5 和参数进行`permit`测试，这是将参数合并`current_user`到参数中的最简单方法，感谢@Peter Brown 在他的回答中：

```
def create
  @discussion = current_user.materials.new(new_material_params)
  # ...
end

private
def new_material_params
  params.require(:material).permit(:title, :description,: content)
end 
```

如果您使用*嵌套*对象创建`accepts_nested_attributes_for`，则需要手动深度合并到关联参数中：

```
class User < ApplicationRecord
  has_many :discussions # Used to associate User with Discussion later
end

class Comment < ApplicationRecord
  belongs_to :user
end

class Discussion < ApplicationRecord
  belongs_to :user
  has_many :comments
  accepts_nested_attributes_for :comments
end

class DiscussionsController < ApplicationController
  def create
    # Merge the params[:discussion][:user_id] by using the relationship's #new
    @discussion = current_user.discussion.new(new_discussion_params)
  end

  private
  # Sanitized params for creation, not editing
  def new_discussion_params
    params.require(:discussion)
      .permit(:title, :user_id, 
              comments_attributes: [:id, :content, :discussion_id, :user_id])
      .tap do |discussion_params|
        # Require the association parameters, and if they exist,
        # set :user_id for each.
        discussion_params.require(:comments_attributes).each do |i, comment|
          comment.merge!(user_id: current_user.id)
        end
    end
  end
end 
```

**注意：**设置（或覆盖！）哪些内容`params[:discussion][:comments_attributes]["0"][:user_id]`适合创建。但是，如果您允许*编辑*除*创建*之外的深层层次结构，请确保您不会意外覆盖`:user_id`当前用户的所有 s。

# java - java构造函数初始化中的思考

> ID：12759684
> 
> 赞同：0
> 
> 时间：2012-10-06T12:11:47.513
> 
> 标签：java

我在 Bruce Eckel 的 Thinking In Java 4th Edition 的第 128 页有一个问题，第二段，它问的最后一句话：

> 如果定义的重载构造函数没有初始化`w3`并且在其定义中没有“默认”初始化，会发生什么`w3`？

我发现这句话让人难以理解，能否请这本书的专家或读者帮我一点忙？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T12:20:35.843

`Window w3 = new Window(3);`

如果有人没有`w3`在重载的构造函数中正确初始化，它只是保护。这样的字段实例化会自动放在每个构造函数的开头。所以即使是重载的也会收到`w3`初始化。

如果仅声明`Window w3`，则在执行重载构造函数时`w3`将保留。`null`

这是书中的代码：

```
import static net.mindview.util.Print.*;
    // When the constructor is called to create a
    // Window object, you’ll see a message:
    class Window {
        Window(int marker) 
        { 
            print("Window(" + marker + ")"); 
        } 
    }

   class House { 
       Window w1 = new Window(1); 
       // Before constructor 
       House() {
           // Show that we’re in the constructor:
           print("House()");
           w3 = new Window(33); // Reinitialize w3
       }
        Window w2 = new Window(2); 
        // After constructor void f() { print("f()"); } 
        Window w3 = new Window(3); 
    // At end 
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T12:20:38.150

Java 中的每个字段类型都有一个预定义的默认值，即 null、零或 false，分别适用于所讨论的类型。`final`另一方面，如果字段是，则没有默认值，并且在构造时不提供默认值是编译器错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T12:21:39.527

**-** `w3`如果它是一个字段（即`Instance variable`）

****-**默认情况下，它将被初始化为`null`，因为**对象引用变量的默认值为 null。****

 ****-**现在如果重载的构造**函数没有初始化**它，它的值将是`null`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T12:24:51.967

我没有这本书，也从未读过它。因此，这只是一个猜测：

`w3`是类的成员变量

```
class A {
  public int w3; // w3 has no default initialization

  public B() {
    w3 = 1; // w3 is initialized here
  }

  public B(boolean x) {
    // w3 is not initialized here
  }  
} 
```

你可以这样做：

```
A firstObject = new A();
System.out.println("firstObject.w3 is " + firstObject.w3);
A secondObject = new A(false);
System.out.println("secondObject.w3 is " + secondObject.w3); 
```

你的输出将是

```
firstObject.w3 is 1
secondObject.w3 is 0 
```

解释：`firstObject`是用第一个构造函数创建的，它设置`w3`为`1`. `secondObject`是使用需要`boolean`参数的重载构造函数创建的。这个构造函数没有设置 w3，也没有默认的初始化`w3`。因此，它永远不会被设置。在 Java 中，对于没有默认初始化的变量，您可以获得以下值：

*   `int/short/byte`：`0`
*   `long`：`0L`
*   `double`：`0.0d`
*   `float`：`0.0f`
*   `char`：`\u0000`
*   `boolean`：`false`
*   `Object`（以及所有派生类）：`null`
*   `final`字段：它们没有默认值，如果没有默认初始化，则抛出编译器错误**

# http - WinRT 中的 HttpUtility.ParseQueryString 方法在哪里？

> ID：12759686
> 
> 赞同：10
> 
> 时间：2012-10-06T12:12:18.420
> 
> 标签：http, parsing, windows-8, windows-runtime, query-string

由于[HttpUtility](http://msdn.microsoft.com/en-us/library/system.web.httputility.aspx)在 WinRT 中不可用，我想知道是否有一种直接的方法来解析 HTTP 查询字符串？

**WinRT中实际上是否存在与[HttpUtility.ParseQueryString](http://msdn.microsoft.com/en-gb/library/system.web.httputility.parsequerystring.aspx)等效的内容？**

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-06T12:17:04.610

而不是`HttpUtility.ParseQueryString`你可以使用[`WwwFormUrlDecoder`](http://msdn.microsoft.com/en-us/library/windows/apps/hh825884.aspx).

[这是我在这里](http://www.dzhang.com/blog/2012/08/21/parsing-uri-query-strings-in-windows-8-metro-style-apps)抓到的一个例子

```
using System;
using Microsoft.VisualStudio.TestPlatform.UnitTestFramework;
using Windows.Foundation;

[TestClass]
public class Tests
{
    [TestMethod]
    public void TestWwwFormUrlDecoder()
    {
        Uri uri = new Uri("http://example.com/?a=foo&b=bar&c=baz");
        WwwFormUrlDecoder decoder = new WwwFormUrlDecoder(uri.Query);

        // named parameters
        Assert.AreEqual("foo", decoder.GetFirstValueByName("a"));

        // named parameter that doesn't exist
        Assert.ThrowsException<ArgumentException>(() => {
            decoder.GetFirstValueByName("not_present");
        });

        // number of parameters
        Assert.AreEqual(3, decoder.Count);

        // ordered parameters
        Assert.AreEqual("b", decoder[1].Name);
        Assert.AreEqual("bar", decoder[1].Value);

        // ordered parameter that doesn't exist
        Assert.ThrowsException<ArgumentException>(() => {
            IWwwFormUrlDecoderEntry notPresent = decoder[3];
        });
    }
} 
```

# android - java.net.UnknownHostException：

> ID：12759687
> 
> 赞同：0
> 
> 时间：2012-10-06T12:12:31.167
> 
> 标签：android, apk-expansion-files

```
 catch (UnknownHostException e) {
           e.printStackTrace();
           progressDialog.dismiss();
            AlertDialog connection = new AlertDialog.Builder(
                    NewsScreenActivity.this)
                    .setTitle("No Network Found")
                    .setMessage(
                            "Internet Connection Reqired To Use this Application,please try again latter")
                    .setPositiveButton("Ok",
                            new DialogInterface.OnClickListener() {

                                public void onClick(DialogInterface dialog,
                                        int whichButton) {

                            //      progressDialog.dismiss();
                                }
                            }).create();

            connection.show();

           Log.i("=================== UnknownHostException", "======");
       } 
```

错误：

```
10-06 17:35:02.488: W/System.err(20393): java.net.UnknownHostException: maritimeglobalnews.com
10-06 17:35:02.488: W/System.err(20393):    at java.net.InetAddress.lookupHostByName(InetAddress.java:506)
10-06 17:35:02.488: W/System.err(20393):    at java.net.InetAddress.getAllByNameImpl(InetAddress.java:294)
10-06 17:35:02.488: W/System.err(20393):    at java.net.InetAddress.getAllByName(InetAddress.java:256)
10-06 17:35:02.488: W/System.err(20393):    at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:136)
10-06 17:35:02.488: W/System.err(20393):    at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
10-06 17:35:02.488: W/System.err(20393):    at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
10-06 17:35:02.498: W/System.err(20393):    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:359)
10-06 17:35:02.498: W/System.err(20393):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
10-06 17:35:02.498: W/System.err(20393):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
10-06 17:35:02.498: W/System.err(20393):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
10-06 17:35:02.498: W/System.err(20393):    at com.MariTimeGlobalNews.NewsScreenActivity.getData(NewsScreenActivity.java:248)
10-06 17:35:02.498: W/System.err(20393):    at com.MariTimeGlobalNews.NewsScreenActivity$AllDataAsyn.doInBackground(NewsScreenActivity.java:138)
10-06 17:35:02.508: W/System.err(20393):    at com.MariTimeGlobalNews.NewsScreenActivity$AllDataAsyn.doInBackground(NewsScreenActivity.java:1)
10-06 17:35:02.508: W/System.err(20393):    at android.os.AsyncTask$2.call(AsyncTask.java:185)
10-06 17:35:02.508: W/System.err(20393):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
10-06 17:35:02.508: W/System.err(20393):    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
10-06 17:35:02.508: W/System.err(20393):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
10-06 17:35:02.508: W/System.err(20393):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
10-06 17:35:02.508: W/System.err(20393):    at java.lang.Thread.run(Thread.java:1019)
10-06 17:35:02.538: W/dalvikvm(20393): threadid=9: thread exiting with uncaught exception (group=0x40018560)
10-06 17:35:02.548: E/AndroidRuntime(20393): FATAL EXCEPTION: AsyncTask #1
10-06 17:35:02.548: E/AndroidRuntime(20393): java.lang.RuntimeException: An error occured while executing doInBackground()
10-06 17:35:02.548: E/AndroidRuntime(20393):    at android.os.AsyncTask$3.done(AsyncTask.java:200)
10-06 17:35:02.548: E/AndroidRuntime(20393):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
10-06 17:35:02.548: E/AndroidRuntime(20393):    at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
10-06 17:35:02.548: E/AndroidRuntime(20393):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
10-06 17:35:02.548: E/AndroidRuntime(20393):    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
10-06 17:35:02.548: E/AndroidRuntime(20393):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
10-06 17:35:02.548: E/AndroidRuntime(20393):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
10-06 17:35:02.548: E/AndroidRuntime(20393):    at java.lang.Thread.run(Thread.java:1019)
10-06 17:35:02.548: E/AndroidRuntime(20393): Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
10-06 17:35:02.548: E/AndroidRuntime(20393):    at android.os.Handler.<init>(Handler.java:121)
10-06 17:35:02.548: E/AndroidRuntime(20393):    at android.app.Dialog.<init>(Dialog.java:101)
10-06 17:35:02.548: E/AndroidRuntime(20393):    at android.app.AlertDialog.<init>(AlertDialog.java:63)
10-06 17:35:02.548: E/AndroidRuntime(20393):    at android.app.AlertDialog.<init>(AlertDialog.java:59)
10-06 17:35:02.548: E/AndroidRuntime(20393):    at android.app.AlertDialog$Builder.create(AlertDialog.java:786)
10-06 17:35:02.548: E/AndroidRuntime(20393):    at com.MariTimeGlobalNews.NewsScreenActivity.getData(NewsScreenActivity.java:450)
10-06 17:35:02.548: E/AndroidRuntime(20393):    at com.MariTimeGlobalNews.NewsScreenActivity$AllDataAsyn.doInBackground(NewsScreenActivity.java:138)
10-06 17:35:02.548: E/AndroidRuntime(20393):    at com.MariTimeGlobalNews.NewsScreenActivity$AllDataAsyn.doInBackground(NewsScreenActivity.java:1)
10-06 17:35:02.548: E/AndroidRuntime(20393):    at android.os.AsyncTask$2.call(AsyncTask.java:185)
10-06 17:35:02.548: E/AndroidRuntime(20393):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
10-06 17:35:02.548: E/AndroidRuntime(20393):    ... 4 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T12:14:44.310

尝试这个。

```
runOnUiThread(new Runnable() 
{
  public void run() 
  {
            // Your Alert Code
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T12:14:29.810

在 onCreate 方法中使用以下代码：

```
 StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
    StrictMode.setThreadPolicy(policy); 
```

# java - 将 JQuery 缓存到 Web 浏览器中

> ID：12759689
> 
> 赞同：0
> 
> 时间：2012-10-06T12:12:42.990
> 
> 标签：java, javascript, jquery, jsf, jsf-2

> **可能重复：**
> [缓存 JavaScript 文件](https://stackoverflow.com/questions/311062/caching-javascript-files)

我在 JSF 页面中使用 JQuery 1.7.2。我在页面正文中多次调用 jquery-1.7.2.min.js。一般来说，是否可以将网络浏览器配置为只下载一次库并使用它而不是每次都下载它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T12:16:10.663

如果您总是从相同类型的 URL（域等）加载它，那么无论如何它都会被您的浏览器缓存。这是 CDN 非常有用的方式，因为如果用户访问您的页面，他可能已经在他的浏览器中缓存了 jQuery（由于之前访问过其他页面），更多网站将使用它们

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T12:21:21.497

使用[localStorage](http://en.wikipedia.org/wiki/Web_storage)然后在页面加载时检查 jQuery 是否存储在本地缓存中，如果没有，则创建 ajax 请求保存到 localStorage 并附加到脚本头中。

如果客户端再次访问页面只需从本地存储加载到 html + 故障回复加载 jQuery 标准

但需要使用纯 JavaScript 代码

* * *

代码：

几年只下载一次 jQuery：

[https://gist.github.com/3844878](https://gist.github.com/3844878)

# sql - IN SQL Server如何列出旺季和淡季

> ID：12759693
> 
> 赞同：0
> 
> 时间：2012-10-06T12:12:48.417
> 
> 标签：sql, sql-server-2008

对于数据库 SQL Server 2008，我有一个日期列表，这些日期要么在旺季，最高价，要么在淡季，低价。

我们只有三种与之相关的逗留期限，即周一至周一、周中周一至周五或周末周五至周一。

是否可以在一个范围内说它属于旺季或淡季？在这一刻，我们只有一个所有可能日期的列表以及它属于哪个季节。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T16:00:14.920

对的，这是可能的。下面给出了一个如何做的例子，从提供的有限信息中对你的表格格式做出了很多假设。

```
select s.stayid, 
       (case when max(d.type) = min(d.type) the min(d.type)
             when max(d.type) is null then 'NoSeason'
             else 'Mixed'
        end) as StayType
from Stays s left outer join
     Days d
     on d.date between s.start and s.end
group by s.stayid 
```

这将查找与给定住宿相对应的所有日期。如果类型相同（ 中的第一个子句`case`），则使用它。如果没有匹配的日期，则没有信息。否则，日期类型是混合的。

# macos - 操作系统。为 WebView 调用一次 didFinishLoadForFrame？

> ID：12759694
> 
> 赞同：0
> 
> 时间：2012-10-06T12:12:50.213
> 
> 标签：macos, webview, load, frame

例如，如果我加载网站“intuit.ru”大约被调用 4 次。但这对我来说只是第一次打电话就足够了。

我试图检查它是否已加载 webView.mainFrame 并且它允许执行此函数内的代码一次，但应用程序以这种方式运行速度要慢得多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-21T20:34:10.253

解决方案是检查此方法中的变量 webView.isLoading

# iphone - iOS 6 上的 MKMapKit 和旧设备上的 Google 地图

> ID：12759698
> 
> 赞同：1
> 
> 时间：2012-10-06T12:13:31.493
> 
> 标签：iphone, ios5, rubymotion

我想通过使用在 iOS 6 上显示地图，`MKMapItem`但我也想将谷歌地图用于旧 iOS 版本。

当我在 iOS 5.1 上测试我的解决方案时，我遇到了这个错误

```
dyld: Symbol not found: _MKLaunchOptionsDirectionsModeDriving 
```

这是我的代码：

```
if Utils.older_than_ios6?
    url = "http://maps.google.com/maps?saddr=#{@party.place.location[1]},#{@party.place.location[0]}&daddr=#{@party.place.location[1]},#{@party.place.location[0]}"
    App::open_url(url)
else
    address_dictionnary = ({kABPersonAddressStreetKey: @party.place.street, kABPersonAddressCityKey: @party.place.city,kABPersonAddressZIPKey: @party.place.postal_code})
    place = MKPlacemark.alloc.initWithCoordinate(@coords, addressDictionary: address_dictionnary)
    mapItem = MKMapItem.alloc.initWithPlacemark(place)
    mapItem.name = "#{@party.name}"
    options = ({
        MKLaunchOptionsDirectionsModeKey: MKLaunchOptionsDirectionsModeDriving
    })
    mapItem.openInMapsWithLaunchOptions(options)
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T20:10:08.557

[此链接](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKMapItem_class/Reference/Reference.html)显示`MKLaunchOptionsDirectionsModeDriving`仅在 iOS6+ 上可用。

为了确定，您是否将 MapKit 添加到 Rakefile 的框架列表中？

# prolog - Swi-Prolog 中的冒号 (:) 究竟代表什么？

> ID：12759700
> 
> 赞同：7
> 
> 时间：2012-10-06T12:14:24.673
> 
> 标签：prolog, colon

我无法明确找到 (:) 在[prolog](http://www.swi-prolog.org/pldoc/doc_for?object=op/3)中的含义。
在交互模式下，您可以看到以下证据：

```
?- display(a:b).
:(a,b)
true.

?- display([a,b,c]).
.(a,.(b,.(c,[])))
true.

?- display(a:b:c:[]).
:(a,:(b,:(c,[])))
true.

?- a:b:REST = a:TAIL.
TAIL = b:REST. 
```

**引入 (:) 的目的是什么？**我在www中找不到任何详细信息。似乎它提供了另一种将递归结构称为列表的语法方式。

我们可以说它是Right-associative，它的优先级数是多少？

```
:-op(??, xfy, :). 
```

**有没有办法列出所有此类隐式函子？**

```
listing(op). %of course this does not work 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-06T12:50:19.323

那是[模块](https://www.swi-prolog.org/pldoc/man?section=modules)限定符，你可以看到它的声明：

```
?- current_op(X,Y,:).
X = 600,
Y = xfy. 
```

模块是 Prolog 的一个重要扩展，尤其是大型程序所需要的，但未符合 ISO 标准。SWI-Prolog（通常）对此有务实的观点，并实施了一种有用的方法。

**OT**检查运算符，您会发现此代码段很有用：

```
oplist :-
    setof((A,C,B), current_op(A,B,C), L),
    maplist(writeln, L). 
```

# shopify - 使用更复杂的搜索查询查询订单的 API？

> ID：12759705
> 
> 赞同：1
> 
> 时间：2012-10-06T12:14:54.253
> 
> 标签：shopify

有没有办法通过更详细的查询参数查询 API 以查找 Shop 的订单？例如，我希望能够通过输入客户姓名或订单日期来查找订单。

可用的[URL 查询参数](http://api.shopify.com/order.html#show)不允许这样的事情。

我意识到我可以只请求所有订单，然后过滤该数据，但我宁愿直接在 API 中而不是在本地进行，以避免任何开销。

编辑：实际上我刚刚意识到查询特定订单的唯一方法是输入店主不知道的内部使用的订单 ID。如果我可以通过订单“名称”而不是订单“名称”来查询 API，那将是非常简洁的，该订单“名称”显示为店主和订单接收者的订单 ID。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T12:53:20.520

我是这样看的。假设您很穷，无法为您的应用程序中的订单提供数据存储，但您拥有 API 访问权限，并且您想提供对商家的搜索。

每次调用 250 个订单和 500 个 API 调用，零故障，即 125,000 个订单。API 为您提供了 125,000 个对象，您可以随意查询这些对象。想要向商家显示姓氏为 Smith 的订单和一个带有购物车注释的追逐者设置为“请不要周六送货”的野狗球的订单项......你可以这样做。与 Shopify 无关，只是您的代码。我认为查询任何感兴趣的订单都很容易，您的里程可能会有所不同。

我，我将订单的有趣方面保存在我的应用程序的数据存储中，然后以这种方式为商家提供搜索结果……减少 API 调用，让有趣的方面更接近手边。

# c# - 如何放置 Forms 控件？

> ID：12759706
> 
> 赞同：0
> 
> 时间：2012-10-06T12:14:56.813
> 
> 标签：c#, winforms, position, anchor, dock

我有一个窗体，我想添加两个控件：一个 ComboBox 和一个 ListView。ComboBox 必须占据上半部分，而 ListBox 则占据**所有剩余空间**。

如下图所示：

![在此处输入图像描述](../Images/0227ada84a2359af606c18025ecd6d7e.png)

我该怎么办？哪些属性需要修改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T12:26:43.120

创建一个新表单，然后添加两个控件 -`ComboBox`和`ListBox`. 现在，首先在设计器中将`ComboBox`s`Dock`属性设置为`Top`。然后选择`ListBox`并将其`Dock`属性设置为`Fill`。这将满足您的要求。

我希望这有帮助。

# c# - 插入多个表 ASP.NET & C#

> ID：12759707
> 
> 赞同：0
> 
> 时间：2012-10-06T12:14:59.150
> 
> 标签：c#, asp.net, sql-server

如何使用 ASP.NET & c# 执行 sql 事务（如果未提交所有数据则将数据插入多个表然后回滚）？最简单的方法和最接近的方法`sqlCommand`，拜托！

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T12:27:25.957

尝试使用此代码：

```
using (SqlConnection con = new SqlConnection("your ConnectionString"))
            {
                SqlCommand cmd = new SqlCommand("insert into Category values(@name);insert into Packages(name,CatId) values(@pname,@catId)", con);
                cmd.Parameters.AddWithValue("@name", "12");
                cmd.Parameters.AddWithValue("@pname", "12");
                cmd.Parameters.AddWithValue("@catId", "1");
                con.Open();
                cmd.ExecuteNonQuery();
                con.Close();
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T15:06:03.850

添加到@Luftwaffe 答案：

```
using(TransactionScope tscope = new TransactionScope())
{
    using(SqlConnection conn = new SqlConnection(myconnstring)
    {
        conn.Open();

        ... Call the necessary stored proc here

        tscope.Complete();
        conn.Close();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T12:38:44.440

如果您想采用简单的方式，请使用 a 一次`Stored Procedure`更新数据库中的所有数据。您可以处理存储过程本身中的错误并自行回滚那里的事务。
但是，如果您希望从 C# 到 SQL Server 执行多个查询，并希望将所有查询保存在一个事务中，您可以使用`TransactionScope Class`.NET 提供的。
这是[MSDN 链接](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope%28v=vs.90%29.aspx)。
希望能帮助到你。

# c - 如何提高C中矩阵运算的效率？

> ID：12759708
> 
> 赞同：0
> 
> 时间：2012-10-06T12:14:58.747
> 
> 标签：c, algorithm, matrix

我有一个`N*N`上三角矩阵，它的所有对角元素都是`a1,a2,a3,...,aN`. 我想`a[i][j] (for all j>i)` 应该是

```
(a[i][j-1] + a[i+1][j]) / 2\. 
```

我有很多测试用例，每次都必须应用这个属性来计算答案。执行此操作的最佳方法是什么，以使所有测试用例的整体运行时间更短？测试用例：输入是`N and a1,a2,...,aN`.

要计算答案，我需要这样做：

```
a[0][0] + a[0][2] + ... + a[0][n-1] + a[2][n-1] + a[4][n-1] + ... + a[n-1][n-1]. 
```

我的解决方案（不断超时）：

```
#include<stdio.h>
double a[2000][2000];
int main(){
int test;
scanf("%d",&test);
//int arr[2000];
while(test--){
    int n,i,j;
    //scanf("%d",&n);
    scanf("%d",&n);
    for(i=0;i<n;i++){
         int num;
         scanf("%d",&num);
         if(n!=1)
            a[i][i] = num*0.5;
         else
            a[i][i] = num;
     }
    for(j=1;j<n;j++){
         int k=j;
         for(i=0;i<n-j;i++,k++){
             if(i==0 && k==n-1)
                 a[i][k] = (a[i+1][k]+a[i][k-1]);
             else
                 a[i][k] = (a[i+1][k]+a[i][k-1])*0.5;
         }
     }
     float sum=0.0;
     for(i=0;i<n;i+=2){
         if( i != n-1 )
         sum+=a[0][i]+a[n-1-i][n-1];
         else
         sum+=a[0][i];
     }
    printf("%.3f\n",sum);
}
getch();
} 
```

请提供一些提示如何优化上述代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T22:20:45.403

没有必要存储整个矩阵。您可以从列 j-1 中确定列 j 的值，并随时替换这些值：

```
double b[2000];
double sum = 0;

for (j=0; j<n; ++j) {      
  b[j]=a[j];
  i=j;
  while (i>0) {
    --i;
    b[i] = (b[i+1]+b[i])*0.5;
  }
  if (i%2==1) sum += b[0];
}
for (i=2; i<n; i+=2) {
  sum += b[i];
} 
```

这应该会提高内存效率和缓存友好性，但不会降低复杂性。

当某些值乘以 0.5 时，您有一些额外的逻辑。我不确定那是基于什么。

# java - 通过修改 desktop.ini 更改图标的文件夹

> ID：12759709
> 
> 赞同：2
> 
> 时间：2012-10-06T12:15:20.070
> 
> 标签：java, windows, file, attributes, ini

我的目标是使用 Java 将我的电影库的每个文件夹的图标更改为 Windows 中每个文件夹的图标。

每个文件夹都有一个 256x256 的图标，以文件夹命名，但具有适当的扩展名。例如，名为*5cm Per Second*的文件夹中有*5cm Per Second.ico*文件。

我想我可以通过修改文件夹中的*desktop.ini文件来做到这一点。*所有文件夹中都有该文件，因为每个文件夹中的图标曾经是文件夹的实际图标，但是在我更改了电影库的路径后，*desktop.ini*中图标的路径没有得到更新。

每个*desktop.ini*看起来像这样：

```
[.ShellClassInfo]

IconResource=F:\Anime\Movies\5cm Per Second\5cm Per Second.ico,0 
```

现在图标所在的路径是这样的：*E:\Movies\5cm Per Second\5cm Per Second.ico*所以我想我所要做的就是将*desktop.ini*更改为：

```
[.ShellClassInfo]

IconResource=E:\Movies\5cm Per Second\5cm Per Second.ico,0 
```

那根本不起作用，然后我想我也应该让 Windows 知道*desktop.ini*是一个系统文件，我将它添加到我的代码中，但根本不起作用。

我对该示例文件夹的代码：

```
import java.io.File;
import java.io.IOException;
import org.ini4j.Wini;

public class ListFiles {

    public static void main(String[] args) throws IOException {

        // Directory path here
        String path = "E:\\Movies\\5cm Per Second";

        String fileName;
        File folder = new File(path);
        File[] listOfFiles = folder.listFiles();

        for (int i = 0; i < listOfFiles.length; i++) {
            if (listOfFiles[i].isFile()) {
                if ("ini".equals(getExtension(listOfFiles[i])))
                {
                    File theFile = listOfFiles[i];
                    Wini ini = new Wini(theFile);
                    String iconPath = theFile.getParent() + ".ico";
                    String field = iconPath + ",0";
                    ini.put(".ShellClassInfo", "IconResource", field);
                    Runtime.getRuntime().exec("attrib +H " + theFile.getAbsolutePath());
                }
            }
        }
    }

    public static String getExtension(File theFile) {
        String extension = null;
        String fileName = theFile.getName();
        int i = fileName.lastIndexOf('.');

        if (i > 0 && i < fileName.length() - 1) {
            extension = fileName.substring(i + 1).toLowerCase();
        }

        if (extension == null) {
            return "";
        }
        return extension;
    }
} 
```

如您所见，我将*IconResource*字段编辑为我需要它使用`ini4j`库的字段，然后将*desktop.ini*的属性更改为 Hidden 和 System。

看起来这还不够，我真的不知道还能做什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T02:49:44.797

您没有调用[ini.store()](http://ini4j.sourceforge.net/tutorial/OneMinuteTutorial.java.html)，它可能会将更改写入磁盘。

# ios - 内容长度超过其自身宽度的标签的动画

> ID：12759710
> 
> 赞同：0
> 
> 时间：2012-10-06T12:15:27.060
> 
> 标签：ios

ios 中是否有类似 android:ellipsize="marquee" 之类的东西？我需要为标签制作文本滚动动画，但我没有找到这样做的方法。

**编辑：**

@Tomasz Wojtkowiak：非常感谢您的推荐。

**问题：**

我有一个以像素为单位定义宽度的标签和应该在该标签中显示的文本，并且该文本具有例如双标签宽度。我不想剪辑/包装/转录，我需要显示完整的信息。在 TextView 的 android 中有一个标签 android:ellipsize="marquee" ，在上述情况下，标签中的文本将从左侧自动滚动到写入（某种动画）。

我怎样才能在ios中做这样的行为？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T14:47:33.227

请试试这个[JHTickerView](https://github.com/jeffhodnett/JHTickerView)。这是一个开源项目。它具有自定义的 UILabel (UITickerView)，它具有您所期望的属性！那就是标签会将给定的文本选中。

# xaml - 如何创建加载动画

> ID：12759716
> 
> 赞同：1
> 
> 时间：2012-10-06T12:16:08.390
> 
> 标签：xaml, microsoft-metro, windows-runtime, winrt-xaml, windows-store-apps

我的应用程序中有许多通过网络流式传输的媒体元素。有时我需要等待 2-3 秒。这对我来说不是问题。问题是我不知道如何制作某种加载动画。我有一个加载栏的动画 gif，但我不知道如何显示它。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-06T13:03:09.113

你不需要它的GIF。有一个 XAML 控件*ProgressRing*。*将其IsActive*属性绑定到指示您正在加载的属性。

就像是：

```
public class DataService : BindableBase
{
    private bool _isLoading;

    public bool IsLoading 
    {
        get 
        {
            return _isLoading;
        }
        set 
        {
            SetProperty(ref _isLoading, "IsLoading");
        }
    }

    public void MyMethodWhichTakesLongTime() 
    {
        IsLoading = true;

        // Do some time consumption

        IsLoading = false;
    }
} 
```

对于 XAML，类似于：

```
<ProgressRing IsActive="{Binding IsLoading}" 
              DataContext="{Binding MyDataService}" 
              Width="50" 
              Height="50" /> 
```

由于绑定（以及来自标准 MS 模板的 BindableBase（否则您需要实现`INotifyPropertyChanged`）），当您的数据服务执行某些操作时，ProgressRing 将自动激活。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T13:46:04.947

ProgressBar 也是可用的，它是类似于 Windows Phone 7 的水平加载栏

对于不确定的进度条，您可以使用

```
<ProgressBar Visibility="Visible" IsIndeterminate="True" /> 
```

# xml - 在 Delphi XE2 中解析 XML 时访问冲突

> ID：12759717
> 
> 赞同：1
> 
> 时间：2012-10-06T12:16:10.443
> 
> 标签：xml, delphi, delphi-xe2, musicbrainz

我正在尝试使用以下代码在 Delphi XE2 中解析 MusicBraninz XML 文件：

```
webquery := 'http://www.musicbrainz.org/ws/2/recording/?query='+escape(tracktitle)+'&artist:'+escape(ArtistTitle);

Log('WebQuery: ' + webquery, 0);

begin
  XMLDoc:= TXMLDocument.Create(nil);
  XMLDoc.FileName := webQuery;
  XMLDoc.Active := True;

  Log('Report: ' + XMLDoc.XML.Text, 0);

   StartItemNode := XMLDoc.DocumentElement.ChildNodes.First.ChildNodes.FindNode('release-list') ;

   ANode := StartItemNode;
   repeat
     Result.Album := ANode.ChildNodes['title'].Text;  <-- Access Violation
     Result.Status:= ANode.ChildNodes['status'].Text;

     ANode := ANode.NextSibling;
   until ANode = nil;

end; 
```

XML 文件已正确获取，如下所示：

```
<metadata xmlns="http://musicbrainz.org/ns/mmd-2.0#" xmlns:ext="http://musicbrainz.org/ns/ext#-2.0">
<recording-list offset="0" count="1">
<recording ext:score="100" id="a399eec1-d45d-4505-b475-ead0da6cad17">
<title>Mestecăniș</title>
<length>359000</length>
<artist-credit>
<name-credit>
<artist id="8fb78a16-0cba-4175-8c92-d9645dfb007d">
<name>Bucovina</name>
<sort-name>Bucovina</sort-name>
</artist>
</name-credit>
</artist-credit>
<release-list>
<release id="22b00afc-86ea-445a-8805-b6bfa33da74e">
<title>Duh</title>
<status>Official</status>
<release-group type="EP" id="4e8fb87c-3760-48c1-a3d7-88e7a2c839fa">
<primary-type>EP</primary-type>
</release-group>
<date>2010</date>
<country>RO</country>
<medium-list>
<track-count>5</track-count>
<medium>
<position>1</position>
<format>CD</format>
<track-list offset="3" count="5">
<track>
<number>4</number>
<title>Mestecăniș</title>
<length>359000</length>
</track>
</track-list>
</medium>
</medium-list>
</release>
</release-list>
</recording>
</recording-list>
</metadata> 
```

我的问题是：我在这里做错了吗？所有变量都被声明和初始化OK。

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T16:53:32.547

您有访问冲突，因为该`FindNode`方法返回 nil 值并且您尝试访问无效的内存位置。为了使用该`FindNode`方法，您必须检查要搜索的节点的层次结构（级别），然后检查结果是否不是`nil`。

试试这个样本。

```
 XMLDoc:= LoadXMLDocument(webQuery);
   StartItemNode := XMLDoc.DocumentElement.ChildNodes.FindNode('recording-list');
   if not Assigned(StartItemNode) then exit;
   StartItemNode := StartItemNode.ChildNodes.FindNode('recording');
   if Assigned(StartItemNode) then
   begin
     StartItemNode := StartItemNode.ChildNodes.FindNode('release-list');
     if Assigned(StartItemNode) then
     begin
       StartItemNode := StartItemNode.ChildNodes.FindNode('release');
       if Assigned(StartItemNode) then
       begin
         ANode := StartItemNode;
         repeat
           Result.Album := ANode.ChildNodes['title'].Text;
           Result.Status:= ANode.ChildNodes['status'].Text;
           ANode := ANode.NextSibling;
         until ANode = nil;
       end;
     end;
   end; 
```

# c# - 可以判断路径是否代表 C#/.NET 2.0 中的文件或文件夹名称？

> ID：12759720
> 
> 赞同：0
> 
> 时间：2012-10-06T12:16:21.973
> 
> 标签：c#, .net-2.0, filenames

我知道过去曾问过几个类似的问题，我也知道我可以使用`Directory.Exists()`或`File.Exists()`或使用 API 调用检查文件系统，但我试图仅根据输入字符串做出此决定。

```
public bool ValidateOutputFilename ( string sPath )
{
    // check if sPath is actually a filename
} 
```

我的猜测是这是不可能的，因为看起来像文件夹名称（没有扩展名但没有尾随`\`）的东西实际上可能是一个文件（例如`C:\A\B\C`可能代表一个文件或文件夹，反之亦然）。

我想避免文件系统检查的原因是因为路径可能/可能不存在并且`sPath`可能代表网络位置，在这种情况下文件系统查询会很慢。

我希望有人可以推荐一个我还没有考虑过的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T12:20:44.323

我认为您无法避免文件系统调用。
只有文件系统才能确定。
正如您所说，一个简单的、格式良好的字符串是无法识别为路径或文件的。

回答您的问题的一种方法是通过[File.GetAttributes](http://msdn.microsoft.com/en-us/library/system.io.file.getattributes.aspx)方法。
它返回一个[FileAttributes](http://msdn.microsoft.com/en-us/library/system.io.fileattributes.aspx)枚举值，可以使用按位 AND 进行测试，以查找 Directory 位是否已设置并且是最快的方法（除了直接的非托管调用）。

```
try
{
    // get the file attributes for file or directory 
    FileAttributes attr = File.GetAttributes(sPath);
    bool isDir = ((attr & FileAttributes.Directory) == FileAttributes.Directory) ? true : false;
    if (isDir == false)
       ....
    else
       ....
    }
}
catch(Exception ex)
{
    // here as an example. probably you should handle this in the calling code
    MessageBox.Show("GetAttributes", ex.Message);
} 
```

当然，如果路径所代表的文件或目录不存在，则会出现应处理的异常。

作为旁注： Directory.Exists 或 File.Exists 可以告诉您是否存在具有指定名称的文件或目录，但是如果您不知道路径字符串代表什么，如何调用正确的名称？你需要打电话来确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T12:31:33.630

There is no way to get more information about a file unless you physically read it. From what I understand, you want to avoid reading the file.

You have no other option but to verify extensions and trailing slashes contained in the string. But even like that, the result will never be real. For example, I just created this folder in my d:

```
D:\Music\file.txt 
```

and I created this file inside:

```
D:\Music\file.txt\folder 
```

# java - db4o 在从容器对象中删除引用后留下空闲对象。如何解决？

> ID：12759723
> 
> 赞同：1
> 
> 时间：2012-10-06T12:16:46.857
> 
> 标签：java, db4o

有人知道如何让 db4o 在以下场景中工作吗？我尝试了 cascadeOnUpdate() 但失败了。

 `````
class Class1 {
    int field;
}

class Class2 {
    Class1[] clsArray;
}

//I usually change objects of Class2 in this way
Class2 obj = getFromContainer();
obj.clsArray = null;
objectContainer.store(obj);
objectContainer.commit(); 
````  `问题是 db4o 没有从数据库中删除 Class1 对象，这不符合我的要求。我在 Class2 上尝试了 cascadeOnUpdate()，但它也不起作用。我是否需要循环进入 Class2.clsArray 并明确删除每个对象？或者有没有更简单的方法可以让我技术。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T18:09:01.913

抱歉，我没有早点回答您的问题，但希望我还为时不晚。

除了`cascadeOnUpdate`，还有`cascadeOnDelete`。有关如何使用它的参考，[请看这里](http://community.versant.com/Documentation/Reference/db4o-8.1/java/reference/Content/configuration/objectclass/cascade_on_delete.htm)，[看这里](http://community.versant.com/Documentation/Reference/db4o-8.1/java/reference/Content/configuration/objectfield_configuration.htm)。有一个这样的例子：

```
EmbeddedConfiguration configuration = Db4oEmbedded.newConfiguration();
configuration.common().objectClass(Person.class).objectField("father").cascadeOnDelete(true); 
```

这将做你想要的。您可以通过特定字段（如上）或整个班级分配它：

```
configuration.common().objectClass(Person.class).cascadeOnDelete(true); 
```

这是关于它的 javadocs[`ObjectClass`](http://community.versant.com/documentation/reference/db4o-8.1/java/api/com/db4o/config/ObjectClass.html#cascadeOnDelete%28boolean%29)和[`ObjectField`](http://community.versant.com/documentation/reference/db4o-8.1/java/api/com/db4o/config/ObjectField.html#cascadeOnDelete%28boolean%29).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T21:47:25.093

您基本上是在寻找某种“垃圾收集”，其中对象被删除，而不再被引用。

db4o 没有这种能力。您需要手动查看数组并删除对象。``

# android - 如何在 Android 中的 ListView Click 事件上更改 TextView 颜色和 ImageView 图像？

> ID：12759728
> 
> 赞同：0
> 
> 时间：2012-10-06T12:17:10.260
> 
> 标签：android, android-listview

我想在列表视图单击事件上更改 Textview 颜色和 Imageview 图像，并且我还创建自定义列表视图。我希望​​当我单击列表视图项目以更改图像和文本颜色并转到另一个活动时，但是当我返回列表活动时并单击其他列表项以更改文本颜色和图像以及更改第一次单击项颜色和图像..我的代码如下：

```
SimpleAdapter adapter = new SimpleAdapter(getBaseContext(),
                channel_listView, R.layout.listview_layout1, from, to);
        listView.setDivider(null);
        listView.setAdapter(adapter);
        listView.setCacheColorHint(0);

listView.setOnItemClickListener(new OnItemClickListener() {

                @Override
                public void onItemClick(AdapterView<?> arg0, View arg1,
                        int position, long arg3) {
                    // TODO Auto-generated method stub
                    long c_name = listView.getItemIdAtPosition(position);
                    Log.i("c_name", "" + c_name);

                    ((TextView) arg1.findViewById(R.id.txt))
                            .setTextColor(Color.YELLOW);
                    ((ImageView) arg1.findViewById(R.id.flag))
                            .setBackgroundResource(R.drawable.yellowmusicicon);

                    String ch_name = (String) ((TextView) arg1
                            .findViewById(R.id.txt)).getText();
                    Log.i("txt_value", "" + ch_name);

                    Intent intent = new Intent(ChannelList.this,
                            FMActivity.class);
                    intent.putExtra("id", c_name);
                    intent.putExtra("c_name", ch_name);
                    startActivity(intent);
                }
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T13:21:57.010

宣布：

```
SharedPrefernces mPrefs; 
```

在创建：

```
mPrefs = getSharedPreferences("some name", 0); 
```

使用价值：

```
int value = mPrefs.getInt("value name",0); 
```

保存价值：

```
mPrefs.edit().putInt("value name",value);
mPrefs.edit().commit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T13:14:51.643

只需添加到您的清单（到此活动中）：

```
android:launchMode="singleTask" 
```

或者：

```
android:launchMode="singleInstance" 
```

您的活动将不再重现。它将被保存。
更多信息：[这里](http://developer.android.com/guide/topics/manifest/activity-element.html)

# html - 对齐 3 个 div 水平居中和可链接？

> ID：12759731
> 
> 赞同：2
> 
> 时间：2012-10-06T12:17:19.897
> 
> 标签：html, css, html-table

我已经花了几个小时，我认为这样做要简单得多。我试图将 3 个 div 水平居中，同时保持它们完全可链接，我最终放弃了并尝试了表格（:-o )

第一个显示我尝试链接 div 失败。

```
 <center><table>
    <tr>

    <td>
    <a href="http://google.com" style="display:block;height:100%;width:100%">
    <div>
    a
    </div>
    </a>
    </td>
    <td>b</td>
    <td>c</td>
    </tr>
    </table> 
```

使用 CSS

```
tbody tr td{
width: 300px;
height: 200px;
border: 2px solid #000;
background-color: #000;
opacity: 0.7;
color: #fff;
font-size: 30px;
font-family: 'calibri'; //temporary
padding: 30px;
}
body center table
{
border-spacing: 20px;
margin-top: -90px;
}
tr td a{
height:150%;
width:150%;
} 
```

如果有人知道如何使用 div 或表格执行此操作，我们将不胜感激！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-06T12:25:52.070

根本不需要使用`table`s 。这里的关键是`display: inline-block;`。在这里查看它的实际效果：[小链接](http://jsfiddle.net/glee/GGbtd/)。HTML：

```
<div class = "onediv"><a href = "#">Glee is awesome!</a></div>
<div class = "onediv"><a href = "#">Glee is awesome!</a></div>
<div class = "onediv"><a href = "#">Glee is awesome!</a></div>​ 
```

CSS：

```
body { /*this should be whatever is containing your three divs*/
    text-align: center; /*center them*/
    white-space: nowrap; /*make sure they're all on the same line*/
}
.onediv {
    display: inline-block; /*magic*/
    height: 200px; /*or whatever you want*/
    width: 150px;
    /*make it look pretty*/
    background: rgb(0, 162, 232);
    color: white;
}
a {
    color: white;
    height: 100%; /*spans the whole div vertically*/
    width: 100%; /*and horizontally (not necessary, but can't hurt!)*/
    display: block; /*otherwise the height and width definitions won't work*/
}​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T12:20:25.820

你的意思是这样的吗？

**[演示](http://jsfiddle.net/gionaf/emWuu/)**

HTML：

```
<div id="wrapper">
<div><a href="#">a</a></div>
<div><a href="#">b</a></div>
<div><a href="#">c</a></div>
</div> 
```

CSS：

```
#wrapper, #wrapper * {
    -webkit-box-sizing:border-box;
    -moz-box-sizing:border-box;
    box-sizing:border-box;
}
#wrapper {
    margin:0 auto;
    width:1020px; /* width of divs + margin */
}
#wrapper > div {
    float:left;
    width:300px;
    height: 200px;
    text-align:center;
    margin:20px;
    border: 2px solid #000;
    line-height:140px; /* optional, will center the text vertically */
    background-color: #000;
    opacity: 0.7;
    font-size: 30px;
    font-family: 'calibri';
    padding: 30px;
}
#wrapper > div a {
    display:block;
    color: #fff;
} 
```

​​<strong>编辑：根据您的样式更新

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T10:33:28.423

```
<td>
<a href="http://google.com" style="display:block;height:100%;width:100%">
<div>
a
</div>
</a>
</td> 
```

你做所有`td`的`div`衬里。

# java - 错误 0:0:0:0:0:0:0:1%0 获取 IP V6 客户端

> ID：12759740
> 
> 赞同：0
> 
> 时间：2012-10-06T12:19:03.080
> 
> 标签：java, ipv6

我有这个函数可以从我在 Java 上的请求 (HttpServletRequest) 中获取 HostAddress。但是使用 Jetty 7.x 并且我的 IP 是 ipV6 我总是使用 iPv6 地址出现这个错误。

我的功能：

```
xxxx.getIP(request, false);

public static String getIP(HttpServletRequest request, boolean proxy) {
    String ip = "";
    log.debug("X-getHeaderNames ["+ request.getHeaderNames()+"]");
    if (proxy) {
        ip = XFordwardedInetAddressUtil.getAddressFromRequest(request);
    } else {
        String _ip = request.getRemoteAddr();
        ip = InetAddresses.forString(_ip).getHostAddress();
    }
    return ip;
} 
```

错误：

> 调试：org.encuestame.core.exception.EnMeMappingExceptionResolver - 解决来自处理程序 [org.encuestame.mvc.controller.TweetPollController@4fc23996] 的异常：java.lang.IllegalArgumentException：**'0:0:0:0:0:0:0 :1%0'**不是 IP 字符串文字。java.lang.IllegalArgumentException: **'0:0:0:0:0:0:0:1%0'**不是 IP 字符串文字。在 org.encuestame.utils.net.InetAddresses.forString(InetAddresses.java:59) 在 org.encuestame.core.util.EnMeUtils.getIP(EnMeUtils.java:210) 在 org.encuestame.mvc.controller.AbstractBaseOperations.getIpClient (AbstractBaseOperations.java:262) 在 org.encuestame.mvc.controller.TweetPollController.detailTweetPollController(TweetPollController.java:332) 在 org.encuestame.mvc.controller.TweetPollController$$FastClassByCGLIB$$$6990b004.invoke() 在 net.sf .cglib.proxy.MethodProxy.invoke(MethodProxy.java:191) 在 org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedIntercepto

我知道 iPv6 localhost 格式应该是 '0:0:0:0:0:0:0:1' 但我的请求总是返回这个字符串 '0:0:0:0:0:0:0:1%0 '

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T12:40:08.637

问题是您使用的类 ( `org.encuestame.utils.net.InetAddresses`) 显然不支持 IPv6。尝试使用Joachim 在他的回答中提到的 java [InetAddress类。](http://docs.oracle.com/javase/7/docs/api/java/net/InetAddress.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T12:33:40.497

当您使用[链接本地地址时，`%`应包含在 address 中](http://en.wikipedia.org/wiki/IPv6_address#Link-local_addresses_and_zone_indices)。

这是因为计算机需要知道请求来自哪个接口/区域才能回复正确的接口。

如果您使用正确配置的 Internet 可路由 IPv6 地址，则区域索引将不是地址的一部分。

在这种情况下，我看不到解决本地主机/链接本地测试问题的方法，除了过滤掉`%`符号后的任何内容，或者使用[另一个](http://docs.oracle.com/javase/7/docs/api/java/net/InetAddress.html)与链接本地地址一起工作的类来解析地址。

编辑：[这是我之前没有看到的另一个类似的问题](https://stackoverflow.com/questions/12080570/httpservletrequest-getremoteaddr-not-working-how-i-would-expect)。

# c++ - C++如何使用WTL绘制折线图？

> ID：12759750
> 
> 赞同：0
> 
> 时间：2012-10-06T12:20:24.667
> 
> 标签：c++, charts, wtl

我是 C++ 和 WTL 的新手，WTL 是否提供良好的 API 来显示折线图（堆叠区域、柱形图）？或者我们是否需要使用 3rd 方库将其与我们现有的 C++ 代码集成？如果我能提供一些指向示例的指针，那就太好了.....我正在寻找非常基本的 2D 折线图。该应用程序是用 C++ 编写的，并且对一些 GUI 组件使用 WTL .....平台是 windows

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T12:30:23.137

WTL 为您提供了一些封装 GDI API 和句柄的类，因此您显然可以绘制各种图表，您只需从头开始即可。也就是说，将您的客户区域分解为图表区域、图例、轴和子区域。如果您正在寻找使用盒子的解决方案，WTL 没有任何解决方案。您当然可以在您的窗口上集成第三方库、ActiveX 控件，甚至是由 IE ActiveX 控件托管的[Google 图表工具](https://developers.google.com/chart/)，您可以在其中在运行时传递数据合成 JS 脚本。

# python - pip：强制安装忽略依赖项

> ID：12759761
> 
> 赞同：209
> 
> 时间：2012-10-06T12:21:56.430
> 
> 标签：python, pip

有没有办法强制安装一个 pip python 包，忽略它所有无法满足的依赖项？

（我不在乎这样做有多“错误”，我只需要这样做，除了任何逻辑和推理......）

* * *

## 回答 #1

> 赞同：328
> 
> 时间：2012-10-06T12:55:19.617

pip 有一个`--no-dependencies`开关。你应该使用它。

有关更多信息，请运行`pip install -h`，您将在其中看到这一行：

```
--no-deps, --no-dependencies
                        Ignore package dependencies 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2019-11-14T08:25:25.797

当我尝试使用( ) 安装`librosa`软件包时，出现了以下错误：`pip``pip install librosa`

```
ERROR: Cannot uninstall 'llvmlite'. It is a distutils installed project and thus we cannot accurately determine which files belong to it which would lead to only a partial uninstall. 
```

我试图删除`llvmlite`，但`pip uninstall`无法删除它。因此，我通过此代码使用了`ignore`of的功能：`pip`

```
pip install librosa --ignore-installed llvmlite 
```

实际上，您可以使用此规则来忽略您不想考虑的包：

```
pip install {package you want to install} --ignore-installed {installed package you don't want to consider} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2021-09-17T22:44:45.847

尝试以下操作：

```
pip install --no-deps <LIB_NAME> 
```

或者

```
pip install --no-dependencies <LIB_NAME> 
```

或者

```
pip install --no-deps -r requirements.txt 
```

或者

```
pip install --no-dependencies -r requirements.txt 
```

# php - PHP中的非阻塞Curl请求

> ID：12759762
> 
> 赞同：3
> 
> 时间：2012-10-06T12:21:58.763
> 
> 标签：php, http, curl, nonblocking

所以我有这个功能来发出非阻塞的 curl 请求。它适用于我迄今为止测试的内容（少量请求）。但我需要它来扩展数千个请求（可能最多 10,000 个）。我的问题是我不想遇到同时运行太多并行请求的问题。

您会建议对请求进行速率限制吗？睡了吗？批量申请？功能如下：

```
function poly_curl($requests){

            $queue = curl_multi_init(); 
            $curl_array = array(); 
            $count = 0;
            foreach($requests as $request) 
            { 
                $curl_array[$count] = curl_init($request); 
                curl_setopt($curl_array[$count], CURLOPT_RETURNTRANSFER, true); 
                curl_multi_add_handle($queue, $curl_array[$count]); 
                $count++;
            } 

            $running = NULL; 
            do { 

               curl_multi_exec($queue,$running); 

            } while($running > 0); 

            $res = array(); 
            $count = 0;
            foreach($requests as $request) 
            { 
                $res[$count] = curl_multi_getcontent($curl_array[$count]); 
                $count++;
            } 

            $count = 0;
            foreach($requests as $request){ 
                curl_multi_remove_handle($queue, $curl_array[$count]); 
                $count++;
            } 
            curl_multi_close($queue);        
            return $res; 
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T13:07:01.020

我认为`curl_multi_exec`这个目的是不好的，因为即使您使用 100 个为一组的批次，99 个请求也可能完成，并且仍然必须等待最后一个请求完成。

但是您需要 100 个并行请求，当一个请求完成时，另一个请求会立即启动。所以你根本无法使用`curl_multi_exec`。

我会使用具有多个（恒定数量）消费者的普通生产者-消费者算法，每个消费者只处理一个 url。例如[php-resque](https://github.com/chrisboulton/php-resque)和`COUNT=100 php resque.php`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T12:38:10.247

您可能想要实现称为指数退避（[维基百科](http://en.wikipedia.org/wiki/Exponential_backoff)）的东西。

基本上，它是一种算法，允许您根据一些反馈动态扩展您的流程。

您在应用程序中定义一个速率，并且在第一次超时、错误或任何您决定的情况下，您会降低该速率，直到请求完成。

例如，您可以使用 HTTP 响应代码轻松实现它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-19T11:09:33.237

上次我做这样的事情包括下载和“解析”文件。一次只能处理 4 个子页面，受限于非常弱的硬件处理器（具有 HT 的 2 个内核）。我什么时候结束了两个队列：1 等待，2 进行中。每次从第二个队列中删除任务时，都会从第一个队列中取出新任务。

可能听起来很复杂，但在彼此和简单`count()`的两个循环中结束

顺便说一句，考虑到如此高的速率，我会考虑使用 Node.js - 为简单起见 - 或任何比 PHP 更非阻塞且更适合守护程序的东西。只要线程是 PHP 的弱点，它就不适合那里。

PS：很好的和有用的代码，谢谢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-11T14:23:59.630

我们曾经在 C++ 连接池代码中遇到过同样的问题。该方法是那些日子涉及一些严肃的分析。

但是，本质是，我们创建了一个池，请求将根据可用请求的数量得到处理。我们还做的是分配最大数量的连接池。[这是通过测试确定的]。

您真正需要的是一种方法来确定正在处理的请求数量并对其进行限制。在你的情况下是 $count

只需将 $count 与最大值[例如，$max] 进行比较，然后停在那里。根据程序运行的系统定义值。$max 可以是硬编码的或动态的。

# java - 在java中执行后我们如何为下一个任务保存一个线程（线程池的实现）

> ID：12759766
> 
> 赞同：5
> 
> 时间：2012-10-06T12:22:31.720
> 
> 标签：java, threadpool

我需要询问线程池是如何实现的，以便每次发生任务提交时都有恒定数量的线程执行。（在Executor中避免每次线程创建和删除的开销）

```
executor.submit(Runnable) 
```

假设我们在开始时创建了一些线程，当任务到来时，我们使用任何 Queue impl 将任务分配给它们（线程）。但是在完成它的任务之后，当按照线程的生命周期说，一个线程如何再次返回到它的池中？

“执行其运行方法后，它进入 TERMINATED 状态，不能再次使用”

我不明白线程池是如何工作的，因为它有恒定数量的线程来执行其队列中的任何任务。

如果有人可以在任务完成后向我提供线程重用的示例，那就太好了。

！！提前致谢 。！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T12:30:19.410

> “执行其运行方法后，它进入 TERMINATED 状态，不能再次使用”

它没有完成它`run()`相反它有一个循环来运行你提供的任务的 run()。

* * *

显着简化线程池模式，您将拥有如下所示的代码。

```
final BlockingQueue<Runnable> tasks = new LinkedBlockingQueue<Runnable>();

public void submit(Runnable runs) {
    tasks.add(runs);
}

volatile boolean running = true;

// running in each thread in the pool
class RunsRunnable implement Runnable {
    public void run() {
        while(running) {
           Runnable runs = tasks.take();
           try {
              runs.run();
           } catch(Throwable t) {
              // handles t
           }
        }
    }
 } 
```

在此示例中，您可以看到当每个任务的 run() 完成时，线程本身的 run() 直到池关闭时才完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-08T13:40:42.377

通常当我们使用线程池时会发生什么，它在 Run 方法中被强制迭代运行。直到队列中有可用的任务。

在下面的示例中 pool.removeFromQueue() 将迭代运行。

```
public class MyThread<V> extends Thread {
    private MyThreadPool<V> pool;
    private boolean active = true;

    public boolean isActive() {
        return active;
    }

    public void setPool(MyThreadPool<V> p) {
        pool = p;
    }

    /**
     * Checks if there are any unfinished tasks left. if there are , then runs
     * the task and call back with output on resultListner Waits if there are no
     * tasks available to run If shutDown is called on MyThreadPool, all waiting
     * threads will exit and all running threads will exit after finishing the
     * task
     */
    @Override
    public void run() {
        ResultListener<V> result = pool.getResultListener();
        Callable<V> task;
        while (true) {
            task = pool.removeFromQueue();
            if (task != null) {
                try {
                    V output = task.call();
                    result.finish(output);
                } catch (Exception e) {
                    result.error(e);
                }
            } else {
                if (!isActive())
                    break;
                else {
                    synchronized (pool.getWaitLock()) {
                        try {
                            pool.getWaitLock().wait();
                        } catch (InterruptedException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                    }
                }
            }
        }
    }

    void shutdown() {
        active = false;
    } 
```

需要设计你的线程池

```
public MyThreadPool(int size, ResultListener<V> myResultListener) {
        tasks = new LinkedList<Callable<V>>();
        threads = new LinkedList<MyThread<V>>();
        shutDown = false;
        resultListener = myResultListener;
        for (int i = 0; i < size; i++) {
            MyThread<V> myThread = new MyThread<V>();
            myThread.setPool(this);
            threads.add(myThread);
            myThread.start();
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T12:31:11.167

您可以在这里查看：[http](http://www.ibm.com/developerworks/library/j-jtp0730/index.html) ://www.ibm.com/developerworks/library/j-jtp0730/index.html以获取更多详细信息和实现示例。如果队列为空，池中的线程将等待，并且一旦收到队列有一些元素的通知，每个线程都会启动 consome 消息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T12:50:33.543

`ExecutorService executor = Executors.newFixedThreadPool(2);`

**-**上述语句创建了一个固定大小为 2 的 ThreadPool。

`executor.execute(new Worker());`

**-**上面的语句采用了实现`Runnable`接口的类 Worker 的实例。

**-**现在这里`Executors`是一个中间对象，执行任务。它管理线程对象。

**-**通过执行上述语句，该`run()`方法将被执行，一旦run()方法完成，线程**不会**进入死状态而是移回池中，等待分配另一个工作，因此它可以再次移动进入 Runnable 状态然后运行，这一切都由 Executors 处理。

`executor.shutdown();`

**-**上面的语句将关闭 Executors 本身，优雅地处理由它管理的所有线程的关闭..`shutdown()`在该中心对象上，这反过来可以终止每个注册的 executors。

```
////////// Edited Part////////////////////// 
```

**-**首先Runnable有一个run()方法不能返回任何东西，而run()方法不能抛出检查异常，所以Java 5中引入了Callable，它是Parametric类型的，有一个方法叫call()，它能够返回和抛出 Checked 异常。

**现在看这个例子：**

```
Thread t = new Thread(new Worker());

t.run();

t.start(); 
```

**-** `t.run()`只是对`run()`方法的简单调用，**这不会**跨越`thread of execution`.

**-while** `t.start()`为 的 的重要的事情做准备`initialization`，`thread of execution`然后**调用**的`run()`方法`Runnable`，然后**将 分配**给**新形成**`Task`的，然后**快速返回....** **`thread of execution`**

 ****`Swing`使用和时，Java 中的线程成为必需品`AWT`。**主要是 GUI 组件**。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-06T14:30:53.370

我完全同意彼得的观点，但想添加与 ExecutorService 执行流程相关的步骤，以便清楚地理解。

*   如果您创建线程池（*固定大小的池*），则并不意味着创建了线程。
*   如果您提交和/或执行新任务（`Runnuble`或`Callable`）新线程将被创建 JUTS 如果创建的线程计数`<`池大小
*   创建的线程不返回池，线程可以等待阻塞队列中的新值，此时我们可以调用 RETURNING TO POOL
*   来自上述 Peter 等池执行人员的所有线程。****

# ruby-on-rails - RAILS，捆绑安装返回 - 未定义符号：SSLv2_method

> ID：12759767
> 
> 赞同：1
> 
> 时间：2012-10-06T12:22:41.983
> 
> 标签：ruby-on-rails, bundle, undefined-symbol

> **可能重复：**
> [未定义符号：运行捆绑安装时的 SSLv2_method](https://stackoverflow.com/questions/12759518/undefined-symbol-sslv2-method-when-running-bundle-install)

我尝试“捆绑安装”我的 Rails 项目，但出现此错误：

```
Fetching gem metadata from https://rubygems.org/.Unfortunately, a fatal error has occurred. Please see the Bundler 
troubleshooting documentation at http://bit.ly/bundler-issues. Thanks! 
/home/vekozlov/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': /home/vekozlov/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/x86_64-linux/openssl.so: undefined symbol: SSLv2_method - /home/vekozlov/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/x86_64-linux/openssl.so (LoadError) 
```

我找到了这种情况（[Ubuntu 和 SSLv2_method 的未定义符号](https://stackoverflow.com/questions/8206546/undefined-symbol-sslv2-method)），但我不明白如何在 Ubuntu 12.04 x64 中修复它

谢谢你的帮助。

UPD：它对我有用（俄语）

[http://awolf.ru/rails-on-ubuntu-with-rvm/](http://awolf.ru/rails-on-ubuntu-with-rvm/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-07T19:04:14.040

请按照以下步骤解决问题：

```
$ source ~/.rvm/scripts/rvm
$ rvm pkg install zlib
$ rvm pkg install openssl
$ sudo apt-get install libreadline-dev
$ rvm pkg install readline
$ rvm install 1.9.3 --with-openssl-dir=$rvm_path/usr
$ gem install rails 
```

# jquery - 使用 jQuery UI 的范围滑块中的值错误

> ID：12759768
> 
> 赞同：0
> 
> 时间：2012-10-06T12:22:56.157
> 
> 标签：jquery, range, uislider

我的滑块有这样的配置：

```
    范围：真，
    步骤1，
    分钟：1，
    最大：14，
    值：[1, 14]，
    幻灯片：功能（事件，用户界面）{
        变量 btn = 0;
        $("#slider a").each(function()
        {
            $(this).html($('#slider').slider("values", ui.values[btn++]));
        });
    }

```

但是如果我左右移动处理程序，那么它总是显示以前的值而不是当前值。示例：第 1 步：1 和 14。 第 2 步：我将右侧处理程序移动到位置 1，它显示“2”。第 3 步：我将其移至位置 2，并显示“1”。

# jsf - 使用 viewscoped bean 时的数据表分页

> ID：12759774
> 
> 赞同：0
> 
> 时间：2012-10-06T12:23:30.287
> 
> 标签：jsf, jsf-2, datatable, pagination

我一直`JSF 1.2`在我的应用程序中使用。我的大部分应用程序页面由`h:datatable`. 我遇到了[这篇](http://balusc.blogspot.sg/2006/06/using-datatables.html)精彩的文章，它解释了有关数据表的所有内容。`HtmlDataTable`如上面的文章所示，我通过将我的表绑定到并使用会话范围的 bean来实现数据表分页。

现在我正在转向`JSF 2.0`版本。我想将我的`sessionscoped`bean转换为，`viewscoped`因为我的大多数应用程序页面都是相互独立的。

我遇到了[这篇](http://balusc.blogspot.sg/2010/06/benefits-and-pitfalls-of-viewscoped.html)解释`Viewscoped`豆子的文章。它告诉我们不能使用`binding`数据表的属性。它还使用`Datamodel`.

我现在对如何使用`Datamodel`and `viewscoped`bean 实现数据表分页感到震惊。

我有以下分页方法

```
public String pageFirst() {
        dataTable.setFirst(0);
        return "";
    }

    public String pagePrevious() {
        dataTable.setFirst(dataTable.getFirst() - dataTable.getRows());
        return "";
    }

    public String pageNext() {
        dataTable.setFirst(dataTable.getFirst() + dataTable.getRows());
        return "";
    }

    public String pageLast() {
        try {
        int count = dataTable.getRowCount();
        int rows = dataTable.getRows();
        LOGGER.info("rowcount:" + count);
        LOGGER.info("rows:" + rows);
        dataTable.setFirst(count - ((count % rows != 0) ? count % rows : rows));
        }catch(ArithmeticException e){
            LOGGER.info("no rows to display: ",e);
        }
        return "";
    } 
```

在我看来，我正在像这样使用它们

```
<h:commandButton value="#{msgs.footerbutton1}"
                 action="#{bean.pageFirst}"
                 disabled="#{bean.dataTable.first == 0}" />
<h:commandButton value="#{msgs.footerbutton2}"
             action="#{bean.pagePrevious}"
             disabled="#{bean.dataTable.first == 0}" />
<h:commandButton value="#{msgs.footerbutton3}"
             action="#{bean.pageNext}"
             disabled="#{bean.dataTable.first + bean.dataTable.rows
                             >= bean.dataTable.rowCount}" />
<h:commandButton value="#{msgs.footerbutton4}"
              action="#{bean.pageLast}"
              disabled="#{bean.dataTable.first + bean.dataTable.rows
                           >= bean.dataTable.rowCount}" /> 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T01:02:16.307

`dataTable.setFirst(...)`将and替换`dataTable.getRows()`为`private int first`and`private int rows`绑定为的属性

```
<h:dataTable ... first="#{bean.first}" rows="#{bean.rows}"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T13:26:07.740

我认为，您应该使用[primefaces 数据表](http://www.primefaces.org/showcase-labs/ui/datatablePagination.jsf)，它们有一个非常好的开箱即用数据表，其中包含许多特性，包括[延迟加载](http://uaihebert.com/?p=1120)，或者您可以使用[richfaces](http://www.jboss.org/richfaces)或任何其他组件套件。当然，您可以构建您的 onw jsf 分页，但我认为您将花费大量时间构建一些已经完成的东西。

# java - Java 异常处理 Do loop 不起作用？

> ID：12759775
> 
> 赞同：0
> 
> 时间：2012-10-06T12:23:52.100
> 
> 标签：java, exception, loops

这是代码：

```
package classes;
import java.util.*;

public class Introduction {
    Scanner Input = new Scanner(System.in);
    int classChoose;
    boolean repeat = false;

    public void Introduction() {
        System.out.println("\t===THE QUEST FOR PERSEPOLIS===\tv 1.0\n");
        System.out.println("Please choose a class: ");
        System.out.print("(1)Elite Knight\t");
        System.out.print("(2)Dawnguard\n");
        System.out.print("(3)Archer\t\t\t");
        System.out.print("(4)Barbarian\n");
        System.out.print("(5)Mage\t\t\t");
        System.out.print("(6)Swordsman\n");
        System.out.println("(7)Crossbowman\t");

        do {
            try {
                repeat = false;
                classChoose = Input.nextInt();
                while(classChoose < 1 || classChoose > 7) {
                    repeat = false;
                    System.out.println("Error. Enter a number between 1 and 7(inclusive).");
                    classChoose = Input.nextInt();
                }
            }
            catch(InputMismatchException e) {
                repeat = true;
                System.err.println("Caught: "+e);
                Input.nextLine();
            }
        }while(repeat = true);

        switch(classChoose) {
            case 1: chooseKnight();
                    break;
            case 2: chooseGuard();
                    break;
            case 3: chooseArcher();
                    break;
            case 4: chooseBarbarian();
                    break;
            case 5: chooseMage();
                    break;
            case 6: chooseSwordsman();
                    break;
            case 7: chooseCrossbowman();
                    break;
        }
    }
    public static void chooseKnight() {
        System.out.println("You have chosen the Elite Knight. You will be briefed and then you shall be set "
        +"on your quest!");
    }
    static void chooseGuard() {
        System.out.println("You have chosen the Dawnguard. You will be briefed and then you shall be set "
        +"on your quest!");
    }
    static void chooseArcher() {
        System.out.println("You have chosen the Archer. You will be briefed and then you shall be set "
        +"on your quest!");
    }
    static void chooseBarbarian() {
        System.out.println("You have chosen the Barbarian. You will be briefed and then you shall be set "
        +"on your quest!");
    }
    static void chooseMage() {
        System.out.println("You have chosen the Mage. You will be briefed and then you shall be set "
        +"on your quest!");
    }
    static void chooseSwordsman() {
        System.out.println("You have chosen the Swordsman. You will be briefed and then you shall be set "
        +"on your quest!");  
    }
    static void chooseCrossbowman() {
        System.out.println("You have chosen the Crossbowman. You will be briefed and then you shall be set "
        +"on your quest!");
    }
} 
```

每次我运行它时，程序都会提示我选择我的班级。在我输入我的选择后，程序不会继续执行 do 循环下方的 switch 语句。有人可以帮我解决这个问题吗？

-卡尔文

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T12:26:27.910

```
while(repeat = true); 
```

应该： -

```
while(repeat == true);  // Or better: -  while(repeat); 
```

在你的**捕获**中，更改`Input.nextLine()`为`Input.next()`： -

```
catch(InputMismatchException e) {
    repeat = true;
    System.err.println("Caught: "+e);
    Input.nextLine();  // Change to Input.next()
} 
```

并且您的实例变量应该以小写字母或下划线开头。所以更改`Input`为`input`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T12:26:44.690

这是一个作业：

```
 while(repeat = true); // Note single '=', not '==' 
```

其结果将始终为`true`，来自Java 语言规范的第[*15.26 节赋值运算符：*](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.26)

> 在运行时，赋值表达式的结果是赋值发生后变量的值。

改成：

```
while(repeat); 
```

# linux - 子进程执行后的父进程

> ID：12759777
> 
> 赞同：-1
> 
> 时间：2012-10-06T12:24:00.677
> 
> 标签：linux

我有一个场景，在 fork 之后，孩子使用 excele() 命令执行

一个 linux 系统命令，它在其中执行一个小的 shell 脚本。

之后父母只做一个 wait() 。所以我的问题是，父母是否执行

在子进程执行的 execle() 之后等待？

谢谢斯米塔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T12:27:35.023

我不太确定您在问什么，但是父级处于 wait() 系统调用中，它将在那里等待，直到任何子级退出。还有其他的东西，比如信号，也会把它带出出口。

您必须在子进程中小心，以免因错误而意外陷入父代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T12:27:59.670

这（一个子进程`execve`在它的父进程之后做一些事情`fork`，并且父进程`wait`- 或者 -`waitpid`处理它）是一个非常常见的场景；大多数贝壳都是这样工作的。您可以`strace -f`使用交互式`bash`shell 来了解更多信息，或者研究简单 shell 的源代码，例如`sash`

请注意，在[fork(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/fork.2.html)系统调用之后，父进程和子进程可能会同时运行（例如同时运行，尤其是在多核机器上）。

# imagemagick - Python Magickwand pdf到图像转换和调整图像大小

> ID：12759778
> 
> 赞同：8
> 
> 时间：2012-10-06T12:24:21.920
> 
> 标签：imagemagick, python-2.6, magickwand

我需要创建 pdf 文件的缩略图，我正在使用 Imagemagick 来实现这一点。

我已经尝试过 Pythonmagick 和 wand 将 pdf 转换为图像。但是，当我尝试调整转换后的 pdf 大小时，生成的图像变为黑色。

有没有 `-define pdf:use-cropbox=true`使用 python 包装器设置的选项？

Python中还有其他方法可以将pdf转换为缩略图吗？

代码如下：

```
 import wand
    img = wand.image.Image(filename="d:\\test.pdf[0]")
    img.resize(160,160)
    img.save(filename="d:\\test.jpg") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T08:36:59.153

我找到了解决这个问题的方法。将 pdf 转换为图像 1st 并保存图像。打开新保存的图像并调整其大小。

```
import wand
img = wand.image.Image(filename="d:\\test.pdf[0]")
img.save(filename="d:\\temp.jpg")
img = wand.image.Image(filename="d:\\temp.jpg")
img.resize(160,160)
img.save(filename="d:\\resized_image.jpg") 
```

我仍在等待更好的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-26T18:45:08.390

我今天遇到了同样的问题。我在其他帖子中找到了另一个解决方案。图像变黑的原因是PDF文件的背景是透明的。由于 JPG 文件无法识别 alpha 通道（记录透明像素信息）。默认情况下，JPG 文件会将这些透明像素设置为黑色。

```
# Use the following two lines to fix this error
# img_page.background_color = Color('white')
# img_page.alpha_channel = 'remove'

with Image(filename="file.pdf",resolution= 350) as img_pdf:
    num_pages = len(img_pdf.sequence)
    for page, img in enumerate(img_pdf.sequence):
        img_page = Image(image=img)
        img_page.background_color = Color('white')
        img_page.alpha_channel = 'remove'
        img_page.resize(900,1200)
        img_page.save(filename="file"+str(page)+".jpg")
        if page == 0:
            img_page.resize(500, 500)
            img_page.save(filename="thumbnail.jpg") 
```

参考：[Python Wand 将 PDF 转换为 PNG 禁用透明（alpha_channel）](https://stackoverflow.com/questions/27826854/python-wand-convert-pdf-to-png-disable-transparent-alpha-channel)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-28T14:45:30.547

您可以在不使用临时文件的情况下执行此操作 - 如果您不依赖 JPG。

以下对我有用：

```
import wand
img=wand.image.Image(filename="/home/vagrant/tmp/wand/law.pdf[0]")
img.format='png'
img.resize(220,220)
img.save(filename="/home/vagrant/tmp/wand/law_2.png") 
```

# php - 为什么两个页面，100% 相同的代码，都包含相同的 style.css 有不同的输出？

> ID：12759784
> 
> 赞同：0
> 
> 时间：2012-10-06T12:25:15.753
> 
> 标签：php, html, css

我遇到了一个奇怪的情况，其中打印网站导航部分的功能在一个页面上的输出与另一个页面上的输出略有不同。第一次开始时我添加了我之前没有声明过的内容。打印导航的函数在两个页面上都被赋予了相同的参数。然而，一页正在输出它，带有额外的中断或额外的边距或其他东西。

所以我花了很多时间弄乱style.css，但无论如何，一页总是在链接之间有更多的空间。更改样式会影响两页，但一页总是有更多的间距或边距或中断或其他任何内容。

然后我确保两个页面都没有 xml 验证错误，在这个意义上使它完美，仍然一页在链接之间有更多的空间。当调用与打印 NAVI 完全相同的功能时...

终于我有了它，我复制了所有页面 a 的代码（页面显示正确）并将其粘贴到页面 b 的代码中（粘贴在 b 的旧代码上），我保存并让我惊叹不已，页面 b 仍然显示额外空间。

需要明确的是，2个文件，文件中的代码100％相同，只是文件名称不同。然而，一个的输出仍然是双倍行距的。我再重复一遍，两个文件都加载了相同的 style.css，但输出却不同......

有人请让我知道这是怎么可能的。更好的是如何解决它。

我真的不明白代码示例是如何必要的，但我会给你打印导航的功能

```
 function navigation ($str){
    settotals(0);
    if ($_SESSION['lang'] == "eng")
    {   
    $home = "Home";
    $login = "Login";
    $insert = "Insert";
    $post = "Post Request";
    $ranks = "Ranks";
    $score = "Scoreboard";
    $register = "Register";
    $howtoread = "Read Japanese";
    $contact = "Contact Us";
    $engreq = "English Requests";
    $japreq = "Japanese Requests";
    $japtra = "Japanese Translations";
    $engtra = "English Translations";
    $mytran = "My Translations";
    $mylikes = "My Likes";
    $likesrec = "Likes Received";
    $pref = "Preferences";
    }
    else
    {
    $home = "ホーム";
    $login = "ログイン";
    $insert = "入力";
    $post = "リクエストを掲示";
    $ranks = "ランク";
    $score = "スコアボード";
    $register = "登録";
    $howtoread = "日本語の読み方";
    $contact = "コンタクト";
    $engreq = "英語のリクエストリスト";
    $japreq = "日本語のリクエストリスト";
    $japtra = "英和訳リスト";
    $engtra = "和英訳リスト";
    $mytran = "自分の翻訳リスト";
    $mylikes = "「いいね」を押したリスト";
    $likesrec = "「いいね」をもらったリスト";
    $pref = "選択肢";
    }
    ?>
    <img border="0" src="<? echo $str; ?>img/blankbutton.jpg" width="152" height="26"/>    <p><font face="Arial" size="4">
        <a href="http://mrhowtosay.com">&nbsp;<?echo $home?></a><br /><img border="0" src="<? echo $str; ?>img/line.gif" width="137" height="1"><br />
        <a href="<? echo $str; ?>login">&nbsp;<?echo $login?></a><br /><img border="0" src="<? echo $str; ?>img/line.gif" width="137" height="1"><br />
        <?if ($_SESSION['rights'] >= 4)
       {?>
        <a href="<? echo $str; ?>insert" >&nbsp;<?echo $insert?></a><br /><img border="0" src="<? echo $str; ?>img/line.gif" width="137" height="1"><br />
    <? }?>
    <a href="<? echo $str; ?>search" >&nbsp;<?echo $post?></a><br /><img border="0" src="<? echo $str; ?>img/line.gif" width="137" height="1"><br />    
        <a href="<? echo $str; ?>ranks">&nbsp;<?echo $ranks?></a><br /><img border="0" src="<? echo $str; ?>img/line.gif" width="137" height="1"><br />
        <a href="<? echo $str; ?>score">&nbsp;<? echo $score?></a><br /><img border="0" src="<? echo $str; ?>img/line.gif" width="137" height="1"><br />
        <a href="<? echo $str; ?>register">&nbsp;<?echo $register?></a><br /><img border="0" src="<? echo $str; ?>img/line.gif" width="137" height="1"><br />
        <a href="<? echo $str; ?>read">&nbsp;<?echo $howtoread?></a><br /><img border="0" src="<? echo $str; ?>img/line.gif" width="137" height="1"><br />
        <a href="<? echo $str; ?>contact">&nbsp;<?echo $contact?></a><br />
        </font>
        <font face="Arial" size="2">
 <br />
    <img border="0" src="<? echo $str; ?>img/Browse.gif" width="152" height="26"><br /><br />

    &nbsp;<img border="0" src="<? echo $str; ?>img/arrowleft.gif" width="11" height="11"/>   <a href="<? echo $str; ?>translated?mode=1&amp;pagenum=1&amp;set=1#down">&nbsp;<?echo $engtra?></a><br /><br />

    &nbsp;<img border="0" src="<? echo $str; ?>img/arrowleft.gif" width="11" height="11"/><a href="<? echo $str; ?>translated?mode=2&amp;pagenum=1&amp;set=1#down">&nbsp;<?echo $japtra?></a><br /><br />

       <img border="0" src="<? echo $str; ?>img/new.gif" width="152" height="26"><br />
  <br />
  &nbsp;<img border="0" src="<? echo $str; ?>img/arrowleft.gif" width="11" height="11"/>  
        <a href="<? echo $str; ?>translated?mode=3&amp;pagenum=1&amp;set=1#down">    <?echo $engreq?></a> 
        <br /><br />
 &nbsp;<img border="0" src="<? echo $str; ?>img/arrowleft.gif" width="11" height="11"/>  
   <a href ="<? echo $str; ?>translated?mode=4&amp;pagenum=1&amp;set=1#down"><?echo $japreq?></a>
  <br /><br />

  <?if ($_SESSION['username'])
{ ?>
<img border="0" src="<? echo $str; ?>img/promo.gif" width="152" height="26"><br /><br />

&nbsp;<img border="0" src="<? echo $str; ?>img/arrowleft.gif" width="11" height="11"/>   <a href="<? echo $str; ?>translated?mode=5&amp;set=1&amp;pagenum=1&amp;user=<?echo $_SESSION['username'];?>#down"><?echo $mytran?></a>

<br /><br />&nbsp;<img border="0" src="<? echo $str; ?>img/arrowleft.gif" width="11" height="11"/>   <a href="<? echo $str; ?>translated?mode=6&amp;set=1&amp;user=<?echo $_SESSION['username'];?>#down"><?echo $mylikes;?></a>

<br /><br />&nbsp;<img border="0" src="<? echo $str; ?>img/arrowleft.gif" width="11" height="11"/>   <a href="<? echo $str; ?>translated?mode=7&amp;set=1&amp;user=<?echo $_SESSION['username'];?>#down"><?echo $likesrec;?></a>

<br /><br />&nbsp;<img border="0" src="<? echo $str; ?>img/arrowleft.gif" width="11" height="11"/>   <a href="<? echo $str; ?>preferences"><?echo $pref?></a>

      <?
}
?></font></p>
  <font face="Arial" size="2"><?
  if ($_SESSION['username'])
  signature($_SESSION['username'],"");?></font><br />
  <?
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T12:48:24.503

1.) 使用相同的参数调用相同的函数*不一定*会产生相同的输出。可能还有其他因素会影响输出，例如环境变量、软件版本和和。

因此，函数调用方式相同这一事实并不令人感兴趣，但*前提*是输出*确实*相同。你检查了吗？你不提那个...

2.) 在两个页面上添加相同的样式定义文件这一事实*并不*意味着两个站点上的 wohle 样式定义相同。其他样式定义可能会干扰。首先，显然浏览器内置的样式规则可能不同，然后可能包含其他样式文件。这种情况对于它们被包含的顺序总是至关重要的。*如果在*您的样式之后验证了其他样式定义，那么结果很可能会有所不同。

您必须使用浏览器内置调试器检查您看到的实际结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T12:47:39.233

如果具有相同输入的相同函数给出不同的输出，则该函数就是所谓的[*非确定性*函数](http://en.wikipedia.org/wiki/Nondeterministic_algorithm)。

因为如果一个函数是非确定性的，这通常是没有用的，因为你不能以确定性的方式使用它（例如我有一个问题 A，我使用函数 F 而不是可以处理问题 A，除非 F 不清楚是什么它确实）。

因此，使函数具有不确定性的这些不确定性通常是可能导致应用程序失败的缺陷。或者只是与您的情况不同的输出。

这可能是由于隐藏的依赖关系（例如，有一个编码参数注入到您在通过 php.ini 指定的函数内部使用的函数）或静态（HTTP 请求不同，因此函数的输出在上下文中不同）浏览器和服务器的 HTTP 请求和响应）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T14:46:41.833

功能不是这里的问题。在其中一页上，您指定了`DOCTYPE`，而在另一页上却忘记了。这就是浏览器对它的解释不同的原因。`DOCTYPE`请记住始终将 所以，添加：

```
<!doctype html> 
```

在每个页面的顶部，因此渲染将与`http://mrhowtosay.com/translated`页面上的相同。然后根据需要进行一些美学更改。如果您坚持使用没有`DOCTYPE`指定的页面，您将永远无法确定输出会是什么样子，并且很有可能在不同的浏览器上会有所不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T19:55:02.663

看来，您的问题确实与 UTF-8 有关。我用 firebug 分析了您的示例页面，结果显示 html 页面包含**UTF-8 BOM-header**，但未翻译的页面包含两次！

文件开头的这 3 个字符 (ï»¿) 由您的编辑器编写，但不会显示。使用 HEX 编辑器，您可以看到差异，您还可以转到文件属性并查看文件大小，您会发现它们略有不同。

我的建议是，将文件保存为**不带**BOM 标头的 UTF-8。尤其是双标头让IE切换到了quirks-mode（你可以`F12`在IE中点击开发者工具查看），导致渲染不一样。在任何情况下，双 BOM 表头都是错误的。

编辑：

刚刚找到了一个很棒的工具来[检查 utf-8 BOM 和 header](http://validator.w3.org/i18n-checker/)问题。

# unix - 为什么这个 awk 文件不产生任何输出？

> ID：12759785
> 
> 赞同：0
> 
> 时间：2012-10-06T12:25:23.163
> 
> 标签：unix, command-line, awk

命令：

```
awk –f cs2ss.awk < dataset.csv > dataset.ss 
```

应该使用这个程序：

```
BEGIN  {FS = ",";}
{
  for(i=1;i<=NF;i++) {printf("%s ", $i);}
  printf("\n");
} 
```

从 dataset.csv 中取出所有逗号。但它只创建空文件 dataset.ss。我确保所有使用的文件都是 .txt 而不是 rtf（使用 MacBook）。我究竟做错了什么？

编辑：输入文件的屏幕截图 -

![在此处输入图像描述](../Images/76926058d66bfcc7e0f6da527bd4539a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T12:31:35.443

The code works. You can test it by simply running

```
awk –f cs2ss.awk 
```

And typing in sample lines of input. So you must be doing something else wrong and that thing is not apparent from here.

Things to try....

Run

```
awk –f cs2ss.awk < dataset.csv 
```

If you get non-empty output to the screen, then there's something odd about the destination file or filesystem. If you get blank output to screen, there's a problem with the input file.

If it's the input file, what does

```
file dataset.csv 
```

tell you?

# .net - 如何从 c# winform 中的 datetimepicker 禁用星期日？

> ID：12759787
> 
> 赞同：0
> 
> 时间：2012-10-06T12:25:28.673
> 
> 标签：.net, winforms, c#-4.0

我正在开发基于窗口的应用程序，我想从`DateTimePicker Control`.

可以禁用星期天吗？如果是这样，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T15:24:36.270

尝试这个。他们可能是一些更简单的解决方案。但我有这个很容易:)

它不会禁用星期天日期，而是如果您选择的最后一个日期较小，它会将您带到星期一，如果您要下来，它会将您带到星期六。相当于禁用星期天

// 你需要以下三个变量来 deare

```
 DateTime lastDate;
    System.Text.RegularExpressions.Regex rg;
    bool valueChangingProgramatically = false;

    //If you have already Form_load Event, just add the body of following event in yours
    // Add form_load event and write this code in body
    private void Form1_Load(object sender, EventArgs e)
    {
        lastDate = dateTimePicker1.Value;
        rg = new System.Text.RegularExpressions.Regex("Sunday");
        if (lastDate < dateTimePicker1.Value)
            dateTimePicker1.Value = dateTimePicker1.Value.AddDays(1);
        // I am adding event of datetimepicker value changed at the end of FormLoad
        dateTimePicker1.ValueChanged += new EventHandler(dateTimePicker1_ValueChanged);
    }

    // valueChangingProgramatically avoids recursion/ infinte loop/repeteion of this event
    private void dateTimePicker1_ValueChanged(object sender, EventArgs e)
    {
        if (!valueChangingProgramatically)
        {
            if (rg.IsMatch(dateTimePicker1.Value.ToLongDateString()))
            {
                valueChangingProgramatically = true;
                if (lastDate < dateTimePicker1.Value)
                    dateTimePicker1.Value = dateTimePicker1.Value.AddDays(1);
                else
                    dateTimePicker1.Value = dateTimePicker1.Value.AddDays(-1);
            }

        }
        else
            valueChangingProgramatically = false;
        lastDate = dateTimePicker1.Value;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T12:38:01.480

您可以使用`DateEdit`控制来更改您的任何功能`DateTimePicker Control`... 检查[这里](https://www.devexpress.com/Products/Free/NetOffer/)。

# vba - 运行 VBA 时仍然使用 excel

> ID：12759788
> 
> 赞同：2
> 
> 时间：2012-10-06T12:25:31.977
> 
> 标签：vba, scroll, wait

我在vba中写了一些代码。

当我运行它时，Excel 暂时停止响应 - 指针变为忙碌符号，我无法向下滚动。

我想在此代码运行时继续使用 Excel。我怎样才能做到这一点？

这是代码：

```
numRowB = getRow("B")
numRowL = getRow("L")
For i = 6 To numRowB
    count = count + 1
    Application.StatusBar = "Processing " & count & "/" & numRowB - 6 & " items."
    For j = 6 To numRowL
        If RE6(Range("B" & i).Value) = RE6(Range("L" & j).Value) Then
            Range("A" & i).Value = count
            Range("K" & j).Value = count
            If Range("B" & i).Value <> Range("L" & j).Value Then
                ReDim Preserve arrData(count2)
                arrData(count2) = Range("L" & j).Value
                count2 = count2 + 1
                Range("A" & i).Interior.ColorIndex = 46
                Range("K" & j).Interior.ColorIndex = 46
            Else
                Range("A" & i).Interior.ColorIndex = 4
                Range("K" & j).Interior.ColorIndex = 4
            End If
            Exit For
        End If
    Next
Next 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T14:45:06.780

放置`DoEvents`在您的第二个 for 循环中。这将允许 Excel 在代码命中命令时响应鼠标和键盘输入`DoEvents`，这应该是相当频繁的。

**警告：**如果您实际使用`DoEvents`，您还应该确保指定使用 Range 调用的工作表（无论如何您通常都应该这样做）。您可以通过以下方式执行此操作：

```
Dim sheet As Worksheet
Set sheet = ActiveSheet
With sheet
     'Your code goes here...
end With 
```

然后确保使用`.Range`而不是`Range`，这样即使用户更改工作表，它仍然会更新正确的工作表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T14:08:32.487

你不能。Excel 宏将尽快完成符合您的最大利益。为了提高其性能并减少闪烁，请在宏`Application.ScreenUpdating=false`的开头和结尾使用。`Application.ScreenUpdating=true`

挑剔：如果要查询单个单元格，则可以使用 Cells(row,column) 。这接受整数作为参数，因此`Range("K" & i)`将更改为`Cells(i,11)`. 这有点快。

# android - 在android中使用Contact_ID获取联系人详细信息

> ID：12759796
> 
> 赞同：0
> 
> 时间：2012-10-06T12:26:23.260
> 
> 标签：android, android-contacts

如何在android中使用联系人ID获取联系人详细信息？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T12:30:21.513

此代码将向您返回具有给定联系人 ID 的联系电话。

```
ArrayList<String> phones = new ArrayList<String>();

Cursor cursor = mContentResolver.query(
        CommonDataKinds.Phone.CONTENT_URI, 
        null, 
        CommonDataKinds.Phone.CONTACT_ID +" = ?", 
        new String[]{id}, null);

while (cursor.moveToNext()) 
{
    phones.add(cursor.getString(cursor.getColumnIndex(CommonDataKinds.Phone.NUMBER)));
} 

cursor.close();
return(phones); 
```

这里`id`是contact_id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T12:02:30.413

**要从手机 Uri 中获取联系人我们需要在 android Manifest 中添加权限**

# ios - XCode 4：一些按钮标题在 iOS 模拟中不可见

> ID：12759798
> 
> 赞同：2
> 
> 时间：2012-10-06T12:26:29.307
> 
> 标签：ios, xcode

我尝试使用 Xcode 4 for iPhone 制作一个简单的计算器。这是我的第一个 iOS 应用程序。

我使用了几个带有标题的按钮：1、2、...9、+、=、-... 但是当我在 iOS 模拟中运行程序时，一些按钮没有显示它们的标题（即它们没有写任何东西他们）。

没有标题的按钮有些随意：主要是屏幕底部的按钮，但也有顶部的按钮。其他按钮正常显示其标题。

我勒个去？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T17:41:12.993

在 iTunes U Piazza 课程中使用 iOS 计算器应用程序时，我也有同样的经历。我想它是从我移动一些按钮开始的。我用文本编辑检查了 MainStoryboard.storyboard 文件 - 这些按钮似乎缺少高度约束 - 不清楚如何/为什么

无论根本原因是什么，我只能通过删除有问题的按钮并在 xcode 编辑器中重新创建它们来修复它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-14T13:12:02.107

尝试简单地复制和粘贴 duff 控件 - 在将视图从推断更改为视网膜 3.5 后我遇到了这个问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-08T23:20:41.363

将文本类型从属性更改为纯文本对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-27T16:07:23.173

我想知道为什么会发生这种情况是有一些原因的。在我的情况下，问题是我将背景图像设置为按钮图像，因此文本右移出按钮的边界。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-30T14:04:47.680

这可以通过关闭情节提要上的“自动布局”来解决。更多信息在这里：[https ://stackoverflow.com/a/16556044/26510](https://stackoverflow.com/a/16556044/26510)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-13T19:07:07.383

根据 Apple 开发人员指南，您不应将按钮标题标签文本或颜色直接设置为属性（例如，**不**要这样做：myButton.titleLabel.text=@"SomeText" 或 myButton.titleLabel.textColor=[UIColor blackColor ]）。

相反，您可以使用 UIButton 设置器功能设置它们，如下所示：

```
 [myButton setTitleColor:[UIColor blackColor] forState:UIControlStateNormal]; 
```

...或者像这样：

```
 [myButton setTitle:@"SomeText" forState:UIControlStateNormal];. 
```

请参阅[Apple 指南](https://developer.apple.com/library/ios/documentation/uikit/reference/UIButton_Class/UIButton/UIButton.html "UIButton 文档")。

# python - 我如何返回正确的值？

> ID：12759799
> 
> 赞同：0
> 
> 时间：2012-10-06T12:26:36.787
> 
> 标签：python, loops, while-loop

```
def activate():

    if(ultrasonic.get_sample() < 10):
        both.turn(power=-70, tacho_units=400, brake=False)
        time.sleep(1)
        bx,by = get_ballxy()
        rx,ry,a = get_robotxya()
        turn_to(brick,bx,by,rx,ry,a)
        time.sleep(0.5)
        move_to(brick,bx,by,rx,ry)
        kickBall(brick,by)  
    else:
        time.sleep(1)
        bx,by = get_ballxy()
        rx,ry,a = get_robotxya()
        turn_to(brick,bx,by,rx,ry,a)
        time.sleep(0.5)
        move_to(brick,bx,by,rx,ry)
        kickBall(brick,by,ry)

Thread(target=update_coordinates).start()
connect()
update_coordinates()
while True:
    activate() 
```

以上是我的代码的一部分。`get_ballxy`并`get_robotxya`返回对应物体的坐标，`turn_to`and`move_to`方法显然使机器人转向物体并移动到它。值从服务器返回并作为后台进程存储在线程中。我的问题是如何确保我的机器人在循环运行时不会接受错误值或与以前相同的值？例如：

*   第一组值：
    *   转向球移动到球并踢球；
    *   等到球停止移动，然后只重新读取机器人的值，然后循环运行。

我该怎么做呢？我试着睡觉它`time.sleep(seconds)`有时会起作用，然后过了一会儿它就发疯了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:03:52.630

如果您希望它在球运动时不移动/转动/踢，请尝试添加以下内容：

```
def activate():
    global x1, y1
    if(ultrasonic.get_sample() < 10):
        both.turn(power=-70, tacho_units=400, brake=False)
    bx, by = get_ballxy()
    rx, ry, a = get_robotxya()

    if sqrt((x1-bx)*(x1-bx)+(y1-by)*(y1-by)) <= 4: #This is the distance parameter, change at will
        turn_to(brick, bx, by, rx, ry, a)
        move_to(brick, bx, by, rx, ry)
        kickBall(brick, by, ry)

    x1, y1 = bx, by

Thread(target=update_coordinates).start()
connect()
x1, y1 = 0, 0
update_coordinates()
while True:
    activate() 
```

# asp.net-mvc - ASP.NET MVC 4：如何在控制器操作中获取选定的下拉值？

> ID：12759803
> 
> 赞同：0
> 
> 时间：2012-10-06T12:26:53.400
> 
> 标签：asp.net-mvc, controller, action, dropdownbox

我的观点如下。我有两个提交按钮；一为`find new car`一为`find used car`。如何获取控制器中选定下拉列表的值？

以及如何找出用户按下了 2 个按钮中的哪一个？

```
@{
        ViewBag.Title = "Home Page";
    }
    @using (Html.BeginForm("Home", "home"))
    {

        <table>
            <tr>
                <td>
                    <h2>
                        Find New car</h2>
                    <table>
                        <tr>
                            <td>
                                <select id="ddlBrand" name="ddlbrand" style="width: 200px;">
                                    <option value="0">---Select Brand---</option>
                                    <option value="1">---b1---</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <select id="ddlModel" name="ddlModel" style="width: 200px;">
                                    <option value="0">---Select Model---</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <select id="ddlFuelType" name="ddlFuelType" style="width: 200px;">
                                    <option value="0">---Select Fuel Type---</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <select id="ddlBudget" name="ddlBudget" style="width: 200px;">
                                    <option value="0">---Select Your Budget---</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <input type="button" name="FindNewCar" value="GO"  />
                            </td>
                        </tr>
                    </table>
                </td>
                <td>
                    <h2>
                        Find used car</h2>
                    <table>
                        <tr>
                            <td>
                                <table>
                                    <tr>
                                        <td>
                                            <select id="ddlBrand1" name="ddlbrand" style="width: 200px;">
                                                <option value="0">---Select Brand---</option>
                                            </select>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <select id="ddlModel2" name="ddlModel" style="width: 200px;">
                                                <option value="0">---Select Model---</option>
                                            </select>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <select id="ddlFuelType2" name="ddlFuelType" style="width: 200px;">
                                                <option value="0">---Select Fuel Type---</option>
                                            </select>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <select id="ddlCity" name="ddlCity" style="width: 200px;">
                                                <option value="0">---Select City---</option>
                                            </select>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <input type="button" name="FindNewCar" value="GO" />
                                        </td>
                                    </tr>
                                </table>
                            </td>
                            <td>
                                <table>
                                    <tr>
                                        <td>
                                            <h4>
                                                Sell Car</h4>
                                            <br />
                                            Sell your car faster, at right price ...<a href="#"> Sell Car»</a>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                    </table>
                </td>
                <td>
                    aaaaaaaaaaa
                </td>
            </tr>
        </table>

    } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-06T14:17:55.773

您应该在控制器内部设置两个操作方法并使用 Html.ActionLink 方法来帮助创建表单。

例子：

```
public ActionResult FindNewCar(string ddlbrand, string ddlModel, string ddlFuelType, string ddlBudget)
{
     // Do something here.
}

public ActionResult FindUsedCar(string ddlbrand2, string ddlModel2, string ddlFuelType2, ddlCity)
{
     // Do something here.
} 
```

看法

```
@using (Html.BeginForm("Home", "home"))
{
     @Html.ActionLink(...)
} 
```

# 编辑

请参阅上面的更改

# android - 使用子域会在 android 中出现错误

> ID：12759809
> 
> 赞同：0
> 
> 时间：2012-10-06T12:27:32.290
> 
> 标签：android, json, android-internet

我无法访问`JSON`位于[此](http://umsjitm.cutm.org/GreycellsRestAPI/1/loadStudCompList?callback=listStudCompList&currentWingOid=3)网站上的我的 in android 文件。我收到一条错误消息`java.net.UnknownHostException: umsjitm.cutm.org`。这是我的代码：

```
HttpClient client = new DefaultHttpClient();
URI website = new URI("http://umsjitm.cutm.org/GreycellsRestAPI /1/loadStudCompList?callback=listStudCompList&currentWingOid=3");
HttpGet request = new HttpGet();
request.setURI(website);
HttpResponse response = client.execute(request); 
```

我的代码有什么问题？

如果我使用`http://117.240.237.10/GreycellsRestAPI/1/loadStudCompList?callback=listStudCompList&currentWingOid=1`链接，它工作得很好。请告诉我我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T12:34:47.673

问题似乎与Android无关。ping`umsjitm.cutm.org`解析为`117.240.237.7`

单击该链接会给我一个 404。

另外，我在[DNS 记录](http://who.is/dns/cutm.org)`CNAME`中没有看到`117.240.237.10``umsjitm.cutm.org`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T12:35:32.213

我认为这与 DNS 问题更相关...检查您的 DNS 设置。您确定您可以通过电话访问该地址及其名称吗？

# cuda - CUDA。显示性能如何取决于线程数的示例

> ID：12759811
> 
> 赞同：1
> 
> 时间：2012-10-06T12:27:37.657
> 
> 标签：cuda

我假设，可以并行运行的线程/块的数量是有限的。我的意思是，如果我有太多线程/块，其中一些将在某些处理单元上按顺序执行。我需要构建下一个示例。比方说，我有一些`kernel<<<B, N>>>()`. 的执行时间`kernel<<<1,1>>>()`等于 t0。

第一个任务是找到 B 和 N 的最大值，即执行时间`kernel<<<B, N>>>()`t ~ t0。然后我想要`kernel<<<B, 2*N>>>()`（或`kernel<<<2*B, N>>>()`）t1 ~ 2*t 的执行时间。

我有带有 448 个 CUDA 内核（14 个 SM）的 Tesla C2075，并希望建立一个占用率为 1 的示例。

这是否可能，如果是，内核函数应该是什么样子，可能是一些例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T03:30:45.430

在 CUDA 中，线程被安排在单个 SM 上作为 warp。每个warp最多可以包含32个线程。调度程序将尝试在SM内部以并行方式执行warp。如果特定warp的数据尚未准备好，它由调度程序持有直到可用。现在您的问题很重要，我相信可以使用`cudaEvent_t`（用于测量内核的执行时间）来做您想要实现的目标。

启动配置`kernel<<<B,Tnum>>>(arg1...argn);`完全取决于您可以在算法中利用多少并行度。此外，线程数是您必须根据启动内核获得的最佳执行时间来决定的。

在许多情况下，使用线程启动多个块`128/256`就足以实现最佳加速。举个例子，假设我们想将两个大小数组的单个元素添加`1024`到第三个数组中，具有 1 个块的内核函数看起来像

```
__global__ void kadd(int *c,int *a,int *b)
{
  unsigned int tid = threadIdx.x;//Since only one block of 1024 threads suffices
  if(tid < MAXNUM)  //MAXNUM = 1024
    c[tid] = a[tid]+ b[tid];
} 
```

启动配置将是

```
kadd<<<1,1024>>>(c,a,b); 
```

然而，这只会在你的 GPU 的一个 SM 上执行一个块，这意味着你没有充分利用 GPU 资源。为了从你的 GPU 中获得更多，你可以做的是你可以使用多个块和线程。内核看起来像

```
__global__ void kadd(int *c,int *a,int *b)
{
  unsigned int tid = blockIDx.x * blockDim.x + threadIdx.x;//Since multiple blocks are used
  if(tid < MAXNUM)  //MAXNUM = 1024
    c[tid] = a[tid]+ b[tid];
} 
```

并且相应的启动配置将是

```
kadd<<<8,128>>>(c,a,b); 
```

这将启动每个线程`8`块。`128`您可以根据您的算法要求使用此启动配置。`2D`您可以通过启动或`3D`网格进一步探索这些启动配置，以充分利用您的 GPU。

因此，对内核进行计时将为您提供最适合您要求的配置。这也将根据共享内存的使用、全局内存的合并访问和其他因素而改变。最后，我想提一下，NVIDIA 提供了一个占用率计算器，您可以使用它来找到块和线程的最佳组合，以实现更高的占用率。

# web-services - SOA - 签名授权服务 - 如何让 web 界面访问用户数据

> ID：12759813
> 
> 赞同：1
> 
> 时间：2012-10-06T12:27:59.063
> 
> 标签：web-services, security, soa, http-authentication

我设计了一个 REST 授权服务，它的工作方式与[Amazon S3 REST 身份验证](http://docs.amazonwebservices.com/AmazonS3/latest/dev/RESTAuthentication.html)非常相似，并且它足够安全，可以在 HTTP 上工作（不需要让所有互通在 SSL 上运行的开销）。

它足够安全，因为签名在每次请求时都会更改并且会过期。所以它对 MITM（不能编辑任何东西，否则端点将无法重新生成相同的签名）和重放攻击（因为时间戳的使用）是安全的。

这对所有客户端都有好处，因为知道私钥，现在可以对自己的数据执行请求的操作，生成包含请求数据的唯一签名。

授权服务不生成任何令牌（因此它不会受到 MITM 攻击）并且仅在内部调用，这意味着客户端直接向正确的端点执行请求以执行某些操作，而不是请求令牌以提供该服务......然后接收该请求的端点向授权服务询问“嘿，这个请求合法吗？” 如果是，则授权服务返回“200 OK”并执行请求的操作，否则返回“401 Unauthorized”。

我现在需要的是允许一个特殊的客户端，一个 Web 用户界面，让用户使用电子邮件/密码登录，并使用 WebUI 本身来获取/编辑他们的数据。webUI 将在 HTTPS 上运行。请考虑创建一个新帐户总是会生成用户/密码登录和 pubkey/privatekey，但实际上我们只使用 pubkey/privatekey。用户和密码存储在仅由 WebUI 使用的数据库中，而 pubkey/privatekey 存储在授权服务（使用另一个数据库）中。

当然，要处理客户数据，我需要一些方法来使 webUI 充当为登录用户编写的客户端（具有 pubkey/privatekey 关联对来生成签名）。我不确定什么是最安全的方法，所以我将解释几个我坚持的解决方案。

我认为的第一个解决方案是为 Web 界面提供自己的 pubkey/privatekey，使其成为真正的客户端，然后编辑授权服务以识别它并允许它使用像“X-Forwarded-For”这样的标头）并始终信任 WebUI 权限。但我害怕不知何故我错过了一些可能导致攻击利用此权限获取您未授权的数据的东西。

第二种解决方案是，一旦成功登录，将 pubkey/privatekey 从授权服务传输到 WebUI，然后将其存储在会话中，每次执行操作时，它都会使用该数据生成有效签名。但我真的不喜欢通过网络传递这些数据（也因为这种通信至少应该通过 SSL 以避免被嗅探到私钥），而且我真的不喜欢将私钥存储在会话后端中.

我坚持的最后一个解决方案是重新考虑授权服务，并允许通过用户和密码进行身份验证（这将不再存储在 webUI 中，而是与授权服务中的 pubkey/privatekey 一起存储）。这总是需要 SSL 连接，因为 webui 必须传送电子邮件和密码，但如果正确登录，它只能将这些数据存储在创建的会话中。另一个副作用是其他服务可以实现为使用 user/pwd 而不是使用签名方法，通过 HTTP 意味着向世界公开数据。

我想要最强大、更合乎逻辑的解决方案，使 webUI 充当客户端，因为整个架构被认为是在客户端-服务器的基础上工作的。我也可以接受此处未列出的其他建议。

请告诉我您是否需要了解更多信息来帮助我。

谢谢（如果您已阅读整篇文章：-P）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T12:48:40.417

**HTTPS**

首先，我认为您误解了所有 HTTPS 的东西。使用 HTTPS，您可以提供客户端证书，但在最常见的情况下，仅使用服务器证书。因此，在这种常见情况下，HTTPS 不提供对用户进行身份验证的方式，只提供服务器本身。它还提供消息加密。

如果您使用 HTTP，即使您可以防止真正的 MITM 攻击，任何 MITM 都会看到您的所有消息。如果他们不被保密（一些私人数据等）也许没关系

另一件事是验证服务器本身。据我从您指定的数据中可以看出（可能其中一些丢失或我误解了），所有请求都已签名，但响应未签名（或者它们是）。在这种情况下，您很容易受到 MITM 攻击，因为攻击者可以伪装成您的身份验证服务器。

我建议同时使用 HTTPS 对服务器进行身份验证，并对消息和签名进行编码以对客户端进行身份验证。还要记住，为了防止 MITM 攻击，您还必须使用根 CA 证书检查服务器证书。

**私钥**

我不太明白您如何向您的客户启动私钥。好吧，从技术上讲-是的，但是私钥是私有的。如果您生成它们，它们不再是私有的。在这种情况下，您可以只生成一些共享密钥并使用一些更简单的算法来签署请求。至少在我看来，当您知道两个密钥都不比共享密钥更安全时，使用 PPK。

另一种方法是允许客户端在生成公钥后将公钥上传到您的服务器。

**密码**

在我看来，授权服务器应该对授权做出所有决定。因此，我会将密码和公钥（或共享机密）存储在授权服务器中，而不是 UI 部分。

**结论**

你的情况让我想起了[OAuth2 协议](https://www.rfc-editor.org/rfc/rfc6749)。有资源所有者、客户端、授权服务器和资源服务器。资源所有者以某种方式授予对客户端的访问权限，客户端从提供该授权的授权服务器获取访问令牌。然后它使用它来访问资源服务器。

您的系统中可以使用两种授权类型：资源所有者密码凭据授权和客户端凭据授权。

*   您的资源所有者本身就是客户。
*   UI 也是一个客户端。
*   UI 通过提供客户端的密码凭据来获取访问令牌，然后对资源服务器进行一些调用。
*   客户端仅通过使用共享密钥或公钥对自己进行身份验证来获取访问令牌。

当然，如果协议不完全适合您的情况，您可以从协议中获取一些想法。

至于签署请求，有[MAC访问认证](https://datatracker.ietf.org/doc/html/draft-hammer-oauth-v2-mac-token-05)，可以在同一个OAuth2中使用。

所以，我建议将密码存储在授权服务器中，UI 只会传递它们来修改一些资源。不要为客户端生成私钥 - 使用共享密钥或让他们上传公钥。使用 HTTPS 对远程服务器进行身份验证。

# loops - 如何在 Cfscript 中循环 Coldfusion cfquery？

> ID：12759815
> 
> 赞同：2
> 
> 时间：2012-10-06T12:28:33.970
> 
> 标签：loops, coldfusion

我正在尝试在`cfscript`. 我想我有它，但它的查询循环到无穷大。

有人可以告诉我以下有什么问题：

```
<cfscript>
    // loop single msg
    variables.allRows = current_message.recordcount;
    for ( variables.intRow = 1 ; variables.allRows LTE variables.intRow ; variables.intRow = variables.intRow + 1 ){
        variables.msg_id_viewed = current_message[ "com_msg_id" ][ variables.intRow ];
        variables.msg_app_alias = current_message[ "com_app_alias" ][variables.intRow];
        variables.msg_img_ext = current_message[ "com_img" ][ variables.intRow ];
        }
</cfscript> 
```

该查询`current_message`返回一条记录，因此它应该只循环一次。

感谢帮助！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-06T12:46:45.273

You have your condition around the wrong way.

It should be:

```
variables.intRow LTE variables.allRows 
```

I suspect `current_message` actually has multiple rows. Did you *actually check*, or did you simply run on the assumption that that's what you're expecting? Because it looks to me like `variables.allRows LTE variables.intRow` is evaluating to `false`, which suggests `variables.allRows` is greater than one when you first start.

In regards to this:

> The query current_message returns a single record, so this should loop once only.

If there's only one row - and you *know* this to be the case - why are you looping?

That said, what version of ColdFusion are you on? In CF10 one can loop over a recordset with the for/in construct, thus:

```
for (row in recordset){
    // row is a struct keyed on each column name, the values being the value for that column/row
} 
```

# android - 更改 file.encoding 以显示变音符号

> ID：12759817
> 
> 赞同：1
> 
> 时间：2012-10-06T12:28:51.100
> 
> 标签：android

我正在使用以下代码显示来自文本文件的 about 文本。但我无法正确显示德语变音符号ä、ü、ö。如何更改或设置编码？安德罗斯 说：

> public InputStreamReader (InputStream in) 自：API Level 1
> 
> 在 InputStream 中构造一个新的 InputStreamReader。此构造函数将字符转换器设置为“file.encoding”属性中指定的编码，如果该属性不存在，则回退到 ISO 8859_1 (ISO-Latin-1)。

```
public void onCreate(Bundle savedInstanceState) {
    setContentView(R.layout.help); 
    TextView tv = (TextView)findViewById(R.id.help_text);
    //tv.setText(readRawTextFile(R.raw.help));
    tv.setText(Html.fromHtml(readRawTextFile(R.raw.help)));
}

public static String readRawTextFile(int id) {
    InputStream inputStream = mContext.getResources().openRawResource(id);
    InputStreamReader in = new InputStreamReader(inputStream);
    BufferedReader buf = new BufferedReader(in);
    String line;
    StringBuilder text = new StringBuilder();
    try {
        while (( line = buf.readLine()) != null) 
            text.append(line);
        //text.append("<br>" );
    } catch (IOException e) {
        return null;
    }
    return text.toString();
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T14:32:00.040

您可以尝试在 InputStreamReader 创建期间指定文本文件中使用的字符集：

```
InputStreamReader in = new InputStreamReader(inputStream, charset); 
```

您可以在以下位置找到可用的字符集：[字符集](http://developer.android.com/reference/java/nio/charset/Charset.html)

祝你好运。

# c#-4.0 - 可以更改chang启动优先级吗？

> ID：12759820
> 
> 赞同：-1
> 
> 时间：2012-10-06T12:29:14.370
> 
> 标签：c#-4.0

我有一个 Windows 应用程序并将其注册到 Windows 注册表中，以便在 Windows 启动时自动启动。

它需要获取一些信息才能开始工作并从互联网上获取主题。

它工作正常，但如果它在网络接口初始化之前开始工作这种情况会出现问题，因为无法检索开始工作所需的信息。

我想知道是否有任何方法可以更改 Windows 启动优先级，以使程序或其他程序（如 Internet 连接）可以正常工作并通过它进行初始化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T12:40:04.887

检查网络连接是否可用可能更容易，如果没有，请等到它启动程序的网络相关部分之前。

检查网络连接是否可用：[System.Net.NetworkInformation.NetworkInterface.GetIsNetworkAvailable()](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.networkinterface.getisnetworkavailable.aspx)

当网络连接可用时收到通知：[System.Net.NetworkInformation.NetworkChange.NetworkAvailabilityChanged](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.networkchange.networkavailabilitychanged.aspx)

# osx-lion - monocov 没有在（OS X 10.7.4）上生成输出

> ID：12759821
> 
> 赞同：4
> 
> 时间：2012-10-06T12:29:40.310
> 
> 标签：osx-lion, monodevelop, code-coverage, nunit-console

我正在尝试使用 monocov 来计算单元测试覆盖率并遇到问题，谷歌已经筋疲力尽，但似乎没有相关答案可用。

我按照这个[问题]中显示的提示成功下载并构建了monocov：[Can't get monocov to compile (Mac OS x 10.7.4)](https://stackoverflow.com/questions/11248487)

曾尝试将 monocov 与 nunit-console2 一起使用，如[http://www.mono-project.com/Code_Coverage所示](http://www.mono-project.com/Code_Coverage)

这是我的命令：

```
$ MONO_OPTIONS="--profile=monocov:+/Users/myaccount/MyProject/MonoForm/MonoForm.Common.Generic/bin/Release" nunit-console2 /Users/myaccount/MyProject/MonoForm/MonoForm.Common.UnitTests/bin/Release/MonoForm.Common.UnitTests.dll 
```

我得到的输出为：

```
NUnit version 2.4.8
Copyright(C) 2002-2007 Charlie Poole.
Copyright(C) 2002-2004 James W. Newkirk, Michael C.Two, Alexei A. Vorontsov.
Copyright(C) 2000-2002 Philip Craig.
All Rights Reserved.

Runtime Environment -
   OS Version: Unix 11.4.0.0
  CLR Version: 2.0.50727.1433 ( 2.10.9(tarball Mon May 7 20:25:51 EDT 2012) )

......
Tests run: 6, Failures: 0, Not run: 0, Time: 0.052 seconds.

$ 
```

我得到一个 TestResult.xml 是 nunit-console2 的通用输出文件，并且没有任何错误消息，也没有由于 monocov 生成的 .cov 文件。当前卡住并且不知道出了什么问题。

不确定任何关于 monocov 的专家都可以在这里阐明一些观点。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-15T22:30:00.450

好吧，Xamarin 似乎已经删除了“内部”cov 分析器，并且 monocov 不会产生任何输出（除了 mono 实际加载共享库，没有调用任何函数），因为 api 已更改。

他们在核心日志分析器中添加了代码覆盖率过滤器（2015 年 4 月 7 日），而我找不到任何已发布的文档（？）。启用它很容易。

```
--profile=log:coverage

coverage             enable collection of code coverage data
covfilter=ASSEMBLY   add an assembly to the code coverage filters
                     add a + to include the assembly or a - to exclude it
                     filter=-mscorlib
covfilter-file=FILE  use FILE to generate the list of assemblies to be filtered 
```

关于 cov 删除和日志覆盖过滤器添加的 Git 日志信息：

```
commit 16570265149730ec6a4760cc0fa34decc1a9d981
Author: Alex Rønne Petersen <alexrp@xamarin.com>
Date:   Tue Apr 7 14:51:27 2015 +0200
        [profiler] Remove old mono-cov profiler.
        We're replacing this with coverage support in the log profiler.

commit e91693fbb87f687a2fdb5a495c945c1872b3066c
Author: iain holmes <iain@xamarin.com>
Date:   Fri Feb 27 10:13:54 2015 +0000
        [cov] Install a coverage filter 
```

# azure - 从 azure 表中检索单个实体

> ID：12759830
> 
> 赞同：0
> 
> 时间：2012-10-06T12:30:22.323
> 
> 标签：azure, azure-storage, azure-table-storage

我正在尝试使用 Patitionkey 和 Rowkey 从天蓝色表中获取单个实体。我在这里面临的问题是，当没有实体具有匹配的 Partitionkey 或 Rowkey 时，它不会返回 null。

```
MyRecordsTable specificEntity =
            (from e in serviceContext.CreateQuery<MyRecordsTable >("MyRecordsTable ")
             where e.PartitionKey == pkey && e.RowKey == rkey
             select e).FirstOrDefault(); 
```

我参考了以下链接，它说如果没有匹配，则应返回 null。但我得到一个异常（`An error occurred while processing this request.`）内部异常是`No resource found.`

[http://www.windowsazure.com/en-us/develop/net/how-to-guides/table-services/#header-11](http://www.windowsazure.com/en-us/develop/net/how-to-guides/table-services/#header-11)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T13:45:53.203

这是任何 REST 驱动的数据源的默认行为。如果未找到，则返回 HTTP 404 错误。如果您想改为获取 NULL，则必须使用[IgnoreResourceNotFoundException](http://msdn.microsoft.com/en-us/library/system.data.services.client.dataservicecontext.ignoreresourcenotfoundexception.aspx)属性并将其设置为 true。

# actionscript-3 - 带有信号的机器人腿：警告：注射器已经有类型规则

> ID：12759831
> 
> 赞同：1
> 
> 时间：2012-10-06T12:30:34.847
> 
> 标签：actionscript-3, signals, robotlegs

在使用 Robotlegs/Signals 时，我会出现一堆这样的警告消息。每次执行此命令类时，即每 2-3 秒 ..此消息显示在下方

*如果您有意覆盖了此映射，则可以在替换映射之前使用“injector.unmap()”以避免看到此消息。警告：Injector 已经有一个“mx.messaging.messages::IMessage”类型的规则，命名为“”。*

该命令功能正常，但我认为无论如何我做错了什么。

```
 public class MessageReceivedCommand extends SignalCommand
    {

        [Inject]
        public var message:IMessage;

            ...etc.. do something with message..
    } 
```

应用程序上下文不会将 IMessage 映射到此命令，因为我只看到 mapSignalClass 的一个选项，除了有效负载接收良好。

想知道是否有人知道我如何修复或抑制此消息。我试过把它称为警告建议

```
injector.unmap(IMessage, "") 
```

但我收到一个错误 - 找不到名为“”的 ::IMessage 的映射。

谢谢

**编辑**：有关错误的更多信息

这是我发送给命令的信号

```
public class GameMessageSignal extends Signal
{   
    public function GameMessageSignal()
    {
        super(IMessage);
    }
} 
```

从 IPushDataService 类调度

```
 gameMessage.dispatch(message.message); 
```

并且实现在应用程序上下文中通过

```
injector.mapClass(IPushDataService, PushDataService); 
```

随着信号

```
signalCommandMap.mapSignalClass(GameMessageSignal, MessageReceivedCommand); 
```

编辑#2：可能还需要指出我将 GameMessageSignal 的一个实例注入 IPushDataService

```
public class PushDataService extends BaseDataService implements IPushDataService
{
   [Inject]
   public var gameMessage:GameMessageSignal;

   //then

   private function processMessage(message:MessageEvent):void
   {
          gameMessage.dispatch(message.message);
   }
} 
```

编辑：3

我在 SignalContext 中设置的映射：

```
injector.mapSingleton(IPushDataService);

injector.mapClass(IPushDataService, PushDataService); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T09:01:47.190

好的，我仔细研究了 Signals 扩展，我相信这实际上是一个错误。[一年前已经在github上提交了一个相关问题](https://github.com/joelhooks/signals-extensions-CommandSignal/issues/25)，但尚未修复。该警告与信号映射到命令的方式有关：

（来自`SignalCommandMap`）

```
protected function routeSignalToCommand(signal:ISignal, valueObjects:Array, commandClass:Class, oneshot:Boolean):void
{
    mapSignalValues( signal.valueClasses, valueObjects );
    createCommandInstance( commandClass ).execute();
    unmapSignalValues( signal.valueClasses, valueObjects );
    (...) 
```

映射仅在调用 之前分配`mySignalCommand.execute()`，并在之后立即删除。这就是你不能手动的原因`unmap()`。

这里的问题是由于信号链造成的，即*在执行命令期间*再次触发相同的信号，因此映射发生两次 - “嵌套”信号，可以这么说：

```
Signal.dispatch
    => mapValues 
    => execute() 
        => Signal.dispatch 
            => mapValues 
            => execute() 
            => unmapValues()
    => unmapValues() 
```

[我在 RobotLegs2 框架中遇到了类似的事件映射问题](https://github.com/robotlegs/robotlegs-framework/issues/83)，并提交了一个错误修复。因此，我确信一旦使用 RL2，这将不再困扰任何人，但在此之前，您可能只想对 Signals 扩展应用等效补丁并将其用作解决方法。

它应该很简单：只需将命令的实例化和执行解耦。在上述`routeSignalToCommand()`方法中`SignalCommandMap`，替换为：

```
mapSignalValues( signal.valueClasses, valueObjects );
createCommandInstance( commandClass ).execute();
unmapSignalValues( signal.valueClasses, valueObjects ); 
```

有了这个：

```
mapSignalValues( signal.valueClasses, valueObjects );
var command:* = createCommandInstance( commandClass );
unmapSignalValues( signal.valueClasses, valueObjects );
command.execute(); 
```

现在，由于我既没有使用 RL1 也没有使用 Signals，所以我无法自己测试它 - 如果您有任何问题，请尝试并发表评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T04:11:55.177

这些映射问题在 RL2 的 SignalCommandMap 扩展中得到修复。你可以在这里找到它： [https](https://github.com/pixels4nickels/robotlegs-extensions-SignalCommandMap) ://github.com/pixels4nickels/robotlegs-extensions-SignalCommandMap 我试图解决问题并及时更新。（链接多个命令也可以）

# c# - C# 中的正则表达式

> ID：12759832
> 
> 赞同：-7
> 
> 时间：2012-10-06T12:30:36.677
> 
> 标签：c#, regex

我需要一个 C# 中的正则表达式，它可以删除字符串中出现的任意数量的双引号，它是一个 csv 文件，在从 StreamReader 读取后，我想替换字符串中的所有双引号。第一行是标题，第二行是数据。例如：

```
"E-mail","First Name","Last Name","Company"
"san@test.com","sanjay","sen","this is my "test" company" 
```

所以理想的正则表达式应该给出以下输出：

```
"E-mail","First Name","Last Name","Company"
"san@test.com","sanjay","sen","this is my test company " 
```

所以从列中删除双引号`"this is my "test" company"`并生成`"this is my test company"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T12:58:16.523

您应该尝试修复不正确转义字符串的来源，而不是使用正则表达式。如果您不能这样做并且迫切希望完成某件事，那么一种快速而肮脏的方法是删除不以逗号或字符串开头/结尾为界的引号：

```
resultString = Regex.Replace(subjectString, "(?<!,|^)\"(?!,|$)", ""); 
```

这假设您一次处理一个 CSV 行。如果您将整个文件放在一个字符串中，则将其`RegexOptions.Multiline`用作第三个参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T13:16:13.390

由于逗号周围应该有一些**空格字符**，所以你应该使用

```
output = Regex.Replace(input, "(?<!,\s*)\"(?!\s*,)", ""); 
```

* * *

CSV 标准允许在内部使用**双双**引号，例如`"this is a ""legal"" format"`.

要删除此类引号，您应该使用

```
output = Regex.Replace(input, "(?<!,\s*)\"{2}(?!\s*,)", ""); 
```

# algorithm - 哪些元启发式算法适合构建扫雷求解器？

> ID：12759835
> 
> 赞同：0
> 
> 时间：2012-10-06T12:30:56.130
> 
> 标签：algorithm, np-complete, minesweeper

我必须建立一个扫雷求解器，但真的不知道从哪里开始。问题是，我必须使用一些元启发式算法，比如蚁群优化、模拟退火、遗传编程等。我在网上找到了一些相关的资料，但我不确定哪些有用，哪些没用，因为没有什么是“完美契合”的。看来我必须自己调整一些元启发式算法，而不是遵循以前做过的人写的一些文章。这就是为什么我想在开始之前了解所有我需要知道的事情。

1.  如何制定我的问题以使其适合使用元启发式来解决它？我知道这基本上是一个 CSP（约束满足问题），但不知道如何利用这些知识找到合适的算法来解决它。
2.  哪种元启发式方法适合解决我的问题（以及为什么）？
3.  我应该注意哪些特定于我的问题的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T14:01:38.350

“蚁群优化、模拟退火、基因编程”......大词，但我不知道你会如何使用它们中的任何一个！

我建议有两个求解器：

1.  完美解决者：有一个完美的答案，毫无疑问并解决它。
2.  不完美的求解器：有疑问并且您想找到危害最小的解决方案。

先应用完美求解器，如果失败，再应用不完美求解器。

完美的求解器需要找到所有的组合可能性并检查它们中的哪些有效。实际上这并不难，因为您一次会考虑 1-5 个图块（作为人类求解器，我通常限制自己使用那么多图块），最多只有 32 个易于检查的组合。

对于不完美的求解器，您可以考虑所有组合，找出有效组合，使用有效组合计算不同位置的地雷概率，并选择最小地雷概率的一个。

想想看，这两种方法是一样的！在完美求解器中，您将选择具有 0 地雷概率的图块。所以，总结一下：

1.  选择 1-10 个相邻或最多有一个间隙连接的未标记图块，并且每个图块都连接到至少一个已显示的非地雷位置。
2.  找出所有有效的组合
3.  如果我在任何位置的概率为 0，请立即选择该选项。
4.  或者，以最小的地雷概率跟踪位置。
5.  转到步骤 1

第 1 步并不像听起来那么糟糕，因为只有少数组合同时满足这两个条件（与已解决的非矿山位置相邻和相邻）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T07:28:51.227

Metaheuristics 可能不是 Minesweeper 的最佳算法 - 至少不是简单的部分。

相反，一个简单的推理规则引擎可能已经标记了许多炸弹并揭示了空闲点。使用该信息标记炸弹后，需要进行推理以进一步推理。如需灵感，请参阅 drools 的[conway 的生活游戏](http://docs.jboss.org/drools/release/5.5.0.Beta1/drools-expert-docs/html_single/index.html#d0e11249)示例。

# php - PHP : Create PNG from multiple files and resize

> ID：12759841
> 
> 赞同：-3
> 
> 时间：2012-10-06T12:31:47.923
> 
> 标签：php, image, resize, png, gd

> **Possible Duplicate:**
> [How do I resize pngs with transparency in PHP?](https://stackoverflow.com/questions/279236/how-do-i-resize-pngs-with-transparency-in-php)

I have a script which creates a PNG by combining multiple files:

```
$img_width = 950;
$img_height = 950;
$final_img = imagecreatetruecolor($img_width, $img_height);
imagesavealpha($final_img, true);
$trans_colour = imagecolorallocatealpha($final_img, 0, 0, 0, 127);
imagefill($final_img, 0, 0, $trans_colour);

foreach ($images_array as $image) {
    $image_layer = imagecreatefrompng($image);
    imagecopy($final_img, $image_layer, 0, 0, 0, 0, $img_width, $img_height);
}

imagesavealpha($final_img, true);
imagealphablending($final_img, true);

header('Content-Type: image/png');
imagepng($final_img); 
```

All the images I'm combining at 950px square. How can I make it so the returned image is say 200 x 200 ?

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T12:40:31.897

使用 imagecopyresampled 函数：[http](http://www.php.net/manual/en/function.imagecopyresampled.php) ://www.php.net/manual/en/function.imagecopyresampled.php 。具体看第二个例子。

# ruby-on-rails - Rails - syntax for copying a record in attribute from one table to another table on form submission

> ID：12759842
> 
> 赞同：0
> 
> 时间：2012-10-06T12:31:48.827
> 
> 标签：ruby-on-rails, activerecord, attributes

I'm a newbie so apologies if this is basic but it's been driving me crazy. I have two Rails models called user.rb and question.rb. A user can ask multiple questions and a question can only belong to one user. For authentication, I am using Omniauth-Facebook. Here are the models:

user.rb

```
# == Schema Information
#
# Table name: users
#
#  id               :integer          not null, primary key
#  provider         :string(255)
#  uid              :string(255)
#  name             :string(255)
#  oauth_token      :string(255)
#  oauth_expires_at :datetime
#  created_at       :datetime         not null
#  updated_at       :datetime         not null
#  email            :string(255)
#  fbprofileimage   :text
#
class User < ActiveRecord::Base
    attr_accessible :provider, :uid, :email, :fbprofileimage, :name
    has_many :questions, :dependent => :destroy

    def self.from_omniauth(auth)
    where(auth.slice(:provider, :uid)).first_or_initialize.tap do |user|
        user.provider = auth.provider
        user.uid = auth.uid
        user.name = auth.info.name
            user.email = auth.info.email
            user.fbprofileimage = auth.info.image
        user.oauth_token = auth.credentials.token
        user.oauth_expires_at = Time.at(auth.credentials.expires_at)
        user.save!
        end
    end
end 
```

question.rb

```
# == Schema Information
#
# Table name: questions
#
#  id          :integer          not null, primary key
#  headline    :string(255)
#  description :text
#  user_id     :integer
#  budget      :decimal(, )
#  star        :binary
#  old_star    :binary
#  created_at  :datetime         not null
#  updated_at  :datetime         not null
#

class Question < ActiveRecord::Base
  attr_accessible :budget, :description, :headline, :star, :old_star, :user_id,            :updated_at, :created_at
  belongs_to :user
  validates :headline, :description, :presence => true
end 
```

I have a form where a user can create a question. What I would like to do is, on submitting the form, associate question with user who created it by assigning user_id attribute.

I have an object in my application controller for defining the current_user (I use omniauth):

```
class ApplicationController < ActionController::Base
protect_from_forgery

after_save :update

private

def current_user
    @current_user ||= User.find(session[:user_id]) if session[:user_id]
end
helper_method :current_user 
```

What's the best way to do this?

My environment: Rails 3.2.8, Ruby 1.9.3-p195, using omniauth-facebook but not Devise.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T13:09:52.927

这是您的应用程序控制器中的一个方法，有望检索当前用户：

```
def current_user
    @current_user ||= User.find(session[:user_id]) if session[:user_id]
end 
```

因此，您可以在 QuestionsController 的 new 或 create 方法中使用它来设置用户，如下所示：

```
@question.user = current_user 
```

这应该够了吧。您还可以使用 before_save 回调。

# jsf - Request scope bean and lifecycle lazy loading

> ID：12759847
> 
> 赞同：1
> 
> 时间：2012-10-06T12:33:31.180
> 
> 标签：jsf, request, lazy-loading, managed-bean

I have a request scope bean with a method to retrieve some data for displaying purposes.
The method has **multiple parameters** so that it can get called on different occasions, also in the same view.

JSF:

```
<ui:repeat value="#{bean.data('foo')}"/>
<ui:repeat value="#{bean.data('bar')}"/> 
```

Bean:

```
public Object[] doSomething(Object arg)
{
    Object[] data = //hit database or remote server to retrieve data;
    return data;
} 
```

This works fine of cause, but the method is **invoked multiple times** for each `#{bean.data(obj)}` because of the jsf lifecycle phases.

I only want to hit the database once for each usage of `#{bean.data(obj)}`.

I tried lazy loading using following code which is not working: Now no data is displayed on my jsf page.

```
private Object[] data;

public Object[] doSomething(Object arg)
{
    if (this.data == null)
        this.data = //hit database or remote server to retrieve data;
    return this.data;
} 
```

Is viewscope a to wide scope since the method is called multiple times on a view using different parameters?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T00:41:58.117

把它放在一个`Map`.

```
private Map<Object, Object[]> datas = new HashMap<Object, Object[]>();

public Object[] getData(Object arg) {
    Object[] data = datas.get(arg);

    if (data == null) {
        data = //hit database or remote server to retrieve data;
        datas.put(arg, data);
    }

    return data;
} 
```

# c# - 以数据表为输入参 数的 Oracle 过程示例

> ID：12759850
> 
> 赞同：0
> 
> 时间：2012-10-06T12:34:18.920
> 
> 标签：c#, asp.net, database, oracle, stored-procedures

任何人都知道如何编写 oracle 存储过程数据表作为输入参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T12:39:21.557

将参数作为 传递`varchar2`，然后构建您的查询字符串并使用`EXECUTE IMMEDIATE`或作为游标执行它。更多示例[在这里](http://docs.oracle.com/cd/B10500_01/appdev.920/a96590/adg09dyn.htm)

更新。例子：

```
create table temp11(id int not null);
/
create or replace
procedure test_proc(table_name varchar2)
as
  query_str varchar2(200);
  begin
  query_str := 'INSERT INTO '||table_name||'(id) values (2)';
  EXECUTE IMMEDIATE query_str ;

end;
/
exec test_proc('temp11');
commit; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T13:11:24.013

在这些情况下，使用数据库临时表是很常见的。这意味着您将数据表记录插入表中并在不关闭连接的情况下调用您的过程，以便它看到临时数据并对其进行处理。

伪代码是这样的：

```
//Get the data you want to process
DataTable data = GetData();

//Create new Connection
Connection conn = Connection.CreateNew();

//Open the connection
conn.Open()

//Insert the data on a temporary table using the open connection
InsertDataIntoTemporaryTable(conn, data);

//Call the procedure to process the data using the same open connection
CallProcedureToProcessData(conn);

//Finish by ending the connection (everything done in the procedure will be commited)
conn.Close(); 
```

另一个可实施的选项是使用 CLOB 参数构建过程，其中应用程序将传递与字段和行分隔符连接的所有数据表记录。该过程必须以两种方式将其拆分并形成更好的结构，例如由 varchar2 表形成的记录表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T13:48:05.457

下面是一个将一行从复制到的`EMPLOYEES`示例`EMPLOYEES_COPY`。我希望它会帮助你。

```
DROP TABLE EMPLOYEES;
/
DROP TABLE EMPLOYEES_COPY; 
/
CREATE TABLE EMPLOYEES
(
  ID INT,
  FIRST_NAME varchar(30),
  LAST_NAME varchar(30)
);

insert into EMPLOYEES values(1,'AA','BBB');
insert into EMPLOYEES values(2,'CC','GGG');
insert into EMPLOYEES values(3,'EEE','MMM');
insert into EMPLOYEES values(4,'FFF','ZZZ');
/
CREATE TABLE EMPLOYEES_COPY 
(
  ID INT,
  FIRST_NAME varchar(30),
  LAST_NAME varchar(30)
);
/
CREATE OR REPLACE PACKAGE EMPLOYEE as 
type t_cursor is ref cursor;
procedure GETALL(curEMPLOYEE out t_cursor);
procedure INSERT_COPY;
end EMPLOYEE;
/
CREATE OR REPLACE PACKAGE BODY EMPLOYEE as
  ---------------------------------------------
 procedure GETALL(curEMPLOYEE out t_cursor) as
   begin
      open curEMPLOYEE  for SELECT id, FIRST_NAME, LAST_NAME
                           FROM   EMPLOYEES;    
   end GETALL;
 ---------------------------------------------
 procedure INSERT_COPY as
   cur t_cursor;
   emp employees%rowtype;
   begin
      GETALL(curEMPLOYEE=>cur);
        LOOP
    FETCH cur INTO emp;
       EXIT WHEN cur%NOTFOUND;
       insert into EMPLOYEES_COPY
       values(emp.id,emp.FIRST_NAME,emp.LAST_NAME);
   END LOOP;
   end INSERT_COPY;   
end EMPLOYEE;
/ 
```

包非常有用，因为您可以对单个实体的功能进行分组。例如，我将针对员工的职能分组。

您可以使用以下方法测试示例：

```
BEGIN      
  EMPLOYEE.INSERT_COPY;  
  commit;      
END; 
```

更多信息

*   [参考游标](http://www.oracle-base.com/articles/misc/using-ref-cursors-to-return-recordsets.php)
*   [套餐](http://docs.oracle.com/cd/B10500_01/appdev.920/a96624/09_packs.htm)

[这](https://stackoverflow.com/questions/12578515/how-to-insert-result-set-returned-by-an-oracle-stored-procedure-into-another-tab/12607979#12607979)是类似的问题。

# jsp - 如何在 Jqgrid 中使用编辑功能

> ID：12759851
> 
> 赞同：1
> 
> 时间：2012-10-06T12:34:43.287
> 
> 标签：jsp, jqgrid, row, edit

> **可能重复：**
> [如何在 jqgrid 上添加、编辑、删除？使用 php](https://stackoverflow.com/questions/3162947/how-to-work-on-jqgrid-add-edit-delete-using-php)

我使用 Jqgrid 有效且轻松地描述我的数据表。

如您所知，Jqgrid API 包含编辑功能。

我认为这是非常好的。

但我有麻烦了...

所有示例均针对 PHP 语言用户，而我使用 JSP 语言。

我的意思是 editurl 有价值。

```
 multiselect: false,
                paging: true,
                rowNum:10,
                rowList:[10,20,30],
                pager: $("#page"),
                loadonce:true,
        **editurl: 'edit.jsp',** // what is this valuable?
                caption: "Test Grid" 
```

演示站点中的示例说明它只是虚拟站点。

我如何制作“editurl”页面？

请给我一个JSP的例子。

# android - 在android中解析一个json数组

> ID：12759853
> 
> 赞同：-1
> 
> 时间：2012-10-06T12:34:50.150
> 
> 标签：android, json

> **可能重复：**
> [在 Android 中发送和解析 JSON](https://stackoverflow.com/questions/2818697/sending-and-parsing-json-in-android)

```
 {
       "appstore_information":{
          "allow_jail_broken_devices":true,
          "can_edit_text":true,
          "disabled_device_features":[
             2,
             7,
             8
          ],
          "enable_document_sharing":true,
          "enable_icloud":true,
          "enable_internal_app":true,
          "enable_itunes":true,
          "enable_local_download":false,
          "enable_screen_capture":true,
          "idle_time_out":7,
          "last_modified_date":"9\/28\/2012 1:01:17 PM",
          "locations":[
             {
                "latitude":"12.824261",
                "location":"Siruseri SEZ",
                "longitude":"80.219969",
                "radius_in_miles":6
             },
             {
                "latitude":"13.02329",
                "location":"DLF",
                "longitude":"80.17509",
                "radius_in_miles":7
             }
          ],
          "offline_access_type":1,
          "profile_id":1,
          "profile_name":"Profile",
          "require_ad_authentication":true,
          "use_offline_access":false
       },
       "display_message":"Profile is available in information.",
       "

message_status":"Success."
} 
```

Dis是我的json响应解析位置并将单个数据存储在android中的数组中的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T12:38:36.800

首先尝试使用[This Json Parsing Example](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)。它为您解释如何解析您的 json 并显示响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T12:38:50.587

检查[这个](https://stackoverflow.com/questions/2818697/sending-and-parsing-json-in-android)答案。网上关于json解析的话题千千万万

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T12:39:10.133

使用 json 解析器怎么样（android 提供了一个，但有更好的解决方案，例如： [https](https://github.com/ko5tik/jsonserializer) ://github.com/ko5tik/jsonserializer ）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T12:39:36.193

有几种方法可以做到这一点。主要使用 android SDK 中的 JSONObject 类和 JSONArray 类

# windows - 客户端在尝试使用 git-http-backend.exe 时被服务器配置拒绝

> ID：12759854
> 
> 赞同：23
> 
> 时间：2012-10-06T12:35:10.137
> 
> 标签：windows, git, apache

我使用 apache 2.4

```
Sat Oct 06 15:25:47.948789 2012] [authz_core:error] [pid 7580:tid 1232] [client 192.168.100.252:10153] AH01630: client denied by server configuration: C:/Program Files (x86)/Git/libexec/git-core/git-http-backend.exe 
```

这是我的配置

```
<Directory "C:\git-server">
Options +ExecCGI
Allow from all
</Directory>

 <VirtualHost *:80>
  DocumentRoot  "C:/git-server"
   ServerName ****
  DirectoryIndex index.php

SetEnv GIT_PROJECT_ROOT c:/git-server
SetEnv GIT_HTTP_EXPORT_ALL
SetEnv REMOTE_USER=$REDIRECT_REMOTE_USER
ScriptAlias /git/ "C:/Program Files (x86)/Git/libexec/git-core/git-http-backend.exe/$1"

<LocationMatch "^/.*/git-receive-pack$">
Options +ExecCGI
AuthType Basic
AuthName intranet
AuthUserFile "C:/git-server/config/users"
Require valid-user
</LocationMatch>

<LocationMatch "^/.*/git-upload-pack$">
Options +ExecCGI
AuthType Basic
AuthName intranet
AuthUserFile "C:/git-server/config/users"
Require valid-user
</LocationMatch>

</VirtualHost> 
```

我正在尝试 2 天来设置 git。我没想到会这么难。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-06T19:48:49.983

您应该更改配置以匹配 Apache 2.4 的需求：

```
<Directory "C:\git-server">
Options +ExecCGI
Require all granted
</Directory> 
```

来源：[http ://httpd.apache.org/docs/2.4/upgrading.html#access](http://httpd.apache.org/docs/2.4/upgrading.html#access)

# django-models - django admin中的抽象模型内联

> ID：12759855
> 
> 赞同：2
> 
> 时间：2012-10-06T12:35:11.217
> 
> 标签：django-models, django-admin

任何人都可以建议如何最好地实现以下功能我搜索了stackoverflow和谷歌，但我不确定我是否想出了答案

* * *

模型.py：

```
class Collection(models.Model):
    pass

class Item(models.Model):
    collection = models.ForeignKey(Collection)
    class Meta:
        abstract = True

class Item1(Item):
    name = models.CharField()

class Item2(Item):
    length = models.IntegerField() 
```

* * *

在 admin.py

问：如果有一些方法可以内联“项目”并且内联允许选择 Item1 或 Item2（或更多），是否可以在“Collection”的管理模型中。所以“Item”的多个子类型可以从同一个管理页面链接到同一个集合。

TIA

编辑：发现此链接上的信息有点有用，（它似乎为请求提供了大致的功能） [Django Admin根据类类型更改内联管理表单](https://stackoverflow.com/questions/5383332/django-admin-changing-inline-admin-form-based-on-class-type?lq=1)

但我不确定这是否正是我在问题中所问的

# c++ - 头文件是必需的吗？

> ID：12759856
> 
> 赞同：3
> 
> 时间：2012-10-06T12:35:26.567
> 
> 标签：c++, header, header-files

> **可能重复：**
> [在 C++ 中为什么有头文件和 cpp 文件？](https://stackoverflow.com/questions/333889/in-c-why-have-header-files-and-cpp-files)

来自 C# 背景，我发现头文件真的很烦人。即使使用 C++11 也需要它们吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T12:38:45.970

C++ 需要头文件（也需要库），就像 C# 需要引用程序集一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T12:37:53.860

是的，因为它仍然基于 C。您可以回答自己的问题：不要使用它们并尝试在没有它们的情况下进行编译。如果你不能，那么编译器仍然需要它们。

我的意思不是重言式。如果语言规范仍然需要它们，并且编译器与规范匹配，那么更改将是巨大的努力。辩论将需要很长时间。这听起来像是一个没有真正结束的发泄和辩论的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T12:37:16.207

对，他们是。假设您要开发 DLL 或 SO。开发人员应该如何知道这个库提供了哪些功能？因此，他需要将称为 API 的原型包含到自定义项目中。这样一来，声明和实现就分开了。您声明哪些功能可用，但您始终可以更改内部代码。

# windows - 为什么win32 API编程中通过CreateProcess新建的进程有“dwThreadId”和“dwProcessId”？

> ID：12759861
> 
> 赞同：0
> 
> 时间：2012-10-06T12:35:50.420
> 
> 标签：windows, winapi, createprocess

我很好奇为什么有两个单独的 ID -当我在 win32 API 编程中调用时在数据结构`dwProcessId`中`dwThreadId`返回？`PROCESS_INFORMATION``CreateProcess`

在什么情况下我会使用`dwThreadId`? 到目前为止，我还没有找到一个用例。我只使用进程 ID 来识别我通过`CreateProcess`.

另外我很好奇为什么Linux只有一个`pid`（又名ProcessId）而Windows既有pid又有threadid？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T12:43:48.023

Every process has at least one thread. The thread id gives you the id of the first thread created for a process by the CreateProcess API. You can create more threads and they'd have id's too.

They're separate only because process ids are for processes and thread ids are for threads. I don't think there's much more to say about it!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T12:43:38.497

创建的进程有线程，因为任何进程都至少有一个线程。因此，创建一个进程您还创建了它的第一个执行线程，而 API 函数同时让您两者兼得。

当您需要查找某个线程时使用线程标识符，并且在您调用的函数或 API 期望进程标识符的地方使用进程标识符。您不太可能偶然发现任何需要两者的东西，并且您不确定要在那里提交哪个标识符。

# c++ - c++ 使用正确的显示名称创建文件

> ID：12759862
> 
> 赞同：0
> 
> 时间：2012-10-06T12:36:07.733
> 
> 标签：c++, windows, linux, encoding

我想要的只是创建一个文件，但在 Linux 和 Windows 上具有正确显示的名称。

在 Linux 上，这段代码运行良好，我认为这是因为正确处理了 UTF-8。

在 Windows 上存在一些问题。我有两种语言英语和俄语。如果我在我的编程环境（QT Creator）中使用系统编码，那么创建的文件的名称几乎是正确的，但遗憾的是其他来自德语、法语的字母（我怀疑日本、中文也不例外）不能在名称中使用的文件，否则，可以看到它们被截断。所以，这是一个不好的方法。因为名称可以来自任何不同的语言。

即我想要一个看起来像这样的名字：
`string s="тдöüлотдFILE";`

但它看起来是这样的：

![在此处输入图像描述](../Images/8c5ef3c82741b20e45f912bb5b530e2d.png)

我将 Qt Creator 中的编码更改为 UTF-8，希望它能正常工作。

但现在我明白了：

```
string s="тдöüлотдFILE"; - expected name 
```

别名： ![在此处输入图像描述](../Images/0499c65ca49d39cd0437a382ab96e26d.png) 看起来更糟。

我试图将 Qt Creator 中的编码更改为 UTF-16（我听说 windows 使用它），但结果编译器拒绝以这种编码编译代码（UTF16LE、BE、UTF32 也是如此）

整体情况：

![在此处输入图像描述](../Images/0677352d76a02aceb27853ce70dc1557.png)

我怀疑问题在于 Windows 如何解释名称。但是我怎么能说它应该正确地显示它并且同时在 Linux 上工作呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T15:26:22.477

好吧，这并没有描述如何解决它，但我“需要”超过 500 个字符 :-)

在我尝试解释（以一种令人困惑的方式......）之前，您正在查看的问题是：您可能想尝试为平台设置文件名（我不记得用于识别每个平台的官方宏，所以请用正确的替换）：

```
#if defined(LINUX)
const char* Filename="тдöüлотдFILE";
#elif defined(WINDOWS)
const wchar_t* Filename=L"тдöüлотдFILE";
#endif

fstream f(Filename,...); 
```

这仍然要求您的源代码采用编译器期望的任何编码。如果这恰好是系统代码页，您甚至可能无法将这些字符转换为字符串文字（但是，如果 wchar_t 版本有效，您还可以使用字符的整数代码构造文件名。可读性较差，但它不依赖于源文件编码）。

您正在处理的问题非常复杂，可能无法以简单的方式解决。

Windows 在内部使用 UTF16（因为 XP、2000 和 NT 使用 UCS2、9x 和 3.x 使用代码页）。Linux 用户几乎已经转向 UTF-8，尽管仍有一些开发人员没有听说过。但它正在改善。

现在，虽然 UTF-8 具有代码页值，但它实际上不能是系统代码页。代码页值仅适用于在代码页和 UTF-16 之间转换的函数，但每个系统仍然有一个不是 UTF-8 的遗留代码页。Windows 上的旧版或“ANSI”API 采用系统代码页中编码的字符串，而 Unicode API 采用 UTF-16 格式。没有其他选择。

所以，很明显，Windows 程序喜欢使用 UTF-16。但是，Linux 根本不喜欢它，他们更喜欢 UTF-8。我使用自己的框架来帮助解决 Windows、Linux 和 MacOS 之间的此类问题（当然还有其他问题）；Qt 等现有框架也可以做到这一点。如果没有这样的帮助，最安全的选择是坚持使用 ASCII 中的字符串文字。

您的 IDE 设置只会影响源代码的存储方式；它不会影响运行时如何处理文字，或者运行时最终使用哪些 API。

您可以尝试做一些事情，例如使用微软的“TCHAR”设置，该设置旨在允许使用“ANSI”（不，我*不*知道他们为什么选择这个名称）或带有简单开关的 Unicode 编译程序。我对它不是特别熟悉或感兴趣，但它定义了类型（例如单个字符的 TCHAR）和字符串文字的宏，并导致 Windows API 函数的适当映射（例如对“CreateFile”的调用将变成是对 CreateFileW 或 CreateFileA 的调用）。想到的一种选择是将内容编译为 Windows 的 Unicode，并为 Linux 键入定义/定义适当的内容以生成基于“char”的代码变体。您可能还必须使用 std::basic_string 而不是 std::string。

作为旁注，据我所知，VisualC++ 2012[接受 UTF-8 和 UTF-16 的源代码](http://msdn.microsoft.com/en-us/library/xwy0e8f2.aspx)。但是，我不知道它在“char *”文字中的内容（在我的代码中，我只允许此类文字中的 ASCII 是安全的。无论如何，“晦涩”字符都来自字符串文件；我只需要文字文件名、注册表项、内部密钥等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T15:29:06.070

作为一般规则，将 Unicode（非 ascii）字符串编写为 ansi 字符串文字不是一个好主意，因为此字符串使用一个字节字符，它们无法处理 Unicode 字符，然后您的编译器要么使用 UTF-8（这在大多数 POSIX 编译器中是默认的，因为 UTF-8 是 OS 的本机编码，但请记住它取决于编译器而不是 C++ 标准）或使用系统的默认编码（在 Windows 中它可以在控制面板中配置，因此您的代码可能会工作在一个系统上，在另一个系统上失败）。正确的方法是使用 C++ 宽字符串文字 as `L"тдöüлотдFILE"`，在这种情况下，编译器将发出您的字符串的 Unicode 表示，该表示将适用于具有所有设置的所有机器。

现在的问题是 POSIX 中的文件系统使用 UTF-8 而在 Windows 中使用 UTF-16，如果使用`boost`是您的选项之一，您可以使用可爱`boost::path`的为您做所有事情，否则您可以使用 Windows 上的条件编译来实现它和POSIX

# java - Java Swingpaint（）不起作用

> ID：12759864
> 
> 赞同：0
> 
> 时间：2012-10-06T12:36:20.560
> 
> 标签：java, swing, jframe

我写了一个简单的 Swing Frame：

```
public class super_paint extends JFrame{
private JButton jt;
public super_paint()
{
    jt=new JButton("Hello");
    jt.setSize(20,10);

    Container container=getContentPane();
    this.add(jt);

}
@Override
public void paint(Graphics g) {
    // TODO Auto-generated method stub
    super.paint(g);
    g.setColor(Color.red);
    g.draw3DRect(10,10,100,100,true);
    g.setColor(Color.green);
    g.fillOval(50,10,60,60);
     g.drawString("A myFrame object", 10, 50 );
} 
```

以下是测试类：

```
public class super_paint_Test {
public static void main(String[] args)
{
    JFrame t=new super_paint();
    t.setSize(300,300);
    t.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    t.setVisible(true);
} 
```

}

显示 Jframe 时，paint() 所做的（例如 drawRect()）不显示。但是，当我更改 jframe 的大小时，它会显示出来。

代码片段有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T12:44:55.407

The problem is that the painting done for `JButton` 'paints over' the custom painting that you have already done in your `paint()` method.

I would create another custom `JComponent` sub class and place this paint functionality there. Also better to use `paintComponent`.

# php - 将逗号分隔的字符串转换为列表

> ID：12759867
> 
> 赞同：1
> 
> 时间：2012-10-06T12:37:13.173
> 
> 标签：php, mysql

我`ali,aliiii,asd`通过回显得到结果`$row['GROUP_CONCAT(mem_name)'];`。

我怎样才能像列表一样回显它们，以便我可以在点击功能上添加锚标记等。我有查询

```
$sql=mysql_query("
    SELECT cat_id, GROUP_CONCAT(mem_name)  
    FROM o_newcatmem GROUP BY cat_id
"); 
```

我希望结果 b 显示如下：

```
ali
aliiii
asd 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T12:39:39.853

你有一个`$string`这样的

```
$string = "ali,aliiii,asd";
echo "<pre>"; 
```

你有三个选择：

1.  您可以使用`str_getcsv`将 CSV 字符串转换为数组

    ```
    $list = str_getcsv($string);
    foreach ( $list as $var ) {
        echo $var, "\n";
    } 
    ```

2.  使用它们将它们转换为数组`explode`

    ```
    $list = explode(",", $string);
    echo implode("\n", $list); 
    ```

3.  使用只是使用`str_replace`

    ```
    $list = str_replace(",", "\n", $string);
    echo $list; 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T12:46:13.320

MySQL [GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat) function has a SEPARATOR keywords.

*   You can use `GROUP_CONCAT(mem_name SEPARATOR ',') AS mems_name` in your SQL statement.
*   Use separator that does not exist in `mem_name` field.
*   Use alias `AS mems_name`, so your PHP code looks simple, like `$row['mems_name']`.

In your PHP just [explode](http://php.net/manual/en/function.explode.php) data by your separator `$list = explode('|', $row['mems_name']);`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T12:43:28.777

```
<?php
// Example 1
$pizza  = "piece1 piece2 piece3 piece4 piece5 piece6";
$pieces = explode(" ", $pizza);
echo $pieces[0]; // piece1
echo $pieces[1]; // piece2

// Example 2
$data = "foo:*:1023:1000::/home/foo:/bin/sh";
list($user, $pass, $uid, $gid, $gecos, $home, $shell) = explode(":", $data);
echo $user; // foo
echo $pass; // *

?> 
```

# python - 将 Blob 从一个 AppEngine 应用程序复制到另一个应用程序

> ID：12759873
> 
> 赞同：2
> 
> 时间：2012-10-06T12:37:57.940
> 
> 标签：python, google-app-engine, blobstore

我使用 Google App Engine 提供的功能将所有数据从一个应用程序复制到另一个应用程序。没有转移的是我的 Blob。如何将其复制到我的新应用程序中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T13:02:18.270

可以提供 Blob。这意味着它们可以被您的其他应用程序获取。几天前请参阅我对这个问题的回答： [如何获取图像并保存到 blobstore？](https://stackoverflow.com/questions/12733098/how-to-fetch-image-and-save-to-blobstore/12734112#12734112)

6 个月内将提供一个工具：[https ://developers.google.com/appengine/docs/features#Roadmap_Features](https://developers.google.com/appengine/docs/features#Roadmap_Features)

# c# - 如何在 C# 中将数据集加载到 libsvm

> ID：12759887
> 
> 赞同：1
> 
> 时间：2012-10-06T12:39:34.457
> 
> 标签：c#, libsvm

我已经从 Libsvm 下载了 C# 中的 SVM，但是我不知道在哪里加载我的数据来执行分类，我想知道如何将数据集加载到 SVM 中并运行它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T11:55:42.770

我假设您正在使用[libsvm.net](https://github.com/nicolaspanel/libsvm.net)

你必须有办法加载你的数据：

* * *

**第一种方法 - 使用文件数据集**，称为“TRAINING_FILE.txt”

注意：此方法假定您的文件格式正确。[在这里](http://www.csie.ntu.edu.tw/~cjlin/libsvmtools/datasets/)查看一些好的样本。

```
var TRAINING_FILE = "C:\\[your_local_path]\\TRAINING_FILE.txt";
var data_set = ProblemHelper.ReadAndScaleProblem(TRAINING_FILE); 
```

如果您不想扩展，只需使用以下说明：

```
var data_set = ProblemHelper.ReadProblem(TRAINING_FILE); 
```

然后，您最终必须创建您的 SVM

```
var svm = new C_SVC(data_set, [most_appropriate_Kernel], c_parameter); 
```

* * *

**第二种方式 - 自己格式化数据集**

注意：此方法使用 Linq，请确保添加了 System.Ling 引用。

您可以使用以下代码逐行构建数据集：

```
var vy = new List<double>();
var vx = new List<svm_node[]>();
foreach (var line_i in your_data_source)
{
   vy.Add(line_i.Y); // double value representing the class for the given experience

   List<svm_node> x = new List<svm_node>();
   for(int j = 0 ; j < NB_ATTRIBUTES ; j++) // Save values for each attributes
   {
      var attributeValue = line_i.X[j]; // value of the corresponding attribute
      x.Add( new svm_node() { index = j, value = attributeValue });
   }
   vx.Add(x.ToArray());
}
var data_set= new svm_problem();
data_set.l = vy.Count;
data_set.x = vx.ToArray();
data_set.y = vy.ToArray();
var svm = new C_SVC(data_set, [most_appropriate_Kernel], c_parameter); 
```

# c++ - 我在哪里/如何获得 Looper？

> ID：12759891
> 
> 赞同：0
> 
> 时间：2012-10-06T12:39:57.287
> 
> 标签：c++, looper

根据 C++ 标准或 C++ 标准库，我在哪里/如何获得 Looper？

我需要设计自己的回调系统，当然，我需要这个系统来管理我的队列和组件。

Looper 是给定频率做一件简单的事情的东西，它只是在每个时钟运行一个队列，如果您设置一个 10 ms 的 looper，则每 10 ms 循环器将触发队列中的事件/事件。

这基本上是一个循环器，大部分时间通常与内核、硬件时钟或一些非常低级的东西相关联。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T13:04:18.277

您可以使用新 C++11 标准中的一些原语来创建这样的东西。使用`std::thread`和`std::timed_mutex`控制从`std::queue`. 将仿函数类放入队列中。从线程循环中执行函子。

您也可以反之亦然，以恒定频率将函子对象“向上”推入队列并从“客户端”端执行它们。

不知何故，归结为从“Looper”线程对队列进行时间控制的访问。您可以使用 eg`std::thread::sleep_for()`来执行此操作，或者使用一些更复杂的机制，其行为类似于定时信号量（例如，与 a 耦合的条件变量`std::timed_mutex`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T12:52:44.700

[QTimer](http://doc.qt.digia.com/qt/qtimer.html)做你想做的事——“单次”，或者在你的情况下，以给定的（毫秒）频率重复触发。

您也可以在谷歌上搜索“watch-dog-timer”，因为我认为这可能是比“looper”更常见的术语。

如果你想更底层，一些系统（如 Windows）有一个“系统时钟”（通常以毫秒分辨率），还有另一个更高性能的时钟，如“多媒体时钟”（通常以纳秒分辨率) 如果性能很重要。

**[编辑]**，好的，所以我观看了关于“what-is-a-looper”的视频。这看起来像一个标准的事件处理队列。GUI 事件触发消息添加到队列，并且“循环器”定期清除/执行消息队列。一个特殊情况是“looper”还处理“local-service-calls”（在 Android 上，这是视频的主题）。因此，您似乎只需要：

*   消息队列
*   清除消息队列的计时器（在线程上，或与“主处理”分开）

视频注释：

*   视图使用 Looper 消息来触发事件
*   由于 Loopers 与线程是 1:1 的，因此 View 树也是
*   您创建的线程不能直接接触视图
*   但是，您可以为自己的线程创建一个新的 Looper

所以，很有趣，但看起来并不特别难以实现。这是一个很好的模式。

因此，在这种情况下，我的建议`QTimer`只是解决方案的一部分。听起来您希望消息队列的库与它一起使用。

# mongodb - Spring GridFsOperations API，用于使用自定义前缀存储在 mongo 中

> ID：12759892
> 
> 赞同：1
> 
> 时间：2012-10-06T12:40:01.003
> 
> 标签：mongodb, spring-data, gridfs

我正在为 mongodb 使用 spring-data 的 GridFsOperations API 将大文件存储在数据库中的块中。这是我的代码：

```
@Autowired
private GridFsOperations gridOperation;

public String save(InputStream inputStream, String contentType, String filename) {
  ...
  GridFSFile file = gridOperation.store(inputStream, filename, metaData);
  return file.getId().toString();
} 
```

该代码工作正常，但它始终将文件存储在以前缀“fs”开头的集合中，这是 mongodb 中的默认值。有没有办法指定不同的前缀，以便我可以为不同类型的文件存储不同的文件和块？

编辑：附加问题

如何指定块大小？是否建议为不同类型的文件设置不同的块大小，例如 - 图像文件为 2 mb，视频文件为 10 mb？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T16:38:45.487

我使用 GridFS 和 GridFSInputFile 类而不是 GridFSTemplate 或 GridFSOperations 来解决我的两个问题（在我的代码中配置块大小并使用不同的前缀）。

我仍然想知道是否建议使用不同的块大小。

对于任何可能想知道的人，这里是代码片段：

```
@Autowired
private MongoDbFactory dbFactory;

public String save(InputStream inputStream, String contentType, String filename, String username, String bucket) {
  DBObject metaData = ....(create metadata here)

  GridFS gridFS = new GridFS(dbFactory.getDb(), bucket);
    GridFSInputFile gridFSInputFile = gridFS.createFile(inputStream);
    gridFSInputFile.setMetaData(metaData);

    if(bucket.equals("photo")){
        gridFSInputFile.setChunkSize(1024000);  //1 mb
    } else if(bucket.equals("mp3")){
        gridFSInputFile.setChunkSize(10240000); //10 mb
    }

    try {
        gridFSInputFile.saveChunks();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    gridFSInputFile.save();

    return gridFSInputFile.getId().toString();
} 
```

# winapi - 如何找到由 Win32 API 编程中通过 CreateProcess 启动的程序创建的所有 Windows 类？

> ID：12759894
> 
> 赞同：0
> 
> 时间：2012-10-06T12:40:04.110
> 
> 标签：winapi, createprocess

我正在启动一个程序`CreateProcess`，这个程序创建了许多不同的 Windows 类。例如，其中一个类被称为`Message_Dispatch`. 另一个叫`Main_App_Frame`. 还有几个。

如何枚举属于`CreateProcess`API 调用启动的进程的所有 Windows 类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T17:55:37.540

您不能直接枚举已注册的窗口类，但您可以枚举在任何给定时刻正在运行的当前活动窗口，通过`FindWindow/Ex()`, `EnumWindows()`,`EnumChildWindows()`等。您可以使用`GetWindowThreadProcessId()`将每个窗口与`CreateProcess()`返回的进程 ID 进行比较，然后您可以用于`GetClassName()`您找到的每个匹配窗口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T15:46:12.987

你不能。如果您需要从您启动的进程中获取此信息，则必须在进程之间设置自定义接口以传达此信息。无论如何，如果没有该进程的合作，您就无法对另一个进程的类做太多事情。

# jquery - 如何使用 jQuery blueimp File Upload 插件从服务器端显示错误

> ID：12759902
> 
> 赞同：3
> 
> 时间：2012-10-06T12:41:47.053
> 
> 标签：jquery, ruby-on-rails-3, blueimp

我正在开发一个使用 [blueimp jQuery-File-Upload plugin](https://github.com/blueimp/jQuery-File-Upload)的项目。

我无法显示发生在服务器端的错误，因为它只是显示 `Empty file upload result`.

这是用于显示上传文件的 jQuery 模板

```
<script id="template-download" type="text/x-tmpl">
{% for (var i=0, file; file=o.files[i]; i++) { %}
    <tr class="template-download fade">
        {% if (file.error) { %}
            <td></td>
            <td class="name"><span>{%=file.name%}</span></td>
            <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
            <td class="error" colspan="2">
              <span class="label label-important">
                {%=locale.fileupload.error%}
              </span>
              {%=locale.fileupload.errors[file.error] || file.error%}
            </td>
        {% } else { %}
            <td class="name">
                <a href="{%=file.url%}" title="{%=file.name%}" rel="{%=file.thumbnail_url&&'gallery'%}" download="{%=file.name%}">{%=file.name%}</a>
            </td>
            <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
        {% } %}

    </tr>
{% } %}
</script> 
```

我想知道如何直接访问 json 或任何其他方式来获取我已经从后端发送的错误消息！

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:54:30.627

您可以在此插件中使用大量回调选项 - 请参阅此处的文档： [https ://github.com/blueimp/jQuery-File-Upload/wiki/Options](https://github.com/blueimp/jQuery-File-Upload/wiki/Options)

对于错误，您可能想要：

```
.bind('fileuploadfail', function (e, data) {/* ... */}) 
```

或者

```
.bind('fileuploadchunkfail', function (e, data) {/* ... */}) 
```

如果您使用分块上传....

# c# - 在 C# 中读取和写入扇区

> ID：12759910
> 
> 赞同：1
> 
> 时间：2012-10-06T12:43:05.977
> 
> 标签：c#

我想创建一个从扇区读取文件的应用程序。我在 C++ [http://catalog.codeproject.com/Articles/32169/FDump-Dumping-File-Sectors-Directly-from-Disk-usin](http://catalog.codeproject.com/Articles/32169/FDump-Dumping-File-Sectors-Directly-from-Disk-usin)中找到了这个解决方案，但在 C# 中没有解决方案。任何人都可以指导我或帮助我创建这种应用程序，感谢您的回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T12:54:14.777

该类不适用于以任何“原始方式”`DeviceStream`读取文件（例如）。`@"\\.\PhysicalDrive1\WINDOWS\EXPLORER.EXE"`

它旨在访问原始/物理设备 - 例如硬盘或 cdrom 设备 - 并读取/写入*文件系统级别以下的*磁盘块。

如果您在不确切知道自己在做什么的情况下使用它来写入磁盘，那么您将向这些`C/C++`人展示全新级别的未定义行为:) 它很可能会在午餐时吃掉您的文件系统。

# c++ - OpenCV C++ videocapture 图像背景减法

> ID：12759911
> 
> 赞同：0
> 
> 时间：2012-10-06T12:43:07.310
> 
> 标签：c++, image-processing, opencv, background-subtraction

我正在尝试制作一个简单的程序，该程序将使用 OpenCV 和 C++ 从背景中减去一个对象。

这个想法是使用 VideoCapture 来：

*   捕捉静态背景（没有对象）
*   然后连续捕捉当前帧并从背景中减去

但是，将捕获的数据发送到我的 BackgroundSubtraction() 函数时出现问题。它给了我一个错误：

> OpenCV_BackgroundSubtraction.exe 中 0x77d815 处未处理的异常：0xC000005：访问关于位置 0x04e30050 的违规

但是，有时它似乎有效，有时则无效（在 Windows 7 64 位上使用 Visual Studio 2010 C++）。

我有一种感觉，它与内存分配和函数的优先级有关。似乎 VideoCapture 抓取器在我将其发送到 BackgroundSubtraction() 之前抓取/写入帧的速度可能不够快。

我笔记本电脑中的内置网络摄像头工作正常（即显示图片），但我的代码中有问题。我试过玩一些延迟，但它似乎没有影响。

这是我的代码：

```
Mat BackgroundSubtraction(Mat background, Mat current);

int main()
{
Mat colorImage;
Mat gray;

// Background subtraction
Mat backgroundImage;
Mat currentImage;
Mat object; // the object to track

VideoCapture capture, capture2;

capture2.open(0);

// Initial frame
while (backgroundImage.empty())
{
    capture2 >> backgroundImage;
    cv::imshow("Background", backgroundImage);
    waitKey(100);
    capture2.release();

}

capture.open(0);

// Tracking the object
while (true)
{
    capture >> currentImage;

    if ((char)waitKey(300) == 'q') // Small delay
        break;

            // The problem happens when calling BackgroundSubtraction()
    object = BackgroundSubtraction(backgroundImage, backgroundImage);
    cv::imshow("Current frame", currentImage);
    cv::imshow("Object", object);
}

Mat BackgroundSubtraction(Mat background, Mat current)
{

    // Convert to black and white
Mat background_bw;
Mat current_bw;
cvtColor(background, background_bw, CV_RGB2GRAY);
cvtColor(current, current_bw, CV_RGB2GRAY);

Mat newObject(background_bw.rows, background_bw.cols, CV_8UC1);

for (int y = 0; y < newObject.rows; y++)
{
    for (int x = 0; x < newObject.cols; x++)
    {
                    // Subtract the two images
                    newObject.at<uchar>(y, x) = background_bw.at<uchar>(y, x)
            - current_bw.at<uchar>(y, x);
    }
}

return newObject;
} 
```

提前致谢！

附言。尽管可能有一些内置函数可以完成这项工作，但我宁愿自己制作算法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T15:39:03.137

您可以尝试更改几件事来确定您的问题。但我的猜测是，您传递给减法器函数的图像之一是无效的。请在处理它们之前验证两者是否确实有效

1.  您应该确保正确创建和发布您的捕获。我不记得 capture.release() 是否正在等待，但我会验证捕获是否正常工作。实际上我可能只使用一次捕获，因为您只使用一个相机。
2.  您没有验证您的 currentImage 是否实际创建，因此是有效的。
3.  我还记得前一段时间无法修改由捕获对象创建的图像，但必须在处理之前制作帧的副本。你也可以试试这个
4.  此外，我注意到您正在为前景和背景图像传递相同的图像。这本身不是问题，但可能不是您想要做的。

最后，您应该尝试调试您的程序，以确定代码中引发异常的确切位置。

# google-chrome - Keep background apps running after closing all Chrome windows?

> ID：12759919
> 
> 赞同：1
> 
> 时间：2012-10-06T12:44:27.947
> 
> 标签：google-chrome, google-chrome-extension

I'm writing an extention that saves all the tabs when you close Chrome. My `background.js` looks like:

```
chrome.windows.onRemoved.addListener(saveTabs);
function saveTabs(win) {
    // recentlyWinClosedTabs is a dictionary included all closed tabs
    var jsonData = JSON.stringify(recentlyWinClosedTabs);
    chrome.storage.local.set({ 'RecentClosedTabs': jsonData });
} 
```

and my `popup.js` looks like:

```
function loadRCWinTabsInfo() {
    chrome.storage.local.get('RecentClosedTabs', function (items) {
        allOpenedTabsInDiffWin = JSON.parse(items.RecentClosedTabs);
        if (allOpenedTabsInDiffWin != null && typeof allOpenedTabsInDiffWin != "undefined") {
            //show tabs info
        }
    });
} 
```

Every time I close a window, it should save all the tabs of that window. However, you have to have the *"Continue running background apps when Google Chrome is closed"* setting is set. So, is it possible to execute some code when the window is closed?

# android - whaen i am sending mail to any mail id that message has to go that mail id with out asking email client on android

> ID：12759921
> 
> 赞同：1
> 
> 时间：2012-10-06T12:44:55.750
> 
> 标签：android

Hi when i am sending a mail to particular mail id from my apllication that mail has to send to that mail id with out asking email client in android? Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T12:49:07.777

据我所知，你不能，除非你得到用户的授权来控制她的 gmail 帐户：[https ://developers.google.com/accounts/](https://developers.google.com/accounts/)

# performance - Why are `colMeans()` and `rowMeans()` functions faster than using the mean function with `lapply()`?

> ID：12759937
> 
> 赞同：3
> 
> 时间：2012-10-06T12:47:13.613
> 
> 标签：performance, r, mean

What I want to ask is, algorithmically, what do the `rowMeans()` and `colMeans()` functions do to optimize speed?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T11:14:48.457

此外，考虑什么`lapply()`。它设置对函数的重复调用`mean()`。因此，除了实际计算平均值的开销（在快速 C 代码中完成）之外，该`lapply()`版本还会反复产生与`mean()`.

`rowMeans()`并且`colMeans()`只在内部进行一组完整性检查，它们的 C 代码经过优化以循环遍历那里的行/列，而不是通过单独的 R 调用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T11:09:12.203

`rowMeans`并且`colMeans`比因为它们直接调用 C 代码而不是由 R 解释器解释而更快。

# sql - SQL - 派生表连接

> ID：12759941
> 
> 赞同：1
> 
> 时间：2012-10-06T12:47:45.520
> 
> 标签：sql

我有一个表的 SQL 查询，用户可以在其中创建表单的多个“修订”。目前我们将修订的 ID 传递到查询中以检索值（您可能会猜到），这很好 - 但是我想扩展以也选择以前的修订行（如果它们是以前的修订）。每个修订版都有一个编号，当他们创建新修订版时该编号会增加。到目前为止，这是我的查询，它似乎没有运行（显然值 1，值 2 是我查询中的实际列）

```
SELECT ID, SageJobID, SageJobPK, DateID, Revision, StatusID, Value1, Value2
FROM   CVRs
LEFT OUTER JOIN (SELECT TOP(1) * 
                  FROM CVRs AS prevCVR 
                  WHERE (prevCVR.DateID = CVRs.DateID 
                    AND prevCVR.SageJobPK = CVRs.SageJobPK 
                    AND prevCVR.ID <> CVRs.ID) 
                  ORDER BY prevCVR.Revision DESC) AS 'PrevCVR'
WHERE        (CVRs.ID = @ID) 
```

我似乎无法访问我从加入中选择的主要 CVR 行。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T13:14:53.333

我制作了一个带有简化版本的 SQL Fiddle，让您了解如何解决它。SQL Fiddle 演示[在这里](http://sqlfiddle.com/#!6/94658/2)

那将是关于这个

```
SELECT ID, SageJobID, SageJobPK, DateID, Revision, StatusID, Value1, Value2
FROM   CVRs
WHERE  DateId in    ( select dateid    from cvrs where CVRs.ID = @ID)
  and  sagejobpk in ( select sagejobpk from cvrs where CVRs.ID = @ID)
order by revision desc 
```

**编辑：**我制作了另一个[SQL Fiddle](http://sqlfiddle.com/#!6/f41ec/2)也参与其中`DateId`，但我有一个问题：是不是所有属于一起的 CV 修订必须是相同`DateId`的`SageJobPK`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T12:52:14.653

看起来你需要`OUTER APPLY`而不是`OUTER JOIN`

```
SELECT CVRs.*,
       PrevCVR.* /*TODO: Select desired columns*/
FROM   CVRs
       OUTER APPLY (SELECT TOP(1) *
                    FROM   CVRs AS prevCVR
                    WHERE  ( prevCVR.DateID = CVRs.DateID
                             AND prevCVR.SageJobPK = CVRs.SageJobPK
                             AND prevCVR.ID <> CVRs.ID )
                    ORDER  BY prevCVR.Revision DESC) AS PrevCVR
WHERE  ( CVRs.ID = @ID ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T12:56:08.327

```
SELECT   a.ID, a.SageJobID, a.SageJobPK, a.DateID, a.Revision, a.StatusID, a.Value1, a.Value2
FROM   CVRs as a
LEFT OUTER JOIN  CVRs as b
on .DateID = b.DateID AND a.SageJobPK = b.SageJobPK AND a.ID <> b.ID
where a.ID = @ID  ORDER BY b.Revision DESC 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T16:29:03.283

我认为获得多个最新版本的最简单方法是使用排名函数：

```
select SageJobID, SageJobPK, DateID, Revision, StatusID, Value1, Value2
from (select CVR.*,
             row_number() over (partition by id order by revision desc) as seqnum
      from CVRs
     ) c
where c.ID = @ID and seqnum <= 2
order by revision desc 
```

Seqnum 对修订进行排序，将 1 分配给最近的，将 2 分配给第二最近的，依此类推。

# android - android viewFlipper、TextSwitcher 或其他用于测验应用程序的东西？

> ID：12759942
> 
> 赞同：1
> 
> 时间：2012-10-06T12:47:49.613
> 
> 标签：android, viewflipper

首先要说的是我是一个初学者，现在我正在开发我的第一个“真正的”安卓应用程序（它将在 Google Play 上）。我已经在谷歌上搜索了很多关于这个安卓“测验”应用程序的信息，我无法获得很好的信息，也无法获得关于这个的项目示例（大多数代码/项目示例都是关于每次触摸屏幕时`viewFlipper`/`TextSwitcher`更改 - 这不是我想要的）。我还尝试在 Stackoverflow 中进行搜索，但我得到的是一些被否决的问题，没有一个好的/有帮助的答案。

所以我的应用程序中会有一个测验部分，我会有 3 种类型的问题：

1.  一个有`radiobutton`答案的问题
2.  一个有`checkboxlist`答案的问题
3.  一个有`edittext`答案的问题

我的应用程序中将有大约 50 个问题，所以**我计划创建 3 种不同的布局**。

这些是我的问题：

1.  你有任何链接/例子吗？请分享（我已经尝试自己找到）：D
2.  最好的方法是什么？（例如：像使用`viewFlipper`布局或其他东西）
3.  `viewFlipper`是否可以使用？如何生成 3 种不同类型的问题（3 种布局） ？

谢谢 :D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T14:02:20.687

您应该为问题创建一个主布局，其中包含一个`TextView`for 语句、一个`FrameLayout`用于 answer layout 的容器（如 ）以及 next 和 previous `Button`。在容器中，您可以放置​​两个视图，一个`ListView`和一个`EditText`用于可编辑的答案。两者的可见性都消失了。

现在，一旦您看到主布局，您就可以在相同的布局中加载每个问题。您将需要设置语句视图的文本，如果您的问题有选项，则设置`ListView`可见性，在其中加载数据并将其设置为单选/多选。否则，如果您的问题有可编辑的答案，则设置为`EditText`可见，（将可见性设置`ListView`为消失）。

这将比为每个问题增加单独的布局更有效，还`ListView`可以完美地处理任意数量的选项，可以是单选/多选，并允许滚动到与屏幕大小无关的任何选项。

布局 XML：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:orientation="vertical">
    <TextView android:id="@+id/question__Statement"
              android:layout_width="match_parent"
              android:layout_height="wrap_content"
            />
    <FrameLayout android:layout_width="match_parent"
                 android:layout_height="0dp"
                 android:layout_weight="1"
            >
        <ListView android:id="@+id/question__options"
                  android:layout_width="match_parent"
                  android:layout_height="match_parent"
                  android:visibility="gone"
                />
        <EditText android:id="@+id/question__text"
                  android:layout_width="match_parent"
                  android:layout_height="wrap_content"
                  android:visibility="gone"
                />
    </FrameLayout>
    <LinearLayout android:layout_width="match_parent"
                  android:layout_height="wrap_content"
            >
        <Button android:id="@+id/question__prev"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:layout_alignParentLeft="true"
                android:text="Previous"
                />
        <Button android:id="@+id/question__next"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:layout_alignParentRight="true"
                android:text="Next"
                />
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T13:50:07.747

我为您找到了一个很棒的示例应用程序：

[https://github.com/robhinds/AndroidChuckQuiz](https://github.com/robhinds/AndroidChuckQuiz)

它使用了一个 SQLite 数据库，你可能想在“之上”构建一个应用程序之前阅读它。

# mysql - 使用 C# 将 OutLook 电子邮件保存到 MySQL 数据库

> ID：12759947
> 
> 赞同：1
> 
> 时间：2012-10-06T12:48:16.307
> 
> 标签：mysql, c#-3.0, outlook-2007

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

using Microsoft.VisualBasic;
using System.Diagnostics;
using System.Data.SqlClient;
using System.Text.RegularExpressions;
using System.Security.Principal;
using Microsoft.Windows.Design.Interaction;
using Microsoft.CSharp;

using System.IO;
using System.Reflection;
using System.Configuration;
using MySql.Data.MySqlClient;
using System.Data.OleDb;
using System.Collections;
using System.Net.Mail;
using System.Net;
using Excel = Microsoft.Office.Interop.Excel;
using OutLook = Microsoft.Office.Interop.Outlook;
using Microsoft.Office.Interop.Outlook;
using EAGetMail;

namespace Email_ALerts
{
    public partial class frm_EmailAlert : Form
    {
        static string EmailConnStr = ConfigurationManager.ConnectionStrings["EmailAlerts"].ToString();
        static MySqlConnection objConn;
        static MySqlCommand objCmd;
        static MySqlDataAdapter objDa;
        static MySqlDataReader objDr;
        DataSet ds;
        DataTable dt;

        const string FOLDER_NAME = "spec";
        const string SAVE_FOLDER = "c:\\temp";
        private string m_strSaveFullPath = "";

        public frm_EmailAlert()
        {
            InitializeComponent();
        }

        private void ThisAddIn_Startup(object sender, EventArgs e)
        {

        }

        private void Application_ItemSend(object Item, ref bool Cancel)
        {
            OutLook.MailItem mailItem = Item as OutLook.MailItem;
            if ((mailItem != null))
            {
                if ((mailItem.Subject).ToLower().Contains(FOLDER_NAME))
                {
                    OutLook.MailItem mailItemCopy = mailItem.Copy() as OutLook.MailItem;
                    Microsoft.Office.Interop.Outlook.ApplicationClass oApp = new Microsoft.Office.Interop.Outlook.ApplicationClass();
                    Microsoft.Office.Interop.Outlook.MAPIFolder inBox = (Microsoft.Office.Interop.Outlook.MAPIFolder)oApp.GetNamespace("MAPI").GetDefaultFolder(Microsoft.Office.Interop.Outlook.OlDefaultFolders.olFolderInbox);
                    OutLook.MAPIFolder folder = null;

                    try
                    {
                        folder = inBox.Folders.Add("My Test Folder",Microsoft.Office.Interop.Outlook.OlDefaultFolders.olFolderInbox);
                        inBox.Folders["My Test Folder"].Display();
                    }
                    catch (System.Runtime.InteropServices.COMException ex)
                    {

                    }

                    catch (System.Exception ex)
                    {
                        Microsoft.Windows.Design.Interaction.MsgBox(ex.Message);
                    }

                    if ((folder == null))
                    {
                        folder = inBox.Folders.Add(FOLDER_NAME, OutLook.OlDefaultFolders.olFolderInbox);
                    }
                    mailItemCopy.Move(folder);
                    string strFromAddress = WindowsIdentity.GetCurrent().Name;
                    string strToAddress = mailItemCopy.To;
                    string strCCAddress = mailItemCopy.CC;
                    string strBCCAddress = mailItemCopy.BCC;
                    string strEmailFileSize = Convert.ToString(mailItemCopy.Size);
                    if (string.IsNullOrEmpty(strFromAddress))
                        strFromAddress = "";
                    if (string.IsNullOrEmpty(strToAddress))
                        strToAddress = "";
                    if (string.IsNullOrEmpty(strCCAddress))
                        strCCAddress = "";
                    if (string.IsNullOrEmpty(strBCCAddress))
                        strBCCAddress = "";
                    string strFileName = Regex.Replace(mailItemCopy.Subject, "[\\/\\\\\\:\\?\\*\\<\\>\\|]", "") + ".msg";
                    m_strSaveFullPath = SAVE_FOLDER + "\\" + strFileName;
                    SaveEmailToFile(ref mailItemCopy);
                    SaveEmailToDb(ref mailItemCopy.Subject, ref mailItemCopy.Body, ref strFileName, ref strEmailFileSize, ref strFromAddress, ref strToAddress, ref strCCAddress, ref strBCCAddress);
                    File.Delete(m_strSaveFullPath);
                }
            }

        }

        private void SaveEmailToDb(ref string strSubject, ref string strBody, ref string strMailName, ref string strEmailFileSize, ref string strFromAddress, ref string strToAddress, ref string strCCAddress, ref string strBCCAddress)
        {
            FileStream tmpFile = new FileStream(m_strSaveFullPath, FileMode.Open, FileAccess.Read);
            byte[] btSaveFile = new byte[tmpFile.Length + 1];
            tmpFile.Read(btSaveFile, 0, 0);
            tmpFile.Close();

            objConn = new MySqlConnection(EmailConnStr);
            string strSQLInsert = "INSERT INTO MailStore " + " (MailText,MailSubject,MailSavePath,MailSentDate,MailFileName,MailSentFrom,MailSentTo,MailSentCC,MailSentBCC,FileObject,FileObjectSize) " + " VALUES " + " (@Subject, @Body, @SavePath,@MailSentDate,@MailFileName,@MailSentFrom,@MailSentTo,@MailSentCC,@MailSentBCC,@File,@strEmailFileSize)";

            objCmd = new MySqlCommand(strSQLInsert, objConn);
            objCmd.Parameters.Add(new MySqlParameter("@Subject", SqlDbType.VarChar)).Value = strSubject;
            objCmd.Parameters.Add(new MySqlParameter("@Body", SqlDbType.VarChar)).Value = strBody;
            objCmd.Parameters.Add(new MySqlParameter("@SavePath", SqlDbType.VarChar)).Value = m_strSaveFullPath;
            objCmd.Parameters.Add(new MySqlParameter("@MailSentDate", SqlDbType.DateTime)).Value = DateTime.Now;
            objCmd.Parameters.Add(new MySqlParameter("@MailFileName", SqlDbType.VarChar)).Value = strMailName;
            objCmd.Parameters.Add(new MySqlParameter("@MailSentFrom", SqlDbType.VarChar)).Value = strFromAddress;
            objCmd.Parameters.Add(new MySqlParameter("@MailSentTo", SqlDbType.VarChar)).Value = strToAddress;
            objCmd.Parameters.Add(new MySqlParameter("@MailSentCC", SqlDbType.VarChar)).Value = strCCAddress;
            objCmd.Parameters.Add(new MySqlParameter("@MailSentBCC", SqlDbType.VarChar)).Value = strBCCAddress;
            objCmd.Parameters.Add(new MySqlParameter("@File", SqlDbType.VarBinary)).Value = btSaveFile;
            objCmd.Parameters.Add(new MySqlParameter("@strEmailFileSize", SqlDbType.VarChar)).Value = strEmailFileSize;

            objConn.Open();
            objCmd.ExecuteNonQuery();
            objConn.Close();
            objConn.Close(); objCmd.Dispose();
        }

        private void SaveEmailToFile(ref Microsoft.Office.Interop.Outlook.MailItem miMailItem)
        {
            if (!Directory.Exists(SAVE_FOLDER))
            {
                Directory.CreateDirectory(SAVE_FOLDER);
            }
            miMailItem.SaveAs(m_strSaveFullPath, Microsoft.Office.Interop.Outlook.OlSaveAsType.olMSG);
        }
    }
} 
```

谁能帮助我如何使用 C#.net 将 OutLook 电子邮件保存到 MySql 数据库中？我想将我的 OutLook 邮件消息保存到 MySql 数据库中。我写了这段代码，但这不起作用，其中有一些错误。请更正此代码或将实际代码发送给我。谢谢

问候：艾哈迈德

# android - 如何在android中使用wifi访问我网络中的打印机

> ID：12759955
> 
> 赞同：2
> 
> 时间：2012-10-06T12:49:21.517
> 
> 标签：android, android-intent

我真的被困住了，找不到任何有关如何使用 WiFi 访问网络中可用打印机的相关答案，因此我可以从我的应用程序打印文本文件。如果可能，我不想使用 Google Cloud。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T14:22:02.360

为了能够从您的设备使用打印机，您需要为您的设备提供打印机设备驱动程序（可能不可用），或者您需要连接到具有打印机设备驱动程序并知道如何与打印机通信的打印服务器。

所以，LPR 他是你最好的选择......

要使 LPR 正常工作，您需要配置 LPR 服务器（名为 LPD，用于行式打印机守护程序）。如果您使用的是连接打印机的windows机器，您需要在windows机器上配置并启动LPD，然后在您的设备上使用LPR连接到windows LPD服务。

请参阅有关在 Windows 上配置 LPD 的文档：[打印管理概述](http://technet.microsoft.com/en-us/library/cc731857.aspx)

祝你好运。

# html - 拆分按钮的jquery移动对齐

> ID：12759968
> 
> 赞同：0
> 
> 时间：2012-10-06T12:50:50.180
> 
> 标签：html, css, mobile

我有一个项目列表[http://jsfiddle.net/2Veve/5/](http://jsfiddle.net/2Veve/5/) 我希望将按钮对齐到文本的右侧，以便占用更少的空间。

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T13:22:03.720

尝试为前一个元素添加`float:left`样式。`<a>`这将使它们水平对齐，并使它们以垂直方式占用更少的空间。

```
 <a href="#" style="width: 10%;float:left;">
    <h3>Item 1</h3>
    <p>Monday</p>
  </a>
 <div data-type="horizontal" data-role="controlgroup" class="ui-btn-right">
    <a href="index.html" data-role="button">Yes</a>
    <a href="index.html" data-role="button">No</a>
    <a href="index.html" data-role="button">Maybe</a>
  </div> 
```

检查此[链接](http://jsfiddle.net/2Veve/10/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T13:02:51.880

您可以这样做，将链接浮动到左侧，然后清除浮动

将此用于您的项目

```
style="float: left;" 
```

比在你的是/否/可能是 div 中使用它

```
style="position: relative; top: 20px;" 
```

最后在是/否/可能像这样之后清除你的花车：

```
<div style="clear: both;"></div> 
```

只要确保您使用`left: 15px;`第 2 项 - 是/否/可能

[我的小提琴](http://jsfiddle.net/2Veve/8/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T13:08:10.823

试试这个。。

输出将如下所示

![在此处输入图像描述](../Images/f3e4a106056ab1a468bf9a851b1efd30.png)

```
 <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0b2/jquery.mobile-1.0b2.min.css" />
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.6.2.min.js"></script>
        <script type="text/javascript" src="http://code.jquery.com/mobile/1.0b2/jquery.mobile-1.0b2.min.js"></script>
    </head>
    <body id="my">

<style>
a.ui-link-inherit{ float:left; }
div.ui-btn-righ{ float:left; }
.ui-btn-text{ overflow:hidden; }
</style>
<div data-role="page">
<div data-role="header">
<h1>Kitcat</h1>
<a href="/" data-icon="home" data-iconpos="notext" rel="external" data-direction="reverse">Home</a>
</div>
    <div data-role="content">
        <ul data-role="listview" data-inset="true">
            <li data-role="list-divider">
                <h3>
                    Top Level</h3>
                <p>06 October 2012</p>
            </li>
                    <li data-role="list-divider">Item Header</li>                    
                        <li>
                            <a href="#"><h3>Item 1</h3>

                            <p>Monday</p>
                                            </a>
                            <div data-type="horizontal" data-role="controlgroup" class="ui-btn-right">  
                            <a href="index.html" data-role="button">Yes</a>
                            <a href="index.html" data-role="button">No</a>
                            <a href="index.html" data-role="button">Maybe</a>
                            </div>

                            <a href="#purchase" data-rel="popup" data-position-to="window" data-transition="pop">Purchase album</a>
                        </li>
                        <li>
                            <a href="#">
                            <h3>Item 2</h3>

                            <p>Doonday</p>
                                </a>
                            <div style="width:50%" data-type="horizontal" data-role="controlgroup" class="ui-btn-right">  
                            <a href="index.html" data-role="button">Yes</a>
                            <a href="index.html" data-role="button">No</a>
                            <a href="index.html" data-role="button">Maybe</a>
                            </div>

                        </li>
        </ul>
    </div>
    <div data-role="footer">
        <a data-rel="back">Back</a>
    </div>
</div>

    </body>
</html> 
```

# windows - WTL（Windows 模板库）是否仍在维护，我应该使用它在 C++ 中创建新的 Windows 程序吗？

> ID：12759972
> 
> 赞同：21
> 
> 时间：2012-10-06T12:51:28.450
> 
> 标签：windows, wtl

如果我仍然应该使用 WTL 来编写 Windows 应用程序，我有兴趣吗？我真的很喜欢它的编写方式，但有人知道它是否还在维护吗？（也许有人非官方维护了一个端口？）

如果不建议使用 WTL 编写新的 Windows 应用程序，那么我可以查找和使用哪些新框架？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-06T12:58:09.510

WTL 于 2004 年由 Microsoft 开源。从那时起，社区对其进行了更新。最新版本是在 2012 年 3 月。您可以从 sourceforge 查看最新版本、查看他们在做什么等。

我不明白为什么您不应该使用它来构建您的应用程序。

[http://sourceforge.net/projects/wtl/](http://sourceforge.net/projects/wtl/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-25T02:47:00.167

我自己使用 WTL。WTL 是原生 Win32 API 之上的一个薄层。它基于[ATL](https://en.wikipedia.org/wiki/Active_Template_Library)中包含的非常基本的窗口库。

对我来说，WTL 的优点是：它产生了非常轻量级和快速的 GUI 应用程序；如果你能关注[Petzold](https://rads.stackoverflow.com/amzn/click/com/B00CVE48VU "佩佐德")，你就能弄清楚 WTL。许多较新的 GUI 库使简单的事情变得容易，但是当您需要深入研究 Win32 奥秘时，根据我的经验，往往更多的是障碍而不是帮助。

一些缺点是：它仅适用于 Windows；它在很大程度上依赖于继承，所以你最终会得到繁琐的类层次结构；并且它支持多个带有#define 的 Windows 版本，因此您不能轻松使用可用的最新功能，同时优雅地回退到旧版本。

举一个最后一个缺点的例子，如果你想支持回到 Windows XP，那么与 Vista+ 对话框相比，你的文件对话框看起来会相当过时。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-06-17T17:38:57.917

我知道这是一个旧帖子。然而，对于那些阅读本文的人，他们可能有兴趣知道 Source forge 上 WTL 的最新版本日期为 2017 年 4 月 28 日。链接是[https://sourceforge.net/projects/wtl/](https://sourceforge.net/projects/wtl/)。

# winforms - 如何指定 ListView SelectionMode 属性？

> ID：12759975
> 
> 赞同：3
> 
> 时间：2012-10-06T12:51:46.220
> 
> 标签：winforms, listview, selection

我有一个 ListView，我想指定选择（项目）模式。在等效的 WPF 控件中有[ListView.SelectionMode](http://msdn.microsoft.com/en-us/library/system.windows.controls.listbox.selectionmode.aspx)属性。Windows 窗体是否有相同的属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T18:32:44.560

[ListView.MultiSelect](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.multiselect.aspx)：获取或设置一个值，该值指示是否可以选择多个项目。

# jquery - 如何使用jQuery在点击时设置类名

> ID：12759976
> 
> 赞同：0
> 
> 时间：2012-10-06T12:51:52.443
> 
> 标签：jquery

我的 HTML 中有这个列表：

```
<ul>
    <li class="active"></li>
    <li></li>
    <li></li>
    <li></li>
</ul> 
```

在这里，我希望只有单击`<li>`的类应该设置为“活动”。因此，当有人单击`<li>`应将类设置为活动的第二个元素时，应删除第一个元素。

如何使用 jQuery 做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T12:54:05.157

试试这个：

```
$('ul li').click(function(){
     $(this).addClass('active').siblings().removeClass('active')
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T12:56:20.147

从所选元素中删除类并添加新的：

```
$('li').click(function(){
  $('li.active').removeClass('active');
  $(this).addClass('active');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T12:56:25.120

```
$('ul').on('click','li',function(){
    $(this).addClass('active').siblings().removeClass('active');
});​ 
```

[在此处尝试演示。](http://jsfiddle.net/CGmkz/1/)

在此方法中，只会将*一个单击侦听*器添加到 ul 元素。这对你的表现有好处。

我希望这能解决你的问题。如果您有任何问题，请随时提问。谢谢

# linux - 添加标准路径以查找 .o 文件 gfortran

> ID：12759978
> 
> 赞同：1
> 
> 时间：2012-10-06T12:52:07.217
> 
> 标签：linux, fortran, gfortran

为了解决一些积分问题，我下载了 QUADPACK for fortran 并将所有源文件编译为目标文件。现在，当我想从 QUADPACK 调用子例程时，我需要手动链接它们或使用生成文件/脚本，这样就可以了。但是，由于我使用 QUADPACK 的多个例程和一系列不同的程序，如果我能让 gfortran 自动查找 .o 文件，我的生活会轻松很多。假设我有一个包含所有 .o 文件的目录，我想将其添加为 gfortran 查找目标文件的标准路径。这样我就可以在我的程序中调用一个子程序并编译它，而不必找出我需要的 witch .o 文件并手动链接它们。

我知道 -l 标志将解决问题，但我想知道是否有更简单/懒惰的方法来做到这一点。我在想也许我可以对编译器进行一些更改并重新制作它，但这并不是我真正想要开始搞砸的事情。

顺便说一句，我正在使用 Ubuntu。希望你们理解我的问题，并且有一个简单的解决方案。

PS：这是我现在这样做的方式，为了调用一个例程。

```
#!/bin/sh
gfortran -c int.f95
gfortran -o int int.o qagie.o qelg.o qk15i.o qpsrt.o r1mach.o xermsg.o j4save.o
xerprn.o xersve.o xerhlt.o xercnt.o fdump.o xgetua.o i1mach.o
./int 
```

如您所见，它只是一个用于编译和运行 int.f95 的简单 shell 脚本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T14:13:01.303

您可以创建一个库并将您的目标文件添加到其中。然后，当您使用 gfortran 作为链接器时，将该库（即 -l）传递给 gfortran。它只会提取它需要的目标文件。稍后，如果您更改了一个向库贡献了目标文件的源代码文件，您可以只替换库中的那个。网上有很多关于如何做到这一点的信息。

# macros - Twig：有条件地从宏返回

> ID：12759982
> 
> 赞同：5
> 
> 时间：2012-10-06T12:52:39.363
> 
> 标签：macros, return, twig

我想有条件地从宏返回，就像这个伪代码：

```
{% macro example() %}
    ...
    {% if condition %} {% return %} {% endif %}
    ...
{% endmacro %} 
```

这对 Twig 是否可行，也许使用 Twig 扩展？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T22:20:19.460

树枝中没有返回，但您可以将宏的其余部分包装在一个`if not condition`块中，如下所示：

```
{% macro example() %}
    ...
    {% if not condition %}
    ...
    {% endif %}
{% endmacro %} 
```

请记住，twig 是一种模板语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-04T22:02:11.473

这是示例：

```
{# macro #}

{% macro check(isTrue) %}
    {% if isTrue %}
        show-paywall
    {% else %}
        show-content
    {% endif %}
{% endmacro %}

{# usage #}
{% import _self as self %}

{% set per = self.check(true)|trim %}

{%  if per == 'show-paywall' %}

{{'Show paywall man.'}}

{% else %}

{{ 'You are good man.' }}

{% endif %} 
```

您可以在线玩： [https ://twigfiddle.com/etn6ef](https://twigfiddle.com/etn6ef)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-11T21:44:09.520

```
{% macro example(isTrue) %}
    {% if isTrue %}
        10
    {% else %}
        20
    {% endif %}
{% endmacro %}

{% import _self as self %}

{% set aaa = 3 + self.example(true) ~ '' %}
{{ aaa }}

{% set bbb = 3 + self.example(false) ~ '' %}
{{ bbb }} 
```

输出：

```
13

23 
```

# java - Xubuntu 上的 Java SystemLookAndFeel

> ID：12759988
> 
> 赞同：2
> 
> 时间：2012-10-06T12:53:45.310
> 
> 标签：java, swing

我在用

```
UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName()); 
```

在 try-catch 块内，以确保我的 Swing 应用程序在每个平台上看起来都是“原生的”。这一直适用于 linux、Mac 和 Windows。我刚买了一台运行 Xubuntu 的新机器，虽然这个语句不会导致错误，但我的 GUI 不喜欢原生的；相反，它看起来像 Java（金属？）主题。这是我的操作系统的问题吗？我能做些什么来解决它？相同的程序在 Windows 和 Mac 上似乎运行良好并且看起来很原生。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T14:13:20.067

使用源 Luke :) 如果您查看 UIManager.getSystemLookAndFeelClassName() 的源代码，您将看到对 gnome 桌面的检查，运行 Xubuntu 时并非如此，Xubuntu 不是在运行 gnome，而是在 xfce 桌面环境

# facebook - 有什么方法可以获取喜欢某个页面的 facebook 用户 id 吗？

> ID：12759989
> 
> 赞同：1
> 
> 时间：2012-10-06T12:53:49.510
> 
> 标签：facebook, api, facebook-graph-api

在[Graph API Explorer 页面](http://developers.facebook.com/tools/explorer/#!/tools/explorer)中，使用此命令“rahmanismcom”，我可以获得收到的点赞总数。使用此命令“rahmanismcom/likes”，我可以获得喜欢的页面喜欢的详细信息。有什么方法可以获取至少他们的 id 的用户详细信息，谁喜欢这个页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T13:39:22.210

除非您对该页面具有特殊权限，否则似乎不太可能：

[我可以访问喜欢 Facebook 页面的人的个人资料（不属于我）](https://stackoverflow.com/questions/4536631/can-i-access-profiles-of-people-who-like-a-facebook-pagenot-owned-by-me)

不过有一些解决方法：

[Facebook API：获取喜欢页面的粉丝/人](https://stackoverflow.com/questions/4018849/facebook-api-get-fans-of-people-who-like-a-page)

# android - 将 MYSQL 转换为 Android 的 SQLITE 数据库

> ID：12759992
> 
> 赞同：1
> 
> 时间：2012-10-06T12:54:19.333
> 
> 标签：android, mysql, database, sqlite

我有一个“.Sql”格式的数据库。我想将此数据库转换为“.sqlite”格式。因为我必须在我的 android 应用程序中使用这个 16MB 的数据库。

我在互联网上搜索过，但找不到我期望的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T13:16:49.790

MySQL 比 SQLite 具有更多的功能和特性，这使得它们之间有时难以切换。

如果您的架构足够简单（阅读：不包含 SQLite 没有的很多功能），您可以将其转储到 SQL 文件中并尝试将其导入 SQLite 数据库。

转换器也有几次尝试......你可以在[这里](http://www.sqlite.org/cvstrac/wiki?p=ConverterTools)找到一个列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T14:55:03.520

这里有一些软件可以帮助你解决这个问题。我使用了 shell 脚本，它就像一个魅力。

[http://www.sqlite.org/cvstrac/wiki?p=ConverterTools](http://www.sqlite.org/cvstrac/wiki?p=ConverterTools)

我也做了，这是一种解决方法，但也对我有用。如果您有数据库和 phpmyadmin，请转到 phpmyadmin 中的数据库，选择每个表，然后选择 expoert。在导出类型中选择打开文档电子表格。在选项中选择“将字段名称放在第一行”并保存。保存后，在 Open Office 中打开文档并将其保存为 csv，从 SQLite 编辑器中选择从 CSV 导入并选择此 CSV 文件。我在 Mac 上使用 SQLite 数据库浏览器，以这种方式转换 mysql 没有问题。

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T01:57:57.903

Gist 上有一个[很棒的 Linux shell 脚本，](https://gist.github.com/943776/)可以将 Mysql 转换为 Sqlite3 文件。您需要在服务器上安装 mysqldump 和 sqlite3。适用于我所有的 Android 应用程序。