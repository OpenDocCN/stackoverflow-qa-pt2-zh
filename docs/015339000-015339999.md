# StackOverflow 问答 15339000-15339999

# javascript - BackboneJS：模型验证中的 collection.pluck()

> ID：15339000
> 
> 赞同：2
> 
> 时间：2013-03-11T12:49:21.690
> 
> 标签：javascript, backbone.js, requirejs

我希望我的模型验证重复条目，因此我需要在模型中访问集合。

我将 Backbone.JS 与 Require.JS 一起使用，这使它更加混乱。我似乎无法将我的集合加载为模块的依赖项。

我尝试在视图中进行验证，但我想最好的做法是将验证保留在应该在的模型中。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T13:30:21.297

来自 Backbone Collection[文档](http://backbonejs.org/#Collection-add)：

> 如果您将模型添加到集合中已经存在的集合中，它们将被忽略，除非您传递 {merge: true} ...

[- 方法中的](http://backbonejs.org/docs/backbone.html#section-77)哪个`add`转换为：

```
if (existing = this.get(model)) {
  if (options.merge) {
    existing.set(attrs === model ? model.attributes : attrs, options);
    if (sort && !doSort && existing.hasChanged(sortAttr)) doSort = true;
  }
  continue;
} 
```

基本上，这将胜过添加任何具有重复`id`,`cid`或`idAttribute`.

如果这还不够，那么我建议您在视图中进行验证，因为将模型的集合作为对该确切模型的依赖项会引入循环依赖项，例如。您需要集合才能编译模型，但您还需要模型来编译集合。

因此，如果您需要确保没有将模型添加到具有与该集合中已有模型完全相同的属性的集合中，请在视图中执行此操作。它看起来像这样：

```
if (collection.where(modelToBeAdded.toJSON()).length == 0) {
  collection.add(modelToBeAdded);
} 
```

# vba - VBA 中的文件搜索

> ID：15339006
> 
> 赞同：4
> 
> 时间：2013-03-11T12:49:37.417
> 
> 标签：vba, excel, dir

我编写了一个浏览所有路径文件夹并搜索“strings.xml”文件的 vba 代码。

```
Dim oFS As Office.FileSearch
Dim i As Integer
Set oFS = Application.FileSearch

With oFS
    .NewSearch
    .FileType = msoFileTypeAllFiles
    .Filename = "strings.xml"
    .LookIn = "D:\Workspace"
    .SearchSubFolders = True
    .Execute

    MsgBox "Finish ! " & .FoundFiles.Count & " item found !"
End With 
```

但是，在我的工作区中，我有许多当前代码所在的“strings.xml”文件，但我只想在特定的子文件夹中找到“strings.xml”；例如`./values/strings.xml` 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-06T10:04:29.347

以下将在您的根工作文件夹下递归查找`Values\Strings.xml`匹配项并将它们列出在[Scripting.Dictionary](https://msdn.microsoft.com/en-us/library/office/gg251825.aspx)对象中。

主要文件/文件夹搜索由简单的[Dir 函数](https://msdn.microsoft.com/en-us/library/office/gg278779.aspx)执行。

```
Sub dir_ValuesStringsXML_list()
    Dim f As Long, ff As String, fp As String, fn As String, tmp As String
    Dim vfn As Variant, dFILEs As Object    'New scripting_dictionary

    Set dFILEs = CreateObject("Scripting.Dictionary")
    dFILEs.CompareMode = vbTextCompare

    'set vars for c:\temp\Workspace\*\Values\Strings.xml
    fp = Environ("TMP") & Chr(92) & "Workspace"
    ff = "Values"
    fn = "Strings.xml"
    dFILEs.Item(fp) = 0

    'get folder list
    Do
        f = dFILEs.Count
        For Each vfn In dFILEs
            If Not CBool(dFILEs.Item(vfn)) Then

                tmp = Dir(vfn & Chr(92) & Chr(42), vbDirectory)
                Do While CBool(Len(tmp))
                    If Not CBool(InStr(1, tmp, Chr(46))) Then
                        dFILEs.Item(vfn & Chr(92) & tmp) = 0
                    End If
                    tmp = Dir
                Loop
                'Debug.Print dFILEs.Count
                dFILEs.Item(vfn) = 1
            End If
        Next vfn
    Loop Until f = dFILEs.Count

    'remove the folders and check for Values\Strings.xml
    For Each vfn In dFILEs
        If CBool(dFILEs.Item(vfn)) Then
            If LCase(Split(vfn, Chr(92))(UBound(Split(vfn, Chr(92))))) = LCase(ff) And _
               CBool(Len(Dir(vfn & Chr(92) & fn, vbReadOnly + vbHidden + vbSystem))) Then
                dFILEs.Item(vfn & Chr(92) & fn) = 0
            End If
            dFILEs.Remove vfn
        End If
    Next vfn

    'list the files
    For Each vfn In dFILEs
        Debug.Print "from dict: " & vfn
    Next vfn

    dFILEs.RemoveAll: Set dFILEs = Nothing

End Sub 
```

* * *

[如果您希望将 Scripting.Dictionary 的后期绑定转换为早期绑定，您必须将**[Microsoft Scripting Runtime](https://msdn.microsoft.com/en-us/library/hww8txat.aspx)**添加到 VBE 的工具 ► 参考中。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-16T08:22:20.230

代替：

```
sPath = "D:\Workspace\values" 'Change Path
sFil = Dir(sPath & "string.xml") 'All files in Directory matching name 
```

和：

```
sPath = "D:\Workspace\values\" 'Change Path
sFil = Dir(sPath & "*.xl*") 'All files in Directory matching name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T13:05:01.387

我想你是说你想在子文件夹“\values”中查找名为**strings.xms的文件**

如果这是正确的，请尝试以下修改后的代码：

```
Dim oFS As Office.FileSearch
Dim i As Integer
Set oFS = Application.FileSearch

With oFS
    .NewSearch
    .FileType = msoFileTypeAllFiles
    .Filename = "strings.xml"
    .LookIn = "D:\Workspace\values"
    .SearchSubFolders = True
    .Execute

    MsgBox "Finish ! " & .FoundFiles.Count & " item found !"
End With 
```

当然，您可能不想指定子文件夹。

这是另一种选择：

```
Dim sPath As String 
Dim sFil As String 
Dim strName As String 

sPath = "D:\Workspace\values" 'Change Path
sFil = Dir(sPath & "string.xml") 'All files in Directory matching name

Do While sFil <> "" 
    strName = sPath & sFil 
    sFil = Dir 
     'Your Code Here.
    i=i+1
Loop 

MsgBox "Finish ! " & .FoundFiles.Count & " item found !" 
```

您是否考虑过使用 FileSystemObject 仅在子文件夹中进行递归搜索？

[MSDN - 如何使用 FileSystemObject 进行递归搜索](http://support.microsoft.com/kb/185601)

高温高压

菲利普

# c# - 使用字符串 c# 检查版本

> ID：15339007
> 
> 赞同：-2
> 
> 时间：2013-03-11T12:49:38.007
> 
> 标签：c#, visual-studio

编辑：

我要如何检查的简单示例：

我有一个`string`包含：“0101”。

我想检查它`string`是否至少为 0101 或更高，而不将其转换为`int`，因为这会将我的更改`string`为：101。

编辑：

答案如下所示：

```
 private void VersionCheck(string version)
        {
            string firmwareVersion = version.Substring(0, 4);
            string biosVersion = version.Substring(4, 4);

            var isEqualOrHigherFirmwareVersion = string.Compare(firmwareVersion, Settings.MinimalFirmwareUnikon, CultureInfo.InvariantCulture, CompareOptions.None) >= 0;

        if (!isEqualOrHigherFirmwareVersion)
        {
            _serial.ClosePortConnection();
            DisplayLog("CLOCK: Firmware NOT OK : Unsupported version");
        MessageBox.Show("Unsupported clock Firmware!", "Firmware", MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
        else
        {
            DisplayLog("CLOCK: Firmware OK : v" + firmwareVersion.ToString());
        }

        var isEqualOrHigherBiosVersion = string.Compare(biosVersion,     `Settings.MinimalBiosUnikon, CultureInfo.InvariantCulture, CompareOptions.None) >= 0;`

        if (!isEqualOrHigherBiosVersion)
        {
            _serial.ClosePortConnection();
            DisplayLog("CLOCK: BIOS NOT OK : Unsupported version");
            MessageBox.Show("Unsupported clock BIOS version!", "BIOS", MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
        else
        {
            DisplayLog("CLOCK: BIOS OK : v" + biosVersion.ToString());
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T13:13:12.667

```
var input = "0102";
var supportedVersion = "0101";
var isGreaterOrHigher = string.Compare(input, supportedVersion, 
                    CultureInfo.InvariantCulture, CompareOptions.None) >= 0; 
```

但是有什么问题`int.Parse/int.TryParse`呢？

# php - PHP Levenshtein on Query Result

> ID：15339012
> 
> 赞同：0
> 
> 时间：2013-03-11T12:49:44.780
> 
> 标签：php, mysql, arrays, levenshtein-distance

I want to perform a levenshtein on a mysql query result.

The query looks like this:

```
$query_GID = "select `ID`,`game` from `gkn_catalog`";
$result_GID = $dbc->query($query_GID);
$row_GID = mysqli_fetch_array($result_GID,MYSQLI_ASSOC); 
```

And here I prepare everything for the levenshtein operation:

```
$shortest = -1;
$input = $game_title; 
```

And this is just the levenshtein operation from the manual:

```
 foreach ($row_GID as $row) {
$word = $row['game'];

// calculate the distance between the input word,
// and the current word
$lev = levenshtein($input, $word);

// check for an exact match
if ($lev == 0) {
// closest word is this one (exact match)
$closest = $word;
$shortest = 0;

// break out of the loop; we've found an exact match
break;
}
// if this distance is less than the next found shortest
// distance, OR if a next shortest word has not yet been found
if ($lev <= $shortest || $shortest < 0) {
// set the closest match, and shortest distance
$closest  = $word;
$shortest = $lev;
}
}
echo "Input word: $input\n";
if ($shortest == 0) {
echo "Exact match found: $closest\n";
} else {
echo "Did you mean: $closest?\n";
} 
```

Thanks to Jaitsu I got rid of the error/warning message, however the levenshtein is now throwing an unexpected result:

Whatever the input is, it won't ever find a matching result and the closest match will always be = **H**

Examples:

> Input word: Battlefield 3 Back to Karkand Did you mean: H?
> Input word: Starcraft 2 Wings of Liberty Did you mean: H?

To be honest, I don't have a clue what#s going on right now...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:57:56.267

Your logic for fetching the games (words) from your database is correct, but you need to remove...

`$words = $row_GID['game'];`

and pass in the `$row_GID` variable to your loop.

Then in your `foreach` loop...

```
foreach ($row_GID as $row) {
    $word = $row['game'];
    //proceed as normal
} 
```

# c++ - 将 C11 Annex K 的 sprintf_s 转换为 C99 snprintf

> ID：15339013
> 
> 赞同：1
> 
> 时间：2013-03-11T12:49:46.400
> 
> 标签：c++, visual-c++

我`sprintf_s`以这种格式将函数转换为 C99。只是想确保，结果是一样的：

```
sprintf_s(char_star,"%08X",some_int); 
```

char_star 的大小为 8。它转换`some_int`为 8 个字节的`char_star`.

那么我在 C99 中所做的正确吗？我使用了以下函数之一，虽然这些 C99 函数和 C11 Annex K 的输出`sprintf_s`不一样

```
char str[9];
snprintf (str, 8, "%08x", i );
//      sprintf(str, "%08x", i);
QByteArray built(str, 8);
qDebug() << built.toHex(); 
```

在 MFC 中，它给了我这个包和 sprintf

```
30 30 30 31 30 30 44 43 
```

在 C99 (linux glibc) `sprintf(str, "%08x", i)`中给出

```
30 30 30 31 30 30 64 63 
```

你知道问题出在哪里吗？

这是整个功能：

```
bool BuildAnglePacket(char* WR_PacketAZAngle, float AZAngle)
{

    WR_PacketAZAngle[0] = 0x04;
    WR_PacketAZAngle[1] = 0x30;
    WR_PacketAZAngle[2] = 0x31;
    WR_PacketAZAngle[3] = 0x02;
    WR_PacketAZAngle[4] = 0x79;
    WR_PacketAZAngle[5] = 0x4E;
    WR_PacketAZAngle[6] = 0x48;

    int  XOR;
    char HAnlge[9];
    int iAzimuthAngle;

    if (AZAngle >= -22.5 &&  AZAngle <= 22.5 )
    {

        iAzimuthAngle = AZAngle*10;

        if( AZAngle < 0)
        {

            iAzimuthAngle= abs(iAzimuthAngle);
            iAzimuthAngle=((~iAzimuthAngle)&0xFFFF) + 1 ;
        }

        iAzimuthAngle=65536 + iAzimuthAngle;

        sprintf(HAnlge,"%08x", iAzimuthAngle);

        WR_PacketAZAngle[7]  = HAnlge[0];
        WR_PacketAZAngle[8]  = HAnlge[1];
        WR_PacketAZAngle[9]  = HAnlge[2];
        WR_PacketAZAngle[10] = HAnlge[3];
        WR_PacketAZAngle[11] = HAnlge[4];
        WR_PacketAZAngle[12] = HAnlge[5];
        WR_PacketAZAngle[13] = HAnlge[6];
        WR_PacketAZAngle[14] = HAnlge[7];
        WR_PacketAZAngle[15] = 0x03;

        for(int i=4;i<16;i++)
            XOR ^= WR_PacketAZAngle[i];

        WR_PacketAZAngle[16] = XOR;
        WR_PacketAZAngle[17] ='\x0';
    }

    return true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:53:02.417

的大小`char_star`应该至少`9`有一个空间可以存放最后一个`\0`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-06T16:06:33.350

利用

sprintf_s(char_star,"%08x",some_int);

得到相同的结果。格式选项 x 和 X 不同！

# arraylist - 在 Talend 的 Arraylist 中存储值

> ID：15339016
> 
> 赞同：1
> 
> 时间：2013-03-11T12:49:48.833
> 
> 标签：arraylist, talend

我正在迭代地从 XML 中读取一系列值，tFlowToIterate->tFixedFlowInput。

我想将这些值存储在 Arraylist 中，例如 myArrlist，如 myArrList[0]、myArrList[1]、myArrList[2] 等等。

如何在 Talend 中全局定义 myArrList 以便我可以不断增加索引并继续将值附加到我的 Arraylist？

谢谢。

在线的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-28T09:43:42.760

Put the ArrayList into the globalMap

```
globalMap.put("myList", myArrlist); 
```

and get it whenever you want it

```
ArrayList<??> ml = (ArrayList<??>)globalMap.get("myList"); 
```

# linux - accept_local doesn't work

> ID：15339018
> 
> 赞同：1
> 
> 时间：2013-03-11T12:49:53.763
> 
> 标签：linux, local, routes

I want send out data from one NIC and received by another NIC on a CENTOS6.4( X86 frame ,3 NIC, one is onboard realtek's, the other two is intel NICs ).

First,I configured intel nic ip: (eth0) 192.168.1.1/24 and (eth1) 192.168.1.2/24 on two intel NICs.

Second, I add route by following cmds:

```
# route add -host 192.168.1.1 dev eth1
# route add -host 192.168.1.2 dev eth0 
```

Third, I enabled accept_local in /etc/sysctl.conf:

```
net.ipv4.conf.eth0.accept_local = 1
net.ipv4.conf.eth1.accept_local = 1 
```

And I also disabled iptables and SElinux. I reboot the system, then use a wire connect eth0 and eth1, then I test like this:

```
#ping 192.168.1.1 -I eth1 
```

Message returned:

```
"From 192.168.1.2 icmp_seq=xx Destination Host Unreachable" 
```

Has I missed something?

I have read this topic [How can configure linux routing to send packets out one interface, over a bridge and into another interface on the same box](https://stackoverflow.com/questions/11679814/how-can-configure-linux-routing-to-send-packets-out-one-interface-over-a-bridge/11680024#11680024) already.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-19T05:22:01.440

尝试设置`sysctl -w net.ipv4.conf.all.rp_filter=2`

参考[https://www.kernel.org/doc/Documentation/networking/ip-sysctl.txt](https://www.kernel.org/doc/Documentation/networking/ip-sysctl.txt)

```
accept_local - BOOLEAN
    Accept packets with local source addresses. In combination
    with suitable routing, this can be used to direct packets
    between two local interfaces over the wire and have them
    accepted properly.

    rp_filter must be set to a non-zero value in order for
    accept_local to have an effect.

rp_filter - INTEGER
    0 - No source validation.
    1 - Strict mode as defined in RFC3704 Strict Reverse Path
        Each incoming packet is tested against the FIB and if the interface
        is not the best reverse path the packet check will fail.
        By default failed packets are discarded.
    2 - Loose mode as defined in RFC3704 Loose Reverse Path
        Each incoming packet's source address is also tested against the FIB
        and if the source address is not reachable via any interface
        the packet check will fail.

    Current recommended practice in RFC3704 is to enable strict mode
    to prevent IP spoofing from DDos attacks. If using asymmetric routing
    or other complicated routing, then loose mode is recommended.

    The max value from conf/{all,interface}/rp_filter is used
    when doing source validation on the {interface}.

    Default value is 0\. Note that some distributions enable it
    in startup scripts. 
```

# jquery - 使用jquery append重复克隆隐藏的html

> ID：15339031
> 
> 赞同：4
> 
> 时间：2013-03-11T12:50:19.070
> 
> 标签：jquery, append, clone

我有一个表单，我需要有选择地一遍又一遍地重复（克隆和附加到）一大块表单字段。

所以，我所做的是将我想要复制的代码放在页面中的一个隐藏的 div 中，然后我基本上希望用户能够单击一个显示“添加”的按钮并添加这些空白根据需要多次在最后一批下的表单字段。

我要克隆的html如下：

```
 <div style="display: none;">
        <div class="grab-me">
          <input name="foo[]" />
          <input name="bar[]" />
          <input name="oth[]" />
        </div>
 </div> 
```

我现在的jquery是：

```
$(function(){
        $('.add-member').live("click", function(e){
            e.preventDefault(e);
            var grab = $('.grab-me');
            grab.appendTo('#register');

        });
    }); 
```

但是这样做是在每次单击按钮时复制表单字段。所以我点击一次，它按预期添加了一次表单字段。再次点击按钮，这次添加了两次表单域，再次点击，添加了三组表单域！

我只希望它在每次单击时一次添加一组表单字段。

任何建议都将非常感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T13:02:51.803

那是因为一旦它被复制，你就会有两个`.grab-me`元素。您应该在克隆元素后删除该类：

```
var grab = $('.grab-me')
    .clone()
    .removeClass('grab-me')
    .appendTo('#register'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:54:29.303

您可以做几件事，我想到的最简单的方法是添加 .first() 调用：

```
$(function(){
        $('.add-member').live("click", function(e){
            e.preventDefault(e);
            var grab = $('.grab-me').first().clone();
            grab.appendTo('#register');
        });
}); 
```

您遇到的问题是在您第一次添加它之后，您最终会得到两个具有 .grab-me 类的 div，因此您的 jquery 会同时抓取两者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T12:58:06.953

$('.grab-me').eq(0) 只得到一个表格（第一个表格带有grab-me类）

```
$(function(){
        $('.add-member').live("click", function(e){
            e.preventDefault(e);
            var grab = $('.grab-me').eq(0);
            grab.appendTo('#register');

        });
    }); 
```

# php - Adding a base64 encoded image as a attachment in mailto()

> ID：15339032
> 
> 赞同：3
> 
> 时间：2013-03-11T12:50:20.210
> 
> 标签：php, javascript, jquery, canvas, mailto

I am using a Canvas on which user draws. And i do have a E-Mail link beside it I want that when the E-Mail is clicked the canvas is coverted in to image and that image is to be e-mailed as a attachment.

So far i've converted the canvas in to image using

`var image = canvas.toDataURL();` It gives a base64 encoded image.

On E-Mail link `<a href="mailto:abc@domain.com?subject=my report&body=see attachment&attachment="image" ">E-Mail</a>`

But this gives me the base64 encoded string in the body of the mail.

Is there any way out to attach the image as a attachment in mail using javascript,php,jquery or anything else??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:26:01.300

您将需要在服务器端做一些事情来完成这项工作。我的建议是这样的：

1.  用户单击将图像数据推送到服务器的电子邮件链接/按钮。
2.  在服务器端，图像数据被保存到一个临时文件中。
3.  临时文件附加到电子邮件并发送给用户。
4.  然后删除临时文件。

至于您将如何具体执行此操作...我认为大多数步骤都很直观，但是您将需要一些方法来轻松地邮寄附件。有很多解决方案，但如果你不介意一些无耻的自我推销，请查看我的 PHP 邮件脚本：

[https://github.com/stlewis/Mail](https://github.com/stlewis/Mail)

它非常易于使用，并且支持所有类型的附件。

# variables - set() 自 2.1 版起已弃用，而是访问公共属性 'vars'

> ID：15339033
> 
> 赞同：0
> 
> 时间：2013-03-11T12:50:22.563
> 
> 标签：variables, symfony, symfony-2.1, public, var

我一直在寻找其他有此 symfony 2.1.8 到 2.2.0 升级折旧警告的用户：

> set() 自 2.1 版起已弃用，而是访问公共属性 'vars'

我目前无法在官方文档或互联网上找到任何内容。有人可以使用公共属性变量举例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:56:59.077

根据消息，您要添加信息的变量是`public`，因此您不需要使用`set()`函数来添加值。

代替 ：

```
$object->set('name', 'value'); 
```

只需使用：

```
$object->vars['name'] = 'value'; 
```

# hadoop - Oozie 协调员。如何将过去的数据提供给 mapreduce 作业？

> ID：15339036
> 
> 赞同：4
> 
> 时间：2013-03-11T12:50:26.167
> 
> 标签：hadoop, mapreduce, oozie

我正在尝试创建 Ooize 协调器。问题是我已经有暂存数据等待使用 oozie 进行处理。

想象一下这样的情况。

1.  当前日期是：01.03.2013（2013年3月1日）

2.  我确实有这些输入目录：

    /staging/landing/source/xvlr/2013/02/01/00（2013 年 2 月 1 日，一天的第一个小时） /staging/landing/source/xvlr/2013/02/01/01

    /staging/landing/source/xvlr/2013/02/01/02

    /staging/landing/source/xvlr/2013/02/01/03

    /staging/landing/source/xvlr/2013/02/01/04

    ……

    /登台/登陆/来源/xvlr/2013/02/28/00

    ...

    /登台/登陆/来源/xvlr/2013/02/28/23

我希望我的 oozie 协调器使用所有以前创建的着陆数据并产生这样的输出：

```
/masterdata/source/xvlr/2013/02/01/00 
/masterdata/source/xvlr/2013/02/01/01
/masterdata/source/xvlr/2013/02/01/02
/masterdata/source/xvlr/2013/02/01/03
/masterdata/source/xvlr/2013/02/01/04
....
/masterdata/source/xvlr/2013/02/28/00
...
/masterdata/source/xvlr/2013/02/28/23 
```

然后我希望我的协调员每小时运行一次并为 masterdata 生成新的输出。

我如何使用协调器规范来做到这一点？这是我的协调员。它什么也不做。它确实达到了我需要的时间，然后等待。它不会开始工作。

请指教。

```
<coordinator-app name="Xvlr-parser-coordinator" frequency="60"
                 start="2013-03-07T05:35Z" end="2113-01-01T00:35Z" timezone="Europe/Moscow"  xmlns="uri:oozie:coordinator:0.3">
    <controls>
        <timeout>5</timeout>
        <concurrency>4</concurrency>
    </controls>

    <datasets>
        <dataset name="xvlrInputDataset" frequency="${coord:hours(1)}" initial-instance="2013-03-07T05:35Z" timezone="Europe/Moscow">
            <uri-template>${nameNode}/staging/landing/source/xvlr/${YEAR}/${MONTH}/${DAY}/${HOUR}</uri-template>
            <done-flag></done-flag>
        </dataset>
        <dataset name="xvlrOutputDataset" frequency="${coord:hours(1)}" initial-instance="2013-03-07T05:35Z" timezone="Europe/Moscow">
            <uri-template>${nameNode}/masterdata/source/xvlr/archive/${YEAR}/${MONTH}/${DAY}/${HOUR}</uri-template>
            <done-flag></done-flag>
        </dataset>

    </datasets>

    <input-events>
        <data-in name="xvlrInputEvent" dataset="xvlrInputDataset">
            <instance>${coord:current(0)}</instance>
        </data-in>
    </input-events>

    <output-events>
        <data-out name="xvlrOutputEvent" dataset="xvlrOutputDataset">
            <instance>${coord:current(0)}</instance>
        </data-out>
    </output-events>
    <action>
        <workflow>
            <app-path>${oozieAppHomeCatalog}/sub-workflows/Xvlr-parser-subworkflow.xml</app-path>
            <configuration>
                <property>
                    <name>inputDir</name>
                    <value>${coord:dataIn('xvlrInputEvent')}</value>
                </property>
                <property>
                    <name>outputDir</name>
                    <value>${coord:dataOut('xvlrOutputEvent')}</value>
                </property>

            </configuration>

        </workflow>
    </action>
</coordinator-app> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T06:34:01.110

这是正确的解决方案（它可以工作几天:)）））：

```
<coordinator-app name="Xvlr-parser-coordinator" frequency="60"
                 start="2013-03-07T16:35Z" end="2113-01-01T00:35Z" timezone="Europe/Moscow"  xmlns="uri:oozie:coordinator:0.3">
    <controls>
        <timeout>3</timeout>
        <concurrency>1</concurrency>
    </controls>

    <datasets>
        <dataset name="xvlrInputDataset" frequency="${coord:hours(1)}" initial-instance="2013-03-07T16:35Z" timezone="Europe/Moscow">
            <uri-template>${nameNode}/staging/landing/source/xvlr/${YEAR}/${MONTH}/${DAY}/${HOUR}</uri-template>
            <done-flag></done-flag>
        </dataset>
        <dataset name="xvlrOutputDataset" frequency="${coord:hours(1)}" initial-instance="2013-03-07T16:35Z" timezone="Europe/Moscow">
            <uri-template>${nameNode}/masterdata/source/xvlr/archive/${YEAR}/${MONTH}/${DAY}/${HOUR}</uri-template>
            <done-flag></done-flag>
        </dataset>

    </datasets>

    <input-events>
        <data-in name="xvlrInputEvent" dataset="xvlrInputDataset">
            <instance>${coord:current(0)}</instance>
        </data-in>
    </input-events>

    <output-events>
        <data-out name="xvlrOutputEvent" dataset="xvlrOutputDataset">
            <instance>${coord:current(0)}</instance>
        </data-out>
    </output-events>
    <action>
        <workflow>
            <app-path>${oozieAppHomeCatalog}/sub-workflows/Xvlr-parser-subworkflow.xml</app-path>
            <configuration>
                <property>
                    <name>inputDir</name>
                    <value>${coord:dataIn('xvlrInputEvent')}</value>
                </property>
                <property>
                    <name>outputDir</name>
                    <value>${coord:dataOut('xvlrOutputEvent')}</value>
                </property>
            </configuration>

        </workflow>
    </action>
</coordinator-app> 
```

它有什么作用？

*   起初它确实开始于**2013-03-07T16:35Z**，因此所有以前
    收集的数据都已通过底层工作流（具有解析功能的 mr-job 调用）
    *   在使用“过去时间数据集”（数据集时间小于当前时间）时，工作流正在逐一运行：它确实消耗了 /pastdate/hour_00，然后它立即开始消耗 /pastdate/hour_01 等
    *   当协调器到达当前时间时，它开始每小时调用工作流（按设计：05:35、06:35... 23:35）。
    *   请参阅超时声明：我确实缺少数据集：例如，3 月 1 日的第 10 个小时没有数据。工作流确实等待了 3 分钟，然后死了。

问题已经解决了。

# javascript - How to pass a function inside a directive in AngularJS

> ID：15339041
> 
> 赞同：3
> 
> 时间：2013-03-11T12:50:33.297
> 
> 标签：javascript, html, angularjs

I have created `on-blur` directive for user that blurs out from the input field

```
<input type="text" on-blur="doSomething({{myObject}})"> 
```

myObject looks like:

```
myObject = {a : foo, b : bar ... } 
```

this is how my directive currently looks like:

```
 myModule.directive('onBlur',function(){
    return {
        restrict: 'A',
        link: function(scope,element,attrs) {
            element.bind('blur',function(){
                console.log('blurrred');
            });

        }
    }
}); 
```

**How do I execute the function doSomething({{myObject}})** when the blur event is triggered?

I've tried doing something like this that has failed to work:

```
...
            element.bind('blur',function(){
                console.log('blurrred');
                doSomething(object);
            });
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:57:40.977

您可以在链接函数内部调用：`scope.doSomething()`. 要评估表达式，您可以这样做：`scope.$eval(expression)`，要访问范围对象，只需使用：`scope.myObject`。

当然，这只适用于非独立工作的指令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T13:01:16.953

您的 ng-blur 缺少范围。$apply。它没有引用您的回调函数，并且您的回调函数需要在当前范围内定义：

JS：

```
var app = angular.module('plunker', []);
app.controller('AppController',
    [
      '$scope',
      function($scope) {
        $scope.myObject = {a: 'foo', b: 'bar'};

        $scope.doSomething = function(item){
          console.log(item);
        };
      }
    ]
  );

app.directive('ngBlur', function() {
  return function( scope, elem, attrs ) {
    elem.bind('blur', function() {
      scope.$apply(attrs.ngBlur);
    });
  };
}); 
```

HTML：

```
<div ng-controller="AppController">
  <input ng-blur="doSomething(myObject)" />  
</div> 
```

[工作笨拙](http://plnkr.co/edit/Eizdwyi0HLJG0RzJRRqF)。

# c++ - MoveFile() Works, but returns error 2 (file not found)

> ID：15339045
> 
> 赞同：1
> 
> 时间：2013-03-11T12:50:42.093
> 
> 标签：c++, winapi, movefileex

I'm using the function Movefile() (in C). I can see the file moved from the source folder to the destination (means the MoveFile success) but when I do GetLastError() I get error no. 2 (ERROR_FILE_NOT_FOUND).

What can be the problem?

The code is:

```
_snprintf(szSrcPath, MAX_PATH, "%s/%s/%s.jpg", NPath, imagePathFromAdmin, username);
_snprintf(szDestPath, MAX_PATH, "%s/Images/Storage/%s/%d/%s.jpg", NPath, domain, sub_folder, username);
strcpy(imagePathStorgae,szDestPath);
MoveFile(szSrcPath,szDestPath);
err=GetLastError(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T12:54:56.300

如果函数成功，*则不*获取错误代码，该值无效。而是检查实际函数返回的值（即`MoveFile`函数返回值），如果这表明发生了错误，*那么*您可以检查错误是什么。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-11T12:54:37.550

`GetLastError`只有当 API 函数调用报告失败时，您才需要调用。`CopyFile`检查和的返回值`MoveFile`。如果其中任何一个返回`FALSE`，则 API 调用失败，然后，只有这样，调用`GetLastError`.

[文档](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa365239.aspx)是这样说的：

> **返回值**
> 
> 如果函数成功，则返回值非零。
> 
> 如果函数失败，则返回值为零。要获取扩展的错误信息，请调用`GetLastError`。

发生的事情是`MoveFile`成功并且不会修改最后一个错误值。然后，当您调用`GetLastError`它时，它会为对 API 函数的其他调用返回一个错误代码，这发生在您调用`MoveFile`. 你应该这样写代码：

```
if (!MoveFile(szSrcPath,szDestPath))
{
    DWORD err = GetLastError();
    // handle the error
} 
```

# c# - When a cell is empty I want to show message, otherwise run a process

> ID：15339046
> 
> 赞同：0
> 
> 时间：2013-03-11T12:50:46.557
> 
> 标签：c#, winforms, datagridview

```
private void dgvComp_CellValidating(object sender, DataGridViewCellValidatingEventArgs e)
    {
        if (dgvComp.Rows[dgvComp.CurrentRow.Index].Cells["EmplId"].ToString() != "")
        {
            if (dgvComp.Columns[e.ColumnIndex].Name == "EmplId")
            {

                {

                    DataTable dt = new DataTable();

                    string auto = dgvComp.Rows[e.RowIndex].Cells["EmplId"].EditedFormattedValue.ToString();
                    dt = dataAcc.rtrvData("empl_Name,empl_Id,desg_Name", "dbo.Empldmgrphcs INNER JOIN  dbo.Designation ON dbo.Empldmgrphcs.desg_Id = dbo.Designation.desg_Id ", "empl_EmpId='" + auto + "'");
                    dgvComp.Rows[e.RowIndex].Cells["dgvname"].Value = dt.Rows[0][0].ToString();
                    dgvComp.Rows[e.RowIndex].Cells["empID"].Value = dt.Rows[0][1].ToString();
                    dgvComp.Rows[e.RowIndex].Cells["dgvdesi"].Value = dt.Rows[0][2].ToString();
                }
            }
        }
    } 
```

The above code is what I am using to fill the `DataGridView`, but when a cell is empty I am getting error.

How can I handle a condition for having an empty cell?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:02:46.467

```
private void dgvComp_CellValidating(object sender, DataGridViewCellValidatingEventArgs e)
{
   if (dgvComp.Rows[dgvComp.CurrentRow.Index].Cells["EmplId"].ToString() != "")
   {
      if (dgvComp.Columns[e.ColumnIndex].Name == "EmplId")
      {
         {
            DataTable dt = new DataTable();

            string auto = dgvComp.Rows[e.RowIndex].Cells["EmplId"].EditedFormattedValue.ToString();
            dt = dataAcc.rtrvData("empl_Name,empl_Id,desg_Name", "dbo.Empldmgrphcs INNER JOIN  dbo.Designation ON dbo.Empldmgrphcs.desg_Id = dbo.Designation.desg_Id ", "empl_EmpId='" + auto + "'");

            if(dt.Rows.Count > 0)
            {
               dgvComp.Rows[e.RowIndex].Cells["dgvname"].Value = dt.Rows[0][0].ToString();
               dgvComp.Rows[e.RowIndex].Cells["empID"].Value = dt.Rows[0][1].ToString();
               dgvComp.Rows[e.RowIndex].Cells["dgvdesi"].Value = dt.Rows[0][2].ToString();
            }
            else
            {
                e.Cancel = true;
                MessageBox.Show("Validation Fail");
            }
         }
      }
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:00:47.903

显示一个消息框并设置： `e.Cancel = true;`

# clojure - How to define project.clj for both lein run and lein repl to work?

> ID：15339047
> 
> 赞同：11
> 
> 时间：2013-03-11T12:50:47.757
> 
> 标签：clojure

I'm new to Clojure, and I don't quite understand how to write my `project.clj` so it works for both `lein repl` and `lein run`. Here it is (whole path: `~/my-project/project.clj`):

```
(defproject my-project "1.0.0-SNAPSHOT"
  :description "FIXME: write description"
  :dependencies [[org.clojure/clojure "1.3.0"]]
  :main my-project.core/hello
) 
```

Then I have my `~/my-project/src/my_project/core.clj` file

```
(ns my-project.core)

(defn hello []
  (println "Hello world!")
) 
```

`lein run` works just fine but I get a `FileNotFoundException` when running `lein repl`:

```
~/my-project$ lein run
Hello world!
~/my-project$ lein repl
REPL started; server listening on localhost port 42144
FileNotFoundException Could not locate hello__init.class or hello.clj on classpath:   clojure.lang.RT.load (RT.java:430)
clojure.core=> 
```

How should I edit the `project.clj` to solve this? Or do I have to call `lein repl` in a different way?

Thanks in advance.

**EDIT**: tried with `lein dep`s and `lein compile`, but still the same error

```
~/my-project$ lein version
Leiningen 1.7.1 on Java 1.6.0_27 OpenJDK Client VM
~/my-project$ lein deps
Copying 1 file to /home/yasin/Programming/Clojure/my-project/lib
~/my-project$ lein compile
No namespaces to :aot compile listed in project.clj.
~/my-project$ lein repl
REPL started; server listening on localhost port 41945
FileNotFoundException Could not locate hello__init.class or hello.clj on classpath:   clojure.lang.RT.load (RT.java:430) 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-11T13:40:38.300

你可以做的一件事是让它工作`core.clj`：

```
(ns my-project.core
  (:gen-class))

(defn hello []
  (println "Hello world!"))

(defn -main []
  (hello)) 
```

并将其编辑`project.clj`为：

```
(defproject my-project "1.0.0-SNAPSHOT"
  :description "FIXME: write description"
  :dependencies [[org.clojure/clojure "1.3.0"]]
  :main my-project.core) 
```

将`(:gen-class)`告诉编译器为命名空间生成一个 Java 类，并且`:main`in 中的指令`project.clj`将告诉`lein run`在该类上运行 main 方法，该方法由`-main`. 我不清楚为什么`lein repl`找不到`my-project.core/hello`，但我对 leiningen 内部结构知之甚少。

# excel - 遍历名称并删除与指定模式不匹配的名称

> ID：15339057
> 
> 赞同：0
> 
> 时间：2013-03-11T12:51:23.577
> 
> 标签：excel, foreach, named-ranges, vba

我有一个 Excel 工作簿，我在其中从其他几个工作簿中导入工作表，然后将这些工作簿中的数据合并到一个“概述”工作表中。我对 vba 还很陌生，所以这项任务花费了相当长的时间和大量的研究。但是我有一个问题我无法解决或找不到答案，但我认为如果你知道如何解决它应该相当简单。（所以希望有人这样做。）问题：当我导入工作表时，我还导入了很多不需要的命名范围。我试图通过运行一个删除它们而不删除我指定的宏来删除它们，但它对我不起作用。

任何帮助深表感谢

```
Sub DeleteNames()

Dim myName As Name

 For Each myName In ThisWorkbook.Names

  If myName <> "Tower" And _
  myName <> "Bird" Then
  myName.Delete
  End If

 Next
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T13:19:42.390

您需要使用*名称*对象的**namelocal**属性。

 *试试这个：

```
Sub DeleteNames()

Dim myName As Name

 For Each myName In ThisWorkbook.Names

  If myName.NameLocal <> "Tower" And myName.NameLocal <> "Bird" Then
    myName.Delete
  End If

 Next
End Sub 
```*

# java - Is static method in JAVA creates a single instance?

> ID：15339059
> 
> 赞同：1
> 
> 时间：2013-03-11T12:51:31.747
> 
> 标签：java, methods, static

I have a doubt.
Suppose in a multithreaded environment 10K users are using a site simultaniously and the site has a static method.
If a static method in JAVA creates a single instance, then the 10k-th user needs to wait for the method until rest of the users complete their usage.
Am I right?
Can anybody please explain?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T12:54:11.183

> If a static method in JAVA create a single instance, then 10K th user need to wait for the method untill rest of the usres complete there usage.

Calling a static method *doesn't* create an instance implicitly. You can do so *within* the method, of course - but you don't have to.

Nor does creating an instance require a lock - although again, you can add synchronization should you wish to.

So in the case of a simple static method which doesn't need any synchronized access to shared data, there should be no problem with multiple threads calling that method concurrently.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T12:56:07.163

我猜你的意思是像单身人士或工厂，例如

```
public class X {

    public static X getInstance() {
        return new X();
    }

    private X() {}
} 
```

那么这一切都取决于你在静态方法上做了什么。如果该方法不关心线程（如上面的示例），那么它不应该被同步并且可以并发执行，那么你就错了，因为可以`X.getInstance()`并发执行并且 10Kth 不必等待之前完成。

如果该方法不能是多线程的，那么它应该是同步的（整个方法或其中的一部分），那么是的，你是对的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T12:55:00.827

NO..10K th 用户无需等待该方法，直到其余用户完成使用。

因为它不是静态方法不同步......所以多个线程可以访问同一个对象。

# liferay - How can I add extra properties to document metadata field types in Liferay 6.1?

> ID：15339060
> 
> 赞同：3
> 
> 时间：2013-03-11T12:51:33.233
> 
> 标签：liferay, liferay-6, portal, expando

I'm new to Liferay and I have the following situation:

I would like to add **extra properties** to document metadata field types in Liferay 6.1.20.

For example, I would like to add property '**readonly**' to select boxes (see image), as it is a user requirement to show some controls disabled.

Should I use the Expando functionality, a jsp override hook or another approach?

![Liferay document metadata field type properties](../Images/12d43538aba282c924650398226f4d46.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:47:27.800

我认为 Expando 功能、jsp 覆盖挂钩是一个很好的方法。但是使用 Expando 你不能将它创建为必填字段。

# sql - DotNetNuke 查找具有特定文本的所有页面

> ID：15339061
> 
> 赞同：0
> 
> 时间：2013-03-11T12:51:34.607
> 
> 标签：sql, dotnetnuke

我有一个 DNN 6 安装（即将成为 DNN7），我需要将链接到特定页面的每个页面更新到新页面......我可以编写该查询，但我想查看实际的列表将更新的页面..到目前为止我有这个：

```
select t.TabName -- Some sorcery to get page name --
from HtmlText h
join Modules m on h.ModuleID=m.ModuleID
join TabModules tm on m.ModuleID=tm.ModuleID
join Tabs t on tm.TabID=t.TabID

where Content like '%MyTextToFind%' 
```

此查询返回包含文本的所有选项卡，但不返回包含文本的实际页面。

如何获取实际页面？（页面路径会很棒）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:37:27.227

有一些工具可以做到这一点，如果您从[http://www.engagesoftware.com/Products/DNN_Modules/Engage_F3.aspx](http://www.engagesoftware.com/Products/DNN_Modules/Engage_F3.aspx)查看 Engage F3 模块，您可以获得免费下载，它将在所有 HTML 模块中搜索/替换文本.

免责声明：我多年前编写了 F3 的原始版本，但不再是 Engage 的员工，也没有参与该模块的最新版本

更新：由于 DotNetNuke 中处理 URL 的方式，要获取页面的实际 URL，您可能需要在 SQL 之外进行。如果您真的想在 SQL 中生成一个 URL，尽管您可以使用类似的东西创建一个不友好的 URL

```
select t.TabName,
'http://MYWEBSITE.com/default.aspx?tabid=' + Cast(t.TabID as varchar) 
from HtmlText h
join Modules m on h.ModuleID=m.ModuleID
join TabModules tm on m.ModuleID=tm.ModuleID
join Tabs t on tm.TabID=t.TabID 
```

这将生成一个“不友好”的 url，它可以工作，但显然没有页面名称。如果您在 DNN 中使用标准的 HumanFriendly 格式，您可以尝试使用选项卡上的“TabPath”列，并通过在末尾添加 .aspx、删除双斜杠并将域名放在前面来使用它来构建 URL。

# c - 如何修改返回值？

> ID：15339062
> 
> 赞同：2
> 
> 时间：2013-03-11T12:51:35.540
> 
> 标签：c, gdb, low-level, gsoap

我有一个调用`gSoap`API 函数的例程`soap_malloc`。但是`segmentation fault`每当我尝试访问由`soap_malloc`. 当我`gdb`用来调试它时。我发现里面`soap_malloc`，存储在寄存器中的返回值`%rax`是`0x7fffec0018f0`。但是在返回时，`%rax`更改为`0xffffffffec0018f0`. 只保留低 32 位，高 32 位全部更改为`1`. 这导致访问一个相当高的地址，因此导致例程停止。感谢大家给我任何关于如何发生这种情况的想法。我正在运行我的多线程程序`Ubuntu12.04 x86-64`。

这就是我所说的：

```
void *temp = soap_malloc(soap, 96); 
```

这就是`soap_malloc`实现（只`else`执行那部分，宏`SOAP_MALLOC`只是将第二个参数传递给`malloc`,`SOAP_CANARY`是常量`0xC0DE`）：

```
#ifndef SOAP_MALLOC         /* use libc malloc */
# define SOAP_MALLOC(soap, size) malloc(size)
#endif

#ifndef SOAP_CANARY
# define SOAP_CANARY (0xC0DE)
#endif

void* soap_malloc(struct soap *soap, size_t n)
{ register char *p;
  if (!n)
    return (void*)SOAP_NON_NULL;
  if (!soap)
    return SOAP_MALLOC(soap, n);
  if (soap->fmalloc)
    p = (char*)soap->fmalloc(soap, n);
  else
  { n += sizeof(short);
    n += (-(long)n) & (sizeof(void*)-1); /* align at 4-, 8- or 16-byte boundary */
    if (!(p = (char*)SOAP_MALLOC(soap, n + sizeof(void*) + sizeof(size_t))))
    { soap->error = SOAP_EOM;
      return NULL;
    }
    /* set the canary to detect corruption */
    *(unsigned short*)(p + n - sizeof(unsigned short)) = (unsigned short)SOAP_CANARY;
    /* keep chain of alloced cells for destruction */
    *(void**)(p + n) = soap->alist;
    *(size_t*)(p + n + sizeof(void*)) = n;
    soap->alist = p + n;
  }
  soap->alloced = 1;
  return p;
} 
```

这是 的定义`SOAP_NON_NULL`：

```
static const char soap_padding[4] = "\0\0\0";
#define SOAP_NON_NULL (soap_padding) 
```

**更新（*2013-03-12*）**
我明确声明`soap_malloc`返回`void *`并且问题解决了。以前，在将结果分配给 时，返回的值会被截断并扩展`int`符号位。`1``void *temp`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T12:54:32.967

调用代码在范围内是否有适当的`soap_malloc()`函数原型？

似乎`void *`正在转换为`int`，即默认返回类型。如果没有正确声明函数，就会发生这种情况。

# .net - 使用预处理 T4 文本模板生成运行时文本的用例

> ID：15339064
> 
> 赞同：1
> 
> 时间：2013-03-11T12:51:48.410
> 
> 标签：.net, visual-studio-2010, code-generation, t4

我了解什么是 T4 模板及其类型，即设计时间和运行时间。我也了解可以在哪里使用设计时文本生成。
但我**无法真正理解**文本运行时生成的用例。可否用于在运行时生成代码。
请赐教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T19:59:50.367

运行时文本模板可用于在不能依赖 Visual Studio 的应用程序中嵌入生成。

可以使用此功能的典型企业应用程序示例是将形式 HTML 电子邮件嵌入到 Web 应用程序中。在这种情况下，除了应用程序部署边界之外，模板不发生变化是可以接受的，但数据本身确实发生了变化。

另一个关键应用程序适用于希望使用不依赖于 Visual Studio 的默认模板生成 T4 代码的工具包或库。实体框架是这里的典型示例。它需要进行代码生成，但不能依赖安装的 Visual Studio，因为它是 .Net 框架的一部分。因此它使用运行时模板来提供默认代码生成，然后允许使用设计时模板来覆盖其默认行为。

# jquery - 为什么 jQuery parents() 找不到我的元素？

> ID：15339065
> 
> 赞同：0
> 
> 时间：2013-03-11T12:51:49.313
> 
> 标签：jquery, jquery-selectors, parent-child

我只是无法让这个（非常简单的）功能正常工作， parents() 似乎没有找到我想要的 div 并将其淡出:(

```
$('.deleteButton').click( function() {

    var img = $(this).attr('href');
    img = "../"+img;

    var answer = confirm('Are you sure you want to delete this item? (This cannot be undone!)');
    if (answer) {

        $.ajax({
            url: 'scripts/deletePhoto.php',
            data: 'img='+img,
            type: 'POST',
            mode: 'abort',
            success: function(){
                $(this).parents("div.photo").fadeOut('fast');
            }
        });
    }
return false;
}); 
```

HTML

```
<div class="photo">
    <img alt="" src="../static/images/photos/tmp/1.jpg">
    <div class="overlay" style="opacity: 0;">
        <p class="process success message">
            <a href="process_photo.php?img=../static/images/photos/tmp/1.jpg">Process this photo</a>
        </p>
        <p class="delete error message">
            <a href="../static/images/photos/tmp/1.jpg" class="deleteButton">Delete image</a></p>
    </div>
</div> 
```

我已经尝试过`$(this).parents(".photo").fadeOut('fast');`，`$(this).cloest("div.photo").fadeOut('fast');`但没有任何连接:(

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T12:53:50.873

这是一个范围界定问题。在`success`来自 ajax 的回调内部，`this`并不是指您认为它所做的 - 它实际上是指函数本身。

`$(this)`您应该缓存ajax 调用之外的副本，并使用它：

```
$('.deleteButton').click( function() {
   var $img = $(this);

   //....//

   $.ajax({
        url: 'scripts/deletePhoto.php',
        data: 'img='+img,
        type: 'POST',
        mode: 'abort',
        success: function(){
            $img.parents("div.photo").fadeOut('fast');
        }
    });

   // ... //
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T12:54:10.827

The reason you can't find your object is because `$(this)` does not point to the object you think it points to. You're using it inside the callback function of an Ajax call, whose context is different than the click event handler.

Stick it in a variable before you do the Ajax call, then you'll be fine:

```
$('.deleteButton').click( function() {

    var img = $(this).attr('href');
    img = "../"+img;

    var answer = confirm('Are you sure you want to delete this item? (This cannot be     undone!)');
    if (answer) {

        var my_item = $(this);

        $.ajax({
            url: 'scripts/deletePhoto.php',
            data: 'img='+img,
            type: 'POST',
            mode: 'abort',
            success: function(){
                my_item .parents("div.photo").fadeOut('fast');
            }
        });
    }
return false;
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T12:56:45.897

在单击处理程序中，您必须保留对按下按钮的引用，否则`this`将在 AJAX 成功处理程序中“覆盖”：

```
$('.deleteButton').click( function() {
    var img = $(this).attr('href'),
    $self = $(this);

    img = "../"+img; 
```

然后，在成功处理程序中：

```
$self.parents("div.photo").fadeOut('fast'); 
```

顺便说一句，我建议在`$.ajax`通话中进行此更改：

```
data: 'img=' + encodeURIComponent(img), 
```

这样可以避免向服务器端脚本发送格式错误的查询字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T12:54:04.853

您需要缓存当前事件并使用这些变量。这是一个范围界定问题。

```
var currObj=$(this); cache the current event and use those variable. 

$('.deleteButton').click( function() {
var $currObj=$(this); // cache the current event. 
    var img = currObj.attr('href');
    img = "../"+img;

    var answer = confirm('Are you sure you want to delete this item? (This cannot be undone!)');
    if (answer) {

        $.ajax({
            url: 'scripts/deletePhoto.php',
            data: 'img='+img,
            type: 'POST',
            mode: 'abort',
            success: function(){
                $currObj.parents("div.photo").fadeOut('fast');
            }
        });
    }
return false;
}); 
```

# backbone.js - 删除后重新加载主干视图？

> ID：15339069
> 
> 赞同：0
> 
> 时间：2013-03-11T12:52:01.757
> 
> 标签：backbone.js, backbone-views

在我删除一个主干视图后，视图 EL 也被删除，这对我来说有点问题。我的视图设置方式是我有一个加载的 PHP 文件

```
<div id="main_destinations" class="trip_container"></div> 
```

然后该包装器中加载了一个模板。我遇到的问题是，当我删除该视图时，我也删除了该包装器，我不确定我应该做什么。有没有办法保留包装？我是否应该重新创建这个空包装器，然后将模板加载到其中。处理这个问题的最佳方法是什么？

我的理解是，在加载视图和附加事件之前，EL 需要已经在 DOM 中，所以我不明白为什么删除视图会删除它的 EL。

更新 - 我如何删除视图：

```
if(typeof mysite.city != "undefined")
 {                      
  mysite.city.View.prototype.remove.call(cityViewValue);
 } 
```

我如何实例化我的视图：

```
cityViewValue = new mysite.city.View(page, country, city, city_id); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:41:48.663

这是 Backbone.View.Prototype.remove 的定义

```
function () {
  this.$el.remove();
  this.stopListening();
  return this;
} 
```

清楚地显示，它从 DOM 中删除了 el 元素。这是您的问题的替代解决方案：在视图中创建刷新功能，删除要从视图中删除的元素并在视图中加载模板。

```
refresh: function() {
    this.$('.dynamic-data').remove(); //Assuming your element to be removed has class dynamic-data and is unique in this view. Otherwise we will write specific selector here
    var html = ; // Load template here
    $(this.el).append(html);
} 
```

# c# - Jquery Ajax ---“处理过程中发生错误 - 未定义”

> ID：15339070
> 
> 赞同：0
> 
> 时间：2013-03-11T12:52:01.907
> 
> 标签：c#, jquery

我有一个 Jquery Ajax 函数如下

```
var items = [];

var LoginObj = new Object();
LoginObj.UserName = $("#txtUserName").val();
LoginObj.Password = $("#txtPassword").val();

items.push(LoginObj);
var LoginObj = new Object();
LoginObj.UserName = $("#txtUserName").val();
LoginObj.Password = $("#txtPassword").val();

items.push(LoginObj);
//Define DTO i.e. Data Transfer Object as follows
var DTO = { 'userLogin': items };

$.ajax({
    type: "POST",
    url: "Login.asmx/CheckLogin", 
```

如果我编写了 C# 代码，我正在从 Ajax 调用 Webservice 方法。我在 jquery 中发送一个数组，并在 C# 中期待一个 LIST。一切正常。

我在我的 C# 代码中删除了 List 并且只有一个最终无法接收的虚拟类。但是我什至在调用服务器端函数之前就怀疑我得到错误说 **"Error Has Occured during Processing - Undefined"**。

我的疑问是客户端如何在调用服务器端之前就知道错误？我在 C# 中保留了一个断点，它从未受到 HIT 的影响。如果我将该类更改为列表并且一切正常

谢谢

# python - 安装 twitter api 模块时无法加载 json 库

> ID：15339072
> 
> 赞同：3
> 
> 时间：2013-03-11T12:52:04.167
> 
> 标签：python, json, twitter

我正在尝试在 Windows 中使用带有 python3.3 的 twitter api

当我尝试使用安装时

```
python setup.py install 
```

我收到此错误：

```
raise ImportError, "Unable to load a json library" 
```

为了解决这个问题，我手动安装了简单的 json 模块

错误再次出现

```
Traceback (most recent call last):
  File "C:\Users\schatterjee\workspace\test\test.py", line 1, in <module>
    import twitter
  File "C:\Python33\lib\site-packages\twitter.py", line 50
    raise ImportError, "Unable to load a json library"
                 ^
SyntaxError: invalid syntax 
```

为什么会持续存在？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T13:18:20.400

好的，回溯*确实*有很大帮助。正如最初假设的那样，问题不在于没有 JSON 库。相反，您会在会引发错误的行上得到一个语法错误*（*虽然它不会抛出它！）。

您收到语法错误的原因是因为显示的语法是 Python 2 语法：

```
raise ExceptionType, "message" 
```

此语法在 Python 3 中不再是有效语法，但必须写为

```
raise ExceptionType(message) 
```

该错误支持我的假设，即您选择的 Twitter 库与 Python 3 不兼容。实际上，库中存在多个会引发更多语法错误的东西。我很惊讶他们没有添加支票`setup.py`来通知您这一点。

因此，不幸的是，您将无法将此库与 Python 3 一起使用，但需要使用 Python 2。如果您愿意，可以在计算机上并行安装 Python 2 和 Python 3。

但是，您也可以寻找不同的库。这里有两个与 Python 3 兼容；我还没有尝试过它们中的任何一个：

*   [Python Twitter 工具](http://mike.verdone.ca/twitter/)( [GitHub](https://github.com/sixohsix/twitter) )
*   [飞龙](https://github.com/danxmoran/wyvern)

# asp.net-mvc-4 - 无法安装 jQuery UI 小部件：日期选择器

> ID：15339075
> 
> 赞同：6
> 
> 时间：2013-03-11T12:52:27.813
> 
> 标签：asp.net-mvc-4, jquery-ui-datepicker

按照本教程（[http://www.asp.net/mvc/tutorials/javascript/using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc/using-the-html5 -and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4](http://www.asp.net/mvc/tutorials/javascript/using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc/using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4)），我尝试通过 NuGet 安装 jQuery UI WIdgets:Datepicker 并收到以下错误：

试图解决依赖 'jQuery.UI.Core (= 1.8.9)'。

试图解决依赖 'jQuery (≥ 1.4.4 && < 1.6)'。

成功安装'jQuery 1.4.4'。

成功安装'jQuery.UI.Core 1.8.9'。

成功安装'jQuery.UI.Widgets.Datepicker 1.8.9'。

安装失败。滚回来...

将“jQuery 1.7.1.1”更新为“jQuery 1.4.4”失败。找不到与“jQuery 1.4.4”兼容的“jQuery.UI.Combined”版本。

这大概是因为我在其他解决方案中有 jQuery 1.7.1.1。我怎样才能解决这个问题？

如果我不能，是否有另一个我可以在 ASP .NET MVC 4（我是新手）中使用的日期选择器，并有明确的使用说明？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T11:33:07.747

我有完全相同的问题，所以我手动下载了小部件：http: [//jqueryui.com/download/](http://jqueryui.com/download/)

提取文件夹并将我需要的脚本添加到我的项目中：

*   \jquery-ui-1.10.2.custom\jquery-ui-1.10.2.custom\development-bundle\themes\base\jquery.ui.datepicker.css
*   \jquery-ui-1.10.2.custom\jquery-ui-1.10.2.custom\development-bundle\ui\jquery.ui.datepicker.js

Nuget 安装失败的原因是包试图引用 jquery.1.4 而 MVC 4 需要更高的库。

希望能帮助到你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-06T04:47:54.807

这似乎是旧帖子，但像我这样的人稍后会在这篇帖子中看到我通过使用引导日期选择器而不是使用 jquery ui 日期选择器来解决这个问题。

# c# - 使用带有 AWS Elasticache 的 NHibernate memcached 二级缓存的问题

> ID：15339086
> 
> 赞同：4
> 
> 时间：2013-03-11T12:53:11.653
> 
> 标签：c#, nhibernate, amazon-web-services, memcached, amazon-elasticache

我使用 memcached 作为我的 NHibernate 二级缓存。我正在将我的系统迁移到 Amazon Web Services，并计划使用与 Memcache 完全兼容的 Elasticache。Memcached 使用一组**主机 IP 地址**（注意：不是主机名 - 如果库检测到无效的 IP 字符串，则会引发错误）来连接到 memcached 服务器。以下是示例配置字符串：

```
 <memcache>
    <memcached host="192.168.1.1" port="11211" expiration="300" />
  </memcache> 
```

另一方面，Elasticache 为缓存集群提供静态主机名，不建议使用内部 IP 地址，因为这些地址容易更改。

有没有人能够将 NHibernate memcached 提供程序与 Elasticache 一起使用？是否有其他方法可以使用 NHibernate 配置 memcached，使其使用主机名而不是 IP 地址？

谢谢

J.P

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T03:28:43.583

对于任何感兴趣的人：我无法使用 NHibernate.Caches.MemCache 指向主机名。然而，事实证明 NHibernate 有一个替代的 memcache 实现 - NHibernate.Caches.EnyimMemcached。这允许服务器由 IP 地址或主机名定义，解决了我的问题。我仍然很想知道*是否*可以使用较旧的 Memcache 集成来实现，但 EnyimMemcached 工作得很好

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-25T05:02:31.073

如果有人还在寻找解决方案，

您可以使用[https://github.com/henriquecampos/NHibernate.Caches.Elasticache](https://github.com/henriquecampos/NHibernate.Caches.Elasticache)以非常少的配置连接到 Amazon Elastic Cache。

同样对于本地开发，您可以使用以下项目 [https://github.com/hybridtechie/fake-elasticache-.NET-version](https://github.com/hybridtechie/fake-elasticache-.NET-version)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T06:05:08.290

除了`host`在配置文件中使用属性，您是否可以不只使用`hostname`属性并将其设置为 ElastiCache 提供的 DNS 名称？

IE：

```
<memcached hostname="simcoprod02.m2st2p.fsw4.use1qa.cache.amazonaws.com" port="11211" expiration="300" /> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-20T15:13:35.453

它的 aws 问题主机名（由亚马逊提供的主机名，amazon-XXXX）不适用，因为它们未映射到任何域。

内部ip之间的路由似乎也不可能，您可以尝试跟踪它无处不在。唯一的方法是使用你发现的外部弹性ips，

路由到映射到亚马逊的 cnames 似乎也不可能

您可以尝试提交反向 dns 映射请求（在亚马逊常见问题解答中），或设置辅助 dns 请求（免责声明，我没有尝试两者，我使用弹性 IP 进行映射，不得不继续处理更紧急的事情）

# cuda - 尽管启动边界指令，寄存器使用率低

> ID：15339088
> 
> 赞同：0
> 
> 时间：2013-03-11T12:53:14.353
> 
> 标签：cuda

在优化我的内核时，我尝试为每个线程的编译提供尽可能多的寄存器以供使用。我有一个由 1300 个点组成的网格，我可以将其任意划分为要同时处理的块。考虑到我的 CUDA 设备（GTX 460，计算能力 2.1）每个 SM 支持 32,768 个寄存器，我的数学技能告诉我，最多 672 个线程的两个块导致

32,768 / 1344 = 24

每个线程的寄存器。

通过编译我的内核

```
__global__ void
__launch_bounds__(672, 2)
moduleB3(...) 
```

结果是

```
ptxas : info : Compiling entry function _Z8moduleB3PfS_S_S_S_S_S_S_S_S_S_S_S_S_S_S_PiS_S_S_S_S_S_ffffiffffiiffii' for 'sm_20'
ptxas : info : Function properties for _Z8moduleB3PfS_S_S_S_S_S_S_S_S_S_S_S_S_S_S_PiS_S_S_S_S_S_ffffiffffiiffii
48 bytes stack frame, 84 bytes spill stores, 44 bytes spill loads
ptxas : info : Used 20 registers, 184 bytes cmem[0], 24 bytes cmem[16] 
```

不提供 launch_bounds() 时，寄存器使用率要高得多。我实际上有几个内核，其中任何一个中使用的最大寄存器数是 20，而我怀疑是 24。关于我的考虑在哪里有任何有根据的猜测？

**编辑：**事情是，当指定启动边界时，寄存器的使用会减少。以下是没有启动限制的编译器输出：

```
ptxas : info : Compiling entry function _Z10moduleA2_1PfS_S_S_S_S_S_S_S_S_S_S_S_S_S_S_fffffffiiii' for 'sm_21'
ptxas : info : Function properties for _Z10moduleA2_1PfS_S_S_S_S_S_S_S_S_S_S_S_S_S_S_fffffffiiii
0 bytes stack frame, 0 bytes spill stores, 0 bytes spill loads
ptxas : info : Used 56 registers, 140 bytes cmem[0], 40 bytes cmem[16] 
```

在这里使用 __launch_bounds(672, 2)：

```
ptxas : info : Compiling entry function '_Z10moduleA2_1PfS_S_S_S_S_S_S_S_S_S_S_S_S_S_S_fffffffiiii' for 'sm_21'
ptxas : info : Function properties for _Z10moduleA2_1PfS_S_S_S_S_S_S_S_S_S_S_S_S_S_S_fffffffiiii
120 bytes stack frame, 156 bytes spill stores, 124 bytes spill loads
ptxas : info : Used 20 registers, 140 bytes cmem[0], 40 bytes cmem[16] 
```

据我了解，编译器宁愿使用更多的寄存器，但由于资源限制而不能。但是，使用的寄存器加起来不等于可用的 32,768。如前所述，上限应为每个线程 24 个寄存器。如果编译器选择实现一些数量较少的内核，我可以理解，但是我的内核中**没有一个**使用更多没有启动限制的寄存器，请求超过 20 个。

我不认为发布内核会有什么好处，但你当然可以看看。以下是（希望）最简单的一个：

```
__global__ void 
__launch_bounds__(672, 2)
moduleA2_1(float *d_t, float *d_x, float *d_p, float *d_rho, float *d_b, float *d_u, 
float *d_ua, float *d_us, float *d_qa, float *d_qs, float *d_dlna,
float *d_cs, float *d_va, float *d_ma, float *d_uc2, float *d_rhs,
float k_b, float m_h, float gamma, float PI, float Gmsol, float r_sol, float fourpoint_constant, int radius, int numNodes, int numBlocks_A2_1, int numGridsPerSM)
{
int idx, idg, ids;

//input
float t, p, rho, b, u, ua, us, qa, qs, dlna;
//output
float a2, cs, va, ms, ma, vs12, vs22, uc2, dlna2, rhs; 

extern volatile __shared__ float smemA21[];
float volatile *s_lna2;
s_lna2 = &smemA21[0];

ids = blockIdx.x / numBlocks_A2_1;
idx = (blockIdx.x % numBlocks_A2_1) * (blockDim.x - 2*radius) + threadIdx.x - radius;
idg = numGridsPerSM * ids;

while(idg < numGridsPerSM * (ids + 1))
{
    if(idx >= 0 && idx < numNodes)
    {
        t = d_t[idg * numNodes + idx];
        p = d_p[idg * numNodes + idx];
        rho = d_rho[idg * numNodes + idx];
        b = d_b[idg * numNodes + idx];
        u = d_u[idg * numNodes + idx];
        ua = d_ua[idg * numNodes + idx];
        us = d_us[idg * numNodes + idx];
        qa = d_qa[idg * numNodes + idx];
        qs = d_qs[idg * numNodes + idx];
        dlna = d_dlna[idg * numNodes + idx];
    }

    //computeA2(i);      // isothermal sound speed (squared)
    a2 = k_b / m_h * t;

    //computeLna2(i);
    s_lna2[threadIdx.x] = (float)log(a2);

    //computeCs(i);      // adiabatic sound speed
    cs = gamma * p / rho;
    d_checkInf(&cs);
    cs = sqrt(cs);

    //computeVa(i);      // Alfven speed
    va = b  / (float)sqrt(4*PI*1E-7*rho);
    d_checkInf(&va);

    //computeMs(i);      // sonic Mach number
    ms = u / cs;
    d_checkInf(&ms);
    if(ms < FLT_MIN)
        ms = FLT_MIN;

    //computeMa(i);      // Alfven Mach number
    ma = u / va;
    d_checkInf(&ma);
    if(ma < FLT_MIN)
        ma = FLT_MIN;

    //computeUc2(i);     // critival speed (squared)
    uc2 = a2 + ua / (4 * rho) * (1 + 3 * ma)/(1 + ma) + 8 * us / (3 * rho) * (ms)/(1 + ms);

    //computeVs12(i);    // support value 1
    vs12 = us / (3 * rho) * (1 - 7 * ms)/(1 + ms);

    //computeVs22(i);    // support value 2
    vs22 = 4 * us / (3 * rho) * (ms - 1)/(ms + 1);

    __syncthreads();
    //fourpointLna2(i); 
    if((threadIdx.x > radius-1) && (threadIdx.x < blockDim.x - radius) && (idx < numNodes))
    {
        if (idx == 0)  // FO-forward difference
            dlna2 = (s_lna2[threadIdx.x+1] - s_lna2[threadIdx.x])/(d_x[idg * numNodes + idx+1] - d_x[idg * numNodes + idx]);
        else if (idx == numNodes - 1)  // FO-rearward difference
            dlna2 = (s_lna2[threadIdx.x] - s_lna2[threadIdx.x-1])/(d_x[idg * numNodes + idx] - d_x[idg * numNodes + idx-1]);
        else if (idx == 1 || idx == numNodes - 2) //SO-central difference
            dlna2 = (s_lna2[threadIdx.x+1] - s_lna2[threadIdx.x-1])/(d_x[idg * numNodes + idx+1] - d_x[idg * numNodes + idx-1]);
        else if(idx > 1 && idx < numNodes - 2 && threadIdx.x > 1 && threadIdx.x < blockDim.x - 2)
            dlna2 = fourpoint_constant * ((s_lna2[threadIdx.x+1] - s_lna2[threadIdx.x-1])/(d_x[idg * numNodes + idx+1] - d_x[idg * numNodes + idx-1])) + (1-fourpoint_constant) * ((s_lna2[threadIdx.x+2] - s_lna2[threadIdx.x-2])/(d_x[idg * numNodes + idx+2] - d_x[idg * numNodes + idx-2]));
        else
            dlna2 = 0;
    }

    //par_computeRhs();
    if(idx >= 0 && idx < numNodes)
    {
        if (u == 0)
            rhs = - Gmsol / (float)pow(d_x[idg * numNodes + idx] + r_sol, 2) + (uc2 + vs12) * dlna - (a2 + vs22) * dlna2;
        else
            rhs = - Gmsol / (float)pow(d_x[idg * numNodes + idx] + r_sol, 2) + (uc2 + vs12) * dlna - (a2 + vs22) * dlna2 + 1 / rho * (qa / (2.0f*(u + va)) + 4.0f * qs / (3.0f*(u + cs)));
    }

    //par_calcSurfaceValues(); 

    if(threadIdx.x > radius-1 && threadIdx.x < blockDim.x - radius && idx < numNodes)
    {
        d_cs[idg * numNodes + idx] = cs;
        d_va[idg * numNodes + idx] = va;
        d_ma[idg * numNodes + idx] = ma;
        d_uc2[idg * numNodes + idx] = uc2;
        d_rhs[idg * numNodes + idx] = rhs;
    }
    idg++;
}
} 
```

感谢您抽出宝贵的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:54:44.400

这看起来像`ptxas`. 作为一种解决方法，您可以将内核编译为 PTX，然后在内核代码的开头更改行

```
.maxntid 672, 1, 1
.minnctapersm 2 
```

至

```
.maxnreg 24 
```

然后编译 PTX 文件。这将为您提供一个确实使用 24 个寄存器的内核。

顺便说一句，分析这个内核以查看它是否确实可以在每个 SM 两个块的情况下运行，或者是否有一些未记录的原因导致这无法实现，这会很有趣。

# c# - 使用保留字作为实体名称

> ID：15339089
> 
> 赞同：3
> 
> 时间：2013-03-11T12:53:14.700
> 
> 标签：c#, sql-server, nhibernate

我正在使用带有命名约定的代码的 NHibernate 映射来映射我的实体。现在我有以下错误

```
SQL error - Incorrect syntax near the keyword 'User'.: 
```

我知道这是保留字，我想知道如何按照约定在映射中使用此名称（用户）作为实体名称。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-11T12:55:03.583

您可以通过将其包裹在方括号中来使用它，因为它是 SQL SERVER 中的保留关键字：

`[User]`

该词`user`是 SQL Server 中的[保留字](http://msdn.microsoft.com/en-us/library/aa238507%28v=sql.80%29.aspx)。如果您需要将其用作列名，请在其周围加上括号。这适用于碰巧与关键字冲突的所有表名和其他用户定义的名称，

例子：

```
Select * from tbl where [User] = 'xyz' 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-11T14:32:24.983

在 NHibernate 中处理这个问题的正确方法是使用[SQL Quoted Identifiers](http://nhforge.org/doc/nh/en/index.html#mapping-quotedidentifiers)。

只需将表或列名包含在反引号中，它`Dialect`就会为您的数据库使用正确的符号。

为了让事情变得更简单，NHibernate 提供了一个配置设置来为您执行此操作：`hbm2ddl.keywords="auto-quote"`在 xml 配置文件中设置，或者`AutoQuoteKeywords()`在使用 loquacious 时调用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T12:58:25.433

如果括号不起作用，请尝试以下操作：

```
"`User`" 
```

# java - itextpdf 在块行之间有适当的元素

> ID：15339090
> 
> 赞同：0
> 
> 时间：2013-03-11T12:53:26.600
> 
> 标签：java, pdf-generation, itextpdf

我正在使用 itextpdf 生成一些 pdf 。在那我需要用不同的字体放置两行，所以我用块来做同样的事情。

在使用这个之后，我在将两条线对齐时遇到了一些问题。

```
 Make:-     MakeName
                    Capacity:-    CapacityName 
```

我想以相同的方式打印两者，如下所示

```
 Make:-        MakeName
                    Capacity:-    CapacityName 
```

我尝试添加空格，但如果添加许多不同行的信息，这将不起作用。

下面是我写的代码写的一样。请提出一些通用方法来解决这个问题。

```
 Paragraph preface = new Paragraph();

        preface.add(new Paragraph("Details of WOrk",normalFontbondunder));

    preface.add(new Chunk("Make:-                     ", normalFont));
    preface.add(new Chunk(makeName, normalFontBold));
    preface.add(new Paragraph("")); 
```

//和下一行

```
 preface.add(new Chunk("Capacity:-                ", normalFont));
    preface.add(new Chunk(capacity, normalFontBold));
    preface.add(new Paragraph("")); 
```

# objective-c - “”的局部声明隐藏了实例和不完整的实现

> ID：15339092
> 
> 赞同：0
> 
> 时间：2013-03-11T12:53:33.667
> 
> 标签：objective-c, xcode

```
@implementation ViewController

-(IBAction)ReturnKeyButton:(id)sender {
  [sender resignFirstResponder];
}

@synthesize torque, horsepower, rpm, rpmf2;

-(IBAction)Operation1:(id)sender {
  float result = 2 * 3.14 *([torque.text floatValue] * [rpm.text floatValue]) / 33000;

  answer1.text = [[NSString alloc] initWithFormat:@"%2.f", result];
}

-(IBAction)Operation2:(id)sender {
  float result = 2 * 3.14 * ([horsepower.text floatValue] * [rpmf2.text floatValue]) /     33000;

  answer2.text = [[NSString alloc] initWithFormat:@"%2.f", result];
} 
```

我想将我的文本字段格式化为一个数字。这可行，但它对我的植入 answer1.text 和 answer2.text 有警告标志。问题是线程点最终会断裂。这有什么问题？

编辑：

```
@interface ViewController : UIViewController {
        float result;
        IBOutlet UILabel *answer1;
        IBOutlet UILabel *answer2;
        IBOutlet UITextField *torque;
        IBOutlet UITextField *rpm;
        IBOutlet UITextField *horsepower;
        IBOutlet UITextField *rpmf2;
        int currentOperation1;
        float torque1;
        float rpm1;
        float horsepower1;
        float rpm1f2;
        float answer5;
    }

    -(IBAction)Operation1:(id)sender;
    -(IBAction)Operation2:(id)sender;
    @property(nonatomic, retain) IBOutlet UITextField *torque;
    @property(nonatomic, retain) IBOutlet UITextField *rpm;
    @property(nonatomic, retain) IBOutlet UITextField *horsepower;
    @property(nonatomic, retain) IBOutlet UITextField *rpmf2;
    -(IBAction)ReturnKeyButton;
@end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T13:16:02.610

# 局部声明隐藏实例变量

第一个错误是因为您有一个成员变量声明为

```
float result; 
```

然后在您的方法中，您有一个声明为相同的局部变量。因此，局部变量掩盖了成员变量。您应该确保名称不会发生冲突。

# 实施不完整

第二个错误是因为您在标题中声明了一个方法

```
-(IBAction)ReturnKeyButton:(id)sender 
```

但是然后你实现

```
-(IBAction)ReturnKeyButton; 
```

这是两种完全不同的方法，一种被称为`ReturnKeyButton`另一种被称为`ReturnKeyButton:`注意名称末尾的冒号。

要解决此问题，只需确保声明匹配，例如更改

`-(IBAction)ReturnKeyButton;`在`-(IBAction)ReturnKeyButton:(id)sender`实施中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T13:02:12.013

您的问题包含两条警告消息：

**1.“ ”的局部声明隐藏实例**

你有一个 ivar 的属性和一个同名的方法。

例如，在您的班级中，您有一个名为的属性`myProperty`，并且在您创建的方法中`myProperty`。

一种方法是为方法的变量使用不同的名称。或在合成中使用别名覆盖您的属性作为`@synthesize myProperty=_myProperty;`.

# 你`float result`在课堂上和你的方法中都有。`Operation1:`在方法和方法中将结果更改为 tempResult 或任何其他变量名称`Operation2:`

*如果您使用的是 XCode 4.4+，那么编译器会将 `synthesize`属性与`_`.*

**2\. 执行不完整——需要新鲜**

您尚未实现在 .h 文件中声明的所有方法。

# 你还没有`-(IBAction)ReturnKeyButton;`在你的 .m 文件中实现

您在那里创建了一个本地方法`-(IBAction)ReturnKeyButton:`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T13:01:07.980

可能是您没有使用 self 调用变量。

尝试像这样打电话

self.torque.text，self.horsepower.text，self.rpm.text，self.rpmf2.text

希望这可以帮助 ！！！

# java - ForkJoinWorkerThread 的特点和优势

> ID：15339094
> 
> 赞同：1
> 
> 时间：2013-03-11T12:53:41.937
> 
> 标签：java, multithreading, java-7

谁能解释一下 jdk 1.7 中引入的 ForkJoinWorkerThread 的优点和功能，或者建议一个解释这些功能的链接。

我试图在 Oracle 和 Goolge 上找到它的工作示例，但找不到。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:59:59.513

你不应该使用`ForkJoinWorkerThread`. 请改用[ForkJoinPool](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ForkJoinPool.html)。更具体地说，唯一可见的构造函数是`protected`这样，除非您有意对其进行子类化，否则您不必担心。

从[api](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ForkJoinWorkerThread.html)

> 由执行 ForkJoinTasks 的 ForkJoinPool 管理的线程。这个类是子类化仅仅是为了添加功能——没有处理调度或执行的可覆盖方法。但是，您可以覆盖主任务处理循环周围的初始化和终止方法。如果确实创建了这样的子类，则还需要提供自定义 ForkJoinPool.ForkJoinWorkerThreadFactory 以在 ForkJoinPool 中使用它。

你真的需要实现它吗？

> 我试图在 Oracle 和 Goolge 上找到它的工作示例，但找不到。

如果您使用[ForkJoinPool](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ForkJoinPool.html)并需要覆盖`ThreadFactory`，则需要实现 a`ForkJoinWorkerThread`并将其作为构造函数参数传递。

```
public ForkJoinPool(int parallelism,
            ForkJoinPool.ForkJoinWorkerThreadFactory factory,
            Thread.UncaughtExceptionHandler handler,
            boolean asyncMode) 
```

# c# - 哪个变量会在运行时通过序列化

> ID：15339096
> 
> 赞同：0
> 
> 时间：2013-03-11T12:53:54.490
> 
> 标签：c#, xml, xml-serialization

有没有办法在开始序列化之前告诉`serialization`哪些变量将通过序列化，哪些不通过？

我的意图是，如果我有两个应该通过序列化的类实例，一个将序列化我定义的一些变量，另一个将序列化其他变量。

（我想在运行时设置属性）

我用`XmlSerializer`..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:31:17.157

我的问题是，当我尝试**aletrasg**的建议时，我忘记了部分：`overrides`在这一行：

```
 XmlSerializer ser = new XmlSerializer(typeof(Person), overrides); 
```

当我补充说它有效时。

# html - Doctype 之前的时期

> ID：15339108
> 
> 赞同：1
> 
> 时间：2013-03-11T12:54:25.197
> 
> 标签：html, utf-8, doctype

在我的文档类型（在本地主机上）之前的一段时间将我所有的头部元信息`<head>`从`<body>`.

在进行了一些研究后，有人建议它与使用 UTF-8 和 BOM 而不是不使用有关，但是，我已经检查并仔细检查（即使使用 W3C 验证器）并且它在没有 BOM 的情况下使用。

还有其他原因会发生这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:54:45.927

句点（或无关的 BOM）将使 HTML 解析器认为 body 元素已经开始。因此它进入“解析正文”模式，随后的所有内容都放入正文部分。

* * *

当它是 Unicode 文件的第一个字节时，作为 BOM 的字节序列是文件中任何其他位置的“零宽度无换行符”字符。因此，它是一个可打印的字符，例如句号或“ ” 或“x”，如果解析器在正文开始之前看到它，将简单地假设页面作者简单地省略了 a`<html>` `<head>`和`<body>`未看到的标签，因为它们在 HTML 中都是可选的。

经常怀疑一个 BOM 的原因是它是不可见的，通常是由工具而不是作者手动添加的，因此作者不知道它的存在。句号字符不是这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:49:18.913

我不知道到底是什么问题，但是我创建了一个新的 header.php，将内容复制并粘贴到其中，然后一切正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-05T09:37:30.657

在我的情况下， /var/www/wordpress/wp-config.php 的顶部意外地有一个额外的字符

# html - 如何水平和垂直对齐到固定位置的 div？

> ID：15339109
> 
> 赞同：1
> 
> 时间：2013-03-11T12:54:26.897
> 
> 标签：html, css

```
<div id="someid">some text here</div> 
```

css...

```
#someid{position: fixed; width: 500px; height: 30px;} 
```

我想将绝对中心定位到水平和垂直于窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:57:41.540

虽然你的位置是`fixed`你不能相对定位 div。您必须通过 javascript 计算顶部和左侧的值。您可以通过编写以下代码将其位置水平居中：

```
width: #SOMEWIDTH#px;
margin: 0 auto; 
```

要使边距将 div 定位在中心，必须设置 width 属性。自动边距不影响垂直位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:58:30.153

```
#someid{
position: 
fixed; 
width: 500px; 
height: 30px; 
right:50%; 
margin-right:-250px;
} 
```

负边距是为了修复当浏览器认为 div 的右侧距离浏览器窗口右侧 50% 时发生的偏移量。

要将其垂直居中，您可能想尝试相同的事情（虽然我以前没有这样做过，但这里没有保证）它的垂直位置。

例如：

```
top:50%;
margin-top:-15px; 
```

*编辑* 更彻底的解释：当 #someid 放置在距离右侧 50% 的位置时，它的定位是使其父级总宽度的 50% 远离父级的右边框。但是，这不是从#someid 的中心到其父元素的右边框的测量值，而是从#someid 的右侧到其父元素的右侧的测量值。当然，这并没有完全居中#someid，它仍然偏移其宽度的一半。

这就是我们使用负边距来抵消它的原因。负边距需要是#someid 宽度的一半，以弥补当我们将其放置在距其父元素右侧 50% 的右侧时发生的向左偏移。

# c# - 使用 WinRT 中的按钮将视图的一部分链接到不同的视图模型

> ID：15339112
> 
> 赞同：3
> 
> 时间：2013-03-11T12:54:29.453
> 
> 标签：c#, mvvm-light, winrt-xaml

我正在尝试在 winRT 中制作一个使用 MVVMlight 框架的程序。在应用程序中，我有一个应该保持不变的部分，一个应该将其内容链接到特定视图模型的部分。我将在下面给出一个我想说的小例子：

![在此处输入图像描述](../Images/6901f1546fa56adac9b16877e3142e73.png)

所以当我按下灰色按钮时，内容应该是灰色的，当我按下红色按钮时，内容应该是红色的，但是页面的其余部分应该保持不变。

我现在能想到的唯一方法是将多个数据模板放在我的视图中，并且仅在我需要它们时填充它们绑定的列表，导致它们在填充时出现并在清除时消失，但我认为这将使视图有点乱，我想知道是否还有其他方法可以做到这一点？

我真正想要实现的是，当我单击一个按钮（灰色或红色）时，将会有一个带有相应视图模型的视图，该视图模型将被加载到 contentarea 中，contentarea 位于红色/灰色 atm 的正方形旁边。

它应该类似于我在本教程中找到的内容，但对于 WinRt，因为​​我无法让本教程在 WinRt 中工作。

[http://www.codeproject.com/Articles/323187/MVVMLight-Using-Two-Views](http://www.codeproject.com/Articles/323187/MVVMLight-Using-Two-Views)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:31:04.820

尝试这样的事情，一个带有内容控件的 wpf 窗口，该控件绑定到视图模型上的 usercontrol 属性：

```
<Window
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
    mc:Ignorable="d" 
    x:Class="MainWindow"
HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
    DataContext="{Binding Main_VM, Source={StaticResource Locator}}"
    Background="#FF1D1D1D"
    WindowState="Maximized" 
    WindowStyle="None"   
    WindowStartupLocation="CenterScreen" ResizeMode="CanResizeWithGrip"
    MinHeight="750" MinWidth="1050">

        <Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch" MinHeight="700" MinWidth="1000">
            <Grid.RowDefinitions>
                <RowDefinition Height="auto"/>

            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="auto"/>

            </Grid.ColumnDefinitions>

        <ContentControl Name="UC_Main" Content="{Binding UC_Main}"  Grid.Column="1" Grid.Row="1" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
            <!--workspace user control goes here-->
        </ContentControl>
    </Grid>

</Window> 
```

您可以使用一些按钮或列表视图等来更改 usercontrol 属性的值。以下是hte view的viewmodel：

```
 Public Class MainWindowViewModel
        Inherits ViewModelBase

#Region "DECLARATIONS"
        Public Const CC_Main As String = "UC_Main"
        Private _ucMain As UserControl = Nothing
#End Region

#Region "PROPERTIES"
        Public Property UC_Main() As UserControl
            Get
                Return _ucMain
            End Get

            Set(value As UserControl)
                If _ucMain Is value Then
                    Return
                End If
                RaisePropertyChanging(CC_Main)
                _ucMain = value
                RaisePropertyChanged(CC_Main)
            End Set
        End Property

#End Region

#Region "COMMANDS"
#End Region

#Region "CONSTRUCTOR"
        Public Sub New()
            UC_Main = New YourUserControl
        End Sub
#End Region

#Region "METHODS"
#End Region

    End Class 
```

显然，这些都已被简化，但应该向您展示什么是可能的。YourUserCONtrol 是您希望在主窗口的内容控件中显示的视图。然后，您可以在按钮或事件上使用 mvvm-light relay 命令将用户控件更改/设置为新控件。您可以根据需要在页面上拥有任意数量的内容控件。

# iphone - UIImageView 显示不正确

> ID：15339115
> 
> 赞同：0
> 
> 时间：2013-03-11T12:54:43.497
> 
> 标签：iphone, ios, objective-c, uiimageview, uiimage

此时，我的程序如下所示：

[![图片](../Images/d654eb713a1e302e2c9884b423ca0719.png)](https://i.stack.imgur.com/Ul5tm.png)

正如你所看到的，带有圆角矩形的正方形是一个图像，但它显示得不是很好，我不知道如何解决这个问题......这是课程：[http](http://pastebin.com/QPXbG1uK) ://pastebin.com/QPXbG1uK 背景窗口在这里添加：

```
 UIImageView* background = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"popupWindowBack.png"]] ;
background.center = CGPointMake(_bigPanelView.frame.size.width/2, _bigPanelView.frame.size.height/2);
[_bigPanelView addSubview: background]; 
```

如果我想要一个简单的视图作为背景而不是图像，我还需要改变什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T13:21:26.897

在您的位置，我将停止使用中心坐标并专门设置它的框架矩形：

```
background.contentMode = UIViewContentModeScaleAspectFit;

background.frame = CGRectMake(10,10,_bigPanelView.frame.size.width-20, _bigPanelView.frame.size.height-20); 
```

在这种情况下 - imageview 将是从上/左/右/下 10 像素。

删除这个：

```
background.center = CGPointMake(_bigPanelView.frame.size.width/2, _bigPanelView.frame.size.height/2); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T12:58:09.793

如果你想实现你的图像适合你的 UIImageView 试试这个：

```
background.contentMode = UIViewContentModeScaleAspectFit; 
```

您还需要设置`background`框架以适应屏幕尺寸，例如，如果您在 UIViewController 类实例中添加 UIImageView：

```
background.frame = self.view.frame; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T13:20:09.120

我认为您的图像尺寸大于 bigPanelView 视图。请设置 bigPanelView 的背景帧大小。像

```
background.frame = bigPanelView.view.frame; 
```

# sql - 合并两个表的结果后应用顺序？

> ID：15339124
> 
> 赞同：1
> 
> 时间：2013-03-11T12:55:03.370
> 
> 标签：sql, oracle, plsql

我有两个具有相同列的表。我正在使用oracle 10g。

```
TableA
------
id  status
---------------

1   W
2   R

TableB
------
id  status
---------------

1   W
3   S 
```

我有两张桌子。我使用 UNION 从两个表中得到结果，如下所示。

```
select id, status 
from TableA 
union 
select id, status 
from TableB 
order by status; 
```

如果我这样做，是否对这两个查询都应用了 order by？

我的要求是首先它必须结合结果然后它必须应用`order by`......

我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T13:22:35.113

鉴于您显示的数据，您的查询将返回：

```
ID   STATUS
--   ------
 2   R
 3   S
 1   W 
```

这是因为 UNION 将只返回唯一行，并且 (1, 'W') 行有重复。

如果要包括所有行，甚至是重复行，请使用`UNION ALL`代替`UNION`：

```
select id, status 
from TableA 
union all
select id, status 
from TableB 
order by status; 
```

`UNION ALL`您的查询将返回：

```
ID   STATUS
--   ------
 2   R
 3   S
 1   W
 1   W 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:08:48.380

```
select id, status 
from TableA 
union 
select id, status 
from TableB 
order by 2; -- status 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T12:58:28.157

尝试以下查询

```
select id, status 
from (select id, status from TableA 
      union select id, status from TableB) 
order by status 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-11T13:03:34.203

我认为你需要 Distinct ：

```
Select Distinct id, status 
from (
      select id, status from TableA 
      union
      select id, status from TableB)
order by status 
```

# java - Java Swing---运行程序时什么都不显示

> ID：15339127
> 
> 赞同：1
> 
> 时间：2013-03-11T12:55:06.800
> 
> 标签：java, swing

我是 Java Swing 的新手。我正在尝试绘制一些形状。

## 但是当我运行以下代码时，我根本看不到图表。

不明白为什么，有人可以帮我吗？非常感谢！

```
import java.awt.*;
import java.awt.geom.*;
import javax.swing.*;

public class Draw 
{
    public static void main(String[] args)
    {
        EventQueue.invokeLater(new Runnable()
        {
            public void run()
            {
                DrawFrame frame = new DrawFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setVisible(true);
            }
        });
    }
}

class DrawFrame extends JFrame
{
    public static final int DEFAULT_WIDTH = 400;
    public static final int DEFAULT_HEIGHT = 400;

    public DrawFrame()
    {
        setTitle("DrawTest");
        setSize(DEFAULT_WIDTH, DEFAULT_HEIGHT);

        DrawComponent component = new DrawComponent();
        add(component);
    }
}

class DrawComponent extends JComponent
{
    public void painComponent(Graphics g)
    {
        Graphics2D g2= (Graphics2D) g;
        Rectangle2D rec = new Rectangle2D.Double(100, 100, 200, 150);
        g2.draw(rec);

        Ellipse2D ellipse = new Ellipse2D.Double();
        ellipse.setFrame(rec);
        g2.draw(ellipse);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T13:05:38.317

在提供的代码中，该`paintComponent`方法的名称有错误：

```
public void painComponent(Graphics g) 
```

所以它实际上并没有覆盖超类中的方法。您可以添加 @Override 注释，以便在该方法实际上没有覆盖任何内容时编译器将给出错误，例如：

```
@Override
public void painComponent(Graphics g) 
```

# .net - .Net - 模拟和混淆

> ID：15339128
> 
> 赞同：2
> 
> 时间：2013-03-11T12:55:07.973
> 
> 标签：.net, build, mocking, moq, obfuscation

以下问题：我们在单元测试中使用模拟库 Moq。因此，我们对 DynamicProxyGenAssembly2 有一个 InternalsVisibleTo 属性。此外，我们混淆了我们的程序集。问题来了 - 由于 DynamicProxyGenAssembly2，我们所有的内部接口和类都不再被混淆。

据我所知，大多数模拟库都使用这个 DynamicProxyGenAssembly2。即使他们没有，我也不认为有模拟库可以在没有 InternalsVisibleTo 的情况下模拟内部接口。

你们中有人有同样的问题，你是如何解决的。我想使用模拟和混淆 - 这可能吗？

问候，Yggdrasil。

**编辑**

如果模拟程序集是开源的并且不中继再次需要访问这些接口的第三方程序集，则它是可能的。我们可以在构建过程中包含模拟程序集，它会与我们的程序集一起混淆。有这样的开源模拟系统吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T13:00:51.460

也许您可以拥有 2 种构建配置，一种用于单元测试的未混淆配置，另一种具有所有安全功能的发布配置。仅第一个配置需要 InteralsVisibleTo 属性。

# ruby - 无法理解 `puts{}.class` 和 `puts({}.class)` 之间的区别

> ID：15339132
> 
> 赞同：4
> 
> 时间：2013-03-11T12:55:21.263
> 
> 标签：ruby

由于匿名块和散列块看起来大致相同。我正在玩它。我做了以下一些严肃的观察：

```
{}.class
#=> Hash 
```

好的，很酷。空块被认为是`Hash`。

```
print{}.class
#=> NilClass
puts {}.class

#=> NilClass 
```

现在为什么上面的代码显示相同`NilClass`，但​​下面的代码又显示了`Hash`？

```
puts ({}.class)
#Hash
#=> nil
print({}.class)
#Hash=> nil 
```

任何人都可以在这里帮助我了解上面发生了什么吗？

我完全不同意**@Lindydancer的观点**

您将如何解释以下几行：

```
print {}.class
#NilClass
print [].class
#Array=> nil
print (1..2).class
#Range=> nil 
```

为什么与下面的`print [].class`和不一样`print (1..2).class`？

***编辑***

当`local variable`和`method`调用发生歧义时，Ruby 会抛出一个关于以下事实的错误：

```
name
#NameError: undefined local variable or method `name' for main:Object
#        from (irb):1
#        from C:/Ruby193/bin/irb:12:in `<main>' 
```

现在情况不一样了（因为或块`{}`之间也有歧义）。由于 IRB 在这里也不确定它是 a还是. 那么为什么当 IRB 遇到时错误没有抛出？`empty code block``Hash``empty block``Hash``print {}.class``{}.class`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T12:59:27.063

ruby 的优先规则使得`print{}.class`解释为`(print{}).class`. `print`显然返回`nil`a`class`方法`#NilClass`返回。

*编辑*：正如在其他答案和问题更新中所讨论的那样，`print{}`它*当然*被解释为使用块调用`print`，而不是散列。但是，这仍然与优先级有关，因为`{}`绑定比`[]`和`(1..2)`（并且比`do ... end`就此而言更强）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T13:09:37.393

`{}`在这种情况下被识别为传递给的块`print`，而`[]`明确表示空数组。

```
print {}.class                            # => NilClass
print do;end.class                        # => NilClass 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T21:19:42.063

您遇到了 Ruby 的一些细微差别，其中字符的含义取决于上下文。如何解释源代码遵循规则，其中之一是*如果它遵循方法调用*`{}`，则为闭包，否则为 Hash 构造函数。

 *在整个语言中，根据上下文或语句中的位置，看到字符表示不同的事物是很常见的。

* * *

### 例子：

用于`()`方法调用或优先级的括号

```
print(1..5).class => NilClass
print (1..5).class => Range <returns nil> 
```

方括号`[]`用于调用`:[]`方法或数组

```
print[].class => NoMethodError: undefined method `[]' for nil:NilClass
print([].class) => Array <returns nil> 
```

`*`用于乘法或飞溅的星号

```
1 * 5 => 5
[*1..5] => [1, 2, 3, 4, 5] 
```

符号`&`用于符号 -> proc 或逻辑和

```
0 & 1 => 0
[1, 2, 3].map(&:to_s) => ["1", "2", "3"] 
```

或者在您的情况下，用于块闭包或哈希的大括号

```
... hope it makes sense now ... 
```*

# javascript - 使用另一个变量来初始化淘汰赛 observables

> ID：15339134
> 
> 赞同：2
> 
> 时间：2013-03-11T12:55:22.027
> 
> 标签：javascript, jquery, knockout.js

我只是想知道为什么必须在下面的脚本中使用一个临时变量“ **that** ”（用当前分配的对象初始化，即“ **this ”）：**

```
$(document).ready(function() {

    function ChatViewModel() {

        var that = this;

        that.userName = ko.observable('');
        that.chatContent = ko.observable('');
        that.message = ko.observable('');
        that.messageIndex = ko.observable(0);
        that.activePollingXhr = ko.observable(null);

        var keepPolling = false;

        that.joinChat = function() {
            if (that.userName().trim() != '') {
                keepPolling = true;
                pollForMessages();
            }
        }

        function pollForMessages() {
            if (!keepPolling) {
                return;
            }
            var form = $("#joinChatForm");

            that.activePollingXhr($.ajax({url: form.attr("action"), type: "GET", data: form.serialize(), cache: false,
                success: function(messages) {
                    console.log(messages);
                    for (var i = 0; i < messages.length; i++) {
                        that.chatContent(that.chatContent() + messages[i] + "\n");
                        that.messageIndex(that.messageIndex() + 1);
                    }
                },
                error: function(xhr) {
                    if (xhr.statusText != "abort" && xhr.status != 503) {
                        resetUI();
                        console.error("Unable to retrieve chat messages. Chat ended.");
                    }
                },
                complete: pollForMessages
            }));
            $('#message').focus();
        }

        that.postMessage = function() {
            if (that.message().trim() != '') {
                var form = $("#postMessageForm");
                $.ajax({url: form.attr("action"), type: "POST",
                    data: "message=[" + that.userName() + "] " + $("#postMessageForm input[name=message]").val(),
                    error: function(xhr) {
                        console.error("Error posting chat message: status=" + xhr.status + ", statusText=" + xhr.statusText);
                    }
                });
                that.message('');
            }
        }

        that.leaveChat = function() {
            that.activePollingXhr(null);
            resetUI();
            this.userName('');
        }

        function resetUI() {
            keepPolling = false;
            that.activePollingXhr(null);
            that.message('');
            that.messageIndex(0);
            that.chatContent('');
        }

    }

    //Activate knockout.js
    ko.applyBindings(new ChatViewModel());

}); 
```

为什么我不能只使用“ **this** ”？谁能解释一下？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T12:57:49.357

`this`总是指调用时范围内的对象，这可能会根据您的代码而改变。如果您希望它仍然是子函数中的对象，那么将其分配给不会改变值的变量可以解决此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T13:09:21.187

这是指所有者。你可以像这样重写你的代码：

```
$(document).ready(function() {

function ChatViewModel() {

    var that = this;

    this.userName = ko.observable('');
    this.chatContent = ko.observable('');
    this.message = ko.observable('');
    this.messageIndex = ko.observable(0);
    this.activePollingXhr = ko.observable(null);

    var keepPolling = false;

    this.joinChat = function() {
        if (that.userName().trim() != '') {
            keepPolling = true;
            pollForMessages();
        }
    }

    function pollForMessages() {
        if (!keepPolling) {
            return;
        }
        var form = $("#joinChatForm");

        this.activePollingXhr($.ajax({url: form.attr("action"), type: "GET", data: form.serialize(), cache: false,
            success: function(messages) {
                console.log(messages);
                for (var i = 0; i < messages.length; i++) {
                    that.chatContent(that.chatContent() + messages[i] + "\n");
                    that.messageIndex(that.messageIndex() + 1);
                }
            },
            error: function(xhr) {
                if (xhr.statusText != "abort" && xhr.status != 503) {
                    resetUI();
                    console.error("Unable to retrieve chat messages. Chat ended.");
                }
            },
            complete: pollForMessages
        }));
        $('#message').focus();
    }

    this.postMessage = function() {
        if (that.message().trim() != '') {
            var form = $("#postMessageForm");
            $.ajax({url: form.attr("action"), type: "POST",
                data: "message=[" + that.userName() + "] " + $("#postMessageForm input[name=message]").val(),
                error: function(xhr) {
                    console.error("Error posting chat message: status=" + xhr.status + ", statusText=" + xhr.statusText);
                }
            });
            that.message('');
        }
    }

    this.leaveChat = function() {
        that.activePollingXhr(null);
        resetUI();
        that.userName('');
    }

    function resetUI() {
        keepPolling = false;
        that.activePollingXhr(null);
        that.message('');
        that.messageIndex(0);
        that.chatContent('');
    }

}

//Activate knockout.js
ko.applyBindings(new ChatViewModel());
//fixing bracet
}); 
```

检查此链接：[http ://www.quirksmode.org/js/this.html](http://www.quirksmode.org/js/this.html)

# javascript - 绑定到 jVectorMap 的缩放和拖动

> ID：15339137
> 
> 赞同：4
> 
> 时间：2013-03-11T12:55:25.867
> 
> 标签：javascript, jquery, jvectormap

jVectorMap 是否具有绑定地图缩放和地图鼠标拖动的内置方法？我没有在文档中找到它们。

我想做这样的事情。

```
var map = $('#world-map').vectorMap();

map.on('zoom', function(){
    ..
}) 
```

当然我可以绑定到初始化 jvectormap 的元素，比如

```
$('#world-map').on('mousewheel', functon(){
    ..
}) 
```

但它看起来像'快速解决方案'..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T11:56:50.400

好的，我在没有内置解决方案的情况下解决了这个问题

用于缩放

```
$('#world-map svg').on('mousewheel', functon(){
    console.log('cool, you are zooming')
}) 
```

用于拖动

```
var isPressed = false;
$('#world-map svg').mousedown(function(){
    isPressed = true;
}).mouseup(function(){
    isPressed = false;
}).mousemove(function(){
    if(isPressed){
        console.log('fine, you are dragging')
    }
}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T12:40:58.110

如果使用 1.1.1 版本，则需要在 api 事件和 applyTransform 方法中添加 onViewportChange 事件。

请检查[http://pastebin.com/s5GwcEMy](http://pastebin.com/s5GwcEMy)

# vb.net - 使用字符串作为对象名

> ID：15339139
> 
> 赞同：2
> 
> 时间：2013-03-11T12:55:37.837
> 
> 标签：vb.net

我正在尝试使用字符串作为对象名称。示例 我有一个对象，并且有一个名称 = Label1。我可以这样做吗？

```
Dim i As String = "Label1"
someVariable = i.Text 
```

我使用字符串作为对象名称，可以吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T13:41:29.633

正如@Christian Sauer 所说，您可以遍历所有控件，但如果任何控件是控件的容器，您可能会遇到问题。你需要做一个递归搜索来解决这个问题。但是，`ControlCollection`实际上有一个[`Find()`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controlcollection.find%28v=vs.80%29.aspx)您可以使用的方法。它返回与名称匹配的控件数组，并可选择执行递归搜索。

```
 ''//Our final control
    Dim someVariable As Control = Nothing
    ''//Search recursively for our control
    Dim SearchedControls = Me.Controls.Find(key:="Label1", searchAllChildren:=True)
    ''//If we found one and only one control
    If SearchedControls.Count = 1 Then
        ''//Set it to our variable
        someVariable = SearchedControls(0)
    Else
        ''//Whatever your logic dictates here
    End If 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T13:16:55.260

这是不可能的 - 但你可以做什么：

```
Dim i As String = "Label1"

Dim Obj  as Label
for each elem in me.controls
   if elem.Name = i then
     Obj =  elem
     exit for
   end if
next

someVariable = obj.Text 
```

我正在遍历所有 WinForms 控件以查找名称为“Label1”的标签 - 找到后，我将标签分配给变量。这可行，但可能非常危险，特别是如果您添加控件

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T15:18:11.663

我知道它已被回答，但这是来自我的图书馆，我一直在使用它。它将按照@ChrisHaas 的建议递归遍历所有控件和容器的控件。

```
Public Function GetControlByName(ByRef parent As Control, ByVal name As String) As Control
    For Each c As Control In parent.ChildControls
        If c.Name = name Then
            Return c
        End If
    Next
    Return Nothing
End Function

<Extension()> _
Public Function ChildControls(ByVal parent As Control) As ArrayList
    Return ChildControls(Of Control)(parent)
End Function

<Extension()> _
Public Function ChildControls(Of T)(ByVal parent As Control) As ArrayList
    Dim result As New ArrayList()
    For Each ctrl As Control In parent.Controls
        If TypeOf ctrl Is T Then result.Add(ctrl)
        result.AddRange(ChildControls(Of T)(ctrl))
    Next
    Return result
End Function 
```

（之前有人问过并回答过） [Web User Control 上的循环控制](https://stackoverflow.com/questions/14860968/loop-through-controls-on-web-user-control/14862704#14862704)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-27T00:35:09.877

我确信它已经得到了回答，但有些地方需要明确它是控制数组和结果，以确保它得到纠正。

```
Private Sub btn1_click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btn1.Click
    Dim Ds As New DataSet

    Dim str As String = ""
    str = " SELECT     TOP (10) t_Suppliers.STNo  from t_Suppliers  "
     Ds = SqlHelper.ExecuteDataset(ConnectionString, CommandType.Text, str)
    For i As Integer = 0 To Ds.Tables(0).Rows.Count - 1
        Dim str1 As String = "lblInv" & i + 1
        Dim OBj As New Label
        Try

       Dim SearchedControls() As Control = Me.Controls.Find(key:=str1, searchAllChildren:=True)
           If SearchedControls.Length > 0 Then
                SearchedControls(0).Text = Ds.Tables(0).Rows(i).Item("STNo").ToString
            End If
        Catch
        End Try
    Next
End Sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-09T03:40:05.520

我在另一个网站上找到了以下解决方案。有用。

- 引用 -

```
 Dim TextBox As TextBox
    Dim I As Integer = 2
    Dim name As String = "TextBox" & I.ToString
    TextBox = Me.Controls.Item(name)
    TextBox.Text = "Something special" 
```

# excel - vba excel：从多个文件夹打开文件（已知文件名）

> ID：15339140
> 
> 赞同：0
> 
> 时间：2013-03-11T12:55:38.643
> 
> 标签：excel, vba, text, import, subdirectory

我试图弄清楚如何将不同文件夹中的文本文件（始终命名为tracks.txt）导入到一个工作簿中，其中包含以该文件夹命名的单独工作表。

基本上它应该像这样工作：

*   选择主文件夹

    *   选择多个子文件夹（包含tracks.txt）

        或者

    *   在以字符串开头的所有子文件夹中搜索（用户输入）

*   在新工作表中导入tracks.txt

*   用子文件夹名替换工作表名

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:05:48.973

```
'//-----------------------------------------------------------------------------------------\\
'||code was made with the great help of bsalv and especially snb from www.worksheet.nl      ||
'||adjusted and supplemented for original question by myself martijndg (www.worksheet.nl)   ||
'\\-----------------------------------------------------------------------------------------//

Function GetFolder(strPath As String) As String
    Dim fldr As FileDialog
    Dim sItem As String
    Set fldr = Application.FileDialog(msoFileDialogFolderPicker)
    With fldr
        .Title = "Select folder with subfolder (containing tracks.txt) NO SPACES IN FILEPATH!!!"
        .AllowMultiSelect = False
        .InitialFileName = strPath
        If .Show <> -1 Then GoTo NextCode
        sItem = .SelectedItems(1) + "\" 'laatste slash toegevoegd aan adres
    End With
NextCode:
    GetFolder = sItem
    Set fldr = Nothing
End Function

Sub importtracks()
Dim subfolder, serie As String

c00 = GetFolder("C:\")

serie = InputBox(Prompt:="partial foldername of serie", _
          Title:="find folders of 1 serie", Default:="track##.")

    If serie = "track##." Or serie = vbNullString Then
        Exit Sub
    End If

    Workbooks.Add

For Each it In Filter(Split(CreateObject("wscript.shell").exec("cmd /c Dir " & c00 & "tracks.txt /b /s").stdout.readall, vbCrLf), ":")
    sn = Split(CreateObject("scripting.filesystemobject").opentextfile(it).readall, vbCrLf)

    With Sheets
        subfolder = Replace(Replace(CreateObject("scripting.filesystemobject").GetParentFolderName(it), "" & c00 & "", ""), "\", "")
    End With
    If InStr(1, subfolder, serie, vbTextCompare) Then
        With Sheets.Add
            .Move after:=Sheets(Sheets.Count)
            .name = subfolder
            .Cells(1).Resize(UBound(sn) + 1) = WorksheetFunction.Transpose(sn)
            .Columns(1).TextToColumns , xlDelimited, semicolon:=True
        End With
    End If
Next

   If Sheets.Count = 3 And Sheets(Sheets.Count).name = "Sheet3" Then
   MsgBox "no subfolder contained the string '" & serie & "' or your choosen filepath contained spaces"
    Application.DisplayAlerts = False
        ActiveWorkbook.Close
    Application.DisplayAlerts = True
   Exit Sub
   End If

Application.DisplayAlerts = False
    Sheets("Sheet1").Delete
    Sheets("Sheet2").Delete
    Sheets("Sheet3").Delete
Application.DisplayAlerts = True

End Sub 
```

# html - 使用 HtmlAgilityPack 获取最后一个 html 表格

> ID：15339142
> 
> 赞同：1
> 
> 时间：2013-03-11T12:55:43.947
> 
> 标签：html, html-table, html-agility-pack

我有一个 html 表格结构。我需要获取`<td>`最终`<tr>`标签中第一个值的值。这是我的表结构。我从下面的函数 getFinalNodeValue 中需要的值是“ **3** ”。

```
 <table id="test">
            <tr>
                <td>ID</td>
                <td>Name</td>
                <td>Age</td>
            </tr>
            <tr>
                <td>1</td>
                <td>Yasoda</td>
                <td>21</td>
            </tr>

            <tr>
                <td>2</td>
                <td>Samantha</td>
                <td>25</td>
            </tr>

            <tr>
                <td>3</td>
                <td>Sajee</td>
                <td>26</td>
            </tr>

        </table> 
```

这是我使用 HtmlAgilityPack 编写的代码。

```
 public String getFinalNodeValue(String URL)
        {
            var webGet = new HtmlWeb();
            var pageSource = webGet.Load(URL);

            var table = pageSource.DocumentNode.SelectSingleNode("//table[@id='test']//tr[1]");

            string id = null;

            IEnumerable<HtmlNode> trNodes = table.DescendantsAndSelf();

            foreach (var currentItem in trNodes)
            {
                if (currentItem == trNodes.Last())
                {
                    IEnumerable<HtmlNode> tdNodes = currentItem.Descendants();

                    foreach (var x in tdNodes)
                    {
                        if(x == tdNodes.First())
            {
                id = x.InnerText;
            }
            else
            {
                break;
            }
                    }

                }
                else
                {
                    continue;
                }
            }

            return id;

        } 
```

该方法不返回值。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T14:20:39.400

这应该这样做：

```
 HtmlDocument doc = new HtmlDocument();
    doc.Load(MyHtmlFile);

    HtmlNode node = doc.DocumentNode.SelectSingleNode("//table[@id='test']/tr[last()]/td");
    Console.WriteLine(node.InnerText); 
```

注意[XPATH last()](http://www.w3schools.com/xpath/xpath_syntax.asp)函数的使用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T12:59:16.837

用于填充`table`变量 -的 XPath`"//table[@id='test']//tr[1]"`选择*第二个* `TR`元素，而不是表。

这很可能应该只是`"//table[@id='test']"`.

此时，要将后代`TR`节点获取到`trNodes`变量中，您应该使用：

```
IEnumerable<HtmlNode> trNodes = table.SelectNodes("tr"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T13:05:24.933

如果你像这样改变你的桌子：

```
<table id="test" runat="server"> 
```

您可以在代码隐藏中对其进行迭代，如下所示：

```
HtmlTable myTable = this.test;
int rowCount = myTable.Rows.Count;
HtmlTableCell td = myTable.Rows(rowCount - 1).Cells(0);
string val = td.InnerText; 
```

# android - 选择 Android xml 文件时，Eclipse 运行按钮不起作用

> ID：15339143
> 
> 赞同：37
> 
> 时间：2013-03-11T12:55:44.507
> 
> 标签：android, eclipse, android-xml, android-sdk-tools

我在 Mac 上有 Eclipse Juno SR1 和 Android SDK Tools 21.1、SDK Platform-tools 16.0.2（最新）。

当我选择了一些 XML 文件并点击运行按钮时，什么也没有发生。我必须在包资源管理器中选择一些 Java 文件或项目。然后它运行。当我编辑 XML 文件时，这很烦人。它在以前版本的 Android SDK 工具中工作。

任何人都知道任何解决方案或解决方法？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-03-11T12:58:29.927

我认为这是由于**ADT 21.1.0**最近的一些变化。无论如何，要解决这个问题，您可以在 Eclipse 中配置以下内容：

> `Window`-> `Preferences`-> `Run/Debug`-> `Launching`->（在启动操作下）**始终启动先前启动的应用程序**

如果您想打开另一个项目，则需要恢复此过程，因为它总是会启动先前启动的应用程序。

另外，请记住，此问题可能会在 ADT 的未来版本中得到解决，因此不要过分依赖此解决方案。

# c++ - 派生类中的 typedef 未知

> ID：15339145
> 
> 赞同：2
> 
> 时间：2013-03-11T12:55:47.817
> 
> 标签：c++, templates, inheritance, typedef

我正在尝试编写一个容器适配器。我也想在派生类中使用基类的类型定义。所以我尝试了以下...

```
template <class CONTAINER> class SequenceComposite {
protected:
    CONTAINER m_data;
public:
    typedef typename CONTAINER::size_type size_type;
    // ...
};

template <class DTYPE>
class VectorComposite : public virtual SequenceComposite< std::vector<DTYPE> > {
public:
    size_type capacity() const { m_data.capacity(); }
    // ...
}; 
```

我收到这个错误...

```
error: ‘size_type’ does not name a type  
note: (perhaps ‘typename SequenceComposite<std::vector<T> >::size_type’ was intended) // yes, it was 
```

如何告诉编译器我想使用基类中的 typedef？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T13:08:02.470

我能够让它工作，这是一篇关于[C++ 模板的从属名称查找](http://eli.thegreenplace.net/2012/02/06/dependent-name-lookup-for-c-templates/)的好文章，其中[介绍](http://womble.decadent.org.uk/c++/template-faq.html#base-lookup)了如何解决这个问题`m_data`：

```
template <class DTYPE>
class VectorComposite : public virtual SequenceComposite< std::vector<DTYPE> >     
{
public:
     typedef typename SequenceComposite< std::vector<DTYPE> >::size_type size_type ;

     size_type capacity() const
        {
          this->m_data.capacity() ;
        }
    // ...
}; 
```

或者，您也可以使用`using`：

```
using typename SequenceComposite< std::vector<DTYPE> >::size_type ; 
```

尽管我认为这并没有变得更好，但`jrok`提出了一个更好的解决方案：

```
 typename VectorComposite::size_type capacity() const
 {
    this->m_data.capacity() ;
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T13:09:00.940

在派生类型的上下文中，`size_type`是一个非依赖名称，因此它将在模板的上下文中查找，而无需实例化基本模板。如果需要使用，最简单的就是在派生类型中*克隆typedef：*

```
typename VectorComposite::size_type size_type; // [*] 
```

^([*])遵循 jrok 对原始错误代码的修复。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T12:58:01.067

`size_type`以这种方式放置基地：

```
typename SequenceComposite<std::vector<DTYPE>>::size_type capacity() const{ //..
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
```

# android - 在finish() 之后发布到Activity 的处理程序的Runnables 会继续执行多久？

> ID：15339146
> 
> 赞同：3
> 
> 时间：2013-03-11T12:55:51.200
> 
> 标签：android, android-activity, android-handler

我有一个`Handler`链接到 UI 线程。正如预期`post()` `Runnable`的那样，我可以使用它并让它们在 UI 线程上执行。我还有一个按钮，按下时会调用`finish()`.`Activity`

对`finish()`UI Handler 的消息队列有何影响？它会处理队列中的所有消息但不再接受吗？它会直接拒绝运行任何东西并立即终止吗（我有理由相信这不是真的）。它会继续允许`Runnable`s 发布到它，直到`onDestroy()`被调用？您应该假设活动堆栈只包含一个活动。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T13:16:39.273

您可以在您的应用程序还活着的`Runnable`任何时候将 s 发布到 UI 线程并且它们将被执行。刚刚完成你的活动。您的 UI 线程并不关心这一点。`Handler``finish()`

但是如果你完成了你的可见活动，Android 可以杀死你的应用程序，并且在那一刻你所有的数据/可运行/线程都将被清除。

所以完成活动可能会导致停止（终止）UI线程，但通常Android会让你的应用程序工作一段时间，即使你没有可见的活动或正在运行的服务。如果您的应用程序资源匮乏，Android 会立即杀死您的应用程序。

# android-webview - Webview 页面加载成功/失败状态

> ID：15339147
> 
> 赞同：2
> 
> 时间：2013-03-11T12:55:54.413
> 
> 标签：android-webview

我需要一些关于 webview 页面加载状态检查页面加载成功/失败的帮助。我知道 Web 视图 onReceivedError 覆盖方法处理失败调用。但我需要找到成功状态，并将状态发送回另一个应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-18T13:23:02.347

不幸的是，Android WebView 中没有实现。

在此相关票证中，许多使用 http-status 的合适解决方法：

[在 Android WebView 中获取 HTTP 状态码](https://stackoverflow.com/questions/11889020/get-http-status-code-in-android-webview)

您的成功案例将是状态代码 200 的响应。

# java - 在 Java 中指示代码是从 IntelliJ/Eclipse 等还是命令行运行

> ID：15339148
> 
> 赞同：6
> 
> 时间：2013-03-11T12:55:54.830
> 
> 标签：java, command-line

如果代码通过 Eclipse/IntelliJ 或任何其他编辑器运行或从命令行运行，我想知道是否有编写程序的选项

我正在考虑使用 System.getProperty() 但是否有任何属性表明它？

提前致谢

尼尔

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2016-05-05T11:27:47.487

以下代码可以检测您的代码是否运行[`IntelliJ IDEA`](https://www.jetbrains.com/idea/)。

```
public static boolean runningFromIntelliJ()
{
    String classPath = System.getProperty("java.class.path");
    return classPath.contains("idea_rt.jar");
} 
```

它已经过测试`Linux`，`Mac OS X`因此`Windows`它应该是独立于平台的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-11T13:19:42.700

没有可靠的方法可以做到这一点。IDE 本身将使用安装在您的系统上的 JRE / JDK 或与 IDE 一起打包的 JRE / JDK。SDK / JVM 中没有任何东西可以明确地将自己标识为在 IDE 中运行。

如果您需要在程序中识别这一点，请在从 IDE 运行代码时通过 -D 标志传递系统属性。此属性的存在（或不存在）可用于确定从何处运行代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-10T13:47:46.147

这仅在您没有使用运行/调试配置中的“缩短命令行”选项之一时才有效。因为我们需要缩短命令行（类路径太长）我现在正在使用

```
public static boolean runningFromIntelliJ()
{
    return System.getProperty("idea.test.cyclic.buffer.size") != null;
} 
```

IntelliJ 在运行测试时设置该属性。

# android - android:actionBarStyle 需要 API 级别 11

> ID：15339150
> 
> 赞同：60
> 
> 时间：2013-03-11T12:55:56.733
> 
> 标签：android, android-actionbar, actionbarsherlock

在使用`ActionBarSherlock`in xml 时：

```
<item name="android:actionBarStyle">@style/Widget.Styled.ActionBar</item> 
```

我收到了这个错误：

```
android:actionBarStyle requires API level 11 (current min is 8) error 
```

我正在使用它将带有操作栏的应用程序反向移植到 2.2 设备。

如何同时使用它们：

```
 <item name="actionBarStyle">@style/Widget.Styled.ActionBar</item>
 <item name="android:actionBarStyle">@style/Widget.Styled.ActionBar</item> 
```

* * *

## 回答 #1

> 赞同：147
> 
> 时间：2013-08-13T18:30:09.030

另一种选择是使用`tools:targetApi`需要`tools`命名空间的属性。`@TargetApi`这与您可以在 java 文件中使用的注解类似。

```
<resources xmlns:tools="http://schemas.android.com/tools">

<style name="MyThemes.MyTheme">
    <item name="actionBarStyle">@style/Widget.Styled.ActionBar</item>
    <item name="android:actionBarStyle" tools:targetApi="11">@style/Widget.Styled.ActionBar</item>
</style>

</resources> 
```

请注意标签`xmlns:tools="http://schemas.android.com/tools"`中的，因为它是必需的。`<resources>`

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2013-03-11T12:59:15.697

您只能使用：

```
<item name="actionBarStyle">@style/Widget.Styled.ActionBar</item> 
```

因为您可以得到错误，所以您`android:actionBarStyle`在 API 级别 11 可用。

* * *

如果您希望能够`ActionBar`在所有 API 级别中设置相同的样式，则需要为所选 API 级别创建不同的文件夹并在这些文件夹中创建新的`style.xml`/文件。`themes.xml`

例如：

```
- res
  -- values
     -- styles.xml
     -- themes.xml // API LEVEL 8+
 -- values-v11
     -- styles.xml
     -- themes.xml // API LEVEL 11+
 -- values-v14
     -- styles.xml
     -- themes.xml // API LEVEL 14+ 
```

* * *

我能想到的第二件事是小心你在不同的 API 级别包含哪些主题到你当前的主题中。

例如，对于 API 级别 8：您将使用`@style/Theme.Sherlock.Light.DarkActionBar`并且必须仅使用`actionBarStyle`. 在为 API 级别 14+ 设置操作栏时，`actionBarStyle`您`Holo.Light`不需要`android:actionBarStyle`.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-11T13:51:06.567

您可以在 Eclipse 中选择错误，然后按“删除”键。然后只需运行该项目，它就会工作。

每次修改 XML 时都会删除这些错误。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-03-11T14:27:21.827

这取决于您要定位的 SDK 版本：

## 目标设计低于 11：

在您`AndroidManifest.xml`使用时：

```
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="x" android:maxSdkVersion="10"/> 
```

x 8-10 之间的任何值（取决于您的代码）

根据您的风格使用：

```
<item name="actionBarStyle">@style/Widget.Styled.ActionBar</item> 
```

* * *

## 定位任何设备：

在您`AndroidManifest.xml`使用时：

```
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="16" /> 
```

示例中使用的 16`ActionBarSherlock`可以大于或等于 11（取决于您的代码）

在你的风格使用两者：

```
<item name="actionBarStyle">@style/Widget.Styled.ActionBar</item> 
<item name="android:actionBarStyle">@style/Widget.Styled.ActionBar</item> 
```

第一个用于`ActionBarSherlock`主题，第二个用于在已经支持的 android 设备中使用相同的主题`ActionBar`

**编辑：**清除 Lint 警告（可能出现的 XML 文件中的红色下划线）：

![清除皮棉警告](../Images/776decbe832bee621c7fdcefc7eedfec.png)

# c - 捕获 c bool 的错误用法

> ID：15339151
> 
> 赞同：20
> 
> 时间：2013-03-11T12:55:57.503
> 
> 标签：c, c99

在 C 项目中（OpenVPN 是有问题的项目，提交[4029971240b6274b9b30e76ff74c7f689d7d9750](https://github.com/OpenVPN/openvpn/commit/4029971240b6274b9b30e76ff74c7f689d7d9750)）我们模拟了 bool

```
typedef int bool;
#define false 0
#define true 1 
```

现在切换到 C99 bool

```
#include <stdbool.h> 
```

但是在项目中，布尔值在*某处*使用不当。我知道 std bool 的行为不同。例如

```
bool t;

t=2;
if ( t == true)
    printf("True!\n");
else
    printf("False!\n"); 
```

将返回真！和`stdbool.h`假！与`#define`仿真。

**我的问题**有没有办法找到这些与 stdbool 和仿真 bool 表现不同的代码部分？也许我忽略了一些编译器标志或可以区分的良好 llvm 或 gcc 中间格式？

它不像上面的例子那么简单，但必须是不那么容易看到的东西。绝对不是a == true。

**更新：** 我们发现了问题（mbuf_set 有一个 int 成员 len）。这有点愚蠢，但问题仍然是如何抓住这些。我很惊讶整数溢出检查没有捕捉到这样的事情：

```
 static inline bool
 mbuf_len (const struct mbuf_set *ms)
 {
   return ms->len;
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T13:32:43.400

您描述的这种用法是正确的，定义明确的行为。所以编译器不会产生任何警告。解决此问题的一种可能方法是更改`typedef`​​：

```
typedef enum {false, true} bool; 
```

这仍将允许代码无错误地编译（因为它已明确定义），但您可以强制来自编译器或分析器的警告。例如，`clang`将选择这种事情`-Weverything`：

```
$ clang -o a a.c -Weverything
a.c:7:11: warning: integer constant not in range of enumerated type 'bool'
      [-Wassign-enum]
        bool n = 2; 
```

当然，这不会进行任何运行时检查。它仍然允许将`typedef`bool 变量更改为 0 或 1 以外的值（例如，通过函数调用或表达式）。检测这些实例的唯一方法是使用调试器。

true 和 false in 的宏`stdbool.h`实际上仅针对该`_Bool`类型而设计。这是因为这种类型只能保存值 0 和 1；您分配的任何不是 0 的值都存储为 1。因此，仅对于布尔类型，true 和 false 宏保证可以工作。

如果没有`_Bool`类型，就无法让语言本身直接为您执行此操作，因为没有可比较的类型，您实际上会要求它允许`2 == 1`返回 true。

有几种方法可以实现相同的行为，例如`BOOL(n)`在使用变量的每个实例中使用宏`n`，以确保其值仅为 0 或 1。这样，无论使用`_Bool`还是`int`for ，您都会得到相同的结果`n`。例如：

```
#define BOOL(n) ((n) != 0 ? 1 : 0 )

bool b = rand() % 100;

if (BOOL(b) == true) ... 
```

无论是使用`stdbool`还是使用`typedef`.

# wordpress - 如何将wordpress中的url从页面id更改为postname？

> ID：15339152
> 
> 赞同：0
> 
> 时间：2013-03-11T12:55:58.227
> 
> 标签：wordpress, .htaccess, url, permalinks

我想更改网址

**example.com/abc/?page_id=1**到

**example.com/postname**。

我尝试了不同的方法，但出现了一些问题....屏幕上出现错误，***在服务器中找不到 url，***我该怎么办..我更改了我的永久链接，.htaccess 文件等。我的 htaccess 文件是

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /abc/projects/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule /abc/projects/index.php [L]
</IfModule>
# END WordPress 
```

我也试过`permalink`选项

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T13:15:02.150

您必须阅读有关 wordpress 的更多信息。这已经在 wordpress 设置中可用。

1.  转到管理部分 -> 设置 -> 固定链接。

2.  将 comman 设置更改为 Post name 并保存更改。

# ruby-on-rails - Rails will_paginate 自定义渲染器手册页码

> ID：15339156
> 
> 赞同：1
> 
> 时间：2013-03-11T12:56:19.220
> 
> 标签：ruby-on-rails, will-paginate, custom-renderer

我想要做的是为 will_paginate 创建一个自定义渲染器，它渲染第一页、上一页、下一页和最后一页以及用户可以手动输入页码的输入字段。我已经有了第一个、最后一个等的链接，但我卡在输入字段上。我可以在视图中创建一个表单，但输入字段必须在上一个和下一个链接之间呈现。有谁知道如何做到这一点？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:13:34.427

您可以将其作为单独的表单执行（确保它是 GET）。您
只需要一个名为 page 的输入元素。像这样简单的东西
应该可以工作（并非所有浏览器都喜欢#）。我把它放到
我现在正在玩的一个网站上，它起作用了。将其放在页面上的任何位置。
如果您需要
合并搜索词，您可能必须使事情变得更复杂。

```
<form action="#" method="get">
  Go to page: <input type="text" name="page" value="" size="2"  
maxlength="4" />
  <input type="submit" name="btnSubmit" />
</form> 
```

# internationalization - 如何在运行时加载 jasperreports 资源包？

> ID：15339158
> 
> 赞同：9
> 
> 时间：2013-03-11T12:56:22.837
> 
> 标签：internationalization, jasper-reports

是否可以在运行时`jasper Reports`加载`ResourceBundle`(for `i18n`)？

我想从 jrxml 文件（例如`c:\reports\report.jrxml`）创建一个报告
，我的标签位于 ( `c:\messages\report.properties`) 的属性文件中。

我只找到了属性文件在类加载器中的示例。

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-11T13:49:43.083

[John Ferguson 的博客](http://www.jroller.com/wakaleo/entry/jasperreports_tip_using_localized_resources)提到诀窍是`REPORT_RESOURCE_BUNDLE`使用自定义 ResourceBundle 实例覆盖参数。

```
// Compiling the report is not a necessary step; prefer using .jasper files
// that have been pre-compiled to avoid this compilation step.
//
JasperDesign jasperDesign = JasperManager.loadXmlDesign("Report.jrxml");
JasperReport jasperReport = JasperManager.compileReport(jasperDesign);

Map parameters = new HashMap();
parameters.put("REPORT_LOCALE",LocaleManager.currentLocale());
parameters.put("REPORT_RESOURCE_BUNDLE",resourceBundle);
Connection conn = DBConnectionFactory.getConnection();
JasperPrint jasperPrint = JasperFillManager.fillReport(jasperReport,
                                                       parameters,
                                                       conn); 
```

`resourceBundle`可以来自任何地方。例如：

```
try(FileInputStream fis = new FileInputStream("/tmp/report.properties")) {
  ResourceBundle resourceBundle = new PropertyResourceBundle(fis);

  // Pass resourceBundle into the report, as shown above.
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-03-25T04:13:35.667

从资源包加载包：

```
ResourceBundle bundle=ResourceBundle.getBundle("/reports/bundles/bundle",Locale.CANADA_FRENCH); 
```

填写报告::

```
 params.put("REPORT_RESOURCE_BUNDLE", bundle);
JasperPrint jasPrint = JasperFillManager.fillReport(reportStream, params, data); 
```

# django - 如何在外键的模板值中显示？

> ID：15339159
> 
> 赞同：1
> 
> 时间：2013-03-11T12:56:23.850
> 
> 标签：django

楷模：

```
class ProductOpinion(models.Model):
    user = models.ForeignKey(User)
    product = models.ForeignKey(Product)
    point = models.IntegerField()

class Product(models.Model):
    name = models.CharField(max_length=255) 
```

如何在我`point`的 ProductOpinion 模板中显示？

```
def index(request):
    products = Product.objects.all()
    return render_to_response('index.html',{'products':products}, context_instance=RequestContext(request)) 
```

模板：

```
{% for p in products %}
  {{ p.point }}
{% endfor %} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T13:19:22.670

如果您想访问点字段，您必须执行以下操作：

```
{% for p in products %}
  {% for productoption in p.productoptions_set.all %}
      {{ productoption.point }}
  {% endfor %}
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T13:00:02.413

你需要使用：

```
{{ p.productopinion_set.all }} 
```

# javascript - 在 iframe 中设置网站样式还是不是由我托管？

> ID：15339164
> 
> 赞同：0
> 
> 时间：2013-03-11T12:56:48.217
> 
> 标签：javascript, css, iframe

设计一个不是由我托管的网站的最佳和最简单的方法是什么？

我使用第 3 方网站获取联系表格，但样式很丑陋。我想把它放在一个 iframe 中并为网站设置样式，但尝试过但失败了。我在这里查看了其他问题，但似乎无法正常工作

这就是我到目前为止所得到的

```
<script>
var cssLink = document.createElement("link");
cssLink.href = "style.css";  cssLink .rel = "stylesheet";  
cssLink .type = "text/css";  
frames['frame1'].document.body.appendChild(cssLink); 
</script>

<iframe src="domain.com" width="200" height="200" frame id="frame1"></iframe> 
```

我还创建了一个名为 style.css 的 CSS

例如，如果页面 im 样式有一个 div 类 example1 我会把它放在我的新 css 上我做错了什么还是有另一种方式来设置这个样式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T13:02:45.020

[由于同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)，您不能这样做。

# xdebug - 无法使用 PhpStorm + Vagrant + XDebug 进行调试

> ID：15339165
> 
> 赞同：23
> 
> 时间：2013-03-11T12:56:48.387
> 
> 标签：xdebug, phpstorm, vagrant

我无法让 XDebug 在 Windows 7 机器上与 PhpStorm 和 Vagrant 一起工作。我已经按照每个教程进行操作，但没有运气。

所以我尝试的是：

*   PhpStorm 总是监听调试连接
*   xdebug.ini 文件包含以下内容：

```
zend_extension = "..../xdebug.so"
xdebug.remote_enable= 1
xdebug.remote_handler=dbgp
xdebug.remote_host= 33.33.33.10
xdebug.remote_port= 9000
xdebug.remote_connect_back= 1
xdebug.remote_autostart= 1
xdebug.remote_log = "...." 
```

*   设置 PhpStorm 以连接到`localhost:8080`和`33.33.33.10`，都没有运气。
*   日志文件始终输出：

```
I: Checking remote connect back address.
W: Remote address not found, connecting to configured address/port: 33.33.33.10:9000\. :-|
E: Could not connect to client. :-( 
```

*   当我尝试调试时，防火墙（ESET Smart Security）总是关闭
*   设置路径映射，也不起作用

我只是不知道该怎么做，但我真的需要能够调试。
谢谢你的帮助！

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-30T22:29:38.037

问题非常愚蠢——我在 Vagrantfile 中转发了端口 9000，而我不必这样做......

现在，实际上我看到 xdebug.ini 中唯一必要的行是：

```
zend_extension = ...
xdebug.remote_enable = on
xdebug.remote_connect_back = on 
```

设置非常简单，如果您不做愚蠢的事情...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:23:06.477

确保从 PHPStorm 连接到正确的 url。例如，我的 vagrant box 的 ip 为 192.168.50.2，所以我必须设置我的项目的 url => 192.168.50.2

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-21T13:00:16.520

我不得不设置

```
xdebug.remote_connect_back = '0'
xdebug.remote_host= '10.0.2.2' 
```

所以我的整个配置看起来像这样：

```
xdebug.default_enable: '1'
xdebug.remote_autostart: '1'
xdebug.remote_connect_back: '0'
xdebug.remote_enable: '1'
xdebug.remote_handler: dbgp
xdebug.remote_host: '10.0.2.2'
xdebug.max_nesting_level: '400' 
```

主机：Linux

VM：Vagrant 与 PuPHPet 使用 VirtualBox

在 PhpStorm 中配置没什么特别的

在这里找到它：http: [//jeromejaglale.com/doc/php/xdebug_vagrant_puphpet_phpstorm](http://jeromejaglale.com/doc/php/xdebug_vagrant_puphpet_phpstorm)

# asp.net - 在 asp.net 中通过 Web API 上传大文件

> ID：15339167
> 
> 赞同：3
> 
> 时间：2013-03-11T12:56:51.200
> 
> 标签：asp.net, upload, httpwebrequest, asp.net-web-api

我正在使用 Web API 来上传视频文件。

以下代码适用于小文件。我已经上传了 7mb 个文件。 [如何使用api进行多部分视频上传](https://stackoverflow.com/questions/14830257/how-to-do-multi-part-video-upload-using-api)

接下来我正在上传 200 MB 文件，但它无法正常工作并抛出异常“请求已取消”

我仍在努力找出细节。如果有人有这方面的经验可以提供帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T19:14:38.310

您的代码可能是正确的，因为它适用于小文件，但不要忘记更新 IIS7 或 IIS8 的配置以允许超过 30MB 的 POST 大小（IIS 的默认限制设置为 30MB）。

您需要编辑`web.config`并添加：（在此示例中，它最多允许 250MB）

```
<system.webServer>
   <security>
          <requestFiltering>
                <requestLimits maxAllowedContentLength="262144000"/>
          </requestFiltering>
   </security>
</system.webServer> 
```

# php - 如何在 ajaxplorer 中验证来自远程服务器的用户

> ID：15339170
> 
> 赞同：2
> 
> 时间：2013-03-11T12:57:13.843
> 
> 标签：php, ajax, prototype, pydio

实际上，对于一个应用程序，我正在使用 Ajaxplorer，并且我有一个特定的域进行身份验证（即 www.example.com），并且我正在尝试对来自该域的用户进行身份验证，我从以下链接尝试了很多实现

*   [将 AjaXplorer 身份验证与另一个应用程序桥接](http://ajaxplorer.info/documentation/developer-documentation/chapter-external-bridge/)
*   [所有身份验证插件](http://ajaxplorer.info/plugins/auth/)

但我无法/无法做到这一点。任何机构都知道如何做到这一点

# matlab - 下标索引必须是实数正整数或逻辑数

> ID：15339173
> 
> 赞同：1
> 
> 时间：2013-03-11T12:57:35.187
> 
> 标签：matlab, bsxfun

我编写了一个函数来对具有三行的矩阵的每一行求和。

然后使用具有一行和三列的矩阵来划分先前的结果。

但我不断收到这个错误。我知道下标不应该是小数或负数。但我还是找不到罪魁祸首。请帮忙，谢谢。

```
% mean_access_time(ipinfo_dist, [306, 32, 192])
% 'ipinfo_dist' is a matrix which have three rows and column is not fixed.

function result = mean_access_time(hash_mat, element_num)
    access_time_sum = sum(rot90(hash_mat));    
    result = bsxfun (@rdivide, access_time_sum, element_num); 
```

例如：

一个=

```
1 2 
3 4
5 6 
```

乙= 7 8 9

然后我想得到

```
 [(1+2)/7, (3+4)/8, (5+6)/9] 
```

更新：

```
>> which rot90
/lou/matlab/toolbox/matlab/elmat/rot90.m
>> which sum
built-in (/lou/matlab/toolbox/matlab/datafun/@uint8/sum)  % uint8 method 
```

**罪魁祸首：** 我在前面的命令行中使用 mean_access_time 作为变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:04:57.017

似乎您已经用变量名覆盖了内置函数（`rot90`或）。`sum`

类型

```
>> dbstop if error 
```

并运行您的代码。

当错误发生时类型

```
K>> which rot90
K>> which sum 
```

查看您是否获得了内置函数或变量名。

# ios - 如何找到两个字符串之间的子字符串？

> ID：15339174
> 
> 赞同：20
> 
> 时间：2013-03-11T12:57:38.380
> 
> 标签：ios, objective-c, ios5, ios6, ios4

我有一个字符串“你好……你好吗”

我想在你之后和之前找到子字符串..

如何在目标 c 中做到这一点？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2013-03-11T13:03:10.710

找到两个字符串的范围并返回其间的子字符串：

```
NSString *s = @"hi how are... you";

NSRange r1 = [s rangeOfString:@"how"];
NSRange r2 = [s rangeOfString:@"you"];
NSRange rSub = NSMakeRange(r1.location + r1.length, r2.location - r1.location - r1.length);
NSString *sub = [s substringWithRange:rSub]; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-11T13:00:57.297

你可以使用 NSString 的方法`substringWithRange`

例子

```
NSString *string=@"hi how are you";
NSRange searchFromRange = [string rangeOfString:@"how"];
NSRange searchToRange = [string rangeOfString:@"you"];
NSString *substring = [string substringWithRange:NSMakeRange(searchFromRange.location+searchFromRange.length, searchToRange.location-searchFromRange.location-searchFromRange.length)];
NSLog(@"subs=%@",substring); //subs= are 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T12:58:59.810

的使用`SubstringTOIndex`和`SubstringFromIndex`功能`NSString`。Where`SubstringFromIndex`为您提供了`string`您传递的索引 &`SubstringToIndex`函数为您提供了`string`您传递的索引。

还可以尝试`substringWithRange`返回`string`您传递的范围之间的函数。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-11T13:00:32.587

使用`substringWithRange`...

```
NSString* substring = [originalString substringWithRange:NSMakeRange(3, originalString.length-6)]; 
```

# html - Css 悬停在图像上 - 加载一个 div

> ID：15339182
> 
> 赞同：7
> 
> 时间：2013-03-11T12:57:48.413
> 
> 标签：html, css

我想对悬停图像做一个 CSS 效果。

当我将鼠标悬停在图像上时，我想显示一个包含文本等内容的 div。

所以我想用这段代码做点什么：

```
<div id="image"><img src="image.png"/></div>

<div id="hover">Test message</div> 
```

我试图在css显示中隐藏“悬停” div，在悬停时我试图将显示设置为阻止，但它不起作用......:(

编辑：我想要图像上的文字。当我将图像悬停时，它应该有一些不透明度，但文本不应该收到那种不透明度！

有什么方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-11T13:02:40.857

**[http://jsfiddle.net/ZSZQK/](http://jsfiddle.net/ZSZQK/)**

```
#hover {
    display: none;
}

#image:hover + #hover {
    display: block;
} 
```

保持简单，无需更改标记。

* * *

**更新**

如果你想在鼠标悬停时改变图像的不透明度，那么 **[http://jsfiddle.net/ZSZQK/4/](http://jsfiddle.net/ZSZQK/4/)**

```
#hover {
    display: none;
    position: relative;
    top: -25px;
}

#image:hover {
    opacity: .7;
}

#image:hover + #hover {
    display: block;
} 
```

* * *

**更新 2**

由于您在最初的问题中添加了更多要求，因此现在需要更改原始 html 标记。

我假设您正在使用`html5`，如果是这样，您应该使用适合您的内容上下文的标签：

```
<figure>
    <img src="http://placekitten.com/200/100" />
    <figcaption>Test message</figcaption>
</figure> 
```

和CSS

```
figure {
    position: relative;
    display: inline-block;
}

figcaption {
    display: none;
    position: absolute;
    left: 0;
    bottom: 5px;
    right: 0;
    background-color: rgba(0,0,0,.15);
}

figure:hover img {
    opacity: .7;
}

figure:hover figcaption {
    display: block;
} 
```

**[jsFiddle](http://jsfiddle.net/ruisoftware/ZSZQK/7/)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T13:00:51.807

尝试：

```
<div id="image">
    <img src="image.png"/>
    <div class="hover">Test message</div>
</div> 
```

CSS：

```
#image {
    position:relative;
}

#image .hover {
    display:none;
    position:absolute;
    bottom:0;
}

#image:hover .hover {
    display:block;
} 
```

基本上我所做的是：

*   将文本 div 移动到 div 内`#image`。
*   改为`id="hover"`_`class="hover"`
*   添加`display:block`何时`#image`悬停，`display:none`如果没有。
*   一些定位规则，这只是一个快速的例子，让我知道它是否有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T13:02:59.317

有很多方法可以做到这一点，但如果您想要仅使用 CSS 的方法，则需要将您的 html 重组为：

```
<div id="image">
    <img src="image.png"/>
    <div id="hover">Test message</div>
</div> 
```

然后在您的 CSS 中默认隐藏消息：

```
#hover {display:none;} 
```

然后显示消息：

```
#image:hover #hover {display:block;} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T13:19:59.253

你好如果我理解正确你想要这样的东西：

```
<div id="wrapper">
    <div id="img-wrapper">
        <img src="https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcSp7bY6nYWTDmFXKSlP4TdCe5ghVQhbt85tQMS8dfZMEGw7QOXiLA">
    </div>
    <div id="text-wrapper">
        <p>Hello world!</p>
    </div>        
</div> 
```

CSS：

```
#wrapper{
    position:relative;
    border:1px solid black;
    width:102px;
    height:102px;
}

#text-wrapper{
    position:absolute;
    height:0px;
    overflow:hidden;
    font-size:14px;
    font-family:Arial,Tahoma;
    font-weight:bold;

    transition: height 1s;
    -moz-transition: height 1s; /* Firefox 4 */
    -webkit-transition: height 1s; /* Safari and Chrome */
    -o-transition: height 1s; /* Opera */

}

#img-wrapper:hover + #text-wrapper{
    height:32px;
    width:102px;
} 
```

实现这一点的关键是这个 css 行：

```
#img-wrapper:hover + #text-wrapper{ 
```

它实际上做的是“当我将 img-wrapper div 悬停在 text-wrapper div 中时”

在此处查看演示：http: [//jsfiddle.net/A9pNg/1/](http://jsfiddle.net/A9pNg/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T13:02:41.710

如果没有 JavaScript，你可以这样做：

1.将`#hover` `div`图像放在图像顶部并设置`opacity:0`；

2.将其添加到 css 中：

```
 #hover:hover {
     opacity:1
     } 
```

这应该可以解决您的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-11T13:11:34.473

这是我在谷歌上找到的解决方案

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
                <html xmlns="http://www.w3.org/1999/xhtml">
                <head>
                <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
                <title>Untitled Document</title>
                </head>
                <style type="text/css">
                #mybox {
                width:80px;
                height:90px;
                float:left;
                background-color:#0F9;
                padding:10px;
                }
                .Imgdiv {
                width:80px;
                height:20px;
                margin:0px 0px 10px 0px; padding:0px;
                cursor:pointer;
                background-color:#39C;
                }
                #mybox .hiddenDiv {
                left:0px;
                display:none;
                z-index:100;
                width:80px;
                height:50px;
                margin:0px;
                background-color:#336;
                float:left;
                }
                #mybox:hover .hiddenDiv {
                display:block; top:0px; left:8px;
                }
                </style>
                <body>
                <div id="mybox">
                <div class="Imgdiv"></div>
                <div class="hiddenDiv"></div>
                </div>

                </body>
                </html> 
```

# symfony - 如何在 Symfony2 中写入我的 css 文件的路径

> ID：15339187
> 
> 赞同：1
> 
> 时间：2013-03-11T12:58:05.157
> 
> 标签：symfony, twig

对不起这个问题，但我不记得路径是如何写的，所以请帮我指定我的路径。

我想指定css文件路径的基本模板在这里（如果在基本模板中添加css文件的路径是个好主意）：

`Project/app/Resources/views/base.html.twig`

css文件在这里：

`Project\src\Acme\MyBundle\Resources\public\css\style.css`

我也运行`assets:install`所以 css 文件也在这里：

`Project\web\bundles\acmemybundle\css\style.css`

所以我的问题是在哪里提供路径`base.html.twig`（到 web 文件夹或我的包中的文件夹）以及如何编写它：

```
<link href="{{ asset('path') }}" rel="stylesheet" type="text/css" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T13:07:50.513

普通链接：

```
<link href="{{ asset('bundles/acmemybundle/css/style.css') }}" rel="stylesheet" type="text/css" /> 
```

如果要应用`cssrewrite`过滤器：

```
{% stylesheets filter='cssrewrite'
  'bundles/acmemybundle/css/style.css'      
 %}
  <link rel="stylesheet" href="{{ asset_url }}" media="screen" />      
{% endstylesheets %} 
```

如果你想应用`compress`过滤器

```
{% stylesheets filter='?yui_css'
  '@AcmeMyBundle/Resources/public/css/style.css'      
 %}
  <link rel="stylesheet" href="{{ asset_url }}" media="screen" />      
{% endstylesheets %} 
```

# java - Spring Controller 生成的无效 JSON 内容（使用 Jackson 库）

> ID：15339190
> 
> 赞同：0
> 
> 时间：2013-03-11T12:58:09.710
> 
> 标签：java, json, spring, spring-mvc, jackson

由于某种我不知道的原因，当向我的 Spring 控制器发出请求时，它返回了一个无效的 JSON 值。我正在使用 Jackson 来映射我的 JSON 对象。这是我发出请求时返回的数据：

```
{} && 
{
    "registros": [
        {
            "id": 251,
            "matricula": "32849923",
            "dadoPessoal": {
                "nome": "Testando",
                "email": "tiare@terra.com.br",
                "telefone": "1235324812",
                "celular": "123832911",
                "foto": null,
                "salario": 3829
            },
            "status": true,
            "nascimento": {
                "dataNascimento": 1417485600000,
                "nascionalidade": "Brasil",
                "localNascimento": "SP"
            },
            "documentoPessoal": {
                "rg": "8329892332",
                "orgaoEmissor": "SSP/SP",
                "dataEmissao": 1417485600000,
                "cpf": "016.015.XXX-XX",
                "tituloEleitor": "adw91021",
                "zonaDeVoto": "91aa",
                "sessaoVoto": "2a",
                "enderecoVoto": "adw"
            },
            "dataAdmissao": 1361674800000,
            "dataDesligamento": null,
            "version": 0
        }
    ],
    "total": 1
} 
```

这里的问题是某种无效字符“{} &&”被添加到 JSON 的开头。我不明白的是如何？它添加了这些在我的 Spring 方法中未定义的值。

我的请求映射：

```
@Override
@RequestMapping(value = { "/", "" }, method = RequestMethod.GET)
public ModelAndView index() {
    ModelAndView view = new ModelAndView(VIEW_INDEX);

    view.addObject("registros", service.findAll());
    view.addObject("total", service.findAll().size());
    return view;
} 
```

杰克逊配置：

```
/**
 * @return MappingJacksonJsonView
 */
@Bean
public MappingJacksonJsonView mappingJacksonJsonView() {
    MappingJacksonJsonView mappingJacksonJsonView = new MappingJacksonJsonView();
    mappingJacksonJsonView.setContentType("application/json");
    mappingJacksonJsonView.setObjectMapper(this.objectMapper());
    mappingJacksonJsonView.setEncoding(JsonEncoding.UTF8);
    mappingJacksonJsonView.setPrefixJson(true);
    return mappingJacksonJsonView;
}

/**
 * @return ContentNegotiatingViewResolver
 */
@Bean
public ContentNegotiatingViewResolver contentNegotiatingViewResolver() {
    List<ViewResolver> viewResolvers = new ArrayList<ViewResolver>();

    // Tiles
    viewResolvers.add(this.tileViewResolver());

    // Views 
    List<View> defaultViews = new ArrayList<View>();
    defaultViews.add(this.mappingJacksonJsonView());

    ContentNegotiatingViewResolver contentNegotiatingViewResolver = new ContentNegotiatingViewResolver();

    contentNegotiatingViewResolver.setViewResolvers(viewResolvers);
    contentNegotiatingViewResolver.setDefaultViews(defaultViews);
    contentNegotiatingViewResolver.setOrder(0);

    return contentNegotiatingViewResolver;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T13:20:47.393

谢谢大家。我发现了错误！！当我开始阅读 javadoc 时，我发现：

"指示此视图的 JSON 输出是否应以 "{} && " 为前缀。默认为 false。"

[springsource 文档](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/web/servlet/view/json/MappingJacksonJsonView.html#setPrefixJson%28boolean%29)

# android - IndexOutOfBoundsException 错误发生取决于 Android 操作系统版本

> ID：15339204
> 
> 赞同：0
> 
> 时间：2013-03-11T12:58:54.207
> 
> 标签：android, json, indexoutofboundsexception

我拼命地试图修复一个错误：

*   总是在我的 Android 版本 2.2、2.3 的模拟器中发生
*   在模拟器 android 版本 4.* 中永远不会发生
*   在真实设备中永远不会发生（android 4.*）

它是以下 IndexOutOfBoundsException 异常：

```
java.lang.RuntimeException: Unable to start activity
ComponentInfo{<myapppackage>}: java.lang.IndexOutOfBoundsException:
Invalid index 39, size is 0 
```

在我的应用程序中，我正在从显示为文本的 json 文件中提取数据。我已经确定了错误的来源，即当我调用此方法时：

```
public String getItemValue(int id, String s) {      

    List<JsonItems> list = new ArrayList<JsonItems>();

    try {
        // CONVERT RESPONSE STRING TO JSON ARRAY
        JSONArray ja = new JSONArray(s);

        // ITERATE THROUGH AND RETRIEVE 
        int n = ja.length();            

        for (int i = 0; i < n; i++) {
            // GET INDIVIDUAL JSON OBJECT FROM JSON ARRAY
            JSONObject jo = ja.getJSONObject(i);

            // RETRIEVE EACH JSON OBJECT'S FIELDS
            JsonItems ji = new JsonItems();
            ji.id = jo.getInt("id");
            ji.text= jo.getString("text");
            list.add(ji);

        }
    } catch (Exception e) {
        e.printStackTrace();
    }
    return list.get(id).text; 
} 
```

我的 JsonItems 类非常基础：

```
public class JsonItems{
int id;
String text;
} 
```

我的 json 文件中的示例：

```
[
{"id":0,"text":"some text 0"},
{"id":1,"text":"some text 1"},
{"id":2,"text":"some text 2"}
] 
```

这是我将 json 文件的内容处理为字符串的方法

```
public static String fromJsonFileToString(String fileName, Context c) {
    //JSONArray jArray = null;
    String text = "";
    try {
        InputStream is = c.getAssets().open(fileName);
        int size = is.available();
        byte[] buffer = new byte[size];
        is.read(buffer);
        is.close();
        text = new String(buffer);

    } catch (IOException e) {
        throw new RuntimeException(e);
    }
    return text;

} 
```

我再重复一遍：IndexOutOfBoundsException 永远不会在装有 Android 4.* 的设备上发生，它仅在我在装有 Android 2.* 的模拟器上测试应用程序时才会发生

知道它来自哪里吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T14:57:32.020

**第一个问题**：

您没有正确读取输入流。从字面上调用就是这样做的 - 它会在调用***时***`available`返回您可以读取的*数据*量。*这个数字可能代表文件的全部内容，也可能不代表文件的全部内容*。

 ***为您准备的阅读材料：

*   [如何在 Java 中读取文件](http://www.mkyong.com/java/how-to-read-file-from-java-bufferedreader-example/)。
*   [编写和创建文件](http://docs.oracle.com/javase/tutorial/essential/io/file.html)

请注意，有一些帮助程序库，如[Apache Commons IO](http://commons.apache.org/proper/commons-io//)，可以在一行代码 ( `IOUtils.toString(inputStream)`) 中读取文件内容。Android 尚不支持 Java 7，但在该版本中提供了一个值得注意的替代方法，即该[`Files.readAllLines`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#readAllLines%28java.nio.file.Path,%20java.nio.charset.Charset%29)方法。在任何情况下，您都可以对文件读取代码进行如下所示的更改，它应该会更好地工作：

```
public static String fromFileToString(String fileName, Context context) {
    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                context.getAssets().open(fileName)));

        String line = null;
        StringBuilder builder = new StringBuilder(1024);
        while ((line = reader.readLine()) != null) {
            builder.append(line);
        }

        return builder.toString();
    } catch (IOException e) {
        throw new RuntimeException(e);
    }
} 
```

**第二个问题：**

您不进行任何绑定检查，以确保您传递给“搜索”方法的参数：

```
public String getItemValue(int id, String s) 
```

不超过您最终计算的项目列表的长度：

```
return list.get(id).text;
//              ^
// -------------
// 'id' could be larger than the list size! 
```

无论如何，您当前的设计根本不符合您**真正**想要做的事情，也就是确定 JSON 数组中具有与您提供给该方法的内容匹配的“id”字段的元素。您需要将 JSON 数据作为地图处理，以便能够执行此操作。

```
public String getItemValue(int id, String json) {
    if(json == null || json.trim().equals("")) return null;

    Map<Integer, JsonItems> map = new HashMap<Integer, JsonItems>(4);

    try {
        JSONArray ja = new JSONArray(json);

        int n = ja.length();

        for (int i = 0; i < n; i++) {
            JSONObject jo = ja.getJSONObject(i);

            JsonItems ji = new JsonItems();
            ji.id = jo.getInt("id");
            ji.text = jo.getString("text");
            map.put(Integer.valueOf(ji.id, ji);
        }
    } catch(NumberFormatException nfe) {
      throw new IllegalArgumentException("Invalid JSON format");  
    } catch (Exception e) {
        throw new RuntimeException(e);
    }

    JsonItems item = map.get(id);
    return item != null ? item.text : null;
} 
```

一些快速说明：

*   JsonItems 应该被称为 JsonItem，以符合良好的 Java 命名标准
*   你真的应该只解析和存储一次 JSON，以提高性能
*   您实际上只使用 JSON 数据的最小子集，您实际上可以在 for 循环中确定匹配节点并直接返回其值，而无需使用中间 Java bean 对象***

# php - Php POST表单日期到外部网站并在外部网站中设置会话？

> ID：15339205
> 
> 赞同：0
> 
> 时间：2013-03-11T12:58:55.510
> 
> 标签：php, mysql, session

我想将表单数据发布到外部网站。可以说我正在父网站中进行验证（从我发送数据的地方）。稍后我想在外部网站中操作 FORM 数据，与那里的数据库交互，我什至想在外部网站中设置一个会话。我怎样才能做到这一点？

在父网站中提交表单后，获取我想在外部网站中创建用户并希望在外部网站中设置用户会话以自动登录的日期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:14:40.603

> 在父网站中提交表单后，获取我想在外部网站中创建用户并希望在外部网站中设置用户会话以自动登录的日期。

假设*外部网站*是指“不受您控制且不与您合作的网站”，则：

**你不能这样做。**

外部网站几乎肯定会使用 cookie 来跟踪用户。虽然您可以从 PHP 登录，但您的站点无法告诉用户的浏览器存储这些 cookie，就好像它们来自外部站点一样。

**你不应该这样做。**

在网站上创建帐户通常涉及：

*   接受条款和条件（您不太可能处于允许您代表用户行事的法律地位）
*   设置个人凭据，例如密码（您作为第三方不应访问）

* * *

另一方面，如果外部站点*是*合作伙伴或在您的控制之下，那么请考虑实施[OAuth](http://oauth.net/)。

# c++ - 获取指向 SWIG 对象基类的指针

> ID：15339210
> 
> 赞同：2
> 
> 时间：2013-03-11T12:59:09.483
> 
> 标签：c++, python, callback, swig

我正在使用一个用 C++ 编写并通过 SWIG 暴露给 Python 的库。类层次结构如下所示：

```
PublicLib:
   MyBaseClass

PrivateLib:
   MyAbstractClass

   SomePrivateSubclass : MyAbstractClass, MyBaseClass
... 
```

注意这里的多重继承方案。另外，请注意 PublicLib 和 PrivateLib 中的类都作为 Python 对象公开给我。

现在，我想调用另一个库中的 C++ 函数，传递一个指向其中一个`SomePrivateSubClass`对象的指针。该函数如下所示：

```
void RegisterCallback(void* param); 
```

然后，我希望我会通过回调接收到对象，即：

```
void SomeCallback(void* param) {
    MyBaseClass& cls = *(MyBaseClass*)param;
    cls.xxxx; // FAIL
} 
```

它失败的原因是我收到的指针不是指向基类 ( `MyBaseClass`)，而是指向子类之一。在“普通”C++ 中，我会执行以下操作：

```
void RegisterCallback(MyBaseClass* param) { ... }

void SomeCallback(void* param) {
    MyBaseClass& cls = *(MyBaseClass*)param;
    cls.xxxx; // FAIL
} 
```

编译器会为我处理所有这些。

问题是，在这种情况下，我有什么方法可以获取指向基类的指针吗？我可以在 Python 端操作代码，但在 SWIG 中似乎无法转换为基类（我可以看到）。我也尝试过使用 RTTI，但似乎虽然我可以获得类型标识符，但我无法获得任何其他类型信息，例如大小或指向基类的指针。

# algorithm - 递归算法的时间使用

> ID：15339211
> 
> 赞同：-2
> 
> 时间：2013-03-11T12:59:11.493
> 
> 标签：algorithm

我和我的朋友讨论了以下算法问题，

```
"Describe a recursive algorithm for finding the maximum element in an array A of n        
elements. What is your running time and space usage?" 
```

我们得出结论，它有 O(n) 的时间使用。根据此语句，**F(n) =compare A[n] 与 F(n-1)**，在递归的基本情况下，它比较 A[0] 和 A[1]，然后返回更大的一个，它将与A2]。随着递归的进行，最终，它将返回数组中的最大元素。

每 n 次递归，它只比较一次，所以最后我们猜测它有 O(n) 的时间使用。我的问题是我们不确定我们的解决方案，所以我们想要关于这个算法和我们的解决方案的任何其他评论。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:14:43.333

是的。你是对的，这是事实`O(n)`。你可以做的很简单是，

该算法的基本操作是比较。并且在递归步骤中，比较只进行一次。

所以你可以说

```
m(n) = m(n-1) + 1
m(n-1) = m(n-2) + 1 + 1
m(n-2) = m(n-3) + 2 + 1 
```

概括我们得到

```
m(n-i) = m(n-1-i) + i + 1 
```

现在在您的基本情况下，您将不进行任何比较（基本情况没有剩余元素，因此您返回当前最大的）。你可以这样写

```
m(0) = 1 
```

现在代入递推方程得到基本情况，让`i = n-1`

我们得到

```
m(n) = m(0) + n - 1 + 1 
```

但`m(0) = 0`

所以我们得到

```
m(n) = n 
```

因此你的算法是`O(n)`。还有其他方法可以证明这一点。即使没有数学证明，您也可以在逻辑上说您的算法是`O(n)`因为它在每个递归步骤中只执行一个基本操作，并且该算法将始终递归 n 步骤，而与输入无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:16:54.040

如果数组包含`integers`. 在数字的情况下，比较两个数字可以被认为是一个单元操作。并且在遍历数组时，为了找到最大值，这个操作被执行了`n`几次。因此`O(n)`。

但是如果数组包含复杂的数据类型，比如`string`，那么比较两个字符串不能被视为一个单元操作。要比较字符串，您可能必须遍历字符串的每个字符。在这种情况下，算法的时间复杂度也可能取决于数组中字符串的长度。同样对于其他数据类型，比较两个对象可能不是单元操作。但在你的情况下，看起来数组包含数字，所以你很好。

# python - 计算矩阵的每个元素

> ID：15339212
> 
> 赞同：4
> 
> 时间：2013-03-11T12:59:12.007
> 
> 标签：python, matrix, numpy, linear-algebra

这是我必须为我的 Numpy 矩阵的每个元素计算的公式：

```
Mi_j = Sum_v(Av * Xi_v) + Sum_v(Bv * Wj_v) + Sum_v(Gv * Zij_v) 
```

我真的不知道如何以 numpy 的方式对其进行编码（在 python 中它太长了）：vectorized / slicing / C Api。

你有什么建议，你能给我一个简单的例子吗？我是 numpy 的新手。

@Edited 索引

*   A, B, G 是一维数组 [x,x,x]
*   Xi 和 Wj 相同（X 是矩阵，W 是矩阵）
*   Zij 是一维数组

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T16:26:30.417

我个人认为确定代数过程更具可读性，然后使用 numpy 矩阵将它们作为标准。`matrix`如果您的工作完全是数学的，那么如果您使用 numpy类，将数学转换为代码会容易得多，反之亦然。

这也将帮助您避免必须仔细广播。

从...开始：

```
Mi_j = Sum_v(Av * Xi_v) + Sum_v(Bv * Wj_v) + Sum_v(Gv * Zij_v) 
```

在 numpy 中变成：

```
M = X*A + (W*B).T + Z*G 
```

如果将每个矩阵初始化为`np.matrix`，则会自动完成正确的代数。

```
import numpy as np
N = 5

A = np.asmatrix(np.arange(N)).T
B = np.asmatrix(np.arange(N)).T
G = np.asmatrix(np.arange(N)).T

X = np.asmatrix(np.arange(N*N).reshape(N,N))
W = np.asmatrix(np.arange(N*N).reshape(N,N))

Z = np.asmatrix(np.arange(N**3).reshape(N,N,N)) 
```

请注意，我已经`transpose`d 了 1d 矩阵，因为默认情况下 1d 矩阵是行向量。真向量是列向量。之后，您不再需要担心广播。

```
M = X*A + (W*B).T + Z*G
print M
[[  90  190  290  390  490]
 [ 390  490  590  690  790]
 [ 690  790  890  990 1090]
 [ 990 1090 1190 1290 1390]
 [1290 1390 1490 1590 1690]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T13:24:31.780

让我们通过一个简单的例子来工作：

如果我们定义：

```
import numpy as np
N = 5
A = np.arange(N)
X = np.arange(N*N).reshape(N,N)

B = np.arange(N)
W = np.arange(N*N).reshape(N,N)

G = np.arange(N)
Zij = np.arange(N) 
```

然后第一个总和`Sum_v(Av * Xi_v)`可以用 计算`np.dot`：

```
In [54]: X
Out[54]: 
array([[ 0,  1,  2,  3,  4],
       [ 5,  6,  7,  8,  9],
       [10, 11, 12, 13, 14],
       [15, 16, 17, 18, 19],
       [20, 21, 22, 23, 24]])

In [55]: A
Out[55]: array([0, 1, 2, 3, 4])

In [56]: np.dot(X, A)
Out[56]: array([ 30,  80, 130, 180, 230]) 
```

类似地，第二个总和`Sum_v(Bv * Wj_v)`可以计算为：

```
In [58]: np.dot(W,B)
Out[58]: array([ 30,  80, 130, 180, 230]) 
```

但是，我们希望第一个和产生一个沿`i`-index 变化的向量，而我们希望第二个和产生一个沿`j`-index 变化的向量。要在 numpy 中进行安排，请使用广播：

```
In [59]: np.dot(X,A) + np.dot(W,B)[:,None]
Out[59]: 
array([[ 60, 110, 160, 210, 260],
       [110, 160, 210, 260, 310],
       [160, 210, 260, 310, 360],
       [210, 260, 310, 360, 410],
       [260, 310, 360, 410, 460]]) 
```

第三个和是两个一维数组之间的简单点积：

```
In [60]: np.dot(Zij, G)
Out[60]: 30 
```

所以把这一切放在一起，

```
In [61]: M = np.dot(X,A) + np.dot(W,B)[:,None] + np.dot(Zij, G)

In [62]: M
Out[62]: 
array([[ 90, 140, 190, 240, 290],
       [140, 190, 240, 290, 340],
       [190, 240, 290, 340, 390],
       [240, 290, 340, 390, 440],
       [290, 340, 390, 440, 490]]) 
```

* * *

注意我可能误解了`Zij`. 尽管您说它是一维数组，但也许您的意思是*对于每个* `i,j`它都是一维数组。然后`Z`将是3维的。

为了具体起见，假设 的前两个轴`Z`表示`i`和`j`- 索引，最后一个轴`Z`是您希望总结的轴。

在这种情况下，您希望最后一项是`np.dot(Z, G)`：

```
In [13]: Z = np.arange(N**3).reshape(N,N,-1)

In [14]: np.dot(X,A) + np.dot(W,B)[:,None] + np.dot(Z, G)
Out[14]: 
array([[  90,  190,  290,  390,  490],
       [ 390,  490,  590,  690,  790],
       [ 690,  790,  890,  990, 1090],
       [ 990, 1090, 1190, 1290, 1390],
       [1290, 1390, 1490, 1590, 1690]]) 
```

# linux - 如何对多个文件进行排序？Unix

> ID：15339214
> 
> 赞同：0
> 
> 时间：2013-03-11T12:59:12.477
> 
> 标签：linux, bash, shell, unix, sorting

通常我可以这样做来对文本文件进行排序：

```
cat infile.txt | sort > outfile.out
mv outfile.out > infile.txt 
```

我也可以循环执行：

```
for inp in ./*; do
    fname=${inp##*/}
    cat "$inp" | sort  > ./"$fname".out
done 
```

除了编写一个循环之外，是否有一种方法可以对终端中的所有文件执行上述操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T13:15:54.077

这让我觉得这是一个荒谬的练习，因为循环没有任何问题，但你可以这样做：

```
ls | xargs -n 1 sh -c 'sort $1 > $1.tmp; mv $1.tmp $1' sh 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T13:01:35.370

与`GNU sort`您一起可以：

```
$ sort file -o file 
```

您可以使用`xargs`而不是像这样循环：

```
$ ls | xargs -i% -n1 sort % -o % 
```

如果您没有`-o`选项：

```
$ sort file > tmp && mv tmp file 

$ ls | xargs -i% -n1 sort % > tmp && mv tmp % 
```

# java - Spring MVC 控制器响应作为静态内容缓存在浏览器中

> ID：15339216
> 
> 赞同：0
> 
> 时间：2013-03-11T12:59:16.220
> 
> 标签：java, spring, hibernate, spring-mvc, tiles

我希望我对 Spring MVC 控制器的响应被视为浏览器中的静态内容。只需获取一次，然后从浏览器缓存中获取它以获取`304 Not Modified`状态代码。我有简单的方法的普通 Spring MVC 控制器。`simpleService.getVariables()`正在从数据库中获取大量内容。它返回字符串。

```
@RequestMapping(value = "/jsContent.htm")
public ModelAndView jsContent(@RequestParam("ver") String version, 
        HttpServletRequest request, HttpServletResponse response) {
    ModelAndView mav = new ModelAndView("jsContent");
    mav.addObject("variables", simpleService.getVariables());
    return mav;
} 
```

响应由 Apache Tiles 处理。是普通的`firstPart`JavaScript 文件，`secondPart`是`String`添加到`ModelAndView`对象中的。

```
<definition name="javascript" template="/WEB-INF/tiles/javascript.jsp" />
<definition name="jsContent" extends="javascript">
    <put-attribute name="firstPart" expression="/js/content/static.js" />
    <put-attribute name="secondPart" expression="${variables}" />
</definition> 
```

为了`expressions`在瓷砖中启用，我添加了这个`tilesProperties`：

这是我的`tiles/javascript.jsp`：

```
<%@ taglib uri="http://tiles.apache.org/tags-tiles" prefix="tiles" %>
<tiles:insertAttribute name="firstPart" />
<tiles:insertAttribute name="secondPart" /> 
```

我只是通过`304 Not Modified`将此 Spring 过滤器添加到`web.xml`. 然而，内容仍然每次都在获取，并且通过`Etag`标题比较，状态码是`304`有任何变化的时候。

```
<filter>
    <filter-name>etagFilter</filter-name>
    <filter-class>org.springframework.web.filter.ShallowEtagHeaderFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>etagFilter</filter-name>
    <servlet-name>dispatcher</servlet-name>
</filter-mapping> 
```

如何获取 Spring Controller 的缓存响应？我试图通过 HTTP Headers 来实现这一点，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:39:26.650

ETag 方法在这里不适合您的需要。过滤器的工作方式是每次收到请求时调用控制器，然后计算响应的哈希值，将哈希值（ETag）与请求中发送的 Etag 进行比较，如果它们匹配，则过滤器假定数据没有改变，并发送没有响应正文的客户端 304。

可以看到，这种方法并没有减少你的实际控制器需要为一个请求做的工作量，它只是提高了带宽利用率，并为客户端提供了更快的响应（由于不是发送响应体，我们只是发送一个状态码）。

因此，对于您的情况，您应该使用`Last-Modified`响应标头和`If-Modified-Since`请求标头。要使用 Spring MVC 做到这一点，您可以尝试以下方法： 1\. 在您的控制器中，维护一个以毫秒为单位的时间戳，它应该与资源的最后修改时间相同。我将其设置为部署时间，并假设我的内容在应用程序运行时不会被修改。如果您想强制浏览器加载新副本，即使它们有旧版本，您也可以选择根据需要进行更新。

1.  接受 org.springframework.web.context.request.WebRequest 作为控制器方法的参数。

2.  在你的方法中，做实际的处理，只有当`webRequest.checkNotModified(lastModifiedTime)`是假的。

示例代码：

```
public class MyController {
//Injected 
private long lastModifiedTime;

public void getFullSdk(WebRequest webRequest, HttpServletRequest request, 
                HttpServletResponse response) throws Exception {

    if (webRequest.checkNotModified(lastModifiedTime)) {
        return;
    } else {
        // real expensive code goes here
        // write to response
    }
}
} 
```

希望这可以帮助。

# css - 如何使导航栏链接填充页面宽度的 100%

> ID：15339219
> 
> 赞同：1
> 
> 时间：2013-03-11T12:59:18.623
> 
> 标签：css, width, nav, spacing

这是我的挣扎。所以我一直想知道如何让导航栏链接填充 100% 的导航。因此，如果添加更多链接，它们的间距和字体大小会减小 - 这样它总是会填充 100%。

就像现在一样，我似乎无法做到这一点。我只有一个固定的填充，但我尝试过做类似的事情：

```
display: block;
float: left;
width: 100%; 
```

但它给了我各种根本不起作用的效果：S

有人能帮我解决这个问题吗？

[代码笔示例](http://codepen.io/anon/pen/iuItp)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:10:38.747

这样做的一种方法是`display: table`在父母和`display:table-cell`孩子身上使用。我相信它不适用于某些版本的 IE（当然）。[这是](http://codepen.io/anon/pen/ifnht)一个例子

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T13:19:48.457

从#main-navigation 中删除宽度并将with 添加到#main-navigation li，其值等于100/the_numberof_elements_in_the 列表。你的CSS应该是：

```
#main-navigation {
    height: 54px;
    overflow: hidden;
    border-bottom: 1px solid black;
}

#main-navigation ul {
    height: 54px;
    overflow: hidden;
}

#main-navigation li {
    font-size: 1.0em;
    text-transform: uppercase;
    list-style: none;
    float: left;
    width: 20%;
} 
```

这样，您的导航将占据所有可用宽度，但您的字体大小不会自动调整大小。您还应该根据元素的数量来更改它（类似于您对 li 宽度所做的方式）。如果您在服务器端动态生成此列表，您可以对 css 执行相同操作，然后计算这两个属性的正确值。如果您使用 ajax 填充列表，则可以使用 javascript 更改属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-23T04:28:37.927

您可以改用`nav`标签并将其视为表格。将`<ul>`标签视为表格行，将`<li>`标签视为表格单元格。前任：

```
nav{
 display: table;
 text-align: center;
 width: 100%

}
nav ul{
 display: table-row;
}

nav ul li {
 display: table-cell;
} 
```

这将拉伸`<li>`100%的内容

我是从以下链接中了解到的：[http ://www.darkstardesign.com/darkstar-blog/2012/11/27/stretching-horizo​​ntal-navigation-menus-to-the-full-width-of-a-layout/](http://www.darkstardesign.com/darkstar-blog/2012/11/27/stretching-horizontal-navigation-menus-to-the-full-width-of-a-layout/)

# multithreading - 使用 DCOM 处理线程

> ID：15339220
> 
> 赞同：1
> 
> 时间：2013-03-11T12:59:21.697
> 
> 标签：multithreading, delphi, freeze, dcom, delphi-6

我有一个关于多线程的概念性问题：

在通过 DCOM 使用 RPC 的应用程序中，具有多线程公寓配置，主要形式是冻结。

1 - 如果在单元初始化中创建了CriticalSession，那么关键会话中的代码会在主线程上下文中运行吗？

2 - 当您调用方法执行任务时：
创建线程 1。（DCOM 线程）
线程 1 创建线程 2。
线程 1 WaitFor 线程 2。
线程 2 创建 4 个线程以更快地运行任务。
线程 2 循环休眠 2 秒，直到 4 个线程结束。在这个过程中，主窗体应该被刷新以显示完成的百分比。一条消息以完成百分比发布到主窗体线程，但没有任何反应，主窗体被冻结。

3 - 当需要在线程 2 中进行 CRUD（创建读取更新删除）对象时，有一种更好的方法代替 synchronized() 方法，可以在 4 个线程之一同步？

4 - 4个线程的优先级高于主线程这是一个问题吗？当这成为一个问题？

下图代表了系统的架构：

![系统架构](../Images/db28563f15d48b87b2a1484dc4f018db.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T15:40:12.587

1：不。通过使用关键部分，您可以保证代码一次**只在一个**线程中运行；实际上，任何调用 Enter 的线程都会*挂*在那里，直到任何其他也在运行该代码的线程到达 Leave 调用。但这并不意味着它将在主线程中运行（检查 GetCurrentThreadID）

2：你提到了单元配置，但是哪个单元线程模型？这定义了 (D)COM 何时**为您进行线程同步**。在实践中，COM 将使用代理存根并在幕后编组以*遍历*单元（和网络）边界，除非您选择了多线程单元，在这种情况下，COM 将假设组件自己处理线程问题。

如果我理解正确，主窗体会冻结在“线程 1 WaitFor 线程 2”上。与其调用 WaitFor，不如在 Thread2 上使用 OnTerminate 事件。

3：我不确定“线程 2 中的 CRUD 对象”是什么意思。如果知道 4 个线程以什么顺序完成并不重要，我建议按顺序在线程上调用 WaitFor。如果是，您应该查看[WaitForMultipleObjects](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687025%28v=vs.85%29.aspx)。

4：不同的优先级应该不是问题。只有当有太多的高优先级线程在做太多的工作时才会出现问题，因此进行内部通信的普通优先级线程无法跟上，但在这种情况下，您应该查看工作线程如何报告它们的工作。

# html - 将图像放在另一个特定位置的顶部

> ID：15339226
> 
> 赞同：0
> 
> 时间：2013-03-11T12:59:51.727
> 
> 标签：html, css, imagemap

我想做的是制作一个交互式收藏地图，作为游戏收藏指南的一部分。主图像（本例中为网格）将是游戏中某个区域的地图。在地图上会有收藏品位置的图标。点击收藏品的图标后，它会在图标上创建一个红色的 x，这样人们就会知道他们已经收集了它。这个红色的 x 将是主地图顶部的图像，并且需要位于该收藏品图像地图的确切坐标处。

这是我的意思的代码示例。如果数据库的结果显示用户已收集它，则这是一张带有 1 个单一收藏品的地图，然后将其标记为红色。

```
<img src = "grid.png" usemap="#checklist"/>
<map name="checklist">
<?php
if(collectible1 != "collected")//if it isnt collected dont alter the map
{
  echo '<area shape="rect" coords="0,0,82,126" href="# //some AJAX call to update DB">';
}
else
{
    //display a redX image at exact same coordinates as area above
}
?>
</map> 
```

我希望这是一个动态页面，因此我可以将它用于许多不同的收藏地图我只需将所有图像地图区域坐标传递给它，它就会生成图像地图。我可以在数据库交互和 AJAX 方面做所有事情我只是无法弄清楚如何在另一个图像之上显示图像，而无需使用 div 并手动找出以像素为单位的每个位置

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:53:13.090

做了一些工作并弄清楚我是否使用圆圈来标记图像映射的位置，然后我就能够使用该区域的 x 和 y 坐标和 div 位置。显然，会话变量不会在最后一件事中使用，我将使用从数据库中获取的变量，但这在功能上应该做的。圆的工作原理是 (x, y, radius) 所以只需将位置的 x 和 y 坐标存储在数据库中，半径可以通过地图上图标的大小来定义。当调用 db 时，将 x 和 y 插入 div 的 css 或地图区域的坐标中。

```
<?php 
session_start();
?>
<html>
<head>
<title></title>

<style>
#collectible1
{
left: 355;
top: 357;
position: absolute;
}

</style>

</head>
<body>
<div id = "collectiblemap">
    <img src = "grid.png" usemap="#checklist"/>
    <map name="checklist">
    <?php
    if(!isset($_SESSION['found']))
    {
        $_SESSION['found'] = false;
    }
    if($_SESSION['found'] == true)
    {
        echo '<div id = "collectible1"><a href = "found.php"><img src = "greenimg.jpg"/></a></div>';
    }
    else
    {
        echo '<area shape="circle" coords="355,357,19" href="found.php" alt="">';
    }
    ?>
    </map>

</div>
</body>
</html> 
```

found.php 文件只是简单地将会话变量设置为 true 如果它是 false 和 false 如果它是 true 。

# c++ - 从 Debian 包结构中的程序访问资源

> ID：15339229
> 
> 赞同：2
> 
> 时间：2013-03-11T12:59:58.870
> 
> 标签：c++, linux, debian, deb

我已经创建了一个 C++ 应用程序的 DEB 包。我希望此应用程序使用“数据”目录中的资源，在我的测试中（为方便起见），该目录与程序二进制文件位于同一位置，并且我通过其相对路径从代码内部调用它。在 Debian 操作系统中，有一些标准位置可以放置数据文件（例如 /usr/share/...），还有其他位置可以放置二进制文件（可能是 /usr/bin）。我不想将路径硬编码在我的程序中，我认为通过“data/img.png”访问图像比“/usr/share/.../data/img.png”更好”。所有 GNU 经典程序都尊重目录结构，我想他们做得很好。我尝试使用 dpkg 找出应用程序的结构，但这对我没有帮助。有没有更好的方法

PS：我还希望我的代码可以移植到 Windows（跨平台），尽可能避免使用“if WIN32”之类的变通方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:51:37.597

这并不完全是特定于 linux 或 debian 的。我认为这可能与 Linux Standard Base 或 POSIX 规范有关。我无法足够快地发现任何规范。

但是您不应该为每种类型的数据使用其中的一些“基本”目录和子目录。平台相关的代码应该属于/usr/lib/programname，平台无关的只读数据应该属于/usr/share/programname/img.png。/var/lib/programname/cache.db 中的应用程序更改的数据。或 ~/.programname/cache.db，取决于它是什么类型的应用程序以及它的作用。注意：当 /usr/share 已经存在非可执行数据时，不需要“数据”目录。

如果为 Debian 打包，您可能需要检查[http://www.debian.org/doc/manuals/developers-reference/best-pkging-practices.html 。](http://www.debian.org/doc/manuals/developers-reference/best-pkging-practices.html)但它不是像 android 或 iphone 或 windows 文件中的资源。这些文件在软件包安装时作为真实文件提取到目标文件系统中。

编辑：见[http://www.debian.org/doc/packaging-manuals/fhs/fhs-2.3.html](http://www.debian.org/doc/packaging-manuals/fhs/fhs-2.3.html)

Edit2：至于多平台解决方案，我建议你做一些包装函数。在 Windows 上，它取决于安装程序，通常程序通常在注册表中具有安装它们的目录的路径。在 unix 上，数据的位置或多或少是给定的，您可以考虑更改目标前缀的构建选项，或使用环境变量覆盖默认路径。在 Windows 上，前缀也足够了，如果它不应该太灵活的话。

我建议一些函数，您将在其中传递对象的名称，它们将返回文件的路径。这取决于使用的工具包，Qt 库可能已经实现了类似的东西。

```
 #include <string>
    #ifdef WIN32
    #define ROOT_PREFIX "c:/Program Files/"
    const char DATA_PREFIX[] = ROOT_PREFIX "program/data";
    #else
    #define ROOT_PREFIX "/usr/"
    /* #define ROOT_PREFIX "/usr/local/" */
    const char DATA_PREFIX[] = ROOT_PREFIX "share/program";
    #endif

    std::string GetImageBasePath()
    {
      return std::string(DATA_PREFIX) + "/images";
    }

    std::string GetImagePath(const std::string &imagename)
    {
      // multiple directories and/or file types could be tried here, depends on how    sophisticated
      // it should be.
      // you may check if such file does exist here for example and return only image type that does exist, if you can load multiple types.
      return GetImageBasePath() + imagename + ".png";
    }

    class Image;
    extern Image * LoadImage(const char *path);

    int main(int argc, char *argv[])
    {
      Image *img1 = LoadImage(GetImagePath("toolbox").c_str());
      Image *img2 = LoadImage(GetImagePath("openfile").c_str());
      return 0;
    } 
```

进行类设置可能是明智的，您可以在其中每次启动一次初始化平台相关的根路径，然后使用 Settings::GetImagePath() 作为方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T13:52:58.640

在您的 Debian 软件包中，您确实应该将数据安装在 /usr/share/ 中。访问您的数据时，您应该使用[XDG 标准](http://standards.freedesktop.org/basedir-spec/basedir-spec-latest.html)，该标准指出 $XDG_DATA_DIRS 是以冒号分隔的要搜索的数据目录列表（另外，“如果 $XDG_DATA_DIRS 未设置或为空，则值等于 /usr/local /share/:/usr/share/ 应该被使用。”）。

# google-chrome - 如何解决 Google Chrome 同步问题？

> ID：15339237
> 
> 赞同：0
> 
> 时间：2013-03-11T13:00:16.547
> 
> 标签：google-chrome, sync

我正在使用自定义同步选项仅同步 Google chrome 安装中的一些工件 - 只是书签、扩展程序和打开选项卡。这三个都在我的两台 Windows 计算机上运行良好 - 但在 Linux 机器上，我没有得到扩展。我尝试擦除 Linux Chrome 数据（通过删除 ~/.config/google-chrome/ 并重新配置它，问题仍然存在。

我想知道 chrome 浏览器是否有任何日志可以提示我可能出现的问题。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:22:52.727

看起来这不是一个错误，而是一个“功能”，每个操作系统对扩展的不同支持，但似乎有希望在未来的版本中修复这个问题，请参阅：

*   [Chrome 网上应用店获得对 Windows、Mac、Linux、Android、iOS 和 Chrome 操作系统的多平台应用程序支持](http://thenextweb.com/google/2013/03/26/chrome-web-store-to-get-multi-platform-app-support-for-windows-mac-linux-android-ios-and-chrome-os/)
*   [其他部署选项](http://developer.chrome.com/extensions/external_extensions.html)

# ruby-on-rails - 如何向所有 simple_form 生成的表单添加隐藏字段？

> ID：15339248
> 
> 赞同：0
> 
> 时间：2013-03-11T13:00:57.017
> 
> 标签：ruby-on-rails, simple-form

如何在 Rails 3.2 中为所有 simple_form 生成的表单添加隐藏字段标签？

或者如何向所有表单（form_for 和 form_tag 生成的表单）添加隐藏输入字段？

我要求以通用方式进行，我有数百个这样的表格，我想添加所有表格，而不仅仅是单个表格。

我期待一些涉及表单构建器的东西，我尝试了它们，但我没有做对。

# scala - 流作为构造函数 arg 有时在早期类初始化期间完全评估

> ID：15339254
> 
> 赞同：2
> 
> 时间：2013-03-11T13:01:12.243
> 
> 标签：scala, stream, initialization, lazy-evaluation

流可以用作类构造函数参数：

```
scala> ( 0 to 10).toStream.map(i =>{println("bla" + i); -i})
bla0
res0: scala.collection.immutable.Stream[Int] = Stream(0, ?)

scala> class B(val a:Seq[Int]){println(a.tail.head)}
defined class B

scala> new B(res0)
bla1
-1
res1: B = B@fdb84e 
```

因此，尽管作为 Seq 参数提交，并且虽然被部分评估，但 Stream 并未得到完全评估。按预期工作。

我有这样的课：

```
class HazelSimpleResultSet[T] (col: Seq[T], comparator:Comparator[T]) extends HGRandomAccessResult[T] with CountMe
{
  val foo: Int = -1  // col of type Stream[T] already fully evaluated here.

  def count = col.size
  ....
} 
```

其中 HGRandomAccessResult 和 CountMe 是简单的接口。

大多数情况下，我想使用 Streams 作为 col 构造函数参数，以避免昂贵的操作。在调试器中，我可以看出它在某些情况下有效，因为 col 显示的值仍然是 Stream(xy, ?) 和“tlVal = null”，即使在 HazelSimpleResultSet 初始化之后也是如此。

此外，为了测试，我在构建 Streams 的块中包含 println，如下所示：

```
 keyvalues.foldLeft(Stream.empty[KeyType]){ case (a, b) => ({ println("evaluating "+ b); unpack[KeyType](b)}) #:: a} 
```

以便在准确评估 Stream 时在控制台中跟踪。

因此，在某些情况下它可以工作，但在某些情况下，Stream 在 HazelSimpleResultSet 初始化的最初时刻得到全面评估。我看不出提交的 Stream 没有相关差异，我只是确定他们在那一刻之前是未经评估的 Streams。使用调试器“进入”，我可以看到它在类定义本身的行中被评估，甚至在到达类主体之前，即在任何字段的初始化之前。

**编辑**：我可以以（次优）方式定义类，使得根本没有字段引用流，但我仍然得到这种行为。

CountMe 接口定义了一个“count”方法，该方法调用 col.size，然后评估所有 Stream。我试图根据惰性 val 大小来定义计数，但这并没有什么不同。

我有点不知所措，为什么它在某些情况下不起作用。有人对 Streams 的隐藏警告有任何提示吗？

编辑：重要说明：Stream 对象包含了一些需要评估的严重状态，即对 NoSQL 数据库（hazelcast）的引用。问题：这里有什么注意事项？当我的 Stream 携带评估所需的有状态引用时，有什么特别需要注意的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:42:04.980

如果你`Stream`这样创建：

```
Stream ({println("eval 1"); 1}, {println("eval 2"); 2}) 
```

那么你实际上是在调用`Stream.apply`它是这样实现的：

```
/** A stream consisting of given elements */
override def apply[A](xs: A*): Stream[A] = xs.toStream 
```

这意味着实际发生的是：

1.  **所有元素都经过评估！**
2.  `Seq`创建包含这些元素的A。
3.  A`Stream`是由此创建的`Seq`

如您所见，如果您以`Stream`这种方式创建，它的所有元素都会被急切地评估。这不是您创建 lazily-evaluated 的方式`Stream`。您想要做的可能是使用`#::`和`#:::`懒惰地评估其操作数的运算符。查找[文档](http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.Stream)以了解它们的用法。

# algorithm - 三个正数 x、y、z 的组合，使得 x + y、x - y、y + z、y - z、x + z 和 x - z 是完全平方

> ID：15339256
> 
> 赞同：5
> 
> 时间：2013-03-11T13:01:20.533
> 
> 标签：algorithm, recursion, perfect-square

早上好，我是新来的，我带来了一个小问题。我在为以下问题开发高效算法时遇到了麻烦：我需要找到三个正数 x、y 和 z 的组合，以便 x + y、x - y、y + z、y - z、x + z 和x - z 是完美的正方形。问题是开发一种算法，可以找到 1 到 2,000,000 之间的所有 x、y 和 z 组合。

目前我使用一个`for`在`for`我有孙子之前肯定不会结束的内。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T13:50:52.977

从替换开始的基本思想，例如：

```
 u = x + y
 v = x - y
 w = y + z 
```

然后 x + y, x - y, y + z, y - z, x + z 和 x - z 变为

```
 u, v, w, u - v - w, v + w, u - w   [all have to be squares] 
```

然后用另一个替换，u = a²，v = b²，w = c²，你得到：

```
 a², b², c², a² - b² - c², b² + c², a² - c²    [all have to be squares] 
```

现在您可以枚举所有可能已经足够快的 a、b、cs。

进一步的想法可能是首先使用 [毕达哥拉斯三元组](http://en.wikipedia.org/wiki/Pythagorean_triple)枚举所有 b²、c²、b²+c² （通过将其替换为 m 和 n，枚举所有互质数 (m,n)，然后使用欧几里得公式），然后找到给定的 (b,c ) 以类似的方式（例如将 a² - c² = x² 更改为 a² = x² + c² 并再次使用三元组）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T15:35:27.237

扩展[BeniBela 的答案](https://stackoverflow.com/a/15340303/281402)，

```
x + y = (x - z) + (y + z)
x + y = (x + z) + (y - z) 
```

因此，只有当斜边可以用两种不同的形式表示时，三元组才有效。进一步的过滤可以通过观察 (x - z) 和 (x + z) 也形成毕达哥拉斯三元组的斜边来完成。

# javascript - 作为 KnockoutJS 可观察的函数

> ID：15339257
> 
> 赞同：2
> 
> 时间：2013-03-11T13:01:21.680
> 
> 标签：javascript, jquery, knockout.js

我有以下脚本（见下文）。我对此有两个问题：

1.下面这行在Knockoutjs的上下文中是什么意思？

```
ko.observable(null); 
```

2.如何调用此处尚未定义的函数：

```
that.activePollingXhr(... 
```

这是完整的脚本：

```
$(document).ready(function() {

    function ChatViewModel() {

        var that = this;

        that.userName = ko.observable('');
        that.chatContent = ko.observable('');
        that.message = ko.observable('');
        that.messageIndex = ko.observable(0);
        that.activePollingXhr = ko.observable(null);

        var keepPolling = false;

        that.joinChat = function() {
            if (that.userName().trim() != '') {
                keepPolling = true;
                pollForMessages();
            }
        }

        function pollForMessages() {
            if (!keepPolling) {
                return;
            }
            var form = $("#joinChatForm");

            that.activePollingXhr($.ajax({url: form.attr("action"), type: "GET", data: form.serialize(), cache: false,
                success: function(messages) {
                    console.log(messages);
                    for (var i = 0; i < messages.length; i++) {
                        that.chatContent(that.chatContent() + messages[i] + "\n");
                        that.messageIndex(that.messageIndex() + 1);
                    }
                },
                error: function(xhr) {
                    if (xhr.statusText != "abort" && xhr.status != 503) {
                        resetUI();
                        console.error("Unable to retrieve chat messages. Chat ended.");
                    }
                },
                complete: pollForMessages
            }));
            $('#message').focus();
        }

        that.postMessage = function() {
            if (that.message().trim() != '') {
                var form = $("#postMessageForm");
                $.ajax({url: form.attr("action"), type: "POST",
                    data: "message=[" + that.userName() + "] " + $("#postMessageForm input[name=message]").val(),
                    error: function(xhr) {
                        console.error("Error posting chat message: status=" + xhr.status + ", statusText=" + xhr.statusText);
                    }
                });
                that.message('');
            }
        }

        that.leaveChat = function() {
            that.activePollingXhr(null);
            resetUI();
            this.userName('');
        }

        function resetUI() {
            keepPolling = false;
            that.activePollingXhr(null);
            that.message('');
            that.messageIndex(0);
            that.chatContent('');
        }

    }

    //Activate knockout.js
    ko.applyBindings(new ChatViewModel());

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T13:05:17.170

这只是将一个 observable 初始化`null`为初始值。

如果您需要调用一个可观察的函数，只需添加第二组括号。

```
that.activePollingXhr()() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T13:06:43.900

1.  `ko.observable(null);`创建一个值为 的可观察对象`null`。没有什么不同`ko.observable(5);`，价值在哪里`5`。

2.  我看到您`that.activePollingXhr`通过将 ajax 调用的结果传递给 observable 来使用它。但是，此调用是异步的，`$.ajax`不会返回从服务器获取的数据，而是延迟的 jquery。您需要使用`that.activePollingXhr`insude`success`回调。这是您的代码的样子：

    ```
    $.ajax({url: form.attr("action"), type: "GET", data: form.serialize(), cache: false,
        success: function(messages) {
            console.log(messages);
            for (var i = 0; i < messages.length; i++) {
                that.chatContent(that.chatContent() + messages[i] + "\n");
                that.messageIndex(that.messageIndex() + 1);
            }
            that.activePollingXhr(messages); // <-- Note where the call to activePollingXhr is
        },
        error: function(xhr) {
            if (xhr.statusText != "abort" && xhr.status != 503) {
                resetUI();
                console.error("Unable to retrieve chat messages. Chat ended.");
            }
        },
        complete: pollForMessages
    }); 
    ```

至于您的问题下的评论：`that.activePollingXhr` 被定义为`that.activePollingXhr = ko.observable(null);`- 一个可观察的，其值为`null`.

# java - Java/PHP 桥和使用 Curl

> ID：15339263
> 
> 赞同：0
> 
> 时间：2013-03-11T13:01:37.270
> 
> 标签：java, php

有人有使用 PHP/Java Bridge 的经验吗？据我所知，它可以在 Java 服务器上启用 PHP 脚本，反之亦然。

我的问题是我需要在基于 Tomcat JSP 的服务器上进行 PHP 调用（使用 curl）。

我正在尝试访问 Java/PHP Bridge 是否可以解决问题，以及是否可以使用 PHP curl。

非常欢迎任何想法/意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:10:43.747

由于我无法发表评论，我将利用这个空间提出我的想法（可能不是答案）。

就可维护性而言，使用 php curl 从 tomcat 服务器执行服务或获取 (JSON) 数据是一种更好的方法。顺便说一句，为什么 curl 是个问题？

# php - 从 PHP Webservice 检索 JSON 数据并将其解析到 XCODE iPhone App

> ID：15339268
> 
> 赞同：0
> 
> 时间：2013-03-11T13:01:50.117
> 
> 标签：php, xcode, json, web-services

这是我在我的主机上运行的 php 中的 web 服务。

```
<?php  
    $data = array("T1","T2","T3","T4","T5");
    header('Content-Type: application/json');
    echo json_encode($data);
?> 
```

这是 xcode 片段。

```
NSURL * url = [NSURL URLWithString:myDinUrl];
NSData *urlData = [NSData dataWithContentsOfURL:url]; 
```

如果 Y 在我的网络浏览器中执行 url，你会得到：

```
["T1","T2","T3","T4","T5"] 
```

但是如果我显示错误描述，Xcode 输出总是显示`urlData`为一个空对象`(0x000000000)``Operation couldn't be completed code=256`

如果我使用另一个 URL，例如：[Url1](http://ielmo.xtreemhost.com/array.php)或[Url1](http://dl.dropbox.com/u/270074/iosTutrials/JSON/Test.json)`NSData`对象会得到一些可以格式化和解析的字节。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-19T19:23:27.313

Since your PHP encodes the response in JSON, you have to parse it expecting a JSON-encoded response.

NSJSONSerialization can do this for you, but it requires NSArray or NSDictionary (that means you must change your NSData declaration to either one of these.)

# javascript - 在 HYPERLINK 中给出链接 URL 时未打开，但在地址栏中直接粘贴 URL 时打开

> ID：15339269
> 
> 赞同：0
> 
> 时间：2013-03-11T13:01:55.453
> 
> 标签：javascript, html, url, iframe, hyperlink

我找到了一些我想从我的网站超链接的 url，但是当我为这些 url 添加超链接时，页面没有打开，但是当我直接将该 url 粘贴到地址栏中并输入时，它正在打开。. .

示例网址是[http://google.co.in](http://google.co.in)

```
<h6 style="text-align: center;"><strong> <a href="http://google.co.in" target="_blank"> <strong>LINK1</strong></a></strong></h6> 
```

请帮助我

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T13:05:53.717

[站点检查HTTP referer](http://en.wikipedia.org/wiki/HTTP_referer)是可能的。

如果您在窗口中打开链接并粘贴 URL，则引用者为空。如果您单击一个链接，则包含该链接的站点的 URL 将在引荐来源网址中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T13:22:30.377

服务器被配置为不响应引用者来自外部站点的请求。

所以它只会在以下情况下响应：

1.  您没有推荐人（当您在浏览器的 URL 栏中自己输入 URL 时就是这种情况）
2.  您的推荐人仅是该网站（如果您从该网站本身单击该链接，就会出现这种情况）

# java - 小型开发团队需要哪个服务器框架（甚至平台）？

> ID：15339270
> 
> 赞同：-1
> 
> 时间：2013-03-11T13:01:57.060
> 
> 标签：java, php, frameworks, multiplatform

我想开发一个服务器/客户端软件，其客户端将位于不同的操作系统中。

（想想手机、平板电脑、台式电脑，我什至认为这项服务与星号连接并与电话呼叫中心合作）。

我真的在所有可用的服务器框架中搜索，无法决定什么是最适合我的情况，或者我什至是否需要解决我的具体问题。

需要考虑的事项：

*   我需要它具有可扩展性：最初将通过网站访问该服务器，但后来它将扩展并允许人们通过移动应用程序、桌面应用程序、电话/短信服务等访问它。
*   低成本托管和开源
*   未来将有成千上万的用户使用该服务。（所以它必须能够处理这个）
*   小型开发团队（1-3 人）
*   我已经用 C/C++、actionscript、一点 java 和一点 php 完成了过去的项目。
*   我对服务器编程还不太了解（但我对学习很满意）。
*   所以：
    *   它必须有一个活跃的社区并且还没有死亡。
    *   尽可能简单易学。
    *   它必须已经为我解决了安全、数据包异步、连接等问题。

有没有这样的事情，我什至应该费心去弄乱一个框架吗？考虑到可用的工具，我有哪些选择？工业用什么？可能的选项列表将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:14:36.433

一个开源、可扩展且拥有非常活跃的社区的通用技术堆栈是：

*   爪哇
*   Tomcat Servlet 容器
*   Spring 框架（带有 Spring Security）
*   用于 Web 服务的 Spring Web 服务或 Apache CXF（例如移动连接）
*   MySQL 之上的 JPA (Hibernate) ORM

There are numerous other projects that sit around these technologies that fulfill various requirements. I would certainly recommend this as a starting point to your investigation.

# asp.net-mvc-3 - 如何在@Html.Partial 中传递嵌套模型值

> ID：15339272
> 
> 赞同：3
> 
> 时间：2013-03-11T13:02:08.947
> 
> 标签：asp.net-mvc-3

我有一个模型作为其中的订单我有一个我试图在@Html.Partial 代码片段中使用的对象

```
 public class Order{
   public string Id{set;get;}
   public Address BillingAdress{set;get;}
   public Address ShippingAddress{set;get;}
 }

 public class Address{
   public int Id{set;get;}
   public string Address{set;get;}
 } 
```

可见

```
 @model Order
  OrderId: 
  @Html.TextBoxFor(x=>Model.Id)

  ShippingAdress: 
  @Html.Partial("Adress", Model.ShippingAdress)

  BillingAddress:
  @Html.Partial("Adress", Model.BillingAdress) 
```

这是行不通的。但是当我传递 Model 而不是 Model.ShippingAdress 和 Model.BillingAdress 时，TryUpdateModel(Order) 正在控制器操作中工作，谁能告诉我为什么？我在网上搜索过，但没有得到任何具体的解决方案，所以请帮助我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:06:42.957

原因是 Partial 不遵守输入字段的命名约定。改用编辑器模板：

```
@model Order
OrderId: 
@Html.TextBoxFor(x => x.Id)

ShippingAdress: 
@Html.EditorFor(x => x.ShippingAdress)

BillingAddress:
@Html.EditorFor(x => x.BillingAdress) 
```

现在将您`Adress.cshtml`移至`~/Views/Shared/EditorTemplates/Address.cshtml`. 模板的名称和位置很重要。它的位置`~/Views/Shared/EditorTemplates`和命名方式应与模型类型 ( `Address.cshtml`) 相同：

```
@model Address
... 
```

# c# - MySqlConnection.StateChange 永远不会获取

> ID：15339273
> 
> 赞同：0
> 
> 时间：2013-03-11T13:02:11.857
> 
> 标签：c#, mysql

MySqlConnection.StateChange 是如何工作的？

我有以下代码。

```
conn.StateChange += ConnectionStateChanged;

private void ConnectionStateChanged(Object sender, StateChangeEventArgs e) {
    switch (e.CurrentState) {
    // is never equal to Fetching
    }
}

public DataTable Query(string query) {
    DataTable dt = new DataTable();

    using (MySqlDataAdapter a = new MySqlDataAdapter(query, conn)) {
        try {
            a.SelectCommand.CommandTimeout = 5;
            a.Fill(dt);
        } catch {
            return null;
        }
    }

    return dt;
} 
```

为什么从未使用 ConnectionState.Fetching 或 ConnectionState.Executing 调用 ConnectionStateChanged？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:07:28.943

好吧，我可能误解[了 msdn](http://msdn.microsoft.com/en-us/library/system.data.connectionstate%28v=vs.110%29.aspx)，但这些状态似乎没有被实现（枚举值只是“保留”，即使在 .net 4.5 中也是如此）：

> **Executing**连接对象正在执行命令。（此值保留用于产品的未来版本。）

和

> **Fetching** 连接对象正在检索数据。（此值保留用于产品的未来版本。）

# r - 使用 knitr 生成报告来构建 R 包

> ID：15339275
> 
> 赞同：2
> 
> 时间：2013-03-11T13:02:13.667
> 
> 标签：r, package, knitr

我正在使用 knitr 在 R 中生成报告。所以基本上我有一个数据集，做一些预处理，然后调用 knitr 输出一个 html 报告。这意味着整个工作流程由几个 R 代码文件和一些 .Rhtml 模板组成，这些模板是以后生成报告所需的。

我想将所有这些包装到一个 R 包中。只有 .r 文件，我只需运行 package.skeleton() 并开始..

但是，我该如何处理 .Rhtml 文件。构建 R 包时处理这些问题的正确方法是什么？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:27:39.957

Ben Bolkers 回答：将它们放在 inst 目录中的一个目录中，然后使用 system.file() 来检索它们。

# bash - Shell 管道不适用于 dig

> ID：15339277
> 
> 赞同：0
> 
> 时间：2013-03-11T13:02:20.507
> 
> 标签：bash, shell, pipeline, dig

. 这可能是一个特别愚蠢的问题，但我是 shell 脚本的新手。对不起！

我正在尝试使用管道（将第一个命令的输出作为输入参数传递给第二个命令）。

```
cat filename.csv | nslookup 
```

正如我预期的那样，为文件中的每一行调用 nslookup 。但是，同样的事情不适用于 dig

```
cat filename.csv | dig 
```

说

```
; <<>> DiG 9.8.1-P1 <<>>
;; global options: +cmd
;; connection timed out; no servers could be reached 
```

我很感激任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:04:15.713

我不确定`dig`从标准输入读取。相当，

> -f 选项通过从文件文件名中读取要处理的查找请求列表，使 dig 以批处理模式运行。该文件包含许多查询，每行一个。文件中的每个条目的组织方式应与它们显示为查询的方式相同，以便使用命令行界面进行挖掘。

（来自[手册页](http://linux.die.net/man/1/dig)）

请注意，您的 nslookup 示例有资格获得[此奖项](http://partmaps.org/era/unix/award.html)（！）并且可以重写为

```
nslookup < filename.csv 
```

达到同样的效果。

# winforms - XPcollection 未加载 - 为什么？

> ID：15339278
> 
> 赞同：1
> 
> 时间：2013-03-11T13:02:26.593
> 
> 标签：winforms, devexpress, xpo

这一定很简单，我只是没看到（也找不到答案:(

我正在尝试学习 DevExpress 控件并已阅读 eXpress Persistent Objects 推荐用于 O/R 映射。

1) 我有一个现有的 SQL Server Compact 4.0 数据库，我为其生成了 ORM

2) 我有一个带有 XtraGrid.GridControl gridControl1 的 Winform

3）在 Form_Load 事件中，我有以下代码：

```
 XPCollection cName = new XPCollection(typeof(WindowsFormsApplication1.DUzskv1r6.XPO_TableName));

        int c = cName.Count; //didn't help...

        cName.DisplayableProperties = "Name;Nr"; //choose columns to display
        gridControl1.MainView.PopulateColumns();

        gridControl1.DataSource = cName; 
```

我读过它使用“延迟加载” - 在必要时加载（[http://documentation.devexpress.com/#XPO/clsDevExpressXpoXPCollectiontopic](http://documentation.devexpress.com/#XPO/clsDevExpressXpoXPCollectiontopic)），但阅读 XPcollections 记录计数并没有按照建议的那样做。

结果，我得到了一个空的 gridControl1，其中包含“Name”和“Nr”列。请帮忙 - 我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T10:35:34.890

我认为问题出在您的数据层初始化中。您将 XPCollection 与默认会话一起使用，也许您忘记初始化它。最好的方法是在 XPCollection 承包商中指定会话。

# linux - sys_execve 挂钩 3.5 内核

> ID：15339279
> 
> 赞同：2
> 
> 时间：2013-03-11T13:02:27.060
> 
> 标签：linux, kernel, hook, system-calls, execve

我正在尝试在 x86_32 上的 Linux 内核 v3.5 中挂钩 sys_execve 系统调用。我只是将 sys_call_table 入口地址更改为我的钩子函数

```
asmlinkage long (*real_execve)( const char __user*, const char __user* const __user*,
                 const char __user* const __user* );
...
asmlinkage long hook_execve( const char __user* filename, const char __user* const __user* argv,
                    const char __user* const __user* envp )
{
    printk( "Called execve hook\n" );
    return real_execve( filename, argv, envp );
}
...
real_execve = (void*)sys_call_table[ __NR_execve ];
sys_call_table[ __NR_execve ] = (unsigned long)hook_execve; 
```

我确实为修改 sys_call_table 条目设置了页面权限，并且提到的方案适用于其他系统调用（chdir、mkdir 等）。但是在 execve 挂钩时，我得到了空指针取消引用：

```
Mar 11 14:18:08 mbz-debian kernel: [ 5590.596033] Called execve hook
Mar 11 14:18:08 mbz-debian kernel: [ 5590.596408] BUG: unable to handle kernel NULL pointer dereference at   (null)
Mar 11 14:18:08 mbz-debian kernel: [ 5590.596486] IP: [<  (null)>]   (null)
Mar 11 14:18:08 mbz-debian kernel: [ 5590.596526] *pdpt = 0000000032302001 *pde = 0000000000000000 
Mar 11 14:18:08 mbz-debian kernel: [ 5590.596584] Oops: 0010 [#1] SMP 
```

我用三个参数调用 sys_execve，因为`arch/x86/kernel/entry_32.S`它包含`PTREGSCALL3(execve)`. 但是，我尝试使用四个参数（添加`struct pt_regs*`）调用它，但我得到了同样的错误。也许这种执行方法完全有问题？还是我错过了什么？

**更新#1**

我发现它`sys_call_table[ __NR_execve ]`实际上包含`ptregs_execve`（不是`sys_execve`）的地址。在 中定义如下`arch/x86/kernel/entry_32.S`：

```
#define PTREGSCALL3(name) \
ENTRY(ptregs_##name) ; \
CFI_STARTPROC; \
leal 4(%esp),%eax; \
pushl_cfi %eax; \
movl PT_EDX(%eax),%ecx; \
movl PT_ECX(%eax),%edx; \
movl PT_EBX(%eax),%eax; \
call sys_##name; \
addl $4,%esp; \
CFI_ADJUST_CFA_OFFSET -4; \
ret; \
CFI_ENDPROC; \
ENDPROC(ptregs_##name)
...
PTREGSCALL3(execve) 
```

所以为了修改`sys_execve`我需要替换它的代码而不修改它的地址？[我在这里](http://cormander.com/2011/12/how-to-hook-into-hijack-linux-kernel-functions-via-lkm/ "这里")读过类似的东西，这是要走的路吗？

**更新#2**

实际上我发现了以下调用序列：`do_execve->do_execve_common->search_binary_handler->security_bprm_check`，这`security_bprm_check`是一个围绕 LSM（Linux 安全模块）操作的包装器，它控制二进制文件的执行。之后，我阅读并关注了[这个链接](http://cormander.com/2012/05/hijacking-linux-kernel-pointers/ "这个链接")，我得到了它的工作。它解决了我的问题，因为现在我可以看到要执行的进程的名称，但我仍然不确定它的正确性。也许其他人会对所有这些东西增加一些清晰度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-07T15:51:18.913

过去，在 Linux 内核中挂钩系统调用是一项更容易的任务，然而，在较新的内核中，程序集存根被添加到系统调用中。为了解决这个问题，我在运行中修补了内核的内存。

您可以在此处查看我用于挂钩 sys_execve 的完整解决方案： [https ://github.com/kfiros/execmon](https://github.com/kfiros/execmon)

# java - java和python中的字符串偏移量

> ID：15339280
> 
> 赞同：0
> 
> 时间：2013-03-11T13:02:29.257
> 
> 标签：java, python, encoding

我是一名初学者 python 程序员，过去我曾经了解一点 java。我有一些文本文件（土耳其语）和相应的 xml 文件，其中包含文本中连接词的偏移量。例如

```
-<Conn> 
    -<Span> 
        <Text>ama</Text> 
        <BeginOffset>281</BeginOffset> 
        <EndOffset>284</EndOffset> 
    </Span> 
</Conn> 
```

这表示 txt 文件的 281 偏移处有一个“ama”。但是当我用 python 读取这个文件时，'ama' 在 301\. 字节或者是文件中的 272\. 字符。据我所知，java应用程序在读取txt文件时没有提到任何编码。我尝试使用 unicode、UTF8 等读取文件……我需要从这些偏移量中找到一种方法来纠正文件中的位置。我的猜测，问题是由于土耳其字符（在不同的编码中可能需要不同数量的字节），但我无法弄清楚。任何建议对我来说都是非常非常好的。谢谢 **编辑：** 我在python3.3中使用了以下代码：

```
f = open(path, encoding='utf-8')
text = f.read()
text[272:275] # returns 'ama' but it should be text[281:284]
ibbyte = text.encode(encoding='utf-8')
inbytes[292:295] # returns 'ama' but this is also incorrect 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T23:11:21.613

正如@Gene 所说，它是行尾标记。由于 java 应用程序是在 windows 中编写的，因此它将每个 '\n' 计为 2 个字节。但是python将它们计为1个字节。我数 '\n' 直到偏移量，然后从给定的偏移量中减去它。非常感谢您富有洞察力的评论

# asp.net - asp.net 查看状态

> ID：15339292
> 
> 赞同：1
> 
> 时间：2013-03-11T13:02:51.103
> 
> 标签：asp.net, events, viewstate

是否可以获取 ASP.NET 写入的视图状态的值：

```
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="..." /> 
```

, 在对页面进行处理之前，在 C# 中，在页面事件之一中，例如

```
OnSaveStateComplete 
```

如果是这样，怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T13:11:45.837

简单的答案 - 不。

您可以开始使用内部方法，例如`System.Web.UI.Control.SaveViewStateRecursive`使用反射，但您很有可能将构建的任何内容都将停止在下一个 .NET Framework 更新上工作。

如果您想为 ViewState 提供自定义存储机制，您将实现[`PageStatePersister`](http://msdn.microsoft.com/en-us/library/system.web.ui.pagestatepersister.aspx).

# java - 多维数组声明中的顺序对已用内存有影响吗？

> ID：15339296
> 
> 赞同：10
> 
> 时间：2013-03-11T13:02:59.400
> 
> 标签：java, arrays, memory

将为`a`和分配多少字节`b`？

```
import android.graphics.Bitmap;

Bitmap[][][] a = new Bitmap[1000][2][2];
Bitmap[][][] b = new Bitmap[2][2][1000]; 
```

请注意，我只询问纯数组占用的内存，内部没有对象。

[我为什么要问？因为我正在写一个安卓游戏。对我来说顺序无所谓，但如果有内存差异，还是省一些就好了。]

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-11T13:09:38.890

是的，它确实有所作为。

在 Java 中，2D 数组是 1D 数组的数组，并且数组（像所有对象一样）除了保存元素本身所需的空间外，还具有标题。

所以考虑`int[10][2]`vs `int[2][10]`，并假设一个 32 位 JVM。

*   `int[2][10]`由一个 2 个元素的数组和 2 个 10 个元素的数组组成。总计 - 3 个数组对象 + 22 个元素。
*   `int[10][2]`由一个 10 个元素的数组和 2 个元素的 10 个数组组成。总计 - 11 个数组对象 + 30 个元素。

如果我们假设标头大小是 3 个 32 位字（典型的 32 位 JVM）并且引用是 1 个 32 位字，那么

*   `int[2][10]`占用 3*3 + 22*1 = 31 个字 = 124 个字节
*   `int[10][2]`占用 11*3 + 30*1 = 63 个字 = 252 个字节

应用相同的逻辑，您可以估计具有更多维数的数组的大小。

但很明显，如果最大维度是最右边的维度，则使用的空间更少。

* * *

[我已经用`int`数组完成了数学运算，但是在 32 位机器上 an`int`和 a`reference`占用相同的字节数。在 64 位机器上，引用的大小可以与 a`int`或 a相同`long`，具体取决于 JVM 选项。标头大小也可能不同......不完全确定......可能取决于平台。]

[我没有考虑容纳`Bitmap`对象本身所需的空间，但是无论您如何组织数组，它都是一样的。]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T13:13:48.247

是的，它有所作为。试试这个`-Xmx8M`：

```
// throws OutOfMemoryError
public static void main(String[] args) {
    int[][] a = new int[500000][2];
    System.out.println("a.length: '" + (a.length) + "'");
}

// works
public static void main(String[] args) {
    int[][] a = new int[2][500000];
    System.out.println("a.length: '" + (a.length) + "'");
} 
```

第一个会抛出 OutOfMemoryError，第二个会通过。

原因是，第一个版本创建了 500.000 个长度为 2 的数组，而第二个版本创建了 2 个长度为 500.000 的数组。

[参考](http://www.javamex.com/tutorials/memory/array_memory_usage.shtml)：

> 在诸如 C 之类的语言中，二维数组（或者实际上是任何多维数组）本质上是一个具有明智指针操作的一维数组。在 Java 中情况并非如此，其中多维数组实际上是一组嵌套数组。这意味着二维数组的每一行都有一个对象的开销，因为它实际上是一个单独的对象！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-11T13:09:33.310

在热点上尝试时（确切的数字可能与您在 dalvik 上获得的数字不同，但结论应该相似），我得到以下结果：

> 对象数组（1000x2x2）：76034 字节
> 对象数组（2x2x1000）：16137 字节

这符合一个粗略的计算：

```
[2][2][1000]                    
Array #     Header  Size  Memory  Number    Total
1             16       2      24       1       24
2             16       2      24       2       48
3             16    1000    4016       4   16,064

                         Grand Total       16,136

[1000][2][2]                    
Array #     Header  Size  Memory  Number    Total
1             16    1000    4016       1    4,016
2             16       2      24    1000   24,000
3             16       2      24    2000   48,000

                         Grand Total       76,016 
```

* * *

下面的测试代码，运行`-XX:-UseTLAB`以获得更准确的结果。

```
public class TestMemory {

    private static final int SIZE = 100;
    private static Runnable r;
    private static Object o;

    private static void test(Runnable r, String name, int numberOfObjects) {
        long mem = Runtime.getRuntime().freeMemory();
        r.run();
        System.out.println(name + ": " + (mem - Runtime.getRuntime().freeMemory()) / numberOfObjects + " bytes");
    }

    public static void main(String[] args) throws Exception {
        r = new Runnable() { public void run() { for (int i = 0; i < SIZE; i++) o = new Object[1000][2][2];} };
        test(r, "Object array (1000x2x2)", SIZE);

        r = new Runnable() { public void run() { for (int i = 0; i < SIZE; i++) o = new Object[2][2][1000];} };
        test(r, "Object array (2x2x1000)", SIZE);
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-11T13:08:00.950

没有内存差异，但您的数组索引的顺序 - 理论上 - 可能会影响程序的速度。

您通常在嵌套循环中处理多维数组内容。因此，您的数组应该以您在内部循环中处理相邻元素的方式组织，以允许编译器生成最有效的代码。我不知道 Java 如何组织内存，但认为它与 C/C++ 没有什么不同：

```
int a[10][100];
for (i = 0; i < 10; ++i) {
    for (j = 0; j < 100; ++j) {
        do_something_with(a[i][j]);
    }
} 
```

# sql - SQL CE select语句中的反向布尔（位）值

> ID：15339297
> 
> 赞同：8
> 
> 时间：2013-03-11T13:03:03.533
> 
> 标签：sql, sql-server-ce

我正在尝试编写一个从`SQL CE`数据库中获取表信息的查询，准备好放入 c# 中，然后导出到 XML。我需要将其中一列命名为“IDENT”，并带有一个布尔值（显然表示它是否是标识列）。

为此，我正在检查 AUTOINC_SEED 列是否为空，如下所示：

`select isnull(AUTOINC_SEED) as IDENT from information_schema.columns`

但是，这对于非标识列返回 TRUE，对于标识列返回 FALSE！有什么方法可以反转 select 语句中的布尔值？

编辑：我知道我可以做一个案例语句来解决这个特殊问题，但它让我对在 SQL 中反转布尔（位）值感到好奇。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-11T13:52:37.307

SQL Server 中的克拉 (^) 是[按位异或](http://msdn.microsoft.com/en-us/library/ms173278%28v=sql.90%29.aspx)运算符。

由于`1 ^ 1`等于 0 和`1 ^ 0`等于 1，你可以这样做：

```
SELECT (1 ^ [YourBitColumn]) as InverseBit 
```

我也没有方便的 SQL CE，但由于 SQL CE 似乎有这个，我相信下面的查询应该可以解决问题：

```
select (1 ^ AUTOINC_SEED) as IDENT from information_schema.columns 
```

# java - Java 运行时异常 - 错误的树类型

> ID：15339298
> 
> 赞同：6
> 
> 时间：2013-03-11T13:03:07.097
> 
> 标签：java, multithreading, swing, exception

我目前正在编写一个基本的音乐椅应用程序，并且在使用按钮打开/关闭音乐时遇到了一些困难（在我漂亮的摇摆界面中）。

我在 netbeans 中创建了接口，并添加了必要的动作监听器。下面是相关代码：

```
*private void runActionPerformed(java.awt.event.ActionEvent evt) {                                    
    if (run.getText().equals("Stop Music"))
        stopMus();
    else
        startMus();
}                                   

public void startMus()
{
    Music music = new Music();
    music.playAudio();
    run.setText("Stop Music");

}
public void stopMus()
{
    Music music = new Music();
    music.stopAudio();
    run.setText("Start Music");
}* 
```

“音乐”类如下：

```
 import java.io.File;
    import javax.sound.sampled.AudioFormat;
import javax.sound.sampled.AudioInputStream;
import javax.sound.sampled.AudioSystem;
import javax.sound.sampled.DataLine;
import javax.sound.sampled.SourceDataLine;

 public class Music {

        AudioFormat audioFormat;
        AudioInputStream audioInputStream;
        SourceDataLine sourceDataLine;
        boolean stopPlayback = false;
        playThread p;

        public Music()
        { 
            p = new playThread(); 
        }

        public void playAudio()
        {
          try {
                File soundFile = new File("music.mp3");  //file to play
                audioInputStream = AudioSystem.getAudioInputStream(soundFile); // start a stream
                audioFormat = audioInputStream.getFormat(); //finds format of file
                DataLine.Info dli = new DataLine.Info(SourceDataLine.class, audioFormat); //creates a buffer to play
                sourceDataLine =(SourceDataLine)AudioSystem.getLine(dli); //as above
           } catch (Exception e)
           {
                System.out.println(e.getMessage());
           }

          p.start();
        }

        public void stopAudio()
        {
            p.stopT();
        }

        private class playThread extends Thread
        {
            byte[] tempBuffer =   new byte[10000];
            @Override public void run(){
            try{
              sourceDataLine.open(audioFormat);
              sourceDataLine.start();

              int cnt;
              //loop while buffer isn't empty
              while((cnt = audioInputStream.read(tempBuffer,0,tempBuffer.length)) != -1 && stopPlayback == false){
                if(cnt > 0)
                  sourceDataLine.write(tempBuffer, 0, cnt);
              }
              sourceDataLine.drain();
              sourceDataLine.close();
              stopPlayback = false;
            }catch (Exception e) {
                System.out.println(e.getMessage());
                System.exit(0);
            }
          }

            public void stopT()
            {
                this.interrupt();
            }
        }
 } 
```

我得到的错误是一个非常奇怪的错误！（而且很长）

```
 Exception in thread "AWT-EventQueue-0" java.lang.RuntimeException: Uncompilable source code - Erroneous tree type: coursework.Music
    at coursework.JFrameThing.startMus(JFrameThing.java:57)
    at coursework.JFrameThing.runActionPerformed(JFrameThing.java:51)
    at coursework.JFrameThing.access$000(JFrameThing.java:3)
    at coursework.JFrameThing$1.actionPerformed(JFrameThing.java:23)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2012)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2335)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:404)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6288)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3267)
    at java.awt.Component.processEvent(Component.java:6053)
    at java.awt.Container.processEvent(Container.java:2045)
    at java.awt.Component.dispatchEventImpl(Component.java:4649)
    at java.awt.Container.dispatchEventImpl(Container.java:2103)
    at java.awt.Component.dispatchEvent(Component.java:4475)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4633)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4297)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4227)
    at java.awt.Container.dispatchEventImpl(Container.java:2089)
    at java.awt.Window.dispatchEventImpl(Window.java:2587)
    at java.awt.Component.dispatchEvent(Component.java:4475)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:675)
    at java.awt.EventQueue.access$300(EventQueue.java:96)
    at java.awt.EventQueue$2.run(EventQueue.java:634)
    at java.awt.EventQueue$2.run(EventQueue.java:632)
    at java.security.AccessController.doPrivileged(Native Method)
    at   java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:105)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:116)
    at java.awt.EventQueue$3.run(EventQueue.java:648)
    at java.awt.EventQueue$3.run(EventQueue.java:646)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:105)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:645)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:275)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:200)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:190)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:185)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:177)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:138) 
```

经过一番谷歌搜索，据称它是一个古老的；它还指向我对 Music 对象的实例化（Music music = new Music();），但我不明白为什么这会导致问题！我知道我的线程没有尽可能高效，但这肯定不会导致这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:05:20.987

好的，我认为这只是当您编译项目时netbeans引起的错误仍然存​​在错误......对不起<3

# c++ - 如何确保指针不指向同一个地方

> ID：15339306
> 
> 赞同：0
> 
> 时间：2013-03-11T13:03:42.423
> 
> 标签：c++, arrays, pointers

运行以下代码，打印出 57 57，我需要的是 56 57。我知道这是因为指针指向同一个位置，但我该如何避免这种情况呢？

```
int (*spriteArray[10])[8][8];
int i = 0;

void setup()
{
   Serial.begin(9600);
}

void loop()
{

someOtherMethod();
i++;
someOtherMethod();

someMethod();

  delay(100000);
}

void someOtherMethod()
{
    int sprite[8][8];
    spriteArray[i]= &sprite;

    sprite[0][0] = 56+i;

}
void someMethod()
{

  Serial.println(*spriteArray[0][0][0]);   
  Serial.println(*spriteArray[1][0][0]); 

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T13:05:21.927

在`someOtherMethod`您存储指向局部变量的指针，并且该指针在函数返回后无效。取消引用此指针会导致*未定义的行为*。

# mysql - MySQL查询以计算同一行中两个单元格之间的工作日

> ID：15339309
> 
> 赞同：0
> 
> 时间：2013-03-11T13:03:50.777
> 
> 标签：mysql, datetime, date-arithmetic

我有下表：

```
CREATE TABLE `document` (
    `id` INT(10) NOT NULL AUTO_INCREMENT,
    `systemReceivedTime` BIGINT(20) NOT NULL DEFAULT '0',
    `finishTime` BIGINT(20) NOT NULL DEFAULT '0',
    PRIMARY KEY (`id`)
) 
```

一排：

```
systemReceivedTime 1360747818002 // > 2013-02-13 11:30:18
finishTime         1362995961805 // > 2013-03-11 11:59:22 
```

我需要的是一种计算两个日期之间工作日数的方法。

要正确显示日期，请使用以下选择：

```
from_unixtime(systemreceivedtime/1000) ,
if(finishtime=0,null,from_unixtime(finishtime/1000)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:20:15.773

```
SELECT 5 * (DATEDIFF(FROM_UNIXTIME(finishTime/1000), FROM_UNIXTIME(systemReceivedTime/1000)) DIV 7) + MID('0123455501234445012333450122234501101234000123450', 7 * WEEKDAY(FROM_UNIXTIME(systemReceivedTime/1000)) + WEEKDAY(FROM_UNIXTIME(finishTime/1000)) + 1, 1)x FROM document; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T14:09:01.403

我有作为变量的解决方案。你可以一起使用 mor 公式，但我认为它更具可读性。

```
SELECT
    calc.id,
    calc.work_dates
FROM
    (
        SELECT
            d.id,
            @from :=from_unixtime(d.systemreceivedtime/1000)        AS dfrom,
            @to := from_unixtime(d.finishtime/1000)                 AS dto,
            -- Caclulate the Diffrent between both dates
            @ddiff := DATEDIFF(@to, @from)          AS ddiff,
            -- get the weekday of the startdate
            @wd := WEEKDAY(@from)                       AS weekdays,
            -- calculate how many days are from start of week until enddate
            @d1 := @ddiff + @wd                         AS days_from_week_start,
            -- calculate how many full week this is
            @fullweeks := @d1 DIV 7                     AS full_weeeks,
            -- calculate how many workdays are not in a fullweek
            @restdays := LEAST(MOD(@d1, 7), 5)      As rest_working_days,
            -- Weeks * 5 Workdays + rest_workdays - days_from_week_start
            @fullweeks * 5 + @restdays - @wd            AS work_dates
        FROM
            document AS d
    ) AS calc 
```

# java - Java参数错误，请帮忙

> ID：15339310
> 
> 赞同：0
> 
> 时间：2013-03-11T13:03:56.947
> 
> 标签：java

无法编译此代码，我收到一条错误消息：

`invalid method declaration;` `return type required public MineFinderFrame(int nc, int nr,int mod)`

请问有人可以修改我的代码吗？

```
class MineFinderPanel extends JPanel implements MouseListener
 {
int numCols;
int numRows;
int myModel;

 public static void main(String[] args)
 {
    MineFinderFrame w = new MineFinderFrame(30,50,42);
    w.numRows = 50; // 50 rows
    w.numCols = 20; // 20 columns
    w.myModel = 42;
    w.setVisible(true);
}

public MineFinderFrame(int nc, int nr,int mod)
{
   numCols = nc;
   numRows = nr;
   myModel = mod;
   addMouseListener(this);

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T13:06:01.250

如果重命名类，则还必须重命名此类中的构造函数。

所以我会从这个开始：

```
public MineFinderPanel(int nc, int nr,int mod)
{
   numCols = nc;
   numRows = nr;
   myModel = mod;
   addMouseListener(this);
} 
```

然后，您还必须将 main 方法中的第一行更改为

```
MineFinderPanel w = new MineFinderPanel(30,50,42); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T13:05:28.927

您的第二个函数需要声明一个返回类型。

如果您的函数不应该返回任何内容，请使用**void**：

```
public void MineFinderFrame(int nc, int nr, int mod) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T13:06:59.273

方法 MineFinderFrame(int nc, int nr,int mod) 没有说明它返回什么类型。

你的意思是它是构造函数？如果是这样，is 应该与类同名：

```
public MineFinderPanel(int nc, int nr,int mod) {
  numCols = nc;
  numRows = nr;
  myModel = mod;
  addMouseListener(this);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T13:07:49.163

`MineFinderFrame`应该是构造函数？

如果是，它**必须**与类同名（`MineFinderPanel`, not `MineFinderFrame`）。否则，它是一个普通的方法，它**必须**有一个返回类型。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-11T13:06:29.003

您需要一个名为 的类`MindFinderFrame`，如果那是您要实例化的类型。您的意思是将 MindFinderPanel 命名为 MindFinderFrame 吗？（或者，换一种方式，也许你应该打电话，

`MindFinderPanel m = new MindFinderPanel(...);`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-11T13:08:13.713

```
public MineFinderFrame (int nc, int nr,int mod) 
```

是一个名为 MineFinderFrame 的类的构造函数，您正试图将它用作名为 MineFinderPanel 的类的构造函数。

# java - 如何在 Firefox 19 中使用 Selenium WebDriver 进行鼠标悬停？

> ID：15339311
> 
> 赞同：17
> 
> 时间：2013-03-11T13:04:03.083
> 
> 标签：java, selenium-webdriver, mousehover

我使用了硒 2.31。

我已经使用 Actions 类进行鼠标移动。使用这个我将鼠标移到一个菜单上，它的子菜单只出现了几分之一秒，这与旧版本的 Firefox 不同。

由于这个问题，我无法选择子菜单，`driver.findElement`因为它会引发异常“元素无法滚动到视图中”。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-11T22:04:15.280

使用操作对象，您应该首先移动菜单标题，然后移动到弹出菜单项并单击它。最后别忘了打电话`actions.perform()`。下面是一些示例 Java 代码：

```
Actions actions = new Actions(driver);
WebElement menuHoverLink = driver.findElement(By.linkText("Menu heading"));
actions.moveToElement(menuHoverLink);

WebElement subLink = driver.findElement(By.cssSelector("#headerMenu .subLink"));
actions.moveToElement(subLink);
actions.click();
actions.perform(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-26T16:30:20.757

另一种解决方法是使用 Selenium 的 JavaScript 执行器来强制显示元素的样式。

这方面的一个例子是在 C#

```
//Use the Browser to change the display of the element to be shown
 (IJavaScriptExecutor)driver).ExecuteScript("document.getElementById('myId').stlye.display="block");

//navigate to your link that is now viewable 
driver.FindElement(By.Xpath('//LinkPath')).Click(); 
```

从那里，您可以找到元素的 XPath 并使用 selenium 单击该元素。您也可以级联它以找到主要元素的子元素

```
//(IJavaScriptExecutor)ffbrowser).ExecuteScript("document.getElementById('myId').children[1].children[1].style.display='block'"); 
```

请注意，只有当您有一个悬停元素在悬停时更改显示样式时，这才有可能。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-13T10:24:17.070

试试这个代码......这是c尖锐的代码......

```
//Webelement is the main menu Link
webElement = driver.FindElement(By.XPath("Your element xpath"));
Actions act = new Actions(driver);
        act.MoveToElement(webElement).Perform();//This opens menu list

        System.Threading.Thread.Sleep(5000);//This line will help you to hold menu 
 //This web element is the sub menu which is under main menu
        webElement = driver.FindElement(By.XPath("Sub menu path"));
        act.MoveToElement(webElement).Perform();//This opens menu list
        System.Threading.Thread.Sleep(5000);//Holds menu
    //This web element is the option you have to click
        webElement = driver.FindElement(By.XPath("Path"));
        webElement.Click(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-28T11:41:21.353

如果您使用 Ruby，这将很有帮助。

1.首先你需要通过xpath或者id找到元素。

2.然后使用方法action.move_to().perform。

这是代码：

```
 hover = WAIT.until{$driver.find_element(:xpath,"xpath")}
    driver.action.move_to(hover).perform 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-12T03:50:22.177

这个答案帮助解决了我的问题。

我的挑战是在菜单选项下找到一个链接。在我将鼠标悬停在菜单上之前，该链接不可见。

对我来说，这个关键部分是发现除了悬停在菜单上之外，我接下来必须将鼠标悬停在链接上才能与之交互。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-03T21:52:30.160

```
List<WebElement> list = driver.findElements(By.xpath("//a"));
        for (int i=0;i<list.size();i++){
        if(list.get(i).getText().equalsIgnoreCase("cacique intimates M"))
            {
    new Actions(driver).moveToElement(list.get(i)).click().build().perform();
    System.out.println("Clicked on Parent Category");
    new Actions(driver).moveToElement(list.get(i)).moveToElement(driver.findElement(By.linkText("SPECIALTY BRAS"))).click().build().perform();
        break;
    }                           
    } 
```

# jquery - jQuery 或任何：可能只使 div 的一部分可点击？

> ID：15339312
> 
> 赞同：0
> 
> 时间：2013-03-11T13:04:03.810
> 
> 标签：jquery, html, map, area, clickable

是否可以只使 div 的一部分可点击——比如 clickmap/imagemap？可以用 jQuery 吗？提示：我不想编辑 html（带有 200 个单独 html 文件的误用模板）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T13:05:41.773

当您的 div 被点击时，事件处理程序会接收到该事件，因此您可以测试点击的位置。

如果需要，您可能希望使用单击的元素位置和大小，`$(this).offset()`使用`$(this).width()`和`$(this).height()`。例如 ：

```
$('mydivselector').click(function(e) {
     if (e.pageY > $(this).offset().top + 0.5*$(this).height()) {
          // bottom was clicked

     } else {
          // up of the div was clicked

     }
}); 
```

如果要阻止默认操作和事件传播，请从事件处理程序返回 false。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T13:08:39.393

您可以尝试为所有元素制作一个 jQuery 选择器，并对一些元素进行切片

```
var selector = "#mydiv";
var numberOfElements = $(selector).find('*').length/2; //It's just an example

$(selector).find('*').slice(0, numberOfElements).click(function()  {
 [....]//do stuff
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T13:06:49.057

您可能需要使整个 div 可单击，然后通过检查单击的坐标来确定您是否要处理该事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T13:07:58.773

您可以检查[事件对象](http://api.jquery.com/category/event-object/)`offsetX`的和`offsetY`属性的值，如果您不喜欢它们，则决定什么也不做。

**[例子](http://jsfiddle.net/eZjCY/)**。

或者，如果您*需要*click 事件根本不触发，您可以动态创建额外的透明`<div>`s 并将它们部分放置在现有元素的前面，以便它们掩盖您不想响应点击的部分。

# perl - Perl_Function 和子程序

> ID：15339314
> 
> 赞同：0
> 
> 时间：2013-03-11T13:04:07.197
> 
> 标签：perl

perl 中的函数和子例程有什么区别？我在几个站点发现了差异，我发现 Subroutine 不返回 value 但函数返回但实际上 Subroutine 也返回 value 。请让我知道 perl 中的 Function 和 subroutine 之间的确切区别是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:08:56.193

通常在计算机科学中，函数是一种特殊类型的子程序，它返回一个值（而不是仅仅因为它的副作用而被调用）。但是在 Perl 中（正如食谱所说），我们没有做出这种区分。

这两个词的意思是一样的。它们是同义词。

课程：[Perlmonks](http://www.perlmonks.org/?node_id=567915)。

更新：它们是同义词，只是因为 Perl 返回表达式的最后一个值，在子块中求值。

# php - 从网页管理界面拉取数据

> ID：15339315
> 
> 赞同：1
> 
> 时间：2013-03-11T13:04:10.730
> 
> 标签：php, javascript, web-applications

我希望从 UPS 的 Web 管理界面中提取状态字段，以便可以在我正在编写的另一个 Web 应用程序中使用数据。我想知道是否有人会知道解决此问题的方法，因为我似乎无法通过网络搜索找到我正在寻找的信息。Id 还需要它的值来刷新或重新检查。下面的 UPS Web 界面示例首先查看在线字段：

![UPS Web 界面示例](../Images/ea4b5c2b9c0c880ddcd2cd16ce627d70.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:23:05.427

这是一个非常基本的示例，我尚未测试（未安装 php）。

您需要查看控制面板的来源，并了解如何识别包含所需信息的元素。

下面的代码（希望）搜索具有 id 的元素，`server-status`如果该元素存在，则检查其`class`属性以确定服务器的状态。

你不必使用这些`dom`东西，你也可以用正则表达式或其他东西来做。只要你能准确找到你需要的信息。

您可能还需要使用 cURL 或比`file_get_contents()`您可能需要登录凭据才能查看相关页面更高级的东西。

```
<?php

    $html = file_get_contents("http://path.to/your/control.panel");
    // you may need to use cURL or something more advanced if you need to provide login credentials

    $dom = new DOMDocument;

    $dom->loadHTML($html);

    $test = $dom->getElementById('server-status');

    if ($test == NULL) {
        // unable to find element, somethings up!
    } else {
        if ($test->getAttribute('class') == "online") {
            // status element has "online" class, server is online
        } else {
            // status element does not have "online" class, somethings up!
        }
    }

?> 
```

**更新**

快速浏览了该管理软件的演示，它不会像我的示例那么简单，因为似乎没有任何有用的元素`id`或`class`名称。它仍然可以做到。

# ruby-on-rails - Mongoid + ActiveModel 验证 + I18n，没有正确翻译属性

> ID：15339323
> 
> 赞同：2
> 
> 时间：2013-03-11T13:04:23.570
> 
> 标签：ruby-on-rails, ruby, internationalization, mongoid, activemodel

我正在尝试使我的`Booking`模型的属性国际化

从我的 fr.yml ：

```
 attributes: &attributes
    booking:
      first_name: 'Prénom'
      last_name: 'Nom'
      email: "Email"
      phone: 'Téléphone'

  activemodel:
    errors:
      <<: *errors
    attributes:
      <<: *attributes 
```

当我生成一个 rails 控制台时：

```
2.0.0p0 :011 > I18n.t(:activemodel)[:attributes][:booking]
 => {:first_name=>"Prénom", :last_name=>"Nom", :email=>"Email", :phone=>"Téléphone"} 
```

但 ：

```
2.0.0p0 :013 > Booking.human_attribute_name('first_name')
 => "First name" 
```

但是，在我的网络服务器上，错误仍然是英语 + 法语，例如：

"名字 doit être rempli(e)"

我错过了什么？我正在使用 mongoid、ruby 2.0.0 和 rails 3.2.11。

请注意，我正在使用它`model.errors.full_messages`来检索错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:23:04.647

修复 ：

```
mongoid:
  attributes:
    <<: *attributes 
```

似乎即使`Mongoid::Document`包含`ActiveModel::Validation`，您也必须为翻译定义一个单独的键。

# jquery - jQuery防止一个项目被放入另一个列表

> ID：15339324
> 
> 赞同：0
> 
> 时间：2013-03-11T13:04:26.717
> 
> 标签：jquery, html, css, jquery-ui-sortable

我有两个列表，每个列表都有一个唯一的 ID。我想知道如何防止父父列表主列表将整个外部部分`<div>`放入`<li> <div>`已经包含`<ul> <li>`其自己列表的列表中。此外，占位符也出现在那里。我想知道是否有一种方法可以强制属于第一个列表的项目保留在那里，即使它们移动到另一个列表上方，并且在主全局列表中有一个项目。

提前致谢。

编辑：一些代码：

```
<ul id="main">
      <li>
           <div id="content"><p>Lorem ipsum...</p></div>
      </li>
      <li>
        <div id="Section1">
            <ul id="section-list">
                 <li><div id="item1"><h2>Hello World</h2><li>
                 <li><div id="item2"><h2>Hello World</h2><li>
            </ul>
        </div>
      </li>
   <ul> 
```

jQuery：

```
$(document).ready(function () {
             $("#main").sortable({
                 connectWith: "#main",
                 placeholder: 'placeholder',
                 forcePlaceholderSize: true,
                 start: function (e, ui) {
                     var elementHeight = ui.item.height();
                     ui.placeholder.height(elementHeight);
                 }
             }); 
```

我的代码现在看起来像这样：

```
<script type="text/javascript">
         $(document).ready(function () {
             $('ul#main').sortable({
                 items: 'li:not(:last-child)',
                 placeholder: 'placeholder',
                 forcePlaceholderSize: true,
                 handle: '.grab-and-move-area',
                 start: function (e, ui) {
                     var elementHeight = ui.item.height();
                     ui.placeholder.height(elementHeight);
                 }
             });
         });
     </script> 
```

**编辑：添加了带有原始代码的最后一个 jsfiddle：**

我复制了我所有的原创作品，这里是：http: [//jsfiddle.net/wt4N8/1/](http://jsfiddle.net/wt4N8/1/) <-- 将摘要拖到书籍部分，你会看到

**编辑：有人可以告诉我为什么这不能正常工作吗？谢谢！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:09:44.417

我已经删除了您不必要的 html 标记，并将您包装`ul#main`在一个`<div>`This div 中，允许您将其中的所有`<ul>`s 与`.sortable()`. 您的占位符显示，您可以将列表项从一个层次结构级别移动到另一个层次结构，包括创建一个新的子列表。

使用 jquery 1.8.3 和 jquery-ui 1.9.2，

## html

```
<div id='sortablediv'>
  <ul id="main">
      <li id="content">
           Lorem ipsum..
      </li>
      <li id="Section1" class='section-head'>Section One
            <ul id="section-list1">
                <li id="item1">Hello World</li>
                <li id="item2">Hello Mars</li>
            </ul>
      </li>
      <li id="Section2" class='section-head'>Section Two
            <ul id="section-list2">
                <li id="item3">Goodbye World</li>
                <li id="item4">Goodbye Mars</li>
            </ul>
      </li>    
   <ul>
</div> 
```

## js

```
$(document).ready(function () {
             $("#sortablediv ul").sortable({
                 connectWith: "#sortablediv ul", //connect all uls with all other uls in #sortablediv
                 placeholder: 'placeholder'
             });
}); 
```

[http://jsfiddle.net/S3836/18/](http://jsfiddle.net/S3836/18/)

参考：[http ://a.shinynew.me/post/4641524290/jquery-ui-nested-sortables](http://a.shinynew.me/post/4641524290/jquery-ui-nested-sortables)

# jasper-reports - 如何在碧玉报告中生成分页条形图

> ID：15339325
> 
> 赞同：0
> 
> 时间：2013-03-11T13:04:28.890
> 
> 标签：jasper-reports, bar-chart

我在这里想要的是，第一页上某些 x 条记录的条形图，然后下一页上的下 x 条记录，依此类推。我为此搜索了很多，但没有找到确切的解决方案。Jasper Reports 甚至有可能吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T06:04:38.127

您可以通过使用报告组来做到这一点。

在 iReport 中打开您的报告。

```
 1:-Open report and in Report inspector right click and select "Add Report Group"

 2:-Give any name  (eg. splitter) and 
    select "Group by the following expression" and enter
           $V{REPORT_COUNT} - 1 - ( ($V{REPORT_COUNT} - 1) % 3 ). 
  (here 3 means 3 bars in a page)

 Click next and select  Add the group footer.

 3:- Open palette and drag and drop a chart element from the Palette into 
     the report designer on the group footer band. 

 4:- Select Bar Chart, follow the wizard: 
     a:- "Reset type" = Group

     b:- "Reset group" = splitter
               (same name what you gave at the time of Report data set creation)

     c:- add series in Details tab. 
```

见图表

![在此处输入图像描述](../Images/a1d6be28071fcbc9406802b6393a0b01.png)

# javascript - 水平扩展文本区域

> ID：15339328
> 
> 赞同：1
> 
> 时间：2013-03-11T13:04:50.643
> 
> 标签：javascript, jquery, css, textarea, expand

现在我们正在使用 Jack Moore 的 Autosize ( [http://www.jacklmoore.com/autosize](http://www.jacklmoore.com/autosize) )，它可以很好地进行垂直扩展。但是有没有一种解决方案可以垂直和水平扩展（最大宽度）？

# c# - MenuItem 点击事件不会触发

> ID：15339329
> 
> 赞同：1
> 
> 时间：2013-03-11T13:04:50.710
> 
> 标签：c#, .net, wpf

我的应用程序中有这个菜单：

```
<Menu Height="23" HorizontalAlignment="Left" Margin="84,66,0,0" Name="menu1" VerticalAlignment="Top" Width="200">
        <MenuItem Header="File" />
        <MenuItem Header="Youtube" Name="myYouTube" Click="MenuItem_Click">
            <MenuItem Header="Login"/>
            <MenuItem Header="Logout"/>
        </MenuItem>
        <MenuItem Header="Help" />
    </Menu> 
```

当我点击`myYouTube`然后`MenuItem_Click`不会触发。

知道我为什么会发生吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T13:34:44.023

如果您有子菜单项，则不会引发事件 se： 但也许您可以使用 SubmenuOpened 事件 se：[`MenuItem.Click Event`](http://msdn.microsoft.com/en-us/library/system.windows.controls.menuitem.click.aspx)
[`MenuItem.SubmenuOpened Event`](http://msdn.microsoft.com/en-us/library/system.windows.controls.menuitem.submenuopened.aspx)

我现在将其更改为 WPF 的事件。

# ant - ant run.client 参数传递不知道的目录来放置 i/p 文件

> ID：15339335
> 
> 赞同：-1
> 
> 时间：2013-03-11T13:05:04.797
> 
> 标签：ant, axis2

我正在尝试从axis2-1.6.2-bin 示例中运行示例代码，示例的名称是soapwithattachments。. 我已经运行了 generate.service 命令来部署 aar 文件。. 但是当我运行 ant run.client ank.txt c:// 。. 它说项目“SOAPWithAttachmentsSample”中不存在 ank.txt，build.xml 文件没有让我知道将文件 ank.txt 放在哪里。. . 请帮忙，我的项目需要这个，截止日期快到了

```
<project name="SOAPWithAttachmentsSample" default="generate.service">  
    <property environment="env" />  
    <property name="axis2.home" value="../../" />  
    <property name="axis2.repo" value="${axis2.home}/repository" />  
    <property name="build.dir" value="build" />  
    <property name="client.classes.dir" value="${build.dir}/classes" />  
    <path id="axis.classpath">  
        <fileset dir="${axis2.home}/lib">  
            <include name="*.jar" />  
        </fileset>  
        <pathelement location="build/swaSampleClient.jar" />  
    </path>  

    <target name="generate.service" depends="compile">  
        <jar destfile="${build.dir}/sample-swa.aar">    
            <fileset dir="resources/">  
                <include name="META-INF/services.xml" />  
            </fileset>  
            <fileset dir="${build.dir}/classes">  
                <include name="sample/soapwithattachments/service/**/*.class" />  
            </fileset>  
        </jar>  
        <copy file="${build.dir}/sample-swa.aar" tofile="${axis2.home}/repository/services/sample-swa.aar" overwrite="true" />  
    </target>  

    <target name="compile">  
        <mkdir dir="${client.classes.dir}" />  
        <!-- Compile client -->  
        <javac debug="on"  srcdir="src" destdir="${client.classes.dir}">  
            <classpath refid="axis.classpath" />  
        </javac>  
    </target>  
    <target name="check-parameters">  
        <condition property="parameters.set">  
            <and>  
                <isset property="dest" />  
                <isset property="file" />  
            </and>  
        </condition>  
        <!-- This is a hack to get a if-else working in ant. Some much more "ANTy" person is welcome to improve this -->  
        <antcall target="print-usage" />  
    </target>  

    <target name="print-usage" unless="parameters.set">  
        <echo message="ant -Dfile <file to be transfered>  -Ddest <name of the destination file>" />  
    </target>  

    <target name="run.client" depends="compile,check-parameters" if="parameters.set">  
        <jar destfile="${build.dir}/swaSampleClient.jar">  
            <fileset dir="${build.dir}/classes">  
                <include name="sample/soapwithattachments/client/**/*.class" />  
            </fileset>  
        </jar>  
        <java classname="sample.soapwithattachments.client.SWAClient" classpathref="axis.classpath" fork="true">  
            <arg value="-file" />  
            <arg value="${file}" />  
            <arg value="-dest" />  
            <arg value="${dest}" />  
            <jvmarg value="-Daxis2.repo=${axis2.repo}" />  
        </java>  
    </target>  
    <target name="clean">  
        <delete dir="build" />  
    </target>  
</project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:25:14.150

当您指定命令行时`ant run.client ank.txt c://`，并且将所有参数解释为要执行的目标。目标`run.client`存在，但其他两个显然不存在，因此您的错误消息。通过查看 run.client 目标，您似乎需要为`file`and设置构建属性`dest`。查看 build.xml 中的使用目标。它显示了将东西作为构建属性传递给 ant 的语法，即使用`-D<property>=<value>`. 在您的情况下，您可能需要以下内容：

`ant run.client -Dfile=ank.txt -Ddest=c://`

# c# - Ajax 调用返回内部 500 错误

> ID：15339336
> 
> 赞同：-1
> 
> 时间：2013-03-11T13:05:05.667
> 
> 标签：c#, jquery, asp.net-mvc-4

嗨，我正在尝试对服务器执行 ajax 调用，但我似乎没有运气，我一直在控制台上返回错误 500 Internal server error。这是我的 ajax 调用：

```
 $("body").on("click", "#ok", function (e) {
    var id = $(this).attr("data-bookid");
    $.ajax({
        url: "/ProductEditor/DeleteBook",
        type:"POST",
        data: { bookId: parseInt(id) },
        success: function (data) {
            console.log(data);
        },
        error: function (data) {
            console.log(data);
        }
    });
    e.preventDefault();
}) 
```

这是我试图调用的 C# 代码：

```
public ActionResult DeleteBook(int bookId)
{
   bookRepository.DeleteBook(bookId);
   return RedirectToAction("Books", "ProductManager");
} 
```

在尝试调试时，我注意到 DeleteBook 方法甚至没有被调用。

我究竟做错了什么？

**编辑**我已经添加了 [HttpPost] 属性，但它仍然不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T13:09:43.767

没有更多信息，很难告诉你你做错了什么。

但是，`error`jQuery [ajax](http://api.jquery.com/jQuery.ajax/)函数的函数回调需要三个参数：

(jqXHR, textStatus, errorThrown)

```
$.ajax({
    url: "/ProductEditor/DeleteBook",
    type:"POST",
    data: { bookId: parseInt(id) },
    success: function (data) {
        console.log(data);
    },
    error: function (jqXHR, textStatus, errorThrown) {
        console.log(errorThrown);
    }
}); 
```

第三个参数`errorThrown`将具有调用的 HTTP 响应文本`/ProductEditor/DeleteBook`。我建议查看 errorThrown 显示的内容，以及可能在调试模式下运行整个程序。

也许`var id = $(this).attr("data-bookid");`是不正确的，并且 id 的值被设置为`undefined`?

此外，您可以使用 IE 或 Chrome 中的 F12 开发工具中的网络选项卡、Firefox 中的 Firebug 或[Fiddler](http://www.fiddler2.com/fiddler2/)来调试 ajax 调用。您可以查看发送到服务器的 ajax 请求以及来自服务器的响应，以查看是否以`bookId`正确的格式 (JSON) 发送了正确的数据 ( ) 以及来自服务器的响应是什么

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-09T05:54:51.127

您的**WebMethod**必须是**静态的**

```
[WebMethod(true)]
public static ActionResult DeleteBook(int bookId) 
{    
     bookRepository.DeleteBook(bookId);    
     return RedirectToAction("Books", "ProductManager"); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T13:07:52.533

将 HttpPost 添加到您的方法中并尝试

```
[HttpPost]
public ActionResult DeleteBook(int bookId)
{
   bookRepository.DeleteBook(bookId);
   return RedirectToAction("Books", "ProductManager");
} 
```

# regex - 正则表达式优化器

> ID：15339338
> 
> 赞同：-1
> 
> 时间：2013-03-11T13:05:15.330
> 
> 标签：regex

我有一大堆简单的表达式（2Mb 文件）。例如：
`11.*;112.*;113.*;12.*;123.*`

我需要删除不必要的表达式并想出这个：
`11.*;12.*`

bash 版本将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:18:52.620

*如果您的模式中唯一的通配符是以下形式`.*`*，那么这是 Perl 中可以使用的东西：

```
#!/usr/bin/perl
use strict;
use warnings;

my %terms;
{
    local $/;
    %terms = map {$_ => 1} split /;|\n/, <>;
}

foreach my $k1 (keys %terms)
{
    foreach my $k2 (keys %terms)
    {
        if ($k1 ne $k2 and $k1 =~ /^$k2$/)
        {
            delete $terms{$k1};
            last;   
        }
    }   
}

print join ';', keys %terms; 
```

它接受您的文件作为命令行参数。

这是通过将密钥相互比较来实现的。在每次比较中，一个键被视为字符串，另一个键被评估为正则表达式。这利用了`.*`匹配任何东西的事实——包括文字字符`.*`。因此，匹配另一个模式的文字字符串的表达式也将匹配该模式将匹配的所有字符串。

即使`.*`单个模式中有多个术语，它也会起作用。例如，它正确地确定`1.*1.*`匹配所有`11.*`匹配的内容，删除后者。

但是，这是一种 hacky 的简化，如果您引入其他正则表达式模式，**它将不起作用。***一般来说*，这个问题没有简单的解决方案，因为您必须解析所有模式并找出每个模式匹配的内容。

# css - 根据另一个div定位div

> ID：15339341
> 
> 赞同：2
> 
> 时间：2013-03-11T13:05:17.527
> 
> 标签：css, html, position, responsive-design

我有一个页面有 3`div`秒。“ `div`A”位于屏幕顶部。“ `div`B”位于屏幕的中心。

我想要做的是`div`始终根据`div`“B”的位置定位“C”（这是一个响应页面）。

![期望结果的样本](../Images/9fdd526e6c2e1fb9beabe2f8e260e1d6.png)

此页面位于 Twitter Bootstrap 下。

```
<div class="container-fluid">

        <div class="row-fluid secao" id="secao-home">
            <div class="row-fluid">

                <div class="span12">
                    <p class="text-center" id="contato"><a href="#">A</a></p>                                               
                </div>

                <div class="span12" id="apoio">
                    C                                   
                </div>

                <div class="row-fluid">
                    <div class="span12 text-center" id="logo">

                        <nav id="mainNav">  
                            <ul>
                                <a href="#">1</a>
                                <a href="#">2</a>
                                <a href="#">3</a>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
        </div>

        <div class="row-fluid secao" id="secao-carros">
            <div class="span12"></div>
        </div>

        <div class="row-fluid secao" id="secao-motos">
            <div class="span12"></div>
        </div>

        <div class="row-fluid secao" id="secao-nauticos">
            <div class="span12"></div>
        </div>

        <div class="row-fluid secao" id="secao-contato">
            <div class="span12"></div>
        </div>
    </div> 
```

[http://jsfiddle.net/dU9cZ/](http://jsfiddle.net/dU9cZ/)

有人可以告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T13:53:13.647

在 CSS 中，定位相对于具有显式设置属性`absolute`的最近的父元素或封闭元素起作用。`position`如果你想要一个给定的`div`，比如图中标有“C”的那个，让它的位置依赖于另一个`div`，比如“B”，你应该通过将“C”放在“B”中来使“B”成为“C”的父级“乙”。

然后你可以给“C”类似的东西，分别用与“B”右侧的所需距离和“C”的高度`position:absolute;right:100px;top:-30px;`替换 和 的值`right`。`top`

如果“B”也被赋予明确的`position`like `position:relative`（`absolute`或任何其他有效值，重要的是您明确设置它），那么“C”的位置将相对于“B”定义。

`absolute`当您希望“C”与“B”“相对”时，您应该使用而不是似乎有点违反直觉`relative`，但原因是 CSS 将“相对”理解为“相对于”元素通常在文档流中的位置”。

# jquery - 将基础3升级到4

> ID：15339350
> 
> 赞同：0
> 
> 时间：2013-03-11T13:05:34.287
> 
> 标签：jquery, ruby-on-rails, zurb-foundation, zepto

我最近刚刚从基础 3 升级到 4，但我注意到我无法让 zepto 正常工作。我不断收到以下信息

```
Started GET "/js/vendor/zepto.js" for 127.0.0.1 at 2013-03-12 00:03:30 +1100

ActionController::RoutingError (No route matches [GET] "/js/vendor/zepto.js"): 
```

我已按照指示前往发球台，并在谷歌上搜索尝试找到解决方案，但没有任何运气

这是我的页脚

```
= javascript_include_tag :application
:javascript
  document.write('<script src=/js/vendor/'
    + ('__proto__' in {} ? 'zepto' : 'jquery')
    + '.js><\/script>');
/ Check for Zepto support, load jQuery if necessary 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T07:49:15.187

重新编译的资产和问题已修复

# wso2 - wso2 消息代理主题列表

> ID：15339351
> 
> 赞同：0
> 
> 时间：2013-03-11T13:05:37.000
> 
> 标签：wso2, broker

我正在开发 WSO2 Message Broker 2.0.0。

我必须编写一个**Java 代码来获取**消息代理中创建/可用的所有主题的列表。

有没有 API 可以做到这一点？

请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T04:24:47.657

没有我到目前为止所探索的。您无法从消息代理 2.0 中获取主题名称。我不知道即将发布的版本，但在那个版本之前，我找不到任何东西来获取在消息代理中创建的主题列表。

# javascript - 如何在单击 html 链接时在弹出窗口中打开不同的内容

> ID：15339352
> 
> 赞同：2
> 
> 时间：2013-03-11T13:05:37.120
> 
> 标签：javascript, html, css, jquery

我正在使用以下代码。我想在点击时打开不同的内容。

```
<style>
#overlay_form {
    position: absolute;
    border: 5px solid gray;
    padding: 10px;
    background: white;
    width: 270px;
    height: 190px;
}
#pop {
    display: block;
    border: 1px solid gray;
    width: 65px;
    text-align: center;
    padding: 6px;
    border-radius: 5px;
    text-decoration: none;
    margin: 0 auto;
}
</style> 
```

关注 javascript

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>    
<script type="text/javascript">     
$(document).ready(function () {
    //open popup
    $("#pop").click(function () {
        $("#overlay_form").fadeIn(1000);
        positionPopup();
    });

    //close popup
    $("#close").click(function () {
        $("#overlay_form").fadeOut(500);
    });
});

//position the popup at the center of the page
function positionPopup() {
    if (!$("#overlay_form").is(':visible')) {
        return;
    }
    $("#overlay_form").css({
        left: ($(window).width() - $('#overlay_form').width()) / 2,
        top: ($(window).width() - $('#overlay_form').width()) / 7,
        position: 'absolute'
    });
}

//maintain the popup at center of the page when browser resized
$(window).bind('resize', positionPopup); 
</script> 
```

我想使用类似以下html的东西

```
<html>
<div>
    <a href="#" id="pop" >Product Overview</a>
    <br/>
        <div id="overlay_form" style="display:none">
            <a href="#" id="close" >Close</a>
        </div>

    <a href="#" id="pop" >User Interface</a>

        <div id="overlay_form" style="display:none">
            <a href="#" id="close" >Close</a>
        </div>
</div>

</html> 
```

单击不同的链接时，我想在弹出窗口中打开不同的内容。

无需重复具有不同 id 的整个 java 脚本是可能的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:57:58.603

有很多方法可以做到这一点，但使用现有代码的最简单方法需要将大量 id 转换为类。像这样的东西：

**HTML**

```
<html>
    <div>
        <a href="#" class="pop" popup-id="popup1">Product Overview</a>

        <div class="overlay_form" id="popup1" style="display:none">
            <a href="#" class="close" >Close</a><br />
            Popup1 text.
        </div>

        <a href="#" class="pop" popup-id="popup2">User Interface</a>

        <div class="overlay_form" id="popup2" style="display:none">
            <a href="#" class="close" >Close</a><br />
            Popup2 text.
        </div>
    </div>
</html> 
```

**JS**

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>    
<script type="text/javascript">     
    $(document).ready(function () {
        //open popup
        $(".pop").click(function () {
            var targetPopup = $(this).attr('popup-id');
            $("#" + targetPopup).fadeIn(1000);
            positionPopup(targetPopup );
        });

        //close popup
        $(".close").click(function () {
            $(this).closest(".overlay_form").fadeOut(500);
        });
    });

    //position the popup at the center of the page
    function positionPopup(targetPopup) {
        $("#" + targetPopup).css({
            left: ($(window).width() - $('#overlay_form').width()) / 2,
            top: ($(window).width() - $('#overlay_form').width()) / 7,
            position: 'absolute'
        });
    }

    //maintain the popup at center of the page when browser resized
    $(window).bind('resize', positionPopup); 
</script> 
```

这种方法允许您使用 class 属性来定义更大的一组项目，这些项目共享相同的行为（以及样式:)），同时仍然支持每个弹出窗口的“唯一性”。

注意：这使用了自定义属性 ( )，除非您更新声明以包含它，`popup-id`否则该属性不会验证。`DOCTYPE`然而，许多人只是忽略了这个问题，特别是因为 HTML5 正在添加对自定义属性的支持。

**编辑：**忘了提。. . 由于您在此处将 ID 更改为类，因此您还需要将 CSS`#pop`和更新`#overlay_form`为`.pop`和`.overlay_form`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:46:38.193

首先，您不能在当前使用的同一页面上使用相同的 id 两次`#pop`，`#close`并且`#overlay_form`在您的两个链接上，使用类或不同的 id 更新它们。

您可以`div`在每个`a`标签内添加一个存储您的内容的标签，然后在点击时显示/隐藏它？

# xml - 使用 XSLT 将 xml 元素内容传输到另一组元素

> ID：15339353
> 
> 赞同：0
> 
> 时间：2013-03-11T13:05:38.127
> 
> 标签：xml, xslt

我试图将内容从一组兄弟元素复制到位于同一文档中的一组相似元素，这些元素具有不同的父元素和祖先元素。

我认为使用 key 功能会很容易，但是我在网上和我的 xslt 食谱中找到的所有示例都参考匹配属性而不是元素。

我已经研究了几个小时并且非常沮丧。我对 xml 和 xslt 相当陌生。

注意-下面的示例代表了我主要尝试完成的示例。我正在使用的实际文档有 50 多个具有相关内容的同级数据元素。抱歉没有图片（声誉不够高）。

## 启动xml

```
<?xml version="1.0" encoding="UTF-8"?>

<DE>
  <set1>
    <Type>
      <Thing>
        <title></title>
        <year></year>
        <Author></Author>
        <Store></Store>
      </Thing>
    </Type>
  </set1>

  <record>
    <title>WorkPlease</title>
    <year>2012</year>
    <Author>Jimmy</Author>
    <Store>ArmyStore</Store>
  </record>

</DE> 
```

* * *

期望的结束状态

* * *

```
<?xml version="1.0" encoding="UTF-8"?>

 <DE>
  <set1>
    <Type>
      <Thing>
        <title>WorkPlease</title>
        <year>2012</year>
        <Author>Jimmy</Author>
        <Store>ArmyStore</Store>
      </Thing>
    </Type>
  </set1>

  <record>
    <title>WorkPlease</title>
    <year>2012</year>
    <Author>Jimmy</Author>
    <Store>ArmyStore</Store>
  </record>

</DE> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:35:49.497

@kamituel 的解决方案要先进得多，但这个片段可能会帮助您了解 xslt 的工作原理

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output method="xml" encoding="UTF-8" indent="yes"/>

  <xsl:template match="record">
    <xsl:element name="DE">
      <xsl:element name="set1">
        <xsl:element name="Type">
          <xsl:element name="Thing">
            <xsl:call-template name="copy-attributes"/>
          </xsl:element>
        </xsl:element>
      </xsl:element>
    <xsl:call-template name="create-record"/>
    </xsl:element>
  </xsl:template>

  <xsl:template name="copy-attributes">
    <xsl:copy-of select="."/>
  </xsl:template>

  <xsl:template name="create-record">
    <xsl:copy-of select="."/>
  </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:29:25.883

使用以下 XSLT：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output method="xml" indent="yes" />

  <xsl:template match="/DE">
    <DE>
      <!-- 'set1' contents -->
      <xsl:apply-templates select="record" mode="sets" />

      <!-- 'record' contents -->
      <xsl:apply-templates select="record" />
    </DE>
  </xsl:template>

  <xsl:template match="record">
    <!-- copy 'record' tag along with it's children -->
    <xsl:copy-of select="." />
  </xsl:template>

  <xsl:template match="record" mode="sets">
    <set1>
      <Type>
        <Thing>
          <!-- copy 'record' tag's children without the 'record' tag itself -->
          <xsl:copy-of select="node()" />
        </Thing>
      </Type>
    </set1>
  </xsl:template>
</xsl:stylesheet> 
```

# matlab - Matlab 平滑 3d 网格图

> ID：15339358
> 
> 赞同：1
> 
> 时间：2013-03-11T13:05:49.487
> 
> 标签：matlab, smoothing

嗨，我有一组数据 A，每个元素对应一个 x 和 y 组合。当我使用网格绘制这个数据时，我得到一个带有许多尖峰的图表。这并不意外，但我想要一种方法来平滑这些以获得光滑的表面。我尝试使用 smooth3 命令，但无法弄清楚如何进行合适的输入。任何帮助，将不胜感激。谢谢

这就是我的数据的生成方式。

```
function v = f(x,y) % Not actual function
return x*rand()+y*rand()
end

x = 0.05:0.01:0.95;
y = 0.05:0.01:0.95;

o = zeros(length(x),length(y));
A = zeros(length(x), length(y));
for k = 1:5
    for i = 1:length(x)
        for j = 1:length(y)
            o(i,j) = f([x(i), y(j)]);
        end
    end
    A= A+o;
end
A = A/5; 
```

这就是产生情节的原因。

```
[X,Y] = meshgrid(x);
mesh(A) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T00:21:54.493

您可以尝试将变量 A 与滤波器进行卷积（以下是高斯滤波器的示例）。

> C = conv2(A,fspecial('高斯', hsize, sigma)); 在 matlab 帮助中检查 conv2 和 fspecial

# windows - ExifReader.ReadJpeg 问题

> ID：15339360
> 
> 赞同：3
> 
> 时间：2013-03-11T13:05:54.563
> 
> 标签：windows, windows-phone-8, windows-phone

我的相机应用程序有问题

我正在使用 PhotoCaptureDevice 捕获 photo.captured 响应以流格式获取

当我尝试在 wp8 中读取 ExifReader.ReadJpeg 时返回始终相同的值（零）。如何解决此问题？

我的检查图像代码是否处于横向模式

```
private bool IsLandscape(Stream imgstrm)
{
    JpegInfo info = ExifReader.ReadJpeg(imgstrm, "");

    if (info.Orientation == ExifOrientation.BottomRight || info.Orientation == ExifOrientation.TopLeft)
        return true;

    return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T00:08:00.833

根据这篇[文章](http://timheuer.com/blog/archive/2010/09/23/working-with-pictures-in-camera-tasks-in-windows-phone-7-orientation-rotation.aspx)，Exifreader 与您的流一样存在一些问题。请按照帖子中描述的模型（方法重载）从中获取 JpegInfo 对象。

# javascript - 使用 Plovr 编译模块

> ID：15339368
> 
> 赞同：3
> 
> 时间：2013-03-11T13:06:06.920
> 
> 标签：javascript, google-closure-compiler, google-closure, plovr

我正在尝试使用以下配置文件中定义的 Plovr 编译我的 JavaScript 文件：

```
{
  "id": "hello_demo",
  "paths": ".",  
  "closure-library": "closure-library/closure/goog/",
  "mode": "ADVANCED",
  "level": "DEFAULT",
  "pretty-print": true, 
  "externs": ["prototype.js"],
  "modules": {
    "core_scripts": {
      "inputs": "core_scripts.js",
      "deps": []
    },
    "add_new_item": {
      "inputs": "add_new_item.js",
      "deps": "core_scripts"
    }
  },
  "module-output-path": "build/module_%s.js"
} 
```

我使用以下命令启动 Plovr 服务器：

```
java -jar c:/wf/my_project/plovr/plovr.jar serve c:/wf/my_project/js/plovr-config.js 
```

然后我进入`http://localhost:9810/compile?id=hello_demo`网络浏览器，一旦完成编译，它只显示“core_scripts.js”的编译代码

我希望编译器在“c:/wf/my_project/js/build/”中创建了两个已编译的 JavaScript 文件，但什么也没有。

我错过了什么吗？

提前谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-21T08:05:24.937

在[http://www.klokantech.com/](http://www.klokantech.com/)，我们为新手准备了一组使用 Plovr 和 Closure Library 进行开发的示例。看：

[https://github.com/klokan/closure-library-plovr-hello-world-skeletons](https://github.com/klokan/closure-library-plovr-hello-world-skeletons)

有一个 helloworld，使用 Google Maps API V3 的基本应用程序，一个带有闭包模板 (soy) 的演示，一个 OpenLayers 应用程序等。

我不确定你是否真的需要编译模块——尤其是如果你是 Plovr 和 Closure 的新手。Closure Tools 的想法是，通常完整的代码都被编译到一个单独的 .js 文件中——这是 Closure Compiler Advanced 最小化运行最好的方式。阅读我的博文：

[http://blog.klokantech.com/2010/12/closure-compiler-for-openlayers-3x.html](http://blog.klokantech.com/2010/12/closure-compiler-for-openlayers-3x.html)

无论如何，上面提到的骨架示例代码也展示了如何使用 Plovr 中的模块，例如。复杂 JavaScript 代码的动态可加载扩展 - 想想类似 Gmail 的单页应用程序 (SPA)，其中界面的不同部分正在加载附加功能（例如设置对话框、编辑器的 Composer 功能等）。它位于[https://github.com/klokan/closure-library-plovr-hello-world-skeletons](https://github.com/klokan/closure-library-plovr-hello-world-skeletons)`modules-api`下的代码中。`modules`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T14:44:02.283

您正在使用 plovr 的“服务”命令，它只是启动服务器（并在服务器上编译它而不生成静态文件）。您想运行“build”命令（使用相同的选项）在本地服务器上生成文件，如下所示：

java -jar c:/wf/my_project/plovr/plovr.jar build c:/wf/my_project/js/plovr-config.js

# css - 我的设备分辨率为 720 像素，但浏览器宽度为 360 像素

> ID：15339371
> 
> 赞同：2
> 
> 时间：2013-03-11T13:06:20.753
> 
> 标签：css, layout, responsive-design, mobile-website

我的移动设备是 HTC One X，分辨率：**720x1280**

我需要做响应式网页

在 html 我写`<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;" />`

但在浏览器中我有 360px 宽度。我已经使用`$(window).width()`或 `document.width`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T15:36:26.000

它以 360 像素宽渲染，但深度为 720 像素。换句话说，它使用 4 个像素来显示 1 个普通像素。因此，所有正常图形都会显得模糊，因为它将图像放大两倍。所以解决方案是创建两倍大的图像，并将它们缩小 50%。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T15:32:40.850

据我所知，声明观点时的语法应该是：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" /> 
```

请注意，它使用逗号而不是分号，并且在结束 /> 之前没有任何内容。

根据我的阅读，使用分号可能会导致某些浏览器出现问题。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T13:15:53.250

那可能是您的压缩分辨率，而不是您的缩放分辨率。

如果您查看智能手机的规格，您会发现 4.7 英寸的屏幕具有 1280 像素 x 720 像素的分辨率。[见规格。](http://smartphones.techcrunch.com/q/249/4793/What-are-the-specifications-of-the-HTC-One-X-smartphone)这与我的 13 英寸 Macbook 的分辨率大致相同，这是不可能的，因为我的 Macbook 的宽度是其两倍多。因此，他们正在推销压缩分辨率，这不是浏览器在处理媒体查询时考虑的分辨率。

# java - tomcat 7 将 localhost 更改为 ip 地址/主机名

> ID：15339372
> 
> 赞同：-1
> 
> 时间：2013-03-11T13:06:22.357
> 
> 标签：java, windows, unix, tomcat, tomcat7

我已经在 unix 服务器上部署了 tomcat 7。应用程序在其内部文本模式浏览器（即 elinks）中正常工作。

我的服务器 ip 是 190.0.0.1，主机名是 test123。在 elink 我输入了 URL `http://localhost:9999/Test`，然后应用程序正常工作。

但是每当我尝试访问应用程序时`http://190.0.0.1:9999/Test`，它都无法正常工作。我检查了日志，其中没有错误消息。

可能是一些配置问题我必须更改但不知道哪个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:17:53.950

请在您的 unix 框中发出 hostname -i 以获取您机器的 IP 地址。例子：

```
[ssivan@wsapp403p.prod.ch4 conf]$ hostname -i
10.236.55.42 
```

然后，您可以尝试使用该 IP 地址。例子：

```
http://10.236.55.42:9999/Test 
```

# wildcard - Graphite 中的指标过滤器 - 忽略层次结构（点）

> ID：15339378
> 
> 赞同：4
> 
> 时间：2013-03-11T13:06:43.983
> 
> 标签：wildcard, metrics, graphite, statsd

有什么方法可以在忽略层次结构的同时过滤 Graphite 中的指标？

例如：假设我有以下指标：

```
stats_count.A.B.TestMetric 
stats_count.A.TestMetric
stats.A.B.TestMetric
stats.A.B.TestMetric 
```

如何**仅在 stats_count**下对 TestMetric 求和？

我尝试了以下操作但没有成功：

```
stats_counts.*.*.TestMetric - obviously this won't work...
sumSeriesWithWildcards(stats_counts.[A-Z\.]*[A-Z]*.TestMetric,1)
sumSeriesWithWildcards(stats_counts.[A-Z]*[.]*[A-Z]*.TestMetric,1) 
```

有任何想法吗？有可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-12T14:09:48.163

我有一个石墨安装（版本 0.9.9），我在其中在许多小型系统上创建指标

例如，我安装了 2 个 postgresql 数据库（postgresql-1 和 postgresql-2），其中第二个是第一个的从属复制。第一个数据库用于日常使用，而第二个是热备用数据库，主要用于报告系统和调试查询

我认为以下示例在某种程度上是您想要做的。图像是两个数据库上的连接量。蓝线在第一条，绿线在第二条，红线是两个系列的总和，给出连接的总数

```
database.postgresql-1.connection.ALL.value              # blue line
database.postgresql-2.connection.ALL.value              # green line
sumSeries(database.postgresql-*.connection.ALL.value)   # red line 
```

![连接数量](../Images/8e72e1618b276a8e80b1fdf1e663ceb6.png)

您的问题是您的系列有不同的路径级别（我试图在我的系列名称上避免这种情况，因为它确实会导致问题）。除了写这样的东西，我没有看到任何其他选择：

给定

```
stats_count.A.B.TestMetric 
stats_count.A.TestMetric
stats.A.B.TestMetric
stats.A.B.TestMetric 
```

sum stats_count.**.TestMetric 指标使用

```
sumSeries(stats_count.*.TestMetric, stats_count.*.*.TestMetric) 
```

Graphite 仍然需要大量改进，不幸的是，开发进展非常缓慢（例如 0.9.10 版是最新版本，安装有问题，并且是 1 年前的）。我确实在考虑分叉/为这个项目做贡献

# node.js - Node.js 使用单独的 stdout 和 stderr 流以交互方式生成子进程

> ID：15339379
> 
> 赞同：16
> 
> 时间：2013-03-11T13:06:45.040
> 
> 标签：node.js, stdout, spawn, unbuffered

考虑以下 C 程序 (test.c)：

```
#include <stdio.h>

int main() {
  printf("string out 1\n");
  fprintf(stderr, "string err 1\n");
  getchar();
  printf("string out 2\n");
  fprintf(stderr, "string err 2\n");
  fclose(stdout);
} 
```

哪个应该打印一行到stdout，一行到stderr，然后等待用户输入，然后另一行到stdout，另一行到stderr。很基础！编译并在命令行上运行完成时程序的输出（getchar() 接收用户输入）：

```
$ ./test 
string out 1
string err 1

string out 2
string err 2 
```

当尝试使用带有以下代码的 nodejs 将该程序作为子进程生成时：

```
var TEST_EXEC = './test';

var spawn = require('child_process').spawn;
var test = spawn(TEST_EXEC);

test.stdout.on('data', function (data) {
  console.log('stdout: ' + data);
});

test.stderr.on('data', function (data) {
  console.log('stderr: ' + data);
});

// Simulate entering data for getchar() after 1 second
setTimeout(function() {
  test.stdin.write('\n');
}, 1000); 
```

输出如下所示：

```
$ nodejs test.js 
stderr: string err 1

stdout: string out 1
string out 2

stderr: string err 2 
```

与在终端中运行 ./test 时看到的输出非常不同。这是因为 ./test 程序在由 nodejs 生成时没有在交互式 shell 中运行。test.c 标准输出流被缓冲，并且当在终端中运行时，一旦到达 \n，缓冲区就会被刷新，但是当使用节点以这种方式产生时，缓冲区不会被刷新。这可以通过在每次打印后刷新标准输出来解决，或者将标准输出流更改为无缓冲以便立即刷新所有内容。假设 test.c 源不可用或不可修改，则提到的两个刷新选项都不能实现。

然后我开始研究模拟交互式外壳，有 pty.js（伪终端），它做得很好，例如：

```
var spawn = require('pty.js').spawn;
var test = spawn(TEST_EXEC);

test.on('data', function (data) {
  console.log('data: ' + data);
});

// Simulate entering data for getchar() after 1 second
setTimeout(function() {
  test.write('\n');
}, 1000); 
```

哪个输出：

```
$ nodejs test.js
data: string out 1
string err 1

data: 

data: string out 2
string err 2 
```

但是，stdout 和 stderr 都合并在一起（正如您在终端中运行程序时所看到的那样），我想不出一种将数据与流分开的方法。

所以问题..

有什么方法可以使用 nodejs 来实现运行 ./test 时看到的输出而不修改 test.c 代码？通过终端仿真或进程生成或任何其他方法？

干杯!

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-29T14:09:05.873

我尝试了 user568109 的答案，但这不起作用，这是有道理的，因为管道仅在流之间复制数据。因此，它仅在刷新缓冲区时才到达 process.stdout ......以下似乎有效：

```
var TEST_EXEC = './test';

var spawn = require('child_process').spawn;
var test = spawn(TEST_EXEC, [], { stdio: 'inherit' });

//the following is unfortunately not working 
//test.stdout.on('data', function (data) {
//  console.log('stdout: ' + data);
//}); 
```

请注意，这有效地与节点进程共享标准输入输出。不确定你是否可以忍受。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-03-03T11:15:20.187

我只是重新审视了这一点，因为从 5.7.0 版本开始，节点中的 spawn 命令现在有一个“shell”选项可用。不幸的是，似乎没有生成*交互式*外壳的选项（我也尝试过`shell: '/bin/sh -i'`但没有快乐）。但是我刚刚发现[这](http://joshondesign.com/2015/05/14/unbuffering)建议使用“stdbuf”，允许您更改要运行的程序的缓冲选项。在所有内容上将它们设置为 0 会为所有流产生无缓冲的输出，并且它们仍然保持独立。

这是更新的javascript：

```
var TEST_EXEC = './test';

var spawn = require('child_process').spawn;
var test = spawn('stdbuf', ['-i0', '-o0', '-e0', TEST_EXEC]);

test.stdout.on('data', function (data) {
  console.log('stdout: ' + data);
});

test.stderr.on('data', function (data) {
  console.log('stderr: ' + data);
});

// Simulate entering data for getchar() after 1 second
setTimeout(function() {
  test.stdin.write('\n');
}, 1000); 
```

看起来这没有预装在 OSX 上，当然也不适用于 Windows，但可能是类似的替代方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T18:19:11.683

你可以这样做 ：

```
var TEST_EXEC = 'test';
var spawn = require('child_process').spawn;
var test = spawn(TEST_EXEC);

test.stdin.pipe(process.stdin);
test.stdout.pipe(process.stdout);
test.stderr.pipe(process.stderr); 
```

当您使用事件`stdout`并`stderr`在 上打印输出时`console.log`，由于函数的异步执行，您将得到混乱的输出。输出将为流独立排序，但输出仍然可以在和`stdin`之间交错。`stdout``stderr`

# wpf - Caliburn mirco 在设计时找不到视图

> ID：15339381
> 
> 赞同：3
> 
> 时间：2013-03-11T13:06:52.373
> 
> 标签：wpf, caliburn.micro

我有一个非常简单的 WPF 测试应用程序，具有以下布局 ViewModels --DialogViewModel --GraphViewModel Views --DialogView --GraphView

DialogViewModel 有这个代码：

```
public class DialogViewModel : Screen {
    #region Graph
    private GraphViewModel m_gvmGraph;
    public GraphViewModel Graph {
        get {
            if(m_gvmGraph == null) {
                m_gvmGraph = new GraphViewModel();
            }
            return m_gvmGraph;
        }
        set {
            if(m_gvmGraph != value) {
                m_gvmGraph = value;
                NotifyOfPropertyChange("Graph");
            }
        }
    }
    #endregion

    public DialogViewModel() {
        DisplayName = "Graph Dialog";
    } 
```

GraphViewModel 没有代码。

DialogView (UserControl) 看起来像这样：

```
d:DataContext="{d:DesignInstance Type=VMs:DialogViewModel, IsDesignTimeCreatable=True}"
Cal:Bind.AtDesignTime="True"
Width="1000" Height="600">
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="200"/>
    </Grid.ColumnDefinitions>
    <ContentControl x:Name="Graph"  />
</Grid> 
```

GraphView (UserControl) 看起来像这样：

```
 d:DataContext="{d:DesignInstance Type=VMs:GraphViewModel, IsDesignTimeCreatable=True}"
Cal:Bind.AtDesignTime="True"
d:DesignHeight="600" d:DesignWidth="800">
<Grid>
    <Grid>
        <Grid>
            <TextBlock Text="Test" />
        </Grid>
    </Grid>
</Grid> 
```

（我稍后需要嵌套网格 - 在这里没关系）。

这在运行时按预期工作（查看负载等）。所以我想（大多数）做得对。

但是在设计时（当我打开 GraphView.xaml 时，我得到“找不到 XXXX.ViewModels.GraphViewModel 的视图。”

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T15:04:49.437

我以前研究过这个。我用 CM 源打开了一个 VS，用项目源打开了一个 VS。使用具有 CM 源的 VS，我会将项目附加到另一个 VS。然后在VS中加上项目，打开视图。

如果我没记错的话，在设计时，`SelectAssemblies`集合不包含包含视图和视图模型的程序集。

我相信我最终`SelectAssemblies`在引导程序中覆盖了方法，如果这`Execute.IsInDesignMode`是真的，添加包含视图和视图模型的程序集，即使它是主/唯一程序集。

# c# - 如何在 C# 中查找 URL 的内容？

> ID：15339387
> 
> 赞同：2
> 
> 时间：2013-03-11T13:07:11.910
> 
> 标签：c#, asp.net

我有一个网址。现在我想找出 URL 的内容。URL 的内容是指 URL 是否包含 html 页面、视频或图像/照片。如何使用 c# 在 asp.net 中执行此操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T13:10:35.967

最简单的方法是使用 HEAD 请求`HttpWebRequest`：

```
var req = (HttpWebRequest)WebRequest.Create(url);
req.Method = "HEAD";
using (var response = (HttpWebResponse)req.GetResponse())
{
    // Here, examine the response headers.
    // In particular response.ContentType
} 
```

在某些情况下，HEAD 可能会给您一个 405 错误，这意味着服务器不支持 HEAD。

在这种情况下，只需执行 GET 请求（更改`req.Method = "GET"`）。这将开始下载页面，但您仍然可以查看内容类型标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:19:55.883

为了更容易测试，这是一个控制台应用程序，但它应该同样适用于 ASP.NET：

```
namespace ConsoleApplication1
{
  using System;
  using System.Net;

  class Program
  {
    static void Main()
    {
      //var request = WebRequest.Create("https://www.google.com"); // page will result in html/text
      var request = WebRequest.Create(@"https://www.google.de/logos/2013/douglas_adams_61st_birthday-1062005.2-res.png");

      request.Method = "HEAD"; // only request header information, don't download the whole file

      var response = request.GetResponse();

      Console.WriteLine(response.ContentType);

      Console.WriteLine("Done.");
      Console.ReadLine();
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T13:09:49.160

可能开始使用[`WebClient`](http://msdn.microsoft.com/en-us/library/system.net.webclient%28v=vs.80%29.aspx)并访问/下载页面。然后使用[HTML 解析器](http://htmlagilitypack.codeplex.com/)和您认为最好的任何方法来确定页面上的内容类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T13:10:13.980

除了跟随链接，获取结果并从文件内容中找出它是什么文件（这相当棘手）之外，没有万无一失的方法。

您可以尝试从文件扩展名或返回的`content-type`标头（您可以发出`HEAD`请求）确定应该是什么类型。这将告诉您服务器*声称*文件类型是什么。

# c - 如何使用 C 创建类似于 GUI 的 Windows

> ID：15339391
> 
> 赞同：0
> 
> 时间：2013-03-11T13:07:16.683
> 
> 标签：c, user-interface, ubuntu

我在 ubuntu 上工作，到目前为止，我只使用 C 语言并只编写过控制台应用程序。但现在我想为我的程序提供一个类似 GUI 的窗口。

我想做如下的事情。

我想要一个窗口，其中每个像素都表示二维数组中的一个单元格，具有默认值。现在，每当我用光标在窗口上绘制一些东西时，矩阵中的相应单元格就会被该值填充。现在，我没有这样的编程经验，非常感谢您的指导。

此外，由于这只是我完整过程的第一部分，并且矩阵将作为我程序其余部分的输入，我正在寻找一些能够真正帮助我快速实现它的清晰材料，那太好了。

编辑：如果确实有必要，我准备放弃 C。另外，如果已经有一些基于 linux 的工具可以帮助我，我完全赞成。但我仍然想知道，如何自己构建一个功能最少的工具（如上所述）。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T13:24:14.597

你可以用 GTK 做到这一点。

一个很好的起点是 DrawingArea 教程： [https ://developer.gnome.org/gtk-tutorial/2.24/c2422.html](https://developer.gnome.org/gtk-tutorial/2.24/c2422.html)

要在 GTK 中开发，您需要安装 libgtk `apt-get install libgtk2.0-dev`

这是一个简单的 C 示例，我将点存储在一个数组中： [https ://gist.github.com/pce/5134167](https://gist.github.com/pce/5134167)

# macos - 如何为在 VM 上运行的 OSX 部署 Firemonkey HD 应用程序？

> ID：15339397
> 
> 赞同：1
> 
> 时间：2013-03-11T13:07:42.983
> 
> 标签：macos, deployment, firemonkey

我已经为 MAC OSX 开发了 FireMonkey HD 应用程序。我正在使用 Platform Assistant 在 MAC 虚拟机上运行它，并且它在 MAC 上运行良好。现在我想为 MAC 部署它。我通过点击项目给出了输出发布的路径 - > 选项 -> 输出目录，但该版本不适用于 MAC。

# python - Selenium firefox 浏览器无法在使用 Python 的 centos 6.0 上运行

> ID：15339398
> 
> 赞同：3
> 
> 时间：2013-03-11T13:07:46.727
> 
> 标签：python, selenium, selenium-webdriver

如何让 Selenium 在 Centos 6.0 上工作？我收到以下错误。我在 python 2.6 上使用 selenium 2.31.0

```
yum install ImageMagick ImageMagick-perl  xorg-x11-server-Xephyr Xvfb firefox
sudo yum -y install python-imaging
sudo easy_install pyvirtualdisplay
sudo easy_install selenium

from pyvirtualdisplay import Display
from selenium import webdriver
import time
import argparse
import os
display = Display(visible=0, size=(800, 600))
display.start()
browser = webdriver.Firefox()

Traceback (most recent call last):
 File "<stdin>", line 1, in <module>
 File "/usr/lib/python2.6/site-packages/selenium-2.31.0-py2.6.egg/selenium/webdriver/firefox/webdriver.py", line 58, in __init__
   self.binary, timeout),
 File "/usr/lib/python2.6/site-packages/selenium-2.31.0-py2.6.egg/selenium/webdriver/firefox/extension_connection.py", line 47, in __init__
   self.binary.launch_browser(self.profile)
 File "/usr/lib/python2.6/site-packages/selenium-2.31.0-py2.6.egg/selenium/webdriver/firefox/firefox_binary.py", line 48, in launch_browser
   self._wait_until_connectable()
 File "/usr/lib/python2.6/site-packages/selenium-2.31.0-py2.6.egg/selenium/webdriver/firefox/firefox_binary.py", line 95, in _wait_until_connectable
   self.profile.path, self._get_firefox_output()))
selenium.common.exceptions.WebDriverException: Message: 'Can\'t load the profile. Profile Dir: /tmp/tmpUYQhu2 Firefox output: Xlib:  extension "RANDR" missing on display ":1170.0".
*** LOG addons.xpi: startup
*** LOG addons.xpi: Ignoring file entry whose name is not a valid add-on ID: /home/efuadmin/.mozilla/extensions/{ec8030f7-c20a-464f-9b0e-13a3a9e97384}/.fedora-langpack-install
*** LOG addons.xpi: checkForChanges
*** LOG addons.xpi: No changes found' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-03-06T23:56:52.650

对于 python 2.7，selenium 需要安装 pip：

```
/usr/bin/python2.7 -m pip install --user selenium 
```

在你的 python 2.6 上试试这个。它适用于 Red Hat 6 和 Centos 6。

为避免调用可执行文件时出现路径问题，您也可以使用此选项：

```
driver = webdriver.Firefox(executable_path='/bin/geckodriver') 
```

# java - 在android中运行方法onclick崩溃

> ID：15339399
> 
> 赞同：1
> 
> 时间：2013-03-11T13:07:47.417
> 
> 标签：java, android, xml, client-server

我目前正致力于在 Android 上编写一个简单的消息应用程序。我在一个名为 的类中有服务器`runServer`，它运行完美。然后我在我的`mainActivity`. 我有一个`button`，其中有一个`onclick="startClient"`. 但每当我点击 时`button`，我都会收到错误消息。

```
03-11 13:01:40.622: E/AndroidRuntime(718): java.lang.IllegalStateException: 
Could not find a method startClient(View) in the activity class com.example.datorkomprojekt.MainActivity 
for onClick handler on view class android.widget.Button with id 'connect' 
```

我能做些什么来解决这个问题？

主要活动

```
public class MainActivity extends Activity {

private Socket socket;
private ObjectInputStream ois;
private DataOutputStream dos;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    runOnUiThread(new Runnable(){
        public void run(){
        EditText et = (EditText) findViewById(R.id.message_id);
        String message = et.getText().toString();
        EditText et1 = (EditText) findViewById(R.id.messages);
        et1.append(message);
        }
    });
}

    public void startClient() {
        socket = new Socket();
        InetSocketAddress ipPort = new InetSocketAddress("10.0.2.15", 4444);
        try {
            socket.connect(ipPort);
            dos = new DataOutputStream(socket.getOutputStream());
        } catch (Exception e) {
        }
        Thread thread = new Thread();
        thread.start();
    }

} 
```

服务器类

```
public class RunServer {

private ServerSocket server;
private Socket socket;
private DataInputStream dis;
private int port;

public RunServer(int port){
    this.port = port;
    Thread connectThread = new Thread( new Connect() );
    connectThread.start();
}

private class Connect implements Runnable {

public void run() {

    try {
        server = new ServerSocket(port);
    System.out.println("Server running");
    while (true) {
        socket = server.accept();
            Thread clientThread = new Thread( new TalkToClient( socket ) );
            clientThread.start();
            System.out.println("someone connected");
    }
        } catch (IOException ex) {
            Logger.getLogger(RunServer.class.getName()).log(Level.SEVERE, null, ex);
        }
    try {
        server.close();
        } catch( Exception e ) {}
    }
}

private class TalkToClient implements Runnable{

    private Socket socket;
    public TalkToClient( Socket socket ) {
    this.socket = socket;
    }

public void run() {

    String clientMsg;
    try {
         dis = new DataInputStream(socket.getInputStream());
        while ((clientMsg = dis.readUTF()) != null) {
            if (clientMsg.length() > 0) {

            }
        }
    } catch (Exception e) {
        System.out.println(e);
    }

}

}

public static void main(String[] args) {
    new RunServer(4444);
}

} 
```

XML 布局

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/bakgrund"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".MainActivity" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:text="@string/ip"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:textColor="@color/white" />

<EditText
    android:id="@+id/ip_id"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/textView1"
    android:background="@color/white"
    android:ems="10"
    android:hint="@string/get_ip"
    android:inputType="numberDecimal" >

    <requestFocus />
</EditText>

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/ip_id"
    android:text="@string/port"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:textColor="@color/white" />

<EditText
    android:id="@+id/port_id"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/textView2"
    android:background="@color/white"
    android:ems="10"
    android:hint="@string/get_port"
    android:inputType="number" />

<TextView
    android:id="@+id/textView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/port_id"
    android:layout_below="@+id/port_id"
    android:text="@string/message"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:textColor="@color/white" />

<EditText
    android:id="@+id/message_id"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/textView3"
    android:background="@color/white"
    android:ems="10"
    android:hint="@string/get_message" />

<Button
    android:id="@+id/connect"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/message_id"
    android:text="@string/connect"
    android:textColor="@color/white"
    android:onClick="startClient" />

<Button
    android:id="@+id/send"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/connect"
    android:layout_alignBottom="@+id/connect"
    android:layout_toRightOf="@+id/connect"
    android:text="@string/send"
    android:textColor="@color/white" />

<TextView
    android:id="@+id/status_id"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/connect"
    android:layout_below="@+id/send"
    android:layout_marginTop="23dp"
    android:text="@string/status"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:textColor="@color/white" />

<EditText
    android:id="@+id/messages"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/status_id"
    android:background="@color/white"
    android:ems="10"
    android:inputType="textMultiLine" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T13:10:14.530

`public void startClient(View v)`..这将是方法的签名

**更新：**

由于每个人都发布相同的答案，我想我最好改进一下我的答案。虽然单行已经解决了你的问题如果你有空闲时间，你可以看到以下链接..在那里你可以找到关于处理点击事件的不同方法的清晰概念

[http://www.remwebdevelopment.com/dev/a69/Different-Ways-To-Handle-Clicks.html](http://www.remwebdevelopment.com/dev/a69/Different-Ways-To-Handle-Clicks.html)

[http://smartcloudblog.blogspot.com/2011/09/android-onclicklisteners-vs.html](http://smartcloudblog.blogspot.com/2011/09/android-onclicklisteners-vs.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T13:12:54.703

当您在 XML 中定义按钮的单击方法时，按钮本身作为参数传递给该方法。

您有一个`startClient()`方法，但 Android 正在寻找一种`startClient(View v)`方法。更改您的方法以匹配此签名，它将起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T13:11:40.597

更改`public void startClient()`为`public void startClient(View v)`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T13:12:05.103

改变这个：

```
public void startClient() { 
```

和：

```
public void startClient(View view) { 
```

方法 onClick 带有一个参数，即视图。

# batch-file - 调用 .exe 时自动运行 .bat

> ID：15339404
> 
> 赞同：0
> 
> 时间：2013-03-11T13:07:57.083
> 
> 标签：batch-file, autorun

调用特定的 .exe 文件时是否可以自动执行 .bat 文件？我相信你可以在 .bat 文件中循环检查 .exe 是否在任务管理器中，如果我这样做的话，它将使用多少资源？使用 Windows 7。感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T14:47:27.327

```
@ECHO OFF
SETLOCAL
:loop
tasklist|FIND /i "yourexe.exe" >NUL
IF NOT ERRORLEVEL 1 ECHO your exe is running&GOTO :EOF 
choice /t 1 /d y /n >NUL 
IF ERRORLEVEL 2 GOTO :EOF 
GOTO loop 
```

...查看 yourexe.exe 是否每 1 秒运行一次；终止于 ^C 或 N

使用微不足道的资源。

# java - 是否可以声明一个全局变量，以便可以在 JSP 中的每个类中使用它？

> ID：15339409
> 
> 赞同：0
> 
> 时间：2013-03-11T13:08:07.347
> 
> 标签：java, jsp, global-variables

我正在用 JSP 开发一个小 Web 应用程序，这个应用程序需要一个数据库连接，我提供了一个 servlet。

问题是，我希望服务器上的所有文件都可以使用这个类来访问数据库，而无需每次都创建新连接，实际上在每个文件中我都会创建一个新`Database`对象并且每次都会建立一个新连接.

有没有办法避免这种情况，也许声明一个全局对象，例如`session`and `request`，这样它只会被初始化一次，然后被我的所有 JSP 文件使用？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T13:10:48.177

你为什么想做这个？这两种解决方案都是错误的方法。

这是一个坏主意，因为数据库连接不是线程安全的。创建全局对象会降低应用程序的吞吐量，因为每个用户都必须共享连接。

更好的解决方案是拥有一个由应用服务器维护的连接池。执行 JNDI 查找以检查池外的连接，在尽可能窄的范围内使用它，并在该方法范围内关闭连接。

您的应用程序将更好地扩展，并且不会冒线程安全的风险。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T13:15:05.603

您不需要全局变量，您需要为您的上下文提供一个功能，该功能将由您的应用程序使用。所以你需要使用 JNDI，在 Tomcat 网页中你有一个怎么做的，它解释得很好，也很容易实现。此致。

[http://tomcat.apache.org/tomcat-7.0-doc/jndi-datasource-examples-howto.html](http://tomcat.apache.org/tomcat-7.0-doc/jndi-datasource-examples-howto.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T03:16:02.753

您似乎在谈论直接使用 JSP 文件中的数据库连接，不是吗？好吧，这不是一个理论上正确的解决方案，因为遵循关注点分离原则，您的视图（您的 JSP 文件）不应该对数据库或数据访问一无所知。检查 MVC 模式的任何描述，例如这很明显;-)：

[MVC 模式的维基百科](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)

但是，如果您想采取捷径并让您的视图了解您的数据库，那么在我看来，您有两个选项，它们都涉及对先前在您的应用程序中定义的数据源的 JNDI 查找，正如[Marcelo Tataje](https://stackoverflow.com/users/1193148/marcelo-tataje)已经说过的那样。

关于如何在 Tomcat 上定义基于连接池的 JNDI 数据源：

[http://tomcat.apache.org/tomcat-6.0-doc/jndi-datasource-examples-howto.html](http://tomcat.apache.org/tomcat-6.0-doc/jndi-datasource-examples-howto.html)

在同一页面中，您可以看到如何使用此连接池直接从您的 JSP 发出查询（在我看来，这也是非常不可取的）

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/sql" prefix="sql" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>

<sql:query var="rs" dataSource="jdbc/TestDB">
select id, foo, bar from testdata
</sql:query>

<html>
  <head>
    <title>DB Test</title>
  </head>
  <body>

  <h2>Results</h2>

<c:forEach var="row" items="${rs.rows}">
    Foo ${row.foo}<br/>
    Bar ${row.bar}<br/>
</c:forEach>

  </body>
</html> 
```

[java.sql.Connection 线程安全吗？](https://stackoverflow.com/questions/1531073/is-java-sql-connection-thread-safe)

另一个稍微好一点的解决方案是，在您的 java 代码中，JNDI 从您的上下文侦听器中像这样查找数据源：

```
 public void contextInitialized(ServletContextEvent contextEvent) {
        // JNDI Datasource lookup   
        InitialContext context = new InitialContext();
        DataSource dataSource = (DataSource) context
                .lookup("jdbc/DataSource");
        // Storing datasource in application context
        contextEvent.getServletContext().setAttribute("datasource",dataSource);
   } 
```

然后从任何 servlet 使用该存储的数据源来获取您需要的数据库连接，如下所示

```
((DataSource)contextEvent.getServletContext().getAttribute("datasource")).getConnection() 
```

请不要直接使用 Connection 类。它非常原始和过时。如今，没有人在严肃的工作环境中处理这样的连接。如果你按照[AmitG 的](https://stackoverflow.com/users/1115584/amitg)建议去做，你最终会得到一个由所有并发访问共享的唯一连接。看看这个为什么这不是要走的路

# xslt - 使用 XSLT1.0 对元素进行分组

> ID：15339413
> 
> 赞同：0
> 
> 时间：2013-03-11T13:08:19.817
> 
> 标签：xslt

我只需要对`<math>`元素和输出`<math>`元素进行分组。我在 XSLT 下面试过了。请注意，元素可以出现在文档中的任何位置，根元素也可能发生变化

**XSLT 1.0 试过：**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:m="http://www.w3.org/1998/Math/MathML">
<xsl:key name="aKey" match="m:math" use="."/>

<xsl:template match="node()">
<xsl:copy-of select="key('aKey',m:math)"/>
</xsl:template>
</xsl:stylesheet> 
```

示例 XML：

```
<?xml version="1.0"?>
<chapter xmlns:m="http://www.w3.org/1998/Math/MathML">
<p>This is sample text
<a><math>This is math</math></a></p>
<a>This is a</a>
<math>This is math</math>
<a>This is a</a>
<a>This is a</a>
<b>This is <math>This is math</math>b</b>
<c>This is C</c>
</chapter> 
```

输出要求：

```
<math>This is math</math>
<math>This is math</math>
<math>This is math</math> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:32:17.753

这将做到：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output omit-xml-declaration="yes" />

  <xsl:template match="math | math//*" priority="2">
    <xsl:element name="{name()}">
      <xsl:apply-templates select="@* | node()" />
    </xsl:element>
  </xsl:template>

  <xsl:template match="math//@* | math//node()">
    <xsl:copy />
  </xsl:template>

  <xsl:template match="text()" />
</xsl:stylesheet> 
```

在您的示例输入上运行时，这会产生：

```
<math>This is math</math>
<math>This is math</math>
<math>This is math</math> 
```

一种使用键的方法，它产生相同的输出：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output omit-xml-declaration="yes" />
  <xsl:key name="kMath" match="math" use="''" />

  <xsl:template match="/">
    <xsl:apply-templates select="key('kMath', '')" />
  </xsl:template>

  <xsl:template match="*">
    <xsl:element name="{name()}">
      <xsl:apply-templates select="@* | node()" />
    </xsl:element>
  </xsl:template>

  <xsl:template match="@* | node()" priority="-2">
    <xsl:copy />
  </xsl:template>
</xsl:stylesheet> 
```

# javascript - onyx.DatePicker 在 enyo.Repeater 中中断

> ID：15339415
> 
> 赞同：2
> 
> 时间：2013-03-11T13:08:22.047
> 
> 标签：javascript, enyo

我无法`onyx.DatePicker`在`enyo.Repeater`. 我设置了这个[jsfiddle](http://jsfiddle.net/4dGNq/9/)，它显示了我的问题。当`//`删除第 6 行时，它会中断并显示

> 加载日期时间格式哈希失败

在我的 Opera Dragonfly 控制台中。

那是关于什么的，该怎么做才能`onyx.DatePicker`工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T21:45:17.500

恭喜！您在 Enyo 中发现了一个错误。事实证明`onSetupItem`DatePicker.js 中的处理程序没有返回真实值，因此事件会冒泡到您的`Repeater`. 我已经提交了一个错误（ENYO-2059），之后会进行修复。

如果您想自己修复它，请进入 DatePicker.js 并添加 'return true;' 到结束`setupYear()`。

至于您的“无法加载日期时间哈希”问题，我怀疑这是因为您没有包含 g11n 库。我不确定我以前是否看过该消息，但这将是一个非致命错误，并且 Enyo 将默认为英语。

# javascript - Ruby On Rails - 在使用 require.js 时，我需要一个 javascript 文件来通过 ruby

> ID：15339427
> 
> 赞同：2
> 
> 时间：2013-03-11T13:09:03.873
> 
> 标签：javascript, ruby-on-rails, ruby, requirejs, recurly

我是一名前端开发人员，并且是 Ruby on Rails 的新手，所以请忽略我缺乏命名约定等。

我正在开发的网站使用 RequireJS 并且我正在实施 Recurly 付款表单，除了签名之外，我可以让所有东西都正常工作。

问题是我由服务器生成的签名，因此它需要通过 Ruby 来获取构建交易表单的代码，但是因为 application.js 文件不是“erb”，所以它找不到值，这是JS：

```
Recurly.config({
  subdomain: "ie-webinar"
 , currency: "USD"
 , country: "US"
});

Recurly.buildTransactionForm({
    target: '#recurly-transaction'
  , successURL: '/thank_you.html'
  , signature:'<%= @signature %>'
}); 
```

这是 config > initialiser > recurly.rb 中的 Ruby 代码

```
signature = Recurly.js.sign(
  :transaction => { :amount_in_cents => 19_99, :currency => 'USD' }
) 
```

我该如何解决这个问题？我已经尝试在视图中创建一个 .js.erb 文件，但我不确定如何调用它或让它出现在网站标题中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:14:55.763

app/views/partials/_recurly_signature.html.erb

```
<%= javascript_tag do %> 
   Recurly.signature = "<%=j RECURLY_SIGNATURE %>";
<% end %> 
```

配置/初始化程序/recurly.rb

```
RECURLY_SIGNATURE = Recurly.js.sign(
  :transaction => { :amount_in_cents => 19_99, :currency => 'USD' }
) 
```

应用程序/视图/布局/application.html.erb

```
<head>
  = render :partial => "partials/recurly_signature"
</head> 
```

# android - 将原生 int[] 包装成一个 jintarray

> ID：15339430
> 
> 赞同：1
> 
> 时间：2013-03-11T13:09:08.783
> 
> 标签：android, arrays, java-native-interface, native, primitive

我有一个本机方法，它调用 Java 函数来创建位图，然后将位图数据作为 int 数组返回。

该方法效率不高，因为我需要创建一个 Bitmap，然后是一个 IntBuffer 来复制位图数据，然后 native 方法创建一个新的 int 数组来存储数据。然后回收 IntBuffer（可以重用 Bitmap 对象），当我创建超过 10 个位图时，垃圾收集器开始减慢应用程序的速度。

我可以在 JNI 中创建 int 数组，将其包装成 jintarray 并直接在 Java 中使用它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:28:16.010

找到了解决方案。

我可以使用 JNI 函数 NewDirectByteBuffer 将原生 int*（或 char*）包装到 ByteBuffer 中。然后将其用作参数，而不是 jintarray。

# c# - WPF TreeView 上的动态上下文菜单

> ID：15339441
> 
> 赞同：2
> 
> 时间：2013-03-11T13:09:38.133
> 
> 标签：c#, wpf, treeview, contextmenu

我有一个带有节点层次结构的 WPF 树视图的应用程序。我必须为一个或多个选定节点显示上下文菜单。When one or more nodes are selected, a collection in my viewmodel gets populated with all those selected nodes.

我有一组绑定到我的树视图上下文菜单的菜单项。我只希望在用户右键单击节点（或节点）时评估此绑定。

在这里更具体一点是我想要的：

*   用户单击一个或多个菜单项以选择它们
*   他右键单击以调出上下文菜单，我需要在此时评估我的上下文菜单竞价（MenuItems），而不是在用户单击每个菜单项时进行评估，就像现在发生的那样。

下面是我的代码：

```
<TreeView MinWidth="100" ItemsSource="{Binding Nodes}">
    <i:Interaction.Behaviors>
        <Behaviors1:BindableSelectedItemBehavior SelectedItem="{Binding SelectedItem, Mode=TwoWay}" />
    </i:Interaction.Behaviors>   
    <TreeView.ContextMenu>
        <ContextMenu ItemsSource="{Binding MenuItems}"  Visibility="{Binding ShowContextMenu, Converter={StaticResource VisibilityConverter}}">
            <ContextMenu.ItemContainerStyle>
                <Style TargetType="MenuItem">
                    <Setter Property="Header" Value="{Binding Name}"/>
                    <Setter Property="IsEnabled" Value="{Binding IsEnabled}"/>
                    <Setter Property="Command" Value="{Binding MenuCommand}"/>
                </Style>
            </ContextMenu.ItemContainerStyle>
        </ContextMenu>
    </TreeView.ContextMenu>
</TreeView> 
```

我的视图模型：

```
internal class MyViewModel : NotificationObject
{
    private readonly IContextMenuProvider _contextMenuProvider;

    public MyViewModel(IContextMenuProvider contextMenuProvider)
    {
        _contextMenuProvider = contextMenuProvider;
    }

    public ObservableCollection<IMenuItem> MenuItems
    {
        get
        {
            System.Diagnostics.Debug.WriteLine("Getting menu items");
            return GetMenuItems();
        }
    }

    private ObservableCollection<INodeViewModel> _selectedNodes;

    public ObservableCollection<INodeViewModel> SelectedNodes
    {
        get { return _selectedNodes; }
        set
        {
            _selectedNodes = value;
            System.Diagnostics.Debug.WriteLine("Setting selected nodes");

            foreach (var nodeViewModel in _selectedNodes)
            {
                System.Diagnostics.Debug.WriteLine(nodeViewModel.Name);
            }

            RaisePropertyChanged(() => SelectedNodes);
            RaisePropertyChanged(() => ShowContextMenu);
            RaisePropertyChanged(() => MenuItems);
        }
    }

    public bool ShowContextMenu
    {
        get
        {
            var canDisplay = _contextMenuProvider.GetMenuItemsByNodeContext(SelectedNodes);
                return !canDisplay.IsNullOrEmpty();
        }
    }

    private ObservableCollection<IMenuItem> GetMenuItems()
    {
        var items = _contextMenuProvider.GetAllMenuItems(SelectedNodes);
        var menuItems = new ObservableCollection<IMenuItem>(items);
        return menuItems;
    }
} 
```

我面临的问题是：我不知道应该在什么时候获取菜单项，我应该在填充 selectednodes 集合时还是在用户右键单击时这样做？我希望在右键单击期间理想地发生其中任何一个，请问如何在右键单击树视图上的节点时刷新树视图上下文菜单绑定？

注意：我在 NodeViewModel 上有一个 selected 属性用于选择目的。

谢谢，-迈克

# java - 如何使用注释处理 Hibernate 和 Spring 中的连接查询？

> ID：15339446
> 
> 赞同：6
> 
> 时间：2013-03-11T13:09:43.793
> 
> 标签：java, spring, hibernate, join, annotations

我正在使用 Spring 和 Hibernate 和 MySQL 开发应用程序。我是 Hibernate 的新手，做了一些基本的任务......

现在我需要在选择查询中应用连接以使用注释从多个表中获取数据。我已经搜索过了，但我仍然没有任何想法......

**这是我的数据库表和 bean 类：**

```
Table 1: 'employee_info' ( id, empid, empname, doj and jobtitle )

Table 2: 'employee_login' ( username, password, status and empid ) 
```

我的豆类是：

**EmployeeInfoForm.java**

```
@Entity()
@Table(name = "employee_info")
public class EmployeeInfoForm {

@Id
@GeneratedValue
@Column(name = "id", unique = true, nullable = true)
private int id;

@Column(name = "empId")
private int empId;

@Column(name = "empname")
private String empName;

@Column(name = "doj")
private Date empDoj;

@Column(name = "jobtitle")
private String empJobTitle;

public int getEmpId() {
    return empId;
}

public void setEmpId(int empId) {
    this.empId = empId;
}

public void setEmpDoj(Date empDoj) {
    this.empDoj = empDoj;
}

public String getEmpName() {
    return empName;
}

public void setEmpName(String empName) {
    this.empName = empName;
}

public Date getEmpDoj() {
    return empDoj;
}

public void setEmp_Doj(Date empDoj) {
    this.empDoj = empDoj;
}

public String getEmpJobTitle() {
    return empJobTitle;
}

public void setEmpJobTitle(String empJobTitle) {
    this.empJobTitle = empJobTitle;
}

} 
```

**EmployeeLoginForm.java**

```
@Entity()
@Table(name = "employee_login")
public class EmployeeLoginForm {

@Id
@Column(name = "username")
private String empUserName;

@Column(name = "password")
private String empPassword;

@Column(name = "status")
private String empStatus;

@Column(name = "empid")
private int empId;

public String getEmpUserName() {
    return empUserName;
}

public int getEmpId() {
    return empId;
}

public void setEmpId(int empId) {
    this.empId = empId;
}

public void setEmpUserName(String empUserName) {
    this.empUserName = empUserName;
}

public String getEmpPassword() {
    return empPassword;
}

public void setEmpPassword(String empPassword) {
    this.empPassword = empPassword;
}

public String getEmpStatus() {
    return empStatus;
}

public void setEmpStatus(String empStatus) {
    this.empStatus = empStatus;
}

} 
```

**要求：**

当empid在两个表上都匹配时，我想从employee_info和employee_login表中选择字段empid **，****empname** **，jobtitle**和字段**状态...**

 ******请帮我完成我的工作...

任何建议和指导表示赞赏...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T13:29:03.327

我在您的代码中没有看到 EmployeeInfoForm 和 EmployeeLoginForm 之间的关联。也许那里有一个 Employee 类？如果是这种情况，那么您需要添加它。所以让我们假设每个员工都有许多表格。然后，您将对关系的 Employee 端进行编码，如下所示：

```
 public class Employee{

      @OneToMany(cascade = CascadeType.ALL, mappedBy = "employee")
      private Set<EmployeeLoginForm> loginForms = new HashSet<EmployeeLoginForm>();

      ...
 } 
```

EmployeeLoginForm 类中关系的多方面：

```
 @ManyToOne
 Employee employee; 
```

这将创建表结构，使得：

```
 emploee = (id, etc ...)
 employeelogin = (id, employee, ....) 
```

现在，任何时候您需要一个员工的登录列表，您都可以从 Employee 对象中获取它，而无需查询。

```
 Set<EmployeeLoginForm> logins = e.getLoginForms(); //where e is an employee object. 
```

如果你确实想查询你可以做

```
 select o from EmployeeLoginForm o join o.employee 
```

但在这种情况下，这是不必要的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-11T13:26:29.227

当您谈论使用 select 语句执行连接时，您正在考虑数据库/纯 SQL 术语。Hibernate 的力量（和危险）在于它可以从你那里抽象出来，让你以对象的方式思考。您需要的是 2 个对象之间的关系，然后让 Hibernate 处理这种关系。

我建议您花一些时间阅读以下内容：

[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/associations.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/associations.html)

以更好地了解 Hibernate 如何提供帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T13:46:28.087

您可以使用 Hibernate 标准投影执行以下操作：

```
public List extractEmployeeAttributes() {
    log.debug("extractEmployeeAttributes");
    try {
                    Session session = sessionFactory.getCurrentSession();
                    session.beginTransaction();
           Criteria c1 = session.createCriteria(employee_info.class,emp_info);
           Criteria c2 = session.createCriteria(employee_login.class,emp_log);
           c1.setProjection(Projections.projectionList()
                                .add(Projections.property("empid"))
                                .add(Projections.property("empname"))
                                .add(Projections.property("jobtitle"))
                                .add(Projections.property("employee_info "))
                                .add(Restrictions.and(Property.eqName(emp_info.empId,emp_log.empId))
          return c1.list();

    } catch (RuntimeException re) {
        log.error("extractEmployeeAttributes failed", re);
        throw re;

    }

} 
```******

# android - 如何关闭 Geocoder 或 NetworkLocator

> ID：15339448
> 
> 赞同：2
> 
> 时间：2013-03-11T13:09:47.727
> 
> 标签：android, geocoding

我问[了这个](https://stackoverflow.com/questions/15110528/service-not-available-while-calling-geocoder-getfromlocation)问题：

**调用 geoCoder.getFromLocation() 时服务不可用**

后来发现：

**NetworkLocator 在设备上被杀死，重新启动将解决它**。

这已经完成，现在一切正常。

问题是我无法重现相同的情况。有没有办法关闭此`Geocoder`服务或`kill NetworkLocator`.

因为我做了一个工作来解决这个问题，我想测试它。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:04:42.093

使用这个技巧。

只需编辑 project.properties

```
# Project target
target=Google Inc.:Google APIs:16 
```

原因是 Geocoder 类存在于核心 Android 框架中，但依赖于 Google API 贡献的代码才能正常运行。即使您的 AVD 包含 Google API，您的项目仍然需要针对该特定构建目标进行构建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-25T08:45:32.653

我只是强行关闭

> 谷歌播放服务

从应用程序。

# php - 在第 13 行调用 ... 中的非对象上的成员函数 where()

> ID：15339450
> 
> 赞同：-1
> 
> 时间：2013-03-11T13:09:49.747
> 
> 标签：php, mysql, json, codeigniter

我是 CodeIgniter 的新用户，我正在尝试使用 CodeIgniter 创建简单的登录页面，但收到以下错误：

> 在第 13 行调用 C:\xampp\htdocs\CodeIg\application\models\user.php 中非对象的成员函数 where()

我不确定从哪里开始调试这个，建议将不胜感激。

**我的模型代码如下：**

```
<?php
class User extends CI_model{  
    function __construct()
    {
        parent::__construct();
    }
    public function verifyuser()
    {
        $username = $this->input->post('username');
        $password = $this->input->post('password');
        $remember = $this->input->post('remember'); 
        $this->db->where('username', $username);
        $this->db->where('password', $password);
        $query = $this->db->get('user_login');
        $result = array();
        if($query->num_rows==0)
        {
            $result['false']=false;
            return $result;
        }
        else
        {
            $result=$query->result();
            foreach($result as $item)
            {
                $result['id']=$item->id;
                $result['username']=$item->username;
                $result['password']=$item->password;
            }
            return $result;
        }
    }
}
?> 
```

**控制器的代码是：**

```
<?php
    class User_Controller extends CI_controller
    {
        public function getloginData()
        {
            $this->load->model('User');
            $rvalue = $this->User->verifyuser();
            header('Content-type: application/json');
            echo json_encode($rvalue);
        }
    }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T13:23:48.407

数据库未初始化。
您需要在 application/config/autoload.php 中包含“数据库”：

```
$autoload['libraries'] = array('database', 'session'); 
```

或者在您的模型类构造函数中：

```
class User extends CI_model{ 

     public function __construct() 
     {
           parent::__construct(); 
           $this->load->database();
     }
} 
```

您可以在此处获取更多信息：http: [//ellislab.com/codeigniter/user_guide/database/connecting.html](http://ellislab.com/codeigniter/user_guide/database/connecting.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T13:11:26.570

`$this->db`没有初始化，所以`$this->db`是 null 并且在 null 上调用 where() 会导致这个错误。你必须先给 $this->db 分配一些东西。

为此，您必须在控制器中加载模型

# trigger.io - 我可以使用 Trigger.io 免费试用为 Windows Mobile 平台构建吗

> ID：15339455
> 
> 赞同：-1
> 
> 时间：2013-03-11T13:10:10.317
> 
> 标签：trigger.io

我刚刚注册了一个新的[trigger.io](http://trigger.io)帐户并正在使用免费试用版。

我想知道，如果

1.  如果在免费试用版上构建，我将在我的应用程序上看到一个带有 trigger.io 品牌的启动画面，

2.  我将能够为 iOS、android 和 windows 构建

3.  一旦我准备好应用程序并使用我在免费试用期间编写的旧代码访问所有其他操作系统，我将能够升级。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T23:24:08.897

根据我对 Trigger.io 的经验...

1.  是的，您将有一个 trigger.io 启动画面。您自己的自定义初始屏幕是“高级模块”

2.  您将能够为 iOS 和 Android（以及网络/浏览器）构建。Windows 是高级的

3.  您的所有代码都保存在本地，因此您可以将其保存在您自己的机器/SVN 上——是的，可以使用您在试用版中编写的相同代码。

# android - Android 构建您的第一个应用程序基础知识

> ID：15339472
> 
> 赞同：0
> 
> 时间：2013-03-11T13:10:47.273
> 
> 标签：android, android-layout, android-intent, android-emulator, android-xml

我很难获得应该显示的结果，如 android 开发者网站上的第一个应用程序项目的第二步中所述：[developer.android.com/training/basics/firstapp/starting-activity.html#receivetheintent](http://developer.android.com/training/basics/firstapp/starting-activity.html#receivetheintent)

我创建了第一个意图并复制了所有其他代码，但是在运行项目时，我收到一个没有输入元素的空白 android 屏幕。这是模拟器的样子： [http ://s1278.beta.photobucket.com/user/cetmrw791346/media/1_zps116f17a9.png.html](http://s1278.beta.photobucket.com/user/cetmrw791346/media/1_zps116f17a9.png.html)

我已经在 Nexus 类型下设置了运行配置，并分配了 512MB RAM，所以我不确定这是否与 Java SDK (7.0)（JDK 不是 JRE）的安装问题有关，或者如果它可能是Android SDK。我相当确定我已经正确设置了所有内容。我正在为移动开发人员使用 Eclipse（我很确定它是一个 IDE），然后从 File、New Project 创建一个新的 Android App 项目。这是我的包资源管理器的样子：[http ://s1278.beta.photobucket.com/user/cetmrw791346/media/2_zps0f2b94a2.png.html](http://s1278.beta.photobucket.com/user/cetmrw791346/media/2_zps0f2b94a2.png.html)

我不确定如何进一步解决问题，并且非常感谢任何额外的帮助。再次感谢您的帮助。

以下是相关文件：

```
**AndroidManifest.xml**

<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.firstapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.firstapp.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.firstapp.DisplayMessageActivity"
            android:label="@string/title_activity_display_message"
            android:parentActivityName="com.example.firstapp.MainActivity" >
            <meta-data
                android:name="android.support.PARENT_ACTIVITY"
                android:value="com.example.firstapp.MainActivity" />
        </activity>
    </application>

</manifest>

    **MainActivity.java**

    package com.example.firstapp;

    import android.app.Activity;
    import android.content.Intent;
    import android.os.Bundle;
    import android.view.Menu;
    import android.view.View;
    import android.widget.EditText;

    public class MainActivity extends Activity {

        public final static String EXTRA_MESSAGE = "com.example.myfirstapp.MESSAGE";

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
        }

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            // Inflate the menu; this adds items to the action bar if it is present.
            getMenuInflater().inflate(R.menu.main, menu);
            return true;
        }

        /** Called when the user clicks the Send button */
        public void sendMessage(View view) {
            Intent intent = new Intent(this, DisplayMessageActivity.class);
            EditText editText = (EditText) findViewById(R.id.edit_message);
            String message = editText.getText().toString();
            intent.putExtra(EXTRA_MESSAGE, message);
            startActivity(intent);
        }
    }

    **activity_main.xml**
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="horizontal"
        tools:context=".MainActivity" >
      <EditText android:id="@+id/edit_message"
            android:layout_weight="1"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:hint="@string/edit_message" />
    <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/button_send"
             android:onClick="sendMessage" />

    </LinearLayout>

    **strings.xml**

    <?xml version="1.0" encoding="utf-8"?>
    <resources>

        <string name="app_name">My First App</string>
        <string name="edit_message">Enter a message</string>
        <string name="button_send">Send</string>
        <string name="menu_settings">Settings</string>
        <string name="title_activity_main">MainActivity</string>
        <string name="title_activity_display_message">DisplayMessageActivity</string>
        <string name="action_settings">Settings</string>
        <string name="hello_world">Hello world!</string>

    </resources>

    activity_display_message.xml
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:paddingBottom="@dimen/activity_vertical_margin"
        android:paddingLeft="@dimen/activity_horizontal_margin"
        android:paddingRight="@dimen/activity_horizontal_margin"
        android:paddingTop="@dimen/activity_vertical_margin"
        tools:context=".DisplayMessageActivity" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/hello_world" />

    </RelativeLayout>

    **DisplayMessageActivity.java**

    package com.example.firstapp;

    import android.os.Bundle;
    import android.app.Activity;
    import android.view.Menu;
    import android.view.MenuItem;
    import android.support.v4.app.NavUtils;
    import android.annotation.TargetApi;
    import android.os.Build;

    public class DisplayMessageActivity extends Activity {

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_display_message);
            // Show the Up button in the action bar.
            setupActionBar();
        }

        /**
        * Set up the {@link android.app.ActionBar}, if the API is available.
        */
        @TargetApi(Build.VERSION_CODES.HONEYCOMB)
        private void setupActionBar() {
            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
                getActionBar().setDisplayHomeAsUpEnabled(true);
            }
        }

        @Override
        public boolean onOptionsItemSelected(MenuItem item) {
            switch (item.getItemId()) {
            case android.R.id.home:
                // This ID represents the Home or Up button. In the case of this
                // activity, the Up button is shown. Use NavUtils to allow users
                // to navigate up one level in the application structure. For
                // more details, see the Navigation pattern on Android Design:
                //
                // http://developer.android.com/design/patterns/navigation.html#up-vs-back
                //
                NavUtils.navigateUpFromSameTask(this);
                return true;
            }
            return super.onOptionsItemSelected(item);
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:15:08.120

您的模拟器似乎尚未启动。等待它启动到主屏幕，然后您的应用程序应该运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T13:45:27.900

您似乎还没有执行您的应用程序（模拟器仍在启动）。

我对 Java 和 Android 都很陌生（仅仅几个星期，在线课程之后），但我发现模拟器真的很慢，我真的建议你插入一个真实的设备并使用它来运行应用程序.

将我的 Galaxy S2 连接到 Linux 并单击 RUN 时，Eclipse 允许您使用它来执行应用程序。在我正在学习的课程示例中，应用程序只需几秒钟即可启动，而在模拟器中运行它们会很痛苦。

如果您仍然需要使用模拟器，您可以通过在 ADT 中编辑虚拟设备的属性并打开“[X] 使用快照”标志来加速它。通过激活这个标志，你不会每次都“关闭”和“打开”“虚拟设备”：当你关闭它时，它的当前状态将作为快照保存到磁盘，当你再次运行它时，你无需等待它启动。将使用快照并且虚拟设备将启动得非常快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T13:16:10.813

几点：

1.  看来您并没有让您的应用程序真正启动。您发布的第一个屏幕只是模拟器的“启动”屏幕
2.  您是否尝试过切换到 Eclipse 中的调试透视图？在底部，您将看到 Eclipse 实际在做什么。您必须切换到控制台视图和/或查看 logcat 以查看更多详细信息，但这实际上应该对您有所帮助。
3.  如果您在启动模拟器时遇到问题，您可以自行测试它。您可以（例如）选择 Eclipse 上栏中的两个 Android 图标中的第二个。它应该是说“Android虚拟设备管理器”的那个。当您选择它时，它会显示您配置的模拟器，但您也可以配置新的模拟器。您可以提前启动其中一个，看看它们是如何工作的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T10:15:56.433

在真实设备上遇到了一些类似的问题。在 helloworld 上运行良好后，在代码（构建 UI）进行一些更改后继续显示 HelloWorld。那是我不知道要解决的堆栈...

# asp.net - 通过 LINQ 语句返回记录

> ID：15339475
> 
> 赞同：1
> 
> 时间：2013-03-11T13:10:53.183
> 
> 标签：asp.net, linq

```
DataContext db = new DataContext();
Select_Utilities SelectedUtility = (from su in db.Select_Utilities
                                    where su.id == SelectUtilityId
                                    && su.Worksite_Id == WorksiteId
                                     && su.Utility_Company.id == UtilityCompanyId
                                     select su).FirstOrDefault(); 
```

然后我想说 SelectedUtility.comment = "无论评论是什么";

但是出现错误：无法将类型“Select_Utility”隐式转换为“Select_Utilities”

声明中带有“FirstOrDefault”....有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T13:13:41.777

将结果类型更改为`Select_Utility`

```
Select_Utility SelectedUtility =  // here
   (from su in db.Select_Utilities
    where su.id == SelectUtilityId && 
          su.Worksite_Id == WorksiteId && 
          su.Utility_Company.id == UtilityCompanyId
    select su).FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T13:14:00.867

我猜`Select_Utilities`是你的实体表的名称，它包含一组`Select_Utility`对象。尝试：

```
Select_Utility selectedUtility = (from su in db.Select_Utilities
                                  where su.id == SelectUtilityId
                                     && su.Worksite_Id == WorksiteId
                                     && su.Utility_Company.id == UtilityCompanyId
                                  select su).FirstOrDefault(); 
```

# sql - 使用 GString 变体从 groovy 调用存储过程

> ID：15339477
> 
> 赞同：0
> 
> 时间：2013-03-11T13:11:07.277
> 
> 标签：sql, groovy

在 groovy 教程中：http: [//groovy.codehaus.org/Database+features](http://groovy.codehaus.org/Database+features)

有关于程序的部分。当我尝试这个例子时：

```
The same example again but with a GString variation:

def first = 'Sam'
sql.call("{$Sql.VARCHAR = call FullName($first)}") { name ->
    assert name == 'Sam Pullara'
} 
```

我有例外：

```
Chyba: ORA-06550: line 1, column 13:
PLS-00222: no function with name 'FULLNAME' exists in this scope
ORA-06550: line 1, column 7:
PL/SQL: Statement ignored

java.sql.SQLException: ORA-06550: line 1, column 13:
PLS-00222: no function with name 'FULLNAME' exists in this scope
ORA-06550: line 1, column 7:
PL/SQL: Statement ignored

    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:113) 
```

是的，异常说的是真的，因为我得到了我想要调用的程序 FULLNAME 而不是函数。本教程仍然是实际的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-11T00:00:54.190

在 Oracle 中，存储过程不能返回值，而函数可以返回值。这就是您收到该错误的原因。您可以使用我的测试存储过程和常规代码进行验证...

```
CREATE OR REPLACE PROCEDURE test_procedure
( string_in IN OUT VARCHAR2 ) IS
BEGIN
string_in := 'hi ' || string_in ;
END;

import groovy.sql.Sql

Sql sql = Sql.newInstance("jdbc:oracle:thin:@hostname:1521:dbname", username","password","oracle.jdbc.driver.OracleDriver")

def first="Wade"
sql.call '{call test_procedure(?)}',

    [Sql.inout(Sql.VARCHAR(first))],
    { test ->
        println ">>" +  test  + "<<"; // >>hi Wade<<
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T09:30:04.040

```
import groovy.sql.Sql
import oracle.jdbc.driver.OracleTypes

Sql sql = Sql.newInstance("jdbc:oracle:thin:@hostname:1521:dbname", "username","password","oracle.jdbc.driver.OracleDriver")
dept_id = 50

sql.call('{? = call FullName(?)}', [Sql.VARCHAR, 'Sam']) { name->
    println name
} 
```

# javascript - 如何获得十六进制数字的 jQuery Mobile 滑块？

> ID：15339479
> 
> 赞同：2
> 
> 时间：2013-03-11T13:11:13.887
> 
> 标签：javascript, jquery-mobile, slider

我正在尝试更改普通 jQuery Mobile 滑块小部件的行为以显示十六进制数字。但是，我没有让它工作。

滑块`slidestart`和`slidestop`事件不合适，因为它们仅分别在交互的开始和停止时触发。

因此，我尝试将更改处理程序绑定到滑块的输入元素。

```
$("input", slider).on("change", function() {
    // change the value of the input to hexadecimal...
}); 
```

也不行。没发生什么事。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:37:53.667

Gajotres 指出了我的转换代码中的一个错误。不过，将更改处理程序绑定到滑块的输入元素是正确的方法。

因此，为了完整起见（以及其他有相同问题的人），这是我的最终解决方案。

```
$("input", slider).on("change", function() {
    var number = parseInt(this.value);
    $(this).val(number.toString(16));
}); 
```

# javascript - ie8中的错误javascript

> ID：15339481
> 
> 赞同：-1
> 
> 时间：2013-03-11T13:11:28.057
> 
> 标签：javascript, html, internet-explorer-8

我从这个站点下载了工具提示：[http](http://projects.sebastianhelzle.net/jquery.smallipop/index.html) ://projects.sebastianhelzle.net/jquery.smallipop/index.html 在所有更新的浏览器中都完美加载。我的 Internet Explorer 8 有问题，只加载了第一个工具提示，其他没有。这是使用的代码：

```
<img src="img/fitness.png"/>
<a  href="#" class="smallipopright"
  style="filter: alpha(opacity:0); background:blue; opacity:0; width: 454px; height: 52px; border: 0; position: absolute; top: 269px; margin-left:-906px; z-index:1;"> 
    <span class="smallipopHint">
      <img class="floatRight inline" src="img/Body_Building.jpg" alt="Body Building" height="100" width="85"/>
          <h5>Body Building</h5>
            <p>
            L’allenamento per un corpo da urlo!
            <br>Costruite muscolo vero!
            Eliminate grasso corporeo!
            </p>
    </span>
    <script type="text/javascript">
      $('.smallipopright').smallipop({
      preferredPosition: 'right',
      theme: 'black',
      popupOffset: 10,
      invertAnimation: true,
      triggerOnClick: true
      });
    </script>
  </a>
<a  href="#" class="smallipopright" style="filter: alpha(opacity:0); background:blue; opacity:0; width: 454px; height: 52px; border: 0; position: absolute; top: 321px; margin-left:-906px; z-index:1;"> 
    <span class="smallipopHint" href="#">
      <img class="floatRight inline" src="" alt="" height="" width=""/>
        <h5>Fitness</h5>
          <p>
          Una verità uguale per tutti non esiste,
          <br>ad ognuno l’allenamento in base alla<br>conformazione fisica.
          <br>La connessione<br>mente-muscolo esiste davvero!
          </p>
    </span>
     <script type="text/javascript">
      $('.smallipopright').smallipop({
      preferredPosition: 'right',
      theme: 'black',
      popupOffset: 10,
      invertAnimation: true,
      triggerOnClick: true
      });
    </script>
  </a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:42:14.597

尝试

```
<img src="img/fitness.png"/>
<a  href="#" class="smallipopright"
style="filter: alpha(opacity:0); background:blue; opacity:0; width: 454px; height:    52px; border: 0; position: absolute; top: 269px; margin-left:-906px; z-index:1;"> 
<span class="smallipopHint">
  <img class="floatRight inline" src="img/Body_Building.jpg" alt="Body Building" height="100" width="85"/>
      <h5>Body Building</h5>
        <p>
        L’allenamento per un corpo da urlo!
        <br>Costruite muscolo vero!
        Eliminate grasso corporeo!
        </p>
</span>

</a>
<a  href="#" class="smallipopright" style="filter: alpha(opacity:0); background:blue; opacity:0; width: 454px; height: 52px; border: 0; position: absolute; top: 321px; margin-left:-906px; z-index:1;"> 
<span class="smallipopHint" href="#">
  <img class="floatRight inline" src="" alt="" height="" width=""/>
    <h5>Fitness</h5>
      <p>
      Una verità uguale per tutti non esiste,
      <br>ad ognuno l’allenamento in base alla<br>conformazione fisica.
      <br>La connessione<br>mente-muscolo esiste davvero!
      </p>
</span>

</a>
<script type="text/javascript">
  $(document).ready(function () {
      $('.smallipopright').smallipop({
          preferredPosition: 'right',
          theme: 'black',
          popupOffset: 10,
          invertAnimation: true,
          triggerOnClick: true
      });
  });
</script> 
```

# nlp - 如何进行网站基准测试？

> ID：15339483
> 
> 赞同：1
> 
> 时间：2013-03-11T13:11:32.823
> 
> 标签：nlp, web-scraping, benchmarking, sentiment-analysis, text-analysis

我正在尝试对一个国家/地区的房地产领域流行的在线趋势进行竞争分析。我必须创建一个不偏向任何特定公司的报告，但它比较或仅显示公司在趋势列表中的表现。我将使用参数`Clickstream analysis`来显示公司网站执行情况的统计数据。`Sentiment Analysis`在我看来，趋势特定的表现可以用 来描述。如果有其他方法可以有效地做到这一点，我期待任何这样的方法。

现在，我找不到任何共同的趋势。

*   **我怎样才能找到所有房地产公司共有的总体趋势？**

我尝试使用`Google Trends`. 它们提供有关特定搜索词的图形和人口统计信息，并列出了与我不知道如何使用的搜索相关的词。当我从一个国家深入到另一个州时，数量数据非常少。

一旦我掌握了趋势，我就必须找出人们对这些趋势的反应。`Sentiment Analysis`是将为我提供此信息的东西。

*   **但是，即使我得到了趋势，我将如何获得可以计算其极性的趋势特定数据？**

Twitter 和其他社交媒体网站可以提供一些可以进行情绪分析的数据。我使用[了这个](http://twitrratr.com/)网站，它给出了与 twitter 上的某些术语相关的积极、消极和中性行为。我需要与此类似的东西，但可以执行此分析的数据集不应仅限于社交媒体。

*   **我可以在这份竞争分析报告中添加任何其他实体吗？**

该报告将按月生成。我希望在上述任务中实现最大程度的自动化。我正在考虑使用网络抓取来抓取类似格式的数据。我还想知道我应该抓取哪些数据以及应该手动提取哪些数据。

# excel - IFERROR(VLOOKUP) 公式在某些单元格中返回不正确的数据，在其他单元格中返回正确的数据

> ID：15339494
> 
> 赞同：0
> 
> 时间：2013-03-11T13:11:46.117
> 
> 标签：excel, vlookup

我正在使用以下公式：

```
=IFERROR(VLOOKUP($A42,SHEET2!$A$2:$N$91,11,FALSE),"")

```

在 100 多行数据中，公式返回了正确的数据。对于公式返回错误数据的单元格，似乎正在返回来自前一个单元格（已返回正确值）的数据。

例如，如果在 SHEET2 的第 11 列中，产品 #246 的 VLOOKUP 值权重为 0.04。产品 #247-#300 应返回 0.02 的重量。但是，该公式返回 0.04。

我已经在没有工作的单元格上绘制了在每张纸上工作的单元格的格式。什么也没有变。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T13:15:31.380

听起来您已将计算设置为手动 - 使用“公式”选项卡右侧的“计算选项”将其更改为自动......或者只需按下`F9`键重新计算

# doxygen - Doxygen 忽略单词和函数

> ID：15339497
> 
> 赞同：1
> 
> 时间：2013-03-11T13:11:50.203
> 
> 标签：doxygen, pascal

我有以下 doxygen 文件：

```
/** @mainpage PConnect

@section s_definition Definition

This guide is the main documentation of Pascal/Delphi Connector Wrapper for the CGM Assist. 

@section s_definition Definition 
The PConnect gives you the ability to use the Connector of the CGM-Assist by using Pascal/Delphi      functions. 

@note For further information take a look into the "Implementation Guide"
*/ 
```

现在我尝试生成这个 .dox 文件，但我总是把它作为输出：

```
Definition

This guide is the main documentation of /Delphi Connector Wrapper for the CGM Assist.

Definition

The PConnect gives you the ability to use the Connector of the CGM-Assist by using /Delphi . @ " " 
```

你有什么想法，为什么它总是删掉“帕斯卡”？为什么它不写完整的内容？

另一个奇怪的克制是，如果我只是这样写：

```
{* @brief A simple Key/Value Record
*  @param key Key
*  @param value Value to the key
}
Map = record
  var key: PAnsiChar;
  var value: PAnsiChar;
end; 
```

然后它不会显示文档中的记录。但是，如果我在此之前写另一条记录，例如：

```
 //Only if this record is written here, the "Map" will be shown in documentation xD
    Test = Record
      var test: PAnsiChar;
    end;

    {* @brief A simple Key/Value Record
    *  @param key Key
    *  @param value Value to the key
    }
    Map = record
      var key: PAnsiChar;
      var value: PAnsiChar;
    end; 
```

然后它在文档中显示记录“地图”。

PS：我使用 pas2dox 作为源代码文档。

# javascript - JS处理下拉框

> ID：15339498
> 
> 赞同：1
> 
> 时间：2013-03-11T13:11:51.297
> 
> 标签：javascript, dropdownbox

我有这个脚本，它允许用户从下拉列表 1 中进行选择，它会用值填充下拉列表 2。尽管这里的问题是，一旦填满，名为“-- Välj län först-”的原始“项目”就会消失，我不希望它这样做。我只想在它下面填充新值。有人可以看看我在下面提供的代码，看看是否有一个简单的解决方法？

提前致谢。

[http://pastebin.com/aqvX222V](http://pastebin.com/aqvX222V)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T13:21:04.057

看到这个：**[样本](http://jsfiddle.net/dVP62/4/)**

```
function showSubKommun(subCat,selectObj){
   selectObj.length=kommun[subCat].length+1;
   for(var n=1;n<=kommun[subCat].length;n++){
     selectObj[n].text=kommun[subCat][n-1];
     selectObj[n].value=kommun[subCat][n-1];
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T13:23:24.537

试试这个

```
function showSubKommun(subCat,selectObj){
    selectObj.length=kommun[subCat].length+1;
    selectObj[0].text=kommun[0][0];
    selectObj[0].value=kommun[0][0];
    for(var n=0;n<kommun[subCat].length;n++){
        selectObj[n+1].text=kommun[subCat][n];
        selectObj[n+1].value=kommun[subCat][n];
    }
} 
```

# youtube-api - Youtube API Subscription.ContentDetails.TotalItemCount 和 NewItemCount 坏了

> ID：15339500
> 
> 赞同：2
> 
> 时间：2013-03-11T13:11:54.847
> 
> 标签：youtube-api

我最近一直在通过 C# 使用 v3 Youtube API，并注意到使用 Subscriptions.List API，返回订阅的 ContentDetails 属性中的 TotalItemCount 和 NewItemCount 似乎不正确。

TotalItemCount 始终为 0，而 NewItemCount 是不可预测的。我通常将其视为 0，但有时它是 2 或 3 之类的。它在[API 规范](https://developers.google.com/youtube/v3/docs/subscriptions#resource)中被描述为“自上次阅读内容以来订阅中的新项目数”。但是，即使我多次查询它，数字也保持不变，并且似乎与我能弄清楚的任何事情无关。

[您可以在此处](https://developers.google.com/youtube/v3/docs/subscriptions/list#try-it)试用 API ，您需要使用 Youtube 范围启用 Oauth，传递 part=contentDetails 并将 Mine 设置为 true。

# hibernate - hibernate HQL createQuery() list() 类型直接转换为模型

> ID：15339504
> 
> 赞同：6
> 
> 时间：2013-03-11T13:12:15.307
> 
> 标签：hibernate, model-view-controller, struts2

当我在 createQuery() 之后使用 Hibernate (HQL) 的 list() 时，我想直接将类型`List<Object[]>`转换为我的`List<POJO class>`. 我在这里描述我的实际情况。我有 3 个普通的旧 Java 对象说 Person、Operation 和 Project，还有一个表说 Transaction，其中包含对 Person、Operation 和 Project 的外部引用。

```
class Person {
  String name;
  // getters and setters
}

class Operation {
  String name;
  // getters and setters
}

class Project {
  String name;
  // getters and setters
}

class Transaction {
  String p_id;
  String o_id;
  String project_id;
  // refers to id of All three table above
} 
```

现在，我想执行一个 Hibernate Query Language 查询说 `String query="select p.name, o.name, project.name from Person p , Operation o, Project project , Transaction t where p.id=2 and p.id=t.p_id and o.id=t.o_id and project.id=t.project_id"`。

我为这个查询的输出创建了一个模型类，比如 POP_Model。

```
private class POP_Model {
  String person_name;
  String operation_name;
  String project_name;
} 
```

现在，我想使用 Hibernate 查询：

```
Session session=HibernateConnection.getSessionFactory().openSession();
Query q=session.createQuery(query);
List<POP_Model> list=(List<POP_Model>)q.list(); 
```

它给出了类型转换错误，说 Object[] 无法转换为 POP_Model。我检查了 TypedQuery 但没有得到它的示例。但据我所知，TypedQuery 可以用来映射到 POJO 而不是 Model。我想直接将类型转换为模型。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T13:17:57.943

如果您可以使用 JPA API（Hibernate 也实现）而不是 Hibernate API，您可以使用 JPQL 构造函数查询：

```
List<DTO> dtos = entityManager.createQuery("SELECT NEW com.example.DTO( p.name, o.name) FROM Entity o").getResultList(); 
```

**编辑**看起来 Hibernate 也用它的常规 API 实现了构造函数表达式：

```
List<DTO> dtos = session.createQuery("SELECT NEW com.example.DTO( p.name, o.name) FROM Entity o").list(); 
```

**EDIT2** JPA 是一个 Java EE 标准，统一使用不同的持久性库，如 Hibernate 和 EclipseLink。[**甲骨文教程**](http://docs.oracle.com/javaee/6/tutorial/doc/bnbpz.html)相当不错。

您可以像这样在非 EE 应用程序中检索 EntityManager：

```
 @PersistenceUnit
  private EntityManagerFactory emf;
  ...
  EntityManager em = emf.createEntityManager(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T13:18:05.337

首先在 POJO 类上创建一个构造函数。

```
private class POP_Model {
  String person_name;
  String operation_name;
  String project_name;

  public POP_Model(String person_name, String operation_name, String project_name){
      this.person_name = person_name;
      this.operation_name = operation_name;
      this.project_name = project_name;
  }
} 
```

然后你可以使用

```
select new com.server.dtos.POP_Model(p.name, o.name, project.name) 
from Transaction t INNER JOIN t.operation o
INNER JOIN t.person p 
INNER JOIN t.project project  
where p.id=2 
```

供参考，这里是[官方文档](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html#queryhql-select)。[也通过HQL](https://stackoverflow.com/a/4028340/432903)遍历New 对象。

# c# - C#：如何为新的 excel 文件复制受保护的工作表？

> ID：15339508
> 
> 赞同：-3
> 
> 时间：2013-03-11T13:12:20.697
> 
> 标签：c#, excel

有人请告诉我如何从受保护的 excel 文件中复制工作表，并创建一个具有类似扩展名和某些名称的新 excel 文件，并为其添加一些宏。

请有人帮我解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T13:17:59.107

打开两个工作簿。

转到您希望显示信息的单元格，然后键入 = 符号。然后转到信息位于受保护工作表中的另一本书/工作表，然后单击正确的单元格。按 [Enter] 键。完毕

# view - 如何使用 VBO 在 Drupal 的内容视图中添加列？

> ID：15339509
> 
> 赞同：0
> 
> 时间：2013-03-11T13:12:24.690
> 
> 标签：view, drupal-6, vbo

我想将列添加到 drupal 的内容视图中。

在 Drupal 的管理面板中，当我们点击 content Management-->Content-->List

内容加载到表中，其中包含**Title|Type|Author|Status|Operations列**

我想在此表中再添加一列，即日期，并希望根据日期进行排序。

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:33:24.003

我不会经历改变那张桌子的麻烦。如果您这样做决定走这条路，这里有一篇文章可以帮助您：[将列添加到内容列表](http://drupal.org/node/853580)

最简单的方法是安装[Views](http://drupal.org/project/views)模块。然后

*   添加新`node`类型视图
*   添加`page`显示
*   **字段**（添加字段后，您可以按所需顺序放置它们）：
    *   节点：标题
    *   节点：类型
    *   注意：已发布（状态）
    *   节点：发布日期（创建）
    *   用户：姓名（作者）
*   **排序标准**
    *   节点：发布日期（创建）
*   **基本设置**
    *   风格：表
    *   单击小设置（旁边的齿轮链接）并指定`Default sort`哪些字段是`Sortable`.

您可能需要对视图或字段进行一些其他小的调整。`Views`是一个非常强大的模块，一旦你掌握了它，你就可以获得几乎任何你可以想象的页面。

# java - 通过编译器或 JIT 进行 java 优化

> ID：15339510
> 
> 赞同：4
> 
> 时间：2013-03-11T13:12:26.897
> 
> 标签：java, compiler-optimization

有时我会看到这样的代码：

```
if (id.split(":").length > 1) {
 sub_id = id.split(":")[1];
 parent_id = id.split(":")[0];
} 
```

做类似的事情不是更好（更快）吗

```
String [] ids = id.split(":");
if (ids.length > 1) {
  sub_id = ids[1];
  parent_id = ids[0];
} 
```

这样您就不必多次调用“split()”，或者编译器/JIT 会做这样的优化吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-11T13:13:20.293

我当然不希望JIT*或编译**器*执行这样的优化。它必须知道：

*   结果在调用之间没有“有用”的变化
*   没有什么会利用每个方法调用产生单独的数组这一事实
*   没有什么会利用每个方法调用产生不同的字符串对象这一事实

JIT 或编译器似乎不太可能为此进行优化。

是的，使用第二种形式肯定更有效——我认为它也更具可读性。当更具可读性的代码也更有效时，这很清楚地表明要使用哪个代码；）

# c++ - C ++中的线程以保持两个函数并行运行

> ID：15339511
> 
> 赞同：0
> 
> 时间：2013-03-11T13:12:27.427
> 
> 标签：c++, linux, multithreading

我有一个包含两个函数 func1 和 func2 的代码。两者作用的作用是一样的。不断读取目录并写入各自日志文件中存在的文件名。这两个函数都引用了一个通用的日志函数来写入日志。我想在我的代码中使用引入线程，这样它们都可以继续并行运行，但两者都不应该同时访问日志函数。如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T13:17:17.993

这是需要互斥锁的经典案例。

```
void WriteToLog(const char *msg)
{
   acquire(mutex);
   logfile << msg << endl;
   release(mutex);
} 
```

上面的代码不会“复制并粘贴”到您的系统中，因为互斥锁是系统特定`pthread_mutex`的 - 如果您使用`pthreads`. C++11 有它自己的互斥锁和线程功能，而 Windows 有另一个变体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T13:27:51.097

来自 Sajal 的评论：

> 试过 pthread_create(&thread1, NULL, start_opca, &opca); pthread_join(thread1, NULL); pthread_create(&thread2, NULL, start_ggca, &ggca); pthread_join(thread2, NULL);
> 
> 但是这样做的问题是它会等待一个线程完成，然后再开始下一个线程。我不想要那个。

join 函数阻塞调用线程，直到你调用 join 的线程完成。在您的情况下，在创建第二个线程之前在第一个线程上调用 join 可以保证第一个线程将在第二个线程开始之前结束。

您应该首先创建两个线程，然后将它们都连接起来（而不是穿插两者的创建和连接）。

此外，对日志的访问应该被提取到两者的通用代码中（一个日志函数、一个日志类等。在提取的代码中，应该使用互斥锁来保护日志访问。

如果你有一个（部分）支持 c++11 的实现，你应该为此使用 std::thread 和 std::mutex 。否则，您应该使用 boost::thread。如果您都无法访问，请在 linux 下使用 pthreads。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T13:15:17.667

在 linux 上，您将需要使用[pthreads](http://www.yolinux.com/TUTORIALS/LinuxTutorialPosixThreads.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T13:22:14.250

由于两个线程都在从/向 I/O 读取/写入（读取 dirs 和写入日志文件），因此不需要多线程：由于每个 I/O 访问都在较低级别排队，因此并行化任务不会提高速度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T14:05:58.737

此 C 语言代码可能会给您一些提示。回答您的问题： **您应该在 pthread 中使用 mutex 以确保日志文件只能由一个线程同时访问。**

```
#include <pthread.h>
#include <stdio.h>
pthread_mutex_t LogLock = PTHREAD_MUTEX_INITIALIZER;
char* LogFileName= "test.log";
void* func_tid0( void* a) {
  int i;
  for(i=0; i < 50; i++ ) {
    pthread_mutex_lock(&LogLock);
    fprintf((FILE*)a, "write to log by thread0:%d\n", i);
    pthread_mutex_unlock(&LogLock);
  }
}

void* func_tid1(void* a) {
  int i;
  for(i=0; i < 50; i++ ) {
    pthread_mutex_lock(&LogLock);
    fprintf((FILE*)a, "write to log by thread1:%d\n", i);
    pthread_mutex_unlock(&LogLock);
  }
}
int main()  {
  pthread_t tid0, tid1;
  FILE* fp=fopen(LogFileName, "wb+");
  pthread_create(&tid0, NULL, func_tid0, (void*) fp );
  pthread_create(&tid1, NULL, func_tid1, (void*) fp );
  void* ret;
  pthread_join(tid0, &ret);
  pthread_join(tid1, &ret);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-15T07:59:11.007

你的另一个问题不存在。因为主线程在您的第一个 pthread_join 处暂停，但这并不意味着第二个线程不运行。实际上第二个线程从 pthread_create(thread1) 开始。

实际上 pthread_mutex 会导致您的程序串行。

# c# - 是否可以尝试向 SQL Server 数据库添加一列并捕获异常？

> ID：15339513
> 
> 赞同：0
> 
> 时间：2013-03-11T13:12:38.177
> 
> 标签：c#, sql, sql-server

在 C# 中使用 SQL Server 值得一说：

```
IF COL_LENGTH('MyTable','MyColumn') IS NULL
 BEGIN
 ALTER TABLE MyTable ADD MyColumn INT
 END 
```

因为我可以更容易地抓住电话：

```
try
{
Db.ExecuteNonQuery("ALTER TABLE MyTable ADD MyColumn INT");
}
catch(Exception)
{
} 
```

并且让如果一直失败（除非在旧数据库上运行）......或者是顽皮/慢/等等？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T13:16:21.397

例外应该是“例外的”，就像规则的例外一样。您是否计划运行此代码，并且 90% 的时间列都存在？

那么这不是“例外”。

***不要将异常捕获用作正常的逻辑流程。***

这里有一些比我更聪明的人的建议：

[http://blogs.msdn.com/b/kcwalina/archive/2005/03/16/396787.aspx](http://blogs.msdn.com/b/kcwalina/archive/2005/03/16/396787.aspx)

“不要将异常用于正常的控制流程。”

* * *

这是我典型的幂等添加列 tsql。

```
IF EXISTS (    SELECT TABLE_SCHEMA , TABLE_NAME FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = 'Categories' and TABLE_SCHEMA = 'dbo'    )
    BEGIN

        IF NOT EXISTS 
        (
            SELECT * 
                FROM [INFORMATION_SCHEMA].[COLUMNS] 
            WHERE   
                TABLE_NAME = 'Categories' 
                AND TABLE_SCHEMA = 'dbo'
                AND COLUMN_NAME = 'CategoryName'
        )
            BEGIN
                print 'Adding the column dbo.Categories.*CategoryName*'

                ALTER TABLE [dbo].[Categories] ADD [CategoryName] nvarchar(15) NOT NULL

            END
        ELSE
            BEGIN
                print 'The column dbo.Categories.*CategoryName* already exists.'
            END

    END 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-11T13:16:02.847

只是不要以`Exception`这种方式捕获异常：您永远不会知道它是否被抛出：

*   因为表不存在
*   因为该列已经存在
*   因为连接字符串错误
*   因为网络错误
*   任何其他原因

如果您只想在列不存在时创建它，请在添加之前编写检查列是否存在的 SQL。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T13:16:36.857

在这种情况下，速度真的很重要吗？您多久更新一次数据库？

但是，您真的确定要默默地吃掉所有异常吗？问题可能是您没有 DDL（修改数据库）权限，或者该列存在但具有不同的列类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T13:26:46.683

在您的脚本中执行此类检查是非常标准的，因为该脚本可能需要多次运行。例如，其他表更改可能会添加到其中。如果有人必须重新运行它，您不希望您的脚本导致错误。

正如其他人所指出的，应为真正的例外情况保留例外。

但是在您的 C# 代码中执行此操作还有一个额外的问题：您将数据库维护内容混合到（可能）您的应用程序代码中。[如果您遵循关注点分离](http://en.wikipedia.org/wiki/Separation_of_concerns)的原则，您的代码将更具可读性和可维护性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T13:33:57.317

您的 C# 代码流只是后端的一个浅垫片，*真正的*工作发生在这里。因此，出现了明显的问题：

## **为什么**会引发异常？

原因包括但不限于：

*   您无权更改表格
*   您尝试获取表上的 SCH-M 锁时超时
*   新列触发日志空间不足的[数据大小操作](http://rusanu.com/2011/07/13/online-non-null-with-values-column-add-in-sql-server-11/)
*   自定义[DDL 触发器](http://msdn.microsoft.com/en-us/library/ms190989%28v=sql.105%29.aspx)阻止执行
*   基于[策略的声明性管理](http://technet.microsoft.com/en-us/library/bb510667%28v=sql.100%29.aspx)规则阻止执行
*   IO 子系统刚刚崩溃，数据库处于脱机状态
*   该列已经存在（这似乎是您想到的唯一情况）

你愿意默默地吞下和沉默例外，因为你只能想到*一个*可能的失败原因。在处理数据库时，您总是需要认真的日志记录，否则您只会自找麻烦。

## 例外是免费的吗？

SEH 是否便宜存在很长时间的争论，但这完全超出了谈论数据库中的 DDL 的意义。**您正在请求一个对象上的 SCH-M 锁定，因此将阻止所有人**，直到您获得它。即使您的 DDL 抛出并且您处理了异常，在您等待超级锁被授予时，您已经将吞吐量降至 0（**零）。**你可能已经等了好*几个小时*了，你知道...

# c# - 无参数的 ASP 自定义路由

> ID：15339519
> 
> 赞同：1
> 
> 时间：2013-03-11T13:12:55.007
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-routing

我的 PartnerController 中有以下控制器操作，每个操作都有自己的自定义路由。

***行动 1***

```
public ActionResult GetCardWithShortCode(string voucherShortCode) 
```

> routes.MapRoute("GetCardWithShortcode", "partner/store/getcard/{voucherShortCode}", new { controller = "Partner", action = "GetCardWithShortCode" } );

***行动 2***

```
public ActionResult GetCard() 
```

> routes.MapRoute("GetCard", "partner/store/getcard", new { controller = "Partner", action = "GetCard"} );

第一个路由工作正常，但我无法让第二个路由工作。理论上，当我点击 ../partner/store/getcard 它应该点击第二个动作？

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:16:21.743

第二个动作没有被命中，因为第一个动作是用 {voucherShortCode} null 调用的

您可以做的是仅使用一条路线并执行以下操作：

```
if(String.IsNullOrEmpty(voucherShortCode))
    return RedirectToAction("GetCard") 
```

那么你不需要两条路线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:16:32.167

添加路线时应具有以下顺序

```
routes.MapRoute( "GetCard", "partner/store/getcard", new { controller = "Partner", action = "GetCard"} );

routes.MapRoute( "GetCardWithShortcode", "partner/store/getcard/{voucherShortCode}", new { controller = "Partner", action = "GetCardWithShortCode" } ); 
```

# c# - 用于解析 HTML 字符串中的自定义字段的自定义正则表达式

> ID：15339521
> 
> 赞同：0
> 
> 时间：2013-03-11T13:12:59.937
> 
> 标签：c#, regex, string

我在隐藏字段中发送一些 html，在服务器端我将使用正则表达式解析它。目前我能够解析

```
<div id="4059">asd</div> 
```

下面的代码在 match.Groups[2] 中给出了“id”，在 match.Groups[4] 中给出了“4059”，“div”出现在第一个索引处，第三个为空。

```
string regex2 = @"<(?<Tag_Name>(a)|div)\b[^>]*?\b(?<URL_Type>(?(1)id))\s*=\s*(?:""(?<URL>(?:\\""|[^""])*)""|'(?<URL>(?:\\'|[^'])*)')";
var matches = Regex.Matches(myDiv, regex2, RegexOptions.IgnoreCase | RegexOptions.Singleline);
var links = new List<string>();
foreach (Match item in matches)
{
  if (item.Groups[2].Value == "div")
     {
       employee.ID = item.Groups[4].Value;
     }
] 
```

有人可以编辑这个正则表达式吗？

```
<(?<Tag_Name>(a)|div)\b[^>]*?\b(?<URL_Type>(?(1)id))\s*=\s*(?:""(?<URL>(?:\\""|[^""])*)""|'(?<URL>(?:\\'|[^'])*)') 
```

这样我就可以解析

```
<div id="5094" fieldA="asd" fieldB="def" fieldC="ghi"></div> 
```

并且也可以添加字段。

*我还应该在这里提到我正在开发一个自定义控件，并且当我在我的项目中添加它时，我不能使用 HTML AGILITY PACK 作为程序集冲突。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:28:59.200

如果您已经知道字符串仅包含`<div field="value" field="value" ...></div>`（即字符串中除了这个 div 之外什么都没有），那么只需简化您的正则表达式以选择字段和值，并在循环中运行它：

```
string regstr = @"\s+(?<field>[^\s=]+)\s*=\s*\"(?<value>[^\"]+)\"";
var reg = new Regex(regstr);
var m = reg.Match(myDiv);
while (m.Success)
{
    // m.Groups["field"] and m.Groups["value"] hold your field and value
    // get the next match
    m = m.NextMatch();
} 
```

# php - 使用参数映射从 POST 数据生成数据数组

> ID：15339522
> 
> 赞同：1
> 
> 时间：2013-03-11T13:13:02.027
> 
> 标签：php, arrays

我有以下两件事：

1.  $_POST 包含已发布数据的数组
2.  $params 数组，其中包含所需数据数组中每个参数的路径。

    ```
    $_POST = array(
    'name'      => 'Marcus',
    'published' => 'Today',
    'url'       => 'http:://example.com',
    'layout'    => 'Some info...',
    );

    $params = array(
    'name'      => 'Invoice.name',
    'published' => 'Page.published',
    'url'       => 'Page.Data.url',
    'layout'    => 'Page.Data.layout',
    ); 
    ```

**我想生成 $data 数组，如下例所示。我怎样才能做到这一点？** 请注意 $params 数组中的“路径”如何用于构建数据数组的键，并用 $_POST 数组中的数据填充它。

```
$data = array(
    'User' => array(
        'name' => 'Marcus',
    ),
    'Page' => array(
        'published' => 'Today',
        'Data' => array(
            'url' => 'http:://example.com',
            'layout' => 'Some info...',
        ),
    ),
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:30:40.150

我会使用引用变量：

```
$post = array( // I renamed it
  'name'      => 'Marcus',
  'published' => 'Today',
  'url'       => 'http:://example.com',
  'layout'    => 'Some info...',
);

$params = array(
  'name'      => 'Invoice.name',
  'published' => 'Page.published',
  'url'       => 'Page.Data.url',
  'layout'    => 'Page.Data.layout',
  );

echo '<pre>'; // just for var_dump()
foreach($post as $key=>$var){ // take each $_POST variable
  $param=$params[$key]; // take the scheme fields
  $path=explode('.',$param); // take scheme fields as an array
  $temp=array(); // temporary array to manipulate
  $temp_original=&$temp; // we need this the same as we're going to "forget" temp
  foreach($path as $pathvar){ // take each scheme fields
    $temp=&$temp[$pathvar]; // go deeper
    }
  $temp=$var; // that was the last one, insert it
  var_dump($temp_original); // analize carefully the output
} 
```

您现在要做的就是将它们全部组合起来，它们并不是您想要的，但这很容易。

请注意，每个`$temp_original`字段都指向`$post`可变数据！（`&string`而不是`string`）。您可能想以某种方式克隆它。

# php - mysql_fetch_array 不起作用

> ID：15339523
> 
> 赞同：-1
> 
> 时间：2013-03-11T13:13:03.733
> 
> 标签：php, mysql

我正在尝试从包含 row_ID、c_ID、e_ID 列的表中获取一些行，每个 e_ID 可以有不同的 c_ID。我使用 mysql_fetch_array 来获取与某个 ID 关联的所有 c_ID。

```
$result=mysql_query("SELECT c_ID from User_Competence WHERE e_ID=".$id);
            $test=mysql_fetch_array($result);
            print_r ($test['c_ID']); 
```

但是，我没有为每个 e_ID 获取多个 c_ID，而是在数组中只得到一个值。我在查询中遗漏了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T13:15:34.000

不，您没有任何错误。如果 e_ID 是唯一的，您只会得到一个结果。如果 e_ID 不是唯一的，您可能想试试这个：

```
$result=mysql_query("SELECT c_ID from User_Competence WHERE e_ID=".$id);
while($test=mysql_fetch_array($result))
{
    print_r ($test['c_ID']);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T13:21:51.577

试试这个来获取所有的ID

```
 $id = mysql_real_escape_string($id); // escape your variable here before u use it in the query

   $result=mysql_query("SELECT c_ID from User_Competence WHERE e_ID='".$id."' ");
        while ($test=mysql_fetch_array($result) ){
        echo $test['c_ID'].'<br />';
            } 
```

# sql-server - 在将数据写入 SSIS 中的平面文件之前运行脚本组件

> ID：15339524
> 
> 赞同：0
> 
> 时间：2013-03-11T13:13:07.730
> 
> 标签：sql-server, ssis, flat-file

在我的 SSIS 包中，我需要修改将在数据流执行的最后一步创建的平面文件名。目前，我需要通过脚本组件传输输入数据 + 对将形成平面文件组件连接字符串的变量进行代码修改。应该写入的实际数据集由 Merge Join 组件生成，并通过脚本组件 jsut 传输它以调用一个用户变量调整似乎是开销。

上述情况的最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:12:55.970

如果文件名不依赖于数据中的任何内容，那么我将在控制流中使用[脚本任务](http://msdn.microsoft.com/en-us/library/ms141752.aspx)而不是数据流中的[脚本组件](http://msdn.microsoft.com/en-us/library/ms137640.aspx)来设置值。

如果文件名**确实**依赖于数据中的某些内容，那么脚本组件可能是获取该信息的最佳方式；但是，脚本组件**不能**更新方法`ReadWrite`之外的任何变量`PostExecute`（在处理完所有输入行之前不会发生）；这意味着变量更改**不会**反映在输出文件的名称中。在这种情况下，我建议在数据流完成后使用文件系统任务重命名文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T22:46:30.137

我个人之后会使用重命名 DOS 命令。导出为固定文件名，然后重命名。对我来说它更简单。

# c++ - c++项目的架构

> ID：15339528
> 
> 赞同：-3
> 
> 时间：2013-03-11T13:13:11.683
> 
> 标签：c++

我来自JAVA，如果我错了，请指导我。

在 Java 中，我们主要使用单例类并创建所有认为单例类的类对象。

在 C++ 中呢？

我知道我们可以使用单例，但主要是在处理大多数堆栈溢出问题时。他们中的大多数人说在 C++ 中使用单例并不好

你能推荐一些容易理解的书或项目吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T13:21:59.330

无论您是用 C++ 还是 Java 编写单例， 都有[很多](http://c2.com/cgi/wiki?SingletonsAreEvil)[不好的含义](http://blogs.msdn.com/scottdensmore/archive/2004/05/25/140827.aspx)。

它们使测试变得非常困难，因为它们的静态特性阻止了后期绑定，例如，使用更快且依赖更少的存根来影响真实数据库。

它们还为全局变量提供了遮羞布，试图让它们伪装成一个好的设计决策。看看替代品，它会以更好的设计得到回报。您可能想研究[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)，以了解如何设计一个没有单例的更可测试的系统。

# paypal - 关于使用 PayPal 上线的问题

> ID：15339533
> 
> 赞同：0
> 
> 时间：2013-03-11T13:13:27.623
> 
> 标签：paypal, live

我正在尝试使用我的网店并执行必要的步骤。我试图在商家支持中问同样的问题，但他们花了 10 多天没有回复，所以我在这里尝试。

它在上线清单中说： **- 确保您的 PayPal API 调用针对 PayPal 的生产环境。** 那么我要把这个[https://api-3t.paypal.com/nvp](https://api-3t.paypal.com/nvp)放在哪里呢？在创建按钮的代码中还是在调用的 PDT 中？这些是我能想到的唯一会有所作为的地方

它还说： **- 获取您的实时 API 凭证，并在您调用 PayPal API 操作的任何地方使用它们。** 我已经生成了它们，但是在哪里使用它们？在购买后将客户重定向到的 PDT 中还是在按钮中？应该[https://api-3t.paypal.com/nvp](https://api-3t.paypal.com/nvp)吗？也在某个地方吗？

**最后一个问题。我也必须“注册”我的“应用程序”吗？我试图阅读但不明白。我有一个网站，我将在其中使用您的按钮。我也需要注册吗？我该怎么做呢？**

这是我的一些 pdt.php 代码：

```
<?php

/*
update: 06/27/2011
- updated to use cURL for better security, assumes PHP version 5.3
*/

// read the post from PayPal system and add 'cmd'

$req = 'cmd=_notify-synch';

$tx_token = $_GET['tx'];

$pp_hostname = "www.sandbox.paypal.com"; 

// read the post from PayPal system and add 'cmd'
$req = 'cmd=_notify-synch';

$tx_token = $_GET['tx'];
$auth_token = "xxxxxxxxxxxxxxxxxxxxxxxxxx";
// real xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
$req .= "&tx=$tx_token&at=$auth_token";

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "https://$pp_hostname/cgi-bin/webscr");
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $req);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 1);
//set cacert.pem verisign certificate path in curl using 'CURLOPT_CAINFO' field here,
//if your server does not bundled with default verisign certificates.
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($ch, CURLOPT_HTTPHEADER, array("Host: $pp_hostname"));
$res = curl_exec($ch);
curl_close($ch); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:00:14.390

您正在查看与 PayPal API 调用一起上线的清单——您正在使用 PayPal 按钮，因此您无需担心这一点。

对您来说，您唯一需要更改的是：
- PDT 脚本
的 $pp_hostname - IPN 脚本的 $pp_hostname（如果您使用它）
- 按钮的“操作”部分（来自[https://www .sandbox.paypal.com/cgi-bin/webscr](https://www.sandbox.paypal.com/cgi-bin/webscr)到[https://www.paypal.com/cgi-bin/webscr](https://www.paypal.com/cgi-bin/webscr) )

# php - 可以使用 width=device-width 和 meta name="viewport" content="width=1024" 吗？

> ID：15339534
> 
> 赞同：0
> 
> 时间：2013-03-11T13:13:33.823
> 
> 标签：php, css, wordpress, media-queries

在 wordpress 的标题 php 中，我可以添加两个视口：

```
<meta name="viewport" content="width=device-width" /> 
```

和

```
<meta name="viewport" content="width=1024" /> 
```

我希望能够说`everything`显示使用`viewport width 1024`，**除非**您是低于 x 像素的移动设备，否则请`width=device-width`改用。

这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:19:33.027

使用好的[插件](http://wordpress.org/extend/plugins/php-browser-detection/)，它将类似于：

```
<meta name="viewport" content="width=<?php echo  (is_mobile()) ? "device-width" : "width=1024" ?>" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:20:02.840

你可以试试下面的代码

```
/* #### Mobile Phones Portrait #### */
@media screen and (max-device-width: 480px) and (orientation: portrait){
/* some CSS here */
}

/* #### Mobile Phones Landscape #### */
@media screen and (max-device-width: 640px) and (orientation: landscape){
/* some CSS here */
}

/* #### Mobile Phones Portrait or Landscape #### */
@media screen and (max-device-width: 640px){
/* some CSS here */
}

/* #### iPhone 4+ Portrait or Landscape #### */
@media screen and (max-device-width: 480px) and (-webkit-min-device-pixel-ratio: 2){
/* some CSS here */
}

/* #### Tablets Portrait or Landscape #### */
@media screen and (min-device-width: 768px) and (max-device-width: 1024px){
/* some CSS here */
}

/* #### Desktops #### */
@media screen and (min-width: 1024px){
/* some CSS here */
} 
```

# symfony - capifony 安装 Composer 依赖项失败

> ID：15339545
> 
> 赞同：3
> 
> 时间：2013-03-11T13:14:16.743
> 
> 标签：symfony, capifony

我尝试在 capifony 的帮助下部署我的 symfony2 项目

```
cap  deploy:setup 
```

没有问题并存储在 /var/www/htdocs/symfony-project 两个文件夹中

```
.symfony-project 
 .. releases
 .. shared 
```

之后，当我尝试运行时：

```
cap  deploy:cold 
```

我明白了

```
--> Updating code base with remote_cache strategy
--> Creating cache directory................................✔
--> Creating symlinks for shared directories................✔
--> Normalizing asset timestamps............................✔
--> Downloading Composer....................................✔
--> Installing Composer dependencies........................✘
*** [deploy:update_code] rolling back
failed: "sh -c 'sh -c '\\''cd /var/www/htdocs/symfony-project/releases/20130311124645 &&      
php composer.phar install --no-scripts --verbose --prefer-dist --optimize-
autoloader'\\'''" on webservername.net 
```

并且没有文件夹

```
var/www/htdocs/symfony-project/releases/ 
```

我的 deploy.rb 如下：

```
set :user, "user"
set :port, "12345"

set :application, "Application Name"
set :domain,      "webservername.net"
set :deploy_to,   "/var/www/htdocs/symfony-project"
set :app_path,    "app"

set :repository,  "ssh://#{user}@webservername.net:#{port}/var/repos/symfony-project.git"
set :scm,         :git
set :branch,      "master"

set :model_manager, "doctrine"

role :web,        domain                        
role :app,        domain                         
role :db,         domain, :primary => true       

set  :use_sudo,      false
set  :keep_releases,  3

set :deploy_via, :remote_cache

set :use_composer, true 
```

有没有人知道它可能是由什么引起的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-03T18:08:16.203

看来您面临权限问题。确保您是本地*.composer/*目录的完全所有者。

**sudo chown -R user:user ~/.composer/**应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-02T08:27:18.373

就我而言，我遇到了同样的错误消息。但原因是**composer 无法解决的依赖关系**。

`cap staging deploy -d`正如@weyanch 建议的那样，运行并逐步执行每个命令有助于找到失败的命令。

# c# - 列表中的数据 拆分成另一个列表 有 2 个嵌套列表

> ID：15339547
> 
> 赞同：1
> 
> 时间：2013-03-11T13:14:18.457
> 
> 标签：c#, linq, list

我在使用这个 linq 查询时遇到了一些麻烦：

我有一个列表 ( `allStats`)，其中包含数据（请参阅`allItems`类），该列表包含来自不同日期的多个条目，我需要对其进行分解，因此它们按月份和周数分隔，如下所示：

```
 MonthNumber: 1,
    List<Weeks> Weeks:
        WeekNumber: 1,
        List<Days> Days:
            PunchedInLate: true,
            PunchedOutLate: false,
            PunchInDate: 2013-1-1 08:20:10,
            PunchOutDate: 2013-1-1 15:00:00
            PunchedInLate: true,
            PunchedOutLate: false,
            PunchInDate: 2013-1-2 08:20:10,
            PunchOutDate: 2013-1-2 15:00:00
            ...
            PunchedInLate: true,
            PunchedOutLate: false,
            PunchInDate: 2013-1-5 08:20:10,
            PunchOutDate: 2013-1-5 15:00:00
    MonthNumber: 1,
    List<Weeks> Weeks:
        WeekNumber: 2,
        List<Days> Days:
            PunchedInLate: true,
            PunchedOutLate: false,
            PunchInDate: 2013-1-10 08:20:10,
            PunchOutDate: 2013-1-10 15:00:00
            PunchedInLate: true,
            PunchedOutLate: false,
            PunchInDate: 2013-1-12 08:20:10,
            PunchOutDate: 2013-1-12 15:00:00 
```

[PasteBin - 在这里你可以下载一个示例程序，这样你就可以在你的机器上运行它](http://pastebin.com/sC09RaNb)

它本质上是我试图创建的这个问题的答案的插件： [SO - 将列表的部分拆分为 2 个列表并加入这 2 个](https://stackoverflow.com/questions/15275058/splitting-parts-of-a-listt-into-2-listts-and-joining-those-2)

> **编辑：**对不起，我忘了提到我在最后尝试了 .ToList() 方法，而不是在开始时进行强制转换，这会产生此错误：

`Cannot implicitly convert type 'System.Collections.Generic.List<System.Collections.Generic.IEnumerable<TestClass.Weeks>>' to 'System.Collections.Generic.List<TestClass.Weeks>'`

```
public class allItems
{
    public DateTime PunchInDate { get; set; }
    public DateTime PunchOutDate { get; set; }
    public DayOfWeek DayOfWeek { get; set; }
    public int WeekNumber { get; set; }
    public int MonthNumber { get; set; }
    public bool PunchedInLate { get; set; }
    public bool PunchedOutLate { get; set; }
}
public class Months
{
    public int MonthNumber { get; set; }
    public List<Weeks> Weeks { get; set; }
}
public class Weeks
{
    public int WeekNumber { get; set; }
    public List<Days> Days { get; set; }
}
public class Days
{
    public bool PunchedInLate { get; set; }
    public bool PunchedOutLate { get; set; }
    public DateTime PunchInDate { get; set; }
    public DateTime PunchOutDate { get; set; }
    public DayOfWeek DayOfWeek { get; set; } 
} 
```

和代码：

```
List<allItems> allStats = getAllStats(userId);
List<Months> stats = new List<Months>();
var asItems =
    from item in allStats
    group item by new { month = item.MonthNumber } into Month
    select new Months()
    {
        MonthNumber = Month.Key.month,
        Weeks = Month.Select(week =>
            from weeks in allStats
            group weeks by new { week = weeks.WeekNumber } into Week
            select new Weeks()
            {
                //WeekNumber = week.WeekNumber,
                WeekNumber = Week.Key.week, // I just noticed that I guess that I 
                                            // need this here, so I can group the 
                Days = Month.Select(days => // days correctly, right?
                    new Days()
                    {
                        PunchedInLate = days.PunchedInLate,
                        PunchedOutLate = days.PunchedOutLate,
                        DayOfWeek = days.DayOfWeek,
                        PunchInDate = days.PunchInDate,
                        PunchOutDate = days.PunchOutDate
                    }).ToList()
            }).ToList()
    };
List<Months> stat = asItems.ToList(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T13:16:39.540

问题是您`Month.Select(...)` *没有*返回`List<Weeks>`. 您可以删除演员表并使用：

```
Week = Month.Select(week => 
    ... code as before ...
).ToList() 
```

编辑：好的，我知道还有什么问题。对于 each `week`，您正在使用一个生成*多个* `Weeks`对象的查询。所以这部分：

```
from weeks in allStats
...
select new Weeks() { ... } 
```

是类型`IEnumerable<Weeks>()`- 并且它被用作投影的主体，`Month.Select(week => ...)`所以你有一个序列序列。目前尚不清楚您希望如何将其转换为单个列表。例如，您可以使用：

```
Week = Month.Select(week => 
    ... code as before ...
).First().ToList() 
```

或者：

```
Week = Month.Select(week => 
    ... code as before ...
).SelectMany(x => x).ToList() 
```

我们只是对您想要实现的目标知之甚少。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T13:18:01.197

在我看来，您的投射有问题：

```
List<allItems> allStats = getAllStats(userId);
List<Months> stats = new List<Months>();
var asItems =
    from item in allStats
    group item by new { month = item.MonthNumber } into Month
    select new Months()
    {
        MonthNumber = Month.Key.month,
        Weeks = Month.Select(week => //Don't cast here, put a ToList() at the end.
            from weeks in allStats
            group weeks by new { week = weeks.WeekNumber } into Week
            select new Weeks()
            {
                WeekNumber = week.WeekNumber,
                Days = Month.Select(days =>
                    new Days()
                    {
                        PunchedInLate = days.PunchedInLate,
                        PunchedOutLate = days.PunchedOutLate,
                        DayOfWeek = days.DayOfWeek,
                        PunchInDate = days.PunchInDate,
                        PunchOutDate = days.PunchOutDate
                    }).ToList()
            }).ToList(); //*** ToList() added here ***
    };
List<Months> stat = asItems.ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T13:17:35.637

看起来您在`ToList`“月份”选择之后缺少一个：

```
List<allItems> allStats = getAllStats(userId);
List<Months> stats = new List<Months>();
var asItems =
    from item in allStats
    group item by new { month = item.MonthNumber } into Month
    select new Months()
    {
        MonthNumber = Month.Key.month,
        Weeks = Month.Select(week =>
            from weeks in allStats
            group weeks by new { week = weeks.WeekNumber } into Week
            select new Weeks()
            {
                WeekNumber = week.WeekNumber,
                Days = Month.Select(days =>
                    new Days()
                    {
                        PunchedInLate = days.PunchedInLate,
                        PunchedOutLate = days.PunchedOutLate,
                        DayOfWeek = days.DayOfWeek,
                        PunchInDate = days.PunchInDate,
                        PunchOutDate = days.PunchOutDate
                    }).ToList()
            }).ToList()     // <-- here
    };
List<Months> stat = asItems.ToList(); 
```

请注意，在这种情况下您也不需要演员表。

# c++ - C++ 验证浮点数

> ID：15339548
> 
> 赞同：1
> 
> 时间：2013-03-11T13:14:18.507
> 
> 标签：c++, validation, input

你好，我正在写我的作业并且已经完成了，但是一件小事仍然让我感到困惑。我想验证浮点输入，所以如果用户键入 char 它应该显示错误消息。我的挣扎是，无论我做什么，我的循环要么不起作用，要么永远循环。非常感谢您的任何建议。

```
float fuel;
char ch= ???;

if(fuel==ch)
{
do
{cout<<"Input is not valid. Please enter numeric type!";
cin>>fuel;}

while(fuel!=ch); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:19:55.273

你试图这样做的方式是行不通的——因为你正在比较一个浮点数和字符，它们最明确地几乎永远不会相等。

试试这个方法：

```
bool notProper = true;
while(notProper) {
  std::string input;
  std::cin >> input
  if( input.find_first_not_of("1234567890.-") != string::npos ) {
    cout << "invalid number: " << input << endl;
  } else {
    float fuel = atof( num1.c_str() );
    notProper = false;
  }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:29:18.160

我的部分来源，请忽略“错误”用法，它基本上只是抛出一个字符串错误：

```
//----------------------------------------------------------------------------------------------------
    inline double str_to_double(const std::string& str){
        char *end = NULL;
        double val = strtod(str.c_str(), &end);
        if(end == str.c_str() || end - str.c_str() != str.length())
            serror::raise("string '%s' does not represent a valid floating point value", str.c_str());
        if(val == +HUGE_VAL)
            serror::raise("string '%s' represents floating point value which is too big", str.c_str());
        if(val == -HUGE_VAL)
            serror::raise("string '%s' represents floating point value which is too small", str.c_str());

        return val;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T13:26:13.217

```
float num;

//Reading the value
cin >> num;

//Input validation
if(!cin || cin.fail())
{
    cout << "Invalid";
}
else
{
    cout << "valid";
} 
```

您可以使用上述逻辑来验证输入！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T13:22:24.520

试试这样的代码。

```
#include <iostream>
#include <string>
#include <cstdlib>
using namespace std;

bool CheckFloat( istream & is, float& n ) {
    string line;
    if ( ! getline( is, line ) ) {
        return false;
    }
    char * ep;
    n = strtol( line.c_str(), & ep, 10 );
    return * ep == 0;
}

int main() {
    float n;

    while(1) {
        cout << "enter an float: ";
        if ( CheckFloat( cin, n ) ) {
            cout << "is float" << endl;
        }
        else {
            cout << "is not an float" << endl;
        }
    }
} 
```

# width - 100％宽度的Div，如何使其填充区域？

> ID：15339549
> 
> 赞同：0
> 
> 时间：2013-03-11T13:14:25.650
> 
> 标签：width, media-queries, breakpoints, expand, fill

我有一个 940 像素宽的布局，一旦它低于 940 像素，我就会变成响应式布局。

我的内容反应不佳。似乎如果我的某些 div 中有足够的文本，则 div 会跨越我的布局的宽度。如果只有一点点文本，则 div 将按照此示例转到页面的左侧：

[http://www.coflash.com/stuff/cssproblem.jpg](http://www.coflash.com/stuff/cssproblem.jpg)

我的问题是......如果不给 div 一个实际的宽度，我怎么能保证它们会跨越浏览器的宽度，无论它们有多少内容？一旦我设置了实际宽度，我的响应式网站上就会出现滚动条，它会破坏一切:(

文本到底是做什么的，它突然填满了布局区域？

感谢您的帮助，很抱歉我无法提供真实世界的示例，尽管这肯定是一个常见问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:17:59.497

对于第一个制作

```
 html, body{padding:0; margin:0} 
```

那么你可以指定

```
 div{left:0; width:100%} 
```

试试这个，它认为这会有所帮助:) 如果没有完成，请回复

# javascript - proto 链接和 Object.create 的区别

> ID：15339550
> 
> 赞同：6
> 
> 时间：2013-03-11T13:14:30.233
> 
> 标签：javascript, object, prototype

我想知道`__proto__` 和`Object.create`方法之间的区别。举个例子：

```
var ob1 = {a:1};
var ob2 = Object.create(ob1);

ob2.__proto__ === ob1; // TRUE 
```

这意味着 Object.create 方法创建一个新对象并将`__proto__`链接设置为作为参数接收的对象。为什么我们不直接使用`__proto__`链接而不是使用创建方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T13:17:54.077

> 为什么我们不直接使用 proto 链接而不是使用 create 方法？

因为`__proto__`是**非标准** 属性，因此不一定在每个浏览器中都可用。

然而，它似乎被考虑用于[ES.next](http://wiki.ecmascript.org/doku.php?id=harmony%3aspecification_drafts)。更多信息：[MDN -`__proto__`](https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/Object/proto)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T13:18:10.050

`__proto__`是非标准的，不会在所有地方都得到支持。 `Object.create`是官方规范的一部分，应该得到未来每个环境的支持。

它在不同的地方也有不同的实现。

从[有效的 Javascript](http://effectivejs.com/)：

> 例如，在处理具有空原型的对象时，环境有所不同。在某些环境中，`__proto__`是从 Object.prototype 继承的，因此具有 null 原型的对象没有特殊 `__proto__`属性

继续创建对象和实现继承的公认方法是`Object.create`函数，如果您确实需要访问原型，您将希望使用`Object.getPrototypeOf` 这些函数是标准化的，并且应该在所有现代环境中都可以正常工作

# java - 正则表达式接受具有给定特定集合的数字

> ID：15339553
> 
> 赞同：2
> 
> 时间：2013-03-11T13:14:39.750
> 
> 标签：java, regex, numbers

我正在编写一个示例程序，其中一个数字应该接受当且仅当它包含`1,2,3,4`数字而不考虑它的长度。

**例子**

**应该接受**

```
123
1234
122334444111222
133333333333322222244444 
```

**不应该接受**

```
0123
8123
451233441122
12345
12333333335
12321321367 
```

为了实现上述我写了一个regx（正则表达式）`"[1-4]+\\d"`

上面的 regx 表达式没有检查最后一位数字。它接受以 5、6、7、8、9、0 结尾的数字。

例子

**接受**

```
125
2345
123213213232135
1232132132135
1232132132136
1232132132137
1232132132138 
```

**不接受**

```
1232321355
232321355
21321360
123278 
```

请任何人解释它不检查最后一位数字的原因，以便有助于进一步探索。并且也有很好的工作表达来做同样的事情。

提前致谢

**注意**：*这是在java中*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T13:17:26.663

问题`\\d`在最后，它匹配任何数字。把那部分放在外面：

```
^[1-4]+$ 
```

演示：[http ://www.rubular.com/r/ydYmT5oeZf](http://www.rubular.com/r/ydYmT5oeZf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T13:15:59.670

您必须指定正则表达式必须覆盖整个字符串：

```
^[1-4]+$ 
```

默认情况下，正则表达式搜索给定输入中是否存在任何匹配项。`^`告诉引擎匹配应该从头开始并且`$`应该在最后一个字符结束。

[http://www.regular-expressions.info/anchors.html](http://www.regular-expressions.info/anchors.html)

# asp.net - IIS Express 中的 AppPool 必须在集成模式下运行

> ID：15339557
> 
> 赞同：0
> 
> 时间：2013-03-11T13:14:48.817
> 
> 标签：asp.net, visual-studio, iis, dotnetnuke, iis-express

我使用 IIS Express 而不是 Visual Studio 2012 开发服务器来安装 DotNetNuke 7.0.04，因为 DotNetNuke 7 需要集成模式，而 ASP.NET 开发服务器不支持集成模式，但是，安装过程会引发以下异常：

IIS 中的 AppPool 必须在集成模式下运行

有没有办法配置 IIS Express 集成模式？或任何其他解决方案来解决这个问题。

# php - 在 PHP 中搜索数组并返回结果

> ID：15339558
> 
> 赞同：0
> 
> 时间：2013-03-11T13:14:48.970
> 
> 标签：php, arrays, search, calendar

找不到完全正确的答案，所以希望有人能提供帮助。基本上想创建一个数组，然后从搜索中返回结果，例如

```
$tsql = "SELECT date, staffid, ID,status, eventid, auditid from maincalendar";  

$params = array();
$options =  array( "Scrollable" => SQLSRV_CURSOR_KEYSET ); 
$stmt = sqlsrv_query( $conn, $tsql , $params, $options);      
$calarray=array();
while($row = sqlsrv_fetch_array($stmt)) {
    $rowresult = array();
    $rowresult["status"] = $row['status'];
    $rowresult["eventid"] = $row['eventid'];
    $rowresult["caldate"] = $row['date'];
    $rowresult["staffid"] = $row['staffid'];
    $rowresult["ID"] = $row['ID'];
    $rowresult["auditid"] = $row['auditid'];
    $calarray[] = $rowresult; 
} 
```

然后我想搜索匹配 'caldate' 和 'staffid' 的值并返回 $calarray 中的关联条目

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:26:22.930

尝试这个：

```
$matches = array();
$caldate = //your desired date;
$staffid = //your desired id;

foreach($calarray as $k => $v){
   if(in_array($caldate, $v['caldate']) && in_array($staffid, $v['staffid'])){
      $matches[] = $calarray[$k];
   }
} 
```

$matches 应该是包含您想要的所有结果的数组。

* * *

还：

```
while($row = sqlsrv_fetch_array($stmt)) {
   $rowresult = array();
   $rowresult["status"] = $row['status'];
   $rowresult["eventid"] = $row['eventid'];
   $rowresult["caldate"] = $row['date'];
   $rowresult["staffid"] = $row['staffid'];
   $rowresult["ID"] = $row['ID'];
   $rowresult["auditid"] = $row['auditid'];
   $calarray[] = $rowresult; 
} 
```

可以简写为：

```
while($row = sqlsrv_fetch_array($stmt)) {
    $calarray[] = $row;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:26:48.227

也许此代码片段可以解决您的问题。我不是 PHP 程序员，所以没有保证。

```
function searchInArray($array, $keyword) {
    for($i=0;$i<array.length();$i++) {
        if(stristr($array[$i], $keyword) === FALSE) {
            return "Found ".$keyword." in array[".$i."]";
        }
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T13:26:52.267

我建议以下，

*   获取您正在显示的当月所需的所有数据，使用`col BETWEEN x AND y`
*   将它们添加到 PHP 中的数组中，使用`staffid`和`caldate`作为键

像这样的东西；

```
$calarray[$row['staffid'] . '-' . $row['date']][] = $row; 
```

不确定单个员工编号/日期组合是否每天可以有一个或多个事件，如果不是，您可以删除`[]`

要检查我们是否有特定人员/日期组合的信息，请使用`isset`

```
if (isset($calarray[$staffid . '-' . $mydate]) { ... } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T13:27:58.930

为要查询的字段添加索引，然后将搜索移至 sql 查询。您还可以在循环内进行简单的过滤。因此，根据您需要的搜索，您将填充多个数组而不是一个数组。

# php - 如何在 preg_match 中不匹配括号内的模式

> ID：15339567
> 
> 赞同：1
> 
> 时间：2013-03-11T13:15:12.697
> 
> 标签：php, regex, preg-match-all

我正在尝试从网页中获取所有图像标签的 src。但我对如何不匹配括号内的模式感到困惑。在这种情况下`gif|jpg|png|jpeg`

```
$img_src_pattern = '/src="?.+\.(gif|jpg|png|jpeg)"/';
preg_match_all($img_src_pattern, $contents, $img_matches); 
```

所以当打印出来时，`$img_matches`我得到一个这样的数组：

```
Array ( 
  [0] => Array ( 
    [0] => src="http://s9.addthis.com/button1-bm.gif" 
    [1] => src="http://s9.addthis.com/button1-bm.gif" ) 
  [1] => Array ( [0] => gif [1] => gif ) 
) 
```

这就是我想要得到的：

```
Array ( 
  [0] => Array ( 
    [0] => src="http://s9.addthis.com/button1-bm.gif" 
    [1] => src="http://s9.addthis.com/button1-bm.gif" ) 
) 
```

这真的是`preg_match`让我感到困惑的部分。你能启发我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T13:17:52.703

您可以忽略它，因为它属于数组中的另一个索引。

或者您可以将捕获组`(pattern)`更改为非捕获组`(?:pattern)`：

```
'/src="?.+\.(?:gif|jpg|png|jpeg)"/' 
```

您当前的正则表达式，除了找到与整个正则表达式的匹配项之外，还“捕获”（即记住）由正则表达式匹配的文本`gif|jpg|png|jpeg`，因为捕获`()`它周围的组的影响。非捕获组将保留*分组*属性，但不会捕获子表达式匹配的文本`gif|jpg|png|jpeg`。

`preg_match_all`输出一个二维数组，其中第一个维度是捕获组（索引 0 将包含与整个正则表达式匹配的文本），第二个维度是它找到的匹配项的 id。

# java - 如何减少向远程服务器发送数据的时间？

> ID：15339572
> 
> 赞同：0
> 
> 时间：2013-03-11T13:15:25.117
> 
> 标签：java, android, http

例如，我的平板电脑中存储了 10MB 数据。数据具有列表结构。列表中的每个条目大约为 3500 字节。

目前，我每次使用以下代码发送一个条目：

```
 HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost(ipport+ phpHandler);
    HttpResponse response = null;

    try {
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs, "utf-8"));
        response = httpclient.execute(httppost);
    } catch (UnsupportedEncodingException e) {
    } catch (ClientProtocolException e) {
    } catch (IOException e) {
    } 
```

但是要发送这 10MB 的数据，需要很长时间。每次发送一个条目大约需要 1 秒。

有什么办法可以提高效率吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:20:36.663

您可以构建一个包含所有实体的 JSON 字符串对象，然后使用 gzip 或任何其他压缩方案对其进行压缩。

构建 JSON 对象的好处是您可以将所有对象作为一个请求传输，而不是单独发送。这将消除每次建立新连接的延迟。

```
// your data list = listData
JSONArray newArray = new JSONArray();
for (int i = 0, lsize = listData.size(); i < lsize; i++) {
    try {
        newArray.put(i, listData.get(i));
    } catch (JSONException e) {
        e.printStackTrace();
    }
} 
```

此代码将使用 listData 中的所有元素构建一个 JSONArray（它应该是一个字符串列表）

现在您可以使用以下方法轻松地将 JSONArray 转换为字符串

```
newArray.toString() 
```

现在您可以通过网络发送此 JSON 字符串，并且可以轻松地以任何服务器端语言反序列化 JSON 对象。

至于 Gzip 压缩，你可能想看看这个[链接](http://developer.android.com/reference/java/util/zip/GZIPOutputStream.html)

这是一个关于 SO 的问题，关于
[在 Java 中使用 HTTPClient 在 android GZip POST 请求中通过 HTTP 发送 GZip 压缩数据](https://stackoverflow.com/questions/7153484/gzip-post-request-with-httpclient-in-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:31:03.770

我同意@Ahmed 的回答。您最好使用 JSON 字符串对象，然后使用 gzip libray 进行压缩。

对于 JSON，有很多有用的教程。以下链接真的很有帮助

[http://www.vogella.com/articles/AndroidJSON/article.html](http://www.vogella.com/articles/AndroidJSON/article.html)

在这里你可以看到写json的简单方法

```
public void writeJSON() {
  JSONObject object = new JSONObject();
  try {
    object.put("name", "Jack Hack");
    object.put("score", new Integer(200));
    object.put("current", new Double(152.32));
    object.put("nickname", "Hacker");
  } catch (JSONException e) {
    e.printStackTrace();
  }
} 
```

并使用 gzip 压缩和解压缩这里我从答案[https://stackoverflow.com/a/6718707/931982添加一些示例代码](https://stackoverflow.com/a/6718707/931982)

```
public static byte[] compress(String string) throws IOException {
    ByteArrayOutputStream os = new ByteArrayOutputStream(string.length());
    GZIPOutputStream gos = new GZIPOutputStream(os);
    gos.write(string.getBytes());
    gos.close();
    byte[] compressed = os.toByteArray();
    os.close();
    return compressed;
}

public static String decompress(byte[] compressed) throws IOException {
    final int BUFFER_SIZE = 32;
    ByteArrayInputStream is = new ByteArrayInputStream(compressed);
    GZIPInputStream gis = new GZIPInputStream(is, BUFFER_SIZE);
    StringBuilder string = new StringBuilder();
    byte[] data = new byte[BUFFER_SIZE];
    int bytesRead;
    while ((bytesRead = gis.read(data)) != -1) {
        string.append(new String(data, 0, bytesRead));
    }
    gis.close();
    is.close();
    return string.toString();
} 
```

# python - NonLinearModelFit in scipy (leastsq) with weights

> ID：15339576
> 
> 赞同：0
> 
> 时间：2013-03-11T13:15:35.603
> 
> 标签：python, math, wolfram-mathematica, scipy, least-squares

我最近一直在使用mathematica 来处理我的数据。我有一种方法可以根据来自静态接收器的 4 个或更多距离测量值（也是 x,y 坐标）计算 x,y 坐标。

我使用我拥有的数据最有效地执行此操作的函数是mathematica函数：

```
NonlinearModelFit[data, Norm[{x, y} - {x0, y0}], {x0, y0}, {x, y},
                  Weights -> 1/distances, Method->"LevenbergMarquardt"] 
```

在哪里...

```
data = {{548189.217202, 5912779.96059, 93}, {548236.967784, 5912717.80716, 39},
        {548359.406452, 5912752.54022, 88}, {548358.636206, 5912690.89573, 97}};

distances = {93, 39, 88, 97}; 
```

x0, y0 是它找到的解决方案

上面的mathematica输出是：

```
FittedModel[{"Nonlinear", {x0 -> 548272.0043962265,
                           y0 -> 5.912735710367113*^6},
            {{x, y}, Sqrt[Abs[x - x0]^2 + Abs[y - y0]^2]}},
            {{1/93, 1/39, 1/88, 1/97}}, {{548189.217202, 5.91277996059*^6, 93},
            {548236.967784, 5.91271780716*^6, 39},
            {548359.406452, 5.91275254022*^6, 88},
            {548358.636206, 5.91269089573*^6, 97}},
            Function[Null, Internal`LocalizedBlock[{x, x0, y, y0}, #1], {HoldAll}]] 
```

`x0, y0`是我的解决方案。

所以我不是拟合曲线，而是拟合一个点（权重与距离成反比）。我在谷歌上环顾四周，但根本不知道从哪里开始使用 scipy 函数 scipy.optimize.leastsq 算法来引入加权功能......

那么，如果mathematica 做到了，我为什么要这样做呢？从python代码调用mathematicascript（使用子进程模块）对于我想要处理实时数据来说太慢了，所以想尝试用python重写，看看是否可以提高速度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:53:31.470

在mathematica中的等效方法（给出完全相同的x0，y0），也许这更容易考虑移植到python ..

```
FindMinimum[ 
       Total @ ((1/#[[3]]) (Norm[#[[1 ;; 2]] - {x0, y0}] - #[[3]])^2  & /@ 
               data) , {x0, y0}] 
```

请注意，我明确地将权重 (1/#[[3]]) 放入错误标准中。

同样的东西更具可读性..

```
 err[{x_, y_, z_}] := (1/z) (Norm[{x, y} - {x0, y0}] - z)^2
  FindMinimum[ Total @ (err  /@ data) , {x0, y0}] 
```

# iphone - 谷歌搜索政策

> ID：15339577
> 
> 赞同：13
> 
> 时间：2013-03-11T13:15:38.180
> 
> 标签：iphone, ios, uiwebview, google-search

我对使用 Google 搜索有疑问。我可以在我的原生 iOS 应用程序中使用自定义谷歌搜索而不是使用他们的 api 工具，这对谷歌来说是个问题吗？

我写html页面（[http://barzyczak.vot.pl/search.html?q=test](http://barzyczak.vot.pl/search.html?q=test)）：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Element V2: Results Only Layout Demo</title>

        <!-- Put the following javascript before the closing </head> tag. -->
        <script>
            (function() {
             var cx = 'xyz';
             var gcse = document.createElement('script'); gcse.type = 'text/javascript'; gcse.async = true;
             gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
             '//www.google.com/cse/cse.js?cx=' + cx;
             var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(gcse, s);
             })();
            </script>
    </head>

    <body>
        <!-- Place this tag where you want the search results to render -->
        <gcse:searchresults-only enableOrderBy="false"></gcse:searchresults-only>
    </body> 
```

我确实在我的 iOS 应用程序中请求包含上述内容的站点并收到结果。我在 UIWebView 中显示了这个结果：

![在此处输入图像描述](../Images/c16ecc92e21cdaccab606851f836e50b.png)

那么我可以使用吗

```
- (BOOL)webView:(UIWebView*)webView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationTyp 
```

并将用户重定向到我的 UIViewController？这适用于 Google 政策吗？

我可以拦截/捕获用户对链接的点击并打开本机应用程序视图而不是 webview 还是应该在 webview 中打开所需的页面，然后使用 iOS 架构 URL 重定向（使用 301 代码）打开本机应用程序视图（所以真的模拟点击在谷歌）？

附言。我知道 Google API，但这对我来说不行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T08:52:43.637

UIWebView 类似于 safari 浏览器。

因此，如果您在 UIWebView 中加载任何 URL，请不要担心。**在 UIWebView 中使用任何 url 加载请求与在浏览器中粘贴 url 相同，因此无需担心**。但是，如果您想在 UIViewController 或任何其他控件（如标签）中打开 google 的广告（例如，您在 UILabel 或 UITextView 上显示广告），那么政策*应该*有问题。

我不太确定谷歌的政策，但如果你只使用 UIWebView 那就不用担心了。前进.........

对于谷歌搜索，我使用了一个您可以尝试的网址......

```
 NSString * urlString = [NSString stringWithFormat:@"https://www.google.co.in/webhp#hl=en&sugexp=les%%3B&gs_nf=1&tok=LZGxyqNyXgb5XCemHei1Fg&cp=4&gs_id=g&xhr=t&q=%@", self.txtSearch.text];
    [self.webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:urlString]]]; 
```

希望这篇文章对你有所帮助............

祝你编码愉快…………

编辑：-您不能在 WEBVIEW 中进行货币交易（可能是因为苹果的应用内购买政策）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T13:56:19.953

可在[http://www.google.com/cse/docs/tos.html](http://www.google.com/cse/docs/tos.html)找到 Google 的自定义搜索服务条款 (TOS) 。我建议彻底阅读这些内容。特别是我复制的第 1.3 节（截至 2013 年 3 月 17 日）：

> **1.3 您的义务。**您将收到来自最终用户的查询并将该查询转发给 Google。除非您与 Google 另有约定，否则您不得以任何方式构建、缓存或修改 Google 产生的结果。Google 将不负责接收来自最终用户的查询或在您和 Google 的网络接口之间传输数据。您应负责提供履行您在使用条款下的义务所需的所有硬件和软件，包括但不限于以下内容：(a) 实施和维护本网站，(b) 实施和维护本网站与服务，以及 (c) 接收来自最终用户的查询并将查询传输给 Google。

我不是律师，但“除非您与 Google 另有约定，否则您不得以任何方式构建、缓存或修改 Google 生成的结果。” 在您的情况下似乎很重要。

除非您为[Google Site Search](http://www.google.com/enterprise/search/products_gss_features.html)付费，否则您无法在不显示广告的情况下显示结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T19:25:55.450

来自谷歌当前[的服务条款](http://www.google.com/intl/en/policies/terms/)：

> 使用我们的服务
> 
> 您必须遵守服务中向您提供的任何政策。
> 
> 不要滥用我们的服务。例如，不要干扰我们的服务或尝试使用我们提供的界面和说明以外的方法访问它们。

对我来说，这有点可疑。从您以编程方式构建的 URL 加载搜索结果是否使用它们提供的接口是有争议的，但在我的解释中，似乎没问题，只要您将请求加载到`UIWebView`. 如果您以某种方式解析 html 以以不同的方式呈现结果，`UITableView`例如，那么我认为它越界了。

我正在开发一个应用程序，我在其中做的事情与您尝试做的事情非常相似。我在 a 中显示搜索结果`UIWebView`，如果用户单击一个链接，它会在 a`UIWebView`中打开`ViewController`。但我使用不同的搜索引擎，我选择事先询问他们，他们同意没关系。

# c# - C# DataGridView 在另一个线程上运行的表单中消失

> ID：15339578
> 
> 赞同：0
> 
> 时间：2013-03-11T13:15:39.203
> 
> 标签：c#, multithreading, winforms, datagridview, invoke

我在表单中遇到 DatagridView 的问题，它在主表单线程的另一个线程上运行。

1.  我创建了新表单的实例，例如。“新形式”
2.  我在新线程上运行它：`new Thread(() => coldTestVerifyResult.ShowDialog()).Start();`
3.  我更新了一些控件（标签，文本框）`newFrom.Invoke((MethodInvoker)delegate{ ... })`- 没关系！
4.  我也通过使用参数调用来更新 dataGridView，但是这个 dataGridView 没有显示（数据、标题、边框，什么都没有......）

我将不胜感激任何帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:18:10.463

您不应该在另一个线程中显示表单。所有的 UI 工作和对控制的所有访问都应该在 UI（主）线程中完成。您观察到的行为正是因为您在新线程中显示了表单。

# android - 如何从java代码更改片段的“类”属性

> ID：15339588
> 
> 赞同：0
> 
> 时间：2013-03-11T13:16:06.770
> 
> 标签：android, android-layout, android-fragments

在我的 android 应用程序中，我在我的 xml 布局中定义了一个片段。代码如下：

```
<fragment
    android:id="@+id/list_fragment"
    android:layout_width="220dp"
    android:layout_height="fill_parent"
    android:layout_marginLeft="62dp"
    android:layout_marginTop="20dp"
    class="com.example.shantaportfolio.ListFragment" /> 
```

但我需要`class`从我的 java 代码中更改片段的属性。我该怎么做？使用哪种方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:44:00.427

如果您只想替换布局中的`Fragment`实现，请在布局中插入“容器元素”并在`Fragment`那里设置：

在布局中：

```
<FrameLayout
        android:id="@+id/fragment_container"
        android:layout_width="match_parent"
        android:layout_height="0dp">
</FrameLayout> 
```

在代码中：

```
final FragmentTransaction tx = this.getFragmentManager().beginTransaction();
tx.replace(R.id.fragment_container, aFragment);
tx.commit(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T13:52:37.453

您需要在 .xml 文件`<fragment/>`中更改`<FrameLayout/>`

```
<fragment
    android:id="@+id/list_fragment"
    android:layout_width="220dp"
    android:layout_height="fill_parent"
    android:layout_marginLeft="62dp"
    android:layout_marginTop="20dp"
/> 
```

然后使用java代码以编程方式添加片段

```
FragmentManager fragmentManager = getFragmentManager()
FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
ListFragment fragment = new ListFragment();
fragmentTransaction.replace(R.id.list_fragment, fragment);
fragmentTransaction.commit(); 
```

您可以从 [http://developer.android.com/guide/topics/fundamentals/fragments.html获取更多详细信息](http://developer.android.com/guide/topics/fundamentals/fragments.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T13:33:34.317

您不能拦截`LayoutInflator`实例化声明的片段。但是您可以在之后用另一个片段[替换（）](http://developer.android.com/reference/android/app/FragmentTransaction.html#replace%28int,%20android.app.Fragment,%20java.lang.String%29)您的活动中的任何片段。

**更新：**

您可以使用 的实现[`LayoutInflator.Factory`](http://developer.android.com/reference/android/view/LayoutInflater.Factory.html)，并使用其`onCreateView()`方法为布局中的某些特定标签做一些不同的事情。

您提供此工厂实现以供`LayoutInflator`使用[`setFactory()`](http://developer.android.com/reference/android/view/LayoutInflater.html#setFactory%28android.view.LayoutInflater.Factory%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T14:40:46.903

您不能更改在 XML 中声明的片段。相反，声明一个片段所属的容器，并在`onCreate()`您的活动方法中，将片段附加到该容器。当您想要交换 Fragments 时，只需使用该`replace`方法并指定要交换的 Fragment。

注意：容器通常是`LinearLayout`通过将它们排列成特定尺寸来制作的。下面是一个简单的 XML 布局，左边的布局是屏幕大小的 2/3，右边的布局是屏幕大小的 1/3

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:baselineAligned="false"
    android:orientation="horizontal" >

    <LinearLayout
        android:id="@+id/fragment_container_parent"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="2" />

    <LinearLayout
        android:id="@+id/fragment_container_child"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1" />

</LinearLayout> 
```

# php - 覆盖 Wordpress 管理功能？

> ID：15339590
> 
> 赞同：0
> 
> 时间：2013-03-11T13:16:12.403
> 
> 标签：php, wordpress

我想`get_sample_permalink_html`从 wp-admin/post.php 覆盖。如果我直接修改文件，我的更改将起作用。但是，我想以更简洁的方式执行此操作，这意味着在插件中，这样它就可以面向未来。这是我尝试过的，在我的 PHP 插件文件中：

```
add_filter('get_sample_permalink_html', 'custom_get_sample_permalink_html', 1, 3);
function custom_get_sample_permalink_html( $id, $new_title = null, $new_slug = null ) {
    (...)
} 
```

它打破了页面而不显示错误，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:29:48.360

好吧，该函数有一个过滤器，您可以使用它，而不是“覆盖”该函数，而是操纵它的输出：

```
$return = apply_filters('get_sample_permalink_html', $return, $id, $new_title, $new_slug); 
```

因此，您需要以下内容：

```
add_filter( 'get_sample_permalink_html', 'custom_get_sample_permalink_html', 15, 4 );

function custom_get_sample_permalink_html( $return, $id, $new_title, $new_slug )
{
    // Manipulate the $return as you wish, using your own stuff and the passed variables:
    // $id, $new_title, $new_slug

    return $return;
} 
```

`15`是优先级，意思是：“在最后可能的位置做”，如果需要，你可以增加它。
`4`是函数接收的参数数量，在原始`apply_filters`调用中检查。

# javascript - IE 10 中的 Javascript 很慢

> ID：15339591
> 
> 赞同：2
> 
> 时间：2013-03-11T13:16:15.160
> 
> 标签：javascript, internet-explorer, internet-explorer-10

我有个问题。当我触发此代码时：

```
 function addItem(){
        var select = document.getElementById("2");
        select.options.length = 0;;
        alert("Please wait...");
        for (var i = 0; i < array.length; i++) {
            select.options[select.options.length] = new Option(array[i]);
        }
        alert("Images loaded!");
    } 
```

在 Internet Explorer 10（在 Windows 8 上）中，它的响应速度非常慢。数组中平均有 35000 个项目，但 Chrome 和 Firefox 没有这个问题......我该怎么做才能让 IE 更流畅？因为这是一个普通的浏览器...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T13:22:50.777

除了愚蠢的项目数量，试试这个

请注意，IE 不允许我们更改 select 的 innerHTML，因此我更改了 select 必须所在的容器的 innerHTML 以使其正常工作

```
function addItem(){
  var select = document.getElementById("2"); // Why a numeric ID?
  var parent = select.parentNode;
  parent.innerHTML="Please wait";
  var html='<select id="2" multiple="multiple">';
  for (var i=0,n=array.length, i<n; i++) {
    html += '<option value="'+array[i]+'">'+array[i]+'</option>';
  }
  html += '</select>'
  parent.innerHTML=html;
  alert("Images loaded!");
} 
```

或者查看 createDocumentFragment 和 appendChild

# android - 是否可以创建一个数据库并将其推送到我的 android 应用程序？

> ID：15339592
> 
> 赞同：-3
> 
> 时间：2013-03-11T13:16:20.143
> 
> 标签：android, sqlite

我想做以下事情，

我想在我的 java swing 应用程序中创建一个 sqlite 数据库，并用我需要的所有数据加载它。之后，我想将此数据库推送到我的 Android 应用程序。

有没有可能没有那么多麻烦？

我的意思是，我可以简单地创建这个数据库，然后只将它推送到我的 Android 应用程序并调用它的名称打开它。例如“MySQLite.bd”。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:28:55.683

是的，您可以轻松做到。一旦你准备好你的 SQLite 数据库，你就可以在你的 android 应用程序中加载那个预填充的数据库。

检查以下链接以获取详细步骤：

[http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:19:44.853

是的，这是可能的，只需确保[您的 Android 的 SQLite 引擎版本](https://stackoverflow.com/questions/2421189/version-of-sqlite-used-in-android)与您在 Swing 应用程序中使用的 SQLite DB 兼容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T13:22:18.253

如果您可以创建这样的数据库是的！

请参阅[在 Android 应用程序中使用您自己的 SQLite 数据库，](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)了解如何在 android 中编写代码以使用数据库。

**编辑：**另一个[链接](http://wuxuesong.wordpress.com/2012/09/03/using-pre-existing-sqlite-database-in-android-app/)也提到了大型外部数据库的问题。

# javascript - 如何使用 Yahoo Weather API 从 IP 地址获取客户端天气

> ID：15339595
> 
> 赞同：3
> 
> 时间：2013-03-11T13:16:28.017
> 
> 标签：javascript, yahoo-weather-api

我知道雅虎天气使用它自己的代码来确定获取天气的区域。我想在页面加载时显示每个访问我网站的用户的天气，但我在这里遇到了一些麻烦。

我的关键问题是：

*   如何从IP地址中获取用户的地理位置（最好是城市名）。
*   如何在 Yahoo Weather 中获取用户所在城市的区号。
*   如何将天气发布回我的页面。

我真的不知道从哪里开始，所以任何指导都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-03T21:08:05.920

您可以使用[IPInfo](http://ipinfo.io/)来获取用户的实际地址和城市。

Yahoo Weather 文档要求您使用城市的**woeid**，但您可以使用 YQL 和 Yahoo Geolocation API 来获取它。

# asp.net-mvc - css中的部署路径问题

> ID：15339597
> 
> 赞同：0
> 
> 时间：2013-03-11T13:16:33.680
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我必须使用很多重写旧的 asp.net mvc 应用程序：

```
Url.Content() 
```

让它在虚拟目录是默认站点的子目录的不同/附加部署环境中工作。

目前的css类是这样的：

```
.icos-pencil:before { content: url(/content/images/global/icons/usual/icon-pencil.png); } 
```

也破了。`Url.Content`上面的css是否有类似的“助手”（？） ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:48:07.250

如果您想在 js 或 css 文件中使用帮助程序，您可以编写自己的视图引擎，例如[jsHelper](http://javascripthelper.codeplex.com/)或者您可以使用此代码

```
background-image:url('../../content/images/global/icons/usual/icon-pencil.png'); 
```

变成

```
background-image:url('content/images/global/icons/usual/icon-pencil.png'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T14:41:50.477

只需在 CSS 中使用相对路径。

# gwt - com.google.gwt.dev.Compiler 和 com.google.gwt.dev.GWTCompiler 有什么区别

> ID：15339600
> 
> 赞同：3
> 
> 时间：2013-03-11T13:16:38.797
> 
> 标签：gwt, gwt-compiler

当我浏览这个`com.google.gwt.dev`包时，我发现. 中有两个可用的编译器`com.google.gwt.dev`。

我需要从我的 Java 应用程序中以编程方式编译 GWT 项目。哪一个适合？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T13:26:10.623

`GWTCompiler`是旧的入口点。该类已被弃用多年，[最终](https://code.google.com/p/google-web-toolkit/source/detail?r=11411)从 GWT 2.5.1-rc1 开始被删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T13:26:03.110

```
 Both the classes are the main executable entry point 
 for the GWT Java to JavaScript compiler. 
```

但`com.google.gwt.dev.GWTCompiler` 已**弃用**

使用 `com.google.gwt.dev.Compiler` （来自 2.5 的最新编译器）

在这里你可以找到这两个类`api`：

[GWTCompiler](http://www.jarvana.com/jarvana/view/com/google/gwt/gwt-dev/2.0.4/gwt-dev-2.0.4-javadoc.jar!/com/google/gwt/dev/GWTCompiler.html) //*在这里你可以发现它已被弃用*

[编译器](http://www.jarvana.com/jarvana/view/com/google/gwt/gwt-dev/2.0.4/gwt-dev-2.0.4-javadoc.jar!/com/google/gwt/dev/Compiler.html)

# go - Golang (cgo) - 任意 void* 接口

> ID：15339603
> 
> 赞同：3
> 
> 时间：2013-03-11T13:16:45.527
> 
> 标签：go, cgo

我正在包装一个 C 库，该库具有一个带有 void* 数据字段的结构，可用于任意保存数据。将其包装在惯用的 Go 中的最佳方式（如果可能的话）是什么？

结构很简单：

```
typedef struct _Foo {
    void * data;
} Foo; 
```

我希望做类似的事情：

```
type Foo C.Foo

func (f *Foo) SetData(data interface{}) {
    f.data = unsafe.Pointer(&data)
}

func (f *Foo) Data() interface{} {
    return (interface{})(unsafe.Pointer(f.data))
} 
```

这是行不通的，而且显然是错误的方法。

我已经使用 []byte 源成功地设置了一个带有长度字段的 void* 数据，但是这个无长度接口让我无法理解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T13:35:54.377

如果您获取 an 的`interface`地址，则您获取的是值类型的地址（大致为`struct { tInfo *typeInfo, payload uintPtr}`），而不是接口“装箱”的数据。如果有效载荷字段适合机器字，则可以保存真实数据，否则该字段保存指向实际有效载荷的指针。但这些是实施细节，不应直接与 IMO 合作。

我会去非通用的，比如（未经测试的代码，仅限模式）：

```
func (f *Foo) SetT(p *T) {
        (*C.Foo)(f).data = unsafe.Pointer(p)
} 
```

和

```
func (f *Foo) GetT() *T {
        return (*T)((*C.Foo)(f).data)
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-28T14:26:33.973

经过几个月的 Go 后回到这个问题，我想出了以下（更新，感谢 zupa）解决方案。

```
func (f *Foo) SetData(data interface{}) {
    f.data = unsafe.Pointer(&data)
}

func (f *Foo) Data() interface{} {
    return unsafe.Pointer(f.data)
} 
```

并且可以通过以下方式使用：

```
type Player struct {
    Name string
}

p := &Player{
    Name: "Player1",
}

f.SetData(p)

log.Print(f.Data().(*Player).Name) // Outputs: Player1 
```

# android-billing - 在应用程序购买问题“您的订单无法处理”？

> ID：15339604
> 
> 赞同：4
> 
> 时间：2013-03-11T13:16:47.320
> 
> 标签：android-billing

我一直在“应用内订阅”中工作，我按照[http://www.robotmedia.net/2011/06/android-billing-library-in-app-billing-made-simple/](http://www.robotmedia.net/2011/06/android-billing-library-in-app-billing-made-simple/)中给出的所有步骤进行操作，一切正常很好，但是当我尝试购买并付款时，我收到“您的付款无法处理。请再试一次”，然后我登录我收到了一些错误，例如

```
03-11 18:19:14.489: E/Volley(10235): [13] BasicNetwork.performRequest: Unexpected response code 500 for https://android.clients.google.com/fdfe/completePurchase
03-11 18:19:14.535: W/Finsky(10235): [1] CheckoutPurchase.onErrorResponse: DisplayErrorMessage[Your order could not be processed. Please try again.]  
03-11 18:19:14.539: E/Finsky(10235): [1] CheckoutPurchase.setError: type=UNKNOWN, code=-1, permissionCode=-1, message=Your order could not be processed. Please try again. 
```

在过去的三天里，我一直在打破我的头。有人可以帮我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T08:29:29.890

这通常意味着您使用与销售应用内购买的帐户相同的帐户购买应用内购买。谷歌不允许这样做。

如果您想出于测试目的执行此操作，请查看以下页面：http: [//developer.android.com/google/play/billing/billing_testing.html](http://developer.android.com/google/play/billing/billing_testing.html)

# delegates - c++/cli 终结器中免费 GCHandle 的最佳实践

> ID：15339608
> 
> 赞同：4
> 
> 时间：2013-03-11T13:17:07.443
> 
> 标签：delegates, garbage-collection, c++-cli, finalizer

我在 c 中有一些函数，我会在 .net 应用程序中使用它。为此，我用 C++/cli 编写了一个 Wrapper 类。

在 c 接口中有一个回调函数，并将其包装在 .net 委托中。

但是我应该如何释放回调 gcHandle 的非托管资源？是否允许从终结器中的 GCHandle 调用 IsAllocated 和 Free？因为它是一个托管资源，gc 是否已经发布了它？

这是c接口的代码：

```
// C functions

#ifdef __cplusplus
extern "C" {
#endif

    typedef void (*my_native_callback)(const uint8_t buffer[], uint32_t buffer_len);

    void register_callback(my_native_callback c, uint32_t* id);

    void remove_callback(uint32_t id);

#ifdef __cplusplus
}
#endif 
```

这里是 .net 包装器：

```
// .net wrapper (c++/cli)
public ref class MyWrapper
{
public:
    MyWrapper()
    {
        RegisterCallback();
    }

    // Destructor.
    ~MyWrapper()
    {
        this->!MyWrapper();
    }

protected:
    // Finalizer.
    !MyWrapper()
    {
        RemoveCallback();       // <- Is this safe?
        // ... release other unmanaged ressorces
    }

private:
    void RegisterCallback()
    {
        uint32_t id = 0;
        callbackDelegate_ = gcnew MyCallbackDelegate(this, &MyWrapper::OnCallback);
        callbackHandle_ = System::Runtime::InteropServices::GCHandle::Alloc(callbackDelegate_);
        System::IntPtr delegatePointer = System::Runtime::InteropServices::Marshal::GetFunctionPointerForDelegate(callbackDelegate_);
        register_callback(static_cast<my_native_callback>(delegatePointer.ToPointer()), &id);
        callbackId_ = id;
    }

    void RemoveCallback()
    {
        if (callbackId_)
        {
            remove_callback(callbackId_);
            callbackId_ = 0;
        }
        if (callbackHandle_.IsAllocated)        // It this safe in the finalizer?
        {
            callbackHandle_.Free();             // It this safe in the finalizer?
        }
        callbackDelegate_ = nullptr;            // It this safe in the finalizer?
    }

    void OnCallback(const uint8_t* buffer, uint32_t buffer_len)
    {
        // ...
    }

private:
    [System::Runtime::InteropServices::UnmanagedFunctionPointer(System::Runtime::InteropServices::CallingConvention::Cdecl)]
    delegate void MyCallbackDelegate(const uint8_t* buffer, uint32_t buffer_len);   
    MyCallbackDelegate^ callbackDelegate_;
    System::Runtime::InteropServices::GCHandle callbackHandle_;
    int callbackId_;
    // ... 
}; 
```

代码片段是否安全，最佳实践是什么？

先感谢您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T14:05:39.550

无需向委托对象添加额外的 GCHandle 引用。您已经在 callbackDelegate_ 字段中正确存储了一个引用，足以让垃圾收集器相信委托正在使用中并且不应该被收集。不需要额外的参考。

只需从您的代码中删除 callbackHandle_ 即可。

# c++ - Boost asio 中的 TCP 客户端

> ID：15339609
> 
> 赞同：0
> 
> 时间：2013-03-11T13:17:17.127
> 
> 标签：c++, multithreading, boost-asio, tcpclient

我正在使用 Boost::asio Libs 构建 TCP 客户端。我的程序有一个 write() 线程，它向服务器发送命令

```
write(*_socket,boost::asio::buffer("sspi l1\n\n",sizeof("sspi l1\n\n"))); 
```

然后启动一个读取线程，该线程一直从缓冲区读取，因为任何其他客户端都可能从服务器广播消息

```
void TCP_IP_Connection::readTCP()
{

size_t l=0;

 this->len=0;
boost::system::error_code error;

try
  {//loop reading all values from router
   while(1)
     {

      //wait for reply??

    l=_socket->read_some(boost::asio::buffer(this->reply,sizeof(this->reply)),error);
    if(error)
        throw boost::system::system_error(error);

    if(l>0)
    {

        this->dataProcess(l);

    }
    else
        boost::this_thread::sleep(boost::posix_time::milliseconds(5000));

      _io.run();

       if(error==boost::asio::error::eof) //connection closed by router
         std::cout<<"connection closed by router";

       _io.reset();

     }

   }

catch (std::exception& e)
 {
   std::cerr << e.what() << std::endl;
 }

} 
```

该线程一直在 while(1) 循环中运行，并且在接收到的数据长度小于零时应该休眠。它读取所有数据并调用数​​据解析器函数。之后，写线程用于发送另一个命令，读线程运行。但是服务器发回的不是所需的响应

```
 ? ""
ERROR: Unknown command 
```

我尝试使用wireshark。我可以看到命令正在正确发送。我在这里做的可能是什么错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T14:25:07.723

sizeof("sspi l1\n\n") 返回 10，但我只能计算该字符串中的 9 个字符。

试试这个：

```
const std::string cmd("sspi l1\n\n");
write(*_socket,boost::asio::buffer(cmd, cmd.length())); 
```

或者，当您将其作为字符串使用时，就足够了

```
const std::string cmd("sspi l1\n\n");
write(*_socket,boost::asio::buffer(cmd)); 
```

第二个参数指定要使用的字符串的最大长度。但由于它是一个常量字符串，所以第二个参数并不是绝对必要的。

# android - 如何从属性引用中检索可绘制对象

> ID：15339611
> 
> 赞同：19
> 
> 时间：2013-03-11T13:17:24.260
> 
> 标签：android, user-interface

我在我的应用程序中定义了主题和样式。图标（可绘制）使用样式文件中的引用定义为

```
<attr name="myicon" format="reference" /> 
```

和风格

```
<style name="CustomTheme" parent="android:Theme.Holo">
    <item name="myicon">@drawable/ajout_produit_light</item> 
```

我需要以编程方式检索可绘制对象以在对话框片段中使用好的图像。如果我喜欢

```
mydialog.setIcon(R.style.myicon); 
```

我得到一个 id 等于 0，所以没有图像

我尝试使用类似的东西

```
int[] attrs = new int[] { R.drawable.myicon};
TypedArray ta = getActivity().getApplication().getTheme().obtainStyledAttributes(attrs);
Drawable mydrawable = ta.getDrawable(0);
mTxtTitre.setCompoundDrawables(mydrawable, null, null, null); 
```

我尝试了类似的不同方法，但结果始终为 0 或 null :-/

我该怎么做？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-11T13:23:15.433

我找到了 [在主题和 attrs.xml android 中定义的访问资源的解决方案](https://stackoverflow.com/questions/8793183/access-resource-defined-in-theme-and-attrs-xml-android)

```
TypedArray a = getTheme().obtainStyledAttributes(R.style.AppTheme, new int[] {R.attr.homeIcon});     
int attributeResourceId = a.getResourceId(0, 0);
Drawable drawable = getResources().getDrawable(attributeResourceId); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2019-08-27T19:03:44.233

Kotlin 解决方案：

```
val typedValue = TypedValue()
context.theme.resolveAttribute(R.attr.yourAttr, typedValue, true)
val imageResId = typedValue.resourceId
val drawable = ContextCompat.getDrawable(context, imageResId) ?: throw IllegalArgumentException("Cannot load drawable $imageResId") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-09-14T12:03:46.840

假设您的[上下文](https://developer.android.com/reference/android/content/Context)（活动）以您想要的方式为主题，您可以[`resolveAttribute`](https://developer.android.com/reference/android/content/res/Resources.Theme#resolveAttribute(int,%20android.util.TypedValue,%20boolean))在主题上使用：

```
TypedValue themedValue = new TypedValue();
this.getTheme().resolveAttribute(R.attr.your_attribute, themedValue, true);
myView.setBackgroundResource(themedValue.resourceId); 
```

所以在你的情况下，它看起来像这样：

```
TypedValue themedValue = new TypedValue();
this.getTheme().resolveAttribute(R.attr.myicon, themedValue, true);
Drawable mydrawable = AppCompatResources.getDrawable(this, themedValue.resourceId);
mTxtTitre.setCompoundDrawables(mydrawable, null, null, null); 
```

在示例`this`中将是您的活动。如果您不在活动中，请获取有效的[上下文](https://developer.android.com/reference/android/content/Context)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-11T13:26:32.770

似乎您正在尝试使用资源设置 myDialog 的图标并尝试通过 R.style 访问它，但您的其他代码段让我相信您拥有位于 R.drawable 中的资源

考虑到这一点，您应该能够使用 myDialog.setIcon(R.drawable.myicon); 获得所需的效果。

# jsp - JSP 获取值

> ID：15339617
> 
> 赞同：0
> 
> 时间：2013-03-11T13:17:39.287
> 
> 标签：jsp, servlets

我只想获取 String 传递的值，然后放入`<p></p>`. 怎么做？

```
<% if(request.getParameter("status") != null) { %>
        <% if(request.getParameter("status").equals("ok")) { 
            String pass = request.getParameter("pass");%>
            <p>put the value of pass here in this line</p>
        <% } %>
    <% } %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:23:35.640

使用下面的代码更改段落行

```
<p><%= pass%></p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:24:20.097

使用 JSTL

```
<c:out value="${pass}" /> 
```

使用小脚本（不太推荐）

```
<%= pass %> 
```

# perl - 用空格替换行中某些位置的字符

> ID：15339618
> 
> 赞同：0
> 
> 时间：2013-03-11T13:17:39.397
> 
> 标签：perl, sed, awk, formatting

我需要能够在*Unix / Solaris*上的文件中的每一行上用*空格替换字符位置**58-71*。

 **提取示例：

```
LOCAX0791LOCPIKAX0791LOC   AX0791LOC095200130008PIKAX079100000000000000WL1G011             000092000000000000

LOCAX0811LOCPIKAX0811LOC   AX0811LOC094700450006PIKAX0811000000000000006C1G011             000294000000000000

LOCAX0831LOCPIKAX0831LOC   AX0831LOC094000180006PIKAX083100000000000000OJ1G011             000171000000000000 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T13:27:09.483

或者：

```
sed -r  's/^(.{57})(.{14})/\1              /' bar.txt 
```

为可怕的 14 空格字符串道歉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T13:31:28.207

简单的 Perl oneliner

```
perl -pne 'substr($_, 58, 13) = (" "x13);' inputfile.txt > outputfile.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T13:24:50.337

在 Perl 中试试这个：

```
use strict;
use warnings;

while(<STDIN>) {

   my @input = split(//, $_);
   for(my $i=58; $i<71; $i++) {
      $input[$i] = " ";
   }
   $_ = join(//, @input);
   print $_;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T14:38:08.013

如果你对你的 Solaris 机器有兴趣，你可以尝试：

```
gawk 'BEGIN{FIELDWIDTHS = "57 14 1000"} gsub(/./," ",$2)' OFS= file 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T13:22:46.830

尝试这个：

```
awk 'BEGIN{FS=OFS=""} {for(i=57;i<=71;i++)$i=" "}1' file 
```

第一行的输出：

```
LOCAX0791LOCPIKAX0791LOC   AX0791LOC095200130008PIKAX079               WL1G011 
```**

# c# - EncryptedXml DecryptDocument 方法抛出“坏数据”异常

> ID：15339621
> 
> 赞同：6
> 
> 时间：2013-03-11T13:17:44.137
> 
> 标签：c#, wcf, encryption, rsacryptoserviceprovider

我为加密/解密流编写了一个代码块。该代码在我的本地机器上运行。但是当我在网络上发布我的代码时，解密函数抛出“坏数据”异常这是我的加密和解密函数

```
private static MemoryStream EncryptStream(XmlDocument xmlDoc, XmlElement elementToEncrypt, string password)
{
    CspParameters cspParams = new CspParameters();
    cspParams.KeyContainerName = password;
    RSACryptoServiceProvider rsaKey = new RSACryptoServiceProvider(cspParams);
    RijndaelManaged sessionKey = null;
    try
    {

        if (xmlDoc == null)
            throw new ArgumentNullException("xmlDoc");
        if (rsaKey == null)
            throw new ArgumentNullException("rsaKey");
        if (elementToEncrypt == null)
            throw new ArgumentNullException("elementToEncrypt");

        sessionKey = new RijndaelManaged();
        sessionKey.KeySize = 256;

        EncryptedXml eXml = new EncryptedXml();
        byte[] encryptedElement = eXml.EncryptData(elementToEncrypt, sessionKey, false);

        EncryptedData edElement = new EncryptedData();
        edElement.Type = EncryptedXml.XmlEncElementUrl;
        edElement.Id = EncryptionElementID;
        edElement.EncryptionMethod = new EncryptionMethod(EncryptedXml.XmlEncAES256Url);

        EncryptedKey ek = new EncryptedKey();
        byte[] encryptedKey = EncryptedXml.EncryptKey(sessionKey.Key, rsaKey, false);
        ek.CipherData = new CipherData(encryptedKey);
        ek.EncryptionMethod = new EncryptionMethod(EncryptedXml.XmlEncRSA15Url);

        edElement.KeyInfo = new KeyInfo();

        KeyInfoName kin = new KeyInfoName();
        kin.Value = KeyName;

        ek.KeyInfo.AddClause(kin);
        edElement.CipherData.CipherValue = encryptedElement;
        edElement.KeyInfo.AddClause(new KeyInfoEncryptedKey(ek));

        EncryptedXml.ReplaceElement(elementToEncrypt, edElement, false);

        if (sessionKey != null)
        {
            sessionKey.Clear();
        }
        rsaKey.Clear();
        MemoryStream stream = new MemoryStream();
        xmlDoc.Save(stream);
        stream.Position = 0;
        Encoding encodeing = System.Text.UnicodeEncoding.Default;
        return stream;
    }
    catch (Exception e)
    {
        if (sessionKey != null)
        {
            sessionKey.Clear();
        }
        rsaKey.Clear();
        throw (e);
    }
}

private static MemoryStream DecryptStream(XmlDocument xmlDoc, string password)
{
    CspParameters cspParams = new CspParameters();
    cspParams.KeyContainerName = password;
    RSACryptoServiceProvider rsaKey = new RSACryptoServiceProvider(cspParams);
    EncryptedXml exml = null;
    try
    {
        if (xmlDoc == null)
            throw new ArgumentNullException("xmlDoc");
        if (rsaKey == null)
            throw new ArgumentNullException("rsaKey");

        exml = new EncryptedXml(xmlDoc);
        exml.AddKeyNameMapping(KeyName, rsaKey);

        exml.DecryptDocument();
        rsaKey.Clear();

        MemoryStream outStream = new MemoryStream();
        xmlDoc.Save(outStream);
        outStream.Position = 0;
        return outStream;
    }
    catch (Exception e)
    {
        rsaKey.Clear();
        throw (e);
    }
} 
```

在“exml.DecryptDocument();”上抛出异常 线。

您对问题和解决方案有任何想法吗？

> **编辑：**

在[MSDN](http://msdn.microsoft.com/en-us/library/system.security.cryptography.xml.encryptedxml.decryptdocument.aspx)页面中，有如下备注

> 要将 XML 加密与 X.509 证书一起使用，您必须安装 Microsoft 增强加密提供程序，并且 X.509 证书必须使用增强提供程序。如果您没有安装 Microsoft 增强加密提供程序或 X.509 证书不使用增强提供程序，则在解密 XML 文档时将引发带有“未知错误”的 CryptographicException。

您对“Microsoft Enhanced Cryptographic Provider”和“X.509 证书”有任何想法吗？我的问题与这些有关吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-14T16:20:49.637

尝试在另一台 PC 上解密时，解密函数引发“错误数据”异常的原因是 CspParameters 链接到运行加密的 PC 上的会话。

cspParams 对象需要在 XML 中嵌入和加密，才能在另一台 PC 上启用解密。幸运的是，我们可以使用 EncryptionProperty。

```
private static MemoryStream EncryptStream(XmlDocument xmlDoc, XmlElement elementToEncrypt, string password)
{
    CspParameters cspParams = new CspParameters();
    cspParams.KeyContainerName = password;
    RSACryptoServiceProvider rsaKey = new RSACryptoServiceProvider(cspParams);
    RijndaelManaged sessionKey = null;
    try
    {
        if (xmlDoc == null)
            throw new ArgumentNullException("xmlDoc");
        if (rsaKey == null)
            throw new ArgumentNullException("rsaKey");
        if (elementToEncrypt == null)
            throw new ArgumentNullException("elementToEncrypt");

        sessionKey = new RijndaelManaged();
        sessionKey.KeySize = 256;

        EncryptedXml eXml = new EncryptedXml();
        byte[] encryptedElement = eXml.EncryptData(elementToEncrypt, sessionKey, false);

        EncryptedData edElement = new EncryptedData();
        edElement.Type = EncryptedXml.XmlEncElementUrl;
        edElement.Id = EncryptionElementID;
        edElement.EncryptionMethod = new EncryptionMethod(EncryptedXml.XmlEncAES256Url);

        EncryptedKey ek = new EncryptedKey();
        byte[] encryptedKey = EncryptedXml.EncryptKey(sessionKey.Key, rsaKey, false);
        ek.CipherData = new CipherData(encryptedKey);
        ek.EncryptionMethod = new EncryptionMethod(EncryptedXml.XmlEncRSA15Url);

        // Save some more information about the key using the EncryptionProperty element.

        // Create a new "EncryptionProperty" XmlElement object. 
        var property = new XmlDocument().CreateElement("EncryptionProperty", EncryptedXml.XmlEncNamespaceUrl);

        // Set the value of the EncryptionProperty" XmlElement object.
        property.InnerText = RijndaelManagedEncryption.EncryptRijndael(Convert.ToBase64String(rsaKey.ExportCspBlob(true)),
                        "Your Salt string here");

        // Create the EncryptionProperty object using the XmlElement object. 
        var encProperty = new EncryptionProperty(property);

        // Add the EncryptionProperty object to the EncryptedKey object.
        ek.AddProperty(encProperty);

        edElement.KeyInfo = new KeyInfo();

        KeyInfoName kin = new KeyInfoName();
        kin.Value = KeyName;

        ek.KeyInfo.AddClause(kin);
        edElement.CipherData.CipherValue = encryptedElement;
        edElement.KeyInfo.AddClause(new KeyInfoEncryptedKey(ek));

        EncryptedXml.ReplaceElement(elementToEncrypt, edElement, false);

        if (sessionKey != null)
        {
            sessionKey.Clear();
        }
        rsaKey.Clear();
        MemoryStream stream = new MemoryStream();
        xmlDoc.Save(stream);
        stream.Position = 0;
        Encoding encodeing = System.Text.UnicodeEncoding.Default;
        return stream;
    }
    catch (Exception)
    {
        if (sessionKey != null)
        {
            sessionKey.Clear();
        }
        rsaKey.Clear();
        throw;
    }
}

private static MemoryStream DecryptStream(XmlDocument xmlDoc, string password)
{
    CspParameters cspParams = new CspParameters();
    cspParams.KeyContainerName = password;
    RSACryptoServiceProvider rsaKey = new RSACryptoServiceProvider(cspParams);

    var keyInfo = xmlDoc.GetElementsByTagName("EncryptionProperty")[0].InnerText;
        rsaKey.ImportCspBlob(
            Convert.FromBase64String(RijndaelManagedEncryption.DecryptRijndael(keyInfo,
                "Your Salt string here")));
    EncryptedXml exml = null;
    try
    {
        if (xmlDoc == null)
            throw new ArgumentNullException("xmlDoc");
        if (rsaKey == null)
            throw new ArgumentNullException("rsaKey");

        exml = new EncryptedXml(xmlDoc);
        exml.AddKeyNameMapping(KeyName, rsaKey);

        exml.DecryptDocument();
        rsaKey.Clear();

        MemoryStream outStream = new MemoryStream();
        xmlDoc.Save(outStream);
        outStream.Position = 0;
        return outStream;
    }
    catch (Exception)
    {
        rsaKey.Clear();
        throw;
    }
} 
```

在[这里](http://www.codeproject.com/Tips/704372/How-to-use-Rijndael-ManagedEncryption-with-Csharp "如何在 C# 中使用 Rijndael ManagedEncryption")查看 RijndaelManagedEncryption 类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T14:12:45.020

不要重新发明密码协议。**你会弄错**的。[例如，错误处理存储在CSP](http://msdn.microsoft.com/en-us/library/windows/desktop/aa380245%28v=vs.85%29.aspx)中的 RSA 密钥并期望它们神奇地出现在任何机器上。

要加密传输中的数据，请使用 SSL/TLS。.Net 提供开箱即用的[`SslStream`](http://msdn.microsoft.com/en-us/library/system.net.security.sslstream.aspx). 对于 WCF，请参阅[如何：使用 SSL 配置 IIS 托管的 WCF 服务](http://msdn.microsoft.com/en-us/library/hh556232.aspx)。

# javascript - 在 javascript 的框架上调用 print() 会挂起 IE 8 浏览器

> ID：15339624
> 
> 赞同：3
> 
> 时间：2013-03-11T13:17:52.593
> 
> 标签：javascript, internet-explorer-8

我想在按名称索引的数组中打印特定帧。我正在使用以下代码：

```
var frame_name = "abc"; 
frames_array[frame_name].focus(); 
frames_array[frame_name].print(); 
```

当它在 IE8 中执行 print() 语句时，它会挂起。这段代码在 Firefox、Chrome 和 IE9 中都能正常工作。

我试过`frames_array[frame_name].document.close()`了，但它没有改变任何东西。这个问题有解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T13:27:39.820

试试这个功能。它会工作的。

```
function printDiv() {
 var divToPrint = document.getElementById('printArea');
    newWin.document.write(divToPrint.innerHTML)
    newWin.document.close();
    newWin.focus();
    newWin.print();
    newWin.close();

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T06:00:51.160

即使这样也没有用。我想问题是我没有打开一个新的打印窗口，而是直接打印按钮所在的框架。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-04-17T20:40:59.780

尝试`frames_array[frame_name].document.execCommand('print', false, null);`

# libgdx - 如何在 libgdx 中向物体添加排斥力

> ID：15339627
> 
> 赞同：0
> 
> 时间：2013-03-11T13:17:57.473
> 
> 标签：libgdx

我正在制作一个带有圆形物体的演示，并希望对它们施加排斥力，以便它们在世界上随机获得位置。它应该有点像宇宙中的行星。物体的位置（坐标）应取决于随机放置它们的力。

# jquery - 将 jBPMN xml 转换为 BPMN 图

> ID：15339633
> 
> 赞同：0
> 
> 时间：2013-03-11T13:18:08.533
> 
> 标签：jquery, jbpm, bpmn

我有一个 jBPMN XML 文件。

是否有一个插件（jQuery）可以将此 XML 转换为 BPMN 格式的图表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T00:41:22.113

jBPM 项目提供了可用于执行此操作的基于 Web 的设计器。但我假设您正在寻找更轻量级的替代方案？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-23T11:35:08.193

我正在寻找的是，我给了 jbpm XML，然后我得到了图表！

目前，没有可用的插件、工具、软件。JBPM 可用于从 XML 中获取图表（稍加努力）

# perl - perl -pi.bak -e "tr/\n\r/ /d" test.XML

> ID：15339637
> 
> 赞同：1
> 
> 时间：2013-03-11T13:18:11.563
> 
> 标签：perl

我从来没有学过 Perl 并试图理解别人写的一篇文章。谁能告诉我是什么`perl -pi.bak -e "tr/\n\r/ /d" test.XML`意思？提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T13:51:29.367

```
perl -pi.bak -e "tr/\n\r/ /d" test.XML 
```

*   `-p`从参数文件或标准输入读取输入（隐式 while 循环程序）
*   `-i.bak`对参数文件执行就地编辑并保存带有扩展名的副本`.bak`。
*   `-e`编码
*   `tr/\n\r/ /d`将左侧的所有字符转写`\n\r`为右侧的对应字符`（空格），并`/d`删除任何没有对应字符的条目。`

 `所以基本上这将获取文件`test.XML`，将副本存储在 中`test.XML.bak`，将所有换行符更改为空格，删除所有换行符`\r`，并将此副本另存为`test.XML`.

请注意，您可以通过多次运行此命令来覆盖备份。未备份备份。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T13:19:36.163

`-e`简而言之，它正在为输入文件的每一行执行以下脚本`test.XML`。然后它将修改写回输入文件并保留带有`.bak`后缀的原始文件。我会创建一个示例 XML 文件并尝试一下。您会看到您的原始文件已被修改（检查文件系统日期），并且原始文件带有`.bak`后缀。

该`tr`函数[在此处](http://www.misc-perl-info.com/perl-tr.html)记录，并翻译字符。以上是操作回车/换行。

`-p`and`-i`参数让 Perl 重命名输入文件，以便将其保留为原始文件的备份。有关详细信息，请参阅[perlrun](http://perldoc.perl.org/perlrun.html)。

有关 Perl 单行代码的更多提示/技巧，请参见[此处。](https://blogs.oracle.com/ksplice/entry/the_top_10_tricks_of)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T13:20:18.443

它将 test.XML 中的换行符更改为空格。它还将原始文件备份为 test.XML.bak。`

# php - html_entity_decode 在 XML dom nodeValue 中不起作用

> ID：15339639
> 
> 赞同：-2
> 
> 时间：2013-03-11T13:18:18.957
> 
> 标签：php, xml, entity, decode, entities

我有 test.xml 文件，我希望在其中对这些节点值进行编码：...

```
<section id="1">
<title id="2">&gt;</title>
<title id="2">&lt;</title>
<title id="2">&lt;</title>
</section> 
```

...

所以我写了这段代码，但是在它保存 XML 之后，没有一个节点值从“$lt;”解码为“<”。

php代码：

```
$dom = new DOMDocument;
$dom->load("test.xml");
$titles = $dom->getElementsByTagName('title');

foreach ($titles as $title) {

$title->nodeValue=html_entity_decode($title->nodeValue);
}
 $dom->save("success.xml") 
```

你能告诉我它有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:29:01.970

首先：

1.  使用库的全部目的是自动为您完成编码和解码。
2.  如果您注入一个文字`<`字符，那么您就是在定义一个 XML 标记。

假设您有正当理由关心编码方式`<`和`>`编码方式，则必须使用 CDATA：

```
<?php

$dom = new DOMDocument;
$dom->load("test.xml");
$titles = $dom->getElementsByTagName('title');

foreach ($titles as $title) {
    $newNode = $dom->createCDATASection($title->nodeValue);
    $title->nodeValue = null;
    $title->appendChild($newNode);
}
$dom->save("success.xml"); 
```

...生成：

```
<?xml version="1.0"?>
<section id="1">
<title id="2"><![CDATA[>]]></title>
<title id="2"><![CDATA[<]]></title>
<title id="2"><![CDATA[<]]></title>
</section> 
```

但这份文件 100% 等同于您已有的文件（除了缺少的`<?xml version="1.0"?>`标题）。

**编辑＃1：**实体只是*编码*特殊字符的语法技巧，它们根本不会改变节点内容，PHP会自动为您解码所有内容：

```
$dom = new DOMDocument;
$dom->load("test.xml");
$titles = $dom->getElementsByTagName('title');

foreach ($titles as $title) {
    var_dump($title->nodeValue);
} 
```

...按预期打印解码的内容：

```
string(1) ">"
string(1) "<"
string(1) "<" 
```

使用另一个示例可能更容易看到：

```
echo 'O\'Brian'; 
```

...打印`O'Brian`而*不是* `O\'Brian`。我们正在对字符串进行编码，而不是修改它。

我怀疑在整个图片中有一些像这样的jQuery代码：

```
$.get('ajax/data.php', function(data) {
    $('.result').text(data);
}); 
```

...应该有类似的东西：

```
$.get('ajax/data.php', function(data) {
    $('.result').html(data);
}); 
```

**编辑#2：**

我什至无法想象您的创作系统是如何工作的（我希望您没有使用 WYSIWYG 编辑器来实际*输入*HTML 标记）但是您已经询问过 XML，而在 XML 中，您只能从角度做两件事括号：

1.  数据
2.  标签

在[DOMDocument](http://php.net/DOMDocument)中，您可以使用[createElement()](http://www.php.net/manual/en/domdocument.createelement.php)创建标签，并且可以使用例如[appendChild()](http://www.php.net/manual/en/domnode.appendchild.php)插入先前创建的标签。

时期。

# ios - 带有自定义图像的 UIActivity

> ID：15339641
> 
> 赞同：0
> 
> 时间：2013-03-11T13:18:23.647
> 
> 标签：ios, cocoa-touch, ios6, uiactivity

有没有办法让 UIActivity 显示自定义图像？默认情况下，它创建了金属风格的图标。有没有办法禁用它？

其次，我可以使用 UIActivity 代替 UIActionSheet 吗？是否应该（不）使用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T13:37:59.010

自定义`UIActivity`仅显示灰度图像。是的，您可以使用`UIActivityViewController`而不是`UIActionSheet`，但您必须自己为此创建每个`UIActivity`。这是创建自己的好方法`UIActivity`：[如何在 iOS 6 中创建自定义 UIActivity 和 UIActivityProvider？](https://stackoverflow.com/questions/12766300/how-can-i-create-a-custom-uiactivity-and-uiactivityprovider-in-ios-6)

何时以及如何使用`UIActivity`取决于您自己。祝你好运！

# macos - 语言分析框架的语素分析已弃用 API 的替代品是什么

> ID：15339643
> 
> 赞同：0
> 
> 时间：2013-03-11T13:18:28.053
> 
> 标签：macos, 64-bit, cjk

语言分析框架已被弃用，甚至不支持 64 位。文档说 - 使用 CFStringTokenizer 但标记器不提供语言分析框架中可用的功能。

语言分析框架提供的词素分析 API 的替代品是什么？

**编辑：** 虽然 Pantong 的回复有所帮助，但并非在所有情况下都有效，例如对于具有 3-4 个汉字字符的单词，它会返回不正确的结果。（不正确的意思是它与 Lang 分析框架 API 为同一字符串返回的内容不同）。

a）现人神被转换为拉丁语 - 'gen ren shen' 和平假名 - 'げんじんしん' 而它应该是 - 拉丁语 - 'Arahitogami' 和平假名 - 'あらひとがみ'

b) 安本丹被转换为拉丁语 - 'an ben dan' 和平假名 - 'やすもとまこと' 而它应该 - 在拉丁语中 - 'Yasumoto makoto' 和平假名 - 'あんぽんたん'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-24T21:43:01.123

已弃用的词素分析 API 的一项功能是“为日文/中文文本获取 rudy 文本”。如果您要求替换该特定功能，那么以下代码就是一个示例。但是，我不知道语素分析 API 中其他功能的替换。

```
CFStringRef testString = CFSTR("のちに検知されたトークンの範囲用として使用");

CFStringTokenizerRef tokenizer = CFStringTokenizerCreate(kCFAllocatorDefault,
                                                         testString,
                                                         CFRangeMake(0, CFStringGetLength(testString)),
                                                         kCFStringTokenizerUnitWordBoundary,
                                                         CFLocaleCreate(kCFAllocatorDefault, CFSTR("Japanese")));
do
{
    if (CFStringTokenizerAdvanceToNextToken(tokenizer) == kCFStringTokenizerTokenNone) {
        break;
    }

    CFStringRef originalToken = CFStringCreateWithSubstring(kCFAllocatorDefault,
                                                            testString,
                                                            CFStringTokenizerGetCurrentTokenRange(tokenizer));

    // Get Latin transcription from the Japanese text
    CFMutableStringRef convertedToken = (CFMutableStringRef)CFStringTokenizerCopyCurrentTokenAttribute(tokenizer,
                                                                            kCFStringTokenizerAttributeLatinTranscription);
    NSLog(@"token: %@ -> latin: %@", originalToken, convertedToken);

    // Get kana from Latin transcription
    CFStringTransform(convertedToken, NULL, kCFStringTransformLatinHiragana, false);
    NSLog(@"token: %@ -> latin: %@", originalToken, convertedToken);
}
while (true); 
```

# azure - Azure 网站：NetworkInterface.GetIsNetworkAvailable() 始终返回 false

> ID：15339645
> 
> 赞同：1
> 
> 时间：2013-03-11T13:18:34.357
> 
> 标签：azure, azure-web-app-service

我有一个 Azure 网站，对 NetworkInterface.GetIsNetworkAvailable() 的调用总是返回 false。有没有其他人遇到过这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T09:23:33.247

正如 MSFT 的 Jim Cheshire 在[此线程](http://social.msdn.microsoft.com/Forums/en-US/windowsazurewebsitespreview/thread/5a8efa69-9769-4418-b460-cf7c411de026#af2b3659-2934-4c1a-97ef-28f867b23c2e)中所述 (2013-03-29)，此 API 在 WAWS 中被阻止。

# selenium - Safari 5 和 Selenium-WebDriver 面临的问题

> ID：15339650
> 
> 赞同：3
> 
> 时间：2013-03-11T13:19:05.750
> 
> 标签：selenium, safari, websocket, selenium-webdriver

捆绑包中包含的宝石：

*   捆绑器 (1.2.4)
*   子进程（0.3.9）
*   菲（1.4.0）
*   json (1.7.7)
*   哑剧类型 (1.21)
*   multi_json (1.6.1)
*   机架 (1.5.2)
*   休息客户端（1.6.7）
*   rubyzip (0.9.9)
*   硒网络驱动程序（2.31.0）
*   西纳特拉 (1.3.0 063bcb1)
*   sqlite3 (1.3.7)
*   sqlite3-ruby (1.3.3)
*   系统名称 (0.9.1)
*   测试员（0.1.15）
*   倾斜 (1.3.5)
*   特洛普 (2.0)
*   用户代理（0.4.16）
*   网络套接字（1.0.7）
*   xml-简单 (1.1.2)

代码/异常：

```
csut11:current demo$ bundle exec irb
1.9.2-p290 :001 > require "selenium-webdriver"
=> true
1.9.2-p290 :002 > browser = Selenium::WebDriver.for :safari
EOFError: end of file reached
from /Users/demo/.rvm/gems/ruby-1.9.2-p290/gems/selenium-webdriver-2.31.0/lib/selenium/webdriver/safari/server.rb:37:in `read_nonblock'
from /Users/demo/.rvm/gems/ruby-1.9.2-p290/gems/selenium-webdriver-2.31.0/lib/selenium/webdriver/safari/server.rb:37:in `receive'
from /Users/demo/.rvm/gems/ruby-1.9.2-p290/gems/selenium-webdriver-2.31.0/lib/selenium/webdriver/safari/bridge.rb:60:in `raw_execute'
from /Users/demo/.rvm/gems/ruby-1.9.2-p290/gems/selenium-webdriver-2.31.0/lib/selenium/webdriver/safari/bridge.rb:40:in `create_session'
from /Users/demo/.rvm/gems/ruby-1.9.2-p290/gems/selenium-webdriver-2.31.0/lib/selenium/webdriver/remote/bridge.rb:68:in `initialize'
from /Users/demo/.rvm/gems/ruby-1.9.2-p290/gems/selenium-webdriver-2.31.0/lib/selenium/webdriver/safari/bridge.rb:23:in `initialize'
from /Users/demo/.rvm/gems/ruby-1.9.2-p290/gems/selenium-webdriver-2.31.0/lib/selenium/webdriver/common/driver.rb:47:in `new'
from /Users/demo/.rvm/gems/ruby-1.9.2-p290/gems/selenium-webdriver-2.31.0/lib/selenium/webdriver/common/driver.rb:47:in `for'
from /Users/demo/.rvm/gems/ruby-1.9.2-p290/gems/selenium-webdriver-2.31.0/lib/selenium/webdriver.rb:67:in `for'
from (irb):2
from /Users/demo/.rvm/rubies/ruby-1.9.2-p290/bin/irb:16:in `<main>'
1.9.2-p290 :003 > 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T12:32:47.113

在 selenium 中记录的 问题[http://code.google.com/p/selenium/issues/detail?id=5318](http://code.google.com/p/selenium/issues/detail?id=5318)
跟踪问题以修复 [http://code.google.com/p/selenium/issues/detail?id=5322](http://code.google.com/p/selenium/issues/detail?id=5322)

# python - 从 azure blob 存储返回 blob 而不保存它

> ID：15339652
> 
> 赞同：0
> 
> 时间：2013-03-11T13:19:18.143
> 
> 标签：python, azure, bottle

我正在尝试从 Azure blob 存储中获取 blob 并将文件返回给用户以供下载。

现在我要做的是从 azure 获取文件，将其保存在本地，然后将文件作为使用静态文件返回：

```
 def getDownload(filename):
        try:
            file = blob.get_blob('picture', filename)
            with open(filename, 'w') as f:
                f.write(file)
        except:
            abort(400, 'Download blob fail')
        return static_file(filename, root='.', download=filename) 
```

我正在尝试将其流式传输给用户，而无需先将文件保存在服务器中。

我怎样才能实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:38:49.520

不幸的是，我没有任何 python 示例代码，但您可以为验证目的执行以下操作：

1.  确保容器不可公开访问
2.  客户端向您的 Web 应用程序向您的 Web 应用程序发送针对 Blob 中给定文件的请求
3.  验证是否允许此客户端访问该 blob（如果没有，则返回 401 错误）
4.  在短时间内为此 blob 创建共享访问签名（大约需要 5 分钟）
5.  向客户端返回一个 303（参见其他）html 状态代码，其中包含 Location-Header 中 blob 的 url

例子：

客户端请求[http://myservice.cloudapp.net/blobs/somefile.ext](http://myservice.cloudapp.net/blobs/somefile.ext)并验证访问资源。然后他将被重定向到[http://mystorage.blob.core.windows.net/container/somefile.ext?SHARED_ACCESS_SIGNATURE](http://mystorage.blob.core.windows.net/container/somefile.ext?SHARED_ACCESS_SIGNATURE)。该链接仅对该客户可用几分钟。

# google-maps-api-3 - 搜索特定邮政编码附近的医院和诊所

> ID：15339656
> 
> 赞同：0
> 
> 时间：2013-03-11T13:19:30.517
> 
> 标签：google-maps-api-3

我想知道一种在密码周围特定半径内搜索医院或诊所的方法。我该如何解决这个问题并将其集成到我的网站中？我将第一次使用 google maps api，所以请尝试使用简单的术语。

好的，所以我设法做了这么多

```
<script type="text/javascript">
  var map;
  var infowindow;
  var geocoder;
  var lat;
  var lng;
  var custom;

  function initialize() {

    geocoder = new google.maps.Geocoder();
      var address = "Mumbai 400004";
      geocoder.geocode({ 'address': address}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
          lat = results[0].geometry.location.lat();
          lng = results[0].geometry.location.lng();
          custom = new google.maps.LatLng(lat, lng);
          map.setCenter(custom);    
        }
      });

        var mapOptions = {
        zoom: 12,
        center: custom,
        mapTypeId: google.maps.MapTypeId.ROADMAP
      }

    map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

    var request = {
      location: custom,
      radius: 500,
      types: ['hospital']
    };

    infowindow = new google.maps.InfoWindow();
    var service = new google.maps.places.PlacesService(map);
    service.nearbySearch(request, callback);
  }

  function callback(results, status) {
    if (status == google.maps.places.PlacesServiceStatus.OK) {
      for (var i = 0; i < results.length; i++) {
        createMarker(results[i]);
      }
    }
  }

  function createMarker(place) {
    var placeLoc = place.geometry.location;
    var marker = new google.maps.Marker({
      map: map,
      position: place.geometry.location
    });

    google.maps.event.addListener(marker, 'click', function() {
      infowindow.setContent(place.name);
      infowindow.open(map, this);
    });
  }
</script> 
```

现在的问题是地图上没有显示医院的标记。我在这里犯了什么错误？谢谢您的帮助。

# c++ - 训练自定义 SVM 以在 OpenCV 中与 HOGDescriptor 一起使用

> ID：15339657
> 
> 赞同：4
> 
> 时间：2013-03-11T13:19:32.467
> 
> 标签：c++, opencv, svm

我正在尝试训练我自己的检测器以与 OpenCV::HOGDescriptor 一起使用，但我无法使现有的 HOGDescriptor 与我新训练的 SVM 一起工作。

我计算了正负训练图像的 HOG 特征，标记它们并使用 CvSVM 训练 SVM。我使用的参数是：

```
 CvSVMParams params;
    params.svm_type =CvSVM::EPS_SVR;
    params.kernel_type = CvSVM::LINEAR;
    params.C = 0.01;
    params.p = 0.5; 
```

然后我计算支持向量的原始形式，这样我只得到一个向量而不是多个向量，并使用 HOGDescriptor.setSVMDetector(vector); 设置计算的支持向量；

[这是原始形式](http://en.wikipedia.org/wiki/Support_vector_machine#Primal_form)

当我使用 CvSVM.predict() 时，我能够使用 SVM 正确分类对象，但是 HOGDescriptor.detect() 或 detectMultiScale() 总是返回很多正匹配并且不能给出准确的预测。

CvSVM.predict() 使用原始支持向量进行分类，因此我计算原始形式的方式可能有问题。

有没有人训练过自己的探测器，可以为我指明正确的方向？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-14T23:11:24.263

我写了一个 CvSVM 的子类来在线性 svm 训练后提取原始形式。正样本标记为 1，负样本标记为 -1。奇怪的是，为了从 HogDescriptor 获得正确的结果，我必须在 alpha 前面加上负号并保持 rho 的符号不变。

线性支持向量机.h

```
#ifndef LINEAR_SVM_H_
#define LINEAR_SVM_H_
#include <opencv2/core/core.hpp>
#include <opencv2/ml/ml.hpp>

class LinearSVM: public CvSVM {
public:
  void getSupportVector(std::vector<float>& support_vector) const;
};  

#endif /* LINEAR_SVM_H_ */ 
```

线性支持向量机.cc

```
#include "linear_svm.h"    
void LinearSVM::getSupportVector(std::vector<float>& support_vector) const {

    int sv_count = get_support_vector_count();
    const CvSVMDecisionFunc* df = decision_func;
    const double* alphas = df[0].alpha;
    double rho = df[0].rho;
    int var_count = get_var_count();
    support_vector.resize(var_count, 0);
    for (unsigned int r = 0; r < (unsigned)sv_count; r++) {
      float myalpha = alphas[r];
      const float* v = get_support_vector(r);
      for (int j = 0; j < var_count; j++,v++) {
        support_vector[j] += (-myalpha) * (*v);
      }
    }
    support_vector.push_back(rho);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T10:42:33.157

我正在努力解决同样的问题。搜索论坛我发现，无法使用 CvSVM 训练检测器（我不知道原因）。我使用 LIBSVM 来训练检测器。以下是为 HOGDescriptor.setSVMDetector(w) 提取检测器的代码：有关数据详细信息，请参阅 LIBSVM 文档/标题。我用 C++ 完成了所有的训练，将 LIBSVM 训练数据从 CV 填充到 LIBSVM；下面的代码提取了 cv::HOGDescriptor 所需的检测器向量。w参数为`std::vector<float> w`

```
 const double * const *sv_coef = model.sv_coef;
const svm_node * const *SV = model.SV;
int l = model.l;
model.label;

const svm_node* p_tmp = SV[0];
int len = 0;
while( p_tmp->index != -1 )
{
    len++;
    p_tmp++;
}
w.resize( len+1 );

for( int i=0; i<l; i++)
{
    double svcoef = sv_coef[0][i];
    const svm_node* p = SV[i];
    while( p->index != -1 )
    {
        w[p->index-1] += float(svcoef * p->value);
        p++;
    }
}
w[len] = float(-model.rho[0]); 
```

希望这可以帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T01:25:00.547

从我在 Dalal 关于 HOG 检测器的论文中读到的内容，他建议要消除误报，我们需要重新训练我们的模型。重新训练是通过应用初步模型（您的模型会产生大量误报）完成的，然后检测所有负样本图像中的对象。所有返回的矩形肯定会误报。

然后，将所有这些误报添加到您的负样本图像（负数据集）中，再次进行训练。正如论文中所建议的那样，由此产生的模型将返回更少的误报。

不幸的是，我尝试了（重新训练），但结果模型无法识别任何东西，即使是正图像样本也是如此。但我认为值得一试，因为这是发明者关于 HOG 检测器的论文中所建议的

# three.js - 两个 collada 对象碰撞

> ID：15339660
> 
> 赞同：0
> 
> 时间：2013-03-11T13:19:38.193
> 
> 标签：three.js, collision-detection, raytracing, intersect, collada

我正在尝试使用 Ray intersect 来确定 2 collada 对象是否发生碰撞。但到目前为止没有成功:(

我的代码[http://jsfiddle.net/XqQzF/](http://jsfiddle.net/XqQzF/)

```
 object.updateMatrix();

        // ray
        var f_vector = new THREE.Vector3( 0, 0, -1 );
        var b_vector = new THREE.Vector3( 0, 0, 1 );
        var l_vector = new THREE.Vector3( -1, 0, 0 );
        var r_vector = new THREE.Vector3( 1, 0, 0 ); 
```

每次我使用它从最新的 three.js 修订版中删除的东西时。你能在路上帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:52:58.883

我最近更新了我的 three.js 示例集合以与最新版本（撰写本文时为 v56）兼容，其中包括一个碰撞检测示例。查看[http://stemkoski.github.com/Three.js/Collision-Detection.html](http://stemkoski.github.com/Three.js/Collision-Detection.html)（有关说明，请参见[http://stemkoski.github.com/Three.js/#collision-detection](http://stemkoski.github.com/Three.js/#collision-detection)）。

您的情况的主要区别是选择模型的中心点作为光线的原点，并选择模型的一组顶点作为光线的端点，因为光线用于碰撞检测。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-04T18:06:00.580

@Lee Stemkoski 答案是好的，当我们不使用 collada 数据时。首先，我知道我们需要分钟。2 网格对象。所以我从 collada 对象中获取了所有 Mesh 对象。我写了两个脚本 - 首先尝试碰撞 2 个 collada 对象。第二次尝试将 collada 对象与墙壁（简单网格）碰撞。在这两种情况下，脚本都无法识别碰撞。那我应该怎么写呢？最后，我尝试在 collada 对象上检测鼠标。这不是关于这个话题，而是类似的问题，所以我写在这里。Dae 文件由 SketchUp 生成。

两个 collada 对象的代码：

```
 var container;
 var meshs = [];
 var camera, scene, renderer, raycaster;
 var controls;
 var mouse = new THREE.Vector2();
 var dae, dae2;
 var collidableMeshList = [];
 var clock = new THREE.Clock();
 var keyboard = new THREEx.KeyboardState();

 $(document).ready(function() {
     init();
     animate();
 });

 function init() {

     container = document.createElement('div');
     $('.container').append(container);

     camera = new THREE.PerspectiveCamera(45, 500 / 500, 1, 1000);
     group = new THREE.Group();

     scene = new THREE.Scene();

     scene.add(camera);

     camera.position.set(10 * 10, 12 * 10, 16 * 10);

     camera.lookAt(scene.position);

     // Lights

     group.add(new THREE.AmbientLight(0x777777));

     var light = new THREE.DirectionalLight(0xdfebff, 1.25);
     light.position.set(300, 400, 50);
     light.position.multiplyScalar(1.3);

     light.castShadow = true;

     group.add(light);

     renderer = new THREE.WebGLRenderer({
         antialias: true
     });

     renderer.setClearColor(0xcccccc, 1);

     renderer.setSize(500, 500);

     container.appendChild(renderer.domElement);

     controls = new THREE.OrbitControls(camera, renderer.domElement);

     var loader = new THREE.ColladaLoader();
     loader.options.convertUpAxis = true;
     loader.load('./sample.dae', loadDae);

     function loadDae(collada) {
         dae = collada.scene;

         dae.scale.x = 0.5;
         dae.scale.y = 0.3;
         dae.scale.z = 0.3;
         dae.updateMatrix();

         group.add(dae);
     }

     var wallGeometry = new THREE.CubeGeometry(10, 10, 20, 1, 1, 1);
     var wallMaterial = new THREE.MeshBasicMaterial({
         color: 0x8888ff
     });
     var wireMaterial = new THREE.MeshBasicMaterial({
         color: 0x000000,
         wireframe: true
     });

     loader = new THREE.ColladaLoader();
     loader.options.convertUpAxis = true;
     loader.load('./sample.dae', loadDae2);

     function loadDae2(collada) {
         dae2 = collada.scene;

         dae2.scale.x = 0.5;
         dae2.scale.y = 0.3;
         dae2.scale.z = 0.3;
         dae2.updateMatrix();

         dae2.position.set(-40, 0, 0);

         dae2.traverse(function(child) {
             if (child instanceof THREE.Mesh) {
                 collidableMeshList.push(child);
             }
         });
         group.add(dae2);
     }

     group.translateX(-20);
     scene.add(group);

     raycaster = new THREE.Raycaster();

     window.addEventListener('resize', onWindowResize, false);
     window.addEventListener('mousemove', onDocumentMouseMove, false);
 }

 function onDocumentMouseMove(event) {

     event.preventDefault();

     mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
     mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;

 }

 function onWindowResize() {

     camera.aspect = 500 / 500;
     camera.updateProjectionMatrix();

     renderer.setSize(500, 500);
 }

 function update() {
     var delta = clock.getDelta();
     var moveDistance = 200 * delta;
     var rotateAngle = Math.PI / 2 * delta;

     if (keyboard.pressed("A"))
         dae.rotation.y += rotateAngle;
     if (keyboard.pressed("D"))
         dae.rotation.y -= rotateAngle;

     if (keyboard.pressed("left"))
         dae.translateX(-moveDistance);
     if (keyboard.pressed("right"))
         dae.translateX(moveDistance);
     if (keyboard.pressed("up"))
         dae.translateZ(-moveDistance);
     if (keyboard.pressed("down"))
         dae.translateZ(moveDistance);

     meshs = [];
     if (typeof dae !== 'undefined') {
         dae.traverse(function(child) {
             if (child instanceof THREE.Mesh) {
                 meshs.push(child);
             }
         });
         $.each(meshs, function(number_mesh, mesh) {
             var originPoint = mesh.position.clone();

             for (var vertexIndex = 0; vertexIndex < mesh.geometry.vertices.length; vertexIndex++) {
                 var localVertex = mesh.geometry.vertices[vertexIndex].clone();
                 var globalVertex = localVertex.applyMatrix4(mesh.matrix);
                 var directionVector = globalVertex.sub(mesh.position);

                 var ray = new THREE.Raycaster(originPoint, directionVector.clone().normalize());
                 var collisionResults = ray.intersectObjects(collidableMeshList);
                 if (collisionResults.length > 0 && collisionResults[0].distance < directionVector.length()) {
                     console.log(" Hit ");
                 }
             }
         });
     }
     controls.update();
 }

 function animate() {

     requestAnimationFrame(animate);
     render();
     update();

 }

 function render() {

     renderer.render(scene, camera);

 } 
```

collada + 墙（网格）的代码：

```
var container;
var meshs = [];
var camera, scene, renderer, raycaster;
var controls;
var mouse = new THREE.Vector2();
var dae;
var collidableMeshList = [];
var clock = new THREE.Clock();
var keyboard = new THREEx.KeyboardState();

$(document).ready(function() {
    init();
    animate();
});

function init() {

    container = document.createElement('div');
    $('.container').append(container);

    camera = new THREE.PerspectiveCamera(45, 500 / 500, 1, 1000);
    group = new THREE.Group();

    scene = new THREE.Scene();

    scene.add(camera);

    camera.position.set(10 * 10, 12 * 10, 16 * 10);

    camera.lookAt(scene.position);

    // Lights

    group.add(new THREE.AmbientLight(0x777777));

    var light = new THREE.DirectionalLight(0xdfebff, 1.25);
    light.position.set(300, 400, 50);
    light.position.multiplyScalar(1.3);

    light.castShadow = true;

    group.add(light);

    renderer = new THREE.WebGLRenderer({
        antialias: true
    });

    renderer.setClearColor(0xcccccc, 1);

    renderer.setSize(500, 500);

    container.appendChild(renderer.domElement);

    controls = new THREE.OrbitControls(camera, renderer.domElement);

    var loader = new THREE.ColladaLoader();
    loader.options.convertUpAxis = true;
    loader.load('./sample.dae', loadDae);

    function loadDae(collada) {
        dae = collada.scene;

        dae.scale.x = 0.5;
        dae.scale.y = 0.3;
        dae.scale.z = 0.3;
        dae.updateMatrix();

        group.add(dae);
    }

    var wallGeometry = new THREE.CubeGeometry(10, 10, 20, 1, 1, 1);
    var wallMaterial = new THREE.MeshBasicMaterial({
        color: 0x8888ff
    });
    var wireMaterial = new THREE.MeshBasicMaterial({
        color: 0x000000,
        wireframe: true
    });

    var wall = new THREE.Mesh(wallGeometry, wallMaterial);
    wall.position.set(-40, 5, -10);
    group.add(wall);
    collidableMeshList.push(wall);
    var wall = new THREE.Mesh(wallGeometry, wireMaterial);
    wall.position.set(-40, 5, -10);
    group.add(wall);

    group.translateX(-20);
    scene.add(group);

    raycaster = new THREE.Raycaster();

    window.addEventListener('resize', onWindowResize, false);
    window.addEventListener('mousemove', onDocumentMouseMove, false);
}

function onDocumentMouseMove(event) {

    event.preventDefault();

    mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
    mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;

}

function onWindowResize() {

    camera.aspect = 500 / 500;
    camera.updateProjectionMatrix();

    renderer.setSize(500, 500);
}

function update() {
    var delta = clock.getDelta();
    var moveDistance = 200 * delta;
    var rotateAngle = Math.PI / 2 * delta;

    if (keyboard.pressed("A"))
        dae.rotation.y += rotateAngle;
    if (keyboard.pressed("D"))
        dae.rotation.y -= rotateAngle;

    if (keyboard.pressed("left"))
        dae.translateX(-moveDistance);
    if (keyboard.pressed("right"))
        dae.translateX(moveDistance);
    if (keyboard.pressed("up"))
        dae.translateZ(-moveDistance);
    if (keyboard.pressed("down"))
        dae.translateZ(moveDistance);

    meshs = [];
    if (typeof dae !== 'undefined') {
        dae.traverse(function(child) {
            if (child instanceof THREE.Mesh) {
                meshs.push(child);
            }
        });
        $.each(meshs, function(number_mesh, mesh) {
            var originPoint = mesh.position.clone();

            for (var vertexIndex = 0; vertexIndex < mesh.geometry.vertices.length; vertexIndex++) {
                var localVertex = mesh.geometry.vertices[vertexIndex].clone();
                var globalVertex = localVertex.applyMatrix4(mesh.matrix);
                var directionVector = globalVertex.sub(mesh.position);

                var ray = new THREE.Raycaster(originPoint, directionVector.clone().normalize());
                var collisionResults = ray.intersectObjects(collidableMeshList);
                if (collisionResults.length > 0 && collisionResults[0].distance < directionVector.length()) {
                    console.log(" Hit ");
                }
            }
        });
    }
    controls.update();
}

function animate() {

    requestAnimationFrame(animate);
    render();
    update();

}

function render() {

    renderer.render(scene, camera);

} 
```

检测 collada 对象上的鼠标。短代码版本：

```
var meshs = [],
    raycaster,
    mouse = new THREE.Vector2();
...
function init() {
    ...
    function loadDae(collada) {
        dae = collada.scene;
        dae.scale.x = 0.5;
        dae.scale.y = 0.3;
        dae.scale.z = 0.3;
        dae.updateMatrix();
        group.add(dae);
        dae.traverse(function(child) {
            if (child instanceof THREE.Mesh) {
                meshs.push(child);
            }
        });
    }

    var loader = new THREE.ColladaLoader();

    loader.options.convertUpAxis = true;
    loader.load('./sample.dae', loadDae);
    raycaster = new THREE.Raycaster();
    window.addEventListener('mousemove', onDocumentMouseMove, false);
    ...
}
...
function onDocumentMouseMove(event) {

    event.preventDefault();

    mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
    mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;

}

function render() {
    raycaster.setFromCamera(mouse, camera);

    if (group.children.length === 5) {
        var intersects = raycaster.intersectObjects(meshs);

        if (intersects.length > 0) {
            console.log(" Hit ");
        }
    }
    renderer.render(scene, camera);
}
... 
```

一般 - 是的，它有效，但会抛出一些 $meshs 错误。

> 类型错误：未定义不是对象（评估“O”）
> 
> > three.min.js:8304
> > cthree.min.js:3544
> > intersectObjectsthree.min.js:3609:144

为什么以及如何识别哪个网格对于 intersectObjects 是正确的，而哪个不是？

# android - 仅在绘制的圆圈或周边内绘制标记 Google Maps v2 Android

> ID：15339661
> 
> 赞同：0
> 
> 时间：2013-03-11T13:19:38.217
> 
> 标签：android, google-maps, google-maps-markers, geometry, area

基本上标题说明了一切。我不想像现在那样在地图上绘制数据库中的每个条目，而是想查询数据库并只绘制坐标落在用户当前位置周围绘制的圆圈内的条目，但是我不能很想知道怎么做。目前，我已经编写了代码，在地图上绘制用户当前位置以及存储在我的数据库中的所有条目的位置以及当前位置周围的圆圈（见下图）。根据我下面的图片，我只希望绘制圆圈内的三个标记。

![当前代码](../Images/6b429218e4371ebe7d731e6156282c2d.png)

有谁知道是否有任何方法可以检查存储在我的数据库中的纬度坐标是否在圆的区域内？或者，如果没有，任何人都可以提出任何使用类似想法的替代方案。

我正在考虑的另一种选择是使用正方形/矩形而不是圆形，这样我就可以简单地将条目的坐标与正方形/矩形的边界进行比较，但是我真的不知道这被视为多么可行Google Maps API 不支持这些形状。我还遇到了[LatLngBounds](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/LatLngBounds)类，它可能很有用，但我找不到任何使用它的示例代码。我怎么可能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:29:35.760

我相信这个圆有一个固定的半径和一个中心点。

所以，用这种方法来获取中心和一些 LatLng 之间的距离并设置一个条件

**距离 <= 半径**

```
public static String getDistance(LatLng ll_source, LatLng ll_destination,
        int unit) {

    int Radius = 6371;// radius of earth in Km

    double lat1 = ll_source.latitude;
    double lat2 = ll_destination.latitude;
    double lon1 = ll_source.longitude;
    double lon2 = ll_destination.longitude;
    double dLat = Math.toRadians(lat2 - lat1);
    double dLon = Math.toRadians(lon2 - lon1);
    double a = Math.sin(dLat / 2) * Math.sin(dLat / 2)
            + Math.cos(Math.toRadians(lat1))
            * Math.cos(Math.toRadians(lat2)) * Math.sin(dLon / 2)
            * Math.sin(dLon / 2);
    double c = 2 * Math.asin(Math.sqrt(a));
    double valueResult = Radius * c;
    double km = valueResult / 1;
    DecimalFormat newFormat = new DecimalFormat("####");
    Integer kmInDec = Integer.valueOf(newFormat.format(km));
    double meter = valueResult % 1000;
    Integer meterInDec = Integer.valueOf(newFormat.format(meter));
    DecimalFormat df = new DecimalFormat("#.#");
    return df.format(valueResult);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T22:08:51.070

Ok, I've figured out a solution using the LatLngBounds class I referred to in my question. What it does is:

1.  Creates a new rectangular perimeter around the user's current latitude and longitude co-ordinates (this example is roughly one square kilometer).
2.  It then checks if the perimeter contains the co-ordinates stored in the database.
3.  If it does, the marker is plotted on the map.

    ```
    public void getNearbyMarkers(){
        LatLngBounds perimeter = new LatLngBounds(new LatLng(currentLat - 0.004,
                currentLon - 0.004), new LatLng(currentLat + 0.004, currentLon + 0.004));

        if (perimeter.contains(LatlongFromDatabase)) {
            //Plot Marker on Map
        } else {
            Toast.makeText(getApplicationContext(), "Co-ordinates not in perimeter!", 8).show();
        }
    } 
    ```

# javascript - 根据文本框中重新排列的无序列表获取值

> ID：15339665
> 
> 赞同：1
> 
> 时间：2013-03-11T13:19:45.137
> 
> 标签：javascript, jquery

我想根据无序列表中列表项的顺序排列文本字段中的值。清单如下：-

```
<ul id="sort">
    <li>1</li>
    <li>2</li>
    <li>3</li>
    <li>4</li>
    <li>5</li>
</ul> 
```

我在`sortable()`上面提到的列表中使用了 Jquery UI 的功能。我需要在文本框值中复制相同的排列：-

```
<input type="text" value="" /> 
```

例如 - 如果列表重新排列为`3,2,5,4,1`，则文本框值应为`3,2,5,4,1`：-

```
<input type="text" value="3,2,5,4,1" /> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:34:18.783

```
$( "#sort li" ).each(function(){
   $("#idOfYourTextField").val( $("#idOfYourTextField").val()+ $(this).text() );
}); 
```

[http://jsfiddle.net/yRRLJ/1/](http://jsfiddle.net/yRRLJ/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:30:18.460

例如像这样：

```
$('#sort').sortable({
    update: function(e, ui) {
        var val = $(this).children().map(function() {
            return $(this).text();
        }).get().join();
        $('#text').val(val);
    }
}); 
```

[http://jsfiddle.net/wzsuH/1/](http://jsfiddle.net/wzsuH/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T13:31:15.990

使用 sortable 的停止事件来检查更改..`toArray`获取`<li>`列表位置的数组...并将其加入并附`,`加到输入

干得好..

**HTML**

```
<ul id="sort">
  <li id="1">1</li>
  <li id="2">2</li>
  <li id="3">3</li>
  <li id="4">4</li>
  <li id="5">5</li>
</ul> 
```

**jQuery**

```
 $('#sort').sortable({
  stop: function( event, ui ) {
   var sortedVal=$(this).sortable( "toArray" );
   var inputVal=sortedVal.join(',');
    $('#inputid').val(inputVal);
  }
}); 
```

[在这里工作小提琴](http://jsfiddle.net/bipen/v7NLD/)

# azure - MaxBufferPoolSize 和 MaxBufferSize？

> ID：15339666
> 
> 赞同：1
> 
> 时间：2013-03-11T13:19:47.560
> 
> 标签：azure

这是我在 Stack Overflow 上的第一篇文章，如果其中有任何不符合之处，请致歉。

**问题**

我开发了一个基于 Windows Azure 的站点（类似于 eBay）并将其托管在 Azure 平台上。我部署了多个启用 Azure 缓存的 Web 角色实例。直到上周一切都很好，但突然产品搜索页面在从 db 加载数据时开始冻结。它仅针对返回大量数据的特定类别挂起。

我在某处读到，如果我们期待大消息，我们应该启用 localCache 和 transportProperties。因此，我如下修改了 web.config 中的数据缓存项，但没有运气。这些类别的页面仍然挂起！

有人可以告诉我以下有什么问题并告诉我一些指示吗？

> ```
> <dataCacheClient name="default" channelOpenTimeout="20000" maxConnectionsToServer="4" requestTimeout="30000">
>   <localCache isEnabled="true" sync="TimeoutBased" ttlValue="300" objectCount="10000"/>
>   <clientNotification pollInterval="300" maxQueueLength="10000"/>
>   <transportProperties connectionBufferSize="64000" maxBufferPoolSize="5242880"
>                        maxBufferSize="1242880" maxOutputDelay="2" channelInitializationTimeout="60000"
>                        receiveTimeout="600000"/>
>   <hosts>
>     <host name="<<AZURE CACHE URL>>" cachePort="22233" />
>   </hosts>
> 
>   <securityProperties mode="Message">
>     <messageSecurity
>       authorizationInfo="<<KEY>>">
>     </messageSecurity>
>   </securityProperties>
> </dataCacheClient>
> 
> <dataCacheClient name="SslEndpoint" channelOpenTimeout="20000" maxConnectionsToServer="4" requestTimeout="30000">
>   <localCache isEnabled="true" sync="TimeoutBased" ttlValue="300" objectCount="10000"/>
>   <clientNotification pollInterval="300" maxQueueLength="10000"/>
>   <transportProperties connectionBufferSize="64000" maxBufferPoolSize="15242880"
>                        maxBufferSize="5242880" maxOutputDelay="2" channelInitializationTimeout="60000"
>                        receiveTimeout="600000"/>
>   <hosts>
>     <host name="<<AZURE CACHE URL>>" cachePort="22243" />
>   </hosts>
> 
>   <securityProperties mode="Message" sslEnabled="true">
>     <messageSecurity
>       authorizationInfo="<<KEY>>">
>     </messageSecurity>
>   </securityProperties>
> </dataCacheClient> 
> ```

**我的开发环境、** Azure SDK 1.8（10 月 12 日）、SQL Server 2008 R2、ASP.Net MVC 3

**更新**

今天我部署了一个关闭 CustomerErrors 的构建，看看它是否抛出任何异常，这就是我得到的。 ![在此处输入图像描述](../Images/767c7996c3d199a67726d98563f50421.png)

提前致谢

ND

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:44:47.153

我建议首先找出哪个组件真正导致您的间歇性减速。它是缓存还是 SQL Azure？

如果它确实是缓存，并且由于您使用的是 Azure 共享缓存（以前称为 Azure AppFabric 缓存）

我建议将专用缓存视为解决方案，而不是共享缓存。共享缓存的性能有时可能......不可预测，因为它是一个多租户服务并且数据通过网络传输。

# mysql - 重复记录需要 MYSQL UNION

> ID：15339672
> 
> 赞同：0
> 
> 时间：2013-03-11T13:20:00.690
> 
> 标签：mysql, sql, union

我有具有唯一记录的 DCHDR 表作为 DC_No 字段和 DCDTL，它是一个事务表，它具有不同产品和数量的重复 DC_Nos。

从下面的 MYSQL 行中，我可以加入，联合 2 个表，并且只有当 DCDTL 中的重复记录不相同时，结果才符合我的要求，

即，下面的示例记录在 DCDTL 中仅显示 1 条，第二条记录不显示。

示例：DCDTL 和数据中的字段 -

```
DC_Nos, Product_Desc, Nos, Qty  
111     Oxygen 99.99,  4,  10 
111     Oxygen 99.99,  4,  10 
```

我知道 UNIQUE 会删除表中的重复项，但有没有其他方法可以显示 DCDTL 表的相同记录。请建议。

```
 SELECT DC_No, DC_date, T.DC_Nos, T.Product_Desc,  T.Nos, T.Qty
    FROM DCHDR AS H
    LEFT JOIN DCDTL AS T ON H.DC_No = T.DC_Nos
    UNION
    SELECT DC_No, DC_date, T.DC_Nos, T.Product_Desc, T.Nos, T.Qty
    FROM DCHDR AS H
    RIGHT JOIN DCDTL AS T ON H.DC_No = T.DC_Nos 
```

以下是两个表格的样本数据和所需的结果：

DCHDR 表：

```
 DC_date     DC_Nos  
 2013-01-01  111
 2013-01-02  112
 2013-01-03  113 
```

DCDTL 表：

```
 DC_Nos, Product_Desc, Nos, Qty  
 111     Oxygen 99.99,  4,  10 
 111     Oxygen 99.99,  4,  10 
 111     Nitrogen,      9,  14
 112     Nitrogen,      8,  29
 113     Zero Air,      4,  15 
```

所需结果：

```
 DC_date     DC_Nos  Product_Desc, Nos, Qty
 2013-01-01  111     Oxygen 99.99,  4,  10
 2013-01-01  111     Oxygen 99.99,  4,  10
 2013-01-01  111     Nitrogen,      9,  14
 2013-01-02  112     Nitrogen,      8,  29
 2013-01-03  113     Zero Air,      4,  15 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:57:40.280

此查询将为您提供所需的结果 -

```
SELECT * FROM dchdr
  LEFT JOIN dcdtl -- or maybe INNER JOIN
    ON dchdr.DC_Nos = dcdtl.DC_Nos 
```

是你想要的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T13:21:27.597

为什么你需要知道什么时候可以`UNION`使用？`LEFT and RIGHT JOIN``INNER JOIN`

```
SELECT  a.DC_DATE, b.*
FROM    DCHDR a
        INNER JOIN DCDTL b
            ON a.DC_Nos = b.DC_Nos 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/44792/1)

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

# titanium - 为什么 Titanium 构建过程如此缓慢？

> ID：15339673
> 
> 赞同：5
> 
> 时间：2013-03-11T13:20:01.717
> 
> 标签：titanium, appcelerator, titanium-mobile, appcelerator-mobile

我有一台 2013 Retina MacBook pro，对 XCode 的构建速度感到惊讶。我可以在大约 2-3 秒内在模拟器中构建并运行一个相当大的 Objective-C 应用程序。

在为 iPhone 构建和运行较小的 Titanium 应用程序时，大约需要 15 秒，我想知道为什么。在控制台中，构建过程确实很快，但应用程序在“Invoking xcodebuild”上挂了大约 10 秒

```
$ titanium build -p ios
Titanium Command-Line Interface, CLI version 3.0.24, Titanium SDK version 3.0.2.v20130206164716
Copyright (c) 2012-2013, Appcelerator, Inc.  All Rights Reserved.

Please report bugs to http://jira.appcelerator.org/

[INFO]  Build type: development
[INFO]  Building for target: simulator
[INFO]  Building using iOS SDK: 6.1
[INFO]  Building for iOS iPhone Simulator: 6.1
[INFO]  Building for device family: iphone
[INFO]  Minimum iOS version: 4.3
[INFO]  Debugging disabled
[INFO]  Initiating prepare phase
[INFO]  Copying custom Info.plist from project directory
[INFO]  Forcing rebuild: custom Info.plist CFBundleIdentifier not equal to tiapp.xml <id>
[INFO]  No Titanium Modules required, continuing
[INFO]  Cleaning old build directory
[INFO]  Performing full rebuild
[INFO]  Copying Xcode iOS files
[INFO]  Creating Xcode project directory: .../build/iphone/MyProject.xcodeproj
[INFO]  Writing Xcode project data file: Titanium.xcodeproj/project.pbxproj
[INFO]  Writing Xcode project configuration: project.xcconfig
[INFO]  Writing Xcode module configuration: module.xcconfig
[INFO]  Creating symlinks for simulator build
[INFO]  Forcing rebuild: ApplicationDefaults.m has changed since last build
[INFO]  Writing properties to ApplicationDefaults.m
[INFO]  No module resources to copy
[INFO]  No CommonJS modules to copy
[INFO]  Invoking xcodebuild 
```

我能做些什么来加快速度吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T14:44:26.417

我得到了导致我的[Appcelerator QA Question 问题解决的提示](http://developer.appcelerator.com/question/149427/why-is-the-titanium-build-process-so-slow)

日志中的这一行暗示了每次完整构建的原因：

```
Forcing rebuild: custom Info.plist CFBundleIdentifier not equal to tiapp.xml <id> 
```

我的项目中有一个自定义 Info.plist，每次都复制到 XCode 项目中。我已将`tiapp.xml` `<id>`属性更改为相同，`CFBundleIdentifier`现在构建在不到 4 秒的时间内完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T06:07:25.807

实际上在objective-c中，您可以直接运行需要2-3秒的应用程序，但在

钛首先将javascript转换为objective-c，然后将此objective-c转换为本机应用程序，因此需要一些时间..但是一旦您编译了应用程序。第二次运行不会花费太多时间，依此类推。因为一旦构建已经创建。它只是在构建和运行中进行很少的更改。除了第一次运行其他运行需要更少的时间..但有时可能需要尽管 。. 我们无法估计时间

# jquery - 图片库动画

> ID：15339679
> 
> 赞同：0
> 
> 时间：2013-03-11T13:20:12.370
> 
> 标签：jquery, gallery, image-gallery

我目前正在制作一个视频缩略图库，其中包含两行 5 张图片，总共 10 张图片。功能是用户单击视频拇指，然后会发生类似动画的 ios 文件夹，并且在打开的区域内是带有一些信息的视频。我目前有一半在工作，但我很难弄清楚底行的功能。我想当用户单击第二行视频拇指时，该区域会在视频上方打开，但问题是底部不在视野范围内，我试图弄清楚如何向上移动底部视频窗口如果可能，您单击底行图像之一。这是我到目前为止所拥有的链接：http://jsfiddle.net/jsavage/Vnya7/33/[问题]。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:40:30.467

动画时看不到底行的原因是因为`.container`设置高度为 410px 并且溢出设置为隐藏。删除这些将解决该问题。这是一个更新的小提琴[http://jsfiddle.net/yfcdD/](http://jsfiddle.net/yfcdD/)

# sql - 选择两个日期之间的记录

> ID：15339683
> 
> 赞同：-4
> 
> 时间：2013-03-11T13:20:19.823
> 
> 标签：sql, sql-server, sql-server-2005

Ive 列 CREATEDDATE (DATETIME) 我需要查找两个日期之间的所有行 $startDate $endDate 格式 ('d/m/Y') 吗？

```
SELECT * FROM TABLE 
 WHERE CREATEDDATE >= CONVERT(DATETIME, $startDate, 103)
 AND CREATEDDATE <= CONVERT(DATETIME, $endDate, 103) 
```

[http://sqlfiddle.com/#!3/b0478/5](http://sqlfiddle.com/#!3/b0478/5)问题出在哪里？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T13:22:35.573

这很简单，可以通过谷歌搜索找到..
您应该在提问之前先谷歌..

```
Select * From Tbl where CREATEDDATE between $date1 and  $date2 
```

如果 $date1 是`varchar`那么你必须使用`CONVERT(DATETIME, $date1, 103)`(for 'd/m/y')
对于 sql 中的日期时间转换，你可以参考[这个链接..](http://www.sqlusa.com/bestpractices/datetimeconversion/)

这是解决方案：

[更新的小提琴](http://sqlfiddle.com/#!3/b0478/11)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T15:16:46.553

sqlfiddle 中的真正问题是您在变量声明中将字符串转换为日期，但是 sql 语句：

```
declare @FromDate datetime = '11/03/2013'  --here a type casting!!
declare @ToDate datetime = '12/03/2013' 
```

那么这没有效果：

```
xCreatedDate < convert(datetime,@ToDate,103)  --@toDate is yet a date!! 
```

要修复，请在变量声明中将日期时间更改为日期：

```
declare @FromDate varchar(10) = '11/03/2013'  --here without casting!!
declare @ToDate varchar(10) = '12/03/2013' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T13:24:23.093

```
select CREATEDDATE from table where CREATEDDATE BETWEEN $date1 AND $date2 
```

或者你可以使用

```
select CREATEDDATE from table where CREATEDDATE > $date1 AND CREATEDDATE < $date2 
```

# html - html/css：水平列表中的空白/折叠容器

> ID：15339684
> 
> 赞同：0
> 
> 时间：2013-03-11T13:20:20.763
> 
> 标签：html, css, list

我正在尝试为我的网站创建一个水平菜单。这并不难，但我遇到了两个问题，这阻碍了我的设计。

我可以通过两种方式做到这一点：

1）。通过设置

```
#menu li { 
display: inline-block;
} 
```

就像我在这里所做的那样：http: [//jsfiddle.net/l0ner/HPpgG/](http://jsfiddle.net/l0ner/HPpgG/)。

它可以工作并且看起来像我想要的，但是每个元素之间都有一个空白区域，这破坏了设计。我可以通过将所有列表元素放在一行中来删除空间，但这并不是一个优雅的解决方案。我知道我可以将`<ul>`字体大小设置为 0，然后将其恢复，`<li>`但对我来说这感觉太脏了，我想保持 css 的“魔法”最小化。

如何删除这些空格？

2）。通过设置

```
#menu li {
display: block;
float: left;
} 
```

就像我在这里做的那样：http: [//jsfiddle.net/l0ner/HPpgG/1/](http://jsfiddle.net/l0ner/HPpgG/1/)

但是像这样`<div>`容器崩溃了，我失去了菜单的白色背景，这使得整个事情变得不可读。

如何使容器未折叠？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:23:28.323

这是工作的[jsfiddle](http://jsfiddle.net/HPpgG/5/)

```
#menu ul {
    margin: 0;
    padding: 0;
    overflow:auto;
}
#menu li {
    float: left;
    list-style:none;
} 
```

您需要将 to 的溢出设置`ul`为`auto`或`hidden`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:24:33.833

对于您的第一个示例，元素之间的空白实际上是由 HTML 中的空白引起的 - 您的和标记`li`之间的换行符。如果您删除它，空白将消失。`</li>``<li>`

或者，对于您的第二个示例，您可以拉伸父元素以“清除”浮动元素。有几种方法可以做到这一点（谷歌'clearfix'有几个例子），但最简单的方法是`overflow: hidden`在父元素上使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T13:28:34.557

`<div>`只要让你的隐藏“溢出” 。

```
#menu {
    background: #fff;
    color: #000;
    overflow:hidden;
} 
```

[在这里摆弄](http://jsfiddle.net/HPpgG/8/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T13:29:00.097

您可以使用伪元素在`<ul>`没有额外标记的情况下进行清除修复

[jsFiddle](http://jsfiddle.net/Tyriar/dNZyR/)

```
#menu ul:after {
    clear:both;
    content:"";
    display:block;
} 
```

# php - RegEx 验证用户名

> ID：15339686
> 
> 赞同：1
> 
> 时间：2013-03-11T13:20:22.310
> 
> 标签：php, regex

我在正则表达式方面不是很好，似乎不能很好地理解它们。

我正在寻找一个正则表达式，它将匹配并允许以下字符串作为用户名，具有以下条件：

*   用户名可以：**以数字或字母开头**
*   用户名可以包含特殊字符：**点、破折号、下划线**
*   用户名必须在此范围内：**从 3 个字符到 32 个字符。**
*   用户名中的字母数字字符可以是：**小写**和**大写**
*   不能包含空格

几乎类似于 Twitter 和 Facebook 的用户名模式。

请帮我。谢谢你。

FWI：我试过这个：`/^(?=.{1,15}$)[a-zA-Z][a-zA-Z0-9]*(?: [a-zA-Z0-9]+)*$/`- 这不满足我的条件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T13:23:41.223

试试这个

```
^[a-zA-Z0-9][a-zA-Z0-9\._-]{2,31}$ 
```

这导致 php 代码

```
if (preg_match('~^[a-zA-Z0-9][a-zA-Z0-9\._-]{2,31}$~', $username) {
    //do something
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T13:24:45.833

以数字或字母开头

```
[a-zA-Z0-9] 
```

可以包含如上加点、破折号和下划线

```
[a-zA-Z0-9._-] 
```

一起

```
[a-zA-Z0-9][a-zA-Z0-9._-]{2, 31} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T14:40:14.330

**试试这个，这在每个注册表单中都对我有用**

```
//username Validation
var usernameRegex = /^[a-zA-Z0-9\s\[\]\.\-#']*$/i;
var username=document.getElementById('username');
if(username.value==""){
document.getElementById('lblusername').innerHTML="Username Required!";
username.focus();
return false;
}   
else if(usernameRegex.test(username.value)== false) 
{
document.getElementById('lblusername').innerHTML="Allow Alphanumeric Only! (E.g Demo123)";
username.focus();
return false;
}
else
{
document.getElementById('lblusername').innerHTML="";
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T13:23:51.263

尝试这个：

```
^[0-9a-zA-Z][0-9a-zA-Z\-\._]{2,31}$ 
```

# c++ - 为什么这段代码（几乎与 MSDN 中的代码相同）不起作用？

> ID：15339687
> 
> 赞同：-1
> 
> 时间：2013-03-11T13:20:22.670
> 
> 标签：c++, oop, msdn, graphic, direct2d

我留下了一些//评论以帮助您解决问题

我有 Main.cpp

```
int WINAPI WinMain(HINSTANCE hInst, HINSTANCE hPrevInst, LPSTR lpCmdLine, int nShowCmd)
{
    Game game;

    game.Initialize(hInst);
    game.MainMenu();

    while(GetMessage(&msg,NULL,0,0))
    {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }

    return 0;
} 
```

游戏.h

```
#pragma once

#define WIN32_LEAN_AND_MEAN

/*Various includes*/

template<class Interface>
inline void SafeRelease(Interface** ppInterfaceToRelease)
{
    if (*ppInterfaceToRelease != NULL)
    {
        (*ppInterfaceToRelease)->Release();

        (*ppInterfaceToRelease) = NULL;
    }
}

class Game{
public:
    Game();
    ~Game();

    HRESULT Initialize(HINSTANCE);

    void MainMenu();

    void OnResize(UINT width, UINT height);

    void OnRender();

private:
    static LRESULT CALLBACK WinProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam);

private:
    HWND m_hWnd;
    ID2D1Factory* pD2DFactory;
    ID2D1HwndRenderTarget* pRT;

}; 
```

和游戏.cpp

```
#include "Game.h"
#include <comdef.h>

Game::Game() :
    pD2DFactory(NULL),
    pRT(NULL)
{
}

Game::~Game()
{
    SafeRelease(&pD2DFactory);
    SafeRelease(&pRT);
}

HRESULT Game::Initialize(HINSTANCE hInst)
{
    HRESULT hr;

    // Create factory
    hr = D2D1CreateFactory(D2D1_FACTORY_TYPE_SINGLE_THREADED, &pD2DFactory);

    // Create a window class
    WNDCLASSEX wClass;
    ZeroMemory(&wClass,sizeof(WNDCLASSEX));
    wClass.cbClsExtra=NULL;
    wClass.cbSize=sizeof(WNDCLASSEX);
    wClass.cbWndExtra=NULL;
    wClass.hbrBackground=(HBRUSH)COLOR_WINDOW;
    wClass.hCursor=LoadCursor(NULL,IDC_ARROW);
    wClass.hIcon=NULL;
    wClass.hIconSm=NULL;
    wClass.hInstance=hInst;
    wClass.lpfnWndProc=Game::WinProc;
    wClass.lpszClassName="Window Class";
    wClass.lpszMenuName=NULL;
    wClass.style=CS_HREDRAW|CS_VREDRAW;

    m_hWnd=CreateWindowEx(NULL,
            "Window Class",
            "Game", // Replace with gameName
            WS_OVERLAPPEDWINDOW|WS_MAXIMIZE,
            CW_USEDEFAULT,
            CW_USEDEFAULT,
            CW_USEDEFAULT,
            CW_USEDEFAULT,
            NULL,
            NULL,
            hInst,
            NULL);

    RECT rc;
    GetClientRect(m_hWnd,&rc);

    // Creates render target
    if(SUCCEEDED(hr))
    {
        pD2DFactory->CreateHwndRenderTarget(
        D2D1::RenderTargetProperties(),
        D2D1::HwndRenderTargetProperties(
                                        m_hWnd,
                                        D2D1::SizeU(
                                                rc.right - rc.left,
                                                rc.bottom - rc.top)),
                                        &pRT);
    }

    ShowWindow(m_hWnd,SW_MAXIMIZE); //When my program gets there, WinProc gets called with the WM_PAINT message. The problem then happens.
    UpdateWindow(m_hWnd);

    return hr;
}

void Game::OnRender()
{
    // The following code will eventually be deleted. It is left for test purpose only.
    HRESULT hr;

    RECT rc;
    GetClientRect(m_hWnd,&rc); // The error happens when my program gets to this line of code.

    ID2D1SolidColorBrush* pBlackBrush = NULL;
            pRT->CreateSolidColorBrush(
                D2D1::ColorF(D2D1::ColorF::White),
                &pBlackBrush);

            pRT->BeginDraw();

            pRT->DrawRectangle(
                D2D1::RectF(
                    rc.left + 100.0f,
                    rc.top + 100.0f,
                    rc.right - 100.0f,
                    rc.bottom - 100.0f),
                    pBlackBrush);

            hr = pRT->EndDraw();
}

LRESULT Game::WinProc(HWND hWnd, UINT msg, WPARAM wParam, LPARAM lParam)
{
    if(msg==WM_CREATE)
    {
        LPCREATESTRUCT pcs = (LPCREATESTRUCT)lParam;
            Game* pGame = (Game*)pcs->lpCreateParams;

            ::SetWindowLongPtrW(
                hWnd,
                GWLP_USERDATA,
                PtrToUlong(pGame)
                );
    }
    else
    {
        Game* pGame = reinterpret_cast<Game*>(static_cast<LONG_PTR>(
            ::GetWindowLongPtrW(
                hWnd,
                GWLP_USERDATA
                )));

        switch(msg)
        {

        case WM_PAINT:
            {
                pGame->OnRender();
                ValidateRect(hWnd, NULL);
            }
            break;

        case WM_SIZE:
            {
                UINT width = LOWORD(lParam);
                UINT height = HIWORD(lParam);
                pGame->OnResize(width, height); //OnResize is called here
            }
            break;

        case WM_DISPLAYCHANGE:
            {
                InvalidateRect(hWnd, NULL, FALSE);
            }
            break;

        case WM_DESTROY:
            {
                //SafeRelease(p2D2Factory);
                PostQuitMessage(0);
                return 0;
            }
            break;
        }
    }

        return DefWindowProc(hWnd,msg,wParam,lParam);
} 
```

这是我收到的例外：

Arena Clash client.exe 中 0x001f1666 处的未处理异常：0xC0000005：访问冲突读取位置 0x00000000。

我删除了一些代码以使其更易于阅读。发生的事情是我得到一个未处理的异常。由于我不明白的原因， m_hWnd 似乎没有任何价值。

我已经尝试了几个小时找到解决方案。实际上几乎一整天。我真的需要帮助。

实际上，我想要的是在调整大小和类似更改时重绘我的图像。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T13:33:01.190

您将`lpParam`参数（即最后一个）的 NULL 传递给`CreateWindowEx`.

然后，在 中`WinProc`，你说

```
Game* pGame = (Game*)pcs->lpCreateParams;
::SetWindowLongPtrW(
            hWnd,
            GWLP_USERDATA,
            PtrToUlong(pGame)
            ); 
```

因此，您也需要将用户数据指针设置为 NULL。

你应该改为传递`this`给`CreateWindowEx`。

# django - 如何在 Django 1.5 中解决有关 localflavor 的 Django South 问题？

> ID：15339690
> 
> 赞同：10
> 
> 时间：2013-03-11T13:20:43.260
> 
> 标签：django, django-south, django-localflavor

我正在开始一个新项目，我正在使用 Django 1.5。我发现本地风味的东西已从 Django 1.5 中删除，现在是一个单独的可安装包。所以我安装了它。在我的 models.py 中，我正在导入美国本地风味以获取我的州：

```
from django_localflavor_us.models import USStateField 
```

在我的模型中，我有这个字段：

```
state = USStateField(default='VA') 
```

当我尝试使用 South 运行迁移时，我现在收到以下消息：

！无法冻结字段“playerstats.location.state”！（这个字段有类 django_localflavor_us.models.USStateField）

！南方不能自省一些领域；这可能是因为它们是定制的！字段。如果它们在 0.6 或更低版本中工作，这是因为我们删除了 ! 模型解析器（它经常破坏东西）。！要解决此问题，请阅读[http://south.aeracode.org/wiki/MyFieldsDontWork](http://south.aeracode.org/wiki/MyFieldsDontWork)

我通读了 wiki 文章，但我发现它非常冗长和复杂。我的 USStateField 现在在 1.5 中不被视为自定义字段吗？有没有其他人在 1.5 中遇到过这个问题？你是怎么解决的？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-12-27T12:38:46.037

从 django-localflavor 版本 1.0 开始，只需将“localflavor”添加到您`INSTALLED_APPS`的文件中即可让 South 正确选择它。 [https://django-localflavor.readthedocs.org/en/latest/?highlight=south#installation](https://django-localflavor.readthedocs.org/en/latest/?highlight=south#installation)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-11T13:24:51.850

您是否尝试过添加自省规则？

```
add_introspection_rules([], ["^django_localflavor_us\.models\.USStateField"]) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-11T22:32:02.753

我不得不调整 Hedde van der Heide 的解决方案才能让我的工作。它看起来像这样：

`add_introspection_rules([], ["^localflavor\.us\.models\.USStateField"])`

# c - 在 x86-64 中返回指针的未声明函数导致无效的指针扩展

> ID：15339694
> 
> 赞同：0
> 
> 时间：2013-03-11T13:20:59.780
> 
> 标签：c, pointers, size, x86-64, expansion

我只花了半天的时间在 x86-64 代码中计算出一个微妙的崩溃，所以这是对其他人的提醒——我还没有在其他地方看到过这种情况。

如果您在没有正确声明的情况下使用 libc 函数，gcc*将假定它返回 int*。例如**setlocale()**被假定为**int setlocale()**，在 EAX 中返回一个 32 位的 int 值。

尝试通过隐式或显式转换将此返回转换为指针，将强制通过符号扩展从 32 位转换为 64 位，即使被调用函数在 RAX 中返回了有效的 64 位指针值！例如

```
 char *p = setlocale(0, 0);      // bear with me for a second 
```

被编译为

```
 1c: b8 00 00 00 00          mov    $0x0,%eax
    21: e8 00 00 00 00          callq  26 <hard_locale+0x26>
    26: 48 98                   cltq   ;   <--- eax is expanded in rax 
```

GCC 甚至试图告诉你：

```
 warning: initialization makes pointer from integer without a cast 
```

如果您添加显式强制转换，警告将更改为，这表明问题：

```
 warning: cast to pointer from integer of different size 
```

如果幸运的话，什么都不会发生，但如果它恰好为内存中的向上指针返回一个大值，它就会搞砸了，如下所示：

```
 function returns in RAX: 0x07ffff7b9705e
    cltq considers EAX with negative sign: 0xf7b9705e
    now RAX is: 0xfffffffff7b9705e 
```

并且您的指针无效。

修复和解决方案：

*   始终使用正确的函数声明

*   **-Wall -Werror**在 x86-64 编译器中应该是默认的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T15:17:33.357

未声明的函数是**无效的 C**。只需添加`-Werror=implicit-function-declaration`，问题就会消失。您不需要将其他警告（主要是 sylistic 考虑）变成错误。

这是 GCC 拒绝无效 C 而没有任何误报的警告错误选项列表。它遗漏了一些东西（GCC 不支持捕捉），但它基本上是完整的：

*   `-Werror=implicit-function-declaration`
*   `-Werror=implicit-int`
*   `-Werror=pointer-sign`
*   `-Werror-pointer-arith`
*   `-Werror=return-type`
*   `-std=c99`（或`-std=c11`等，根据需要）
*   `-pedantic-errors`（可选；拒绝一些*有效*但不完全可移植的代码）

请注意，我最初也将`-Werror=sequence-point`and添加`-Werror=array-bounds`到列表中，但它们具有误报，因为它们不标记约束违规，仅标记运行时 UB。因此，只要调用 UB 的代码无法访问，包含此类警告的程序仍然可以是正确的程序（作为一个很好的例子，考虑一下分支`if (sizeof(int)==sizeof(long)) { ... } else { ... }`，例如未采用的分支根据结果调用 UB`sizeof`操作员）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T14:25:31.593

这是一个老笑话。我在这里描述了一个类似的情况：[A nice 64-bit error in C](http://www.viva64.com/en/b/0033/)。

为避免这些错误和其他错误，请阅读文章[“真实程序中 64 位错误示例集](http://www.viva64.com/en/a/0065/)”并使用[Viva64 规则](http://www.viva64.com/en/viva64-tool/)。

# mysql - MySQL 完全外部连接解决方 法

> ID：15339698
> 
> 赞同：0
> 
> 时间：2013-03-11T13:21:17.880
> 
> 标签：mysql

查询定义：
显示所有学生和所有教师，并列出同名的人。

我想包括具有相同名字的学生和老师。
它们是否重复多次都没关系。作为每个学生，教师将分别具有唯一的学生ID，员工ID。

数据：

```
Student Table: 
```

```
StudFirstName 
   David
   John 
```

员工表：

```
StfFirstName 
  David
  Arnold 
```

**预期结果：大卫**

我在互联网上搜索了**Mysql Full Outer Join Workaround**
**我发现了以下两种技术。**

**技巧1：使用Union All：** 

```
Select Students.StudFirstName
from Students
Left Outer Join Staff
On Students.StudFirstName = Staff.StfFirstName

Union all 

Select Students.StudFirstName 
from Students
Right Outer Join Staff
On Students.StudFirstName = Staff.StfFirstName

where Staff.StfFirstName is null; 
```

**技术 2：使用联合：** 

```
Select Students.StudFirstName
from Students
Left Outer Join Staff
On Students.StudFirstName = Staff.StfFirstName

Union 

Select Students.StudFirstName 
from Students
Right Outer Join Staff
On Students.StudFirstName = Staff.StfFirstName; 
```

**技术 3：但是我通过使用查询 3 得到了预期的结果：**

```
Select Students.StudFirstName
from Students,Staff
where Students.StudFirstName = Staff.StfFirstName; 
```

**我的问题：**
**如何使用技术 1 和 2 获得相同的结果？**

**如果它们都给出相同的结果，那么技术 1,2 和 3 之间有什么区别？什么时候应该使用哪种技术？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:29:03.090

好吧，前两个...对于您想要的（或似乎想要的）来说很复杂。

我认为这只是“请求”的表述不正确，或者结果不是您所显示的。

> 显示所有学生和所有老师，并列出同名的人

应该是“想要”的结果（如果你只想要“大卫”，你当然不想要“所有的学生和所有的老师”）

> 显示学生和教师之间常见的名字。

那么您的第三个查询就可以了，只需用更合适的语法重写即可

```
SELECT DISTINCT s.StudFirstName
FROM Students stu
INNER JOIN Staff sta
  ON stu.StudFirstName = sta.StfFirstName; 
```

或者

```
SELECT DISTINCT stu.StudFirstName
FROM Students stu
WHERE EXISTS (SELECT NULL
              FROM Staff sta
              WHERE stu.StudFirstName = sta.StfFirstName); 
```

**编辑** 使用 DISTINCT 以避免拥有 3 个大卫......如果您在学生中有 3 个大卫并且只想检索“一个”大卫。不清楚你的问题。也不清楚：如果您在 Staff 表中有 3 个 David，应该检索什么...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:36:27.390

知道什么`Union`和`Union ALL`做什么

**[请参阅此 SQL Fiddle](http://www.sqlfiddle.com/#!2/974786/4)**

**[通过技术 2 获得结果](http://www.sqlfiddle.com/#!2/c9f57/1)**

我真的怀疑您是否可以从**技术 1中获得****相同的结果**。

 **要获得不同的结果，请像这样编辑您的**第三个查询**：

```
Select distinct Students.StudFirstName
from Students,Staff
where Students.StudFirstName = Staff.StfFirstName; 
```

考虑 MySQL**

# servicebus - 使用 Rebus 发布/订阅持久消息

> ID：15339700
> 
> 赞同：3
> 
> 时间：2013-03-11T13:21:26.380
> 
> 标签：servicebus, rebus

我需要一种向未知数量的订阅者发布消息的方法。消息应该是持久的/持久的，并分为三个优先级（高、中和低）。其中一个订阅者只能处理有限的负载，并且一些消息更重要。首先处理高优先级的消息等。

我如何使用 Rebus 做到这一点？我想我需要每个订阅者三个队列？

在哪里可以找到具有持久队列和 MSMQ 的发布/订阅示例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T18:55:26.927

首先，一些信息：Rebus 喜欢使用持久队列、持久消息传递和保证交付。事实上，除非你主动选择退出，否则一切都是如此。因此，如果您设法使 pub/sub 与 Rebus 一起工作，它是持久的 :)

根据定义，发布适用于“未知数量的订阅者”——至少这是总线问题，而不是应用程序问题。

实际上，订阅者通过发出一个`SubscriptionMessage`（可以看作是订阅请求）来发起 pub/sub 对话，然后发布者发布一些事件（可以看作是“订阅回复”）。发布者的“总线部分”跟踪谁订阅了任何给定的事件类型。

到现在为止还挺好。

关于优先级，Rebus 没有开箱即用的方法来实现这一点。正如您所建议的，确保某些消息类型的最大延迟的一种方法是创建单独的端点，其输入队列不会被低优先级消息阻塞。

但是有一些关于如何配置 Rebus 的东西强烈建议在每个进程中只有一个输入队列，因此这可能意味着您应该创建订阅这些高优先级消息类型的单独进程。

我知道 MSMQ 支持某种消息优先级，所以我想*可以*通过`MsmqMessageQueue`了解某些标头来支持它（类似于快递和接收时间的实现方式 - 见[这里](https://github.com/mookid8000/Rebus/blob/master/src/Rebus/Transports/Msmq/RebusTransportMessageFormatter.cs#L63)） - 拉取请求很高兴接受并强烈鼓励:)

# css - position:absolute 之一 display:table-cell 元素导致 WebKit 呈现间隙

> ID：15339708
> 
> 赞同：3
> 
> 时间：2013-03-11T13:21:56.000
> 
> 标签：css, webkit, css-tables

我正在尝试构建一个水平菜单，将最后一项分开并定位正确，以便在最后一项和倒数第二项之间找到一个徽标。

![这就是最终的结果](../Images/56375ffd7ac53456b54cb26b4867ff9a.png)

Firefox、Opera (Presto) 甚至 Redmond (9.0+) 中的脏软件都像我预期的那样渲染它。但是 WebKit（Chrome 和 Safari 都呈现相同的内容）在倒数第二个项目之后占用了一些空间，而最后一个项目在没有`position: absolute`.

```
<header>Logo</header>
<nav>
    <ul>
        <li><a href="#">Home</a></li>
        <li><a href="#">Statistics</a></li>
        <li><a href="#">Data Management</a></li>
        <li><a href="#">Market Research</a></li>
        <li><a href="#">Web &amp; Apps</a></li>
        <li><a href="#">Contact</a></li>
    </ul>
</nav> 
```

我将列表显示为`table`和列表项显示为`table-cell`因为我希望菜单的左侧部分（第一个到倒数第二个项目，左到徽标）具有固定宽度，而项目采用其内容所需的宽度。文本可以更改为任何内容。到那里为止，一切都很好。但是，如果我给最后一项 a `display: block; position: absolute`，WebKit 会呈现该间隙（示例中为白色）。

![左：非 webkit； 右：webkit](../Images/b52af7ae56d351f72d73d3bacd94c508.png)

```
nav ul
{
    display: table;
    background: white; /* that's what you see in webkit */
}

nav ul li
{
    display: table-cell;
}

nav ul li:last-child
{
    display: block; /* "display: none;" works like I would expect */
    position: absolute;
} 
```

这是一个[小提琴](http://jsfiddle.net/3TUk8/)。

我不确定这是否是 WebKit 中的错误，因为在表格中绝对定位元素可能不是默认行为。另一方面，`display: none`像我期望的那样工作。在这两种情况下，空间消耗不应该都是 0 吗？

有人知道 WebKit 中的一个错误，或者有人知道如何防止这种差距吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T14:56:44.220

将倒数第二个元素“Web & Apps”设置为显示`block`而不是`table-cell`：

```
nav ul li:nth-last-child(2) 
{
    display: block;
} 
```

[显示块小提琴](http://jsfiddle.net/dCmaU/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T20:58:17.220

我已经将这个答案推给了其他人，并且经常得到“flexbox 尚未得到广泛支持”的回应。然而，它又来了。Webkit 行为不端的原因是在其实现中`display: table`，DOM 为语义声明的单元格保留空间。实现这一点的简单方法是简单地将这个元素分解成它自己的对象，就像你对徽标所做的那样。

***但是......*** 如果你想保持这些语义分组 - 你为什么不呢，它们都是内容，对吗？- 你总是可以使用 flexbox 模型来克服这个问题。

[这是一个显示其用途的小提琴。](http://jsfiddle.net/3TUk8/6/)

以下是我们更改的内容：

```
nav ul
{
    display: box;
    display: -webkit-flex;
    flex-direction: row;
    -webkit-justify-content: center;
    -webkit-align-items: center;
    -webkit-flex-direction: row;
    background: white; /* that's what you see in webkit */
    empty-cells: hide;
    table-layout: auto;
}

nav ul li
{
    flex: 1 1 auto;
    -webkit-flex: 1 1 auto;
} 
```

现在，您的项目正确地覆盖了背景，因为它不再将最后一个`li`视为真正的表格单元格并且仍在表格的范围内。Flexbox 提供灵活的布局来填充可用空间。人们通常将此视为[“布局的圣杯”](http://hacks.allizom.org/2010/04/the-css-3-flexible-box-model/comment-page-1/)问题的解决方案，但它的用途远不止于此。

所以，如果另一个“Flexbox 没有得到足够广泛的支持”的响应即将到来，我理解。但我会继续提出它作为我遇到的每一个问题的答案，因为支持每天都在变得更好*。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T13:41:46.633

一点 CSS 编辑，请看一下，如果这是你想要的，[Fiddle](http://jsfiddle.net/pconline2046/3TUk8/1/)

```
body
{
    position: relative;
    background: #bbbbbb;
    text-align: center;
    color: white;
}

header
{
    position: absolute;
    top: 10px;
    left: 630px;
    width: 80px;
    height: 60px;
    line-height: 60px;
    background: black;
    text-transform: uppercase;
}

nav
{
    position: absolute;
    top: 20px;
    left: 20px;
}

nav ul,
nav li
{
    list-style-type: none;
    margin: 0;
    padding: 0;
}

nav ul
{
    width: 200px;
}

nav ul li a
{
    display: block;
    padding: 1px;
    background: #0099ff;
    color: white;
    text-decoration: none;
}

nav ul li a:hover
{
    background: black;
}

nav li{
    margin-bottom: 5px;
    height: 25px;
    line-height:25px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T12:21:38.993

在使用绝对值时，与之相关/相关的每件事都必须是绝对像素。

我已经更新了小提琴，因为您的 nav + logo .header + .nav:last-child 不完全正确。

小提琴链接：http: [//jsfiddle.net/3TUk8/2/](http://jsfiddle.net/3TUk8/2/)

在其他情况下，您将不得不这样做

```
nav ul
{
    display: table;
    background: #bbbbbb; /* that's what you see in webkit and same as bg color will hide it :) */
    list-style: none;
} 
```

我希望这能解决你的问题:)

# java - 日期没有得到比较？

> ID：15339713
> 
> 赞同：0
> 
> 时间：2013-03-11T13:22:19.947
> 
> 标签：java, android, date, datetime, android-date

我正在比较我的 android 应用程序中的日期，但是对于我的相等日期，`compareTo`或者`equals`方法返回我的日期不相等。我已经调试过了，我可以看到我的两个对象都有相同的值。但有些如何它不起作用。以下是我这样做的方式：

```
public static boolean compareDates(long deliveryTime, Date date) throws ParseException {

    Date deliveryDate = convertLongToDate(deliveryTime);
    deliveryDate.setHours(0);
    deliveryDate.setMinutes(0);
    deliveryDate.setSeconds(0);

    if (deliveryDate.equals(date))
    {
        return true;
    }

    return false;
} 
```

我的`date`对象不包含`time`，因此我也将`deliverTime's`时间设置`0(zero)`为，以便两个对象可以具有相同的值。但它不起作用。任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:26:54.873

`deliveryTime`只是比较而`date.getTime()`不是转换`deliveryTime`为日期会不会更容易？

## 编辑

既然你没有提到你想忽略毫秒，你可以这样做：

```
(deliveryTime / 1000) == (date.getTime() / 1000) 
```

那应该去掉毫秒。或者，

```
Calendar c = Calendar.getInstance();
c.setTime(deliveryTime);
c.set(Calendar.MILLISECOND, 0);
//Clear out the other fields you don't care to compare
Date deliveryDate = c.getTime() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:41:27.363

我会`Date`从 中创建一个对象`deliveryTime`，然后比较小时、分钟和秒。代码如下。

```
public static boolean compareDates(long deliveryTime, Date date) {
  Date d = new Date(deliveryTime);
  return(d.getHours() == date.getHours() && d.getMinutes() == date.getMinutes() && d.getSeconds() == date.getSeconds());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T13:52:33.417

如果你 make`date`和`deliverydate`into `date objects`，那么你可以使用

```
date.compareTo(deliveryDate); 
```

这将返回：`0`如果日期相同，则大于 0 的值如果 date 比 更近`deliveryDate`，并且值小于 0 如果 date 早于`deliveryDate`。

要将您的日期放入`date format`，您可以使用以下内容：

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
        Date date = sdf.parse(date);
        Date deliveryDate = sdf.parse(deliveryTime); 
```

# php - 2 个模块的一个 sql 请求。Joomla

> ID：15339714
> 
> 赞同：0
> 
> 时间：2013-03-11T13:22:19.840
> 
> 标签：php, mysql, sql, joomla

我有两个模块，它们都使用相似的 SQL 值。例如两者都在获取用户头像、姓名、注册日期等。是否可以将一个模块 SQL 请求加载到另一个模块中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:52:19.007

这是可能的。通常的方法是将通用 SQL 代码放入帮助程序类中。调用此帮助程序类的第一个模块将实际运行查询，然后将结果存储在静态变量中。对该模块的第二次调用将只返回该静态变量的内容。您需要确保的是，第二次调用实际上是在要求相同的东西（例如，要求*相同*的头像，而不是不同的头像）。

该系统在整个 Joomla 本身中都使用。请注意，缓存大对象会增加内存需求，您应该将其限制为仅几条记录和列，并避免以这种方式缓存 TEXT 或 BLOB。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T08:38:21.973

这不是 Hazzit 考虑的替代品，只是一个扩展：所以你仍然会使用一个通用的助手。

在您的模块中，您可以构建缓存键：因此，如果您为两个模块构建相同的缓存键（基于用户 id 和自定义字符串），Joomla 不仅会在整个请求期间缓存它，而且直到缓存过期。

此外，如果查询拼写相同，它们也将被 mysql 缓存并且不会运行两次。

# maven - Maven 自定义 Archetype 生成器缺少源和资源

> ID：15339722
> 
> 赞同：1
> 
> 时间：2013-03-11T13:22:40.783
> 
> 标签：maven, maven-2, maven-3, m2e, maven-archetype

我们正在开发模块化应用程序，我们希望为每个 ERP 模块使用通用模板。创建自己的`archetype`灵感来自`maven`。最后，我们能够`repository`像通常能够通过自己的原型生成项目一样部署它。

1.  我们必须在哪里注册很多文件`archetype.xml`，这对我来说是断点。因为我们对手动注册大量文件不感兴趣，`archetype.xml`因为这很耗时。

2.  `archetype.xml`我可以注册的文件`sources`, `resources`, `testSources`, `testResources`. 在这种情况下，我如何注册另一个自定义目录？

3.  虽然`archetype-metadata.xml`我们注册了`fileSets`，`requiredProperties`但对生成项目没有影响。

部署到我检查的 maven 存储库原型 jar 文件后。以及在 jar 条目上找到的所有源资源和自定义目录。但是如果不注册它们，`archetype.xml`我们就无法将它们放入生成的项目中。在这种情况下，我们预期的解决方案如下：

1.  排序命令/正则表达式以复制/生成所有源和资源
2.  排序命令/正则表达式以复制/生成自定义目录的所有内容
3.  或`archetype.xml`特定目录/来源/资源的自动生成器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T04:56:04.480

如果您是 Maven 新手`archetype`。不用担心。我想建议您`archetype`从现有的 Maven 项目中创建您的`archetype`模板标准。删除不必要的文件和文件夹。只需通过 cli 转到您的项目目录。只需运行以下命令：

```
your-maven-project>mvn archetype:create-from-project
your-maven-project>cd target\generated-sources\archetype
...urces\archetype>mvn clean deploy 
```

不要怀疑`mvn archetype:create-from-project`它实际上是生成原型的神奇命令。您可以通过谷歌搜索自定义生成的原型作为您的需求。现在自己生成项目`archetype`

```
...urces\archetype>cd your-workspace-dir
your-workspace-dir>mvn archetype:generate -DarchetypeGroupId=<archetypeGroupId> -DarchetypeArtifactId=<archetypeArtifactId> -DarchetypeVersion=<archetypeVersion> 
```

就这样。享受你自己的`archetype`。

# mysql - SHOW PROCESSLIST 仅显示 20 个连接，而服务器 sais “有超过 'max_user_connections' 活动连接”

> ID：15339723
> 
> 赞同：0
> 
> 时间：2013-03-11T13:22:42.057
> 
> 标签：mysql, connection, processlist

我不是什么问题以及如何看待它：

SHOW PROCESSLIST 仅显示 20 个连接，而服务器 sais “有超过 'max_user_connections' 活动连接”，即 400。

这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:28:24.107

你确定错误提到了`max_user_connections`吗？这是每个 MySQL 用户的限制，而不是针对整个服务器，默认为 0，这意味着每个用户都可以使用所有可用的连接。`max_connections`指定 MySQL 一次可以接受的绝对连接数，这可能在您的服务器上设置为 400。

`SHOW PROCESSLIST`将始终向您显示所有活动连接。但是，您的客户可能会限制其输出。

您可以通过 SQL 命令检查服务器变量，`show variables like 'max%connections';`该命令将输出这两个设置：

```
mysql> show variables like 'max%connections';
+----------------------+-------+
| Variable_name        | Value |
+----------------------+-------+
| max_connections      | 300   |
| max_user_connections | 0     |
+----------------------+-------+
2 rows in set (0.00 sec) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:08:31.607

还要确保您拥有适当的[进程权限](http://dev.mysql.com/doc/refman/5.1/en/privileges-provided.html#priv_process)。如果您无权查看其他用户的进程，则显示进程列表不会显示他们

# xtext - 如何在生成器中使用脚本 xtext 名称

> ID：15339733
> 
> 赞同：2
> 
> 时间：2013-03-11T13:23:20.340
> 
> 标签：xtext, xtend

我想使用生成器中的脚本名称来创建相应的 java 文件。例如，如果我的脚本文件是“WordCount.script”，我想创建一个“WordCount.java”文件。我发现以前的版本通过“resource.className”公开了这个，但它不适用于 2.3.1。

```
override void doGenerate(...

   fsa.generateFile(magic_here + ".java", compile...) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-17T09:34:22.280

您可以使用 ECoreUtil2 访问资源的规范化 URI。例如;

```
import static extension org.eclipse.xtext.EcoreUtil2.*

....
override void doGenerate(Resource input...

    fsa.generateFile(input.normalizedURI.lastSegment + ".java", compile...) 
```

或者，如果你想要一个绝对路径，你可以去掉`lastSegment`. 您可能希望在生成之前从末尾删除文件名（例如“.mydsl”），例如：

```
 fsa.generateFile(input.normalizedURI.replace(".mydsl", ".java), compile... 
```

任何适合您的用例！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T00:49:57.100

这是一个例子：

```
 fsa.generateFile(
    "src"+"/"+"com"+"/"+"stackoverflow"+"/"+"magic"+"/"+ //package
    "more_magic"+".java", //class name
    compile...) 
```

该包将位于 src 文件夹中，并且将是 'com.stackoverflow.magic' 将文件导入项目后，您只会将其视为一个包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T13:43:28.230

资源具有封装文件名称的属性 URI。您可能希望访问它的#lastSegment 来计算Java 文件的名称。

# ruby - 从表中获取实体，其中方法在rails中等于true

> ID：15339736
> 
> 赞同：1
> 
> 时间：2013-03-11T13:23:26.410
> 
> 标签：ruby, ruby-on-rails-3

如果预定义的方法等于 true，我正在尝试从用户表中获取实体。

我的用户模型中有这个方法

```
def self.expert?
  return self.has_role? :domain_expert
end 
```

我正在尝试做这个查询

```
users = User.where(:expert? => true) 
```

错误

```
 no such column: users.expert? 
```

这个查询怎么做？

编辑：

我正在使用 rolify 宝石

在榜样

```
has_and_belongs_to_many :users, :join_table => :users_roles 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T13:50:17.237

如果您使用的是高于 3.2 的 Rolify gem 版本，那么它只是

```
User.with_role(:domain_expert) 
```

如果您按照此处所述设置 cancan 角色：[基于角色的授权](https://github.com/ryanb/cancan/wiki/Role-Based-Authorization)

然后你应该像这样查询

```
User.where(:role => :domain_expert) 
```

您还可以为此定义范围并将其称为 User.domain_experts

如果您在 3.2 版之前使用 Rolify gem 或制作单独的模型，如下所述：[单独的角色模型](https://github.com/ryanb/cancan/wiki/Separate-Role-Model)

然后你应该像这样查询

```
Role.where(:name => :domain_expert).users 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T14:04:31.240

查看 rolify gem 自述文件，有一个`with_role`范围

```
User.with_role(:domain_expert) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T14:08:46.853

最后我明白了:)。

我必须加入两个表（用户和角色）

```
User.joins(:roles).where("name = ?", "domain_expert") 
```

这解决了我的问题:)。

# c# - MVC：返回带有错误 URL 的视图

> ID：15339750
> 
> 赞同：0
> 
> 时间：2013-03-11T13:24:14.910
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

MVC 新手在这里。我有一个带有主视图（Index.cshtml）的 MVC3 项目。您可以从此视图转到 CreateRemark.cshtml 视图。您可以在此视图上创建和保存备注。在 POST 操作中，我有逻辑将数据保存到数据库，然后我想再次呈现索引视图。

我在我的操作 CreateRemark 结束时这样做：

```
Return View("Index"); 
```

我希望我的 URL 看起来像 localhost/ 或 localhost/Index。但它一直说 localhost/CreateRemark?id=123，而它实际上渲染了 Index 视图上的 html。虽然它呈现错误（我还没有完全调查，但它丢失了按钮中的所有图像并且分层网格错过了第二级），我想我可以通过确保将最终用户引导到索引视图来解决这个问题正确的 MVC 方式。我想我做错了。

顺便说一下，GET/POST 操作 Index 和 CreateRemark 都在同一个 Home 控制器中。我想我以后想要一个 RemarkController，但还没有这样做。对不起。

有人可以指出我正确的方向吗？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T13:27:43.013

您只是从同一控制器操作返回不同的视图，因此 URL 将保持不变。

如果您只是想让用户执行相同的操作，然后调用索引操作，请使用

```
 return RedirectToAction("Index"); 
```

[http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.redirecttoaction%28v=vs.108%29.aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.redirecttoaction%28v=vs.108%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T13:28:25.417

url 是*用户导航到的任何内容*。如果他们导航到该页面（我假设在“从这个视图中您可以转到...”位），那么**这就是 url**。

您提供的字符串`Return View("Index")`与 URL 没有任何关系；这只是告诉视图引擎使用哪个视图文件。此时您可以更改 URL 的唯一方法是将*重定向*返回到索引操作/路由：

```
return RedirectToAction("Index"); 
```

请注意，这将涉及对客户端的额外 http 请求。

# php - 从循环中预选

> ID：15339751
> 
> 赞同：0
> 
> 时间：2013-03-11T13:24:16.340
> 
> 标签：php, select, option

所以我做了这个汽车统计计算模块，在做一些计算后返回显示结果，然后在我的表单中显示我计算过的汽车作为预选。

为此，我在 php 中创建了一个函数，可以在我的 html 中使用：

```
function biler () {                         
    while($row = mysql_fetch_array($result)) {
       if ($row['reg'] == $_GET['bil']){
           $selected = 'selected="selected"';
       }                    
       echo '<option '.$selected.' value="'.$row['reg'].'">'.$row['reg'].'</option>';
    }
} 
```

运行函数的 HTML：

```
<form method="post" name="regnskab" action="regnskab_beregn.php">
   <select name="bil"><? biler(); ?></select>
</form> 
```

我的问题是没有预先选择汽车，因为它们都有选择语句：/

回报：

```
<select name="bil">
  <option selected="selected" value="OHO1241">OHO1241</option>
  <option selected="selected" value="QTX2314">QTX2314</option>
  <option selected="selected" value="QW20301">QW20301</option>
</select> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T13:33:27.423

您需要在使用后清除*$selected*变量，否则它将始终包含该值：

```
while($row = mysql_fetch_array($result)) {
   $selected = "";
   if ($row['reg'] == $_GET['bil']){
       $selected = 'selected="selected"';
   }                    
   echo '<option '.$selected.' value="'.$row['reg'].'">'.$row['reg'].'</option>';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:36:20.153

一旦你`$selected`的设置，它仍然存在。[我的例子](http://codepad.org/U9pHuoFG)

```
 function biler () {                         
        while($row = mysql_fetch_array($result)) {
           if ($row['reg'] == $_GET['bil']){
               $selected = 'selected="selected"';
           }          
           else
           {
               $selected = "";
           }          
           echo '<option '.$selected.' value="'.$row['reg'].'">'.$row['reg'].'</option>';
        }
    } 
```

# sql-server - 使用 SQL 在视图上创建唯一 GUID

> ID：15339756
> 
> 赞同：1
> 
> 时间：2013-03-11T13:24:26.407
> 
> 标签：sql-server, sql-server-2008, tsql

我需要为 MS Sql 表（没有 ID）创建一个视图，新视图必须包含一个唯一的 ID。目前我正在使用 ROW 编号和`stuff`函数来创建一个 Id。

不幸的是，有一张大桌子，结果是一些重复的 ID。

我相信问题可能在于`'72799568-6EF2-4C95-84E7-4953A6959C90'`我如何解决它？

```
CREATE VIEW viewWithId as
SELECT convert(uniqueidentifier,
       stuff('72799568-6EF2-4C95-84E7-4953A6959C90',1,len(rn),convert(varchar,rn))) [Id],
       T.[EventId], 
       T.[EventTitle]
FROM 
    ( 
        select  x.[EventId], 
                x.[EventTitle]
                ROW_NUMBER() over (order by x.EventId) rn
        FROM    dbo.A as x 
    ) T 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T13:37:49.587

出现重复的原因是因为第 1、12 和 127 行（通常是第 n、10*n+2 和 100*n+27 行）都返回相同的标识符。如果你需要一个`GUID`然后使用

```
CREATE VIEW viewWithId as
SELECT NEWID() [Id],
       T.[EventId], 
       T.[EventTitle]
FROM 
    ( 
        select  x.[EventId], 
                x.[EventTitle]
                ROW_NUMBER() over (order by x.EventId) rn
        FROM    dbo.A as x 
    ) T 
```

然而，问题是当您重新选择视图时，您会为每一行获得不同的 UUID。

如果您尝试从 Id 中“生成”一个 GUID，您将必须想出一个保证对于任何 Id 都是唯一的算法。另一种选择是从 0 开始并将 Id 添加到*末尾*：

```
SELECT convert(uniqueidentifier,
           stuff('72799568-6EF2-4C95-84E7-000000000000',
                 36-LEN(rn),
                 len(rn),
                 convert(varchar,rn)
                )
            ) [Id],
       T.[EventId], 
       T.[EventTitle]
FROM 
    ( 
        select  x.[EventId], 
                x.[EventTitle]
                ROW_NUMBER() over (order by x.EventId) rn
        FROM    dbo.A as x 
    ) T 
```

这将为 999,999,999,999（约 1 万亿）行提供足够的“唯一”ID。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T13:39:58.323

您可以使用[`NEWID()`](http://msdn.microsoft.com/en-us/library/ms190348.aspx)投影一个*随机*的新 GUID。显然，虽然投影随机 guid*与*投影行标识符（主键）不同。事实上，如果表没有数据库强制主键，则基本上*没有办法投影正确的主键值。***在并发和更新（特别是删除）的情况下，任何努力都是徒劳的**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T13:46:26.927

如果您希望 guid 依赖于 eventid，请使用以下代码：

```
CREATE VIEW viewWithId as
SELECT convert(uniqueidentifier,
       '72799568-6EF2-4C95-'
        + STUFF(CONVERT(VARCHAR(36), CAST(rn AS VARBINARY(8)), 2),5, 0, '-')
       ) [Id],
       T.[EventId], 
       T.[EventTitle]
FROM 
    ( 
        select  x.[EventId], 
                x.[EventTitle],
                ROW_NUMBER() over (order by x.EventId) rn
        FROM    dbo.A as x 
    ) T 
```

它将 ROW_NUMBER 的完整十六进制表示合并到 guid 中。

如果 EventId 是唯一的并且永远不会更改一行，那么新的 EventId 总是大于所有现有的（例如 IDENTITY 值），您永远不会删除一行并且所有插入都使用表锁，这将每次为每一行创建相同的值。如果没有给出上述任何一项，解决此问题的唯一方法是向表中添加一个 guid 列，除非您不关心连续运行之间的值是否发生变化。

# android - 如何在android中的两个类之间传递字符串？

> ID：15339763
> 
> 赞同：0
> 
> 时间：2013-03-11T13:24:45.347
> 
> 标签：android, class

我有一个主要活动，它将一个字符串（ socket.out("back"); ）发送到 socket.java。

```
public class socket { 

public static void out(String out){

    /*
     final String PREFS_NAME = "SAVEDIP";
 final String PREF_IP = "ip";
 String ip = null;
 SharedPreferences pref = getSharedPreferences(PREFS_NAME, MODE_PRIVATE);
 ip = pref.getString(PREF_IP, "");
   */

 try {
  Socket client = new Socket("192.168.1.2",8000);   
  PrintWriter output = new PrintWriter(client.getOutputStream(), true);
  BufferedReader in = new BufferedReader(new   
      InputStreamReader(client.getInputStream()));
  output.println(out);

  output.close();
  in.close();
  client.close();
  } catch (UnknownHostException e) {
   Log.e("TAG", "UnknowHostExeption");
   e.printStackTrace();
  } catch (IOException e) {
   Log.e("TAG", "IOExeption");
   e.printStackTrace();
  }
}
  } 
```

我想将 IP 地址更改为变量“ip”（评论部分）。我已经使用 SharedPreferences 保存了 IP，但无法读取它。我尝试了评论中的代码，但 Eclipse 强调了“MODE_PRIVATE”部分说：“MODE_PRIVATE 无法解析为变量”。

知道如何解决我的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:52:04.863

在您的套接字类中，您没有上下文引用，最简单的解决方案是将上下文对象传递给 out 方法

```
public static void out(String out, Context context){ 
```

使用此上下文对象，您可以像这样获得 SharedPreferences：

```
SharedPreferences pref = context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE); 
```

I guess this ip address is unique through out the application, if so you can create your own Application class and you can save global stuff there.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:27:34.960

试试这个：

```
SharedPreferences pref = getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T13:27:56.430

您可以按如下方式使用它：

```
 SharedPreferences pref = getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE); 
```

或者

```
 SharedPreferences pref = getSharedPreferences(PREFS_NAME, 0); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T13:32:49.860

```
in class A

SharedPreferences app_preferences=PreferenceManager.getDefaultSharedPreferences(ProfileloginActivity.this);
                     SharedPreferences.Editor editor = app_preferences.edit();
                    // String text = textBox.getText().toString();
                     editor.putString("key",username);

                     editor.commit(); 
```

在 B 类

```
 SharedPreferences app_preferences = PreferenceManager.getDefaultSharedPreferences(this);
        String username = app_preferences.getString("key", "null"); 
```

# sql - OPENDATASOURCE 替代方案

> ID：15339765
> 
> 赞同：0
> 
> 时间：2013-03-11T13:24:47.020
> 
> 标签：sql, sql-server, excel, ssis

我需要通过 SSIS 持续将几个 Excel 文件加载到数据库 (SQL Server 2008 r2) 中。我面临的问题是某些文件需要操作，例如某些标题行随每月实际标题行的数量而变化（有时可能有 15 个有时可能有 17 个），并且工作表名称与逐月。有时，某些文件中还有其他数据源连接，因此偶尔会弹出消息框，询问我是否要刷新数据或启用内容。

由于 MS Office 是一个客户端应用程序，并不是真的要在后台自动运行，我需要一种方法通过我们的调度程序将这些数据加载到我们的服务器上（以 64 位模式运行的 SSIS 包，它启动其他 SSIS 包）。

我找到了一种从 Excel 文件中提取工作表名称的方法，而无需在服务器上安装 MS Office（这样就消除了一个问题）。我发现 OPENROWSET 和 OPENDATASOURCE 命令可以很好地工作......当允许临时查询时。问题是由于安全标准，临时查询是不允许的。

有哪些替代方法可以让我以自动方式加载 Excel 文件，但不需要启用临时查询。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:45:23.800

链接服务器可能适合您，您将需要为每个 excel 文件使用单独的链接服务器，您可以使用[sp_addlinkedserver](http://msdn.microsoft.com/en-us/library/ms190479.aspx)进行动态处理。

# android - Force activity reload(like orientation one)

> ID：15339766
> 
> 赞同：0
> 
> 时间：2013-03-11T13:24:50.337
> 
> 标签：android, broadcastreceiver, sharedpreferences

I have an activity that has `onReceive` (battery broadcast) and a service, that inserts data to **Shared Preferences**. Then from activity I get that data. My problem is that data is only refreshed when I change orientation of the phone. If I do not do that, Activity shows old Shared Preferences data. Any help will be appreciated.

What I would like to know:

*   How to update my activity in Broadscast `onReceive` method.
*   Why is SharedPreferences are not represented correctly?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:38:50.850

Two ideas:

1) When you are editing your shared preferences in your service, be sure to call `apply()` or `commit()` to actually update your shared preferences.

2) In your activity, make sure you register a shared preferences listener via [registerSharedPreferenceListener](http://developer.android.com/reference/android/content/SharedPreferences.html#registerOnSharedPreferenceChangeListener%28android.content.SharedPreferences.OnSharedPreferenceChangeListener%29) so you know when your preferences are updated in your activity.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T13:39:20.180

When you rotate your phone the activity is recreated. You can finish and start your activity again with:

```
finish();
startActivity(getIntent()); 
```

I dont know if this is the best option for your case, but I refresh my activity with webservices using this and it works properly!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T13:40:36.577

to do this I just restart the activity manually ... Here is the metho I used

```
public void reload() {

    Intent intent = getIntent();
    overridePendingTransition(0, 0);
    intent.addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
    finish();

    overridePendingTransition(0, 0);
    startActivity(intent);
} 
```

by using this method there will be no animation due to transition..

# c# - 用户和角色管理 MVC4

> ID：15339771
> 
> 赞同：2
> 
> 时间：2013-03-11T13:25:08.170
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

我正在用 MVC4 编写一个定制的 Web 系统，该系统的一部分需要管理员用户来管理公司中的角色和用户，以提供对系统某些区域的访问和权限。该系统在系统中有模块：

销售生产

管理团队希望能够在系统中创建角色并将权限应用于这些角色。例如，销售角色将被拒绝访问生产，但销售经理可以只读访问生产。

我正在寻找一个管理单个管理屏幕的最佳方法的示例。管理员需要

*   创建角色
*   创建用户
*   分配角色
*   为系统中的模块和操作分配角色权限

另外，由于需要动态分配角色，我将如何在控制器级别实现它？

```
[Authorize(Roles="Sales")] // needs to be dynamic
public ActionResult SalesIndex(){

    return View();

} 
```

任何想法，将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T13:38:58.883

您需要`AuthorizeAttribute`像这样创建自定义

```
public class CustomAuthorizeAttribute : AuthorizeAttribute
{
    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        var userIdentity = httpContext.User.Identity;

        if (!userIdentity.IsAuthenticated)
            return false;

        var rd = httpContext.Request.RequestContext.RouteData;
        string currentAction = rd.GetRequiredString("action");
        if(currentAction == "SalesIndex") 
        {
            return IsUserIsInRoleForTheView(userIdentity.Name);    
        }

        return true;
    }
}

[CustomAuthorize] 
public ActionResult SalesIndex()
{
    return View();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-29T17:42:09.840

一种方法是建立一个具有两个角色级别的数据模型：

*   GroupRoles（例如销售）。用户是组角色的成员，即存在MN 关系Users - GroupRoles。

*   权限角色。表示由应用程序控制的资源或操作或资源的细粒度权限。GroupRoles 和 PermissionRoles 之间存在 MN 关系。

然后，您将拥有一个自定义管理 UI，将用户分配给 GroupRoles，将 GroupRoles 分配给 PermissionRoles。

您还将有一个自定义[RoleProvider](http://msdn.microsoft.com/en-us/library/system.web.security.roleprovider.aspx)来“扁平化”此模型，即该`GetRolesForUser`方法返回用户的所有 PermissionRoles（通过他的 GroupRole 成员资格）。

然后，您可以使用标准 .NET API 进行授权，并且不需要自定义 Authorize 属性：

```
[Authorize(Roles="SomeAction")] // for an MVC Controller

[PrincipalPermission(SecurityAction.Demand, Role = "SomeAction")] // For a method in the BLL

Thread.CurrentPrincipal.IsInRole("SomeAction") // in code 
```

# iphone - 正在使用情节提要使用 TabbarController 开发应用程序，是否可以为每个选项卡使用单独的情节提要？

> ID：15339779
> 
> 赞同：0
> 
> 时间：2013-03-11T13:25:52.580
> 
> 标签：iphone

如何使用多个 StoryBoards 切换标签？如果我使用多个故事板会有什么问题吗？我如何导航到 Storyboard1 的视图控制器到 Storyboard2 的其他视图控制器？

有什么建议么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:36:02.337

如果您使用 StoryBoard，请将其用于您的完整应用程序。管理多个故事板通常（在我之前所做的）不是一个好主意。

如果您想将选项卡添加到 tabBarController，只需将它们从工具箱中拖动到 StoryBoard 的屏幕中即可。在此之后，通过 CONTROL-将它们拖动到您的 tabBarController（蓝线链接器）将它们链接到您的 tabBarControler

还有一件事。由于 xCode 对 tabBarControllers 有一点小错误，它会冻结您的选项卡，使它们无法单击和管理。只需通过单击代码窗口刷新您的 StoryBoard 并返回您的 StoryBoard 即可使其正常工作。

希望这对您有所帮助，请随时询问是否缺少某些东西:)

# android - 将纯文本添加到选项卡操作栏

> ID：15339782
> 
> 赞同：0
> 
> 时间：2013-03-11T13:26:06.947
> 
> 标签：android, tabs, android-actionbar

我目前有`ViewPager`3 个片段可以水平滚动，我使用`ActionBar`来显示我当前所在的选项卡。您还可以通过单击 中的元素来更改页面`ActionBar`。

这完美无缺，但我的问题是我需要在右上角添加一些额外的文本`ActionBar`（或者至少它会非常好）。

是否有可能在 with 上添加一个`TextView`（或其他可以显示纯文本的内容）`ActionBar`，`actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS)`或者我是否需要自己实现 Tab 行为（使用 ActionBar 的自定义布局？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:34:35.853

我终于找到了一个可能并不完美但对我来说足够的解决方案：

我使用了一个带有该属性的操作栏项，`android:showAsAction="always"`并像使用它一样`TextView`（我没有实现任何 onClick 操作）。

```
MenuItem mItem = null;

@Override
public boolean onCreateOptionsMenu(Menu menu){
    getMenuInflater().inflate(R.menu.activity_main, menu);
    mItem = menu.findItem(R.id.item);
    return true;
} 
```

现在我可以动态更改文本`mItem.setTitle(R.string.item_text);`

希望我可以帮助其他人解决这个问题/答案。

# python - 提升等级

> ID：15339786
> 
> 赞同：0
> 
> 时间：2013-03-11T13:26:19.080
> 
> 标签：python

我有一个聊天机器人，它具有升级和降级功能，以便使用某些命令。但是，一旦我提拔某人，它也会将他们添加到黑名单（-1 级）中，例如。如果我使用提升命令并且此人是 0 级，它会将他们添加到成员列表并使他/她成为 1 级，但由于它也将它们添加到黑名单中，它也会给他们 -1 级。正因为如此，如果我重新启动机器人并尝试提升某人，它就会变得一团糟。

这是代码。

```
 # Command Usage: 'promote <username>, 'promote <username> <rank>
    elif used_prefix and self.getAccess(user.name.lower()) >= lvl_config.rank_req_min_promote and cmd == "promote" and len(args) > 3:
        whole_body = message.body.split(" ", 3)
        promote_username = whole_body[1].lower()
        promote_username = promote_username.strip()
        cur_rank = self.getRank(promote_username)
        try:
            next_rank = 0
            if "-" in whole_body[2]:
                next_rank = 0 - int(whole_body[2])
            else:
                next_rank = int(whole_body[2])

            user_level = self.getAccess(promote_username)
            if user_level == lvl_config.rank_lvl_botowner:
                next_rank = user_level
            elif user_level != -1:
                next_rank = next_rank
            else:
                if self.getAccess(user.name.lower()) >= lvl_config.rank_req_blacklist_rem:
                    next_rank = next_rank
                else:
                    next_rank = user_level
        except:
            user_level = 0
            next_rank = 0

            user_level = self.getAccess(promote_username)
            if user_level == lvl_config.rank_lvl_botowner:
                next_rank = user_level
            elif user_level != -1:
                next_rank = user_level + 1
            else:
                if self.getAccess(user.name.lower()) >= lvl_config.rank_req_blacklist_rem:
                    next_rank = user_level + 1
                else:
                    next_rank = user_level

        if next_rank > len(ranks) - 1 and self.getAccess(user.name.lower()) >= lvl_config.rank_lvl_botowner and next_rank > self.getAccess(promote_username):
            chat_message("<font color='#%s' face='%s' size='%s'>Sorry <b>%s</b>, I couldn't promote <b>%s</b> as they are already one of my <b>%s (%s)</b>.</font>" % (font_color, font_face, font_size, self.getAlias(user.name), self.getAlias(promote_username), self.getRank(promote_username), self.getAccess(promote_username)), True)
        elif next_rank <= len(ranks) - 1 and next_rank >= 0 and self.getAccess(user.name.lower()) >= self.getAccess(promote_username) + lvl_config.rank_req_modifier_promote and next_rank > self.getAccess(promote_username):
            print("%s,%s" % (str(promote_username).strip(), str(user_level).strip()))
            try:
                users.remove("%s,%s" % (str(promote_username).strip(), str(user_level).strip()))
            except Exception as e:
                print(e)
            if next_rank != 0:
                users.append("%s,%s" % (str(promote_username).strip(), str(next_rank).strip()))
            try:
                chat_message("<font color='#%s' face='%s' size='%s'><b>%s</b> has been promoted from <b>%s (%s)</b> and is now <b>%s (%s)</b>.</font>" % (font_color, font_face, font_size, self.getAlias(promote_username), cur_rank, user_level, self.getRank(promote_username), self.getAccess(promote_username)), True)
            except Exception as e:
                print(e)
        elif next_rank == -1 and self.getAccess(user.name.lower()) < lvl_config.rank_req_blacklist_rem and next_rank >= self.getAccess(promote_username):
            chat_message("<font color='#%s' face='%s' size='%s'><b>%s</b> is on the blacklist and cannot be removed by you. Contact a person with level %s or higher access.</font>" % (font_color, font_face, font_size, self.getAlias(promote_username), lvl_config.rank_req_blacklist_rem), True)
        elif next_rank == self.getAccess(promote_username):
            chat_message("<font color='#%s' face='%s' size='%s'><b>%s</b> is already a rank of %s (%s).</font>" % (font_color, font_face, font_size, self.getAlias(promote_username), self.getRank(promote_username), self.getAccess(promote_username)), True)
        # Save all the data now.
        self.savRanks()
    # End Command 
```

我只是无法弄清楚我做错了什么，一切对我来说似乎都很好。谢谢您的帮助！

PS：我是荷兰人，很抱歉英语不好！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:45:26.493

```
whole_body = message.body.split(" ", 3) 
```

这在各个空间上分裂。如果您想按单词（即单词之间的任意数量的空格）拆分，请使用：

```
whole_body = message.body.split(None, 3) 
```

* * *

```
 promote_username = whole_body[1].lower()
    promote_username = promote_username.strip() 
```

写吧：

```
 promote_username = whole_body[1].lower().strip() 
```

* * *

```
if "-" in whole_body[2]:
    next_rank = 0 - int(whole_body[2])
else:
    next_rank = int(whole_body[2]) 
```

这可能会给你一个双重否定，因为`int`可能是负面的。例如，如果`whole_body[2]`是，那么您可能只需要：`-50``next_rank = 0 - int(whole_body[2]) = 0 - int("-50") = 0 - -50 = 50`

```
next_rank = int(whole_body[2]) 
```

* * *

```
next_rank = next_rank 
```

这无济于事。为什么会在那里？

* * *

你的`try`块做得过火了。它丢弃了实际的异常。将更少的语句放入`try`块中，并让该`except`部分仅匹配某些异常（例如`ValueError`）。

唯一应该使用 catch-all的时候是需要丢弃所有异常，或者只需要在调用传播异常`except:`之前进行一些清理。`raise`

* * *

无论如何，这就是我能弄清楚的。您可能想查看该`logging`模块并将`logging.debug()`调用放在此处的各个点，以查看您的代码经历了哪些步骤以及它为您的各种访问和等级获得了哪些价值。

# mysql - 如何在mysql中编写IF语句

> ID：15339788
> 
> 赞同：6
> 
> 时间：2013-03-11T13:26:26.153
> 
> 标签：mysql, sql, if-statement

我有一张带`type`字段的桌子。

如何在查询中检查此字段：

`type`如果== 'a'我想检查一下

然后`bes`= `amount`, `bed`= '-'

否则`bed`= `amount`, `bes`= '-'

bes 和 bed 在我的表中并不存在，但数量是 (int)

这是我的尝试：

```
SELECT billing.*,
    CASE billing.type WHEN 'A' THEN billing.amount AS bes, '-' AS bed ELSE billing.amount AS bed, '-' AS bes END
    FROM billing 
```

...我的搜索没有用

任何解决方案...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T13:32:06.330

您可以为每一行创建条件，`MySQL`支持*内联* `IF`语句。

```
SELECT billing.*,
       IF(billing.type = 'A', billing.amount, '-') AS bes,
       IF(billing.type = 'A', '-', billing.amount) AS bed
FROM   billing 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-11T13:30:08.350

为此，您需要两个 case 语句：

```
SELECT billing.*,
  CASE billing.type WHEN 'A' THEN billing.amount ELSE '-' AS bes END,
  CASE billing.type WHEN 'A' THEN '-' ELSE billing.amount AS bed END
FROM billing 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-11T13:29:33.327

一个[`CASE-WHEN-THEN-ELSE`](http://dev.mysql.com/doc/refman/5.0/en/case.html)只能有一个返回值...

这应该可以解决问题：

```
SELECT billing.*,
CASE billing.type WHEN 'A' THEN billing.amount ELSE '-' END AS bes,
CASE billing.type WHEN 'A' THEN '-' ELSE billing.amount END AS bed 
FROM billing 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-11T13:31:15.040

```
SELECT billing.*,
    CASE  WHEN billing.type =  'A' THEN billing.amount ELSE 0 END AS bes,
    CASE  WHEN billing.type <> 'A' THEN billing.amount ELSE 0 END AS bed
FROM billing 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-11T13:55:14.513

根据您的 MySQL 版本，您可以使用[IF或](http://dev.mysql.com/doc/refman/5.5/en/if.html)`CASE` [CASE](http://dev.mysql.com/doc/refman/5.0/en/case.html) (1)、[CASE](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html) (2)的两种不同语法之一。

```
SELECT *,
  (IF type = 'A' THEN amount ELSE '-' END IF) bes,
  (IF type = 'A' THEN '-' ELSE amount END IF) bed
FROM billing 
```

# string - 使用 bash 在文本文件中查找大小写不匹配的字符串

> ID：15339789
> 
> 赞同：0
> 
> 时间：2013-03-11T13:26:28.103
> 
> 标签：string, bash, grep, find

我有一个列表，其中包含数百个混合大小写的文件名`~/script-filenames`，以及在当前目录中要搜索的数百个文本文件，其中可能包含这些文件名。

目前我正在使用以下两个命令：

1.  不分大小写返回所有匹配项：

    ```
    xargs -0 -I @ -a ~/script-filenames grep -ri @ 
    ```

2.  要返回所有完全匹配：

    ```
    xargs -0 -I @ -a ~/script-filenames grep -r @ 
    ```

但是，当忽略大小写但大小写准确时，我将如何找到匹配的字符串？

也许有一种使用 egrep 和 regexp 的方法，但我不知道如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:34:31.380

您的问题的一个简单解决方法可能是使用 off diff：

```
xargs -0 -I @ -a ~/script-filenames grep -ri @ >hitList.IgnoredCase
xargs -0 -I @ -a ~/script-filenames grep -r @ >hitlist.WithCase

diff -u hitList.IgnoredCase hitlist.WithCase|grep ^+ |cut -c 2- 
```

diff 行的输出将仅包含大小写不准确的行。

# qt - 用cmake为mingw编译opencv

> ID：15339795
> 
> 赞同：0
> 
> 时间：2013-03-11T13:26:45.770
> 
> 标签：qt, opencv, cmake, mingw32

我正在使用 cmake 构建 opencv 库，以便 mingw 与 qt 一起使用，并且我已经能够生成 makefilelist。但是当我在命令提示符下键入**mingw32-make时，当它构建 44% 时出现错误。**错误说：

```
Cannot export _ZN12_GLOBAL__N_13R)p3aLLEv: symbol not found
Cannot export _ZN12_GLOBAL__N_17CmpType3allEv: symbol not found
collect2: Id returned 1 exit status
mingw32-make[2]: ***[bin/opencv_perf_core.exe] Error 1
mingw32-make[1]: ***[modules/core/CMakeFiles/opencv_perf_core.dir/all] Error 2
mingw32-make: ***[all] Error 2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:50:08.653

请查看以下教程以获取有关编译的指导：[OpenCV Tutorial](http://seevisionc.blogspot.co.uk/2011/09/linux-like-installation-of-opencv-230.html) opencv with mingw

说明用于编译 OpenCV-2.3.0，但最新版本的方法也没有区别。

# asp.net-mvc-3 - 保持会话活动 MVC3

> ID：15339798
> 
> 赞同：1
> 
> 时间：2013-03-11T13:26:49.697
> 
> 标签：asp.net-mvc-3, jquery

我查看了各种 jquery、ajax、图像重新加载实现并尝试了它们。他们都没有为我工作。

我正在尝试在以下代码片段中实现 heartbeat() 函数。只要用户正在键入或单击页面，此心跳就需要使我的会话保持活动状态。它应该在设置的时间后超时并自动将用户重定向到登录页面。

我遇到的问题是，即使它没有将用户重定向到登录页面，当用户单击表单上的“提交”时，由于会话超时，它会将他们重定向到登录页面。

```
document.onkeypress = function(e) {
    heartbeat();
    clearTimeout(timer);
    timer = setTimeout('RedirectToWelcomePage()',parseInt(sessionTimeout) * 30 * 1000);
};

document.onclick = function(e) {
    heartbeat();
    clearTimeout(timer);    
    timer = setTimeout('RedirectToWelcomePage()',parseInt(sessionTimeout) * 30 * 1000);
};

function heartbeat() {// need to implement
}

function RedirectToWelcomePage()
{
    window.location.replace("/Account/LogOn");
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T13:33:27.377

您的心跳应该能够通过 ajax 请求使会话保持活动状态，但我还会通过记录最后一次的时间戳（最初是页面加载时间）来确保它不会在每次点击和按键时触发一次，而不是触发另一个 ajax 请求，直到接近会话或表单身份验证超时（如果您使用的是表单身份验证）。

# lazy-evaluation - scala 是否有一个用于评估一次或从不评估的惰性 thunk 的类？

> ID：15339807
> 
> 赞同：0
> 
> 时间：2013-03-11T13:27:21.630
> 
> 标签：lazy-evaluation, scaladoc, thunk

简单的东西

```
class Thunk[+A](body: => A) {
  lazy val result: A = body;
} 
```

它是在某处定义的吗？

或者也许更复杂一点

```
class Thunk[+A](body: => A) {
  private[this] var evaluatedInternal = false;

  lazy val result: A = {
    evaluatedInternal = true;
    body;
  }

  def evaluated: Boolean = evaluatedInternal;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-20T08:03:52.500

有一些类[`Name`](https://github.com/scalaz/scalaz/blob/scalaz-seven/core/src/main/scala/scalaz/Name.scala)和`Need`Scala 中提供了这种功能。另请参阅 Scalaz[问题 #427](https://github.com/scalaz/scalaz/issues/427)。

# django - Django admin内联显示但外键有相反的关系

> ID：15339809
> 
> 赞同：2
> 
> 时间：2013-03-11T13:27:23.747
> 
> 标签：django, django-models, python-2.7, django-forms, django-admin

```
class One(models.Model):
    image = models.ImageField(upload_to="images")
    summary = models.TextField()

    def __unicode__(self):
        return self.summary

class Two(models.Model):
    image = models.ImageField(upload_to="images")
    title = models.CharField(max_length=50)

    def __unicode__(self):
        return self.title

class Three(models.Model):

  one = models.ForeignKey(One, related_name='one_home')
    two = models.ForeignKey(Two, related_name='two_home')

    def __unicode__(self):
        return self.tile 
```

现在我想要在 Django Admin 中将 One 和 Two 显示为 Three 的内联。

我到处搜索，但内联显示给出了相反的关系。就像一个有外键三的地方。不是我想要的相反。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:04:12.820

相当简单：

您的模型“坏了”，三个只能有 1 个 1 和 1 个 2。

您可以为一个和两个实体提供三个列表。

如果你反转外键，改变它们所在的模型（都指向@三）

```
class OneToThreeInline(admin.StackedInline):
    fk_name = 'three'
    model = One

class TwoToThreeInline(admin.StackedInline):
    fk_name = 'three'
    model = Two 
```

# javascript - Javascript 跨浏览器

> ID：15339810
> 
> 赞同：-3
> 
> 时间：2013-03-11T13:27:24.483
> 
> 标签：javascript, events, internet-explorer-7

我制作了一个脚本来为表格行着色。我的脚本仅适用于 Internet Explorer 8 或更高版本。如何使我的脚本跨浏览器？

```
window.onload = (function()
{
    "use strict";
    var c = 0, i, j, t = document.getElementsByTagName("tbody"), r;
    for(i = 0; i < t.length; i++)
    {
        r = t[i].getElementsByTagName("tr");
        for(j = 0; j < r.length; j++)
        {
            if(c%2 === 1)
            {
                r[j].setAttribute("class", "colored");
            }
            c++;
        }
        c = 0;
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T13:31:35.350

改变

```
r[j].setAttribute("class", "colorful"); 
```

至

```
r[j].className = "colorful"; 
```

IE 有出错的历史，`setAttribute`其中出错的方式之一与`class`属性有关。（在早期版本中，即使该属性被称为`class`，他们希望您`className`即使在使用时也调用它`setAttribute`，这是完全错误的。其他浏览器和更新版本的 IE 都正确。）

幸运的是，该`class`属性可靠地反映为被称为元素的*属性*`className`（在所有浏览器中），因此您可以通过转到反射属性来避开 IE 的`setAttribute`问题，如上所示。

`for`（元素上的属性也会发生同样的事情`label`，仅供参考；请改用`htmlFor`反射属性。）

# jms - 使用 Camel 的 ProducerTemplate 时如何设置 JMS 消息确认类型

> ID：15339812
> 
> 赞同：0
> 
> 时间：2013-03-11T13:27:28.537
> 
> 标签：jms, message, apache-camel

我正在使用骆驼上下文并从中创建生产者/消费者模板，以使用 jms 通信。
您能否告诉我在这种情况下设置消息确认类型的正确方法是什么？
谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T04:40:54.987

It can be set on the jmsconfiguration bean if you are using one for the component. I prefer that.

It can be set on the endpoint url too

```
template.send("activemq:queue:...?acknowledgementModeName=..); 
```

# forms - 如何知道用户更改了哪个选择标签选项

> ID：15339814
> 
> 赞同：0
> 
> 时间：2013-03-11T13:27:33.173
> 
> 标签：forms

在我的网页中，我有一个包含多个字段集元素的表单。每个 fieldset 元素都有一个带有一些选项的 select 标记，并且根据已选择的选项，fieldset 中的输入字段会发生变化。但是，我怎么知道用户更改了哪个选择标签的选项？

```
 <select onChange='selectHandler();'>
 <option value='0'>Option 1</option>
 <option value='1'>Option 2</option>
 <option value='2'>Option 3</option>
 <option value='3'>Option 4</option>
 </select> 
```

我可以使用 getElementsByTagName('select') 获取所有选择元素，但如何准确知道用户选择了哪个元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T07:01:00.270

我希望这能解决你的问题

在选择处理程序中传递“this”关键字，如“selectHandler(this)”。您可以获取访问了哪个选择元素

```
<select id="handler1" onChange='selectHandler(this);'>
 <option value='0'>Option 1</option>
 <option value='1'>Option 2</option>
 <option value='2'>Option 3</option>
 <option value='3'>Option 4</option>
 </select>

function selectHandler(obj){

   console.log(obj.id) //It gives the id of the current select tag
} 
```

不要使用 document.getElementsByTagName('select');。这将只为您提供对象数组，您将不知道单击了哪个选择标签。

# c# - 这些列当前没有唯一值

> ID：15339815
> 
> 赞同：2
> 
> 时间：2013-03-11T13:27:34.107
> 
> 标签：c#, asp.net, datatable, telerik, radtreeview

我面临以下问题：当我尝试绑定[Telerik Treeview](http://demos.telerik.com/aspnet-ajax/treeview/examples/functionality/checkboxes/defaultcs.aspx)

> 这些列当前没有唯一值。

* * *

我的代码：

```
protected void BindRTV()
{
    rtv_acd.DataTextField = "name";
    rtv_acd.DataValueField = "main_id";
    rtv_acd.DataFieldID = "main_code";
    rtv_acd.DataFieldParentID = "father_code";
    rtv_acd.DataSource = dt;
    rtv_acd.DataBind();
} 
```

* * *

数据快照：

![在此处输入图像描述](../Images/3b018867c9568c239a9545cfc6c57ed2.png)

如何解决这个问题，我知道这`main_code`是重复的，但我想要那个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T13:31:52.637

节点之间存在父子关系，并且该关系适用于`DataFieldID`和`DataFieldParentID`成员中指定的值。因此，您必须为`DataFieldID`成员指定一个具有唯一值的字段。

假设您有两个 ID ( `main_code`) 的节点`1`（您已经拥有），并且还有另一个节点的父 ID ( `father_code`) 为`1`。那么这两个节点中的哪一个是这个节点的父节点呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-11T09:39:20.127

正如穆罕默德所说，您应该至少有一个唯一的键列（不重复）。如果不这样做，当您尝试设置主键时会发生此错误。

还要考虑到您在该表中没有空白行，这确实被视为唯一列并且我遇到了这个错误。

最好的方法是获得具有一定数量的考虑列的不同行。

检查 Telerik 开发者论坛 [1] [http://www.telerik.com/forums/fetching-distinct-rows-from-datatable-using-linq](http://www.telerik.com/forums/fetching-distinct-rows-from-datatable-using-linq) [2] [http://www.telerik.com/forums/display-不同值](http://www.telerik.com/forums/display-distinct-values) [3] [http://www.telerik.com/forums/adding-5000-distinct-record-for-a-column-based-on-which-grouping-is-done-causing-ie-crash](http://www.telerik.com/forums/adding-5000-distinct-record-for-a-column-based-on-which-grouping-is-done-causing-ie-crash)

在此 Telerik 还回复说您应该使用唯一的列键。

另一个调整可能是选择数据表作为不同的值 [4] [http://www.telerik.com/forums/radtreeview-selectednode-value](http://www.telerik.com/forums/radtreeview-selectednode-value)

如果您尚未在开发者论坛解决此问题，请联系他们

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-12T02:58:09.767

这是关于您的表的 sql 表和主键，并且您的表字段中有重复的数据

# html - 使用文本框的 xpath 日期比较

> ID：15339816
> 
> 赞同：0
> 
> 时间：2013-03-11T13:27:34.717
> 
> 标签：html, xpath, xquery

我的 xml 文件：-

```
<root>
    <name id="1">
        <region value="001">
            <date value="1989-03-09"/>
        </region>
    <name id="2">
        <region value="002">
            <date value="1989-03-09"/>
        </region>
    </name>
</root> 
```

这是我的代码：- 我试试看：-

```
function get_list() {
        var elName = $('#select').val();
           var xPath = '///date[xs:date(./@value,"-","") > xs:date("'+ elName +'")]/../@value';
            var iterator = xml.evaluate(xPath, xml.documentElement, null,
                XPathResult.UNORDERED_NODE_ITERATOR_TYPE, null);
            var thisNode = iterator.iterateNext();
            var str = '';
            while (thisNode) {
                if (str) {
                    str += ', ';
                }
                str += thisNode.textContent;
                thisNode = iterator.iterateNext();
            }
            $("#result").text(str);
        } 
```

我有一个文本框，如果小于文本框日期`id = select`
，我想在此处获取第一个元素属性值... 例如：-`<date value="1989-03-10"/>`

```
input type="text"  1989-02-05 < 1989-03-10 is true then 
```

o/p 是：-`1, 2` 使用 xpath 和 html 对我有好处，其他也
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T02:31:25.697

以下查询应该有效：

```
let $ref-date := xs:date("1989-03-10")
let $data := <root>
    <name id="1">
        <region value="001">
            <date value="1989-03-09"/>
        </region>
    </name>
    <name id="2">
        <region value="002">
            <date value="1989-03-11"/>
        </region>
    </name>
</root>
return $data/name[region/date/xs:date(@value) lt $ref-date] 
```

您可以在[http://www.zorba-xquery.com/html/demo#r0KwHwjp1weVwefDUn1Z6roVD3A=现场试用](http://www.zorba-xquery.com/html/demo#r0KwHwjp1weVwefDUn1Z6roVD3A=)

# css - 使用 CSS 为表格行添加边框或边距

> ID：15339824
> 
> 赞同：1
> 
> 时间：2013-03-11T13:27:44.933
> 
> 标签：css, border, margin, css-tables

我需要仅使用 CSS 调整表格（除了在需要的地方添加类名之外，不能更改 HTML。）

`tr`我想在我已分配类的顶部添加一个白色边框`.rowOne`。或者，添加边距也可以工作，因为我的页面背景是白色的，所以只有一个边距会产生与白色相同的结果`border-top`

由于某种原因，我应用于`rowOne`该类的任何 CSS 都不起作用。

[JS Fiddle 显示问题](http://jsfiddle.net/YgSYT/)

CSS 为`.rowOne`

```
table .rowOne{
    border-top:8px solid #fff;
} 
```

有什么理由这不起作用？如何设置此行的样式以使其具有间隙/边框/边距？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:35:48.697

```
table .rowOne td {
    border-top:8px solid #fff;
} 
```

这似乎有效，不知道为什么它不能直接在 tr 上工作。此外，您正在使用一堆已弃用的属性，您应该在此处咨询一些信息：[https ://developer.mozilla.org/en-US/docs/HTML/Element/table](https://developer.mozilla.org/en-US/docs/HTML/Element/table)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:57:47.473

如果您在表格中添加边框折叠似乎会有所帮助，但可能会有我没有想到的副作用。

```
table.deliveryTbl
{
    border-top-width: 0;
    border-right-width: 0;
    border-bottom-width: 0;
    border-left-width: 0;
    border-color:transparent;
    width:100%;
    border-collapse: collapse;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T13:48:26.523

边界有效，只是你看不到它，因为它在第一个 tr 下。

您需要做的是为 tr 设置一个 float 属性。

就像是。

```
table.deliveryTbl tr {

    float: left;   

} 
```

# java - 隐藏显示标签

> ID：15339828
> 
> 赞同：1
> 
> 时间：2013-03-11T13:27:58.820
> 
> 标签：java, javascript, jsp, displaytag

给出了两个显示标签。当单击显示标签 1 上的显示详细信息时，如何在显示标签 1 下方显示显示标签 2？最初应该隐藏 displaytag 2.... 我必须使用 javascript 吗？

显示标签 1

```
<display:table name="List" export="true" class="displaytag"   sort="list"  >
                <display:setProperty name="basic.empty.showtable" value="true" />
                <display:setProperty name="basic.msg.empty_list" value="-" ></display:setProperty>
                <display:column  property="occid" title="ID" ></display:column>
                <display:column  property="firstName" title="First Name" ></display:column>
                <display:column  property="lastName" title="Last Name"   ></display:column>
                <display:column  property="sonOf" title="Father's Name"  ></display:column>
                <display:column  property="district" title="District"  ></display:column>
                <display:column  property="village" title="Village"  ></display:column>
                <display:column  href="" title="Acceptance Form">
                    <a href="">Show Details</a>
                </display:column>
                <display:column  href="" title="Agreement Form">
                    <a href="">Show Details</a>
                </display:column>
            </display:table> 
```

显示标签 2

```
 <display:table name="List1" export="true" class="displaytag"  id="reservationlist"  sort="list" >
                <display:setProperty name="basic.empty.showtable" value="true" />

                <display:column  property="resid" title="Reservation ID" ></display:column>
                <display:column  property="date" title="Date" ></display:column>
                <display:column  property="weight" title="Weight"   ></display:column>
                <display:column  property="bags" title="Bags"  ></display:column>
                <display:column  property="amount" title="Amount"  ></display:column>
                <display:column  property="advance" title="Advance"  ></display:column>

            </display:table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:34:44.570

您可以使用 JQuery 并调用以下命令：

```
$("[name=List1]").show(); 
```

或者

```
$("#reservationlist").show(); 
```

**更新**

如果您使用 javascript，您可以执行以下操作：

```
document.getElementById("reservationlist").style.display="block"; 
```

**UPDATE2** 要隐藏表，您可以使用

```
$("#reservationlist").hide(); 
```

或者

```
document.getElementById("reservationlist").style.display="none"; 
```

# xslt - XSLT：将模板应用于另一个模板的结果

> ID：15339829
> 
> 赞同：0
> 
> 时间：2013-03-11T13:27:58.803
> 
> 标签：xslt

我想将以下 XML 转换为 JSON：

```
<Table>
    <Row>
        <Column name="Column 1">outter quotation text and &amp;qout;inner quotation text&amp;qout;</Column>
        <Column name="Column 2">

Some text with two 'new line' characters at the beginning (sometimes with &amp;qout;inner quotation text&amp;qout; also)</Column>
    </Row>
</Table> 
```

要获得有效的 json，我应该删除所有“换行符”字符 ( `&#xA;`) 并替换`&amp;qout;`为`\"`.

看起来这段代码有助于删除“新行”：

```
<xsl:template name="escapeNewLine">
    <xsl:param name="pText" select="." />
        <xsl:if test="string-length($pText) > 0">
        <xsl:value-of select="substring-before(concat($pText, '&#xA;'), '&#xA;')" />
        <xsl:if test="contains($pText, '&#xA;')">
            <xsl:text></xsl:text>
            <xsl:call-template name="escapeNewLine"><xsl:with-param name="pText" select="substring-after($pText, '&#xA;')" /></xsl:call-template>
        </xsl:if>
    </xsl:if>
</xsl:template> 
```

和类似于替换引号的东西：

```
 <xsl:template name="escapeQuote">
        <xsl:param name="pText" select="." />
        <xsl:if test="string-length($pText) > 0">
            <xsl:value-of select="substring-before(concat($pText, '&amp;qout;'), '&amp;qout;')" />
            <xsl:if test="contains($pText, '&amp;qout;')">
                <xsl:text>\"</xsl:text>
                <xsl:call-template name="escapeQuote">
                    <xsl:with-param name="pText" select="substring-after($pText, '&amp;qout;')" />
                </xsl:call-template>
            </xsl:if>
       </xsl:if>
    </xsl:template> 
```

我的样式表：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
<xsl:output method="text" />
<xsl:template match="/">
"data":[
<xsl:for-each select="Table/Row">
    <xsl:if test="position() > 1">,</xsl:if>
    {
    <xsl:for-each select="Column">
        <xsl:if test="position() > 1">,</xsl:if>
        "<xsl:value-of select="@name" />":
        "
        <xsl:call-template name="escapeQuote" />
        <xsl:call-template name="escapeNewLine" />
        <!-- <xsl:value-of select="." /> -->
        "
    </xsl:for-each>
    }
</xsl:for-each>]
</xsl:template>
</xsl:stylesheet> 
```

我的问题是如何将两个模板应用到同一个节点？所以而不是这个：

```
{"data":[
    {"Column 1":"outter quotation text and \"inner quotation text\" outter quotation text and &amp;qout;inner quotation text&amp;qout;"},    
    {"Column 2":"Some text with two 'new line' characters at the beginning (maybe with \"inner quotation text\" also)

    Some text with two 'new line' characters at the beginning (maybe with &amp;qout;inner quotation text&amp;qout; also)"}}
]} 
```

我可以得到这个结果：

```
{"data":
    [{"Column 1":"outter quotation text and \"inner quotation text\""},
     {"Column 2":"Some text with two 'new line' characters at the beginning (maybe with \"inner quotation text\" also)"}}
    ]} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:37:32.537

这是你需要做的：

```
<xsl:call-template name="escapeQuote">
  <xsl:with-param name="pText">
    <xsl:call-template name="escapeNewLine" />
  </xsl:with-param>
</xsl:call-template> 
```

也可以在这里重用一些代码，并将两种类型的换行符转换为`\r`和`\n`而不是仅仅删除它们：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output method="text" />
  <xsl:template match="/">
    "data":[
    <xsl:apply-templates select="Table/Row" />
    ]
  </xsl:template>

  <xsl:template match="Row" name="RowData">
    {
    <xsl:apply-templates select="Column" />
    }
  </xsl:template>

  <xsl:template match="Row[position() > 1]">
    <xsl:text>,</xsl:text>
    <xsl:call-template name="RowData" />
  </xsl:template>

  <xsl:template match="Column" name="ColumnData">
    <xsl:value-of select="concat('&quot;', @name, '&quot;:')" />

    <xsl:text>"</xsl:text>
    <xsl:call-template name="escapeQuote">
      <xsl:with-param name="pText">
        <xsl:call-template name="escapeNewLine" />
      </xsl:with-param>
    </xsl:call-template>
    <xsl:text>"</xsl:text>
  </xsl:template>

  <xsl:template match="Column[position() > 1]">
    <xsl:text>,</xsl:text>
    <xsl:call-template name="ColumnData" />
  </xsl:template>

  <xsl:template name="escapeNewLine">
    <xsl:param name="pText" select="." />

    <xsl:call-template name="replace">
      <xsl:with-param name="pText">
        <xsl:call-template name="replace">
          <xsl:with-param name="pText" select="$pText" />
          <xsl:with-param name="from" select="'&#xA;'" />
          <xsl:with-param name="to" select="'\n'" />
        </xsl:call-template>
      </xsl:with-param>
      <xsl:with-param name="from" select="'&#xD;'" />
      <xsl:with-param name="to" select="'\r'" />
    </xsl:call-template>
  </xsl:template>

  <xsl:template name="escapeQuote">
    <xsl:param name="pText" select="." />

    <xsl:call-template name="replace">
      <xsl:with-param name="pText" select="$pText" />
      <xsl:with-param name="from" select="'&amp;qout;'" />
      <xsl:with-param name="to" select="'\&quot;'" />
    </xsl:call-template>
  </xsl:template>

  <xsl:template name="replace">
    <xsl:param name="pText" />
    <xsl:param name="from" />
    <xsl:param name="to" />

    <xsl:if test="string-length($pText) > 0">
      <xsl:value-of select="substring-before(concat($pText, $from), $from)" />
      <xsl:if test="contains($pText, $from)">
        <xsl:value-of select="$to" />
        <xsl:call-template name="replace">
          <xsl:with-param name="pText" select="substring-after($pText, $from)" />
          <xsl:with-param name="from" select="$from" />
          <xsl:with-param name="to" select="$to" />
        </xsl:call-template>
      </xsl:if>
    </xsl:if>
  </xsl:template>
</xsl:stylesheet> 
```

# iphone - BG中正确使用MagicalRecord保存

> ID：15339838
> 
> 赞同：2
> 
> 时间：2013-03-11T13:28:21.627
> 
> 标签：iphone, ios, objective-c, core-data, magicalrecord

我已经看到了两种不同的方法，我想知道哪种方法是正确的。

具体来说，我正在谈论访问`ManagedObject`BG 线程上的 。

我见过的方法是...

```
Person *person = ...
[MagicalRecord saveUsingBlock:^(NSManagedObjectContext *localContext) {
    Person *localPerson = [person inContext:localContext];
    // do stuff...
}] 
```

不过我也看过...

```
Person *person = ...
NSManagedObjectID *objectID = person.objectID;
[MagicalRecord saveUsingBlock:^(NSManagedObjectContext *localContext) {
    Person *localPerson = (Person*)[localContext objectWithID:objectID];
    // do stuff...
}] 
```

后者似乎更正确，因为您没有尝试跨线程访问对象。但是看到两者后，我不确定是否`MagicalRecord`做了一些神奇的事情来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T13:58:03.743

`inContext:`是 的魔法记录“速记” `MR_inContext:`，实现为

```
- (id) MR_inContext:(NSManagedObjectContext *)otherContext
{
    NSError *error = nil;
    NSManagedObject *inContext = [otherContext existingObjectWithID:[self objectID] error:&error];
    [MagicalRecord handleErrors:error];

    return inContext;
} 
```

（参见[https://github.com/magicalpanda/MagicalRecord/blob/master/MagicalRecord/Categories/NSManagedObject/NSManagedObject%2BMagicalRecord.m](https://github.com/magicalpanda/MagicalRecord/blob/master/MagicalRecord/Categories/NSManagedObject/NSManagedObject%2BMagicalRecord.m)）。

因此，两者都是跨不同上下文访问对象的有效方法，一个是 using `existingObjectWithID`，另一个是`objectWithID`. 对于这些之间的细微差别，请参阅文档或例如[What's the difference between -existingObjectWithID:error: 和 –objectWithID:?](https://stackoverflow.com/questions/3006394/whats-the-difference-between-existingobjectwithiderror-and-objectwithid) .

# java - Eclipse 无法启动

> ID：15339841
> 
> 赞同：5
> 
> 时间：2013-03-11T13:28:25.870
> 
> 标签：java, eclipse

当我尝试在 Windows 7 上启动 Eclipse Juno 时，会出现一个消息框，显示“发生错误。请参阅日志文件”，并且 Eclipse 不会启动。我尝试重命名我的工作区文件夹或更改存储在 eclipse_root_folder\configuration.settings\org.eclipse.core.net.prefs 中的 eclipse 工作区设置，但它不起作用。我已经使用了 2 个月，以前没有发生过这种情况。有什么解决办法吗？

```
!SESSION 2013-03-11 15:17:16.709 -----------------------------------------------
eclipse.buildId=M20120914-1800
java.version=1.6.0_25
java.vendor=Sun Microsystems Inc.
BootLoader constants: OS=win32, ARCH=x86_64, WS=win32, NL=en_US
Framework arguments:  -product org.eclipse.epp.package.jee.product
Command-line arguments:  -os win32 -ws win32 -arch x86_64 -product org.eclipse.epp.package.jee.product

!ENTRY org.eclipse.osgi 4 0 2013-03-11 15:17:20.919
!MESSAGE Application error
!STACK 1
java.lang.NoSuchMethodError: sun.misc.ProxyGenerator$ConstantPool.seTReadOnly()V
    at sun.misc.ProxyGenerator.generateClassFile(Unknown Source)
    at sun.misc.ProxyGenerator.generateProxyClass(Unknown Source)
    at java.lang.reflect.Proxy.getProxyClass(Unknown Source)
    at java.lang.reflect.Proxy.newProxyInstance(Unknown Source)
    at sun.reflect.annotation.AnnotationParser.annotationForMap(Unknown Source)
    at sun.reflect.annotation.AnnotationParser.parseAnnotation(Unknown Source)
    at sun.reflect.annotation.AnnotationParser.parseAnnotations2(Unknown Source)
    at sun.reflect.annotation.AnnotationParser.parseAnnotations(Unknown Source)
    at java.lang.Class.initAnnotationsIfNecessary(Unknown Source)
    at java.lang.Class.getAnnotation(Unknown Source)
    at sun.reflect.annotation.AnnotationType.<init>(Unknown Source)
    at sun.reflect.annotation.AnnotationType.getInstance(Unknown Source)
    at sun.reflect.annotation.AnnotationParser.parseAnnotation(Unknown Source)
    at sun.reflect.annotation.AnnotationParser.parseAnnotations2(Unknown Source)
    at sun.reflect.annotation.AnnotationParser.parseAnnotations(Unknown Source)
    at java.lang.Class.initAnnotationsIfNecessary(Unknown Source)
    at java.lang.Class.getAnnotation(Unknown Source)
    at sun.reflect.annotation.AnnotationType.<init>(Unknown Source)
    at sun.reflect.annotation.AnnotationType.getInstance(Unknown Source)
    at sun.reflect.annotation.AnnotationParser.parseAnnotation(Unknown Source)
    at sun.reflect.annotation.AnnotationParser.parseAnnotations2(Unknown Source)
    at sun.reflect.annotation.AnnotationParser.parseAnnotations(Unknown Source)
    at java.lang.Class.initAnnotationsIfNecessary(Unknown Source)
    at java.lang.Class.getAnnotation(Unknown Source)
    at sun.reflect.annotation.AnnotationType.<init>(Unknown Source)
    at sun.reflect.annotation.AnnotationType.getInstance(Unknown Source)
    at sun.reflect.annotation.AnnotationParser.parseAnnotation(Unknown Source)
    at sun.reflect.annotation.AnnotationParser.parseAnnotations2(Unknown Source)
    at sun.reflect.annotation.AnnotationParser.parseAnnotations(Unknown Source)
    at java.lang.reflect.Field.declaredAnnotations(Unknown Source)
    at java.lang.reflect.Field.getAnnotation(Unknown Source)
    at java.lang.reflect.AccessibleObject.isAnnotationPresent(Unknown Source)
    at org.eclipse.e4.core.internal.di.InjectorImpl.processFields(InjectorImpl.java:617)
    at org.eclipse.e4.core.internal.di.InjectorImpl.processClass(InjectorImpl.java:575)
    at org.eclipse.e4.core.internal.di.InjectorImpl.processClass(InjectorImpl.java:568)
    at org.eclipse.e4.core.internal.di.InjectorImpl.processClassHierarchy(InjectorImpl.java:556)
    at org.eclipse.e4.core.internal.di.InjectorImpl.inject(InjectorImpl.java:87)
    at org.eclipse.e4.core.internal.di.InjectorImpl.internalMake(InjectorImpl.java:319)
    at org.eclipse.e4.core.internal.di.InjectorImpl.make(InjectorImpl.java:240)
    at org.eclipse.e4.core.contexts.ContextInjectionFactory.make(ContextInjectionFactory.java:161)
    at org.eclipse.e4.core.services.translation.TranslationProviderFactory.bundleTranslationService(TranslationProviderFactory.java:34)
    at org.eclipse.e4.ui.internal.workbench.swt.E4Application.createDefaultHeadlessContext(E4Application.java:417)
    at org.eclipse.e4.ui.internal.workbench.swt.E4Application.createDefaultContext(E4Application.java:434)
    at org.eclipse.e4.ui.internal.workbench.swt.E4Application.createE4Workbench(E4Application.java:182)
    at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:557)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:543)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414) 
```

*   我有最新版本的java
*   /eclipsepath/eclipse.exe -clean [这不起作用]
*   我没有在我的电脑上进行任何更改

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-07-22T10:32:22.897

Eclipse 将您的项目的副本存储在它的缓存中。当 Eclipse 崩溃（这种情况发生）时，可能会发生此缓存已损坏的情况，因此 Eclipse 将无法重新启动。从 '--clean' somesomes 开始可以解决这个问题，但并非总是如此。

以我的经验，一种解决方案是删除项目的缓存。在您的工作区中查找“.metadata”文件夹，并在 Eclipse 未运行时将其删除（以防万一）。然后再次启动 Eclipse。

您可能会丢失您的运行配置首选项，然后您可以从“.metadata/.plugins/org.eclipse.debug.core/.launches”的备份副本中恢复这些首选项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-28T20:23:12.543

当甚至“干净”命令失败时，我也有很好的结果

```
eclipse -clean -cleanPersistedState 
```

除此之外，我会使用 SysInternals（或 ProcMon，或类似实用程序）的 FileMon 来尝试查看究竟是什么操作失败了，或者 Eclipse 在哪里寻找它的数据。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-11T13:32:41.320

尝试在命令提示符下执行以下行：

```
/eclipsepath/eclipse.exe -clean 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-22T00:35:52.297

> eclipse.buildId=M20120914-1800 **java.version=1.6.0_25** java.vendor=Sun Microsystems Inc. BootLoader 常量：OS=win32, ARCH=x86_64, WS=win32, NL=en_US 框架参数：-product org.eclipse.epp .package.jee.product 命令行参数： **-os win32 -ws win32 -arch x86_64** -product org.eclipse.epp.package.jee.product

不，您没有最新版本的 java，您的 eclipse 使用的是 java 1.6，最新的 java 是 1.8

似乎有一些不匹配，即。操作系统是 win32，arch 是 x86_64。确保如果操作系统是 32 位，Java 和 Eclipse 也是 32 位

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-11T13:37:20.743

您确定您为正确的处理器架构下载了 Eclipse/JAVA 版本吗？
看起来尝试在您的系统上混合运行 32 位和 64 位应用程序，也许您更新了 eclipse/java/ 等或添加了一些新库？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-07-28T16:04:08.573

在终端中运行以下命令

```
/full/path/to/second/eclipse -clean 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-07-25T03:11:22.203

您可能没有使用您认为的 Java 版本。[您需要通过eclipse.ini](https://wiki.eclipse.org/Eclipse.ini)向 Eclipse 指定要使用的 JVM 。否则，它可能会从您的系统路径中获取非预期版本。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-07-28T08:25:49.873

在您的文件管理器中执行以下操作。

rm YOUR_WORKSPACE/.metadata/.plugins/org.eclipse.core.resources/.snap

rm /home/anoop/workspace2/.metadata/.plugins/org.eclipse.core.resources/.snap

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-08-04T06:42:15.057

--clean 在 Eclipse 崩溃后重新启动时帮助了我。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-07-28T19:12:29.633

您是否尝试将计算机恢复到昨天？它当然不如其他一些答案那么优雅，但我敢打赌，你只是没有考虑过*一些改变（或注意到 - 后台更新，也许？），并且恢复将解决任何问题。*

# html - HTML5 Unicode ID 属性

> ID：15339844
> 
> 赞同：2
> 
> 时间：2013-03-11T13:28:34.217
> 
> 标签：html, unicode, attributes

可以将 HTML5 ID 属性设置为包含非拉丁语言字符的字符串吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T13:40:26.417

HTML 4.01 支持类名中的任何字符，但仅在 HTML 5 中您也可以在 ID 中使用。如需进一步阅读，请参阅[Mathias Bynens 的博客](http://mathiasbynens.be/notes/html5-id-class)。

# jquery - Jquery Accordion - 使用锚点从外部和内部链接打开特定面板

> ID：15339847
> 
> 赞同：4
> 
> 时间：2013-03-11T13:28:38.503
> 
> 标签：jquery, accordion

我正在使用 jquery 手风琴（Jquery 1.9/Jquery-ui-1.10.1）。我想使用锚标记从外部页面链接到该页面。当使用锚标签时，我想在手风琴上打开一个特定的面板。例如，如果我传递一个#panel2 锚标记，我想打开并显示第二个面板。

我在手风琴页面上也有图像，这些图像也需要链接到手风琴中的特定面板。

有人能帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T15:46:39.177

尝试：

HTML：

```
<a class="opener" data-panel="0" href="#">Open Section 1</a>
<a class="opener" data-panel="1" href="#">Open Section 2</a>
<a class="opener" data-panel="2" href="#">Open Section 3</a>
<a class="opener" data-panel="3" href="#">Open Section 4</a>

<div id="accordion">

<h3>Section 1</h3>

    <div>
        <p>Mauris mauris ante, blandit et, ultrices a, suscipit eget, quam. Integer
            ut neque. Vivamus nisi metus, molestie vel, gravida in, condimentum sit
            amet, nunc. Nam a nibh. Donec suscipit eros. Nam mi. Proin viverra leo
            ut odio. Curabitur malesuada. Vestibulum a velit eu ante scelerisque vulputate.</p>
    </div>

<h3>Section 2</h3>

    <div>
        <p>Sed non urna. Donec et ante. Phasellus eu ligula. Vestibulum sit amet
            purus. Vivamus hendrerit, dolor at aliquet laoreet, mauris turpis porttitor
            velit, faucibus interdum tellus libero ac justo. Vivamus non quam. In suscipit
            faucibus urna.</p>
    </div>

<h3>Section 3</h3>

    <div>
        <p>Nam enim risus, molestie et, porta ac, aliquam ac, risus. Quisque lobortis.
            Phasellus pellentesque purus in massa. Aenean in pede. Phasellus ac libero
            ac tellus pellentesque semper. Sed ac felis. Sed commodo, magna quis lacinia
            ornare, quam ante aliquam nisi, eu iaculis leo purus venenatis dui.</p>
        <ul>
            <li>List item one</li>
            <li>List item two</li>
            <li>List item three</li>
        </ul>
    </div>

<h3>Section 4</h3>

    <div>
        <p>Cras dictum. Pellentesque habitant morbi tristique senectus et netus et
            malesuada fames ac turpis egestas. Vestibulum ante ipsum primis in faucibus
            orci luctus et ultrices posuere cubilia Curae; Aenean lacinia mauris vel
            est.</p>
        <p>Suspendisse eu nisl. Nullam ut libero. Integer dignissim consequat lectus.
            Class aptent taciti sociosqu ad litora torquent per conubia nostra, per
            inceptos himenaeos.</p>
    </div>
</div> 
```

jQuery：

```
var $accordion = $("#accordion");

$accordion.accordion();

$(".opener").on("click", function () {
    var $this = $(this),
        toOpen = $this.data("panel");

    $accordion.accordion("option", "active", toOpen);

    return false;
}); 
```

[在这里](http://jsfiddle.net/VZ3T5/1/)提琴

# javascript - 如果选项值存在，则禁用选择输入

> ID：15339848
> 
> 赞同：0
> 
> 时间：2013-03-11T13:28:47.703
> 
> 标签：javascript, jquery, forms

如果可以免费送货，我想禁用选择框。

```
<select name="shipping_method" id="shipping_method">
    <option value="">Select shipping</option>
    <option value="free_shipping">Free Shipping</option>
    <option value="international_delivery">International: $30.00</option>
</select> 
```

我试过这个（不知道它是否会起作用）：

```
$(document).ready(function(){
    if($("option").val() == "free_shipping") {
        $("select").prop("disabled");
    }
}); 
```

然后假设表单提交：

```
$(document).ready(function(){
    $("form").submit(function() {
        $("select", this).prop("disabled", false);
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:32:27.643

选择选择

```
$('#shipping_method').change(function(){
    var j = $(this);
    if(j.val() == 'free_shipping') {
        j.attr('disabled', true);
    }    
    else {
        j.removeAttr('disabled');
    }
}).trigger('change'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T13:33:15.270

您可以使用[$.has](http://api.jquery.com/has/)

```
$('#shipping_method').has('option[value="free_shipping"]').prop("disabled", true); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/mmvje/)

# shell - 使用另一个名称登录另一个服务器的 shell 脚本

> ID：15339849
> 
> 赞同：0
> 
> 时间：2013-03-11T13:28:49.830
> 
> 标签：shell, unix, ssh

我想编写一个 shell 脚本来使用另一个用户名 ssh 到另一个 unix 服务器。我使用的 Unix 服务器是 SunOS。

我尝试了许多选项，例如期望工具和 sshpass，但它们都不起作用，有人可以帮助我使用 sshpass 的脚本，因为我听说它提供了安全登录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T13:38:56.753

如果您是本地主机上的用户并且`bob`想`ssh`要这样做：`sunmachine``fred`

```
$ ssh fred@sunmachine 
```

这会将您登录`sunmachine`为`fred`，而不是`bob`。

您还可以使用配置文件`~/.ssh/config`来设置别名：

```
Host sun 
Host sunmachine.domain.co.uk
User fred 
```

现在您可以输入*（作为任何用户）*：

```
$ ssh sun 
# ssh fred@sunmachine.domain.co.uk <- the un-aliased command that is run 
```

注意：设置[基于密钥的](http://www.thegeekstuff.com/2008/07/ssh-key-based-authentication-setup-from-openssh-to-ssh2/)身份验证，因此不会提示您输入密码。

# c# - 在转发器中执行条件语句时出错

> ID：15339859
> 
> 赞同：0
> 
> 时间：2013-03-11T13:29:01.173
> 
> 标签：c#, asp.net, string, repeater, conditional-operator

我正在尝试在转发器中执行以下条件代码：

```
<%# new MAINLIB.DbaseOps(null).getImage(Eval("desid").ToString())!=null?Response.Write("<img src='" + new MAINLIB.DbaseOps(null).getImage(Eval("desid").ToString()) + "' alt='" + Eval("title").ToString().Substring(0, 20) + "' />") : Response.Write("") %> 
```

**代码说明：**

1.  MAINLIB.DbaseOps(null).getImage() 将图像路径作为与“desid”（描述 ID）相关的字符串返回。该功能在其他页面上运行良好且良好。
2.  动机是检查“desid”的图像是否存在，然后添加一个`img`标签，否则在 aspx 页面上添加空白或空字符串。

但是它在同一行上给出了以下编译时错误。

> 无法确定条件表达式的类型，因为 'void' 和 'void 之间没有隐式转换

请告诉我解决这个问题的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:31:29.983

不需要`Response.Write`在绑定表达式中使用。

删除它，你应该没问题。

# php - PHP，检测带水印的图像？

> ID：15339864
> 
> 赞同：10
> 
> 时间：2013-03-11T13:29:07.410
> 
> 标签：php, image-processing

我有一个包含大约 100 万张图像的库，其中大约一半在同一个位置带有相同的半透明水印。

我从哪里开始，检测带有水印的图像？为此目的是否有一些标准工具？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T14:06:53.707

如果根据您的问题，您只想检测带有水印的图像，您可以使用以下算法：

*   提取水印图像样本 扫描水印图像
*   逐个像素并将第一个像素存储在一个数组中。扫描每个
*   逐像素图像并存储在数组中。每当一个行矩阵
*   从正在扫描的图像中包含数组的元素
*   同样的顺序，很可能是匹配的。

代码可能是这样的：

```
$no_of_pixels = what_you_got;
$matched = 0;
$thumbpixels = array();
$wmark = imagecreatefrompng("watermark.png");
list($width, $height) =  getimagesize("watermark.png");
$tesimage = imagecreatefrompng("test.png");
for($h = 0; $h < $height; $h++){    
    for($w = 0; $w < $width; $w++){
        if(imagecolorsforindex($testimage, imagecolorat($testimage, $w, $h)) == $thumbpixels[0]){
            while($thumbpixels[$i++] === imagecolorsforindex($tesimage, imagecolorat($wmark, $w, $h)) && $no_of_pixels != $matched){
                $matched++;
            }
            if($matched == $no_of_pixels) echo "Voila, we found it!";
        }
    }
} 
```

* * *

## 编辑

只是看到您的缩略图示例。如果您只想检测文本，可以尝试[tesseract-ocr](https://code.google.com/p/tesseract-ocr/)或[PhpOCR](http://sourceforge.net/projects/phpocr/)。

你也可以考虑[PHPSane](http://sourceforge.net/projects/phpsane/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T13:47:00.327

检测图像中的几乎所有特征称为**对象检测**。有一个广泛使用的库，称为[OpenCV](http://opencv.willowgarage.com/wiki/)。它有一个非常简单的 SDK，虽然设置起来很痛苦。它很好地支持 C/C++ 和*（几乎很好地支持）* Python。我花了 3 周时间来训练我自己的[Classfier（训练）](http://docs.opencv.org/doc/user_guide/ug_traincascade.html)，这是我第一次开始使用 OpenCV。

但我不会完全依赖这个解决方案并考虑我的优先事项。此外，使用自定义分类器很难达到良好的速率。其他方法更耗时。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T13:47:42.807

简而言之，不完全准确。

充其量，您只能在图像上应用启发式方法以查看它是否与精确的水印匹配，并获得置信度等级——例如，如果水印覆盖了 50% 的白色，那么以白色为主的场景*可能会*给出误报，当然反之亦然。

如果图像使用有损压缩（例如 JPEG）作为边缘，也可能会出现问题，并且饱和度可能会导致水印不像预期的那样饱和，或者没有像预期的那样精确定位。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T13:50:12.870

因为您知道水印始终在哪里，所以您可以使用[imagecolorat](http://php.net/manual/en/function.imagecolorat.php)和[imagecolorsforindex](http://www.php.net/manual/en/function.imagecolorsforindex.php)来获取水印内部和外部像素的 alpha 值。我希望 alpha 值在没有水印时是相似的，而在有水印时是不同的（在您需要确定的某个阈值内）。当然，这可能不适用于所有图像，因此如果您需要 100% 的准确度，您可能需要更可靠的东西。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-11T14:46:18.330

在您的情况下，您要在可预测的位置寻找相同的徽标，这相对简单。然而，匹配元数据中的版权声明要简单得多，也更快（根据我在其他地方的评论）！

水印不会对内容产生固定的变化——每个修改过的像素都会根据水印和图像本身获得一个新值。因此，您需要提取此信息 - 我将区分图像并仅查看导数的大小（而不是相位）。

然后，只需将差异与水印之一（或与水印和其他内容的批次）[相关联即可。](http://en.wikipedia.org/wiki/Digital_image_correlation)

除非您乐于编写自己的扩展，否则您真的不想在 PHP 中进行这种图像处理。大多数图像处理工具包将支持差异化和相关性。

顺便说一句：如果您不知道如何区分图像，和/或无法理解如何关联图像，请不要问 - 这不是该讨论的正确论坛

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-11T13:38:56.340

好吧，如果没有工具可以做到这一点，您可以尝试以下方法：

1.  以像素百分比的形式确定水印出现的位置，例如右下角 40px x 100px

2.  对于每张图像，制作一个临时副本并裁剪出水印出现的位置。这应该使水印版本和非水印版本保持相同

3.  比较图像 - 例如宽度 x 高度、文件大小、CRC 或实际像素比较的组合，但对于一百万张图像，您需要一些强大的 CPU 能力。

# python - python tkinter在函数之间传递变量

> ID：15339866
> 
> 赞同：0
> 
> 时间：2013-03-11T13:29:17.630
> 
> 标签：python, compiler-errors, tkinter, instance-variables

我正在尝试将变量 dirpath 传递给 export_data() 函数。双击小部件上的按钮即可导出数据。为什么 dirpath 打印为：

```
`<Tkinter.Event instance at 0x8ade56c>` 
```

而不是实际路径？

```
def export_data(dirpath):
    print 'exporting...'
    print str(dirpath)
    os.mkdir('/home/bigl/Desktop/Library')
    shutil.copytree(dirpath, output_path) 
```

当我运行我的代码时，我得到了错误

```
exporting...
<Tkinter.Event instance at 0x8ade56c>
Traceback (most recent call last):
  File "/usr/lib/python2.7/lib-tk/Tkinter.py", line 1413, in __call__
    return self.func(*args)
  File "/media/LOFTUS/20130308_searchtest.py", line 44, in export_data
    shutil.copytree(dirpath, output_path)
  File "/usr/lib/python2.7/shutil.py", line 169, in copytree
    names = os.listdir(src)
TypeError: coercing to Unicode: need string or buffer, instance found 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:54:20.033

在您提出的问题的正文中：

> 双击小部件上的按钮即可导出数据。为什么 dirpath 打印为：
> 
> `<Tkinter.Event instance at 0x8ade56c>`

当您绑定到事件时，绑定始终将事件对象作为参数发送给绑定函数。所以，如果你正在做：

```
widget.bind("<Double-1>", export_data) 
```

...然后`export_data`将接收该事件，因为它是唯一的参数。

要传递变量，您需要使用`lambda`or`functools.partial`或某种函数生成器。例如：

```
widget.bind("<Double-1>", lambda event: export_data(dirpath)) 
```

但是，请注意这一点。传递给`export_data`的值将是`dirpath` *事件发生时*的值，可能与创建绑定时的值不同。

如果您有一个要传递给函数的局部变量，您可以将其设置为关键字参数的默认值，在这种情况下，`lambda`将传递创建时的值。

例子：

```
path = some_function()
widget.bind("<Double-1>", lamba event, dirpath=path: export_data(dirpath)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:53:05.003

显然`Tkinter`将事件而不是字符串传递给您的回调。如果`dirpath`是一个全局变量（正如你之前写的——重要信息！），也许你打算像这样定义你的回调：

```
def export_data(_ignored):
    print 'exporting...'
    print str(dirpath)
    os.mkdir('/home/bigl/Desktop/Library')
    shutil.copytree(dirpath, output_path) 
```

现在您的函数可以使用全局`dirpath`（和`output_path`）。按照您的方式，参数声明隐藏了同名的全局变量。

# java - 如何将多个 commons.math SummaryStatistics 对象添加在一起？

> ID：15339868
> 
> 赞同：1
> 
> 时间：2013-03-11T13:29:21.360
> 
> 标签：java, apache-commons-math

我们有分析代码，它收集方法的持续时间以及一堆其他数据点，我们将这些数字存储在来自 commons 数学的 SummaryStatistics 对象中，以提供最小值、最大值、平均值、计数等。但是我们需要将此对象刷新到每隔一小时左右磁盘一次，然后再次开始收集下一个。

我的问题是我们如何才能可靠地将这些值加在一起，所以如果我们有 24 个汇总统计对象，我们可以在不扭曲数据的情况下显示一整天的汇总？对象本身具有运行平均值以及计数的项目数，那么是否有一个实用程序类可以组合两个加权平均值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T03:20:23.033

您也可以使用[AggregateSummaryStatistics](http://commons.apache.org/proper/commons-math/apidocs/org/apache/commons/math3/stat/descriptive/AggregateSummaryStatistics.html)直接执行此操作。请参阅Commons Math 用户指南的[统计](http://commons.apache.org/proper/commons-math/userguide/stat.html)部分中标题为“同时计算多个样本的统计数据和整体统计数据”的部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T00:59:07.270

既然你说你有平均值和计数，你想使用的一般公式是将平均值的乘积除以它们的计数，然后除以它们的计数总和。

*例如*，对于两个`SummaryStatistics`对象`A`和`B`，您将使用：

```
double weightedMean = (A.getMean() * A.getN() + B.getMean() * B.getN()) /
                      (A.getN() + B.getN()); 
```

对于他们中的许多人（*例如*，`List`其中一个称为“manyStats”），您可能会执行以下操作：

```
double accum = 0.0;
long n = 0;
for (SummaryStatisics s: manyStats) {
  accum += s.getMean() * s.getN();
  n += s.getN();
}
double weightedMean = accum / n; 
```

# android - java.io.IOException：BufferedInputStream 已关闭

> ID：15339875
> 
> 赞同：4
> 
> 时间：2013-03-11T13:29:42.933
> 
> 标签：android, android-listview, android-asynctask, android-imageview, android-image

我正在尝试在 android 的列表视图中从 url 加载图像。我正在使用下面的代码来做到这一点。

```
 Bitmap bm;
        try {
            URL url = new URL(imageUrl);
            bm = BitmapFactory.decodeStream(url.openConnection().getInputStream());
        } catch (Exception e) {
            Log.e("Error", e.getMessage());
            e.printStackTrace();
        }
        imageView.setImageBitmap(bm); 
```

我在 AsyncTask 中执行上述代码。当我执行时，它显示正确。但是在我转移到另一个活动并回来之后，图像没有显示。当时我的logcat显示，

```
W/System.err(3570): java.io.IOException: BufferedInputStream is closed
W/System.err(3570):     at java.io.BufferedInputStream.streamClosed(BufferedInputStream.java:116)
W/System.err(3570):     at java.io.BufferedInputStream.read(BufferedInputStream.java:274)
W/System.err(3570):     at org.apache.harmony.luni.internal.net.www.protocol.http.UnknownLengthHttpInputStream.read(UnknownLengthHttpInputStream.java:40)
W/System.err(3570):     at java.io.BufferedInputStream.fillbuf(BufferedInputStream.java:166)
W/System.err(3570):     at java.io.BufferedInputStream.read(BufferedInputStream.java:324)
W/System.err(3570):     at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
W/System.err(3570):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:573)
W/System.err(3570):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:628)
W/System.err(3570):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
W/System.err(3570):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
W/System.err(3570):     at java.util.concurrent.FutureTask.run(FutureTask.java:138)
W/System.err(3570):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
W/System.err(3570):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
W/System.err(3570):     at java.lang.Thread.run(Thread.java:1019) 
```

实际上错误显示在下面的行中，

```
bm = BitmapFactory.decodeStream(url.openConnection().getInputStream()); 
```

我已经在 SO 中搜索并找到与此相关的不同帖子，但找不到任何解决方案......有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T14:34:43.673

试试 Google 的 Jess 的这个解决方法：

修复代码：

```
/**
 * This input stream won't read() after the underlying stream is exhausted.
 * http://code.google.com/p/android/issues/detail?id=14562
 */
final class DoneHandlerInputStream extends FilterInputStream {
    private boolean done;

    public DoneHandlerInputStream(InputStream stream) {
        super(stream);
    }

    @Override public int read(byte[] bytes, int offset, int count) throws IOException {
        if (!done) {
            int result = super.read(bytes, offset, count);
            if (result != -1) {
                return result;
            }
        }
        done = true;
        return -1;
    }
} 
```

要使用，将从 getInputStream() 返回的流包装在 DoneHandlerInputStream 中：

```
 InputStream stream = url.openConnection().getInputStream();
   stream = new DoneHandlerInputStream(stream);

   bm = BitmapFactory.decodeStream(stream);
   //rest of your code 
```

查看完整说明： [http ://code.google.com/p/android/issues/detail?id=14562](http://code.google.com/p/android/issues/detail?id=14562)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T14:00:10.083

尝试

```
URL url = new URL(url);
private Bitmap getBitmap(String url) {  

try {

    Bitmap bm = null;

    bm = BitmapFactory.decodeStream(url.openConnection().getInputStream());
    return bitmap;

} catch (Exception e) {
    Log.e("Error", e.getMessage());
    e.printStackTrace();
   }

}
imageView.setImageBitmap(getBitmap.url); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T15:17:46.143

```
 try {
        is = conn.getInputStream();
        BufferedInputStream bis = new BufferedInputStream(is);
        bm = BitmapFactory.decodeStream(bis);
            is.close();//add
        conn.disconnect();//add
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-28T11:00:13.493

您可能正在使用http **url**访问http**端点**

# c# - C#新类清除基类值

> ID：15339882
> 
> 赞同：1
> 
> 时间：2013-03-11T13:30:05.667
> 
> 标签：c#, class, parameters, field, base

我已经广泛搜索（尽管可能错过了它）。我一直在做这么多的网络开发，我似乎无法得到这个。我有一个基本案例：

```
public class myfields
{
    public String myfield1 { get; set; }
} 
```

然后另一个类使用这个类：

```
class mydohere : myfields
{
    public Boolean getValue {string xyz)
    {
        string abc = myfield1;
    }
} 
```

我无法得到的是，如果我创建：

```
mydohere Objmydohere  = new mydohere(); 
```

myfield1 的值现在为空！基本 myfields 中的所有值都设置为 null（或为空，因为它是一个新对象）。在一个类中创建字段（或参数）并在其他类中共享而不重置其值的最佳方法是什么？我试过使用关键字'base'。我试过使用道具和字段*因为你不能实例化它们）。

我的目标是拥有一类可设置的字段，我可以在跨类中使用它，而无需为每个使用它的类创建新的类。这有意义吗？我敢肯定有更好的方法来做到这一点:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:34:07.377

听起来您正在寻找的是一个`constant`或`static`变量。

如果它总是相同，则使用常量：

```
const string myfield1 = "my const"; 
```

如果您想设置一次，请使用静态，也许在执行一些逻辑之后：

```
static string myfield1 = "my static"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:36:46.973

这真的取决于你想用这个“共享数据”做什么一种方法是使用静态类和依赖注入：

```
public interface Imyfields
{
    String myfield1 { get; set; }
}

public class myfields : Imyfields
{
    private static readonly Imyfields instance = new myfields();

    private myfields()
    {
    }

    public static Imyfields Instance
    {
        get
        {
            return instance;
        }
    }

    public String myfield1 { get; set; }
}

class mydohere
{
    private readonly Imyfields myfields;

    public mydohere(Imyfields myfields)
    {
        this.myfields = myfields;
    }

    public Boolean getValue(string xyz)
    {
        string abc = this.myfields.myfield1;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T13:38:38.417

没有任何内容被重置为 null，它从未在第一次使用值初始化。在您的基础对象中，您只有一个 getter/setter，您没有任何初始化值本身的代码。

也许我不太了解这个问题，而其他关于静态的建议才是你真正需要的！:)

# c# - 如何将文件上传到url

> ID：15339886
> 
> 赞同：0
> 
> 时间：2013-03-11T13:30:09.610
> 
> 标签：c#, file-upload, asp.net-mvc-4

我正在尝试从浏览器上传文件并将其复制到 URL 文件夹

使用升c。

（我拥有此文件夹的所有权限）

我没有问题将文件上传到我的硬盘

像这样：

```
HttpPostedFileBase myfile;

var path = Path.Combine(Server.MapPath("~/txt"), fileName);

myfile.SaveAs(path); 
```

我尝试将它上传到这样的 URL，但我遇到了异常

```
HttpPostedFileBase myfile;

var path =VirtualPathUtility.ToAbsolute("http://localhost:8080/game/images/"+fileName);

myfile.SaveAs(path); 
```

例外：

```
System.ArgumentException: The relative virtual path 'http:/localhost:8080/game/images/ a baby bottle. Jpg' is not allowed here.
    In - System.Web.VirtualPath.Create (String virtualPath, VirtualPathOptions 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T13:33:09.807

您不能将文件上传到远程位置。如果你想让它工作，你必须修改远程服务器，使其接受文件上传，就像你的服务器接受文件上传一样，然后使用`WebClient`. 您不能使用该`SaveAs`方法，因为它需要本地路径。

您可以进行以下控制器操作：

```
[HttpPost]
public ActionResult Upload(HttpPostedFileBase myFile)
{
    if (myFile != null && myFile.ContentLength > 0) 
    {
        var fileName = Path.GetFileName(myFile.FileName);
        var path = Path.Combine(Server.MapPath("~/App_Data"), fileName);
        myFile.SaveAs(path);
    }    

    ...
} 
```

以及带有文件输入的相应表单：

```
@using (Html.BeginForm("Upload", null, FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    <input type="file" name="myFile" />
    <button type="submit">Click this to upload the file</button>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:34:10.910

你应该使用`Server.MapPath("Path")`

```
var path = Server.MapPath("~/images/") + fileName);
myfile.SaveAs(path); 
```

# android - Activity onResume 时如何刷新 SurfaceView？

> ID：15339889
> 
> 赞同：3
> 
> 时间：2013-03-11T13:30:20.313
> 
> 标签：android, media-player, surfaceview

我使用播放 rtsp 视频流`MediaPlayer`并将其显示在`SurfaceView`. 我在 MediaPlayer 中进行初始工作`Activity.onResume()`并在`Activity.onPause()`. 当跳转到**正常**的活动（调用`onPause`）然后返回（调用`onResume`）时，它工作正常。

问题是，在播放视频时，跳转到类似**对话框的**Activity 并返回，视频无法刷新（视频帧被冻结）但音频很好。在这种情况下，我该怎么做才能正常播放视频流？如何刷新 SurfaceView？

谢谢你们。

ps：如上所述，**普通**的Activity是填满整个窗口的Activity，而**类对话框的Activity**是看起来像AlertDialog的Activity，通常是带有`android:theme="@android:style/Theme.Dialog"`主题的Activity，就像GoogleVoice app一样。这种Activity在前台时，我们可以看到后台Activity的一部分。

**编辑**：我的代码有点复杂，我粘贴了关键片段：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    //....
    mPreview = (SurfaceView) this.findViewById(R.id.playerView);
    mHolder = mPreview.getHolder();
    mHolder.addCallback(this);
    mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
}

@Override
protected void onResume() {
    mPath = "rtsp://10.10.20.42/Viral.mp4";
    // Create a new media player and set the listeners
    mMediaPlayer = new MediaPlayer();
    mMediaPlayer.setDataSource(mPath);
    // mMediaPlayer.setDisplay(holder);
    mMediaPlayer.setScreenOnWhilePlaying(true);
    mMediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
    mMediaPlayer.prepareAsync();
    mMediaPlayer.setOnBufferingUpdateListener(this);
    mMediaPlayer.setOnCompletionListener(this);
    mMediaPlayer.setOnPreparedListener(this);
    mMediaPlayer.setOnVideoSizeChangedListener(this);
    mMediaPlayer.setOnErrorListener(this);

    super.onResume();
}

@Override
protected void onPause() {
    if (mMediaPlayer != null) {

        mMediaPlayer.release();
        mMediaPlayer = null;
    }
    super.onPause();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T08:58:18.200

好吧，我终于解决了这个问题。我没有重新设置`SurfaceHolder`（`MediaPlayer`调用`mMediaPlayer.setDisplay(SurfaceHolder holder)`）。

这是我的代码：

```
@Override
protected void onResume() {
    mPath = "rtsp://10.10.20.42/Viral.mp4";
    // Create a new media player and set the listeners
    mMediaPlayer = new MediaPlayer();
    mMediaPlayer.setDataSource(mPath);
    // mMediaPlayer.setDisplay(holder);
    mMediaPlayer.setScreenOnWhilePlaying(true);
    mMediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
    mMediaPlayer.prepareAsync();
    mMediaPlayer.setOnBufferingUpdateListener(this);
    mMediaPlayer.setOnCompletionListener(this);
    mMediaPlayer.setOnPreparedListener(this);
    mMediaPlayer.setOnVideoSizeChangedListener(this);
    mMediaPlayer.setOnErrorListener(this);

    if (mHolder != null) {
        mMediaPlayer.setDisplay(mHolder);
    }
    super.onResume();
}

@Override
public void surfaceChanged(SurfaceHolder surfaceholder, int i, int j, int k) {
    Log.d(TAG, "surfaceChanged called");
    this.mHolder = surfaceholder;
    if (mMediaPlayer != null) {
        mMediaPlayer.setDisplay(surfaceholder);
    }
} 
```

# php - 重新排序/重新包装 bbcodes

> ID：15339891
> 
> 赞同：3
> 
> 时间：2013-03-11T13:30:22.280
> 
> 标签：php, html

我正在尝试重新排序 BBCode，但我失败了

所以

[̶b̶]̶[̶i̶]̶[̶u̶]̶f̶o̶o̶[̶/̶b̶]̶[̶/̶u̶]̶[̶/̶i̶]̶̶-̶̶w̶r̶o̶n̶g̶̶o̶r̶d̶e̶r̶̶̶̶

I̶̶w̶a̶n̶t̶̶i̶t̶̶t̶o̶̶b̶e̶:̶̶̶

̶[̶b̶]̶[̶i̶]̶[̶u̶]̶f̶o̶o̶[̶/̶u̶]̶[̶/̶i̶]̶[̶/̶b̶]̶̶-̶̶r̶i̶g̶h̶t̶̶o̶r̶d̶e̶r̶

图片：![在此处输入图像描述](../Images/7f030d4295a30095e215ba396ad41d62.png)

我试过了

```
<?php
$string = '[b][i][u]foo[/b][/u][/i]'; 
$search = array('/\[b](.+?)\[\/b]/is', '/\[i](.+?)\[\/i]/is', '/\[u](.+?)\[\/u]/is'); 
$replace = array('[b]$1[/b]', '[i]$1[/i]', '[u]$1[/u]'); 
echo preg_replace($search, $replace, $string); 
?> 
```

**输出：** [b][i][u]foo[/b][/u][/i]

有什么建议么 ？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T07:44:42.703

唷，花了一段时间思考这样做的逻辑。（随意把它放在一个函数中）

**这仅适用于给定的场景。就像其他用户评论的那样，这是不可能的。你不应该这样做。甚至在服务器端。我会使用客户端解析器来抛出语法错误。**

支持`[b]a[i]b[u]foo[/b]baa[/u]too[/i]`

和带有自定义值的 bbcode`[url=test][i][u]foo[/url][/u][/i]`

将与 `[b] bold [/b][u] underline[/u]` And决裂`[b] bold [u][/b] underline[/u]`

```
 //input string to be reorganized
    $string = '[url=test][i][u]foo[/url][/u][/i]';
    echo $string . "<br />";

    //search for all opentags (including ones with values
    $tagsearch = "/\[([A-Za-z]+)[A-Za-z=._%?&:\/-]*\]/";
    preg_match_all($tagsearch, $string, $tags);

    //search for all close tags to store them for later
    $closetagsearch = "/(\[\/([A-Za-z]+)\])/is";
    preg_match_all($closetagsearch, $string, $closetags);

    //flip the open tags for reverse parsing (index one is just letters)
    $tags[1] = array_reverse($tags[1]);
    //create temp var to store new ordered string
    $temp = "";
    //this is the last known position in the original string after a match
    $last = 0;
    //iterate through each char of the input string
    for ($i = 0, $len = strlen($string); $i < $len; $i++) {
        //if we run out of tags to replace/find stop looping
        if (empty($tags[1]) || empty($closetags[1]))
            continue;
        //this is the part of the string that has no matches
        $good = substr($string, $last, $i - $last);
        //next closing tag to search for
        $next = $closetags[1][0];
        //how many chars ahead to compare against
        $scope = substr($string, $i, strlen($next));
        //if we have a match
        if ($scope === "$next") {
            //add to the temp variable with a modified 
            //version of an open tag letter to become a close tag
            $temp .= $good . substr_replace("[" . $tags[1][0] . "]", "/", 1, 0);
            //remove the first key/value in both arrays
            array_shift($tags[1]);
            array_shift($closetags[1]);
            //update the last known unmatched char
            $last += strlen($good . $scope);
        }
    }

    echo $temp; 
```

另请注意：用户可能有意无序嵌套标签：X

# blackberry - 在 BlackBerry 中的每行 CustomListField 上附加一个 ButtonField

> ID：15339896
> 
> 赞同：1
> 
> 时间：2013-03-11T13:30:40.423
> 
> 标签：blackberry, blackberry-simulator, blackberry-jde, blackberry-webworks

我正在尝试使用一个图像、一些文本和每行的**ButtonField创建一个****ObjectListField 。**它可以连续使用图像和文本，但我想在每一行的末尾创建一个按钮，该按钮独立地执行与该特定行相关的操作。

 **在这里，我在 click 上有两种不同的功能，一种是单击行，另一种是单击按钮。那么，如何创建这样的 ObjectListField？**

# eclipse - 使用横杆 ggplot2

> ID：15339898
> 
> 赞同：1
> 
> 时间：2013-03-11T13:30:56.850
> 
> 标签：eclipse, r, cran

我正在为不同的气候模型绘制条形图。我想制作一个将模型与观察结果进行比较的图。气候模型将绘制为条形图（geom_bar()），但我想要观察横杆。

下面的脚本绘制了一个图，但在图上方绘制了一些东西（倒三角形）。这个脚本有什么问题？，我错过了什么吗？

```
ch<-structure(list(Month = structure(c(4L, 5L, 6L, 7L, 8L, 9L, 10L, 
11L, 12L, 1L, 2L, 3L), .Label = c("Oct", "Nov", "Dec", "Jan", 
"Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep"), class = c("ordered", 
"factor")), GCM1 = c(169.5, 157.19, 90.07, 42.97, 13.24, 1.56, 
2.53, 5.99, 14.92, 46.35, 88.23, 138.02), GCM2 = c(215.01, 193.37, 
131.14, 41.48, 7.63, 0.94, 0.81, 0.78, 1.88, 15.95, 99.58, 188.16
), GCM3 = c(164.83, 158.82, 97.5, 29.27, 5.47, 2.14, 3.34, 0.85, 
9.94, 16.9, 57.21, 117.05), OBS = c(142.25, 138.59, 59.95, 26.48, 
2.61, 0.2, 0.1, 0.4, 0.72, 11.64, 38.75, 119.82)), .Names = c("Month", 
"GCM1", "GCM2", "GCM3", "OBS"), row.names = c(NA, -12L), class = "data.frame")

ch$Month<-month.abb
ch$Month<-factor(ch$Month, levels=c(month.abb[10:12],month.abb[1:9]), ordered=TRUE)

chm<-melt(ch, id="Month")

cbPalette1 <- cbbPalette <- c("#D55E00", "#56B4E9", "#009E73","#0072B2", "#CC79A7","#000000")

p<-ggplot(data=chm,aes(x=factor(Month),y=value,group=variable,fill=variable))+geom_bar(subset = .(variable != "OBS"),stat="identity",position=position_dodge())+
                scale_fill_manual(values=cbPalette1)+
                geom_crossbar(subset = .(variable == "OBS"),aes(ymin = min(value), ymax = max(value)), col="gray30",fatten=3) 
```

…………

提前谢谢了

BHH

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T23:29:06.727

两件事情：

1.  您将组美学压倒在 be `variable`，因此在横梁中，它忽略了不同的`x`值（将其视为连续的），这给出了一个奇怪的横梁。

2.  我认为你只想要酒吧本身，而不是它周围的任何程度。如果是这样，您希望将`ymin`和设置`ymax`为中心值，而不是所有中心值​​的范围。

进行这两项更改：

```
p<-ggplot(data=chm,
          aes(x = Month,
              y = value,
              fill = variable)) +
  geom_bar(subset = .(variable != "OBS"), 
           stat="identity",
           position=position_dodge()) +
  scale_fill_manual(values=cbPalette1)+
  geom_crossbar(subset = .(variable == "OBS"),
                aes(ymin = value, ymax = value), 
                col="gray30", fatten=3) 
```

![在此处输入图像描述](../Images/24d42dbafd4b624ff2fef938f9980667.png)

# c# - 将数据从 DataTable 移动到 Excel 时出现异常

> ID：15339903
> 
> 赞同：0
> 
> 时间：2013-03-11T13:31:04.007
> 
> 标签：c#, excel, xlsx

在下面的代码中，被注释的语句会引发异常

```
try {
    foreach(DataRow dr in dt.Rows) {
        for(int i=1; i<NumColumns+1; i++) {

            // this statement throws 
            xlWorkSheet.Cells[rowCount, i].value=dr[i - 1].ToString();

        }
        rowCount+=1;
    }

}
catch(Exception) {
    throw;
} 
```

它试图移动的数据如下：

> === 3 ===

这是它到达的位置的屏幕截图：

![UdScI.png](../Images/c87ac1ced27e7eaf0b4273a0d4650c47.png)

这可以解决吗？或者我是否需要研究使用其他工具将数据移动到 Excel（例如 closedXML）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T13:36:08.153

这是因为字符串**以等号开头**，因此需要创建一个*公式*。您可以使用撇号，然后使用等号（即，以 开头`'=`）。

您的原始字符串可能会导致`COMException`如下`HRESULT:0x800A03EC`屏幕截图所示：

![43uKH.jpg](../Images/4d25c789d82a07139e232d5b31525089.png)

使用我测试过的以下代码，数据没有问题，例如

> '=== 3 ===

代码：

```
namespace TestNamespace {
    using Excel=Microsoft.Office.Interop.Excel;

    public static class TestClass {
        static DataTable BuildTestDataTable() {
            var dt=new DataTable();
            dt.Columns.Add("Name", typeof(String));
            dt.Columns.Add("Age", typeof(int));
            dt.Columns.Add("Gender", typeof(String));
            dt.Columns.Add("Memo", typeof(String));

            dt.Rows.Add(new object[] { "Leon Scott Kennedy", 36, "M", "'=== 1 ===" });
            dt.Rows.Add(new object[] { "Ada Wong", 39, "F", "'=== 3 ===" });
            return dt;
        }

        public static void ExportToExcel(this DataTable dt, String fileName) {
            var xlApp=new Excel.ApplicationClass();

            var xlWorkBook=xlApp.Workbooks.Open(
                fileName,
                0,
                false, // for read/write
                5, "", "", true, Excel.XlPlatform.xlWindows,
                "\t", false, false, 0, true, 1, 0
                );

            var xlWorkSheet=(Excel.Worksheet)xlWorkBook.Worksheets[1];
            var NumColumns=dt.Columns.Count;
            var rowCount=dt.Rows.Count;

            try {
                foreach(DataRow dr in dt.Rows) {
                    for(int i=1; i<NumColumns+1; i++) {
                        xlWorkSheet.Cells[rowCount, i]=dr[i-1].ToString();
                    }
                    rowCount+=1;
                }

                xlWorkBook.Save();
            }
            catch(Exception) {
                throw;
            }
            finally {
                xlApp.Quit();
            }
        }

        public static void TestMethod() {
            TestClass.BuildTestDataTable().ExportToExcel(@"c:\ExistingFile.xlsx");
            // TestClass.BuildTestDataTable().ExportToExcel(@"c:\ExistingFile.xls");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T13:37:51.257

尝试这个。

```
public void ExporttoExcel(DataTable table,string type)
    {

        HttpContext.Current.Response.Clear();
        HttpContext.Current.Response.ClearContent();
        HttpContext.Current.Response.ClearHeaders();
        HttpContext.Current.Response.Buffer = true;
        HttpContext.Current.Response.ContentType = "application/ms-excel";
        //HttpContext.Current.Response.ContentType = "application/ms-word";
        HttpContext.Current.Response.Write(@"<!DOCTYPE HTML PUBLIC ""-//W3C//DTD HTML 4.0 Transitional//EN"">");

        HttpContext.Current.Response.AddHeader("Content-Disposition", "attachment;filename="+ type +".xls");
       // HttpContext.Current.Response.AddHeader("Content-Disposition", "attachment;filename=Reports.doc");
        HttpContext.Current.Response.Charset = "utf-8";
        HttpContext.Current.Response.ContentEncoding = System.Text.Encoding.GetEncoding("windows-1250");
        HttpContext.Current.Response.Write("<font style='font-size:10.0pt; font-family:Calibri;'>");
        HttpContext.Current.Response.Write("<BR><BR><BR>");
        HttpContext.Current.Response.Write("<Table border='1' bgColor='#ffffff' borderColor='#000000' cellSpacing='2' cellPadding='2' style='font-size:10.0pt; font-family:Arial; background:white;'> <TR>");
        int columnscount = table.Columns.Count;

        for (int j = 0; j < columnscount; j++)
        {
            HttpContext.Current.Response.Write("<Td>");
            HttpContext.Current.Response.Write("<B>");
            HttpContext.Current.Response.Write(table.Columns[j].ColumnName.ToString());
            HttpContext.Current.Response.Write("</B>");
            HttpContext.Current.Response.Write("</Td>");
        }
        HttpContext.Current.Response.Write("</TR>");
        foreach (DataRow row in table.Rows)
        {
            HttpContext.Current.Response.Write("<TR>");
            for (int i = 0; i < table.Columns.Count; i++)
            {
                HttpContext.Current.Response.Write("<Td>");
                HttpContext.Current.Response.Write(row[i].ToString());
                HttpContext.Current.Response.Write("</Td>");
            }

            HttpContext.Current.Response.Write("</TR>");
        }
        HttpContext.Current.Response.Write("</Table>");
        HttpContext.Current.Response.Write("</font>");
        HttpContext.Current.Response.Flush();
        HttpContext.Current.Response.End();
    } 
```

# c# - 考虑用 DataContractAttribute 属性标记它吗？

> ID：15339909
> 
> 赞同：1
> 
> 时间：2013-03-11T13:31:25.320
> 
> 标签：c#, .net, serialization

我有这个代码：

```
IList<Type> lista = new List<Type>();
lista.Add(typeof(Google.GData.YouTube.YouTubeEntry));

using (FileStream writer = new FileStream("c:/temp/file.xml", FileMode.Create, FileAccess.Write))
{
    DataContractSerializer ser = new DataContractSerializer(videoContainer.GetType(), lista);
    ser.WriteObject(writer, videoContainer);
} 
```

这对我产生了这个异常：`Type 'Google.GData.Client.AtomUri' cannot be serialized. Consider marking it with the DataContractAttribute attribute, and marking all of its members you want serialized with the DataMemberAttribute attribute. See the Microsoft .NET Framework documentation for other supported types.`

我无法编辑`Google.GData.Client.AtomUri`添加这些属性（它是一个库）。

那么，我该如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T13:37:24.080

> 我无法编辑 Google.GData.Client.AtomUri 添加这些属性（它是一个库）。

那么你有两个选择：

*   *编写一个单独的可*序列化的 DTO 层；这通常是微不足道的，并且在遇到***任何***序列化程序问题时几乎总是我的首选路线。含义：编写您自己的一组类型，这些类型看起来与`GData`类大致相似，以适合您选择的序列化程序的方式装饰和构造 - 并编写几行代码在它们之间进行映射
*   使用构造函数的多个重载之一`DataContractSerializer`来指定附加信息；坦率地说，这通常只会让你进入一个复杂的迷宫，在笨拙的代码中越来越多地告诉它，直到它*几乎可以工作*；DTO 更易于维护

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T14:28:39.747

如果您所追求的只是属性的值，则可以使用基本反射并显示它们。这将显示给定对象的所有属性值，包括遍历集合。不是世界上最好的代码，而是一个很好的快速而肮脏的读取对象的解决方案。

```
static void ShowProperties(object o, int indent = 0)
{
    foreach (var prop in o.GetType().GetProperties(BindingFlags.Public | BindingFlags.Instance))
    {
        if (typeof(IEnumerable).IsAssignableFrom(prop.PropertyType) && prop.PropertyType != typeof(string))
        {
            Console.WriteLine("{0}{1}:", string.Empty.PadRight(indent), prop.Name);
            var coll = (IEnumerable)prop.GetValue(o, null);
            if (coll != null)
            {
                foreach (object sub in coll)
                {
                    ShowProperties(sub, indent + 1);
                }
            }
        }
        else
        {
            Console.WriteLine("{0}{1}: {2}", string.Empty.PadRight(indent), prop.Name, prop.GetValue(o, null));
        }
    }
    Console.WriteLine("{0}------------", string.Empty.PadRight(indent));
} 
```

# c# - C# 将双数组传递给 C++ dll

> ID：15339922
> 
> 赞同：0
> 
> 时间：2013-03-11T13:32:20.857
> 
> 标签：c#, c++, arrays, dll, parameter-passing

我有一个用 C# 代码初始化的数组；然后我将把它传递给 C++ dll，其中数组的每个条目都将被重新分配新值。然后将数组与新值一起返回给 C#。我想知道

1.  将数组从 C# 传递到 C++ 的最佳方法是什么？（C#中这个数组的数据结构）
2.  从 C++ 返回数组的最佳方法是什么？（这个数组在 C++ 中的数据结构）

我的代码不起作用：

在 C# 中

```
private static double[] _statsArray = new double[4];
GetImageStats( ref _statsArray); 
```

在 C++ dll 中：

```
DllExportImageStatistics GetImageStats( double (&pSignalArray)[4]) 
```

感谢您的任何建议；几行代码会有很大帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T13:53:34.410

我认为应该是：

```
private static double[] _statsArray = new double[4];
GetImageStats(_statsArray); // Lose the ref 
```

和

```
DllExportImageStatistics GetImageStats(double pSignalArray[4]) 
```

# asp.net-mvc-4 - 如何使用来自服务器的下拉列表来使用 knockoutjs

> ID：15339927
> 
> 赞同：0
> 
> 时间：2013-03-11T13:32:36.553
> 
> 标签：asp.net-mvc-4, knockout.js, knockout-2.0, knockout-validation, knockout-mvc

从服务器我得到 A 或 B 或 G 类型

我希望它显示的是一个下拉文本 Gamma（如果它是 G）和 Alpha（如果它是 A）和 Beta（如果它是 B）。还有要选择的项目......不知道该怎么做。

这是我从后端得到的.. 一个可观察的数组

```
 self.AllValues = ko.observableArray([{"ID":1,"Type":"A" .... }]); 
```

我有类似下面的类型是 AB OR G ...

```
 <td class="label">Drop-down list:</td>
 <td><select data-bind="options: optionValues, value: selectedOptionValue"></select>
 </td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:56:01.080

你在这里有几个选择。您可以处理从服务器返回的数据，并将包含完整文本名称的属性添加到每个对象，然后将您的数组绑定到选择，使用这个新属性作为选择的文本，或者您可以使用[自定义绑定](http://knockoutjs.com/documentation/custom-bindings.html)来创建选择元素和其中的所有选项，在每个选项中替换您想要的全文。

我会说第一个选项将是最好的实现。

# html - 如何编写持久的 CSS 框规则？

> ID：15339932
> 
> 赞同：0
> 
> 时间：2013-03-11T13:32:42.553
> 
> 标签：html, google-chrome, css

根据这个[问题](https://stackoverflow.com/questions/11773378/css3-flex-direction-property-lost-effect-in-chrome-21)，Chrome的开发者改变了

`display: -webkit-box`到`display: -webkit-flexbox`

但是，当我现在测试它（v25.0.1364）时，我看到它再次发生了变化，看看我们有什么：

![新旧实现](../Images/e968a6389d4c07bb3f793a1ac49fa021.png)

我们再次失败`display:-webkit-flex`并`-webkit-flex-direction:column`统治。
（黑色字体表示不适用）

因此，我想写一个防弹规则，所以无论如何它都会起作用。但是，如果我写这样的东西：

```
<div id="box_container" class="horz_new horz_old"> <div> 
```

它再次失败，因为它接受一些`webkit-box`属性以及`-webkit-flex`一些在规则之间产生一些冲突的属性。

我已经准备了一个[jsfiddle](http://jsfiddle.net/UjZF9/)，包括所有需要的东西。

谁能帮我解决这个问题？或者，也许我应该回到浮动 div？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:29:15.673

旧`-webkit-box-*`属性仅适用于（相关）具有`display: -webkit-box`它们的容器。您应该能够混合使用新的 ( `display: flex`) 和旧的 flexbox ( `display: box`)，这有多大问题。这是一篇关于两者结合使用的精彩文章：http: [//css-tricks.com/using-flexbox/](http://css-tricks.com/using-flexbox/)

我已经更新了你的小提琴（[http://jsfiddle.net/UjZF9/1/](http://jsfiddle.net/UjZF9/1/)），做了一些改变，让一切正常。基本上：

*   `-webkit-flex-direction: row;`用于水平布局（默认）和`-webkit-flex-direction: column;`垂直布局。
*   `stretch`不是该`justify-content`属性的可能值。有关可能的值，请参阅[https://developer.mozilla.org/en-US/docs/CSS/justify-content](https://developer.mozilla.org/en-US/docs/CSS/justify-content)。
*   你需要一个`-webkit-flex:1`关于你的孩子的（类似于`-webkit-box-flex:1`）。

我在[http://www.htmlfivecan.com/#11](http://www.htmlfivecan.com/#11)上有一些不错的可播放演示，以了解不同的 flexbox 属性如何改变布局。试试看。

# xcode - Xcode 4.6 在 Mountain Lion 上崩溃

> ID：15339935
> 
> 赞同：0
> 
> 时间：2013-03-11T13:32:43.863
> 
> 标签：xcode, ios-simulator

我正在尝试使用 Xcode，但由于我使用的是 OS X Mountain Lion (10.8)，所以它总是崩溃。如果我尝试使用 iOS 模拟器运行一个应用程序（一个没有任何东西的新项目），它会崩溃。如果我进入设置它会崩溃。

我试过删除 Xcode（移到垃圾箱），从 Mac App Store 重新安装它，修复硬盘......但没有任何效果。

有任何想法吗？

如果你需要，我可以复制日志。编辑：登录[http://pastebin.com/rgsYbpQ0](http://pastebin.com/rgsYbpQ0)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:10:23.630

卸载后我会尝试清除这两个文件夹：

```
~/Library/Developer/Xcode/

/Library/Developer/Xcode/ 
```

# jquery - 如何告诉 jquery 将请求放入等待队列

> ID：15339938
> 
> 赞同：1
> 
> 时间：2013-03-11T13:32:54.490
> 
> 标签：jquery

如果您在 input#toolText 中快速输入 Ajax/jquery 将无法跟随。我如何让 Jquery 使用 ajax 等待上一个请求完成？

```
$(function () {
    $("#toolText").keypress(function () {
        var toolTextData = $(this).val();
        $.ajax({
            url: 'JQ/toolResult.php',
            data: {
                q: toolTextData
            },
           /*stuff */
        });
    });
}); 
```

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:34:20.977

我会考虑添加一个标志，并且在前一个完成之前不处理另一个 ajax 请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:40:19.650

您可以添加异步属性。这将使浏览器等待上一个 ajax 调用完成。

```
$(function () {
    $("#toolText").keypress(function () {
        var toolTextData = $(this).val();
        $.ajax({
            url: 'JQ/toolResult.php',
            async: false,
            data: {
                q: toolTextData
            },
           /*stuff */
        });
    });
}); 
```

# syntax - 是否可以循环此语法

> ID：15339940
> 
> 赞同：0
> 
> 时间：2013-03-11T13:32:56.503
> 
> 标签：syntax, macros, statistics, spss

我一直在尝试循环以下 sytanx 说 10 次。

```
COMPUTE tempvar=UNIFORM(10).
SORT CASES BY behaviour_code tempvar (A).
SPLIT FILE BY behaviour_code.
COMPUTE tempvar=1.
CREATE filter=CSUM(tempvar).
RECODE filter (1 thru 100=1) (3 thru highest=0).
SPLIT FILE OFF.

DISCRIMINANT
/GROUPS=behaviour_code(1 4)
/VARIABLES=hx hy hz
/SELECT=filter(1)
/ANALYSIS ALL
/PRIORS EQUAL
/STATISTICS=TABLE CROSSVALID
/CLASSIFY=NONMISSING POOLED.
EXECUTE. 
```

语法本身从每个组中随机选择 x 个案例，然后运行 ​​DISCRIMINANT 命令。

我使用循环命令尝试了以下操作：

```
SET MXLOOPS=10.
LOOP. 
COMPUTE tempvar=UNIFORM(10).
SORT CASES BY behaviour_code tempvar (A).
SPLIT FILE BY behaviour_code.
COMPUTE tempvar=1.
CREATE filter=CSUM(tempvar).
RECODE filter (1 thru 100=1) (3 thru highest=0).
SPLIT FILE OFF.

DISCRIMINANT
/GROUPS=behaviour_code(1 4)
/VARIABLES=hx hy hz
/SELECT=filter(1)
/ANALYSIS ALL
/PRIORS EQUAL
/STATISTICS=TABLE CROSSVALID
/CLASSIFY=NONMISSING POOLED.
EXECUTE.
END LOOP. 
```

谁能建议如何最好地让原始脚本有效地重新采样给定次数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:55:38.327

您不能将过程放在循环中。但是，如果您从 SPSS 社区网站安装 Python Essentials，则可以使用 Python 可编程性来循环任何内容。

# c# - 更新 ResourceDictionary 中内容控件的数据绑定源

> ID：15339946
> 
> 赞同：1
> 
> 时间：2013-03-11T13:33:12.433
> 
> 标签：c#, wpf, xaml, data-binding

我想创建一个视图，该视图具有一组选项卡（每个，基本上是一个`ContentControl`），每个选项卡都有各种设置。然后我想要一个按钮来更新所有数据绑定，而不是立即更新或让更新按钮与控件本身相关联

所以，我的控件是 MEF 导出为 a`ResourceDictionary`并且类似于下面

```
<ResourceDictionary ...>
<DataTemplate DataType="{x:Type vm:AdminViewModel}">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <TabControl Grid.Row="0">
            <TabItem Header="Tests">
                <ContentControl Content="{Binding ResultStorage}"/>
            </TabItem>
        </TabControl>
        <StackPanel Grid.Row="1" Orientation="Horizontal">
            <Button Content="Update"/>
            <Button Content="Cancel"/>
        </StackPanel>
    </Grid>
</DataTemplate>
</ResourceDictionary> 
```

TestStorage 会是这样的：

```
<ResourceDictionary ...>
<DataTemplate DataType="{x:Type data:XmlResultStorage}">
    <StackPanel>
        <TextBlock Text="Result File Path:"/>
        <TextBox Text="{Binding Path=ResultPath, Source={x:Static properties:DataStorage.Default}, UpdateSourceTrigger=Explicit}"/>
        <TextBlock Text="Result File Location:"/>
        <TextBox Text="{Binding Path=ResultFilename, Source={x:Static properties:DataStorage.Default}, UpdateSourceTrigger=Explicit}"/>
    </StackPanel>
</DataTemplate> 
```

我想要做的是当按下更新按钮以某种方式调用更新（`UpdateSource`？）时，`ContentControl`但我不知道该怎么做。

在一个理想的世界里，我不会有代码隐藏并通过 MVVM 或其他东西来完成这一切，但如果这不可能，代码隐藏就可以了。

所以我有两个问题，如何通过 a 手动更新数据绑定，`ResourceDictionary`然后如何使其通过其子级级联`ContentControls`？

# javascript - 遵循 TweenJs 中的自定义路径

> ID：15339948
> 
> 赞同：5
> 
> 时间：2013-03-11T13:33:15.600
> 
> 标签：javascript, animation, tween

我正在尝试用 TweenJs 设计一个简单的动画。让我们考虑两个人在玩投掷球。我设法将球沿线性路径移动。但它必须看起来很现实。球应该像有重力一样遵循弯曲的路径。我如何在路径中定义“检查点”？或者我应该改变我的策略来实现那个目标？提前致谢..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T19:57:18.613

最近发布的 TweenJS（版本 0.4.0，2013 年 2 月 12 日）包含一个 MotionGuidePlugin。用法很简单：

```
 // Using a Motion Guide
createjs.Tween.get(target).to({guide:{ path:[0,0, 0,200,200,200, 200,0,0,0] }},7000);
// Visualizing the line
graphics.moveTo(0,0).curveTo(0,200,200,200).curveTo(200,0,0,0); 
```

这是一个快速的小提琴：http: [//jsfiddle.net/lannymcnie/qEYD4/1/](http://jsfiddle.net/lannymcnie/qEYD4/1/)

文档中的更多信息。 [http://www.createjs.com/Docs/TweenJS/classes/MotionGuidePlugin.html](http://www.createjs.com/Docs/TweenJS/classes/MotionGuidePlugin.html)

# seo - 如何使用 bitly 设置规范网址

> ID：15339949
> 
> 赞同：-1
> 
> 时间：2013-03-11T13:33:16.660
> 
> 标签：seo, facebook-opengraph, canonical-link, bit.ly

我可以使用 bit.ly 来缩短规范中的网址吗？就seo而言，对吧？

例如 ：

```
<link rel="canonical" href="<?php echo $post->og('bitly'); ?>" /> 
```

和

```
<meta property="og:url" content="<?php echo $post->og('bitly'); ?>" /> 
```

或者

```
<link rel="canonical" href="<?php echo $post->og('url'); ?>" />

url : http://domain/post/title

bitly: http://bit.ly/3tcJjx 
```

哪个是对的？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:16:56.087

您不能将规范 URL 设置为缩短的 URL 或任何重定向的 URL。

在许多方面，谷歌认为规范等同于重定向。当您指定规范 URL 时，它会告诉 Googlebot，“不要将此 URL 上的内容编入索引，转至此处并将此处的内容编入索引。” 然后，当 Google 访问 bit.ly 时，它发现它重定向回来并直接返回。逻辑是无限重定向的逻辑。

您的规范 URL**必须**是实际包含内容的 URL。它**不能**是重定向到内容的 URL。

# regex - R读取和转换文件中的行

> ID：15339952
> 
> 赞同：1
> 
> 时间：2013-03-11T13:33:26.070
> 
> 标签：regex, r, gsub, readfile

我有一个格式非常糟糕的日志文件（我无法更改它的创建方式），我希望对其进行一些分析。

我有一个匹配日志文件中特定行的正则表达式。这些行包含我想在分析之前提取并放入矩阵的数据位（字符串和数字，将被正则表达式中的匹配组捕获）。

实现这一目标的最佳方法是什么？`gsub`也许使用该功能？（我对 R 很陌生）

**编辑**，以解决评论。

我无法发布日志文件内容，但我可以举一个我想要的示例：

我的日志文件如下所示：

```
....
[Node_1] sometext [Ref:1111111, Strategy:4] Initialise Class1
[Node_1] sometext [Ref:1111111, Strategy:4] Initialise Class1 - 3432ms
some non relevant text
more non relevant text
[Node_4] sometext [Ref:1133311, Strategy:5] Run Class76
[Node_4] sometext [Ref:1133311, Strategy:6] Run Class76 - 5432ms
.... 
```

我只想读取末尾有时序的行，并且我希望矩阵中的相应行包含行中的数据位。

因此，如果我的正则表达式如下所示：

```
^\[([^]]*)\][^[]*\[([^]]*)\] (Initialise|Run) (Class[0-9]+) - ([0-9]+)ms$ 
```

我希望矩阵中的线是

```
\1,\2,\4,\5 
```

IE 对于日志文件中的第二行，矩阵中的行将显示为：

```
Node_1, "Ref:1111111, Strategy:4", Class1, 3432 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T14:26:57.047

[gsubfn](http://www.inside-r.org/packages/cran/gsubfn/docs/strapply)包中的[strapplyc](http://gsubfn.googlecode.com)可以提取捕获：

```
pat <- 
"^\\s*\\[([^]]*)\\][^[]*\\[([^]]*)\\] (Initialise|Run) (Class[0-9]+) - ([0-9]+)ms$"

Lines <- "....
[Node_1] sometext [Ref:1111111, Strategy:4] Initialise Class1
[Node_1] sometext [Ref:1111111, Strategy:4] Initialise Class1 - 3432ms
some non relevant text
more non relevant text
[Node_4] sometext [Ref:1133311, Strategy:5] Run Class76
[Node_4] sometext [Ref:1133311, Strategy:6] Run Class76 - 5432ms
...."

# read in file
Lines2 <- readLines(textConnection(Lines))
closeAllConnections()

# extract lines ending in ms
Lines3 <- grep("ms$", Lines2, value = TRUE)

# pull out captures
library(gsubfn)
strapplyc(Lines3, pat, simplify = "rbind")[, -3] 
```

最后一行的结果是：

```
 [,1]     [,2]                      [,3]      [,4]  
[1,] "Node_1" "Ref:1111111, Strategy:4" "Class1"  "3432"
[2,] "Node_4" "Ref:1133311, Strategy:6" "Class76" "5432" 
```

# pyqt - 无法将有效项目设置为 QTableWidgetItem

> ID：15339959
> 
> 赞同：1
> 
> 时间：2013-03-11T13:33:43.073
> 
> 标签：pyqt, qtablewidget, qtablewidgetitem

我正在尝试填充两个不同的 QTableWidget。对于第一个它可以找到，但对于第二个，它不会将项目设置为 QTableWidget。在第二次尝试失败时，它确实成功地创建了项目（ type(item) 和 item.text() 都可以正常工作并返回正确的值）。但是，当我尝试将项目添加到表中时，它说 table2.item(row, col) 是 NoneType。在设置项目之前，行和列已正确创建。

工作尝试：

```
item = QTableWidgetItem(self.fields[j].name())
item.setFlags(Qt.ItemIsSelectable | Qt.ItemIsEnabled)
table1.setItem(j,i,item) 
```

失败的尝试：

```
item = QTableWidgetItem(typ)
item.setFlags(Qt.ItemIsSelectable | Qt.ItemIsEnabled)             
table2.setItem(row, col, item) 
```

我也看不到这两个块之间的区别，也不明白为什么它不会将项目设置为 TableWidget。关于这是如何工作的，是否存在普遍的误解？

# database - 在 sql server 2012 中不刷新窗口

> ID：15339960
> 
> 赞同：0
> 
> 时间：2013-03-11T13:33:43.053
> 
> 标签：database, sql-server-2012

I've a problem with SQL Server 2012\. I'm running SQL server studio management 2012 and then, after connection to local database I'm trying to add a new query. After click button new query I'm getting wrong window. It's window without upper control panel. What's more main window it's not refreshing. I dunno why. It's refreshing after maximizng window, but not dynamically. I have no idea what's wrong. I've windows 7 64 bit and my version of SQL Studio management is:

```
Microsoft SQL Server Management Studio      11.0.3128.0 
Microsoft Internet Explorer                 9.10.9200.16521 
Microsoft .NET Framework                    4.0.30319.296 
Operating System                            6.1.7601 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T20:59:16.037

我注意到 2012 SSMS 有很多图形/UI 错误。相同版本 (11.0.3128.0)。
猜猜你现在已经解决了这个问题，但也许你只是将​​查询窗口拖出主 SSMS 窗口？我从未真正使用过此功能，因为它将“弹出”窗口视为模态且始终位于顶部，这很烦人。

通常，当我调整窗口大小时，会出现垂直黑条。当我拉伸窗口时，它通常会清除它，但有时我必须最小化/最大化它才能让它恢复正常。可能是一个不同的错误，但这[是一个截图](http://i.stack.imgur.com/evuvv.gif)

# java - 编码-解码冒险

> ID：15339964
> 
> 赞同：0
> 
> 时间：2013-03-11T13:33:57.113
> 
> 标签：java, javascript, decode, encode

我尝试使用`encodeURI()`和`encodeURIComponent()`函数在javascript中对特殊字符进行编码，并使用该`java.net.URLDecoder.decode()`方法对其进行解码，这就像Firefox中的魅力一样。但它似乎在 Internet Explorer 中不起作用。是否有任何替代代码可以在两个浏览器上使用相同的代码？

例子：

当我作为值传递时`$%^&`，编码后，它变成`%24%25%5E%26`. 使用 java.net.URLDecoder.decode() 方法解码后，变为`$%%5E&`

这是实际值-

```
var str = "$%^&";
var valueJS = encodeURI(str);
var valueJS = encodeURIComponent(valueJS); // to encode even those chars in valueJS that were not encoded by encodeURI() 
```

这是编码值-

```
String value = "%2524%2525%255E%2526";
while(value.matches(".*%25[A-Za-z0-9]*")) {
     value = value.replace("%25", "%"); // manually trying to achieve %24%25%5E%26
}
value = java.net.URLDecoder(value, "UTF-8");

// I was expecting the decoded value to be $%^&, but it turns out to be $%%5E& 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:16:52.603

修复。添加了 2 个`<meta>`标签

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"> 
```

并使用 javascript`escape()`而不是`encodeURI()`and`encodeURIComponent()`

# c# - MouseEnter 上绘制的形状/线条触发

> ID：15339969
> 
> 赞同：0
> 
> 时间：2013-03-11T13:34:09.750
> 
> 标签：c#, .net, winforms, events

我有 PictureBox，如何绘制在 MouseEnter 事件上触发的形状/**线条并更改颜色或执行更多操作。**

```
private void ImgViewer_Paint(object sender, PaintEventArgs e)
        {
            var graph = e.Graphics;
            using (var pen = new Pen(Color.FromArgb(0, 255, 0)))
                graph.DrawLine(pen, x1, y1, x2, y2);
        } 
```

这段代码还不够，我猜

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:46:54.200

如果您知道形状的方程式，您可以计算鼠标是在形状区域内还是在形状区域外。请注意，如果形状由几何方程相对简单的直线或圆（椭圆）组成，这很容易。例如，如果您的形状是具有 x 和 y 坐标 (10,10)、(50,10) 和 (30,50) 的三角形，那么您应该使用两点的直线方程推导出直线方程：

```
y-y1 = ((y2-y1)/(x2-x1))*(x-x1) 
```

我们三角形的直线方程将是：

```
y=1
y=2*x-10
y=-2*x+110 
```

我们应该在某个画布上绘制那个三角形，比如说在`PictureBox`带`FixedSingle`边框上。添加`Paint`事件处理程序

```
private void pictureBox1_Paint(object sender, PaintEventArgs e)
{
     Point[] p = new Point[3];
     p[0] = new Point(10,10);
     p[1] = new Point(50,10);
     p[2] = new Point(30,50);
     e.Graphics.DrawLines(Pens.Black, p);
     e.Graphics.FillPolygon(Brushes.Red, p);
} 
```

![三角形](../Images/ffb9063d540a34aca45c91f55ffc6ef9.png)

我们应该`MouseMove`为`PictureBox`

```
bool inside = false;
private void pictureBox1_MouseMove(object sender, MouseEventArgs e)
{
     if (e.Y > 10 && e.Y < 2 * e.X - 10 && e.Y < -2 * e.X + 110)
     {
          if (!inside)
          {
               inside = true;
               HandleMouseEnter();
          }
     }
     else
          inside = false;
 }
 void HandleMouseEnter()
 {
       MessageBox.Show("Mouse inside");
 } 
```

在`if`声明鼠标光标是否在三角形内（注意C#中的坐标原点在左上角但它与真实几何相似）。`HandleMouseEnter`是处理鼠标进入的方法。

您可以对任意形状使用类似的方法，但您应该有描述它的几何方程。

# c - 结构和整数的内存顺序

> ID：15339972
> 
> 赞同：2
> 
> 时间：2013-03-11T13:34:16.323
> 
> 标签：c, memory, struct, unions

我想用一个结构和一个uint64_t进行联合，所以我可以用结构引用单个uint16_ts，并将它们连接到uint64_t中。我做了这个测试程序：

```
#include "stdio.h"
#include "stdint.h"
struct test_struct{
    uint16_t stuff;
    uint16_t a;
    uint16_t b;
    uint16_t c;
};

union test_union{
    struct test_struct str;
    uint64_t uint;
};    

int main(){
    struct test_struct x = {
        .stuff = 0x0000,
        .a = 0x1234,
        .b = 0x5678,
        .c = 0x9ABC
    };
    union test_union y;
    y.str = x;

    printf("y.uint: %llX\n", y.uint);
} 
```

输出变为：

```
y.uint: 9ABC567812340000 
```

这对我来说是违反直觉的（应该是 0000123456789ABC 或 123456789ABC）。有人可以向我解释为什么结构中的元素似乎被颠倒了吗？

编辑：供将来参考：字节顺序的答案让我感到困惑，因为 uint16_ts 以正确的顺序打印。但这当然是因为它们本身是小端存储的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T13:37:19.213

您在一个 little-endian 平台上，首先存储的字节（具有最低地址）最终位于组合`uint64_t`.

如果你在大端平台上运行相同的代码，你会得到你期望的结果。您的代码不能跨具有不同字节顺序的系统移植。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:37:58.200

这一切都与[Endianess](http://en.wikipedia.org/wiki/Endianness)有关。我不认为 C/C++ 语言定义了它的工作方式，而是由实现/目标 CPU 来定义。在大端 CPU 上，你会得到你所期望的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T13:41:21.410

如果您的处理器是“小端”，则 LSB 存储在最低地址上，因此这是正常输出。在 Intel 的 x86 平台上，通常它是 little-endian。相比之下，摩托罗拉的PowerPC是big-endian，也就是说MSB存储在最低地址。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T13:44:05.513

这是因为[Little Endianess](http://www.cs.umd.edu/class/sum2003/cmsc311/Notes/Data/endian.html)。

# sql - 通过 SquirrelSQL 查询 Netezza 以未知编码返回 WKT 几何

> ID：15339990
> 
> 赞同：0
> 
> 时间：2013-03-11T13:35:08.793
> 
> 标签：sql, encoding, postgis, netezza, squirrel-sql

我正在使用[SquirrelSQL](http://squirrel-sql.sourceforge.net)在 Netezza 数据库上编写和执行 SQL 查询。使用 Netezza 的空间功能（与 PostGIS 的基本相同），我执行了一个查询并返回了一个包含几何图形的结果。这是查询，供参考：

```
SELECT t.SHAPE
FROM (SELECT * FROM OS_AB_PLUS..E12_ADDRESSBASE WHERE POSTCODE = 'RH1 6NE' 
AND PAO_START_NUMBER = '14') as a, OS_TOPO..TOPOGRAPHICAREA as t
WHERE inza..ST_Within(a.shape, t.shape) = TRUE 
```

我的问题是应该包含表示为[众所周知的文本](http://en.wikipedia.org/wiki/Well-known_text)(WKT) 的多边形坐标的几何字段看起来像这样：

```
g¹ AË Affff¬0AÍÌÌÌî0AÒ 3333Ê AÍÌÌÌî0A» Aë0Afffæ» AffffÒ0A¹ AÒ0A333³¹ A3333¿0AŒ AffffÀ0AÍÌÌLŒ Affff¬0AË A¯0AëQ8Ê A3333í0A3333Ê AÍÌÌÌî0A 
```

我似乎无法在 SquirrelSQL 中找到任何地方来指定 VARCHAR 列的编码，而且我已经看到在 Aginity（另一个 SQL 客户端）中返回的列没有编码问题。任何有关如何进行的建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T09:58:58.543

原来我的问题根本与编码无关。仅当在 select 语句中使用[ST_AsText时，](http://www.postgis.org/docs/ST_AsText.html)**才会**返回类似 PostGIS 的数据库中几何图形的**人类可读版本。**所以我的 SQL 查询变成：

 **```
SELECT inza..ST_AsText(t.SHAPE)
FROM (SELECT * FROM OS_AB_PLUS..E12_ADDRESSBASE WHERE POSTCODE = 'RH1 6NE' 
AND PAO_START_NUMBER = '14') as a, OS_TOPO..TOPOGRAPHICAREA as t
WHERE inza..ST_Within(a.shape, t.shape) = TRUE 
```

哪个返回。如预期：

```
POLYGON ((526696.15 148931.9, 526703.94 148932.34, 526703.8 148935.2, 526705.5 148935.3, 526705.4 148937.8, 526695.9 148937.35, 526696.15 148931.9)) 
```**

# javascript - jQuery改变图像高度保持纵横比

> ID：15339991
> 
> 赞同：7
> 
> 时间：2013-03-11T13:35:11.507
> 
> 标签：javascript, jquery

![容器 div 中的图像，存在高度问题](../Images/1f79f7fc667cdb60a77a5ef55b6e37e6.png)

所以我有一个画廊，我的大多数图片目前都是 100% 由 CSS 控制的。但是，在设置 min-height: 100%; 在我的图像上，我造成一些拉伸。我没有太多有问题的照片，但我无法控制用户上传的内容。

无论如何使用jQuery我可以获得图像高度并检查它是否满足要求，如果没有，以某种方式增加图像宽度以满足高度要求但保持所有比例？所以我因此避免造成任何失真，但通过让 div 没有间隙来保持画廊整洁。

*注意：提供的图像是当我删除我的时发生的情况，`min-height: 100%;`以便您可以看到我的问题。*

**更新 - - - - -**

我找到了一个目前似乎可以正常工作的解决方案，它可能不是最好的尝试，但**我找到了另一个帮助我的答案：** [如何按比例调整图像大小/保持纵横比？](https://stackoverflow.com/questions/3971841/how-to-resize-images-proportionally-keeping-the-aspect-ratio?rq=1)

我只是稍微调整了代码，现在如果图像不符合`minHeight`要求，它将按比例调整图像大小，直到`minHeight`达到。在测试中似乎对我来说很好。

**Update Final ********* 在玩完之后，我从 thumb 脚本中截取了一小段，只是它在容器中绝对定位图像的部分。

```
$(window).load(function() {

    $('.thumbnail img').each(function() {
        var maxWidth = 320; // Max width for the image
        var minHeight = 270;    // Max height for the image
        var ratio = 0;  // Used for aspect ratio
        var width = $(this).width();    // Current image width
        var height = $(this).height();  // Current image height

        if(width > maxWidth){
            ratio = maxWidth / width;   // get ratio for scaling image
            $(this).css("width", maxWidth); // Set new width
            $(this).css("height", height * ratio);  // Scale height based on ratio
            height = height * ratio;    // Reset height to match scaled image
            width = width * ratio;    // Reset width to match scaled image
        }

        // Check if current height is larger than max
        if(height < minHeight){
            ratio = minHeight / height; // get ratio for scaling image
            $(this).css("height", minHeight);   // Set new height
            $(this).css("width", width * ratio);    // Scale width based on ratio
            width = width * ratio;    // Reset width to match scaled image
        }

        var $img = $(this),
        css = {
            position: 'absolute',
            marginLeft: '-' + ( parseInt( $img.css('width') ) / 2 ) + 'px',
            left: '50%',
            top: '50%',
            marginTop: '-' + ( parseInt( $img.css('height') ) / 2 ) + 'px'
        };

        $img.css( css );
   }); 
```

});

**这会遍历我所有的缩略图，并相应地调整它们的大小。因此，如果不满足最小高度，图像将被放大，直到高度适合我的缩略图容器。然后底部将拍摄每张图像，绝对定位它，并取宽度和高度并除以 2，以便计算出在边缘减去多少以使图像居中。我仍在调整它，但目前似乎对我来说效果很好。我希望这对其他人有帮助。**

**或者**

任何有类似问题的人我都发现了这个：http: [//joanpiedra.com/jquery/thumbs/](http://joanpiedra.com/jquery/thumbs/)我已经开始编写自己的代码来做到这一点，但我会研究它的工作情况并根据需要进行调整。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T12:27:38.430

我找到了一个目前似乎可以正常工作的解决方案，它可能不是最好的尝试，但**我找到了另一个帮助我的答案：** [如何按比例调整图像大小/保持纵横比？](https://stackoverflow.com/questions/3971841/how-to-resize-images-proportionally-keeping-the-aspect-ratio?rq=1)

**用我的发现更新了问题**

```
$(window).load(function() {
    $('.image-gallery-item-image-link img').each(function() {
        var maxWidth = 320; // Max width for the image
        var minHeight = 270;    // Max height for the image
        var ratio = 0;  // Used for aspect ratio
        var width = $(this).width();    // Current image width
        var height = $(this).height();  // Current image height

        if(width > maxWidth){
            ratio = maxWidth / width;   // get ratio for scaling image
            $(this).css("width", maxWidth); // Set new width
            $(this).css("height", height * ratio);  // Scale height based on ratio
            height = height * ratio;    // Reset height to match scaled image
            width = width * ratio;    // Reset width to match scaled image
        }

        // Check if current height is larger than max
        if(height < minHeight){
            ratio = minHeight / height; // get ratio for scaling image
            $(this).css("height", minHeight);   // Set new height
            $(this).css("width", width * ratio);    // Scale width based on ratio
            width = width * ratio;    // Reset width to match scaled image
        }

        var $img = $(this),
        css = {
            position: 'absolute',
            marginLeft: '-' + ( parseInt( $img.css('width') ) / 2 ) + 'px',
            left: '50%',
            top: '50%',
            marginTop: '-' + ( parseInt( $img.css('height') ) / 2 ) + 'px'
        };

        $img.css( css );
   });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T14:00:40.573

好吧，如果不需要保持整个图片可见（例如画廊中的缩略图），您可以仅使用 css 完成此操作。看来你有风景类型的照片。html

```
<div class="img-container">
<img src="path/to/img.png" alt="">
</div> 
```

CSS：

```
div > img {
background-repeat: no-repeat;
background-position: center center;
background-attachment: fixed;
-webkit-background-size: cover;
-moz-background-size: cover;
-o-background-size: cover;
background-size: cover;
width:100%;
height:100%; 
```

}

```
jquery:
$(document).ready(function(){
     $(".imgcontainer > img").each(function(){
       var thisimg = "url("+$(this).attr('src')+")";
       $(this).css({'background-image': thisimg });
       $(this).attr('src', '');
     });

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T14:01:39.547

你在说谁的长宽比？您的画廊的纵横比或图像的纵横比？您无法通过仅更改一个维度（此处为高度）来保持图像的正确纵横比。为了保持纵横比，您必须同时更改图像的高度和宽度。任何方式，如果你想试试这个：

```
var img = document.getElementById('imageid'); 
var width = img.clientWidth;
var height = img.clientHeight;
if(width >height)
    $(img).attr('style',"width=100%");
else
    $(img).attr('style',"height=100%"); 
```

我想要做的是，将最大维度的 css 设置为 100%。它会成功的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-02T21:22:16.467

所以，我意识到这个问题前一阵子问了。但从那以后，我找到了一种甜美的 CSS 唯一方法来流畅地保持元素的纵横比。试试看：

```
#targetElement {
    max-width: 100%;
}

#targetElement:after {
    content: '';
    width: 100%;
    padding-bottom: <aspect-ratio>%; // where (height / width)*100 = <aspect-ratio>
} 
```

是的，所以我现在一直都在使用这个技巧，而且它肯定比使用 javascript，甚至效率更低的 JQuery 更高效，更简洁。希望这可以帮助某个地方的人！如果你是一个 LESS 人，我在 Github 上有一个 mixin Gist 可以做到这一点——这就是我使用它的频率！它住在这里：[甜蜜的 AR 技巧](https://gist.github.com/toddpress/10570458)。

# c# - 如何使用带参数的 C# 函数扩展 Nemerle？

> ID：15339996
> 
> 赞同：0
> 
> 时间：2013-03-11T13:35:23.347
> 
> 标签：c#, .net, nemerle

我想创建一个类似`public static int Sum(int a, int b){ return 0; }`（在 C# 中，而不是 nemerle 中）的函数，该函数将在`.n`文档内部（不是外部 dll）并且对于 nemerle 代码是可见的。怎么做这样的事情？（在网上找不到例子）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T07:28:54.803

Nemerle 允许在 using 关键字中使用类名来导入静态类方法。

```
module Functions {
    public Sum(a : int, b : int): int { a+b }
}

// or 
class Functions2 {
    public static Mul(a : int, b : int): int { a*b }
}

using Functions;
using Functions2;
using System.Console;

module Program
{
  Main() : void
  {
    WriteLine(Sum(2, 3));
    WriteLine(Mul(4, 5));
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:45:36.630

不，但是您可以创建一个部分类。该类的一部分可以用 Nemerle 编写，而其他部分可以用 C# 编写。

# asynchronous - 如何在拒绝时简单地更改 q.js-promise 'errormessage'？

> ID：15339997
> 
> 赞同：0
> 
> 时间：2013-03-11T13:35:24.270
> 
> 标签：asynchronous, promise, q

我正在使用[Q.js](https://github.com/kriskowal/q)进行承诺。

我想知道当 Q-promise 失败时是否可以快速格式化/更改错误消息。

考虑一个人为的例子：

```
 return Q.when(//$.ajaxpromise for instance).then(function(result){
                    //handle result
                }).fail(function(err){
                    //somehow change err (returned from $.ajax) to something
                    //sensible (say the statuscode + responseText) and
                    //push it up the callstack
                }); 
```

当然，我可以执行以下操作，但感觉有点麻烦：

```
 var deferred = Q.defer(); 
             Q.when( //$.ajaxpromise for instance).then(function(result){
                    //handle result
                    deferred.resolve();
                }).fail(function(err){
                    deferred.reject(new Error(err.responseText));
                });
             return deferred.promise; 
```

无论如何要更优雅地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T03:58:51.637

Q Promises（以及任何 Promises/A+ 实现）的美妙之处在于，您可以`throw`：

```
return Q.when(otherPromise)
    .then(function (result) { /* handle result */ })
    .fail(function (err) { throw new Error('A real error!'); }); 
```

[您可以在 Q 自述文件的“传播”部分](https://github.com/kriskowal/q#propagation)找到此信息。

# php - 如何删除重复的div ondrop

> ID：15339998
> 
> 赞同：1
> 
> 时间：2013-03-11T13:35:25.173
> 
> 标签：php, javascript, html, drag-and-drop, duplicate-removal

我是 javascript 的新手，所以我需要你的帮助。所以基本上我正在尝试执行 ondrop 函数（验证），所以当我第一次删除某些东西时，验证函数将运行并从 php.ini 中删除 div 值。但是第二次等等，如果我删除了相同的 div 值，我希望它提醒重复并删除该 div 元素（重复项），但我无法成功检测到重复的 div。

谁能告诉我我的代码有什么问题？

我有一个这样的 javascript、php 和 html：

```
<script type="text/javascript">

 function dragIt(target, e) {

 e.dataTransfer.setData('div', target.id);

return false;
}

function validate(target, e){

    var id = e.dataTransfer.getData('div');
    var clone = document.getElementById(id).cloneNode(true);
    var allValues = []; 
    for (i=0; i<clone.length; i++)
        {
         if (clone[i].value != "")
            {
             allValues[i] = clone[i].value.toLowerCase();
            }
        }
    allValues.sort();       
    var uniqueValues = [];      
    var idx = 0;
    var prevValue = allValues[0];
    var currValue = allValues[0];
    for (i=0; i<allValues.length; i++)
        { 
         currValue = allValues[i];
         if (currValue != prevValue){idx++;}
         uniqueValues[idx] = currValue;
         prevValue = currValue;
        }
    if (uniqueValues.length != allValues.length)
        {

          e.preventDefault();
          clone.parentNode.removeChild(clone);
         alert('Cannot submit duplicate entries');
         return false;
        }
    else    {
         alert(clone.id);
         e.preventDefault();
         target.appendChild(clone); 
         return true;
        }
} 
```

# python - py2exe 和 GDAL 之间用于创建可执行文件的兼容性

> ID：15339999
> 
> 赞同：2
> 
> 时间：2013-03-11T13:35:26.013
> 
> 标签：python, compatibility, executable, py2exe, gdal

我的目标是生成一个小的可执行 (.exe) 文件来读取[shapefile](http://it.wikipedia.org/wiki/Shapefile)格式并进行同样的简单处理。在开始编码之前，我想知道“ [OGR 简单特征库](http://www.gdal.org/ogr/)”（OGR 简单特征库是一个 C++ 开源库，提供对 GDAL 内部的各种矢量文件格式（包括 ESRI Shapefiles）的读取访问权限）是否与[py2exe](http://www.py2exe.org/)兼容.

我知道有一个纯 python 库可以读取[shapefile](https://code.google.com/p/pyshp/)格式，但是该库只能读取外部边界而不是内部（即孔）。