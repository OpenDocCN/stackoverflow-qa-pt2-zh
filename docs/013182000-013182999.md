# StackOverflow 问答 13182000-13182999

# c# - NSubstitute 模拟泛型方法

> ID：13182007
> 
> 赞同：4
> 
> 时间：2012-11-01T17:03:34.057
> 
> 标签：c#, generics, nsubstitute

我在接口中有以下方法签名：

```
public interface ISettingsUtil
{
    T GetConfig<T>(string setting, dynamic settings);
} 
```

我试图模拟：

```
var settingsUtil = Substitute.For<ISettingsUtil>();
var maxImageSize = settingsUtil.GetConfig<long>("maxImageSize", 
                                              Arg.Any<dynamic>()).Returns(100L); 
```

`Microsoft.CSharp.RuntimeBinder.RuntimeBinderException`这会在第 2 行引发异常：

> “long”不包含“Returns”的定义

关于如何`T GetConfig<T>(string setting, dynamic settings)`正确模拟的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T05:27:06.203

对于仍在为此苦苦挣扎的人，您实际上可以在 NSubsitute 中模拟动态，它只需要跳过一些小圈子。请参阅以下模拟对 signalR 客户端集线器的调用的案例。

重要的一行是这一行：

```
SubstituteExtensions.Returns(_hubContext.Clients.All, _mockClient); 
```

为了模拟动态，我创建了一个带有我想要监听的方法的接口。然后，您需要使用 SubstituteExtensions.Returns 而不是简单地将 .Returns 链接到对象的末尾。
如果您不需要验证任何内容，您也可以使用匿名对象。

完整的代码示例如下：

```
[TestFixture]
public class FooHubFixture
{
    private IConnectionManager _connectionManager;
    private IHubContext _hubContext;
    private IMockClient _mockClient;

    [SetUp]
    public void SetUp()
    {
        _hubContext = Substitute.For<IHubContext>();
        _connectionManager = Substitute.For<IConnectionManager>();

        _connectionManager.GetHubContext<FooHub>().Returns(_hubContext);
        _mockClient = Substitute.For<IMockClient>();
        SubstituteExtensions.Returns(_hubContext.Clients.All, _mockClient);
    }

    [Test]
    public void PushFooUpdateToHub_CallsUpdateFooOnHubClients()
    {
        var fooDto = new FooDto();
        var hub = new FooHub(_connectionManager);
        hub.PushFooUpdateToHub(fooDto);
        _mockClient.Received().updateFoo(fooDto);
    }

    public interface IMockClient
    {
        void updateFoo(object val);
    }
}

public class FooHub : Hub
    {
        private readonly IConnectionManager _connectionManager;

        public FooHub(IConnectionManager connectionManager)
        {
            _connectionManager = connectionManager;
        }

        public void PushFooUpdateToHub(FooDto fooDto)
        {
            var context = _connectionManager.GetHubContext<FooHub>();
            context.Clients.All.updateFoo(fooDto);
        }
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T00:58:23.460

NSubstitute 不适用于使用`dynamic`. （[Github问题](https://github.com/nsubstitute/NSubstitute/issues/75)）

# grails - Grails Spring Security UI 错误消息

> ID：13182008
> 
> 赞同：0
> 
> 时间：2012-11-01T17:03:35.287
> 
> 标签：grails, spring-security

在[Grails Spring Security UI Register Flash Messages](https://stackoverflow.com/questions/12815684/grails-spring-security-ui-register-flash-messages)中，回答了有关如何显示来自 Spring Security UI 插件的错误消息的问题。讨论表明，错误可以这样显示：

```
<g:hasErrors>
    <g:eachError>
        <li><g:message error="${it}"/></li>
    </g:eachError>
</g:hasErrors> 
```

我的问题如下：我不想简单地显示错误列表，而是要显示错误与它所属的输入字段。

示例：我没有在输入字段密码中输入至少 6 个字符。因此，在输入的右侧将呈现错误消息“请选择至少 6 个字符”。

我怎样才能做到这一点？

问候

# checkbox - 如何知道 Dart 中是否选中了复选框或单选按钮？

> ID：13182011
> 
> 赞同：7
> 
> 时间：2012-11-01T17:03:36.883
> 
> 标签：checkbox, radio-button, dart, checked

我有一个复选框和一个单选按钮组，我想知道是否选中了复选框以及选择了哪个单选按钮。

我如何在飞镖中做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T17:03:36.883

假设我们有这样的 HTML：

```
 <form >
      <input type="radio" name="gender" id="gender_male" value="male">Male<br>
      <input type="radio" name="gender" id="gender_female" value="female">Female
    </form>

    <form>
      <input type="checkbox" id="baconLover">I like bacon<br>
    </form> 
```

获取它们的值的 Dart 代码如下所示，我还添加了一个事件来了解何时单击复选框。

```
import 'dart:html';

void main() {

  // Adds a click event when the checkbox is clicked
  query("#baconLover").on.click.add((MouseEvent evt) {
    InputElement baconCheckbox = evt.target;

    if (baconCheckbox.checked) {
      print("The user likes bacon");
    } else {
      print("The user does not like bacon");
    }

  });

  // Adds a click event for each radio button in the group with name "gender"
  queryAll('[name="gender"]').forEach((InputElement radioButton) {
    radioButton.onclick.listen((e) {
      InputElement clicked = e.target;
      print("The user is ${clicked.value}");
    });
  });

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-31T10:48:32.443

我找到[了这个](https://github.com/sethladd/dart-polymer-dart-examples-unmaintained/tree/master/web/bind_to_radio_buttons)*单选按钮*的解决方案，其中通过“html”捕获事件......我已经在我的项目中使用了这个解决方案。

**my_example.html**

```
<polymer-element name="my-example">
  <template>
    <div on-change="{{updateRadios}}">
      Your favorite color is:
      <div>
        <label for="red">Red <input name="color" type="radio" id="red" value="red"></label>
      </div>
      <div>
        <label for="green">Green <input name="color" type="radio" id="green" value="green"></label>
      </div>
      <div>
        <label for="blue">Blue <input name="color" type="radio" id="blue" value="blue"></label>
      </div>
    </div>
    <div>
      You selected {{favoriteColor}}
    </div>
  </template>
  <script type="application/dart" src="my_example.dart"></script>
</polymer-element> 
```

**my_example.dart**

```
import 'package:polymer/polymer.dart';
import 'dart:html';

@CustomTag('my-example')
class MyExample extends PolymerElement {
  @observable String favoriteColor = '';

  MyExample.created() : super.created();

  void updateRadios(Event e, var detail, Node target) {
    favoriteColor = (e.target as InputElement).value;
  }

} 
```

# php - 尝试加载 Intranet RSS 时 simplexml_load_file() 不起作用

> ID：13182012
> 
> 赞同：0
> 
> 时间：2012-11-01T17:03:38.253
> 
> 标签：php, rss, simplexml

我正在尝试使用 simplexml_load_file 加载 wordpress RSS 提要并失败。

我有一个 PHP 脚本存在于我们的内部 Web 服务器（Intranet）上，还有一个 wordpress 博客存在于 Intranet/newsletter 上。我正在尝试使用以下代码广告将 RSS 提要从博客中提取到我们的内部网中，但失败：

```
$rss = simplexml_load_file('intranet/newsletter/feed/'); 
```

这是我得到的错误：

> 警告：simplexml_load_file()：I/O 警告：无法在第 69 行的 /var/www/html/intranet/test.php 中加载外部实体“intranet/newsletter/feed/”

我试过使用

```
$rss = simplexml_load_file('http://intranet/newsletter/feed/'); 
```

没有成功。

从浏览器 Intranet/newsletter/feed/ 工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T17:36:22.563

来自评论：

> 您可以尝试使用服务器 IP 地址（如 `http://1.2.3.4/newsletter/feed/`）而不是 Intranet 来查看它是否有效？

由于某种原因，php 无法将 Intranet 映射到 IP。你有正确的 Intranet 入口`/etc/hosts`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T17:11:22.783

尝试使用 file_get_contents 功能

```
 $xml = simplexml_load_string(file_get_contents('http://intranet/newsletter/feed/')); 
```

# mysql - sql if null 显示 0

> ID：13182015
> 
> 赞同：1
> 
> 时间：2012-11-01T17:03:46.630
> 
> 标签：mysql

在 SQL 中，如果记录为空，如何显示 0？

```
select sales_id, totalbuy, totalsell, totalbuy + totalsell as total from
(select sales_id, SUM(CASE WHEN side= 'buy' THEN 1 ELSE 0 END) AS totalbuy, 
SUM(CASE WHEN side= 'sell' THEN 1 ELSE 0 END) AS totalsell 
from car_orders 
where sales_id in ('sales1', 'sales2', 'sales3', 'sales4')only
GROUP BY sales_id)q
order by total desc
limit 0, 10; 
```

在`car_orders`我尝试插入 *(car_orders+ISNULL(car_orders,0)) 但收到错误后。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T17:08:57.323

使用 时`+`，两个参数必须是同一类型。我无法从您的问题中看出是什么`car`，但我认为它与`0`.

最好`CONCAT`在这些情况下使用。

```
CONCAT(car, IFNULL(car_orders, 0)) 
```

如果`car_orders`是表，则此处无效-您必须使用列，即`car_orders.MyColumn`

**如何使用 IFNULL**

我不认为你可以在这里得到一个空值，给定你的查询，买你会像这样使用 IFNULL ：

```
SELECT 
    sales_id,
    IFNULL(totalbuy, 0),
    IFNULL(totalsell, 0),
    IFNULL(totalbuy, 0) + IFNULL(totalsell, 0) as total
FROM
(
    SELECT
        sales_id,
        SUM(CASE WHEN side = 'buy' THEN 1 ELSE 0 END) AS totalbuy, 
        SUM(CASE WHEN side = 'sell' THEN 1 ELSE 0 END) AS totalsell 
    FROM
        car_orders 
    WHERE
        sales_id in ('sales1', 'sales2', 'sales3', 'sales4')
    GROUP BY
       sales_id
) q
ORDER BY total DESC
LIMIT 0, 10; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T17:32:39.727

根据 Sohnee 的回答构建，这是我认为您想要使用的 SQL：

```
SELECT 
    sales_id,
    IFNULL(totalbuy, 0),
    IFNULL(totalsell, 0),
    IFNULL(totalbuy, 0) + IFNULL(totalsell, 0) as total
FROM
(
    SELECT
        sid as sales_id,
        SUM(CASE WHEN side = 'buy' THEN 1 ELSE 0 END) AS totalbuy, 
        SUM(CASE WHEN side = 'sell' THEN 1 ELSE 0 END) AS totalsell 
    FROM 
        ( SELECT 'sales1' as sid UNION SELECT 'sales2' UNION SELECT 'sales3' UNION SELECT 'sales4' ) mysalesids
    LEFT OUTER JOIN car_orders
      ON sales_id = sid
    GROUP BY
       sales_id
) q
ORDER BY total DESC
LIMIT 0, 10; 
```

The key to the above is the "LEFT OUTER JOIN". If you can have the 'sales1', 'sales2', 'sales3' values in their own table, that would be preferable rather than having a sub-select.

Hope this helps,

john...

# git - git log --stat 分支总结

> ID：13182017
> 
> 赞同：16
> 
> 时间：2012-11-01T17:03:51.980
> 
> 标签：git, logging, statistics, branch, stat

我想展示我在功能分支上做了多少更改（插入+删除）。有没有办法获得`git log --stat`2 次提交（分支根/提示）之间更改的输出摘要。

谢谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-01T17:56:28.813

对于您想要使用的功能分支

```
git diff --stat dev..feature 
```

这依赖于不进行反向合并。在这里查看我的帖子：http: [//dymitruk.com/blog/2012/02/05/branch-per-feature/](http://dymitruk.com/blog/2012/02/05/branch-per-feature/)

`--stat`可以带参数。如果您有更宽的终端，这很有用。你可以`--stat=200`说你的显示器可以容纳 200 列。

如果您想在脚本中使用它，请`--numstat`改用。它不会截断路径。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-01T17:25:09.383

采用`git diff`

```
git diff --stat <branch root> HEAD 
```

# c# - 当需要覆盖和隐式类使用时如何处理基本的非虚拟/非抽象属性？

> ID：13182019
> 
> 赞同：2
> 
> 时间：2012-11-01T17:03:53.463
> 
> 标签：c#, overriding, virtual, abstract

我想跟踪`TopMost`我的自定义表单中的属性更改，这些表单称为`(Form)`. 我不能使用`override`, 因为`TopMost`is not `abstract`or `virtual`，所以我不能使用`new`关键字，因为它在隐式引用时不起作用。

处理此类任务的最佳方法是什么？我们可以替换任何属性`TopMost`，只要基类 ( `Form`) 既没有“更改”事件，也没有要覆盖的 ONSomething 虚拟方法，并且我们的属性没有标记为`abstract`or `virtual`。

例子：

我有很多基于`Form`

```
MyForm1:Form, class MyForm2:Form, class MyForm_n:Form 
```

一些“工厂”返回`Form`类型的实例

```
Form f = GetMyForm(); 
```

最后我做到了

```
f.TopMost = !f.TopMost; 
```

交易是我不能真正使用任何其他返回类型`Form GetMyForm()`。除了实际的基类之外，我不能使用`interface`其他基类`Form`（实际上，没有工厂，我使用`.ParentForm`某些控件的属性）。

完成任务并保持代码尽可能干净的最佳方法是什么？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:42:40.627

听起来您可能想在具体类和`Form`. 那可能有一个`ObservedTopMost`属性或类似的东西，它委托`TopMost`但也引发一个事件。

需要注意的是，这*仅*在使用新属性时才有用；它不会神奇地发现其他地方对现有属性的更改。不过，这对于您的目的可能已经足够了。

# iphone - 如何检查iOS设备是否在漫游中运行GPRS/数据计划

> ID：13182022
> 
> 赞同：1
> 
> 时间：2012-11-01T17:04:05.017
> 
> 标签：iphone, ios, ios-simulator, roaming

我想使用 xcode 代码 / coco touch 库检查运行 GPRS / 数据计划的 iOS 设备是在漫游还是在本地？

你能帮我吗？

先感谢您。

# php - 有人会如何为 Wordpress 添加一个简单的开/关开关？

> ID：13182023
> 
> 赞同：0
> 
> 时间：2012-11-01T17:04:08.437
> 
> 标签：php, wordpress

第一次在这里发帖，我有一个相当新手的问题要问你。我想编写一个简单的模块，让 Wordpress 中的管理员通过一个简单的复选框打开和关闭 HTML 片段。这个想法相当简单。根据天气情况，他的业务将处于“服务中”或“停止服务”状态。

我知道这对大多数人来说可能有点简单，但我只是没有进入 Wordpress 并且不确定从哪里开始这样的事情。任何方向都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T17:13:16.123

为什么不只使用 Wordpress 小部件。文本显示小部件随 Wordpress 一起提供，开箱即用。

这是解释小部件的 WP Codex 链接。
[http://codex.wordpress.org/WordPress_Widgets](http://codex.wordpress.org/WordPress_Widgets)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T17:08:20.773

将 html 片段包装在 javascript 中可能是最简单的。不过，我不确定使其“可切换”的最佳方法-您可能需要将其编码为实际插件并使用自定义小部件将页面添加到控制面板。

好消息是这样的插件应该**非常**简单，即使只有基本技能。

# actionscript-3 - As3IsoLib：数组中的 IsoBox

> ID：13182031
> 
> 赞同：0
> 
> 时间：2012-11-01T17:04:27.830
> 
> 标签：actionscript-3

我想将四个盒子存储在一个数组中，并在一个“for”循环中遍历所有这些盒子，将每个盒子放在不同的位置。我正在使用等距库 As3IsoLib。到目前为止，这是我的代码。

```
var BOX1:IsoBox = new IsoBox();
var BOX2:IsoBox = new IsoBox();

var myArray:Array = new Array(BOX1,BOX2);

for (var occr:IsoBox in myArray){ 
```

但是我的“for”循环行出现错误，即

```
Description Resource    Path    Location    Type
1067: Implicit coercion of a value of type String to an unrelated type as3isolib.display.primitive:IsoBox.  isometric.as    /main/src   line 51 Flex Problem 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T17:15:19.837

这一行：

```
for (var occr:IsoBox in myArray){ 
```

应该：

```
for each (var occr:IsoBox in myArray){ 
```

这将解决错误。发生这种情况是因为它旨在循环对象的属性，而不是数组的索引。所以有一个奇怪的类型要求。

“for each”循环更适合循环数组的元素。

# ruby - Sinatra haml 页面被调用两次

> ID：13182034
> 
> 赞同：4
> 
> 时间：2012-11-01T17:04:39.613
> 
> 标签：ruby, sinatra, haml, rack, webrick

```
 get '/test' do
     session[:my_session_id] = generate_random_id()
     puts 'begin haml debug'
     haml :"static/haml_page", :locals=>{:session_id => session[:my_session_id]}
  end 
```

我在日志中看到上面的页面经常被调用两次：

```
begin haml debug
127.0.0.1 - - [02/Nov/2012 00:00:01] "GET / HTTP/1.1" 200 4317 1.5421
127.0.0.1 - - [02/Nov/2012 00:00:01] "GET /js/base/jquery.pjax.002902.js HTTP/1.1" 304 - 0.0234
[2012-11-02 00:00:01] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true
127.0.0.1 - - [02/Nov/2012 00:00:01] "GET /css/docs.002902.css HTTP/1.1" 200 165 0.1086
.................................
begin haml debug
127.0.0.1 - - [02/Nov/2012 00:00:04] "GET / HTTP/1.1" 200 4317 1.9288 
```

这让我有一些问题。为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T15:38:40.327

由于类似的问题，我已移至 Webrick 安装的 Puma 服务器。不幸的是，我丢失了这个问题的示例代码。无论如何，如果您遇到此类问题，请了解 brouser 的功能：

1.  **开发人员工具 > 网络**（选项卡）将显示请求的确切来源（如果存在）
2.  尝试通过减少代码来缩小此问题/错误，即注释所有 JavaScript，将页面内容更改为“Hello Wold”并观察问题仍然存在
3.  分享你的代码:)

抱歉在这里发帖，我不知道如何将其发布为您的问题的补充。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-16T13:54:03.073

这是一个 hack，但如果你真的需要让它只运行一次代码：创建一个全局布尔变量。在路线中，将所有内容包装在布尔值的条件中。如果为假，请将其设置为真，运行您的代码，然后再次将其设置为假。

# css - Dojo claro css applying absolute positioning to ContentPane elements

> ID：13182035
> 
> 赞同：0
> 
> 时间：2012-11-01T17:04:39.657
> 
> 标签：css, dojo

I'm using dojo 1.8 and don't want any padding in my bordercontainer / contentpane layout. The problem is, it seems when I add the claro css file, instead of just applying class styles, the div's i'm using for my content panes get styles applied inline. It almost seems like this is being done programmatically, but only when I add the css file.

For instance, the contentpane I use as my header looks like this:

```
<div data-dojo-props="region: 'top'" 
   data-dojo-type="dijit/layout/ContentPane" 
   id="header" 
   class="dijitContentPane dijitBorderContainer-child 
     dijitBorderContainer-dijitContentPane 
     dijitBorderContainerPane dijitAlignTop" 
   title="" role="group" widgetid="header" 
   style="left: 5px; top: 5px; position: absolute; width: 1387px;"> 
```

It adds the style="left: 5px; top: 5px...." which I'm pretty sure precludes me from just overriding any type of padding or margin setting with css. I want my content panes to not have any padding or "virtual" padding by using absolute positions like this. How can I still use claro but prevent this behavior?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:23:32.290

5px 的出现是因为您在`BorderContainer`.

添加`gutters: false`到`BorderContainer`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T17:36:18.760

dijit.layout 小部件`resize`在渲染时执行 a ，计算它必须使用的空间，并根据它的任何布局变体进行设置（在您的情况下为 BorderLayout 子级，称为“嵌套容器”）。因此，内联样式以编程方式完成。

您的问题很可能是您自己应用的 CSS 的“权重”低于 claro.css 的样式。

检查[此链接：特异性](http://css-tricks.com/specifics-on-css-specificity/)。这是一个术语，涵盖了哪个选择器的优先级最高。css-rule 越具体，优先级越高。

因此，您需要“赢得”这样的班级规则：

```
.claro .dijitContentPane {} 
```

要实现它，请添加 #id 选择器 - 或 nodetype-selector 或类似的。您还可以添加前缀，例如“body”作为一般规则或“#innerContentsWrapper”作为本地化规则

```
.dijitContentPane { /* lowest weight */}
.claro .dijitContentPane { /* third highest weight */ }
.claro div.dijitContentPane { /* second highest weight */ }
body .claro div.dijitContentPane { /* the highest weight */ } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-24T14:56:39.510

另一件可行的事情是在您的 div 上设置以下属性：`baseClass="dijitContentPaneNoPadding"`

# xml - Regarding the designing of ..xsl file in eclipse

> ID：13182036
> 
> 赞同：0
> 
> 时间：2012-11-01T17:04:40.563
> 
> 标签：xml, eclipse, xslt

I am using the .xsl file that define the style and format for my pdf report that is it defines the style and layout for my pdf report , I an using eclipse ,I want is there any plugin in which we can see the outcome of .xsl file in eclipse itself just like the html file we have source tab and design tab in eclipse where while doing coding we can see the design tab to see the design also side by side , please advise for such plugins where we can see the outcome of .xsl file in design mode also

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T22:48:23.267

XSL 工具作为 Web 工具项目的一部分安装。这样，您可以根据需要在 Eclipse 中运行 XSL 文件——如果需要，您甚至可以调试 XSL。

[我建议在http://www.vogella.com/articles/XSLT/article.html](http://www.vogella.com/articles/XSLT/article.html)上遵循 Vogellas 教程

# c - Inconsistent results while printing float as integer

> ID：13182045
> 
> 赞同：0
> 
> 时间：2012-11-01T17:05:17.643
> 
> 标签：c, floating-point, integer, double, endianness

> **Possible Duplicate:**
> [print the float value in integer in C language](https://stackoverflow.com/questions/1632080/print-the-float-value-in-integer-in-c-language)

I am trying out a rather simple code like this:

```
float a = 1.5;
printf("%d",a); 
```

It prints out `0`. However, for other values, like 1.4,1.21, etc, it is printing out a garbage value. Not only for 1.5, for 1.25, 1.5, 1.75, 1.3125 (in other words, decimal numbers which can be perfectly converted into binary form), it is printing `0`. What is the reason behind this? I found a similar post [here](https://stackoverflow.com/questions/1632080/print-the-float-value-in-integer-in-c-language), and the first answer looks like an awesome answer, but I couldn't discern it. Can any body explain why is this happening? What has endian-ness got to do with t?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:06:31.233

you're not casting the float, `printf` is just interpreting it as an integer which is why you're getting *seemingly* garbage values.

**Edit:**

Check this example C code, which shows how a `double` is stored in memory:

```
int main()
{
    double a = 1.5;
    unsigned char *p = &a;
    int i;

    for (i=0; i<sizeof(double); i++) {
        printf("%.2x", *(p+i));
    }
    printf("\n");
    return 0;
} 
```

If you run that with `1.5` it prints

```
000000000000f83f 
```

If you try it with 1.41 it prints

```
b81e85eb51b8f63f 
```

So when `printf` interprets `1.5` as an int, it prints zero because the 4 LSBs are zeros and some other value when trying with `1.41`.

That being said, it is an ***undefined behaviour*** and you should avoid it plus you won't always get the same result it depends on the machine and how the arguments are passed.

**Note**: the bytes are reversed because this is compiled on a *little indian machine* which means the least significant byte comes first.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T17:10:33.333

你不关心争论的提升。因为`printf`是一个可变参数函数，所以参数被提升：

> **C11 (n1570), § 6.5.2.2 函数调用**
> 具有浮点类型的参数被提升为双精度。

因此`printf`尝试将您的`double`变量解释为整数类型。它会导致未定义的行为。只需添加一个演员：

```
double a = 1.5;
printf("%d", (int)a); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T17:10:42.863

参数的不匹配`printf`是`undefined beahivour` 类型转换`a`或使用`%f`

用这种方式

```
printf("%d",(int)a); 
```

或者

```
printf("%f",a); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T17:14:39.653

d 代表：`decimal`。所以，尽管如此，a 是浮点数/双精度数/整数/字符，.... 当您使用 : "%d" 时，C 将以十进制打印该数字。所以，如果 a 是整数类型（整数、长整数），没问题。如果 a 是 char ：因为 char 是一种整数类型，所以，C 将以 ASCII 格式打印 char 的值。

但是，问题出现了，当a是float类型（float/double）时，只是因为如果a是float类型，C会有特殊的方式来读取这个，而不是十进制方式。所以，你会得到奇怪的结果。

为什么会有这个奇怪的结果？

我只是做一个简短的解释：在计算机中，实数由两部分表示：`exponent`和`mantissa`。如果你说：这是一个实数，C 会知道哪个是指数，哪个是尾数。但是，因为你说：嘿，这是整数。指数部分和尾数部分没有区别->奇怪的结果。

如果您想准确理解，如何知道它将打印哪个整数（当然，您可以猜到）。您可以访问此链接：[在 C 中表示内存中的 FLOAT 数](https://stackoverflow.com/questions/6910115/how-to-represent-float-number-in-memory-in-c)

如果你不想得到这个奇怪的结果，你可以强制转换`int`为浮点数，所以，它会打印浮点数的整数部分。

```
 float a = 1.5;
   printf("%d",(int)a); 
```

希望这有帮助:)

# c# - in ASP.NET MVC3 How to bind and provide an action to the listbox with the single selection

> ID：13182055
> 
> 赞同：0
> 
> 时间：2012-11-01T17:05:43.740
> 
> 标签：c#, asp.net-mvc-3

In asp.net mvc3 razor view how to bind the list of strings in the listbox with the single selection. I am trying to bind list of Names (List) with the ListBox.

```
**Model**

Class StudentInfo
{
public string id{get,set};
public string names{get,set};
}

**In Conrtoller**
[HTTPGet]
public ActionResult Student()
{

List<StudentInfo> liststudent=new LIst<StudentInfo>{
new StudentInfo{id="v11",names="AB"},
new StudentInfo{id="v12",names="SA"},
return View(liststudent)
}

}
[HTTPPost]
public ActionResult Student(string name)
{

return View()
}

}

**In View**

    <div class="alignright">
    @using (Html.BeginForm())
    {
    @Html.ListBox("MyList",new SelectList(???));
    }
    </div> 
```

**The problem I am encountering are: 1\. How to display the names of the student in the listbox. 2\. How to provide an action with the selection.**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T19:38:57.763

尝试这个：

**你的控制器**

```
public ActionResult Student()
{
    List<StudentInfo> liststudent=new LIst<StudentInfo>{
                        new StudentInfo{id="v11",names="AB"},
                        new StudentInfo{id="v12",names="SA"}}
    return View(liststudent);
} 
```

**你的看法**

```
@model List<MvcApplication1.Models.StudentInfo>

<div class="alignright">
    @using (Html.BeginForm())
    {
    @Html.ListBox("MyList",new SelectList(model, "id", "names"));
    }
    </div> 
```

# html - 以百分比定义元素时如何将元素的宽度减小一个像素

> ID：13182059
> 
> 赞同：6
> 
> 时间：2012-11-01T17:05:54.430
> 
> 标签：html, css

我有四个元素，每个元素的宽度都设置为`25%`. 它们完美地填满了页面的宽度。

我想`1px`在每一个之间留一个空隙。如果我这样做（`margin-right: 1px;`例如），最后一个元素会溢出到下一行。如何在`1px`不首先计算像素宽度的情况下减少每个元素的宽度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T17:11:50.043

在评论中@Lubnah 的帮助下，我自己刚刚找到了一个解决方案。

```
.tab-list li {
  margin-right: -1px;
  border-left: 1px solid #fff;
}

.tab-list li:first-of-type {
  border-left: none;
  margin-right: 0px;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T17:11:46.207

您可以使用 CSS `calc`，但它的浏览器支持很粗略：

```
width: calc( 25% - 1px );
width: -moz-calc( 25% - 1px );
width: -webkit-calc( 25% - 1px ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T17:10:52.217

宽度是在容器内计算的。您设置的任何填充或边距都将添加到宽度中。

将宽度设置为 23%，将边距设置为 1%

左边距 (1) 加上宽度 (23) 加上右边距 (1) = 25。也就是说，在页面上放置四次将加起来 100。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T17:14:06.623

您可以通过在每个元素内使用宽度为 auto 和 margin-right:1px 的内部 div 来稍微作弊

看到这个小提琴：http: [//jsfiddle.net/7R6zZ/](http://jsfiddle.net/7R6zZ/)

```
<div class="outer">
 <div class="inner">1</div>
</div>
<div class="outer">
 <div class="inner">2</div>
</div>
<div class="outer">
 <div class="inner">3</div>
</div>
<div class="outer">
 <div class="inner">4</div>
</div>

.outer {
 width:25%;
 float:left;
}
.outer .inner {
 width:auto;
 margin-right:1px;
 background:#999;
 min-height:300px;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T17:18:08.933

使用[`box-sizing: border-box;`](http://paulirish.com/2012/box-sizing-border-box-ftw/)和边界。

```
* { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }
div {
  width: 25%;
  border-right: 1px solid right; 
```

}

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-01T17:27:07.087

使用框大小作为`box-sizing:border-box` 并使用与背景颜色相同的 1px 右边框

```
 .box{
      width:25%;
      box-sizing:border-box;
      border-right: 1px solid "same color as your background"
 } 
```

# sml - 如何在 SML 中推断函数类型

> ID：13182060
> 
> 赞同：0
> 
> 时间：2012-11-01T17:06:01.263
> 
> 标签：sml

我有一个`foo`定义如下的函数

```
fun foo x y = x (x (x y)); 
```

如何推断函数类型？

答案是：

```
val foo = fn : ('a -> 'a) -> 'a -> 'a 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:59:14.390

这个过程称为[类型推断](http://en.wikipedia.org/wiki/Type_inference)，由[Hindley-Milner 算法](http://en.wikipedia.org/wiki/Hindley%E2%80%93Milner)在 SML 中完成。

首先让我们从泛型类型签名开始`foo`：

```
val foo = fn : 'c -> 'b -> 'a 
```

where `x`has type`'c`和`y`has type `'b`。

我们有以下步骤：

*   `x y`是函数应用，`x`应该有签名`'b -> 'd`，我们有一个方程`'c = 'b -> 'd`并且`x y`有类型`'d`。
*   `x (x y)`意味着我们`'b -> 'd`在参数类型`'d`so `'d = 'b`和上应用函数类型`'c = 'b -> 'b`。
*   `x (x (x y))`意味着我们`'b -> 'b`在参数类型上应用函数类型`'b`并返回`'a`（类型`foo`）；就够了`'b = 'a`。
*   统一后，我们有`'c = 'a -> 'a and 'b = 'a`并且`foo`有一个泛型类型：`val foo = fn : ('a -> 'a) -> 'a -> 'a`

# cassandra - How to add data from hector(cassandra) for specific validation classes

> ID：13182064
> 
> 赞同：0
> 
> 时间：2012-11-01T17:06:44.957
> 
> 标签：cassandra

I am taking some babysteps into cassandra and i wanted some advice.

I want to insert data into a into column family , i have already created a column family with the following credentials -

```
 ColumnFamily: testkp
  Key Validation Class: org.apache.cassandra.db.marshal.UTF8Type
  Default column value validator: org.apache.cassandra.db.marshal.UTF8Type
  Columns sorted by: org.apache.cassandra.db.marshal.UTF8Type
  GC grace seconds: 864000
  Compaction min/max thresholds: 4/32
  Read repair chance: 0.1
  DC Local Read repair chance: 0.0
  Replicate on write: true
  Caching: KEYS_ONLY
  Bloom Filter FP chance: default
  Built indexes: []
  Column Metadata:
    Column Name: Col_A
      Validation Class: org.apache.cassandra.db.marshal.FloatType
    Column Name: Col_B
      Validation Class: org.apache.cassandra.db.marshal.LongType
    Column Name: Col_C
      Validation Class: org.apache.cassandra.db.marshal.Int32Type
    Column Name: Col_D
      Validation Class: org.apache.cassandra.db.marshal.DateType
    Column Name: Col_E
      Validation Class: org.apache.cassandra.db.marshal.UTF8Type
  Compaction Strategy: org.apache.cassandra.db.compaction.SizeTieredCompactionStrategy
  Compression Options:
    chunk_length_kb: 64
    sstable_compression: org.apache.cassandra.io.compress.SnappyCompressor 
```

Now i saw some basic insertion mechanisms and i tried, it basically works if i did not predefine my schema

```
public class SampleDataInsert {

private static StringSerializer stringSerializer = StringSerializer.get();

public static void main(String[] args) throws Exception {
    Cluster cluster = HFactory.getOrCreateCluster("TestCluster","localhost:9160");

    Keyspace keyspaceOperator = HFactory.createKeyspace("test",cluster);

    try {
        Mutator<String> mutator =   HFactory.createMutator(keyspaceOperator,stringSerializer);

        for (int i = 0; i < 2; i++) {
            mutator.addInsertion("key_" + i, "testkp", HFactory.createStringColumn("Col_A", ""+ i));
            mutator.addInsertion("key_" + i, "testkp", HFactory.createStringColumn("Col_B", ""+ i));
            mutator.addInsertion("key_" + i, "testkp", HFactory.createStringColumn("Col_C", ""+ i));
            mutator.addInsertion("key_" + i, "testkp", HFactory.createStringColumn("Col_D", ""+ i));
            mutator.addInsertion("key_" + i, "testkp", HFactory.createStringColumn("Col_E", ""+ i));
}
mutator.execute();
} 
```

Now, since i have predefined the schema , if i try to add any column with key validation class other than UTF8Type. It basically pops an error( This is fine ).

My question is how to define other validation class (FloatType,LongType,DateType).. in hector so that i can do the insert.

Any links, suggestions to find this information..

P.S I tried for couple of days but i could not find much information. Apologies if my question is a bit low-level/ or poorly formatted.

Best Regards

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T16:33:16.083

`mutator.addInsertion(key, cf, HFactory.createColumn(longName, floatValue, LongSerializer.get(), FloatSerializer.get()))`

# javascript - Node mustache rendering server side

> ID：13182068
> 
> 赞同：1
> 
> 时间：2012-11-01T17:06:55.227
> 
> 标签：javascript, node.js, npm, mustache

I'm trying to create a simple application to compile mustache templates into static pages server side, here's what I've got so far:

```
var view = {

    title: "Joe",
    calc: function () {

        return 2+4;
    }

};

var mustache = require("mustache");
var template = require("./home.template");

var output = mustache.to_html(template, view);

console.log(output); 
```

And my template looks like:

```
{{title}} spend {{calc}} 
```

Any suggestions as to what is causing this to fail?

Here is the complete error message:

```
home.template:1
} spend {{calc}}
        ^

module.js:437
  var compiledWrapper = runInThisContext(wrapper, filename, true);
                        ^
SyntaxError: Unexpected token {
    at Module._compile (module.js:437:25)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.require (module.js:362:17)
    at require (module.js:378:17)
    at Object.<anonymous> (/Users/MorehouseJ09/Documents/production_development/mustache/current/compiler.js:12:16)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32) 
```

Any help would be great!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:23:46.560

用于`fs.readFile()`以字符串形式读取您的模板。Require 将不起作用，除非它需要 javascript 代码，而不是 mustache 代码。

[http://nodejs.org/api/fs.html#fs_fs_readfile_filename_encoding_callback](http://nodejs.org/api/fs.html#fs_fs_readfile_filename_encoding_callback)

**编辑**
看看这是否有效......

```
var mustache = require("mustache");
var fs = require("fs");

var view = {

    title: "Joe",
    calc: function () {

        return 2+4;
    }

};

fs.readFile('./home.template', 'utf-8', function (err, data) {
  if (err) throw err;
  var output = mustache.to_html(data, view);
  console.log(output);
}); 
```

# symfony1 - 当多个等于true时使用sfWidgetFormChoice时如何将选择array_keys存储为值

> ID：13182069
> 
> 赞同：1
> 
> 时间：2012-11-01T17:07:02.830
> 
> 标签：symfony1, symfony-1.4

这是我在 Form.Class 中的小部件：

```
$this->widgetSchema['schools'] = new sfWidgetFormChoice(array(
    'choices'        => Doctrine_Core::getTable('school')->getUsersSchools($userId),
    'renderer_class' => 'sfWidgetFormSelectDoubleList', 
    'renderer_options' => array(
        'label_unassociated' => 'Unassociated',
        'label_associated' => 'Associated'
    ))); 
```

以上工作正常，但存储的值与上面引用的选择列表无关。我需要将检索到的数组的 id 存储为值。相反，检索到的列表是按时间顺序排列的，id 被忽略。

这是 schoolTable 查询：

```
 public function getUsersSchools($id){
          $q =Doctrine_Query::create()
             ->select('id')
             ->from('school')
             ->where('user_id = ?', $id)
             ->execute();
         return $q;
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T20:32:02.590

如果我正确理解您的问题，您想存储相关的学校 ID。改用`sfWidgetFormDoctrineChoice`小部件，它会开箱即用，因为它使用主键作为 id。

```
$query = Doctrine_Core::getTable('school')->queryForSelect($userId);
$this->setWidget('schools', new sfWidgetFormDoctrineChoice(array(
  'model' => 'school',
  'query' => $query,
  'multiple' => true,
  'renderer_class' => 'sfWidgetFormSelectDoubleList', 
  'renderer_options' => array(
    'label_unassociated' => 'Unassociated',
    'label_associated' => 'Associated'
  ),
)));
$this->setValidator('schools', new sfValidatorDoctrineChoice(array(
  'model' => 'schoool',
  'query' => $query,
  'multiple' => true,
)));

// in SchoolTable class
public function queryForSelect($userId)
{
  return $this->createQuery('s')
    ->andWhere('s.user_id = ?', $userId)
  ;
} 
```

如果您有适当的模式（我认为学校应该是多对多关联），那么当前 from 应该有一个`schools_list`字段（在生成的基础中正确定义），然后您可以修改该字段以由`sfWidgetFormSelectDoubleList`：

```
$this->widgetSchema['schools_list']->setOption('renderer_class', 'sfWidgetFormSelectDoubleList');
$this->widgetSchema['schools_list']->setOption('renderer_options', array(
  'label_unassociated' => 'Unassociated',
  'label_associated' => 'Associated'
)); 
```

# linux - Best way to divide in bash using pipes?

> ID：13182070
> 
> 赞同：22
> 
> 时间：2012-11-01T17:07:08.643
> 
> 标签：linux, bash, math

I'm just looking for an easy way to divide a number (or provide other math functions). Let's say I have the following command:

```
find . -name '*.mp4' | wc -l 
```

How can I take the result of wc -l and divide it by 3?

The examples I've seen don't deal with re-directed out/in.

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-11-01T17:13:32.927

使用`bc`：

```
$ bc -l <<< "scale=2;$(find . -name '*.mp4' | wc -l)/3"
2.33 
```

相反，bash shell 只执行整数运算。

awk 也很强大：

```
$ find . -name '*.mp4' | wc -l | awk '{print $1/3}'
2.33333 
```

`wc`如果使用，您甚至不需要`awk`：

```
$ find . -name '*.mp4' | awk 'END {print NR/3}'
2.33333 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-01T17:12:10.680

**编辑 2018-02-22：添加`shell connector`**

# 方法不止一种：

取决于所需的精度**和**要完成的计算次数！进一步看*`shell connector`*！

## 使用`bc`（二进制计算器）

```
find . -type f -name '*.mp4' -printf \\n | wc -l | xargs printf "%d/3\n" | bc -l
6243.33333333333333333333 
```

或者

```
echo $(find . -name '*.mp4' -printf \\n | wc -l)/3|bc -l
6243.33333333333333333333 
```

或使用 bash，只产生整数：

```
echo $(($(find . -name '*.mp4' -printf \\n| wc -l)/3))
6243 
```

## 使用[bash](/questions/tagged/bash "显示标记为“bash”的问题")整数内置数学处理器

```
res=000$((($(find  . -type f -name '*.mp4' -printf "1+")0)*1000/3))
printf -v res "%.2f" ${res:0:${#res}-3}.${res:${#res}-3}
echo $res
6243.33 
```

## 纯粹[的 bash](/questions/tagged/bash "显示标记为“bash”的问题")

使用最近的 64 位 bash，您甚至可以使用[@glennjackman 的 using 想法](https://stackoverflow.com/a/13183567/1765658)，`globstar`但计算伪浮点可以通过以下方式完成：

```
shopt -s globstar
files=(**/*.mp4)
shopt -u globstar
res=$[${#files[*]}000/3]
printf -v res "%.2f" ${res:0:${#res}-3}.${res:${#res}-3}
echo $res
6243.33 
```

没有分叉并且`$res`包含一个两位数的四舍五入浮点值。

**注意**：使用and时注意*符号链接*！`globstar``**`

# 介绍*`shell connector`*

如果您打算进行大量计算，需要高精度并使用[bash](/questions/tagged/bash "显示标记为“bash”的问题")，则可以使用***长时间运行的`bc`子进程***：

```
mkfifo /tmp/mybcfifo
exec 5> >(exec bc -l >/tmp/mybcfifo)
exec 6</tmp/mybcfifo
rm /tmp/mybcfifo 
```

那么现在：

```
echo >&5 '12/34'
read -u 6 result
echo $result
.35294117647058823529 
```

此子流程保持开放和可用：

```
ps --sid $(ps ho sid $$) fw
  PID TTY      STAT   TIME COMMAND
18027 pts/9    Ss     0:00 bash
18258 pts/9    S      0:00  \_ bc -l
18789 pts/9    R+     0:00  \_ ps --sid 18027 fw 
```

计算`$PI`：

```
echo >&5 '4*a(1)'
read -u 6 PI
echo $PI
3.14159265358979323844 
```

终止子进程：

```
exec 6<&-
exec 5>&- 
```

## 小演示，关于*使用管道在 bash 中划分的最佳方法！*

计算范围`{1..157} / 42`（我会让你谷歌搜索*`answer to the ultimate question of life, the universe, and everything`*；）

...并逐行打印 13 个结果以减少输出：

```
printf -v form "%s" "%5.3f "{,}{,}{,,};form+="%5.3f\n"; 
```

通过常规方式

```
testBc(){
    for ((i=1; i<157; i++)) ;do
        echo $(bc -l <<<"$i/42");
    done
} 
```

通过使用*长时间运行的`bc`子进程*：

```
testLongBc(){ 
    mkfifo /tmp/mybcfifo;
    exec 5> >(exec bc -l >/tmp/mybcfifo);
    exec 6< /tmp/mybcfifo;
    rm /tmp/mybcfifo;
    for ((i=1; i<157; i++)) ;do
        echo "$i/42" 1>&5;
        read -u 6 result;
        echo $result;
    done;
    exec 6>&-;
    exec 5>&-
} 
```

让我们看看*没有*：

```
time printf "$form" $(testBc)
0.024 0.048 0.071 0.095 0.119 0.143 0.167 0.190 0.214 0.238 0.262 0.286 0.310
0.333 0.357 0.381 0.405 0.429 0.452 0.476 0.500 0.524 0.548 0.571 0.595 0.619
0.643 0.667 0.690 0.714 0.738 0.762 0.786 0.810 0.833 0.857 0.881 0.905 0.929
0.952 0.976 1.000 1.024 1.048 1.071 1.095 1.119 1.143 1.167 1.190 1.214 1.238
1.262 1.286 1.310 1.333 1.357 1.381 1.405 1.429 1.452 1.476 1.500 1.524 1.548
1.571 1.595 1.619 1.643 1.667 1.690 1.714 1.738 1.762 1.786 1.810 1.833 1.857
1.881 1.905 1.929 1.952 1.976 2.000 2.024 2.048 2.071 2.095 2.119 2.143 2.167
2.190 2.214 2.238 2.262 2.286 2.310 2.333 2.357 2.381 2.405 2.429 2.452 2.476
2.500 2.524 2.548 2.571 2.595 2.619 2.643 2.667 2.690 2.714 2.738 2.762 2.786
2.810 2.833 2.857 2.881 2.905 2.929 2.952 2.976 3.000 3.024 3.048 3.071 3.095
3.119 3.143 3.167 3.190 3.214 3.238 3.262 3.286 3.310 3.333 3.357 3.381 3.405
3.429 3.452 3.476 3.500 3.524 3.548 3.571 3.595 3.619 3.643 3.667 3.690 3.714

real    0m10.113s
user    0m0.900s
sys     0m1.290s 
```

哇！在我的树莓派上**十秒！！**

然后*用*：

```
time printf "$form" $(testLongBc)
0.024 0.048 0.071 0.095 0.119 0.143 0.167 0.190 0.214 0.238 0.262 0.286 0.310
0.333 0.357 0.381 0.405 0.429 0.452 0.476 0.500 0.524 0.548 0.571 0.595 0.619
0.643 0.667 0.690 0.714 0.738 0.762 0.786 0.810 0.833 0.857 0.881 0.905 0.929
0.952 0.976 1.000 1.024 1.048 1.071 1.095 1.119 1.143 1.167 1.190 1.214 1.238
1.262 1.286 1.310 1.333 1.357 1.381 1.405 1.429 1.452 1.476 1.500 1.524 1.548
1.571 1.595 1.619 1.643 1.667 1.690 1.714 1.738 1.762 1.786 1.810 1.833 1.857
1.881 1.905 1.929 1.952 1.976 2.000 2.024 2.048 2.071 2.095 2.119 2.143 2.167
2.190 2.214 2.238 2.262 2.286 2.310 2.333 2.357 2.381 2.405 2.429 2.452 2.476
2.500 2.524 2.548 2.571 2.595 2.619 2.643 2.667 2.690 2.714 2.738 2.762 2.786
2.810 2.833 2.857 2.881 2.905 2.929 2.952 2.976 3.000 3.024 3.048 3.071 3.095
3.119 3.143 3.167 3.190 3.214 3.238 3.262 3.286 3.310 3.333 3.357 3.381 3.405
3.429 3.452 3.476 3.500 3.524 3.548 3.571 3.595 3.619 3.643 3.667 3.690 3.714

real    0m0.670s
user    0m0.190s
sys     0m0.070s 
```

不到**一秒**！！

希望结果是一样的，但执行时间却大不相同！

## 我的`shell connector`

我已经发布了一个连接器函数：[GitHub.com 上的 Connector-bash](https://github.com/F-Hauri/Connector-bash) 和[我自己的站点上的 shell_connector.sh](http://f-hauri.ch/vrac/shell_connector.sh)。

```
source shell_connector.sh
newConnector /usr/bin/bc -l 0 0
myBc 1764/42 result
echo $result
42.00000000000000000000 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-09-02T14:36:42.110

`find . -name '*.mp4' | wc -l | xargs -I{} expr {} / 2`

如果您有多个要通过管道传输的输出，则最好使用`xargs`. 用作`{}`表达式术语的占位符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T18:47:41.770

根据您的 bash 版本，您甚至不需要 find 来完成这个简单的任务：

```
shopt -s nullglob globstar
files=( **/*.mp4 )
dc -e "3 k ${#files[@]} 3 / p" 
```

此方法将正确处理包含换行符的文件名的奇怪边缘情况。

# apache - Using Apache over WC Portal, the jsessionid cookie is not recorded

> ID：13182071
> 
> 赞同：2
> 
> 时间：2012-11-01T17:07:08.427
> 
> 标签：apache, portal, jsessionid, webcenter

I have the following schema when regarding servers redirection:

1-Apache OHS (port 7274) has a VirtualHost configured to redirect requests do the WebCenter server. The configuration has been done as below:

```
NameVirtualHost *:7274
<VirtualHost *:7274>
    <Directory "${ORACLE_INSTANCE}/config/${COMPONENT_TYPE}/${COMPONENT_NAME}/htdocs2">
       Options FollowSymLinks MultiViews
       AllowOverride All
       Order deny,allow 
       Allow from All   
    </Directory>
    DocumentRoot "${ORACLE_INSTANCE}/config/${COMPONENT_TYPE}/${COMPONENT_NAME}/htdocs2"    
    <Location /myapp>
      SetHandler weblogic-handler
      PathTrim /myapp
      WeblogicHost myhost
      WeblogicPort myport
    </Location> 
</VirtualHost> 
```

When I'm using Apache ohs over webcenter portal, the jsessionid cookie is not recorded into browser client. However, if I pass over the apache ohs, accessing directly the webcenter portal server, the JSESSIONID cookie is correctly recorded.

My weblogic.xml:

```
<?xml version = '1.0' encoding = 'windows-1252'?>
<weblogic-application xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.bea.com/ns/weblogic/weblogic-application http://www.bea.com/ns/weblogic/weblogic-application/1.0/weblogic-application.xsd"
xmlns="http://www.bea.com/ns/weblogic/weblogic-application">
<xml>
<parser-factory>
<saxparser-factory>oracle.xml.jaxp.JXSAXParserFactory</saxparser-factory>
<document-builder-factory>oracle.xml.jaxp.JXDocumentBuilderFactory</document-builder-factory>
<transformer-factory>oracle.xml.jaxp.JXSAXTransformerFactory</transformer-factory>
</parser-factory>
</xml>
<listener>
<listener-class>oracle.adf.share.weblogic.listeners.ADFApplicationLifecycleListener</listener-class>
</listener>
<listener>
<listener-class>oracle.mds.lcm.weblogic.WLLifecycleListener</listener-class>
</listener>
<listener>
<listener-class>oracle.webcenter.lifecycle.listener.FeatureMetricApplicationListener</listener-class>
</listener>
<library-ref>
<library-name>adf.oracle.domain</library-name>
</library-ref>
<library-ref>
<library-name>oracle.jsp.next</library-name>
</library-ref>
<library-ref>
<library-name>oracle.webcenter.framework</library-name>
<specification-version>11.1.1</specification-version>
</library-ref>
<library-ref>
<library-name>oracle.webcenter.skin</library-name>
<specification-version>11.1.1</specification-version>
</library-ref>
<library-ref>
<library-name>oracle.sdp.client</library-name>
</library-ref>
</weblogic-application> 
```

Do you have any concern about my configuration?

# c# - Custom iteration for multi-dimensional arrays?

> ID：13182072
> 
> 赞同：1
> 
> 时间：2012-11-01T17:07:10.090
> 
> 标签：c#, multidimensional-array, customization, iteration

Something like:

```
forelement (element G_Element, Grid)
{
    Grid[G_Element.dim1, G_Element.dim2] = 
        new clsGridElement(G_Element.dim1, G_Element.dim2);
} 
```

instead of

```
for (int X = 0; X < GridWidth; X++) 
    for (int Y = 0; Y < GridHeight; Y++) 
        Grid[X, Y] = new clsGridElement(X, Y); 
```

If something doesn't innately exist, is that something that could be created?

Thanks, Tim

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T17:13:06.983

您可以这样做 - 只需创建一个公开这些的自定义类型，并使用常规 foreach：

```
public class TwoDimensionalIterator
{
    public TwoDimensionalIterator(int i, int j)
    {
       this.Dim1 = i; this.Dim2 = j;
    }
    public int Dim1 { get; private set; }
    public int Dim2 { get; private set; }
} 
```

然后在某处创建一个扩展方法以返回一个可枚举的对象：

```
public static IEnumerable<TwoDimensionalIterator> IterateTwoDim<T>(this T[,] array)
{
     for (int i=0;i<array.GetLength(0);++i)
         for (int j=0;i<array.GetLength(1);++j)
            yield return new TwoDimensionalIterator(i,j);
} 
```

有了这个，你可以这样做：

```
foreach(var index in Grid.IterateTwoDim())
{
    Grid[index.Dim1, index.Dim2] = new clsGridElement(index.Dim1, index.Dim2);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T17:12:31.757

不确定您在这里尝试做什么，或者为什么，或者您希望从中获得什么，但是如果您实现自己的迭代器而不是实现[IEnumerator](http://msdn.microsoft.com/en-us/library/system.collections.ienumerator.aspx)接口，那么您可以创建一些会击中 2D 中每个单元格的东西（或更多）收藏。

当然，与仅使用嵌套循环相比，您实际上不会从性能方面获得任何收益，但我想这将是语法糖。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T17:26:22.223

这种索引的创建可以通过使用所有索引的“笛卡尔积”来获得。这是基于[Is there a good LINQ way to do a cartesian product？](https://stackoverflow.com/questions/4073713/is-there-a-good-linq-way-to-do-a-cartesian-product)（由 Eric Lippert 提供）：

```
var allIndexes = from dim1 in Enumerable.Range(0, Grid.GetLength(0))
from dim2 in Enumerable.Range(0, Grid.GetLength(1))
select new {dim1, dim2};

foreach (var G_Element in allIndexes)
{
    Grid[G_Element.dim1, G_Element.dim2] = 
        new clsGridElement(G_Element.dim1, G_Element.dim2);
} 
```

# cuda - cublas 可以进行固定内存分配吗？

> ID：13182073
> 
> 赞同：0
> 
> 时间：2012-11-01T17:07:18.800
> 
> 标签：cuda, cublas

我知道“cudaHostAlloc”分配的固定内存可以比“malloc”内存更有效地传输到设备。但是，我认为“cudaHostAlloc”只能由 cuda 编译器编译。我的场景是在没有 cuda 编译器的情况下使用 cublas API，而且似乎 cublas 没有提供手册中用于固定内存分配的功能，或者我错过了一些东西......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T17:38:50.073

`cudaHostAlloc()`在 CUDA 运行时 API 中实现。您无需使用 nvcc 进行编译即可使用 CUDA API 调用，您只需包含适当的头文件（例如 cuda_runtime_api.h）并与运行时库（cudart）链接即可。

# python - python - 如何在没有dateutil的情况下将时区感知字符串转换为Python中的日期时间？

> ID：13182075
> 
> 赞同：110
> 
> 时间：2012-11-01T17:07:24.490
> 
> 标签：python, datetime, timezone, rfc3339

我必须将时区感知字符串转换`"2012-11-01T04:16:13-04:00"`为 Python`datetime`对象。

我看到了`dateutil`具有解析功能的模块，但我真的不想使用它，因为它添加了依赖项。

那么我该怎么做呢？我尝试过类似以下的方法，但没有运气。

```
datetime.datetime.strptime("2012-11-01T04:16:13-04:00", "%Y-%m-%dT%H:%M:%S%Z") 
```

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2012-11-01T17:13:35.110

从 Python 3.7 开始，`datetime.datetime.fromisoformat()`可以处理您的格式：

```
>>> import datetime
>>> datetime.datetime.fromisoformat('2012-11-01T04:16:13-04:00')
datetime.datetime(2012, 11, 1, 4, 16, 13, tzinfo=datetime.timezone(datetime.timedelta(days=-1, seconds=72000))) 
```

在较旧的 Python 版本中，您不能，除非没有大量艰苦的手动时区定义。

Python 不包含时区数据库，因为它会很快过时。相反，Python 依赖于可以具有更快发布周期的外部库来为您提供正确配置的时区。

作为副作用，这意味着时区*解析*也需要是一个外部库。如果`dateutil`对您来说太重，请[`iso8601`](https://pypi.python.org/pypi/iso8601/)改用它，它会很好地解析您的特定格式：

```
>>> import iso8601
>>> iso8601.parse_date('2012-11-01T04:16:13-04:00')
datetime.datetime(2012, 11, 1, 4, 16, 13, tzinfo=<FixedOffset '-04:00'>) 
```

`iso8601`是一个*惊人*的4KB 小。比较 tot`python-dateutil`的 148KB。

从 Python 3.2 开始，Python*可以*处理简单的基于偏移量的时区，并将`%z`解析时间戳中的时区偏移量。这意味着对于 ISO 8601 时间戳，您必须在时区中删除：`-hhmm``+hhmm``:`

```
>>> from datetime import datetime
>>> iso_ts = '2012-11-01T04:16:13-04:00'
>>> datetime.strptime(''.join(iso_ts.rsplit(':', 1)), '%Y-%m-%dT%H:%M:%S%z')
datetime.datetime(2012, 11, 1, 4, 16, 13, tzinfo=datetime.timezone(datetime.timedelta(-1, 72000))) 
```

[在Python 问题 15873](http://bugs.python.org/issue15873)中正在跟踪缺乏正确的 ISO 8601 解析。

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2016-04-12T07:18:09.597

这是使用 dateutil 包的日期时间对象的 Python[文档。](https://dateutil.readthedocs.org/en/latest/)

```
from dateutil.parser import parse

get_date_obj = parse("2012-11-01T04:16:13-04:00")
print get_date_obj 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2017-06-14T01:48:00.597

原始问题中的代码有两个问题：时区中不应该有 a并且*“时区作为偏移量”*`:`的格式字符串是小写而不是大写。*`%z``%Z`*

 *这在*Python v3.6中对我有用*

```
>>> from datetime import datetime
>>> t = datetime.strptime("2012-11-01T04:16:13-0400", "%Y-%m-%dT%H:%M:%S%z")
>>> print(t)
2012-11-01 04:16:13-04:00 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-03-25T11:04:15.447

你可以这样转换。

```
date = datetime.datetime.strptime('2019-3-16T5-49-52-595Z','%Y-%m-%dT%H-%M-%S-%f%z')
date_time = date.strftime('%Y-%m-%dT%H:%M:%S.%fZ') 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-06-24T14:57:14.490

您可以创建一个时区不感知对象，然后替换它`tzinfo`并使其成为时区感知`DateTime`对象。

```
from datetime import datetime
import pytz

unware_time = datetime.strptime("2012-11-01 04:16:13", "%Y-%m-%d %H:%M:%S")
aware_time = unaware_time.replace(tzinfo=pytz.UTC) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-03-27T20:26:34.793

[Mohideen bin Mohammed](https://stackoverflow.com/a/36566185/1621381)提出的使用 dateutil 的建议绝对是最好的解决方案，即使它确实需要一个小型库。在那里使用其他方法容易出现各种形式的失败。这是一个很好的功能。

```
from dateutil.parser import parse

def parse_date_convert(date, fmt=None):
    if fmt is None:
        fmt = '%Y-%m-%d %H:%M:%S' # Defaults to : 2022-08-31 07:47:30
    get_date_obj = parse(str(date))
    return str(get_date_obj.strftime(fmt))

dates = ['2022-08-31T07:47:30Z','2022-08-31T07:47:29.098Z','2017-05-27T07:20:18.000-04:00','2012-11-01T04:16:13-04:00']

for date in dates:
    print(f'Before: {date}  After: {parse_date_convert(date)}') 
```

结果：

```
Before: 2022-08-31T07:47:30Z  After: 2022-08-31 07:47:30
Before: 2022-08-31T07:47:29.098Z  After: 2022-08-31 07:47:29
Before: 2017-05-27T07:20:18.000-04:00  After: 2017-05-27 07:20:18
Before: 2012-11-01T04:16:13-04:00  After: 2012-11-01 04:16:13 
```

尝试了各种形式，例如切片分割替换 TZ，如下所示：

```
dates = ['2022-08-31T07:47:30Z','2022-08-31T07:47:29.098Z','2017-05-27T07:20:18.000-04:00','2012-11-01T04:16:13-04:00']

for date in dates:
    print(f'Before: {date}  After: {date.replace("T", " ").replace("Z", "")}') 
```

你仍然得到低于标准的结果。像下面

```
Before: 2022-08-31T07:47:30Z  After: 2022-08-31 07:47:30
Before: 2022-08-31T07:47:29.098Z  After: 2022-08-31 07:47:29.098
Before: 2017-05-27T07:20:18.000-04:00  After: 2017-05-27 07:20:18.000-04:00
Before: 2012-11-01T04:16:13-04:00  After: 2012-11-01 04:16:13-04:00 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-06-01T14:39:54.420

我是 Python 新手，但找到了一种转换方法

`2017-05-27T07:20:18.000-04:00` 至

`2017-05-27T07:20:18`无需下载新的实用程序。

```
from datetime import datetime, timedelta

time_zone1 = int("2017-05-27T07:20:18.000-04:00"[-6:][:3])
>>returns -04

item_date = datetime.strptime("2017-05-27T07:20:18.000-04:00".replace(".000", "")[:-6], "%Y-%m-%dT%H:%M:%S") + timedelta(hours=-time_zone1) 
```

我敢肯定有更好的方法可以做到这一点，而无需过多地切割字符串，但这完成了工作。*

# ruby - field = value OR field IS NULL 在循环中的 Squeel 语法

> ID：13182077
> 
> 赞同：2
> 
> 时间：2012-11-01T17:07:28.793
> 
> 标签：ruby, activerecord, squeel

我正在尝试使用循环使用 squeel 重新创建以下语法：

```
WHERE season = "value" OR season IS NULL 
```

我能够做到这一点：

```
where do
  ((season == entry["season"]) | (season == nil)) &
  ((episode == entry["episode"]) | (episode == nil)) &
  ((imdb == entry["imdb"]) | (imdb == nil)) &
  (YEAR(theatrical) == year) 
```

但是，问题是我想**在循环**中执行此操作，因此我不必为值为空时执行条件（例如，如果 imdb 没有值，我什至不会使用该行）。

我有这个：

```
entry = { "imdb"=>"0364725", "media"=>"DVD", "season"=>"1", ...}
entry.each do |k,v|
    ((k == v) | (k == nil))
  end
end 
```

但它并没有把`field IS NULL`位放在 SQL 中。

如果使用 Squeel 不可能，是否可以使用 ActiveRecord 完成？

最终，我正在寻找一种方法来避免在 SQL 中为这些字段设置条件。正如我上面所说，如果该字段为空，我根本不会列出它们，但如果它有一个值，我需要做全部`field = value OR field IS NULL`。

任何帮助将不胜感激。

**编辑：**

我目前尝试使用的整个代码是这样的：

```
matches_found = 
includes(:dvd_director, :dvd_upc, :dvd_series).limit(1).
where do
  (title == title_to_search) &
  entry.each { |k,v| ((k == v) | (k == nil)) }
end 
```

请注意，`|`无论我是否使用，之后的所有内容都会被忽略`__send__(k)`。

**更多信息：** 一件非常奇怪的事情是，如果我使用除它之外的任何东西，`k,v`它就会被忽略。例如：

```
 entry.each { |k,v| ((k == "bob") | (k == v)) } 
```

“鲍勃”被忽略了！`OR`并且值 (v) 在没有语句的情况下被放入 SQL中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:48:49.163

如果我理解正确，您需要`__send__`：

```
where do
  (title == title_to_search) & entries.map do |k, v| 
    (__send__(k) == v) | (__send__(k) == nil)
    # or: __send__(k) >> [v, nil]
  end.inject(:&)
end 
```

[https://github.com/ernie/squeel/wiki/Tips-and-tricks](https://github.com/ernie/squeel/wiki/Tips-and-tricks)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:23:55.140

最后，我能想出的唯一解决方案是添加`nil`到数组本身中，以便 Squeel 正确处理它：

```
entry.each do |k,v| 
   # we add a nill value so Squeel will do the OR field IS NULL
   entry[k] = [v, nil] if k == "upc" || k == "asin" || k == "freebase" || k == "imdb" 
end 
```

这很丑陋，但它有效。现在我确信有一种更好的方法可以将所有这些都写`or's`在第 3 行，但这是另一个问题 :)

# jquery - 使用 Jasmine jQuery 测试表单提交处理程序

> ID：13182083
> 
> 赞同：5
> 
> 时间：2012-11-01T17:07:52.913
> 
> 标签：jquery, forms, jasmine

我有一个表单，它有一个附加到提交事件的处理程序，如下所示：

```
$('#myForm').bind('submit', $.proxy(this, 'form_onSubmit')); 
```

我不知道如何测试这行代码以确保在提交表单时，它使用正确的事件处理程序。例如，这不起作用，因为页面一直在无限循环中提交自己：

```
describe('Submitting the form', function() {
    it ('Uses the correct event handler', function() {
        spyOn(myConstructor, 'form_onSubmit');
        $('#myForm').trigger('submit');
        expect(myConstructor.form_onSubmit).toHaveBeenCalled();
    });
}); 
```

我也一直在尝试使用：

```
expect($('#myForm')).toHandleWith('submit', myConstructor.form_onSubmit); 
```

但由于我无法在任何地方找到一个可行的示例，我确定我使用不正确（Jasmine 抛出错误“无法读取未定义的属性'提交'”，其中未定义是 this.actual。数据（“事件”））。

有人可以帮忙吗？我已经玩了好几个小时了！谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-10T22:48:10.803

我正在使用 Jasmine jQuery 监视事件。

[https://github.com/velesin/jasmine-jquery#event-sies](https://github.com/velesin/jasmine-jquery#event-spies)

此外，我正在使用夹具模拟表单。

在表单本身（在夹具中）上，我将操作设置为“javascript:void(0)”以防止表单提交发生。

```
<form class="js-game-form" action="javascript:void(0)">
</form> 
```

对于测试

```
describe("#submitForm", function(){
    it("should submit the form when you press one of the update buttons", function(){
      var spyEvent = spyOnEvent(formSelector, 'submit');
      $(updateButtonSelector).trigger("click");
      expect(spyEvent).toHaveBeenTriggered();
    });
}); 
```

# msmq - NServicebus 未能将失败的消息转发到错误队列

> ID：13182084
> 
> 赞同：1
> 
> 时间：2012-11-01T17:07:57.670
> 
> 标签：msmq, nservicebus

由于未配置 ISendMessages，我遇到了将失败消息转发到错误队列的问题。

我的 app.config 文件中有以下部分

```
<section name="MessageForwardingInCaseOfFaultConfig" type="NServiceBus.Config.MessageForwardingInCaseOfFaultConfig, NServiceBus.Core" />

<MessageForwardingInCaseOfFaultConfig ErrorQueue="nservicebus_error" />

<add key="ConnectivityRetryPeriod" value="30" />
<add key="FatalRetryCount" value="2" />
<add key="RetryFrequency" value="2" /> 
```

但是，当超过 FatalRetryCount 时，我得到以下异常

```
System.InvalidOperationException occurred
  Message=Could not forward failed message to error queue, reason: System.ArgumentException: NServiceBus.Unicast.Queuing.ISendMessages has not been configured. In order to avoid this exception, check the return value of the 'HasComponent' method for this type.
   at NServiceBus.ObjectBuilder.Spring.SpringObjectBuilder.NServiceBus.ObjectBuilder.Common.IContainer.Build(Type typeToBuild)
   at NServiceBus.ObjectBuilder.Common.CommonObjectBuilder.NServiceBus.ObjectBuilder.IBuilder.Build[T]()
   at NServiceBus.Faults.Forwarder.FaultManager.SendFailureMessage(TransportMessage message, Exception e, String reason).
  Source=NServiceBus.Core
  StackTrace:
       at NServiceBus.Faults.Forwarder.FaultManager.SendFailureMessage(TransportMessage message, Exception e, String reason)
  InnerException: System.ArgumentException
       Message=NServiceBus.Unicast.Queuing.ISendMessages has not been configured. In order to avoid this exception, check the return value of the 'HasComponent' method for this type.
       Source=NServiceBus.ObjectBuilder.Spring
       StackTrace:
            at NServiceBus.ObjectBuilder.Spring.SpringObjectBuilder.NServiceBus.ObjectBuilder.Common.IContainer.Build(Type typeToBuild)
            at NServiceBus.ObjectBuilder.Common.CommonObjectBuilder.NServiceBus.ObjectBuilder.IBuilder.Build[T]()
            at NServiceBus.Faults.Forwarder.FaultManager.SendFailureMessage(TransportMessage message, Exception e, String reason) 
```

具体来说，此异常记录在`NServiceBus.Faults.Forwarder`命名空间中 FaultManager.cs 的以下留置权中

![抛出错误的行](../Images/c360a214e23014de919973c5097eaf99.png)

这是我使用的 App.Config 部分和配置代码

![App.Config 部分](../Images/178084f3a66da60e0127661eea5f0ffb.png)

![配置代码](../Images/c1e5908776a1e1f96877cc824b97f9d7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T16:31:57.657

从 NServiceBus 支持团队获得了此问题的修复，当我明确调用 .MsmqTransport() 时，ISendMessages 似乎已注册。我更新了配置代码以调用 .MsmqTransport() 并且 FaultManager 停止抛出此异常

# frame-rate - 如何使用 kick.js 开发具有 FPS 速率的演示应用程序？

> ID：13182086
> 
> 赞同：0
> 
> 时间：2012-11-01T17:08:06.467
> 
> 标签：frame-rate

我对 Kick.js 很感兴趣。为了说服我的教授使用这个框架，我想开发一个应用程序，我可以使用 kick.js 加载/编码自定义 3D 模型，并且应该能够添加更多对象。当我在画布上添加更多 3D 对象时，我还应该能够打印 FPS 以检查 FPS 的变化。我是图形编程的新手，既不了解着色器编程，也不了解 openGL。作为一个新手，我该如何开始深入研究这个框架？

我想实施的以下步骤（如果我出错了，建议我）：

1.  使用 kick.js 在画布上加载单个立方体或球体或茶壶开发简单的演示。
2.  当我改变相机角度时能够看到fps。
3.  稍后我应该能够在相同类型的画布上添加更多三角形（模型）（例如：茶壶），并能够将 fps 与单个茶壶进行比较。

我是在接近正确的方式还是请需要的建议。提供的教程都没有 FPS 演示。请有人帮助我。我真的很喜欢主页上所述的功能，但我不知道如何在我的演示中实现它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:13:21.773

假设 Kick.js 有一个“渲染”回调或类似的东西，为您要渲染的每一帧调用（并且您知道帧之间的时间，或自程序启动以来的绝对时间），计算帧速率相当简单。

我之前使用的方法是：选择一个采样率（我喜欢 250 毫秒，所以它每秒更新 4 次），然后计算每 250 毫秒执行了多少帧。当您达到 250 毫秒时，更新屏幕上的帧速率计数器变量并重新开始计数。

```
timeSinceLastFPSUpdate += millisecondsSinceLastFrame;
framesSinceLastFPSUpdate++;
if timeSinceLastFPSUpdate > 250:
    timeSinceLastFPSUpdate = 0
    fps = framesSinceLastFPSUpdate * (1000 / 250); // convert "frames per 250ms" to "frames per 1s"
    framesSinceLastFPSUpdate = 0;

print fps to screen; 
```

您可以使用不同的采样率或使用不同的帧率计算方法来使计时器更“准确”（以更好地找到帧率下降），但听起来您正在寻找不太准确的东西，只是让您对渲染的整体复杂性有一个合理的了解，而不是逐帧下降。

# php - 提高 ZF2 应用程序性能的可能方法？

> ID：13182088
> 
> 赞同：-2
> 
> 时间：2012-11-01T17:08:15.950
> 
> 标签：php, performance, benchmarking, zend-framework2

我读了很多关于 ZF2 的基准博客文章，其中说 zf2 由于函数负载和类负载巨大，响应时间性能低下......

所以我需要一个提高 zf2 性能的可能方法列表

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T19:56:58.657

*   了解 classmap_autoload.php
*   始终返回[完全合格的 ViewModel](https://stackoverflow.com/questions/13178632/zend-framework-2-auto-disable-layout-for-ajax-calls)
*   使用 memcached 或 APC 之类的东西（对于框架来说总是一个巨大的速度提升）
*   缓存重物
*   保持 Module.php 轻

这就是我能想出的快速查看除此之外的所有内容，谷歌也有很大帮助

# ruby-on-rails - Rails3：如何使用资产管道构建静态资产

> ID：13182089
> 
> 赞同：0
> 
> 时间：2012-11-01T17:08:17.980
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, asset-pipeline

所以我开始研究 Rails3 中的资产管道，我有一个想要的用例，它有点偏离了人迹罕至的道路......所以我正在寻找一个秘诀。

*   我经常在本地运行 webrick 进行开发，然后为已部署的应用程序实例运行 Passenger+Apache。

*   该应用程序配置有 suburi 路径，例如 http://server/approot/...

*   为了使 webrick 路径像部署的实例一样工作，我添加`map '/approot' do run app`到`config.ru`. 现在 webrick 也在 http://local:3000/approot/...

# 混乱

鉴于这种设置，我尝试使用`rake assets:precompile`并且在本地、部署之间遇到了很多配置问题——缺少文件、不正确的路径、firebug 中的 404 等。这是我尝试过的一些解决方案：

*   `config.assets.initialize_on_precompile = false`为了`application.rb`防止在预编译资产时尝试初始化应用程序`production`，（我们有几个已部署的环境并称它们为不同的名称，ug.）。

*   `config.assets.precompile += %w( *.js *.css )``application.rb`包括缺少的 jquery.js 和 ujs 和 rails.js 之类的东西。

*   `config.assets.prefix = "/approot/assets"`纠正上面的地图（在 config.ru 中）不适用于资产的问题，因此必须将资产预编译为`./public/approot/assets`，但我不确定这是否仅适用于本地，即如果我部署，我的资产路径是`http:// server/approot/approot/(js|css|...)`吗？

预编译资产时， rake 任务切换到 env `production`，但是从 Rails3 文档中不清楚 sprockets 是否继续在本地动态编译并使用这些动态资产，或者它是否会提供静态预编译资产？

*   我尝试`config.serve_static_assets = true`输入`environments/development.rb`，但我不确定它如何与`config.assets.compress = false`and一起使用`config.assets.debug = true`。将 assets.debug 设置为 false 似乎只是在 webrick 日志中隐藏了 GET 请求，尽管我看到一篇帖子说“解决了问题”[原文如此]。

# 配方要求

所以我想要一个执行以下操作的食谱：

*   **`http://server/approot/assets/...`无论是在乘客还是 webrick（即已部署或本地）中运行，**资产都可以从路径中一致且正确地提供。**如果这不可能，那么我也可以切换我的本地开发环境以使用Passenger+Apache，这没什么大不了的，但我只想知道它是否可能。**

***   原始资产`/app/assets`像普通 Rails3 一样存在，但是当我预编译它们时，它们在部署的环境中的工作方式完全相同，因此**资产文件引用不会中断**（即现在，`/assets/image/...`当路径清晰时，有很多 refs 正在寻找设置为`/approot/assets/image...`. （从 Rails3 文档中不清楚是否有关于部署到 root 和 suburi 的假设，例如`http:// server/assets/...`vs. `http:// server/approot/assets/...`）

    *   **sprockets 不能在已部署的环境中使用**（我们的限制，抱歉）。所以这意味着 rails3 应用程序必须看起来像一个静态资产应用程序。我知道这是预编译资产应该做的事情，但是路径问题使我无法像宣传的那样工作。** 

 *** * *

TL;DR - 我觉得我正在尝试很多单独的东西，如果我知道它们的正确组合，它们可能会起作用。

# 参考

*   [http://guides.rubyonrails.org/asset_pipeline.html#precompiling-assets](http://guides.rubyonrails.org/asset_pipeline.html#precompiling-assets)
*   [http://blog.55minutes.com/2012/02/untangling-the-rails-asset-pipeline-part-2-production/](http://blog.55minutes.com/2012/02/untangling-the-rails-asset-pipeline-part-2-production/)
*   [http://blog.55minutes.com/2012/02/untangling-the-rails-asset-pipeline-part-3-configuration/](http://blog.55minutes.com/2012/02/untangling-the-rails-asset-pipeline-part-3-configuration/)
*   [https://github.com/rails/rails/pull/3946](https://github.com/rails/rails/pull/3946)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T20:11:37.293

好的，这是一个可能很*糟糕的答案*，但它现在似乎可以在两种情况下与 webrick 一起使用，而且是万圣节后的第二天（尽管我还没有在已部署的插槽中尝试过这种方法）。

# 配置

除非另有说明，否则一切都是`rails new app`一代人的默认设置。

**配置/应用程序.rb**

```
config.assets.initialize_on_precompile = false 
```

**environment/production.rb** *（不是真正的生产，仅用于 rake 资产：预编译）*

```
config.assets.css_compressor = :yui
config.assets.js_compressor = :uglifier 
```

**environment/stage.rb** *（这是我们部署的环境之一）*

```
config.serve_static_assets = true 
```

**配置.ru**

这是*可怕的部分*。我复制了地图，这样 Rack 就可以同时为 suburi 和 root 服务。所以显示布局的控制器动作可以有`http:// server/approot/foo/index`，而布局内的资产可以从`http:// server/assets/...`

```
map '/approot' do
  run AppRoot::Application
end

map '/' do
  run AppRoot::Application
end 
```

# 在本地运行

```
$ rake assets:precompile
$ rails s 
```

在萤火虫中，我看到链轮提供的单独部分（全部 200 OK）：

*   获取 /approot/
*   获取 /assets/application.css?body=1
*   获取 /assets/jquery.js?body=1
*   获取 /assets/jquery.ujs.js?body=1
*   获取 /assets/application.js?body=1

好的，现在在本地测试一个“部署”的插槽，看看编译的资产是否有效？

$ rails s -e 阶段

然后我看到正确的预编译资产（全部 200 OK）：

*   获取 /approot/
*   获取 /assets/application-xxxxxxxxxxxxxxx.css
*   获取 /assets/application-xxxxxxxxxxxxxxx.js

好的，所以这不如真正的 suburi 解决方案好，我认为我在部署的插槽中会遇到问题。第二回合，战斗！**

# c++ - 没有错误，但没有输出

> ID：13182091
> 
> 赞同：0
> 
> 时间：2012-11-01T17:08:22.663
> 
> 标签：c++, math

请看下面的代码

```
#include <iostream>
#include <iomanip>
#include <vector>
#include <string>

using namespace std;

void isPerfect(int);

vector<int> list;
string numList = "";

int main()
{
    cout << "Number" << setw(10) << "Divisors" << setw(15) << "Calculation";

    for(int i=1;i<=1000;i++)
    {
        isPerfect(i);
    }
}

void isPerfect(int number)
{

    int calc = 0;

    for(int i=1;i<=(number/2);i++)
    {
        if(number%i == 0)
        {
            list.push_back(i);
            //numList = numList +  string. + ",";
        }
    }

    for(size_t i=0;i<list.size();i++)
    {
        calc = list[i] + calc;
    }

    if(calc == number)
    {
        cout << number << setw(10) << numList << setw(15) << calc << endl;
    }
} 
```

在这里，我试图找到“完美数字”（完美数字 - 如果它的除数之和，包括 1，但不是它自身，等于该数字，它是一个完美数字。例如 6 ）

但是在这里，一切都是正确的，但我没有得到任何结果，而不是打印我在 main 方法中打印的内容。

为什么会这样？无论如何，这不是家庭作业。请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T17:11:10.273

您的列表位于全局变量中，因此它还包含所有先前数字的除数。在本地声明它`isPerfect`。

正如您随后会发现的，对于`numList`.

# iphone - 在 iOS6 中，Tab-Bar 应用程序在设备旋转时崩溃

> ID：13182092
> 
> 赞同：3
> 
> 时间：2012-11-01T17:08:26.607
> 
> 标签：iphone, rotation, ios6, uiinterfaceorientation

这不是一个重复的问题。尚未提供最终的工作解决方案，因此在我们接受答案或找到并提供我们自己的 100% 工作解决方案之前，请不要关闭此问题。谢谢！

==================================================== ================
使用 Xcode 4.5.1，我们有一个标签栏应用程序，其中有 5 个标签。每个选项卡都包含一个 UINavigationController，因此需要在纵向模式下查看整个 App。有一个例外：我们需要在横向模式下打开并全屏查看“图像库”类型的视图控制器。

我们可以在 iOS5 中使用特定 ViewController 中的以下代码轻松完成此操作：

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
   return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft || interfaceOrientation == UIInterfaceOrientationLandscapeRight);
} 
```

但`shouldAutorotateToInterfaceOrientation`在 iOS6 中已被弃用，不再起作用。
所以，为了让它在 iOS6 中工作，到目前为止，我们已经采取了以下步骤：
1）创建了 UITabBarController（这是我们的 rootViewController）的子类
2）将其设置`supportedInterfaceOrientations`为`preferredInterfaceOrientationForPresentation`（`UIInterfaceOrientationMaskPortrait` 但请注意，我们没有实现该`shouldAutorotate`方法在其中）
3）将 PROJECT/Target 支持的方向设置为 ALL

这几乎可以完美运行：我们的“图像库”视图控制器确实响应了两种横向模式 - 正如它应该 - 但它最初仍以纵向打开 - 这很糟糕。我们需要它在横向中直接打开 - 并且永远不能在纵向中显示。现在它仍然在做这两个。

知道为什么要这样做 - 或如何解决它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T17:58:22.420

shouldAutorotateToInterfaceOrientation method is deprecated in iOS 6

try to implements these following methods.

```
-(BOOL)shouldAutomaticallyForwardAppearanceMethods{   
     // This method is called to determine whether to 
     // automatically forward appearance-related containment
     //  callbacks to child view controllers.
}
-(BOOL)shouldAutomaticallyForwardRotationMethods{
    // This method is called to determine whether to
    // automatically forward rotation-related containment 
    // callbacks to child view controllers.
} 
```

note : these methods just supported in iOS 6.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T17:18:51.930

我在使用的应用程序遇到了完全相同的问题，这就是我解决它的方法。

首先，我使用纵向代码创建了一个`UITabBarController`调用的子类`NonRotatingTabBarController`

NonRotatingTabBarController.h

```
#import <UIKit/UIKit.h>

@interface NonRotatingTabBarController : UITabBarController
@end 
```

NonRotatingTabBarController.m

```
#import "NonRotatingTabBarController.h"

@implementation NonRotatingTabBarController

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationPortrait;
}

- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait;
}

@end 
```

现在，当您创建标签栏控制器时，它需要是 NonRotatingTabBarController 的一个实例

```
self.tabBarController = [[NonRotatingTabBarController alloc] init]; // or whatever initialising code you have but make sure it's of type NonRotatingTabBarController 
```

现在在唯一需要横向支持的视图控制器中，您需要覆盖旋转方法以便它旋转。就我而言，它必须固定为横向

```
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return (UIInterfaceOrientationLandscapeLeft | UIInterfaceOrientationLandscapeRight);
}

- (NSUInteger)supportedInterfaceOrientations 
{
    return UIInterfaceOrientationMaskLandscape;
} 
```

在您的项目/目标设置中，您必须为您的应用程序使用的所有界面方向启用支持，否则它将崩溃。让上面的代码负责旋转启用/禁用。

![Xcode 项目设置](../Images/b5f40553674c52d38fbe8586bc3e592d.png)

希望有帮助！

# responsive-design - 如何设置“断点”以使用 zurb 基础网格堆叠一行

> ID：13182094
> 
> 赞同：2
> 
> 时间：2012-11-01T17:08:34.600
> 
> 标签：responsive-design, zurb-foundation

假设我在 12 列网格上有一个包含两个元素的行：

```
<div class="row">
    <div class="three columns">part 1</div>
    <div class="nine columns">part 2</div>
</div> 
```

通常它们并排显示。喜欢：

```
part1      part2 
```

但如果屏幕小于 XXX，它将显示为好像有 2 行......

```
part1
part2 
```

zurb基金会能做到吗？或任何其他框架？

**编辑：**我想自己指定断点（XXX）的值。不仅依赖于默认行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:44:20.590

如果您想更改断点，则需要修改此处列出的断点：http: [//foundation.zurb.com/docs/media-queries.php](http://foundation.zurb.com/docs/media-queries.php)

```
/* Medium screens */
@media only screen and (max-width: 1279px) and (min-width: 768px) { ... }

/* Small screens */
@media only screen and (max-width: 767px) { ... } 
```

# c++ - waitpid/wexitstatus 返回 0 而不是正确的返回码

> ID：13182100
> 
> 赞同：1
> 
> 时间：2012-11-01T17:09:15.810
> 
> 标签：c++, c, linux, waitpid, wexitstatus

我有下面的辅助函数，用于在 posix 系统上执行命令并获取返回值。我曾经使用，但如果应用程序在/有机会完成其工作之前运行并退出，`popen`则无法获取应用程序的返回码。`popen``popen``pclose`

下面的辅助函数创建一个进程分支，用于`execvp`运行所需的外部进程，然后父进程`waitpid`用于获取返回码。我看到它拒绝运行的奇怪情况。

`wait`当使用=调用时`true`，`waitpid`无论如何都应该返回应用程序的退出代码。但是，我看到`stdout`指定返回码不为零的输出，但返回码为零。在常规 shell 中测试外部进程，然后`echo`ing`$?`返回非零，因此外部进程没有返回正确的代码不是问题。如果有任何帮助，正在运行的外部进程是`mount(8)`（是的，我知道我可以使用`mount(2)`，但除此之外）。

我提前为代码转储道歉。其中大部分是调试/记录：

```
inline int ForkAndRun(const std::string &command, const std::vector<std::string> &args, bool wait = false, std::string *output = NULL)
{
    std::string debug;

    std::vector<char*> argv;
    for(size_t i = 0; i < args.size(); ++i)
    {
        argv.push_back(const_cast<char*>(args[i].c_str()));
        debug += "\"";
        debug += args[i];
        debug += "\" ";
    }
    argv.push_back((char*)NULL);

    neosmart::logger.Debug("Executing %s", debug.c_str());

    int pipefd[2];

    if (pipe(pipefd) != 0)
    {
        neosmart::logger.Error("Failed to create pipe descriptor when trying to launch %s", debug.c_str());
        return EXIT_FAILURE;
    }

    pid_t pid = fork();

    if (pid == 0)
    {
        close(pipefd[STDIN_FILENO]); //child isn't going to be reading
        dup2(pipefd[STDOUT_FILENO], STDOUT_FILENO);
        close(pipefd[STDOUT_FILENO]); //now that it's been dup2'd
        dup2(pipefd[STDOUT_FILENO], STDERR_FILENO);

        if (execvp(command.c_str(), &argv[0]) != 0)
        {
            exit(EXIT_FAILURE);
        }
        return 0;
    }
    else if (pid < 0)
    {
        neosmart::logger.Error("Failed to fork when trying to launch %s", debug.c_str());
        return EXIT_FAILURE;
    }
    else
    {
        close(pipefd[STDOUT_FILENO]);

        int exitCode = 0;

        if (wait)
        {
            waitpid(pid, &exitCode, wait ? __WALL : (WNOHANG | WUNTRACED));

            std::string result;
            char buffer[128];
            ssize_t bytesRead;
            while ((bytesRead = read(pipefd[STDIN_FILENO], buffer, sizeof(buffer)-1)) != 0)
            {
                buffer[bytesRead] = '\0';
                result += buffer;
            }

            if (wait)
            {
                if ((WIFEXITED(exitCode)) == 0)
                {
                    neosmart::logger.Error("Failed to run command %s", debug.c_str());
                    neosmart::logger.Info("Output:\n%s", result.c_str());
                }
                else
                {
                    neosmart::logger.Debug("Output:\n%s", result.c_str());
                    exitCode = WEXITSTATUS(exitCode);
                    if (exitCode != 0)
                    {
                        neosmart::logger.Info("Return code %d", (exitCode));
                    }
                }
            }

            if (output)
            {
                result.swap(*output);
            }
        }

        close(pipefd[STDIN_FILENO]);

        return exitCode;
    }
} 
```

请注意，该命令使用正确的参数运行正常，该函数继续运行，没有任何问题，并`WIFEXITED`返回`TRUE`. 但是，`WEXITSTATUS`当它应该返回其他东西时，返回 0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:30:47.857

可能不是你的主要问题，但我想我看到了一个小问题。在您的子进程中，您有...

```
dup2(pipefd[STDOUT_FILENO], STDOUT_FILENO);
close(pipefd[STDOUT_FILENO]); //now that it's been dup2'd
dup2(pipefd[STDOUT_FILENO], STDERR_FILENO); //but wait, this pipe is closed! 
```

但我认为你想要的是：

```
dup2(pipefd[STDOUT_FILENO], STDOUT_FILENO);
dup2(pipefd[STDOUT_FILENO], STDERR_FILENO);
close(pipefd[STDOUT_FILENO]); //now that it's been dup2'd for both, can close 
```

我对 Linux 中的分叉和管道没有太多经验，但我最近确实编写了一个类似的函数。如果您愿意，可以查看代码进行比较。我知道我的功能有效。

[execAndRedirect.cpp](http://pastebin.com/BTZ2R2dK)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T18:37:26.063

我正在使用[mongoose](http://code.google.com/p/mongoose/)库，并且 grepping 我的代码`SIGCHLD`显示使用`mg_start`from mongoose 会导致设置`SIGCHLD`为`SIG_IGN`.

从[`waitpid`手册页](http://linux.die.net/man/2/waitpid)来看，在 Linux上，`SIGCHLD`设置为`SIG_IGN`不会创建僵尸进程，因此`waitpid`如果进程已经成功运行并退出，则会失败 - 但如果尚未成功，则会运行正常。这是我的代码偶尔失败的原因。

`SIGCHLD`在调用一个完全不执行任何操作的 void 函数后简单地重新设置`mg_start`就足以防止僵尸记录被立即删除。

根据[@Geoff_Montee 的建议](https://stackoverflow.com/a/13182422/17027)，我的重定向中有一个错误`STDERR`，但这不是问题的原因，因为`execvp`它没有将返回值存储在`STDERR`甚至`STDOUT`，而是存储在与父进程（僵尸记录）关联的内核对象中。

[@jilles](https://stackoverflow.com/questions/13182100/waitpid-wexitstatus-returning-0-instead-of-correct-return-code/13182422#comment17941630_13182100)关于 C++ 中不连续性的警告`vector`不适用于 C++03 及更高版本（仅对 C++98 有效，尽管在实践中，无论如何，大多数 C++98 编译器确实使用了连续存储）并且不适用于与这个问题有关。但是，在阻塞和检查输出之前从管道读取的建议`waitpid`是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-26T21:14:59.377

我发现它`pclose`不会阻塞并等待进程结束，这与文档相反（这是在 CentOS 6 上）。我发现我需要调用`pclose`然后调用`waitpid(pid,&status,0);`才能获得真正的返回值。

# sql-server - WHERE on View Alias 导致错误

> ID：13182102
> 
> 赞同：5
> 
> 时间：2012-11-01T17:09:24.380
> 
> 标签：sql-server, tsql

我有这样的看法：

```
SELECT location, CAST(SUBSTRING(location, 9, 4) AS int) AS ProcessCode
FROM   dbo.asset
WHERE  (status NOT IN ('INACTIVE', 'NOT READY', 'LIMITEDUSE'))
AND (location LIKE '[1-6]-[12]-[0-9][0-9][0-9]-[0-9][0-9][0-9][0-9]-_') 
```

如果我这样称呼它，它会起作用：

```
SELECT * FROM FooView 
```

但是，如果我添加 WHERE 子句：

```
SELECT * FROM FooView WHERE ProcessCode > 0 
```

我收到此错误：

> 将 varchar 值“-01-”转换为数据类型 int 时转换失败。

为什么？由于 location 必须是 format `1-2-100-0800-A`，我看不出怎么会出现转换错误。是否有可能在有机会过滤结果`CAST`之前失败？`WHERE`如果是这样，那么为什么第一个查询有效？

**编辑 - 解决方法**

我刚刚让一位同事建议了一个好的解决方法。它有效，但它仍然没有解释为什么最初的问题。

这是在 ProcessCode 的 SELECT 中：

```
CASE WHEN location LIKE '[1-6]-[12]-[0-9][0-9][0-9]-[0-9][0-9][0-9][0-9]-_'
THEN CAST(SUBSTRING(location, 9, 4) AS int) ELSE 0 END AS ProcessCode, 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T18:29:07.667

改变你的看法

```
SELECT location,
       CASE WHEN SUBSTRING(location, 9, 4) > ''
             AND SUBSTRING(location, 9, 4) NOT LIKE '%[^0-9]%' THEN
                 CAST(SUBSTRING(location, 9, 4) AS int) END AS ProcessCode
  FROM dbo.asset
 WHERE (status NOT IN ('INACTIVE', 'NOT READY', 'LIMITEDUSE'))
   AND (location LIKE '[1-6]-[12]-[0-9][0-9][0-9]-[0-9][0-9][0-9][0-9]-_') 
```

看到这个[连接项目](http://connect.microsoft.com/SQLServer/feedback/details/537419/sql-server-should-not-raise-illogical-errors)

SQL Server 可以按照它决定优化的顺序自由地评估 WHERE/SELECT 子句。除非具体化为 INDEXED VIEW 的视图被扩展为外部查询，因此您的 WHERE 子句实际上被精简到视图中，即

```
SELECT * FROM FooView WHERE ProcessCode > 0
 -- is really seen as
SELECT location, CAST(SUBSTRING(location, 9, 4) AS int) AS ProcessCode
FROM   dbo.asset
WHERE  (status NOT IN ('INACTIVE', 'NOT READY', 'LIMITEDUSE'))
AND (location LIKE '[1-6]-[12]-[0-9][0-9][0-9]-[0-9][0-9][0-9][0-9]-_')
AND CAST(SUBSTRING(location, 9, 4) AS int) > 0 ---- << Expanded inline 
```

因为该表达式同时用于 SELECT 和 WHERE 子句，所以似乎 SQL Server 已决定在原始检索中首先解析 SELECT 子句中的表达式。通过使用 Ctrl-L 查看查询执行计划可以很容易地看到这一点。您将看到 SQL Server 从表中进行一次检索，同时采用 2 个表达式，being`location`和`CAST(SUBSTRING(location, 9, 4) AS int)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T18:13:05.653

这适用于 Sql Server 2008，其他一些时髦的事情正在发生......

```
create view myview
AS
SELECT  CAST(SUBSTRING('1-2-100-0800-A', 9, 4) AS int) as ProcessCode
Where '1-2-100-0800-A' LIKE '[1-6]-[12]-[0-9][0-9][0-9]-[0-9][0-9][0-9][0-9]-_'

GO

SELECT * FROM myview WHERE ProcessCode > 0 
```

这是小提琴> [http://sqlfiddle.com/#!3/3bcfd/2](http://sqlfiddle.com/#!3/3bcfd/2)

**编辑**可能是下面建议的执行顺序，用 in 试试（用 ids 优化）

```
SELECT location, CAST(SUBSTRING(location, 9, 4) AS int) AS ProcessCode
FROM   dbo.asset 
Where id in(
 select id
 from dbo.asset 
 WHERE  (status NOT IN ('INACTIVE', 'NOT READY', 'LIMITEDUSE'))
 AND (location LIKE '[1-6]-[12]-[0-9][0-9][0-9]-[0-9][0-9][0-9][0-9]-_')
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T17:22:56.333

演员在哪里之前失败了，是的。实际上，如果我没记错的话，演员表在 SELECT 本身之前就失败了，就在它查看表格并确定位置列下的子字符串的形状之后。

您似乎对返回的子字符串是什么进行了错误计算，因为如果您说格式确实是 1-2-100-0800-A，那么 SUBSTRING(str,9, 4) 应该返回 0800，但它正在返回'-1-'，它不是一个 INT。

将你的陈述分解成更小的陈述。我会先查看 SUBSTRING 的结果。

希望有帮助。

# pdf - 更改 PDF 签名图章上的日期格式

> ID：13182107
> 
> 赞同：0
> 
> 时间：2012-11-01T17:09:53.753
> 
> 标签：pdf, itextsharp, itext, digital-signature, date-format

我可以签署一个pdf文件，但是时间格式太长了。我想更改日期格式，但我不能..

这是我的代码。

```
PdfReader reader = new PdfReader(input);
PdfStamper stp = PdfStamper.CreateSignature(reader, output, '\0');
PdfSignatureAppearance sap = stp.SignatureAppearance;
**sap.SignDate = DateTime.Now;**
sap.SetCrypto(null, chain, null, PdfSignatureAppearance.WINCER_SIGNED);
sap.Reason = "Testování";
sap.Location = "Praha";
sap.Acro6Layers = true;
sap.Render = PdfSignatureAppearance.SignatureRender.GraphicAndDescription;
PdfSignature dic = new PdfSignature(PdfName.ADOBE_PPKMS, PdfName.ADBE_PKCS7_SHA1);
**dic.Date = new PdfDate(sap.SignDate);** 
```

而且，在我的pdf文件中，签名戳是这样的：“2012.11.01 05:21:00 +02:00”

但我想这样：“01.11.2012 19:21:00”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T16:52:01.800

请访问[http://itextpdf.com/book/digitalsignatures](http://itextpdf.com/book/digitalsignatures)并阅读第 2.4 节以了解如何创建不同的签名外观。

# asp.net-mvc - 为什么启用 ELMAH 时 XDocument.Load 会引发异常？

> ID：13182108
> 
> 赞同：0
> 
> 时间：2012-11-01T17:09:54.350
> 
> 标签：asp.net-mvc, asp.net-mvc-3, elmah, linq-to-xml, elmah.mvc

我有以下代码从博客子站点检索到最新帖子的链接：

```
XDocument doc = XDocument.Load("http://www.mysite.com/blog/syndication.axd");
XElement node = doc.Descendants("item").FirstOrDefault();
string text = node.Element("title").Value;
string uri = node.Element("link").Value; 
```

代码总是运行良好。本周我通过 NuGet 添加了 ELMAH.MVC 作为包参考。一旦我使用添加的 ELMAH 部分部署 web.config 文件，就会收到以下错误：

```
System.Web.HttpException (0x80004005): Error executing child request for handler 
'System.Web.Mvc.HttpHandlerUtil+ServerExecuteHttpHandlerAsyncWrapper'. 
---> System.Net.WebException: The remote server returned an error: (500) Internal Server Error.
   at System.Net.HttpWebRequest.GetResponse()
   at System.Xml.XmlDownloadManager.GetNonFileStream(Uri uri, ICredentials credentials, IWebProxy proxy, RequestCachePolicy cachePolicy)
   at System.Xml.XmlDownloadManager.GetStream(Uri uri, ICredentials credentials, IWebProxy proxy, RequestCachePolicy cachePolicy)
   at System.Xml.XmlUrlResolver.GetEntity(Uri absoluteUri, String role, Type ofObjectToReturn)
   at System.Xml.XmlReaderSettings.CreateReader(String inputUri, XmlParserContext inputContext)
   at System.Xml.XmlReader.Create(String inputUri, XmlReaderSettings settings, XmlParserContext inputContext)
   at System.Xml.Linq.XDocument.Load(String uri, LoadOptions options) 
```

如果我把旧的 web.config 文件放回去，错误就会消失。

知道为什么添加 ELMAH 会导致 XDocument.Load 失败吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T21:36:54.350

您需要查看您的 ASP.Net 站点并找到服务器端错误。

# macos - 如何在 OSX 10.6 Snow Leopard 上使用 NSURLConection 验证服务器端证书？

> ID：13182110
> 
> 赞同：1
> 
> 时间：2012-11-01T17:10:00.767
> 
> 标签：macos, ssl, nsurlconnection, osx-snow-leopard

问题：SecTrustGetCertificateAtIndex() API 无法在 OSX 10.6 上运行（在 10.7 及更高版本上运行良好）。

细节：

似乎如果我是从 didReceiveAuthenticationChallenge() 委托方法中调用的，那么在 10.7 和 10.8（包括 iOS）上使用方便的 SecTrustGetCertificateAtIndex() API 有一个相当简单的方法。请在此站点上查看[此答案。](https://stackoverflow.com/questions/9784251/retrieve-ssl-certificate-fields-in-the-didreceiveauthenticationchallenge?answertab=active#tab-top)

此特定方法在 10.7 及更高版本上运行良好，但在 10.6 上，SecTrustGetCertificateAtIndex() 函数不起作用并返回 null。

你可以看到其他人已经在这里偶然发现：http: [//code.metager.de/source/xref/curl/lib/curl_darwinssl.c](http://code.metager.de/source/xref/curl/lib/curl_darwinssl.c)

那么在10.6上获取主机证书和颁发者证书的正确方法是什么呢？在仍然使用 NSURLConnection API 的同时我可以使用其他方法吗？

非常感谢！

# oracle - Oracle 编号更新

> ID：13182114
> 
> 赞同：0
> 
> 时间：2012-11-01T17:10:33.963
> 
> 标签：oracle, sql-update

我正在尝试使用 Oracle 做一些 SQL

我有一个包含文本数据的表，以及该文本应如何显示的数字顺序列表，1-27。

```
So:
Bonjour | 1
mon nom | 2
Jean P. | 3
Hello J | 4
Je suis | 5
is John | 6 
```

现在我必须重新排列列表编号：从 5 到 2，然后将 2 移动到 3、3 到 4、4 到 5，但不要将 5 到 6 或 6 移动到任何位置。请记住，这是第 27 位的列表。

```
So I'll have:
Bonjour | 1
mon nom | 2
Jean P. | 3
Hello J | 4
My name | 5
is John | 6 
```

有谁知道这样做的好方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:14:37.047

就像是：

```
update foobar
   set sort_nr = case 
                   when sort_nr = 5 then 2
                   when sort_nr = 2 then 3
                   when sort_nr = 3 then 4
                   when sort_nr = 4 then 5
                   else sort_nr
                end
where sort_nr in (2,3,4,5); 
```

案例中的`else`部分不是绝对必要的。但是如果你忘记了 where 子句，它可以防止意外的错误更新。

这是一个 SQLFiddle 示例：[http ://sqlfiddle.com/#!4/52d50/1](http://sqlfiddle.com/#!4/52d50/1)

# mysql - 将制表符分隔的数据加载到mysql中

> ID：13182123
> 
> 赞同：0
> 
> 时间：2012-11-01T17:11:23.203
> 
> 标签：mysql, load, csv

我需要将文本文件 tabDelimited/csv 作为表直接加载到 mysql 中。我正在关注页面（https://dev.mysql.com/doc/refman/5.5/en/loading-tables.html）做同样的事情。

## 测试文件.txt

```
field1,field2
"abc",1
"def",2
"ghi",3 
```

但是，我不断收到以下消息：

```
mysql> LOAD DATA INFILE 'testfile.txt' INTO TABLE myTable IGNORE 1 LINES;
ERROR 1146 (42S02): Table 'test.myTable' doesn't exist 
```

我看到只有在创建表后才能使用“加载”。所以这个错误是预期的。我有多个文件，我需要避免一一创建表。有没有其他方法可以做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T17:15:53.420

您需要先创建表，然后再将数据插入其中。

如果您有多个文件，请创建一次表，然后使用多个`LOAD DATA INFILE`调用附加数据。

MySQL 无法从 CSV 文件自动确定数据的模式。创建表对于建立列和任何索引或键的数据类型至关重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T17:16:33.550

听起来您还没有创建表。

只是一个示例，您可以根据自己的需要进行调整。如果不存在则创建表 (field1 VARCHAR(3), field2 INTEGER);

有关创建表的完整文档：http: [//dev.mysql.com/doc/refman/5.1/en/create-table.html](http://dev.mysql.com/doc/refman/5.1/en/create-table.html)

# c - stdin/stderr 是否保证在进程终止后关闭？

> ID：13182130
> 
> 赞同：6
> 
> 时间：2012-11-01T17:11:47.330
> 
> 标签：c, posix

我使用 pipe()、fork()、dup()、execve() 生成了一个子进程。

从父母那里，等待孩子的标准输入和标准输出关闭（即 read() 两者都返回 0），然后执行 waitpid() 来收集终止状态是否安全？

或者在没有关闭标准输入和标准输出的情况下，进程是否会失败？（因此我的程序永远不会进入waitpid）

* * *

为了澄清，我问以下是否安全：

```
while (child_stdin != -1 && child_stdout != -1) {
    poll(...)

    if (got_stdout) {
        n = read(child_stdout);
        if (n >= 0) {
            // do something with output
        } else if (n == 0) {
            child_stdout = -1
        }
    }

    // same for stdin
}

waitpid(child_pid) 
```

或者孩子会终止，但我永远不会在 read() 或 write() 上得到 0。

不涉及任何信号，只是 poll()-ing。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T17:18:48.670

如果进程`a`生成进程`b`，并且进程`b`生成进程`c`（`c`的孙子进程也是如此`a`），`b`则可以终止并关闭作为其标准输出的文件描述符的副本（推测`b's`标准输出是正在监视的管道的写入端`a`。）但`c`仍然有该管道打开，因此`a`将从中获取 SIGCHLD `b`，但不会在管道上获取 EOF。换句话说，是的，可能会发生子进程终止但父进程没有看到管道关闭的情况。

此外，这是一个常见的编码错误，`a`仍然使管道的写入端处于打开状态。在这种情况下，`b`可以终止并关闭其管道写入端的副本，但父级永远不会看到管道关闭，因为父级保持它处于打开状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T17:14:34.630

系统在进程退出时关闭所有文件描述符。可能发生的情况是，缓冲区中存储了一些输出，尚未刷新。

如果子进程永远不会终止，那么它可能会发生，你的父进程永远等待并且永远不会到达`waitpid()`.

**编辑：**

当您的孩子终止时，所有描述符都将关闭，然后您最终将获得 0 `read()`（如果出现问题，则为 -1！）。因此，您可能希望更改为：

```
...
if (n > 0) {
    // do something with output
} else if (n <= 0) {
    child_stdout = -1
} 
```

但是，您的代码不会终止，因为：

```
if (n >= 0) {  // n > 0 || n == 0
    // ...
} else if (n == 0) {
    // Never reached!
} 
```

# c# - 检查字符串是否是具有正确格式的完整路径的代表文件名的最简单方法是什么？

> ID：13182135
> 
> 赞同：3
> 
> 时间：2012-11-01T17:12:04.403
> 
> 标签：c#, .net, filenames

> **可能重复：**
> [确定字符串是否是有效的文件路径？](https://stackoverflow.com/questions/3067479/figuring-out-whether-string-is-valid-file-path)
> [在 C# 中检查文件名是否*可能*有效（不存在）](https://stackoverflow.com/questions/422090/in-c-sharp-check-that-filename-is-possibly-valid-not-that-it-exists)

我有一个方法，它需要一个字符串，该字符串表示具有完整路径的文件名。

我想根据它的格式验证（Guard）这个字符串，看看它是否真的可以代表一个文件名（不是路径的正确性，无论它是否存在）？

例如，如果它类似于以下内容，则不应被接受：“123C:\foo\”

在 C# 中进行此检查的最简单方法是什么？

```
public void LoadFile(string fileName)
{
  var valid = Check if 'fileName' is in valid format.
  if(!valid)
      throw new ArgumentException(....
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:25:33.580

从[文档中](http://msdn.microsoft.com/en-us/library/system.io.path.aspx)：

> 在接受路径作为输入字符串的成员中，该路径必须格式正确，否则会引发异常。

所以你可以做这样的事情：

```
public void LoadFile(string fileName)
{
    try
    {
        var path = Path.GetFullPath(fileName);
    }
    catch (NotSupportedException e)
    {
        throw new ArgumentException(...);
    }
} 
```

# php - PHP next($array) 只移动一次指针

> ID：13182136
> 
> 赞同：0
> 
> 时间：2012-11-01T17:12:04.753
> 
> 标签：php, pointers, next

我是 PHP 新手，目前正在这个网页上工作，该网页读取文件夹中的许多音频文件，并让用户编写关于她/他所听到内容的文字记录。目前我可以读取目录中的文件并打乱该数组。我还想实现两个按钮，让用户收听下一个/上一个文件。那就是我现在遇到问题的地方。下一个按钮似乎正在工作，但不是我想要的。问题是我只能移动指针一次。我的意思是我可以从第一个文件到第二个文件，我不能再前进了。这是用户单击按钮时调用的函数的代码： function nextelem(){

```
 var nextElement = "./Sound data/<?php

            $current_id = current($files);
            $current_index = array_search($current_id, $files);     
            $next_index = $current_index+1;

            echo $files[$next_index];

            next($files);

            ?>";

            //Play the next file
            document.getElementById('RandomAudio').src=nextElement;

          } 
```

我猜问题是 current($array) 和 next($array) 函数是按值原则工作的，所以每次调用函数时，都会传递原始数组的副本，所以每次按钮单击我将第一个元素作为当前元素并使用 next($array) 移动指针并没有真正的效果。

所以我尝试编写自己的 current($array) 和 next($array) 函数：

```
 <?php
               function &current_by_ref(&$arr) {
                    return $arr[key($arr)];
                }
                function &next_by_ref(&$arr) {
                    return $arr[key($arr)+1];
                }
        ?>; 
```

但这些也无济于事。我真的很感激任何帮助或提示。这开始让我紧张了。（PS：我打开了一个关于（同一个项目但不是同一个问题）的主题，这真的很有帮助。链接在这里[PHP next($array) 和 Javascript](https://stackoverflow.com/questions/13110348/php-nextarray-and-javascript)。我在那里发布了所有代码，它不是最后一个我现在正在处理的版本，但它可以让你对我认为的页面有更多的了解。所以还是谢谢）

根据氟利昂的回答，我将代码更改为：

```
 session_start();
                $dir = './Sound data';
                $files = scandir($dir); 

                    $norp = $_GET['name'];  

                    $current_id = current($files);
                    $current_index = array_search($current_id, $files);     
                    $_SESSION['current'] = $current_index;
                    $_SESSION['songlist'] = $files;

                    $current_song = $_SESSION['current']; //index in songlist for your song
                    $songlist = $_SESSION['songlist']; //this session var has your $files array
                    if($norp == 'nextS'){

                        $current_song++; //changes currentsong to next song
                        if($current_song == count($songlist))
                           $current_song = 0;
                        echo "./Sound data/$songlist[$current_song]";
        }           

                    else if($norp == 'prevS'){
                        $current_song--;     //changes currentsong to prev song

                        if($current_song == count($songlist))
                        $current_song = 0;
                        echo "./Sound data/$songlist[$current_song]";
                    } 
```

?>

和

```
 <script language="JavaScript" type="text/javascript" >

        function getNextSong()
        {                 
            $.get('getsong.php', {name : 'nextS'}, function(song){

                document.getElementById('RandomAudio').src =  song;
                document.getElementById('filename').innerHTML= song;
            //  alert(song);
            });
        }

        function getPreviousSong()
        {                 
            $.get('getsong.php', {name : 'prevS'}, function(song){

                document.getElementById('RandomAudio').src =  song;
                document.getElementById('filename').innerHTML= song;
            //  alert(song);
            });
        }
    </script> 
```

但我仍然无法超越下一个元素。难道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:19:23.520

您正在混合 PHP 和 JavaScript。你不能那样做。代码将被解释，您将只有下一个文件可用。您的输出可能是：

```
var nextElement = "./Sound data/2.mp3";
   document.getElementById('RandomAudio').src=nextElement; 
```

在您第二次按下按钮时，将执行相同的代码。这就是为什么你不能走得更远。您必须找到一种从服务器检索下一个音频的方法，为此您必须跟踪正在播放的音频。

歌颂.php

```
<?php
session_start(); //init session

if(!isset($_SESSION['songlist']) or empty($_SESSION['songlist']))
{ //we'll create our songlist JUST ONCE, when it's not created yet. And then, we'll put this list in a SESSION, so we can access it later.
    $dir = './Sound data';
    $files = scandir($dir);
    $_SESSION['songlist'] = array();
    foreach($files as $file)
    {//loop through song list and just add actual files, disposing "." and ".."
        if(is_file($file) and $file != "." and $file != "..")
        {
            $_SESSION['songlist'][] = $file; //add $file to songlist array.
        }
    }
    shuffle($_SESSION['songlist']);//shuffle list
    $_SESSION['current'] = 0; //iniate current song with first song in the list.
}//note that we'll create and shuffle the song list just once.

$norp = $_GET['name'];

$current_song = $_SESSION['current']; //index in songlist for your song
$songlist = $_SESSION['songlist']; //this session var has your $files array

if($norp == 'nextS'){
    $current_song++; //changes currentsong to next song
    if($current_song == count($songlist)) //if current is after the last element, set it to the first song
        $current_song = 0;
    echo "./Sound data/$songlist[$current_song]";
}
else if($norp == 'prevS'){
    $current_song--;     //changes currentsong to prev song
    if($current_song == -1) //if current is before the fist song, set it to the last song
        $current_song = count($songlist) - 1;

    echo "./Sound data/$songlist[$current_song]";
}

$_SESSION['current'] = $current_song; //store current song for later use.
?> 
```

listensong.php `//page that plays your songs`（带有代码优化）

```
<script type="text/javascript">
    //using jQuery
    function getSong(type)
    {
        $.get('getsong.php', {name: type}, function(song){
            document.getElementById('RandomAudio').src = song;
            document.getElementById('filename').innerHTML= song;
        });
    }
</script>
<a href="javascript:getSong('prevS')">Previous Song</a>
<a href="javascript:getSong('nextS')">Next Song</a> 
```

# jquery - 默认数据表搜索框文本

> ID：13182141
> 
> 赞同：3
> 
> 时间：2012-11-01T17:12:29.900
> 
> 标签：jquery, datatable

下面的代码在初始化时过滤表以匹配“搜索...”这对我没有用。

```
$(document).ready(function(){
  $('.table').dataTable({
    "oSearch": {"sSearch": "Search for..."});
}); 
```

我想要的是“搜索...”出现在搜索框中，而不是在页面加载时初始化搜索参数。当用户将焦点放在搜索框上时，字符串消失，用户可以开始输入。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T17:19:01.087

您可以为搜索框指定一个值，例如“搜索”，然后使用 jquery 使用您喜欢的 onfocus 或模糊来清除它。当有人“关注”框时清除该值。

# iphone - 从 iOS 5 迁移到 iOS 6 可能出现的问题

> ID：13182145
> 
> 赞同：0
> 
> 时间：2012-11-01T17:12:40.697
> 
> 标签：iphone, objective-c, ios, app-store

我听说这可能有一些问题，但还没有找到任何官方公告。是否可以向 AppStore 发布新版本的应用程序，以前版本支持 iOS 5.1，而新版本仅支持 iOS 6.0？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:14:58.700

完全没有问题。只需更改项目的部署目标设置并提交更新。在过去 4 年中，人们通过更改 iOS 的最低支持版本来更新应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T17:17:42.103

大多数更改涉及已过时的语法，xCode 的自动更正/终端将为您提供新需要的方法等。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T17:16:52.630

我只知道：以新方式处理方向...这将在旧代码中进行更改...

```
// iOS 5 interface orientation handling
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation {
    return (toInterfaceOrientation == UIInterfaceOrientationPortrait);
}

//iOS6 interface orientation handling

- (BOOL)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskPortrait;
}

- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{

} 
```

不推荐使用 should rotate 方法，并且从 iOS 6 开始将不再调用，但无论如何它并不意味着以您使用它的方式使用。

# iphone - 如何从 RapidEars 框架链接中排除未定义的符号？

> ID：13182149
> 
> 赞同：0
> 
> 时间：2012-11-01T17:12:54.073
> 
> 标签：iphone, objective-c, ios, xcode, openears

通过将框架拖放到 Project Navigator 中的项目上，我向我的 Xcode 4.4 项目添加了一个框架。

我在 Xcode 上收到未定义符号的链接器错误。

架构 armv7 的未定义符号：“_returner”，引用自：RapidEarsDemo 中的 _should_be_returned(multisphinx_re.o) “_input_sample_rate”，引用自：RapidEarsDemo(PocketsphinxController+RapidEars.o) 中的 -[PocketsphinxController(RapidEars) startRealtimeListeningWithLanguageModelAtPath:andDictionaryAtPath:] -[ RapidEarsDemo(ContinuousModel+RapidEars.o) 中的 ContinuousModel(RapidEars) realtimeListeningLoopWithLanguageModelAtPath:andDictionaryAtPath:] -RapidEarsDemo(RECommandArray.o) 中的 [RECommandArray commandArrayForlanguageModel:andDictionaryPath:isJSGF:] ld：未找到架构 armv7 的符号

我在 RapidEarsDemo 框架文件上运行了“nm”，我只看到 i386 的 _input_sample_rate。如何指定不为 armv7 包含此符号？

“nm”根本不显示_returner。

在 Build Phases -> "Link Binaries with Project" 中，我确保我的新框架列在那里。我已经进行了清理和重建。

有什么建议么？您的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T17:40:08.937

可能是您缺少一些要包含在项目中的库头文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T00:57:08.040

原因是我包含了两个框架。框架 A 引用了框架 B。我使用的是 A 的 1.1 版，但是 B 的 1.2 版。因此，A 期望符号存在于 B 中，而该版本中不存在。

运行“nm”来列出符号很有启发性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T17:24:18.357

我会尝试在 Build Settings -> Other Linker Flags 添加“-all_load”

# bash - 等待进程结束

> ID：13182157
> 
> 赞同：0
> 
> 时间：2012-11-01T17:13:11.993
> 
> 标签：bash, process

我想同时运行`n`进程（在我的情况下是模拟），所以我`&`像这样使用：

```
for i in {1..50};
do
     run simulation &
done 
```

每次模拟完成后，我需要解析其输出文件。我的问题是我如何知道一个过程何时完成，以及在完成一个过程后我该怎么做才能调用一个函数？

编辑：我认为我需要做的是调用一个函数，该函数将调用模拟并在完成后解析其文件。在我看来，这个函数无论如何都必须是一个子进程，对吧？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T17:15:50.523

由于您似乎不想/不需要等到*所有*模拟完成，您可以简单地这样做：

```
for i in {1..50};
do
     { run simulation && parse output; } &
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T20:41:56.880

`wait`内置等待所有孩子完成。如果要为每个完成的作业执行命令，可以使用`trap`. 在您的情况下，`wait`and的组合`trap`应该起作用：

```
trap parse_output SIGCHLD
for i in {1..50}; do
  run simulation &
done
wait 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T17:15:45.923

使用`wait`内置实用程序。有关`man bash`更多信息，请参阅。在最简单的情况下，`wait`它本身会等待所有子进程终止。

# .net - 当.NET MVC中不存在图像时如何防止未找到错误

> ID：13182166
> 
> 赞同：2
> 
> 时间：2012-11-01T17:13:46.653
> 
> 标签：.net, asp.net-mvc, routing, asp.net-mvc-routing

我有一个 MVC 应用程序，我的错误处理在 web.config 中设置如下：

```
<customErrors mode="On" defaultRedirect="~/Error/" redirectMode="ResponseRedirect">
    <error statusCode="404" redirect="~/Error/NotFound/" />
</customErrors> 
```

每次请求不存在的图像时，我在错误控制器上的 NotFound 操作都会被命中，并且我会`The controller for path '/img/home/myimg.jpg' was not found or does not implement IController.`记录一个错误。

我添加`RouteTable.Routes.IgnoreRoute("img/");`到我的`Global.asax`，但它没有帮助。如何让 MVC 忽略对任何文件的所有请求？

谢谢

# c# - （开放泛型）typeof泛型类型，没有指定参数

> ID：13182171
> 
> 赞同：2
> 
> 时间：2012-11-01T17:14:11.477
> 
> 标签：c#, generics, reflection

有人可以用 C# 语言解释我对`typeof(SomeGenericType<>`) 的需求，没有指定具体参数。

我整理了以下示例：

```
 var t1 = typeof(Nullable<>);
        var t2 = typeof(Nullable<int>);
        var q = 1 as int?;

        var b1 = t1.IsInstanceOfType(q); //false
        var b2 = t2.IsInstanceOfType(q); //true 
```

我首先想到`typeof(Nullable<>)`的是“更通用” `t2`，它指定了通用参数`int`，但`b1`结果是 `false`- 所以 instance of`int?`不是 instance of `Nullable<>`。

那么应该如何定义一个变量`b1`呢`true`？它有什么实际用途？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T17:15:56.780

那是一个*开放的泛型类型*。
它不是一个实际的类型。不可能有这种类型的实例。

相反，您可以使用它来生成具体的（*封闭*的）泛型类型，例如`Nullable<int>`.

`GetGenericTypeDefinition()`您还可以通过检查其方法来检查封闭泛型类型是否是特定开放泛型类型的实例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T17:17:49.837

> 那么应该如何定义一个变量来使 b1 为真呢？

它不能。（事实上​​，`Nullable<T>`无论如何你都会遇到有趣的拳击问题，但我们开始了......）

*在执行时，值始终是封闭*类型的实例。`Nullable<>`,`List<>`是*开放*的泛型类型。调用`IsInstanceOfType`这种类型永远不会有用。但这并不意味着它没有用。

通常在反射中使用开放类型。例如：

```
public IList CreateList(Type elementType)
{
    Type closedType = typeof(List<>).MakeGenericType(elementType);
    return (IList) Activator.CreateInstance(closedType);
} 
```

可以有一些通用的代码*，*但调用较低级别的代码会传入`Type`值 - 然后列表可以返回堆栈并强制转换`IEnumerable<T>`为`T`.

同样，您可能希望创建一个带有反射的封闭类型来调用它的方法等。

您还*可以*使用它来确定特定类型是否为*某个*类型参数实现了泛型接口 - 对于每个实现的接口，您可以确定它是否是泛型的，获取泛型类型定义，并查看它是否等于 (say) `IEnumerable<>`。

# css - 居中浮动元素

> ID：13182174
> 
> 赞同：4
> 
> 时间：2012-11-01T17:14:25.737
> 
> 标签：css, html, css-float

目前我有以下代码......

```
<!DOCTYPE html>
<html>
  <head>
    <title>Test</title>
    <meta charset="UTF-8" />
    <link href="verna.css" type="text/css" rel="stylesheet" />
  </head>
  <body>
  <section id="devices">
    <h1>Gruppen</h1>
    <div class="group">
      <h2>Gruppe 1</h2>
      <ul>
        <li class="device">Schalter 1</li>
        <li class="device">Schalter 2</li>
        <li class="device">Schalter 3</li>
      </ul>
    </div>
    <div class="group">
      <h2>Gruppe 2</h2>
      <ul>
        <li class="device">Schalter 1</li>
        <li class="device">Schalter 2</li>
        <li class="device">Schalter 3</li>
      </ul>
    </div>
  </section>
  </body>
</html> 
```

```
* {
    margin: 0;
    padding: 0;
}

ul {
    list-style-type: none;
}

#devices {
    background-color: yellow;
}

#devices .group {
    background-color: gray;
}

#devices .group ul {
    text-align: center;
}

#devices .group .device {
    background-color: green;
    display: inline-block;
    margin: 5px;
    max-width: 200px;
    width: 100%;
} 
```

...看起来像这样： ![在此处输入图像描述](../Images/3f5ef4b6d140bb1e1175a0a4c67d6784.png)

但我希望绿色`<li>`元素浮动在列中。它应该如下所示： ![在此处输入图像描述](../Images/7183fb20b2549215f5c785df676b927f.png)

请注意：绿色`<li>`元素的数量是可变的，可以多于或少于三个元素，也可以多于两列！我想`<li>`“按列”订购 -elements 并将它们居中...

感谢帮助 ：-）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T17:19:15.003

以“Schalter 3”为中心的东西是`text-align: center;`。我们可以通过删除来解决这个问题

```
#devices .group ul {
    text-align: center;
} 
```

并添加：

```
#devices .group ul {
    margin-left: 50px;
}

#devices .group li {
    text-align: center;
} 
```

在它的位置。这使 li 元素中的文本居中，而不是 ul 中的 li 元素居中。它会在左边添加边距以获得您想要的缩进。

[工作小提琴。](http://jsfiddle.net/sZCMz/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T17:18:06.577

重组你的 html，使每个“列”都是它自己的容器（div），它具有适当的宽度。或者，如果您讨厌自己，请使用桌子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T17:21:49.837

[看看这个小提琴。](http://jsfiddle.net/rNKJh/1/)

诀窍是将`li`s 变回块级元素，以便它们具有宽度。然后设置`width: 40%;`（40% 为 5px 的边距留出一点空间）和`float: left;`. 还添加`overflow: auto;`到，`ul`以便它包含它的浮动`li`s。

# java - 如何使用 ScheduledExecutorService 返回值？

> ID：13182177
> 
> 赞同：4
> 
> 时间：2012-11-01T17:14:35.000
> 
> 标签：java, android, time, timer, scheduledexecutorservice

我使用 ScheduledExecutorService，我希望它每 10 秒进行一次计算，持续一分钟，然后在那一分钟后返回新值。我该怎么做？

示例：所以它收到 5 它添加 +1 六次然后它应该在一分钟后返回我的值 11。

我到目前为止但没有工作的是：

```
package com.example.TaxiCabs;

import java.util.concurrent.Executors;
import java.util.concurrent.ScheduledExecutorService;
import java.util.concurrent.ScheduledFuture;
import static java.util.concurrent.TimeUnit.*;

public class WorkingWithTimeActivity {
public int myNr;
public WorkingWithTimeActivity(int nr){
    myNr = nr;
}
private final ScheduledExecutorService scheduler =
        Executors.newScheduledThreadPool(1);

public int doMathForAMinute() {
    final Runnable math = new Runnable() {
        public void run() {
            myNr++;
        }
    };
    final ScheduledFuture<?> mathHandle =
            scheduler.scheduleAtFixedRate(math, 10, 10, SECONDS);
    scheduler.schedule(
            new Runnable() {
                public void run() {
                    mathHandle.cancel(true);
                }
            }, 60, SECONDS);
    return myNr;
} 
```

}

在我的主要活动中，我希望它在 1 分钟后将我的 txtview 文本更改为 11；

```
WorkingWithTimeActivity test = new WorkingWithTimeActivity(5);
txtview.setText(String.valueOf(test.doMathForAMinute())); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T17:22:23.183

您应该使用[`Callable`](http://developer.android.com/reference/java/util/concurrent/Callable.html)which can return value 而不是 Runnable

> Callable 接口与 Runnable 类似，两者都是为实例可能由另一个线程执行的类设计的。但是，Runnable 不返回结果，也不能抛出检查异常。

```
public class ScheduledPrinter implements Callable<String> {
    public String call() throws Exception {
        return "somethhing";
    }
} 
```

然后像下面这样使用它

```
 ScheduledExecutorService scheduler = Executors
            .newScheduledThreadPool(1);
    ScheduledFuture<String> future = scheduler.schedule(
            new ScheduledPrinter(), 10, TimeUnit.SECONDS);
    System.out.println(future.get()); 
```

这是一个镜头计划，因此它只会执行一次，一旦返回 get 调用，您将需要再次安排它。

* * *

但是，在您的情况下，一旦您的条件到达，就可以很容易地使用一个简单的方法[`AtomicInteger`](http://developer.android.com/reference/java/util/concurrent/atomic/AtomicInteger.html)来[`addAndGet`](http://developer.android.com/reference/java/util/concurrent/atomic/AtomicInteger.html#addAndGet%28int%29)比较返回的值，通过调用取消来取消调度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T17:41:32.517

如果要从中返回结果`doMathForAMinute`，则根本不需要 ScheduledExecutorService。只需创建一个运行计算的循环，然后运行 ​​Thread.sleep()。使用 ScheduledExecutorService 的整个想法是释放启动任务的线程等待结果，但在这里你不会释放它。

如果，正如我所怀疑的，调用的线程`doMathForAMinute`是 GUI 线程，那么这是完全错误的，因为你的 gui 会卡住并且一分钟都没有响应。相反，`doMathForAMinute`应该只开始并行计算，并且并行任务本身应该使用`runOnUiThread`或其他方式更新 UI。

也可以看看：

[Android：runOnUiThread 并不总是选择正确的线程？](https://stackoverflow.com/questions/9448342/android-runonuithread-does-not-always-choose-the-right-thread)

[我在哪里创建和使用 ScheduledThreadPoolExecutor、TimerTask 或 Handler？](https://stackoverflow.com/questions/8098806/where-do-i-create-and-use-scheduledthreadpoolexecutor-timertask-or-handler)

# objective-c - RestKit iOS 应用程序应请求崩溃

> ID：13182181
> 
> 赞同：1
> 
> 时间：2012-11-01T17:14:53.677
> 
> 标签：objective-c, ios, crash, ios6, restkit

我对 Objective C 和 RestKit 有一个大问题。在应用程序启动时，我想单击一个按钮。但是，如果我在启动后立即单击按钮，我的应用程序就会崩溃。如果我等待几秒钟，一切正常。

任何人的想法？这是我的代码

```
- (void)sendRequest {
// Perform a simple HTTP GET and call me back with the results
[[RKClient sharedClient] get:@"/user" delegate:self];
}

- (void)request:(RKRequest*)request didLoadResponse:(RKResponse*)response {
  if ([response isSuccessful]) {
    NSLog(@"HTTP status code:     %d", response.statusCode);
    NSLog(@"HTTP status message:  %@", [response localizedStatusCodeString]);
  }
} 
```

启动后客户端会在“AppDelegate”中创建

```
RKClient *client = [RKClient clientWithBaseURLString:@"http://192.168.0.6:8080"];
[client setPassword:@"user"];
[client setUsername:@"user"];
[client setAuthenticationType:RKRequestAuthenticationTypeHTTPBasic];
client.requestQueue.showsNetworkActivityIndicatorWhenBusy = YES; 
```

我按下按钮后将调用“sendRequest”方法。

对不起，我的英语不是很好。我希望你能理解我的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T19:38:29.097

我有完全相同的问题..能够用块解决这个问题

```
NSURL *baseURL = [[NSURL alloc] initWithString:@"http://your.api.com"];
RKClient *client = [RKClient clientWithBaseURL:baseURL];

RKRequest *request = [client get:@"/method/name" queryParameters:nil delegate:nil];
request.onDidLoadResponse = ^(RKResponse *response) {
    NSLog(@"%@", [response bodyAsString]);
}; 
```

# python - Python：如何将特定数量字符的字符串切片到列表中？

> ID：13182185
> 
> 赞同：2
> 
> 时间：2012-11-01T17:15:03.677
> 
> 标签：python, slice

我正在读取一行文本数据，我想将该行拆分为一个值列表。例如该行有四个数字，每个数字分配 5 个空格，因此如果数字是 18、295、-9999 和 1780，那么原始行将如下所示（^ 字符表示行的开始和结束，不包括在内在实际输入数据中）：

```
^   18  295-9999 1780^ 
```

我想将该行拆分为其实际组件值的列表：

```
[18, 295, -9999, 1780] 
```

我知道列表应该包含的值的数量（在上面的示例中为 4），并且我确切地知道每个值在字符串中占用的空格数（在上面的示例中为 5）。我可以创建一个循环来进行这种拆分，如下所示：

```
values = []
for i in range(4):
    values.append(line[i*5:5]) 
```

有没有更有效或更“Pythonic”的方式来做到这一点？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T17:17:14.087

使用切片...

```
>>> [int(s[i:i+5]) for i in xrange(0, len(s), 5)]
[18, 295, -9999, 1780] 
```

或者 - 如果你真的想要，有些人会发现`re`更具可读性......（只是把它作为参考的替代品 - 不要开枪！）

```
>>> map(int, re.findall('.{5}', s))
[18, 295, -9999, 1780] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T17:55:55.413

这是另一种可能的解决方案：

```
x = '   18  295-9999 1780'

def split_up(x):
    return map(int, x.replace('-', ' -').split()) 
```

结果

```
>>> split_up(x)
[18, 295, -9999, 1780] 
```

# android - 是否可以在android中读取由iphone开发制作的序列化数据

> ID：13182188
> 
> 赞同：4
> 
> 时间：2012-11-01T17:15:19.213
> 
> 标签：android, iphone

我有一个使用序列化对象在 iPhone 中创建的文件。我想在android中阅读。有没有可能？请提前快速回复谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T17:35:54.657

您应该能够读取由另一种语言生成的任何文件。如果那里有一个图书馆就更好了。如果文件使用数组，尤其是动态数组，它会变得复杂。这可能需要一些有趣的时间来使用十六进制编辑器。如果数据不简单，我无法保证这种方法的可靠性。只要意识到这最终可能是一项棘手的任务

最好有一个文件规范。您不必使用二进制文件，因为如果都是基于文本的信息，您可以使用 JSON 或 XML 之类的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T18:05:10.667

我假设序列化数据在 pList 中。

请参阅此[http://code.google.com/p/plist/](http://code.google.com/p/plist/)

# c# - 更新 Membership 属性。方法不支持

> ID：13182190
> 
> 赞同：3
> 
> 时间：2012-11-01T17:15:32.707
> 
> 标签：c#, asp.net, asp.net-mvc-4, asp.net-membership

我已经尝试研究几个小时以来我遇到的异常，但没有任何进展。

我只是尝试使用以下代码更新会员资料：

```
MembershipUser user = Membership.GetUser(username);
user.IsApproved = false;
Membership.UpdateUser(user); 
```

所以问题出在上面代码示例的最后一行。服务器抛出异常，指出不支持指定的方法。我没有构建错误，我相信我使用的是正确的库。

知道为什么会发生这样的事情吗？

```
Server Error in '/' Application.

Specified method is not supported.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.NotSupportedException: Specified method is not supported.

Source Error: 

Line 58:                     MembershipUser user = Membership.GetUser("asdf", false);
Line 59:                     user.IsApproved = false;
Line 60:                     Membership.UpdateUser(user);
Line 61: 
Line 62:                     // -----------------

    Source File: d:\Coding\ASP.NET\Source\Controllers\AccountController.cs    Line: 60 

    Stack Trace: 

    [NotSupportedException: Specified method is not supported.]
       WebMatrix.WebData.SimpleMembershipProvider.UpdateUser(MembershipUser user) +38206
       System.Web.Security.MembershipUser.Update() +91
       System.Web.Security.Membership.UpdateUser(MembershipUser user) +19
       Source.Controllers.AccountController.Register(RegisterModel model) in d:\Coding\ASP.NET\Source\Controllers\AccountController.cs:60
       lambda_method(Closure , ControllerBase , Object[] ) +180
       System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters) +14
       System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters) +211
       System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +27
       System.Web.Mvc.Async.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41() +28
       System.Web.Mvc.Async.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _) +10
       System.Web.Mvc.Async.WrappedAsyncResult`1.End() +57
       System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult) +48
       System.Web.Mvc.Async.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33() +57
       System.Web.Mvc.Async.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49() +223
       System.Web.Mvc.Async.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49() +223
       System.Web.Mvc.Async.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult) +10
       System.Web.Mvc.Async.WrappedAsyncResult`1.End() +57
       System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult) +48
       System.Web.Mvc.Async.<>c__DisplayClass2a.<BeginInvokeAction>b__20() +24
       System.Web.Mvc.Async.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult) +102
       System.Web.Mvc.Async.WrappedAsyncResult`1.End() +57
       System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeAction(IAsyncResult asyncResult) +43
       System.Web.Mvc.<>c__DisplayClass1d.<BeginExecuteCore>b__18(IAsyncResult asyncResult) +14
       System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +23
       System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
       System.Web.Mvc.Controller.EndExecuteCore(IAsyncResult asyncResult) +57
       System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +23
       System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
       System.Web.Mvc.Controller.EndExecute(IAsyncResult asyncResult) +47
       System.Web.Mvc.Controller.System.Web.Mvc.Async.IAsyncController.EndExecute(IAsyncResult asyncResult) +10
       System.Web.Mvc.<>c__DisplayClass8.<BeginProcessRequest>b__3(IAsyncResult asyncResult) +25
       System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +23
       System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
       System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +47
       System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9
       System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +9629708
       System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +155

    Version Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.1 
```

7929

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T18:52:41.317

SimpleMembership，顾名思义，非常简单，并没有实现所有的 MembershipProvider 方法；只是 MVC 基本身份验证和授权所需的那些。如果您尝试使用未实现的方法，您将得到该异常。您可以从头开始创建自己的 MembershipProvider，也可以从 SimpleMembership 继承并实现未实现的方法。

# ios - 在不离开当前情节提要的情况下加载新 iOS 视图的最常用方法

> ID：13182193
> 
> 赞同：1
> 
> 时间：2012-11-01T17:15:43.957
> 
> 标签：ios, view, storyboard

我对 iOS 中的 Storyboards 感到困惑。我想使用它们并让我的代码尽可能现代，但有点困惑。这是我的问题：

在我的应用程序的主视图中，您单击一个按钮，幕后会发生一些耗时的事情（音乐播放，一些文件被连接）。在发生这种情况时，我想要一个带有一些文本字段的菜单向上滑动并让用户输入一些信息，然后他将单击一个按钮来关闭此菜单。

这个菜单可以覆盖全屏，但我不想完全切换到新的 Storyboard，因为背景中有一些东西，我们需要尽快回到主视图。

## 我尝试过的一件事是为此菜单创建一个新的故事板并使用 instantiateViewControllerWithIdentifier 加载它，它可以工作，但是我以后无法在应用程序崩溃的情况下将其关闭。但也许还有更好的方法？什么是正确的编程风格？

有人问我的代码，我想这是唯一可以放的地方吗？这里是。在主视图中：

```
AddInfoController *infoSheet = [[AddInfoController alloc] init]; //subclass of viewcontroller
infoSheet = [self.storyboard instantiateViewControllerWithIdentifier:@"AddInfoView"];
[self.view addSubview:infoSheet.view]; 
```

然后在我的 AddInfoController 类中，我有：

```
- (IBAction)clickedDoneButton:(id)sender {
   [self removeFromParentViewController];
} 
```

在 AddInfoView 故事板中，我有一个与该 IBAction 挂钩的按钮。当它崩溃时，NSLog 中什么也没有出现，它显示了线程 1 中的一些十六进制内容和 EXC_BAD_ACCESS 错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T17:20:13.517

好的 - 如果您一心想要使用 Storyboards 并且当您显示关闭按钮时应用程序不断崩溃，那么您肯定会犯错误。控制台错误消息会很有帮助。你在那里看到了什么。

如果 Storyboards 占用了我太多时间，我会以编程方式完成它并简单地呈现一个模态视图。如果您以前没有尝试过，请尝试以模态方式呈现视图控制器。您可以[在此处](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ModalViewControllers/ModalViewControllers.html)了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T19:01:17.833

以编程方式创建 UIView 和 UITextViews 并将它们添加到主视图。尝试这样的事情：

```
UIView *someView = [[UIView alloc]initWithFrame:CGRectMake(20, 20, 280, 420)];
    UITextField * someTextField = [[UITextField alloc]initWithFrame:CGRectMake(20, 20, 240, 44)]; // create uitextfield or something else as much as you want.
    [someView addSubview:someTextField];
    [someTextField release];
    [self.view addSubview:someView];
    [someView release]; 
```

并创建一个操作按钮来关闭视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-20T00:23:40.070

看起来您正在调用 removeFromParentViewController 但您实际上从未将其添加为子项。我不知道这是否是实际调用崩溃的原因，但基本上使用的格式是：

取自[苹果](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomContainerViewControllers/CreatingCustomContainerViewControllers.html)：

```
- (void) displayContentController: (UIViewController*) content
{
    [self addChildViewController:content];                 // 1
    content.view.frame = [self frameForContentController]; // 2
    [self.view addSubview:self.currentClientView];
    [content didMoveToParentViewController:self];          // 3
} 
```

然后在你完成后你反向调用等效的方法：

```
- (void) hideContentController: (UIViewController*) content
{
   [content willMoveToParentViewController:nil];  // 1
   [content.view removeFromSuperview];            // 2
   [content removeFromParentViewController];      // 3
} 
```

# php - PHP 到 Python 代码差异 - 数组、Foreach 循环

> ID：13182195
> 
> 赞同：1
> 
> 时间：2012-11-01T17:15:49.133
> 
> 标签：php, python

我希望这个问题的措辞适合本网站的政策。

我正在尝试将一段 Python 代码转换为 PHP 代码。我已经翻译了几乎每个函数，除了我无法弄清楚 PHP 和 Python 中的数组和 Foreach 循环有何不同。

```
qstid = dbinputsurveyid+'X'+str(question.gid)+'X'+str(question.qid)
index=columns.index(qstid)
for i,a in enumerate(data[index]):
    if a!=None and a!='':
        answer=int(data[index][i])
        answerCodes=list(answersCode[question.qid])
        answerindex = answerCodes.index(str(answer))
        answerorder = answersOrder[question.qid][a]
        addAnswers(db, data[0][i], question.sid, question.gid, question.qid, question.type, answers[question.qid][answerindex], None,answerorder, None, None,None) 
```

从我所做的一些阅读中。我认为 python 中的 enumerate 相当于 PHP 中的 foreach 循环。但我不确定“i”和“a”是如何在上面的代码中发挥作用的。它们似乎不像您在 PHP 中那样定义。任何帮助或见解表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:17:51.990

该循环中的符号`i, a`使您可以访问列表的索引和值。

来自[Python 文档](http://docs.python.org/2/tutorial/datastructures.html#looping-techniques)：

> 循环遍历序列时，可以使用 enumerate() 函数同时检索位置索引和对应值。

因此，在 Python 中，您将拥有：

```
for i,a in enumerate( ['some', 'list']) 
```

这相当于PHP：

```
$array = ['some', 'array']; 
// Or, for PHP < 5.4: $array = array( 'some', 'array');
foreach( $array as $i => $a) 
```

# video - PhpFox 视频转换

> ID：13182199
> 
> 赞同：2
> 
> 时间：2012-11-01T17:16:04.270
> 
> 标签：video, video-processing, phpfox

PhpFox 中视频上传功能的奇怪之处：

上传使用 Windows Movie Maker 创建的 wma 文件后，PhpFox 不会转换该视频吗？

但是，如果我尝试上传 Windows 7 附带的示例电影（也是 wma），一切都会被转换并且视频正在网站上播放

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-21T10:44:48.237

Phpfox 视频转换器是有限的，它只适用于少数文件扩展名您正在上传带有`.wma`扩展名的视频尝试将电影制作者视频保存在`.wmv`扩展名中，然后上传它可能有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-21T05:26:51.743

如果您控制您的服务器，即由您托管，或者您使用 VPS，那么您可以测试您的 FFFMPEG 和 MEMCODER，您需要将这些文件转换为适当的格式，PHPFOX 需要转换和处理您的视频文件. 在我在设置管理面板上插入这些参数之前，我在命令 shell 提示符下弄乱了它。过了一会儿，我让它适应 PHPFOX V3。确保您也启用了 FLVTOOLS。请记住，如果它在您的服务器上的 shell 提示符下不起作用，则无法在 PHPFOX 的设置上起作用。下面列出了我最终提出的设置。另一个问题，该版本 PHPFOX V3 中使用的播放器是 FLOWPLAYER，它只播放 FLV 文件（支持 Flash 的浏览器）并且仅限于使用 Flash 的浏览器。忘记 Android 或 iPhone，除非您使用 PUFFIN 或任何其他支持 Flash 的浏览器。我希望我的设置适用于您的服务器。这实际上取决于您的服务器设置和下面的 3 个实用程序。如果您有任何问题，请告诉我。这是一个棘手的设置，但它可以将播放器更改为 HTML5 格式，因此您不必再弄乱 Flash FLV 文件和格式。

**FLVTOOLS** : -U {目的地}

**FFMPEG**：-i {源} -ar 44100 -vcodec libx264 {目标}

**MENCODER** : {source} -o {destination} -of lavf -oac mp3lame -lameopts abr:br=56 -ovc lavc -lavcopts vcodec=flv:vbitrate=800:mbd=2:mv0:trell:v4mv:last_pred=3 - vf 比例={宽度}：{高度}

另一种方法，可以在没有任何主要服务器设置的情况下解决您的问题，如果幸运的话，您可以在可用格式列表中包含该格式（或任何其他格式）以进行转换，在我的版本中，我必须修改以接受蜂窝格式，例如 '3gpp' => 'video/mp4'...祝你好运！

您需要修改的文件位于：//yourdomain/module/video/include/service/video.class.php

```
class Video_Service_Video extends Phpfox_Service
{
private $_aExt = array(
'mpg' => 'video/mpeg',
'mpeg' => 'video/mpeg',
'wmv' => 'video/x-ms-wmv',  // Here you add after wmv like this: (it may work)
'wma' => 'video/x-ms-wmv',
'avi' => 'video/avi',
'mov' => 'video/quicktime',
'flv' => 'video/x-flv',
'mp4' => 'video/mp4',
'3gp' => 'video/3gpp'
); 
```

# css - 媒体查询最大宽度与视口大小或窗口大小有关？

> ID：13182201
> 
> 赞同：7
> 
> 时间：2012-11-01T17:16:06.757
> 
> 标签：css, media-queries, viewport

我想知道媒体查询的最大宽度是否与视口大小或窗口大小有关？

例如，我有这个媒体查询：

```
@media screen and (max-width: 360px){} 
```

当视口大小为 360 像素或窗口大小为 360 像素时，此媒体查询会起作用吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-01T17:29:45.843

是视口。这在[规范](http://www.w3.org/TR/css3-mediaqueries/#width)中有说明：

> “宽度”媒体特征描述了输出设备的目标显示区域的宽度。对于连续媒体，这是视口的宽度（如 CSS2，第 9.1.1 节 [CSS21] 所述），包括渲染滚动条的大小（如果有）。

这也适用于主浏览器视口中的子视口，例如框架集和 iframe 的子视口。因此，如果 iframe 的宽度为 360 像素或更小，您的媒体查询也将应用于该 iframe。

# perl - 如何为 mojolocious lite 应用程序使用通用模板？

> ID：13182202
> 
> 赞同：2
> 
> 时间：2012-11-01T17:16:09.927
> 
> 标签：perl, mojolicious, mojolicious-lite

```
 use Mojolicious::Lite;

  # /with_layout
  get '/a' => sub {  my $self = shift;} ;
  get '/b' => sub { my $self = shift;} ; 
  get '/c' => sub { my $self = shift;};

app->start;
__DATA__

@@ a.html.ep
  <!DOCTYPE html>
  <html>
    <head><title><%= title %></title></head>
    <body><%= content %></body>
 <table border="1">
<tr>
<td>row 1, cell 1</td>
<td>row 1, cell 2</td>
</tr>
<tr>
<td>row 2, cell 1</td>
<td>row 2, cell 2</td>
</tr>
</table> 
  </html>

@@ b.html.ep
  <!DOCTYPE html>
  <html>
    <head><title><%= title %></title></head>
    <body><%= content %></body>
 <table border="1">
<tr>
<td>row 1, cell 1</td>
<td>row 1, cell 2</td>
</tr>
<tr>
<td>row 2, cell 1</td>
<td>row 2, cell 2</td>
</tr>
</table> 
  </html>

@@ c.html.ep
  <!DOCTYPE html>
  <html>
    <head><title><%= title %></title></head>
    <body><%= content %></body>
    <table border="1">
<tr>
<td>row 1, cell 1</td>
<td>row 1, cell 2</td>
</tr>
<tr>
<td>row 2, cell 1</td>
<td>row 2, cell 2</td>
</tr>
</table> 
  </html> 
```

我真的很感动

```
 <table border="1">
    <tr>
    <td>row 1, cell 1</td>
    <td>row 1, cell 2</td>
    </tr>
    <tr>
    <td>row 2, cell 1</td>
    <td>row 2, cell 2</td>
    </tr>
    </table> 
```

并使用所有的 html 而不是添加到每个 html

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T17:30:12.540

使用[布局](http://mojolicio.us/perldoc/Mojolicious/Lite#Layouts)模板功能。

```
use Mojolicious::Lite;

# /with_layout
get '/a' => sub { my $self = shift;};
get '/b' => sub { my $self = shift;}; 
get '/c' => sub { my $self = shift;};

app->start;
__DATA__

@@ a.html.ep
% title 'A';
% layout 'template';
Content for 'A'

@@ b.html.ep
% title 'B';
% layout 'template';
Content for 'B'

@@ c.html.ep
% title 'C';
% layout 'template';
Content for 'C'

@@ layouts/template.html.ep
<!DOCTYPE html>
<html>
  <head><title><%= title %></title></head>
  <body><%= content %></body>
  <table border="1">
  <tr>
    <td>row 1, cell 1</td>
    <td>row 1, cell 2</td>
  </tr>
  <tr>
    <td>row 2, cell 1</td>
    <td>row 2, cell 2</td>
  </tr>
</table> 
</html> 
```

# c# - 将数据从第二个表单恢复到原始表单

> ID：13182203
> 
> 赞同：1
> 
> 时间：2012-11-01T17:16:13.650
> 
> 标签：c#, forms, variables, public

我有两种形式，我使用以下方法创建第二个：

```
Form2 f2 = new Form2();
f2.Show(); 
```

`Form2`有一个公开的变量，每次鼠标移动都会改变。我在该表单上有一个按钮，按下时可以保存变量。现在的问题是我不知道如何将其传递回`Form1`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T17:17:36.533

你应该使用事件。 `Form2`应该定义一个适当触发的事件（听起来应该是单击按钮时）。 `Form1`然后可以订阅该事件并做......不管它。

```
public partial class Form2 : Form
{
    public Form2()
    {
        InitializeComponent();
    }

    public event Action<string> MyEvent; //TODO give better name and set arguments for the Action

    private void button1_Click(object sender, EventArgs e)
    {
        string someValue = "Hello World!";  //TODO get value that you want to share

        if (MyEvent != null)
        {
            MyEvent(someValue);
        }
    }
} 
```

然后在你的主要形式：

```
private void button1_Click(object sender, EventArgs e)
{
    Form2 otherForm = new Form2();

    //subscribe to the event.  You could use a real method here, rather than an anonymous one, but I prefer doing it this way.
    otherForm.MyEvent += value =>
    {
        //do other stuff with "value".
        label1.Text = value;
    };

    otherForm.Show();
} 
```

# javascript - 如何使用 dropbox.js 将文件上传到 Dropbox？

> ID：13182204
> 
> 赞同：1
> 
> 时间：2012-11-01T17:16:13.800
> 
> 标签：javascript, node.js, dropbox-api

## 原来的

我在使用官方 dropbox.js从**Node.js将文件（图像）上传到 Dropbox 时遇到问题。**我想上传我在另一台服务器上的图片。例如使用 dropbbox 图标 (www.dropbox.com/static/images/new_logo.png)。

```
client.writeFile(file, 'www.dropbox.com/static/images/new_logo.png', function(error, stat) {
 if (error) {
  return es.send(error.status);  // Something went wrong.
 }

 res.send("File saved as revision " + stat.revisionTag);
}); 
```

我知道这只会创建一个带有 url 的文本文件，但是如何将图片上传到 Dropbox？我也尝试使用 http.get 下载文件，然后将其上传到保管箱，但它不起作用。

谢谢。

### 更新更多信息

首先，我使用以下代码从远程 url 下载图像：

```
var request = http.get(options, function(res){
        var imagedata = ''
        res.setEncoding('binary')

        res.on('data', function(chunk){
            imagedata += chunk
        }) 

        res.on('end', function(){ 
            console.log("Image downloaded!");

            fs.writeFile(local, imagedata, 'binary', function(err){
              if (err) throw err
              console.log('File saved.')
            })
        })
    }) 
```

文件已正确保存。然后我尝试做一些事情：

将“图像数据”发送到 Dropbox：

```
 console.log("Image downloaded!");

            client.writeFile(file, imagedata, function(error, stat) {
                if (error) {
                    return response.send(error.status);  // Something went wrong.
                }

                response.send("File saved as revision " + stat.revisionTag);
            }); 
```

一些东西被上传到了 Dropbox，但它没有任何用处。

然后我也尝试从光盘读取文件，然后将其发送到 Dropbox，但它也不起作用：

```
fs.readFile(file, function(err, data) { 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T03:52:46.463

使用 dropbox-js 0.9.1-beta1 或更高版本从 node.js 上传二进制文件。您需要将其传递给 Buffer 或 ArrayBuffer 实例。试试这个代码：

```
var req = http.get(options, function(res) {
  var chunks = [];

  res.on('data', function(chunk) {
    chunks.push(chunk);
  });

  res.on('end', function() {
    console.log("Image downloaded!");

    var imageData = Buffer.concat(chunks);
    client.writeFile(file, imageData, function(error, stat) {
      if (error) {
        return response.send(error.status);
      }
      response.send("File saved as revision " + stat.revisionTag);
    });
  });
}); 
```

```

原始答案：dropbox-js README 提到二进制文件在 node.js 中还不能工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T21:58:53.867

我也遇到了问题，我只是在旧的 dropbox-node npm（现在已弃用）上复制和修改了一些，但我在 dropbox.js 上添加了以下功能。

```
Client.prototype.writeFileNodejs = function(path, data, callback) {
  var self = this;
  fs.readFile(data.path, function(err, data) {
    if (err) return callback(err);
    var uri = "" + self.urls.putFile + "/" + (self.urlEncodePath(path));

    if (typeof data === 'function') callback = data, data = undefined;
    var oauth = {
      consumer_key: self.oauth.key
    , consumer_secret: self.oauth.secret
    , token: self.oauth.token
    , token_secret: self.oauth.tokenSecret
    };

    var requestOptions = { uri: uri, oauth: oauth };
    requestOptions.body = data;

    return request['put'](requestOptions, callback ?
      function(err, res, body) {
        if (err) return callback(err);
        var contentType = res.headers['content-type'];

        // check if the response body is in JSON format
        if (contentType === 'application/json' ||
            contentType === 'text/javascript') {
          body = JSON.parse(body);
          if (body.error) {
            var err = new Error(body.error);
            err.statusCode = res.statusCode;
            return callback(err);
          }

        } else if (errors[res.statusCode]) {
          var err = new Error(errors[res.statusCode]);
          err.statusCode = res.statusCode;
          return callback(err);
        }

        // check for metadata in headers
        if (res.headers['x-dropbox-metadata']) {
          var metadata = JSON.parse(res.headers['x-dropbox-metadata']);
        }

        callback(null, body, metadata);
      } : undefined);
  });
}; 
```

您也想要求 request 和 fs 来做到这一点。

```
var request = require('request'),
    fs = require('fs'); 
```

# spring - Java Spring AOP：将 CustomizableTraceInterceptor 与 JavaConfig @EnableAspectJAutoProxy 一起使用，而不是 XML

> ID：13182205
> 
> 赞同：20
> 
> 时间：2012-11-01T17:16:14.200
> 
> 标签：spring, aspectj, spring-aop

Spring AOP 有一个名为`CustomizableTraceInterceptor`. 使用 Spring 的 XML 配置方法，可以像这样设置这个跟踪器：

```
<bean id="customizableTraceInterceptor" class="
  org.springframework.aop.interceptor.CustomizableTraceInterceptor">
  <property name="enterMessage" value="Entering $[methodName]($[arguments])"/>
  <property name="exitMessage" value="Leaving $[methodName](): $[returnValue]"/>
</bean>

<aop:config>
  <aop:advisor advice-ref="customizableTraceInterceptor"
    pointcut="execution(public * org.springframework.data.jpa.repository.JpaRepository+.*(..))"/>
</aop:config> 
```

我想使用 Spring 的 JavaConfig 样式设置上述配置（即利用 Java 注释，尤其是`@EnableAspectJAutoProxy`在 JavaConfig 中激活 AspectJ）。

```
@Configuration
@EnableTransactionManagement
@EnableJpaRepositories(basePackages = { "some.package" })
@ComponentScan(basePackages = { "some.package2", "some.package3" })
@EnableAspectJAutoProxy
public class FacebookDomainConfiguration {

    @Bean someBean() {
    ...
    }
...
} 
```

什么是`@EnableAspectJAutoProxy`-style 等价物`<aop:advisor advice-ref="customizableTraceInterceptor" ...>`？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2014-02-21T07:44:06.603

我这样做：

```
@Configuration
@EnableAspectJAutoProxy(proxyTargetClass=true)
public class TraceLoggerConfig {

    @Bean
    public CustomizableTraceInterceptor customizableTraceInterceptor() {
        CustomizableTraceInterceptor customizableTraceInterceptor = new CustomizableTraceInterceptor();
        customizableTraceInterceptor.setUseDynamicLogger(true);
        customizableTraceInterceptor.setEnterMessage("Entering $[methodName]($[arguments])");
        customizableTraceInterceptor.setExitMessage("Leaving  $[methodName](), returned $[returnValue]");
        return customizableTraceInterceptor;
    }

    @Bean
    public Advisor jpaRepositoryAdvisor() {
        AspectJExpressionPointcut pointcut = new AspectJExpressionPointcut();
        pointcut.setExpression("execution(public * org.springframework.data.jpa.repository.JpaRepository+.*(..))");
        return new DefaultPointcutAdvisor(pointcut, customizableTraceInterceptor());
    }

} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-03-12T11:47:33.560

只是想补充一下 AdrienC 的回应。我将使用点表达式来引用聚合点，更清晰的分离，恕我直言

```
package org.example;

@Configuration
@EnableAspectJAutoProxy
@Aspect
public class AopConfiguration {
    /** Pointcut for execution of methods on {@link Service} annotation */
    @Pointcut("execution(public * (@org.springframework.stereotype.Service org.example..*).*(..))")
    public void serviceAnnotation() { }

    /** Pointcut for execution of methods on {@link Repository} annotation */
    @Pointcut("execution(public * (@org.springframework.stereotype.Repository org.example..*).*(..))")
    public void repositoryAnnotation() {}

    /** Pointcut for execution of methods on {@link JpaRepository} interfaces */
    @Pointcut("execution(public * org.springframework.data.jpa.repository.JpaRepository+.*(..))")
    public void jpaRepository() {}

    @Pointcut("serviceAnnotation() || repositoryAnnotation() || jpaRepository()")
    public void performanceMonitor() {}

    @Bean
    public PerformanceMonitorInterceptor performanceMonitorInterceptor() {
        return new PerformanceMonitorInterceptor(true);
    }

    @Bean
    public Advisor performanceMonitorAdvisor() {
        AspectJExpressionPointcut pointcut = new AspectJExpressionPointcut();
        pointcut.setExpression("org.example.AopConfiguration.performanceMonitor()");
        return new DefaultPointcutAdvisor(pointcut, performanceMonitorInterceptor());
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-10T21:12:44.450

不幸的是，您不能，因为 Java 语言不支持在 Spring JavaConfig 中支持此方法所需的方法文字。为此打开了一个错误，但标记为“不会修复”：[https](https://jira.springsource.org/browse/SPR-8148) ://jira.springsource.org/browse/SPR-8148 。

错误报告中提到的两个选项是：

1.  `<aop:config>`通过包含相关的 XML 片段继续使用`@ImportResource`
2.  将任何现有`<aop:config>`元素转换为使用`@Aspect`样式。*[这是不可能的`CustomizableTraceInterceptor`]*

# gstreamer - 在 Playbin2 中播放时更改当前视频会使视频停止

> ID：13182216
> 
> 赞同：2
> 
> 时间：2012-11-01T17:16:43.963
> 
> 标签：gstreamer, playbin2

我有一个 playbin2 管道播放具有多个轨道的视频文件。`current-video`我可以通过设置属性来改变当前播放的曲目：

```
current-video       : Currently playing video stream (-1 = auto)
                      flags: readable, writable
                      Integer. Range: -1 - 2147483647 Default: -1 
```

但是，一旦我设置了这个，视频就会挂起，然后最终变成灰色。音频继续播放。一位同事建议冲洗管道可能会修复它，但唯一的方法似乎是使用`GST_SEEK_FLAG_FLUSH`. 使用 seek 确实有效，但看起来很乱：

```
g_object_set(m_playBin, "current-video", video, NULL);
GstClockTime = getCurrentTime();
gst_element_seek(m_playBin, m_player->rate(),
        GST_FORMAT_TIME,
        (GstSeekFlags)(GST_SEEK_FLAG_FLUSH | GST_SEEK_FLAG_ACCURATE),
        GST_SEEK_TYPE_SET, clockTime,
        GST_SEEK_TYPE_NONE, GST_CLOCK_TIME_NONE) 
```

设置时我做错了`current-video`吗？有没有更简单的方法来冲洗管道？

注意：我使用 Ogg Theora 文件进行测试，因为它很容易构建，所以我不确定这个问题是否会以其他格式出现。

# python - Python 不支持的格式字符“w”

> ID：13182224
> 
> 赞同：2
> 
> 时间：2012-11-01T17:17:07.773
> 
> 标签：python

我正在创建一个接受用户输入并返回故事的 madlibs 游戏。我使用 %s 来存储输入。当我收到此错误时，我将之前的帖子中的 %s 更改为 %%s 但错误仍然存​​在

```
print "What is your name?"
a = raw_input()
print "Hello", a, "Lets see if you like you can do MadLibs!"
print "HEAD KNIGHT OF NI: %s \n KNIGHTS OF NI : %s \n ARTHUR : Who are you ? \n HEAD KNIGHT : We are the %s who say. %s \n RANDOM : %s \n ARTHUR : No ! Not the %s who say %s \n Head Knight: The Same! \n Bedevere: Who are they? \n Head Knight: We are the keepers of the %s words : %%s %%s and %%s \n Random: %%s \n Arthur: Those who %s them seldom live to tell the tale. \n Head Knight: The %%s who say %%s demand a sacrifice \n Arthur: %s of %s we are but %s travellers who seek the % who lives beyong these woods \n Head Knight: %s \n Knights of Ni: %s \n Arthur: Ow Agh \n Head Knight: We shall say %s again to you if you don't appease us \n Arthur: Well what is it you want? \n Head Knight: We want a %%s \n Arthur: A what? \n Knights of Ni: %%s \n Arthur and Party: OWWW, AHHH \n Arthur: Please, No More! We will find you a %%s \n Head Knight: You must return here with a %%s or else, you will never pass through these woods alive. \n Arthur: O %%s of %%s you are %%s and %%s and we will return with a %%s. \n Head Knight: One that looks %%s \n Arthur: Of Course \n Head Knight: and not too %%s \n Arthur: Yes" % (raw_input("Nonsense Word"), raw_input("Nonsense Word "), raw_input("Occupation"),raw_input("Nonsense Word"),
                       raw_input("Nonsense Word"), raw_input("Occupation"), raw_input("Nonsense Word"), raw_input("Adjective"), raw_input("Nonsense Word"), 
```

错误是 ValueError：索引 466 处不支持的格式字符 'w' (0x77)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T17:22:41.830

您的字符串中有一个文字`%`字符；将其加倍以防止 Python 尝试将其解释为格式字符串：

```
"... very long string ... who seek the %% who lives beyong ..." 
```

或者你可能错过了`s`那里：

```
"... very long string ... who seek the %s who lives beyong ..." 
```

不过，您真的想研究三次引用您的字符串。Python 让您将`"""`其用作字符串分隔符，并在这样的文字字符串中保留换行符：

```
MADLIBS = """\
HEAD KNIGHT OF NI: %s 
 KNIGHTS OF NI : %s 
 ARTHUR : Who are you ? 
 HEAD KNIGHT : We are the %s who say. %s 
 RANDOM : %s 
 ARTHUR : No ! Not the %s who say %s 
 Head Knight: The Same! 
 Bedevere: Who are they? 
 Head Knight: We are the keepers of the %s words : %%s %%s and %%s 
 Random: %%s 
 Arthur: Those who %s them seldom live to tell the tale. 
 Head Knight: The %%s who say %%s demand a sacrifice 
 Arthur: %s of %s we are but %s travellers who seek the %% who lives beyong these woods 
 Head Knight: %s 
 Knights of Ni: %s 
 Arthur: Ow Agh 
 Head Knight: We shall say %s again to you if you don't appease us 
 Arthur: Well what is it you want? 
 Head Knight: We want a %%s 
 Arthur: A what? 
 Knights of Ni: %%s 
 Arthur and Party: OWWW, AHHH 
 Arthur: Please, No More! We will find you a %%s 
 Head Knight: You must return here with a %%s or else, you will never pass through these woods alive. 
 Arthur: O %%s of %%s you are %%s and %%s and we will return with a %%s. 
 Head Knight: One that looks %%s 
 Arthur: Of Course 
 Head Knight: and not too %%s 
 Arthur: Yes
""" 
```

这样你就可以更清楚地知道你`%`的字符串中有几个可能需要修复的百分比标记。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T18:11:36.980

我认为您实际上并不想要其中的任何 %%s 字符串。而且，如果像“ni”这样的词可以始终保持一致，那就更有意义了。所以，我用键控占位符重写了它：

```
print "What is your name?"
a = raw_input()
print "Hello", a, "Let's see if you can do MadLibs!"
categories = {  'ni':'Nonsense word','knights':'Occupation',
                'sacred':'Adjective','peng':'Nonsense word',
                'nee-wom':'Nonsense word','hear':'Verb',
                'simple':'Adjective','enchanter':'Occupation',
                'shrubbery':'Noun','just':'Adjective',
                'fair':'Adjective','nice':'Adjective',
                'expensive':'Adjective'}
input_words = {}
for key,description in categories.items():
    input_words[key] = raw_input('Enter a(n) '+description+': ')
print '''HEAD KNIGHT OF NI: %(ni)s 
 KNIGHTS OF NI : %(ni)s 
 ARTHUR : Who are you ? 
 HEAD KNIGHT : We are the %(knights)s who say. %(ni)s 
 RANDOM : %(ni)s 
 ARTHUR : No ! Not the %(knights)s who say %(ni)s 
 Head Knight: The Same! 
 Bedevere: Who are they? 
 Head Knight: We are the keepers of the %(sacred)s words : %(ni)s %(peng)s and %(nee-wom)s 
 Random: %(nee-wom)s 
 Arthur: Those who %(hear)s them seldom live to tell the tale. 
 Head Knight: The %(knights)s who say %(ni)s demand a sacrifice 
 Arthur: %(knights)s of %(ni)s we are but %(simple)s travellers who seek the %(enchanter)s who lives beyond these woods 
 Head Knight: %(ni)s 
 Knights of Ni: %(ni)s 
 Arthur: Ow Agh 
 Head Knight: We shall say %(ni)s again to you if you don't appease us 
 Arthur: Well what is it you want? 
 Head Knight: We want a %(shrubbery)s 
 Arthur: A what? 
 Knights of Ni: %(ni)s 
 Arthur and Party: OWWW, AHHH 
 Arthur: Please, No More! We will find you a %(shrubbery)s 
 Head Knight: You must return here with a %(shrubbery)s or else, you will never pass through these woods alive. 
 Arthur: O %(knights)s of %(ni)s you are %(just)s and %(fair)s and we will return with a %(shrubbery)s. 
 Head Knight: One that looks %(nice)s 
 Arthur: Of Course 
 Head Knight: and not too %(expensive)s 
 Arthur: Yes''' % input_words 
```

# sass - SASS 通配符 * 选择父项中的所有 id

> ID：13182229
> 
> 赞同：1
> 
> 时间：2012-11-01T17:17:20.930
> 
> 标签：sass

我在某处看到了使用 * 作为 SASS 的 ID 或类选择器的能力......这样做的正确方法是什么？

例如，我想选择父 div 中的所有 div id。我会想象这样的事情：

```
<div id="parent">
                <div id="sub1">
                    <div class="icon"></div>
                    <div class="content"></div>
                </div>
                <div id="sub2">
                    <div class="icon"></div>
                    <div class="content"></div>
                </div>

#parent {
   #* {
}} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T17:36:14.777

您只能使用 css 选择器，例如：

```
#parent {
    div[id] {
      // styles
    }
} 
```

或者

```
#parent {
    div[id^='sub'] {
      // styles
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-01T19:16:15.060

如果孩子以有序的方式命名，您可以使用该`@for`指令更容易更新：

```
$num-of-children: 2

@for $i from 1 through $num-of-children
  #sub-#{$i}
    @extend %parent-children

#parent
  %parent-children
    //styles 
```

另外，如果 id 比较随意，可以在`@each`指令中传入一个列表来达到类似的效果：

```
$children: sam ramond lemons butter

@each $child in $children
  ##{$child} 
    @extend %parent-children

#parent
  %parent-children
    //styles 
```

# c++ - 编译器可以告诉我它选择了哪个重载或模板函数吗？

> ID：13182234
> 
> 赞同：5
> 
> 时间：2012-11-01T17:17:47.540
> 
> 标签：c++, templates, template-specialization, overload-resolution

特别是在 linux 上使用 g++，有没有办法确定为特定语句选择了哪个重载或模板函数？

更具体地说，我不认为我一定知道所有可能的选择，它们可能在来自各种库的头文件中。即使我这样做了，我也不认为我可以修改相关代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:55:29.973

我不知道有什么方法可以直接做到这一点。

最简单的解决方案是在调用点设置断点，然后单步执行调用的任何函数；然后你的调试器可以告诉你你在哪个函数中。

[像Eclipse CDT](http://www.eclipse.org/cdt/)这样的 IDE可以自己进行重载和模板解析（如果一切正常的话），所以右键单击函数调用并转到函数声明将带您到适当的函数。

通过故意创建一个模棱两可的函数调用，如[this answer](https://stackoverflow.com/a/3751161/25507)中所述，您可以获得所有可用重载和模板的列表，并且可能可以确定从那里调用哪个。

正如 Matthieu M. 所说，Clang 可以[转储它的 AST](http://clang.llvm.org/docs/IntroductionToTheClangAST.html)。这需要一些解释，但它可以帮助您确定正在调用哪个函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T03:34:08.150

部分回答。

您可以使用非标准宏在运行时打印函数名称（[可以用来打印方法名称的宏/关键字？](https://stackoverflow.com/questions/2192680/macro-keyword-which-can-be-used-to-print-out-method-name)

对于 GNU C++：

```
#include <iostream>
using namespace std;
template <typename T>
void f(const T & t)
{
   cout << __PRETTY_FUNCTION__ << endl;
}
void f(const string &)
{
   cout << __PRETTY_FUNCTION__ << endl;
}
void f(int)
{
   cout << __PRETTY_FUNCTION__ << endl;
}
int main()
{
    f(1.0);
    f(1);
    f(string("sss"));
    string a;
    f(a);
} 
```

此代码的输出（[http://ideone.com/PI39qK](http://ideone.com/PI39qK)）：

```
void f(int)
void f(int)
void f(const std::string&)
void f(T&) [with T = std::string] 
```

# http - 为什么 HTTP 连接会在恰好 3 个以太网帧之后停止？

> ID：13182240
> 
> 赞同：0
> 
> 时间：2012-11-01T17:18:09.620
> 
> 标签：http, networking, ethernet, mtu

我正在查看一个应用程序，它在连接停止之前通过 HTTP 精确传输 4380 个字节，包括标头。4380 恰好是 1500 字节以太网帧的最大段大小的 3 倍（1500 字节减去 TCP/IP 标头的 40 字节乘以 3）。

连接似乎保持打开状态；只是没有收到任何数据。

为什么它会在恰好 3 个以太网帧之后停止？我应该从哪里开始寻找原因？

# iphone - Objective-C 属性访问：发送到实例的无法识别的选择器

> ID：13182242
> 
> 赞同：2
> 
> 时间：2012-11-01T17:18:22.147
> 
> 标签：iphone, objective-c, ios

我是objective-c的新手，但现在编码很多年了。不知何故，我对 Objective-C 不感冒。我搜索了谷歌和stackoverflow，但我认为我的问题只是简单而愚蠢，没有人问过这个问题。

我的代码基于 DateSelectionTitles 示例。[http://developer.apple.com/library/ios/#samplecode/DateSectionTitles/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/DateSectionTitles/Introduction/Intro.html)

我有一个 NSManagedObject

```
@interface Event : NSManagedObject

@property (nonatomic, retain) NSDate * date;
...

// Cache
@property (nonatomic, retain) NSString * primitiveSectionIdentifier; 
```

所有 prperties 都在我的数据模型中定义，除了原语SectionIdentifier（如苹果示例中）

但是当我打电话

```
NSString *tmp = [self primitiveSectionIdentifier]; 
```

我得到了例外

由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[Event originalSectionIdentifier]：无法识别的选择器发送到实例 0x74850c0”

简单地说：

```
Event *foo = [[Event alloc] init];

if (foo.primitiveSectionIdentifier) {
    NSLog(@"YEAH");
} 
```

抛出相同的异常。所以我基本上想检查primitiveSectionIdentifier是否为零。但是当我访问该属性时，它会引发异常吗？我是否需要先分配每个属性才能检查它是否有值？！

我没有学到哪些 Objective-C 基础知识？

非常感谢您的回复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:08:13.313

您正在使用一个较旧的示例程序，它使用不同的内存管理方式；如果您在 iOS 5 或 6 下编译，则可能会导致问题。

尝试

```
NSLog(@"primitiveSectionIdentifier = %@", self.primitiveSectionIdentifier); 
```

如果它没有给你你正在寻找的字符串，那么问题可能在于字符串对象从未初始化并且仍然设置为 nil。在这种情况下，代码会编译，但是将选择器发送到 nil 指针会引发异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T18:59:51.600

只有一种方法可以在没有编译器警告的情况下发生这种情况 - 您必须`@dynamic primitiveSectionIdentifier;`在实现文件中编写。这意味着您不想定义该方法，因为您认为它已经在其他地方定义了。

您正在使用 a `NSManagedObject`，您知道它是如何工作的吗？您声明没有实现`@dynamic`的方法（放入实现），当调用该方法时，找不到它，而是`[NSObject doesNotRecognizeSelector:]`调用了一个特殊的处理程序。该处理程序检查 Core Data 模型是否存在给定选择器的属性，如果不存在，则抛出您看到的异常。

`primitiveSectionIdentifier`因此，问题可能是由模型中未声明的事实引起的。

# wordpress-theming - 如何将 WP 子主题应用到不同的站点？- 我复制了文件，但它不起作用

> ID：13182243
> 
> 赞同：0
> 
> 时间：2012-11-01T17:18:21.520
> 
> 标签：wordpress-theming

我在这个站点上有一个 211 主题：[http](http://richardclunan.com/) ://richardclunan.com/ -- 有一些变化 -- 所以我有一个 211-child 主题。

它们是微小的变化——比如字体和字体大小。

我想对这个网站做同样的改变：[http ://richardclunan.net/](http://richardclunan.net/)

…我登录了我的托管帐户，并将 211-child 从 richardclunan.com 主题文件夹复制到 richardclunan.net 主题文件夹…</p>

…但这些变化并没有出现在 richardclunan.net 上

-- 我还需要做些什么来实现这一点吗？

-- 或者不可能以这种方式进行相关更改 -- 跨文件夹和文件复制 -- 我应该以不同的方式进行吗？

（我不是技术人员，除非拼写出“什么”和“哪里”，否则我可能不会理解用语：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:21:46.390

您必须在 [http://richardclunan.net/](http://richardclunan.net/) wordpress 管理员中更改主题。在您的站点管理员中，转到 Aparence->Themes 并选择您的主题。

# css - 用于打印的表格中的分页符不起作用

> ID：13182245
> 
> 赞同：2
> 
> 时间：2012-11-01T17:18:31.663
> 
> 标签：css, printing, twitter-bootstrap

我有一个要打印的相当大的表格，我想确保在一行中不会出现分页符。

我使用了以下 CSS，但这似乎不起作用：

`tr {page-break-inside: avoid }`

到处都建议这样做，但似乎不起作用。有任何想法吗？

# c# - PLINQ 自定义分区器允许迭代长范围

> ID：13182247
> 
> 赞同：1
> 
> 时间：2012-11-01T17:18:39.807
> 
> 标签：c#, task-parallel-library, plinq, parallel.foreach

我需要帮助来为 PLINQ 创建一个自定义分区器，它可以让我迭代长度大于 Int32 的 IEnumerable。

这是对这个问题的参考，其中给我的答案是编写自定义分区器：

[PLINQ 查询给出溢出异常](https://stackoverflow.com/questions/13131957/plinq-query-giving-overflow-exception)

我已经尝试过使用 Dobbs 博士教程中的这些内容，但我不确定我需要覆盖什么才能使用 long 作为索引：

[http://www.drdobbs.com/windows/custom-parallel-partitioning-with-net-4/224600406?pgno=3](http://www.drdobbs.com/windows/custom-parallel-partitioning-with-net-4/224600406?pgno=3)

也许我不会以正确的方式解决这个问题。

对于我正在迭代的 IEnumerable 达到的任何大小，我可以整天使用 Parallel.ForEach。

但它比使用 PLINQ 慢得多，看到每次迭代都是对字母/数字组合的一组计算，并且每个字符串组合的计算相同，而且我读过 Parallel.ForEach 不是最适合这个。PLINQ 正在使用块分区，我相信这就是它执行迭代速度如此之快的原因。

有没有办法可以调整 Parallel.ForEach 以提供与 PLINQ 相同的速度，但同时允许我迭代超过 21.4 亿的大小？

ETA：有没有解决方案，在看到自定义分区示例后开始考虑它们与 int to long 的问题无关。

# c++ - 如何将 intptr_t 转换为字符串

> ID：13182251
> 
> 赞同：2
> 
> 时间：2012-11-01T17:18:49.287
> 
> 标签：c++

> **可能重复：**
> [在 C++ 中将 int 转换为字符串的最简单方法](https://stackoverflow.com/questions/5590381/easiest-way-to-convert-int-to-string-in-c)

有谁知道如何进行这种转换？

我需要将 intptr_t 类型连接到字符串，因此需要对其进行转换。

它不是 int，因为它是 64 位操作系统。

如果我错了请纠正我谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:21:23.243

`intptr_t`只是一个数字。所以：

*   [在 C++ 中将 int 转换为字符串的最简单方法](https://stackoverflow.com/questions/5590381/easiest-way-to-convert-int-to-string-in-c)
*   [...和别的](https://stackoverflow.com/search?q=c%2b%2b%20convert%20int%20to%20string)
*   [将数字转换为字符串和字符串转换为数字](http://www.cplusplus.com/articles/D9j2Nwbp/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T17:25:38.180

简单的：

```
std::to_string(ip); 
```

好吧，如果你有 C++11，那就简单了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T17:20:16.950

```
std::stringstream ss;
ss << ip;
ss.str(); 
```

（或者，如果您愿意：

```
ss << std::hex << ip; 
```

)

# xcode - Xcode - 如何将代码插入特定位置

> ID：13182260
> 
> 赞同：0
> 
> 时间：2012-11-01T17:19:23.300
> 
> 标签：xcode, include

我有一段标准的 NSUserDefault 代码，我想在编译时将其合并到多个页面中。与 Include 不同，它们需要将代码插入特定位置。

我认为 Xcode 支持这个？例如

```
-(void)viewDidLoad {
[INSERT CODE HERE]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T07:52:12.370

为什么不将代码放入方法中并在适当的地方调用呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T07:55:33.087

定义一个函数或方法并像往常一样调用。如果需要，使用搜索和替换。

* * *

请注意，您*可以*这样做：

```
- (void)viewDidLoad
{
#include "some_file.h"
} 
```

…但这是我（个人）从我的代码库中拒绝的那种风格。

ps：更详细的描述可以帮助您获得更准确的答案。

# java - 如何将 Java 项目添加为 Maven Web 项目的依赖项目？

> ID：13182261
> 
> 赞同：1
> 
> 时间：2012-11-01T17:19:24.907
> 
> 标签：java, eclipse, maven

我将一个简单的 Web 项目**A**转换为 Maven Web 项目，但项目**A**依赖于一个简单的 Java 项目**B**所以在动态 Web 项目中我将此项目添加到我的项目的**Java 构建路径**中。但是现在我将项目**A**转换为 Maven Web项目 。

我的问题是如何将此**B**项目添加为 Maven Web 项目**A**的依赖项项目。所以它会毫无问题地运行。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:29:41.883

项目 B 也应该是一个 Maven 项目。您可以将依赖项添加到 maven 项目 A 中。

如果您不想将 B 转换为 maven 项目，可以将 b.jar 复制到 .m2/repository 中，然后可以将依赖项添加到 maven 项目 A 中。将 b.jar 复制为 maven 生成的 jar，是，.m2/repository/somegroupid/b/1.0/b-1.0.jar

# c# - SendMessage - 发送区分大小写的键

> ID：13182263
> 
> 赞同：2
> 
> 时间：2012-11-01T17:19:31.703
> 
> 标签：c#, sendmessage

我正在尝试使用 WinAPI 函数创建一个工作函数，以在其他应用程序（例如记事本）中逐个键写入给定的文本`SendMessage`。我有这样的代码：

```
//
SendMessage(handle, WM_CHAR, 0x41, 0);
SendMessage(handle, WM_CHAR, (int)Keys.A, 0); // 0x41
SendMessage(handle, WM_CHAR, (int)'A', 0); // 0x41
SendMessage(handle, WM_CHAR, (int)'a', 0); // 0x61
//

SendMessage(handle, WM_CHAR, (int)Keys.Space, 0);

//
SendMessage(handle, WM_KEYDOWN, (int)Keys.Shift, 0);

SendMessage(handle, WM_CHAR, 0x41, 0);
SendMessage(handle, WM_CHAR, (int)Keys.A, 0); // 0x41
SendMessage(handle, WM_CHAR, (int)'A', 0); // 0x41
SendMessage(handle, WM_CHAR, (int)'a', 0); // 0x61

SendMessage(handle, WM_KEYUP, (int)Keys.Shift, 0);
// 
```

应该写出如下输出：

```
aaa1 AAA1 
```

但这段代码写道：

```
AAAa AAAa 
```

为什么会这样？`0x41`是键的虚拟键代码`A`，没有`Shift`按下它应该创建小写字母`a`，并且 [char `a`= `0x61`] 真的不会在输出上放置小写“a”，而是在数字键盘上放置 1（ `VK_NUMPAD1 0x61`数字键盘`1`键），如本网站所示：

[虚拟键码](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375731%28v=vs.85%29.aspx)

`SendMessage`任何人都知道如何通过其他应用程序发送小写和大写字母？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T18:39:35.453

这不是它的工作方式。正常的方式是用户按下键盘上的 A 键。这会为记事本生成 WM_KEYDOWN 消息。记事本在调用 GetMessage() 时收到此消息。然后它调用 TranslateMessage() 并*生成*WM_CHAR 消息。生成的字符取决于键盘状态（如 Shift 键）和用户选择的键盘布局。键盘状态和布局都是特定于进程的。

因此，您通过发送 WM_CHAR 所做的工作就是记事本本身通常所做的所有工作。这很好，您**不想**发布 WM_KEYDOWN 消息。因为你无法预测会生成什么角色。您无法找出记事本的键盘状态和活动布局是什么。

如果你想要一个大写的 A，只需发送 (WPARAM)'A'，如果你想要一个小写的 a，只需发送 (WPARAM)'a'。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T17:54:29.607

部分答案是 WM_CHAR 处理文本，并不是真正设计用于处理虚拟键。它还处理您发送的任何字符。然而，WM_KEYDOWN 确实处理虚拟键

# php - 你如何循环遍历 yii 框架中的模型？

> ID：13182265
> 
> 赞同：3
> 
> 时间：2012-11-01T17:19:56.537
> 
> 标签：php, frameworks, yii

我正在尝试遍历 yii 中我的模型文件的名称，以便我可以在我的管理部分中自动填充链接系统。基本上，如果我去 Gii 生成器并创建一个新的 CRUD 部分，我希望它采用模型名称并添加指向该特定 CRUD 主页的链接。

到目前为止，这是我在管理主页上的内容：

```
<li><a href="<?php echo Yii::app()->request->baseUrl; ?>/index.php/admin/company">Edit Company Information</a></li>
<li><a href="<?php echo Yii::app()->request->baseUrl; ?>/index.php/admin/gallery">Edit Gallery</a></li> 
```

所以我只是将“公司”和“画廊”名称更改为一个变量，该变量获取模型的名称并循环通过它，问题是我将如何去做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T18:30:08.390

You might use [CFileHelper::findFiles()](http://www.yiiframework.com/doc/api/1.1/CFileHelper) in order to get the contents of your models folder,

```
$filenames =CFileHelper::findFiles(Yii::getPathOfAlias("application.models"), array ( 
    'fileTypes'=> array('.php'),
  )
); 
```

Next up you can apply a filter to the results, so you exclude these models which possibly have nothing to do with the purpose of your designed model list.

```
$modelNames = array();
foreach ($filenames as $filename)
{
  //remove off the path
  $file = end( explode( '/', $filename ) );
  // remove the extension, strlen('.php') = 4
  $file = substr( $file, 0, strlen($file) - 4);
  $modelNames[]=$file
}
//$modelNames holds all the names of the model files without paths or extensions. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T18:22:57.863

我可以提出以下建议。

首先，您创建一个基本模型（例如，在`components`目录中），您的其他模型将来自：

```
class BaseModel extends CActiveRecord
{
    public static function getAdminRoute()
    {
        return null;
    }
} 
```

静态`getAdminRoute`方法将为模型的管理页面提供 Yii 路由。你`BaseModel`像这样扩展：

```
class Company extends BaseModel
{
    public static function model($className = __CLASS__)
    {
        return parent::model($className);
    }

    public function tableName()
    {
        return "{{company}}";
    }

    public static function getAdminRoute()
    {
        return "admin/company";
    }
} 
```

下一步是确定应用程序中声明的所有模型：

```
$models = array();
$modelsDir = Yii::getPathOfAlias("application.models");
$dh = opendir($modelsDir);
if ($dh !== false)
{
    $matches = array();
    while (($modelFileName = readdir($dh)) !== false)
    {
        if (preg_match("/^([A-Za-z0-9]+)\.php$/", $modelFileName, $matches))
            array_push($models, $matches[1]);
    }
    closedir($dh);
} 
```

在检索到模型类列表（根据 Yii 命名约定文件的名称等于其类的名称）之后，您可以对其进行迭代并获取那些具有覆盖`getAdminRoute`方法的模型的管理链接：

```
$adminLinks = array();
foreach($models as $model)
{
    if (method_exists($model, "getAdminPage"))
    {
        $modelAdminRoute = $model::getAdminPage();
        if ($modelAdminRoute !== null)
            array_push($adminLinks, Yii::app()->createUrl($modelAdminRoute));
    }
} 
```

当然，您可以根据自己的喜好省略`admin`部分并实现此方法，并添加一个额外的方法来获取链接的文本。`getAdminRoute`

出于性能原因，您还可以尝试使用[Yii 提供的缓存功能](http://www.yiiframework.com/doc/guide/1.0/en/caching.data)缓存获得的管理链接列表。

# jquery - jQuery + substr 使用适当的类的所有元素

> ID：13182266
> 
> 赞同：0
> 
> 时间：2012-11-01T17:19:59.477
> 
> 标签：jquery, class, substr

我有一个问题 - 请查看我的代码的一部分：

```
<ol>
  <li>
    <div class="qwerty">zxcvbnm</div>
  </li>
  <li>
    <div class="qwerty">abc</div>
  </li>
  <li>
    <div class="qwerty">poiuytrewq</div>
  </li>
</ol> 
```

我想使用“qwerty”类获取所有元素并将它们替换为 3 个字符 +“...”。所以我想得到如下结果：

```
<ol>
  <li>
    <div class="qwerty">zxc...</div>
  </li>
  <li>
    <div class="qwerty">abc</div>
  </li>
  <li>
    <div class="qwerty">poi...</div>
  </li>
</ol> 
```

任何帮助，将不胜感激。非常感谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T17:23:34.390

您可以使用`text`方法：

```
$('.qwerty').text(function(i,v){
    return v.length > 3 ? v.slice(0, 3) + '...' : v
})​ 
```

[http://jsfiddle.net/NEJR4/](http://jsfiddle.net/NEJR4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T17:21:54.120

这应该可以解决问题...

```
$(".qwerty").each(function() {
    var s = $(this).text();
    if (s.length > 3) s = s.substr(0, 3) + "...";
    $(this).text(s);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T17:23:22.207

你可以这样做：

```
 $('.qwerty').each(function(){
    var text = $(this).text();
    if(text.length>3)
      text = text.substr(0,3)+"...";
    $(this).text(text);
    }); 
```

# c# - c# 一维数组碰撞检测

> ID：13182268
> 
> 赞同：2
> 
> 时间：2012-11-01T17:20:05.807
> 
> 标签：c#, arrays, collision

我的任务是在大学使用 c# 创建一个吟游诗人游戏。

有2-4名玩家，每个玩家轮流掷骰子。目标是到达网格上的最后一个方格。

与这个问题唯一相关的规则是同一方格中不能有超过一个玩家。

所以例如

两名球员都从位置 0 开始。

玩家 (A) 在方格 1 掷出 1 = Player(A)。玩家 (B) 掷出 1 = Player(B) “跳过”玩家(A) 并降落在方格 2 上。

我省略了掷骰子方法，据我所知，它们与问题无关。

```
private static void PlayerTurn(int playerNo)
        {
        playerPositions[playerNo] = playerPositions[playerNo] + RollDice();  
        // The selected player rolls the dice and moves x amount of squares 
        //(dependant on dice roll value)
        } 
```

这就是移动每个玩家的方法。

我正在努力的是以下方法。

```
static bool RocketInSquare(int squareNo)
       {
        //TODO: write a method that checks through the 
        //rocket positions and returns true if there is a rocket in the given square
       } 
```

该方法需要检查数组中的冲突。因此，如果玩家 (A) 在第一轮投出 1，而玩家 (B) 在第一轮投出 1，我需要让玩家 (B) '跳跃式' 玩家 (A) 进入方格 2。

如果有帮助的话，目前游戏只是在控制台中运行。很抱歉这个问题的格式，以前从未在这里问过。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T17:25:39.433

好吧，您只需检查两个玩家是否共享相同的位置，如果是这种情况，则允许“活跃玩家”再移动一个

```
if(playerpositions[otherPlayer] == playerpositions[currentPlayer])
    playerpositions[currentPlayer]++; 
```

因此，如果您需要为此创建一个函数，它将是：

```
static bool RocketInSquare(int squareNo)
{
    return playerpositions[0] == squareNo ||
           playerpositions[1] == squareNo ||
           playerpositions[2] == squareNo ||
           playerpositions[3] == squareNo;
} 
```

接着

```
int dice = RollDice();

if(RocketInSquare(playerPositions[playerNo] + dice))
{
    playerPositions[playerNo] += dice +1;
}
else
{
    playerPositions[playerNo] += dice;
} 
```

# google-chrome-extension - 对于谷歌浏览器扩展开发，是否可以设置下载位置？

> ID：13182269
> 
> 赞同：0
> 
> 时间：2012-11-01T17:20:07.013
> 
> 标签：google-chrome-extension

正如问题所说，扩展程序是否可以将文件保存到用户设置的位置以供将来所有下载（不同于首选项中设置的下载位置）？

如果是这样，这将如何完成？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T17:27:55.040

有关[此问题](http://code.google.com/p/chromium/issues/detail?id=12133)的详细讨论，请参阅此问题。根据 8.10.2012 的最后一个定性条目：

> 从安全角度来看，下载 ui 是 chrome 的一个非常敏感的部分，因此我们不太可能允许扩展完全取代 chrome 的下载 ui。我们计划允许扩展以有限且安全的方式*扩展chrome://downloads，并且扩展可能会**添加*浏览器操作按钮，但在可预见的将来不太可能完全替换下载 ui。见证搜索引擎劫持安全问题。使用 --disable-downloads-shelf 标志，扩展可以建议用户设置该标志。
> 
> 也请随意编写下载管理器扩展作为浏览器操作来展示更好的用户界面。如果下载管理器扩展获得足够的人气，我们可能会考虑采用类似的东西作为 chrome 的原生下载 ui。这是扩展可以取代 ui 的一种更有可能的方式，但速度更慢且更安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T17:23:33.727

我的猜测是你不能。如果插件有这样的能力，那将是一个安全问题。

# php - PHP 和 MySQL 运行两次但只回显一次

> ID：13182272
> 
> 赞同：0
> 
> 时间：2012-11-01T17:20:15.267
> 
> 标签：php, mysql

我正在对我的网站上的一个问题进行故障排除，我已将其范围缩小到运行两次的 php。我认为这意味着页面被加载了两次，但问题是代码只被回显或打印一次。我用 ChromePHP 记录了一些文本。该文本不时在控制台中打印两次。

主要问题是我正在做一个mysql查询并设置一个变量。在一个例子中。它将获得的 ID 号打印为 2，但随后代码再次随机加载，并且该变量现在设置为其他值......让我们说 15 或其他值。但从视觉上看，回显变量仍然是 2。

```
include 'php/classes/ChromePhp.php';
$link = mysqli_connect($host, $dbuser, $dbpass, $dbname );

if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

if ($result = mysqli_query($link,'SELECT questionID FROM questions order by rand() limit 1')) {
    $row = mysqli_fetch_array($result);
    printf("Question ", $row['questionID']);
    mysqli_free_result($result);
    ChromePhp::log('QUESTIONID '.$row['questionID']);
}       
if($link) 
    mysqli_close($link);
?> 
```

我环顾四周，人们说它可能是单独加载的网站图标或我使用的 .htaccess 重定向。我关闭了 .htaccess，但我仍然遇到这个问题。

任何指向方向的指针都会很好。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:23:40.440

我发现它是一个 Google Chrome 扩展：导致重新加载代码的 FirePHP。一旦我删除了扩展，一切又开始工作了！

# linux - Perl 有 su 或类似的命令吗？

> ID：13182278
> 
> 赞同：1
> 
> 时间：2012-11-01T17:20:34.233
> 
> 标签：linux, perl, bash, ubuntu, centos

> **可能重复：**
> [当用作 cgi-bin 时，如何使用 setuid() 成功运行 Perl 脚本？](https://stackoverflow.com/questions/4991001/how-to-successfully-run-perl-script-with-setuid-when-used-as-cgi-bin)

我以 root 身份运行我的 Perl 脚本，并希望这些命令以 root 身份运行`$USER`

```
mkdir bin
cp -r /opt/gitolite .
gitolite/install -ln
gitolite setup -pk ${USER}.pub
rm ${USER}.pub

mkdir -p .gitolite/hooks/common
ln -s /opt/pre-receive .gitolite/hooks/common/ 
```

**问题**

Perl 有一个`su -c "mkdir bin" $USER`或类似的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:16:58.607

使用特殊变量`$>`。请参阅： http: [//perldoc.perl.org/perlvar.html](http://perldoc.perl.org/perlvar.html)

# c# - 一般来说，是否有一种简单的方法（可能是一种工具）将程序集绑定版本与其清单定义相匹配？

> ID：13182279
> 
> 赞同：0
> 
> 时间：2012-11-01T17:20:38.463
> 
> 标签：c#, .net, visual-studio-2010

一般来说，是否有一种简单的方法（可能是一种工具）将程序集绑定版本与其清单定义相匹配？

我厌倦了寻找不匹配的程序集。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T17:31:49.163

Nuget 的[Add-BindingRedirect](http://docs.nuget.org/docs/reference/package-manager-console-powershell-reference) cmdlet 可以为您做到这一点。您需要从 Visual Studio 中的包管理器控制台运行它。

# jquery - 如何找出页面的加载百分比以更新 jQuery UI 进度条？

> ID：13182282
> 
> 赞同：1
> 
> 时间：2012-11-01T17:21:07.503
> 
> 标签：jquery, xml, jquery-ui, xslt, progress-bar

我有一个巨大的 xml 文件，我正在使用 xslt 进行转换。我还在页面加载时使用 jquery 做很多事情。基本上隐藏了很多div并在onclick后打开它们。因此，页面加载现在需要 2-3 秒。

我认为在加载时显示进度条会很好，这样用户就知道页面正在加载，而不是盯着白屏。在查找 jquery UI 进度条时，我发现它有一个 value 属性，它决定了进度条的长度。

```
$( "#progressbar" ).progressbar({ value: 37}); 
```

现在正如我已经告诉我的 js 文件有一个巨大`$(document).ready(function() { ...... });`的加载整个页面。我如何获得页面加载量的值，以便我可以将其传递给进度条的 value 属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T17:27:44.520

`$(document).ready`在加载 DOM 之前不会触发，所以这不会有太大帮助。

鉴于您不知道文档有多大（在您的 JavaScript 中），这将很难准确地完成。

一种解决方案可能是在文件顶部包含一些信息，以指示预期元素的可能性。然后，您可以计算 DOM 中的元素并了解您的完整性。

您可以使用计时器或间隔在文档准备好之前开始查看并继续查看，直到达到 100%；

```
if (document.getElementById('expected')) {
    var expected = parseInt(document.getElementById('expected').value, 10);
    var loaded = document.getElementsByTagName('div');
    var progress = (loaded / expected) * 100;
} 
```

您需要`expected`靠近页面顶部的元素。

```
<input type="hidden" id="expected" value="50" /> 
```

# android - 为什么 OnItemSelectedListener 仅在项目更改时调用，而不是在每个用户选择时调用？

> ID：13182284
> 
> 赞同：8
> 
> 时间：2012-11-01T17:21:21.503
> 
> 标签：android, android-spinner

我在 Android 应用程序中使用微调器控件，并通过一种`onItemSelectedListener()`方法处理用户选择。当做出与当前选择不同的选择时，这似乎可以正常工作。我想在某些条件下将所有微调器重置为默认值并确保所有人都需要这样做`onItemSelectedListener()`。

`onItemSelectedListener()`它是仅在用户选择更改时才调用的 Android 语义的一部分吗？有没有办法强制`onItemSelectedListener()`调用？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-09-09T07:54:41.717

**如果您希望触发 Spinner 的“onItemSelected”，即使选择了微调器中的项目/如果选择了项目并再次单击它。然后使用这个扩展微调器的自定义类，这对我有用**

然后用这样的微调器编辑你的活动，我改变了

```
 static Spinner spinner1; 
```

到

```
 static NDSpinner spinner1; 
```

和

```
 variables.spinner1 = (Spinner) findViewById(R.id.spinner1); 
```

到

```
 variables.spinner1 = (NDSpinner ) findViewById(R.id.spinner1); 
```

我还更改了微调器所在的 xml 布局

```
 <Spinner
    android:id="@+id/spinner1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="@string/place" /> 
```

到

```
 <com.yourpackagename.NDSpinner 
     android:id="@+id/spinner1"
     android:layout_width="match_parent"
     android:layout_height="wrap_content"
     android:text="@string/place" /> 
```

微调器扩展类：

```
 package com.yourpackagename;
 import android.content.Context;
 import android.util.AttributeSet;
 import android.util.Log;
 import android.widget.Spinner;
 import android.widget.Toast;
 import java.lang.reflect.Field;

     /** Spinner extension that calls onItemSelected even when the selection is the same as       its previous value. 
       *   ie This is extended "Customized class of Spinner" to  get the "onItemSelected"      event even if the item in the
     *  Spinner is already  selected by the user*/
    public class NDSpinner extends Spinner {

      public NDSpinner(Context context)
      { super(context); }

      public NDSpinner(Context context, AttributeSet attrs)
      { super(context, attrs); }

      public NDSpinner(Context context, AttributeSet attrs, int defStyle)
      { super(context, attrs, defStyle); }

      private void ignoreOldSelectionByReflection() {
            try {
                Class<?> c = this.getClass().getSuperclass().getSuperclass().getSuperclass();
                Field reqField = c.getDeclaredField("mOldSelectedPosition");
                reqField.setAccessible(true);
                reqField.setInt(this, -1);
            } catch (Exception e) {
                Log.d("Exception Private", "ex", e);
                // TODO: handle exception
            }
        }

      @Override
      public void  setSelection(int position, boolean animate)
      {
        boolean sameSelected = position == getSelectedItemPosition();
        ignoreOldSelectionByReflection();
        super.setSelection(position, animate);
        if (sameSelected) {
          // Spinner does not call the OnItemSelectedListener if the same item is selected, so do it manually now
          getOnItemSelectedListener().onItemSelected(this, getSelectedView(), position, getSelectedItemId());

        }
      }
      @Override
      public void setSelection(int position) {
          ignoreOldSelectionByReflection();
          super.setSelection(position);
      }

    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T21:45:48.223

当您选择与当前选择的项目相同的项目时，默认 Spinner 不会触发任何事件。您需要制作一个自定义 Spinner 才能执行此操作。请参阅[再次选择当前选定项目时如何在 Android Spinner 中获取事件？](https://stackoverflow.com/questions/5335306/how-can-i-get-an-event-in-android-spinner-when-the-current-selected-item-is-sele)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-01T11:19:39.457

如果您想使用默认微调器每次添加相同的适配器：

@Override public void onItemSelected(AdapterView adapter, View v, int position, long lng) {

```
 spinner.setAdapter(adapter);

} 
```

# iis - 带有“nomobile”cookie 的移动设备的 IIS URL 重写规则

> ID：13182287
> 
> 赞同：2
> 
> 时间：2012-11-01T17:21:39.753
> 
> 标签：iis, url-rewriting

我们正在使用 IIS URL 重写模块通过检查 HTTP_USER_AGENT 将所有请求从移动浏览器重定向到 m.mymobilesite.com。这工作正常，现在我们需要实现一个“查看完整站点”链接，该链接将允许用户查看主站点。尝试通过在用户单击“查看完整站点”链接时添加“nomobile”cookie 来实现这一点，该链接将被规则验证和否定。出于某种原因，我的规则似乎不起作用。

请帮忙。

```
<rewrite>
<rules>
    <rule name="MobileRedirect" patternSyntax="ECMAScript" stopProcessing="true">    
        <match url=".*" ignoreCase="true" />
        <conditions logicalGrouping="MatchAll">
            <add input="{HTTP_COOKIE}" pattern="nomobile" ignoreCase="true" negate="true" />
            <add input="{HTTP_USER_AGENT}" pattern="android|blackberry|googlebot-mobile|iemobile|iphone|ipod|opera mobile|palmos|webos" />
        </conditions>    
        <action type="Redirect" url="http://m.mymobilesite.com" appendQueryString="false" redirectType="Found" />
    </rule>
</rules> </rewrite> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:58:40.903

该规则是完美的，我在对 IIS 级别的失败请求进行跟踪后发现了问题，如此处[所述](http://www.iis.net/learn/troubleshoot/using-failed-request-tracing/troubleshooting-failed-requests-using-tracing-in-iis)

我在用户选择“查看完整站点”链接时创建的 cookie 不是使用域名创建的。我在 cookie 创建脚本上添加了 domain="mymainsite.com" ，它现在工作正常。

# django - Django 聚合 .extra 值

> ID：13182293
> 
> 赞同：1
> 
> 时间：2012-11-01T17:22:17.223
> 
> 标签：django, orm, aggregate

Model ，带有抽象基类：

```
class MapObject(models.Model):
    start_date = models.DateTimeField(default= datetime.strptime('1940-09-01T00:00:00',  '%Y-%m-%dT%H:%M:%S'))
    end_date = models.DateTimeField(default= datetime.strptime('1941-07-01T00:00:00',  '%Y-%m-%dT%H:%M:%S'))
    description = models.TextField(blank=True)
    location = models.PointField()
    objects = models.GeoManager()
    user = models.ForeignKey(User)
    created = models.DateTimeField(auto_now_add = True)
    last_modified = models.DateTimeField(auto_now = True)
    source = models.ForeignKey(Source)
    address= models.TextField(blank=True, null=True)
    address_road = models.TextField(blank=True, null=True)

class Meta:
    abstract = True

class Bomb(MapObject, BombExtraManager):
    #Bomb Attributes
    type = models.CharField(choices= Type_CHOICES, max_length=10)
    night_bombing = models.BooleanField(blank=True)
    map_sheet = models.ForeignKey(MapSheet, blank=True, null=True)
    def __unicode__(self):
        return self.type 
```

现在，我想使用 Django ORM 作为此查询获得等效结果：

```
Select date_part('day',"start_date") as "day", date_part('hour',"start_date") as "hour", Count('id')
from "Mapper_bomb"
where "source_id" = 1
group by date_part('hour',"start_date"), date_part('day',"start_date")
Order by date_part('day',"start_date") ASC, date_part('hour',"start_date") ASC 
```

这会给我一张表格，上面有每天和每小时的炸弹数量。

使用 Django ORM，我现在得到了以下结果（first_day 只是我定义的一个自定义管理器，它返回数据的子集，与 source_id = 1 相同）：

```
Bomb.first_day.extra(select={'date': "date_part(\'day\', \"start_date\")", 'hour': "date_part(\'hour\', \"start_date\")"}).values('date', 'hour').order_by().annotate(Count('date'), Count('hour')) 
```

但 Django 抱怨 FieldError: Cannot resolve keyword 'date' into field。有没有办法使用 Django ORM 来获得所需的结果，还是我需要回退到原始 sql？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T17:32:40.323

这行得通吗？

```
Bomb.first_day.extra({
        'date': "date_part(\'day\', \"start_date\")",
        'hour': "date_part(\'hour\', \"start_date\")"
    }).values('date', 'hour').order_by('date', 'hour').annotate(Count('id')) 
```

# c# - 如何禁止在 ASP.NET MVC 2 中调整 TextArea.For 的大小？

> ID：13182296
> 
> 赞同：0
> 
> 时间：2012-11-01T17:22:25.477
> 
> 标签：c#, asp.net-mvc, textarea

> **可能重复：**
> [如何禁用 TextArea 的可调整大小的属性？](https://stackoverflow.com/questions/5235142/how-to-disable-resizable-property-of-textarea)

我想在我的 web 应用程序中禁用 TextArea.For 中的调整大小。在 google chrome 和其他浏览器中，它看起来很糟糕。我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T17:26:17.063

要禁用浏览器调整文本区域大小的功能，请使用以下 css：

```
textarea {
    resize: none;
} 
```

# c# - C# .NET 范围导致我无法同时调用方法和图片框引用

> ID：13182297
> 
> 赞同：0
> 
> 时间：2012-11-01T17:22:27.380
> 
> 标签：c#, .net

我正在尝试阅读一本关于学习 C# 的书，但我遇到了一个绊脚石。我们应该构建一个有 4 条狗在屏幕上奔跑的应用程序，一个赛道模拟器。我已经完成了大部分工作，除了让狗在轨道上移动的机制。所以，首先我在另一个类文件中声明了 Greyhound 类：

```
public class Greyhound
{
    public int StartingPosition;
    public int RaceTrackLength;
    public PictureBox MyPictureBox = null;
    public int Location = 0;
    public int Lane = 0;
    public Random Randomizer;

    public void Run() //Makes the dog move down the track.
    {
        Location += Randomizer.Next(0, 4);
        MyPictureBox.Location = new Point(Location, Lane);
    }
} 
```

然后，在我的 form1.cs 中，我有这两个位来初始化对象：

```
 public void LoadDogs()
    {
        Greyhound Dog1 = new Greyhound()
        {
            StartingPosition = 30,
            MyPictureBox = pictureBox2, //Pointer at the picture box for this dog.
            Location = 30,  //X cordinates of the picture box
            Lane = 21 //Y cordinates of the picutre box
        };
    }

     public Form1()
    {
        InitializeComponent();
        LoadDogs();
    } 
```

我遇到的问题是我不能在不破坏对象初始化的情况下使 Dog1.Run() 实际工作。

如果我尝试将 Dog1.Run() 放入 timer1_Tick 事件中，它会抱怨“当前上下文中不存在名称‘Dog1’。”

如果我将实例化“Greyhound Dog1 = new Greyhound()......”放在主要区域内而不是方法的一部分，我可以纠正这个问题。但随后我收到有关我试图引用的图片框的错误消息：“字段初始化程序无法引用非静态字段、方法或属性 'DayAtTheTrack.Form1.pictureBox2'”

如何在 C# 中处理范围仍然让我有些困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T17:38:12.143

您建议的“修复”并不是很清楚，但是您编写的代码的问题在于它`Dog1`是方法中的*局部*变量`LoadDogs`。一旦你完成了那个方法，变量就消失了。（如果您对它执行其他操作，该对象可能会继续存在，但该*变量*不再相关。）

最简单的解决方法是使其成为*实例*变量：

```
private Greyhound dog1; // Declare the field here

public void LoadDogs()
{
    // Give the field a value here
    dog1 = new Greyhound
    {
        StartingPosition = 30,
        MyPictureBox = pictureBox2, //Pointer at the picture box for this dog.
        Location = 30,  //X cordinates of the picture box
        Lane = 21 //Y cordinates of the picture box
    };
} 
```

你应该回过头来学习本书中讨论不同类型变量（局部变量、实例变量和静态变量）的部分。如果它不能很好地解释这些事情——如果它对展示漂亮的图片而不是解释核心概念更感兴趣，不幸的是很多书都是这样——那么你应该放弃那本书，找一本更好的书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T17:38:42.173

这是因为对于函数来说`Greyhound Dog1`是本地的`LoadDogs`。

在您的表单中，如果您想`Dog1`通过多种方法访问，它必须是`Form1`类的属性或字段。

```
public partial Form1 
{
    private Greyhound dog1;

    public void Form_Load(object sender, EventArgs e)
    {
        dog1 = new Greyhound() {
            // bla bla bla, initialization
        };
    }
} 
```

此外，对于初始化，您可能想要使用`Form_Load`（如果您还没有使用它）。

# liferay - Liferay 的 PortalUtil.getPortalURL 问题

> ID：13182298
> 
> 赞同：1
> 
> 时间：2012-11-01T17:22:34.063
> 
> 标签：liferay

我在理解一行代码时遇到问题，Liferay API 文档没有提供详细信息。线条是这样的：

```
StringBuilder url = new StringBuilder(PortalUtil.getPortalURL(cp.getVirtualHost(), PortalUtil.getPortalPort(), false)); 
```

我知道第一个参数从主配置中的虚拟主机获取它的值，如果设置为 true，第三个参数会为您获取 https URL，但我不知道它从哪里获取端口，当端口为 80 时也是如此它不会被添加到 url。

我需要的是端口不显示，即使它与 80 不同，有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T17:59:31.463

据我了解，这是在 portlet 或钩子插件中确定 Liferay Portal 的 URL 的常用代码行。

我认为，端口只是根据当前请求确定的。

端口 80 没有显示的原因是因为它是标准的 HTTP 端口，默认情况下会使用它。因此，如果 URL 不同于 80（或 443 用于安全连接），则不能从 URL 中隐藏端口。

# php - PHP中等效的JavaScript“调用声明”匿名函数？

> ID：13182300
> 
> 赞同：3
> 
> 时间：2012-11-01T17:22:40.827
> 
> 标签：php, javascript, closures, global, anonymous-function

我有一些我想在 PHP 脚本中执行的代码，但我不希望在此脚本中创建的变量在其他地方可见。

我想做的就像我们可以使用 JavaScript 一样：

```
(function() {
    // Do some stuff
})(); 
```

但我想用 PHP 来做这件事。

我想象过以下代码：

```
$main = function()
{
    global $main;
    unset($main);

    // Do some stuff
}

$main(); 
```

但它在 PHP 5.3 之前不受支持，我需要它。

PHP 5.2 还有另一种方法吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:45:02.650

您可以使用[create_function()](http://php.net/manual/en/function.create-function.php)但我认为这很难看。

（我对您的代码示例以及您的真实代码有一个更大的问题：您正在使用非常糟糕的全局状态。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T18:39:30.213

```
call_user_func(
    // create_function('$param1, $param2', '
    function($param1, $param2) { 
        // do stuff
    }
    // ')
, "param1", "param2"); 
```

使用为 php < 5.3 注释掉的行

但我想很多人会同意这是一件很奇怪的事情。

# php - 字符串上的 Symfony2 验证器组件

> ID：13182302
> 
> 赞同：0
> 
> 时间：2012-11-01T17:22:45.780
> 
> 标签：php, symfony

我想使用 symfony2 验证器组件对字符串进行简单验证。（这需要在 symfony 2.0 中）

```
$responseEmail = 'somestring';

$validator = new Validator(
    new ClassMetadataFactory(new StaticMethodLoader()),
    new ConstraintValidatorFactory()
);

$constraint = new Assert\Collection(array(
    'responseEmail' => new Assert\Collection(array(
        new Assert\Email(),
        new Assert\NotNull(),
    )),
));

$violations = $validator->validateValue(array('responseEmail' => $responseEmail), $constraint); 
```

这给了我一个错误：

```
Expected argument of type array or Traversable and ArrayAccess, string given 
```

有谁知道为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T18:06:00.133

目前您告诉该`$constraint`responseEmail 是一个数组。

试试这个：

```
use Symfony\Component\Validator\Validation;
use Symfony\Component\Validator\Constraints as Assert;
...
class ...
{
    public function validationAction()
    {
        $validator = Validation::createValidator();
        $responseEmail = 'somestring';
        $constraint = new Assert\Collection(array(
            'responseEmail' => array(new Assert\Email(), new Assert\NotNull()),
        ));

        $violations = $validator->validateValue(array('responseEmail' => $responseEmail), $constraint);
        ...
    }
} 
```

# http - 如何使用 Java 解决 Http 403 错误？

> ID：13182303
> 
> 赞同：1
> 
> 时间：2012-11-01T17:22:48.353
> 
> 标签：http

许多网站不允许目录浏览。他们希望您在该网站的网页中导航。因此，例如，如果页面包含图像，您只能通过加载整个页面来查看图像。当您将图像位置粘贴到浏览器中时，您会得到 403。当您尝试使用 URLConnection 访问该图像时，情况相同。

我的问题是，有没有办法解决这个问题？IE 欺骗服务器认为我们的 java 访问请求来自页面（知道包含我们要访问的项目的页面的 url）？

谢谢，彼得。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T17:39:53.920

您可以欺骗引用者。显示此行为的服务器使用它来了解您是否来自例如搜索引擎。

[http://www.jguru.com/faq/view.jsp?EID=257742](http://www.jguru.com/faq/view.jsp?EID=257742)显示了它在 Java 中的一种实现。

# ajax - 将 AJAX 与 .htaccess 重定向子域一起使用

> ID：13182305
> 
> 赞同：3
> 
> 时间：2012-11-01T17:22:55.723
> 
> 标签：ajax, .htaccess, redirect

我正在做子域重定向；

```
RewriteCond %{HTTP_HOST} ^([^\.]+)\.domain\.com$ [NC]

RewriteCond %1 !^(www|ftp|mail)$ [NC]

RewriteRule ^.*$ file.php?id=%1 [L] 
```

这会将**someid.domain.com**变成**www.domain.com/file.php?id=someid**

现在一切都很好，但我在将变量发布到文件的页面上使用 AJAX 时遇到问题

```
$.post('post.php', {ID: ID}, 
```

如您所知，AJAX 不会像**www.domain.com/post.php**那样使用，但是当我写**post.php**时。它搜索**someid.domain.com/post.php的重定向**

这就是我要的;

1- 将**someid.domain.com**重定向到**www.domain.com/file.php?id=someid**

2-重定向**someid.domain.com/post.php**到**www.domain.com/post.php**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T20:18:16.217

将您的行更改`RewriteRule`为：

```
RewriteRule ^/?$ file.php?id=%1 [L] 
```

这样，只有请求`/`被重写到`file.php`脚本，而不是*一切*。

# python - 定点 Z3 中的解释

> ID：13182307
> 
> 赞同：1
> 
> 时间：2012-11-01T17:22:59.687
> 
> 标签：python, z3

当我在定点 Z3Py 中启用解释生成选项时，我得到一个包含以下消息的核心转储。

> 设置“DL_GENERATE_EXPLANATIONS”时出错，原因：未知选项。
> 抛出“z3_error”实例后调用终止（核心转储）

我在 Ubuntu 12.04 上使用 Z3 4.2，并且在“说明”部分的 Z3Py 文档中给出的示例出现错误。

我想知道可能是什么导致了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T06:47:39.027

定点引擎的选项将在 4.2 中发生变化。该文档适用于最后一个版本 4.1。您可以通过直接在定点对象上设置选项来将选项设置为 Z3。这类似于在求解器对象和策略对象上管理选项的方式。例子，

```
fp = Fixedpoint()
fp.set(engine='datalog',generate_explanations=True) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-18T15:01:23.440

以上对我不起作用。我用了：

```
fp.set('datalog.generate_explanations', True) 
```

使用 z3 4.8.5 python 包。

# sql-server - 登录失败集成服务 2012

> ID：13182308
> 
> 赞同：1
> 
> 时间：2012-11-01T17:23:02.083
> 
> 标签：sql-server, authentication, ssis, sql-server-data-tools, sql-server-2012-datatools

我在 SQL Server 中部署了一个 SSIS 项目。项目中的连接管理器链接到不是部署 SSIS 项目的服务器名称。在我执行 sql server 中的主包后，报告屏幕中会弹出错误消息：NT Authority\Anonymous Logon 登录失败。

这是双跳尝试吗？

谁能帮我这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T01:24:25.047

您应该检查从部署服务器到连接管理器中服务器的权限。

# mysql - 使用连接 SQL 的高级计数

> ID：13182309
> 
> 赞同：2
> 
> 时间：2012-11-01T17:23:04.530
> 
> 标签：mysql, sql

我有两个表格，项目和类别，示例数据如下：

```
Items:
Title    category_id
Item A   1
Item B   2
Item C   3
Item D   2
Item E   3
Item F   2

Categories
category_id   category
1             wood
2             plastic
3             metal 
```

我需要做的是计算项目总数，然后列出每个类别中有多少个以及占总数的百分比

我知道我可以计算每个项目和总数，例如

```
select 
  count(*) as total, 
  sum(category_id=1) as cat_1, 
  sum(category_id=2
.... etc etc 
```

但是有没有办法在不计算每一个的情况下完成这一切（可能添加了新的类别并希望它继续工作），然后加入类别表以产生名称？

理想情况下，这是我想要返回的：

```
Category    how many    % of total
wood        1           17%
plastic     3           50%
metal       2           33%

Total       6           100% 
```

（17% 是 1/6 => 16.666666667% 四舍五入）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T17:30:17.033

```
select ifnull(c.category, 'TOTAL') as Category, 
    count(i.category_id) AS `how many`, 
    round(count(i.category_id) / (select count(*) from Items) * 100) as `% of total`
from Categories c
left outer join Items i on c.category_id = i.category_id
where c.category is not null
group by c.category
with rollup 
```

请注意，这也将正确处理空类别。

[SQL 小提琴示例](http://sqlfiddle.com/#!2/8cc84/9)

**输出：**

```
| CATEGORY | HOW MANY | % OF TOTAL |
------------------------------------
|    glass |        0 |          0 |
|    metal |        2 |         33 |
|  plastic |        3 |         50 |
|     wood |        1 |         17 |
|    TOTAL |        6 |        100 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T17:33:28.340

这是你的初步开始。这将为您提供第一列和第二列。要获得 3 列，您将需要进行一些计算。

```
select c.Category, Count(Category_id)
from dbo.Items i
INNER JOIN dbo.Categories c
    ON i.Category_Id = c.Category_ID
GROUP BY c.Category 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T17:34:46.450

这种交叉连接的计数方式将考虑具有零项的类别：

```
select c.Category
    , (select count(*) from Items where category_id = c.category_id) as HowMany
    , (select count(*) from Items where category_id = c.category_id)
        / (select count(*) from Items) * 100
        as PctOfTotal
from Categories as c; 
```

# java - 递归指数法

> ID：13182314
> 
> 赞同：4
> 
> 时间：2012-11-01T17:23:23.283
> 
> 标签：java, methods, recursion, exponent

```
public static int exponent(int baseNum) {
    int temp = baseNum *= baseNum;                

        return temp * exponent(baseNum);             
} 
```

现在，如果我调试上面的方法，它会将 n * n 变为无穷大，所以它仍然有效，但我需要这个递归方法在 10 次后停止，因为我的导师要求我们找到给定 10 的幂的指数。

该方法必须只有一个参数，这里有一些调用指数的例子：

```
 System.out.println ("The power of 10 in " + n + " is " + 
                    exponent(n)); 
```

所以输出应该是：

```
The power of 10 in 2 is 1024 
```

或者

```
The power of 10 in 5 is 9765625 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T17:32:37.787

做类似的事情

```
public static int exp(int pow, int num) {
    if (pow < 1) 
        return 1; 
    else
        return num * exp(pow-1, num) ;
}

public static void main (String [] args) {     
    System.out.println (exp (10, 5));
} 
```

并且不要忘记告诉何时停止递归并从堆栈中弹出值的基本情况（即条件）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T17:27:58.377

创建一个辅助方法来执行递归。它应该有两个参数：底数和指数。以指数 10 的值调用它，并使用 (exponent-1) 进行递归。基本情况是`exponent == 0`，在这种情况下它应该返回 1。（您也可以`exponent == 1`用作基本情况，在这种情况下它应该返回基数。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-13T17:51:49.253

以下是我的导师 Penn Wu 教授在讲义中提供的内容。

```
公共类 Exp 

{ 

 public static int exponent(int a, int n) 

 { 

  if (n==0) { return 1; } // base 

  else // 递归

  { 

   a *= exponent(a, n-1); 

   返回一个；

  } 

 }

 public static void main(String[] args) 

 { 

  System.out.print(exponent(2, 10)); 

 } 

}

```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T17:28:22.733

它不应该有 2 个参数并像下面那样处理退出条件吗？

```
public static int exponent(int baseNum, int power) {
   if(power == 0){
      return 1;
   }else{ 
      return baseNum * exponent(baseNum, power-1);  
   }           
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T17:45:45.420

对于递归函数，我们需要：

1.  检查停止条件（即当 exp 为 0 时，返回 1）
2.  用调整后的条件调用自己（即 base * base^(n-1) ）

这是代码。

```
public class Test
{
    public static int exponent(int baseNum, int exp)
    {
        if (exp<=0)
            return 1;

        return baseNum * exponent(baseNum, --exp);
    }

    public static void main(String a[])
    {
        int base=2;
        int exp =10;

        System.out.println("The power of "+exp+" in "+base+" is "+exponent(base,exp));
    }

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-16T20:01:17.400

不要忘记，对于每个递归函数，您都需要一个基本案例。停止条件`static double r2(float base, int n) {

```
 if (n<=0) return 1;
    return  base*r2(base,n-1);

} 
```

# c# - c#如何获取不同计算机上相同文件的文件路径

> ID：13182316
> 
> 赞同：-1
> 
> 时间：2012-11-01T17:23:29.697
> 
> 标签：c#, winforms, path

我正在尝试制作一个代码，该代码从我手动输入的文件路径中获取图像。这是我的代码：

`pieceImage = Image.FromFile(@"O:\Projects\imagename.png");`

此代码保存在我的 USB 闪存驱动器上。但是，每当我在另一台计算机上运行此代码时，路径是不同的（显然）并且不一定以 O:\ 开头，而是以其他内容开头，例如 F:。

我可以使用什么来使路径相应地根据运行它的计算机而改变？提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:27:26.317

您可以根据驱动器名称获取驱动器号，然后基于此构建文件的路径（因此仅使用驱动器根目录的相对路径，不使用字母）。有关使用的实际示例，请参阅MSDN 上的[DriveInfo 类和](http://msdn.microsoft.com/en-us/library/system.io.driveinfo.aspx)[这个问题](https://stackoverflow.com/questions/2843935/get-drive-label-in-c-sharp)。

当然，如果图像不在 U 盘上，则需要更有创意。但是我还是会推荐一种不同的方法，因为这一切都可能存在设计缺陷。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T17:27:52.793

假设您的程序在目录 /Program/ 中，包括 /Program/ 目录下的所有图像，例如 /Program/Images/。这样，无论程序在哪里运行，图像都将可用。

# c# - 使用 System.Reflection 检索 const 字符串字段列表

> ID：13182318
> 
> 赞同：2
> 
> 时间：2012-11-01T17:23:32.040
> 
> 标签：c#, asp.net-4.0, system.reflection, fieldinfo

我已经创建了一个类（显示其中一个），其中包含我想要迭代的 const 字符串。

```
public static class HTDB_Cols
{
    public sealed class Assistant
    {
        public const string EntryID  = "entryID",
                CustName  = "custName",
                SerialNum  = "serialNum",
                UserName  = "userName",
                Password  = "password",
                EndDate  = "end_date",
                CustID  = "custID",
                TmpCheck  = "tmpCheck",
                Isfamily  = "isfamily",
                Isserver  = "isserver";
    }
}               

public static class DB
{    
    public static void insert(string TableName)
    {
        ColumnsCollection = typeof(HTDB_Cols).GetNestedTypes().Where(f => f.DeclaringType.Name.ToLower().Equals(TableName.ToLower()));
    } 
} 
```

上面的代码显示了我的尝试，但即使经过大量试验和错误，我仍然无法正确完成。

我希望将所有列的列表作为 const 集合数组或列表。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T17:27:53.423

```
var dict = typeof(HTDB_Cols).GetNestedTypes()
            .First(t=>String.Compare(t.Name,TableName,true)==0)
            .GetFields()
            .ToDictionary(f => f.Name, f => f.GetValue(null)); 
```

获取列表

```
var list = typeof(HTDB_Cols).GetNestedTypes()
            .First(t => String.Compare(t.Name, TableName, true) == 0)
            .GetFields()
            .Select(f => f.GetValue(null) as string)
            .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T17:30:01.040

看起来您需要的是`enum`：

```
enum Assistant
{
    EntryID,
    CustName,
    SerialNum,
    UserName,
    Password,
    EndDate,
    CustID,
    TmpCheck,
    Isfamily,
    Isserver
}; 
```

然后，您可以通过执行以下操作将所有这些名称作为字符串：

```
string[] allNames = Enum.GetNames(typeof(Assistant)); 
```

只要您可以接受让变量的名称成为您关心的实际值，这是一个有效的选择。我注意到它们在您的示例中并不完全相同，但主要是外壳。如果您可以处理使用变量名作为值，或者将变量名更改为您需要的值，那么这可能是您的最佳选择。

现在，如果变量名称与它们所代表的值不同确实很重要，或者如果您需要表示非法标识符的值（例如，您的值之一有空格，那就不好了，他们可以永远不要以数字开头，否则它们可能太长而不能成为方便的名称）。如果是这种情况，那么您真正想要的是一个由字符串支持的枚举，而不是整数或其他数字类型。这在 C# 中是不可能的，但是因为这在我实际编写以下类之前就​​已经出现了，这是我创建自己的字符串支持的枚举的最佳尝试。如果您确实需要与它们所代表的字符串值不同的变量名称，这应该适合您。

所有重要的东西都在顶部，后面的大部分内容`Equals`都只是语法糖。

```
public struct StringEnum
{
    #region Code that is to be configured
    //For each value to be publicly exposed add a new field.
    public static readonly StringEnum Alpha = new StringEnum("Alpha Value");
    public static readonly StringEnum Beta = new StringEnum("Beta Value");
    public static readonly StringEnum Invalid = new StringEnum("Invalid");

    public static IEnumerable<StringEnum> AllValues
    {
        get
        {
            yield return Alpha;
            yield return Beta;
            yield return Invalid;
            //...
            //add a yield return for all instances here.

            //TODO refactor to use reflection so it doesn't need to be manually updated.
        }
    }

    #endregion
    private string value;

    /// <summary>
    /// default constructor
    /// </summary>
    //private Group()
    //{
    //    //You can make this default value whatever you want.  null is another option I considered 
    //    //(if this is a class an not a struct), but you 
    //    //shouldn't have this be anything that doesn't exist as one of the options defined at the top of 
    //    //the page.
    //    value = "Invalid";
    //}
    /// <summary>
    /// primary constructor
    /// </summary>
    /// <param name="value">The string value that this is a wrapper for</param>
    private StringEnum(string value)
    {
        this.value = value;
    }

    /// <summary>
    /// Compares the StringEnum to another StringEnum, or to a string value.
    /// </summary>
    /// <param name="obj"></param>
    /// <returns></returns>
    public override bool Equals(object obj)
    {
        if (obj is StringEnum)
        {
            return this.Equals((StringEnum)obj);
        }

        string otherString = obj as string;
        if (otherString != null)
        {
            return this.Equals(otherString);
        }

        throw new ArgumentException("obj is neither a StringEnum nor a String");
    }

    /// <summary>
    /// Strongly typed equals method.
    /// </summary>
    /// <param name="other">Another StringEnum to compare this object to.</param>
    /// <returns>True if the objects are equal.</returns>
    public bool Equals(StringEnum other)
    {
        return value == other.value;
    }

    /// <summary>
    /// Equals method typed to a string.
    /// </summary>
    /// <param name="other">A string to compare this object to.  
    /// There must be a Group associated with that string.</param>
    /// <returns>True if 'other' represents the same Group as 'this'.</returns>
    public bool Equals(string other)
    {
        return value == other;
    }

    /// <summary>
    /// Overridden equals operator, for convenience.
    /// </summary>
    /// <param name="first"></param>
    /// <param name="second"></param>
    /// <returns>True if the objects are equal.</returns>
    public static bool operator ==(StringEnum first, StringEnum second)
    {
        return object.Equals(first, second);
    }

    public static bool operator !=(StringEnum first, StringEnum second)
    {
        return !object.Equals(first, second);
    }

    /// <summary>
    /// Properly overrides GetHashCode so that it returns the hash of the wrapped string.
    /// </summary>
    /// <returns></returns>
    public override int GetHashCode()
    {
        return value.GetHashCode();
    }

    /// <summary>
    /// returns the internal string that this is a wrapper for.
    /// </summary>
    /// <param name="stringEnum"></param>
    /// <returns></returns>
    public static implicit operator string(StringEnum stringEnum)
    {
        return stringEnum.value;
    }

    /// <summary>
    /// Parses a string and returns an instance that corresponds to it.
    /// </summary>
    /// <param name="input"></param>
    /// <returns></returns>
    public static StringEnum Parse(string input)
    {
        return AllValues.Where(item => item.value == input).FirstOrDefault();
    }

    /// <summary>
    /// Syntatic sugar for the Parse method.
    /// </summary>
    /// <param name="other"></param>
    /// <returns></returns>
    public static explicit operator StringEnum(string other)
    {
        return Parse(other);
    }

    /// <summary>
    /// A string representation of this object.
    /// </summary>
    /// <returns></returns>
    public override string ToString()
    {
        return value;
    }
} 
```

# php - 我可以知道文件何时已经下载到用户的计算机中吗？在 PHP 中？

> ID：13182322
> 
> 赞同：0
> 
> 时间：2012-11-01T17:23:36.580
> 
> 标签：php, javascript, download, archive

> **可能重复：**
> [检测浏览器何时接收文件下载](https://stackoverflow.com/questions/1106377/detect-when-browser-receives-file-download)

我正在用 PHP 制作一个 excel 存档，但我需要知道该存档的下载何时完成才能将用户重定向到另一个页面？

我可以做吗？在 PHP，Javascript 中？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:42:24.530

我通过使表单的目标提交隐藏的 iframe 来完成此操作很多次。目标 PHP 页面将执行上传，然后我执行 PHP 回显以编写一个 Javascript 块，该块将调用父页面上的 javascript 函数。这个父函数可以做你的重定向。

我通常在父页面上显示一个模态进度条，同时等待子页面调用重定向功能。

# jsf - 托管 在第二次提交时未更新最新信息

> ID：13182324
> 
> 赞同：1
> 
> 时间：2012-11-01T17:23:50.630
> 
> 标签：jsf, jakarta-ee, jsf-2, primefaces, cdi

我在这里遇到了一个似乎比我更好的问题。

### 语境

我有显示 JPA 实体详细信息的 ap:dialog (primefaces)。在此对话框中，用户可以修改信息并提交。提交后，信息将保存在 DB 中（通过 JPA）。

p:dialog 被“包装”在一个组件中，以便在不同的情况下使用。

### 问题：

如果我显示带有从 DB 中选择的实体的对话框，请修改一些信息并单击*保存*（提交）按钮：它第一次工作正常。数据库被更新并且 p:dialog 被隐藏。
如果我再次显示具有相同实体的对话框，请再次修改 p:dialog 中的数据并再次提交：一切似乎都工作正常（确认消息和日志）但数据库**未**更新。

在任何时候，在 p:dialog 中找到的信息都是正确的。但是，在 BackingBean 和 DB 中找到的数据只有在第一次提交后才是最新的。

另一个线索：如果在提交操作后我刷新页面，它将再次提交。

### 调试信息：

根据提交发布的信息（Firebug 长寿！！！）所有发布的数据都是正确的（始终是最新的）。但是如果我在日志中显示支持 bean 接收到的内容，它与之前提交的内容相同（而不是新信息）。

数据已正确发布，但似乎收到/解释不当。这就像问题发生在接收提交的帖子时，在 JSF 生命周期的 RestoreView、ApplyRequestValue、ProcessValidation 或 UpdateModelValue 阶段之一中。

因此，第二次保存（提交）似乎有效但无效的原因是因为保存在数据库中的数据对于每次后续提交都是相同的.....**为什么？**

我使用 Glassfish 3.1.2、Mojarra 2.1.13、JSF、PrimeFaces、CDI、JPA、Hibernate...

### 代码片段：

包含 p:dialog (cmpnt:dataEntryDialog) 作为组件的页面：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:p="http://primefaces.org/ui"
        xmlns:cmpnt="http://java.sun.com/jsf/composite/component"
>
    <h:head>
        <title>
            Test!!!
        </title>
    </h:head>
    <h:body>
        <h:commandButton type="button" onclick="PVDlg.show();" value="show dlg"/>
        <cmpnt:dataEntryDialog id="PVDataEntry" video="#{processStatus.testedVideo}" fieldGroupId="2" 
                header="This is a test"
                widgetVar="PVDlg" render="@this"/>
    </h:body>
</html> 
```

p:dialog 的组件实现（cmpnt:dataEntryDialog）：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
        xmlns:composite="http://java.sun.com/jsf/composite"
        xmlns:c="http://java.sun.com/jsp/jstl/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.org/ui">

    <composite:interface componentType="dataEntryComponent">
        <composite:attribute name="video" required="true"/>
        <composite:attribute name="widgetVar" required="true"/>
        <composite:attribute name="render" required="false"/>
        <composite:attribute name="closeActionListener" method-signature="void listener(org.primefaces.event.CloseEvent)" required="false" />
        [... other attributes]
    </composite:interface>

    <composite:implementation>
        <h:outputStylesheet library="css" name="dataEntryDialog.css" target="head" />

        <div id="#{cc.clientId}">
            <script type="text/javascript">
                function handleDataEntrySaveAttempt(xhr, status, args) {
                    if( args.validationFailed || !args.saved ) {
                        jQuery('#' + #{cc.clientId} + ':cmpntDataEntryDialog').effect("shake", {times:3}, 100);
                    } else {
                        ${cc.attrs.widgetVar}.hide();
                    }
                    return true;
                }
            </script>
            <p:dialog 
                    id="cmpntDataEntryDialog" 
                    header="#{cc.attrs.header}"
                    widgetVar="#{cc.attrs.widgetVar}"
                    resizable="false"
                    showEffect="fade"
                    hideEffect="fade"
                    dynamic="true"
                    minimizable="true"
                    maximizable="false"
                    width="550" 
                    height="500"
            >
                <h:form id="cmpntDataEntryForm" style="position:relative;">
                    <div style="height:460px;">
                        <div style="width:100%;height:100%;margin-bottom:5px;overflow:auto;">
                            <ui:repeat value="#{dataEntryDialog.loadDataEntryFields( cc.attrs.video, cc.attrs.fieldGroupId )}" var="field" varStatus="fieldRankInfo">
                                <div style="position:relative;width:100%;height:24px;margin:4px 0px;">
                                    <h:outputText value="#{field.fieldName}:" style="vertical-align:middle;" styleClass="margin"/>
                                    <p:calendar id="cmpntInputDate" value="#{field.value}" rendered="#{'java.util.Date' eq field.type}" styleClass="input margin" effect="drop" />

                                    <p:selectOneMenu id="cmpntInputComboBox" value="#{field.value}" rendered="#{'ComboBox' eq field.type}" styleClass="input margin">
                                        <f:selectItem itemLabel="SelectAValue"/>
                                        <f:selectItems value="#{field.possibleValues}"/>
                                        <f:converter converterId="com.ctec.world.ConvertInteger" />
                                    </p:selectOneMenu>

                                    [... some other optionally rendered fields for different data types]

                                </div>
                            </ui:repeat>
                        </div>
                    </div>
                    <div style="position:relative;bottom:0;">
                        <div style="float:right;margin-top:5px;">
                            <p:commandButton id="cmpntSubmit" action="#{dataEntryDialog.save( cc.attrs.video.video )}"
                                    value="${cc.resourceBundleMap.dataEntryDialog_Save}"
                                    process="@form" update="${cc.attrs.render} @form"
                                    styleClass="margin" oncomplete="handleDataEntrySaveAttempt( xhr, status, args )"/>
                            <p:commandButton id="cmpntCancel"
                                    value="${cc.resourceBundleMap.dataEntryDialog_Cancel}" 
                                    onclick="${cc.attrs.widgetVar}.hide();" styleClass="margin"/>
                        </div>
                    </div>
                </h:form>
            </p:dialog>
        </div>
    </composite:implementation>
</html> 
```

关于托管 bean，它们是普通的 CDI @Named @SessionScoped bean。

### 附加信息：

*我做了进一步的测试：通过阶段监听器查看是否有任何可从那里访问的对象具有有趣的信息......直到现在还没有运气。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T13:15:26.297

我懂了！问题不在于表示层（真是令人惊讶！）。这与我的逻辑有关。不久前，我通过使用实体管理器的合并方法返回的托管实例更改实体实例（不再由 entityManager 管理）来修复 JPA 乐观锁定异常。我的设计并没有像预期的那样在所有地方都支持这种变化......我被正确的帖子内容所吸引，但没有进入我期望的实体实例。我想更多的网络开发经验不会有什么坏处！

# c++ - 更改父窗口中的背景颜色

> ID：13182325
> 
> 赞同：0
> 
> 时间：2012-11-01T17:23:56.317
> 
> 标签：c++, winapi, win32gui

我对 win32api 编程很陌生。我有 3 个问题。

如何更改父窗口中的背景颜色。我按照以下方式进行了操作，但它不起作用

```
wClass.hbrBackground=(HBRUSH)(RGB(255,255,255)); 
```

第二个问题是，我用来在窗口中添加文本如下。文本为粗体并带有背景色。我希望文本正常且没有背景颜色。

```
PAINTSTRUCT ps;
    HDC hDC;
    char szBuffer[]="Hello, World!";
    hDC=BeginPaint(hWnd,&ps);
    TextOut(hDC,10,10,szBuffer,strlen(szBuffer)); 
```

第三个问题是如何在父窗口中添加分组框。我在互联网上搜索了它，但这描述了如何使用资源在对话框上添加组框。请有人帮我解决这些问题...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T23:03:18.510

1.  > wClass.hbrBackground=(HBRUSH)(RGB(255,255,255));

我想类结构需要画笔的句柄，而不是颜色值本身（但我不确定）。像这样的东西：

```
wClass.hbrBackground=(HBRUSH)(CreateSolidBrush(RGB(255,255,255))); 
```

1.  要使文本背景透明，请使用特殊的 WinAPI 函数`SetBkMode(TRANSPARENT)`；（哎呀，花点时间记住它的名字：））。

2.  在大多数任务中，制作一个对话框资源并像普通窗口一样使用它（在其中绘图，放置您绘制的简单窗口等）比使用普通窗口并尝试在其中添加对话框控件要好得多。自 WinForms 和 WPF 以来，这已成为一种常见做法——其中的每个窗口都是一个“表单”，您可以在其中添加控件、在其中绘制等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T17:45:43.230

我试图记住微软是否输入了代码来清除客户区。我至少知道，您可以获取客户端矩形，然后使用它来将 drawRect() 命令建立到整个客户端区域。您可能还需要捕获命令以擦除背景

# jquery - 使用 LimeJS HTML5 库

> ID：13182331
> 
> 赞同：2
> 
> 时间：2012-11-01T17:24:36.687
> 
> 标签：jquery, html, node.js, limejs

我想知道我是否可以使用任何我想要的库，比如 Node.JS、JQuery 和 LimeJS ？有可能的 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:35:43.737

虽然我没有测试过，但应该可以使用 jQuery。使用 jQuery 的[***noConflict 函数***](http://api.jquery.com/jQuery.noConflict/)

像这样使用它：

```
<script type="text/javascript" src="other_lib.js"></script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
  $.noConflict();
</script> 
```

# csv - 在 emacs 24 中编辑 csv 表

> ID：13182334
> 
> 赞同：3
> 
> 时间：2012-11-01T17:24:46.253
> 
> 标签：csv, org-mode, emacs24

如何在 org 模式下轻松编辑 csv 表？

我试过`csv-mode`了，但它的代码自 2004 年 8 月以来就无人维护，而且代码说

> 该软件包旨在与 GNU Emacs 21（仅）一起使用。

哪个包最支持在 Emacs 24 中编辑 csv 文件？

一种解决方案可能是使用`org-mode`，但我还不能将列分隔符设置为`,`。如果`org-mode`正在运行，我可以`|`使用`C-c |`. 但我认为应该可以让它变得更容易。像这样的东西（不工作的例子）：

```
tea,       price
fruit,     3.45
earl grey, 2.42
ginger,    1.63
# eval: (setq 'org-mode-separator ",")
# eval: (org-mode)
# End: 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-22T10:30:06.513

已重新启动 csv 模式的工作。请参阅[https://sites.google.com/site/fjwcentaur/emacs](https://sites.google.com/site/fjwcentaur/emacs)。您可以使用 elpa 从 elpa 安装最新版本`M-x package-install csv-mode`。它与 emacs 24 完美配合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T23:36:48.990

这有点快速和肮脏，但可能对您有用：您可以用管道（使用`M-%`）临时替换所有逗号，然后使用以下命令打开[org-table 次要模式](http://www.gnu.org/software/emacs/manual/html_node/org/Orgtbl-mode.html)：

`M-x orgtbl-mode`

完成后，再次用逗号替换所有管道。在开始之前，请确保您的单元格字段中没有任何竖线字符或引号逗号。

# javascript - Backbone.js Model.Save 重置 DOM 事件

> ID：13182336
> 
> 赞同：0
> 
> 时间：2012-11-01T17:24:51.613
> 
> 标签：javascript, jquery, html, events, backbone.js

考虑以下组成的示例：

```
events: {
  'mouseup #element':  'saveModel',
  'click #button': 'foo'
}, 
```

让我们假设**按钮位于 #element 内**。

现在**，当我直接单击按钮时， foo 永远不会执行。**saveModel 正常执行。**如果我不将模型保存在 saveModel 函数中，则 foo 将被执行。**

这是为什么？如何解决这个问题？

**编辑：** 我添加了一个小演示。这是 backbon/examples 中的 todos 示例。我只是做了一些小的修改来显示错误。要重现单击按钮测试，然后尝试单击待办事项标题，您将看到标题的事件处理程序不会触发。

这是一个带有压缩示例的 mediafire 链接。 [http://www.mediafire.com/?uiy3ovwnvkiv1ys](http://www.mediafire.com/?uiy3ovwnvkiv1ys)

# api - 将 Gumroad API 集成到 Github 页面

> ID：13182341
> 
> 赞同：4
> 
> 时间：2012-11-01T17:25:07.247
> 
> 标签：api, e-commerce, github-pages

所以[Gumroad](http://gumroad.com)有一个非常酷的[API](https://gumroad.com/api/authentication)，Github 有一些很酷的[Pages](http://pages.github.com/)功能。有没有人尝试将 Gumroad 的 API 与 Github Pages 集成为店面来销售软件？

值得尝试吗？从我对 Github Pages 的快速阅读来看，页面源代码似乎已发布在您的存储库中。因此，如果您将 Gumroad API 密钥绑定到其中，它可能不会很好地工作？

只是今天在做某事时突然想到的一个想法，想看看是否有人用 Gumroad + Github 成功地完成了这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-09-10T00:39:01.597

将 Gumroad 和 Github Pages 结合起来创建一个可以销售软件的网站是完全合理的。

然而，最简单的方法可能是将您的产品的嵌入代码添加到 Github Pages 网站中，这将非常有效。我不确定你是否可以在 Github Pages 中使用 Node.js，但如果可能的话，你也可以使用更高级别的 API。

PS你应该尝试创建这个。我打算用艺术品做类似的事情！

# jquery - 结合引导程序和验证程序

> ID：13182346
> 
> 赞同：1
> 
> 时间：2012-11-01T17:25:32.883
> 
> 标签：jquery, html, forms, twitter-bootstrap, jquery-validate

所以我正在用引导程序重建我的注册页面。我正在尝试合并 jquery 的验证器插件来验证表单。我做的第一件事是将表单分成三个部分，每个部分都有自己的选项卡。表单的第一页包含 3 个单选按钮选项，用户必须选择其中一个，然后才能进入下一页/选项卡/部分。所以这是我的html：

```
<ul class="nav nav-tabs">
  <li><a href="#options" data-toggle="tab">Options</a></li>
  <li><a href="#information" data-toggle="tab">Information</a></li>
  <li><a href="#payment" data-toggle="tab">Payment</a></li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="options">
    <form id="frmtype1" action="" name="frmtype1" method="post">
        <header>Registration Options</header>
        <br/>
        <label for="Reg_type1" class="checkbox">
            <input type="radio" name="Reg_type" id="Reg_type1" value="1" validate="required:true"/>
        Registering myself with credit card or bank account
        </label>
        <br>
        <label for="Reg_type2" class="checkbox">
            <input type="radio" name="Reg_type" id="Reg_type2" value="2"/>
        Registering multiple people using credit card or bank account
        </label>
        <br>
        <label for="Reg_type3" class="checkbox">
            <input type="radio" name="Reg_type" id="Reg_type3" value="3"/>
        Registering using a purchase order
        </label>
        <div class="form-actions">
            <span class="help-inline" style="display:none;">Please choose an option</span><button class="btn" type="submit">Next</button>
        </div>
    </form>             
  </div>
  <div class="tab-pane" id="information">...</div>
  <div class="tab-pane" id="payment">...</div>
</div> 
```

然后我的jQuery是：

```
var val1 = $('#frmtype1').validate();
$('#myTab a').click(function (e) {
  e.preventDefault();
  $(this).tab('show');
}) 
```

我想要做的是，如果用户在选择选项之前尝试单击下一步，我想显示内联文本，`Please choose an option`否则移动到下一个选项卡。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T17:30:04.333

在活动选项卡中选择表单并检查它是否有效。如果不是，请显示您的消息并停止该事件。

```
$(".nav-tabs a").click(function(e) {
    var form = $( ".tab-pane.active" );
    if ( !form.valid() ) {
        alert("You must complete the form before continuing to the next tab.");
        return false;
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T18:03:54.350

只需放置此 jquery 即可验证单选按钮：

```
var val1 = $('#frmtype1').validate({
    errorPlacement: function(error, element) {}, //this is to prevent the standard error message from showing, rather you use the inline-text
    rules: {
        'Reg_type': {
            required: true
        }
    }
}); 
```

然后显示/隐藏错误消息：

```
$('#frmtype1').submit(function(e) {
    if(val1.form()) {
        $('.help-inline').hide();
    } else {
        $('.help-inline').show();
        return false;
    }
}); 
```

# c# - 传递类型参数并声明一个列表

> ID：13182350
> 
> 赞同：1
> 
> 时间：2012-11-01T17:25:38.683
> 
> 标签：c#, reflection

```
public static List<customModel> getList(type customModel)
{ 
  List<customModel> tempList = new List<customModel>(10);
  return tempList;
} 
```

是否可以返回从其他地方传递的类型列表？我一直在做自己的项目，并注意到如果有任何方法可以做到这一点，我的代码会简单得多。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-01T17:27:43.893

你的意思是使用这样的[泛型](http://msdn.microsoft.com/en-us/library/ms379564%28v=vs.80%29.aspx)：

```
public static List<T> getList<T>()
{ 
  List<T> tempList = new List<T>(10);
  return tempList;
} 
```

你可以这样称呼它：

```
var newList = getList<customModel>(); 
```

或在 C# 3.0 之前（`var`不可用）：

```
List<customModel> newList = getList<customModel>(); 
```

* * *

问题是，您可以轻松地做到这一点：

```
var newList = new List<customModel>(10); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T17:28:31.947

使用泛型：

```
public static List<T> getList<T>()
{
    return new List<T>(10);
} 
```

像这样称呼它：

```
var myList = getList<int>(); 
```

# delphi - 下载加密 (XOR) 内容

> ID：13182352
> 
> 赞同：1
> 
> 时间：2012-11-01T17:25:49.913
> 
> 标签：delphi, delphi-2010

我有一个用 XOR 加密的在线 TXT 文件。我正在使用 Indy HTTP 来读取这个文件。当我这样做时：

```
Buff.Text:= HTTP.Get('http://www.blabla.com/xor.txt'); 
```

Buff 中的内容已损坏，我无法正确解密。如何解决这个问题？下面我将粘贴我正在使用的函数来异或 txt 文件：

```
function TForm1.XorStr(Input: AnsiString; Seed: integer): AnsiString;
var
i : integer;
Output : AnsiString;
begin
    Output := '';
    for i := 1 to Length(Input) do
        Output := Output + AnsiChar(Ord(Input[i]) XOR (Seed));
    Result:= Output;
end; 
```

希望有人可以帮助我。谢谢你们！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-01T18:25:15.197

您正在使用`TIdHTTP.Get()`返回的重载版本下载数据`UnicodeString`。`Content-Type`该版本将根据服务器响应标头中指定（或缺失）的字符集将原始数据解码为 Unicode 。对于您尝试做的事情，这会破坏您的数据。您需要使用另一个用原始数据`TIdHTTP.Get()`填充 a的重载版本`TStream`，然后您可以对其进行解码，例如：

```
var
  Strm: TMemoryStream;
  Output: AnsiString;
begin
  ...
  Strm := TMemoryStream.Create;
  try
    HTTP.Get('http://www.blabla.com/xor.txt', Strm);
    Output := XorStr(Strm.Memory, Strm.Size, Seed);
  finally
    Strm.Free;
  end;
  ...
end;

function TForm1.XorStr(Input: Pointer; InputSize: NativeInt; Seed: Integer): AnsiString;
var
  i : integer;
begin
  SetString(Result, PAnsiChar(Input), InputSize);
  for i := 1 to Length(Result) do
    Result[i] := AnsiChar(Ord(Result[i]) XOR Seed);
end; 
```

# jquery - jQuery 预加载不缓存在 Chrome 或 Safari 中

> ID：13182358
> 
> 赞同：0
> 
> 时间：2012-11-01T17:26:26.010
> 
> 标签：jquery, google-chrome, caching

我有一个 jquery 幻灯片并构建了一个预加载功能：

```
function preload_images(){
var pre_image = curr_img - 1;
if(pre_image < 0) pre_image = (tot_elements-1);

var curr_obj = 0;

if(!$('#img_preloaded_'+pre_image).length > 0){
    curr_obj = slideshow[pre_image];
    $('.preload_left').append('<img src="'+curr_obj["img_url"]+'" id="img_preloaded_'+pre_image+'" class="preload_box" />');
}

var pre_image = curr_img + 1;
if(tot_elements==pre_image) pre_image = 0;
if(!$('#img_preloaded_'+pre_image).length > 0){
    curr_obj = slideshow[pre_image];
    $('.preload_right').append('<img src="'+curr_obj["img_url"]+'" id="img_preloaded_'+pre_image+'" class="preload_box" />');
} 
```

一切都在 Firefox 中运行良好 - 加载时会缓存图像 - 但由于某种原因，图像不会缓存在 Chrome 或 Safari 中。您可以看到，在 FF、Chrome 和 Safari 中，图像会加载到幻灯片左侧的文档中，但它们不会缓存。幻灯片会重新加载它们，但 FF 中除外，因为图像已经缓存在 FF 中。

[https://www.assembla.com/code/cfrepo/subversion/node/blob/trunk/index.html#image=CrossFire](https://www.assembla.com/code/cfrepo/subversion/node/blob/trunk/index.html#image=CrossFire) http://jsfiddle.net/doobada/9m9eq/

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T21:44:24.720

好的，看起来 Chrome 和其他浏览器都有自己的缓存过期默认值。为了解决这个问题，我需要预先加载幻灯片集中的图像，然后更改过期时间。在我编辑 .htaccess 文件之前，它只能在 Firefox 中正常工作，这样 chrome 就不会给它默认的过期时间：

```
<FilesMatch "\.(ico|pdf|flv|jpg|jpeg|png|gif|js|css|swf)$"> Header set Expires "Thu, 15 Jan 2015 20:00:00 GMT" </FilesMatch> 
```

# php - PHP中的数组和引用

> ID：13182362
> 
> 赞同：1
> 
> 时间：2012-11-01T17:26:54.050
> 
> 标签：php, arrays, reference

今天我在阅读PHP 官方手册页上的[What Reference Do](http://ua2.php.net/manual/en/language.references.whatdo.php)文章，发现以下代码：

```
<?php
$arr = array(1);
$a =& $arr[0]; //$a and $arr[0] are in the same reference set
$arr2 = $arr; //not an assignment-by-reference!
$arr2[0]++;
/* $a == 2, $arr == array(2) */ 
```

这就是手册中有关此代码的内容：

> 数组内的引用有潜在的危险。使用右侧的引用进行普通（非引用）赋值不会将左侧变为引用，但数组内的引用会保留在这些普通赋值中。这也适用于数组按值传递的函数调用。

有人能解释一下为什么在执行代码后我们的 $a 和 $arr 等于 2 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T17:37:00.527

做一个`var_dump($arr);`，你会看到问题。`$arr[0]`会有一个`&int type`.

*   这意味着`$arr[0]`成为对值的引用。
*   并且该`$arr`数组实际上将引用作为其第一个值。
*   当您复制数组时，引用将被继承，因为第一个元素将继续作为引用，并且仍将修改引用的值。

**这是一个数组的事情。**看起来真的很奇怪，但一旦你理解它，它就很有意义......就像 PHP 一样有意义 :)

**PS**：这种行为就是为什么`call_user_func_array()`可以将一个`array()`引用作为它的参数，并允许您调用接受引用参数的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T17:34:36.933

也许这会让它更清楚：

```
$arr = array(1,1);
$a =& $arr[0]; //$a and $arr[0] are in the same reference set
$arr2 = $arr; //not an assignment-by-reference!
$arr2[0]++;
$arr2[1]++;
/* $a == 2, $arr == array(2) */
var_dump($arr);
//outputs array(2) { [0]=> &int(2) [1]=> int(1) } 
```

值增加的原因是因为`the reference inside the array is preserved in the normal assignment`. `$arr2[0]`,`$arr[0]`现在`$a`都引用相同的值，即使`$arr2`是`$arr`. 注意如何`$arr2[1]++`不增加`$arr[1]`。

# python - OpenCV中的相机校准和透视校正

> ID：13182369
> 
> 赞同：1
> 
> 时间：2012-11-01T17:27:20.413
> 
> 标签：python, opencv, camera-calibration

我使用校准来获取内在和外在参数，我不知道如何在我的透视校正代码中使用这些信息。我应该使用哪些 OpenCV 函数？

# macos - 自从我将 Mac 更新为 Mountain Lion 后，IP 被阻止

> ID：13182370
> 
> 赞同：1
> 
> 时间：2012-11-01T17:27:23.550
> 
> 标签：macos, osx-lion, firewall, osx-mountain-lion

由于我已将我的 mac 从 lion 升级到山狮，ip 5.9.31.48 (api.shellycloud.com) 似乎已关闭（ping 表示“主机已关闭”）。所以我认为某处有防火墙规则阻止来自该 ip 或主机名的所有请求。

我使用Little snwitch，所以确保我已经关闭了它，山狮内置防火墙也是如此。但什么都没有改变，仍然下降。我已经检查了我的 /etc/hosts 。

有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:08:40.833

你的 Mac 上安装了 Hamachi VPN 客户端吗？它保留 5.xxx IP 地址用于与其他 Hamachi 主机通信，这意味着您的计算机无法与任何以 5 开头的真实地址通信。有关详细信息，请参阅[Wikipedia 文章。](http://en.wikipedia.org/wiki/Hamachi_%28software%29#Addressing)

# assembly - 从 COM 获取流量

> ID：13182372
> 
> 赞同：3
> 
> 时间：2012-11-01T17:27:25.083
> 
> 标签：assembly, serial-port, pascal

我需要在**MS-DOS**下从 COM 端口获取流量。

我找到了程序**ComSpy**（它必须从 COM 端口获取数据并发送到 prn，在 TSR 中执行），运行它，运行**prn2file.exe**并运行分析的程序，但它没有记录。

是否可以编写一个内存驻留程序（**MS-DOS**）来获取来自 COM 端口的所有流量并记录到文件，但不干扰其他程序（与 com 端口通信（通过中断与 com 一起工作））？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T19:21:44.633

是的，这是可能的。只需编写一个 TSR 来挂钩 COM 中断并进行适当的 dos 条目监控。不要使用 BIOS/DOS com 读/写例程，因为它们非常慢。没什么大不了的，当时有无数关于它的书，你应该可以用谷歌搜索一些。:-)

# java - 在 Java 中，有没有办法跟踪变量、方法或类是否在堆或堆栈中创建？

> ID：13182374
> 
> 赞同：5
> 
> 时间：2012-11-01T17:27:34.113
> 
> 标签：java, memory, heap-memory, stack-memory

我试图完全理解 Java 如何使用它的内存安排。网上的讨论很混乱，有时会互相矛盾，所以我找不到可以信任的人。如果它与静态、静态方法、局部变量、线程、易失性等混合在一起，这个东西可能会非常复杂。所以我在想是否有一种方法可以让我自己研究我做一些 Java 编码实验。一个类 MemoryTrack 做这样的事情，

```
public myMethod(){
int i = 0;
MemoryTrack.show(new myClass()); //print out "Heap at address 111"
MemoryTrack.show(new myClass()); //print out "Heap at address 222"
MemoryTrack.show(i); //print out "Stack at address 333"
MemoryTrack.show("a static method");  //print out "stack at address 444"
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T17:34:59.433

[Java 虚拟机规范的第 2.5 节](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-2.html#jvms-2.5)描述了内存的使用。堆栈存储堆栈帧（包含局部变量和部分结果）。堆是所有类实例和数组的来源。堆栈帧也可以从堆中分配（然后压入堆栈）。还有方法区和运行时常量池内存。详细信息在规范中详细说明。

就监控内存使用而言，一些分析器有相应的工具。要从程序内部进行监视，请查看[MemoryMXBean](http://docs.oracle.com/javase/6/docs/api/java/lang/management/MemoryMXBean.html)类（以及`java.lang.management`包中的相关类）。它非常易于使用。虽然它可能无法为您提供您想要的一切，但它可能是最好的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T17:35:17.343

规则很简单：堆包含对象，栈包含局部变量和方法参数。对象字段位于对象内部，在堆中。不知道静态字段。方法和构造函数不存储在堆栈中，也不存储在堆中。线程和 volatile 无关紧要。

方法*调用*在堆栈上。每个都有一个为其保留的空间，即*堆栈帧*，其中包含局部变量和参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T18:46:33.500

你需要知道的两件事

*   它没有你想象的那么复杂。
*   99%的时间都没有关系。

* * *

变量总是在栈上。

对象总是在堆上。（有例外，但我不会担心）

方法和类总是在 perm gen 中。

在 HotSpot/OpenJDK JVM 中，静态字段被收集在类的单例对象中。如果您执行堆转储，您可以看到该实例。其他 JVM 可能会以不同的方式执行此操作。

> 一个类 MemoryTrack 做这样的事情，

这样的方法不会做任何有用的事情，因为参数将始终在堆栈上，而它所引用的对象将始终在堆上。您无法以标准方式获取 Object 的内存位置，并且如果这样做的话也不太可能有用，因为它可以随时更改。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-01T17:37:49.223

您可能认为 Java 中的所有变量都在堆上。实际上它是依赖于实现的。

# web - Neo4j - 从哪里开始，在网络上显示？

> ID：13182384
> 
> 赞同：1
> 
> 时间：2012-11-01T17:28:12.230
> 
> 标签：web, playframework, neo4j, graph-theory

我使用 Java 创建了一个 neo4j 图，它位于嵌入式数据库中。我想要做的是编写一个接受用户输入的网页，使用 Java 创建图形，然后将结果返回到网页，在那里它被遍历并以图表的方式显示。

我不确定从框架和如何从根到图中的所有节点进行查询从哪里开始。我正在考虑使用播放框架。

例如，我应该在文档方面寻找什么来使用 play 查询图形？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:43:28.287

您还可以使用 Spring Data Neo4j，它可能是目前最方便、最稳定的 Java 解决方案，请参阅[http://www.springsource.org/spring-data/neo4j](http://www.springsource.org/spring-data/neo4j)

# c# - 将单元测试映射到方法

> ID：13182385
> 
> 赞同：0
> 
> 时间：2012-11-01T17:28:14.023
> 
> 标签：c#, unit-testing

我们正在使用 Microsoft 的单元测试程序，并且我们使用单元测试向导为来自业务层的每个类中的方法创建一对一的映射。问题是需要完成的工作量，并确定在创建初始测试后我们是否缺少任何测试。

目前，我必须运行向导并查找在默认名称 [method][test] 后附加“1”的测试。具有该名称的那些意味着我们已经对该方法进行了测试。没有附加 1 的那些表示那些没有遵循默认命名约定的单元测试的方法。

我想知道是否可以将单元测试映射到方法上具有属性的方法，这样就不需要太多工作了。是的，我知道如果我们遵循 TDD，我们会先编写单元测试。我们在开发的同时编写测试（但有时会因为匆忙而错过）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T17:33:12.717

如果您使用的是 Visual Studio 2012 并拥有适当的版本，则它内置了适当的代码覆盖率分析：“运行具有代码覆盖率的测试”。

否则，您可以使用诊断工具来运行代码覆盖率，例如 NCover。您可以使用[TestDriven.net从 Visual Studio 内部执行此操作](http://www.testdriven.net/)

# c++ - 如何转换（指针向量）->（指向指针数组的指针）

> ID：13182389
> 
> 赞同：1
> 
> 时间：2012-11-01T17:28:27.753
> 
> 标签：c++, arrays, pointers, vector

我了解“[如何在 C++ 中将向量转换为数组](https://stackoverflow.com/questions/2923272/how-to-convert-vector-to-array-c)”

回答如何将双精度向量（非指针类型）转换为数组。

> 我的要求 :: 将（CustomClass 指针的向量）转换为（CustomClass 指针到 CustomClass 指针数组）。

**以下代码是否表示“（指针向量）->（指向 CustomClass 指针数组的指针）”**

```
std::vector <CustomClass*> vectorObject(SizeOfVector);  // Here each element of the vector //is a pointer to CustomClass object.
CustomClass* customClassArray = &vectorObject[0]; 
```

如果我错了，请纠正我。请帮助提供代码片段。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:35:43.490

其实`vectorObject[0]`是a `CustomClass *`，`&vectorObject[0]`a也是`CustomClass **`。

您在这里做了一个有趣的假设，即`vector<>`按顺序存储其元素。你可能是对的，所以你的代码应该可以工作。

编辑：根据 Ben Voigt 的评论，`vector<>`标准保证了 的连续性，因此此方法将 100% 有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T17:35:44.270

是的，向量必须在内存中是连续的，因此表达式“&vectorObject[0]”将返回您可以指向的第一个元素的地址。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T17:37:14.730

Vector 是数组排序中的包装器，提供数组的所有功能，同时还允许数组缩小，知道它有多大以及许多其他有用的功能。标准向量的要求之一是它的数据像数组一样以连续的方式存储。由于这个要求，您可以通过获取第一个元素的地址来获取元素数组，而不管类型如何。

`std::vector <CustomClass*>vectorObject`意味着你有一个 CustomClass Pointers 的向量来获取一个数组

`CustomClass **Array = &vectorObject[0]`现在我在向量中的偏移量 0 处获取了连续的数据段，并为其分配了 customclass 的指针，记住数组和指针在 c 和 c++ 中紧密相连我现在可以访问指针指针，就好像它是一个数组一样

`CustomClass * FirstEle = Array[0];`

# java - 如何确定应用程序的项目类型是什么？

> ID：13182394
> 
> 赞同：0
> 
> 时间：2012-11-01T17:28:53.630
> 
> 标签：java, eclipse, svn

我正在使用带有 Eclipse 的 Subclipse 从我们的存储库中检出 java 项目。签出项目时，Subclipse 要求我确定它是哪种项目类型，以便 eclipse 可以最好地将它呈现给我。我想知道是否有任何经验法则可以解决这个问题？与存储库中的大多数文件一样，项目定义文件不会在存储库中备份。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T18:28:21.437

我不知道是否有任何一般的经验法则，但经验将是一个重要因素。了解项目或查看源代码应该有助于缩小选择范围。这样做应该回答这些问题：语言？项目类型（webapp、库、桌面应用程序等）？询问其他开发人员正在做什么或已经做什么（使用该特定代码库）。如果所有其他方法都失败了，试错也可以。

关于版本控制中的 IDE 文件的说明：我个人不相信这样做。看到[这个](http://arhipov.blogspot.com/2012/07/ide-project-files-in-version-contro-yes.html)。

# c++ - c++ double free or corruption (fasttop) -- 不确定错误在哪里

> ID：13182396
> 
> 赞同：0
> 
> 时间：2012-11-01T17:28:58.273
> 
> 标签：c++, valgrind

基于 valgrind，我相信我的错误源于这些人，因为错误发生在我将一个新集合分配给另一个集合之后。Set Z -> A^B（返回 Set 的交集运算）。我只是不确定我做错了什么，任何帮助将不胜感激！

```
Set::~Set()
{
        Cap = 0;
        Num = 0;
        delete [] Pool;
        Pool = NULL;
}
Set::Set(const Set &A)
{
        Cap = A.capacity();
        Num = A.size();
        Pool = A.Pool;
}
Set& Set::operator=(const Set &X)
{
        Cap = X.capacity();
        Num = X.size();
        Pool = X.Pool;
        return *this;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:30:55.920

您有一个动态分配的数组`Pool`，您在复制构造函数和赋值运算符中进行浅拷贝。因此，您将有多个对象试图删除同一个数组。

您需要制作 的“深拷贝” `Pool`，即创建一个新的动态分配数组，其中包含原始元素的副本。为此，您需要知道原始数组的大小。最简单的解决方案是使用 an`std::vector`代替。那么您甚至不需要提供自己的复制构造函数和赋值运算符。编译器合成的就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T19:40:28.797

所以你们没事。但是对于和我有同样问题的人来说，这是我为解决它所做的。

```
Pool = new int[A.capacity()];
*Pool = *A.Pool;
Num = A.size();
Cap = A.capacity(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T17:36:53.703

您正在执行浅拷贝，其结果是拷贝中涉及的源对象和目标对象共享对单个内存块的相同引用。自然，当这两个对象被销毁时，第一个对象会`delete[]`占用这块内存，第二个对象也会这样做，从而导致“双重释放”。

您可以`Pool`在副本的目的地分配一个新的然后使用`memcpy`（或类似的）复制内容，或者使用现有的容器（例如 a `std::vector<>`）来存储池的内容并依赖标准库的复制实现。如果一个浅拷贝真的是你想要的，`Pool`两个实例共享相同的，你可以使用某种共享句柄到内存池（参见[这个](https://stackoverflow.com/questions/9876279/usage-of-stdshared-ptr)使用 a`std::shared_ptr`包装数组的例子）。

# android - 多线程应用程序中的同步阻塞

> ID：13182397
> 
> 赞同：2
> 
> 时间：2012-11-01T17:29:00.140
> 
> 标签：android, service, input, concurrency, synchronized

下面你会看到一些运行良好的代码 - 但只有一次。它应该阻塞，直到 runOnUIThread 完成。它确实如此，当它第一次运行时被调用。但是当第二次调用时，它一直运行到最后，然后runOnUIThread开始运行。可能是，第一次运行方法后，调用它的线程仍然有锁，当它第二次调用方法时，它运行了。这是正确的吗？我能做些什么来解决这个问题？还是时间问题，第二次调用者先拿到锁？

```
static Integer syn = 0;
@Override 
public String getTanFromUser(long accid, String prompt) {
    // make parameters final
    final long accid_int = accid;
    final String prompt_int = prompt;
    Runnable tanDialog = new Runnable() {
        public void run() {
            synchronized(syn) {
                tanInputData = getTANWithExecutionStop(TransferFormActivity.this);
                syn.notify() ;
            }
        }
    };
    synchronized(syn) {
        runOnUiThread(tanDialog);
        try {syn.wait();} 
        catch (InterruptedException e) {} 
    }
    return tanInputData;
} 
```

背景：调用此方法的线程是绑定服务中的异步任务，该服务在后台与银行进行交易。银行不定期发送用户验证请求（验证码、控制问题、密码请求等），并且服务必须显示一些对话，以针对前台活动的弱引用回调。由于该服务正在执行多个嵌套的 while 循环，因此同步显示对话框比停止重新启动服务更容易（保存/恢复状态数据太复杂）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T18:33:16.157

如果使用`Callable`内部 a`FutureTask`而不是 a`Runnable`效果更好，您可以尝试。据我了解，这种组合旨在提供线程的返回值。

```
public String getTanFromUser(long accid, String prompt) {
    // make parameters final
    final long accid_int = accid;
    final String prompt_int = prompt;
    Callable<String> tanDialog = new Callable<String>() {
        public String call() throws Exception {
            return getTANWithExecutionStop(TransferFormActivity.this);
        }
    };
    FutureTask<String> task = new FutureTask<String>(tanDialog);
    runOnUiThread(task);
    String result = null;
    try {
        result = task.get();
    }
    catch (InterruptedException e) { /* whatever */ }
    catch (ExecutionException e) { /* whatever */ }
    return result;
} 
```

A[`Callable`](http://developer.android.com/reference/java/util/concurrent/Callable.html)类似于 a`Runnable`但有返回值。

A[`FutureTask`](http://developer.android.com/reference/java/util/concurrent/FutureTask.html)进行同步并等待结果。类似于您的`wait()`/ `notify()`。`FutureTask`也实现`Runnable`了，所以它可以用于`runOnUiThread`.

# ios - 如何摆脱 UIAlertView 半透明？

> ID：13182399
> 
> 赞同：1
> 
> 时间：2012-11-01T17:29:19.027
> 
> 标签：ios, cocoa-touch, uialertview

我可以在不使用私有方法等的情况下获得对 UIAlertView 的 backgroundImageView 的引用。但是我的 alpha 设置为 1.0 被忽略了。控件仍然有点半透明。

你能帮我吗？

更新：我很抱歉。设计团队为我提供了一个已经具有一定透明度的图形资产。:(

所以实际上，一旦你获得对背景视图的引用。您可以根据需要设置其 alpha。希望至少这些信息会对某人有所帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T17:40:23.943

Apple 使用的图像已经是透明的，而不是显示它的视图。因此，您将无法“修复”此问题。

一种解决方法可能是在其下方放置另一个具有相同圆角的蓝色视图。

# sql - 将表从一个数据库移动到另一台服务器

> ID：13182402
> 
> 赞同：0
> 
> 时间：2012-11-01T17:29:32.467
> 
> 标签：sql, sql-server, sql-server-2008-r2

我有一张桌子`tbl_Question`在`MyDatabase`。`MySqlServer`我想把那张桌子移到`MyDB_2`on `MyLocalSqlServer`。

我怎样才能做到这一点？

我正在使用 SQL Server 2008 R2 和 Microsoft SQL Server Management Studio 10.50.1617.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:14:24.720

有几种方法可以做到这一点。需要考虑的是权限，我假设您有权执行以下任何一项。

将表从第一个数据库导出到另一个： [导出表](http://msdn.microsoft.com/en-us/library/ms140052.aspx)

您可以从一个表到另一个表执行 SQL 插入： [SQL 插入](http://blog.sqlauthority.com/2009/07/29/sql-server-2008-copy-database-with-data-generate-t-sql-for-inserting-data-from-one-table-to-another-table/)

# google-fusion-tables - 是否可以查询应用了行布局过滤器的融合表

> ID：13182403
> 
> 赞同：1
> 
> 时间：2012-11-01T17:29:34.677
> 
> 标签：google-fusion-tables

我将整个表作为 JSON 调用返回，没问题。没有存储过程之类的东西，我将行/汽车布局视为唯一的过滤机制......是否可以查询过滤后的行布局（例如：1HqI7qIUMB-_52YHwWULUkF5LrnM5Ocp5OlYOiwQ#rows:id=5）？当然，我可以在 SQL WHERE 子句中应用相同的过滤器……但如果我不必这样做，为什么？当我在当前查询上应用“#rows:id=5”时，没有返回任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T05:06:28.513

目前无法通过 API 获取特定行布局中的过滤器；你只需要复制你所说的SQL。不过，这是一个有趣的想法，所以我建议使用[问题跟踪器](http://code.google.com/p/fusion-tables/)提交功能请求。

杆

# javascript - 位置：绝对元素未正确定位

> ID：13182405
> 
> 赞同：1
> 
> 时间：2012-11-01T17:29:44.003
> 
> 标签：javascript, jquery, css

我正在创建我的第一个 jQuery 插件，并且有一个工作示例（参见[http://tapmeister.com/test/selector.html](http://tapmeister.com/test/selector.html)）和下面的脚本。几天来，我一直在努力定位一个元素。

所需的外观和功能从显示一些文本和文本右侧的可选向下箭头开始。单击后，文本/箭头将替换为选项列表，当前选定的选项突出显示并位于原始文本的相同位置。单击一个选项使其成为当前选定的选项，并启动用户定义的回调，单击任何其他空间将关闭对话框。

该插件替换了原始的选择元素，我希望保留它是内联的还是块状的。但是，当使它们内联时， position:absolute`<ul class="selectIt-list">`弹出窗口不会出现在其关联的 text 上方`<span class="selectIt-text">`。由于 span text 和 ul popup 都在 position:relative `<div class="selectIt">`，为什么它位于最左边？

作为旁注，我这样做的一个主要原因是为了学习关于如何构建插件的一致模式。我强烈地将我的方法建立在[http://docs.jquery.com/Plugins/Authoring](http://docs.jquery.com/Plugins/Authoring)上（我不应该有什么理由吗？）。我希望有人可以查看它，确认我是否正确解释了如何构建插件，并提供任何建议。我也不确定我是否真的得到了整个命名空间的东西。也许我应该将此作为一个单独的问题发布？但我不知道要求代码批评是否合适。

谢谢！

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"> 
    <head> 
        <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1" /> 
        <title>Testing</title>  
        <script src="http://code.jquery.com/jquery-latest.js"></script> 
        <style type="text/css">

            /* CSS associated with plugin */

            div.selectIt {
                position:relative;
            }

            span.selectIt-text {
                color: #2C46B7;
                cursor: pointer;
                font-family: Verdana;
                font-size: 10px;
                display:inline;
            }

            span.selectIt-text,
            ul.selectIt-list {
                padding: 7px 3px 5px;
            }

            ul.selectIt-list {
                display:none;
                margin:0px;
                position: absolute;
                background-color: #FFFFFF;
                border: 1px solid #B3B4A7;
                z-index: 50;
                box-shadow: 3px 1px 6px #505050;
            }

            ul.selectIt-list li {
                background-color: #FFFFFF;
                color: #393926;
                list-style-type: none;
                font-family: Verdana;
                font-size: 10px;
                margin-bottom: 2px;
                padding-left: 2px;
                padding-right: 2px;
            }
            ul.selectIt-list li.selectIt-hover {
                background-color: #DFDED8;
                color: #393926;
            }
            ul.selectIt-list li.selectIt-selected {
                background-color: #737060;
                color: #FFFFFF;
                cursor: default;
            }

            /* CSS Not associated with plugin */

            ul.myList > li {
                list-style-type: none;
                display:inline;
            }
            #horizontalList select.mySelect {
                display:inline;
            }
            #verticalList select.mySelect {
                display:block;
            }
            span.label {
                color: rgb(57, 57, 38);
                font-family: Verdana;
                font-size: 10px;
                font-weight: bold;
            }
            span.selectIt-text {
                background-image: url("dropdown_arrow_blue.gif");
                background-position:right center; 
                background-repeat: no-repeat;
                padding-right: 10px; /*Override padding-right to allow for image*/
            }

        </style> 

        <script> 
            /*
            * jQuery SelectIT
            * Copyright 2012 Michael Reed
            * Dual licensed under the MIT and GPL licenses.
            * 
            */
            (function( $ ){

                var methods = {
                    init : function( options ) {
                        //console.log('init');

                        // Create some defaults, extending them with any options that were provided
                        var settings = $.extend({
                            'class' : null, //Applies custom class so user may override
                            'extraWidth' : 0,  //Extra space to add to width to allow for user image css
                            'click' : function(){}   //Some user defined code.
                            }, options  || {}); //Just in case user doesn't provide options

                        //Apply events that should only happen once (unlike what is done by http://docs.jquery.com/Plugins/Authoring#Events. Why did they do it that way?)
                        $(document).on('click.selectIt',methods.close);

                        return this.each(function(){

                            var $t = $(this),
                            data = $t.data('selectIt');

                            //Replace element
                            var list = $('<ul/>', {'class': "selectIt-list" }),
                            length,
                            max=0;
                            $t.find('option').each(function(i){
                                var $this=$(this),
                                text=$this.text(),
                                length = parseInt($this.css('width'));
                                max = length > max ? length : max;
                                list.append( $('<li/>', {text: text}))
                            });
                            max=max+settings.extraWidth;
                            list.css('width',max+'px');

                            var selectIt = $('<div/>', {class:"selectIt"+((settings.class)?' '+settings.class:'')}) //Didn't work to display same as original element: display:$t.css('display')
                            .append($('<span/>', {class:'selectIt-text',text:$t.find(":selected").text()}))
                            .append(list)
                            .css({display:$t.css('display')});  //Set to same as original element

                            //Apply events
                            selectIt.on('click.selectIt','span.selectIt-text',methods.open);
                            selectIt.on('mouseenter.selectIt','ul.selectIt-list li',methods.mouseenter);
                            selectIt.on('mouseleave.selectIt','ul.selectIt-list li',methods.mouseleave);
                            selectIt.on('click.selectIt','ul.selectIt-list li',methods.click);

                            // If the plugin hasn't been initialized yet.  Why?
                            if ( ! data ) {
                                // Do more setup stuff here
                                $t.data('selectIt', {
                                    target : $t,     //Not really sure where this will be used
                                    selectIt : selectIt,  //Will be used when removing in destroy method
                                    settings: settings  //Save here so other methods have access
                                });

                            }
                            $t.hide().after(selectIt);
                        });
                    },

                    destroy : function(e) {
                        //console.log('destroy');
                        return this.each(function(){
                            var $t = $(this);
                            $t.off('.selectIt'); //Removes any events in selectIt namespace
                            $t.data('selectIt').selectIt.remove();   //Removes element from page
                            $t.removeData('selectIt');   //Removes data in selectIt namespace
                            //Should the original element be made visible?
                        })
                    },

                    open : function(e) {
                        //console.log('open');
                        methods.close();
                        var $t=$(this),
                        $p=$t.parent(),
                        index=$p.prev().prop("selectedIndex"),
                        list=$p.find('ul.selectIt-list').show();
                        list.find('li.selectIt-selected').removeClass('selectIt-selected');
                        list.find('li').eq(index).addClass('selectIt-selected');
                        var top = 0 - list.find('li').eq(index).position().top;
                        list.css({top: top});
                        e.stopPropagation();    //Don't trigger documents click
                    },

                    //If this is all I am doing, can change to just using CSS psudo class.
                    mouseenter : function(e) {
                        $(this).addClass('selectIt-hover');
                    },
                    mouseleave : function(e) {
                        $(this).removeClass('selectIt-hover');
                    },

                    click : function(e) {
                        //console.log('click');
                        var $t=$(this);
                        if(!$t.hasClass('selectIt-selected'))
                        {
                            var $p=$t.parent(),
                            $pp=$p.parent(),
                            select=$pp.prev(),
                            index=$t.index(),
                            option=select.find('option').eq(index),
                            value=(value=option.val())?value:option.text();
                            select.val(value).prop('selectedIndex',index);
                            $pp.find('span.selectIt-text').text($t.text());
                            select.data('selectIt').settings.click.call(this,value);
                        }
                    },

                    close : function(e) {
                        //console.log('close');
                        $('div.selectIt').find('ul.selectIt-list').hide().parent();//.find('span.selectIt-text').show();
                    },

                    update : function(content) {alert('When will this type of method be used?');}
                };

                $.fn.selectIt = function(method) {
                    if ( methods[method] ) {
                        return methods[method].apply( this, Array.prototype.slice.call( arguments, 1 ));
                    } else if ( typeof method === 'object' || ! method ) {
                        return methods.init.apply( this, arguments );
                    } else {
                        $.error( 'Method ' +  method + ' does not exist on jQuery.selectIt' );
                    }    
                };

            })( jQuery );

            $(function(){
                $('select.mySelect').selectIt({
                    //'class' : 'whatever',
                    'extraWidth' : 0,
                    'click':function(value){
                        switch(value)
                        {
                            case 'first':console.log('Do something first');break;
                            case 'second':console.log('Do something second');break;
                            case 'third':console.log('Do something third');break;
                            default: console.log('Do something default');
                        }
                    }
                });

                $('#horizontalList button.destroy').click(function(){
                    $('#horizontalList select.mySelect').selectIt('destroy');
                });

               $('#verticalList button.destroy').click(function(){
                    $('#verticalList select.mySelect').selectIt('destroy');
                });
            });
        </script>
    </head>

    <body>

        <div id="horizontalList">
            <h1>Horizontal List</h1>

            <ul class="myList">
                <li>
                    <span class="label">Label</span>
                    <select class="mySelect">
                        <option value="first">First</option>
                        <option value="second" selected="selected">Second</option>
                        <option>Third</option>
                    </select>
                </li>
                <li>
                    <span class="label">Some Label</span>
                    <select class="mySelect">
                        <option value="first">First</option>
                        <option value="second" selected="selected">Second</option>
                        <option value="third">Third</option>
                    </select>
                </li>
                <li>
                    <span class="label">Some Label</span>
                    <select class="mySelect">
                        <option value="">First</option>
                        <option value="second">Second</option>
                        <option value="third">Third</option>
                    </select>
                </li>
            </ul>
            <button class="destroy">Destroy</button>
        </div>
        <div id="verticalList">
            <h1>Vertical List</h1>

            <ul class="myList">
                <li>
                    <span class="label">Label</span>
                    <select class="mySelect">
                        <option value="first">First</option>
                        <option value="second" selected="selected">Second</option>
                        <option>Third</option>
                    </select>
                </li>
                <li>
                    <span class="label">Some Label</span>
                    <select class="mySelect">
                        <option value="first">First</option>
                        <option value="second" selected="selected">Second</option>
                        <option value="third">Third</option>
                    </select>
                </li>
                <li>
                    <span class="label">Some Label</span>
                    <select class="mySelect">
                        <option value="">First</option>
                        <option value="second">Second</option>
                        <option value="third">Third</option>
                    </select>
                </li>
            </ul>
            <button class="destroy">Destroy</button>
        </div>
    </body> 
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T17:49:19.240

为了定位您所描述的内容，我强烈建议使用**jQuery 的“my at of”**定位。这是一个巨大的头痛保护程序！

[http://docs.jquery.com/UI/API/1.8/Position](http://docs.jquery.com/UI/API/1.8/Position)

应用于您的示例，它看起来像：

```
//PLACE INSIDE YOUR EVENT HANDLER
$(".selectIt-list").position({
    my: "bottom center",
    at: "top center",
    of: ".selectIt-text",
  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T17:52:26.280

您的 JQuery [第 173 行] 中有一行：

```
list.css({top: top}); 
```

在它下面插入这一行：

```
list.css({left: $(this).position().left}); 
```

# java - 有没有办法在继承中设置构造函数

> ID：13182412
> 
> 赞同：0
> 
> 时间：2012-11-01T17:30:03.523
> 
> 标签：java, bluej

所以我想知道是否有办法为bluej上的构造函数设置某些东西，比如将布尔值设置为true而不询问它的参数

```
public SaleItem(String description,
                double weight,
                boolean canBePickedUp,
                double cost)
{

    // initialise instance variables
    super(description,weight,(canBePickedUp = true));
    this.cost = cost;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T17:32:52.660

Java 不允许未指定参数的默认值。您可以执行以下操作

```
public SaleItem(String description, double weight, double cost) {

    // initialise instance variables
    super(description,weight,true);
    this.cost = cost;
} 
```

您可以使用 canBePickedUp 参数执行第二个构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T17:34:19.960

**如果您想始终初始化`canBePickedUp`为`true`，则**

```
 public SaleItem(String description, double weight, 
                                             boolean canBePickedUp, double cost) {
     // initialise instance variables
      super(description,weight,true);
      this.cost = cost;
 } 
```

**只要 super 是构造函数中的第一条语句就可以了。**

# vba - VBA 代码错误：Excel 中的图表标题

> ID：13182413
> 
> 赞同：1
> 
> 时间：2012-11-01T17:30:09.510
> 
> 标签：vba, excel, excel-2007

我有一个 sas 代码，它在 excel 文件中写入文本（让调用是“sas 文本”），然后 VBA 在 excel 中创建图形并复制标题中的“sas 文本”。当“sas 文本”长度较小时，VBA 工作正常，但只要“SAS 文本”长度很长，VBA 就会给出运行时错误 - “VBA，对象错误的方法“文本”。

我的代码是：

```
Sub FormatChart()
Let Title = Sheets("Sheet1").Cells(2, 1)
Let Title1 = Sheets("Sheet1").Cells(2, 2)
Let Title2 = Sheets("Sheet1").Cells(2, 3)
Let Title3 = Sheets("Sheet1").Cells(2, 4)
    ActiveSheet.ChartObjects("Chart 1").Activate
    ActiveChart.SeriesCollection(1).Select
    ActiveSheet.ChartObjects("Chart 1").Activate
    ActiveChart.Axes(xlCategory).Select
    ActiveChart.Axes(xlCategory).ReversePlotOrder = True
    ActiveSheet.ChartObjects("Chart 1").Activate
    ActiveChart.ChartTitle.Select
    ActiveSheet.ChartObjects("Chart 1").Activate
    ActiveChart.ChartTitle.Text = Title & Title3 & Chr(10) & Title1 & "to " & Title2 & ": People with 25 or more visits" & Chr(10) & "Source: www.xxxxxxxxxxx.xxx.xxx"
    With ActiveChart.ChartTitle.Font
    .Name = "Arial"
    .FontStyle = "Bold"
    .Size = 8
    End With
    With ActiveChart.Axes(xlCategory).TickLabels.Font
    .Name = "Arial"
    .FontStyle = "Regular"
    .Size = 7
    End With
    With ActiveChart.Axes(xlValue).TickLabels.Font
    .Name = "Arial"
    .FontStyle = "Regular"
    .Size = 7
    End With
    With ActiveChart.PlotArea.Interior
    .ColorIndex = 2
    .PatternColorIndex = 1
    .Pattern = xlSolid
    End With
    Range("S4").Select
    ActiveWindow.SmallScroll Down:=48
    ActiveSheet.ChartObjects("Chart 1").Activate
    ActiveChart.Legend.Select
    Selection.delete
    ActiveWindow.SmallScroll Down:=45
    ActiveSheet.ChartObjects("Chart 1").Activate
    ActiveChart.PlotArea.Select
    ActiveSheet.ChartObjects("Chart 1").Activate
    ActiveWindow.SmallScroll Down:=-45
    ActiveSheet.ChartObjects("Chart 1").Activate
    ActiveChart.Axes(xlValue).MajorGridlines.Select
    ActiveSheet.ChartObjects("Chart 1").Activate
    ActiveWindow.SmallScroll Down:=-54
    ActiveSheet.ChartObjects("Chart 1").Activate
    ActiveChart.ChartArea.Select
    ActiveChart.ChartArea.Width = 500
    ActiveChart.ChartArea.Height = 1000
    ActiveSheet.ChartObjects("Chart 1").Activate
    ActiveSheet.ChartObjects("Chart 1").Activate
    ActiveChart.Axes(xlValue).MajorGridlines.Select
    ActiveSheet.ChartObjects("Chart 1").Activate
    ActiveSheet.ChartObjects("Chart 1").Activate
    ActiveSheet.ChartObjects("Chart 1").Activate
    ActiveSheet.ChartObjects("Chart 1").Activate
    ActiveSheet.ChartObjects("Chart 1").Activate
    ActiveChart.Axes(xlValue).Select
    ActiveSheet.ChartObjects("Chart 1").Activate
    ActiveChart.Axes(xlValue).MajorGridlines.Select
    ActiveSheet.ChartObjects("Chart 1").Activate
    ActiveSheet.ChartObjects("Chart 1").Activate
    ActiveChart.Axes(xlValue).Select
    ActiveChart.Axes(xlValue).MinimumScale = 0
    ActiveChart.Axes(xlValue).MaximumScale = 100
    ActiveChart.Axes(xlValue).MajorUnit = 20
    ActiveChart.Axes(xlValue).MajorUnit = 10
        With ActiveChart.SeriesCollection(1)
        .Interior.Color = RGB(0, 51, 153)
    End With
        ActiveSheet.ChartObjects("Chart 1").Activate
        Dim c As Chart
Dim s As Series
Dim iPoint As Long
Dim nPoint As Long

Set c = ActiveChart
Set s = c.SeriesCollection(1)

nPoint = s.Points.Count
For iPoint = 1 To nPoint
    If s.XValues(iPoint) = "MINNESOTA STATE AVERAGE " Then
        s.Points(iPoint).Interior.Color = RGB(80, 116, 77)
    End If
        If s.XValues(iPoint) = "NATIONAL AVERAGE " Then
        s.Points(iPoint).Interior.Color = RGB(80, 116, 77)
    End If
Next iPoint

        ActiveSheet.ChartObjects("Chart 1").Activate
    Selection.Cut
    Sheets("Chart1").Select
    ActiveChart.Paste
End Sub 
```

在调试时，它会突出显示这行代码

```
"        ActiveChart.ChartTitle.Text = Title & Title3 & Chr(10) & Title1 & "to " & Title2 & ": People with 25 or more visits" & Chr(10) & "Source: www.xxxxxxxxxxx.xxx.xxx"
" 
```

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T17:34:58.840

ChartTitle.Text 限制为 255 个字符。

当 x = 256 时，通过实验确认以下失败。

```
Sub Macro2()
'
    Dim x as long
    With ActiveChart
        .HasTitle = True
        For x = 1 To 500
        .ChartTitle.Text = Characters(x)
        Next
    End With
End Sub
Function Characters(x As long)
dim charCount as long
For charCount = 1 To x
    Characters = Characters & "."
Next
End Function 
```

我的建议是截断你的标题`ChartTitle.Text = Left("your built string",255)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T17:43:11.867

Excel 中的一些内容被限制为 255 个字符，因为是（旧式）Pascal 计数字符串，长度在第一个字节中。

要解决此问题，您可以叠加 a`TextBox`并使用您的标题填充它。请注意，互动时仍有255个字符的时间限制，但您可以建立。

以下将不起作用：

```
Sub WillNotWork()
    Const LongString As String = _
         "Pi = 3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164..."
    Dim title As TextFrame

    Set title = ActiveSheet.Shapes("Text Box 1").TextFrame
    title.Characters.Text = LongString 'fails silently
End Sub 
```

但这将：

```
Sub Works()
    Const LongString As String = _
         "Pi = 3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164..."
    Dim title As TextFrame

    Set title = ActiveSheet.Shapes("Text Box 1").TextFrame
    title.Characters.Text = ""
    For i = 0 To Len(LongString) \ 255
        title.Characters(i * 255 + 1).Insert Mid$(LongString, 255 * i + 1, 255)
    Next
End Sub 
```

# php - 如何使用文件上传器类和用户模型将 img 路径写入 MySQL

> ID：13182416
> 
> 赞同：1
> 
> 时间：2012-11-01T17:30:16.890
> 
> 标签：php, codeigniter

我正在尝试向我的项目添加一个包含已上传文件的 URL 的最终字段，如果有人能指出我扩展我的模型的写入方向吗？我已经包含了我的 codeIgniter 模型和控制器代码。

控制器：

```
class Canvas extends CI_Controller {
   function __construct() {
    parent::__construct();
                  $this->load->helper(array('form', 'url'));

}

function index() {
            $vars = array();
            //$this->load->library('ChromePhp');
            //$this->ChromePhp->log('test');     
            //$this->ChromePhp->log($_SERVER);

            // using labels
           // foreach ($_SERVER as $key => $value) {
             //   $this->ChromePhp->log($key, $value);
          //  }
            // warnings and errors
            //$this->ChromePhp->warn('this is a warning');
            //$this->ChromePhp->error('this is an error');
            $this->load->library('FacebookConnect');
            $facebook=$this->facebookconnect->connect();
            $vars['facebook'] = $facebook;
            $user = $vars['user'] = $facebook->getUser();
            $this->load->model('Users_Model');
            // user already set up. Show thank you page
            if($user != 0  && sizeof($_POST)>0) {
                $this->do_upload();
                $this->iterate_profile ($vars['user'],false,$_POST);
                $this->load->view('canvas',$vars);
            } else {
            // user not set, show welcome message
                $this->load->view('canvas',$vars);
            }

}
    function do_upload()
    {
        $config['upload_path'] = './uploads/';
        $config['allowed_types'] = 'gif|jpg|png';
        $config['max_size'] = '20048';
        $config['max_width']  = '10624';
        $config['max_height']  = '10268';
        $config['file_name']  = date("Y_m_d H:i:s");

        $this->load->library('upload', $config);

        if ( ! $this->upload->do_upload())
        {
            $error = array('error' => $this->upload->display_errors());

        }
        else
        {
            $data = array('upload_data' => $this->upload->data());

            $this->load->view('upload_success', $data);
        }
    }

    function thank_you() {
            $this->load->view('thank_you',$vars);
    }

    function remove() {
            $vars = array();
            $this->load->library('FacebookConnect');
            $facebook=$this->facebookconnect->connect();
            $vars['facebook'] = $facebook;
            $vars['user'] = $facebook->getUser();
            $this->load->model('Users_Model'); 
            if($vars['user'] == 0) {
                // user not set, redirect
                redirect('/', 'refresh');
            } else {
                // user already set up. Remove
                $this->load->model('Users_Model'); 
                $this->Users_Model->remove($vars['user']);
            }

            $this->load->view('removed',$vars);
    }

    protected function iterate_profile ($user,$breadcrumb,$item) {

        foreach($item as $key => $value) {
            if(is_array($value)) {
                $this->iterate_profile($user,$key,$value);
            }
            else {
                if($breadcrumb) {
                    //echo '[' . $breadcrumb . '_' . $key . ']= ' . $value . ' <br />';
                    $key = $breadcrumb . '_' . $key;
                }

                if( ! $this->Users_Model->exists($user,$key)) {
                    // does not exist in the database, insert it
                    $this->Users_Model->add($user,$key,$value);
                } else {
                    $this->Users_Model->update($user,$key,$value);
                }
            }
        }
    } 

} 
```

模型：

```
class Users_Model extends CI_Model {

protected $_name = 'users';

function add($id,$key,$value) {
    $data = array(
       'id' => $id,
       'name' => $key,
       'value' => $value
    );

    return $this->db->insert($this->_name, $data); 
}
function update($id,$key,$value) {
    $data = array(
       'value' => $value
    );

    $this->db->where(array(
       'id' => $id,
       'name' => $key
    ));
    return $this->db->update($this->_name, $data); 
}

function exists($id,$key=null) {
    if($key == null) {
        $this->db->where(array(
        'id' => $id
        ));
    } else {
        $this->db->where(array(
        'id' => $id,
        'name' => $key
        ));  
    }

    $query = $this->db->get($this->_name);
    if($query->num_rows() > 0) {
        return true;
    }
    return false;
}

function remove($id) {
    $data = array(
       'id' => $id,
    );

    return $this->db->delete($this->_name, $data); 
}

function all() {
    $query = $this->db->get($this->_name);
    $results = array();
    if($query->num_rows() > 0) {
        foreach($query->result() as $row) {
            $results[]=$row;
        }
    } 
    return $results;  
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:48:12.637

我认为这个问题不是很清楚。但对我来说，您似乎需要将图像路径存储在数据库中。否则，您将需要在上传路径上执行读取目录，然后对图像执行某些操作。

# tree - 决策树结果

> ID：13182418
> 
> 赞同：-2
> 
> 时间：2012-11-01T17:30:21.537
> 
> 标签：tree, machine-learning, decision-tree

对于所有相同的条件，决策树是否会产生不同的类标签？举个例子，一个30岁的低收入人士，**信用卡申请接受和拒绝？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T23:50:48.623

The label should be consistent in the prediction phase after you pre-build your decision tree and fix the parameters.

# php - 在 PHP 中获取特定数据

> ID：13182419
> 
> 赞同：0
> 
> 时间：2012-11-01T17:30:28.027
> 
> 标签：php, variables

使用 PHP 获取特定数据的方法是什么。在这种情况下，我想获取一些由`<span class="s">`第一个`<b>`HTML 标记包裹的文本。
假设一个 HTML 源代码是：

```
Once there was a king <span class="s"> May 3  2009 <b> ABC Some Text </b> Some photo or video</span> but they have... 
```

所以，在这里我想在一个变量中获取那些过滤的数据：`$fdata = "May 3 2009";`
因为，`May 3 2009`被`<span class="s">`第一个`<b>`HTML 标记包装。
我将在简单的 PHP HTML DOM 解析中使用它。那么，有什么想法或示例可以过滤这些文本并将其放入变量中吗？任何想法都会有很大帮助。

*如果您在[这里](https://stackoverflow.com/questions/13177740/dynamically-exclude-content-in-php-simple-html-dom-parser)发现了重复的问题，则说明它不是更具体的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:34:54.350

使用简单的 HTML DOM [http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)

或[http://php.net/manual/en/domdocument.loadhtml.php](http://php.net/manual/en/domdocument.loadhtml.php)

或者您也可以使用任何其他库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T17:40:23.717

如果您使用的是简单的 html dom 解析器，您将像这样抓取您要定位的元素：

```
$ret = $html->find('span class="s"'); 
```

这只是一个基本示例，但它应该让您朝着正确的方向前进。

如果您需要找到一个非常具体的实例，您可以使用以下内容：

```
$ret = $html->find("#div1", 0)->children(1)->children(1)->children(2)->id; 
```

# c# - 接口和抽象类中的 XML 属性

> ID：13182420
> 
> 赞同：6
> 
> 时间：2012-11-01T17:30:36.860
> 
> 标签：c#, interface, xml-serialization, abstract, custom-attributes

我今天发现了一件让我很困惑的事情：

1\. 如果我有这个：

```
public interface INamed
{
    [XmlAttribute]
    string Name { get; set; }
}

public class Named : INamed
{
    public string Name { get; set; }
} 
```

它给出以下输出（名称属性序列化为元素）：

```
<Named>
  <Name>Johan</Name>
</Named> 
```

2\. 如果我有这个：

```
public abstract class NamedBase
{
    [XmlAttribute]
    public abstract string Name { get; set; }
}

public class NamedDerived : NamedBase
{
    public override string Name { get; set; }
} 
```

XmlSerializer 抛出 System.InvalidOperationException

> 成员“NamedDerived.Name”隐藏了继承的成员“NamedBase.Name”，但具有不同的自定义属性。

我用于序列化的代码：

```
[TestFixture] 
public class XmlAttributeTest
{
    [Test]
    public void SerializeTest()
    {
        var named = new NamedDerived {Name = "Johan"};
        var xmlSerializer = new XmlSerializer(named.GetType());
        var stringBuilder = new StringBuilder();
        using (var stringWriter = new StringWriter(stringBuilder))
        {
            xmlSerializer.Serialize(stringWriter, named);
        }
        Console.WriteLine(stringBuilder.ToString());
    }
} 
```

我的问题是：

我做错了吗？如果是，在接口和抽象类中使用 xml 属性的正确方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T17:32:36.577

属性不会在覆盖的属性上继承。你需要重新声明它们。同样在您的第一个示例中，行为不是您在接口级别声明 XmlAttribute 的“预期”行为，但序列化的 xml 包含作为元素的值。所以接口中的属性被忽略，只有从实际类中获取的信息才重要。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-01T17:41:30.897

我认为你应该 xmlignore 你的抽象类属性

```
public abstract class NamedBase
{
    [XmlIgnore]
    public abstract string Name { get; set; }
}

public class NamedDerived : NamedBase
{
    [XmlAttribute]
    public override string Name { get; set; }
} 
```

# c# - 在编辑时禁用用户名验证

> ID：13182421
> 
> 赞同：1
> 
> 时间：2012-11-01T17:30:43.833
> 
> 标签：c#, asp.net, .net, asp.net-mvc, asp.net-mvc-4

我为唯一用户名创建了验证，现在我无法编辑我的用户。这是说用户名已经被使用，这是有道理的，因为它是由我试图编辑的用户使用的。我什至不想编辑用户名，但由于这个错误，我也无法编辑任何其他字段。

**如何为我的 EDIT 操作禁用唯一用户名验证？**

验证器

```
public override bool IsValid(object value)
{
    if (value == null) return false;
    FinanceDataContext _db = new FinanceDataContext();
    var user = _db.Users.ToList().Where(x => x.Username.ToLower() == value.ToString().ToLower()).SingleOrDefault();
    if (user == null) return true;
    return false;
} 
```

行动

```
[HttpPost]
[ValidateAntiForgeryToken]
public ActionResult Edit(User u)
{
    // Get user we want to edit
    var user = _db.Users.Where(x => x.ID == u.ID).SingleOrDefault();
    if (user == null) return HttpNotFound();

    // Set values and save changes
    user.Address = u.Address;
    if (!string.IsNullOrEmpty(u.Password)) user.Password = Infrastructure.Encryption.SHA256(u.Password);
    _db.SaveChanges(); // validation error

    return null;
} 
```

模型

```
public class User
{
    public int ID { get; set; }

    [Required]
    [UniqueUsername(ErrorMessage = "Username is already taken")]
    public string Username { get; set; }

    [Required]
    public string Password { get; set; }

    public string Address { get; set; }
} 
```

错误

> 一个或多个实体的验证失败。有关更多详细信息，请参阅“EntityValidationErrors”属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:44:05.883

在 UniqueUsername 属性的“AdditionalFields”参数中传递“ID”属性，所以我猜你的代码应该是这样的

**类属性：**

```
[Required]
[UniqueUsername(ErrorMessage = "Username is already taken", AdditionalFields = "ID")]
public string Username { get; set; } 
```

**验证动作：**

```
public ActionResult UniqueUsername(string userName, int id)
{
    FinanceDataContext _db = new FinanceDataContext();
    var user = _db.Users.ToList().SingleOrDefault(x => x.Username.ToLower() == value.ToString().ToLower() && x.ID != id);
    return Json(user == null, JsonRequestBehavior.AllowGet);
} 
```

希望这会有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T17:35:49.413

您能否将用户 ID 传递给 IsValid 方法并确保返回的用户没有相同的用户 ID？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T17:55:12.320

我想贡献一件事。

这段代码：

```
var user = _db.Users.ToList().Where(x => x.Username.ToLower() == value.ToString().ToLower()).SingleOrDefault(); 
```

不是执行的，因为当您执行 a 时，您会`ToList()`执行整个查询。在这种情况下，您正在做的是从数据库中检索所有用户，然后他们在内存中进行过滤。

我建议你这样做：

```
_db.Users.Where(x => x.Username.ToLower() == value.ToString().ToLower()).SingleOrDefault(); 
```

由于您只想检索一条记录，因此无需调用该`ToList()`方法。到最后就够`SingleOrDefault()`了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T18:09:13.223

通过将整个对象传递给我的验证器然后检查 id 和用户名来修复它。

```
public override bool IsValid(object value)
{
    var user = (User)value;
    if (user == null) return true;

    FinanceDataContext _db = new FinanceDataContext();
    var u = _db.Users.Where(x => x.Username.ToLower() == user.Username.ToLower() && x.ID != user.ID).SingleOrDefault();
    if (u == null) return true;
    return false;
} 
```

# appdynamics - 您如何显示“每个应用程序”显示不同值的 appdynamics 指标（仪表板上的图表）？

> ID：13182423
> 
> 赞同：1
> 
> 时间：2012-11-01T17:30:48.993
> 
> 标签：appdynamics

使用 appdynamics，可以轻松设置“聚合”来自不同节点的数据的指标。如果你想聚合一些日期和一些其他数据，在图表中显示为不同的线怎么办？那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T17:52:02.070

看起来您创建了指标，然后编辑仪表板，然后单击小部件-> 添加指标->（浏览，但选择“单个节点”而不是 JMX，然后选择您的指标。瞧。

# php - 无法检查 $_SESSION 变量

> ID：13182426
> 
> 赞同：-1
> 
> 时间：2012-11-01T17:31:07.327
> 
> 标签：php, session

你好我有问题：在 login.php 文件中我存储 $_SESSION['$myusername']; 我尝试检查 page.php 文件中的 SESSION 用户名，如果会话不存在，它将重定向回 l​​ogin.php。我尝试使用有效用户登录，但我重定向回 l​​ogin.php 我不知道问题出在哪里。

登录.php：

```
 <?php

$host="localhost"; // Host name
$username="root"; // Mysql username
$password=""; // Mysql password
$db_name="2"; // Database name

// Connect to server and select databse.
mysql_connect("$host", "$username", "$password")or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB");
if (isset($_POST['formsubmitted'])) {
    $error = array();//Declare An Array to store any error message 
};  
// username and password sent from form
$myusername=$_POST['myusername'];
$mypassword=$_POST['mypassword'];

// To protect MySQL injection (more detail about MySQL injection)
$myusername = stripslashes($myusername);
$mypassword = stripslashes($mypassword);
$myusername = mysql_real_escape_string($myusername);
$mypassword = mysql_real_escape_string($mypassword);

$sql="SELECT * FROM `members` WHERE username='$myusername' and password='$mypassword'";
$result=mysql_query($sql);

// Mysql_num_row is counting table row
$count=mysql_num_rows($result);

// If result matched $myusername and $mypassword, table row must be 1 row

if($count==1){

// Register $myusername, $mypassword and redirect to file "login_success.php"
//store data:
$_SESSION['$myusername'];

//next page:

header("location:page.php");
}

else {

include 'index.php';
$error[] = '<b><h5>Invalid Username or Password!</b>';

if(isset($error) && is_array($error))
{
   echo "<div class='content1'>" . implode("<br />", $error) . "</div>";
};

};
?> 
```

page.php：

```
<?php
    ob_start();
    session_start();
    if(!isset($_SESSION['$myusername']))
    {
         header("Location: login.php")
    }

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:35:21.770

在 Page.php 中，您不应在检查会话变量时包含 $：

```
if(!isset($_SESSION['$myusername'])) 
```

应该：

```
if(!isset($_SESSION['myusername'])) 
```

在 Login.php 中，您必须设置会话变量：

```
if($count==1){
  // Register $myusername, $mypassword and redirect to file "login_success.php"
  //store data:
  $_SESSION['$myusername'];
  //next page:
  header("location:page.php");
} 
```

应该：

```
if($count==1){
  // Register $myusername, $mypassword and redirect to file "login_success.php"
  //store data:
  $_SESSION['myusername'] = $myusername;
  //next page:
  header("location:page.php");
} 
```

Login.php 还需要在顶部调用 session_start()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T17:36:20.647

第一个问题在您的`login.php`页面中，您没有启动会话。添加`session_start()`到页面的开头。

其次，您永远不会为会话变量赋值。尝试：

```
$_SESSION['myusername'] = $myusername; 
```

注意，我还删除了`$`里面的会话密钥名称。因此，在您的`page.php`页面中，您还必须使用`isset($_SESSION['myusername'])`. 您可以始终保留`$`，但我不相信这就是您要使用的意思。

# zend-framework - Zend 框架中的 Dojo 对话框错误

> ID：13182427
> 
> 赞同：0
> 
> 时间：2012-11-01T17:31:08.433
> 
> 标签：zend-framework, dojo, dialog

我正在尝试在 Zend Framework 中创建一个 Dojo 对话框，但遇到了一些问题。我的视图代码如下所示：

```
<script type="text/javascript" src="<?= $this->baseUrl('/js/dojo-release-1.7.2/dojo/dojo.js')?>"
          data-dojo-config="async: true" dojoConfig = "parseOnLoad: true">
</script>
<script>       
    require(["dijit/registry", "dojo/ready", "dojo/dom", "dijit/Dialog", "dijit/form/Form"], 
    function(registry, ready, dom, Dialog){
        ready(function() {
           createDialog = function(titleText, contentText) {
              var node = dojo.byId("foobar"); 
              var myDialog = new Dialog({ title:"From Source Node" }, node);   
              myDialog.show();
           };
        });
    });
</script>
<body class="claro">
   <div data-dojo-type="dijit/Dialog" id="foobar"  title="Foo!" style="display: none">
     <p>I am some content</p>
   </div>
</body> 
```

加载对话框的按钮代码如下所示：

```
<button name="btnDialog" id="dialogbtn" type="button" onclick='createDialog();'>Open</button> 
```

第一次单击按钮时，对话框按预期打开，但是一旦关闭对话框并再次单击按钮，对话框就不会打开，并且我在控制台中收到以下错误。

> 尝试使用 id==foobar 注册小部件，但该 id 已注册。

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T09:33:08.453

弄清楚了。我认为表单解析不正确，因为 dojo-config 不正确。更改了javascript代码如下：

```
<script type="text/javascript" src="<?= $this->baseUrl('/js/dojo-release-1.7.2/dojo/dojo.js')?>"
          data-dojo-config="async: true, parseOnLoad:true">
</script>
<script>
    require(["dijit/registry", "dijit/Dialog"], function (registry)
    {
       createDialog = function createDialog()
       {
            registry.byId("foobar").show();
       }
    });
</script> 
```

和 div 如下：

```
<body class="claro">
  <div class="dijitHidden">
     <div data-dojo-type="dijit.Dialog" data-dojo-props="title:'Foo!'" id="foobar">
         <p>I am some content</p>
     </div>
  </div>
</body> 
```

现在对话框 dijit 已保存到注册表中，并且按预期工作

# sql - 能否使用 SQL 查询 AS/400 逻辑文件的 Select/Omit 条件？

> ID：13182431
> 
> 赞同：3
> 
> 时间：2012-11-01T17:31:19.073
> 
> 标签：sql, ibm-midrange

我需要能够使用 SQL 查找 AS/400 逻辑文件的 Select/Omit 标准。我不能使用 DSSELOMT。

通过查看 SYSTABLES 中的 SELECT_OMIT 列，我想出了如何查询逻辑文件是否具有 Select/Omit 标准。（[IBM i 目录表和视图](http://publib.boulder.ibm.com/infocenter/iseries/v6r1m0/index.jsp?topic=/db2/rbafzcatalogtbls.htm)）

但是，我不知道如何查询 Select/Omit 语句中使用的条件。如何使用 SQL 查看 Select/Omit 条件？如果不可能，你能引用一个来源吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:27:30.007

传统的方法是使用`DSPFD`命令，带有`TYPE(*SELECT) FILEATR(*LF) OUTPUT(*OUTFILE)`. 然后，您可以使用 SQL 从输出文件中读取选择省略条件。如果不能直接执行 CL 命令，可以将其放在存储过程或用户定义函数中。执行命令的其他选项可能可用，具体取决于您的进程运行的环境。

# asp.net - 如何将 .NET 3.5 混合模式 C++ 程序集加载到 4.0 Web 应用程序中？

> ID：13182432
> 
> 赞同：0
> 
> 时间：2012-11-01T17:31:21.473
> 
> 标签：asp.net, .net, visual-studio-2010, c++-cli, mixed-mode

我有一个 .NET 3.5 Web 应用程序（使用 VS2008 构建），我正在尝试将其移植到 .NET4.0 Web 应用程序（使用 VS2010 构建）。它主要包含纯托管 C# 程序集，但也包含混合模式 C++ 程序集。目前无法将代码移植到目标 .NET4，因此我想在 4.0 进程中运行所有 3.5 程序集。当它启动应用程序时，我在加载 CRT 时遇到错误...确切的错误（带有调试版本）是“无法找到程序集 'msvcm90d，版本 = 9.0.30729.1，文化 = 中性，PublicKeyToken = b03f5f7f11d50a3a'。 " 我已验证该程序集存在于我的机器上，并且在 v2.0 CLR 下运行时确实找到并成功加载了它。在 VS2008 和 VS2010 下编译时，程序集的托管清单和本机清单似乎是相同的，所以我

我已经像这样在配置文件中添加了启动配置选项，但没有区别：

```
<startup useLegacyV2RuntimeActivationPolicy="true">
  <supportedRuntime version="v4.0" />
</startup> 
```

# c++ - OpenGL中的部分透明HUD样式覆盖

> ID：13182433
> 
> 赞同：0
> 
> 时间：2012-11-01T17:31:24.690
> 
> 标签：c++, opengl, hud

我正在尝试制作一个在背景中显示红色旋转立方体的程序，上面覆盖有纹理四边形。

纹理是一个简单的 24 位位图，包含白色背景上的黑色单词“Hello World”。我希望白色背景是透明的，以便可以在覆盖层后面看到立方体。图像加载器检查每个像素的值并添加相关的 alpha 值以将图像转换为 32 位位图。

目前，我的程序使用黑色文本显示叠加层，但背景为红色，与立方体颜色相同。下面是用于初始纹理设置的代码：

```
if (bitmap->Load("test.bmp")) {
   glGenTextures(1, &texture);
   glBindTexture(GL_TEXTURE_2D, texture);
   glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
   glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
   glTexImage2D(GL_TEXTURE_2D, 0, 3, bitmap->GetWidth(), bitmap->GetHeight(),
      0, GL_RGBA, GL_UNSIGNED_BYTE, bitmap->GetPixelData());
} 
```

这就是我的全部显示功能，以防有任何干扰。

```
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
gluPerspective(40, 1, 0.1, 27.0);
glMatrixMode(GL_MODELVIEW);
glLoadIdentity();
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
glColor3f(1.0, 0.0, 0.0);
glTranslatef(0.0, 0.0, -1.1);
glRotatef(angle, 1.0, 1.0, 0.0);
glutSolidCube(0.1);

glMatrixMode(GL_PROJECTION);
glLoadIdentity();
glOrtho(0.0, 640, 480, 0.0, -1.0, 10.0);
glMatrixMode(GL_MODELVIEW);
glLoadIdentity();
glDisable(GL_CULL_FACE);

glClear(GL_DEPTH_BUFFER_BIT);

glEnable(GL_TEXTURE_2D);
glEnable(GL_BLEND);
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
glBindTexture(GL_TEXTURE_2D, texture);

glBegin(GL_QUADS);
   glTexCoord2d(0.0, 0.0); glVertex2f(0.0, 0.0);
   glTexCoord2d(1.0, 0.0); glVertex2f(320.0, 0.0);
   glTexCoord2d(1.0, 1.0); glVertex2f(320.0, 240.0);
   glTexCoord2d(0.0, 1.0); glVertex2f(0.0, 240.0);
glEnd();

glDisable(GL_BLEND);
glDisable(GL_TEXTURE_2D);

glFlush();
glutSwapBuffers(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:53:34.483

默认纹理环境是`GL_MODULATE`将当前颜色（来自立方体的红色）与传入的纹理值混合。

在渲染文本之前切换到`GL_DECAL`或执行。`glColor3ub(255,255,255)`

# php - 通过http在本地文件上的php file_get_contents

> ID：13182434
> 
> 赞同：1
> 
> 时间：2012-11-01T17:31:24.783
> 
> 标签：php, file-get-contents

```
<?php

error_reporting(E_ALL);

if(file_get_contents("http://localhost/antispam/img.php") == false)
    print 'Error';
else
    print 'Read successfully';

?> 
```

这总是打印`error`。`img.php`返回一个 php 生成的图像，但上面的代码无法读取。我的 php.ini 看起来很典型，没有显示错误，我错过了什么？

**注意** `allow_url_fopen`已设置为`On`和`1`

**img.php**

```
$code = 'default';
header("Content-Type: image/jpeg");
$im = @imagecreate(200, 50) or die ("Cannot Initialize new GD image stream");
$bgColour = imagecolorallocate($im, 0, 0, 0);
$textColour = imagecolorallocate($im, 233, 14, 91);

$wSpace = 30; $hSpace = 20;
$prevW = 0;

for($i = 0; $i < strlen($code); $i++)
{
    $w = $prevW + rand(20, $wSpace);
    imagestring($im, 5, $w, rand(0,$hSpace),  substr($code, $i, 1), $textColour);
    $prevW = $w;
}

imagejpeg($im);
imagedestroy($im); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T17:42:01.567

检查您的 php.ini：需要激活**allow_url_fopen以打开 URL。**如果文件在本地主机上，则不需要 URL Wrapper。只需提供文件系统路径。

然后该文件需要被正在运行的用户 php 读取（使用 mod_php 时通常是 apache 用户，或者在 (f)cgi、fpm 的情况下是 php 进程...）

# comments - 如何在我的画廊的评论系统中添加照片图像？

> ID：13182437
> 
> 赞同：1
> 
> 时间：2012-11-01T17:31:34.530
> 
> 标签：comments, facebook-comments

我有一个问题链接没有图像的href，而是评论系统中图像的src....

我有以下内容：

```
<div class="fb-comments" data-href="http://eurosalute.altervista.org/search/?type=fotogallery&uri='.$urlimage_encrypt.'" data-num-posts="5" data-width="370"></div> 
```

问题是没有显示图像 src，而只显示了我画廊上的链接 href。我需要在 Facebook 的评论系统中显示图像 src。

例如：在 div 中添加 data-picture="http://eurosalute.altervista.org/search/'.$urlimage.'" 或 data-src，其中 $urlimage 是要显示的图片的 url。

请帮忙...

谢谢， 问候， 鲁道夫

# winforms - 当我们点击 DataGridViewComboBoxCell 时会调用什么事件

> ID：13182438
> 
> 赞同：0
> 
> 时间：2012-11-01T17:31:40.817
> 
> 标签：winforms, datagridview

我在 DataGridViewComboBoxCell 中有一个项目列表；我想在用户单击一个值后立即做某事。

事件是什么，或者我怎么能做我想做的事？

当我们离开单元格时调用 CellValueChanged...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T19:19:34.950

您可以处理组合框的 selectededindexchanged 。

```
private void dataGridView1_EditingControlShowing(object sender, 
                    DataGridViewEditingControlShowingEventArgs e)
{
    ComboBox cb = e.Control as ComboBox;
    if (cb != null)
    {
        // first remove event handler to keep from attaching multiple:
        cb.SelectedIndexChanged -= new
        EventHandler(cb_SelectedIndexChanged);

        // now attach the event handler
        cb.SelectedIndexChanged += new 
        EventHandler(cb_SelectedIndexChanged);
    }
}

void cb_SelectedIndexChanged(object sender, EventArgs e)
{
    MessageBox.Show("Selected index changed");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T05:47:30.357

另一种可能的方法是：

```
private void dataGridView1_EditingControlShowing(object sender,  
                                                 DataGridViewEditingControlShowingEventArgs e)
{
    ComboBox cb = e.Control as ComboBox;
    if (cb == null)
        return;

    dataGridView1.EditingControlShowing -= dataGridView1_EditingControlShowing;
    cb.SelectedIndexChanged += cb_SelectedIndexChanged;
}

void cb_SelectedIndexChanged(object sender, EventArgs e)
{
    MessageBox.Show("Selected index changed");
} 
```

你只做一次。

# c# - 查找与 PC 连接的 USB/串行通信设备需要哪些信息

> ID：13182443
> 
> 赞同：1
> 
> 时间：2012-11-01T17:32:04.870
> 
> 标签：c#, windows, vb.net, monitoring, device

我有一个连接到我的笔记本电脑的设备。该设备使用串行端口连接到计算机，但是我的笔记本电脑没有串行端口，因此我在串行电缆上添加了一个连接器以将其转换为 USB。现在我可以看到它`Device manager`

![在此处输入图像描述](../Images/a00706503ca57300e1f01ebf16aff212.png)

但是在这里您可以看到，我只能看到有关转换器的信息，而不是有关设备的信息。为什么会这样？我怎样才能知道该设备？

但是设备软件显示它已经检测到它。

我获取信息的目的是，我想知道设备制造商的信息及其 ID。

为此，我使用了以下软件： `Device Monitoring Studio`和`Advanced USB Port Monitor`. 但他们提供的信息只是`Serial to USB converter`与设备无关。

**以下是我从这些软件中获得的信息的快照：**

![在此处输入图像描述](../Images/22ba8c7639a192edda20ef1a0e5e8fa2.png)

请帮我找到该设备的制造商。

**主要目标：**这将帮助我遍历所有端口并检查哪个端口是正确的，以便我可以识别我的设备连接到哪个端口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:00:34.850

串行端口是一种 I/O 端口设计，可追溯到计算的石器时代。例如，当 Dennis Ritchie 在电传打字机上输入第一个 C 编译器的源代码时使用。电气接口非常简单，产生信号所需的芯片只不过是一个华丽的移位寄存器。特别是它没有 USB 设备所需的专用嵌入式处理器。也没有任何协议可以让设备识别自己。尽管存在调制解调器标准（Hayes AT 协议）。

因此，串行设备不是即插即用设备。并且计算机无法确定电缆另一端的设备类型。

# python - 应用程序试图错误地加载 C 运行时库

> ID：13182444
> 
> 赞同：3
> 
> 时间：2012-11-01T17:32:05.793
> 
> 标签：python, windows, msvcrt

每次尝试以下操作时，我都开始收到此错误：

*   使用安装程序安装 Python 包
*   使用 PyWin 扩展（通过 COM 应用程序）
*   启动 Notepad++（带有 Python 脚本插件）

这开始发生在几天前。

对话框显示，我关闭并且一切运行正常，除了它一次又一次地弹出

我在 Windows XP SP3 32 位上重新安装了 Python 2.7.3，然后重新安装了 PyWin 扩展，但没有任何改变。

在这里寻找答案，我发现显然某些库缺少清单声明，但我不知道是哪一个。或者在上述所有 3 个场景中默认加载的内容。有人可能有想法吗？

* * *

我找到了——它是 PyGTK。几天前我安装了它，我确实怀疑它，但不确定也不想误导。
我重命名`gtk-2.0`了站点包中的文件夹，并且对话框停止显示

如果我有任何事情会联系团队并报告

* * *

**更新**

几天前我尝试联系 PyGTK 团队，但列表似乎频率很低，我想知道谁在 Windows 上使用 PyGTK。如果有人关心，这是报告问题的链接：[http ://www.daa.com.au/pipermail/pygtk/2012-November/020462.html](http://www.daa.com.au/pipermail/pygtk/2012-November/020462.html)

如果有人好奇我对这个错误对话框做了什么，这里是答案：我使用了 PyGTK，因为我在一个项目中需要它，我现在将其编译为可执行文件并从我的 Python 包中删除了 GTK。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:47:45.593

如果您知道哪个应用程序或库无法加载，您可以使用[Dependency Walker](http://www.dependencywalker.com/)显示任何缺少的依赖项。

# python - 我正在制作一个 PEMDAS 求解器，但不知道该写什么

> ID：13182459
> 
> 赞同：0
> 
> 时间：2012-11-01T17:32:52.950
> 
> 标签：python, math, algebra

我正在尝试制作一个[PEMDAS](https://en.wikipedia.org/wiki/Order_of_operations)求解器，用户可以在其中输入 PEMDAS 问题。例如，他们会输入 4(4 + 2) - 5，程序会为他们解决。是否有任何代码可以让 python 解决用户输入的输入。

就像是：

```
problem = input()
solve(problem)
print(problem) 
```

我显然知道“解决”不是python中的真正命令。

# java - 名称 'flight_Num' 必须匹配模式 '^[az][a-zA-Z0-9]*$'

> ID：13182460
> 
> 赞同：1
> 
> 时间：2012-11-01T17:32:54.400
> 
> 标签：java, javadoc, checkstyle

当我在我的程序上运行 checkstyle 时，我不断收到此错误：

```
 NonRefundable.java:20:28: Name 'flight_Num' must match pattern '^[a-z][a-zA-Z0-9]*$'. 
```

我不确定我需要做什么来纠正这个问题。以下是此特定错误的注释：

```
/** Comments.
  *
  * @param flight_Num the flight number.
  * @param trip_Data the information stored in the Itinerary object.
  * @param base_Fare the double representing the initial cost of the trip.
  * @param fare_AdjustmentFactor the number factored into the baseFare and 
            discountFactor used to calculate totalFare.
  * @param discount_Factor the number factored into baseFare and 
  *         fare_AdjustmentFactor to calculate totalFare.
  */
  NonRefundable(String flight_Num, Itinerary trip_Data, double base_Fare,
            double fare_AdjustmentFactor, double discount_Factor) {

     super(flight_Num, trip_Data, base_Fare, fare_AdjustmentFactor);
     this.discountFactor = discount_Factor;
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T17:41:50.613

您可能想查看 checkstyle 文档，我希望您在解决第一个问题时会看到这一点，但请从参数名称中删除下划线。

```
NonRefundable(String flightNum, Itinerary tripData, double baseFare,
        double fareAdjustmentFactor, double discountFactor) 
```

[http://checkstyle.sourceforge.net/config_naming.html](http://checkstyle.sourceforge.net/config_naming.html)

您可以查看各种样式指南，参数名称往往是驼峰式的，如本文所示。

[http://www.cwu.edu/~gellenbe/javastyle/parameter.html](http://www.cwu.edu/~gellenbe/javastyle/parameter.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T17:39:08.383

> 名称 'flight_Num' 必须匹配模式 '^[az][a-zA-Z0-9]*$'

表示 flight_Num 中的 _ 字符是不允许的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-08T09:47:17.423

[从 Checkstyle 3.0 开始](https://checkstyle.sourceforge.io/config_naming.html#ParameterName)

如果无法删除下划线，则可以通过以下方式抑制它：

```
// SUPPRESS CHECKSTYLE ParameterName
NonRefundable(...) 
```

[相关问题](https://stackoverflow.com/q/4023185/6413377)

# php - 从 MYSQL 查询到谷歌图表

> ID：13182462
> 
> 赞同：0
> 
> 时间：2012-11-01T17:32:59.440
> 
> 标签：php, mysql, google-visualization

让我首先说，我不知道如何就此提出正确的问题，但这里......

我有一个金额数据库，所有金额都附有时间。例如四行看起来像：

```
2  | 1000 | 2012-11-01 12:09:09
2  | 800  | 2012-11-01 12:10:21
10 | 900  | 2012-11-01 12:11:36
10 | 750  | 2012-11-01 12:12:46 
```

第一列是用户。我想把它放到谷歌折线图上，但在如何设置查询方面真的很挣扎。

javascript 数组中的最终结果需要如下所示：

```
data.addColumn('string', 'Date');
data.addColumn('number', 'User 2');
data.addColumn('number', 'User 10');

data.addRows([
    ['12:09', 1000, null],
    ['12:10', 800, null],
    ['12:11', 800, 900],
    ['12:12', 800, 750]
]); 
```

任何帮助或指导都非常受欢迎。我在想几个 php 循环，但有点卡住了......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T18:02:10.010

将其放在您的文档顶部：

```
<?php

$dsn = 'mysql:dbname=myDbName;host=127.0.0.1';
$user = 'dbUserName';
$password = 'dbPassword';

$pdo = new PDO($dsn, $user, $name);

$result = $pdo->query('select * from YourAmountsTableName');
foreach ($result as $row) {

$rows[] = "['{$row['time']}',{$row['ammount']},{$row['yourThirdValue']}]";

}
$rowsString = implode(',',$rows);
?> 
```

现在在您的 HTML 文档或您的 Javascript 中，在行的位置回显 $rowsString：

```
data.addRows([<?php echo $rowsString; ?>]); 
```

调整为名称、密码等提供的代码。我没有测试代码，所以请检查是否没有引号丢失或其他拼写错误。至于谷歌图表， [https://developers.google.com/chart/interactive/docs/examples?hl=pl](https://developers.google.com/chart/interactive/docs/examples?hl=pl) 有很好的例子

# jquery - jquery选择多个onchange选择和取消选择选项（在ipad上）

> ID：13182463
> 
> 赞同：4
> 
> 时间：2012-11-01T17:33:00.907
> 
> 标签：jquery, ipad, events, select, option

我在 iPad 上选择和取消选择选项时遇到问题。

"Shop by Color" is an option without value, so when this option is selected it will display all items. When any other option is selected it will display items in that category.

**我想要的是：**

*   当您单击 .othervalue 选项时，应取消选择“按颜色购物”（.firstvalue），并应选择单击的选项
*   当您单击 .firstvalue 选项时，它应该被选中，并且所有其他选项 (.othervalue) 应该被取消选择

这是我尝试过的：

```
$(document).ready(function() {
    $('select').change(function() {
        var $this = $(this);
        if($("option.firstvalue").is(":selected")) {                
            $this.find('option:first').attr('selected', false);
        } else {                               
            $this.find('option:gt(0)').attr('selected', false);
        }
    });
}); 
```

** 完整代码在：http: [//jsfiddle.net/GNpzq/](http://jsfiddle.net/GNpzq/) **

我认为我应该使用 $('select').change() 因为 iPad 正确触发了该事件，但我不确定。

有人可以帮我处理这段代码吗？

谢谢！

**编辑：这是解决问题的代码，也许有人会使用。**

```
$(function() {
    // select and deselect default OPTION for filters
    var firstSelectState = new Array;
    var optionsArray = new Array;

    $('select').change(function() {
        var id = this.id;
        if (!id) {
            id = Math.round(Math.random()*99999);
            this.id = id;
        }
        if (typeof(firstSelectState[id])=="undefined") firstSelectState[id] = this.options[0].selected;
        var tmpOptionsArray = new Array();
        for (var i = 1; i<this.options.length; i++) {
            tmpOptionsArray[i] = this.options[i].selected;
        }

        if (typeof(optionsArray[id])=="undefined") {
            optionsArray[id] = tmpOptionsArray;
        }

        var firstSelected = (firstSelectState[id]!=this.options[0].selected);
        var otherSelected = false;
        for (var i = 1; i<this.options.length; i++) {
            if (optionsArray[id][i]!=tmpOptionsArray[i]) {
                otherSelected = true;
                break;
            }
        }

        optionsArray[id] = tmpOptionsArray;
        if (firstSelected && !otherSelected) {
            for (var i = 1; i<this.options.length; i++) {
                this.options[i].selected = false;
            }
        } else {
            this.options[0].selected = false;
            firstSelectState[id] = false;
        }

    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T17:46:59.533

目前您正在阻止任何选择，您的条件说如果选择了第一个选项取消选择它，如果选择了其他选项也取消选择它们，请尝试以下操作：

```
$('select').change(function() {
    if (this.selectedIndex === 0) {
        $('option:gt(0)', this).prop('selected', false);
    } else {
        $('option:first', this).prop('selected', false);
    }
}); 
```

[http://jsfiddle.net/LynCV/](http://jsfiddle.net/LynCV/)

# mysql - 使用文本列删除 MYSQL 中的重复项进行比较

> ID：13182465
> 
> 赞同：2
> 
> 时间：2012-11-01T17:33:04.157
> 
> 标签：mysql, duplicates, unique-key

我们有一个需要多列唯一键的数据库表。但是，其中一列是 TEXT，长度长达 1000 个字符（因此 varchar 也不起作用）。由于 TEXT 列，我实际上无法为这些列设置唯一键。什么是删除重复项的好方法？当然，快一点就好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:42:18.227

添加`unique`约束如下：

```
ALTER IGNORE TABLE table1
 ADD UNIQUE unique_name(column1, comlumn1, column3 ... Text); 
```

这`IGNORE`将有助于在创建约束时删除重复项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T17:44:32.937

最好的方法是使用 a`UNIQUE INDEX`来避免重复。

在您需要作为唯一值的过度列上创建新的唯一键将自动清除表中的任何重复项。

```
ALTER IGNORE TABLE `table_name`
    ADD UNIQUE KEY `key_name`(`column_1`,`column_2`); 
```

该`IGNORE`部分不允许脚本在第一个错误发生后终止。默认行为是删除重复项。

# c++ - 错误“预期在 int 之前的主表达式”

> ID：13182467
> 
> 赞同：2
> 
> 时间：2012-11-01T17:33:17.797
> 
> 标签：c++, function

我正在编写一个代码，它将（希望）允许用户输入一个数字，并将输出 2 和该数字（包括）之间的素数之和。然而，我在代码的倒数第二行遇到了一个问题。我已经查找了此问题的其他解决方案，但它们似乎不是由与我相同的错误引起的。这是代码：

```
#include <iostream>

using namespace std;

int Q;

int sum_primes(int N) {

    cout << "Enter a number and I will generate the sums of the primes up to (and including) that number: ";
    cin >> Q;

    int i, count, sum = 0;

    for(N = 1; N <= Q; N++) {    
         count = 0;

         for(i = 2; i <= N/2; i++) {
             if (N % i == 0) {
                 count++;
                 break;
             }
         }

         if (count == 0 && N != 1)
             sum = sum + N;

         return N = sum;
    }
}

int main() {
    cout << "The sum of these primes is: " << sum_primes(int N);

   return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T17:35:26.607

```
cout << "..." << sum_primes(int N); 
```

替换`int N`为一个数字。你已经定义了函数，现在你需要给它一个参数。

或者，也许您想`N`通过用户输入来赋予 ' 价值。然后改用这个：

```
int N;

cin >> N;

cout << "The sum of these primes is: " << sum_primes(N); 
```

此外，正如 GigaWatt 指出的那样，您所做的那一行：

```
return N = sum; 
```

是不必要的。简单地返回`sum`也可以。

这是完整的代码：

```
#include <iostream>
#include <cmath>

bool isPrime(int x) {

    if (x == 1) return false;
    if (x == 2) return true;

    bool prime = true;
    for (int i = 2; i <= sqrt(x); i++) {
        if (x % i == 0) { prime = false; break; }
    }
    return prime;
}

int sum_primes(unsigned int N) {

    int sum = 0;

    for ( int i = 1; i <= N; i++ ) {

        if (isPrime(i)) sum += i;

    }
    return sum == 0 ? 1 : sum;
}

int main() {

    int Q;

    std::cin >> Q;

    std::cout << "Sum of primes " << sum_primes(Q);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T17:47:06.227

事实上，这段代码存在多个问题。我会列出一些，但这绝不是详尽的！

*   你的代码结构有些疯狂。我想当您修复简单的语法错误时，这将变得显而易见。作为一种风格，我将`Q`作为参数传递给`sum_primes`as well as `N`。
*   在询问“输入数字”之前，您要输出“这些素数的总和是”。
*   `return N = sum`将立即退出您的外部`for`循环。这几乎肯定不是你想要的。

我怀疑您需要寻找比您目前正在使用的更好的 C++ 介绍。恐怕我不能给你任何建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T17:35:49.990

您对 sum_primes 的论点不正确。

该函数被定义为采用 int，但您没有传递它。

# xcode - Xcode 覆盖所有方法

> ID：13182470
> 
> 赞同：0
> 
> 时间：2012-11-01T17:33:26.460
> 
> 标签：xcode

我想在 xcode 上自动覆盖子类的所有方法，例如我有一个 UiViewControler 的扩展类，我如何在 xcode 上覆盖 UiViewController 的所有方法或多或少好：

```
- (id) init
{
    return [super init];
} 
```

* * *

我的目的是记录所有方法以查看它们何时被调用，然后我的方法或多或少会很好

```
- (id) init
{
    [self log];
    return [super init];
} 
```

其中日志如下方法：

```
-(void) log
{
    NSLog(@"%@",[(NSString *) (NSArray *) [NSThread callStackSymbols][1] componentsSeparatedByString:@"-["][1]);
} 
```

多谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T17:34:58.983

在这种情况下，您无需执行任何操作。如果您不提供实现，则将使用超类的实现。

**编辑问题后编辑**

如果您将 log 语句放在超类的实现中，那么您使用自己的初始化程序做什么都没有关系。

为什么？

Cocoa 中的许多约定之一是每个类都有一个指定的初始化程序。然后所有其他指定的初始化程序调用此初始化程序。当您将类子类化时，您将为新类创建一个新的指定初始化程序，并作为初始化的一部分 - 这将调用超类的指定初始化程序。

这就是为什么你会看到 NSObject 子类初始化器调用 [super init]，因为 NSObject 的指定初始化器是 init。

因此，只需在类的指定初始化程序中调用您的日志记录方法，只要遵循上述约定，该初始化程序将始终由子类调用，因此您的日志记录方法将始终被调用。

# dojo - dijit.CheckedMenuItem - 在运行时更改选中的值

> ID：13182473
> 
> 赞同：0
> 
> 时间：2012-11-01T17:33:45.657
> 
> 标签：dojo

这就是我使用 dijit 创建带有复选框的下拉菜单的方式。

```
 layerList.reverse();
    var menu = new dijit.Menu({
        id : 'layerMenu'
    });
    dojo.forEach(layerList, function(layer) {
        menu.addChild(new dijit.CheckedMenuItem({
            label : layer.title,
            id : layer.title.replace(" ",""),
            checked : layer.visible,
            onChange : function(evt) {
                if (layer.layer.featureCollection) {
                    //turn off all the layers in the feature collection even
                    //though only the  main layer is listed in the layer list
                    dojo.forEach(layer.layer.featureCollection.layers, function(layer) {

                        layer.layerObject.setVisibility(!layer.layerObject.visible);

                    });
                } else {

                    layer.layer.setVisibility(!layer.layer.visible);
                }

            }
        }));
    });

    var button = new dijit.form.DropDownButton({
        label : i18n.tools.layers.label,
        id : "layerBtn",
        iconClass : "esriLayerIcon",
        title : i18n.tools.layers.title,
        dropDown : menu
    });

    dojo.byId('webmap-toolbar-center').appendChild(button.domNode); 
```

当 onChange 事件触发时，我可以在运行时访问单个 dijit.CheckedMenuItem，因为我知道它们的 ID。由于 dijit 没有用于 MenuItem 的 RadioButton，有没有办法可以在运行时更改已检查的状态。使用“this.Id”和“evt”，我可以知道用户正在检查/取消选中哪个。从技术上讲，如果需要模拟单选按钮的行为，我可以尝试取消选中其他选中的项目。

有人可以告诉我如何在运行时检查/取消选中 dijit.CheckedMenuItem 吗？我需要调用哪些属性和函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T18:16:57.650

您应该能够在其他 CheckedMenuItem 小部件上将已检查设置为 false

```
checkedMenuItemWidget.set('checked',false) 
```

取消选中任何给定的checkedMenuItem。

# java - 构建文件位置更改时如何在 ANT 中设置 lib 路径

> ID：13182474
> 
> 赞同：0
> 
> 时间：2012-11-01T17:33:51.613
> 
> 标签：java, ant

我是蚂蚁的新手。以下是我的应用程序的文件夹结构。

*   src：源代码
*   库：罐子
*   util : build.xml (ant 构建文件)
*   输出：这将有一个从源代码生成的 jar 文件

用户应该能够将输出文件夹中的这个 jar 文件复制到任何地方，并且在提取时它将具有

*   lib 文件夹：包含所有需要的库
*   build.xml ：要运行的 ant 构建文件

用户应该能够将此 build.xml 运行为“ant -f build.xml run”

问题是，在代码结构中 build.xml 在输出文件夹下，所以当我编写 build.xml 时，lib 文件夹路径设置为 ../lib/ 但是当 build.xml 从提取的文件夹运行时，build.xml 位于根级别，../lib 将不起作用，因为 lib 的相对路径是“./lib/”

帮助表示赞赏！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:11:05.217

尝试将 build.xml 放在 util 文件夹之外..或将 util/ 添加到输出列表 output.library.jar = bin/,\util/ 在 build.properties 文件中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T19:43:08.657

使 lib 目录动态，从属性文件加载。在属性文件`local.props`（将被打包到根目录下的 jar 中）中，您将拥有：

```
lib.dir=lib 
```

当在目录中时，您还将有另一个`local.props`用于构建过程的文件。该文件将具有：`build.xml``util`

```
lib.dir=../lib 
```

构建文件中的第一个指令必须是：

```
<property file="local.props" /> 
```

引用 lib 目录时，请始终使用`${lib.dir}`. 这将使 lib 目录不仅灵活，而且可以在用户端进行配置，作为副作用。`local.props`文件通常用于为脚本用户提供可配置性。

# string - 循环滚动算法

> ID：13182477
> 
> 赞同：4
> 
> 时间：2012-11-01T17:34:03.007
> 
> 标签：string, algorithm, language-agnostic, compression, lzw

我想出了术语*循环*，希望它不会与现有术语重叠。基本上我正在尝试提出一种算法来查找打印文本中的循环。

从简单到复杂的一些例子

## 示例 1

鉴于：

```
a a a a a b c d 
```

我想说：

```
5x(a) b c d 
```

或算法：

```
for 1 .. 5
    print a
end
print b
print c
print d 
```

## 示例 2

鉴于：

```
a b a b a b a b c d 
```

我想说：

```
4x(a b) c d 
```

或算法：

```
for 1 .. 4
    print a
    print b
end
print c
print d 
```

## 示例 3

鉴于：

```
a b c d b c d b c d b c e 
```

我想说：

```
a 3x(b c d) b c e 
```

或算法：

```
print a
for 1 .. 3
    print b
    print c
    print d
end
print b
print c
print d 
```

它没有让我想起我知道的任何算法。我觉得有些问题可能是模棱两可的，但现在找到一个解决方案对我来说就足够了。效率总是受欢迎的，但不是强制性的。我怎样才能做到这一点？

**编辑**

首先感谢大家的讨论。我已经从[Rosetta改编了一个](http://rosettacode.org/wiki/LZW_compression)*LZW*算法并在我的输入上运行它：

```
abcdbcdbcdbcdef 
```

这给了我：

```
a
b
c
d
8  => bc
10 => db
9  => cd
11 => bcd
e
f 
```

我有一本字典：

```
a a
c c
b b
e e
d d
f f
8 bc
9 cd
10 db
11 bcd
12 dbc
13 cdb
14 bcde
15 ef
7 ab 
```

它看起来很适合压缩，但并不是我想要的。我需要的更像是我的示例中算法表示中的压缩，它将具有：

*   后续序列（如果一个序列重复，则中间不会有其他序列）
*   没有字典，只有循环
*   不可约
*   具有最大序列大小（这将最小化算法表示）
*   假设允许嵌套循环（与我之前在评论中所说的相反）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T17:41:13.923

我从一个算法开始，它给出了**最大序列大小**。尽管它并不总是最小化算法表示，但它可以用作近似算法。或者它可以扩展到最优算法。

1.  首先为您的文本构建[Suffix 数组](http://en.wikipedia.org/wiki/Suffix_array)以及[LCP 数组](http://en.wikipedia.org/wiki/LCP_array)。
2.  对 LCP 数组的索引数组进行排序，LCP 数组中较大元素的索引排在最前面。这将相同长度的重复序列组合在一起，并允许以贪婪的方式处理序列，从最大序列大小开始。
3.  提取后缀数组条目，按 LCP 值分组（分组是指具有选定 LCP 值的所有条目以及具有较大 LCP 值的所有条目），并按文本中的位置对它们进行排序。
4.  过滤掉位置差不等于 LCP 的条目。对于剩余的条目，获取长度等于 LCP 的前缀。这给出了文本中所有可能的序列。
5.  将按起始位置排序的序列添加到有序集合（例如，二叉搜索树）。序列是按排序后的 LCP 中出现的顺序添加的，因此首先添加较长的序列。只有当它们是独立的或其中一个完全嵌套在另一个中时，才会添加序列。相交区间被忽略。例如，in `caba caba bab`sequence`ab`与 相交，`caba`因此它被忽略。但是在`cababa cababa babab`一个`ab`被删除的实例中，2 个实例完全在更大的序列内，2 个实例完全在它之外。
6.  最后，这个有序集合包含生成算法表示所需的所有信息。

**例子：**

```
Text          ababcabab

Suffix array  ab abab ababcabab abcabab b bab babcabab bcabab cabab
LCP array       2    4         2       0 1   3        1      0

Sorted LCP            4 3 2 2 1 1 0 0
Positional difference 5 5 2 2 2 2 - -
Filtered LCP          - - 2 2 - - - -
Filtered prefixes   (ab ab) (ab ab) 
```

* * *

**算法草图，产生最小的算法表示。**

从前面算法的前 4 个步骤开始。第五步应该修改。现在不可能忽略相交间隔，因此每个序列都添加到集合中。由于集合现在包含相交区间，因此最好将其实现为一些高级数据结构，例如[区间树](http://en.wikipedia.org/wiki/Interval_tree)。

然后递归地确定包含任何嵌套序列的所有序列的算法表示的长度，从最小的序列开始。当评估每个序列时，计算整个文本的最佳算法表示。处理序列或整个文本的算法使用动态规划：分配一个矩阵，其列数等于文本/序列长度和行数，等于算法表示的长度；对区间树进行有序遍历，用所有序列更新这个矩阵，可能对于每个文本位置；当某个单元格可能有多个值时，要么选择其中任何一个，要么优先选择更长或更短的子序列。

# ios - 将子视图置于所有其他视图之前

> ID：13182482
> 
> 赞同：63
> 
> 时间：2012-11-01T17:34:10.727
> 
> 标签：ios, uiview, subview

我目前正在将广告提供商集成到我的应用程序中。当广告显示但完全不成功时，我希望在广告前面放置一条淡入淡出的消息。

我做了一个函数，它向我当前的视图添加一个子视图，并尝试使用它把它带到前面

```
[self.view bringSubviewToFront:mySubview] 
```

该函数在广告加载通知时触发（通知来自广告提供者的 SDK）。但是，我的子视图并没有出现在广告前面。我想这是广告提供商故意让这变得困难的，但无论如何我都希望这样做。我目前正在与提供商讨论是否可以允许这样做。但就目前而言，我只是想看看这是否可能。

无论如何我可以强制我的子视图成为最顶层的视图，这样它就不会被任何东西阻挡？

* * *

## 回答 #1

> 赞同：176
> 
> 时间：2015-04-02T12:09:59.353

试试这个：

```
self.view.layer.zPosition = 1; 
```

* * *

## 回答 #2

> 赞同：90
> 
> 时间：2012-11-01T17:38:59.910

如果广告提供者的视图没有添加到`self.view`类似的东西上`[UIApplication sharedApplication].keyWindow`怎么办？

尝试类似：

```
[[UIApplication sharedApplication].keyWindow addSubview:yourSubview] 
```

或者

```
[[UIApplication sharedApplication].keyWindow bringSubviewToFront:yourSubview] 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2016-01-26T20:03:57.050

Jere 回答的 Swift 2 版本：

```
UIApplication.sharedApplication().keyWindow!.bringSubviewToFront(YourViewHere) 
```

斯威夫特 3：

```
UIApplication.shared.keyWindow!.bringSubview(toFront: YourViewHere) 
```

斯威夫特 4：

```
UIApplication.shared.keyWindow!.bringSubviewToFront(YourViewHere) 
```

希望它能为某人节省 10 秒！;)

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2012-11-01T17:39:11.367

我曾经需要这个。我创建了一个自定义`UIView`类 - `AlwaysOnTopView`.

```
@interface AlwaysOnTopView : UIView
@end

@implementation AlwaysOnTopView

- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {
    if (object == self.superview && [keyPath isEqual:@"subviews.@count"]) {
        [self.superview bringSubviewToFront:self];
    }

    [super observeValueForKeyPath:keyPath ofObject:object change:change context:context];
}

- (void)willMoveToSuperview:(UIView *)newSuperview {
    if (self.superview) {
        [self.superview removeObserver:self forKeyPath:@"subviews.@count"];
    }

    [super willMoveToSuperview:newSuperview];
}

- (void)didMoveToSuperview {
    [super didMoveToSuperview];

    if (self.superview) {
        [self.superview addObserver:self forKeyPath:@"subviews.@count" options:0 context:nil];
    }
}

@end 
```

让你的观点扩展这个类。当然，这只确保子视图高于其所有同级视图。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2017-03-06T13:17:19.857

据我经验，zposition 是最好的方法。

> self.view.layer.zPosition = 1;

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-12-24T08:43:49.010

让我做一个结论。**在斯威夫特 5**

如果您在最后添加视图，您可以选择将子视图添加到 keyWindow。否则，您可以将SubViewToFront。

```
let view = UIView()
UIApplication.shared.keyWindow?.addSubview(view)
UIApplication.shared.keyWindow?.bringSubviewToFront(view) 
```

您还可以设置 zPosition。但缺点是不能更改手势响应顺序。

```
view.layer.zPosition = 1 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-05-22T15:51:25.573

在 c# 中，View.BringSubviewToFront(childView); YourView.Layer.ZPosition = 1; 两者都应该工作。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-10-25T09:45:52.980

在**斯威夫特 4.2**

```
UIApplication.shared.keyWindow!.bringSubviewToFront(yourView) 
```

来源：[https ://developer.apple.com/documentation/uikit/uiview/1622541-bringsubviewtofront#declarations](https://developer.apple.com/documentation/uikit/uiview/1622541-bringsubviewtofront#declarations)

# python - 在没有while循环的情况下每n秒做一次？

> ID：13182485
> 
> 赞同：4
> 
> 时间：2012-11-01T17:34:14.407
> 
> 标签：python, while-loop, freeze, blender

好吧，我正在尝试为 Blender 编写一个插件，我需要每隔 n 秒做一次，但是，我不能使用 while 循环，因为它会冻结 Blender ！！！我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:41:17.990

```
from threading import Timer

def doSomeThings():
    print "Things are being done"

t = Timer(5.0, doSomeThings)  # every 5 seconds
t.start() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T19:43:01.070

取决于您的需要，`time.sleep`或者`threading.Timer`可能完成这项工作。

如果您需要更全面的调度程序，我最喜欢的版本是[http://code.activestate.com/recipes/496800-event-scheduling-threadingtimer/](http://code.activestate.com/recipes/496800-event-scheduling-threadingtimer/)中的配方：

```
import thread
import threading

class Operation(threading._Timer):
    def __init__(self, *args, **kwargs):
        threading._Timer.__init__(self, *args, **kwargs)
        self.setDaemon(True)

    def run(self):
        while True:
            self.finished.clear()
            self.finished.wait(self.interval)
            if not self.finished.isSet():
                self.function(*self.args, **self.kwargs)
            else:
                return
            self.finished.set()

class Manager(object):

    ops = []

    def add_operation(self, operation, interval, args=[], kwargs={}):
        op = Operation(interval, operation, args, kwargs)
        self.ops.append(op)
        thread.start_new_thread(op.run, ())

    def stop(self):
        for op in self.ops:
            op.cancel()

class LockPrint(object):
    def __init__(self):
        self.lock = threading.Lock()
    def lprint(self, value):
        with self.lock:
            print value

if __name__ == '__main__':
    import time
    import datetime

    lp = LockPrint()

    def hello1():
        lp.lprint('{}\thello1!'.format(datetime.datetime.now()))
    def hello2():
        lp.lprint('{}\thello2!'.format(datetime.datetime.now()))
    def hello3_blocking(): # this is bad, so don't do it in real code ;)
        lp.lprint('{}\thello3_blocking starting... '.format(
            datetime.datetime.now()
        )),
        t = time.time() # get a timestamp
        x = 0
        while time.time() - t < 3: # iterate in a blocking loop for 3 secs
            x += 1
        lp.lprint('{}\thello3_blocking complete! ({} iterations)'.format(
            datetime.datetime.now(), x
        ))

    timer = Manager()
    timer.add_operation(hello1, 1)
    timer.add_operation(hello2, 2)
    timer.add_operation(hello3_blocking, 2)

    t0 = time.time()
    while time.time() - t0 < 10:
        time.sleep(0.1)
    # turn off everything and exit...
    timer.stop() 
```

这通常是时间安全的，因为每个操作都在一个线程下执行，所以主线程仍然可以切换出各个操作线程中的阻塞部分并维护其他操作的时间表（假设您的函数不会引发一直到解释器的任何异常，都会破坏主调度程序线程......）

我不确定这将如何与搅拌机一起使用，但它在我使用的其他环境（特别是基于龙卷风的服务器）的非阻塞模式下运行良好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T19:25:58.893

从使用Blender API 文档的[“线程”模块的奇怪错误中：](http://www.blender.org/documentation/blender_python_api_2_62_2/info_gotcha.html#strange-errors-using-threading-module)

> 仅当线程在脚本完成之前完成时，使用 Blender 的 Python 线程才能正常工作。例如，通过使用 threading.join()。
> 
> **注意**：Pythons 线程只允许并发并且不会在多处理器系统上加速你的脚本，子进程和多进程模块可以与搅拌机一起使用并且也可以使用多个 CPU。

```
from threading import Thread, Event

class Repeat(Thread):
    def __init__(self,delay,function,*args,**kwargs):
        Thread.__init__(self)
        self.abort = Event()
        self.delay = delay
        self.args = args
        self.kwargs = kwargs
        self.function = function
    def stop(self):
        self.abort.set()
    def run(self):
        while not self.abort.isSet():
            self.function(*self.args,**self.kwargs)
            self.abort.wait(self.delay) 
```

例子：

```
from time import sleep
def do_work(foo):
    print "busy", foo
r = Repeat(1,do_work,3.14) # execute do_work(3.14) every second
r.start() # start the thread
sleep(5)  # let this demo run for 5s
r.stop()  # tell the thread to wake up and stop
r.join()  # don't forget to .join() before your script ends 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-01T17:40:24.083

```
import threading

def hello():
   print "hello, world"
   t = threading.Timer(30.0, hello)
   t.start() # after 30 seconds, "hello, world" will be printed 
```

我对 python 不是很好，也没有尝试过。看看这是否对你有帮助:)

# javascript - 使用 GraphAPI 的 Facebook 评论插件

> ID：13182496
> 
> 赞同：5
> 
> 时间：2012-11-01T17:34:51.540
> 
> 标签：javascript, ajax, facebook, facebook-graph-api

我一直在寻找答案，但我发现很难在文档中找到关于此的结论（我完全有可能错过了一些东西）。

**背景**

我正在使用[这个](https://developers.facebook.com/docs/reference/plugins/comments/)插件在我的网站上显示评论，并且我正在尝试添加“实时”功能。我知道 Facebook 没有像他们在他们的网站上那样“默认”为插件提供自动刷新功能，所以我通过`setInterval()`函数中的 ajax 请求来模拟它。

**问题**

有没有办法实现长 ajax 拉、推或其他（更好的？）解决方案来获取评论信息？，多 ajax 请求解决方案工作正常，但有点消耗。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T17:49:28.207

[通常你可以通过使用WebSockets](https://developer.mozilla.org/en-US/docs/WebSockets)来实现你想要的，但是我不认为 Facebook 支持基于 WebSockets 的 API 机制，因此可能没有不包括某种轮询的解决方案。但是，您可以将该轮询机制从用户的浏览器移至您的服务器，这可能会带来更好的用户体验并减少您必须对 Facebook API 进行的 API 调用次数，以防有速率限制。

更具体地说，我建议一种机制，您可以将 Facebook API 中的数据轮询到数据库中，然后设置一个 WebSockets 解决方案，例如[Socket.IO](http://socket.io/)，它使用 WebSockets 事件驱动传递从 Facebook API 轮询的数据（也就是说，很多比轮询更快）机制（如果用户的浏览器不支持 WebSockets，Socket.IO 会回退到 AJAX 轮询）。

# objective-c - 更改 uitableviewheader 高度

> ID：13182505
> 
> 赞同：1
> 
> 时间：2012-11-01T17:35:04.390
> 
> 标签：objective-c, ios

我有一个带有 UITableView 的故事板。tableView 得到一个 tableViewHeader，如：

```
----------------------
| Button             |
| Label              |
---------------------- 
```

该按钮仅在满足条件时出现。此外，如果单击按钮，标题必须是：

```
----------------------
| Label              |
---------------------- 
```

我尝试了很多东西，比如：

```
[UIView animateWithDuration:0.3 delay:0 options: UIViewAnimationCurveEaseOut
                     animations:^{
                         self.tableView.contentOffset = CGPointMake(0, 59);
                     }
                     completion:^(BOOL finished) {
                         if (finished) {
                             self.tableView.contentOffset = CGPointMake(0, 59);
                             self.viewButton.hidden = YES;
                         }
                     }
     ]; 
```

如果我单击按钮，这将非常有用。但是一旦我向上滚动表格视图，它会在 0 处反弹，然后偏移量丢失，我的表格视图看起来像：

```
----------------------
|                    |
| Label              |
---------------------- 
```

我还尝试了各种视图操作并尝试重置 tableViewHeader，例如：

```
 CGRect frame = self.tableView.tableHeaderView.frame;
frame.size.height = 31; 
self.tableView.tableHeaderView = [[UIView alloc] initWithFrame:frame];
[self.tableView.tableHeaderView addSubview:self.viewTitle]; 
```

得到结果：

```
----------------------
|                    |
|            Label   |
---------------------- 
```

我看到了一些关于将我的 UITableViewController 更改为 UIViewController 的内容，我的问题将通过操纵视图控制器框架来解决，但我有 10 个表格视图，我真的没有时间进行我需要的所有更改。

请问，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T21:06:56.877

我通过将相同的对象重新分配给表格视图标题解决了类似的问题：

```
self.tableView.tableHeaderView = self.tableView.tableHeaderView; 
```

请注意，表头视图应该在此分配之前已经调整大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T17:52:25.267

不知道这是否只是复制/粘贴问题，但我认为当您更改标题框架时，您会错过一个步骤；试试这个：

```
CGRect frame = self.tableView.tableHeaderView.frame;
frame.size.height = 31; 
self.tableView.tableHeaderView.frame = frame; 
```

如果你省略了最后一个赋值，你只是创建了一个本地`CGRect`并修改了它的值，实际上并没有改变标题的框架。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T20:06:57.593

我决定在里面使用带有 UITableView 的 UIViewController。我的建议是：忘记 UITableViewController。这是一团糟。解决方案是：

按钮：

```
- (IBAction)synchronizeTouchUpInside:(id)sender {

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.3];
    self.view.frame = CGRectMake(0, -59, 320, 367 + 59);
    [UIView commitAnimations];

} 
```

视图将出现：

```
- (void)viewWillAppear:(BOOL)animated {

    if (1 == 1) {
        self.view.frame = CGRectMake(0, -59, 320, 367 + 59);
    } else {
        self.view.frame = CGRectMake(0, 0, 320, 367);
    }

} 
```

现在我只需要重建很多表视图控制器。这就是生活。

# ruby-on-rails - 如何从 RoR 应用发布到 LinkedIn 群组？

> ID：13182516
> 
> 赞同：-2
> 
> 时间：2012-11-01T17:35:46.173
> 
> 标签：ruby-on-rails, linkedin

如何将 LinkedIn API、OmniAuth-LinkedIn 和 LinkedIn gem 发布到我的 LinkedIn 群组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T17:43:17.570

如果您使用的是 LinkedIn API，那么您只需要像这样进行 post 调用：

```
POST http://api.linkedin.com/v1/groups/{group-id}/posts 
```

并传递您的小组讨论输入：

```
<post>
  <title>New Group Discussion</title>
  <summary>What does everyone think about platform development?</summary>
  <content>
    <submitted-url>http://developer.linkedin.com</submitted-url>
    <title>Build the Professional Web with LinkedIn</title>
    <description>A great resource for finding documentation and answers related to developing on the LinkedIn Platform</description>
  </content>
</post> 
```

您可以在此处获取更多详细信息：[https ://developer.linkedin.com/blog/sharing-content-your-group-discussion-posts](https://developer.linkedin.com/blog/sharing-content-your-group-discussion-posts)

# android - Spring Rest Template 使用导致 EOFException

> ID：13182519
> 
> 赞同：36
> 
> 时间：2012-11-01T17:35:51.330
> 
> 标签：android, spring, eof, android-annotations

我`java.io.EOFException`在 Android 上使用 Spring REST 模板时收到 's。

堆栈跟踪原因如下所示：

```
Caused by: java.io.EOFException
at libcore.io.Streams.readAsciiLine(Streams.java:203)
at libcore.net.http.HttpEngine.readResponseHeaders(HttpEngine.java:560)
at libcore.net.http.HttpEngine.readResponse(HttpEngine.java:813)
at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:274)
at libcore.net.http.HttpURLConnectionImpl.getResponseCode(HttpURLConnectionImpl.java:486)
at org.springframework.http.client.SimpleClientHttpResponse.getRawStatusCode(SimpleClientHttpResponse.java:49)
at org.springframework.http.client.SimpleClientHttpResponse.getStatusCode(SimpleClientHttpResponse.java:55)
at org.springframework.http.client.BufferingClientHttpResponseWrapper.getStatusCode(BufferingClientHttpResponseWrapper.java:47)
at com.company.util.LoggingClientHttpRequestInterceptor.intercept(LoggingClientHttpRequestInterceptor.java:33)
at org.springframework.http.client.InterceptingClientHttpRequest$RequestExecution.execute(InterceptingClientHttpRequest.java:81)
at com.company.api.interceptor.AuthTokenInterceptor.intercept(AuthTokenInterceptor.java:51)
at org.springframework.http.client.InterceptingClientHttpRequest$RequestExecution.execute(InterceptingClientHttpRequest.java:81)
at org.springframework.http.client.InterceptingClientHttpRequest.executeInternal(InterceptingClientHttpRequest.java:67)
at org.springframework.http.client.AbstractBufferingClientHttpRequest.executeInternal(AbstractBufferingClientHttpRequest.java:46)
at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:63)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:475)
... 14 more 
```

另一个类似的堆栈跟踪：

```
org.springframework.web.client.ResourceAccessException: I/O error: null; nested exception is java.io.EOFException
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:490)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:438)
at org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:414)
at com.company.api.ApiClient_.logLoginAttempt(ApiClient_.java:299)
at com.company.security.CompanyAuthenticationService$2.onCreateCall(CompanyAuthenticationService.java:206)
at com.company.api.SafeApiCall.doInBackground(SafeApiCall.java:49)
at com.company.api.SafeApiCall.doInBackground(SafeApiCall.java:22)
at android.os.AsyncTask$2.call(AsyncTask.java:287)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
at java.util.concurrent.FutureTask.run(FutureTask.java:137)
at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
at java.lang.Thread.run(Thread.java:856)
Caused by: java.io.EOFException
at libcore.io.Streams.readAsciiLine(Streams.java:203)
at libcore.net.http.HttpEngine.readResponseHeaders(HttpEngine.java:560)
at libcore.net.http.HttpEngine.readResponse(HttpEngine.java:813)
at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:274)
at libcore.net.http.HttpURLConnectionImpl.getResponseCode(HttpURLConnectionImpl.java:486)
at org.springframework.http.client.SimpleClientHttpResponse.getRawStatusCode(SimpleClientHttpResponse.java:49)
at org.springframework.http.client.SimpleClientHttpResponse.getStatusCode(SimpleClientHttpResponse.java:55)
at org.springframework.http.client.BufferingClientHttpResponseWrapper.getStatusCode(BufferingClientHttpResponseWrapper.java:47)
at org.springframework.web.client.DefaultResponseErrorHandler.hasError(DefaultResponseErrorHandler.java:46)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:476)
... 13 more 
```

这一切都发生在我的 Xoom 平板电脑上安装的 Android 4.1.2 上。

问题出现又消失。它也不是由长请求触发的。服务器部分在本地网络中的机器上运行。当我尝试通过 运行 API 调用时`curl`，它工作得很好。

**AuthTokenInterceptor**：

```
@Override
public ClientHttpResponse intercept(HttpRequest request, byte[] data, ClientHttpRequestExecution execution) throws IOException {
    HttpHeaders headers = request.getHeaders();
    if (!StringUtils.isEmpty(mAuthToken)) {
        headers.add((mIsOAuth ? "Authorization" : "authToken"), (mIsOAuth ? "Bearer " : "") + mAuthToken);
    }
    return execution.execute(request, data);
} 
```

**LoggingClientHttpRequestInterceptor**：

```
/** {@inheritDoc} */
@Override
public ClientHttpResponse intercept(HttpRequest httpRequest, byte[] bytes, ClientHttpRequestExecution clientHttpRequestExecution) throws IOException {
    Log.d(TAG, "To     : " + httpRequest.getURI());
    Log.d(TAG, "Method : " + httpRequest.getMethod().name());
    Log.d(TAG, "Data   : " + new String(bytes));

    for (Object key : httpRequest.getHeaders().keySet()) {
        Log.d(TAG, "Header <" + key + ">: " + httpRequest.getHeaders().get(key));
    }

    final ClientHttpResponse response = clientHttpRequestExecution.execute(httpRequest, bytes);

    if (response != null) {
        Log.d(TAG, "Response: " + response.getStatusCode());
        if (response.getBody() != null) {
            Log.d(TAG, "Response: " + convertStreamToString(response.getBody()));
        }
    } else {
        Log.d(TAG, "Response: " + response);
    }

    return response;
} 
```

Rest Template 的配置如下：

```
final RestTemplate template = new RestTemplate(false);
template.getMessageConverters().add(new MappingJacksonHttpMessageConverter());
template.setRequestFactory(new BufferingClientHttpRequestFactory(template.getRequestFactory()));
ApiUtils.addAuthTokenHeaderToRestTemplate(template, mAuthToken, false);
ApiUtils.addRequestLoggingToRestTemplate(template); 
```

此处崩溃的相关 API 调用在基于 Android 注释的接口中进行了描述：

```
@Post("/user/memberships")
@Accept(MediaType.APPLICATION_JSON)
CompanyApiResponse saveGroupMembership(UserGroupMembership membership) throws RestClientException; 
```

我尝试过的事情：

*   删除 LoggingInterceptor
*   通过 CURL 调用所有 API 调用
*   删除了调用 BufferingClientHttpRequestFactory -**有一点帮助，但错误仍然发生。**
*   在 Android 2.3 上测试过 -**错误无法重现**

我一直在阅读各种论坛帖子，如果 URL 不正确，似乎会出现 EOF 异常，在这种情况下我会仔细检查。

另外值得注意的是，一旦发生 EOF 异常，调用甚至不会到达服务器端。

继续寻找修复的好点在哪里？这是 Android 4.1 带来的不便吗？

在调试这个问题时，我还发现了[https://jira.springsource.org/browse/ANDROID-102](https://jira.springsource.org/browse/ANDROID-102)这使我之前看不到真正的错误（EOF）。

* * *

**更新：**刚刚找到[http://code.google.com/p/google-http-java-client/issues/detail?id=116](http://code.google.com/p/google-http-java-client/issues/detail?id=116) - 它可能是相关的。

该修复程序也在[https://codereview.appspot.com/6225045/](https://codereview.appspot.com/6225045/)中进行了概述-因此它可能已合并为 4.1。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-12-20T22:47:44.817

这也有点像我，运行 Jelly Bean 4.2。经过研究，这似乎是由于设置了 Keep-Alive**和**使用标准 J2SE HTTP 客户端的组合，我相信它是 HttpURLConnection。

我可以确认有 2 个解决方案是正确的。

1）关闭保活。
对我来说，塞巴斯蒂安的答案中给出的解决方案**System.setProperty("http.keepAlive", "false");** 没用。我不得不使用

```
HttpHeaders headers = new HttpHeaders();
headers.set("Connection", "Close"); 
```

并将这些标头发送到 RestTemplate 中的 HttpEntity 中。
如前所述，此解决方案可能会对性能产生影响

2) 更改 HTTP 客户端。
在 Spring for Android（在 1.0.1.RELEASE 上测试，但也可能在早期版本中）中，RestTemplate 实例的默认 HTTP 客户端由设备上的 Android 版本确定。API 9 或更高版本使用 HttpURLConnection，旧版本使用 HTTPClient。要将客户端显式设置为旧客户端，请使用

```
restTemplate.setRequestFactory(new HttpComponentsClientHttpRequestFactory()); 
```

更多信息可以在这里找到：[http](http://static.springsource.org/spring-android/docs/1.0.1.RELEASE/reference/htmlsingle/#d4e34)
://static.springsource.org/spring-android/docs/1.0.1.RELEASE/reference/htmlsingle/#d4e34 我不确定这会对性能产生什么影响，但我猜猜它比不工作的应用程序性能更高。

无论如何，希望对某人有所帮助。我只是浪费了一周的时间去追逐这个。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-08T16:53:31.443

[http://code.google.com/p/google-http-java-client/issues/detail?id=116](http://code.google.com/p/google-http-java-client/issues/detail?id=116)在最新评论中包含一个解决方法：

> 这在某种程度上与 keepAlive 连接有关。
> 
> 当我使用： **System.setProperty("http.keepAlive", "false");** 问题消失。
> 
> 但据我了解，保持活动连接会大大提高性能，因此最好不要禁用它们。
> 
> 我也知道旧版本应该禁用保持活动，但我的设备是果冻豆。

一旦应用，错误就消失了。
似乎它与Spring并不完全相关，而是一个JB问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-28T10:49:22.053

最近我遇到了这个问题，并且在使用以下代码设置标题后将能够解决这个问题：

```
headers.set("Accept-Language", "en-US,en;q=0.8"); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-03-24T09:24:37.640

```
RestTemplate restTemplate = new RestTemplate();
            ((SimpleClientHttpRequestFactory)restTemplate.getRequestFactory()).setOutputStreaming(false);

restTemplate.postForObject...... 
```

# macos - 在 Mac 上访问 ~/Sites 文件夹中的 Symlink 文件夹（Web 共享）

> ID：13182528
> 
> 赞同：0
> 
> 时间：2012-11-01T17:36:29.493
> 
> 标签：macos, apache2, localhost, dropbox, symlink

我在我的 Mac 上设置了本地开发环境，但在访问 ~/Sites 目录中的文件夹时遇到权限问题。

基本上我的 Dropbox 文件夹中有文件夹 A。

我创建了文件夹 A 的符号链接到我的 ~/Sites 文件夹

`ln -s ~/Sites ~/Dropbox/FolderA`

当我尝试像这样访问文件夹 A 时：`localhost/~username/FolderA`

页面说`You don't have permission to access /~username/FolderA on this server`

有人可以帮我解决这个问题。当我在 MAMP 上做同样的事情时，我没有这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T20:00:00.733

继续`private/etc/apache2/users/`，编辑您的`usernamefile.conf`，添加到**选项**行，选项**SymLinksIfOwnerMatch**，如果目录包含重要的个人文件，请不要使用**FollowSymLinks**，例如，如果您想要链接的目录位于您的 Documents 或 Dropbox 下。请记住，您的符号链接所链接的目录必须有 755 权限，所以她的父母！假设您有`/Users/foo/Dropbox/MySites/BarSite`，Users, foo, Dropbox, MySites, BarSite 都必须是 755。

# jquery - Susy 响应式网格和 jQuery 砌体

> ID：13182539
> 
> 赞同：0
> 
> 时间：2012-11-01T17:36:53.703
> 
> 标签：jquery, html, css, sass, jquery-masonry

在尝试使用 Susy（SASS 网格系统）正在生成的响应式网格系统实现 jQuery Masonry 插件时，我遇到了一个非常烦人的问题。下面是它的外观图像：

[http://test.tomblanchard.co.uk/Masonry/library/images/HowItShouldLook.gif](http://test.tomblanchard.co.uk/Masonry/library/images/HowItShouldLook.gif)

我已经阅读了数十篇具有类似问题的文章，但找不到对我的问题有益的解决方案。您可以在此处查看问题和代码：

[http://test.tomblanchard.co.uk/Masonry/](http://test.tomblanchard.co.uk/Masonry/)

如果有人可以帮助我，将不胜感激。

干杯! 汤姆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:56:29.343

您是否尝试过为需要在右侧（浮动：正确）的方向交替浮动方向？我之前遇到过类似的布局问题，这似乎解决了我在右边需要的问题。

另外，我很好奇您使用 responsive+susy 的设置。你会在每个 div 上设置最小宽度吗？我只是想知道砌体如何与响应式布局一起使用。祝你好运！

# java - Spring Security oauth2 客户端

> ID：13182543
> 
> 赞同：3
> 
> 时间：2012-11-01T17:37:05.513
> 
> 标签：java, spring-security

我已经设置了一个具有弹簧安全性的 OAuth2 服务器。我想编写客户端应用程序以在不保护任何资源的情况下使用这个带有 Spring Security 的 oauth 服务器。意味着我只想使用 spring security 3.1 从客户端运行 oauth2。我已经编写了以下配置，但它在重定向到 oauth2 服务器授权页面之前要求提供凭据。但我想在从客户端询问任何凭据之前将用户重定向到 oauth2 服务器授权页面。我正在使用以下配置

```
<http auto-config='true' xmlns="http://www.springframework.org/schema/security">
    <intercept-url pattern="/product/**" access="IS_AUTHENTICATED_ANONYMOUSLY" />
    <custom-filter ref="oauth2ClientFilter" after="EXCEPTION_TRANSLATION_FILTER" />
</http>

<authentication-manager xmlns="http://www.springframework.org/schema/security">
    <authentication-provider>
        <user-service>
            <user name="jimi" password="jimi" authorities="ROLE_USER" />
        </user-service>
    </authentication-provider>
</authentication-manager>

<!--apply the oauth client context -->
<oauth:client id="oauth2ClientFilter" />

<oauth:resource id="fooClient" type="authorization_code"
    client-id="foo" client-secret="secret" access-token-uri="${accessTokenUri}"
    user-authorization-uri="${userAuthorizationUri}" scope="read" />

 <bean id="dService" class="com.abc.service.DServiceImpl">
    <property name="dURL" value="${dURL}"></property>
    <property name="dRestTemplate">
        <oauth:rest-template resource="fooClient" />
    </property>

 </bean> 
```

所以我只想 /product url 应该访问 oauth2 服务器。没有这个，其余的 URL 映射应该可以工作。并且用户应该是客户端的匿名用户（无需在客户端显示登录）。

但是当我运行我的应用程序“http://localhost/client-sample/product/1”时，它会显示“http://localhost/client-sample/spring_security_login”。但我希望用户应该重定向到 oaut2 服务器页面。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-05T07:45:37.143

Spring security 防止匿名用户获取访问令牌。但是，如果您仍然希望在您的应用程序中使用此功能，那么您将必须扩展 org.springframework.security.oauth2.client.token.grant.code.AuthorizationCodeResourceDetails 类并覆盖 isClientOnly() 方法。

```
import org.springframework.security.oauth2.client.token.grant.code.AuthorizationCodeResourceDetails;

public class ExtendedBaseOAuth2ProtectedResourceDetails extends
    AuthorizationCodeResourceDetails {

public boolean isClientOnly() {
    return true;
}
} 
```

默认情况下，此方法返回 false。所以你必须重写这个方法才能返回true。然后在您的 root-context.xml 文件中，您必须像这样定义 oaut2 资源。

```
<bean id="fooClient" class="com.abc.service.ExtendedBaseOAuth2ProtectedResourceDetails">
  <property name="clientId" value="foo"></property>
  <property name="clientSecret" value="secret"></property>
  <property name="accessTokenUri" value="${accessTokenUri}"></property>
  <property name="userAuthorizationUri" value="${userAuthorizationUri}"></property>
  <property name="scope" value="#{{'read','write'}}">   </property>
</bean>

<bean id="dService" class="com.abc.service.DServiceImpl">
  <property name="dURL" value="${dURL}"></property>
  <property name="dRestTemplate">
      <oauth:rest-template resource="fooClient" />
  </property>
</bean> 
```

在将用户重定向到 oauth2 提供者授权页面之前，这不会在客户端询问授权。

# visual-studio-2012 - Visual Studio 控件识别

> ID：13182544
> 
> 赞同：1
> 
> 时间：2012-11-01T17:37:07.463
> 
> 标签：visual-studio-2012, webforms, variable-assignment, auto-generate

原来的问题：

我会在 .aspx Web 表单文件中添加一个控件，将其保存，而设计器代码将不会得到适当的更新。因此，我的文件后面的代码找不到我告诉它的任何变量。

我试图做的事情没有奏效：

将 aspx 文件转换为 Web 表单。将文本存储在其中，但删除解决方案中的文件并重新添加它们，重新添加代码。关闭和打开 VS。

我试过的东西确实有效：

删除解决方案中的文件并重新添加它们。一点一点地阅读文本。

问题的经验原因在于 aspx.cs 文件后面的代码： private const string RECORDSPERPAGE = "RecordsPerPage";

在添加此变量后的任何时间点（在此块中看到）...

公共部分类 RequestSearch : ProtectedPage { private const string TOTALPAGES = "TotalPages"; 私人常量字符串 CURRENTPAGEINDEX = "CurrentPageIndex"; 私人常量字符串 RECORDSPERPAGE = "RecordsPerPage";

...如果在 aspx 文件中添加了控件，则设计器代码未适当更新，并且后面的代码无法识别随后添加的控件，这些控件与此类似...

我将此字符串常量的名称更改为 RESULTSPERPAGE。之后一切正常。

所以我的问题似乎解决了，但我不知道为什么。RECORDSPERPAGE 没有在该文件之外的任何地方声明，没有在任何地方使用，而是以与显示的其他私有字符串常量类似的方式使用，不会导致设计器生成问题。

希望有人了解允许这种行为的 Visual Studio 的魔力，或者提醒我注意其他地方，我可能希望更好地了解问题的根本原因。

# java - JMS 与 AMQP 的比较

> ID：13182545
> 
> 赞同：4
> 
> 时间：2012-11-01T17:37:10.990
> 
> 标签：java, jms, amqp

我正在四处搜索以寻找使它们与众不同的原因。我在一些项目中使用了 RabbitMQ 和 ZeroMQ。知道 JMS 仍然存在并且人们使用它，我开始想知道为什么？是什么激发了 JMS 的使用？有什么性能、架构或任何优势吗？我对 JMS 一无所知，但如果我所了解的是真的，为什么有人会将自己绑定到特定于 java 的技术？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-01T17:59:38.923

JMS 和 AMQP 没有可比性。JMS 是一个 API；AMQP 是一种协议。可以编写使用 AMQP 的 JMS 实现。确实，[人们有](https://github.com/imatix/openamq-jms)。

此外，可以编写使用其他协议的 JMS 实现——当然，[很多](http://www.jboss.org/hornetq) [人](http://pic.dhe.ibm.com/infocenter/tivihelp/v2r1/index.jsp?topic=/com.ibm.itamfbi.doc_5.1/ADM51mst40.htm) [都有](http://tibcoadmin.com/tibco/ems/what-is-tibco-ems/).

JMS 的目标是在所有这些不同的消息传递协议上放置一个统一的 API。这使程序员的生活更轻松，他们可以学习一个 API，然后有合理的机会使用他们遇到的任何消息队列。

此外，标准 API 的存在允许 JMS 与其他标准进行交互。例如，在[ejb](/questions/tagged/ejb "显示标记为“ejb”的问题")中，有一个[消息驱动 bean](http://docs.oracle.com/javaee/6/tutorial/doc/gipko.html)之类的东西，它是一个接收消息而不是方法调用的 EJB，并使用 JMS API 来控制过程。

# asp.net - ASP.NET 文本框，在外部 CSS 文件中设置焦点边框颜色

> ID：13182548
> 
> 赞同：0
> 
> 时间：2012-11-01T17:37:15.963
> 
> 标签：asp.net, css

我有一个 ASP.NET 文本框。当文本框获得焦点时，我试图将边框的颜色设置为绿色，并且我想具体说明文本框的**类**。文本框如下所示 -

```
<asp:TextBox CssClass="myInput" BorderStyle="None"  runat="server">Search</asp:TextBox> 
```

**注意**：我从 BorderStyle="None" 开始，因为当文本框没有焦点时，我不想*显示*边框。目前在对焦时会显示一个边框，但这不是我想要的颜色。

我在我的 CSS 文件中尝试了以下内容 -

```
.myInput:focus {
                 border: green;
              } 
```

和

```
input.myInput:focus {

                    border: green;
                } 
```

（和其他一些人）但没有任何效果。有人可以告诉我怎么做吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:40:51.197

是的，您需要`BorderStyle="None"`从您的`TextBox`控制中删除 。

`border`在 CSS 中为此设置样式，然后您可以使用`focus`

看看这个[http://jsfiddle.net/xXEWK/](http://jsfiddle.net/xXEWK/)

一开始您看不到文本框 - 单击您看到“文本框 - >”的右侧

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T17:42:46.937

看看[这个](http://jsfiddle.net/TSx7m/)

而不是 `border: green`你需要使用`border: 1px solid green;`

你的文本框应该是这样的

```
<asp:TextBox CssClass="myInput"  runat="server">Search</asp:TextBox> 
```

**更新**

我认为最好使用jQuery。

您可以在焦点上添加一个类，并在失去焦点时删除该类

查看更多关于[focus](http://api.jquery.com/focus/)和[focusOut](http://api.jquery.com/focusout/)

请参阅此[示例](http://jsfiddle.net/TSx7m/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T18:34:33.690

我不得不使用 -

```
 .myInput:focus {
        border:solid 1px green !important;
 } 
```

因为边框样式被其他 CSS 设置覆盖。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T18:41:20.527

你可以这样使用

```
<asp:TextBox ID="txtSearch" CSSClass="myInput" runat="server">Search</asp:TextBox> 
```

# python - Python-C API：无法将 C 字符串打包成元组

> ID：13182549
> 
> 赞同：1
> 
> 时间：2012-11-01T17:37:18.087
> 
> 标签：python, c, python-c-api

在下面的代码中，我试图将两个以 null 结尾的 C 字符串（字符指针）打包到一个 Python 元组中。

```
printf("word1 = '%s', word2 = '%s'\n", words1->wordArray[i], words2->wordArray[i]);
cmpArgs = Py_BuildValue("ss", words1->wordArray[i], words2->wordArray[i]);
printf("%s\n", PyString_AsString(PyTuple_GetItem(cmpArgs, 0))); 
```

这会产生如下输出：

```
word1 = '20', word2 = '20'
i┴ 
```

为什么元组中的字符串与外部的字符串不同？我究竟做错了什么？另外，我需要担心增加和减少这个元组的引用计数吗？（我正在创建它以传递给作为 PyObject* 传递给 C 的 Python 函数）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:56:19.550

我想我明白了——我以前使用堆栈空间以一种奇怪的方式存储单词。我开始为他们手动分配堆上的空间，这似乎已经修复了。

# struts2 - Spring security自定义UserDetailsS ervice实现+自定义登录页面

> ID：13182552
> 
> 赞同：4
> 
> 时间：2012-11-01T17:37:20.797
> 
> 标签：struts2, spring-security

我试图弄清楚如何使用 Spring security 3.1 和 struts2 实现一个简单的应用程序。实际上，我想提供一个自定义的 UserDetailsS​​ervice 实现，并提供我自己的登录页面。

虽然我在这个简单的小应用程序上工作了 10 多天，但我无法让它工作......而且官方文档没有明确说明如何做到这一点。

在下面的配置中，如果我使用 Spring Security 提供的默认登录页面，一切正常。当我尝试使用我的时，即使调用了 loadUserByUsername 方法并且从数据库返回了有效的 UserDetails，我也无法登录，并且我坚持在登录页面上。

在控制台中，我收到消息：

```
WARNING: No configuration found for the specified action: '/myApplication/j_spring_security_check' in namespace: ''. Form action defaulting to 'action' attribute's literal value. 
```

所以也许我有命名空间问题？

这是我的代码

Web.xml

```
<!DOCTYPE web-app PUBLIC
 "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
 "http://java.sun.com/dtd/web-app_2_3.dtd" >

<web-app>
    <display-name>Archetype Created Web Application</display-name>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value> /WEB-INF/applicationContext.xml
            /WEB-INF/applicationContext-security.xml </param-value>
    </context-param>

    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>

    <filter>
        <filter-name>struts2</filter-name>
        <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <!-- Spring -->
    <listener>
        <listener-class>
            org.springframework.web.context.ContextLoaderListener
        </listener-class>
    </listener>

    <welcome-file-list>
        <welcome-file>public/index.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

struts.xml

```
<?xml version="1.0" encoding="UTF-8" ?> 
```

```
<package name="public" namespace="/public" extends="struts-default">
    <action name="login" class="loginAction">
        <result name="success">/secure/welcome.jsp</result>
        <result name="input">login.jsp</result>
    </action>

    <action name="register" class="registerAction">
        <result name="success">confirm_register.jsp</result>
        <result name="input">register.jsp</result>
    </action>
</package>

<package name="secure" namespace="/secure" extends="struts-default">

    <action name="add" class="myApplication.action.UserAction" method="add">
        <result name="success">welcome.jsp</result>
    </action>

    <action name="list" class="myApplication.action.UserAction" method="list">
        <result name="success">list.jsp</result>
    </action>

</package> 
```

applicationContext-security.xml

```
<beans:beans xmlns="http://www.springframework.org/schema/security"
xmlns:beans="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
       http://www.springframework.org/schema/security
       http://www.springframework.org/schema/security/spring-security-3.1.xsd">

<global-method-security pre-post-annotations="enabled">
    <!-- AspectJ pointcut expression that locates our "post" method and applies 
        security that way <protect-pointcut expression="execution(* bigbank.*Service.post*(..))" 
        access="ROLE_TELLER"/> -->
</global-method-security>

<http pattern="/resources" security="none" />

<http auto-config="true" use-expressions="true">
    <intercept-url pattern="/public/*" access="permitAll" />
    <intercept-url pattern="/logout" access="permitAll" />
    <intercept-url pattern="/secure/*"
        access="hasRole('ROLE_USER') or hasRole('ROLE_ADMIN')" />
    <intercept-url pattern="/denied" access="hasRole('ROLE_USER')" />
    <intercept-url pattern="/" access="hasRole('ROLE_USER')" />

    <form-login login-page="/login.jsp"
        authentication-failure-url="/login.jsp" />

    <access-denied-handler error-page="/denied" />

    <logout invalidate-session="true" logout-success-url="/logout/success"
        logout-url="/logout" />
</http>

<authentication-manager>
    <authentication-provider user-service-ref="customUserDetailsService" />
</authentication-manager> 
```

登录.jsp

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<%@ taglib prefix="s" uri="/struts-tags"%>
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
</head>

<body>
    <h1>Identification</h1>
    <s:form action="/myApplication/j_spring_security_check" method="post">
    <s:actionerror />

        <s:textfield label="Username" name="username"/>
        <s:textfield label="Password" name="password"/>
        <s:submit name="submit" />

    </s:form>

</body>
</html> 
```

有什么想法/建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T18:24:58.600

首先`<s:form>`正确使用标签[http://struts.apache.org/2.x/docs/url.html](http://struts.apache.org/2.x/docs/url.html)或使用 HTML`form`标签。用于基于表单的身份验证的第二个默认 spring-security 用户名和密码字段是`j_username`和`j_password`. 因此，将您的 JSP 更改为类似的东西，看看这是否有效。

```
<form action="j_spring_security_check" method="post">
  <table>
    <s:textfield name="j_username" autofocus="autofocus" />
    <s:password name="j_password" />
    <s:submit/>
  </table>
</form> 
```

# magento - Magento：使用 WYSIWYG 时，图像文件扩展名附加了 %20

> ID：13182557
> 
> 赞同：-1
> 
> 时间：2012-11-01T17:37:50.820
> 
> 标签：magento, magento-1.7

在后端页面中使用 WYSIWYG 插入图像时，图像文件扩展名上附加了 %20 （我相信这是一个空格），如果您单击隐藏编辑器按钮查看 HTML，它将看起来像这个

```
 <img src="{{media url="wysiwyg/example.png"}}%20" alt="" /> 
```

从 html 源视图单击插入图像可以很好地插入图像，当我在实际的所见即所得编辑器中时，就会出现问题。

在我选择了我的图像并将其插入后，我将返回到带有常规选项卡中“图像 URL”字段的弹出框。正是在这里，一个空格被添加到文件的末尾。

```
 http://example.com/index.php/admin/cms_wysiwyg/directive/___directive/rfe33fSB1cmw9Ind5c2l3eWcvQ3wfwfer43cifX0,/key/rufheufuh4uh42eaf7611b26e2e1x1786/ 
```

上面是来自图像 url 字段的示例 url，在最后一个正斜杠之后添加了一个空格，导致 %20，因此不显示我的图像。

我在哪里可以修剪这个值，因为它可能会修复它？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T18:01:48.607

尝试使用这个：

```
 <img src="{{media url="wysiwyg/example.png"  _query="%20"}}" alt="" /> 
```

或者可能：

```
 <img src="{{media url='wysiwyg/example.png'}}%20" alt="" /> 
```

# command-line - 使用命令行小写所有文件中的所有文本？

> ID：13182558
> 
> 赞同：0
> 
> 时间：2012-11-01T17:38:03.140
> 
> 标签：command-line, ssh

我一直在尝试几个命令，例如

```
dd if=*.xml of=*.xml conv=lcase 
```

将我文件夹中所有 xml 文件的所有内容集中为小写。文件夹文件名已经是小写的，我正在尝试将所有实际内容也更改为小写。

有人可以发布命令来执行此操作或告诉我我做错了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:45:27.260

用于`sed`编辑文件，这将使您免于编写循环。

```
sed  -ri 's/.+/\L\0/' *.xml 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T17:40:26.783

```
for i in *.xml; do tr A-Z a-z < $i > tmp && mv tmp $i; done 
```

如果您的文件名包含不寻常的字符（空格、换行符、控制字符等），您可能必须引用“$i”，但由于您说名称都是小写的，我假设这没有必要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T17:45:03.713

我会去：

```
sed -ie 's/\(.*\)/\L\1/' *.xml 
```

我看到你已经用 ssh 标记了你的问题。您没有指定它，但这是否意味着您想在 ssh 命令的末尾运行此命令？在这种情况下，您需要避开星号，因为它们应该被远程解释，如下所示：

```
sed -ie 's/\(.*\)/\L\1/' \*.xml 
```

# sql-server - 根据另一列中的值选择值，其中一个为 NULL

> ID：13182559
> 
> 赞同：0
> 
> 时间：2012-11-01T17:38:06.813
> 
> 标签：sql-server

我有下表设置

```
Acc  Currency  Alias
1    NULL      A
1    USD       B
1    EUR       C 
```

我想通过将输入作为`Acc`. 和连接到另一个表`Currency`。`Acc`

它应该按如下方式工作 -

```
If acc = 1 and currency is USD then B, if EUR then C, if null then A 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:42:19.193

你真的尝试过自己编写**任何**SQL 吗？

```
SELECT ...
FROM otherTable ot
(INNER) JOIN thisTable tt
ON ot.Acc = tt.Acc AND ot.Currency = tt.Currency 
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T18:38:11.363

显式匹配 NULL

```
SELECT *
  FROM othertbl o
  JOIN thistbl t on o.acc = t.acc
                and (o.currency = t.currency or o.currency is null AND t.currency is null) 
```

或者在您的情况下，使用 NULL 货币`thistbl`作为后备

```
 SELECT ...
   FROM othertbl o
   JOIN thistbl t on o.acc = t.acc and o.currency = t.currency
  UNION ALL
 SELECT ...
   FROM othertbl o
   JOIN thistbl t on o.acc = t.acc and t.currency IS NULL
  WHERE NOT EXISTS (select *
                      from thistbl t2
                     where o.acc = t2.acc and o.currency = t2.currency) 
```

# c++ - OpenGL 游戏在 Win7 中运行良好，在 Windows 8 中降至 5fps？

> ID：13182563
> 
> 赞同：3
> 
> 时间：2012-11-01T17:38:36.007
> 
> 标签：c++, visual-studio-2010, performance, opengl, windows-8

我最近刚刚安装了 Windows 8，我尝试在 VS 2010 中编译和构建一个简单的 c++ 游戏项目，但是当我这样做时，它以 5 fps 的速度运行。在 Windows 7 上，它以稳定的 60 fps 运行。代码中没有任何改变，但是速度慢得可怕。

我已经更新了我的视频驱动程序，但仍然存在可怕的延迟。我认为问题与 Windows 8 和 OpenGL 的兼容性问题有关，但我找不到任何可以确认的信息。我想知道是否有其他人遇到过这个问题，以及您是否已经解决了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T19:05:59.430

我建议你先测试你的显卡/驱动程序。升级操作系统时可能会出现各种驱动程序问题。最好的测试之一是下载 Cinebench 并查看它的性能。Cinebench 将评估您的 OpenGL 性能。如果结果不佳，那么您就知道这是硬件/驱动程序问题，而不是您的应用程序问题。

如果 Cinebench 的结果很好，那么您可以继续使用 @Robert Rouhani 提出的建议（评论）。

[http://www.maxon.net/products/cinebench/overview.html](http://www.maxon.net/products/cinebench/overview.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T10:12:08.177

你的Win8机器是什么显卡？

如果是笔记本电脑，您可能会与 nVidia Optimus（或同等技术？）作斗争。基本上程序必须提前告诉操作系统他们想要使用视频卡，否则他们会默认使用嵌入在 CPU 中的低功耗 GPU（注意：过度简化）。

如果是这种情况，nVidia 控制面板中有一些选项可让您创建一个配置文件，告诉操作系统使用独立 GPU 而不是嵌入式 GPU 运行您的应用程序。

# iphone - 在 Next 上向上滚动 UITextField

> ID：13182564
> 
> 赞同：0
> 
> 时间：2012-11-01T17:38:39.983
> 
> 标签：iphone, ios, ios5, uiview, uiscrollview

我正在为我的 iOS 应用程序创建一个“登录”和“创建帐户”表单。我成功实现了 UITextField 隐藏时的向上滚动。但是，既然我实现了“下一步”按钮，则不会调用“UIKeyboardDidShowNotification”，因为键盘永远不会被关闭。我需要调用keyboardWasShow 方法，以便检查活动的UITextField 是否隐藏。

```
 // Called when the UIKeyboardDidShowNotification is sent.
- (void)keyboardWasShown:(NSNotification*)aNotification
  {
NSDictionary* info = [aNotification userInfo];
CGSize kbSize = [[info objectForKey:UIKeyboardFrameBeginUserInfoKey] CGRectValue].size;

// If active text field is hidden by keyboard, scroll it so it's visible
// Your application might not need or want this behavior.
CGRect aRect = self.view.frame;

CGPoint pointInSuperview = [self.view convertPoint:self.activeField.frame.origin fromView:self.scrollView];

aRect.size.height -= kbSize.height;
//added 10 to y axis because tip of origin was outside of keyboard
pointInSuperview.y +=20;

if (!CGRectContainsPoint(aRect, pointInSuperview)) {
    CGPoint scrollPoint = CGPointMake(0.0, pointInSuperview.y - (kbSize.height -15));
    NSLog(@"it is not in the rect");
    [self.scrollView setContentOffset:scrollPoint animated:YES];
   }
} 
```

我有一个观察员

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(keyboardWasShown:)
                                             name:UIKeyboardDidShowNotification object:nil]; 
```

在我实现了我的 Next 按钮（见下文）之后，不会调用 keyboardWasShown 方法，因此它永远不会检查活动的 UITextField 是否被隐藏。

```
 //functionality for next action
- (BOOL)textFieldShouldReturn:(UITextField *)textField {
   if (textField == self.emailAddress) {
     [self.fullName becomeFirstResponder];
     [self keyboardWasShown:(NSNotification*)UIKeyboardDidShowNotification];

 }
 else if (textField == self.fullName) {
       [self.password becomeFirstResponder];
 }
else if (textField == self.password) {
    [self.confirmPassword becomeFirstResponder];
}
[textField resignFirstResponder];
return YES;
} 
```

当用户单击“下一步”按钮时，调用 keyboardWasShown 的最佳方法是什么？我尝试将其设为公共方法，但是当我尝试手动调用它时，我不断收到错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:39:55.787

避免这种情况的一种方法是在设置下一个响应者之前退出响应者，这将确保`keyboardWasShown`调用通知。例如，根据您的代码，您可以使用以下内容：

```
...
else if (textField == self.fullName) {
    [self.fullName resignFirstResponder];
    [self.password becomeFirstResponder];
}
... 
```

虽然这可能看起来很奇怪，但应该注意键盘实际上并没有消失/重新出现。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-01T18:31:46.927

You may want to look into [this](https://github.com/michaeltyson/TPKeyboardAvoiding)

If your fields arent in a table the same sort of logic can apply to other cases.

# c - 需要帮助创建和未知数量的命名管道来拆分和排序数据

> ID：13182566
> 
> 赞同：4
> 
> 时间：2012-11-01T17:38:45.300
> 
> 标签：c, sorting, fork, pipe, named-pipes

好的，所以我是一项关于管道的任务。目标是从命令行获取“深度”“文件名”和“属性”。该文件是一个保存用户信息的txt文件，属性只是我们稍后要排序的信息。然而，深度很重要，因为我需要根据用户输入的数字使用分叉创建一棵二叉树。深度为 1 时，我将拥有我的主进程、一个内部节点和 2 个叶节点。深度为 2 时，我将拥有我的主进程，一个内部节点有两个内部节点作为子节点，并且它们每个都有两个叶节点作为子节点......等等。

我的代码目前将所有信息读入结构数组，创建正确数量的节点的二叉树，并且我的所有排序算法（Shell、Quick、Bubble）都可以工作。

现在，我必须实现命名管道并将数据向下传递到叶节点进行排序。每个内部节点都应该将数据拆分为其子节点。然后，一旦数据到达叶节点，它们将实施不同的排序算法并将结果返回给它们的父/内部。内部节点将从它的两个子节点中获取排序后的数据并合并结果。最终，数据将一路合并回到锚节点。

我的问题是我根本无法将注意力集中在管道上。我不知道如何跟踪它们或在正确的时间初始化它们。我想过找出给定的深度应该产生多少叶节点并以这种方式均匀地分割数据，然后只做一个 if 语句来对数据的每个部分运行正确的排序器，但这并不能解决正确的问题问题。任何人都可以帮助我实现这一点，或者至少可以开始一些事情吗？

树的创建看起来像这样

```
void forkTree(int size){
if(size == 0){
    return;
}
int left = fork();
if(left != 0){
    int right = fork();
        if(right == 0){
            sleep(1);
            forkTree(size-1);
        }
}
else{
    sleep(1);
    forkTree(size-1);
} 
```

它是这样调用的

```
if(depth>0){
//initial fork
int anchor = fork();
//make binary tree only in child process
if(anchor==0){
    forkTree(depth);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-18T10:52:02.800

查看有关文档[`pipe`](http://linux.die.net/man/2/pipe). 每个管道有两端，一端用于读取，一端用于写入。当您想将数据写入孩子然后读取结果时，每个孩子需要两个。如果你有一个二叉树，那么每个节点都有两个孩子。所以它是四个管道和八个文件句柄，您可以在父母和孩子的一侧关闭其中的一半。在父节点中，关闭管道的读取端以写入子节点，关闭管道的写入端以从子节点读取。在孩子身上，你做的恰恰相反。您可以查看手册页中的示例并适应您的任务。我建议您将用于将一个孩子分叉的代码分离到单独的函数中。您甚至可以在此函数中将数据写入子级，并仅返回管道的读取端。然后从两个孩子的两个管道中读取。不要忘记`wait`让两个孩子都收获僵尸。

手册页中有一个示例：

```
#include <sys/types.h>
#include <sys/wait.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <string.h>

int
main(int argc, char *argv[])
{
    int pipefd[2];
    pid_t cpid;
    char buf;
    if (argc != 2) {
        fprintf(stderr, "Usage: %s <string>\n", argv[0]);
        exit(EXIT_FAILURE);
    }

    if (pipe(pipefd) == -1) {
        perror("pipe");
        exit(EXIT_FAILURE);
    }

    cpid = fork();
    if (cpid == -1) {
        perror("fork");
        exit(EXIT_FAILURE);
    }

    if (cpid == 0) {    /* Child reads from pipe */
        close(pipefd[1]);          /* Close unused write end */

        while (read(pipefd[0], &buf, 1) > 0)
            write(STDOUT_FILENO, &buf, 1);

        write(STDOUT_FILENO, "\n", 1);
        close(pipefd[0]);
        _exit(EXIT_SUCCESS);

    } else {            /* Parent writes argv[1] to pipe */
        close(pipefd[0]);          /* Close unused read end */
        write(pipefd[1], argv[1], strlen(argv[1]));
        close(pipefd[1]);          /* Reader will see EOF */
        wait(NULL);                /* Wait for child */
        exit(EXIT_SUCCESS);
    }
} 
```

# ruby-on-rails - 我将如何产生 Heroku 工人来分而治之的关键字列表？

> ID：13182571
> 
> 赞同：3
> 
> 时间：2012-11-01T17:39:05.387
> 
> 标签：ruby-on-rails, ruby, heroku, process

我的 Heroku Rails 应用程序维护着大量频繁更改的关键字列表。

我想产生 N 数量的工人，它们将平均划分这个关键字列表并对其进行处理，直到它们重新启动（每次关键字列表更改时我都会重新启动它们）。一旦重新启动，他们就会再次划分关键字并流失。

**例如**：假设我有 1,000 个关键字。

*   如果我生成 1 个工人，该工人将接受 1,000 个关键字。
*   如果我产生 10 个工人，每个工人将使用 100 个关键字。
*   如果我产生 1,000 个工人，每个工人将使用 1 个关键字。

工作人员基本上只是为他们的一组关键字打开与 Twitter 的连接，并处理与这些关键字匹配的传入推文。

**关于如何在 N 个工作人员之间设置 Procfile 和委托 X 关键字的任何想法？**

* * *

这是一种天真的/伪手动方法，仅用于演示。但是，我希望能够产生任意数量的工人，它们会自动在它们之间分割关键字。

档案：

```
keywordstreamer0: bundle exec ruby keyword_streamer.rb 0
keywordstreamer1: bundle exec ruby keyword_streamer.rb 1 
```

关键字流媒体.rb

```
streamer_id = ARGV.shift # 0 or 1

# Split all keywords into array of two groups and take the group
# that matches this worker id (so the two workers take different groups)
keywords = Keyword.all.split_into_groups_of(2)[streamer_id]

# Example work loop
TwitterStream.track(keywords).each do |incoming_tweet|
  process(incoming_tweet)
end 
```

然后，在我的应用程序中，当我需要重新启动关键字工作者时：

```
["keywordstreamer0", "keywordstreamer1"].each do |streamer|
  restart(streamer)
end 
```

我希望能够产生 N 数量的这些工人，但我在分配解决方案时遇到了麻烦。我将不胜感激任何高级概述建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T21:53:31.167

如果您一次只处理一个关键字，没有特定的顺序或分组，您可以只使用队列。

每个工作人员只需从队列中取出下一个关键字（或者可能是下一批关键字，以提高性能），完成工作，然后将结果保存在某处。您无需担心对工作负载进行分区，因为工作人员在准备好后只会要求更多工作，从而允许您扩展到 N 个工作人员，而无需每个工作人员都知道可用工作负载的总大小。

您可以通过多种方式为数据实现队列。我之前使用过的一些更专业的是 AMQP 和 Redis，但这并不是一个详尽的列表。

我要猜测一下，既然你已经`Keyword.all`在你的示例代码中，并且你在 Heroku 上，那么你正在使用 postgres。您也可以在 postgres 中轻松模拟队列，尽管它的性能显然不如专门构建的队列。

这是一种方法：

`status`为您的关键字添加一列。它将有 3 个值：就绪、进行中和完成。status 列的默认值是 ready。

您的工作人员的伪代码如下所示：

```
loop do
  keyword = Keyword.where(:status => "ready").limit(1).first
  keyword.update_attributes!(:status => "in-progress")

  result = process(keyword)
  save_result_somewhere(result)

  keyword.update_attributes!(:status => "complete")
end 
```

我遗漏了一堆实现细节，比如优雅地处理队列为空、队列的初始设置、批处理等。但这就是它的要点。对于适度规模的 N（可能至少 10 个或更多工人），这应该足够执行。除此之外，您可能还需要考虑专门构建的排队技术。

设置队列后，每个工作人员都是相同且自主的。就`heroku ps:scale worker=N`这样，你就完成了！

# php - Yii 框架处理地理空间数据

> ID：13182573
> 
> 赞同：1
> 
> 时间：2012-11-01T17:39:06.910
> 
> 标签：php, sql, yii, geospatial, point

我是 Yii 框架的新手，我有一个将位置存储为地理空间点对象的数据库表。我正在使用代码生成工具来生成更新/添加到数据库的表单。但是，这些表单不能正确处理位置字段。我一直在努力弄清楚这是如何工作的。[这篇文章](https://stackoverflow.com/questions/12535245/how-do-i-insert-a-mysql-spatial-point-with-a-yii-model)中提到的解决方案没有帮助。

如果有人可以将我链接到有关如何在 yii 模型中处理地理空间点对象的教程，我将不胜感激。我觉得这一定是一个非常简单的解决方案，但我似乎无法理解它。下面提供了我的模型、表单和控制器的源代码：

模型

```
<?php

/**
 * This is the model class for table "store".
 *
 * The followings are the available columns in table 'store':
 * @property integer $id
 * @property string $name
 * @property string $location
 */
class Store extends CActiveRecord
{
    /**
     * Returns the static model of the specified AR class.
     * @param string $className active record class name.
     * @return Store the static model class
     */
    public static function model($className=__CLASS__)
    {
        return parent::model($className);
    }

    /**
     * @return string the associated database table name
     */
    public function tableName()
    {
        return 'store';
    }

    /**
     * @return array validation rules for model attributes.
     */
    public function rules()
    {
        // NOTE: you should only define rules for those attributes that
        // will receive user inputs.
        return array(
            array('id, name, location', 'required'),
            array('id', 'numerical', 'integerOnly'=>true),
            // The following rule is used by search().
            // Please remove those attributes that should not be searched.
            array('id, name, location', 'safe', 'on'=>'search'),
        );
    }

    /**
     * @return array relational rules.
     */
    public function relations()
    {
        // NOTE: you may need to adjust the relation name and the related
        // class name for the relations automatically generated below.
        return array(
        );
    }

    /**
     * @return array customized attribute labels (name=>label)
     */
    public function attributeLabels()
    {
        return array(
            'id' => 'ID',
            'name' => 'Name',
            'location' => 'Location',
        );
    }

    /**
     * Retrieves a list of models based on the current search/filter conditions.
     * @return CActiveDataProvider the data provider that can return the models based on the search/filter conditions.
     */
    public function search()
    {
        // Warning: Please modify the following code to remove attributes that
        // should not be searched.

        $criteria=new CDbCriteria;

        $criteria->compare('id',$this->id);
        $criteria->compare('name',$this->name,true);
        $criteria->compare('location',$this->location,true);

        return new CActiveDataProvider($this, array(
            'criteria'=>$criteria,
        ));
    }
} 
```

控制器

```
<?php

class StoreController extends Controller
{
    /**
     * @var string the default layout for the views. Defaults to '//layouts/column2', meaning
     * using two-column layout. See 'protected/views/layouts/column2.php'.
     */
    public $layout='//layouts/column2';

    /**
     * @return array action filters
     */
    public function filters()
    {
        return array(
            'accessControl', // perform access control for CRUD operations
            'postOnly + delete', // we only allow deletion via POST request
        );
    }

    /**
     * Specifies the access control rules.
     * This method is used by the 'accessControl' filter.
     * @return array access control rules
     */
    public function accessRules()
    {
        return array(
            array('allow',  // allow all users to perform 'index' and 'view' actions
                'actions'=>array('index','view'),
                'users'=>array('*'),
            ),
            array('allow', // allow authenticated user to perform 'create' and 'update' actions
                'actions'=>array('create','update'),
                'users'=>array('@'),
            ),
            array('allow', // allow admin user to perform 'admin' and 'delete' actions
                'actions'=>array('admin','delete'),
                'users'=>array('admin'),
            ),
            array('deny',  // deny all users
                'users'=>array('*'),
            ),
        );
    }

    /**
     * Displays a particular model.
     * @param integer $id the ID of the model to be displayed
     */
    public function actionView($id)
    {
        $this->render('view',array(
            'model'=>$this->loadModel($id),
        ));
    }

    /**
     * Creates a new model.
     * If creation is successful, the browser will be redirected to the 'view' page.
     */
    public function actionCreate()
    {
        $model=new Store;

        // Uncomment the following line if AJAX validation is needed
        // $this->performAjaxValidation($model);

        if(isset($_POST['Store']))
        {
            $model->attributes=$_POST['Store'];
            if($model->save())
                $this->redirect(array('view','id'=>$model->id));
        }

        $this->render('create',array(
            'model'=>$model,
        ));
    }

    /**
     * Updates a particular model.
     * If update is successful, the browser will be redirected to the 'view' page.
     * @param integer $id the ID of the model to be updated
     */
    public function actionUpdate($id)
    {
        $model=$this->loadModel($id);

        // Uncomment the following line if AJAX validation is needed
        // $this->performAjaxValidation($model);

        if(isset($_POST['Store']))
        {
            $model->attributes=$_POST['Store'];
            if($model->save())
                $this->redirect(array('view','id'=>$model->id));
        }

        $this->render('update',array(
            'model'=>$model,
        ));
    }

    /**
     * Deletes a particular model.
     * If deletion is successful, the browser will be redirected to the 'admin' page.
     * @param integer $id the ID of the model to be deleted
     */
    public function actionDelete($id)
    {
        $this->loadModel($id)->delete();

        // if AJAX request (triggered by deletion via admin grid view), we should not redirect the browser
        if(!isset($_GET['ajax']))
            $this->redirect(isset($_POST['returnUrl']) ? $_POST['returnUrl'] : array('admin'));
    }

    /**
     * Lists all models.
     */
    public function actionIndex()
    {
        $dataProvider=new CActiveDataProvider('Store');
        $this->render('index',array(
            'dataProvider'=>$dataProvider,
        ));
    }

    /**
     * Manages all models.
     */
    public function actionAdmin()
    {
        $model=new Store('search');
        $model->unsetAttributes();  // clear any default values
        if(isset($_GET['Store']))
            $model->attributes=$_GET['Store'];

        $this->render('admin',array(
            'model'=>$model,
        ));
    }

    /**
     * Returns the data model based on the primary key given in the GET variable.
     * If the data model is not found, an HTTP exception will be raised.
     * @param integer the ID of the model to be loaded
     */
    public function loadModel($id)
    {
        $model=Store::model()->findByPk($id);
        if($model===null)
            throw new CHttpException(404,'The requested page does not exist.');
        return $model;
    }

    /**
     * Performs the AJAX validation.
     * @param CModel the model to be validated
     */
    protected function performAjaxValidation($model)
    {
        if(isset($_POST['ajax']) && $_POST['ajax']==='store-form')
        {
            echo CActiveForm::validate($model);
            Yii::app()->end();
        }
    }
} 
```

形式：

```
<?php
/* @var $this StoreController */
/* @var $model Store */
/* @var $form CActiveForm */
?>

<div class="form">

<?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'store-form',
    'enableAjaxValidation'=>false,
)); ?>

    <p class="note">Fields with <span class="required">*</span> are required.</p>

    <?php echo $form->errorSummary($model); ?>

    <div class="row">
        <?php echo $form->labelEx($model,'id'); ?>
        <?php echo $form->textField($model,'id'); ?>
        <?php echo $form->error($model,'id'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'name'); ?>
        <?php echo $form->textArea($model,'name',array('rows'=>6, 'cols'=>50)); ?>
        <?php echo $form->error($model,'name'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'location'); ?>
        <?php echo $form->textField($model,'location'); ?>
        <?php echo $form->error($model,'location'); ?>
    </div>

    <div class="row buttons">
        <?php echo CHtml::submitButton($model->isNewRecord ? 'Create' : 'Save'); ?>
    </div>

<?php $this->endWidget(); ?>

</div><!-- form --> 
```

这是我尝试从自动生成的表单向存储表添加行时发生的屏幕截图：

![错误](../Images/5d45435f97a1e3424dc85725bf763620.png)

这是预期的，因为必须从纬度和经度构造点对象。我不知道如何将其融入 Yii 模型中。提前感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T12:29:13.080

尝试`GeomFromText`在 yii 中使用存储过程：

[http://blog.havenisms.com/using-stored-procedures-in-yii](http://blog.havenisms.com/using-stored-procedures-in-yii)

# css - 如何使用 css 模糊图像但保持边框笔直？

> ID：13182577
> 
> 赞同：6
> 
> 时间：2012-11-01T17:39:22.860
> 
> 标签：css, image, blur

我正在尝试使用 CSS 模糊图像。我正在使用“模糊”，但我发现这也模糊了边界。有没有办法保持边框笔直但模糊图像的其余部分？

[http://www.inserthtml.com/2012/06/css-filters/](http://www.inserthtml.com/2012/06/css-filters/)

# css

```
filter: filter(value);
-webkit-filter: filter(value);
-moz-filter: filter(value);
-o-filter: filter(value);
-ms-filter: filter(value); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-01T17:59:15.127

尝试这样的事情：

HTML：

```
<div id="container">
   <img id="image" src="http://upload.wikimedia.org/wikipedia/commons/thumb/1/1e/Benz-velo.jpg/220px-Benz-velo.jpg">
</div>​ 
```

CSS：

```
#image{
   filter: blur(5px);
   -webkit-filter: blur(5px);
   -moz-filter: blur(5px);
   -o-filter: blur(5px);
   -ms-filter: blur(5px);

   margin:-1px;
   padding:1px;
}

#container{
   width:222px;
   height:179px;
   overflow:hidden;
} 
```

由于某种原因（至少在 Chrome 中），图像上的边距似乎是必需的。

同样在 jsfiddle：http: [//jsfiddle.net/jdwire/HUaBV/1/](http://jsfiddle.net/jdwire/HUaBV/1/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T17:40:47.850

您可能需要将该图像包装在块级元素中并设置其尺寸以匹配图像并添加`overflow: hidden`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T17:51:13.293

`div`在图像周围环绕 a并调整`div`比图像尺寸小的几个像素的大小（否则不会裁剪模糊的边缘）。然后装`overflow:hidden`上div。

[请参阅此处的 jsFiddle 演示](http://jsfiddle.net/mB7jv/1/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T18:43:47.773

有一个带有边框的 div 就在它上面，然后模糊图像。

css

```
div.container
{
border:2px solid #000000;
display:inline-block;
}

img.theimage
{
filter: filter(value);
-webkit-filter: filter(value);
-moz-filter: filter(value);
-o-filter: filter(value);
-ms-filter: filter(value);
} 
```

html

```
<div class="container">
<img class="theimage" src="iamgesrc.jpg" />
</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-30T21:56:41.420

为了保持边缘清晰，您可以首先将图像在其容器中向左移动并向上移动相同数量的模糊 - 这将清理顶部/左侧边缘。要锐化底部/右侧边缘，请将图像容器的宽度减小 2 * 模糊量。

```
#image {
    filter: blur(5px);
    -webkit-filter: blur(5px); /* support appears limited http://caniuse.com/#search=css%20filter%20effects */
    margin-left: -5px; /* move the image negative x-blur distance */
    margin-top: -5px; /* move the image negative y-blur distance */
}
#container {
    /* actual image size is 220px * 177px */
    width: 210px; /* subtract 2 * x-blur from width */
    height: 167px; /* subtract 2 * y-blur from height */
    overflow: hidden;
} 
```

约书亚的小提琴在这里详细说明：http: [//jsfiddle.net/3EHe9/](http://jsfiddle.net/3EHe9/)

# media-queries - 使用 enquire.js - 调用 jQuery 的媒体查询

> ID：13182579
> 
> 赞同：1
> 
> 时间：2012-11-01T17:39:29.770
> 
> 标签：media-queries, enquire.js

我正在尝试在一个项目中使用 enquire.js 来控制带有媒体查询的 jQuery 我有一个 jquery 幻灯片，我想在窗口宽于 500 像素时启动它。

我在 load_Gallery.js 中使用此代码

```
 $(document).ready(function() {

        enquire.register("screen and (min-width: 500px)", function() {

          ///slideshow code here

        }).listen();

    }); 
```

我在页面顶部调用 load_Gallery.js。

```
 <script type="text/javascript" src="js/load_Gallery.js"></script> 
```

我在这里下载了 enquire.js -

[https://raw.github.com/WickyNilliams/enquire.js/master/dist/enquire.js](https://raw.github.com/WickyNilliams/enquire.js/master/dist/enquire.js)

我将它复制到一个 txt 文件中，并在我的 js 文件夹中将其命名为 enquire.1.4.1.js 以及其他 js 文件。

我没有像文档头部的其他 js 文件一样调用这个文件，我应该在头部调用它吗？

我做错了什么 - 任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:41:14.440

您是否访问过[http://jquery.com/](http://jquery.com/)并下载了文件并将其连接到您的脚本？

# java - Java 中的 eBay Find API 引发“IllegalArgumentException：不支持：缩进数”异常

> ID：13182581
> 
> 赞同：5
> 
> 时间：2012-11-01T17:39:39.520
> 
> 标签：java, exception, illegalargumentexception, ebay-api

我正在使用 eBay Finding API for Java，并根据包含的教程执行基本测试搜索。调用完成，但`java.lang.IllegalArgumentException`在执行过程中抛出异常。

这是改编自示例的基本代码：

```
ClientConfig config = new ClientConfig();
config.setEndPointAddress("http://svcs.ebay.com/services/search/FindingService/v1");
config.setGlobalId("EBAY-GB");
config.setApplicationId("my app id");

FindingServicePortType serviceClient =FindingServiceClientFactory.getServiceClient(config);

FindItemsByKeywordsRequest request = new FindItemsByKeywordsRequest();
request.setKeywords("HTC One X");

FindItemsByKeywordsResponse result = serviceClient.findItemsByKeywords(request);

System.out.println("Ack = "+result.getAck()); 
```

这是记录的输出：

```
[ERROR] 2012-11-01 16:52:09,847
fail to get xml string from SOAP message

java.lang.IllegalArgumentException: Not supported: indent-number 
```

有没有其他人经历过这个/知道为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-07T22:10:22.497

看起来它是 JAXWSHandler 中的错误。尝试禁用请求/响应日志记录

```
config.setSoapMessageLoggingEnabled(false); 
```

# r - install_github 没有安装 inst 中的所有文件夹

> ID：13182582
> 
> 赞同：0
> 
> 时间：2012-11-01T17:39:42.287
> 
> 标签：r, devtools

我不确定我是否在做一些愚蠢的事情，但由于某种原因，`inst`当我运行`install_github('slidify', 'ramnathv', ref = 'dev')`. 特别是该文件夹`inst/scaffold`未安装。

我`devtools::install`从本地 git repo 运行，一切正常。我还检查了 zipball 以确保它包含 inst\scaffold 并且确实如此。

有谁知道可能会发生什么？

笔记。我在[https://github.com/hadley/devtools/issues/185交叉发布此问题](https://github.com/hadley/devtools/issues/185)

# c - 存储和使用 300 位整数

> ID：13182588
> 
> 赞同：3
> 
> 时间：2012-11-01T17:40:11.363
> 
> 标签：c

```
int main()
{
    unsigned long long key = 21739827982173982173921739217392173217397213271832193721973291732917321732132173971317382173213782163872163872163872163872163826176728328621321487219372198371298775647326409817402198732198432974329479832749173821732198732173217392173721372193728193782193792173921732171;
} 
```

编译器说我要分配的数字对于所选类型来说太大了。如何存储它然后执行操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T17:42:43.217

C 对此没有任何内置支持。您需要一个“bignum”库（也称为“任意精度算术”或“多精度算术”库）。 [GNU MP](http://gmplib.org/)有据可查并且很受欢迎。

编辑：我刚刚注意到您的变量被命名为“key”，并且该数字似乎大约有 900 位长。您是否尝试实施[RSA](https://en.wikipedia.org/wiki/RSA_%28algorithm%29)？如果是这样，您真的应该使用经过良好测试的密码库；您可以在 RSA 实现中犯许多细微的错误，这些错误会损害您的安全性。那里的选项包括[gcrypt](https://www.gnu.org/software/libgcrypt/)、[NSS](https://www.mozilla.org/projects/security/pki/nss/)和[OpenSSL](https://openssl.org/)。如果您可以与 libgcrypt 许可证兼容，我强烈建议您使用它，因为它的 API 和文档比其他两个要好得多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T17:43:58.823

你可以从这里得到一个任意精度的整数库。

[http://en.wikipedia.org/wiki/Arbitrary-precision_arithmetic#Arbitrary-precision_software](http://en.wikipedia.org/wiki/Arbitrary-precision_arithmetic#Arbitrary-precision_software)

您可以使用任意精度库来处理大数字。

**或者**

您可以使用 double - 它的范围约为 300 位，但精度只有 53 位，因为它存储为两部分，一个指数和一个尾数。53 位为您提供 15-18 位精确范围内的数字

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T17:43:21.507

在大多数情况下，如果不是所有情况，您都需要一个大整数或任意精度的数学库。（C 的整数类型很少有那么大；可能会有专门的编译器发生，但它们根本不是主流。即使你设法找到这样的编译器，你的代码也不会是可移植的。）

检查[GMP](http://gmplib.org/)。

# java - 图像未从 jar 加载

> ID：13182589
> 
> 赞同：1
> 
> 时间：2012-11-01T17:40:16.377
> 
> 标签：java, swing, awt

我制作了一个应用程序，其中要为图标加载一些图像。当我使用

```
imageOpen = Toolkit.getDefaultToolkit().getImage("Images\\open.png"); 
```

但是当我将它导出为 jar 时，图像没有显示出来然后在这里和那里我尝试了一些东西，但在这两种情况下，URL 都返回 null

```
URL u = this.getClass().getResource("Images\\open.png");
imageOpen = Toolkit.getDefaultToolkit().createImage(u); 
```

另一个案例

```
ClassLoader classLoader = Thread.currentThread().getContextClassLoader();
URL resource = classLoader.getResource("Images\\open.png");
imageOpen = Toolkit.getDefaultToolkit().createImage(resource); 
```

谁能告诉我为什么我会得到 null ，我什至尝试了 "\Images\open.png" 、 "/Images/open.png" 和 ".\Images\open.png" 作为我使用 eclipse 的路径和图像存储在名为 Images 的文件夹的父目录中，源文件位于 src>master

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T17:44:04.433

使用`images/open.png`. 正斜杠适用于任何操作系统。此外，`jar tvf`您的 jar 文件以确保图像目录`Images`按照您的想法大写。可能不是，如果您使用的是 Windows（或不区分大小写的文件系统），它可能在目录中工作正常，但不能从 jar 中工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T18:01:45.970

您确定 url 为空还是使用 imageOpen 时出现问题？有时 Toolkit.getDefaultToolkit().createImage() 会立即返回，但图像未完全加载且 imageOpen 不可用。您需要等待图像的加载。这是java代码

```
JLabel label = new JLabel();
MediaTracker media = new MediaTracker(label);

Image imagen = Toolkit.getDefaultToolkit().getImage ("fichero.gif");
media.addImage(imagen, 23);
try
{
   media.waitForID(23);
}
catch (InterruptedException e)
{
   ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T04:03:38.890

在为 jar 制作资源包并从该文件中获取路径的帮助下，我能够解决我的问题

# asp.net-mvc - NopCommerce 是否只能在启用 Javascript 的情况下使用？

> ID：13182602
> 
> 赞同：0
> 
> 时间：2012-11-01T17:41:03.880
> 
> 标签：asp.net-mvc, asp.net-mvc-3, nopcommerce

在演示商店（[http://demo.nopcommerce.com/](http://demo.nopcommerce.com)）中，如果我没有启用 Javascript，我无法使用一些基本按钮，例如“添加到购物车”或“提交”（时事通讯）。

这只是前端设计问题，还是商店的某些部分在没有启用 javascript 的情况下无法使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:47:10.677

如果 JavaScript 被禁用，“添加到购物车”或“提交”（时事通讯）将不起作用。nopCommerce 使用**AJAX**。

**添加到购物车**

```
<input type="button" 
onclick="AjaxCart.addproducttocart('/addproducttocart/13');return false;" 
class="button-2 product-box-add-to-cart-button" value="Add to cart"> 
```

# entity-framework - 实体框架和并行

> ID：13182603
> 
> 赞同：14
> 
> 时间：2012-11-01T17:41:12.817
> 
> 标签：entity-framework, parallel-processing, profiling, task-parallel-library, tpl-dataflow

**背景**

我有一个应用程序接收定期数据转储（XML 文件）并使用 Entity Framework 5（代码优先）将它们导入现有数据库。导入是通过 EF5 而不是 BULK INSERT 或 BCP 进行的，因为必须应用实体中已经存在的业务规则。

处理似乎在应用程序本身中受 CPU 限制（极快的、启用写入缓存的磁盘 IO 子系统在整个过程中显示几乎为零的磁盘等待时间，而 SQL Server 显示不超过 8%-10% 的 CPU 时间）。

为了提高效率，我使用带有组件的[TPL Dataflow 构建了一个管道，用于：](http://msdn.microsoft.com/en-us/library/hh228604.aspx)

```
Read & Parse XML file
        |
        V
Create entities from XML Node
        |
        V
Batch entities (BatchBlock, currently n=200)
        |
        V
Create new DbContext / insert batched entities / ctx.SaveChanges() 
```

我看到这样做可以显着提高性能，但不能使 CPU 超过 60%。

**分析**

怀疑某种资源争用，我使用 VS2012 Profiler 的*资源争用数据（并发）*模式运行该过程。

*分析器向我显示标记为Handle 2*的资源的争用率为 52% 。深入研究，我看到为*Handle 2*创建最多争用的方法是

```
System.Data.Entity.Internal.InternalContext.SaveChanges() 
```

第二位，大约是 SaveChanges() 的 40%，是

```
System.Data.Entity.DbSet`1.Add(!0) 
```

**问题**

*   我怎样才能弄清楚*Handle 2*到底是什么（例如 TPL 的一部分，EF 的一部分）？
*   EF 是否会限制从单独线程中分离 DbContext 实例的调用？他们似乎在争夺一个共享资源。
*   在这种情况下，我可以做些什么来提高并行性？

**更新**

对于有问题的运行，调用 SaveChanges 的任务的最大并行度设置为 12（我在以前的运行中尝试了各种值，包括 Unbounded）。

**更新 2**

Microsoft 的 EF 团队提供了反馈。请参阅我的答案以获取摘要。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T19:24:39.733

下面总结了我与实体框架团队在这个问题上的互动。如果有更多信息，我会更新答案

*   该问题可以在 Microsoft 重现。
*   句柄争用与网络 I/O 相关（即使使用本地主机上的 SQL Server）。具体来说，System.Data.dll 中网络 I/O 的读取缓冲区存在争用。
*   EF 团队现在正在与 SQL Connectivity 团队合作，以更好地了解该问题。
*   微软目前还没有关于如何最小化这种争用的影响的指导。

**更新**

现在正在 CodePlex 上跟踪此问题：

[http://entityframework.codeplex.com/workitem/636?PendingVoteId=636](http://entityframework.codeplex.com/workitem/636?PendingVoteId=636)

# c - 制作库：头文件和源文件中的类型冲突

> ID：13182604
> 
> 赞同：0
> 
> 时间：2012-11-01T17:41:12.593
> 
> 标签：c, compilation

我无法理解 c 头文件和源文件。我有：

**某事.c**

```
#include <stdio.h>
#include "something.h"

typedef struct {
    int row, col;
} point;

point
whereispoint(point **matrix, int rows, int cols)
{
   ..... Does something ....
   printf("something...");
} 
```

**某事.h**

```
typedef struct point * p;

p whereispoint(p **matrix, int rows, int cols); 
```

**主程序**

```
#include <stdio.h>
#include "something.h"

int
main(void)
{
   int row, col;
   p **matrix=malloc(bla, bla);
   .....Something.....
   p=whereispoint(matrix, row, col);
   return 0;
} 
```

现在，当我实际上不知道如何编译它时……我试过`gcc -c main.c something.c` 了，但这不起作用，我尝试单独编译`gcc -c main.c`，`gcc -c something.c` 然后**main.c**工作，但**something.c**没有。

我实际上是在尝试用 something.c 创建一个库，但由于我什至无法将其编译为目标代码，所以我不知道该怎么做。**我猜something.h**中的结构类型和它的typedef有问题，但我不知道是什么......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:49:10.327

在标头中，函数`whereispoint()`被声明为返回 a `struct point*`(the `typedef p`) 但定义返回 a `struct point`，而不是指针。

就个人而言，我发现`typedef`指针令人困惑，并认为如果`*`用于表示指针，代码中会更清楚：

```
/* header */
typedef struct point point_t;

point_t* whereispoint(point_t** matrix, int rows, int cols);

/* .c */
struct point {
    int row, col;
};

point_t* whereispoint(point_t** matrix, int rows, int cols)
{
   ..... Does something ....
   printf("something...");
   return ??;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T17:49:38.230

以下：

```
typedef struct {
  int row, col;
} point; 
```

typedefs 一个无名结构到类型点。

然后在something.h 中，将“struct point”（未定义的结构类型引用）类型定义为“*p”。

通常，您应该在头文件中定义所有“接口类型”，而不是试图隐藏实现（C 需要知道实现才能访问任何内容）。

尝试在 something.h 中做这样的事情：

```
typedef struct point {
  int row, col;
} *p; 
```

或者，如果您不确定 typedef 的确切工作原理，只需执行以下操作：

```
 struct point {
  int row, col;
} 
```

这声明了一个结构类型。

# php - 仅从另一个数组的值创建关联数组 - PHP

> ID：13182613
> 
> 赞同：5
> 
> 时间：2012-11-01T17:41:35.673
> 
> 标签：php, arrays, dictionary, associative-array

我有一个简单的数组，其中键*总是*后跟值：

```
Array (
    [0] => x
    [1] => foo
    [2] => y
    [3] => bar
) 
```

我想将其转换为关联的：

```
Array (
    [x] => foo
    [y] => bar
) 
```

最简单、最优雅的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T17:48:06.240

内存效率高，计算量少。

如果 $input 数组有奇数个值，则最后一个值为 NULL。

```
$result = array();

while (count($input)) {
    $result[array_shift($input)] = array_shift($input);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T17:45:08.737

我不知道这有多有效，但是：

```
$newArray = array();
foreach(array_chunk($array, 2) as $keyVal){
    list($key, $val) = $keyVal;
    $newArray[$key] = $val;
} 
```

演示：[http ://codepad.org/VF8qHAhQ](http://codepad.org/VF8qHAhQ)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T17:57:14.163

```
$ar = Array("x","foo","y","bar");

$assoc = Array();

for($i=0;$i<count($ar);$i+=2){$assoc[$ar[$i]]=$ar[$i+1];}

print_r($assoc); 
```

输出：数组（ [x] => foo [y] => bar ）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T17:44:39.660

我将从一个简单的 for 循环开始

```
$arr = array(
'x',
'foo',
'y',
'bar'
);

$result = array();
$end = count($arr);
for ($i = 0; $i+1 < $end; $i+=2) {
  $result[$arr[$i]] = $arr[$i+1];
}

var_dump($result); 
```

输出：

```
array(2) {
  ["x"]=> string(3) "foo"
  ["y"]=> string(3) "bar"
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-01T17:45:37.193

假设您希望键/值对处于每个/其他模式中，您可以使用：

```
$data = array('x', 'foo', 'y', 'bar', 'z');
$new = array();

$end = count($data);
for ($i = 0; $i < $end; $i += 2) {
    $new[$data[$i]] = (isset($data[$i + 1]) ? $data[$i + 1] : '');
}

print_r($new); 
```

会给：

```
Array
(
    [x] => foo
    [y] => bar
    [z] => 
) 
```

这将遍历您的数据列表并将第一个值设置为键，将下一个值设置为值。如果没有“下一个”值（即原始数组中不能被 2 整除的最后一项），则为空。

这种方法的警告是，如果多次看到相同的“密钥”，它将被覆盖。这可以通过添加`if (isset($new[$data[$i]])) continue;`作为循环中的第一行来规避。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-01T17:46:57.587

怎么样：

```
$data = array('x','foo','y','bar');
$i = 0;
$n = count($data)
$newData = array();
while($i < $n) {
    $newData[$data[$i]] = $data[++$i];
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-18T12:56:01.927

@Rocket 片段的现代等价物是在`foreach()`循环中使用数组解构。

我的代码片段不使用“计数器”变量或进行任何迭代函数调用。

这将非常有效，因为只有 1 个函数调用来生成所需的结果。

代码：（[演示](https://3v4l.org/kZbUV)）

```
$array = ['x', 'foo', 'y', 'bar', 'z', 'zed'];

$result = [];
foreach (array_chunk($array, 2) as [$k, $v]) {
    $result[$k] = $v;
}
var_export($result); 
```

输出：

```
array (
  'x' => 'foo',
  'y' => 'bar',
  'z' => 'zed',
) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-10-18T18:53:12.557

所以键的值的顺序如下，当我们为一个值放置一个键时，我们不需要那个索引。我假设给定数组的键总是整数并且从 0 开始。

```
$array = ['x', 'foo', 'y', 'bar', 'z', 'zed'];
var_dump( $array);
$new = [];
foreach ($array as $key => $value) {
      if( ($key % 2) === 1 )
         $new[ $array [ $key-1 ] ] = $value;

}

 var_dump( $new ); 
```

# wordpress - wordpress xml-rpc 预定帖子

> ID：13182620
> 
> 赞同：2
> 
> 时间：2012-11-01T17:42:13.740
> 
> 标签：wordpress, coldfusion, xml-rpc

我正在尝试将新的预定帖子远程添加到我的 wordpress 博客中。但是，当我尝试将“post_status”设置为“future”时，它没有这样做并将“Post_Status”设置为“Draft”。
我正在使用“metaWeblog.newPost”方法创建新帖子。
有人知道预定帖子有什么问题吗？
“metaWeblog.newPost”是否有可能不支持“Post_Status”成为“未来”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T10:03:57.187

当您将帖子状态更改为未来时，您还必须提供未来日期。例子：

```
global $post;
$my_post = array();
$my_post['ID'] = $ID;
$my_post['post_status'] =  'future';
$my_post['post_date'] =  '2012-12-25 09-20-58'; 
wp_update_post( $my_post ); 
```

# django - Django：获取 CURRENT_TIMESTAMP 的原始 sql 查询未在后续调用中更新

> ID：13182624
> 
> 赞同：3
> 
> 时间：2012-11-01T17:42:36.093
> 
> 标签：django, postgresql

我有以下代码片段用于从数据库服务器获取当前时间戳：

```
class DbUtils:
    @staticmethod
    def get_current_timestamp():
        from django.db import connection
        cursor = connection.cursor()
        cursor.execute("SELECT CURRENT_TIMESTAMP")
        rows = cursor.fetchone()
        return rows[0] 
```

为了测试这段代码，我编写了以下测试：

```
def test_get_current_timestamp(self):
    ts_0 = DbUtils.get_current_timestamp()
    time.sleep(1)
    ts_1 = DbUtils.get_current_timestamp()
    delta_seconds = (ts_1 - ts_0).seconds
    assert 1 <= delta_seconds <= 3 
```

这个测试没有通过，所以我稍微研究了一下。原因是每次调用`DbUtils.get_current_timestamp()`都返回相同的值。

```
In [31]: DbUtils.get_current_timestamp()
Out[31]: datetime.datetime(2012, 11, 1, 17, 17, 48, 950799, tzinfo=<UTC>)

# Wait a couple seconds

In [32]: DbUtils.get_current_timestamp()
Out[32]: datetime.datetime(2012, 11, 1, 17, 17, 48, 950799, tzinfo=<UTC>) 
```

我监控了 postgresql 日志——每个查询都在访问数据库。

我能够完成这项工作的唯一方法是导入 django.db.transaction 并`transaction.commit_unless_managed()`在执行 SELECT 之前执行。在 SELECT 之前提交事务似乎不正确，因为我不知道将在什么上下文中调用 get_current_timestamp。有关如何解决此问题或解决此问题的任何想法？时间戳需要来自数据库服务器，以确保正确完成所有相对时间计算。

我在跑步：

```
Django==1.4.2
psycopg2==2.4.5 (with hstore extension via django-hstore==1.1.1)
PostgreSQL 9.1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T18:44:39.270

在与同事讨论后，我们意识到这实际上可能是理想的行为，因为每个 Web 请求我们只能获得一个时间戳。无论如何，我通常`get_current_timestamp`在该请求期间存储返回值并将其用于任何操作。

为了使我的测试通过，我需要执行以下操作：

```
def test_get_current_timestamp(self):
    from django.db import transaction
    ts_0 = DbUtils.get_current_timestamp()
    transaction.commit_unless_managed()
    time.sleep(1)
    ts_1 = DbUtils.get_current_timestamp()
    transaction.commit_unless_managed()
    delta_seconds = (ts_1 - ts_0).seconds
    assert 1 <= delta_seconds <= 3 
```

正如@a_horse_with_no_name 所指出的：CURRENT_TIMESTAMP 是事务开始的时间。

# javascript - AJAX 表单未提交 Javascript 数组

> ID：13182630
> 
> 赞同：0
> 
> 时间：2012-11-01T17:42:46.323
> 
> 标签：javascript, jquery

当我创建一个带有 .on('click') 事件的新按钮时，我有类似的代码工作，但我需要使用表单附带的按钮。我已将这些行添加到初始化程序中：

```
var options =
        {
            data:
            {
                    "create": _this.toBeCreated,
                    "update": _this.toBeUpdated,
                    "destroy": _this.toBeDeleted
            },
            dataType: 'script',
            type: 'PUT',
            url: 'custom_statuses/modify_statuses'
        };

        $(_this.delegator.$target.find(".UIForm")[0]).ajaxForm(options); 
```

此代码半有效，因为如果我将硬编码值插入数据中，我会在 AJAX 调用中返回它们。

但是，当我尝试使用这些 Javascript 数组（我确认它们不是空的）时，只有最后一个元素会通过 AJAX 推出。

例如：

```
toBeDeleted = [1,5,9,7]; 
```

应该返回：

```
"delete": [1,5,9,7] 
```

实际上返回：

```
"delete": "7" 
```

我不知道出了什么问题，但同样，这段代码之前使用的是附加到按钮的 .on(click) 。它看起来很相似：

```
$.ajax({
            type: 'PUT',
            url: 'custom_statuses/modify_statuses',
            dataType: 'script',
            data:
            {
                "create": _this.toBeCreated,
                "update": _this.toBeUpdated,
                "destroy": _this.toBeDeleted
            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T18:20:15.977

找到了答案。我需要在数据块中包含括号：

```
"create[]": _this.toBeCreated,
"update[]": _this.toBeUpdated,
"destroy[]": _this.toBeDeleted 
```

我不知道如何指示数组数组。更新是一个数组数组。“更新[[]]”不起作用。

# android - Android USB 调试模式适用于 Windows 而不是 Ubuntu

> ID：13182631
> 
> 赞同：1
> 
> 时间：2012-11-01T17:42:52.720
> 
> 标签：android, ubuntu

有问题的 Android 设备是 Micromax A87（在全球市场上是一个相对不为人知的品牌，但我希望这不重要）。

在 Ubuntu 中，我仔细检查了 udev 规则。他们看起来都很完美。（我也用另一部手机交叉检查过）。USB调试模式无论如何都不会出现。

```
adb devices 
```

根本没有显示任何设备。

但是，在手机上启用USB调试选项后，在windows安装通用手机驱动程序后，它可以在Win7上运行。

有趣的是，如果我现在在不断开电缆的情况下回到 Ubuntu，它也会出现在那里，我通过“adb devices”看到它！

所以我想这不是开发机器的问题。该设备似乎在 Windows 中设置了一个属性，该属性在 USB 连接断开之前一直保持锁定状态。

有什么方法可以让它发挥作用？（除了在 Windows 上开发：P）

> 顺便说一句，/data/property/persist.service.adb.enable 也是 1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:47:01.110

您需要将设备的 USB ID 添加到 ~/.android/adb_usb.ini

插入后，您应该能够从 /var/log/messages 获取 USB ID。

使用 adb kill-server 重启 adb；adb 启动服务器。

# r - Rbuildignore 和排除目录

> ID：13182634
> 
> 赞同：42
> 
> 时间：2012-11-01T17:43:02.833
> 
> 标签：r, package

我对排除两个目录`inst\docs`以及`inst\examples`构建和安装软件包感兴趣。我知道一个简单的方法就是移动`docs`到`examples`根目录，它们不会被安装。`inst`但是，出于其他原因，我想保留它们。

我尝试将以下行添加到`.Rbuildignore`

```
inst/docs
inst/examples 
```

我使用 RStudio v 0.97 并`devtools`从源代码构建和安装包。但是，当我这样做时，我仍然会看到`inst\docs`并`inst\examples`安装。我尝试了不同的正则表达式，但似乎没有任何效果。

难道我做错了什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2017-03-20T15:02:32.840

你可以做

```
usethis::use_build_ignore(c("yourfolder1", "yourfolder2", "yourfile")) 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-11-01T20:35:53.040

这似乎是 RStudio 的一个问题。从 devtools 包中使用`install`似乎会导致文件夹被忽略。直接从命令行构建和安装似乎也会导致文件夹被忽略。然而，RStudio 中的“构建和重新加载”按钮似乎没有考虑到这些文件夹的 .Rbuildignore。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-06-29T22:24:49.557

一个旧帖子，但在构建二进制包时它似乎仍然是一个问题。不过，以下 hack 似乎有效（即构建源包，然后从该源包构建二进制文件）。

```
f <- devtools::build("mypackage")
system(paste0("R CMD INSTALL --build ", f)) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-11-26T01:47:32.117

只是为了更新，从最新版本开始，`devtools::use_build_ignore`已移至：

```
usethis::use_build_ignore(c("yourfolder1", "yourfolder2", "yourfile")) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-13T10:08:33.013

我发现将`.Rbuildignore`文件的每一行视为正则表达式时，我获得了最一致的行为。在您的情况下，我将在项目的根目录中手动创建一个文本文件，`.Rbuildignore`并以内容命名

```
^inst/docs
^inst/examples 
```

该表达式匹配以 ( ) 字符串`^inst/docs`开头的任何文件或文件夹。 为每个表达式添加一个尾随，我发现这会导致这些文件夹中的文件不会被模式捕获（因此不会被忽略）。`^``inst/docs``usethis::use_build_ignore()``$`

# xcode - 旧 Mac OS 项目的发布方案中出现编译器错误的奇怪 Xcode 问题

> ID：13182643
> 
> 赞同：-1
> 
> 时间：2012-11-01T17:43:22.717
> 
> 标签：xcode, macos, properties

我有一个在 10.6 下发布的项目。它有相当标准的“调试”和“发布”方案。

我正在为需要自定义版本的客户做一些新的工作。我使用的是 Xcode 4.5.1，并将基本 SDK 设置为 10.7，但部署目标设置为 10.6 以实现向后兼容性。

在我编写的新代码中，我开始使用最近添加到 Xcode 中的自动生成的实例变量（不确定这是 4.4 还是 4.5）。我有时在类的实现中使用 _iVar 变量来访问属性的底层 iVar。

我的调试方案构建了一个调试版本的 clinet 就好了。

但是，当我切换到发布方案时，对自动生成的实例变量的引用会引发未声明的标识符错误。

在我的调试方案中必须有一些正确的设置，但在我的发布方案中却没有。我不是构建设置方面的专家，也不知道该设置是什么。有人可以帮助我吗？

我还有一个令我困惑的问题。我在我的项目中添加了一个新类（在远程 SVN 存储库中维护。）新文件在项目导航器中被标记为“A”，表示它们被标记为在下一次提交时添加到我的存储库中。

我决定重命名课程。过去我在重命名受源代码控制的文件时遇到过问题，所以我所做的是复制查找器中的文件，将它们的名称更改为新名称，然后将它们添加到项目中。然后我从 Xcode 中的项目中删除了 OLD 文件。但是，现在，当我构建时，我会收到一条警告说这些旧文件丢失了。Xcode 仍然在某个地方引用了我告诉它删除的文件。这些引用会在哪里，以及如何删除它们？我的项目“编译源”构建阶段显示新文件，但不显示我删除的旧文件。

提前感谢您的帮助，

Duncan Champney WareTo

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T19:26:33.090

我已经找到了问题第一部分的答案，但这并不好。

问题是在 Mac OS 上，Objective C 2.0 需要现代的 Objective C 运行时。这需要 64 位。

在 iOS 上，现代 Objective C 运行时适用于所有操作系统版本，而 Objective C 2.0 可用于几个最近的 iOS 版本。

在 Mac OS 上，唯一的 64 位操作系统版本是 10.8。据我了解，OS 10.6 和 10.7 安装默认为 32 位。

为了使用 Objective C 2.0 的特性，我们必须只构建 64 位，这意味着在 32 位模式下运行他们的机器的人不能使用我们的应用程序。那很糟。

# ruby-on-rails - Rails Relation#update_all 比 Relation#update 消耗更多的内存

> ID：13182644
> 
> 赞同：4
> 
> 时间：2012-11-01T17:43:24.720
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

`Relation#update(id, attributes)`文档提到“无论对象是否成功保存到数据库，都会返回结果对象。”，而没有进行实例化、回调或验证的状态`Relation#update_all(updates, conditions = nil, options = {})`（直接数据库查询）。

运行一个简单的性能测试并替换`Relation#update`为`Relation#update_all`，看起来内存消耗增加了。

有什么解释吗？

摘抄：

```
#Before
MyModel.update(my_hash['id'], special_attrs)

#After (more memory consumed)
MyModel.where(:id => my_hash['id']).update_all(special_attrs)

#Update-2 (slightly more memory consumed than with update(id, attrs)
MyModel.update_all(special_attrs, {:id => my_hash['id']}) 
```

*   Windows XP（是的 - 我知道）
*   JRuby 1.6.8 (1.9)
*   导轨 3.2.8

**更新**- 一些用于比较的基本数字：对于触发的大约 700 个更新语句，差异约为 0.6MB（每条语句 0.8kB）

**更新 2** - 根据@philip-hallstrom 的建议删除了 AREL 链接。内存占用略有减少，但仍`MyModel.update_all(attrs, conditions)`比`MyModel.update(id, attrs)`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T00:33:49.447

如果你这样做有什么不同：

`MyModel.update_all(special_attrs, {:id => my_hash['id']})`

我没有深入挖掘，但看起来 update_all 立即调用了 Arel。我停止照顾`.update -> .update_attributes -> .assign_attributes`，根本没有看到 Arel，尽管我确信它一定会在某个时候发挥作用。

如果我不得不猜测，我会说这就是原因。

我假设这是在某个地方循环？否则，为什么不这样做：

`MyModel.update_all(special_attrs, {:id => all_my_hash_ids_as_an_array})`

# delphi - 从包含的 Web 文档中查找 IHTML 元素 使用德尔福 2006？

> ID：13182645
> 
> 赞同：2
> 
> 时间：2012-11-01T17:43:26.650
> 
> 标签：delphi, delphi-2006

在`TWebBrowser`应用程序中，我想使用 Delphi 2006 (!) 获取指向包含此元素的元素的指针

```
<input class="submit" type="submit" value="&nbsp;Vis veibeskrivelse&nbsp;" onclick="showDirections();" />
<a href="#" onclick="openDirections(); return false;">&Aring;pne veibeskrivelse i Google Maps</a>
<br />
```

我发现`IHTMLDocument7`实现 a `getElementsByClassName`，但在 Delphi 2006 中，`IHTMLDocument7`未实现。

还有其他方法可以获取指向该元素的指针吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:31:24.103

You can define the `IHTMLDocument7` interface manually in your code, it is just an interface declaration. Delphi does not actually implement the interface, the web browser does.

Otherwise, since the element does not have a name, you can loop through the `IHTMLDocument.all` collection one element at a time, querying the `className` property of each element until you find what you are looking for.

# c# - C# 中的命令行命令

> ID：13182646
> 
> 赞同：-1
> 
> 时间：2012-11-01T17:43:27.380
> 
> 标签：c#

我想从 C# 运行一些 Windows 程序。我该怎么做？从我一直在查找的内容来看，它与 System.Diagnostics.Process 的 start 方法有关

我会不会使用

```
System.Diagnostics.Process; 
```

然后输入

```
start("Command to be executed"); 
```

还是我看错了这个问题？

C# 新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:51:12.853

根据您的评论，您似乎不熟悉~~面向对象的编程~~命名空间和类。让我们分解一下。

`Process`是一个类，是 .NET 框架的一部分。`Process`has 有一组方法，其中一些是`static`方法。`Start`是那些静态方法之一。有两件必需品供您使用`Process.Start`：

1.  编译器需要知道是什么`Process`。`using System.Diagnostics;`您可以通过添加到类文件的顶部将该信息提供给编译器。这告诉编译器在命名空间中寻找类`System.Diagnostics`，这是存在的地方`Process`。
2.  您需要明确告诉编译器您正在调用一个名为的方法，该方法`Start` *是 process class 的一部分*。您可以使用`Process.Start()`. 或者在你的情况下，`Process.Start("Command to be executed");`

您不能只键入有两个原因`start("Command to be executed")`：

1.  `start`，小写字母“s”`Start`与大写字母“S”不同。C# 是一种区分大小写的语言。
2.  如果你没有在你的方法调用前面加上一个特定的类名，编译器会在你自己的类中查找那个方法，当它没有找到时，它会告诉你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T17:46:26.017

问题是：本质上，“要执行的命令”部分就是您在命令提示符中键入的内容。例如：

```
Process.Start("C:\Programs\programFile.exe",
              "/arg1='This is an argument' -arg2=anotherArgument someOtherArgument"); 
```

您的程序的入口点（该文件位于“C:\Programs\programFile.exe”）将在其 main 方法中接收以下参数列表：

```
args[0] = "/arg1='This is an argument'"
args[1] = "-arg2=anotherArgument"
args[2] = "someOtherArgument" 
```

这种将参数作为命令行传递的方式显然不是最好的格式化方式，但它始终可以完成这项工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T17:50:31.200

```
// Start Internet Explorer. Defaults to the home page.
Process.Start("IExplore.exe");

// Display the contents of the favorites folder in the browser.
Process.Start(myFavoritesPath); 
```

来自[MSDN](http://msdn.microsoft.com/library/53ezey2s%28v=vs.100%29.aspx)

# appfabric - 如何设置 Windows Server AppFabric 命名缓存大小？

> ID：13182648
> 
> 赞同：0
> 
> 时间：2012-11-01T17:43:27.257
> 
> 标签：appfabric, appfabric-cache

我目前正在评估 Windows Server AppFabric 作为分布式缓存解决方案。如果我们实现 AppFabric，我们将有 3 或 4 个不同的 Web 应用程序使用它进行缓存。我已经看到 AppFabric 提供了创建命名缓存的能力。我想知道是否可以在命名缓存上设置最大大小？看起来你可以设置一个最大值。缓存集群主机的内存大小，但我没有看到任何表明这可以在每个缓存的基础上完成。

我对设置最大值感兴趣的原因。每个缓存的大小是我的想法是我们将为每个使用 AppFabric 的应用程序创建一个命名缓存。然后，例如，应用程序 A 缓存的对象不会潜在地导致应用程序 B 缓存的对象被驱逐。也许我正在错误地考虑这一点，或者还有另一个 AppFabric 功能可以实现这一点。任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:55:47.783

恐怕在 AppFabric 中不可能做到这一点。

命名缓存是数据的逻辑容器，每个缓存跨越集群中的所有缓存主机。因为您可以在集群中动态添加/删除主机，所以指定命名缓存的大小是没有意义的。

这就是为什么规划缓存使用和监控集群非常重要的原因。一种方法是通过[性能计数器](http://msdn.microsoft.com/en-us/library/hh334383.aspx)（您还可以获得命名缓存的大小）。

您可以指定的唯一一个限制是在缓存主机上（这将影响集群中所有已配置的命名缓存）：它仅用于驱逐。此功能与健康监测更相关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-28T03:16:53.130

供那些希望更改整个集群缓存的人参考：

### 更改主机上所有命名缓存的大小

[http://blog.milrr.com/2012/05/code-how-to-change-appfabric-cache-size.html](http://blog.milrr.com/2012/05/code-how-to-change-appfabric-cache-size.html)

```
stop-cachecluster
set-cachehostconfig -HostName ENVY7-WIN8-2 -CachePort 22233 -CacheSize 1024
start-cachecluster 
```

这将设置 1GB 缓存。正如@geo1701 所指出的，最佳实践建议您[不应超过 RAM 的 50% 。](http://msdn.microsoft.com/en-us/library/hh830824(v=azure.10).aspx)

# nservicebus - NServiceBus 需要在不同的环境中显式注册消息

> ID：13182650
> 
> 赞同：3
> 
> 时间：2012-11-01T17:43:39.150
> 
> 标签：nservicebus

我在所有环境中运行 Windows 7 64 位。通过包含我的两个程序集来隐式注册所有消息在开发中工作，但是 QA 和 Prod 需要显式注册，否则 NService 在启动时会引发异常。有没有人遇到过类似的情况，有解决办法吗？

例外

```
Source:NServiceBus.Core System.InvalidOperationException - No destination could be found for message type
xyz.Application.Claims.Messaging.IGlassWorkflowEventMessage. Check the <MessageEndpointMapping> section of the configuration 
of this endpoint for an entry either for this specific message type or for its assembly.
Stack:   at NServiceBus.Unicast.UnicastBus.Subscribe(Type messageType, Predicate`1 condition)
at CEI.Application.Claims.GlassSubscriber.SubscriberEndpointStartup.Run() in c:\xyz\tfs\Claimslink\DEV\Bus\GlassSubscriber\Config\SubscriberEndpointStartup.cs:line 36
at NServiceBus.Host.Internal.ConfigManager.<>c__DisplayClass1.<Startup>b__0() 
```

我的配置条目

```
<!--This works in my development environment-->
<MsmqTransportConfig InputQueue="GlassSubscriber" ErrorQueue="GlassSubscriberError" NumberOfWorkerThreads="1" MaxRetries="2"/>
<UnicastBusConfig>
<MessageEndpointMappings>

  <!--Just add assemblies, all messages recognized -->
  <add Messages="xyz.shared.impl" Endpoint="msgsvcpubinputqueue"/>
  <add Messages="xyz.Claims.impl" Endpoint="msgsvcpubinputqueue"/>
</MessageEndpointMappings>
</UnicastBusConfig>

 <!--QA and Production always require explicit message registrations??-->
 <MsmqTransportConfig InputQueue="GlassSubscriber" ErrorQueue="GlassSubscriberError" NumberOfWorkerThreads="1" MaxRetries="2"/>
 <UnicastBusConfig>
<MessageEndpointMappings>
  <add Messages="xyz.shared.impl" Endpoint="msgsvcpubinputqueue"/>
  <add Messages="xyz.Claims.impl" Endpoint="msgsvcpubinputqueue"/>

  <!--We have dozens of messages, explicitly registering for each subscriber is a pain-->

  <add Messages="xyz.Application.Claims.Messaging.IGlassWorkflowEventMessage, xyz.Claims.impl" Endpoint="msgsvcpubinputqueue"/>
  <add Messages="xyz.Application.Claims.Messaging.GlassWorkflowEventMessage, xyz.Claims.impl" Endpoint="msgsvcpubinputqueue"/>
</MessageEndpointMappings>
 </UnicastBusConfig> 
```

# ruby-on-rails - 使用 mongodb 嵌套字段

> ID：13182651
> 
> 赞同：6
> 
> 时间：2012-11-01T17:43:40.563
> 
> 标签：ruby-on-rails, ruby, mongodb, nested-forms, nested-form-for

我正在尝试使用 mongodb 创建嵌套字段。为此，我使用了 gem [mongomodel](http://www.mongomodel.org/)，它允许使用 ruby​​ 和 mongodb，我使用 gem [nested_form](https://github.com/ryanb/nested_form)来创建动态嵌套字段。我遇到以下问题：

`undefined method`#`的reflect_on_association'

我在互联网上发现的其他类似的错误与我想在这里用 mongodb 做的并不真正匹配。我是 RoR 的新手，我不知道如何解决这个问题。谁能帮我？

这是我的模型：

调查.rb

```
class Survey < MongoModel::Document
  property :name, String
  property :questions, Collection[Question]
  timestamps!

  accepts_nested_attributes_for :questions, :reject_if => lambda { |a| a[:content].blank? }, :allow_destroy => true
end 
```

问题.rb

```
class Question < MongoModel::Document
  property :content, String
  timestamps!
end 
```

我的控制器：

```
surveys_controller.rb
class SurveysController < ApplicationController
  # GET /surveys
  # GET /surveys.json
  def index
    @surveys = Survey.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @surveys }
    end
  end

  # GET /surveys/1
  # GET /surveys/1.json
  def show
    @survey = Survey.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @survey }
    end
  end

  # GET /surveys/new
  # GET /surveys/new.json
  def new
    @survey = Survey.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @survey }
    end
  end

  # GET /surveys/1/edit
  def edit
    @survey = Survey.find(params[:id])
  end

  # POST /surveys
  # POST /surveys.json
  def create
    @survey = Survey.new(params[:survey])

    respond_to do |format|
      if @survey.save
        format.html { redirect_to @survey, notice: 'Survey was successfully created.' }
        format.json { render json: @survey, status: :created, location: @survey }
      else
        format.html { render action: "new" }
        format.json { render json: @survey.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /surveys/1
  # PUT /surveys/1.json
  def update
    @survey = Survey.find(params[:id])

    respond_to do |format|
      if @survey.update_attributes(params[:survey])
        format.html { redirect_to @survey, notice: 'Survey was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @survey.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /surveys/1
  # DELETE /surveys/1.json
  def destroy
    @survey = Survey.find(params[:id])
    @survey.destroy

    respond_to do |format|
      format.html { redirect_to surveys_url }
      format.json { head :no_content }
    end
  end
end 
```

我的宝石文件：

```
source 'https://rubygems.org'

gem 'rails', '3.2.8'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem "mongomodel"
gem "bson_ext"
gem "nested_form"

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'debugger' 
```

我对调查的看法：

```
_form.html.erb
<%= nested_form_for(@survey) do |f| %>
  <% if @survey.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@survey.errors.count, "error") %> prohibited this survey from being saved:</h2>

      <ul>
      <% @survey.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </div>
  <p>
    <%= f.fields_for :questions do |builder| %>
    <p>
        <%= builder.label :content, "Question" %>
    <%= builder.text_area :content, :rows => 3 %>
    </p>    
    <% end %>
    <p><%= f.link_to_add "Add a Question", :questions %></p>
  </p>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:02:05.667

我试图关注这个[railscast](http://railscasts.com/episodes/196-nested-model-form-part-1)，但我想使用 mongodb，我正在使用 gem [mongomodel](http://www.mongomodel.org/)来做到这一点。我无法做我想做的事，因为我收到了上述错误，甚至对于“删除”按钮，我也遇到了另一个我现在不记得的错误。无论如何，我真的无法使用 mongomodel 做我想做的事，所以我尝试使用[mongoid](http://mongoid.org/en/mongoid/index.html)来做到这一点，一切都变得更容易了。

# c# - 从 DataTable 到 DataGridView 包括图像路径

> ID：13182654
> 
> 赞同：1
> 
> 时间：2012-11-01T17:43:52.967
> 
> 标签：c#, sql, winforms, telerik

我正在构建一个小型应用程序。此应用程序存储客户信息和客户图片。在这里，我有一个问题，我想用图片将数据从数据表显示到数据网格视图。我的应用程序不将图像存储在数据库中，而是存储在文件夹中。

所以在我的数据库中只存储图像路径。但不是完整路径，只有文件夹或文件的名称。我在每个名称上使用组合路径。与保留完整路径相比，如果根目录已更改，则管理文件夹会更容易。

例如，如果我想在图片框中显示图像，我会这样做。

```
//consider the record has been selected from table

classDirectory cd = new classDirectory();

// it will check current directory combine application name folder and branch name folder.

string branchFolderPath = cd.getBranchFolderPath(branchName); 

string branchPanelPath = cd.getPanelFolderPath(branchFolderPath,panelName);

string customerPath = cd.getCustomerFolderPath(branchPanelPath,customerID + " - " + customerName);

string customerImage = path.Combine(customerPath,customerPicPath);

picCustomer.Image = new Bitmap(customerImage); 
```

合并后返回字符串**“C:\Users\My Name\Documents\My Application Name\Branch Name\Panel Name\1235 - HIDAYAH\Pictures\HIDAYAH - Picture.jpg”**

所以我可以看到图片。

但是，我不知道如何在网格视图中显示数据。

所以到目前为止，我刚刚做了。

```
Customer.classDataBinding cdb = new Customer.classDataBinding();

DataTable dataCustomer = cdb._listOfCustomer();

dgvCustomer.DataSource = dataCustomer;

this.dgvCustomer.Columns["Customer Image"].Width = 120; //For a while, this code return the string only.
this.dgvCustomer.Columns["Customer ID"].Width = 120;
this.dgvCustomer.Columns["Name"].Width = 120;
this.dgvCustomer.Columns["Branch"].Width = 120;
this.dgvCustomer.Columns["Panel"].Width = 120; 
```

**cdb._listOfCustomer()**中的代码

 **```
 public DataTable _listOfCustomer()
    {
        cs.testConnection();

        DataTable dtCustomer = new DataTable();

        using (SqlConnection conn = new SqlConnection(cs.connString))
        {
            string query = "SELECT tbl_customer.customerPicPath as [Customer Image], tbl_customer.customerID as [Customer ID],tbl_customer.customerName as Name, tbl_branch.branchName as Branch, tbl_panel.panelName as Panel FROM (tbl_branch INNER JOIN tbl_panel ON tbl_branch.branchID = tbl_panel.branchID) INNER JOIN tbl_customer ON tbl_panel.panelID = tbl_customer.panelID;";

            using (SqlDataAdapter adap = new SqlDataAdapter(query, conn))
            {
                adap.Fill(dtCustomer);

            }
        }

        return dtCustomer; 
```

有什么建议吗？希望有人可以帮助我解决这个问题。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T12:11:07.393

你在使用 Telerik 网格吗？如果是这样，在绑定网格后，您可以隐藏显示路径的列，添加 GridViewImageColumn 并通过创建正确的路径来分配其值。

试试这种方法。

UPDATE1：这是一个例子：

```
 public Form1()
    {
        InitializeComponent();

        Random r = new Random();
        DataTable table = new DataTable();
        table.Columns.Add("ID", typeof(int));
        table.Columns.Add("Name", typeof(string));
        table.Columns.Add("ImageName", typeof(string));

        table.Rows.Add(1, "Row 1", "copy.png");
        table.Rows.Add(2, "Row 2", "cut.png");
        table.Rows.Add(3, "Row 3", "folder.png");
        table.Rows.Add(4, "Row 4", "help.png");

        this.radGridView1.DataSource = table;

        radGridView1.Columns["ImageName"].IsVisible = false;

        GridViewImageColumn col = new GridViewImageColumn("Image");
        radGridView1.Columns.Add(col);

        foreach (GridViewRowInfo row in radGridView1.Rows)
        {
            string path = "..\\..\\"; //here you set your path
            row.Cells["Image"].Value = Image.FromFile( Path.Combine(path, row.Cells["ImageName"].Value.ToString()));

        }
    } 
```**

# xml - 在 .XSLT 中将三个元素从源模式转换为目标模式的一个元素

> ID：13182656
> 
> 赞同：1
> 
> 时间：2012-11-01T17:43:53.607
> 
> 标签：xml, xslt

我的源模式中有三个元素：BIRTH_DAY、BIRTH_MONTH 和 BIRTH_YEAR。我需要将这些转换为目标架构中的单个元素 (DOB)。DOB 将遵循以下 10 个字符的格式：

YYYY-MM-DD

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T18:02:29.807

这是一个选择...

**XML 输入**

```
<doc>
    <BIRTH_DAY>1</BIRTH_DAY>
    <BIRTH_MONTH>1</BIRTH_MONTH>
    <BIRTH_YEAR>2012</BIRTH_YEAR>
</doc> 
```

**XSLT 1.0**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="doc">
        <DOB>
            <xsl:value-of select="concat(BIRTH_YEAR,'-',
                format-number(BIRTH_MONTH,'00'),'-',
                format-number(BIRTH_DAY,'00'))"/>
        </DOB>
    </xsl:template>
</xsl:stylesheet> 
```

**XML 输出**

```
<DOB>2012-01-01</DOB> 
```

* * *

***编辑不同的月份格式。***

这在 XSLT 2.0 中要容易得多，但在 1.0 中我要做的是一个命名模板，它将返回数字月份。在下面的示例中，如果使用整个月份或月份的前 3 个字母，则返回数字月份。它也不区分大小写。

**XML 输入**

```
<doc>
    <BIRTH_DAY>1</BIRTH_DAY>
    <BIRTH_MONTH>NOV</BIRTH_MONTH>
    <BIRTH_YEAR>2012</BIRTH_YEAR>
</doc> 
```

**XSLT 1.0**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:variable name="vUpper" select="'ABCDEFGHIJKLMNOPQRSTUVWXYZ'"/>
    <xsl:variable name="vLower" select="'abcdefghijklmnopqrstuvwxyz'"/>

    <xsl:template match="doc">
        <xsl:variable name="vMonth">
            <xsl:choose>
                <xsl:when test="number(BIRTH_MONTH)">
                    <xsl:value-of select="format-number(BIRTH_MONTH,'00')"/>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:call-template name="getMonth">
                        <xsl:with-param name="pMonth" select="BIRTH_MONTH"/>
                    </xsl:call-template>
                </xsl:otherwise>
            </xsl:choose>
        </xsl:variable>
        <DOB>
            <xsl:value-of select="concat(BIRTH_YEAR,'-',
                $vMonth,'-',
                format-number(BIRTH_DAY,'00'))"/>
        </DOB>
    </xsl:template>

    <xsl:template name="getMonth">
        <xsl:param name="pMonth"/>
        <xsl:variable name="vLCmonth" select="translate(substring($pMonth,1,3),$vUpper,$vLower)"/>
        <xsl:choose>
            <xsl:when test="$vLCmonth='jan'">01</xsl:when>
            <xsl:when test="$vLCmonth='feb'">02</xsl:when>
            <xsl:when test="$vLCmonth='mar'">03</xsl:when>
            <xsl:when test="$vLCmonth='apr'">04</xsl:when>
            <xsl:when test="$vLCmonth='may'">05</xsl:when>
            <xsl:when test="$vLCmonth='jun'">06</xsl:when>
            <xsl:when test="$vLCmonth='jul'">07</xsl:when>
            <xsl:when test="$vLCmonth='aug'">08</xsl:when>
            <xsl:when test="$vLCmonth='sep'">09</xsl:when>
            <xsl:when test="$vLCmonth='oct'">10</xsl:when>
            <xsl:when test="$vLCmonth='nov'">11</xsl:when>
            <xsl:when test="$vLCmonth='dec'">12</xsl:when>
        </xsl:choose>
    </xsl:template>

</xsl:stylesheet> 
```

**XML 输出**

```
<DOB>2012-11-01</DOB> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T17:53:02.947

您可以使用**CONCAT**函数。

> fn:concat(string1,string2,...)

这是一个很好的[例子](http://www.java2s.com/Tutorial/XML/0100__XSLT-stylesheet/concatfunction.htm)：

# jsf - 'null Converter' 的转换错误设置值'52'

> ID：13182660
> 
> 赞同：8
> 
> 时间：2012-11-01T17:43:58.760
> 
> 标签：jsf, jakarta-ee, xhtml, converter, backing-beans

我是 JSF 的新手，我一直在尝试从使用 ah:selectOneMenu 获取产品类别的表单中存储数据。h:selectOneMenu 是从数据库中填充的，但是，当尝试将产品存储在数据库中时，我收到一个错误：“null Converter”的转换错误设置值“52”。我已经在 StackOverflow 和在线教程中查看了类似的问题，但我仍然收到错误消息。

这是xhtml：

```
<h:selectOneMenu id="category_fk" value="#{productController.product.category_fk}" 
                                 converter="#{categoryConverter}" title="Category_fk" >
                    <!-- DONE: update below reference to list of available items-->
                    <f:selectItems value="#{productController.categoryList}" var="prodCat"
                                   itemValue="#{prodCat}" itemLabel="#{prodCat.name}"/>
                </h:selectOneMenu> 
```

这是产品控制器：

```
@Named
@RequestScoped
public class ProductController {

    @EJB
    private ProductEJB productEjb;
    @EJB
    private CategoryEJB categoryEjb;

    private Product product = new Product();
    private List<Product> productList = new ArrayList<Product>();

    private Category category;
    private List<Category> categoryList = new ArrayList<Category>();

    public String doCreateProduct()
    {
        product = productEjb.createProduct(product);
        productList = productEjb.findAllProducts();
        return "listProduct";
    }

    @PostConstruct
    public void init()
    {
        categoryList = categoryEjb.findAllCategory();
        productList = productEjb.findAllProducts();
    }        

    // Getters/Setters and other methods omitted for simplicity 
```

这是为简单起见而简化的 EJB：

```
 @Stateless
    public class ProductEJB{

        @PersistenceContext(unitName = "luavipuPU")
        private EntityManager em;

        public List<Product> findAllProducts()
        {
            TypedQuery<Product> query = em.createNamedQuery("findAllProducts", Product.class);
            return query.getResultList();
        }

        public Product createProduct(Product product)
        {
            em.persist(product);
            return product;
        }    

    } 
```

这是为简单起见简化的产品实体：

```
@Entity
@NamedQueries({
    @NamedQuery(name="findAllProducts", query = "SELECT p from Product p")
})
public class Product implements Serializable
{
    private static final long serialVersionUID = 1L;

    @Id @GeneratedValue(strategy= GenerationType.AUTO)
    private int product_id;
    private String name;
    private String description;
    protected byte[] imageFile;
    private Float price;
    @Temporal(TemporalType.TIMESTAMP)
    private Date dateAdded;
    @ManyToOne    
    private Category category_fk;
    @ManyToOne
    private SaleDetails saleDetails_fk; 
```

这是我正在使用的更新转换器：

```
@ManagedBean
@FacesConverter(value="categoryConverter")
public class CategoryConverter implements Converter{

    @PersistenceContext
    private transient EntityManager em;

    @Override
    public Object getAsObject(FacesContext context, UIComponent component, String value) {
        return em.find(Category.class, new Integer(value));
    }

    @Override
    public String getAsString(FacesContext context, UIComponent component, Object value) {

        Category category;
        category = (Category) value;
        return String.valueOf(category.getCategory_id());

    }

} 
```

代码已从原始问题更新，代码现在完美运行。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-02T04:28:50.460

如果不创建 JSF [Converter](http://digitaljoel.nerd-herders.com/2010/01/11/jsf-2-custom-converter/)`<h:selectOneMenu/>` ，就不能在组件（或任何）上使用自定义类型。JSF 中存在转换器以帮助将本质上自定义或服务器端项目/结构转换为网页友好/人类可读格式，并且还能够将选择从客户端保存回服务器端。因此，错误消息本质上告诉您的是，它无法充分理解从客户端提交的值，无法将其作为对象/类型保存到服务器端`<h:selectXXXX/>``52``Category`

因此，您需要做的是创建一个 JSF 的实现，`converter`它基本上可以帮助 JSF 理解您的`Category`对象。

以下是您需要做的粗略估计：

1.  为您的类型实现转换器`Category`：

    ```
    // You must annotate the converter as a managed bean, if you want to inject
    // anything into it, like your persistence unit for example.
    @ManagedBean(name = "categoryConverterBean") 
    @FacesConverter(value = "categoryConverter")
    public class CategoryConverter implements Converter {

        @PersistenceContext(unitName = "luavipuPU")
        // I include this because you will need to 
        // lookup  your entities based on submitted values
        private transient EntityManager em;  

        @Override
        public Object getAsObject(FacesContext ctx, UIComponent component,
                String value) {
          // This will return the actual object representation
          // of your Category using the value (in your case 52) 
          // returned from the client side
          return em.find(Category.class, new BigInteger(value)); 
        }

        @Override
        public String getAsString(FacesContext fc, UIComponent uic, Object o) {
            //This will return view-friendly output for the dropdown menu
            return ((Category) o).getId().toString(); 
        }
    } 
    ```

2.  参考您的新转换器`<h:selectOneMenu/>`

    ```
    <h:selectOneMenu id="category_fk" 
      converter="#{categoryConverterBean}"
      value="#productController.product.category_fk}" 
      title="Category_fk" >
    <!-- DONE: update below reference to list of available items-->
        <f:selectItems value="#{productController.categoryList}" 
          var="prodCat" itemValue="#{prodCat.category_id}" 
          itemLabel="#{prodCat.name}"/>
    </h:selectOneMenu> 
    ```

我们使用该名称`categoryConverterBean`是因为我们想利用您在转换器中提取的实体管理器技巧。在任何其他情况下，您将使用您在转换器注释上设置的名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T18:10:00.957

Product.category_fk 似乎是*Category*类型，我怀疑 prodCat.category_id 是*Integer*或其他东西......

在您的 xhtml 中，您似乎将 selectItems 的值设置为：`itemValue="#{prodCat.category_id}"`

当 selectOneMenu 需要一个值时`value="#{productController.product.category_fk}"`

很可能不是同一类型。

# ruby-on-rails - Rails 3 如何使用 link_to 更改数据库中布尔值的值？

> ID：13182661
> 
> 赞同：11
> 
> 时间：2012-11-01T17:44:00.360
> 
> 标签：ruby-on-rails, model-view-controller, methods, routes, hyperlink

我正在尝试创建一个简单的链接，允许管理员在我的网站上批准用户

与这个人尝试的非常相似：[在 Rails 3 中，我如何使用 button_to 来更改布尔值？](https://stackoverflow.com/questions/7124781/in-rails-3-how-do-i-use-button-to-to-change-the-value-of-a-boolean)

这是它应该如何工作的：

1.  管理员单击链接以批准用户
2.  链接调用UsersController中的activate函数
3.  用户建模的活动函数调用
4.  用户模型将approved属性更新为true并保存

这就是我要怎么做

在我的用户#index 视图中

```
 <% @users.each do |user| %> 
 <%= link_to 'Approve', :action => "index", :method => 'activate', :id => user.id, :class => 'btn btn-mini btn-danger' %> 
<% end %> 
```

在我的用户控制器中

```
def activate
  @user = User.find(params[:user])
  @user.activate_user
end 
```

在我的用户模型中

```
def activate_user 
  self.approved = 'true'
  self.save
end 
```

和我的路线

```
devise_for :users, :controllers => { :registrations => "registrations" }

resources :users do
  member do
    get 'activate'
    put 'activate'
  end
end

match "users/:id/activate" => "users#activate" 
```

现在，当我单击链接（批准用户）时，我被发送回用户索引页面（就像我应该做的那样），但用户字段“已批准”仍设置为 false ：I

点击链接后我得到的网址：

```
 http://localhost:3000/users?class=btn+btn-mini+btn-danger&id=2&method=activate 
```

有任何想法吗？

**更新**

正如建议的那样，iv 将 URL 添加到了 link_to 助手

```
<% @users.each do |user| %> 
  <%= link_to "Approve", :controller => "users", :id => user.id, :action => "activate", :method => :put, :approved => true %> 
<% end %> 
```

当我点击帮助链接时，我得到

```
wrong number of arguments (1 for 2) 
```

在 app/controllers/users_controller.rb:7:in `activate'

```
def activate
  @user = User.find(params[:id])
  @user.update_attribute(params[:user])
  redirect_to "/users?approved=false"
end 
```

第 7 行，错误为 @user.update_attribute(params[:user])

我还应该放什么？

哦，这是我使用这种方法的路线

```
match "/users/:id/activate" => "users#activate" 
```

**UPDATE V2** 所以我已将该更新行更改为：

```
@user.update_attributes(@user.approved, "true") 
```

它似乎做了我想做的所有事情，除了将值更改为 true ！

我还尝试将 1 用于 true （以及 update_attribute 函数）和非字符串 .. 在这里没有想法了哈哈

**解决方案**

好吧，这很尴尬，但是碰巧在我的用户模型`attr_accessor :approved` 中，这导致该模型从未进入数据库来更新`:approved`列，而是更新了局部变量`:approved`，因此下次当我查看该列时，当然是`:approved`价值没有改变

tldr？如果您的模型中有 attr_accessor 与您尝试更新的列同名 => 删除它

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-03T13:44:03.457

您可以更新下面的代码

你查看

```
<% @users.each do |user| %> 
<%= link_to 'Approve', active_user_path(user) %> 
<% end %> 
```

你的控制器

```
def activate
  @user = User.find(params[:id])
  if @user.update_attribute(:approved, true)
    redirect_to "something"
  else
   render "something"
  end 
end 
```

您的路线

```
match "users/:id/activate" => "users#activate", :as => "active_user" 
```

希望能帮到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T17:57:52.570

看起来您没有正确调用 link_to 。请注意，您将操作作为 http 参数，而不是 URL 的一部分。

网址应该是

`http://localhost:3000/users/123/activate`

查看此页面上的示例：

`http://apidock.com/rails/ActionView/Helpers/UrlHelper/link_to`

我认为您需要使用：controller => 'users'，：action => 'activate'。

请记住，您也可以在此处使用字符串作为路径：`"/users/${@user.id}/activate"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T05:51:37.190

该`attr_accessor`方法将创建一个实例变量以及该变量的 getter 和 setter。

当您尝试使用该名称更新数据库列时，它会改用实例变量。如果您想要一个“虚拟列”，这将很有用，它将充当实际列但存储在内存中。

对于您拥有`attr_accessible`的允许对该列进行批量分配的数据库列（这将在 rails 4 中被弃用），或者您可以不使用任何方法来定义列的可访问性并让其`ActiveRecord`处理。

# javascript - Jquery 从 HTML 表中获取元素并按列放入数组

> ID：13182664
> 
> 赞同：1
> 
> 时间：2012-11-01T17:44:08.917
> 
> 标签：javascript, jquery, html, jqgrid

目前我在 html 中有一个 jqGrid。我正在寻找一种从 HTML 元素中提取数据的方法，而不是从 jqGrid 对象中提取数据，并将每一列放入一个数组中。我查看了一堆示例，但无法找到可以按我需要的方式工作的东西..

这就是我目前所拥有的。它拉取 jgGrid，这是一个 .d 类并将其加载到 dTags 中。然后我抓住 tableId 并尝试提取行数据（我实际上需要列数据只是用于示例）并且没有运气。任何帮助将非常感激。

```
function generateXML()
{
    // get class tags d, np, ch
    var dTags = $(".d");
    var npTags = $(".np");
    var chTags = $(".ch");

    for(var i = 0; i<dTags.size(); i++)
    {
        log(dTags.size());
        var tableId = dTags[i].id;
    var tableName = "#" + tableId + " td:nth-child(0)";
    log(tableName);
    var colArray = $(tableName).map(function(){
        return $(this).text();
    }).get();
    log(JSON.stringify(colArray));
    }
} 
```

HTML - 看起来像这样

```
<table id="polarizationTable" class="d" ></table> 
```

jqGrid 生成的 html 看起来像这样......

![桌子](../Images/d7f41546e8b055d665f46a76cd3d3b8b.png)

生成的代码是..

```
<div class="ui-jqgrid ui-widget ui-widget-content ui-corner-all" id="gbox_polarizationTable" dir="ltr" style="width: 729px; "><div class="ui-widget-overlay jqgrid-overlay" id="lui_polarizationTable"></div><div class="loading ui-state-default ui-state-active" id="load_polarizationTable" style="display: none; ">Loading...</div><div class="ui-jqgrid-view" id="gview_polarizationTable" style="width: 729px; "><div class="ui-jqgrid-titlebar ui-widget-header ui-corner-top ui-helper-clearfix"><a role="link" href="javascript:void(0)" class="ui-jqgrid-titlebar-close HeaderButton" style="right: 0px; "><span class="ui-icon ui-icon-circle-triangle-n"></span></a><span class="ui-jqgrid-title">Polarization Table</span></div><div style="width: 729px; " class="ui-state-default ui-jqgrid-hdiv"><div class="ui-jqgrid-hbox"><table class="ui-jqgrid-htable" style="width: 711px; " role="grid" aria-labelledby="gbox_polarizationTable" cellspacing="0" cellpadding="0" border="0"><thead><tr class="ui-jqgrid-labels" role="rowheader"><th id="polarizationTable_TestTime" role="columnheader" class="ui-state-default ui-th-column ui-th-ltr" style="width: 97px; "><span class="ui-jqgrid-resize ui-jqgrid-resize-ltr" style="cursor: col-resize; ">&nbsp;</span><div id="jqgh_polarizationTable_TestTime" class="ui-jqgrid-sortable">Minutes<span class="s-ico" style="display:none"><span sort="asc" class="ui-grid-ico-sort ui-icon-asc ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-ltr"></span><span sort="desc" class="ui-grid-ico-sort ui-icon-desc ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-ltr"></span></span></div></th><th id="polarizationTable_RdgA" role="columnheader" class="ui-state-default ui-th-column ui-th-ltr" style="width: 97px; "><span class="ui-jqgrid-resize ui-jqgrid-resize-ltr" style="cursor: col-resize; ">&nbsp;</span><div id="jqgh_polarizationTable_RdgA" class="ui-jqgrid-sortable">Reading A<span class="s-ico" style="display:none"><span sort="asc" class="ui-grid-ico-sort ui-icon-asc ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-ltr"></span><span sort="desc" class="ui-grid-ico-sort ui-icon-desc ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-ltr"></span></span></div></th><th id="polarizationTable_CorrA" role="columnheader" class="ui-state-default ui-th-column ui-th-ltr" style="width: 97px; "><span class="ui-jqgrid-resize ui-jqgrid-resize-ltr" style="cursor: col-resize; ">&nbsp;</span><div id="jqgh_polarizationTable_CorrA" class="ui-jqgrid-sortable">Corr A<span class="s-ico" style="display:none"><span sort="asc" class="ui-grid-ico-sort ui-icon-asc ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-ltr"></span><span sort="desc" class="ui-grid-ico-sort ui-icon-desc ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-ltr"></span></span></div></th><th id="polarizationTable_RdgB" role="columnheader" class="ui-state-default ui-th-column ui-th-ltr" style="width: 97px; "><span class="ui-jqgrid-resize ui-jqgrid-resize-ltr" style="cursor: col-resize; ">&nbsp;</span><div id="jqgh_polarizationTable_RdgB" class="ui-jqgrid-sortable">Reading B<span class="s-ico" style="display:none"><span sort="asc" class="ui-grid-ico-sort ui-icon-asc ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-ltr"></span><span sort="desc" class="ui-grid-ico-sort ui-icon-desc ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-ltr"></span></span></div></th><th id="polarizationTable_CorrB" role="columnheader" class="ui-state-default ui-th-column ui-th-ltr" style="width: 97px; "><span class="ui-jqgrid-resize ui-jqgrid-resize-ltr" style="cursor: col-resize; ">&nbsp;</span><div id="jqgh_polarizationTable_CorrB" class="ui-jqgrid-sortable">Corr B<span class="s-ico" style="display:none"><span sort="asc" class="ui-grid-ico-sort ui-icon-asc ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-ltr"></span><span sort="desc" class="ui-grid-ico-sort ui-icon-desc ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-ltr"></span></span></div></th><th id="polarizationTable_RdgC" role="columnheader" class="ui-state-default ui-th-column ui-th-ltr" style="width: 97px; "><span class="ui-jqgrid-resize ui-jqgrid-resize-ltr" style="cursor: col-resize; ">&nbsp;</span><div id="jqgh_polarizationTable_RdgC" class="ui-jqgrid-sortable">Reading C<span class="s-ico" style="display:none"><span sort="asc" class="ui-grid-ico-sort ui-icon-asc ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-ltr"></span><span sort="desc" class="ui-grid-ico-sort ui-icon-desc ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-ltr"></span></span></div></th><th id="polarizationTable_CorrC" role="columnheader" class="ui-state-default ui-th-column ui-th-ltr" style="width: 94px; "><span class="ui-jqgrid-resize ui-jqgrid-resize-ltr" style="cursor: col-resize; ">&nbsp;</span><div id="jqgh_polarizationTable_CorrC" class="ui-jqgrid-sortable">Corr C<span class="s-ico" style="display:none"><span sort="asc" class="ui-grid-ico-sort ui-icon-asc ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-ltr"></span><span sort="desc" class="ui-grid-ico-sort ui-icon-desc ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-ltr"></span></span></div></th></tr></thead></table></div></div><div class="ui-jqgrid-bdiv" style="height: 250px; width: 729px; "><div style="position:relative;"><div></div><table id="polarizationTable" class="d ui-jqgrid-btable" tabindex="1" cellspacing="0" cellpadding="0" border="0" role="grid" aria-multiselectable="false" aria-labelledby="gbox_polarizationTable" style="width: 711px; "><tbody><tr class="jqgfirstrow" role="row" style="height:auto"><td role="gridcell" style="height: 0px; width: 97px; "></td><td role="gridcell" style="height: 0px; width: 97px; "></td><td role="gridcell" style="height: 0px; width: 97px; "></td><td role="gridcell" style="height: 0px; width: 97px; "></td><td role="gridcell" style="height: 0px; width: 97px; "></td><td role="gridcell" style="height: 0px; width: 97px; "></td><td role="gridcell" style="height: 0px; width: 94px; "></td></tr><tr role="row" id="1" tabindex="0" class="ui-widget-content jqgrow ui-row-ltr ui-state-highlight" aria-selected="true"><td role="gridcell" style="text-align:center;" title="0.25" aria-describedby="polarizationTable_TestTime">0.25</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_RdgA">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_CorrA">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_RdgB">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_CorrB">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_RdgC">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_CorrC">&nbsp;</td></tr><tr role="row" id="2" tabindex="-1" class="ui-widget-content jqgrow ui-row-ltr"><td role="gridcell" style="text-align:center;" title="0.5" aria-describedby="polarizationTable_TestTime">0.5</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_RdgA">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_CorrA">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_RdgB">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_CorrB">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_RdgC">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_CorrC">&nbsp;</td></tr><tr role="row" id="3" tabindex="-1" class="ui-widget-content jqgrow ui-row-ltr"><td role="gridcell" style="text-align:center;" title="0.75" aria-describedby="polarizationTable_TestTime">0.75</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_RdgA">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_CorrA">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_RdgB">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_CorrB">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_RdgC">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_CorrC">&nbsp;</td></tr><tr role="row" id="4" tabindex="-1" class="ui-widget-content jqgrow ui-row-ltr"><td role="gridcell" style="text-align:center;" title="1" aria-describedby="polarizationTable_TestTime">1</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_RdgA">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_CorrA">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_RdgB">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_CorrB">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_RdgC">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_CorrC">&nbsp;</td></tr><tr role="row" id="5" tabindex="-1" class="ui-widget-content jqgrow ui-row-ltr"><td role="gridcell" style="text-align:center;" title="2" aria-describedby="polarizationTable_TestTime">2</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_RdgA">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_CorrA">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_RdgB">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_CorrB">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_RdgC">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_CorrC">&nbsp;</td></tr><tr role="row" id="6" tabindex="-1" class="ui-widget-content jqgrow ui-row-ltr"><td role="gridcell" style="text-align:center;" title="3" aria-describedby="polarizationTable_TestTime">3</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_RdgA">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_CorrA">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_RdgB">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_CorrB">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_RdgC">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_CorrC">&nbsp;</td></tr><tr role="row" id="7" tabindex="-1" class="ui-widget-content jqgrow ui-row-ltr"><td role="gridcell" style="text-align:center;" title="4" aria-describedby="polarizationTable_TestTime">4</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_RdgA">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_CorrA">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_RdgB">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_CorrB">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_RdgC">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_CorrC">&nbsp;</td></tr><tr role="row" id="8" tabindex="-1" class="ui-widget-content jqgrow ui-row-ltr"><td role="gridcell" style="text-align:center;" title="5" aria-describedby="polarizationTable_TestTime">5</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_RdgA">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_CorrA">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_RdgB">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_CorrB">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_RdgC">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_CorrC">&nbsp;</td></tr><tr role="row" id="9" tabindex="-1" class="ui-widget-content jqgrow ui-row-ltr"><td role="gridcell" style="text-align:center;" title="6" aria-describedby="polarizationTable_TestTime">6</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_RdgA">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_CorrA">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_RdgB">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_CorrB">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_RdgC">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_CorrC">&nbsp;</td></tr><tr role="row" id="10" tabindex="-1" class="ui-widget-content jqgrow ui-row-ltr"><td role="gridcell" style="text-align:center;" title="7" aria-describedby="polarizationTable_TestTime">7</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_RdgA">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_CorrA">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_RdgB">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_CorrB">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_RdgC">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_CorrC">&nbsp;</td></tr><tr role="row" id="11" tabindex="-1" class="ui-widget-content jqgrow ui-row-ltr"><td role="gridcell" style="text-align:center;" title="8" aria-describedby="polarizationTable_TestTime">8</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_RdgA">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_CorrA">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_RdgB">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_CorrB">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_RdgC">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_CorrC">&nbsp;</td></tr><tr role="row" id="12" tabindex="-1" class="ui-widget-content jqgrow ui-row-ltr"><td role="gridcell" style="text-align:center;" title="9" aria-describedby="polarizationTable_TestTime">9</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_RdgA">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_CorrA">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_RdgB">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_CorrB">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_RdgC">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_CorrC">&nbsp;</td></tr><tr role="row" id="13" tabindex="-1" class="ui-widget-content jqgrow ui-row-ltr"><td role="gridcell" style="text-align:center;" title="10" aria-describedby="polarizationTable_TestTime">10</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_RdgA">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_CorrA">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_RdgB">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_CorrB">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_RdgC">&nbsp;</td><td role="gridcell" style="text-align:center;" title="" aria-describedby="polarizationTable_CorrC">&nbsp;</td></tr></tbody></table></div></div></div><div class="ui-jqgrid-resize-mark" id="rs_mpolarizationTable">&nbsp;</div></div> 
```

本质上，我需要将 Minutes、Reading A、Corr A 等中的数据放入各自的数组中……稍后我将根据这些数据构建自定义 XML 文件。希望这能澄清一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:28:04.433

您可以使用`:nth-child`和`.map()`功能：

```
var minutes = jQuery('.ui-jqgrid-bdiv tr.ui-widget-content td:nth-child(1)')
  .map(function(){
    return $(this).html();
  });

var readingA = jQuery('.ui-jqgrid-bdiv tr.ui-widget-content td:nth-child(2)')
  .map(function(){
    return $(this).html();
  });

/// and so on... 
```

通过一些工作，您可以将其包装在一个`.each()`处理程序中，以编程方式步进每个列名，而不是手动指定它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T17:53:29.773

目前还不太清楚你想要做什么，但乍一看你可以使用[jqGrid](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3amethods)的 getCol 方法而不是你当前的代码。

# wordpress - WordPress Heroku 特色图片未显示

> ID：13182666
> 
> 赞同：3
> 
> 时间：2012-11-01T17:44:21.920
> 
> 标签：wordpress

我在 heroku 上托管了一个 wordpress 网站，但在获取我的博客帖子的特色图片时遇到问题......

我说熬夜是因为当我第一次发布它时......它会出现，但过一段时间它就会消失......

我上传的其他图片也有类似的问题，但我通过提供图片路径解决了这个问题，例如[http://www.somesite.com/image.jpg](http://www.somesite.com/image.jpg)

但是我无法用特色图片做到这一点....

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T13:44:59.230

问题是因为 Heroku 不允许您在 Dynos 上拥有持久存储。因此，最初当您上传图像时，它会起作用，但 Heroku 有时会重新启动您的 Dyno 或将其移动到其他主机（因为他们不断转移应用程序以平衡其服务器的负载）。

为了确保您的图像保持在线，您应该使用上传到持久存储服务（如 Amazon S3）的 Wordpress 插件。你可以试试这个插件：[Amazon S3 for WordPress](http://wordpress.org/extend/plugins/tantan-s3/)

使用 Amazon S3 的好处是，如果您使用他们的[免费套餐](http://aws.amazon.com/free/)，第一年是免费的。你会有一些限制，但如果它是一个低流量的网站，你不应该轻易超越它们。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-07-22T11:34:29.077

如果您不想使用像 Amazon S3 这样的付费服务，您可以直接 git push image.jpg 文件，这样它就会永远保留在 heroku 中。

```
git add image.jpg
git commit 
git push heroku master 
```

这里 heroku 是远程 url，master 是其中的分支。这可以在有本地 git 时完成。

# objective-c - Objective-c 检测类是否可用于不同的操作系统版本

> ID：13182668
> 
> 赞同：19
> 
> 时间：2012-11-01T17:44:34.027
> 
> 标签：objective-c, class, version, compatibility

我的应用需要与不同的操作系统版本兼容。

**如何检测特定类是否可用于特定操作系统？**

例如，`NSPopover`仅在 Lion 及更高版本中可用，那么如果`NSPopover`该人使用 Snow Leopard，我如何检查操作系统是否支持？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-01T17:51:31.000

你可以做

```
if ([TheWantedClass class]) {
    // The class exists so run code
} else {
    // The class doesn't exist so use an alternate approach
} 
```

或者

```
if (NSClassFromString(@"TheWantedClass") != nil) {
    // The class exists
} else {
    // The class doesn't exist
} 
```

[https://developer.apple.com/documentation/foundation/1395135-nsclassfromstring](https://developer.apple.com/documentation/foundation/1395135-nsclassfromstring)

# entity-framework - 显式调用 DatabaseInitializer

> ID：13182669
> 
> 赞同：1
> 
> 时间：2012-11-01T17:44:36.040
> 
> 标签：entity-framework, ef-code-first, entity-framework-5, dbcontext

我在两个服务项目之间共享的程序集中有一个 DbContext。我将两个项目都设置为在 Visual Studio 中进行调试。这会创建一个竞争条件，其中`DatabaseInitializer`每个服务都尝试在启动时更新数据库。

为了防止这种情况，我将我的修改`DbContext`如下，以防止`DatabaseIntializer`自动注册。

```
public EntityContext : DbContext
{
    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        Database.SetInitializer<EntityContext>(null);
    }
} 
```

我想禁用`DatabaseInitializer`内部`DbContext`本身，这样我就不必`SetInitializer()`在碰巧引用 my 的每个项目中重复该调用`DbContext`，并且根据我读过的内容，覆盖`OnModelCreating()`似乎是这样做的方法。

这可以防止`DatabaseInitializer`自动运行，但我想创建一个单独的项目，我可以手动运行以更新数据库。所以我做了如下的事情：

```
static void Main(string[] args)
{
    Database.SetInitializer(new CreateDatabaseIfNotExists<EntityContext>());
    new EntityContext().Database.Initialize(true);
} 
```

问题是这似乎不起作用 -`OnModelCreating()`方法中设置的 null 初始化程序显然覆盖了我在任何其他调用中指定的任何内容`SetInitializer()`。即使我将`SetIntializer(null)`调用移至`EntityContext`类的静态构造函数以保证首先调用它，它仍然不起作用。它起作用的唯一方法是，如果我手动调用初始化程序，如下所示：

```
static void Main(string[] args)
{
    new CreateDatabaseIfNotExists<EntityContext>()
        .InitializeDatabase(new EntityContext());
} 
```

但是`DatabaseInitializer.InitializeDatabase()`直接调用似乎并不正确，因为实体框架基础设施应该调用它。

这是 EF Code First 中的错误吗？解决这个问题的“正确”方法是什么？

**更新：我认为使用`Update-Database`包管理器控制台命令手动创建数据库脚本比这个试图以编程方式更新数据库的 kludgey 项目更好。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:12:37.730

只要在调用禁用初始化程序之后调用设置初始化程序，这应该可以工作。在您的情况下， OnModelCreating 或静态 EntityContext 初始化程序都不会这样做。仅当您第一次使用 EntityContext 时才会调用静态初始化程序，在您的示例中直到调用 SetInitializer 之后才会调用。

您可以考虑在调用 SetInitializer 之前强制调用静态初始化程序。例如，这应该有效：

```
using (var context = new EntityContext())
{
    Database.SetInitializer(new CreateDatabaseIfNotExists<EntityContext>());
    context.Database.Initialize(true);
} 
```

# sql-server - SQL Server 2000：当没有记录返回时返回一个值

> ID：13182671
> 
> 赞同：0
> 
> 时间：2012-11-01T17:44:42.937
> 
> 标签：sql-server, excel, sql-server-2000, vba

我在 Excel 文档中有一个包含大约 1500 个零件号的列表。我想在查询中插入这些部件号以从我的数据库中提取描述，然后将结果复制/粘贴回 Excel 文档。

问题是我列表中的某些零件号不在我的数据库中，因此当我将查询结果复制/粘贴到 Excel 中时，它们不会匹配，因为查询中的某些零件号不返回结果。

```
SELECT ITEM.ITEMNO, ITEM.DESCRIPTION 
FROM ITEMS 
WHERE ITEM.ITEMNO IN ('1500','Part','Numbers') 
```

这似乎是一个简单的概念，我的谷歌搜索返回了很多结果，但它们通常涉及多个表和联合/连接。我只是无法将我看到的示例翻译成我的查询。如果 VBA 是一个更好的选择，那么我会全力以赴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:47:37.867

```
select a.ITEMNO, IFNULL(i.DESCRIPTION, 'N/A')
from (
    select '1500' as ITEMNO
    union all select 'Part'
    union all select 'Numbers'
) a
left outer join ITEMS i on a.ITEMNO = i.ITEMNO 
```

# java - Android比较两个数组？

> ID：13182678
> 
> 赞同：0
> 
> 时间：2012-11-01T17:45:03.357
> 
> 标签：java

我有一个问题，我需要比较两个数组，我想得到不匹配的值。

例子：

```
List<String> Array1=new ArrayList<String>();
List<String> Array2=new ArrayList<String>();
List<String> Array3=new ArrayList<String>();

Array1.add("1");
Array1.add("23");
Array1.add("1211");
Array1.add("12232");
Array1.add("231");
Array1.add("2231");

Array2.add("1");
Array2.add("23");
Array2.add("231");
Array2.add("2231");

// Array3 values are 1211 12232 
```

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T17:50:49.783

你需要使用[`removeAll`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collection.html#removeAll%28java.util.Collection%29).

```
List<String> array3 = new ArrayList<String>(array1);//Create copy of array 1
array3.removeAll(array2);//Remove common elements 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T17:51:25.987

使用 Set （它也会删除重复项）

```
 Set<String> set1 = new HashSet(array1);
 Set<String> set2 = new HashSet(array2);
 set1.removeAll(set2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T17:49:31.153

你必须自己做，但这并不难。一种可能的解决方案：

```
Collections.sort( Array2 );  // Don't need this one if Array2 is already sorted.
for( String s : Array1 ) {
    if ( Collections.binarySearch( Array2, s ) < 0 )
        Array3.add( s );
} 
```

# php - PHP 安全性 - 结合 strip_tags() 的功能；& htmlspecialchars();

> ID：13182682
> 
> 赞同：0
> 
> 时间：2012-11-01T17:45:11.040
> 
> 标签：php, html, security, xss

我希望我的论坛用户能够插入链接和其他允许的标签。例如，我希望帖子中的以下 HTML 按照作者的意图显示（即作为功能链接）：

```
<a href="http://www.example.com" rel="nofollow">A page</a> 
```

但是，我想保持一定程度的安全性，并且一直在阅读[strip_tags](http://php.net/manual/en/function.strip-tags.php) () 和[htmlspecialchars](http://www.php.net/manual/en/function.htmlspecialchars.php) ()。起初我认为我可以将 strip_tags 与以下内容一起使用：

```
<?php $link_string = strip_tags($link_string, '<a>'); ?> 
```

但是如果我理解正确，strip_tags 不会像 htmlspecialchars 那样保护我。例如，使用特殊字符的不正确 HTML 代码会使我容易受到攻击。link 标签的 style 和 onmouseover 属性也是如此。

在清除潜在有害字符和代码的同时允许帖子中的上述链接的最***简单解决方案是什么？***无论如何，我可以将这两个 PHP 函数组合起来以一种***简单***的方式做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:20:19.253

您几乎需要使用功能齐全的 HTML 解析器和清理程序。整体工作流程如下：

1.  用户输入他们的 HTML
2.  你用解析器解析它
3.  您可以通过仅保留您想要的内容（`<a>`标签，但要警惕`onclick`属性等）来清理解析的内容。

* * *

您可以查看[HTML Purifier](http://htmlpurifier.org)，如果它不符合您的需求，HTML Purifier 网站有[其他 PHP sanitizers 的比较](http://htmlpurifier.org/comparison)。我相信默认的 HTML Purifier 配置会保留链接。

* * *

强制性参考：[请不要使用正则表达式来解析 HTML](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T18:15:19.163

我建议使用stripslashes()，如果这要进入数据库，还有mysql_real_escape_string()。

```
// without SQL.
       function safeData($data) {
        $returnData = stripslashes(strip_tags(htmlspecialchars(trim($data))));
        return $returnData; 
    }

// with SQL.
       function safeDataMySQL($data) {
        $returnData = mysql_real_escape_string(stripslashes(strip_tags(htmlspecialchars(trim($data)))));
        return $returnData; 
    } 
```

# php - 使用 PHP preg_match 检查多个和组合模式

> ID：13182683
> 
> 赞同：0
> 
> 时间：2012-11-01T17:45:19.487
> 
> 标签：php, regex, preg-match

我不想在一个字符串中允许多个模式，例如，

```
$string = "php in  stackoverflow"; // multiple spaces not allowed
$string = "php in--stackoverflow"; // multiple hyphens not allowed
$string = "php in__stackoverflow"; // multiple underscores not allowed
etc 
```

所以，它适用于这些行，

```
if(preg_match('/\s\s+/', $string)) echo "only a single spaces are allowed";
if(preg_match('/\-\-+/', $string)) echo "only a single hyphens are allowed";
if(preg_match('/\_\_+/', $string)) echo "only a single underscores are allowed"; 
```

我也不想让下面的组合模式和上面的行不起作用，

```
$string = "php in -stackoverflow"; // a space with a hyphen not allowed
$string = "php in-_stackoverflow"; // a hyphens with a underscore not allowed
$string = "php in_ stackoverflow"; // a underscore with a space not allowed
etc 
```

任何想法我可以用一个简单的脚本来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:48:31.847

这就是字符类的用途，匹配多个字符。

```
if(preg_match('/[\s-_][\s-_]+/', $string)) echo "only a single space, hyphen or underscore is allowed"; 
```

# java - 匹配正则表达式与里面的引号？

> ID：13182686
> 
> 赞同：1
> 
> 时间：2012-11-01T17:45:27.747
> 
> 标签：java, regex, string, expression

我有一个需要使用正则表达式读取的文件。该字符串基本上可以包含任何内容（大写、小写、空格、符号等），只要该行不超过 60 个字符。我尝试的方法适用于文件中的大多数字符串，但是，我还需要能够允许引号，这就是我卡住的地方。这是我到目前为止所尝试的。

```
 else if (data.matches("[A-Za-z0-9 ,.?!%&()@$-_:;\\\"]+$")
            && !label.equals("") && prompt.equals("") && data.length() <= 60)
        {
            prompt = data;
        } 
```

它可以很好地读取其他所有内容，除了以下字符串

```
 Yes, but an error is displayed, “Fuser out.” 
```

不要问拼写，那是我收到的示例文件中的内容。

感谢您的帮助，希望我能在离开自助洗衣店之前得到回复，因为我在长岛，由于飓风，家里没有电或互联网。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:48:03.090

添加`\"`您的正则表达式，例如：

```
 data.matches("[A-Za-z0-9 ,.?!%&()@$-_:;\"\\]+$") 
```

在哪里`\"`使用，它将`"`用作匹配的文字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T18:02:49.137

如果有人感兴趣，这就是我最终简化它的方式。

```
 if (data.matches("\n"))
        {
            // do nothing, ignore
        }
        else if (data.matches("[^ ]+$") && label.equals("")
            && data.length() <= 60)
        {
            label = data;
        }

        else if (data.matches(".+$")
            && !label.equals("") && prompt.equals("") && data.length() <= 60)
        {
            prompt = data;
        }

        else if (data.matches(".+$")
            && !label.equals("") && !prompt.equals("") && message.equals("")
            && data.length() <= 60)
        {
            message = data;
        }

        else if (data.matches("[^ ]+[ ]+[0-9]$") && label.equals("")
            && prompt.equals("") && message.equals("") && data.length() <= 60)
        {
            children = data;
            String[] info = children.split("[ ]+");
            parent = info[0];
            numChildren = Integer.parseInt(info[1]);

            tree.getNodeReference(parent).setNumChildren(numChildren);
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T17:53:48.983

这是从您的代码中复制粘贴

```
 "Yes, but an error is displayed, \"Fuser out.\"".matches("[A-Za-z0-9 ,.?!%&()@$-_:;\\\"]+$")); 
```

它返回true，所以没关系。

但是当我从你的代码中复制粘贴时我遇到了问题。您的字符串“Fuser out.”中的字符“与您的正则表达式中的“不同的字符？？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T17:54:20.097

您可能在匹配该字符串时遇到问题，因为它使用了[智能引号](http://en.wikipedia.org/wiki/Quotation_mark_glyphs)。以下文章对此有一些很好的信息：[Handy regexes for smart quotes](http://axonflux.com/handy-regexes-for-smart-quotes)

总结是您可以使用以下 Unicode 转义符将这些字符添加到您的正则表达式中：

```
\u201C\u201D\u201E\u201F\u2033\u2036 
```

此外，您目前似乎打算通过`\"`在您的正则表达式（`\\\"`在 Java 字符串中）中使用来允许在您的字符类中使用反斜杠和双引号。这不是你想的那样，`\"`只会匹配`"`你正则表达式中的文字字符，它只是有一个不必要的反斜杠。要实际包含反斜杠作为有效字符，您需要在 java 字符串中使用四个连续的反斜杠。

您还需要转义连字符，否则`$-_`将被解释为字符范围。

所以你的新正则表达式看起来像这样：

```
data.matches("[A-Za-z0-9 ,.?!%&()@$\\-_:;\\\\\"\\u201C\\u201D\\u201E\\u201F\\u2033\\u2036]+$") 
```

# xcode - Xcode 在没有崩溃的情况下停止运行

> ID：13182687
> 
> 赞同：0
> 
> 时间：2012-11-01T17:45:28.130
> 
> 标签：xcode, multithreading

我遇到了一个问题，即我的应用程序在屏幕处于活动状态时工作正常，但是，当屏幕被锁定或休眠时，某些代码似乎无限期地暂停了应用程序，而实际上并没有崩溃。

该应用程序使用 AVAudioPlayers 和 boost::threads 来播放一些音乐曲目。当轨道结束时，必须调用大量设置才能准备新轨道。同时，应用程序必须暂停几秒钟。这种并行活动是通过 boost::threads 实现的。

当屏幕处于活动状态时，一切正常。但是，当屏幕处于非活动状态时，永远不会播放新曲目。没有崩溃，并且，使用断点进行调试，似乎应用程序只是挂在某一行上 - 该行从调试会话更改为调试会话 - 并且卡住了。我从来没有如此希望 EXC_BAD_ACCESS - 但什么都没有。没有提示代码为何挂起。

难道是我的主线程被阻塞了？我使用了一些 performSelectorOnMainThread 调用，但是当使用 applicationWillResignActive 锁定屏幕时，我已经停用了它们。然而，这并没有解决问题。

它似乎挂起的 boost::thread 如下：

```
void MyClass::loopThread(int waitSeconds)
{
    loopScheduled = true;

    sleep(waitSeconds);

    if ( loopScheduled == true ) {

        if (engine_isRunning()) {
            joinEngineThread();
        }
        startEngineThread();
        ((CPlusPlus*)m_obj)->markAsPlaying();
    }
} 
```

它似乎徘徊在

```
if ( loopScheduled == true ) { 
```

线。

在这个线程中发生的事情是其他并行线程可以在 sleep() 调用期间将 loopScheduled 设置为 false，如果 loopScheduled 为 false，则不会调用后面的方法。

但是，就我遇到的问题而言， loopScheduled 应该是无关紧要的——它没有被任何其他方法设置为 false，并且在 sleep() 调用之后仍然是 true。

有谁知道会发生什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:36:08.050

我发现了问题。当应用程序在轨道之间暂停时，音频会话正在结束。

事实证明，当屏幕被锁定或睡眠或应用程序处于后台时，当最后一个 AVAudioPlayer 完成播放音频会话时完成。这意味着无法再准备或播放新的 AVAudioPlayers - 因此无法播放新曲目。

为了解决这个问题，我现在在曲目之间的暂停期间播放无声文件。这使音频会话继续进行，这意味着新曲目在被指示播放时播放。

# android-ndk - 如何在android jni中播放Spotify媒体

> ID：13182689
> 
> 赞同：1
> 
> 时间：2012-11-01T17:45:30.407
> 
> 标签：android-ndk, java-native-interface, spotify

[我正在尝试按照http://damienradtke.org/playing-with-the-spotify-api/](http://damienradtke.org/playing-with-the-spotify-api/)的指导在 android 中创建一个简单的播放器，使用它我可以在 ubuntu 中从 spotify 播放曲目但我不能甚至建立在android上。到目前为止，我能够从 spotify 查询曲目，但是当我尝试使用 ALSA 添加播放功能时，这简直就是一场噩梦。我已经尝试使用 openAl 并且仍然被卡住。有没有更简单的方法在 jni 中播放流式音频？

在我的 &on_search_complete 回调结束时，我调用了一个函数“play”，如下所示：

```
void play(sp_session *session, sp_track *track)
{
if(DEBUG_MODE) __android_log_print(ANDROID_LOG_INFO, "spotify", "attempting to play track...");
sp_error error = sp_session_player_load(session, track);
    if (error != SP_ERROR_OK) {
    if(DEBUG_MODE) __android_log_print(ANDROID_LOG_INFO, "spotify", "Error: %s\n",    sp_error_message(error));
    exit(1);
}

if(DEBUG_MODE) __android_log_print(ANDROID_LOG_INFO, "spotify", "Playing...");
sp_session_player_play(session, 1);
} 
```

这会导致 &on_music_delivery 回调被执行，我相信这是我需要添加播放代码的地方。

```
static int on_music_delivery(sp_session *session, const sp_audioformat *format, const void *frames, int num_frames)
{
if(DEBUG_MODE) __android_log_print(ANDROID_LOG_INFO, "spotify", "in on_music_delivery");
} 
```

我在使用 ALSA 构建代码方面收效甚微，有人可以在这里指出正确的方向吗？它令人沮丧，我不想在最后一关放弃。注意：我是 C 语言的初学者

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T08:32:29.817

*免责声明：我为 Spotify 工作*

首先，我要声明的是，libspotify 附带的 Android 文档并没有它应该的那么好。我们正在努力改进这一点。在那之前，我可以建议您使用 OpenSL 从本机代码播放音频可能是完成此任务的最简单方法。我建议查看[这个 StackOverflow 问题以找到一些好的 OpenSL 教程](https://stackoverflow.com/questions/6763149/tutorials-for-opensl-es-for-android)。

# ios - 如何本地化邮件应用程序？

> ID：13182696
> 
> 赞同：0
> 
> 时间：2012-11-01T17:46:11.053
> 
> 标签：ios, xcode

我有一个 iPhone 应用程序，它使用 MFMailComposeViewController 发送带有报告的电子邮件。我已将应用程序本地化为 6 种不同的语言，包括情节提要文件和本地化.strings 文件。但是，当我测试它（在模拟器和设备上）时，所有邮件应用程序按钮（取消、发送、删除草稿、收件人、主题等）都没有本地化。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:01:02.697

只有当操作系统知道您的应用程序支持当前语言时，才会翻译默认的 iOS 组件。

查看项目设置的信息选项卡（不是目标设置）。有一个字段列出了可用的翻译。

也许 Xcode 没有自动识别您的翻译，您必须使用加号按钮在此处添加它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T18:22:06.713

我的解决方案是，我创建了一个新的 taget 语言文件来解决这个问题。只需为每个本地化制作一个：

![在此处输入图像描述](../Images/d7d7e497c8ce5566280c57154b5bc1f5.png)

完成后，尝试通过设置->常规更改语言：

![在此处输入图像描述](../Images/d75bef643fcbb7ec91fa66d99ad7cfe1.png)

从那里你去国际：

![在此处输入图像描述](../Images/d3f1fdc22478edc3657ab420248c530c.png)

从那里到语言：

![在此处输入图像描述](../Images/9b4ebca3e44d084ec1f907e0a3422267.png)

在这一点上，您只需将默认语言更改为您想要的任何语言，并且您的本地化是。例如：

![在此处输入图像描述](../Images/9659ca6f5fb680d59c1077fff0481465.png)

这应该可以帮助你。

# python - Haskell 到 Python：多函数转换问题

> ID：13182699
> 
> 赞同：4
> 
> 时间：2012-11-01T17:46:26.507
> 
> 标签：python, haskell, code-conversion

我对编程很陌生，我被要求将 3 个 haskell 函数转换为 python 作为练习。这 3 个函数是相连的，因为其中一个函数的输出用作下一个函数的输入，以此类推。

我得到了haskell函数的作用，但我不知道如何开始转换它们！

这是haskell代码：

```
factorial :: Int -> Int
factorial n = product (down n)

product :: [Int] -> Int
product [] = 1
product (a:as) = a * product as

down :: Int -> [Int]
down 0 = []
down n = n : down (n-1) 
```

这是我转换它的尝试：

```
class function:
    def down(self):
        if self.n == 0:
            self.lista = []
        else:
            self.lista = range(self.n, 0, -1)

    def product(self):
        for x in self.lista:
            if x == []:
                self.product = 1
            if x != []:
                for i in self.lista:
                    self.product = i * self.product

    def factorial(self):
        self.n = int(raw_input("n="))

        self.fact = self.product(self.down(self.n))

        print self.fact
        raw_input()

c = function()
c.factorial() 
```

好吧，首先我相信这不是haskell代码的“直接转换”。不过那没关系，但是第二，它不起作用。

这种缺乏编程背景正在杀死我......有人可以帮我解决这个问题吗？

非常感谢！

编辑：

这个问题的重点是将haskell完全转换为python。我自己做了一个精简版，这是练习的下一步^^

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T17:58:29.197

首先，抛弃`class`包装——这不是必需的。

直接的 Python 翻译将类似于：

```
# factorial :: Int -> Int
def factorial(n):
    return product(down(n))

# product :: [Int] -> Int
def product(arr):
    if len(arr) == 0: return 1
    a, ar = arr[0], arr[1:]
    return a * product(ar)

# down :: Int -> [Int]
def down(n):
    if n == 0: return []
    return [n] + down(n - 1) 
```

但是这里的递归风格不是很 Pythonic。下一个练习：用迭代、列表推导或调用`reduce`（如果在 Python2 上）替换递归。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T17:53:42.603

如果您想编写惯用的 Python，请避免递归。

`down(n)`拼写为`range(n, 0, -1)`。如果您想要惰性语义，请使用`xrange`它，这将更接近 Haskell 的精神。

`product(lst)`是`reduce(operator.mul, lst, 1)`。（只是拼出循环会更惯用，但这更短。）

从那里开始应该很明显如何转换`factorial`.

# c++ - 文件输入分离

> ID：13182700
> 
> 赞同：0
> 
> 时间：2012-11-01T17:46:34.440
> 
> 标签：c++, file, input, output

目前，我正在为一个类编写一个程序，我们必须使用文件输入和输出。她给了我们一个文件，里面有 8 组不同的 7 个数字（都是整数）。我们必须让用户输入他们想要阅读的那一行，然后输出最高数字、最低数字、数字集合的总和以及集合的平均值。我在让 XCode 只读取一行数字时遇到问题。`getline()`如果这甚至是一个解决方案，我对这个功能没有太多的练习。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T20:16:51.237

尽管这是一项家庭作业，但这会牺牲效率来表明您知道某个主题，但是代码应该给您一个模糊的概念。

注意**这仅在您的用户只能输入一行并且程序退出时才有效

```
cout << "enter line...";
cin >> line;
//error check line to make sure it is in bounds

///loops through each set of 7 numbers LINE times

//loop through line(FOR LOOP)

    //read in the 7 vars

//end loop

//loop through array(FOR LOOP)

    //add array[i] onto sum
    //is this number higher than the var HIGH? if yes then set high equal to array element
    //is this number lower than the low var? if yes then set low equal to array element

//end loop 
```

# javascript - JS 和 CSS 中的内容滑块

> ID：13182701
> 
> 赞同：0
> 
> 时间：2012-11-01T17:46:34.333
> 
> 标签：javascript, jquery, css, animation, overlay

本质上，我想要完成的是制作一个内容滑块，该滑块具有不透明的黄色 div，它在过渡图像（向上状态）上滑动，然后以灰色（向下状态）向下滑动到图像底部上方约 100px 处。这些向下状态应充当幻灯片选择器，单击时会展开到向上状态和相关图像。

我已经尝试使用几种内容和幻灯片构建来实现这一点，但它们都没有真正让我开发效果。s3Slider 是我最成功的一个，因为它可以获得每张幻灯片的向上状态动画。

这是js::

```
(function($){  

$.fn.s3Slider = function(vars) {       

    var element     = this;
    var timeOut     = (vars.timeOut != undefined) ? vars.timeOut : 4000;
    var current     = null;
    var timeOutFn   = null;
    var faderStat   = true;
    var mOver       = false;
    var items       = $("#" + element[0].id + "Content ." + element[0].id + "Image");
    var itemsSpan   = $("#" + element[0].id + "Content ." + element[0].id + "Image span");

    items.each(function(i) {

        $(items[i]).mouseover(function() {
           mOver = true;
        });

        $(items[i]).mouseout(function() {
            mOver   = false;
            fadeElement(true);
        });

    });

    var fadeElement = function(isMouseOut) {
        var thisTimeOut = (isMouseOut) ? (timeOut/2) : timeOut;
        thisTimeOut = (faderStat) ? 10 : thisTimeOut;
        if(items.length > 0) {
            timeOutFn = setTimeout(makeSlider, thisTimeOut);
        } else {
            console.log("Poof..");
        }
    }

    var makeSlider = function() {
        current = (current != null) ? current : items[(items.length-1)];
        var currNo      = jQuery.inArray(current, items) + 1
        currNo = (currNo == items.length) ? 0 : (currNo - 1);
        var newMargin   = $(element).width() * currNo;
        if(faderStat == true) {
            if(!mOver) {
                $(items[currNo]).fadeIn((timeOut/6), function() {
                    if($(itemsSpan[currNo]).css('bottom') == 0) {
                        $(itemsSpan[currNo]).slideUp((timeOut/6), function() {
                            faderStat = false;
                            current = items[currNo];
                            if(!mOver) {
                                fadeElement(false);
                            }
                        });
                    } else {
                        $(itemsSpan[currNo]).slideDown((timeOut/6), function() {
                            faderStat = false;
                            current = items[currNo];
                            if(!mOver) {
                                fadeElement(false);
                            }
                        });
                    }
                });
            }
        } else {
            if(!mOver) {
                if($(itemsSpan[currNo]).css('bottom') == 0) {
                    $(itemsSpan[currNo]).slideDown((timeOut/6), function() {
                        $(items[currNo]).fadeOut((timeOut/6), function() {
                            faderStat = true;
                            current = items[(currNo+1)];
                            if(!mOver) {
                                fadeElement(false);
                            }
                        });
                    });
                } else {
                    $(itemsSpan[currNo]).slideUp((timeOut/6), function() {
                    $(items[currNo]).fadeOut((timeOut/6), function() {
                            faderStat = true;
                            current = items[(currNo+1)];
                            if(!mOver) {
                                fadeElement(false);
                            }
                        });
                    });
                }
            }
        }
    }

    makeSlider();

};  

})(jQuery); 
```

这是一个非常短的代码，我正在尝试修改它以获得我想要的效果。看起来代码调用了来自 jquery 的 .slideUp 和 .slideDown 事件。我不知道如何使这些动画不隐藏内容，而是动画到前面提到的向下状态高度。

任何具体的帮助都会很棒。对整个内容滑块解决方案的任何帮助都可以挽救生命！

感谢您的时间和帮助，帮助我了解 jquery 的世界。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:55:35.203

我认为您正在寻找动画功能而不是 slideUp，就像这样......

```
$someDiv.animate({top: '-=200'}); 
```

[http://api.jquery.com/animate/](http://api.jquery.com/animate/)

# security - 如何保护对 Windows azure 实例的远程桌面访问

> ID：13182706
> 
> 赞同：2
> 
> 时间：2012-11-01T17:46:56.303
> 
> 标签：security, azure, remote-desktop, azure-web-roles

我已成功[启用对我的 Windows Azure Web 角色的远程桌面访问](http://msdn.microsoft.com/en-gb/library/windowsazure/gg443832.aspx)，但理想情况下，我想锁定访问权限，使其不仅受密码保护。这可能吗？例如，限制 RDP 对特定 IP 范围的访问，需要客户端证书等。

我意识到建议您不要始终启用远程桌面，而仅启用它以进行故障排除。但是，如果启用它以进行故障排除，安全问题仍然存在。（除非我遗漏了什么，否则您无法在不重新发布的情况下启用/禁用 RDP 访问，这似乎也很烦人）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T18:34:31.273

您可以做的一件事是将您的站点移动到一个持久的 VM，它使您能够：

*   2013 年 11 月编辑：您可以使用 ACL 使用 PowerShell 锁定 RDP 的特定端口范围。新的 Azure 门户允许您使用 PowerShell 在门户内部执行此操作：[http ://weblogs.asp.net/scottgu/archive/2013/11/04/windows-azure-import-export-hard-drives-vm- acls-web-sockets-remote-debugging-continuous-delivery-new-relic-billing-alerts-and-more.aspx](http://weblogs.asp.net/scottgu/archive/2013/11/04/windows-azure-import-export-hard-drives-vm-acls-web-sockets-remote-debugging-continuous-delivery-new-relic-billing-alerts-and-more.aspx)

*   您可以使用操作系统软件 Windows Firwall

*   通过另一个端口而不是默认的 3389。在端点管理门户中，您可以让一个外部端口（即 2400）指向一个内部端口 3389。对于嗅探 RDP 端口的人来说，这会稍微混淆 rdp 访问

*   上面提到的端点行为可以很快添加或删除..因此您可以在服务器上启用 RDP，但在为虚拟机添加/启用端点之前不允许流量进入

您也可以使用脚本（使用 web/worker 角色）来更改 RDP 端口以模仿上述行为，但我不会这样做。使用 PowerShell 脚本，您可以拥有一个在后台运行 powershell 脚本的管理页面（打开/关闭 RDP）。但我认为这是一个很大的矫枉过正，除非你真的想关闭 RDP 以实现合规性。

编辑：自 2012 年以来的附加信息 :)

# ios - Apple 是否要求通过 SSL 进行授权？

> ID：13182714
> 
> 赞同：0
> 
> 时间：2012-11-01T17:47:20.180
> 
> 标签：ios, https, app-store, authorization, security

我的一个朋友声称 Apple 拒绝使用普通 HTTP 进行身份验证的应用程序。
我无法验证此信息，Google 也没有就该主题发表任何评论。

是否有任何已知的应用程序因不使用 SSL 而被拒绝的案例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T17:52:31.757

Apple 并不关心您如何处理数据传输的安全性。我是一个可用一年多的应用程序的作者。该应用程序获得了一些更新，这些更新都经过了审批流程，并且该应用程序从未使用 HTTPS 进行注册。

在 iOS 的头几年，即使是 Twitter 或 Facebook 等应用程序也没有使用 HTTPS。

# c++ - 安全方便的泛型散列（用于 STL 无序集和映射）习语？

> ID：13182719
> 
> 赞同：1
> 
> 时间：2012-11-01T17:47:46.840
> 
> 标签：c++, templates, hash, stl

要准备在 中使用的结构`unordered_set`，需要散列函数。这可以通过重载`operator size_t()`（ew）或烦人的方式来完成，如下所示：

```
namespace std
{
 template<> struct hash<MyStruct> : public unary_function<MyStruct, size_t>
 {
  size_t operator()(const MyStruct& mystruct) const
  {
   return 0; //hash here
  }
 };
} 
```

有没有办法创建这样的接口：

```
struct Hashable
{
 virtual size_t hash() = 0;
}; 
```

并设置`std::hash`为适用于它的任何实现？我很确定模板不能那样工作，所以这让我陷入了困境。是否有一个安全的 size_t 成语可以像安全的 bool 成语一样工作，用于转换为 size_t？或者是其他东西？`std::hash`当每个结构中的公共接口和成员函数更方便时，为每个结构编写新的特化是愚蠢的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T17:55:11.167

其实还有另一种解决方案：

```
template <typename T>
struct Hashable {
    size_t operator()(T const& t) { return hash_value(t); }
};

template <typename T, typename E = std::equal<T>, typename A = std::allocator<T>>
using MySet = std::unordered_set<T, Hashable<T>, E, A>; 
```

现在，您所要做的就是定义一个`hash_value`接受`T`or`T const&`作为参数并返回 a的自由函数`size_t`。

**编辑：**更改`hash`为`hash_value`，就像在 Boost 中一样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T17:51:40.867

> 每个结构中的通用接口和成员函数会方便得多。

它不会。`std::hash`您现在不必处理散列，而是必须用这个细节来打扰每个类/结构*的**每个*接口。你必须经常处理“我的一些同事删除了一个”。等不会更好。情况会更糟。*`Hashable`*

 *您可以通过 SFINAE 的部分专业化来实现它。*

# java - 一个应用程序在 32 位 Linux 机器上可以使用多少内存？

> ID：13182720
> 
> 赞同：1
> 
> 时间：2012-11-01T17:47:49.313
> 
> 标签：java, linux, memory, operating-system, ram

我是 Linux 新手，对内存限制有疑问。

据我所知，在 Windows 中，在 32 位版本的操作系统中只能使用 2.8 GB，但 Linux 呢？它也是 4 GB 还是更少？

**我对在 RHEL5 中运行的 Java 应用程序特别感兴趣。但是，如果您对其他技术有答案 - 那将是很棒的聆听。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T18:02:26.330

RHEL5 32 位分别为用户进程和内核提供 3G/1G 拆分。

这意味着单个进程最多只能访问 3G 的地址空间。系统本身可以拥有超过 4G 的 RAM，如果您使用的是 PAE 内核，所有这些都将可供内核使用。并且内核将能够在不同的用户进程之间正确分配该内存。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T17:50:16.187

它最多可能是 3Gbytes（但一些奇怪的内核配置选项可能会提高它，也许是 3.3Gbytes）

[您可以使用setrlimit(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/setrlimit.2.html)系统调用降低可用内存限制（可能通过`ulimit`bash 内置）

如果你有一个内存超过 4GB 的大熨斗，安装 64 位发行版应该是有意义的。

您可能还考虑使用例如[gcj](http://gcc.gnu.org/java/)[提前编译您的 Java 应用程序](http://en.wikipedia.org/wiki/Ahead-of-time_compilation)，但是该编译器已经过时并且只支持旧的 Java 标准；而且我不确定你会赢得一些内存空间（可能是几兆字节，因为它的运行时间比你的 JVM 小得多）。

# django - Django模型递归关系

> ID：13182721
> 
> 赞同：2
> 
> 时间：2012-11-01T17:47:56.200
> 
> 标签：django, recursion, models, relationship

1.  为什么要创建递归关系？

```
    aField = models.ForeignKey('self')

```

3.  这和上面的一样吗？

```
        类aClass（模型。模型）：  
        aField = models.ForeignKey('aClass')

```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T18:01:37.417

1.  当您希望父节点和子节点具有相同的模型结构时，您可能需要创建递归关系。例如，如果您有带有文本、数据和 user_id 的评论：

    ```
    class Comment( models.Model ):
        text = models.TextField()
        create_date_time = models.DateTimeField()
        parent_comment = models.ForeignKey( 'self' ) 
    ```

2.  我认为是的（您可以尝试对其进行测试），但这不是一个好的形式。如果更改类名，则必须更改括号中的字符串值。如果你使用'self'，你就不会那么头疼了。

# python - 来自 edX 的 Python 任务......再次

> ID：13182732
> 
> 赞同：0
> 
> 时间：2012-11-01T17:48:32.313
> 
> 标签：python

这是我第二次就 MIT edX 课程的任务向你寻求帮助。

任务是：如果一个单词按顺序包含字母 e、r、i 和 c，则认为它是 erician。例如，我们会说以下单词是 erician：“meritocracy”、“generic”、“derrick”、“euphoric”、“heretic”和“electric”，因为它们每个都包含这四个字母的正确顺序。“大米”这个词不是erician，因为四个字母出现的顺序错误。

在这个问题中，我们希望您编写一个更通用的函数，称为 x_ian(x, word)，如果 x 的所有字母以与它们在 x 中出现的顺序相同的顺序包含在 word 中，则返回 True。

***这个函数必须是递归的！您可能不会使用循环（for 或 while）来解决此问题。***

这是我的函数代码：

```
if x=="":
        return True
if len(x)>len(word):
        return False
if x==word:
    return True
elif (x[0]==word[0]):
    x_ian(x[1:],word[1:])
else:
    x_ian(x,word[1:]) 
```

我目前不知道为什么我的函数返回 None，而不是 True 或 False。我已经在 IDLE 中使用了调试器，它使用 ' main '.x_ian().line49: return True 完成了执行

然而该函数返回无。

将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:50:21.627

您需要返回递归调用的输出：

```
elif (x[0]==word[0]):
    return x_ian(x[1:],word[1:])
else:
    return x_ian(x,word[1:]) 
```

否则 python 将简单地到达你的函数的末尾，这意味着它会返回`None`；函数的默认返回值。

您的代码可以简化为：

```
def x_ian(x, word):
    if not x or x == word:
        return True
    if len(x) > len(word):
        return False
    if x[0]==word[0]:
        return x_ian(x[1:], word[1:])
    return x_ian(x, word[1:]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T17:53:30.147

您将得到 None 的回报，因为并非所有分支都返回一个值。这两个递归调用需要返回它们的结果。就像是：

```
return x_ian(x[1:],word[1:]) 
```

如果一个函数从不调用 return，那么 python 会隐式返回 None。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-09T19:23:02.147

在这里，该`.index()`功能可以非常方便。字符串上的`index()`函数将始终返回作为参数传入的字母第一次出现的索引。所以，

```
print 'abcdceg'.index('c') 
# will return 2 - the first occurrence of 'c' in the string 
```

利用这一点，我们将首先检查 x[0] 是否像这样从字符串中返回索引

```
try:
   word.index(x[0])
except:
   # do something ... 
```

如果 x 的第一个字母在单词中根本不存在，则会进入异常。但是，如果它确实返回一个索引，我们希望从第一次出现到单词结尾修剪这个字符串，并在 x 中查找连续的字母，就像这样，作为递归调用：

```
x_ian(x[1:], word[word.index(x[0]) + 1:]) 
```

现在，如果字符串没有返回索引，这意味着可能有两种可能性，或者 x 用完了字母，或者 x 中有一个字母在单词中不存在。所以，现在我们有例外情况：

```
try:
  word.index(x[0])
except:
  if len(x) == 0:
    return True
  else:
    return False 
```

把它们放在一起

```
def x_ian(x, word):   
    # the .index will always return the 1st occurance's index
    try:
        word.index(x[0])
    except:
        if len(x) == 0:
            # at this point, all the letters in x have been checked
            #  in successive order, which means, it exists.
            return True
        else:
            # at this point, we encountered a letter in x that doesn't
            #  exist in word.
            return False

    return x_ian(x[1:], word[word.index(x[0]) + 1:]) 
```

[您可以在此处](http://pythontutor.com/visualize.html#code=def+x_ian(x,+word%29%3A%0D%0A++++%22%22%22%0D%0A++++Given+a+string+x,+returns+True+if+all+the+letters+in+x+are%0D%0A++++contained+in+word+in+the+same+order+as+they+appear+in+x.%0D%0A%0D%0A++++%3E%3E%3E+x_ian('eric',+'meritocracy'%29%0D%0A++++True%0D%0A++++%3E%3E%3E+x_ian('eric',+'cerium'%29%0D%0A++++False%0D%0A++++%3E%3E%3E+x_ian('john',+'mahjong'%29%0D%0A++++False%0D%0A++++%0D%0A++++x%3A+a+string%0D%0A++++word%3A+a+string%0D%0A++++returns%3A+True+if+word+is+x_ian,+False+otherwise%0D%0A++++%22%22%22%0D%0A++++%23%23%23TODO.%0D%0A%0D%0A++++%23base+case+is%0D%0A%0D%0A++++%23+the+.index+will+always+return+the+1st+occurance's+index%0D%0A++++%0D%0A++++try%3A%0D%0A++++++++word.index(x%5B0%5D%29%0D%0A++++except%3A%0D%0A++++++++if+len(x%29+%3D%3D+0%3A%0D%0A++++++++++++return+True%0D%0A++++++++else%3A%0D%0A++++++++++++return+False%0D%0A++++++++%0D%0A++++return+x_ian(x%5B1%3A%5D,+word%5Bword.index(x%5B0%5D%29%3A%5D%29%0D%0A++++%0D%0A++++%0D%0Aprint+x_ian('eric',+'ceriumc'%29&mode=edit&origin=opt-frontend.js&cumulative=false&heapPrimitives=false&textReferences=false&py=2&rawInputLstJSON=%5B%5D)查看运行代码。

# android - 将 apk 从已编译的 AOSP 推送到设备

> ID：13182733
> 
> 赞同：0
> 
> 时间：2012-11-01T17:48:35.553
> 
> 标签：android, android-source

我将 AOSP 中的代码同步到我的计算机上，修改了`Phone.apk`文件的源代码。我运行了 make (for Maguro)，并在 /out 文件夹中获得了一个 Phone.apk 文件。我在我的手机上使用了一个 AOSP rom（但不是我自己编译的那个），但是当我将创建的`Phone.apk`文件移动到`/system/app`我失去信号时，当我启动时`Settings > Mobile Networks`我得到一个 FC。Logcat 说我失踪了`MobileNetworkSettings.java`（我知道我不是）。为了使用从源代码构建的 apk 文件，我需要做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T09:19:58.883

问题，我猜，如下。电话应用程序使用 sharedUserId: `android:sharedUserId="android.uid.phone"`。因此，由于 AOSP 映像和您的 Phone.apk 使用不同的证书进行签名，因此您的电话应用程序不允许接收此共享 UID（因为如果应用程序使用相同的证书签名，则它们可以共享相同的 UID）并接收新的 UID。因此，电话应用程序无法使用无线电接口（信号松散）并且无法配置。

尝试使用您的密钥创建您的 AOSP 映像并将其刷入设备。然后使用相同的证书签署您的电话应用程序。我想这应该会有所帮助。祝你好运！

# javascript - 使用 javascript ot 更新状态时的 ASP.NET / Javascript 页面格式问题

> ID：13182735
> 
> 赞同：0
> 
> 时间：2012-11-01T17:48:43.143
> 
> 标签：javascript, asp.net, html

我有一个页面（twitter bootstrap 主题），它使用 javascript 在页面加载时更新用户，以了解脚本在进程中的位置。因此，HTML 的第一行是：

```
<div id='mydiv' >_</div><script>mydiv.innerText = '';</script><!DOCTYPE html> 
```

然后我的代码更新 mydiv 元素的位置，完成后运行 page_load 函数并显示所有信息。

问题是这会导致 Internet Explorer 出现格式问题。IE 进入怪癖模式，我假设是因为

```
<!doctype html> 
```

不在页面顶部。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T17:59:30.823

有`div`这样的情况，无论这是否导致您的特定问题（我的猜测是肯定的），都需要修复。你不能有这样的无效 HTML 并期望它表现得很好。

绝对将那个 div 和脚本移动到适当的位置 - 我猜是 的顶部`body`，我敢打赌这可以解决你的问题。

# php - fsockopen 是否只允许某些服务器？

> ID：13182737
> 
> 赞同：0
> 
> 时间：2012-11-01T17:48:57.413
> 
> 标签：php, ping

所以我最近开始联系 Hostgator 关于我之前启动的一个插件，它根据服务器状态返回“在线”或“离线”。

现在，问题来了。

Hostgator 禁用了 fsockopen，在骚扰他们之后我启用了它。但并非所有服务器 ips 和端口都可以使用它？

例如：

```
<?php
$ip = "play.magicacraft.net";
$port = "25567";

$online = @fsockopen( $ip, $port, $errno, $errstr, 200);
if($online >= 200) { 
echo '<a href="#" class="MPServer_Online">Online</a>'; 
}
else {
echo '<a href="#" class="MPServer_Offline">Offline</a>'; 
} 
?> 
```

这对我来说是在线返回的。

如果我使用另一个服务器 ip 和端口，例如：

```
$port = 72.20.55.85";
$ip = "25570"; 
```

它说离线，尽管它在线

这是我的错还是他们的错？我对此提出质疑，因为诸如[http://minecraftservers.org/index/1](http://minecraftservers.org/index/1)之类的网站可以访问此信息而我不能。

谢谢你的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T14:50:03.947

您是否检查以确保该端口没有被防火墙/iptables 阻止？

尝试使用端口 80 [http://php.net/manual/en/function.fsockopen.php](http://php.net/manual/en/function.fsockopen.php)的默认示例，看看它是否可能是端口阻塞问题

# javascript - 使用 Javascript D3 库，如何在选择矩形时替换数据？

> ID：13182740
> 
> 赞同：2
> 
> 时间：2012-11-01T17:49:05.807
> 
> 标签：javascript, svg, d3.js

我有一个包含计数和日期对象的对象数组。使用它们在时间尺度上创建选择的矩形。效果很好。但我想使用 jQuery UI 中的滑块来允许用户将结果缩小到整个范围的一部分，并更好地查看更精细的细节。但是我无法弄清楚如何从我的矩形选择中动态添加和删除数据点。这是代码。有问题的部分位于滑块滑动事件处理程序的最底部。我非常感谢有关如何正确管理数据的任何帮助。

```
 var data=env.client.data;
  var selected=env.client.selected;

  var max=_.max(data,function(element){
    return(element.count);
  }).count;

    var height=250;
    var width=960;

    var padding={
      bottom:25,
      left:30,
      right:10,
      top:10
    };

    var barwidth=(width-(padding.left+padding.right))/data.length;

    var chart=d3.select('#chart')
                .html('')
                .append('svg')
                .attr('height',height)
                .attr('width',width);

    var scale={};

    scale.x=d3.time
              .scale
              .utc()
              .domain([d3.first(data).date,d3.last(data).date])
              .range([padding.left,width-padding.right]);

    scale.yy=d3.scale
               .linear()
               .domain([0,max||1])
               .range([height-padding.bottom,padding.top]);

    scale.yh=d3.scale
               .linear()
               .domain([0,max||1])
               .range([0,height-(padding.bottom+padding.top)]);

    var axis={};

    axis.x=d3.svg
             .axis()
             .scale(scale.x)
             .orient('bottom');

    axis.y=d3.svg
             .axis()
             .scale(scale.yy)
             .orient('left')
             .ticks(12);

    if(max<12) axis.y.ticks(max);

    var xa=chart.append('g')
                .attr('class','xAxis')
                .attr('transform','translate(0,'+(height-padding.bottom)+')')
                .call(axis.x);

    var ya=chart.append('g')
                .attr('class','yAxis')
                .attr('transform','translate('+(padding.left)+',0)')
                .call(axis.y);

    var rects=chart.selectAll('rect')
                   .data(data)
                   .enter()
                   .append('rect')
                   .attr('x',function(d){
                     return(scale.x(d.date));
                   })
                   .attr('y',function(d){
                     return(scale.yy(d.count));
                   })
                   .attr('height',function(d){
                     return(scale.yh(d.count));
                   })
                   .attr('fill',function(d){
                     return(d3.hsl(120-(120*(d.count/50)),1,0.1));
                   })
                   .attr('width',barwidth)
                   .attr('title',function(d){
                     return(d.tooltip);
                   })
                   .on('mouseover',function(d){
                     d3.select(this)
                       .attr('fill',d3.hsl(120-(120*(d.count/50)),1,0.5));
                   })
                   .on('mouseout',function(d){
                     d3.select(this)
                       .attr('fill',d3.hsl(120-(120*(d.count/50)),1,0.1));
                   })
                   .on('click',function(d){
                     var selected=moment(d.date.getTime()).utc();
                     env.client.range.selected=selected;
                     $('#client-datetime').val(selected.format('YYYY MMM DD, HH:mm'));
                     _.publish('client date changed');
                   });

    var be=d3.first(data).date.getTime();
    var ee=d3.last(data).date.getTime();

    $('#slider').slider({
      range:true,
      min:be,
      max:ee,
      values:[be,ee],
      slide:function(event,ui){
        var bd=new Date(ui.values[0]);
        var ed=new Date(ui.values[1]);
        var subdata=_.filter(data,function(element){
          return((element.date>=bd)&&(element.date<=ed));
        });
        var barwidth=(width-(padding.left+padding.right))/subdata.length;
        scale.x.domain([bd,ed]);
        xa.call(axis.x);
        rects.data(subdata)
             .remove();
        rects.enter()
             .append('rect')
             .attr('x',function(d){
               return(scale.x(d.date))
             })
             .attr('width',barwidth);
      }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T18:23:54.667

据我所知，你在正确的轨道上。

你得到了`subdata`，然后你把它应用到rects

```
 rects.data(subdata)
         .remove();// this is wrong!! 
```

我不确定您为什么要调用`remove()`，但这实际上是在删除子数据中的所有 DOM 元素。这应该被取出。

接下来，（我很确定）您需要将矩形重新分配给新绑定。IE

```
 rects = rects.data(subdata); 
```

接下来，您附加所有`enter()`'ing rects。但是您缺少一些设置（“y”、“填充”等属性）。但是您还需要更新集合中未添加或删除的所有子数据成员。所以它变成：

```
 rects.enter()
         .append('rect')
         .attr('y',function(d) {
           return(scale.yy(d.count));
         })
         .attr('height',function(d){
           return(scale.yh(d.count));
         })
         .attr('fill',function(d){
           return(d3.hsl(120-(120*(d.count/50)),1,0.1));
         });

    rects// This happens for all updated AND entering rects
         .attr('x',function(d){
           return(scale.x(d.date))
         })
         .attr('width',barwidth); 
```

最后，您需要删除那些不再在子数据中的：

```
 rects.exit().remove(); 
```

这个逻辑很像你在 init 脚本中的更高层（除了 init 版本只在`enter()`'ing 集上运行）。所以你应该把它全部移到一个函数中：

```
updateChart(newData) {
    rects = rects.data(subdata);
    rects.enter()
    // etc....

    rects.remove()
} 
```

并在初始化时和应用新子数据时调用此函数。

# c - Cygwin 上没有 sys/sendfile.h？

> ID：13182743
> 
> 赞同：1
> 
> 时间：2012-11-01T17:49:18.020
> 
> 标签：c, compiler-errors, cygwin

我正在尝试在 Cygwin 上编译一些需要 sendfile.h 的 C 代码。当我尝试编译时，它给了我

```
fatal error: sys/sendfile.h: No such file or directory
compilation terminated. 
```

我该如何解决这个问题？我必须迁移到 linux 平台吗？我在 Cygwin 上安装了 gcc4.5。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T18:03:09.930

就像提到的评论一样，`sendfile`不是 POSIX，但是，来自 [sendfile(2)的手册页](http://linux.die.net/man/2/sendfile)

> sendfile() 在一个文件描述符和另一个文件描述符之间复制数据。因为这种复制是在内核中完成的，所以 sendfile() 比 read(2) 和 write(2) 的组合更有效，后者需要在用户空间和用户空间之间传输数据。

这意味着它基本上是 a`read()`后跟 a `write()`，因此自己实现它会相对容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-04T13:43:40.090

我删除了

```
#include <sys/sendfile.h> 
```

并重写

```
sendfile(write_fd, read_fd, &offset, stat_buf.st_size); 
```

至

```
read(read_fd, &offset, stat_buf.st_size);
write(write_fd, &offset, stat_buf.st_size); 
```

它工作正常。谢谢。

# entity-framework - 如何在 SQL Server 中使用 Unicode 字符串作为主键

> ID：13182748
> 
> 赞同：0
> 
> 时间：2012-11-01T17:49:26.913
> 
> 标签：entity-framework, unicode, indexing, sql-server-2012

我无法插入主键仅因某些特殊 Unicode 字符而异的记录。

例如，如果我在数据库`"test"`中已有一条主键为 of 的记录，并且我尝试插入另一条主键为 of 的记录，则会`"test + '\u13A4' + '\u13B4' + '\u13B9'"`出现重复键错误。我将 EF 5 与 SQL Server 2012 一起使用。

主键定义为 an `nvarchar`，排序规则设置为`SQL_Latin1_General_CP1_CI_AS`。如果其中有特殊的 Unicode 字符，它可以对主键进行查找，但如果它只是因 Unicode 特殊字符而异（如上例所示），我会在插入时收到重复键错误。你如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:54:08.023

SQL_Latin1_CP1 排序规则不适合所有 Unicode 代码点。

```
select N'test' collate SQL_Latin1_General_CP1_CI_AS
union
select N'test' + nchar(5028) + nchar(5044) + nchar(5049)
-- result: 1 row 
```

对 SQL Server 2008 及更高版本使用较新的，例如

```
select N'test' collate Latin1_General_100_CI_AS
union
select N'test' + nchar(5028) + nchar(5044) + nchar(5049)
-- result: 2 rows 
```

您使用的 unicode 字符属于 16 位字符范围，因此补充字符还没有发挥作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T18:25:13.450

这必须与您连接字符串的方式有关。以下对我有用：

```
 CREATE TABLE #UnicodeTest (
      UnicodePK NVARCHAR(100) COLLATE SQL_Latin1_General_CP1_CI_AS PRIMARY KEY 
    )

    INSERT #UnicodeTest
            ( UnicodePK )
    VALUES  ( N'test'
              )

    INSERT #UnicodeTest
            ( UnicodePK )
    VALUES  ( N'test\u13A4\u13B4\u13B9'
              )

    INSERT #UnicodeTest
            ( UnicodePK )
    VALUES  ( N'test + \u13A4 + \u13B4 + \u13B9'
              )

    INSERT #UnicodeTest
            ( UnicodePK )
    VALUES  ( N'test + ''\u13A4'' + ''\u13B4'' + ''\u13B9'''
              )

    SELECT * FROM #UnicodeTest

    DROP TABLE #UnicodeTest 
```

# latex - 如何在 LaTeX 文章中进行完全对齐？

> ID：13182749
> 
> 赞同：6
> 
> 时间：2012-11-01T17:49:28.880
> 
> 标签：latex

我是 LaTeX 的初学者。我尝试了几个例子，但我无法完全证明对齐。也许这个问题不是很烦人，你可以帮忙。

有我的代码示例：

```
 \documentclass[10pt,a4paper]{article}
    \usepackage[utf8]{inputenc}
    \usepackage[L7x]{fontenc}
    \usepackage[lithuanian]{babel}
    \usepackage{multicol}
    \usepackage[left=1.5cm,right=1.5cm,top=2cm,bottom=2cm]{geometry}

    \begin{document}
    \title{text text text text text text text text text text text text}
    \author {text text text text}
    \date{}
    \maketitle
    \center{\textit{ text text text text text text}}
    \center{\textit{ text text text text text text}}\\
    \small\textbf{Abstract.}
    An abstract is a brief summary of a research article, thesis, review, conference proceeding or any in-depth analysis of a particular subject or discipline, and is often used to help the reader quickly ascertain the paper's purpose. When used, an abstract always appears at the beginning of a manuscript or typescript, acting as the point-of-entry for any given academic paper or patent application. Abstracting and indexing services for various academic disciplines are aimed at compiling a body of literature for that particular subject.
    \begin{multicols}{2}
    \section*{\large Preface}
     Academic literature uses the abstract to succinctly communicate complex research. An abstract may act as a stand-alone entity instead of a full paper. As such, an abstract is used by many organizations as the basis for selecting research that is proposed for presentation in the form of a poster, platform/oral presentation or workshop presentation at an academic conference. Most literature database search engines index only abstracts rather than providing the entire text of the paper. Full texts of scientific papers must often be purchased because of copyright and/or publisher fees and therefore the abstract is a significant selling point for the reprint or electronic form of the full text.
    \section*{\large Some theory}
    An abstract allows one to sift through copious amounts of papers for ones in which the researcher can have more confidence that they will be relevant to his or her research. Once papers are chosen based on the abstract, they must be read carefully to be evaluated for relevance. It is commonly surmised that one must not base reference citations on the abstract alone, but the entire merits of a paper.\\
    \end{multicols}
    \end{document} 
```

先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T18:02:46.470

这

```
\center{\textit{ text text text text text text}} 
```

不是正确的方法。此 \center 对整个文档生效。（对于 \raggedright 或 \raggedleft 也会出现这种情况）一旦将全局对齐设置为其他东西（中心 raggedright 或 raggedleft），就无法恢复对齐对齐

您应该将括号放在 \center 标记之前...即

```
{\center\textit{ text text text text text text}} 
```

（但是，这不会将您想要居中的文本放在页面中间，而只会放在左侧的一个框中，尽管文本将在那里居中）。做你可能想做的事情的干净方法是使用中心环境（\begin{center} 和 \end{center}）

```
\begin{center}\textit{ text text text text text text}\end{center} 
```

# regex - 电话号码的正则表达式验证将接受号码、破折号和 +

> ID：13182752
> 
> 赞同：0
> 
> 时间：2012-11-01T17:49:36.210
> 
> 标签：regex

我只需要一个正则表达式来验证在文本框中输入的电话号码。该文本框只能允许数字、破折号 (-) 和加号 (+)，并且最多应包含 15 个字符，最少应包含 11 个字符。(+) 可以（可选）仅出现在电话号码的开头。

请回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:03:53.990

你的问题是这样回答的：

```
\+?[\d-]{1,13} 
```

*   `\+?`表示“一个 '+' 字符中的零”
*   `[\d-]{1,13}`表示“从 1 到 13 位数字或连字符”

但是，我认为您应该使用更具规范性的东西。也许要求至少有 8 位数字，并且连字符不能是第一个或最后一个：

```
^(?=(.*\d){8,13})\+?(?!-)[\d-]*(?<!-)$ 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-01T18:08:56.200

忽略 13 个字符的限制，您可以使用此正则表达式：

`^((\+[0-9]([0-9]{2}|[1-9])?-)?([1-9][0-9]{2}-)?[1-9][0-9]{2}-[0-9]{4})?$`

# linq - 如何更改我的方法以实现以下目标？

> ID：13182754
> 
> 赞同：1
> 
> 时间：2012-11-01T17:49:38.223
> 
> 标签：linq, lambda, iqueryable

我有这种方法应该按名称搜索员工集合。我传递了我想要查找的姓​​氏数组，该方法返回具有这些姓名的员工。简单的。

```
 public IQueryable<Employee> GetEmployees(IEnumerable<string> lastNames)
    {
        var query = Employees.Where(e => lastNames.Contains(e.LastName));
        return query;
    } 
```

现在我需要更改方法，以便可以传递**部分**姓氏数组，并获取姓氏与部分姓氏匹配的所有员工。

```
 public IQueryable<Employee> GetEmployees(IEnumerable<string> partialLastNames)
    {
        // the code above will not work
    } 
```

所以如果我的员工有这些名字：Sigourney Weaver、Amanada Beaver、John Smith、Jane Matheson

我通过 partialLastName 数组 ["aver", "math"]，它会返回一个匹配的查询：Sigourney Weaver、Amanada Beaver 和 Jane Matheson

我怎样才能做到这一点 ？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T18:00:47.730

我想你正在寻找这个

```
public IQueryable<Employee> GetEmployees(IEnumerable<string> partialLastNames)
{
      var query = Employees.Where(e => partialLastNames.Any(x => e.LastName.Contains(x)));
      return query;
} 
```

# php - 在 cakePHP 1.3 中使用 jquery AJAX 仅将数组返回到视图目标 div

> ID：13182756
> 
> 赞同：0
> 
> 时间：2012-11-01T17:49:49.097
> 
> 标签：php, ajax, jquery, cakephp-1.3

在 cakePHP 1.3 中使用 jQuery AJAX 时，AJAX 响应包括完整的布局，而不仅仅是包含模型数据集的数组。如何防止整个页面被呈现？我曾尝试使用 $this->autoRender = false; 和 $this->layout = 'ajax'，但这并没有解决问题。它实际上在返回的数据中没有产生任何响应。

我的控制器动作是：

```
 public function search() {
    if (empty($this->data)) {
    } else {
        // $this->autoRender = false;
        // $this->layout = 'ajax';
        $request = $this->data;
        $this->set('data', $this->Event->search($request['Event']['search']), 'host');
    }  
} 
```

而我的观点是：

```
 <!-- app/views/events/search.ctp -->

<h1>Corporate Events</h1> 

<form method="post" action="search">
    <input type="text" name="search" id="search_box" class='search_box'/>
    <input type="submit" value="Search" class="search_button" /><br />
</form>

<p><?php echo $html->link("Add Event", "/events/add"); ?> 

<table> 
    <tr> 
        <th style='width:100px'>Id</th> 
        <th style='width:100px'>Title</th> 
        <th style='width:100px'>Host</th> 
        <th style='width:100px'>Description</th> 
        <th style='width:100px'>Action</th> 
    </tr> 

<div id= "results"></div>

<?php foreach ($data as $event): ?> 
    <tr> 
        <td><?php echo $event['id']; ?></td> 
        <td> 
            <?php echo $html->link($event['event_title'],'/events/view/'.$event['id']);?> 
        </td> 
        <td><?php echo $event['host']; ?></td> 
        <td><?php echo $event['description']; ?></td> 
        <td> 
            <?php echo $html->link( 
                'Delete',  
                "/events/delete/{$event['id']}",  
                null,  
                'Are you sure?' 
            )?> 
            <?php echo $html->link('Edit', '/events/edit/'.$event['id']);?> 
        </td> 
    </tr> 
<?php endforeach; ?> 

</table> 

<script type="text/javascript">

$(function() {

    $(".search_button").click(function() {
        var searchString    = $("#search_box").val();
        var data = {'data[Event][search]':searchString};

        if(searchString) {

            $.ajax({
                type: "POST",
                url: "/events/search",
                data: data,
                beforeSend: function(html) { // this happens before actual call
                    $("#results").html('');
                    $("#searchresults").show();
                    $(".word").html(searchString);
                },
                success: function(html){ // this happens after we get results
                    $("#results").show();
                    $("#results").append(html);
                }
            });    
        }
        return false;
    });
});
</script> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T01:46:08.243

我不太了解您的问题，但这将帮助您在不完全呼应布局的情况下显示到您的视图中。

把它放在视图内的javascript上，

```
<script type="text/javascript">

$(function() {

    $(".search_button").click(function() {
        var searchString    = $("#search_box").val();

        if(searchString) {

            $.ajax({
                url: "/events/search/" + searchString,
                beforeSend: function() { // this happens before actual call
                    $("#results").html('');
                    $("#searchresults").show();
                    $(".word").html(searchString);
                },
                success: function(data){ // this happens after we get results
                    $("#results").show();
                    $("#results").append(data);
                }
            });    
        }
        return false;
    });
});
</script> 
```

然后为您的控制器使用下面的代码，

```
public function search($data=null) {
    $this->autoRender = false;
    //your code here;
    return $data;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T18:44:38.917

我建议让另一个函数来处理结果并渲染它们。创建一个名为 update_results 的函数。以下示例假设您有请求处理程序和 jquery。

简单示例：

//控制器

```
function search()
{

    //search filters
    $locations = $this->Event->Location->find('list',array('order'=>'Location.name'));

    //set vars for view
    $this->set(compact( 'locations'));

}//search

function update_results()
{       

    //location filter
    if(!empty($this->data['Event']['location_id']))
        $conditions['Event.location_id']=$this->data['Event']['location_id'];

    $results=$this->Event->find('all',array('conditions'=>$conditions,'limit'=>15));
    //debug($conditions);

    $this->set('results',$results);

}//update result 
```

//视图

//搜索.ctp

```
<?php echo $form->create('Event',array('action'=>'search')); 

            echo $this->Form->input('Event.location_id', array('label'=>'Location','empty'=>TRUE));

            echo $js->submit('Find Trainings', array('update' => '#trainingresults','url'=> array('controller'=>'events', 'action'=>'update_results')));

            echo $form->end(); ?>

    <?php 
        echo $html->div('trainingresults',null,array('id'=>'trainingresults'));
        echo '</div>';
    ?> 
```

//update_results.ctp

```
<?php
    $timestamp=date('r');
    echo "<h4>Search Results ($timestamp)</h4><br/>";
    if(empty($results))
    {
        echo "<p class='well'><strong>No Trainings found. Try different search criteria.</strong></p>";
    }
    else
    {

            foreach($results as $display)
            {
                //Event Info
                    $location=$display['Location']['name'];

                     echo $location;

            }//for

    }//else

?> 
```

# c# - .aspx 和 .aspx.cs 有什么区别？

> ID：13182757
> 
> 赞同：21
> 
> 时间：2012-11-01T17:49:51.477
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, ext.net

我对编程并不陌生，但对 Visual Studio、MVC、C#、ASP.NET 和 EXT.NET（即我尝试使用的所有工具）还是陌生的。

我正在尝试创建一个 Ext.Net 2.0 MVC4 项目，并获得了一个类似的（功能上）非 MVC 项目以供参考。

我看到这个非 MVC 项目有 .aspx 和 .aspx.cs 文件。似乎 .aspx 文件基本上映射到我想要制作的 MVC 中的“视图”......并且 .aspx.cs 文件具有与 .aspx 文件相关的功能 - 就像“控制器”一样? 虽然 .aspx 文件也有一些似乎不完全与视图相关的功能......

有人可以给我一个快速的概述或一个开始的地方吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-01T17:52:43.003

ASPX 文件通常会有 UI 和通常是 HTML 标记、一些 ASP.NET 服务器控件嵌入代码（最终会产生一些 HTML 标记）。ASPX.CS 文件（通常称为代码隐藏）将在 C# 中进行服务器端编码。

如果需要，我会将 ASPX 页面与 View 和 ASPX.CS 与 Controller 操作方法相关联。

您必须记住，在 Web 表单中，我们将在 ASPX 文件中使用 ASP.NET 控件来呈现一些 HTML。例如 TextBox、DataGrid 等。**在 MVC 中，没有什么叫做服务器控件。视图将是纯手写的 HTML。**

如果需要，您可以创建一个混合项目，它是 MVC 和 Web 表单的组合。[斯科特在这里](http://www.hanselman.com/blog/IntegratingASPNETMVC3IntoExistingUpgradedASPNET4WebFormsApplications.aspx)有一篇解释它的帖子。

## MVC 中没有 ViewState :)

从 ASP.NET Webforms 切换到 MVC 时，您必须了解的一件重要事情是 MVC 架构试图坚持**HTTP 是无状态**的这一事实。MVC中没有可用的***视图状态。***因此，您需要确保根据需要在每个 HTTP 请求中重新填充数据。人们在 MVC 中加载 DropDownlist 时通常会遇到问题。SO中有很多关于如何处理回发下拉列表的[答案（当表单发布时）。](https://stackoverflow.com/questions/10550420/how-to-read-the-data-from-dropdown-in-asp-net-mvc-3/10550556#10550556)

我建议您查看一些关于 ASP.NET MVC 的初学者级[教程](https://docs.microsoft.com/en-us/aspnet/core/tutorials/first-mvc-app/start-mvc)并开始逐步构建您的应用程序，如果您遇到任何问题，请发布一个（**新**的）问题并提供相关详细信息。

祝你好运，欢迎来到 MVC 的精彩世界。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T17:52:07.567

听起来您还没有创建 MVC 项目，而是创建了 WebForms 项目。

*.aspx 文件是标记，*.aspx.cs 文件是代码隐藏文件。代码隐藏文件处理 *.aspx 文件中任何服务器端控件的 .NET 代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T17:58:13.427

查看 ASP.NET 上的 Wikipedia 文档[http://en.wikipedia.org/wiki/ASP.NET](http://en.wikipedia.org/wiki/ASP.NET)。

它指出：

> Web 表单包含在扩展名为“.aspx”的文件中；这些文件通常包含静态 (X)HTML 标记，以及定义服务器端 Web 控件和用户控件的标记，开发人员在其中放置网页的所有 rc 内容。另外，运行在服务器上的动态代码可以放在一个页面中的一个块<%--动态代码--%>内，这与PHP、JSP、ASP等其他Web开发技术类似。在 ASP.NET Framework 2.0 中，Microsoft 引入了一种新的代码隐藏模型，该模型允许静态文本保留在 .aspx 页面上，而动态代码保留在 .aspx.vb 或 .aspx.cs 或 .aspx.fs 文件中（取决于关于所使用的编程语言）。

.cs 文件名 .aspx.cs 是 .aspx 背后的代码，它通常包含 html、css、javascript 和其他客户端控件。

通常，动态代码（在这种情况下是 C#，因为文件名上有 .cs）作为“良好做法”放入 .cs 文件中，以将动态代码和静态 html 分开。这种抽象的另一个原因是 .aspx.cs 代码在服务器端运行，而 .aspx 文件在服务器上编译，然后提供给请求它的 Web 客户端。

此外，对于 MVC，我建议使用不同的视图模型，特别是 Razor，它使用 .cshtml 文件而不是 .aspx.cs 和 .aspx，因为它们更容易理解。MVC 发生变化的原因是 MVC 使用 MVC 模式来抽象代码层，因此不需要 .aspx 和 .aspxcs。从个人经验来看，我在 MVC 中使用了 Razor 和 Webforms (.aspx/.aspx.cs) 视图模型，我发现 Razor 更容易编码/维护和使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T17:54:13.303

aspx 文件包含您的页面标记。它由 ASP.NET 自动转换为代码。

cs 文件包含页面背后的代码（初始化、事件处理程序等）。您必须自己编写该代码。

这两个文件与继承相关，@Page 指令的 Inherits 属性将页面标记与后面的代码相关联

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T17:53:37.637

.aspx 是您的标记文件。包含 HTML、CSS、JavaScript 和 ASP 标记等内容。此 .cs 文件称为代码隐藏文件。这是你做的事情可能不可用或者你不习惯用脚本语言做的事情。通常 aspx 在客户端运行，而后面的代码在服务器上执行。

# c# - 为什么当我使用不存在的 uri 调用 webrequest.create 时对象未设置为实例

> ID：13182758
> 
> 赞同：1
> 
> 时间：2012-11-01T17:49:50.687
> 
> 标签：c#, forms

我正在测试一个正在创建的浏览器，如果我向 webrequest 发送一个存在的 uri，一切都会找到，但是当我发送一个不存在的 uri 时，我得到一个未设置为实例的对象，例如[http://www.bgdygjhcu .com](http://www.bgdygjhcu.com)

我希望该方法抛出一个未找到的异常。这是方法调用

```
String stream = await Task.Run(() => web.Navigate("http://www.yahoo2gh.com")); 
```

这是完成工作的方法

```
public async Task<String> Navigate(string uri)
{

 HttpWebRequest request =(HttpWebRequest)WebRequest.Create(uri);
 try
 {
     using (WebResponse response = request.GetResponse())
     {
         HttpWebResponse httpResponse = (HttpWebResponse)response;
         //Set StatusCode
         StatusCode = httpResponse.StatusCode.ToString();
         //Create Stream
         Stream responseStream = response.GetResponseStream();
         StreamReader reader = new StreamReader(responseStream);

         return reader.ReadToEnd();

     }

 }
 catch (WebException exception)
 {
     using (HttpWebResponse response = (HttpWebResponse)exception.Response)
     {
         // HttpWebResponse httpResponse = (HttpWebResponse)response;
         StatusCodeInteger = (int)response.StatusCode;

         //return httpResponse;
         return "empty";// response.StatusCode.ToString();
     }

 }
} 
```

# ios - 我被数组困住了

> ID：13182767
> 
> 赞同：0
> 
> 时间：2012-11-01T17:50:41.180
> 
> 标签：ios, arrays, core-data, nsarray, relationship

我在一个数组lowAnd[]中有对象，这个数组中的每个对象都与0到许多其他对象（目标）有关系。我怎样才能把这个对象，Goals，放在另一个数组中？lowAnd 中有些对象与 2 个Goals 相连，有些则与 4.. 相连。（动态用户编辑）我事先不知道数组 lowAnd 中的某个对象会连接多少个Goals？我该如何解决这个问题？也许在for循环中？也许在二维数组中？我真的坚持这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T17:59:45.590

二维数组是很好的解决方案，但是，您可以使用谓词在 lowAnd[] 中添加对象，而不是使用 for 循环。在目标数组上应用谓词并将结果数组添加到 lowAnd 数组中。

# php - Facebook PHP-SDK 与 php 5.2.5 不兼容

> ID：13182770
> 
> 赞同：1
> 
> 时间：2012-11-01T17:50:48.360
> 
> 标签：php, facebook, facebook-php-sdk, facebook-login

> **可能重复：**
> [PHP Curl CURLOPT_IPRESOLVE](https://stackoverflow.com/questions/11220416/php-curl-curlopt-ipresolve)

我的服务器上有 php 版本 5.2.5，API 上的 facebook 登录使用“CURLOPT_IPRESOLVE”，我读到它仅适用于 PHP 5.3 +。

是否有任何替代或解决该问题的方法，或者是升级我的 PHP 的唯一选择？

我不断收到以下通知：

```
Notice: Use of undefined constant CURLOPT_IPRESOLVE - assumed 'CURLOPT_IPRESOLVE' in ** on line 952 
```

# c# - 基于“位置”的授权

> ID：13182772
> 
> 赞同：1
> 
> 时间：2012-11-01T17:50:51.110
> 
> 标签：c#, vb.net, path, web-config, authorization

我有一个在 IIS 6 上运行的 VS 2008 Web 应用程序。在 web.Config wile 中有这样的部分：

```
<location path="public">
    <system.web>
        <authorization>
            <allow users="?"/>
            <allow users="*"/>
        </authorization>
    </system.web>
</location> 
```

我有一个用户控件，用于在不同位置的许多页面上提供内容。我希望该控件根据其所在页面的位置过滤内容。例如，如果控件位于上面示例中指定的“公共”文件夹中的 aspx 页面上，我希望不显示某些信息。

我怎样才能在我的代码隐藏中做到这一点？也可能是这个 web.Config 设置完全不相关，这个问题，你决定。VB或者C#都可以，我可以翻译。

也许是这样的？`If path.Contains("public") Then filterResults()`

谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T17:58:14.223

我会向用户控件添加一个名为“Mode”或“ContextUrl”的公共属性或类似的东西。然后从该属性分支逻辑。您还应该有一组“默认”逻辑。

最终，与隐藏在控件实现中的东西相反，让与您的用户控件交互的“开发人员”更直观和可测试的行为是由公共属性决定的。

# c# - Datagrid中不同组合框的不同值

> ID：13182777
> 
> 赞同：-1
> 
> 时间：2012-11-01T17:51:23.040
> 
> 标签：c#, wpf, datagrid

请耐心等待，因为我是 WPF 的新手。我有一个包含组合框的数据网格。

```
<DataGrid x:Name="dgData" AutoGenerateColumns="False" Margin="131,93,13,101" Grid.Column="1" SelectionChanged="dgData_SelectionChanged">
        <DataGrid.Columns>

            <DataGridTextColumn Binding="{Binding Subject}" Header="Subject" Width="100"/>

            <DataGridComboBoxColumn Header="Subject" x:Name="comboboxColumn1"/>

        </DataGrid.Columns>
 </DataGrid> 
```

我使用以下代码根据用户单击的组合框加载不同的项目源：

```
 private void dgData_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {

        if (dgData.SelectedIndex == 0)
        {
            comboboxColumn1.ItemsSource = resolution;
        } else if (dgData.SelectedIndex == 1)
        {
            comboboxColumn1.ItemsSource = codec;    
        }
    } 
```

我如何绑定 dgData：

```
 List<TicketInfo> ticketsList = new List<TicketInfo> 
        {
            new TicketInfo{ Subject="File", Status="Open"},
            new TicketInfo{ Subject="Resolution", Status="Assigned"},

        };
        dgData.ItemsSource = ticketsList;

  public class TicketInfo
         {
            public string Subject { get; set; }
            public string Status { get; set; }
         } 
```

现在，一旦用户选择了值，我还需要检索组合框的值。有没有更优雅的方法来在不同的组合框中加载不同的项目并检索值？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T18:38:04.700

您没有展示如何绑定 dgData。

```
public class TicketInfo
{
   public string Subject { get; set; }
   public string Status { get; set; }
   public List<string> SubjectSubList { get; set; }
} 
```

将第二列绑定到 SubjectSubList

当您构建 List TicketsList 时，只需将分辨率放在第一个 SubjectSubList 中，并将编解码器放在第二个中。

# hyperlink - 锚链接不适用于带有查询字符串的页面

> ID：13182781
> 
> 赞同：1
> 
> 时间：2012-11-01T17:51:38.823
> 
> 标签：hyperlink, query-string, anchor

我已经为此傻眼了。这可能是我一直认为有效的东西，但实际上从未有效。

我在页面上有一个锚链接`<a href="#activities">[Activities]</a>`，稍后在页面上我有锚`<a name="activities"></a>`。这是页面的 URL：[https ://iassid.org/index.php?option=com_content&id=216](https://iassid.org/index.php?option=com_content&id=216)

出于某种原因，页面上的锚链接将用户带回[https://iassid.org/index.php#activities](https://iassid.org/index.php#activities)

删除查询字符串一直是正常行为吗？锚标记中的 href 不包含任何内容，但哈希值，为什么它甚至会假设离开页面？为什么它会在没有查询字符串的情况下返回原始 URL？有什么方法可以在不将包括查询字符串在内的整个 URL 也放入 URL 的情况下使其工作？我试图让不太熟悉 HTML 的人轻松完成这项工作，因此不需要使用 onclick 事件和其他选项。

也许我只是疯狂地认为这会一直有效！感谢您的任何见解。

# android - 如何获取产生视图的片段？

> ID：13182783
> 
> 赞同：0
> 
> 时间：2012-11-01T17:51:44.600
> 
> 标签：android, fragment

LayoutInflater 是一个非常强大的工具，可以做非常酷的事情；例如从布局资源中膨胀片段并正确处理其生命周期。例如：

```
<fragment class="com.test.TestFrag".../> 
```

当采用上述布局并通过 LayoutInflater 运行它时，您将获得由 Fragment 生成的视图。然后，您可以将此视图添加到任何 ViewGroup 并让片段的实例在周围运行，该片段仍然遵循片段生命周期。我的问题是，你如何从这个创建的视图中获取父片段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T18:53:50.873

在运行时确实没有机制让片段知道 ViewGroup 托管它的内容。也就是说，由于您的类将扩展基 Fragment 类，因此没有什么可以阻止您向 Fragment 添加实例变量以跟踪其父级的 ID。如果您的片段通过 FragmentTransaction 添加到视图层次结构中，那么您必须指定哪个容器将托管它，因为 FragmentTransaction::add 需要包含该片段的 ViewGroup 的 ID。如果您使用 XML 标记将其添加到 ViewHierarchy 中，我不明白为什么需要在运行时确定其父级，因为无论如何它都不会被动态添加。

# input - 单击选项卡后设置输入焦点

> ID：13182784
> 
> 赞同：-1
> 
> 时间：2012-11-01T17:51:51.543
> 
> 标签：input, tabs, focus

当一个页面有一个带有多个标签的搜索框时，总是选择其中一个标签；选择默认选项卡或用户更改了选项卡。在任何一种情况下，所选选项卡的搜索输入框都应该始终具有键盘焦点，以便用户可以开始输入他们的关键字。

示例：[http ://www.lib.umd.edu/ 上的搜索框](http://www.lib.umd.edu/)

您知道单击其他选项卡时如何将焦点放在输入框中吗？我让它在第一个选项卡上工作，但是当我单击另一个选项卡时，焦点丢失了。

我正在使用的脚本：

```
<script type="text/javascript" language="JavaScript">
    document.forms[''].elements[''].focus();
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:18:17.337

## 你的代码片段

要将焦点设置在某个元素上，您必须指定哪个元素应该获得焦点。在您的代码段中，缺少此规范：

```
document.forms[''].elements[''].focus(); 
```

如果你愿意，你可以使用这一行：`document.getElementById("DuringSearch").focus();` `DuringSearch`是应该接收焦点的输入元素的 id`<input id="DuringSearch" type="text">`

需要解决的问题是根据被点击的标签改变id。有几种方法可以实现这一点。在上一篇文章中使用了一个名为 data-tab 的属性。

## [连接选项卡并专注于输入的示例](http://jsfiddle.net/zrE9E/28/show/#Before)

要将事件处理程序附加到单击选项卡上，您可以在 document.ready 上执行以下操作（使用 jQuery）：

```
//  add event handler for click on tab
$("#tabs li").click(function () {                    
    loadTabs(this);
    setFocusOnInput(this);
    return false;
}); 
```

如果单击选项卡，附加事件将触发并执行 2 个函数：loadTabs 和 setFocusOnInput。

要设置焦点，您需要知道该输入框的 ID。在我的例子中，我正在使用一个属性`data-tab`

```
<li data-tab="Before">
    <a href="#Before">Before</a>
</li> 
```

在[我的示例](http://jsfiddle.net/zrE9E/28/show/#Before)中，我使用以下函数：

```
function setFocusOnInput(_this){
    var tab = $(_this).attr("data-tab"); 
    var searchId = tab + "Search"
    console.log("_this:", _this);   
    document.getElementById(searchId).focus();        
} 
```

[在我之前的帖子](https://stackoverflow.com/questions/12964070/trying-so-hard-to-link-to-tabbed-content-from-an-external-link/12964472#12964472)中查看更多解释。

您能否详细说明您想知道的内容。您想知道如何在一般情况下进行接线或如何在特定情况下进行接线吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-18T11:54:41.247

```
$(document).ready(function () {

        setTimeout(function () {

 // focus on the txtenclude text area first visible and enabled input field or textarea
        $(":input:visible:enabled").each(function () {

            if ($(this).is('textarea')) {
                $(this).focus();
                return false;
            }

        });

    }, 1000); 
```

# mips - 运行时异常在....：地址超出范围

> ID：13182787
> 
> 赞同：1
> 
> 时间：2012-11-01T17:51:55.333
> 
> 标签：mips

我正在将 C 代码转换为 MIPS，它在字符串中查找子字符串的位置，但我无法弄清楚是什么导致了“strloop: lb $t2, ($ t1)"（第 76 行）。我该如何修复错误？我的代码是：

```
 .data
    Text    : .space 28
    Key     : .space 5
    msg1    : .asciiz "Please enter the text:"
    msg2    : .asciiz "\nPlease enter the key:"
    msg3    : .asciiz "\n NOT FOUND"
    msg4    : .asciiz "The key found at:"
    .text
    main:
la $a0, msg1    
li $v0,4    
syscall

la $a0, Text    
li $a1, 28  
li $v0,8    
syscall

la $t0, Text    

la $a0, msg2    
li, $v0,4   
syscall

la $a0, Key 
li $a1,5    
li $v0,8    
syscall

la $t1, Key 

add $a0, $t1 ,$zero 
jal mstrlen
add $t2, $v0, $t2   

add $a0, $t0, $zero 
add $a1, $t1, $zero
add $a2, $t2, $zero

jal findPos 
add $t0, $t0, $v0 

add $a0, $v0, $zero 
beq $a0, $zero,K    

li $v0, 4   
la $a0, msg4        
syscall     

li $t0, 1   
move $a0, $t0
syscall

    K:  la $a1, msg3    
li $v0,4
syscall

li $v0, 10  
syscall

mstrlen:
addi $sp, $sp, -8
sw $t0,4($sp)
sw $t1,($sp)

li $t0,0 #$t0=0 
add $t1,$a0,$zero 

strloop:
    lb $t2, ($t1)
    beq $t2,28,endloop  #$t2\n 
    addi $t0,$t0,1      #$t0++
    addiu $t1,$t1,1      
    b strloop       #next i

endloop:
    add $v0, $t0, $0    
    lw $t0, 4($sp)
    lw $t1,($sp)
    addi $sp,$sp,20     #stack pointer restored
    jr $ra 
```

＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃ 主功能

```
 # $a0 text, $a1 key, $a2 keyInt (strleng(key)
    findPos:

addi $sp, $sp, -20 
sw $t0, 16($sp)
sw $t1, 12($sp)
sw $t2, 8($sp)
sw $t3, 4($sp)
sw $t4,  ($sp)

loop:
    add $t2,$a2, $zero  
    lb $t1,($a1)        
    lb $t0,($a0)        

    beq $t0,28,endfP    

        beq $t0, $t1, L
        add $t1, $zero, $zero
        beq $t1,$t2,M
        addi $t0,$t0,1 
        b loop      

    L: addi $t1,$t1,1
    M: add $t3, $t3,$t0
       addi $t3, $t3,1
       sub $t3,$t3,$t2

    endfP: add $v0, $t3, $0
        lw $t0,16($sp)
        lw $t1,12($sp)
        lw $t2,8($sp)
        lw $t3,4($sp)
        lw $t4,($sp)
        addi $sp,$sp,20 
        jr $ra 
```

# java - DFS 迷宫生成器

> ID：13182790
> 
> 赞同：2
> 
> 时间：2012-11-01T17:52:02.490
> 
> 标签：java

我目前正在开发一个迷宫生成程序，使用深度优先搜索。我有以下代码，但我无法弄清楚我做错了什么。我试图让 X 介于两者之间来说明哪些是墙。但它会覆盖它们，并将路径彼此相邻。任何帮助都会很棒。下面是输出。

```
. . . # # # # # # # 
. . . . # . . . . . 
. . . . # . # # # . 
. . # . # . . . # . 
. . # # # # # . # # 
. . . . # . . . # # 
. # # . # . # # # # 
. # # . . . # # # # 
. . . . . # # # # # 
# # # # # # # # # # 

import java.util.Random;

public class DepthFirstSearch {

    private Stack stack;
    public DepthFirstSearch() {}
    public char[][] DFS (int size, char[][] maze) {

        Random myRand = new Random();
        stack = new Stack(size);
        int x = myRand.nextInt(size);
        while (x % 2 == 0)
            x = myRand.nextInt(size);
        int y = myRand.nextInt(size);
        while (y % 2 == 0)
            y = myRand.nextInt(size);

        maze[x][y] = ' ';
        int total = (size * size) / 4;
        int visited = 1;
        int random[] = new int[4];
        int totalrand;

        while (visited < total) {
            totalrand = 0;
            if (x > 1 && maze[x - 2][y] == 'X')
                random[totalrand++] = 1;
            if (x < size - 2 && maze[x + 2][y] == 'X')
                random[totalrand++] = 2;
            if (y > 1 && maze[x][y - 2] == 'X')
                random[totalrand++] = 3;
            if (y < size - 2 && maze[x][y + 2] == 'X')
                random[totalrand++] = 4;

            if (totalrand > 0) {
                switch(random[myRand.nextInt(totalrand)]) {
                    case 1: maze[x-2][y] = maze[x-1][y] = ' ';
                            x -= 2;
                            stack.push(x * size + y);
                            visited++;
                            break;
                    case 2: maze[x+2][y] = maze[x+1][y] = ' ';
                            x += 2;
                            stack.push(x * size + y);
                            visited++;
                            break;
                    case 3: maze[x][y-2] = maze[x][y-1] = ' ';
                            y -= 2;
                            stack.push(x * size + y);
                            visited++;
                            break;
                    case 4: maze[x][y+2] = maze[x][y+1] = ' ';
                            y += 2;
                            stack.push(x * size + y);
                            visited++;
                            break;
                }
            }
            else {
                int vert = stack.pop();
                x = vert / size;
                y = vert % size;
            }
        }
        return maze;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:08:16.340

事实证明，这非常有效。我试图提高我的堆栈效率，但把它搞砸了。因此，使用工作堆栈，它可以完美运行。

# c++ - 在 Visual Studio C++ 调试模式下捕获异常的最佳方法仅在从 IDE 运行时发生

> ID：13182793
> 
> 赞同：1
> 
> 时间：2012-11-01T17:52:13.350
> 
> 标签：c++, visual-studio, exception

我有一个多线程的应用程序，带有堆栈。并且对象还涉及静态全局成员（我知道..不好）我每次都从不同的地方抛出异常。抓不住它。抓住它的最佳策略是什么。

得到：

```
Unhandled exception at 0x0135f2a7 in myapp.exe: 0xC0000005: Access violation reading location 0x00000004. 
```

**更新**
我注意到，当我在发布模式下编译并在 IDE 之外运行它时，它工作得很好，怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:09:18.913

我假设您要做的是解决特定问题，而不是拥有通用的运行时异常处理机制？

在 VS2010 和 2012 的“调试”菜单下有一个标记为“异常...”的选项。您可以在抛出异常时请求 VS 调试器闯入应用程序；这应该可以让您深入了解到底出了什么问题以及在哪里。

# jquery - 当 JuiAccordion 处于活动状态时隐藏所有非活动面板

> ID：13182798
> 
> 赞同：0
> 
> 时间：2012-11-01T17:52:37.497
> 
> 标签：jquery, jquery-ui, yii, jquery-ui-accordion

我是一个刚刚从树上掉下来的jquery nut。我使用 Yii 创建了一个多表单视图。每个表单都是相互独立的，所有表单都可以使用 AJAX 提交。

我正在使用[CJuiAccordion](http://www.yiiframework.com/doc/api/1.1/CJuiAccordion)来保存所有不同的表格并节省屏幕空间。但我只是觉得其他形式（即使在折叠面板中）只是妨碍了。所以我想实现“只要一个处于活动状态，所有折叠的面板都会隐藏”。

我得到了使用`activate( event, ui )`or`beforeActivate( event, ui )`来实现这一点的想法，但我不知道如何迭代手风琴面板以使用类似[slideDown](http://docs.jquery.com/Effects/slideDown)的东西来隐藏非活动面板，以及它们的对应物再次显示所有折叠的面板以防活动面板折叠。

另外，如何使用 Yii 注册这些事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T18:49:01.040

好吧，在研究了如何使用 Yii 绑定`activate( event, ui )`或`beforeActivate( event, ui )`事件之后……我没有成功。

但是，我找到了一种使用 htmlOptions 拉出回调的解决方法，这是我的 CJuiAccordion 渲染代码：

```
$panels = array(
            "Panel a" =>
                    "content goes here",
            "Panel B" =>
                    "content goes here",
            "Panel C" =>
                    "content goes here"
        );
$cs = Yii::app()->clientScript;
    //my required jquery function is declared in this file
    $cs->registerScriptFile('js/accordion.js'); 
$this->widget('zii.widgets.jui.CJuiAccordion', array(
        'panels'=>$panels,
        'id'=>'inventory-accordion',
        'options'=>array(
            'collapsible'=>true,
            'active'=>-1,
            'heightStyle'=>'content',
         ),
         'htmlOptions'=>array(
             'style'=>'width:100%;',
             'onclick'=>'togglePanels("inventory-accordion","h3")',
         ),
     )
); 
```

这是很好的代码，**js/accordion.js**

```
/**
 * Makes a jquery-ui-accordion hide all of its unactive panels whenver one is
 * selected and shows all the panels when the only active panel is collapsed
 */
function togglePanels(accordionId, headerSelector){
    var accordion = $("#"+accordionId);
    var accordionHeader = $("#"+accordionId+"> "+headerSelector);
    var active = accordion.accordion("option","active");

    if (active!==false) {
        //alert(active);
        accordionHeader.each(
            function(index){
                if (index!=active) $(this).slideUp('slow');
            }
        );
    } else{
        //alert("Show all the panels!");
        accordionHeader.each(
            function(){
                $(this).slideDown('slow');
            }
        );
    }       
} 
```

我很确定这段代码很有帮助，并且可以为 CJuiAccordion 的 Yii 用户进行调整。

# c - 简单的 C If 语句

> ID：13182801
> 
> 赞同：2
> 
> 时间：2012-11-01T17:52:52.660
> 
> 标签：c

我做了一个非常简单的 C 程序，它应该计算一个字符串中有多少个字符和单词（我通过检查文本中有多少个空格和一个空格来计算单词）。当前代码如下（没有 'printf' 以使其更短）：

```
int main(int argc, char *argv[])
{
    int character;
    int words, characters = 0;
    while ((character = getchar()) != '\n') {
        characters = ++characters;
        if ((character == ' ') || (character == '\d')) {
            words = ++words;
        } 
    } 
    return 0;
} 
```

我的问题是计数单词不起作用。我得到了一个准确的字符数，但单词总是给我 2293576，我无法为全世界弄清楚为什么。

有人可以为我解开这个谜吗？

感谢您的所有回答；我真的很感激帮助。

如果我的原始技能让你有些头疼，我很抱歉。我是初学者，但希望能快速提高。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T17:54:03.237

你还没有初始化`words`。C 中未初始化的局部变量默认为未定义的值，并且不会自动初始化为零。

该声明

```
int x, y = 0; 
```

不一样

```
int x = 0, y = 0; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T17:55:02.940

您不会将 words 初始化为 0。另外，更改此：

```
characters = ++characters; 
```

只是：

```
characters++; 
```

（也是`words`如此）。

另外，`'\d'`字符是什么（除了一个普通的旧 d）？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T17:57:21.433

您未能初始化“单词”。在声明中：

```
int words, characters = 0; 
```

`characters`赋值为 0，但未`words`初始化，因此它可以包含任何整数值。然后，您的其余代码会`words`在其未初始化状态下进行修改。不是从 0 开始向上计数，`words`而是从 2293576 之类的东西开始并从那里向上计数。将代码分配`words`为 0 以及`characters`在 for 循环中使用它们之前。

```
int words = 0, characters = 0; 
```

# excel - 比较具有相同单词变体的两个单元格

> ID：13182802
> 
> 赞同：1
> 
> 时间：2012-11-01T17:52:56.773
> 
> 标签：excel, vba, excel-formula

谁能帮我用一个excel公式来查看一个带有文本字符串的单元格是否与具有相同文本字符串但位置/位置不同的其他单元格相同。

请看下面的例子：

单元格 A1：`apple orange grape`

单元格 A2：`orange grape apple`

我需要一个公式来检查是否`A1`相同`A2`

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T04:10:53.640

将附加的代码放在一个模块中，并从您的工作表中将其作为函数调用，例如
`=sCompare(A1,A2)`

**代码**

```
Public Function sCompare(s1 As String, s2 As String) As Boolean
Dim vArr1, vArr2, lLoop As Long, lLoop2 As Long, bMatch As Boolean

vArr1 = Split(trim(s1), " ")
vArr2 = Split(trim(s2), " ")

If UBound(vArr1) <> UBound(vArr2) Then Exit Function

For lLoop = 0 To UBound(vArr1)
    bMatch = False
    For lLoop2 = 0 To UBound(vArr2)
        If vArr1(lLoop) = vArr2(lLoop2) Then
            bMatch = True
            Exit For
        End If
    Next lLoop2

    If bMatch = False Then Exit Function
Next lLoop

sCompare = True
End Function 
```

# cmake - 创建可执行文件时的CMake未定义引用

> ID：13182805
> 
> 赞同：2
> 
> 时间：2012-11-01T17:53:16.147
> 
> 标签：cmake

我是 CMake 的新手，我正在尝试编译我的项目。该项目创建了一些静态库和一些可执行文件。

下面是我拥有的文件结构的示例。

项目

*   SRC

    1.  subProject_1
        .cpp（所有源文件）和 CMakeLists.txt 1 用于此文件夹（创建静态库）
    2.  subproject_2
        .cpp（所有源文件）和 CMakeLists.txt 2 用于此文件夹（创建静态库）
    3.  subproject_3
        .cpp（所有源文件）和 CMakeLists.txt 3 用于此文件夹（创建可执行文件）
*   包括

    1.  subProject_1
        .h（所有头文件）
    2.  subProject_2
        .h（所有头文件）
    3.  subProject_3
        .h（所有头文件）
*   构建/Linux

    1.  CMakeLists.txt（主 CMakelist 文件）

主 CMakeLists.txt

```
cmake_minimum_required(VERSION 2.6)
SET(CMAKE_CXX_COMPILER "g++")
Project(ort)
SET (CMAKE_CXX_FLAGS " -g -Wall -pThread")

#set the source and header directories location
set(ORT_HEADER_DIRECTORY "../../include") #include folder structure explained above
set(ORT_SOURCE_DIRECTORY "../../src")
set(ORT_BINARY_DIRECTORY "../../lib")  # lib folder to contain all the libraries

set (CMAKE_CURRENT_BINARY_DIR ".")

#Include the library packages
include_directories("/usr/include/wx-2.8")
include_directories("/usr/local/cuda/include") and so on

#set the names of all the projects (for creating the libraries)
SET(PROJECT_NAMES "log" "data" "cc")

foreach(PROJECT_NAME ${PROJECT_NAMES})
     # Create the cmake related files in the out folder so that the libraries can be
     # copied to the lib folder
     add_subdirectory( "{ORT_SOURCE_DIRECTORY}/${PROJECT_NAME}" "${CMAKE_CURRENT_BINARY_DIR}/out/${PROJECT_NAME}"

endforeach(PROJECT_NAME ${PROJECT_NAMES})

#set the names of all the projects (for creating the libraries)
SET(EXECUATALE_PROJECTS "metadata" )

foreach(EXECUATALE_PROJECT ${EXECUATALE_PROJECTS})
     # Create the cmake related files in the out folder so that the libraries can be
     # copied to the lib folder
     add_subdirectory( "{ORT_SOURCE_DIRECTORY}/${EXECUATALE_PROJECT}" "${CMAKE_CURRENT_BINARY_DIR}/out/${EXECUATALE_PROJECT}"

endforeach(EXECUATALE_PROJECT ${EXECUATALE_PROJECTS}) 
```

用于日志目录的 CMakeLists.txt 文件（与我用于 cc 和数据项目的逻辑相同）

```
include_directories(${ORT_HEADER_DIRECTORY})
SET(LOG_SOURCE a.cpp b.cpp c.cpp)
ADD_LIBRARY(log_d ${LOG_SOURCE})
target_link)libraries(log_d cc_d data_d) 
```

元数据 CMakeLists.txt 文件（创建可执行项目）

```
FIND_PACKAGE(wxWidgets)
IF(wxWidgets_FOUND)
        INCLUDE(${wxWidgets_USE_FILE})
ENDIF(wxWidgets_FOUND)

Include_Directories(${wxWidgets_INCLUDE_DIRS})
include_directories(${ORT_HEADER_DIRECTORY})
include_directories("/usr/ort/lib/unixODBC/include")

SET(META_SOURCE meta.cpp data.cpp)

ADD_EXECUTABLE(meta_d ${META_SOURCE })
TARGET_LINK_LIBRARIES(meta_d log_d data_d) 
```

当我只是制作项目时，没有创建可执行文件，正在生成静态文件。但是，当我制作整个项目（即包含 subProject_3 目录）时，我得到未定义的引用，`a::String`该引用是 a.cpp 中的一个函数。

注意：所有 3 个项目都是相互依赖的。例如，在 a.cpp 中，我有`#include "b.h"`，在 b.cpp 中，我有`#include "a2.h"`.

所以，我有几个问题：

a) 如何解决未定义的引用问题？为项目 1 和 2 生成库后，如何将它们链接到可执行文件？

b) 在创建静态库时是否应该提供或添加任何依赖项？这是创建静态库的正确方法（因为项目是相互依赖的）？即`target_link_libraries(project1 project2 ...)`在项目1和`target_link_libraries(project2 project1 ...)`项目2中。

c) 每个项目都需要使用自己的编译设置进行编译。您能否让我知道如何为每个单独的项目指定相同的内容？

错误详情：

喜欢 CXX 可执行 metadata_d ../log/liblog_d.a：文件无法识别：文件被截断 collect2：ld 返回 1 退出状态

我还收到未定义的引用错误 /home...../metadata/data.cpp 172: undefined reference to xmlSerahNs 等等。collect2: ld 返回 1 个退出状态

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T19:29:10.177

> 如何解决未定义的参考问题？因为，我已经为项目 1 和 2 生成了库，如何将它们链接到可执行文件。

再次使用[`target_link_libraries`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3atarget_link_libraries)，这次是在 subProject3 的 CMakeLists.txt 中：

```
target_link_libraries(subProject3 subProject2 subProject1) 
```

* * *

> 这是创建静态库的正确方法吗（因为项目是相互依赖的）

是的。从文档中`target_link_libraries`：

> 库依赖图通常是非循环的（一个 DAG），但在相互依赖的 STATIC 库的情况下，CMake 允许图包含循环（强连接组件）。当另一个目标链接到其中一个库时，CMake 会重复整个连接的组件。例如，代码
> 
> ```
> add_library(A STATIC a.c)
> add_library(B STATIC b.c)
> target_link_libraries(A B)
> target_link_libraries(B A)
> add_executable(main main.c)
> target_link_libraries(main A) 
> ```
> 
> 将“main”链接到“ABA B”。（虽然通常重复一次就足够了，但病态目标文件和符号排列可能需要更多。可以通过在最后一次 target_link_libraries 调用中手动重复组件来处理这种情况。但是，如果两个档案确实如此相互依赖，那么它们可能应该组合成一个单个存档。）

* * *

> 每个项目都需要使用自己的编译设置进行编译。您能否让我知道如何为每个单独的项目指定相同的内容？

在顶层 CMakeLists.txt 中，在添加子目录之前，您可以在其中设置所有需要的标志。（参见[`add_definitions`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3aadd_definitions)并[`Properties on Targets`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#section_PropertiesonTargets)举例）它们将被所有子项目采用，除非针对子项目进行特别更改。

# coldfusion - 未包含在 URL 中时不处理默认文档

> ID：13182807
> 
> 赞同：1
> 
> 时间：2012-11-01T17:53:27.053
> 
> 标签：coldfusion, jrun

在 JRun（J2EE 安装）、Windows Server 2008 R2、Java 1.6.0_22 上运行 ColdFusion 9,0,1,274733

是否有其他人在获取默认文档`index.cfm`以使用 ColdFusion 时遇到问题？我假设这只是我们设置的一个问题；不同的 Web 服务器 (IIS) 和应用程序服务器 (ColdFusion)。我无法想象我们是唯一运行此配置的人。我们是吗？

所以这就是问题所在。
如果我们请求[http://mysite.com/index.cfm](http://mysite.com/index.cfm)它可以工作。
如果我们请求[http://mysite.com/](http://mysite.com/)它不起作用，我们会得到 404。

我在我们的 IIS 服务器上检查了 Web 连接器的日志文件，可以看到它正在向我们的 ColdFusion 服务器发送请求。ColdFusion 服务器正在发回 404 错误代码，但我不知道为什么。我们在 IIS 服务器上为`index.cfm`. 我们的应用程序服务器 (web.xml) 中也包含该`<welcome-file-list>`集合。`index.cfm`

**当我们不包括时，从我们的网络连接器日志中`index.cfm`：**

```
2012-11-01 13:37:22 jrISAPI[4544:3600]  ***HttpExtensionProc for JRun ISAPI Extension: uri is "/test/"
2012-11-01 13:37:22 jrISAPI[4544:3600]     HTTP_HOST: servername
2012-11-01 13:37:22 jrISAPI[4544:3600]  filtering /test/ (/test/) HOST=servername
2012-11-01 13:37:22 jrISAPI[4544:3600]  filterRequest:   no match
2012-11-01 13:37:22 jrISAPI[4544:3600]  ExecUrl: request received: URL=/test/
2012-11-01 13:37:22 jrISAPI[4544:3600]  ExecUrl Completion: 404, ErrorCode=2, URL=/test/. 
```

**当我们包含以下内容时，从我们的网络连接器日志中`index.cfm`：**

```
2012-11-01 13:49:02 jrISAPI[9936:3600]  ***HttpExtensionProc for JRun ISAPI Extension: uri is "/test/index.cfm"
2012-11-01 13:49:02 jrISAPI[9936:3600]     HTTP_HOST: servername
2012-11-01 13:49:02 jrISAPI[9936:3600]  filtering /test/index.cfm (/test/index.cfm) HOST=servername
2012-11-01 13:49:02 jrISAPI[9936:3600]  filterRequest:   matched *.cfm
2012-11-01 13:49:02 jrISAPI[9936:3600]  ***IISWorkerThreadProc for JRun ISAPI Extension: uri is "/test/index.cfm"
2012-11-01 13:49:02 jrISAPI[9936:3600]     ALL_RAW: Connection: Keep-Alive
Accept: image/gif, image/jpeg, image/pjpeg, image/pjpeg, application/vnd.ms-excel, application/vnd.ms-powerpoint, application/msword, application/x-shockwave-flash, application (553)
2012-11-01 13:49:02 jrISAPI[9936:3600]  Headers and Values:
... and much more ... 
```

我们通过使用 IIS 中的 URL 重写模块附加`index.cfm`到 URL 来解决这个问题。它有效，但我的直觉一直告诉我，我们不应该为这样的基本功能这样做。

还有其他人有这个问题吗？你是怎么解决这个问题的？

**编辑添加更多信息**

这是来自 IIS 服务器的我网站的 web.config 文件内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
<system.webServer>
    <handlers>
        <add name="JWildCardHandler" path="*" verb="*" modules="IsapiModule" scriptProcessor="D:\JRun4\lib\wsconfig\1\jrun_iis6_wildcard.dll" resourceType="Unspecified" requireAccess="None" />
        <add name="hbmxmlHandler" path="*.hbmxml" verb="*" modules="IsapiModule" scriptProcessor="D:\JRun4\lib\wsconfig\jrun_iis6.dll" resourceType="Either" responseBufferLimit="0" />
        <add name="cfswfHandler" path="*.cfswf" verb="*" modules="IsapiModule" scriptProcessor="D:\JRun4\lib\wsconfig\jrun_iis6.dll" resourceType="Either" responseBufferLimit="0" />
        <add name="cfrHandler" path="*.cfr" verb="*" modules="IsapiModule" scriptProcessor="D:\JRun4\lib\wsconfig\jrun_iis6.dll" resourceType="Either" responseBufferLimit="0" />
        <add name="cfcHandler" path="*.cfc" verb="*" modules="IsapiModule" scriptProcessor="D:\JRun4\lib\wsconfig\jrun_iis6.dll" resourceType="Either" responseBufferLimit="0" />
        <add name="cfmlHandler" path="*.cfml" verb="*" modules="IsapiModule" scriptProcessor="D:\JRun4\lib\wsconfig\jrun_iis6.dll" resourceType="Either" responseBufferLimit="0" />
        <add name="cfmHandler" path="*.cfm" verb="*" modules="IsapiModule" scriptProcessor="D:\JRun4\lib\wsconfig\jrun_iis6.dll" resourceType="Either" responseBufferLimit="0" />
        <add name="jwsHandler" path="*.jws" verb="*" modules="IsapiModule" scriptProcessor="D:\JRun4\lib\wsconfig\jrun_iis6.dll" resourceType="Either" responseBufferLimit="0" />
        <add name="jspHandler" path="*.jsp" verb="*" modules="IsapiModule" scriptProcessor="D:\JRun4\lib\wsconfig\jrun_iis6.dll" resourceType="Either" responseBufferLimit="0" />
    </handlers>
    <defaultDocument>
        <files>
            <add value="index.cfm" />
        </files>
    </defaultDocument>
    <staticContent>
        <mimeMap fileExtension=".air" mimeType="application/vnd.adobe.air-application-installer-package zip" />
    </staticContent>
</system.webServer>
</configuration> 
```

以下是APP服务器web.xml中的部分文件内容：

```
<welcome-file-list id="WelcomeFileList_1034546870672">
    <welcome-file>index.cfm</welcome-file>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
</welcome-file-list> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:25:17.303

在 IIS 管理器中尝试为您的网站添加默认文档“index.cfm”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T22:01:29.620

我还在 Adob​​e 论坛上发布了这个问题，它在那里获得了更多的关注。 [您可以在此处阅读所有详细信息。](http://forums.adobe.com/message/4816982)

我遇到的主要问题似乎是，一旦确定 ColdFusion 没有“/”映射，IIS 就没有将“/index.cfm”传递给 Web 连接器。这在我在 Web 服务器上创建了一个空白（空）index.cfm 文件后开始工作。我不记得过去在使用分布式模式时必须将 CFM 文件放在 Web 服务器上。任何人都可以确认或否认 CFM 文件需要驻留在两台服务器上才能正常工作（无论如何都不使用重写规则）？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-24T08:07:00.270

我参加这个聚会有点晚了，但是我一直在开发一个系统，我需要在同一个开发服务器上频繁地在 CF8 和 CF10 之间切换，所以我一直在处理要运行的批处理文件wsconfig 以节省一些精力，我遇到了同样的问题。CF 工作正常，但从不处理 / 的 index.cfm - 如上所述，所有映射似乎都设置正确。

我发现如果您将每个站点添加我的名字而不是使用“-site 0”，wsconfig 会更可靠地工作

因此，例如，手动删除并重新安装在 IIS 上运行的两个站点的连接器

```
set CFUSION_HOME=C:\ColdFusion10\cfusion
%CFUSION_HOME%\runtime\bin\wsconfig -uninstall 
net start "ColdFusion 10 Application Server"
%CFUSION_HOME%\runtime\bin\wsconfig -ws IIS -site "Default Web Site"
%CFUSION_HOME%\runtime\bin\wsconfig -ws IIS -site "My Website Name" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-20T16:53:17.587

在将 CF 从 2016 升级到 2018 / 2021 后，我遇到了同样的问题。解决方案是：打开 IIS 管理器并转到 Handler Mappings。在这里，搜索 cfcHandler、cfmHandler、cfmlHandler 条目并右键单击、编辑它们，您可能会看到如下内容：C:\ColdFusion2021\config\wsconfig\1\isapi_redirect.dll

确保将路径更新为 ColdFusion 服务器的当前版本。就我而言，即使我更新到 2021，它仍在尝试访问 ColdFusion2016 文件夹。

这为我解决了这个问题。

# ruby-on-rails - Solr 搜索在比较之前剥离数据库中的电话号码

> ID：13182815
> 
> 赞同：0
> 
> 时间：2012-11-01T17:53:47.997
> 
> 标签：ruby-on-rails, ruby-on-rails-3, solr, sunspot, sunspot-rails

我有一个餐厅列表，我想使用电话号码与我的数据库中的餐厅进行匹配。问题是数字的格式不同（即`(123)123-1234`或`123 123-123`其他组合）。

我当前的 Solr 搜索如下所示：

```
search = Restaurant.solr_search do
  with(:phone, SunspotHelper.sanitize_term(pr.phone).gsub(/\s+/, ""))
  paginate page: 1, per_page: 15
end 
```

`SunspotHelper.sanitize_term(pr.phone).gsub(/\s+/, "")`将我的搜索查询精简为数字。但是，我的数据库中的值仍然包含其他非数字字符，因此`search.hits`返回一个空数组，因为我没有得到任何结果。

有没有办法`:phone`在 Solr 进行搜索之前删除我的数据库值（）？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T18:05:18.257

为您的电话号码字段配置[WordDelimiterFilterFactory 。](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.WordDelimiterFilterFactory)
这将允许您以各种格式索引电话数据并使它们也可搜索。
您不需要对数据库进行任何更改。

# visual-studio-2010 - 混合错误“命名空间 yy 中不存在名称 xx” - 但在 Visual Studio 中工作正常

> ID：13182836
> 
> 赞同：2
> 
> 时间：2012-11-01T17:55:16.720
> 
> 标签：visual-studio-2010, xaml, wpf-controls, blend, expression-blend-4

因此，我一直在使用 Visual Studio 2010 开发 WPF 项目一段时间。我正在使用我编写的几个带有 WPF 控件的类库项目。今天我第一次在 Blend 中打开解决方案，它显示了很多这样的错误：

“名称空间 yy 中不存在名称 xxx”

查看程序集，我可以看到该类出现在该命名空间中。此外，如果没有，Visual Studio 就不会编译它，对吧？

我检查了类似的问题，不，我没有 x86 构建平台的东西，我所有的 DLL 都是 .Net 4.0，并且没有丢失引用。

还有别的事吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-06T18:26:43.080

看起来像 Blend 中的一些错误。我通过删除项目引用然后再次添加它来解决这个问题

# jquery - 动画文本区域高度使文本抖动？

> ID：13182838
> 
> 赞同：2
> 
> 时间：2012-11-01T17:55:36.380
> 
> 标签：jquery

我已经为文本区域设置了动画，以便在单击按钮时增加高度和行数。然而，在动画过程中，文本区域的文本会上下晃动，一旦动画结束，它就会向上移动一点。我怎样才能阻止这个？

这是我的代码：

谢谢 ：）

```
function morespace(){
var thetxt = document.getElementById('more').value;
var box = document.forms["myForm"]["comment"];
if(box.rows == 3)
{
    $("#emailme").fadeOut(200);
    $('#comment').animate({'height': '+=235'},400,"swing");
    box.rows = 17;
    document.getElementById('more').innerHTML = "less space?";
}
else
{
    $('#comment').animate({'height': '-=235'},400,"swing");
    $("#emailme").fadeIn(800);
    box.rows = 3;
    document.getElementById('more').innerHTML = "more space?";
}} 
```

`<a href="javascript:morespace();" id="more">more space?</a>`

更新：你要求 jsfiddle 我提供 jsfiddle ^_^ [http://jsfiddle.net/qs3VA/4/](http://jsfiddle.net/qs3VA/4/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T19:17:44.220

问题是小数高度会导致闪烁。我将其更改为使用线性增长，时间等于要更改的像素数量或其倍数（因此高度始终为整数）。

```
function morespace()
{
    var thetxt = document.getElementById('more').value;
    var box = document.forms["myForm"]["comment"];
    if(box.rows == 3)
    {
        $("#emailme").fadeOut(200);
        $('#comment').animate({'height': '+=235'},235,"linear");
        box.rows = 17;
        document.getElementById('more').innerHTML = "less space?";
    }
    else
    {
        $('#comment').animate({'height': '-=235'},470,"linear");
        $("#emailme").fadeIn(800);
        box.rows = 3;
        document.getElementById('more').innerHTML = "more space?";
    }
}​ 
```

我们强制 jQuery 永远不要分配高度“x.12343654234”

希望这可以满足您的要求。

小提琴：http: [//jsfiddle.net/qs3VA/15/](http://jsfiddle.net/qs3VA/15/)

# javascript - 检查所有单选按钮（JSF 组件）+ jQuery

> ID：13182840
> 
> 赞同：0
> 
> 时间：2012-11-01T17:55:49.747
> 
> 标签：javascript, jquery, jsf, dom

我有一个迭代数据表的表单，每一行都有一组组件，其中一个是：

```
<h:selectOneRadio id="chargeWaive" onclick="alert(this.id);" >              <f:selectItem itemLabel="Charge" itemValue="charge" />                  <f:selectItem itemLabel="Waive" itemValue="waive" />
</h:selectOneRadio> 
```

我添加了两个触发两个类似功能的链接：

```
<a href="#" onclick="selectAllCharge();">
   <h:outputText value="Charge All" />
</a>

<a href="#" onclick="selectAllWaive();">
   <h:outputText value="Waive All" />
</a> 
```

因此，当用户单击其中一个链接时，应检查所有 Charge/Waive 单选按钮。

我尝试使用以下代码检查第一个单选按钮（测试目的），但我总是得到相同的错误：

```
$('#frmResults:billingRecordId:0:chargeWaive:0').attr('checked', true);   $('#frmResults:billingRecordId:0:chargeWaive:0').attr('checked', 'checked');
$('#frmResults:billingRecordId:0:chargeWaive:0').prop("checked", true); 
```

我得到的错误是：**Sintax 错误，无法识别的表达式：billingRecordId**

我确实知道 id 是正确的，因为当我查看已编译的 JSF 代码时，**无线电**类型的生成 ID 是：

```
<input type="radio" name="frmResults:billingRecordId:0:chargeWaive" id="frmResults:billingRecordId:0:chargeWaive:0" value="charge" onclick="alert(this.id);" /><label for="frmResults:billingRecordId:0:chargeWaive:0"> Charge</label>

<input type="radio" name="frmResults:billingRecordId:0:chargeWaive" id="frmResults:billingRecordId:0:chargeWaive:1" value="waive" onclick="alert(this.id);" /><label for="frmResults:billingRecordId:0:chargeWaive:1"> Waive</label> 
```

所以在这一点上，我不知道我在这里缺少什么。任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T18:40:09.927

jQuery uses [CSS selectors](http://www.w3.org/TR/selectors/#selectors) to select elements in the HTML DOM tree.

The `:` is a special character in the CSS selector representing the start of [structural pseudo class](http://www.w3.org/TR/selectors/#structural-pseudos). So if you use

```
$('#frmResults:billingRecordId') 
```

then it's basically looking for a HTML element with ID of `frmResults` and having a pseudo class matching `billingRecordId`. However, as `billingRecordId` is not a valid pseudo class at all, nothing will be found.

You'd basically need to escape the colon in CSS selector syntax.

```
$('#frmResults\\:billingRecordId\\:0\\:chargeWaive\\:0') 
```

Or, IMO cleaner, use the `[id]` attribute selector.

```
$('[id="frmResults:billingRecordId:0:chargeWaive:0"]') 
```

Or, to get rid of the chained IDs and indexes.

```
$('[id$=":chargeWaive"]:first :radio:first') 
```

*("select elements with ID ending on `:chargeWaive`, get the first, then get the first radio button from it")*

### See also:

*   [How to select JSF components using jQuery?](https://stackoverflow.com/questions/7927716/how-to-select-primefaces-ui-or-jsf-components-using-jquery/7928290#7928290)

* * *

As a completely different alternative, you can also perform a JSF ajax call to preselect the desired radiobuttons by just setting the model value accordingly in the backing bean's ajax listener method.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T17:59:57.930

Colons can cause problems within jquery selectors. Try escaping them with a double backslash ala:

```
$('#frmResults\\:billingRecordId\\:0\\:chargeWaive\\:0').attr('checked', true); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T18:02:53.190

Did you try this way

Also use `.prop()` instead of `.attr()`

```
$('[id^="frmResults:billingRecordId:0:chargeWaive:"]').prop("checked", true); 
```

# android - 防止 Android 补间动画之间的快照

> ID：13182850
> 
> 赞同：1
> 
> 时间：2012-11-01T17:57:06.380
> 
> 标签：android, animation, tween

我有一系列动画，我像这样串联调用：

```
final Animation anim1 = AnimationUtils.loadAnimation(thisObject, R.anim.animation1);
final Animation anim2 = AnimationUtils.loadAnimation(thisObject, R.anim.animation2);
final Animation anim3 = AnimationUtils.loadAnimation(thisObject, R.anim.animation3);
final Animation anim4 = AnimationUtils.loadAnimation(thisObject, R.anim.animation4);

anim1.setAnimationListener(new AnimationListener() 
{                   
    public void onAnimationStart(Animation animation) { }                   
    public void onAnimationRepeat(Animation animation) { }

    public void onAnimationEnd(Animation animation) 
    {
        image.startAnimation(anim2);                        
    }
});

anim2.setAnimationListener(new AnimationListener() 
{                   
    public void onAnimationStart(Animation animation) { }                   
    public void onAnimationRepeat(Animation animation) { }

    public void onAnimationEnd(Animation animation) 
    {
        image.startAnimation(anim3);                        
    }
});

// etc...

view.startAnimation(anim1); 
```

虽然这有效，但图像会在每个动画之间瞬间恢复到其原始位置。我已经在我所有的动画 XML 文件中定义`android:fillAfter`为`true`，但这似乎并没有改变任何东西。有没有办法防止动画之间的这种快照？或者有没有更好的方法来达到同样的效果？

# c# - 为什么订阅图片框绘制事件时菜单条会变白？

> ID：13182851
> 
> 赞同：0
> 
> 时间：2012-11-01T17:57:09.577
> 
> 标签：c#, .net, winforms, paint, picturebox

我有一个带有 a`MenuStrip`和 a的表格`PictureBox`。我使用以下代码订阅`PictureBox`'s事件：`Paint`

```
private void pictureBox1_Paint(object sender, PaintEventArgs e)
{
    pictureBox1.Image = new Bitmap(pictureBox1.Width, pictureBox1.Height);
    // other code but the above line demonstrates the problem
} 
```

出于某种原因，这会导致`MenuStrip`变白 - 我无法看到文本，直到我将鼠标悬停在它上面 - 即使它`PictureBox`根本不重叠`MenuStrip`。我可以将 a`menuStrip1.Update()`放在上面函数的末尾，但这会导致其他问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T18:24:28.080

而不是直接分配给`PictureBox`事件中的while，使用提供`PaintEventArgs`的来做任何绘图。

```
 private void pictureBox1_Paint(object sender, PaintEventArgs e)
    {
        e.Graphics.Clear(Color.Gray);
    } 
```

# jquery - 提交按钮在 Internet exlorer 中不起作用

> ID：13182856
> 
> 赞同：0
> 
> 时间：2012-11-01T17:57:38.013
> 
> 标签：jquery, html, css, internet-explorer, niceforms

我有一个在 Firefox 中完美运行的登录页面，但在服务器上的 Internet Explorer 中无法运行。表单未提交。另外，我使用的是 niceform 模板。可能是什么问题？我的表单代码

```
 <form action="myurl"
                method="post" class="niceform">

                <fieldset>
                    <dl>
                        <dt>
                            <label for="email">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Username:</label>
                        </dt>
                        <dd>
                            <input type="text" name="username" value="" id="username" size="54" />
                            <font color="red"></font>
                        </dd>
                    </dl>
                    <dl>
                        <dt>
                            <label for="password">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Password:</label>

                        </dt>
                        <dd>
                            <input type="password" name="password" value="" id="password" size="54" />
                            <font color="red" > </font>
                        </dd>
                    </dl>
                    <dl>
                        <dt>
                            <label for="password">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Login As:</label>
                        </dt>                       
                        <dd>
                            <select name="user_type">
                            <option value="user"> User </option>

                            </select>

                        <font color="red">
                            <span id="login_err" style="display: none;"> username or password can not be left blank.</span><br />
                                                            </font>
                        </dd>
                    </dl>
                    <dl class="submit" style="text-align: right;">
                        <p style="padding-left: 91px; float: right; padding-right: 59px; width: 128px; font-weight: bold;">

                                                                                                &nbsp;
                        </p>
                        <input type="submit" name="submit" id="submit" value="Enter" />

                    </dl>

                </fieldset>

            </form> 
```

我的脚本

```
<script type="text/javascript">
$(document).ready(function(){
    $('#submit').click(function(){
        var username = $.trim($('#username').val());
        var password = $.trim($('#username').val());

        if(username== ''||username == null|| password=='' || password == null ){
            $('#login_err').show();
            return false;
        }else{
            return true;
        }
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:59:45.687

提交按钮不能单独使用。你需要`<form>`像这样正确地围绕它：

```
<form method="post" action="myscript.php">
   <input type="submit" name="submit" id="submit" value="Enter" />
</form> 
```

它现在应该可以工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T18:24:57.160

尝试更改提交按钮的名称和 ID。有时浏览器有关键字，我认为“**提交**”是一个关键字，可能存在一些冲突。不确定这是否可行，但值得一试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T09:28:54.847

抱歉，这不是提交的问题。页面在服务器端代码中被重定向，给人一种从未提交过表单的错觉。
问题在于 Internet Explorer 捕获。cookie 的命名约定存在一些问题，它没有在会话中存储用户数据，因此用户被重定向到同一页面。

# clearcase - 如何编写 Rational ClearCase 配置规范以基于目录进行结帐？

> ID：13182861
> 
> 赞同：2
> 
> 时间：2012-11-01T17:58:10.290
> 
> 标签：clearcase

我是 Rational 的新手，我必须向现有程序添加功能以支持新程序。这些应用程序很小，并且在目录结构中，它们处于同一级别。我想做的是 - 当我在旧应用程序下执行 CheckOut 时，文件会在新分支下签出。当我在新应用程序下签出时，文件在标准 /main 分支下签出。这是它的样子：

```
 /main
        /CGI_Legacy
              /CGI_Extended
  /NewApp 
```

创建 CGI_Extended 和 NewApp 应用程序是我的工作。CGI_Extended 代表新分支。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T18:16:42.940

不要混合目录和分支。

分支在 ClearCase 视图的[配置规范](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/config_spec.htm)中设置，对于基本 ClearCase 视图，它看起来像：

```
element * CHECKEDOUT
element /MyVob/Legacy/... .../CGI_Extended/LATEST
element /MyVob/Legacy/... /main/LATEST -mkbranch CGI_Extended
element /NewApp/... /main/LATEST 
```

也可以看看：

*   “[配置规范如何工作](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_proj.doc/c_bcfg_hwcfgwrk.htm)”
*   “[编写配置规范](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_ms_admin.doc/r_mstrshp_rqst_config_spec.htm)”

这不会创建目录`CGI_Extended`，并将文件保留在其原始目录中，但会`CGI_Extended`在每次结帐时创建一个新分支。

# css - javafx-2，通过 CSS 删除焦点突出显示

> ID：13182865
> 
> 赞同：6
> 
> 时间：2012-11-01T17:58:24.970
> 
> 标签：css, javafx-2

我想在 TableView 聚焦时删除它周围的蓝色边框。

![在此处输入图像描述](../Images/0ac9d34ac89c7871c581bc113d9241f9.png)

我检查了 caspian.css，对于像 Button 和 TextField 这样的大多数组件，它执行以下操作：

```
.table-view:focused {
  -fx-background-color: -fx-focus-color,-fx-box-border,-fx-control-inner-background;
  -fx-background-insets: -1.4, 0, 1;
  -fx-background-radius: 1.4, 0, 0;
  /*....*/
  -fx-padding: 1; /* 0.083333em; */
} 
```

最后，我的问题是关于 CSS 的。**我可以`pseudoclass`在样式表中覆盖此规范，而不是尝试将颜色变为透明吗？**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-01T18:23:39.830

是的你可以。在您的样式表中，使用您自己选择的 JavaFX CSS 属性定义完全相同的 CSS 选择器，如下所示：

```
.table-view:focused {
  -fx-background-color: red /* or transparent or other preferred color */,-fx-box-border,-fx-control-inner-background;
  -fx-background-insets: -1.4, 0, 1;
  -fx-background-radius: 1.4, 0, 0;
  /*....*/
  -fx-padding: 1; /* 0.083333em; */
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-20T16:16:04.767

因为 JavaFX 8 有一个新主题 'modena' 但有同样的老问题，我想更新 Uluk Biy 的答案并提供一些进一步的信息：

如果您想知道某些样式的来源，可以查看 modena.css。您可以在 jfxrt.jar 中找到这个 css 文件，该文件本身可以在您的 JRE 或 JDK 安装目录中找到。在 Ubuntu 14.04 上，jdk 主页通常位于

```
/usr/lib/jvm/java-8-oracle/ 
```

jfxrt.jar 应该在这里

```
/usr/lib/jvm/java-8-oracle/jre/lib/ext 
```

打开 jar 文件并查看 /com/sun/javafx/scene/control/skin/modena 目录，您将在其中找到 modena.css

从第 406 行开始，您可以看到这样的标题

```
/* ====   BUTTON LIKE THINGS   ============================================== */ 
```

这部分下的css为很多控件和容器指定了背景和边框。你只需要搜索你的目标类。我将以按钮为例： 对于按钮类，指定了以下 css

```
-fx-background-color: -fx-shadow-highlight-color, -fx-outer-border, -fx-inner-border, -fx-body-color;
-fx-background-insets: 0 0 -1 0, 0, 1, 2; 
```

由于某些原因，它们不使用边框，而是使用多个背景来模拟类似边框的外观。因此，如果您只想删除边框，则必须调整背景和插图属性。

最后，如果您想删除焦点效果，您必须覆盖此默认 css

```
.button:focused,
.toggle-button:focused,
.radio-button:focused > .radio,
.check-box:focused > .box,
.menu-button:focused,
.choice-box:focused,
.color-picker.split-button:focused > .color-picker-label,
.combo-box-base:focused,
.slider:focused .thumb {
    -fx-background-color: -fx-focus-color, -fx-inner-border, -fx-body-color, -fx-faint-focus-color, -fx-body-color;
    -fx-background-insets: -0.2, 1, 2, -1.4, 2.6;
    -fx-background-radius: 3, 2, 1, 4, 1;
} 
```

对于您选择的控件，使用上面的背景和插图的默认定义。例如按钮：

```
.button:focused {
    -fx-background-color: -fx-shadow-highlight-color, -fx-outer-border, -fx-inner-border, -fx-body-color;
    -fx-background-insets: 0 0 -1 0, 0, 1, 2;
} 
```

# jquery - 调整图像大小功能

> ID：13182870
> 
> 赞同：0
> 
> 时间：2012-11-01T17:58:38.657
> 
> 标签：jquery, screen

我在控制台中遇到错误：

```
TypeError: $("<img/>").attr("src", e.attr("src")) is undefine     
$('<img/>').attr('src', e.attr('src')).load(function(){ 
```

这是函数的完整代码：

```
function resizeOriginalImg(element, original)
{
var e = jQuery(element);
var newWidth, newHeight, imageWidth, imageHeight, realWidth, realHeight;

$('<img/>').attr('src', e.attr('src')).load(function(){
            realWidth = this.width;   
            realHeight = this.height; 
        });

    if(original)
    {           
        imageWidth = realWidth;   
        imageHeight = realHeight;       
    }

    else
    {
        imageWidth = e.width();
        imageHeight = e.height();
    }   

    if(imageWidth > jQuery(window).width() || imageHeight > jQuery(window).height())
    {
        if(imageWidth >= imageHeight)
        {
            newWidth = jQuery(window).width();
            newHeight = (newWidth/imageWidth)*imageHeight;
        }

        else
        {
            newHeight = jQuery(window).height();
            newWidth = (newHeight/imageHeight)*imageWidth;              
        }
    }       

    e.css({'width' : newWidth, 'height' : newHeight});  
}; 
```

和：

```
resizeOriginalImg('.current-slide .myimage', true); 
```

我不知道那里出了什么问题，一切似乎都很好，但它不起作用。也许

```
$('<img/>').attr('src', e.attr('src')).load(function() 
```

位置不好并导致错误？

提前感谢您的帮助。

# php - 无法使用 php/ajax 代码显示文本 :(

> ID：13182872
> 
> 赞同：-1
> 
> 时间：2012-11-01T17:58:45.693
> 
> 标签：php, javascript, ajax

首先检查这个网站：[请先检查这个](http://juicystudio.com/article/making-ajax-work-with-screen-readers.php#ajaxexample)

嗨，我来自墨西哥，我自动学习 html、css、js 和 php，用于个人目的。

IM 试图将该代码添加到我的测试页面，示例是示例 3 — 随机事实生成器（表单）。当您单击随机生成按钮时，它会使随机文本出现问题是..它来自哪里？和xml？php服务器？...我不知道..我签入了所有代码，什么也没有：（，我可以使用其他方法添加随机文本，例如带有案例和random.math的JS，但我更喜欢那个页面，有什么建议吗？谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T18:03:25.657

它来自：http: [//juicystudio.com/experiments/ajax/form/fact.php](http://juicystudio.com/experiments/ajax/form/fact.php)

去看看[http://juicystudio.com/experiments/ajax/form/script.js](http://juicystudio.com/experiments/ajax/form/script.js)

所以它来自一个PHP文件。PHP 可能正在读取 XML 文件、CSV 文件、数据库等。

如果您还有问题，请告诉我。

编辑：如果您不想覆盖最后一个事实，您必须从 script.js 更改它：

```
 if (objCurrent)
            objCurrent.parentNode.replaceChild(objReplacement, objCurrent);
    else
    {
        var objContent = document.getElementById('content');
        objContent.appendChild(objReplacement);
    } 
```

至

```
 var objContent = document.getElementById('content');
   objContent.appendChild(objReplacement); 
```

编辑 2：CSV 文件 (test.csv)

```
1,test1
2,test2
3,test3
4,test4
5,test5 
```

这是您提供的网站的 PHP 改编版本

```
<?php
$handle = fopen("test.csv", "r");

$array= array();
while (($data = fgetcsv($handle, 5000, ",")) !== FALSE) {
    array_push($array,$data);
}

if(count($array) > 0){
    $id = rand(0, count($array) -1);
    echo $array[$id][1];
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T18:04:27.013

[它从http://juicystudio.com/experiments/ajax/form/fact.php](http://juicystudio.com/experiments/ajax/form/fact.php)获取文本

在本节中，它将打开到该页面的连接：

```
if (objXMLRequest)
{
   objXMLRequest.onreadystatechange = processResult;
   objXMLRequest.open('GET', 'fact.php', true);
   objXMLRequest.send(null);
} 
```

当连接的状态更改事件触发时，它会调用方法`processResult`。该方法检查`readystate`4（已完成）和状态是否为 200（正常）并更新页面上的文本。

您不需要数据库或读取文件来制作该示例页面。最简单的方法是创建一组事实并随机输出一个，如下所示：

```
<?php
$facts = array("fact 1", "fact 2", "fact 3", "fact 4", "fact 5", "fact 6");
$random_number = rand(0, count($facts)-1);
echo $facts[$random_number];
?> 
```

# jquery - 检查元素是否在jQuery中包含另一个元素

> ID：13182873
> 
> 赞同：17
> 
> 时间：2012-11-01T17:58:47.050
> 
> 标签：jquery, jquery-selectors

我在 Stack Overflow 上发现了很多相关的东西，但不适用于我的情况。

这一切都在这个例子中，我需要检查一个元素是否包含另一个元素，如果是，附加一些东西。

```
$(".bt_repondre").click(function(){
    comment = $(this).parent().parent().parent();
    //I want to check if comment contains a .comment_full element, if no, append.
    comment.append('add');
}); 
```

希望你能帮助我，我尝试了很多东西......

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-01T18:01:17.170

您可以使用`.has`和`.length`：

```
if (comment.has('.comment_full').length) {
    // It has that element
} 
```

*   `.find`将遍历所有后代，但`.has`一旦找到与选择器匹配的后代就会停止。它可能跑得更快。

*   `.length`只是检查结果元素集的长度是否非零。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-11-01T18:00:49.533

只需使用`.find()`并检查是否返回一个元素，如下所示：

```
$(".bt_repondre").click(function(){
    comment = $(this).parent().parent().parent();
    if (! comment.find('.comment_full').length) {
       comment.append('add');
    }
}); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-06-10T19:19:50.013

这些答案大多是不正确的。您**必须**传递一个 DOM 节点而不是 jQuery 元素才能使 $.contains 按照[https://api.jquery.com/jQuery.contains/](https://api.jquery.com/jQuery.contains/)正常工作。

例如，这是您确定 if `$('#a')`contains 的方式`$('#b)`。

> HTML：

```
<div id="a">
  <div id="b"></div>
</div> 
```

> JavaScript：

```
var $a = $('#a');
var $b = $('#b');
var contains = $.contains($a.get(0), $b.get(0));
console.log('contains', contains);
// outputs `true` 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-02-16T20:30:44.960

这些答案中的大多数都很棒，但是有一个[称为`contains(container,contained)`](https://api.jquery.com/jQuery.contains/)（在 1.4 中添加）的新方法，它返回一个[`Boolean`](http://api.jquery.com/Types/#Boolean)! 它与 Blender 的代码片段基本相同，但可能更快，无论是键入还是执行。

在您的代码中实现，它看起来像这样：

```
$(".bt_repondre").click(function(){
    comment = $(this).parent().parent().parent();
    if(!$.contains(comment, $('.comment_full')))//same as if(!jQuery.contains(...
    {
        comment.append('add');
    }
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-10-13T10:51:26.413

如果您正在寻找，假设表中任何 tr 元素的 id 为 myTable，您可以使用以下代码：

```
if($('#productsTableBody tr').length)
{
//...
} 
```

这样我们就可以检查表是否包含任何行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-01T18:02:01.007

试试这个

```
 comment.has('a.comment_full').length == 0 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-02-04T09:03:33.273

这对我来说是这样的：

```
$(window).click(function(e) {
    // if popup is visible
    if($('.assignment_popup:visible').length) {

        popup_id = $('.assignment_popup:visible').attr('id');

        // if user clicked on popup itself or on something inside popup then do nothing
        if($(e.target).hasClass('open-popup') || $(e.target).hasClass('assignment_popup')) {
            return;
        }

        // if clicked element is not inside the popup then close the popup
        if(!$('#' + popup_id).find(e.target).length) {
            $('#' + popup_id).fadeOut(500);
        }
    }

    //console.log(e.target);
}); 
```

# php - 创建条带摘要报告

> ID：13182874
> 
> 赞同：8
> 
> 时间：2012-11-01T17:58:52.957
> 
> 标签：php, api, report, stripe-payments

我最近将支付处理切换到了 Stripe。我现在需要为我们的财务部门创建一个报告，显示指定日期范围内的交易汇总。我已经开始创建一个简单的 PHP 网页（并使用 Stripe PHP 库），它将提供以下摘要：

*   交易计数
*   交易金额
*   退款次数
*   退款金额
*   费用
*   网

为了我的报告目的，我在弄清楚如何使用 Stripe 正确查询费用时遇到了一些麻烦。

我知道我可以通过以下方式取回费用：

```
$charges = Stripe_Charge::all(); 
```

从返回的一组费用中，我可以计算出报告中我需要的汇总信息。但是，这最多只能退回 100 笔费用，而且我不知道如何退回指定日期范围内的费用。

我希望更有经验的 Stripe 开发人员可以为我指出构建所需报告的正确方法。

**如何退回指定日期范围内的所有费用？**

**有没有更好的方法从 Stripe 获取这些摘要信息？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T06:59:55.153

您可以使用[webhook](https://stripe.com/docs/webhooks)`charge.succeeded`在发生事件或事件时收到通知`charge.refunded`，并将相关信息存储在您控制的数据库中。这将使您能够灵活地进行所需的报告。您可以从 Stripe 仪表板以 CSV 格式下载已经发生的费用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T22:02:14.087

您可以使用 count 和 offset 参数（记录在[https://stripe.com/docs/api?lang=php#list_charges](https://stripe.com/docs/api?lang=php#list_charges)）对费用进行分页。我建议使用它们一次处理 100 笔费用。然后，一旦您收到超出日期范围的费用，您就可以停止重复收取费用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T18:58:23.407

我收到了 Stripe 员工的确认，只有两个选项实际上是 @dwhalen 和 @Saikat Chakrabarti 的答案中描述的选项。

引用 Stripe 员工对[我在 Stripe 上提出的相同问题](https://answers.stripe.com/questions/how-can-i-create-a-summary-report-for-stripe-accounts)的引用：

> 除了您描述的选项（检索所有费用，或在费用进入时在您的数据库中跟踪）之外，没有任何替代方法可以生成您想要的统计信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-11T15:37:56.847

意识到这是旧式的，但是.. 现在可以了，一个 php 示例：

```
$charges=Stripe_Charge::all(array("created" => array("gt" => $unix_time),"limit" => 100)); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-26T08:40:18.900

您可以使用偏移量

```
$return = Stripe_Charge::all(array("count" => 100, 'offset' => 0)); // set count
$return = Stripe_Charge::all(array("count" => 100, 'offset' => 100));   // set count
$return = Stripe_Charge::all(array("count" => 100, 'offset' => 200));   // set count 
```

# jquery - 在 Shadowbox 内/内调用 Jquery

> ID：13182875
> 
> 赞同：0
> 
> 时间：2012-11-01T17:58:58.573
> 
> 标签：jquery, shadowbox

我有一个由 jquery 调用的简单 Shadowbox：

```
$('#statsButton').click(function() {
    thisContent = $('#userStats').html();
    Shadowbox.open({
        content: thisContent,
        player: "html"
    });
}); 
```

我有一个 div，在`$('#userStats')`那个应该在点击时发出警报的对象中：

```
$("#submitPosition").click(function(e) {
        alert('test');
}); 
```

但是当我点击时，什么也没有发生。上述两个函数都包装在它们自己的文档就绪块中。我`Shadowbox.init`在脚本的开头打电话，效果很好。只是它忽略了里面的jQuery事件。有人可以帮忙吗？

简短回顾：基本上我有 Shadowbox 和 HTML 播放器。我希望 jQuery 在该 HTML 播放器中按预期运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T18:13:32.737

如果您将内容动态加载到容器中，您应该使用 jQuery`on()`将事件绑定到内容内的对象，因为使用`click()`只会将事件绑定到现有的`#submitPosition`.

例如：

```
$('body').on('click', '#submitPosition', function(e) {
   alert('test');
}); 
```

此外，在具有相同 id 的页面上使用多个元素也不是一个好习惯。

[http://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T18:14:31.797

试试这个：

```
$(document).ready(function(){    
    $("#submitPosition").live('click',function(e) {
            alert('test');
    });
}); 
```

这会有所帮助。Bcoz 当这段代码初始化时，**#submitPosition**在 html 中不存在。但是live会解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T18:24:41.620

我看到 2 个选项：

1) 在您的 userStat div 中，更改为：

```
$("#submitPosition").click(function(e) {
    alert('test');
}).click(); 
```

这实际上会调用你的回调函数。

2）使用shadowbox的onOpen事件：

```
$('#statsButton').click(function() {
    thisContent = $('#userStats').html();
    Shadowbox.open({
        content: thisContent,
        player: "html",
        onOpen: function(){ alert('test'); } 
    });
}); 
```

# c# - 通过命名空间的名称查找 DLL 名称

> ID：13182882
> 
> 赞同：0
> 
> 时间：2012-11-01T17:59:27.853
> 
> 标签：c#

在代码中有这样一行：

```
Company.Security.Logs.LogEvent myLog = null; 
```

现在在另一个项目中，我想做同样的事情，但我不知道应该将哪个“参考”添加到我的项目中？那么我怎么知道在这个项目的哪些引用中我们有这个 Security 类呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T18:01:48.277

在 Visual Studio 中右键单击类名并转到声明。这将带您进入 DLL 视图或代码视图，其中任何一个都会告诉您该类所在的程序集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T18:03:05.050

当插入符号位于类型名称上方时，您可以使用 Visual Studio“转到定义”（或 F12），在本例中为`LogEvent`. 它将带您进入文本编辑器中的精简 API 源文件，该文件的第一行类似于：

```
#region Assembly System.Windows.Forms.dll, v4.0.0.0
// C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.5\System.Windows.Forms.dll
#endregion 
```

# javascript - 在不使用 HTML5 Canvas 的情况下将图像转换为 base64

> ID：13182887
> 
> 赞同：2
> 
> 时间：2012-11-01T17:59:39.977
> 
> 标签：javascript, asp.net, image, base64, microsoft.ink

**首先，一点背景：**

对于这篇序言的冗长性质，我提前道歉；但是，它可能有助于提供不特定于问题性质的替代解决方案。

我有一个使用嵌入式 WinForm 用户控件的 ASP.NET MVC 应用程序。这些控件通过`Microsoft.Ink`库为 TabletPC 提供“墨水覆盖”支持。由于 IE8 企业标准，它们是一种不幸的必需品；否则，HTML5 Canvas 将是解决方案。

无论如何，图像 URL`InkPicture`通过`<PARAM>`.

```
<object VIEWASEXT="true" classid="MyInkControl.dll#MyInkControl.MyInkControl" 
        id="myImage"  name="myImage" runat="server">
    <PARAM name="ImageUrl" value="http://some-website/Content/images/myImage.png" />
</object> 
```

中的相应属性`UserControl`获取该 URL，调用执行 的方法`HttpWebRequest`，并将返回的图像放置在`InkPicture`.

```
public Image DownloadImage(string url)
    {
        Image _tmpImage = null;

        try
        {
            // Open a connection
            HttpWebRequest _HttpWebRequest = (HttpWebRequest)HttpWebRequest.Create(url);
            _HttpWebRequest.AllowWriteStreamBuffering = true;

            // use the default credentials
            _HttpWebRequest.Credentials = CredentialCache.DefaultCredentials;

            // Request response:
            System.Net.WebResponse _WebResponse = _HttpWebRequest.GetResponse();

            // Open data stream:
            System.IO.Stream _WebStream = _WebResponse.GetResponseStream();

            // convert webstream to image
            _tmpImage = Image.FromStream(_WebStream);

            // Cleanup
            _WebResponse.Close();
        }
        catch (Exception ex)
        {
            // Error
            throw ex;
        }

        return _tmpImage;
    } 
```

***问题***

这行得通，但是在这个过程中有很多开销会显着延迟我的网页加载（15 张图片需要 15 秒......不理想）。由于 FileIO 权限问题（无论是否完全信任，我未能成功消除该问题），因此在这种情况下执行`Image img = new Bitmap(url);`此`UserControl`操作不起作用。

* * *

***初步解决方案***

尽管使用`canvas`不是当前的选项，但我决定使用它来测试解决方案。我会在 javascript 中加载每个图像，然后使用`canvas`and`toDataUrl()`来获取 base64 数据。然后，我没有将 URL 传递给 the`UserControl`并让它完成所有的工作，而是将 base64 数据作为 a 传递`<PARAM>`。然后它会快速将该数据转换回图像。

15 张图像的 15 秒现在不到 3 秒。因此，我开始寻找适用于 IE7/8 的 image->base64 解决方案。

* * *

以下是一些额外的要求/限制：

*   解决方案不能有外部依赖项（即 $.getImageData）。
*   它需要 100% 封装，以便便携。
*   图片的来源和数量是可变的，它们必须是 URL 格式（base64 数据不是一个选项）。

我希望我已经提供了足够的信息，并且感谢您提供的任何指导。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T02:24:35.497

您可以使用任何 FlashCanvas、fxCanvas 或 excanvas 库，它们在旧 Internet Explorer 版本中使用 Flash 或 VML 模拟画布。我相信所有这些都提供了`toDataURL`Canvas API 的方法，允许您获得图像的编码表示。

经过广泛的挖掘（我在同一个修复中），我相信这是唯一的解决方案，没有编写一个可以将图像发送到的 PHP 脚本。当然，问题在于没有办法将图像发送到 PHP 脚本，除非这三个条件中的任何一个为真：

*   浏览器支持类型化数组 ( `Uint8Array`)
*   浏览器支持`sendAsBinary`
*   图像正在由某人通过表单上传（在这种情况下，可以将其发送到以 base 64 编码响应的 PHP 脚本）

# bit - 7 位二进制补码

> ID：13182891
> 
> 赞同：0
> 
> 时间：2012-11-01T18:00:03.893
> 
> 标签：bit, boolean-operations

有没有简单的方法来解决这个问题？7 位二进制补码可以表示的最小（最负）数是多少？展示如何将数字转换为其二进制补码表示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T18:06:10.173

最小的数字是`-2^6`。要在 2 的补码（也就是它的绝对值）中找到负数的倒数，翻转位并加一。所以`(-1)*1000001 = 0111110+1 = 0111111 = 1000000 - 1 = 2^6-1`。正如你所看到的，有一个数字比`1000001`它小，它比它小一：`1000000`. 找到它的绝对值，我们得到：

`(-1)*(100000) = (-1)*(100001-1) = (-1)*(100001) + 1 = (2^6-1)+1 = 2^6`.

# django - NGINX 和 Gunicorn 并行运行的目的是什么？

> ID：13182892
> 
> 赞同：55
> 
> 时间：2012-11-01T18:00:10.603
> 
> 标签：django, nginx, gunicorn

Amazon EC2 上的许多 Django 应用程序部署使用 HTTP 服务器 NGINX 和 Gunicorn。

我想知道它们实际上做了什么以及为什么两者并行使用。并行运行它们的目的是什么？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-11-01T18:18:13.687

它们不是并行使用的。NGINX 是一个*[反向代理](http://en.wikipedia.org/wiki/Reverse_proxy)*。这是排在第一位的。它接受传入的连接并决定它们下一步应该去哪里。它还（通常）提供静态媒体，例如 CSS、JS 和图像。它还可以做其他事情，例如通过 SSL 加密、缓存等。

Gunicorn 是下一层，是一个*[应用服务器](http://en.wikipedia.org/wiki/Application_server)*。NGINX 看到传入的连接是针对`www.domain.com`并知道（通过配置文件）它应该将该连接传递给 Gunicorn。Gunicorn 是一个[WSGI](http://en.wikipedia.org/wiki/Web_Server_Gateway_Interface)服务器，它基本上是：

> Web 服务器和 Web 应用程序或框架之间的简单通用接口

Gunicorn 的工作是管理和运行 Django 实例（类似于`django-admin runserver`在开发期间使用）

与此设置的对比是将 Apache 与`mod_wsgi`模块一起使用。在这种情况下，应用服务器实际上是 Apache 的一部分，作为一个模块运行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-05-11T18:36:33.190

*Nginx 和 Gunicorn 不并行使用。*

*   Gunicorn 是一个 Web 服务器网关接口 (WSGI) 服务器实现，通常用于运行 Python Web 应用程序。
*   NGINX 是一个免费的、开源的、高性能的 HTTP 服务器和反向代理，以及 IMAP/POP3 代理服务器。
*   Nginx 负责提供静态内容、gzip 压缩、ssl、proxy_buffers 和其他 HTTP 内容。而 gunicorn 是一个 Python HTTP 服务器，它与 nginx 和您的实际 Python Web 应用程序代码交互以提供动态内容。

*下图显示了 nginx 和 Gunicorn 如何交互。*

[![Nginx 和 Gunicorn](../Images/e67f37bf7a59da2ed8c9bbf1ac500973.png)](https://i.stack.imgur.com/9GAQc.png)[![nginx和Gunicorn的整体思路](../Images/3c127ca45d0d896fb89305ca62d21d81.png)](https://i.stack.imgur.com/Bxq7E.png)

# jquery - OnChange 事件成功完成但使其他元素无用

> ID：13182893
> 
> 赞同：0
> 
> 时间：2012-11-01T18:00:24.600
> 
> 标签：jquery, ajax

在过去的 2-3 个小时里，我一直在尝试解决这个问题，但最终放弃了。这是我的 javascript/jquery 的一部分。

```
$(function() {  
    $('#ob').change(function() {
       var id = $("#ob").val();  
       var form_data = {
           id: id,
           OB: 3 
       };

       $.ajax({
           url: "changeinfo.php",
           type: 'POST',
           data: form_data,
           success: function(data) {
               $("#finfoob3").html(data);                             
           }
       });

       return false; 
   });
}); 
```

以上成功地修改了一个 DIV 元素的变化。

但是在那个 DIV 元素中，有一个 id=obt3 的按钮不起作用。实际上，它正在将其名称覆盖为其他内容。我向 AJAX 调用发送了另一个 POST 值 OB，并将其与 obt 连接，使其变为 obt3。然后我将按钮的 id 放入 obt3 但它仍然不会响应点击事件。

我试图用谷歌浏览器检查元素，元素的 id 成功更改为 obt3，但不会响应它的点击事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T18:07:20.350

问题是，当您替换内容时，`#finfoob3`您破坏了所有居住在那里的节点，以及它们的所有事件处理程序。有两种方法可以处理这个问题：

*   替换 div 内容后，重新创建您需要的任何事件处理程序。
*   使用[事件委托](https://stackoverflow.com/questions/1687296/what-is-dom-event-delegation)将事件处理程序附加到`#finfoob3`，因此当您更改其内容时它们不会被破坏。

由于您使用的是 jQuery，因此您应该查看[.on()](http://api.jquery.com/on/)函数。它为您提供了一种定义事件委托的简单方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T18:11:50.117

这可能会有所帮助。

```
$(document).on("click", "#obt3", function() {
       //do whatever
   }); 
```

在这里，我们将文档与所有动态创建的#obt3 元素绑定在一起。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T18:15:50.143

如果我理解正确你的问题。您有一个带有 id 的 div`finfoob3`并且在这个 div 中您有一个带有 id 的`obt3`按钮，并且您在此按钮上有一个事件单击处理程序，并且您有另一个带有 id 的元素`ob`，它更改触发器调用 ajax 并返回一些带有按钮的 html 代码`obt3`，它与您之前的按钮相同，但现在它不响应点击事件

这个 obt3 事件处理程序是这样的

```
$('#obt3').click(function(){ 
    //Some code which you want to perform
}); 
```

但它不起作用，所以将其更改为

```
$('#finfoob3').on('click', '#obt3' ,function(){ 
    //Some code which you want to perform
}); 
```

它会按您的意愿工作，但请确保您使用的是 jquery 1.6 或更高版本。

# reporting-services - 如何在 SSRS 2008 R2 报告中找到特定文本框

> ID：13182895
> 
> 赞同：16
> 
> 时间：2012-11-01T18:00:39.030
> 
> 标签：reporting-services, ssrs-2008, reportbuilder3.0

我有一个在 Report Builder 3.0 中构建的大型报告。该报告由几个表格和几个 (800 - 1000) 文本框组成。例如，当我在表达式中遇到错误时，系统会说我在 Textbox205 中有错误。有没有一种简单的方法可以找到“Textbox205”？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-05T00:20:13.857

使用 Visual Studio 时，属性窗口顶部有一个下拉框，其中包含报表中的所有对象。您可以在其中找到并选择对象。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-19T15:53:40.967

一种技术是在文本编辑器中打开 .rdl 文件，然后按 Ctrl-F 搜索文本框名称。这将带您进入文本框的 xml 属性，这通常可以让您确定哪个文本框包含问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-02-06T22:23:11.440

我通常单击任何元素，然后开始按 Tab，直到找到我要查找的内容。元素名称将显示在属性窗口中： [![在此处输入图像描述](../Images/a511d7766fa4b4eec9ac04e1aff8dc88.png)](https://i.stack.imgur.com/dvE4a.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-06T13:08:34.430

使用 Visual Studio，您可以通过“视图”>“其他窗口”>“文档架构”查看文档架构 (Ctrl + Alt + T)。它将出现一个带有完整报告树视图的窗口。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-07-13T18:30:26.187

您可以右键单击报告（.rdl）并单击“查看代码”。这将在 Visual Studio 中打开 xml 文件。您可以在 xml 文件中搜索号码。

# unix - 程序无法移动文件

> ID：13182896
> 
> 赞同：0
> 
> 时间：2012-11-01T18:00:44.913
> 
> 标签：unix, ksh

我正在尝试将文件从一个地方移动到另一个目录......所以我的程序将读取 Log_Deleter，使用每行中给出的参数来删除文件。当我执行文件时，它似乎运行良好（没有错误）但没有文件被移动......我不确定为什么它没有移动文件也没有显示任何错误......有人可以识别错误吗?

我的尝试：

```
#!/bin/ksh

while read -r line ; do
    v=$line
    set -- $v
    cd /
    $(find "$1" -type f -name "$2" -mtime +"$3" -exec mv {} "$4" \;)
done < Log_Deleter.txt 
```

Log_Deleter.txt

```
/usr/IBM/WebSphere/AppServer/profiles/AppSrvSIT1/logs/Server1 'SystemOut_*' 5 /backup/Abackuptest1
/usr/IBM/WebSphere/AppServer/profiles/AppSrvSIT1/logs/Server2 'SystemOut_*' 5 /backup/Abackuptest2 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:16:12.160

Find 正在查找名称中包含文字的文件`'`。`$2`您需要在调用 find 之前删除单引号。尝试：

```
#!/bin/ksh

while read -r path name mtime dest ; do
    name=$( echo $name | tr -d "'" )
    find "$path" -type f -name "$name" -mtime +"$mtime" -exec mv {} "$dest" \;
done < Log_Deleter.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T20:29:50.840

问题是您正在尝试匹配名称中实际上包含单引号的文件。

除非有其他问题，我认为一旦您从 Log_Deleter.txt 中取出引号，您的脚本可能会起作用。

引号仅在 shell 解析命令输入时才有意义。这不是`read`内置函数的作用。即使在读取命令输入时，一旦引号进入变量，它们就会永远留在那里，除非在 shell CLI 层通过重新读取`eval.`

shell 并不完全是一个宏处理器。这是一个复杂的混合体，包含一点 CLI、一点编程语言和一点宏处理器。

而且，说到 eval，没有必要将 包装`find`在类似 eval 的构造中。简化你的脚本`find`直接运行，你会发现它更容易调试和理解。

# android - 安卓应用中的鼠标

> ID：13182904
> 
> 赞同：1
> 
> 时间：2012-11-01T18:00:58.363
> 
> 标签：android, cordova, touch

我想在我的应用程序中有一些对象可以跟随用户触摸并像鼠标一样工作，这样用户就可以准确地知道他在屏幕上触摸的位置。我试过这段代码：

```
document.addEventListener('touchmove', function(event) {
if (event.targetTouches.length == 1) {
    var obj = document.getElementById('mouse');
    var touch = event.targetTouches[0];
    obj.style.left = touch.pageX + 'px';
    obj.style.top = touch.pageY + 'px';
  }
}, false); 
```

但对象仅在触摸移动的开始和结束时移动到触摸位置。然后我发现为了让对象跟随用户的触摸，我应该调用这个函数

```
event.preventDefault(); 
```

在我的“touchmove”和“touchstart”事件中，但是当我调用这个函数时，它似乎禁用了我在场景中的所有可点击组件。有什么办法可以让我同时拥有这两个功能？

# c# - 具有非托管 DLL 的 C# 应用程序冻结整个系统

> ID：13182913
> 
> 赞同：6
> 
> 时间：2012-11-01T18:01:37.403
> 
> 标签：c#, delphi, dll, unmanaged, freeze

我目前正在 Visual Studio 2012 中编写一个用于与 RFID 卡通信的软件。我有一个用 Delphi 编写的 DLL 来处理与读卡器的通信。

问题是：我的软件在安装了 VS2012 的机器上运行良好。在其他系统上，它会冻结自身或整个系统。我在具有 x32 和 x64 配置的 Win XP / 7 / 8 上进行了尝试。我正在使用.NET 4.0。

连接到读卡器后，软件启动一个 backgroundWorker，它会（以 200 毫秒的速率）轮询读卡器，并发出一个命令来清点读卡器射频场中的卡片。崩溃通常发生在 ca。读卡器连接后 10 到 20 秒。这是代码：

```
[DllImport("tempConnect.dll", CallingConvention = CallingConvention.StdCall)]
 private static extern int inventory(int maxlen, [In] ref int count, 
                                         IntPtr UIDs, UInt32 HFOffTime); 
```

```
public String getCardID()
    {
        if (isConnectet())
        {
            IntPtr UIDs = IntPtr.Zero;
            int len = 2 * 8;
            Byte[] zero = new Byte[len];
            UIDs = Marshal.AllocHGlobal(len);
            Thread.Sleep(50);
            Marshal.Copy(zero, 0, UIDs, len);
            int count = 0;
            int erg;
            String ret;
            try
            {
                erg = inventory(len, ref count, UIDs, 50);
            }
            catch (ExternalException) // this doesn't catch anything (iI have set <legacyCorruptedStateExceptionsPolicy enabled="true"/>)
            {
                return "\0";
            }
            finally
            {
                ret = Marshal.PtrToStringAnsi(UIDs, len);
                IntPtr rslt = LocalFree(UIDs);
                GC.Collect();
            }
            if (erg == 0)
                return ret;
            else
                return zero.ToString();
        }
        else
            return "\0";
    } 
```

DLL是用Delphi编写的，代码DLL命令为：

```
function inventory (maxlen: Integer; var count: Integer; 
                  UIDs: PByteArray; HFOffTime: Cardinal = 50): Integer; STDCALL; 
```

我认为某处可能存在内存泄漏，但我不知道如何找到它......

* * *

编辑：

我在上面的代码中添加了一些想法（显式 GC.Collect()、try-catch-finally），但它仍然不起作用。

这是调用 getCardID() 的代码：

每 200 毫秒运行一次的操作：

```
if (!bgw_inventory.IsBusy)
   bgw_inventory.RunWorkerAsync(); 
```

Async backgroundWorker 会：

```
private void bgw_inventory_DoWork(object sender, DoWorkEventArgs e)
    {
            if (bgw_inventory.CancellationPending)
        {
            e.Cancel = true;
            return;
        }
        else
        {
            String UID = reader.getCardID();
            if (bgw_inventory.CancellationPending)
            {
                e.Cancel = true;
                return;
            }
            if (UID.Length == 16 && UID.IndexOf("\0") == -1)
            {
                setCardId(UID);
                if (!allCards.ContainsKey(UID))
                {
                    allCards.Add(UID, new Card(UID));
                }
                if (readCardActive || deActivateCardActive || activateCardActive)
                {
                    if (lastActionCard != UID)
                        actionCard = UID;
                    else
                        setWorkingStatus("OK", Color.FromArgb(203, 218, 138));
                }
            }
            else
            {
                setCardId("none");
                if (readCardActive || deActivateCardActive || activateCardActive)
                    setWorkingStatus("waiting for next card", Color.Yellow);
            }
        }
   } 
```

* * *

编辑

到目前为止，我对代码做了一些小的修改（上面的更新）。现在只有应用程序。在“tempConnect.dll”处以 0xC00000FD（堆栈溢出）崩溃。**这不会发生在安装了 VS2012 的系统上，或者如果我将 DLL 与本机 Delphi 一起使用！** 有人有其他想法吗？

* * *

编辑

现在我让 DLL 记录它的堆栈大小并发现一些奇怪的东西：如果从我的 C# 程序调用和轮询它，堆栈大小会不断上下变化。如果我从自然的 Deplhi 程序中执行相同的操作，则堆栈大小是恒定的！所以我会做进一步的调查，但我真的不知道，我必须寻找什么......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:09:50.333

我有点担心如何使用该`Marshal`对象。正如您担心内存泄漏一样，它似乎经常分配内存，但我没有看到它明确释放它。垃圾收集器*应该*（操作词）处理这个问题，但是你说你自己有一些非托管代码。发布的信息很难判断非托管代码从哪里开始。

查看[这个问题](https://stackoverflow.com/questions/134086/what-strategies-and-tools-are-useful-for-finding-memory-leaks-in-net)，了解一些在 .NET 本身中查找内存泄漏的好方法 - 这将为您提供大量有关内存在代码的托管端（即您可以直接控制的部分）中的使用方式的信息。使用带有断点的 Windows 性能监视器来密切关注系统的整体运行状况。如果 .NET 似乎表现良好，但 WPM 显示出一些尖峰，则可能是在非托管代码中。除了在那里的使用之外，您无法真正控制任何东西，因此可能是时候回到文档中了。

# vim - 为特定文件类型设置 vim 更新时间

> ID：13182915
> 
> 赞同：5
> 
> 时间：2012-11-01T18:01:43.987
> 
> 标签：vim

我想`updatetime`为具有特定扩展名的文件修改 vim。我已经尝试通过将以下行添加到我的`~/.vimrc`：

```
autocmd BufRead,BufNewFile *.t set updatetime=60000 
```

这似乎不起作用。当我打开一个带有`.t`扩展名的文件并键入时，`:set ut?`我看到了默认的`updatetime=4000`.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-01T19:18:28.287

该`'updatetime'`设置是一个全局设置，并不意味着不同的缓冲区有不同的值。为什么你想要不同的价值？

正如您所尝试的那样，您可以使用 autocmds 解决此问题。但是，这些`BufRead,BufNewFile`事件只会在加载缓冲区时触发；当您切换缓冲区时，它不会更新设置。`BufEnter`正确的方法是在;上定义两个 autocmds 一个用于重置设置的通用设置，并且（之后，它会在第一个设置之后执行！）一个匹配您的文件模式并操纵设置的设置：

```
autocmd BufEnter * set updatetime=4000
autocmd BufEnter *.t set updatetime=60000 
```

# javascript - jQuery输入值焦点和模糊

> ID：13182921
> 
> 赞同：10
> 
> 时间：2012-11-01T18:01:56.343
> 
> 标签：javascript, jquery, focus, blur, placeholder

我有以下代码，因此当用户选择输入框时，该值将消失，但是一旦用户单击它，默认值将被重新插入。

```
 $(function() {
            var defaultText = '';
            $('input[id=input]').focus(function() {
                defaultText = $(this).val();
                $(this).val('');
            });
            $('input[id=input]').blur(function() {
                $(this).val(defaultText); 
             });
         }); 
```

然而，这并不是我想要的。如果用户插入文本，我不希望默认文本覆盖用户输入的内容。我对 jQuery 也很陌生，所以任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-01T18:03:50.680

在您的方法中，您应该在清除它之前`focus()`检查它是否等于，而在您的函数中，您只需要在设置. 如果您要使用多个输入，最好使用类而不是 ID，因此您的选择器将是当类为“输入”时。即使它是一个 ID，您也会将其引用为.`defaultText``blur()``val()``defaultText``input.input``input#input`

```
// run when DOM is ready()
$(document).ready(function() {
    $('input.input').on('focus', function() {
        // On first focus, check to see if we have the default text saved
        // If not, save current value to data()
        if (!$(this).data('defaultText')) $(this).data('defaultText', $(this).val());

        // check to see if the input currently equals the default before clearing it
        if ($(this).val()==$(this).data('defaultText')) $(this).val('');
    });
    $('input.input').on('blur', function() {
        // on blur, if there is no value, set the defaultText
        if ($(this).val()=='') $(this).val($(this).data('defaultText')); 
    });
}); 
```

在[这个 jsFiddle](http://jsfiddle.net/hhDwW/)中设置它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T18:04:48.977

在您的模糊处理程序中，只需检查用户是否没有写任何东西，在这种情况下放回默认文本，如下所示：

```
 $('input[id=input]').blur(function() {
            if ($(this).val() == '') {
                $(this).val(defaultText); 
            }
         }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-02T13:56:52.773

一个老问题 + 我不喜欢人们提供另一种解决方案而不是解决我的问题，但尽管如此：使用带有 jQ​​uery 插件的 HTML 占位符属性可以解决问题。

您还可以使用 HTML 数据属性并从中写入/读取。

# c++ - 使用没有功能的外部“C”

> ID：13182924
> 
> 赞同：2
> 
> 时间：2012-11-01T18:02:21.677
> 
> 标签：c++, c, com

我读了 Dale Rogerson 的书“Inside COM”。在第 5 章中，他写道（对不起，我翻译成英文）：

> *extern "C"*用于 C 链接。如果**函数**被标记为*extern "C"*，编译器不会将函数的名称更改为其他名称，例如： `?CreateInstance@@YAPAUIUncnown@@XZ`.

这对我来说很清楚。但作者`extern "C"`在其他地方进一步使用，并没有解释它的原因：

```
#include <objbase.h>

extern "C" 
{
    // {32bb8320-b41b-11cf-a6bb-0080c7b2d682}
    extern const IID IID_IX = 
        {0x32bb8320, 0xb41b, 0x11cf,
        {0xa6, 0xbb, 0x0, 0x80, 0xc7, 0xb2, 0xd6, 0x82}} ;

    // {32bb8321-b41b-11cf-a6bb-0080c7b2d682}
    extern const IID IID_IY = 
        {0x32bb8321, 0xb41b, 0x11cf,
        {0xa6, 0xbb, 0x0, 0x80, 0xc7, 0xb2, 0xd6, 0x82}} ;

    // {32bb8322-b41b-11cf-a6bb-0080c7b2d682}
    extern const IID IID_IZ = 
        {0x32bb8322, 0xb41b, 0x11cf,
        {0xa6, 0xbb, 0x0, 0x80, 0xc7, 0xb2, 0xd6, 0x82}} ;

    // The extern is required to allocate memory for C++ constants.
} 
```

它不是一个函数......为什么作者`extern "C"`在这种情况下使用？

最好的问候，安德烈

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T18:12:17.773

像这样的块上的 extern "C" 就像将 extern "C" 应用于块中的每个声明；它声明所有这些都使用 C 链接。

非函数上的 extern "C" 与函数上的 extern "C" 做同样的事情；它使对象使用 C 语义进行命名，以及其他任何相关的内容。

有关详细信息，您可能需要参考标准，第 7.5 节链接规范 [dcl.link]（尽管它是使用难懂的英语形式编写的）。

* * *

语言链接是为了使从不同语言访问声明的实体成为可能。这究竟意味着什么取决于特定的语言和 C++ 实现。传统上，对于 C，这意味着函数的符号和调用约定发生了变化。据我所知，在大多数实现中，非函数没有什么不同。只是语言规范并没有说你可以期望从 C 访问这些实体来工作，除非你使用 extern "C"。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-15T12:36:59.270

对于您的问题，可能只是一个愚蠢的解决方法。我发现，在 cpp 文件中使用 c 函数时，理论上需要 extern。但是我发现在eclipse的氧气版本中，我们不必指定extern c，我们也可以在cpp文件中直接使用c函数和printf语句，就可以了。没有尝试过旧版本的eclipse。

我的解决方案可能不是很有帮助，但您可以尝试一下。它对我有用。

据我记得标准，默认情况下，所有函数声明都被视为“外部”，因此无需显式指定。这不会使这个关键字无用，因为它也可以与变量一起使用（在这种情况下 - 它是解决链接问题的唯一解决方案）。但是有了这些功能 - 是的，它是可选的。

更冗长的答案是它允许您使用在另一个源代码文件中编译的变量，但不为变量保留内存。因此，要使用 extern，您必须有一个源代码文件或一个库单元，其中包含顶层变量（而不是函数内）的内存空间。现在，您可以通过在其他源代码文件中定义同名的外部变量来引用该变量。

一般来说，应该避免使用外部定义。它们很容易导致难以管理的代码和难以定位的错误。当然，也有其他解决方案不切实际的例子，但它们很少见。例如，stdin 和 stdout 是映射到 stdin.h 中 FILE* 类型的外部数组变量的宏；该数组的内存空间位于标准 C 库单元中。

# ios - 以编程方式为设备上的 passkit 创建通行证？

> ID：13182925
> 
> 赞同：8
> 
> 时间：2012-11-01T18:02:23.707
> 
> 标签：ios, cocoa-touch, passbook

我正在尝试找到一种方法，在它收到通过网络放入通行证的信息后，在设备上为其自身生成 passkit 通行证。

有谁知道这是否可以做到/如何做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T18:09:04.233

参考：[https ://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/PassKit_PG/YourFirst.html#//apple_ref/doc/uid/TP40012195-CH2-SW1](https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/PassKit_PG/YourFirst.html#//apple_ref/doc/uid/TP40012195-CH2-SW1)

基本上：不容易（如果有的话），您需要能够使用命令行实用程序**signpass**对您的通行证进行签名，以使其能够被设备读取。这会带来很多麻烦和困扰，因为您无法在 iOS 上运行另一个进程，并且可能也不可能将**signpass代码转换为在设备上运行。**

我的建议是在服务器/数据来自哪里签署您的通行证，并将信息和生成的信息发送`.pkpass`到设备。这就是它的设计方式，以及它应该如何使用。阅读文档以获取更多信息，它们非常清楚。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-03T15:06:20.153

实际上，Apple 已经说明了在 iOS 中签名通行证时存在的安全问题。这是因为证书需要与应用程序一起打包。而且您不想像那样向用户公开证书。

就像 WDUK 建议的那样，实现一个简单的通行证签名和分发服务器，您的应用程序可以从中请求通行证。当您想要更新添加到设备的通行证时，这也非常有用。

我相信您可以在[GitHub](https://github.com/search?q=pkpass&type=Repositories)上找到适合您需求的服务器实现。

# maven - Maven 依赖 SLF4J 绑定与代码生成

> ID：13182928
> 
> 赞同：0
> 
> 时间：2012-11-01T18:02:35.890
> 
> 标签：maven, plugins, code-generation, slf4j, logback

我有一个依赖于另一个 Maven 构建项目（G）的 Maven 项目（P）。该项目 (G) 依赖于 slf4j 和绑定的“logback-classic”(LC)。项目（P）对 slf4j 有自己的依赖，但绑定到“logback-android-classic”（LAC）。项目 (G) 是一个代码生成器，在“生成源”阶段运行。如何使代码生成器的类路径包含 LC 而不是 LAC，而是使用 LAC 而不是 LC 构建的主要工件？

我猜这与插件管理有关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T21:04:47.920

项目 G 不应该是 P 的依赖项。它只是一个插件，在构建期间使用。它应该只在`<plugins>`项目 P 的 pom 部分列出。它的 slf4j 实现不会出现在 P 的类路径中。

听起来 G 没有按照插件的规则玩。它应该使用 Maven 的记录器，而不是 SLF4J。更多在这里[http://www.sonatype.com/books/mvnref-book/reference/writing-plugins-sect-custom-plugin.html](http://www.sonatype.com/books/mvnref-book/reference/writing-plugins-sect-custom-plugin.html)

# jquery - Jquery 事件和函数在重新加载后才起作用（Internet Explorer）

> ID：13182932
> 
> 赞同：0
> 
> 时间：2012-11-01T18:02:44.960
> 
> 标签：jquery, internet-explorer

有一个新问题。我有许多 jquery 函数和事件，并且在 Firefox 中一切正常。现在我用 Internet Explorer 9 进行了尝试，但如果我调用该站点，我的任何函数都不会被调用，我必须重新加载该站点，然后它才能工作。这是一个非常奇怪的问题，有人可以帮助我吗？

谢谢。

亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T18:09:45.310

这是因为 IE 更早地执行了这些操作。这意味着，当文档尚未准备好时，所有操作都会触发。

你可以试试setTimeout。

# django - 使用 PostgreSQL 的 m2m 字段偶尔出现 IntegrityError

> ID：13182937
> 
> 赞同：2
> 
> 时间：2012-11-01T18:02:57.140
> 
> 标签：django, postgresql

我无法检测到任何模式，某个模型的每 1000 次编辑中可能有 1 次在 m2m 字段上返回 IntegrityError。大多数时候，这个字段甚至没有被修改。保存模型时，我相信 django 总是擦除 m2m 字段，然后重新添加项目，对吗？我看到了 django 调用`clear()`，然后`add()`是这些项目。

然后我的代码失败了：

> IntegrityError：重复的键值违反了唯一约束“app_model_m2m_field_key”详细信息：键（model1_id，model2_id）=（597，1009）已经存在。

好像物品的添加是在物品被清除之前执行的，这很奇怪。我试图重现它，但它非常困难，只是偶尔发生。知道是什么原因造成的吗？也许设置自动提交可以解决这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T21:55:03.227

最有可能的是，您有两个请求同时提交类似的更改。

1.  请求 1 开始一个事务并删除现有的 M2M 行。

2.  请求 2 开始一个事务并使用相同的 where 子句删除 M2M 行。这会阻塞等待请求 1 的事务提交。

3.  请求 1 重新插入所有 M2M 行并提交。

4.  请求 2 恢复，删除成功，没有删除任何行，因为语句开始时存在的所有行都已被删除。

5.  请求 2 尝试重新插入 M2M 行，但数据库检测到它已经存在并返回错误。

可以通过升级到[SERIALIZABLE 隔离级别](http://en.wikipedia.org/wiki/Isolation_%28database_systems%29#Isolation_levels)（而不是 PostgreSQL 的默认 READ COMMITTED）来解决此问题，但代价是更令人兴奋的潜在故障模式和更差的性能。

我假设你是对的，Django 正在执行 DELETE，然后执行一系列 INSERT，尽管这不是一个很好的计划，因为它加剧了这种竞争。

最好的计划是确定实际发生了哪些更改，并且只要求数据库进行这些更改，因为如果您遇到完整性错误，那是因为存在真正的冲突，您可能无论如何也无能为力。

# css - css 用于鼠标悬停时的永久更改

> ID：13182941
> 
> 赞同：0
> 
> 时间：2012-11-01T18:03:16.313
> 
> 标签：css, hover

`visibility: hidden`使用和可以很容易地在悬停时交换两个元素`:hover`。但是，即使鼠标离开元素，我也希望带有替换元素的第二个状态持续存在。使用 JavaScript 很容易做到这一点，但有没有办法在纯 CSS 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T18:06:24.377

CSS 是无状态的，所以没有办法永久地改变状态。我能想到的唯一接近的方法是增加元素的大小（或有一个很大的子元素），这样鼠标就不会离开，但它会掩盖页面和控件的其余部分。

# xcode - 使用垂直自动调整大小时视图向上移动

> ID：13182942
> 
> 赞同：0
> 
> 时间：2012-11-01T18:03:18.030
> 
> 标签：xcode, macos, cocoa, xib

在我的自定义绘制窗口中，我有一个 NSTextView，我希望 NSScrollView 用空格分隔。这就是我在xib中设置的方式。

在界面生成器中看起来不错，两者之间有很好的空间 ![](../Images/3ae135204c957aeed744b1dccd36cda0.png)

但是当我运行程序时，滚动视图向上移动，实际上覆盖了文本视图： ![](../Images/02891ac9f225eb72f4fe98d046665fff.png)

但是当我禁用滚动视图的垂直自动调整大小时，一切正常。

文本视图和滚动视图位于 NSView 下，因此它们是兄弟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T23:26:34.203

很可能是系统的缺点，因为滚动视图被完全隐藏，所以它可能被移动了。

我已经通过子类化 NSScrollView 并覆盖 - (void)resizeWithOldSuperviewSize:(NSSize)oldSize_; 所以现在我可以完全按照我的意愿定位滚动视图。

# coldfusion - 文本字段中的 ColdFusion 自动建议没有响应

> ID：13182944
> 
> 赞同：1
> 
> 时间：2012-11-01T18:03:20.857
> 
> 标签：coldfusion

我有一个文本字段，我想根据查询自动建议值。我有一个主文件和一个单独的文件 (getdata.cfc) 来保存我的查询。

这是我的主文件的文本字段部分：

```
<cfinput name="search_query" autosuggest="url:getdata.cfc?suggestvalue={cfautosuggestvalue}" maxResultsDisplay="10" showAutoSuggestLoadingIcon="true" size="10" /> 
```

这是 getdata.cfc 中的代码：

```
 <cfcomponent>
    <cffunction name="get_data" access="remote"  output="false">
        <cfargument name="suggestvalue" required="true">

        <cfquery name="get_data" datasource="#application.DSN#">
                SELECT DISTINCT myItem 
                FROM myTable
                WHERE myItem LIKE <cfqueryparam value="#suggestvalue#%"
                cfsqltype="cf_sql_varchar">
                ORDER BY myItem 
        </cfquery>

        <cfif get_data.recordCount eq 1>
            <cfreturn ",#get_data.myItem#">
       <cfelse>
            <cfreturn ValueList(get_data.myItem)>
       </cfif>
    </cffunction>
</cfcomponent> 
```

文本字段显示得很好，但是当我输入一个单词时，没有显示自动建议值。什么都没发生。文本只是在我键入时显示。

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T18:31:27.873

I switched away to using jquery plugins from a lot of CF stuff, but here is an example I have that works in some old production code

```
<cfinput type="text" name="email" id="email" autosuggest="cfc:cfc.users.lookupEmail({cfautosuggestvalue})" maxresultsdisplayed = "25">

<cffunction name="lookupEmail" access="remote" returntype="array">
    <cfargument name="search" type="any" required="false" default="">

    <!--- Define variables --->
    <cfset var data="">
    <cfset var result=ArrayNew(1)>

    <!--- Do search --->
    <cfquery name="data"  datasource="datasource" maxrows="25" cachedwithin="#CreateTimeSpan(0,0,30,0)#">
    SELECT distinct email
    FROM users
    WHERE email LIKE  <cfqueryparam cfsqltype="cf_sql_varchar" value="#arguments.search#%">
    ORDER BY email
    </cfquery>

    <!--- Build result array --->
    <cfloop query="data">
    <cfset ArrayAppend(result, email)>
    </cfloop>

    <!--- And return it --->
    <cfreturn result>
</cffunction> 
```

maybe this helps

also make sure you have your cfform tags around your form, and make sure that your /cfide folder is mapped to your website.

looking at your code and comparing it... it may be the way your calling the cfc (filename)

try: autosuggest="cfc:getdata.get_data.({cfautosuggestvalue})"

# c++ - 字符串文字和整数常量的问题

> ID：13182948
> 
> 赞同：0
> 
> 时间：2012-11-01T18:03:36.357
> 
> 标签：c++, compilation

它是什么？

```
#include <iostream>

int main()
{
   std::cout << "str"1 << '\n';
} 
```

我认为这是不可能的，但 gcc 会编译这段代码（而 Comeau 编译器不会）。为什么？那么这段代码的输出呢？

> `str"`

为什么编译为 C 代码时不允许？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T18:38:47.747

这似乎是一个错误 gcc 2.7.2 编译[http://liveworkspace.org](http://liveworkspace.org)使用的 C++ 代码——如果你输入它`"somestring"morestuffafter`，它会有效地将其转换为`"somestring\"morestuffafte"`（注意尾随的 r 已转换为“）。

# c - c中的伪全局变量

> ID：13182949
> 
> 赞同：2
> 
> 时间：2012-11-01T18:03:39.993
> 
> 标签：c, visual-studio, global-variables

一个面试问题问得非常频繁。但是，我不清楚我在不同网站上找到的解释。因为，当我尝试执行此代码时，它会显示`_AX`未声明的错误。

```
main()
  {
   int i;
   i = abc();
   printf("%d",i);
  }
  abc()
  {
   _AX = 1000;
  } 
```

人们说`_AX`是**伪全局变量**，这就是它显示输出**1000**的原因。

**注意： - 它显示错误`_AX`未声明，但是当我声明变量时，它显示一些垃圾值 **

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-01T18:07:36.267

这个经常出现？这完全是胡说八道。大概`_AX`是一些特定于编译器的符号来访问“ax”寄存器，该寄存器在 x86 上用于返回值。然而，没有理由相信寄存器中的值不应该在赋值和函数返回之间被破坏。该程序正在调用未定义的行为。如果有人为您提供工作希望您知道这种无效的做法，请运行。快速地。他们没有能力。

# c# - DataGrid 设置只读并允许滚动？

> ID：13182950
> 
> 赞同：2
> 
> 时间：2012-11-01T18:03:47.043
> 
> 标签：c#, wpf, datagrid, scroll, readonly

我有一个，当我不希望用户更改任何内容时`DataGrid`，我当前设置为该位置，然后我有一个按钮供用户单击以允许修改，然后更改为 false`ReadOnly``IsReadOnly`

但现在的问题是，当 时`DataGrid.IsReadOnly = true`，滚动被禁用。如何使 DataGrid`IsReadOnly=true`或类似的并且仍然能够滚动`DataGrid`？

数据网格样式：

```
<DataGrid.Style>
  <Style TargetType="{x:Type DataGrid}">
    <Style.Triggers>
      <MultiDataTrigger>
        <MultiDataTrigger.Conditions>
          <Condition Binding="{Binding ReadOnly}" Value="True"/>
          <Condition Binding="{Binding Reordering}" Value="False"/>
        </MultiDataTrigger.Conditions>
        <MultiDataTrigger.Setters>
          <Setter Property="IsReadOnly" Value="True" />
          <Setter Property="IsHitTestVisible" Value="False" />
          <Setter Property="Foreground" Value="Gray" />
        </MultiDataTrigger.Setters>
      </MultiDataTrigger>
      <MultiDataTrigger>
        <MultiDataTrigger.Conditions>
          <Condition Binding="{Binding ReadOnly}" Value="True"/>
          <Condition Binding="{Binding Reordering}" Value="True"/>
        </MultiDataTrigger.Conditions>
        <MultiDataTrigger.Setters>
          <Setter Property="IsHitTestVisible" Value="False" />
          <Setter Property="IsReadOnly" Value="True" />
        </MultiDataTrigger.Setters>
      </MultiDataTrigger>
      <MultiDataTrigger>
        <MultiDataTrigger.Conditions>
          <Condition Binding="{Binding ReadOnly}" Value="False"/>
        </MultiDataTrigger.Conditions>
        <MultiDataTrigger.Setters>
          <Setter Property="IsHitTestVisible" Value="True" />
          <Setter Property="IsReadOnly" Value="False" />
        </MultiDataTrigger.Setters>
      </MultiDataTrigger>
    </Style.Triggers>
  </Style>
</DataGrid.Style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T18:33:35.810

你有没有试过这个：

```
dataGridView1.ReadOnly = true;
void dataGridView1_DoubleClick(object sender, EventArgs e)
{
     if (dataGridView1.ReadOnly == true)
          return;

     // .. whatever code you have in your handler...
} 
```

[禁用 DataGridView 除了滚动](https://stackoverflow.com/questions/12750518/disable-datagridview-except-the-scroll)

# javascript - 禁用从 chrome 控制台编辑 javascript？

> ID：13182952
> 
> 赞同：4
> 
> 时间：2012-11-01T18:03:50.210
> 
> 标签：javascript, google-chrome, console, javascript-security

所以，我今天才注意到，您显然可以在 chrome 控制台中运行 javascript。我不知道你能做到这一点。这真的很酷。

在我的 rails 应用程序中，我有一个外部 javascript 页面。该页面上的一些变量我希望是全局的，以便 JS 文件中的所有函数都可以访问它们。例如，我有一张地图，我希望地图对象在 javascript 文件中是全局的，因为这样我的所有函数都可以访问一个地图变量而不是创建自己的变量，并且我可以将复杂的操作分解为更小的函数。

这一切都很好，我知道该怎么做，而且效果很好。我现在的问题是，我可以保护变量不受外部影响吗？例如，您可以从 chrome 控制台更改所有 javascript 类变量的值。以及地图中的方法是可访问和可执行的。我已将地图设置锁定在其中一个页面上，因此它不可缩放或可移动，但是从控制台我可以简单地说`map.setZoom(11)`，地图将缩放到 11.. 我可以打字`map.dragable = true`，然后你可以拖动地图.. 我真的不喜欢这个..

这还不算太糟糕，就像用户启用地图拖动和缩放并不是世界上最糟糕的事情。但我仍然想禁用它。有任何想法吗？

编辑

感谢大家的回答和评论。我想我只会诉诸不将任何可能变成恶意的东西放入我的 javascript 中，并做一些事情，例如将我的 map 变量传递给必要的函数以减慢人们的速度。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T18:09:10.147

您可以使用立即调用函数 (IIFE) 表达式来防止变量和函数在全局范围内公开：

```
var a = 10;

(function() {
    var b = 20;
})(); 
```

`window.a`允许您查看和修改`a`，但您不能这样做`b`：

![在此处输入图像描述](../Images/b33625b0a48c8f0572c47d9935674301.png)

[**在这里试试**](http://fiddle.jshell.net/BpCZ5/2/show/)

我非常确定有一种方法可以`b`使用 Inspector 进行编辑，但我还没有花时间弄清楚。不要浪费时间试图阻止用户修改他们可以查看的代码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-01T18:12:15.420

你不能。即使您将它们包装成匿名函数，用户也可以通过调试器访问它们。作为最后的手段，他可以简单地将您的流量拦截到他自己的机器上，并用其他东西替换您的 JavaScript。

底线：浏览器中的 JavaScript 是*客户端的*。客户可以为所欲为。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-01T18:10:00.723

尝试做这样的事情：

```
(function(){
   //All of your current code
})(); 
```

仍然需要注意的一件事 - Chrome 开发人员工具还允许您编辑 javascript（不是服务器上的 javascript 文件，只是当前正在运行的副本。）转到 Chrome Dev Tools->Sources，您可以编辑 javascript 文件。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-01T18:12:28.260

你不能。你说你需要在全球范围内定义你的地图，这意味着每个人都可以访问它。您可以在不同的范围内定义您的地图，然后只定义“公共”事物：

```
(function() {
    var map = new Map();
    window.myMap = {
        goTo: function(lat, lng) {
            map.goTo(lat, lng);
        }
    };
})(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-01T18:16:17.260

根据您的架构，有几种方法可以实现这一点。使用此方法创建具有公共和私有属性的可重用组件：

```
var protectedScope = function () {
    var protected_var = 'protected';
    this.showProtected = function () {
        return protected_var;
    }
    this.public = 'public';               
};
var myObject = new protectedScope();

console.log('Public var: '+myObject.public); // outputs "public"
console.log('Protected via accessor: '+myObject.showProtected ()); // outputs "private"
console.log('Protected var: '+myObject.protected); // outputs undefined 
```

使用关键字声明的任何变量或函数`var`实际上都是私有的。任何使用该`this.name`机制的变量或函数都是“公共的”。

理解这个结构不是真正的公共或私有的，这样的概念不是语言的一部分。仍然有一些方法可以获取这些变量，并且总是可以查看源代码。清楚一点；**这是一个代码组织概念**，而不是一个安全概念。Chrome 拥有这个开发者控制台已经有一段时间了，其他主要的用户代理正在转向包括类似的工具（或者已经这样做了）。还有像 Firebug 这样的工具，它允许用户完全访问您的 javascript 运行时环境。这根本不是开发者可以控制的领域。

在这里试试：http: [//jsfiddle.net/cf2kS/](http://jsfiddle.net/cf2kS/)

**更多阅读**

*   Douglas Crockford 的“JavaScript 中的私有成员”* - [http://www.crockford.com/javascript/private.html](http://www.crockford.com/javascript/private.html)
*   *[http://phrogz.net](http://phrogz.net)* - [http://phrogz.net/JS/classes/OOPinJS.html](http://phrogz.net/JS/classes/OOPinJS.html)*上的“JS 中的 OOP，第 1 部分：公共/私有变量和方法”*
*   MDN 上的 Javascript 对象管理 - [https://developer.mozilla.org/en-US/docs/XUL_School/JavaScript_Object_Management](https://developer.mozilla.org/en-US/docs/XUL_School/JavaScript_Object_Management)
*   MDN 上的闭包 - [https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-23T10:23:57.550

```
Object.defineProperty(map, 'zoom', {value:1}); 
```

或者

```
Object.defineProperty(map, 'zoom',{
    set: function(){console.warn('Access denied!');},
    get: function(){return 1;}
    }); 
```

[演示](http://jsbin.com/lajovewu/1/edit?js,console)

或者

```
Object.defineProperty(Object.prototype, 'protect', {
    value:  function(ignore){
        var childObjects = [], ignore = ignore || [];
        ignore.push(this);      
        if(this instanceof MimeType)return; //Chrome Fix //window.clientInformation.mimeTypes[0].enabledPlugin[0] !== window.clientInformation.mimeTypes[0]
        for(var prop in this){
            if(typeof this[prop] === "unknown")continue; //IE fix
            if(this[prop] instanceof Object){
                var skip = false;
                for(var i in ignore)
                    if(ignore[i]===this[prop]){
                        skip = true;
                        break;
                    }
                if(!skip)childObjects.push(prop);   
            }       
            var d = Object.getOwnPropertyDescriptor(this, prop);
            if(!d || !d.configurable || !d.writable)continue;
            var that = this;
            (function(){
                var temp = that[prop];
                delete that[prop];
                Object.defineProperty(that, prop,{
                    set: function(){console.warn('Access denied!');},
                    get: function(){return temp;}
                });
            })();
        }
        for(var i = 0;i<childObjects.length;i++)
            this[childObjects[i]].protect(ignore);
    }  
});
this.onload=function(){this.protect();} //example 
```

[演示](http://jsbin.com/nadax/1)

# .net - Nancy 网站和 Nancy wcf 托管在不同的项目中

> ID：13182956
> 
> 赞同：0
> 
> 时间：2012-11-01T18:03:56.577
> 
> 标签：.net, wcf, nancy

`Nancy.Hosting.Aspnet`我希望在一个 VS 项目和托管此网站的 WCF 服务的专用项目中拥有 Nancy 支持的网站。测试性能背后的想法并有能力选择使用什么 IIS 或我自己的服务。

在 WCF 项目的引用中，我添加了网站项目。怎么可能以这种方式接待南希？

如何告诉 Nancy 不在当前可执行文件中搜索模块，而是在附加到它的 DLL 中搜索模块？应该满足什么条件？目前最好的猜测是让命名空间同意，但现在还没有运气。如果它在这里有帮助的话是我用来从 WCF 可执行文件运行 Nancy 的代码（它是标准的）：

```
class Program
{
    private static readonly Uri BaseUri = new Uri("http://localhost:1234/");

    static void Main(string[] args)
    {
        AppDomainAssemblyTypeScanner.LoadAssemblies("Basta.dll");

        using (CreateAndOpenWebServiceHost())
        {
            Console.WriteLine("Service is now running on: {0}", BaseUri);
            Console.ReadLine();
        }
    }

    private static WebServiceHost CreateAndOpenWebServiceHost()
    {
        var host = new WebServiceHost(
            new NancyWcfGenericService(new Basta.Bootstrapper()),
            BaseUri);

        host.AddServiceEndpoint(typeof(NancyWcfGenericService), new WebHttpBinding(), "");
        host.Open();

        return host;
    }
} 
```

我已经使用了[这个问题](https://stackoverflow.com/q/8139096/1047741)的方法（通过调用`AppDomainAssemblyTypeScanner.LoadAssemblies`），但不幸的是没有奏效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:58:27.897

我找到了原因。当 Nancy 作为 WCF 运行时，通常在 IIS 虚拟文件夹中处理的所有外部资源都变得不可用。这意味着没有模板、没有样式、没有 javascript。没有。

因此，为了克服这个问题，所有额外的资源都需要复制到输出文件夹（在每个文件的 Visual Studio 属性中都有一个选项）。

# backbone.js - Backbone.Collection.each - 非常奇怪的行为

> ID：13182958
> 
> 赞同：0
> 
> 时间：2012-11-01T18:04:11.523
> 
> 标签：backbone.js, backbone-relational

我目前在使用`each`Backbone 集合的方法时遇到了非常不寻常的行为。在我的应用程序中，我允许用户编辑现有模型，其中包括对该模型进行编辑和添加一些时间限制。该模型及其时间约束与 Backbone Relational 相关联。每次用户单击以添加新的时间约束时，我都会在关系中添加一个 TimeConstraint 模型而不保存它。如果用户随后决定取消编辑，则应从关系中删除所有新的/未保存的 TimeConstraints。但是，当我遍历我的集合时，它似乎没有执行最终迭代。

我在这里构建了一个 jsfiddle 来演示这种行为：http: [//jsfiddle.net/richardstokes/ZzFgZ/9/](http://jsfiddle.net/richardstokes/ZzFgZ/9/)

要遵循的步骤是：

1.  点击“编辑政策”
2.  使用“新时间约束”按钮添加 2 个或更多新时间约束
3.  通过单击“取消编辑”取消编辑

您会注意到控制台打印了 time_constraints 集合的起始长度和结束长度，以及删除未保存模型后的中间长度。即使它们都是新的/未保存的，它似乎总是停止并在集合中留下一件。

如果有人能帮助我解决这个问题，我将不胜感激，这让我整天都陷入困境。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:03:19.550

您正在删除项目，因为 timeConstraints 的集合正在迭代，这可能会导致未定义的行为。尝试首先获取新的 timeConstraints 列表，然后将它们作为数组传递给 remove()：

```
var toRemove = this.model.get('time_constraints').filter(function (timeConstraint) {
    return timeConstraint.isNew();
});
this.model.get('time_constraints').remove(toRemove); 
```

# javascript - 延迟脚本和放置在页面正文末尾的脚本有什么区别？

> ID：13182959
> 
> 赞同：23
> 
> 时间：2012-11-01T18:04:17.310
> 
> 标签：javascript, html, web-applications

HTML5`defer`为可以在 HTML 页面中延迟加载的脚本引入了该属性。`defer`可用于任何不需要在 DOM 之前加载的脚本（也就是在 DOM 准备好之前不要弄乱它）。

长期以来，Web 开发人员一直被建议将所有不需要加载的脚本放在 DOM 之前，而不是放在页面中，而是放在标签`head`的末尾。`body`

`defer`使用和长期实践的建议有什么区别？前者能代替后者吗？

我很感激任何答案。谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T18:21:30.237

> async 和 defer 脚本都立即开始下载而不暂停解析器，并且都支持可选的 onload 处理程序来解决执行依赖于脚本的初始化的常见需求。

来自[WebKit 博客](https://web.archive.org/web/20160406104657/https://webkit.org/blog/1395/running-scripts-in-webkit/)，因此所有浏览器的行为不一定相同。因此，如果脚本仍然在最后，性能会更好，因为它们将在稍后下载。

2017 年编辑：浏览器支持现在好多了，所以你可以在头脑中摆脱异步/延迟脚本。将它们放在底部可能仍然是一个更安全的选择。新的浏览器仍然会提前下载它们，即使它们不在脑海中。

2020 年编辑：如今，除非您支持*非常*旧的浏览器，否则您应该继续使用 async/defer。

# javascript - 真正简单的幻灯片在新窗口中打开链接

> ID：13182960
> 
> 赞同：0
> 
> 时间：2012-11-01T18:04:24.580
> 
> 标签：javascript, jquery, html, slideshow

我正在使用[真正简单的幻灯片](http://reallysimpleworks.com/slideshow)，页面中没有任何地方可以单击幻灯片以在新窗口或选项卡 ( `target="_blank"`) 中打开某些链接。

我有以下内容，但它仍然在同一页面中打开：

```
<html>
    <head>

    <link rel="stylesheet" href="http://reallysimpleworks.com/slideshow/demo/css/style.css">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="http://reallysimpleworks.com/slideshow/demo/js/jquery.rs.slideshow.js?v1.4.10"></script>

    <script type="text/javascript">

            $(document).ready(function () {

                var opts = {
                    controls: {
                        playPause: {auto: false},
                        previousSlide: {auto: false},
                        nextSlide: {auto: false},
                        index: {auto: false}
                    },
                    slide_data_selectors: {
                        caption: {selector: 'div.caption', attr: false}
                    },
                    effect: 'slideLeft',
                    interval: 4, 
                    transition: 500
                };
                $('.rs-slideshow').rsfSlideshow(opts);

            });     

</script>

</head>

<body>

        <div class="main">
            <section class="demo-section clearfix" id="demo-1">
                <div id="slideshow-capts-links" class="rs-slideshow">
                    <div class="slide-container" style="">
                        <img src="http://reallysimpleworks.com/slideshow/demo/images/morzine-2011-a.png" class="rsf-slideshow-image" style="left: 0px; top: 0px; ">
                            <div class="slide-caption">This is a caption for the first slide.</div>
                    </div>
                    <ol class="slides">
                        <li>
                            <a href="http://reallysimpleworks.com/slideshow/demo/images/morzine-2011-a.png" ></a>
                        </li>
                        <li>
                            <a href="http://reallysimpleworks.com/slideshow/demo/images/morzine-2011-b.png" target="_blank" data-link-to="http://reallysimpleworks.com"></a>
                                <div class="caption">
                                                <p>This slide has the hyperlink</p>
                                </div>
                        </li>
                        <li>
                            <a href="http://reallysimpleworks.com/slideshow/demo/images/morzine-2011-c.png"></a>
                        </li>
                    </ol>
            </section>      
        </div>

</body>
</html> 
```

**编辑**

[我已经按照Jigar Savla](https://stackoverflow.com/a/13185664)和[yurtdweller](https://stackoverflow.com/a/13183936)的建议尝试了以下代码，但它一直在同一页面中打开。我曾在 Chrome 和 IE 中尝试过。

```
<html>
    <head>

    <link rel="stylesheet" href="http://reallysimpleworks.com/slideshow/demo/css/style.css">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="http://reallysimpleworks.com/slideshow/demo/js/jquery.rs.slideshow.js?v1.4.10"></script>

    <script type="text/javascript">

            $(document).ready(function () {

                var opts = {
                    controls: {
                        playPause: {auto: false},
                        previousSlide: {auto: false},
                        nextSlide: {auto: false},
                        index: {auto: false}
                    },
                    slide_data_selectors: {
                        caption: {selector: 'div.caption', attr: false}
                    },
                    effect: 'slideLeft',
                    interval: 4, 
                    transition: 500
                };
                $('.rs-slideshow').rsfSlideshow(opts);

                $('a.open_in_new_window').attr('target', '_blank');

            });     

    </script>

</head>

<body>

        <div class="main">
            <section class="demo-section clearfix" id="demo-1">
                <div id="slideshow-capts-links" class="rs-slideshow">
                    <div class="slide-container" style="">
                        <img src="http://reallysimpleworks.com/slideshow/demo/images/morzine-2011-a.png" class="rsf-slideshow-image" style="left: 0px; top: 0px; ">
                            <div class="slide-caption">This is a caption for the first slide.</div>
                    </div>
                    <ol class="slides">
                        <li>
                            <a href="http://reallysimpleworks.com/slideshow/demo/images/morzine-2011-a.png" ></a>
                        </li>
                        <li>
                            <a class="open_in_new_window" href="http://reallysimpleworks.com/slideshow/demo/images/morzine-2011-b.png" data-link-to="http://reallysimpleworks.com"></a>
                                <div class="caption">
                                                <p>This slide has the hyperlink</p>
                                </div>
                        </li>
                        <li>
                            <a href="http://reallysimpleworks.com/slideshow/demo/images/morzine-2011-c.png"></a>
                        </li>
                    </ol>
            </section>      
        </div>

</body>
</html> 
```

* * *

**回答后编辑**

好，我知道了！
感谢[Jigar Savla 的](https://stackoverflow.com/a/13185664)代码示例，我刚刚在 Javascript 中添加了几行新代码：

`// Under if (slide.link_to)`...
`if (slide.link_to_new_page) { $img = $('<a href="' + slide.link_to_new_page + '" target="_blank"></a>').append($img); }`

`// Under link_to: {selector: 'a', attr: 'data-link-to'},` ...
`link_to_new_page: {selector: 'a', attr: 'data-link-to-new-page'}`,

并在 html 中更改`data-link-to=http://google.com`为`data-link-to-new-page=http://google.com`

现在，如果我只想使用链接并在我使用的同一页面中打开它`data-link-to`，否则`data-link-to-new-page`。

干得好！！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T19:12:21.753

你可以加

```
$('a').click(function() {
$(this).attr('target', '_blank');
}); 
```

后

```
$('.rs-slideshow').rsfSlideshow(opts); 
```

这将使页面上的所有链接在新窗口中打开。如果您在链接上有类，我们可以更改代码以针对这些特定类并仅打开您要选择的类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T21:22:22.913

好吧，我会要求您为每个需要在新窗口中打开链接的锚标记添加一个单独的类。

例如，如果您使用**open_in_new_window**作为类名在新窗口中打开链接，那么代码将变为：

```
$('a.open_in_new_window').attr('target', '_blank'); 
```

希望这可以帮助 ;）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T15:45:35.903

因为真正简单的幻灯片会即时为每张幻灯片生成 HTML，所以在转换发生之前，您需要在生成链接后定位链接。您可以通过附加到`rsPostTransition`事件来做到这一点：

```
$('#my-slideshow').bind('rsPostTransition', function() {
  $('#my-slideshow a.open_in_new_window').attr('target', '_blank');
}); 
```

或者您可以使用 jQuery 的委托事件，这可能是更简洁的选择：

```
$('#my-slideshow').on('click', 'a.open_in_new_window', function() {
  $(this).attr('target', '_blank');
}); 
```

# javascript - 奇怪的填充问题

> ID：13182962
> 
> 赞同：-1
> 
> 时间：2012-11-01T18:04:28.280
> 
> 标签：javascript, jquery, css, html

请看[这个页面](http://vefaestetik.az/?debug)

我想要实现的是

![在此处输入图像描述](../Images/998230476da2057109df6d9c32f0a301.png)

和

![在此处输入图像描述](../Images/6628e2bc6412c829b472caa5acf657b6.png)

使用以下 jQ 函数根据文档高度动态调整 div 高度

```
$(window).load(function() {
    $('.sideBg').css({ 'height': ($(document).height())});
}); 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T18:16:17.243

`background`如果你只使用on会不会更好`body`？这样，您甚至不需要额外的元素或 JavaScript。

```
body {
  background: url(http://vefaestetik.az/design/img/bg/side_bg.png),
              url(http://vefaestetik.az/design/img/bg/side_bg.png) 100% 0, 
              black radial-gradient(ellipse at center, #45484D 0%,black 100%);
  background-repeat: repeat-y;
} 
```

不要忘记使用`background: black url(/design/img/bg/000.png);`页脚。

并且不要忘记您还应该有前缀版本

```
background: url(http://vefaestetik.az/design/img/bg/side_bg.png),
                  url(http://vefaestetik.az/design/img/bg/side_bg.png) 100% 0, 
                  black -webkit-radial-gradient(center, ellipse cover, #45484D 0%,black 100%);
background: url(http://vefaestetik.az/design/img/bg/side_bg.png),
                  url(http://vefaestetik.az/design/img/bg/side_bg.png) 100% 0, 
                  black -moz-radial-gradient(center, ellipse cover, #45484D 0%,black 100%);
background: url(http://vefaestetik.az/design/img/bg/side_bg.png),
                  url(http://vefaestetik.az/design/img/bg/side_bg.png) 100% 0, 
                  black -o-radial-gradient(center, ellipse cover, #45484D 0%,black 100%); 
```

*在正文样式中的无前缀之一***之前。****

 *如果我通过开发人员工具进行这些更改，对我有用

![截屏](../Images/9daf6248a48e1b75aa947a2e813bccd6.png)

**关于兼容性**：多背景比渐变支持更好（[**IE9支持多背景**](http://caniuse.com/#feat=multibackgrounds)，[**CSS渐变不**](http://caniuse.com/#feat=css-gradients)支持）。实际上，由于渐变，这在 IE 9 中不起作用。***但是，您可以通过在所有前缀版本之前***添加多个背景后备（不带渐变）使其在*不带渐变的 IE9 中工作。*

 *```
background: url(http://vefaestetik.az/design/img/bg/side_bg.png),
            black url(http://vefaestetik.az/design/img/bg/side_bg.png) 100% 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T18:28:40.263

您需要删除`margin-top`您`.wrapper <div>`的顶部才能修复：

```
.wrapper {
    background: url("/design/img/wrapper-bg.png") no-repeat center top;
    margin-bottom: 0 !important;
    margin-left: auto;
    margin-right: auto;
    /*margin-top: 20px; remove this */
    padding-top: 120px;
    position: relative;
    width: 1020px;
} 
```

然后对于底部，我建议获取高度`.wrapper <div>`：

```
$(function() {
  var wrapperHeight = $('.wrapper').height();
  $('.sideBg').css('height': +wrapperHeight+'px');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T12:11:00.467

如果您遇到不必要的问题，请`padding`始终使用 reset.css 文件。

从这里复制代码：http: [//meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)**

# ruby-on-rails - Rails - 为多选生成脚手架

> ID：13182963
> 
> 赞同：0
> 
> 时间：2012-11-01T18:04:36.160
> 
> 标签：ruby-on-rails, rails-generate

我使用以下方法在我们的应用程序中为平台列表生成脚手架：

```
rails generate scaffold platform name:string url:string country:string 
```

我想仍然使用脚手架的可能性来添加额外的属性，比如类型和性别，它们应该是下拉菜单，或者最好是多选。

有没有办法使用 rails generate 来创建这样的模型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T18:29:03.757

您已经为 Platform 生成了一个脚手架。所以你有两个选择：

*   手动编辑脚手架以添加新字段（推荐）
*   删除脚手架，`rails destroy scaffold`然后`rails generate`再次使用

无论如何，脚手架不允许您为下拉菜单指定选项。在任何情况下，您都必须手动编辑脚手架。此外，在 Rails 迁移中，您不能指定 ENUM 字段，因此性别的最佳选择是具有单一长度的字符串字段（具有`validates_inclusion_of`in 模型）。

PS 不要`type`用作列名，因为您可能会遇到奇怪的行为。

# android - 带有 RANDOM() 排序的 DISTINCT

> ID：13182965
> 
> 赞同：2
> 
> 时间：2012-11-01T18:05:00.757
> 
> 标签：android, sqlite, join, distinct

我正在基于内置 SQLite 创建 Android 国家/地区测验。其中一项任务是为给定国家选择正确的大陆（从 4 个选项中）。我使用以下数据库结构：

```
continents: ID | name
countries: ID | continent (foreign key) | name | capital 
```

应用程序选择 4 个随机行并以这种方式返回 Cursor：

```
return db.rawQuery("SELECT country.name, continent.name FROM "+COUNTRIES_TABLE_NAME+" country LEFT JOIN "+CONTINENTS_TABLE_NAME+" continent ON country.continent = continent.id ORDER BY RANDOM() LIMIT 4", null); 
```

问题是什么：SQLite 可以随机选择来自同一大陆的国家，然后我有两个或更多相同的答案。我想避免这个问题添加 DISTINCT：

```
SELECT country.name, DISTINCT continent.name... 
```

然后我得到一个错误（可能是因为语法）。那我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T18:56:03.077

也许不是最漂亮的 SQL，但这应该使用一个`SELECT`来获得 4 个不同的大陆，另一个来获得每个国家的随机国家；

```
SELECT 
  (SELECT name FROM countries c WHERE c.continent=con.id 
   ORDER BY RANDOM() LIMIT 1) name,
  con.name
FROM (SELECT id,name FROM continents ORDER BY RANDOM() LIMIT 4) con 
```

[SQLFiddle这里](http://sqlfiddle.com/#!5/959e1/17)（SQLfiddle在SQLite WebSQL中调用有问题`RANDOM`，所以不要让它切换）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T18:07:35.607

如果你想要不同的国家和大陆对在 country.name 之前放置 distinct

请参阅@Joachim Isaksson 的答案 - 它有效！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T18:08:17.640

尝试：

```
"SELECT DISTINCT country.name, continent.name 
 FROM "+COUNTRIES_TABLE_NAME+" country 
   LEFT JOIN "+CONTINENTS_TABLE_NAME+" continent ON country.continent = continent.id 
 ORDER BY RANDOM() LIMIT 4" 
```

# c++ - 运算符 << 和 >> 重载

> ID：13182967
> 
> 赞同：1
> 
> 时间：2012-11-01T18:05:13.787
> 
> 标签：c++, overloading, operator-keyword

> **可能重复：**
> [运算符重载](https://stackoverflow.com/questions/4421706/operator-overloading)

“你需要实现一个名为 Duration 的类，它表示时间长度，以小时、分钟和秒表示，例如 CD 上曲目的长度，或跑马拉松所用的时间。该类应该具有一组适当的构造函数（包括错误检查）和访问器方法。其中一个构造函数应允许使用单个整数初始化 Duration 对象，以秒为单位表示持续时间。**应重载 << 和 >> 运算符以允许Duration 对象通过流的输入和输出。**Duration 对象应以 \h:mm:ss" 格式输出，例如 \1:39:33"、\0:09:07" 和 \1:00:08"。此外，加法运算符 + 应该被重载，以便可以将两个 Duration 对象相加以生成新的 Duration 对象，并且可以将整数秒数添加到 Duration 对象中。最后，该类应该定义从 Duration 对象到表示持续时间（以秒为单位）的整数的类型转换。”

```
 #include <iostream>
    #include <stdlib.h>
    using namespace std;
    using std::cout;
    using std::cin;
    using std::ostream;
    using std::istream;

    class Duration 
    {
        private:
        int hours, minutes, seconds;
        int theSeconds;

        public:
        Duration() //default constructor.
        {}

        Duration(int hr, int min, int sec) //ordinary constructor.
        {
            hours = hr;
            minutes = min;
            seconds = sec;
        }

        inline int getHours()
        {
            return hours;
        }

        inline int getMinutes()
        {
            return minutes;
        }

        inline int getSeconds()
        {
            return seconds;
        }
    }; 
```

希望到目前为止我已经朝着正确的方向完成了这项任务（本周对 c++ 来说是新的）。但是，我正在努力解决如何实现我以粗体突出显示的部分以及之后的所有内容......

请建议和帮助我。另请注意，这不是课程作业等。我只是想为明年的 C++ 做准备。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:41:04.530

你应该有一个这样`std::ostream &`实现的 -returning 函数：

```
class Duration {

    int hours, minutes, seconds;
    int theSeconds;

    public:

        friend std::ostream & operator << (std::ostream & os, const Duration & dObj) {

            os << "The hours are " << dObj.hours << '\n';
            os << "The minutes are " << dObj.minutes << '\n';

            // ... and so on

        }

        Duration() {}
        Duration(int hr, int min, int sec) {
            hours = hr;
            minutes = min;
            seconds = sec;
    }

}; 
```

你也可以`operator>>`用同样的方式定义：

```
friend std::istream & operator >> ( std::ostream & os, const Duration dObj ) {

    os >> dObj.minutes >> dObj.hours /* >> ... */;

    return os;

} 
```

所以你可以像这样使用它：

```
Duration d;

std::cin >> d;

std::cout << d; 
```

# javascript - 使用 JQuery 在 html 页面上访问和显示帖子值

> ID：13182971
> 
> 赞同：0
> 
> 时间：2012-11-01T18:05:46.173
> 
> 标签：javascript, jquery, html

我试图在表格单元格中显示由另一个表格发布后的表格单元格中的值。下面是我的代码。在这里，我尝试使用 JQuery 在 unbound_AdultVal 隐藏字段中添加选择框的值。

```
<form enctype="multipart/form-data" method="post" action="summary.html" name="form">
<input id="unbound_CurrentStepID" type="hidden" value="Step_Two" name="unbound_CurrentStepID">
<input id="Unbound_AdultVal" type="hidden" value="" name="Unbound_AdultVal">

Ages 10+:

<select id="Unbound_Ticket" name="Unbound_Ticket">
<option selected="selected" value="0">0</option>
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
<option value="5">5</option>
<option value="6">6</option>
<option value="7">7</option>
<option value="8">8</option>
<option value="9">9</option>
</select>
<input type="submit" value="Continue" name="submit">
</form>

<script type="text/javascript">

  $(document).ready(function() {

var numDAdult = $("#Unbound_Ticket").val();

$("#Unbound_Ticket").change( function(){
    numDAdult = $("#Unbound_Ticket").val();

    $('input[name=Unbound_AdultVal]').val(numDAdult);
    });
  });
  </script> 
```

下面是我要显示隐藏字段值的 Summary.html 代码。

```
<form enctype="multipart/form-data" method="post" action="summary.html" name="form">
<input id="unbound_CurrentStepID" type="hidden" value="Form_Three" name="unbound_CurrentStepID">
<table width="800" border="1" align="center" cellpadding="5" cellspacing="0">
  <tr>
    <td width="381"><strong>Quantity</strong></td>
    <td width="242"><strong>Ticket Price</strong></td>
    <td width="139"><strong>Total Price</strong></td>
  </tr>
  <tr>
    <td><span id="postAdultvalue"></span>
    </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td colspan="3" align="right"><strong>Current Amount Due: $0</strong></td>
  </tr>
</table> 
```

```
<script type="text/javascript">

  $(document).ready(function() {
$("#postAdultvalue").text($("#Unbound_AdultVal").val());
  });
  </script> 
```

我很难使用 JQuery 在表中显示发布的值。由于我对 JQuery 很陌生，请原谅我的无知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T18:26:03.197

```
<input id="Unbound_AdultVal" type="hidden" **value=""** name="Unbound_AdultVal"> 
```

该值需要设置为 POST 变量（例如 PHP：$_POST["name"]，ColdFusion：#form.name#）。

# ios - AFNetworking with AFHTTPClient with AFJSONRequestOperation // MIME 类型问题

> ID：13182980
> 
> 赞同：0
> 
> 时间：2012-11-01T18:06:40.990
> 
> 标签：ios, afnetworking

我一直试图在将请求分派到需要 OAuth 身份验证的基于 REST 的服务的特定实例中掌握 AFHTTPClient 。使用 GTMOAuth 创建 OAuth 身份验证没有问题。

我还可以成功地编组参数以分派请求并使用手工拼凑的 NSMutableURLRequest 以及 AFJSONRequestOperation 和 NSURLConnection 获得格式良好的 JSON 响应。后两个机制是我的理智检查，我正确地接触了服务。

我得到了回应

```
[AFHTTPClient HTTPRequestOperationWithRequest:request success:^(AFHTTPRequestOperation *operation, id responseObject)] 
```

但无论如何——它被解释为文本/纯文本。返回对象的类是 __NCFData。

没有布埃诺。

这段代码不想返回任何类型的字典的响应。

```
- (IBAction) testFlickr {
// marshall parameters
NSString *urlStr = @"http://api.flickr.com/";
NSURL *url = [NSURL URLWithString:urlStr];

AFHTTPClient *client = [[AFHTTPClient alloc]initWithBaseURL:url];
[client registerHTTPOperationClass:[AFJSONRequestOperation class]];
[client setParameterEncoding:AFJSONParameterEncoding];
NSDictionary *params = [[NSDictionary alloc]initWithObjectsAndKeys:@"json", @"format", @"66854529@N00", @"user_id", @"1", @"jsoncallback", nil];

NSString *path = [[NSString alloc]initWithFormat:@"services/rest/?method=flickr.people.getPhotos"];

NSMutableURLRequest *af_request = [client requestWithMethod:@"GET" path:path parameters:params];

// flickrAuth instance variable is an instance of GTMOAuthAuthentication
[self.flickrAuth authorizeRequest:af_request];

[client setAuthorizationHeaderWithToken:[self.flickrAuth accessToken]];
[client setDefaultHeader:@"Accept" value:@"application/json"];

[client requestWithMethod:@"GET" path:path parameters:params];

LOG_FLICKR_VERBOSE(0, @"Can Authorize? %@", ([self.flickrAuth canAuthorize] ? @"YES":@"NO"));
LOG_FLICKR_VERBOSE(0, @"%@", client);

// first way of trying..
AFHTTPRequestOperation *af_operation = [client HTTPRequestOperationWithRequest:af_request success:^(AFHTTPRequestOperation *operation, id responseObject) {
    NSString *str = [[NSString alloc] initWithData:responseObject
                                          encoding:NSUTF8StringEncoding];
    LOG_FLICKR_VERBOSE(0, @"Weird af_operation semantics, but.. %@", str);
    LOG_FLICKR_VERBOSE(0, @"Weird af_operation semantics returns %@", [responseObject class]);

} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    //
    LOG_FLICKR_VERBOSE(0, @"Weird af_operation semantics, error.. %@", error);

}];

[af_operation start];
} 
```

这个请求可以通过。响应数据本身是我所期望的，但它不是任何类型的字典类。

我宁愿继续使用 AFHTTPClient 的方法（而不是，例如，[AFJSONRequestOperation JSONRequestOperationWithRequest]），这样我就可以使用 AFHTTPClient 的可达性方法等等。

奇怪的是（至少对我来说），如果我这样请求：

```
NSMutableURLRequest *aj_request = [client requestWithMethod:@"GET" path:path parameters:params];
[self.flickrAuth authorizeRequest:aj_request];

AFJSONRequestOperation *aj_operation = 
[AFJSONRequestOperation JSONRequestOperationWithRequest:af_request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
    LOG_FLICKR_VERBOSE(0, @"AFJSONRequestOperation %@", JSON);
} failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
    LOG_FLICKR_VERBOSE(0, @"AFJSONREquestOperation Error %@", error);
}];

[aj_operation start]; 
```

它以“401”失败，因为它在响应标头中期待应用程序/json，而是认为它收到了 text/plain

但是，如果我这样请求：

```
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[[NSURL alloc]initWithString:@"http://api.flickr.com/services/rest/?method=flickr.people.getPhotos&format=json&user_id=66854529@N00&nojsoncallback=1"]];
[self.flickrAuth authorizeRequest:request];

AFJSONRequestOperation *operation =
[AFJSONRequestOperation JSONRequestOperationWithRequest:request
                                                success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
                                                    LOG_FLICKR_VERBOSE(0, @"Success Flickr  =========\n%@ %@", JSON, [JSON valueForKeyPath:@"photos.total"]);
                                                    /////handler(JSON, nil);
                                                } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
                                                    LOG_FLICKR(0, @"URL Was %@", url);
                                                    LOG_FLICKR(0, @"Failed Flickr  ==========\n%@ %@", error, JSON);
                                                    /////handler(nil, error);
                                                }];
[operation start]; 
```

它工作正常，包括漂亮的 JSON、字典形式的数据。

在第一个实例中，我使用 AFHTTPClient 来生成 NSMutableURLRequest。在第二种情况下，我自己创建了 NSMutableURLRequest。在这两种情况下，我都使用 AFJSONRequestOperation 来分派请求，将问题的唯一罪魁祸首留给（除了我自己..）AFHTTPClient。

在我可以开始工作的第一个示例中，它没有返回 JSON-y 数据。

在第二个示例中，AFHTTPClient 似乎创建了一个明显失败的 NSMutableURLRequest——但是（AFAICT）当使用 [NSMutableURLRequest requestWithURL]“手动”创建该 URL 时，相同的 URL 成功。

我想知道 - 使用 AFHTTPClient 时我错过了什么？

帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T15:31:20.103

在您的第一个代码示例中，看起来您正在做`NSMutableURLRequest *af_request = [client requestWithMethod:@"GET" path:path parameters:params];`然后设置默认标题。默认标头仅适用于在指定后创建的请求。也许这就是事情出错的地方。

此外，该 401 错误可能是在抱怨其内容类型，但 401 是错误状态代码，这意味着您未经身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T20:57:29.233

我最终删除了所有标头参数以隔离问题，但这没有任何区别。仔细检查回复给了我一个线索。虽然 Flickr 确实返回“JSON”，但它不是 Lint-free，它似乎需要对其中一个参数进行调整。我一直在发送 jsoncallback=1 但它应该是 nojsoncallback=1。一旦我修复了该参数 AFJSONRequestOperation 正确处理响应并解析 JSON。

我的最终代码如下所示（对于其他人，请注意 nojsoncallback=1 参数）

```
- (IBAction)testFlickrAFJSON:(id)sender
{
// marshall parameters
NSString *urlStr = @"http://api.flickr.com/";
NSURL *url = [NSURL URLWithString:urlStr];
//NSDictionary *params = [[NSDictionary alloc]initWithObjectsAndKeys:@"json", @"format", @"66854529@N00", @"user_id", nil];
NSDictionary *params = [[NSDictionary alloc]initWithObjectsAndKeys:@"json", @"format", @"66854529@N00", @"user_id", @"1", @"nojsoncallback", nil];
NSString *path = [[NSString alloc]initWithFormat:@"services/rest/?method=flickr.people.getPhotos"];

AFHTTPClient *client = [[AFHTTPClient alloc]initWithBaseURL:url];

NSMutableURLRequest *af_request = [client requestWithMethod:@"GET" path:path parameters:params];

[self.flickrAuth authorizeRequest:af_request];

LOG_FLICKR_VERBOSE(0, @"Can Authorize? %@", ([self.flickrAuth canAuthorize] ? @"YES":@"NO"));
AFJSONRequestOperation *af_operation_2 = [AFJSONRequestOperation JSONRequestOperationWithRequest:af_request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
        LOG_FLICKR_VERBOSE(0, @"AFJSONRequestOperation Alt %@", JSON);
        LOG_FLICKR_VERBOSE(0,@"AFJSONRequestOperation Alt response MIMEType %@",[response MIMEType]);

    } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
        LOG_FLICKR_VERBOSE(0, @"AFJSONREquestOperation Alt Error %@", error);
        NSHTTPURLResponse *resp = [[error userInfo] valueForKey:AFNetworkingOperationFailingURLResponseErrorKey];
        LOG_FLICKR_VERBOSE(0,@"AFJSONRequestOperation Alt Error response MIMEType %@",[resp MIMEType]);

    }];

    [af_operation_2 start];

} 
```

# c# - C# 如何以编程方式“读取”图像？

> ID：13182982
> 
> 赞同：-1
> 
> 时间：2012-11-01T18:06:45.373
> 
> 标签：c#

我没有 CS 背景，但曾广泛使用 C#。也许我会知道这个有 CS 背景的答案，但我希望能得到这个网站上所有聪明人的帮助。

有人可以提供一个关于如何使用 C# 以编程方式“读取”图像的 C# 代码片段吗？假设我有黑白图像，就像指纹一样。背景可以是白色或灰度，打印本身是黑色的。如何使用 C# 区分图像（即指纹）和背景（即白色或灰度）的一部分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T18:09:27.170

您将使用 Bitmap 类加载图像：

[http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.aspx](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.aspx)

```
var bitmap = new Bitmap(filename); 
```

然后，您可以使用 GetPixel 方法“读取”每个点的颜色。

```
var color = bitmap.GetPixel(x, y); 
```

至于如何解释图像，例如确定哪些部分是指纹，这可能涉及各种复杂的图像处理算法，这些算法并不是 C# 特定的。

# xcode4.2 - 使用 xcode 4.2 创建杂志应用

> ID：13182983
> 
> 赞同：0
> 
> 时间：2012-11-01T18:06:51.957
> 
> 标签：xcode4.2, newsstand-kit

我想在 Xcode 4.2 中为报亭创建一个杂志应用程序。

有没有关于如何实现这一点的好教程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T14:49:26.010

[http://www.viggiosoft.com/blog/blog/2011/10/17/ios-newsstand-tutorial/](http://www.viggiosoft.com/blog/blog/2011/10/17/ios-newsstand-tutorial/)

这解释了有关报亭应用程序的一切。通过它。您将清楚地了解并检查苹果文档。

[http://www.viggiosoft.com/blog/blog/2011/10/29/at-newsstand-and-subscriptions/](http://www.viggiosoft.com/blog/blog/2011/10/29/at-newsstand-and-subscriptions/)

这是教程的第二部分。

# mysql - 在 MySQL 中，如何找到分组在特定列上的 N 个最大值的总和？

> ID：13182990
> 
> 赞同：2
> 
> 时间：2012-11-01T18:07:17.167
> 
> 标签：mysql, sql

> **可能重复：**
> [mysql：在 GROUP BY 中使用 LIMIT 来获得每组 N 个结果？](https://stackoverflow.com/questions/2129693/mysql-using-limit-within-group-by-to-get-n-results-per-group)

我有以下数据。

```
id      val
smith   20
smith   10
smith    8
smith   30
jones   40
jones   10
jones   30
jones   30 
```

然后我想要的是按 id 分组并将每个 id 的两个最大值相加。

```
smith   50  from 30+20
jones   70  from 40+30 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T18:19:59.907

如果您不担心仅获得每个 ID 的前两个值的总和，您会想要这样：

```
SELECT SUM(val) FROM table_name GROUP BY id ORDER BY id ASC 
```

但是，“我如何获得组内的前 N ​​个值”问题是重复的，在这里回答：[在 GROUP BY 中使用 LIMIT 来获得每个组的 N 个结果？](https://stackoverflow.com/questions/2129693/mysql-using-limit-within-group-by-to-get-n-results-per-group)

# visual-studio-2010 - Visual Studio UserMacros（和通用属性表）语法？

> ID：13182994
> 
> 赞同：1
> 
> 时间：2012-11-01T18:07:27.743
> 
> 标签：visual-studio-2010, macros, programming-languages, propertysheet

我四处搜寻，但无法在 Visual Studio 属性表上找到任何体面的参考指南。你可以用它们做的大部分事情都不能通过 UI 来完成，所以我必须认为有一个参考指南可以帮助理解可用的字段、语法等。

Lunicon 对[这个问题](https://stackoverflow.com/questions/3502530/using-visual-studio-project-properties-effectively-for-multiple-projects-and-con)的回答非常有用，但我真的很想知道关于可以在属性表中做什么的信息来自哪里。我希望这不是很多试验和错误。;)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T21:30:07.930

这根本不是一个体面的参考指南，但我确实注意到这里定义的属性表有一个架构：http: [//msdn.microsoft.com/en-us/library/ak4435es(v=vs.80) .aspx](http://msdn.microsoft.com/en-us/library/ak4435es(v=vs.80).aspx)

# c - 使用同一个数组重复存储数据

> ID：13182995
> 
> 赞同：1
> 
> 时间：2012-11-01T18:07:27.703
> 
> 标签：c

我正在逐字读取文件中的数据，并尝试将其存储在同一个缓冲区中，每个单词之间都有空格。但是，没有空间的话就出来了。请告诉我有什么问题吗？输出即将到来 aniljaiswalvikaskumarnikhilkumarindia 但我希望每个单词之间有空格。

```
int main()
{
    char buff[200];
    int l=0;
    FILE *fp;
    fd = NULL;``
    fp = fopen("header.c","r");
    memset(buff,0,200);
    while(1)
    {
        fscanf(fp,"%s",buff+l);
        l=strlen(buff);
        printf("Word of string = %s\n",buff);
        printf("Length of string = %d\n",l);
        if(feof(fp))
        {
            break;
        }
    }
    fclose(fp);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:30:14.893

Ignoring the fact that you are exposed to buffer overflow, you can simply add the space:

```
fscanf(fp,"%s",buff+l);
l=strlen(buff);
buff[l] = ' ';
l++; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T18:21:13.590

完整的工作代码：

```
 #include<stdio.h>
    #include<string.h>

     int main()
        {
            char buff[200];
            FILE *fp;
            char c;
            int len=0;
            int i=0;
            fp = fopen("header.c","r");
            memset(buff,0,200);
            while((c=fgetc(fp))!=EOF)
            {
                len++;
                buff[i++]=c;
                if(c==' ' || c=='\n')
                {
                printf("Word of string = %s\n",buff);
                printf("Length of string = %d\n",len);
                }
            }

            fclose(fp);
            return 0;
        } 
```

# c++ - 为什么不能 operator!= 进行转换？

> ID：13182996
> 
> 赞同：0
> 
> 时间：2012-11-01T18:07:32.760
> 
> 标签：c++

我有以下错误代码：

> （Visual Studio 错误：）错误 5 错误 C2678: 二进制 '!=' : 未找到采用“节点”类型的左操作数的运算符（或没有可接受的转换）

```
 template <class C, class T>
    C find2 ( C first , C last, T c )
    {
        //
        while ( first != last && *first != c )
        {
            ++first;
        }

        return first;
    }

    struct Node
    {
        Node(int a ,Node* b):val(a),next(b){};
        int val;
        Node* next;
    };

    template <class T>
    struct node_wrap
    {
        T* ptr;

        node_wrap ( T* p = 0 ) : ptr ( p ) {}
        Node& operator*() const {return *ptr;}
        Node* operator->() const {return ptr;}
        node_wrap& operator++ () {ptr = ptr->next; return * this;}
        node_wrap operator++ ( int ) {node_wrap tmp = *this; ++*this; return tmp;}

        bool operator== ( const node_wrap& i ) const {return ptr == i.ptr;}
        bool operator!= ( const node_wrap& i ) const {return ptr != i.ptr;}

    };
    bool operator== ( const Node& node, int n )
    {
        return node.val == n;
    }

    int main()
    {

        Node* node1=new Node(3,NULL);
        Node* node2=new Node(4,NULL);
        node1->next = node2;
        find2 ( node_wrap<Node>(node1), node_wrap<Node>(), 3) ) ;
        delete node1;
        delete node2;
        return 0;
    } 
```

这段代码有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T18:14:14.123

`Iterator`是 type `node_wrap<Node>`，所以在这里`*first`返回 a `Node`：

```
 while ( first != last && *first != c ) 
```

它没有`!=`将其与 的类型进行比较的运算符，`c`即`int`. 你可能的意思是：

```
 while ( first != last && first->val != c ) 
```

我会推荐这种方法，而不是另一种定义`operator==`和`operator!=`比较`Node`的方法`int`，因为它们是根本不同的类型，不应该相互比较。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T18:16:00.347

您正在尝试将 a`Node`与 an进行比较`int`（这是在执行时在函数中`find2`完成的`*first != c`）。

虽然您提供了一个`operator==`用于比较 a`Node`和 an 的方法`int`，但您还没有提供 an`operator!=`来做同样的事情。如果您添加一个，这应该可以工作。