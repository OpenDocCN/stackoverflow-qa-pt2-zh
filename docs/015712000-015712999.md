# StackOverflow 问答 15712000-15712999

# javascript - 我需要在浏览器中使用 javascript 向 SWF 触发关键事件

> ID：15712000
> 
> 赞同：0
> 
> 时间：2013-03-29T21:54:05.713
> 
> 标签：javascript, google-chrome, flash

所以，我有一个想法，我需要将键盘事件触发到网页上的嵌入式 swf（在 Chrome 中）。

我正在处理一些限制：

*   输入事件必须来自 javascript
*   事件需要被触发到 swf
*   我无权访问 swf 的源

我如何做到这一点，并不重要。这更像是一个个人项目，所以它可以有尽可能多的漏洞。

我已经调查了直接从 javascript 触发，但我得出的结论是这根本不可能。还有其他人有什么想法吗？例如，我可以以某种方式使用 Win32 API 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T05:05:39.543

我假设 SWF 是您自己的，在这种情况下您可以使用 ExternalInterface.call(); 方法直接在宿主页面中执行JS，您可以使用ExternalInterface.addCallback()函数将AS函数注册为可以在带有JS的SWF上调用。

[文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html#addCallback%28%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T08:11:04.903

如果你无法访问 swf 的源代码，这是不可能的，因为唯一的方法是在 flash 中注册回调并在 JS 中调用它们。当然，每个回调都必须使用 dispatchEvent 方法来触发你想要的事件（或者直接调用事件监听函数）。

解决问题的唯一方法是反编译 .swf（例如使用 Sothink SWF Decompiler）。如果它的代码没有被混淆，输出代码将足够清晰，可以阅读和重构它。反编译，添加回调（使用 ExternalInterface.addCallback()）并重新编译。

# wpf - 是否有可以在内部应用程序中使用的免费地图 API，例如 Bing/Google 地图

> ID：15712002
> 
> 赞同：0
> 
> 时间：2013-03-29T21:54:18.897
> 
> 标签：wpf, google-maps, maps, bing-maps

上述两个许可证都允许某些免费使用，但不符合我的要求。我需要一个地图 API，可用于通过邮政编码查找地点，然后缩小特定建筑物的位置以获得纬度/经度。客户在技术上并不需要这个，但它会使他们的商店纬度/经度的定位更容易。所涉及的非常低的使用量不保证付费订阅，因为我们预计每年最多 25 个商店位置查找。

将使用 WPF 的解决方案，尽管基于浏览器的选项很好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T21:56:45.240

是的，它是[http://www.openstreetmap.org/](http://www.openstreetmap.org/)

但我还没用过

[http://wiki.openstreetmap.org/wiki/API](http://wiki.openstreetmap.org/wiki/API)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T22:50:50.643

您要做的是在地图平台上执行地理编码操作。目前没有允许在内部应用程序中这样做的免费平台。

There are several platforms that will allow you to use it in your internal application with dedicated licensing model and with adapted restrictions:

*   **Bing Maps for Enterprise**: has known users or transaction based licensing models as well as a WPF Control: [http://www.microsoft.com/maps/product/terms.html](http://www.microsoft.com/maps/product/terms.html)
*   **Here Platform** (from Nokia): has known users model: [http://developer.here.com/plans](http://developer.here.com/plans)

Google does not provide a known user for internal application out of the licensing of the JavaScript API that might not be the best option to integrate in your WPF control (without using WebBrowser control and interop code).

OpenStreetMap also had limitations regarding the Licence that applies which was Share-A-Like, now it's ODBL and you should be able to use this project but the license only apply to the database, not the service that might be exposed (hosted) by tiers company. You might be interested in CloudMade offers.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T22:20:26.830

我仍然认为 Bing 将适合您的情况。我认为您正在寻找的是[Bing 搜索服务](http://msdn.microsoft.com/en-us/library/cc980849.aspx)。

使用它，您可以构造一个[StructuredSearchQuery](http://msdn.microsoft.com/en-us/library/cc981064.aspx)来获取该地点的结果（这将是您的[Keyword](http://msdn.microsoft.com/en-us/library/cc966816.aspx)），其中应该包含您所追求的纬度/经度。

[在此处](http://msdn.microsoft.com/en-us/library/cc980960.aspx)查看 Microsoft 示例。

许可与 Bing 地图控件的许可相同，因此根据您的预期查找范围，它应该免费供您使用。

# c++ - 如何防止警告：ISO C++ 禁止变长数组“节点”[-Wvla]

> ID：15712003
> 
> 赞同：2
> 
> 时间：2013-03-29T21:54:31.813
> 
> 标签：c++, arrays

我收到这两行代码的警告：

```
 const int entityNumber = materialNames.size();
 SceneNode* nodes[entityNumber]; 
```

我认为将 entityNumber 声明为 const 可以解决此问题。（在以前的版本中，实体编号只是我自己设置的一个值），但它似乎不起作用。正如你所知道的，我对 c++ 很陌生，如果这是一个愚蠢的问题，我很抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T21:59:57.147

您可能应该创建一个`std::vector`，它是一个动态长度数组，但对常见操作有很多支持：

```
// This reserves space for all the nodes you'll store
std::vector<SceneNode> nodes(materialNames.size()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T21:58:50.013

使用`std::vector`而不是旧数组。

# javascript - 在输入更改状态时使用 jquery 更改表单 url 查询参数

> ID：15712005
> 
> 赞同：0
> 
> 时间：2013-03-29T21:54:45.563
> 
> 标签：javascript, jquery

尝试创建一个带有要添加的项目数量的“添加到购物车”按钮，我已经添加了一个`<input id="product_quantity" value="1" onChange="updateQuantity()" />`到主`form`目录，因此每当我更改其中的值时，`input`它应该使用查询参数将表单的操作 url 更新为`input`字段中的相应值。

这是 HTML 中的概述：

```
<form action="index.php?option=com_virtuemart&view=cart&task=add&virtuemart_product_id[]=1&virtuemart_category_id[]=1&quantity[]=1&format=json">
    <input type="product_quantity" value="1" onChange="updateQuantity();"/>
    <input type="submit" />
</form> 
```

那么如何将表单的操作 url 参数字符串更改`&quantity[]=XXX`为在字段中输入的特定值`input`？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T22:04:38.383

与其将数量作为 GET 参数放在 URL 上并尝试使用 javascript 更新它，只需`name=quantity`在输入字段上放置一个属性，它将与表单一起发布。通常，由于您要发布表单，因此您可能希望将数据作为 POST 参数而不是 get 发送。看起来您正在使用 PHP，因此您可以使用`$_POST["quantity"]`PHP 脚本访问您的帖子变量。

```
<form action="index.php?option=com_virtuemart&view=cart&task=add&virtuemart_product_id[]=1&virtuemart_category_id[]=1&format=json">
    <input type="text" name="quantity" value="1" onChange="updateQuantity();"/>
    <input type="submit" />
</form> 
```

我可能也会将其他 GET 参数放在表单上的隐藏字段中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T22:07:08.207

```
$('#product_quantity').change(function () {

    var quantity = $(this).val();
    var form_url = $("form").attr("action");

    form_url.replace('quantity[]=1', 'quantity[]=' + quantity)

    //submit the form
    $("form").submit();
}); 
```

# php - 如何使用 PHP 发送电子邮件？

> ID：15712006
> 
> 赞同：0
> 
> 时间：2013-03-29T21:55:08.213
> 
> 标签：php, html, email

我对 PHP 不是很熟悉，我尝试在我的页面上实现一个简单的邮件脚本。但似乎什么也没有发生。我所在的服务器绝对支持 PHP。除了上传文件之外，我还需要做其他事情吗？

所以我有我的contact.php，其中只有普通的HTML 代码，在 <head> 部分带有 < ?php ?> 标记。

它是这样的：

```
<?php
    // Ausführen wenn Formular gesendet
    if (isset($_POST["submit"]))
    {

        // Sammeln der Formulardaten
        $an = "MYMAILADRESS@outlook.com";
        $name = $_POST['name'];
        $email = $_POST['email'];
        $betreff = $_POST['betreff'];
        $nachricht = $_POST['nachricht'];

        // Mailheader UTF-8 fähig machen
        $mail_header = 'From:' . $email . "\n";
        $mail_header .= 'Content-type: text/plain; charset=UTF-8' . "\r\n";

        // Nachrichtenlayout erstellen
        $message = "
            Name:       $name\n
            Email:      $email\n
            Nachricht:  $nachricht\n
        ";

        // Verschicken der Mail
        mail($an, $betreff, $message, $mail_header );
    };
?> 
```

当然，我故意更改了“MYMAILADDRESS”。HTML 表单如下所示：

```
<form id="form" action="thank_you.html" method="post">
        <label for="name">Name:</label>
        <input id="name" name="name" type="text" /><br />
        <label for="email">E-Mail: *</label>
        <input id="email" name="email" type="text" /><br />
        <label for="betreff">Betreff:</label>
        <input id="betreff" name="betreff" type="text" /><br />
        <label for="nachricht">Nachricht: *</label>
        <textarea id="nachricht" name="nachricht"></textarea><br />
        <p class="fussnote">* kennzeichnet Pflichtfelder</p>
        <input id="submit" name="submit" type="submit" value="Absenden" />
    </form> 
```

如果有人可以帮助我解决这个问题，那就太好了！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T22:07:40.867

您的`action`表单指向一个可能由`.html`文件解析的 URL。大多数支持 PHP 的 Web 服务器未配置为`.html`通过 PHP 处理器运行文件。请改用`.php`扩展名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T22:05:45.823

您提供的代码应该可以工作，但请注意，您会让自己容易受到潜在的黑客攻击。

PHP 的`mail()`函数不努力清理它接收到的输入；您的访问者可以发送`from`带有换行符的地址，并添加一种额外的邮件标题（例如 CC 或 BCC），以便从您的站点发送垃圾邮件。

清理输入相对容易，但即便如此，您的`mail()`功能也不是很容易使用 - 您最终会得到大量代码，但功能相对较少。

出于这个原因，我总是建议使用第三方邮件程序库。PHP 有几个不错的选择。我的首选是[phpMailer](https://github.com/Synchro/PHPMailer)。下载这个 PHP 脚本，将其作为您网站的一部分，然后按照说明使用它发送邮件——您会发现它比该`mail()`功能更容易使用，而且您无需担心黑客攻击攻击，因为它会为您完成所有输入清理工作。

希望有帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-29T22:09:12.107

这是你的问题，

> 所以我有我的contact.php，其中只有普通的HTML 代码，在 <head> 部分带有 < ?php ?> 标记。

将 PHP 代码（inc 标签）移动到 HTML 正文标签中。

此外，将您的表单操作更改为您的 .php 文件。

# html - CSS Floating div inside another div

> ID：15712008
> 
> 赞同：1
> 
> 时间：2013-03-29T21:55:09.313
> 
> 标签：html, css

i have a div that floats to left and another one that floats to right the main main div that including the floating div does not reach the bottom of the page and the code example is:

```
<div style=" width: 900px; height:auto; margin:5px auto; background:#666; ">
  <div style="float:left;">
  Some content! Some content! Some content! 
  </div>
  <div style="float:right;">
  Some content! Some content! Some content! 
  </div>
</div> 
```

what is problem?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T22:01:17.260

The height of floated elements is not taken into account when the height of their parent element is calculated. You should look into the CSS property `clear`. In this case a third div with the CSS `clear: both` would help you achieve the result that you want.

但是，您应该退后一步，考虑一下您正在尝试做什么。如果您只是将这两个 div 彼此相邻，而在此级别没有其他框元素，则您可能不需要浮动这两个元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T21:59:44.913

A container div with floating elements ignores the height of its children if you don't apply a [clearfix](http://nicolasgallagher.com/micro-clearfix-hack/) to the container.

# ruby-on-rails - rubymine 错误：您已经激活了 rake 10.0.3，但您的 Gemfile 需要 rake 0.9.6。使用 bundle exec 可以解决这个问题

> ID：15712009
> 
> 赞同：1
> 
> 时间：2013-03-29T21:55:10.017
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, rubygems, rubymine

当我从我的 ruby​​mine 编辑器运行 rspec 时，我收到此错误：

```
You have already activated rake 10.0.3, but your Gemfile requires rake 0.9.6\. Using bundle exec may solve this. 
```

我也试过这个：

```
gem uninstall rake -v 10.0.3 
```

但我收到以下消息：

```
INFO:  gem "rake" is not installed 
```

bundle update rake 修复了命令行的问题。

但是当我通过命令行运行 rspec 时，我仍然得到“已经激活的 rake 错误”。我不知道如何解决这个问题。我想运行 0.9.6 是否必须更新 gem 文件。我无法更新它并将其推送到远程仓库，因为这是每个人都会使用的共享仓库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T22:53:27.300

如果您在项目中使用 gemset，请在 RubyMine 中尝试：

转到`Settings`并`Ruby SDK and Gems`从`Project Settings`左侧窗格中的部分中进行选择。在右侧窗格中的 gem 列表中找到 rake，您可能会同时看到 10.0.3 和 0.9.6 列出。选中`Ignore global gempath`复选框，您现在应该只看到列出的 rake 0.9.6 版本。点击确定，应该可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-05T11:11:34.223

您可以尝试`bundle update`修复依赖性问题。我有同样的问题，这解决了它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T22:44:47.427

查看 Gemfile 指定 rails 应该使用的 rake 版本。可能是您的 bundle update 命令正在升级到比其他依赖 gem 期望可用的版本更高的版本。

我将再次像您已经完成的那样卸载 gem，然后在您的 Gemfile 中写入以下行：

```
gem 'rake', '0.9.6' 
```

然后运行捆绑安装而不是捆绑更新。

# jquery-ui - 为什么拖动在目标 div 后面？

> ID：15712011
> 
> 赞同：2
> 
> 时间：2013-03-29T21:55:15.220
> 
> 标签：jquery-ui

我将一个 div 拖到另一个 div 中，并且克隆在目标 div *后面：*![在此处输入图像描述](../Images/8b9cc21fbedafad6e43ee17cd6cc4094.png)

HTML是

```
 <div id="widget_area"> 
    <div id="orangeBox" class="widget"> </div>
</div>
<div id="page">
</div> 
```

[在http://jsfiddle.net/stevea/2Xu2P/8/](http://jsfiddle.net/stevea/2Xu2P/8/)上有一个 jsFiddle， 它比这更好地显示了 HTML、jQuery 和 CSS。仅包含此内容，因为如果您链接到 jsFiddle，论坛需要一些代码。

我可以通过两种方式解决问题：删除 widget_area div：

![在此处输入图像描述](../Images/c95e23e82d77eb8effc3da449dfc002d.png)

或从目标 div 中删除 position:relative 样式：

![在此处输入图像描述](../Images/5792763d80a2f89dce533d310997ea37.png)

有人看到发生了什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T21:59:06.263

为两个容器定义 a`z-index`并使您的橙色容器具有更高的值。
IE：

```
.widget {
  width:98px;
   height:98px;
   background-color:orange;
   border:1px solid black;
   cursor:pointer;
   z-index: 3; 
}
div#page {
    width:500px;
    height:300px;
    background-color:#3a8;
    border:3px solid black;
    position:relative;    
    z-index: 1; 
} 
```

这是你更新的小提琴：http: [//jsfiddle.net/2Xu2P/10/](http://jsfiddle.net/2Xu2P/10/)

# css - some help for a newb

> ID：15712019
> 
> 赞同：0
> 
> 时间：2013-03-29T21:55:57.497
> 
> 标签：css, css-transitions

I watched a video on [youtube](https://www.youtube.com/watch?v=wZwnBkUDK9Q) for a cool shopping page using css transitions in dreamweaver. I am trying to re-create the page but I am having some trouble in trying to lay it out to that the text is at the bottom of the picture, but I cannot figure it out. Any ideas?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T04:14:27.253

在搜索了他们（非常长的）css 页面数小时后，我设法逐段提取了相关代码。如果有人感兴趣，我已将其发布在[JSFiddle](http://jsfiddle.net/GXezr/1/)上。

我对班级名称进行了分类，并尽我所能。链接现在功能齐全。

```
.feature-mask
.prod-content
.pic
#pic-one, #pic-two, #pic-three, #pic-four 
```

# jquery - Errors with JQuery UI hosted on Google

> ID：15712024
> 
> 赞同：1
> 
> 时间：2013-03-29T21:56:14.287
> 
> 标签：jquery, jquery-ui

Get this error with Google hosted JQuery UI. Seems Google hosted JQuery loads OK though.

Datepicker controls are not working. This occurs to several users from one customer only. Other customers not reporting any issues and I can't replicate the error on my end.

Any ideas? Thanks

User Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; InfoPath.3; .NET4.0C; .NET4.0E; Zune 4.7)

Timestamp: Thu, 28 Mar 2013 02:43:32 UTC

Message: Expected '}'

Line: 5

Char: 64890

Code: 0

URI: [http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js](http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js)

# python - dictionary sorting

> ID：15712025
> 
> 赞同：0
> 
> 时间：2013-03-29T21:56:26.937
> 
> 标签：python, list, dictionary

Basically I have created a function which takes in a list of dicts: for e.g oldList = [{'a':2}, {'v':2}] and newList = [{'a':4},{'c':4},{'e':5}]. My aim is to check for each dictionary key in the oldList and if it has the same dictionary key as in the newList update the dictionary, else append to the oldList. So in this case the key 'a' from oldList will get updated with the value 4, also since the keys b and e from the newList don't exist in the oldList append the dictionary to the oldList. Therefore you get [{'a': 4}, {'v': 2}, {'b': 4}, {'e': 5}]. I just want to know if there a better way to do this?

```
def sortList(oldList, newList):
    for new in newList: #{'a':4},{'c':4},{'e':5}
        isAdd = True 
        for old in oldList:#{'a':2}, {'v':2}             
            if new.keys()[0] == old.keys()[0]: #a == a
                isAdd = False
                old.update(new) # update dict
        if isAdd:
            oldList.append(new) #if value not in oldList append to it
    return oldList   

sortedDict = sortList([{'a':2}, {'v':2}],[{'a':4},{'b':4},{'e':5}])
print sortedDict

[{'a': 4}, {'v': 2}, {'b': 4}, {'e': 5}] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:01:23.460

您可以使用 update() 方法：

```
oldList = dict(a=2,v=2)
newList = dict(a=4,c=4,e=5)
oldList.update(newList)     # Update the old list with new items in the new one
print oldList 
```

输出：

```
{'a': 4, 'c': 4, 'e': 5, 'v': 2} 
```

# c# - Populating/Creating DIV tags with ASP.NET

> ID：15712026
> 
> 赞同：1
> 
> 时间：2013-03-29T21:56:29.370
> 
> 标签：c#, asp.net, html

I am building a website that has a similar page to groupon's browse deal page(www.groupon.com).

there is a div tag that holds a bunch of smaller div tags which encompasses the deal information. I want to be able to do the same thing essentially with asp.net. I do not want to use JavaScript or PHP, only c#. If I have to use JS/php I will, but it is only a last resort.

I have all my deal data inside my DB which i am grabbing via Stored proc.

Should I create all the div tags and 'placeholders' first( inside html), then populate one by one, while leaving the others div tags blank until I fill them in?

Or should I generate the div tags and other html elements in the c# code via htmlGenericControl , attach to the html individually, then populate the div tag one by one?

Is there is a better method of which I do not know of?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T22:32:55.550

You can use a `repeater`, you can design your html for one coupon. This will then be repeated for every row in your dataset. I suggest you read these articles:

[here](http://msdn.microsoft.com/en-us/library/bb498210.aspx) and [here](http://www.devmanuals.com/tutorials/ms/aspdotnet/repeater.html)

# intuit-partner-platform - Intuit Anywhere 登录

> ID：15712027
> 
> 赞同：1
> 
> 时间：2013-03-29T21:56:41.283
> 
> 标签：intuit-partner-platform

我正在尝试通过 Intuit Anywhere 的认证。以下是我需要的区域：

对于 SignIn WF 5.0，即使用户已登录 App Center 并因此使用 Intuit 登录，也会显示使用 Intuit 登录按钮。

对于 SignIn WF 7.0，在我登录您的应用程序时，在应用中心断开公司文件与您的应用程序的连接后，它仍然说公司文件已连接到您的应用程序并允许我尝试同步信息。

对于 AppCenter 1.0，即使用户已登录 App Center 并因此使用 Intuit 登录，也会显示使用 Intuit 登录按钮。

使用 C# MVC，我如何告诉我的软件用户已登录到应用中心？我登录到应用程序中心，然后访问了我的应用程序 (cloudcartconnector.com)。我看不到可以使用的会话变量或 cookie。是否有对我缺少的应用中心的 API 调用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T23:17:47.230

我在开发区的设置是错误的。我需要指向正确的断开连接并打开 id url：

![在此处输入图像描述](../Images/6d51784df469d7570837c7596bd5cb9a.png)

# c# - MVVM - ICommand and INotifyPropertyChanged query

> ID：15712031
> 
> 赞同：0
> 
> 时间：2013-03-29T21:56:50.540
> 
> 标签：c#, mvvm

All,

Just started w/ MVVM... got few articles that talk abt MVVM... I have 2 queries..

1.  Always INotifyPropertyChanged and ICommand implementation will be like this? or some other changes required?

2.  If I click on some button and need to call some method of model ? How can I achive that?

Thx in advance..

This property is implemented @ model

```
#region INotifyPropertyChanged Members
public event PropertyChangedEventHandler PropertyChanged;
private void OnPropertyChanged(string propertyName)
{
    if (PropertyChanged != null)
    {
        PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }
}
#endregion 
```

ICommand -- this is implemented @ VM

```
private ICommand mUpdater;
public ICommand UpdateCommand
{
    get
    {
        if (mUpdater == null)
            mUpdater = new Updater();
        return mUpdater;
    }
    set
    {
        mUpdater = value;
    }
}

private class Updater : ICommand
{
     #region ICommand Members
     public bool CanExecute(object parameter)
     {
        return true;
     }

     public event EventHandler CanExecuteChanged;

     public void Execute(object parameter)
     {

     }

     #endregion
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:28:17.867

1.  在[我有更多经验的](http://msdn.microsoft.com/en-us/library/ff648465.aspx)[~~框架~~](http://msdn.microsoft.com/en-us/library/ff648465.aspx)平台中， ICommand 是通过一个名为`DelegateCommand`. 它基本上允许您在其他地方 实现您的`Execute`和方法。`CanExecute`

2.  在您的视图模型上，您将有一个命令，然后在视图模型的模型上执行该方法：

    ```
    public class SomeViewModel : ViewModelBase<SomeModel>
    {
        //implemented in the base class:
        //public Model SomeModel { get; }

        internal ICommand SomeMethodThatIsReallyOnMyModel
        {
            get
            {
                 return _someCommandYouHaveImplementedToDoJustThis;
            }
            //_someCommandYouHaveImplementedToDoJustThis.Execute:
            //Model.SomeMethod()
        }

    //... 
    ```

    }

# xml - How can I keep page breaks out of groups of table rows in XSL-FO

> ID：15712032
> 
> 赞同：3
> 
> 时间：2013-03-29T21:56:56.777
> 
> 标签：xml, xslt, xsl-fo, xmlspy

I've got a rather complicated table, which i think is the source of my problem. The table is filled based on data retrieved from an XML file from a client database. Here is an excerpt of the XSL code that I'm trying to apply to the XML:

```
<fo:table-row>
    <fo:table-cell number-columns-spanned="2">
        <fo:block/>
    </fo:table-cell>
    <fo:table-cell number-columns-spanned="2">
        <fo:block/>
    </fo:table-cell>
</fo:table-row>
<xsl:for-each select="xml/value">
    <fo:table-row>
        <fo:table-cell number-columns-spanned="2">
            <fo:block>
                <xsl:value-of select="@value"/>/>
            </fo:block>
        </fo:table-cell>
        <fo:table-cell number-columns-spanned="2">
            <fo:block>
                <xsl:value-of select="@othervalue"/>/>
            </fo:block>
        </fo:table-cell>
        </fo:table-row>
</xsl:for-each> 
```

This is bundled together and treated like a single row, so if the page splits somewhere in this bigger row, it looks like the row is being split.

I've tried using keep-together.within-page="always", page-break-inside="avoid", keep-with-previous.within-page="always", and keep-with-next.within-page="always" on the table and on the iterated blocks in various combinations but nothing seems to stick. Can anyone spot a solution for this? Any help is appreciated, Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-01T16:46:58.823

我（不情愿地）使用的解决方法是嵌套表。使用此解决方案（如果它适合您），您最好`table-layout="fixed"`在表格上使用并明确指定列及其宽度，以确保列对齐。因此，我将引入一些进一步的模板来整理一下并提高可维护性：

```
<xsl:template match="Whatever">
    <fo:table table-layout="fixed">
        <xsl:call-template name="fourColumnTemplate"/>
        <fo:table-body>
            <!-- UNSEEN ROWS HERE -->
            <!-- UNSEEN ROWS HERE -->
            <!-- UNSEEN ROWS HERE -->
            <fo:table-row keep-together.within-page="always">
                <fo:table-cell number-columns-spanned="4">
                    <fo:block>
                        <xsl:call-template name="outputXmlValueTable">
                            <xsl:with-param name="xmlNodes" select="xml/value"/>
                        </xsl:call-template>
                    </fo:block>
                </fo:table-cell>
            </fo:table-row>
        </fo:table-body>
    </fo:table>
</xsl:template>

<xsl:template name="fourColumnTemplate">
    <!-- note that these values should only be specified in one place for maintenance reasons -->
    <fo:table-column column-width="proportional-column-width(2)"/>
    <fo:table-column column-width="proportional-column-width(3)"/>
    <fo:table-column column-width="proportional-column-width(2)"/>
    <fo:table-column column-width="proportional-column-width(3)"/>
</xsl:template>

<xsl:template name="outputXmlValueTable">
    <xsl:param name="xmlNodes"/>
    <fo:table table-layout="fixed">
        <xsl:call-template name="fourColumnTemplate"/>
        <fo:table-header>
            <fo:table-row>
                <fo:table-cell number-columns-spanned="2">
                    <fo:block>Title1</fo:block>
                </table-cell>
                <fo:table-cell number-columns-spanned="2">
                    <fo:block>Title2</fo:block>
                </table-cell>
            </fo:table-row>
        </fo:table-header>
        <fo:table-body>
            <xsl:apply-templates select="$xmlNodes" mode="outputXmlValueRow"/>
        </fo:table-body>
    </fo:table>
</xsl:template>

<xsl:template match="*" mode="outputXmlValueRow">
    <fo:table-row>
        <fo:table-cell number-columns-spanned="2">
            <fo:block>
                <xsl:value-of select="@value"/>/>
            </fo:block>
        </fo:table-cell>
        <fo:table-cell number-columns-spanned="2">
            <fo:block>
                <xsl:value-of select="@othervalue"/>/>
            </fo:block>
        </fo:table-cell>
    </fo:table-row>
</xsl:template> 
```

# python - Shouldn't I have been able to do this without sum()? [Python Codeacademy]

> ID：15712036
> 
> 赞同：0
> 
> 时间：2013-03-29T21:57:11.667
> 
> 标签：python, for-loop, sum

So I am the rankest of novices trying to work through the Python courses on Codeacademy. The final problem in the section on lists and dictionaries ([http://www.codecademy.com/courses/python-beginner-en-IZ9Ra/1#!/exercises/3](http://www.codecademy.com/courses/python-beginner-en-IZ9Ra/1#!/exercises/3)) asks you print the total value of a stock of different items at different prices, defined like this:

```
prices = {
"banana": 4,
"apple": 2,
"orange": 1.5,
"pear": 3
}

stock = {
"banana": 6,
"apple": 0,
"orange": 32,
"pear": 15
} 
```

I had a lot of trouble thinking about how to carry over the results from one iteration of a for loop to the next, or to outside the loop, so I could sum them. I spent some time looking this up, and couldn't find good answers, which makes me think that I'm thinking about it incorrectly. But in any case I did discover the `sum()` function, and so I wrote the following and got the correct answer:

```
values = []

for items in prices:
    value = prices[items] * stock[items]
    values.append(value)

print sum(values) 
```

The problem is that Codeacademy hasn't taught me `sum()` yet, so it seems like I'm missing a pretty obvious way to do this without it. Without it I could get a list of the separate values for the 4 different items, but couldn't sum them. So - can someone maybe give me a hint as to how to carry over the results from one iteration into the next? But, I think that's the wrong way to be thinking about, right? If it is, can someone give me a hint as to how I should be thinking about?

I've been stuck on the second Project Euler problem (sum the even numbers of the Fibonacci sequence up to 4 million) out of a similar confusion I think.

Thank you! (If this is a bad question to post or poorly formulated, please explain. Thank you again!)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T22:04:04.910

```
totalValue = 0

for item in prices:
     totalValue += prices[item] * stock[item]

print totalValue 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T22:07:22.540

What you have now isn't a bad solution. You could skip the list creation and just add to a sum variable:

```
total = 0

for item in prices:
    total += prices[item] * stock[item]

print total 
```

Or use a generator along with `sum` for a one-liner:

```
total = sum(prices[item] * stock[item] for item in prices) 
```

# string - md5 hash key for token value

> ID：15712040
> 
> 赞同：0
> 
> 时间：2013-03-29T21:57:21.253
> 
> 标签：string, hash, md5, token

Hello I need your help I've been working on this since yesterday with no success at all. I'm creating an MD5 string for token value but it's not passing at all below are the information. Must be a hex-encoded MD5 HASH (32 digit hexadecimal number) of a concatenation of the following parameter values separated by”:” (values should be in lower case)

First, values should be converted to lower case: Parameter: merchant_id value: test Parameter: amount value: 15.25 Parameter: currency value: usd Parameter: key value: alfa

Then their values are contacted: test:15.25:aed:alfa

what I've did is the following codes: a. md5($this->data['merchant_id'] . $this->data['amount'] . $this->data['currency'] . $this->data['key'])

b. `md5($this->data['merchant_id'] . ':; . $this->data['amount'] . ':; . $this->data['currency'] . ':; . $this->data['encryption_key'])`

c. `$hash = $this->request->post['merchant_id']; $hash .= $this->request->post['amount']; $hash .= $this->request->post['currency']; $hash .= $this->request->post['key'];`

None of them is working can anybody help me please and thank you!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:06:01.563

It looks like you're using php. The first thing you can do is to use additional string variable to create the concatenated value:

```
$stringValue = $this->data['merchant_id'] . ':' . $this->data['amount'] . ':' 
    . $this->data['currency'] . ':' . $this->data['key']; 
```

Check if it outputs the proper values (`echo $stringValue;`). If it's okay, then use md5:

```
$md5Value = md5($stringValue); 
```

# objective-c - 如何在执行大型数学函数时更新进度条（objective-c）？

> ID：15712046
> 
> 赞同：0
> 
> 时间：2013-03-29T21:57:58.607
> 
> 标签：objective-c, uiprogressview

我有数学函数（大约 O^(10^7)），在搜索结果时我必须显示进度。所以我有进度条。问题是，如何更新进度条？我试图这样做：

```
self.progressBar.progress = 0.0;
self->progress = 0.0;
for (1..10^7) {
    ...
    if (self.progressBar.progress < self.progress + 0.01) {
        [self updateProgress];
    }
}
[self updateProgress]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T22:12:53.177

在单独的线程中运行该操作。这是必须的。

你能把操作分成几个步骤吗？你知道步数吗？然后在每一步之后将进度条更新为`stepIndex/numSteps`百分比。

If you can't divide the operation into steps but you know how long the operation will take, you can update the bar to `timeSinceStart/expectedTime` percents. Use a `NSTimer` for the periodic updates.

If you can't do that, use only a `UIActivityIndicator`, that is, a component that shows the application is doing something but showing no indication how long the operation can take.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T22:06:16.297

有时你必须这样做：

```
CFRunLoopRunInMode (CFRunLoopCopyCurrentMode(CFRunLoopGetCurrent()), 0, FALSE); 
```

让 UI 更新进度条。

另外..您有动画：是的，并且并非在所有版本的iOS中都可用。

您可能需要在 updateProgress 方法中考虑：

```
if ([activityProgressView respondsToSelector:@selector(setProgress:animated:)]) {
    [activityProgressView setProgress:0.5 animated:YES];
}
else {
    [activityProgressView setProgress:0.5];
}
CFRunLoopRunInMode (CFRunLoopCopyCurrentMode(CFRunLoopGetCurrent()), 0, FALSE); 
```

# c++ - Mountain Lion - No Console Output

> ID：15712047
> 
> 赞同：0
> 
> 时间：2013-03-29T21:57:59.123
> 
> 标签：c++, objective-c, logging

I have an application that has been successfully logging std::cout messages from my Objective-C application (with numerous open source and in house c++ base libraries) on 10.6 and 10.7 for several years.

I have a few users running 10.8 now, and the same std::cout messages that work without issue on older OSX revisions no longer appear at all in Mountain Lion.

I found a thread elsewhere that indicates cout messages no longer go to console in 10.8, only NSlog messages are sent to the console now. Is this true? If not, any other debug suggestions? If so, is there a work around?

Even if I changed my entire code base to NSlog, I can't do anything about the c++ libraries I use.

# workflow-foundation-4 - 访问数据库、重用和状态的自定义 Windows 工作流活动

> ID：15712048
> 
> 赞同：3
> 
> 时间：2013-03-29T21:58:13.737
> 
> 标签：workflow-foundation-4, workflow-activity

我创建了一个具有自定义活动 (CodeActivity) 的 Windows 工作流状态机。这些自定义活动需要访问数据库，我有一个包含数据库连接的属性。

在每个动作开始时，我都会初始化数据库上下文，做一些事情，然后处置数据库动作。这目前导致了一个问题，我认为这归结为这样一个事实，即如果同时从工作流的两个单独实例调用活动，则可以使用相同的代码活动实例。

例如，假设我的活动名为 DoSomething，如下所示：

```
public class DoSomething : CodeActivity
{
    protected DbContext DbContext { get; set; }

    protected override void Execute(CodeActivityContext context)
    {
        using (this.DbContext = CreateMyDatabaseContext())
        {
            DoSomething(this.DbContext);
        }
    }

} 
```

如果工作流的两个实例同时调用 DoSomething()，那么（因为正在使用同一个 DoSomething 实例），它们将指向同一个数据库上下文。

但相反，我想要的是让活动的每次调用都使用一个新的活动实例。

如果这是不可能的，那么我知道我需要从活动中删除任何实例属性，这是一个可以接受的答案。

但我想知道是否可以使用另一种机制来拥有实例属性。例如，工作流上是否有一个属性决定如何创建活动对象（例如，每个工作流的单独实例）？或类似的东西？

谢谢你的帮助，埃里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T22:38:47.590

使用单个或多个工作流实例的选项取决于您如何托管和初始化工作流？

Nonetheless using should not initialize property. Using statement limits life of variable to that block only while property can be used from everywhere.

In general, for Workflows, I would never use non thread-safe objects as properties for Activity. Especially if instance of that object is bound for specific request. Better approach would be to initialize object in one activity (which can be designed to be very flexible and powerful), add it to current ActivityContext and use it from there in next activities.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-26T20:20:12.030

You can use the `Variable<T>` type for workflow instance state.

In addition the following types are used for flowing data in and out of workflow instances:

```
InArgument<T>
OutArgument<T>
InOutArgument<T> 
```

# django - Redirecting a Wordpress blog using Django on Heroku

> ID：15712054
> 
> 赞同：1
> 
> 时间：2013-03-29T21:58:34.690
> 
> 标签：django, wordpress, heroku, reverse-proxy

I have a Django app running on Heroku, and I'd like to add a Wordpress blog to it. After some [background reading](http://rywalker.com/setting-up-a-wordpress-blog-on-heroku-as-a-subdirectory-of-a-rails-app-also-hosted-on-heroku), it seems like the accepted solution for ***Rails*** is:

1.  Deploy a separate Heroku Wordpress app solely for your blog
2.  Use rack-reverse-proxy to redirect `mydomain.com/blog` to `myblog.herokuapp.com`

However I have not found an equivalent reverse proxy middleware solution for Django. Does one exist? If not, how would I go about rolling my own?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T06:26:43.463

您不需要反向代理来进行重定向。只需使用视图。

创建视图：

```
def blog(request, *args, **kwargs):
    from django.shortcuts import redirect
    return redirect('http://myblog.herokuapp.com') 
```

将视图附加到 urls.py 文件中的 url：

```
urlpatterns = patterns('',
    url(r'^blog', blog, name='blog_redirect'),
) 
```

# eigen - 使用 Eigen 计算零空间是错误的？

> ID：15712057
> 
> 赞同：2
> 
> 时间：2013-03-29T21:58:38.423
> 
> 标签：eigen, svd

我正在使用 Eigen 库 ( [http://eigen.tuxfamily.org](http://eigen.tuxfamily.org) ) 使用 SVD 函数进行 Null Space 计算。我将输出与matlab中的“Null”函数进行了比较，得到了不同的结果。用调试器单步执行它，并查看 Eigen 创建的 V 矩阵与 matlab 中的 V 矩阵，有一个奇怪的区别。

V矩阵中的左奇异向量（下例中左3列）几乎相同，只是符号交换了。右奇异向量（零空间；右下方 3 列）根本不是很相似。

知道什么会导致这种情况吗？我是否错误地使用了 SVD 函数？下面的代码和示例结果。

这是代码：“输入”是一个普通的 C++ 数组：

```
/* Create a matrix with the nessecary size */
MatrixXf A(inRows, inCols);

/* Populate the matrix from the input */
for (int i=0; i < inRows; i++)
{
  for(int j=0; j < inCols; j++)
  {
    A(i,j) = input[i*inCols + j];
  }
}

/* Do a singular value decomposition on the matrix */
JacobiSVD<MatrixXf> svd(A, Eigen::ComputeFullV);

/* Get the V matrix */
MatrixXf V((int)svd.matrixV().rows(), (int)svd.matrixV().cols());
V = svd.matrixV(); 
```

以下是一些示例结果：

A（输入）=

```
-0.5059    -0.0075   -0.0121   -0.3526   -0.3528   -0.0128
-0.0067     0.4915    0.0235   -0.3503    0.3559    0.0211
 0.0027     0.0010   -0.5015    0.0021   -0.0031   -0.4999 
```

V(Matlab) =

```
 0.3120    0.6304    0.1115   -0.5031   -0.4895   -0.0027
 0.3628   -0.2761    0.5333    0.4955   -0.5121   -0.0018
 0.5180   -0.1804   -0.4480   -0.0002    0.0000   -0.7060
-0.0353    0.6404   -0.2953    0.7081    0.0074   -0.0023
 0.4859    0.2283    0.4623    0.0032    0.7057    0.0048
 0.5151   -0.1775   -0.4489    0.0014   -0.0080    0.7082 
```

V(特征) =

```
-0.3120   -0.6304   -0.1115   -0.5040   -0.4886   -0.0038
-0.3628    0.2761   -0.5333    0.4638   -0.4832    0.2432
-0.5180    0.1804    0.4480    0.1693   -0.1736   -0.6630
 0.0353   -0.6404    0.2953    0.6878    0.0257    0.1666
-0.4859   -0.2283   -0.4623    0.0258    0.6851   -0.1677
-0.5151    0.1775    0.4489   -0.1689    0.1665    0.6674 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T22:02:38.120

首先，形成空间正交基的方法不止一种。（例如`[1 0; 0 1]`，`1/sqrt(2) * [ 1 -1; 1 1 ]`两者都描述了相同的二维欧几里得空间）。所以我们不一定期望两个替代实现选择相同的基组。

如果我们在每种情况下取​​右侧的三列，我们会学到以下内容：

```
> Vmat = Vmat(:,4:end);
> Veig = Veig(:,4:end);
> Vmat' * V_mat

ans =

 1.0000e+00   8.8800e-06  -1.4120e-05
 8.8800e-06   9.9999e-01  -5.1830e-05
-1.4120e-05  -5.1830e-05   1.0000e+00

> Veig' * Veig

ans = 

 1.0001e+00  -1.4050e-05   2.4200e-06
-1.4050e-05   1.0001e+00  -4.8310e-05
 2.4200e-06  -4.8310e-05   1.0000e+00

> A * Vmat

ans =

 7.7612e-17   7.8916e-17   0.0000e+00
-4.1193e-17   4.8139e-17   0.0000e+00
 6.6136e-18  -6.0715e-18   1.1102e-16

> A * Veig

ans = 

-1.2030e-05   1.1000e-05  -6.0000e-07
-4.8600e-06   3.8750e-05   1.5490e-05
-3.4400e-06  -4.5210e-05  -3.6090e-05 
```

所以这些都是正交基组，它们基本上都是零空间。然而，Eigen 案例中的错误级别似乎与它是以单精度完成的事实相对应。以双精度再试一次，看看这次比较结果如何（我并不是说这肯定会有所帮助，只是这是与 Matlab 的一个明显区别。）

# javascript - Detecting Angular js dom changes due to scope variable changes

> ID：15712060
> 
> 赞同：0
> 
> 时间：2013-03-29T21:58:50.617
> 
> 标签：javascript, jquery, dom, angularjs

Suppose I have this template

```
<span>{{scopeVariable}}</span> 
```

And suppose somewhere in the angular scope I modify the variable scopeVariable, which will make it display on the dom...Suppose the span with class lol is initially hidden (and I'd like it to remain that way) so I then execute a jquery statement to display it

```
$scope.scopeVariable = '<span class="lol">A whole bunch of stuff</span>';
$('.lol').show(); 
```

The problem is that the javascript will execute before the entire scopeVariable placeholder on the dom is replaced with the variable value hence span '.lol' remains hidden...

My question is, how do I get angular to detect when the lol span will finish rendering on the placeholder, so that I can then execute the show() function to make it show properly?

# haskell - Haskell, convert string into all possible "tuples" of itself

> ID：15712062
> 
> 赞同：1
> 
> 时间：2013-03-29T21:59:01.083
> 
> 标签：haskell, tuples, combinations

I have searched and found some solutions but none of them look as simple as what i have in mind, so you have a list of numbers `[1,2,3,4]` and want to print the tuples like this: `[(1,2),(1,3),(1,4),(2,3),(2,4),(3,4)]`

So by using

```
combinaList :: String -> String
combinaList x = [(x,y) | x <- x, y <- drop 1 x ] 
```

Should do the trick, drop the first element from the list and combine the two lists, however I am getting my types wrong and possibly the drop bit too as ghci keeps on whinning at me, any help would be appreciated, thanks!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T22:03:17.440

Use [`tails`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-List.html#v%3atails) from `Data.List`.

```
combinaList xs = [(x, y) | (x:ys) <- tails xs, y <- ys] 
```

# excel - Sheet not protected when drawingobjects:=false

> ID：15712066
> 
> 赞同：0
> 
> 时间：2013-03-29T21:59:14.833
> 
> 标签：excel, excel-2007, vba

On a protected sheet I have a validate list that is dynamicaly updated with VBA code when values in a range are changed. With the worksheet_change event this function is called. First I call RemoveProtect, next MakeValidateList followed by EnableProtect.

```
Public Sub RemoveProtect()

If ActiveSheet.ProtectContents = True Then
    Application.ScreenUpdating = False
    ActiveWorkbook.Unprotect
    ActiveSheet.Unprotect

    Application.ScreenUpdating = True
End If

End Sub

Public Function makeValidateList(ByVal cell As Range, ByVal r1 As Range) As Integer

Dim arrCargo() As String
Dim i, c As Integer

ReDim arrCargo(1)
arrCargo(0) = "SLOPS"   'vaste waarden
arrCargo(1) = "MT"
c = UBound(arrCargo) + 1

For i = 1 To r1.Count
    If r1.Cells(i, 1).Value <> "" Then
        ReDim Preserve arrCargo(UBound(arrCargo) + 1)
        arrCargo(c) = r1.Cells(i, 1).Value
        c = c + 1
    End If
Next i

With cell.Validation
    .Delete
    .Add Type:=xlValidateList, Formula1:=Join(arrCargo, ",")
    .IgnoreBlank = True
    .InCellDropdown = True
End With

End Function

Public Sub EnableProtect()

        If ActiveSheet.Protect = False Then
            Application.ScreenUpdating = False
            ActiveWorkbook.Protect
            ActiveSheet.Protect UserInterfaceOnly:=True, DrawingObjects:=False

            Application.ScreenUpdating = True
        End If

End Sub 
```

With drawingobjects:=false the sheet remains unprotected, cells are not locked and formulas are not hidden. When drawingobjects:=false is removed the sheet is protected and formulas are hidden. But the validatelist is not updated.

What am I doing wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T02:57:02.173

试试下面的代码：

```
Const strPassWord As String = "1234"

Public Function makeValidateList(ByVal cell As Range, ByVal r1 As Range) As Integer

    Dim arrCargo() As String
    Dim i, c As Integer

    ReDim arrCargo(1)
    arrCargo(0) = "SLOPS"   'vaste waarden
    arrCargo(1) = "MT"
    c = UBound(arrCargo) + 1

    For i = 1 To r1.Count
        If r1.Cells(i, 1).Value <> "" Then
            ReDim Preserve arrCargo(UBound(arrCargo) + 1)
            arrCargo(c) = r1.Cells(i, 1).Value
            c = c + 1
        End If
    Next i

    With cell.Validation
        .Delete
        .Add Type:=xlValidateList, Formula1:=Join(arrCargo, ",")
        .IgnoreBlank = True
        .InCellDropdown = True
    End With

End Function

 Sub EnableProtect()
'Assumed Sheets("Sheet1") change it if needed
    Sheets("sheet1").Range("B1:B100").Locked = False ' You can alter this range as per your requirement
    Sheets("sheet1").Protect Password:=strPassWord, DrawingObjects:=True, Contents:=True, Scenarios:=True
End Sub

 Sub RemoveProtect()
    Sheets("sheet1").Unprotect Password:=strPassWord
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-22T11:50:42.400

使用`DrawingObjects:=0`而不是`DrawingObjects:=false`为我工作。

# java - Apple Push Notification Throughput and Error Checking

> ID：15712067
> 
> 赞同：0
> 
> 时间：2013-03-29T21:59:16.207
> 
> 标签：java, sockets, push-notification, apple-push-notifications

Recently Apple modified their [Technical Note TN2265 - Troubleshooting Push Notifications](https://developer.apple.com/library/ios/#technotes/tn2265/_index.html). They added a section about throughput and error checking.

This is taken from that section :

> Here's how to check for errors when using the enhanced binary interface. **Keep writing until a write fails. If the stream is ready for writing again, resend the notification and keep going. If the stream isn't ready for writing, see if the stream is available for reading.**
> 
> **If it is, read everything available from the stream.** If you get zero bytes back, the connection was closed because of an error such as an invalid command byte or other parsing error. If you get six bytes back, that's an error response that you can check for the response code and the ID of the notification that caused the error. You'll need to send every notification following that one again.
> 
> Once everything has been sent, do one last check for an error response.
> 
> It can take a while for the dropped connection to make its way from APNs back to your server just because of normal latency. It's possible to send over 500 notifications before a write fails because of the connection being dropped. Around 1,700 notifications writes can fail just because the pipe is full, so just retry in that case once the stream is ready for writing again.

My APN provider server is written in Java using blocking sockets (`SSLSocket`).

Is it possible to do what they suggest in the bold text using `SSLSocket`? After a write fails, can I write again to the socket? Doesn't the socket close in this case? How do I know if the stream is ready for writing again? How do I know if it is available for reading?

I want to avoid using NIO, because that would require using `SSLEngine`, which seems painful to implement.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T07:45:50.707

查看 Unix/Linux/OS X write(2) 函数的手册页。如果由于操作系统的完整输出缓冲区而导致写入阻塞，您将返回 EAGAIN 或 EWOULDBLOCK 错误代码。我的猜测是，上面的“写入失败”可能是指除了“真实”错误之外的这种情况。如果您再试一次（可能只是稍晚一点，甚至立即），如果缓冲区先前已满，则写入很有可能会成功。如果 TCP 连接本身已经消失，那么除了建立新连接之外，您当然无能为力。

# php - “您的 SQL 语法错误.. 'key' 附近”

> ID：15712070
> 
> 赞同：0
> 
> 时间：2013-03-29T21:59:24.630
> 
> 标签：php, mysql

我在执行这个特定的 php 脚本时遇到错误，我不知道它可能有什么问题。

错误代码：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'key='value'' 附近使用正确的语法

php代码：

```
<?php 
include("includes/onbowlconnect.php");

$key = $_GET['key'];

$query = mysql_query("SELECT * FROM bowlvalidkeys WHERE key='$key'") or die (mysql_error());

$result = mysql_num_rows($query);

if($result == 1)
{
    echo 'GameIDkey was succesfully validated !';
}
else
{   
    echo 'GameIDkey is not valid , please try again';
}
?> 
```

有谁可以帮我离开这里吗 ？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-29T22:01:31.633

`key`是保留的[mysql关键字](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)

在键周围使用反引号

```
 SELECT * FROM bowlvalidkeys WHERE `key` ='$key' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T22:01:29.223

关键是保留的mysql字

用这个

```
$key = mysql_real_escape_string($key);
$query = mysql_query("SELECT * FROM bowlvalidkeys WHERE `key`='$key'") or die (mysql_error()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T22:01:36.480

尝试：

```
mysql_query("SELECT * FROM bowlvalidkeys WHERE 'key'='$key'") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T22:06:46.407

你会得到一个错误，因为“key”是 MySQL 中的保留字。您应该更改列的名称或在查询“key”=“$key”中对其进行转义。

此外，请务必清理您的 $_GET 变量，否则您将容易受到 SQL 注入攻击。

# android - Communication between broadcast receiver and service

> ID：15712073
> 
> 赞同：0
> 
> 时间：2013-03-29T21:59:49.673
> 
> 标签：android, service, broadcastreceiver, intentservice

I just want to know what should I look for to manage with my problem. I want to make an application which download some data from the internet and save it to file. During downloading application should receive SMS message which should contain some important data. I have service which is run from AlarmManager and I have BroadcastReceiver which can receive sms. I want to know how to send data from SMS receiver (BroadcastReceiver) to the service?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T22:07:30.190

You added an IntentService tag to the question so I assume you are using an intent service to perform the request.

What I would do in your place is to use a regular service and to host a local (not declared in the manifest) broadcast receiver inside it.

You can then perform the download in a different thread hosted in the service itself. In this way you will have access to the Service class from the broadcast recevier, and if you set the downloader thread / asynctask as an inner class you can let them communicate.

This will change a bit the behaviour of your service. You have to let it stopSelf() whereas the intentservice was self contained and dies automatically when it finishes its job.

# android - 尝试从 Android 模拟器中的应用程序访问 Internet 时出现 NetworkOnMainThreadException

> ID：15712080
> 
> 赞同：-4
> 
> 时间：2013-03-29T22:00:23.630
> 
> 标签：android

我正在尝试从我的应用程序中获取 Web 资源并收到 NetworkOnMainThreadException。当我从 Eclipse 尝试它时，它工作正常。我已`<uses-permission android:name="android.permission.INTERNET"/>`在我的 AndroidManifest.xml 文件中添加，但它仍然无法正常工作。我还添加`-dns-server 8.8.8.8`了我的运行配置设置，但仍然没有。如果我在模拟器中打开浏览器应用程序就可以了。关于可能出错/如何解决的任何其他建议？

谢谢！

> android.os.NetworkOnMainThreadException 在 android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117) 在 java.net.InetAddress.lookupHostByName(InetAddress.java:385) 在 java.net.InetAddress.getAllByNameImpl(InetAddress.java: 236) 在 java.net.InetAddress.getAllByName(InetAddress.java:214) 在 libcore.net.http.HttpConnection.(HttpConnection.java:70) 在 libcore.net.http.HttpConnection.(HttpConnection.java:50) 在libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:340) 在 libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:87) 在 libcore.net.http.HttpConnection.connect(HttpConnection.java: 128) 在 libcore.net.http.HttpEngine.connect(HttpEngine.java:311) 在 libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:316).net.http.HttpEngine.sendSocketRequest(HttpEngine.java:290) 在 libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:240) 在 libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:81) 在 org .apache.harmony.xml.parsers.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:117) at javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:155) at com.weathertest.WeatherClient.getWeather(WeatherClient.java:41 ) 在 com.weathertest.MainActivity$1.onClick(MainActivity.java:44) 在 android.view.View.performClick(View.java:4204) 在 android.view.View$PerformClick.run(View.java:17355) 在android.os.Handler.handleCallback(Handler.java:725) 在 android.os.Handler.dispatchMessage(Handler.java:92) 在 android.os.Looper.loop(Looper.java:137) 在 android.app.ActivityThread .main(ActivityThread.java:5041) at java.lang.reflect.Method.invokeNative(Native Method) at java.lang.reflect.Method.invoke(Method.java:511) at com.android.internal.os.ZygoteInit$ MethodAndArgsCaller.run(ZygoteInit.java:793) at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560) at dalvik.system.NativeStart.main(Native Method)

**更新**：Doh，我想我没有意识到在添加互联网权限后异常发生了变化。我以前从未见过因为在错误的线程上运行某些东西而引发异常，这是有道理的，你大多数时候都不想这样做，但是，一个异常，真的......

正如所指出的，这是一个很好的参考：[How to fix android.os.NetworkOnMainThreadException?](https://stackoverflow.com/questions/6343166/android-os-networkonmainthreadexception)

显然这就是 Honeycomb SDK 或更高版本的情况，可以在此处找到注意事项：http: [//developer.android.com/training/articles/perf-anr.html](http://developer.android.com/training/articles/perf-anr.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T22:08:27.433

您不得从主 UI 线程访问互联网，例如您的`onCreate()`方法。从单独的`Thread/Runnable`或发送您的互联网命令`AsyncTask`，您的`NetworkOnMainThreadException`问题将得到解决。

Android 不允许这样做，以确保您不会在长时间任务期间挂起 UI，因为它会强制您在备用线程中执行耗时的活动。

**示例**：

```
Thread thread = new Thread()
{
    @Override
    public void run() {
        talkToTheInternet();
    }
};
thread.start(); 
```

*这只是许多可能的方法之一。*

您可能希望显示 a并在完成`ProgressDialog`时关闭它。`Thread`在这个论坛上有很多这样做的例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T22:11:07.897

**android.os.NetworkOnMainThreadException**

这是大多数用户在开始开发 android 应用程序时面临的著名异常。

原因：
Android 3.x 或更高版本的设备不允许在 UI Thread 中执行网络操作，当您尝试这样做时，它会抛出异常，说您正在 UI Thread 上执行网络操作。所以你需要做的是创建一个单独的线程来执行网络操作或AsyncTask。

# javascript - 在 Chrome 的检查元素中检查 DIV 后面的 JavaScript

> ID：15712082
> 
> 赞同：3
> 
> 时间：2013-03-29T22:00:43.030
> 
> 标签：javascript, inspector

我有一个简单的关闭函数，可以关闭一个 JS 弹出窗口。问题是，我不知道在许多 javascript 文件中找到它的位置。如果我想修改它，找到它的最佳方法是什么？我在想我可以使用 Chrome 的 Inspect Element，就像我找到 CSS 一样——但我不确定如何做到这一点。有人可以帮我吗？

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T22:07:38.547

所有 JS 文件都可以位于`Sources`Chrome 开发者工具中。如果您想在运行时检查特定的片段代码，您可以`Break on`在 HTML 检查面板中设置选项。

# javascript - 快递没有找到它期望的redis结果

> ID：15712084
> 
> 赞同：1
> 
> 时间：2013-03-29T22:00:53.043
> 
> 标签：javascript, node.js, express, redis

我遵循了一个快速演示，该演示让您使用 redis 存储值，然后检索它们。当我尝试将该代码调整到我设置的 express 应用程序时，我无法获得预期的结果。

主要是，当我尝试获取的长度时，`req.online`我得到一个错误，因为它有一个空值。

使用下面的代码，我希望`req.online.length`有一些价值，但它总是`null`如此，因此会引发错误。

此粘贴中的代码确实有效（`req.online.length`例如，等于 2）： http: [//pastebin.com/w4ALpFiT](http://pastebin.com/w4ALpFiT)

此粘贴中的代码不起作用（`req.online.length`为空，尝试检查长度时抛出错误）： http: [//pastebin.com/r70juDZP](http://pastebin.com/r70juDZP)

当我使用以下命令通过 redis cli 检查时：

```
ZREVRANGEBYSCORE online +inf -inf 
```

我可以看到按预期存储的各种用户代理值。

我需要做什么才能从 redis 取回这个值并使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T11:42:15.727

问题与中间件设置的顺序有关。app.use 调用的顺序是相关的。有关详细信息，请参阅以下问题：

[Node.js / Express.js - app.router 是如何工作的？](https://stackoverflow.com/questions/12695591/node-js-express-js-how-does-app-router-work)

当您对执行顺序有疑问时，在代码中的各个位置添加一些 console.log 跟踪以了解流程很有用。

在这里，您在设置自己的中间件函数以从 Redis 获取数据之前调用 app.use(app.router)。所以 node.js 在有机会调用你的中间件函数之前路由请求。结果是在处理 get 查询时永远不会调用 zrevrangebyscore，并且未设置 req.inline。

If you define and app.use the middleware functions before calling app.use(app.router), it will work.

# kendo-ui - Kendo UI MVC 将 MultiSelect 数据值发送到 Action 方法

> ID：15712086
> 
> 赞同：5
> 
> 时间：2013-03-29T22:01:03.523
> 
> 标签：kendo-ui, kendo-grid, kendo-asp.net-mvc

Ajax Binding 上的 Kendo UI Ajax Binding 文档[描述](http://docs.kendoui.com/getting-started/using-kendo-with/aspnet-mvc/helpers/grid/ajax-binding#pass-additional-data-to-action-method)了将多个数据参数传递给 Action 方法，但它没有解决像 MultiSelect 值这样的传递数组的问题。

在下面的示例中，如果将 multisel 设置为类似“237896”的字符串，则控制器将接收到 sitesFilter="237896"。但是如果 multisel 设置为 MultiSelect 值，如下所示，控制器会收到 sitesFilter = null。

使用 MVC 包装器将所有 MultiSelect 值发送到 Action 方法的正确方法是什么？

```
 .DataSource(dataSource => dataSource
                              .Ajax()
                              .ServerOperation(false)
                              .Read(read => read.Action("Documents_Read", "Document")
                                                .Type(HttpVerbs.Post)
                                                .Data("getCriteria"))

    function getCriteria() {
    var multisel = $("#sites").data("kendoMultiSelect").value();
    return {
        sitesFilter: multisel
    };
}

    public ActionResult Documents_Read([DataSourceRequest] DataSourceRequest request, string sitesFilter=null)
    {
        return Json(GetDocuments(sitesFilter).ToDataSourceResult(request), JsonRequestBehavior.DenyGet);
    } 
```

编辑： getCriteria 应将数据转换为字符串，如下所示：

```
 function getCriteria() {
        var multisel = $("#sites").data("kendoMultiSelect").value().toString();
        return {
            sitesFilter: multisel
        }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T12:33:59.207

我的解决方案没有使用 Ajax，而是描述了将多选值传输到 Controller 的一般方式！Ajaxify 它，模型传输应该同样工作！

**.cshtml 过滤视图：**带有选择字段的表单，用于将选择的值发布到控制器。*Model.Products*是具有属性*ID*和*DisplayName*的类型*产品**列表*。

 ***```
<div class="editor-field">
    @{
        IEnumerable<Product> productSelectList = Model.Products;
        Html.Kendo().MultiSelectFor(model => model.ProductIds)
            .BindTo(new SelectList(productSelectList, "ID", "DisplayName"))
            .HtmlAttributes(new { style = "width: 400px;" })
            .Render();    
    }
</div> 
```

**Controller.cs：**动作

```
[HttpPost]
public ActionResult SearchForLicenseTerm(SearchLicenseTermFilterViewModel searchLicenseTermFilterViewModel)
{
    // Search logic
} 
```

**Model.cs：**使用的特定模型

```
public class SearchLicenseTermFilterViewModel
{
    public SearchLicenseTermFilterViewModel()
    {
        ProductIds = new List<Guid?>();
    }        
    public List<Guid?> ProductIds { get; set; }
} 
```

**在控制器操作 .jpeg 中收到 POST 数据：**您会看到 Kendo.MultiSelect 中选择条目的 GUID 填充列表

![在此处输入图像描述](../Images/49f85a04c866a87a492a5987dccf4d5f.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T14:14:28.093

var multisel = $("#sites").data("kendoMultiSelect").value(); 没有被转换为字符串。

var multisel = $("#sites").data("kendoMultiSelect").value().toString(); 解决了这个问题。***

# jquery - 在不使用预制按钮的情况下向 Facebook 发布“喜欢”

> ID：15712087
> 
> 赞同：0
> 
> 时间：2013-03-29T22:01:04.060
> 
> 标签：jquery, facebook-like, facebook-javascript-sdk

为什么这么难？

我想将我网站上的“喜欢社交插件”模拟到我的 facebook PAGE（谁有应用程序？）做这样的事情：

HTML：

```
<a href="someurl">Like</a> 
```

JS：

```
$.ajax('someurl', { data: JSON.stringify({whatever: isRequired})})
   .done(function(response) {
       //update UI
   }); 
```

我已经加载了 JS SDK，但我实际上无法用它做任何事情，因为它要求我没有也不想要的 AppId（除非有一种方法可以将应用程序链接到页面）。我完全困惑为什么这是一个如此荒谬的艰难过程。我仔细研究了所有 API 文档，但在理解这一切时遇到了问题。

**我是卡在使用他们的 blasé 按钮，还是有办法自己拨打 Facebook 电话？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T01:08:21.147

您不需要“喜欢社交插件”的 appID，

## 加载 SDK

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

## 喜欢按钮

```
<div class="fb-like" data-href="http://yourfacebookpageurlnotApp" data-send="false" data-width="450" data-show-faces="true"></div> 
```

## 喜欢盒子

```
<div class="fb-like-box" data-href="http://yourfacebookpageurlnotApp" data-width="292" data-show-faces="true" data-stream="true" data-header="true"></div> 
```

## [http://www.facebook.com/stackoverflowpage 的演示](http://jsfiddle.net/HmjEj/)

## [有关 developer.facebook.com 的更多信息](http://developers.facebook.com/docs/reference/plugins/like/)

# ios - 我可以在 UIWebView 屏幕中使用 Hiragino Kaku Gothic ProN 字体吗？

> ID：15712090
> 
> 赞同：0
> 
> 时间：2013-03-29T22:01:23.320
> 
> 标签：ios, uiwebview

我知道“Hiragino Kaku Gothic ProN”字体系列可用于标准 iOS 显示器，但我想通过 UIWebView 显示器中的 CSS 使用它。这可能吗？当我在我的“字体系列”中尝试它时，它不可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T22:11:40.133

我尝试使用 Hiragino Kaku Gothic ProN 字体，因为我看到它在 Windows 和 Mac HTML 显示器中使用过。我只需要使用 iOS 上存在的字体（例如，“HiraKakuProN-W3”）。

# scala - 将 Scala 反射与 Java 反射结合使用

> ID：15712097
> 
> 赞同：9
> 
> 时间：2013-03-29T22:01:33.777
> 
> 标签：scala, reflection, scala-java-interop

作为 DSL 的一部分，我有很多代码一直在使用 Java 反射来调用 Java 对象上的任意用户指定方法。

但是，实际上，这些 Java 对象中有很多是 Scala 对象，并且它们上的一些方法用 Scala`@deprecated`注释进行了标记。不幸的是，Java 的注解机制不能看到 Scala 的注解，并且在 Scala 2.10 之前没有方便的方法（我知道吗？）来访问这些注解。

我终于升级到 2.10，并且希望能够从我的 DSL 发出弃用警告。但是，我不想重写整个评估器（至少现在）以使用 Scala 反射，所以有没有一种方便的方法可以从 a`java.lang.reflect.Method`转到我可以使用 Scala 反射来确定 Scala 方法是否在问题已弃用？或者我是否必须使用 Scala 反射复制大量现有的方法解析逻辑才能获得该信息？

它看起来像一个`JavaToScala`曾经存在于 Scala 反射中的类，其中有一个`methodToScala`方法可以满足我的要求。我能找到的唯一痕迹是[在这里](http://code.google.com/p/dynamic-scala/source/browse/src/compiler/scala/reflect/runtime/JavaToScala.scala?spec=svn90d2bee45b25844f809f8c5300aefcb1bfe9e336&r=90d2bee45b25844f809f8c5300aefcb1bfe9e336#411)，在一个谷歌代码项目中。为什么功能从核心反射中移出？或者它仍然以不同的名称存在？

编辑：看起来有问题的代码存在于 中`scala.reflect.runtime.JavaMirrors`，但不幸的是它是私有的（还有另一个`JavaMirrors`是公共 API 的一部分，但没有提供我需要的任何东西。）我无法弄清楚如果有一条通过公共 API 调用的“路径”将我一直带到`methodAsScala`隐藏在 private 中的 private `JavaMirrors`。至少可以这么说，这令人沮丧:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-02T23:01:19.463

这是一个快速修复（感谢@EugeneBurmako）

[https://gist.github.com/xeno-by/5277805](https://gist.github.com/xeno-by/5277805)

已为此提交了一个问题（感谢@MysteriousDan）：

[https://issues.scala-lang.org/browse/SI-7317](https://issues.scala-lang.org/browse/SI-7317)

# c - argv 函数和字符串作为 C 语言中的地址

> ID：15712099
> 
> 赞同：0
> 
> 时间：2013-03-29T22:01:53.340
> 
> 标签：c, arrays, string, argv, double-pointer

问题。诸如“C Programming”之类的字符串如何编译为地址值如下？

```
 #include <stdio.h>

 void ShowAllString(int argc, char * argv[]) 
 {
     int i;
     for(i=0; i<argc; i++)
        printf("%s \n", argv[i]);
 }

 int main(void)
 {
     char * str[3]={
         "C Programming",
         "C++ Programming",
         "JAVA Programming"  };

    ShowAllString(3, str);
    return 0;
  } 
```

我的类比如下......如果可以，请纠正我。

char * argv[] 如果在参数中，则相当于 char ** argv 。所以这个函数就像 void ShowAllString(int argc, char ** argv) 接收双指针作为参数。因此，将 str 作为参数是有意义的，因为 str 是数组 char * str[3] 的名称，而 str 是此处作为数组名称的双指针。char * str[3] 是一个应该包含三个指针元素的数组....但是这些字符串而不是地址值怎么会放在 char * str[3] 旁边...这就是我卡住的地方！

请帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T22:08:31.553

当数组名称作为参数传递时，它会衰减为指针。在您的代码中，您有一个包含 3 个指针的数组。因此它衰减为指向指针的指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T22:14:59.447

在 C 中，`char[]`是一个指针，指向一个数组的`char`存储位置，一个接一个地存储在内存中。碰巧，这是存储字符串的好方法。在您的代码中，您正在创建一个包含 3 个指向`char`. 其中第一个，`str[0]`，指向`char`“C Programming”序列在内存中的存储位置，依此类推。

（在日常英语中，人们通常将“a sequence of `char`”称为“string”，但从技术上讲，正如第一条评论正确指出的那样，这意味着`char[]`根据定义必须表示一个字符串，但它不是。）

You pass a pointer to this array of pointers to the function, which then retrieves the pointers to each of the arrays of `char` ("strings"), which the `printf` line uses to get the strings (arrays of `char`) and print them.

# search - Haskell中二叉搜索树中的元素？

> ID：15712102
> 
> 赞同：-1
> 
> 时间：2013-03-29T22:02:00.647
> 
> 标签：search, haskell, binary-search-tree

如何在 Haskell 中搜索二叉搜索树中的元素？我定义了我的树：

```
 data Tree a = 
     Null | 
     L a | 
     N (Tree a) a (Tree a) 
     deriving Show 
```

我想创建一个在 BST 中搜索元素的函数：

```
 findElem :: Tree a -> a -> Maybe a
 findElem tree n = ... 
```

我怎样才能做到？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T22:41:31.927

正如评论中所建议的，您应该摆脱`L`构造函数并`N Null x Null`改用它。它将让您避免为叶节点编写不必要的特殊情况。

`findElem`然后应该看起来像这样：

```
findElem :: Ord a => Tree a -> a -> Maybe a
findElem Null _ = -- ...
findElem (N l x r) y =
    case compare x y of
        LT -> -- ...
        EQ -> -- ...
        GT -> -- ... 
```

# javascript - Javascript向String实例添加方法

> ID：15712105
> 
> 赞同：4
> 
> 时间：2013-03-29T22:02:12.513
> 
> 标签：javascript

是否可以向`String`实例添加方法，例如

```
x = "123"
x.method = function() { console.log("test") }

x.method() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T22:07:24.507

是的，你可以做到。但是，您必须首先获取字符串原语并将其设为字符串*实例*：

```
x = new String("123");
x.method = function() { console.log("test") };

x.method(); 
```

JavaScript 既有字符串原语，也有字符串实例。在您的原始代码中，当您编写时：

```
x.method = ...; 
```

...从变量中检索字符串原语`x`并提升为字符串实例，您将方法添加到该实例，但由于字符串*实例*从未存储回`x`变量，因此当您尝试调用它时该方法不存在. （是的，这*是*违反直觉的。）

通过`new String(...)`在上面使用，我实际上得到了字符串实例并将其存储在`x`. 然后，由于它是一个合适的对象，我可以向它添加属性。

您还可以向 中添加方法`String.prototype`，如下所示：

```
String.prototype.capitalize = function() {
    return this.substring(0, 1).toUpperCase() + this.substring(1);
};

console.log("testing".capitalize()); // "Testing" 
```

有些人认为这是不好的做法。其他人说这正是我们拥有原型继承的原因，因此我们可以使用原型来增强事物。虽然我从未见过人们增强的任何问题，但当人们增强时`String.prototype`我*似乎*`Array.prototype`遇到了问题（因为人们坚持[误用`for-in`](http://blog.niftysnippets.org/2010/11/myths-and-realities-of-forin.html)）和`Object.prototype`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T22:10:51.883

字符串和数字是自动装箱的原语，这意味着当您对它们执行 OO 操作时，它们会被强制转换为“String”和“Number”类，但随后会立即取消装箱。

您的代码评估为：

```
x = "123"
(new String(x)).method = function() { console.log("test") }

(new String(x)).method() // Error 
```

Your second call is failing because you are dealing with an entirely different String object. As T.J. stated, you can get around this by making `x` a String object, but this is not a common or recommended practice.

You can extend **all** strings by adding the method to `String.prototype`:

```
x = "123"
String.prototype.method = function() { console.log("test") }

x.method() 
```

This call evaluates the same way as `(new String(x)).method()` but since that method exists in the prototype, it will get called.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T22:38:35.440

You could define new properties using ECMA5

```
Object.defineProperty(String.prototype, "test", {
value: function test() { console.log('test:',this) },
  configurable: true,
  enumerable: false,
  writeable: true
}); 
```

See the complete answer: [Extending core types without modifying prototype](https://stackoverflow.com/questions/7141734/extending-core-types-without-modifying-prototype)

# php - 会话变量未保存在 iPhone 上

> ID：15712107
> 
> 赞同：0
> 
> 时间：2013-03-29T22:02:26.623
> 
> 标签：php, iphone, ajax, codeigniter, mobile-safari

**更新：**

当用户访问我的网站时，我使用 .htaccess 将用户重定向到包含所有这些文件的特定文件夹 (/var/www/html/test)。.htaccess 看起来像这样

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteRule (?!^test(/.*|)$)^(.*)$ /test/$1 [NC,L]
</IfModule> 
```

当我将所有文件移至 /var/www/html 并评论 .htaccess 行时。iphone 上的会话开始工作...我不知道为什么.. 有没有办法用 .htaccess 解决这个问题？

**---- 更新结束 -----**

我有一个调用用户登录函数的 ajax 函数，如果用户/密码正确，它会登录用户。它适用于台式机、笔记本电脑、三星 s3 手机，但不适用于 IPHONE！似乎没有在`$this->session->set_userdata('current_email', $email);`IPHONE 上设置会话，因此将用户重定向回登录页面。我猜这可能是因为 iphone safari cookie 被自动禁用或类似的东西。解决此问题的最佳方法是什么，以便它可以在手机上使用？

阿贾克斯：

```
$.ajax({
                url: site_url+"/user/login/"+email,
                type: "post",
                data: 'password='+password+'&email='+email,
                success: function(response){    
                    if(response == "success"){
                      window.location.href = site_url+"/user/invites";
                    }else{
                      alert("Password is not valid");
                    }   
                },  
                error: function(){
                }   
            }); 
```

/user/login php codeigniter 函数

```
public function login($email)
        {

                $password = $this->input->post('password');

                if($email != NULL){

                        $this->load->helper('string');
                        $this->load->model('user_model');
                        $this->load->library('session');

                        $user_status = $this->user_model->check_status($email, $password);

                        if (is_array($user_status) && $user_status['is_active']) {

                                $this->session->set_userdata('current_email', $email);
                                $this->session->set_userdata('user_id', $user_status['id']);
                                $this->session->set_userdata('unique_id', $user_status['unique_id']);
                                $this->session->set_userdata('is_active', 1);

                                echo "success"; die();
                        }

                } die();

        } 
```

/用户/邀请

```
 public function invites($unique_id = NULL)
        {

                if($this->session->userdata('current_email') != FALSE){

                        $data['unique_id'] = $this->session->userdata('unique_id');
                        $data['current_email'] = $this->session->userdata('current_email');

                        if($data['unique_id']){

                                $data['invited_users'] = $this->user_model->get_invited_users($this->session->userdata('user_id'));

                                $data['user_details'] = $this->user_model->get_user_details($this->session->userdata('user_id'));

                        $this->template->write_view('header', 'templates/header2', $data);
                        $this->template->write_view('content', 'invites', $data);

                        // Render the template
                        $this->template->render();

                }else{ 
                        redirect('welcome/index/1','refresh');
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:23:16.660

I can suggest an alternative: use the database as session handler.

You just need to enable it in the application/config/config.php file:

```
$config['sess_use_database'] = TRUE; 
```

You need a table to store the saved sessions, the manual suggests using this schema:

```
CREATE TABLE IF NOT EXISTS  `ci_sessions` (
    session_id varchar(40) DEFAULT '0' NOT NULL,
    ip_address varchar(45) DEFAULT '0' NOT NULL,
    user_agent varchar(120) NOT NULL,
    last_activity int(10) unsigned DEFAULT 0 NOT NULL,
    user_data text NOT NULL,
    PRIMARY KEY (session_id),
    KEY `last_activity_idx` (`last_activity`)
); 
```

Other than this, you don't need to do anything, all the needed queries are handled by CI automatically, no change to be done in your actual code.

**UPDATE:**

A search on google led me to [this CI forum thread](http://ellislab.com/forums/viewthread/225304/#1032914) (and [this SO answer](https://stackoverflow.com/questions/12685171/issue-with-codeigniter-sessions-on-iphone)). The cause might be safari caching the AJAX request, so you need to add a timestamp to the url and the issue should be resolved. Example:

```
var timestamp = new Date().getTime();    
$.ajax({
     url: site_url+"/user/login/"+email+"?"+timestamp, // Or use '/' instead of '?' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:55:19.217

Is the ajax call sent to an external domain ?

If so, this might have something to do with security issues. See: [http://drupal.org/node/918194](http://drupal.org/node/918194)

I have only dealt with this problem in IE, I don't know if this could happen on iOS.

So try adding the following on the ajax receiving side script:

```
<?php
header('P3P:CP="IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT"'); 
?> 
```

Note: make sure this header is put on all necessary pages and it occurs at the very beginning of your script.

# html - iframe 和位置 div 的区别

> ID：15712108
> 
> 赞同：1
> 
> 时间：2013-03-29T22:02:27.397
> 
> 标签：html, css, iframe

我对流行音乐和`iframe`.

我想显示一个窗口或`div`弹出屏幕中央以显示内容。

我的问题是，我应该使用`iframe`还是`position div`满足这种要求。

这些之间的主要区别是什么。我以为`position div`基本上会取代

`iframe`. 我对吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T22:14:25.050

A`div`和an`iframe`无论什么位置类型的`div`都是不等价的。

An`iframe`有一个`src`属性，允许它在当前页面中加载外部或其他内部 html 页面。您不能单独使用 a`div`来执行此操作。

有一些方法可以解决这个问题，但听起来你只是显示一个模式弹出窗口。在这种情况下，您应该使用`div`. 除非您需要加载外部 html，`iframe`否则这不是答案。

# php - PHP嵌套SQL查询成JSON格式

> ID：15712110
> 
> 赞同：0
> 
> 时间：2013-03-29T22:02:38.330
> 
> 标签：php, sql, json

我有一个有点复杂的 php sql 查询，我需要将其放入 JSON 中以发送回我的终端。有人可以帮忙吗？我一直在为此苦苦挣扎，似乎无法做到正确。我的代码是这样的：

```
//Grab all people living in a city, and for each of those people, grab all of their carsmodel and license plate.  My output should be something like [{"firstname":John, "lastname":Smith, "cars":[car1, car2, car3...], "plates":[plate1, plate2, ...]},{"firstname":Jack,"lastname":Hide, "cars":[car1, car2, car3], "plates":[plate1, plate2,...]}]
$sql = "SELECT id, firstname, lastname FROM residents WHERE residents.city = ?";
$q = $connection->prepare($sql);
$q->execute(array($city));

while($row = $q->fetch())
{
    $sql2 = "SELECT carid FROM cars WHERE userid = ?"
    $q2 = $connection->prepare($sql2);
    $q2->execute(array($row[0]));
    while($row2 = $q2->fetch())
    {
        // What do I do here?!
    }
}

return json_encode(//?); 
```

任何帮助都非常感谢！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T22:07:29.817

我会将获取模式设置为`PDO::FETCH_OBJ`（或`PDO::FETCH_ASSOC`）而不是使用数字。您可以在连接上执行此操作，也可以`fetch`.

```
$q2 = $connection->prepare("SELECT carid FROM cars WHERE userid = ?");
$users = array();
while ($row = $q->fetch(PDO::FETCH_OBJ)) {
    $q2->execute(array($row->id));
    $row->cars = $q2->fetchall(PDO::FETCH_OBJ);
    $users[] = $row;
}
return json_encode($users); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T22:20:54.680

在一个查询中进行：

```
SELECT id, firstname, lastname, carid -- and perhaps other cars columns here
FROM residents
INNER JOIN cars
ON cars.userid = residents.id
WHERE residents.city = ?
ORDER BY residents.id 
```

然后在 PHP 部分：

```
$data = array();
$current = array();
while($row2 = $q2->fetch())
{
    if ($current['id'] != $row[0]) {
        $data[] = $current;          
        $current = array('id' => $row[0], 'firstname' => $row[1], 'lastname' => $row[2] );
    } else {
        $current['cars'][] = array( /* row data for car */ );
    }
}
array_shift($data);
return json_encode($data); 
```

# java - IntelliJ IDEA 插件开发：保存选项卡组，持久保存并在用户请求时重新加载一组选项卡

> ID：15712116
> 
> 赞同：20
> 
> 时间：2013-03-29T22:03:03.427
> 
> 标签：java, tabs, intellij-idea, intellij-plugin

我目前正在编写一个 IntelliJ 插件。我希望能够存储/恢复一组选项卡以在不同的选项卡会话之间切换（类似于[Session Manager](https://addons.mozilla.org/de/firefox/addon/session-manager/)或[Session Buddy](https://chrome.google.com/webstore/detail/session-buddy/edacconmaakjimmfgnblocblbcdcpbko)等浏览器插件）。

因此，我基本上需要三种类型的动作：

1.  阅读打开的标签（使用哪个文件和编辑器？）
2.  将该信息永久存储为选项卡会话
3.  打开选定会话的选项卡并关闭所有其他选项卡

我查看了可用的操作：[IdeActions.java](http://git.jetbrains.org/?p=idea/community.git;a=blob;f=platform/platform-api/src/com/intellij/openapi/actionSystem/IdeActions.java;hb=HEAD) - 似乎没有我要搜索的内容。但也许我看错了地方。谁能告诉我我想要实现的目标是否可行，并给我一些正确方向的指示？

## 更新

我成功创建了插件，它在 Github 上可用：http: [//alp82.github.com/idea-tabsession/](http://alp82.github.com/idea-tabsession/)

它在官方插件存储库中可用：[Tab Session](http://plugins.jetbrains.com/plugin?pr=&pluginId=7209)。

## 更新 2

这是关于拆分窗口的后续问题：[检索和设置拆分窗口设置](https://stackoverflow.com/questions/19728469/retrieving-and-setting-split-window-settings-for-intellij-idea-plugin-developmen)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-30T13:19:51.823

# 2017 年更新

我停止支持这个插件，因为 IDEA 已经支持这个功能。您可以轻松地保存和加载上下文，如下所示：[https ://github.com/alp82/idea-tabsession#discontinued](https://github.com/alp82/idea-tabsession#discontinued)

# 更新

该插件已准备就绪，可以在 IDEA -> 设置 -> 插件中下载。源代码位于：[https ://github.com/alp82/idea-tabsession](https://github.com/alp82/idea-tabsession)

# 简答

要读取当前打开的选项卡，请使用`EditorFactory`和`FileDocumentManager`Singletons：

```
 Editor[] editors = EditorFactory.getInstance().getAllEditors();
    FileDocumentManager fileDocManager = FileDocumentManager.getInstance();
    for(Editor editor : editors) {
        VirtualFile vf = fileDocManager.getFile(editor.getDocument());
        String path = vf.getCanonicalPath();
        System.out.println("path = " + path);
    } 
```

要打开选项卡，请使用`FileEditorManager`单例（`files`作为规范路径的字符串数组）：

```
 FileEditorManager fileEditorManager = FileEditorManager.getInstance(project);
    for(String path : files) {
        System.out.println("path = " + path);
        VirtualFile vf = LocalFileSystem.getInstance().findFileByPath(path);
        fileEditorManager.openFile(vf, true, true);
    } 
```

# 长答案

## 先决条件

1.  激活插件开发、Groovy 和 UI Designer 插件
2.  新项目 -> IntelliJ IDEA 插件
3.  [将IDEA 社区版源签](http://www.jetbrains.org/pages/viewpage.action?pageId=983225)出到任何文件夹：

    ```
    git clone git://git.jetbrains.org/idea/community.git idea 
    ```

4.  [配置 IDEA SDK 并创建插件](http://confluence.jetbrains.com/display/IDEADEV/Getting+Started+with+Plugin+Development#GettingStartedwithPluginDevelopment-anchor2)

## 插件结构

创建插件后，您需要编辑位于 META-INF 文件夹中的 plugin.xml。修改`id`,`name`和`description`.

我们需要一个用于持久存储的配置文件。`mystorage.xml`在您的文件夹中创建一个文件`src`。现在是时候创建所需的文件了：

SessionComponent.java（使用`Add Project Component`向导创建它以自动创建所需的 xml 设置）：

```
@State(
    name = "SessionComponent",
    storages = {
        @Storage(id = "default", file = StoragePathMacros.PROJECT_FILE),
        @Storage(id = "dir", file = StoragePathMacros.PROJECT_CONFIG_DIR + "/mystorage.xml", scheme = StorageScheme.DIRECTORY_BASED)
    }
)
public class SessionComponent implements ProjectComponent, PersistentStateComponent<SessionState> {

    Project project;
    SessionState sessionState;

    public SessionComponent(Project project) {
        this.project = project;
        sessionState = new SessionState();
    }

    public void initComponent() {
        // TODO: insert component initialization logic here
    }

    @Override
    public void loadState(SessionState sessionState) {
        System.out.println("load sessionState = " + sessionState);
        this.sessionState = sessionState;
    }

    public void projectOpened() {
        // called when project is opened
    }

    public void projectClosed() {
        // called when project is being closed
    }

    @Nullable
    @Override
    public SessionState getState() {
        System.out.println("save sessionState = " + sessionState);
        return sessionState;
    }

    public void disposeComponent() {
        // TODO: insert component disposal logic here
    }

    @NotNull
    public String getComponentName() {
        return "SessionComponent";
    }

    public int saveCurrentTabs() {
        Editor[] editors = getOpenEditors();
        FileEditorManager fileEditorManager = FileEditorManager.getInstance(project);
        VirtualFile[] selectedFiles = fileEditorManager.getSelectedFiles();

        FileDocumentManager fileDocManager = FileDocumentManager.getInstance();
        sessionState.files = new String[editors.length];
        int i = 0;
        for(Editor editor : editors) {
            VirtualFile vf = fileDocManager.getFile(editor.getDocument());
            String path = vf.getCanonicalPath();
            System.out.println("path = " + path);
            if(path.equals(selectedFiles[0].getCanonicalPath())) {
                sessionState.focusedFile = path;
            }
            sessionState.files[i] = path;
            i++;
        }

        return editors.length;
    }

    public int loadSession() {
        closeCurrentTabs();
        FileEditorManager fileEditorManager = FileEditorManager.getInstance(project);
        for(String path : sessionState.files) {
            System.out.println("path = " + path);
            VirtualFile vf = LocalFileSystem.getInstance().findFileByPath(path);
            fileEditorManager.openFile(vf, true, true);
        }

        return sessionState.files.length;
    }

    public void closeCurrentTabs() {
        Editor[] editors = getOpenEditors();
        FileEditorManager fileEditorManager = FileEditorManager.getInstance(project);
        FileDocumentManager fileDocManager = FileDocumentManager.getInstance();
        for(Editor editor : editors) {
            System.out.println("editor = " + editor);
            VirtualFile vf = fileDocManager.getFile(editor.getDocument());
            fileEditorManager.closeFile(vf);
        }
    }

    public void showMessage(String htmlText) {
        StatusBar statusBar = WindowManager.getInstance().getStatusBar(project);
        JBPopupFactory.getInstance()
            .createHtmlTextBalloonBuilder(htmlText, MessageType.INFO, null)
            .setFadeoutTime(7500)
            .createBalloon()
            .show(RelativePoint.getCenterOf(statusBar.getComponent()), Balloon.Position.atRight);
    }

    private Editor[] getOpenEditors() {
        return EditorFactory.getInstance().getAllEditors();
    }

} 
```

我们还需要存储类：

```
public class SessionState {
    public String[] files = new String[0];
    public String focusedFile = "";

    public String toString() {
        String result = "";
        for (String file : files) {
            result += file + ", ";
        }
        result += "selected: " + focusedFile;
        return result;
    }
} 
```

组件类应该在您的 plugin.xml 中有一个条目，如下所示：

```
<project-components>
  <component>
    <implementation-class>my.package.SessionComponent</implementation-class>
  </component>
</project-components> 
```

组件类提供了所有需要的功能，但从未使用过。因此，我们需要执行加载和保存操作：

保存.java：

```
public class Save extends AnAction {

    public Save() {
        super();
    }

    public void actionPerformed(AnActionEvent event) {
        Project project = event.getData(PlatformDataKeys.PROJECT);
        SessionComponent sessionComponent = project.getComponent(SessionComponent.class);

        int tabCount = sessionComponent.saveCurrentTabs();
        String htmlText = "Saved " + String.valueOf(tabCount) + " tabs";
        sessionComponent.showMessage(htmlText);
    }

} 
```

加载.java：

```
public class Load extends AnAction {

    public Load() {
        super();
    }

    public void actionPerformed(AnActionEvent event) {
        Project project = event.getData(PlatformDataKeys.PROJECT);
        SessionComponent sessionComponent = project.getComponent(SessionComponent.class);

        int tabCount = sessionComponent.loadSession();
        String htmlText = "Loaded " + String.valueOf(tabCount) + " tabs";
        sessionComponent.showMessage(htmlText);
    }

} 
```

## Aaand...行动！

我们需要的最后一件事是选择这些操作的用户界面。简单地把它放在你的`plugin.xml`：

```
 <actions>
    <!-- Add your actions here -->
      <group id="MyPlugin.SampleMenu" text="_Sample Menu" description="Sample menu">
          <add-to-group group-id="MainMenu" anchor="last"  />
          <action id="MyPlugin.Save" class="my.package.Save" text="_Save" description="A test menu item" />
          <action id="MyPlugin.Load" class="my.package.Load" text="_Load" description="A test menu item" />
      </group>
  </actions> 
```

## Plugin Deployment

The basic functionality is ready. I will add support for multiple sessions and some other neat stuff before deploying this plugin and releasing it to the open-source community. Link will be posted here, when it's online.

# apache-flex - Flash Builder：将应用程序加载到 iPhone

> ID：15712122
> 
> 赞同：0
> 
> 时间：2013-03-29T22:03:45.647
> 
> 标签：apache-flex, testing, flash-builder, itunes

在过去的几个小时里，我一直在尝试将我的 Flex SDK/Flash Builder 应用程序加载到我的 iPhone 上。我尝试了很多东西，但似乎没有任何效果。当我将 .ipa 导入 iTunes 并尝试将其同步到我的手机时，一切正常，直到最后一刻显示无法同步“我的应用程序”。当我在 Flash Builder 中设置运行时，我将证书设置为 P12 格式的 iOS 开发人员证书，并将配置文件设置为我的 iOS 团队配置文件。

我原以为这个过程需要 5 分钟，但现在似乎已经 5 小时了。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T23:34:30.887

一周前我自己也经历过同样的事情。iOS 配置文件有两种风格

*   开发人员配置文件（用于特定测试设备上的内部或临时测试）

*   和分发配置文件（在您准备提交给 Apple 时使用）

要将 iOS 应用程序加载到您的设备上进行测试，只需确保您下载并使用开发人员配置文件（当我下载它们时，我已经开始了一个过程，其中我在配置文件的名称中包含*dist*或*dev*以便清楚哪个是哪个。

我急切地等待我的第一个批准（手指交叉应用程序，因为我得知他们也在周末批准应用程序。

祝你的应用好运。

# breeze - 微风是否支持实体框架6

> ID：15712125
> 
> 赞同：1
> 
> 时间：2013-03-29T22:03:46.630
> 
> 标签：breeze, entity-framework-6

我在 Web API 中出现了奇怪的行为。如果我用 [BreezeController] 进行装饰，则不会命中 Metadata() 中的断点。如果我删除 [BreezeController] 它会遇到断点，但显然会失败，因为该方法不存在。我正在使用 EF6 alpha 2 ... 有问题吗？

有任何想法吗？API 控制器的代码示例如下。

谢谢，特拉维斯

```
namespace Mosaic.Bio.WebApi.Controllers
{
    public class MosaicBreezeContextProvider : EFContextProvider<Entities>
    {
        public MosaicBreezeContextProvider() : base() { }

        protected override Entities CreateContext()
        {
            return new Entities(Entities.GetOracleEntityConnection(),true);
        }
    }

    [BreezeController]
    public class BreezeController : ApiController
    {
        readonly MosaicBreezeContextProvider _contextProvider = new MosaicBreezeContextProvider();     

        [HttpGet]    
        public string Metadata() 
        {        
            return _contextProvider.Metadata();   
        }     

        [HttpGet]    
        public IQueryable<COR_PERSON> CorPersons() 
        {        
            return _contextProvider.Context.COR_PERSON;    
        }     

        [HttpPost]    
        public SaveResult SaveChanges(JObject saveBundle) 
        {        
            return _contextProvider.SaveChanges(saveBundle);    
        }     

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T02:15:23.770

## 2013 年 10 月 28 日更新：

截至目前，Breeze 1.4.5 已支持 Microsoft 的 ASP.NET WebApi 2 和 Entity Framework 6。请参阅[http://www.breezejs.com/documentation/download](http://www.breezejs.com/documentation/download)。

## 旧帖...

我们还没有针对 EF 6 Alpha 进行测试……老实说，至少在他们发布 EF 6 候选版本之前不太可能这样做。

But that said, this doesn't look like an EF issue. Does this same code work with the current EF bits?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T23:30:49.997

Looks like the issue was due to EF6\. I got the source for Breeze.WebApi, updated the code to use new EF6 namespaces, and rebuilt.

All is working fine now.

Regards, Travis

# ruby-on-rails - Ruby on Rails 动态组合范围

> ID：15712130
> 
> 赞同：1
> 
> 时间：2013-03-29T22:04:07.177
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, dynamic-scope

我希望能够在运行时动态组合范围，以根据用户输入创建自定义查询。假设我有一个带有 Book 模型的库应用程序，并且定义了以下范围：`checked_out, fiction, non_fiction, overdue, and checked_out_by`.

, `last scope`,`checked_out_by`是一个以 library_user_id 作为参数的 lambda。该应用程序允许图书馆员根据用户输入运行不同类型的查询，动态组合这些范围。因此，如果图书管理员想要创建一份报告，显示所有已签出的非小说类书籍，则可以轻松执行以下操作：

```
criteria = ["non_fiction", "checked_out"]  <= array built based on what the user selected  
books = Book.scoped  
criteria.each {|criteria| books = books.send(criteria)} 
```

但是如何使用设置为 lambda 的范围来执行此操作？例如，如果用户想要创建一个查询，显示某个特定人已过期和已签出的书籍？在这种情况下，我希望条件数组包含“过期”和“checked_out_by”范围，但我不知道如何使用 lambda 范围进行设置。我试过：

```
criteria = ["non_fiction", {:checked_out_by => 6}] 
```

但这给了我一个错误，说“ `{:checked_out_by => 6} is not a symbol`”。我也试过

```
criteria = ["non_fiction", [checked_out_by, 6]] 
```

和其他一些变体，但它们都不起作用。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T22:50:42.253

您可以将参数作为第二个参数发送到`send`. 基于您的示例，您可以执行以下操作：

```
criteria = [:non_fiction, { checked_out_by: 6 }]

criteria.each do |c|
  case c
    when Hash then c.keys.each { |key| books = books.send key, c[key] }
    when Symbol then books = books.send c
  end
end 
```

或者，您可以使用`OpenStruct`代替`Hash`。

```
 criteria = [:non_fiction, OpenStruct.new(key: :checked_out_by, value: 6)]

   criteria.each do |c|
      books = case c
        when OpenStruct then books.send c.key, c.value
        when Symbol then books.send c
      end
    end 
```

或者，更好的是，创建一个具有您需要的键和值的类。

# joomla2.5 - Joomla 2.5 核心覆盖

> ID：15712132
> 
> 赞同：0
> 
> 时间：2013-03-29T22:04:09.913
> 
> 标签：joomla2.5

为了覆盖 Joomla 核心文件，我创建了一个插件。代码如下：

```
 jimport( 'joomla.plugin.plugin');

    class plgSystemComContentOverride extends JPlugin {

  public function __construct(&$subject, $config = array()) {
     parent::__construct($subject, $config);
 }

 public function onAfterRoute() {
     $app = JFactory::getApplication();
     if('com_content' == JRequest::getCMD('option') && !$app->isAdmin()) {
         require_once(dirname(__FILE__) . DS . 'comcontentoverride' . DS . 'my_content_controller.php');
     }
 } 
```

}

谁能看到为什么这不起作用或提供一些调试技巧？我什至不能断定正在访问 onAfterRoute() 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T14:43:24.830

这是一个命名约定问题。这对我来说似乎是一个反复出现的主题！在 Joomla 中似乎完全没有记录。据我所知，它需要是：plg [插件类型] [php文件名称]在骆驼情况下，使其复杂化。所以在我的例子中，它将是：

```
 class plgSystemCustomclassloader extends JPlugin 
```

文件夹中的文件是 customclassloader.xml 和 customclassloader.php

# ruby-on-rails-3 - 使用 will_paginate 和 ajax 进行双分页

> ID：15712135
> 
> 赞同：2
> 
> 时间：2013-03-29T22:04:44.713
> 
> 标签：ruby-on-rails-3, jquery, will-paginate

我正在使用 ajax 在单页中实现双分页。这个分页之一是无尽的页面，但我认为这没关系。

好吧，我的代码很简单：

控制器：

```
@products = @brand.products.search(params[:search]).paginate(:page => params[:product_page], :per_page => 3)

@comments = @brand.comments.paginate(:page => params[:comment_page], :per_page => 5) 
```

显示.html.erb

```
<%= will_paginate @comments, :param_name => 'comment_page' %>
<%= will_paginate @products, :param_name => 'product_page' %> 
```

和 show.js.erb （这是错的）

```
//Endless comment pagination
<% if params[:paginate] == 'comment_page' %>
  $("#comments").append("<%= j ( render @comments) %>");
  <% if @comments.next_page %>
    $(".pagination").replaceWith("<%= j will_paginate @comments %>");
  <% else %>
    $('.pagination').remove();
  <% end %>
<% end %>

<% if params[:paginate] == 'product_page'%>
  //Product pagination
  $('#products').html('<%= escape_javascript(render :partial => "products") %>');
  //I put this because if I didn't, ajax just works once.
  $('.pagination a').attr('data-remote', 'true');
<% end %> 
```

但是 params[:paginate] == 'comment_page' 和 params[:paginate] == 'product_page' 不起作用。

如果我不放那几行，它会起作用，但是当我对其中的一个进行分页时，另一行也会分页。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T00:31:33.260

而不是助手`:param_name`上的键，请尝试`will_paginate``:params`

```
 <%= will_paginate @comments, params: { paginate: "comment_page" } %> 
```

# msbuild - TeamCity“元素 元素下方 无法识别。”

> ID：15712136
> 
> 赞同：2
> 
> 时间：2013-03-29T22:04:47.370
> 
> 标签：msbuild, teamcity

我从 TeamCity 上的 MSBuild 任务中收到以下错误。

> `The element <ParameterGroup> beneath element <UsingTask> is unrecognized.`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T22:04:47.370

当您的项目配置为使用最新版本的 NuGet 但 TeamCity 使用的 MSBuild 版本较旧且不支持某些新的 NuGet 功能时，可能会发生这种情况。

将 MSBuild 版本和工具更改为至少 4.0

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T18:32:08.617

您的项目面向 .NET 3.5，因此要解决您需要将 TeamCity 的构建配置参数属性中的 Visual Studio 版本更新为 VS2010 或 VS2012 的问题。

[TeamCity 从 VS2008 构建到 VS2012](http://blog.paulhadfield.net/2012/12/upgrading-teamcity-build-from-vs2008-to.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-16T07:24:44.253

（已经在这里发布[https://stackoverflow.com/a/61833256/1214248](https://stackoverflow.com/a/61833256/1214248)但我再次发布。它可能会帮助这里的人，因为关于这个问题的文献几乎不*存在*！）

除了工具版本之外，您还必须尊重 XML 项目源文件中的元素位置。

所以：另一种可能性是您在元素`<UsingTask>`内部使用`<Target>`。您必须`<UsingTask>`在`<Target />`.

否则错误如下：

```
proj(2300,5): error MSB4067: L'élément "ParameterGroup" situé sous l'élément <UsingTask> n'est pas reconnu. 
```

# python - How do I upload a transcript to YouTube via the API?

> ID：15712143
> 
> 赞同：1
> 
> 时间：2013-03-29T22:05:47.277
> 
> 标签：python, youtube-api

The relevant documentation is found here: [https://developers.google.com/youtube/2.0/developers_guide_protocol_captions#Create_Caption_Track](https://developers.google.com/youtube/2.0/developers_guide_protocol_captions#Create_Caption_Track)

I've tried the following, but I simply receive an esoteric "urllib2.HTTPError: HTTP Error 401: Unknown authorization header"

```
import gdata.youtube, gdata.youtube.service, urllib2
yt_service = gdata.youtube.service.YouTubeService()
yt_service.ClientLogin("username@gmail.com","password")
yt_service.ProgrammaticLogin()
auth = yt_service.current_token.get_token_string()
url = "https://gdata.youtube.com/feeds/api/videos/VIDEO_ID/captions"
req = urllib2.Request(url, "Transcript", {'Content-Type': 'application/vnd.youtube.timedtext; charset=UTF-8', 'Content-Language:': 'en', 'Authorization': auth})
f = urllib2.urlopen(req) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:05:21.920

There's a bunch of info in [this blog post](http://apiblog.youtube.com/2011/06/youtube-google-io-all-about-captioning.html), including a link to this [sample Python script](https://code.google.com/p/gdata-samples/source/browse/trunk/gdata/captions_demo.py) for uploading captions.

# ios - iOS - CS193p - 计算器教程中的浮点数功能不起作用

> ID：15712147
> 
> 赞同：0
> 
> 时间：2013-03-29T22:06:11.873
> 
> 标签：ios

我一直在学习 iOS 开发，并遵循斯坦福视频教程 (CS193p) 和作业（准确地说是第一个作业）。基本上我已经能够完成计算器的基本功能+一些高级功能的构建，但是我无法编译浮点数，即当我输入 5.9 时它会忽略“5”。并将 9 作为数字处理。可能是什么原因？我已确保将点按钮链接到文件所有者中的 digitPressed 选项。

我的 digitPressed 操作代码如下

```
 -(IBAction)digitPressed:(UIButton *)sender
{
    NSString *digit = [[sender titleLabel] text];
    NSRange range = [[display text] rangeOfString:@"."];
    if (userIsInTheMiddleOfTypingANumber) 
    {
        if ( ! ([digit isEqual:@"."] && (range.location != NSNotFound))) {
            [display setText:[[display text] stringByAppendingFormat:digit]];
        }
    }
    else 
    {
        if ([digit isEqual:@"."]) {
            [display setText: @"0."];
        }
        else {
            [display setText: digit];
        }

        userIsInTheMiddleOfTypingANumber = YES;

    }

} 
```

提前感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T01:13:22.573

听起来好像`userIsInTheMiddleOfTypingANumber`在“。”之后被设置为 NO。被轻拍。

# c# - 通过 ComboBox 更改 RichTextBox 选择的字体大小无法正常工作

> ID：15712150
> 
> 赞同：5
> 
> 时间：2013-03-29T22:06:24.443
> 
> 标签：c#, wpf, xaml, events

我创建了一个非常简单的 WPF 窗口，其中包含一个 Grid`RichTextBox`和一个`ComboBox`. 我使用`ComboBox`更改和查找`RichTextBox`选择的字体大小。

这是我的 XAML 的代码隐藏文件：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

        // Add the font sizes.
        for (var i = 1; i < 72; i++)
        {
            FontSize.Items.Add((double) i);
        }
    }

    private void MyTextBox_SelectionChanged(object sender, RoutedEventArgs e)
    {
        // If the selection changes, update the font size in the ComboBox.
        FontSize.SelectedValue = (double) MyTextBox.Selection.GetPropertyValue(TextBlock.FontSizeProperty);
    }

    private void FontSize_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        // If the selected size changes, change the size of the selection in the RichTextBox.
        if (FontSize.SelectedItem != null)
            MyTextBox.Selection.ApplyPropertyValue(TextBlock.FontSizeProperty, FontSize.SelectedItem);
    }
} 
```

这里有两件事：

1.  `MyTextBox_SelectionChanged``ComboBox`用所选内容的字体大小更新。
2.  `FontSize_SelectionChanged`更改选择的字体大小。

您可以看到以下问题：

![在此处输入图像描述](../Images/822d0e1b9d345919168bedef6623588b.png)

当我进行选择并更改字体大小时，它会完美地改变。但是当我点击另一个字体大小不同的文本时，它又变回来了。

是什么导致了这种行为？

**编辑：**这是 XAML 文件：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <ComboBox x:Name="FontSize" HorizontalAlignment="Left" VerticalAlignment="Top" Width="497" Margin="10,10,0,0" SelectionChanged="FontSize_SelectionChanged"/>
        <RichTextBox x:Name="MyTextBox" HorizontalAlignment="Left" Height="273" VerticalAlignment="Top" Width="497" Margin="10,37,0,0" RenderTransformOrigin="0.358,0.48" SelectionChanged="MyTextBox_SelectionChanged">
            <FlowDocument>
                <Paragraph>
                    <Run Text="RichTextBox"/>
                </Paragraph>
            </FlowDocument>
        </RichTextBox>

    </Grid>
</Window> 
```

**编辑2：**这是我在调试它时所做的简短解释：

1.  有两个调试点，一个在`MyTextBox_SelectionChanged`，一个在`FontSize_SelectionChanged`。
2.  当我更改字体大小时，我单击 F5 并继续。
3.  当我单击文本的另一部分（具有默认大小）时，`MyTextBox_SelectionChanged`会调用它。`Selection.Text`是空的。
4.  然后我再次继续并在调用 时停止`FontSize_SelectionChanged`。但仍然`Selection.Text`是空的，但我的旧选择“丰富”返回到旧字体大小。

**编辑 3：**[Sams Teach Yourself WPF in 24 Hours](https://rads.stackoverflow.com/amzn/click/com/0672329859) first printing 2008 年 7 月，第 135 页，“*使文本编辑器按预期工作*”，第 9 项中提到了这个问题。我不明白那里的解释并创建了一个简短的示例来说明那个具体的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T14:32:13.080

What seems to be happening is that when you click to clear the selection, this causes your `TextBox.SelectionChanged` event handler (`MyTextBox_SelectionChanged`) to be invoked while the `Selection` represents an empty selection (i.e., just an insertion point). Your handler sets the combo box's `SelectedValue`, using the empty selection's font size, which is a perfectly reasonable thing to do even if the selection is empty. (The insertion point still has a font size.)

Changing the `SelectedValue` of course causes your `ComboBox.Selection` event handler (`FontSize_SelectionChanged`) to run. And because that event handler has no easy way to distinguish between an event caused by the user selecting a new value, and the event being caused by your code changing the `SelectedValue` property, it goes ahead and attempts to modify the selection's font size, which you probably don't want to be doing in this particular case.

Even so, you'd think it'd be OK, because the selection is empty, and you're just attempting to set its font size to be whatever its font size already is. But here's the weird thing: when you call `ApplyPropertyValue` on this empty selection, it appears to set the `FontSize` for the entire document.

所以效果是，当您单击以清除选择时，您的代码会将整个文档的字体大小设置为您单击时的字体大小。

我怀疑这是 中的一个错误`ApplyPropertyValue`，因为只有当您最初选择的文本是通过从第一个字符开始从左向右拖动来选择时才会发生。再说一次，如果将格式应用于空选择，则行为的含义并不完全清楚。因此，也许这只是调用未定义行为的情况，而不是在 WPF 中遇到明确的错误。

无论如何，解决此问题的合理方法是修改组合框更改处理程序：

```
if (FontSize.SelectedItem != null && !MyTextBox.Selection.IsEmpty)
{
    MyTextBox.Selection.ApplyPropertyValue(
        TextBlock.FontSizeProperty, FontSize.SelectedItem);
} 
```

如果选择不为空，这只会尝试更改选择的字体大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T10:41:28.860

当您选择文本，然后在菜单上更改大小时，即使您不再看到选择，您的代码仍然被选中，现在当您选择代码时，SelectionChanged 方法会在 MyTextBoxSelection 更改之前触发，（我只是猜测/相信，我想我曾经遇到过这样的问题）。现在您更改 Fontsize 并触发 Fontsize 方法，该方法访问未更新的选择，使您的最后一次更改无效。

# ruby-on-rails - Michael Hartl 的 Ruby on rails 教程 - Rspec 测试失败 - 未定义的方法 `microposts'

> ID：15712151
> 
> 赞同：0
> 
> 时间：2013-03-29T22:06:28.653
> 
> 标签：ruby-on-rails, rspec, railstutorial.org

所以我在Michael Hartl（伟大的）RoR 教程的[第 11 章。](http://ruby.railstutorial.org/chapters/following-users#top)完成第 10 章后，我决定将微博形式添加到用户的个人资料页面，这样您也可以从那里发帖，而不仅仅是从主页发帖。

我设法让它工作得很好，但它以某种方式使我的测试套件崩溃......

这是我从 Rspec 获得的错误消息，用于我的所有 User_pages_spec.rb 配置文件页面测试：

```
UserPages profile page 
     Failure/Error: before { visit user_path(user) }
     NoMethodError:
       undefined method `microposts' for nil:NilClass
     # ./app/controllers/users_controller.rb:17:in `show'
     # ./spec/requests/user_pages_spec.rb:60:in `block (3 levels) in <top (required)>' 
```

这是我的测试文件：

```
 describe "profile page" do
    let(:user) { FactoryGirl.create(:user) }
    let!(:m1) { FactoryGirl.create(:micropost, user: user, content: "Foo") }
    let!(:m2) { FactoryGirl.create(:micropost, user: user, content: "Bar") }

    before { visit user_path(user) }

    it { should have_selector('h1', text: user.name) }
    it { should have_selector('title', text: user.name) }

    describe "microposts" do
      it { should have_content(m1.content) }
      it { should have_content(m2.content) }
      it { should have_content(user.microposts.count) }
    end
  end 
```

我的用户模型中确实有 microposts 方法：

```
has_many :microposts, dependent: :destroy 
```

这是我在用户显示视图中添加的代码：

```
 <% if current_user?(@user) %>
      <section>
        <%= render 'shared/micropost_form' %>
      </section>
    <% end %> 
```

我还将 @microposts 变量添加到 UserController 中的显示操作中：

```
def show
    @user = User.find(params[:id])
    @microposts = @user.microposts.paginate(page: params[:page])
    @micropost = current_user.microposts.build
end 
```

So as everything seems to work out just fine, in development and in production, I don't understand why my tests won't pass... They passed before I added the micropost form in the user profile page...

If anybody can explain what the problem is, I would greatly appreciate the help!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T00:29:28.200

From your test specs I think you are visiting the user_path but didn't sign in any user. As a consequence current_user is nil during spec execution. You would need something like

```
before do
    sign_in(user)
    visit user_path(user)
end 
```

where `sign_in` is a function that resides (in my version of the tutorial) at spec/utilities.rb. It should be there from a few chapters before.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T22:19:03.100

I don't know rspec, but the error message is indicating that nil does not have the method microposts, meaning user is returning nil rather than an instance of User.

# java - LMAX Disruptor 如何解决典型的消息代理问题？

> ID：15712152
> 
> 赞同：2
> 
> 时间：2013-03-29T22:06:30.050
> 
> 标签：java, concurrency, middleware, messagebroker, lmax

我对[LMAX Disruptor的](http://lmax-exchange.github.com/disruptor/)*理解*是，它是一个 JAR，里面装满了可怕的快速、可怕的并发 Java 代码，每秒可以处理 2000 万条消息（如果使用正确的话）。

我们目前有一个 ActiveMQ 实例，它在整个过程中运行速度很慢，大约每秒 400 条消息。我想知道我们是否会从重构代码以使用 LMAX 中受益，但有以下担忧：

*   如何拥有 1 个发布者和多个（竞争）消费者
*   LMAX 如何存储/存放它的信息？在记忆中？
*   故障转移 - LMAX 是否有故障转移协议/机制
*   磁盘 I/O - LMAX 可以将未使用的消息保存到磁盘并在以后恢复它们吗？

而且，如果我对所有这些完全不了解，并且似乎完全误解了 LMAX Disruptors 的使用，那么有人可以提供一个具体的例子来说明何时使用它吗？提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-30T13:21:40.627

Disruptor 不是跨进程或跨服务器消息传递系统的直接替代品。它被设计为一个进程内跨线程消息传递系统。认为替换通常在它们之间具有队列的处理线程之间的依赖关系图很有用。这对于在线程之间使用管道或多播模式的设计非常有用。ActiveMQ 有不同的用途。

基于 Disruptor 的系统中的线程更像是长寿的 Actor，它们通过 Disruptor 传递事件来进行通信。

有关一些好的示例，请查看源代码提供的性能测试。

# namespaces - TCL calling a namespace variable from a proc outside the namespace

> ID：15712153
> 
> 赞同：0
> 
> 时间：2013-03-29T22:06:37.827
> 
> 标签：namespaces, tcl

I'm pretty much a newb, and I'm trying to set some variables in a namespace which use argv, and then to call them from a proc outside of the namespace, but I'm having trouble understanding how to do this. I'm trying to use some code like this (but clearly this is the wrong way to do it):

```
namespace eval Ns {
    variable spec [lindex $argv 1]
}

proc p {} {
    set spec "::Ns::spec"

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T22:22:38.617

The correct way is to use `variable`:

```
proc p {} {
    variable ::Ns::spec
    # ...
} 
```

Also possible is `upvar`:

```
proc p {} {
    upvar #0 ::Ns::spec spec
    # ...
} 
```

or (almost) like you did it:

```
proc p {} {
   set spec $::Ns::spec
   # ...
} 
```

This last possibility will not change the variable if it is changed in the proc.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:51:13.093

...Or make a call to return the value:

```
proc Ns::getspec { } {
    variable spec

    return spec;
} 
```

# jquery - 如何将子元素移动到各自的祖父母元素中

> ID：15712156
> 
> 赞同：1
> 
> 时间：2013-03-29T22:06:59.347
> 
> 标签：jquery

我是 jquery 的新手，正在使用它来熟悉这个著名的框架。我喜欢 jquery 选择器的“声明性”性质，它可以抓取一堆元素并对它们做一些事情，而无需显式地遍历每个匹配的元素，就像 SQL 一样。在探索 jquery 的过程中，我给自己提出了一些场景/挑战，看看我是否可以解决它们来测试我的理解。这是我试图用一行代码（仅使用一个分号）来解决的一个问题。

```
<div>
    <div class="parent">
        <div></div>
    </div>
</div>

<div>
    <div class="parent">
        <div></div>
    </div>
</div>

<div>
    <div class="parent">
        <div></div>
    </div>
</div> 
```

所以我的问题是这样的。我有三个`<div>`，一个嵌套在另一个内部，创建“祖父母 - 父母 - 孩子”关系。我有上述三个这样的安排（三个祖父母是彼此的兄弟姐妹）。所以我的问题是，我如何把所有的孩子都搬到他们自己的祖父母那里`<div>`？换句话说，我试图让孩子成为他们自己父母的兄弟姐妹。下图是我想要达到的结果

```
<div>
    <div class="parent">
    </div>
    <div></div>
</div>

<div>
    <div class="parent">
    </div>
    <div></div>
</div>

<div>
    <div class="parent">
    </div>
    <div></div>
</div> 
```

这是我试图无济于事的

```
$('.parent > div').appendTo($(this).parent()); 
```

我什至试过

```
$('.parent > div').appendTo($(this).parent().parent()); 
```

我想我在`$(this)`这里滥用了。我想不出一种方法来只用一条线而不使用循环。我想我可以用 .each() 循环来做到这一点，但我想尝试在没有的情况下实现它。谢谢您阅读此篇。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T22:11:13.320

您将不得不遍历它们：

```
$('.parent > div').each(function() {
    $(this).parent().after(this);
}); 
```

你也可以写：

```
$('.parent > div').each(function() {
    $(this).insertAfter($(this).parent());
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T22:28:59.133

另一个没有循环的解决方案（可能是 jquery 本身的循环）：

```
$('.parent').after(function() {
    return $('div', this);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T22:13:57.127

```
$('.parent div').each(function(){$(this).clone().appendTo($(this).parent().parent());$(this).remove()}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T22:26:03.280

好吧，到目前为止，每个答案都使用`each`了 ，这是最好的方法。但是为了简单起见，这是另一种避免显式循环的方法：

```
$('.parent > div').unwrap().parent().contents().filter(function(){return this.nodeType===3}).wrap('<div class="parent">'); 
```

（它确实在内部循环了很多，并且`filter`是一个循环，但是 jQuery 没有内置的方法来获取文本节点）

# wordpress - 如何让 Isotope Wordpress 插件 mintthemes 工作？

> ID：15712162
> 
> 赞同：0
> 
> 时间：2013-03-29T22:07:27.803
> 
> 标签：wordpress, plugins, jquery-isotope

我已经安装了 Mintthemes 的 WordPress 插件 Isotope。但我不让它工作。我在 page.php 中设置了以下代码片段，并填写了使用自定义帖子类型的可选设置。

```
<?php moveplugins_isotopes(); ?> 
```

向我的自定义帖子类型投资组合项目添加了类别，但它不起作用。

**我的代码：**

```
<?php moveplugins_isotopes(); ?>

<ul class="entrybox">
<?php 
    $args = array('post_type' => 'portfolio');
    $loop = new WP_Query($args);
?>

<?php if ($loop->have_posts()) : while ($loop->have_posts()) : $loop->the_post(); ?>

    <li class="grid_4 portfolio-post">
    <a href="<?php the_permalink(); ?>">
    <div class="thumbnail">
        <img src="<?php print IMAGES; ?>/portfolio/thumbnails/thumbnail.png" alt="Thumbnail">
    </div><!-- End .thumbnail -->
    </a>

    <div class="description">
        <h3><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h3>
        <?php the_excerpt(); ?>
    </div><!-- End div.description -->
    </li><!-- End li.grid_4 projectbox -->

<?php endwhile; ?>
<?php endif; ?>
</ul><!-- End ul.entrybox --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T17:52:57.913

问题是您的 li 没有使用 WordPress 中的 post_class 函数。它使用 post_class 来识别循环中的项目。

它应该是这样的

```
<li class="<?php post_class( array('grid_4', 'portfolio-post') ) ?>"> 
```

您可以在此处了解更多信息：http: [//codex.wordpress.org/Function_Reference/post_class](http://codex.wordpress.org/Function_Reference/post_class)

# xml-parsing - xml解析节点值

> ID：15712169
> 
> 赞同：0
> 
> 时间：2013-03-29T22:07:53.570
> 
> 标签：xml-parsing

我有一个要在 sql 中上传的 xml 文件

xml就像

```
 <catalog>
  <products>
  <product>
  <ID>0079</ID>
  <NAME>Casa</NAME>
  <feature name="material">cemento</feature>
  </product>
  </products>
  </catalog> 
```

我愿意：

```
 $xml = simplexml_load_file('prova.xml');
  $listProducts = $xml->products;
  foreach ($listProducts->product as $product)
  { 
   $name           = $product->NAME;
   $id= $product->ID;
    .................... 
```

但问题是我必须定义变量“FEATURE”

我想在我的 sql 中插入值“CEMENTO”

我能怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:14:54.320

看看它是否有效

```
$feature = $product->feature;
$featureName = $product->feature->attributes()->name; 
```

更新

```
foreach ($listProducts->product as $product)
{ 
    $name = $product->NAME;
    $id= $product->ID;

    foreach ($product->feature as $feature)
    { 
        $featureName = $feature->attributes()->name;
    } 
```

...

# objective-c - config.lua 类中的错误不是从 CCScene 继承的

> ID：15712174
> 
> 赞同：0
> 
> 时间：2013-03-29T22:08:29.153
> 
> 标签：objective-c, cocos2d-iphone, kobold2d

我的 iPhone 出现以下错误。

> config.lua 中的错误
> 
> FirstSceneClassName = 'Level1'
> 
> 此类不存在或不继承自 CCScene！

我究竟做错了什么？上周我在处理这段代码时它起作用了。

**配置文件**

```
FirstSceneClassName = "Level1", 
```

**级别1.h**

```
#import "kobold2d.h"
@interface Level1: CCLayer
{
}
@end 
```

**1级.m**

```
#import "Level1.h"
#import "HUDLayer.h"

@interface Level1 (PrivateMethods)
@end

@implementation Level1

@synthesize theMap, bgLayer, Player;

+(id) scene
{
    CCScene *scene = [CCScene node];

    HudLayer *HUD = [HudLayer node];
    [scene addChild:HUD z:2];

    Level1 *layer = [Level1 node];
    [scene addChild:layer];

    return scene;
}

- (id)init
{
    self = [super init];
    if (self != nil) {

        }

    return self;
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:55:17.817

最后发现我收到此错误，并认为我会为任何其他新的 Kobold2D 和 Cocos2D 用户分享。

我忘记将我的 Level.m 文件添加到位于以下位置的编译源中：目标应用程序 > 构建阶段 > 编译源 > 加号按钮。

希望这对其他人有帮助。

# php - 通过 ajax 将 .csv 文件发送到 PHP 文件的问题

> ID：15712181
> 
> 赞同：0
> 
> 时间：2013-03-29T22:08:51.433
> 
> 标签：php, ajax

我想知道如何将 .csv 文件从 HTML 中的文件输入容器发送到 ajax 中的另一个 .php 文件。

这是我的代码：

```
$(document).ready(function () {     
        $(".Rsubmit").click(function () {

          ?????What would I declare to contain the .csv file?
          var checkurl = './CSVRemove/getAccountsCSV.php';
          runCSVcheck(checkurl);

        });
    });

    function runCSVcheck(checkurl)
    {
      $.ajax({
        type: "POST",
        //dataType: "json",
        url: checkurl,
        data:
        {
            ???? what would I put here?
        },
        success: function(response) {
            code....
        });

    } 
```

HTML：

```
Input boxes.....

<span>Enter .csv File: </span><input type="file" name="file" value="" /> 
```

请让我知道是否有解决方案！

大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:47:24.813

如果您打算通过 Ajax 发送文件上传，我建议使用支持文件上传的 jQuery 表单插件。

有很多可用的，但我在这个方面取得了很好的成功：http: [//www.malsup.com/jquery/form/](http://www.malsup.com/jquery/form/)

它允许您通过 Ajax 发布表单，即使表单包含文件上传字段。如果通过常规表单提交发布，PHP 将完全按照正常情况接收表单发布。

或者，您可以使用 HTML5 的文件 API，但前提是您不需要支持 IE8 等较旧的浏览器。jQuery 表单插件可能是目前更安全的方式。

希望有帮助。

# javascript - 使用 get 请求将 json 对象传递给控制器 操作

> ID：15712183
> 
> 赞同：0
> 
> 时间：2013-03-29T22:09:08.277
> 
> 标签：javascript, jquery, asp.net-mvc, asp.net-mvc-4, get

我正在使用 asp.net mvc4。我有一个操作方法，它是一个 get 方法，因为它返回一个从 JavaScript/Jquery 调用的 mvc 视图。

javascript 向控制器操作发出 get 请求。我有一个想要传递给 mvc 操作的 json 对象。但是作为一个获取请求，因为我需要从中返回一个视图，所以它很难构成。

是否可以传递一个映射到控制器操作签名上的对象的 json 对象？我正在寻找可能有帮助的库，例如[http://benalman.com/projects/jquery-bbq-plugin/](http://benalman.com/projects/jquery-bbq-plugin/)

任何提示或想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T00:10:39.023

您可以使用诸如 servicestack [http://www.servicestack.net/](http://www.servicestack.net/)之类 的东西，它可以处理所有事情，并且做得很好，作为替代方案，还有 MVC API 选项，但 servicestack 在这方面做得更好。

我相信如果你看这个项目，你要么会从中得到很棒的想法，要么学会将数据驱动的代码与 UI 项目分离。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T02:11:20.650

您不需要任何外部 API 来执行此操作。您需要做的就是创建一个与 JSON 对象具有相同属性和名称的 c# 对象。例如，将对象创建为

```
public class MyObject{
    public string MyProperty1{get; set;}
    public string Property2{get; set;}
} 
```

在 jquery 中创建对象是正确的，我假设并使用 jquery 语法
，如下所示

```
$.get('@Url.Action("MyAction","MyController")',
    {myObject: jqueryObject},
    function(resp){$("#myDiv").innerHTML(resp);}); 
```

如果是 Action 使用函数声明，例如

```
public ActionResult MyAction(MyObject myObject)
{
    // your code here
    return PartialView("_MyPartialView", myModelForPartialView);
} 
```

顺便说一句，这种方式适用于 Get 和 Post。

# sql-server - 更新查询中的数据库锁定

> ID：15712185
> 
> 赞同：-1
> 
> 时间：2013-03-29T22:09:19.110
> 
> 标签：sql-server, locking

我需要你的帮助。我的表在同一秒内的选择查询超过了 1000。当我尝试在一条记录中进行更新时，“选择查询”会停止，直到进行更新。这持续长达 2-5 分钟。这张表中似乎有一些 locκs。你能帮助我吗？

谢谢你，bk

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:34:14.567

也许您的更新确实需要一些额外的字段索引。此外，请考虑将更新分成几部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T22:19:36.613

您在哪种 TransactionOption 下运行 Select 查询？如果您可以读取未提交的数据，还可以考虑在您的选择查询中使用 NO LOCK。[在 SELECT 语句中](https://stackoverflow.com/questions/210171/effect-of-nolock-hint-in-select-statements)查看 NOLOCK 提示的此线程 效果

# haskell - 手动渲染路由的 URL

> ID：15712186
> 
> 赞同：2
> 
> 时间：2013-03-29T22:09:23.980
> 
> 标签：haskell, yesod

我正在尝试呈现一个页面，其中包含一个链接，其 href 值为`"javascript:#{mySmallJsSnippet}"`，其中`mySmallJsSnippet`一些 Javascript 向当前页面添加了一个`<script>`带有`src="http://e.g.com/static/myFullJsFile.js"`.

我对此有几个问题，但主要的问题非常简单：

给定一个路由 - 例如`StaticR myFullJsFile_js`- 我如何将路由的 URL 呈现为字符串以便我可以将其嵌入`mySmallJsSnippet`？基本上，我不知道如何在我的处理程序代码中执行 Yesod 的模板渲染机制自动对每个`@{fooBaR}`.

我怀疑它与`renderRoute`and有关`joinPath`，但我没有`joinPath`正确使用。到目前为止，我最好的猜测是`App`从 Foundation.hs 导入并将其作为`joinPath`第一个参数传递——不行。

我会继续寻找，但如果能得到一些帮助会很棒，因为我相信这对于有 Yesod 经验的人来说很简单。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-30T15:34:47.630

您可以使用[`getUrlRender`](https://www.stackage.org/haddock/lts-8.5/yesod-core-1.4.32/Yesod-Core-Handler.html#v:getUrlRender)来自`Yesod.Handler`：

```
getUrlRender :: GHandler sub master (Route master -> Text) 
```

在您的情况下，它将如下所示：

```
do render <- getUrlRender  
   let renderedUrl = render $ StaticR myFullJsFile_js 
```

该函数会将您的类型安全呈现`Route`为 plain `Text`，您可以将其插入到脚本中。这样，您将失去 using 提供的正确性保证`@{ ... }`，因此仅在必要时才应使用它。

[Yesod Book](http://www.yesodweb.com/book/routing-and-handlers)中也有对这个功能的描述。

# asp.net-mvc - 无法连接和调试我的 azure 应用程序

> ID：15712191
> 
> 赞同：0
> 
> 时间：2013-03-29T22:09:48.417
> 
> 标签：asp.net-mvc, azure, visual-studio-2012, certificate, publishing

我有一个 mvc4 项目，我通过一个发布配置文件发布到天蓝色，我通过右键单击我的主项目并发布来使用该配置文件。所有这一切都很好，并且已经有一段时间了。

但是现在我需要调试应用程序，所以我安装了 azure 工具，然后根据教程，我应该在服务器选项卡的“Windows Azure Compute”下拥有我的应用程序。我不在那里有什么。

如果我选择“添加部署环境”，我可以单击一个链接，上面写着下载发布设置文件，所以我这样做了，我得到了文件。当我然后导入它时，它看起来像这样：[http ://db.tt/JkJsT3Hl](http://db.tt/JkJsT3Hl)

但是，如果我现在单击 3 个月免费试用旁边的小箭头，箭头就会消失。那里什么都没有。

我注意到我之前拥有的公共设置文件与我现在得到的这个新设置文件完全不同。我不能在这里使用旧的。

我还注意到一个新证书出现在 azure 页面上，如下所示：[http](http://db.tt/KoqNXwUp) ://db.tt/KoqNXwUp 我应该提到，在它说上传 .cer 文件之前，这是我从未做过的事情。

好吧，这就是我所知道的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T21:36:18.753

我错过了 azure 工具包附带了一个启用了模拟器（系统托盘）并创建了一个 Web 角色（右键单击项目并选择了创建 azure 角色），现在我可以在本地机器上的模拟器中进行调试，到目前为止它工作得很好.

请注意，它可能需要您以管理员身份运行 visual 才能工作。

# r - R 热图：按值排序；标签问题

> ID：15712192
> 
> 赞同：1
> 
> 时间：2013-03-29T22:09:49.373
> 
> 标签：r, ggplot2, heatmap

我希望根据 Jeromy 在[此处](https://stackoverflow.com/questions/5453336/plot-correlation-matrix-into-a-graph)的回答改进我在 R 中实现的输出（谢谢！）。我的是一个具有正负值的 31x31 矩阵，并且使用基本相同的 ggplot2 代码：

```
library(ggplot2)
library(reshape)

z<-cor(insheet3,use="complete.obs",method="kendall")
zm<-melt(z)
ggplot(zm, aes(X1,X2, fill=value)) +  geom_tile() +
scale_fill_gradient2(low = "blue",  high = "dark violet") 
```

我需要改变三件事：

1.  现在，这些行按字母倒序显示，这意味着没有可见的数据趋势。**如何影响 rows 和 columns 的顺序**，例如：

    A.（首选：）列*按相关值排序*（从负到正，反之亦然），因为它们在同一页面上的椭圆包输出中；或者

    B. 这些列是*手动排序*的，以便我可以对类似的变量进行分组？

2.  沿着底部 X 轴，我的变量名称显着重叠并且不可读。它们需要保持较长时间（即 OrthoPhos、Ammonia、Residential...），那么**如何将它们的标签旋转 90 度**？

3.  有没有办法删除每个轴上 **的“X1”和“X2”标签？**

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-16T20:35:55.863

在我称之为相关矩阵可能性的广泛/宗教 R 之旅之后，我想分享我最终将要使用的东西。另外，感谢之前的回答者；我发现对此有很多“正确”的答案。

由于我的审阅者坚持我包括数字而不仅仅是颜色，并且我远离像相关图这样更“混乱”和“忙碌”的输出，所以我终于找到了“图像”，并将我的最终输出基于[这个示例](https://stackoverflow.com/a/10681111/2225729)。谢谢@Marcinthebox。

另外为了安抚 StackOverflow，[这里是一个指向图像的链接](http://s21.postimg.org/bd4ckphkn/Sample_Image.png)，而不是图像本身。

因为其中一些规范需要一段时间才能弄清楚并且对最终输出至关重要，所以这是我的代码，尽可能缩短。

```
#Subsetting to only the vectors I want to see in the correlation, as ordered
insheet<-subset(insheet1,
    select=c("Cond", "CL", "SO4", "TN", "TP", "OrthoPhos", "DO", ...., "Rural"))

#Defining "high" and "low" colors
library(colorspace)
mycolors<-diverge_hcl(8,  h = c(8, 240), c = 80, l = c(50,100), power = 1)

#Correlating them into a matrix
sheet<-cor(insheet,use="complete.obs")

#Making it!
image(x=seq(dim(sheet)[2]), y=seq(dim(sheet)[2]), z=sheet, ann=FALSE, 
    col=mycolors,  xlab="x column", ylab="y column", xaxt='n', yaxt='n')
text(expand.grid(x=seq(dim(sheet)[2]), y=seq(dim(sheet)[2])),
    labels=round(c(sheet),2), cex=0.5)
axis(1, 1:dim(insheet2)[2], colnames(insheet2), las=2)
axis(2, 1:dim(insheet2)[2], colnames(insheet2), las=2)
par(mar=c(5.5, 5.5, 2, 1)) #Moves margins over to allow for axis labels 
```

一旦错误被抑制，我还能够循环输出多个 .wmf 文件。太糟糕了，我也无法想象显着的 p 值......另一次。谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-30T04:41:34.657

我假设您的意思是第 1 点的“聚类”。？对于此类任务，我更喜欢包中的`heatmap.2()`功能`gplots`，它提供了各种集群选项。

对于第 2 点和第 3 点：该`heatmap.2()`函数还将处理 90º 旋转和标签，因为它使用数据矩阵而不是数据表作为输入。

# python - Django 不允许我保存用户对象

> ID：15712197
> 
> 赞同：1
> 
> 时间：2013-03-29T22:10:13.533
> 
> 标签：python, django, django-models, python-2.7

当我打电话时`User.create_user`，我收到以下错误：

```
IntegrityError at /login
users_user.status_id may not be NULL 
```

注意：我查看了其他关于 SO 的 IntegrityError 问题，但无法解决此问题。

我的模型如下所示：

```
class Status(models.Model):
    status = models.CharField(max_length=200)
    status_time = models.DateTimeField('date published')

    def __init__(self, status = '', time=timezone.datetime.min, *args, **kwargs):
        self.status = status
        self.status_time = time
        super(Status, self).__init__(*args, **kwargs)

    def set_status(self, s):
        self.status = s
        self.status_time = timezone.datetime.now()
        self.save()

    def get_status(self):
        now = timezone.datetime.now()
        if now-self.status_time<datetime.timedelta(minutes=15):
            return self.status
        return None

class User(models.Model):
    facebook_id = models.CharField(max_length=200)
    friends = ListField()
    status = models.OneToOneField(Status)

    @classmethod
    def create_user(cls, fid, friends):
        k = User()
        k.facebook_id = fid
        k.friends = friends
        k.save() #THE PROBLEM IS HERE
        k.status = Status()
        k.status.set_status('')
        k.status.save()
        k.save() 
```

我也不明白 User.status_id 代表什么。为什么它在那里，为什么它不在那里`None`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T22:12:12.237

您的问题是您将用户保存为未创建状态。先创建一个状态，然后就可以保存用户了：

```
 def create_user(cls, fid, friends):
        k = User()

        k.status = Status()
        k.status.set_status('') # set_status saves the status

        k.facebook_id = fid
        k.friends = friends
        k.save() 
```

或者更好：

```
 def create_user(cls, fid, friends):
        status = Status()
        status.set_status('')
        User.objects.create(facebook_id=fid, friends=friends, status=status) 
```

在惯用的 django 代码中，类似的方法`create_user`应该在模型的管理器上：

```
class UserManager(models.Manager):
    def create_user(self, fid, friends):
        status = Status()
        status.set_status('')
        return self.create(facebook_id=fid, friends=friends, status=status)

class User(models.Model):
    facebook_id = models.CharField(max_length=200)
    friends = ListField()
    status = models.OneToOneField(Status)

    objects = UserManager() 
```

然后你这样称呼它：

```
new_user = User.objects.create_user(fid, friends) 
```

然后你注意到你可能已经使用了 builtin `objects.create`，如果只有一个默认状态：

```
# A custom manager is no longer needed

class User(models.Model):
    facebook_id = models.CharField(max_length=200)
    friends = ListField()
    status = models.OneToOneField(Status)

    def save(self, *a, **kw):
        # if this user doesn't have a status yet, create an empty one
        if self.status is None:
            self.status = Status()
            self.status.set_status('')

        super(User, self).save(*a, **kw)

# creating users:

new_user = User.objects.create(facebook_id=fid, friends=friends)

# status is set to an empty one automatically in save 
```

# jquery - 如果包装在其他函数中，则仅在窗口调整大小时调用函数

> ID：15712198
> 
> 赞同：0
> 
> 时间：2013-03-29T22:10:23.753
> 
> 标签：jquery, function, resize

我有一个垂直居中网站的功能：

```
 function centerWebsite(){
        $vpheight = $(window).height();
        $headerheight = $('header').height();
        $contentheight = $headerheight + $('#content').height();
        $margin = Math.floor(($vpheight - $contentheight)/2);

        $logospacing = $('#logo').css('margin-top');

        if($vpheight > ($contentheight + $logospacing)) {
            $margin = $margin - $logospacing;
        }

        $extendedmargin = $headerheight + $margin;

        $('html').height($vpheight);
        $('body').height($vpheight);
        $('header').css('padding-top', $margin);
        $('#content').css('padding-top', $extendedmargin);
        $('#gallerynav').css('padding-top', $extendedmargin);
    } 
```

当页面准备好时应该调用这个函数：

```
$(document).ready(centerWebsite()); 
```

每次调整窗口大小时，我都想调用相同的函数。我试着这样做：

```
$(window).resize(centerWebsite()); 
```

但这行不通。解决方案是：

```
$(window).resize(function() {
    centerWebsite();
}); 
```

我真的需要创建一个函数来调用另一个函数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T22:11:49.027

通过包含括号，您正在执行函数调用。您希望将函数作为参考传递，在这种情况下，您应该传递变量 - 不带括号。

```
$(document).ready(centerWebsite); 
```

如果你在你的`centerwebsite()`函数中添加一个 console.log，你会看到当你调用它时它实际上被调用了`$(document).ready(centerWebsite());`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T22:12:22.700

删除括号：

```
$(window).resize(centerWebsite); 
```

EDIT NOTE: review this question for some information on callbacks: [What are jQuery hooks and callbacks?](https://stackoverflow.com/questions/6735250/what-are-jquery-hooks-and-callbacks)

# ruby-on-rails - not sure whether to create new models

> ID：15712199
> 
> 赞同：1
> 
> 时间：2013-03-29T22:10:25.193
> 
> 标签：ruby-on-rails

I'm making an app with Rails that, among other things, allows certain types of professionals to create an online profile. So there is an 'association' between the User and Profile model. I created the Profile model so that I can basically restrict the User model to name and registration information, and keep profile information elsewhere (i.e. 'normalize' the db as I think it's called)

However, these profiles (as is often the case, on LinkedIn, for example) contain a lot of information. For example, there will be a section for Work Experience that sometimes looks like this, where a user can add many different work experiences.

![enter image description here](../Images/58b020783f16776dd0f2307a768a0bda.png)

and then something similar for education

![enter image description here](../Images/721732a0ff159dff3ad05e833a24eaaa.png)

And many other different types profile information. Note also, that the ability to add to and edit these discrete categories takes place in separate forms. I can add to my work experience without touching education.

My question is, should I try to store all of this information in my Profile model? Or, would you, for example, create a WorkExperience model and do something like Profile :has_many work_experiences? and something similar with EducationExperience, or is there even another way to do it?

One of my concerns is queries on the DB. For example, in terms of performance, is there going to be much of a difference if, in the show action of the Profile controller, I do queries for WorkExperience.all, Education.all rather than storing all the information in the Profile model?. Another concern is just general code organization for profiles that can become quite large.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T22:19:07.887

You'll have the cleanest code (and decent performance) by splitting out something like Experience (which will belong_to Profile), along with a type column that determines whether it's "work" experience, "education" experience, etc. That's the approach I would take, unless the different types of experience have vastly different columns.

# php - 如何从 PHP 中的类中获取所有私有 var 名称？

> ID：15712201
> 
> 赞同：3
> 
> 时间：2013-03-29T22:10:44.397
> 
> 标签：php

`get_class_vars`获取所有公共变量，但我想访问私有变量。

我是从父类做的，试图让子类变量......

```
class A
{
    function getvars()
    {
        /* get private vars from child */
    }
}

class B extends A
{
    private $name;
} 
```

还有另一种方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T22:16:59.613

我建议使用 PHP 的 ReflectionClass。特别是`getProperties()`通话。

这是PHP文档：

[http://www.php.net/manual/en/reflectionclass.getproperties.php](http://www.php.net/manual/en/reflectionclass.getproperties.php)

作为样本：

```
class A
{
    function getvars()
    {
        $reflection = new ReflectionClass($this);
        $vars = $reflection->getProperties(ReflectionProperty::IS_PRIVATE);
        var_dump($vars);
    }
}

class B extends A
{
    private $name;
} 
```

另请注意，您可以更改 getProperties 方法上的过滤器或完全省略它（这里我只显示了私有过滤器）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T22:35:28.330

使用 ReflectionClass 将它们放入数组中。然后你可以做任何你想做的事。在屏幕上打印他们的名字的示例代码。

```
class TestPrivate {

public $var1;
public $var2;
public $var3;
private $var4;
private $var5;
public $var6;

public function getPrivateVars() {
     $reflect = new ReflectionClass(__CLASS__);
     $vars   = $reflect->getProperties(ReflectionProperty::IS_PRIVATE);

     foreach ($vars as $privateVar) {
         echo $privateVar->getName() . "<br />";
            }               

        }
    }   

$instance = new TestPrivate();
$instance->getPrivateVars(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T22:14:03.267

如果需要，将其声明为受保护，这样您就可以直接访问父类和扩展类中的属性。

另一种方法是在引入此属性的类中定义受保护/公共 getter/setter 函数。

最难的是在父类中使用[`ReflectionObject`](http://www.php.net/manual/en/class.reflectionobject.php)on`$this`来获取私有属性列表并[更改它们的可访问性](http://www.php.net/manual/en/reflectionproperty.setaccessible.php)

# tomcat - 将参数传递给 Tomcat Servlet

> ID：15712205
> 
> 赞同：1
> 
> 时间：2013-03-29T22:10:54.960
> 
> 标签：tomcat, web-config, tomcat7, config

我正在使用 tomcat 7 构建一个 Web servlet，作为它的一部分，它访问一个 RESTful API。目前，该 URL 在我的 servlet 中被硬编码为字符串，但我想将其移出，以便在 servlet 完成后，我可以传入 servlet 应该连接的 URL，而不是硬编码。最好的方法是什么？我读过我应该在 META-INF 文件夹中添加一个 context.xml 文件，但这是否意味着如果我想更改 API 的 URL，我需要重新打包战争？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:27:11.987

使用 init-param 将 servlet 的配置扩展为标准 web.xml 文件：

```
<servlet>
    <servlet-name>My servlet</servlet-name>
    <servlet-class>com.foo.bar.MyServlet</servlet-class>
    <init-param> 
        <description>Restful API URL</description> 
        <param-name>restfulApiUrl</param-name> 
        <param-value>http://www.foo.com/api/</param-value> 
    </init-param> 
</servlet> 
```

并从您的 servlet 初始化方法访问它：

```
private String restulApiUrl;

@Override
public void init(ServletConfig config) throws ServletException {
    restulApiUrl = config.getInitParameter("restfulApiUrl");
} 
```

这确实会迫使您在更改值时重新打包战争，除非您将应用程序部署为爆炸战争。

您当然可以想象许多其他解决方案：使用系统属性（在 Tomcat 启动时传递），将其存储在启动时读取的文件中，将其存储在数据库中等。

# xml - 选择 JSON 或 XML

> ID：15712206
> 
> 赞同：-1
> 
> 时间：2013-03-29T22:11:01.207
> 
> 标签：xml, json, asp.net-web-api

使用 Web Api，我如何允许用户选择是从 Web 服务返回 JSON 还是 XML？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T22:36:49.250

开箱即用的 Web API 允许客户端选择他们想要从服务器返回的格式。他们可以发送：

```
Accept: application/json 
```

在 HTTP 标头中获取 JSON，并且：

```
Accept: application/xml 
```

取回 XML。如果未指定 Accept 标头，则 JSON 是默认值。

这称为内容协商，您可以在此处了解更多信息：

[http://www.asp.net/web-api/overview/formats-and-model-binding/content-negotiation](http://www.asp.net/web-api/overview/formats-and-model-binding/content-negotiation)

# python - Python 3.2 Lambda 语法错误

> ID：15712210
> 
> 赞同：27
> 
> 时间：2013-03-29T22:11:19.003
> 
> 标签：python, lambda, syntax-error

```
def sort_dictionary( wordDict ):
    sortedList = []
    for entry in sorted(wordDict.iteritems(), key = lambda (k, v): (-v, k) ):
        sortedList.append( entry )

    return sortedList 
```

该函数将接收包含以下信息的字典： { 'this': 1, 'is': 1, 'a': 1, 'large': 2, 'sentence': 1 } 我想让它生成列表的列表，其中元素首先按字典的值从最大到最小排序，然后按字母顺序排列。

该函数在使用 python 2.7.2 运行时工作正常，但我收到错误：

```
 File "frequency.py", line 87
    for entry in sorted(wordDict.iteritems(), key = lambda (k, v): (-v, k)):
                                                           ^
SyntaxError: invalid syntax 
```

当我用 python 3.2.3 运行程序时。我一直在寻找原因，或者 2.7 和 3.2 之间的语法差异，但一无所获。任何帮助或修复将不胜感激。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-03-29T22:13:56.697

Python3 中不允许使用括号来解包 lambda 中的参数。原因见[PEP 3113](http://www.python.org/dev/peps/pep-3113/)。

```
lambda (k, v): (-v, k) 
```

而是使用：

```
lambda kv: (-kv[1], kv[0]) 
```

# wysihtml5 - 如何停用 Bootstrap-wysihtml5 jquery 编辑器实例？

> ID：15712214
> 
> 赞同：3
> 
> 时间：2013-03-29T22:11:45.183
> 
> 标签：wysihtml5

我正在使用 Bootstrap-wysihtml5 jquery 插件（[https://github.com/jhollingworth/bootstrap-wysihtml5/](https://github.com/jhollingworth/bootstrap-wysihtml5/)）将文本区域转换为所见即所得。我希望能够通过单击 2 个按钮来激活和停用编辑器，到目前为止我可以显示编辑器，请你告诉我如何停用编辑器并只留下 textarea 及其值。我的代码如下： -

HTML

```
<textarea name="textarea" id="textarea" cols="45" rows="5"></textarea>

<input type="button" id="button1" value="Show Editor"> 
<input type="button" id="button2" value="Hide Editor"> 
```

脚本

```
$("#button1").click(function(){
$('textarea').wysihtml5();
});

$("#button2").click(function(){
// this is where i'm stuck
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-02-25T12:40:23.697

A few lines of custom JS code. I think they can help you.

```
var content = $('#content');
var contentPar = content.parent()
contentPar.find('.wysihtml5-toolbar').remove()
contentPar.find('iframe').remove()
contentPar.find('input[name*="wysihtml5"]').remove()
content.show() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-09T15:04:27.677

我在尝试禁用/隐藏工具栏和编辑器时遇到了同样的问题，并且幸运地使用了以下命令（禁用编辑器）。我正在使用版本 wysihtml5-0.3.0_rc2.js)

```
$('#editorId').data('wysihtml5').editor.composer.disable();
$('#editorId').data('wysihtml5').editor.composer.enable(); 
```

或（隐藏编辑器）

```
$('#editorId').data('wysihtml5').editor.composer.hide();
$('#editorId').data('wysihtml5').editor.composer.show(); 
```

要对工具栏执行相同操作，请执行以下操作来隐藏/显示（找不到禁用工具栏的 wat）：

```
$('#editorId').data('wysihtml5').editor.toolbar.hide();
$('#editorId').data('wysihtml5').editor.toolbar.show(); 
```

# javascript - 滑动js自定义宽度

> ID：15712225
> 
> 赞同：1
> 
> 时间：2013-03-29T22:12:42.107
> 
> 标签：javascript, jquery, css, jquery-mobile, swipe

使用移动设备的 swipe js，我不知道如何显示两个 div 而不是一个。

[现场样品在这里](http://jsfiddle.net/dZ6Q8/)

**CSS**

```
 body {
    font-family: arial;
}
.swipe {
  overflow: hidden;
  visibility: hidden;
  position: relative;  
}
.swipe-wrap {
  overflow: hidden;
  position: relative;
}
.swipe-wrap > div {
  font-size: 90px;
  font-weight: bold;
  float:left;
  width: 100%;
  position: relative;
} 
```

**HTML**

```
<div id='mySwipe' class='swipe'>
  <div class='swipe-wrap'>
    <div>0</div>
    <div>1</div>
    <div>2</div>
    <div>3</div>
    <div>4</div>
    <div>5</div>
    <div>6</div>
    <div>7</div>
    <div>8</div>
    <div>9</div>
    <div>10</div>
    <div>11</div>
    <div>12</div>
    <div>13</div>
    <div>14</div>
  </div>
</div>

<div>
  <button class='prev' onclick='mySwipe.prev()'>prev</button> 
  <button class='next' onclick='mySwipe.next()'>next</button>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T22:28:57.903

很简单，你这样作弊：http: [//jsfiddle.net/Gajotres/tFFAt/](http://jsfiddle.net/Gajotres/tFFAt/)

**HTML 更改：**

```
<div id="projects">
    <div id='mySwipe' class='swipe'>
      <div class='swipe-wrap'>
          <div>
            <div>0</div>
            <div>1</div>              
          </div>
          <div>
            <div>2</div>
            <div>3</div>           
          </div>
          <div>
            <div>4</div>
            <div>5</div>            
          </div>
          <div>
            <div>6</div>
            <div>7</div>            
          </div>
          <div>
            <div>8</div>
            <div>9</div>            
          </div>
          <div>
            <div>10</div>
            <div>11</div>           
          </div>          
          <div>
            <div>12</div>
            <div>13</div>       
          </div> 
          <div>
            <div>14</div>         
          </div> 
      </div>
    </div> 
```

**CSS更改：**

```
.swipe-wrap div div {
    display: inline-block;
    width: 48%;    
} 
```

# node.js - 猫鼬试图打开未关闭的连接

> ID：15712226
> 
> 赞同：38
> 
> 时间：2013-03-29T22:12:52.053
> 
> 标签：node.js, mongodb, mongoose

这是问题的简化版本，但基本上我正在尝试使用 mongoose 打开 2 个 mongodb 连接，它给了我“尝试打开未关闭的连接”。错误。

代码示例：

```
var db1 = require('mongoose');
db1.connect('my.db.ip.address', 'my-db');

var db2 = require('mongoose');
db2.connect('my.db.ip.address', 'my-db');

db2.connection.close();
db1.connection.close(); 
```

知道如何使它工作吗？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-04-07T13:25:51.257

`connect()`打开到数据库的默认连接。由于您需要两个不同的连接，请使用`createConnection()`.

API 链接： http: [//mongoosejs.com/docs/api.html#index_Mongoose-createConnection](http://mongoosejs.com/docs/api.html#index_Mongoose-createConnection)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-19T15:21:24.990

要添加 Raghuveer 答案：

我还要提一下，不要直接使用猫鼬（您可能以这种方式使用它，最终会出现在这篇文章中）：

```
require('mongoose').model(...); 
```

您将使用返回的连接：

```
var db = require('mongoose').connect('xxx', 'yyy');
db.model(...); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-12-31T12:30:54.423

我在运行测试时遇到了这个问题。

这就是我为解决它所做的。

```
//- in my app.js file.
try {
    mongoose.connect('mongodb://localhost/userApi2'); //- starting a db connection
}catch(err) {
    mongoose.createConnection('mongodb://localhost/userApi2'); //- starting another db connection
}
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-05-24T01:45:15.877

我在使用 进行单元测试时遇到了这个问题`mocha`。

当我添加第二个测试时出现问题，因为`beforeEach`被调用了两次。

我已经用这段代码解决了这个问题：

```
const mongoose = require('mongoose');
describe('Your test suite', () => {
    beforeEach( () => {
        if (mongoose.connection.db) {
            return; // or done();
        } else {
            // connect to mongodb
    });

    describe('GET /some-path', () => {
       it('It should...', () => {

       });
    });

    describe('POST /some-path', () => {
       it('It should...', () => {

       });
    });
}); 
```

希望对你有帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-23T11:44:49.290

您正在尝试第二次打开默认连接（尚未关闭）。

改为执行以下操作

```
var db = require('mongoose'); //note only one 'require' needed.
var connectionToDb1 = db.createConnection('my.db1.ip.address', 'my-db1');
var connectionToDb2 = db.createConnection('my.db2.ip.address', 'my-db2'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-17T15:42:38.437

使用[mongoose.disconnect(fn)](http://mongoosejs.com/docs/api.html#index_Mongoose-disconnect)：

```
mongoose.disconnect(() => {

  // here it would be possible "reset" models to fix 
  // OverwriteModelError errors
  mongoose.models = {};

  // here comes your logic like registering Hapi plugins
  server.register(somePlugin, callback);
}); 
```

我发现这个问题输入了错误消息，尽管我的问题有点不同，但我相信它可能对使用 Hapi 的人有用。更具体地说[Hapi](https://hapijs.com/) + [rest-hapi](https://jkheadley.github.io/rest-hapi/) + [mocha](https://mochajs.org/)。

`mocha`使用选项运行时，`--watch`我同时面临：`OverwriteModelError`和`Error: Trying to open unclosed connection errors`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-05-26T12:56:42.417

> 简单的解决方案 -

```
 Use mongoose.createConnection() instead of  mongoose.connect()

    Its occurs because of version issue 
```

# javascript - 这个递归是如何工作的？

> ID：15712230
> 
> 赞同：5
> 
> 时间：2013-03-29T22:13:13.390
> 
> 标签：javascript, algorithm, recursion

这是 Eloquent Javascript 的一个例子：

> 通过从数字 1 开始，反复加 5 或乘以 3，可以产生无限数量的新数字。你将如何编写一个函数，给定一个数字，试图找到产生该数字的一系列加法和乘法？

我无法理解递归是如何在这里工作的，想知道是否有人可以写出几次 find 是如何被调用的或其他一些解释。

```
function findSequence(goal) {
  function find(start, history) {
    if (start == goal)
      return history;
    else if (start > goal)
      return null;
    else
      return find(start + 5, "(" + history + " + 5)") ||
             find(start * 3, "(" + history + " * 3)");
  }
  return find(1, "1");
}

console.log(findSequence(24)); // => (((1 * 3) + 5) * 3) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-29T22:19:32.353

该函数使用[*回溯*](http://en.wikipedia.org/wiki/Backtracking)运行一个相当简单的*[蛮力搜索](http://en.wikipedia.org/wiki/Brute-force_search)*：在每个调用级别，它尝试添加到数字，并查看是否从结果数字开始让您到达目标。如果是，则返回结果；否则，该数字将乘以，然后从该新数字继续搜索目标。随着递归的进行，产生数字的表达式的文本表示被传递到下一个调用级别。[](http://en.wikipedia.org/wiki/Backtracking)*`5``3`*

 *搜索`14`如下：

```
(1,  "1")
(5,  "1+5")
(10, "(1+5)+5")
(15, "((1+5)+5)+5") <<= Fail
(30, "((1+5)+5)*3") <<= Fail
(15, "(1+5)*3") <<= Fail
(3,  "1*3")
(8,  "(1*3)+5")
(13, "((1*3)+5)+5")
(18, "(((1*3)+5)+5)+5") <<= Fail
(39, "(((1*3)+5)+5)*3") <<= Fail
(24,  "((1*3)+5)*3") <<= Fail
(9, "(1*3)*3")
(14, "((1*3)*3)+5) <<= Success! 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T22:37:57.333

您只需创建调用树即可解决此问题：

```
findSequence(24)
    find(1, "1")
       find(1 + 5, "(1 + 5)")
           find(6 + 5, "((1 + 5) + 5)")
               find(11 + 5, "(((1 + 5) + 5) + 5)"
                   find(16 + 5, "((((1 + 5) + 5) + 5) + 5)"
                       find(21 + 5, "(((((1 + 5) + 5) + 5) + 5) + 5)"
                          start > goal: return null
                       find(21 * 3, "(((((1 + 5) + 5) + 5) + 5) + 5)" 
                          start > goal: return null
                   find(16 * 3, "((((1 + 5) + 5) + 5) * 3)"
                       start > goal: return null
               find(11 * 3, "(((1 + 5) + 5) * 3)"
                   start > goal: return null
           find(6 * 3, "((1 + 5) * 3)")
               find(18 + 5, "(((1 + 5) * 3) + 5)")
                   find(23 + 5, "((((1 + 5) * 3) + 5) + 5)")
                       start > goal: return null
                   find(23 * 3, "((((1 + 5) * 3) + 5) * 3)")
                       start > goal: return null
               find(18 * 3, "(((1 + 5) * 3) * 3)")
                   start > goal: return null
       find(1 * 3, "(1 * 3)") 
           find(3 + 5, "((1 * 3) + 5)")
               find(8 + 5, "(((1 * 3) + 5) + 5)")
                   find(13 + 5, "((((1 * 3) + 5) + 5) + 5)")
                       find(18 + 5, "(((((1 * 3) + 5) + 5) + 5) + 5)")
                           find(23 + 5, "((((((1 * 3) + 5) + 5) + 5) + 5) + 5)")
                               start > goal: return null
                           find(23 + 5, "((((((1 * 3) + 5) + 5) + 5) + 5) + 5)")
                               start > goal: return null
                       find(18 * 3, "(((((1 * 3) + 5) + 5) + 5) * 3)")
                           start > goal: return null
                   find(13 * 3, "((((1 * 3) + 5) + 5) * 3)")
                       start > goal: return null
               find(8 * 3, "(((1 * 3) + 5) * 3)")
                   return "(((1 * 3) + 5) * 3)"
           find(3 * 3, "((1 * 3) * 3)")
               find(9 + 5, "(((1 * 3) * 3) + 5)")
                  find(14 + 5, "((((1 * 3) * 3) + 5) + 5)")
                      find(19 + 5, "(((((1 * 3) * 3) + 5) +5) + 5)")
                         return "(((((1 * 3) * 3) + 5) +5) + 5)"
                      find(19 * 3, "((((1 * 3) * 3) + 5) *3)")
                          start > goal: return null
               find(9 * 3, "(((1 * 3) * 3) * 3)")
                    start > goal: return null 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T22:19:01.433

简单来说，`find(start,goal)`只要`goal`没有达到值就会递归调用。在每次调用中，当前数字将乘以 3 或增加 5。`history`变量存储执行操作的字符串。当前操作在每次迭代中附加到该字符串。

解释：

```
function findSequence(goal) {

  // This inner function will be called recursively.
  // 'history' is a string with the current operations "stack"
  function find(start, history) {
    if (start == goal)           // if goal is achieved, simply return the result
                                 // ending the recursion
      return history;
    else if (start > goal)       // return null to end the recursion
      return null;
    else
      // One of the 'find' calls can return null - using ||
      // ensures we'll get the right value.
      // Null will be returned if 'start+5' or 'start*3' is
      // greater than our 'goal' (24 in your example).
      // The following line is where a recursion happens.
      return find(start + 5, "(" + history + " + 5)") ||
             find(start * 3, "(" + history + " * 3)");
  }

  // Start with '1'
  return find(1, "1");
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-29T22:20:38.940

了解这一点的最佳方法是跟踪 JavaScript 调试器中的代码。

你以前用过调试器吗？这真的很有趣，很有启发性，也很容易。

只需`debugger;`在您希望代码停止的地方添加一条语句。一个好地方就在你打电话之前`findSequence()`：

```
debugger;
console.log(findSequence(24)); 
```

现在在打开开发者工具的情况下在 Chrome 中加载您的页面。`debugger;`您的代码将在该行停止。找到让您进入代码的按钮（在 Watch Expressions 面板的右上方）。单击该按钮以进入`findSequence()`通话。每次单击它，它都会进入下一行代码，其中包括进入每个递归调用。

每当代码停止时，您可以将鼠标悬停在任何变量上以查看它，或查看右侧面板中的变量。还有一个调用堆栈可以准确地显示你在递归调用中的位置。

我相信有人可以向您解释递归，但是如果您通过在调试器中逐步执行代码来实际体验它，您将学到更多。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-29T22:17:10.877

此函数从 1 开始，然后尝试将 5 添加到它或将其乘以 3。如果等于目标，则函数终止并打印出找到的表达式。如果不是，它会使用该级别的值递归调用自身，直到找到匹配项或直到值变得太高。

这有帮助吗？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-29T22:17:57.397

> 有人可以写出几次 find 是如何被调用的。

干得好：

```
find(1, "1") -> find(3, "(1 * 3)")
             -> find(8, "((1 * 3) + 5)")
             -> find(24, "(((1 * 3) + 5) * 3)") 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-29T22:19:19.873

想想像二叉树一样加 5 和乘以 3 的无限组合。顶部是最容易计算的数字`1`（实际上是“无需步骤”的答案）。下一层，左边是`1+5`，右边是`1*3`。在每个级别，方程解析为一个新值（具有更复杂的历史）。这个等式在该树中导航，直到找到一个等于`goal`. 如果树的分支上的节点产生的值大于您的目标，则它返回 null （从而停止该分支的进一步回避，这是因为这两个操作都只会增加该值，因此一旦您最终大于没有点继续查找），如果一个节点的值等于目标，那么它作为答案返回（连同它用来到达那里的路径）。当该值小于时，两条路径都可能保留答案，因此它在每个路径上调用 find。这就是 JavaScript 的“真实”布尔逻辑的用武之地。通过使用`||`(OR) 运算符，JavaScript 将首先查看`+5`树的一侧。如果返回 0 或 null，则将执行另一个调用（向下看`*3`）。如果任何回报评估为非`false`值然后它将返回堆栈并且搜索将结束。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-03-29T22:19:54.673

的主体`find`有三个退出路径，两个对应于停止递归的条件，一个对应于递归：

```
if (start == goal)
  return history; // stop recursion: solution found
else if (start > goal)
  return null;    // stop recursion: solution impossible
else
  // ... 
```

第三条路径实际上是一个“分支”，因为它递归两次（一次尝试加法，一次尝试乘法）：

```
 return find(start + 5, "(" + history + " + 5)") ||
         find(start * 3, "(" + history + " * 3)"); 
```

那么这里发生了什么？

首先，请注意，这两个`find`调用中的每一个都将评估为非空字符串（操作历史）或`null`. 由于非空字符串是“真”值并且`null`是“假”值，因此我们通过将它们与运算符连接来利用这一点`||`；如果该运算符为真，则计算其第一个操作数，否则计算第二个操作数。

这意味着将首先评估第一个递归分支 (+5)。如果有一个以加 5 开始并达到目标的操作序列，则返回该序列的描述。否则，如果有一个以乘以 3 开始并达到目标的序列，则将返回该历史的描述。

如果无法达到目标，则返回值将由`null`第二个分支产生。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-03-29T22:23:20.433

如果您摆脱漂亮的打印内容，代码会更容易阅读：

```
function findSequence(goal) {
    function find(start) {
        if (start == goal) {
            return true;
        } else if (start > goal) {
            return false;
        } else {
            return find(start + 5) || find(start * 3);
        }
    }

    return find(1);
} 
```

外部函数`findSequence`动态创建一个名为where的*新*函数，该函数取自父函数的作用域。为了清楚起见，您可以像这样重写它：`find``goal`

```
function findSequence(start, goal) {
    if (start == goal) {
        return true;
    } else if (start > goal) {
        return false;
    } else {
        return findSequence(start + 5, goal) || findSequence(start * 3, goal);
    }
} 
```

现在，您可以更清楚地看到发生了什么。递归步骤在最后的`return`语句中，它在每一步都尝试`start + 5`并`start * 3`选择最终返回的分支`true`。

遵循`findSequence(1, 23)`手工的逻辑，你就会明白它是如何工作的。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-03-29T22:24:27.950

让我们留下历史参数，我们稍后再谈。

递归扩展到所有可能的操作。它以值`1`as开头`start`。

1.  我们首先检查我们是否到达了目的地：`goal`如果我们确实返回`true`了，则意味着我们走的路是正确的。

2.  其次，我们问——我们是否超过了界限（`goal`）？如果我们这样做了，我们应该返回，`false`因为这条路对我们没有帮助。

3.  否则，让我们尝试我们的两种可能性（我们使用 OR，因为我们至少需要一种）：

    *   调用相同的函数，但设置`start`为`start + 5`
    *   调用相同的函数，但设置`start`为`start * 3`

历史变量保持我们采取的步骤。因此，如果函数调用标识`start == goal`它返回它。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-03-29T22:37:36.183

`goal`是你的目标，它设置为 24

```
goal == 24 
```

现在我们有了这个内部函数`find()`来检查是否`start`等于 24；它不是。它还会检查 start 是否大于 24 这也是不正确的，

```
find(1 "1")
1 == 24 //false
1 > 24 //false 
```

所以它会再次调用 find 的 else 语句，这就是`else if()`来自 in 的空值的来源。如果返回为空，那么它调用 || 部分，直到它最终找到正确的答案。

```
return find(6, "(1 + 5)")
       find(11, "((1 + 5) + 5)")
       find(16, "(((1 + 5) + 5) +5)")
       find(21, "((((1+5) + 5) + 5) +5)")
       //next one returns null!
       //tries * by 3 on 21, 16, and 11 all return null 
```

所以它切换到 ||

```
return find(3, "(1 * 3)")
       find(8, "((1 * 3) +5)")
       //some calls down +5 path but that returns null
       find(24, "(((1 * 3) + 5) * 3)") 
```

最后！我们有一个真正的回报，我们已经记录了我们在历史变量中所走的路径。*

# java - 如何让 Google Guice 与 JaxRS (Jersey) 一起工作

> ID：15712233
> 
> 赞同：8
> 
> 时间：2013-03-29T22:14:01.190
> 
> 标签：java, jersey, jax-rs, guice, guice-servlet

我有一个可以轻松公开的基本 JAXRS 服务，但有一次我希望使用依赖注入 API，我怀疑 Google Guice 将是最好的之一。考虑到这一点，我试图整合它，但文档有点繁重，我不得不四处寻找合适的组合

*   Web.xml
*   上下文监听器（我应该使用 ServletContainer 还是 GuiceContainer）
*   服务
*   是否使用@Singleton 或@Request 注释服务或什么都不注释（我应该使用@Singleton 注释 - 文档说我应该但随后说它默认为请求范围）
*   是否用@InjectParam注解构造函数参数

但目前我从 Google Guice 收到错误，它们会根据我是否使用 @InjectParam 注释而改变。

如果我用 @InjectParam 注释，那么我会得到

```
 Mar 29, 2013 9:52:04 PM com.sun.jersey.spi.inject.Errors processErrorMessages
   SEVERE: The following errors and warnings have been detected with resource and/or provider classes:
   SEVERE: The class com.hillingar.server.dao.interfaces.UserDao is an interface and cannot be instantiated.
   SEVERE: Missing dependency for constructor public com.hillingar.server.SessionUtility(com.hillingar.server.dao.interfaces.UserDao) at parameter index 0 
```

如果我不注释，那么我会得到

```
 Mar 29, 2013 9:54:59 PM com.sun.jersey.spi.inject.Errors processErrorMessages
SEVERE: The following errors and warnings have been detected with resource and/or provider classes:
  SEVERE: Missing dependency for constructor public com.hillingar.server.rest.UserService(com.hillingar.server.dao.interfaces.UserDao,com.hillingar.server.SessionUtility) at parameter index 0
  SEVERE: Missing dependency for constructor public com.hillingar.server.rest.UserService(com.hillingar.server.dao.interfaces.UserDao,com.hillingar.server.SessionUtility) at parameter index 1 
```

这是我的 web.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <filter>
        <filter-name>guiceFilter</filter-name>
        <filter-class>com.google.inject.servlet.GuiceFilter</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>guiceFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <listener>
        <listener-class>com.hillingar.server.ServletContextListener</listener-class>
    </listener>

    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
</web-app> 
```

这是我的 ServletContextListener

```
package com.hillingar.server;

import java.util.logging.Logger;

import javax.servlet.ServletContextEvent;

import com.google.inject.Guice;
import com.google.inject.Singleton;
import com.hillingar.server.dao.jdbcImpl.UserJdbc;
import com.hillingar.server.dao.interfaces.UserDao;
import com.sun.jersey.guice.JerseyServletModule;
import com.sun.jersey.guice.spi.container.servlet.GuiceContainer;
import com.sun.jersey.spi.container.servlet.ServletContainer;

public class ServletContextListener implements javax.servlet.ServletContextListener {

    Logger logger = Logger.getLogger(this.getClass().getName());

    @Override
    public void contextDestroyed(ServletContextEvent arg0) {
    }

        /*
         * Covered in URL
         * https://code.google.com/p/google-guice/wiki/ServletModule
         */
    @Override
    public void contextInitialized(ServletContextEvent arg0) {

            // Note the user of JerseyServletModule instead of ServletModule
            // otherwise the expected constructor injection doesn't happen
            // (just the default constructor is called)
            Guice.createInjector(new JerseyServletModule() {
                @Override
                protected void configureServlets() {

                    /*
                     * Note: Every servlet (or filter) is required to be a 
                     * @Singleton. If you cannot annotate the class directly, 
                     * you must bind it using bind(..).in(Singleton.class), 
                     * separate to the filter() or servlet() rules. 
                     * Mapping under any other scope is an error. This is to 
                     * maintain consistency with the Servlet specification. 
                     * Guice Servlet does not support the 
                     * deprecated SingleThreadModel.
                     */
                    bind(SecurityFilter.class).in(Singleton.class);
                    bind(ServletContainer.class).in(Singleton.class);

                    /*
                     * Filter Mapping
                     * 
                     * This will route every incoming request through MyFilter, 
                     * and then continue to any other matching filters before 
                     * finally being dispatched to a servlet for processing.
                     * 
                     */

                    // SECURITY - currently disabled
                    // filter("/*").through(SecurityFilter.class);

                    /*
                     * Registering Servlets
                     * 
                     * This registers a servlet (subclass of HttpServlet) called 
                     * ServletContainer, the same one that I would have used in 
                     * the web.xml file, to serve any web requests with the 
                     * path /rest/*  i.e. ...
                     * 
                        <servlet>
                            <servlet-name>ServletAdaptor</servlet-name>
                            <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
                            <load-on-startup>1</load-on-startup>
                        </servlet>
                        <servlet-mapping>
                            <servlet-name>ServletAdaptor</servlet-name>
                            <url-pattern>/rest/*</url-pattern>
                        </servlet-mapping>

                     */
                    serve("/rest/*").with(ServletContainer.class); // JAX-RS

                    // Using this and it starts bitching about
                    // com.sun.jersey.api.container.ContainerException: The ResourceConfig instance does not contain any root resource classes.
                    // So presumably wants an Application class that enumerates 
                    // all my services?
                    //serve("/rest/*").with(GuiceContainer.class);

                    /*
                     * Bindings
                     */
                    bind(UserDao.class).to(UserJdbc.class);
                    bind(SessionUtility.class);
                }
            });
    }

} 
```

这是我的用户服务

```
package com.hillingar.server.rest;

import com.google.inject.Inject;
import com.google.inject.Singleton;
import java.util.List;

import javax.servlet.http.HttpServletRequest;
import javax.ws.rs.Consumes;
import javax.ws.rs.GET;
import javax.ws.rs.POST;
import javax.ws.rs.Path;
import javax.ws.rs.PathParam;
import javax.ws.rs.Produces;
import javax.ws.rs.core.Context;
import javax.ws.rs.core.SecurityContext;

import com.hillingar.server.SessionUtility;
import com.hillingar.server.dao.interfaces.UserDao;
import com.hillingar.server.model.User;
import com.hillingar.server.model.dto.AuthenticationResponse;

@Path("/user")
@Produces("application/json")
@Consumes({"application/xml","application/json"})
@Singleton // <-- Added Singleton here
public class UserService {

    private UserDao userDao;
    private SessionUtility sessionManager;

        /*
           Error if I annotate with @InjectParam...

           Mar 29, 2013 9:52:04 PM com.sun.jersey.spi.inject.Errors processErrorMessages
           SEVERE: The following errors and warnings have been detected with resource and/or provider classes:
           SEVERE: The class com.hillingar.server.dao.interfaces.UserDao is an interface and cannot be instantiated.
           SEVERE: Missing dependency for constructor public com.hillingar.server.SessionUtility(com.hillingar.server.dao.interfaces.UserDao) at parameter index 0

           Error If I don't annotate at all...
            Mar 29, 2013 9:54:59 PM com.sun.jersey.spi.inject.Errors processErrorMessages
            SEVERE: The following errors and warnings have been detected with resource and/or provider classes:
              SEVERE: Missing dependency for constructor public com.hillingar.server.rest.UserService(com.hillingar.server.dao.interfaces.UserDao,com.hillingar.server.SessionUtility) at parameter index 0
              SEVERE: Missing dependency for constructor public com.hillingar.server.rest.UserService(com.hillingar.server.dao.interfaces.UserDao,com.hillingar.server.SessionUtility) at parameter index 1

           (both output Initiating Jersey application, version 'Jersey: 1.13 06/29/2012 05:14 PM')
        */
    @Inject
    public UserService(UserDao userDao, SessionUtility sessionManager) {
        this.userDao = userDao;
                this.sessionManager = sessionManager;
    }

    @GET
    public List<User> test(@Context HttpServletRequest hsr) {
                // USER DAO IS ALWAYS NULL - CONSTRUCTOR INJECTION NOT WORKING
        User loggedInUser = userDao.findBySessionId(hsr.getSession().getId());
                ...
        return users;
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T11:51:45.577

将 ServletContextListener 更改为

```
package com.hillingar.server;

import java.util.logging.Logger;

import javax.servlet.ServletContextEvent;

import com.google.inject.Guice;
import com.google.inject.Injector;
import com.google.inject.Singleton;
import com.google.inject.servlet.GuiceServletContextListener;
import com.hillingar.server.dao.jdbcImpl.UserJdbc;
import com.hillingar.server.dao.interfaces.UserDao;
import com.hillingar.server.rest.UserService;
import com.sun.jersey.guice.JerseyServletModule;
import com.sun.jersey.guice.spi.container.servlet.GuiceContainer;
import com.sun.jersey.spi.container.servlet.ServletContainer;

// (1) Extend GuiceServletContextListener
public class ServletContextListener extends GuiceServletContextListener {

    Logger logger = Logger.getLogger(this.getClass().getName());

    // (1) Override getInjector
    @Override
    protected Injector getInjector() {
        return Guice.createInjector(new JerseyServletModule() {
            @Override
            protected void configureServlets() {
                bind(SecurityFilter.class).in(Singleton.class);
                bind(UserService.class);// .in(Singleton.class);
                bind(ServletContainer.class).in(Singleton.class);

                // (2) Change to using the GuiceContainer
                serve("/rest/*").with(GuiceContainer.class); // <<<<---

                bind(UserDao.class).to(UserJdbc.class);
                bind(SessionUtility.class);
            }
        });
    }
} 
```

# java - Java REST/Web 服务的 TCP/二进制版本？

> ID：15712235
> 
> 赞同：0
> 
> 时间：2013-03-29T22:14:05.160
> 
> 标签：java, rest, networking, tcp, rmi

我是一个网络新手，并且探索了一些框架，例如 Jersey 和 CXF，用于在 Java 中构建 RESTful Web 服务。

我有一个新应用程序需要通过 Internet（在客户端和服务器之间）发送*大量*二进制数据，并且它需要*非常*快。我想知道是否存在纯粹的“TCP/IP（非）Web 服务”之类的东西，以及是否有任何开源 Java 库来构建这些东西。

如果所有网络服务都必须位于 TCP/IP 之上，那么我想我正在寻找仍然使用二进制数据的东西，但这会为快速服务带来极少的开销。

我总是将 REST 与 XML 或 JSON 相关联；如果它可以配置为超快并处理二进制数据，我什至会喜欢它，因为我已经对泽西岛有点熟悉了。

我*认为*RMI 可能是一个不错的选择，但不确定它是否不适合这个用例。

**我需要速度，我需要一个二进制协议**，但不知道从哪里开始。有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:18:44.230

你不能用Java Sockets吗？

这就是你可以达到的低水平。

[http://docs.oracle.com/javase/tutorial/networking/sockets/](http://docs.oracle.com/javase/tutorial/networking/sockets/)

是的，RMI 比 CFX 等任何高级传输抽象都要快得多。您有两个选择，原始套接字或 RMI，RMI 更易于使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T23:04:40.457

REST 是一种架构模式，其独特之处在于将 HTTP 动词用于其最初的用途。即使大多数部署的 REST 服务使用 JSON 来序列化对象，整个 HTTP 事务也看起来像这样：

```
PUT /user/foo HTTP/1.1
Host: example.com
X-Auth-Token: foobarbazanythingyouwanthere

{"fist": "Jeff", "last": "Atwood"} 
```

回应是：

```
HTTP/1.1 200 OK 
```

因此，没有真正的“开销”。相反，您利用现有库的功能来处理路由、身份验证、序列化等。由于 HTTP 使用[类似 MIME 的](http://en.wikipedia.org/wiki/MIME)信封，所以它对二进制内容没有问题，即使这增加了一些开销，也很难想出一个超级高效但有效的协议，更不用说你需要设计它，实现所有的库 - 好吧 - 没有人会对你的工作感兴趣。

由于您声明您是“网络新手”，并且您似乎以随机方式使用诸如 REST 和 RMI 之类的术语，所以我强烈建议不要考虑性能，而只使用标准技术。您可以使用 HTTP，有很多预构建的框架、servlet 容器、服务器存根，应有尽有。

当您测量真正的性能瓶颈时回来，以便我们获得数据以更好地帮助您。

# lua - Luasocket irc 检查接收消息

> ID：15712236
> 
> 赞同：0
> 
> 时间：2013-03-29T22:14:07.940
> 
> 标签：lua, irc, luasocket

我正在尝试使用 luasocket 连接到 Irc 频道并在我的游戏中发送和接收消息（Wolfenstein Enemy Territory，如果有帮助的话）。

现在我能够做到这一切，但有一个问题。一旦我将其设置为收听消息，它基本上就会锁定。如果我在 Irc 中键入 stoplisten，我有一个备用命令，它只会停止脚本，我可以看到它收到了所有消息，但游戏本身在等待消息时被锁定。

关于如何在不冻结游戏的情况下做到这一点的任何想法？我最近刚学了一点协程所以我不知道我是否正确使用它们。我还应该注意，如果有帮助，我可以访问每毫秒运行一次的运行帧函数（虽然通常它是这样完成的：if math.mod(currentTime, 50) ~= 0 then return end）

这是我的代码中的一部分：http: [//pastebin.com/j1gCqm4R](http://pastebin.com/j1gCqm4R) （我不会用缩进编辑我的所有代码只是为了将它发布在这里，所以我只是把它放在pastebin上）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T04:06:53.903

您的问题是所有套接字默认情况下都是*阻塞*的，这意味着它们将暂停（“*阻塞*”）当前执行线程（在本例中为您的游戏），直到它们获得所需的结果或“超时”。

解决方案是*非阻塞*套接字。在您的客户端套接字对象上调用`:settimeout(0)`，所有未来`:send(...)` `:recieve(...)`将立即返回，成功或超时。

LuaSocket[参考](http://w3.impa.br/~diego/software/luasocket/reference.html)包含完整的详细信息，但您必须修改代码以处理“超时”故障状态，或添加对 socket.select() 的调用以确保仅使用“准备好”的套接字用过的。

# python - psql - 如何在不删除表的情况下刷新数据库内容

> ID：15712239
> 
> 赞同：6
> 
> 时间：2013-03-29T22:14:11.270
> 
> 标签：python, psycopg2, postgresql-9.2, psql

我的数据库中有一个名为“mytable”的表。我想清除它，以便我可以继续从中收集和分析“新数据”。

就像是

```
conn = psycopg2.connect(database = mydb_name, host = mydb_server, user = mydb_uname, password = mydb_pwd)
cur = conn.cursor()
cur.execute("DROP TABLE mytable;") 
```

对我不起作用，因为据我了解，这会破坏桌子。我不想破坏/重新创建......只是为了刷新所有数据。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-29T22:32:46.257

```
 Truncate tablename 
```

对此很有用，表只是删除数据！

如果您有外键，则需要使用以下内容

```
 Truncate tablename CASCADE 
```

对于许多表都这样

```
 Truncate table1, table2, table3 
```

你的例子

```
 Cur.execute("truncate mytable;") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T22:26:59.470

此 sql 查询应从表中删除所有记录...

```
DELETE FROM mytable; // not DELETE * FROM mytable; 
```

# ios - 如何将 C/C++ 代码移植到 iOS？

> ID：15712241
> 
> 赞同：0
> 
> 时间：2013-03-29T22:14:24.040
> 
> 标签：ios

我是 iOS 新手，想寻求移植以前为 Linux 编写的 C/C++ 代码的技巧。

只有一些关于代码的特别之处。

1.  线程
2.  插座
3.  使用 select() 的非阻塞 I/O
4.  守护进程

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T22:19:18.950

POSIX 线程和套接字也可用于 iOS。如果你想制作一个守护进程，你必须越狱你的设备才能安装它。

# c++ - 重载运算符或数字转换的问题

> ID：15712244
> 
> 赞同：1
> 
> 时间：2013-03-29T22:14:29.507
> 
> 标签：c++, operator-overloading, type-conversion

我正在学习 C++ 中的重载运算符，但我遇到了问题。

我写了一个（原始）类来表示 C++ 中的一个分数，以及一个将其中两个相乘的函数。

如果我想使用函数将分数乘以整数，那么一切都很好（感谢转换构造函数：P）。但现在我想用重载的 * 乘以分数，就像两个数字一样。乘法`first_fraction * second_fraction`效果很好，但编译器不想将数字转换为`fraction * 2`. （它给出了这个错误：**错误 C2666：'operator *'：2 个重载有类似的转换）**

如果我手动转换它，`fraction*static_cast<CFraction>(2)`则可以再次使用它。

谁能解释我做错了什么？这是完整的代码：

```
#include <iostream>

using namespace std;

class CFraction
{

private:
    int m_numerator;
    int m_denominator;

public:

    // Normal constructor, default constructor and conversion constructor
    CFraction(int numerator=0,int denominator = 1) : m_numerator(numerator), m_denominator(denominator)
    {               
    }

    int numerator() const { return m_numerator; }
    void numerator(int numerator) { m_numerator = numerator; }

    int denominator() const { return m_denominator; }
    void denominator(int denominator) { m_denominator = denominator; }

    // Conversion to decimal form
    operator float()
    {
        return m_numerator / static_cast<float>(m_denominator);
    }   

};

// Function to multiply 2 fractions
CFraction multiplication(const CFraction& f1,const CFraction& f2)
{
    return CFraction(f1.numerator()*f2.numerator(),f1.denominator()*f2.denominator());
}

// Overloaded opearator to multiply 2 fractions
CFraction operator *(const CFraction& f1,const CFraction& f2)
{
    return CFraction(f1.numerator()*f2.numerator(),f1.denominator()*f2.denominator());
}

int main()
{
    CFraction fraction1(3,4);

    cout << "Fraction: "<< fraction1.numerator() << "/" << fraction1.denominator() << endl;
    cout << "Decimal: " << static_cast<float>(fraction1) << endl;

    // Multiplication by function works very well
    CFraction result = multiplication(fraction1,2);

    // (ERROR) Compiller won't convert 2 to CFraction class
    CFraction result1 = fraction1*2;

    // Using manually covnerted integer - works again
    CFraction result2 = fraction1*static_cast<CFraction>(2);

    cout << "Multiplied by 2: " << static_cast<float>(result);

    getchar();
    return 0;
} 
```

PS。如果重要的话，我正在使用 MS Visual C++ 2010

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T22:20:45.223

问题是你的类`Fraction`有一个构造函数，它*没有*被声明为`explicit`并且可以接受一个类型的参数`int`。因此，每次`Fraction`需要a，但`int`提供了an时，编译器都可以选择这个构造函数来实现隐式的用户自定义转换序列。

此外，您的类型`Fraction`还有一个转换运算符 to `float`，这使得每次需要 a 时都可以隐式转换`Fraction`为，但提供了 a 。`float``float``Fraction`

因此，以下指令是模棱两可的：

```
CFraction result1 = fraction1*2; 
```

编译器不知道是否选择`operator *`类型对象的重载并使用传递的构造函数作为输入`Fraction`将第二个参数 ( `2`) 转换为 a ，或者通过转换运算符将第一个参数转换为 a 然后使用内置函数执行 a和 an之间的乘法。`Fraction``Fraction``2``float``operator *``float``int`

在 C++11 中，您可以决定制作转换运算符`explicit`，这样可以防止歧义：您将无法再默默地`fraction1`转换为`2`，因此编译器只能选择转换`2`为 a`Fraction`并调用您的的超载`operator *`。

在这种情况下，如果要执行从`Fraction`to的转换`float`，则必须显式编写强制转换：

```
float f = static_cast<float>(result1); 
```

另一种选择是使您的构造函数而不是转换运算符，以便在提供可转换为整数的单个值时`explicit`，编译器将无法静默实例化 a 。`Fraction`

这将解决上述乘法本身的歧义，因为它使编译器只能选择通过转换运算符转换`fraction1`为 a `float`。但是，会出现两个问题。

首先，您将无法再编写：

```
CFraction result = multiplication(fraction1, 2); 
```

因为这试图`Fraction`从第二个参数中创建一个`2`（`multiplication()`期望两个`Fractions`作为它的参数）。相反，您必须明确地构造对象：

```
CFraction result = multiplication(fraction1, CFraction(2)); 
```

其次，即使您上面的原始乘法可以工作，最终的复制初始化`result1`也不会，因为（再一次）这需要隐式转换。

因此，您必须将复制初始化重写为：

```
CFraction result1 = CFraction(fraction1*2); 
```

或者作为直接初始化：

```
CFraction result1(fraction1*2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T22:21:50.143

```
 CFraction result2 = fraction1 * 2; 
```

你如何使用结果对它的计算方式没有影响，所以这只是：

```
 fraction1 * 2 
```

这是模棱两可的。您可以转换`fraction1`为浮点数并将其乘以 2。您可以转换`2`为 a`Fraction`然后使用`operator*`. 编译器不知道你想要哪个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T22:33:39.437

Because you supply a conversion to float in your CFraction class, the compiler has a choice of converting

```
CFraction result1 = fraction1*2; 
```

to use either your own operator * with CFractions, or the standard operator * with a float and an int.

If you can use C++11, you could mark your float conversion with explicit. Otherwise, rename it to something like "as_float". Implicit conversions are often problematic and are best avoided.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T18:37:30.860

Try to use templates and left conversions to compiler.

# python - AutoHotKey to recognise python Spyder IDE window

> ID：15712245
> 
> 赞同：0
> 
> 时间：2013-03-29T22:14:32.740
> 
> 标签：python, autohotkey, spyder

I want to use AHK exclusively in python Spyder IDE, so commands like

```
#IfWinActive, ahk_class Spyder
^u::Send print 3{Enter} 
```

But seems AHK doesn't recognise Spyder window so it's not activated. What shall I put in place of **Spyder** for AHK to recognise it?

Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T22:30:24.657

Oh, found the answer...

Just need to delete **ahk_class**

Details are in the help pages of function [#IfWinActive](http://www.autohotkey.com/docs/commands/IfWinActive.htm)

# angularjs - AngularJS - ngRepeat 和 ngModel

> ID：15712249
> 
> 赞同：0
> 
> 时间：2013-03-29T22:14:57.133
> 
> 标签：angularjs

我花了几个小时的大部分时间来写和重写这个，如果没有答案，我可能会在这里写我自己的指令。

我有一个输入的列显示，6 列中的每列 10 个。我正在使用 2 个 ngRepeat 指令来显示它们。我在下面放置了 6 个小提琴，并尝试让它们正常工作。问题是，当我使用对象数组时，所有数据都会同时更新。查看下面的 Fiddle #1 以查看示例。

这是代码的快速片段，您也可以在小提琴页面上看到它。如果有人有一些指示或方法可以让 #1、#2 或 #6 工作，请告诉我！

HTML：

```
<div ng-controller='EntryCtrl'>
<div class="span2" ng-repeat="a in [0,1,2,3,4,5]">
    <div ng-repeat="i in entry.slice($index*10, ($index*10)+10)" ng-class="{'control-group': true, error: !entry[($parent.$index*10)+$index].correct}">{{($parent.$index*10)+$index}}<input type="text" class="span12" id="entry-{{($parent.$index*10)+$index}}" ng-model="entry[($parent.$index*10)+$index].input" /></div>
</div>
</div> 
```

Javascript：

```
var myApp = angular.module('myApp', []);
myApp.controller('EntryCtrl', ['$scope', function($scope) {
    $scope.entry=filledArray(60,{input:'',correct:true});
}]);
function filledArray(len, val) {
    var rv = new Array(len);
    while (--len >= 0) {
        rv[len] = val;
    }
    return rv;
} 
```

Fiddle #1: Array of objects using ng-model pointing to `entry` using `$index` and `$parent.$index`: [http://jsfiddle.net/DFEkG/](http://jsfiddle.net/DFEkG/) -- **All models update simultaneously**

Fiddle #2: Array of objects using ng-model pointing to `i` instead of `$index`: [http://jsfiddle.net/DFEkG/1/](http://jsfiddle.net/DFEkG/1/) -- **All models update simultaneously**

Fiddle #3: Array using ng-model pointing to `entry` using `$index` and `$parent.$index`: [http://jsfiddle.net/DFEkG/2/](http://jsfiddle.net/DFEkG/2/) -- **Weird behavior**

Fiddle #4 Array using ng-model pointed to `i` instead of `$index`: [http://jsfiddle.net/DFEkG/3/](http://jsfiddle.net/DFEkG/3/) -- **Broken**

Fiddle #5 Array仅在 ng-repeat 指令中使用`$index`and和数组：http: [//jsfiddle.net/DFEkG/4/](http://jsfiddle.net/DFEkG/4/) -**有效！****但不作为对象**`$parent.$index`

 **小提琴 #6 与技术 5 相同，但带有一个对象：http: [//jsfiddle.net/DFEkG/5/](http://jsfiddle.net/DFEkG/5/) --**与小提琴 1 和 2 相同**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T23:53:01.587

问题出在你的`filledArray`功能上。它将相同的确切对象分配给每个数组项。`{input: '', correct: true}`在所有 60 个实例中都引用了相同的对象。

因此，要修复它，您可以在每次迭代时简单地制作一个新副本：

```
function filledArray(len, val) {
    var rv = new Array(len);
    while (--len >= 0) {
        rv[len] = angular.copy(val);
    }
    return rv;
} 
```

[小提琴](http://jsfiddle.net/tjBvW/)。**

# jquery - 如果复选框被选中显示 div

> ID：15712251
> 
> 赞同：4
> 
> 时间：2013-03-29T22:15:04.050
> 
> 标签：jquery, html, input, checkbox, toggle

我正在尝试构建类似 wordpress 选项的东西，用于在创建和文章时切换字段可见性。我所构建的依赖于`$.click`使用相应字段名称切换父级的函数，我想知道如果选中该复选框，那么最好的方法是什么，因为如果你选中一个，我的代码会搞砸框并重新加载页面，因为它是一次点击，而不是如果实际选中了该框。提前致谢！

[http://jsfiddle.net/zgrRd/1/](http://jsfiddle.net/zgrRd/1/)

**HTML**

```
<input type="checkbox" name="title">
<span class="caption">Title</span>

<div class="hidden">
  <h2>Title</h2>
  <input type="text" name="title">
  <span class="caption">Lorem</span>
</div> 
```

**jQuery**

```
$('input[type="checkbox"]').click(function(){
    var item = $(this).attr('name');
    $('input[name="'+item+'"][type="text"]').parent().toggle();
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T22:48:46.270

假设您在外部控制复选框的选中状态...

演示：http: [//jsfiddle.net/zgrRd/5/](http://jsfiddle.net/zgrRd/5/)

换句话说，无论复选框处于何种状态，都会在页面加载时进行评估，因此如果未选中某个框，则相应的元素将开始隐藏。因此，如果您在服务器端设置一个选中该框的值，则此客户端 JavaScript 应该正确评估它。

## JavaScript

```
function evaluate(){
    var item = $(this);
    var relatedItem = $("#" + item.attr("data-related-item")).parent();

    if(item.is(":checked")){
        relatedItem.fadeIn();
    }else{
        relatedItem.fadeOut();   
    }
}

$('input[type="checkbox"]').click(evaluate).each(evaluate); 
```

## HTML

```
<input type="checkbox" data-related-item="title1">
<span class="caption">Title</span>

<div class="hidden">
  <h2>Title</h2>
  <input type="text" id="title1">
  <span class="caption">Lorem</span>
</div>
<hr>
<input type="checkbox" data-related-item="title2" checked>
<span class="caption">Title</span>

<div class="hidden">
  <h2>Title</h2>
  <input type="text" id="title2">
  <span class="caption">Lorem</span>
</div> 
```

注意我对`data-*`属性的使用。这避免了使用`name`一个字段的属性来指示与另一个字段的关系。您可以合法地命名这些属性，只要它们以 . 为前缀即可`data-`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T22:48:22.427

我认为，[Jquery UI Save State Using Cookie](https://stackoverflow.com/questions/7060539/jquery-ui-save-state-using-cookie)是您在重新加载之间控制状态的缺失部分吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-15T11:32:03.627

HTML

```
<input type="checkbox" id="cbxShowHide"/><label for="cbxShowHide">Show/Hide</label>
<div id="block">Some text here</div> 
```

css

```
#block{display:none;background:#eef;padding:10px;text-align:center;} 
```

javascript/jquery

```
$('#cbxShowHide').click(function(){
this.checked?$('#block').show(1000):$('#block').hide(1000); //time for show
}); 
```

# ajax - AjaxLink updateAjaxAttributes - AjaxCallListener getPrecondition

> ID：15712264
> 
> 赞同：1
> 
> 时间：2013-03-29T22:16:29.960
> 
> 标签：ajax, wicket, hyperlink, wicket-6

我在从 Wicket 1.5 迁移到 6.6 的过程中卡住了。

早期*的 AjaxLink*允许覆盖*getAjaxCallDecorator()*方法并使用*preDecorateScript(CharSequence script)*包装脚本。

现在推荐的方法是使用*AjaxCallListener*和*getPrecondition(Component component)*方法。但是如何使用*Component 组件*参数包装源脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T08:02:07.583

不知道我是否理解正确。我们这样做：

```
public class MyAjaxCallListener implements IAjaxCallListener{

    @Override
    public CharSequence getBeforeHandler(Component component) {
        return null;
    }

    @Override
    public CharSequence getPrecondition(Component component) {
        return YOUR_SCRIPT;
    }

    // ...     not needed overrides can return null

} 
```

然后你通过 an 添加`Behavior`到你的`AjaxLink`.

```
ajaxLink.add(new AjaxEventBehavior("onclick") {
   @Override
   protected void onSubmit(AjaxRequestTarget target) {
   //do stuff
   }

   @Override
   protected void updateAjaxAttributes(AjaxRequestAttributes attributes) {
      super.updateAjaxAttributes(attributes);
      attributes.getAjaxCallListeners().add(new MyAjaxCallListener());
   }
}); 
```

# javascript - 如何为 Kinetic JS 舞台或图层添加背景颜色？

> ID：15712265
> 
> 赞同：0
> 
> 时间：2013-03-29T22:16:37.377
> 
> 标签：javascript, html, canvas, kineticjs

我有一个 Kinetic JS 阶段和一个层

```
var stage = new Kinetic.Stage({
    container: 'container',
    width    : STAGE_WIDTH,
    height   : STAGE_HEIGHT
});

var layer = new Kinetic.Layer(); 
```

我已将页面颜色设置为#bbb。

```
body {
        background: #bbb;
    } 
```

我想将画布颜色设置为白色。但我似乎无法找到一种方法或方式来为舞台本身或添加所有对象的图层添加背景颜色。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-07T01:05:02.543

我有同样的问题，我想添加一个“背景”。我使用以下代码添加了一个高度和宽度为 100% 的矩形：

```
var rect = new Kinetic.Rect({
            x: 0,
            y: 0,
            width: stageDimensions.width, //full width
            height: stageDimensions.height, //full height
            fill: 'white', //background color
        });
layer.add(rect); 
```

由于我希望能够删除“背景”，这就是我设法解决问题的方法。

希望它可以帮助你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T06:26:30.520

您还可以通过 CSS 设置容器元素的背景颜色。这与设置舞台的背景颜色基本相同。如果您想要图层级别的背景，您需要添加一个填充的矩形或类似的，如前所述。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-06T12:06:11.093

您可以使用 JavaScript 更改背景颜色...

```
document.getElementById('container').style.background = '#fff'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T00:12:15.483

There isn't an API method to add a background color.

Instead add a colored rectangle that covers the layer.

Of course, add the background rectangle before all other shapes.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-02T09:41:16.373

老问题，但是您可以使用`get`舞台的属性，并填充一个完整的矩形，然后将其添加到图层中。示例代码：

```
var stage = new Kinetic.Stage({
  container: 'canvas-container',
  width: 900,
  height: 450
});

// create background
var stageBg = new Kinetic.Rect({
  x: 0,
  y: 0,
  width: stage.getWidth(),
  height: stage.getHeight(),
  fill: "rgb(40,40,40)"
});

layer.add(stageBg);
stage.add(layer); 
```

# git - 完全用 github 中的另一个分支替换远程分支，不留旧分支的痕迹

> ID：15712266
> 
> 赞同：6
> 
> 时间：2013-03-29T22:16:50.817
> 
> 标签：git, ssh, push

我将一个分支推送到一个空的 github 存储库：

```
MrD@MRSD /c/Dropbox/eclipse_workspaces/javaEE/ted2012 (GitHubSquash)
$ git remote add github  https://github.com/Utumno/ted2012.git
MrD@MRSD /c/Dropbox/eclipse_workspaces/javaEE/ted2012 (GitHubSquash)
$ git push -u github GitHubSquash
Username for 'https://github.com': Utumno
Password for 'https://Utumno@github.com':
//...
To https://github.com/Utumno/ted2012.git
 * [new branch]      GitHubSquash -> GitHubSquash
Branch GitHubSquash set up to track remote branch GitHubSquash from github. 
```

然后我注意到我已经推动了一些绒毛并试图删除分支/用另一个替换它等等。我失败了：

```
MrD@MRSD /c/Dropbox/eclipse_workspaces/javaEE/ted2012 (GitHub2)
$ git push  :github && git push github GitHub2
ssh: connect to host  port 22: Bad file number
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists.
MrD@MRSD /c/Dropbox/eclipse_workspaces/javaEE/ted2012 (GitHub2)
$ git checkout GitHubSquash
Switched to branch 'GitHubSquash'
Your branch is ahead of 'github/GitHubSquash' by 1 commit.
  (use "git push" to publish your local commits)
MrD@MRSD /c/Dropbox/eclipse_workspaces/javaEE/ted2012 (GitHubSquash)
$ git push  :github
ssh: connect to host  port 22: Bad file number
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists.
MrD@MRSD /c/Dropbox/eclipse_workspaces/javaEE/ted2012 (GitHubSquash)
$ git push  -u :github
ssh: connect to host  port 22: Bad file number
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists. 
```

我不得不删除 repo 并重新推送我的新分支。那行得通，但让我想知道：

1.  我应该怎么做才能用另一个完全替换远程分支？

2.  *为什么我得到 ssh: connect to host port 22: Bad file number* errors - 而我的第一次推送成功（并注意我在 http 上）？

    ```
    $ git --version
    git version 1.8.1.msysgit.1 
    ```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-30T00:44:08.487

你的语法是错误的。正确的命令是：

```
git push -f github GitHubSquash 
```

这将用您的本地版本替换远程 GitHubSquash 分支。如果您只想删除远程分支：

```
git push -f github :GitHubSquash 
```

I guess you got your error, because git is trying to interpret `:github` as an url and weird stuff happens :).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-22T02:56:54.493

```
git push origin :GitHubSquash 
```

to delete remote branch

```
git push --set-upstream origin GitHubSquash 
```

to push local branch

# mysql - 在UPDATE上更新同一张表不同行的外键

> ID：15712268
> 
> 赞同：0
> 
> 时间：2013-03-29T22:17:02.097
> 
> 标签：mysql, database, triggers

我正在为我的数据库使用 MySql，并且我有一个表“Person”。除其他外，它包含与自身“Person_MarriedTo”的关系，存储为foreigh_key；

这种关系可以是空的，因为不是每个人都结婚了。我想要做的是这个字段可以自动更新。

如果我添加 A 与 B 结婚，则 B 与 A 结婚 如果 B 与 A 离婚，则 A 也与 B 离婚

我认为触发器是可行的方法，但我无法让我的代码按照我想要的方式工作。任何见解将不胜感激。

这是我的触发器代码：

```
 USE `mydb`;
    DELIMITER $$

    CREATE TRIGGER `Person_BUPD` BEFORE UPDATE ON Person FOR EACH ROW
    BEGIN
        IF OLD.Person_MariedTo != NULL THEN
            UPDATE Person SET Person_MariedTo = NULL WHERE UID_Person =         OLD.Person_MariedTo;
        END IF;
        UPDATE Person SET Person_MariedTo = OLD.UID_Person WHERE UID_Person =         NEW.Person_MariedTo;
    END$$ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:44:09.823

使用触发器无法执行您尝试做的事情。

`Within a stored function or trigger, it is not permitted to modify a table that is already being used (for reading or writing) by the statement that invoked the function or trigger. You need to do this some other way.`

[来源](http://dev.mysql.com/doc/refman/5.0/en/stored-program-restrictions.html)

见这里： [MySQL - 插入后更新同一个表的触发器](https://stackoverflow.com/questions/12877732/mysql-trigger-for-updating-same-table-after-insert)

# javascript - jquery移动表格代码下载

> ID：15712269
> 
> 赞同：1
> 
> 时间：2013-03-29T22:17:03.267
> 
> 标签：javascript, jquery, jquery-ui, jquery-mobile

我查看了jquery mobile table....但不知道在哪里下载代码....你能告诉我在哪里可以下载示例代码....

[http://jquerymobile.com/demos/1.3.0-beta.1/docs/tables/table-reflow.html](http://jquerymobile.com/demos/1.3.0-beta.1/docs/tables/table-reflow.html)

```
@media ( min-width: 40em ) {
    /* Show the table header rows and set all cells to display: table-cell */ 
    .my-custom-breakpoint td,
    .my-custom-breakpoint th,
    .my-custom-breakpoint tbody th,
    .my-custom-breakpoint tbody td,
    .my-custom-breakpoint thead td,
    .my-custom-breakpoint thead th {
        display: table-cell;
        margin: 0;
    }
    /* Hide the labels in each cell */ 
    .my-custom-breakpoint td .ui-table-cell-label,
    .my-custom-breakpoint th .ui-table-cell-label { 
        display: none;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:39:02.097

这是您提供的页面上代码的复制/粘贴。

检查**页面源**以查看页面的 HTML 代码（右键单击页面 > 查看页面源）。

```
<table data-role="table" id="movie-table" data-mode="reflow" class="ui-responsive table-stroke ui-table ui-table-reflow">
  <thead>
    <tr>
      <th data-priority="1">Rank</th>
      <th data-priority="persist">Movie Title</th>
      <th data-priority="2">Year</th>
      <th data-priority="3"><abbr title="Rotten Tomato Rating">Rating</abbr></th>
      <th data-priority="4">Reviews</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th><b class="ui-table-cell-label">Rank</b>1</th>
      <td><b class="ui-table-cell-label">Movie Title</b><a href="http://en.wikipedia.org/wiki/Citizen_Kane" data-rel="external" class="ui-link">Citizen Kane</a></td>
      <td><b class="ui-table-cell-label">Year</b>1941</td>
      <td><b class="ui-table-cell-label">Rating</b>100%</td>
      <td><b class="ui-table-cell-label">Reviews</b>74</td>
    </tr>
    <tr>
      <th><b class="ui-table-cell-label">Rank</b>2</th>
      <td><b class="ui-table-cell-label">Movie Title</b><a href="http://en.wikipedia.org/wiki/Casablanca_(film)" data-rel="external" class="ui-link">Casablanca</a></td>
      <td><b class="ui-table-cell-label">Year</b>1942</td>
      <td><b class="ui-table-cell-label">Rating</b>97%</td>
      <td><b class="ui-table-cell-label">Reviews</b>64</td>
    </tr>
    <tr>
      <th><b class="ui-table-cell-label">Rank</b>3</th>
      <td><b class="ui-table-cell-label">Movie Title</b><a href="http://en.wikipedia.org/wiki/The_Godfather" data-rel="external" class="ui-link">The Godfather</a></td>
      <td><b class="ui-table-cell-label">Year</b>1972</td>
      <td><b class="ui-table-cell-label">Rating</b>97%</td>
      <td><b class="ui-table-cell-label">Reviews</b>87</td>
    </tr>
    <tr>
      <th><b class="ui-table-cell-label">Rank</b>4</th>
      <td><b class="ui-table-cell-label">Movie Title</b><a href="http://en.wikipedia.org/wiki/Gone_with_the_Wind_(film)" data-rel="external" class="ui-link">Gone with the Wind</a></td>
      <td><b class="ui-table-cell-label">Year</b>1939</td>
      <td><b class="ui-table-cell-label">Rating</b>96%</td>
      <td><b class="ui-table-cell-label">Reviews</b>87</td>
    </tr>
    <tr>
      <th><b class="ui-table-cell-label">Rank</b>5</th>
      <td><b class="ui-table-cell-label">Movie Title</b><a href="http://en.wikipedia.org/wiki/Lawrence_of_Arabia_(film)" data-rel="external" class="ui-link">Lawrence of Arabia</a></td>
      <td><b class="ui-table-cell-label">Year</b>1962</td>
      <td><b class="ui-table-cell-label">Rating</b>94%</td>
      <td><b class="ui-table-cell-label">Reviews</b>87</td>
    </tr>
    <tr>
      <th><b class="ui-table-cell-label">Rank</b>6</th>
      <td><b class="ui-table-cell-label">Movie Title</b><a href="http://en.wikipedia.org/wiki/Dr._Strangelove" data-rel="external" class="ui-link">Dr. Strangelove Or How I Learned to Stop Worrying and Love the Bomb</a></td>
      <td><b class="ui-table-cell-label">Year</b>1964</td>
      <td><b class="ui-table-cell-label">Rating</b>92%</td>
      <td><b class="ui-table-cell-label">Reviews</b>74</td>
    </tr>
    <tr>
      <th><b class="ui-table-cell-label">Rank</b>7</th>
      <td><b class="ui-table-cell-label">Movie Title</b><a href="http://en.wikipedia.org/wiki/The_Graduate" data-rel="external" class="ui-link">The Graduate</a></td>
      <td><b class="ui-table-cell-label">Year</b>1967</td>
      <td><b class="ui-table-cell-label">Rating</b>91%</td>
      <td><b class="ui-table-cell-label">Reviews</b>122</td>
    </tr>
    <tr>
      <th><b class="ui-table-cell-label">Rank</b>8</th>
      <td><b class="ui-table-cell-label">Movie Title</b><a href="http://en.wikipedia.org/wiki/The_Wizard_of_Oz_(1939_film)" data-rel="external" class="ui-link">The Wizard of Oz</a></td>
      <td><b class="ui-table-cell-label">Year</b>1939</td>
      <td><b class="ui-table-cell-label">Rating</b>90%</td>
      <td><b class="ui-table-cell-label">Reviews</b>72</td>
    </tr>
    <tr>
      <th><b class="ui-table-cell-label">Rank</b>9</th>
      <td><b class="ui-table-cell-label">Movie Title</b><a href="http://en.wikipedia.org/wiki/Singin%27_in_the_Rain" data-rel="external" class="ui-link">Singin' in the Rain</a></td>
      <td><b class="ui-table-cell-label">Year</b>1952</td>
      <td><b class="ui-table-cell-label">Rating</b>89%</td>
      <td><b class="ui-table-cell-label">Reviews</b>85</td>
    </tr>
    <tr>
      <th><b class="ui-table-cell-label">Rank</b>10</th>
      <td class="title"><b class="ui-table-cell-label">Movie Title</b><a href="http://en.wikipedia.org/wiki/Inception" data-rel="external" class="ui-link">Inception</a></td>
      <td><b class="ui-table-cell-label">Year</b>2010</td>
      <td><b class="ui-table-cell-label">Rating</b>84%</td>
      <td><b class="ui-table-cell-label">Reviews</b>78</td>
    </tr>
  </tbody>
</table> 
```

CSS - 使表格响应。

```
@media ( min-width: 40em ) {
/* Show the table header rows and set all cells to display: table-cell */ 
.my-custom-breakpoint td,
.my-custom-breakpoint th,
.my-custom-breakpoint tbody th,
.my-custom-breakpoint tbody td,
.my-custom-breakpoint thead td,
.my-custom-breakpoint thead th {
    display: table-cell;
    margin: 0;
}
/* Hide the labels in each cell */ 
.my-custom-breakpoint td .ui-table-cell-label,
.my-custom-breakpoint th .ui-table-cell-label { 
    display: none;
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:31:44.523

您需要从表的 tbody 元素下的 th 和 td 元素中删除所有类。

```
'http://jsfiddle.net/cptCX/3/' 
```

希望这有帮助。

# javascript - Bootstrap：点击后链接保持选中状态

> ID：15712271
> 
> 赞同：2
> 
> 时间：2013-03-29T22:17:07.673
> 
> 标签：javascript, jquery, css, twitter-bootstrap

代码：

```
<h1><a href="#">link</a></h1>
<script>
$("a").click(function (e) {
    e.preventDefault();
});
</script> 
```

[http://jsfiddle.net/U7Y3r/](http://jsfiddle.net/U7Y3r/)

单击链接后，它会保留一个小边框：

![边界](../Images/ec7154d729a6511ff13605b124e6a0f2.png)

我在 Firefox 和 Internet Explorer 10 下看到过​​这种情况。在 Chrome 或没有 Bootstrap 的情况下不会发生。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T22:24:18.927

这是`outline`属性，您可以将其设置为`none`：

```
a:focus { outline: none } 
```

[http://jsfiddle.net/Uqzqy/1/](http://jsfiddle.net/Uqzqy/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T22:24:41.413

试试这个：

```
$("a").click(function (e) {
    e.preventDefault();
    $(this).css("outline", "none");
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-04-17T17:48:12.740

也可以（并且可能更简洁）使用[$.fn.blur](https://api.jquery.com/blur/)简单地删除链接焦点：

```
$("a").click(function (e) {
    $(this).blur();
    e.preventDefault();
}); 
```

[http://jsfiddle.net/U7Y3r/4/](http://jsfiddle.net/U7Y3r/4/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-29T22:22:48.383

这工作正常

```
 $("a").click(function (e) {
    e.preventDefault();
    $("a").css("text-decoration","none"); 
    }); 
```

[http://jsfiddle.net/U7Y3r/1/](http://jsfiddle.net/U7Y3r/1/)
再次获得相同的效果，[http://jsfiddle.net/U7Y3r/2/](http://jsfiddle.net/U7Y3r/2/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-09T08:47:35.670

实际上你*不需要*任何javascript。您只需将“焦点”上的“a”设置为“大纲：0；”

```
 /* CSS */
    a: focus { outline: 0; }

    // SCSS
    a {
       &:focus {
          outline: 0;
       }
    } 
```

# integration - 在红帽 OpenShift 或基础架构中集成 HDFS？

> ID：15712276
> 
> 赞同：2
> 
> 时间：2013-03-29T22:17:33.727
> 
> 标签：integration, hdfs, openshift

我有一个由五个虚拟机组成的集群（带有 KVM 管理程序），我想找到集成 HDFS 的最佳方法，以优化数据的存储管理。

由于 HDFS 是一个分布式文件系统，可以允许客户端并行访问一个文件，我想利用这个特性。那么，是否可以在集群中安装 HDFS 来管理 VM 的磁盘空间，或者将其集成到 OpenShift 中来管理 PaaS 最终用户的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-06T20:53:01.303

如果您正在考虑将其与 OpenShift Origin 或 OpenShift Enterprise 一起使用，那么您只需将 HDFS 作为用户磁盘空间公开给 OpenShift 节点，他们就可以使用它。请记住，当您在自己的基础架构上安装 OpenShift 时，您可以公开任何您想要的文件系统，只要您通常可以为 Linux 用户执行此操作。

# android - 如何在 Android 中的 SeekBar 上获得正确的高度？

> ID：15712279
> 
> 赞同：1
> 
> 时间：2013-03-29T22:18:01.337
> 
> 标签：android, seekbar

我在 Android 中有一个包含 SeekBar 元素的布局。SeekBar 的高度和宽度都设置为“fill_parent”。父级有一个 layout_weight，并根据显示它的屏幕大小改变大小。

我遇到的问题是我需要使用自定义图形作为 SeekBar 上的拇指图像，但图像不会缩放以匹配 SeekBar 大小。有时它太小，有时又太大。我尝试将 android:scaleType="fitXY" 添加到 SeekBar，但这没有帮助。我还尝试将拇指图像包装在 ScaleDrawable 中，但这也不起作用。

有谁知道如何做到这一点？

# ios - Use iPad 3's rear camera as magnifying glass

> ID：15712281
> 
> 赞同：-2
> 
> 时间：2013-03-29T22:18:29.223
> 
> 标签：ios, objective-c, ipad, cocoa-touch

I want to use the iPad3's rear camera as a magnifying glass as part of an app for elderly people.

My idea was to display the rear camera input with a fixed zoom (e.g. 3x). I haven't worked with iOS camera functionality yet - which UIView subclass do you recommend to use for this case and how can i display the camera's input (with a fixed zoom) without showing the camera buttons?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T23:58:19.347

I think you're going to get downvotes for the overly broad nature of your question; StackOverflow tends to be for solving very specific questions where the asker has tried something and can't make sense of the result.

That being said, probably the best place to start could be the AVFoundation, particularly the [`AVCaptureVideoPreviewLayer`](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVCaptureVideoPreviewLayer_Class/Reference/Reference.html) and the various bits of session you need successfully to create one. It's a layer rather than a view but trivial enough to wrap into a view, which wouldn't have any camera buttons unless you were specifically to start adding them. Transforms will work on it just like any other layer.

The AVFoundation was added in iOS 4\. Prior to that the recommendation would have been to use a [`UIImagePickerController`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html) with `showsCameraControls` set to `NO`. However that's extraordinarily inflexible, the exact `cameraViewTransform` you need to apply to properly frame the input is not really documented and in my experience Apple seem to manage to break something about it almost every major OS release and most minor releases. The AVFoundation is specifically meant to fix those problems.

So what you should probably do now is read up on AVCaptureVideoPreviewLayer, try to get a sample project working and post here again if you get stuck on suitably self-contained code fragments.

# c++ - 如何解决 Zero C Ice 编译中的 upCast 错误？- Gcc - 4.7 用 clang 编译

> ID：15712283
> 
> 赞同：0
> 
> 时间：2013-03-29T22:18:34.907
> 
> 标签：c++, gcc, clang, ice

我必须构建 Murmur（Mumble VOIP 客户端的服务器）。Murmur 和 Mumble 在其框架中使用 ZeroC Ice 3.4。我尝试制作 Murmur 并陷入编译错误。

错误如下：

```
>/usr/include/Ice/Handle.h: In instantiation of ‘IceInternal::Handle<T>::Handle(T*) [with T = Ice::Communicator]’:
/usr/include/Ice/OutgoingAsync.h:49:16:   required from here
/usr/include/Ice/Handle.h:66:13: error: ‘upCast’ was not declared in this scope, 
and no declarations were found by argument-dependent lookup at the point of instantiation [-fpermissive] 
```

我尝试了几次谷歌搜索，但只有两个链接。他们都没有解决我的问题。我找到了一种方法来实现我在 Murmur 和 Mumble 中的要求，但是这个错误让我发疯了。

我希望至少有一个人遇到过这个问题并解决了。我真的需要一个构建 Murmur 的解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T15:44:16.227

使用谷歌的强大力量，我发现解决你的问题很容易。

像[这样搜索](https://www.google.de/search?q=ZeroC%20%22%E2%80%98upCast%E2%80%99%20was%20not%20declared%20in%20this%20scope%22&aq=f&oq=ZeroC%20%22%E2%80%98upCast%E2%80%99%20was%20not%20declared%20in%20this%20scope%22&aqs=chrome.0.57.5069j0&sourceid=chrome&ie=UTF-8)

[会在这里](http://www.zeroc.com/forums/bug-reports/4965-slice2cpp-output-does-not-compile-standards-conformant-compiler.html)产生突出的 zeroC 错误

这反过来会链接到[为 gcc 4.7 和 clang 编写的补丁“grembo”（可能还有其他）](http://www.zeroc.com/forums/patches/5647-patch-compiling-ice-clang-gcc4-7-a.html)

你可能需要在你的搜索引擎功夫上工作。:)

# ajax - 使用 ajax 刷新 div（Wordpress 评论）

> ID：15712286
> 
> 赞同：0
> 
> 时间：2013-03-29T22:18:54.777
> 
> 标签：ajax

我想做的是有一个按钮，您可以单击该按钮来刷新评论部分而无需重新加载页面。这看起来应该很简单，但我无法理解 Ajax。

（还没有按钮，只是一个间隔）

```
setInterval(function(){
    $(".commentswrapper").load("html");
}, 10000);

Failed to load resource: the server responded with a status of 404 (Not Found)    
localhost:8888/post-title/html 
```

（链接中省略了 http://，因为 SO 不会让我将其包装在代码标签中或以其他方式发布）

那不应该只是刷新那个div的html吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:33:00.640

jquery load 方法请求一个 HTML 页面并将其放入您的 div 中。您提供的参数是来自您服务器的 URL。在您的示例中，它正在请求“HTML”的 URL，该 URL 在 Wordpress 中不存在。

要使这个工作，您必须编写一个新的服务器脚本，例如 Getcomments.php，它返回当前页面的评论。

这不是微不足道的，除非你已经在 php 中完成了一些服务器端编程并且熟悉 Wordpress codex，

# macos - OpenGL 相当于 GL_POINT_SIZE_ARRAY_OES？

> ID：15712290
> 
> 赞同：0
> 
> 时间：2013-03-29T22:19:04.353
> 
> 标签：macos, opengl, point-sprites

我正在尝试在一个小型 Mac 应用程序中绘制点精灵。我希望每个精灵都有自己的大小，并且我知道 OpenGL ES 具有客户端状态“GL_POINT_SIZE_ARRAY_OES”。

我做了一些谷歌搜索，发现有一个类似的值“GL_POINT_SIZE_ARRAY_APPLE”（你认为）应该做同样的事情。但是，出于某种原因，它似乎没有。这是我的绘图代码：

```
glEnableClientState(GL_VERTEX_ARRAY);
glEnableClientState(GL_POINT_SIZE_ARRAY_APPLE);

glVertexPointer(2, GL_FLOAT, sizeof(SpriteData), spriteVertices);
glPointSizePointerAPPLE(GL_FLOAT, sizeof(SpriteData), spriteVertices + sizeof(LocationF));

glDrawArrays(GL_POINTS, 0, spriteCount);

glDisableClientState(GL_POINT_SIZE_ARRAY_APPLE);
glDisableClientState(GL_VERTEX_ARRAY); 
```

SpriteData 是一个包含每个精灵的顶点/大小数据的结构。spriteVertices 只是该结构的交错数组。

顶点指针工作正常；它正在绘制精灵，但似乎忽略了它们的大小值。相反，它默认为 glPointSize() 设置的值。

尽管这段代码编译时没有任何警告，但在我看来，谷歌搜索“GL_POINT_SIZE_ARRAY_APPLE”几乎没有结果。这是一个无用的参数吗？如果是这样，我还能如何实现我想要的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T00:39:22.543

没有公开扩展的[官方 OpenGL](http://www.opengl.org/registry/)`GL_POINT_SIZE_ARRAY_APPLE`扩展。这可能是 Apple 标头中的一些碎屑，但您不应该使用它。只需使用通用顶点数组并使用您传递的值作为点大小。

如果你想要跨平台的代码，你应该避免依赖系统的头文件。相反，使用[适当的 OpenGL 加载器](http://www.opengl.org/wiki/OpenGL_Loading_Library)，它带有跨平台的标头，其中*不*包含系统相关的非标准碎屑。

# java - jaxb 绑定以覆盖数据类型 List to String jaxb unmarshals <xs:complextype name="Test" mixed="true"><xs:sequence><xs:any namespace="http://www.w3.org/1999/xhtml" minoccurs="0"><xs:sequence><xs:any namespace="http://www.w3.org/1999/xhtml" minoccurs="0"></xs:any></xs:sequence></xs:any></xs:sequence></xs:complextype>as protected List content; My jxb bindings file is : <jxb:bindings node="//xs:complexType[@name='Test']"><jxb:property><jxb:basetype name="java.lang.String"></jxb:basetype></jxb:property></jxb:bindings>and this makes the java equivalent as protected List <string>content; Is there a way I can get it to be protected String content ? What kind of TransactionOption are you running your Select query under? Also look in to using NO LOCK in your select query if you are okay to read uncommitted data. Look into this thread Effect of NOLOCK hint in SELECT statements javaxmljaxbjaxb2-maven-plugin 4 1 回答 1 This answer is useful 0 You can extend the generated class as described in this stackoverflow question: How can I extend Java code generated by JAXB, CXF or Hibernate tools? That should give you acces to the protected field 于 2013-03-29T22:23:56.640 回答 Related 1 c++ - 当客户端仅关闭发送的一半连接时，为什么 HTTP 服务器会关闭连接？ 1 c++ - asio的源代码中关于iocp的代码在哪里可以得到？ 2 sql - SQL - 一段时间内的平均记录数 2 prolog - 如何在序言中添加到列表末尾 2 sql - SQL-如果其中一行具有列值，则使所有行都显示列值 3 objective-c - 遍历字典数组以查找值 1 jquery-mobile - 更改 jQuery Mobile 水平分组单选按钮设置宽度：图例与输入拆分 1 ios - 如何在 uiimageview 的区域中添加 alpha 3 scala - maven中scaladoc的多模块聚合 1 python - 如何使用 ctypes 和 tesseract 3.0.2 识别数据而不是文件名？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15712297
> 
> 赞同：0
> 
> 时间：
> 
> 标签：java, xml, jaxb, jaxb2-maven-plugin

jaxb unmarshals

```
 <xs:complexType name="Test" mixed="true">
    <xs:sequence>
         <xs:any namespace="http://www.w3.org/1999/xhtml" minOccurs="0"/>
    </xs:sequence>
    <attributes.../>
    </xs:complexType> 
```

as `protected List<Object> content`;

My jxb bindings file is :

```
 <jxb:bindings node="//xs:complexType[@name='Test']">

                <jxb:property>
                <jxb:baseType name="java.lang.String"></jxb:baseType>
                </jxb:property>
        </jxb:bindings> 
```

and this makes the java equivalent as

```
protected List<String> content; 
```

Is there a way I can get it to be `protected String content` ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:23:56.640

You can extend the generated class as described in this stackoverflow question: [How can I extend Java code generated by JAXB, CXF or Hibernate tools?](https://stackoverflow.com/questions/780567/how-can-i-extend-java-code-generated-by-jaxb-cxf-or-hibernate-tools) That should give you acces to the protected field</string>

# c++ - Variable number of objects instantiated from a structure/class

> ID：15712306
> 
> 赞同：0
> 
> 时间：2013-03-29T22:20:06.720
> 
> 标签：c++, class, structure

I need to define a structure (or class) in c++ which has a fixed number of data/function members. Though the number of instances made from this class needs to increase or decrease (and I do not know how many instances I need, that's determined on the fly). An example is a class "book" with data members: "cost", "author", etc. but the number of books in the library can increase/decrease as people borrow/bring back books. So I cannot use something like:

```
book *pointer = new book[3] 
```

As I am not sure if I will have 3 books.

Please guide me on what kind of strategy I should take.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:29:15.607

你可以存储

```
std::vector<book> books 
```

[矢量](http://www.cplusplus.com/reference/vector/vector/)具有[调整大小](http://www.cplusplus.com/reference/vector/vector/resize/)的功能。

# xcode - Xcode: More efficient keyboard-based "back" navigation

> ID：15712310
> 
> 赞同：0
> 
> 时间：2013-03-29T22:20:26.443
> 
> 标签：xcode, ide, keyboard-shortcuts

In Xcode when we hold the mouse down on the "Back" arrow in the panel above the editor area, we get a popup window showing our navigation history. This is also a standard navigation behavior, seen in most Web browsers.

My question: Is there a keyboard shortcut (or XCode plugin) to pop open this Navigation History popup, so we can use arrow keys and quickly move a selection bar down to the item in the history list we would like to navigate to?

Rationale: When working in a given class, we tend to flip back and forth quite a few times between the `.m` and `.h` files for the class. Each flip creates an entry in the navigation history. So, to move back to the prior *class* we were editing, using keyboard shortcuts only, we need to hit the "go back" keyboard shortcut many times, undoing each flip between header/implementation. Seeing the list visually allows us to quickly identify and scroll down to the desired class in the history list, navigating directly there. When editing code, allowing the hands to remain on the keyboard is better.

Another solution could be: A keyboard shortcut to move back to the previous *class* (or `.xib` or other "significant" navigation item) rather than the previous *file*.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T02:27:26.377

> Is there a keyboard shortcut (or XCode plugin) to pop open this Navigation History popup

![key binding preferences](../Images/8e1c83dbe2def79902ee5b1328cf4eef.png)

**Yes.** The standard key binding is `Ctrl``2`, as indicated above. You can check the key bindings panel in Xcode's preferences for the current key binding on your system if there's any chance that you might have changed it.

# javascript - Referring to the window object from within a prototype

> ID：15712312
> 
> 赞同：2
> 
> 时间：2013-03-29T22:20:27.220
> 
> 标签：javascript, prototype

So, I'm trying to get some traction with prototypes in JavaScript, and I started by trying something basically like the second example in [Understanding prototypal inheritance in JavaScript](https://stackoverflow.com/questions/892595/javascript-prototypal-inheritance). Currently, I have a bunch of functions that, were I writing in C++, would certainly like to inherit from a parent class; imagine a bunch of functions like

```
function specificDevice(){
     this.codeNumber = 'abc123';
     this.wrapperDiv = window.parameters.dashboardDiv;
} 
```

I have a whole pile of these functions, and everything worked fine - but the code was kind of silly, since they all shared a lot of members cut and pasted from one to the next. So, per the link above, I did something like

```
function generalDevice(){
     this.codeNumber = 'abc123';
}

specificDevice.prototype = new generalDevice();

function specificDevice(){
     this.wrapperDiv = window.parameters.dashboardDiv;

     //just to check if this does what I think it does:
     alert(this.codeNumber);
     alert(this.wrapperDiv);
} 
```

And when I make a new instance of `specificDevice`, the alerts spat out exactly what I expected - 'abc123', and whatever I previously defined as `window.parameters.dashboardDiv` - perfect! But then, I tried to do what I figured would be the exactly analogous thing on the member variable being pulled from the `window` object; the above now becomes:

```
function generalDevice(){
     this.codeNumber = 'abc123';
     this.wrapperDiv = window.parameters.dashboardDiv;
}

specificDevice.prototype = new generalDevice();

function specificDevice(){
     alert(this.wrapperDiv)
} 
```

Disaster - the script falls over with a

```
'Cannot read property "dashboardDiv" of undefined'. 
```

I'm hoping the problem is obvious to the experts - how come I can make an object that happily recognizes my `window.parameters` as a thing, but that object's prototype thinks `window.parameters` doesn't exist?? Thanks in advance.

# ios - Map view span changes when updating the location

> ID：15712316
> 
> 赞同：0
> 
> 时间：2013-03-29T22:20:52.613
> 
> 标签：ios, objective-c, mapkit

I have a function in my view controller with a mapkit that is called when the location changes. I would like set to the map view so that is is centered around the current location and moves with it as it updates.

It works in a sense i.e it tracks along, however it is always **zoomed** in really far. If **I zoom out** it **snaps** back to where it was when it calls the update again after getting a new location.

```
in from params CLLocation *loc
bool first = TRUE;
if(first){
        first=FALSE; // bit of a bodge...if i set this to false it will track the update possition but not at the desired "zoom" its look far to close.
        CLLocation *loc = [[CLLocation alloc] initWithLatitude:54.976619 longitude:-1.613118];//newcastle city center.
        CLLocationDegrees spanLat = 1000;
        CLLocationDegrees spanLng = 1000;  
        userLocation = MKCoordinateRegionMakeWithDistance(loc.coordinate, spanLat, spanLng);
        [mapview setRegion:userLocation animated:TRUE];
    }else {
        CLLocationDegrees spanLat = [mapview region].span.latitudeDelta;//  keep the originals? DOESN'T WORK!!
        CLLocationDegrees spanLng = [mapview region].span.longitudeDelta;//  
        userLocation = MKCoordinateRegionMakeWithDistance(loc.coordinate, spanLat, spanLng);
        [mapview setRegion:userLocation animated:TRUE];
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T22:29:24.323

Just keep setting the center coordinate and don't set the region.

By the way, you do know that you don't need any of that code, right? You can just tell the mapview to track the device's current location. See my book for an example:

[http://www.apeth.com/iOSBook/ch34.html#_map_kit_and_current_location](http://www.apeth.com/iOSBook/ch34.html#_map_kit_and_current_location)

# c# - Is it possible in MonoTouch to determine if the user clicked on an image in a BadgeElement?

> ID：15712321
> 
> 赞同：0
> 
> 时间：2013-03-29T22:21:00.670
> 
> 标签：c#, ios, xamarin.ios, monotouch.dialog

I have amended the TODO list app to use a badge element instead of the boolean element as follows:

```
 protected void PopulateTable()
    {
        tasks = TaskManager.GetTasks().ToList ();
        UIImage ticked = new UIImage("checkbox_checked.png");
        UIImage unticked = UIImage.FromFile("checkbox_unchecked.png");

        Root = new RootElement("Tasky") {
            new Section() {
                from t in tasks
                select (Element) new BadgeElement(t.Completed ? ticked : unticked, (t.Name==""?"<new task>":t.Name), delegate {
                        Console.WriteLine("???");

                    })
            }
        }; 
    } 
```

Is it possible to check to see if the user has clicked an icon rather than the text, and change the behaviour? Essentially I want to do this...

```
 var task = tasks[indexPath.Row];

        if(clickedIcon) {
            currentTask = task;
            task.Completed = !task.Completed;
            TaskManager.SaveTask(currentTask);
        } else {
            ShowTaskDetails(task);
        } 
```

But I don't see any parameters inside IndexPath that allow me to access the column or the tapped element.

Any ideas

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T01:56:33.860

您需要创建 BadgeElement 的自定义版本，并且基本上为图像引发一个事件，该事件与为文本引发事件是分开的。

幸运的是，整个[源代码都可用](https://github.com/migueldeicaza/MonoTouch.Dialog/blob/master/MonoTouch.Dialog/Elements/ElementBadge.cs)，因此您只需复制/粘贴 BadgeElement、重命名、创建新的唯一键并对其进行修改。

# php - PHP按键反向排序子数组

> ID：15712331
> 
> 赞同：0
> 
> 时间：2013-03-29T22:21:55.087
> 
> 标签：php, sorting, multidimensional-array, usort

嘿伙计们，我正在尝试使用 usort 对多维数组进行反向排序，但在某处搞砸了。这是我的代码：

```
$array = array(
    array(123 => 'foo'), // duplicate
    array(124 => 'foo'),
    array(127 => 'foo'),
    array(126 => 'foo'),
    array(123 => 'foo'), // duplicate
    array(125 => 'foo'),
);

function rcmp($a, $b) {
    if($a == $b) {
        return 0;
    }
    return ($a < $b) ? -1 : 1;
}

usort($array, 'rcmp');

print_r($array);

/*
    Array
    (
        [0] => Array ( [126] => foo) )
        [1] => Array ( [125] => foo) )
        [2] => Array ( [127] => foo) )
        [3] => Array ( [123] => foo) )
        [4] => Array ( [124] => foo) )
        [5] => Array ( [123] => foo) )
    )
*/ 
```

我期待

```
/*
    Array
    (
        [0] => Array ( [127] => foo) )
        [1] => Array ( [126] => foo) )
        [2] => Array ( [125] => foo) )
        [3] => Array ( [124] => foo) )
        [4] => Array ( [123] => foo) )
        [5] => Array ( [123] => foo) )
    )
*/ 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T22:28:53.150

当您的比较函数`rcmp`被调用时，它的参数`$a`和`$b`是数组，因此您的相等和小于运算符将数组作为其操作数。

数组上的相等运算符的工作[方式如下](http://www.php.net/manual/en/language.operators.array.php)：

```
TRUE if $a and $b have the same key/value pairs. 
```

小于比较的工作[方式如下](http://php.net/manual/en/language.operators.comparison.php)：

> 成员较少的数组较小，如果在操作数 2 中找不到操作数 1 的键，则数组不可比较，否则 - 按值比较值。

“不可比较”表示比较结果为`null`，这反过来又导致`rcmp`返回`1`。

所以最终发生的是，当`$a`和`$b`不相同的数组`rcmp` [总是返回 1](http://ideone.com/e2aZMI)（即认为`$a`更大）。无论每个数组中的键是什么，都会发生这种情况，因此您会得到一个毫无意义的排序。

如果您想通过它们的第一个键对这些数组进行排序`usort`，您可以这样做：

```
function rcmp($a, $b)
{
    return key($a) - key($b);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T22:31:29.383

如果要对数组的索引进行比较，则必须在比较函数中提取索引并反转降序比较

```
function rcmp($a, $b) {
    $a = array_keys($a);
    $b = array_keys($b);

    if($a[0] == $b[0]) {
        return 0;
    }

    return ($a[0] < $b[0]) ? 1 : -1;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T22:40:52.817

Here's a solution using `create_function` that I came up with, accepting the best answer though. Thanks and hope this helps someone else out. $array = array( array(124 => 'foo'), array(123 => 'foo'), // duplicate array(127 => 'foo'), array(126 => 'foo'), array(123 => 'foo'), // duplicate array(125 => 'foo'), );

```
usort($array, create_function('$a, $b','return (key($a) == key($b)) 
                                                ? 0 
                                                : (key($a) < key($b)) 
                                                   ? -1 
                                                   : 1;'));

print_r($array); 
```

# c# - 没有数据注释的 MVC 中的自定义模型和客户端验证

> ID：15712335
> 
> 赞同：0
> 
> 时间：2013-03-29T22:23:01.767
> 
> 标签：c#, asp.net-mvc, validation, model-validation

我有以下视图模型，用于表示问题调查，但它们被构造成更扁平的网格以适应默认模型活页夹。

```
// Main ViewModel for the Question View
public class SurveyRowList
{
    ...

    public IList<SurveyRow> SurveyRowList { get; set; }
}

public class SurveyRow
{
    public int QuestionId { get; set; }
    public int? ParentQuestionId { get; set; }
    public int SurveyId { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
    public string HelpInformation { get; set; }
    public int RenderOrder { get; set; }

    public SurveyRowType RowType { get; set; }

    // Collection of the same answer control, 1 or more times
    // for each line number
    public IList<AnswerControl> AnswerControls { get; set; }
}

public enum SurveyRowType
{
    QuestionGroup = 1,
    Question = 2,
    AnswerRow = 3
}

public class AnswerControl
{
    public int Id { get; set; }
    public int QuestionId { get; set; }

    // a reference to the database record answer id
    public int SurveyAnswerId { get; set; }

    // control type of checkbox, dropdown, input, dropdown-additional-textbox, checkbox-group
    public ControlType ControlType { get; set; }

    // used to specify getting particular backing data for dropdown and checkbox-group
    public ControlSpecificType ControlSpecificType { get; set; }

    public string Description { get; set; }
    public string HelpInformation { get; set; }
    public int RenderOrder { get; set; }
    public bool InLine { get; set; }

    public int LineNumber { get; set; }

    public AnswerControlValueType Value { get; set; }

}

public class AnswerControlValueType
{
    // Default string backing value when possible
    public string Value { get; set; }

    // AnswerCheckBox
    public bool CheckValue { get; set; }

    // AnswerCheckBoxListModal
    public string ModalName { get; set; }

    // AnswerMultiSelectListValue
    public int[] ListValues { get; set; }
    // making the options list setter public so that this data can be re-attached after model binding
    public IEnumerable<SelectListItem> ListOptions { get; set; }

    // AnswerImageValue
    public HttpPostedFileBase Image { get; set; }

    // AnswerSelectListAdditionalValue
    public string AdditionalInformation { get; set; }
} 
```

每个`SurveyRow`都像一张桌子的一排。只有`SurveyRowType.AnswerRow`实际使用`AnswerControls`列表。

在此图中可以看到按类型和订单号呈现时的排序示例： ![在此处输入图像描述](../Images/7214d9254ce9c6e79c2da6868b439d0d.png)

该图像仅显示了一些简单的示例，每页可以有 1-10 行，最多 100 行，但我还添加了一些我想要应用的验证规则的解释。还有更多，但这些只是几个例子。

我的问题是我想支持这种更复杂的验证，但所有规则和错误文本都存储在数据库中，1\. 因为用户配置，2\. 因为错误文本的现有本地化支持多种语言。

我正在寻找人们可能必须能够支持这一点的任何建议。

我已经看到了[Fluent Validation](http://fluentvalidation.codeplex.com/)之类的东西，但我还没有深入研究，但到目前为止，我看不到任何不会在模型上使用数据注释的示例..以及适用的 RequiredIf 或 DisabledIf 或 EnabledIf 样式验证规则跨越稍微复杂的对象集合。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T22:40:15.280

I worked with MVC patterns in 2001 with servlets, and again in 2006, with a custom MVC framework implemented on top of ASP.NET, and looking at what people are doing nowadays makes me believe that most did not even care about looking at what MVC stands for, only that explain the models nonsense. A lot of developers working with ASP.net MVC, tend to bind the data that is coming from the client to models, but that is such a poor design. Models contain the data that should be forwarded to the template manager which is in most cases the Razor engine.

[http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)

So my advice is: don't link the data that you get from the client into the models.

*   Get the data from the client, do a search on the Request object if it needs to
*   Validate the data (fluentvalidation)
*   apply the business rules
*   create the models
*   将模型转发到模板引擎

也停止使用那些疯狂无用的注释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T00:28:54.373

我的问题与我如何支持验证这个复杂模型有关。从那以后，我更多地研究了 Fluent Validation，它拥有为复杂模型执行自定义规则所需的一切，即检查模型中对象集合的值。

# python - 使用单词列表的 Python 字符串比较

> ID：15712340
> 
> 赞同：1
> 
> 时间：2013-03-29T22:23:22.400
> 
> 标签：python, list, string-comparison

最终我将能够在聊天室中发布类似这样的简单问题，但现在我必须发布它。我仍在努力解决 Python 中的比较问题。我有一个包含从文件中获得的字符串的列表。我有一个函数，它接收单词列表（以前从文件创建）和一些“密文”。我正在尝试使用 Shift Cipher 蛮力破解密文。我的问题与比较整数相同。虽然我在尝试使用打印语句进行调试时可以看到，我的密文将被转移到单词列表中的一个单词，但它永远不会评估为 True。我可能正在比较两种不同的变量类型，或者 /n 可能会导致比较失败。对不起今天的所有帖子，我今天做了很多练习题，为即将到来的作业做准备。

```
 def shift_encrypt(s, m):

   shiftAmt = s % 26
   msgAsNumList = string2nlist(m)

   shiftedNumList = add_val_mod26(msgAsNumList, shiftAmt)
   print 'Here is the shifted number list: ', shiftedNumList

   # Take the shifted number list and convert it back to a string
   numListtoMsg = nlist2string(shiftedNumList)
   msgString = ''.join(numListtoMsg)

   return msgString

 def add_val_mod26(nlist, value):
   newValue = value % 26
   print 'Value to Add after mod 26: ', newValue
   listLen = len(nlist)
   index = 0
   while index < listLen:
       nlist[index] = (nlist[index] + newValue) % 26
       index = index + 1
   return nlist

 def string2nlist(m):
   characters =    ['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z']
   numbers = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25]
   newList = []
   msgLen = len(m)         # var msgLen will be an integer of the length

   index = 0               # iterate through message length in while loop
   while index < msgLen:
       letter = m[index]   # iterate through message m
       i = 0
       while i < 26:
           if letter == characters[i]:
               newList.append(numbers[i])
           i = i + 1
       index = index + 1
    return newList

  def nlist2string(nlist):
    characters = ['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z']
    numbers = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25]
    newList = []
    nListLen = len(nlist)

    index = 0
    while index < nListLen:
        num = nlist[index]
        newNum = num % 26
        i = 0
        while i < 26:
            num1 = newNum
            num2 = numbers[i]
            if (num1 == num2):
            newList.append(characters[i])
        i = i + 1
    index = index + 1
    return newList

  def wordList(filename):

    fileObject = open(filename, "r+")                    
    wordsList = fileObject.readlines()
    return wordsList

  def shift_computePlaintext(wlist, c):

    index = 0
    while index < 26:
        newCipher = shift_encrypt(index, c)
        print 'The new cipher text is: ', newCipher
        wordlistLen = len(wlist)
        i = 0
        while i < wordlistLen:
            print wlist[i]
            if newCipher == wlist[i]:
                return newCipher
            else:
                print 'Word not found.'
            i = i + 1
        index = index + 1    

   print 'Take Ciphertext and Find Plaintext from Wordlist Function: \n'
   list = wordList('test.txt')
   print list
   plainText = shift_computePlaintext(list, 'vium')
   print 'The plaintext was found in the wordlist: ', plainText 
```

当移位量 = 18 时，密文 = 名称，这是我的单词列表中的一个单词，但它永远不会评估为 True。感谢您提前提供任何帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T23:22:10.663

到目前为止，我们很难确定我们所掌握的信息，但这里有一个猜测：

```
wordsList = fileObject.readlines() 
```

这将返回一个`list`保留换行符的字符串，例如：

```
['hello\n', 'my\n', 'name\n', 'is\n', 'jesi\n'] 
```

所以，在里面`shift_computePlaintext`，当你迭代`wlist`寻找与解密的匹配的东西时`'vium'`，你正在寻找一个匹配的字符串，`'name'`但它们都不匹配，包括`'name\n'`.

换句话说，正是你所怀疑的。

有几种方法可以解决这个问题，但最明显的是使用`wlist[i].strip()`代替，或者首先使用类似代替的`wlist[i]`东西来剥离所有内容。`wordsList = [line.strip() for line in fileObject]``wordsList = fileObject.readlines()`

* * *

一些旁注：

几乎从来没有一个很好的理由打电话`readlines()`。这会返回一个可以迭代的行列表……但是文件对象本身已经是一个可以迭代的行的迭代。如果你真的需要确保它是一个列表而不是其他类型的可迭代，或者为以后制作单独的副本，或者其他什么，只需调用`list`它，就像使用任何其他可迭代一样。

你几乎不应该写这样的循环：

```
index = 0
while index < 26:
    # ...
    index = index + 1 
```

相反，只需这样做：

```
for index in range(26): 
```

它更容易阅读，更难出错（微妙的逐个错误导致您一生中将要进行的令人沮丧的调试有一半）等等。

如果你在一个集合的长度上循环，甚至不要这样做。而不是这个：

```
wordlistLen = len(wlist)
i = 0
while i < wordlistLen:
    # ...
    word = wlist[i]
    # ...
    i = i + 1 
```

......只需这样做：

```
for word in wlist: 
```

…或者，如果你需要两者`i`并且`word`（你偶尔会这样做）：

```
for i, word in enumerate(wlist): 
```

同时，如果你循环一个集合的唯一原因是检查它的每个值，你甚至不需要那个。而不是这个：

```
wordlistLen = len(wlist)
while i < wordlistLen:
    print wlist[i]
    if newCipher == wlist[i]:
        return newCipher
    else:
        print 'Word not found.'
    i = i + 1 
```

......只需这样做：

```
if newCipher in wlist:
    return newCipher
else:
    print 'Word not found.' 
```

在这里，您实际上遇到了其中一个微妙的错误：您一遍又一遍地打印“Word not found”，而不是在未找到时仅在最后打印一次。

# c++ - How to control (i.e. abort) the current evaluation of a QScriptEngine

> ID：15712341
> 
> 赞同：0
> 
> 时间：2013-03-29T22:23:22.687
> 
> 标签：c++, qt, asynchronous, future, qtconcurrent

I evaluate JavaScript in my Qt application using [`QScriptEngine::evaluate(QString code)`](http://qt-project.org/doc/qt-4.8/qscriptengine.html#evaluate). Let's say I evaluate a buggy piece of JavaScript which loops forever (or takes too long to wait for the result). How can I *abort* such an execution?

I want to control an evaluation via two buttons `Run` and `Abort` in a GUI. (But only one execution is allowed at a time.)

I thought of running the script via [`QtConcurrent::run`](http://qt-project.org/doc/qt-4.8/qtconcurrentrun.html), keeping the [`QFuture`](http://qt-project.org/doc/qt-4.8/qfuture.html) and calling [`cancel()`](http://qt-project.org/doc/qt-4.8/qfuture.html#cancel) when the `Abort` is was pressed. But the documentation says that I can't abort such executions. It seems like `QFuture` only cancels after the current item in the job has been processed, i.e. when reducing or filtering a collection. But for `QtConcurrent::run` this means that I can't use the future to abort its execution.

The other possibility I came up with was using a [`QThread`](http://qt-project.org/doc/qt-4.8/qthread.html) and calling [`quit()`](http://qt-project.org/doc/qt-4.8/qthread.html#quit), but there I have a similar problems: It only cancels the thread if / as soon as it is waiting in an event loop. But since my execution is a single function call, this is no option either.

`QThread` also has [`terminate()`](http://qt-project.org/doc/qt-4.8/qthread.html#terminate), but the documentation makes me worry a bit. Although my code itself doesn't involve mutexes, maybe `QScriptEngine::evaluate` does behind the scenes?

> **Warning:** This function is dangerous and its use is discouraged. The thread can be terminated at any point in its code path. Threads can be terminated while modifying data. There is no chance for the thread to clean up after itself, unlock any held mutexes, etc. In short, use this function only if absolutely necessary.

Is there another option I am missing, maybe some asynchronous evaluation feature?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T22:33:32.993

[http://doc.qt.io/qt-4.8/qscriptengine.html#details](http://doc.qt.io/qt-4.8/qscriptengine.html#details)

它有几个部分可以解决您的问题：

[http://doc.qt.io/qt-4.8/qscriptengine.html#long-running-scripts](http://doc.qt.io/qt-4.8/qscriptengine.html#long-running-scripts)

[http://doc.qt.io/qt-4.8/qscriptengine.html#script-exceptions](http://doc.qt.io/qt-4.8/qscriptengine.html#script-exceptions)

[http://doc.qt.io/qt-4.8/qscriptengine.html#abortEvaluation](http://doc.qt.io/qt-4.8/qscriptengine.html#abortEvaluation)

[http://doc.qt.io/qt-4.8/qscriptengine.html#setProcessEventsInterval](http://doc.qt.io/qt-4.8/qscriptengine.html#setProcessEventsInterval)

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T22:31:45.210

虽然并发任务本身不能“从外部”中止，但`QScriptEngine`可以告诉（当然是从另一个线程，如您的 GUI 线程）中止执行：

[`QScriptEngine::abortEvaluation(const QScriptValue & result = QScriptValue())`](http://qt-project.org/doc/qt-4.8/qscriptengine.html#abortEvaluation)

可选参数用作传递给调用者的“伪结果” [`evaluate()`](http://qt-project.org/doc/qt-4.8/qscriptengine.html#evaluate)。

您应该在某处设置标志或使用特殊结果值，[`abortEvaluation()`](http://qt-project.org/doc/qt-4.8/qscriptengine.html#abortEvaluation)以使调用程序例程能够检测到执行已中止。

注意：使用[`isEvaluating()`](http://qt-project.org/doc/qt-4.8/qscriptengine.html#isEvaluating)您可以查看当前是否正在运行评估。

# excel - Excel formula Iferror

> ID：15712344
> 
> 赞同：0
> 
> 时间：2013-03-29T22:23:30.343
> 
> 标签：excel, formula

I have a drop down list (data validation) that populates other cells using vlookup that pulls data from a separate worksheet. I'd like to include an error message if the field is blank like "No data entered". However, I am getting "0" instead. Here is the formula I used:

```
=IFERROR(VLOOKUP(ChildName,Children,6,FALSE),"No data entered") 
```

I then changed this to an ISERROR:

```
=IF(ISERROR(VLOOKUP(ChildName,Children,5,FALSE))=FALSE,"No data entered", VLOOKUP(ChildName,Children,5,FALSE)) 
```

This gives the error message appropriately but now my drop down list does not populate the other cells! What am I doing wrong? Thank you!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T22:40:21.440

~~查看您的公式，我看到两个值得注意的点：~~

~~*   在 IFERROR 中返回第 6 列，在 ISERROR 中返回第 5 列！~~
2.  ~~在 ISERROR 中，如您所说，当发现某些内容时会显示错误消息`=IF(ISERROR=FALSE,ErrorMsg,...)`！要解决您的问题，只需使用以下公式：

    ```
    =IF(ChildName="","未输入数据",IFERROR(VLOOKUP(ChildName,Children,6,0),"找不到"&ChildName))
    ```~~ 

啊，我明白了！看看这个问题 -[有返回 0 的 Excel 公式，使结果为空](https://stackoverflow.com/questions/15239466/have-excel-formulas-that-return-0-make-the-result-blank)。它显示了所有方式。

我最喜欢的是`=IFERROR(1/1/VLOOKUP(ChildName,Children,6,0),"No data!")`。仅适用于数字。

否则，使用`=IF(VLOOKUP(ChildName,Children,6,0),VLOOKUP(ChildName,Children,6,0),"No data!")`.

为了安全起见，这个版本应该解决所有潜在的问题：`=IFERROR(IF(VLOOKUP(ChildName,Children,6,0),VLOOKUP(ChildName,Children,6,0),"No data!"),"No data!")`

# ios - 条件表视图单元格显示

> ID：15712345
> 
> 赞同：0
> 
> 时间：2013-03-29T22:23:33.133
> 
> 标签：ios, tableview, afnetworking

只有当我的 AFNetworking 请求将 json 对象返回为 true 时，我才想显示一个 tableview 单元格。在此示例中，我需要将 place = "Store" 设置为 true，以便显示仅显示商店的表格视图。

place = "Store" json 在以下请求中作为我的 location_results 数组的一部分返回，我将其存储在`self.place = [dictionary objectForKey:@"place"];`

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // LoadLocations

  [[LocationApiClient sharedInstance] getPath:@"locations.json" parameters:nil                                     success:^(AFHTTPRequestOperation *operation, id response) {
    NSLog(@"Response: %@", response);
    NSMutableArray *location_results = [NSMutableArray array];
    for (id locationDictionary in response) {
        Location *location = [[Location alloc] initWithDictionary:locationDictionary];
        [location_results addObject:location];

    }
    self.location_results = location_results;
    [self.tableView reloadData];
}
                                    failure:^(AFHTTPRequestOperation *operation, NSError *error) {
                                        NSLog(@"Error fetching locations!");
                                        NSLog(@"%@", error);

                                    }]; 
```

我知道我需要从改变开始

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return self.location_results.count;
} 
```

但不确定如何。

然后我应该能够添加一个条件语句

```
- (LocationCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *cellIdentifier = @"LocationCell"; 
```

但不确定如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T22:39:57.007

如果您有所有结果的工作代码，那么结果子集的工作代码很简单。用 替换对 的引用`self.location_results`，`[self filteredLocationResults]`实现如下：

```
- (NSArray *)filteredLocationResults {

    return [self.location_results filteredArrayUsingPredicate:
        [NSPredicate predicateWithFormat:@"(%K like %@)". @"place" ,@"Store"]];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T23:22:04.020

您可以将“存储”项放入表的数据源中：

```
for (id locationDictionary in response) {
    Location *location = [[Location alloc] initWithDictionary:locationDictionary];
    if([[location objectForKey:@"place"] isEqualToString:@"Store"]) // Add this line
        [location_results addObject:location];

} 
```

# struts2 - abstract classes in struts2 forms

> ID：15712347
> 
> 赞同：1
> 
> 时间：2013-03-29T22:23:44.627
> 
> 标签：struts2

I want to have a form that creates one of several subclasses in a type hierarchy. Say it's AbstractPerson with the subclasses Employee and Visitor.

Can I do that with a single Action / REST-Controller Bean?

Usually I use the form-ids smart, so it assigns values directly to the setters of my Action. So if I have a member like

```
AbstractPerson member; 
```

I would try to use a form with an input field called "member.name".

However, struts must create an instance of AbstractPerson first - and it can't because it's abstract! It would be very cool if I could give struts2 a hint that it should actually create a Empolyee or Visitor object (depending on the form content). Is that or sth similar possible?

Cheers!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T05:28:36.437

这类似于我最近通过一小组 crud 操作访问实体类所做的事情。那是一些 crud 操作允许您对某个包中的所有实体类进行操作。您应该能够将此策略应用于您的 Employee 和 Visitor 类。

简而言之，它是如何工作的：

1) 您需要在命名空间或操作名称中指定应创建的类的名称。

2）您使用struts2s 可准备接口来创建模型。（反射性地创建从步骤 1 确定的类。

3）使用模型驱动接口，返回步骤2中定义的对象。这样对象在栈顶，你可以简单地说“name”，知道它是步骤中确定的Class的name属性1\. 你可以避免这一步，但它不是那么漂亮。

现在这样做有一个小故障，您会发现要执行上述三个步骤，您需要一个自定义堆栈，即“staticParams-prepare-params”堆栈。

首先是一个示例，然后是该堆栈的定义以使其工作，如果您有任何问题，请告诉我：

```
package com.quaternion.demo.action.crud;

import com.quaternion.demo.orm.ActionValidateable;
import com.quaternion.demo.service.CrudService;
import com.quaternion.demo.util.ActionUtils;
import com.opensymphony.xwork2.ActionSupport;
import com.opensymphony.xwork2.ModelDriven;
import com.opensymphony.xwork2.Preparable;
import java.util.HashMap;
import java.util.Map;
import java.util.logging.Level;
import java.util.logging.Logger;
import org.apache.struts2.convention.annotation.Namespace;
import org.apache.struts2.convention.annotation.ParentPackage;
import org.apache.struts2.convention.annotation.Result;
import org.springframework.beans.factory.annotation.Autowired;

// Adds a new record to the database
@ParentPackage("staticParams-prepare-parms")
@Namespace("/crud/{entityName}")
@Result(type = "kjson") //TODO: could rid of this line by setting the result as the default for the package
public class AddAction extends ActionSupport implements Preparable, ModelDriven {

    private static final Logger log = Logger.getLogger(AddAction.class.getName());
    @Autowired
    private CrudService crudService;
    private String entityName; 
    private Object entityModel; 
    private Map jsonModel = new HashMap(); //for output, return the newly created object
    private Class clazz;

    @Override
    public String execute() throws ClassNotFoundException, InstantiationException, IllegalAccessException {
        log.log(Level.INFO, "In execute entityName is set with {0}", entityName);
        //If an id is passed in it will merge the object with that id, null will be used for unset attributes
        String status = SUCCESS;
        boolean error = false;
        Object entity = null;
        try { 
            entity = crudService.create(clazz, entityModel);
        } catch (Exception e) {
            error = true;
            status = ERROR;
            jsonModel.put("message", e.getMessage());
        }
        if (error == false) {
            jsonModel.put("entity", entity);
        }
        jsonModel.put("status", status);
        return SUCCESS;
    }

    public Object getEntityModel() {
        return entityModel;
    }

    public void setEntityModel(Object entityModel) {
        this.entityModel = entityModel;
    }

    public Object getJsonModel() {
        return jsonModel;
    }

    @Override
    public Object getModel() {
        return this.entityModel;
    }

    @Override
    public void prepare() throws Exception {
        log.log(Level.INFO, "In prepare entityName is set with {0}", entityName);
        clazz = ActionUtils.initClazz(entityName);
        entityModel = clazz.newInstance();
    }

    public String getEntityName() {
        return entityName;
    }

    public void setEntityName(String entityName) {
        this.entityName = entityName;
    }

    //TODO: validation would be a good idea can't implement in this class need to delegate
    //if entity implements a validate method, this validate should
    //call that validate
    @Override
    public void validate(){
        if (entityModel instanceof ActionValidateable){
            ((ActionValidateable)entityModel).validate(this);
        }
    }
} 
```

这是堆栈的定义：

```
<package name="staticParams-prepare-parms" extends="struts-default">
    <result-types>
        <result-type name="kjson" default="true" class="com.quaternion.demo.result.Kjson"/>
    </result-types>
    <interceptors>
        <interceptor-stack name="staticParamsPrepareParamsStack">
            <interceptor-ref name="exception"/>
            <interceptor-ref name="alias"/>
            <interceptor-ref name="i18n"/>
            <interceptor-ref name="checkbox"/>
            <interceptor-ref name="multiselect"/>
            <interceptor-ref name="staticParams"/>
            <interceptor-ref name="actionMappingParams"/>
            <interceptor-ref name="servletConfig"/>
            <interceptor-ref name="prepare"/>
            <interceptor-ref name="chain"/>
            <interceptor-ref name="modelDriven"/>
            <interceptor-ref name="fileUpload"/>
            <interceptor-ref name="staticParams"/>
            <interceptor-ref name="actionMappingParams"/>
            <interceptor-ref name="params">
                <param name="excludeParams">dojo\..*,^struts\..*,^session\..*,^request\..*,^application\..*,^servlet(Request|Response)\..*,parameters\...*</param>
            </interceptor-ref>
            <interceptor-ref name="conversionError"/>
            <interceptor-ref name="validation">
                <param name="excludeMethods">input,back,cancel,browse</param>
            </interceptor-ref>
            <interceptor-ref name="workflow">
                <param name="excludeMethods">input,back,cancel,browse</param>
            </interceptor-ref>
        </interceptor-stack>
    </interceptors>
    <default-interceptor-ref name="staticParamsPrepareParamsStack"/>
</package> 
```

您可能想知道 kjson 结果类型是什么。struts2-json 插件在其他几个动作上让我感到挑战。我创建了一个通用的分页和读取操作，“flexjson”默认情况下不会序列化集合，这可以防止延迟加载问题（在没有加载集合的情况下，这些简单的服务总是会出现这种情况）所以 kjson 只是一个使用 flexjson 返回 json 的结果类型。

# php - 保护 GET 请求的好方法？

> ID：15712352
> 
> 赞同：0
> 
> 时间：2013-03-29T22:24:06.020
> 
> 标签：php, ios, api

我正在构建一个示例服务器，以便我可以学习 PHP，并且想知道这是否是保护我的数据库的好方法。本质上，我发送的是我自己的 API 密钥。这甚至做任何有用的事情，还是很容易克服。

如果这很可怕，那么解决这个问题的标准方法是什么？

下面是php文件

```
<?php
//Check if insert function exists
$apiKey = "6dM7V0n5GqYJLTMibQDf2gA2a94h8hbF";

if(function_exists($_GET['insert']) && ($_GET['key'])==$apiKey) {

    $id = $_GET['id'];
    $first=$_GET['first'];
    $last = $_GET['last'];

    //If found, call the function inser with value as a parameter
   $_GET['insert']($id,$first,$last);
}
?> 
```

Web 请求看起来像（来自 iOS 应用程序）；

```
 NSURL*url=[NSURL URLWithString:@"http://localhost/Tutorials/index.php?insert=insert&id=9000&first=YOOOO&last=LOOOO&key=6dM7V0n5GqYJLTMibQDf2gA2a94h8hbF"];

    //URL request
    NSURLRequest*request=[NSURLRequest requestWithURL:url];

    //Set the connection
    connection = [NSURLConnection connectionWithRequest:request delegate:self];

    if (connection) {
        webData=[[NSMutableData alloc]init];
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T22:35:59.330

为了证明它是多么不安全，我可以请求这个页面：

```
http://example.com/yourpage.php?insert=exec&id=rm+-rf+%2F&key=6dM7V0n5GqYJLTMibQDf2gA2a94h8hbF 
```

Unless some configuration blocks it, this will wipe your server's drive as much as PHP has access to it (which will probably be your entire website)

Instead, you should create a list of valid functions, and refer to them by ID. Store the functions in an array, and get the index pointed to by a GET parameter.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T22:28:42.213

是的，这不安全，您可以强制客户端进入 HTTPS 连接，或者使用某种双向加密，因为这种方式非常不安全。

看看这里：

[http://tinsology.net/2009/06/creating-a-secure-login-system-the-right-way/](http://tinsology.net/2009/06/creating-a-secure-login-system-the-right-way/)

# .htaccess - 将目录重定向到子域

> ID：15712358
> 
> 赞同：4
> 
> 时间：2013-03-29T22:24:50.977
> 
> 标签：.htaccess, redirect

我的域指向 Heroku 中的 Rails 应用程序，例如，当您想访问一些视频时，您将有一个 URL，例如：

`http://codigofacilito.com/video/W53XHWkbz34`

我们需要将该应用程序更改为子域，因此更新后的版本将是：

`http://videos.codigofacilito.com/video/W53XHWkbz34`

我想知道的是：

有没有办法通过使用 .htaccess 文件将人们重定向到带有子域视频的新 url。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-30T05:22:43.340

如果您需要将此规则仅应用于视频路由，请尝试以下操作：

在文档根目录的`.htaccess`文件中，插入以下规则：

```
RewriteRule ^(video/.*)$ http://videos.codigofacilito.com/$1 [R=301,L,NC] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-06-02T11:24:02.410

这对我有用

```
RedirectMatch 301 ^/xxx/(.*)$ http://xxx.domain.com/$1 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-30T05:28:41.943

使用[mod_alias](//httpd.apache.org/docs/trunk/mod/mod_alias.html#redirect)：

```
Redirect permanent /video http://videos.codigofacilito.com/video 
```

该关键字`permanent`导致 Apache 发送 HTTP 状态，`301 Moved Permanently`而不是`302 Found`.

# python - 多个循环导入会降低性能吗？

> ID：15712363
> 
> 赞同：-3
> 
> 时间：2013-03-29T22:25:18.313
> 
> 标签：python, performance, python-2.7

我有 K python 文件需要在任何地方都存在，以前我试图分离它们的逻辑并在每个 python 代码中一个一个地导入它们，现在我只想循环导入这些 K 文件中的每一个。

似乎这可能会导致 K^2 负载，但是我无法释放足够的大脑空间来实际考虑它。

假设 K=4 并且有 a.py,b.py,c.py,d.py：我正在考虑在 a.py 的末尾从 b.py,c.py,d.py 导入所有内容-and- b.py c.py 和 d.py 只会在顶部导入 a.py。并且 any.py 只是导入 a.py 因为一切都已经在其中了。

另一种选择是 any.py 导入 a.py b.py c.py d.py，但是很难将这 4 个分开。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T22:54:15.933

正如所有评论所指出的那样，这是一个可疑的设计，可能会误导您和您的合作者/读者，使维护更加困难等。

但这不是性能问题。

当您多次调用同一事物的导入时，每次在第一次之后都需要恒定（几乎没有）时间。（默认）导入机制在 sys.modules 中查找它，发现它已经存在，然后返回它。所以，这里没有 O(K^2) ；没关系）。

你可以很容易地自己测试一下。创建这些文件：

```
# a.py
print('a')
import b
import c

# b.py
import a
print('b')

# c.py
import a
print('c') 
```

现在，启动 Python 解释器并执行以下操作：

```
>>> import a
a
b
c
>>> import b
>>> import a 
```

每个项目只出现一次，因为进口商`print`在第一次之后永远不会得到声明。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T22:58:13.880

This is basically what packages are for. Put all the Python files in a directory, add an `__init__.py` that imports them all, and then you can just import the directory as a Python module.

# python - Python：如何处理剪贴板中的粘贴文本？

> ID：15712364
> 
> 赞同：1
> 
> 时间：2013-03-29T22:25:31.550
> 
> 标签：python, string

我正在处理这样的字符串：

```
 scrpt = "\tFrame\tX pixels\tY pixels\r\n\t2\t615.5\t334.5\r\n\t3\t615.885\t334.136\r\n\t4\t615.937\t334.087\r\n\t5\t615.917\t334.106\r\n\t6\t615.892\t334.129\r\n\t7\t615.905\t334.117\r\n\t8\t615.767\t334.246\r\n\t9\t615.546\t334.456\r\n\t10\t615.352\t334.643\r\n\r\n"

    infile = StringIO(scrpt)
    #pretend infile was just a regular file...

    r = csv.DictReader(infile, dialect=csv.Sniffer().sniff(infile.read(1000)))
    infile.seek(0)

    Frame, Xco, Yco = [],[],[]
    for row in r:
        Frame.append(row['Frame'])
        Xco.append(row['X pixels'])
        Yco.append(row['Y pixels']) 
```

这工作正常。我将字符串变量“scrpt”很好地分类为变量“Frame”、“Xco”和“Yco”

现在，如果我这样做：

```
print(scrpt) 
```

我看到东西整齐地排列在标签列中，如下所示：

```
Frame   X pixels    Y pixels

2   615.5   334.5
3   615.885 334.136
4   615.937 334.087
5   615.917 334.106
6   615.892 334.129
7   615.905 334.117
8   615.767 334.246
9   615.546 334.456
10  615.352 334.643 
```

但是，如果我从剪贴板粘贴了相同的字符串并尝试处理它，它就不起作用。在这种情况下，如果我这样打印：

```
print(scrpt) 
```

我懂了：

```
\tFrame\tX pixels\tY pixels\r\n\t2\t615.5\t334.5\r\n\t3\t615.885\t334.136\r\n\t4\t615.937\t334.087\r\n\t5\t615.917\t334.106\r\n\t6\t615.892\t334.129\r\n\t7\t615.905\t334.117\r\n\t8\t615.767\t334.246\r\n\t9\t615.546\t334.456\r\n\t10\t615.352\t334.643\r\n\r\n 
```

然后，当我去处理它时， csv 模块不会对其进行排序。

我究竟做错了什么？看起来我在两种情况下都使用相同的数据，但有些不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:40:50.960

我的猜测是你的剪贴板有文字反斜杠和`t`字符，而不是制表符。例如，如果您只是从源代码的第一行复制，这正是您将得到的。

换句话说，就好像你这样做了：

```
scrpt = r"\tFrame\tX pixels\tY pixels\r\n\t2\t615.5\t334.5\r\n\t3\t615.885\t334.136\r\n\t4\t615.937\t334.087\r\n\t5\t615.917\t334.106\r\n\t6\t615.892\t334.129\r\n\t7\t615.905\t334.117\r\n\t8\t615.767\t334.246\r\n\t9\t615.546\t334.456\r\n\t10\t615.352\t334.643\r\n\r\n" 
```

……或者，等效地：

```
scrpt = "\\tFrame\\tX pixels\\tY pixels\\r\\n\\t2\\t615.5\\t334.5\\r\\n\\t3\\t615.885\\t334.136\\r\\n\\t4\\t615.937\\t334.087\\r\\n\\t5\\t615.917\\t334.106\\r\\n\\t6\\t615.892\\t334.129\\r\\n\\t7\\t615.905\\t334.117\\r\\n\\t8\\t615.767\\t334.246\\r\\n\\t9\\t615.546\\t334.456\\r\\n\\t10\\t615.352\\t334.643\\r\\n\\r\\n" 
```

如果这是问题所在，则修复非常简单：

```
scrpt = scrpt.decode('string_escape') 
```

或者，在 3.x 中（你不能调用`decode`a `str`）：

```
script = codecs.decode(script, 'unicode_escape') 
```

编解码器在模块中的[标准编码](http://docs.python.org/3/library/codecs.html#standard-encodings)`unicode_escape`列表中进行了描述。它定义为：`codecs`

> 在 Python 源代码中生成一个适合作为 Unicode 文字的字符串

In other words, if you `encode` with this codec, it will replace each non-printing Unicode character with an escape sequence that you can type into your source code. If you've got a tab character, it'll replace that with a backslash character and a `t`.

You want to do the exact reverse of that: you've got a string you copied out of source code, with source-code-style escape sequences, and you want to interpret it the same way the Python interpreter does. So, you just `decode` with the same codec. If you've got a backslash followed by a `t`, it'll replace them with a tab character.

It's worth playing with this in the interactive interpreter (remember to keep the `repr` and `str` representations straight while doing so!) until you get it.

# git - Git：“传播”变基到同一根的其他分支

> ID：15712366
> 
> 赞同：3
> 
> 时间：2013-03-29T22:25:36.650
> 
> 标签：git, git-rebase

我想知道这是否可以“传播”分支的变基。让我们考虑以下设置：

```
branchA *-*-*-*-*-*-<*>
               \
        branchB *-*-*-*
                       \
                branchC *-*-*-* 
```

如果在创建分支 B 之后对分支 A 进行了一些更改，则可能需要分支 B 的变基。但是如果我们对 branchB 进行 rebase，使其从 commit <*> 开始，branchC 将不会自动更新。

您是否可能知道 Git 中是否有一种方法可以在重新设置该祖先分支时自动重新设置具有共同祖先的分支（换句话说，“传播”重新设置）？

非常感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T00:36:48.360

不，git 不包含此功能。但你可以自己做。重新设置基准`branchC`，然后查看其历史记录以找到与`branchB`指向匹配的提交。注意它的 SHA 并运行：

```
git branch -f branchB *newSHA* 
```

这种情况应该非常罕见，因为您不应该重写已发布的历史，而您本地未发布的历史通常是直截了当且没有分支的。

# c# - 将许多二进制文件传输到 SQL Server 数据库的有效方法

> ID：15712371
> 
> 赞同：1
> 
> 时间：2013-03-29T22:26:30.673
> 
> 标签：c#, sql-server, nhibernate, memory, filesystems

我们需要 Winforms 应用程序从本地文件系统（或网络位置）读取数千个文件并将它们存储在数据库中。

我想知道加载文件的最有效方法是什么？总共可能有许多千兆字节的数据。

`File.ReadAllBytes`当前正在使用，但应用程序最终会在计算机内存用完时锁定。

当前代码循环遍历包含文件路径的表，用于读取二进制数据：

```
protected CustomFile ConvertFile(string path)
{
    try
    {
        byte[] file = File.ReadAllBytes(path);
        return new CustomFile { FileValue = file };
    }
    catch
    {
        return null;
    }
} 
```

然后使用 NHibernate 作为 ORM 将数据保存到数据库（SQL Server 2008 R2 或 2012）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T22:47:50.910

首先，让我声明我的知识是 NET 4.0 之前的，所以这些信息可能已经过时了，因为我知道他们将在这方面做出改进。

不要使用[File.ReadAllBytes](http://msdn.microsoft.com/en-us/library/system.io.file.readallbytes.aspx)读取大文件（大于 85kb），特别是当您按顺序读取许多文件时。我再说一遍，不要。

使用流和[BinaryReader.Read](http://msdn.microsoft.com/en-us/library/493z3f6h.aspx)之类的东西来缓冲您的阅读。即使这听起来效率不高，因为您不会通过单个缓冲区对 CPU 进行爆破，但如果您使用 ReadAllBytes 执行此操作，它根本不会像您发现的那样工作。

原因是 ReadAllBytes 读取字节数组中的整个内容。如果该字节数组在 mem 中 > 85Kb（还​​有其他考虑因素，例如数组元素的数量），它将进入大对象堆，这很好，但是 LOH 不会移动内存，也不会对释放的空间进行碎片整理，所以，简化，这可能发生：

*   读取 1GB 文件，你在 LOH 中有一个 1GB 块，保存文件。（无 GC 循环）
*   读取 1.5GB 文件，您请求 1.5GB 内存块，它进入 LOH 的末尾，但假设您获得一个 GC 周期，因此您之前使用的 1GB 块被清除，但现在您有一块 2.5GB 内存，前1GB免费。
*   读取一个 1.6GB 的文件，开始的 1GB 空闲块不起作用，所以分配器走到最后。现在你有一个 4.1GB 的内存块。
*   重复。

您的内存不足，但您肯定并没有真正使用它，碎片可能会杀死您。如果文件非常大（我认为 Windows 32 位的进程空间是 2GB？），您实际上也可以遇到真正的 OOM 情况。

如果文件没有排序或相互依赖，则可能有几个线程通过使用 BinaryReader 缓冲来读取它们将完成工作。

参考：

[http://www.red-gate.com/products/dotnet-development/ants-memory-profiler/learning-memory-management/memory-management-fundamentals](http://www.red-gate.com/products/dotnet-development/ants-memory-profiler/learning-memory-management/memory-management-fundamentals)

[https://www.simple-talk.com/dotnet/.net-framework/the-dangers-of-the-large-object-heap/](https://www.simple-talk.com/dotnet/.net-framework/the-dangers-of-the-large-object-heap/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T22:45:19.200

如果你有很多文件，你应该一个接一个地阅读它们。

如果您有大文件，并且数据库允许，您应该将它们逐块读取到缓冲区中，然后将它们逐块写入数据库。如果使用，当文件太大而无法放入运行时的内存时`File.ReadAllBytes`，您可能会得到一个。`OutOfMemoryException`上限小于2 GiB，应用运行一段时间后内存碎片化时甚至更小。

# javascript - Jquery选择具有类的顶级后代

> ID：15712376
> 
> 赞同：0
> 
> 时间：2013-03-29T22:27:18.477
> 
> 标签：javascript, jquery

假设我有一个像这样的 DOM：

```
<body>
<div class="a" data="a"><!-- 1 -->
    <div>
        <div class="a" data="b"><!-- 2 -->
        </div>
    </div>
    <div class="a" data="c"><!-- 3 -->
        <div class="a" data="d"><!-- 4 -->
            <div class="a" data="e"><!-- 5 -->

            </div>
        </div>
        <div class="a" data="f"><!-- 6 -->
            <div class="a" data="g"><!-- 7 -->

            </div>
        </div>
    </div>
</div>
<div>
    <div class="a" data="h"><!-- 8 -->

    </div>
</div>
</body> 
```

如何选择具有类的匹配元素的顶级元素`a`？

例如`$('body').selector...`应该选择1和8。 `$('[data="a"]').selector...`应该选择2和3。 `$('[data="c"]').selector...`应该选择4和6。请注意html结构只是一个例子，它可以有任何其他结构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:34:00.360

做这样的事情的一个好方法（虽然有点棘手）是向后考虑。要查找（在您的示例中）1 和 8，您可以执行以下操作：

```
var oneAndEight = $('.a').filter(function() {
  return $(this).parents('.a').length === 0;
}); 
```

这就是所有“.a”元素，没有其他“.a”元素更接近 DOM 根。要获得 2 和 3，您将寻找元素和根之间只有一个“.a”的那些。

概括地说，这是一个简单的插件：

```
$.atDepth = function(sel, depth) {
  return $(sel).filter(function() {
    return $(this).parents(sel).length == depth;
  });
}); 
```

要获得 1 和 8：

```
var oneAndEight = $.atDepth(".a", 0); 
```

对于 5 和 7：

```
var fiveAndSeven = $.atDepth(".a", 3); 
```

我认为这不能用一个简单的选择器来完成，因为 CSS 选择器语法没有“任何不包括 x”的机制。

*编辑*——[这是一个 jsbin](http://jsbin.com/opofoh/1)；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T23:02:37.713

这似乎做到了：

```
$(".a:not(.a .a)") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T23:36:09.183

我已经通过添加我自己的选择器来解决它：

```
$.fn.topLevel = function(sel) {
    var master = $(this);
  return master.find(sel).filter(function() {
    return $(this).parentsUntil(master,sel).length == 0;
  });
}; 
```

但我仍然认为还有更*棘手*的解决方案。

# jquery - 仅匹配纯 CSS 中的第一个后代？

> ID：15712377
> 
> 赞同：0
> 
> 时间：2013-03-29T22:27:21.923
> 
> 标签：jquery, css

纯 css 中是否有一种优雅的方式来*仅*匹配第一个后代——类似于 jquery first()？

在 jQuery 中：

```
$(".outer .title").first(); 
```

标记会有所不同，因此使用直接后代 > 选择器是不可靠的。

```
<div class="outer">
  <div class="title"></div>
  <div class="inner">
     <div class="title" />
  </div>
</div> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T22:32:01.993

查找 CSS 选择器 - [W3Schools CSS 选择器](http://www.w3schools.com/cssref/css_selectors.asp)

这可能是您正在寻找的东西：
`.outer .thing:first-child {}`

你也可以试试`nth-child()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T22:32:17.720

更新：此答案基于已在问题中编辑的结构：

```
<div class="outer">
    <div class="thing">
        <div class="inner">
            <div class="thing" />
        </div>
    </div>
</div> 
```

使用这样的嵌套，如果对象在其内部，最好的选择是*恢复样式；*

```
.outer .thing { /* styles */ }
.thing .thing { /* revert styles */ } 
```

使用这样的结构：

```
<div class="outer">
    <div class="thing" />
    <div class="inner">
        <div class="thing" />
    </div>
</div> 
```

你有更少的选择；

```
/* assume thing will always be a direct child of outer */
.outer > .thing {}

/* assume thing will always be the VERY FIRST child of outer */
.outer > thing:first-child {}

/* assume thing will always be inside the VERY FIRST child of outer */
.outer > .thing:first-child, .outer > *:first-child .thing {}

/* assume the thing you don't want will always be inside inner */
.outer .thing {}
.inner .thing { /* revert styles */ } 
```

不过，这两种结构都很愚蠢。这看起来像标题/子标题，在这种情况下你可以这样做：

```
<header>
    <h1></h1>
    <p></p>
</header> 
```

或者

```
<hgroup>
    <h1></h1>
    <h2></h2>
</hgroup> 
```

或远离标准标签：

```
<div class="outer">
    <div class="title" />
    <div class="subtitle" />
</div> 
```

or using multiple classes

```
<div class="outer">
    <div class="title maintitle" />
    <div class="inner">
        <div class="title subtitle" />
    </div>
</div> 
```

# c# - Graphics.DrawPolygon 未在正确位置绘制

> ID：15712380
> 
> 赞同：0
> 
> 时间：2013-03-29T22:28:04.553
> 
> 标签：c#, .net, bitmap

左边是我使用类似绘画的程序绘制的多边形。右边是System.Drawing.Bitmap/Graphics绘制的多边形：

![](../Images/daa3d4744bd3c1857649ad7c49af4205.png)

绘制它的代码如下：

```
protected static Bitmap CropImage(Bitmap src, Vector2[] rect)
{
    var result = new Bitmap(src.Width, src.Height);
    using (Graphics g = Graphics.FromImage(result))
    {
        g.InterpolationMode = InterpolationMode.HighQualityBicubic;

        var pen = new Pen(Color.White);

        g.DrawImage(src, new Point(0,0));
        var poly = rect.Select(p => p.ToPointF()).ToArray();
        g.DrawPolygon(pen, poly);

    }
    return result;
} 
```

`poly`是：

```
{System.Drawing.PointF[4]}
    [0]: {X = 57.4230042 Y = 57.4229736}
    [1]: {X = 147.058868 Y = 56.0224}
    [2]: {X = 148.43277 Y = 143.951767}
    [3]: {X = 58.7969131 Y = 145.352341} 
```

图像中的每个黑色方块都是 50x50。如果您查看`poly`，所有坐标都完全符合您的预期：`poly[0]`略高于 50,50，对应于标有“6”的黑色方块*内部*（如左图所示）。

那么如何`Graphics`混淆并把它放在错误的位置呢？看起来它正在缩小整个矩形。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T22:38:13.157

你很困惑。矩形是正确的，但是背景图像被放大了。请注意，6 和黑色正方形要大得多，但矩形的大小完全相同。

请注意，该[`Graphics.DrawImage`方法](http://msdn.microsoft.com/en-us/library/42807xh1.aspx)会缩放源图像以匹配目标分辨率。

> 此方法使用其物理尺寸绘制图像，因此无论显示设备的分辨率（每英寸点数）如何，图像都将具有以英寸为单位的正确尺寸。例如，假设图像的像素宽度为 216，水平分辨率为每英寸 72 点。如果调用此方法在分辨率为每英寸 96 点的设备上绘制该图像，则渲染图像的像素宽度将为 (216/72)*96 = 288。

您应该使用接受 a的[重载](http://msdn.microsoft.com/en-us/library/yws82c40.aspx)`Rectangle`：

```
g.DrawImage(src, new Rectangle(0, 0, src.Width, src.Height)); 
```

# ios - 子视图被截断？

> ID：15712381
> 
> 赞同：0
> 
> 时间：2013-03-29T22:28:05.570
> 
> 标签：ios, objective-c, uiviewcontroller, containment

我有一个看起来像这样的子视图控制器：

![在此处输入图像描述](../Images/5a681e21336c23c589771986821928c8.png)

我将它嵌入到另一个父视图控制器中，

```
@implementation ContainmentViewController

- (id)initWithCoder:(NSCoder *)decoder {
    if(self = [super initWithCoder:decoder]) {
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.prototypeVC = [self.storyboard instantiateViewControllerWithIdentifier:@"PrototypeViewController"];

    [self addChildViewController:self.prototypeVC];
    [self.view addSubview:self.prototypeVC.view];
    [self.prototypeVC didMoveToParentViewController:self];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
} 
```

这就是它在原始子 VC 中的样子：；

![在此处输入图像描述](../Images/1e766b964557ec08fff2ac30007a1960.png)

这是它在 ContainmentVC 中的样子：

![在此处输入图像描述](../Images/7cf8b9fda47999bd73449f3ce621b3fe.png)

我究竟做错了什么？

注意：我必须在 ChildVC 上选择“想要全屏”，否则我会在顶部看到 20 像素的空白区域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T00:14:04.823

I got fed up with playing with storyboard.

So I unchecked Wants Full Screen

and added the following:

```
self.prototypeVC.view.frame = CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height); 
```

Everything works now

# php - 使用preg_replace显示段落，每个段落可以加一张照片吗？

> ID：15712384
> 
> 赞同：0
> 
> 时间：2013-03-29T22:28:18.990
> 
> 标签：php, mysql

我正在为我的一个网站建立一个新闻部分。我将每篇新闻文章的信息存储在数据库表中`news`，文章的正文在`copy`类型设置为的列中`longtext`。

我使用以下代码行将新闻文章显示为段落：

```
<p class="news_copy"><?php  echo preg_replace('/[\r\n]+/', '</p><p class="news_copy">', $news['copy']); ?></p> 
```

它绝对完美。

这篇文章的原因是因为我希望能够为每篇新闻文章显示不止一张照片。我在数据库中设置了一个主要图片，但是如果一个故事中有 4 张其他照片，另一个故事中有 6 张（除了主要图片），我有什么方法可以显示，比如说，1 张或更多照片(s) 每段？

如果这太令人困惑，我会很乐意详细说明。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:52:06.723

```
<?php echo insert_par_and_photos($news['copy'], $news['photos']); ?>

function insert_par_and_photos($copy, $photos) {
  $pars = preg_split('/[\r\n]+/', $copy);
  $result = '';
  foreach ($pars as $i => $par) {
    $result .= '<p class="news_copy">';
    $result .= $par;
    if ($i < count($photos)) {
      $result .= '<img src="'+$photos[$i]+'"/>';
    }
    $result .= '</p>';        
  }
  return $result;
} 
```

# javascript - Jquery/javascript单选按钮隐藏/显示页面加载检查属性的逻辑

> ID：15712386
> 
> 赞同：1
> 
> 时间：2013-03-29T22:28:30.107
> 
> 标签：javascript, jquery, show-hide

我试图根据是否选中单选按钮来编写用于隐藏/显示描述的 jquery/JS 逻辑。如果在页面加载时选中单选按钮，我希望加载与该单选按钮关联的描述。但是必须选择/选中其中一个的默认值

我确实尝试使用 .change 编写代码并单击 ready() 中的方法。但是没有成功

我只有两个单选按钮，我不是 Javascript/jquery 人。任何输入表示赞赏。这是一个例子

```
<div id="ServiceSelection">     
 <input type="radio" name="Service" checked="Checked" value="B"> Option 1
  <br>
 <input type="radio" name="Service" value="P"> Option 2
  <br>
  <div id="DivB" style="display:none" class="desc">B  Description goes here </div>
 <div id="DivP" style="display:none" class="desc">P Description goes here </div>    
</div> 
```

编辑DIV：

```
<div id="ServiceSelection">     
<input type="radio" name="Service" checked="Checked" value="B"> Option 1
<br>
<div id="DivB" style="display:none" class="desc">B  Description goes here </div>
<input type="radio" name="Service" value="P"> Option 2
<br>
<div id="DivP" style="display:none" class="desc">P Description goes here </div>    
</div> 
```

提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T22:44:20.883

```
if($('input[name=Service]').is(':checked')){ //is it checked?
    var v = $('input[name=Service]:checked').val(); //get the value
    $('div[id$='+v+']').show(); //target the end of selector, and match it to our value
}

$('input[name=Service]').on('click', function(){
   $(this).parent().find('div').hide(); //hide the divs...
   $('div[id$='+$(this).val()+']').show(); //show the div based on our value again..
}); 
```

[小提琴](http://jsfiddle.net/vpv4X/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T22:43:54.077

尝试这个：

```
function ShowData(evt) {
    var val = $("input[name=Service]:checked").val();
    if (val == 'B') {
        $('#DivB').show();
        $('#DivP').hide();
    } else {
        $('#DivP').show();
        $('#DivB').hide();
    }
}

$('input[name=Service]:radio').change(ShowData);
ShowData(); 
```

[**在这里演示**](http://jsfiddle.net/2gVEm/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T22:51:18.990

我建议：

```
// hide the div elements with JavaScript, so they're visible to those
// users with JavaScript disabled:
$('#ServiceSelection div[id]').hide();

// select the radio input elements and bind to the change event
$('input:radio').change(function(){
    // find the element whose id is equal to 'Div' + the value of the radio,
    // show that div, hide the sibling div elements
    $('#Div' + this.value).show().siblings('div').hide();
// filter the radio elements to find the one that's checked, and trigger the change event
}).filter(function(){return this.checked; }).change(); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/nd7aq/)。

参考：

*   [`change()`](http://api.jquery.com/change/).
*   [`filter()`](http://api.jquery.com/filter/).
*   [`hide ()`](http://api.jquery.com/hide/).
*   [`show()`](http://api.jquery.com/show/).
*   [`siblings()`](http://api.jquery.com/siblings/).

# c++ - 如何在 C++ 中反转字符数组？

> ID：15712394
> 
> 赞同：-3
> 
> 时间：2013-03-29T22:29:20.060
> 
> 标签：c++, arrays, string, cstring

我们的老师希望我们编写一个反转字符数组顺序的程序。因此，如果用户输入“hello”，程序将输出“olleh”。

这是我们得到的功能：

```
void reverse_string(char coolstring[11], char newcoolstring[11])
{
    int count = 0, count2 = 0;

    while(coolstring[count] != '\0')
    {
        count++;
    }
    count -= 1;

    cout << coolstring[count];
    system("pause");

    while(coolstring[count] != 0)
    {
        newcoolstring[count] = coolstring[count2];
        count -= 1;
        count2 += 1;
    }   
} 
```

但它不起作用，我在试图让它起作用时不知道为什么。你能指出我正确的方向吗？

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T22:51:21.970

这是您应该自己解决的问题，但这里有一些可以为您指明正确方向的问题：

假设它`coolstring`看起来像这样：

```
 0  |  1  |  2  |  3  |  4  |  5
'h' | 'e' | 'l' | 'l' | 'o' | '\0' 
```

此循环将检索此字符串的大小：

```
while(coolstring[count] != '\0')
    count++; 
```

但是由于您想`count`用作索引并且`count`在这种情况下等于 5，因此您不想复制终止 ( `'\0'`) 字符，因此您应该首先开始（这是在循环后减少后`coolstring[4]`输出的点。 ..让你意识到它是）。`coolstring[count]``count``while``'o'`

现在看看这段代码：

```
while(coolstring[count] != '\0')
{
    newcoolstring[count] = coolstring[count2];
    count--;
    count2++;
} 
```

问问自己这些问题：

1.  什么时候`coolstring[count]`等于`'\0'`我们开始`'o'`和递减的时间`count`？
2.  如何`newcoolstring`处理这个循环？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T22:36:43.313

我认为我们需要更具体地描述它是如何不起作用的。你尝试了哪些输入，你得到了什么样的错误行为？

仅从您的示例来看，错误可能是您只能显示原始字符串的最后一个字母。那是因为你有一个 cout 声明可以做到这一点，就在 line 之前`system("pause")`。您是否在其他任何地方显示输出字符串？

# scala - Play2 + Casbah：如何为 ObjectId 提供隐式写入

> ID：15712402
> 
> 赞同：2
> 
> 时间：2013-03-29T22:29:56.827
> 
> 标签：scala, playframework, casbah, salat

有一个简单的模型类，其中包含一些数据库 ID。它看起来像这样：

```
case class Post(id: ObjectId, owner: Option[ObjectId], title: String)

object Post {
  implicit val implicitPostWrites = Json.writes[Post]
} 
```

使用此代码，编译器会给我以下错误：

> com.mongodb.casbah.commons.TypeImports.ObjectId 没有可用的隐式写入。隐式 valimplicitFooWrites = Json.writes[Foo]

很明显缺少什么，但我不知道如何为 com.mongodb.casbah.commons.TypeImports.ObjectId 提供隐式写入。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T05:40:00.953

该错误意味着它不知道如何序列化`ObjectId`并希望您`Writer`为它提供一个。这是序列化它的一种方法：

```
object Post {

  implicit val objectIdWrites = new Writes[ObjectId] {
      def writes(oId: ObjectId): JsValue = {
        JsString(oId.toString)
      }
  }

   implicit val implicitPostWrites = Json.writes[Post]
} 
```

更多信息和解释可[在此处](http://mandubian.com/2012/10/01/unveiling-play-2-dot-1-json-api-part2-writes-format-combinators/)获得。

# ssh - 通过 ssh 访问 Raspbian wheezy 桌面 GUI

> ID：15712403
> 
> 赞同：13
> 
> 时间：2013-03-29T22:30:09.390
> 
> 标签：ssh, raspberry-pi, raspbian

我有一个通过 SSH 访问的 Raspberry pi，但现在我需要在其上运行一个具有 GUI 的 python 程序。我不确定如何通过 SSH 做到这一点。通常我通过输入 startx 进入我的 raspi 桌面 gui。有什么我可以通过 ssh 做这样的事情吗？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-01T15:09:00.570

kjprice 提到的方法只是显示您在远程主机上启动的应用程序。如果您想查看完整的桌面，您可以创建一个新的 Xserver 或使用 Xephyr 在您当前使用的 Xserver 中嵌套一个 Xserver。

那么首先创建一个新的嵌套 Xserver：

```
user@host $ Xephyr :1 -screen 800x600 & 
```

应生成一个名为“Xephyr on :1”的窗口。SSH 进入远程主机并将显示转发到创建的显示：

```
user@host $ DISPLAY=:1 ssh -Y username@remotehost 
```

现在在远程主机上启动一个会话，在我的例子中是 LXDE：

```
user@remotehost $ lxsession 
```

您现在应该在 Xephyr 中看到桌面。高频

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-29T22:34:25.107

您可以使用 ssh 进行 X11 转发。如果您启动 ssh 会话，`-Y`否则`-X`它将启用 X11 转发。因此，您在该会话中运行的任何创建窗口的程序，该窗口都将在本地绘制。您还可以传递`ssh`命令来运行：

```
$ ssh -Y user@$some_ip /path/to/some/remote/python_script.py 
```

如果你想要一个完整的 gui 会话，那么你需要在 rasp pi 上设置一个 RDP 或 VNC 服务器，并通过一些客户端连接到它。

# scala - 两个字符串的叉积

> ID：15712405
> 
> 赞同：3
> 
> 时间：2013-03-29T22:30:28.643
> 
> 标签：scala

我刚开始使用 Scala，对于我的第一个项目，我正在编写一个数独求解器。我遇到了一个很棒的网站，它解释了数独以及如何编写求解器：http: [//norvig.com/sudoku.html](http://norvig.com/sudoku.html)，我正在尝试从这个网站创建相应的 Scala 代码。

数独网格的正方形基本上是行名和列名的叉积，这可以在 Python 中使用列表推导非常容易地生成：

```
# cross("AB", "12") = ["A1", "A2", "B1", "B2"]
def cross(A, B):
    "Cross product of elements in A and elements in B."
    return [a+b for a in A for b in B] 
```

我花了一段时间思考如何在 Scala 中优雅地做到这一点，这就是我想出的：

```
// cross("AB", "12") => List[String]("A1", "A2", "B1", "B2")
def cross(r: String, c: String) = {
   for(i <- r; j <- c) yield i + "" + j
}.toList 
```

我只是好奇在 Scala 中是否有更好的方法来做到这一点？如果我能这样做，它看起来会更干净，`yield i + j`但这会导致`Int`某种原因。任何意见或建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T22:56:57.983

是的，加法`Char`是通过添加它们的整数等价物来定义的。我认为你的代码很好。您还可以使用字符串插值，并保留`toList`（您将得到一个不可变的索引序列，这很好）：

```
def cross(r: String, c: String) = for(i <- r; j <- c) yield s"$i$j" 
```

* * *

**编辑**

An `IndexedSeq` is at least as powerful as `List`. Just check your successive usage of the result. Does it require a `List`? E.g. do you want to use `head` and `tail` and pattern match with `::`. If not, there is no reason why you should need to enforce `List`. If you use `map` and `flatMap` on the input arguments instead of the syntactic sugar with `for`, you can use the `collection.breakOut` argument to directly map to a `List`:

```
def cross(r: String, c: String): List[String] = 
  r.flatMap(i => c.map(j => s"$i$j"))(collection.breakOut) 
```

Not as pretty, but faster than an extra `toList`.

# jquery - 在 Typescript 中制作简单的 Qtip 描述符

> ID：15712407
> 
> 赞同：0
> 
> 时间：2013-03-29T22:30:35.270
> 
> 标签：jquery, typescript, qtip

我正在将大量 Javascript 重写为 Typescript，并且我有该`jquery.d.ts`文件，它可以让我进行 ajax 调用等，但是我需要为 Qtip 创建自己的描述符。

我认为它会是这样的：

```
interface JQuery
{
   qtip(options:any);
} 
```

但是这不起作用，只是一直告诉我方法 qtip `doesnt exist on value of type JQuery`。

所以我错过了什么吗？我这样称呼它：

```
$("#some-element").qtip({some: "options"}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T23:04:45.093

在 jquery.d.ts 中，调用的结果`$`命名为`JQuery`，而不是`Jquery`。这里的命名区分大小写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:12:31.490

最终这个问题归结为我构建项目的方式，我有 3 或 4 个模块，它们都是相互依赖的。所以使用这个 jquery 扩展引用的实际类工作正常。但是，当后续文件在不引用扩展名的情况下引用该文件时，它会爆炸，但看起来问题出在原始文件中，而不是在引用文件中。

# php - PHP - 获取给定命名空间的定义常量

> ID：15712411
> 
> 赞同：3
> 
> 时间：2013-03-29T22:30:58.943
> 
> 标签：php, namespaces, constants

我有一组用于数据存储的类。它目前有一个用于 Google Drive、Dropbox、Box、FTP 和本地连接的工作连接器。我设计它是为了构建一个文件管理器，客户端可以在其中管理多个数据存储源。

我的问题来了。目前，我对该`addConnection()`方法的实现如下：

```
// addConnection - adds a storage connection to the storage manager
public function addConnection($service, $credentials) {
    if (!empty($service) && !empty($credentials)) {
        if (in_array($service, [Connectors\Box, Connectors\Dropbox, Connectors\FTP, Connectors\GoogleDrive, Connectors\Local], true)) {
            // rest goes here...
        }
    }
} 
```

我将常量放在一个单独的命名空间中，如下所示：

```
namespace Services\Storage\Connectors {
    const Box = "Box";
    const Dropbox = "Dropbox";
    const FTP = "FTP";
    const GoogleDrive = "GoogleDrive";
    const Local = "Local";
} 
```

有没有办法让我为给定的命名空间获取所有定义的常量？这样，我可以构造一个函数来获取所有定义的常量并编写更优雅的东西，例如`in_array($service, getConstants($this->getNamespace()), true)`.

你能给我一个提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T22:45:28.417

您可以使用以下命令获取所有用户定义的常量，[`get_defined_constants`](http://php.net/manual/en/function.get-defined-constants.php)然后使用以下命令检查命名空间[`strpos`](http://php.net/manual/en/function.strpos.php)：

```
$constants = get_defined_constants(TRUE)['user'];

foreach ($constants as $name => $value)
{

  if (0 === strpos($name, 'services\storage\connectors'))
  {
    $services_storage_connectors[] = $name;
  }

}

echo '<pre>' . print_r($services_storage_connectors, TRUE) . '</pre>';

/*

Array
(
    [0] => services\storage\connectors\Box
    [1] => services\storage\connectors\Dropbox
    [2] => services\storage\connectors\FTP
    [3] => services\storage\connectors\GoogleDrive
    [4] => services\storage\connectors\Local
)

*/ 
```

Note that `$name` is lowercase, even if the namespace is defined with uppercase letters.

**Edit: In case you'd like it in fewer lines**

```
 $constants = array_filter(array_keys(get_defined_constants(TRUE)['user']), function ($name)
  {
    return 0 === strpos($name, 'services\storage\connectors');
  }
  ); 
```

# css - 如何让子 div 向右浮动并在它之前“高于” div？

> ID：15712412
> 
> 赞同：1
> 
> 时间：2013-03-29T22:31:04.083
> 
> 标签：css, html

我创建了一个父 div，里面有四个 div。第一个 div（灰色）包含一个图像，第二个（红色）将在此 div 下方带有描述。另外两个 div 将浮动在这两个的右侧。

这是我能得到的最接近的：

![代码截图](../Images/fdc1eea9356e0a4816414f7ae8a826f7.png)

我希望第 3/4 个 div 坐在顶部。我可以使用负的上边距，但我希望它自然上升。此外，我无法重新排列 div 的顺序。这是一个基本问题/误解，但我无法为谷歌给出足够清晰的定义。

这是我的html：

```
<div id="container">

<div class="imgbox"></div>

<div class="pick" id="first"></div>

<div class="pick" id="second"></div>

<div class="pick" id="third"></div>

</div> 
```

这是CSS：

```
#container {
        width: 440px;
        height: 212px;
        border: 1px solid grey;
    }

    div {
        border: 1px solid black;
        display: block;
    }

    .imgbox {
        width: 218px;
        height: 100px;
        float: left;
        clear: none;
        background-color: grey;
    }

    .pick {
        width: 218px;
        height: 100px;
    }

    .pick#first {
        float: left;
        clear: left;
        background-color: red;
    }

    .pick#second {
        float: left;
        background-color: blue;
    }

    .pick#third {
        float: right;
        clear: right;
        background-color: purple;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T22:36:00.467

只需使用通用 CSS 将两侧包装在一个 div 中。

HTML：

```
<div id="container">

<div class="l">
<div class="imgbox">0</div>
<div class="pick" id="first">1</div>
</div>

<div class="l">
<div class="pick" id="second">2</div>
<div class="pick" id="third">3</div> 
</div>

</div> 
```

-

CSS：

```
#container {
        width: 440px;
        height: 212px;
        border: 1px solid grey;
    }

    div {
        border: 1px solid black;
        display: block;
    }

.l { width: 218px; float: left; }

    .imgbox {
        width: 218px;
        height: 100px;
        background-color: grey;
    }

    .pick {
        width: 218px;
        height: 100px;
    }

    .pick#first {
        background-color: red;
    }

    .pick#second {
        background-color: blue;
    }

    .pick#third {
        background-color: purple;
    } 
```

[演示在这里](http://jsfiddle.net/NotInUse/4bZp7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T22:40:31.610

将左侧的所有 DIV 放入容器 div 并将其浮动到左侧。然后将所有右侧 DIV 放入容器中并将其浮动到右侧。

您可能还必须指定`.left_side`and的宽度`.right_side`。

HTML：

```
<div id="container">
 <div class="left_side">
  <div class="imgbox"></div>
  <div class="pick" id="first"></div>
 </div>

 <div class="right_side">
  <div class="pick" id="second"></div>
  <div class="pick" id="third"></div>
 </div>
</div> 
```

CSS：

```
#container {
    width: 440px;
    height: 212px;
    border: 1px solid grey;
 }

div {
    border: 1px solid black;
    display: block;
}

.left_side {
    float:left;
}

.right_side {
    float:right;
}

.imgbox {
    width: 218px;
    height: 100px;
    float: left;
    clear: left;
    background-color: grey;
}

.pick {
    width: 218px;
    height: 100px;
}

.pick#first {
    float: left;
    clear: both;
    background-color: red;
}

.pick#second {
    float: left;
    background-color: blue;
}

.pick#third {
    float: right;
    clear: right;
    background-color: purple;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T22:47:19.267

首先，您需要将`div`左侧的 s 包装到一个容器中，`div`将右侧的 s 包装到另一个容器中：

```
<div id="container">
    <div id="left">
        <div class="imgbox"></div>
        <div class="pick" id="first"></div>
    </div>
    <div id="right">
        <div class="pick" id="second"></div>
        <div class="pick" id="third"></div>
    </div>
</div> 
```

然后，您可以`float`从每个中删除单独的分配`div`并将它们分配给`#right`and `#left`：

```
#left {
    float: left;
}
#right {
    float: right;
} 
```

最后，您需要考虑正确的宽度。你`#container`有 440px 的空间。每个孩子`div`被分配218px；但是，这些`div`s 中的每一个在每边也有一个 1px 的边框，这使得它们占据了 218 + 2(1) = 220px 的空间。`#imgbox`将和的宽度减小`.pick`到 216px。

一切都可以在[这个 jsFiddle 上看到。](http://jsfiddle.net/3H4r3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T22:45:33.087

创建两个子容器并浮动它们。

```
<div id="container">
  <div class="sub-container">
    <div class="imgbox"></div>
    <div class="pick" id="first"></div>
  </div>
  <div class="sub-container">
    <div class="pick" id="second"></div>
    <div class="pick" id="third"></div>
  </div>
</div>

.sub-container{
  margin: 0;
  padding:0;
  display: inline-block;
  float: left;
 } 
```

# java - Cannot refer to a class object A from the same class?

> ID：15712413
> 
> 赞同：0
> 
> 时间：2013-03-29T22:31:07.060
> 
> 标签：java, copy-constructor, cloneable

```
public class Car implements Cloneable{

private String name;
private int price;

Car(String name, int price)
{
    this.name = name;
    this.price = price;
}

//copy constructor 1

Car(Car a)
{
    price = a.price;
    name = a.name;
}

clone(Car a)
{
    Car newC = Car(Car a);
}

} 
```

Car a gives me cannot find symbol. I am trying to write a class that uses a copy constructor and a clone method, but came across an error I can't solve. I've been scratching my head for 30 minutes.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T22:33:36.830

The problem is here: `Car newC = Car(Car a);`

That line should be: `Car newC = new Car(a);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T22:33:44.720

You need to specify a return type, and the new keyword.

```
public Object clone(Car a) {
   Car newC = new Car(a);
   return newC;
} 
```

# php - 如何在 PHP 表中显示查询

> ID：15712414
> 
> 赞同：0
> 
> 时间：2013-03-29T22:31:16.350
> 
> 标签：php, html-table

我的代码

```
 <?php
    include('ConnectToDb.php');

    $query = "SELECT * FROM News WHERE NewsFlag = 1 ORDER BY PostDate DESC";
    $arrCount = -1;
    $result = mysql_query($query) or die(mysql_error());
    while($row = mysql_fetch_array($result)){
        $ID=$row['ID'];
        $PostDate = $row['PostDate'];
        $NewsHeader = stripslashes($row['NewsHeader'])
;
        $NewsStart = stripslashes($row['NewsStart'])
;
            echo "<hr>";
            echo "<div>". date('j F Y',strtotime($PostDate)). "</div>";
            echo "<p>";
                $news_id = strval(sprintf("%1$04d",$ID));
                $array = scanImageFolder("newsImages/newsThumbs",$news_id);
                if(count($array)>0) {
                    echo "<img src='". $array[0]. "' alt='' />";
                }
            echo "<h2 style='text-align:center'><u><a href='latestnews_full.php?ID=$ID'>". $NewsHeader. "</a></u></h2>";
            echo "<div style='text-align:left'><h3>";
            echo $NewsStart. " ......<a href='latestnews_full.php?ID=$ID'>(more)</a><br />";
            echo "<div style='text-align:center'>";
            echo "</div>";
            echo "</h3></div>";
    }
?> 
```

在四行上很好地显示我的数据，顶部是日期，然后是图片、标题和描述。

但是，我想将数据显示为这样的表格

```
 <table style="width: 100%">
    <tr>
        <td colspan="2">postDate here</td>
    </tr>
    <tr>
        <td rowspan="2">picture here</td>
        <td>newsHeader here</td>
    </tr>
    <tr>
        <td>newsStart here</td>
    </tr>
</table> 
```

我不确定如何正确地回显表格单元格，到目前为止我的所有尝试都导致了一个白页。有人可以请教我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T22:51:39.743

我建议你把你的逻辑与你的表现部分分开。准备好获取结果、分配 var 等后关闭 PHP 标记，然后：

```
<table style="width: 100%">
<?php
//yourcode
//...
//...
$NewsStart = stripslashes($row['NewsStart']);
$news_id = strval(sprintf("%1$04d",$ID));
$array = scanImageFolder("newsImages/newsThumbs",$news_id);
?>

 <tr>
    <td colspan="2"><?= date('j F Y',strtotime($PostDate)) ?></td>
 </tr>

 <tr>
   <?php
 if(count($array)>0) {
                ?>
    <td rowspan="2"><img src='<?= $array[0] ?>' alt='' /></td>
 <?php } ?>
    <td><?= $NewsHeader ?></td>
 </tr>
 <tr>
    <td><?= $NewsStart ?> </td>
 </tr>

<?php } ?>
</table> 
```

但是，它又不是那么清楚，我建议使用模板引擎。如果您愿意，我可以发布一个将变量分配给 Smarty 的代码，并在 Smarty 模板中输出您的演示文稿

# autohotkey - 如何在 AutoHotKey 中启用 AHK_L 功能？

> ID：15712415
> 
> 赞同：0
> 
> 时间：2013-03-29T22:31:23.790
> 
> 标签：autohotkey

我正在运行我在这里下载的 AHK_L：

[http://l.autohotkey.net/AutoHotkey_L_Install.exe](http://l.autohotkey.net/AutoHotkey_L_Install.exe)

众所周知，运行以下脚本应该会破坏标准 AHK，但会在 AHK_L 中弹出三个 Msgbox。

```
arr := Array("b", "a", "c")
Loop, % arr.len()
   Msgbox, % arr[A_Index] 
```

我什么也得不到；没有错误，也没有 Msgboxes。为什么这会发生在我身上？AHK_L 版本 1.1.09.04。

更具体地说，为什么这个论坛发帖：

[http://www.autohotkey.com/board/topic/45876-ahk-l-arrays/](http://www.autohotkey.com/board/topic/45876-ahk-l-arrays/)

...主要包含不起作用的命令？这些来自旧版本的 AHK_L 吗？等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T08:16:18.323

干得好..

```
arr := Array("b", "a", "c")
Loop, % arr.MaxIndex()
{
    Msgbox, % arr[A_Index]
} 
```

# jquery - 如何在可选的 jQuery UI 上调用“完成”功能？

> ID：15712421
> 
> 赞同：0
> 
> 时间：2013-03-29T22:31:58.773
> 
> 标签：jquery

我正在使用这样的 jQuery UI：

```
$('#theDiv').selectable({
    selected: function() { .... }
}); 
```

可选的事情完成后如何调用函数？就像我可以在“fadeIn”中调用它一样：

```
$('#theDiv').fadeIn(function() { 
     ... happens on complete... 
}); 
```

如果我在“selected:”中调用所需的函数，该事件将为每个选定的项目出现，我只希望它在选择完成时出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:51:11.007

我相信这个`stop`事件是你正在寻找的。

引用 jQuery UI

> 在选择操作结束时触发。

```
$( ".selector" ).selectable({
    stop: function( event, ui ) {}
}); 
```

来源：[http ://api.jqueryui.com/selectable/#event-stop](http://api.jqueryui.com/selectable/#event-stop)

# php - 允许页面仅在 iframe 中加载

> ID：15712422
> 
> 赞同：5
> 
> 时间：2013-03-29T22:32:01.537
> 
> 标签：php, redirect, iframe, permissions, load

如何允许我的 PHP 文件只加载到一个`iframe`?

例如：

*   防止直接访问：`example.com/Loader.php`
*   允许 iframe 访问：`<iframe name="TEST" src="Example.com/Loader.php"></iframe>`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-29T22:37:46.527

你不会为此使用 PHP。试试 javascript。

```
if(window==window.top) {
    // not in an iframe
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-30T18:59:02.360

假设您有一个文件`file1.php`，该文件有一个`iframe`inside 并且`iframe`指向`file2.php`

文件**file1.php**的代码：

```
<iframe src="file2.php" width="500" height="100"></iframe> 
```

文件**file2.php**的内容：

```
<?php
echo "This file exist in an iframe";
?> 
```

因此，让我们将**file1.php**更新为以下代码：

```
<?php
session_start();
$_SESSION['iframe'] = md5(time()."random sentence");
?>
<iframe src="file2.php?internal=<?php echo $_SESSION['iframe'];?>" width="500" height="100"></iframe> 
```

并更新**file2.php**如下：

```
<?php
session_start();
if(!isset($_SESSION['iframe']) || !isset($_GET['internal']) || $_SESSION['iframe'] != $_GET['internal'])
    {
        die("This page can be accessed just from within an iframe");
    }
unset($_SESSION['iframe']);
//Continue processing using your own script
?> 
```

试试这个，告诉我这是否有效:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-10-21T09:04:24.267

我知道这个话题很老，但我正在寻找一种方法来自己做这件事。

因此，也许将来其他人会发现这篇文章正在寻找一种强制页面仅在 iframe 内加载的纯 php 方法。

我的解决方案如下：

如果您控制两个页面（调用 iframe 的页面和加载在 iframe 内的页面），则可以完成。

首先验证引用页面。如果引用页面不正确，请终止该页面。

```
$referal_page = $_SERVER['HTTP_REFERER'];
if ($referal_page != $_SERVER['REQUEST_SCHEME']."://".$_SERVER['HTTP_HOST'].'/main/page/loading/iframe.php') {
    die;
} 
```

因为任何人都可以欺骗 HTTP_REFERER，所以这不是最终的解决方案。因此，我为我网站的每个用户使用存储在数据库中的加载密钥。在 iframe 的页面上：

```
if (isset($_GET['key1'])) {
    $key1 = strip_tags($_GET['key1']);
    $stmt = $db->prepare('SELECT user_key FROM page_keys WHERE username = :username');
    $stmt->bindParam(':username', $username);
    $stmt->execute();
    $userkey = $stmt->fetchColumn();
    if ($userkey == $key1) {
        $bytes = random_bytes(12); //random. Increase input for more bytes
        $key2 = bin2hex($bytes);
        $stmt = $db->prepare('UPDATE page_keys SET user_key=:key WHERE username = :username');
        $stmt->bindParam(':username', $username);
        $stmt->bindParam(':key', $key2);
        $stmt->execute();
    } else {
        die;
    }
} else {
    die;
} 
```

在加载 iframe 的页面上：

```
$stmt = $db->prepare('SELECT count(id) AS key_check FROM page_keys WHERE username = :username');
$stmt->bindParam(':username', $username);
$stmt->execute();
$key_check = $stmt->fetchColumn();
if ($key_check == 0) {
    $bytes = random_bytes(12); //random. Increase input for more bytes
    $userkey = bin2hex($bytes);
    $stmt = $db->prepare('INSERT into page_keys (username, user_key) VALUES (:username, :user_key)');
    $stmt->bindParam(':username', $username);
    $stmt->bindParam(':user_key', $userkey);
    $stmt->execute();
} else {
    $stmt = $db->prepare('SELECT user_key FROM page_keys WHERE username = :username');
    $stmt->bindParam(':username', $username);
    $stmt->execute();
    $userkey = $stmt->fetchColumn();
} 
```

最后在 iframe 本身上：

```
<iframe id="page" src="the_page.php?key1=<?php echo $userkey;?>"> 
```

也可以使用标题重定向到加载 iframe 的页面，而不是死掉；

不使用 javascript 执行此操作的原因是用户仍然可以禁用 javascript 并加载页面，从而导致页面上的任何 php 仍然运行。

# redirect - 自动定向不完整网址的角度方式是什么？

> ID：15712424
> 
> 赞同：2
> 
> 时间：2013-03-29T22:32:05.613
> 
> 标签：redirect, angularjs

当我想去的时候

```
http://www.koran-auf-deutsch.de/koran-deutsch/23-die-glaubigen-al-mominun/ 
```

然后输入

```
http://www.koran-auf-deutsch.de/koran-deutsch/23 
```

我直接访问网址。我想在我的角度应用程序中获得类似的行为，你会在哪里注入该功能？有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T23:02:28.753

```
angular.module('app', []).
  config(['$routeProvider', function($routeProvider) {
  $routeProvider.
      when('/:id', {controller: RedirectCtrl}).
      when('/:id/:title', {templateUrl: 'partials/post.html', controller: PostCtrl}).
      otherwise({redirectTo: '/404'});
}]);

function RedirectCtrl($routeParam, $http) {

    var post_id = $routeParams.id;

    // get title by id
    $http.get('/api_url_to_get_title_by_id').success(function (data) {
        window.location = "/" + post_id + "/" + data.title;
    });
}

RedirectCtrl.$inject = ['$routeParams', '$http']; 
```

# c++ - 使用 libgit2 从 git 存储库中删除文件

> ID：15712427
> 
> 赞同：5
> 
> 时间：2013-03-29T22:32:25.603
> 
> 标签：c++, c, libgit2

假设您在 git 存储库中有一个文件：

*   一个.txt

应该使用哪些 API 来创建删除该文件的提交？例如在[这个问题](https://stackoverflow.com/questions/15711444/how-to-commit-to-a-git-repository-using-libgit2)中，文件被提交而不在磁盘上创建它。现在是否可以在不使用索引（舞台区域）的情况下删除该文件？

我期待一个类似的流程，也许为树构建器创建一个`git_tree_entry`，但似乎并非如此。`git_reference_list()`不列出文件，所以有死胡同。搜索删除和删除的来源也没有成功。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T22:59:45.790

删除文件类似于添加文件 - 您删除索引条目以暂存删除，然后您可以从索引创建提交。

您可能想要使用`git_index_remove_bypath`，它将从索引中删除文件*并*解决该文件的任何冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T10:46:20.767

这是一个复制粘贴示例；`getLastCommit()`看到这个[问题](https://stackoverflow.com/questions/15717625/how-to-get-the-last-commit-from-head-in-a-git-repository-using-libgit2/15717626#15717626)。

```
bool commitStage ( 
    git_repository * repo, git_signature * sign,
    const char * message )
{
  bool b = false;
  int rc;
  git_index * repo_idx;   /* the stage area for our repository */
  git_oid oid_idx_tree;   /* the SHA1 for the tree generated from index */
  git_oid oid_commit;     /* the SHA1 for our commit */
  git_tree * tree_cmt;    /* tree generated from index */
  git_commit * parent_commit;/* most recent commit in the head */

  parent_commit = getLastCommit( repo );
  if ( parent_commit != NULL )
  { /* we have the parent commit */
    rc = git_repository_index( &repo_idx, repo );
    if ( rc == 0 )
    { /* we now have the index (stage area) structure in repo_idx */
      git_index_read(repo_idx);
      /* the stage area may be altered here with functions like 
        git_index_add_bypath();
        git_index_remove_bypath();
        */

      /* by writing the index we get the SHA1 of the tree */
      rc = git_index_write_tree( &oid_idx_tree, repo_idx );
      if ( rc == 0 )
      {
        rc = git_tree_lookup(
              &tree_cmt, repo, &oid_idx_tree );
        if ( rc == 0 )
        { /* the actual tree structure; create a commit from it */
          rc = git_commit_create(
                &oid_commit, repo, "HEAD",
                sign, sign, NULL,
                message,
                tree_cmt, 1, (const git_commit**)&parent_commit );
          if ( rc == 0 )
          {
            b = true;
          }
        }
      }
      git_index_free( repo_idx );
    }
    git_commit_free( parent_commit );
  }
  return b;
} 
```

# bash - Bash Read Escaped Characters and Normal Characters

> ID：15712430
> 
> 赞同：1
> 
> 时间：2013-03-29T22:32:39.417
> 
> 标签：bash, shell, input, io

I want to read in bash when *any key is pressed*, be it arrow key, number, letter, or punctuation, without pressing enter.

This is the closest that I have come up with, besides that when an escaped key is pressed, it spills over into the next input. Also, escaped keys will read but not echo.

```
#!/bin/bash

read -r -n 1 -d $'\n' -p 'input> ' line
echo -en "\n"
echo "$line" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T07:10:13.237

A bit hacky/dirty way, but should work for user interactive shells...

```
read -n1 -s -p 'input> ' line; read -t 0.1 -n2 -s line2
line="$line$line2" 
```

Now, it's up to you to convert `<ESC>[A` to string `<UP>` or not.

NOTE: It would most likely fail, if the stdin is redirected (say, from pipe/file...)

# .net - C++ - How do i make a form close the application?

> ID：15712435
> 
> 赞同：2
> 
> 时间：2013-03-29T22:33:08.820
> 
> 标签：.net, winforms, c++-cli

My Windows Form application has two forms. `Form1` and `Form2`. How to close entire application after the `Form2` is closed?

When I close `Form2` it only closes that form.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T22:35:31.940

Try to call `Application::Exit();`

See the [reference](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.exit%28v=vs.71%29.aspx).

# javascript - 为什么要编写模块化 javascript？

> ID：15712436
> 
> 赞同：-1
> 
> 时间：2013-03-29T22:33:14.357
> 
> 标签：javascript, ruby-on-rails-3, performance, coding-style, modularity

在我的理解中，良好分解和模块化代码的好处是可重用性和组织性。在一个文件中以大块编写的代码难以阅读，并且重复使用代码的一小部分需要仔细复制粘贴，而不是包含语句。

特别是关于 Javascript，我最近遇到了一个让我思考这个问题的例子。对 SO 进行了评论，大意是，如果您没有逐页有条件地包含您的 javascript，这“表示未能正确模块化 JS 代码”。但是，从代码重用和组织的角度来看，没有理由考虑在页面加载时会发生什么。如果将代码编写在一堆单独的文件中，然后在提供服务之前将其混合在一起并缩小，那么代码将同样具有可读性。例如，[rails 资产管道](http://guides.rubyonrails.org/asset_pipeline.html)就是这样做的。

当我第一次遇到资产管道时，我的思绪摇摇欲坠，我开始想知道“我如何让 javascripts 仅在需要时加载？” 我阅读[了一些 SO questions](https://stackoverflow.com/questions/3437585/best-way-to-add-page-specific-javascript-in-a-rails-3-app)和[一篇关于此事的文章](http://railsapps.github.com/rails-javascript-include-external.html)，并开始认为也许我不应该担心我的代码在“编译”后会发生什么。

编写模块化代码的目的是否纯粹是人类活动，我们是否应该在代码开始运行后停止担心模块化？在 Javascript 的情况下，我们是否应该担心我们的脚本在被包含之前被混合在一起？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T22:57:00.623

我认为您在性能方面并没有真正谈论的一件事是实际的 HTML 浏览器下载行为。我相信您必须在仅逐页显示所需的 javascript 和利用浏览器缓存和下载行为之间走一条细线。

For example, say you have 20 different javascript snippets that are going to be used on every page. In this case it is a no-brainer to compile/minify them into a single file, as the fewer files your browser needs to download, the better. This single file would also be able to be cached, that is assuming it is a static file or appearing to be static (via headers sent) if it is dynamically compiled.

Now say of those 20 snippets, 15 are used on every page and the others are used intermittently. Of course you put all 15 of the always used snippets into a single file. But what about the others? In my opinion you need to consider the size and frequency of use of the files. If they are small and used relatively frequently, I might consider putting them into the main file, with the thought that the extra size in the main file is outweighed by the need to have additional request to download the content later. If the code is large, I would tend to only use it where necessary. Of course once it is used, it should remain in cache.

This approach might best be suited for a web application where users are expect to typically have multiple page loads per session. Of course if you are designing an advertising landing pages or seomthing where the user only may see that single page, you might lean on keeping the initial javasciprt download as small as possible and only loading new javascript in as necessary based on user interaction.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T22:53:12.543

这个问题的每个方面都归结为“它取决于”。

您是否正在编写一个企业级应用程序，它会产生 80,000 行代码，而您将它们拼凑在一起？

如果是这样，那么是的，编译时间将会很长，如果你把它塞进`<head>`你的文档中，人们就会感觉到等待时间。
即使它已经被缓存，单独的编译时间也是显而易见的。

您是否正在编写数十个最终用户可能永远看不到的小部件？
尤其是手机？

如果是这样，那么您可能希望为他们节省下载/编译时间，而是加载您的核心功能，然后按需加载额外的功能，因为更多研究表明非技术最终用户期望他们的移动互联网体验类似于他们的桌面体验，不仅在内容方面，而且在一般等待时间方面。

越来越少的人愿意接受 5s-8s 的移动体验（或移动端的桌面体验）以达到交互的地步，只是基于“嗯，它是移动的，所以需要更长的时间”的火车想法。

再说一次，如果你有一个 80,000 行的应用程序，或者一个 300kB 的 JS 文件，或者在加载之前进行大量的 XML 解析等等，而不提供单独的移动体验，那么你在移动设备上的统计数据必然会伤害 - 特别是如果您是媒体网站或商业/零售网站。

所以对你的问题的正确答案是说你的问题没有正确的答案，除了有好主意和坏主意，基于目标设备、站点/应用程序的意图、人口统计、代码-base，预期用户将频繁访问该站点（并因此受益于缓存资产），更新代码库的频率（有一个更新的模块，有 20 个缓存的模块，而不是一个完全无效的 21 模块块，由于一条拥有 250,000 名客户的客户群的更新产品线出于多种原因考虑）...

...和更多...

弄清楚你在做什么。
弄清楚你需要做些什么来实现这一点。
弄清楚如何做到这一点，同时为您的客户提供良好的体验。

知道如何合并文件。
知道如何按需加载。
知道如何构建一个轻量级的引导程序，它可以智能地加载模块（和/或学习 require/AMD）。考虑到您要完成的工作，
使用这些***工具为您的用户提供可能的最佳体验。***

# android-ndk - How to install,configure NDK in fedora 14?

> ID：15712438
> 
> 赞同：0
> 
> 时间：2013-03-29T22:33:29.000
> 
> 标签：android-ndk, installation, fedora, configure

Step1: I extracted Android NDK to a directory where SDK is already there. Step2: Created a directory called Project_NDK in it. Step3: I have created the application.mk file and native.c file under jni folder . So where I should put C++ code?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T19:42:09.720

Typically, you don't place your code under the NDK folder, you place it in the subfolder called "jni" in the Android project. Before you start messing with NDK, you need a regular Android project with a manifest file. You can, in theory, create an NDK-only project without Java, but that's a pain.

In addition to Application.mk you need Android.mk. See the NDK docs for the guidance or look at hello-jni in the samples.

You place your C++ code into files with the .cpp extension, which go into the jni folder as well.

最后，请注意：不要仅仅因为 NDK 难以调试而使用它。对于基本的 Android 编程，只需使用 Java。如果您了解 C++ 而您不了解 Java，那么您将立即掌握它，它们已经足够接近了。

# mysql - 复杂查询 - MySql（类别 x 产品）

> ID：15712442
> 
> 赞同：0
> 
> 时间：2013-03-29T22:33:38.027
> 
> 标签：mysql, cakephp

我对复杂的查询感到困难。有一个用于类别和产品的表格。我需要展示每个类别的 4 个产品。我怎样才能做到这一点？

我的结构：Category.id、Category.name 和 Product.id、Product.category_id。

SQL：

```
SELECT Product.id, Product.name, Product.img, Category.name FROM categories AS Category
INNER JOIN (SELECT Product.id, Product.name, Product.img, Product.category_id FROM products AS Product) AS Product ON
Product.category_id = Category.id; 
```

我在哪里设置产品的限制？

谢谢。

费利佩·马克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:38:54.940

这在 MySQL 中很痛苦（在我看来）。这是一个带有相关子查询的版本：

```
SELECT p.id, p.name, p.img, c.name
FROM categories c INNER JOIN
     (SELECT p.id, p.name, p.img, p.category_id,
             (select count(*) from products p2 where p2.category_id = p.category_id and p2.id <= p.id
             ) as seqnum
      FROM products p
     ) p
     ON Product.category_id = Category.id
where seqnum <= 4 
```

这使用相关子查询来计算产品 id 小于或等于给定产品的产品数量。这将创建一个序列号，您可以在其中选择前四个。

# ios - iOS UITableView：更改表格的背景颜色会覆盖单元格的背景颜色

> ID：15712445
> 
> 赞同：2
> 
> 时间：2013-03-29T22:33:51.610
> 
> 标签：ios, objective-c, xcode, uitableview

我有一个问题，我的 tableView 的背景颜色会覆盖我为单个单元格设置的背景颜色。更具体地说，我有一个包含 3 行的表格：顶部单元格为深灰色，底部 2 个单元格为红色：

[http://imgur.com/otYlFMx,LvolDzY,tXiJenw#0](http://imgur.com/otYlFMx,LvoLDzY,tXiJenw#0)

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{
    UIColor *sectionBackgroundColor = [UIColor colorWithRed:0.09f green:0.09f blue:0.09f alpha:1.0];
    UIColor *menuItemBackgroundColor = [UIColor redColor];

    if (indexPath.row == 0) {
        cell.backgroundColor = sectionBackgroundColor;
        cell.textLabel.textColor = [UIColor whiteColor];
        cell.textLabel.text = @"MENU";
        cell.textLabel.font= [UIFont systemFontOfSize:16.0];
        cell.selectionStyle = false;
    } else if (indexPath.row == 1) {
        cell.backgroundColor = menuItemBackgroundColor;
        cell.textLabel.textColor = [UIColor whiteColor];
        cell.textLabel.text = @"Schedule";
        cell.textLabel.font= [UIFont systemFontOfSize:18.0];
        cell.imageView.image = [UIImage imageNamed:@"Schedule.png"];
    } else if (indexPath.row == 2) {
        cell.backgroundColor = menuItemBackgroundColor;
        cell.textLabel.textColor = [UIColor whiteColor];
        cell.textLabel.text = @"Contacts";
        cell.textLabel.font= [UIFont systemFontOfSize:18.0];
        cell.imageView.image = [UIImage imageNamed:@"Contacts.png"];
    } else {
        cell.backgroundColor = [UIColor blackColor];
        cell.selectionStyle = false;
    }

} 
```

我想要做的是将底部所有那些空的、未使用的白色单元格变为黑色。根据我的研究，设置 tableView 背景颜色将做到这一点：

[http://imgur.com/otYlFMx,LvolDzY,tXiJenw#1](http://imgur.com/otYlFMx,LvoLDzY,tXiJenw#1)

```
tableView.backgroundColor = [UIColor blackColor]; 
```

但是，正如您所注意到的，这行代码也将顶部两个单元格的背景颜色更改为黑色。我对此进行了更多尝试，并注意到一个一般模式，其中每个单元格背景颜色都将更改为黑色，除了最后一个：

*（见上面链接中的第三张图片）*

关于这里发生了什么的任何想法？帮助将不胜感激！

* * *

* * *

我已经尝试过的一些事情不起作用（我会提供更多链接，但我目前的代表不允许我这样做）：

A) 使单元格中的视图不透明。更改单元格中不同视图的颜色。

```
cell.opaque = YES;
cell.backgroundView.opaque = YES;
cell.contentView.opaque = YES;
cell.backgroundColor = menuItemBackgroundColor;
cell.contentView.backgroundColor = menuItemBackgroundColor;
cell.backgroundView.backgroundColor = menuItemBackgroundColor; 
```

B）将tableView的backgroundView设置为nil。

```
tableView.backgroundView = nil; 
```

C) 设置tableView的backgroundView的背景颜色。

```
tableView.backgroundView.backgroundColor = [UIColor blackColor]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T22:39:20.200

> 设置我的 tableView 的背景颜色会覆盖我为我的单个单元格设置的背景颜色

这是正确的。烦人，不是吗？:) 问题实际上只是要么给单元格着色`backgroundView`（比听起来容易得多），要么等到`tableView:willDisplayCell:forRowAtIndexPath:`，然后将`backgroundColor`单元格设置在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-19T17:07:39.370

以下解决方法允许您使用情节提要中指定的背景颜色，并避免在代码中设置显式颜色：

*   在`dequeueReusableCellWithIdentifier:`中，虽然故事板的背景颜色仍然完好无损，但将其保存，例如在自定义`UITableView`子类的属性中。
*   稍后，在 中，使用您在 中保存的值 `willDisplayCell:`恢复。`backgroundColor``dequeueReusableCellWithIdentifier:`

# redis - SignalR.Redis 和 ServiceStack.Redis 在同一个 Web 应用程序中

> ID：15712446
> 
> 赞同：4
> 
> 时间：2013-03-29T22:33:54.167
> 
> 标签：redis, servicestack, signalr

我在我的 Web 应用程序中使用 SignalR.Redis 和 ServiceStack.Redis。我注意到 SignalR.Redis 使用 Booksleeve redis 客户端，当然 ServiceStack.Redis 有自己的客户端代码。

在同一个项目中使用这两种方法可以吗？显然它会起作用，但似乎从同一个应用程序使用多个 redis 客户端（以及因此多个 redis 连接）可能是一个不好的做法。我应该实现一个使用 ServiceStack.Redis 客户端的 SignalR 背板，这样我的所有代码都使用同一个客户端还是没关系？

SignalR 的 ServiceStack.Redis 背板是否也能正常工作，因为 ServiceStack.Redis 不是像 Booksleeve 那样的异步客户端？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T00:16:44.410

不在同一个代码库中使用 ServiceStack.Redis 和 Booksleeve 没有技术问题，每个都只是将自己的（非常轻量的）tcp 套接字连接封装到后端 redis 服务器，而库之间没有代码共享或状态突变.

# asp.net-mvc - .NET MVC Best Practices to build a Model from and existing database

> ID：15712451
> 
> 赞同：0
> 
> 时间：2013-03-29T22:34:31.637
> 
> 标签：asp.net-mvc, oop, ado.net

My MVC project accesses data using ADO.NET stored procedures. Most data that is returned requires a lot of formatting and much of it is used for business logic only and not displayed in a View. Currently we map it to classes in a folder called "Entities". The View Model needs to display the formatted values from multiple Entities.

I want to be able to take the data from the entity object(s), perform business logic and write it to the appropriate Model. Where do I write all this business logic?

## Current Folder Structure:

Entities (where the classes reside that match the database fields)

Repositories (where I call the stored procedures and map the results to the appropriate entities)

Models (The ideal structure and field names to be used by a View)

Views

Controllers

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T22:41:14.030

Although there are no concrete rules for business logic regarding .NET MVC, your business logic generally goes in [the Model.](http://msdn.microsoft.com/en-us/library/dd410405%28v=vs.90%29.aspx)

Fat models and skinny controllers are generally a good rule of thumb.

# javascript - javascript阻止光标移动

> ID：15712462
> 
> 赞同：5
> 
> 时间：2013-03-29T22:35:53.527
> 
> 标签：javascript, preventdefault, stoppropagation

在输入框中，我想在向上键 "↑" 上键入时**停止光标的传播：**

前 ：

`tes|t`// 光标在*t之前*

后 ：

`|test`// 光标开始

我想防止光标移动，所以它必须停留在*t*之前。

到目前为止，我正在尝试这个，但它不起作用：

```
$('input').keyup(function(e) {

    if (e.which == 40) { // up key
        e.stopPropagation();
        e.stopImmediatePropagation();
        e.preventDefault();

        // actions

        return false;
    }

} 
```

这可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T22:43:04.907

您可以[`keydown`](http://api.jquery.com/keydown/)为此使用：

```
$('input').keydown(function(e) {
    if (e.which == 40) { // up key
        return false;
    }
} 
```

`keyup``keypress`在事件被处理后触发并且`keypress`应该不会触发不可打印的字符（尽管不同浏览器之间存在一些不一致），因此阻止事件的默认操作`keydown`是最好的操作方案。

Keep in mind that if you don't have a good reason for preventing the default action (e.g. going through an autocomplete list while having the search field focused), you may be affecting other users' usability as commented by @Kolink.

# android - API内置Android“切换器”？

> ID：15712463
> 
> 赞同：0
> 
> 时间：2013-03-29T22:35:57.713
> 
> 标签：android, api

我已经完成了我以前的项目，并决定继续做一些将要困难得多的事情，并将在我学到的现有功能的基础上引入新的功能。

我想为笔记、提醒和标准日历视图构建一个中心（提醒就像您可以划掉的复选框项目，并且笔记允许自由文本）。

我想知道的第一件事是，API 中是否有“活动”切换器，或者是否可以实现。我不知道为了自己搜索会调用什么（花了很长时间才意识到“弹出窗口”实际上在 android 中被称为“对话框”）。

[http://www.trickytweaks.com/wp-content/uploads/2012/09/top-10-hidden-jelly-bean-android-dial-codes-.png](http://www.trickytweaks.com/wp-content/uploads/2012/09/top-10-hidden-jelly-bean-android-dial-codes-.png)

这张图片显示了我正在谈论的内容，屏幕顶部显示三个符号，单击时会转到应用程序的不同部分。

我想构建类似的东西（可能在底部，类似于 iOS），并让三个图标在笔记、提醒或日历之间移动。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T00:06:39.300

是的，您可以使用一些选项卡和片段寻呼机来实现它。对于选项卡，您可以开始查看 ActionBarSherlock： [http ://actionbarsherlock.com](http://actionbarsherlock.com)

对于“活动切换器”，您可以查看：http: [//developer.android.com/reference/android/support/v4/app/FragmentPagerAdapter.html](http://developer.android.com/reference/android/support/v4/app/FragmentPagerAdapter.html)

# android - Android webview周围有白色边框，我该如何摆脱它？

> ID：15712465
> 
> 赞同：13
> 
> 时间：2013-03-29T22:35:59.933
> 
> 标签：android, web, webview, android-webview

我有一个使用 webview 加载网页的 android 应用程序，但是在图形布局和应用程序中它显示白色粗边框，我尝试调整大小并尝试更改 XML 布局文件中的宽度和高度，但没有任何变化。请检查下图以供参考。

[![在此处输入图像描述](../Images/fb6cc5edd785bc27e940cf67ea12a73d.png)](https://i.stack.imgur.com/5Lubs.jpg)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-12-10T14:36:02.377

这似乎对我有用：

```
String frameString = "<html><body style='margin:0;padding:0;'><iframe src=\"http://k-video.com/\" height=\"410\" width=\"320\" frameborder=\"0\" allowfullscreen></iframe></body></html>"; 
```

希望能帮助到你 ！

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-29T22:38:56.267

您可以看到的这个白色边框可能只是来自 webview 的布局容器的背景。请确保您在 web 视图的布局或边距上没有填充。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-01-14T10:20:18.500

尝试像这样修改您的 HTML 内容：

```
<body style='margin:0;padding:0;'> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T22:59:45.107

您可以使用 设置背景`WebView`颜色`webview.setBackgroundColor()`。

我`WebView`使用以下功能将背景设置为透明（不可见）和白色：

```
private void setWebviewTransparency(final boolean transparent) {
    final int color = transparent ? 0 : Color.WHITE;
    webview.setBackgroundColor(color);
} 
```

如果您的网页源未指定背景颜色，则此颜色仅在字段区域中有效。如果页面源*确实*指定了背景，则此颜色只会影响@Marcin 正确处理的填充区域。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-01T06:38:29.503

```
<html>
   <body style='margin:0;padding:0;'>
     <iframe width="100%" height="100%" src="https://www.youtube.com/embed/$mVideoId" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
     </iframe>
   </body>
</html> 
```

在**mVideoId 中**替换为您的 youtube videoId

上面的 iframe 字符串为我工作，用于播放没有边距和填充的 youtube 视频。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2014-01-18T15:13:07.713

右键单击 WebView，然后单击删除容器。就这么简单！

# jakarta-ee - 是否有一种“标准”方法可以将依赖注入与 Java 结合使用 - 特别是与 JAXRS Jersey

> ID：15712467
> 
> 赞同：1
> 
> 时间：2013-03-29T22:36:02.550
> 
> 标签：jakarta-ee, dependency-injection, jersey, jax-rs, cdi

我有一些服务想从使用工厂更改为使用依赖注入框架。

使用 Java 6+ 是否有一种“标准”方式可以在不使用第三方库的情况下实现这一点？CDI（上下文和依赖注入）是否适用于这种情况？

例子会很棒！我已经开始使用“看似”简单的 Guice，但它目前正在引起问题，因此我正在寻找其他选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:32:01.700

DI 和 CDI 在 Java 标准 JSR299 和 JSR330 中定义。任何支持这些标准的 DI 框架都可以。对于 CDI，这将是 Weld-SE，对于 DI，您可以坚持使用 guice，这对我很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T15:28:08.943

你的问题有点笼统。我希望您说“Java 6+”时指的是 JavaEE 6；因为 Java SE 6 不提供没有 3rd 方库的本地 DI。

在 Java EE 空间中，`@ManagedBean`注释应该作为所有 DI 需求的标准。`@ManagedBean`任何用(from注释的东西`javax.annotation.ManagedBean`都是符合条件的注入目标，也有资格被注入到其他 bean 中。

例如，一个 JAX-RS 类本身并不是一个合格的注入目标。添加`@ManagedBean`到它使其有资格注入 EJB、资源和其他上下文好东西

# c++ - 如何获取/设置字符数组？

> ID：15712469
> 
> 赞同：-1
> 
> 时间：2013-03-29T22:36:37.023
> 
> 标签：c++

我正在尝试对 char 数组中的 2 个值进行排序并将它们读回。编译时没有错误/警告。但程序在启动时崩溃？

```
#define s_size 9

struct _struct {
public:

    void SetItemName(int i, char *c) {
        strcpy(item[i], c);
    }

    const char *GetItemName(int i) const {
        return item[i];
    }
private:
    char* item[s_size];
};
_struct mystruct;

void Getvalue()
{
    printf(mystruct.GetItemName(0));
}

void Setvalue( )
{
    mystruct.SetItemName(0,"hello");
    mystruct.SetItemName(1,"world");
    Getvalue();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T23:02:59.517

您应该使用[现代 C++ 风格](http://klmr.me/slides/modern-cpp/#1)，因此`std::vector<std::string>`.

```
#include <cstddef>
#include <string>
#include <utility>
#include <vector>

struct {
public:
    void SetItemName(std::size_t i, std::string s) {
        if (i >= items.size()) {
            items.resize(i + 1);
        }
        items[i] = std::move(s);
    }

    std::string const& GetItemName(std::size_t i) const {
        return items[i];
    }

private:
    std::vector<std::string> items;
} mystruct; 
```

这将为您进行内存管理，以及调整字符串向量的大小并在有任何间隙时插入空字符串。

# javascript - markdown如何转成html并在实践中使用？

> ID：15712471
> 
> 赞同：1
> 
> 时间：2013-03-29T22:36:48.117
> 
> 标签：javascript, html, markdown

markdown 是众所周知的，并在 github 和 here 等网站上使用。我想为我的 CMS 创建一个小博客模块，并且想知道 Markdown 在实践中是如何转换为 HTML 的。

1.  像这样的网站或 github 是用一些 JavaScript 渲染 .md 文件还是在保存为 HTML 时转换？

2.  是否有免费工具可用于将我的 .md 文件转换为 HTML 以存储我的博客模块，或者我是否应该让一些 JavaScript 在从 .md 文件加载的每个页面上呈现 HTML？

3.  什么是最佳实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T23:13:42.747

1.  根据我从 [markdown 主页](http://daringfireball.net/projects/markdown/)了解的情况，markdown 文件是通过一个用 PERL（或任何能够进行文本处理的语言）编写的转换器/解析器运行的。解析器用 HTML 标记替换某些符号/标记（例如 -、=、#）。所以是的，你可以用 JavaScript 写一个转换器或者[在网上找到一个](http://bit.ly/13EUWpl)。（关于如何编写所说的解析器的技术细节有点超出我的理解）。

2.  使用搜索引擎（或搜索 SO 本身）来回答那个问题。

3.  由于我不知道降价的最佳实践，我将把它留给其他人来回答。我建议搜索它们。

我会提供更多链接，但我的低代表阻止我这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T23:03:46.673

这是我的两分钱：

1.  我认为当您保存文件时，他们会在他们的服务器上转换它。

2.  我不这么认为。仅使用 PHP 获取文件并
    使用带有 Javscript 的 REGEX 将其转换为 HTML 可能是一项简单的任务。

3.  至于最佳实践，请保持您的规则与官方 MD 库一致。

# uitableview - 如何在我的第二个 ViewController IOS XCODE 4.5 上使用 UINavigationController

> ID：15712474
> 
> 赞同：0
> 
> 时间：2013-03-29T22:36:54.023
> 
> 标签：uitableview, uiviewcontroller, uinavigationcontroller

我只是慢慢地用 ios 找到我的脚。我已经启动了一个带有 2 个 ViewController 的单视图应用程序。我的第一个 VC 是一个初始屏幕，带有一个扩展按钮，填充整个屏幕，因此我可以使用它的方法将我转移到我的第二个 VC。在我的第二个 VC 中，我想在 UINavigationController 中嵌入一个 UItableView。如果我从第一个 VC 开始，我知道该怎么做（视图控制器）。

任何帮助都感激不尽 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T10:11:21.630

我还没有实现导航控制器。我的第一个屏幕实际上是一个全屏图像，带有“点击屏幕以继续”填充屏幕的圆形矩形按钮。我想从第二个 VC 中获得一个带有嵌入式表格视图的导航控制器，这样我就可以选择将我带到第三个 VC 的行。

我想要一个导航控制器，这样我就可以拥有带有后退按钮的上方蓝色标题栏。

到目前为止，我从一个 VC 到另一个 VC 的代码是：

```
ViewControllerSecond *view2 = [[ViewControllerSecond alloc] initWithNibName:@"ViewControllerSecond" bundle:nil];
[self presentViewController:view2 animated:YES completion:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T22:51:18.563

为什么需要新的导航控制器？您应该使用相同的导航控制器来推送第二个 VC。

在 FirstViewController.m 中

```
[self.navigationController pushViewController:secondVC animated:YES]; 
```

# linux - Citrix XenCenter，向 linux 服务器添加更多空间，但空间无法使用

> ID：15712476
> 
> 赞同：0
> 
> 时间：2013-03-29T22:36:59.007
> 
> 标签：linux, citrix, ext2

我希望它像 [VirtualBox 一样简单：扩展分区](https://stackoverflow.com/questions/8141045/virtualbox-extend-partition) ，但事实并非如此。

您在 Citrix Xen 中心看到，我没有添加虚拟硬盘，而是关闭了服务器并使其 vhd* 更大，这导致我似乎无法使用的分区上有更多空间。

*fdisk -l*给出了这个。

```
Device Boot      Start         End      Blocks   Id  System
/dev/xvda1   *           1          43      340992   83  Linux
Partition 1 does not end on cylinder boundary.
/dev/xvda2              43        5222    41598977    5  Extended
/dev/xvda5              43        1137     8787968   83  Linux
/dev/xvda6            1137        1502     2928640   83  Linux
/dev/xvda7            1502        1625      989184   82  Linux swap / Solaris
/dev/xvda8            1625        1674      389120   83  Linux
/dev/xvda9            1674        5222    28499968   83  Linux 
```

xvda2是罪魁祸首，看看它有多大。我想将它安装在某个地方以便有备份空间。我试过*mkfs、fdisk /dev/xvda2*，似乎这个分区是错误的。

```
 fdisk /dev/xvda2

 Unable to read /dev/xvda2 
```

我试过 mkfs*默认为 fstype 的 ext2*

```
mkfs /dev/xvda2 41598900
mke2fs 1.41.12 (17-May-2010)
mkfs.ext2: Filesystem larger than apparent device size.
Proceed anyway? (y,n) y
Warning: could not erase sector 2: Attempt to write block from filesystem resulted in short write
Filesystem label=
OS type: Linux
Block size=4096 (log=2)
Fragment size=4096 (log=2)
Stride=0 blocks, Stripe width=0 blocks
2599968 inodes, 10399725 blocks
519986 blocks (5.00%) reserved for the super user
First data block=0
Maximum filesystem blocks=4294967296
318 block groups
32768 blocks per group, 32768 fragments per group
8176 inodes per group
Superblock backups stored on blocks:
        32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208,
        4096000, 7962624

mkfs.ext2: Invalid argument while zeroing block 10399696 at end of filesystem
Writing inode tables:   0/318
Could not write 5 blocks in inode table starting at 1027: Invalid argument 
```

我装不上

```
mount -t ext2 /dev/xvda2 /mnt/extra/
mount: wrong fs type, bad option, bad superblock on /dev/xvda2,
       missing codepage or helper program, or other error
       In some cases useful info is found in syslog - try
       dmesg | tail  or so 
```

我已经用谷歌搜索和谷歌搜索，但我还没有想出在这种情况下有效的东西，因为我从 citrix xen 中心添加到 vhd 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:40:43.300

/dev/xvda2 是一个扩展分区。它就像一个逻辑分区的容器。这意味着有额外的空间，可能在 /dev/xvda 的末尾。

# mongodb - 为什么 mongo 在 cloudfoundry.com 上不可用，而在 micro cloud foundry 上可用？

> ID：15712478
> 
> 赞同：0
> 
> 时间：2013-03-29T22:37:28.893
> 
> 标签：mongodb, cloud-foundry

我使用 mongo 构建了一个缓存服务，并使用 Micro Cloud Foundry 在本地开发它。当我去部署时，我发现 cloudfoundry.com 不提供 mongo。关于为什么会这样的任何提示？

```
retina:repository gturnquist$ vmc -v
vmc 0.5.0
retina:repository gturnquist$ vmc info --all
Getting runtimes... OK
Getting frameworks... OK
Getting services... OK

VMware's Cloud Application Platform

target: http://api.cloudfoundry.com
  version: 0.999
  support: http://support.cloudfoundry.com

user: *******************

runtime   description
java      1.6.0_24   
java7     1.7.0_04   
node      0.4.12     
node06    0.6.8      
node08    0.8.2      
ruby18    1.8.7p357  
ruby19    1.9.2p180  

framework    description
grails       
java_web     
lift         
node         
play         
rack         
rails3       
sinatra      
spring       
standalone   

service      version   provider   description                  
blob         0.51      core       Blob store                   
mysql        5.1       core       MySQL database               
postgresql   9.0       core       PostgreSQL database (vFabric)
rabbitmq     2.4       core       RabbitMQ message queue       
redis        2.2       core       Redis key-value store        
redis        2.4       core       Redis key-value store        
redis        2.6       core       Redis key-value store 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T22:55:51.050

新 Mongo 数据库的配置已停止，直到 10gen 修复了最近允许远程 shell 命令的漏洞。应该是一两天左右。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T19:05:03.363

mongo 目前在 micro cloud foundry 上可用，请在此处查看：http: [//docs.cloudfoundry.com/docs/running/micro_cloud_foundry/](http://docs.cloudfoundry.com/docs/running/micro_cloud_foundry/)

您可以为每个实例运行 256Mb 最大大小的数据库。

问候， 莫西

# javascript - javascript 对象方法无法分配 ajax 调用响应

> ID：15712482
> 
> 赞同：1
> 
> 时间：2013-03-29T22:37:38.353
> 
> 标签：javascript, ajax, object

我定义了以下对象：

```
var WealthyLaughingDuckControl = {
    initialised: false,
    users: [],
    fetchData: function() {
        $.ajax({
            type: "GET",
            dataType: "json",
            url: "../php/client/json.php",
            data: {
                type: "users"
            }
        }).done(function(response) {
            this.initialised = true;
            this.users = response;
        });
    },
    init: function() {
        if (!this.initialised) {
            this.fetchData();
        }
    },
    getData: function() {
        return this.users;
    }
}; 
```

我正在浏览器 javascript 控制台中调试此对象。执行前后对象的状态是一样的`WealthyLaughingDuckControl.init()`：

```
Object {initialised: false, users: Array[0], fetchData: function, init: function, getData: function} 
```

但是，我确信 ajax 响应可以正常工作，因为当我执行以下操作时：

```
 $.ajax({
            type: "GET",
            dataType: "json",
            url: "../php/client/json.php",
            data: {
                type: "users"
            }
        }).done(function(response) {
            alert(response);
        }); 
```

浏览器提醒我`[Object object]`。所以我希望对象具有`initialised=true`并`users`设置为对象响应值。上面的代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T22:49:17.823

您需要在对对象的 ajax 调用中设置 context 参数，以便在 ajax 回调中使用它。

```
 $.ajax({
        type: "GET",
        dataType: "json",
        context: this,
        url: "../php/client/json.php",
        data: {
            type: "users"
        }
    }).done(function(response) {
        this.initialised = true;
        this.users = response;
    }); 
```

> context
> Type: PlainObject
> This object will be made the context of all Ajax-related callbacks. By default, the context is an >object that represents the ajax settings used in the call ($.ajaxSettings merged with the settings >passed to $.ajax). For example, specifying a DOM element as the context will make that the context for >the complete callback of a request, like so:

```
$.ajax({
  url: "test.html",
  context: document.body
}).done(function() {
  $(this).addClass("done");
}); 
```

# php - simplexml_load_string foreach 不显示任何内容

> ID：15712483
> 
> 赞同：2
> 
> 时间：2013-03-29T22:37:42.440
> 
> 标签：php, curl, simplex

**我的 PHP 代码如下所示，它显示空白我想显示所有带有超链接的记录，如**

```
<a href="test.php?id=$Id">$Name</a> 
```

**其中 $Id, $Name 来自 XML 提要**

```
 $path = 'www.abc.com/test.xml';
  $ch = curl_init();
  curl_setopt($ch, CURLOPT_URL, $path);
  curl_setopt($ch, CURLOPT_FAILONERROR, 1);
  curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
  curl_setopt($ch, CURLOPT_TIMEOUT, 15);
  $returned = curl_exec($ch);
  curl_close($ch);
  // $xml === False on failure
  $xml = simplexml_load_string($returned);

foreach( $xml->Name as $Name){
   print (string)$Name;
} 
```

**我的 XML 如下所示**

```
<ABCXml version="1.1.0">
  <Manufacturers>
   <Item>
    <Id>219</Id>
    <Name>Matrix Corp</Name>
   </Item>
   <Item>
    <Id>2040</Id>
    <Name>Microcomputer</Name>
   </Item>
 </Manufacturers>
</ABCXml> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T23:12:32.740

您的 xml 对象以 Manufacturers 开头，其中包含多个包含名称和 ID 的项目。你需要找到他们。

```
foreach($xml->Manufacturers->Item as $item) {
    printf("<a href='test.php?id=%s>%s</a>", $item->Id, $item->Name);
} 
```

# php - HTML 特殊字符和 PHP

> ID：15712484
> 
> 赞同：3
> 
> 时间：2013-03-29T22:37:43.143
> 
> 标签：php, javascript, jquery, html, special-characters

我有一个包含和上箭头的跨度：`&#9650;`

通过 AJAX 调用，在 PHP 中，我收到一个包含此箭头的 POST 参数。

```
$("#mySpan").click(function(){

      var arrow = $(this).html();
      alert(arrow); //displays the arrow the in an alert box
      $.post('Something.php',{ arrow: arrow },function(data){
            alert(data);
      });

}); 
```

在 PHP 中，我只是检查参数是否是这个箭头。

```
if(isset($_POST['arrow']){

      $arrow = $_POST['arrow'];
      if($arrow=='&#9650;')
            echo 'Its an arrow';
      else
            echo 'Its not an arrow';
} 
```

JS 返回一个警告框“它不是箭头”。我是否以正确的方式比较它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T22:51:40.947

# c++ - 缓存刷新例程之间的时序不一致

> ID：15712491
> 
> 赞同：1
> 
> 时间：2013-03-29T22:38:22.077
> 
> 标签：c++, c, performance, optimization

我需要运行[DAXPY](http://www.mathkeisan.com/usersguide/man/daxpy.html)线性代数内核的计时。天真地，我想尝试这样的事情：

```
fill(X,operand_size);
fill(Y,operand_size);
double seconds = timer();
daxpy(alpha,X,Y,operand_size);
seconds = timer() - seconds; 
```

如果需要，完整的代码链接在最后。

问题是，填充操作数 x 和 y 的内存访问将导致它们被放置在处理器缓存中。因此，在 DAXPY 调用中对内存的后续访问比在生产运行中实际要快得多。

我比较了解决这个问题的两种方法。第一种方法是通过[clflush](http://www.jaist.ac.jp/iscenter-new/mpc/altix/altixdata/opt/intel/vtune/doc/users_guide/mergedProjects/analyzer_ec/mergedProjects/reference_olh/mergedProjects/instructions/instruct32_hh/vc31.htm)指令从所有级别的缓存中刷新操作数。第二种方法是读取一个非常大的数组，直到操作数条目“自然地”从缓存中逐出。我对两者都进行了测试，这是单个 DAXPY 调用的运行时，操作数大小为 2048：

```
Without flush: time=2840 ns
With clflush: time=4090 ns
With copy flush: time=5919 ns 
```

这是几秒钟后进行的另一次运行：

```
Without flush: time=2717 ns
With clflush: time=4121 ns
With copy flush: time=4796 ns 
```

正如预期的那样，刷新增加了运行时间。但是，我不明白副本刷新如何导致 DAXPY 例程的运行时间大大延长。clflush 指令应该从所有缓存中逐出操作数，因此使用 clflush 的时间应该是任何其他缓存刷新过程的执行时间的上限。不仅如此，刷新的时间（对于这两种方法）也会反弹很多（数百纳秒，而未刷新的情况不到 10 纳秒）。有谁知道为什么手动冲洗会在运行时产生如此巨大的差异？

**附录**

包含所有计时例程和刷新例程的完整代码在这里（194 行）：

[http://codepad.org/hNJpQxTv](http://codepad.org/hNJpQxTv)

这是我的 gcc 版本。代码使用 -O3 选项编译。（我知道，它很旧；我必须构建的某些软件与较新的 gcc 不兼容）

使用内置规范。

```
Target: i686-apple-darwin10
Configured with: /var/tmp/gcc/gcc-5646.1~2/src/configure --disable-checking --enable-werror --prefix=/usr --mandir=/share/man --enable-languages=c,objc,c++,obj-c++ --program-transform-name=/^[cg][^.-]*$/s/$/-4.2/ --with-slibdir=/usr/lib --build=i686-apple-darwin10 --with-gxx-include-dir=/include/c++/4.2.1 --program-prefix=i686-apple-darwin10- --host=x86_64-apple-darwin10 --target=i686-apple-darwin10
Thread model: posix
gcc version 4.2.1 (Apple Inc. build 5646) (dot 1) 
```

我使用的是带有 Intel Xeon 5650 处理器的 Mac OS X 10.6。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T23:58:38.053

（部分）CPU 对正常读取实际执行的操作（在您进行基准测试时会经常发生）的伪代码可能是：

```
if( cache line is not in cache ) {
    if(cache is full) {
        find cache line to evict
        if( cache line to evict is in "modified" state ) {
            write cache line to evict to slower RAM
        }
        set cache line to "free"
    }
    fetch the cache line from slower RAM 
}
temp = extract whatever we're reading from the cache line 
```

如果您曾经`CLFLUSH`刷新缓存，那么`if(cache is full)`将是错误的，因为`CLFUSH`缓存是空的。

如果您使用复制来刷新缓存，那么`if(cache is full)`分支将是正确的，并且`if( cache line is modified )`一半的时间也是正确的（一半的缓存将包含您在复制期间读取的数据，另一半将包含您在复制期间写入的数据）。这意味着您有一半的时间最终会执行`write cache line to evict to slower RAM`.

这样做`write cache line to evict to RAM`会消耗 RAM 芯片带宽并影响`fetch the cache line from slower RAM`.

# css - Avoid *{padding=0;margin:0 } css in content page?

> ID：15712500
> 
> 赞同：1
> 
> 时间：2013-03-29T22:39:06.103
> 
> 标签：css, asp.net-4.0

I have written in css file so that there is no gap at top. It works fine.

```
*{margin:0px;padding:0px;} 
```

but i don't this to applied to particular page as i am getting the formatted text from a richtextbox control which is saved in database.

How to handle this? Is it valid to give 0.5 px in css?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T22:46:20.183

您可以在任何其他页面中使用 !important 属性覆盖它，或者在加载第一个 css 文件后重载初始定义。

我想您是在问如何在元素顶部留出空隙？您没有指定差距在什么之上。

您可以使用边距 1px 或尝试 em 值：0.5em 作为度量。

通常，我像这样使用 css：

```
html, body { margin:0; padding:0; } 
#wrapper * { margin:0; padding:0; } 
```

这样，包装器中的所有内容都将具有 0 边距和 0 填充，但页面上的其他元素不会，除非它们位于包装器对象内。

另一种选择是以一种将被覆盖的方式声明您的 CSS：

对于这个答案，您的代码可能是基于其他评论的类似内容：

```
* { margin:0; padding:0; } 
#wrapper * { margin:15px; padding:0; } 
```

那么包装器 ID 中的任何内容都会有不同的设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T22:44:09.607

It's fine to have that at the very top of your css page.

CSS actually stands for Cascading Style Sheet and this is where that is really obvious.

If you put `*{margin:0px;padding:0px;}` at the top of your file, any rules that are defined later in your file will overwrite this rule. The ***lower*** the rule in the 'cascade' the ***later*** it gets applied to the document.

See [the cascade spec for how order in css is applied](http://www.w3.org/TR/CSS2/cascade.html#cascading-order).

# c++ - 从标准输入解析参数的最快方法

> ID：15712501
> 
> 赞同：0
> 
> 时间：2013-03-29T22:39:14.210
> 
> 标签：c++, cin

假设您从按以下方式格式化的标准输入接收信息：

```
1 2 3 #3 John Tee #2
4 2 1 @1 Tree Bee #9

<int><int><int><char followed by int><string><string><char followed by int> 
```

提取此信息以在程序中使用的最快方法是什么？此外，假设您想检查第 4 和第 7 个参数是否仅包含一个“#”，后跟一个数字（否则退出），或者您想检查一行是否提前结束，如下所示：

```
1 4 2 #4 John 
```

如何以最干净、最有效的方式在 C++ 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T22:44:46.660

我最喜欢的重复基于行解析的方法是`std::getline`用作循环的条件，`while`然后解析里面的行：

```
std::string line;
while (std::getline(input_stream, line)) {
  std::istringstream line_stream(line);
  // Parse the line by extracting from line_stream
} 
```

它确保您在开始解析之前有一整行。这样，如果单行的解析出现问题，它仍然会移到下一行继续。

例如，我会检查以这样开头的字段`#`：

```
int value;
if (line_stream.get() == '#' &&
    line_stream >> value &&
    std::isspace(line_stream.peek())) {
  // Success
} 
```

我的方法是始终将我的提取物置于某种条件下。这意味着您可以尽快发现格式问题。

# c++ - 从 .bin 文件中读取 4 位块

> ID：15712502
> 
> 赞同：-2
> 
> 时间：2013-03-29T22:39:15.783
> 
> 标签：c++

我有一个 .bin 文件，其中的像素数据以 4 位格式存储（即每个像素为 4 位）。如何将数据作为 4 位读入 C 程序。Char 以 8 位块的形式读取它，所以如果我有一个指向文件开头的指针并递增它，它会跳过一个像素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T22:48:39.853

我不知道有任何处理器允许您以小于一个字节的增量从文件中读取（尽管在某些处理器上字节中的位数会有所不同），并且 C++ 中不支持读取块小于一个字节的大小。假设一个字节中有 8 位，您将需要读取一个字节，然后将其分成两个像素。

如果您的读取返回 unsigned char c，那么

```
sometype pixel1 = c >> 4;
sometype pixel2 = c & 0xf; 
```

# php - 将 3 个表与第 3 个表不关联到表 2

> ID：15712503
> 
> 赞同：0
> 
> 时间：2013-03-29T22:39:17.300
> 
> 标签：php, mysql

我正在尝试执行以下操作：-

```
SELECT t1.a, t1.b, t2.a, t2.b, t3.a, t3.b, t3.c 
FROM t1 LEFT JOIN t2 ON t1.b = t2.b 
LEFT JOIN t3 ON t2.b <> t3.b 
WHERE t3.c = 'someuser' 
```

结果：- 我在 t3 中获得了相关联的 t2 行

预期结果：- 获取 t3 中未关联的 t2 行

## 请帮忙。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T22:43:30.923

请记住，具有不匹配记录的左连接将导致`t3`. 我改变了最后两行。试试这个：

```
SELECT t1.a, t1.b, t2.a, t2.b, t3.a, t3.b, t3.c 
FROM t1 LEFT JOIN t2 ON t1.b = t2.b 
LEFT JOIN t3 ON t2.b = t3.b 
WHERE t3.c = 'someuser' and t3.b is null 
```

虽然，如果你对 t3 进行条件检查，它总是会是假的（当不检查 null 时）......

也许你想要这个？

```
SELECT t1.a, t1.b, t2.a, t2.b, t3.a, t3.b, t3.c 
FROM t1 LEFT JOIN t2 ON t1.b = t2.b 
LEFT JOIN t3 ON t2.b = t3.b and t3.c = 'someuser'
WHERE t3.b is null 
```

这两个查询之间的区别是：第一个查询应该始终返回 0 行，因为您期望 t3.b 为空（这可能表明连接的表没有匹配的记录），但随后您检查 t3.c 的值结果中永远不会存在。第二个查询在连接期间过滤 t3.c，然后在 WHERE 子句中找到空匹配项，这应该有希望表明没有匹配项（取决于数据的设置方式）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T23:19:37.243

**解决方案：**

```
SELECT t1.a, t1.b, t2.a, t2.b, t3.a, t3.b, t3.c 
FROM t1 LEFT JOIN t2 ON t1.b = t2.b 
LEFT JOIN t3 ON t2.b = t3.b and t3.c = 'someuser'
WHERE t3.b is null GROUP BY t3.c 
```

# haskell - Haskell - 输入“|”解析错误

> ID：15712506
> 
> 赞同：13
> 
> 时间：2013-03-29T22:39:47.697
> 
> 标签：haskell

```
pow1 b e  
| (e == 0)  = 1  
| otherwise = b * pow1 b (e-1) 
```

我在 .hs 文件中有确切的代码，加载时我总是得到相同的解析错误。我不认为它实际上包含任何错误 - 所以我目前的想法是“|” 符号不是 haskell 想要的，但它是我的 Macbook 键盘（使用 Mac OS）上的标准。有可能吗，如果可以，我该如何解决？我目前正在使用 TextEdit 编写代码，并启用纯文本设置。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-29T22:40:56.293

一定要缩进警卫；Haskell 有很大的空白。

```
pow1 b e
    | (e == 0)  = 1
    | otherwise = b * pow1 b (e-1) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-07-29T10:59:22.073

您需要做的就是在警卫前面添加空格，代码就可以正常工作。

```
pow1 b e  
    | (e == 0)  = 1  
    | otherwise = b * pow1 b (e-1) 
```

（user142019 已经说明了这个解决方案，但是我觉得需要解释一下才能理解这个解决方案）

**解释：**

Haskell 使用空格缩进来控制其代码的结构和范围。其他编程语言（例如 Java）依靠花括号来做到这一点，Haskell 有缩进。

您的代码不起作用，因为 Haskell 期望函数体的缩进级别比函数定义和同一级别的其他函数定义更深。同一缩进级别上的任何新行都将被尝试解释为新的函数定义，不允许以警卫开头，`|`因此会出现解析错误。

Mac 字符键和文本编辑器都没有问题。

关于缩进的主题：制表符不起作用。因此，您必须手动输入空格或更改编辑器的制表符设置以插入 4 个空格（我建议）而不是制表符。（例如，Notepad++ 允许这样做，这是我与 Haskell 一起使用的首选）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-07-30T13:31:23.237

除了记住缩进，在我第一次启动 Haskell[的网站上看到这句话：](http://learnyouahaskell.com/syntax-in-functions#guards-guards)

> 请注意，在函数名称及其参数之后，第一个保护之前没有 =。许多新手会遇到语法错误，因为他们有时会把它放在那里。

这也很重要。

@Greg Haskell 无法识别制表符`'\t'`。缩进/格式化时请使用空格而不是制表符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-08T02:40:26.890

当我在保护表达式后使用制表符而不是空格时出现此错误（'\t' 表示制表符）：

```
pow1 b e  
| (e == 0)\t= 1  
| otherwise = b * pow1 b (e-1) 
```

# parsing - 使用scala的日志解析策略

> ID：15712510
> 
> 赞同：2
> 
> 时间：2013-03-29T22:40:16.360
> 
> 标签：parsing, scala, design-patterns, pattern-matching, case-class

所以昨天我有一个日志文件，它在提供的 log.txt 中有逗号分隔的条目，如下所示：

```
entry1.1,entry1.2,entry1.3
entry2.1,entry2,2,entry2.3
.......................... 
```

因此，我非常高兴地继续创建了一个案例类：

```
case class LogEntry(
  entry1:String,
  entry2:String,
  entry3:String
) 
```

并在阅读案例类时填充案例类，如下所示：

```
line.split match {
  case Array(entry1,entry2,entry3) => LogEntry(entry1,entry2,entry3)
} 
```

现在当我今天运行我的代码时出现了问题，我注意到没有创建 LogEntry 对象。

我查看了今天提供给我的 log.txt 并意识到条目已更改：

我现在有：

```
entry1.1,entry1.2,entry1.3,entry1.4
entry2.1,entry2,2,entry2.3,entry2.4
................................... 
```

我现在在每一行中都有第四个条目。好吧，似乎没什么大不了的，只需使用第四个条目（代码气味 1）更改我的案例类，然后更改模式匹配（代码气味 2）

有人可以建议我应该如何编写代码来处理这种情况。我想扩展我的代码而不是修改它。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T21:15:13.097

当您想要正确抽象日志行时，要做的第一件事是为各个元素提供名称和适当的类型，而不是通过名称（即 entry1、entry2 等）提供伪索引。所以我们会有：

```
case class LogEntry(
    time: java.util.Date,
    userId: Int,
    host: String
) 
```

输入的严格程度取决于您的确切用例（注意`host`这里不是 a `java.net.InetAddress`）。

将新列添加到日志文件时，您可能需要保留两件事：

1.  期望旧式 LogEntries 的函数
2.  即使添加了新功能，也会处理旧日志文件。

案例 1 很简单。只需将字段添加到案例类：

```
case class LogEntry(
    time: java.util.Date,
    userId: Int,
    host: String,
    port: Int
) 
```

由于您有名称，您甚至可以更改字段的顺序，并且旧代码仍然可以正常工作，因为它期望的字段仍然存在。由于您不想再处理旧的日志文件，只需调整读入的代码。

情况 2 有点棘手：您必须反映这样一个事实，即您正在运行的应用程序中会有新旧日志条目。您可以：

1.  使附加字段可选并提供默认值：

    ```
    case class LogEntry(
        time: java.util.Date,
        userId: Int,
        host: String,
        port: Option[Int] = None
    ) 
    ```

2.  在层次结构中反映日志格式的版本（注意：您不应该从案例类继承，因此您必须从中创建普通类）：

    ```
    class LogEntry(
        val time: java.util.Date,
        val userId: Int,
        val host: String
    )

    class ExtendedLogEntry(
        time: java.util.Date,
        userId: Int,
        host: String,
        val port: Int
    ) extends LogEntry(time, userId, host) 
    ```

选项 1 让处理日志条目的代码处理条目类型之间的差异（即所有函数仍然是 type `LogEntry => ?`）。进一步还要注意，它可能允许不一致的日志条目（添加两个字段，格式 1 中都不存在，格式 2 中需要，您仍然可以将其中一个设置为`None`）。

Option 2 lets the calling code handle the difference between the entry types. If an advanced function needs an `ExtendedLogEntry`, it's type will be `ExtendedLogEntry => _`, so you cannot supply a `LogEntry` to that function (alternative: pattern match in the function and provide default / fallback behavior). Further, it prevents the inconsistency that can occur with option 1.

Concerning read-in: Option 1 will automatically set the default argument when reading old-style log files, in Option 2, old-style log files will result in `LogEntry` as before. So in both cases, old read-in code does not need to be changed, but potentially adapted in order to detect new-style or old-style logs and produce appropriate entries. (Note that this is potentially a problem with Option 2 as the style of the log is statically enforced through the typing system if you do not want to cast).

# mysql - MySQL Workbench：如何保持连接处于活动状态

> ID：15712512
> 
> 赞同：205
> 
> 时间：2013-03-29T22:40:25.383
> 
> 标签：mysql, sql, mysql-workbench, connection-timeout

**错误代码：2013。查询期间丢失与 MySQL 服务器的连接**

我正在使用 MySQL 工作台。另外，我正在运行一批插入，总共大约 1000 行（例如`INSERT INTO mytable SELECT * FROM mysource1; INSERT INTO mytable SELECT * FROM mysource2;...mysource3...mysource4`乘以 1000 次）每批都需要相当长的时间，其中一些时间超过 600 秒。

**我怎样才能配置工作台，在不停止和不丢失连接的情况下继续通宵工作？**

* * *

## 回答 #1

> 赞同：431
> 
> 时间：2013-03-29T22:49:55.073

从现在[不可用](https://web.archive.org/web/20130322031356/http://www.hassmann-software.de/mysql-workbench-lost-connection-to-mysql-server-after-600-seconds)的互联网档案中：

> 转到编辑 -> 首选项 -> SQL 编辑器并将此参数设置为更高的值：DBMS 连接读取超时（以秒为单位）。例如：86400。
> 
> 关闭并重新打开 MySQL Workbench。终止您之前可能正在运行的查询并再次运行该查询。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2015-11-13T20:02:19.533

如果您使用“基于 SSH 的标准 TCP/IP”类型的连接，则在“首选项”->“其他”下有“SSH KeepAlive”字段。我花了很长时间才找到它:(

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-06-20T23:53:24.317

在 5.2.47 中（至少在 mac 上），去首选项的位置是：MySQLWorkbench->Preferences->SQL Editor

然后你会看到两者：

DBMS 连接保持活动间隔（以秒为单位）： DBMS 连接读取超时（以秒为单位）：

后者是您希望将限制从 600 提高到更多的地方。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2015-12-07T05:43:04.550

在我尝试在命令行和本地服务器设置中设置 SSH 超时之后。@Ljubitel 解决方案解决了我的问题。

需要注意的一点是，在 Workbench 6.2 中，该设置现在处于高级状态

[![在此处输入图像描述](../Images/12c493b7c25c7e30d04dbfd12db8ed57.png)](https://i.stack.imgur.com/hshuQ.png)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2019-07-07T07:21:55.087

我有一个类似的问题，`CREATE FULLTEXT`在 30 秒后超时：

![错误](../Images/55c7366802ee5580e27d1c0499591039.png)

在 Edit -> Preferences -> SQL Editor 下将 DBMS 连接读取超时间隔设置为 0 为我解决了这个问题：

![解决错误](../Images/93d99d9c2c76489a3df9c56b0cd2fb5a.png)

此外，我不必重新启动 mysql 工作台即可。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-08-06T11:30:51.313

如果您使用的是“基于 SSH 的标准 TCP/IP”类型的连接，则可能是 ssh 服务器一直超时，在这种情况下，您必须在服务器上的 /etc/ssh/sshd_config 中编辑 TCPKeepAlive 相关设置.

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-10-02T12:58:16.987

我在 2013 年遇到了这个错误，上述偏好更改都没有解决这个问题。我重新启动了mysql服务，问题就消失了。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-06-21T10:51:37.997

好的 - 所以这个问题一直让我发疯 - Ubuntu Linux 上的 v 6.3.6。以上解决方案都不适合我。以前连接到 localhost mysql 服务器总是可以正常工作。连接到远程服务器总是超时 - 大约 60 秒后，有时更短，有时更长。

最终对我有用的是将 Workbench 升级到 6.3.9 - 不再丢失连接。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-04-23T09:58:48.883

在 mysql-workbech 5.7 中编辑->首选项-> SSH -> SSH 连接超时（用于 SSH 数据库连接） [![在此处输入图像描述](../Images/60851f98382304cc652f9a5097d3507a.png)](https://i.stack.imgur.com/6vusC.png)

# c - C中的埃拉托色尼筛算法

> ID：15712513
> 
> 赞同：3
> 
> 时间：2013-03-29T22:40:28.703
> 
> 标签：c, primes, sieve-of-eratosthenes, sieve, dangling-pointer

好的，所以我创建的这个函数使用 Eratosthenes 算法来计算所有素数 <= n。该函数在参数中存储素数和素数。

当函数退出时，素数应该指向一块动态分配的内存，其中包含所有素数<= num。 `*count`将有素数的计数。

这是我的功能`getPrimes`：

```
void getPrimes(int num, int* count, int** array){
    (*count) = (num - 1);
    int sieve[num-1], primenums = 0, index, fillnum, multiple;

    //Fills the array with the numbers up to the user's ending number, num.
    for(index = 0, fillnum = 2; fillnum <= num; index++, fillnum++){
        sieve[index] = fillnum;
    }

    /* Starts crossing out non prime numbers starting with 2 because 1 
       is not a prime. It then deletes all of those multiples and 
       moves on to the next number that isnt crossed out, which is a prime. */
    for (; primenums < sqrt(num); primenums++)  //Walks through the array.
    {
        //Checks if that number is NULL which means it's crossed out
        if (sieve[primenums] != 0) {
            //If it is not crossed out it starts deleting its multiples.
            for (multiple = (sieve[primenums]); 
                 multiple < num; 
                 multiple += sieve[primenums]) {  
                //Crossing multiples out 
                //and decrements count to move to next number
                sieve[multiple + primenums] = 0;
                --(*count);
            }
        }
    }
    int k;
    for(k=0; k < num; k++)
        printf("%d \n", sieve[k]);

    printf("%d \n", *count);
    array = malloc(sizeof(int) * (num + 1));
    assert(array);
    (*array) = sieve;
} 
```

现在，这是预期的输出和我的输出。如您所见，我的`getPrimes`功能中有问题，但我不确定是什么。

```
预期输出：

小于或等于 19 的素数有 8 个

2 3 5 7 11 13 17 19  

我的输出：

2
3
0
5
0
7
0
0
0
11
0
13
0
0
0
17
0
19
0
0

```

到目前为止，人们向我指出了以下 3 个问题：

1.  错误的删除过程`if (sieve[multiple]) {`数组筛子索引有偏差
2.  `(*array) = sieve;`泄漏刚刚分配的内存，并让我们`*array`指向一个在函数返回时不再存在的局部变量——你会得到一个悬空指针。
3.  `if(sieve[i] != NULL)`应该使用 0，而不是 NULL，你没有指针数组。

但是，我不太确定如何解决已为我发现的悬空指针/内存问题。除此之外，我想知道我的代码中是否还有其他错误，因为我不太清楚为什么我的输出中的数字添加了 0...不要担心不同的输出样式，只是额外的数字. 谢谢你能帮我解决这个问题！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T23:03:42.363

```
void getPrimes(int num, int* count, int** array){
    (*count) = (num - 1);
    int sieve[num-1], primenums = 0, index, fillnum, multiple; 
```

您正在`num-1`为从 2 到 的数字声明一个元素数组`num`。没关系。

```
 //Fills the array with the numbers up to the user's ending number, num.
    for(index = 0, fillnum = 2; fillnum <= num; index++, fillnum++){
        sieve[index] = fillnum;
    } 
```

您正在用与之关联的数字填充每个插槽，也可以。

```
 /* Starts crossing out non prime numbers starting with 2 because 1 is not a prime.
        It then deletes all of those multiples and 
        moves on to the next number that isnt crossed out, which is a prime. */
     for (; primenums < sqrt(num); primenums++) //Walks through the array. 
```

您大致停在平方根处，这很好。

```
 {
            if (sieve[primenums] != 0){ //Checks if that number is NULL which means it's crossed out

                   for (multiple = (sieve[primenums]); multiple < num; multiple += sieve[primenums])
                      //If it is not crossed out it starts deleting its multiples.
                   {  //Crossing multiples out and decrements count to move to next number
                            sieve[multiple + primenums] = 0; 
```

你这里有问题。您仅在 时停止循环`multiple >= num`，但您正在写入 index `multiple + primenums`，并且通常超过数组的末尾。例如，使用`num == 19`, and `primenums == 1`（删除 3 的倍数），最后一次写入是对 index `18 + 1`，但最后一个有效索引是`num - 2 = 17`.

第 1 点的索引偏差已修复。但

```
 --(*count); 
```

您在这里无条件地递减，在之前的代码中，您只是在尚未被划掉`*count`时才递减它。`sieve[multiple]`这才是正确的方法。我建议

```
for(multiple = primenums + sieve[primenums]; multiple < num - 1; multiple += sieve[primenums]) {
    if (sieve[multiple]) {
         sieve[multiple] = 0;
         --(*count);
    }
} 
```

让它更简单一点。

```
 }
            }
        }
        int k;
        for(k=0; k < num; k++)
            printf("%d \n", sieve[k]); 
```

`sieve`无论是否存在，您都在打印内容`0`，并且还打印出`sieve[num - 1]`不存在的内容。做了

```
for(k = 0; k < num-1; ++k) {
    if (sieve[k]) {
        printf("%d\n", sieve[k]);
    }
} 
```

只打印素数。

```
 printf("%d \n", *count);
        array = malloc(sizeof(int) * (num + 1));
         assert(array);
         (*array) = sieve;
} 
```

替换`(*array) = sieve`为

```
int i = 0;
for(k = 0; k < num-1; ++k) {
    if (sieve[k]) {
        (*array)[i] = sieve[k];
        ++i;
    }
} 
```

只写素数到`*array`。此外，您不需要 allocate `(num + 1)*sizeof(int)`，而只是`*count * sizeof(int)`为此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T23:05:21.783

您要打印的数字属于筛子，因此所有非质数都设置为 0。尝试按以下方式打印

```
for (k = 0; k < num; k++)
if (sieve[k] != 0)
{
        printf(" %d\n", sieve[k]);
}
printf("\n"); 
```

此外，您不应`sieve`通过`array`参数返回本地数组，因为它位于堆栈上，并且在函数返回时将不再可用。

# android - android - 基于状态的活动执行顺序

> ID：15712514
> 
> 赞同：1
> 
> 时间：2013-03-29T22:40:30.890
> 
> 标签：android

我想创建一个应用程序，其中几乎没有以不同顺序在应用程序中重用的活动和布局。所以基本上不是将 if else 放在我的代码中以查找它被调用的位置以及接下来应该调用哪个活动，我想知道是否有更清洁的方法来执行此操作。

目前，我正在发送活动意图的状态，以决定下一步是什么。

1) 登录 2) 分配的书籍 - 显示我要拿的书籍列表 3) 已分配的办公桌 - 显示我要前往的办公桌 其他一些过程现在最后的屏幕顺序相反 3.10) 4) 取消分配办公桌 5) 归还书籍 6 ） 登出

对于 1 & 6、2&5 和 3 & 4，我可以使用相同的活动和布局，并且根据我获得控制权的活动，我可以决定顺序。就像如果 BooksActivity 是从登录中调用的，我会在屏幕上填充分配信息，我的下一个屏幕将是桌面分配，但如果它是从 3.10 调用的，我会显示取消分配信息，我的下一个屏幕将是注销。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T23:24:31.407

你的方法是最简单的。

您可以创建一个全局控制器来存储应用程序的当前状态，并查询它以获取所需的操作。

在像您这样的简单应用程序上，这似乎是一种矫枉过正，但随着状态变得越来越复杂，或者当您需要持久存储应用程序的状态时，控制器方法将开始具有吸引力。

# jenkins - 如何在发布作业脚本中以 JUnit XML 格式获取在 Jenkins 中运行的测试数量？

> ID：15712516
> 
> 赞同：12
> 
> 时间：2013-03-29T22:40:34.483
> 
> 标签：jenkins, continuous-integration, jenkins-plugins

有什么方法可以在 Post Job Script 中获取在 Jenkins 中执行（或通过）的测试数量（*例如，将此数字发送到 Github Status API*）？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-30T13:24:34.323

我没有看到任何直接从`Publish JUnit test result report`Jenkins 插件访问这些数字的方法。

但是，在成功解析 JUnit XML 后，您始终可以使用/解析从 Jenkins REST API 获取的 xml 或 json：

`http://<jenkinsHost>/job/<YourJobName>/<JobID>/testReport/api/json?pretty=true` 或者

让它更通用： `http://<jenkinsHost>/job/<YourJobName>/lastSuccessfulBuild/testReport/api/json?pretty=true`

对于 JSON 输出：

```
 {
      "duration" : 6109.1104,
      "failCount" : 0,
      "passCount" : 4389,
      "skipCount" : 0,
      "suites" : [
        {
        "cases" : [
          {
            ...
          }
        ],
        "duration" : 0.012,
        "id" : null,
        "name" : "EventTest",
        "stderr" : null,
        "stdout" : null,
        "timestamp" : null
         }
       ]
  } 
```

`http://<jenkinsInstanceHost>/job/<YourJobName>/<JobID>/testReport/api/xml`

对于 XML 输出：

```
<testResult>
  <duration>6109.1104</duration>
  <failCount>0</failCount>
  <passCount>4389</passCount>
  <skipCount>0</skipCount>
 <suite>
  <case>
    <age>0</age>
    <className>
     ...
    </className>
    <duration>0.012</duration>
    <failedSince>0</failedSince>
    <name>Loop</name>
    <skipped>false</skipped>
    <status>PASSED</status>
  </case>
  <duration>0.012</duration>
  <name>EventTest</name>
 </suite>
</testResult> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-30T21:56:03.743

我最终只写了一个简单的 bash 脚本，它对运行测试后生成的 xml 进行超级简单的解析。如果您需要远程执行此操作，则按照其他答案的建议使用 API 是一个很酷的主意。就我而言，这是脚本：

```
total_tests=$(cat test-reports/*.xml | grep "<testsuite" | tr -s " " | cut -d " " -f6 | cut -d "=" -f2 | sed 's/\"//g' | paste -sd+ - | bc) 
```

# excel - Count Average Value per Any Arbitrary Grouping

> ID：15712518
> 
> 赞同：0
> 
> 时间：2013-03-29T22:40:46.150
> 
> 标签：excel, pivot, formula, average, excel-2003

I have a 2-column in Excel which pairs Age with a certain value:e.g.,

```
34 107.8
22 5
22 97
45 76.5
46 16 
```

I need to create a table/chart/pivot which shows me the AVERAGE value per any arbitrary group. Let's say:

```
BRACKET   VALUE AVG
0-39      ...
40        ...
41        ...
42-60     ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T22:55:45.370

Say you have the age stored in in column A and your value in column B (I assume, you place the in rows 2-19, adjust accordingly)

Store the minimum age of each bucket (0, 40, 41, 42, 60) in column D and add a really high value below the last value (e.g. 150).

**Excel 2003 solution:** Enter this formula in E2 and then copy it down:

```
=IF(SUMPRODUCT(($A2:$A19>=D2)*(A2:A19<D3)),SUMPRODUCT($B2:$B19*($A2:$A19>=D2)*(A2:A19<D3))/SUMPRODUCT(($A2:$A19>=D2)*(A2:A19<D3)),"No values") 
```

**Excel 2007+ solution:** Enter this formula in E2 and copy it down:

```
=IFERROR(AVERAGEIFS($B:$B,$A:$A,">="&D2,$A:$A,"<"&D3),"No values") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T00:21:22.237

If you have the "lower bound list" in D2:D10 as Peter suggests then this "array formula" in E2 will also do the job:

`=AVERAGE(IF(LOOKUP($A$2:$A$19,D$2:D$10)=D2,B$2:B$19))`

confirm with `CTRL`+`SHIFT`+`ENTER` so that curly braces like { and } appear around the formula in the formula bar......and copy down column

To get zero in place of `#DIV/0!` error if no values exist for that bracket change to

`=LOOKUP(10^10,IF({1,0},0,AVERAGE(IF(LOOKUP($A$2:$A$19,D$2:D$10)=D2,B$2:B$19))))`

# delphi - overload function & procedure , any rules?

> ID：15712522
> 
> 赞同：2
> 
> 时间：2013-03-29T22:40:55.207
> 
> 标签：delphi

would like to use the same name for a procedure and a function , can I do this, any regulations on this issue ?

```
 /// first version 
 function RunMyImageProcess (aRect : TRect; aBitmap : TBitmap ):  TPoint; overload ;

 ///  a overload version, this works  , it is simple :-) 
 function RunMyImageProcess (aRect : TRect; aBitmap : TBitmap ; aprocessflag : Boolean):  TPoint; overload ; 

 ///  need now a procedure
 ///  will return 2 Points now !!!
 ///   can I do this in DELPHI ???? 
 procedure RunMyImageProcess (var LowerLeft, Upperright: TPoint; aBitmap : TBitmap ; aprocessflag : Boolean):  boolean; overload ; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-29T22:52:11.553

You can have overloaded functions and procedures with the same name.

However, you cannot rely on function return type for overload discrimination. So if you have a function and a procedure with the same argument list, they cannot be overloaded.

I would caution you not to go mad with overloading. There are all sorts of traps that you can fall into. For example, if you distinguish based on floating point or integer arguments it can be hard to be sure which overload you are calling. There is also much scope for confusion when you distinguish between pointers and dynamic arrays, as Embarcadero discovered with the XE3 TStream overloads.

In fact the documentation of the overloading rules is incomplete and the only way to fully understand the compiler's behaviour is by reverse engineering.

# html - 来自链接css的背景图像不会显示

> ID：15712534
> 
> 赞同：0
> 
> 时间：2013-03-29T22:42:54.900
> 
> 标签：html, css

在处理我的 HTML 布局并在我的文档头部调整我的 CSS 时，以下工作正常：

```
html{background:url("gfx/green_tile.gif");} 
```

然后我将我的 CSS 移动到我的 css 文件夹中的链接样式表中。

这是我的文件结构

*   索引.html
*   gfx
    *   green_tile.gif
*   css
    *   自定义.css

注意：我也尝试过以下方法

```
html{background:url("../gfx/green_tile.gif");}

html{background-image:url(...);} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:46:11.167

如果样式表是 custom.css 那么`html{background:url("../gfx/green_tile.gif");}`应该可以工作。这种事情一直发生在我身上。通常是因为我拼写错误或我没有放足够的东西`../`

尝试放置绝对路径`http://domain.com/gfx/green_tile.gif`，看看是否有效。不是一个永久的解决方案，但它应该有助于调试它，以确保图片正确加载。

# ruby-on-rails - ApplicationController/Helper/view 负责什么？

> ID：15712535
> 
> 赞同：0
> 
> 时间：2013-03-29T22:43:01.213
> 
> 标签：ruby-on-rails

似乎它们与任何特定应用程序没有直接关系。那么他们一般应该负责什么？例如，应用程序 MVC 的哪一部分应该放在应用程序级别而不是任何特定的级别。我们如何决定是否应该将一段特定的代码放在帮助程序或视图中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T23:05:43.883

### 应用控制器

通常`ApplicationController`应将其视为继承的基类`ActionController::Base`。虽然从技术上讲，您可以将路由操作指向`ApplicationController`，但这是一种不好的形式。它应该被视为您的应用程序和 Rails 代码之间的入口点。

它提供了一个通用的定制层，您可以在其中创建可在子类中使用的方法。这些实用方法通常应仅限于直接依赖于 HTTP 请求上下文的事物（例如会话数据）。一个很好的例子是`current_user`Clearance 通过模块添加到您的 ApplicationController 的方法。

子类化`ApplicationController`以添加可以使用这些方法的 RESTful 控制器。

我还发现它是一个有用的地方，可以很好地`rescue_from`处理错误并优雅地处理它们，而不是直接重定向到 500 错误页面。

### 意见/申请

我通常发现这是放置共享部分的好地方，例如导航和 Flash 标记。

### 帮手

I find I rarely use helpers at all, preferring presenters in their place. But if you have common logic through the app that needs a view context, the application's helper is the place to store it. Helpers used in shared partials in views/application usually fit here fairly well.

# python - Python 在类之间传递对象

> ID：15712537
> 
> 赞同：2
> 
> 时间：2013-03-29T22:43:19.937
> 
> 标签：python, pexpect

嗨，我想知道如何在班级之间传递对象。我将使用我的脚本首先登录到我们的服务器，在客户端服务器旁边，而不是路由器和交换机。这是脚本：文件名为connect.py：

```
 import expect

class domain_connect:

        def __init__(self,usr='user',pwd='password',d1='192.168.1.3',dclient='192.168.2.3'):
        self._usr =us
        self._pwd =pwd
        self._d1 =d1
        self._dclient =dclient

    def djump(self):

        child=pexpect.spawn('ssh -o StrictHostKeyChecking=no -l ' +self._usr+" "+self._d1) 
        child.expect('assword:')
        child.sendline(self._pwd)
        child.expect(':~>')
        ##Connect to client server
        child.sendline(self._dclient)
        child.expect('assword:')
        child.sendline(self._pwd)
        child.expect('accept:')
        child.sendline(' ')
        child.expect(':~>')
        return child

class ce_connect:
    def __init__(self, child, ip, usr, pwd, enpwd):
        self._child = child
        self._ip = ip
        self._usr = usr
        self._pwd = pwd
        self._enpwd = pwd

    def cjump(self):
        ##Connecting to router
        child.sendline('ssh -o StrictHostKeyChecking=no -l '+self._usr+' '+self._ip)
        return self._child 
```

这是使用的脚本：

```
import connect

child = connect.domain_connect()
child = child.djump() ## At this point I'm good toward the client server 
```

我试图执行以下操作以将子对象传递给 ce_connect 类

```
 child2 = connect.ce_connect(child, '192.78.1.20', 'username', 'password', 'password2')
    child2 = child2.cjump() 
```

我收到一个错误：

```
AttributeError: 'spawn' object has no attribute 'djump' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T22:48:13.173

您已经*成功*地将`child`对象传递给`ce_connect`构造函数。

当你这样做时：

```
child2 = connect.ce_connect(child, '192.78.1.20', 'username', 'password', 'password2') 
```

... 传递`child`给`ce_connect`构造函数，因此`child2._child`最终成为与 . 相同的对象`child`。因此，当您调用`child2.cjump()`，并且调用`self._child.dump()`时，它正在调用`djump`您的`child`对象。正如它应该的那样。

问题是它`child`不是一个`domain_connect`对象，它是一个`pexpect.spawn`对象。这就是你得到那个的原因`AttributeError: 'spawn' object has no attribute 'djump'`，这就是它所说的。

原因很简单：

```
child = child.djump() 
```

这设置`child`为任何`djump`返回。`djump`返回的是一个对象`pexpect.spawn`。在该行之前，`child`是 a `domain_connect`，但现在，它是 a `spawn`，并且您不再有任何可访问的`domain_connect`.

答案很简单：不要那样做。保留对 的引用`domain_connect`并使用它。像这样的东西：

```
child = connect.domain_connect()
child_jump = child.djump()
child2 = connect.ce_connect(child, '192.78.1.20', 'username', 'password', 'password2')
child2_jump = child2.cjump() 
```

作为旁注，我认为`child`在方法实现和调用代码中重用名称会使您感到困惑。如果你能想出不同的名字，就更容易保持直截了当。

* * *

同时，一旦你解决了这个问题，你就会遇到另一个问题。您的代码似乎期望`child`a`ce_connect`同时是 a`domain_connect` *和*a `pexpect.spawn`。特别是，在里面`ce_connect.cjump`，你有这个：

```
child.sendline('ssh -o StrictHostKeyChecking=no -l '+self._usr+' '+self._ip) 
```

没有对象的`sendline`方法`domain_connect`。

很难决定这里有什么正确的解决方法。您需要清楚地了解这些对象中的每一个应该是什么。为什么都叫`child`？孩子应该是什么意思？

一种可能性是`child`对象应该是`pexpect`子进程，而不是`*_connect`对象，所以你真正想要的是这样的：

```
domain = connect.domain_connect()
child = domain.djump()
ce = connect.ce_connect(child, '192.78.1.20', 'username', 'password', 'password2')
child2 = ce.cjump() 
```

或者，也许您实际上根本没有使用这些`connect`对象，只是它们`djump`/`cjump`方法的结果。在这种情况下，您可以将其写为：

```
child = connect.domain_connect().djump()
child2 = connect.ce_connect(child, '192.78.1.20', 'username', 'password', 'password2').cjump() 
```

但在这种情况下，您最好将公共接口设置为一对模块级函数，并将类隐藏在这些函数的实现下。

或者，也许您想让`domain_connect`对象在它们所代表的任何其他内容之上充当子进程，方法是保留`djump`作为`_child`成员的结果，然后将 以及可能的其他方法委托`sendline`给真实`pexpect`对象，如下所示：

```
def sendline(self, line):
    return self._child.sendline(line) 
```

或者......好吧，正如我所说，有很多可能性，并且不知道你的设计应该如何工作以及你的类和变量应该代表什么，真的没有办法说如何让你的代码适合你的设计。

# php - 获取未定义的连接值

> ID：15712538
> 
> 赞同：0
> 
> 时间：2013-03-29T22:43:21.017
> 
> 标签：php, mysql

我有 3 个表：一个 shop 表、一个 stock 表和一个 stock_amounts 表。shop 表定义了每个商店的详细信息，stock 表定义了所有库存商品，stock_amounts 表定义了每个商店的商品库存量。

我的表如下所示：

```
*Shop table:
| id | shop
-------------
| 1  | Head Office
| 2  | shop 1

*Stock table:
| id | stock_description
------------------------
| 1  | Some description
| 2  | Some description
| 3  | Some description

*Stock amounts table:
| id | shop_id | stock_id | stock_amount
------------------------------------------
| 1  | 1       | 1        | 5
| 2  | 2       | 2        | 4 
```

我想显示商店拥有的所有库存，但也显示尚未为该商店定义的库存。例如，商店 1 有 5 个库存 1，但没有库存 2 或库存 3。我希望库存 2 和 3 显示为零或 NULL 值。

我目前正在一起加入。如果我没有在`WHERE`子句中指定任何内容，则会显示所有带有库存的商店，并为未定义的值显示 NULL。如果我这样做`WHERE stock_amounts.id <> '2'`了，那么所有 NULL 值都不再显示。

我想知道的是：
1）如果我在 WHERE 子句中指定 'not 2'，为什么 NULL 不再显示？
2) 这样做的正确方法是什么，正确的 MySQL 查询是什么样的？

## 编辑：

需要明确的是，无论哪个商店有哪些库存，我都没有问题。我遇到的问题是显示**商店 1**拥有的所有库存 +**商店 1** *没有*的所有库存。
我的查询：
`SELECT shop, stock.id stock_id, description, amount`
`FROM stock`
`LEFT JOIN shop_stock ON shop_stock.stock_id = stock.id`

此查询返回：

```
|shop|stock_id|description     |amount
--------------------------------------
|1   |1       |Some description|5
|2   |2       |Some description|4
|NULL|3       |Some description|NULL 
```

如果我添加`WHERE shop <> '2'`，NULL 也会消失。我想要一个查询，它将返回**shop 1**的下表：

```
|shop|stock_id|description     |amount
--------------------------------------
|1   |1       |Some description|5
|NULL|2       |Some description|NULL
|NULL|3       |Some description|NULL 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T22:47:57.953

您想使用外部联接而不是内部联接。如果您提供了查询，则更容易分辨。

您可能正在使用外部联接。在这种情况下，where 子句中的条件要求`stocks`实际匹配。请记住，`NULL <> 2`评估结果为假，而不是真。

您可以通过将条件放在`on`子句中来解决此问题。

要获得完整的商店和库存，请使用生成所有组合的驱动程序表，然后将其连接到数量：

```
select name, stock_description, coalesce(sa.stock_amount, 0) as stock_amount
from (select shop.id as shop_id, shop.name, stock.id as stock_id, stock.stock_description
      from shop cross join stock
     ) ss left outer join
     stockamount sa
     on sa.shop_id = ss.shop_id and sa.stock_id = ss.shop_id 
```

如果要排除 2，请在 ss 表中执行此操作。

```
select name, stock_description, coalesce(sa.stock_amount, 0) as stock_amount
from (select shop.id as shop_id, shop.name, stock.id as stock_id, stock.stock_description
      from shop cross join stock
      where stock.id <> 2
     ) ss left outer join
     stockamount sa
     on sa.shop_id = ss.shop_id and sa.stock_id = ss.shop_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T23:32:27.707

我认为您想使用 and 的叉积进行左连接，`Amounts`这将在每个商店都不存在的库存条目上产生所需的空值。：`Shop``Stock`

```
SELECT Shop.*, Stock.*, Amounts
FROM Shop
CROSS JOIN Stock
LEFT JOIN Amounts
ON Shop.id = shop_id
AND Stock.id = stock_id 
```

# c - 不想创建写保护

> ID：15712543
> 
> 赞同：1
> 
> 时间：2013-03-29T22:43:46.767
> 
> 标签：c

我有这个任务，其中一部分需要创建一些名称为 xNNNNNN 的文件，其中 NNNNNN 被一个随机的六位数替换，并且文件应该按照生成它们的名称的随机顺序创建，我已经已经这样做了，但问题是我得到的文件是**写保护**的，但我希望它们是**只写**的，我做错了什么？它与标志或其他东西有关吗？

这是我写的：

```
 int file;
  int fileName;
  int counter;
  char str1[5];
  char str2[5];
  int fileNum = atoi(argv[2]);

  for (counter = 0; counter < fileNum ; counter++)
  {
     fileName = rand() % 900000 + 100000; 

     sprintf (str1, "%d", fileName); //write the value of r as a string in str
     sprintf (str2, "%s%s", "x", str1);
     printf ("%s\n" ,str2); 

     file = open (str2, O_WRONLY|O_CREAT, S_IRUSR | S_IRGRP | S_IROTH); 
     if (file != -1)
     {
         //do something 
     } 
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T22:51:53.347

您希望它们是只写的，但您将只读权限传递给`open()`：

```
file = open (str2, O_WRONLY|O_CREAT, S_IRUSR | S_IRGRP | S_IROTH); 
```

这里的权限是`S_IRUSR | S_IRGRP | S_IROTH`. 该`O_WRONLY`标志用于文件描述符本身的权限，而不是创建文件的权限。

这可以满足您的要求：

```
file = open(str2, O_WRONLY|O_CREAT, 0222); 
```

请注意`0222 = S_IWUSR | S_IWGRP | S_IWOTH`. 我个人觉得八进制更容易阅读，但您可能更喜欢其他表示法。

## 关于 umask 的注意事项

创建文件的权限将通过删除 umask 中设置的位来修改。如果您确实需要将权限设置为 0222 而不是 0200，则有两种方法：

### 打开文件后更改权限

```
#include <sys/stat.h>

int fdes;
fdes = open(str2, O_WRONLY|O_CREAT, 0222);
if (fdes < 0) abort();
fchmod(fdes, 0222); 
```

### 更改进程umask

```
#include <sys/stat.h>

mode_t saved_umask;
int fdes;
saved_umask = umask(0);
fdes = open(str2, O_WRONLY|O_CREAT, 0222);
umask(saved_umask); 
```

# session - 会话问题（PHP）

> ID：15712550
> 
> 赞同：0
> 
> 时间：2013-03-29T22:44:28.010
> 
> 标签：session

我在索引会话方面遇到了一些问题。我做了一个功能来索引我想要的会话。我在报告系统上使用了它，人们不会报告同样的事情并在报告表上进行大量插入。它有效，它正在阻止人们。但是，在您第一次报告时（当 Session 未编入索引时），它会显示此错误： **Notice: Undefined index: SessionReport8 in C:\xampp\htdocs\sucess\reportprocess.php on line 12**

我将其设置为空。我回应它，​​它是空的，不是未定义的。如何解决？

这是功能：

```
 function indexarSession($Session)
{
    if (!isset($Session))
    {
        $Session = null;
        return $Session;
    }
    else
    {
        $Variavel = $Session;
        return $Variavel;
    }
} 
```

以及它被应用的地方：

```
$SessionReport = $Funcoes->indexarSession($_SESSION["SessionReport" . $PostID]);

        if (!isset($SessionReport))
    {
        **DO THE INSERT*
    }
    else
    {
            **SHOW MESSAGE**
    } 
```

先谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:48:19.287

您在 indexarSession() 函数中使用 Session 而不检查它是否已设置。

尝试，

```
if(isset($_SESSION["SessionReport" . $PostID])){
   $SessionReport = $Funcoes->indexarSession($_SESSION["SessionReport" . $PostID]);
} else {
   // Session not set.
} 
```

# c++ - 什么 C++ 数据结构可以处理类似于 Java ArrayList 的“插入”？

> ID：15712551
> 
> 赞同：2
> 
> 时间：2013-03-29T22:44:41.943
> 
> 标签：c++, arrays, vector, arraylist, iterator

我正在尝试将 Java 项目转换为 C++ 项目。在 Java 项目中，我使用了 ArrayList，但我不知道处理我在 C++ 中所做的事情的最佳方式。

目前我正在使用 std::vector 因为它允许访问任意位置的元素，并且因为它有一个插入方法。像 Java ArrayList 一样，我希望能够在向量中的某个位置 (int p) 插入一个元素，并将当前位于 p 的元素（如果有）转移到 p+1。并且随后的元素也将被转移。

单个条目的 std::vector.insert 如下所示：

```
iterator insert (iterator position, const value_type& val); 
```

和来自[http://www.cplusplus.com/reference/vector/vector/insert/](http://www.cplusplus.com/reference/vector/vector/insert/)的描述说

> 因为向量使用数组作为其底层存储，所以在向量末端以外的位置插入元素会导致容器将位置之后的所有元素重新定位到它们的新位置。

这是否意味着插入实际上将新元素放在 p+1 而不是 p？它是否也不会移动当前位于 p 的元素？

另外，为什么 insert 方法需要一个迭代器而不是一个数字索引？我没有看到优势。它只是使在任意位置插入变得更加困难。是否有某种方法可以将迭代器构造为位于特定位置而不必在那里进行迭代？[我只在http://www.cplusplus.com/reference/iterator/RandomAccessIterator/](http://www.cplusplus.com/reference/iterator/RandomAccessIterator/)看到比较

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T22:51:16.037

向量完全符合您的需要，但边界条件有点不同。

The iterator you give it points to the element you want to insert *before*.

In other wirds, if you pass it an iterator pointing to the first element, then it will insert the new element *at the start of the vector*, and push the element that *was* the first to the second position.

> Also, why does the insert method take in an iterator instead of just a number index? I don't see the advantage. It just makes it more difficult to insert at arbitrary positions. Is there some way to construct an iterator to be at a specific location without having to iterate there?

Why is it more difficult?

To get an iterator pointing to the 17th element, do this:

```
vec.begin() + 17; 
```

I don't know what you mean by "having to iterate there", but you don't need to increment the iterator 17 times.

# ruby - 如何列出所有使用 V3 API 的 Github 用户？

> ID：15712553
> 
> 赞同：1
> 
> 时间：2013-03-29T22:44:45.720
> 
> 标签：ruby, api, curl, github, github-api

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T22:49:33.790

您需要使用`since`参数而不是页面

理想情况下，您会获得`id`列表中最后一个用户的 135 （在本例中为**135**），然后使用该 id 进行下一次调用，新的响应将包含超过该用户 ID 的用户

```
https://api.github.com/users?since=135 
```

# c++ - 使用数组元素执行计算

> ID：15712558
> 
> 赞同：0
> 
> 时间：2013-03-29T22:44:57.943
> 
> 标签：c++, arrays, hash

我正在尝试创建一个散列函数。该算法要求我提取字符串的每个字母并将其转换为 ASCII；将其乘以基于其在字符串中的位置的数字（例如，输入为 STACK；'S' 的 ASCII 将是 344，将该值乘以 9^9 然后 'T' 的 ASCII 将是 347 将该值乘以 8^ 8..等）；然后将这些值相加。

我了解如何访问数组中的值以创建总和并将它们转换为 ASCII。我不明白如何访问数组来执行中间的计算。

当我构建程序时，我也会收到“断言失败错误”。我查看了错误，它说它与错误调用有关，但是我在我的代码中看不到任何错误调用。

我的代码如下：

```
#include <iostream>
#include <string>

using namespace std;

int main()
{
    string input ;
    int finalanswer = 0;

    cout << "Enter your first name please : " ;

    cin >> input;

    cout << "Your name is " << input ;

    for (int x=0; x=input.size(); x++)
    {   
        finalanswer += input[x];

        cout << finalanswer ;
    }

    cin.get();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T22:46:37.670

for循环中的条件是错误的，应该是

```
for(int x=0; x < input.size(); x++) 
```

使用您的代码，第二次执行循环的主体`x`是`input.size()`并且太大而无法访问`input[x]`- 导致您看到的错误。

* * *

我不确定我是否 100% 了解预期的算法，但这可能会有所帮助：

```
int myPow(int x, int p)
{
  if (p == 0) return 1;
  if (p == 1) return x;
  return x * myPow(x, p-1);
} 
```

然后循环：

```
for(int x=0; x < input.size(); x++)
{
    finalanswer += input[x] * myPow(9-x);

    cout << finalanswer ;
} 
```

# mysql - MySQL：如何返回每个唯一数字的最新行

> ID：15712562
> 
> 赞同：0
> 
> 时间：2013-03-29T22:45:21.540
> 
> 标签：mysql, greatest-n-per-group

在下表中，我不确定如何执行此操作，但如何编写返回每个唯一电话号码的**最新行的查询？**

```
PhoneNumber    MessageText               ReceiveTime        
-------------  ------------------------  -------------------
+639148186649  Delivery please           2013-03-19 01:12:55
+639148186649  I need this item          2013-03-22 02:15:01
+639148186649  I need more of this item  2013-03-23 12:01:02
+639194357455  How much for this...      2013-03-24 16:36:33
+639194357455  What time do you open?    2013-03-24 17:55:07 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T23:48:08.817

我找到了答案！

```
SELECT s1.PhoneNumber, s1.MessageText, s1.ReceiveTime FROM mytable s1 LEFT JOIN mytable s2
    ON (s1.PhoneNumber = s2.PhoneNumber AND s1.ReceiveTime < s2.ReceiveTime)
    WHERE s2.ReceiveTime IS NULL ORDER BY ReceiveTime DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T23:03:54.917

I think this should work...

```
SELECT *
FROM PhoneTable
GROUP BY PhoneNumber
HAVING ReceiveTime = MAX(ReceiveTime)
ORDER BY ReceiveTime 
```

..or you may have to do something like this...

```
SELECT PhoneNumber, MessageText, ReceiveTime
FROM PhoneTable t
WHERE ReceiveTime = (SELECT MAX(ReceiveTime)
                     FROM t
                     GROUP BY PhoneNumber
                     HAVING PhoneNumber = t.PhoneNumber) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T22:51:27.110

您不能按一列分组并返回不依赖于该组的其他列。有关一些提示，请参阅[此问题](https://stackoverflow.com/questions/11813680/php-mysql-sort-inside-group)的答案。

# asp.net - 对象引用未设置为对象的实例（下拉列表）

> ID：15712563
> 
> 赞同：0
> 
> 时间：2013-03-29T22:45:26.117
> 
> 标签：asp.net, linq, entity-framework, asp.net-mvc-4, nullreferenceexception

我刚刚开始学习，在这里我遇到了一些困扰我一整天的问题。我无法解决以下错误：

```
[NullReferenceException: Object reference not set to an instance of an object.] 
```

我在视图中有这段代码：

```
<div class="editor-field">
@Html.DropDownListFor(model => model.DogColors.ColorId, Model.Color, new { @id = "color_id" })
@Html.ValidationMessageFor(model => model.DogColors.ColorId)
</div> 
```

而这个模型：

```
public class CreateDog
{
    public Dog Dog { get; set; }
    public DogColors DogColors { get; set; }
    public IEnumerable<SelectListItem> Colors { get; set; }
} 
```

控制器：

```
public ActionResult Create()
    {
        var model = new CreateDog();
        using (var db = new ColorsRepository())
        {
            model.Colors = db.All.ToList().Select(x => new SelectListItem
            {
                Value = x.Id.ToString(),
                Text = x.Name
            });
        }
        model.Dog = new Dog();
        model.DogColors = new DogColors();
        return View(model)
    } 
```

我在数据库中添加了两种颜色，这些颜色显示在下拉列表中。当我单击按钮提交时，问题出在这一行：

```
@Html.DropDownListFor(model => model.DogColors.ColorId, Model.Colors, new { @id = "color_id" }) 
```

在那个地方不断地抛出那个异常。任何想法可能是什么问题？

堆栈跟踪：

```
[NullReferenceException: Object reference not set to an instance of an object.]
ASP._Page_Views_Projects__CreateOrEdit_cshtml.Execute() in c:\Users\Admin\Documents\Visual Studio 2012\Projects\Pro\Pro.Web\Views\Dogs\_CreateOrEdit.cshtml:65
System.Web.WebPages.WebPageBase.ExecutePageHierarchy() +197
System.Web.Mvc.WebViewPage.ExecutePageHierarchy() +97
System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage) +88
System.Web.Mvc.RazorView.RenderView(ViewContext viewContext, TextWriter writer, Object instance) +260
System.Web.Mvc.BuildManagerCompiledView.Render(ViewContext viewContext, TextWriter writer) +115
System.Web.Mvc.HtmlHelper.RenderPartialInternal(String partialViewName, ViewDataDictionary viewData, Object model, TextWriter writer, ViewEngineCollection viewEngineCollection) +276
System.Web.Mvc.Html.PartialExtensions.Partial(HtmlHelper htmlHelper, String partialViewName, Object model, ViewDataDictionary viewData) +108
System.Web.Mvc.Html.PartialExtensions.Partial(HtmlHelper htmlHelper, String partialViewName, Object model) +32
ASP._Page_Views_Projects_Create_cshtml.Execute() in c:\Users\Admin\Documents\Visual Studio 2012\Projects\Pro\Pro.Web\Views\Dogs\Create.cshtml:14
System.Web.WebPages.WebPageBase.ExecutePageHierarchy() +197
System.Web.Mvc.WebViewPage.ExecutePageHierarchy() +97
System.Web.WebPages.StartPage.RunPage() +17
System.Web.WebPages.StartPage.ExecutePageHierarchy() +62
System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage) +76
System.Web.Mvc.RazorView.RenderView(ViewContext viewContext, TextWriter writer, Object instance) +260
System.Web.Mvc.BuildManagerCompiledView.Render(ViewContext viewContext, TextWriter writer) +115
System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context) +295
System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult) +13
System.Web.Mvc.<>c__DisplayClass1a.<InvokeActionResultWithFilters>b__17() +23
System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation) +242
System.Web.Mvc.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19() +21
System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult) +177
System.Web.Mvc.Async.<>c__DisplayClass2a.<BeginInvokeAction>b__20() +89
System.Web.Mvc.Async.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult) +102
System.Web.Mvc.Async.WrappedAsyncResult`1.End() +57
System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeAction(IAsyncResult asyncResult) +43
System.Web.Mvc.<>c__DisplayClass1d.<BeginExecuteCore>b__18(IAsyncResult asyncResult) +14
System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +23
System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
System.Web.Mvc.Controller.EndExecuteCore(IAsyncResult asyncResult) +57
System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +23
System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
System.Web.Mvc.Controller.EndExecute(IAsyncResult asyncResult) +47
System.Web.Mvc.Controller.System.Web.Mvc.Async.IAsyncController.EndExecute(IAsyncResult asyncResult) +10
System.Web.Mvc.<>c__DisplayClass8.<BeginProcessRequest>b__3(IAsyncResult asyncResult) +25
System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +23
System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +47
System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9
System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +9629296
System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +155 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T23:01:58.430

假设您有一个单独的 Post 版本的 create，当您提交视图时，您可能会返回模型而不重新填充模型中的 Colors 项：

```
[HttpPost]
public ActionResult Create(CreateDog model) {
    if (ModelState.IsValid) {
        // do something
    }

    return View(model); // Colors is null at this point, because
                        // It does not get posted.  You have to repopulate it.
} 
```

Posting only posts the selected value, it does not post the contents of the drop down list. So after the view is re-rendered, it's trying to render from a null collection reference.

# ruby-on-rails - jquery tokeninput uncommon parameters sent, not working anymore in rails 3.2.13

> ID：15712564
> 
> 赞同：0
> 
> 时间：2013-03-29T22:45:26.193
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jquery-tokeninput, loopj

I know tokeninput isn't made for rails specifically, but after upgrading from 3.2 to 3.2.12 it doesn't work anymore. It doesn't get the results.

All I have as a clue are 2 parameters that weren't sent in the older version of rails: Started GET "/tags.json?callback=jQuery191040979262322760657_1364525075625&q=books&_=1364525075627"

The "callback" and "_" parameter are new to me. They weren't sent in 3.2.

I can't identify the problem. It seems that the request goes through well, but then there's no response coming through back to tokeninput.

I hope somebody might have a clue. The logic in controller and model works fine, tested it in console etc. The only hint I have really are those 2 parameters.

Any help appreciated! I really can't solve this

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T07:02:26.487

this had nothing to do with rails 3.2.13 or so. The problem was tokeninput was making a crossDomain request from within a subdomain towards a path without a subdomain, logically. I should have noticed. All I needed to do was to send the json response together with the callback. Should have done more research on this topic. Sorry

# iphone - iOS 状态栏会自行更改颜色以匹配导航栏

> ID：15712567
> 
> 赞同：1
> 
> 时间：2013-03-29T22:45:29.807
> 
> 标签：iphone, ios, objective-c, cocoa-touch, uinavigationcontroller

我的 AppDelegate 中有一个 UINavigationController 和一个具有 UITableView 的 RootViewController。启动时，状态栏将其颜色更改为导航栏的颜色。当我将导航栏涂成橙色时，状态栏是这样的：

![enter image description here](../Images/793a5fc3af2d1a4e37431301b2819f29.png)

我的导航栏似乎移到了顶部。导航控制器似乎无法识别状态栏。我该如何解决这个问题？

我的应用程序中只有一个 AppDelegate 和一个空的 RootViewController。我`application:didFinishLaunchingWithOptions`的是：

```
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
RootViewController *rootViewController = [[RootViewController alloc] initWithNibName:@"RootViewController" bundle:nil];
UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:rootViewController];
[navigationController.navigationBar setTintColor:[UIColor orangeColor]];
self.window.rootViewController = navigationController;
[self.window makeKeyAndVisible];
return YES; 
```

我的 RootViewController IB 文件只有一个空视图。

Nothing unusual. I'm pretty experienced with iOS and that's how I've been doing it every single time. I have no idea what is different this time.

Could someone please advise me? Thanks

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T22:59:05.560

Set your status-bar-style towards `UIStatusBarStyleBlackOpaque` and you should get a solid black bar.

To do that, use `setStatusBarStyle:animated:` on your applications' instance:

```
[[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleBlackOpaque 
                                            animated:NO]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T22:51:55.753

In iOS 6.0 the status bar changes color to match the navigation bar, if there is one. This is expected behavior.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-18T23:01:37.117

Add this code:

```
[UIApplication sharedApplication].statusBarStyle = UIStatusBarStyleBlackOpaque; 
```

This will make your status bar black again.

You should add it **after** changing the color of your navigation bar.

# ruby-on-rails - 路线不同意显示操作（链接）

> ID：15712570
> 
> 赞同：1
> 
> 时间：2013-03-29T22:45:46.713
> 
> 标签：ruby-on-rails, ruby

我有一个简单的模型：从业者有约会和考勤卡（一天工作了多少时间。

Practioners#show 显示从业者和相关的约会/考勤卡，以便我可以显示或编辑它们（或添加新的）。

看法：

```
<% if @practitioner.timecard.count > 0 %>
  <p><strong>Time Card List</strong></p>
  <table>
    <tr>
      <th>Hours</th>
      <th>Date</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
    <% @practitioner.timecard.order("activity_date ASC").each do |t| %>
      <tr>
      <td><%= t.hours_worked %></td>
      <td><%= t.activity_date %></td>
      <td />
      <td><%= link_to 'Edit', edit_timecard_path([t.id]) %></td>
      <td><%= link_to 'Show', timecard_path([t.id]) %></td>
    <% end %>
  </table>
<% else %>
  <p><strong>No Time Cards to display</strong></p>
<% end %>
<%= link_to "[Add Time Card]", new_practitioner_timecard_path(@practitioner) %>

<% if @practitioner.appointment.count > 0 %>
  <p><strong>Appointment List</strong></p>
    <table>
    <tr>
      <th>Name</th>
      <th>Date</th>
      <th>Duration</th>
      <th>New?</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
    <% @practitioner.appointment.order("appointment_date ASC").each do |r| %>
      <tr>
      <td><%= r.patient.name %></td>
      <td><%= r.appointment_date %></td>
      <td><%= r.duration %> </td>
      <td><%= r.first_time %></td>
      <td />
      <td><%= link_to 'Edit', edit_appointment_path(r.id) %></td>
      <td><%= link_to 'Show', appointment_path(r.id) %></td>
    <% end %>
  </table>
<% else %>  
  <p><strong>No Appointments to display</strong></p>
<% end %> 
```

路线：

```
 get "welcome/index"

  get "admin/index"

  resources :patients

   resources :locations, :shallow => true do
    resources :practitioners, :shallow => true do
      resources :timecards, :shallow => true 
      resources :appointments, :shallow => true
    end
  end 
```

当我运行 rake 路线时，我清楚地看到

```
edit_appointment GET    /appointments/:id/edit(.:format)    appointments#edit
     appointment GET    /appointments/:id(.:format)         appointments#show 
```

当我单击时间卡的编辑或显示时，它工作正常。当我单击约会的编辑或显示时，它会出错：

```
No route matches {:action=>"edit", :controller=>"appointments", :id=>nil} 
```

但我可以在我的浏览器中看到约会显示链接的鼠标悬停是：localhost:3000/appointments/6

对于编辑它给出 localhost:3000/appointments/6/edit

为什么rails不能解决这条路线？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T22:58:47.277

尝试这样做，看看控制台中是否有任何变化......

```
shallow do
  resources :locations do
    resources :practitioners do
      resources :timecards 
      resources :appointments
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T23:01:50.087

I suspect the problem is not in routing to your appointment controller for the initial request, but rather that when rendering the show/edit, your appointment controller/view is trying to create a link without passing a valid appointment. If I'm right, your stack trace will probably point to a `link_to`, `url_for`, or `appointment_path` call, but **in the context of having already started running your appointment controller**.

Another way to test this theory would be to clear out any logic in your `AppointmentController.show/edit` and also clear out its views.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T23:00:42.243

我认为这可能有助于[Rails 3 link_to 路由（编辑）嵌套资源](https://stackoverflow.com/questions/5200574/rails-3-link-to-routes-edit-nested-resources)

# javascript - javascript更改图像源

> ID：15712571
> 
> 赞同：0
> 
> 时间：2013-03-29T22:45:52.323
> 
> 标签：javascript, jquery

我有一些需要帮助的 javascript。

我有一个带有 src 标签的图像。我想将 src 的值替换为静态值。src 值虽然是可变的，但总是在相同的结构中。

所以如果我的图片网址是：

```
a/en-uk/images/items/item_123456789_1_185x185.jpg 
```

使用javascript，我想将其修改为

```
a/en-uk/images/items/item_not_found_185x185.jpg 
```

请记住，网址的`a/en-uk/images/items/`和`123456789_1`部分是动态的。所以只想替换`123456789_1`为`not_found`.

知道如何用 jquery 做到这一点吗？正则表达式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T22:47:13.203

例如，您可以为图像添加`id`属性，`myImage`然后使用 JavaScript HTML 进行更改：

```
<img src='YOUR_OLD_SOURCE' id='myImage' ... /> 
```

JS：

```
document.getElementById("myImage").src = "YOUR_NEW_SOURCE"; 
```

[这是一个有效的 JSFiddle](http://jsfiddle.net/FZnhZ/)

请注意，您也可以这样做，`jQuery`虽然我认为它不需要或没有帮助，但语法为： `$("#myImage").attr('src','YOUR_NEW_SOURCE')`

如果您不希望为您的图像提供 ID，您也可以根据[此问题](https://stackoverflow.com/questions/3167806/how-do-i-select-an-image-based-on-its-path-url)中的说明根据 url 进行选择。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-29T23:04:39.757

```
$('#myImage').attr('src',$(this).attr('src').replace('not_found','123456789_1')); 
```

and vice versa

# c# - OpenCV：src.depth() == dst.depth() && src.size == dst.size 异常

> ID：15712573
> 
> 赞同：1
> 
> 时间：2013-03-29T22:46:07.573
> 
> 标签：c#, opencv, emgucv, opencvdotnet

我有一个计算旋转和平移矩阵的代码，如下所示：

```
matrix Matrix<double> rt = new Matrix<double>(3, 4);  
if (positiveCount[0] > positiveCount[1])  
{  
    rt = R[0].ConcateHorizontal(T[0].GetCol(2));  
}  
else  
{  
    rt = R[1].ConcateVertical(T[1].GetCol(2));  
} 
```

我得到了如图所示的[错误](https://i.stack.imgur.com/Eals7.png)，![在此处输入图像描述](../Images/e25df60f23258cb5a60f73c49de95082.png)

我检查了所有的矩阵和元素，所有的大小都是匹配的。

有没有人遇到过同样的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T23:21:46.603

问题涉及矩阵维度的适应性问题。

在其他部分：

```
rt = R[1].ConcateVertical(T[1].GetCol(2)); 
```

错了，rt 是一个 3*4 矩阵，R[1] 是 3*3，T[1] 的第二列是 3*1

因此，如果我们想将 T[1].GetCol(2) 水平添加到 R[1]，我们将其粘贴到矩阵 R 以获得 3*4 矩阵。当我们将行/列附加到另一个矩阵时，应该有一个大小匹配。

所以它应该被替换为：

```
 rt = R[1].ConcateHorizontal(T[1].GetCol(2)); 
```

# asp.net - 如何在 ASP.Net 中使用 DataGrid 显示 mysql 数据库中的数据？

> ID：15712575
> 
> 赞同：0
> 
> 时间：2013-03-29T22:46:12.683
> 
> 标签：asp.net

我的背景是 PHP / MySQL，但我目前正在尝试学习如何将 ASP.Net 与 MySQL 一起使用。我创建了一个允许用户添加任务的小型应用程序。我试图在按下按钮时检索完整的任务列表。有一次，我得到的结果是第一行大约有一半显示，没有其他内容（taskid 和 createdate）。那不再出现，我不知道为什么。

有人有任何建议或信息可以帮助我解决这个问题吗？

您可以在 www.galtechsolutions.net/tasklist 查看应用程序

我的标记是：

```
<%@ Page Language="vb" AutoEventWireup="false" CodeBehind="viewtasks.aspx.vb" Inherits="MyTasks.ViewTasks" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<link href="style.css" rel="Stylesheet" media="screen" />
<title>TaskList - View Tasks</title>
</head>
<body>
<a href="default.aspx">Home</a> | <a href="addtask.aspx">Add Task</a> | <a href="viewtasks.aspx">View Tasks</a>
<br /><br />
<form id="form1" runat="server">
<div>
    <asp:Button ID="gettasks" runat="server" Text="Show Tasks" class="taskbutton" />
    <br /><br />
    <asp:DataGrid ID="DataGridView1" runat="server" PageSize="5" AllowPaging="True" 
        DataKeyField="taskid" AllowSorting="True" 
        EmptyDataText="There are no data records to display" AutoGenerateColumns="false">
    <Columns>
    <asp:BoundColumn HeaderText="taskid" DataField="taskid"></asp:BoundColumn>
    <asp:BoundColumn HeaderText="createdate" DataField="createdate"></asp:BoundColumn>
    <asp:BoundColumn HeaderText="taskname" DataField="taskname="></asp:BoundColumn>
    <asp:BoundColumn HeaderText="taskdesc" DataField="taskdesc"></asp:BoundColumn>
    <asp:BoundColumn HeaderText="duedate" DataField="duedate"></asp:BoundColumn>
    </Columns>
    </asp:DataGrid>      
    <asp:Label ID="gettaskslabel" runat="server"></asp:Label>
    <br />
    <br />
</div>
</form>
</body>
</html> 
```

我背后的代码是：

```
Protected Sub gettasks_Click(sender As Object, e As EventArgs) Handles gettasks.Click

    Dim conn As MySqlConnection
    Dim selcmd As MySqlCommand
    Dim SQL As String

    conn = New MySqlConnection("Data Source=phaspdev1.db.10654019.hostedresource.com;Database=phaspdev1;User Id=;Password=;")
    selcmd = New MySqlCommand

    Try
        conn.Open()
        SQL = "SELECT * FROM mytasks"
        selcmd.Connection = conn
        selcmd.CommandText = SQL

        dtadapter.SelectCommand = selcmd
        dtadapter.Fill(dt)

        DataGridView1.DataSource = dt
        DataGridView1.DataBind()
        DataGridView1.DataSource = dt.Columns.Add("taskid", GetType(Integer))
        DataGridView1.DataSource = dt.Columns.Add("createdate", GetType(Date))
        DataGridView1.DataSource = dt.Columns.Add("taskname", GetType(String))
        DataGridView1.DataSource = dt.Columns.Add("taskdesc", GetType(String))
        DataGridView1.DataSource = dt.Columns.Add("duedate", GetType(Date))

        For Each dr As DataRow In dt.Rows
            dt.Rows.Add(dr)

        Next dr
        dt.AcceptChanges()

    Catch ex As Exception
        Console.WriteLine("Cannot connect to database: " & ex.Message)
    Finally
        conn.Close()
        conn.Dispose()

    End Try

End Sub 
```

提前致谢，

彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T23:09:20.527

Try setting autoeventwireup to true. It sounds like you don't have your event handler set on the button.

[http://msdn.microsoft.com/en-us/library/system.web.configuration.pagessection.autoeventwireup.aspx](http://msdn.microsoft.com/en-us/library/system.web.configuration.pagessection.autoeventwireup.aspx)

# java - 如果一个字符的猜测是错误的，打印出一条消息说错过。刽子手游戏

> ID：15712579
> 
> 赞同：0
> 
> 时间：2013-03-29T22:46:25.433
> 
> 标签：java, class, methods, character

```
 do {            
            System.out.println("Word: " + secretWord.getWordMask());
            //System.out.print("Guesses: " + guesses);
            System.out.print("Enter your guess: ");
            Scanner keyboard = new Scanner(System.in);
            String guess = keyboard.next();              
            WordHider revealChar = new WordHider();                
            revealChar.revealLetter(guess);
            System.out.println(revealChar.getWordMask());
            secretWord.revealLetter(guess);
            if (guess != ???)  {
                System.out.println("Miss");
            } 
```

所以我得到了这么多，它要求用户猜一个字母，但我不知道是如何做到的，所以如果他们猜的字母不正确，打印一个“错过”消息。

```
public int revealLetter(String letter) {
    int count = 0;
    String newFoundWord = "";
    if (letter.length() == 1) {
        for (int i = 0; i < secretWord.length(); i++) {
            if ((secretWord.charAt(i) == letter.charAt(0))
                    && (wordMask.charAt(i) == HIDE_CHAR.charAt(0))) {
                count++;
                newFoundWord += letter;
            }
            else {
                newFoundWord += wordMask.charAt(i);
            }
        }
    }
    wordMask = newFoundWord;
    return count; 
```

上面的代码是在猜到时显示字母的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T22:54:27.500

你有你的`secretWord.revealLetter(guess)`which 返回`count`多少次`guess`是 in `secretWord`，当它是一个未命中时为 0。所以你可以把它放在`if`条件下：

```
if (secretWord.revealLetter(guess) == 0)  {
    System.out.println("Miss");
} 
```

您可以在`secretWord.revealLetter(guess)`之前删除对 的调用`if`，因为您只需要调用一次。

# java - 如何获取 MVC 计算器 java 上显示的数字？

> ID：15712580
> 
> 赞同：1
> 
> 时间：2013-03-29T22:46:27.673
> 
> 标签：java, swing, jlabel, calculator

我试图让它像普通计算器一样在计算器上显示数字的 JLabel。但我不知道该怎么做，我所能做的就是让它成为一个不会改变的标签。我将数字字符串放在那里，但单击数字后它并没有像应有的那样改变。有什么建议吗？

```
/* 
 * calc view class
 */

import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

class Calc extends JFrame implements ActionListener {

    private JButton plusButton = new JButton("+");
    private JButton minusButton = new JButton("-");
    private JButton clearButton = new JButton("Clear");
    private JButton equalsButton = new JButton("=");
    private JButton zeroButton = new JButton("0");
    private JButton oneButton = new JButton("1");
    private JButton twoButton = new JButton("2");
    private JButton threeButton = new JButton("3");
    private JButton fourButton = new JButton("4");
    private JButton fiveButton = new JButton("5");
    private JButton sixButton = new JButton("6");
    private JButton sevenButton = new JButton("7");
    private JButton eightButton = new JButton("8");
    private JButton nineButton = new JButton("9");
    private String number = "";
    private JLabel numDisplay = new JLabel(number);
    private boolean addition = false;
    private boolean subtraction = false;

    private int total = 0;
    private boolean isEquals = false;   // false = haven't clicked equals button yet, true they have
    //private String numberText;

    Calc(){
        JPanel calcPanel = new JPanel();

        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        this.setSize(400, 600);
        calcPanel.add(numDisplay);
        calcPanel.add(plusButton);
        calcPanel.add(minusButton);
        calcPanel.add(clearButton);
        calcPanel.add(equalsButton);
        calcPanel.add(zeroButton);
        calcPanel.add(oneButton);
        calcPanel.add(twoButton);
        calcPanel.add(threeButton);
        calcPanel.add(fourButton);
        calcPanel.add(fiveButton);
        calcPanel.add(sixButton);
        calcPanel.add(sevenButton);
        calcPanel.add(eightButton);
        calcPanel.add(nineButton);

        this.add(calcPanel);

        plusButton.addActionListener(this);
        minusButton.addActionListener(this);
        clearButton.addActionListener(this);
        equalsButton.addActionListener(this);
        zeroButton.addActionListener(this);
        oneButton.addActionListener(this);
        twoButton.addActionListener(this);
        threeButton.addActionListener(this);
        fourButton.addActionListener(this);
        fiveButton.addActionListener(this);
        sixButton.addActionListener(this);
        sevenButton.addActionListener(this);
        eightButton.addActionListener(this);
        nineButton.addActionListener(this);

    }
    public void actionPerformed(ActionEvent event){
        if (event.getSource() instanceof JButton){
            JButton clickedButton = (JButton) event.getSource();
            String buttonText = clickedButton.getText();
            if (clickedButton == zeroButton || clickedButton == oneButton || clickedButton == twoButton || clickedButton == threeButton || clickedButton == fourButton || clickedButton == fiveButton || clickedButton == sixButton || clickedButton == sevenButton || clickedButton == eightButton || clickedButton == nineButton)
            {
                number = number + buttonText;
            }
            if (clickedButton == clearButton){
                number = "";
                addition = false;
                subtraction = false;
                total = 0;
            }
            if (clickedButton == plusButton){
                addition = true;
                subtraction = false;
                total = Integer.parseInt(number);

            }
            if (clickedButton == minusButton){
                addition = false;
                subtraction = true;
                total = Integer.parseInt(number);

                //number = "";
            }
            if (clickedButton == equalsButton){
                isEquals = true;
                addition = false;
                subtraction = false;
            }
        }
    }

    public int getNumber(){
        return Integer.parseInt(number);
    }
    public boolean addition(){
        return addition;
    }
    public boolean subtraction(){
        return subtraction;
    }
    public int total(){
        return total;
    }
    public boolean isEquals(){
        return isEquals;
    }
    public String getNumberString(){
        return number;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:53:53.453

```
private JLabel numDisplay = new JLabel(number); 
```

这行代码所做的只是初始化 numDisplay 变量以包含变量编号的文本。这并不意味着每次更改数字变量时标签都会自动更新。我没有仔细查看您的代码，但您可以尝试：

```
number = number + buttonText;
numDisplay.setText(number); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T23:00:21.137

我认为您缺少的是在 actionPerformed 方法的末尾调用 numDisplay.setText(number) 。每当您想更改文本时，都应该调用此方法。

# python - 我的状态对象没有保存在 Django

> ID：15712582
> 
> 赞同：-2
> 
> 时间：2013-03-29T22:46:41.033
> 
> 标签：python, django, django-models, python-2.7

当我进入shell时，我遇到了以下问题：

```
from users.models import Status
from django.utils import timezone

Status.objects.all()
>>> []
p = Status()
p.status_time = timezone.datetime.min
p.status_time
>>> datetime.datetime(1, 1, 1, 0, 0)
p.save()
Status.objects.all()
>>> [<Status: Status object>]
print(Status.objects.all()[0].status_time)
>>> None 
```

我不明白为什么`status_time`没有正确保存。我的状态模型如下：

```
class Status(models.Model):

    status = models.CharField(max_length=200)
    status_time = models.DateTimeField('date published')

    def __init__(self, status = '', time=timezone.datetime.min, *args, **kwargs):
        self.status = status
        self.status_time = time
        super(Status, self).__init__(*args, **kwargs) 
```

有人可以解释这种行为并可能提出修复建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T23:00:21.937

我之前告诉过你，你需要阅读文档并按照教程进行操作。这不是为模型字段设置默认值的方法。请浏览[https://docs.djangoproject.com/en/1.5/](https://docs.djangoproject.com/en/1.5/)上的文档和教程。如果您在此过程中遇到问题，请返回并提出问题，但如果您继续错误地处理问题，您只是在养成坏习惯。

* * *

我意识到原始内容可能看起来很激进，这不是意图。我只是想阻止你按照自己的方式做事，而不是按照设计的方式做事，并在这个过程中浪费你大量的时间（我以前做过）。话虽如此，我将尝试演示 django 的设计者很可能希望您如何设置模型。

```
class Status(models.Model):
    status = models.CharField(max_length=200, null=True, blank=True)
    time = models.DateTimeField('date published', default=timezone.datetime.min) 
```

如您所见，`__init__`创建模型时没有使用。您只需将字段作为属性即可。每种字段类型都有几个选项来设置默认值、max_length 等内容...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T10:50:59.503

为什么不简单地做：

类状态（模型。模型）：

```
status = models.CharField(max_length=200)
status_time = models.DateTimeField(auto_now_add=True) 
```

`Status`创建实例后，它将自动添加日期时间对象。更多信息[在这里](https://docs.djangoproject.com/en/dev/ref/models/fields/#datetimefield)

# php - 截断不起作用

> ID：15712585
> 
> 赞同：0
> 
> 时间：2013-03-29T22:46:53.830
> 
> 标签：php, mysql

有谁知道为什么这个 SQL 查询`$datetoday`在它工作后没有清除我的表（变量中的表名）查询，有什么问题吗？现在 $datetoday = 300313

```
mysql_query('TRUNCATE TABLE `data`.`".$datetoday."`'); 
```

编辑：错误是：

```
Could not clear table: Table 'data.".$datetoday."' doesn't exist 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T23:12:56.473

改成：

```
mysql_query('TRUNCATE TABLE `data`.`' . $datetoday . '`'); 
```

您将查询括在其中，`'`但随后使用`"`around `$datetoday`。

# javascript - 使用 jquery 或 javascript 在没有表单或提交按钮的情况下在同一页面 url 上传递文本框值

> ID：15712596
> 
> 赞同：1
> 
> 时间：2013-03-29T22:48:02.987
> 
> 标签：javascript, jquery, html, forms, textbox

有什么方法可以在没有表单或提交按钮的情况下在同一页面 url 上传递文本框值，`javascript function`但这`function`适用于`drop down values not for text box values?`我需要在没有表单和提交按钮的情况下在同一页面 url 上发送文本框值

现在这是此页面中的下拉页面下拉值在同一页面 url 上传递但现在我很困惑如何使用此 javascript 函数在没有表单或提交按钮的情况下在同一页面 url 上发送文本框值？

```
function getComboB(sel) { 
var customers=document.getElementById("customers");
var value = sel.options[sel.selectedIndex].value;
addreceivable.action = "addreceivable.php?customers="+value+"";
addreceivable.submit();
}
<form name="addreceivable" id="addreceivable">
<select name="customers" id="customers">
<option value="Test">Test</option>
<option value="Demo">Demo</option>
<option value="Check">Check</option> 
</select>
<input type="submit" name="test" id="test" value="Submit">
</form> 
```

现在我的问题在这里解决了我已经完成了在同一页面 url 上传递文本框值的代码，没有使用 javascript 函数提交按钮

```
function getComboB(sel) { 
var textbox=document.getElementById("textbox");
var input_val = document.getElementById("textbox").value;
addreceivable.action = "test2.html?textbox="+input_val+"";
addreceivable.submit();
}

<form name="addreceivable" id="addreceivable">
<input name="textbox" class="textbox" onchange="getComboB();">
</form> 
```

感谢所有朋友！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T22:50:47.347

使用文本框使用 .val() 来获取它的值。我相信那是 jQuery，所以你可能需要它。

```
function getTextbox() {
   var textbox = $('input.textbox').val();
   //Do what you want with textbox now
}
<input name="textbox" class="textbox"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T22:56:11.900

```
function getComboB(sel){
     //your other code
     //new code here
     var input_val = document.getElementById("id of your textbox").value;
} 
```

您可以使用它来侦听文本框中的更改：

```
document.getElementById("id of your textbox").addEventListener("change", getComboB); 
```

上面的行将监听在文本框中的输入，然后调用您的函数`getComboB()`，此时您将获得文本框的值。

# java - 使用 GSON 将 json 解析为由列表组成的 pojo

> ID：15712598
> 
> 赞同：0
> 
> 时间：2013-03-29T22:48:18.207
> 
> 标签：java, json, list, parsing, gson

当我尝试将 json 字符串解析到我的自定义类中时遇到问题，该类由另一个 pojo 的列表组成。

我得到的错误是：

```
java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 1 column 226 
```

我尝试解析的类是：

```
package com.example.client.models;

import java.util.List;

public class Catalog {

private List<Artist> list;

public Catalog() {  }

/**
 * @param list
 */
public Catalog(List<Artist> list) {
    super();
    this.list = list;
}

/**
 * @return the list
 */
public List<Artist> getList() {
    return list;
}

/**
 * @param list the list to set
 */
public void setList(List<Artist> list) {
    this.list = list;
}
} 
```

和艺术家类：

```
package com.example.client.models;

import java.io.File;
import java.util.List;

public class Artist {

private String artistName;
private List<Album> albumList;
private File artistFile;

public Artist() {   }

/**
 * @param artistName
 * @param albumList
 * @param artistFile
 */
public Artist(String artistName, List<Album> albumList, File artistFile) {
    super();
    this.artistName = artistName;
    this.albumList = albumList;
    this.artistFile = artistFile;
}

/**
 * @return the artistName
 */
public String getArtistName() {
    return artistName;
}

/**
 * @param artistName the artistName to set
 */
public void setArtistName(String artistName) {
    this.artistName = artistName;
}

/**
 * @return the albumList
 */
public List<Album> getAlbumList() {
    return albumList;
}

/**
 * @param albumList the albumList to set
 */
public void setAlbumList(List<Album> albumList) {
    this.albumList = albumList;
}

/**
 * @return the artistFile
 */
public File getArtistFile() {
    return artistFile;
}

/**
 * @param artistFile the artistFile to set
 */
public void setArtistFile(File artistFile) {
    this.artistFile = artistFile;
}

 } 
```

相册类：包 com.example.client.models；

```
import java.io.File;
import java.util.List;

public class Album {

private String albumName;
private List<Song> songList;
private File albumFile;

public Album() {    }

/**
 * @param albumName
 * @param songList
 * @param albumFile
 */
public Album(String albumName, List<Song> songList, File albumFile) {
    super();
    this.albumName = albumName;
    this.songList = songList;
    this.albumFile = albumFile;
}

/**
 * @return the albumName
 */
public String getAlbumName() {
    return albumName;
}

/**
 * @param albumName the albumName to set
 */
public void setAlbumName(String albumName) {
    this.albumName = albumName;
}

/**
 * @return the songList
 */
public List<Song> getSongList() {
    return songList;
}

/**
 * @param songList the songList to set
 */
public void setSongList(List<Song> songList) {
    this.songList = songList;
}

/**
 * @return the albumFile
 */
public File getAlbumFile() {
    return albumFile;
}

/**
 * @param albumFile the albumFile to set
 */
public void setAlbumFile(File albumFile) {
    this.albumFile = albumFile;
}

} 
```

最后是歌曲类：

```
package com.example.client.models;

import java.io.File;

public class Song {

private String songName;
private File songFile;

public Song() { }

/**
 * @param songName
 * @param songFile
 */
public Song(String songName, File songFile) {
    super();
    this.songName = songName;
    this.songFile = songFile;
}

/**
 * @return the songName
 */
public String getSongName() {
    return songName;
}

/**
 * @param songName the songName to set
 */
public void setSongName(String songName) {
    this.songName = songName;
}

/**
 * @return the songFile
 */
public File getSongFile() {
    return songFile;
}

/**
 * @param songFile the songFile to set
 */
public void setSongFile(File songFile) {
    this.songFile = songFile;
}

} 
```

我已经验证了 json 字符串，因此我猜我的问题在于 GSON 解析。我希望你能帮我解决我的问题

如果您能举个例子或提示该怎么做，那就太好了。预先感谢！;)

## 编辑

嘿，我再次包含了我正在使用的 JSON 字符串的示例：

```
{
 "list":[
  {
     "artistName":"tmpArtistName",
     "albumList":[
        {
           "albumName":"tmpAlbumName",
           "songList":[
              {
                 "songName":"tmpSongName",
                 "songFile":"/home/pi/tmpSongFile"
              },
              {
                 "songName":"tmpSongName",
                 "songFile":"/home/pi/tmpSongFile"
              }
           ],
           "albumFile":"/home/pi/tmpAlbumFile"
        },
        {
           "albumName":"tmpAlbumName",
           "songList":[
              {
                 "songName":"tmpSongName",
                 "songFile":"/home/pi/tmpSongFile"
              },
              {
                 "songName":"tmpSongName",
                 "songFile":"/home/pi/tmpSongFile"
              }
           ],
           "albumFile":"/home/pi/tmpAlbumFile"
        }
     ],
     "artistFile":"/home/pi/tmpArtistFile"
  },
  {
     "artistName":"tmpArtistName",
     "albumList":[
        {
           "albumName":"tmpAlbumName",
           "songList":[
              {
                 "songName":"tmpSongName",
                 "songFile":"/home/pi/tmpSongFile"
              },
              {
                 "songName":"tmpSongName",
                 "songFile":"/home/pi/tmpSongFile"
              }
           ],
           "albumFile":"/home/pi/tmpAlbumFile"
        },
        {
           "albumName":"tmpAlbumName",
           "songList":[
              {
                 "songName":"tmpSongName",
                 "songFile":"/home/pi/tmpSongFile"
              },
              {
                 "songName":"tmpSongName",
                 "songFile":"/home/pi/tmpSongFile"
              }
           ],
           "albumFile":"/home/pi/tmpAlbumFile"
        }
     ],
     "artistFile":"/home/pi/tmpArtistFile"
  }
]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T00:05:07.870

Gson 解析器显然无法将字符串直接反序列化为`File`对象。`{`相反，它需要一个匹配的 JSON 对象（由and包围`}`）才能继续解组。为了解决这个问题，您可以简单地注册一个类型适配器来处理文件属性：

```
public class FileTypeAdapter extends TypeAdapter<File> {

    @Override
    public void write(final JsonWriter out, final File value)
            throws IOException {
        if (value == null) {
            out.nullValue();
        } else {
            out.value(value.getAbsolutePath());
        }
    }

    @Override
    public File read(final JsonReader in) throws IOException {
        if (in.hasNext()) {
            final String name = in.nextString();
            return name != null ? new File(name) : null;
        }

        return null;
    }
} 
```

要使用它，其余代码将保持不变，但替换 Gson 解析器的创建：

```
final Gson gson = new Gson(); 
```

有了这个：

```
final Gson gson = new GsonBuilder().registerTypeAdapter(File.class,
    new FileTypeAdapter()).create(); 
```

那应该可以解决问题。

* * *

*附带说明一下，如果您愿意并且能够切换，[Jackson](http://jackson.codehaus.org/)库无需特殊定制即可处理此类反序列化。*

# javascript - 将 jQuery 'this' 与多个元素的选择器一起使用

> ID：15712600
> 
> 赞同：1
> 
> 时间：2013-03-29T22:48:21.347
> 
> 标签：javascript, jquery

抱歉，这里有 jQuery noob 问题，我正在尝试使用回调函数使所有具有类 .thumbnail 的 div 元素都可点击。但是，一旦单击该类的其中一个 div，我需要该给定 div 的特定 ID，以便我可以对该特定的 div 进行进一步操作。如果我会在单击后使用“this”来引用特定的 div，或者我以错误的方式查看它，我会感到困惑。

我确定这是一个非常简单的问题，供您 jQuery 专家回答，这是漫长的一天，我的大脑完全僵化了。

示例须藤代码：

```
<script>
$(document).ready(function() {

    $(".thumbnail").click(function() {

        //need to get id of thumbnail that was clicked, this is where I am confused       
        var thumbnail_id = $(this).attr('id')
        alert(thumbnail_id);

     });

});

</script>

<div class=thumbnail" id="1">Tom</div>
<div class=thumbnail" id="2">Jerry</div>
<div class=thumbnail" id="3">Sue</div>
<div class=thumbnail" id="4">Mary</div>
<div class=thumbnail" id="5">Brian</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T22:52:28.463

你不认为缩略图应该写得像`"thumbnail"`而不是`thumbnail"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T22:52:49.967

目前尚不清楚您的 jQuery 问题是什么。为了解决您提出的问题，当在代码中单击对象时，`click`将调用处理程序并将`this`其设置为单击的 DOM 元素。如果有一个或多个具有缩略图类的对象，则此方法有效。

如果您的问题确实是您的 HTML 错误，那么您应该添加缺少的引号来更改它：

```
<div class=thumbnail" ... 
```

对此：

```
<div class="thumbnail" ... 
```

仅供参考，一个更好的方法如下。这解决了报价问题并使用数据属性而不是数字 id 值：

工作演示：http: [//jsfiddle.net/jfriend00/8tczB/](http://jsfiddle.net/jfriend00/8tczB/)

```
<script>
$(document).ready(function() {
    $(".thumbnail").click(function() {
        //need to get id of thumbnail that was clicked, this is where I am confused       
        var thumbnail_id = $(this).data('id');
        alert(thumbnail_id);
     });
});
</script>

<div class="thumbnail" data-id="1">Tom</div>
<div class="thumbnail" data-id="2">Jerry</div>
<div class="thumbnail" data-id="3">Sue</div>
<div class="thumbnail" data-id="4">Mary</div>
<div class="thumbnail" data-id="5">Brian</div> 
```

# php - PHP数组错误：间接修改重载属性

> ID：15712606
> 
> 赞同：3
> 
> 时间：2013-03-29T22:48:50.397
> 
> 标签：php, smarty

为什么是这行代码：

```
$this->plugins_dir[0] = SMARTY_DIR . 'plugins'; 
```

导致这个错误？

```
ERRNO: 8
TEXT: Indirect modification of overloaded property Page::$plugins_dir has no effect 
```

顺便说一句，这行代码在名为“Page”的类的构造函数中。

我正在使用 PHP 和 PostgreSQL，但经验不足。我现在被这个问题困扰了几个小时，找不到原因。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T23:39:58.540

PHP 试图告诉您的是该属性`->plugins_dir`实际上并不存在，但是`__get()`已经编写了一个神奇的函数，如果您从中读取它会返回一个值。将变量直接分配给它也可能有效（如果有相应的`__set()`），但您不能*修改*它，因为它实际上是一个函数返回值。您实际上是在尝试说`$this->__get('plugins_dir')[0] = 'foo'`，这没有任何意义。

但是，查看[相关的 Smarty 文档](http://www.smarty.net/docs/en/variable.plugins.dir.tpl)，我们可以看到正确的解决方案是：

> **注意**：从 Smarty 3.1 开始，属性 $plugins_dir 不再可以直接访问。请改用 getPluginsDir()、setPluginsDir() 和 addPluginsDir()。

[因此，您的代码实际上应该使用addPluginsDir() 文档页面](http://www.smarty.net/docs/en/api.add.plugins.dir.tpl)上的示例之一的模式，例如：

```
$this->setPluginsDir( SMARTY_DIR . 'plugins' )
     ->addPluginsDir( '/some/other/source/of/plugins' ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T22:58:14.070

我认为这是正确的方法

```
$this->plugins_dir = SMARTY_DIR . 'plugins'; 
```

# javascript - AnythingSlider Fx Transition Flicker

> ID：15712607
> 
> 赞同：0
> 
> 时间：2013-03-29T22:48:53.833
> 
> 标签：javascript, jquery, css, anythingslider

On the first rotation of slides there is small flicker that occurs during the Fx transition. It seems to only occur on the first rotation of slides & goes away after the first repeat.

Demo Page: [http://dl.dropbox.com/u/12310886/Work/anythingslider/slide_left.html](http://dl.dropbox.com/u/12310886/Work/anythingslider/slide_left.html)

Any ideas? I haven't been able to figure it out so far.

Thanks in advance!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:44:58.817

Try changing your `mode` to `fade` ([demo](http://jsfiddle.net/Mottie/ycUB6/5148/)):

```
$(function () {
    $('#slider').anythingSlider({
        mode: 'fade',
        autoPlay: true,
        delay: 2000,
        pauseOnHover: false,
        buildStartStop: false,
        buildArrows: false
    }).anythingSliderFx({
        '.left .content-wrapper': ['left']
    }, {
        timeIn: 300,
        timeOut: 350,
        stopRepeat: true
    });
}); 
```

# ocaml - 为什么 pervasives.cmi 打不开？

> ID：15712618
> 
> 赞同：5
> 
> 时间：2013-03-29T22:49:57.167
> 
> 标签：ocaml

在我的 cygwin 机器上安装了 Ocaml，但简单的编译失败。从下面的交互中可以看出，权限很好。OCAMLLIB 是对的；怎么了？

```
$ cat t.ml

print_string "hi";

$ ocamlopt t.ml
>> Fatal error: cannot open pervasives.cmi
Fatal error: exception Misc.Fatal_error

$ echo $OCAMLLIB
/cygdrive/c/OCaml/lib

$ ls -l /cygdrive/c/OCaml/lib/pervasives.cmi
-rwxrwxrwx+ 1 Lyn None 15094 Oct  8 01:30 /cygdrive/c/OCaml/lib/pervasives.cmi 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T23:54:36.733

一个可能的解决方案是在 cygwin 中运行此命令：

```
export OCAMLLIB=C:\\OCaml\\lib 
```

线索来自这个[消息线程](http://lists.gforge.inria.fr/pipermail/frama-c-discuss/2009-December/001653.html)。

# css - jquery mobile 1.3.0 js 将 ui 类添加到我的元素中

> ID：15712619
> 
> 赞同：0
> 
> 时间：2013-03-29T22:50:13.217
> 
> 标签：css, jquery-mobile, stylesheet

我面临的问题是，当我包含 jquery mobile 1.3.0.js 文件时，它会自动在我的网站中将 ui-mobile-viewport 和 ui-overlay-c 添加到 html body 标签中，因此该网站具有 jquery mobile 的样式样式表，所以我的样式被 jquery 样式覆盖。

我不知道该怎么办，我在他们的网站上研究了论坛，但在那里我没有发现这样的问题。谁能帮帮我吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T03:48:13.250

正如上面提到的 omar，您可以构建自定义 css 以避免被 JQM 样式覆盖。

否则，在样式表中手动覆盖`ui-mobile-viewport`和`ui-overlay-c`样式，并在 jqm 样式表之后将其导入。你也可以`!import`用来强制你的风格。

# php - 如何在 login.php 中将用户 ID 存储为会话

> ID：15712620
> 
> 赞同：1
> 
> 时间：2013-03-29T22:50:17.593
> 
> 标签：php, login, user-accounts

我在一个名为 user.php 的文件中有以下函数：

```
 function user_id_from_username($username) {
            $username = sanitize($username);
            return mysql_result(mysql_query("SELECT `MemberID` FROM `member` WHERE `Email` = '$username'"),0, 'MemberID');

            }
        function login ($username, $password) {
            $MemberID = user_id_from_username ($username);

            $username = sanitize($username);
            $password = md5($password);

            return (mysql_result(mysql_query("SELECT COUNT(`MemberID`) FROM `member` WHERE `Email` = '$username' AND `Password` ='$password'"), 0) == 1) ? $MemberID : false; } 
```

在我的 login.php 中，我有：

```
Session_start ();
include 'core/functions/users.php'

if (empty($_POST) === false){
    $username = $_POST['Email'];
    $password = $_POST['Password'];

        $login = login($username, $password);
        if($login === 1){
            $_SESSION['MemberID'] = $login; //logged in and returned user ID and store in session
            header('location: member.php?username='.$username);

        }else{
            // try admin login
            $query2 = mysql_query("SELECT * FROM admin WHERE Email ='$username' AND Password ='$password'");
            if(mysql_num_rows($query2) == 1){
                $_SESSION['Email'] = $username;
                header("location: admin.php");
            }
            else{
                 echo "Failed Login Attempt"; 

            }
        }
    } 
```

当我尝试登录用户时，出现此错误：

警告：mysql_result(): Unable to jump to row 0 on MySQL result index 8 in oddjobexchange\core\functions\user.php on line 27 Failed Login Attempt

我无法理解这个错误，因为我看不出第 27 行有什么问题（下）

```
return mysql_result(mysql_query("SELECT `MemberID` FROM `member` WHERE `Email` = '$username'"),0, 'MemberID'); 
```

在我的数据库中，“会员 ID”是第 0 行，“电子邮件”是第 7 行，“密码”是第 8 行。有人知道我做错了什么吗？

# ruby-on-rails - 全局 Ruby 变量中的局部变量是线程安全的吗？

> ID：15712636
> 
> 赞同：1
> 
> 时间：2013-03-29T22:51:18.903
> 
> 标签：ruby-on-rails, ruby, multithreading

我有一个变量 $proxyManager，它是 ProxyManager 类的全局实例。$proxyManager = ProxyManager.new

我在这个类中有一个函数getProxy，它被多个线程多次调用。在这个函数中，我从一个数组中弹出一个项目（假设这是线程安全的）。然后我将其标识符设置为当前时间，设置一个活动标志并返回它。

proxy.identifier 设置后是否可以在同一个线程中“更改”？例如，假设线程 1 将标识符设置为 1，然后线程 2 立即执行同一行并将其设置为 2。这是否意味着线程 1 的标识符现在为 2？

```
class ProxyManager
    def getProxy
        key = "proxy"
        proxy = popFromGlobalArray() #assume this operation is thread-safe/atomic

        proxy.identifier = Time.now.to_i
        proxy.active = 1
        return proxy
    end

end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T23:00:22.233

它*本质*上不是线程安全的，尽管它取决于*正在做什么*以及做*什么*。此外，实现——例如带有“绿色线程”的 Ruby 1.8 MRI vs Ruby 2 MRI vs JRuby 等——将在竞争条件（如果有的话）如何实现方面发挥作用。

请记住，竞争条件通常是由*共享数据*引起的。变量并不重要（一个线程不会使用另一个线程的局部变量，就像递归方法会重用变量一样），但变量命名的对象*很*重要。（注意：`proxy`是*局部变量*但`proxy.instance`不是*局部*变量！）

*假设**共享数据/对象***的竞争条件：

```
proxy_A = popFromGlobalArray()
proxy_B = popFromGlobalArray() 
# assume same object was returned so that proxy_A.equal? proxy_B is true
proxy_A.identifier = Time.now.to_i
proxy_A.active = 1
proxy_B.identifier = Time.now.to_i # such that it is different
proxy_B.active = 1 
```

这在这里不是很令人兴奋，因为此时的结果*是*相同的，但是想象一下，如果在标识符变量的分配（和线程可见性传播）*之间*使用了返回的对象（proxy_A 和 proxy_B*都*引用）- 损坏的代码。

 *也就是说，假设上面的内容被扩展：

```
h = {}
# assume same object was returned so that proxy_A.equal? proxy_B is true
proxy_A.identifier = Time.now.to_i
h[proxy_A.identifier] = proxy_A    # i.e. used after return
proxy_B.identifier = Time.now.to_i # such that it is different
h[proxy_B.identifier] = proxy_B    # i.e. used after return
# now there may be an orphaned key/value. 
```

当然，如果`popFromGlobalArray`保证返回*不同*的对象，则上述内容不适用，*但*还有另一个问题 - 取决于时间精度的竞争条件：

```
proxy_A = popFromGlobalArray()
proxy_B = popFromGlobalArray()
# assume Time.now.to_i returns x for both threads
proxy_A.identifier = x
proxy_B.identifier = x
# and a lost proxy ..
h = {}
h[proxy_A.identifier] = proxy_A
h[proxy_B.identifier] = proxy_B 
```

故事的寓意：不要依赖运气。我已经简化了上面的内容，以显示线程之间数据的*即时*可见性可能发生的竞争条件。然而，线程之间的数据可见性——即缺乏内存栅栏——使这个问题比最初看起来要糟糕得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T00:06:32.353

**如果**popFromGlobalArray() 在多线程环境中正确运行并且保证不会多次返回同一个对象，并且代理类的实现不会在实例之间共享状态，那么函数的其余部分应该没问题。您没有在不同线程上对相同的数据进行操作，因此它们不会发生冲突。

If you're worried about the variables themselves, you needn't be. Locals are defined per method invocation, and different threads will be running different invocations of the method. They don't share locals.

Obviously the specifics can make this less true, but this is how it generally works.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T22:59:46.153

局部变量是按线程定义的，并且是线程安全的。

如果您的数组确实是原子的，则每次线程进入此函数时，代理变量都保证是不同的项目，并且其他线程将无法覆盖标识符。*

# c# - 构造函数中的 New()

> ID：15712640
> 
> 赞同：0
> 
> 时间：2013-03-29T22:51:33.080
> 
> 标签：c#

有人能告诉我以下方法构造函数中的 New() 是什么意思吗？我知道 TEvent 继承自 CompositePresentationEvent 但 new() 是什么意思？

```
protected void RaiseEvent<TEvent, TParameter>(TParameter parameter) where TEvent : 
    CompositePresentationEvent<TParameter>, new()
    {
        EventAggregator.GetEvent<TEvent>().Publish(parameter);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T22:53:04.527

在该函数声明`new()`中是对泛型类型参数的[约束。](http://msdn.microsoft.com/en-us/library/bb384067.aspx)`TEvent`这意味着该类型必须具有不带参数的公共构造函数。

在此处阅读有关[泛型类型约束的](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T22:57:29.703

这是对方法的通用参数的约束。这基本上意味着作为参数传递给您的方法的泛型类型必须具有无参数构造函数。

# c# - C# using System.Windows.Forms does not exist

> ID：15712649
> 
> 赞同：4
> 
> 时间：2013-03-29T22:52:05.430
> 
> 标签：c#

I tried to add:

```
using System.Windows.Forms 
```

But its shows me an error.

I know I must assembly that to my VS2012 but I srsly don't know how. I was searching everywhere and tried everything I've found but none of this helps me.

@edit 1 hour of searching in the web and... 2 minutes after write this post i found... Project >> add Reference...

Solved :]

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-29T22:55:43.180

If you're using **Visual Studio**, right click the References folder in your project, select Add Reference... and then on the .NET tab, choose System.Windows.Forms and click OK.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-29T22:54:34.770

Right click on project references in Solution Explorer, choose Add Reference..., there you have to find System.Windows.Forms assembly (under Assemblies=>Framework) and add it to the project.

# html - 使用 Bootstrap 2.3.1 居中文本

> ID：15712653
> 
> 赞同：0
> 
> 时间：2013-03-29T22:52:14.397
> 
> 标签：html, css, twitter-bootstrap

通过四处搜索，我知道以前有人问过这个问题，我只是......不明白这里出了什么问题。

我已经尝试了大约一百万个不同的角度，但无法让我的文字居中。

如果有人知道这笔交易是什么并想让我知道，那就太好了。

```
<div class="row-fluid text-center">
    <h1 class="span12">Foobar's Contacts</h1>
</div> 
```

除其他外，我已经尝试将`text-center`类移动到`h1`元素。

编辑：我能够将其更改为此并将标题居中。这种方法有什么缺点吗？

```
<div class="offset4 span4 text-center">
    <h1 class="span8">Foobar's Contacts</h1>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T05:17:58.673

尝试放入指定范围`<h1>`内`<div>`。就像是

```
<div class="row-fluid">
    <div class="span12 text-center">
        <h1>name's Contacts</h1>
    </div>
</div> 
```

我真的不明白，如果你试图在 a`<div>`或整个页面中居中文本。如果您希望页面居中，请使用类似

```
<div class="container">
    .
    .
    <div class="row-fluid">
        <div class="span12 text-center">
            <h1>name's Contacts</h1>
        </div>
    </div>
    .
    .
</div> 
```

希望能帮助到你。

# localization - 撤消本地化 nib 文件 Xcode

> ID：15712659
> 
> 赞同：1
> 
> 时间：2013-03-29T22:52:55.377
> 
> 标签：localization, xcode4.5, nib

我正在为法语和西班牙语本地化应用程序。我们本地化了一些 nib 文件，但最近决定以编程方式更改 nib 文件中的一些元素，而不是为每种语言创建每个 nib 文件的版本。

话虽如此，我想撤消 nib 文件的本地化，因此我在 File Inspector 视图中取消选中 nib 文件的西班牙语和法语本地化。问题是英语也是本地化的，当我取消选中此选项时，nib 文件将从 Project Navigator 视图中删除，因此原始未本地化的 nib 文件消失了......

有没有办法在不丢失指定文件的情况下撤消本地化？

谢谢你。

# php - CodeIgniter - foreach 的多个结果？

> ID：15712660
> 
> 赞同：-2
> 
> 时间：2013-03-29T22:52:57.467
> 
> 标签：php, codeigniter, foreach

我试图用 CodeIgniter 做一个简单的新闻系统，我已经做到了。但是我在显示结果时遇到了问题。实际上，它们按照我的意愿正确显示，但我不能显示多个。

我为此使用了“foreach”，问题是，当我将我的风格放入 foreach 中并在其中显示时，它运行良好。但是当我尝试先定义这些数据，然后显示它们（在 foreach 之外）时，只显示一条记录。

我想做的，**但不起作用**：

```
<?php foreach ($posts as $row) {
    $title = $row['title'];
    $text = $row['text'];
    $date = $row['date'];
    $autor_id = $row['user_id'];
}

echo $title; ?> 
```

什么有效，但对我来说使用起来不舒服：

```
<?php foreach ($posts as $p): ?>
    <h2><?php echo htmlspecialchars($p['title']); ?></h2>
    <p><?php echo nl2br(htmlspecialchars($p['text'])); ?></p>
<?php endforeach; ?> 
```

是否有可能以我尝试的方式做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:56:23.967

只需将两者结合起来：

```
<?php foreach ($posts as $row) {
    $title = $row['title'];
    $text = $row['text'];
    $date = $row['date'];
    $autor_id = $row['user_id'];?>
    <h2><?php echo htmlspecialchars($title); ?></h2>
    <p><?php echo nl2br(htmlspecialchars($text)); ?></p>
<?php } ?> 
```

Or use `echo` inside the loop and you don't need to break the PHP tags.

# c++ - 模板类中的错误

> ID：15712669
> 
> 赞同：0
> 
> 时间：2013-03-29T22:54:10.960
> 
> 标签：c++, templates, ubuntu, g++

您好我正在尝试为模板构建空函数，以便稍后填写详细信息。这是我的代码：

```
namespace my {
    template <class T>
    class Sptr {
    private:
        //some kind of pointer
            //one to current obj
        T obj;
        size_t reference_count;
            //one to original obj
    public:
        template <typename U> Sptr(U *);
        Sptr(const Sptr &);
        //template <typename U> Sptr(const Sptr<U> &);
        ~Sptr();
        T* operator->() {return &obj;};
        template <typename U> Sptr<T> &operator=(const Sptr<U> &);
        //overload *,->,=,copy-constructor

        // const-ness should be preserved.
        // Test for null using safe-bool idiom
        // Static casting, returns a smart pointer
    };

    template <typename U> Sptr<U>::Sptr(U* u) {
        //do something
    }

    template <typename T> Sptr<T>::Sptr(const Sptr<T> &copyObj) {
        //do copy constructor stuff
    }

    template <typename T> Sptr<T>::Sptr& operator=(const Sptr<T> &T) {
        return *this;
    }
} 
```

但是当我编译它时出现以下错误。

```
Sptr.hpp:30:24: error: prototype for ‘my::Sptr<T>::Sptr(U*)’ does not match any in class ‘my::Sptr<T>’
Sptr.hpp:17:3: error: candidates are: my::Sptr<T>::Sptr(const my::Sptr<T>&)
Sptr.hpp:16:25: error:                 template<class T> template<class U> my::Sptr::Sptr(U*)
Sptr.hpp:38:24: error: ‘my::Sptr<T>::Sptr’ names the constructor, not the type 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T22:56:19.497

```
template <typename U> Sptr<U>::Sptr(U* u) {
    //do something
} 
```

应该

```
template <typename T> 
   template <typename U>
       Sptr<T>::Sptr(U* u) {
        //do something
    } 
```

其他成员函数模板类似。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T22:57:47.313

您定义类模板的成员函数的方式不正确。以下是您应该如何定义构造函数模板：

```
template<typename T> // <== template parameter declaration for Sprt<T>
template<typename U> // <== template parameter declaration for constructor
Sptr<T>::Sptr(U* u) {
    //do something
} 
```

这里是你应该如何定义`operator =`：

```
template <typename T> // <== template parameter declaration for Sprt<T>
template<typename U> // <== template parameter declaration for operator
Sptr<T>& Sptr<T>::operator=(const Sptr<U> &t) {
    return *this;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T22:57:50.430

您将构造函数和模板函数都定义`operator=`为模板函数。我不确定你真的想要那个。他们不应该只是`T`作为论据吗？你确定你不想在你的构造函数声明中使用这个：

```
Sptr(T*); 
```

如果您确实希望它们成为函数模板，那么这是不正确的：

```
template <typename U> Sptr<U>::Sptr(U* u) {
    //do something
} 
```

When you have a function template inside a function class, you need to give both sets of template arguments:

```
template <typename T>
template <typename U>
Sptr<T>::Sptr(U* u) {
    //do something
} 
```

# url - 如何将查询参数添加到 URL？

> ID：15712671
> 
> 赞同：2
> 
> 时间：2013-03-29T22:54:16.813
> 
> 标签：url, parameters, tritium, moovweb

在 Tritium (Moovweb SDK) 中向 URL 添加查询参数的最佳实践是什么？寻找在您不知道 URL 是否有“？”的情况下有效的东西。和其他查询参数已经。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T23:06:20.750

Here's a short snippet of Tritium that should help you out in your Moovweb project. Just replace the **"query_param=true"** bit with the query parameter you want to add.

It selects the `href` of every `a` tag, then looks for any existing query parameters (by looking for a "?" in the href). If there are some existing, it just appends the new query parameter. If there are no existing query parameters on the href, it uses the ? to add one to the URL.

```
$q = "query_param=true"
$("//a[@href]") {
  %s = fetch("./@href")
  match(%s) {
    with(/\?/) {
      attribute("href", %s + "&" + $q)
    }
    else() {
      attribute("href", %s + "?" + $q)
    } 
  }
log(%s) 
} 
```

(You could also turn that into a function if you wanted!)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T16:01:34.223

我认为很快就会有一个新的 URL 范围，这样你就可以更轻松地做这样的事情了！

# .net - Windows Azure：在诊断日志中看不到跟踪侦听器的输出

> ID：15712672
> 
> 赞同：1
> 
> 时间：2013-03-29T22:54:23.820
> 
> 标签：.net, azure, azure-storage, azure-blob-storage, azure-diagnostics

我想在 Windows azure 诊断程序中使用跟踪侦听器记录一些消息。我能够看到诊断在我的永久存储上创建的 blob，但我看不到跟踪侦听器的输出。

这是我在工作者角色 onStart 方法中的尝试：

```
 var config = DiagnosticMonitor.GetDefaultInitialConfiguration();
            config.Logs.ScheduledTransferPeriod = System.TimeSpan.FromMinutes(1.0); 
            DiagnosticMonitor.Start("Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString", config);
            System.Diagnostics.Trace.Listeners.Add(new Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorTraceListener());
            System.Diagnostics.Trace.AutoFlush = true;
            System.Diagnostics.Trace.Write("some logging"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T11:43:51.980

看起来您的日志中缺少缓冲区。如果没有可读取的缓冲区，则没有可传输的内容。尝试添加类似：

```
config.OverallQuotaInMB = 4096;
config.Logs.BufferQuotaInMB = 512; 
```

您角色的诊断 blob（*在 wad-control-container 中找到*）内容应类似于

```
<?xml version="1.0"?>
<ConfigRequest xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <DataSources>
        <OverallQuotaInMB>4096</OverallQuotaInMB>
        <Logs>
            <BufferQuotaInMB>512</BufferQuotaInMB>
            <ScheduledTransferPeriodInMinutes>1</ScheduledTransferPeriodInMinutes>
            <ScheduledTransferLogLevelFilter>Information</ScheduledTransferLogLevelFilter>
        </Logs>
        .... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-25T05:25:48.613

我写了一篇博客文章，专门用于在 Workerroles 中启用跟踪。你在这里找到它：http: [//blog.amtopm.be/2014/07/20/azure-diagnostics-how-to-troubleshoot-your-code/](http://blog.amtopm.be/2014/07/20/azure-diagnostics-how-to-troubleshoot-your-code/)

如果您还有问题，请告诉我。

# python - 为什么我会收到此错误：“无效的 rectstyle 参数”

> ID：15712674
> 
> 赞同：2
> 
> 时间：2013-03-29T22:54:26.973
> 
> 标签：python, pygame

我目前正在用python制作一个球击中一组盒子的游戏。我已经加载了一张草的图像，我想让盒子站在上面，草图像是 600 x 151 像素。到目前为止，我所有的盒子和球都完美地出现了，但目前不起作用的是当我尝试加载图像并显示它以便盒子可以站在草地图像上而不是掉落时。

```
import pygame
from pygame.locals import *
from pygame.color import *
import pymunk as pm
from pymunk import Vec2d
import sys
from random import randint

def to_pygame(p):
    """Small hack to convert pymunk to pygame coordinates"""
    return int(p[0]), int(-p[1]+600)

def add_box(space, size, pos, mass=1.0):
    # pos is a Vec2d object
    points = [(-size, -size), (-size, size), (size,size), (size, -size)]
    moment = pm.moment_for_poly(int(mass), points, (0,0))

    body = pm.Body(mass, moment)
    body.position = pos

    shape = pm.Poly(body, points, (0,0))
    shape.friction = 1
    space.add(body,shape)

    return shape

def draw_box(screen, box):
    ps = box.get_points()
    ps.append(ps[0])
    ps = map(to_pygame, ps)
    pygame.draw.polygon(screen, THECOLORS["blue"], ps, 3)

def main():
    pygame.init()
    screen = pygame.display.set_mode((600, 600))
    pygame.display.set_caption("Piling boxes")
    clock = pygame.time.Clock()

    boxes = []
    x = 170
    y = 120
    space = pm.Space()
    space.gravity = (0.0, -100.0)

    ### ground
    body = pm.Body()
    shape = pm.Segment(body, (150,100), (450,100), .0)
    shape.friction = 4.4
    space.add(shape)

    for i in range(5):
        # what is the mass of the box?
        mass = randint(1,3)
        # what size is the box?
        size = randint(10, 35)
        # calculate its position & hold it in a Vec2d

        #x = x + size + 10
        y = y + size
        pos = Vec2d(x,y)

        box = add_box(space, size, pos, mass)
        boxes.append(box)

    while 1:
        clock.tick(15)
        space.step(1/30.0)

        for event in pygame.event.get():
            if event.type == QUIT:
                pygame.quit()
                sys.exit(0)
            elif event.type == KEYDOWN:
                if event.key == K_ESCAPE:
                    pygame.quit()
                    sys.exit(0)

        screen.fill(THECOLORS["white"])
        test_image = pygame.image.load("grass.png")

        screen.blit(test_image, to_pygame((450,100)), to_pygame((150,100)),3)

        for i in range(len(boxes)):
            draw_box(screen, boxes[i])

        pygame.display.flip()

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T17:26:08.923

问题是

```
screen.blit(test_image, to_pygame((450,100)), to_pygame((150,100)),3) 
```

要将表面blit 到屏幕，有效的blit 是：

```
screen.blit(test_image, (450,100)) 
```

所以你要：

```
screen.blit(test_image, to_pygame((450,100))) 
```

注意：额外的 args 让我觉得您可能正在尝试使用源 rect 参数来使用图块集。但在那种情况下，您不会两次将世界转换为屏幕坐标。只是在目的地，而不是来源。

如果你确实想要 spritesheet/tileset，那么[如何从 python 中的 sprite sheet 中选择 sprite image？](https://stackoverflow.com/questions/10560446/how-do-you-select-a-sprite-image-from-a-sprite-sheet-in-python)和[Pygame.org/cookbook/SpriteSheet](http://www.pygame.org/wiki/Spritesheet?parent=CookBook)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T14:23:19.390

没有回溯或错误日志，因此很难确定错误点，有根据的猜测是您在某处错误地传递了 Rectstyle 参数。请参阅 pygame.Rect 的文档，了解如何正确传递 Rectstyle 参数[。](http://www.pygame.org/docs/ref/rect.html)

> ```
> pygame.Rect(left, top, width, height): return Rect
> pygame.Rect((left, top), (width, height)): return Rect
> pygame.Rect(object): return Rect 
> ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T19:20:56.857

第三个参数`blit`是源`area`参数，应该是一个矩形，而不是坐标：

```
screen.blit(test_image, to_pygame((450,100)), to_pygame((150,100)),3) 
```

也许你想要这个：

```
screen.blit(test_image, to_pygame((450,100)), pygame.Rect((0,0), (150,100)), 3) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T07:40:28.303

问题是因为您的调用`screen.blit`不正确。见[这里](http://www.pygame.org/docs/ref/surface.html#pygame.Surface.blit)。

电话可能是

```
screen.blit(test_image, to_pygame((450,100))) 
```

或者如果你想使用 area 参数，

```
screen.blit(test_image, to_pygame((450,100)), pygame.Rect((0,0), (150,100)), 3) 
```

此外，您在每个循环中加载guess.png，而不是将其移出while循环，您的代码将执行得更好。

# javascript - 使用javascript检查复选框的按钮

> ID：15712677
> 
> 赞同：0
> 
> 时间：2013-03-29T22:54:35.420
> 
> 标签：javascript, forms, button, checkbox

我正在尝试制作一个可以在三种颜色之间切换的按钮：黑色、绿色和红色，并且会根据颜色选中​​某个框。现在我可以进行颜色切换，但不能检查复选框。我将不胜感激。我是初学者（显然）。

按钮颜色绿色：复选框 1

按钮颜色红色：复选框 2

按钮颜色黑色：不选中框 1 或框 2

脚本如下所示：

```
<script>
var colors = ["green", "red", "black"] 

function setColor(el) { 
el.colorIdx = el.colorIdx || 0; 
el.style.color = colors[el.colorIdx++ % colors.length]; 
}

</script> 
```

HTML 看起来像：

```
<html>
<button onclick="setColor(this)">This is my Button</button>
<input type="checkbox" name="box1" id="box1" />
<input type="checkbox" name="box2" id="box2" />  
</html> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T23:03:19.003

我建议：

```
var colors = ["green", "red", "black"];

function setColor(el) {
    el.colorIdx = el.colorIdx || 0;
    el.style.color = colors[el.colorIdx++ % colors.length];
    document.getElementById('box1').checked = el.style.color == 'green';
    document.getElementById('box2').checked = el.style.color == 'red';
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/dkY5e/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T23:01:15.173

像这样做：

```
var index = el.colorIdx++ % colors.length;
if( index == 2 ) //2 is the index of color black
{
  document.getElementById("box1").checked = false; 
  document.getElementById("box2").checked = false; 
}
else if( index == 0 )
{
   document.getElementById("box1").checked = true;     
}
else
{
   document.getElementById("box2").checked = true;       
} 
```

# php - php：提交后保留选择选项

> ID：15712679
> 
> 赞同：0
> 
> 时间：2013-03-29T22:54:45.097
> 
> 标签：php, mysql, forms, submit-button

我有一种杂货清单，我希望能够在其中添加来自不同商店的商品。

目前我有一个表格，我在其中发布文章编号和数量，然后按提交将项目添加到购物清单（下表）。

```
<form action="<?php echo $current_file.$id; ?>" method="POST">

    Store:  <select>
                    <option value="gross1">Store 1</option>
                    <option value="gross2">Store 2</option>
                    <option value="gross3">Store 3</option>
            </select>

    Art no: <input type="text" size="15" name="number"  /> 

    Quantity: <input type="text" size="3" name="q" />

    <input type="submit" value="Add item" />

</form>

<table>
    <tr>
        <th>
            Art no
        </th>
        <th>
            Article name
        </th>
        <th>
            Price
        </th>
        <th>
            Quantity
        </th>
        <th>
            Total
        </th>
    </tr> 
```

商店项目列表存储在 mysql 表中，所以我想通过下拉选择列表选择商店（或表，如果你愿意的话）。但问题是，如果我从中选择商品的商店不是商店 1，那么在每次按下提交后一遍又一遍地选择商店会非常令人沮丧。

我认为我不能使用使用某种 GET 变量来指定所选商店的脚本，因为我已经使用 GET 来指定所选杂货清单。是否有另一种方法可以让网站在页面刷新后记住所选商店？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T23:04:14.807

In your php you would normally set SELECTED against the option based on the POSTed value. But you need to set a name on the select tag.

Have you tried searching google for any of this?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-11T17:13:44.073

我有一个类似的问题，需要一个快速的解决方案。从下拉列表中选择一个值并提交后，页面重新加载，这会重置下拉列表 - 不保留所选值（即使发送了所选值（$_GET） . 对我来说，这个问题纯粹是审美问题，因为我希望用户看到他们选择的价值。这就是我所做的：

```
// Change the parent dropdown selected value to the currently selected value
    $(window).load(function() {

        // Get url attributes which should contain the $_POST or $_GET value and split it. You have to refine this in case you have multiple attributes

        var str=window.location.href; var n=str.split("=");

         // This should be the selected value attribute
         var myAttrVal= n[1];

       // check all options and grab the value (or whatever other unique identifier you're using). Check this value against your url value and when they match, add the selected attribute to that option.
        $('#selectID option').each(function() {

            var selectedOptVal = $(this).attr('value');

            if ( myAttrVal  == selectedOptVal) {

                $(this).attr('selected', 'selected');
            }
        });

    }); 
```

我确信有更好的方法可以做到这一点，但我希望它能给您提供有关如何解决问题的想法。

# linux - 窗口脚本

> ID：15712681
> 
> 赞同：0
> 
> 时间：2013-03-29T22:55:02.827
> 
> 标签：linux, windows, scripting, batch-file

这是我第一次尝试编写脚本，我正在尝试创建一个小程序，在循环中执行简单的除法和 mod，然后计算 mod 结果的平均值。这是我在 Linux .sh 中尝试过的，但我怎样才能使它与 Windows .bat 兼容？非常感谢您的帮助。

```
echo "enter first number:"
read first_num
echo “enter second number:”
read second_num
while [ first_num && second_num != 999 ]
do
    if [ second_num != 0 ]; then
        echo "Enter first number:"
        read first_num
        echo"Enter second number:"
        read second_num
        echo first_num "/" second_num "=" $((first_num / second_ num)) >> file.txt
    else
        echo "ERROR. Cannot divide by 0\. Enter another number:"    
    fi
done
if [ first_num == 999 || second_num == 999 ]; then
   echo "You have exited the loop."
fi

#Mod 5 of numbers 1-100:
for i in {1...100}
do
    result=$((i % 5))
    echo i + "%5=" + result >> file.txt
done

#Average of results:
int sum=0
for (( i=1; i<101; i=i+1 ))
do    
    sum=sum+$((i % 5))
    average=$((sum/100))
    echo average
    echo average >> file.txt
done 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T05:09:52.450

```
echo "enter first number:"
read first_num 
```

变为 set /p first_num="输入第一个数字"

```
while [ first_num && second_num != 999 ] 
```

没有 WHILE - 必须接线。想想俱乐部和岩石。

```
:loop
if %first_num%==999 goto endloop
if %second_num%==999 goto endloop

...

goto loop
:endloop 
```

`:name`是一个标签，`%var%`检索的内容`var`- 如果字符串包含空格，则始终是用引号括起来的字符串。

```
if [ second_num != 0 ]; then 
```

翻译是

```
if NOT %second_num%==0 ( ...things... ) else (...other things...) 
```

或者，当然

```
if %second_num%==0 ( ...other things... ) else (...things...) 
```

怪癖：（其中之一）：第一个左括号必须与 the 出现在同一物理行上，`IF`并且 the`ELSE`必须与`)`on-true statemet 序列的 the 在同一物理行上。

```
echo first_num "/" second_num "=" $((first_num / second_ num)) >> file.txt 
```

无法在回声中进行计算

```
set /a result=(first_num / second_ num) 
```

或者

```
set /a result=(%first_num% / %second_ num%) 
```

`SET /A`应用算术表达式的结果 - 稍后的加法和更多类似 C 的语义

然后

```
echo %first_num% / %second_num% = %result% >> file.txt 
```

纯粹将元素串在一起。

接下来有一个小问题。在解析过程中，任何 %var% 都会被其 PARSE-TIME 值替换，**然后**执行该行。因此，`ECHO`上面的行将显示输入 IF 语句时的值，而不是计算后的值。

两种治疗方法：

您可以使用`SETLOCAL ENABLEDELATEDEXPANSION`来切换解释器模式。在 DELAYEDEXPANSION 模式下，`!var!`可用于检索 的 RUN-TIME 值`var`。在同一上下文中，A`SETLOCAL`由 a 或到达 END-OF-FILE 终止。`ENDLOCAL`a 之后的任何环境更改`SETLOCAL`都被 an 撤消，`ENDLOCAL`这就是为什么它通常在`@echo off`- 保持环境清洁之后立即执行。

第二种治疗方法是使用子程序。`CALL :SUB`（冒号的意思是“内部子程序 - 开始标签在这个批处理文件中”。省略它意味着“这是一个外部可执行文件”） CALL 创建一个新的上下文，复制当时存在的环境变量，所以

```
:sub
echo %first_num% / %second_num% = %result% >> file.txt
goto :eof 
```

将显示执行 a 时环境中的变量`CALL :SUB`。请注意`GOTO :EOF`（冒号的`REQUIRED`意思是“转到文件的物理结尾”-`EOF`不应声明标签...

（还要注意流向通常放置在批处理文件末尾的子例程。明智的做法是`GOTO :EOF`确保不会发生流向...

```
#Mod 5 of numbers 1-100: 
```

评论指标正式上线`REM`

```
rem Mod 5 of numbers 1-100: 
```

但

```
::Mod 5 of numbers 1-100: 
```

经常使用，因为它更容易键入 BUT 因为它实际上是对标签的滥用，它实际上是一个标签，并且标签不能用于复合语句中，你不能在括号中使用它`IF ... (...) else (...)`or`FOR...DO (...)`

```
for i in {1...100} 
```

变成

```
for /L %%i in (1,1,100) do ( 
```

元变量`%%i`是区分大小写和单个字符的。在 a`FOR /L`元素是（开始，步骤，结束） -`FOR /?`从提示（或通常`command /?`从提示）中查看 docco...

```
result=$((i % 5)) 
```

变成

```
set /a result=%%i %% 5 
```

`/a`因为 RHS 是要计算的算术表达式；%% 5 因为`%`escapes `%`，空格无关紧要，处理器需要知道`%`正在使用 MOD 运算符，而不是`%5`（第五个命令行参数）

```
int sum=0 
```

没有类型之类的东西；所有环境变量都是字符串，并且只被`set /a`语句解释为整数

所以 - 这就是它的全部......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T14:54:07.160

希望你正在寻找这个：

```
@echo off
setlocal enabledelayedexpansion
> file.txt type nul
:loopInput
echo enter first number:
set /p first_num=
echo enter second number:
set /p second_num=

if !first_num! neq 0 (
    if !second_num! neq 999 (
        if !second_num! equ 0 (
            echo ERROR. Cannot divide by 0\. Enter another number:
            goto loopInput
        )
        goto loopDiv
    )
)
goto :skipDiv

:loopDiv
set /a division=first_num/second_num

>> file.txt echo !first_num! / !second_num! = !division!
goto loopInput

:skipDiv
echo You have exited the div loop.

>> file.txt echo Mod 5 of numbers 1-100:
for /l %%a in (1,1,100) do (
    set /a mod=%%a%%5
    >> file.txt echo %%a %% 5 = !mod!
)

set sum=0
for /l %%a in (1,1,100) do (
    set /a sum+=%%a%%5
)
set /a average=sum/100
>> file.txt echo Average of results: !average! 
```

# javascript - 删除具有特定数据属性的元素的锚后代

> ID：15712686
> 
> 赞同：0
> 
> 时间：2013-03-29T22:55:42.723
> 
> 标签：javascript, html, dom

也许这是一个愚蠢的问题，但有什么方法可以删除特定数据 ID 的链接？（见图）：

![在此处输入图像描述](../Images/6503412da0c9901a33cf19440d89fd6c.png)

我希望我的问题有意义！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T23:00:49.813

你可以试试 jQuery 的[.removeAttr](http://api.jquery.com/removeAttr/)

`$('li.one-third.column').removeAttr('data-id');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T23:09:59.697

如果要从 DOM 中删除任何内容，则需要使用 JavaScript。

**原生 JavaScript**

在现代浏览器中，您可以使用它[`querySelectorAll`](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll)来选择元素，然后将其从 DOM 中删除。像这样的东西：

```
var elm = document.querySelectorAll("li[data-id='id-166'] a.go-link");
elm.parentNode.removeChild(elm); 
```

*请注意对 querySelectorAll - IE8 及更高版本的浏览器支持有些有限*

**jQuery**

使用像[jQuery](http://jquery.com/)这样的库，它可以做得更短一些：

```
$("li[data-id='id-166'] a.go-link").remove(); 
```

# networking - 拆分 TCP 上的 TCP 序列号技巧

> ID：15712691
> 
> 赞同：1
> 
> 时间：2013-03-29T22:55:53.417
> 
> 标签：networking, tcp, network-programming

我想建立这样一个系统，有3个节点，A、B和CA和B建立TCP连接，然后A告诉C端口、序列号（seq_no）和确认序列号（ack_seq_no）。然后 C 向 B 发送数据包（C 和 A 共享同一个 IP 但彼此相距较远，例如 C 欺骗 A 的 IP）

如果 B 从不向 IP(A) 发送数据包（仅 ACK），C 可以使用正确的 seq_no 和 ack_seq_no 向 B 发送数据包，但有时如果 B 向 IP(A) 发送数据包 P1，

1 A 立即向 B 发送数据包 P1 的 ACK，A 告诉 C 新的 ack_seq_no。但是 A 和 C 之间存在延迟，因此在 C 知道新的 ack_seq_no 之前，C 可能会使用过时的 ack_seq_no 向 B 发送一些数据包（带有欺骗性 IP(A)）。

我的第一个问题是：当 C 收到带有过时 ack_seq_no 的数据包时，它的行为会怎样？

2 如果我将 p1 的 ACK 从 A 延迟到 B，我让 A 先告诉 C，然后发送 p1 的 ACK。有2个问题：

1）由于B在等待A的p1的ACK，它可能会重传包p1，如何增加重传超时时间？如果每次 A 回复 ACK 都有这样的延迟，那么超时时间自然会增加，那不是问题吗？

2）如果C在从A到B的ACK（for p1）之前向B（IP为A）发送数据包。这意味着数据包具有更新的ack_seq_no，但B不知道它的新ack_seq_no是否已知是否通过A（因为ACK尚未到达），所以它可能认为ACK是捎带在数据包上的？那么B将如何处理迟到的ACK呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T23:20:25.820

1.  如果收到过时的 ACK，则 ACK 将被忽略（假定它是延迟的旧数据包）。每个 ACK​​ 都会确认导致它的所有内容（我假设您没有发送选择性 ACK）。

2.  发送方应根据确认响应时间调整其重传超时。

3.  B 无法区分来自 A 或 C 的 ACK。就它而言，这与问题 #1 相同——迟到的 ACK 将被忽略。

# javascript - Troubleshooting post topojson installation

> ID：15712693
> 
> 赞同：0
> 
> 时间：2013-03-29T22:55:59.293
> 
> 标签：javascript, terminal, d3.js

I've installed topojson w/ homebrew and am working on the same tutorial as the user in the post [Troubleshooting topojson installation](https://stackoverflow.com/questions/14173853/troubleshooting-topojson-installation) but am not getting any result when I call

```
which topojson

which ogr2ogr
prints  /usr/local/bin/ogr2ogr 
```

But I'm getting nothing with which topojson despite just having successfully installed it.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T12:29:15.857

The issue is probably that the binary for topojson is not in your $PATH (unless you got an error message when installing it). Check the location given in the tutorial, i.e. type the full path.

# javascript - 带下划线的简单错误

> ID：15712697
> 
> 赞同：-1
> 
> 时间：2013-03-29T22:56:30.700
> 
> 标签：javascript, web-services, backbone.js, underscore.js

请有人告诉我为什么下面的第 1 行会引发错误

```
Uncaught TypeError: Cannot read property 'age' of undefined. 
```

我是 javascript 和骨干网的新手，这个错误对我来说毫无意义。

谢谢

```
<script>
var Person = Backbone.Model.extend({
    initialize: function(){
        console.log("Person is initialized");
    }
});

var People = Backbone.Collection.extend({
    model: Person,

    initialize: function(){
        console.log("People model is initialized");
    }
});

var person = new Person({age: 12});
var person2 = new Person({age: 15});
var person3 = new Person({age: 12});
var people = new People();
people.add(person);
people.add(person2);

// (1) var ages = _.where(people, {age: 12});
console.log(ages); 
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T23:38:18.990

好像你想要这个：

```
var ages = people.where({age: 12}); 
```

[Underscore`where`](http://underscorejs.org/#where)和[Backbone Collection`where`](http://backbonejs.org/#Collection-where)是两个不同的东西。

就像 Fabricio 所说的那样，错误意味着某些代码正在尝试读取未定义的属性。像`foo.age`where `foo`is这样的东西`undefined`会产生这个错误。

Since you say you are new to javascript... In Chrome dev tools, you can click the error and it will take you to where the error occurred. In this case it takes you to underscore's source code. When an error occurs in a library, 99% of the time (if the library is widely used) it means you are using something wrong, and can check the documentation to see what is going on.

# java - 为什么需要这个返回语句？

> ID：15712698
> 
> 赞同：1
> 
> 时间：2013-03-29T22:56:39.647
> 
> 标签：java, if-statement, return

这是《Absolute Java》一书中的一种方法。我不明白为什么最后一个 else 语句需要返回值 0。作者的评论是“需要让编译器满意”。返回值为0是否有原因，或者它可以是任何整数？

```
public int getMonth( )
{
    if (month.equals("January"))
        return 1;
    else if (month.equals("February"))
        return 2;
    else if (month.equalsIgnoreCase("March"))
        return 3;
    else if (month.equalsIgnoreCase("April"))
        return 4;
    else if (month.equalsIgnoreCase("May"))
        return 5;
    else if (month.equals("June"))
        return 6;
    else if (month.equalsIgnoreCase("July"))
        return 7;
    else if (month.equalsIgnoreCase("August"))
        return 8;
    else if (month.equalsIgnoreCase("September"))
        return 9;
    else if (month.equalsIgnoreCase("October"))
        return 10;
    else if (month.equals("November"))
        return 11;
    else if (month.equals("December"))
        return 12;
    else
    {
        System.out.println("Fatal Error");
        System.exit(0);
        return 0; //Needed to keep the compiler happy
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T23:00:16.860

我认为这对程序员来说是糟糕的设计，但它很简单，并且我认为可以完成工作。也许这本书围绕这个例子提供了更多的背景信息？也许他们用它来说明语言而不是实际解决问题？因为这是控制应用程序中逻辑流的糟糕方法。

在*运行时*，应用程序将在此处结束：

```
System.exit(0); 
```

But the compiler doesn't know that. The compiler sees this function returns an `int` and demands that all code paths return a value. Even if one of the code paths will, at runtime, exit the function in another way. So that last code path needs to return a value:

```
return 0; 
```

It can be any integer, of course. The developer picked `0` because it's easy, but it's essentially arbitrary. At runtime that line won't be reached.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T22:59:52.163

如果一个方法返回一个值，编译器会测试每个可能的执行路径以查看是否返回了一个值。如果不是这种情况，则会引发编译时错误。

它*不会*查看被调用的方法以查看它是否退出应用程序或其他东西。从编译器的角度来看`System.exit()`，它只是一个方法调用，就像其他任何方法一样。如果没有该`return 0;`语句，该方法将不会返回该执行路径的值，这是非法的。即使它永远不会在实践中被执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T23:47:42.617

better yet

```
 System.exit(0);
    throw new AssertionError("won't reach here"); 
```

# ruby-on-rails - Ajax 请求在多次成功请求后停止工作

> ID：15712699
> 
> 赞同：3
> 
> 时间：2013-03-29T22:56:56.020
> 
> 标签：ruby-on-rails, ajax, jquery, devise, csrf

在我的 Rails + Devise 应用程序中，我有一个指向多个“联系人”的链接表，每个都是一个简单的 jquery $.get AJAX 请求，它调用 Contact#show。

在单击 3-25 个链接中的任意位置（成功！）后，请求将不可避免地失败（响应状态为 0 或加载资源失败，具体取决于浏览器），之后它将永远不会再次工作，直到浏览器选项卡关闭或缓存被关闭清除。

这是请求的javascript

```
$.get('/contacts/1312') 
```

细节...

*   我的布局顶部确实有 csrf_meta_tags
*   请求头确实包含一个“X-CSRF-Token”，其中包含来自元标记的正确 CSRF 令牌
*   在 chrome 上，失败的请求不会作为请求显示在服务器日志中。就好像他们从未成功过一样。报告的唯一错误是在报告失败的 chrome 控制台中。这让我相信它与浏览器有关。
*   在 Safari 上，第一次失败时，它似乎会破坏会话，任何后续请求都会导致对登录页面的请求，这让我相信它可能与设计有关

2013 年 3 月 30 日更新：查看了许多关于 SO 的相关问题（这个：[Rails not reloading session on ajax post](https://stackoverflow.com/questions/5126721/rails-not-reloading-session-on-ajax-post?rq=1)），这与 CSRF 设置不正确有关，我不认为这个问题与 CSRF 有关因为*它在失败之前可以正常工作几次。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T16:55:55.510

我最终确实弄明白了。我正在使用将其状态保存在 cookie 中的功能 datatables.js（一个表库）。然而，它试图保存在 cookie 中的数据超过了 4kb 的最大值，所以我的 cookie 被弄乱了，导致不同浏览器的行为不同。

# android - 调用 AsyncTask 错误：LoadBookBuyInfo 无法解析为类型

> ID：15712702
> 
> 赞同：0
> 
> 时间：2013-03-29T22:57:01.807
> 
> 标签：android, callback, android-asynctask, fragment

在调用我的 AsyncTask 时，new LoadBookBuyInfo().execute();，我收到错误：“LoadBookBuyInfo 无法解析为类型”。我正在使用片段，我已经在互联网上搜索了答案，但无济于事。任何帮助将不胜感激，谢谢。

这是我的代码：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, 
        Bundle savedInstanceState) {

    View view = inflater.inflate(R.layout.buy_tbfrag, container, false);

    //bookLV = (ListView)view.findViewById(R.id.list);
    //bookLV = getListView();
    bookLV = (ListView)view.findViewById(android.R.id.list);

    //enables filtering for the contents of the given ListView bookLV
    bookLV.setTextFilterEnabled(true);

    //Search inputed book title
    titleSearch = (EditText)view.findViewById(R.id.titleSearch);

    return view;
}

@Override
public void onActivityCreated(Bundle savedInstanceState){

    System.out.println("onActivityCreated executed");

    bookArray = new ArrayList<Bookinfo>();

    //**************************************************************************************//
    //*******************New Async Task & JSON Parser code starts here**********************//
    //**************************************************************************************//

    //Load bookArray in Background Thread
    new LoadBookBuyInfo().execute();

    //Background AsyncTask to load all BookBuyInfo by making Http Request
    class LoadBookBuyInfo extends AsyncTask<String, String, String> {

        //Show Progress Dialog before starting background thread
        @Override
        protected void onPreExecute() {
            super.onPreExecute();

            //pDialog = new ProgressDialog(BuyFragTab); //might can only be activity
            pDialog = new ProgressDialog(getActivity());//might can only be activity
            pDialog.setMessage("Loading Books...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }

        //Get BookBuyInfo Data
        protected String doInBackground(String... arg0) {
            //Building parameters
            ArrayList<NameValuePair> bookValues = new ArrayList<NameValuePair>();

            //getting JSON string from URL
            JSONObject json = jsonParser.makeHttpRequest(BOOKBUY_URL, "GET", bookValues);

            //Check logcat for JSON response
            Log.d("Book Buy JSON: ", json.toString());

            //Get JSON Data
            try {
                bookBuyInfo = json.getJSONArray("books");

                //bookArray = new ArrayList<Bookinfo>();
                //loop through all books and load data
                for (int i = 0; i < bookBuyInfo.length(); i++) {
                    JSONObject b = bookBuyInfo.getJSONObject(i);
                    ...
                    (book code setup)}
            }
            catch (JSONException e) {
                e.printStackTrace();
            }

            return null;
        }

    //}

        //After completing background task, dismiss the progress dialog
        protected void onPostExecute(String file_url) { // might need to be (String result) here
            //dismiss the dialog after getting all the records
            pDialog.dismiss();
            //update UI from background thread
            //runOnUiThread(new Runnable() {
            getActivity().runOnUiThread(new Runnable() {
                public void run() {
                    //updating parsed JSON data into ListView
                    adapter = new MyCustomAdapter(getActivity(), R.layout.buy_tbfrag, bookArray);
                    bookLV.setAdapter(adapter);
                }
            });
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T23:01:09.233

看起来您将 AsyncTask 类放在 onActivityCreated 方法中。将整个 AsyncTask 类移到此方法之外，然后从那里调用它。

# mysql - mysql event date sorting

> ID：15712703
> 
> 赞同：0
> 
> 时间：2013-03-29T22:57:14.860
> 
> 标签：mysql, sql

I'm writing a simple event php script as an exercise which utilizes the mysql database. I'm trying to list all future festivals by date however it is listing no festivals.

The $nowdate_? variables are today's day, month, and year.

```
SELECT   * 
FROM     Festivals
WHERE    startdate_y <= " . $nowdate_y . " 
AND      startdate_m >= " . $nowdate_m . "
AND      startdate_d > " . $nowdate_d . "
ORDER BY startdate_y asc,startdate_m asc,startdate_d asc 
LIMIT    0,15 
```

Am I approaching this incorrectly in the query?

thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T23:09:51.463

You can not compare the date in parts.

You need

```
WHERE DATE_FORMAT(
          STR_TO_DATE(
              CONCAT_WS('-', startdate_y, startdate_m, startdate_d),
              '%Y-%m-%d'),
          '%Y-%m-%d')
      > CURRENT_DATE 
```

The above expression might need a bit of fixing depending on what is exactly in the date fields.

# sql-server - 带有子连接的 SQL 查询唯一性

> ID：15712706
> 
> 赞同：0
> 
> 时间：2013-03-29T22:57:25.187
> 
> 标签：sql-server, tsql

帮助！这是我需要完成的一个非常简单的 a、b、c 示例。我一直在拔头发。我以前写过这个，但现在无法理解它！就是这样，实际和预期的结果如下所示：

```
set nocount on
declare @a table (id int, a varchar(10))
declare @b table (ref int, b varchar(10), c varchar(20))

insert into @a select 1, 'bingo'
insert into @a select 2, 'bongo'

insert into @b select 1, 'T5', 'asdfwef'
insert into @b select 1, 'T8', 'asfqwez'
insert into @b select 1, 'T6', 'qweoae'
insert into @b select 1, 'T8', 'qzoeqe'
insert into @b select 1, 'T9', 'oqeizef'
insert into @b select 2, 'T3', 'awega'
insert into @b select 2, 'T6', 'fhaeaw'
insert into @b select 2, 'T3', 'fqsegw'

select * from @a a join @b b on a.id = b.ref

-- Expected  (Uniqueness is: a’s id to b’s ref and the first b value ingoring b’s c value)
----1,bingo,1,T5,asdfwef
----1,bingo,1,T8,asfqwez
----1,bingo,1,T6,qweoae
----1,bingo,1,T9,oqeizef
----2,bongo,2,T3,awega
----2,bongo,2,T6,fhaeaw

-- Actual
----1,bingo,1,T5,asdfwef
----1,bingo,1,T8,asfqwez
----1,bingo,1,T6,qweoae
----1,bingo,1,T8,qzoeqe
----1,bingo,1,T9,oqeizef
----2,bongo,2,T3,awega
----2,bongo,2,T6,fhaeaw
----2,bongo,2,T3,fqsegw 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T23:06:21.560

您的查询返回正确的结果。中的所有匹配值`@b`。

如果你想要第一个 b 值，你需要做两件事。首先，您需要在 b 中包含一个排序列，以便您知道“第一”是什么。请记住，SQL 表是无序的。这很简单：

```
declare @b table (id int identity(1,1) not null, ref int, b varchar(10), c varchar(20)); 
```

然后，您必须更改插入以插入除 id 之外的所有内容：

```
insert into @b(ref, b, c) select 1, 'T5', 'asdfwef'; 
```

现在您已准备好进行实际查询：

```
select *
from @a a join
     (select b.*, row_number() over (partition by b.ref, b.b order by b.id) as seqnum
      from @b b 
     ) b
     on a.id = b.ref and b.seqnum = 1 
```

# visual-studio - 是否可以在 Visual Studio 解决方案中引用不同的 NuGet 包版本？

> ID：15712709
> 
> 赞同：7
> 
> 时间：2013-03-29T22:57:32.923
> 
> 标签：visual-studio, nuget, nuget-package

我们是一个由 7 名成员组成的团队，我们想用 Visual Studio 创建一个云应用程序 (Windows Azure)。我们的应用程序托管在 GitHub 上，因此我们选择使用 NuGet 包来尽可能保持我们的存储库轻量级。

然而，我们的 Visual Studio 解决方案中的两个不同项目需要引用 Newtonsoft.Json 版本 4.0.2 或 Newtonsoft.Json 版本 4.5.11。

我们尝试为每个项目引用正确的版本，但我们在构建时收到此错误：

1.  类型“Newtonsoft.Json.Linq.JObject”在未引用的程序集中定义。您必须添加对程序集“Newtonsoft.Json，Version=4.0.2.0，Culture=neutral，PublicKeyToken=null”的引用。

2.  无法将类型“Newtonsoft.Json.Linq.JObject”隐式转换为“Newtonsoft.Json.Linq.JObject”

第二个错误表明即使我们的解决方案中没有项目同时引用这两个版本，这两个版本之间也存在冲突。

你有解决这个问题的想法吗？

谢谢。

PS：以下是我们发现的有关此问题的最相关信息。

[http://docs.nuget.org/docs/reference/known-issues](http://docs.nuget.org/docs/reference/known-issues)

[https://stackoverflow.com/search?q=NuGet+multi+packages+version](https://stackoverflow.com/search?q=NuGet+multi+packages+version)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-26T23:57:11.220

过了一会儿...知道我们已经重写了使用旧引用 Newtonsoft.Json 版本 4.0.2 的代码。

谢谢。

# c++ - OpenGL - 具有多个 VBO 和 VAO 的 glVertexAttribPointer 使用相同的着色器

> ID：15712716
> 
> 赞同：0
> 
> 时间：2013-03-29T22:58:00.817
> 
> 标签：c++, opengl, vertex-attributes

我的渲染引擎中设置了多个 VBO 和匹配的 VAO。我对使用 glVertexAttribPointer 有点困惑。我已经设置它并且它渲染得很好，但我很好奇如果我对所有这些不同的对象使用一个着色器（基本漫反射），我是否每次创建 VAO 时都设置 glVertexAttribPointer。我想我想知道我设置的属性指针是在着色器还是顶点数组对象中设置的。我假设它是顶点数组对象，但希望得到一些澄清。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T23:32:16.307

顶点属性指针是每个顶点数组对象（VAO）。[OpenGL 4.3规范](http://www.opengl.org/registry/doc/glspec43.core.20130214.pdf)第318页的描述中`glGetVertexAttribPointerv`规定：*返回的值是从当前绑定的顶点数组对象中查询的。*

# c# - Error.ArgumentNull() 在哪里/什么？

> ID：15712719
> 
> 赞同：8
> 
> 时间：2013-03-29T22:58:18.957
> 
> 标签：c#, .net

有时我会在代码示例中看到这一点：

```
throw Error.ArgumentNull("someParameter"); 
```

[这里](https://github.com/ASP-NET-MVC/aspnetwebstack/blob/master/src/System.Web.Http/AuthorizeAttribute.cs)有一个例子，在第 89 行。

我想`Error`在我自己的代码中使用。我在哪里可以找到它？

（我试图自己找到它，我尝试`using`了该文件顶部的命名空间，并试图让 Visual Studio 找到它，但到目前为止没有运气。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T23:02:54.923

它是由库的创建者定义的帮助器类，以使他们的生活更轻松。

**[错误.cs](https://github.com/aspnet/AspNetWebStack/blob/master/src/Common/Error.cs)文件：**

```
internal static ArgumentNullException ArgumentNull(string parameterName, string messageFormat, params object[] messageArgs)
{
    return new ArgumentNullException(parameterName, Error.Format(messageFormat, messageArgs));
} 
```

* * *

如果您正在寻找类似的功能，请查看[Code Contracts](https://research.microsoft.com/en-us/projects/contracts/)（适用于 Visual Studio 的非 Express 版本）。然后你可以写这样的东西：

```
using System.Diagnostics.Contracts;

void MyMethod(string someParameter)
{
    Contract.Requires<ArgumentNullException>(someParameter != null);

    // ...
} 
```

...and it will throw an exception at run-time when this condition has not been met.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-29T23:05:30.777

It is an internal helper class, with `internal` visibility. That's why you haven't been able to locate it.

Microsoft source code uses this pattern in a variety of places.

But why do it? It enables you to throw a consistent, nicely-formatted, localized exception without having to put that logic in every exception handler.

Taking that a step further, some definitions even contain compiler directives, such as:

```
 internal static ArgumentException InvalidEnumArgument( string parameterName, int invalidValue, Type enumClass ) {
#if NETFX_CORE
            return new ArgumentException(Error.Format(CommonWebApiResources.InvalidEnumArgument, parameterName, invalidValue, enumClass.Name), parameterName);
#else
            return new InvalidEnumArgumentException( parameterName, invalidValue, enumClass );
#endif
        } 
```

Other methods (such as `PropertyNull()`) are decorated with code analysis suppression messages.

Again, it's simply a convenience/consistency mechanism to avoid repeating this code all over the place.

I probably wouldn't suggest trying to use this exact code in your own project, because your needs will be different. But you can certainly use it as a pattern.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T23:01:51.083

那是一个自定义的内部类型，它在 BCL 中不存在。

```
namespace System.Web.Http
{
    /// <summary>
    /// Utility class for creating and unwrapping <see cref="Exception"/> instances.
    /// </summary>
    internal static class Error
    {}
 } 
```

你可以从那里复制它，如果你愿意的话。

# c# - 在 ASP.NET Web API 中获取 Web Api 使用者 IP 地址和主机名

> ID：15712720
> 
> 赞同：2
> 
> 时间：2013-03-29T22:58:28.600
> 
> 标签：c#, asp.net-web-api

我已经托管了在 ASP.net 中开发的 Web Api。我想如果有人调用我的 API，以便稍后我想使用 C# 拒绝来自特定 ID 的请求，我可以登录数据库。

获取消费者 IP 和主机名的最佳做法是什么？

```
public static string GetIP4Address()
  {
    string IP4Address = String.Empty;

    foreach (IPAddress IPA in Dns.GetHostAddresses(Request.ServerVariables["REMOTE_ADDR"].ToString())))
    {
      if (IPA.AddressFamily.ToString() == "InterNetwork")
      {
        IP4Address = IPA.ToString();
        break;
      }
    }

    if (IP4Address != String.Empty)
    {
      return IP4Address;
    }

    foreach (IPAddress IPA in Dns.GetHostAddresses(Dns.GetHostName()))
    {
      if (IPA.AddressFamily.ToString() == "InterNetwork")
      {
        IP4Address = IPA.ToString();
        break;
      }
    }

    return IP4Address;
  } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T23:21:48.167

解析名称听起来是个坏主意。如果从 dns 无法解析的客户端计算机调用您怎么办？我告诉你，dns 需要永远然后失败，你必须捕获并记录为“未知主机名”的异常。

至于请求地址，只要得到它

```
 HttpContext.Current.Request.UserHostAddress 
```

# jquery - jQuery AJAX 成功回调未在 IE 中触发

> ID：15712721
> 
> 赞同：0
> 
> 时间：2013-03-29T22:58:35.027
> 
> 标签：jquery, ajax, file, upload

我对javascript很陌生，我整天都在寻找解决这个问题的方法。我发现了很多问题/答案，但没有任何效果。

我有一个包含文件上传的页面，我想通过服务器端验证例程运行此文件，然后在页面上显示验证结果。除了 IE（Safari、Chrome 和 Chromium、Firefox）之外，我在所有方面都表现出色。

为了使文件上传在 IE 上工作，用户需要通过提交按钮提交表单。因此，我使用 HTML 中的条件注释将其添加到页面上。在 javascript 中，我使用在这里找到的 IE 检测功能。这部分工作正常。

这是发出ajax请求的函数：

```
function handleUpload()
{
    showSpinner();

    var dFile = new FormData(document.getElementById("devConsValidate")); // this works in IE but only if called by a submit method 

    $.ajax(
    {
        cache: false,
        async: false,
        url: 'validator.php',
        type: 'POST',
        data: dFile,
        dataType: 'JSON',

        processData: false, // this is key for formdata
        contentType: false, // so is this

        success: function(response)
        {
            var result = response.result;
            var validationCode = response.validation_code;
            var errors = response.errors;

            var htmlCode = '<h2>';

            if (result == 'SUCCESS')
                htmlCode += '<font color="green">';
            else
            {
                htmlCode += '<font color="red">';
            }

            htmlCode += 'Validation ' + result + '</font></h3>';

            if (result == "FAIL")
            {
                htmlCode += '</center>';
                for (var i in errors)
                    htmlCode += errors[i] + '<br>';

                htmlCode += '<br><a href="validator_help.php">Validator Help    </a>';
            }
            else
            {
                htmlCode += 'Please use the following code when submitting your request.<br><br><font color ="#00aa54" size="+2">' + validationCode + '</font>';
            }

            // make some beautiful html
            $('#resultsArea').html(htmlCode);
        },

        error: function (XMLHttpRequest, textStatus, errorThrown) 
        {
            alert('error: ' + errorThrown);
        }
    }); 
} 
```

在文件更改事件或正在提交的表单上调用函数 handleUpload()。validator.php 返回一个 json_encoded 值数组。

问题是在使用 IE 时，ajax 成功回调永远不会触发，浏览器只会在空白页面上显示原始 JSON 字符串，因此 ajax 调用正在工作并返回预期数据。在其他浏览器上，成功回调触发并解析 json 并将适当的代码插入到页面上的 div 中。

完整的 javascript 文件： http: [//pastebin.com/G9MYBis5](http://pastebin.com/G9MYBis5)

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T21:41:43.290

好的，所以我的解决方案是将此行作为我的 head 标签中的第一行：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
```

这让 IE10 正常工作，对于 IE9 及以下版本，我只需要制作静态页面，因为我能够在没有 FormData 的情况下上传文件，并且只需从基本的 html 表单提交而不是 AJAX 获取它。为此，我为 IE 用户添加了使用条件注释的提交按钮。

# blogger - Blogger 小部件模板

> ID：15712722
> 
> 赞同：1
> 
> 时间：2013-03-29T22:58:41.053
> 
> 标签：blogger, blogspot

我正在尝试在 Blogger 中使用引导 css，但我看不到如何使用小部件和 b 标签检索帖子标题和正文。

我找到了这个教程[http://thoughtsomething.blogspot.it/2009/01/understanding-blogger-template-1.html](http://thoughtsomething.blogspot.it/2009/01/understanding-blogger-template-1.html)

但它没有提供一个例子。这似乎很难，但不可能，所以我想我错过了一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T09:51:23.733

也许Google 支持上的[Layouts Data Tags](http://support.google.com/blogger/bin/answer.py?hl=en&answer=47270)页面可能会对您有所帮助。

当我修改我的 Blogger 模板时，此页面对我帮助很大，因为它包含：

> 所有此类可用数据的主列表。它按页面元素分为几个部分，因为不同类型的小部件使用不同的数据。

# apache - Mod重写无法正常工作

> ID：15712725
> 
> 赞同：0
> 
> 时间：2013-03-29T22:58:49.133
> 
> 标签：apache, .htaccess, mod-rewrite

我写了一个简单的 mod 重写脚本来`website.com/index.php?var1=1&var2=2&var3=3`变成`website.com/index/1/2/3`. 由于某种原因它不起作用，任何想法为什么？

```
#RewriteRule ^$ index.php [QSA]
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.+)$ $1\.php [QSA]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)$ index.php/$1 [QSA]

RewriteRule ^([a-zA-Z0-9]+)/([a-zA-Z0-9]+)/([a-zA-Z0-9]+)$ comments.php?var1=$1&var2=$2&var3=$3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T01:32:16.867

*   第一条规则重写`index/1/2/3`为`index/1/2/3.php`。
*   然后第二条规则将其重写为`index.php/index/1/2/3.php`
*   最后最后一条规则不匹配。

如果要重写`website.com/index.php?var1=1&var2=2&var3=3`为`website.com/index/1/2/3`，则必须捕获查询字符串参数[`RewriteCond`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond)并将它们插入到[`RewriteRule`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)

```
RewriteEngine on
RewriteCond %{QUERY_STRING} var1=(.*?)&var2=(.*?)&var3=(.*?)
RewriteRule ^index.php$ /index/%1/%2/%3 [L] 
```

如果您想重定向而不是内部重写，即在浏览器中显示新 URL，请`[R,L]`用作 RewriteRule 标志

```
RewriteRule ^index.php$ /index/%1/%2/%3 [R,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T23:08:43.097

It looks like the rewrite on line 6 will catch that and send it to index.php. It's hard to tell not knowing what things are files and directories, but I would guess that it isn't. If you have access to the httpd.conf you can turn up the rewrite logging, set

```
RewriteLogLevel 8 
```

And it will log far more information than you need to debug this. On newer versions of apache the setting is set with LogLevel e.g..

```
LogLevel alert rewrite:trace8 
```

which may be allowed in vhosts or htaccess so look it up in your version's docs.

Don't leave this on as it will seriously impact performance.

# asp.net-mvc - 找不到asp.net mvc4注销链接路由

> ID：15712730
> 
> 赞同：0
> 
> 时间：2013-03-29T22:59:30.667
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-mvc-routing

使用 asp.net mvc4。我无法从我的应用程序中点击 ~/Account/LogOff。默认路由应该捕获它并将其路由到适当的控制器。在 routeconfig.cs

```
routes.MapRoute(
            name: "Home",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        ); 
```

那不应该抓住网址吗？

链接创建代码

```
 @Html.ActionLink("Signout", "LogOff", "Account" , new{controller = "Account"
 , action = "LogOff"}, new{ target = "_self"}) 
```

出于某种让我发疯的原因，我打不中

```
//
    // POST: /Account/LogOff

    [HttpPost]
    [ValidateAntiForgeryToken]
    public ActionResult LogOff()
    {
        var fam = FederatedAuthentication.WSFederationAuthenticationModule;
        fam.SignOut(false);
        SignOutRequestMessage signOutRequest = new SignOutRequestMessage(new Uri(fam.Issuer), fam.Realm);
        return new RedirectResult(signOutRequest.WriteQueryString());

    } 
```

我尝试在“主页”地图路线之前和之后添加路线。两者似乎都不起作用。我到底在这里想念什么？我已经编写了几十个 asp.net mvc 应用程序并且没有遇到这个问题。这让我大吃一惊。请帮忙。

干杯，~ck

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-17T11:36:40.520

原因是因为你有一个`[HttpPost]`. 它的基本意思是它从表单中获取来自提交按钮的请求，但是由于您既不使用提交按钮也不使用表单，因此您的注销操作将被跳过。

您可以通过 2 个原因解决此问题：

1.) 更改`[HttpPost]`为`[HttpGet]`

2.) 只需将链接指向您的操作：

`@Html.ActionLink("Signout", "LogOff", "Account")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T01:33:49.800

您需要`[HttpPost]`从操作中删除属性`LogOff()`。`@Html.ActionLink()`将创建一个常规链接（`<a>`标签），因此单击它将发出 GET 请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T23:31:18.047

哦，我正在通过链接点击获取。方法是post。我将链接包装在表单标签中，然后在链接上单击我照常提交表单。这解决了问题，我能够点击我的控制器方法。

# sqlclr - 尝试从 SQL CLR 内部执行 sql 时出错

> ID：15712731
> 
> 赞同：5
> 
> 时间：2013-03-29T22:59:34.823
> 
> 标签：sqlclr

我有以下代码：

```
[SqlFunction(DataAccess = DataAccessKind.Read, SystemDataAccess = SystemDataAccessKind.Read)]
    public static int GetInt()
    {
        int retValue = 0;
        using (SqlConnection conn = new SqlConnection("context connection = true"))
        {
            conn.Open();
            SqlCommand cmd = conn.CreateCommand();
            cmd.CommandText = "select MyInt from SomeTable";
            object timeOut = cmd.ExecuteReader(); // <- error happen here

        }
        return retValue;

    } 
```

我得到以下异常

```
cmd.ExecuteReader(); 
```

> {“此语句已尝试访问受程序集限制访问的数据。”}

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-12-13T21:14:04.173

作为旁注，如果您尝试访问使用 创建的临时表`#`，例如`#tmp`，您还需要放入`SystemDataAccess = SystemDataAccess.Read`. 解决此问题的另一种方法是使用公用表表达式来获取数据。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-02T18:23:02.263

为了做到这一点，我需要将 DataAccess = DataAccess.Read 添加到函数属性中。

# c - 从一个结构创建多个链表

> ID：15712732
> 
> 赞同：0
> 
> 时间：2013-03-29T22:59:35.417
> 
> 标签：c, data-structures, linked-list

我正在创建一个程序，我从文件中读取信息并在 4 个链接列表之间分配信息。我创建了以下结构来表示信息。

```
struct ListStruct{
  int waitingTime;
  struct ListStruct *next;
}; 
```

我的问题是与这些类型定义有关。虽然第一个定义了结构，但我不确定第二个做了什么。它创建了一个指向 struct 'Patron' 的指针，但是它是 typedef'd 是否意味着任何可以让我在 4 个链表之间轻松移动的东西？如果是这样，利用它的有效方法是什么？

```
typedef struct ListStruct Patron; 
typedef Patron *ListHeadPtr; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T23:06:47.687

> 它是 typedef 是否意味着任何可以让我在 4 个链接列表之间轻松移动的东西？

不，这只是为了方便。

> 如果是这样，利用它的有效方法是什么？

您现在可以将链表传递给函数，如下所示：

```
ListHeadPtr append(ListHeadPtr aList, ListHeadPtr anotherList) {
    ....
} 
```

**附录**

To "cons" an element (i.e. insert it at the start of the list):

```
ListHeadPtr cons(int waitTime, ListHeadPtr list) {
    ListHeadPtr first = malloc(sizeof(Patron));
    if (first == NULL) {
        /* Take evasive action */
    }
    first->waitingTime = waitTime;
    first->next = list;
    return first;
} 
```

# java - 使用 Regex 分析 Java 中的字符串

> ID：15712738
> 
> 赞同：1
> 
> 时间：2013-03-29T22:59:54.317
> 
> 标签：java, regex, string

我创建了一个简单的测验程序，并试图找出一种使用正则表达式返回 3 种类型答案的方法。3 个答案将是完全正确、正确（但拼写错误）和部分正确，但仍被授予正确。

因此，举个例子，与字符串“Elephants”相比，三个字符串是正确的：1.“Elephants”，2.“Elephants”，3.“Elephant”。

第一个字符串是完全正确的，所以会返回“正确答案”。

第二个字符串是正确的，但拼写错误（'a' 而不是 'e'），因此将返回“Correct 尽管拼写为 Elephants”。

第三个字符串部分正确（最后没有's'），但会返回“Answer accepted”

谁能找出我可以用于这种方法的三种正则表达式？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T23:05:53.700

对此没有正则表达式解决方案，但您可以实现“距离算法”来衡量两个单词的相对相似度。一种非常常见的算法是[*Levenshtein Distance*](http://en.wikipedia.org/wiki/Levenshtein_distance)或编辑距离：它告诉您从用户输入的答案到正确拼写的答案需要多少“编辑操作”。替换、插入或删除符号算作一项操作。如果距离为 2 或更小，则用户输入的答案很可能只是拼写错误；如果距离为 3 或更大，则要么是拼写非常糟糕的答案，要么是不正确的答案（两者都应被视为不正确）。

上面链接的维基百科文章具有该算法的伪代码实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T23:07:15.850

第一个匹配的正则表达式：Elephants 如果不匹配，请尝试 Eleph[ae]nt 作为第二个。如果也没有，请尝试大象。

您还可以将其与词尾标记结合使用。

对于测试正则表达式，这个网站真的很酷： http: [//gskinner.com/RegExr/](http://gskinner.com/RegExr/)

使用正则表达式，您必须尝试猜测拼写错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T23:09:42.263

1.  完全正确的正则表达式：

    “大象”

2.  正确，尽管拼写为“大象”正则表达式：“[^E]lephants|E[^l]ephents|El[^e]phants|Ele[^p]hants|Elep[^h]ants|Eleph[^a]nts|大象[^n]ts|大象[^t]s|大象[^s]"

3.  答案接受正则表达式：“lephants|Eephants|Elphants|Elehants|Elephants|Elephnts|Elephnts|Elephats|Elephans|Elephant”

您可以编写一个小程序，它会自动生成验证您的答案的正则表达式并输出您的正则表达式落入的情况

*   正确的
*   正确但拼写错误
*   已接受答案

例如，假设正确答案是“大象”，您可以编写一个例程来测试第二种情况（尽管拼写错误，但正确）。

```
String generateCorrectAltoughMispelledAnswerRegex(final String answer) {
    StringBuilder builder = new StringBuilder();
    String answer = "Elephants";
    for (int i = 0; i < answer.length; i++) {
        String mispelled = answer.substring(0, i) + "[^" + char.at(i) + "]" + 
            (i < length ? answer.substring(i + 1) : "");
        answer.append(mispelled);
        if (i < length - 1) { answer.append("|"); }
    }
    String regex = builder.build();
    return regex;
} 
```

例如：通过使用参数“Elephants”调用函数 generateCorrectAlthoughMispelledAnswerRegex generateCorrectAltoughMispelledAnswerRegex("Elephants")

它将生成用于测试第二种情况的正则表达式：

```
"[^E]lephants|E[^l]ephents|El[^e]phants|Ele[^p]hants|Elep[^h]ants|Eleph[^a]nts|Elepha[^n]ts|Elephan[^t]s|Elephant[^s]" 
```

您可以对其他情况执行相同的操作。

# android - 根据图像大小调整 ImageViews

> ID：15712741
> 
> 赞同：3
> 
> 时间：2013-03-29T22:59:58.073
> 
> 标签：android, image, imageview

我知道这个标题听起来像是重复的，但我认为我在这里有一个非常具体的情况，我无法从我的所有搜索中解决。

首先，我有基于特定监视器（是的，监视器。不是手持设备的屏幕）的特定尺寸的图像。这些图像基于以下特定设置：

*   1600x900 20" 显示器，96ppi

现在，所有图像的大小必须以毫米为单位（顺便说一句，它们是方形图像，因此高度 = 宽度）。使用这些特定设置作为决定因素，1mm = 3.78px。所以，我的图像是使用这个来调整大小的。例如，对于显示为 65 毫米的图像，我将图像大小设置为 246 像素。我使用这些设置在 Photoshop 中对此进行了测试，实际上测量屏幕上的图像确实是正确的。

所以现在在我的 Android 应用程序中，我将这些图像加载`ImageViews`到显示中。这就是我卡住的地方。该设备是 MDPI 设备。如果我将图像加载到 MDPI`drawables`文件夹中，则图像在显示器上显得太大。使用上面的示例，我将其转换`Drawable`为 a`Bitmap`并将图像的高度转储到我的日志中。这是正确的，显示为 246 像素，但由于某种原因，它的测量值远远超过 85 毫米而不是 65 毫米。

如果我将所有图像加载到 HDPI 中（是的，我知道它是一个 mdpi 设备，因此它将由 Android 操作系统调整大小），图像的高度（使用我的示例）转储为 164 像素并出现在大约 50 毫米处。这更容易解释，但我仍然对如何让这些图像像在 Photoshop 中那样出现感到困惑。

**所以我的问题是**，以编程方式将`ImageView`其大小调整为图像的确切大小的最佳方法是什么？对于我的示例，我需要找出为什么我的 246px 方形图像（96ppi）没有像应有的那样显示为 65mm。

因为这些`ImageView`s 是通过编程方式生成的，所以我尝试了以下两件事：

1.  将`ImageView`高度和宽度（使用`LayoutParams`）设置为图像的高度（246 像素）。我这样做的想法`WRAP_CONTENT`是没有按照应有的方式行事。
2.  用于`ImageView.ScaleType.CENTER`尝试确保`ImageView`尺寸与图像完全一致。

这些东西似乎都没有影响输出。

**更新：**

我已验证我的设备是 MDPI 设备。这意味着由于 1:1 的关系，不需要 DPI 到 PX 的转换（反之亦然）。在某个地方，尺寸正在增加，我无法确定在哪里。正如我在下面答案的评论中指出的那样，当我拉出我的 Drawable 并将其转换为位图时，它会拉出我制作的精确像素高度。我开始计算与应有的尺寸差异的百分比（65mm 与 85mm），结果为 23.529%。我正在缩放我的位图减去这个值，但它破坏了我的图像质量。

我开始放弃了。

我正在使用的设备是 MK802III Rockchip 设备（[亚马逊链接](https://rads.stackoverflow.com/amzn/click/com/B00A0I4YJK)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T23:39:22.943

Android 使用以下公式修改所有要显示的图像：

```
px = dp * (dpi / 160) 
```

其中“dpi”是设备显示屏的每英寸点数的屏幕密度。

`drawable`此外，Android在决定显示哪个图像时会查看文件夹的层次结构。众所周知，HDPI 设备将使用`drawale-hdpi`文件夹中的图像，而 MDPI 设备将显示`drawable-mdpi`目录中相同的命名图像。

但是，当 MDPI 设备在目录中找不到图像时`drawable-mdpi`，它最终会从`drawable-hdpi`文件夹中进行选择，但会缩小图像以显示在 MDPI 屏幕上。

这解释了为什么当您将图像保存在`drawable-hdpi`文件夹中时，它会显得更小。

`drawable-mdpi`但是，它没有解释为什么图像在正确放置在文件夹中时显得太大。

碰巧的是：

> 65mm ~= 85mm * (120 / 160)
> 
> 50mm ~= 85mm * (120 / 240)

This is the scaling that I would expect for your images if your device were LDPI (120dpi) instead of MDPI (160dpi) as reported.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T11:43:46.943

I hate answering my own question, but I am just going to update everyone what I did. If someone comes up with a better solution, I am all ears. I had to force this along because I am on a tight deadline.

I created a dummy application that dumped boxes that I could measure. Using these, I determined that 1 millimeter is 3 density pixels. Let me repeat that, **1mm = 3dp**.

Using this value, I resized all of my images (utilizing a PHP script) to this constraint. All of my images are appearing as normal. 195dp = 65mm, and it appears as such.

Like I said, any explanation as to why I had to do this and you get an upvote and answer.

# android - 单击按钮时将图像添加到gridview

> ID：15712747
> 
> 赞同：0
> 
> 时间：2013-03-29T23:00:22.477
> 
> 标签：android

我按照 android 教程（链接： http: [//developer.android.com/guide/topics/ui/layout/gridview.html](http://developer.android.com/guide/topics/ui/layout/gridview.html)）制作图像视图。

我只想显示 10 张图像并制作一个按钮，单击此按钮会将 10 幅图像添加到网格中。

我可以这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T23:25:17.110

这是一个这样做的想法。

1.  更改`Integer[] mThumbIds`为动态数组，例如`ArrayList<Integer> mThumbIds`（编辑：还需要将所有相关方法更改为`ArrayList`方法）
2.  创建一个函数，以便向Activity`ImageAdapter`添加更多项目并更轻松地处理它。`ArrayList<Integer> mThumbIds`
3.  在适配器初始化时，为适配器保留一个实例，而不是`gridview.setAdapter(new ImageAdapter(this));`使用类似的东西： ````
    // ImageAdapter myadapter;// a field of the activity
    myadapter = new ImageAdapter(this);
    gridview.setAdapter(myadapter);
    // ...
    myadapter.methodToAddMoreItems(itemCollection); // when you need to add the items.
    ```` 

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T04:17:10.010

[https://github.com/commonsguy/cwac-endless](https://github.com/commonsguy/cwac-endless)。你需要的是一个无尽的适配器。有足够的工作空间。如果您仍然难以在 stackoverflow 中使用 commonsware 和 android 作为问题的标签提出问题。

# mysql - LOAD DATA INFILE 艰难查询

> ID：15712750
> 
> 赞同：0
> 
> 时间：2013-03-29T23:00:33.910
> 
> 标签：mysql, sql

我有以下查询，有效：

```
 mysql -u root --local-infile=1 home -e "
    LOAD DATA LOCAL INFILE '$1'
    INTO TABLE $TABLE_NAME
    FIELDS TERMINATED BY ',' 
      (size, @d2, @d3, @d4, @d5, path, @d6)
    SET last_modified=str_to_date(
      CONCAT(@d2, ',', @d3, ',', @d4, ',', @d5), '%b,%d,%T,%Y') 
```

我还需要设置一个名为`volume`= 1 的列。这是我尝试过的：

```
 mysql -u root --local-infile=1 home -e "
    LOAD DATA LOCAL INFILE '$1'
    INTO TABLE $TABLE_NAME
    FIELDS TERMINATED BY ',' 
      (size, @d2, @d3, @d4, @d5, path, @d6)
    SET last_modified=str_to_date(
      CONCAT(@d2, ',', @d3, ',', @d4, ',', @d5), '%b,%d,%T,%Y') 
    and SET volume=1;" 
```

虽然我得到一个 sql 错误。上面更新的正确方法是`volume=1`什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T23:04:29.053

语法应该是：

```
 mysql -u root --local-infile=1 home -e "
    LOAD DATA LOCAL INFILE '$1'
    INTO TABLE $TABLE_NAME
    FIELDS TERMINATED BY ',' 
      (size, @d2, @d3, @d4, @d5, path, @d6)
    SET last_modified=str_to_date(
      CONCAT(@d2, ',', @d3, ',', @d4, ',', @d5), '%b,%d,%T,%Y') 
    ,volume=1;" 
```

它应该使用标准`UPDATE`语句语法，其中您的 SET 选项以逗号分隔

```
...
SET last_modified=blah, volume=1 
```

正如 Barmar 所说，这里是 MySQL 文档的链接`LOAD DATA`：[http ://dev.mysql.com/doc/refman/5.1/en/load-data.html](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

# ruby-on-rails - 为具有多态关系的模型设计控制器

> ID：15712758
> 
> 赞同：1
> 
> 时间：2013-03-29T23:01:25.647
> 
> 标签：ruby-on-rails, ruby, devise, polymorphism

tl;博士：

Devise::RegistrationsController 不实例化关联的多态模型，解决这个问题的最佳方法是什么？

设置：

我有一个地址模型，我与不同的实体（例如一个人、一个企业）相关联，因此使用了多态关系：

```
class Person < ActiveRecord::Base
    has_one :address, :as => :addressable
    accepts_nested_attributes_for :address # to make fields_for work
end

class Address < ActiveRecord::Base
    belongs_to :addressable, :polymorphic => true
end 
```

我使用 Person 模型作为 Devise 模型，但在注册新帐户时遇到了地址对象未实例化或保存的问题。

Person 控制器，据我所知，它已被 Devise RegistrationController（路由：）所取代，它`new_person_registration GET /person/sign_up(.:format) devise/registrations#new`有代码来实例化在我开始使用 Devise 之前用来完成这个技巧的各个对象：

```
class PeopleController < ApplicationController
    [...]
    def create
        @person = Person.new(params[:person])
        @person.address = Address.new(params[:address])
        [...some checking...]
        @person.save
        @person.address.save

    end
    def new
        @person = Person.new
        @person.address = Address.new
    end

end 
```

现在似乎 Devise::RegistrationsController 没有创建 Address 对象。

一种建议的解决方案是使用回调来初始化对象，因此我的人模型具有：

```
before_create :instantiate_all
before_save :save_all

def save_all
    self.address.save
    self.save 
end

def instantiate_all
    if self.address.nil?
        self.address = Address.new
    end
end 
```

有了这个，我仍然得到

```
NoMethodError (undefined method `address' for nil:NilClass):
    app/models/person.rb:25:in `save_all' 
```

我正在考虑覆盖 RegistrationController 但似乎通过调用`super`我将执行相应父方法的整个块，因此将无法插入我想要的操作。

最后，重写控制器，复制它的代码并添加我的代码似乎太错误了，不能成为完成这件事的唯一方法。

我很感激你们的想法。

# c - c 可变参数函数混淆

> ID：15712760
> 
> 赞同：1
> 
> 时间：2013-03-29T23:01:29.023
> 
> 标签：c, function, macros, ellipsis, variadic

我试图弄清楚 va_start(), va_​​arg() 宏的背后是什么。下面的代码运行良好。

```
#include <iostream>
#include <cstdarg>

void f(double a, double b, ...)
{
   va_list arg;
   va_start(arg, b);
   double d;
   while((d = va_arg(arg, double)) != 0)
      {
         std::cout << d << '\n';
      }
}

int main(int argc, char *argv[])
{
   f(1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 0.0);
   return 0;
} 
```

正如我所料，它给出了这样的输出：3 4 5 6 7 8 9。然后我找到了那个宏的定义（在互联网上，因为我的头文件 stdarg.h 很神秘——它定义了宏 va_arg(v, l) 像 _builtin_va_arg( v，l），最后一个没有在其中定义，stdarg.h 不包含任何内容，所以它在某个库中？？？）。然而，代替“cstdarg”，我写道：

```
typedef char* va_list;

#define _INTSIZEOF(n) \
((sizeof(n)+sizeof(int)-1) &~(sizeof(int)-1))

#define va_start(ap,v) \
(ap = (va_list)&v + _INTSIZEOF(v))

#define va_arg(ap,t) \
(*(t*)((ap += _INTSIZEOF(t)) - _INTSIZEOF(t)))

#define va_end(ap) (ap = (va_list)0) 
```

输出变得很奇怪，例如 1 -0.0409377 -0.0409377 4.88084e-270 4.85706e-270 1 2 3 4 5 6 7 8 9。我认为可变参数放在最后声明的参数旁边，但显然还有更复杂的情况。如果有人揭露我错在哪里或那里真正发生了什么，我会非常高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T23:50:18.327

您的手写宏将在始终传递堆栈上的所有参数并将较小类型填充到 sizeof(int) 的机器上工作。然而，许多机器（现在大多数？）不会在堆栈上传递参数——而是将它们传递到寄存器中，并且只有在有太多无法放入寄存器时才使用堆栈。

因此，为了处理 va_args，编译器需要知道 ABI 以及在什么情况下将哪些参数放在哪里。通常要做的是让 va_list 包含许多数组（足以容纳所有可能包含 args 的寄存器）和许多指针（通常，每种类型的寄存器一个，堆栈一个。va_start 转储所有参数寄存器到数组中并初始化指针，然后 va_arg 计算出将传入给定参数类型的寄存器类型并将值拉出适当的位置。因此，对于具有 8 个整数/指针参数和8个用于浮点/双参数的regs，你可能会有类似的东西：

```
typedef struct {
    intptr_t iregs[8], *iptr;
    double   fregs[8], *fptr;
    char     *spptr;
} va_list;

inline void _builtin_va_start(va_list &ap, arg) {
    // dump the registers might be used to pass args into ap->iregs and ap-fregs,
    // setup iptr and fptr to point into iregs and fregs after the arguments that
    // correspond to 'arg' and those before it.  spptr points into the stack space
    // used for arguments after regs run out
}
inline _builtin_va_arg(va_list &ap, type) {
    if (type is integer or pointer) {
        if (ap->iptr == ap->iregs+8) {
            rv = *(type *)ap->spptr;
            ap->spptr += sizeof(type);
        } else {
            rv = *ap->iptr++;
        }
    } else if (type is float or double) {
        if (ap->fptr == ap->fregs+8) {
            rv = *(type *)ap->spptr;
            ap->spptr += sizeof(type);
        } else {
            rv = *ap->fptr++;
        }
    } else {
        // some other type (struct?) deal with it
    }
} 
```

请注意，这些`_builtin_va`函数都不能用 C 编写；它们需要内置到编译器中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T23:09:16.083

The `va_start`, `va_arg` and don't forget `va_end` are specific for a compiler. You can not just take them from somewhere else and expect them to work. You'd better follow the manual page in using them and only try to understand their inner workings if you are a compiler engineer.

P.S: Oh, and their definitions are usually very mysterious using subtle tricks to get it working.

P.S2: In answer to your question where `_builtin_va_arg` is defined: it is known by the compiler, a so called *builtin*. You will find it in the sources of the compiler ;)

# python - 猪 udf 中 python 代码的正确输入/输出？

> ID：15712761
> 
> 赞同：0
> 
> 时间：2013-03-29T23:01:39.200
> 
> 标签：python, hadoop, apache-pig

我有这个简短的 python 脚本：

```
import langid
import sys

for pig_tuple in sys.stdin:
    cols = pig_tuple.split()

    if len(cols) < 2:
        sys.exit(0)

    try:
        id = int(cols[0])
        text = " ".join(cols[1:])
    except:
        sys.exit(0)

    (lang,prob) = langid.classify(text)
    print "%s\t%s" %(id,lang)

sys.exit(0) 
```

我想在猪脚本中运行它。我试过了：

```
define langid_cmd `python2.6 /data/test/compiled_python/langid_command_line.py` ship('/data/test/compiled_python/langid_command_line.py');

text = LOAD '$PIG_INPUT' USING PigStorage() as (text:chararray);

pythonDetect1 = STREAM text through langid_cmd AS (pid:chararray,planguage:chararray); 
```

但我得到：

```
2013-03-29 15:53:22,290 [main] INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - Failed!
2013-03-29 15:53:22,303 [main] ERROR org.apache.pig.tools.grunt.GruntParser - ERROR 2999: Unexpected internal error. java.lang.String cannot be cast to org.apache.pig.data.Tuple
Details at logfile: /home/isl/ryan/src/main/pigScripts/pig_1364597410350.log
2013-03-29 15:53:22,306 [main] ERROR org.apache.pig.tools.grunt.GruntParser - ERROR 2999: Unexpected internal error. java.lang.String cannot be cast to org.apache.pig.data.Tuple
Details at logfile: /home/isl/ryan/src/main/pigScripts//src/main/pigScripts/pig_1364597410350.log
2013-03-29 15:53:22,308 [main] ERROR org.apache.pig.tools.grunt.GruntParser - ERROR 2999: Unexpected internal error. java.lang.String cannot be cast to org.apache.pig.data.Tuple
Details at logfile: /home/isl/ryan/src/main/pigScripts//src/main/pigScripts/pig_1364597410350.log
2013-03-29 15:53:22,311 [main] ERROR org.apache.pig.tools.grunt.GruntParser - ERROR 2999: Unexpected internal error. java.lang.String cannot be cast to org.apache.pig.data.Tuple
Details at logfile: /home/isl/ryan/src/main/pigScripts/src/main/pigScripts/pig_1364597410350.log
2013-03-29 15:53:22,313 [main] ERROR org.apache.pig.tools.grunt.GruntParser - ERROR 2999: Unexpected internal error. java.lang.String cannot be cast to org.apache.pig.data.Tuple
Details at logfile: /home/isl/ryan/src/main/pigScripts/src/main/pigScripts/pig_1364597410350.log 
```

目录 /data/test/compiled_python 被修改为 777，当我从 shell 运行它时：

```
-bash-3.2$ echo 14353 I can haz pigscriptz? | python /data/test/compiled_python/langid_command_line.py 
14353   eu 
```

??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T14:41:05.623

`AS (pid:chararray,planguage:chararray)`告诉 pig 期望输出是字符串元组，但您返回制表符分隔的字符串。您应该将结果打印为

```
print "(%s,%s)" %(id,lang) 
```

[或使用 python UDF 集成](http://pig.apache.org/docs/r0.11.0/udf.html#python-udfs)

# computer-science - A-Star算法细节

> ID：15712770
> 
> 赞同：0
> 
> 时间：2013-03-29T23:02:33.880
> 
> 标签：computer-science, graph-algorithm, a-star

我开始使用 A* 算法，但我不知道它是如何详细工作的。

例如，我有一个图表，它是：

A -> B = 9（不是最初错误询问的 90）

A -> C = 20

C -> D = 40

现在我想从 A 开始并使用提到的路径去 D。

如果我使用这个启发式函数： h(n) = 直接方式到 D 的距离 B 和 D 之间的直接距离为 2，但 B 和 D 之间没有任何路径。

我想知道的是：

A* 算法是不是先到 B 再回到 A （因为 B 和 D 之间没有任何路径（目标）？

还是我的启发式函数不可接受？（但我在教科书上见过，没关系）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T23:07:26.427

Well, you should give us more details on your function.

Generally speaking, A* should return the path if it exists, so you may treat a non-existing path as a infinite-cost or just as a "stop-here" sign. When you reach the end of the path without reaching the destination, you roll back to the previous node with other possibilities. So the answer to your first question is 'yes'.

# ruby - 使用特殊字符从 ruby 哈希中提取字段

> ID：15712773
> 
> 赞同：0
> 
> 时间：2013-03-29T23:02:39.200
> 
> 标签：ruby, hash, pdf-generation

我正在努力使用 origami.pdf 将 pdf 签名变为可见，同时我注意到我的签名是一个哈希，所以我尝试捕获诸如“位置”、“原因”、“日期”、“联系信息”之类的字段.

```
{/Type=>/Sig, /Contents=>"0\x82\a\xAE\x06\t*\x86H\x86\xF7\r\x01\a\x02\xA0\x82\a\
x9F0\x82\a\x9B\x02\x01\x011\v0\t\x06\x05+\x0E\x03\x02\x1A\x05\x000#\x06\t*\x86H\
x86\xF7\r\x01\a\x01\xA0\x16\x04\x14\xEF8uEn1@\x11M\x95\xE4\xD7\x9C\xFE(\xCF\xB7\
x92\x01\xC2\xA0\x82\x05\x970\x82\x05\x930\x82\x04{\xA0\x03\x02\x01\x02\x02\x04Bo
\x93\x8C0\r\x06\t*\x86H\x86\xF7\r\x01\x01\x05\x05\x000>1\v0\t\x06\x03U\x04\x06\x
13\x02pt1\x150\x13\x06\x03U\x04\n\x13\fMULTICERT-CA1\x180\x16\x06\x03U\x04\x03\x
13\x0FMULTICERT-CA 020\x1E\x17\r130320170147Z\x17\r140320164736Z0\x81\xA51\v0\t\
x06\x03U\x04\x06\x13\x02PT1\x150\x13\x06\x03U\x04\n\x13\fMULTICERT-CA1\x160\x14\
x06\x03U\x04\v\x13\rCERTIPOR - RA1\x120\x10\x06\x03U\x04\v\x13\tCorporate1 0\x1E
\x06\x03U\x04\v\x13\x17ESCRITA INTELIGENTE LDA1\x180\x16\x06\x03U\x04\v\x13\x0FW
eb Application1\x170\x15\x06\x03U\x04\x03\x13\x0ERECIBOS ONLINE0\x81\x9F0\r\x06\
t*\x86H\x86\xF7\r\x01\x01\x01\x05\x00\x03\x81\x8D\x000\x81\x89\x02\x81\x81\x00\x
AC\xCE\xA4\x06\x901\xB5x\x89lE\rw\xC8<\x13\xDDu\xC6h\xBF'b6\x8D\xB0\xA0\xB1Y\e\x
18\x00\xE5\x8C\x1A\xCD\xBB%\xDA\x15P\x1A\xF91\xF9\xF6\xBA\xE0\xF8\xF6LH\x16\x86\
xE9Y\xDE\x00Z\xEC\x82\xB3=\r2fP7\xD1\x8B\xF3k\xF7|MVb\fB\xFB\xBA\x92\xD3\xFF9\x7
F\x9D\x83w\xFE\xAB\xBA\x93G\x8F\xCE\xF0\t!d\x83\xD3F\xAC\xCCv\xCA\x10\xC9\xB8e;\
x80\xB8\xF6\xEBI\xBD\x93\x89zC\xDF\x06-\r\x9E\xD3\x02\x03\x01\x00\x01\xA3\x82\x0
2\xB30\x82\x02\xAF0\v\x06\x03U\x1D\x0F\x04\x04\x03\x02\x03\xF808\x06\b+\x06\x01\
x05\x05\a\x01\x01\x04,0*0(\x06\b+\x06\x01\x05\x05\a0\x01\x86\x1Chttp://ocsp.mult
icert.com/ca0\x81\xE0\x06\x03U\x1D \x04\x81\xD80\x81\xD50M\x06\t+\x06\x01\x04\x0
1\xB0<\n\x020@0>\x06\b+\x06\x01\x05\x05\a\x02\x01\x162http://www.multicert.com/c
ps/multicert-ca-cps.html0\x81\x83\x06\v+\x06\x01\x04\x01\xB0<\n\x02\x88\x060t0r\
x06\b+\x06\x01\x05\x05\a\x02\x020f\x1Ed\x00h\x00t\x00t\x00p\x00:\x00/\x00/\x00w\
x00w\x00w\x00.\x00m\x00u\x00l\x00t\x00i\x00c\x00e\x00r\x00t\x00.\x00c\x00o\x00m\
x00/\x00c\x00p\x00/\x00m\x00u\x00l\x00t\x00i\x00c\x00e\x00r\x00t\x00-\x00c\x00a\
x00-\x001\x000\x003\x000\x00.\x00h\x00t\x00m\x00l0\x11\x06\t`\x86H\x01\x86\xF8B\
x01\x01\x04\x04\x03\x02\x04\xB00 \x06\x03U\x1D\x11\x04\x190\x17\x81\x15info@reci
bosonline.pt0\x82\x01\x01\x06\x03U\x1D\x1F\x04\x81\xF90\x81\xF60\x81\x9A\xA0\x81
\x97\xA0\x81\x94\x86/http://www.multicert.com/ca/multicert-ca-02.crl\x86aldap://
ldap.multicert.com/cn=MULTICERT-CA%2002,o=MULTICERT-CA,c=PT?certificateRevocatio
nList?base0W\xA0U\xA0S\xA4Q0O1\v0\t\x06\x03U\x04\x06\x13\x02pt1\x150\x13\x06\x03
U\x04\n\x13\fMULTICERT-CA1\x180\x16\x06\x03U\x04\x03\x13\x0FMULTICERT-CA 021\x0F
0\r\x06\x03U\x04\x03\x13\x06CRL2950\x1F\x06\x03U\x1D#\x04\x180\x16\x80\x14\x1D\x
C3\xB9\x88\xA5\x18\xBE`\xA7,\xA6c\xCAf*\xFC\f'\xC1\xBD0\x1D\x06\x03U\x1D\x0E\x04
\x16\x04\x14\x06\xD8\x1Fr6a\x9E\xEB\x176\x9C)\x9E-t\xFF\xD080\x190\t\x06\x03U\x1
D\x13\x04\x020\x000\r\x06\t*\x86H\x86\xF7\r\x01\x01\x05\x05\x00\x03\x82\x01\x01\
x00AQ\x1F\xCD\\ua\x98\e\rT2kW\xF7\xB8|CZ\xAC\xB7\xA2\x96(\bv\x83\x13\x89*\xB1@r7
\xE9WW{\x87T\x14\xDE\x81\nA2?\x9E\nv\x8E\x9A\xC4\\\x0Ff\xAE\t<2\xC1\x14S\xC6F?\x
85o\xEFb\xE2x!\x13M\xD0\x9Fu \x80\x00\x04\x0E\x89\xA8\x14\xE60\x96#\xC5\xD0Ac\xC
0<\xFD\xE31S\x90\x8A\xC3\xDF\xCA[\x1Cf\xC3\xDC\xB8\x96D\xA3\x03\x0F\xE7\x94\xD5\
v\xD2U\xD3\x96SZz\xF2g\xC3\xA58\x14{\x93q\xD0_#\xD8\xCAH\x1A\xEB\xC7\xD7\xA7\xD9
|.\x7F\xB5\xABI\xC4\xE4UNH\x00d\x8B\xC7k\x1A\xF5a*\x1D\x93a\xD1r\bNpi\t(\xA9\x11
\xFC \x983\xC5\x06!\x9C\xF1\x86\xB6P{Y\x9EL\x0FB\xF3\xBF#\xC2\xB8\xF0\xA0x\xD0\x
1D\x9B\xF5\xFDGF\xD9rS\xEEO\xE8\xF4rH\x9B=\xC2opr\xC6Xr\x18\x82[\xB3\x06\x10t\xB
9\xC2@\xF8\x92\x8D6\xFE\xFC\x0Fp\x88\x97u,\xD9F1\x82\x01\xC70\x82\x01\xC3\x02\x0
1\x010F0>1\v0\t\x06\x03U\x04\x06\x13\x02pt1\x150\x13\x06\x03U\x04\n\x13\fMULTICE
RT-CA1\x180\x16\x06\x03U\x04\x03\x13\x0FMULTICERT-CA 02\x02\x04Bo\x93\x8C0\t\x06
\x05+\x0E\x03\x02\x1A\x05\x00\xA0\x81\xD80\x18\x06\t*\x86H\x86\xF7\r\x01\t\x031\
v\x06\t*\x86H\x86\xF7\r\x01\a\x010\x1C\x06\t*\x86H\x86\xF7\r\x01\t\x051\x0F\x17\
r130329223127Z0#\x06\t*\x86H\x86\xF7\r\x01\t\x041\x16\x04\x14\x93\xD9l\xBD68\xDB
*M\xADY\xF8\x8F<\x8E\x94m\xACS\xAE0y\x06\t*\x86H\x86\xF7\r\x01\t\x0F1l0j0\v\x06\
t`\x86H\x01e\x03\x04\x01*0\v\x06\t`\x86H\x01e\x03\x04\x01\x160\v\x06\t`\x86H\x01
e\x03\x04\x01\x020\n\x06\b*\x86H\x86\xF7\r\x03\a0\x0E\x06\b*\x86H\x86\xF7\r\x03\
x02\x02\x02\x00\x800\r\x06\b*\x86H\x86\xF7\r\x03\x02\x02\x01@0\a\x06\x05+\x0E\x0
3\x02\a0\r\x06\b*\x86H\x86\xF7\r\x03\x02\x02\x01(0\r\x06\t*\x86H\x86\xF7\r\x01\x
01\x01\x05\x00\x04\x81\x803]\xBC\xA2\xC5\x0F&\r\x94\x96\xD5\xBD\xF2\x96\xB3\x86\
x9D\x01\xA3{5\xEC\xA5\xEC\x8B=\r\xD7%w0o\x9C\x7F\v\x17YX\x80\xAF\x1A\x8F\x1E\xBB
e\xBCp4\xF7\x80\x89b&?\xCE<\xCC\x8D\xFE\xEFK\x86\x0F\xD8Q\xFFU\x04\x11E\t\xED\xC
9=WF\x93\x10w\xC6g\xD4\e`\xE5\xB5{Ax~%\xE9\x92\xF5\x01\x19\xCDS\xE1|%\"\xB2\xC6\
x107\xE9\xF7M\xD7\xA3\x11MJ\xAF\x03\x0F\xFF\x8D:s\x84g\xB6\xD5o\xAF\xB0\x00\x00\
x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\
x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\
x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\
x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\
x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\
x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\
x00\x00\x00\x00\x00\x00", /Filter=>/Adobe.PPKMS, /SubFilter=>/adbe.pkcs7.sha1, /
ByteRange=>[0, 12883, 17081, 1098], /Location=>"Portugal", /ContactInfo=>"email@email.com", /Reason=>"Proof of Concept", /M=>"D:20130329223127Z00'00", /P
rop_Build=>{/Filter=>{/Name=>/Adobe.PPKMS, /R=>131101, /Date=>"2013-03-29 22:31:
27 +0000"}, /SigQ=>{/Preview=>false, /R=>131101}, /PubSec=>{/NonEFontNoWarn=>fal
se, /Date=>"2013-03-29 22:31:27 +0000", /R=>131101}, /App=>{/TrustedMode=>false,
 /OS=>[/Win], /R=>458752, /Name=>/Exchange-Pro}}} 
```

如果我提取密钥（`pdf.signature.keys`），我得到

```
/Type
/Contents
/Filter
/SubFilter
/ByteRange
/Location
/ContactInfo
/Reason
/M
/Prop_Build 
```

现在，我如何获得这些键的内容？

我不能简单地做`pdf.signature[/Location]`，因为 ruby​​ 说这是一个语法错误......

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T01:17:35.597

由于使用 /Location 生成 Origami::Name 对象似乎很难，我用不同的方法解决了这个问题：

```
location = pdf.signature[pdf.signature.keys[5]] 
```

输出返回`Portugal`，这是我将采用的方法，因为数组的键位置应该是静态的。

不过，我希望有一个更优雅的解决方案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T03:20:03.173

I took a look at the source for origami-pdf, and it seems that the `/` prepending every key in that output is generated on-the-fly from `Origami::Name.to_s`. Also looking at its [`eql?`](https://code.google.com/p/origami-pdf/source/browse/lib/origami/name.rb#98) definition it seems like it just compares it to the underlying string value. So this should work, have you tried it?

```
signature[Origami::Name.new('Location')] 
```

# python - 将上下文变量传递给 URL 参数

> ID：15712776
> 
> 赞同：0
> 
> 时间：2013-03-29T23:02:52.073
> 
> 标签：python, django

我想动态生成一个类似于这样的链接：

```
<a href="{% url 'my_app.views.page1' %}"> 
```

我想要的视图变量包含在上下文变量中`nextURL`。所以我创建了一个如下所示的语句：

```
<a href="{% url '{{ nextURL }}' %}"> 
```

但这会导致此错误：

```
Reverse for '{{ nextURL }}' with arguments '()' and keyword arguments '{}' not found. 
```

去掉周围的引号`{{ nextURL }}`会产生类似的结果。有没有办法做到这一点？我不想硬编码到视图的链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T23:04:04.870

简直了`<a href="{% url nextURL %}">`。

# php - PHPUnit：如何测试以不正确的顺序调用方法？

> ID：15712777
> 
> 赞同：7
> 
> 时间：2013-03-29T23:02:52.007
> 
> 标签：php, mocking, phpunit

我想使用 PHPUnit 来测试方法是否以正确的顺序调用。

我`->at()`在模拟对象上使用的第一次尝试没有奏效。例如，我预计以下操作会失败，但事实并非如此：

```
 public function test_at_constraint()
  {
    $x = $this->getMock('FirstSecond', array('first', 'second'));
    $x->expects($this->at(0))->method('first');
    $x->expects($this->at(1))->method('second');

    $x->second();
    $x->first();
  } 
```

如果事情以错误的顺序调用，我能想到的唯一方法是这样的：

```
 public function test_at_constraint_with_exception()
  { 
    $x = $this->getMock('FirstSecond', array('first', 'second'));

    $x->expects($this->at(0))->method('first');
    $x->expects($this->at(1))->method('first')
      ->will($this->throwException(new Exception("called at wrong index")));

    $x->expects($this->at(1))->method('second');
    $x->expects($this->at(0))->method('second')
      ->will($this->throwException(new Exception("called at wrong index")));

    $x->second();
    $x->first();
  } 
```

有没有更优雅的方法来做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T14:51:46.333

您需要参与任何`InvocationMocker`事情以使您的期望发挥作用。例如这应该工作：

```
public function test_at_constraint()
{
    $x = $this->getMock('FirstSecond', array('first', 'second'));
    $x->expects($this->at(0))->method('first')->with();
    $x->expects($this->at(1))->method('second')->with();

    $x->second();
    $x->first();
} 
```

# devexpress - 批量更新 DevExpress GridView 中的列

> ID：15712781
> 
> 赞同：0
> 
> 时间：2013-03-29T23:03:16.510
> 
> 标签：devexpress

我已经阅读了有关该主题的所有在线阅读内容，并且所提出的解决方案均无效。

我的情况很简单...

我有一个加载数据的网格....

加载网格后，用户可以编辑特定列并更改字段的值（参见下面的代码片段）： 请注意，在网格数据绑定后，我检查 VisibleRowCount 属性并获得 1057 行。

```
<dx:GridViewDataTextColumn Caption="Charge" FieldName="Charge" Width="100px" CellStyle-HorizontalAlign="Right" PropertiesTextEdit-DisplayFormatString="{0:c2}" VisibleIndex="4">
 <DataItemTemplate>
 <dx:ASPxTextBox ID="ASPxCharge" runat="server" Width="75px" Text='<%# Eval("Charge") %>'>
 </dx:ASPxTextBox>
 </DataItemTemplate>
 </dx:GridViewDataTextColumn> 
```

此时，单击表单上的一个按钮以执行我想要执行以下操作的代码隐藏方法：我只需要一种方法来逐一遍历网格上的所有行并更新修改后的值在我的数据库中。请注意，我可以处理该值是否已被修改。我需要的只是访问行和特定列以获取修改后的值。

我尝试在我的代码隐藏方法中使用 VisibleRowCount 属性，但该值的计算结果为 0。显然，在回发后，VisibleRowCount 属性设置回 0，因此我无法循环遍历网格集合。我尝试将值保存在 ViewState 中，但 VisibleRowCount 属性显然是只读的。

```
int visibleRowCount = Utility.GetValue<int>(ViewState["VisibleRowCount"]);
                    for (int i = 0; i < visibleRowCount; i++)
                    {
                        DataRow aspxDataRow = updateItemsGridView.GetDataRow(i);

                        Array arr = aspxDataRow.ItemArray; 
```

我怎样才能完成这个明显的简单问题？？？

​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T23:46:12.620

不知道你为什么这样做，但你可以尝试将它们放在一个列表中。

```
List<int> ids = new List<int>();
for (int i = 0; i < updateItemsGridView.VisibleRowCount; i++)
{
     ids.Add(Convert.ToInt32(updateItemsGridView.GetRowValues(i, "Charge")));
} 
```

# java - Java Arraylist 上的操作运行时间是多少？

> ID：15712784
> 
> 赞同：4
> 
> 时间：2013-03-29T23:03:24.867
> 
> 标签：java, arraylist, runtime, complexity-theory

似乎一些非常常用的类没有官方基准，例如[ArrayList](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)。

我在运行时找不到插入或删除的文档。与类似于 ArrayList 的 Python 的[List](http://wiki.python.org/moin/TimeComplexity)相比，有一个有据可查的运行时复杂性（参见上面的链接）。

[这篇文章](https://stackoverflow.com/questions/6101789/why-does-javas-arraylists-remove-function-seem-to-cost-so-little)给出了一些关于从 ArrayList 中删除和复制元素的详细基准，但它仍然没有给出确切的复杂性分析。我正在处理一个需要极长数据（约 500,000 个数据点）的项目，所以我不能坐视不管，从 ArrayList 中删除或插入数据就像魔术一样在恒定时间内运行。**我在哪里可以找到这些信息？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T23:08:10.270

有关 Java 复杂性的一些快速参考：

*   [http://www.coderfriendly.com/wp-content/uploads/2009/05/java_collections_v2.pdf](http://www.coderfriendly.com/wp-content/uploads/2009/05/java_collections_v2.pdf)
*   [http://infotechgems.blogspot.com/2011/11/java-collections-performance-time.html](http://infotechgems.blogspot.com/2011/11/java-collections-performance-time.html)

但实际上，没有什么比寻找源头更好的了，可以在[这里](http://hg.openjdk.java.net/jdk7/jdk7-gate/jdk/file/tip/src/share/classes/java/util/ArrayList.java)找到。

* * *

例如，关于添加到 ArrayList 的特定问题，我们可以看到：

```
public boolean add(E e) {
           ensureCapacityInternal(size + 1);  // Increments modCount!!
           elementData[size++] = e;
           return true;
       } 
```

此操作的复杂性显然取决于*ensureCapacityInternal*：

```
private void ensureCapacityInternal(int minCapacity) {
               modCount++;
               // overflow-conscious code
               if (minCapacity - elementData.length > 0)
                   grow(minCapacity);
           } 
```

这取决于*成长*：

```
private void grow(int minCapacity) {
           // overflow-conscious code
           int oldCapacity = elementData.length;
           int newCapacity = oldCapacity + (oldCapacity >> 1);
           if (newCapacity - minCapacity < 0)
               newCapacity = minCapacity;
           if (newCapacity - MAX_ARRAY_SIZE > 0)
               newCapacity = hugeCapacity(minCapacity);
           // minCapacity is usually close to size, so this is a win:
           elementData = Arrays.copyOf(elementData, newCapacity);
       } 
```

所以我们可以看到增长操作是有条件地发生的，并且在许多情况下，添加操作将是一个 O(1) 操作。但是您也可以从中看到数组何时增长的详细*信息*。

# powershell - Powershell 计划作业将无法启动

> ID：15712785
> 
> 赞同：0
> 
> 时间：2013-03-29T23:03:25.323
> 
> 标签：powershell, powershell-3.0

powershell 3 中的新预定作业看起来很棒，但令我恐惧的是，我无法让它们工作。

```
Register-ScheduledJob -FilePath V:\scripts\testJob.ps1 -Name Test
$t = New-JobTrigger -At 6PM -Once
Add-JobTrigger -Trigger $t -Name Test 
```

我从来没有看到任何错误或任何东西，但脚本没有执行。如果我打开任务计划程序，我可以看到该作业并且它说它“运行”。但在历史上有一个“动作完成”

```
Task Scheduler successfully completed task "\Microsoft\Windows\PowerShell\ScheduledJobs\Test" , instance "{a117256e-c3f2-42a7-a290-f21aeb6b2260}" , action "StartPowerShellJob" with return code 1. 
```

我已经尝试在任务调度程序中处理计划任务，但没有得到任何结果。有没有人有任何想法？

脚本看起来像这样：

```
$path = "C:\temp\jobbit.log"
Get-Date | Out-File -FilePath $path -Append 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T02:16:46.713

在使用任务计划程序本身运行 PowerShell 脚本时，我遇到了类似的问题。我最终让它工作的方式是直接调用 PowerShell 并将我想运行的脚本作为参数传递

在您的情况下，如果我正确理解 cmdlet 语法，它将是：

```
Register-ScheduledJob -Name Test
-FilePath C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe
-ArgumentList ("-NonInteractive","C:\scripts\testJob.ps1") 
```

我假设计划任务的运行时环境根本不会使用 PowerShell 自动运行 ps1 文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-21T23:36:08.543

很抱歉恢复一个旧线程，但对于那些四处寻找答案的人......

我在 Windows Server 2012 R2 上遇到了同样的问题。解决方案既简单又令人愤怒。

我所要做的就是从“程序/脚本”中删除“.exe”。而已。它应该是：

```
powershell 
```

并不是

```
powershell.exe 
```

这当然是没有看到你的命令参数的其余部分。我不知道为什么这会奏效。

# java - 安卓上的 TCP/IP

> ID：15712790
> 
> 赞同：0
> 
> 时间：2013-03-29T23:03:42.250
> 
> 标签：java, android, tcp, network-programming, client-server

我有一个 android 应用程序，我想向我的 `public class ActivitymainActivity extends Activity { 发送一个简单的命令

```
private TextView textview;
private Button button;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activitymain);

    textview=(TextView) findViewById(R.id.EmailCount);
    button=(Button) findViewById(R.id.button1);
    textview.setText("Going in");
    try{
        Socket socket = new Socket("192.168.1.66", 2727);   

        OutputStream out = socket.getOutputStream();       
        PrintWriter output = new PrintWriter(out);         

        textview.setText("Sending Data to PC");         
        output.println("Hello from Android");
        output.flush();
        output.close();
        textview.setText("Data sent to PC");            

        socket.close();                                    
        textview.setText("Socket closed"); 
    }
    catch(Exception e){System.out.print(e+"shacso");}

    button.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            textview.setText("Trying to send");
             try{
                    Socket socket = new Socket("192.168.1.66", 2727);   

                    OutputStream out = socket.getOutputStream();       
                    PrintWriter output = new PrintWriter(out);         

                    textview.setText("Sending Data to PC");         
                    output.println("Checking Email now:D");
                    output.flush();
                    output.close();
                    textview.setText("Data sent to PC");            

                    socket.close();                                    
                    textview.setText("Socket closed");                  }
                catch(Exception e){System.out.print(e+"");}

        }
    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activitymain, menu);
    return true;
} 
```

} `

这是我的清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.emailclient"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />
<uses-permission android:name="android.permission.INTERNET"></uses-permission>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".ActivitymainActivity"
        android:label="@string/title_activity_activitymain" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

但是，我无法在服务器上接收任何内容。从Play商店下载了一个名为“UDP TCP Server”的应用程序，它将数据包发送到指定的IP和端口，我能够将发送的数据发送到我的服务器。我的代码有什么问题吗？

代码说明：发送数据去应用程序午餐和单击按钮时

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-23T03:51:54.967

所有网络通信都应该在一个单独的线程中完成！不在主 UI 线程中。这就是您的代码无法正常工作的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T23:25:29.473

你说：

> 我无法在服务器上接收任何内容。

查看您的代码，您似乎实际上并未尝试读取来自服务器的响应。发送消息后，您需要访问套接字[InputStream](http://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html)以读取来自服务器的响应。

# jquery - 在 jQuery 中停止悬停后，如何保持悬停效果 3 秒？

> ID：15712792
> 
> 赞同：0
> 
> 时间：2013-03-29T23:03:44.427
> 
> 标签：jquery, jquery-hover

此代码的作用是，当您将鼠标悬停在列表中的某个项目上时，它会变为红色，并在下方显示另一个列表。如果您不再将鼠标悬停在任何元素上，则目标是让您悬停的最新事物在其被清除之前停留 3 秒。

```
$('#stockList li').hover(
            function () {
                    $(this).css({ color: 'red' }); //mouseover
                    if ($(this).text() == symbol) {

                        $('#stockInfo').append('<div><ol><li>' + "Company = " + company + '</li><br/><li>' + "Market = " + market + '</li><br/><li>' + "Sector = " + sector + '</li><br/><li>' + "Price = " + price + '</li><br/><li>' + "Year Range = " + low + " " + high + '</li><br/><li>' + "Dividend = " + amount + " " + yieldx + " " + frequency + '</li></ol><br/></div>');
                    }
                },

            function () {
                $(this).css({ color: 'navy' }); // mouseout
                $('#stockInfo').empty();
            }
        ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T23:07:07.653

Just add `delay` to it:

```
$(this).delay(3000).css({ color: 'navy' }); // mouseout
$('#stockInfo').empty(); 
```

Remember that javascript time works with miliseconds, so 3 seconds is 3000 miliseconds in javascript.

See the jQuery docs on delay [here](http://api.jquery.com/delay/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T23:07:46.920

Hover effect remains their until you take mouse cursor off the element

# [jsFiddle](http://jsfiddle.net/mohammadAdil/ceZ7X/2/)

You can do something like this :

```
var timeout;
    $('#stockList li').hover(
           function () {
              clearTimeout(timeout);// this will take care if user re-hover over the element
              $(this).css({ color: 'red' }); //mouseover
                  if ($(this).text() == symbol) {        
                     $('#stockInfo').append('<div><ol><li>' + "Company = " + company + '</li><br/><li>' + "Market = " + market + '</li><br/><li>' + "Sector = " + sector + '</li><br/><li>' + "Price = " + price + '</li><br/><li>' + "Year Range = " + low + " " + high + '</li><br/><li>' + "Dividend = " + amount + " " + yieldx + " " + frequency + '</li></ol><br/></div>');
                        }
                    },

                function () {
               timeout=  setTimeout(function(){
                    $('#stockList li').css({ color: 'navy' }); // mouseout
                    $('#stockInfo').empty();
                  },3000);
                }
            ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T23:07:57.957

```
$('#stockList li').hover(
            function () {
                    $(this).css({ color: 'red' }); //mouseover
                    if ($(this).text() == symbol) {

                        $('#stockInfo').append('<div><ol><li>' + "Company = " + company + '</li><br/><li>' + "Market = " + market + '</li><br/><li>' + "Sector = " + sector + '</li><br/><li>' + "Price = " + price + '</li><br/><li>' + "Year Range = " + low + " " + high + '</li><br/><li>' + "Dividend = " + amount + " " + yieldx + " " + frequency + '</li></ol><br/></div>');
                    }
                },

            function () {
                setTimeOut(function(){
                    $(this).css({ color: 'navy' }); // mouseout
                    $('#stockInfo').children('div').remove();
                },3000); // Disappear after 3000 ms or 3 seconds
            }
); 
```

# json - SVG 数据作为 JSON 对象

> ID：15712794
> 
> 赞同：0
> 
> 时间：2013-03-29T23:03:47.697
> 
> 标签：json, svg, d3.js

所以我试图为我的折线图（下面的代码）创建一条路径。数据存储在 JSON 对象中，数据点只是一个点数组（日期和值）。数据已全部解析，因此格式正确，但是当我将路径附加到 svg（最后几行代码）并尝试使用 .datum 输入数据时，javascript 控制台显示“错误：解析问题: 并表明 `d="MNaN,NaNLNaN,NaNLNaN,NaNLNaN,NaNLNaN,NaNLNaN,NaNLNaN,NaNLNaN,NaNLNaN,..."`。我不知道这个 NaNLNaN 是从哪里来的。

```
<script>
    var margin = {top: 20, right: 20, bottom: 30, left: 50},
        width = 960 - margin.left - margin.right,
        height = 500 - margin.top - margin.bottom;

    var parseDate = d3.time.format("%x").parse;

    var x = d3.time.scale()
        .range([0, width]);

    var y = d3.scale.linear()
        .range([height, 0]);

    var xAxis = d3.svg.axis()
        .scale(x)
        .orient("bottom");

    var yAxis = d3.svg.axis()
        .scale(y)
        .orient("left");

    var line = d3.svg.line()
        .x(function(d) { return x(d.date); })
        .y(function(d) { return y(d.close); });

    var svg = d3.select("body").append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
      .append("g")
        .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

    var datastring = "{ \"title\":\"Stock Price of Apple (AAPL)\", \"x\":{ \"label\":\"Date\", \"unit\":\"Day\" }, \"y\":{ \"label\":\"Price\", \"unit\":\"$\" }, \"points\":[ [ \"3/13/13\", \"428.45\" ], [ \"3/12/13\", \"435.6\" ], [ \"3/11/13\", \"429.75\" ], [ \"3/8/13\", \"429.8\" ], [ \"3/7/13\", \"424.5\" ], [ \"3/6/13\", \"434.51\" ], [ \"3/5/13\", \"421.48\" ], [ \"3/4/13\", \"427.8\" ], [ \"3/1/13\", \"438\" ], [ \"2/28/13\", \"444.05\" ], [ \"2/27/13\", \"448.43\" ], [ \"2/26/13\", \"443.82\" ], [ \"2/25/13\", \"453.85\" ], [ \"2/22/13\", \"449.25\" ], [ \"2/21/13\", \"446\" ], [ \"2/20/13\", \"457.69\" ], [ \"2/19/13\", \"461.1\" ], [ \"2/15/13\", \"468.85\" ], [ \"2/14/13\", \"464.52\" ], [ \"2/13/13\", \"467.21\" ], [ \"2/12/13\", \"479.51\" ], [ \"2/11/13\", \"476.5\" ], [ \"2/8/13\", \"474\" ], [ \"2/7/13\", \"463.25\" ], [ \"2/6/13\", \"456.47\" ], [ \"2/5/13\", \"444.05\" ], [ \"2/4/13\", \"453.91\" ], [ \"2/1/13\", \"459.11\" ], [ \"1/31/13\", \"456.98\" ], [ \"1/30/13\", \"457\" ], [ \"1/29/13\", \"458.5\" ], [ \"1/28/13\", \"437.83\" ], [ \"1/25/13\", \"451.69\" ], [ \"1/24/13\", \"460\" ], [ \"1/23/13\", \"508.81\" ], [ \"1/22/13\", \"504.56\" ], [ \"1/18/13\", \"498.52\" ], [ \"1/17/13\", \"510.31\" ], [ \"1/16/13\", \"494.64\" ], [ \"1/15/13\", \"498.3\" ], [ \"1/14/13\", \"502.68\" ], [ \"1/11/13\", \"521\" ], [ \"1/10/13\", \"528.55\" ], [ \"1/9/13\", \"522.5\" ], [ \"1/8/13\", \"529.21\" ], [ \"1/7/13\", \"522\" ], [ \"1/4/13\", \"536.97\" ], [ \"1/3/13\", \"547.88\" ], [ \"1/2/13\", \"553.82\" ], [ \"12/31/12\", \"510.53\" ], [ \"12/28/12\", \"510.29\" ], [ \"12/27/12\", \"513.54\" ], [ \"12/26/12\", \"519\" ], [ \"12/24/12\", \"520.35\" ], [ \"12/21/12\", \"512.47\" ], [ \"12/20/12\", \"530\" ], [ \"12/19/12\", \"531.47\" ], [ \"12/18/12\", \"525\" ], [ \"12/17/12\", \"508.93\" ], [ \"12/14/12\", \"514.75\" ], [ \"12/13/12\", \"531.15\" ], [ \"12/12/12\", \"547.77\" ], [ \"12/11/12\", \"539.77\" ], [ \"12/10/12\", \"525\" ], [ \"12/7/12\", \"553.4\" ], [ \"12/6/12\", \"528.94\" ], [ \"12/5/12\", \"568.91\" ], [ \"12/4/12\", \"581.8\" ], [ \"12/3/12\", \"593.65\" ], [ \"11/30/12\", \"586.79\" ], [ \"11/29/12\", \"590.22\" ], [ \"11/28/12\", \"577.27\" ], [ \"11/27/12\", \"589.55\" ], [ \"11/26/12\", \"575.9\" ], [ \"11/23/12\", \"567.17\" ], [ \"11/21/12\", \"564.25\" ], [ \"11/20/12\", \"571.91\" ], [ \"11/19/12\", \"540.71\" ], [ \"11/16/12\", \"525.2\" ], [ \"11/15/12\", \"537.53\" ], [ \"11/14/12\", \"545.5\" ], [ \"11/13/12\", \"538.91\" ], [ \"11/12/12\", \"554.15\" ], [ \"11/9/12\", \"540.42\" ], [ \"11/8/12\", \"560.63\" ], [ \"11/7/12\", \"573.84\" ], [ \"11/6/12\", \"590.23\" ], [ \"11/5/12\", \"583.52\" ], [ \"11/2/12\", \"595.89\" ], [ \"11/1/12\", \"598.22\" ], [ \"10/31/12\", \"594.88\" ], [ \"10/26/12\", \"609.43\" ], [ \"10/25/12\", \"620\" ], [ \"10/24/12\", \"621.44\" ], [ \"10/23/12\", \"631\" ], [ \"10/22/12\", \"612.42\" ], [ \"10/19/12\", \"631.05\" ], [ \"10/18/12\", \"639.59\" ], [ \"10/17/12\", \"648.87\" ], [ \"10/16/12\", \"635.37\" ], [ \"10/15/12\", \"632.35\" ], [ \"10/12/12\", \"629.56\" ], [ \"10/11/12\", \"646.5\" ], [ \"10/10/12\", \"639.74\" ], [ \"10/9/12\", \"638.65\" ], [ \"10/8/12\", \"646.88\" ], [ \"10/5/12\", \"665.2\" ], [ \"10/4/12\", \"671.25\" ], [ \"10/3/12\", \"664.86\" ], [ \"10/2/12\", \"661.81\" ], [ \"10/1/12\", \"671.16\" ], [ \"9/28/12\", \"678.75\" ], [ \"9/27/12\", \"664.29\" ], [ \"9/26/12\", \"668.74\" ], [ \"9/25/12\", \"688.26\" ], [ \"9/24/12\", \"686.86\" ], [ \"9/21/12\", \"702.41\" ], [ \"9/20/12\", \"699.16\" ], [ \"9/19/12\", \"700.26\" ], [ \"9/18/12\", \"699.88\" ], [ \"9/17/12\", \"699.35\" ], [ \"9/14/12\", \"689.96\" ], [ \"9/13/12\", \"677.37\" ], [ \"9/12/12\", \"666.85\" ], [ \"9/11/12\", \"665.11\" ], [ \"9/10/12\", \"680.45\" ], [ \"9/7/12\", \"678.05\" ], [ \"9/6/12\", \"673.17\" ], [ \"9/5/12\", \"675.57\" ], [ \"9/4/12\", \"665.76\" ], [ \"8/31/12\", \"667.25\" ], [ \"8/30/12\", \"670.64\" ], [ \"8/29/12\", \"675.25\" ], [ \"8/28/12\", \"674.98\" ], [ \"8/27/12\", \"679.99\" ], [ \"8/24/12\", \"659.51\" ], [ \"8/23/12\", \"666.11\" ], [ \"8/22/12\", \"654.42\" ], [ \"8/21/12\", \"670.82\" ], [ \"8/20/12\", \"650.01\" ], [ \"8/17/12\", \"640\" ], [ \"8/16/12\", \"631.21\" ], [ \"8/15/12\", \"631.3\" ], [ \"8/14/12\", \"631.87\" ], [ \"8/13/12\", \"623.39\" ], [ \"8/10/12\", \"618.71\" ], [ \"8/9/12\", \"617.85\" ], [ \"8/8/12\", \"619.39\" ], [ \"8/7/12\", \"622.77\" ], [ \"8/6/12\", \"617.29\" ], [ \"8/3/12\", \"613.63\" ], [ \"8/2/12\", \"602.84\" ], [ \"8/1/12\", \"615.91\" ], [ \"7/31/12\", \"603.23\" ], [ \"7/30/12\", \"590.92\" ], [ \"7/27/12\", \"575.01\" ], [ \"7/26/12\", \"579.76\" ], [ \"7/25/12\", \"574.46\" ], [ \"7/24/12\", \"607.38\" ], [ \"7/23/12\", \"594.4\" ], [ \"7/20/12\", \"613.03\" ], [ \"7/19/12\", \"611.28\" ], [ \"7/18/12\", \"606.59\" ], [ \"7/17/12\", \"610.79\" ], [ \"7/16/12\", \"605.12\" ], [ \"7/13/12\", \"602.95\" ], [ \"7/12/12\", \"600.24\" ], [ \"7/11/12\", \"606.12\" ], [ \"7/10/12\", \"617.97\" ], [ \"7/9/12\", \"605.3\" ], [ \"7/6/12\", \"607.09\" ], [ \"7/5/12\", \"600.56\" ], [ \"7/3/12\", \"594.88\" ], [ \"7/2/12\", \"584.73\" ], [ \"6/29/12\", \"578\" ], [ \"6/28/12\", \"571.67\" ], [ \"6/27/12\", \"575\" ], [ \"6/26/12\", \"571.33\" ], [ \"6/25/12\", \"577.3\" ], [ \"6/22/12\", \"579.04\" ], [ \"6/21/12\", \"585.44\" ], [ \"6/20/12\", \"588.21\" ], [ \"6/19/12\", \"583.4\" ], [ \"6/18/12\", \"570.96\" ], [ \"6/15/12\", \"571\" ], [ \"6/14/12\", \"571.24\" ], [ \"6/13/12\", \"574.52\" ], [ \"6/12/12\", \"574.46\" ], [ \"6/11/12\", \"587.72\" ], [ \"6/8/12\", \"571.6\" ], [ \"6/7/12\", \"577.29\" ], [ \"6/6/12\", \"567.77\" ], [ \"6/5/12\", \"561.27\" ], [ \"6/4/12\", \"561.5\" ], [ \"6/1/12\", \"569.16\" ], [ \"5/31/12\", \"580.74\" ], [ \"5/30/12\", \"569.2\" ], [ \"5/29/12\", \"570.9\" ], [ \"5/25/12\", \"564.59\" ], [ \"5/24/12\", \"575.87\" ], [ \"5/23/12\", \"557.5\" ], [ \"5/22/12\", \"569.55\" ], [ \"5/21/12\", \"534.5\" ], [ \"5/18/12\", \"533.96\" ], [ \"5/17/12\", \"545.31\" ], [ \"5/16/12\", \"554.05\" ], [ \"5/15/12\", \"561.45\" ], [ \"5/14/12\", \"562.57\" ], [ \"5/11/12\", \"565\" ], [ \"5/10/12\", \"574.58\" ], [ \"5/9/12\", \"563.7\" ], [ \"5/8/12\", \"569.58\" ], [ \"5/7/12\", \"561.5\" ], [ \"5/4/12\", \"577.08\" ], [ \"5/3/12\", \"590.5\" ], [ \"5/2/12\", \"580.24\" ], [ \"5/1/12\", \"584.9\" ], [ \"4/30/12\", \"597.8\" ], [ \"4/27/12\", \"605.07\" ], [ \"4/26/12\", \"614.27\" ], [ \"4/25/12\", \"615.64\" ], [ \"4/24/12\", \"562.61\" ], [ \"4/23/12\", \"570.61\" ], [ \"4/20/12\", \"591.38\" ], [ \"4/19/12\", \"600.22\" ], [ \"4/18/12\", \"613.72\" ], [ \"4/17/12\", \"578.94\" ], [ \"4/16/12\", \"610.06\" ], [ \"4/13/12\", \"624.11\" ], [ \"4/12/12\", \"625\" ], [ \"4/11/12\", \"636.2\" ], [ \"4/10/12\", \"639.93\" ], [ \"4/9/12\", \"626.13\" ], [ \"4/5/12\", \"626.98\" ], [ \"4/4/12\", \"624.35\" ], [ \"4/3/12\", \"627.3\" ], [ \"4/2/12\", \"601.83\" ], [ \"3/30/12\", \"608.77\" ], [ \"3/29/12\", \"612.78\" ], [ \"3/28/12\", \"618.38\" ], [ \"3/27/12\", \"606.18\" ], [ \"3/26/12\", \"599.79\" ], [ \"3/23/12\", \"600.49\" ], [ \"3/22/12\", \"597.78\" ], [ \"3/21/12\", \"602.74\" ], [ \"3/20/12\", \"599.51\" ], [ \"3/19/12\", \"598.37\" ], [ \"3/16/12\", \"584.72\" ], [ \"3/15/12\", \"599.61\" ], [ \"3/14/12\", \"578.05\" ], [ \"3/13/12\", \"557.54\" ], [ \"3/12/12\", \"548.98\" ], [ \"3/9/12\", \"544.21\" ], [ \"3/8/12\", \"534.69\" ], [ \"3/7/12\", \"536.8\" ], [ \"3/6/12\", \"523.66\" ], [ \"3/5/12\", \"545.42\" ], [ \"3/2/12\", \"544.24\" ], [ \"3/1/12\", \"548.17\" ], [ \"2/29/12\", \"541.56\" ], [ \"2/28/12\", \"527.96\" ], [ \"2/27/12\", \"521.31\" ], [ \"2/24/12\", \"519.67\" ], [ \"2/23/12\", \"515.08\" ], [ \"2/22/12\", \"513.08\" ], [ \"2/21/12\", \"506.88\" ], [ \"2/17/12\", \"503.11\" ], [ \"2/16/12\", \"491.5\" ], [ \"2/15/12\", \"514.26\" ], [ \"2/14/12\", \"504.66\" ], [ \"2/13/12\", \"499.53\" ], [ \"2/10/12\", \"490.96\" ], [ \"2/9/12\", \"480.76\" ], [ \"2/8/12\", \"470.5\" ], [ \"2/7/12\", \"465.25\" ], [ \"2/6/12\", \"458.38\" ], [ \"2/3/12\", \"457.3\" ], [ \"2/2/12\", \"455.9\" ], [ \"2/1/12\", \"458.41\" ], [ \"1/31/12\", \"455.59\" ], [ \"1/30/12\", \"445.71\" ], [ \"1/27/12\", \"444.34\" ], [ \"1/26/12\", \"448.36\" ], [ \"1/25/12\", \"454.44\" ], [ \"1/24/12\", \"425.1\" ], [ \"1/23/12\", \"422.67\" ], [ \"1/20/12\", \"427.49\" ], [ \"1/19/12\", \"430.15\" ], [ \"1/18/12\", \"426.96\" ], [ \"1/17/12\", \"424.2\" ], [ \"1/13/12\", \"419.7\" ], [ \"1/12/12\", \"422.28\" ], [ \"1/11/12\", \"422.68\" ], [ \"1/10/12\", \"425.91\" ], [ \"1/9/12\", \"425.5\" ], [ \"1/6/12\", \"419.77\" ], [ \"1/5/12\", \"414.95\" ], [ \"1/4/12\", \"410\" ], [ \"1/3/12\", \"409.4\" ], [ \"12/30/11\", \"403.51\" ], [ \"12/29/11\", \"403.4\" ], [ \"12/28/11\", \"406.89\" ], [ \"12/27/11\", \"403.1\" ], [ \"12/23/11\", \"399.69\" ], [ \"12/22/11\", \"397\" ], [ \"12/21/11\", \"396.69\" ], [ \"12/20/11\", \"387.76\" ], [ \"12/19/11\", \"382.47\" ], [ \"12/16/11\", \"380.36\" ], [ \"12/15/11\", \"383.33\" ], [ \"12/14/11\", \"386.7\" ], [ \"12/13/11\", \"393\" ], [ \"12/12/11\", \"391.68\" ], [ \"12/9/11\", \"392.85\" ], [ \"12/8/11\", \"391.45\" ], [ \"12/7/11\", \"389.93\" ], [ \"12/6/11\", \"392.51\" ], [ \"12/5/11\", \"393.49\" ], [ \"12/2/11\", \"389.83\" ], [ \"12/1/11\", \"382.54\" ], [ \"11/30/11\", \"381.29\" ], [ \"11/29/11\", \"375.84\" ], [ \"11/28/11\", \"372.35\" ], [ \"11/25/11\", \"368.42\" ], [ \"11/23/11\", \"374.51\" ], [ \"11/22/11\", \"371.02\" ], [ \"11/21/11\", \"370.4\" ], [ \"11/18/11\", \"378.92\" ], [ \"11/17/11\", \"383.98\" ], [ \"11/16/11\", \"389.25\" ], [ \"11/15/11\", \"380.8\" ], [ \"11/14/11\", \"383.52\" ], [ \"11/11/11\", \"386.61\" ], [ \"11/10/11\", \"397.03\" ], [ \"11/9/11\", \"396.97\" ], [ \"11/8/11\", \"402.21\" ], [ \"11/7/11\", \"399.91\" ], [ \"11/4/11\", \"402.03\" ], [ \"11/3/11\", \"399.07\" ], [ \"11/2/11\", \"400.09\" ], [ \"11/1/11\", \"397.41\" ], [ \"10/31/11\", \"402.42\" ], [ \"10/28/11\", \"403\" ], [ \"10/27/11\", \"407.56\" ], [ \"10/26/11\", \"401.76\" ], [ \"10/25/11\", \"405.03\" ], [ \"10/24/11\", \"396.18\" ], [ \"10/21/11\", \"398.1\" ], [ \"10/20/11\", \"400\" ], [ \"10/19/11\", \"401.35\" ], [ \"10/18/11\", \"421.76\" ], [ \"10/17/11\", \"421.74\" ], [ \"10/14/11\", \"416.83\" ], [ \"10/13/11\", \"404.98\" ], [ \"10/12/11\", \"407.34\" ], [ \"10/11/11\", \"392.57\" ], [ \"10/10/11\", \"379.09\" ], [ \"10/7/11\", \"375.78\" ], [ \"10/6/11\", \"373.33\" ], [ \"10/5/11\", \"367.86\" ], [ \"10/4/11\", \"374.57\" ], [ \"10/3/11\", \"380.37\" ], [ \"9/30/11\", \"387.12\" ], [ \"9/29/11\", \"401.92\" ], [ \"9/28/11\", \"400.19\" ], [ \"9/27/11\", \"408.73\" ], [ \"9/26/11\", \"399.86\" ], [ \"9/23/11\", \"400.28\" ], [ \"9/22/11\", \"401.03\" ], [ \"9/21/11\", \"419.64\" ], [ \"9/20/11\", \"415.25\" ], [ \"9/19/11\", \"397\" ], [ \"9/16/11\", \"395.54\" ], [ \"9/15/11\", \"391.43\" ], [ \"9/14/11\", \"387.02\" ], [ \"9/13/11\", \"382.14\" ], [ \"9/12/11\", \"373\" ], [ \"9/9/11\", \"383.93\" ], [ \"9/8/11\", \"382.4\" ], [ \"9/7/11\", \"385.56\" ], [ \"9/6/11\", \"367.37\" ], [ \"9/2/11\", \"374.74\" ], [ \"9/1/11\", \"385.82\" ], [ \"8/31/11\", \"390.57\" ], [ \"8/30/11\", \"388.25\" ], [ \"8/29/11\", \"388.18\" ], [ \"8/26/11\", \"371.17\" ], [ \"8/25/11\", \"365.08\" ], [ \"8/24/11\", \"373.47\" ], [ \"8/23/11\", \"360.3\" ], [ \"8/22/11\", \"364.51\" ], [ \"8/19/11\", \"362.17\" ], [ \"8/18/11\", \"370.84\" ], [ \"8/17/11\", \"382.31\" ], [ \"8/16/11\", \"381.52\" ], [ \"8/15/11\", \"379.63\" ], [ \"8/12/11\", \"378.07\" ], [ \"8/11/11\", \"370.52\" ], [ \"8/10/11\", \"371.15\" ], [ \"8/9/11\", \"361.3\" ], [ \"8/8/11\", \"361.69\" ], [ \"8/5/11\", \"380.44\" ], [ \"8/4/11\", \"389.41\" ], [ \"8/3/11\", \"390.98\" ], [ \"8/2/11\", \"397.65\" ], [ \"8/1/11\", \"397.78\" ], [ \"7/29/11\", \"387.64\" ], [ \"7/28/11\", \"391.62\" ], [ \"7/27/11\", \"400.59\" ], [ \"7/26/11\", \"400\" ], [ \"7/25/11\", \"390.35\" ], [ \"7/22/11\", \"388.32\" ], [ \"7/21/11\", \"386.95\" ], [ \"7/20/11\", \"396.12\" ], [ \"7/19/11\", \"378\" ], [ \"7/18/11\", \"365.43\" ], [ \"7/15/11\", \"361.17\" ], [ \"7/14/11\", \"361.01\" ], [ \"7/13/11\", \"358.33\" ], [ \"7/12/11\", \"353.53\" ], [ \"7/11/11\", \"356.34\" ], [ \"7/8/11\", \"353.34\" ], [ \"7/7/11\", \"354.67\" ], [ \"7/6/11\", \"348.95\" ], [ \"7/5/11\", \"343\" ], [ \"7/1/11\", \"335.95\" ], [ \"6/30/11\", \"334.7\" ], [ \"6/29/11\", \"336.04\" ], [ \"6/28/11\", \"333.65\" ], [ \"6/27/11\", \"327.59\" ], [ \"6/24/11\", \"331.37\" ], [ \"6/23/11\", \"318.94\" ], [ \"6/22/11\", \"325.16\" ], [ \"6/21/11\", \"316.68\" ], [ \"6/20/11\", \"317.36\" ], [ \"6/17/11\", \"328.99\" ], [ \"6/16/11\", \"326.9\" ], [ \"6/15/11\", \"329.75\" ], [ \"6/14/11\", \"330\" ], [ \"6/13/11\", \"326.6\" ], [ \"6/10/11\", \"330.55\" ], [ \"6/9/11\", \"333.25\" ], [ \"6/8/11\", \"331.78\" ], [ \"6/7/11\", \"338.17\" ], [ \"6/6/11\", \"345.7\" ], [ \"6/3/11\", \"343.18\" ], [ \"6/2/11\", \"346.5\" ], [ \"6/1/11\", \"348.87\" ], [ \"5/31/11\", \"341.1\" ], [ \"5/27/11\", \"334.8\" ], [ \"5/26/11\", \"335.97\" ], [ \"5/25/11\", \"336.78\" ], [ \"5/24/11\", \"335.5\" ], [ \"5/23/11\", \"329.97\" ], [ \"5/20/11\", \"339.56\" ], [ \"5/19/11\", \"342.08\" ], [ \"5/18/11\", \"336.47\" ], [ \"5/17/11\", \"332\" ], [ \"5/16/11\", \"339.2\" ], [ \"5/13/11\", \"345.66\" ], [ \"5/12/11\", \"346.12\" ], [ \"5/11/11\", \"349.02\" ], [ \"5/10/11\", \"348.89\" ], [ \"5/9/11\", \"347.86\" ], [ \"5/6/11\", \"349.69\" ], [ \"5/5/11\", \"348.4\" ], [ \"5/4/11\", \"348.26\" ], [ \"5/3/11\", \"347.99\" ], [ \"5/2/11\", \"349.74\" ], [ \"4/29/11\", \"346.78\" ], [ \"4/28/11\", \"346.19\" ], [ \"4/27/11\", \"352.24\" ], [ \"4/26/11\", \"353.62\" ], [ \"4/25/11\", \"350.34\" ], [ \"4/21/11\", \"355\" ], [ \"4/20/11\", \"343.51\" ], [ \"4/19/11\", \"333.1\" ], [ \"4/18/11\", \"326.1\" ], [ \"4/15/11\", \"333.3\" ], [ \"4/14/11\", \"334.8\" ], [ \"4/13/11\", \"335.02\" ], [ \"4/12/11\", \"330.49\" ], [ \"4/11/11\", \"334.06\" ], [ \"4/8/11\", \"339.92\" ], [ \"4/7/11\", \"338.1\" ], [ \"4/6/11\", \"341.22\" ], [ \"4/5/11\", \"336.99\" ], [ \"4/4/11\", \"344.31\" ], [ \"4/1/11\", \"351.11\" ], [ \"3/31/11\", \"346.36\" ], [ \"3/30/11\", \"350.64\" ], [ \"3/29/11\", \"347.66\" ], [ \"3/28/11\", \"353.15\" ], [ \"3/25/11\", \"348.07\" ], [ \"3/24/11\", \"341.85\" ], [ \"3/23/11\", \"339.28\" ], [ \"3/22/11\", \"342.56\" ], [ \"3/21/11\", \"335.99\" ], [ \"3/18/11\", \"337.13\" ], [ \"3/17/11\", \"336.83\" ], [ \"3/16/11\", \"342\" ], [ \"3/15/11\", \"342.1\" ], [ \"3/14/11\", \"353.18\" ] ] } ";

    var data = JSON.parse(datastring);

    var points = data["points"];

    points.forEach(function(d) {
      d[0] = parseDate(d[0]);
      d[1] = +d[1];
    });

    points.reverse();

    x.domain(d3.extent(points, function(d) { return d[0]; }));
    y.domain(d3.extent(points, function(d) { return d[1]; }));

    svg.append("g")
        .attr("class", "x axis")
        .attr("transform", "translate(0," + height + ")")
        .call(xAxis);

    svg.append("g")
        .attr("class", "y axis")
        .call(yAxis)
      .append("text")
        .attr("transform", "rotate(-90)")
        .attr("y", 6)
        .attr("dy", ".71em")
        .style("text-anchor", "end")
        .text("Price ($)");

    svg.append("path")
        .datum(points)
        .attr("class", "line")
        .attr("d", line);

    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T00:23:23.253

```
var line = d3.svg.line()
        .x(function(d) { return x(d.date); })
        .y(function(d) { return y(d.close); }); 
```

应该：

```
var line = d3.svg.line()
        .x(function(d) { return x(d[0]); })
        .y(function(d) { return y(d[1]); }); 
```

# c# - Automapper IQueryable error

> ID：15712797
> 
> 赞同：3
> 
> 时间：2013-03-29T23:04:01.990
> 
> 标签：c#, automapper

Trying to use IQueryable extensoins of Automapper.
The followng code:

```
class Program
{
    public class A { public string[] Strings { get; set; } }
    public class B { public string[] Lines { get; set; } }

    static void Main(string[] args)
    {
        Mapper.CreateMap<A, B>()
              .ForMember(m => m.Lines, action => action.MapFrom(src => src.Strings));

        IQueryable<A> qa = (new List<A>() {new A() {Strings = new string[0]}}).AsQueryable();
        IQueryable<B> b = qa.Project().To<B>(); // error is here
    }
} 
```

gives error "Sequence contains no elements". This is because this line:

```
 .ForMember(m => m.Lines, action => action.MapFrom(src => src.Strings)); 
```

What am i doing wrong? I know there is a simplier solution for this particular case but i meet this trouble everytime i use collections in ".MapFrom" method.
STack trace says:

> at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
> at AutoMapper.MappingEngine.CreateMapExpression(Type typeIn, Type typeOut) at AutoMapper.MappingEngine.<CreateMapExpression>b__9[TSource,TDestination](TypePair tp) at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory) at AutoMapper.MappingEngine.CreateMapExpression[TSource,TDestination]()
> at ConsoleApplication1.ProjectionExpression`1.ToTResult in d:\Work\Misc\VS\ConsoleApplication1\ConsoleApplication1\Program.cs:line 57 at ConsoleApplication1.Program.Main(String[] args) in d:\Work\Misc\VS\ConsoleApplication1\ConsoleApplication1\Program.cs:line 21 at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args) at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args) at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
> at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
> at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx) at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx) at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state) at System.Threading.ThreadHelper.ThreadStart()

so it performs First() at some point. Why? How to solve it?
Thanks.

# java - 使用 Delimiter 和 JButton 读取下一行

> ID：15712799
> 
> 赞同：0
> 
> 时间：2013-03-29T23:04:08.907
> 
> 标签：java, swing, jbutton, java.util.scanner, file-handling

java swing 和动作监听器的新手。我想要的是逐行显示文本文件，当我点击 JButton 时更改行。对于我正在使用的分隔符，或 | 我到目前为止的代码是：

```
next.addActionListener(new ActionListener (){
        public void actionPerformed(ActionEvent e){
            if (next.equals(next)) {
              {
                try{
                    File data = new File("player.txt");
                    Scanner scanner = new Scanner(data);

                    if (scanner != null){
                        scanner.useDelimiter(",|*");
                        if (scanner.hasNextLine()){
                            {

                                    textArea.append(scanner.nextLine() + "\n");
                            }
                        }
                            scanner.close();
                    }
              }
                catch (FileNotFoundException ex){}
              }
         }

        }//End ActionPerformed
    });//End ActionListener 
```

每次我点击按钮时，这段代码只是读取文本文件的第一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T23:08:58.767

如果你想用作分隔符`,`，或者`|`你应该把它写成

```
useDelimiter(",|\\|"); 
```

或者

```
useDelimiter("[,\\|]"); 
```

此外，如果您想使用此分隔符，您应该使用`scanner.next()`而不是`scanner.nextLine()`.

Lastly to read entire content of file you should use `while (scanner.hasNext())` rather then `if (scanner.hasNextLine())`, or create scanner outside of `ActionListener` so your action could read next line with each button-click (now your ActionListener creates new Scanner with each button click so it starts reading file from beginning).

# javascript - jQuery 检查文件上传是 mp3

> ID：15712802
> 
> 赞同：0
> 
> 时间：2013-03-29T23:04:16.660
> 
> 标签：javascript, regex, file, upload, submit

使用正则表达式确保上传的文件`input[type="file"]`是 MP3。出了点问题，我正在测试的文件没有通过。

谢谢你的帮助！

HTML

```
<input type="file"/> 
```

JavaScript

```
var file = $input.find('input[type="file"]'),
    val  = file.val(),
    type = /^([a-zA-Z0-9_-]+)(\.mp3)$/;

submit.attr('disabled', 'disabled').addClass('deac');

if (!val){

    modal("The upload can't be empty.", true);
} else if (!type.test(val)){

    modal("The song must be in MP3 format.", true);

    /***********
     *
     * Getting caught here- even with a valid .mp3 file that _should_ pass the regex
     * in my test case using mamp as a localhost, val = C:\fakepath\1.mp3 
     *
     ***********/
} else {

    /* Success */
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T23:12:16.243

我认为最好的解决方案是使用方法[mime()](http://www.jquerysdk.com/api/jQuery.mime)。

这样，即使文件被重命名了。Mp3 不受规避控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T23:43:38.193

我认为 IE 是唯一添加类似“fakepath”前缀的浏览器，所以这样的东西可能会更好：

```
type = /^(?:[A-Z]:\\fakepath\\)?([a-zA-Z0-9_-]+)(\.[Mm][Pp]3)$/; 
```

# c# - How we can select the value of an in by using text in text How we can select the value of an <option>in <select>by using 'text' in <option value="123">text</option> <option>Here is the xpath,b ID：15712808 赞同：-1 时间：2013-03-29T23:04:45.553 标签：c#, xpath, html-agility-pack 回答 #1 赞同：1 时间：2013-03-29T23:42:05.430 var doc = new HtmlAgilityPack.HtmlDocument(); HtmlAgilityPack.HtmlNode.ElementsFlags.Remove("option"); doc.LoadHtml(html); var values = doc.DocumentNode.SelectNodes("//select[@name='selectname']/option") .Where(o => o.InnerText=="text") .Select(o => o.Attributes["value"].Value) .ToList(); 回答 #2 赞同：0 时间：2013-03-29T23:16:34.320 使用 HTML Agility 包，您应该能够使用 InnerHTML</option></select></option>

# java - GWT Grid - Column Reordering On the Fly and Sort By Multiple Columns

> ID：15712812
> 
> 赞同：0
> 
> 时间：2013-03-29T23:05:16.187
> 
> 标签：java, gwt, datagrid, grid

Several months back, I did some searching for a GWT based grid, which would meet a couple of requirements. If memory serves me correctly, I found what I was looking for, however now that I'm searching for it again, I can't seem to find it.

The requirements were as follows:

1.  One was that it could sort by multiple columns (e.g. Shift Click one column then the other and it'll sort by the first one first and 2nd as a sub sort (e.g. Last name then first name sort)).
2.  The next requirement was that I could drag and drop the column order on the fly. Meaning that the user could change the order of the columns by simply dragging and dropping the column headers to the left or right of others.

Please let me know if you know of such a component/library/etc, as it'll save me lots of home cooked code :)

**Some Side Notes:**

Smart GWT meets Requirement 1, but doesn't allow for the column reordering ( [http://www.smartclient.com/smartgwt/showcase/#featured_grid_header_span](http://www.smartclient.com/smartgwt/showcase/#featured_grid_header_span) )

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T23:15:43.630

我发现了一些类似于我正在寻找的东西：http: [//datatables.net/extras/colreorder/](http://datatables.net/extras/colreorder/)

我将看看它的成本，以及它是否完全满足我正在寻找的一切。如果其他人知道同样好的事情，请告诉我。

# scala - Match a tuple of unknown size in scala

> ID：15712814
> 
> 赞同：9
> 
> 时间：2013-03-29T23:05:24.603
> 
> 标签：scala, pattern-matching, tuples

Is there way to partially match a `tuple` without having to specify the size? For example, if I had a tuple

```
val v = ( "Dr", "John","H", "Watson") 
```

I'd like to be able to do something like :

```
v match { 
   case ( "Dr", : _*) => "What's up, Doc?"
   case ( "Mr", name,   :_*) =>  s"Welcome, Mr. ${name}"
   case _ => "Have we met?"
} 
```

This doesn't compile, `:_*` normally means an undetermined number of parameters, but can't be used in this case apparently. The idea would be to be able to use this matcher for any tuple bigger than 2\. I know i can do it converting `v` to a `List` (for example) first, just want to know if it's possible to do it with a `tuple`.

**EDIT**: the most information I found on the web is [this discussion](http://www.scala-lang.org/node/5801), which dates back to scala 2.8, so I'm gonna with the 'No, you can't' answer.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-29T23:17:44.197

Tuples are structures for heterogeneous types. As such, they implement the `productIterator` trait, so you could do:

```
v.productIterator.toList match { 
  case "Dr" :: _ => "What's up, Doc?"
  case "Mr" :: name :: _ =>  s"Welcome, Mr. ${name}"
  case _ => "Have we met?"
} 
```

But your example really looks like you want a `Seq[String]` straight away. Is there any reason for wishing to use tuples?

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-30T10:51:48.227

This can be done using [shapeless](https://github.com/milessabin/shapeless)'s conversions from tuples to `HLists`,

```
scala> import shapeless._
import shapeless._

scala> import Tuples._
import Tuples._

scala> val v = ( "Dr", "John","H", "Watson")
v: (String, String, String, String) = (Dr,John,H,Watson)

scala> v.hlisted match {
     |   case "Dr" :: _ => "What's up Doc?"
     |   case "Mr" :: name :: _ => s"Welcome, Mr. ${name}"
     |   case _ => "Have we met?"
     | }
res0: String = What's up Doc? 
```

Although it's not visible in the above example, note that where possible full static type information is maintained for the names bound in the case clauses, for example,

```
scala> (23, "foo", true).hlisted match {
     |   case i :: s :: b :: HNil => if(b) i+s.length else 0
     |   case _ => -1
     | }
res1: Int = 26 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-02-12T12:32:38.480

Try this:

```
case tuple:Product => {
    tuple.productIterator.toList match {
        case (head::rest) => ...

    }
} 
```

# ios - 如何将目标操作转换为阻止？

> ID：15712816
> 
> 赞同：1
> 
> 时间：2013-03-29T23:05:33.287
> 
> 标签：ios, objective-c, objective-c-blocks

我在一个类中有以下选择器：

```
 - (SoapRequest*) loginAndConnect: (id) target action: (SEL) action credentials: (WSAcredentials*) arg0 dialoutInfo: (WSAdialoutInfo*) arg1; 
```

我希望能够使用块而不是另一个选择器作为操作来调用它，但是我找不到有关如何执行此操作的信息。就像是：

```
[service loginAndConnect:self  credentials:credentials dialoutInfo:dialoutInfo action:^(SoapRequest* aResult) {
    // more code here
}]; 
```

实现这一目标的最佳方法是什么？

更新* ***

我几乎可以完成这项工作，但在 objc_release 中遇到了 completionBlock 对象的异常。我确定这与保留目标有关，但我不确定如何纠正它。这是当前代码：

```
- (BOOL) checkService {

WSAcredentials* credentials = [[WSAcredentials alloc] init];
WSAdialoutInfo* dialoutInfo = [[WSAdialoutInfo alloc] init];
if (!service) {
    service = [[WSAWebSocketAdapterService alloc] init];
}
__block SoapRequest* request;
[service loginAndConnectWithCredentials:credentials dialoutInfo:dialoutInfo completionBlock:^(SoapRequestCompletionBlock completionBlock) {
        request = (SoapRequest*)completionBlock;
        if ([request isKindOfClass: [SoapFault class]]) {                
            return YES; // we got a response, that's all we care about
        }
    return NO;
}
];
return YES;
} 
```

这是我的类别，非常接近下面发布的内容：

```
#import "WSAWebSocketAdapterService+BlockExtension.h"

// These objects serve as targets (with action being completed:) for the original object.
// Because we use one for each request we are thread safe.

@interface MyCustomSoapTargetAction : NSObject 

@property (copy) SoapRequestCompletionBlock block;

- (void) completed:(id)sender;

@end

@implementation MyCustomSoapTargetAction
- (void) completed:(id)sender
{
// Assuming 'sender' is your SoapRequest
if (_block != nil)
    _block(sender);
_block = nil;
}
@end

@implementation WSAWebSocketAdapterService(BlockExtension)

- (SoapRequest*) loginAndConnectWithCredentials:(WSAcredentials*) arg0
                                dialoutInfo: (WSAdialoutInfo*) arg1
                            completionBlock:(BOOL (^)(SoapRequestCompletionBlock))completionBlock
{
MyCustomSoapTargetAction *target = [[MyCustomSoapTargetAction alloc] init];
target.block = (SoapRequestCompletionBlock) completionBlock;

//
// Here we assume that target will be retained.
// If that's not the case then we will need to add it to some collection before
// the call below and have the target object remove itself from it after its
// block has been called.
//
return [self loginAndConnect:target action:@selector(completed:) credentials:arg0 dialoutInfo:arg1];
}
@end 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T12:59:21.573

您实际上不需要源代码。一个类别就可以了。这里有一些示例代码可以帮助您入门，它甚至是线程安全的！如果您的对象没有保留目标，那么在调用它的块之前，还需要做更多的工作来保留它。

```
// -- TheClassName+BlockExtension.h

typedef void (^SoapRequestCompletionBlock)(SoapRequest*);

@interface TheClassName(BlockExtension)
- loginAndConnectWithCredentials:(WSAcredentials*) arg0 
                     dialoutInfo: (WSAdialoutInfo*) arg1;
                 completionBlock:(SoapRequestCompletionBlock)completionBlock;
@end

// -- TheClassName+BlockExtension.m

// EDITED: If the 'target' object is not retained by the loginAndConnect... then
//         we may add it to this collection. In this implementation, a block can
//         only be used once.

static NSMutableSet *gSoapTargets = nil;

// These objects serve as targets (with action being completed:) for the original object.
// Because we use one for each request we are thread safe.

@interface MyCustomSoapTargetAction
@property (copy) SoapRequestCompletionBlock block;
- (void) completed:(id)sender;
@end

@implementation MyCustomSoapTargetAction

- (id) init
{
    // Objects adds itself to the global collection
    if ((self = [super init]))
        [gSoapTargets addObject:self];
    return self;
}

- (void) completed:(id)sender
{
    // Assuming 'sender' is your SoapRequest
    if (_block != nil)
        _block(sender);

    // Object removes itself from global collection when done.
    // On return from this method it will likely be released.
    [gSoapTargets removeObject:self];
}

+ (void) load 
{
    gSoapTargets = [NSMutableSet set];
}

@end

@implementation TheClassName(BlockExtension)
- (SoapRequest*) loginAndConnectWithCredentials:(WSAcredentials*) arg0 
                                    dialoutInfo: (WSAdialoutInfo*) arg1;
                                completionBlock:(SoapRequestCompletionBlock)completionBlock
{
    MyCustomSoapTargetAction *target = [[MyCustomSoapTargetAction alloc] init];
    target.block = completionBlock;

    //
    // Here we assume that target will be retained.
    // If that's not the case then we will need to add it to some collection before
    // the call below and have the target object remove itself from it after its 
    // block has been called.
    //
    [self loginAndConnect:target action:@selector(completed:) credentials:arg0 dialoutInfo:arg1];
}
@end 
```

***更新：这是一个基于您的代码使用此类别的示例：

```
- (BOOL) serviceIsAvailable 
{
    return _serviceIsAvailable;
}

- (void) _setServiceIsAvailable:(BOOL)value 
{
    // This method should probably be private thus the _ prefix
    // Do something with the result (set some status, warn user...).
    _serviceIsAvailable = value;
}

- (void) checkService 
{
    WSAcredentials* credentials = [[WSAcredentials alloc] init];
    WSAdialoutInfo* dialoutInfo = [[WSAdialoutInfo alloc] init];

    if (_service == nil)
        _service = [[WSAWebSocketAdapterService alloc] init];

    [_service loginAndConnectWithCredentials:credentials 
                                 dialoutInfo:dialoutInfo 
                             completionBlock:^(id sender) 
    {
        [self _setServiceIsAvailable:[sender isKindOfClass:[SoapFault class]]];
    }];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T23:14:54.280

您可以访问该课程的来源吗？生成一个接受块而不是选择器的类似方法将是一个相当简单的重写。

AFNetworking 库是这类东西的一个很好的风格指南。您的方法可能与此类似：

```
+ (instancetype)JSONRequestOperationWithRequest:(NSURLRequest *)urlRequest
                                        success:(void (^)(NSURLRequest *request, NSHTTPURLResponse *response, id JSON))success
                                        failure:(void (^)(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON))failure; 
```

或者，您可以通过类别添加您的方法，使用此处演示的方法：[块而不是 performSelector:withObject:afterDelay：](https://stackoverflow.com/questions/4007023/blocks-instead-of-performselectorwithobjectafterdelay?rq=1)

# android - 保存简单的用户输入的 EditText

> ID：15712819
> 
> 赞同：-4
> 
> 时间：2013-03-29T23:05:44.230
> 
> 标签：android

我在应用程序编程中遇到了一些问题。找了好久没找到解决办法，希望能帮到你。

假设我已经构建了一个应用程序，使用户能够通过号码所有者的姓名保存电话号码。因此，该活动包含两个 EditeText：一个用于人名，一个用于他的号码，以及一个用于保存的按钮。

如何使“应用程序”将用户交互保存到文本文件或任何其他文件中，文件名 = 人名 + 文件内容 = 他的号码。

我想添加另一个活动，允许用户通过其所有者的插入名称搜索数字，而且我不知道如何设置此功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T07:18:54.630

> 如何使“应用程序”将用户交互保存到文本文件“或任何其他文件！” 与“文件名=人名+文件内容=他的号码”
> 
> 因为我想添加另一个活动，允许用户通过插入其所有者的名称来搜索数字

从您对问题的描述来看，这听起来像是使用`SQLite`数据库存储数据的好理由。

从一开始就很好。我认为您对文件的想法既不好也不高效。让我们想象一个案例，如果您有百万个数字`>`，在这种情况下您将有百万个文件。那么如果你想读取文件的内容，你需要打开每个文件来获取数据，这不好，不是吗？还设计模式一个文件=一个记录（用户）

Also searching in second Activity will be "hardcoded". Here you had to go through files and compare their names on the basis of name entered by User.

So **as my recommendation** is to use `SQLite` rather than approach with files. Here writing and reading your data becomes more comfortable, safe and effective. Just create table called User with two columns(name, number) and perform appropriate actions. If you don't know how to start, read this pretty good article:

*   [Android SQLite Database and ContentProvider - tutorial](http://www.vogella.com/articles/AndroidSQLite/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T23:21:41.180

您可以尝试使用此功能将内容写入手机 sdcard 文件夹中的文件。

```
public void appendToFile(String content, String name)
    {
       File logFile = new File("sdcard/"+name+".txt");
       if (!logFile.exists())
       {
          try
          {
             logFile.createNewFile();
          }
          catch (IOException e)
          {
             e.printStackTrace();
          }
       }
       try
       {
          //BufferedWriter for performance, true to set append to file flag
          BufferedWriter buf = new BufferedWriter(new FileWriter(logFile, true));
          buf.append(text);
          buf.newLine();
          buf.close();
       }
       catch (IOException e)
       {
          e.printStackTrace();
       }
    } 
```

请注意，您将需要

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

在您的 AndroidManifest.xml 文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T07:24:41.453

You should read this: [http://developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html). It's a guide on how to save data in an Android app.

**I would suggest a SQLite database** for this particular task and not saving as files on the file system.

# c++ - C++ 错误“对 Class::Function() 的未定义引用”

> ID：15712821
> 
> 赞同：87
> 
> 时间：2013-03-29T23:05:54.293
> 
> 标签：c++, oop, undefined

我想知道是否有人可以帮助我解决这个问题 - 我只是 C++ 的新手，这给我带来了很多麻烦。

我正在尝试制作相对简单的 Deck 和 Card 类对象。

错误出现在“Deck.cpp”中，声明了一组卡片，然后当我尝试用卡片对象填充数组时。它说有一个未定义的引用`Card::Card()`,`Card::Card(Card::Rank, Card::Suit)`和`Card::~Card()`。

我的所有内容似乎都是正确的，所以我不知道出了什么问题。

代码如下：

甲板.h

```
#ifndef DECK_H
#define DECK_H
#include "card.h"

class Deck
{
 public:
    Deck();
    ~Deck();
    Card DealNextCard();
    void Shuffle();
    void DisplayDeck();
protected:
private:

};

#endif // DECK_H 
```

甲板.cpp

```
#include "Deck.h"
#include "card.h"

using namespace std;

const int NUM_TOTAL_CARDS = 52;
const int NUM_SUITS = 4;
const int NUM_RANKS = 13;
Card* cardArray;
void Deck() {
    cardArray = new Card[NUM_TOTAL_CARDS];
    int cardCount = 0;
    for (int i = 0; i > NUM_SUITS; i++) {
        for (int j = 0; j > NUM_RANKS; j++) {
            cardArray[cardCount] = Card(Card::Rank(i), Card::Suit(j) );
            cardCount++;
        }
    }
}

Card DealNextCard();
void Shuffle();
void DisplayDeck(); 
```

卡.h

```
class Card
{

    public:
        enum Suit {D=0, H, C, S};
        enum Rank {ONE=0, TWO, THREE, FOUR, FIVE, SIX, SEVEN, EIGHT, NINE, TEN, J, Q, K, A};
        Card(Card::Rank, Card::Suit);
        Card();
        virtual ~Card();
        Card::Suit suit;
        Card::Rank rank;
        Card::Rank GetRank();
        Card::Suit GetSuit();
        std::string CardName();

    protected:

    private:

};

#endif // CARD_H 
```

卡片.cpp

```
#include "card.h"
using namespace std;

Card::Suit cardSuit;
Card::Rank cardRank;

void Card() {
    //nothing
     }

void Card(Card::Rank rank, Card::Suit suit) {
cardRank = rank;
cardSuit = suit;
}

Card::Rank GetRank() {
return cardRank;
}
Card::Suit GetSuit() {
return cardSuit;
}
std::string CardName() {
    string test;
    test = "testing string";
    return test;
} 
```

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-03-29T23:21:25.737

What are you using to compile this? If there's an undefined reference error, usually it's because the .o file (which gets created from the .cpp file) doesn't exist and your compiler/build system is not able to link it.

Also, in your card.cpp, the function should be `Card::Card()` instead of `void Card`. The `Card::` is **scoping**; it means that your `Card()` function is a member of the Card class (which it obviously is, since it's the constructor for that class). Without this, void Card is just a free function. Similarly,

`void Card(Card::Rank rank, Card::Suit suit)`

should be

`Card::Card(Card::Rank rank, Card::Suit suit)`

Also, in deck.cpp, you are saying `#include "Deck.h"` even though you referred to it as deck.h. The includes are case sensitive.

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-29T23:14:15.293

在您的`Card`类的定义中，出现了默认构造的*声明：*

```
class Card
{
    // ...

    Card(); // <== Declaration of default constructor!

    // ...
}; 
```

但没有给出相应的*定义*。其实这个函数定义（来自`card.cpp`）：

```
void Card() {
//nothing
} 
```

不定义构造函数，而是定义一个名为 return 的**全局**`Card`函数`void`。您可能打算改为这样写：

```
Card::Card() {
//nothing
} 
```

除非您这样做，因为默认构造函数已声明但未定义，当找到对默认构造函数的调用时，链接器将产生有关未定义引用的错误。

* * *

这同样适用于接受两个参数的构造函数。这：

```
void Card(Card::Rank rank, Card::Suit suit) {
    cardRank = rank;
    cardSuit = suit;
} 
```

应该改写成这样：

```
Card::Card(Card::Rank rank, Card::Suit suit) {
    cardRank = rank;
    cardSuit = suit;
} 
```

这同样适用于其他成员函数：似乎您没有`Card::`在其定义中的成员函数名称之前添加限定符。没有它，这些函数是全局函数，而不是成员函数的定义。

* * *

另一方面，您的析构函数已声明但从未定义。只需为它提供一个定义`card.cpp`：

```
Card::~Card() { } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-29T23:21:03.047

这部分有问题：

```
Card* cardArray;
void Deck() {
    cardArray = new Card[NUM_TOTAL_CARDS];
    int cardCount = 0;
    for (int i = 0; i > NUM_SUITS; i++) {  //Error
        for (int j = 0; j > NUM_RANKS; j++) { //Error
            cardArray[cardCount] = Card(Card::Rank(i), Card::Suit(j) );
            cardCount++;
         }
    }
 } 
```

1.  `cardArray`是一个动态数组，但不是`Card`类的成员。如果您想初始化一个不是该类成员的动态数组，这很奇怪
2.  `void Deck()`不是类 Deck 的构造函数，因为您错过了范围解析运算符。您可能会对使用 name`Deck`和 return type定义构造函数和函数感到困惑`void`。
3.  在你的循环中，你不应该使用`<`，`>`否则循环将永远不会被执行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-29T23:14:43.343

为构造函数指定类卡-：

```
void Card::Card(Card::Rank rank, Card::Suit suit) { 
```

并且还定义了默认的构造函数和析构函数。

# r - 连接键值不完全相等的 R data.tables - 将行与最接近的时间组合

> ID：15712826
> 
> 赞同：19
> 
> 时间：2013-03-29T23:06:44.127
> 
> 标签：r, time, data.table

有没有一种巧妙的方法来连接 R 中的时间键值接近但不完全相同的数据表？例如，假设我有一个针对不同时间段给出的结果数据表：

```
DT1 = data.table(x=rep(c("a","b","c"),each=3), time=c(10,30,60), v=1:9) 
```

在这里，我们有一些在不同时间（时间）获取的不同类别（x）的值（v）。现在假设我有来自另一个来源的数据，这些数据为不同类别提供了一些时间值：

```
DT2=data.table(x=rep(c("a","b","c"),each=1),time=c(10,10,60)) 
```

我可能有兴趣尝试将 DT2 中的时间尽可能与 DT1 匹配，以预测我的 DT2 类别的值 v。我想做类似的事情

```
setkeyv(DT2,c("x","time"))
merge(DT1,DT2,by=c("time","v") 
```

返回：

```
 time x v
1:   10 a 1
2:   10 b 4
3:   60 c 9 
```

但是，如果我的时间没有相同的精度怎么办？例如：

```
DT2=data.table(x=rep(c("a","b","c"),each=1),time=c(17,54,3)) 
```

有没有办法执行类似的合并，但 DT2 的选择时间接近 DT1 的时间？也就是说 17 接近 30，54 接近 60，3 接近 10？

如果这个简单的例子不清楚，我将简要解释我遇到的更大的问题。我有一个包含列的数据表：类别、时间、输出 1、输出 2...有数百个类别与相关时间。我可能想在特定时间为所有类别提取输出 1。由于时间的采样没有明显的逻辑，有时时间会四舍五入到最接近的偶数秒；在其他情况下，时间会四舍五入到最接近的分钟甚至 10 分钟。

我可以编写一个脚本以更常见的格式重写时间，但我很好奇是否有我没有见过的光滑的 data.table 解决方案。我探索了滚动合并，但没有成功。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-30T23:05:51.363

另一种选择可能是`roll='nearest'`（CRAN v1.8.8 中的新功能）。

```
> setkey(DT1,x,time)
> DT1
   x time v
1: a   10 1
2: a   30 2
3: a   60 3
4: b   10 4
5: b   30 5
6: b   60 6
7: c   10 7
8: c   30 8
9: c   60 9
> DT2
   x time
1: a   17
2: b   54
3: c    3
> DT1[DT2,roll="nearest"]
   x time v
1: a   17 1
2: b   54 6
3: c    3 7 
```

请注意，17 似乎比 30 更接近 10，因此是第一行的结果。

如果您需要滚动到下一个观察值（下一个观察值向后进行）：

```
> DT1[DT2,roll=-Inf]
   x time v
1: a   17 2
2: b   54 6
3: c    3 7 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-30T00:19:26.213

您可以使用`findInterval`来完成此操作：

```
setkey(DT2, time)
DT1[, id := findInterval(DT1$time, DT2$time)]
DT2[, id := 1:3]

setkey(DT1, "x", "id")
setkey(DT2, "x", "id")
print(DT1[DT2][, id := NULL])
#    x time v time.1
# 1: a   30 2     17
# 2: b   60 6     54
# 3: c   10 7      3 
```

想法：首先按时间对 data.table 进行排序，因为 的第二个参数`findInterval`需要增加值的顺序。现在，使用来查找fall中的值在`findInterval`哪个区间并将其存储在. 在这种特殊情况下，它恰好介于 1 到 3 之间。因此，将这些值设置为. 一旦你找到了区间并得到，那就很简单了。而不是设置and ，设置and作为键并进行合并。`3, 17, 54``DT1$time``id``id``DT2``id``x``time``x``id`

**注意：**假设您`DT1$time`的值为 0，则该间隔将为 0。因此，您将获得 4 个唯一值 (0:3)。在这种情况下，最好将 DT2 也设置为 time = 0 值。我只是想在这里指出这一点。我会把它留给你。

# delphi - Undeclared identifier .WorkSheets OLE Excel

> ID：15712827
> 
> 赞同：2
> 
> 时间：2013-03-29T23:06:45.167
> 
> 标签：delphi, delphi-xe2

I have a problem with delphi and excel ole automation. Use this code:

```
uses
ComObj
var
XlApp: Variant;
begin
L_v.Caption: = 'D:\bd1\support\Vi.xls';
XlApp: = CreateOleObject ('Excel.Application');
XLApp.Visible: = True;
XLApp.WorkBooks.Open (L_vi.Caption);
XLApp.Workbooks [1]. Worksheets. [1] Name: = 'Sheet1';
Sheets: = XLApp.Workbooks [1]. Worksheets ['test']; 
```

but I get an error undeclared identifier 'Worksheets' at line .....

I do not understand why.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T23:40:00.537

（请参阅下面的我的编辑，标记为**已更新：**。）

如果这是您的实际代码

```
XLApp.Workbooks [1]. Worksheets. [1] Name: = 'Sheet1'; 
```

你有一个语法错误`Worksheets.[1]Name`。（`.`在错误的地方。）它应该是

```
XLApp.Workbooks[1].Worksheets[1].Name := 'Sheet1'; 
```

这在 XE3 中对我来说很好：

```
var
  XLApp: OleVariant;
begin
  XLApp := CreateOleObject('Excel.Application');
  XLApp.Visible := True;
  XLApp.Workbooks.Open('C:\Test\Test.xls');
  XLApp.Workbooks[1].Worksheets[1].Name := 'New Sheet Name';
end; 
```

**更新：**在您发表评论后，我想我了解您可能遇到的问题。

我认为`Error Insight`这让您感到困惑（红色下划线和“未定义标识符”弹出窗口，实际上是错误的）。

我在此处发布的代码在发布之前已在 XE3 中编译并实际执行，并且可以正常工作。但是，如果我将光标放在 上`Worksheets`，我会看到`Undeclared identifier`弹出窗口和红色下划线。当然，它在一个方面是正确的——*没有*`Worksheets`被宣布。但是，当您使用后期绑定（在运行时使用）时，它不一定是。*`CreateOleObject`*

 *`Error Insight`是错误的（自从它被添加到 IDE 之后就一直存在）。我做的第一件事（当我看到错误尚未修复时）是关闭它（工具->选项->编辑器选项->代码洞察，取消选中`Error Insight`右侧）。让真正的编译器来解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-14T11:44:38.567

尝试...

```
Var 
Sheet: Olevariant;
...
   for possheet := 1 to newWorkbook.Worksheets.Count do
   Begin
        Sheet:=newWorkbook.Sheets[possheet];
        combobox1.Items.Add(Sheet.Name)
   End; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-13T14:29:54.997

通过这种方式在 delphi 中使用 excel 有点困难，因为您无法清楚地看到建议。

我将粘贴一些我拥有的代码`Variant`，`Excel`以便您使用它。

```
uses
System.Win.ComObj, Excel2010
...

procedure GerarExcel(ADBGrid: TDBGrid; AQuery: TFDQuery);
var
  Excel: Variant;
  linha, coluna, I, X: Integer;
begin
  {Here you create the Excel Application Object}
  Excel := CreateOleObject('Excel.Application');
  {If you want to open the excel you can set this line to True.
  In case you want to save directly without user intervention you can set to False.}
  Excel.Visible :=True;
  Excel.Workbooks.Add;

  {In this case
  Titles begin on the (4) line and different columns (1-7)}
  Excel.WorkBooks[1].Sheets[1].Cells[4,1].Interior.ColorIndex := 55;
  Excel.WorkBooks[1].Sheets[1].Cells[4,1].Font.ColorIndex := 2;
  Excel.WorkBooks[1].Sheets[1].Cells[4,1].Font.Bold := True;
  Excel.WorkBooks[1].Sheets[1].Cells[4,1].font.size := 10;
  Excel.WorkBooks[1].Sheets[1].Cells[4,1] := 'Your Title 2';
  Excel.WorkBooks[1].Sheets[1].Cells[4,1].ColumnWidth := 15;

  ...

  Excel.WorkBooks[1].Sheets[1].Cells[4,7].Interior.ColorIndex := 55;
  Excel.WorkBooks[1].Sheets[1].Cells[4,7].Font.ColorIndex := 2;
  Excel.WorkBooks[1].Sheets[1].Cells[4,7].Font.Bold := True;
  Excel.WorkBooks[1].Sheets[1].Cells[4,7].font.size := 10;
  Excel.WorkBooks[1].Sheets[1].Cells[4,7] := 'Your Title 7';
  Excel.WorkBooks[1].Sheets[1].Cells[4,7].ColumnWidth := 17;
  Excel.WorkBooks[1].Sheets[1].Cells[4,7].HorizontalAlignment := 4;
  Excel.WorkBooks[1].Sheets[1].Cells[4,7].verticalAlignment   := 1;

  I := 1;
  {In case you want to loop through a TClientDateSet to fill in the cells}
  with AQuery do
  begin
    First;
    while not Eof do
    begin
      {To change to a specific format}
      Excel.WorkBooks[1].Sheets[1].Cells[I + 4, 1].NumberFormat := 'dd/mm/aaaa';
      Excel.WorkBooks[1].Sheets[1].Cells[I + 4, 1] := FieldByName(C_DATA).AsDateTime;
      Excel.WorkBooks[1].Sheets[1].Cells[I + 4, 2] := FieldByName(C_CONTA_CREDITO).AsString;
      Excel.WorkBooks[1].Sheets[1].Cells[I + 4, 3] := FieldByName(C_CONTA_DEBITO).AsString;
      Excel.WorkBooks[1].Sheets[1].Cells[I + 4, 4].NumberFormat := 'R$#.##0,00';
      Excel.WorkBooks[1].Sheets[1].Cells[I + 4, 4] := FieldByName(C_VALOR).AsString;
      Excel.WorkBooks[1].Sheets[1].Cells[I + 4, 5] := FieldByName(C_DESCRICAO).AsString;
      Excel.WorkBooks[1].Sheets[1].Cells[I + 4, 6] := FieldByName(C_NOME).AsString;
      Excel.WorkBooks[1].Sheets[1].Cells[I + 4, 7] := FieldByName(C_NOME_MOVIMENTO).AsString;
      Inc(I);

      Next;
    end;
  end;

  {All these variables configure the for landscape printing.}
  Excel.ActiveSheet.PageSetup.RightFooter := 'Página &P de &N';
  Excel.ActiveSheet.PageSetup.LeftFooter := '&D';
  Excel.ActiveSheet.PageSetup.Orientation := 2;
  Excel.ActiveSheet.PageSetup.PaperSize := xlPaperA4;
  Excel.ActiveSheet.PageSetup.FitToPagesTall := False;
  Excel.ActiveSheet.PageSetup.Zoom := False;
  Excel.ActiveSheet.PageSetup.FitToPagesWide := 1;

  {If you want the user to see the excel being opened and save it wherever the user wants
  You are done here.}

  {Save the file automatically
  If you want the user to NOT see the excel being opened and save the file in a specific folder automatically
  In the beginning you need to set Visible := False and then these lines}
  FilePath := 'C:\...\my_excel_file.xlsx';
  if FileExists(FilePath) then
    DeleteFile(FilePath);
  Excel.WorkBooks[1].Sheets[1].SaveAs(FilePath);

  Excel.Quit;
end; 
```

在[VBA API Microsoft 文档](https://docs.microsoft.com/en-us/office/vba/api/excel.chart.saveas)中，您可以找到更多信息。*

# windows-phone-8 - 如何在 WP8 中实现自定义导航

> ID：15712829
> 
> 赞同：0
> 
> 时间：2013-03-29T23:07:02.910
> 
> 标签：windows-phone-8, navigationservice

我对 Windows Phone 开发完全陌生。实际上，我尝试为我的应用程序实现导航流程。

我想实现这个简单的流程：

1.  当应用程序启动时，我检查用户是否已经登录
2.  然后，我导航到 MainPage 等等
3.  否则我导航到登录页面
4.  如果登录成功，用户继续登录页面并转到主页

我已经尝试了一些解决方案，例如：

在 App.xaml.cs 中

```
UriMapper mapper = Resources["uriMapper"] as UriMapper;
RootFrame.UriMapper = mapper;

Uri loginPage = new Uri("/LoginPage.xaml", UriKind.Relative);
Uri mainPage = new Uri("/MainPage.xaml", UriKind.Relative);

if (!ClientApi.IsAuthenticated)
{
    mapper.UriMappings[0].MappedUri = loginPage;
}
else
{
    mapper.UriMappings[0].MappedUri = mainPage;
} 
```

工作，但登录后我无法导航到我的应用程序中的其他页面

我在 MainPage 中覆盖 OnNavigatedTo(NavigationEventArgs e)

```
if (!App.ClientApi.IsAuthenticated)
{                
    NavigationService.Navigate(new Uri("/LoginPage.xaml", UriKind.Relative));
} 
```

但是当我点击后退按钮时，应用程序不会返回并停留在登录页面上。（我明白为什么。上一页是主页，我覆盖了导致循环的 OnNavigatedTo）

我究竟做错了什么？

PS：

I'm using

*   MVVM light (and Navigation based messaging [describe in this post](http://blog.galasoft.ch/archive/2011/01/06/navigation-in-a-wp7-application-with-mvvm-light.aspx))
*   Windows Phone 8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T07:57:16.577

You need to overwrite the [MapUri](http://msdn.microsoft.com/en-us/library/windowsphone/develop/system.windows.navigation.urimapper.mapuri%28v=vs.105%29.aspx "MapUri") method of your [UriMapper](http://msdn.microsoft.com/en-us/library/windowsphone/develop/system.windows.navigation.urimapper%28v=vs.105%29.aspx "UrMapper").

The [documentation](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206987%28v=vs.105%29.aspx "documentation") states:

> > When the app is launched, it assigns the URI mapper during initialization. Before launching any pages, the app calls the MapUri method of the URI mapper to determine which page to launch. The URI that the URI mapper returns is the page that the app launches.

Or you use one of these proposed solutions:

[SO](https://stackoverflow.com/questions/12035720/windows-phone-navigation-immediately-after-loading-page?rq=1 "solution")

[MSDN Blog](http://blogs.msdn.com/b/ptorr/archive/2010/08/28/redirecting-an-initial-navigation.aspx?wa=wsignin1.0 "MSDN Blog")

Last one seems most fitting.

# java - Improve the speed of reading and persisting Apache POI excel file

> ID：15712831
> 
> 赞同：1
> 
> 时间：2013-03-29T23:07:09.707
> 
> 标签：java, mysql, apache, jpa, apache-poi

I have an Excel file that I am currently able to import into a mySQL database, but I would like to increase the speed of the import somewhat. My set up for reading the Excel files (approx 40,000 rows in each file, 10-15 columns) and persisting is as follows:

*** Java Code ***

```
public void importFileToDataBase(String file) {
        try {
            FileInputStream latestExcelFile = new FileInputStream(file);
            wb = WorkbookFactory.create(myFile);
        } catch (Exception ex) {
        }

        Sheet bigSheet = wb.getSheetAt(0);

        for (int i = 1; i <= bigSheet.getLastRowNum(); i++) {

            try {

                row = bigSheet.getRow(i);
                String bigSheetId = i + "";
                Date column1 = row.getCell(0).getDateCellValue();
                int column2 = (int) row.getCell(1).getNumericCellValue();
                int column3 = (int) row.getCell(3).getNumericCellValue();
                int column4 = (int) row.getCell(4).getNumericCellValue();
                int column5 = (int) row.getCell(5).getNumericCellValue();
                int column6 = (int) row.getCell(6).getNumericCellValue();
                int column7 = (int) row.getCell(7).getNumericCellValue();
                String column8 = row.getCell(9).toString();
                String column9 = row.getCell(11).toString();
                String column10 = row.getCell(12).toString();
                String column11 = row.getCell(13).toString();
                int column12 = (int) row.getCell(8).getNumericCellValue();
                Double column13 = row.getCell(10).getNumericCellValue();
                String column14 = row.getCell(2)
                        .toString();

                BigSheet mySheet = new BigSheet(
                        baseDataTableId, column1, column2, column3, column4,
                        column5, column6, column7, column8, column9,
                        column10, column11, column12, column13, column14);

                putInDatabase(mySheet);
            } catch (Exception ex) {}
        } 
```

Is there a way to improve the speed of the import via batching?

If so, could you give an example of how to do this (if it's possible)?

# timezone - 如何从 hsqldb 中的 unix 时间戳中正确获取 UTC 时间戳

> ID：15712832
> 
> 赞同：1
> 
> 时间：2013-03-29T23:07:14.097
> 
> 标签：timezone, hsqldb, unix-timestamp

在 hsqldb 中，函数 TIMESTAMP ( ) 返回一个 WITHOUT TIME ZONE 时间戳，该时间戳在任何进一步转换之前调整为会话的时区。

所以可以说我的会话是在 UTC+1 并且我有一个来自其他地方的 1364353339 （星期三，2013 年 3 月 27 日 03:02:19 GMT，根据[http://www.onlineconversion.com/unix_time.htm](http://www.onlineconversion.com/unix_time.htm) ） . 如果我打电话：

```
VALUES( TIMESTAMP( 1364353339 ) AT TIME ZONE INTERVAL '0:00' HOUR TO MINUTE ); 
```

这给出了`2013-03-27 02:02:19.000000+0:00`. 这具有正确的 tz，但实际值比应有的值少一小时。

我探索过的其他可能性

```
VALUES( TIMESTAMP( 1364353339 ) AT LOCAL ) --> 2013-03-27 03:02:19.000000+1:00
Value right, TZ wrong

VALUES CAST(TIMESTAMP(1364353339) AT TIME ZONE INTERVAL '0:00' HOUR TO MINUTE AS TIMESTAMP(0) WITH TIME ZONE); --> 2013-03-27 02:02:19+0:00
Value wrong, TZ right

VALUES CAST(TIMESTAMP(1364353339) AT LOCAL AS TIMESTAMP(0) WITH TIME ZONE) --> 2013-03-27 03:02:19+1:00
Value right, TZ wrong 
```

如果会话的时区先前切换到 UTC（例如使用） ，所有这些都将返回正确的值（`2013-03-27 03:02:19+0:00`或）。`2013-03-27 04:02:19+1:00``SET TIME ZONE INTERVAL '0:00' HOUR TO MINUTE`

I cannot do that as this is being computed for a view field. Actual timestamps are coming from a field on a text table.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T01:08:49.153

This will probably work in all time zones:

```
VALUES TIMESTAMP(1364353339) + SESSION_TIMEZONE() 
```

These forms are also possible:

```
VALUES TIMESTAMP(1364353339) + DATABASE_TIMEZONE()
VALUES TIMESTAMP(1364353339) + TIMEZONE() 
```

The DATABASE_TIMEZONE() can be different from the session in client-server setups. The TIMEZONE() can be different from SESSION_TIMEZONE() if SET TIME ZONE is used

# sql - 将重复值移动到唯一列中

> ID：15712836
> 
> 赞同：1
> 
> 时间：2013-03-29T23:07:44.143
> 
> 标签：sql, oracle

我在这里发现了一个类似的问题：[Move duplicate values to another column](https://stackoverflow.com/questions/9219048/move-duplicate-values-to-another-column)，但我不确定这是否适合我。

以下是数据的设置方式：

```
Account_ID  Phone Number  Phone Number ID
1           1             1
1           2             2
1           3             3
1           4             4
1           5             5
1           6             6
2           1             1
2           2             2
2           3             3
2           4             4
2           5             5
2           6             6 
```

每个帐户 ID 对 6 个电话号码中的每一个都有一个条目。我希望它看起来像这样：

```
Account_ID  Phone Number 1  Phone Number 2  Phone Number 3  etc.
1           1               2               3
2           2               2               2 
```

我试过使用这样的`CASE`语句：

```
SELECT
Account_ID,
CASE Phone Number ID
WHEN 1 THEN Phone Number END AS "Phone Number 1"
CASE Phone Number ID
WHEN 2 THEN Phone Number END AS "Phone Number 1"
etc.…
GROUP BY 
Case CASE Phone Number ID
WHEN 1 THEN Phone Number END
etc.… 
```

但它仍然没有正确地将数据合并到每个 Account_ID 的单行中。它将与电话号码 ID 对应的电话号码放在正确的列中，但每个 Account_ID 仍然是它自己的行。

有什么想法吗？我上面提供的链接对于这么多领域来说太嵌套、太慢而且太笨重了。我还是写了一个版本来测试它，但它已经运行了 15 分钟。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T23:27:22.060

您可以使用**PIVOT**来获得所需的输出。

```
 select * from 
(table1 
   pivot (max("Phone Number") for "Phone Number ID"
  in ('1' as "Phone Number 1",
      '2' as "Phone Number 2",
      '3' as "Phone Number 3",
      '4' as "Phone Number 4",
      '5' as "Phone Number 5",
      '6' as "Phone Number 6"))
 ) 
```

**[SQL 小提琴演示](http://sqlfiddle.com/#!4/ebe14/17)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T23:18:31.357

你很亲密。你需要 a`case`和 a`max`和 a `group by`：

```
select Account_ID,
       max(CASE Phone Number ID = 1 then Phone Number end) as "Phone Number 1",
       max(CASE Phone Number ID = 2 then Phone Number end) as "Phone Number 2",
       max(CASE Phone Number ID = 3 then Phone Number end) as "Phone Number 3",
       . . .
from . . .
group by Account_Id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T23:22:38.177

你可以用一堆连接来做到这一点

```
WITH accounts 
     AS (SELECT DISTINCT account_id 
         FROM   phones) 
SELECT a.account_id, 
       one.phone_number   phone_number_1, 
       two.phone_number   phone_number_2, 
       three.phone_number phone_number_3, 
       four.phone_number  phone_number_4, 
       five.phone_number  phone_number_5, 
       six.phone_number   phone_number_6 
FROM   accounts a 
       LEFT JOIN phones one 
              ON a.account_id = one.account_id 
                 AND one.phone_number_id = 1 
       LEFT JOIN phones two 
              ON two.account_id = two.account_id 
                 AND two.phone_number_id = 2 
       LEFT JOIN phones three 
              ON a.account_id = three.account_id 
                 AND three.phone_number_id = 3 
       LEFT JOIN phones four 
              ON a.account_id = four.account_id 
                 AND four.phone_number_id = 4 
       LEFT JOIN phones five 
              ON a.account_id = five.account_id 
                 AND five.phone_number_id = 5 
       LEFT JOIN phones six 
              ON a.account_id = six.account_id 
                 AND six.phone_number_id = 6 
```

[演示](http://sqlfiddle.com/#!4/6bebf/5)

# c++ - C++：如何调用具有多个参数的基类构造函数？

> ID：15712845
> 
> 赞同：0
> 
> 时间：2013-03-29T23:08:48.097
> 
> 标签：c++, oop, constructor, derived-class

```
class BaseClass {
public:
  BaseClass(const byte *buff, long size) { 
     // Some Computation
  }
};

class DerivedClass: public BaseClass {
public:
  std::vector<byte> filebuff;
  long buff_size;
  DerivedClass(): BaseClass(/*How should I send stuff here?*/) 
  { 
  }
  /*return type??*/  cal_func(){
   // Some computation involving file descriptors.
   // Store result in filebuff. Store size of filebuff in buff_size.
    return /*what??*/;
  }
} 
```

我只能想到以下解决方案：

```
 DerivedClass(): BaseClass(&filebuff[0], cal_func) 
```

在上述情况下，我将使用函数 func() 返回文件缓冲区的长度。我依赖于 filebuff 只是一个地址这一事实，因此编译器将 func 的计算值首先放在堆栈上还是第一个 arg，filebuff 上并不重要。

请告诉我这是否是这样做的正确方法。如果第一个参数不是地址和其他需要在函数 func 中执行计算的计算值，那么最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T23:37:59.360

看起来您正在尝试包装一个其他人编写的类（例如，在不同的库中），该类接受两个参数，另一个类（您编写的）具有更清晰的接口。我对么？

您提出的解决方案是从另一个基类派生，然后使用派生类存储放在基类中的参数。上述方法的问题在于，当您调用基类构造函数时，派生类尚未完全构造（即 filebuff 和 bufsize 不能保证已初始化为任何内容）。

我建议使用另一种方法，而不是派生，您有一个 WrapperClass 包含基类以及您拥有的两个数据成员，如下所示：

```
class Wrapper {
public:
  Base base;
  std::vector<byte> filebuff;
  long buff_size;
  Wrapper();
} 
```

所以在包装类的构造函数中，可以进行如下操作：

```
WrapperClass::WrapperClass() {
  //do whatever you want to initialize filebuff and buffsize here
  calcfunc();

  //now pass them in to your base class
  base = Base(filebuff, buffsize);
} 
```

[编辑]

# 选择

上面的解决方案假设你的基类有一个默认的构造函数，即Base()。可能它没有，并且您无法创建一个。如果是这样，那么上面的代码将无法编译，因为无法默认初始化`base`成员变量。另一种方法是使用指向 Base 类的指针，例如`Base*`、 或`std::unique_ptr<Base>`，或某种此类机制，而不是直接使用 Base 成员。这样，您可以准确控制 Base 类的初始化时间。所以：

```
//class definition
class Wrapper {
public:
  std::unique_ptr<Base> base;
  std::vector<byte> filebuff;
  long buff_size;
  Wrapper();
}

//...

//constructor implementation
WrapperClass::WrapperClass() {
  //do whatever you want to initialize filebuff and buffsize here
  calcfunc();

  //now pass them in to your base class
  base = new Base(filebuff, buffsize);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T23:49:01.870

问题是您在初始化之前尝试使用`filebuff`它，因为在非静态成员的构造函数之前调用了基类的构造函数。我同意 ildjarn 的观点，即最好的解决方案是在这里用组合替换继承：

```
class BaseClass {
public:
  BaseClass(const byte *buff, long size) { 
     // Some Computation
  }
};

class YourClass {
public:
  std::vector<byte> filebuff;
  long buff_size;
  BaseClass base;

  DerivedClass()
    : /* initialize filebuff and buff_size */, base(&filebuff[0], buff_size) {}
}; 
```

The members will be initialized in the order they appear in the class definition so you'll be able to pass `filebuff` and `buff_size` to the base's constructor.

See also [this answer](https://stackoverflow.com/a/2669911/471164) to the question "C++: Initialization Order for Member Classes".

# smalltalk - Smalltalk and MySQL

> ID：15712846
> 
> 赞同：1
> 
> 时间：2013-03-29T23:08:50.807
> 
> 标签：smalltalk

I need to do a project in Smalltalk and use relational database. I am a bit confused as I can not find much help on relational database and I need to finish the project in 20 days. Can someone please point me to a nice tutorial with examples or is n't using relational database with Smalltalk a good idea. I need suggestions. Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T15:04:50.460

如果您正在使用 Web 界面进行开发，那么在与我的孩子们进行了长时间的实验之后，我们认为 PHARO + GEMSTONE + SEASIDE 确实是最好的选择。使用 Pharo 开发，使用 Gemstone 部署，*忘掉*肮脏和麻烦的关系数据库部分。所需要的只是处理内存中的对象，神奇的是一切都是持久的。不幸的是，“设置过程”的学习曲线很陡峭，并且涉及多个参与者，除非事先知道每个参与者。

# symfony - symfony 表单的两个问题

> ID：15712849
> 
> 赞同：1
> 
> 时间：2013-03-29T23:09:03.647
> 
> 标签：symfony, symfony-2.1, symfony-forms

我创建了简单的表单，允许用户输入评论。但我想要实现的是为特定用户保存到数据库中的评论（让我们说用户 id）我不知道该怎么做。这是我所做的：

```
function some Controller(){
    $baza = new baza();

    $em = $this->getDoctrine()->getManager();
    $em->persist($baza);

    $comment = $this->createFormBuilder($baza)
                ->add('comment', 'text')
                ->getForm();

    if ($request->getMethod() == 'POST') {
        $comment->bind($request);
        if ($comment->isValid()) {
            $em->flush();
            echo "your comment have been submited";
        }

    return $this->render('AcmeWebBundle:Default:index.html.twig'
        ,array('users'   => $users
              ,'count'   => $total
              ,'comment' => $comment->createView()
    ));
} 
```

但是通过这种方式，不会为特定用户保存评论，而是在数据库中创建新行：/

此外还有树枝代码：

```
 {% extends 'AcmeWebBundle:Default:master.html.twig' %}
{% block strana %}
<h3>Total users: {{ count }} </h3>
{% endblock %}
{% block body %}
<h1> Recently booked</h1><br></br>
{% for user in users %}
<strong><em>{{ user.username}}</em></strong><p> From : <b>{{ user.from }}</b> To : <b>{{ user.to }}</b><br></br>
Car: <b>{{ user.car}}</b> &nbsp;Leaving on : <b>{{ user.date }}</b><br><br>
Price: <b>{{ user.price }} </b><br></br>
Comments:<br></br> {{ user.comment }} //* first to display all the comments, and than add another one *//
<br><br>

    <form action="{{ path('acme_web_homepage') }}"  method="post" {{ form_enctype(comment) }}>
        {{ form_widget(comment) }}{{ form_widget(comment['comment']) }}
     {{ form_rest(comment) }}

        <input type="submit" value=" New Comment" />
    </form>

    <br><br>-------------------------------
    </p>
    {% endfor %}{% endblock %} 
```

对于第一个用户，评论正文的空白字段也只显示一次......谢谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T23:43:20.013

与第 1 项相关：

```
form->bind($request); 
```

将表单中的数据放入实体中；*因此，您需要在*绑定后坚持。尝试：

```
 $baza = new baza();

    $em = $this->getDoctrine()->getManager();
    $em->persist($baza);

    $comment = $this->createFormBuilder($baza)
                    ->add('comment', 'text')
                    ->getForm();

    if ($request->getMethod() == 'POST') {
    $comment->bind($request);

    if ($comment->isValid()) {
        $em->persist($baza);        // Lighthart's change
        $em->flush();
        echo "your comment have been submited";
    } 
```

此外，为什么要持久化一个空对象也不是很明显，但这样做显然不是一个坏主意。

The second item cannot be addressed without seeing controller code, and I recommend you submit a new question so crosstalk does not dilute the answer.

# linux - 使用 grep 提取匹配后的第一个单词

> ID：15712855
> 
> 赞同：0
> 
> 时间：2013-03-29T23:09:49.420
> 
> 标签：linux, sed, awk, grep

我正在尝试从本机 PHP 中的所有脚本中提取所有 MySQL 查询。我希望仅使用 grep 从下面的查询中提取表名。以下是我的努力浪费在我想出的东西上。

```
FROM 'tablename'

FROM tablename

FROM apn.tablename

FROM apn.table_name

FROM 'apn.tablename'

grep -ionER "(FROM)[[:space:]](.*[a-zA-Z\d_.\`])[\s]" 
```

重要的是 grep 捕获在表名结束后立即停止捕获文本，而我的 grep 没有。

我需要结果来显示这些信息：

（脚本位置）：（行号）：（表名）

`/var/www/sites... : Line 31 : example_table_name`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T04:09:28.123

Don't use grep. This is tailor-made job for Awk:

```
awk '$1 == "FROM" { print $2 }' 
```

**EDIT** Thanks to @rojo for this suggestion

```
awk 'BEGIN{FS="from|FROM|where|WHERE"} /from|FROM/ {print $2}' 
```

**EDIT 2**: WIth filename and line #

```
awk 'BEGIN{FS="from|FROM|where|WHERE"}
      /from|FROM/ {printf ("%s:%d:%s\n", FILENAME, NR, $2)}' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T03:45:19.027

向后看会完成你想要的吗？

```
grep -P -i -o '(?<=from )\S+' *.php | sed -r 's/^\W|\W$//g' 
```

### 更新：

如果您还想打印文件名和行号，您可能需要一个`for`循环：

```
for i in `grep -R --include=*.php -l -i 'FROM' /var/www/sites`; do grep -Pion '(?<=from )\S+' $i | sed -r -e "s/['\`\"]/ /g" -e 's#^#'$i'... : line #'; done 
```

这工作如下：

*   对于每个文件
    *   `grep`递归，打印文件名，不区分大小写的`FROM`搜索`*.php`
*   做
    *   查找后面的非空格`"from "`，仅打印行号和匹配的单词
    *   用于`sed`替换`'"``为空格并在行首插入文件名

### 示例会话：

```
rojo@pico:~$ cat Desktop/test.php
' SELECT * FROM `contacts` WHERE 1=1' test data here that should be cut out'

rojo@pico:~$ for i in `grep -R --include=*.php -l -i 'FROM' .`; do grep -Pion '(?<=from )\S+' $i | sed -r -e "s/['\`\"]/ /g" -e 's#^#'$i'... : line #'; done
./Desktop/test.php... : line 1: contacts 
```

* * *

这是另一种使用方法`awk`：

```
find /var/www/sites -type f -iname '*.php' -print0 | xargs -0 awk 'BEGIN {FS="from|FROM|where|WHERE"} {++x;} /from|FROM/ {printf "%s... : line %d : %s%s", FILENAME, x, $2, ORS}' 
```

... But I haven't figured out how to make it strip quotes / backticks / apostrophes surrounding the table names. I could probably pipe it through `sed` or `tr` if it's important, but there has to be a more graceful way to do it.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T01:42:54.687

我尝试了以下行。它将使用点、破折号和单引号来获取您的示例，并提取表名。您可以使用 grep/gawk/sed 部分并循环遍历您的 PHP 代码。

```
    echo "select * from 'the_db.the_table' where the_result=1;" | grep -ioE "(来自)[[:space:]]([a-zA-Z0-9\_\.\']*)[[:space:]]" | gawk '{ 打印 $2 }' | sed -es/\'//g

    the_db.the_table

```

# r - 如何在 r 中的 data.table 中评估（或创建）动态列

> ID：15712858
> 
> 赞同：7
> 
> 时间：2013-03-29T23:10:11.573
> 
> 标签：r, data.table

我想创建一个新的 data.table 或者只是向 data.table 添加一些列。指定多个新列很容易，但是如果我想要第三列根据我正在创建的列之一计算值会发生什么。我认为 plyr 包可以做这样的事情。我们可以在 data.table 中执行这样的迭代（顺序）列创建吗？

我想做如下

```
dt <- data.table(shop = 1:10, income = 10:19*70)
dt[ , list(hope = income * 1.05, hopemore = income * 1.20, hopemorerealistic = hopemore - 100)] 
```

或许

```
dt[ , `:=`(hope = income*1.05, hopemore = income*1.20, hopemorerealistic = hopemore-100)] 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-30T01:03:24.827

您还可以`<-`在调用中使用，`list`例如

```
DT <- data.table(a=1:5)

DT[, c('b','d') := list(b1 <- a*2, b1*3)]
DT
   a  b  d
1: 1  2  6
2: 2  4 12
3: 3  6 18
4: 4  8 24
5: 5 10 30 
```

或者

```
DT[, `:=`(hope = hope <- a+1, z = hope-1)]
DT
   a  b  d hope z
1: 1  2  6    2 1
2: 2  4 12    3 2
3: 3  6 18    4 3
4: 4  8 24    5 4
5: 5 10 30    6 5 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-30T00:36:10.827

`j` 可以通过在有多种方法中使用花括号和分号来实现它，这里有两个示例：

```
# If you simply want to output: 

dt[ ,
  {hope=income*1.05;
   hopemore=income*1.20;
   list(hope=hope, hopemore=hopemore, hopemorerealistic=hopemore-100)}
]

# if you want to save the values

dt[ , c("hope", "hopemore", "hopemorerealistic")  := 
  {hope=income*1.05;
   hopemore=income*1.20;
   list(hope, hopemore, hopemore-100)}
]
dt
#     shop income   hope hopemore hopemorerealistic
#  1:    1    700  735.0      840               740
#  2:    2    770  808.5      924               824
#  3:    3    840  882.0     1008               908
#  4:    4    910  955.5     1092               992
#  5:    5    980 1029.0     1176              1076
#  6:    6   1050 1102.5     1260              1160
#  7:    7   1120 1176.0     1344              1244
#  8:    8   1190 1249.5     1428              1328
#  9:    9   1260 1323.0     1512              1412
# 10:   10   1330 1396.5     1596              1496 
```

# android - Can´t connect to Web Service from Android

> ID：15712859
> 
> 赞同：0
> 
> 时间：2013-03-29T23:10:24.823
> 
> 标签：android, asp.net, web-services, ip

I'm quite new to `Android` and `WebServices` and at the moment I'm reading many info about Web Services, SOAP, etc.

I'm trying to write a Web Service example that just says Hello and it works in my browser but from my Android device/emulator doesn't work. I have set its IP to my PC ipv4 address and I have turned off the firewall and the antivirus. However if in the browser I try to connect to this IP it says 404\. (I don't know if this is normal) I'm also using local IIS with the following URL: `http://localhost/HelloAndroid` .

Here is the code of my Web Service:

```
namespace HelloAndroid
{
    [WebService(Namespace = "http://sample.com/")]
    public class Service1 : System.Web.Services.WebService
    {
        [WebMethod]
        public string SayHello()
        {
            return "Hello, Android from .NET";
        }
    }
} 
```

Android Activity:

```
public class SoapTestActivity extends Activity {
    TextView result;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        result = (TextView)findViewById(R.id.result);

        final String NAMESPACE = "http://sample.com/";
        final String METHOD_NAME = "SayHello";    
        final String SOAP_ACTION = "http://sample.com/SayHello";
        final String URL = "http://192.168.1.35/HelloAndroid/Service1.asmx";

        try {
            SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);            
            SoapSerializationEnvelope envelope = new      SoapSerializationEnvelope(SoapEnvelope.VER11);
            envelope.dotNet = true;
            envelope.setOutputSoapObject(request);

            HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
            androidHttpTransport.call(SOAP_ACTION, envelope);
            SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
            String resultValue = response.toString();

            result.setText(resultValue);          
        }
        catch (Exception e) {
            result.setText(e.getMessage());
        }
    }
} 
```

Thank you for your time

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-04T20:55:21.003

首先，您要检查从服务器计算机上的 Internet 浏览器通过[http://192.168.1.35/HelloAndroid/Service1.asmx直接访问 Web 服务。](http://192.168.1.35/HelloAndroid/Service1.asmx)如果没问题，请尝试更正客户端（soap 请求和响应）代码。否则，请按照此[链接](https://stackoverflow.com/questions/19554996/cant-access-web-api-with-ipport-but-can-with-localhostport-during-vs-debug-mo)首先访问服务器。如果存在问题，请尝试以下操作：从控制面板注册框架：

程序和功能 > 打开或关闭 Windows 功能 > 信息信息服务 > 万维网服务 > 应用程序开发功能 > 选择 ASP.NET 4.5（您使用的版本）

单击确定。

完毕！

# php - 将幻灯片添加到 wordpress 的主页

> ID：15712862
> 
> 赞同：1
> 
> 时间：2013-03-29T23:10:31.060
> 
> 标签：php, html, wordpress, slideshow

我正在尝试为网站创建 WordPress 主题，并希望在 index.php 中添加幻灯片。由于我不想在索引上显示帖子而只显示幻灯片，我可以删除 WordPress Loop 吗？还是我需要保留它？如果我必须保留它，我该怎么做才能只显示幻灯片？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T23:21:14.820

我不会为了删除首页的循环而弄乱 index.php 页面。您应该创建一个名为 home.php 的新文件，从 index.php 复制所有内容并删除那里的循环。home.php 将用作您的主页，如果您想使用普通的 index.php，那么您仍然可以使用它。

您甚至可以创建一个非常容易做到的自定义页面模板。

1.  创建一个新文件，标题为你想要的。我会使用类似 template-home.php
2.  添加注释 /*模板名称：主页*/。
3.  从另一个文件（例如 page.php）复制内容并进行首选编辑
4.  创建一个新页面并在页面属性下选择页面模板。
5.  转到设置>阅读并为您的主页选择一个静态页面，然后选择您刚刚创建的页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T23:16:38.900

您可能不想在主页上显示帖子。

如果是这样，那么我建议您改为创建[静态首页或启动页面。](http://codex.wordpress.org/Creating_a_Static_Front_Page)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T23:11:29.430

如果您不需要检索帖子或回复等，您可以删除 wordpress 循环。

** 但是，我不建议这样做，因为您可能想从需要的特定页面中提取图像`the loop`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-24T10:21:59.960

您可以添加自己的 HTML 和 JS 只需按照以下步骤 1- 使用记事本创建一个新的 HTML 文件（将其保存为 slideshow.html）并将此代码粘贴到其中

```
 <html>
      <head>

          <title>Image Slideshow</title>

              <style type="text/css">

                  /* All Styles Optional */

                   * {
            font-family:calibri,arial;
                font-size:16pt;
                }

                div#show {
                background-color:#efefe7;
                width:400px;
                margin:0; padding:2px;
                border:1px solid #909090;
                }

                div#show table input,  div#show4 table input {
                outline-style:none;
                }

                </style>

                <!--[if IE]>
                <style type="text/css">
                div#show table td, div#show4 table td {
                height:21px;
                }
                </style>
                <![endif]-->

                <script src="swissarmy.js" type="text/javascript"></script>

                <script src="slideshow.js" type="text/javascript"></script>

                </head>

                <body style="margin:0; padding:0;">

                <div id="show"><script type="text/javascript">new                                                                                                                                      
                 inter_slide(slideShow)</script></div>
               </body>

               </html> 
```

2-然后使用记事本创建一个新文件并将其保存为 swissarmy.js 并将其粘贴到其中“[这里是代码](http://smartboy16.hostingsiteforfree.com/SlideshowFOP/swissarmy)”

3-使用记事本创建另一个文件并将其另存为 slideshow.js 并将图像网址替换为其中的网址 [这是代码](http://smartboy16.hostingsiteforfree.com/SlideshowFOP/slideshow)

4-将所有这些文件放在一个文件夹中并打开slideshow.js，然后将图像替换为您自己的图像，并将文本替换为您想要的文本5-打开HTML文件，它将起作用

# java - Java 无法打印从 file1.txt 到 file2.txt 的所有行？

> ID：15712864
> 
> 赞同：0
> 
> 时间：2013-03-29T23:11:00.620
> 
> 标签：java

我正在从 file1.txt 中读取行，并且仅将选定的几行复制到 file2.txt。但是java不会根据我的代码复制所有应该复制的行。不复制底部的 625 行。我必须注意，应该复制的行都显示在控制台上。所以txt文件没有问题。这里出了什么问题？代码如下：

```
InputStream i = new FileInputStream("file1.txt");
        InputStreamReader is=new InputStreamReader(i);
        BufferedReader bsa = new BufferedReader(iq);

        FileWriter fw=new FileWriter("file2.txt");
        BufferedWriter bw=new BufferedWriter(fw);
        PrintWriter pr=new PrintWriter(bw);

        String z="";
        for(int i=0;i<3137;i++){
            z=bsa.readLine();
            for(int q=0;q<2538;q++){
                if(array1[i].equals(array2[q])==true){
                    System.out.println(z);//to see printed lines in console
                    pr.println(z);//printing to file2
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T23:12:02.257

你关闭了`PrintWriter`吗？

```
pr.close(); 
```

`PrintWriter`缓冲数据，直到其缓冲区已满，然后写入磁盘。它的默认缓冲区大小为[8192 个字符](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/io/BufferedWriter.java#BufferedWriter.0defaultCharBufferSize)，这使得数百行在`close`被调用之前很容易保持未写入状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T23:12:16.877

你需要关闭你的`PrintWriter`使用`pr.close();`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T23:18:03.217

In order to copy from one file to another I would recommend this:

```
 try (final InputStream inputStream = new FileInputStream(file1);
            final OutputStream outputStream = new FileOutputStream(file2)) {
        final byte[] buffer = new byte[1024];
        int numRead = -1;
        while ((numRead = inputStream.read(buffer)) >= 0) {
            outputStream.write(buffer, 0, numRead);
        }
    } 
```

It uses java 7 try-with-resources syntax; it also avoids you magic numbers.

You can also use `FileChannel`, this is a little simpler:

```
 try (final FileChannel source = new RandomAccessFile(file1, "r").getChannel();
            final FileChannel dest = new RandomAccessFile(file2, "rw").getChannel()) {
        source.transferTo(0, source.size(), dest);
    } 
```

# python - python numpy结构化数组问题

> ID：15712866
> 
> 赞同：1
> 
> 时间：2013-03-29T23:11:21.957
> 
> 标签：python, datetime, numpy

我对 numpy 比较陌生。我已经从 .csv 文件中导入数据，日期在 YYYY、MM、DD 和其他一些内容中。我想将所有内容放入一个数组中，日期采用“正确”的日期时间格式。这是我的代码：

```
na_trades = np.zeros((number_of_orders,), dtype = ('datetime64,a5,a5,i4'))
for row in range(number_of_orders):
    order = na_trades_csv[row]
    order_date = dt.datetime(order[0],order[1],order[2])
    order_date64 =  np.datetime64(order_date)
    na_trades[row] = (order_date64,order[3],order[4],order[5]) 
```

但我得到错误`ValueError: error setting an array element with a sequence`。知道为什么会这样吗？提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T23:59:59.420

使用 numpy 版本 1.6.2，`dtype = 'datetime64,a5,a5,i4'`不会产生预期的 dtype：

```
In [36]: na_trades = np.zeros((number_of_orders,), dtype = 'datetime64,a5,a5,i4')
In [37]: na_trades
Out[37]: array([1970-01-01 00:00:00], dtype=datetime64[us]) 
```

这对我来说似乎是一个错误——尽管我可能是错的。请尝试：

```
na_trades = np.empty(number_of_orders,
                     dtype = [
                         ('dt', 'datetime64'),
                         ('foo','a5'),
                         ('bar', 'a5'),
                         ('baz', 'i4')]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T00:01:26.713

这是因为在 numpy 数组（与 python 列表不同）中，您不能将序列分配给数组中的单个元素。Python 数组是非同质的（例如，不同的元素可以是不同的类型）并且并不真正关心你放入其中的内容，而 Numpy 数组具有特定的类型。您正在尝试将类型设置为复合类型（例如，带有一个`datetime`、两个字符串和一个 int 的东西）但是 numpy 忽略了`datetime64`dtype 字符串中的所有内容，因为您的语法有点偏离。

尝试以下操作：

```
z = np.zeros((5,), dtype = np.dtype([('time','datetime64'),('year','a5'),('month','a5'),('day','i4')])) 
```

这将创建一个`numpy.void`类似于字典的类型。例如，您可以执行以下操作：

```
>>> z[0]
(datetime.datetime(1970, 1, 1, 0, 0), '', '', 0)

>>> z[0]['time']
1970-01-01 00:00:00

>>> z[0][0]
1970-01-01 00:00:00 
```

# c# - 下载动画 GIF

> ID：15712872
> 
> 赞同：5
> 
> 时间：2013-03-29T23:12:09.677
> 
> 标签：c#, .net, gif, animated

我正在使用以下内容从网络上获取动画 gif。但是，将其保存到磁盘后，我丢失了 gif 中的帧，并且不再动画。不确定问题是否出在下面的方法中，或者是否是我保存它的时候，但是任何关于为什么下面不起作用的反馈表示赞赏。该方法有效 - 只是没有创建正确的动画 gif 文件。

```
public Image getImage(String url)
{
    HttpWebRequest httpWebRequest = (HttpWebRequest)HttpWebRequest.Create(url);
    HttpWebResponse httpWebReponse = (HttpWebResponse)httpWebRequest.GetResponse();
    Stream stream = httpWebReponse.GetResponseStream();
    return Image.FromStream(stream, true, true);
}

Image im = getImage(url)
im.Save(pth,ImageFormat.Gif); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T23:14:23.060

您不应该`Image`从流中创建一个（[它只会存储第一帧](https://stackoverflow.com/a/8900891/146622)）。相反，您应该`Stream`使用例如将内容复制到为目标文件创建的[`Stream.CopyTo`方法将内容直接写入磁盘。](http://msdn.microsoft.com/en-us/library/dd782932.aspx)`FileStream`

```
using (Stream stream = httpWebReponse.GetResponseStream())
using (FileStream fs = File.Create(path))
{
    stream.CopyTo(fs);
} 
```

# asp.net - TSQL 中的 Response.Clear() 等效项

> ID：15712878
> 
> 赞同：2
> 
> 时间：2013-03-29T23:12:33.680
> 
> 标签：asp.net, sql-server, tsql

`Response.Clear()`TSQL 中是否有与 ASP.NET 等价的东西？

在某些情况下，我需要从之前选择的缓冲区中删除结果集。

编辑：

```
update [ViewCounts] set [SiteViews] += 1  OUTPUT INSERTED.SiteViews 
where  [PageID] = @PageID AND [LastIP] <> @IP

    IF @@ROWCOUNT = 0
    BEGIN

    --- Need to clear the the empty (OUTPUT INSERTED.SiteViews) buffer here, as it crashes the Entity Framework

    select [SiteViews] from [ViewCounts]  where  [PageID] = @PageID

    END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T14:45:04.037

您可以使用[DBCC DROPCLEANBUFFERS](http://msdn.microsoft.com/en-us/library/ms187762.aspx)从缓冲池中**删除所有干净**的缓冲区。

# html - 将 iframe 链接加载到父窗口中？

> ID：15712880
> 
> 赞同：30
> 
> 时间：2013-03-29T23:12:42.993
> 
> 标签：html, iframe

我有这个 iframe 代码：

```
<iframe src="http://www.example.com" border="0" framespacing="0" marginheight="0" marginwidth="0" vspace="0" hspace="0" scrolling="yes" width="100%" frameborder="0" height="100%"></iframe> 
```

我想要做的是..当我点击 iframe 页面中的任何链接..然后我会去它并且页面将加载并且我将从当前页面退出到 iframe 链接作为一个新页面。

类似的东西`target="_self"`- 不像普通的 iframe，它会在浏览器本身没有任何变化的情况下转到这个链接。

示例：iframe 源代码：http: [//www.w3schools.com](http://www.w3schools.com)

当我在 iframe 页面中单击“学习 HTML”时，我将转到[http://www.w3schools.com/html/default.asp](http://www.w3schools.com/html/default.asp) ，我的浏览器 URL 也会更改为它。

所以我只是点击了 iframe 中的一个链接，然后我就去了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-03-29T23:14:13.327

是的，您可以使用[**target="_parent"**](http://www.w3schools.com/tags/att_a_target.asp)来实现这一点。

> "target="_parent" 在父框架中打开链接文档。"

**例子：**

```
<a target="_parent" href="http://example.org">Click me!</a> 
```

* * *

**编辑：**

如果这不起作用，您可以尝试`_top`：

```
<a target="_top" href="http://example.org">Click me!</a> 
```

或者`base target`：

```
<base target="_parent" /> 
```

或者`window.top.location`在 JavaScript 中：

```
window.top.location = "http://example.com"; 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-29T23:14:21.317

你正在寻找的是`<a href="..." target="_parent">`

`_parent`将导致它转到父框架

`_top`将导致它进入最顶层。

要么 要么`_parent`应该`_top`为您的目标工作。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-29T23:57:15.817

You can use javascript to add the target to the links dynamically, something like this.

```
function onLoadIF(frame)
{
    var elements = frame.getElementsByTagName('a'),
        len = elements.length;

    while( len-- ) {
        elements[len].target = "_parent";
    }
} 
```

And then add onload="onLoadIF(this)" to the iframe.

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-29T23:14:34.787

是的，只需添加`target="_parent"`链接，它就会加载到主页上。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-01-14T08:26:00.893

如果站点在 iframe 中打开，则重定向到主站点

```
<script>
    if (window.top.location != window.self.location) {
        top.window.location.href = window.self.location;
    }
</script> 
```

# c++ - 我的输出没有产生我需要的方式

> ID：15712881
> 
> 赞同：-1
> 
> 时间：2013-03-29T23:12:48.143
> 
> 标签：c++

我正在做一项家庭作业，该作业需要我为每个学生生成 SSN 和成绩，并计算最低、最高和平均分数，同时显示具有最高分数的学生的 SSN。除了我得到每个学生的最小值、最大值和平均值的迭代而不是总数之外，这一切都有效，而且我没有得到最高分数学生的 SSN。数据是从文件中读入的。

我需要输出看起来像：
123-45-6789 87
123-56-9872 91
等....

然后以最高分结束：91 SSN：123-45-6789
最低分：23
平均分：86

这是代码，任何帮助都会很棒。

```
#include <iostream>
#include <string>
#include <fstream>          // for file I/O
#include <iomanip>

using namespace std;

int main ()
{
    string ssn, maxSSN;
    int grade = 0, totalGrades = 0, count = 0, maxScore = 0, minScore = 0;
    double avgScore = 0;

    ofstream printFile ("StudentGrades.txt");
    if (!printFile) 
    {
        cout << " Error opening printFile" << endl;
        system ("pause");
        return 100; 
    }

    //ifstream studentFile ("lab5a.dat");       // alternative open

    ifstream studentFile;
    studentFile.open("c:\\lab5a.dat");

    if (!studentFile)
    {
        cout << "Open error on lab5a.dat" << endl;
        system ("pause");
        return 101;
    }

    cout << "   SSN     Grade" << endl;
    cout << "---------  -----" << endl;

    while (!studentFile.eof())
    {
        studentFile >> ssn >> grade;
        if (count == 0)
        {
            maxScore = grade;
            minScore = grade;
        }
        else
        {
            if (grade > maxScore)
                maxScore = grade;
            if (grade < minScore)
                minScore = grade;
        }
            totalGrades += grade ;
            count++;
            cout << ssn << setw(7) << grade << endl;
    }

        if (count)
        avgScore = totalGrades / (double) count;

        cout << "\n\n";
        cout << "Maximum Score: " << maxScore << "      Student SSN:" << maxSSN << endl;
        cout << "Minimum Score: " << minScore << "\n";
        cout << "Average Score: " << avgScore << "\n";
        //studentFile >> ssn >> grade;

        printFile << ssn;
        if (grade >= 90)      
            printFile << "  A" << endl;
        else if (grade >= 80) 
            printFile << "  B" << endl;
        else if (grade >= 70) 
            printFile << "  C" << endl;
        else if (grade >= 60) 
            printFile << "  D" << endl;
        else                  
            printFile << "  F " << endl;

    studentFile.close();    
    printFile.close();      

    system ("pause");
} 
```

![代码更改后的输出。](../Images/49257adddc12a4f1aef9f61f59b2b2d8.png)

除了我没有显示 maxScore SSN 之外，一切都好了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T23:28:22.050

问题之一如下：

```
while (!studentFile.eof())
{
    studentFile >> ssn >> grade;  //put read records here

    if (count == 0)
    {
        maxScore = grade;
        minScore = grade;
    }
    else
    {
        if (grade > maxScore){
            maxScore = grade;
            maxSSN = ssn
        }
        if (grade < minScore)
            minScore = grade;
    }
        totalGrades += grade ;
        count++;
  }//^^^^should end your while loop here, finish reading all then do average

    //^^^^^now compute the averageScore
    if (count)
    avgScore = totalGrades / (double) count; 
```

首先尝试清除您的逻辑，如果有任何问题，您会发现其他问题。在 while 循环中，您不记得当前的最大 SSN。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T00:39:33.810

您的输入循环仍然与您问题的先前版本不同。循环`eof()`是一种不好的做法，原因在另一个问题中进行了解释：[为什么循环条件内的 iostream::eof 被认为是错误的？](https://stackoverflow.com/q/5605125/445976)

尝试改变这个：

```
while (!studentFile.eof())
{
    studentFile >> ssn >> grade;
    // ... the rest of your code
} 
```

到：

```
while (studentFile >> ssn >> grade)
{
    // ... the rest of your code
} 
```

# java - 比较器、集合和 HashMap

> ID：15712883
> 
> 赞同：1
> 
> 时间：2013-03-29T23:13:05.660
> 
> 标签：java, hashmap, compare

我之前需要按其值对 HashMap 进行排序，并且我将比较器与集合一起使用，如下所示：

```
private LinkedHashMap<String, Integer> sortMap(Map<String, Integer> results, int count)
{
    List<Map.Entry<String, Integer>> entries = new ArrayList<Map.Entry<String, Integer>>(results.entrySet());

    Comparator<Entry<String, Integer>> comparator = new Comparator<Entry<String, Integer>>() {
        @Override
        public int compare(Entry<String, Integer> a, Entry<String, Integer> b) {
            return b.getValue().compareTo(a.getValue());
        }
    };

    Collections.sort(entries, comparator);

    LinkedHashMap<String, Integer> sorted = new LinkedHashMap<String, Integer>();
    for (Entry<String, Integer> entry : entries)
        sorted.put(entry.getKey(), entry.getValue());

    return sorted;
} 
```

现在情况发生了变化，我需要它是一个经过排序的 HashMap。所以我将代码更改为如下所示：

```
private LinkedHashMap<String, Double> sortMap(Map<String, Double> results, int count)
{
    List<Map.Entry<String, Double>> entries = new ArrayList<Map.Entry<String, Double>>(results.entrySet());

    Comparator<Entry<String, Double>> comparator = new Comparator<Entry<String, Double>>() {
        @Override
        public int compare(Entry<String, Double> a, Entry<String, Double> b) {
            return b.getValue().compareTo(a.getValue());
        }
    };

    Collections.sort(entries, comparator);

    LinkedHashMap<String, Double> sorted = new LinkedHashMap<String, Double>();
    for (Entry<String, Double> entry : entries)
        sorted.put(entry.getKey(), entry.getValue());

    return sorted;
} 
```

它抛出一个错误，即`java.lang.ClassCastException: java.lang.Integer cannot be cast to java.lang.Double`在：

```
 at myPackage.myClass$1.compare(myClass.java:124)
    at myPackage.myClass$1.compare(myClass.java:1)
    at java.util.TimSort.countRunAndMakeAscending(Unknown Source)
    at java.util.TimSort.sort(Unknown Source)
    at java.util.TimSort.sort(Unknown Source)
    at java.util.Arrays.sort(Unknown Source)
    at java.util.Collections.sort(Unknown Source)
    at myPackage.myClass.sortMap(myClass.java:128) 
```

myClass.java.128 ：`Collections.sort(entries, comparator);`
myClass.java.124 ：`return b.getValue().compareTo(a.getValue());`

你们的任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T00:25:35.490

您将 sortMap() 方法的签名从 Integer 更改为 Double，但仍使用 Integers 调用它。使用 TreeMap 可能是进行隐式排序的一种选择吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T23:31:50.140

你有两个选择：

1.  将排序方法更改为 get`Integer`而不是`Double`.

2.  将返回类型更改`entry.getValue()`为 Double！

# android - 活动启动后更改空文本视图的值android

> ID：15712884
> 
> 赞同：0
> 
> 时间：2013-03-29T23:13:14.707
> 
> 标签：android

我是安卓新手。我有一个简单的应用程序，它有两个活动，运行如下：

### 活动一：

```
public void SendMessage(View view){
    Intent intent=new Intent(this,DisplayMessage.class);
    EditText editText=(EditText) findViewById(R.id.edit_message);
    String message=editText.getText().toString();
    intent.putExtra(EXTRA_MESSAGE, message);
    startActivity(intent);
} 
```

### 活动二：

“Extra_Message”将单次显示`TextView`并增加1并重复10次，每次添加的结果将在`TextView`1000ms的延迟下显示。

```
Intent intent= getIntent();
String message=intent.getStringExtra(MainActivity.EXTRA_MESSAGE);
int no= Integer.parseInt(message);
TextView textView=new TextView(this);
textView.setTextSize(40);
for(int i=0;i<10;i++)
{
    message=Integer.toString(no);
    textView.setText(message);
    setContentView(textView);
    no++;

    try {
        Thread.sleep(1000);
    } catch(InterruptedException e) {
    }
} 
```

现在的问题是我不知道我应该在哪里运行这段代码。它应该在创建第二个活动之后运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T23:18:20.840

只需在第二个活动的 onCreate() 方法中运行它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T00:11:18.167

在主（或 UI）线程上调用 Thread.sleep() 是个坏主意。事实上，任何停止主线程的事情都是一个坏主意。一种解决方案：在您的第二个 Activity 中创建一个 Handler 并将延迟的 Runnable 发布到它。用于`handler.postDelayed(Runnable r, long delayMillis)`在与 Handler 关联的线程（在本例中为主线程）上调度 runnable。

```
private Handler handler;
private TextView textView;
private Runnable updateTextRunnable = new Runnable() {
    public void run() {
        String message = ...
        textView.setText(message);
        handler.postDelayed(this, 1000);
    }
};

public void onCreate(Bundle saved) {
    super.onCreate(saved);
    setContentView(R.layout.your_layout);

    textView = (TextView) findViewById(R.id.your_text_view_id);
    handler = new Handler();
}

public void onResume() {
    super.onResume();
    handler.postDelayed(updateTextRunnable, 1000);
} 
```

你可以通过调用来停止它`handler.removeCallbacks(updateTextRunnable);`——我会让你决定在哪里停止运行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T00:14:08.380

你可以创建一个线程类的对象，并在其中放入带扣的代码。

然后每次“for”迭代，调用

```
thread.sleep(500); 
```

这样，系统将`0.5 sec`在每次迭代中等待

# labview - 如何在labview 中使用两个输入生成方波？

> ID：15712885
> 
> 赞同：1
> 
> 时间：2013-03-29T23:13:15.043
> 
> 标签：labview, waveform

如何在 Lab View 中生成将频率（Hz）和脉冲宽度（毫秒）作为输入的方波？

我看过这个：

[http://zone.ni.com/reference/en-XX/help/371361H-01/lvexpress/simulate_signal/](http://zone.ni.com/reference/en-XX/help/371361H-01/lvexpress/simulate_signal/)

到目前为止，开发了一个看起来像这样的图表：

![在此处输入图像描述](../Images/b17c162ce013b890a609547d5309c63e.png)

但是，我遇到的问题是输入到方波的占空比以周期百分比指定，而我需要以毫秒为单位指定。

如何将脉冲宽度（以毫秒为单位）输入方波的输入？我需要对其进行一些数学运算吗？

例如，如果选择的脉冲宽度为 2ms，周期为 5000ms，那么 100 * 2/5000 = 0.04% ? 但是这样做一个简单的方波似乎有点荒谬。

编辑：

根据 Ton 的建议，这是一个新图表：

我不是要挑剔，但为什么我的脉搏看起来是三角形的？如何让它们看起来像方波脉冲？如何更改以毫秒而不是秒为单位显示的时间访问？

![在此处输入图像描述](../Images/90603d2836977fab7623690aa58ff2ed.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T12:34:08.190

您的数学已关闭，您应该将 2 ms 计算为脉冲频率的百分比。因此，在 50 Hz（或 20 ms）下，您的占空比为 10%。

# php - php text encoding when GETting a webpage and then POSTing contents

> ID：15712886
> 
> 赞同：0
> 
> 时间：2013-03-29T23:13:30.877
> 
> 标签：php, http, character-encoding, libcurl

I'm trying to GET a webpage parse a part of it and then POST it as a value. The problem is: when there is a character as ó, I retrieve Ã³, and thus when posting it, the urlencode translation converts those characters to something completely different, which doesn't work.

More precisely, Ã³ is produced when an ó in utf-8 is interpreted as it was in ISO-9959-1, or at least that's what my browser does, if I set to view the page in utf-8 then I see ó, if I set the browser to view the page in ISO-9959-1 then I see Ã³, other encodings produce different symbols.

I tried to convert the results of the page, and also that specific string to utf-8, I did also try to set the headers to accept only utf-8, but that is not working either. I'm quite certain that is the problem but I'm running out of ideas. I changed the configuration in php.ini but maybe I did not restart yet, basically this is like shooting in the dark, and some help would be greatly appreciated.

If this helps: The specific code is here: [https://github.com/trylks/golem/blob/master/php/copperGolem.php](https://github.com/trylks/golem/blob/master/php/copperGolem.php)

The method is "form", when obtaining one of the parameter values from a previously obtained page with GET.

Thank you.

PD solved: I've been working on this for the last few hours, I can't tell if I changed many other things that are necessary. In any case, the last change that made it work was changing line 60 to be this: `$dom->loadHTML(mb_convert_encoding($p, 'html-entities', mb_detect_encoding($p)));` That made it. The problem is not libcurl but DomDocument, as explained here: [PHP DomDocument failing to handle utf-8 characters (☆)](https://stackoverflow.com/questions/11309194/php-domdocument-failing-to-handle-utf-8-characters)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T02:30:46.587

The problem is in the `DomDocument`, it doesn't properly handle utf-8\. Converting to html-entities is the safest option and it works like magic when outputting these characters back with echo (even using cli) or urlencoding these characters. Basically `DomDocument` doesn't accept utf-8 but it outputs utf-8, or so it seems. So it's a weird conversion that has to be made, so that DomDocument undoes it and everything is back to normal again.

To do this, and being `$dom` a DomDocument it's enough to do this on every call to `$dom->loadHTML($p)`:

`$dom->loadHTML(mb_convert_encoding($p, 'html-entities', mb_detect_encoding($p)));`

This is explained better in this other question: [PHP DomDocument failing to handle utf-8 characters (☆)](https://stackoverflow.com/questions/11309194/php-domdocument-failing-to-handle-utf-8-characters)

# c# - 在字符串中添加一行

> ID：15712888
> 
> 赞同：-1
> 
> 时间：2013-03-29T23:13:53.107
> 
> 标签：c#, string

我正在做作业有一个问题。该作业让我添加了一个应该是读/写的私有属性（私有字符串历史记录）。我可以做到这一切。然后说明说“确保它不能被覆盖 - 写入它应该在字符串中添加一行。”

如何在不覆盖任何内容的情况下向字符串添加一行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T23:18:15.023

听起来像是一个措辞不好的问题。你是对的：一个变量不能改变它的状态但同时保持它的状态。我猜他们的意思是这样的：

```
 private string _SafeString;
    public string SafeString
    {
        get { return _SafeString; }
        set 
        { 
            _SafeString += ("\n" + value); 
        }
    } 
```

因此，对字符串的“分配”实际上会附加到原始字符串，而不仅仅是分配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T23:18:36.950

您对*属性*的定义更像是C# 中的*字段*或*属性*。你应该看看属性，当一个值被分配（或从）一个字段时，它将允许你执行各种自定义逻辑。

```
private string history;
public string History
{
    get { return history; }
    set
    {
        // Do something fancy with 'value', e.g:
        history = history + "\n" + value;
    }
} 
```

# c++ - 在 GNU 的 C++ 代码中使用 C 头文件。包括内联汇编的错误：“asm”中的不可能约束

> ID：15712894
> 
> 赞同：4
> 
> 时间：2013-03-29T23:14:25.697
> 
> 标签：c++, gcc, embedded, arm, inline-assembly

我有一个奇怪的。我正在使用供应商的头文件开发嵌入式系统。我正在使用 GCC 4.6.3 编译文件。我想在我的代码中使用 C++，我有错误我无法弄清楚。我正在运行一个供应商示例程序，我所做的只是将 main.c 文件的名称更改为 main.cpp。因此，我假设 C++ 编译器正在解释头文件。其中之一包含以下几行：

```
__attribute__((naked)) static return_type signature \
  { \
     __asm( \
         "svc %0\n" \
         "bx r14" : : "I" (number) : "r0" \
     ); \
} 
```

如果文件的名称是 main.c，则文件可以正确编译，我认为这是因为 C 编译器正在处理该文件。如果我使用 C++，我得到的错误是

```
error: impossible constraint in 'asm' 
```

But again, I have no problem with the C compiler. I need to call functions that use this define in C++ files. I've considered writing wrapper functions that stay on the c side and linking to them, but it would be a real pain, and less efficient. Any suggestions?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T18:04:42.193

[`svc`](http://infocenter.arm.com/help/topic/com.arm.doc.dui0203j/Cacdfeci.html) also known as `swi` is the **ARM/Thumb** *software interrupt* instruction. It only takes constants, but they are different from other register constants. Ie, `mov r0, #4096`. You need to use the preprocessor and token pasting if you wish to specify an immediate. `number` can not be a *variable* or *register*.

```
#define syscall(number) __attribute__((naked)) static return_type signature \
  { \
     __asm( \
         "svc " #number "\n" \
         "bx r14" : : : "r0" \
     ); \
  } 
```

will work. **Note:** The `#` is the *'C'* preprocessors stringify. Also note that it is in-efficient to look at the `SVC` number as it is in the `I-CACHE` and inspecting requires `D-CACHE`. Generally it is always `constant` and the *function* number is passed in a register for faster syscall's.

The gcc manual says,

> **'I'**- Integer that is valid as an immediate operand in a data processing instruction. That is, an integer in the range 0 to 255 rotated by a multiple of 2

This is typical of *Data-processing operands - immediate*, section A5.1.3 of the ARM ARM. The `SVC` operands are either fixed 8-bits in thumb mode or fixed 24-bits in ARM mode. It maybe possible with some other constraint that I am unaware of, but at least the preprocessor's stringification will work as long as a numeric constant is passed to the macro.

I guess it is lucky that this worked from `gcc` and unlucky that `g++` did not. You can get further insight by using `-S` and looking at (and posting) the output using both tools.

**Edit:** Your code does seem to work with `gcc-4.7.2`, but `number` is a `const int` local in my case, the use of `number` maybe the issue. Perhaps it has a subtle semantic change from 'C' to 'C++'.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T03:22:51.640

Check the [GCC manual](http://gcc.gnu.org/onlinedocs) (inline assembler) for the exact meaning of the constraints for your machine. Older GCC versions have been notoriously sloppy in the checking of constraints, perhaps you are being bitten by this. It is strange that `gcc` and `g++` (same version?) handle the code differently, it just *might* be a compiler bug, but I'd consider that only after all other explanations have been exhausted.

# jquery - 在单独的文件中使用 Jquery ans js 进行表单验证

> ID：15712899
> 
> 赞同：0
> 
> 时间：2013-03-29T23:15:39.807
> 
> 标签：jquery, forms, validation, jquery-validate

嗨，我真的坚持这个。

有没有人知道如何编写以下 jQuery 表单验证？我确信这很简单，但我想不出这个来挽救我的生命。

感谢您分享您的知识。

我需要用 jquery 编写以下表单验证。每当遇到错误时，阻止提交表单。有 4 个输入由 jquery 代码验证。我也不允许链接到我自己的 jQuery 文件。我不确定，但我认为这个来自验证链接的 jQuery 坏了。

验证规则如下：

*   输入：用户名；需要（是）；验证（长度必须为 5-10 个字符）。
*   输入：电子邮件；需要（是）；验证（必须有 @ 符号，必须有句点）。
*   输入：街道名称；必填（否）；验证（必须以数字开头）。
*   输入：出生年份；需要（是）；验证（必须是数字）。

我的代码如下所示：

```
<!DOCTYPE html>
<html>
<head>

<script src="http://code.jquery.com/jquery-latest.js"></script>

<!-- Hi JASON YOUR PLUGIN DDOE SNOT WORK!!! I used another plugin from the jquery site.
<script type="text/javascript" src="http://dev.jquery.com/view/trunk/plugins/validate/jquery.validate.js"></script>
-->
<script type="text/javascript" src=""></script>

    <script type="text/javascript">

$(document).ready(function() {

    $("#form1").validate({

        rules: {
            name:  {
                required: true,
                minlength: 5
                maxlength: 10
            },
            address:  {
                number: true,
            },
            email: {// compound rule 
                required: true, 
                email: true 
            }
        },

        url: {
            url: true
        },

        messages: {
            name: {
                minlength: jQuery.format("At least {0} characters required.")
            }
        },

        highlight: function(element, errorClass, validClass) {

            $(element).addClass(errorClass).removeClass(validClass);
            $(element.form).find("label[for=" + element.id + "]").addClass(errorClass);

            setTimeout(function() {

                $(element).removeClass(errorClass).addClass(validClass);
                $(element.form).find("label[for=" + element.id + "]").removeClass(errorClass);

            }, 1000);

        }

    });

});

  </script> 

</head>
<body>

    <form id="form1" method="post" action=""> 
        <div class="form-row"><span class="label">Username *</span><input type="text" name="name" /></div>
        <div class="form-row"><span class="label">Email address </span><input type="text" name="email" /></div>
        <div class="form-row"><span class="label">Street address *</span><input type="text" name="address" /></div>
        <div class="form-row"><span class="label">Year of birth</span><input type="text" name="date" /></div> 

      <div class="form-row"><input class="submit" type="submit" value="Submit"></div> 
    </form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T00:55:25.827

你的代码...

*   `name`您所在领域的两条规则之间缺少逗号。

*   *不*正确地使用该`url`规则，将其置于. 由于我在您的表格中没有看到需要这样的规则，所以我只是将其删除。*`rules: {}`*

**   似乎完全缺少插件。*在包含 jQuery之后，*您实际上需要在某个地方“包含”jQuery Validate 插件：* 

 *```
<script src="http://code.jquery.com/jquery-latest.js" type="text/javascript"></script>
<script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/jquery.validate.min.js" type="text/javascript"></script> 
```

**否则，您的代码，正如您介绍的那样，现在可以工作：http: [//jsfiddle.net/4FGmx/](http://jsfiddle.net/4FGmx/)**

```
$(document).ready(function () {

    $("#form1").validate({
        rules: {
            name: {
                required: true,
                minlength: 5,
                maxlength: 10
            },
            address: {
                number: true
            },
            email: {
                required: true,
                email: true
            }
        },
        messages: {
            name: {
                minlength: jQuery.format("At least {0} characters required.")
            }
        },
        highlight: function (element, errorClass, validClass) {
            $(element).addClass(errorClass).removeClass(validClass);
            $(element.form).find("label[for=" + element.id + "]").addClass(errorClass);
            setTimeout(function () {
                $(element).removeClass(errorClass).addClass(validClass);
                $(element.form).find("label[for=" + element.id + "]").removeClass(errorClass);
            }, 1000);
        }
    });

}); 
```

* * *

根据您的规则规范，您可以执行以下操作。注意使用`rangelength`规则而不是使用`minlength`and `maxlength`。 [有关所有可用规则，请参阅文档](http://docs.jquery.com/Plugins/Validation)。

如果您希望您的`address`字段仅*“以数字开头”*，那么您需要删除`number`规则并编写自己的自定义正则表达式函数并使用[method`addMethod`合并](http://docs.jquery.com/Plugins/Validation/Validator/addMethod#namemethodmessage)它。

**演示：http: [//jsfiddle.net/4FGmx/1/](http://jsfiddle.net/4FGmx/1/)**

```
 rules: {
        name: {
            required: true,
            rangelength: [5,10]
        },
        address: {
            mycustomrule: true
        },
        email: { 
            required: true,
            email: true
        },
        date: {
            required: true,
            number: true
        }
    }, 
```*

# html - IE8 CSS 文本间距问题

> ID：15712902
> 
> 赞同：0
> 
> 时间：2013-03-29T23:16:21.830
> 
> 标签：html, css, internet-explorer

我在 ie8 中遇到了 CSS text justify 问题，需要创建一个 ie8 特定规则来解决该问题，但无法弄清楚。

页面和文本应该如下所示：[**链接到页面**](http://tinyurl.com/d3va35m)（使用现代浏览器，如 Chrome / Safari / Firefox）。

附加的图片显示 ie8 搞砸了间距。![在此处输入图像描述](../Images/c0c7a2c69abf57a5192145d00a10843f.png)

**CSS**

```
/*Fancybox Gallery Divs*/

#thumbs {   
    width: 960px;
    margin-top:20px;
    margin-left: auto; 
    margin-right: auto;
    text-align: justify;
    -ms-text-justify: distribute-all-lines;
    text-justify: distribute-all-lines;
}

#thumbs a {
    vertical-align: top;
    display: inline-block;
    *display: inline;
    zoom: 1;
}

.stretch {
    width: 100%;
    display: inline-block;
    font-size: 0;
    line-height: 0
}

/*Descriptions*/

#desc-wrapper {
    width: 960px;
    padding-top: 5px;
    margin-left: auto; 
    margin-right: auto;
    text-align: justify;
    -ms-text-justify: distribute-all-lines;
    text-justify: distribute-all-lines;
}

.description {
    float:left;
    width: 320px; // Increase/decrease width for margin between images
    height: 25px;
    text-align: center;
    margin-bottom: 30px;
}

.clear {
    clear:both;
} 
```

**HTML**

```
<!--/ Photo Thumbs Row 1-->

<div id="thumbs">

<a id="single_image" href="/bp/images/roscoes-run.jpg"><img src="/bp/images/roscoes-run(thumb).jpg" alt=""/></a>
<a id="single_image" href="/bp/images/roscoes-run-2.jpg"><img src="/bp/images/roscoes-run-2(thumb).jpg" alt=""/></a>
<a id="single_image" href="/bp/images/chicken-waffles.jpg"><img src="/bp/images/chicken-waffles(thumb).jpg" alt=""/></a>

<span class="stretch"></span>

</div>

<!--/ Description-->

<div id="desc-wrapper">
<div class="description">Roscoe's Run 2012</div>
<div class="description">Roscoe's Run 2012</div>
<div class="description">Roscoe's Run 2012</div>
<div class="clear"></div>
</div>

<!--/ Photo Thumbs Row 2-->

<div id="thumbs">

<a id="single_image" href="/bp/images/mens-retreat-2012.jpg"><img src="/bp/images/mens-retreat-2012(thumb).jpg" alt=""/></a>
<a id="single_image" href="/bp/images/winter-retreat-2012.jpg"><img src="/bp/images/winter-retreat-2012(thumb).jpg" alt=""/></a>
<a id="single_image" href="/bp/images/new-years-eve-2012.jpg"><img src="/bp/images/new-years-eve-2012(thumb).jpg" alt=""/></a>

<span class="stretch"></span>

</div>

<!--/ Description-->

<div id="desc-wrapper">
<div class="description">Men's Retreat 2012</div>
<div class="description">Winter Retreat 2012</div>
<div class="description">New Year's Eve 2012</div>
<div class="clear"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T23:49:18.247

罪魁祸首是：

```
text-justify: distribute-all-lines; 
```

在#desc-wrapper 上（顺便说一下，这是一个重复的ID，这应该是一个类）。要么从 media.css 和 media-ie8.css 中删除它（不确定为什么需要它），要么在 media-ie8.css 中将其覆盖为自动。不过，说真的，它是一个仅限 IE 的属性。只是删除它？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T23:42:52.650

好吧，您需要添加条件注释，因为您的 ie-css 被常规 media.css 覆盖

```
<!--[if IE 8]>
your stuff
<![endif]--> 
```

# php - `clone` 与在 PHP 中实例化新对象相比有什么优势？

> ID：15712911
> 
> 赞同：6
> 
> 时间：2013-03-29T23:17:12.553
> 
> 标签：php, object

在这段代码中

```
<?php
$object1        = new User();
$object1->name = "Alice";
$object2        = clone $object1;
$object2->name = "Amy";

echo "object1 name = " . $object1->name . "<br>";
echo "object2 name = " . $object2->name;

class User
{
    public $name;
}
?> 
```

`clone`使用而不仅仅是使用的好处是`new`什么？除了我们新定义的之外，我们是否会为`object1`in的属性获得所有相同的值？`object2``name`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-29T23:21:55.643

在这种特定情况下，不会有任何区别。如果对象具有其他属性（如果创建新实例而不是克隆，它们将被重置），则会有所不同*。*

还有其他`clone`适合的情况：

*   如果对象的类没有您可以访问的构造函数
*   如果对象的类确实有构造函数，但你不知道应该传递给它什么值；一般来说，如果你不知道*如何*构造一个重复的对象
*   如果构造一个新对象有不受欢迎的副作用
*   如果对象具有内部状态并且您不知道如何从“新构建”状态移动到您已经拥有的实例的状态

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T23:20:39.987

[`clone`](http://php.net/manual/en/language.oop5.cloning.php)将复制所有属性值，而不是将它们重置为默认值。例如，如果您有一个查询构建器类，并且希望两个查询几乎相同但有一个或两个小的差异，则很有用。您将查询构建到出发点，克隆它，然后以一种方式使用另一种方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T23:21:23.240

在这种情况下，没有，因为这是一个对象的一个​​非常糟糕的借口。

但是，假设您正在创建一个游戏，其中每个类都代表游戏中的一种对象。一个这样的物体可能是一个弹跳的球。在这种情况下，`new Ball()`将在起始位置创建一个新球，并且它会跟随第一个球反弹。但是，`clone $ball1`会在其实际位置复制当前球。

# c# - 创建 Web 应用程序设置以在本地 IIS 中导入应用程序

> ID：15712919
> 
> 赞同：1
> 
> 时间：2013-03-29T23:18:10.977
> 
> 标签：c#, .net, iis, installshield

我有一个 C# Web 应用程序，我可以使用我在其中开发它的 Visual Studio 2012 来启动它。但是，我想为此应用程序创建一个设置（在 Visual Studio 2012 中不可用）。因此，我尝试使用 Installshield 设置创建实用程序。使用以下指针后，我可以成功构建设置：

[http://ultidev.com/Forums/yaf_postsm3358_Building-UWSASP-NET-app-installation-with-InstallShield.aspx](http://ultidev.com/Forums/yaf_postsm3358_Building-UWSASP-NET-app-installation-with-InstallShield.aspx)

现在我不知道如何将它导入 IIS 管理器，所以我可以在成功安装 setup.exe 后直接去浏览我的 Web 应用程序 URL。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-05T09:01:43.767

最近我遇到了同样的问题，所以这是我对你的问题感兴趣的地方。

这里有一个设置说明： [www.wavepointstudios.net/Msi2011/How-to-Install-a-Web-Application.aspx](http://www.wavepointstudios.net/Msi2011/How-to-Install-a-Web-Application.aspx)

# php - 未知的网站重定向（客户端可能以某种方式被黑客入侵）？

> ID：15712922
> 
> 赞同：1
> 
> 时间：2013-03-29T23:18:23.107
> 
> 标签：php, wordpress, .htaccess

首先，这里是主网站[http://prestigesolar.net/](http://prestigesolar.net/)

我刚收到一封电子邮件，上面写着“***嘿，此链接将转到其他地方，它不应该这样做，请将其更改为正确的页面链接***”

有问题的链接是，如果您访问上面的网站并向下滚动，您会看到 3 列。问题从第一列开始，上面写着“ ***Hurricane Resistant Windows & Doors*** ”

当您将鼠标悬停在***图像/标题/“阅读更多”***链接上时，它们都指向 seo 友好链接，例如等等`( prestigesolar.net/Hurricane-Resistant-Windows-Doors )`。但是当您单击它时，它会转到一些垃圾邮件站点。

此外，当该垃圾邮件站点加载时，地址栏上的 url 与页面最初应该转到的 SEO 友好链接读取相同。

我进去查看链接及其以 WordPress 方式硬编码的内容，如下所示

```
<a href="<?php bloginfo('url');?>/hurricane-resistant-windows-doors"> 
```

并且仍然会导致垃圾邮件站点。当我手动更改链接以指向谷歌`<a href="https://www.google.com/">`时，它仍然进入垃圾邮件站点。

我去 .htaccess 只是为了细读，除了正常之外什么也没看到。（见下文）

```
# BEGIN WordPress

<IfModule mod_rewrite.c>

RewriteEngine On

RewriteBase /

RewriteRule ^index\.php$ - [L]

RewriteCond %{REQUEST_FILENAME} !-f

RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule . /index.php [L]

</IfModule>

# END WordPress 
```

然后我在 WordPress 方面进入页面本身，查看 HTML 选项卡，什么也没有。只是文本和一些普通的 p 标签等。

然后我下载了页面和 single.php 文件，它们非常简单。他们什么都没有。简单的包括***页脚/页眉/侧边栏***文件。

我搜索了这 3 个（页脚/页眉/侧边栏），没有任何异常。

**在旁注中，**当我通过 WordPress 后端手动转到该页面并单击“查看页面”按钮时，该页面将正常打开。如果我然后导航到另一个页面并点击后退按钮导航回该页面，它也会像往常一样加载。如果我复制网址并在另一个浏览器中粘贴并访问它，它会正常加载。它只是在从主页点击到该页面之间的过渡中，劫持正在发生。

我已经有一段时间试图弄清楚了，但我没有想法。有人可以指出我正确的方向吗？？？任何帮助，提示，任何我都非常感激的东西。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T23:58:46.027

看起来您有两个不同的页面（两个不同的 URL），其中一个已被此垃圾邮件 HTML 覆盖（或创建），并且实际上存在于`prestigesolar.net`服务器上（因此不涉及重定向）。

错误页面位于：

[http://prestigesolar.net/hurricane-resistant-windows-doors](http://prestigesolar.net/hurricane-resistant-windows-doors)

哪里-正确的页面在：

[http://prestigesolar.net/hurricane-resistant-windows-and-doors](http://prestigesolar.net/hurricane-resistant-windows-and-doors)

区别在于`-and`部分。

如果有人设法将不需要的页面写入您的服务器/站点，最好更改您的 wordpress 登录名和可能涉及的任何其他密码，并确保删除有问题的附加页面。

### 更新

不幸的是，如果没有关于您的具体设置的更多信息，很难说出发生了什么，假设您使用的是 WordPress 的捆绑版本（即安装的版本而不是 wordpress.com），攻击者似乎实际上已经获得了通过 FTP 或 SSH 访问您的服务器，如果您在使用 WordPress 管理面板时看不到任何此类垃圾邮件内容，则此假设得到重申。

通过查看源代码，您需要在服务器中搜索以下文件和目录：

```
garca
click1.php 
click3.php 
```

假设您有 SSH 访问权限并且您的服务器正在运行 Linux 风格，您可以使用以下命令搜索整个 Web 目录：

```
find / -name "click1.php" 
```

Replace the slash with your webroot folder, and the "quoted" section for what you are searching for i.e. "garca". The above hopefully should track something down, if not, it could be because the attacker has masked the files either by `.htaccess` (which you have already checked) or by something even more worrying, i.e. modifying your `apache.conf`.

Other than the above I don't know what else to suggest, change all log-ins, and if you are using a particular web host possibly let them know as the security hole might be due to software that they have installed elsewhere. You should probably also upgrade your version of WordPress as new security holes are discovered in that kind of software all the time.

Good luck with it.

# c - 将字符串放入c中的数组时，字符串会失真

> ID：15712924
> 
> 赞同：-2
> 
> 时间：2013-03-29T23:18:26.400
> 
> 标签：c, arrays, string

我正在尝试从 txt 文件中获取每个单词，然后将其放入数组中。我的代码从文件中提取每个单词并将其保存为字符串没有问题。但是，当我尝试将字符串放入一个数组并打印出来时，只打印出最后几行，它都被扭曲了。

这是我的代码：

```
 typedef char * string;
  string strings[100];
  FILE* file = fopen(argv[1], "r");
  char line[256];

  while(fgets(line, sizeof(line), file))
  {
    string tmp = strtok(line, " ,'.-");

    while(tmp != NULL)
    {
      strings[count]= tmp;
      tmp = strtok(NULL, " ,.'-;");
      count++;
    }
  }

  int c2 = 0;

  while(strings[c2] != NULL)
  {
    printf("%s, ", strings[c2]);
    c2++;
  }

  return 0;
} 
```

这是我正在阅读的文件中的文本：

```
人行道尽头有一个地方
在街道开始之前，
那里的草变得柔软而洁白，
太阳在那里燃烧着深红色的光芒，
那里的月鸟从他的飞行中休息
在薄荷风中冷却。

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T23:36:14.803

几个明显的问题：

```
strings[count]= tmp; 
```

This is just a pointer assignment. And tmp has the same value each time you make the assignment. You need to allocate a new string each time round the loop. And use strcpy to copy it.

Secondly your print loop assumes that the strings array is initialised with null pointers. It is not. You did not initialise it at all.

# rally - Using rallyaddnew xtype with Portfolio Items

> ID：15712929
> 
> 赞同：1
> 
> 时间：2013-03-29T23:18:44.103
> 
> 标签：rally

How do you use the rallyaddnew xtype with Portfolio Items? The example shown in the documentation is for User stories. For that it shows that recordTypes: ['User Story']

There are no examples or documentation on what to do for other items. recordType: ['Portfolio Item'] does not seem to work, and its unclear anyway what level of Portfolio item that would create.

In my case, I'd like to create a feature level portfolio item with some fields like "expected start date" set by default by my app. How does one do this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T03:00:16.097

You can use "PortfolioItem/Feature", "PortfolioItem/Theme" as the recordType(s) in the config, i.e.:

```
{
    xtype       : 'rallyaddnew',
    recordTypes : ['PortfolioItem/Feature'],
    ignoredRequiredFields: ['Name','Project'],
    showAddWithDetails: false,
    openEditorAfterAddFailure: true,
    disabled: false,
    listeners   : {
        create: function(addNew, record) {
            Ext.Msg.alert('Add New', 'Added Record Name');
            console.log(record);
        }
    }
} 
```

Reviewing the AppSDK2 docs, I don't see a way to populate specific fields with default values via configurable items on the component, maybe one of the Rally developers can offer some assistance on that aspect.

# javascript - 我的声音在 explorer 或 firefox 上不起作用

> ID：15712933
> 
> 赞同：0
> 
> 时间：2013-03-29T23:19:14.230
> 
> 标签：javascript, jquery, html, audio

我通过 jQuery 加载 .ogg 和 .mp3 文件。将其加载到我的网站上进行测试，它仅适用于 chrome。怎么了？如果需要，这里是该网站的链接： [http ://willowshelley.com/japanese](http://willowshelley.com/japanese)

这是我的 jQuery 中的一部分。所有的音频功能看起来都是这样的：

```
$("#cat").click(function(){
$("<audio></audio>").attr({ 
    'src':'audio/cat.mp3', 
    'volume':1,
    'autoplay':'autoplay'
}).appendTo("body");
$("<audio></audio>").attr({ 
    'src':'audio/cat.ogg', 
    'volume':1,
    'autoplay':'autoplay'
}).appendTo("body");
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T23:26:15.123

看看这个：

[支持的媒体格式](https://developer.mozilla.org/en-US/docs/HTML/Supported_media_formats)

检查您正在查看的浏览器版本。

目前还不太支持音频标签。

# javascript - 用javascript测量多边形的圆度会给出不正确的数字

> ID：15712938
> 
> 赞同：2
> 
> 时间：2013-03-29T23:20:00.023
> 
> 标签：javascript, math, polygon, geometry

**编辑**请参阅下面的评论（问题尚未解决）。任何想尝试我的代码的人都可以在这里进行：http: [//tinker.io/e0676](http://tinker.io/e0676)

**EDIT2**我想我已经找到了问题：[http](http://www.geocomputation.org/1999/076/gc_076.htm) ://www.geocomputation.org/1999/076/gc_076.htm将尝试以某种方式解决它......

事情就是这样。如果您有多边形的面积和周长，您可以通过获取 area/(perimeter*perimeter) 的结果来测量多边形与圆的接近程度。我知道如何测量周长：

```
function getPolySize(arrP){ //the first and last point in arrP is the same!
   var S = 0;
 for(var i=1, l=arrP.length;i<l;i++)
    S += Math.sqrt(Math.pow(arrP[i-1].x-arrP[i].x,2)+Math.pow(arrP[i-1].y-arrP[i].y,2));
return S;
} 
```

和区域：

```
function getPolyArea(arrP){
var A = 0;
for(var i=0,l=arrP.length-1;i<l;i++)
    A += arrP[i].x*arrP[i+1].y - arrP[i+1].x*arrP[i].y;
A = A/2;    
return Math.abs(A);
} 
```

一切正常，但是如果我制作一个尽可能接近圆形的多边形，我就会开始得到奇怪的结果。我用它来制作圆形多边形：

```
var arrCircle = [];
function setPixel(x,y){
arrCircle.push({x:x,y:y});
}
function rasterCircle(xCenter, yCenter, radius)
{       
var x, y, r2;
r2 = radius * radius;

for (x = -radius+1; x <= radius; x++){      
    y = Math.floor(Math.sqrt(r2 - x*x) + 0.5);
    setPixel(xCenter + x, yCenter + y);
}
for (x = radius-1; x >= -radius; x--) {
    y = Math.floor(Math.sqrt(r2 - x*x) + 0.5);
    setPixel(xCenter + x, yCenter - y);
}
}
arrCircle.push(arrCircle[0]); 
```

由于半径较大的圆形多边形比半径较小的圆形多边形更接近理想的圆形，我认为圆形越大，面积/（周长*周长）应该越大，但事实并非如此，我不知道为什么。理想圆的“圆度”为 1/4PI (0,07957747154594766788444188168626)。我用（像多边形的圆圈）做了一些测试，这些是我的结果：

```
radius 10 roundness 0.0760194950578244
radius 20 roundness 0.07542738445429042
radius 30 roundness 0.07549530319982335
radius 40 roundness 0.07472106160782283
radius 50 roundness 0.07490614579701928
radius 60 roundness 0.0750939048274632
radius 70 roundness 0.07502892726254591
radius 80 roundness 0.07512064515249058
radius 90 roundness 0.0752191417813967 
```

那么为什么它应该增加的时候却减少了呢？任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T23:21:48.400

那是因为 javascript 像许多其他语言一样存在浮点问题。这是一个已知问题。您最好的解决方案是对数字进行四舍五入。另一种选择是使用大数字。看看这个库的精确度：http: [//jsfromhell.com/classes/bignumber](http://jsfromhell.com/classes/bignumber)

如果您喜欢数学并想更详细地理解它，请查看以下内容：http: [//docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T02:08:41.690

编辑：我意识到这并不是一个完整的解释，但我确实认为我目前的答案（截至 2013 年 3 月 30 日）提供了一些关于正在（或没有）发生的事情的额外见解。

我开始认为这个总和的极限过程并不是我们想象的那样。极限似乎在 0.075{something.} 左右

我敢打赌，四舍五入的使用与此有关。这对于栅格化非常有意义，但是您使用的公式可以获取未栅格化多边形的确切区域、沿圆边缘的长度等。限制可能会很有趣。

作为比较，我创建了一种通过重复二等分为圆生成多边形的方法。见： [http](http://tinker.io/e0676/4) ://tinker.io/e0676/4 （也，下面的代码）

我还修改了您`getPolyArea`以使用大数字以防万一（对于原始问题，它没有）。

```
//assumes one end of vector at origin                                                                         
function findNormalizedbisector(x1,y1,x2,y2)
{
    var xnew = (x1 + x2)/2;
    var ynew = (y1 + y2)/2;
    var normalizingfactor = Math.sqrt(xnew*xnew + ynew*ynew);
    xnew = xnew/normalizingfactor;
    ynew = ynew/normalizingfactor;
    return {x:xnew, y:ynew};
}
function rasterCircle2(xCenter, yCenter, radius,levels){
    var begin = [{x:1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:-1},{x:1,y:0}];
    var next;
    var begin_length;
    var i,j;
    for (i=0;i<levels; i++){
        next = [begin[0]];
        for(j=1,begin_length = begin.length; j< begin_length; j++){
            var nn1 = begin[j-1];
            var nn2 = begin[j];
            next.push(findNormalizedbisector(nn1.x,nn1.y,nn2.x,nn2.y));
            next.push(nn2);
        }
        begin = next;
    }
    for(i=0,begin_length = begin.length; i< begin_length; i++){
        var nn3 = begin[i];
        nn3.x = nn3.x*radius + xCenter;
        nn3.y = nn3.y*radius + yCenter;
    }
    return begin;
}
for(var i=1;i<10;i++){
    var arr = rasterCircle2(200,200,800,i);
    var round = getRoundness(arr);
    document.write('levels_of_bisection: '+i+' num of points: '+arr.length+' roundness: '+round+'<br />');

} 
```

这个加上我的mods到你原来的输出如下。请注意，通过二分法，我们终于看到了我们期望的数字。还要注意使用半径为 8000 的（大部分）原始方法的输出

```
levels_of_bisection: 1 num of points: 9 roundness: 0.0754441738241592276887245725443626784735
levels_of_bisection: 2 num of points: 17 roundness: 0.0785521795644663802398108421050698627987
levels_of_bisection: 3 num of points: 33 roundness: 0.0793216436531942231002943881950341480514
levels_of_bisection: 4 num of points: 65 roundness: 0.0795135454101061996101090797300452576319
levels_of_bisection: 5 num of points: 129 roundness: 0.0795614919376626996487018238437628627337
levels_of_bisection: 6 num of points: 257 roundness: 0.0795734767642052437694275988417572320135
levels_of_bisection: 7 num of points: 513 roundness: 0.0795764728580322174704427590361452409546
levels_of_bisection: 8 num of points: 1025 roundness: 0.0795772218744387817478897891643047512062
levels_of_bisection: 9 num of points: 2049 roundness: 0.0795774091280998583674859904802485345865
radius: 8000 num of points: 32001 roundness: 0.0751003307245799769095159405113677586659 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T16:32:44.650

我尝试按照 Jayc 的建议进行操作，但这仅在我不将其与 Big numbers 一起使用且仅更改最后三位小数时才有效。我的数字在小数点后第三位已经不正确了。

我也尝试了我们上面建议的大数字，但这也不起作用。我使用了 DP = 40（小数位）的[https://github.com/MikeMcl/big.js 。](https://github.com/MikeMcl/big.js)这个库可以做 sqrt 不像上面建议的那样（上面也不能做 pow(0.5) ）。

所以这里是结果：

```
radius 10 roundness 0.0760194950578243423134496712198170723197 
radius 20 roundness 0.0754273844542903459173216205506653687584 
radius 30 roundness 0.0754953031998234468551935482682038382823 
radius 40 roundness 0.0747210616078230319421955905769628317386 
radius 50 roundness 0.0749061457970194359965013537625645613175 
radius 60 roundness 0.0750939048274633950478066316279606244677 
radius 70 roundness 0.0750289272625461826452420199713700795491 
radius 80 roundness 0.0751206451524908473183103264150172570221 
radius 90 roundness 0.0752191417813970247297347505177938519628 
```

和新代码：

```
var S = new Big(0);
var arr = [];
for(var i=1, l=arrP.length;i<l;i++){       
    var add = Math.pow(arrP[i-1].x-arrP[i].x,2)+Math.pow(arrP[i-1].y-arrP[i].y,2);      
    var x = new Big(add);       
    x = x.sqrt();
    arr.push(x);
    S = S.plus(x);
}

arr.sort(function(a,b){return a-b});
var c = new Big(0);
for(var i=0;i<arr.length;i++){
    var y = arr[i].minus(c);
    var t = S.plus(y);
    c = t.minus(S).minus(y);
    S = t;      
} 
```

我不禁认为浮点不是这里的问题。我尝试了 1000（！）小数位的测试，并得到了与上面所见完全相同的数字（仅长一点，但前 40 位数字相同）。

还有其他问题，但是什么？

# apache - Directory Apache server permissions

> ID：15712944
> 
> 赞同：0
> 
> 时间：2013-03-29T23:20:44.290
> 
> 标签：apache, permissions, directory

The function "is_writeable" of php it returns false, then the directory that im proving have the next permissions 755 owner and the root group. To make it run i put chown www-data -R /var/www/myweb. Doing that it works, but i change the owner from root to apache (www-data). My question is if that form of solve it it's correct or not. I'm making a big hole security or it's correct?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T23:34:18.103

Changing owner from `root` to `www-data` is ok. I would be careful of making everything writable though (with `-R`). You should probably only make the bare minimum writable. You might want to run `chown www-data:www-data` to change both owner and group.

# wpf - 将 WPF 应用程序转换为类库

> ID：15712945
> 
> 赞同：0
> 
> 时间：2013-03-29T23:20:46.750
> 
> 标签：wpf, vb.net, dll

我开发了一个 WPF 代码，假设从主应用程序获取周边并在 3d 中绘制天线图案。我使用 WPF 是因为我发现绘制 3d 形状对我来说很容易。

作为起点，我创建了一个 WPF 应用程序项目并使用曲线方程在 3d 中绘制形状。但是我的主要应用程序很旧并且是用 VB 编写的。现在我坚持将我的 WPF 应用程序项目转换为库，该库从 mian 程序（在 VB 中）获取一些常量值并在 3d 中近似形状。

问题：

有什么方法可以使用我的 WPF 应用程序项目将其转换为类库或可以在 VB 中使用的东西？

（或者）

我必须为 VB 类库编写新代码吗？

并且

最主要的是我还在WPF中使用了一个外部库（3Dtools.dll），它是否包含要创建的类库（我的意思是，可以创建一个已经使用外部.dll的.dll）

我没有强大的编程背景，也找不到关于这个问题的帮助。任何链接或建议将不胜感激。

谢谢 ：）

# php - PHP - MySQL 选择，从，在哪里

> ID：15712954
> 
> 赞同：-1
> 
> 时间：2013-03-29T23:21:44.310
> 
> 标签：php, mysql, database

我在连续选择一个字段时遇到了一些困难。也许有人可以指出我正确的方向来阅读一些适当的文档，我对此很陌生。

我有一个名为 users 的表，其中有一行用户名设置为 ryanjay。我正在尝试从此行中选择密码。

这就是我现在所拥有的，我收到一个错误：

> “字段列表”中的未知列“密码”

这是我的代码

```
$loggin_user = $_COOKIE['username'];

$query = "SELECT password FROM users WHERE username = $loggin_user";
$result = mysql_query($query) or die($query."<br/><br/>".mysql_error());
$password = mysql_result($result, 0);
echo $password; 
```

对于这个问题，密码是“密码”。回显 $password 时，我应该看到“密码”。但什么都没有。

我能够写入数据库和所有内容。我还包括一个 db.php，其中包含用于连接的数据库信息。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T23:25:30.943

尝试

```
$loggin_user = mysql_real_escape_string($_COOKIE['username']);
$query = "SELECT `password` FROM `users` WHERE `username` = '$loggin_user'";
$result = mysql_query($query) or die($query."<br/><br/>".mysql_error());
$password = mysql_result($result, 0);
echo $password; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T23:25:42.993

It is telling you that there is no column called "password" in the table users.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T23:26:23.850

You need single quotes ' for string columns. Otherwise SQL thinks, it's a table name. Try this:

```
$query = "SELECT `password` FROM `users` WHERE `username` = '".$loggin_user."' "; 
```

Don't forget to escape your variables to prevent SQL injections. Also it's more pretty to use backticks in MySQL for table/column names to avoid problems with reserved names.

# xml - 带有连字符的 Coldfusion XMLParse

> ID：15712959
> 
> 赞同：0
> 
> 时间：2013-03-29T23:22:03.180
> 
> 标签：xml, coldfusion, xml-parsing, coldfusion-9

我正在尝试从 xml 创建查询。我正在使用 xmlparse，但主节点中有一个 hypen。我不知道如何构建它，所以我可以循环浏览产品。这是它的样子

[http://www.screencast.com/t/GhCgHTymMsR1](http://www.screencast.com/t/GhCgHTymMsR1)

我一直在尝试这样做，但它不起作用或者我错过了一些东西。

```
<cfset result = xmlParse(result.Filecontent)>
<cfloop index="x" from="1" to="#arrayLen(result["cj-api"]products.product)#">

<?xml version="1.0" encoding="UTF-8"?>
<cj-api>
  <products total-matched="363" records-returned="2" page-number="1">
    <product>
      <ad-id>10773572</ad-id>
      <advertiser-id>2955746</advertiser-id>
      <advertiser-name>Shopko</advertiser-name>
      <advertiser-category>picture books</advertiser-category>
      <buy-url>http://www.anrdoezrs.net/click-5917360-10773572?url=http%3A%2F%2Fshopko.com%2Fdetail%2FLEGO-Batman%3A-The-Visual-Book%2F48364%2F0000&amp;cjsku=48364</buy-url>
  <catalog-id>cjo:398</catalog-id>
  <currency>USD</currency>
  <description>Enter the world of your favorite LEGO&amp;#174; super hero in the first ever guide to LEGO&amp;#174; Batman&amp;#8482;! LEGO Batman: The Visual Dictionary combines DK's famous Visual Dictionary format with the adventurous world of the LEGO Caped Crusader.Every set and minifigure from the LEGO Batman universe will now be at your fingertips.</description>
  <image-url>http://shopko.com/items/shopko/images/small/48364_0000.jpg</image-url>
  <in-stock></in-stock>
  <isbn></isbn>
  <manufacturer-name></manufacturer-name>
  <manufacturer-sku></manufacturer-sku>
  <name>LEGO Batman: The Visual Book</name>
  <price>21.99</price>
  <retail-price>21.99</retail-price>
  <sale-price>21.99</sale-price>
  <sku>48364</sku>
  <upc></upc>
</product>
<product>
  <ad-id>10773572</ad-id>
  <advertiser-id>2955746</advertiser-id>
  <advertiser-name>Shopko</advertiser-name>
  <advertiser-category>toy figures &amp; playsets</advertiser-category>
  <buy-url>http://www.jdoqocy.com/click-5917360-10773572?url=http%3A%2F%2Fshopko.com%2Fdetail%2FLEGO-Friends-Olivias-Speedboat%2F59022%2F0000&amp;cjsku=59022</buy-url>
  <catalog-id>cjo:398</catalog-id>
  <currency>USD</currency>
  <description>All aboard for fun in the sun with Olivia's Speedboat!Includes Olivia mini-doll figure Features sand castle, shovel, bucket, beach towel, umbrella and cupBring the LEGO&amp;#174; Friends for a ride around the bay! Build a sand castle or relax in the sun!LEGO Friends pieces are fully compatible with all LEGO System bricks. Collect all of the LEGO Friends sets for a whole city of LEGO Friends fun!LEGO mini-dolls are figures made especially for the world of LEGO Friends, with thousands of customizable fashion and accessory combinations!Measures over 1&amp;#34; (4cm) tall, 4&amp;#34; (10cm) wide and 4&amp;#34; (12cm) long</description>
  <image-url>http://shopko.com/items/shopko/images/small/59022_0000.jpg</image-url>
  <in-stock></in-stock>
  <isbn></isbn>
  <manufacturer-name></manufacturer-name>
  <manufacturer-sku></manufacturer-sku>
  <name>LEGO Friends Olivias Speedboat</name>
  <price>13.49</price>
  <retail-price>14.99</retail-price>
  <sale-price>13.49</sale-price>
  <sku>59022</sku>
  <upc></upc>
    </product>
  </products>
</cj-api> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T03:00:51.410

[摘自以上评论]

您的问题可能只是缺少`.`. 代替：

```
result["cj-api"]products.product 
```

尝试：

```
result["cj-api"].products.product 
```

# java - .equals 和 .get 一起使用

> ID：15712966
> 
> 赞同：0
> 
> 时间：2013-03-29T23:22:53.260
> 
> 标签：java, jpa

我遇到的问题是.equals。我试图检查密码字符串是否等于数据库中密码的值。我的 serlvet 中有密码字符串，它从表单中获取密码。它检查用户名但不检查密码

```
public boolean acceptCustomer(String username, String password){
CustomerTableClass customer = new CustomerTableClass();
customer.setCustomerUsername(username);
customer.setCustomerPassword(password);
Boolean check = null;
try
{
entityManager = entityManagerFactory.createEntityManager();             
CustomerTableClass customerTest = new CustomerTableClass();
customerTest = entityManager.find(customer.getClass(),username);
if (customerTest!=null)&&(password.equals(customer.getPassword()))){

check= true; 
System.out.println("User found");

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T23:26:45.870

你似乎有一个额外的括号。尝试这个：

```
(customerTest!=null && password.equals(customer.getPassword() ) ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T23:27:09.717

您的密码字段可能以某种[散列](http://openwall.info/wiki/john/sample-hashes)编码。您需要对用户在登录表单中传递的密码进行哈希处理，然后将其与您从数据库中获取的密码进行检查。您的数据库密码也可能有一个[salt](http://en.wikipedia.org/wiki/Salt_%28cryptography)。如果它有盐，那么您需要将盐附加到用户传入的密码中，然后拥有它，然后将其与数据库中的密码进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T10:34:13.603

customer.getPassword() 没有从数据库中获取密码。在.equals 中使用密码之前，我必须先找到并找回密码。它现在完美地工作了代码

```
 public boolean acceptCustomer(String username, String password){
    CustomerTableClass customer = new CustomerTableClass();
    customer.setCustomerUsername(username);
    customer.setCustomerPassword(password);
    Boolean check = null;

    try 
    {
        entityManager = entityManagerFactory.createEntityManager();             
        CustomerTableClass customerTest = new CustomerTableClass();
        customerTest = entityManager.find(customer.getClass(),username);// .find checks if username aleady exists 
        if (customerTest!=null ){// if user exists
            customer = entityManager.find(customer.getClass(), username);// retrieve user from db
            customer.getPassword();//retrieve password from db
            if (password.equals(customer.getPassword()))//if they are equal 
            {
                System.out.println("user and password correct");
                check= true;    
            }
            else
            {
                System.out.println("user and password not correct");
                check= false;
                entityManager.close();
            }
        }
        else 
        {
            System.out.print("user does not exist");
        }
    } 
```

# python - Python脚本错误json2csv文件错误

> ID：15712967
> 
> 赞同：-1
> 
> 时间：2013-03-29T23:22:54.527
> 
> 标签：python, python-2.7

我有一个用 python 为我编写的代码 json2csv 文件（我命名为 json2csv.py）。

```
import sys, json, csv

input = open(sys.argv[1])
json_array = json.load(input)
input.close()

item_data = json_array["items"]

if len(item_data) >= 1:
    first_item_id = item_data[0].keys()[0]
    columns = item_data[0][first_item_id].keys()

csv_file = open(sys.argv[2], "wb")
writer = csv.writer(csv_file)
# there is currently a known bug where column names are partially uppercase, this will be fixed soon. the "map(lambda x: x.lower(), columns)" fixes this issue in the mean time
writer.writerow(map(lambda x: x.lower(), columns)) 

# here .items() is a standard python function
for item_id, item_data in item_data[0].items():
    row = []
    for column_name in columns:
        if column_name.lower() == 'name_part': # lower required due to above issue
            row.append(" ".join(item_data[column_name]))
        else:
            row.append(item_data[column_name])
    writer.writerow(row) 

csv_file.close() 
```

我的输入存储在文件 pd.json 中。pd.json 的内容是

```
{"status": "ok", "items": [{"work_phone_extension": null, "name_part": ["PATIENT", "TEST"], "residential_street_address_line_2": "", "referring_physician_first_name": "", "residential_street_address_line_1": "", "work_phone": "", "referring_physician_last_name": "", "residential_postal_or_zip_code": "", "referring_physician_code": "", "residence_phone": "416-", "health_card": "", "item_id": 1, "unique_vendor_id_sequence": 1, "cell_phone": null, "residential_city": "Toronto", "health_card_version": "", "residential_country_and_province_or_state": "CA_ON"}, {"work_phone_extension": null, "name_part": ["STEVE", "TEST"], "residential_street_address_line_2": "", "referring_physician_first_name": "Adam", "residential_street_address_line_1": "123 Fake St", "work_phone": "", "referring_physician_last_name": "Test", "residential_postal_or_zip_code": "M5E1Z8", "referring_physician_code": "123456", "residence_phone": "416-555-5555", "health_card": "", "item_id": 2, "unique_vendor_id_sequence": 2, "cell_phone": null, "residential_city": "Toronto", "health_card_version": "", "residential_country_and_province_or_state": "CA_ON"}]} 
```

我正在执行命令

```
c:\python27\python.exe c:\Python27\Scripts\json2csv.py c:\Python27\Scripts\pd.json c:\Python27\Scripts\pd.txt 
```

我不断收到错误

```
'Nonetype' object has no attribute keys. 
```

有人可以在 first_item_id = item_data[0].keys()[0] 行指出 json2csv 中的错误吗

我厌倦了坐着处理这段代码。

此代码采用 pd.json 并将文件输出为 pd.txt

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T23:48:44.677

你的错误应该是`columns = item_data[0][first_item_id].keys()`在线的，问题在于`first_item_id`，我认为你应该改变这个：

```
first_item_id = item_data[0].keys()[0] 
```

对此：

```
first_item_id = item_data[0]['item_id'] 
```

但它仍然有一些问题，我认为代码不是为这个 json 结构编写的，我只是更改了另一行来修复它，我不确定这是正确的解决方案，但这是来自你当前代码的东西：

```
import sys, json, csv

input = open(sys.argv[1])
json_array = json.load(input)
input.close()

item_data = json_array["items"]
if len(item_data) >= 1:
    first_item_id = item_data[0]['item_id']
    columns = item_data[0].keys()

csv_file = open(sys.argv[2], "wb")
writer = csv.writer(csv_file)
# there is currently a known bug where column names are partially uppercase, this will be fixed soon. the "map(lambda x: x.lower(), columns)" fixes this issue in the mean time
writer.writerow(map(lambda x: x.lower(), columns)) 

# here .items() is a standard python function
for item in item_data:
    row = []
    for column_name in columns:
        if column_name.lower() == 'name_part': # lower required due to above issue
            row.append(" ".join(item[column_name]))
        else:
            row.append(item[column_name])
    writer.writerow(row) 

csv_file.close() 
```

# php - 为Windows适配php并行执行功能？

> ID：15712968
> 
> 赞同：0
> 
> 时间：2013-03-29T23:22:55.480
> 
> 标签：php, windows, background, exec, goroutine

这是一个并行执行命令数组并返回结果数组的函数，可选地通过回调函数和进程数量进行过滤，它在我的 Mac 上的 Lion 上运行良好：

```
// executes commands in parallel, limited by the number of file descriptors or maxProcesses.
// pass an optional callback to filter each result (return a non-null value to stop execution).
function    execParallel($commands, $callback = null, $maxProcesses = PHP_INT_MAX)
{
    $handles = array();
    $results = array();

    for($i = 0; $i < count($commands) || count($handles);)
    {
        if($i < count($commands) && count($handles) < $maxProcesses)
            if(($handle = @popen($commands[$i].' 2> /dev/null &', "r")) !== false)
            {
                stream_set_blocking($handle, 0);    // does nothing on Windows
                $handles[$i] = $handle;
                $results[$i] = '';
                $i++;
            }

        foreach($handles as $key => $handle)
        {
            $results[$key] .= fread($handle, 4096);
            if(feof($handle))
            {
                pclose($handles[$key]);
                unset($handles[$key]);

                if($callback)
                    if($callback($results[$key], $key))
                        break;
            }
        }
    }

    foreach($handles as $key => $handle)    // clear any incomplete tasks
    {
        pclose($handles[$key]);
        unset($handles[$key]);
        unset($results[$key]);
    }

    return $results;
} 
```

这是一个使用匿名函数调用它的示例，并且在 php 5.3 中限制为 64 个线程：

```
$commands = array_fill(0, 256, 'sleep 1; echo | date');
$results = execParallel($commands, function($result, $key)
{
    echo "$key\n";
    if($key == 128) return false;
}, 64);
print_r($results); 
```

输出是一个最多 128 个数字的序列，然后是大约 128 个时间戳，具体取决于时钟精度以及其他一些进程是否完成。如果出现问题，过滤器可以方便地在中途退出。

您可以尝试将进程限制从 64 更改为 1 以查看连续到达的结果，或者注释掉 $key == 128 行以防止停止。如果您没有设置进程数限制，它会尽可能多地打开进程的文件句柄，并等待更多的文件句柄在内部可用。

它的工作方式是，它几乎与 shell_exec() 相同，但在后台启动进程并继续执行。如果您通过关闭句柄过早地关闭进程，它将有关损坏管道的任何警告传递给 null。

**我的问题是，我需要让它跨平台，但不能轻松访问 PC 或 Windows 的所有风格，如 NT。这是我的 TODO 清单：**

*   fread() 在 Windows 上阻塞，因为 stream_set_blocking() 是 NOP。也许可以用 fread(1) 解决这个问题，但它只是伪抢先的。需要一种方法来查看是否有字节在等待，可能是通过选择或以某种不同的方式使流非阻塞。
*   在后台生成进程，可能使用“START /B [command]”。这确实需要与 unix 中的“&”类似地工作，并且不生成额外的输出，阻止粗壮或强制它只能通过文件访问，强制用户创建批处理文件或其他奇怪的东西。它可能需要使用 proc_ open() 或 pcntl_fork() 或完全不同的东西，我不太确定。
*   探索使用 curl_multi 或其他线程工具来生成函数并像往常一样在其中调用 shell_exec() （这需要以不涉及安装任何额外库的方式完成）。
*   使用像 DIRECTORY_SEPARATOR == '\' 这样的良好测试在 Windows 上运行单独的代码分支。
*   在 Windows 上需要一些更好的测试用例，可能是 "TIMEOUT [seconds]" 或 "PING -n [milliseconds] 127.0.0.1>nul" 没有输出。

这一切都开始了，因为我试图在 php 中模拟[goroutine](http://golang.org/doc/effective_go.html#goroutines)之类的东西，您可以在其中生成最多 N 个进程，如果达到限制，它只会阻塞，直到有更多可用，然后返回结果。我一直需要加速应该很容易并行化的大型任务，但是 php 使这变得困难，因为由于一堆特定于操作系统的细节，他们的手被束缚了。

所以我认为无论谁想出了这个函数的可靠跨平台版本，或者非常类似于“正常工作”的 goroutine 的东西，都会发现他们的代码非常受欢迎。我的猜测是这个函数现在回退到在 Windows 上串行运行。

提前感谢您的帮助，祝您好运！

# regex - 如何将输出命令管道终端到 grep 的输入并使用正则表达式？

> ID：15712970
> 
> 赞同：5
> 
> 时间：2013-03-29T23:23:20.057
> 
> 标签：regex, grep, pipe

我认为在 OSX 或 Linux 上获取 IP 地址会很容易学习如何将正则表达式与 grep 一起使用，但看起来我要么有语法错误，要么误解了所需的内容。

我知道这个正则表达式是正确的，虽然我知道它可能不是一个有效的 IP 地址，但我现在没有考虑这一点。

```
(\d{1,3}\.){3}\d{1,3} 
```

所以我不确定为什么这不起作用。

```
ifconfig | grep -e "(\d{1,3}\.){3}\d{1,3}" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T03:10:54.367

两件事情：

`-e`首先，和之间有区别`-E`：`-e`只是说“接下来是一个表达式”，而`-E`说：“使用扩展的正则表达式”。根据您使用的 grep 的确切版本，您需要`-E`让事情正常工作。

其次，如前所述，`-d`并非所有版本的 grep 都可以识别。我发现以下方法有效：由于 ip 地址是“常规”数字，我们不需要比`[0-9]`找到它们更花哨的东西：

```
ifconfig | grep -E '([0-9]{1,3}\.){3}[0-9]{1,3}' 
```

无需转义其他字符（在我的 grep 版本中 - 使用 OSX 10.7.5）

顺便说一句，在测试您的正则表达式时，您可以考虑使用类似

```
echo "10.1.15.123" | grep -E '([0-9]{1,3}\.){3}[0-9]{1,3}' 
```

to confirm that your regex is working - regardless of the exact output of `ifconfig`. It breaks the problem into two smaller problems, which is usually a good strategy.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T23:42:16.843

`\d`grep 不理解，您可以使用`[0-9]`or `[[:digit:]]`。不幸的是，正则表达式有很多方言。您还必须逃避`{`,`}`和。以下对我有用`(``)`

```
/sbin/ifconfig | grep -e "\([[:digit:]]\{1,3\}\.\)\{3\}[[:digit:]]\{1,3\}" 
```

# java - 使用 LineBreakMeasurer 计算线条并更改字体大小

> ID：15712972
> 
> 赞同：3
> 
> 时间：2013-03-29T23:23:46.540
> 
> 标签：java, swing, fonts, awt, jtextpane

我已经使用其他出色的答案来设计一种方法，该方法返回 a 的正确尺寸`JTextPane`，给定它的内容和宽度，使用`LineBreakMeasurer`.

问题是，当我尝试不同的字体大小时，它有点小，我不知道为什么。它非常适用于 Arial 12，但不适用于 Arial 8 或 Arial 16，因为这样`nextLayout`会计算出错误的长度。谁能告诉我为什么？

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.Font;
import java.awt.FontMetrics;
import java.awt.font.FontRenderContext;
import java.awt.font.LineBreakMeasurer;
import java.awt.font.TextLayout;
import java.text.AttributedCharacterIterator;
import java.text.AttributedString;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextPane;
import javax.swing.border.LineBorder;

public class Example1 {

static JFrame frame = new JFrame();
static JPanel bigPanel = new JPanel();
static JTextPane textPane[] = new JTextPane[10];

public static void main(String[] args) {

    frame.setLayout(new FlowLayout());
    frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

    for(int i=0 ; i<10 ; i++) {
        textPane[i] = new JTextPane();
        textPane[i].setFont(new Font("Arial", 0, 12+i ));
        textPane[i].setText("This is 10 characters of " + ((Integer)(10+i)).toString() + " points : a b c d e f g h i j");
        textPane[i].setPreferredSize(getTextDimension(textPane[i], 100));
        textPane[i].setBorder(new LineBorder(Color.BLACK));
        frame.add(textPane[i]);
    }

    frame.setSize(500, 500);
    frame.setVisible(true);

}

static private Dimension getTextDimension(JTextPane textPane, float width) {

    FontMetrics fm = textPane.getFontMetrics(textPane.getFont());
    int fontHeight = fm.getHeight()+ fm.getDescent();
    //int fontHeight = fm.getHeight();

    AttributedString text = new AttributedString(textPane.getText());
    FontRenderContext frc = textPane.getFontMetrics(textPane.getFont()).getFontRenderContext();
    AttributedCharacterIterator styledText = text.getIterator();
    LineBreakMeasurer measurer = new LineBreakMeasurer(styledText, frc);

    float wrappingWidth = width - textPane.getInsets().left - textPane.getInsets().right;

    int lines = 0;
     while (measurer.getPosition() < styledText.getEndIndex()) {
        TextLayout layout = measurer.nextLayout(wrappingWidth);
        lines++;
     }

     return new Dimension((int)Math.round(width), lines * fontHeight);
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-29T17:28:45.507

我通过在 AttributedString 的实例化之后添加以下行来修复字体大小问题：

```
AttributedString text = new AttributedString(textPane.getText());
text.addAttribute(TextAttribute.FONT, textPane.getFont()); 
```

我猜 Attributed String 需要定义字体，虽然我认为它是由 FontRenderContext 处理的，但至少对我来说，它不是。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T01:26:49.583

我不确定你的 有什么问题`getTextDimension()`，但更可靠的方法是让文本组件进行计算。[*如何测量/计算*](https://stackoverflow.com/q/3315681/230513)[*需要渲染自身*](https://stackoverflow.com/q/3315681/230513)的大小？ [*`Document`*](https://stackoverflow.com/q/3315681/230513)

 **附录：这是@camickr 的变体[`TextPanePerfectSize`](https://stackoverflow.com/a/3318949/230513)。

![图片](../Images/a20a2245fee96d4d7e382da158ac0c43.png)

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.GridLayout;
import java.awt.Rectangle;
import java.awt.event.ActionEvent;
import javax.swing.AbstractAction;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextPane;
import javax.swing.border.LineBorder;
import javax.swing.text.BadLocationException;
import javax.swing.text.SimpleAttributeSet;
import javax.swing.text.StyleConstants;
import javax.swing.text.StyledDocument;

/**
 * @see https://stackoverflow.com/a/15983197/230513
 * @see https://stackoverflow.com/a/3318949/230513
 */
public class Test {

    private static final int SIZE = 16;
    private static int size = SIZE;
    private static JTextPane textPane[] = new JTextPane[SIZE];

    public static void main(String[] args) {
        final JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JPanel buttonPanel = new JPanel();
        buttonPanel.add(new JButton(new AbstractAction("Update") {
            @Override
            public void actionPerformed(ActionEvent e) {
                for (JTextPane jtp : textPane) {
                    StyledDocument doc = (StyledDocument) jtp.getDocument();
                    SimpleAttributeSet style = new SimpleAttributeSet();
                    StyleConstants.setFontFamily(style, "Serif");
                    StyleConstants.setFontSize(style, size++);
                    try {
                        doc.insertString(doc.getLength(), " one two three", style);
                        Dimension d = jtp.getPreferredSize();
                        Rectangle r = jtp.modelToView(jtp.getDocument().getLength());
                        d.height = r.y + r.height;
                        jtp.setPreferredSize(d);
                    } catch (BadLocationException ex) {
                        ex.printStackTrace(System.err);
                    }
                    frame.pack();
                }
            }
        }));
        frame.add(buttonPanel, BorderLayout.NORTH);
        JPanel textPanel = new JPanel(new GridLayout(0, 4));
        for (int i = 0; i < textPane.length; i++) {
            textPane[i] = new JTextPane();
            textPane[i].setText("Text pane number " + String.valueOf(i + 1));
            textPane[i].setBorder(new LineBorder(Color.BLACK));
            textPanel.add(textPane[i]);
        }
        frame.add(new JScrollPane(textPanel));
        frame.pack();
        frame.setVisible(true);
    }
} 
```**

# php - mod_rewrite 影响获取变量

> ID：15712973
> 
> 赞同：0
> 
> 时间：2013-03-29T23:23:56.227
> 
> 标签：php, apache, mod-rewrite

我在 Apache 上有一个基于 PHP 的博客，其中发生了一个简单的 mod_rewrite：

```
Options +FollowSymLinks
RewriteEngine On

RewriteRule ^(.*)$ index.php?story=$1 [L] 
```

但是，当我在 PHP 脚本中查看 $_GET['story'] 时，它每次都会给我“index.php”。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T23:33:13.153

如果在传递期间发生任何导致内部或外部重定向的更改，Apache 将再次运行规则。您应该使用 index.php 的规则来捕捉这一点

```
RewriteRule ^index\.php$ - [L] 
```

只是按原样使用该地址。这就是 WordPress 所做的。

根据您的 apache 版本，您可以使用 RewriteLogLevel 或 LogLevel 将重写日志级别设置为 8。在旧版本上，这必须在 httpd.conf 中完成，因此您需要一个本地测试站点。

不要离开该登录，否则您的性能将受到影响。

编辑：

这是在 L 标志下[重新运行的文档中](http://httpd.apache.org/docs/current/rewrite/flags.html)的引述：

如果您在 .htaccess 文件或部分中使用 RewriteRule，那么了解规则的处理方式非常重要。其简化形式是，一旦处理了规则，重写的请求就会被交回 URL 解析引擎来做它可能做的事情。处理重写的请求时，可能会再次遇到 .htaccess 文件或部分，因此可能会从头开始再次运行规则集。最常见的情况是，如果其中一个规则导致重定向（内部或外部）导致请求过程重新开始。

# ios - Objective C syntax understanding

> ID：15712979
> 
> 赞同：0
> 
> 时间：2013-03-29T23:24:35.747
> 
> 标签：ios, objective-c, ios6

I am a newbie to objective C. I was looking through a few tutorials online to create like a dropdown using the iOS sdk. So I came across the picker view, and from a few online resources I came to know that I would have to provide a delegate and a datasource for the picker.

And the syntax in the header file for the interface is something like this.

```
@interface ViewController : UIController <UIPickerViewDataSource, UIPickerViewDelegate>

@end 
```

Now, I understand that UIController is the parent of ViewController, but what does the greater than & less than mean here?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T23:25:46.743

`<UIPickerViewDataSource, UIPickerViewDelegate>` means that the class *conforms to* these two *protocols*. Protocols are akin to interfaces in C# and Java^(✝</sup>; they describe a list of methods you must implement in your class. Your class, `ViewController`, must implement all methods that are required by the `UIPickerViewDataSource` and `UIPickerViewDelegate` protocols.)

See [*Working with Protocols*](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/WorkingwithProtocols/WorkingwithProtocols.html), [*UIPickerViewDataSource Protocol Reference*](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Reference/UIPickerViewDataSource_Protocol/Reference/Reference.html) and [*UIPickerViewDelegate Protocol Reference*](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPickerViewDelegate_Protocol/Reference/UIPickerViewDelegate.html).

^(✝ With the slight difference that methods in protocols can be marked as optional, whereas methods in interfaces are always required.)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T23:26:56.057

Those are called protocols: formal lists of declarations for which the corresponding methods and/or properties are to be implemented by the class that **conforms to these protocols.**

[More about protocols here.](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/WorkingwithProtocols/WorkingwithProtocols.html)

# html - 当内容旋转文本时，包含的元素不会垂直扩展

> ID：15712981
> 
> 赞同：2
> 
> 时间：2013-03-29T23:24:56.413
> 
> 标签：html, css

我有一个带有一些标签的表格，其中包含通过 CSS 旋转的文本。我遇到的问题是 th 没有随内容垂直扩展。这是我拥有的标记的基本示例：

HTML：

```
<table>
    <thead>
        <th>
            <div class="rotated-text">Some Text</div>
        </th>
        <th>
            <div class="rotated-text">Some More Text</div>
        </th>
        <th>
            <div class="rotated-text">Even More Text</div>
        </th>
    </thead>
</table> 
```

CSS：

```
.rotated-text {
    filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3);
    -webkit-transform: rotate(-90deg); 
    -moz-transform: rotate(-90deg); 
} 
```

示例：http: [//jsfiddle.net/UPFkX/1/](http://jsfiddle.net/UPFkX/1/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T23:38:13.123

包含的元素不能扩展，因为 css 转换（和 IE 过滤器）不会影响[盒子模型](http://css-tricks.com/the-css-box-model/)。

引用 Marco Miltenburg 的话：

> 如果我没记错的话，元素是正常流程的一部分，或者是浮动的，就好像它们没有被转换一样。一旦确定了它们的位置，就执行转换或转换。转换或过渡将不再对文档流或任何浮动产生任何影响。

[你可以在这里](https://stackoverflow.com/questions/7860413/css3-transform-for-text-rotate)找到他对 SO 上类似问题的回答。

实际上，`width`转换后的元素的属性实际上会改变它的可见“高度”，而该`height`属性将改变它的可见“宽度”。简而言之：

**通过 css 转换，被转换的是外观，而不是元素本身或它对文档流的“影响”。**

什么可能对您有所帮助（视情况而定）：

Set the `height` property of each transformed element to it's `width` in pixels. That will influence their containers height just the way you want it.

**EDIT:**

As Juan Rangel said in his answer, you could go for javascript to solve the problem. I totally agree on that - what he would do with jquery is the same thing I was talking about above. If you can not tell how tall the transformed elements will be, that might even be the better solution, but keep the (small amout of) clients in mind that don't allow you to use javascript. Anyways, you'll have to compromise unfortunately.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T23:34:23.950

对您的代码进行一些编辑。

删除`div`并添加`class"rotated-text"`到您的`th`. 添加这个 javascript
`$(".verticalTableHeader").each(function(){$(this).height($(this).width())})`

确保您的页面调用 jQuery。

[http://jsfiddle.net/UPFkX/3/](http://jsfiddle.net/UPFkX/3/)

# ffmpeg - 为什么无法接收 .avi 视频文件的 rtp 流？

> ID：15712983
> 
> 赞同：5
> 
> 时间：2013-03-29T23:25:16.510
> 
> 标签：ffmpeg, video-streaming, rtp

在[ffmpeg streamingGuide](http://ffmpeg.org/trac/ffmpeg/wiki/StreamingGuide)中，它写道：

```
ffmpeg -re -f lavfi -i aevalsrc="sin(400*2*PI*t)" -ar 8000 -f mulaw -f rtp rtp://127.0.0.1:1234 &
ffplay rtp://127.0.0.1:1234 
```

我想用真实的视频文件来代替人工信号。然后我在终端A写下以下内容：

```
ffmpeg -re -i outputFile.avi -f mulaw -f rtp rtp://127.0.0.1:1234 
```

似乎它正在工作：帧信息正在计数。以下是最后关于终端 A 的信息：

```
frame=  309 fps= 29 q=31.0 Lsize=     931kB time=00:00:10.30 bitrate= 740.8kbits/s     video:922kB audio:0kB subtitle:0 global headers:0kB muxing overhead 1.030813% 
```

当终端 A 的帧仍在计数（未完成）时，我在终端 B 键入以下内容：

```
ffplay rtp://127.0.0.1:1234 
```

但它不起作用：错误信息是：

```
[udp @ 0x7fb370001500] bind failed: Address already in useB f=0/0   
rtp://127.0.0.1:1234: Input/output error 
```

为什么？

[更新 1] 按照 Camille Goudeseune 的指示，我使用了 foo.sdp
ffmpeg 终端的输入是：

> ffmpeg -re -i out.avi -f mulaw -f rtp rtp://127.0.0.1:1235

ffplay 的终端是：

> ffplay -i foo.sdp

ffplay 终端显示很多错误，没有图像。

```
 libpostproc    52\.  2.100 / 52\.  2.100
[sdp @ 0x7fafdc0008c0] Undefined type (30)    0KB sq=    0B f=0/0   
[sdp @ 0x7fafdc0008c0] nal size exceeds length: 25453 86 0B f=0/0   
[sdp @ 0x7fafdc0008c0] Consumed more bytes than we got! (-25367)
[sdp @ 0x7fafdc0008c0] nal size exceeds length: 25453 86
[sdp @ 0x7fafdc0008c0] Consumed more bytes than we got! (-25367)
[sdp @ 0x7fafdc0008c0] Unhandled type (27) (See RFC for implementation details
[sdp @ 0x7fafdc0008c0] Undefined type (31)    0KB sq=    0B f=0/0   
[sdp @ 0x7fafdc0008c0] Unhandled type (27) (See RFC for implementation details
[sdp @ 0x7fafdc0008c0] nal size exceeds length: 62414 6130B f=0/0   
[sdp @ 0x7fafdc0008c0] Consumed more bytes than we got! (-61801)
[sdp @ 0x7fafdc0008c0] nal size exceeds length: 62414 613
[sdp @ 0x7fafdc0008c0] Consumed more bytes than we got! (-61801)
[h264 @ 0x7fafdc003020] non-existing PPS referencedq=    0B f=0/0   
[h264 @ 0x7fafdc003020] non-existing PPS 0 referenced
[h264 @ 0x7fafdc003020] decode_slice_header error
[h264 @ 0x7fafdc003020] Invalid mix of idr and non-idr slices
[sdp @ 0x7fafdc0008c0] Undefined type (31)    0KB sq=    0B f=0/0   
[sdp @ 0x7fafdc0008c0] Unhandled type (29) (See RFC for implementation details
[sdp @ 0x7fafdc0008c0] Unhandled type (26) (See RFC for implementation details
[sdp @ 0x7fafdc0008c0] Unhandled type (27) (See RFC for implementation details
    Last message repeated 2 times  0KB vq=    0KB sq=    0B f=0/0   
[sdp @ 0x7fafdc0008c0] Undefined type (31)
[sdp @ 0x7fafdc0008c0] Unhandled type (26) (See RFC for implementation details
[sdp @ 0x7fafdc0008c0] Unhandled type (25) (See RFC for implementation details
[h264 @ 0x7fafdc003020] insane cropping not completely supported, this could look slightly wrong ... (left: 2, top: 2)
[h264 @ 0x7fafdc003020] illegal aspect ratio
[h264 @ 0x7fafdc003020] missing picture in access unit with size 84589
[h264 @ 0x7fafdc003020] Partitioned H.264 support is incomplete
[h264 @ 0x7fafdc003020] insane cropping not completely supported, this could look slightly wrong ... (left: 2, top: 2)
[h264 @ 0x7fafdc003020] illegal aspect ratio
[h264 @ 0x7fafdc003020] insane cropping not completely supported, this could look slightly wrong ... (left: 2, top: 2)
[h264 @ 0x7fafdc003020] illegal aspect ratio
[h264 @ 0x7fafdc003020] no frame!
[h264 @ 0x7fafdc003020] RTP: missed 2563 packetsB sq=    0B f=0/0   
[sdp @ 0x7fafdc0008c0] Undefined type (30)
    Last message repeated 1 times
[sdp @ 0x7fafdc0008c0] Undefined type (31) 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-05-09T19:14:23.560

而不是`ffplay rtp://127.0.0.1:1235`，使用`ffplay -i foo.sdp`.

`foo.sdp`通过将 ffmpeg 的文本输出粘贴到本地文件中来创建本地文件`SDP:`，例如：

```
v=0
o=- 0 0 IN IP4 127.0.0.1
s=No Name
c=IN IP4 127.0.0.1
t=0 0
a=tool:libavformat 55.2.100
m=video 1235 RTP/AVP 96
a=rtpmap:96 H264/90000
a=fmtp:96 packetization-mode=1 
```

.sdp 文件包含 rtp 地址，因此您也无需指定 rtp://...。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T09:19:25.463

`ffplay rtp://127.0.0.1:1234`将开始在 UDP 端口`1234`上侦听传入的 RTP 流量。

在任何给定时间，只有一个应用程序可以侦听主机上的任何给定端口。

错误“绑定失败：地址已在使用”表明另一个应用程序已经在监听端口`1234`。可能您仍在运行测试中的脚本？

要么停止阻塞端口的应用程序，要么使用不同的端口。

# c++ - setting a variable based on ifstream

> ID：15712988
> 
> 赞同：-2
> 
> 时间：2013-03-29T23:25:33.130
> 
> 标签：c++, while-loop, char, project, ifstream

i'm doing a project, and i need to set 3 variables for each time reading a character from a document. here's what i have so far:

```
while(instream.get(value)){
    value = convertToUpper(value);
    cout << value;

    oldestval = oldval;
    oldval = value;
} 
```

where `oldval`, `oldestval`, and `value` are all `char`. `instream` is my instance of `ifstream` and `convertToUpper()` just makes the char uppercase. so if you can't tell, i need `oldval` to equal what `value` was, and then set value. the problem i have is that i HAVE to have it in this loop, because this loop reads the whole file to the end. my question is, from what you have seen, how would i fix my problem? i can provide the whole program if it helps. let me know and thanks for the help! thanks :D

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-29T23:31:20.963

sorry bout the confusion. i fixed it myself by just adding another `char` variable, and then setting value to that. lolz sorry for wasting your time D:

# android - 更改 ActionBar 选项卡上的字体

> ID：15712995
> 
> 赞同：3
> 
> 时间：2013-03-29T23:25:57.273
> 
> 标签：android, android-fragments

我试图弄清楚如何将操作栏选项卡上的字体更改为一些自定义字体，而对于我的生活，我无法弄清楚。它似乎没有任何方法可以访问 Tab 对象的底层 TextView。

当然，另*一种*解决方案是定义我自己的自定义 ActionBar 选项卡布局，并将其设置为 ActionBar.Tab 对象上的自定义视图，但这似乎也很难开始工作。

如果我要使用以下 XML 布局文件作为我的自定义选项卡布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:gravity="center_vertical"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/text_tab"
        style="@style/Widget.Sherlock.ActionBar.TabText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"/>

</LinearLayout> 
```

操作栏选项卡似乎忽略了我所有的重力请求，并将文本定位在选项卡视图的顶部——这与默认情况下文本垂直居中的标准操作栏选项卡完全不同。

如果有人可以建议 a) 为操作栏选项卡提供自定义字体的更简单方法或 b) 自定义选项卡视图的正确布局，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-26T00:06:53.653

不幸的是，我认为这是不可能的。原因如下：和你一样，我尝试使用 a `TextView`centered in a`RelativeLayout`作为我的选项卡使用`ActionBar.Tab.setCustomView()`方法的自定义视图。我使用`android:layout_width="fill_parent"`and `android:layout_height="fill_parent"`，`RelativeLayout`所以通常`TextView`应该以它为中心。所以我只尝试了一个`TextView`没有包裹的`RelativeLayout`像这样：

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tab_title"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent" 
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:gravity="center"
    android:text="TAB_TITLE" /> 
```

所以通常`TextView`应该完全填充选项卡并且文本应该在其中居中。然而情况仍然不是这样：文本仍然没有垂直居中。所以我决定添加`android:background="#ffffff"`到，`TextView`这样我就可以看到发生了什么。感谢背景，我意识到该`ActionBar.Tab.setCustomView()`方法没有为选项卡设置自定义布局，而是在我们无权访问的另一个布局中设置自定义视图（AFAIK）。这是有道理的，`android:layout_width="fill_parent"`并且`android:layout_height="fill_parent"`在我中被忽略，`TextView`因为我`null`在扩展选项卡布局时用作父级。因此，为了使文本居中，`TextView`我以编程方式设置了`TextView`到一个非常高的值，所以它填充了它的父级。然后文本垂直居中。请注意，您也可以使用顶部填充来创建相同的效果。这是我的代码：

custom_tab.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tab_title"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:gravity="center"
    android:text="TAB_TITLE" /> 
```

在我的活动中设置自定义视图的代码：

```
for (int i = 0; i < mSectionsPagerAdapter.getCount(); i++) {
    Tab tab = actionBar.newTab();
    TextView customTabView = (TextView)getLayoutInflater().inflate(R.layout.custom_tab, null);
    customTabView.setText(mSectionsPagerAdapter.getPageTitle(i));
    // set the height to a really high value to fill the parent
    customTabView.setHeight(999);
    tab.setCustomView(customTabView);
    tab.setTabListener(this);
    actionBar.addTab(tab);
} 
```

如果有人知道如何访问设置自定义视图的父视图，请告诉我。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T00:18:49.980

使用相对布局。线性布局不允许使用 android:layout_gravity="center_vertical".. 它只允许使用中心水平..

如果你使用相对布局，你可以使用

```
android:layout_centerInParent="true" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-27T01:35:57.480

我认为你应该将你的 layout_width 和 layout_height 设置为“fill_parent”而不是 wrap_content 这样：

```
android:layout_width="fill_parent"
android:layout_height="fill_parent" 
```

以便您的文本可以居中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-25T08:44:52.843

先看这个例子：[ [http://www.androidhive.info/2013/10/android-tab-layout-with-swipeable-views-1/][1]](http://www.androidhive.info/2013/10/android-tab-layout-with-swipeable-views-1/][1])

然后创建一个布局并将其命名为 tab_title ，代码如下：

```
<TextView
xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/action_custom_title"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="My Custom title"
android:textColor="#fff"
android:textSize="18sp"
android:paddingTop="5dp" /> 
```

然后只需在Androidhive项目的MainActivity的onCreate()方法中，改一下即可：

```
 // Adding Tabs
    for (String tab_name : tabs) {
        actionBar.addTab(actionBar.newTab().setText(tab_name)
                .setTabListener(this));
    } 
```

至：

```
// Adding Tabs
    for (String tab_name : tabs) {

        Tab tab = actionBar.newTab();
        TextView customTabView = (TextView)getLayoutInflater().inflate(R.layout.tab_title, null);
        customTabView.setText(tab_name);
        Typeface typface2=Typeface.createFromAsset(getAssets(),"fonts/titr.TTF");
        customTabView.setTypeface(typface2);            
        tab.setTabListener(this);           
        tab.setCustomView(customTabView);
        actionBar.addTab(tab);
    } 
```

（不用说你必须将fonts/titr.TTF更改为你的资产目录和文件名）联合起来！！

# c# - 在 .NET 4.5 中编译的 LINQ 查询

> ID：15712997
> 
> 赞同：2
> 
> 时间：2013-03-29T23:26:18.770
> 
> 标签：c#, .net, linq, entity-framework

我读过 .NET 4.5 和 EF5 查询是默认编译的，因此开发人员不需要“工作”来使他们的 linq 查询可编译。

如果我在我的服务器上安装 .NET 4.5 并将我的应用程序定位为使用 .net 4.5，我的所有实体框架查询都会被编译并因此获得性能提升吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:38:27.573

您的查询将由后台工作人员编译并缓存。这是查询管道的一部分，无法规避。因此，如果您在 .NET 4.5 上使用 EF5，您的查询将被编译和缓存。

# objective-c - Recurring Label Change Without NSDate Formatter

> ID：15712998
> 
> 赞同：0
> 
> 时间：2013-03-29T23:26:19.197
> 
> 标签：objective-c, nsdateformatter

Okay so i have a problem. In xcode every time a full day passes i want the label to change. For instance if the time is 24:00:00 then i want the label to change from Monday to Tuesday; and then from tuesday to Wednesday and so on and so forth. This is all i have so far

```
if ([timev2.text isEqualToString: @"24:00:00"]) {
    [number setText:@"Tuesday"]; 
```

I can't use the statement

```
if([timev2 isEqualToString: @'48:00:00']){
   [number setText:@"wednesday"]; 
```

Because I'm using `NSDaterFormatter`. Can anyone tell me how to do this or how to edit my code to make it work?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T02:41:35.213

You can use UIApplicationSignificantTimeChangeNotification to be notified when the system clock changes to a new day while your app is running.

您可以使用 NSDateFormatter 打印工作日名称。格式说明符“EEEE”或“cccc”应该可以工作。（在某些语言中，工作日名称有两种形式；使用正确的一种取决于您的上下文[。http://cldr.unicode.org/translation/date-time](http://cldr.unicode.org/translation/date-time)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T07:31:57.673

在 NSDateFormatter 对象中，将日期格式设置为“EEEE”，您将在其中获得星期几。并且您可以在标签中显示。

```
NSDateFormatter* dateFormatter=[[NSDateFormatter alloc]init];
    [dateFormatter setDateFormat:@"EEEE"];
NSString *weekDay=[dateFormatter stringFromDate:[NSDate date]]; 
```

工作日是您想要的日子......快乐编码......