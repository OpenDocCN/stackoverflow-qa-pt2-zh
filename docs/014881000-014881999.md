# StackOverflow 问答 14881000-14881999

# windows-phone-7 - 将地理坐标分配给图钉

> ID：14881000
> 
> 赞同：2
> 
> 时间：2013-02-14T17:50:47.780
> 
> 标签：windows-phone-7, map, windows-phone-8, silverlight-toolkit, pushpin

伙计们，我真的需要你的帮助，我有一张地图

```
xmlns:maps="clr-namespace:Microsoft.Phone.Maps.Controls;assembly=Microsoft.Phone.Maps"
xmlns:maptk="clr-namespace:Microsoft.Phone.Maps.Toolkitassembly=Microsoft.Phone.Controls.Toolkit"

         <maps:Map Grid.Row="0"  Tap="Onm_MapControlTap" Name="m_MapControl
            <maptk:MapExtensions.Children>
                <maptk:Pushpin x:Name="m_PushPin" Tap="OnPushPinTap">
                  <maptk:Pushpin.Content>
                    <StackPanel>                        
                            <TextBlock Text=""/>
                            <Image Source=""/>
                    </StackPanel>
                </maptk:Pushpin.Content>
            </maptk:Pushpin>
           </maptk:MapExtensions.Children>
        </maps:Map> 
```

当我从地理观察者那里获得坐标时，或者当我点击地图时，我想将这些坐标添加到我的图钉中。

> m_PushPin.GeoCoordinate = m_watcher.Position.Location;

m_PushPin 发生“System.NullReferenceException”类型的异常，我无法理解为什么此 PushPin 为空。你能告诉我我做错了什么，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T19:09:02.043

这是 XAML 解析器的一个已知问题。由于您的 PushPin 嵌套在 Attached Dependency Property (MapExtensions.Children) 中，因此它不会与 UserControl 属于同一逻辑树，因此 FindName 不会在该范围内获取。

相反，您应该手动遍历可视化树并获得所需的控件。幸运的是，地图控件附带了专门针对这种情况的辅助方法。

```
 var pushpin = MapExtensions.GetChildren(myMap).OfType<Pushpin>().First(p => p.Name == "m_PushPin"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T20:44:56.973

作为替代方案，您可以使用绑定将一些绑定`GeoCoordinate`到您的图钉。

# android - 应用程序实例是否总是在任何活动之前创建？

> ID：14881002
> 
> 赞同：8
> 
> 时间：2013-02-14T17:51:05.710
> 
> 标签：android, android-activity, android-manifest

在 Android 中，您可以通过扩展 Application 类并在 Manifest 中声明名称来提供自己的 Application 类实现。

我的问题是，这个实现总是在初始 Activity 之前创建，还是可以在 Application 实例有时间创建之前启动 Activity？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-14T17:54:45.630

> 是否总是在初始 Activity 之前创建此实现

是的。它是您的流程中首先实例化的对象之一。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T18:07:13.197

是的，应用程序类是在任何 android 应用程序中启动的第一个类......

因此，如果任何类扩展了应用程序类，则该类将首先启动。

# ios - App Store 中某个应用的分发配置文件已过期

> ID：14881003
> 
> 赞同：2
> 
> 时间：2013-02-14T17:51:06.973
> 
> 标签：ios, provisioning

我的很多证书今天都过期了。我想更新我目前在 App Store 中的应用程序，并看到我需要创建另一个具有相同捆绑 ID 的分发配置文件。这个对吗？

因此，例如我的旧分发配置文件的捆绑 ID 是 "com.xxxx.1234" ，现在我需要创建另一个具有相同 "com.xxxx.1234" 的捆绑 ID 吗？

干杯和感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T18:08:32.423

您应该只有两个证书 - 一个用于开发，一个用于分发。不要将证书与配置文件混淆。尽管配置文件取决于证书之一，但它们非常不同。

如果事实上您的证书确实过期了（他们每年会过期一次），请创建并安装您的新证书。一旦到位，您需要做的就是编辑现有的配置文件以使用新证书。不要创建任何新的配置文件，只需更新您所拥有的。

更新所有配置文件后，将更新下载并安装到 Xcode 中。删除过期的。

现在更新您的项目以确保它使用更新的配置文件。

在此过程中，您不应该在哪里处理捆绑包 ID。

# php - PHP导航，有没有更好的方法来做到这一点？

> ID：14881008
> 
> 赞同：0
> 
> 时间：2013-02-14T17:51:31.943
> 
> 标签：php, html, navigation, nav

我对使用 PHP 相当陌生，在此导航之前，我的 PHP 使用范围很简单。

我编写了一个 navigation.php 文件，该文件使用从 variables.php 中的数组中提取的变量动态生成导航链接

***总体目标是仅通过编辑 variables.php 来添加/减去链接、子导航、子子导航、子子子导航***

我用来生成 HTML 结构的方法对我来说感觉很笨拙，它工作得很好，但我觉得有一种更简单的方法可以做到这一点......

此外，我需要为任何存在 subnav 的 LI 附加样式（箭头表示存在 subnav）。我想动态生成它。

那就是说我的问题是：

1.  有没有更简单的方法来做到这一点？
2.  有没有办法根据是否存在子导航来动态生成我的？

***每个页面都有以下代码，它会根据页面而变化。***

```
<?php $title = 'Home'; ?> 
```

***我的 variables.php ：***

```
<!-- NAVIGATION ARRAY -->

<?php
$nav_mini = array(
    'Home' => 'index.php',
    'About' => 'about.php',
    'Services' => 'services.php'
    );
?>

<?php
$nav_main = array(
    'Home' => 'index.php',
    'About' => 'about.php',
    'Services' => 'services.php',
    'Portfolio' => 'contact.php',
    'Clients' => 'about.php',
    'Gallery' => 'services.php',
    'News' => 'services.php',
    'Contact Us' => 'contact.php'
    );
?>

<?php // SUB NAV ARRAYS

$nav_sub_about = array(
    'Our Team' => 'about.php'
    );

$nav_sub_michael = array(
    'Michael' => 'index.php',
    'Aaron' => 'about.php',
    'Kenny' => 'about.php',
    'David' => 'about.php'
    );

$nav_sub_services = array(
    'Get Found' => 'about.php'
    );

?> 
```

***导航 PHP 文件 main-nav.php***

```
 <?php 

        foreach ( $nav_main as $key => $value ) {

            echo "<li><a ";
                echo "class='"; // STARTS CLASS=
                if ( $title == $key) { 
                echo "active "; }// ADDS ACTIVE CLASS TO LINK OF CURRENT PAGE
            echo "' "; // END QUOTES FOR CLASS="

            echo "href='$value'>$key";

                if ( $key == "About") { // STARTS IF SEQUENCE FOR SUBNAV ARROWS
                    echo "<span class='arrow'> +</span>";}
                elseif ( $key == "Services") {
                    echo "<span class='arrow'> +</span>";}

            echo "</a>\n";  // END ANCHOR TAG FOR MAIN NAV LINKS

//----------------------------------------------------------------------------------------------------------//
// PLEASE START SUB-NAVS HERE ------------------------------------------------------------------------------//
// AT THIS POINT A NEW <LI> IS GENERATED FROM THE FIRST FOREACH, IF THE BELOW IS TRUE IT POPULATES A SUBNAV //      

        if ( $key == "About"){  // START SUBNAV FOR ABOUT
            echo "<ul class='main-sub-nav'>"; // THIS LINE WAS ADDED TO START THE <UL> FOR THE SUBNAV, IT ENDS ON LINE 14

            foreach ( $nav_sub_about as $key => $value ) {
                echo "<li><a href='$value'>$key";

                    if ( $key == "Our Team") { // STARTS IF SEQUENCE FOR SUBNAV ARROWS
                    echo "<span class='arrow'> +</span>";}

                echo "</a>\n"; // ENDS ANCHOR TAG FROM SUBNAV LI

                    // SUB-SUB-NAV STARTS HERE
                        if ( $key == 'Our Team') {
                        echo "<ul class='main-sub-sub-nav'>"; // THIS STARTS THE UL FOR SUB-SUB-NAV

                            foreach ($nav_sub_michael as $key => $value ) {
                        echo "<li><a href='$value'>$key</a></li>\n";
                    }
                    echo "</ul>"; // THIS ENDS THE SUB-SUB-NAV UL STARTED ON LINE 34
                echo "</li>";}// THIS IS THE END IF <LI> FROM THE SECOND FOREACH ON LINE 35

        }

        echo "</ul>"; // THIS WAS ADDED TO END THE SUBNAV <UL> STARTED ON LINE 11
        echo "</li>";} // THIS IS THE END OF THE <LI> FROM THE FIRST FOREACH ECHO FROM LINE 8

//----------------------------------------------------------------------------------------------------------//
// AT THIS POINT A NEW <LI> IS GENERATED FROM THE FIRST FOREACH, IF THE BELOW IS TRUE IT POPULATES A SUBNAV //

            if ( $key == "Services"){
                echo "<ul class='main-sub-nav'>"; // THIS LINE WAS ADDED TO START THE <UL> FOR THE SUBNAV, IT ENDS ON LINE 14

                foreach ( $nav_sub_services as $key => $value ) {
                    echo "<li><a href='$value'>$key</a></li>\n";}
                echo "</ul>"; // THIS WAS ADDED TO END THE SUBNAV <UL> STARTED ON LINE 11
                echo "</li>";} // THIS IS THE END OF THE <LI> FROM THE FIRST FOREACH ECHO FROM LINE 8

        } // THIS BRACKET ENDS THE ENTIRE SET OF PHP.  ITS PAIR IS ON LINE 19

?> 
```

***总体目标是仅通过编辑 variables.php 来添加/减去链接、子导航、子子导航、子子子导航***

这是此导航结构工作的实时示例... [http://khill.mhostiuckproductions.com/siteLSSBoilerPlate/](http://khill.mhostiuckproductions.com/siteLSSBoilerPlate/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T18:02:28.190

您正在做的几乎是正确的，但是您正在让自己围绕自己的代码编写而不是允许它是通用的，因此编写一个函数，如果需要，它可以调用自己来执行此操作：

```
$menu_items = array(
    'Home' => 'index.php'
    'About' => array('about.php', 
         array('Our Team'=>'ourteam.php'),
     etc
    );
?> 
```

*   从...开始`<ul>`
*   循环遍历给定的数组
*   添加`<li>`
*   如果 is_string() 它是一项附加`<a href>`
*   如果 is_array() 有子项，
    *   添加`<a href>`
    *   将第二个元素发送到此函数并附加它返回的 html
*   关`</li>`
*   关`</ul>`
*   把它返还

一个函数处理所有元素，无论它们是主元素还是子元素，并且无论您有多少子列表，只要调用它就可以完成您的列表。

现在，对于您的迷你菜单，只需通过键（Home、About、Services）从主数组中选择元素，然后使用一个函数创建 html

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T18:02:42.657

一个更简洁的解决方案是使用[多维数组](http://webcheatsheet.com/PHP/multidimensional_arrays.php)构建导航，然后[遍历](https://stackoverflow.com/questions/26007/iterating-over-a-complex-associative-array-in-php)它们。如果`value`一个数组的 是另一个数组，那么你就知道它有一个子菜单。

# ruby-on-rails - Rails Rspec Capybara 和 DatabaseCleaner - 仅在功能测试中使用截断

> ID：14881011
> 
> 赞同：6
> 
> 时间：2013-02-14T17:51:42.913
> 
> 标签：ruby-on-rails, testing, capybara, database-cleaner

我看到这个很酷的方法只使用数据库清理器：截断水豚测试使用：js => true

在 spec_helper.rb 中：

```
config.before(:each) do
  DatabaseCleaner.strategy = if example.metadata[:js]
    :truncation
  else
    :transaction
  end
  DatabaseCleaner.start
end

config.after(:each) do
  DatabaseCleaner.clean
end 
```

问题是使用 capybara 完成的任何功能测试似乎都需要清理策略为 :truncation。

但是，所有其他规范都可以使用 :transaction，这要快得多。

有没有一种方法可以指定仅针对 capybara 功能测试的策略？就像是：

```
DataCleaner.strategy( :truncation ) if :type => :feature 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T18:26:10.413

这应该可以，让我知道

```
config.after(:all, :type => :feature) do
  DatabaseCleaner.clean_with :truncation
end 
```

# c# - ASP.NET MVC 4 捆绑 - 调试模式下的单个文件 URL

> ID：14881014
> 
> 赞同：3
> 
> 时间：2013-02-14T17:51:52.027
> 
> 标签：c#, .net, asp.net-mvc, razor, asp.net-mvc-4

# 问题：

在 ASP.NET MVC 4.5 中完成的 HTML5 离线应用程序中，我们使用框架的[内置功能](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)捆绑和缩小样式和脚本。页面本身的一切都运行良好，但要写入缓存清单，其中（因为我们正在编写它）它总是只发出捆绑的 URL。

因此，我们无法在离线模式下调试 JavaScript，因为单个调试 js 文件没有进入应用程序缓存。

# 代码：

## 注册包

这是我们的`BundleConfig.RegisterBundles`外观：

```
 // For more information on Bundling, visit http://go.microsoft.com/fwlink/?LinkId=254725
    public static void RegisterBundles(BundleCollection bundles)
    {
        bundles.Add(new ScriptBundle("~/bundles/Scripts").Include(
                   "~/Scripts/*.js"
                   ));
    } 
```

## HTML 标记

我们将它包含在我们`_Layout.cshtml`的页面本身中，如下所示：

```
@System.Web.Optimization.Scripts.Render("~/bundles/Scripts") 
```

这适用于页面，通过在 is 时发出单个 js 文件，在`debug`is时发出`true`一个捆绑文件。`debug``false`

**输出输入`debug=true`**

```
<script src="/Scripts/ScriptOne.js"></script>
<script src="/Scripts/ScriptTwo.js"></script>
<script src="/Scripts/ScriptThree.js"></script> 
```

**输出输入`debug=false`**

```
<script src="/bundles/Scripts?v=B0_RvAM_5ifnREcGnNQ3FO8qQp4vyLOdtCUJ-2mXSuA1"></script> 
```

## 缓存清单

这就是我们如何将脚本包含到我们的`CacheManifest`

```
@System.Web.Optimization.BundleTable.Bundles.ResolveBundleUrl("~/bundles/Scripts") 
```

**输出`debug=true`和`debug=false`**

```
/bundles/Scripts?v=B0_RvAM_5ifnREcGnNQ3FO8qQp4vyLOdtCUJ-2mXSuA1 
```

# 我们想要什么？

我们想知道是否有办法让 Cache-Manifest 像这样输出：

**输出输入`debug=true`**

```
/Scripts/ScriptOne.js
/Scripts/ScriptTwo.js
/Scripts/ScriptThree.js 
```

**输出输入`debug=false`**

```
/bundles/Scripts?v=B0_RvAM_5ifnREcGnNQ3FO8qQp4vyLOdtCUJ-2mXSuA1 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T19:10:49.683

[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.web.optimization.scripts.renderformat.aspx)讨论了某种`Scripts.RenderFormat`方法，它看起来是做我们想做的事情的好选择。但是智能感知抱怨这种方法在当前引用`RenderFormat`的版本中不存在。`System.Web.Optimization`

但是，（再次）感谢谷歌，[这里的这个答案](https://stackoverflow.com/a/12923723/218882)解释了这个`RenderFormat`方法实际上包含在下一个版本的 alpha 版本中。并且对该[答案的评论](https://stackoverflow.com/questions/12865939/mvc4-bundling-minification-with-ie-conditional-comments#comment17608457_12923723)链接到解释我们如何安装它的页面：

```
PM> Install-Package Microsoft.AspNet.Web.Optimization -Pre 
```

使用此版本，`Cache-Manifest`可以更改为：

```
@System.Web.Optimization.Scripts.RenderFormat("{0}","~/bundles/Scripts") 
```

我们现在让缓存清单在`debug=true`.

显然，MSDN 文档与当前的稳定版本不同步！

# java - Android 登录验证

> ID：14881016
> 
> 赞同：1
> 
> 时间：2013-02-14T17:51:59.063
> 
> 标签：java, android, database, sqlite

我已经尝试了一切，在这个阶段对我的 android 登录感到非常沮丧，有人可以帮忙吗？我有一个登录屏幕，要求用户输入电子邮件和密码，当他们单击登录时，它需要检查我的`sqlite`数据库，如果正确，他们将成功登录，如果不正确，他们将被要求重试！我在下面发布了我的代码

**登录活动**

```
 package com.example.finalproject;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class LoginActivity extends Activity{

    EditText EmailAdd;
    EditText Password;
    Button Login;
    Button NewUser;
    private SQLiteAdapter db;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.login_activity);
        //addListenerOnButton();

        //Button mNewUser = (Button)findViewById(R.id.btnLogMain);
        //mNewUser.setOnClickListener(this);

        EmailAdd = (EditText)findViewById(R.id.password);
        Password = (EditText)findViewById(R.id.password);

        Login = (Button)findViewById(R.id.btnLogMain);
        Login.setOnClickListener(buttonLoginOnClickListener);
        NewUser = (Button)findViewById(R.id.btnNewUser);
        NewUser.setOnClickListener(buttonNewUserOnClickListener);

    }

    Button.OnClickListener buttonLoginOnClickListener
       = new Button.OnClickListener(){

        @Override
          public void onClick(View arg0) {
            //SQLiteAdapter db = new SQLiteAdapter (LoginActivity.this );
            SQLiteDatabase db = new SQLiteAdapter(LoginActivity.this).openToWrite();
            String email = EmailAdd.getText().toString();
             String password = Password.getText().toString();

            Cursor c = db.rawQuery("SELECT email FROM MY_USERS_TABLE WHERE email= ? AND password=?", new String[] {email, password});
            if(c.moveToFirst()) {
                Toast.makeText(getApplicationContext(), "Success", Toast.LENGTH_SHORT).show();
                Intent main = new Intent(LoginActivity.this, MainMenuActivity.class);
                startActivity(main);
            } else {
                Toast.makeText(getApplicationContext(), "Failed..\nTry Again", Toast.LENGTH_SHORT).show();
            }
            Intent register = new Intent(LoginActivity.this, RegisterActivity.class);
            startActivity(register);
    }
    };
    /*@Override
    public void onClick(View arg0) {
        Toast.makeText(getApplicationContext(), "Working to here!", Toast.LENGTH_SHORT).show();
         String data1 = EmailAdd.getText().toString();
         String data2 = Password.getText().toString();

        boolean invalid = false;
        //uname == null || uname.length() == 0
        if(data1.equals("")){
            invalid = true;
            Toast.makeText(getApplicationContext(), "Email ID Missing", Toast.LENGTH_SHORT).show();
        }else if(data2.equals("")){
            invalid = true;
            Toast.makeText(getApplicationContext(), "Email ID Missing", Toast.LENGTH_SHORT).show();
        }

        if(invalid == false){
            //need to check here for valid email and password

            Intent i_register = new Intent(LoginActivity.this, MainMenuActivity.class);
            startActivity(i_register);
            EmailAdd.setText("");
            Password.setText("");
            finish();
        }
        /*switch(v.getId()){

        case R.id.btnLogMain:
            mEmailAdd = (EditText)findViewById(R.id.email);
            mPassword = (EditText)findViewById(R.id.password);

            String uname = mEmailAdd.getText().toString();
            String pass = mPassword.getText().toString();

            if(uname.equals("") || uname == null){
                Toast.makeText(getApplicationContext(), "email Empty", Toast.LENGTH_SHORT).show();
            }else if(pass.equals("") || pass == null){
                Toast.makeText(getApplicationContext(), "Password Empty", Toast.LENGTH_SHORT).show();
            }else{
                boolean validLogin = validateLogin(uname, pass, LoginActivity.this);
                if(validLogin){
                    System.out.println("In Valid");
                    Intent i = new Intent(LoginActivity.this, MainMenuActivity.class);
                    startActivity(i);
                    finish();
                }
            }
            break;

        }*/
   // }
    //};

*RegisterActivity class*
import android.app.Activity;
import android.content.Intent;
import android.database.Cursor;
import android.os.Bundle;
import android.view.View;
//import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;
import android.widget.TextView;
import android.widget.Toast;

public class RegisterActivity extends Activity {

 EditText inputName, inputEmail, inputPassword;
 Button buttonRegister, buttonDeleteAll;
 TextView login;
 private SQLiteAdapter mySQLiteAdapter;
 ListView listContent;

 SimpleCursorAdapter cursorAdapter;
 Cursor cursor;

   /** Called when the activity is first created. */

@Override
   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.register_activity);

       inputName = (EditText)findViewById(R.id.name);
       inputEmail = (EditText)findViewById(R.id.email);
       inputPassword = (EditText)findViewById(R.id.password);
       buttonRegister = (Button)findViewById(R.id.register);
       //buttonDeleteAll = (Button)findViewById(R.id.showAll);

       listContent = (ListView)findViewById(R.id.contentlist);

       mySQLiteAdapter = new SQLiteAdapter(this);
       mySQLiteAdapter.openToWrite();

       cursor = mySQLiteAdapter.queueAll();
      // String[] from = new String[]{SQLiteAdapter.KEY_ID, SQLiteAdapter.KEY_NAME, SQLiteAdapter.KEY_EMAIL,SQLiteAdapter.KEY_PASSWORD};
       /*int[] to = new int[]{R.id.id, R.id.text1, R.id.text2,R.id.text3};
       cursorAdapter =
        new SimpleCursorAdapter(this, R.layout.row, cursor, from, to);
       listContent.setAdapter(cursorAdapter);*/

       buttonRegister.setOnClickListener(buttonAddOnClickListener);
       //buttonShowAll.setOnClickListener(buttonShowAllOnClickListener);
       //addListenerOnRegButton();

       TextView loginScreen = (TextView) findViewById(R.id.login);

       // Listening to login 
       loginScreen.setOnClickListener(TextLoginOnClickListener);
}

TextView.OnClickListener TextLoginOnClickListener
= new TextView.OnClickListener(){

@Override
public void onClick(View arg0) {
    Intent i = new Intent(getApplicationContext(), LoginActivity.class);
    startActivity(i);

}
};

   Button.OnClickListener buttonAddOnClickListener
   = new Button.OnClickListener(){

  @Override
  public void onClick(View arg0) {

   String data1 = inputName.getText().toString();
   String data2 = inputEmail.getText().toString();
   String data3 = inputPassword.getText().toString();

   boolean invalid = false;

    if(data1.equals("")){
        invalid = true;
        Toast.makeText(getApplicationContext(), "Name Missing", Toast.LENGTH_SHORT).show();
    }else if(data2.equals("")){
        invalid = true;
        Toast.makeText(getApplicationContext(), "Email ID Missing", Toast.LENGTH_SHORT).show();
    }else if(data3.equals("")){
        invalid = true;
        Toast.makeText(getApplicationContext(), "Password Missing", Toast.LENGTH_SHORT).show();
    }

    if(invalid == false){
        mySQLiteAdapter.insert(data1, data2, data3);
        updateList();
           Toast.makeText(RegisterActivity.this, "You are now registered",
                   Toast.LENGTH_SHORT).show();

        Intent i_register = new Intent(RegisterActivity.this, LoginActivity.class);
        startActivity(i_register);

        inputName.setText("");
        inputEmail.setText("");
        inputPassword.setText("");
        finish();
    }   

  }

   };

  /*Button.OnClickListener buttonShowAllOnClickListener1
   = new Button.OnClickListener(){

  @Override
  public void onClick(View arg0) {
      Intent i = new Intent(RegisterActivity.this, MainMenuActivity.class);
        startActivity(i);
        finish();
  }

   };

 @Override
 protected void onDestroy() {
  // TODO Auto-generated method stub
  super.onDestroy();
  mySQLiteAdapter.close();
 }*/

 private void updateList(){
  //cursor.requery();
   }

}
    /* public boolean validateLogin(String uemail, String pass, Context context) {

        mydb = new SQLiteAdapter(this);
        SQLiteDatabase db = mydb.openToWrite();
        //SELECT
        String[] columns = {"_id"};

        //WHERE clause
        String selection = "email=? AND password=?";

        //WHERE clause arguments
        String[] selectionArgs = {uemail,pass};

        Cursor cursor = null;
        try{
        //SELECT _id FROM login WHERE email=uemail AND password=pass
        cursor = db.query(SQLiteAdapter.MYDATABASE_TABLE, columns, selection, selectionArgs, null, null, null,null);

        //  startManagingCursor(cursor);

        }catch(Exception e){
            e.printStackTrace();
        }
        int numberOfRows = cursor.getCount();

        if(numberOfRows <= 0){

            Toast.makeText(getApplicationContext(), "Failed..\nTry Again", Toast.LENGTH_SHORT).show();
            return false;
        }

        return true;
    }*/

    Button.OnClickListener buttonNewUserOnClickListener
       = new Button.OnClickListener(){
        @Override
          public void onClick(View arg0) {

    }
    };

    } 
```

**SQLiteAdapter **

```
package com.example.finalproject;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.database.sqlite.SQLiteDatabase.CursorFactory;

public class SQLiteAdapter {

 public static final String MYDATABASE_NAME = "MY_PROJECT_DATABASE";
 public static final String MYDATABASE_TABLE = "MY_USERS_TABLE";
 public static final int MYDATABASE_VERSION = 1;
 public static final String KEY_ID = "_id";
 public static final String KEY_NAME = "name";
 public static final String KEY_EMAIL = "email";
 public static final String KEY_PASSWORD = "password";

 //create table MY_DATABASE (ID integer primary key, Content text not null);
 private static final String SCRIPT_CREATE_DATABASE =
  "create table " + MYDATABASE_TABLE + " ("
  + KEY_ID + " integer primary key autoincrement, "
  + KEY_NAME + " text not null, "
  + KEY_EMAIL + " text not null, "
  + KEY_PASSWORD + " text not null);";

 private SQLiteHelper sqLiteHelper;
 private SQLiteDatabase sqLiteDatabase;

 private Context context;

 public SQLiteAdapter(Context c){
  context = c;
 }

 public SQLiteAdapter openToRead() throws android.database.SQLException {
  sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME, null, MYDATABASE_VERSION);
  sqLiteDatabase = sqLiteHelper.getReadableDatabase();
  return this; 
 }

 public SQLiteDatabase openToWrite() throws android.database.SQLException {
        sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME, null,
                MYDATABASE_VERSION);
        sqLiteDatabase = sqLiteHelper.getWritableDatabase();
        return sqLiteDatabase;
    }
 /*public SQLiteAdapter openToWrite() throws android.database.SQLException {
  sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME, null, MYDATABASE_VERSION);
  sqLiteDatabase = sqLiteHelper.getWritableDatabase();
  return this; 
 }*/

 public void close(){
  sqLiteHelper.close();
 }

 public long insert(String name, String email, String password){

  ContentValues contentValues = new ContentValues();
  contentValues.put(KEY_NAME, name);
  contentValues.put(KEY_EMAIL, email);
  contentValues.put(KEY_PASSWORD, password);
  return sqLiteDatabase.insert(MYDATABASE_TABLE, null, contentValues);
 }

 public int deleteAll(){
  return sqLiteDatabase.delete(MYDATABASE_TABLE, null, null);
 }

 public Cursor queueAll(){
  String[] columns = new String[]{KEY_ID, KEY_NAME, KEY_EMAIL,KEY_PASSWORD};
  Cursor cursor = sqLiteDatabase.query(MYDATABASE_TABLE, columns,
    null, null, null, null, null);

  return cursor;
 }

 public class SQLiteHelper extends SQLiteOpenHelper {

  public SQLiteHelper(Context context, String name,
    CursorFactory factory, int version) {
   super(context, name, factory, version);
  }

  @Override
  public void onCreate(SQLiteDatabase db) {
   // TODO Auto-generated method stub
   db.execSQL(SCRIPT_CREATE_DATABASE);
  }

  @Override
  public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
   // TODO Auto-generated method stub
  }
 } 
} 
```

我已经尝试了很多事情，但是当我点击登录按钮时，会出现一条消息“不幸停止工作”，提前感谢您的帮助，我们将不胜感激

**日志猫**

```
The application may be doing too much work on its main thread.
    02-04 00:49:58.305: W/Trace(7726): Unexpected value from nativeGetEnabledTags: 0
    02-04 00:49:58.305: W/Trace(7726): Unexpected value from nativeGetEnabledTags: 0
    02-04 00:49:58.415: W/Trace(7726): Unexpected value from nativeGetEnabledTags: 0
    02-04 00:49:58.415: W/Trace(7726): Unexpected value from nativeGetEnabledTags: 0
    02-04 00:49:58.874: W/Trace(7726): Unexpected value from nativeGetEnabledTags: 0
    02-04 00:49:58.884: W/Trace(7726): Unexpected value from nativeGetEnabledTags: 0
    02-04 00:49:58.894: I/Choreographer(7726): Skipped 73 frames!  The application may be doing too much work on its main thread.
    02-04 00:49:58.894: W/Trace(7726): Unexpected value from nativeGetEnabledTags: 0
    02-04 00:49:58.894: W/Trace(7726): Unexpected value from nativeGetEnabledTags: 0
    02-04 00:49:58.945: W/Trace(7726): Unexpected value from nativeGetEnabledTags: 0
    02-04 00:49:58.975: W/Trace(7726): Unexpected value from nativeGetEnabledTags: 0
    02-04 00:49:58.975: W/Trace(7726): Unexpected value from nativeGetEnabledTags: 0
    02-04 00:49:59.024: W/Trace(7726): Unexpected value from nativeGetEnabledTags: 0
    02-04 00:49:59.104: D/AndroidRuntime(7726): Shutting down VM
    02-04 00:49:59.104: W/dalvikvm(7726): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
    02-04 00:49:59.154: E/AndroidRuntime(7726): FATAL EXCEPTION: main
    02-04 00:49:59.154: E/AndroidRuntime(7726): java.lang.NullPointerException
    02-04 00:49:59.154: E/AndroidRuntime(7726):     at com.example.finalproject.LoginActivity$2.onClick(LoginActivity.java:165)
    02-04 00:49:59.154: E/AndroidRuntime(7726):     at android.view.View.performClick(View.java:4202)
    02-04 00:49:59.154: E/AndroidRuntime(7726):     at android.view.View$PerformClick.run(View.java:17340)
    02-04 00:49:59.154: E/AndroidRuntime(7726):     at android.os.Handler.handleCallback(Handler.java:725)
    02-04 00:49:59.154: E/AndroidRuntime(7726):     at android.os.Handler.dispatchMessage(Handler.java:92)
    02-04 00:49:59.154: E/AndroidRuntime(7726):     at android.os.Looper.loop(Looper.java:137)
    02-04 00:49:59.154: E/AndroidRuntime(7726):     at android.app.ActivityThread.main(ActivityThread.java:5039)
    02-04 00:49:59.154: E/AndroidRuntime(7726):     at java.lang.reflect.Method.invokeNative(Native Method)
    02-04 00:49:59.154: E/AndroidRuntime(7726):     at java.lang.reflect.Method.invoke(Method.java:511)
    02-04 00:49:59.154: E/AndroidRuntime(7726):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
    02-04 00:49:59.154: E/AndroidRuntime(7726):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
    02-04 00:49:59.154: E/AndroidRuntime(7726):     at dalvik.system.NativeStart.main(Native Method)
    02-04 00:50:07.004: I/Process(7726): Sending signal. PID: 7726 SIG: 9 
```

此代码仍然无法正常工作，请有人帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T17:57:59.327

use this query

```
SELECT email FROM MY_USERS_TABLE WHERE email=? AND password=? 
```

you are using '?' use ? only

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T17:55:29.273

你`db`是**NULL**并且你在下一行使用！

```
 SQLiteDatabase db = null;

  Cursor c = db.rawQuery("SELECT email FROM MY_USERS_TABLE WHERE email='?' AND password='?'", new String[] {email, password}); 
```

通过调用修复它`SQLiteDatabase db = new SQLiteAdapter(LoginActivity.this).openToWrite();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-19T06:43:44.133

我相信你有几个问题。

*   您正在将电子邮件设置为登录活动中的密码`EmailAdd = (EditText)findViewById(R.id.password);`
*   `startActivity`当您应该使用`finish`返回到调用活动时，您正在使用从活动返回。

以下是预注册用户和密码（Fred@email.com 以密码为密码）的改编（少注册）。

**主菜单活动**：-

```
public class MainMenuActivity extends AppCompatActivity {
    static boolean loggedin = false;
    SQLiteAdapter mAdapter;
    int requestcode = 100;
    Button menu;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main_menu);
        menu = (Button) this.findViewById(R.id.mymenu);

        mAdapter = new SQLiteAdapter(this);
        mAdapter.insert("Fred","Fred@email.com","password");
        if (!loggedin) {
            Intent intent = new Intent(this,LoginActivity.class);
            startActivityForResult(intent,requestcode);
        }
    }

    @Override
    protected void onResume() {
        super.onResume();
    }

    protected void onActivityResult(int reqcode, int reqresult, Intent intent) {
        if (reqcode == requestcode && reqresult == Activity.RESULT_OK) {
            loggedin = true;
            menu.setVisibility(View.VISIBLE);

        } else {
            loggedin = false;
            Toast.makeText(this,"You are now Logged In",Toast.LENGTH_SHORT).show();
        }
    }
} 
```

**activty_main_menu** MainMenuActivity 使用的布局：-

```
<?xml version="1.0" encoding="utf-8"?>
<android.support.constraint.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context="so14881016login.so14881016login.MainMenuActivity">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Hello World!"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintLeft_toLeftOf="parent"
        app:layout_constraintRight_toRightOf="parent"
        app:layout_constraintTop_toTopOf="parent" />
    <Button
        android:id="@+id/mymenu"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:visibility="invisible"
        android:text="Menu"/>

</android.support.constraint.ConstraintLayout> 
```

**登录活动**：-

```
public class LoginActivity extends Activity {

    EditText EmailAdd;
    EditText Password;
    Button Login;
    Button NewUser;
    private SQLiteAdapter db;
    int attempts = 3;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.login_activity);
        //addListenerOnButton();

        //Button mNewUser = (Button)findViewById(R.id.btnLogMain);
        //mNewUser.setOnClickListener(this);

        EmailAdd = (EditText) findViewById(R.id.email);
        Password = (EditText) findViewById(R.id.password);

        Login = (Button) findViewById(R.id.btnLogMain);
        Login.setOnClickListener(buttonLoginOnClickListener);
        NewUser = (Button) findViewById(R.id.btnNewUser);
        //NewUser.setOnClickListener(buttonNewUserOnClickListener); //<<<<IGNORED
    }

    Button.OnClickListener buttonLoginOnClickListener
            = new Button.OnClickListener() {
        @Override
        public void onClick(View arg0) {
            //SQLiteAdapter db = new SQLiteAdapter (LoginActivity.this );
            SQLiteDatabase db = new SQLiteAdapter(LoginActivity.this).openToWrite();
            String email = EmailAdd.getText().toString();
            String password = Password.getText().toString();

            //Cursor c = db.rawQuery("SELECT email FROM MY_USERS_TABLE WHERE email= ? AND password=?", new String[]{email, password});
            Cursor c = db.query(SQLiteAdapter.MYDATABASE_TABLE,
                    new String[]{SQLiteAdapter.KEY_EMAIL},
                    SQLiteAdapter.KEY_EMAIL + "=? AND " +SQLiteAdapter.KEY_PASSWORD + "=?",
                    new String[]{email,password},
                    null,null,null
            );
            if (c.moveToFirst()) {
                Toast.makeText(getApplicationContext(), "Success", Toast.LENGTH_SHORT).show();
                // NO
                //Intent main = new Intent(LoginActivity.this, MainMenuActivity.class);
                //startActivity(main);
                setResult(Activity.RESULT_OK);
                finish(); //<<<< go back
            } else {
                Toast.makeText(getApplicationContext(), "Failed..\nTry Again", Toast.LENGTH_SHORT).show();
                if (--attempts <= 0) {
                    setResult(Activity.RESULT_CANCELED);
                    finish();
                }
            }
        }
    };
} 
```

**上面使用的login_activity**布局：-

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <EditText
        android:id="@+id/email"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />
    <EditText
        android:id="@+id/password"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />
    <Button
        android:id="@+id/btnLogMain"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Login"/>
    <Button
        android:id="@+id/btnNewUser"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Add User"/>
</LinearLayout> 
```

**SQLite适配器**

```
public class SQLiteAdapter {

    public static final String MYDATABASE_NAME = "MY_PROJECT_DATABASE";
    public static final String MYDATABASE_TABLE = "MY_USERS_TABLE";
    public static final int MYDATABASE_VERSION = 1;
    public static final String KEY_ID = "_id";
    public static final String KEY_NAME = "name";
    public static final String KEY_EMAIL = "email";
    public static final String KEY_PASSWORD = "password";

    //create table MY_DATABASE (ID integer primary key, Content text not null);
    private static final String SCRIPT_CREATE_DATABASE =
            "create table " + MYDATABASE_TABLE + " ("
                    + KEY_ID + " integer primary key autoincrement, "
                    + KEY_NAME + " text not null, "
                    + KEY_EMAIL + " text not null, "
                    + KEY_PASSWORD + " text not null);";

    private SQLiteHelper sqLiteHelper;
    private SQLiteDatabase sqLiteDatabase;

    private Context context;

    public SQLiteAdapter(Context c){
        context = c;
        openToWrite(); //<<<< Added
    }

    public SQLiteAdapter openToRead() throws android.database.SQLException {
        sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME, null, MYDATABASE_VERSION);
        sqLiteDatabase = sqLiteHelper.getReadableDatabase();
        return this;
    }

    public SQLiteDatabase openToWrite() throws android.database.SQLException {
        sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME, null,
                MYDATABASE_VERSION);
        sqLiteDatabase = sqLiteHelper.getWritableDatabase();
        return sqLiteDatabase;
    }
 /*public SQLiteAdapter openToWrite() throws android.database.SQLException {
  sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME, null, MYDATABASE_VERSION);
  sqLiteDatabase = sqLiteHelper.getWritableDatabase();
  return this;
 }*/

    public void close(){
        sqLiteHelper.close();
    }

    public long insert(String name, String email, String password){

        ContentValues contentValues = new ContentValues();
        contentValues.put(KEY_NAME, name);
        contentValues.put(KEY_EMAIL, email);
        contentValues.put(KEY_PASSWORD, password);
        return sqLiteDatabase.insert(MYDATABASE_TABLE, null, contentValues);
    }

    public int deleteAll(){
        return sqLiteDatabase.delete(MYDATABASE_TABLE, null, null);
    }

    public Cursor queueAll(){
        String[] columns = new String[]{KEY_ID, KEY_NAME, KEY_EMAIL,KEY_PASSWORD};
        Cursor cursor = sqLiteDatabase.query(MYDATABASE_TABLE, columns,
                null, null, null, null, null);

        return cursor;
    }

    public class SQLiteHelper extends SQLiteOpenHelper {

        public SQLiteHelper(Context context, String name,
                            SQLiteDatabase.CursorFactory factory, int version) {
            super(context, name, factory, version);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            // TODO Auto-generated method stub
            db.execSQL(SCRIPT_CREATE_DATABASE);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            // TODO Auto-generated method stub
        }
    }
} 
```

## 笔记

*   已包含一些评论。
*   请注意结果（OK 或 NOT OK）是**如何**与`startActivityForResult`.
*   **当调用/返回RegisterActivity**时，应该应用相同的概念。

## 结果

首次运行时立即跳到登录活动：-

[![在此处输入图像描述](../Images/b647795ce146f2201e64de326c8577e2.png)](https://i.stack.imgur.com/Fl848.jpg)

如果第 3 次返回**MainMenuActivity**且菜单按钮不可见，则无效登录尝试停留在上述允许重试（最多 3 次）。

有效的登录尝试返回**MainMenuActivity**使按钮（您的菜单等在此处）可见（什么都不做）：-

[![在此处输入图像描述](../Images/c9e4f79cb099f9240950c73c6c4adadf.png)](https://i.stack.imgur.com/HBYHF.jpg)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-25T10:58:46.853

我不确定，但你可以试试这个。

```
Cursor c = db.rawQuery("SELECT email FROM MY_USERS_TABLE WHERE email= '?' AND password='?'", new String[] {email, password}); 
```

或者

```
Cursor c = db.rawQuery("SELECT email FROM MY_USERS_TABLE WHERE email= '+email+' AND password='+password+'"; 
```

如果我错了，请原谅我。

# linux - 计算目录 linux 中的文件

> ID：14881017
> 
> 赞同：2
> 
> 时间：2013-02-14T17:52:10.547
> 
> 标签：linux, shell

Q2。编写一个将目录名称作为命令行参数的脚本，并显示其中各种文件的属性，例如

1.  常规文件
2.  文件总数
3.  目录数
4.  允许写入权限的文件
5.  允许读取权限的文件
6.  允许执行权限的文件
7.  大小为 0 的文件
8.  目录中的隐藏文件

使用 shell 脚本在 linux 中工作

我所做的是

```
find DIR_NAME -type f -print | wc -l 
```

要计算所有文件（包括子目录）：

```
find /home/vivek -type f -print| wc -l 
```

要计算所有目录，包括子目录：

```
find . -type d -print | wc -l 
```

仅计算给定目录中的文件（无子目录）：

```
find /dest -maxdepth 1 -type f -print| wc -l 
```

仅计算给定目录中的目录（无子目录）：

```
find /path/to/foo -maxdepth 1 -type d -print| wc -l 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T19:02:38.037

你所有的问题都可以通过调查来解决[`man find`](http://linux.die.net/man/1/find)

1.  `-type f`
2.  无需选项
3.  `-type d`
4.  `-perm /u+w,g+w`或一些变化
5.  `-perm /u+r,g+r`
6.  `-perm /u+x,g+x`
7.  `-size 0`
8.  `-name '.*'`

# google-tv - 用 Java 实现的编解码器

> ID：14881018
> 
> 赞同：1
> 
> 时间：2013-02-14T17:52:08.093
> 
> 标签：google-tv

我听说 Google TV V3 支持添加用 Java 实现的自定义编解码器的能力，但是它们似乎没有围绕此发布的公共 API。有没有公​​开的例子。我问的原因是我正在开发媒体播放器，并且有一些请求允许播放 FLAC 文件，并且找到了一个可以适当解码这些文件的 java 库。

如果没有提供此类信息的任何时间框架？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T00:00:26.787

它们应该在 3 周内可用。这将适用于基于 ARM 的最新 OTA 设备。

# emacs - Emacs 快捷方式一键从水平拆分切换到垂直拆分？

> ID：14881020
> 
> 赞同：32
> 
> 时间：2013-02-14T17:52:20.887
> 
> 标签：emacs

我经常发现自己从 emacs 中两个窗口的水平视图切换到垂直视图。这需要我先做`C-x 1`，然后`C-x 3`再切换`C-x o`到`C-x b <RET>`另一个缓冲区或类似的东西。我只想输入`C-x |`（类似于在 Ediff 中您点击`|`切换拆分视图的方式）。

我在 emacs wiki 站点中找到了这个： [http ://www.emacswiki.org/emacs/ToggleWindowSplit](http://www.emacswiki.org/emacs/ToggleWindowSplit)

但是我如何将它映射到我想要的组合键？或者是否有更简单的方法（占用更少的 .emacs 空间）。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2015-10-31T21:04:25.930

让其他碰巧也在寻找脚本（在[此链接](http://www.emacswiki.org/emacs/ToggleWindowSplit)中）的人更容易，已经使用其他答案的键绑定进行了修改：

```
(defun toggle-window-split ()
  (interactive)
  (if (= (count-windows) 2)
      (let* ((this-win-buffer (window-buffer))
         (next-win-buffer (window-buffer (next-window)))
         (this-win-edges (window-edges (selected-window)))
         (next-win-edges (window-edges (next-window)))
         (this-win-2nd (not (and (<= (car this-win-edges)
                     (car next-win-edges))
                     (<= (cadr this-win-edges)
                     (cadr next-win-edges)))))
         (splitter
          (if (= (car this-win-edges)
             (car (window-edges (next-window))))
          'split-window-horizontally
        'split-window-vertically)))
    (delete-other-windows)
    (let ((first-win (selected-window)))
      (funcall splitter)
      (if this-win-2nd (other-window 1))
      (set-window-buffer (selected-window) this-win-buffer)
      (set-window-buffer (next-window) next-win-buffer)
      (select-window first-win)
      (if this-win-2nd (other-window 1))))))

(global-set-key (kbd "C-x |") 'toggle-window-split) 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-02-14T18:06:49.223

最后一行是定义组合键的地方。它应该是`(global-set-key (kbd "C-x |") 'toggle-window-split)`

# tinymce - TinyMCE 和表格边框

> ID：14881028
> 
> 赞同：4
> 
> 时间：2013-02-14T17:53:03.047
> 
> 标签：tinymce

在最新的 TinyMCE 3.5.8 中，创建新表似乎有一个小错误。

单击新表格按钮，设置边框、边框颜色和背景颜色会产生以下结果：

```
<table style="border-color: #39f30b; border-width: 4px; background-color: #f30b22; width: 250px; height: 135px;" border="4"> 
     <tbody> 
         <tr> <td>&nbsp;</td> <td>&nbsp;</td> </tr> 
         <tr> <td>&nbsp;</td> <td>&nbsp;</td> </tr> 
     </tbody> 
 </table> 
```

右键单击表格，选择表格属性，*不做任何其他事情*并点击应用，然后将标记更改为：

```
<table style="border-color: #39f30b; border-width: 4px; background-color: #f30b22; width: 250px; height: 135px; border-style: solid;" border="4"> 
    <tbody> 
        <tr> <td>&nbsp;</td> <td>&nbsp;</td> </tr> 
        <tr> <td>&nbsp;</td> <td>&nbsp;</td> </tr> 
    </tbody> 
</table> 
```

问题是第一个丢失了`border-style: solid;` 初始表，丢失了`border-style: solid;`破坏IE9，影响了Firefox中的显示。

有什么设置或补丁可以解决这个问题吗？

# vba - 将 Excel 工作表复制到另一本 Excel 书中，但只是格式和值

> ID：14881032
> 
> 赞同：2
> 
> 时间：2013-02-14T17:53:18.557
> 
> 标签：vba, excel

我有两个 Excel 工作簿**Book_A**和**Book_B**，我知道如何从**A -> B**复制整个工作表：

```
 wksSh1.Copy Before:=wkbBook_B.Sheets(1) 
```

但我只想复制带有值和格式而不是公式的工作表。这是可能的

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T18:00:02.820

```
wksSh1.Copy Before:=wkbBook_B.Sheets(1)
with wkbBook_B.Sheets(1).UsedRange
    .value = .value 'converts formulas to values
end with 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-14T17:56:04.497

使用`PasteSpecial`：

```
wksSh1.Copy
With wkbBook_B.Sheets(1)
    .PasteSpecial xlPasteFormats
    .PasteSpecial xlPasteValues
End With 
```

正如 Scott 评论的那样，对于早期版本的 Excel (2003 +)，您可以使用`xlPasteValuesAndNumberFormats`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-03T11:01:48.180

如果您知道行数和列数（或者您可以使用行数和列数来计算它们），这样会更安全：

```
For i = 2 To numberOfRows
   For j = 1 To numberOfColumns
      Cells(i, j).Value = Cells(i, j).Value
   Next
Next 
```

# vb.net - 以管理员身份运行 prnmngr.vbs 并将变量从 VB.net 应用程序传递给它

> ID：14881034
> 
> 赞同：0
> 
> 时间：2013-02-14T17:53:28.867
> 
> 标签：vb.net, .net-4.0, printing, vbscript

我有大约 12 台 Wyse 瘦客户端，每次登录时都需要重新映射打印机。所以我有一个应用程序，它加载一个 mac/username/printermodel 文件，然后根据登录的用户在注册表中搜索 Wyse 客户端的 mac，并将打印机的名称、打印机驱动程序和要使用的端口传递给 prnmngr .vbs 然后为用户安装打印机。

我遇到的问题是，除非我以管理员身份运行应用程序，否则不会添加打印机。因为 prnmngr.vbs 必须以管理员权限运行。

那么如何以管理员身份运行 prnmngr.vbs 并将 3 个变量传递给它呢？

乔治

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T00:34:49.133

我不确定我是否正确理解了你的问题，所以请耐心等待。如果您需要以管理员身份启动您的应用程序并且 prnmngr.vbs 可以继承权限，那么您可以尝试此脚本。

```
 Option explicit
dim oShell
set oShell= Wscript.CreateObject("WScript.Shell")
oShell.Run "runas /user:administrator ""yourapp.exe"""
WScript.Sleep 100
'Replace the string yourpassword~ below with
'the password used on your system. Include tilde 
oShell.Sendkeys "yourpassword~"
Wscript.Quit 
```

显然，您需要限制对脚本的阅读，因为它包含管理员密码

# iphone - cocos2d如何在游戏over layer中显示分数

> ID：14881038
> 
> 赞同：0
> 
> 时间：2013-02-14T17:53:38.440
> 
> 标签：iphone, cocos2d-iphone

当我尝试在 cocos2d 中的游戏中显示 Game Over Layer 中的最终分数时，我遇到了问题。有一种算法可以修改我的变量的值`increment`，其中包含用户的积分，然后游戏会显示它们。

```
increment = increment + 50;
[pointLabel setString: [NSString stringWithFormat: @"Points: %i", increment]]; 
```

然后一个函数控制用户是否生活在他的游戏中

```
-(void)gameOver:(int)value punteggio:(id)punti{

    if (value == 1) {
        //WIN
    }else if(value == 2){
        if (life > 1) { // 1
            life = life - 1;
            for (CCSprite *spr in spriteLifeArray) {
                if (life == spr.tag) {
                    [self removeChild:spr cleanup:YES];               
                }}} 
     else { 
            //  LOSE
            [...]
            [[CCDirector sharedDirector] replaceScene:[GameOver node]];
        }
}} 
```

然后调用 GameOverLayer。这是.h文件

```
@interface GameOver : CCNode { 
    CGSize size;
    CCLabelTTF *label1;
    CCLabelTTF *label2;
    CCLabelTTF *labelpnt;
    CCLabelTTF *labelscore;
}
-(void)restart; 
```

这里是 .m 文件

```
@implementation GameOver
+(id) scene {
    // 'scene' is an autorelease object.
    CCScene *scene = [CCScene node];

    // 'layer' is an autorelease object.
    GameOver *layer = [GameOver node];

    // add layer as a child to scene
    [scene addChild: layer];

    // return the scene
    return scene;
}

-(id) init{

    if( (self=[super init] )) {

        size = [[CCDirector sharedDirector] winSize];

        label1 = [CCLabelTTF labelWithString:@"Game Over" fontName:@"Marker Felt" fontSize:40];
        label1.position = ccp(size.width/2 , size.height/2+20+50 );

        labelpnt = [CCLabelTTF labelWithString:@"Punteggio" fontName:@"Marker Felt" fontSize:20];
        labelpnt.position = ccp(size.width/2 , size.height/2+50-100 );

        labelscore = [CCLabelTTF labelWithString:@"100" fontName:@"Marker Felt" fontSize:20];
        [labelscore setString: [NSString stringWithFormat: @" 0 "]];
        [labelscore setColor:ccc3(255, 1, 1)];
        labelscore.position = ccp(size.width / 2, size.height/2+50-130);

        label2 = [CCLabelTTF labelWithString:@"Ricomincia" fontName:@"Marker Felt" fontSize:25];
        CCMenuItemLabel *back = [CCMenuItemLabel itemWithLabel:label2  target:self selector:@selector(restart)];
        CCMenu *menu= [CCMenu menuWithItems:back, nil];
        menu.position = ccp(size.width/2 , size.height/2-50+50);

        [self addChild: label1];
        [self addChild: labelpnt];
        [self addChild: labelscore];
        [self addChild: menu];

    }
    return self;
}

-(void) restart {
    [[CCDirector sharedDirector] replaceScene:[HelloWorldLayer node]];
} 
```

我如何才能`int increment`在游戏中显示我的最终价值？我怎样才能通过课程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T18:33:03.177

使用用户默认值。这是代码

```
 //Save score in game screen
    int highScore  = 234;
    [[NSUserDefaults standardUserDefaults] setInteger:12 forKey:@"HighScore"];
    [[NSUserDefaults standardUserDefaults] synchronize];

    //get score in game over
    int highScore  = [[NSUserDefaults standardUserDefaults] integerForKey:@"HighScore"];

    NSString *score = [NSString stringWithFormat: @"%d", highScore];
    CCLabelTTF *scoreLabel = [CCLabelTTF labelWithString:score fontName:@"Marker Felt" fontSize:40]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T19:41:07.547

嘿，在那种情况下，您应该使用单独的图层来显示分数生命或您想要同时显示的任何内容。

在`HUD Layer`ie`Heads-Up Display`课程中，您应该编写一些基本代码，`CCLabelBMFont`以在屏幕上显示“您的分数”、“您赢”或“您输”以及下方显示“重新开始”的按钮。当点击重新启动按钮时，它会创建一个新的 ActionLayer 实例切换到它。编写一个 Score 方法 scoreUpdate，这个方法将有计算分数的逻辑，就像子弹击中怪物时一样，并将其更新到`CCLabelBMFont`标签。然后所有你需要做的只是调用那个方法。

这是满足此类要求的最佳教程之一。

[看](http://www.raywenderlich.com/4666/how-to-create-a-hud-layer-with-cocos2d)

# ssl - 如何在 Ephemeral RSA 下读取 SSL/TLS 加密警报代码

> ID：14881039
> 
> 赞同：7
> 
> 时间：2013-02-14T17:53:43.143
> 
> 标签：ssl, wireshark

我正在尝试在我的 Web 服务器上调试 SSL 加密警报。我不确定问题出在哪里，事情似乎正在运行，但我在 Wireshark 中看到了许多我认为不应该存在的 TLSv1 加密警报。

TLSv1 警报协议 ( [http://en.wikipedia.org/wiki/Transport_Layer_Security#Alert_protocol](http://en.wikipedia.org/wiki/Transport_Layer_Security#Alert_protocol) ) 提供了错误代码来指示什么是错误的，不幸的是这个代码是加密的。

Wireshark 允许通过在 SSL 首选项页面中提供私钥（我拥有）来解密 SSL。[但是，由于会话是使用 Ephemeral RSA 设置的（Sharkfest'09 http://sharkfest.wireshark.org/sharkfest.12/presentations/MB-1_SSL_Troubleshooting_with%20_Wireshark_Software.pdf](http://sharkfest.wireshark.org/sharkfest.12/presentations/MB-1_SSL_Troubleshooting_with%20_Wireshark_Software.pdf)第 59 页），这对我不起作用。

我想知道如何阅读此警报代码。以下任何一项都会让我到达那里：
a）让 Wireshark 使用 Ephemeral RSA 解密 SSL
b）避免使用 Ephemeral RSA，以便 Wireshark 可以解密
c）强制 SSL 使用空加密，这样我就可以阅读代码来调试它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-15T12:30:11.080

> b) 避免使用 Ephemeral RSA，以便 Wireshark 可以解密

如果您的 Web 服务器是 Apache，请尝试以下操作：

```
httpd.conf

SSLProtocol +all -SSLv2 -SSLv3
SSLCipherSuite -kEECDH:-kEDH:+kRSA:+HIGH:+MEDIUM:-LOW:-EXP 
```

> c) 强制 SSL 使用空加密，这样我就可以阅读代码来调试它

这可能有点棘手，但请尝试移到`eNULL`列表的前面。`eNULL`可能会被客户拒绝，但值得一试。我怀疑它会被拒绝，因为客户端不允许密码（或者`aNULL`，就此而言）。

如果客户端确实有`eNULL`，它仍然可能不会被使用。服务器通常尊重客户端的密码，因此除非客户端请求`eNull`，否则您将不得不在服务器配置上找到一个覆盖。

# ios - 如何使 C 结构成为类属性？

> ID：14881041
> 
> 赞同：3
> 
> 时间：2013-02-14T17:53:45.800
> 
> 标签：ios, objective-c, c, cocoa-touch

我有这个：

```
typedef struct objTag{
    float x;
    float y;
    BOOL isUP;
} object; 
```

如何使对象成为这样的属性

```
@property (nonatomic, assign) object myObj; 
```

接着...

```
@synthesize myObj = _myObj; 
```

这编译得很好，但是稍后在我尝试类似的代码时

```
self.myObj.isUP = YES; 
```

我收到消息“表达式不可分配”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T18:07:36.963

这不起作用，因为编译器会将其编译为：

```
[[self getMyOj] setIsUP: YES]; 
```

您会注意到“isUP”是 C 结构而不是 Obj-C 对象 ivar 上的属性。

编辑：

如果您真的想要直接操作，则需要像这样进行操作。

```
typedef struct s {
    int i;
} s;

@interface Test : NSObject {
    s *myS;
}
@property (nonatomic, assign) s *myS;
@end

@implementation Test
@synthesize myS;
- (id) init {
    self = [super init];
    myS = malloc(sizeof(s));
    myS->i = 0;
    return self;
}
@end

// somewhere later.
Test *t = [[Test alloc] init];
t.myS->i = 10; 
```

请注意，您可能希望在您的 dealloc 方法中清理 myS 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T17:59:16.553

这个问题回到了`C`编程的基础（即非面向对象编程）。

当您使用引用结构的属性时，您获取的是该结构的**副本**，而不是对其的引用。

如果你写

```
CGRect rect = CGRectMake(...);
CGRect rect2 = rect; 
```

您没有分配`rect2`对 的引用`rect`，而是在创建结构的副本。变`rect2`不变`rect`。

同样，如果您更改作为属性返回的结构的元素，您将更改对象拥有的 rect 副本的元素。从字面上看，这并**没有**什么好处——这种代码没有用处，因为您正在更改结构中没有引用任何地方的元素的值。

如果您想编辑该类实际使用的结构，您的属性需要返回一个**指向**它的指针。这可以做到，但代码变得比它的价值更混乱：

```
typedef struct myObj{BOOL isUp;} TOBJECT;
...
@property (nonatomic, assign) TOBJECT* myObj; //in class interface

...

self.myObj = malloc(sizeof(TOBJECT)); //in init method.
...
self.myObj->isUp = YES; //elsewhere, even potentially outside the class.
...
free(self.myObj); //in class dealloc method. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T18:06:58.973

这就像处理 UIViews 上的帧一样 - 您需要一次性分配整个结构，而不是它的子值。所以像：

```
object obj = self.myObj;
obj.isUP = YES;
self.myObj = obj; 
```

如果您不喜欢这样（这很糟糕！），请不要使用结构。而是构建一个具有几个属性的类。结构真的就在那里，因为 obj-c 是 c 的超集，如果可以的话，你应该避免它们。:)

# c - 使用 pthread 进行矩阵乘法

> ID：14881046
> 
> 赞同：0
> 
> 时间：2013-02-14T17:53:57.250
> 
> 标签：c, multithreading, matrix-multiplication

我正在尝试使用 pthreads 进行矩阵乘法，并为每行的每次计算而不是每个元素创建一个线程。假设有两个矩阵 A[M][K],B[K][N] 。我哪里错了？

```
int A[M][K];
int B[K][N];
int C[][];

void *runner (void *param);

struct v
{
int i;
 int j;
};

pthread_t tid[M];

for (i = 0; i < M; i++) // It should create M threads 
{
    struct v *data = (struct v *) malloc (sizeof (struct v));
    data->i = i;
    data->j = j;
    pthread_create (&tid[count], &attr, runner, data);
    pthread_join (tid[count], NULL);
    count++;
}

runner (void *param) //
{
    struct v *test;
    int t = 0;
    test = (struct v *) param;

    for (t = 0; t < K; t++)  // I want to compute it for a row instead of an element 
    {
        C[test->i][test->j] = C[test->i][test->j] + A[test->i][t] * B[t][test->j];
    }
    pthread_exit (0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T19:04:55.577

首先，去掉data->j。如果您正在计算整行，则行索引是您的线程唯一需要的东西。现在你的 runner(..) 计算单个元素。您必须遍历所有行元素，逐一计算它们。其次，不要在创建线程后立即加入它。这样，您一次只能运行一个线程。创建所有线程后开始加入线程。

# c# - 使用 Linq 将相似值与列表相加

> ID：14881052
> 
> 赞同：3
> 
> 时间：2013-02-14T17:54:17.030
> 
> 标签：c#, linq

我在列表中有以下值

```
Feb 13  100 
Feb 13  150 
Feb 13  127 
Feb 14  50 
```

使用 linq 如何返回另一个列表，其中包含每个日期的总和，包括前几天的总和？

例如

```
Feb 13 357  (Sum of Feb 13)   
Feb 14 407  (Sum of Feb 14 + Sum of Feb 13) 
```

有点胡说八道

```
list= list.OrderBy(i => i.date)
                    .Distinct().Select(
                i =>
                    {
                        np+= i.rh;
                        nh+= i.hm;
                        return new Po
                            {
                                date= i.date,
                                NH =  nh,

                            };
                    }).ToList(); 
```

这将返回此列表：

```
Feb 13  100 
Feb 13  250 
Feb 13  377 
Feb 14  427 
```

我只想

```
 Feb 13 357  
 Feb 14 407 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T18:31:15.887

```
decimal runningTotal = 0;
var result = from item in items
             orderby item.Date
             group items by item.Date into grp
             let sum = items.Where(x => x.Date == grp.Key).Sum(x => x.Amount)
             select new
             {
                 Date = grp.Key,
                 Sum = runningTotal += sum,
             }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T17:59:59.877

如果您知道前面的值，您可以尝试这样的事情

```
 var Total = listval.Sum(od => od.vall)+listval.where(od => od.date=="Feb 13").Sum(od =>
 od.vall)+listval.where(od => od.date=="Feb 14").Sum(od => od.vall); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T18:08:25.187

您可以通过对对象进行分组并在组内使用 Sum 来做到这一点。Mark 发布的链接准确地显示了如何做到这一点。

# c# - 从 DirectX 切换到 SlimDX 的基础是什么？

> ID：14881053
> 
> 赞同：0
> 
> 时间：2013-02-14T17:54:18.477
> 
> 标签：c#, visual-studio-2010, visual-studio-2012, managed-directx

我有一个使用 DirectX 播放视频的旧应用程序，我想对其进行更新并防止加载程序锁定的“错误”等。

请问转换申请的基本步骤是什么？我需要特别注意什么？

目前，我在项目中有指向我已添加到本地文件夹的本地 DLL 文件的引用。这不是一个好方法，也是这个问题的另一个原因。

```
Microsoft.DirectX
Microsoft.DirectX.DirectInput 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T17:59:22.533

您需要将命名空间更改为命名`SlimDx`空间。那时，您将不得不迁移一些代码，因为`SlimDx`与托管 DirectX 中的某些名称不同。

话虽如此，DirectX 9 的基本 API 调用非常相似，因此一旦开始，迁移就不会太糟糕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T10:23:44.520

我对这个线程有点晚了，但我已经使用 SlimDX 一年了，我几乎但还没有完成将我的胚胎游戏翻译成 SharpDX（因为我想使用 XAML 和其他几个原因）。我强烈推荐两者，撇开 SharpDX 的优势（DX11.1、WinRT、XAML、一些速度改进）不谈，我想说 SlimDX 与托管 DX 一样接近，它与 SharpDX 相同，而不考虑这些优势我提到的。

我希望我的意思是 SlimDX 是一个紧密映射的框架，等于 SharpDX。在这方面，不能单独推荐 SharpDX，而无需提及 SlimDX。我还想指出 SharpDX 不会最小化 SlimDX 上的迁移步骤，如果你这么想的话。它们非常相似，比你想象的更相似，如果你认为你可能会在一个方面失败而在另一个方面取得成功。如果您可以在一个中解决，那么您可以在另一个中解决，它们非常相似。非常相似，我希望他们能重新加入团队，共同开发统一的框架包。它们有太多重叠，无法成为 IMO 的不同项目。

# c++ - 对 shared_ptr 析构函数中的实现错误感到困惑

> ID：14881056
> 
> 赞同：11
> 
> 时间：2013-02-14T17:54:45.077
> 
> 标签：c++, c++11, atomic, lock-free, memory-model

我刚刚看过 Herb Sutter 的演讲：[C++ 和超越 2012：Herb Sutter - atomic<> Weapons, 2 of 2](http://channel9.msdn.com/Shows/Going+Deep/Cpp-and-Beyond-2012-Herb-Sutter-atomic-Weapons-2-of-2)

他在 std::shared_ptr 析构函数的实现中显示了错误：

```
if( control_block_ptr->refs.fetch_sub(1, memory_order_relaxed ) == 0 )
    delete control_block_ptr; // B 
```

他说，由于 memory_order_relaxed，delete 可以放在 fetch_sub 之前。

> 在 1:25:18 - Release 没有将 B 行保留在它应该在的位置

这怎么可能？存在先发生/先排序关系，因为它们都在单线程中。我可能错了，但是 fetch_sub 和 delete 之间也存在依赖关系。

如果他是对的，哪些 ISO 项目支持这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-10T01:07:03.680

想象一个释放共享指针的代码：

```
auto tmp = &(the_ptr->a);
*tmp = 10;
the_ptr.dec_ref(); 
```

如果 dec_ref() 没有“释放”语义，编译器（或 CPU）可以将 dec_ref() 之前的内容移动到它之后（例如）：

```
auto tmp = &(the_ptr->a);
the_ptr.dec_ref();
*tmp = 10; 
```

这是不安全的，因为 dec_ref() 也可以同时从其他线程调用并删除对象。因此，在 dec_ref() 之前，它必须有一个“释放”语义才能留在那里。

现在让我们想象对象的析构函数如下所示：

```
~object() {
    auto xxx = a;
    printf("%i\n", xxx);
} 
```

此外，我们将对示例进行一些修改，并将有 2 个线程：

```
// thread 1
auto tmp = &(the_ptr->a);
*tmp = 10;
the_ptr.dec_ref();

// thread 2
the_ptr.dec_ref(); 
```

然后，“聚合”代码将如下所示：

```
// thread 1
auto tmp = &(the_ptr->a);
*tmp = 10;
{ // the_ptr.dec_ref();
    if (0 == atomic_sub(...)) {
        { //~object()
            auto xxx = a;
            printf("%i\n", xxx);
        }
    }
}

// thread 2
{ // the_ptr.dec_ref();
    if (0 == atomic_sub(...)) {
        { //~object()
            auto xxx = a;
            printf("%i\n", xxx);
        }
    }
} 
```

但是，如果我们只有 atomic_sub() 的“释放”语义，则可以这样优化这段代码：

```
// thread 2
auto xxx = the_ptr->a; // "auto xxx = a;" from destructor moved here
{ // the_ptr.dec_ref();
    if (0 == atomic_sub(...)) {
        { //~object()
            printf("%i\n", xxx);
        }
    }
} 
```

但是那样，析构函数不会总是打印“a”的最后一个值（这段代码不再是无竞争的）。这就是为什么我们还需要为 atomic_sub 获取语义（或者，严格来说，当计数器在递减后变为 0 时，我们需要一个获取屏障）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T19:23:10.563

看起来他正在谈论共享对象本身上的操作同步，这在他的代码块上没有显示（结果 - 令人困惑）。

这就是他提出的原因`acq_rel`——因为对对象的所有操作都应该在其销毁之前发生，一切都井然有序。

但我仍然不确定他为什么谈论`delete`与`fetch_sub`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-07T06:57:45.660

这是一个迟到的回复。

让我们从这个简单的类型开始：

```
struct foo
{
    ~foo() { std::cout << value; }
    int value;
}; 
```

我们将在 a 中使用这种类型`shared_ptr`，如下所示：

```
void runs_in_separate_thread(std::shared_ptr<foo> my_ptr)
{
    my_ptr->value = 5;
    my_ptr.reset();
}

int main()
{
    std::shared_ptr<foo> my_ptr(new foo);
    std::async(std::launch::async, runs_in_separate_thread, my_ptr);
    my_ptr.reset();
} 
```

两个线程将并行运行，共享一个`foo`对象的所有权。

通过正确的`shared_ptr`实现（即带有 的实现`memory_order_acq_rel`），该程序具有已定义的行为。该程序将打印的唯一值是`5`.

如果实现不正确（使用`memory_order_relaxed`），则没有这样的保证。行为未定义，因为 `foo::value`引入了数据竞争。只有在主线程中调用析构函数时才会出现问题。使用宽松的内存顺序，其他线程中的写入`foo::value`可能不会传播到主线程中的析构函数。`5`可以打印的值不是。

那么什么是数据竞赛？好吧，查看定义并注意最后一个要点：

> 当一个表达式的计算写入一个内存位置而另一个计算读取或修改相同的内存位置时，这些表达式被称为冲突。具有两个冲突评估的程序存在数据竞争，除非其中任何一个
> 
> *   两个冲突的评估都是原子操作（见 std::atomic）
> *   其中一个冲突的评估发生在另一个之前（参见 std::memory_order）

在我们的程序中，一个线程将写入`foo::value`，​​一个线程将读取`foo::value`。这些应该是顺序的；写入`foo::value`应始终发生在读取之前。直观地说，它们是有意义的，因为析构函数应该是对象上发生的最后一件事。

`memory_order_relaxed`但不提供此类订购保证，因此 `memory_order_acq_rel`是必需的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T18:53:16.453

在谈话中 Herb 表示`memory_order_release`不是`memory_order_relaxed`，但放松会带来更多问题。

除非`delete control_block_ptr`访问`control_block_ptr->refs`（它可能没有），否则原子操作不会携带依赖关系到删除。删除操作可能不会触及控制块中的任何内存，它可能只是将该指针返回给 freestore 分配器。

但我不确定 Herb 是在谈论编译器在原子操作之前移动删除，还是只是指副作用何时对其他线程可见。

# python - 问题拆分日期时间 - 'str' 对象没有属性 'strptime'

> ID：14881063
> 
> 赞同：1
> 
> 时间：2013-02-14T17:55:08.713
> 
> 标签：python, datetime, time, strptime

我正在尝试拆分日期时间...存储日期效果很好，但是每当我尝试存储时间时都会出错。

以下代码有效：

```
datetime =  tweet.date.encode( 'ascii', 'ignore')
struct_date = time.strptime(datetime, "%a, %d %b %Y %H:%M:%S +0000")
date = time.strftime("%m/%d/%Y") 
```

但是，如果我添加以下行，则会出现错误：

```
 time = time.strftime("%H:%M:%S") 
```

AttributeError：“str”对象没有属性“strptime”

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T17:56:55.070

您将字符串分配给名为 的变量`time`。请改用其他名称，它会掩盖您的`time`模块导入。

```
tm = time.strptime(datetime, "%H:%M:%S") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T18:07:02.927

它可能工作了一次然后停止工作，因为你用一个名为“时间”的变量覆盖了模块“时间”。使用不同的变量名。

这会覆盖时间模块

```
>>> import time
>>> type(time)
<type 'module'>
>>> time = time.strftime("%H:%M:%S")
>>> type(time)
<type 'str'>
>>> time = time.strftime("%H:%M:%S")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'str' object has no attribute 'strftime' 
```

你应该这样做

```
>>> import time
>>> type(time)
<type 'module'>
>>> mytime = time.strftime("%H:%M:%S")
>>> type(time)
<type 'module'>
>>> time.strftime("%H:%M:%S")
'11:05:08' 
```

# php - wordpress 硬编码联系表格失败

> ID：14881065
> 
> 赞同：0
> 
> 时间：2013-02-14T17:55:25.100
> 
> 标签：php, wordpress, templates

我决定为我的 Wordpress 博客硬编码一个联系表格。我创建了一个模板，如下所示。尽管花了一些时间看，我还是看不到它的问题。任何帮助将不胜感激。另外，我没有忘记清理输入。当我在这里看到问题时，我会添加该功能。提前致谢...

顺便说一句，我收到这条消息： Parse error: syntax error, unexpected 'else' (T_ELSE) in F:\xampp\htdocs\new_theme\wp-content\themes\twentytwelve_child\contact.php 在第 54 行

```
<?php /* Template Name: contact */?>

<?php get_header(); ?>

<?php

if(isset($_POST["submitted"])){

  if($_POST["contactName"] === ""){
    $nameError = "Please enter your name.";
    $hasError = true;
   } 

  else $name = $_POST['contactName'];
if($_POST["email"] === ""){
    $emailError = "Please enter your email address.";
    $hasError = true;
  } 

  else if (!preg_match("/^[[:alnum:]][a-z0-9_.-]*@[a-z0-9.-]+\.[a-z]{2,4}$/i",  $_POST['email'])) {
    $emailError = "You entered an invalid email address.";
    $hasError = true;
} 

else $email = $_POST['email'];

if($_POST['comments'] === ""){
    $commentError = "Please enter a message.";
    $hasError = true;
}

else $comments = $_POST["comments"]; 
```

}

```
if(!isset($hasError)) {
    $emailTo = "mathornley@gmail.com";
    $subject = "From Android Scoop - From: $name";
    $body = "Name: $name \n Email: $email \n Comments: $comments";
    $headers = "From: $name <$emailTo> \n Reply-To: $email";

    wp_mail($emailTo, $subject, $body, $headers);
    $emailSent = true;
} 
```

?>

```
<?php if(isset($emailSent) && $emailSent == true){ ?>
        <div class="thanks">
      <p>Thanks, your email was sent successfully.</p>
    </div>
<?php } ?>

<?php else{?>
      <?php if(isset($hasError){?> <p class="error">Sorry, an error occured.<p>

          <div class="form_left">       
    <form action="<?php the_permalink();?>" method="post">
        <label><span class="requiring">*</span>Name:</label>
        <input type="text" name="contactName"/>
        <?php if($nameError)?> <span class="error"><?=$nameError;?></span>

                <label><span class="requiring">*</span>Email</label>
        <input type="text" name="email"/>
        <?php if($emailError)?><span class="error"><?=$emailError;?></span>

        <label>Phone</label><input type="text" name="phone"/> 
        <input type="submit" value="Send your message"/>
        <input type="hidden" name="submitted" value="true" />
    </div>

    <div class="form_right">        
      <label><span class="requiring">*</span>Message:</label>
      <textarea name="comments" rows="20" cols="30" class="required requiredField"></textarea>
         <?php if($commentError)?><span class="error"><?=$commentError;?></span>
</form>
            </div>

<?php }} ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T18:03:57.540

有两个语法错误：

```
<?php }else{
        if(isset($hasError)){?> 
```

1、

```
<?php } ?>

<?php else{?> 
```

您不能关闭 PHP 标记，然后`else`在使用括号时再次打开它。如果您使用替代 if/then 语句，那么这是可能的

2、

`if(isset($hasError)`

您缺少 if 语句的右括号

满的：

```
<?php
if(isset($emailSent) && $emailSent == true){
    echo '<div class="thanks"><p>Thanks, your email was sent successfully.</p></div>';
}else{
    if(isset($hasError)){?>
        <p class="error">Sorry, an error occured.<p>
          <div class="form_left">       
            <form action="<?php the_permalink();?>" method="post">
                <label><span class="requiring">*</span>Name:</label>
                <input type="text" name="contactName"/>
                <?php if($nameError)?> <span class="error"><?=$nameError;?></span>

                        <label><span class="requiring">*</span>Email</label>
                <input type="text" name="email"/>
                <?php if($emailError)?><span class="error"><?=$emailError;?></span>

                <label>Phone</label><input type="text" name="phone"/> 
                <input type="submit" value="Send your message"/>
                <input type="hidden" name="submitted" value="true" />
            </div>

            <div class="form_right">        
              <label><span class="requiring">*</span>Message:</label>
              <textarea name="comments" rows="20" cols="30" class="required requiredField"></textarea>
                 <?php if($commentError)?><span class="error"><?=$commentError;?></span>
        </form>
        </div>
    <?php
    }
} ?> 
```

# jquery - 书签和 AJAX 发布数据

> ID：14881071
> 
> 赞同：0
> 
> 时间：2013-02-14T17:55:34.220
> 
> 标签：jquery, ajax, post, query-string

所以...我正在用 PHP 和 JQuery/JS 编写这个东西；我*还不太*擅长......

我希望用户能够为页面添加书签。现在，我有时会发送大量数据，有时会发送一些数据，所以我学会了如何使用 jquery ajax/post 函数并只传递 json。但是，这会阻止用户为页面添加书签。我要做的是……基本上……实际上，我把它全部打出来，解释它，但没有人会阅读所有这些。

所以..我必须重新加载数据很多。我希望能够使用 URL 查询字符串和使用 jquery 发布数据。

所以...

*   基础，基础页面：`www.domain.com/kims_stuff.php`
*   另一个页面：`www.domain.com/kims_stuff.php?type=0&color=grey`
    *   但是......我取决于他们在这个页面上点击的内容，我可能想用它发送一大堆json......但我希望查询字符串仍然显示一些东西，所以它可以是书签。

对不起，我没有很好地解释这一点。我想我只需要......做......`window.location.href = "?type=0&color=grey"`当我想要那个查询字符串并从那里，当我需要传递大量数据时，我可以重新加载或使用json。

对？那是应该做的吗？

但只是检查......无论如何将一组数据放在url查询字符串中，另一组数据放在ajax post json中？我知道我可以将其他页面中的内容加载到当前页面上的 div 中，同时保留当前 url ......在这种情况下，页面已经需要在 url 中包含它。

**或者在使用 jquery 和 ajax 时是否有更好的方法可以为页面添加书签？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T19:14:04.410

通常，您使用 URL 哈希：

```
www.domain.com/kims_stuff.php#type=0&color=grey 
```

随着您的 AJAX 状态发生变化，您将更新哈希。当页面加载时，它会查看哈希值，然后执行您的 JS 将其恢复到定义的状态。

# java - Java Dispatching-Runtime 类型

> ID：14881072
> 
> 赞同：2
> 
> 时间：2013-02-14T17:55:35.007
> 
> 标签：java, dispatch, runtime-type

我对java中的方法调度感到困惑。为什么第一个方法“a.m1(b)”调用类A？

调用变量是 a。它的运行时类型是 B，不是吗？

```
class A {
    public void m1(A a){
        System.out.println("A-m1");
    }
    public void m1(){
        System.out.println("A-m1");
    }

}
class B extends A {
    public void m1( B b){
        System.out.println("B-m1");

    }
    public void m1(){
        System.out.println("B-m1");

    }

}
public class HelloWorld {
    public static void main(String[] args) {

    B b = new B();  
    A a = new B();

        a.m1(b);//prints A-m1
        a.m1();//prints B-m1

    }

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T18:01:56.920

*重载*解析是基于编译时类型完成的。类型的变量`A`仅公开方法`m1()`和`m1(A)`. 因为你传入了一个参数，`m1(A)`所以被调用；或者更确切地说，对其进行适当的*覆盖*。除非*那*`m1(B)`不是. **_** _ _ （在我的脑海中，我不知道覆盖是否可以扩大参数签名，但它们当然不能缩小它们。）*`m1(A)`*

# jquery - 使用 JSON 检索 youtube 播放列表信息在 IE 上不起作用

> ID：14881073
> 
> 赞同：0
> 
> 时间：2013-02-14T17:55:42.423
> 
> 标签：jquery, json, youtube-api, getjson, youtube-javascript-api

下面的代码适用于 chrome 和 mozilla，但这不适用于 IE 8。

你能帮帮我吗..

```
var video_id='VA770wpLX-Q';

$.getJSON('http://gdata.youtube.com/feeds/api/videos/'+video_id+'?v=2&alt=jsonc',function(data,status,xhr){
alert(data.data.title);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T18:43:36.157

这是因为 IE（直到 IE 10）不支持[跨域资源共享](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)。

`tkone`在这里给出了一个很好的解释：[getJSON is not Working in IE for Youtube](https://stackoverflow.com/questions/14338130/getjson-is-not-working-in-ie-for-youtube)。不幸的是，他提供的解决方案（`?`在 URL 末尾添加一个）不起作用。

还有其他解决方案，一个简单的方法是`&callback=?`在 URL 的末尾添加，如[Yosy](https://stackoverflow.com/questions/6958985/jquery-getjson-acess-denied)所建议的：

```
$.getJSON('http://gdata.youtube.com/feeds/api/videos/'+video_id+'?v=2&alt=jsonc&callback=?',
    function(data,status,xhr){
        alert(data.data.title);
}); 
```

# javascript - 将日历数据提取到电子表格时处理时区

> ID：14881074
> 
> 赞同：0
> 
> 时间：2013-02-14T17:55:42.270
> 
> 标签：javascript, timezone, google-apps-script, google-calendar-api, google-sheets

我正在开发一个小的 Google Apps 脚本，它将事件数据从选定的 Google 日历导出到选定日期范围内的新 Google 电子表格。我遇到的一个问题是复制到电子表格的时间相差了三个小时。有关如何处理此问题并正确显示事件时间的任何建议？

到目前为止，这是我的代码：（这是一个正在进行的工作）

```
function doGet() {
  var app = UiApp.createApplication();
  var handler = app.createServerHandler("change");
  var picker1 = app.createDatePicker().addValueChangeHandler(handler).setId("picker1");
  var picker2 = app.createDatePicker().addValueChangeHandler(handler).setId("picker2");
  var pickerpanel = app.createHorizontalPanel();
  var panel = app.createVerticalPanel();
  pickerpanel.add(picker1);
  pickerpanel.add(picker2);
  panel.add(pickerpanel);
  var lb = app.createListBox(false).setId('lbCalSelId').setName('lbCalSelect');

  lb.setVisibleItemCount(3);
  var cals = CalendarApp.getAllCalendars();
  for (var i=0; i<cals.length;i++) {
    lb.addItem(cals[i].getName(),cals[i].getId());
  }
  panel.add(lb);

  var button = app.createPushButton().setText("Export").setId("button");
  var handler = app.createServerClickHandler('doExport').addCallbackElement(panel);
  button.addClickHandler(handler);
  panel.add(button);
  app.add(panel);
  return app;  
}

function change(eventInfo) {
  var app = UiApp.getActiveApplication();
  if (eventInfo.parameter.picker1) {
    UserProperties.setProperties({"DateRangeStart":eventInfo.parameter.picker1});
    app.add(app.createLabel("Start date " + eventInfo.parameter.picker1));
  }
  else if (eventInfo.parameter.picker2) {
    UserProperties.setProperties({"DateRangeEnd":eventInfo.parameter.picker2});
    app.add(app.createLabel("End date" + eventInfo.parameter.picker2));
  }

  return app;
}

function doExport(eventInfo) {
  var app = UiApp.getActiveApplication();
  var calId = eventInfo.parameter.lbCalSelect;
  var cal = CalendarApp.getCalendarById(calId);
  var rangeStart = UserProperties.getProperty("DateRangeStart");
  var rangeEnd = UserProperties.getProperty("DateRangeEnd");
  app.add(app.createLabel("The button was clicked!"));
  if (rangeStart && rangeEnd) {
   app.add(app.createLabel("exporting..."));
   var events = cal.getEvents(new Date(rangeStart), new Date(rangeEnd));
   var eventsData = [];
   var headerRow = ['Title','Start Time','End Time','Location','Description'];
   for (var i=0; i < events.length; i++) {
     var eventData = [];
     eventData.push(events[i].getTitle());
     eventData.push(events[i].getStartTime());
     eventData.push(events[i].getEndTime());
     eventData.push(events[i].getLocation());
     eventData.push(events[i].getDescription());
     eventsData.push(eventData);
   }
   var ss = SpreadsheetApp.create("Export of " + cal.getName() + " from " + rangeStart + " to " + rangeEnd);
   var sheet = ss.getSheets()[0];
   var destRange = sheet.getRange(1, 1, events.length, headerRow.length);
   destRange.setValues(eventsData);
  }
  else {
   app.add(app.createLabel("Range not specified."));
  }

  return app;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T16:00:33.347

我想到了。

我只是将电子表格的时区设置为与日历相同的时区，它就像一个魅力。

```
ss.setSpreadsheetTimeZone(cal.getTimeZone()); 
```

# height - Mootools Morph 高度和背部

> ID：14881075
> 
> 赞同：0
> 
> 时间：2013-02-14T17:55:43.983
> 
> 标签：height, mootools, toggle

我正在寻找解决方案：我想切换 Div 的高度但不完整。所以我尝试了这个，但没有奏效。我看到萤火虫的第一个类变化和高度变为 36px。但是后面没有用。我尝试添加和删除类。

**[http://jsfiddle.net/Zbbd9/1/](http://jsfiddle.net/Zbbd9/1/)**

```
$$('.outer').setStyle('height', '660px');

$$('.outer h2').addEvent('click', function(){
    if (this.hasClass('close')) {
        var parent = this.getParent();
        parent.removeClass('close');
        parent.morph({
        'height': '660px'
      });
    } else {
        var parent = this.getParent();
        parent.addClass('close');
        parent.morph({
        'height': '36px'
      });
    }
}); 
```

**更新：**

[http://jsfiddle.net/Zbbd9/2/](http://jsfiddle.net/Zbbd9/2/)

知道了。

最好的祝福

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T18:57:10.377

您选择了错误的父容器。

试试这样：

```
$$('.outer h2').addEvent('click', function(){
    var parent = this.getParent();
    if (parent.hasClass('close')) {
        parent.removeClass('close');
        parent.morph({
            'height': '660px'
        });
    } else {
        parent.addClass('close');
        parent.morph({
            'height': '36px'
        });
    }
}); 
```

添加一个类来识别当前状态是一种可靠的方法，但您可能还需要考虑其他替代方案，例如使用[toggleClass](http://mootools.net/docs/core/Element/Element#Element%3atoggleClass)或引用完全不同的东西，如滑块或类似的东西。

# url - How to upload files to a server using a URL

> ID：14881079
> 
> 赞同：0
> 
> 时间：2013-02-14T17:55:52.987
> 
> 标签：url, web

I was wondering is there anyway that I could have a webpage that someone would put in a URL of a image and the server that the webpage is on would automatically download the picture

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T17:59:34.177

看看这个[http://www.base64-image.de/step-1.php](http://www.base64-image.de/step-1.php)。可能会帮助你。

# javascript - Facebook 的功能是什么 __d

> ID：14881084
> 
> 赞同：6
> 
> 时间：2013-02-14T17:56:33.780
> 
> 标签：javascript, facebook

我正在开展一个项目，该项目（希望）涉及利用 Facebook 中已经内置的一些 javascript。但马上我就有了一个障碍，我不知道`__d`是什么。

如果您查看源 javascript 文件，几乎每个命令都以`__d`

例如：

```
__d("legacy:live-timer",["LiveTimer"],function(a,b,c,d){a.LiveTimer=b('LiveTimer');},3); 
```

但是我在任何 javascript 文件中都找不到`__d`实际执行的操作。不应该在某个地方为所有这些其他功能定义它来利用它吗？

**更新：**

所以假设有一个网站有一些像这样的javascript......

```
function alertSomething(var) {
    if (var) alert("Here it is: "+var);
}

if (some condition) alertSomething("something"); 
```

现在假设我有一个 Chrome 扩展程序，并且能够将我自己的 Javascript 注入到页面中。不能\我的 Chrome 扩展 Javascript 有这样的东西......

```
if (some other condition) alertSomething("something else"); 
```

因此，我会利用页面上已经存在的 javascript 中的一些代码吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-27T21:25:16.807

正如，我已经检查了 Facebook JavaScript SDK。我相信它使用依赖注入机制。这里有两个网址。

制作：[http](http://connect.facebook.net/en_US/all.js) ://connect.facebook.net/en_US/all.js （混淆）

开发：[http](http://connect.facebook.net/en_US/all/debug.js) ://connect.facebook.net/en_US/all/debug.js （去混淆）

如果你检查 debug.js，你可以看到`require, __d, __t`更多。`__d`更像是来自 RequireJS ( [http://requirejs.org/docs/api.html#define](http://requirejs.org/docs/api.html#define) )的定义函数

```
__d = function(/*string*/ id, /*array<string>*/ deps, factory,
      /*number?*/ _special) {/*TC*/__t([id,'string','id'],[deps,'array<string>','deps'],[_special,'number?','_special']);/*/TC*/ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-14T18:23:55.877

我`__d`在第 20 行找到了`1LWPxIBQ4v0.js`. 不知道该文件是否对每个人都命名相同。搜索“ `a.__d=function(s,t,u,v)`”（`a`是全局对象，即`window`有效地制作`__d`全局函数）。不过，祝你好运……

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-08-02T19:42:04.697

该函数是用于定义模块的[RequireJS](http://requirejs.org/docs/api.html#define)`__d`的 API 。

例子：

```
__d('Example', [], function a(b, c, d, e, f, g, h) {
 'use strict';
  if (c.__markCompiled) c.__markCompiled();
  f.exports = {
      a: "Hello World"
      };
 }, null); 
```

称呼：

```
require('Example'); 
```

输出：

```
 Object {a: "Hello World"} 
```

# php - Javascript未在按钮单击时运行

> ID：14881087
> 
> 赞同：0
> 
> 时间：2013-02-14T17:56:49.967
> 
> 标签：php, javascript, html

我只是在玩一些 HTML、PHP 和 JS 并遇到了问题。我的代码是：

```
<html>
<head>
<title> Dummy Code </title>
<script>
sendMail(){
<?php
$to      = 'example@dot.com';
$subject = 'DummyCode.com';
$message = 'This is a text message sent from DummyCode.com';
$headers = 'From: example@dot.com' . "\r\n" .
   'Reply-To: admin@dummycode.com' . "\r\n" .
mail($to, $subject, $message, $headers);
?>
}
</script>
</head>
<body>
<h1 align=center> DummyCode.com </h1>
<button type="button" onClick="sendMail()"> Send Mail! </button>
</body>
</html> 
```

[http://pastebin.com/C22UDe6J](http://pastebin.com/C22UDe6J)

我的问题是当我单击按钮时我的 JS 不运行，它只在我重新加载页面时运行。

任何人？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T18:02:53.460

好的，那会发生什么。

您加载页面。浏览器向服务器发送请求。在服务器（远程机器）上执行一些 PHP 代码。它产生一些输出（HTML）并将其发送回浏览器。因此，当您收到 HTML 并且它被渲染时，不再有 PHP，因此在您的情况下单击该按钮将无济于事。只需按`Ctrl`+`U`并查看生成的 HTML，您将在`sendMail(){ }`.

在您的情况下，您必须向服务器发出另一个请求以执行将发送电子邮件的服务器端脚本。当您重新加载页面时会发生这种情况。

# php - Zend Database get count

> ID：14881091
> 
> 赞同：0
> 
> 时间：2013-02-14T17:57:04.973
> 
> 标签：php, sql, zend-framework

I have a query to count all rows in Db table.

```
$results = $db->fetchAll('select count(id) as total_keys, sum(if(used,1,0)) as used_keys from product_keys');
$this->_helper->flashMessenger->addMessage($results); 
```

I want to get the total_keys and used_keys, but it doesn't seen to work.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T18:01:05.693

```
$results = $db->fetchOne('select count(id) as total_keys, sum(if(used,1,0)) as used_keys from product_keys');
$this->_helper->flashMessenger->addMessage($results); 
```

# xcode4.2 - Performing mathematical operations in Xcode using Text Fields?

> ID：14881096
> 
> 赞同：1
> 
> 时间：2013-02-14T17:57:13.803
> 
> 标签：xcode4.2

I want to use the values entered in the text Fields by the users in two columns and perform the necessary operations to generate the desired output and display the result as an alert message in XCODE? Is there any way that i can perform the calculations using the text fields ?

got the ans:

```
-(IBAction)buttonPressed1:(id)sender
{
    // You may also need to check if your string data is a valid number
    int result = [Number1.text intValue] + [Number2.text intValue];
    SumAnswer.text = [NSString stringWithFormat:@"%d", result];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T08:00:03.197

上面这段代码是正确的。这将在第三个文本框中显示结果。如果你想显示结果`UIAlertView`

试试 [UIAlertView](http://www.idev101.com/code/User_Interface/UIAlertView.html)

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Result !!" message:[NSString stringWithFormat:@"%d", result]; delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
    // optional - add more buttons:
    [alert addButtonWithTitle:@"Yes"];
    [alert show]; 
```

并且不要忘记添加`UIAlertViewDelegate`.h 类

# c++ - 哪一个更适合访问数组？

> ID：14881098
> 
> 赞同：-4
> 
> 时间：2013-02-14T17:57:14.273
> 
> 标签：c++, arrays, pointers, optimization, c++11

解决以下练习：

> 编写三个不同版本的程序来打印 ia 的元素。一个版本应该使用范围 for 来管理迭代，另外两个版本应该使用普通的 for 循环，一种情况下使用下标，另一种情况下使用指针。在所有三个程序中直接编写所有类型。也就是说，不要使用类型别名、auto 或 decltype 来简化代码。[C++ Primer]

出现了一个问题：**这些访问数组的方法中，哪些在速度方面进行了优化，为什么？**

* * *

**我的解决方案：**

1.  Foreach 循环：

    ```
    int ia[3][4]={{1,2,3,4},{5,6,7,8},{9,10,11,12}};    
    for (int (&i)[4]:ia)        //1st method using for each loop
        for(int j:i)
            cout<<j<<" "; 
    ```

2.  嵌套 for 循环：

    ```
    for (int i=0;i<3;i++)       //2nd method normal for loop
        for(int j=0;j<4;j++)
            cout<<ia[i][j]<<" "; 
    ```

3.  使用指针：

    ```
    int (*i)[4]=ia;
    for(int t=0;t<3;i++,t++){  //3rd method.  using pointers.
        for(int x=0;x<4;x++)
            cout<<(*i)[x]<<" "; 
    ```

4.  使用`auto`：

    ```
    for(auto &i:ia)             //4th one using auto but I think it is similar to 1st.  
        for(auto j:i)
             cout<<j<<" "; 
    ```

* * *

**使用基准测试结果`clock()`**

```
1st: 3.6  (6,4,4,3,2,3) 
2nd: 3.3  (6,3,4,2,3,2)
3rd: 3.1  (4,2,4,2,3,4)
4th: 3.6  (4,2,4,5,3,4) 
```

模拟每种方法 1000 次：

```
1st: 2.29375  2nd: 2.17592  3rd: 2.14383  4th: 2.33333
Process returned 0 (0x0)   execution time : 13.568 s 
```

使用的编译器：MingW 3.2 c++11 标志已启用。IDE:代码块

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-19T03:11:07.700

我有一些观察和要点，希望你能从中得到答案。

1.  第四版，正如你自己提到的，与第一版基本相同。`auto`可以被认为只是一种编码快捷方式（这当然不是严格意义上的正确，因为 using`auto`可能会导致获得与您预期不同的类型，从而导致不同的运行时行为。但大多数情况下这是正确的。）

2.  您使用指针的解决方案可能不是人们说他们正在使用指针时的意思！一种解决方案可能是这样的：

    ```
    for (int i = 0, *p = &(ia[0][0]); i < 3 * 4; ++i, ++p)
        cout << *p << " "; 
    ```

    或使用两个嵌套循环（这可能毫无意义）：

    ```
    for (int i = 0, *p = &(ia[0][0]); i < 3; ++i)
        for (int j = 0; j < 4; ++j, ++p)
            cout << *p << " "; 
    ```

    从现在开始，我假设这是您编写的指针解决方案。

3.  在这种微不足道的情况下，绝对会支配你的运行时间的部分是`cout`. 与执行 I/O 相比，记账和检查循环所花费的时间完全可以忽略不计。因此，您使用哪种循环技术并不重要。

4.  现代编译器非常擅长优化此类普遍存在的任务和访问模式（遍历数组）。因此，所有这些方法很可能会生成完全相同的代码（指针版本可能例外，我将在稍后讨论。 )

5.  大多数这样的代码的性能将更多地取决于内存访问模式，而不是编译器如何准确地生成汇编分支指令（以及其余操作）。这是因为如果所需的内存块不在 CPU 缓存中，从 RAM 中获取这些字节大约需要数百个 CPU 周期（这只是一个大概的数字）。由于所有示例以完全相同的顺序访问内存，因此它们在内存和缓存方面的行为将是相同的，并且将具有大致相同的运行时间。

    附带说明一下，这些示例访问内存的方式是访问内存的最佳方式！线性的，连续的，从头到尾。同样，其中存在问题`cout`，这可能是一个非常复杂的操作，甚至在每次调用时都会调用操作系统，除其他外，这可能会导致几乎完全删除（驱逐）CPU 缓存中所有有用的东西。

6.  在 32 位系统和程序上，an`int`和指针的大小通常相等（都是 32 位！）这意味着您是否传递并使用索引值或指向数组的指针并不重要。然而，在 64 位系统上，指针是 64 位，但 int 通常仍然是 32 位。这表明在 64 位系统和程序上，通常最好使用数组索引而不是指针（甚至迭代器）。

    在这个特定的例子中，这一点都不重要。

7.  您的代码非常具体和简单，但一般情况下，向编译器提供尽可能多的关于您的代码的信息几乎总是更好。这意味着您必须使用可用的最窄、最具体的设备来完成工作。这反过来意味着对于编译器而言，通用`for`循环 (ie `for (int i = 0; i < n; ++i)`)比基于范围的循环(ie )*更糟糕*，因为在后一种情况下，编译器只知道您将迭代整个范围而不是超出范围它或跳出循环或其他东西，而在通用循环情况下，特别是如果您的代码更复杂，编译器无法确定这一点，并且必须插入额外的检查和测试以确保代码按照 C++ 标准执行说应该。`for``for (auto i : v)``for`

8.  在许多（大多数？）情况下，尽管您可能认为性能很重要，**但事实并非如此**。而且大多数时候你重写一些东西来获得性能，你并没有获得太多。在大多数情况下，您获得的性能提升与您所维持的可读性和可维护性的损失是*不值得的。*因此，正确设计您的代码和数据结构（并牢记性能），但要避免这种“微优化”，因为它几乎总是*不*值得，甚至还会损害代码的质量。

9.  一般来说，速度方面的性能*很难*推理。理想情况下，您必须使用可靠的科学测量和统计方法，在真实工作条件下使用真实硬件上的真实数据来测量时间。即使测量一段代码运行所花费的时间也不是一件容易的事。衡量性能很难，推理也更难，但如今它是识别瓶颈和优化代码的唯一方法。

我希望我已经回答了你的问题。

*编辑*：我为你想要做的事情写了一个*非常简单的基准。*代码在[这里](http://ideone.com/uPPrXX)。它是为 Windows 编写的，应该可以在 Visual Studio 2012 上编译（因为基于范围的 for 循环。）这里是计时结果：

```
Simple iteration (nested loops): min:0.002140, avg:0.002160, max:0.002739
    Simple iteration (one loop): min:0.002140, avg:0.002160, max:0.002625
   Pointer iteration (one loop): min:0.002140, avg:0.002160, max:0.003149
 Range-based for (nested loops): min:0.002140, avg:0.002159, max:0.002862
 Range(const ref)(nested loops): min:0.002140, avg:0.002155, max:0.002906 
```

相关数字是“最小”时间（对于 1000x1000 阵列，每个测试运行超过 2000 次。）如您所见，测试之间绝对没有区别。请注意，您应该打开编译器优化，否则测试 2 将是一场灾难，案例 4 和 5 会比 1 和 3 差一点。

以下是测试代码：

```
// 1\. Simple iteration (nested loops)
unsigned sum = 0;
for (unsigned i = 0; i < gc_Rows; ++i)
    for (unsigned j = 0; j < gc_Cols; ++j)
        sum += g_Data[i][j];

// 2\. Simple iteration (one loop)
unsigned sum = 0;
for (unsigned i = 0; i < gc_Rows * gc_Cols; ++i)
    sum += g_Data[i / gc_Cols][i % gc_Cols];

// 3\. Pointer iteration (one loop)
unsigned sum = 0;
unsigned * p = &(g_Data[0][0]);
for (unsigned i = 0; i < gc_Rows * gc_Cols; ++i)
    sum += *p++;

// 4\. Range-based for (nested loops)
unsigned sum = 0;
for (auto & i : g_Data)
    for (auto j : i)
        sum += j;

// 5\. Range(const ref)(nested loops)
unsigned sum = 0;
for (auto const & i : g_Data)
    for (auto const & j : i)
        sum += j; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:17:45.803

影响它的因素有很多：

1.  这取决于编译器
2.  这取决于使用的编译器标志
3.  这取决于使用的计算机

只有一种方法可以知道确切的答案：测量处理大型数组（可能来自随机数生成器）时使用的时间，这与您已经完成的方法相同，只是数组大小应至少为 1000x1000。

# jquery - Good zip code+4 is not validating with jQuery and regex

> ID：14881099
> 
> 赞同：0
> 
> 时间：2013-02-14T17:57:18.437
> 
> 标签：jquery, regex, asp.net-mvc, validation

I'm using jQuery to validate form elements on an MVC form and this is my regular expression to validate zip codes:

```
^(\d{5})|(\d{5}-\d{4})$ 
```

It validates a 5-digit zip code just fine, but the red box around the text box input element remains—er, comes back—when I add a hyphen and 4 more digits.

Why?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T18:17:53.877

以下 RegRxp 中的括号是错误的：

```
^(\d{5})|(\d{5}-\d{4})$ 
```

这就像说 match`^\d\d\d\d\d`或 match `\d\d\d\d\d-\d\d\d\d$`。它错误地匹配`12345x`和`x98765-4321`。请改用以下内容：

```
^(\d{5}|\d{5}-\d{4})$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T19:17:40.767

当我更仔细地查看生成的 HTML 时，我注意到它有 data-val-length-max="9"。这是模型中的一个属性。我把它改成了 10，瞧！

为了让验证正常工作并且仍然将未格式化的数字传递给数据库，我只是从模型的 getter 中返回它：

```
_zip.Replace("-", string.Empty) 
```

# eclipse - Separate stdin and stdout file in Eclipse

> ID：14881100
> 
> 赞同：5
> 
> 时间：2013-02-14T17:57:19.767
> 
> 标签：eclipse, stdout, stdin

The launch configuration dialog is

![enter image description here](../Images/8e9e933d79d8a07d8724b0aea66891ae.png)

Am I right that if one needs the input from a file then output also goes into a file? Why it must be the same file? I do not see any option to have two separate connections.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-07T21:42:31.657

UI 确实令人困惑，但该文件仅用于*输出*。没有类似的方法可以使用文件作为输入，因此是“输入所必需的”提示。

看：

[eclipse中的I/O重定向？](https://stackoverflow.com/a/799277/701303)

[Eclipse 从文件中读取标准输入（System.in）](https://stackoverflow.com/q/188547/701303)

[我们如何将 Eclipse 控制台输出重定向到文件？](https://stackoverflow.com/q/5714053/701303)

# java - Alter canvas with a button click in the main activity

> ID：14881106
> 
> 赞同：1
> 
> 时间：2013-02-14T17:57:33.847
> 
> 标签：java, android, android-canvas, android-animation, onclicklistener

I am struggling with the logic behind this, so any tips would be appreciated. I have two classes, one in which the fragment is created and one in which my custom view is created, and I am trying to do some animation. In the main layout, I have an edit text field and a button. What I want to do is to add to the custom view when a button is clicked, the text within the edit text will be added to the custom view. Thinking about HOW to do this, I am drawing a blank, and I am beginning to think it is not possible. Should I just create the edit text within the custom view? Here is the code showing what I am doing (but stuck on a next step, or whether or not I should scrap this approach and try a different one)

The main fragment

```
public class DestroyerView extends Fragment
{

    private Context mContext;
    Paint paint = new Paint();
    private AnimatedNegative PositiveAnimatedNegative;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        mContext = this.getActivity();
        View view = inflater.inflate(R.layout.activity_destroyer, container, false);
        final Button fire = (Button) view.findViewById(R.id.destroy);
        PositiveAnimatedNegative = (AnimatedNegative) view.findViewById(R.id.anim_view);
        fire.setOnClickListener(new OnClickListener()
            {
            @Override
            public void onClick(View arg0) 
                {
                // logic here?
                }
            });
       return view;

    }
}

public AnimatedNegative(Context context, AttributeSet attrs)  

{

        super(context, attrs);

        mContext = this.getContext();

        h = new Handler();
        mCalendarDbHelper=new CalendarDbAdapter(mContext);
        mCalendarDbHelper.open();

}    

    private Runnable r= new Runnable() 
    {
    @Override
    public void run() 
            {
        invalidate(); 
    }
    };

    protected void onDraw (Canvas canvas)
    {
     String word = "This is a sentence";
     paint.setColor(Color.parseColor("#1E90FF")); 
     paint.setStyle(Style.FILL); 
     canvas.drawPaint(paint); 
     paint.setColor(Color.BLACK); 
     paint.setTextSize(20); 
     x = this.getWidth()/2;
     y = this.getHeight()/2;
     canvas.drawText(word, x, y, paint);
     }
   } 
```

... Now this would be much easier if I could reference the button inside of the custom view, but it doesn't seem I can do that, or if I could simply add to the custom view inside of the main activity class, but it doesn't seem that I can do that either (not without creating a new canvas, which seems to be doing too much for what it is that I want to do (just add the words)). So, finally, is the way I am currently trying to do this a dead end? Any help would be appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T18:31:12.000

我想我明白了。我将使用在我的主要活动中定义的 AnimatedNegative 对象调用 invalidate，然后从编辑文本中传入单词和一个真值，以便我可以在视图中检查它并重绘。添加的代码如下所示：

在主要活动中：

```
 public void onClick(View arg0) 
            {
            PositiveAnimatedNegative.invalidate();
            PositiveAnimatedNegative.add = true;
            PositiveAnimatedNegative.positive_word = "This is a positive word";
            } 
```

在自定义视图中：

```
 if (add == true)
            {
                canvas.drawText(positive_word, x,y, paint);
            } 
```

# android - UI 元素向后兼容

> ID：14881108
> 
> 赞同：1
> 
> 时间：2013-02-14T17:57:35.413
> 
> 标签：android

我正在开发一个 Android 应用程序，该应用程序当前的目标设备是最低 API 为 11。但是，我想修改该应用程序以使其与低于 3.0 的 android 版本兼容。问题是，我有各种 UI 元素，这些元素仅在较新版本中提供：

*   操作栏包含菜单项。我读到一种解决方案是使用 ActionBarSherlock 包。但是，该活动已经扩展了 ListActivity。还有其他解决方案吗？
*   日期选择器对话框片段抛出一个错误说：

“调用需要 API 级别 11（当前最低为 8）：新的 android.app.DialogFragment”

此错误发生在方法 newFragment.show() 上。尽管遵循了 Android 开发者页面上的注释，但还是会发生这种情况：http: [//developer.android.com/guide/topics/ui/controls/pickers.html](http://developer.android.com/guide/topics/ui/controls/pickers.html) 可能是什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T18:00:27.177

> 但是，该活动已经扩展了 ListActivity。

使用 ActionBarSherlock 并从 更改`ListActivity`为`SherlockListActivity`。

> 可能是什么问题呢？

您正在尝试使用原生 API 级别 11 片段，而不是 Android 支持库的片段反向移植。IOW，您使用`android.app.DialogFragment` [的是`android.support.v4.app.DialogFragment`](http://developer.android.com/reference/android/support/v4/app/DialogFragment.html).

# c# - Issue with Sorting a list >, Error: InvalidOperationException

> ID：14881109
> 
> 赞同：0
> 
> 时间：2013-02-14T17:57:38.960
> 
> 标签：c#, sorting, compiler-errors, generic-list, invalidoperationexception

I am trying to sort a generic list, and am getting a `InvalidOperationException` error

Does anyone has suggestions on how to rectify it?

`List<XYZ<String, String>>` list is being passed on as a parameter through a function.

```
func( List<XYZ<String, String>> PassedList) {

   PassedList.Sort();
} 
```

Any suggestion would be really helpful.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T18:00:06.090

你的 XYZ 应该是[IComparable](http://msdn.microsoft.com/en-us/library/b0zbh7b6.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T18:04:32.670

您`XYZ`必须实施`IComparable`or (更好) `IComparable<XYZ<T, U>>`。

如果这不可能，您必须创建一个实现`IComparer`或（再次，更好）的类`IComparer<XYZ<String, String>>`并使用该类的重载，`Sort()`该类采用此类对象的实例，或者使用采用匹配的委托或 lamda 表达式的形式`Comparison<XYZ<String, String>>`（采用两个`XZY<String, String>`参数，并返回`int`)。

如果该`Sort()`方法无法确定哪个`XYZ`在哪个之前，那么它就无法对它们进行排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T19:04:46.443

我使用 linq 语句解决了这个问题。

而不是 using `PassedList.Sort()`，我使用了以下语句：

```
PassedList = PassedList.OrderBy( x => x.Column1).ToList(); 
```

# asp.net-mvc-3 - Constructing HTML in Controller - how to refactor?

> ID：14881111
> 
> 赞同：0
> 
> 时间：2013-02-14T17:57:41.530
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4

I'm currently generating breadcrumbs on an object's Details page by calling a GetBreadcrumbs() method in the object's controller - in this method, the object's parent/grandparent are used to generate an unordered list. What's the best way to pull the HTML out of the controller to follow the Separation of Concerns paradigm? Should a partial view be used here?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T18:04:40.193

局部视图的典型例子是面包屑本身。例如，在您的控制器中，您可以拥有

```
//
//GET: News/Article/x
public ActionResult Article(int id)
{
    //get parentid of article
    ViewBag.id = id;
    ViewBag.parentid;
    return View();
} 
```

因此，您的部分视图将如下所示：

```
@{
    ViewBag.Title = "Article";
}

<h2>Viewing Article @ViewBag.parentid >> @ViewBag.id</h2> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T17:59:59.047

您可以使用部分视图或显示模板。您的控制器应该只构建将传递给视图的模型，然后在视图内您可以使用显示模板，该模板将基于模型构建所需的输出。

# iphone - UIScrollView unresponsive after returning from FlipsideViewController

> ID：14881113
> 
> 赞同：3
> 
> 时间：2013-02-14T17:57:51.900
> 
> 标签：iphone, ios, objective-c, uiscrollview

I have a written a simple example where I have a Utility Application project with one `UIScrollView` on it. When I click the info button to flip the screen and return the `UIScrollView` now is unresponsive. Not only that but I purposely placed the scroller in the Interface Builder in the upper left corner and then programmatically set it in the center. when I come back from the flipside its shifted up to the top left corner and unresponsive. why?

This is my `.h` file:

```
 #import "POCFlipsideViewController.h"

    @interface POCMainViewController : UIViewController <POCFlipsideViewControllerDelegate, UIScrollViewDelegate>

    @property (nonatomic,retain) IBOutlet UIScrollView *scroller;
    @end 
```

This is my .m file

```
#import "POCMainViewController.h"

@interface POCMainViewController ()

@end

@implementation POCMainViewController

@synthesize scroller =_scroller;

- (void)viewDidAppear:(BOOL)animated
{

     [_scroller setContentSize:CGSizeMake(80.0f, 320.0f)];
     [_scroller setFrame:CGRectMake(120, 131, 80, 214)];

    [super viewDidAppear:animated];
}

- (void)viewDidLoad
{
    _scroller.delegate = self;
    _scroller.showsVerticalScrollIndicator = NO;
    _scroller.decelerationRate = UIScrollViewDecelerationRateFast;

    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - Flipside View

- (void)flipsideViewControllerDidFinish:(POCFlipsideViewController *)controller
{
    [self dismissViewControllerAnimated:YES completion:nil];
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"showAlternate"]) {
        [[segue destinationViewController] setDelegate:self];
    }
}

@end 
```

The rest is boiler plate straight from Xcode.![enter image description here](../Images/8fcc5016507f7cda4856631ae3259f37.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-25T20:41:09.563

我发现 UIScrollView 的罪魁祸首通常是自动布局。在 Storyboard 中，突出显示主视图控制器下的视图元素，然后在右侧列中打开“显示文件检查器”窗口。在“Interface Builder Document”下，取消选择“Use Auto Layout”，看看是否可以解决您的问题。

![在此处输入图像描述](../Images/e9a28cdfc383e51a8afc56408d1d9fe8.png)

# java - Java how to make JFrames start off as a maximised window

> ID：14881117
> 
> 赞同：5
> 
> 时间：2013-02-14T17:58:02.603
> 
> 标签：java, swing, jframe, screen, dimension

I want to know how to make a java JFrame start out maximised. I don't want it to be fullscreen (no window around it) I just want it to start out like a normal program such as a web browser.

I already know about using:

```
Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize(); 
```

To get the screen size, but when you apply this Dimension to the JFrame it can still be dragged around even though it takes up almost all of the screen. You can press the maximse button to stop this but I would rather that the window started out maximised.

Also, I fear for the effects that maximising the window would have upon the contents of the window.

How do I go about doing this?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-14T18:02:03.333

使用`java.awt.Frame.setExtendedState()`：

```
public static void main(String[] args)  {

    JFrame frame = new JFrame();
    frame.setExtendedState(JFrame.MAXIMIZED_BOTH);
    frame.setVisible(true);
} 
```

# magento - Magento：为品牌使用类别

> ID：14881119
> 
> 赞同：0
> 
> 时间：2013-02-14T17:58:13.913
> 
> 标签：magento, magento-1.7, categories

我开始建立一个新的 Magento 网站，它主要专注于服装品牌。推出约 25 款产品，每款产品提供一系列产品类别。所以有些人会拥有从鞋子到套头衫的所有东西，有些人可能只是鞋子或配饰。

用户需要能够查看品牌并查看其产品类别，以及通过不同的视图查看所有类型的产品类别和所有鞋子。

我真的不知道如何设置这种东西。我知道我可以为品牌使用类别，然后为服装类别使用子类别，但是我不知道如何将子类别项目链接在一起（如果它们有单独的父类别，我已经查看了所有品牌的所有跳线）。

这里'显示结构需要工作

```
Brand_1{
    Shoes{
        Item 1,
        Item 2
    }
    Coats{
        Item 3
    }
},
Brand 2{
    Shoes{
        Item 4,
        Item 5,
        Item 6
    }
    Jumpers{
        Item 7,
        Item 8,
        Item 9
    }
    Accessories{
        Item 10
    }
    Shirts{
        Item 11
    }
},
Brand 3{
    Shoes{
        Item 12,
        Item 13,
        Item 14
    }
} 
```

因此用户可以查看品牌 1 页面，参见项目 1-3。或查看品牌 1>鞋子并查看项目 1-2。或查看鞋子并查看项目 1、2、4、5、6、12、13、14。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:06:56.523

我选择解决这个问题的方法是创建一个自定义属性作为品牌下拉菜单，为每个项目分配一个品牌。然后我选择创建一个带有数据库表的自定义管理模块来存储品牌详细信息，从而能够存储每个品牌的额外信息，这些信息会输入属性下拉列表。

# jquery - 在使用 jQuery csvToTable 创建的 html 表中没有可操作的行？

> ID：14881122
> 
> 赞同：2
> 
> 时间：2013-02-14T17:58:25.960
> 
> 标签：jquery, html, html-table, tablesorter, import-from-csv

我是一名新手程序员，希望对以下情况有所帮助。

我能够读取本地外部 CSV 文件并使用 jQuery csvToTable [http://code.google.com/p/jquerycsvtotable/](http://code.google.com/p/jquerycsvtotable/)显示为 HTML 表。我还可以使用 jQuery 插件 tablesorter [http://tablesorter.com/docs/对表格进行排序](http://tablesorter.com/docs/). 现在，我想改善表格的外观和交互性，但我似乎无法操作 HTML 表格中的行，例如，做一些简单的事情，比如在鼠标悬停时突出显示或对奇数行和偶数行应用不同的颜色（例如，我无法让tablesorter 中的'zebra' 小部件工作）。另一方面，我可以修改整个表格的颜色，但这不是真正的目标。所有这一切让我想到，尽管 csvToTable 创建了格式良好的 HTML 表格，但实际上可能根本没有任何表格行可供操作。

我知道由于缺乏经验，我可能会遗漏一些非常基本的东西，如果是这种情况，请提前道歉。任何帮助将不胜感激。谢谢！

仅供参考，我也在使用统一服务器。

CSV：

```
id,name,pop11
1,Allen,28456
2,Brown,106094
3,Center,53153
4,Denver,101345
5,Ellen,64769 
```

HTML：

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src='jquery-1.9.1.min.js'></script> 
<script type="text/javascript" src='jquery.csvToTable.js'></script>
<script type="text/javascript" src='jquery.tablesorter.min.js'></script>

<table id="CSVTable" border="1px solid black" style="position:absolute;top:5px;left:5px;"></table>

<script>

/* Reading CSV data from local external file, creating HTML table, and preparing for tablesorter */

$('#CSVTable').CSVToTable('testdata.csv', 
{ 
   loadingImage: 'loading.gif', 
   startLine: 1,
   headers: ['id', 'name', 'pop11']
}
).bind("loadComplete",function() { 
$(document).find('#CSVTable').tablesorter();
});

/* Applying tablesorter */

$(document).ready(function() 
{ 
    $("#CSVTable").tablesorter();

});

/* Optional below - showing able to change color of the entire table */

/*

$(document).ready(function()
{
    $("table").css("background-color","#1C86EE");
});
*/

</script>
</head>
<body>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T18:03:29.170

你需要一些CSS！试试这个：

```
<style type="text/css">
table tr:nth-child(even) {
    background: aqua;
}
</style> 
```

将其添加到您的页面。对于悬停：

```
table tr:hover {
    background: yellow;
    color: red;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T04:27:29.767

首先，不要初始化 tablesorter 两次。将初始化代码保留在“loadComplete”回调函数中，然后添加`widgets`选项以包含斑马小部件：

```
/* Reading CSV data from local external file, creating HTML table, and preparing for tablesorter */

$('#CSVTable').CSVToTable('testdata.csv', {
    loadingImage: 'loading.gif', 
    startLine: 1,
    headers: ['id', 'name', 'pop11']
}).bind("loadComplete",function() { 
    $(document).find('#CSVTable').tablesorter({
        widgets : ['zebra'] // include the zebra widget
    });
});

/* Applying tablesorter */
// **** Remove the code below ****
// $(document).ready(function() 
// { 
//    $("#CSVTable").tablesorter();
// }); 
```

或者，您可以遵循 watson 的建议并使用 css 设置偶数行的样式。使用 zebra 小部件而不是 css 的唯一真正原因是您的表中有隐藏的行，或者是因为缺乏浏览器支持 (IE7-8)。

# facebook - 流发布 URL 安全性 - 网站/FB 页面 url

> ID：14881123
> 
> 赞同：3
> 
> 时间：2013-02-14T17:58:37.973
> 
> 标签：facebook, facebook-graph-api, stream

我们目前在 iOS 和 Android 游戏应用程序中提供功能以在 FB 上分享分数。我们希望流帖子中的链接能够将人们引导至宣传游戏的网站或 FB 上的游戏页面。

我们在图中调用了一些命令，称为

流发布

在下面提供数据

`{ "link", Settings.FacebookLinkURL }, { "name", Settings.FacebookLinkText }, { "picture", Settings.FacebookThumbURL }, { "caption", msgToUse}`

根据 2013 年 2 月的重大变化

流帖子 URL 安全性：流帖子中的链接必须转到应用的 Canvas 或网站 url

禁用此功能后一切正常，但启用后，使用游戏的网站 URL 或 FB 页面的 URL 会返回错误：

'帖子的链接必须指向应用程序的连接或画布 URL'

有没有办法在不完全集成每个平台的 FB SDK 的情况下解决这个问题？

是否有任何迹象表明这些变化何时会成为永久性的？

# java - 查询过滤到列表 使用 Objectify 3.1

> ID：14881124
> 
> 赞同：0
> 
> 时间：2013-02-14T17:58:41.227
> 
> 标签：java, google-app-engine, objectify

我有课：

```
public class GuideStore {
    ...
    private List<String> privileges;
    ...
} 
```

我使用objectify制作过滤器，例如：

```
Query<GuideStore> query = ofy().query(GuideStore.class);
query.filter("privileges", "any_value"); 
```

我没有得到任何结果。查询是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T19:10:22.170

我认为您在查询中尝试做的事情比您需要做的要多：

```
query.filter("any_value IN", privileges); 
```

但不要忘记，这个操作不会很快。

# ruby - to_proc 方法是什么意思？

> ID：14881125
> 
> 赞同：58
> 
> 时间：2013-02-14T17:58:42.550
> 
> 标签：ruby, syntax, block, symbols, proc

我正在学习 rails 并关注[这个线程](https://stackoverflow.com/questions/1961030)。我被这个`to_proc`方法困住了。我仅将符号视为字符串的替代品（它们类似于字符串，但在内存方面更便宜）。如果我还缺少其他符号，请告诉我。请以简单的方式解释`to_proc`它的含义和用途。

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2013-02-14T18:21:46.500

一些方法需要一个块，并且这种模式经常出现在一个块中：

```
{|x| x.foo} 
```

人们想用更简洁的方式来写。为了做到这一点，他们使用了以下组合：符号、方法`Symbol#to_proc`、隐式类转换和`&`运算符。如果你把`&`一个实例放在参数位置的前面`Proc`，那将被解释为一个块。如果您将除`Proc`实例之外的其他内容与 结合起来`&`，那么隐式类转换将尝试使用在该对象上定义的方法将其转换为`Proc`实例`to_proc`（如果有的话）。在一个`Symbol`实例的情况下，`to_proc`以这种方式工作：

```
:foo.to_proc # => ->x{x.foo} 
```

例如，假设您编写：

```
bar(&:foo) 
```

运算符与不是实例的`&`相结合，因此隐式类转换适用于它，这给出了. 现在适用于此并被解释为一个块，它给出：`:foo``Proc``Symbol#to_proc``->x{x.foo}``&`

```
bar{|x| x.foo} 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2013-02-14T18:38:23.560

解释这一点的最简单方法是举一些例子。

```
(1..3).collect(&:to_s)  #=> ["1", "2", "3"] 
```

是相同的：

```
(1..3).collect {|num| num.to_s}  #=> ["1", "2", "3"] 
```

和

```
[1,2,3].collect(&:succ)  #=> [2, 3, 4] 
```

是相同的：

```
[1,2,3].collect {|num| num.succ}  #=> [2, 3, 4] 
```

to_proc 返回一个 Proc 对象，它通过符号响应给定的方法。所以在第三种情况下，数组 [1,2,3] 调用它的 collect 方法和。succ 是类 Array 定义的方法。所以这个参数是一种简写方式，表示收集数组中的每个元素并返回其后继元素，并从中创建一个新数组，结果为 [2,3,4]。符号 :succ 被转换为 Proc 对象，因此它调用数组的 succ 方法。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-03-12T15:41:13.900

对我来说，最清楚的解释是看到它的简单实现。如果我重新实现 Symbol#to_proc，它可能看起来像这样：

```
class Symbol  # reopen Symbol class to reimplement to_proc method
  def to_proc
    ->(object) { object.send(self) }
  end
end

my_lambda = :to_s.to_proc

puts my_lambda.(1)  # prints '1'; .() does the same thing as .call()
puts my_lambda.(1).class  # prints 'String'

puts [4,5,6].map(&:to_s)  # prints "4\n5\n6\n"
puts [4,5,6].map(&:to_s).first.class  # prints 'String' 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-04-26T05:48:58.487

对于仍然有点困惑的任何人，运行以下代码可能会使事情变得更清晰：

```
class Symbol
  def to_proc
    proc do |obj|
      puts "Symbol proc: #{obj}.send(:#{self})"
      obj.send(self)
    end
  end
end

class Array
  def map(&block)
    copy = self.class.new
    self.each do |index|
      puts "Array.map:   copy << block.call(#{index})"
      copy << block.call(index)
    end
    copy
  end
end

remapped_array = [0, 1, 2].map &:to_s
puts "remapped array: #{remapped_array.inspect}" 
```

这些不是`Symbol.to_proc`or的实际实现`Array.map`，它们只是我用来演示`map &:to_s`类似调用如何工作的简化版本。

# ios - 如何判断使用什么配置文件/签名证书签署 .ipa？

> ID：14881126
> 
> 赞同：64
> 
> 时间：2013-02-14T17:58:43.957
> 
> 标签：ios, xcode, certificate, code-signing, ipa

我有一堆 .ipa 文件，我使用脚本将它们辞职。

那么如何检查配置文件/签名证书以确保他们使用正确的信息呢？

理想情况下，我希望能够获取任何 .ipa 文件并告诉使用哪个配置文件/签名证书对其进行签名。

**背景故事：**我们的企业发行证书即将到期，我想重新签署我们的东西。对于我们在 Xcode 中制作和存档的所有东西来说，这是一个简单的做法，但对于第 3 方供应商制作的可分发文件，我不能这样做。我想避免要求重新签名的 .ipa 文件，因为新的 .ipa*可能*包含未知更改并引入问题，而且他们可能也会向我们收费……但我更担心第一个问题。

由于我们的旧分发证书和新分发证书仍然有效（您得到 6 个月的重叠），我需要能够确认使用了新分发证书，否则当旧分发证书过期并且“辞职”脚本没有时，我会看起来很傻t 实际上做这项工作。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-02-14T22:44:06.140

配置文件有一个可以使用终端命令查看的 UUID：

> 安全 cms -D -i (path_to_your_provisioning_profile)

请参阅命令输出的 UUID 部分，例如：

`<key>UUID</key> <string>A008C022-7B82-4E40-8B37-172763E1E3CC</string>`

Xcode 在 .app 包中插入用于签署应用程序的配置文件。要找到它，请将 .ipa 重命名为 .zip，使用 Finder 解压缩，在 /Payload 中找到 .app 文件。在 .app 文件上“显示包内容”并找到名称为 的配置文件`embedded.mobileprovision`。

使用上述命令转储其权利，并将其与“库”下的 Xcode Organizer > Devices 选项卡 > Provisioning Profile 部分中的配置文件中找到的 UUID 进行比较。您可以使用“在 Finder 中显示”来显示它们在磁盘上的位置。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2015-03-19T21:29:24.623

晚会迟到了......

但是这个工具为我节省了一些时间：[nomad/shenzhen](https://github.com/nomad/shenzhen)

```
$ ipa info /path/to/app.ipa

+-----------------------------+----------------------------------------------------------+
| ApplicationIdentifierPrefix | DJ73OPSO53                                               |
| CreationDate                | 2014-03-26T02:53:00+00:00                                |
| Entitlements                | application-identifier: DJ73OPSO53.com.nomad.shenzhen    |
|                             | aps-environment: production                              |
|                             | get-task-allow: false                                    |
|                             | keychain-access-groups: ["DJ73OPSO53.*"]                 |
| CreationDate                | 2017-03-26T02:53:00+00:00                                |
| Name                        | Shenzhen                                                 |
| TeamIdentifier              | S6ZYP4L6TY                                               |
| TimeToLive                  | 172                                                      |
| UUID                        | P7602NR3-4D34-441N-B6C9-R79395PN1OO3                     |
| Version                     | 1                                                        |
+-----------------------------+----------------------------------------------------------+ 
```

**2020：维护者的更新**

[https://github.com/nomad/shenzhen/blob/master/README.md](https://github.com/nomad/shenzhen/blob/master/README.md)

> 注意：shenzhen 使用 Xcode 6 构建 API，该 API 已弃用近 3 年。如果您的应用使用 Swift 3、watchOS 和其他应用目标，这会导致问题。

> 构建您的 iOS 应用程序的维护替代方法是使用最新 Xcode API 的gym。要分发构建，您可以使用 fastlane。有关如何开始使用的更多信息，请参阅 iOS Beta 部署指南。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-08-21T14:53:07.033

根据 Bobjt 的回答，我使用 IPCU 来获取配置文件的详细信息：

1.  将您的 .ipa 重命名为 .zip
2.  用 Finder 解压
3.  在 /Payload 中找到 .app 文件。
4.  在 .app 文件上“显示包内容”并找到名称为 embedded.mobileprovision 的配置文件。

5.  将 mobileprovisioning 文件拖到 iPhone 配置实用程序中

IPCU 显示配置文件的名称/到期日期等。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-03-26T05:08:27.180

我最终混合使用了 Bobjt 和 HaemEternal 解决方案提案。

1.  查找存档。
2.  显示包内容。
3.  复制 .app 文件
4.  显示 .app 文件的包内容。
5.  将 embedded.mobileprovision 文件复制出来。
6.  运行“安全 cms -D -i (path_to_your_provisioning_profile)”
7.  从步骤 6 中的调用结果中查找 UUID 编号。
8.  打开 Iphone 配置实用程序并查看配置文件以找到具有相同 UUID 编号的配置文件。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-02-14T19:48:16.750

我已经能够使用以下过程成功测试。

1.  将原始 .ipa 安装到设备上。
2.  转到设置->常规->配置文件（请参阅旧配置文件）
3.  从设备中删除应用程序和旧配置文件
4.  辞职应用。
5.  在设备上安装重新签名的应用程序
6.  转到设置->常规->配置文件（请参阅新的配置文件）

这似乎是一种确认配置文件已更新的防弹方法，并且由于配置文件中只有 1 个签名证书......那么我们必须使用新证书进行签名。

（但我还是想找到更好的方法）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-03-19T13:43:44.667

如果您尝试确定是否使用了特定证书来签署 .ipa，您可以执行以下操作：

如果您对 python 感到满意，您可以使用我创建的这个脚本来比较嵌入在 .ipa 中的证书与您拥有的证书。

[https://gist.github.com/ronsims2/1b7a8b9e15898f9406788988106b2f78](https://gist.github.com/ronsims2/1b7a8b9e15898f9406788988106b2f78)

```
python ipa_cert_checker.py /Users/janedoe/Dcouments/Foobar.ipa /Users/janedoe/Dcouments/barfoo.cer 
```

或者，您可以从 Mac 的命令行手动执行脚本执行的操作。

1.  解压缩 IPA 存档。它将生成一个名为“Payload”的文件夹。

    `unzip Foobar.ipa`

2.  阅读嵌入式配置信息。请注意，Payload 目录中的包/文件夹的名称与 .ipa 相同，但扩展名为 .app。

    `security cms -Di Payload/Foobar.app/embedded.mobileprovision`

在上述命令的输出中，证书作为 base64 字符串嵌入到与键“DeveloperCertificates”关联的数组数据元素中。3\. 复制证书（不包括 xml 标签并确保没有多余的空格）并将它们作为文本保存到方便的位置。在本例中，我将其命名为“cert_from_foobar.txt”

4.  Base64 编码已知证书并将输出保存到文件中。

    `base64 barfoo.cer > barfoo.txt`

5.  将已知证书与您保存的嵌入式证书进行比较。 `cmp cert_from_foobar.txt barfoo.txt || echo 'These files are NOT the same.'`

如果它们相同，您**将看不到**任何消息。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-10-26T13:32:40.867

据我所知，以上都无法立即告诉我是否使用了某个分发证书。

以下是对我有用的。

首先，打开 Keychain Access，过滤 Certificates，找到 iPhone 分发证书。

[![钥匙串访问列表证书](../Images/d3a8c52857957cf069d454f94e0d2311.png)](https://i.stack.imgur.com/PK0y8.png)

右键单击分发证书并选择获取信息。出现一个新窗口。

[![显示分发证书序列号的窗口](../Images/b85d855a0bb7354b30f3b4633cd40f2f.png)](https://i.stack.imgur.com/tqm3S.png)

将此十进制序列号转换为十六进制，例如通过选择并复制它，然后将其粘贴到计算器应用程序中（通过菜单 View -> Programmer 切换到程序员模式）：

[![显示长序列号的计算器应用程序](../Images/39bc2d99343be901e39b9a5342d4af4c.png)](https://i.stack.imgur.com/QJsey.png)

然后在右上角将分段控件切换到“16”：

[![计算器应用程序以十六进制显示长序列号](../Images/0f9f36ae847a1385ed127f3ff17a2fe0.png)](https://i.stack.imgur.com/nP7pq.png)

有了这些知识，打开终端并解压缩 IPA，然后切换到 Payload 目录：

```
$ unzip MyApp.ipa
$ cd Payload 
```

提取证书：

```
$ codesign -d --extract-certificates MyApp.app 
```

显示第一个证书的序列号：

```
$ openssl x509 -inform DER -in codesign0 -noout -nameopt -oneline -serial
serial=20DE00FFA05EED03 
```

在这种情况下，十六进制序列与上述证书匹配。

# ruby-on-rails - Aptana Studio：服务器已在运行错误

> ID：14881130
> 
> 赞同：1
> 
> 时间：2013-02-14T17:58:59.370
> 
> 标签：ruby-on-rails, aptana, aptana3

有时当我启动计算机然后打开 Aptana Studio for Rails，然后尝试启动我的服务器时，我收到以下错误...

```
=> Booting WEBrick
=> Rails 3.2.11 application starting in development on http://localhost:3000
=> Call with -d to detach
A server is already running. Check C:/Users/bob/bob_rails_demo/Course_Stats/tmp/pids/server.pid.
=> Ctrl-C to shutdown server
Exiting 
```

当我检查提到的文件时，我打开文件，文件中的所有内容都是......

> 512

有解决办法吗？我看不到任务管理器中运行的其他任何东西。顺便说一句，我正在运行带有 Windows 7 的 rails 3.2.11。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T22:11:26.117

我也有同样的问题，以前没有发生过，所以我相信这是某种错误。我要解决的只是在启动服务器之前删除 C:[pathToApp]\tmp\server.pid 文件中的 server.pid。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T18:06:15.493

这是说PID（进程ID）512正在运行服务器。

转到开始 -> 然后键入`taskmgr.exe`. 然后，转到进程选项卡并查找该进程并将其终止。它可能是一个错误，它在退出时没有正确关闭服务器。

# jsf - Primefaces上传，如何在提前模式下只允许一次上传

> ID：14881131
> 
> 赞同：6
> 
> 时间：2013-02-14T17:59:01.527
> 
> 标签：jsf, file-upload, primefaces

我想知道是否有可能，通过使用 primefaces 提前上传模式来限制用户只上传一个文件，目前我有：

```
 <p:fileUpload fileUploadListener="#{fileUploadController.handleFileUpload}"
                                  mode="advanced" 
                                  multiple="false" 
                                  update="messages"
                                  sizeLimit="100000000" 
                                  allowTypes="/(\.|\/)(gif|jpe?g|png|doc|docx|txt|pdf)$/"
                                  auto="false"/>

                    <p:growl id="messages" showDetail="true"/> 
```

如您所见，我有 muliple ="false" 但用户仍然可以上传多个文件，有什么提示吗？

编辑 ：

```
 <p:fileUpload widgetVar="upload" fileUploadListener="#{fileUploadController.handleFileUpload}"
                              mode="advanced" 
                              multiple="false" 
                              update="messages"
                              label="Select File"
                              sizeLimit="100000000" 
                              allowTypes="/(\.|\/)(gif|jpe?g|png|doc|docx|txt|pdf|html)$/"
                              auto="false"/>

                <p:growl id="messages" showDetail="true"/> 
```

在上面添加了 widgetVar

在我的 js 中

```
<script type="text/javascript"> 
        function Naviagtion()
        {
            //alert("Sent to the printing holding queue, you may close this app now, your work will still print out ");
            window.setTimeout(afterDelay, 500);
            location.href = 'FilesUploaded.xhtml';

        }

        upload.buttonBar.find('input[type=file]').change(function() {
            if (this.value) {
                var files = upload.uploadContent.find('.files tr');

                if (files.length > 1) {
                    files.get(0).remove();
                }
            }
        });
    </script> 
```

但我仍然可以多次上传，我是否朝着正确的方向前进

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-10-09T06:47:44.907

虽然解决它的更好行为应该像@BalusC 建议的那样，但在 primefaces 4.0 中我看到了该属性

```
fileLimit="1" 
```

您可以将其设置为 1 以禁止使用“选择”按钮添加多个文件。当用户添加更多文件时，它只是说

> “超出最大文件数”

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-14T19:39:48.057

`multiple="false"`唯一告诉网络浏览器在特定于浏览器的浏览对话框中禁用多个文件*选择*。但是，它确实不会阻止最终用户多次单击 PrimeFaces 文件上传部分的*选择*按钮来多次浏览和添加单个文件。

您最好的选择是引入一些 JS/jQuery 以在选择新文件时删除所有以前选择的文件。如果您已经给出`<p:fileUpload>`了 a `widgetVar="upload"`，那么应该这样做：

```
$(document).ready(function() {
    upload.buttonBar.find('input[type=file]').change(function() {
        if (this.value) {
            var files = upload.uploadContent.find('.files tr');

            if (files.length > 1) {
                files.get(0).remove();
            }
        }
    });
}); 
```

在 PrimeFaces 3.5 上为我工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-11T13:29:49.470

如果您将文件限制设置为 1 并且在文件加载时发生了一些错误 - 您必须刷新页面才能再次进行文件上传工作。如果您不刷新页面，则会收到超出限制的错误消息。

我使用 JS 解决方案，就像在接受的答案中一样，但必须更改选择器，因为 wigetWar 对我不起作用。

在我看来，我有：

```
<p:fileUpload id="objectUpload"... /> 
```

在我的 portlet 主题中，带有文件的表具有“ui-fileupload-files”的 css 类。

```
$(document).ready(function() {
  $("div[id*='objectUpload']").find('input[type=file]').change(function() {

    if (this.value) {
        var files = $("div[id*='objectUpload']").find('.uifileupload-files tr');        
        if (files.length > 1) {     
            files.get(0).remove();
        }
    }
  });
}); 
```

希望它有所帮助。我使用了 PrimeFaces 6.0

# c - 无法为 Arduino 编译多个文件

> ID：14881145
> 
> 赞同：0
> 
> 时间：2013-02-14T18:00:01.323
> 
> 标签：c, makefile, arduino, avrdude

如果代码在多个文件中，我在为 Arduino 编译代码时遇到问题。我过去一直在做的是有一个脚本连接另一个目录中的文件和`make`那里的项目。我希望能够直接从我的构建文件夹中编译，而不必费劲地确保所有内容都以正确的顺序定义等。

我正在使用`avrdude`从 Linux 命令行编译，因为 Arduino IDE 不能很好地与我的窗口管理器配合使用。当我使用多个文件（使用适当`#include`的语句）时，我得到以下性质的错误，但对于我的所有方法和变量。

```
./../lib/motor.ino:3:21: error: redefinition of ‘const long unsigned int MOVE_DELAY’
./../lib/motor.ino:3:21: error: ‘const long unsigned int MOVE_DELAY’ previously defined here 
```

唯一`MOVE_DELAY`使用的其他地方是`void loop()`函数内部，它不会在那里重新定义它。如果将代码连接到一个文件中并`make`在该目录中运行，该代码也可以正常编译，但如果它们位于包含包含的单独文件中，则不能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T20:41:38.807

我相信您的问题可以通过使用“extern”前缀或外部声明对象来解决。例如。我经常使用 SdFat 库，它既包含在我的主草图中，也包含在其他库中。

```
/**
 * \file test.ino
 */
#include <SdFat.h>
#include <foo.h>
SdFat sd;
... 
```

我也在其他库中使用相同的对象，例如 foo.h。

```
/**
 * \file foo.h
 */
#include <SdFat.h>
extern SdFat sd;
... 
```

如果不是“extern”前缀，它会像你的那样出错，因为“sd”不能存在两次。extern 前缀告诉链接器不要进行新的实例化，而是链接到其他地方的外部实例。

# php - 参考另一个文本输入的值自动完成文本输入

> ID：14881146
> 
> 赞同：0
> 
> 时间：2013-02-14T18:00:01.620
> 
> 标签：php, javascript, jquery

我有两个字段，其中一个有[jQuery autoComplete 插件](http://www.mix26.com/demo/ajax-autocomplete/test.php)。

```
<input type='text' name='primary_diagnosis' id='icd1-diagnosis'/>
<input type='text' name='ICD_No1' id='icd1-num' />

$(document).ready(function(){
    $("#icd1-diagnosis").autocomplete("autocomplete-icd.php", 
    {
        selectFirst: true
    });
}); 
```

一旦为第一个选择了一个值，有没有办法自动填充第二个文本输入？例如，第一个文本输入选择“登革热[经典登革热]”，然后在数据库中查询某个值，得到“A90”作为第二个文本输入的值。

这是 autocomplete-icd.php

```
<?php
    include('config.php');
    $q=$_GET['q'];
    $my_data=$q;

    $sql=mysql_query("SELECT col9 FROM tb_data_icd WHERE col9 LIKE '%$my_data%' ORDER BY col9",$con);
    if($sql)
    {
        while($row=mysql_fetch_array($sql))
        {
            $col9=$row['col9'];
            echo "$col9"."\n";
        }
    } 
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T18:49:30.723

您应该能够使用 change 事件触发一些 javascript 来更新第二个输入的值。像这样的东西：

```
$("#icd1-diagnosis").change(function(){
    //retrieve your value
    var val = 'sample';
    $('#icd1-num').val(val);
}); 
```

# java - 如何在arraylist中找到一个值

> ID：14881151
> 
> 赞同：0
> 
> 时间：2013-02-14T18:00:06.490
> 
> 标签：java, arrays

有没有办法让我检索值 4500？我知道我可以将 collection.max 或 collection.min 用于最高和最低，但我如何获得两者之间的值？谢谢

```
int value = 4000;

for(int i = 0; i < Array.size();i++){
        Array.get(i);

    if (value < Array.get(i) && value <= Array.get(i))
    {
        value=????;

    }

Array.add(1000);
Array.add(2000);
Array.add(3000);
Array.add(4500);    
Array.add(5000);
Array.add(8000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T18:01:42.043

如果数据已排序，则执行 a，`BinarySearch`否则执行 a`LinearSearch`

例如

```
Collections.binarySearch(array,value); 
```

线性搜索：

```
int size = array.size();
for(int i=0;i<size;i++){
   if(array.get(i) >= value){       
      if ( i + 1 < size){
         return array.get(i+1);  
      }
      else {
         // No element found                    
      }
} 
```

# virtualization - 如何创建虚拟设备，如位名和交钥匙 linux

> ID：14881155
> 
> 赞同：0
> 
> 时间：2013-02-14T18:00:21.680
> 
> 标签：virtualization, bitnami

我有一个问题，我有点像 linux 用户类型的程序员，但我不明白如何开发自己的虚拟设备，类似于 bitnami 和交钥匙，如果有办法请告诉我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:13:22.707

看看[TKLPatch](http://www.turnkeylinux.org/docs/tklpatch)，这是一个简单的工具，用于自定义和扩展 TurnKey Linux 库中的 100 多个设备中的任何一个。生成的补丁可用于生成可安装在 VM 或真实硬件上的 ISO。

如果您有任何问题或需要帮助，请随时在 TurnKey 论坛发帖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-18T06:04:16.513

**更新信息** 希望我的死灵帖子能增加一些价值......

新的 TurnKey 构建工具是[TKLDev](https://www.turnkeylinux.org/docs/tkldev)。它使用与 TKLPatch 类似的范例，但不需要您从 ISO 开始；它完全从源代码构建。

只要您可以编写安装脚本（并且几乎总是有一种方法可以）并且它可以在 Debian 上运行，那么您就可以在不同的构建类型（包括 OVA、VMDK、混合 ISO）中构建自己的软件设备等）使用 TurnKey Linux 的[TKLDev](https://www.turnkeylinux.org/docs/tkldev)构建引擎。它（尚）不支持的主要 VM 平台是 Hyper-V，但安装了 ISO。

# iphone - 使用推送笔记找出应用程序是否被删除

> ID：14881157
> 
> 赞同：3
> 
> 时间：2013-02-14T18:00:26.473
> 
> 标签：iphone, ios, ipad, push-notification

我正在为我的 IOS APP 使用推送通知。我只是想知道使用推送笔记我们可以发现应用程序是否已从设备中删除。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T18:15:11.777

Apple 为此提供了反馈服务[这里](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/CommunicatingWIthAPS/CommunicatingWIthAPS.html#//apple_ref/doc/uid/TP40008194-CH101-SW3)是文档的链接，基本上您可以使用他们的反馈服务来检查推送通知令牌是否仍然有效......希望这会有所帮助

丹尼尔

# cuda - 我怎样才能使这个代码cuda（cpu代码到cuda代码）

> ID：14881160
> 
> 赞同：-1
> 
> 时间：2013-02-14T18:00:34.753
> 
> 标签：cuda

我有一个c ++程序，我想将此代码制作为cuda，通常我正在寻找一种方法来做到这一点我的假设是：1-全局变量2-全局数组

问题 #1：我是否需要在全局中定义设备数组，如主机数组？

问题#2：只能使用设备阵列吗？

问题#3：我想要一个优化代码，并行使用循环更好？

Func_2() 对我来说很难转换为 cuda，请有人展示我的简化代码

简化的代码是：

```
#define R 16
#define C 32
#define run_t 60
#define max 3000

double array1 [R][C];
double array2 [R];
double array3 [R];
double array4 [C];

double r;
double min;

int main()
{
    int iter,run,j;
    double mean;
    srand(time(NULL));

    for (run=0;run<run_t;run++)// 60 Loop
    {

    Func_1();
    Func_2();
    for (iter=0;iter< max ;iter++)//3000 Loop
        {
        Func_3();
        Func_4();
        Func_5();
        Func_6();
        func_7();
        }
    }
}

double Func_00(array4[C])
{
    double top=0;
    for(int j=0;j<C;j++)
        top=array4[j]*array4[j]
    return top;
}
void Func_0(int index)
{
    for(int j=0;j<C;j++)
    {
        r= rand()+1/2+index;//for example   
    }
    array2[index]= Func_00(array4[]);
}

void Fun_1()
{
    int i;
    for(i=0;i<R;i++)
    {
        Func_0(i);
    }
    for(i=0;i<C;i++)
    {
        array4 = array1[0][i];
    }
}

void Fun_2()
{
    int i,j;
    for(i=0;i<R;i++)
    {
        if(array2[R]<min)
        {
            min=array2[i];
            for(j=0;j<C;j++)
                array4[j]=array1[i][j];
        }
    }
}

void Func_3(){}
void Func_4(){}
void Func_5(){}
void Func_6(){}
void Func_7(){} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T18:05:13.130

开始学习 CUDA 的好地方是[Nvidia 的 CUDA 教育网站](https://developer.nvidia.com/cuda-education-training)

将某些东西移植到 CUDA 取决于您的确切需求，并且要简明扼要地回答会很复杂。

# c# - 当我运行 C# 参数化查询时，它会超时。具有硬编码参数的相同查询可以正常工作

> ID：14881161
> 
> 赞同：3
> 
> 时间：2013-02-14T18:00:38.690
> 
> 标签：c#, sql-server

我想获取 Text 列包含字符串过滤器的所有 ID。

当我运行这个参数化查询时，它会超时：

```
SqlCommand cmd =
new SqlCommand("SELECT ID FROM TableName WHERE Text LIKE @filter", conn);
 if (filter != null)
 {
    cmd.Parameters.AddWithValue("@filter", "%" + filter + "%");
    SqlDataReader reader;
    reader = cmd.ExecuteReader(); //Locks up here!
 } 
```

当我运行相同的代码，但使用硬编码的搜索参数时，它会及时返回我想要的结果：

```
 SqlCommand cmd = 
 new SqlCommand("SELECT ID FROM TableName WHERE Text LIKE '%patternToMatch%'", conn);
 SqlDataReader reader;
 reader = cmd.ExecuteReader(); 
```

这两个查询在哪些方面有所不同？我认为参数化不仅仅是简单的文本替换。

澄清：我正在与 Microsoft SQL Server 2012 服务器交谈。

新信息：仅当搜索过滤器超过 6 个字符时才会超时。

编辑：解决了！我将搜索设置为存储过程：

```
CREATE PROCEDURE TextSearch 
@filter varchar(MAX) = ''
AS
BEGIN
    SET NOCOUNT ON;
    SELECT DISTINCT ID FROM TableName WHERE [Text] LIKE '%' + @filter + '%'
END
GO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T18:50:35.153

当使用带有 like 运算符的参数化查询时，您需要单引号通配符：

```
new SqlCommand("SELECT ID FROM TableName WHERE Text LIKE '%' + @filter + '%' ", conn); 
```

然后像往常一样添加参数：

```
cmd.Parameters.AddWithValue("@filter", filter); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-14T19:17:35.880

解决了！我将搜索设置为存储过程：

SQL：

```
CREATE PROCEDURE TextSearch 
@filter varchar(MAX) = ''
AS
BEGIN
    SET NOCOUNT ON;
    SELECT DISTINCT ID FROM TableName WHERE [Text] LIKE '%' + @filter + '%'
END
GO 
```

C＃：

```
 SqlCommand cmd = new SqlCommand("TextSearch", conn);
 cmd.CommandType = CommandType.StoredProcedure;
 cmd.Parameters.Add(new SqlParameter("@filter", filter)); 
```

现在它以我期望的速度执行所有长度的查询。

# python - 元组、最大值和干净迭代

> ID：14881162
> 
> 赞同：1
> 
> 时间：2013-02-14T18:00:40.467
> 
> 标签：python, tuples

这更多是出于好奇，因为我所拥有的东西是有效的。实现这一点的“最干净”的方法是什么？给定一个像这样的对元组列表`[(Object, int), (Object1, int1), ... ]`，找到最大 int 并返回与该值关联的 int 和对象。

我这样做了“简单的出路”：

```
bestObject, bestVal = None, 0
for i in range(len(tuple_list)):
    obj, val = tuple_list[i]
    if val > bestVal:
        bestObject, bestVal = obj, val
return bestObject, bestValue 
```

可以做得更好吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T18:03:58.977

该`max`函数提供了一个`key`参数，您可以在其中准确指定要在比较中使用的内容。例如：

```
In [1]: class MyObject(object):
   ...:     def __init__(self, a):
   ...:         self.a = a
   ...:         

In [2]: a = MyObject('something')

In [3]: b = MyObject('something else')

In [4]: c = MyObject('another thing??')

In [5]: tups = [(a, 1), (b, 5), (c, 2)]

In [6]: max(tups, key=lambda x: x[1])
Out[6]: (<__main__.MyObject at 0x26c17d0>, 5) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T18:06:11.187

Max 将比较元组中的第一项，那么如何：

```
max_val, max_obj = max([(val, obj) for obj, val in tuple_list])
return max_obj, max_val 
```

# python - 用python从转义字符中清除字符串

> ID：14881164
> 
> 赞同：1
> 
> 时间：2013-02-14T18:00:44.917
> 
> 标签：python, string, python-2.7, sqlalchemy

我从 JSON 格式的 webapp 获取数据，其中包括各种 python 转义字符，包括“\n”和“\r”

在将数据输入 sql 之前，我构建了一个小函数来清除有问题的字符和空格中的数据。（有问题的字符对使用 sql 的另一个应用程序有问题）。

当前的功能是：

```
bad_tokens = [",",";",".","!","'",".","-",'"',"@",r"\n",r"\r"]

from types import StringType, UnicodeType

def sql_text(sqltext, trim = None):
    '''
    helper function to clean text inserted to sql from Priority problematic characters specified bad_tokens

    '''
    thistype = type(sqltext)
    if thistype not in (StringType, UnicodeType):
        return sqltext

    sqltext = sqltext.strip() #priority can't handle string starting with space
    for token in bad_tokens:
        sqltext = sqltext.replace(token,"")
    sqltext = " ".join([i for i in sqltext.split(" ") if i != ""]) #priority can't handle string containing double spaces

    if trim:
        sqltext = sqltext[0:trim]
    return sqltext 
```

这种方法适用于常规字符，但似乎无法清除 \n 和 \r 转义符号。将 r （作为原始字符串）添加到转义符号也无济于事。

谢谢您的帮助

**编辑**：我使用的是 orm (sqlalchemy)，所以我不直接访问 DBApi，虽然 sqlalchemy 会自动进行很多转义，因为 sql 将这些字符视为合法，sqlalchemy 也是如此。回到正轨 - 我需要正确清洁琴弦。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-14T18:06:19.480

```
import re

newbuff = re.sub("\n|\r| |moreoptions","",yourbuff) 
```

# dns - DNS 协议、消息

> ID：14881166
> 
> 赞同：-2
> 
> 时间：2013-02-14T18:00:45.800
> 
> 标签：dns, udp, application-layer

在 DNS 消息格式中，除了头部字段外，还有 4 个部分：

-问题 -答案 -权威 -附加信息。

DNS 服务器，谁或什么填充了这些部分：权限和附加信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T18:30:01.897

*   **权威部分**告诉我们哪些 DNS 服务器可以为我们的查询提供权威答案。
*   **附加部分**通常包括授权部分中列出的 DNS 服务器的 IP 地址。

# javascript - SlickGrid onCellchange

> ID：14881168
> 
> 赞同：2
> 
> 时间：2013-02-14T18:00:55.107
> 
> 标签：javascript, slickgrid

我在页面中有一个网格，我想将 onCellchange 功能添加到其中，但是当我添加它时，它给了我一个 JS 错误说：

```
oppLineGrid.onCellchange.subscribe(function (e, args) {    
       Uncaught TypeError: Cannot call method 'subscribe' of undefined
            alert('changed');
        }); 
```

这是我拥有的代码，排序功能正在工作，我认为 onCellchange 只是没有按正确的顺序添加。非常感谢。

```
function loadOppLineGrid(data) {
    oppLineGrid = new Slick.Grid("#oppLineGrid", data, oppLineColumns, oppLineOptions);

    oppLineGrid.onCellchange.subscribe(function (e, args) {
        alert('changed');
    });

    oppLineGrid.onSort.subscribe(function (e, args) {
        var cols = args.sortCols;

        oppLineGridData.sort(function (dataRow1, dataRow2) {
            for (var i = 0, l = cols.length; i < l; i++) {
                var field = cols[i].sortCol.field;
                var sign = cols[i].sortAsc ? 1 : -1;
                var value1 = dataRow1[field], value2 = dataRow2[field];
                var result = (value1 == value2 ? 0 : (value1 > value2 ? 1 : -1)) * sign;
                if (result != 0) {
                    return result;
                }
            }
            return 0;
        });
        oppLineGrid.invalidate();
        oppLineGrid.render();
    });
    oppLineGrid.init();

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T18:09:10.987

Javascript 是一种区分大小写的语言。事件名称为`onCellChange`（大写`C`）：

```
oppLineGrid.onCellChange.subscribe(function(e, args) {
    alert('changed');
}); 
```

# c#-4.0 - 使用 NAnt 在 C# 项目中自动切换 Web 引用

> ID：14881172
> 
> 赞同：0
> 
> 时间：2013-02-14T18:01:06.917
> 
> 标签：c#-4.0, nant, web-reference

问题：我在 Visual Studio 2010 中有一个带有 Web 引用的 C# 4.0 项目。我有两组 Web 引用，但我不想同时使用它们。我希望能够自动删除所有当前的，添加所有新的，然后对它们中的每一个执行相当于“更新网络参考”的操作。我什至很难找到从哪里开始。

在四处寻找之后，我找到了 NAnt，看起来它可能能够完成我所追求的（使用 wsdl 命令），但我在陌生的领域。

问题：NAnt 是适合这项工作的工具吗？如果我学会使用它会浪费时间吗？有没有我没有看到的简单解决方案？我只是在寻找一些指导而不是敲定的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:36:31.870

如果有人感兴趣：

在做了更多研究之后，我想我将使用一些组合 [MSBuild](http://msdn.microsoft.com/en-us/library/0k6kkbsd%28VS.100%29.aspx "微软构建")， [如何从 C# 调用 MSBuild](https://stackoverflow.com/questions/536539/how-to-call-msbuild-from-c-sharp)，以及 [如何在构建时自动更新 Web 引用？](https://stackoverflow.com/questions/159599/how-do-i-automatically-update-a-web-reference-at-build-time)

完成后，我将使用我的解决方案更新此答案。

# database - 在 SQL Server 2008 R2 中打开数据库 .bak 文件

> ID：14881173
> 
> 赞同：2
> 
> 时间：2013-02-14T18:01:13.237
> 
> 标签：database, sql-server-2008-r2, sql-server-2000, database-backups

这是我得到的错误：

> 数据库备份在运行版本 8.00.2050 的服务器上。该版本与运行版本 11.00.2218 的此服务器不兼容。在支持备份的服务器上恢复数据库，或使用与该服务器兼容的备份。

我知道这个 .bak 文件不会与 SQL Sserver 2008 r2 兼容，因为我查找了该特定版本的 SQL Server 版本，它是 SQL Server 2000。但是有第三方解决方案吗？我尝试安装 SQL Server 2000，但没有安装。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T18:04:48.720

11.00.2218 是 SQL Server 2012，而不是 SQL Server 2008 R2。

要将 SQL Server 2000 数据库恢复到 SQL Server 2012，您需要先在 2005、2008 或 2008 R2 服务器上恢复它，从那里备份，然后将其恢复到 SQL Server 2012 服务器。

您可以通过以下方式做到这一点：

1.  安装任何这些版本的评估版
2.  查找已在其他地方安装的现有实例
3.  只要 (a) 数据库大小 < 10GB 并且 (b) 您没有使用 Express 中不支持的任何功能，就可以安装 Express Edition

# assembly - 与 push 做同样事情的指令序列

> ID：14881174
> 
> 赞同：4
> 
> 时间：2013-02-14T18:01:26.263
> 
> 标签：assembly, x86, stack, x86-16

我想知道是否可以（如果可以，如何）编写一系列与`push`. 例如，如果 的内容`ax`是 1200 ，而我做了 a `push ax`，我可以使用什么其他指令来完成什么`push ax`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T18:39:31.790

其他一些答案`[sp]`用于堆栈寻址，但在 16 位模式下是不可能的，在 32 位或 64 位模式下也是不可能的。但是，在 32 位模式下可以使用`[esp]`，在 x86-64 中可以`[rsp]`用于内存寻址，但在 16 位模式下，没有使用`sp`. 有关16 位模式下可能的内存寻址模式，请参见[此处。](http://sandpile.org/x86/opc_rm16.htm)

所以，你需要做的是：将 的值存储在`bp`某处，复制`sp`到`bp`中，然后`bp`用于寻址堆栈，最后恢复 的原始值`bp`。

如果您有存储的地方`bp`，那很容易（这是在 YASM/NASM 语法中）：

```
mov [bp_storage], bp
sub sp,2
mov bp,sp
mov [bp],ax
mov bp,[bp_storage]

...

bp_storage dw 0 
```

使用寄存器而不是像`bp_storage`这里这样的内存地址也很简单。

**编辑：**添加了不修改标志的版本（如下），因为`push`也不修改标志。

上面的代码修改了标志，而`push ax`没有修改任何标志。这可以通过首先存储`ah`到内存中来解决，然后将标志加载到`ah`with`lahf`中，然后将标志存储`ah`到内存中，然后如上所述修改堆栈，然后`ah`通过 using从内存中恢复标志`sahf`，最后`ah`从内存中恢复。

**编辑：**`push ax`要在不更改标志的情况下进行模拟，`ah`必须在之前保存`lahf`并在之前加载`mov [bp],ax`。固定的。

```
mov [ah_storage],ah
lahf
mov [flags_storage],ah
mov [bp_storage],bp
sub sp,2
mov bp,sp
mov ah,[ah_storage]
mov [bp],ax
mov bp,[bp_storage]
mov ah,[flags_storage]
sahf
mov ah,[ah_storage]

...

bp_storage    dw 0
ah_storage    db 0
flags_storage db 0 
```

[`sub`](http://web.itu.edu.tr/kesgin/mul06/intel/instr/sub.html)修改`AF`, `CF`, `OF`, `PF`, `SF`, `ZF`, 而仅[`lahf`](http://web.itu.edu.tr/kesgin/mul06/intel/instr/lahf.html)加载和[`sahf`](http://web.itu.edu.tr/kesgin/mul06/intel/instr/sahf.html)存储`AF`, `CF`, `PF`, `SF`, `ZF`(no `OF`)。但是，`sp`在正常的堆栈使用中永远不应该溢出。

但是，如果你不能访问内存，并且想使用堆栈来存储`bp`你可以这样做，但是如果你没有可用的寄存器可以使用，事情就会变得复杂。但是，如果您使用的是实模式操作系统，您可以使用`cli`、交换`bp`和来阻止中断`sp`，`bp`用于堆栈寻址、再次交换`bp`和 并`sp`再次使用 允许中断`sti`。

**编辑：**`sp`需要减去 2 来模拟的值`push ax`。固定的。此版本不修改标志（中断标志除外）。

```
cli
xchg bp,sp
lea bp,[bp-2]
mov [bp],ax
xchg bp,sp
sti 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T18:05:19.950

至少如果记忆有用，它大致相当于：

```
sub sp, 2
mov [sp], ax 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T18:08:11.670

从 sp 中减去一个等于所需数据写入大小的值，然后在堆栈上移动/写入所需的对象。编译器一直在做这种事情。查看 -S 输出示例。如果您这样做，请注意原子/线程问题...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T18:09:52.177

如果我没有忘记 Intel 语法：

```
lea sp, [sp-2]
mov [sp], ax 
```

我过去常常`lea`避免触摸`FLAGS`（既不`push`也不触摸它们，但是`mov`并且这样做）。`lea``sub``dec`

**编辑：**事实证明我忘记了更重要的事情：没有`[sp]`寻址模式。正确的答案是@nrz 的答案，我的答案可以应用于80386`esp`及更高版本`eax`（将是`lea esp,[esp-4]`）。

# java - Neo4j 遍历 API 限制？

> ID：14881176
> 
> 赞同：1
> 
> 时间：2013-02-14T18:01:45.850
> 
> 标签：java, neo4j, graph-traversal

对于给定的一组公司节点，我们正在尝试使用 Traversal API 仅检索提供产品节点列表中包含的所有产品的公司节点。之前使用 Cypher 的尝试效果不佳。在这个例子中：

```
Company 1 provides product A and B
Company 2 provides product A and B and C
Company 3 provides product A and C 
```

如果所有 3 家公司都包含在公司列表查询中，并且产品 A 和 C 在查询的产品列表中，我们希望只返回公司 2 和 3，因为它们提供产品 A 和 C。这是我们的查询：

```
for ( Path position : Traversal.description()
.depthFirst()
.uniqueness(Uniqueness.NODE_GLOBAL)
.relationships(Rels.PROVIDES_PRODUCT, Direction.OUTGOING)
.evaluator((Evaluator) Evaluators.includeWhereEndNodeIs(productNodes))
.traverse(companyNodes)) 
```

如果我们使用 ，`Evaluator.includeWhereEndNodeIs(productNodes)`我们将返回列表中提供任何产品的`productNodes`所有公司（以上示例中的所有 3 家公司）。如果我们使用`Evaluators.includeIfContainsAll(productNodes)`评估器，如果产品节点列表中有多个产品，我们将不会返回任何公司节点。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T20:00:21.580

我不确定它是否可能在一个语句中，但你可以嵌套它们。Company2 和 Company3 将在以下情况下被退回：

```
for (final Path position : Traversal
            .description()
            .depthFirst()
            .uniqueness(Uniqueness.RELATIONSHIP_LEVEL)
            .relationships(RelType.PROVIDES_PRODUCT, Direction.OUTGOING)
            .evaluator(
                    (Evaluator) Evaluators.endNodeIs(Evaluation.INCLUDE_AND_CONTINUE, Evaluation.EXCLUDE_AND_CONTINUE,
                            productA)).traverse(company1, company2, company3)) {
        for (final Path position2 : Traversal
                .description()
                .depthFirst()
                .uniqueness(Uniqueness.RELATIONSHIP_LEVEL)
                .relationships(RelType.PROVIDES_PRODUCT, Direction.OUTGOING)
                .evaluator(
                        (Evaluator) Evaluators.endNodeIs(Evaluation.INCLUDE_AND_CONTINUE, Evaluation.EXCLUDE_AND_CONTINUE,
                                productC)).traverse(position.startNode())) {
            System.out.println(position2.startNode());
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T16:34:24.080

(company)-[:PROVIDES_PRODUCT]->(product) 总是只有一个级别吗？在这种情况下，使用这样的简单循环就可以了：

```
Set<Node> 公司 = new HashSet<Node>( asList( companyNodes ) );
对于（节点产品：productNodes）
{
    Set<Node> 公司ForThisProduct = new HashSet<Node>();
    对于（关系 rel：product.getRelationships（PROVIDES_PRODUCT，INCOMING））
        公司ForThisProduct.add(rel.getStartNode());
    公司.retainAll( CompaniesForThisProduct );
}

```

我很快用你的数据集破解了你的例子，它工作得很好。

# c# - 使用多种形式

> ID：14881177
> 
> 赞同：3
> 
> 时间：2013-02-14T18:01:48.043
> 
> 标签：c#, winforms

好吧，我正在创建一个程序，在该程序中我需要一个单独的窗口来显示日志。

我设法使用

```
form1.ShowDialog(); 
```

但不幸的是，这会将焦点转移到显示的表单上，并且用户无法单击前一个表单，直到他\她关闭它。

问题：我如何同时使用 2 个单独的表单（一个用于主 ui，一个用于记录器）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T18:02:50.343

您将使用`form1.Show()`而不是`ShowDialog()`.

该`ShowDialog`方法旨在将表单显示为[模态对话框](http://en.wikipedia.org/wiki/Modal_window)，（根据设计）将阻止原始表单，直到`form1`被关闭。

`Show`另一方面，该方法只是将新表单作为普通窗口打开。

# scala - 替换子类中方法参数的特化

> ID：14881185
> 
> 赞同：1
> 
> 时间：2013-02-14T18:02:06.670
> 
> 标签：scala, polymorphism

我想创建一个框架，用户可以在其中对基类进行子类化，`Node`该基类能够根据当前实例状态和另一个实例的属性（参数 n）生成消息（此处为整数）。用户应该能够根据当前实例*的类和参数 n 的类*`getMessage`来专门化该方法以生成不同的消息，如下面的代码所示。

 *该函数`importantAlgorithm`使用这些节点生成的消息来计算最终结果。

```
// Classes defined by the framework //
abstract class Node {
    def getMessage(n: Node) : Int
}

def importantAlgorithm(lstNodes1: List[_ <: Node], lstNodes2: List[_ <: Node]) = {

    val results = lstNodes1.zip(lstNodes2).map({case (n1, n2) =>
        // I would like to get the proper message *BASED ON
        // THE TYPE OF N1 and N2*
        val message = n1.getMessage(n2)
        // Do some work with the message
        //...
        //...
        })
    //...
}

// Classes defined by framework users //
class ItemNode(val p: Int) extends Node {
    override def getMessage(n: UserNode) = {
        // Compute message based on this ItemNode member variables
        // and n (instance of UserNode) member variables
    }
    override def getMessage(n: ItemNode) = {
        // Compute message based on this ItemNode member variables
        // and n (instance of UserNode) member variables
        // The algorithm is different from the algorithm
        // used in the previous method
    }
}

class UserNode extends Node {
    override def getMessage(n: OtherNode) = {
        // Compute message. Same idea as above
    }
}

class OtherNode extends Node { 
    override def getMessage(n: UserNode) = {
        // Compute message. Same idea as above
    }
}

// The user should be able to use the framework this way
importantAlgorithm(List(new UserNode(), new ItemNode(236), new OtherNode(),
   List(new OtherNode(), new ItemNode(542), new UserNode())) 
```

当然，Scala 不允许在子类中特化方法的参数，上述代码无法编译。我可以使用`isInstanceOf[]`或 RTTI，但我觉得我没有正确思考并且没有正确设计我的框架。**如何用更简单、更清洁的解决方案替换上面代码示例中描述的机制？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T18:09:00.663

我认为你需要的是类似的东西

```
trait Node {
  type AppropriateSender <: Node
  def getMessage(n: AppropriateSender): Int
}

class UserNode extends Node {
  type AppropriateSender = OtherNode
  def getMessage(n: OtherNode) = ???
}

... 
```

但是，类型擦除会导致一些问题，因此您无法检查`n1`和`n2`（可能是类型标签？）的兼容性，但至少您现在可以以干净的方式实现您的人员。另一个问题是您如何处理某些节点类型具有超过 1 个适当的发送者类型的事实（这可以通过实现[raw union type](https://stackoverflow.com/questions/3508077/does-scala-have-type-disjunction-union-types)来解决）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T18:56:25.943

这样就够了吗？（它编译...）

```
/* Classes defined by the framework */
abstract class Node {
    def getMessage(n: Node): Int
}

def importantAlgorithm(lstNodes1: List[Node], lstNodes2: List[Node]) {
  lstNodes1.zip(lstNodes2).map {
    case (n1, n2) =>
      // I would like to get the proper message *BASED ON
      // THE TYPE OF N1 and N2*
      val message = n1.getMessage(n2)
  }
}

/* Classes defined by framework users */
class   ItemNode(val p: Int)
extends Node
{
  def getMessage(n: Node): Int =
    n match {
    // Compute message based on this ItemNode member variables
    // and n (instance of UserNode) member variables
      case un: UserNode => 0
      case in: ItemNode => 1
      case xn: Node     => -1
  }
}

class   UserNode
extends Node
{
  def getMessage(n: Node): Int =
    n match {
      case on: OtherNode => 23
      case xn: Node     => -1
    }
}

class   OtherNode
extends Node
{
  def getMessage(n: Node): Int =
    n match {
      case xn: Node => 514
    }
}

// The user should be able to use the framework this way
importantAlgorithm(List(new UserNode(),
                        new ItemNode(236),
                        new OtherNode()),
                   List(new OtherNode(),
                        new ItemNode(542),
                        new UserNode())) 
```*

# objective-c - 如何摆脱由于通过 NSManagedObjects 迭代而产生的警告？

> ID：14881187
> 
> 赞同：0
> 
> 时间：2013-02-14T18:02:14.283
> 
> 标签：objective-c, cocoa, nsmutabledictionary

我有一个`NSArrayController`充满`NSMutableDictionary`对象。以下代码可以正常工作，但我想摆脱我收到的编译器警告。`Collection expression type 'NSManagedObject *' may not respond to 'countByEnumeratingWithState:onjects:count:'` 据我了解，我收到此错误是因为数组控制器内部可能还有不同类型的对象，它们没有键值。但就我而言，我只使用可变字典，所以应该没问题。

这是我的代码：

```
- (IBAction)getlist:(id)sender{
    checkedchecks = 0;
    for (NSManagedObject *a in imagescontroller.arrangedObjects)
    {
        for (NSString* key in a) {

            if ([[NSString stringWithFormat:@"%@",[a valueForKey:key]] isEqualToString: @"1"])
            {
                checkedchecks += 1;
            }
        }
    }
    NSAlert *alert = [[NSAlert alloc] init] ;
    [alert setMessageText:[NSString stringWithFormat:@"%ld",(long)checkedchecks ]];
    [alert runModal];
} 
```

我怎样才能摆脱这个烦人的警告？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T18:06:02.143

你为什么输入`a`一个`NSManagedObject *`如果它是一个`NSMutableDictionary *`？

```
for (NSMutableDictionary *a in imagescontroller.arrangedObjects) 
```

可能是你想要的。

# c++ - 是否可以在不调用析构函数的情况下删除 C++ 中的对象？

> ID：14881189
> 
> 赞同：11
> 
> 时间：2013-02-14T18:02:29.203
> 
> 标签：c++, memory-management, destructor

我有一个对象，里面有一些指针。析构函数调用`delete`这些指针。但有时我想删除它们，有时我不想。所以我希望能够在*不*调用析构函数的情况下删除对象。这可能吗？

编辑：我意识到这是一个可怕的想法，没有人应该这样做。尽管如此，我还是想这样做，因为它会使一些内部函数更容易编写。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-14T19:03:46.557

运算符对`delete`传递给它的对象做了两件事：

*   调用适当的析构函数。
*   调用释放函数，`operator delete`.

因此，在不调用析构函数的情况下删除对象意味着您只想调用`operator delete`该对象：

```
Foo *f = new Foo;
operator delete(f); 
```

`operator delete`是一个普通的函数调用，并且完成了通常的名称查找和重载解析。但是，`delete`操作员有自己的规则来查找正确的`operator delete`. 例如，运算符将查找通常名称查找和重载解析找不到`delete`的成员函数。`operator delete`这意味着您需要确保在手动使用`operator delete`.

正如您所说，`operator delete`直接使用是一个*糟糕*的主意。未能调用析构函数会破坏 RAII，从而导致资源泄漏。它甚至可能导致未定义的行为。此外，您必须承担编写没有 RAII 的异常安全代码的责任，这非常困难。你几乎肯定会弄错。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-14T18:12:10.207

您可以将指针设置为 NULL，然后析构函数不会删除它们。

```
struct WithPointers
{
    int* ptr1;
    int* ptr2;

    WithPointers(): ptr1(NULL), ptr2(NULL) {}

    ~WithPointers()
    {
        delete ptr1;
        delete ptr2;
    }
}

...
WithPointers* object1 = new WithPointers;
WithPointers* object2 = new WithPointers;
object1->ptr1 = new int(11);
object1->ptr2 = new int(12);
object2->ptr1 = new int(999);
object2->ptr2 = new int(22);
...
int* pointer_to_999 = object2->ptr1;
object2->ptr1 = NULL;
delete object1;
delete object2; // the number 999 is not deleted now!
// Work with the number 999
delete pointer_to_999; // please remember to delete it at the end! 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-14T18:05:39.320

哇！是的，有可能，不，我不会这样做。让需要变量生命周期的对象通过共享指针或其他一些引用计数对象来控制。使用 C++ 比破坏它的一些内部租户更干净......

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-14T18:15:39.457

是的，这是可能的。 `std::vector`这样做是因为它为对象分配了带有空间的缓冲区，然后有条件地（就地）构造它们并销毁它们，独立于对象生命周期管理内存。

在 C++11 中，我将使用`union`您的类型和带有微不足道的构造函数/析构函数的小型类型来指示可以适合您的类型的内存位置，但不必在其中包含该类型。除此之外，您必须跟踪对象是否确实存在。创建项目包括使用放置`new`，销毁它包括手动调用析构函数。

对象的缓冲区`union`，无论是 N 个对象还是 1 个，都将完全独立管理。的默认构造函数`union`要么不构造任何东西，要么构造普通类型（在这种情况下，您可能想要销毁该普通类型）。

但是，您的问题的真正答案很可能是“不要那样做”。如果你这样做，你把指针包装在一个*唯一*`class`的工作就是处理上面的混乱中。这种类型的类（其工作是管理指针的生命周期和类似指针的属性）称为“智能指针”。

 ** * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-14T18:08:19.543

无论您实际尝试做什么，您的代码都存在问题。如果您不想删除子对象，只需使用在删除对象之前设置的布尔标志，析构函数将考虑该标志。

但老实说，您应该使用智能指针而不是裸指针（在您的情况下，看起来共享指针就是您所需要的）。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-14T18:13:10.297

编写一个可以在调用析构函数之前调用的方法。该方法将翻转成员布尔值。当析构函数被调用时，它将检查该布尔成员，如果为真则销毁指针，如果为假则保留它。

我不建议这样做。最好让类不负责删除指针。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-14T18:11:59.957

正如其他人所建议的那样，解决此问题的正确方法不是不调用析构函数[您只需要向对象添加类似`std::string`或`std::vector`的内容，然后突然之间就会出现内存泄漏]。正确的方法是要么根本不让你的对象拥有那些其他对象（例如在对象被删除之前/之后分别删除它们），要么有一个方法让对象知道是否删除指针。*

# gwt - GWT 模板和 GXT Xtemplates - 如何清理显示字段

> ID：14881194
> 
> 赞同：1
> 
> 时间：2013-02-14T18:02:49.420
> 
> 标签：gwt, gxt

我刚刚开始在我的代码中使用@Template 和@XTemmplate。我总是关心用户原创内容与受信任的内容。

这是来自 GWT [SafeHtml的示例](https://developers.google.com/web-toolkit/doc/latest/DevGuideSecuritySafeHtml?hl=de#SafeHtmlTemplates)

```
 public interface MyTemplates extends SafeHtmlTemplates {
    @Template("<span class=\"{3}\">{0}: <a href=\"{1}\">{2}</a></span>")
    SafeHtml messageWithLink(SafeHtml message, String url, String linkText,
        String style);
  } 
```

这是来自 GXT [XTemplate 文档的示例](http://docs.sencha.com/gxt/3/com/sencha/gxt/core/client/XTemplates.html)

```
public interface SampleXTemplates extends XTemplates {
  @XTemplate("<div>Hello, {name}!</div>")
  SafeHtml hello(String name);
} 
```

在这两种方法中，模板中是否有一种方法可以声明要清理或信任的显示字段？一些 ala [HtmlSanitizer](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/safehtml/shared/HtmlSanitizer.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T22:21:55.110

`String`在 XTemplate/SafeHtmlTemplates 中呈现的所有值都会自动清理 - 尝试传入`<`、`>`或`&`字符。无论它们是传递给属性还是标签之间的空间都是如此。如果 GWT 无法确保此类字符串的安全性（例如将其传递到标记的属性或`href`属性中），它将发出警告。你的第一个例子很可能会得到这样的警告。`a``style`

`SafeHtml`可以传入实例来声明“我知道这个字符串是安全的”。通常，您使用`SafeHtmlUtils`、`SafeHtmlBuilder`实例或其他某种模板来创建它们。

安全 url 可以是`SafeUri`实例 - 使用`UriUtils`. 这将绕过您的第一个示例中可能出现的警告。

安全样式可以是实例——使用类中的实例或静态方法`SafeStyles`创建它们。`SafeStylesBuilder``SafeStylesUtils`

最后，作为一个实现细节，XTemplates 是通过解析逻辑和命名参数和 getter 生成的，并在生成 JavaScript 之前转换为 SafeHtmlTemplates。这确保了 SafeHtmlTemplates 将确保安全的任何内容在 XTemplates 中也是安全的。

# makefile - 在处理完文件中的所有目标后，如何编写生成文件以运行 shell 命令？

> ID：14881197
> 
> 赞同：3
> 
> 时间：2013-02-14T18:03:09.623
> 
> 标签：makefile

我有一个生成文件，它运行一组涉及各种文件的测试并将结果写入日志文件。是否可以编写makefile，以便在处理文件中的所有其他目标后运行相同的shell 命令集，而不管发生的错误如何。

我知道我可以使用调用 makefile 的 shell 脚本，然后调用 shell 命令，但我想知道是否可以从 makefile 本身中执行此操作，而不使用某些虚假目标`make print`（例如）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T18:13:48.600

你可以尝试这样的事情：

```
 .PHONY: test1 test2 test3 finale

    all: finale

    finale: test1 test2 test3

    test1:
        - exit 1

    test2:
        - exit 2

    test3:
        - exit 3

    finale:
            echo "And the winner is..." 
```

您使您的脚本，即目标“finale”，依赖于其他目标，并使用“-”运算符忽略来自测试的非零返回码。

# javascript - Web 表单字段数据未传递给 php

> ID：14881199
> 
> 赞同：0
> 
> 时间：2013-02-14T18:03:11.443
> 
> 标签：javascript, forms, validation

我正在学习，尝试创建一个简单的 Web 表单，验证表单数据，并将数据传递给 php 文件。

在验证所有字段值之后，它们不会被传递到 php 文件。

```
<form action="/xxxxx.php" method="post" name="registration" onsubmit="return formValidation();"> 
```

我已将表单名称更改为其他名称...

```
<form action="/xxxxx.php" method="post" name="anythingelse" onsubmit="return formValidation();"> 
```

...表单有效（未经验证）并且字段值被传递到 php 文件。我收到了完整的表格，所以我知道没有验证网络表格工作正常。

所以看起来好像验证有问题，即即使在所有函数都通过验证并且可能返回 true 之后，函数也会返回 false。

或者有其他问题。我不明白怎么了？我会很感激任何帮助。

这是代码。

```
 <script type="text/javascript">
        function formValidation() {
            var uname = document.registration.username;
            var uadd = document.registration.city;
            var ucountry = document.registration.country;
            var uzip = document.registration.zip;
            var uemail = document.registration.email;
            var uphone = document.registration.phone;
            {
                if (allLetter(uname)) {
                    if (alphanumeric(uadd)) {
                        if (countryselect(ucountry)) {
                            if (allnumeric(uzip)) {
                                if (ValidateEmail(uemail)) {
                                    if (validatePhone(uphone)) {
                                    }
                                }
                            }
                        }
                    }
                }
            }
            return false;

        }

        function validatePhone(uphone) {
            var letters = /^[0-9a-zA-Z-]+$/;
            if (uphone.value.match(letters)) {
                return true;
            }
            else {
                alert('Phone Number [Required]: Please enter your phone number (use this format, xxx-xxx-xxxx)');
                uphone.focus();
                return false;
            }
        }
        function allLetter(uname) {
            var letters = /^[A-Za-z ]+$/;
            if (uname.value.match(letters)) {
                return true;
            }
            else {
                alert('Full Name [Required]: Please enter your full name (alphabet characters only)');
                uname.focus();
                return false;
            }
        }
        function alphanumeric(uadd) {
            var letters = /^[0-9a-zA-Z ]+$/;
            if (uadd.value.match(letters)) {
                return true;
            }
            else {
                alert('City [Required]: Please enter your city (alphabet characters only)');
                uadd.focus();
                return false;
            }
        }
        function countryselect(ucountry) {
            if (ucountry.value == "Default") {
                alert('State [Required]: Please select your State from the drop down list');
                ucountry.focus();
                return false;
            }
            else {
                return true;
            }
        }
        function allnumeric(uzip) {
            var numbers = /^[0-9]+$/;
            if (uzip.value.match(numbers)) {
                return true;
            }
            else {
                alert('ZIP code [Required]: Please enter your Zip Code (numbers only, use this format xxxxx)');
                uzip.focus();
                return false;
            }
        }
        function ValidateEmail(uemail) {
            var mailformat = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;
            if (uemail.value.match(mailformat)) {
                return true;
            }
            else {
                alert('Email Address [Required]: You have entered an invalid email address. Please verify and correct your email address.');
                uemail.focus();
                return false;
            }
        }

    </script>
    <form name="registration" action="/xxxxxx.php" method="post" onsubmit="return formValidation();">
    <input type="hidden" name="subject" value="xxxxx - Contact" />
    <input type="hidden" name="redirect" value="confirmation.html" />
    <div>
        <strong>Email Address [Required]:</strong>
        <input type="text" name="email" size="50" title="Please enter your email address" />
    </div>
    <div>
        <span><strong>Company Name [Optional]:</strong></span> <span>
            <input type="text" id="companyName" name="companyName" size="50" title="Please enter your company name" /></span>
    </div>
    <div>
        <span><strong>Full Name:</strong></span> <span>
            <input type="text" id="username" name="username" size="30" title="Please enter your full name" /></span>
    </div>
    <div>
        <span><strong>Phone Number:</strong></span> <span>
            <input type="text" id="phone" name="phone" size="17" title="Please enter your phone number" /></span>
        <br />
        <span><strong>Phone Ext. [Optional]:</strong></span> <span>
            <input type="text" id="phoneExtn" name="phoneExtn" size="10" title="Please enter your phone extension" /></span>
    </div>
    <div>
        <span><strong>City:</strong></span> <span>
            <input type="text" id="city" name="city" size="25" title="Please enter your city" /></span>
        <span><strong>State:</strong></span> <span>
            <select id="country" name="country" title="Please select your state from the drop down list">
                <option selected="" value="Default">Select a State</option>
                <option value="AL">Alabama</option>
                <option value="AK">Alaska</option>
                <option value="AZ">Arizona</option>
                <option value="AR">Arkansas</option>
                <option value="CA">California</option>
                <option value="CO">Colorado</option>
                <option value="CT">Connecticut</option>
                <option value="DE">Delaware</option>
                <option value="DC">District of Columbia</option>
                <option value="FL">Florida</option>
                <option value="GA">Georgia</option>
                <option value="GU">Guam</option>
                <option value="HI">Hawaii</option>
                <option value="ID">Idaho</option>
                <option value="IL">Illinois</option>
                <option value="IN">Indiana</option>
                <option value="IA">Iowa</option>
                <option value="KS">Kansas</option>
                <option value="KY">Kentucky</option>
                <option value="LA">Louisiana</option>
                <option value="ME">Maine</option>
                <option value="MD">Maryland</option>
                <option value="MA">Massachusetts</option>
                <option value="MI">Michigan</option>
                <option value="MN">Minnesota</option>
                <option value="MS">Mississippi</option>
                <option value="MO">Missouri</option>
                <option value="MT">Montana</option>
                <option value="NE">Nebraska</option>
                <option value="NV">Nevada</option>
                <option value="NH">New Hampshire</option>
                <option value="NJ">New Jersey</option>
                <option value="NM">New Mexico</option>
                <option value="NY">New York</option>
                <option value="NC">North Carolina</option>
                <option value="ND">North Dakota</option>
                <option value="OH">Ohio</option>
                <option value="OK">Oklahoma</option>
                <option value="OR">Oregon</option>
                <option value="PA">Pennsylvania</option>
                <option value="PR">Puerto Rico</option>
                <option value="RI">Rhode Island</option>
                <option value="SC">South Carolina</option>
                <option value="SD">South Dokota</option>
                <option value="TN">Tennessee</option>
                <option value="TX">Texas</option>
                <option value="UT">Utah</option>
                <option value="VT">Vermont</option>
                <option value="VI">Virgin Islands</option>
                <option value="VA">Virginia</option>
                <option value="WA">Washington</option>
                <option value="WV">West Virginia</option>
                <option value="WI">Wisconsin</option>
                <option value="WY">Wyoming</option>
            </select></span>
    </div>
    <div>
        <span><strong>Zip Code:</strong></span> <span>
            <input type="text" id="zip" name="zip" size="10" title="Please enter your zip code" /></span>
    </div>
    <br />
    <div id="qsadditionalRequirementsQuestion">
        <strong>Briefly describe your purpose for contacting us today:</strong>
    </div>
    <div>
        <textarea name="PurposeForContact" rows="5" cols="60"></textarea>
    </div>
    <div>
        <input type="submit" name="submit" value="Submit" />
    </div>
    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T18:21:14.077

您的主要`if`语句包含在随机的开始和结束大括号中。

尝试删除那些随机大括号，`return true;`在最后一个嵌套`if`语句中添加，并`return false;`在语句`elseif`的右大括号之后包含 inside`if`

编辑：

```
if (allLetter(uname)) {
    if (alphanumeric(uadd)) {
       if (countryselect(ucountry)) {
        if (allnumeric(uzip)) {
            if (ValidateEmail(uemail)) {
                if (validatePhone(uphone)) {
                    return true;
                }
                else {
                    return false;
                }
            }
            else {
                return false;
            }
        }
        else {
            return false;
        }
    }
    else {
        return false;
    }
}
else {
    return false;
}
}
else {
return false;
} 
```

有很多更好的方法可以做到这一点，但不要改变你已经拥有的太多，试试上面的方法。

# java - 如何在 JAX-WS 调用中指定 url 并避免初始网络连接？

> ID：14881203
> 
> 赞同：3
> 
> 时间：2013-02-14T18:03:26.470
> 
> 标签：java, jax-ws

我正在使用 JAX-WS 标准的东西`wsimport http://localhost/Order.wsdl`来生成客户端存根类。

实时 Web 服务位于不同的主机上，因此我需要在进行服务调用时提供一个 url。到目前为止，我的方法是这样的（下面的类是从 wsimport 生成的）：

```
 1\. OrderService s = new OrderService (
                                       new URL("https://live/WS/Order"), 
                                       new QName(...));
 2\. OrderServicePort port = s.getOrderServicePort();

 3\. configureHttpCertificatesStuff(port) // Set up ssl stuff with the port

 4\. port.placeOrder(args); // The actual ws call 
```

*第一：*这是指定网址的正确方法吗？

*第二：*似乎第 1 行中的构造函数实际上对新 URL**进行了网络调用！**这会导致异常（由于未配置 https），因此我永远不会进入下一行。

[背景：我正在实施此问题](https://stackoverflow.com/questions/11001102/how-to-programmatically-set-the-sslcontext-of-a-jax-ws-client)中概述的双向 ssl 身份验证。这意味着我需要在`port`服务调用之前配置 ssl 的东西。由于明显的原因，在正确配置 ssl 层之前，我无法让构造函数建立任何连接......

**更新：**

显然，url 指向 WSDL，而不是使用 jax-ws 标准时的端点。这让我绊倒了。直接从文件加载 WSDL 解决了这个问题。

设置端点 url 是这样完成的：

```
BindingProvider b = (BindingProvider) port;        
b.getRequestContext().put(BindingProvider.ENDPOINT_ADDRESS_PROPERTY, endpointUrl); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T04:39:59.837

一种解决方案是让您的构建过程安排处理的 WSDL 文件`wsimport`成为您的应用程序的类路径资源。有很多方法可以做到这一点，但假设您采用 JAR-per-service 方法。因此，您将运行`Order.wsdl`并`wsimport`获取生成的类，例如`OrderService`and `OrderServicePort`，然后将它们填充到`order-service.jar`. 您可以做的另一件事是将 的副本填充`Order.wsdl`到同一个 JAR 中`META-INF/wsdl/Order.wsdl`。假设 JAR 文件是您的应用程序类路径的一部分，您可以通过执行以下操作获取 WSDL 的 URL：

```
URL wsdlLocation = Thread.currentThread().getContextClassLoader().getResource("META-INF/wsdl/Order.wsdl"); 
```

# python - Python 的“Extras”和“site-packages”目录有什么区别？

> ID：14881205
> 
> 赞同：2
> 
> 时间：2013-02-14T18:03:39.390
> 
> 标签：python, macos, python-2.7, package, osx-mountain-lion

我对 Python 在 OS X 上使用“Extras”和“site-packages”中的包的方式感到困惑。特别是，我对我在这些目录中看到的内容、目录中的重复包如何相互影响以及我应该将安装的包放在哪里感到困惑。

我曾假设 'Extras' ¹是不属于核心 Python 的包的位置，但这些包仍然随给定平台分发。例如，OS X 与`PyObjC`、`twisted`和`numpy`等一起分发；这些都可以在“附加”中找到。我还假设 'site-packages' ²是我随后安装的软件包所在的位置，并且该目录在“新”机器上为空或不存在。此外，我假设安装新软件包会将版本单独保留在“Extras”中，并将我所做的任何更新放在“site-packages”中，在那里它们会“掩盖”“Extras”中的那些。（例如，可以通过删除“站点包”来简单地恢复默认安装。）

让我感到困惑的是，我的“Extras”目录的内容正在减少。与全新 OS X (10.8.2) 安装的内容相比，我当前配置的“附加”缺失

```
altgraph
altgraph-0.9-py2.7.egg-info
dateutil
macholib
macholib-1.4.2-py2.7.egg-info
modulegraph
modulegraph-0.9.1-py2.7.egg-info
numpy #though numpy-1.6.1-py2.7.egg-info is there
pkg_resources.py  # though .pyc is there
py2app
py2app-0.6.3-py2.7.egg-info
setuptools  # though setuptools-0.6c12dev_r88846-py2.7.egg-info is there
site.py  # though .pyc and .pyo are there
xattr
xattr-0.6.2-py2.7.egg-info
zope
zope.interface-3.5.1-py2.7.egg-info 
```

并且在全新安装中找不到两个附加文件

```
pkg_resources.py.OLD.1356069438.31
setuptools-0.6c12dev_r88846-py2.7.egg-info.OLD.1356069438.31
setuptools.OLD.1356069438.31 
```

据我所知，这些都是我自己更新的包，所有版本都存在于“站点包”中。

'Extras' 目录的内容是否应该以这种方式“缩小”？更新 'Extras' 中的软件包是否会将其“移动”到“site-packages”，或者是否应该将“Extras”版本单独保留并简单地被“site-packages”中的那些“屏蔽”？

* * *

^(1：`/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python`)
^(2：`/Library/Python/2.7/site-packages/`)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:24:53.793

OSX（和 Linux）似乎不喜欢在 python 发行版的默认安装目录中安装额外的 python 包。

pip 可以搜索（就像 python 本身一样）已安装的模块，如果您进行升级，将卸载旧版本并在您要求的位置安装新版本，默认为站点包。如果您仔细查看 pip 的输出，它会告诉您它删除了什么以及安装了什么。

因此，只有当您告诉 pip 安装到 Extras 目录，或者默认为 OSX 修补 pip 时，才会起作用。

删除旧版本实际上是一件好事，否则您导入的模块版本将取决于您的搜索路径（sys.path），这很容易出错。

是否**应该**减少可以争论，但这是您使用 pip 进行升级的方式的正常结果。

# sql-server - MS SQL Server JDBC Driver 不读备注

> ID：14881213
> 
> 赞同：0
> 
> 时间：2013-02-14T18:04:03.750
> 
> 标签：sql-server, jdbc, liquibase

我正在尝试从 SQL Server 读取数据库元数据以与 liquibase dbdoc 一起使用。然而，似乎两者都没有

*   MS SQL Server JDBC 驱动程序 (sqljdbc4-4.0.2206.100.jar)

也不

*   jTDS Sql Server JDB 驱动程序 ( [http://jtds.sourceforge.net/](http://jtds.sourceforge.net/) )

支持通过 Column.getRemarks() 从 SQL Server 读取 MS SQL 列/表“描述”字段。

有谁知道我可以使用一些替代驱动程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T08:20:42.767

您可以编写一个读取描述的 sp，`sys.extended_properties`并调用 sp 以获取扩展属性。

# javascript - bpopup 多个

> ID：14881217
> 
> 赞同：4
> 
> 时间：2013-02-14T18:04:20.220
> 
> 标签：javascript, popup, bpopup

我正在使用一个名为“bPopup”的轻量级 jQuery 弹出插件。我现在在我的网站上使用它来在单击时加载多个弹出窗口。最近有人告诉我，我的代码效率低下，因为我正在加载带有多个 JavaScript“侦听器”的多个弹出窗口，即：

```
<script type="text/javascript">
;(function($) {
    $(function() {
        $('#my-button_1').bind('click', function(e) {
            e.preventDefault();
            $('#element_to_pop_up_32754925023').bPopup();
        });
    });
})(jQuery);
</script>

<script type="text/javascript">
;(function($) {
    $(function() {
        $('#my-button_2').bind('click', function(e) {
            e.preventDefault();
            $('#element_to_pop_up_95031153149').bPopup();
        });
    });
})(jQuery); 
```

^^ 多个 JavaScript“侦听器”。而且，对于弹出窗口：

```
<!-- Button that triggers the popup -->
<a class="main" id="my-button_1" href="#">Popup 1</a></b><br />
<!-- Element to pop up -->
<div id="element_to_pop_up_1">
// ...
</div>

<!-- Button that triggers the popup -->
<a class="main" id="my-button_1" href="#">Popup 1</a></b><br />
<!-- Element to pop up -->
<div id="element_to_pop_up_1">
// ...
</div> 
```

他可能是对的（肯定的），但不确定如何实现这一点，或者这是否可能（他错的可能性很小）。

帮助？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T22:05:15.247

由于您使用的是 jquery，您应该使用它的[on() 方法](http://api.jquery.com/on/)将单个侦听器附加到父 DOM 元素，并使用选择器参数将事件正确委托给它的子元素（按钮/弹出窗口）。

如果这听起来令人困惑，一个简单的例子可能会有所帮助：

**HTML：**

```
<div id="parent">
    <a href="popup1" class="button">Show popup 1</a>
    <div id="popup1" class="popup">1</div>

    <a href="popup2" class="button">Show popup 2</a>
    <div id="popup2" class="popup">2</div>

    <a href="popup3" class="button">Show popup 3</a>
    <div id="popup3" class="popup">3</div>

    <a href="http://www.google.com/" target="_blank">Non-popup link</a>
</div> 
```

**JS：**

```
$('#parent').on('click', 'a.button', function (event) {
    event.stopPropagation();
    event.preventDefault();

    var popup = $(this).attr('href');
    $('#'+popup).bPopup();
}); 
```

这会在父元素上添加一个事件侦听器，仅当触发事件的子元素与选择器匹配时才会触发（在本例中`a.button`）。`href`它通过从属性中检索弹出窗口的 id 来确定要显示的弹出窗口。

[您可以在此处查看此示例。](http://jsfiddle.net/KWDCw/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:10:48.130

下面的函数（ myFunction() ）获取被点击的锚点/div 标签的 ID 和要显示的另一个 div 内容的 ID。并为所有弹出模型应用相同的样式。而且它还隐藏了当你打开新弹出窗口时已经打开的旧弹出窗口。您可以更改的所有弹出属性。

这里我只使用了两个弹出窗口，但你可以像这里一样使用它。

```
<script type="text/javascript">

function myFunction(whId,whtDivContent,e) {
    //var totWidth = $(document).width();
    //var marTop = position.top;
    var elt = $(whId);
    var position = elt.position();
    var marLeft = position.left - 130;

    if(marLeft <= 1) {
        marLeft = 10;
    }

    var openModal_profile ='#openModal_profile';
    var openModal_menu ='#openModal_menu';

    // Prevents the default action to be triggered. 
    e.preventDefault();

    $(whtDivContent).bPopup({
        position: [marLeft, 0] //x, y
        ,opacity: 0.9
        ,closeClass : 'b-close'
        ,zIndex: 2
        ,positionStyle: 'fixed' //'fixed' or 'absolute' 'relative'
        ,follow: [false,false] //x, y
        ,onOpen: function() {
            if(openModal_profile == whtDivContent) {
                $(openModal_menu).bPopup().close();
            }
            else if(openModal_menu == whtDivContent) {
                $(openModal_profile).bPopup().close();
            }

            $(whId).css({'background-color':"#DFDFDF"}); 
        }
        ,onClose: function() { $('.close').click(); $(whId).css({'background-color':""}); }

    });
}

         ;(function($) {
                     // DOM Ready
                    $(function() {
                        // From jQuery v.1.7.0 use .on() instead of .bind()
                        //$(id_menu).on('click',function(e) {}

                        var id_menu = '#id_menu';
                        var openModal_menu ='#openModal_menu';
                        $(id_menu).toggle(function(e) {
                            //$(id_menu).css({'background-color':"#DFDFDF"});
                            myFunction(id_menu,openModal_menu,e);
                        },function(e){
                            //$(id_menu).css({'background-color':""});
                            $('.close').click();
                            $(openModal_menu).bPopup().close();

                        });

                        var id_profile = '#id_profile';
                        var openModal_profile ='#openModal_profile';
                        $(id_profile).toggle(function(e) {
                            //$(id_profile).css({'background-color':"#DFDFDF"});
                            myFunction(id_profile,openModal_profile,e);
                        },function(e){
                            //$(id_profile).css({'background-color':""});

                            $(openModal_profile).bPopup().close();
                        });

                    //ENDS HERE    
                    });
                })(jQuery);
            </script> 
```

# operating-system - 是什么决定了进程的特权级别？

> ID：14881223
> 
> 赞同：6
> 
> 时间：2013-02-14T18:05:02.000
> 
> 标签：operating-system, privilege

我听说过特权级别、环、特权指令、非特权指令、用户模式、内核模式、用户空间、内核空间。

用户进程将以低权限运行，而操作系统进程具有更高的权限，我也听说过负责一般保护的 CPL 寄存器。CPU也只知道CPL，它是决定页面指令属于哪个页面的依据。

我想知道谁/什么最初决定了进程的特权级别？

什么时候决定进程将以低或高特权级别运行？在编译时？加载时？

什么说明当前程序将以特定的权限级别运行？段寄存器？描述符？装载机？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-14T18:42:13.093

首先，我看到 3 个问题。

1.  谁/什么最初决定进程的特权级别？
2.  什么时候决定进程将以低或高特权级别运行？
3.  什么说明当前程序将以特定的权限级别运行？

其次确认一些术语的定义

当您说特权级别时，我相信您指[的是与 CPU 处理器模式相关的特权级别的概念，](http://en.wikipedia.org/wiki/Privilege_level)而不是任何其他可用特权机制的通用级别。

当您说进程时，我相信您指[的是当前正在运行的程序的概念，](http://en.wikipedia.org/wiki/Process_(computing))而不是一些替代定义。

用户进程以用户模式运行，具有给定 CPU 架构的用户权限

内核进程在内核模式下运行，具有给定 CPU 架构的超级用户权限。

进程是用户进程还是内核进程取决于在不使用分页时在段描述符中设置哪些标志，或者在使用分页时在页表或页目录条目中设置哪些标志。

这意味着进程的特权级别取决于该进程的代码在内存中的位置。如果它在内核空间中并使用相关标志标记为这样，那么它就是一个内核进程。如果它在用户空间中并使用相关标志标记为这样，那么它就是一个用户进程。

如果您正在运行的进程/程序不是内核，那么它​​是大多数现代操作系统上的用户进程。因此，何时做出决定是在程序执行时，特别是内核首次加载时的操作系统初始化时间。

该进程要么是该内核并且以超级用户权限级别运行，要么它不是并且它以用户权限级别运行。

CPU 根据相关状态寄存器（Intel X86 上的代码状态寄存器和 ARM 上的当前程序状态寄存器）检查内存中任何代码或数据段的每次执行。

当用户进程需要访问内核资源时，一般的做法是允许用户进程通过系统调用来代表它询问内核进程，当内核进程运行请求时会进行权限上下文切换。用户进程。

附带说明一下，[内核模式 Linux](http://web.yl.is.s.u-tokyo.ac.jp/~tosh/kml/)允许您在内核/主管模式下运行用户进程。

**参考文献和进一步阅读**

*   [操作系统开发安全页面](http://wiki.osdev.org/Security)
*   [操作系统开发分段页面](http://wiki.osdev.org/Segmentation)
*   [操作系统开发分页页面](http://wiki.osdev.org/Paging)
*   [操作系统开发 ARM 概述](http://wiki.osdev.org/ARM_Overview)
*   [记忆翻译和分割](http://duartes.org/gustavo/blog/post/memory-translation-and-segmentation/)
*   [CPU 环、特权和保护](http://duartes.org/gustavo/blog/post/cpu-rings-privilege-and-protection/)
*   [操作系统特权：保护和隔离](http://www.read.seas.harvard.edu/~kohler/class/05s-osp/notes/notes9.html)
*   [操作模式、系统调用和中断](http://www.zap.org.au/elec2041-cdrom/unsw/elec2041/experiment5.pdf)
*   [分页和分段](http://www.csee.umbc.edu/~cpatel2/links/310/slides/chap17_lect16_paging_segmentation.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-18T11:28:46.377

大多数处理器都有一个陷阱或软件故障指令，可以将处理器切换到特权模式。内核检查用户模式进程是否具有特定操作的权限。由于内核数据受到保护，内核可以强制执行安全策略——用户进程不能直接授予自己权限。

权限有时被称为特权，这就是为什么我想解释处理器模式如何在强制安全权限方面发挥作用。

# view - 用 observable 包裹的淘汰视图模型

> ID：14881224
> 
> 赞同：1
> 
> 时间：2013-02-14T18:05:06.717
> 
> 标签：view, model, knockout.js, observable

为了避免在同一个 DOM 元素上多次调用 applyBindings，我将各种视图模型包装在一个 observable 中。然后只需将可观察到的更改为我想看到的任何视图模型和 BAM ......这是有效的。

直到我做这样的事情：

```
<div data-bind="if:$data">
...some bindings in here
</div> 
```

当我更改视图模型时，任何“if:$data”块内的绑定都不会更新。

这是一个真正证明这一点的小提琴：http: [//jsfiddle.net/btrauma8/2TxME/](http://jsfiddle.net/btrauma8/2TxME/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T18:24:28.403

这在 KO 2.2 之前可以正常工作。在 2.2 中，我们通过仅在值实际在真/假之间变化时重新渲染部分来提高效率`if`。`ifnot`

在很多情况下，人们会绑定类似的东西`if: items().length`，并且每次添加项目时都会重新渲染整个部分。

在您的情况下，您可以通过使用`with`绑定而不是`if`. 由于您正在绑定`$data`，因此它实际上不会更改上下文，而是会为您提供您所追求的结果。

# scripting - 无法使用 wsadmin.sh 执行 jython 脚本

> ID：14881225
> 
> 赞同：0
> 
> 时间：2013-02-14T18:05:10.060
> 
> 标签：scripting, jython, websphere-8

我正在尝试使用 wsadmin 和 jython 脚本在 Websphere 8 服务器中自动化应用程序部署。

我想列出在我的服务器中运行的所有应用程序（只是为了测试我的设置）

```
wsadmin.sh -lang jython -c 'AdminApp.list()' 
```

当我在终端中运行上述命令时，我没有得到响应/没有错误。我尝试将 AdminApp 命令移动到单独的文件（listApplications.py），结果相同

```
wsadmin.sh -lang jython listApplications.py 
```

使用 wsadmin.sh 是否有任何先决条件？执行 wsadmin.sh 时如何查找日志？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-11T20:47:41.687

提供 wsadmin.sh 的完整路径 例如：

/opt/IBM/.../wsadmin.sh -lang jython -c "打印 AdminApp.list()"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:28:38.530

根据[这篇文章](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/topic/com.ibm.websphere.express.doc/info/exp/ae/txml_listapp.html)，我建议尝试：

```
wsadmin.sh -lang jython -c 'print AdminApp.list()' 
```

代替

```
wsadmin.sh -lang jython -c 'AdminApp.list()' 
```

# jquery - 是否可以根据 href 值替换部分href 值？

> ID：14881231
> 
> 赞同：0
> 
> 时间：2013-02-14T18:05:32.450
> 
> 标签：jquery, html, video, colorbox, href

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T18:10:05.527

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T18:07:43.933

未经测试，我认为这条线是错误的：

```
this.href = this.href.replace(/^".mp4"/, 
     ".html"); 
```

`^`表示以正则表达式开头。尝试这样做：

```
this.href = this.href.replace(".mp4", 
     ".html"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T18:16:28.623

只需包装两个答案。你将需要他们两个来使它正确。

```
$(function(){

$("a.cboxElement[href$='.mp4']")
 .each(function()
{

  this.href = this.href.replace(".mp4", ".html");

});

$(".cboxElement").colorbox({iframe:true, innerWidth:640, innerHeight:370});
}); 
```

[http://jsfiddle.net/2A3UP/](http://jsfiddle.net/2A3UP/)

# php - 安装 YII 并由于环境变量而出错

> ID：14881233
> 
> 赞同：1
> 
> 时间：2013-02-14T18:05:38.857
> 
> 标签：php, frameworks, yii

我是这个 YII 框架的新手。我正在尝试使用本[教程](http://tegarrputra.wordpress.com/2012/11/15/installing-yii-framework-on-windows-7/)安装它。

我在最后一步收到此错误：

> <<'php.exe' 不是内部或外部命令、可运行程序或批处理文件>>

我在 Windows 7 上使用 Xamp。

```
C:\Program Files (x86)\AMD APP\bin\x86_64;C:\Program Files (x86)\AMD APP\bin\x86;C:\Program (...) Server\80\Tools\Binn\;C:\Program Files (x86)\Microsoft SQL Server\90\Tools\binn\;C\xampp\php\ 
```

这是我的环境变量路径。

我对此进行了很多搜索并找到了许多解决方案，但没有一个对我有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T18:52:55.910

你有没有重新启动你的电脑？Windows 不会在系统环境变量更改后重新加载它们。强制应用它们的最简单方法是重新启动计算机。

# google-chrome - Chrome 调试器无法处理本地文件

> ID：14881242
> 
> 赞同：2
> 
> 时间：2013-02-14T18:06:11.093
> 
> 标签：google-chrome, google-chrome-devtools, javascript-debugger

我正在尝试在本地调试一些 Javascript，但我遇到了一个奇怪的问题。如果我打开一个本地文件，例如：

```
<html>
    <head>
        <script src="file.js"></script>
    </head>
    <body></body>
</html> 
```

使用 file.js 就是：

```
(function() {
    'use strict';
    debugger
})(); 
```

它无法在调试行上暂停。但是，如果我在 Firefox/Firebug 中打开完全相同的文件，它会在该行暂停。此外，如果我将调试器行添加到本地服务器上提供的文件（即`http://`文件而不是`file://`文件），Chrome 调试器会按预期暂停。

该问题仅在带有本地文件的 Chrome 中表现出来（据我所知）。但是，我用谷歌搜索了很多，但我找不到任何类型的 Chrome 或类似的“禁用本地文件中的调试器”选项（我可能不小心启用了）。

有没有人以前见过这个，如果有，你能解决它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T23:20:36.853

所以事实证明问题是我添加到 Chrome 中的一个标志。默认情况下，Chrome 不会让您的本地文件访问其他本地文件，因此我使用命令行标志启用了本地文件加载：

```
--allow-file-access-from-files 
```

效果很好，除了它引起了我没有意识到的副作用：当您运行本地文件（或至少由其他本地文件加载的本地文件）时，Chrome 显然会“沙箱”它们。不幸的是，Chrome 也拒绝调试“沙盒”代码，这意味着我的调试器神秘地失败了。

因此，对于任何想要在 Chrome 中运行本地文件（比如运行基于 Web 的测试框架）的人来说，诀窍是首先添加上述标志，然后再添加以下标志：

```
--allow-sandbox-debugging 
```

`debugger`这样当您的代码在本地文件中包含一行时，Chrome 仍会触发调试器。

# node.js - MongoDB收集方案

> ID：14881244
> 
> 赞同：0
> 
> 时间：2013-02-14T18:06:22.437
> 
> 标签：node.js, mongodb, collections, schema, database

我开始使用 NodeJS 和 MongoDB 开发在线足球管理游戏。但现在我不知道，我应该使用多个集合还是可以将所有内容放在一个集合中？例子：

```
{
  "_id" : ObjectId("5118ee01032016dc02000001"),
  "country" : "Aruba",
  "date" : "February 11th 2013, 3:11:29 pm",
  "email" : "tadad@adadasdsd.com",
  "name" : "test",
  "pass" : "9WcFwIITRp0e82ca3c3b314a656bfb437553b1d013",
  "team" : {
    "name" : "teamname",
    "logo" : "urltologo",
    "color" : "color",
    "players" : [{
        "name" : "name",
        "surname" : "surname",
        "tackling" : 58,
        "finishing" : 84,
        "pace" : 51,
         ....
      }, {
        "name" : "name",
        "surname" : "surname",
        "start_age" : 19,
        "tackling" : 58,
        "finishing" : 84,
        "pace" : 51,
         ...
      }],
    "stadium" : {
        "name" : "stadium",
        "capacity" : 50000,
         "pic" : "http://urltopic",
        ....
     },
  },
} 
```

或者为用户、赛程、球员、球队创建不同的收藏？还是其他方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T18:12:16.993

关于如何在 mongo 中设计模式没有硬性规定。很大程度上取决于您的应用程序数据访问模式、数据访问频率以及不同实体之间的关系、它们如何缩小/增长/更改以及哪些保持不变。在不知道您的应用程序应该如何工作的情况下给出建议是不可行的。我建议您查阅一本书，例如 MongoDB in Action，其中提供了有关如何在 mongo 中正确设计模式的建议，同时考虑到帐户应用程序的特定要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T18:12:33.383

当我开始使用 MongoDB 时，我遵循“嵌入一切”的口号，这正是您在上面所做的。但是，需要考虑可能会变得非常大的子文档。您还应该考虑更新特定文档或子文档的频率。例如，您的播放器可能会定期更新，因此您可能希望将它们放入自己的收藏中以方便使用。无论如何，MongoDB 的灵活性使得这个问题实际上没有“正确”的答案，但它可能会帮助您参考有关数据建模的[文档。](http://docs.mongodb.org/manual/core/data-modeling/)

# ios - iPad 应用程序中的旋转

> ID：14881246
> 
> 赞同：1
> 
> 时间：2013-02-14T18:06:27.990
> 
> 标签：ios, ipad, cocoa-touch

在我的 iPad 应用程序中，视图控制器包括三个按钮、一个导航栏和一个工具栏。
当我将视图控制器从纵向模式旋转到横向模式时，三个按钮是无序的。
导航栏也折叠到工具栏。
我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T18:17:30.307

您需要了解*布局*。您可以通过三种方式布置视图的子视图：

*   手动

*   自动调整大小（弹簧和支柱）

*   自动布局（约束）

如果这是 Xcode 4.5 或更高版本中的新项目，则默认使用自动布局。所以你需要回到 nib 并编辑 Xcode 已经给你的约束，因为显然它们不是你想要的。

您可能想阅读我书中的布局部分，其中广泛讨论了自动布局的工作原理以及如何在笔尖中编辑约束：[http ://www.aeth.com/iOSBook/ch14.html#_layout](http://www.apeth.com/iOSBook/ch14.html#_layout)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T18:11:42.517

理想情况下，您应该将每个视图控制器的内容保持在一个 xib 之下，通过固定到布局来链接按钮和导航栏应该正确旋转；但是，当设备旋转时，还有另一个选项可以查看不同的 xib，请参见下面的答案。

[支持多方向的最简单方法？当应用程序处于横向时，如何加载自定义 NIB？](https://stackoverflow.com/questions/2496554/easiest-way-to-support-multiple-orientations-how-do-i-load-a-custom-nib-when-th/2496719#2496719)

# c - 函数可以锁定互斥锁吗？

> ID：14881247
> 
> 赞同：1
> 
> 时间：2013-02-14T18:06:32.857
> 
> 标签：c, multithreading, linux-kernel, mutex

我正在为一个 linux 内核编写一个内存管理器，它在线程之间共享一个循环的 PID 列表（学校项目）。该程序使用 1 生产者、2 消费者模型找到僵尸并杀死它们。（强加于我们，以便我们能够理解共享内存）。

我想让这个列表成为一个对象，并让函数处理迭代指针和检查单元格的值。

那么，如果一个线程调用一个外部函数，该函数可以拥有互斥锁吗？还是必须从线程内完成？

我认为这完全错误吗？

非常感谢-贾里德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T18:10:13.487

说一个“函数”拥有互斥锁是没有意义的。它是拥有它的线程。所以是的，有可能，任何调用您的外部函数的线程都将拥有互斥锁。

如果您查看内核代码以了解线程的实现，您会发现其中一个变量是它拥有的互斥锁列表。

# c# - ASP.NET MVC 中带有 Razor 语法的嵌套代码

> ID：14881256
> 
> 赞同：0
> 
> 时间：2013-02-14T18:07:20.657
> 
> 标签：c#, asp.net-mvc-4

我正在开发一个使用 RAZOR 的 ASP.NET MVC 4 应用程序。该应用程序基本上是一个包含组的记录列表。为了尝试生成组标题和每个组的记录，我使用以下内容：

```
@{ string currentGroupName = string.Empty; }
@foreach (DataRow row in ViewBag.TableRows) {
  string groupName = Convert.ToString(row["Group"]); 
  if (groupName != currentGroupName) {
    <div style="width:98%;" class="nfo">@groupName</div>
    <table id="groupTable" border="0" class="t" style="margin-left:6px;">
      <thead>
        <tr>
          <th>Header 1</th>
          <th>Header 2</th>
          <th>Header 3</th>
        </tr>
      </thead>
      <tbody>
    }
                  ...
  @if (groupName != currentGroupName) {
      </tbody>
    </table>
    currentGroupName = groupName;
  }
} 
```

当我执行此代码时，我收到一条错误消息：

```
Parser Error
The foreach block is missing a closing "}" character.  Make sure you have a matching "}" character for all the "{" characters within this block, and that none of the "}" characters are being interpreted as markup. 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T18:10:20.257

您可以尝试使用`@:`运算符：

```
@{ string currentGroupName = string.Empty; }
@foreach (DataRow row in ViewBag.TableRows) 
{
    string groupName = Convert.ToString(row["Group"]); 
    if (groupName != currentGroupName) 
    {
        <div style="width:98%;" class="nfo">@groupName</div>
        @:<table id="groupTable" border="0" class="t" style="margin-left:6px;">
            <thead>
                <tr>
                    <th>Header 1</th>
                    <th>Header 2</th>
                    <th>Header 3</th>
                </tr>
            </thead>
            @:<tbody>
    }

    ...

    @if (groupName != currentGroupName) 
    {
            @:</tbody>
        @:</table>
        @{currentGroupName = groupName;}
    }
} 
```

# ssl - 从coldfusion发送推送通知？

> ID：14881257
> 
> 赞同：3
> 
> 时间：2013-02-14T18:07:27.070
> 
> 标签：ssl, coldfusion, push-notification, apple-push-notifications

免责声明：我以前从未使用过coldfusion，并且有点急于实现一个小代码片段。

所以，我让应用程序工作并从 php 脚本接收通知：设备令牌被硬编码到脚本中，脚本可以访问所需的证书以使用 SSL 加密消息，消息被发送到苹果服务器并传递到设备。

我需要从冷融合做同样的事情。这就是生产服务器正在使用的。

有什么办法可以从coldfusion中做到这一点，还是我必须使用其他一些编程语言来做到这一点？我读过coldfusion 与.net 和java 配合得很好。我更喜欢 .net，而且我看到他们提供了 SSL 流类 ( [http://msdn.microsoft.com/en-us/library/system.net.security.sslstream.aspx](http://msdn.microsoft.com/en-us/library/system.net.security.sslstream.aspx) )。任何冷融合专家都可以编写一些简单的示例代码来让我知道我应该如何去做吗？

谢谢你。

-编辑：在回复下面的评论时，这正是我想要做的：使用我在 .pem 中拥有的本地证书通过 TCP 通过 TLS 或 SSL 连接到服务器（在本例中为 Apple 推送通知服务器，APN）格式（如果证书需要安装在服务器上或者需要以其他格式进行冷融合，我也可以这样做），并将其发送为二进制流（我的通知）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T13:57:44.750

答案是肯定的，这可以通过 ColdFusion 完成。事实上，几乎任何具有必要密码库的编程语言都可以做到这一点，以打开私钥存储并将消息签名到目标服务器（即，Apple 的推送服务器）。

尽管 ColdFusion 似乎对访问和使用 PKCS12 密钥库有一些本机支持，但让 Java 完成繁重的工作并简单地从 ColdFusion 中引用 Java 库似乎更为常见。

这是一个链接，演示了从 ColdFusion 启动推送通知的简单用例，使用 Java 库实际发送通知：

[http://www.raymondcamden.com/index.cfm/2010/9/13/Guest-Post-Apple-Push-Notifications-From-ColdFusion-in-Ten-Minutes-or-Less](http://www.raymondcamden.com/index.cfm/2010/9/13/Guest-Post-Apple-Push-Notifications-From-ColdFusion-in-Ten-Minutes-or-Less)

# java - 扩展和覆盖 Mule 配置文件中的标签（消息处理器）

> ID：14881258
> 
> 赞同：0
> 
> 时间：2013-02-14T18:07:29.777
> 
> 标签：java, tags, mule, custom-tag

我正在寻找在 Mule 中创建自定义标签或扩展现有标签。

就像我想扩展 First-successful 路由处理器一样。我计划为处理器的现有行为添加一些功能。

请帮助我如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T18:54:23.497

您将无法修改 first-successul，但是您可以实现自己的自定义处理器： http: [//www.mulesoft.org/documentation/display/current/Routing+Message+Processors#RoutingMessageProcessors-CustomProcessor](http://www.mulesoft.org/documentation/display/current/Routing+Message+Processors#RoutingMessageProcessors-CustomProcessor)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T13:48:48.747

这不是一份简单的工作。为了定义新标签，您必须创建一个新模式定义 (XSD) 来声明新元素和属性。在许多其他事情中，您必须创建支持新功能的类（可能扩展许多 mule 自己的类）。最棘手的部分之一是使用`substitutionGroups`指向预定义的 mule 元素来定义新元素。您还必须创建模式定义解析器以便将新的 XML 标记转换为这些新的支持类。

组装新的 XML/Functionality 库后，必须将其 XSD 添加到您的 mule 配置文件中并添加一些前缀，就像您通常在`<mule>`标签中所做的那样，通过`xmlns:someprefix`和`xsi:schemaLocation`属性分别识别/前缀和定位您的新模式库。

如果您打算拥有/分享/销售一个完整的解决方案，这是一项了不起且重要的任务集。事实上，这些步骤确保了非常强大的可用性。如果是这种情况，执行它们的巨大努力可能是合理的。

# seo - 如何将不存在的 .html 文件重定向到 mvc3 路由？

> ID：14881259
> 
> 赞同：1
> 
> 时间：2013-02-14T18:07:36.713
> 
> 标签：seo, iis-7.5, url-routing

这可能是重复的，但我的 Google-foo 已关闭或其他什么，因为我找不到这个简单问题的答案。

我已将旧站点移至 IIS7.5 上的 MVC3，我需要将一些旧的 .html 扩展 url 重定向到新的 MVC 控制器操作。

我添加了 URL 映射。

```
<urlMappings>
    <!-- Doesn't work -->
    <add url="~/OldUrl.html" mappedUrl="~/NewController"/> 
    <!-- Works but is rewrite instead of redirect -->
    <add url="~/OldUrl.aspx" mappedUrl="~/NewController"/> 
</urlMappings> 
```

以上不工作有两个原因。首先，.html 扩展名没有被重新映射，其次，.aspx 扩展名被重新映射而不是重写。

我尝试添加 StaticFileHandler，因为我认为 .NET 可能会忽略 .HTML 扩展名，但实际上该处理程序已经存在。

我无权访问 IIS 管理工具，因为它位于共享主机中，但我应该能够在 web.config 中添加一些内容以使它们重定向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T21:19:28.200

终于想通了：

```
<system.webServer>
  <!-- The RewriteModule may need to be added if it isn't 
       already included in machine.config or application.config
  <modules>
      <add name="RewriteModule" />
  </modules>
  -->
  <rewrite>
      <rules>
          <rule name="Redirect1">
              <match url="^OldUrl.html$" />
              <action type="Redirect" 
                      url="/NewController" 
                      redirectType="Permanent" />
          </rule>
          <rule name="Redirect2">
              <match url="^OldUrl.aspx$" />
              <action type="Redirect" 
                      url="/NewController" 
                      redirectType="Permanent" />
          </rule>
      </rules>
  </rewrite>
</system.webServer> 
```

# android - Android后台持续加速处理

> ID：14881261
> 
> 赞同：1
> 
> 时间：2013-02-14T18:07:31.667
> 
> 标签：android, accelerometer, sensors

我正在开发一个需要连续处理加速度值一段时间（大约一个小时）的应用程序 - 是的，我真的很想这样做。处理涉及进行一些计算并不时更新 UI。加速度是在（前台）服务中收集的 - 如果用户也最小化应用程序，则应该会收集加速度。

我的问题是：实现这一点最合适的模式是什么？我不希望处理使应用程序 UI 无响应。

现在我正在 UI 线程（在服务中）收集加速度数据。然后将收集到的数据传递给一个类，该类进行一些计算并基于它们广播一个 Intent，该 Intent 注册在 Main 活动中以更新 UI。

我应该在服务的工作线程中收集加速度数据吗？（这甚至可能）？或者我应该在另一个线程中进行处理？（在不使 UI/加速收集线程或处理线程挨饿的情况下，最好的方法是如何做到这一点）？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T18:38:20.483

您当然应该在后台线程中进行任何重要的处理。最简单的方法听起来就像只是将它放入`AsyncTask`现有的调用中`Service`。您可以将处理移至`doInBackground`. 另一种选择是创建一个单独`IntentService`的来处理您的处理，但我认为`AsyncTask`应该足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T22:04:24.797

# 尝试 AsyncTask

```
public class AsyncTaskTestActivity extends Activity {

   @Override
   public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.main);

      new PostTask().execute();
   }

   // The definition of our task class
   private class PostTask extends AsyncTask<String, Integer, String> {
   @Override
   protected void onPreExecute() {
      super.onPreExecute();
      displayProgressBar("Working...");
   }

   @Override
   protected String doInBackground(String... params) {
         do_background_Stuff();

         // call this method whenever you want to run something in the UI thread and then get back to processing
         publishProgress(i);
      }
      return "All Done!";
   }

   @Override
   protected void onProgressUpdate(Integer... values) {
      super.onProgressUpdate(values);
      updateProgressBar(values[0]);
   }

   @Override
   protected void onPostExecute(String result) {
      super.onPostExecute(result);
      dismissProgressBar();
   }
   }
} 
```

# c# - 在 c# 中从 myStruct 制作了 IntPtr，但 c++ dll 期待 myStruct*，而不是 IntPtr

> ID：14881263
> 
> 赞同：0
> 
> 时间：2013-02-14T18:07:52.937
> 
> 标签：c#, c++-cli

在我的 c# main 中，我做了

```
 myStruct ret_vals;
        IntPtr ptr = Marshal.AllocHGlobal(Marshal.SizeOf(ret_vals));

        Marshal.StructureToPtr(ret_vals, ptr, false); 
```

MyStruct 有一个指向另一个结构的指针。根据 Intelllisense（编译错误），我的 C++ dll 函数需要一个指向 MyStruct 的指针，而不是一个 IntPtr。以下不会编译

```
 DoAT.atClass1 cl = new DoAT.atClass1();

      cl.read_file( ptr); 
```

顺便说一句，我的 c++ 函数被声明为

```
 public ref class atClass1
{
    public:
          int read_file(MyStruct & ret_vals)    ;

}; 
```

建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T18:15:14.490

在 C++/CLI 中使用引用时不应使用`&`，就像在常规 C++ 中一样，而是`%`. 这意味着您必须这样定义您的 C++/CLI 函数：

```
public ref class atClass1
{
public:
    int read_file(MyStruct % ret_vals);
}; 
```

这样您就可以使用 .NET 参考参数调用您的函数：

```
DoAT.atClass1 cl = new DoAT.atClass1();
cl.read_file(ref ret_vals); 
```

不需要`Marshal`上课！

# ios - FFT 和分贝标度

> ID：14881265
> 
> 赞同：5
> 
> 时间：2013-02-14T18:07:59.060
> 
> 标签：ios, signal-processing, fft

如果我在 iPhone（即真实）数据上获取音频数据，请执行 FFT，然后获取幅度（Re^2 + Im^2）。

这些从 >0 到一些大数字不等，所以我确实`10log(n)`以 dB 为单位。

这使我的输出为负（对于 < 1 的输入）为正。

但是我看到的示例（以及在 Sonic Visualiser 中绘制频谱）在以 dB 为单位测量时总是具有正频谱。

那我错过了什么？！

更广泛地说，据我所知，分贝是一个比率，所以在这种情况下，当将 FFT 幅度转换为 dB 时，它们与什么比率？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T19:52:07.350

简单的答案是，在大多数情况下，**您可以将任意数字添加到 dB 值**，以使这些值全部为正，或全部为负，或您喜欢的任何值。使用未经校准的麦克风，例如在 iPhone 上，无论如何这都是有意义的，因为您所知道的只是相对值。

对于更高级的技术方法，使用校准的麦克风，您可以使用 dB (SPL) 作为合理的标准来引用所有内容，但这很麻烦，而且无论如何在您的用例中没有意义。

理由：
移动任意数量的主要原因是日志没有报告**测量单位**。例如，即使您知道输入幅度为 0.1 帕斯卡，也完全可以说这是 100 毫帕斯卡，此时您将采用 100 而不是 0.1 的对数（因此对数值为 2 或 -1）。两者都是完全有效的，选择完全是任意的。与标准参考值（如 dB SPL）进行比较时，请注意它是以比率 log(P/P [ref] ) 的形式完成的，从而消除了更改单位的影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T03:53:56.190

由于 FFT 是线性算子，因此 FFT 的输出比例与输入到 FFT 的数据比例有关。iPhone 上 FFT 的输入比例取决于麦克风、音频滤波器的增益，可能还有 AGC 和 DAC 参考。由于后者都没有记录并且可能会有所不同（根据麦克风的位置、设备型号、可能取决于音频会话配置的输入增益等），除非您执行某种校准，否则您不会知道该比率一个已知的参考。

# json - 有没有办法在使用 ServiceStack json 序列化期间忽略默认值？

> ID：14881270
> 
> 赞同：4
> 
> 时间：2013-02-14T18:08:14.713
> 
> 标签：json, servicestack

我使用实体框架作为我的 ORM。它有`ComplexTypeAttribute`（用于注释 POCO）。复杂类型的属性总是被实例化（使用默认构造函数），不管它们的值是多少；因此，总是由 ServiceStack 序列化`JsonSerializer`（连同它们的属性）。

JSON.NET 有一个名为 的枚举`DefaultValueHandling`，可以在这些情况下使用。

ServiceStack 有类似的东西吗？

例如：

```
class Person
{
   string Name { get; set; }
   Address Address { get; set; }
}

[ComplexType]
class Address
{
   string Street { get; set; }
   int Number { get; set; }
   int PostalCode { get; set; }
} 
```

当我序列化一个没有地址的人时，我得到这个：

```
"{ Name: Jim, Address : { Number: 0, PostalCode: 0 } }" 
```

在 Json.Net 中，如果我将 DefaultValueHandling 设置为 Ignore，我只会得到

```
 "{ Name: Jim }" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T20:26:29.280

是的，您可以通过以下不同方式[忽略 ServiceStack 的 JSON 和 Text 序列化程序的属性](https://stackoverflow.com/questions/14858641/how-to-omit-get-only-properties-in-servicestack-json-serializer)。

序列化程序还[支持多个挂钩来自定义序列化和反序列化](https://stackoverflow.com/questions/14387202/how-to-use-a-custom-json-serializer-in-servicestack)。

JsConfig类显示了所有可能的自定义[。](https://github.com/ServiceStack/ServiceStack.Text/blob/master/src/ServiceStack.Text/JsConfig.cs)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-03T11:44:06.273

请考虑将您的值类型更改为可为空的数据类型，并将 null 设置为任何引用类型的默认值。

```
class Person
{
   string Name { get; set; }
   Address Address { get; set; }
}

[ComplexType]
class Address
{
   string Street { get; set; }
   int? Number { get; set; }
   int? PostalCode { get; set; }
} 
```

这应该可以帮助您摆脱具有默认值的属性，因为 ServiceStack Text 将省略具有空值的属性。还要观察int类型的'Age'？当它为空时，从序列化输出中省略。该示例还演示了使用匿名对象的序列化。

下面的例子：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using ServiceStack;

namespace JsonTest
{
    class Person
    {
        public string Name { get; set; }
        public string Address { get; set; }
        public int? Age { get; set; }
        public List<Person> Children { get; set; }

        public Person()
        {
            Children = new List<Person>();
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            var c1 = new Person { Name = "John", Address = "USA", Age = null };
            var c2 = new Person { Name = "John", Address = "USA", Age = 12 };
            List<Person> children = new List<Person>();
            children.Add(c1);
            string name = "Jim";
            // Uncomment lines below and check  - Children attribute is omitted from JSON result
            // children = null;
            // name = null;
            var p1 = new { Name = name, Address = "USA", Age=40, Children = children};
            var p2 = new Person { Name = "Jim", Address = "USA" , Age = null};
            p2.Children.Add(c2);
            Console.WriteLine(p1.ToJson());
            Console.WriteLine(p2.ToJson());
            Console.ReadLine();
        }
    }
} 
```

输出：

```
{"Name":"Jim","Address":"USA","Age":40,"Children":[{"Name":"John","Address":"USA","Children":[]}]}
{"Name":"Jim","Address":"USA","Children":[{"Name":"John","Address":"USA","Age":12,"Children":[]}]}

{"Address":"USA","Age":40}
{"Name":"Jim","Address":"USA","Children":[{"Name":"John","Address":"USA","Age":12,"Children":[]}]} 
```

# javascript - 在 HTML5/javascript 中创建异常处理程序

> ID：14881273
> 
> 赞同：0
> 
> 时间：2013-02-14T18:08:27.727
> 
> 标签：javascript, html, exception-handling, visual-studio-2012

我是 Web 开发领域的新手，我想迷失在 java 脚本函数中创建异常的步骤中

我想要做的是遵循以下语法......

```
function exceptionhandler (){
     if (x===5)
     {
          //throw an exception
     }
} 
```

我找到了以下教程 [http://www.sitepoint.com/exceptional-exception-handling-in-javascript/](http://www.sitepoint.com/exceptional-exception-handling-in-javascript/) 但我不知道如何将上面的 if 语句转换为 try..catch...finally 异常

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T18:40:36.440

要在*JavaScript中***创建**错误，您必须有一些东西，它可以是一个[特定类型](https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/Error#Error_types)的*Error*或任何*Object*或*String*。*[`throw`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/throw)[`Error`](https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/Error)*

 ***```
function five_is_bad(x) {
    if (x===5) {
        // `x` should never be 5! Throw an error!
        throw new RangeError('Input was 5!');
    }
    return x;
}

console.log('a');
try {
    console.log('b');
    five_is_bad(5); // error thrown in this function so this 
                    // line causes entry into catch
    console.log('c'); // this line doesn't execute if exception in `five_is_bad`
} catch (ex) {
    // this only happens if there was an exception in the `try`
    console.log('in catch with', ex, '[' + ex.message + ']');
} finally {
    // this happens either way
    console.log('d');
}
console.log('e');
/*
a
b
in catch with RangeError {} [Input was 5!]
d
e
*/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T18:39:37.890

您可能正在寻找这样的东西：

```
function exceptionhandler() {
    try {
        if (x===5) {
            // do something  
        }
    } catch(ex) {
        throw new Error("Boo! " + ex.message)
    }
} 
```***

# javascript - 仅当 AJAX 请求需要一定时间时才执行代码？

> ID：14881274
> 
> 赞同：4
> 
> 时间：2013-02-14T18:08:29.570
> 
> 标签：javascript, ajax, jquery

在我的 Web 应用程序中，我使用`$.ajax()`请求从数据库加载数据并将其显示在浏览器中。在执行请求期间，我显示`Loading Results ...`如下消息：

```
$.ajax({
    // ...
    beforeSend: function() {
        $('#loading-results-message').show();
    },
    complete: function() {
        $('#loading-results-message').hide(); 
    }
}); 
```

这工作正常。但是，如果要加载的数据不多，则请求只需要几分之一秒。在这种情况下，消息也只显示几分之一秒。这个动画发生得如此之快，以至于很难识别它。因此，如果能够仅在请求花费一定时间量（即至少几秒钟但不仅仅是几分之一秒）时才显示消息将是很好的。这有可能吗？顺便说一句，我在服务器端使用 Django，如果这很重要的话。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-14T18:11:48.160

用于`setTimeout`建立定时器，请求完成时取消定时器：

```
var desired_delay = 2000;
var message_timer = false;
$.ajax({
    // ...
    beforeSend: function() {
        message_timer = setTimeout(function () {
            $('#loading-results-message').show();
            message_timer = false;
        }, desired_delay);
    },
    complete: function() {
        if (message_timer)
            clearTimeout(message_timer);
        message_timer = false;
        $('#loading-results-message').hide(); 
    }
}); 
```

**文档**

*   `setTimeout`在 MDN - [https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)
*   `clearTimeout`在 MDN - [https://developer.mozilla.org/en-US/docs/DOM/window.clearTimeout](https://developer.mozilla.org/en-US/docs/DOM/window.clearTimeout)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T18:17:40.127

我和@chris 一起讨论这个解决方案。但也值得您花时间研究一下[http://api.jquery.com/jQuery.ajaxSetup/](http://api.jquery.com/jQuery.ajaxSetup/)

这将使您不必为每个请求编写超时。

# c# - 皮特波科新版本

> ID：14881279
> 
> 赞同：-1
> 
> 时间：2013-02-14T18:08:40.617
> 
> 标签：c#, petapoco, micro-orm

我注意到 github [https://github.com/toptensoftware/PetaPoco/](https://github.com/toptensoftware/PetaPoco/)上 petapoco 的最新提交 是 10 个月前。这个产品发生了什么？什么可以被认为是合适的替代品？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T18:53:29.610

由于该项目没有任何活动（没有拉取补丁并且忽略了讨论问题），我搬到了[Servicestack OrmLite](https://github.com/ServiceStack/ServiceStack.OrmLite)。PetaPoco 项目的问题是，它由一个人控制，没有足够的时间来更新项目。我认为 Dapper 或 Ormlite 将是一个不错的选择。

# r - CRAN 手册封面的附加字段

> ID：14881280
> 
> 赞同：0
> 
> 时间：2013-02-14T18:08:49.010
> 
> 标签：r, package

[XML 包](http://cran.r-project.org/web/packages/XML/XML.pdf)`Note:`包含CRAN 手册封面页的附加字段。我尝试添加`Note: blah blah`到包手册（我把它放在`Description`文件中），但它不是用 Note 创建的。如何在手册的封面上添加额外的字段（或者这可能是受限制的并且是个坏主意）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T18:17:52.417

我目前无法对此进行测试，但看起来“注释”行已添加到[文件`DESCRIPTION`中](http://cran.r-project.org/doc/manuals/R-exts.html#The-DESCRIPTION-file)。

# c# - Telerik 组合框 - 没有自动回发的视图状态

> ID：14881285
> 
> 赞同：0
> 
> 时间：2013-02-14T18:09:41.860
> 
> 标签：c#, asp.net, telerik

我关闭`AutoPostback`了我的控件，因为我需要使用 javascript 验证某些内容。如果一切正常，我将在隐藏按钮上进行回发。问题是组合框在页面重新加载时会丢失选定的值。`ViewStateMode`设置为`Enabled`. 我在 page_load 事件中填充组合框：

```
protected void Page_Load(object sender, EventArgs e)
{   
    (!IsPostback)
    {                     
        InitializeItems();    // Helper method that binds data
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T18:27:53.263

在进入 Telerik 的内部之前，您可以尝试解决最初的问题。你说你想在回发之前执行验证。

您所要做的就是注册要在表单提交时运行的脚本：

```
protected override void OnPreRender(EventArgs e)
{
    base.OnPreRender(e);

    this.Page.ClientScript.RegisterOnSubmitStatement(typeof(YourClass), this.UniqueID, "your validation script here.");
} 
```

然后为了取消回发，您的验证脚本需要返回 false。

# php - 是否有 URL 忽略

> ID：14881286
> 
> 赞同：0
> 
> 时间：2013-02-14T18:09:42.467
> 
> 标签：php

这个问题是以下问题的延续： [从 wordpress 中提取数据时出现的垃圾值](https://stackoverflow.com/questions/14880551/garbage-values-coming-on-pulling-data-from-wordpress)

我使用以下代码处理了垃圾值：

```
 htmlentities($entry->title, ENT_QUOTES | ENT_IGNORE, 'UTF-8') 
```

上面这段代码的问题是，如果数据中有任何 url，那么它不会显示该 url，而是将 url 破坏为如下所示：

`&#8230; <a href="http://abc.com/blog/">Continue reading <span class="meta-nav">&#8594;</span></a>`

如果有网址，请告诉我如何忽略。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T08:11:35.747

这是一个 hacky 解决方案，但是收集你如何处理这个而不用担心字符编码，你可能只是想让这该死的东西工作。

首先，我们将超链接转换为 hacky BBCode。然后，我们运行`htmlentities()`它，最后我们用旧的 HTML 替换 hacky `A`BBCode。看看这个：

```
$foo = 'Opening quietly in Chicagos West Loop, the Inspire Business Center is looking to take a more active role in Chicagos startup scene &#8230; Continue reading <span class="meta-nav">&#8594;</span>';
echo smartencode($foo);

function smartencode($str) {
     $tags = 'a|span';
     // Convert Anchor Tags to hacky-BBCode
     $ret = preg_replace('/\<(\/?('.$tags.').*)\>/U', '[$1]', $str);

     // Remove so-called Garbage
     $ret = preg_replace('/[^(\x20-\x7F)]*/','', $ret);
     // $ret = htmlentities($ret, ENT_QUOTES | ENT_IGNORE, 'UTF-8');

     // Reinstate Anchor tags in HTML
     $ret = preg_replace('/\[(\/?('.$tags.').*)\]/U', '<$1>', $ret);
     return $ret;
} 
```

再次，它*并不*优雅。事实上，如果你仔细观察，你会发现一些陷阱——但我认为它可能只适用于你的用例。

[在http://writecodeonline.com/php/](http://writecodeonline.com/php/)上测试并按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T08:15:47.953

使用修复特殊字符数据的 htmlspecialchars_decode() 函数正在修复 URL 问题。

以下代码行也与 URL 一起修复了垃圾值问题：

```
$ret = $feed;     
echo htmlspecialchars_decode(htmlentities($ret, ENT_QUOTES | ENT_IGNORE, 'UTF-8')); 
```

# actionscript-3 - 有没有办法更容易地删除听众？

> ID：14881289
> 
> 赞同：0
> 
> 时间：2013-02-14T18:09:49.837
> 
> 标签：actionscript-3, flash, actionscript, event-listener

所以，有一种简单的方法可以像这样从容器中删除所有孩子

```
while (container.numChildren)
{
    container.removeChildAt(0);
} 
```

有没有办法以复数形式删除 stage.eventListener（不知道我是否使用了正确的词），比如 stage.eventListeners？类似的东西？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T18:22:05.037

不，没有。至少没有公开可用的机制来跟踪事件侦听器。但是，你可以自己做。

基本上，您需要跟踪添加的每个侦听器。最简单的方法是扩展您想要执行此操作的类并覆盖`addEventListener()`.

```
private var listeners:Vector.<Object>;

override public function addEventListener( type:String, listener:Function, useCapture:Boolean = false, priority:int = 0, useWeakReference:Boolean = false ):void {
    var obj:Object = {
        type : type,
        listener : listener
    };
    this.listeners.push( obj );
    super.addEventListener( type, listener, useCapture, priority, useWeakReference );
}

override public function removeEventListener( type:String, listener:Function, useCapture:Boolean = false ):void {
    var i:Number, l:Number;
    l = this.listeners.length;

    for ( i = 0; i < l; i++ ) {
        if ( this.listeners[i].type == type && this.listeners[i].listener == listener ) {
            this.listeners.splice( i, 1 );
            break;
        }
    }

    super.removeEventListener( type, listener, useCapture );
}

public function removeAllEventListeners():void {
    var i:Number, l:Number;
    l = this.listeners.length;

    for ( i = 0; i < l; i++ ) {
        super.removeEventListener( this.listeners[i].type, this.listeners[i].listener );
    }
    this.listeners.splice( 0, this.listeners.length ); //empties the vector
} 
```

如果扩展类不是您的选择（因为您正在使用带有时间线的 Flash Pro，或者如果它是您需要从中删除所有事件侦听器的阶段），您可以在每次添加事件时手动将其添加到 Vector听众。它不像我上面描述的那样简单，但它仍然可以工作。

请注意，您可能应该将该`useCapture`属性添加到正在保存的对象并检查它，但老实说，我从未将该属性设置为默认值，因此我没有将其包含在我的代码中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T18:18:05.990

在 FlashPlayer 11 中，`DisplayObjectContainer`支持`removeChildren`删除所有子项的功能。所以你可以用你的while循环替换`container.removeChildren()`

至于删除所有 eventListener，没有内置方法。但是，您可以自己编写一些东西来跟踪添加到特定对象的所有侦听器，从而允许您通过循环遍历集合来删除它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T18:21:31.460

不幸的是，简短的回答是这是不可能的。默认情况下，事件调度程序不会公开跟踪注册的侦听器。因此，您不能遍历某些列表并将它们全部删除。

您必须记住自己添加的听众。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T23:14:07.867

有一个非常简单的解决方案，Robert Penner 的非凡信号库。这是一个例子：

```
import org.osflash.signal.Signal;

public class Rocket()
{
    //  Signals are used to dispatch messages to interested parties
    public var enginesFiredSignal:Signal;
    public function Rocket()
    {
        //  You have to instantiate the signal for it to do anything
        enginesFiredSignal = new Signal();
    }

    public function fireEngines():void
    {
        //  Dispatch will notify any interested parties
        enginesFiredSignal.dispatch();
    }

    public function dispose():void
    {
        //  This is the magic call... it removes *all* interested parties.
        //  No need to iterate through them and removeEventListeners.
        enginesFiredSignal.removeAll();
    }
}

public class Academy()
{
    public var rocket:Rocket;
    public function Academy()
    {
        rocket = new Rocket();
        //  We are interested to know *when* the engines fire,
        //  so we "add" ourself to the Signal.
        rocket.enginesFiredSignal.add( enginesFiredHandler );
        //  This call will force the Signal to do its thing
        rocket.fireEngines();
        //  Disposing of the Rocket will automatically remove us from
        //  its Signal. No further event removal or maintenance required.
        rocket.dispose();
    }

    public function enginesFiredHandler():void
    {
        trace( "engines were fired" );
    }
} 
```

你可以*超越*这个来做参数传递和各种有趣的事情。我建议你看看他的博客。

[http://flashblog.robertpenner.com](http://flashblog.robertpenner.com)

这是有关如何开始使用 AS3 信号的教程：

[http://www.youtube.com/watch?v=wB_sWJ5EgXI](http://www.youtube.com/watch?v=wB_sWJ5EgXI)

# java - 使用 NIO 避免高 CPU 使用率

> ID：14881294
> 
> 赞同：3
> 
> 时间：2013-02-14T18:10:11.087
> 
> 标签：java, network-programming, cpu-usage

我编写了一个多线程游戏服务器应用程序，它使用[NIO](http://docs.oracle.com/javase/7/docs/api/java/nio/package-summary.html)处理多个同时连接。不幸的是，一旦第一个用户连接，该服务器就会在一个核心上产生完整的 CPU 负载，即使该用户实际上并未发送或接收任何数据。

下面是我的网络处理线程的代码（为了便于阅读，缩写为基本部分）。该课程`ClientHandler`是我自己的课程，为游戏机制进行网络抽象。以下示例中的所有其他类均来自`java.nio`.

如您所见，它使用`while(true)`循环。我的理论是，当一个键是可写的时，`selector.select()`会立即返回并被`clientHandler.writeToChannel()`调用。但是当处理程序返回而不写任何东西时，密钥将保持可写状态。然后立即再次调用 select 并立即返回。所以我忙着转。

**有没有办法设计网络处理循环，只要clientHandlers没有数据发送，它就会休眠？**请注意，低延迟对我的用例至关重要，因此当没有处理程序有数据时，我不能让它休眠任意数量的毫秒。

```
ServerSocketChannel server = ServerSocketChannel.open();
server.configureBlocking(false);
server.socket().bind(new InetSocketAddress(port));
Selector selector = Selector.open();
server.register(selector, SelectionKey.OP_ACCEPT);
// wait for connections

while(true)
{
     // Wait for next set of client connections
    selector.select();
    Set<SelectionKey> keys = selector.selectedKeys();
    Iterator<SelectionKey> i = keys.iterator();
    while (i.hasNext()) {
        SelectionKey key = i.next();
        i.remove();

        if (key.isAcceptable()) {
            SocketChannel clientChannel = server.accept();
            clientChannel.configureBlocking(false);
            clientChannel.socket().setTcpNoDelay(true);
            clientChannel.socket().setTrafficClass(IPTOS_LOWDELAY);
            SelectionKey clientKey = clientChannel.register(selector, SelectionKey.OP_READ | SelectionKey.OP_WRITE);
            ClientHandler clientHanlder = new ClientHandler(clientChannel);
            clientKey.attach(clientHandler);
        }
        if (key.isReadable()) {
            // get connection handler for this key and tell it to process data 
            ClientHandler clientHandler = (ClientHandler) key.attachment();
            clientHandler.readFromChannel();
        }
        if (key.isWritable()) {
            // get connection handler and tell it to send any data it has cached 
            ClientHandler clientHandler = (ClientHandler) key.attachment();
            clientHandler.writeToChannel();
        }
        if (!key.isValid()) {
            ClientHandler clientHandler = (ClientHandler) key.attachment();
            clientHandler.disconnect();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-14T23:59:47.177

```
SelectionKey clientKey = clientChannel.register(selector, SelectionKey.OP_READ | SelectionKey.OP_WRITE); 
```

问题就在这里。SocketChannel 几乎总是可写的，除非套接字发送缓冲区已满。因此，它们通常不应注册，`OP_WRITE:`否则您的选择器循环将旋转。只有在以下情况下才应如此注册：

1.  有东西要写，而且
2.  先前`write()`已返回零。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-14T18:26:37.543

我看不出为什么必须使用同一个选择器进行读取和写入。我会在线程中使用一个选择器进行读取/接受操作，它会一直阻塞，直到新数据到达。

然后，使用单独的线程和选择器进行写入。您提到您正在使用缓存来存储消息，然后再将它们发送到可写通道上。实际上，通道不可写的唯一情况是内核的缓冲区已满，因此它很少不可写。实现这一点的一个好方法是有一个专用的编写器线程，它被赋予消息并处于休眠状态；它可以在`interrupt()`应该发送新消息时使用，也可以`take()`在阻塞队列上使用。每当有新消息到达时，它将解除阻塞，`select()`对所有可写键执行操作并发送任何未决消息；仅在极少数情况下，消息必须保留在缓存中，因为通道不可写。

# python - 如何调用拆分方法

> ID：14881302
> 
> 赞同：0
> 
> 时间：2013-02-14T18:10:41.660
> 
> 标签：python, split

假设我有一个名为 wordpop.txt 的文件中的数据：

```
Australia/AU/36/8177/22919  
Austria/AT/40/6936/8429
Azerbaijan/AZ/31/2896/9421
Bahamas/BS/44/79/351 
```

我现在想要一个字符串方法来划分每个“/”处的每一行，我想调用字符串方法。我知道我可以像这样使用拆分：

```
file=open("wordpop.txt","r")
rader = file.readlines()
for line in rader[5:]:
    line=line.split("/") 
```

但我该怎么称呼它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T18:15:28.043

我认为你的问题是你期望元素在`rader`你这样做时会改变`line=line.split("/")`，但重新分配`line`不会改变你列表中的相应行。尝试将循环更改为以下内容：

```
for i, line in enumerate(rader[5:], 5):
    rader[i] = line.split("/") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T18:16:38.940

如果我理解正确，您需要在应用`split`.

我也会`with`在处理文件时使用并为此创建另一个列表，例如：

```
with open("wordpop.txt","r") as file:
    new_list = [line.split('/') for line in file.readlines()[5:]] 
```

# iphone - 使用 Kal 日历选择事件

> ID：14881303
> 
> 赞同：0
> 
> 时间：2013-02-14T18:10:57.337
> 
> 标签：iphone, uitableview, kal

我正在使用[Kal Calendar](https://github.com/klazuka/Kal)向我的应用程序添加日历视图，但在事件列表上实现 didSelectRowAtIndexPath 方法时遇到问题。当用户选择任何一天的事件时，我想推送一个视图控制器。我尝试将方法放在“KalView.m”、“KalViewController.m”和“KalDataSource.m”中，但没有一个被识别。调用这种方法的合适位置在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T04:03:09.137

我曾经遇到过类似的问题，这是我实现它的方式。

```
#import <MTDates/NSDate+MTDates.h>
#import <ObjectiveSugar/ObjectiveSugar.h>
#import <UIImageView+WebCache.h>

#import "EventsViewController.h"
#import "EventDetailsViewController.h"
#import "EventCell.h"
#import "Event.h"

#import "KalViewController.h"
#import "CalendarViewController.h"

@implementation EventsViewController

- (id)initWithEvents:(NSArray *)_events {
    self = [super init];
    events = _events;
    return self;
}

- (void)viewDidLoad {
    [super viewDidLoad];
    [self listUpdated];
    [self addCalendarView];
}

- (void)listUpdated
    {

        NSMutableArray *allEvents = [NSMutableArray array];
        [allEvents addObjectsFromArray:events];

        NSArray *sortedArray = [allEvents sortedArrayUsingComparator:^NSComparisonResult(Event *obj1, Event *obj2) {
            return [obj1.date compare:obj2.date];
        }];

        _allEvents = sortedArray;
    }

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [_allEvents count];
}

- (UITableViewCell*)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
//custom table cell (EventCell is a view I'm initialising my rows with)
    Event *event = _allEvents[indexPath.row];
    NSString *reuseIdentifier = [NSString stringWithFormat:@"Cell%@%@", event.venue.identifier, event.identifier];
    EventCell *cell = (EventCell*) [tableView dequeueReusableCellWithIdentifier:reuseIdentifier];
    if (!cell) {
        cell = [EventCell createDetailedCellWithReuseIdentifier:reuseIdentifier];
        cell.nameLabel.text = event.name;
    }
    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    Event *event = _allEvents[indexPath.row];
    EventDetailsViewController *controller = [[EventDetailsViewController alloc] initWithEvent:event];
    [self.navigationController pushViewController:controller animated:YES];
}

- (void) addCalendarView{
    _calenderView = [[KalViewController alloc] initWithSelectedDate:[NSDate date]];
    [[self.view viewWithTag:2] addSubview:_calenderView.view]; /* depends on your requirements*/
    _calenderView.view.tag = 200; /* not necessary */
    [_calenderView.view setFrame:self.view.bounds];
    _calenderView.dataSource = self;
    _calenderView.delegate = self;
}

- (void)loadItemsFromDate:(NSDate *)fromDate toDate:(NSDate *)toDate {
    //NSLog(@"%@, %@", fromDate, toDate);
    // filter and pass the array to the events tableview
    [self filterByDateSelected:toDate];
}

-(void)presentingDatesFrom:(NSDate *)fromDate to:(NSDate *)toDate delegate:(id<KalDataSourceCallbacks>)delegate
{
   /** when selecting a different month **/
}

- (void)removeAllItems
{
    NSLog(@"Items Removed");
    // remove all the previous items from the tableview
}

-(void) filterByDateSelected: (NSDate *)selectedDate
{
    NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    [dateFormat setDateFormat:@"yyyy-MM-dd"];

    NSString *theDate = [dateFormat stringFromDate:selectedDate];
    NSDate *_date = [NSDate dateFromString:theDate usingFormat:@"yyyy-MM-dd"];

    // filter table by selectedDate
    NSArray *_dateFilteredEvents = _allEvents;

    _dateFilteredEvents = [_allEvents filteredArrayUsingPredicate:[NSPredicate predicateWithBlock:^BOOL(Event *evaluatedEvent, NSDictionary *bindings) {
        if ([evaluatedEvent.date isEqualToDate:_date]) {
            return YES;
        }
        return NO;
    }]];
    NSLog(@"%@", _dateFilteredEvents);

     //  uncomment the following line if you want to display list in another controller 
    //[self showEventsByDate:_dateFilteredEvents];

   // or else refresh table after updating the list
  _allEvents = _dateFilteredEvents;
        [_tableView reloadData];
}

- (void) showEventsByDate:(NSArray*)events
{
    if (events.count > 0) {
        CalendarViewController *_controller = [[CalendarViewController alloc] initWithEventArray:events];
        [self.navigationController pushViewController:_controller animated:YES];
    }
}

- (void) removeCalenderView{
    [_calenderView.view removeFromSuperview];
}

@end 
```

# asp.net - Firefox 中过分热心的“记住我的密码”

> ID：14881311
> 
> 赞同：1
> 
> 时间：2013-02-14T18:11:18.260
> 
> 标签：asp.net, html, asp.net-mvc, firefox

我有 Firefox 为我的网站“记住我的密码”，并且我有一个允许我创建新用户的屏幕，所以它有用户名和密码的输入。这些输入的名称与登录页面上的名称完全不同，但它们是由 Firefox 填写的。Chrome 中不会发生相同的行为。

有没有其他人经历过这个？

登录页面：

```
<label for="UserName">User name</label>
<input id="UserName" type="text" name="UserName" data-val-required="The User name field is required." data-val="true" class="valid"> 
```

创建用户页面：

```
<label for="NewUserNameForCreation">User name</label>
<input id="NewUserNameForCreation" type="text" name="NewUserNameForCreation" data-val-required="The User name field is required." data-val="true" class="valid"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T18:14:21.917

我自己没有看到这种行为，但是您是否尝试将`autocomplete`属性添加到您的`input`?

```
<input id="NewUserNameForCreation" autocomplete="off" type="text" name="NewUserNameForCreation" data-val-required="The User name field is required." data-val="true" class="valid"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:05:46.177

更改密码后，旧密码不再有效。无论您使用何种浏览器，您都必须使用新密码才能访问您的帐户。

许多网站问题可能是由损坏的 cookie 或缓存引起的。为了尝试解决这些问题，第一步是清除 cookie 和缓存。注意：这将使您暂时退出您登录的所有站点。要清除缓存和 cookie，请执行以下操作：

1) 转到 Firefox > 历史记录 > 清除最近的历史记录或（如果没有显示 Firefox 按钮）转到工具 > 清除最近的历史记录。

2 )在“清除时间范围”下，选择“全部”。

3）现在，单击详细信息旁边的箭头以激活详细信息列表。从详细信息列表中，选中 Cache 和 Cookies 并取消选中其他所有内容。

4）现在单击立即清除按钮。更多信息可以在[清除 Firefox 中的缓存、历史记录和其他个人信息一文中](http://support.mozilla.org/en-US/kb/clear-cache-history-and-personal-information)找到。

这是否解决了您的问题？请向我们报告！

谢谢！！！[

# algorithm - 文本文件中的数据顺序是否会影响其压缩率？

> ID：14881312
> 
> 赞同：7
> 
> 时间：2013-02-14T18:11:27.417
> 
> 标签：algorithm, compression, zip

我有 2 个大文本文件（准确地说是 csv）。两者具有完全相同的内容，只是一个文件中的行顺序相同，而另一个文件中的行顺序不同。

当我压缩这两个文件（以编程方式，使用 DotNetZip）时，我注意到其中一个文件总是相当大 - 例如，一个文件比另一个文件大约 7 MB。-

我的问题是：

文本文件中的数据顺序如何影响压缩以及可以采取哪些措施来保证最佳压缩率？- 我认为将相似的行组合在一起（至少在我正在使用的 ZIP 文件的情况下）将有助于压缩，但我不熟悉不同压缩算法的内部结构，我会很感激快速解释在这个问题上。

哪种算法可以更好地处理这种情况，无论数据的顺序如何，都能实现最佳的平均压缩？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-14T23:16:07.213

“如何”已经回答了。要回答您的“哪个”问题：

匹配窗口越大，算法对订单的敏感度就越低。然而，所有压缩算法都会在某种程度上敏感。

gzip 有一个 32K 的窗口，bzip2 有一个 900K 的窗口，而 xz 有一个 8MB 的窗口。xz 可以达到 64MB 的窗口。所以 xz 对订单最不敏感。距离较远的匹配将花费更多位进行编码，因此无论窗口大小如何，您总是可以通过排序记录获得更好的压缩。短窗口只是排除了远距离匹配。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-14T18:15:46.250

在某种意义上，它是文件[熵](http://en.wikipedia.org/wiki/Entropy_%28information_theory%29)的度量，定义了它的压缩程度。所以，是的，顺序绝对重要。举个简单的例子，考虑一个充满`abcdefgh...zabcd...z`重复值的文件。大多数算法都可以很好地压缩它，因为它非常有序。但是，如果您完全随机化顺序（但每个字母的计数相同），那么它具有完全相同的数据（尽管“含义”不同）。它是不同顺序的相同数据，也不会压缩。

事实上，因为我很好奇，我只是尝试了一下。我用 100,000 个重复字符填充了一个数组`a-z`，将其写入文件，然后“随机”打乱该数组并再次写入。第一个文件压缩到 394 字节（小于原始大小的 1%）。第二个文件压缩到 63,582 字节（超过原始大小的 63%）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-14T18:34:10.690

典型的压缩算法如下工作。看一大块数据。如果它与其他最近看到的块相同，请不要按字面意思输出当前块，而是输出对那个较早块的引用。

当相似的块靠得很近时，它肯定会有所帮助。该算法将仅保留有限数量的回溯数据以保持合理的压缩速度。因此，即使一块数据与其他块相同，如果那个旧块太旧，它可能已经被刷新掉了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T16:19:48.353

当然可以。如果输入模式是固定的，则有 100% 的机会预测每个位置的字符。鉴于两方都知道他们的数据流（这基本上等于说他们知道固定模式），几乎不需要传达任何内容：完全压缩是可能的（传达有限长度的字符串，而不是无限的流，你' d 仍然需要对长度进行编码，但这有点离题了）。如果对方不知道该模式，您需要做的就是对其进行编码。完全压缩是可能的，因为您可以用有限的数据量编码无限的流。

在另一个极端，如果你有完全随机的数据——所以流可以是任何东西，下一个字符总是可以是任何有效字符——就不可能进行压缩。流必须完全完整地传输，对方才能重建正确的流。

有限字符串有点棘手。由于有限字符串必须包含每个字符的固定数量的实例，因此一旦您开始读取初始标记，概率就必须改变。可以将某种顺序读*入*任何有限字符串。

不确定这是否回答了您的问题，但它在理论上解决了一些问题。

# facebook-graph-api - facebook 上的页面类别列表

> ID：14881313
> 
> 赞同：4
> 
> 时间：2013-02-14T18:11:30.297
> 
> 标签：facebook-graph-api, facebook-page, koala

我正在开发 facebook 搜索，我想列出所有页面类别（不相关，但我正在使用 koala ruby​​ gem）：

type="page" 的搜索结果如下：

```
{"category"=>"Community", "name"=>"Koala", "id"=>"7356642860"}
{"category"=>"Product/service", "name"=>"Koala Groupe", "id"=>"188919981197745"}
{"category"=>"Public figure", "name"=>"Cushelle Koala", "id"=>"109202405786555"}
{"category"=>"Dancer", "name"=>"Koala Dance Bots", "id"=>"208563099183596"}
{"category"=>"Musician/band", "name"=>"Kid Koala", "id"=>"17527901121"}
{...} 
```

我正在尝试开发一种表单以允许用户实现更精确的搜索。

然后，我希望用户有一个**类别列表**，但是：如何获取 facebook 页面类别列表？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-06-11T17:03:15.043

使用以下 API 获取页面类别列表

```
FB.api(
  '/fb_page_categories',
  'GET',
  {},
  function(response) {
      // Insert your code here
  }
);
You will get response as
 {
    "data": [
      {
        "name": "Advertising/Marketing",
        "fb_page_categories": [
          {
            "name": "Advertising Agency",
            "id": "164886566892249"
          },
          {
            "name": "Brand Agency",
            "id": "1736039333278498"
          },
          {
            "name": "Copywriting Service",
            "id": "197029287003787"
          },
          {
            "name": "Digital/Online Marketing Agency",
            "id": "1751954525061797"
          },
          {
            "name": "Internet Marketing Service",
            "id": "1706730532910578"
          },
          {
            "name": "Marketing Agency",
            "id": "123377808095874"
          },
          {
            "name": "Marketing Consultant",
            "id": "170992992946914"
          },
          {
            "name": "Media Agency",
            "id": "281507032196735"
          },
          {
            "name": "Public Relations Agency",
            "id": "192021210817573"
          },
          {
            "name": "Social Media Agency",
            "id": "530553733821238"
          },
          {
            "name": "Telemarketing Service",
            "id": "197557456921449"
          }
        ],
        "id": "1757592557789532"
      }

and so on.... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-28T19:27:15.293

这里有一个类似的问题：

[所有 Facebook 子类别的权威列表](https://stackoverflow.com/questions/15488834/authoritative-list-of-all-facebook-subcategories/18496526#18496526)

我回应了。希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-26T09:58:16.787

一个标准的 Graph API 调用是：

`https://graph.facebook.com/v2.10/fb_page_categories?access_token={access_token_obfuscated}`

# node.js - node.js - 简单的 hello world 应用程序不起作用

> ID：14881316
> 
> 赞同：0
> 
> 时间：2013-02-14T18:11:33.887
> 
> 标签：node.js

我正在努力学习 Node.js，但由于缺乏教程，我很难学习它。

所以我有以下代码 -

```
var http = require('http');

var server = http.createServer();

http.request(function (req, res) {

    res.writeHead(200);

    res.write("Hello World");

    res.end();
});

server.listen(5000); 
```

所以在我编译它之后，我输入 chrome`localhost:5000`并且废话它不起作用..
我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T18:18:05.297

看看[nodejs网站](http://nodejs.org/)

```
var http = require('http');

http.createServer(function (req, res) {

    res.writeHead(200);

    res.write("Hello World");

    res.end();
});

server.listen(5000); 
```

# android - Android渲染和物理在不同的线程上？

> ID：14881318
> 
> 赞同：4
> 
> 时间：2013-02-14T18:11:38.967
> 
> 标签：android, multithreading, surfaceview, physics

我最近遇到了让我的物理在渲染之前停止比赛的问题（它们在同一个线程上），几个月后，我通过创建一个新线程并将物理放入其中，在大约 20 分钟内解决了这个问题。

我发现将它们完全分开可以让我更好地控制，现在我的精灵在所有屏幕上以所有帧速率一致地移动。

我的问题是，将逻辑和渲染放在同一个线程或单独的线程中是否“更好”？后者对我来说似乎更好，但它会导致任何问题吗？（例如是否会影响电池寿命？）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T18:23:06.427

实际上，使用不同的线程来执行逻辑和渲染 UI 真的而且总是很受欢迎。而且它也是正确的。

但是处理/管理多线程是程序员更难的责任。

而且由于线程也会增加电池消耗，所以我们应该始终非常小心地使用线程。

所以最终的结果是使用线程，但要小心。因为线程是有用的被最佳使用，但危险的使用不小心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T18:32:16.357

是的，使用多个线程肯定会更好，尤其是在计算不重要的情况下，在这种情况下，您可能会遇到可怕的“活动无响应”对话框。

我肯定会研究的东西是`AsyncTasks` [http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)。本质上，您将在方法中执行所有物理计算`doInBackground`（在后台线程中运行），然后定期`publishProgress`从该方法中调用（这将执行“onProgressUpdate”回调，您将在 UI 线程上进行所有渲染）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-03T05:00:37.360

你说......“我正在使用surfaceView，据我所知，它使用单独的线程进行渲染（与UI线程分开） - 所以我有3个线程”

听起来您假设通过扩展 SurfaceView，您会自动获得另一个与 UI 线程分开的 Surface 底层线程。我相信事实并非如此。

来自 SurfaceView 的 Android 开发人员参考：“此类的目的之一是提供一个表面，辅助线程可以在其中呈现到屏幕中。” 关键词是*can*。您仍然必须自己生成单独的线程，SurfaceView 只是使在单独的线程中绘制到画布变得更容易。

如果以 LunarLander 为例，它只有两个线程：UI 线程和手动生成的“LunarThread”，其中更新物理并绘制画布（通过 SurfaceHolder.lockCanvas()），速度最快可能，独立于 UI 线程。

# javascript - 砌体在某些分辨率下不工作

> ID：14881321
> 
> 赞同：0
> 
> 时间：2013-02-14T18:11:51.853
> 
> 标签：javascript, jquery, jquery-masonry

我的砖石工作得很好，但它似乎不适用于某些分辨率。我检查了代码，所有边距/宽度都应该没问题。有时这只是在砌体中发生，还是有办法解决这个问题？

[你可以在http://i.imgur.com/2LnqZPx.png](http://i.imgur.com/2LnqZPx.png)查看这个简单的截图

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T19:20:27.143

砌体的问题在于它只使用一个维度。当您想将矩形打包成二维时，您需要一些适用于二维的东西，因此在该分辨率下存在一个小间隙？这家伙开发了完美的砌体：[https ://github.com/DrewDahlman/Mason](https://github.com/DrewDahlman/Mason)

# ruby-on-rails - Ruby on Rails 通过 api 查询从模型中获取属性

> ID：14881329
> 
> 赞同：0
> 
> 时间：2013-02-14T18:12:11.857
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-activerecord

这个问题的答案应该很简单，但我还没有通过[活动记录查询指南](http://guides.rubyonrails.org/active_record_querying.html)、SO 上的其他问题或在 Rails 控制台中乱来找到答案。

我只是想通过活动记录查询接口来查询数据库，并返回第一个或最后一个条目的单个列的值，而不必遍历整个表（稍后会解释）。

有一种方法可以使用 pluck 执行此操作，但是查询消息的结构如下：

```
 initial = Message.where("id = ?", some_id).pluck(:value).first
    final   = Message.where("id = ?", some_id).pluck(:value).last 
```

不幸的是，这是一个非常低效的操作，因为它会`value`从每条与提供的匹配项匹配的记录中提取属性`id`，然后只返回第一个或最后一个条目。我想基本上将这些陈述重新排序为：

```
 initial = Message.where("id = ?", some_id).first.pluck(:value)
    final   = Message.where("id = ?", some_id).last.pluck(:value) 
```

但是，我得到一个 NoMethodError 解释没有`pluck`Message 的方法。我尝试过多种方式来做到这一点：

```
 initial = Message.where("id = ?", some_id).first(:value)
    initial = Message.where("id = ?", some_id).first.select(:value)
    ... 
```

但都返回某种错误。我知道返回

**哎呀**
，我的问题的一部分被切断了（包括我最后得到的答案） - 我会看看我是否能找到它，但我使用该`select()`方法进行了探索，在该方法中我发现 select 只接受一个参数，意思是一个查询必须构建字符串，因为它不能接受像这样的可选参数`id = ?, some_id`，但后来我发现只需附加一个`.value`（`value`您要获取的列属性在哪里）就可以了，所以我切换回`where`如下答案所示的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T18:12:11.857

答案在问题中，但是如果您尝试执行以下操作：

```
 initial = Message.where("id = ?", some_id).pluck(:value).first
    final   = Message.where("id = ?", some_id).pluck(:value).last 
```

把它改成这个（只引用列名，在这个例子中它是`value`，但它可能是`amount`什么）：

```
 initial = Message.where("id = ?", some_id).first.value
    final   = Message.where("id = ?", some_id).last.value 
```

# lua - 全局变量不好，这会以任何方式提高性能吗？

> ID：14881331
> 
> 赞同：2
> 
> 时间：2013-02-14T18:12:17.957
> 
> 标签：lua, luajit

我在 LuaJIT 工作，我所有的库和其他东西都存储在“foo”中，如下所示：

```
foo = {}; -- The only global variable
foo.print = {};
foo.print.say = function(msg) print(msg) end;
foo.print.say("test") 
```

现在我想知道，是否会使用元表并保持所有库的本地帮助？或者这不重要。我想到的是这样的：

```
foo = {};
local libraries = {};

setmetatable(foo, {
    __index = function(t, key)
        return libraries[key];
    end
});

-- A function to create a new library.
function foo.NewLibrary(name)
    libraries[name] = {};

    return libraries[name];
end;

local printLib = foo.NewLibrary("print");

printLib.say = function(msg) print(msg) end;

-- Other file:
foo.print.say("test") 
```

我现在真的没有工具来对此进行基准测试，但是将库的实际内容保存在本地表中会提高性能吗？哪怕是一点点？

我希望我清楚这一点，基本上我想知道的是：性能方面，第二种方法更好吗？

如果有人可以链接/详细解释如何在 Lua 中处理全局变量，这也可以解释这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T20:07:58.500

> 现在真的没有工具来对此进行基准测试

你当然知道。

```
local start = os.clock()
for i=1,100000 do -- adjust iterations to taste
    -- the thing you want to test
end
print(os.clock() - start) 
```

对于性能，您几乎总是希望进行基准测试。

> 将库的实际内容保存在本地表中会提高性能吗？

与第一个版本的代码相比？理论上没有。

你的第一个例子（去掉不必要的东西）：

```
foo = {}
foo.print = {}
function foo.print.say(msg)
    print(msg)
end 
```

要使用您的打印功能，需要三个表查找：

1.  使用“foo”索引 _ENV
2.  `foo`带有“打印”的索引表
3.  `foo.print`带有“say”的索引表。

你的第二个例子：

```
local libraries = {}
libraries.print = {}
function libraries.print.say(msg)
    print(msg)
end

foo = {}
setmetatable(foo, {
    __index = function(t, key)
        return libraries[key];
    end
}); 
```

要使用您的打印功能，现在需要进行五次表查找以及其他额外工作：

1.  使用“foo”索引 _ENV
2.  `foo`带有“打印”的索引表
3.  Lua 发现结果为 nil，检查是否`foo`有元表，找到一个
4.  带有“__index”的索引元表
5.  检查结果是表还是函数，Lua发现它是一个函数，所以它用键调用它
6.  `libraries`带有“打印”的索引
7.  `print`用“say”索引表

其中一些额外的工作是在 C 代码中完成的，所以它会比全部在 Lua 中实现要快，但肯定会花费更多时间。

使用我上面展示的循环进行基准测试，第一个版本在 vanilla Lua 中的速度大约是第二个版本的两倍。在 LuaJIT 中，两者的速度完全相同。显然，差异在 LuaJIT 运行时得到了优化（这令人印象深刻）。只是表明基准测试的重要性。

* * *

旁注：Lua 允许您为 提供一个表`__index`，这将导致与您的代码等效的查找：

```
setmetatable(foo, { __index = function(t, key) return libraries[key] end } ) 
```

所以你可以写：

```
setmetatable(foo, { __index = libraries }) 
```

这也恰好要快得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-05T21:49:37.030

这是我编写模块的方式：

```
-- foo.lua
local MyLib = {}

function MyLib.foo()
    ...
end

return MyLib

-- bar.lua
local MyLib = require("foo.lua")
MyLib.foo() 
```

请注意，`return MyLib`不在函数中。`require`捕获此返回值并将其用作库。这样，就没有全局变量了。

# shell - 在文件 Unix/Mac 中追加和前置标题和尾部

> ID：14881332
> 
> 赞同：1
> 
> 时间：2013-02-14T18:12:15.683
> 
> 标签：shell, unix, command-line

我正在尝试将标题和预告片添加到一个非常大的文件中。

到目前为止，我已经尝试过 sed 和 awk。Sed 我无法通过在线示例在 Mac 上工作。awk 我要去上班，但只显示到屏幕输出。

使用本网站作为参考。

[http://www.theunixschool.com/2011/03/different-ways-to-add-header-and.html](http://www.theunixschool.com/2011/03/different-ways-to-add-header-and.html)

使用 AWk 我如何真正得到它来更新我的文件。也接受其他建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T18:19:23.407

```
cat header big_file footer > tmp_file && mv tmp_file big_file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T18:27:08.853

这适用于 unix/linux：

```
cat headerfile myfile trailerfile > newfile 
```

# html - jQuery Ajax 响应后动态链接不起作用

> ID：14881335
> 
> 赞同：1
> 
> 时间：2013-02-14T18:12:24.963
> 
> 标签：html, jquery

我有由 ajax 响应创建的动态菜单链接。它仅在页面最初加载但不是新页面时有效。我尝试使用 .On 绑定它，但这不起作用。请参阅代码和标记。希望有人知道为什么它不会绑定。

```
 $(document).ready(function(){
        $(document).on('click', function(e) {
                var $clicked = $(e.target);
                if (! $clicked.parents().hasClass("menu")){
                    $(".menu dd ul").hide();
                    $(".menu dt a").removeClass("selected");
                }

        });

        $(".menu dt a").on('click', function(e) {

            var clickedId = "#" + this.id.replace(/^link/,"ul");

                // Hides everything else that the current menu 
            $(".menu dd ul").not(clickedId).hide();

                //Toggles the menu.
            $(clickedId).toggle();

                //Add the selected class.
            if($(clickedId).css("display") == "none"){
                $(this).removeClass("selected");
            }else{
                $(this).addClass("selected");
            }

        });
}); 
```

标记如下。

```
 <div class="floatLeft" style="width:15px;">
            <dl style="" class="menu">
               <dt>
               <a class="" id="linkglobal_1" style="cursor: pointer;"></a><span class="result"></span></dt>
                <dd>
                    <ul style="display: none;" id="ulglobal_1">
                        <li><a href="#">Friends</a></li>
                        <li><a href="#">Only Me</a></li>
                        <li><a href="#">Customize</a></li>
                  </ul>
               </dd>
            </dl>
        </div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T18:21:03.060

事件委托需要这种方式：

```
$(document).on('click', ".menu dt a", function(e) { 
```

# web-applications - 面向公众的网站设计

> ID：14881339
> 
> 赞同：0
> 
> 时间：2013-02-14T18:12:39.877
> 
> 标签：web-applications, playframework

我正在使用 Play 网络框架 1.2.4。

我的应用程序中有用户配置文件，并希望向未登录的人打开它。

所以如果我的网站是[http://www.testsite.com](http://www.testsite.com)

我希望 htp://www.testsite.com/user1 显示 user1 的个人资料，htp://www.testsite.com/user2 显示 user2 的个人资料等所有用户。就像facebook是如何做到的。

您能否建议这样做的最佳方法是什么，以及如何让谷歌和其他搜索引擎索引个人资料页面。

上面 url 中的“htp”实际上是 http。如果我有超过 2 个网址，它不会让我提交问题。

谢谢，萨万

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T20:26:37.903

好吧，首先，创建一个控制器方法，该方法为您希望在用户访问 www.testsite.com/user1 时看到的站点提供服务。假设这是控制器中的`bar(String username)`方法。`Foo`所以你有类似的东西：

```
public class Foo extends Controller {

    public static void bar(String username) {
        // Do something in here and render the response. I will just render a sample text here.
        renderText("Hello " + username + "!");
    }

} 
```

现在您只需要设置路线。所以在路由文件中，输入如下内容：

```
GET     /{username}         Foo.bar(username) 
```

请记住，路由文件中路由的顺序很重要，因此请确保此路由位于底部，以便`/edit/{id}`在此路由之前定义类似的路由。否则 play 可能会将请求解析`site.com/edit/123`为调用`Foo.bar("edit/123")`而不是调用某些`Foo2.edit(123)`方法，这在大多数情况下可能不是您想要的。

当您尝试此操作并转到`http://localhost:9000/sawan`现在时，应该会显示`Hello sawan!`. 添加适当的模型和代码，您现在可以在该页面上显示您想要的任何内容。

至于谷歌索引，爬虫需要能够发现这些用户页面。您可以创建站点地图并将其添加到 google ( [http://support.google.com/webmasters/bin/answer.py?hl=en&answer=156184](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=156184) )。要使其动态更新，您可能需要创建这些用户页面的索引并使其可供谷歌访问，例如通过站点地图或主页上的链接等。但我不是 SEO 专家，所以你可能会更好自己用谷歌搜索更多信息。

# batch-file - 使用批处理脚本将一些文本添加到多个文件夹

> ID：14881341
> 
> 赞同：0
> 
> 时间：2013-02-14T18:12:43.993
> 
> 标签：batch-file, version, directory, rename

我有一些像这样的软件文件夹：

CCleaner 3.17
火狐 v.18.0.2
前卫浏览器 v2013.01.09

正如你所看到的，其中一些有“v”和“v”。作为版本指示器，有些没有。

我正在尝试找到一种添加“v”的方法。在使用批处理文件的文件夹及其所有子文件夹中的编号之前。如果它没有“v”或“v”。添加“v” 如果它有“v”，则将其替换为“v”。如果它有“v”。没做什么。

如果您能在这件事上帮助我，我将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T22:25:44.733

这有点棘手。我的解决方案假定版本号是现有文件夹名称中最后一个空格之后的剩余文本。

下面的代码将适当地重命名当前目录中名称中至少有一个空格的所有文件夹。它不会递归到子文件夹中。`!`如果版本文本包含or ，则代码将中断`=`，尽管这不太可能成为问题。

```
@echo off
setlocal disableDelayedExpansion
for /d %%F in ("* *") do (
  set "folder=%%F"
  setlocal enableDelayedExpansion
  for %%A in ("!folder: =\!") do (
    for /f "eol=: tokens=* delims=v." %%B in ("%%~nxA") do (
      if "%%~nxA" neq "v.%%~B" ren "!folder!" "!folder:%%~nxA=v.%%~B!"
    )
  )
  endlocal
) 
```

如果要递归到子文件夹，则需要一个外循环，并且文件夹必须以相反的顺序排序，以便首先处理最深的文件夹。

```
@echo off
setlocal disableDelayedExpansion
for /f "eol=: delims=" %%D in ('dir /s /ad /b * ^| sort /r') do (
  pushd "%%D"
  for /d %%F in ("* *") do (
    set "folder=%%F"
    setlocal enableDelayedExpansion
    for %%A in ("!folder: =\!") do (
      for /f "eol=: tokens=* delims=v." %%B in ("%%~nxA") do (
        if "%%~nxA" neq "v.%%~B" ren "!folder!" "!folder: %%~nxA= v.%%~B!"
      )
    )
    endlocal
  )
  popd
) 
```

# events - 一些 uid 返回一个空的事件数组

> ID：14881344
> 
> 赞同：1
> 
> 时间：2013-02-14T18:13:01.717
> 
> 标签：events, facebook-graph-api

查看伯克希尔博物馆的此页面：http: [//www.facebook.com/BerkshireMuseum/events](http://www.facebook.com/BerkshireMuseum/events) - 有一个事件列表。当尝试通过[Graph API Explorer](https://developers.facebook.com/tools/explorer/)访问这些事件时，使用：

```
8260447179?fields=events 
```

数组为空。

一个完整数组的例子是为 MASS MoCA 做同样的事情：

```
21660976489?fields=events 
```

为什么会返回一个空数组？

# java - 我如何在 android webview 中断言文本

> ID：14881345
> 
> 赞同：-1
> 
> 时间：2013-02-14T18:13:03.577
> 
> 标签：java, android, android-webview, robotium

我有一个应用程序来测试它有很多 webviews 。我想在 webviews 中声明一些字符串。我使用 robotsium 进行测试，并且到目前为止，robotium 不支持 webviews 我正在修复中。请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T18:24:52.110

如果你有 webview 实例，你可以使用方法 loadUrl 并注入一些 js。要在 webview 中通信 java 和 js，您将需要 javascript 接口，您可以使用方法 addJavascriptInterface 添加它。

您始终可以使用 Testdroid 提供的 ExtSolo，它具有此功能（isTextPresentOnHtmlPage 或 elementExistsOnHtmlPage）： [http ://docs.testdroid.com/_pages/extsolo.html](http://docs.testdroid.com/_pages/extsolo.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T10:08:08.150

你可以！您可以为 Solo 使用 Bitbar 扩展。在这里它是可用和可下载的： http: [//docs.testdroid.com/_pages/extsolo.html](http://docs.testdroid.com/_pages/extsolo.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T18:26:57.200

出于安全原因，您似乎无法从 WebView 本身获取 WebView 的内容。以下是一些关于 SO 的问题，它们引用了这个问题：

*   [如何从 WebView 获取网页内容？](https://stackoverflow.com/questions/2376471/how-do-i-get-the-web-page-contents-from-a-webview)
*   [如何从 webview 获取 html 内容？](https://stackoverflow.com/questions/8200945/how-to-get-html-content-from-a-webview)

您可以使用其中一种方法来获取 HTML 进行比较。

另外，我自己还没有使用过这个，但是[Android FEST](https://github.com/square/fest-android)看起来很酷，可以对 WebViews 做出一些断言，虽然我不知道你是否可以用它来查看 WebView 的内容。

# javascript - 为 PUT 请求序列化 PostData 对象

> ID：14881347
> 
> 赞同：0
> 
> 时间：2013-02-14T18:12:59.893
> 
> 标签：javascript, html

我有一个表单脚本，它在 POST 请求上发送一个 formData 对象。有没有办法以某种方式将该对象序列化为普通查询字符串，以便我可以使用其他 HTTP 方法将其发送到服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T20:05:28.023

使用[jQuery serializeObject 插件](https://github.com/hongymagic/jQuery.serializeObject)，或者：

```
var qs = "?";

for(var p in YourObj)
{
    qs += "&" + encodeURIComponent(YourObj[p]);
} 
```

但是，这假设您的对象只有一层深的属性。或者，如果某些 YourObj 属性是对象：

```
var qs = "?", typ;

for(var p in YourObj)
{
    typ = typeof(YourObj[p]);
    qs += "&" + encodeURIComponent( 
        ['string','number'].indexOf(typ) >-1 ? YourObj[p] : JSON.stringify(YourObj[p]) 
    );
} 
```

# ruby - 使用数组和循环进行 Cucumber/Capybara 链接测试

> ID：14881351
> 
> 赞同：1
> 
> 时间：2013-02-14T18:13:27.027
> 
> 标签：ruby, arrays, hyperlink, cucumber, capybara

我对黄瓜/水豚/红宝石非常陌生，在 php 构建的网站上尝试 BDD。

## 检查：

不同的链接将用户引导到正确的页面：“prod-integration-mycompany.com”

## 情况：

在这个页面上，我有一些独特的链接（大约 20 到 50 个），链接看起来像，

> ```
> <a href= " /edition/123456"> BookTitle 01 by <a class="author" title= "Dan Romio" href=" >/author/Dan+Romio/112212">Dan Romio</a>'
> 
> <a href= " /edition/654321"> BookTitle 02 by <a class="author" title= "Maggi Smith" href=" >/author/Maggi+Smith/11332">Maggi Smith</a>
> 
> <a href= " /edition/56232"> BookTitle 03 by <a class="author" title= "Dan Romio" href=" >/author/Dan+Romio/112212">Dan Romio</a>
> etc… 
> ```

## 我要检查的内容：

我想检查用户何时单击版本链接，该页面的 与 BookTittle 匹配。我可以一步一步做

> ```
>  When ……
>        within(:css, 'dd[@id = "(css ID here)"]') do
>       click_on '' or click_link (name of the link)
>         end 
>    end
> 
>    Then ………|text|
>         check_destination(text)
>    end 
> ```

在 env.rb 上，我有一些函数，比如“check_destination()”和不同的断言：

> ```
>  def check_destination(paramText)
>       new_window = page.driver.browser.window_handles.last
>       page.within_window new_window do
>             path = URI.parse(current_url)
>            assert_include(paramText,path)
>         end
>       end 
> ```

## 所以 ？有什么问题 ？：

问题是当我想做一大堆它们时，我不知道我将如何使用数组的 key=> value 并在我的步骤中循环它们。是桌子吗？是课堂吗？我有点没概念/想法了……有什么想法吗？关联 ？顺便说一句，如果我浪费你的时间，我很抱歉。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-29T15:24:27.310

我太笨了.....我可以在节点查找器上使用 page.all，使用选项可以让我做任何我想做的事情。 [http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Finders](http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Finders)

```
 within("within block here") do 
        element = page.all("specify the condition to get all the elements")
        puts element.count  # should provide no of elements
    end 
```

第一个元素可以通过元素[0]访问。“这里的一些方法”

所有方法列表都可以在以下位置找到：[http ://www.ruby-doc.org/gems/docs/c/capybara-rails-2-2-0.4.1.1/Capybara/Node/Element.html](http://www.ruby-doc.org/gems/docs/c/capybara-rails-2-2-0.4.1.1/Capybara/Node/Element.html)

# mysql - SQL 表设计风格：

> ID：14881352
> 
> 赞同：0
> 
> 时间：2013-02-14T18:13:36.040
> 
> 标签：mysql, sql

我是 SQL 的初学者，我想确保我正在为我正在创建的数据库进行正确的架构设计。

我想出了一个更简单的整体设计示例。

假设我有一张桌子：

`mysql> create table Animals(name varchar(255), flags int);`

其中 flags 保存动物属性的真值，例如食肉动物、两栖动物、哺乳动物等。

由于 int 只是一个二进制数，我可以使用 XOR 来过滤这些标志，以获得我想要匹配的内容。

或者我可以有一个这样的表：

`mysql> create table Animals(name varchar(255), flag1 bit, flag2 bit, flag3 bit);`

我对此的担忧是：

使用这种方法是否会浪费位，或者如果我有 flag1 - flag8，将使用一个字节？

最终：

这甚至是进行这种设计的合适方法吗？如果没有，一些指导将不胜感激。

我知道我可以有大量的表格，比如食肉动物、两栖动物、哺乳动物等等，它们在哺乳动物中会有同名的条目，这可以避免我想要使用标志，但这对我来说几乎是浪费。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T18:15:35.037

要正确规范化，您需要创建另一个表：

```
Animals (animalID, animalName)
Flags (flagID, flagName)
AnimalFlags (animalID, flagID) 
```

这将允许您根据需要为每只动物拥有尽可能多或尽可能少的标志，而不必使用 XOR 进行解析。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T18:22:23.707

您最好为动物创建一个表，为类别创建另一个表，为将动物分配给类别的另一个表。

```
create table Animals(AnimalID int, AnimalName varchar(255));
create table Categories(CategoryID int, CategoryName varchar(255));
create table AnimalCategoryLink(AnimalID int, CategoryID int); 
```

这将使您可以灵活地添加任意数量的类别，并且您可以在运行时添加类别。

您可以根据需要在这些表之间使用 JOIN 进行过滤。

# ios - Interface Builder 文件中的未知类信息

> ID：14881355
> 
> 赞同：12
> 
> 时间：2013-02-14T18:13:49.537
> 
> 标签：ios, error-handling, interface-builder

就像标题一样，我得到了一个疯狂的按摩，我无法应付

```
Unknown class info in Interface Builder file. 
```

每次我运行我的项目时，都会出现一些疯狂的错误或一些条消失。有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-14T18:25:57.677

试试这个，按顺序：

1.  产品->在 Xcode 中清理
2.  从模拟器或设备中删除应用程序
3.  重启 Xcode
4.  (Build &) 再次运行

如果这没有帮助，您可能在笔尖或情节提要中引用了必须手动查找和删除的类。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-10-08T12:12:55.260

警告可能是因为您已为 UIView 子类之一分配了已删除/已删除的自定义类名称。为了解决这种情况，

```
Open interface builder class as Source Code by right clicking on it (Open As -> Source Code).
Find your unknown class name in the source file. And handle accordingly. 
```

它对我有用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-03-12T14:56:09.287

[请参阅我对https://stackoverflow.com/a/29013058/784318](https://stackoverflow.com/a/29013058/784318)的回答

> 我今天使用 Swift 确实遇到了这个问题。
> 
> 我将班级更改`Model.h + Model.m`为`Model.swift`. 该对象在 Interface Builder 中与`class = Model`.
> 
> 一旦我替换了对象，就无法再加载该类。
> 
> 我必须做的是将 IB 中的类引用从：
> 
> ```
> Class = Model
> Module = 
> ```
> 
> 到
> 
> ```
> Class = Model
> Module = <TARGETNAME> 
> ```
> 
> 您将`<TARGETNAME>`在构建设置中找到 。它也是您生成的 Swift-Header 中显示的名称：`#import "TARGETNAME-Swift.h"`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-02-18T00:01:59.460

我已经解决了这个问题（在使用 Swift 4 / Xcode 10.1 时），方法是转到自定义类面板，选中“从目标继承模块”（在类和模块行的正下方）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-07-19T09:43:33.560

我对 Lottie 图书馆也有同样的问题。

> Interface Builder 文件中的未知类 AnimationView。

如果您的类视图位于其他模块中，则可能会发生这种情况。

要解决此问题，请进入您的 IB 文件（Xib 或故事板）/显示身份检查器并正确设置模块：

[![在此处输入图像描述](../Images/cab50a8624f7eba252bc8e8103247654.png)](https://i.stack.imgur.com/2y4ok.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-14T18:26:07.967

在将 Interface Builder 中的视图或控制器自定义为该类之后，当您更改视图和视图控制器类的名称时，我倾向于看到这些类型的错误。我会在您的笔尖或情节提要中查看您的视图和控制器，以查看您的自定义类是否仍然存在并相应地匹配。

当您重命名或删除底层代码而不更新 IB 文件时，您将遇到 IB 文件问题。在将 IBOutlets 链接到 Interface Builder 中的对象后删除或更改它们的名称时，也会出现类似的问题。除非您明确删除它，否则您仍然会在 Interface Builder 中拥有该引用。

最后，您可以将 IB 文件视为文本文件。这是一个 xml 文档，您将在其中看到所有类引用。您可以查看是否有任何类可能不再存在于您的项目中。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-06-16T20:16:22.040

如果您从 Build Phases/Compile Sources 中删除 ClassName.m 也会发生这种情况

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-02-27T07:56:49.960

我将重申这个问题，并提供一些背景信息，然后提供解决方案：

我创建了一个自定义 Swift 框架，并将框架项目导入到工作区中。然后，我将该框架作为我的 Swift 应用程序的目标依赖项。最后，我在 Interface builder 中引用了框架中的一个类。

我不断收到未找到类的错误，我注意到在调试器中它的输出类是损坏/未损坏的 ObjC 对应项..

**解决方案**：

只需将您的框架标头添加到您的 ObjC 桥接头中：

```
#import <MazKit/MazKit-Swift.h> // In my case, MazKit 
```

现在，符号已导出，您可以通过 cmd + 单击标题本身来验证这一点，您将看到损坏/未损坏的类名。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-06-10T14:48:24.397

项目 -> 常规 -> 部署信息 -> 主界面 <- 清除此字段。

您似乎已删除文件 Main (Storyboard)，但您仍然在项目属性中引用它。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-03-13T03:25:21.457

可能是文件在构建过程中没有被复制。转到 Build Phases 选项卡并检查复制 Bundle 资源以查看文件是否存在。如果不添加到项目中，请清理并重建以查看是否可以解决您的问题。这对我有帮助。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-04-21T22:12:01.660

我重命名了我的 TableViewCell 类之一。除了选中`Inherit Module From Target`复选框外，没有任何效果。

打开 xib 文件 > 选中时转到身份检查器 > 选中复选框（还要确保类名正确）。

完毕！

# html - CSS 与 100% 混淆。需要三个块相互粘连

> ID：14881365
> 
> 赞同：0
> 
> 时间：2013-02-14T18:14:32.010
> 
> 标签：html, css

我正在使用一个`<ul>`包含三个项目 ( `<li>`) 的块来构建导航区域。

`<ul>`块没有固定的宽度。它适合它的父母。我需要所有`<li>`的 s 水平对齐，一个在里面彼此相邻。一共有三个`<li>`s。最后两个具有固定宽度。第一个应该尽可能多地占用空间。

我该如何构建这个？当我对 first 的宽度使用 100% 时`<li>`，它会占用所有空间。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T18:27:58.083

是的你可以。事实上，这很简单。你很好地回答了你自己的问题。

[http://jsfiddle.net/UYW85/](http://jsfiddle.net/UYW85/)

HTML

```
<ul>
    <li>@Lorem ipsum dolor lorem ipsum dolor</li>
    <li class="n2">number 2</li>
    <li class="n3">number 3</li>    
<ul> 
```

CSS

```
ul { width:100%; height:100px; }
ul > li { float:left; background-color:#AAA; }
.n2 { width:100px; background-color:#CCC;}
.n3 { width:100px; background-color:#CCC;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T18:33:43.860

对于您的确切问题，这可能有点矫枉过正，但只是作为一种资源-您检查过 jQuery Nested 吗？

[http://suprb.com/apps/nested/](http://suprb.com/apps/nested/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T18:54:15.947

使用`display: table`for`UL`和`display: table-cell`for `LI`。

# c++ - 如何提供几个工作函数的例子？

> ID：14881366
> 
> 赞同：0
> 
> 时间：2013-02-14T18:14:28.673
> 
> 标签：c++

假设我有一个功能：

```
void isUniqueSymbols(string stream) 
```

如何理解我应该提供几个示例来说明我的功能如何工作？我可以这样写：

```
Input: isUniqueSymbols("abcde");
Output: true;

Input: isUniqueSymbols("abcdee");
Output: false; 
```

但不确定这是否正确。

您将如何提供工作功能的示例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T18:23:18.843

一种可能性是将文档嵌入代码中：

```
assert(isUniqueSymbols("abcde"));
assert(!isUniqueSymbols("abcdee")); 
```

这非常接近于单元测试/将单元测试作为文档查看，无论它可能有价值。

# python - Django - 如何使用 sorl-thumbnail？

> ID：14881368
> 
> 赞同：3
> 
> 时间：2013-02-14T18:14:37.120
> 
> 标签：python, django, sorl-thumbnail

我将 Django 与 PostgreSQL 一起使用，但我需要使用一些应用程序来处理缩略图。有一个应用程序评价很高，叫做[Sorl-Thumbnail](https://github.com/sorl/sorl-thumbnail)

在安装说明中说我需要使用[键值/缓存系统](http://sorl-thumbnail.readthedocs.org/en/latest/requirements.html#kvstore-requirements)。

我的疑问是：我可以使用 PostgreSQL 数据库作为缓存还是必须安装 memcached 或 redis？

我目前没有使用任何缓存机制，该网站的目标是低流量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T18:20:29.210

您*可以*使用[数据库缓存后端](https://docs.djangoproject.com/en/dev/topics/cache/?from=olddocs#database-caching)，甚至[FS 缓存后端](https://docs.djangoproject.com/en/dev/topics/cache/?from=olddocs#filesystem-caching)。“你可以”，我的意思是“它会起作用”。只需为您的 django 项目正常配置它，sorl-thumbnail 就会使用它。

根据 sorl-thumbnail 文档：

> 一个缓存数据库，**除了安装** *像 memcached 这样的适当缓存外，不需要对您的正常 Django 设置进行特殊安装*

但它不会像 memcached 或 redis 那样棒。

（另外：为什么 sorl-thumbnail 现在需要这个？它过去只是检查 FS 以确保缩略图存在或创建它）

# html - 如何创建一个延伸到页面底部的 div？

> ID：14881371
> 
> 赞同：1
> 
> 时间：2013-02-14T18:14:42.480
> 
> 标签：html, css

如果您注意到 twitter 的主页有一个始终延伸到页面底部的 div。我检查了 CSS，看起来他们在使用

```
min-height:100% 
```

[但是，当我在此处](http://jsfiddle.net/z5qVh/1/)的 jsfiddle 中对其进行测试时，这不起作用

如何创建一个始终延伸到页面底部的 div？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T18:15:52.617

您还需要确保您的 body 和 html 也有 100% 的高度。

```
html, body {
  height: 100%;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T18:16:30.353

您可以通过使用`height:100%;`. 另请注意，高度 100% 需要设置为父容器。在这种情况下`html,body { }`

如果`html,body { }`未设置为 100%，则里面的容器只会拉伸其容器高度的 100%。

[http://jsfiddle.net/z5qVh/2/](http://jsfiddle.net/z5qVh/2/)

```
 html,body {
        height:100%;
    }
    #all{
        height: 100%;
        background: #ff0000;
    } 
```

# python - “长度和长度”与 Python 中的“长度”有什么不同吗？

> ID：14881374
> 
> 赞同：1
> 
> 时间：2013-02-14T18:15:14.087
> 
> 标签：python, refactoring, collapse, equivalent

我找到了以下代码片段：

```
length = length and length or len(string) 
```

在我看来，这应该相当于：

```
length = length or len(string) 
```

我可以将表达式折叠`length and length`为只是，`length`还是在某些情况下会得到不同的结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T18:27:44.410

这条线是胡说八道。让我们看看我们有哪些选择：

*   `length`是假的（所以`0`，一个空列表，一个空字符串等）。Python 将返回 of 的值，`length`因为当`and`运算符计算`False`右侧的计算结果时，查看表达式的其余部分是没有意义的。然后它测试`length or len(string)`并返回`len(string)`。

*   `length`不是假的。Python 评估`length and length`，将其解析为 的值`length`，然后测试`length or len(string)`，并且因为`length`是真实的，所以返回`length`。毕竟，`or`现在总是会解决，`True`而且没有任何意义`len(string)`。

这基本上归结为`length = length or len(string)`,`length and length`是无操作的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T18:22:49.797

`length and length or len(string)`完全等价于`length or len(string)`。我认为编写此代码的人希望它在错误`len(string)`时避免调用`length`，但事实并非如此。例如：

```
>>> None and None or len('foo')
3 
```

由于`and`优先级高于`or`，我们可以将表达式改写如下：

```
(length and length) or len('foo') 
```

`length and length`将始终计算为`length`，因此这两个表达式是等价的。

# c++ - directX 上的网格动画

> ID：14881377
> 
> 赞同：2
> 
> 时间：2013-02-14T18:15:32.713
> 
> 标签：c++, animation, directx, render, mesh

在我的游戏项目中，我使用的是 MD5 模型文件，但我觉得我做错了什么......

在每一帧我更新近 30~40 个动画网格，（更新每个关节及其各自的顶点）但是这样做我总是使用 25% 的 CPU 速度，我的 FPS 总是保持在 70~80（当我应该有 200~ 300)。

我知道也许我应该使用实例化，但我不知道如何使用动画网格来做到这一点。即使我会使用，据我所知，这只适用于相同的网格，但我需要大约 30 个不同的网格用于场景（这些将使用实例化重复）。

我每帧所做的是，为每个动画网格制作新骨架，将每个关节放在新位置（如果关节需要更新）并更新所有应该更新的顶点。

我的显卡没问题，这是更新代码：

```
bool AnimationModelClass::UpdateMD5Model(float deltaTime, int animation)
{   
    MD5Model.m_animations[animation].currAnimTime += deltaTime;         // Update the current animation time

    if(MD5Model.m_animations[animation].currAnimTime > MD5Model.m_animations[animation].totalAnimTime)
        MD5Model.m_animations[animation].currAnimTime = 0.0f;

    // Which frame are we on
    float currentFrame = MD5Model.m_animations[animation].currAnimTime * MD5Model.m_animations[animation].frameRate;    
    int frame0 = floorf( currentFrame );
    int frame1 = frame0 + 1;

    // Make sure we don't go over the number of frames  
    if(frame0 == MD5Model.m_animations[animation].numFrames-1)
        frame1 = 0;

    float interpolation = currentFrame - frame0;    // Get the remainder (in time) between frame0 and frame1 to use as interpolation factor

    std::vector<Joint> interpolatedSkeleton;        // Create a frame skeleton to store the interpolated skeletons in

    // Compute the interpolated skeleton
    for( int i = 0; i < MD5Model.m_animations[animation].numJoints; i++)
    {
        Joint tempJoint;
        Joint joint0 = MD5Model.m_animations[animation].frameSkeleton[frame0][i];       // Get the i'th joint of frame0's skeleton
        Joint joint1 = MD5Model.m_animations[animation].frameSkeleton[frame1][i];       // Get the i'th joint of frame1's skeleton

        tempJoint.parentID = joint0.parentID;                                           // Set the tempJoints parent id

        // Turn the two quaternions into XMVECTORs for easy computations
        D3DXQUATERNION joint0Orient = D3DXQUATERNION(joint0.orientation.x, joint0.orientation.y, joint0.orientation.z, joint0.orientation.w);
        D3DXQUATERNION joint1Orient = D3DXQUATERNION(joint1.orientation.x, joint1.orientation.y, joint1.orientation.z, joint1.orientation.w);

        // Interpolate positions
        tempJoint.pos.x = joint0.pos.x + (interpolation * (joint1.pos.x - joint0.pos.x));
        tempJoint.pos.y = joint0.pos.y + (interpolation * (joint1.pos.y - joint0.pos.y));
        tempJoint.pos.z = joint0.pos.z + (interpolation * (joint1.pos.z - joint0.pos.z));

        // Interpolate orientations using spherical interpolation (Slerp)
        D3DXQUATERNION qtemp;
        D3DXQuaternionSlerp(&qtemp, &joint0Orient, &joint1Orient, interpolation);

        tempJoint.orientation.x = qtemp.x;
        tempJoint.orientation.y = qtemp.y;
        tempJoint.orientation.z = qtemp.z;
        tempJoint.orientation.w = qtemp.w;
        // Push the joint back into our interpolated skeleton
        interpolatedSkeleton.push_back(tempJoint);      
    }

    for ( int k = 0; k < MD5Model.numSubsets; k++)
    {
        for ( int i = 0; i < MD5Model.m_subsets[k].numVertices; ++i )
        {
            Vertex tempVert = MD5Model.m_subsets[k].m_vertices[i];

            // Make sure the vertex's pos is cleared first
            tempVert.x = 0;
            tempVert.y = 0;
            tempVert.z = 0;

            // Clear vertices normal
            tempVert.nx = 0;
            tempVert.ny = 0;
            tempVert.nz = 0;

            // Sum up the joints and weights information to get vertex's position and normal
            for ( int j = 0; j < tempVert.WeightCount; ++j )
            {
                Weight tempWeight = MD5Model.m_subsets[k].m_weights[tempVert.StartWeight + j];
                Joint tempJoint = interpolatedSkeleton[tempWeight.jointID];

                // Convert joint orientation and weight pos to vectors for easier computation
                D3DXQUATERNION tempJointOrientation = D3DXQUATERNION(tempJoint.orientation.x, tempJoint.orientation.y, tempJoint.orientation.z, tempJoint.orientation.w);
                D3DXQUATERNION tempWeightPos = D3DXQUATERNION(tempWeight.pos.x, tempWeight.pos.y, tempWeight.pos.z, 0.0f);

                // We will need to use the conjugate of the joint orientation quaternion
                D3DXQUATERNION tempJointOrientationConjugate;
                D3DXQuaternionInverse(&tempJointOrientationConjugate, &tempJointOrientation);

                // Calculate vertex position (in joint space, eg. rotate the point around (0,0,0)) for this weight using the joint orientation quaternion and its conjugate
                // We can rotate a point using a quaternion with the equation "rotatedPoint = quaternion * point * quaternionConjugate"
                D3DXVECTOR3 rotatedPoint;
                D3DXQUATERNION qqtemp;

                D3DXQuaternionMultiply(&qqtemp, &tempJointOrientation, &tempWeightPos);
                D3DXQuaternionMultiply(&qqtemp, &qqtemp, &tempJointOrientationConjugate);

                rotatedPoint.x = qqtemp.x;
                rotatedPoint.y = qqtemp.y;
                rotatedPoint.z = qqtemp.z;

                // Now move the verices position from joint space (0,0,0) to the joints position in world space, taking the weights bias into account
                tempVert.x += ( tempJoint.pos.x + rotatedPoint.x ) * tempWeight.bias;
                tempVert.y += ( tempJoint.pos.y + rotatedPoint.y ) * tempWeight.bias;
                tempVert.z += ( tempJoint.pos.z + rotatedPoint.z ) * tempWeight.bias;

                // Compute the normals for this frames skeleton using the weight normals from before
                // We can comput the normals the same way we compute the vertices position, only we don't have to translate them (just rotate)
                D3DXQUATERNION tempWeightNormal = D3DXQUATERNION(tempWeight.normal.x, tempWeight.normal.y, tempWeight.normal.z, 0.0f);

                D3DXQuaternionMultiply(&qqtemp, &tempJointOrientation, &tempWeightNormal);
                D3DXQuaternionMultiply(&qqtemp, &qqtemp, &tempJointOrientationConjugate);

                // Rotate the normal
                rotatedPoint.x = qqtemp.x;
                rotatedPoint.y = qqtemp.y;
                rotatedPoint.z = qqtemp.z;  

                // Add to vertices normal and ake weight bias into account
                tempVert.nx -= rotatedPoint.x * tempWeight.bias;
                tempVert.ny -= rotatedPoint.y * tempWeight.bias;
                tempVert.nz -= rotatedPoint.z * tempWeight.bias;
            }

            // Store the vertices position in the position vector instead of straight into the vertex vector
            MD5Model.m_subsets[k].m_positions[i].x = tempVert.x;    
            MD5Model.m_subsets[k].m_positions[i].y = tempVert.y;    
            MD5Model.m_subsets[k].m_positions[i].z = tempVert.z;    

            // Store the vertices normal
            MD5Model.m_subsets[k].m_vertices[i].nx = tempVert.nx;   
            MD5Model.m_subsets[k].m_vertices[i].ny = tempVert.ny;   
            MD5Model.m_subsets[k].m_vertices[i].nz = tempVert.nz;   

            // Create the temp D3DXVECTOR3 for normalize
            D3DXVECTOR3 dtemp = D3DXVECTOR3(0,0,0);

            dtemp.x = MD5Model.m_subsets[k].m_vertices[i].nx;
            dtemp.y = MD5Model.m_subsets[k].m_vertices[i].ny;
            dtemp.z = MD5Model.m_subsets[k].m_vertices[i].nz;

            D3DXVec3Normalize(&dtemp, &dtemp);

            MD5Model.m_subsets[k].m_vertices[i].nx = dtemp.x;
            MD5Model.m_subsets[k].m_vertices[i].ny = dtemp.y;
            MD5Model.m_subsets[k].m_vertices[i].nz = dtemp.z;

            // Put the positions into the vertices for this subset
            MD5Model.m_subsets[k].m_vertices[i].x = MD5Model.m_subsets[k].m_positions[i].x;
            MD5Model.m_subsets[k].m_vertices[i].y = MD5Model.m_subsets[k].m_positions[i].y;
            MD5Model.m_subsets[k].m_vertices[i].z = MD5Model.m_subsets[k].m_positions[i].z;

        }

        // Update the subsets vertex buffer
        // First lock the buffer
        void* mappedVertBuff;

        bool result;

        result = MD5Model.m_subsets[k].vertBuff->Map(D3D10_MAP_WRITE_DISCARD, 0, &mappedVertBuff);
        if(FAILED(result))
        {
            return false;
        }

        // Copy the data into the vertex buffer.
        memcpy(mappedVertBuff, &MD5Model.m_subsets[k].m_vertices[0], (sizeof(Vertex) * MD5Model.m_subsets[k].numVertices));

        MD5Model.m_subsets[k].vertBuff->Unmap();
    }

    return true;
} 
```

也许我可以在该代码中修复一些东西，但我想知道我是否做得对......

我还想知道是否还有其他更好的方法可以做到这一点，如果其他类型的动画会更好（与 .x 扩展名不同）。

感谢和抱歉我的英语不好：D

* * *

在着色器中进行骨骼转换会是一个好的解决方案吗？（像[这样](http://content.gpwiki.org/index.php/DirectX%3aDirect3D%3aTutorials%3aVertex_Blending_using_Shaders)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T18:24:21.187

视锥体中的所有网格是否同时存在？如果不是，您应该只更新屏幕上您可以看到的对象的动画。如果您要更新场景中的所有网格，无论它们是否在视图中，您都会浪费很多周期。在我看来，您根本没有进行任何截锥体剔除，这可能是最好的起点。

# c++ - Qt QPrinter setPaperSize 无法正常工作

> ID：14881382
> 
> 赞同：1
> 
> 时间：2013-02-14T18:15:39.997
> 
> 标签：c++, qt, printing

我正在尝试创建一个 Windows 应用程序（但最终也会将其移植到 linux，因此如果可能的话交叉兼容性很重要），它将从网络摄像头拍摄照片并且可以在不使用 printDialog 框的情况下进行打印，但我遇到了问题选择纸张尺寸。我希望将纸张尺寸设置为 4" x 6"，这是 A6 格式，但是当我使用 setPaperSize(QtPrinter::A6) 时，它似乎默认为字母格式。虽然它并不总是默认所有打印机的字母，但看起来每台打印机处理命令的方式不同，但大多数默认为字母。我相信这可能是 Qt 和打印机与驱动程序兼容性的问题。

**我的问题是：** 有谁知道在 Qt 中将打印机设置为 4" x 6" 的方法，它应该适用于所有打印机？

我的代码如下所示。

```
void MainWindow::Print() {

    QPainter painter;
    QPrinter *printer = new QPrinter(QPrinter::HighResolution);
    printer->setPaperSize(QPrinter::A6);
     if (!painter.begin(printer)) {
         qWarning("Failed to open file");
         return;
     }

     painter.fillRect(QRectF(QPointF(108,118),QPointF(110+352, 120+352)), Qt::black);
     painter.fillRect(QRectF(QPointF(109,119),QPointF(109+352, 119+352)), Qt::white);
     ui->graphicsView->scene()->render(&painter, QRectF(110,120, 350, 350), QRectF(0,0, ui->graphicsView->scene()->width(), ui->graphicsView->scene()->height()), Qt::IgnoreAspectRatio);
     painter.drawText(110, 110, "Test");
     painter.end();
} 
```

我尝试了以下方法来调整纸张大小

```
printer->setPaperSize(QPrinter::A6)
printer->setPageSize(QPrinter::A6)
printer->setPaperSize(QSizeF(4.0, 6.0), QPrinter::Inch) 
```

这些似乎都不起作用。如果有人可以帮助我解决这个问题，我会非常感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T08:31:16.223

setPaperSize 依赖于从打印机驱动程序接收到的信息，因此要真正独立于打印机，请自行计算 pageRects。请参阅 pageRect 和 paperRect 属性以及 QPrinter 的 fullPage 属性。另请参阅我对[打印页面矩形问题](https://stackoverflow.com/questions/915775/qt-printing-pagerect-and-paperrect-issues/3000236#3000236)的回答，其中存在打印任意打印矩形的（错误）起始示例以及如何修复问题给出的代码。

# coordinates - 使用 OSM 和 EPSG:4326 与 openlayers 将纬度增加近 90 度。为什么？

> ID：14881387
> 
> 赞同：1
> 
> 时间：2013-02-14T18:15:59.270
> 
> 标签：coordinates, openlayers, openstreetmap

我正在使用 openLayers 并创建一个 OSM 基础层。默认情况下，图层使用 EPSG:900913，坐标以米为单位。我想在 EPSG:4326 中使用度数坐标，所以我使用以下命令初始化图层：

```
base_layer.addOptions({ sphericalMercator: true, 
    projection: new OpenLayers.Projection('EPSG:4326')}, true); 
```

现在地图使用度数但有下一个问题：纬度 37.296 和经度 -5.929 的点（[http://www.openstreetmap.org/?lat=37.296&lon=-5.929&zoom=12&layers=Q#](http://www.openstreetmap.org/?lat=37.296&lon=-5.929&zoom=12&layers=Q#)和相同的坐标谷歌地图）在我看来（移动地图并`map.getCenter()`在萤火虫中执行）在纬度。-49.75，朗。-5.929。

为什么？如何使用具有与 in`openstreetmap.org`和 as 返回的相同度数坐标的 OSM 层`nominatim.openstreetmap.org`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T09:19:23.170

您不能只声称该图层是`EPSG:4326`您正在显示的图块实际呈现在`EPSG:3857`. 那是荒谬的。

老实说，我不太清楚你在这里要做什么，但它可能有助于设置`displayProjection`哪个`EPSG:4326`将导致 OpenLayers 在与用户交流价值时使用度数。

如果您想在代码中读取或设置地图位置，则需要通过调用位置值的方法来重新投影您从中获得`getCenter`或给自己的值。`setCenter``transform`

# java - 删除所有非单词字符，除非 & 或 ' 模式

> ID：14881389
> 
> 赞同：9
> 
> 时间：2013-02-14T18:16:02.367
> 
> 标签：java, regex

我正在尝试清除所有非单词字符的字符串，除非它是 & 即模式可能就像`&[\w]+;`

例如：

```
abc; => abc
abc &amp; => abc &amp;
abc& => abc 
```

如果我使用它，它也会从我不想要的第二个示例中`string.replaceAll("\W","")` 删除。`;``'&'`

在这个问题中使用负前瞻可以快速解决正则表达式模式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T18:38:54.943

我不确定您是否可以使用简单的 String.replaceAll 来做到这一点。您可能应该使用[Pattern](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)和[Matcher](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html)来循环匹配，有效地进行手动搜索和替换。类似下面的代码应该可以解决问题。

```
public String replaceString(String origString) {
    Pattern pattern = Pattern.compile("&(\w+);|[^\w]");
    Matcher matcher = pattern.matcher(origString);
    StringBuffer sb = new StringBuffer();
    while (matcher.find()) {
        if (matcher.group().startsWith("&") && !matcher.group(1).equals("amp")) {
            matcher.appendReplacement(sb, matcher.group());
        } else {
            matcher.appendReplacement(sb, "");
        }
    }
    matcher.appendTail(sb);
    return sb.toString();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T18:46:37.353

首先，我真的很喜欢这个问题。现在，你想要的不能用一个来完成`replaceAll`，因为为此，我们需要一个`negative look-behind`可变长度的，这是不允许的。如果允许的话，就不会那么难了。

无论如何，由于`replaceAll`这里没有选择单身，你可以在这里使用一点技巧。就像首先用一些字符序列替换`semi-colon`你中的最后一个，`entity reference`你确定它不会出现在字符串的其余部分，比如`XXX`或任何东西。我知道这是不正确的，但你肯定无法帮助它。

因此，您可以尝试以下方法：

```
String str = "a;b&c &amp;";

str  = str.replaceAll("(&\\w+);", "$1XXX")
          .replaceAll("&(?!\\w+?XXX)|[^\\w&]", "")
          .replaceAll("(&\\w+)XXX", "$1;");

System.out.println(str); 
```

**解释：**

*   第一个 replaceAll 替换模式，如`&amp;`with `&ampXXX`，或替换为 last 的任何其他序列`;`。
*   第二个replaceAll，替换任何`&`后面没有的`\\w+XXX`，或任何`non-word, non &`字符。这将替换所有`&'s`不属于`&amp;`某种模式的部分。另外，还替换任何其他非单词字符。
*   第三个replaceAll，重新替换`XXX`为`;`，创建`&amp;`回来`&ampXXX`

* * *

为了更容易理解，您可以使用`Pattern`和`Matcher`类，我总是更喜欢在替换标准复杂时使用它们。

```
String str = "a;b&c &amp;";

Pattern pattern = Pattern.compile("&\\w+;|[^\\w]");
Matcher matcher = pattern.matcher(str);

StringBuilder sb = new StringBuilder();

while (matcher.find()) {
    String match = matcher.group();
    if (!match.matches("&\\w+;")) {
        matcher.appendReplacement(sb, "");
    } else {
        matcher.appendReplacement(sb, match);
    }
}
matcher.appendTail(sb);
System.out.println(sb.toString()); 
```

这个类似于@Eric 的代码，但是是对它的概括。`&amp;`当然，只有当它被改进以删除`NullPointerException`扔在其中的东西时，它才会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T18:24:54.800

我建议你使用这样的负前瞻：

```
string.replace(/&(?!\w+;)/ig, ''); 
```

它替换所有 & 后不跟以分号结尾的单词字符。

编辑（Java）：

```
string.replaceAll("/&(?!\w+;)/i", ''); 
```

# .net - 如何将对象添加到对象？

> ID：14881390
> 
> 赞同：0
> 
> 时间：2013-02-14T18:16:08.837
> 
> 标签：.net, vb.net, soap, multidimensional-array

我对在 5 个服务器上运行的相同服务进行相同的 SOAP 调用。返回的所有`TWeeksHeld`集合都需要连接在一起成为同一对象的*输出*`TDAEHeldList`版本 ( )。这是我的课程：

```
Partial Public Class TDAEHeldList      
    Private siteIdField As String        
    Private countField As Integer        
    Private returnCodeField As String        
    Private errorMessageField As String        
    Private daeWeeksHeldField() As TWeeksHeld
End Class

Partial Public Class TWeeksHeld        
    Private checkInField As String        
    Private resortNameField As String        
    Private countryField As String        
    Private regionField As String        
    Private localityField As String        
    Private weekIdField As String        
    Private bedroomsField As String        
    Private sleepsField As String        
    Private bookingTypeField As String        
    Private resortIdField As String        
    Private timeToExpiryField As String        
    Private specialFlagField As String        
    Private extMemberNoField As String        
    Private stockDisplayField As String        
    Private ownerBusCatCodeField As String
End Class 
```

每次调用都需要将集合的内容添加`daeWeeksHeldField()`到输出类的`daeWeeksHeldField()`集合中。

我有以下工作：

```
Dim returnData As New TDAEHeldList
Dim weeksOnHold As New TDAEHeldList
Dim weeksOnHoldArray As TWeeksHeld
weeksOnHold = WSCaller.GetForeignWeeksOnHold(siteID,affiliateMemberID) 
```

然后尝试添加

```
weeksOnHoldArray += String.Concat(weeksOnHoldArray, weeksOnHold.daeWeeksHeldField) 
```

其次是：

```
returnData.daeWeeksHeldField = weeksOnHoldArray.ToArray(GetType(TWeeksHeld)) 
```

我也试过：

```
for Each x As Object In weeksOnHold.daeWeeksHeld
  weeksOnHoldArray.Add(x)
Next 
```

加上其他一些谷歌搜索的技术。我想做的事情是否可能，如果是，它是如何完成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T18:43:13.067

您将`daeWeeksHeldField`属性称为*集合*，但它不是集合。它是一个数组。数组当然有它们的用途，但在这种情况下，你真正想要的是一个集合。集合允许您轻松添加新项目。另一方面，数组不能自动动态增长，因此如果列表的大小不固定，使用起来会很麻烦。

最常用的集合，也是我推荐的集合，是`List(Of T)`. 以下是您将如何使用它：

```
Dim combinedWeeksOnHold As New List(Of TWeeksHeld)
Dim weeksOnHold1 = WSCaller1.GetForeignWeeksOnHold(siteID1, affiliateMemberID1)
If weeksOnHold1.daeWeeksHeldField IsNot Nothing Then
    combinedWeeksOnHold.AddRange(weeksOnHold1.daeWeeksHeldField)
End If
Dim weeksOnHold2 = WSCaller2.GetForeignWeeksOnHold(siteID2, affiliateMemberID2)
If weeksOnHold2.daeWeeksHeldField IsNot Nothing Then
    combinedWeeksOnHold.AddRange(weeksOnHold2.daeWeeksHeldField)
End If 
```

如果您真的需要它们的数组，您可以随时调用`List(Of T).ToArray`，如下所示：

```
Dim array() As TWeeksHeld = combinedWeeksOnHold.ToArray() 
```

# java - 如何更改 Eclipse 中文件选项卡上列出的文件图标（项目图标）？

> ID：14881391
> 
> 赞同：2
> 
> 时间：2013-02-14T18:16:12.967
> 
> 标签：java, eclipse, icons

我想知道是否有办法更改 IDE 文件选项卡中列出的文件的图标？

我经常在我的编辑器中同时打开相同的类名，并且希望能够通过为不同的项目分配不同的图标来区分它们

![图标](../Images/744bd668b95949fb07decef6e0240fc3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T18:22:40.633

据我所知，这些图标是由实现编辑器的插件提供的（在 org.eclipse.ui.editors 扩展点中）。根据我[在此处](http://prasi82.blogspot.co.il/2010/10/eclipse-change-editor-icon.html)阅读的内容，您可以支持在运行时更改编辑器的图标，但这需要插件支持，并且可能大多数插件不支持。

# c# - 使用自定义 css 设计果园菜单

> ID：14881392
> 
> 赞同：2
> 
> 时间：2013-02-14T18:16:15.437
> 
> 标签：c#, .net, css, asp.net-mvc, orchardcms

目前我正在实现一个已经在 MVC4 项目中实现的现有布局。

我正在努力解决如何在最新的 Orchard 中实现自定义菜单（使用源版本，以便 Orchard 在 Visual Studio 中运行）。

问题是 CSS 应用在哪里？我能在谷歌上找到的唯一一件事就是改变`Menu.cshtml`（一个在核心/形状一个在管理主题中，不知道哪一个是正确的）。我在任何地方都看不到任何 css 的迹象。

我的菜单的 html 版本具有以下外观：

```
<div id="cssmenu" class="fixedContentSize">
    <ul>
        <li class='active '><a href='index.html'><span>Home</span></a></li>
        <li class='has-sub '><a href='#'><span>Dojo</span></a>
        <ul>
                <li class='has-sub '><a href='#'><span>Test</span></a>
                <ul>
                    <li><a href='#'><span>Sub Item</span></a></li>
                    <li><a href='#'><span>Sub Item</span></a></li>
                </ul>
                </li>
                <li class='has-sub '><a href='#'><span>Test2</span></a>
                <ul>
                    <li><a href='#'><span>Sub Item</span></a></li>
                    <li><a href='#'><span>Sub Item</span></a></li>
                </ul>
                </li>
            </ul>
        </li>
        <li><a href='#'><span>Media</span></a></li>
        <li><a href='#'><span>Links</span></a></li>
        <li><a href='#'><span>About</span></a></li>
        <li><a href='#'><span>Contact</span></a></li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T19:09:09.177

它被应用在主题的 CSS 中。以主题机主题中的 site.css 为例。

# c# - C#、XAML、Metro - 如何在同一个文本块/文本框中使某些单词比其他单词更大

> ID：14881394
> 
> 赞同：0
> 
> 时间：2013-02-14T18:16:22.787
> 
> 标签：c#, xaml, microsoft-metro

我正在尝试制作一个地铁风格的新闻应用程序，我想让新闻内容中的第一个单词比其他单词更大......请......无论如何都可以这样做......？我先谢谢你=]

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T18:20:17.570

您可以这样做`TextBlock`：

```
<TextBlock>
   <TextBlock.Inlines>
     <Run FontWeight="Bold" FontSize="14" Text="Big and bold text " />
     <Run FontSize="10" Foreground="Red" Text="next to small red text. " />
  </TextBlock.Inlines>
</TextBlock> 
```

但是，`TextBox`不支持内联，仅支持单个文本值，因此在`TextBox`.

# powershell - 计算每行中的逗号并在文本文件中显示行号

> ID：14881401
> 
> 赞同：0
> 
> 时间：2013-02-14T18:16:29.013
> 
> 标签：powershell, powershell-3.0

我正在使用以下脚本来获取逗号计数。

```
Get-Content .\myFile | 
% { ($_ | Select-String `, -all).matches | measure | select count } | 
group -Property count 
```

它返回，

```
计数名称组
----- ---- -----
  131 85 {@{Count=85}、@{Count=85}、@{Count=85}、@{Count=85}...}
    3 86 {@{Count=86}，@{Count=86}，@{Count=86}}

```

我可以在`Group`列中显示行号而不是`@{Count=86}, ...`吗？

这些文件将有很多行，并且大多数行都有相同的逗号。我想对它们进行分组，这样输出线会更小

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T18:28:23.500

你能用这样的东西吗？

```
$s = @"
this,is,a
test,,
with,
multiple, commas, to, count,
"@

#convert to string-array(like you normally have with multiline strings)
$s = $s -split "`n"

$s | Select-String `, -AllMatches | Select-Object LineNumber, @{n="Count"; e={$_.Matches.Count}} | Group-Object Count

Count Name                      Group                                                                                                        
----- ----                      -----                                                                                                        
    2 2                         {@{LineNumber=1; Count=2}, @{LineNumber=2; Count=2}}                                                         
    1 1                         {@{LineNumber=3; Count=1}}                                                                                   
    1 4                         {@{LineNumber=4; Count=4}} 
```

如果您不想在组中多次使用“计数”属性，则需要自定义对象。像这样：

```
$s | Select-String `, -AllMatches | Select-Object LineNumber, @{n="Count"; e={$_.Matches.Count}} | Group-Object Count | % {
    New-Object psobject -Property @{
        "Count" = $_.Name
        "LineNumbers" = ($_.Group | Select-Object -ExpandProperty LineNumber) 
    }
} 
```

输出：

```
Count    LineNumbers 
-----    ----------- 
2         {1, 2}   
1         3   
4         4 
```

# mysql - 使用非聚合函数进行分组不起作用

> ID：14881405
> 
> 赞同：1
> 
> 时间：2013-02-14T18:16:58.763
> 
> 标签：mysql, sql, group-by, having

为什么是这个 SQL 语句：
`select team,avg(salary) 'Average Salary' from orgchart group by team having salary <38000;`

给出以下错误？

> mysql> select team,avg(salary) 'Average Salary' 从 orgchart 组中按薪水 <38000 的团队；错误 1054 (42S22)：“有条款”中的“工资”列未知

使用 a`group by`我只能使用`having`而不是`where`.Correct。
以下作品：

`select team,avg(salary) 'Average Salary' from orgchart group by team having avg(salary)<38000;`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T18:25:52.037

HAVING 用于评估一*组*行。在分组之前，您仍然可以通过对行应用 WHERE 条件来*单独评估/过滤掉行。*

所以，在你的情况下，它应该是

```
select team, avg(salary) 'Average Salary'
from orgchart
**where salary < 38000**
group by team; 
```

假设您要计算工资低于 38000 的人的平均工资（每个团队分别）。

但是，如果您实际上是在尝试过滤掉*平均*工资低于 38000的*团队*，那么这是正确的选择，但您应该将 与给定值进行比较，而不是，即像这样：*`having``avg(salary)``salary`*

 *```
select team, avg(salary) 'Average Salary'
from orgchart
group by team
**having avg(salary) < 38000**; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T18:27:42.470

子句适用于单个行，`where`同时适用于组。有关这方面的更多信息，请参见：[diff-between-have-and-where-clause](http://blog.sqlauthority.com/2007/07/04/sql-server-definition-comparison-and-difference-between-having-and-where-clause/)*

# installation - 一个应用程序可以启动另一个使用 Clickonce 安装的应用程序吗？

> ID：14881406
> 
> 赞同：0
> 
> 时间：2013-02-14T18:17:01.040
> 
> 标签：installation, clickonce

我的系统中有许多使用 Clickonce 安装的程序。一些程序需要启动其他程序。是否有一个过程可以确定应用程序是否已安装并启动它，否则从 Clickonce 位置启动安装？

例如，用户 1 已经安装了 Program-A、Program-B 和 Program-C。Program-A 中的一个选项要求我运行 Program-B，另一个选项要求我运行 Program-F。Program-B 已安装，而 Program-F 尚未安装。

我总是可以启动 Clickonce 安装，但如果程序已经安装，我该如何找到并启动它呢？

我尝试过的一件事似乎对我有用，那就是总是启动这个

```
http://MyServer/ClickOnce/Program-F/Program-F.application 
```

但是我的用户说这对他们不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T07:17:40.340

您如何启动该链接？如果它是原始应用程序的安装链接，它应该可以工作。您是使用 IE 或您知道已安装的其他浏览器启动它吗？

```
process.start("ie.exe", "http://yourserver/yourapp/themanifest.application"); 
```

如果您从部署清单（.application 文件）启动并且应用程序已经安装，它将简单地启动它。如果没有安装，它将安装它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-09T22:50:07.543

```
var sb = new StringBuilder();
sb.Append(Environment.GetFolderPath(Environment.SpecialFolder.Programs));
sb.Append("\\");
sb.Append("Your Company");
sb.Append("\\");
sb.Append("YourApp.appref-ms");
var shortcutPath = sb.ToString();
Process.Start(shortcutPath); 
```

# c# - 如何使用具有抽象方法的基类来处理委托调用？

> ID：14881412
> 
> 赞同：1
> 
> 时间：2013-02-14T18:17:36.110
> 
> 标签：c#, refactoring

这是基类：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using Microsoft.Reporting.WinForms;

abstract class ReportWinForm : System.Windows.Forms.Form
{
    // This will be the one line of code needed in each WinForm--providing the base class a reference
    //  to the report, so it has access to the SubreportProcessing event
    protected ReportViewer WinFormReportViewer { get; set; }

    // Making this abstract requires each derived WinForm to implement GetReportData--foolproof!

    protected abstract DataResult GetReportData(SubreportProcessingEventArgs e);

    // Wire up the subreport_processing handler when any WinForm loads
    // You could override this in derived WinForms classes if you need different behavior for some WinForms,
    //  but I would bet this default behavior will serve well in most or all cases
    protected virtual void Form1_Load(object sender, EventArgs e)
    {
        WinFormReportViewer.LocalReport.SubreportProcessing += new SubreportProcessingEventHandler(LocalReport_SubreportProcessing);

    }

    // When the Subreport processing event fires, handle it here
    // You could also override this method in a derived class if need be
    protected virtual void LocalReport_SubreportProcessing(object sender, SubreportProcessingEventArgs e)
    {
        // Get the data needed for the subreport
        DataResult dataResult = this.GetReportData(e);

        e.DataSources.Clear();
        e.DataSources.Add(new ReportDataSource(dataResult.Label, dataResult.Table));
    }
} 
```

下面是具体实现：

```
public frmTestAllView()
{
    //base.WinFormReportViewer = reportViewer1; //Hook-up callbacks to the base class      ReportWinForm
    InitializeComponent();
}

private void frmTestAllView_Load(object sender, EventArgs e)
{
    // TODO: This line of code loads data into the 'AFC_ObsolescenceDataSet.up_Fill_frmInternalCaseStatus_All' table. You can move, or remove it, as needed.
    this.up_Fill_frmInternalCaseStatus_AllTableAdapter.Fill(this.AFC_ObsolescenceDataSet.up_Fill_frmInternalCaseStatus_All);

    this.reportViewer1.RefreshReport();
}

// The search parameters will be different for every winform, and will presumably
//  come from some winform UI elements on that form, e.g., parentPartTextBox.Text
protected override DataResult GetReportData(SubreportProcessingEventArgs e)
{
    // Return the data result, which contains a data table and a label which will be
    //  passed to the report data source
    // You could use DataSet in DataResult instead of DataTable if needed
    switch (e.ReportPath)
    {
        case "rptSubAlternateParts":
            return new DataResult(
                new BLL.AlternatePartBLL().GetAlternativePart(parentPartTextBox.Text)
                , "BLL_AlternatePartBLL"
            );

        case "rptSubGetAssemblies":
            return new DataResult(
                new BLL.SubAssemblyBLL().GetSubAssemblies(someOtherTextBox.Text)
                , "BLL_SubAssemblyBLL"
            );

        default:
            throw new NotImplementedException(string.Format("Subreport {0} is not implemented", e.ReportPath));

    }
} 
```

有两个问题：

1.  `DataResult`Visual Studio 2008 无法识别，即使它位于 ReportWinForm 基类中。
2.  VS 2008 中的设计器声称无法编辑从 ReportWinForm 派生的类，即使基类是从`Form`.

有关更多上下文，请参阅[委托如何使用通用和可扩展类响应多个事件？](https://stackoverflow.com/questions/14777799/how-can-a-delegate-respond-to-multiple-events-with-a-generic-and-extensible-clas)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T18:25:52.083

> Visual Studio 2008 无法识别 DataResult，即使它位于 ReportWinForm 基类中。

如果它真的*在*课堂上，你应该在课堂外指定`ReportWinForm.DataResult`.

> VS 2008 中的设计器声称不能编辑从 ReportWinForm 派生的类，即使基类是从 Form 派生的。

您确定所有 DLL 依赖项都正确吗？您需要定义所有基类的所有 DLL。

[顺便说一句，如果可以并且想要升级，您可以[免费下载 Visual Studio 2012 Express 版本。](https://www.microsoft.com/visualstudio/eng/products/visual-studio-express-products)]

# grails - 在 Grails 2.2 中覆盖插件视图

> ID：14881415
> 
> 赞同：4
> 
> 时间：2013-02-14T18:17:45.783
> 
> 标签：grails, plugins, view, gsp, taglib

我正在尝试自定义出色的 FilterPane grails 插件的 HTML 标记，但是我遇到了一些困难。FilterPane 提供了一堆用于呈现搜索/过滤表单的标签，我想在我的应用程序中覆盖这些标签。

我曾认为我可以简单地复制`_tagName.gsp`我想要覆盖的 s

`plugins/filterpane-2.0.1.1/grails-app/views/filterpane`

进入

`grails-app/views/filterpane`

并修改它们，但是如果使用指定的插件名称属性调用 render 方法，Grails 似乎从不检查应用程序是否覆盖插件的视图。

`org.codehaus.groovy.grails.web.pages.GroovyPagesTemplateRenderer.findAndCacheTemplate`在私有方法中包含以下代码：

```
...
GroovyPageScriptSource scriptSource;
if (pluginName == null) {
    scriptSource = groovyPageLocator.findTemplateInBinding(templatePath, pageScope);
}  else {
    scriptSource = groovyPageLocator.findTemplateInBinding(pluginName, templatePath, pageScope);
}
... 
```

因此，当指定非 null 时`pluginName`，我们只是抓取插件的视图，从不检查应用程序是否覆盖它。

我认为解决这个问题的一个简单方法是覆盖`GrailsConventionGroovyPageLocator.findTemplateInBinding`，或者其他类似的方法`GrailsConventionGroovyPageLocator`，但是似乎也不可能从 Grails 应用程序中做到这一点！

我创建了一个简单的覆盖类`GrailsConventionGroovyPageLocator`，将`findTemplateInBinding`方法替换为在检查插件视图之前检查应用程序视图目录的方法。然后我进行了修改`resources.groovy`，添加了一个 doWithSpring 闭包来替换`beanClass`默认的属性`groovyPageLocator`：

```
def doWithSpring = {
    def pageLocator = delegate.getBeanDefinition("groovyPageLocator")
    pageLocator.beanClass = MyConventionGroovyPageLocator
} 
```

但是，当我的应用程序启动时，这似乎没有被调用。

我在这里真的很茫然。我原以为这很简单，但它变成了一些蠕虫。有没有人有什么建议？我想做的就是覆盖插件提供的视图......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-29T21:56:27.807

我不是 grails 专家，但为了覆盖插件视图，您应该在主项目视图文件夹中重新创建它们。例如，我`/auth/login.gsp`通过简单地在我的`/project/views/auth/login.gsp`. 如果您对插件文件本身进行更改，则在卸载插件时可能会丢失它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T19:52:02.640

您可以修改插件源，而不是更改模板的位置。

地点是：`user_home\.grails\version\projects\project\plugins\plugin-name`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-04T15:07:58.917

为了更改插件模板中的视图，请执行命令

`grails install-templates`

[资源](http://grails.github.io/grails-doc/latest/ref/Command%20Line/install-templates.html)

这会将插件的模板复制到您的项目中，然后您可以对其进行自定义。例如，脚手架插件的作用是将文件复制到 src/templates/scaffolding（注意，不是*grails-app* /templates/scaffolding）。因此，在您的情况下，我会尝试将文件复制到 src/views/filterpane

# database - 使用 codeigniter 中的活动记录连接两个数据库

> ID：14881428
> 
> 赞同：0
> 
> 时间：2013-02-14T18:18:17.917
> 
> 标签：database, codeigniter, activerecord, join

有没有人知道如何使用 codeignitor 活动记录连接来自两个不同数据库的两个表？

我有这两个数据库实例：

```
 $this->DB2 = $this->load->database('asterisk', TRUE);
      $this->DB1 = $this->load->database('default', TRUE); 
```

我想从这两个不同的数据库中加入两个表。我怎样才能做到这一点？

请，如果你有任何文档链接给我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T18:59:36.803

您是否尝试过为每个数据库添加前缀？我无权访问我的本地服务器来测试这个，但如果你对这两个数据库都有权限，类似的东西应该可以工作：

```
$this->db->select('*');
$this->db->from('asterisk.blogs');
$this->db->join('default.comments', 'default.comments.id = asterisk.blogs.id'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T19:36:39.147

如果您无法加入两个不同的数据库，并且不想使用常规 SQL 语句 - 您可以尝试使用 ActiveRecord 缓存来执行此操作。

[http://ellislab.com/codeigniter/user-guide/database/active_record.html#caching](http://ellislab.com/codeigniter/user-guide/database/active_record.html#caching)

一些可能不起作用的“伪代码” - 但可能有助于您入门。

```
$this->db = $this->load->database('asterisk', TRUE);
$this->db->start_cache();
$this->db->select('*');
$this->db->stop_cache();
$this->db->get('table1');

$this->db = $this->load->database('default', TRUE);
$this->db->select('*');
$this->db->from('table2');
$this->db->join('table1', 'table1.id = table2.id');
$this->db->get(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-21T22:20:34.123

在您的模型中调用另一个数据库：

```
function __construct() {
    parent::__construct();
    $this->DB2= $this->load->database('DB2', TRUE);
} 
```

然后只需在 Join 上使用数据库的名称

```
function get_personas() {
        $this->db->join('DB2.administrador c', 'c.id_administrador = personas.id_administrador', 'left');
        $this->db->select('c.administrador_nombre AS admin', FALSE);
        $this->db->join('tipo_identificacion b', 'b.id_tipo_identificacion = personas.id_tipo_identificacion', 'left');
        $this->db->select('b.tipo_identificacion_nombre', FALSE);
        $this->db->select('personas.*', FALSE);
        $this->db->where('id_personas <>', 1);
        $query = $this->db->get('personas');
        if ($query->num_rows() > 0) {
            return $query->result();
        } else {
            return FALSE;
        }
    } 
```

# warnings - 警告：implode() [function.implode]：在第 221 行的 descpage.php 中传递的参数无效

> ID：14881429
> 
> 赞同：0
> 
> 时间：2013-02-14T18:18:20.323
> 
> 标签：warnings, implode

我收到以下错误：

`Warning: implode() [function.implode]: Invalid arguments passed in /descpage.php on line 221`

我通读了该网站，但看不到这一点。

请你看看，看看你是否能看到任何会导致这些问题的东西。

这是来自一个旧的 amzon 商店脚本，我认为程序员不再更新它了。

以下是该页面的完整代码：

`

```
function push($myarray,$text){
    $myarray[] = $text;
}
if ($Details[Address]) {
    push ($descriptors, "<b>$language_text[details_text1]</b> ".($Details[Address][0])); 
}
if ($Details[AmazonMaximumAge]) {
    if ($Details[AmazonMaximumAge] < "24") {
        $maxyears = sprintf("%.0f", $Details[AmazonMaximumAge][0]);
        push ($descriptors, "<b>$language_text[details_text2]</b> $maxyears ".$language_text[miscellaneous1]);
    } else{
        $maxyears = sprintf("%.0f", $Details[AmazonMaximumAge][0] / 12);
        push ($descriptors, "<b>$language_text[details_text2]</b> $maxyears ".$language_text[miscellaneous2]);
    }
}
if ($Details[ManufacturerMaximumAge]) {
    if ($Details[ManufacturerMaximumAge] < "24") {
        $maxyears = sprintf("%.0f", $Details[ManufacturerMaximumAge][0]);
        push ($descriptors, "<b>$language_text[details_text91]</b> $maxyears ".$language_text[miscellaneous1]);
    } else{
        $maxyears = sprintf("%.0f", $Details[ManufacturerMaximumAge][0] / 12);
        push ($descriptors, "<b>$language_text[details_text91]</b> $maxyears ".$language_text[miscellaneous2]);
    }
}
if ($Details[AmazonMinimumAge]) push ($descriptors, "<b>$language_text[details_text3]</b> ".($Details[AmazonMinimumAge][0]));
if ($Details[ApertureModes]) push ($descriptors, "<b>$language_text[details_text4]</b> ".($Details[ApertureModes][0]));
if ($Details[AspectRatio]) push ($descriptors, "<b>$language_text[details_text5]</b> ".($Details[AspectRatio][0]));
if ($Details[AudienceRating]) push ($descriptors, "<b>$language_text[details_text6]</b> ".($Details[AudienceRating][0]));
if ($Details[AudioFormat]) push ($descriptors, "<b>$language_text[details_text7]</b> ".($Details[AudioFormat][0]));
if ($Details[BackFinding]) push ($descriptors, "<b>$language_text[details_text8]</b> ".($Details[BackFinding][0]));
if ($Details[BandMaterialType]) push ($descriptors, "<b>$language_text[details_text9]</b> ".($Details[BandMaterialType][0]));
if ($Details[BatteriesIncluded]) push ($descriptors, "<b>$language_text[details_text10]</b> ".($Details[BatteriesIncluded][0]));
if ($Details[Batteries]) push ($descriptors, "<b>$language_text[details_text11]</b> ".($Details[Batteries][0]));
if ($Details[BatteryDescription]) push ($descriptors, "<b>$language_text[details_text12]</b> ".($Details[BatteryDescription][0]));
if ($Details[BatteryType]) push ($descriptors, "<b>$language_text[details_text13]</b> ".($Details[BatteryType][0]));
if ($Details[BezelMaterialType]) push ($descriptors, "<b>$language_text[details_text14]</b> ".($Details[BezelMaterialType][0]));
if ($Details[Binding]) push ($descriptors, "<b>$language_text[details_text15]</b> ".($Details[Binding][0]));
if ($Details[Brand]) push ($descriptors, "<b>$language_text[details_text16]</b> ".($Details[Brand][0]));
if ($Details[CalendarType]) push ($descriptors, "<b>$language_text[details_text17]</b> ".($Details[CalendarType][0]));
if ($Details[CameraManualFeatures]) push ($descriptors, "<b>$language_text[details_text18]</b> ".($Details[CameraManualFeatures][0]));
if ($Details[CaseDiameter]) push ($descriptors, "<b>$language_text[details_text19]</b> ".($Details[CaseDiameter][0]));
if ($Details[CaseMaterialType]) push ($descriptors, "<b>$language_text[details_text20]</b> ".($Details[CaseMaterialType][0]));
if ($Details[CaseThickness]) push ($descriptors, "<b>$language_text[details_text21]</b> ".($Details[CaseThickness][0]));
if ($Details[CaseType]) push ($descriptors, "<b>$language_text[details_text22]</b> ".($Details[CaseType][0]));
if ($Details[CDRWDescription]) push ($descriptors, "<b>$language_text[details_text23]</b> ".($Details[CDRWDescription][0]));
if ($Details[ChainType]) push ($descriptors, "<b>$language_text[details_text24]</b> ".($Details[ChainType][0]));
if ($Details[ClaspType]) push ($descriptors, "<b>$language_text[details_text25]</b> ".($Details[ClaspType][0]));
if ($Details[ClothingSize]) push ($descriptors, "<b>$language_text[details_text26]</b> ".($Details[ClothingSize][0]));
if ($Details[Color]) push ($descriptors, "<b>$language_text[details_text27]</b> ".($Details[Color][0]));
if ($Details[Compatibility]) push ($descriptors, "<b>$language_text[details_text28]</b> ".($Details[Compatibility][0]));
if ($Details[ComputerHardwareType]) push ($descriptors, "<b>$language_text[details_text29]</b> ".($Details[ComputerHardwareType][0]));
if ($Details[ComputerPlatform]) push ($descriptors, "<b>$language_text[details_text30]</b> ".($Details[ComputerPlatform][0]));
if ($Details[Connectivity]) push ($descriptors, "<b>$language_text[details_text31]</b> ".($Details[Connectivity][0]));
if ($Details[ContinuousShootingSpeed]) push ($descriptors, "<b>$language_text[details_text32]</b> ".($Details[ContinuousShootingSpeed][0]));
if ($Details[Country]) push ($descriptors, "<b>$language_text[details_text33]</b> ".($Details[Country][0]));
if ($Details[CPUManufacturer]) push ($descriptors, "<b>$language_text[details_text34]</b> ".($Details[CPUManufacturer][0]));
if ($Details[CPUSpeed]) push ($descriptors, "<b>$language_text[details_text35]</b> ".($Details[CPUSpeed][0]));
if ($Details[CPUType]) push ($descriptors, "<b>$language_text[details_text36]</b> ".($Details[CPUType][0]));
if ($Details[Cuisine]) push ($descriptors, "<b>$language_text[details_text37]</b> ".($Details[Cuisine][0]));
if ($Details[DelayBetweenShots]) push ($descriptors, "<b>$language_text[details_text38]</b> ".($Details[DelayBetweenShots][0]));
if ($Details[Department]) push ($descriptors, "<b>$language_text[details_text39]</b> ".($Details[Department][0]));
if ($Details[DeweyDecimalNumber]) push ($descriptors, "<b>$language_text[details_text40]</b> ".($Details[DeweyDecimalNumber][0]));
if ($Details[DialColor]) push ($descriptors, "<b>$language_text[details_text41]</b> ".($Details[DialColor][0]));
if ($Details[DialWindowMaterialType]) push ($descriptors, "<b>$language_text[details_text42]</b> ".($Details[DialWindowMaterialType][0]));
if ($Details[DigitalZoom]) push ($descriptors, "<b>$language_text[details_text43]</b> ".($Details[DigitalZoom][0]));
if ($Details[DisplaySize]) push ($descriptors, "<b>$language_text[details_text44]</b> ".($Details[DisplaySize][0]));
if ($Details[DVDRWDescription]) push ($descriptors, "<b>$language_text[details_text45]</b> ".($Details[DVDRWDescription][0]));
if ($Details[EAN]) push ($descriptors, "<b>$language_text[details_text46]</b> ".($Details[EAN][0]));
if ($Details[ESRBAgeRating]) push ($descriptors, "<b>$language_text[details_text47]</b> ".($Details[ESRBAgeRating][0]));
if ($Details[ExternalDisplaySupportDescription]) push ($descriptors, "<b>$language_text[details_text48]</b> ".($Details[ExternalDisplaySupportDescription][0]));
if ($Details[FabricType]) push ($descriptors, "<b>$language_text[details_text49]</b> ".($Details[FabricType][0]));
if ($Details[FaxNumber]) push ($descriptors, "<b>$language_text[details_text50]</b> ".($Details[FaxNumber][0]));
if ($Details[Feature]) push ($descriptors, "<b>$language_text[details_text51]</b> ".($Details[Feature][0]));
if ($Details[FirstIssueLeadTime]) push ($descriptors, "<b>$language_text[details_text52]</b> ".($Details[FirstIssueLeadTime][0]));
if ($Details[FloppyDiskDriveDescription]) push ($descriptors, "<b>$language_text[details_text53]</b> ".($Details[FloppyDiskDriveDescription][0]));
if ($Details[Format]) push ($descriptors, "<b>$language_text[details_text54]</b> ".($Details[Format][0]));
if ($Details[GemType]) push ($descriptors, "<b>$language_text[details_text55]</b> ".($Details[GemType][0]));
if ($Details[GraphicsCardInterface]) push ($descriptors, "<b>$language_text[details_text56]</b> ".($Details[GraphicsCardInterface][0]));
if ($Details[GraphicsDescription]) push ($descriptors, "<b>$language_text[details_text57]</b> ".($Details[GraphicsDescription][0]));
if ($Details[GraphicsMemorySize]) push ($descriptors, "<b>$language_text[details_text58]</b> ".($Details[GraphicsMemorySize][0]));
if ($Details[HardDiskCount]) push ($descriptors, "<b>$language_text[details_text59]</b> ".($Details[HardDiskCount][0]));
if ($Details[HardDiskSize]) push ($descriptors, "<b>$language_text[details_text60]</b> ".($Details[HardDiskSize][0]));
if ($Details[HasAutoFocus]) push ($descriptors, "<b>$language_text[details_text61]</b> ".($Details[HasAutoFocus][0]));
if ($Details[HasBurstMode]) push ($descriptors, "<b>$language_text[details_text62]</b> ".($Details[HasBurstMode][0]));
if ($Details[HasInCameraEditing]) push ($descriptors, "<b>$language_text[details_text63]</b> ".($Details[HasInCameraEditing][0]));
if ($Details[HasRedEyeReduction]) push ($descriptors, "<b>$language_text[details_text64]</b> ".($Details[HasRedEyeReduction][0]));
if ($Details[HasSelfTimer]) push ($descriptors, "<b>$language_text[details_text65]</b> ".($Details[HasSelfTimer][0]));
if ($Details[HasTripodMount]) push ($descriptors, "<b>$language_text[details_text66]</b> ".($Details[HasTripodMount][0]));
if ($Details[HasVideoOut]) push ($descriptors, "<b>$language_text[details_text67]</b> ".($Details[HasVideoOut][0]));
if ($Details[HasViewfinder]) push ($descriptors, "<b>$language_text[details_text68]</b> ".($Details[HasViewfinder][0]));
if ($Details[Height]) push ($descriptors, "<b>$language_text[details_text69]</b> ".($Details[Height][0]));
if ($Details[HoursOfOperation]) push ($descriptors, "<b>$language_text[details_text70]</b> ".($Details[HoursOfOperation][0]));
if ($Details[Hours]) push ($descriptors, "<b>$language_text[details_text71]</b> ".($Details[Hours][0]));
if ($Details[IncludedSoftware]) push ($descriptors, "<b>$language_text[details_text72]</b> ".($Details[IncludedSoftware][0]));
if ($Details[IncludesMp3Player]) push ($descriptors, "<b>$language_text[details_text73]</b> ".($Details[IncludesMp3Player][0]));
if ($Details[Ingredients]) push ($descriptors, "<b>$language_text[details_text74]</b> ".($Details[Ingredients][0]));
if ($Details[IsAutographed]) push ($descriptors, "<b>$language_text[details_text75]</b> ".($Details[IsAutographed][0]));
if ($Details[ISBN]) push ($descriptors, "<b>$language_text[details_text76]</b> ".($Details[ISBN][0]));
if ($Details[IsFragile]) push ($descriptors, "<b>$language_text[details_text77]</b> ".($Details[IsFragile][0]));
if ($Details[IsLabCreated]) push ($descriptors, "<b>$language_text[details_text78]</b> ".($Details[IsLabCreated][0]));
if ($Details[IsMemorabilia]) push ($descriptors, "<b>$language_text[details_text79]</b> ".($Details[IsMemorabilia][0]));
if ($Details[ISOEquivalent]) push ($descriptors, "<b>$language_text[details_text80]</b> ".($Details[ISOEquivalent][0]));
if ($Details[IssuesPerYear]) push ($descriptors, "<b>$language_text[details_text81]</b> ".($Details[IssuesPerYear][0]));
if ($Details[KeyboardDescription]) push ($descriptors, "<b>$language_text[details_text82]</b> ".($Details[KeyboardDescription][0]));
if ($Details[Label]) push ($descriptors, "<b>$language_text[details_text83]</b> ".($Details[Label][0]));
if ($Details[LegalDisclaimer]) push ($descriptors, "<b>$language_text[details_text84]</b> ".($Details[LegalDisclaimer][0]));
if ($Details[Length]) push ($descriptors, "<b>$language_text[details_text85]</b> ".($Details[Length][0]));
if ($Details[LineVoltage]) push ($descriptors, "<b>$language_text[details_text86]</b> ".($Details[LineVoltage][0]));
if ($Details[MacroFocusRange]) push ($descriptors, "<b>$language_text[details_text87]</b> ".($Details[MacroFocusRange][0]));
if ($Details[MagazineType]) push ($descriptors, "<b>$language_text[details_text88]</b> ".($Details[MagazineType][0]));
if ($Details[Manufacturer]) push ($descriptors, "<b>$language_text[details_text89]</b> ".($Details[Manufacturer][0]));
if ($Details[ManufacturerLaborWarrantyDescription]) push ($descriptors, "<b>$language_text[details_text90]</b> ".($Details[ManufacturerLaborWarrantyDescription][0]));
if ($Details[ManufacturerMinimumAge]) push ($descriptors, "<b>$language_text[details_text92]</b> ".($Details[ManufacturerMinimumAge][0]));
if ($Details[ManufacturerPartsWarrantyDescription]) push ($descriptors, "<b>$language_text[details_text93]</b> ".($Details[ManufacturerPartsWarrantyDescription][0]));
if ($Details[MaterialType]) push ($descriptors, "<b>$language_text[details_text94]</b> ".($Details[MaterialType][0]));
if ($Details[MaximumAperture]) push ($descriptors, "<b>$language_text[details_text95]</b> ".($Details[MaximumAperture][0]));
if ($Details[MaximumColorDepth]) push ($descriptors, "<b>$language_text[details_text96]</b> ".($Details[MaximumColorDepth][0]));
if ($Details[MaximumFocalLength]) push ($descriptors, "<b>$language_text[details_text97]</b> ".($Details[MaximumFocalLength][0]));
if ($Details[MaximumHighResolutionImages]) push ($descriptors, "<b>$language_text[details_text98]</b> ".($Details[MaximumHighResolutionImages][0]));
if ($Details[MaximumHorizontalResolution]) push ($descriptors, "<b>$language_text[details_text99]</b> ".($Details[MaximumHorizontalResolution][0]));
if ($Details[MaximumLowResolutionImages]) push ($descriptors, "<b>$language_text[details_text100]</b> ".($Details[MaximumLowResolutionImages][0]));
if ($Details[MaximumResolution]) push ($descriptors, "<b>$language_text[details_text101]</b> ".($Details[MaximumResolution][0]));
if ($Details[MaximumShutterSpeed]) push ($descriptors, "<b>$language_text[details_text102]</b> ".($Details[MaximumShutterSpeed][0]));
if ($Details[MaximumVerticalResolution]) push ($descriptors, "<b>$language_text[details_text103]</b> ".($Details[MaximumVerticalResolution][0]));
if ($Details[MaximumWeightRecommendation]) push ($descriptors, "<b>$language_text[details_text104]</b> ".($Details[MaximumWeightRecommendation][0]));
if ($Details[MemorySlotsAvailable]) push ($descriptors, "<b>$language_text[details_text105]</b> ".($Details[MemorySlotsAvailable][0]));
if ($Details[MetalStamp]) push ($descriptors, "<b>$language_text[details_text106]</b> ".($Details[MetalStamp][0]));
if ($Details[MetalType]) push ($descriptors, "<b>$language_text[details_text107]</b> ".($Details[MetalType][0]));
if ($Details[MiniMovieDescription]) push ($descriptors, "<b>$language_text[details_text108]</b> ".($Details[MiniMovieDescription][0]));
if ($Details[MinimumFocalLength]) push ($descriptors, "<b>$language_text[details_text109]</b> ".($Details[MinimumFocalLength][0]));
if ($Details[MinimumShutterSpeed]) push ($descriptors, "<b>$language_text[details_text110]</b> ".($Details[MinimumShutterSpeed][0]));
if ($Details[Model]) push ($descriptors, "<b>$language_text[details_text111]</b> ".($Details[Model][0]));
if ($Details[ModemDescription]) push ($descriptors, "<b>$language_text[details_text112]</b> ".($Details[ModemDescription][0]));
if ($Details[MonitorSize]) push ($descriptors, "<b>$language_text[details_text113]</b> ".($Details[MonitorSize][0]));
if ($Details[MonitorViewableDiagonalSize]) push ($descriptors, "<b>$language_text[details_text114]</b> ".($Details[MonitorViewableDiagonalSize][0]));
if ($Details[MouseDescription]) push ($descriptors, "<b>$language_text[details_text115]</b> ".($Details[MouseDescription][0]));
if ($Details[NativeResolution]) push ($descriptors, "<b>$language_text[details_text116]</b> ".($Details[NativeResolution][0]));
if ($Details[Neighborhood]) push ($descriptors, "<b>$language_text[details_text117]</b> ".($Details[Neighborhood][0]));
if ($Details[NetworkInterfaceDescription]) push ($descriptors, "<b>$language_text[details_text118]</b> ".($Details[NetworkInterfaceDescription][0]));
if ($Details[NotebookDisplayTechnology]) push ($descriptors, "<b>$language_text[details_text119]</b> ".($Details[NotebookDisplayTechnology][0]));
if ($Details[NotebookPointingDeviceDescription]) push ($descriptors, "<b>$language_text[details_text120]</b> ".($Details[NotebookPointingDeviceDescription][0]));
if ($Details[NumberOfDiscs]) push ($descriptors, "<b>$language_text[details_text121]</b> ".($Details[NumberOfDiscs][0]));
if ($Details[NumberOfIssues]) push ($descriptors, "<b>$language_text[details_text122]</b> ".($Details[NumberOfIssues][0]));
if ($Details[NumberOfItems]) push ($descriptors, "<b>$language_text[details_text123]</b> ".($Details[NumberOfItems][0]));
if ($Details[NumberOfPages]) push ($descriptors, "<b>$language_text[details_text124]</b> ".($Details[NumberOfPages][0]));
if ($Details[NumberOfPearls]) push ($descriptors, "<b>$language_text[details_text125]</b> ".($Details[NumberOfPearls][0]));
if ($Details[NumberOfRapidFireShots]) push ($descriptors, "<b>$language_text[details_text126]</b> ".($Details[NumberOfRapidFireShots][0]));
if ($Details[NumberOfStones]) push ($descriptors, "<b>$language_text[details_text127]</b> ".($Details[NumberOfStones][0]));
if ($Details[NumberOfTracks]) push ($descriptors, "<b>$language_text[details_text128]</b> ".($Details[NumberOfTracks][0]));
if ($Details[OpticalZoom]) push ($descriptors, "<b>$language_text[details_text129]</b> ".($Details[OpticalZoom][0]));
if ($Details[PearlLustre]) push ($descriptors, "<b>$language_text[details_text130]</b> ".($Details[PearlLustre][0]));
if ($Details[PearlMinimumColor]) push ($descriptors, "<b>$language_text[details_text131]</b> ".($Details[PearlMinimumColor][0]));
if ($Details[PearlShape]) push ($descriptors, "<b>$language_text[details_text132]</b> ".($Details[PearlShape][0]));
if ($Details[PearlStringingMethod]) push ($descriptors, "<b>$language_text[details_text133]</b> ".($Details[PearlStringingMethod][0]));
if ($Details[PearlSurfaceBlemishes]) push ($descriptors, "<b>$language_text[details_text134]</b> ".($Details[PearlSurfaceBlemishes][0]));
if ($Details[PearlType]) push ($descriptors, "<b>$language_text[details_text135]</b> ".($Details[PearlType][0]));
if ($Details[PearlUniformity]) push ($descriptors, "<b>$language_text[details_text136]</b> ".($Details[PearlUniformity][0]));
if ($Details[PhoneNumber]) push ($descriptors, "<b>$language_text[details_text137]</b> ".($Details[PhoneNumber][0]));
if ($Details[PhotoFlashType]) push ($descriptors, "<b>$language_text[details_text138]</b> ".($Details[PhotoFlashType][0]));
if ($Details[PictureFormat]) push ($descriptors, "<b>$language_text[details_text139]</b> ".($Details[PictureFormat][0]));
if ($Details[Platform]) push ($descriptors, "<b>$language_text[details_text140]</b> ".($Details[Platform][0]));
if ($Details[PriceRating]) push ($descriptors, "<b>$language_text[details_text141]</b> ".($Details[PriceRating][0]));
if ($Details[ProcessorCount]) push ($descriptors, "<b>$language_text[details_text142]</b> ".($Details[ProcessorCount][0]));
if ($Details[PublicationDate]) push ($descriptors, "<b>$language_text[details_text143]</b> ".($Details[PublicationDate][0]));
if ($Details[Publisher]) push ($descriptors, "<b>$language_text[details_text144]</b> ".($Details[Publisher][0]));
if ($Details[ReadingLevel]) push ($descriptors, "<b>$language_text[details_text145]</b> ".($Details[ReadingLevel][0]));
if ($Details[RegionCode]) push ($descriptors, "<b>$language_text[details_text146]</b> ".($Details[RegionCode][0]));
if ($Details[ReleaseDate]) push ($descriptors, "<b>$language_text[details_text147]</b> ".($Details[ReleaseDate][0]));
if ($Details[RemovableMemory]) push ($descriptors, "<b>$language_text[details_text148]</b> ".($Details[RemovableMemory][0]));
if ($Details[ResolutionModes]) push ($descriptors, "<b>$language_text[details_text149]</b> ".($Details[ResolutionModes][0]));
if ($Details[RingSize]) push ($descriptors, "<b>$language_text[details_text150]</b> ".($Details[RingSize][0]));
if ($Details[RunningTime]) push ($descriptors, "<b>$language_text[details_text151]</b> ".($Details[RunningTime][0]));
if ($Details[SalesRank]) push ($descriptors, "<b>$language_text[details_text194]</b> ".($Details[SalesRank][0]));
if ($Details[SecondaryCacheSize]) push ($descriptors, "<b>$language_text[details_text152]</b> ".($Details[SecondaryCacheSize][0]));
if ($Details[SettingType]) push ($descriptors, "<b>$language_text[details_text153]</b> ".($Details[SettingType][0]));
if ($Details[SizePerPearl]) push ($descriptors, "<b>$language_text[details_text154]</b> ".($Details[SizePerPearl][0]));
if ($Details[Size]) push ($descriptors, "<b>$language_text[details_text155]</b> ".($Details[Size][0]));
if ($Details[SoundCardDescription]) push ($descriptors, "<b>$language_text[details_text156]</b> ".($Details[SoundCardDescription][0]));
if ($Details[SpeakerDescription]) push ($descriptors, "<b>$language_text[details_text157]</b> ".($Details[SpeakerDescription][0]));
if ($Details[SpecialFeatures]) push ($descriptors, "<b>$language_text[details_text158]</b> ".($Details[SpecialFeatures][0]));
if ($Details[StoneClarity]) push ($descriptors, "<b>$language_text[details_text159]</b> ".($Details[StoneClarity][0]));
if ($Details[StoneColor]) push ($descriptors, "<b>$language_text[details_text160]</b> ".($Details[StoneColor][0]));
if ($Details[StoneCut]) push ($descriptors, "<b>$language_text[details_text161]</b> ".($Details[StoneCut][0]));
if ($Details[StoneShape]) push ($descriptors, "<b>$language_text[details_text162]</b> ".($Details[StoneShape][0]));
if ($Details[StoneWeight]) push ($descriptors, "<b>$language_text[details_text163]</b> ".($Details[StoneWeight][0]));
if ($Details[Studio]) push ($descriptors, "<b>$language_text[details_text164]</b> ".($Details[Studio][0]));
if ($Details[SubscriptionLength]) push ($descriptors, "<b>$language_text[details_text165]</b> ".($Details[SubscriptionLength][0]));
if ($Details[SupportedImageType]) push ($descriptors, "<b>$language_text[details_text166]</b> ".($Details[SupportedImageType][0]));
if ($Details[SystemBusSpeed]) push ($descriptors, "<b>$language_text[details_text167]</b> ".($Details[SystemBusSpeed][0]));
if ($Details[SystemMemorySizeMax]) push ($descriptors, "<b>$language_text[details_text168]</b> ".($Details[SystemMemorySizeMax][0]));
if ($Details[SystemMemorySize]) push ($descriptors, "<b>$language_text[details_text169]</b> ".($Details[SystemMemorySize][0]));
if ($Details[SystemMemoryType]) push ($descriptors, "<b>$language_text[details_text170]</b> ".($Details[SystemMemoryType][0]));
if ($Details[TheatricalReleaseDate]) push ($descriptors, "<b>$language_text[details_text171]</b> ".($Details[TheatricalReleaseDate][0]));
if ($Details[TotalDiamondWeight]) push ($descriptors, "<b>$language_text[details_text172]</b> ".($Details[TotalDiamondWeight][0]));
if ($Details[TotalExternalBaysFree]) push ($descriptors, "<b>$language_text[details_text173]</b> ".($Details[TotalExternalBaysFree][0]));
if ($Details[TotalFirewirePorts]) push ($descriptors, "<b>$language_text[details_text174]</b> ".($Details[TotalFirewirePorts][0]));
if ($Details[TotalGemWeight]) push ($descriptors, "<b>$language_text[details_text175]</b> ".($Details[TotalGemWeight][0]));
if ($Details[TotalInternalBaysFree]) push ($descriptors, "<b>$language_text[details_text176]</b> ".($Details[TotalInternalBaysFree][0]));
if ($Details[TotalMetalWeight]) push ($descriptors, "<b>$language_text[details_text177]</b> ".($Details[TotalMetalWeight][0]));
if ($Details[TotalNTSCPALPorts]) push ($descriptors, "<b>$language_text[details_text178]</b> ".($Details[TotalNTSCPALPorts][0]));
if ($Details[TotalParallelPorts]) push ($descriptors, "<b>$language_text[details_text179]</b> ".($Details[TotalParallelPorts][0]));
if ($Details[TotalPCCardSlots]) push ($descriptors, "<b>$language_text[details_text180]</b> ".($Details[TotalPCCardSlots][0]));
if ($Details[TotalPCISlotsFree]) push ($descriptors, "<b>$language_text[details_text181]</b> ".($Details[TotalPCISlotsFree][0]));
if ($Details[TotalSerialPorts]) push ($descriptors, "<b>$language_text[details_text182]</b> ".($Details[TotalSerialPorts][0]));
if ($Details[TotalSVideoOutPorts]) push ($descriptors, "<b>$language_text[details_text183]</b> ".($Details[TotalSVideoOutPorts][0]));
if ($Details[TotalUSB2Ports]) push ($descriptors, "<b>$language_text[details_text184]</b> ".($Details[TotalUSB2Ports][0]));
if ($Details[TotalUSBPorts]) push ($descriptors, "<b>$language_text[details_text185]</b> ".($Details[TotalUSBPorts][0]));
if ($Details[TotalVGAOutPorts]) push ($descriptors, "<b>$language_text[details_text186]</b> ".($Details[TotalVGAOutPorts][0]));
if ($Details[VariationDenomination]) push ($descriptors, "<b>$language_text[details_text187]</b> ".($Details[VariationDenomination][0]));
if ($Details[VariationDescription]) push ($descriptors, "<b>$language_text[details_text188]</b> ".($Details[VariationDescription][0]));
if ($Details[Warranty]) push ($descriptors, "<b>$language_text[details_text189]</b> ".($Details[Warranty][0]));
if ($Details[WatchMovementType]) push ($descriptors, "<b>$language_text[details_text190]</b> ".($Details[WatchMovementType][0]));
if ($Details[WaterResistanceDepth]) push ($descriptors, "<b>$language_text[details_text191]</b> ".($Details[WaterResistanceDepth][0]));
if ($Details[Weight]) push ($descriptors, "<b>$language_text[details_text192]</b> ".($Details[Weight][0]));
if ($Details[Width]) push ($descriptors, "<b>$language_text[details_text193]</b> ".($Details[Width][0]));

$ProductDescription = implode("<br>",$descriptors);

$tmpl->SetTemplate("productpage");
echo $tmpl->ParseTemplate(); 
```

?>`

错误消息中提到的行是下面的第 221 行：

`$ProductDescription = implode("<br>",$descriptors);`

如果我散列这条线，脚本似乎工作正常。

谁能明白它为什么会这样做？

提前感谢您的帮助和时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T18:22:45.500

这“只是”一个警告，因为 $descriptors 变量从未初始化或填充过值。

添加一个 $descriptors = array(); 在第 4 行之前，一切都会按预期工作

```
function push($myarray,$text){
    $myarray[] = $text;
}
if(!isset($descriptors)) {
    $descriptors = array();
}
if ($Details[Address]) { 
```

# php - 是否有可以使用引导程序插入现有站点的（最好是 PHP）CMS？

> ID：14881434
> 
> 赞同：3
> 
> 时间：2013-02-14T18:18:28.120
> 
> 标签：php, twitter-bootstrap, content-management-system

我正在使用 Twitter Bootstrap 创建网站，我需要将其连接到 CMS，因为现在要求我以外的其他人能够编辑内容（不一定是布局或任何内容）。

是否有一个（最好是基于 PHP 的）CMS，我可以简单地“插入”到现有站点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T18:22:30.827

你可以看看Concrete 5，将一些静态html页面转换为CMS管理的动态页面不会超过5-10分钟。

[http://www.concrete5.org/](http://www.concrete5.org/)

# c# - 列出机器和用户级别的配置键

> ID：14881436
> 
> 赞同：1
> 
> 时间：2013-02-14T18:18:37.630
> 
> 标签：c#, windows, encryption, app-config

有谁知道列出机器上安装的机器级和用户级配置密钥的方法？

我创建了一个机器级密钥，它将用于 app.config 用于在服务器上运行的应用程序。我知道如何导出/导入，但我希望能够真正看到它已正确安装/导入。

我很高兴有一种在 Windows 或 .NET 代码中执行此操作的方法。

可以使用以下内容（如果未加载“theKey”，则不会引发异常）检查是否可以加载使用适当的 keyContainerName 作为单个键的提供程序（示例中的“theKey” ）。但我宁愿找到一种方法来列出已安装/导入的密钥。

**应用程序配置**

```
<configProtectedData>
    <providers>
        <add name="abc"
             type="System.Configuration.RsaProtectedConfigurationProvider, System.Configuration, Version=2.0.0.0,
             Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
             keyContainerName="theKey"
             useMachineContainer="true" />
    </providers>
</configProtectedData> 
```

**C# 代码**

```
Configuration myConfig = ConfigurationManager.OpenExeConfiguration(
    ConfigurationUserLevel.None);
myConfig.ConnectionStrings.SectionInformation.ProtectSection("abc"); 
```

# plone - 如何使用 zope.schema 将门户类型分组？

> ID：14881437
> 
> 赞同：1
> 
> 时间：2013-02-14T18:18:44.160
> 
> 标签：plone, zope

我需要创建一个提供这种结构的 Plone configlet：

```
types = {
    'News articles': ['NewsMediaType', 'News Item'], 
    'Images': ['Image'],
    'Pages': ['Page']
} 
```

我制作了一个原型来展示我想要的形式：

![小样](../Images/a7de32f22111596b5746cf086402c076.png)

所以我需要将一些portal_types组合在一起，让用户为这个组分配一个名称。我怎样才能做到这一点？有任何想法吗？

编辑：

我在这个问题上取得了很大的进步，但是当保存表单时，验证给我一个错误

![在此处输入图像描述](../Images/25ddd2c22c0002bf283ff6f3081e82a3.png)

```
 # -*- coding: utf-8 -*-
from plone.theme.interfaces import IDefaultPloneLayer

from z3c.form import interfaces

from zope import schema
from zope.interface import Interface

from plone.registry.field import PersistentField

class IThemeSpecific(IDefaultPloneLayer):
    """  """

class PersistentObject(PersistentField, schema.Object):
    pass

class IAjaxsearchGroup(Interface):
    """Global akismet settings. This describes records stored in the
    configuration registry and obtainable via plone.registry.
    """
    group_name = schema.TextLine(title=u"Group Name",
                                  description=u"Name for the group",
                                  required=False,
                                  default=u'',)

    group_types = schema.List(title=u"Portal Types",
                    description=u"Portal Types to search in this group",
                    value_type =schema.Choice(
                        title=u"Portal Types",
                        vocabulary=u"plone.app.vocabularies.ReallyUserFriendlyTypes",
                        required=False,
                    ),
                    required=False,)

class IAjaxsearchSettings(Interface):
    """Global akismet settings. This describes records stored in the
    configuration registry and obtainable via plone.registry.
    """
    group_info = schema.Tuple(title=u"Group Info",
                                  description=u"Informations of the group",
                                  value_type=PersistentObject(IAjaxsearchGroup, required=False),
                                  required=False,) 
```

-

```
from plone.app.registry.browser import controlpanel

from collective.ajaxsearch.interfaces.interfaces import IAjaxsearchSettings
from collective.ajaxsearch.interfaces.interfaces import IAjaxsearchGroup

from z3c.form.object import registerFactoryAdapter

class AjaxsearchSettingsEditForm(controlpanel.RegistryEditForm):

    schema = IAjaxsearchSettings
    label = u"Ajaxsearch settings"
    description = u""""""

    def updateFields(self):
        super(AjaxsearchSettingsEditForm, self).updateFields()

    def updateWidgets(self):
        super(AjaxsearchSettingsEditForm, self).updateWidgets()

class AjaxsearchSettingsControlPanel(controlpanel.ControlPanelFormWrapper):
    form = AjaxsearchSettingsEditForm 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:20:18.057

这是一个 CRUD（创建-读取-更新-删除）模式。

该`plone.z3cform`软件包仅对此类表单提供特定支持。为类型组定义模式：

```
 class IAJAXTypesGroup(interface):
     name = ...
     types = ... 
```

然后使用[CRUD 形式](http://developer.plone.org/forms/z3c.form.html#crud-form)：

```
from plone.z3cform.crud import crud

class AJAXGroupsCRUDForm(crud.CrudForm):
    update_schema = IAJAXTypesGroup

    def get_items(self):
        # return a sequence of (id, IAJAXTypesGroup-implementer) tuples
        return self.context.getGroups()

    def add(self, data):
        # return a new IAJAXTypesGroup implementer; a IObjectCreatedEvent is generated
        # alternatively, raise zope.schema.ValidationError
        id = self.context.createGroup(**data)
        return self.context.getGroup(id)

    def remove(self, (id, item)):
        # Remove this specific entry from your list
        self.context.deleteGroup(id) 
```

`get_items()`组需要有一个 id，项目按返回它们的顺序显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T18:55:49.597

我为工厂创建了类

```
class AjaxsearchGroup(object):
    """
    group of config
    """
    zope.interface.implements(IAjaxsearchGroup)

registerFactoryAdapter(IAjaxsearchGroup, AjaxsearchGroup) 
```

使用设置

```
# get groups config
registry = queryUtility(IRegistry)
settings = registry.forInterface(IAjaxsearchSettings, check=False)

for config in settings.group_info:
     types[config.group_name] = config.group_types 
```

十分感谢！

# javascript - javascript表达式名称

> ID：14881446
> 
> 赞同：0
> 
> 时间：2013-02-14T18:19:35.460
> 
> 标签：javascript, expression

我是 javascript 的完整初学者，我需要在表单上更正几件事才能使其正常工作。我必须确保它不会拒绝任何有效的名称（带有重音符号、连字符的名称、它们之间带有空格的名称）。目前我的正则表达式是 -

```
var alphabetic = /^[a-zA-Z]+$/;

if ((alphabetic.test(fname)== false) || (alphabetic.test(lname)== false))
{
    alertmsg = alertmsg + "Name should be in alphabets:" + "\n";
} 
```

如果有人能指出我正确的方向，我将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T18:25:55.043

试试这个正则表达式：

```
var alphabetic = /^[a-zàâçéèêëîïôûùüÿñ-\s]+$/i 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T18:29:51.910

正如 Philippe 建议的那样，如果您想接受英语以外的语言/字母，我会更仔细地考虑要包含哪些字母。[a-zA-Z] 在我的测试中，除了严格的 'A' 到 'Z' 之外，似乎无法识别字母。

# apache - Mod_Rewrite 重写目录我不希望它

> ID：14881448
> 
> 赞同：0
> 
> 时间：2013-02-14T18:19:44.360
> 
> 标签：apache, mod-rewrite, kohana

所以我正在使用 Kohana，如果你知道的话它很有用，但不需要帮助我。

我有以下 mod_rewrite 规则：

```
# Allow any files or directories that exist to be displayed directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/store/.*$

# Rewrite all other URLs to index.php/URL
RewriteRule .* index.php [L] 
```

所以我试图将所有对不存在的文件和目录的请求重写为`index.php`.

但是，我希望发送到的任何请求都能`mydomain.com/store/*`通过，因为目录中有另一个 htaccess 文件在`store`那里工作。目前这似乎不起作用。有任何想法吗？

完整的htaccess：

```
# Turn on URL rewriting
RewriteEngine On

# Installation directory
RewriteBase /

#ErrorDocument 404 http://www.mydomain.com/404Page.html
#Options +FollowSymlinks

# Protect hidden files from being viewed
<Files .*>
    Order Deny,Allow
    Deny From All
</Files>

RewriteCond %{REMOTE_ADDR} !^myip
RewriteCond %{REQUEST_URI} !^/maintenance\.html$
RewriteRule ^(.*)$ http://www.mydomain.com/maintenance.html [R=307,L]

##301 Redirect Rules##
#some 301 redirects i did not include here

##Kohana Redirect Rules##

# Protect application and system files from being viewed
RewriteRule ^(?:application|modules|system|kohana|vendors)\b.* http://www.mydomain.com/ [L]

# Allow any files or directories that exist to be displayed directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/?store/

# Rewrite all other URLs to index.php/URL
RewriteRule .* index.php [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T18:30:34.907

试试这个条件：

```
RewriteCond %{REQUEST_URI} !^/?store/ 
```

目录后面的字符不需要检查。如果我没记错的话，我将第一个斜杠设为可选，只有在您的服务器配置不包含尾斜杠时才可见第一个斜杠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T19:02:38.037

问题出在目录中的 .htaccess 文件中，而`store`不是 webroot 中的文件中。谢谢大家，并为我的愚蠢感到抱歉。如果有人想就如何为未来的用户调试这种性质的东西留下评论，那就太棒了。

# ios - 如何以与系统音量不同的音量播放 iPod 音乐库中的曲目？

> ID：14881451
> 
> 赞同：2
> 
> 时间：2013-02-14T18:19:57.623
> 
> 标签：ios, iphone, avplayer, volume

如何以与系统音量不同的音量播放 ipod 音乐库中的音乐（如用户定义的播放列表等）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T18:19:57.623

这适用于任何试图以与系统音量不同的音量播放 ipod 音乐库中的音乐/播放列表的人。有几篇帖子说`[MPMusicPlayerController applicationMusicPlayer]`可以做到这一点，但我发现每当我改变应用程序MusicPlayer的音量时，系统音量也会改变。

使用 AVAudioPlayer 类播放音乐有一个更复杂的方法，但它需要您将音乐文件从 ipod 库复制到应用程序包，当您播放动态内容（如用户生成的播放列表）时，这可能会变得很棘手。不过，该技术确实可以让您访问字节，如果您想对数据进行处理（如 DJ 应用程序），这是一种方法。[在此处](http://blog.tapsquare.com/post/803301658/ipod-library-access/)链接到该解决方案。

我使用的解决方案使用 AVPlayer 类，那里有几个关于如何做到这一点的好帖子。这篇文章基本上是我在 Stackoverflow 和其他地方找到的几种不同解决方案的组合。

我链接了以下框架：

AVFoundation
MediaPlayer
AudioToolbox
CoreAudio
CoreMedia

（我不确定所有这些是否都很关键，但这就是我所拥有的。我也实现了一些 OpenAL 的东西，我没有在下面的代码中显示）

```
// Presumably in your SoundManage.m file (or whatever you call it) ...

#import <CoreAudio/CoreAudioTypes.h>
#import <AudioToolbox/AudioToolbox.h>

@interface SoundManager()

@property (retain, nonatomic) AVPlayer* audioPlayer;
@property (retain, nonatomic) AVPlayerItem* currentItem;

@property (retain, nonatomic) MPMediaItemCollection* currentPlaylist;
@property (retain, nonatomic) MPMediaItem* currentTrack;
@property (assign, nonatomic) MPMusicPlaybackState currentPlaybackState;

@end

@implementation SoundManager

@synthesize audioPlayer;
@synthesize currentItem = m_currentItem;

@synthesize currentPlaylist;
@synthesize currentTrack;
@synthesize currentPlaybackState;

- (id) init
{
    ...

    //Define an AVPlayer instance
    AVPlayer* tempPlayer = [[AVPlayer alloc] init];
    self.audioPlayer = tempPlayer;
    [tempPlayer release];

    ...

    //load the playlist you want to play
    MPMediaItemCollection* playlist = [self getPlaylistWithName: @"emo-pop-unicorn-blood-rage-mix-to-the-max"];
    if(playlist)
        [self loadPlaylist: playlist];

    ...

    //initialize the playback state
    self.currentPlaybackState = MPMusicPlaybackStateStopped;

    //start the music playing
    [self playMusic];

    ...

}

//Have a way to get a playlist reference (as an MPMediaItemCollection in this case)
- (MPMediaItemCollection*) getPlaylistWithName:(NSString *)playlistName
{
    MPMediaQuery* query = [[MPMediaQuery alloc] init];
    MPMediaPropertyPredicate* mediaTypePredicate = [MPMediaPropertyPredicate predicateWithValue: [NSNumber numberWithInteger: MPMediaTypeMusic]                                                                              forProperty:MPMediaItemPropertyMediaType];
    [query addFilterPredicate: mediaTypePredicate];
    [query setGroupingType: MPMediaGroupingPlaylist];

    NSArray* playlists = [query collections];
    [query release];

    for(MPMediaItemCollection* testPlaylist in playlists)
    {
        NSString* testPlaylistName = [testPlaylist valueForProperty: MPMediaPlaylistPropertyName];
        if([testPlaylistName isEqualToString: playlistName])
            return testPlaylist;
    }

    return nil;
}

//Override the setter on currentItem so that you can add/remove 
//the notification listener that will tell you when the song has completed
- (void) setCurrentItem:(AVPlayerItem *)currentItem
{
    if(m_currentItem)
    {
        [[NSNotificationCenter defaultCenter] removeObserver:self name:AVPlayerItemDidPlayToEndTimeNotification object:m_currentItem];
        [m_currentItem release];
    }

    if(currentItem)
        m_currentItem = [currentItem retain];
    else
        m_currentItem = nil;

    if(m_currentItem)
    {
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(handleMusicTrackFinished) name:AVPlayerItemDidPlayToEndTimeNotification object:m_currentItem];
    }
}

//handler that gets called when the name:AVPlayerItemDidPlayToEndTimeNotification notification fires
- (void) handleMusicTrackFinished
{
    [self skipSongForward];  //or something similar
}

//Have a way to load a playlist
- (void) loadPlaylist:(MPMediaItemCollection *)playlist
{
    self.currentPlaylist = playlist;
    self.currentTrack = [playlist.items objectAtIndex: 0];
}

//Play the beats, yo
- (void) playMusic
{
    //check the current playback state and exit early if we're already playing something
    if(self.currentPlaybackState == MPMusicPlaybackStatePlaying)
        return;

    if(self.currentPlaybackState == MPMusicPlaybackStatePaused)
    {
        [self.audioPlayer play];
    }
    else if(self.currentTrack)
    {
        //Get the system url of the current track, and use that to make an AVAsset object
        NSURL* url = [self.currentTrack valueForProperty:MPMediaItemPropertyAssetURL];
        AVAsset* asset = [AVURLAsset URLAssetWithURL:url options:nil];

        //Get the track object from the asset object - we'll need to trackID to tell the
        //AVPlayer that it needs to modify the volume of this track
        AVAssetTrack* track = [[asset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0];

        //Build the AVPlayerItem - this is where you modify the volume, etc. Not the AVPlayer itself
        AVPlayerItem* playerItem = [[AVPlayerItem alloc] initWithAsset: asset]; //initWithURL:url];
        self.currentItem = playerItem;

        //Set up some audio mix parameters to tell the AVPlayer what to do with this AVPlayerItem
        AVMutableAudioMixInputParameters* audioParams = [AVMutableAudioMixInputParameters audioMixInputParameters];
        [audioParams setVolume: 0.5 atTime:kCMTimeZero];  //replace 0.5 with your volume
        [audioParams setTrackID: track.trackID];  //here's the track id

        //Set up the actual AVAudioMix object, which aggregates effects
        AVMutableAudioMix* audioMix = [AVMutableAudioMix audioMix];
        [audioMix setInputParameters: [NSArray arrayWithObject: audioParams]];

        //apply your AVAudioMix object to the AVPlayerItem
        [playerItem setAudioMix:audioMix];

        //refresh the AVPlayer object, and play the track
        [self.audioPlayer replaceCurrentItemWithPlayerItem: playerItem];
        [self.audioPlayer play];

    }

    self.currentPlaybackState = MPMusicPlaybackStatePlaying;
}

- (void) pauseMusic
{   
    if(self.currentPlaybackState == MPMusicPlaybackStatePaused)
        return;

    [self.audioPlayer pause];

    self.currentPlaybackState = MPMusicPlaybackStatePaused;
}

- (void) skipSongForward
{
    //adjust self.currentTrack to be the next object in self.currentPlaylist
    //start the new track in a manner similar to that used in -playMusic
}

- (void) skipSongBackward
{
    float currentTime = self.audioPlayer.currentItem.currentTime.value / self.audioPlayer.currentItem.currentTime.timescale;

    //if we're more than a second into the song, just skip back to the beginning of the current track
    if(currentTime > 1.0)
    {
        [self.audioPlayer seekToTime: CMTimeMake(0, 1)];
    }
    else
    {
        //otherwise, adjust self.currentTrack to be the previous object in self.currentPlaylist
        //start the new track in a manner similar to that used in -playMusic
    }
}

//Set volume mid-song - more or less the same process we used in -playMusic
- (void) setMusicVolume:(float)vol
{
    AVPlayerItem* item = self.audioPlayer.currentItem;

    AVAssetTrack* track = [[item.asset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0];

    AVMutableAudioMixInputParameters* audioParams = [AVMutableAudioMixInputParameters audioMixInputParameters];
    [audioParams setVolume: vol atTime:kCMTimeZero];
    [audioParams setTrackID: track.trackID];

    AVMutableAudioMix* audioMix = [AVMutableAudioMix audioMix];
    [audioMix setInputParameters: [NSArray arrayWithObject: audioParams]];

    [item setAudioMix:audioMix];
}

@end 
```

请原谅您看到的任何错误 - 请在评论中告诉我，我会修复它们。否则，如果有人遇到与我相同的挑战，我希望这会有所帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-20T17:54:51.003

实际上，我找到了一种非常简单的方法，方法[*是从 MPMusicPlayer 加载 iPod URL*](https://stackoverflow.com/questions/2760230/can-i-get-an-audio-session-apply-audio-units-to-playback-from-mpmusicplayercon/6484190#6484190)，然后通过 AVAudioPlayer 进行播放。

```
// Get-da iTunes player thing
MPMusicPlayerController* iTunes = [MPMusicPlayerController iPodMusicPlayer]; 

// whazzong
MPMediaItem *currentSong = [iTunes nowPlayingItem];

// whazzurl
NSURL *currentSongURL = [currentSong valueForProperty:MPMediaItemPropertyAssetURL];

info( "AVAudioPlayer playing %s", [currentSongURL.absoluteString UTF8String] ) ;

// mamme AVAudioPlayer
NSError *err;
avAudioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:currentSongURL error:&err] ;
if( err!=nil )
{
  error( "AVAudioPlayer couldn't load %s", [currentSongURL.absoluteString UTF8String] ) ;
}
avAudioPlayer.numberOfLoops = -1; //infinite

// Play that t
[avAudioPlayer prepareToPlay] ;
[avAudioPlayer play];

[avAudioPlayer setVolume:0.5]; // set the AVAUDIO PLAYER's volume to only 50%. This
// does NOT affect system volume. You can adjust this music volume anywhere else too. 
```

# ruby-on-rails - 如何将静态页面加载到第二个地址？

> ID：14881459
> 
> 赞同：0
> 
> 时间：2013-02-14T18:20:38.130
> 
> 标签：ruby-on-rails

我有两个生产轨道应用程序`http://www.firstapp.com`和`https://www.secondapp.com`

我想创建一个新的静态页面，`https://www.secondapp.com/static_pages/about`并且我希望它的内容反映已经存在的内容`http://www.firstapp.com/static_pages/about`。

我有一个简单的方法可以做到这一点吗？我不想重建我已经在`firstapp`. 另外，我希望能够`secondapp`通过在`firstapp`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T18:34:51.623

如果您希望整个静态页面相同，那么这不是 rails 问题，这就是重定向的用途。在您的网络服务器配置中设置一个规则以 `https://www.secondapp.com/static_pages/about`指向`http://www.firstapp.com/static_pages/about`

# android - Android 计时器泄漏

> ID：14881462
> 
> 赞同：3
> 
> 时间：2013-02-14T18:20:57.933
> 
> 标签：android

在我的应用程序中，我试图让粒子从可能的多个触摸位置发出。

我有一个用于存储点和相关计时器的类：

```
private static class Touch
{
    public Timer timer = new Timer();
    public vec position = new vec();
} 
```

在 onTouchEvent 中，在 MotionEvent.ACTION_POINTER_DOWN 的情况下，我会实例化一个新的 Touch：

```
Touch t = new Touch();
t.position = new vec(event.getX(id), event.getY(id));
t.timer.scheduleAtFixedRate(new TimeredTouchTask(t.position, id), 0, SHOOTING_INTERVAL); 
```

并将其存储在地图中，使用触摸 ID 作为键。

如果 MotionEvent.ACTION_POINTER_UP 被触发，我会通过在计时器上调用 cancel() 并将其从地图中移除来移除触摸。

最后，如果事件是 MotionEvent.ACTION_MOVE 类型，我只需迭代地图内的所有 Touch 实例并更新矢量坐标。

这可行，但有时定时器不会被正确删除，有时它们会保持活动状态，有时它们会继续实际拍摄粒子，即使我停止触摸屏幕也是如此。

我怎样才能使这段代码更健壮，以便它始终正确运行？

edit1：ACTION_POINTER_UP 的代码

我称这个方法

```
private void removeTouch(int id)
{
    Touch t = _touch.get(id);

    if(t != null)
    {
        if(t.timer != null)
        {
            t.timer.cancel();
            t.timer = null;
        }

        t = null;
        _touch.remove(id);
    }
} 
```

编辑2：完整列表[链接](http://pastebin.com/yjd1WwhH)

通过检查一些日志，我发现例如：触摸手指#1 触摸手指#2 触摸手指#3 释放手指#3 释放手指#2 释放手指#1

没关系，但这样做：

触摸手指#1 触摸手指#2 触摸手指#3 释放手指#1 释放手指#2 释放手指#3

泄漏最后一个计时器。我想我肯定会弄乱 id 和索引。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T21:08:26.997

从您对`getX(id)`, 等的使用来看，我猜`id`是指针*index*，而不是指针*id*。指针索引不能保证在触摸事件中保持持久，因此当您将它用于以后的事件时，您可能找不到相同的计时器。

您应该使用指针 id 来跟踪哪个是哪个。[getPointerId()](http://developer.android.com/reference/android/view/MotionEvent.html#getPointerId%28int%29)将为您提供每个索引的信息。

如果您还没有阅读，我强烈建议您阅读Android 博客上的[Make Sense of Multitouch 。](http://android-developers.blogspot.com/2010/06/making-sense-of-multitouch.html)

# database-design - 基本数据库设计：保留“历史”表

> ID：14881466
> 
> 赞同：0
> 
> 时间：2013-02-14T18:21:16.620
> 
> 标签：database-design

我到达之前的一位开发人员创建了一个数据库表，其中保存了来自某个 Web 应用程序的搜索查询的历史列表，随后在加载页面时重新加载该用户最后保存的搜索。

问题是，这个搜索功能的使用量很大，每次进行搜索时都会将新行写入表中，有效地无限期地写入（似乎旧的搜索也没有被清理）。到目前为止，该表中有超过 300k 个条目并且还在增加。

我的问题是，这是一个安全的设计吗？什么是更好的选择？我担心存在这样的东西的限制、性能和必要性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T18:44:00.907

> 这是一个安全的设计吗？

当然。由于该表是目前构成的，您可以进行查询并返回 10 个最流行的搜索，以及过去 6 个月中最流行的 10 个搜索。

> 什么是更好的选择？

如果要消除重复项，可以在搜索查询文本上放置唯一索引。

> 我担心存在这样的东西的限制、性能和必要性。

只有您的组织才能确定必要性。就限制和性能而言，我曾使用过每天增加 200 万行的数据仓库。你没有说你关心的是哪个关系数据库，但是今天存在的大多数可以处理具有数万亿行的表。

> 你能解释一下为什么你认为在“无限”增长的表上不进行清理是一个很好的设计吗？

我们将假设无限增长的表存在组织原因。举一个例子，我在一个系统上工作，每一个查询、每一个添加、更新或删除都必须被记录下来。我们必须永远保持这个数据日志在线。这是法律要求的。

我们只是确保历史文件有足够的磁盘空间。我们从来没有想过一个表可以容纳的最大行数。关系数据库是 DB2。

# python - 在 PostgreSQL、Python、Jinja2 上编码

> ID：14881467
> 
> 赞同：4
> 
> 时间：2013-02-14T18:21:16.927
> 
> 标签：python, encoding, utf-8, flask, jinja2

我在我的应用程序中遇到编码问题，并且在网络上的任何地方都没有找到解决方案。

这是场景：

*   带有 UTF-8 编码的 PostgreSQL ( `CREATE DATABASE xxxx WITH ENCODING 'UTF8'`)

*   Python 逻辑也使用 UTF-8 编码 ( `# -*- coding: utf-8 -*-`)

*   Jinja2 显示我的 HTML 页面。Python 和 Jinja2 用于 Flask，这是我正在使用的微框架。

我的页面标题有：`<meta http-equiv="content-type" content="text/html; charset=utf-8"/>`

好吧，使用 psycopg2 做一个简单的查询并在 Jinja2 上打印出来，这就是我得到的：

```
{% for company in list %}
    <li>
        {{ company }}
    </li>
{% endfor %} 
```

(1, 'Casa das M\xc3\xa1quinas', 'R. Tr\xc3\xaas, Mineiros - Goi\xc3\xa1s')

(2, 'Ar do Z\xc3\xa9', 'Av. S\xc3\xa9tima, Mineiros - Goi\xc3\xa1s')

如果我尝试更深入地了解这些领域：

```
{% for company in list %}
    <li>
        {% for field in company %}
            <li>
                {{ field }}
            </li>
        {% endfor %}
    </li>
 {% endfor %} 
```

我收到以下错误：UnicodeDecodeError: 'ascii' codec can't decode byte 0xc3 in position 10: ordinal not in range(128)

但是，如果我在将列表字段发送到 Jinja2 之前打印它们，我会得到预期的结果（这也是在 postgresql 中呈现的方式）：

1 Casa das Máquinas R. Três, 米内罗斯 - 戈亚斯

2 Ar do Zé Av. Sétima，米内罗斯 - 戈亚斯

当我收到错误消息时，Flask 提供了一个“调试”选项。这是代码在转义返回标记（unicode(s)

我也可以这样做：

```
[console ready]

>>> print s
Casa das Máquinas

>>> s
'Casa das M\xc3\xa1quinas'

>>> unicode(s)
UnicodeDecodeError: 'ascii' codec can't decode byte 0xc3 in position 10: ordinal not in range(128)

>>> s.decode('utf-8')
u'Casa das M\xe1quinas'

>>> s.encode('utf-8')
UnicodeDecodeError: 'ascii' codec can't decode byte 0xc3 in position 10: ordinal not in range(128)

>>> s.decode('utf-8').encode('utf-8')
'Casa das M\xc3\xa1quinas'

>>> print s.decode('utf-8').encode('utf-8')
Casa das Máquinas

>>> print s.decode('utf-8')
Casa das Máquinas 
```

在将其发送到 Jinja2 之前，我已经尝试在 python 代码中破坏列表、解码、编码。同样的错误。

Sooo，不知道我能在这里做什么。=(

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-15T02:25:24.223

问题是[psycopg2在 Python 2 中默认返回*字节字符串*](http://initd.org/psycopg/docs/usage.html#unicode-handling)：

> 从数据库读取数据时，在 Python 2 中，返回的字符串通常是`str`在数据库客户端编码中编码的 8 位对象

所以你可以：

*   手动将所有数据解码为 UTF-8：

    ```
    # Decode the byte strings into Unicode objects using
    # the encoding you know that your database is using.
    companies = [company.decode("utf-8") for company in companies]
    return render_template("companies.html", companies=companies) 
    ```

*或者*

*   首次导入 psycopg2 时根据手册同一部分中的注释设置编码器：

    > **注意**在 Python 2 中，如果您想统一接收所有 Unicode 格式的数据库输入，您可以在导入 Psycopg 后立即全局注册相关的类型转换：

    ```
    import psycopg2
    import psycopg2.extensions
    psycopg2.extensions.register_type(psycopg2.extensions.UNICODE)
    psycopg2.extensions.register_type(psycopg2.extensions.UNICODEARRAY) 
    ```

    > 然后忘记这个故事。

# ruby - Ubuntu 中的 Ruby 解释器问题

> ID：14881469
> 
> 赞同：0
> 
> 时间：2013-02-14T18:21:22.653
> 
> 标签：ruby, ubuntu, ruby-1.9.3

运行正确：

```
C:\>ruby -00 -e 'a= gets; puts a ;puts "here is: #{$/.inspect}"'
Hi #[pressed ENTER]
[pressed ENTER]
Hi # <~~ here Hi came as the output, as expected.

here is: "\n\n"  #<~~ here Hi came as the output, as expected.

C:\> 
```

但是当我的 Ubuntu 机器上发生这种情况时，我感到很惊讶：

```
@ubuntu:~$ ruby -00 -e 'a= gets; puts a ;puts "here is: #{$/.inspect}"'
> hi # [pressed ENTER]
> [pressed ENTER]
> hi #[pressed ENTER]
> ^C
@ubuntu:~$ 
```

有什么建议可以让它在 Ubuntu 中运行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T18:27:42.193

在 Ubuntu 中对我来说非常好用：

```
% ruby -00 -e 'a = gets; puts a; puts "here is #{$/.inspect}"'                                                                        
hi

hi

here is "\n\n" 
```

看起来您只是缺少命令中的最后一个单引号。

# java - FEST：如何正确使用 NoExitSecurityManager？

> ID：14881473
> 
> 赞同：1
> 
> 时间：2013-02-14T18:21:40.343
> 
> 标签：java, swing, unit-testing, user-interface, fest

我开始使用[FEST](http://fest.easytesting.org/)来帮助我在我的 Java Swing GUI 上执行单元测试。

目前，我设法浏览了文档（大部分已弃用）并通过查看 Javadoc 和代码来帮助我。

现在我在使用 NoExitSecurityManager 时遇到了一个问题。[文档](http://docs.codehaus.org/display/FEST/Handling+System.exit)已经过时了，但我们可以理解它的主要内容。

我只是尝试测试我的“退出”菜单项是否在我的 GUI 中运行良好。因此，我需要阻止 System.exit(0) 并将程序的退出状态映射到 JUnit 测试。

这是我用来执行测试的简化代码（测试的类是`GraphicalUserInterface`）。

```
import org.junit.Test;
import org.junit.AfterClass;
import org.junit.BeforeClass;

import org.fest.swing.annotation.RunsInEDT;
import org.fest.swing.edt.GuiQuery;
import org.fest.swing.edt.GuiActionRunner;
import org.fest.swing.fixture.FrameFixture;
import org.fest.swing.junit.testcase.FestSwingJUnitTestCase;
import org.fest.swing.security.NoExitSecurityManagerInstaller;

public class GraphicalUserInterfaceTest extends FestSwingJUnitTestCase {

    private static FrameFixture gui;
    private static NoExitSecurityManagerInstaller noExitSecurityManagerInstaller;

    @BeforeClass
    public static void setUpBeforeClass() throws Exception { 
             NoExitSecurityManagerInstaller.installNoExitSecurityManager(new ExpectExitSuccess());
    }

    @AfterClass
    public static void tearDownAfterClass() throws Exception { 
             noExitSecurityManagerInstaller.uninstall();
    }

    @Override
    protected void onSetUp() {
            gui = new FrameFixture(robot(), createNewGUI());
            gui.show();
    }

    @RunsInEDT
    private GraphicalUserInterface createNewGUI() {
             return GuiActionRunner.execute(new GuiQuery<GraphicalUserInterface>() {
                    protected GraphicalUserInterface executeInEDT() {
                       return new GraphicalUserInterface();
                    }
         });
    }

    @Test
    public final void testFileMenuQuitMenuItem() {
           gui.menuItemWithPath("File", "Quit").click();
    }

} 
```

[ExitCallHook](http://fest.easytesting.org/swing/apidocs/org/fest/swing/security/ExitCallHook.html)是这样编码的（你可以很容易地猜到另一个）。

```
import static org.junit.Assert.assertTrue;

import org.fest.swing.security.ExitCallHook;

public final class ExpectExitSuccess implements ExitCallHook {

    @Override
    public void exitCalled(int status) {
           assertTrue(status == 0);
    }
} 
```

所有的测试都执行得很好，除了最后我得到一个 java.lang.NullPointerException 之外，一切似乎都很好。

所以，我想知道我做错了什么（或者我可以改进什么以在测试结束时不得到这个空指针异常）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:32:10.147

我在代码中找到了解决方案。事实上，正确的做法如下：

```
 @Test
 public final void testFileMenuQuitMenuItem() {
     NoExitSecurityManagerInstaller noExitSecurityManagerInstaller = 
        NoExitSecurityManagerInstaller.installNoExitSecurityManager(new ExpectExitSuccess());

     gui.menuItemWithPath("File", "Quit").click();

     noExitSecurityManagerInstaller.uninstall();
 } 
```

这样可以防止使用 NoExitSecurityManager 污染每个测试。

# pdo - PHP PDO 将具有多条记录的数据库表动态更新为特定用户 ID

> ID：14881478
> 
> 赞同：0
> 
> 时间：2013-02-14T18:21:49.487
> 
> 标签：pdo

/* 新手需要帮助；我正在创建一个类来在指示时自动更新我的应用程序数据库记录，但是我一直在下面收到此消息，而且对于它，我只是没有看到我做错了什么。有人可以帮我看看我的代码吗？谢谢你。

警告：PDOStatement::bindParam() 需要至少 2 个参数，1 个在……..on line 331; “else if(is_string($val)){”所在的位置。

*/

```
// vars given
     // DBDriver: MySQL
$myTable = 'seeYou';
$loginDate = NULL;
$ip = $_SERVER['REMOTE_ADDR'];  
$date = @date('m/d/Y \a\\t h:i a');
$_id =1;

// data array 
$idata = array("last_logged_in"=>$loginDate,
             "login_date"=>$date,
             "ip_addr"=>$ip
             );

class name
{

    ///------------ other methods here---------///

/**
 *--------------------------------------------
 *  Method - PDO: SET FIELD VALUE PLACEHOLDER   
 *--------------------------------------------
 * @return fields with prefix as placeholder 
 */
protected function set_fieldValPlaceHolders(array $data) 
{
    $set = '';
    foreach($data as $field => $value)
    {
        $set .= $field .'= :'.$field . ','; 
    }

    // remove the last comma
    $set = substr($set, 0, -1);
    return $set;
}

public function save($data=NULL, $_id = NULL, $rows= NULL, $dbTable= NULL)
{
    //----------------- some other codes goes here ----------------//
    $id = (int)$_id;

        // update row with a specific id
        if (isset($id) !== NULL && $rows === NULL)
        {
            $set = $this->set_fieldValPlaceHolders($data);

            $sql = "UPDATE {$dbTable} SET {$set} WHERE user_id = :uid"; 

            try
            {
                // Build the database statement
                $_stmt = $this->_dbConn->prepare($sql);
                $_stmt->bindValue(':uid',$id, PDO::PARAM_INT);

                foreach ($data as $field => $val) 
                {
                    if(is_int($val)){  
                        $_stmt->bindValue(':'.$field.'\', '.$val.', PDO::PARAM_INT');
                    }
                    else if(is_string($val)){
                        $_stmt->bindValue(':'.$field.'\', '.$val.', PDO::PARAM_STR');
                    }
                    else if(is_bool($val)){
                        $_stmt->bindValue(':'.$field.'\', '.$val.', PDO::PARAM_BOOL');
                    }
                    else if(is_null($val)){
                        $_stmt->bindValue(':'.$field.'\', '.$val="null".', PDO::PARAM_NULL');
                    }
                    else {
                        $_stmt->bindValue(':'.$field.'\', '.$val.', NULL');
                    }

                    $result = $_stmt->execute();
                    $num = $_stmt->rowCount();
                }

            }
            catch(PDOException $e)
            {
                die('Error!  The process failed while updating your record. <br /> Line #'.__LINE__ .' '.$e);
            }

            if ($result === true)
            {
                return true; 
            }               
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T18:31:07.987

检查您的 bindValue 调用：您提供 1 个参数（一个长字符串）。它至少需要两个。检查所有'

例如，它应该是：

```
$_stmt->bindValue(':'.$field, $val, PDO::PARAM_INT); 
```

# python - 是否允许 Python 优化函数定义以消除未使用的代码？

> ID：14881481
> 
> 赞同：1
> 
> 时间：2013-02-14T18:22:04.067
> 
> 标签：python, optimization, unused-variables

如果我定义了这样的函数：

```
def ccid_year(seq):
  year, prefix, index, suffix = seq
  return year 
```

是否允许 Python 对其进行有效优化：

```
def ccid_year(seq):
  return seq[0] 
```

我更喜欢编写第一个函数，因为它记录了传入数据的格式，但希望 Python 生成的代码与第二个定义一样有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T18:33:37.070

我稍后会从表面上回答这个问题，但首先：如有疑问，请对其进行基准测试！但首先，请回想一下，大部分时间都花在了一小部分代码上（即，大多数代码与性能无关！），在 CPython 中，函数调用开销通常会导致效率低下。更不用说大规模算法效率低下（又名愚蠢的代码）使微优化问题相形见绌。

所以要么根本不用担心这个，或者*如果*你有理由担心它，第一个基准替代品，第二个不要把它放在一个函数中。请注意，“担心的原因”必须与担心所花费的时间以及手动优化的维护负担（如果有的话）进行权衡。

您最喜欢使用的参考实现 CPython在此级别的优化方面*非常保守。*虽然有一个窥孔优化器在字节码上运行，但它的规模有限。更一般地说，您不能期望通过单个语句进行很多优化。静态优化 Python 代码的问题在于，即使是看起来最无辜的程序框架也有十亿种方式可以调用任意代码，这可能会做任何事情，所以你不能忽略这些调用。当我们这样做时，您提出的优化是无效的（从某种意义上说，程序没有相同的行为）如果`seq`是错误的类型（不是序列，或非常奇怪的序列）或长度（不完全是三个项目长）！任何声称实现 Python 的程序都必须保持这种差异，因此它不会按照您的字面意思进行转换。我认为这只是一个临时的说明，但它确实表明您严重低估了 Python 的复杂性（实现和优化）。我和其他人之前已经详细地写过这个，所以我会在这篇文章变得更大之前停下来。

另一方面，如果这个函数确实是从一个热循环中调用的，PyPy 可能会优化这个*和一百万个你甚至没有想到的东西*，同时将它编译成一个迭代速度比任何 Python 循环都快的机器代码循环可以在 CPython 上进行迭代。它仍将包含一些检查以跳出循环并在必要时采取适当的措施（例如引发异常），但如果不触发它们也将非常有效。

我对 IronPython 和 Jython 以及其他实现了解不多，但如果它们缺乏一致的比 CPython 快几倍的基准测试结果是任何指标，那么它们不会执行显着的优化。虽然 VM IronPython 和 Jython 包含 JIT 编译器（与 PyPy 不同，但不完全不同），但这些 JIT 编译器是为非常不同的语言构建的，如果他们能够查看 IronPython/Jython 的混乱代码，我会感到*非常*惊讶必须执行以实现 Python 语义并对其执行此类优化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T18:37:32.927

这两个功能不等价：

```
def ccid_year_1(seq):
  year, prefix, index, suffix = seq
  return year

def ccid_year_2(seq):
  return seq[0]

arg = {1:'a', 2:'b', 0:'c', 3:'d'}
print ccid_year_1(arg)
print ccid_year_2(arg) 
```

第一次调用打印`0`，第二次打印`c`。

# git - Git：将包含先前精心挑选的提交的分支与 master 同步

> ID：14881484
> 
> 赞同：3
> 
> 时间：2013-02-14T18:22:11.103
> 
> 标签：git, workflow, git-branch

在 git 中，假设您想保留部署分支的历史记录，当分支已经包含来自 master 的精选提交时，使部署分支与 master 保持最新的最佳/最简单的方法是什么。

场景：

1.  部署分支在过去的某个时间由 master 创建。
2.  额外的提交从 master 中挑选出来进行部署，省略了一些其他的提交。
3.  部署代码部署到生产环境。
4.  现在，deploy 需要与 master 完全同步以进行下一次部署。

问题是，如何轻松地执行第 4 步（避免任何合并冲突，因为没有提交任何独特的部署，只有精心挑选的更改）而不更改部署中的任何历史记录（我的理解是此时进行变基可能会失败部署中的历史记录，或者使获取已部署的确切代码变得更加困难，但我很可能在这方面弄错了）。

执行`git merge master`会产生许多冲突，最好避免这些冲突，因为所需要的只是部署负责人直接类似于 master 负责人（部署不包含任何独特的更改）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T20:11:03.840

用迄今为止我能找到的最佳方法回答我自己的问题。以下命令会将 master 合并到您的分支中，同时解决所有有利于 master 的冲突（从您的分支结帐运行）：

```
git merge -s recursive -X theirs origin/master 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T18:34:17.313

以我的经验，只是合并应该可以正常工作。Git 检测到已经应用了精心挑选的提交，并在合并期间“忽略”它们。您是否尝试合并？即使它失败了，您也可以使用 git 轻松恢复并尝试不同的方法（也许是另一种合并策略，但我还没有这方面的经验）。

如果你想变基并且仍然有部署的代码，只需在你想保留的代码中添加一个标签。变基将重写您的提交历史，但标签仍将指向变基之前的代码（提交）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T19:26:28.350

我认为这不是您所期望的答案，但您可能应该稍微完善您的分支策略，并在主题分支上更加细化。这样，您可以合并主题分支，而不是从 master 中挑选。因此，您的主分支合并了所有主题分支，而开发分支合并了一些主题分支。然后，您最终在开发中合并 master 以使部署分支保持最新。这并不能保证您会避免冲突，但它更简洁，并且在规范情况下，您需要解决的冲突更少。

当你挑选樱桃时，git 失去了识别樱桃挑选的提交和樱桃挑选的原始提交是相同的能力。这就是冲突的来源。

# c# - 存储和回放 XML 节点的最佳方式是什么？

> ID：14881494
> 
> 赞同：1
> 
> 时间：2013-02-14T18:22:54.267
> 
> 标签：c#, .net, xml, memory-management, xmlreader

我有一些看起来像这样的 XML（高度简化）：

```
<?xml version="1.0"?>
<example>
    <shortcuts>
        <shortcut name="shortcut1">
            <property name="name1" value="value1" />
            <property name="name2" value="value2" />
        </shortcut>
    </shortcuts>
    <data>
        <datum name="datum1">
            <property name="name1" value="value1" />
            <property name="name2" value="value2" />    
        </datum>
        <datum name="datum2">
            <shortcutRef name="shortcut1" />
        </datum>
        <datum name="datum3">
            <shortcutRef name="shortcut1" />
            <property name="name3" value="value3" />    
        </datum>
    </data>
</example> 
```

如您所见，它的结构使得可以定义由一个或多个属性组成的“快捷方式”。然后可以使用属性或一个或多个快捷方式或两者的混合来明确描述数据（并且没有特定的顺序）。

我想用 XmlReader 解析它（XmlDocument 会更容易，但在这里不起作用，因为 XML 文件太大）。我认为这样做的一个好方法是将每个快捷方式的 XML 子树存储在由唯一的快捷方式名称键入的字典中。然后，当它们被引用时，我可以通读该子树 XmlReader 而不是主树。但是，子树 XmlReader 仍必须链接到主 XmlReader，因为输出的 XML 不是我所期望的。这是我的代码：

```
using(XmlReader xml = XmlReader.Create("example.xml"))
{
    Dictionary<string, XmlReader> shortcuts = new Dictionary<string, XmlReader>();
    xml.ReadToDescendant("shortcuts");
    xml.ReadToDescendant("shortcut");
    do
    {
        shortcuts.Add(xml.GetAttribute("name"), xml.ReadSubtree());
    } while(xml.ReadToNextSibling("shortcut"));

    xml.ReadToFollowing("data");
    while(xml.ReadToFollowing("datum"))
    {
        Console.WriteLine(xml.GetAttribute("name"));

        XmlReader datum = xml.ReadSubtree();
        while(datum.Read())
        {
            if(datum.Name == "property")
            {
                Console.WriteLine(datum.GetAttribute("name") + ':' + datum.GetAttribute("value"));
            }
            else if(datum.Name == "shortcutRef")
            {
                XmlReader shortcut_ref = shortcuts[datum.GetAttribute("name")];
                while(shortcut_ref.ReadToFollowing("property"))
                {
                    Console.WriteLine(shortcut_ref.GetAttribute("name") + ':' + shortcut_ref.GetAttribute("value"));
                }
            }
        }
    }
} 
```

解析以这种方式构造的 XML 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T20:04:23.110

您可以按照 Mathieson 的建议使用 LinqToXml。这是使用查找的示例。

```
XElement root = XElement.Load(file); // or .Parse(string)
var shortcuts = root.Descendants("shortcut").SelectMany(s =>
    s.Elements("property").ToLookup(
        k => k.Parent.Attribute("name").Value,
        v => v.Select(p => new
        {
            Name = p.Attribute("name").Value,
            Value = p.Attribute("value").Value
        }))); 
```

这将产生一个类似字典的结构，但查找具有多个键值。因此，您将通过快捷方式名称查找所有属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T07:08:41.877

尚不完全清楚您要做什么-但是由于您使用“回放”一词，所以我猜您不需要将 XML 节点（数据/数据）中的所有值存储在内存中（您可以丢弃它们使用后），但是您需要缓存快捷方式属性，以便在引用它们时可以重新遍历它们……您刚刚拥有它，但不是存储 XML 节点，而是将对象存储在字典中。

```
public class Property
{
    public string Name { get; set; }
    public string Value { get; set; }
}

public class Shortcut
{
    public List<Property> Properties = new List<Property>();
}

class Program
{
    static void Main(string[] args)
    {
        FileStream fs = new FileStream(@"c:\temp\example.xml", FileMode.Open, FileAccess.Read);
        XmlTextReader reader = new XmlTextReader(fs);

        Dictionary<string, Shortcut> ShortcutDictionary = new Dictionary<string, Shortcut>();

        while (reader.Read())
        {
            if (reader.NodeType == XmlNodeType.Element && reader.LocalName == "shortcuts")
            {
                while (reader.Read())
                {
                    if (reader.NodeType == XmlNodeType.Element && reader.LocalName == "shortcut")
                    {
                        Shortcut shortcut = new Shortcut();
                        ShortcutDictionary.Add(reader.GetAttribute("name"), shortcut);
                        while (reader.Read())
                        {
                            if (reader.NodeType == XmlNodeType.Element && reader.LocalName == "property")
                                shortcut.Properties.Add(new Property() { Name = reader.GetAttribute("name"), Value = reader.GetAttribute("value") });
                            else if (reader.NodeType == XmlNodeType.EndElement && reader.LocalName == "shortcut")
                                break;
                        }
                    }
                    else if (reader.NodeType == XmlNodeType.EndElement && reader.LocalName == "shortcuts")
                        break;
                }
            }

            if (reader.NodeType == XmlNodeType.Element && reader.LocalName == "data")
            {
                while (reader.Read())
                {
                    if (reader.NodeType == XmlNodeType.Element && reader.LocalName == "datum")
                    {
                        while (reader.Read())
                        {
                            if (reader.NodeType == XmlNodeType.Element && reader.LocalName == "property")
                            {
                                Console.WriteLine(reader.GetAttribute("name") + ':' + reader.GetAttribute("value"));
                            }
                            else if (reader.NodeType == XmlNodeType.Element && reader.LocalName == "shortcutRef")
                            {
                                foreach (Property property in ShortcutDictionary[reader.GetAttribute("name")].Properties)
                                    Console.WriteLine(property.Name + ':' + property.Value);
                            }
                            else if (reader.NodeType == XmlNodeType.EndElement && reader.LocalName == "datum")
                                break;
                        }
                    }
                    else if (reader.NodeType == XmlNodeType.EndElement && reader.LocalName == "data")
                        break;
                }
            }
        }

        reader.Close();
        fs.Close();
    }
} 
```

否则，如果不是这样，那么您正在尝试以随机访问方式访问串行数据。您最好的选择是将数据转换/保存到数据库中。像 SQLite 这样的东西会做到这一点。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-18T14:37:08.747

我会使用xml序列化。只需创建一个具有所需结构的 POCO 类（在这种情况下，是一个带有“数据”和“快捷方式”列表的“示例”类），注释一些成员，以便它们可以呈现为属性并调用 xml 序列化。看一下这个：

如何创建类： http: [//www.codeproject.com/Articles/483055/XML-Serialization-and-Deserialization-Part-1](http://www.codeproject.com/Articles/483055/XML-Serialization-and-Deserialization-Part-1)

如何序列化和反序列化：http: [//www.codeproject.com/Articles/347758/XML-Serialization-and-Deserialization](http://www.codeproject.com/Articles/347758/XML-Serialization-and-Deserialization)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-19T07:14:21.487

通常解析 XML 文件可以通过两种主要的理智方式完成：
1\. **DOM**（文档对象模型）
2\. **SAX**（XML 的简单 API）

**差异**：
DOM 解析器从输入文档在内存中创建树结构，然后等待请求从客户。但是 SAX 解析器不会创建任何内部结构。相反，它将输入文档的组件的出现作为事件，并告诉客户端它在读取输入文档时读取了什么。
DOM 解析器始终为客户端应用程序提供整个文档，无论客户端实际需要多少，但 SAX 解析器在任何给定时间始终只为客户端应用程序提供文档片段。
使用 DOM 解析器，客户端应用程序中的方法调用必须是显式的并形成一种链。但是对于 SAX，某些特定的方法（通常被 cient 覆盖）将在某些特定事件发生时以一种称为“回调”的方式自动（隐式）调用。
这些方法不必由客户端显式调用，尽管我们可以显式调用它们。

***DOM***
1\. 节点树
2\. 内存：占用更多内存，优先用于小型 XML 文档
3\. 运行时速度较慢
4\. 存储为对象
5\. 易于编程
6\. 易于导航
***SAX***
1\. 事件序列
2\. 不使用大型文档首选的任何内存
3\. 运行时更快
4\. 将创建对象
5\. 需要编写代码来创建对象
6\. 向后导航是不可能的，因为它顺序处理文档

**实现 .Net 框架**：（以
*`XmlReader`*某种方式）并且*`XmlDocuments`*基于 DOM 模型、[MSDN 参考](http://msdn.microsoft.com/en-us/library/aa478996.aspx)构建。
我还没有找到 SAX 的官方 .Net 框架 API，但您可以使用[Towards a Declarative SAX Framework](http://www.codeproject.com/Articles/6976/Towards-a-Declarative-SAX-Framework-Part-1-A-Simpl)或[Sax for .Net](http://saxdotnet.sourceforge.net/)

# c# - 跨多个表使用实体框架

> ID：14881497
> 
> 赞同：0
> 
> 时间：2013-02-14T18:23:07.563
> 
> 标签：c#, sql-server, entity-framework-5

我正在尝试一个 linq 语句，其中有以下四个表

```
table: plan
id
planname

table: patient 
Fields
id, firstname, lastname, site_id

Table: site
id,
sitename

table: plan_patient
id
site_id
patient_id

table: plan_Exclusions
id
patient_id
plan_id
site_id

table: plan_schedule
id
patient_id
plan_id
site_id 
```

我想撤回所有未分配到计划或从计划中排除的患者。

确定患者是否未分配到计划的决定因素是他们在排除表中，他们在表中没有时间表`plan_schedule`并且他们不存在于`plan_patient`表中。

这在存储过程中很容易做到，但我正在尝试构建它，这样我就不需要执行存储过程来拉回结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T19:53:44.827

这就是我为一个复杂的情况接触多个表的方式

```
var MyResults =
   from hc in context.hcTypes
   from hga in context.hgaToGmuTypes
   from hq in context.hqToQuota
   from qt in context.Types
   from dd in context.ddDraws
   from dh in context.dhDraws
   where hc.Year == dtYear
        && hc.Year == hga.Year
       && hc.code == hga.code
       && hc.Year == hq.Year
       && hc.code == hq.code
       && hq.Id == qt.Id
       && qt.PrefernceCode == "Y"
       && hga.Year == dtYear
       && hga.Code == "Z"
       && hc.code == dd.code
       && dd.Code == dh.Code
       && dh.Year == dtYear
       && dh.Code == "Z" 
       && dh.Left == "P"
select new MyClass { Id = hc.Id, Huntcode = hc.Huntcode, GMU = hga.GMUTypeCode }
 ; 
```

在你的情况下，它会是这样的：

```
var YourResults = 
    from pl in plan 
    from pa in patient 
    from s = site 
    from plan_patient 
    from plan_Exclusions 

    with the Where statements linking the data 
    and the Select pulling what you want 
```

# javascript - 下载图像时如何删除显示的问号？

> ID：14881498
> 
> 赞同：0
> 
> 时间：2013-02-14T18:23:09.690
> 
> 标签：javascript, image

当用户单击按钮时，图像被下载。

在下载它们时，Safari 会显示一个问号。

我怎样才能摆脱这个？

我考虑了 onerror 事件侦听器，但这不是错误。下载图像只需要时间。并不是图像不在指定的 src 中。

在 ajax 调用之后，图像标签被添加到页面的 dom 中。当图像元素等待访问实际图像时，它会显示这个烦人的问号。

我怎样才能摆脱它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T18:25:05.050

隐藏包装元素，直到图像完全加载。您可以将 onload 事件挂钩到图像，然后让它在完成时显示包装元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T18:24:54.300

在显示之前预加载图像。

或者，在加载图像时，有一个作为占位符的微调器的图像。

或者，等待显示图像，直到它被加载。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T18:25:29.527

您可以等待图像本身加载。在设置属性之前创建图像元素并添加`onload`回调。`src`在回调中，您可以将图像添加到 dom。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T18:27:55.150

从您的 HTML 源代码中删除`<img>`-tags。将带有 Javascript 的图像作为`Image()`对象加载。将 onload 处理程序添加到图像。让这些加载图像创建`<img>`标签并将它们插入到 DOM 中。

```
Image image = new Image();
image.onload = function() {
     // insert image into your DOM 
}
image.src = 'yourImage.jpg'; 
```

# unit-testing - 使用最小起订量验证只有这两个方法调用被调用，没有别的

> ID：14881500
> 
> 赞同：1
> 
> 时间：2013-02-14T18:23:12.570
> 
> 标签：unit-testing, mocking, tdd, moq

我正在使用 Moq 进行验证和单元测试。我想验证是否使用参数 1 和参数 5 调用了方法“添加”，并且**没有调用**除这些之外的任何其他值。

是否可以创建验证，类似于下面的代码？（注意这不是实际代码！）

```
mock.Verify(x=>x.Add(1), Times.Once());
mock.Verify(x=>x.Add(5), Times.Once());
mock.Verify(x=>x.Add(It.IsAny<int>()), Times.Never()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T18:36:50.943

您可以试试这个，将 lambda 表达式传递给第三次验证以排除任何不同于 1 和 5 的值。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using Moq;

namespace Tests.x21
{
    public interface IMyInterface
    {
        void Add(int num);
    }

    public class Executor
    {
        private IMyInterface _dep;

        public Executor(IMyInterface dep)
        {
            _dep = dep;
        }

        public void Execute()
        {
            _dep.Add(1);
            _dep.Add(5);
            _dep.Add(4);    // comment to make the test work
        }
    }

    [TestClass]
    public class UnitTest21
    {
        [TestMethod]
        public void TestMethod1()
        {
            var mock = new Mock<IMyInterface>();
            var executor = new Executor(mock.Object);
            executor.Execute();
            mock.Verify(x => x.Add(1), Times.Once());
            mock.Verify(x => x.Add(5), Times.Once());
            mock.Verify(m => m.Add(It.Is<int>(num => num != 1 && num != 5)), Times.Never());
        }
    }
} 
```

# c# - 如何从 asp.net 获取数据到 android？

> ID：14881503
> 
> 赞同：1
> 
> 时间：2013-02-14T18:23:29.137
> 
> 标签：c#, android

我有一个将学生 ID 发送到 ASP.NET 网站的 android 程序。该网站回复学生信息。请求和响应是通过 JSON，但我不知道如何在 asp.net 和 android 之间工作。android 程序发送请求。asp.net 从数据库中获取数据并将其放入数据表中，然后像这样 [{},{}] 转换为 json。请帮助我提供一些适用于 android 应用程序的资源。
asp.net 代码是

```
public string Convert(DataTable row)
{
    StringBuilder sb = new StringBuilder();
    StringWriter sw = new StringWriter(sb);
    JsonWriter jsonWriter = new JsonTextWriter(sw);
    jsonWriter.Formatting = Formatting.Indented;
    jsonWriter.WriteStartArray();
    if (row.Rows.Count != 0)
    {
        foreach (DataRow result in row.Rows)
        {
            jsonWriter.WriteStartObject();
            string  idstudent = result["id"].ToString();
            jsonWriter.WritePropertyName("id");
            jsonWriter.WriteValue(idstudent);

            string AVG = result["AVG"].ToString();
            jsonWriter.WritePropertyName("AVG");
            jsonWriter.WriteValue(AVG);
            string fname = result["fname"].ToString();
            jsonWriter.WritePropertyName("fname");
            jsonWriter.WriteValue(fname);
            string date = result["date"].ToString();
            jsonWriter.WritePropertyName("date");
            jsonWriter.WriteValue(date);
            string name = result["name"].ToString();
            jsonWriter.WritePropertyName("name");
            jsonWriter.WriteValue(name);
            jsonWriter.WriteEndObject();
        }

    }
    jsonWriter.WriteEndArray();
    jsonWriter.Close();
    sw.Close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T20:43:05.477

听起来你想要一个意图过滤器：http: [//developer.android.com/guide/components/intents-filters.html](http://developer.android.com/guide/components/intents-filters.html)

```
<intent-filter>
    <data android:scheme="my.special.scheme" />
    <action android:name="android.intent.action.VIEW" />
</intent-filter> 
```

你可以这样称呼它：

```
<a href="my.special.scheme://other/parameters/here"> 
```

您可能会 Base64 编码您的 json 字符串并将其作为 URL 参数传递。

（我从这里提取了这个信息：[Launch custom android application from android browser](https://stackoverflow.com/questions/2958701/launch-custom-android-application-from-android-browser)）

# data-binding - 淘汰赛中的特殊绑定，将一个模板呈现在另一个模板中

> ID：14881507
> 
> 赞同：0
> 
> 时间：2013-02-14T18:23:48.183
> 
> 标签：data-binding, knockout.js

我正在尝试解决在另一个模板的上下文中渲染一个模板的问题。外部模板不知道也不应该关心内部模板及其视图模型。它只关心它自己的模板，一个嵌入内部模板的地方，传递它的名称和它的视图模型。

所以理想情况下，我希望我知道如何实现以下绑定：

```
<script type="text/html" id="outerTemplate">
    <div class="outer-template" data-bind="here: {}"></div>
</script>

<!-- ko nested: { to: 'outerTemplate', data: { name: 'I am an inner view model' } } -->

    <div class="inner-template" data-bind="text: name"></div>

<!-- /ko --> 
```

如果有人对淘汰赛有足够的了解，可以轻松地勾勒出这种绑定，我将不胜感激。

更新：提出了功能请求：[https ://github.com/knockout/knockout/issues/1251](https://github.com/knockout/knockout/issues/1251)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T19:13:48.253

绑定允许您动态选择要使用的`template`模板名称，因此您可以执行以下操作：

```
<script id="outer" type="text/html">
    <h2>Outer</h2>
    <div data-bind="template: { name: tmplName, data: data }"></div>
</script>

<script id="inner" type="text/html">
    <h3>Inner</h3>
    <input data-bind="value: name" />
</script>

<div data-bind="template: 'outer'"></div> 
```

在这种情况下，视图模型看起来像：

```
var vm = {
    tmplName: 'inner',
    data: {
        name: ko.observable("Bob")   
    }
};

ko.applyBindings(vm); 
```

视图模型可以根据您的需要进行结构化。关键是您将模板名称和数据传递到模板绑定中。

示例：http: [//jsfiddle.net/rniemeyer/LHhc8/](http://jsfiddle.net/rniemeyer/LHhc8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T12:09:23.157

我自己做了一个工作示例：http: [//jsfiddle.net/m34wp/4/](http://jsfiddle.net/m34wp/4/)

```
var templateComputedDomDataKey = '__ko__templateComputedDomDataKey__';
function disposeOldComputedAndStoreNewOne(element, newComputed) {
    var oldComputed = ko.utils.domData.get(element, templateComputedDomDataKey);
    if(oldComputed && (typeof (oldComputed.dispose) == 'function')) {
        oldComputed.dispose();
    }
    ko.utils.domData.set(element, templateComputedDomDataKey, (newComputed && newComputed.isActive()) ? newComputed : undefined);
}
function makeArray(arrayLikeObject) {
    var result = [];
    for(var i = 0, j = arrayLikeObject.length; i < j; i++) {
        result.push(arrayLikeObject[i]);
    }
    ;
    return result;
}
function moveCleanedNodesToContainerElement(nodes) {
    var nodesArray = makeArray(nodes);
    var container = document.createElement('div');
    for(var i = 0, j = nodesArray.length; i < j; i++) {
        container.appendChild(ko.cleanNode(nodesArray[i]));
    }
    return container;
}
ko.bindingHandlers['nested'] = {
    'init': function (element, valueAccessor) {
        var elementType = 1;
        var commentType = 8;
        var bindingValue = ko.utils.unwrapObservable(valueAccessor());
        if(element.nodeType == elementType || element.nodeType == commentType) {
            // It's an anonymous template - store the element contents, then clear the element
            var templateNodes = element.nodeType == 1 ? element.childNodes : ko.virtualElements.childNodes(element);
            var container = moveCleanedNodesToContainerElement(templateNodes);
            new ko.templateSources.anonymousTemplate(element)['nodes'](container);
        }
        return {
            'controlsDescendantBindings': true
        };
    },
    'update': function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        var options = ko.utils.unwrapObservable(valueAccessor());
        var outerTemplateName = options['to'];
        var dataValue = ko.utils.unwrapObservable(options['data']) || viewModel;
        var innerContext = bindingContext['createChildContext'](dataValue);
        innerContext.innerTemplateElement = element;
        var templateComputed = ko.renderTemplate(outerTemplateName, innerContext, options, element);
        disposeOldComputedAndStoreNewOne(element, templateComputed);
    }
};
ko.bindingHandlers['here'] = {
    'init': function (element, valueAccessor) {
        return {
            'controlsDescendantBindings': true
        };
    },
    'update': function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        var templateElement = bindingContext.innerTemplateElement;
        if(viewModel != null) {
            var innerContext = bindingContext['createChildContext'](viewModel);
            var templateComputed = ko.renderTemplate(templateElement, innerContext, {
            }, element);
            disposeOldComputedAndStoreNewOne(element, templateComputed);
        } else {
        }
    }
};
ko.virtualElements.allowedBindings['nested'] = true; 
```

# ember.js - 在视图中订阅模型事件的正确方法是什么？

> ID：14881508
> 
> 赞同：3
> 
> 时间：2013-02-14T18:23:48.340
> 
> 标签：ember.js

我想在我的视图中订阅模型的 becomeInvalid 和 becomeError 事件，以便我可以设置一些错误状态。我可以想到两种方法，各有各的缺点。

我能想到的第一种方法是使用观察者在视图上创建我自己的 becomeInvalid 和 becomeError 挂钩：

```
becameInvalid: function() {
  var isValid = this.get('controller.model.isValid');
  if (Ember.isNone(isValid) || isValid) {
    return;
  }
  console.log('becameInvalid');
}.observes('controller.model.isValid')

becameError: function() {
  var isError = this.get('controller.model.isError');
  if (Ember.isNone(isError) || !isError) {
    return;
  }
  console.log('becameError');
}.observes('controller.model.isError') 
```

这可行，但使用了很多样板代码。我能想到的第二种方法是在加载模型后向事件添加处理程序：

```
didLoad: function() {
  var isLoaded = this.get('controller.model.isLoaded');
  if (Ember.isNone(isLoaded) || !isLoaded) {
    return;
  }
  var model = this.get('controller.model');
  model.on('becameInvalid', function() {
    console.log('becameInvalid');
  });
  model.on('becameError', function() {
    console.log('becameError');
  });
}.observes('controller.model.isLoaded') 
```

这种方法的问题是它仍然需要一些样板代码，并且（如果我错了，请纠正我）当视图被删除时，事件处理程序不会被自动清理。

我想做的是类似于观察者协议的事件，这些事件将由框架自动清理。例如：

```
becameInvalid: function() {
  console.log('becameInvalid');
}.eventHandler('controller.model.becameInvalid')

becameError: function() {
  console.log('becameError');
}.eventHandler('controller.model.becameError') 
```

这样的事情存在吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T23:42:58.973

我认为你的第一个建议是一个可行的解决方案。这是它的一个版本，稍微不那么冗长：

```
isValid : Ember.Computed.alias("controller.model.isValid"),
becameInvalid: function() {
  if(this.get("isValid"){
     return;
  }
  console.log('becameInvalid');
}.observes('isValid') 
```

有关 Ember.computed.alias 的一些详细信息，请参阅此[问题](https://stackoverflow.com/questions/14965235/ember-js-shorthand-for-common-computed-property-pattern)。除此之外，我发现在某些情况下（= 仅当 isValid 变为 false 时）使用开箱即用的 Ember 功能无法触发观察者。您必须自己实现这样的观察者。

# php - 提交 WordPress 评论时自动提交表单

> ID：14881509
> 
> 赞同：0
> 
> 时间：2013-02-14T18:23:48.140
> 
> 标签：php, jquery, wordpress, forms

我创建了一个表单来上传图片以供自定义使用

```
<form id="file-upload" action="" method="POST" enctype="multipart/form-data">
    <div id="image-uploader-box" class="group">           
        <div id="forms" class="add-photo-fields">
            <input type="submit" value="Upload" />
            <input type="button" id="add-photo-button" class="add-photo-button" value="Add Photo"/>
        </div>
    </div> 
</form> 
```

现在它可以正常上传图像并将其存储到适当的位置。但我真正想要的是当用户提交 WordPress 评论时自动提交表单上方。（当用户点击提交评论按钮时）

任何人都可以帮助我吗？无论哪种方式，我都可以使用 jquery 或 php。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T18:25:17.513

这是要去的地方：http: [//api.jquery.com/submit/](http://api.jquery.com/submit/)（jquery 的提交功能） 上传文件时可以发布到 iframe：[如何发布到 iframe？](https://stackoverflow.com/questions/168455/how-do-you-post-to-an-iframe/168488#168488)

# javascript - 如何检查插件的功能是否存在？

> ID：14881511
> 
> 赞同：3
> 
> 时间：2013-02-14T18:23:58.103
> 
> 标签：javascript, jquery

我有这个代码：

```
$(document).ready(function() {
    $('.tabs-container').tabs({ 
        tabs: '.bar', 
        tabs_container: '.foo' 
    });
}); 
```

有时未加载选项卡插件脚本，这会导致页面的其余部分 js 由于控制台中的此错误而中断：

```
TypeError: $(...).tabs is not a function 
```

在将该插件附加到元素之前，如何检查选项卡功能是否存在？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-14T18:24:44.923

```
if($.fn.tabs) {
    /// .. it exists
} 
```

# php - 从 json 数组中删除双引号并修复链接

> ID：14881512
> 
> 赞同：0
> 
> 时间：2013-02-14T18:24:00.913
> 
> 标签：php, arrays, json, multidimensional-array

嗨我有这个代码来输出一个数组列表

```
$Sql1 = "SELECT * FROM tabmp3
         WHERE Mp3_Player = 1
         ";
        $Query1 = mysql_query($Sql1, $Conn)or die(mysql_error($Conn));
        $musicas = array();
        while($Rs1 = mysql_fetch_array($Query1)){

        $musicas[] = array( title => $Rs1['Musica_Nome'], autor => "Grupo Fronteiras", mp3 => "http://site/Musicas/".$Rs1["Disco_Id"]."/".$Rs1["Musica_Mp3"] ); 

        }
         echo ( json_encode($musicas) ); 
```

这个输出

```
[{"title":"Alegria do Pov\u00e3o","autor":"Grupo Fronteiras","mp3":"http:\/\/site\/Musicas\/3\/201302140204413c390efdb9957eebd8d85c262f2a4929.mp3"}, {"title":"Bem na moda da fronteira","autor":"Grupo Fronteiras","mp3":"http:\/\/site\/Musicas\/2\/20130214032235fabd12471ffc7790c9204f891919bca8.mp3"}] 
```

我需要从键中删除双引号并将http链接修复为如下所示

```
[{title:"Alegria do Pov\u00e3o",autor:"Grupo Fronteiras",mp3:"http://site/Musicas/3/201302140204413c390efdb9957eebd8d85c262f2a4929.mp3"},{title:"Bem na moda da fronteira",autor:"Grupo Fronteiras",mp3:"http://site/Musicas/2/20130214032235fabd12471ffc7790c9204f891919bca8.mp3"}] 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T18:51:01.883

试试这个..我知道这不是很好的方法..我写这个是为了告诉你，你必须只在你的 php 代码中制作你想要的表单。

```
$json = json_encode($musicas);
$json = preg_replace('/["]/', '' ,$json);
$json = str_replace(':',':"', $json);
$json = str_replace(',','",',$json);
$json = str_replace('}]','"}]',$json);
echo $json; 
```

通过这种方式，您将实现您想要的。但是请找到一些好的方法来做到这一点。

```
The correct answer should be this, as commented by @AlvaroLouzada

$json = json_encode($musicas);
$json = preg_replace('/"([^"]+)"\s*:\s*/', '$1:', $json);
echo $json ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-15T19:40:59.030

我一直在寻找一个优雅的解决方案来解决这个问题，而无需通过 javascript 进行更改或仅通过 preg_replace 替换引号（对于值将包含引号的情况）并最终由我自己完成。即使为时已晚，我希望它会帮助那些正在寻找相同解决方案的人。

```
function json_encode_advanced(array $arr, $sequential_keys = false, $quotes = false, $beautiful_json = false) {

    $output = "{";
    $count = 0;
    foreach ($arr as $key => $value) {

        if ( isAssoc($arr) || (!isAssoc($arr) && $sequential_keys == true ) ) {
            $output .= ($quotes ? '"' : '') . $key . ($quotes ? '"' : '') . ' : ';
        }

        if (is_array($value)) {
            $output .= json_encode_advanced($value, $sequential_keys, $quotes, $beautiful_json);
        } else if (is_bool($value)) {
            $output .= ($value ? 'true' : 'false');
        } else if (is_numeric($value)) {
            $output .= $value;
        } else {
            $output .= ($quotes || $beautiful_json ? '"' : '') . $value . ($quotes || $beautiful_json ? '"' : '');
        }

        if (++$count < count($arr)) {
            $output .= ', ';
        }
    }

    $output .= "}";

    return $output;
}

function isAssoc(array $arr) {
    if (array() === $arr) return false;
    return array_keys($arr) !== range(0, count($arr) - 1);
} 
```

用法：

```
$array = [
    'someField' => '"value"', // double quotes for string if needed
    'labelField' => '"label"', // double quotes for string if needed
    'boolean' => false,
    'numeric' => 5,
    'render' => [
        'option' => 'function() {
            console.log("Hello World!");
            console.log(\'Hello World!\');
        }',
    ],
];
echo json_encode_advanced($array); 
```

结果：

```
{
    someField : "value",
    labelField : "label",
    boolean : false,
    numeric : 5,
    render : {
        option : function() {
            console.log("Hello World!");
            console.log('Hello World!');
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T18:27:56.213

而不是做`echo ( json_encode($musicas) );`，做这样的事情：

```
$json_string = json_encode($musicas);
$json_string = str_replace('\/', '/', $json_string);

echo $json_string; 
```

# sql - 如何在表连接中仅获得第一个结果？

> ID：14881514
> 
> 赞同：-1
> 
> 时间：2013-02-14T18:24:02.400
> 
> 标签：sql, sql-server

我有一个查询：

```
SELECT  

    Segment_ID = Segment_ID.Segment_ID,
    Sprav_093.Name as Road_Wear

FROM dbo.Road
LEFT JOIN Segment_ID  ON Road.Road_ID = Segment_ID.Road_ID
LEFT JOIN Driveway_Pavement ON Segment_ID.Segment_ID = Driveway_Pavement.Segment_ID
LEFT JOIN Sprav_093 ON Driveway_Pavement.Kod_Spr093 = Sprav_093.Kod_Spr 
```

工作正常。`Segment_ID`表中有几行相同`Driveway_Pavement`。所以我想得到这行的第一行。我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T18:30:46.190

假设您要为每个段 id 返回一行，请执行此操作

```
;WITh CTE AS (
SELECT  

    Segment_ID = Segment_ID.Segment_ID,
    Sprav_093.Name as Road_Wear,
    CASE WHEN Sprav_093.Name IS NOT NULL THEN 
    ROW_NUMBER() OVER (PARTITION BY Segment_ID.Segment_ID 
                       ORDER BY Sprav_093.Name//or date column) 
    ELSE 1 END rn

FROM dbo.Road
LEFT JOIN Segment_ID  ON Road.Road_ID = Segment_ID.Road_ID
LEFT JOIN Driveway_Pavement ON Segment_ID.Segment_ID = Driveway_Pavement.Segment_ID
LEFT JOIN Sprav_093 ON Driveway_Pavement.Kod_Spr093 = Sprav_093.Kod_Spr
)
SELECT * FROM CTE WHERE RN = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T18:29:24.447

尝试将 MAX 函数应用于两个选定的字段

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T18:44:45.220

这应该有效：

```
SELECT  

    Segment_ID = Segment_ID.Segment_ID,
    Sprav_093.Name as Road_Wear

FROM dbo.Road
OUTER APPLY (
    SELECT TOP 1 Segment_ID.Segment_ID
    FROM Segment_ID
    WHERE Segment_ID.Road_ID = Road.Road_ID
) Segment_ID  
LEFT JOIN Driveway_Pavement ON Segment_ID.Segment_ID = Driveway_Pavement.Segment_ID
LEFT JOIN Sprav_093 ON Driveway_Pavement.Kod_Spr093 = Sprav_093.Kod_Spr 
```

如果你想要一个特定的“第一”行，你可以`ORDER BY`在`SELECT`里面添加一个。`OUTER APPLY`

# visual-studio-2012 - 使用 IP 地址而不是 localhost 浏览网站

> ID：14881515
> 
> 赞同：24
> 
> 时间：2013-02-14T18:24:03.680
> 
> 标签：visual-studio-2012, iis-express

我正在使用带有 IIS Express 的 VS2012，并且似乎无法使用我的 IP 地址浏览我的网站。有没有办法做到这一点？它曾经与早期版本的 VS 一起工作得很好。

例如，此地址可以正常工作：

```
http://localhost:64651/ 
```

但是，这个地址不起作用。

```
http://192.168.252.165:64651/ 
```

我确定 IP 地址，因为我刚刚使用 ipconfig 获得了它。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-14T18:32:57.720

转到您的`IISExpress>Config`文件夹，找到`applicationhost.config`. 更改`<bindings>`如下：

```
<bindings>
      <binding protocol="http" bindingInformation="*:1407:YOUR_IP_ADDRESS" />
</bindings> 
```

在执行此操作之前，您必须使用`netsh`以下命令注册此 IP 地址：

**Windows 7 中的端口转发**

如果您运行的是 Windows 7，则几乎所有传入连接都被锁定，因此您需要专门允许到您的应用程序的传入连接。首先，启动管理命令提示符。其次，运行这些命令，将 192.168.1.11:1234 替换为您使用的任何 IP 和端口：

```
> netsh http add urlacl url=http://192.168.1.11:1234/ user=everyone 
```

这只是说明`http.sys`可以与此 url 交谈。

重要提示：必须根据系统语言指定 user=everyone 参数。因此，如果您的 Windows 语言是西班牙语，则参数必须是 user=todos。

```
> netsh advfirewall firewall add rule name="IISExpressWeb" dir=in protocol=tcp localport=1234 profile=private remoteip=localsubnet action=allow 
```

这会在 Windows 防火墙中添加一条规则，允许本地子网上的计算机到端口 58938 的传入连接。有关[此链接](http://johan.driessen.se/posts/Accessing-an-IIS-Express-site-from-a-remote-computer)的更多信息。

**端口转发 Mac OS X**

步骤 1：查看当前防火墙规则

```
sudo ipfw show 
```

步骤 2：添加端口转发规则（80 到 8080）

Tomcat 运行的默认端口是 8080，所以这里我们展示从端口 80 到 8080（Tomcat 的默认端口）进行端口转发的命令。显然，这也适用于其他端口，您只需要相应地调整命令。

```
sudo ipfw add 100 fwd 127.0.0.1,8080 tcp from any to any 80 in 
```

这是临时更改，重启后会恢复。如果你想让它永久化，你可以为它创建一个 lauch 守护进程。

可选删除规则

如果要删除防火墙规则，请运行：

```
sudo ipfw flush 
```

**在 Mac OS X 上使用 PFCTL（又名 PF）进行端口转发**

的设置`pfctl`类似于`ipfw`。Github 用户 kujon 创建了一个[很好的指南](https://gist.github.com/kujohn/7209628)来展示如何使用`pfctl`.

**注意：**确保仅通过查找项目名称来更改项目的绑定。您甚至可以保留 localhost 绑定并添加一个新绑定，这样您就可以使用给定的 IP 地址和旧的 localhost 绑定访问同一个网页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-30T16:47:11.257

在本地 iis ip webconfig 中绑定 Visual Studio

[![iis 设置](../Images/09f4760472c36dc77f034a32734b115c.png)](https://i.stack.imgur.com/Do8r6.jpg)

[![网络配置](../Images/c20f5bd9082a60804fc793eed8ff203a.png)](https://i.stack.imgur.com/NqWXx.jpg)

[![物业项目](../Images/8d6ff1a95ab8f8e3b95112f478f9db24.png)](https://i.stack.imgur.com/Poo0u.jpg)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-01-06T23:54:00.927

您可以使用`Conveyor by Keyoti`

第1步：

通过在“工具”->“扩展和更新”对话框中搜索“传送带”来下载 Visual Studio 扩展。

第2步：

为 Web 应用程序项目自动启用 Conveyor，运行（调试）项目并记下远程 URL，即您将在您的设备或其他计算机上使用的 URL。如果您没有看到“传送带”窗口，请参阅下面的故障排除。

[![传送带截图](../Images/a6079242c269fe1846ae464a7b1d903a.png)](https://i.stack.imgur.com/fki3f.png)

第 3 步：

添加入站防火墙规则，允许访问远程 URL 中给定的 TCP 端口。

```
1\. Open Windows 'Start' and type WF.msc.
2\. Click 'Inbound Rules' on the left.
3\. Click 'New Rules' on the right.
4\. Choose 'Port' in the new dialog, then 'Next'.
5\. Select TCP, and enter the port from the Remote URL next to 'Specific local ports' (probably 45455), then 'Next'.
6\. Next, and next (you may want to disable 'Public'), give it a name like 'Conveyor: web dev server access enabled'. 
```

第4步：

从您的设备（手机、平板电脑或其他机器）使用远程 URL 直接访问您的应用程序。

更多信息在[输送机](https://marketplace.visualstudio.com/items?itemName=vs-publisher-1448185.ConveyorbyKeyoti)

# android - ActionBarSherlock 选项卡选择

> ID：14881520
> 
> 赞同：0
> 
> 时间：2013-02-14T18:24:39.647
> 
> 标签：android, android-actionbar, actionbarsherlock, selection

有没有一种方法可以在操作栏 sherlock 选项卡上调用 select 方法而不实际选择它？最终目标是避免触发选项卡侦听器（`onTabSelected`等），并且只更改布局以使相关选项卡看起来像是被按下？

同理，有没有办法触发刷屏，使得刷屏执行，但`onPageSelected`不触发回调？

我一直在尝试使用布尔值来忽略下一个选择，如下所示：

```
ignore = true;
tab.select(); // or viewPager.setCurrentItem(1, true); in the case of the swipe
ignore = false; 
```

但似乎选项卡选择和滑动操作不是立即的。AKA 在实际选择发生之前设置和取消设置忽略标志。

任何帮助都是极好的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T23:49:50.740

**选项卡选择`ActionBar`：**如果您已经有，
请尝试，如果您想在.[`setSelectedNavigationItem(int position)`](http://developer.android.com/reference/android/app/ActionBar.html#setSelectedNavigationItem%28int%29)`actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS)``ActionBar`

**页面选择`ViewPager`：**
您可以使用在没有直接用户交互的情况下[`setCurrentItem(int item, boolean smoothScroll)`](http://developer.android.com/reference/android/support/v4/view/ViewPager.html#setCurrentItem%28int,%20boolean%29)转到不同的页面。如果您想为滚动设置动画，请设置`ViewPager`为`smoothScroll`。`true`

# string - 将值保存到块而不是表示它的单词标签

> ID：14881532
> 
> 赞同：5
> 
> 时间：2013-02-14T18:25:12.753
> 
> 标签：string, block, rebol, rebol2

我正在尝试将一些字符串值保存到一个块中，以便我可以将该块保存到一个文本文件中。我从使用 VID 的表单中获取这些值。

一种方法是简单地将字符串保存到文件中。但我更希望能够以块的形式检索数据。

这就是我打算做的：

```
view layout [
    contact-name: field
    save-button: btn "Save" [
        saved-data-block: copy []
        append saved-data-block [[contact-name: contact-name/text]] ;problem here
        save my-file saved-data-block
    ]
] 
```

对于`Rebol User`名称字段中的输入，文件中存储的内容应该是类似`[contact-name: "Rebol User"]`的，但内容是`[contact-name: contact-name/text]`

我知道问题是在我将块附加到`saved-data-block`. 如何以块状方式将字符串值保存到文本文件中？我应该做其他事情来实现这一目标吗？欢迎任何意见/查询。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T00:29:01.167

如果您不需要专门使用 reduce，那么**compose**可能是一种更好的方式来调出您想要“不理会”的部分。只有括号中的东西会被评估，其他的都不会改变。例如：

```
append/only saved-data-block compose [contact-name: (get-face contact-name)] 
```

Compose 通常是表达样板文件的最清晰方式，其中包含您想要评估的小部分。当然，理解 reduce 也很好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-29T12:57:17.743

格雷厄姆的回答实际上错过了一个勾号:-)

```
append/only saved-data-block reduce [ to-set-word 'contact-name get-face contact-name ] 
```

没有 ' reduce 会将联系人名称还原为其值，即一个对象！在交给 to-set-word 之前。

因此，您必须将联系人名称更改为一个亮字！'联系人姓名 。

reduce 将其简化为一个单词！，然后将其交给 to-set-word 。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-29T13:05:27.220

这是另一个想法：

```
append/only saved-data-block repend [contact-name:] get-face contact-name 
```

这一次 contact-name: 没有减少，所以它仍然是一个 set-word!，并附加了来自表单元素的值。

双附加看起来不太好，但可以节省击键。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T19:15:40.827

Reduce 还将重置也是“联系人姓名”的字段的名称。

所以，这会更好

```
append/only saved-data-block reduce [ to-set-word contact-name get-face contact-name ] 
```

# php - 在页面时间轴上上传 Facebook 照片 (PHP)

> ID：14881533
> 
> 赞同：1
> 
> 时间：2013-02-14T18:25:14.097
> 
> 标签：php, facebook

我的网站中有图片缓存，我需要每天将这些照片上传到我的 Facebook 粉丝页面 4-5 次。我的代码创建了一个相册并将照片上传到相册，但是，这些照片不会出现在时间轴中。

所以我的问题是，我如何将照片上传到我的粉丝页面，以便它们出现在时间轴上，在墙上。使用的语言是 PHP

任何帮助是极大的赞赏。

谢谢

编辑1：这是代码：

```
<?php   
require 'facebook.php';
$facebook = new Facebook(array(
    'appId'  => "AAAAAAAAAA",
    'secret' => "BBBBBBBBBB",
));

$fanpage_token = "ZZZZZZZZZZZZZZZZZZZZZZZZZZ";

$facebook->setFileUploadSupport(true);

//Create an album
$album_details = array(
        'message'=> 'test album',
        'name'=> 'album'
);
$create_album = $facebook->api('/PAGE_ID/albums', 'post', $album_details);

$album_uid = $create_album['id'];

echo $album_uid;

 $img = '7newx.jpg';
  $args = array(
   'message' => 'Random message',
   'image' => '@' . $img,
   'aid' => $album_uid,
   'no_story' => 1,
   'access_token' => $fanpage_token
  );

  $photo = $facebook->api($album_uid . '/photos', 'post', $args);

?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T22:35:00.167

好的，所以我猜您尝试删除 no_story 并发现它不会影响时间线。这也是我发现的。

What you have to do is make another post, but this time, as a link. You need to use your array $photo, which was returned from your first post. If you examine that you should see it has a single element called ['id'], containing the id of your uploaded photo.

You need to turn that into a link that facebook would use to display. This is simple.

```
if (isset($photo['id']))
{
$message = "My latest photo";
$link = "https://www.facebook.com/photo.php?fbid=".$photo['id'];
$attachment = array
(
'access_token'=>$fanPageAccessToken,
'type' => 'photo',
'message' => $message,
'link' => $link 
);

$result = $facebook->api($fanPageId.'/links/','post',$attachment);
} 
```

I am assuming you can work out what $fanPageAccessToken and $fanPageId are.

If you do that, you should get what you want.

# javascript - 使用 javascript 将图像源的结尾从“s.jpg”修改为“o.jpg”

> ID：14881537
> 
> 赞同：0
> 
> 时间：2013-02-14T18:25:31.283
> 
> 标签：javascript, facebook, image, url

我的 CMS 有一个插件，用于提取带有故事的 facebook 图片。我无法改变它。在源代码中，它创建的图像 URL 以 s.jpg 结尾，但我想对其进行修改，使其以 o.jpg 结尾，以便引入最大的照片类型

这是代码：

```
<div class="post_picture">
<img src="http://photos-g.ak.fbcdn.net/hphotos-ak-ash3/534627_477964682254266_1412043521_s.jpg" alt="">
</div> 
```

这可能吗？我会想象您复制源 URL，将结尾从 s.jpg 修改为 o.jpg，然后用新 URL 替换旧 URL。

**编辑：**

感谢大家的回复和解决方案，下面是我找到的另一个解决方案...

```
$('.div1>img').attr('src',function(i,e){
 return e.replace("s.jpg","o.jpg");
}) 
```

前 - [http://jsfiddle.net/designaroni/4Da2a/](http://jsfiddle.net/designaroni/4Da2a/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T18:33:51.057

```
function imgSrcOverwrite() {
    var imgs = document.getElementsByTagName('img'),
        loopImg, fbImgs = [];
    // Loop through each IMG, check if it's a facebook image & 
    // then replace _s.jpg with _o.jpg in the src attribute
    for ( var x=0; x<imgs.length; x++ ) {
        loopImg = imgs[x];
        if ( loopImg.src.indexOf('photos-g.ak.fbcdn.net') > -1 ) {
            loopImg.src = loopImg.src.replace('_s.jpg', '_o.jpg');
            fbImgs.push(loopImg);
        }
    }

    imgs = loopImg = null;
    // return array of fb images so you can do more stuff with them
    return fbImgs;
}

imgSrcOverwrite(); 
```

如果您使用的是 jQuery，我会将第二行替换为

```
var imgs = $('.post_picture img'), 
```

[http://jsfiddle.net/CoryDanielson/jmzk2/](http://jsfiddle.net/CoryDanielson/jmzk2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T18:35:40.940

这是一个简单的例子，说明它是如何成为可能的。

```
// get image dom element
var img = document.getElementById('imageId');

// update src
img.src = img.src.replace(/s.jpg/, 'o.jpg'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T18:37:16.770

如果您使用的是 jquery，

尝试通过这个访问 img 标签 -

```
var src = '';
$('.post_picture').find('img').each(function(){
src = $(this).attr('src').toString().replace('_s.jpg', '_o.jpg');
$(this).attr('src',src);
}); 
```

# wcf - Web 服务和 STS (SecurityTokenService) 之间的信任是如何建立的？

> ID：14881538
> 
> 赞同：0
> 
> 时间：2013-02-14T18:25:32.427
> 
> 标签：wcf, security, wif, federated-identity, sts-securitytokenservice

我正在研究代理身份验证、联合等。在所有博客上，都提到*安全令牌服务和其他 Web 服务之间存在“信任”*。但是，我找不到解释如何建立这种信任的博客。

问题：

1.  是什么让其他 Web 服务信任 STS？即我们如何在 STS 和其他 Web 服务之间建立信任？
2.  其他 Web 服务如何验证安全令牌是由他们信任的 STS 颁发的，而不是由其他一些 STS 颁发的？

我知道各种技术会以不同的方式来做这件事。如果有人解释它在 .NET 世界中是如何发生的（使用 WCF、Windows Identity Foundation 等），那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T09:46:37.757

它是使用 X509 证书完成的。

`SecurityTokenService`(STS) 使用其他服务也信任的证书“签署 SAML 令牌”。所以信任是使用通用的东西建立的，即证书，STS 和其他服务也信任！

在调用其他 Web 服务时，STS 发出的 SAML 令牌通过 SOAP 标头发送。如果 SAML 令牌由您的其他服务信任的证书签名，那么您的服务会理解该令牌是由“受信任的”STS 颁发的。

在`Windows Identity Foundation`中，您可以为 STS[配置签名证书](http://msdn.microsoft.com/en-us/library/system.identitymodel.configuration.securitytokenserviceconfiguration.signingcredentials.aspx)。对于其他 Web 服务，[可以使用 ServiceCredential 类在服务主机中配置受信任的证书](http://msdn.microsoft.com/en-IN/library/system.servicemodel.description.servicecredentials.servicecertificate.aspx)。

# android - 通过 Android 推送通知启动应用程序

> ID：14881542
> 
> 赞同：1
> 
> 时间：2013-02-14T18:25:41.910
> 
> 标签：android, database, push-notification

因此，在我使用[Parse](https://www.parse.com/docs/push_guide#top/Android)的情况下，我找到了一种向 Android 发送推送通知的方法。然而，Android 是否允许开发人员发送推送通知，以在用户设备上启动应用程序？我的用例是如果应用程序崩溃并且由于某种奇怪的原因没有重新启动，我可以在数据库端检查并查看用户在 6 小时内没有传输任何数据，从而发出一个推送通知，将重新启动应用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T18:28:37.447

当然！只需将 设置`Intent`为您的应用程序，然后`startActivity`

出于同样的原因，我不得不在工作中使用它！

# pdf - Grails wkhtmltopdf插件：没有pdf输出

> ID：14881543
> 
> 赞同：0
> 
> 时间：2013-02-14T18:25:48.230
> 
> 标签：pdf, grails, plugins, wkhtmltopdf

我正在尝试使用 Grails wkhtmltopdf 插件（[https://github.com/quorak/grails-wkhtmltopdf](https://github.com/quorak/grails-wkhtmltopdf)），但我无法获得渲染的 pdf 文件。仅显示 gsp 模板。

到目前为止我做了什么：

这是链接，它调用控制器中的操作：

`<g:link action="downloadQuestionnaire" id="${questionnaireInstance?.id}">Download questionnaire</g:link>`

这是控制器中的操作：

```
def downloadQuestionnaire = {
    def questionnaire = Questionnaire.get(params.id) 

    render( filename:"File ${questionnaire.id}.pdf",
    view:'/templates/pdf/_questionnaire.gsp',
    model:[questionnaireInstance: questionnaire],
    marginLeft:20,
    marginTop:35,
    marginBottom:20,
    marginRight:20,
    headerSpacing:10,
    )
} 
```

_questionnaire.gsp 是模板，应该呈现为 pdf。

在 config.groovy

```
grails.plugin.wkhtmltox.binary = "/usr/local/bin/wkhtmltopdf" 
```

我检查了一下，wkhtmltopdf ist 工作正常。

根据我对 wkhtmltopdf 插件的理解，模板 _questionnaire.gsp 应该呈现为可供下载的 pdf。但在我的例子中，gsp-template 与问卷实例的数据一起显示。根本没有错误消息。

任何想法，如何获得pdf输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-04T07:22:44.613

将 pdf: 'application/x-pdf' 添加到 Config.groovy 中的 grails.mime.types

```
grails.mime.types = [
    all: '*/*',
    ....,
    pdf: 'application/x-pdf'
] 
```

并尝试调用 controller/action.pdf 或将您的 g:link 标签自定义到此

```
<g:link action="downloadQuestionnaire" id="${questionnaireInstance?.id}.pdf">Download questionnaire</g:link> 
```

希望它有所帮助。

# php - 如何从 ajax 调用传递的 php 访问数组中的所有元素？

> ID：14881550
> 
> 赞同：0
> 
> 时间：2013-02-14T18:25:56.653
> 
> 标签：php, javascript, jquery, ajax, arrays

我发现很难从 php 文件访问数组中的元素。该数组通过 ajax 调用传递。请在 ajax 调用下方找到。

```
var data = ['test1', 'test2', 'test3'];
$(document).ready(function () {
    $("button").click(function () {
        $.ajax({
            type: "POST",
            url: "getResult.php",
            data: {
                testData: data
            },
            success: function (data, status) {
                alert("Data: " + data + "\nStatus: " + status);
            }
        });
        return false;
    });
}); 
```

服务器端 [PHP] 代码是

```
$myArray = $_POST["testData"];
echo $myArray; 
```

但是 $myArray 总是返回数组中的最后一个元素[test3 here]。如何首先访问 [here test1] 和其他元素？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T18:30:09.313

JS：

```
JSON.stringify(data) 
```

PHP：

```
$myArray = json_decode($_POST['data']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T18:31:10.380

您需要做的是将 JavaScript 数组转换为 JSON，然后通过该 JSON 发送。在 PHP 端，您应该将 JSON 解码回一个数组。最后，您应该在将数组发回之前将其重新编码为 JSON。

在您的客户端更改一行：

```
data: {testData : JSON.stringify(data)}, 
```

在您的服务器端执行以下操作：

```
$myArray = json_decode($_POST["testData"]);
header('Content-Type: application/json');
echo json_encode(array('pheeds' => $pheeds, 'res' => $res)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T18:36:07.123

对于简单的结构，您可以使用[jQuery Param](http://api.jquery.com/jQuery.param/)

```
data : $.param({testData:data}) 
```

有了这个，您应该能够访问您的数据

```
echo $_POST["testData"][0]...[2]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T22:43:23.993

通过 ajax 传递 JS 变量时试试这个。

使用 Firebug 在控制台上查看 PHP 文件中的内容，这将为您省去很多麻烦。

您将看到该数组是一个 OBJECT ，因此您希望将此数组作为 JSON / STRING 发送到 PHP 文件。

采用 ：

```
 var data = ['test1','test2','test3'];
 data = JSON.stringfy(data); 
```

在 PHP：

```
 $data = var_post('test_data');
     $data=json_decode($data);
     $print_r($data); 
```

# xml - 向 xml 包中添加一些文本 - aspdotnetstorefront

> ID：14881553
> 
> 赞同：0
> 
> 时间：2013-02-14T18:25:58.683
> 
> 标签：xml, asp-classic

我正在开发一个 aspdotnetstorefront xml 模板，完全超出了我的理解范围。这个应用程序使用 xml 包，我已经弄清楚了如何设置不同部分的内容的样式。我坚持一个非常简单的事情：我只需要在输出中添加几个标题，这将超出模板标签。我已经尝试将它放在 CDATA 标记之间，正如一些人所推荐的那样，但我尝试的一切都会破坏页面。

粗略地说，我需要：

添加“类别”

- 类别的迭代

添加“特色产品”

-产品迭代

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T19:38:24.217

您的问题可能是您尝试在一组模板标签之外输入值。由于您正在生成某种类型的迭代，因此您很可能希望在模板中工作。

XML 包处理有效的 HTML 应该没有问题。换句话说，可以像在 HTML 文档中一样对待输入文本。请记住关闭所有标签。您还会发现，对于某些特殊字符，必须使用 HTML 代码。

如果您仍有问题，请随时分享您的 xml 包代码，以便我查看。

# c# - 通过交换服务器问题发送电子邮件。（system.net.mail vs microsoft.exchange.webservices）

> ID：14881555
> 
> 赞同：2
> 
> 时间：2013-02-14T18:26:05.890
> 
> 标签：c#, asp.net, exchange-server

我正在为我的公司开发一个 Web 应用程序。其中一部分需要内部用户填写表格，并代表该用户发送电子邮件。这一切都在公司内部。我搜索并找到了两条可能的路由旧 system.net.mail 和更新的 microsoft.exchange.webservices，但似乎我们的交换服务器需要凭据。我只能获取用户的登录名和他的电子邮件地址 login+"@company.com"。我怎样才能做到这一点？

以下是我使用 smtp (system.net.mail) 的代码，但它不起作用。

```
 string[] username =System.Security.Principal.WindowsIdentity.GetCurrent().Name.Split('\\');
            string email = username[1] + "@company.com";
            MailAddress from = new MailAddress(email);
            MailAddress to = new MailAddress("someone@company.com");
            MailMessage message = new MailMessage(from, to);                
            message.Subject = "testmail";
            message.Body = "<h>testmail</h>";
            message.IsBodyHtml = true;
            SmtpClient client = new SmtpClient();
            client.DeliveryMethod = SmtpDeliveryMethod.Network;
            client.Send(message); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T18:39:12.587

SmtpClient 要求您直接指定 SMTP 服务器，或者您具有正确的应用程序/机器配置设置，以便它自动检测服务器。您的代码隐式选择了第二个选项，我怀疑您在应用程序/机器配置中没有正确的设置。Exchange 在其默认配置 afaik 中不支持 SMTP，因此除非熟悉您的 Exchange 服务器的人知道 SMTP 已配置并且可以为您提供正确的地址，否则 SmtpClient 可能已退出。

Exchange Web Services（又名 EWS）可能是您更好的答案，但它并不是一个很好的答案。要使用 Exchange Web 服务，您将需要以下之一：

1) 用户的域、用户名和密码，以便您可以将正确的 NetworkCredential 传递给 EWS。在您的情况下，这可能意味着用户必须在您的表单中输入他们的密码，这可能会破坏您的要求。

2) 进程运行的用户（在 Web 应用程序中，IIS 的应用程序池标识）必须有权以相关用户的身份发送邮件。

3) 如果您可以使用 ASP.NET 身份验证来模拟用户（这只是 LAN 应用程序中的一个好方法），那么您可以有效地回退到选项 (2)，因为现在您将与 EWS 作为用户，他们显然有权从自己的地址发送邮件。

如您所见，正确的方法很大程度上取决于您的 Exchange/Active Directory/LAN 设置。

# java - 未调用 Android 4.2 setOnMenuItemClickListener

> ID：14881561
> 
> 赞同：3
> 
> 时间：2013-02-14T18:26:19.213
> 
> 标签：java, android, mobile, android-4.2-jelly-bean

我对带有 ActionBarSherlock 的 Android 4.2 上的操作栏有疑问。我添加了一个操作栏菜单项，它使用 setOnMenuItemClickListener 来设置按钮操作。

```
 MenuItem mapButton = menu.findItem(R.id.show_map);

    mapButton.setOnMenuItemClickListener(new OnMenuItemClickListener() {

        @Override
        public boolean onMenuItemClick(MenuItem item) {

            //Button implementation goes here
        }
    }); 
```

这在 Android 2.2 到 Android 4.1 上运行良好，但是在 Android 4.2 上 onMenuItemClick 根本不会被调用。

我试过添加这个

```
//Handles the map and route button in the options bar 
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // Handle item selection
    switch (item.getItemId()) {
    case R.id.show_map:
        return false;
    case R.id.show_route:
        return false;
    default:
        return super.onOptionsItemSelected(item);
    }
} 
```

按下按钮时确实会调用它，但似乎没有效果。我可以将按钮实现的代码移动到此函数中，但这需要我对程序的其他部分进行重大更改。有没有办法让 setOnMenuItemClickListener 在 Android 4.2 上工作？

# jquery - 在 ASP.NET 中部分回发后 jQuery addClass 丢失

> ID：14881563
> 
> 赞同：1
> 
> 时间：2013-02-14T18:26:27.320
> 
> 标签：jquery, asp.net, asynchronous, updatepanel, postback

我有以下 HTML：

```
 <asp:UpdatePanel ID="upPanelA" runat="server" > 
            <ContentTemplate>

    <ul class="MailBoxesItems">
        <li>
            <div id="InboxSelection" runat="server" class="MailLinkContent" >
            </div>
        </li>
        <li>
            <div id="UnreadSelection" runat="server" class="MailLinkContent">
            </div>
        </li>
        <li>
            <div id="SentSelection" runat="server" class="MailLinkContent">
            </div>
        </li>
    </ul>

      </ContentTemplate>
        </asp:UpdatePanel> 
```

当我单击它时，我使用以下脚本来选择 div：此脚本首先从所有 div 中删除所有“SelectedMail”类，然后将“SelectedMail”类添加到选定的 div。

```
 $('.MailBoxesItems li div.MailLinkContent').click(function () {
        $('.MailBoxesItems li div.MailLinkContent').removeClass('SelectedMail');
        $(this).addClass('SelectedMail');
    }); 
```

这是CSS：

```
 .SelectedMail {
        background-color:#f5f5f5;
    } 
```

以某种方式发生回发后，jQuery 的 addClass 分配丢失的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T19:43:24.437

这是由于混合传统的 ASP.Net Ajax 和 jQuery 事件而导致的常见问题。当您执行部分回发时，将重新创建 DOM 并丢失 jQuery 事件。

尝试以这种方式注册您的 jQuery 事件：

```
<script type="text/javascript">
    // the event binding is wrapped in a function avoiding code replication
    function bindEvents() {
        $('.MailBoxesItems li div.MailLinkContent').click(function () {
            $('.MailBoxesItems li div.MailLinkContent').removeClass('SelectedMail');
            $(this).addClass('SelectedMail');
        }); 
    }

    // bind the events (jQuery way)
    $(document).ready(function() {
        bindEvents();   
    });

    // attach the event binding function to every partial update
    Sys.WebForms.PageRequestManager.getInstance().add_endRequest(function(evt, args) {
        bindEvents();
    });

</script> 
```

# struts2 - struts2 ognl servlet 上下文

> ID：14881565
> 
> 赞同：3
> 
> 时间：2013-02-14T18:26:42.170
> 
> 标签：struts2, ognl

我有一些常量，如 APPVERSION、APPNAME 和 APPREV，我想在我的 Struts 2 应用程序的每个页面上显示它们。

有了这些要求，我认为将这些信息放在 servletContext 中并在部署应用程序时加载它会很棒。

我创建了一个实现的侦听器`ServletContextListener`：

```
public class ApplicationInitListenerImpl extends GenericVsService implements ApplicationInitListener,ServletContextListener {

    @Override
    public void contextDestroyed(ServletContextEvent sce) {
    }

    @Override
    public void contextInitialized(ServletContextEvent sce) {
        ServletContext sc = sce.getServletContext();        
        sc.setAttribute("appVer",xxx.utils.VConstants.APPVER);
        sc.setAttribute("appName",xxx.utils.VConstants.APPNAME);       
        sc.setAttribute("appRev",xxx.utils.VConstants.APPREV);
    }   
} 
```

然后我在我`web.xml`的监听器中添加了：

```
<listener>
        <listener-class>xxx.listeners.ApplicationInitListenerImpl</listener-class>
</listener> 
```

在我的 Tiles 模板中，我添加了：

```
<s:property value="#application.appName"/> - <s:property value="#application.appVer"/> 
```

但我在这里什么也得不到。

如果我从 Struts 2 Action 中检索 servletContext，我可以读取正确的值，因此这些值设置正常。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-26T05:46:13.613

您可以使用

```
<s:property value="#attr.appName"/> - <s:property value="#attr.appVer"/> 
```

或者

```
${appName}  -  ${appVer} 
```

# ember.js - Ember.js 父/子关系

> ID：14881570
> 
> 赞同：0
> 
> 时间：2013-02-14T18:26:58.433
> 
> 标签：ember.js

对于一个简单的消息传递应用程序，我有以下数据结构：

```
App.Message = DS.Model.extend({
  title: DS.attr("string"),
  body: DS.attr("string"),
  isRead: DS.attr("boolean"),
  replyTo: DS.belongsTo("App.Message")
});

App.Message.FIXTURES = [{
  id: "1",
  title: "Eos ut amet persius, ea ius nibh iudico",
  body: "Lorem ipsum dolor sit amet, nam et hinc doctus alienum, in vel latine conceptam.",
  isRead: true,
  replyTo: null
},
{
  id: "2",
  title: "Ad est dolor veniam delenit.",
  body: "Lorem ipsum dolor sit amet, nam et hinc doctus alienum, in vel latine conceptam.",
  isRead: false,
  replyTo: "1"
},
{
  id: "3",
  title: "Eu nec summo placerat reprehendunt.",
  body: "Lorem ipsum dolor sit amet, nam et hinc doctus alienum, in vel latine conceptam. Tale eirmod omittantur sit ne. Minim noster philosophia per eu, mel putent veritus an, ex veniam ubique consulatu has. At stet diceret repudiare ius, probo liber diceret no est. Ridens efficiantur vim te.",
  isRead: false,
  replyTo: "1"
}]; 
```

**我试图在选择消息时显示对消息的回复，但没有出现。** 消息主题和正文*显示*正常，因此我知道我的路由、控制器和模板至少已为父实体正确设置。

这是我的模板（为简洁起见，几乎删除了所有标记）：

```
<script type="text/x-handlebars" data-template-name="message">      
  <h2>{{ title }}</h2>        
  <p>{{ body }}</p>
  {{ render "messageResponses" responses }}
</script>

<script type="text/x-handlebars" data-template-name="messageResponses">
  {{#each responses}}
    <p>{{ body }}</p>
  {{/each}}
</script> 
```

还有我的消息控制器（我可能做错的部分）：

```
App.MessageController = Ember.ObjectController.extend({
  responses: function() {
    return App.Message.find({ replyTo: this.get("id") );  
  }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T23:55:13.703

请尝试`findProperty`：

```
App.MessageController = Ember.ObjectController.extend({
  responses: function() {
    return App.Message.findProperty('replyTo', this.get("id"));  
  }
}); 
```

# android - 如何在android中使动画可点击

> ID：14881575
> 
> 赞同：2
> 
> 时间：2013-02-14T18:27:18.807
> 
> 标签：android, animation, imageview

我为图像制作了一个简单的动画，并在图像上设置了事件 OnClick 来祝酒。问题是我让图像开始在 onCreate 上制作动画，并设置要单击的图像并触发 toast 但问题是图像不可点击，但如果我按下原始位置图像，吐司开始（图像不随动画移动）

谢谢你的帮助

这是 anim 文件夹中的动画代码 (translate.xml)

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:interpolator="@android:anim/linear_interpolator">
    <translate
        android:fromXDelta="-80%p"
        android:toXDelta="80%p"
        android:duration="20000"
        android:repeatCount="100"
        android:repeatMode="restart"

        />

</set> 
```

这是活动类

```
package com.example.animatest;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.animation.Animation;
import android.view.animation.AnimationUtils;
import android.widget.ImageView;
import android.widget.Toast;

public class MainActivity extends Activity {

private ImageView image01;

private long aefe;
private ImageView image1;
private ImageView image2;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    image01 = (ImageView) findViewById(R.id.imageView1);

    final Animation animTranslate1 = AnimationUtils.loadAnimation(this,
            R.anim.translate);

    image01.startAnimation(animTranslate1);

    image01.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View view) {

            Toast.makeText(MainActivity.this, "hello", Toast.LENGTH_SHORT)
                    .show();

        }
    });

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T19:29:26.063

在整个动画过程中，您的视图保持在旧位置（动画刚开始时的位置）。它只是画在另一个地方。动画结束后，您必须移动动画视图：

为您的动画注册一个监听器。 [http://developer.android.com/reference/android/view/animation/Animation.AnimationListener.html](http://developer.android.com/reference/android/view/animation/Animation.AnimationListener.html)

在 onAnimationEnd 实现中，修改 Activity 的布局，使其类似于动画的最终状态/布局。

**评论后更新：**

我看到这样做的唯一方法是在 Java 代码中创建自己的自定义动画并实现自定义动画的“受保护的 void applyTransformation(float interpolatedTime, Transformation t)”方法。例如，在我们的应用程序中，我们有一个动画，它实际上**移动**了一个视图，而不是仅仅在不同的位置**绘制**它。例如，下面是一个增加或减少视图实际高度的动画示例：

```
public class ViewHeightAnimation extends Animation {
    private final View  view;
    private final float diffHeight;
    private final int   startHeight;

    public ViewHeightAnimation(View view, float diffHeight, int startHeight) {
        this.view = view;
        this.diffHeight = diffHeight;
        this.startHeight = startHeight;

        setDuration(200);
        setInterpolator(new AccelerateDecelerateInterpolator());
    }

    @Override
    protected void applyTransformation(float interpolatedTime, Transformation t) {
        android.view.ViewGroup.MarginLayoutParams layoutParams = (android.view.ViewGroup.MarginLayoutParams)view.getLayoutParams();
        layoutParams.height = Math.round(startHeight + (diffHeight * interpolatedTime));
        view.setLayoutParams(layoutParams);
    }

    @Override
    public boolean willChangeBounds() {
        return true;
    }
} 
```

您的动画会有所不同，但也会使用“getLayoutParams()”和“setLayoutParams()”来修改视图（ImageView）的位置并适当地更改 layoutParams.topMargin 和 layoutParams.leftMargin。

如果您不关心 Android 2.x 或更低版本，使用 ObjectAnimator（3.0 或更高版本）或 ViewPropertyAnimator（3.1 或更高版本）是更好的解决方案，如前面其他答案中所述。

让我知道这是否对您有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T19:23:45.140

试试这样：

```
final Animation animTranslate1 = AnimationUtils.loadAnimation(this,R.anim.translate);
animTranslate1.setFillAfter(true);
image01.startAnimation(animTranslate1); 
```

如果这不起作用，那么您将不得不使用较新的 Property Animation 框架（在您之前重复问题的答案中已指出）

[看这里了解它](http://developer.android.com/guide/topics/graphics/prop-animation.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T21:30:51.267

您为 imageView 设置动画的方式只是移动其外观，因此实际上您的 imageView 仍处于旧位置。使用这种类型的动画，没有一种简单的方法可以做你想做的事。您应该考虑使用[ObjectAnimators](http://developer.android.com/reference/android/animation/ObjectAnimator.html) ...

# mysql - 查询获取最新培训日期

> ID：14881578
> 
> 赞同：1
> 
> 时间：2013-02-14T18:27:37.153
> 
> 标签：mysql

我们有 2 张桌子，一张是包含所有驱动程序详细信息的驱动程序，桌子是 dTraining。

驱动程序的结构是

```
CREATE TABLE IF NOT EXISTS `driver` (
  `driverID` int(5) NOT NULL,
  `clientID` int(5) NOT NULL,
  `driverName` varchar(100) NOT NULL,
  `driverDateOfBirth` date NOT NULL,  
  `driverStatus` enum('a','d','i') NOT NULL DEFAULT 'a'
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

dTraining 的结构是

```
CREATE TABLE IF NOT EXISTS `dTraining` (
  `dTrainingID` int(5) NOT NULL,
  `cTrainingID` int(5) NOT NULL,
  `trainingID` int(11) NOT NULL,
  `driverID` int(5) NOT NULL,
  `clientID` int(5) NOT NULL,
  `driverTrainingDate` date NOT NULL,
  `driverTrainingUpdateStatus` enum('d','a') NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

我需要的是，当我运行这样的查询时，应该从驾驶员拥有的许多训练数据中给出最新的训练。所以我需要关于如何在那里运行子查询的帮助。

```
SELECT driver.driverID,dTraining.driverTrainingDate
 FROM   driver,dTraining 
```

目前我有这个查询。样本输出将是

```
driverID=1 , driverTrainingDate=2013-02-01
driverID=2 , driverTrainingDate=2013-02-02

SELECT driver.driverID,b.driverTrainingDate
 FROM   driver
             LEFT JOIN (
  SELECT B1.*
                      FROM   dTraining AS B1
                             LEFT JOIN  dTraining AS B2
                                    ON B1.driverID = B2.driverID
                                       AND B1.cTrainingID = B2.cTrainingID 
                                       AND B1.driverTrainingDate< B2.driverTrainingDate
                      WHERE B1.cTrainingID =".$cTID." And B2.driverID IS NULL) as b
ON ( driver.driverID= b.driverID) 
```

我很好奇为什么我们需要放置 B1.driverTrainingDate< B2.driverTrainingDate 而不是 B1.driverTrainingDate> B2.driverTrainingDate 并且需要 B2.driverID IS NULL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T18:35:55.237

与 B2 的左连接返回在 B1 之后发生的训练，这就是为什么如果不存在 ( `B2.driverID is null`) 你确定 B1 的训练是最后一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T21:01:39.070

试试这个，更改`'123'`驱动程序ID：

```
select d.*,t.* 
from driver as d
inner join dtraining as t
on d.driverId=t.driverId
where d.driverid in (1,2,3,4.......10000)
order by t.driverTrainingDate desc
limit 1 
```

# c - 如何在 Linux 内核中创建多个僵尸？

> ID：14881584
> 
> 赞同：0
> 
> 时间：2013-02-14T18:27:47.463
> 
> 标签：c, zombie-process

我正在为类编写一个项目，该项目可以在 Linux 内核中找到僵尸并收获它们。

我找到了会创建一个僵尸的代码，它在等待（）之后被收割，但我的程序必须收割很多，大约 1000 个。

我对内核操作/多线程非常陌生，我在网上找到的处理僵尸的资源要么过于技术化，要么含糊不清。

这是我正在使用的代码：

```
 pid_t child_pid;

      child_pid = fork ();
      if (child_pid > 0) {
          sleep (60);
      } else {
          exit (0);
      } 
```

再一次，我的问题是：我应该如何去创建多个僵尸，让我的程序收获？

非常感谢-贾里德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T18:38:10.587

僵尸只不过是一个终止的进程，它的父进程没有读取他的退出状态（简而言之：父进程在子进程退出`wait()`后没有调用）并保持内存和资源繁忙。

为了实现你需要的只是 fork 很多进程（例如使用循环）并且从不调用`wait()`

# java - 如何在 SQL Server 2012 中的 binary(1) 字段中查询或插入一个值？

> ID：14881588
> 
> 赞同：1
> 
> 时间：2013-02-14T18:27:53.673
> 
> 标签：java, sql, sql-server, binary, sql-server-2012

我已经尝试谷歌搜索了一段时间，但找不到任何东西，但如果这真的很明显，我深表歉意。

我有一个长度始终为 8 的布尔数组，我想将相应的二进制值插入到`binary(1)`字段中。我正在使用 SQL Server 2012。

目前我将它转换成一个字符串，例如`"10100101"`，并创建一个看起来像的查询字符串`"INSERT INTO Table1 VALUES('10100101');"`也一直在尝试获得一个`SELECT`等效的语句`"SELECT * FROM Table1 WHERE bin_val=10100101;"`

当我执行语句时，我总是遇到语法错误。我尝试了多种变体（例如，带/不带引号等，并将数字以不同的格式，例如`"0xA5"`），但没有运气。

有什么建议么？

ps用java写代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T18:57:28.090

首先，您需要将基于二进制的数字转换为基于十进制的数字。然后，您可以简单地将该值转换为 datatype `BINARY`。所以，假设你的字符串总是 8 位长，你可以试试这个：

```
DECLARE @BinaryNumber CHAR(8)
SET @BinaryNumber = '10100101'
INSERT INTO Table1
SELECT  CAST(SUBSTRING(@BinaryNumber,8,1)+
             SUBSTRING(@BinaryNumber,7,1)*2+
             SUBSTRING(@BinaryNumber,6,1)*4+
             SUBSTRING(@BinaryNumber,5,1)*8+
             SUBSTRING(@BinaryNumber,4,1)*16+
             SUBSTRING(@BinaryNumber,3,1)*32+
             SUBSTRING(@BinaryNumber,2,1)*64+
             SUBSTRING(@BinaryNumber,1,1)*128 AS BINARY(1)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T18:39:32.000

我没有在 SQL Server 上工作过，但我认为你需要类似的东西

```
INSERT INTO Table1 VALUES( CAST(10100101  AS BINARY(1)) ); 
```

更多信息在这里
[http://msdn.microsoft.com/en-us/library/ms188362.aspx](http://msdn.microsoft.com/en-us/library/ms188362.aspx)

# html - 无序列表图像出现在文本的起始位置？

> ID：14881593
> 
> 赞同：2
> 
> 时间：2013-02-14T18:27:56.743
> 
> 标签：html, css

我正在使用精灵图像为无序列表制作项目符号。它工作正常，但该图像显示略高于文本的起始位置。文本和图像应该在同一行。我怎样才能做到这一点？

```
body
    {
        font-family:Arial;
        font-size:16px;
    }
    div
    {
        width:30%;
        float:left;

    }
    .bullet {
        list-style-type: none;
        margin:0; 
        padding:0;
    }

    .magenta li 
    {
        background-image: url(images/css-sprite.png);
        background-repeat:no-repeat;
        padding-left:20px;
        background-position: 0px -2036px;

    } 
```

和html

```
<div>
    <p>Magenta</p>
    <ul class="magenta bullet">
        <li>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec nulla sapien, varius id dignissim sit amet, luctus elementum nulla. Mauris hendrerit tincidunt nunc condimentum accumsan. Donec semper hendrerit ligula non blandit. Nullam tellus lacus, dictum quis sodales id, consectetur posuere nunc. Maecenas massa nibh, sagittis quis hendrerit ornare, interdum sit amet tellus. Proin lectus neque, posuere at interdum vitae, eleifend id dui. Mauris eget eros magna, sed gravida quam.
        </li>
        <li>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec nulla sapien, varius id dignissim sit amet, luctus elementum nulla. Mauris hendrerit tincidunt nunc condimentum accumsan. Donec semper hendrerit ligula non blandit. Nullam tellus lacus, dictum quis sodales id, consectetur posuere nunc. Maecenas massa nibh, sagittis quis hendrerit ornare, interdum sit amet tellus. Proin lectus neque, posuere at interdum vitae, eleifend id dui. Mauris eget eros magna, sed gravida quam. 
        </li>

    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T18:32:17.213

使您的容器与背景图像部分的高度相同。然后您可以使用 line-height 来对齐您的文本，使其与图像垂直居中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T18:43:37.973

用 sprite 实现这一点非常困难。如果图像是单独的，那么明显的解决方案是：

```
.magenta li { background-position: 0 50%; } 
```

但是，如果您打算保留精灵，我鼓励您实际包含另一个元素来显示图像：

```
<li>
    <em></em>
    <span>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec nulla sapien, varius id dignissim sit amet, luctus elementum nulla. Mauris hendrerit tincidunt nunc condimentum accumsan. Donec semper hendrerit ligula non blandit. Nullam tellus lacus, dictum quis sodales id, consectetur posuere nunc. Maecenas massa nibh, sagittis quis hendrerit ornare, interdum sit amet tellus. Proin lectus neque, posuere at interdum vitae, eleifend id dui. Mauris eget eros magna, sed gravida quam.</span>
</li> 
```

然后你可以使用绝对定位：

```
.bullet li {
    position: relative;
    padding: 0 0 25px; }
.bullet em {
    background: url(images/css-sprite.png) 0px -2036px no-repeat;
    position: absolute;
    top: 50%;
    left: 0;
    width: 20px;
    height: 20px;
    margin: -10px 0 0; } 
```

[http://jsfiddle.net/BeCQy/](http://jsfiddle.net/BeCQy/)

# php - 在类中使用标题

> ID：14881594
> 
> 赞同：0
> 
> 时间：2013-02-14T18:28:03.127
> 
> 标签：php

我在包含的类 Environment 中访问一个函数，该函数可以引发一个警报，该警报需要将用户引导回包含一些错误信息的页面。什么是我引用页面的最佳方式，以便在我从任何地方访问该功能的任何地方都可以使用它？

有没有更好的方法来做我想做的事情？

```
public function checkEnvironment() {

        try {

            // If status is false
            if (!$this->getStatus()) {

                // Generate a new special exception with code
                throw new Alert(6);

            } else {

                $connection = Gateway::checkInstance();

                return $connection->getData('SELECT * FROM control_environment WHERE subdomain = ?', array($this->subdomain[0]));

            }

        } catch (Alert $alert) {

            $_SESSION['error'] = $alert->getData();

            if (!headers_sent()) {

                header('Location: my/file/here.php');

                exit;
            }

        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T18:36:33.153

你严重滥用异常。绝对没有理由将单个 if 语句放在一个`try`块中，它只能抛出*一种*类型的异常，该异常保证在该块之后立即被捕获。除了混乱之外，您没有在代码中添加任何内容，与简单地执行 if/else 没有异常/捕获相比，这样做实际上没有任何优势。

异常的意义在于您将它们抛出*当前范围之外*，到某个可以以有意义的方式实际处理它们的地方。

选择一个*真正的*异常类，它可以传达有关已发生错误的信息。`Alert(6)`不告诉任何人任何事情。然后，在此之上处理该（可能还有许多其他）异常，您可以更加确定重定向是正确的操作过程。您的低级*数据库*代码不应包含*任何*浏览器或 http 或重定向的概念。

`else`当分支的目的`if`是引发异常时，您的代码也不应该有分支。`else`是多余的。

整个函数应该是这样的。

```
public function checkEnvironment() {

  if (!$this->getStatus())
    // Generate a new special exception with code
    throw new StatusException;

  $connection = Gateway::checkInstance();
  return $connection->getData('SELECT * FROM control_environment WHERE subdomain = ?', array($this->subdomain[0]));

} 
```

# grails - 在 Groovy 中覆盖比较运算符

> ID：14881600
> 
> 赞同：3
> 
> 时间：2013-02-14T18:28:23.143
> 
> 标签：grails, groovy, operator-overloading

我想在 Groovy 中覆盖 >= 运算符，找到[了这个](http://groovy.codehaus.org/Operator+Overloading)页面，但我仍然不知道该怎么做。我有一个具有序列和金额属性的钞票类，我希望基于金额属性实现比较。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T18:39:07.923

您不会覆盖`>=`运算符，而是实现`compareTo`：

```
class Foo implements Comparable {
  int val
  int compareTo(Object o) { return val <=> ((Foo) o).val }
}

f1 = new Foo(val: 5)
f2 = new Foo(val: 10)
println f1 <= f2
=> true 
```

# java - 为什么我必须投射一个按钮？

> ID：14881606
> 
> 赞同：1
> 
> 时间：2013-02-14T18:28:40.713
> 
> 标签：java, android, button, view, casting

这一定是一个非常愚蠢的问题，因为我无法在网上找到答案......我知道强制转换正在将一种数据类型更改为另一种数据类型。这个按钮如何改变它的数据类型？`Button button = (Button)findViewById(R.Bla.Bla)`为什么我们不能只写`Button button = New Button()`然后以另一种方式将xml分配给它？请解释一下，我迷路了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T18:31:49.520

您*可以*将 a 设置`Button`为新按钮。

但`findViewById`返回一个视图。如果你想访问它的任何`Button`osity，你必须强制转换，否则引用不是一个按钮。当然，有时可能还可以。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-14T18:49:24.983

**请参阅在 Android 中您可以通过两种方式创建 UI 元素：**

**1\. 通过 layouts (.xml) 文件创建 UI 元素。** 并在 java 类中使用它们，将它们映射到相应的类。为此，我们必须调用方法 findViewById(int id); 它返回具有给定 id 的 perticuler 元素的视图。因此我们必须将其类型转换为相应的组件。因此，如果您已经在 xml 中创建了一个元素，为什么还要在 java 端再次创建一个不同的对象。所以只需映射使用 xml 文件创建的元素。

**2.通过java端创建UI元素。** 要使用此功能，必须使用新关键字 ex 在 java 中创建元素。按钮按钮 = 新按钮（）；然后设置该对象的所有属性。

**But But But 但是，** 根据android的哲学，你应该在xml中创建UI，并在java端编写你的核心业务逻辑。有了这个概念，您可以编写干净整洁的应用程序代码。但这只是建议，根本不是强制性的。现在由你决定……我认为一开始你会感觉到它不同，但一段时间后你会开始喜欢它……

这就是安卓的魅力。

谢谢。我希望，我彻底回答了你的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-14T18:38:05.177

另外，请记住这`Button`是`View`. 该`findViewById()`方法返回一个泛型（您放在布局文件中的`View`任何`View`或子类）。`View`演员`Button`说“没关系 - 我知道这是一个按钮，而不仅仅是一个常规视图”，它允许您访问超类`Button`中不可用的属性和方法`View`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-14T18:38:34.553

`final Button callButton = (Button) findViewById(R.id.callButton);`

我相信，当使用 查找 XML 视图时`findViewbyId()`，它会返回 UI 中的视图，但必须转换返回的视图才能*在*Java 代码中用作按钮，并且可以访问*按钮方法*。

有一些方法可以在 Java 代码中创建一个按钮，而无需在 XML 中指定它，但这种做法将 UI 与逻辑区分开来。

另外，在 XML 中声明 UI 元素会更好，因为它可以通过使用`setContentView()`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-14T18:34:38.413

`View`您有两个选项可以在 android中创建组件，包括`Button`

1-在`layout`XML 文件中定义它并使用`(Button) findViewById(R.id.button)`

2-在代码中动态创建它，例如`Button button = new Button();`

两者都有自己的优点和缺点，例如，`UI`在`layout`xml 中定义使您更简洁，并通过将实际代码与实际代码`Activity`分开来为您提供更大的灵活性`UI`

动态`UI`创建在许多需要动态创建的应用程序中很有`Views` **用**

# java - 做一个Android静音模式应用程序，甚至无法启动主活动？

> ID：14881610
> 
> 赞同：0
> 
> 时间：2013-02-14T18:28:52.203
> 
> 标签：java, android, eclipse, galaxy

我正在使用 Donn Felker 的 Android Application Development for Dummies 一书。具体来说，我正在使用静音模式应用程序。

逐步按照说明进行操作应该很简单，但事实证明我什至无法在不使应用程序崩溃的情况下启动主要活动。我一定已经检查了我的代码十几次，但我仍然无法找出问题所在，并让它在没有 LogCat 疯狂触发错误的情况下工作。

调试设备是带有 Android 4.0.3 的三星 Galaxy SII。

这是 MainAcitivity 类

```
public class MainActivity extends Activity {

Button m_toggleButton = (Button)findViewById(R.id.toggleButton);
AudioManager m_audio = (AudioManager)getSystemService(AUDIO_SERVICE);
boolean m_isPhoneSilent;

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    checkMode();
    toggleImage();
    generateClick();
}

@Override
protected void onResume()
{
    super.onResume();
    checkMode();
    toggleImage();
}
@Override
public boolean onCreateOptionsMenu(Menu menu) 
{
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;

}

private void checkMode()
{
    m_audio = (AudioManager)getSystemService(Context.AUDIO_SERVICE);
    switch(m_audio.getRingerMode())
    {
        case AudioManager.RINGER_MODE_NORMAL:
            m_isPhoneSilent = false;
            break;
        case AudioManager.RINGER_MODE_SILENT:
            m_isPhoneSilent = true;
            break;
    }

}

private void generateClick()
{
    m_toggleButton.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) 
        {
            if (m_isPhoneSilent == true)
                {
                    m_audio.setRingerMode
                    (AudioManager.RINGER_MODE_NORMAL);
                    m_isPhoneSilent = false;
                }
            else
                {
                    m_audio.setRingerMode
                    (AudioManager.RINGER_MODE_SILENT);
                    m_isPhoneSilent = true;
                }
            toggleImage();
        }
    });
}

private void toggleImage()
{
    ImageView imageView = (ImageView) findViewById(R.id.phone_icon);
    Drawable newAsset;

    if (m_isPhoneSilent == true)
    {
        newAsset = getResources().getDrawable(R.drawable.phone_silent);
    }
    else
    {
        newAsset = getResources().getDrawable(R.drawable.phone_on);
    }

    imageView.setImageDrawable(newAsset);

} 
```

我试过调试，但我没有发现问题。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T18:32:30.280

```
public class MainActivity extends Activity {

Button m_toggleButton = (Button)findViewById(R.id.toggleButton); //<<<< here
//....your code 
```

您试图在为 Activity 设置布局之前找到 Button ，因此在设置`setContentView`为之后移动它：

```
public class MainActivity extends Activity {

Button m_toggleButton ;
AudioManager m_audio;
boolean m_isPhoneSilent;

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
     m_toggleButton = (Button)findViewById(R.id.toggleButton);
    m_audio = (AudioManager)getSystemService(AUDIO_SERVICE);
   ///... your code here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T18:32:52.960

你不能这样称呼

```
Button m_toggleButton = (Button)findViewById(R.id.toggleButton);
AudioManager m_audio = (AudioManager)getSystemService(AUDIO_SERVICE); 
```

在您`setContentView`将其更改为之前：

```
Button m_;
AudioManager m_audio;
boolean m_isPhoneSilent;

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    m_toggleButton = (Button)findViewById(R.id.toggleButton);
    m_audio = (AudioManager)getSystemService(AUDIO_SERVICE);
    .... 
```

# java - 哪个基于代理的 Java 框架更可取？

> ID：14881612
> 
> 赞同：-3
> 
> 时间：2013-02-14T18:29:00.040
> 
> 标签：java, javaagents, agents-jade

我正在研究基于代理的 Java 框架，并且想要一个简单且易于实现的框架。谷歌搜索发现了玉、韦德和 jac。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T18:44:24.223

我只有 Jade 的经验，它是一个强大的基于代理的框架，具有良好的用户界面，并且有活跃的社区使用和维护它。

从网站描述来看，Wade 似乎是 Jade 之上的一个支持 Workflows 的层，因此它不是替代品，而是补充品。

另外，看看[Jadex](http://www.activecomponents.org)，它实现了比 Jade 更先进的概念，例如精神上的，但在某种程度上仍然与 Jade 兼容。

# android - Android 对象层

> ID：14881613
> 
> 赞同：0
> 
> 时间：2013-02-14T18:29:01.780
> 
> 标签：android

我目前正在开发一个应用程序，人们可以在其中将对象放置在 SurfaceView 中——图像等，他们可以调整它的大小等等。现在我有一个用例，有人可以将其放置在类似图像的框架中——可以说它是一个中心为透明的方形图像。现在他们可以设置一个可以进入这个框架的图像，并且仅限于该框架的边界，并且他们可以从那里随意调整它的大小。有人做这样的实现吗？请注意，这与帧全屏时不同，这很容易做到。请参阅下面的示例：

![在此处输入图像描述](../Images/51274eae3872b31e45ae627f8f3f253d.png)

绿色是 SurfaceView 的主要背景区域，他添加了栗色/红色框架，现在他将图片设置为进入框架（这都在同一个表面内）。这一次的主要区别在于，当他在这里调整/移动图像时，它应该以红色框为界（他不会看到它在外面重叠，如下图所示）。任何人都有经验如何在Android上做到这一点。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T18:58:52.533

使用[`clipRect()`](http://developer.android.com/reference/android/graphics/Canvas.html#clipRect%28android.graphics.Rect%29)画布的方法。您可以在绘制要构图的图像之前为其提供一个指定框架的矩形。像这样的东西应该工作：

首先，在移动框架时，您需要有一个相应的[`Rect`](http://developer.android.com/reference/android/graphics/Rect.html)：

```
myRect.set(frameleft, frametop, frameright, framebottom); 
```

在你的`onDraw()`你用这个矩形剪辑图片：

```
canvas.save(Canvas.CLIP_SAVE_FLAG);
canvas.clipRect(pictureRect);
canvas.drawBitmap(/*your drawing parameters for the image*/);
canvas.restore(); //Restore to drawing the entire canvas 
```

# assembly - 数组输入、输出

> ID：14881614
> 
> 赞同：0
> 
> 时间：2013-02-14T18:29:06.117
> 
> 标签：assembly, assemblies, nasm

我的程序将使用数组从用户那里获取数字作为输入，并将在监视器上打印数字。所以期待我的程序的输入和输出如下：

```
 i/p: 1 2 3 4 
    o/p: 1 2 3 4 
```

但我的程序以这种方式给出输出，不包括数字：

```
 o/p: 4 3 2 
```

我的程序如下：

```
 section .data
       msg db "%d"
       four dd 4
       msga db "%d",10,0
   section .bss
       arr resd 4
   section .text
       global main
      extern printf,scanf
   main:
      xor ecx,ecx
   lp:
      mov ebx,arr
      mov eax,ecx
      mul dword[four]
      add ebx,eax
      pusha

      push ebx
      push msg
      call scanf
      add esp,8
      popa
      inc ecx
      cmp ecx,4
      jnz lp

      mov ecx,3
 lp1:
      mov ebx,arr
      mov eax,ecx

      mul dword[four]
      add ebx,eax
      pusha
          push dword[ebx]
      push msga
      call printf
      add esp,8
      popa
          dec ecx
      jg lp1 
```

你会在这个节目中给我建议吗？我提前使用了 ubuntu 11.04 Thanx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T18:36:27.137

在第一个循环中，`ecx`从 0 变为 4：

```
 xor ecx,ecx ;;; ecx <= 0
lp:
 ...
 inc ecx ;;; ecx <= ecx + 1
 cmp ecx, 4
 jnz lp ;;;  if (ecx!=4) goto lp; 
```

在第二个循环中，`ecx`从 3 变为 0，但*不包括*0：

```
 xor ecx, ecx ;;; ecx <= 0, useless here
 mov ecx, 3   ;;; ecx <= 3, overwrites 0
lp1:
 ...
 loop lp1     ;;; ecx <= ecx-1; if (ecx>0) goto lp1; 
```

如果您想以相同的顺序打印相同的数组，您可以重新组织第二个循环以使其与第一个循环完全相同。只需将我在此处*引用的第二个循环中的内容替换为**第一个*循环的相应部分即可。

# asp.net-mvc - 如何在 MVC 中使用 web.config 强制特定的 uiculture

> ID：14881615
> 
> 赞同：0
> 
> 时间：2013-02-14T18:29:14.737
> 
> 标签：asp.net-mvc, localization, web-config

我已将 Resource.fr-FR.resx 添加到我的项目中，并在 web.config 中完成了如下全球化设置。

```
<system.web>
    <globalization culture="fr-FR" uiCulture="fr"/>
</system.web> 
```

根据[http://msdn.microsoft.com/en-us/library/bz9tc508%28v=vs.80%29.aspx这就是你所需要的](http://msdn.microsoft.com/en-us/library/bz9tc508%28v=vs.80%29.aspx)

但是当我运行我的应用程序时它仍然是英文的

我在 Application_Start() 中检查了“Thread.CurrentThread.CurrentUICulture”，上面写着 FR。

我错过了什么？同样的事情已经发布在 [MVC 3 Setting uiCulture does not work](https://stackoverflow.com/questions/14361709/mvc-3-setting-uiculture-does-not-work)

但没有答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T09:49:27.733

文化与语言不同。“文化”是一组日期/时间、货币、日历和其他一些东西（如文本标题大小写规则）的格式规则。

设置文化不会自动本地化您的应用程序（本地化是将所有人类可读的字符串翻译成另一种语言，例如法语）。本地化和 UI 翻译是一个漫长、痛苦和昂贵的过程。ASP.NET 不会为您做这件事。

如果您想本地化您的应用程序，您需要确保所有人类可读的字符串都存储在资源文件（.NET 中的 .resx）中，并且您已经创建了包含其他语言的翻译字符串的“卫星程序集”。然后，您需要确保在您的应用程序中向用户显示的任何字符串都使用资源 API（或 IDE 生成的帮助程序类）。这很痛苦，因为这意味着在您的 *.aspx 文件中从此开始......

```
<p>Hello, welcome. This is in English.</p> 
```

...对此：

```
<p><%= Resources.WelcomeMessage %></p> 
```

...或者这个（如果你有太多的字符串需要由 Resources 帮助类管理）：

```
<p><%= ResourceManager.GetString("HomePage_WelcomeMessage") %></p> 
```

...当然，这样做会破坏您网站的任何视觉设计师，例如。

# c# - “索引和长度必须引用字符串中的位置”错误

> ID：14881617
> 
> 赞同：-2
> 
> 时间：2013-02-14T18:29:16.607
> 
> 标签：c#, string, indexing

我正在尝试提取字符串的前 200 个单词，有时会出现以下错误：

```
"Index and length must refer to a location within the string. Parameter name: length" 
```

代码是：

```
int i = GetIndex(fullarticle, 200);
string result = fullarticle.Substring(0, i); 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-06-17T15:00:41.820

它超出范围，因为您的字符串短于 200 个字符

为了补救，您可以使用`Math.Min`它将选择字符串长度和 200 之间的较低值。

```
fullarticle.Substring(0, Math.Min(fullarticle.Length, 200)); 
```

希望这可以节省您一些时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T18:31:49.277

这可能是因为字符串中的单词少于 200 个，并且可能来自`GetIndex`返回的值`i`大于`fullarticle`. 作为错误的一个例子

```
"s".Substring(0,2) 
```

投掷

> ArgumentOutOfRangeException：索引和长度必须引用字符串中的位置。参数名称：长度

如果您的意图是获取字符串中的前 200 个单词，则需要检查

1.  字符串不为空
2.  字符串中的单词数；如果少于 200 字，那应该是您的最大索引，否则使用 200。
3.  基于 2 的子字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T18:52:39.980

假设错误来自[string.Substring](http://msdn.microsoft.com/en-us/library/aka44szs.aspx)似乎是安全的。假设您在`startIndex + length > given.Length`or`startIndex < 0`或`length < 0`,`GetIndex`返回大于`fullarticle.Length`或负数的值时收到此错误。存在错误，`GetIndex`因此如果您希望继续使用您拥有的代码，您应该发布代码`GetIndex`以获得最佳答案。

如果你想要不同的东西，你可以试试这个：

```
static string GetShortIntroduction(string phrase, int words)
{
    // simple word count assuming spaces represent word boundaries
    return string.Join(" ", phrase.Split().Take(words));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T18:31:17.223

看起来 i 大于整个全文长度。检查您的 GetIndex 函数。

# javascript - 刷新表信息而不是追加

> ID：14881618
> 
> 赞同：1
> 
> 时间：2013-02-14T18:29:22.893
> 
> 标签：javascript, jquery, node.js, tablesorter

我会自己解释 jquery 插件的功能，但网站肯定比我做得更好，在大多数情况下，它似乎是一个非常简单的插件

[http://tablesorter.com/docs/](http://tablesorter.com/docs/)

我正在使用此插件在生成表后对其进行过滤，效果很好。问题是表是实时更新的，在过滤表后，如果收到新的更新，然后再次过滤表，数据就会重复。

我一直在研究它，似乎该插件建立了一个信息缓存，允许过滤数据。

我想要做的是删除缓存并在每次有更新时重建它，防止重复信息被附加到表数组中。

客户端javascript：

```
function appendTables(appendData, index) {
var tabPage = "#tabpage_"+index+" > #myJobs_"+index+" > .userJobs";
userJobsElement = $(tabPage);

userJobsElement.empty();
userJobsElement.append(appendData);
applySortTable();
} 
```

这部分使用动态 id 生成多个表以及 2 个标准表：

```
function applySortTable() {
var tables = $('table');
tableCount = tables.length-2;
$("#myJobs_all").tablesorter();
$("#myJobs_noteam").tablesorter();
for (var i = 0; i < tableCount; i++){
 $("#myJobs_"+ i).tablesorter();
} 
```

然后使用插件生成表，正如我所说的创建缓存，有没有人知道如何清除缓存，然后在用户发生这种情况时重建它？

* * *

更新

现在正在更新数据，但目前我们已经设置了一个基于标签的表格系统来查看不同的团队信息。处理更新时，该表仅在第一个表中更新，其他表停止工作，有人知道如何处理吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T00:04:31.290

重新初始化 tablesorter 插件不是正确的方法。添加新内容后，只需触发更新方法：

```
$("table tbody")
    .append(appendData)
    .trigger('update'); // this event will bubble up 
```

查看[此演示](http://tablesorter.com/docs/example-empty-table.html)的代码示例

# ruby - 如何让小马设置正确的信封发件人？

> ID：14881622
> 
> 赞同：1
> 
> 时间：2013-02-14T18:29:35.680
> 
> 标签：ruby, pony

我正在使用 Ruby 和 Pony 来发送电子邮件。我似乎无法将信封发件人更改为我想要的；Pony 中的某些东西或它下面的代码总是替换**user_name**参数。

对此有什么建议吗？**我可以通过使用header**参数在电子邮件地址前面获得一个文本名称，例如“Network Ops” ，但实际的电子邮件地址仍然不正确。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T20:30:14.843

没关系——这是重写发件人信封的 Gmail SMTP 守护程序。我对另一台（Qmail）服务器进行了测试，但没有发生这种情况。

小马太棒了！

# google-app-engine - 转义 cookie 中的字符

> ID：14881624
> 
> 赞同：1
> 
> 时间：2013-02-14T18:29:44.987
> 
> 标签：google-app-engine, cookies, python-2.7, escaping

这是我的代码：

```
import webapp2
class Index(webapp2.RequestHandler):
    def get_cookie(self, name, notfound=""):
        return self.request.cookies.get(name, notfound)
    def get(self):
        self.response.headers['Content-Type'] = 'text/plain'
        self.response.headers.add_header('Set-Cookie', "Foo=Hello World!")
        self.response.headers.add_header('Set-Cookie', "Bar=With, Commas")

        txt1 = self.get_cookie("Foo", "Foo cookie not found!")
        txt2 = self.get_cookie("Bar", "Bar cookie not found!")

        self.response.out.write(txt1 + " " + txt2)

app = webapp2.WSGIApplication([('/', Index)], debug=True) 
```

代码会输出，但是输出有问题...

![在此处输入图像描述](../Images/283a5361b2c92d679874d819f1f8a070.png)

浏览器甚至不转义空格......我应该怎么做才能正确显示 cookie 值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T18:41:15.067

您想改用响应[`.set_cookie()`方法](http://webapp-improved.appspot.com/guide/response.html#guide-response-setting-cookies)：

```
def get(self):
    self.response.headers['Content-Type'] = 'text/plain'

    self.response.set_cookie('Foo', 'Hello World!)
    self.response.set_cookie('Foo', 'With, Commas') 
```

它负责适当的转义等。

# c# - 使用 MAPI 从服务访问 Exchange Server

> ID：14881631
> 
> 赞同：1
> 
> 时间：2013-02-14T18:30:08.660
> 
> 标签：c#, exchange-server, mapi, outlook-object-model

我的任务是构建一个使用 MAPI 检查电子邮件的应用程序。我使用了一个用 cpp 编码的[包装类](http://www.codeproject.com/Articles/10881/MAPIEx-Extended-MAPI-Wrapper)，它可以从 c# 访问。我意识到结合托管代码和非托管代码不一定是最佳途径，但这是我可以开始工作的。

让它工作后，我被要求将应用程序设为服务，以便在系统未登录时运行它。

客户端要求我们使用 MAPI，并且正在使用 Outlook 2007，但我希望它与 x86 和 x64 架构兼容。将允许在多个工作站上运行的单独程序使用单个电子邮件地址发送邮件。该服务将监视此帐户，并监视来自 Exchange 的新电子邮件，称无法传递消息。发生这种情况时，它将在数据库中做一个注释以供将来更正。

我对扩展 MAPI 工作原理的理解是，它使用登录者的配置文件来访问 Exchange Server。我的问题是，当没有人登录系统时，是否可以通过 MAPI 访问 Exchange Server？如果这不可能，OOM 是否允许在没有用户登录时访问特定的电子邮件帐户（或配置文件）？当主要使用 c# 时，一种方法会比另一种更好吗？

下面是包装类如何登录的简要示例。我添加了第二种方法，但从未让它登录到当前用户的配置文件以外的配置文件。

```
BOOL CMAPIEx::Login(LPCTSTR szProfileName, BOOL bInitAsService)
{
    DWORD dwFlags=MAPI_EXTENDED | MAPI_USE_DEFAULT | MAPI_NEW_SESSION;
    if(bInitAsService) dwFlags|=MAPI_EXPLICIT_PROFILE | MAPI_NT_SERVICE;
    return (MAPILogonEx(NULL, (LPTSTR)szProfileName, NULL, dwFlags, &m_pSession)==S_OK);
}

BOOL CMAPIEx::Login(LPCTSTR szProfileName, LPCTSTR szProfilePassword, BOOL bInitAsService)
{
    DWORD dwFlags=MAPI_EXTENDED | MAPI_EXPLICIT_PROFILE  | MAPI_NEW_SESSION;
    if(bInitAsService) 
        dwFlags|= MAPI_NT_SERVICE;
    return (MAPILogonEx(NULL, (LPTSTR)szProfileName, (LPTSTR)szProfilePassword, dwFlags, &m_pSession)==S_OK);
} 
```

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T19:16:52.173

You can dynamically create a temporary profile with the MSEMS service and configure it.
See [http://support.microsoft.com/kb/306962?wa=wsignin1.0](http://support.microsoft.com/kb/306962?wa=wsignin1.0) and scroll to "Use the MAPI IProfAdmin interface"
Make sure the service runs under the identity of the mailbox owner.

# php - ajax 在文件中调用 php 代码并获取结果

> ID：14881637
> 
> 赞同：1
> 
> 时间：2013-02-14T18:30:33.097
> 
> 标签：php, ajax

我想从 ajax 调用的一些代码在一个单独的 file.php 中：

```
<?php
     session_start();
     $email1 = $_POST['email1'];
    //some code here processing $email1
     $response = 'some text';
?> 
```

这就是我从 ajax 调用它的方式：

```
$.ajax({ url: 'file.php',
    data: {email1: $("#user_email").val()},
    type: 'post'
       }); 
```

在调用 file.php 之后，我希望能够做这样的事情：

```
 alert($response); 
```

我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T18:32:09.613

在 ajax 调用中，包括一个成功.. 例如：

```
 success: function(data) {
        alert(data);
    }, 
```

这将在您的回复中弹出警报。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T18:32:20.027

尝试：

```
$.ajax({ url: 'file.php',
    data: {email1: $("#user_email").val()},
    type: 'post',
    success: function(data) { 
          alert(data);
    }
 }); 
```

查看[文档](http://api.jquery.com/jQuery.ajax/)

您还需要`echo`在 PHP 文件中输出响应：

```
echo $response; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-14T18:32:42.017

像这样的东西？

```
$.ajax({
  type: "POST",
  url: "file.php",
  data: {email1: $("#user_email").val()},
  success: function(data) {
      alert(data); 
  }
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-14T18:33:32.513

在您的 PHP 中，您必须回显`$response`，而在您的 JS 中，您必须像这样指定回调函数：

```
$.ajax({ 
    url: 'file.php',
    data: {
        email1: $("#user_email").val()
    },
    type: 'post',
    success: function(data) { 
        alert(data);
    }
}); 
```

# javascript - 结合使用 Google 路线和 Google 地方信息

> ID：14881641
> 
> 赞同：0
> 
> 时间：2013-02-14T18:30:57.433
> 
> 标签：javascript, google-maps-api-3

我尝试在我的网站上创建一个搜索栏，它将使用两个 Google API。

根据 Google API 文档，我编写了这段代码。

```
function calcRoute() {
    //Setting variables for Google Places API request   

    var start = 'starting point';
    var end = 'destination point';

    var service;
    var moscow = new google.maps.LatLng(55.749646,37.62368);
    var places = [];

    var request1 = {
        location: moscow,
        radius: '50000',
        query: start
    };

    var request2 = {
        location: moscow,
        radius: '50000',
        query: end
    };

    //Setting variables for Google Directions API

    var directionsDisplay;
    var directionsService = new google.maps.DirectionsService();

    //Executing Google Places request

    service = new google.maps.places.PlacesService();
    service.textSearch(request1, callback1);
    service.textSearch(request2, callback2);

    function callback1(results, status) {
    if (status == google.maps.places.PlacesServiceStatus.OK) {
        places[0] = results[0].formatted_address;
    } else {
        document.getElementById("directionsPanel").innerHTML = "<br/><b>Sorry, directions not found.</b><br/><br/>";
        return;
    }
}

function callback2(results, status) {
if (status == google.maps.places.PlacesServiceStatus.OK) {
    places[1] = results[1].formatted_address;

//Executing Google Directions request

    var request = {
    origin:places[0], 
    destination:places[1],
    travelMode: google.maps.DirectionsTravelMode.DRIVING
};

    directionsService.route(request, 

function(response, status) {
         if (status == google.maps.DirectionsStatus.OK) {

var myOptions = {
        zoom: 8,
        streetViewControl: false,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };    
directionsDisplay = new google.maps.DirectionsRenderer();
map = new google.maps.Map(document.getElementById("map_canvas2"), myOptions);
directionsDisplay.setMap(map);

    directionsDisplay.setDirections(response);
    directionsDisplay.setPanel(document.getElementById("directionsPanel"));
  }
  else
  {
  document.getElementById("directionsPanel").innerHTML = "<br/><b>Sorry, directions not found.</b><br/><br/>";
  };
});

 //End of Google Directions request

}
else
{
  document.getElementById("directionsPanel").innerHTML = "<br/><b>Sorry, directions not found.</b><br/><br/>";
  return;
}
}

//Closing calcRoute() function  

} 
```

这是 HTML

```
<html>
  <head>
    <link href="../images/style.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false&amp;libraries=places"></script>
    <script src="../scripts/map.js" type="text/javascript"></script>
  </head>
  <body onload="calcRoute();">
    <FORM NAME="joe">
      <INPUT TYPE="hidden" NAME="burns" />
    </FORM>
    <div id="external">
      <div id="wrap">
        <div id="header" align="center"><img src="../images/illustrations/header.gif" alt="Air Moscow" />
        </div>
        <div style="background:#CCDBE3; margin:0px 5px; float:left; width:736px; margin-bottom:10px;">
          <div style="background:#FFF; margin:15px; border:1px #999 solid;">
            <div id="directionsPanel"></div>
            <div style="float:right; width:370px; height:600px; border:2px solid #306B8E; margin:30px 10px 0px 10px;" id="map_canvas2">
            </div>
            <div style="clear:both; margin-bottom:50px;"></div>
          </div>
        </div>
      </div>
      <div id="footer">
      </div>
    </div>
  </body>
</html> 
```

当我测试它时，chrome js 控制台抛出“Uncaught TypeError: Cannot read property 'innerHTML' of undefined”。但是，两个 div 都已定义，并且它们的 id 中没有拼写错误。

我想我需要一个 API 密钥才能让 Google Places 工作。

除此之外，我还需要什么其他东西才能让这段代码正常工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T23:48:36.203

这对我有用。我认为这与您初始化事物的方式有关：

```
<script>
var map;
var places = [];
var service;
var bounds = new google.maps.LatLngBounds();
var directionsDisplay;
var directionsService = new google.maps.DirectionsService();
var moscow = new google.maps.LatLng(55.749646,37.62368);
var start = 'Kremlin';
var end = 'Hotel Peter';
var request1 = {
        location: moscow,
        radius: '50000',
        query: start
    };

var request2 = {
        location: moscow,
        radius: '50000',
        query: end
    };
function initialize() {
  directionsDisplay = new google.maps.DirectionsRenderer();
  var myOptions = {
        center: moscow,
        zoom: 15,
        streetViewControl: false,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };    
  map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
  directionsDisplay.setMap(map);
  service = new google.maps.places.PlacesService(map);
  directionsService = new google.maps.DirectionsService();
  directionsDisplay.setMap(map);
  calcRoute();
}

function calcRoute() {
   //Executing Google Places request
   service.textSearch(request1, callback1);
}

function callback1(results, status) {
 if (status == google.maps.places.PlacesServiceStatus.OK) {
    places[0] = results[0].geometry.location;
    map.setCenter(places[0]);
    var marker1= new google.maps.Marker({position: places[0], map:map});
    bounds.extend(places[0]);
    service.textSearch(request2, callback2);
  } else {
    document.getElementById("directionsPanel").innerHTML = "<br/><b>Sorry, directions not found.</b><br/>"+start+"<br/>";
    return;
  }
}

function callback2(results, status) {
  if (status == google.maps.places.PlacesServiceStatus.OK) {
    places[1] = results[0].geometry.location;
    bounds.extend(places[1]);
    map.fitBounds(bounds);
    var marker2= new google.maps.Marker({position: places[0], map:map});
    //Executing Google Directions request

    var request = {
      origin:places[0], 
      destination:places[1],
      travelMode: google.maps.DirectionsTravelMode.DRIVING
    };

    directionsService.route(request, function(response, status) {
      if (status == google.maps.DirectionsStatus.OK) {
        directionsDisplay = new google.maps.DirectionsRenderer();
        directionsDisplay.setMap(map);
        directionsDisplay.setPanel(document.getElementById("directionsPanel"));
        directionsDisplay.setDirections(response);
      }
      else
      {
        document.getElementById("directionsPanel").innerHTML = "<br/><b>Sorry, directions not found.</b><br/><br/>";
      };
    });
    //End of Google Directions request
  }
  else
  {
   document.getElementById("directionsPanel").innerHTML = "<br/><b>Sorry, directions not found.</b><br/>"+end+"<br/>";
   return;
  }
}
google.maps.event.addDomListener(window,'load',initialize);
</script> 
```

[工作示例](http://www.geocodezip.com/v3_simpleMap_directionsPlaces.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T16:00:08.353

最后，我发现了我犯的错误。

第一个错误。

创建*服务*对象时，我没有传递必要的参数*映射。*

 *```
//Before

service = new google.maps.places.PlacesService();

//After

var myOptions = {
zoom: 8,
streetViewControl: false,
mapTypeId: google.maps.MapTypeId.ROADMAP
};     

map = new google.maps.Map(document.getElementById("map_canvas2"), myOptions);

service =  new google.maps.places.PlacesService(map); 
```

第二个错误。

我在 CalcRoute() 函数中声明了所有变量，从而使其他函数无法访问它们。

所以，我不得不将它们声明为全局变量。

第三个错误。

我一次向 Google Places API 发出了两个请求。这造成了一个错误。

所以，我把第二个请求放在第一个的回调函数中。

这是一个最终的工作示例。

```
var map

var directionsDisplay;
var directionsService = new google.maps.DirectionsService();

var placesService;

var moscow = new google.maps.LatLng(55.749646,37.62368);
var start;
var end;

var places = [];

function calcRoute() {

start = 'Domodedovo airport';
end = 'Hotel Balchug Kempinsky';

if(start == '' || end == '')
{
document.getElementById("directionsPanel").innerHTML = "<br/><b>Sorry, directions not found.</b>  <br/><br/>";
return;
}

var myOptions = {
zoom: 8,
streetViewControl: false,
mapTypeId: google.maps.MapTypeId.ROADMAP
};     
map = new google.maps.Map(document.getElementById("map_canvas2"), myOptions);

var request1 = {
location: moscow,
radius: '50000',
query: start
};

//Executing Google Places request

placesService =  new google.maps.places.PlacesService(map);
placesService.textSearch(request1, callback1);

}

function callback1(results, status) { 

if (status == google.maps.places.PlacesServiceStatus.OK) {
places[0] = results[0].formatted_address;

var request2 = {
location: moscow,
radius: '50000',
query: end
};    

placesService.textSearch(request2, callback2);
}

else
{
document.getElementById("directionsPanel").innerHTML = "<br/><b>Sorry, directions not found.</b><br/><br/>";
return;
}
}  

function callback2(results, status) {
if (status == google.maps.places.PlacesServiceStatus.OK) {
places[1] = results[0].formatted_address;

 //Executing Google Directions request

var request = {
origin:places[0], 
destination:places[1],
travelMode: google.maps.DirectionsTravelMode.DRIVING
};

directionsService.route(request, 

function(response, status) {
if (status == google.maps.DirectionsStatus.OK) {

directionsDisplay = new google.maps.DirectionsRenderer();

directionsDisplay.setMap(map);

directionsDisplay.setDirections(response);
directionsDisplay.setPanel(document.getElementById("directionsPanel"));
}
else
{
document.getElementById("directionsPanel").innerHTML = "<br/><b>Sorry, directions not found.</b><br/><br/>";
};
});

 //End of Google Directions request

}
else
{
  document.getElementById("directionsPanel").innerHTML = "<br/><b>Sorry, directions not found.</b><br/><br/>";
  return;
}
} 
```*

# php - 带有会话的 PHP 用户身份验证

> ID：14881642
> 
> 赞同：1
> 
> 时间：2013-02-14T18:30:58.260
> 
> 标签：php, security, authentication

所以我的问题是非常基本的。

在检查用户是否仍在任何页面上登录时，我将使用

```
if (isset($_SESSION['user']) && $_SESSION['user'] == true) { CODE } 
```

但是，我不应该为 $_SESSION['user'] 使用散列值而不是布尔值吗？我找到的所有指南都使用布尔值，但从我的角度来看，这是一个安全漏洞，不是吗？人们一直在谈论 Session-Hjacking 和 Session-Fixation，如果我只是为用户会话使用布尔值，那将非常容易，不是吗？还是我只是在这里混合？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T19:01:39.230

我在这里读了两个问题。第一个问题，“确定用户是否登录的最佳实践是什么？”和第二个问题“是否存在会话劫持和会话固定问题？”

**第一个问题：** 我使用过的大多数网络应用程序/cms 都有一个用户对象。从代码的角度来看，这个对象没有什么特别之处，它只是一个代表用户的对象。当前登录的用户将其用户对象存储在会话中。`$_SESSION['user']`

在 Drupal（和其他平台）中，a 函数用于返回当前登录的用户，如果用户未登录，则返回 False。

例子：

```
function user(){
 if( isset($_SESSION['user') and 
     is_object($_SESSION['user'] and 
     get_class($_SESSION['user']=='myUserClass')) ){

         return $_SESSION['user'];

     }else{
         return False;
      }
} 
```

因此，在您的示例中，我们看到了有效，因为所有对象在子句`if ( user() ) { CODE }`中都评估为 True 。`if`

**第二个问题：** Session-Hjacking 和 Session-Fixation 并不是真正的问题。客户端（Web 浏览器）无权访问服务器的 $_SESSION 数组。简而言之，是的，您在这里混淆了。

# c++ - 在c ++中生成整数向量元素的所有可能组合

> ID：14881647
> 
> 赞同：1
> 
> 时间：2013-02-14T18:31:11.307
> 
> 标签：c++, vector, combinations

我有一个大小为“n”的整数向量。

```
e.g.
std::vector<int> vec;
vec.pushback(0);
vec.pushback(1);
vec.pushback(2);
vec.pushback(3);
.... 
```

现在我想生成 size = {0, 1, 2, ... , n} 的所有可能组合。

请记住 {0, 1, 3} 不等于 {3, 1, 0} 或 {1, 0, 3} 或 {3, 0, 1}

如果您有想法，请帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T18:42:49.463

你可以这样做：

```
#include<iostream>
#include<algorithm>
#include <vector>

    std::ostream& operator<< (std::ostream& os, std::vector<int> v)
    {
        for (auto it = v.begin(); it != v.end(); ++it)
        {
           os << *it << ",";
        }
        return os;
    }

int main()
{
   std::vector<int> v;
   v.push_back(1);
   v.push_back(2);
   v.push_back(3);
    do {
       std::cout << v;
    } while (std::next_permutation(v.begin(), v.end()));

} 
```

根据@JamesKanze 的评论，这只能在向量开始排序时起作用，所以如果你有一个未排序的向量，你应该`std::sort`先调用它。

看着[这个](http://en.cppreference.com/w/cpp/algorithm/next_permutation)，它说：

> 将范围 [first, last) 转换为所有排列集合中的下一个排列，这些排列相对于`operator<`or是按字典顺序排列的`comp`。

[你可以在这里](http://liveworkspace.org/code/1FoeoN%240)看到它的作用

# mirth - MirthConnect 错误数据库写入成功，但在 SQL Server 数据库中未找到数据

> ID：14881650
> 
> 赞同：0
> 
> 时间：2013-02-14T18:31:15.990
> 
> 标签：mirth

我在 Mirthconnect 中有一个通道，它读取 HL7 消息，然后提取相关信息并写入 SQL 服务器数据库。它显示了一些不寻常的行为，在 Mirthconnect 消息日志上显示“成功：数据库写入成功”，但在数据库中找不到数据。它工作正常并且大部分时间都在写入数据，但有时它会这样做。通常，如果写入数据时出错（执行 Javascript），它会在 Mirthconnect 中显示错误详细信息，我明白这一点，但它为什么显示“写入成功”，然后数据库中没有数据。

任何人都可以对此有所了解吗？有人经历过吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-25T06:52:02.603

它发生在我身上。解决方案在于从 Mirth 访问数据库的用户。将 sysadmin 服务器角色和公共授予该用户。登录到数据库（SSMS）。

转到安全性->登录->选择您的用户->右键单击属性->服务器角色。将其设置为公共和系统管理员。

单击确定。然后`MSSQLSERVER`从 SQL Server 配置管理器重新启动服务。这是必需的，否则更改将不会生效。

# perl - 打开文件只返回文件的最后一行

> ID：14881653
> 
> 赞同：1
> 
> 时间：2013-02-14T18:31:24.490
> 
> 标签：perl, file, eof

我在整个程序中多次使用相同的代码和不同的文件，没有问题：

```
#if the info is part of a file
if($proteinIn =~  m/\.txt$/i){
    my $input_file = catfile('..', dataset => $proteinIn);

    open my $protein_file, '<', $input_file
        or die "couldn't open '$input_file': $!";
    while (my $protLine = <$protein_file>) {
        print $protLine."\n";
        $protLine =~ s/\s+\z//; # remove all trailing space
        $protein{$protLine} = 1;
    }
    close $protein_file;
} 
```

读入包含此内容的文件时

```
Q5KDZ7_CRYNJ
Q2U9C0_ASPOR
Q2U048_ASPOR
G2Q3M9_THIHA
G2QAZ2_THIHA 
```

打印语句 "print $protLine."\n";" 只打印最后一行。在这种情况下：

```
G2QAZ2_THIHA 
```

我的程序中的另一个示例读取给定文件的每一行

```
foreach my $tempFile(@fileList){
    my $input_file = catfile('..', dataset => $tempFile);

    open my $ps_file, '<', $input_file
        or die "couldn't open '$input_file': $!";
    while (my $line = <$ps_file>) {
        $line =~ s/\s+\z//; # remove all trailing space

        my @curLine = split /\t/, $line;
<the rest of the program> 
```

此代码打开的文件包含以下行：

```
>sp|Q6GZX4|001R_FRG3G Putative transcription factor 001R OS=Frog virus 3 (isolate Goorha) GN=FV3-001R PE=4 SV=1 MAFSAEDVLKEYDRRRRMEALLLSLYYPNDRKLLDYKEWSPPRVQVECPKAPVEWNNPPSEKGLIVGHFSGIKYKGEKAQASEVDVNKMCCWVSKFKDAMRRYQGIQTCKIPGKVLSDLDAKIKAYNLTVEGVEGFVRYSRVTKQHVAAFLKELRHSKQYENVNLIHYILTDKRVDIQHLEKDLVKDFKALVESAHRMRQGHMINVKYILYQLLKKHGHGPDGPDILTVKTGSKGVLYDDSFRKIYTDLGWKFTPL    FRG3G 
```

为什么代码的第一个示例只打印文件的最后一行？

编辑：对代码上游问题的评论的回应；幸运的是，我的问题即将开始，所以这里是问题代码之前的所有内容

运行代码时，我使用了命令“perl regProt.pl”“truePool.txt”“uniprot_sprot.dat”“fungi”

```
#!/usr/bin/env perl
use strict;
use File::Spec::Functions qw( catfile );

#use warnings;
#@author David Dziak

#A program for quick regex functions on uniprot data to test protein signatures
#my $max = 325783;
#my $cur = 0;
my $annotation;
my $fingerprint = $ARGV[0];
unless($fingerprint){
    $fingerprint = "[GASRK][KRVSG][RKVI][KRVI]x[ASCR]x[AST]x(0,45)[GATF]xxx[VLI]N[GKND]x(11,12)[RKL]x(16,18)[NDA]x(6)[GS]GGx(10)[AG][LIVM][GAS][KR][GASN][VLI]";#prosite s9

    #$fingerprint = "[GS]Gx(2)[GSA][QK]x(2)[SA]x(3)[GSA]x[GSTAV][KR][GSALVD][LIFV]";#prosite s9
    #$fingerprint = "[STDNQ]G[KRNQMHSI]x(6)[LIVM]x(4)[LIVMC][GSD]x(2)[LFI][GAS][DE][FYM]x(2)[ST]";#prosite s19
    #$fingerprint = "[RKHN][KSTR]X(3)[AVSCR]X(6)GXGX(0,23)X(25)GGGX(2)[GAS][QRKS]X(0,50)X(20)[APS]RX(5)[VSTA]XR";#s9
    #$fingerprint = "[GAR][RKHG][RKHNT][KSTR]X(3)[AVSCR][RASTHKQLP]X(5)[GPSTND]X[GPSTKDQ]X(4)[NDVGIT]X(0,60)G[GS]GX(2)[GSA][QRS]X(0,70)[QTRA][FWYETK][STAVH][KY][RK]";#s9
    #$fingerprint = "[RGWCKT]X(5)PX(3)[GARDENS]X(4)[VIL][HYF]XGX(7)[LIVMP]X(7)x[LFI][GASR][DEA][FYME]";#s19
}
$annotation .= $fingerprint;
#protein name to search
my $proteinIn = $ARGV[1];
my %protein;
#if the info is part of a file
if($proteinIn =~  m/\.txt$/i){
    my $input_file = catfile('..', dataset => $proteinIn); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T19:04:31.047

我打赌你的文件出于某种原因有行分隔`\r`，而不是`\n`。

尝试放在顶部：

```
use Data::Dumper;
$Data::Dumper::Useqq=1; 
```

并将打印替换为：

```
print Data::Dumper::Dumper($protLine); 
```

# php - Mongo，匹配数组数组

> ID：14881659
> 
> 赞同：0
> 
> 时间：2013-02-14T18:31:49.880
> 
> 标签：php, mongodb

我有一个对象，上面有一个子对象数组：

```
 _id: "9",
        clients: [
            {
                id: 677,
                enabled: true,
                updated: 0,
                created: 1352416600
            },
            {
                id: 668,
                enabled: true,
                updated: 0,
                created: 1352416600
            }
        ],
        cloud: false,
        name: "love",
} 
```

用户请求客户端 id 为 677 的图像，将返回上述对象

用户请求客户端 id 为 677 和 668 的图像，返回上图

用户请求客户端 ID 为 677、668、690 的图像，上述图像未返回

我使用 PHP 和 Mongo DB。用于支持此功能的 MYSQL 查询曾经使用 COUNT 和子查询。

我什至不知道从哪里开始在 Mongo 中解决这个问题。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T14:29:04.883

要搜索数组内的文档，可以使用点表示法和“$and”运算符。

句法：

```
db.coll.find({"$and": [{"clients.id": <id1>}, {"clients.id": <id2>}, ... ]}); 
```

为您提供样品：

1) 用户请求客户端 id 为 677 的图像（仅针对一项，不需要“$and”，但无论如何您都可以使用）：

```
db.coll.find({"clients.id": 677}); 
```

或者

```
db.coll.find({"$and": [{"clients.id": 677}]}); 
```

2) 用户请求客户端 ID 为 677 和 668 的图像：

```
db.coll.find({"$and": [{"clients.id": 677}, {"clients.id": 668}]}); 
```

3) 用户请求客户端 ID 为 677、668、690 的图像：

```
db.coll.find({"$and": [{"clients.id": 677}, {"clients.id": 668}, {"clients.id": 690}]}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T14:52:47.820

对于要返回数组字段包含每个项目列表的文档的情况，您可以使用[`$all`](http://docs.mongodb.org/manual/reference/operator/all/#_S_all)运算符。

所以你的三种情况可以这样处理：

1) 用户请求客户端 ID 为 677 的图像：

```
db.coll.find({'clients.id': 677}); 
```

2) 用户请求客户端 ID 为 677 和 668 的图像：

```
db.coll.find({'clients.id': {$all: [677, 668]}}); 
```

3) 用户请求客户端 ID 为 677、668 和 690 的图像：

```
db.coll.find({'clients.id': {$all: [677, 668, 690]}}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T14:44:23.807

还有第三种更简单的方法。

db.foo.find({"clients.id":{$in:[677,688,690]}});

希望这可以帮助

/节点

编辑：

如果您需要匹配确切的结构，您可以使用 $elemMatch

# git - 如何模拟 github 中的 post commit hook，用于不拥有的 repo

> ID：14881669
> 
> 赞同：3
> 
> 时间：2013-02-14T18:32:19.353
> 
> 标签：git, github, post-commit-hook

我想在我不拥有的存储库上启用 post commit hook。这可以通过分叉+跟踪来实现吗？还是有另一种方法可以启用监视另一个存储库的提交，以便您自己的存储库可以启用自定义提交后挂钩？

对于上下文：在这种情况下 - 我是一个我没有管理员权限的项目的活跃开发人员，该项目是开源的，在 github 上，所以我想为自己有一些自定义的提交后挂钩，没有不得不强制管理员安装它们。

我认为 git tracking 是解决此问题的惯用方式 - 但我不确定 github 在向下级联提交事件时如何工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T08:37:42.887

对于您想要做的事情，您可以在本地工作目录中添加另一个远程存储库： 1° 将您的工作目录链接到官方存储库（这样您将同时拥有 origin 和官方作为远程存储库） $ git remote add official git @github.com:official/repo 2° 更新你的本地 master 分支（或其他） $ git fetch official && git merge official/master --ff 3° 在你自己的 github 帐户中推送更改 $ git push origin master

现在，您可以在脚本中自动执行此操作（2°），每次您从 github 收到该特定 repo 的邮件时都可以执行该脚本，或者为此创建一个 cron 更容易（使用可选检查尝试合并只有在干净的目录下）。

自动化的事情只是“获取和合并”的事情，也许你可以继续手动做

# primefaces - 任何人都知道如何使 JavaServer Faces h:outputText f:convertNumber 将 BigDecimal 显示为美元？

> ID：14881673
> 
> 赞同：0
> 
> 时间：2013-02-14T18:32:31.890
> 
> 标签：primefaces, currency

当我有一个值为 34.31 的 BigDecimal 并使用以下代码显示它时：

```
<h:outputText value="#{invoice.invoiceHeader.totalInvoiceAmt}">
    <f:convertNumber pattern="#0.00" type="currency" currencyCode="USD" currencySymbol="$"/>
</h:outputText> 
```

我原以为它会显示 34.31 美元，但它却显示为 34.31。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T15:08:02.503

谢谢@partlov。

当 <f:convertNumber/> 具有模式属性时，类型和货币属性将被忽略。因此，使用以下内容：

```
<h:outputText value="#{invoice.invoiceHeader.totalInvoiceAmt}">
    <f:convertNumber pattern="#0.00" type="currency" currencyCode="USD" currencySymbol="$"/>
</h:outputText> 
```

仅使用了 pattern="#0.00"，因此 34.4 变为 34.40。但有以下几点：

```
<h:outputText value="#{invoice.invoiceHeader.totalInvoiceAmt}">
    <f:convertNumber type="currency" currencyCode="USD" currencySymbol="$"/>
</h:outputText> 
```

使用所有属性导致 34.4 变为 34.40 美元。

# string - 字符编码会干扰匹配的 Scala 字符串？

> ID：14881676
> 
> 赞同：1
> 
> 时间：2013-02-14T18:32:39.937
> 
> 标签：string, scala, character-encoding, pattern-matching

现在在尝试匹配两个 Scala 字符串时处理一个奇怪的问题。在尝试确定以下两个字符串是否相同时：

`SM8lz5IEIWs7TUhR3ke27pnY3XsjojxqaMEg+ARCGs1nm3sVkwA+CM+XJfdsUxqzqH7LZdkflvny z621tYkmXA==`和`SM8lz5IEIWs7TUhR3ke27pnY3XsjojxqaMEg+ARCGs1nm3sVkwA+CM+XJfdsUxqzqH7LZdkflvny z621tYkmXA==`

斯卡拉回归`false`。因此，如果我执行以下操作，`if(hash1 == hash2)`它会返回`false`.

我怀疑这是空格或字符编码问题，因为哈希匹配仅在尝试匹配在不同操作系统的计算机上生成的哈希时才会失败。我已经尝试使用正则表达式去除空格，但仍然失败。

我忽略了什么？有没有更好的方法来清理和匹配 Scala 中的哈希？

## 更新

比较两个字符串后，Scala 认为`hash2`单个字符比`hash1`. 所以我在两个哈希上运行了以下函数`.trim.replaceAll("""(?m)\s+$""", "")`：不过，它说它们不一样。还有哪些其他角色可能会干扰？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T18:54:57.000

我已经找到了这个特定问题的原因。显然，在 Macintosh 上处理字符串时，`\r`除了任何换行符外，还会添加。即使换行符不会在控制台上打印出来，它们仍然在字符串中。

补救措施是执行以下操作：`.trim.replaceAll("\r", "")`

现在两个字符串都匹配。

# pagination - Laravel - 分页 Eloquent 检索结果

> ID：14881679
> 
> 赞同：0
> 
> 时间：2013-02-14T18:32:51.443
> 
> 标签：pagination, laravel, eloquent

这就是我的控制器中的内容

```
$projects=Project::where_sup_id($user_id)->get();
   $total=count($projects);
   $per_page=3;
  $projects = Paginator::make($projects, $total, $per_page);
  return View::make('project.index')->with('projects',$projects); 
```

这在我看来

```
 @foreach ($projects->results as $project) 

      {{$project->title}}

 @endforeach

{{$projects->links();}} 
```

但是当我在浏览器中查看它时，它会显示所有页面中的所有行......链接显示完美！你认为是什么问题？请帮忙！提前谢谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T09:01:36.610

您正在计算所有行，但根本不使用`limit`，Laravel fluent 查询构建器具有用于此目的`skip()`的`take()`方法。

顺便说一句，您不需要手动对其进行分页。Laravel 使用 `paginate()`方法自动进行分页。

这样做：

```
$projects = Project::where_sup_id($user_id)->paginate(3); // 3 means records per page
return View::make('project.index')->with('projects', $projects); 
```

你正在`view`正确地工作。

# wpf - WPF 自动调整字体大小，直到它适合父控件

> ID：14881683
> 
> 赞同：21
> 
> 时间：2013-02-14T18:32:59.683
> 
> 标签：wpf, wpf-controls, font-size

我有一个用户控件，他的根元素是一个网格。

我还有一个 ContentControl，它充当加载数据时填充的某些文本的占位符。这个控件可以在用户控件中移动，所以它的位置可以在任何地方。

如果文本太长而无法容纳在用户控件的根网格中，我想减小 ContentControl 的字体大小，直到文本适合为止。

我的问题是我似乎找不到可以处理的事件来执行此过程。我尝试使用 ContentControl.LayoutUpdated 事件；但是，此事件的 sender 参数似乎总是什么都没有......这真的没有帮助！

我真的很期待有关如何实现这一目标的任何建议。

谢谢

-弗林尼

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-14T18:56:40.103

`ContentControl`将您的套装包装`Viewbox`成仅按比例缩小将为您做到这一点：

```
<Viewbox StretchDirection="DownOnly" Stretch="Uniform">
    <ContentControl Content="Some Text"/>
</Viewbox> 
```

# bash - bash awk 整数

> ID：14881684
> 
> 赞同：1
> 
> 时间：2013-02-14T18:33:07.273
> 
> 标签：bash, awk

我想吐出 RAM 使用量占总 RAM 的百分比，使用`top`. 我到目前为止的脚本是

```
top -l 1 |
awk '/PhysMem/ {
    print "RAM\nwired:" $2/40.95 "% active:" $4/40.95 "% inactive:" $6/40.95 "% free:" $10/40.95 "%"
}' 
```

我有 4gb RAM，因此除以 40.95，所以这个脚本吐出的东西看起来像：

```
RAM
wired:16.1172% active:46.2759% inactive:8.79121% free:28.8156% 
```

我只希望它显示小数点后 1 位的百分比，我不知道该怎么做。我研究过使用`bc`，但总是收到非法语句错误。任何想法如何将其四舍五入到 awk 中的小数点后第 1 位？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T18:38:35.193

使用 awk 有几种方法可以做到这一点：

```
... | awk '{ print $2/40.95 }' OFMT="%3.1f"

... | awk '{ printf( "%3.1f\n", $2/40.95 )}' 
```

每个都使用输出格式`%3.1f`来处理舍入。因此，您需要做的就是将参数添加`OFMT="%3.1f"`到您的 awk 调用中。（或者您可能更喜欢`%0.1f` The 3 的格式，只是给出了最小宽度；典型的格式字符串规则适用。）

# java - Java 土耳其语字符

> ID：14881687
> 
> 赞同：1
> 
> 时间：2013-02-14T18:33:21.917
> 
> 标签：java, encoding, xls

```
String filename = "c:/book.xls";
WorkbookSettings ws = new WorkbookSettings();
ws.setLocale(new Locale("tr", "TR"));
try {
   Workbook w = Workbook.getWorkbook(new File(filename),ws);
   //......................
} 
```

我正在尝试用土耳其语阅读 Xls 文件。我将语言环境设置为土耳其语。但是，它仍然不显示土耳其字符。你能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T18:39:55.930

设置此工作簿中使用的编码：

尝试

```
ws.setEncoding("UTF-8"); 
```

或者

```
ws.setEncoding("ISO8859_9") 
```

或者

```
ws.setEncoding("ISO-8859-9") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T18:51:01.410

这是关于我的 Java IDE(Eclipse) 编码问题，我通过保存为 UTF-8 对其进行了更改，它解决了我的问题。

# java - 无法弄清楚 PathIterator 中 flattnes 参数的作用？

> ID：14881690
> 
> 赞同：1
> 
> 时间：2013-02-14T18:33:28.713
> 
> 标签：java, swing, shape, path-iterator

我正在编写自己的`PathIterator`实现。

目前，我实现了具有平坦度和平坦度的方法：

```
@Override
public PathIterator getPathIterator(AffineTransform at, double flatness) {
    return getPathIterator(at);
} 
```

即我忽略它。

使用`flatness`参数的最简单方法是什么？

我当前的迭代器给出了一系列平行的垂直线（之间没有连接）。对我来说，实现平面感知版本的迭代器有多重要？它在哪里使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T01:35:06.093

被[`getPathIterator()`](http://docs.oracle.com/javase/7/docs/api/java/awt/Shape.html#getPathIterator%28java.awt.geom.AffineTransform,%20double%29)引用的应该只返回`SEG_MOVETO`、`SEG_LINETO`和`SEG_CLOSE`段类型。如果您`Shape`没有其他细分类型，例如`SEG_CUBICTO`或`SEG_QUADTO`，`flatness`则无关紧要。作为一个具体示例，[`Rectangle2D`](http://docs.oracle.com/javase/7/docs/api/java/awt/geom/Rectangle2D.html)实现指定“由于矩形已经是平坦的，因此忽略平坦度参数”。

# angularjs - 在指令和 $compile() 中使用 ng-click 中的变量

> ID：14881698
> 
> 赞同：0
> 
> 时间：2013-02-14T18:34:08.407
> 
> 标签：angularjs, angularjs-directive

我正在尝试编写一个将创建一组按钮的指令。为了在屏幕上突出显示数据，这些按钮将用作开/关切换。

该指令如下：

```
angular.module('directives', [])
.directive('toggleButtons', function() {
  return {
    restrict: 'E',
    scope: { data: '='},
    controller: function($scope) {
      $scope.toggle = function(data) {
        alert(data);
      };
    },
    template: "<button class='btn' " +
              //"ng-class='{active: option == model}'" +
              "ng-repeat='datum in data' " +
              "ng-click=\"toggle({{datum['id']}})\">{{datum['name']}}" +
              "</button>"
  };
}); 
```

现在，我知道要确保该`datum['id'']`片段由 Angularjs 解释，我需要运行`$compile()`，但我不确定如何实现这一点。请有人可以展示如何更改此代码以实现此目的吗？（同样，如果这不是解决此问题的正确方法，请告诉我）。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T20:17:33.343

你真的很亲近。您不需要将`datum['id']`调用包装在花括号中，因为 Angular 会为您编译模板。

因此，如果您将其更改为`ng-click='toggle(datum.id)'`，它将正常工作，如[您在此处看到的](http://jsfiddle.net/Ne5zn/2/)那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-10T07:44:12.493

```
I am meeting a similar issue that the variable is undefined after using $compile(template)($scope);

For example:
1: var pendingObjDiv = $("<div class="open-detail-btn" ng-click="goToFormPage(aaa)"></div>");
2: var pendingTemplate = angular.element(pendingObjDiv);
   var pendingElement = $compile(pendingTemplate)($scope);
   pendingRowList.append(pendingElement);
3: $scope.goToFormPage = function(str){}; at this step, the variable str is undefined. 
```

# node.js - 当我尝试在 Jade 中显示 SQL 查询结果时获取 [object Object]

> ID：14881699
> 
> 赞同：4
> 
> 时间：2013-02-14T18:34:09.037
> 
> 标签：node.js, pug

我刚开始使用 Node.js，我完全不明白为什么我的 SQL 查询结果无法呈现在页面上。

```
connection.query('SELECT * FROM testTable', function selectCb(err, rows, fields) {
  if (err) {
    throw err;
  }
  for (var i in rows) {
      console.log(rows[i]);
  }
  res.render('showResults.jade', {
    results: rows
  });
}); 
```

结果完美地显示在控制台中，但是当我尝试使用 Jade 渲染它们时，我得到了许多项目符号（等于表中的条目数），但每个项目符号后跟 [object, Object]。这是我的玉文件：

```
h1 SQL Results are as follows:
ul
  each item, i in results
    li= item 
```

是否有额外的步骤或我需要让结果正确显示的东西？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-14T18:50:32.143

您看到的输出是因为 Jade 只是调用`.toString()`表达式的结果。而且，对于`Object`s like `item`，[这是默认结果](http://es5.github.com/#x15.2.4.2)：

```
> {}.toString()
'[object Object]' 
```

要获得更有用的东西，您必须指定格式：

```
li #{item.prop1} (#{item.prop2}) 
```

对于 JSON：

```
li= JSON.stringify(item) 
```

* * *

如果你想要你看到的格式`console.log()`，你可以公开[它使用](http://nodejs.org/api/stdio.html#stdio_console_log_data)的函数，[`util.inspect()`](http://nodejs.org/api/util.html#util_util_inspect_object_showhidden_depth_colors)作为视图助手：

```
// Express 3
app.locals.inspect = require('util').inspect; 
```

```
li= inspect(item) 
```

# android - ListView 在创建第二个项目后显示项目

> ID：14881703
> 
> 赞同：1
> 
> 时间：2013-02-14T18:34:19.137
> 
> 标签：android, android-listview, android-fragments, android-arrayadapter, android-fragmentactivity

所以我的代码中有一个奇怪的事件顺序。这可能是我还没见过的小事。A 拥有它，并且正在从单击按钮后`ListView`拉出字符串。`EditText`

`EditText`生活在一个对话中，该对话被`Activity`一个`interface`

现在发生的事情是，当我在`EditText`字段中输入“a”时，什么也没有出现。但是当我去添加另一个时，“b”，“a”出现了。等等。因此，必须创建一个才能显示前一个。

这就是我所拥有的。

```
public class NewActivity extends FragmentActivity implements AddSiteDialog.AddSiteDialogListener {

ListView mSiteListView;
ArrayList<String> siteList = new ArrayList<String>();
CustomAdapter arrayAdapter = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.add_site);
    mSiteListView = (ListView) findViewById(R.id.siteAddList);
    arrayAdapter = new CustomAdapter();
    mSiteListView.setAdapter(arrayAdapter);
    Button b = (Button) findViewById(R.id.addSiteButton);
    b.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
           showDialog();
        }
    });
}

public void showDialog() {
    FragmentManager fm = getSupportFragmentManager();
    AddSiteDialog addSiteDialog = new AddSiteDialog();
    addSiteDialog.show(fm, "main");
}

public void onSignIn(String inputText) {
    siteList.add(inputText);

}

class CustomAdapter extends ArrayAdapter<String> {
    CustomAdapter() {
        super(NewActivity.this, R.layout.add_site, siteList);
    }
    public View getView(int position, View convertView, ViewGroup parent){
        View row = convertView;

        if (row == null){
            LayoutInflater inflater = getLayoutInflater();
            row = inflater.inflate(R.layout.list_row, parent, false);
        }

        ((TextView) row.findViewById(R.id.textViewId)).setText(siteList.get(position));

        return (row);
    }
} 
```

}

任何人都可以发现发生这种情况的地方吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T22:10:56.800

# 简单的。

呼入`arrayAdapter.notifyDataSetChanged()`_

```
public void onSignIn(String inputText) {
    siteList.add(inputText);
    //add that here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T18:39:43.633

如果您的适配器支持的数据发生变化，您需要调用`notifyDataSetChanged()`您的适配器来指示`ListView`更新自身。

我在您的代码中没有看到类似的内容。

只需添加：

您的适配器实现是次优的 - 尽管在这种情况下它并不重要。您应该创建一个 ViewHolder 并将其存储为 View 的标签，以便在给出 convertView 时可以检索它。ViewHolder 应该保留对视图的所有子视图的引用（`TextView`, `ImageView`，无论您需要更新什么）。这将避免重复调用`findViewById()`- 这很慢。

# c# - 未从 PowerPoint 2007 捕获的 UI 自动化事件

> ID：14881705
> 
> 赞同：2
> 
> 时间：2013-02-14T18:34:28.863
> 
> 标签：c#, .net, powerpoint, microsoft-ui-automation

当用户选择新的功能区选项卡时，我正在尝试从 PowerPoint 2007（或理想的任何版本）中捕获 UI 自动化事件。使用 SDK 工具 Inspect 和 AccEvent 我已经确定捕获这些事件的合理“父”元素是“Ribbon Tabs”元素。

当我将 AccEvent 限定到该元素，并在自动化事件中注册 SelectionItem_ElementSelected 时，我得到了我所期望的事件 - 单击选项卡时，AccEvent 捕获并记录它。

我只被允许发布两个链接并且还不能内嵌图像，所以我做了一些马赛克来尝试将尽可能多的相关信息压缩到每个链接中，这里是与上述行为相关的链接：

[http://hirstius.com/media/stackoverflow/UIA_sdk_tools.png](http://hirstius.com/media/stackoverflow/UIA_sdk_tools.png)

基于此，我想出了以下代码来从我的程序中捕获这些事件：

```
// Prior code gets foreground window, determines if it's PPT, and gets a handle to it
currentApp = AutomationElement.FromHandle(foregroundWindow);

// Create condition to find the "Ribbon Tabs" element
Condition propCondition = new PropertyCondition(
  AutomationElement.NameProperty, "Ribbon Tabs",
  PropertyConditionFlags.IgnoreCase);

// Subscribe to events on the "Ribbon Tabs" Element
SubscribeToEvents(currentApp.FindFirst(TreeScope.Descendants, propCondition));

public void SubscribeToEvents(AutomationElement element)
{
  if (element != null)
  {
    Console.WriteLine("Subscribing to PowerPoint UIA Events on object {0} ({1})",
      elementItem.GetCurrentPropertyValue(AutomationElement.NameProperty),
      elementItem.GetCurrentPropertyValue(AutomationElement.AutomationIdProperty));
    UIAeventHandler = new AutomationEventHandler(OnUIAutomationEvent);

    // Subscribe to SelectionItemPattern.ElementSelectedEvent based off AccEvent
    Automation.AddAutomationEventHandler(
      SelectionItemPattern.ElementSelectedEvent,
      element,
      TreeScope.Descendants,
      UIAeventHandler);

    Console.WriteLine("Subscribed to PowerPoint UIA Events");
  }
}

private void OnUIAutomationEvent(object src, AutomationEventArgs e)
{
  // Make sure the element still exists
  AutomationElement sourceElement;
  try
  {
    sourceElement = src as AutomationElement;
  }
  catch (ElementNotAvailableException)
  {
    return;
  }
  Console.WriteLine("UIA Event ( {0} ) for item: {1}",
    e.EventId.ProgrammaticName,
    sourceElement.GetCurrentPropertyValue(AutomationElement.NameProperty));
} 
```

这段代码没有任何结果。

如果我订阅顶级“窗口”，仍然没有。

如果我只是订阅顶级自动化元素，我会得到预期的事件 - 但有一个问题。在 AccEvent 中，事件仅在单击选项卡时出现，真正“被选中”。当我绑定到 Root AutomationElement 时，我在鼠标悬停/悬停时得到事件，而在单击时什么也没有。我只需要在实际选择选项卡时才出现事件（这正是 AccEvent 在作用于“功能区选项卡”元素时呈现的行为）。

结果链接：[http ://hirstius.com/media/stackoverflow/UIA_Result.png](http://hirstius.com/media/stackoverflow/UIA_Result.png)

当用户在功能区上选择一个新选项卡时，我需要一种方法来通知我的 .NET 应用程序，我是否遗漏了一些明显的东西？

# ios - 为 iOS 创建自定义建筑地图的最佳方式

> ID：14881712
> 
> 赞同：5
> 
> 时间：2013-02-14T18:34:51.220
> 
> 标签：ios, map, navigation, path-finding, autocad

我看到了一些方法：

1) 以编程方式使用 OpenGL 进行绘制。

2) 以编程方式使用 QuartzCore 和 CoreAnimation 进行绘制。

3) 在 AutoCad 中绘制地图，然后以某种方式将其连接到 iOS。

4) 使用 SVG 绘制地图。

需求支持寻路和gps导航。

对于前两种方式，我认为它在性能方式方面很昂贵，重绘所有缩放元素；而且我认为这种方式可能不支持 GPS 导航。

对我来说，使用 AutoCad 图示地图很难理解如何将其与图形\路径连接以进行寻路。

我的同事将使用 SVG 在 Web 上开发这个应用程序。我找到了它 - [https://github.com/SVGKit/SVGKit](https://github.com/SVGKit/SVGKit)，但仍然不知道它将如何支持寻路和导航。

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T21:01:06.153

地图应用一般有两种：

A）他们显示地图，（有或没有用户位置）而不需要像导航系统那样计算路径（见 B 点）

B) 使用地图矢量并计算某些内容的应用程序：例如寻找最佳路径。最短连接，例如导航系统等。

A) 的应用通常不如 B) 复杂，因为向量可能有些不准确、没有连接、有小间隙、边缘之间没有逻辑等。

1) 要仅显示建筑地图，您只需要边列表。（边缘是一对坐标 (x1,y1) - (x2,y2)。你是怎么得到的。例如 MapInfo Professional 格式 mif/mid。
或者甚至你可以显示一个包含建筑物地图的 pdf。对内置的 PDF 视图，（也有 SVG，但更难）。

如果它不是相对地图，而且是使用参考坐标系定位的地图，例如纬度/经度 (WGS84)，事情会变得更加复杂。
在这种情况下，您将使用工具（mapInfoProfessional，导入 AutoCad DXF 文件，并在房子的角落应用 3 个 GPS 测量参考点，并将其转换为 LatLong WGS84 坐标系统。
使用 ios，您无法测量这 3 个点，因为您无法平均位置，当您站在房子的一个角落静止时，ios会停止发送。如果您居住在谷歌卫星照片具有高分辨率的地区，您可以尝试从谷歌地球卫星照片中提取位置。（但是这可能违反该卫星照片提供商的许可条件（主题：派生数据））

最后，您现在有了 Lat Lon 坐标系中的边列表。

对于显示，我个人会使用 1) OpenGL) 或 2) Quartz2D。

**现在是路径查找部分。**

可能您需要第二张“地图”来定义建筑物内的可能路径。此结构必须是连接图（具有连接邻居的点）。电脑游戏就是这样做的。（有些甚至允许您在开发者模式下显示该路径）

可以在平面图的不同层中绘制路径。但这条路有更高的要求：不允许有缝隙，都必须完美连接。

将该层称为“路径”并将其导出为自己的计划。
现在只使用这个路径层，导入并创建一个具有连接邻居的节点图。

使用 Dijkstra 算法搜索最短路径。

# mysql - php 使用通配符构建 mySQL 查询

> ID：14881714
> 
> 赞同：0
> 
> 时间：2013-02-14T18:34:52.500
> 
> 标签：mysql, wildcard

似乎无法弄清楚出了什么问题，查询应该是正确的，并且它在 phpMyAdmin 中有效，但是当我在 php 字符串“%”中引入通配符时，每个查询都失败了。

这有效：

```
$query = sprintf("SELECT `id`FROM `table`WHERE `name` LIKE '".$resources[1]."'", 
                                                                   mysql_real_escape_string($resources[1])); 
```

这不会：

```
$query = sprintf("SELECT `id`FROM `table`WHERE `name` LIKE '%".$resources[1]."%'", 
                                                                   mysql_real_escape_string($resources[1])); 
```

我显然试图生成的查询是

```
SELECT `id` FROM `table`WHERE `name` LIKE '%someName%' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T18:36:43.370

阅读 sprintf 手册页： http: [//php.net/sprintf](http://php.net/sprintf)

```
$sql = sprintf('..... '%%%s%%', $var);
                       ^^--- turns into %
                         ^--  %s -> $var
                           ^^-- turns into % 
```

您编写的代码并没有阻止 sql 注入，因为您没有正确使用 sprintf() 。

# sql-server - 需要表中的唯一值

> ID：14881715
> 
> 赞同：1
> 
> 时间：2013-02-14T18:35:05.543
> 
> 标签：sql-server

我有两张桌子：

表 A

```
ID   Name
1    abc   
2    xyz 
```

表 B

```
ID    Name             
1     abc
2     xyz                 
3     mno 
```

我需要两个表上方的不同值形式，我的意思是我只想要表 B 中的 ID 3 Name mno（因为它在两个表中是唯一的）

请让我知道如何获得此值。

谢谢，阿杰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T18:38:50.043

此查询将为您提供`B`不存在的行`A`：

```
SELECT b.* FROM TableB b
    OUTER JOIN TableA a ON a.ID = b.ID AND a.Name = b.Name
WHERE a.ID IS NULL 
```

然后你可以做相反的事情并使用 a`UNION ALL`来获得它：

```
SELECT a.* FROM TableA a
    OUTER JOIN TableB b ON b.ID = a.ID AND b.Name = a.Name
WHERE b.ID IS NULL
UNION ALL
SELECT b.* FROM TableB b
    OUTER JOIN TableA a ON a.ID = b.ID AND a.Name = b.Name
WHERE a.ID IS NULL 
```

* * *

实现它的另一种方法是：

```
;WITH MatchingRows AS (
    SELECT a.ID FROM TableA a
        JOIN TableB b ON b.ID = a.ID AND b.Name = a.Name
)
SELECT * FROM TableA
WHERE ID NOT IN (SELECT m.ID FROM MatchingRows m)
UNION ALL
SELECT * FROM TableB
WHERE ID NOT IN (SELECT m.ID FROM MatchingRows m) 
```

我不确定这是否表现更好 - 这只是我想到的。如果我没记错的话，这实际上会运行`WITH`两次查询（[参见这个问题的答案](https://stackoverflow.com/questions/14838223/is-with-the-replacement-for-a-temp-table)），因为它被使用了两次——所以这种方法可能会对性能产生一些影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T20:08:05.557

EXCEPT 运算符可能适合您。这是使用您的数据的示例。

```
CREATE TABLE TableA (id int, name varchar(50))
INSERT INTO TableA VALUES (1, 'abc'),(2,'xyz')

CREATE TABLE TableB (id int, name varchar(50))
INSERT INTO TableB VALUES (1, 'abc'),(2,'xyz'),(3,'mno')

SELECT * FROM TableB
EXCEPT 
SELECT * FROM TableA 
```

请注意，尽管它的行为类似于 UNION。它只会排除所有列都完全匹配的行。

# android - Twitter4j 重定向到以前的活动

> ID：14881716
> 
> 赞同：0
> 
> 时间：2013-02-14T18:35:11.953
> 
> 标签：android, android-activity, twitter4j

我是使用 Twitter4J 库的新手，并且在 Android 中遇到了一些问题。所以我目前有一个像 A、B、C、D 这样的活动堆栈。使用 twitter4J 从活动 DI 登录到 twitter。当 twitter 登录重定向回我的活动时，它会在堆栈上创建一个新的活动实例。堆栈变为 A、B、C、D、TwitterLogin、D。我需要我的应用程序返回到状态 A、B、C、D，因此选择后退按钮将弹出活动 D 并将活动 C 带到前面。

有人对我将如何实现这一目标有任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T18:52:21.953

将[Intent.FLAG_ACTIVITY_CLEAR_TOP](https://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP)添加到您启动的意图以启动 Activity D 应该可以解决问题。像这样的东西：

```
Intent i = new Intent(this, ActivityD.class);
i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(i); 
```

# android - 仅在启用 Internet 连接的情况下如何发送信息？

> ID：14881720
> 
> 赞同：0
> 
> 时间：2013-02-14T18:35:21.267
> 
> 标签：android

使用这种方法，我知道用户何时连接。

```
public boolean isOnline() {
    ConnectivityManager cm = 
         (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo netInfo = cm.getActiveNetworkInfo();
    if (netInfo != null && netInfo.isConnected()) {
        return true;
    }
    return false;
} 
```

在我的应用程序中，当用户按下发送时，它会将一些数据上传到服务器，如果没有连接，它会说“我们稍后会尝试发送”，但是我如何检查互联网状态并且只有在连接开启时，发送信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T18:59:38.727

首先，使用 an`IntentService`来处理您所有的数据上传。让它检查与您拥有的方法的连接 - 如果连接，则上传数据，否则将其存储（使用`SharedPreferences`或数据库）。

其次创建一个`BroadcastReceiver`并在清单中使用以下内容注册它`<intent-filter>`......

```
<intent-filter>
    <action android:name="android.net.wifi.STATE_CHANGE" />
    <action android:name="android.net.conn.CONNECTIVITY_CHANGE" />"
</intent-filter> 
```

注意：您将需要以下权限...

```
<uses-permission android:name="android.permission.CHANGE_NETWORK_STATE" />
<uses-permission android:name="android.permission.CHANGE_WIFI_STATE" /> 
```

在它的`onReceive(...)`方法中`BroadcastReceiver`检查是否有任何数据未决，如果有，让它开始`IntentService`发送数据。

此外，使用`Notifications`由创建的`IntentService`向用户提供反馈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T18:45:01.607

当没有检测到互联网连接时，为什么不提醒用户在他们连接时将发送消息。运行后台进程或服务，定期检查用户是否已连接，以及何时运行发送数据的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T18:48:08.050

这应该有帮助：[http ://www.androidhive.info/2012/07/android-detect-internet-connection-status/](http://www.androidhive.info/2012/07/android-detect-internet-connection-status/)

如果你想要一个额外的例子：[http ://www.androidsnippets.com/have-internet](http://www.androidsnippets.com/have-internet)

第一个链接中的站点（AndroidHive.info）是新手最好的朋友。所有的 tuts 都提供了可下载的源代码，几乎是万无一失的，并且编写/记录得很好。您可以做很多事情，只需将他的 tuts 中的不同部分拼凑成独特的东西。学习imo的最佳方式

# ajax - 使用 AJAX 从我自己的消费者网站安全地访问私有 API

> ID：14881723
> 
> 赞同：2
> 
> 时间：2013-02-14T18:35:40.230
> 
> 标签：ajax, api, security, backend, frontend

可以就如何最好地保护暂时保持私有的 API 提出一些建议。后端 API 已经开发完毕，将位于它自己的系统上。前端消费者网站将可以通过私有 API 密钥访问此 API。这一切都在服务器端代码中。然而，一个新的要求已经公布：我们的网站也需要发出 AJAX 请求来生成代码。我不想在 javascript 代码中公开 API 调用或令牌，所以我试图找出选项。一种是在前端服务器端创建一个 REST 控制器，然后可以由 javascript 代码调用，但这会有效地规避 API 密钥安全措施，因此不是真正的解决方案。

那么这方面的一般做法是什么？我认为理想情况下（我正在朝着这个方向发展，目前在时间上不可行）我会使用 OAuth 令牌来验证请求并进行一些 API 调用（提取一般信息）不需要任何形式的身份验证等，但即使鉴于 AJAX 要求，这会有一些问题。是否有某种方法可以让客户端 javascript 和相关的 AJAX 调用保持安全？

这就是说 - 我目前不知道在这里做什么。

谢谢。

编辑：目前的想法是在前端创建可以通过ajax访问的控制器，它将无风险的提取发送到API，而对于有风险的提取则依赖于当前用户验证（例如用户正在登录）。此外，登录不会是 AJAX 风格的请求，因此登录应该是一个可靠的安全测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T18:45:38.947

您可以开发一个处理程序来接受 AJAX 请求并将它们传递给私有 API，使用您将在非公开代码的其他地方采用的正常访问令牌方法。

这样，您就不会在 javascript 中公开令牌或 API。您可以在处理程序中构建 API 调用白名单，以便它仅处理（可能）来自前端的良性 AJAX 请求。这个处理程序既是错误请求的防火墙，也是保护私有 API 真实机制的一种方式。

如果任何 API 方法对数据具有潜在危险或破坏性，则可以（并且应该）与公共网站的身份验证机制结合使用。

一个模型（在 PHP 中）：

```
$whitelist = array(
  'SomeApiCallPublicAlias'=>'RealApiMethod',
  'AnotherPublicAlias'=>'SomeSafeApiMethod'
);
$call = $_POST['call']; // <-- SomeApiCallPublicAlias
if (!array_key_exists($call, $whitelist))
  die('permission denied');
$data= $_POST['data'];

// hook in to the private API, pass the data, return the response
$response = make_private_api_call($whitelist[$call], $data);
die(json_encode($response)); 
```

# git - Git 工作流程（提交/推送/和创建拉取请求）

> ID：14881725
> 
> 赞同：0
> 
> 时间：2013-02-14T18:35:49.440
> 
> 标签：git, github

我已经从 master 创建了一个分支，进行了更改，现在准备提交并推送回远程 master。

我是否首先需要将我的更改提交到我的本地分支

```
git commit -m "new changes, etc." 
```

然后

```
git push 
```

推到遥控器？

第一部分正确吗？

那么我如何提出拉取请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T19:31:59.233

在您做任何事情之前，您应该知道要执行拉取请求，您必须在与所需分支分开的分支中完成您的工作。分支在 git 中是超级轻量级​​的，你应该一直使用它们。要创建并切换到新分支，首先执行`git branch <new branch name>`，然后使用`git checkout <new branch name>`. 您的新分支是基于您当前的分支创建的（因此，如果您要基于 master 创建另一个您想要的新分支，请确保先切换回 master）。

要提交，您需要首先将要提交的文件添加到暂存区。用`git add <filename>`. 如果您想添加调用时看到的所有文件`git status`，您可以这样做`git add .`。

接下来，您可以进行提交。我个人更喜欢不在命令行上添加消息以进行大的更改，因为我喜欢有一个额外的屏幕显示所有正在提交的内容以及具体未提交的内容。我认为默认的编辑器是vi，但是如果你对vi感觉不习惯，你可以通过`git config --global core.editor <your favorite editor>`.

你现在已经准备好推送到 github 了！去做吧！`git push`

现在您已准备好设置您的拉取请求。前往 github 并找到你的 repo。点击拉取请求按钮。你现在有两个重要的下拉菜单。左边的方框是 TARGET 分支。右边的方框是 SOURCE 分支。将左侧设置为 master，将右侧设置为新分支。添加评论，查看所有内容，然后点击发送拉取请求。咩咩。

查看 github 上的此链接以获取更多信息和一些方便的屏幕截图： [https ://help.github.com/articles/creating-a-pull-request](https://help.github.com/articles/creating-a-pull-request)

# java - 在 Maven 中运行 JUnit 测试，无需构建和复制文件

> ID：14881730
> 
> 赞同：48
> 
> 时间：2013-02-14T18:36:08.357
> 
> 标签：java, maven

我有一个大型 Maven 项目，其中有几个模块。当我想从一个模块运行 JUnit 测试时，我在包含所有模块的目录中运行“mvn -Dtest=NameOfTest test”。当我运行这个命令时，Maven 会遍历每个模块并尝试编译它（尽管它已经编译），这涉及复制一堆文件并增加测试的总时间。Maven surefire 插件的“测试”命令似乎执行了测试之前的所有步骤。我想知道是否有一种方法可以只执行测试步骤，而不必为所有尝试的文件编译和复制而烦恼。

以下是测试开始前的一些输出：

```
[INFO] 
[INFO] --- build-helper-maven-plugin:1.5:add-test-source (add-test-source) @ module1 ---
[INFO] Test Source directory: <directory in module1 with some generated sources> added.
[INFO] 
[INFO] --- maven-resources-plugin:2.5:testResources (default-testResources) @ module1 ---
[debug] execute contextualize
[INFO] Copying 108 resources
[INFO] Copying 1113 resources
[INFO] Copying 1 resource
[INFO] 
```

它对每个其他模块重复此操作。总而言之，它需要一两分钟才能真正开始测试。有谁知道让测试运行而无需事先进行所有编译的方法？如果我应该提供更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2013-02-15T08:26:43.763

如果您想做的是只运行生命周期的测试阶段而不运行所有先前的阶段，您还可以调用绑定到测试阶段的目标：

```
mvn surefire:test 
```

或者如果您只想运行一项测试

```
mvn -Dtest=NameOfTest surefire:test 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T19:19:39.650

简单地从测试所在的模块中运行测试有什么问题？这样，Maven 将不会尝试构建您不感兴趣的其他模块。

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2013-02-14T18:51:23.697

如果您只想跳过 cmd 行中的测试编译，请使用`-Dmaven.test.skip=true`.

我还应该指出，虽然`maven.test.skip`不会**编译**任何测试，但它会执行任何进入`<testOutputDirectory>`.

根据[`skip`](http://maven.apache.org/plugins/maven-resources-plugin/testResources-mojo.html#skip)来自 maven-resources-plugin 的文档，应使用`maven.test.skip`上面的 arg 跳过测试资源的复制。

> 将此设置为“true”以绕过测试资源的复制。不推荐使用它，但有时很方便。用户属性是：maven.test.skip。

# python - pygtk 问题 - 无法创建 gdk.Color 对象

> ID：14881732
> 
> 赞同：0
> 
> 时间：2013-02-14T18:36:09.197
> 
> 标签：python, gtk, pygtk, gdk

我正在通过 glade 创建一个简单的应用程序，我希望能够设置颜色选择对话框中显示的颜色。我找到了 set_current_color 函数，但是，它需要一个 gdk.Color 对象。

尝试导入 gtk.gdk.Color 失败（实际上，只是导入 gtk 失败）。我可以使用另一种方法来创建颜色对象吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T01:47:48.307

原来是混合 GTK2 和 GTK3 的问题。gi.repository.Gtk 有 Color 构造函数。

# html - 是属性值中必需的 XML 实体

> ID：14881735
> 
> 赞同：0
> 
> 时间：2013-02-14T18:36:17.460
> 
> 标签：html, xhtml

例如这样可以吗

```
<meta name="description" content="Foo & Bar"/> 
```

或者我应该改用这个：

```
<meta name="description" content="Foo &amp; Bar"/> 
```

相关页面的文档类型是 HTML5，即

```
<!doctype html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T20:51:31.193

在 XHTML 中，这似乎是关于，第一个不合适，应该使用第二个。

[您可以使用W3C Markup Validator](http://validator.w3.org/)快速检查这一点，但权威参考是 XML 1.0 规范，第 2.4 节[字符数据和标记](http://www.w3.org/TR/REC-xml/#syntax)：

“与符号 (&) 和左尖括号 (<) 不得以其文字形式出现，除非用作标记分隔符，或者在注释、处理指令或 CDATA 部分中。如果其他地方需要它们，则必须分别使用数字字符引用或字符串“ `&amp;`”和“ `&lt;`”对其进行转义。”</p>

# jquery - Chrome 开发工具：告诉我什么类型的事件附加到元素但哪个文件？

> ID：14881737
> 
> 赞同：5
> 
> 时间：2013-02-14T18:36:26.257
> 
> 标签：jquery, google-chrome, google-chrome-devtools

在 Chrome 中，当我右键单击 DOM 元素以查看附加了哪些事件侦听器时，它总是显示 jquery.min.js:2 。但是，我想知道我的哪些 JavaScript 文件包含该侦听器（例如单击事件侦听器）。

例如，哪个文件中有此代码？

```
$('#clickMe').on('click', function(e){ //clicked}); 
```

![在此处输入图像描述](../Images/db1727a7519dfb2c288973d39b0f594b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T22:27:49.480

If you use addEventListener (instead of $(...).click() ) then Chrome Dev Tools will show you the line in your file where that handler was added.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T18:37:32.053

Chrome 无法知道这一点。

编写`$(...).click(function)`时，添加到函数中的事件处理程序始终在 jQuery 中。
Chrome 无法知道 jQuery 事件处理程序最终会运行什么回调。

# c - 文件的内存映射是否存在

> ID：14881741
> 
> 赞同：0
> 
> 时间：2013-02-14T18:36:38.147
> 
> 标签：c

如果该文件还没有一个文件，我必须内存映射一个文件。我提供的代码不起作用。我从另一个文件调用这个函数两次，每次它创建不同的 mmapPtr。

```
char *mmapPtr;

void MemoryMapFile()
{

    int fd;
    struct stat sbuf;
    if(mmapPtr==NULL) <--- why is this executed when I called MemoryMapFile() second time
    {
        // get file descriptor of file
        if ((fd = open("example.c", O_RDONLY)) == -1) 
        {
            perror("open");
            exit(1);
        }
        if (stat("example.c", &sbuf) == -1) 
        {
            perror("stat");
            exit(1);
    }
        if ((data = mmap((caddr_t)0, sbuf.st_size, PROT_READ, MAP_SHARED, fd, 0)) ==  (caddr_t)(-1)) 
        {
            perror("mmap");
            exit(1);
        }
        printf("mmap pointer %p \n",mmapPtr);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T18:45:01.873

如果 char* mmapPtr 不是全局或静态指针，则该行

```
if(mmapPtr==NULL) 
```

永远不会返回 true，因为未初始化的指针具有随机值，而不是 NULL 值。

如果你声明

```
char *mmapPtr = NULL; 
```

它应该可以工作，（忽略可能的其他错误）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T18:50:11.767

1） mmapPtr 需要一个初始值，以便您能够将其与 NULL 或其他内容进行比较

```
char *mmapPtr = NULL; 
```

2）一旦这个工作，你进入 if 块，你永远不会分配 mmapPtr 任何其他值

```
mmapPtr = data; // I guess, as data is not defined in this snippet 
```

# c# - NullReferenceException 并不总是在应该抛出的时候抛出

> ID：14881746
> 
> 赞同：3
> 
> 时间：2013-02-14T18:36:57.497
> 
> 标签：c#, nullreferenceexception

我注意到在使用 Visual Studio 2010 开发我的 C# 应用程序时有一个奇怪的地方。在某些情况下，据我所知，应该抛出 NullReferenceException 时不会抛出异常。相反，应用程序会继续正常运行，但会卡住，以至于我无法正常关闭它并被迫将其杀死。

例如，考虑以下情况：

```
public class MyControl : UserControl
{
    private SomeClass myObj;
    public MyControl()
    {
        Bar();
        myObj = new SomeClass();
    }

    public void Bar()
    {
        myObj.SomeProperty = 5; // myObj is null here but no exception gets thrown
    }
} 
```

代码在执行时不会抛出异常，而是`myObj.SomeProperty = 5;`跳出函数返回到`MyControl`父窗体调用构造函数的位置。我可以让调试器在其他情况下捕获 NullReferenceExceptions（以及其他异常），而不是像这样。

应该在这里抛出 NullReferenceException 还是我误解了有关 C# 和/或 .NET 的一些东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T18:43:20.533

**原因**

在调用堆栈的某个地方，一个 try/catch 块正在包装这个异常并“优雅地”处理它。

**如何查看已处理的异常**

如果您*真的*想检查是否*抛出异常*，无论它是否是*用户未处理的*，您都需要启用菜单下的`Thrown`异常复选框。`Common Language Runtime Exceptions``Debug > Exceptions...`

**重复**

启用抛出异常设置，再试一次，您将收到有关异常的通知。

**其他可能性**

您的代码可能已过期。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T18:43:04.350

在VS中，进入Debug->Exceptions->Common Language Runtime Exceptions，勾选Thrown，然后再试一次。它会告诉你是否在其他地方发现了异常。

# bash - 使用 BOM 对 UTF-8 文件进行分类的正确方法是什么？

> ID：14881748
> 
> 赞同：1
> 
> 时间：2013-02-14T18:37:14.960
> 
> 标签：bash, text, utf-8, postgresql-9.1

我想将多个 UTF-8 文本文件放在一起，而文件中间没有多个 BOM。除了从每个文件中剥离 BOM 之外，还有其他合适的方法吗？

我的问题是，在剥离 BOM 并将文件组合在一起之后，我无法将数据复制到 Postgres 表中。Postgres 抱怨数据不是 UTF-8。我可以很好地复制带有 BOM 文件的小型原始文件之一。只是剥离了所有 BOM 的组合文件会导致问题。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-10T23:49:14.933

UTF-8 中没有字节顺序的歧义，因此不需要 BOM。处理 UTF-8 的任何程序都不应该需要这样的东西。如果 BOM 在 UTF-8 流的开头意外出现，则它始终是字节 EF BB BF。从 UTF-8 中删除 BOM 的正确方法是首先检查它是否以这三个字节开头，然后删除这些字节。如果从不以这三个字节开头的 UTF-8 流中删除三个字节，则不是在删除 BOM，并且可能会损坏 UTF-8。

# java - 如何解决“VM初始化期间的错误”（Java）？

> ID：14881751
> 
> 赞同：2
> 
> 时间：2013-02-14T18:37:18.607
> 
> 标签：java, jvm

我有一个 64 位 Windows 7 操作系统，我安装了 Java 创建了一个名为的新环境变量`PATH`并写入了文件夹的路径`bin`。当我写`javac`它工作正常，但当我启动程序它说

```
Error occurred during initialization of vm java.nio.charset.unsupportedcharsetexception 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T16:00:55.073

提到的例外

> vm java.nio.charset.unsupportedcharsetexception 初始化时出错

使用错误的字符编码时可能会抛出（如此[处](https://stackoverflow.com/questions/12265001/java-nio-charset-unsupportedcharsetexception-x-mac-roman-in-jsoup-getting-a-web)所述）。但这也可能是由您当前的 Java 安装引起的，在 64 位平台上安装了 32 位版本。

请确保您使用正确的 JRE（64 位）和正确的 JDK 版本。如果旁边有不同的安装，请确保您使用的是正确的 PATH。如果目标平台不同，Java 可能会抛出此错误。所以在这种情况下的解决方案：删除所有以前安装的JRE和JDK并重新安装一个干净的JDK 64bit（通常包括JRE）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T17:40:41.617

在使用 Eclipse 切换到新工作区后，我今天遇到了同样的错误。

这就是发生的事情：Eclipse 决定在我的 Java 目录中选择文件夹“jre7”作为默认 JRE（这会产生上述错误）并且不提供替代选择。（通常我在 Java 目录中使用“jdk1.7.xx”，它显然还包含一个 JRE...）

简单修复：通过 Eclipse Window -> Preferences -> Java -> Installed JREs 删除错误的条目并将路径添加到正确的文件夹。不幸的是，如果已经导入了任何项目或配置了服务器，Eclipse 不会将它们更新为新的标准 VM，因此必须手动完成。

不确定此设置是否适用于您的具体问题，但很容易遇到此错误。一旦您安装了 Eclipse 自动选择的不工作（并且被遗忘）的 JRE。

# sql-server - 如何将CSV文件导入具有不同列数的SQL Server？

> ID：14881761
> 
> 赞同：0
> 
> 时间：2013-02-14T18:37:58.917
> 
> 标签：sql-server, sql-server-2005, ssis

我们想再次探索使用 SQL SSIS 2005 导入，其中 CSV 文件为每行分隔不同的列数。IE。

假设前 3 行：

```
"1", "FirstName1", "LastName1"
"2", "FirstName2", "LastName2"
"3", "FirstName3", "LastName3" 
```

4-5行：

```
"210", "Crows st", "Melbourne", "VIC"
"212", "Cr st", "Melbourne", "VIC" 
```

其他：

```
"100", "Activities 1"
"101", "Activities 2" 
```

我们所做的唯一方法是，如果数据少于 100 万行，我们可以导入 Excel，然后导出为 CSV 或制表符分隔并导入 SQL Server。或者，如果超过 100 万条记录，我们可以导入 Ms Access 2007/2010 并重新导入 SQL（假设数据不超过 2GB）。这些类型的解决方案效果很好！！！

有没有直接针对 SQL 的解决方案？我们仍在使用 Ms SQL Server 2005 BTW。我们之所以问，是因为 Ms Access 的大小有 2GB 的限制，而我们的数据超过 2GB ！！！当然，我们可以根据行数拆分此文件，但我们发现非常混乱。

期待输入。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T20:40:49.190

你可以做到，但这很复杂，我能做的最好的事情就是为你指明正确的方向。它涉及使用源类型的脚本组件和指向每个不同目标的条件拆分。脚本组件将读取数据并创建源行。在这样做的同时，它会创建一个名为“RowType”的额外列，条件拆分对象将使用该列。

希望有帮助，祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T18:58:02.410

由于文件中的三组数据似乎是三个不同的实体（客户、地址、活动），我假设您希望在流程结束时将它们放入三个不同的表中。这意味着无论如何都会发生拆分数据，这只是您在加载过程中在哪里进行的问题。

我的方法是使用一个小脚本（Python、Perl、PowerShell 等）将文件拆分为三个单独的文件。您可以从 SSIS 包中调用脚本，以将所有工作流集中在一个地方。之后，您只需将三个连接器添加到您的包并将数据加载到您想要的任何表中。

# numpy - 从 Cython 调用 clapack

> ID：14881762
> 
> 赞同：2
> 
> 时间：2013-02-14T18:38:03.823
> 
> 标签：numpy, cython, lapack

我编写了以下代码来从 Cython 调用 clapack 例程 dgelsy_，但它没有为最小二乘问题提供正确的解决方案。

```
cimport numpy as np
import numpy as np
ctypedef np.float64_t NP_FLOAT_t
ctypedef np.int_t NP_INT_t
ctypedef np.uint8_t NP_BOOL_t    
ctypedef int integer

cdef extern from "clapack.h":
    integer dgelsy_(integer *m, integer *n, integer *nrhs, 
    double *a, integer *lda, double *b, integer *ldb, integer *
    jpvt, double *rcond, integer *rank, double *work, integer *
    lwork, integer *info)

cpdef dgelsy(np.ndarray[NP_FLOAT_t,ndim=2] A, np.ndarray[NP_FLOAT_t,ndim=1] b, np.ndarray[NP_INT_t,ndim=1] jpvt):
    cdef integer m = A.shape[0]
    cdef integer n = A.shape[1]
    cdef integer nrhs = 1
    cdef integer lda = m
    cdef integer ldb = m
    cdef integer rank
    cdef NP_FLOAT_t rcond = 1e-16
    cdef integer lwork = -1
    cdef integer info

    #First call as a workspace query
    cdef np.ndarray[NP_FLOAT_t, ndim=1] work1 = np.empty(shape=1,dtype=np.float)
    dgelsy_(&m, &n, &nrhs, <double*>A.data, &lda, <double*>b.data, &ldb, 
            <integer*>jpvt.data, &rcond, &rank, <double*>work1.data, &lwork, &info)

    #Now the actual call to solve the problem
    lwork = <integer>work1[0]
    cdef np.ndarray[NP_FLOAT_t, ndim=1] work2 = np.empty(shape=lwork,dtype=np.float)
    dgelsy_(&m, &n, &nrhs, <double*>A.data, &lda, <double*>b.data, &ldb, 
            <integer*>jpvt.data, &rcond, &rank, <double*>work2.data, &lwork, &info)
    return rank, info 
```

我相信我的 setup.py 文件是正确的。我的代码编译、链接和运行，但我收到编译时警告，我得到的解决方案不正确。这是我的 Python 测试代码：

```
import numpy
import cylapack #cylapack is my cython module with the code above
numpy.random.seed(1)
A = numpy.random.normal(size=(100,10))
A_ = A.copy()
x = numpy.random.normal(size=10)
b = numpy.dot(A,x) + numpy.random.normal(size=100)
b_ = b.copy()
pivots = numpy.zeros(shape=10,dtype=numpy.int)

print cylapack.dgelsy(A,b,pivots)
print pivots
x_ = numpy.linalg.lstsq(A_,b_,1e-16)[0]
print numpy.sum((numpy.dot(A_,x_) - b_)**2)
print numpy.sum((numpy.dot(A_,b[0:10]) - b_)**2) 
```

输出以下内容：

```
(10, 0)
[25769803780 12884901896 30064771077 38654705666  4294967306           0
           0           0           0           0]
99.8269537854
1087.62032064 
```

最后两个数字分别是 numpy 和 lapack 解决方案的残差平方和。它们应该是相同的，但显然 lapack 解决方案实际上并不正确。这是我的编译器警告：

```
cylapack.c:1424: warning: passing argument 1 of 'dgelsy_' from incompatible pointer type
cylapack.c:1424: warning: passing argument 2 of 'dgelsy_' from incompatible pointer type
cylapack.c:1424: warning: passing argument 3 of 'dgelsy_' from incompatible pointer type
cylapack.c:1424: warning: passing argument 5 of 'dgelsy_' from incompatible pointer type
cylapack.c:1424: warning: passing argument 7 of 'dgelsy_' from incompatible pointer type
cylapack.c:1424: warning: passing argument 8 of 'dgelsy_' from incompatible pointer type
cylapack.c:1424: warning: passing argument 10 of 'dgelsy_' from incompatible pointer type
cylapack.c:1424: warning: passing argument 12 of 'dgelsy_' from incompatible pointer type
cylapack.c:1424: warning: passing argument 13 of 'dgelsy_' from incompatible pointer type
cylapack.c:1495: warning: passing argument 1 of 'dgelsy_' from incompatible pointer type
cylapack.c:1495: warning: passing argument 2 of 'dgelsy_' from incompatible pointer type
cylapack.c:1495: warning: passing argument 3 of 'dgelsy_' from incompatible pointer type
cylapack.c:1495: warning: passing argument 5 of 'dgelsy_' from incompatible pointer type
cylapack.c:1495: warning: passing argument 7 of 'dgelsy_' from incompatible pointer type
cylapack.c:1495: warning: passing argument 8 of 'dgelsy_' from incompatible pointer type
cylapack.c:1495: warning: passing argument 10 of 'dgelsy_' from incompatible pointer type
cylapack.c:1495: warning: passing argument 12 of 'dgelsy_' from incompatible pointer type
cylapack.c:1495: warning: passing argument 13 of 'dgelsy_' from incompatible pointer type 
```

显然，编译器抱怨我所有的整数指针（我尝试使用 long 而不是没有变化）。我怀疑有一些我不理解的基本内容。谁能告诉我我可能做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T19:09:00.290

我本来不想回答我自己的问题，但我现在想通了。问题是 lapack 需要 Fortran 风格的列优先顺序的矩阵，但 numpy 默认使用 C 风格的行优先顺序。如果在我的测试代码中更改此行：

```
A = numpy.random.normal(size=(100,10)) 
```

对此：

```
A = numpy.random.normal(size=(10,100)).transpose() 
```

然后它工作正常。不过，我仍然不理解编译器警告或枢轴中的值，但它们似乎与问题的正确解决方案无关。

# php - php 在使用 SimpleHTMLDOM 渲染之前抓取页面的内容

> ID：14881764
> 
> 赞同：0
> 
> 时间：2013-02-14T18:38:08.390
> 
> 标签：php, simple-html-dom

好的，标题很模糊，但我只是不知道如何措辞。

[我想要做的是在渲染之前解析整个页面，然后使用Simple HTML DOM PHP](http://simplehtmldom.sourceforge.net/manual.htm)从页面中选择某个 div并渲染它而不是整个页面，如果`header`页面的通过`if(isset($_SERVER[]`调用匹配

麻烦的是，我不知道该怎么做，我无法使用 PHP 选择当前页面（使用`$_SERVER[]`？）。我什至不知道我是否有道理。

假设我们从外部库的工作原理开始：

```
$html = file_get_html(''); // Get HTML of this page.. somehow
$div = $html->find('div[id=mainContent]'); // or 'div#mainContent' 
```

但是我如何回显那个 div 的内容呢？这会首先呈现页面吗？

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T18:41:05.643

尝试使用[ob_start](http://www.php.net/manual/en/function.ob-start.php)和[ob_get_clean](http://www.php.net/manual/en/function.ob-get-clean.php) :)

```
ob_start();

echo "Hello World";

$html = ob_get_clean(); 
```

现在`$html`将包含`"Hello World"`. `ob_start();`需要位于代码的开头，并且`ob_get_clean();`在您想停止收集内容的时刻。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T20:29:30.540

您可以按照建议使用更简洁的方式获取此信息`ob_get_contents`。通过适当地使用核心 PHP 指令和包含，您可以完全不必触及现有的 PHP*文件*！

```
<?php
    // This goes before the page, and this can be done automatically (i.e. without
    // modifying the existing PHP file) using auto prepend:
    // http://www.php.net/manual/en/ini.core.php#ini.auto-prepend-file
    ob_start();
?>

// The "old" page ...

<?php
    // This goes after the page, and again can be done automatically using
    // auto append (see above).
    // This 'if' can also check whether this page is one of those that must be
    // manipulated, or not.
    if(!isset($_SERVER['EXAMPLE_HEADER']) || ('false'==$_SERVER['EXAMPLE_HEADER']))
    {
        $html = ob_get_clean();

        // Include is only necessary in this scope -- full path may be needed, though
        include_once('simple_html_dom.php');

        // Here, $html is parsed to yield a DOM object
        // ...

        foreach($dom->find('div[id=mainContent]') as $div)
        {
            echo $div->innertext;
        }
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T20:18:58.107

我想出了一个示例页面：

```
<?php 
include_once('simple_html_dom.php');

if(!isset($_SERVER['EXAMPLE_HEADER']) && $_SERVER['EXAMPLE_HEADER'] == 'false'){ ?>

<html>
<head></head>
<body></body>
</html>

<?php 
}else{
$html = file_get_html('thispage.html');
foreach($html->find('div[id=mainContent]') as $div) {
echo $div->innertext;
} ?> 
```

显然，示例 html 代码应该是您的页面。所以页面询问是否发送了标题，如果没有，它照常显示页面，如果是，它将在页面中搜索特定的 div（在这种情况下`mainContent`）并显示它。

我猜这会帮助其他人。但使用`ob_start`也有帮助！

# c# - 使内部类不在库外使用

> ID：14881770
> 
> 赞同：1
> 
> 时间：2013-02-14T18:38:32.977
> 
> 标签：c#, .net, visual-studio, resharper

由于在两者中都将public 作为默认修饰符`classes`/ `structs`/令人失望，因此我现在正在研究的解决方案有大量的公共类，这些公共类没有在它们定义的库之外使用。所以我想做所有这些内部类。而且我不想手动进行。`enums``Visual Studio``Resharper`

有什么方法可以自动执行此任务吗？一般来说，我想要`Adjust visibility`重构之类的东西（类似于 Resharper's `Adjust namespaces`）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T18:43:24.457

`public`不是 C# 中的默认访问修饰符。根据[文档](http://msdn.microsoft.com/en-us/library/ms173121.aspx) `internal`，如果您确实指定了任何访问修饰符，则它是默认访问修饰符。

如果您明确设置公共访问修饰符，那么我认为最好手动检查您的代码并选择最佳访问修饰符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T18:50:19.910

您可以使用正则表达式进行查找和替换。例如，在 Visual Studio 2012 中，以下内容将满足您的需求（在搜索框中启用正则表达式匹配之后）：

```
public (.*(class|enum|struct)) 
```

用。。。来代替：

```
internal $1 
```

之后，您可以使用类视图仅显示公共成员并执行手动留下的那些。

* * *

对于 Visual Studio 2010，语法是不同的。我认为它是这样的，但无法测试它：

```
public {:.*(class|enum|struct)} 
```

用。。。来代替：

```
internal \1 
```

您可以在此处找到[更多信息](http://msdn.microsoft.com/en-us/library/vstudio/2k3te2cs.aspx)。

# java - 当 Hibernate 版本升级到 4.2.0.CR1 时，Hibernate.INTEGER 不可用

> ID：14881775
> 
> 赞同：20
> 
> 时间：2013-02-14T18:38:56.557
> 
> 标签：java, oracle, hibernate, compiler-errors

我刚刚将 Hibernate 从 3.2.5 升级到[4.2.0.CR1](http://sourceforge.net/projects/hibernate/files/hibernate4/4.2.0.CR1/hibernate-release-4.2.0.CR1.zip/download)。我在 DAO 类中使用类似以下方法的方法来定位 Oracle 10g 中的当前行号`createSQLQuery()`。

```
SELECT row_num
FROM   (SELECT row_number()
                 OVER (
                   ORDER BY banner_id DESC) AS row_num,
               banner_id
        FROM   banner_images
        ORDER  BY banner_id DESC)
WHERE  banner_id = :id 
```

```
@Override
@SuppressWarnings("unchecked")    
public int getCurrentRow(String id, int rowsPerPage)
{        
    return (Integer) sessionFactory
                    .getCurrentSession()
                    .createSQLQuery("Above query")
                    .addScalar("row_num", Hibernate.INTEGER)  //<------- ???
                    .setParameter("id", Long.parseLong(id))
                    .uniqueResult();
} 
```

上面代码片段中显示的`.addScalar("row_num", Hibernate.INTEGER)`方法会发出编译时错误。

```
cannot find symbol
symbol:   variable INTEGER
location: class Hibernate 
```

`org.hibernate.Hibernate`它在课堂上不可用。我使用的 NetBeans IDE 是 7.2.1 没有列出这样的常量。谷歌搜索无法引导我找到实际的解决方案。那么这个版本的Hibernate（4.2.0.CR1）有什么替代方案呢？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-14T18:54:58.393

这个 Hinernate.Integer 自 3.6.x 起已被弃用

你应该`IntegerType.INSTANCE`改用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-12-04T05:24:11.987

如果您使用的是旧版本的 Hibernate，但不想在 3.5.x 或更低版本上使用已弃用的值，则必须使用`new IntegerType()`，因为`IntegerType.INSTANCE`在 3.6 之前不存在。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-09-07T21:55:59.317

做：

*   导入 org.hibernate.type.StandardBasicTypes；
*   用 StandardBasicTypes.INTEGER 替换 Hibernate.INTEGER。

# .net - RDLC 报告列冻结点击异常

> ID：14881780
> 
> 赞同：1
> 
> 时间：2013-02-14T18:39:19.673
> 
> 标签：.net, rdlc

我有一个 RDLC 报告，需要冻结前两列（水平滚动时，它们需要保持原位）。此外，我需要冻结 Tablix 中的第一行（我们称之为标题）。我可以使用高级模式来冻结标题行。然后使用 Tablix 选项，我可以冻结前两列。

这看起来像是一个解决方案，但是，前两列是可展开的，并且允许单击以进行钻取。一旦开始水平滚动，展开（加号）和钻取单击将不起作用。

是否有另一种方法可以使用“高级模式”冻结前两列，从而允许这些列中的值可点击？

提前谢谢！

# html - 为什么我的 html 画布游戏无法在 Firefox 上运行？

> ID：14881781
> 
> 赞同：2
> 
> 时间：2013-02-14T18:39:23.700
> 
> 标签：html, firefox, html5-canvas

我为情人节制作了这个简单的游戏，由于某种原因，我的画布没有在 Firefox 上绘制到屏幕上。它可以在 safari 和 chrome 中运行，没有任何问题。我是网络开发的新手，所以我在这里完全没有想法。

[http://schwiz.net/valentine/?lover=StackOverflow%20User](http://schwiz.net/valentine/?lover=StackOverflow%20User)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T19:18:33.287

尝试使用这个：

```
function updateCanvasDimensions() {
  canvas.width = document.body.clientWidth;
  canvas.height = document.body.clientHeight; 
```

而不是`document.width`和`document.height`。我似乎在 Firefox 和 Chrome 上都可以使用，但我还没有在其他浏览器上尝试过。

**编辑**见：[https ://developer.mozilla.org/en-US/docs/DOM/document.width](https://developer.mozilla.org/en-US/docs/DOM/document.width)

# javascript - 自动取消 jqGrid 请求

> ID：14881790
> 
> 赞同：1
> 
> 时间：2013-02-14T18:39:50.690
> 
> 标签：javascript, ajax, jqgrid, xmlhttprequest

我认为这个用户问的问题和我问的一样，但是他提出问题的原因不同，所以他接受了不同的解决方案。我需要做他最初问的事情：

[自动取消 jqgrid 请求](https://stackoverflow.com/questions/13571433/automatically-cancelling-jqgrid-request)

我的 jqGrid 有一个搜索工具栏（出现在列标题下方但在数据上方的输入字段）。大多数列都有下拉列表 (stype=select)，其中列出了该列的可用过滤器选项，顶部有一个“全部”选项。使用填充我的 jqGrid 的 JSON 数据进行响应的服务器端代码很复杂，因此有些慢，尤其是在没有太多过滤条件的情况下。这意味着如果用户选择“全部”，则可能需要几秒钟才能显示任何结果。这本身很好，但是如果用户在响应返回之前进行了另一个过滤器选择，则网格不会取消现有请求，也不会提交新请求，因此在用户进行第二次选择*之后的某个时间点，**第一个*选择。此外，当您*更改*过滤器选择时，网格会自动更新，因此要让它显示您想要的数据，您必须将您的选择更改为其他内容，等待加载，然后再将其更改回来。

这是我到目前为止所尝试的：

```
$(document).ready(setupGrid);

var currentGridRequest;

function setupGrid() {
    var grid = $("#grid").jqGrid({
        ...
        loadError: function(xhr, status, error) {
            currentGridRequest = undefined;
        },
        loadComplete: function(data) {
            currentGridRequest = undefined;
        },
        loadBeforeSend: function(xhr, settings) {
            if (currentGridRequest !== undefined) {
                currentGridRequest.abort();
            }
            currentGridRequest = xhr;
        }
    });
} 
```

我遇到的问题是 loadBeforeSend 事件实际上不会触发，如果已经有一个正在运行的请求。我从事件文档页面（[http://www.trirand.com/jqgridwiki/doku.php?id=wiki:events](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:events)）尝试了其他事件： beforeRequest 和 jqGridToolbarBeforeSearch 都表现出相同的行为。

我可以做些什么来中止正在进行的请求并根据用户最近的选择继续搜索？这是 jqGrid 中的错误吗？我最初在 4.2 版上遇到了这个问题；我刚刚升级到 4.4.4，这种行为没有改变。

查看 jqGrid 代码，如果不更改 jqGrid 代码本身，我看到的行为似乎是不可避免的。jqGrid 在每个请求开始时设置一个标志（ts.grid.hDiv.loading），并在结束时清除它；设置此标志时，将不会提交新的过滤条件，也不会触发任何事件。

我还考虑修改我的 JSON 响应，使其包含请求条件，然后编写一些 JS 代码来将响应与当前条件选择进行比较。如果它们不匹配，我会忽略响应而不将其呈现到网格中。由于 jqGrid 甚至没有提交第二组标准，因此该选项不在讨论范围内（即使我可以解决该问题，我目前的方法似乎更可取）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:02:15.833

我找到了一种方法来做我想做的事。我在几个地方使用了 jqGrid（在少数情况下包括同一页面上的多个网格），所以我将它分解为一个我可以从任何地方调用的函数，它包含自己的范围来管理是否存在当前请求；只需传递一个网格，它就会附加所有必要的事件处理程序。请注意，这将覆盖您可能为相关事件定义的任何现有处理程序。

```
function applyJqgridHandlers(grid) {
    (function(self, undefined) {
        var currentRequest;
        function abortCurrentRequestIfAny() {
            if (currentRequest !== undefined) {
                currentRequest.abort();
            }
        }
        self.clearCurrentRequest = function() {
            abortCurrentRequestIfAny();
            currentRequest = undefined;
        };
        self.setCurrentRequest = function(xhr) {
            abortCurrentRequestIfAny();
            currentRequest = xhr;
        };
    })(grid.currentRequestHolder = {});

    grid.currentRequestHolder.clearCurrentRequest();
    grid.jqGrid('setGridParam', {
        loadError: function(xhr, status, error) {
            grid.currentRequestHolder.clearCurrentRequest();
        },
        loadBeforeSend: function(xhr, settings) {
            grid.currentRequestHolder.setCurrentRequest(xhr);
        },
        loadComplete: function(data) {
            grid.currentRequestHolder.clearCurrentRequest();
        }
    });
    grid.bind('jqGridToolbarBeforeSearch', function() {
        grid.currentRequestHolder.clearCurrentRequest();
        this.grid.hDiv.loading = false;
    });
}; 
```

然后我只需从 setupGrid() 的末尾添加对该函数的调用。

此代码明确清除了 ts.grid.hDiv.loading 标志，该标志不是已发布的 jqGrid API 的一部分，因此我认为此解决方案相当脆弱；不能保证它将继续适用于 jqGrid 的未来版本。如果有人对解决此问题的更好（不那么脆弱）方法有任何建议，我会全力以赴。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-15T12:05:47.933

@JakeRobb 谢谢你的想法！我冒昧地创建了一个可以通用的函数，而不会禁用原始 jqGrid 的任何功能。

在 jqGrid 版本 5.2.1 上测试

# jqGrid 快速搜索

如果用户应用了新的过滤器，也就是自动取消旧的请求。

```
/**
 * Add the ability to rapidly search using the jqGrid Toolbar
 *
 * @param jqGridInstance string|object
 *
 * @author Kiril Reznik
 */
var jqGridRapidSearch = function(jqGridInstance) {
    var currentRequest = null,
        abortRequest = function() {
            if (currentRequest !== null) {
                currentRequest.abort();
            }
        },
        setRequest = function(xhr) {
            abortRequest();
            currentRequest = xhr;
        },
        clearRequest = function() {
            abortRequest();
            currentRequest = null;
        },
        $jqGrid = null;
    if ($.type(jqGridInstance) === 'string') {
        $jqGrid = $(jqGridInstance);
    } else if ($.type(jqGridInstance) === 'object' && $.type(jqGridInstance.jquery) === 'string') {
        $jqGrid = jqGridInstance;
    } else {
        throw 'jqGridRapidSearch requires a valid jqGrid instance parameter: Grid ID string or jQuery object.';
    }
    $jqGrid.on('jqGridLoadBeforeSend', function(e, xhr, settings) {
        setRequest(xhr);
    });
    $jqGrid.on('jqGridLoadComplete', function(e, data) {
        clearRequest();
    });
    $jqGrid.on('jqGridLoadError', function(e, xhr, status, error) {
        clearRequest();
    });
    $jqGrid.on('jqGridToolbarBeforeSearch', function(e) {
        clearRequest();
    });
};
```

# facebook - Like Button 无法正常工作 - 计数

> ID：14881793
> 
> 赞同：2
> 
> 时间：2013-02-14T18:39:56.823
> 
> 标签：facebook, html, facebook-like, xfbml, facebook-likebox

我将新的点赞按钮集成到我的网站，发现它不起作用。
每次单击“喜欢”时，它都会很快显示“1”，然后它又消失了。没有喜欢的地方。
该站点是全新的，因此该域从未有过类似的按钮。我从另一个fb帐户尝试过，但同样的问题。
在另一个主页上的同一台服务器上是旧的 iframe 按钮，可以正常工作。

我尝试了所有方法，但始终无法正常工作，XFBML、HTML5 甚至旧的 iframe 版本都无法正常工作。这是当前集成的 iframe 中的代码。

```
<iframe src="//www.facebook.com/plugins/like.php?href=http%3A%2F%2Fbemit.eu&amp;send=false&amp;layout=button_count&amp;width=450&amp;show_faces=true&amp;font&amp;colorscheme=light&amp;action=like&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:130px; height:21px;" allowTransparency="true"></iframe> 
```

这是 fb 服务器在尝试点赞时发回的答案：

> for (;;);{"__ar":1,"payload":null,"jsmods":{"require":[["Plugin","disconnect",[],["http://bemit.eu /"]]]}}

对不起我的英语，但我希望有人可以帮助我。如果可能的话，我想要新的喜欢按钮而不是旧的。

在[http://bemit.eu](http://bemit.eu)上是旧的 iframe 版本。
在这个站点上是新的 XFBML 按钮
[http://bemit.eu/cms/front_content.php?idcat=13](http://bemit.eu/cms/front_content.php?idcat=13)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T23:25:58.077

这就解决了。我会告诉你原因。
Facebook 有一个 url 的缓存。[当您在此处调试 url http://developers.facebook.com/tools/debug](http://developers.facebook.com/tools/debug)
时，可以清除该缓存

去那里看看你的 url 和 facebook 元标签出了什么问题，应该清理缓存，一切都会好起来的。
如果将来您在使用类似按钮或共享信息（og 元标记）时遇到问题，您可以使用该链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-01T18:47:27.410

我遇到了同样的问题，终于找到了问题所在。

如果您将喜欢按钮设置为域。并且域的初始页面确实重定向到不同的页面（例如：语言，移动版本），计数器不起作用。它从不同的页面缓存并失败。

将like按钮设置为真实页面。

# python - Glade / 其他 RAD 应用程序与 python / XML

> ID：14881794
> 
> 赞同：0
> 
> 时间：2013-02-14T18:40:00.687
> 
> 标签：python, xml, gtk, gtk3

我正在学习使用 python 创建 GUI 应用程序，但是我不能忍受使用一个简单地使开发比简单地以较低级别的形式创建应用程序和布局更容易的应用程序。类似于更喜欢 HTML 而不是所见即所得的编辑器。

无论如何，用 Python 甚至 XML 自己编写 UI 是否比使用 Glade 之类的 RAD 应用程序更有优势？也许如果有人知道除此处之外的任何其他 pygobject 教程 - [https://python-gtk-3-tutorial.readthedocs.org/en/latest/index.html](https://python-gtk-3-tutorial.readthedocs.org/en/latest/index.html) - 在我看来这非常复杂，那就是赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:05:16.237

手动编写 UI 是为了学习，或者当你有一个动态修改自身的 UI 时。但是为了提高生产力，您应该使用 Glade。

# mysql - mysql慢速简单查询

> ID：14881795
> 
> 赞同：0
> 
> 时间：2013-02-14T18:40:03.393
> 
> 标签：mysql, performance

我有一个非常简单的 sql 查询，它只是一个`select * from "table name"` 我没有索引我的表或其他任何特殊的东西。

问题是，当我通过 执行它时`phpmyadmin`，查询大约需要 0.003 秒，但是当我通过网站中的浏览器执行它时，大约需要 3 分钟！

表中有 20K 行和 19 个字段。谁能帮我？

```
include "config.php"; //Connect to Database

$query= mysql_query("SELECT * FROM table_name");
$num_rsl=mysql_num_rows($query);
echo '<table border="1">';
    for($i=0; $i <$num_rsl; $i++)
{
echo '<tr>';
$row=mysql_fetch_assoc($query);

    echo '<td>'.$row['id'].'</td>';
    echo '<td>'.$row['idLeistung'].'</td>';
    echo '<td>'.$row['dtEAN'].'</td>';
    echo '<td>'.$row['dtReifenBreite'].'</td>';
    echo '<td>'.$row['dtReifenQuerschnitt'].'</td>';
    echo '<td>'.$row['dtReifenBauart'].'</td>';
    echo '<td>'.$row['dtReifentragfahigkeit'].'</td>';
    echo '<td>'.$row['dtReifenGeschwindigkeitsindex'].'</td>';
    echo '<td>'.$row['dtReifenTTTL'].'</td>';
    echo '<td>'.$row['dtReifenProfil'].'</td>';
    echo '<td>'.$row['dtHersteller'].'</td>';
    echo '<td>'.$row['dtbestand'].'</td>';
    echo '<td>'.$row['FZG'].'</td>';
    echo '<td>'.$row['dtEinsatzZweck'].'</td>';
    echo '<td>'.$row['dtArtikelNr'].'</td>';
    echo '<td>'.$row['dtBeschreibung'].'</td>';
    echo '<td>'.$row['dtArtikelNrA2'].'</td>';
    echo '<td>'.$row['dtFremdVKPreis'].'</td>'; 
    echo '</tr>';
}
echo '</table>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T22:27:16.340

通常，phpmyadmin 会修改您通过它向 MySQL 发出的查询，以限制结果集中的行数。您的

```
SELECT * FROM table_name 
```

最有可能被 phpmyadmin 更改为

```
SELECT * FROM table_name LIMIT 0, 30 
```

拉三十行肯定比拉所有行花费更少的时间。

@scones 在评论中提到了这一点：从表中提取 20K 行，将它们变成一个大的旧 HTML 表，然后通过网络将它们发送到您的浏览器需要花费大量时间。但是，经过的时间可能主要取决于您的 Web 服务器（运行 PHP 的地方）的性能以及服务器和浏览器之间的线路。

# javascript - 使用 enter 在 Firefox 上选择项目 twitter bootstrap typeahead

> ID：14881797
> 
> 赞同：1
> 
> 时间：2013-02-14T18:40:16.163
> 
> 标签：javascript, asp.net, firefox, twitter-bootstrap, typeahead

当您按 Enter 从预先输入的项目中选择一个项目时，我遇到了 Firefox 提交我的表单的问题。Chrome 和 Internet Explorer 按预期工作，您按一次 Enter 键从预先输入的项目中选择项目，然后再次按 Enter 键提交。我已经能够禁用按 Enter 完全提交

```
function stopEnter(e) {
        if (e.keyCode == 13) {
            e.stopPropagation();
            e.preventDefault();
        } 
```

我宁愿让 Firefox 像其他浏览器一样工作。这是我的测试代码。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
    <title></title>
    <link href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css" rel="stylesheet" />
    <script type="text/javascript" src="http://twitter.github.com/bootstrap/assets/js/jquery.js"></script>
    <script type="text/javascript" src="http://twitter.github.com/bootstrap/assets/js/bootstrap-typeahead.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            var abc = ['asd', 'bvc', 'cxz', 'dsa', 'ewq', 'fgh', 'gfd', 'hrf', 'iuuy', 'aqq', 'bvb', 'ccc'];
            $('#typer').typeahead({ source: abc }).focus();
        });
    </script>
</head>
<body>
    <form id="form2" runat="server" >
        <asp:Panel DefaultButton="button1" runat="server">
            <div>
                <asp:TextBox data-provide="typeahead" ID="typer" autocomplete="off" runat="server" />
                <asp:Button text="submit" ID="button1" runat="server" OnClick="button1_Click" />
            </div>
         </asp:Panel>
    </form>
</body>
</html> 
```

后面的代码

```
protected void button1_Click(object sender, EventArgs e)
{
    Response.Write(typer.Text);
} 
```

看起来当我删除面板时，它可以按需要运行，但在实际页面上，我在模态的母版页上有此代码，当您按下 Enter 时，它将在您所在的原始页面上提交一个按钮。

# c# - 如何在 C# 中解析 json 提要？

> ID：14881799
> 
> 赞同：1
> 
> 时间：2013-02-14T18:40:19.513
> 
> 标签：c#, .net, asp.net-mvc, object, dictionary

如何在 C# 中解析 json 提要？

到目前为止，我尝试了以下操作：

```
 string fileurl = "http://itunes.apple.com/rss/customerreviews/id=123456789/json";

        var jsonStr = new WebClient().DownloadString(fileurl);

        JavaScriptSerializer serializer = new JavaScriptSerializer();
        var jsonObject = serializer.Deserialize<IDictionary<string, object>>(jsonStr); 
```

一旦我开始`Dictionary<string, object> dic1 = new Dictionary<string, object>();`使用上面的代码。

我迭代得到`value object[]`如下所示。

```
 foreach (KeyValuePair<String, object> d in dic1)
        {
            var k = d.Key;
            var v = d.Value;
         } 
```

现在是`value`is`System.Object[]`类型，所以任何人都可以帮我解析这个对象，如下图所示？我是新手，所以任何帮助都会很棒！

![在此处输入图像描述](../Images/fb74f01f6c2d44e667bd01122ba25b42.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T19:43:19.407

我倾向于在这种情况下使用 JSON.NET。这里有一个例子，他使用 LINQ 解析 rss 提要，

[http://james.newtonking.com/projects/json/help/](http://james.newtonking.com/projects/json/help/)

还有一个 SelectToken 方法，它使用路径语法查询解析的 JSON。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T21:19:44.607

也许 ServiceStack 的 JSON 解析器会有所帮助——它支持[动态 JSON](https://github.com/ServiceStack/ServiceStack.Text#supports-dynamic-json-as-well)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T19:17:26.643

您正在反序列化为错误的类型。

在您的代码中，

```
JavaScriptSerializer serializer = new JavaScriptSerializer();
var jsonObject = serializer.Deserialize<IDictionary<string, object>>(jsonStr); 
```

您指定它需要反序列化以键入`IDictionary<string, object>`. 尝试将类型与`object`.

# sql - TSQL 连接参数

> ID：14881802
> 
> 赞同：0
> 
> 时间：2013-02-14T18:40:42.807
> 
> 标签：sql, sql-server, parameters, concatenation

我试图确定为什么我的存储过程不能正确运行。问题是当我使用连接参数时。完成后，我将拥有其中的 6 或 7 个，每个都建立在最后一个之上。我已经尝试了所有变体，包括 =、like、%、空格、没有空格，但无法提出正确的语法来使其可操作。我也做了一个“硬编码”测试，它工作正常，所以数据是正确的。帮助！谢谢

这是代码 -

```
ALTER PROCEDURE [dbo].[rspSCLTEST]

(@RRID as varchar(4),
@State as varchar(2),
@Sub as varchar(75))
AS
BEGIN

SET NOCOUNT ON;

DECLARE @SQL as varchar(4000)

SET @SQL = @State

--add the subdivision to the where statement
If @Sub = 'ALL'
SET @SQL = @SQL
ELSE
 SET @SQL += ' AND (C.SubDivision = '+ @Sub + ')'

SELECT C.CRID, C.DOT, C.RR, C.Pref, C.MP, C.Division, C.SubDivision, C.City, C.Street,
    C.State, C.County, C.RestrictedCounty, C.Remarks, C.SpecialInstructions, C.Route, C.ThirdAppRequired,
    C.MainTrks, C.OtherTrks, C.OnSpur, C.MaxSpeed, C.SubContracted, C.FenceEncroachment, C.Lat, C.Long,
    C.PropertyType, C.WarningDevice,C.Surface, C.ROWNE, C.ROWNW, C.ROWSE, C.ROWSW, C.ROWWidth, C.ExtNE,
    C.ExtNW, C.ExtSE, C.ExtSW, C.TempActive, C.PCO, A.App1Date, A.App1Cut, A.App1Spray, A.App1Inspect, 
    A.App2Date, A.App2Cut, A.App2Spray, A.App2Inspect, A.App3Date, A.App3Cut, A.App3Spray, A.App3Inspect

    FROM Crossings AS C LEFT OUTER JOIN AppData AS A ON C.CRID = A.CRID
    WHERE (C.DeletedCrossing = 0) AND (C.RR = @RRID)
    AND C.State = @SQL

END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T18:46:42.970

问题是您将动态 SQL 与参数替换混淆了。尝试这样的事情：

```
and c.state = @state and (@sub = 'ALL' or c.subdivision = @sub) 
```

你写这个的方式，你正在检查：

```
and c.state = '<state> and c.subdivision = @sub' 
```

也就是说，第二个从句没有被解释为一个*从句*，它被解释为状态的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T18:56:25.960

这一行：

```
SET @SQL += ' AND (C.SubDivision = '+ @Sub + ')' 
```

而这一行：

```
AND C.State = @SQL 
```

出现嫌疑。我只能对您的数据做出假设，但看起来您有两个不同的对象：状态和细分。

C.State 中有哪些类型的数据？它只是州的缩写吗？（俄勒冈州、华盛顿州、密苏里州、明尼苏达州、亚利桑那州等）。如果是这样，您将永远不会得到肯定的结果`WHERE C.State = WA123`（假设“123”是一个细分值）。

无论如何，你能做这样的事情吗？-->

```
WHERE C.State = @state AND C.Subdivision = @sub 
```

# c# - 操作 WPF TextBox LostFocus 事件和绑定的顺序

> ID：14881804
> 
> 赞同：4
> 
> 时间：2013-02-14T18:41:12.040
> 
> 标签：c#, wpf, mvvm, binding

我有一个`Window`代表数据编辑器的 WPF。的`DataContext`是`Window`一个可观察对象（它实现了`INotifyPropertyChanged`）。

每个可观察对象的属性都绑定到`Window`（`TextBox`对于数字类型，`CheckBox`对于`bool`等）中的适当小部件。

我不想让“确定”和“取消”按钮来保留更改的属性；当小部件失去焦点时，我希望将底层数据持久保存到可观察对象。

为此，我处理了小部件的`PreviewLostKeyboardFocus`和`LostFocus`事件。我的撤消框架需要代表当前状态的可观察对象的副本和新状态的副本。该`PreviewLostKeyboardFocus`事件制作对象的副本，并且该`LostFocus`事件实际执行保存到数据库。

但我的问题是：在事件运行**之后**，字段上的绑定实际上并没有更新底层的可观察对象。`LostFocus`最终效果是将 a 中的文本`TextBox`从“A”更改为“B”会将字段中的数据保留为“A”。将其从“A”更改为“B”到“C”将保持“B”。

我在事件处理程序和底层对象的设置器中放置了断点。果然，`PreviewLostKeyboardFocus`先运行，然后`LostFocus`是 ，最后是 observable 对象的 setter。

我想让它尽可能通用，所以虽然我可以告诉 observable 对象使用 更新它自己的属性`KeyboardFocusChangedEventArgs`，但我需要为每个字段单独的事件处理程序，并且可能有很多。

有什么方法可以在和事件**之间**`Binding`运行？**`PreviewLostKeyboardFocus``LostFocus`**

 **XAML：

```
<TextBox Text="{Binding ObjectProperty, StringFormat='{}{0:F5}'}" LostFocus="PersistentTextBox_LostFocus" PreviewLostKeyboardFocus="PersistentTextBox_PreviewLostKeyboardFocus" /> 
```

后面代码中的事件处理程序：

```
private void PersistentTextBox_LostFocus(object sender, RoutedEventArgs e) {
    this.ObservableObject.PersistChanges(this.tempObservableObject);
}

private void PersistentTextBox_PreviewLostKeyboardFocus(object sender, KeyboardFocusChangedEventArgs e) {
    this.tempObservableObject = this.ObservableObject;
} 
```

`ObservableObject`类（二传手）：

```
public class ObservableObject : INotifyPropertyChanged {
    ...
    public Single ObjectProperty {
        get {
            return this._objectProperty;
        }
        set {
            this._objectProperty = value;
            RaisePropertyChanged("ObjectProperty");
        }
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T21:50:46.350

如果我正确理解您的问题，这可能是由于默认情况下`TextBox`更新`Source`焦点丢失时的事实。

解决此问题的一种方法是`TextBox` `UpdateSourceTrigger`将`PropertyChanged`

```
<TextBox Text="{Binding ObjectProperty, UpdateSourceTrigger=PropertyChanged, StringFormat='{}{0:F5}'}" 
```

这将允许在 中进行更改后立即更新底层可观察对象`TextBox`，然后您可以将更改保留在小部件失去焦点事件中

或者您可以在 LostFocus 处理程序中设置并更新 Source `UpdateSourceTrigger`。`Explicit`

```
 <TextBox Text="{Binding ObjectProperty, UpdateSourceTrigger=Explicit, StringFormat='{}{0:F5}'}" 

    private void TextBox_LostFocus(object sender, RoutedEventArgs e)
    {
       (sender as TextBox).GetBindingExpression(TextBox.TextProperty).UpdateSource();
    } 
```**

# c++ - 实现链表

> ID：14881809
> 
> 赞同：0
> 
> 时间：2013-02-14T18:41:24.087
> 
> 标签：c++, linked-list

我正在用 C++ 实现一个链接列表。虽然我过去在 java 中做过这个，但我不明白如何在 C++ 中用指针来做这件事，因为代码可以编译，但是当我运行它时它给了我一个分段错误。我究竟做错了什么？

我的 node.h 文件

```
#ifndef NODE_H
#define NODE_H

#include <string>
using namespace std;

class Node
{
public:

    Node(const string, const int) ;
    ~Node() { }
    void setNext(Node *); // setter for the next variable
    Node * getNext();     // getter for the next variable
    string getKey();      // getter for the key variable
    int getDistance();    // getter for the dist variable

private:
   Node *next;
   int dist;
   string key;
};

#endif 
```

我的 Node.cpp 文件

```
#include "node.h"
#include <string>

Node::Node(string key, int dist){
    key = key;
    dist = dist;
}

void Node::setNext(Node * next){
    next->next;
}

Node * Node::getNext(){
    return this->next;
}

string Node::getKey(){
    return key;
}

int Node::getDistance(){
    return dist;
} 
```

还有我的 main.cpp 文件

```
#include "node.h"
#include <iostream>

using namespace std;

int main(){
    Node* nptr1 = new Node("Test1", 2);
    Node* nptr2 = new Node("Test2", 2);
    Node* temp;

    nptr1->setNext(nptr2);
    temp = nptr1->getNext();
    cout << temp->getKey() << "-" << temp->getDistance() << endl;
} 
```

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T18:49:25.447

您应该将所有成员初始化为定义的值。您不应该将参数和成员命名相同，这几乎总是会导致混淆，或者更有可能导致错误

```
Node::Node(string key_val, int distance)
    : next(0)
{
    key = key_val;
    dist = distance;
} 
```

更好的是，使用成员初始化

```
Node::Node(string key_val, int distance)
    : next(0),
      key(key_val),
      dist(distance)
{
} 
```

正如评论者已经指出的那样，您必须将`next`指针设置`setNext()`为给定参数，并且您不应该*修改*参数，而是修改`this->next`成员

```
void Node::setNext(Node * next_ptr){
    next = next_ptr;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T17:57:42.790

在具有指针/动态内存分配的语言中，链表和其他数据结构的关键是为每个操作映射出所有可能的状态（案例）。您必须确保您的代码在每种情况下都正确处理指针和内存。这可能是您被要求实施它的原因：教您*如何*思考出现的陷阱。因此，我不会简单地给你一个直接的解决方案，而是概述你如何抓住这个机会来理解将帮助你和其他人在未来解决这个问题和问题的基本概念。

即使在看起来是带有尾部插入的 stage1（非常基本的）链表中，您也应该开发某种映射方案。我的个人经验是，对于 a 中的每一行`main()`：

1.  为每个对象绘制一个框
2.  列出框中的所有数据变量
3.  列出非指针变量旁边的任何初始化/分配的值
4.  从指针变量绘制箭头到你*知道*被指向的对象
5.  将指针变量中的箭头绘制到未分配的指针的空白区域

需要了解的一件事是未初始化的数据和指针表现出因操作系统/编译器而异的未定义属性，因此使用合适的初始值定义它们中的大多数通常至关重要。我发现始终在声明时初始化为安全默认值对我很有帮助（在某些情况下这是不可能的或会产生性能问题，但可以根据需要处理这些情况 - 例如*延迟初始化*）。与 Java 不同，基本 C++ 默认不引发空指针异常、提供初始值或垃圾收集（它高度依赖于编译器/库和传递的选项）。充其量，你的程序会出现段错误（一个更普遍的例外，通常意味着你访问了你不应该访问的内存），在更糟糕的情况下，它要么仍然工作但行为不可预测，要么崩溃而没有反馈。因此，您应该使用您的映射方案来验证您没有对指针`NULL`或指向已经`free`/`delete`在它们上执行过的对象的指针执行操作。此外，您需要确保它们指向的位置*是有意义的*。像任何链接方案一样，您可能会遇到悖论，例如将节点链接到自身或以其他方式创建循环链接。

因此，如前所述，跟踪每个操作的所有可能情况也很重要。如果这个程序是一种学习数据结构或指针的方法，正如我所怀疑的那样，你无疑会被要求实现更高级的列表。更高级的列表可能很棘手，因此您应该尽早养成尝试确定执行特定操作可能需要额外注意的习惯（极端情况）。对于列表，您应该考虑列表为空、有 1 个元素、有 2 个元素或 2+ 个元素的情况。您可能还需要考虑是否从开头、结尾或中间的某个位置插入/删除元素。再次，广泛使用映射来了解这些情况将如何发挥作用。您确实应该尝试使用上述方法来考虑这一点，但您也可以检查[维基百科](http://en.wikipedia.org/wiki/Linked_list)或数据结构教科书以获取更多信息。

顺便说一句，正如雷蒙德所说，您可以使用调试器来帮助您查看问题。事实上，如果您以前没有使用过 C/C++ 调试器，那么这是学习的最佳时机。完成这项工作后，请在适用于您的平台的 C/C++ 调试器上查找文档。尝试使用它来单步执行`main()`您的非工作代码，并查看数据值是否与映射中的预期匹配。这种技能将在以后证明是无价的。

另外，请注意，`this`它通常是 C++ 中[的指针](http://en.cppreference.com/w/cpp/language/this)，因此不要将其与 Java/Python 中的使用方式混淆：成员数据使用`this->somedata` *NOT* `this.somedata`访问，正如某些人所建议的那样。话虽如此，为了更加清晰，您可能希望`this->somedata = somedata`在参数名称与成员变量相同的地方使用约定。当然，使用不同参数名称的建议也有效。

# c# - 尽可能快地确定两个列表之间变化的算法？

> ID：14881810
> 
> 赞同：0
> 
> 时间：2013-02-14T18:41:29.293
> 
> 标签：c#, asp.net

我有项目。

这些项目通过 API 从站点 A 下载到我的站点。

我从站点 A 下载所有项目。

我这边有匹配的 JSON 对象。重要的是我需要这样做。

列表 A（我的站点）需要与列表 B（他们的站点）同步。

由于他们的 api 限制，我必须手动同步。

所以有项目和属性：

给定列表 A 和列表 B。什么是快速算法，以便：

```
If A is missing object from B, add it.
If B no longer contains an element found in A, remove it from A.
If an attribute in B is != an attribute in an object from A, update the object in A. 
```

我觉得做很多事情的唯一方法是 O (N^2)。在某些方面有没有办法比 O(N^2) 更好？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T18:46:24.670

使用一些 HashSet 实现来检查“包含”条件也应该给出小于 n^2 的平均复杂度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T18:53:15.503

> A 缺少 B 的对象，添加它。

```
listA.AddRange(listB.Except(listA)); //note O(N+M) not O(N*M) 
```

> 如果 B 不再包含在 A 中找到的元素，则将其从 A 中删除。

```
listA.RemoveAll(listA.Except(listB)); //note O(N+M) not O(N*M) 
```

> 如果 B 中的属性是 != A 中对象中的属性，则更新 A 中的对象。

```
 //note O(N+M) not O(N*M)
var pairs = listA.Join(listB, 
    item => item.Key, 
    item => item.Key, 
    (a, b) => new { a, b });

foreach(var pair in pairs)
{
    //compare the properties of the items and mutate `pair.a` as appropriate
} 
```

请注意，所有这些算法的渐近复杂度是两个集合大小的总和，而*不是*两个集合大小的乘积。 `Except`并且`Join`每个都将创建一个基于集合的数据结构，其中包含一个输入序列中的所有项目，然后使用 O(1) 基于集合的操作迭代另一个。

# ruby-on-rails - 我应该创建用户身份验证还是使用插件

> ID：14881812
> 
> 赞同：0
> 
> 时间：2013-02-14T18:41:33.383
> 
> 标签：ruby-on-rails

我是 Rails 新手，对我应该做什么犹豫不决。

我正在创建一个功能有限的约会网站。您是否建议我使用 Devise 或 Clearance 之类的东西进行用户身份验证，还是应该自己构建？

我的流程将是注册 > 登录 > 支付会员费（使用 PayPal 小额支付系统）。

将有2个级别的用户，注册用户和付费注册用户。最后一个登录功能是在用户登录后，他们可以连接到他们的 Facebook。这只会显示在用户已通过 Facebook 验证的个人资料上，以便为他们的帐户增加更多可信度。不会共享任何 FB 信息。

我不介意做实际的工作和学习更多，因为我是编码新手。我只是想听听我是否应该根据我上面所说的我需要的内容从头开始构建，或者我是否应该只使用插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T18:44:57.573

除非您真的想创建身份验证系统，否则您应该使用插件。

重新发明轮子本质上没有*错，只是其他轮子制造商的工作经过了更好的测试，更成熟，分布更广。*

也就是说，没有什么可以阻止您使用自制的简单机制并在以后切换到功能更强大、更知名的机制。这样做的难易程度取决于您的实现，以及所选择的身份验证机制对其自身模式的差异的容忍度。

# .htaccess - 从重写规则中排除特定文件。htaccess

> ID：14881814
> 
> 赞同：1
> 
> 时间：2013-02-14T18:41:36.007
> 
> 标签：.htaccess, file, rewrite

这是我们用于 REST 框架的简单 htaccess 文件。

我只想排除一个文件`/lib/MyFile.php`被重写。（所有请求都通过 index.php，因此需要 BasicAuth）

```
 RewriteCond %{REQUEST_URI} !^/(static_files/.*)$
     RewriteCond %{REQUEST_URI} !^/(lib/MyFile.php)$ // this is not working
     RewriteCond %{REQUEST_FILENAME} !-f

     RewriteRule ^(.*)$ index.php [QSA,L] 
```

该文件的完整 URL 是`http://domain.com/lib/MyFile.php`

# node.js - 在 Windows 7 64 位上安装 yearofmoo 演示

> ID：14881816
> 
> 赞同：1
> 
> 时间：2013-02-14T18:41:38.380
> 
> 标签：node.js, angularjs, karma-runner

我正在尝试通过[http://www.yearofmoo.com/2013/01/full-spectrum-testing-with-angularjs-and-testacular.html#testacular](http://www.yearofmoo.com/2013/01/full-spectrum-testing-with-angularjs-and-testacular.html#testacular)上的演示，并且似乎在安装W7 64 位上的演示。我安装了 Node 和 Git，并在本地克隆了所需的存储库，但启动服务器是个问题。server.sh 文件包含以下指令：

```
nf --procfile ./config/Procfile.server start 
```

如果我尝试在 Node 中运行它，它会抱怨没有 ENV 文件。任何建议或具体说明将不胜感激。

# php - 图片插入错误

> ID：14881819
> 
> 赞同：0
> 
> 时间：2013-02-14T18:41:43.460
> 
> 标签：php, html

我正在使用 php 脚本，是的，我知道它使用过时的 mysql 编码。我计划在不久的将来更新网站上的编码，但是我上传的图像有问题，我似乎无法排序。当我构建脚本时它工作得很好，现在它只是停止工作了。我已经多次扫描编码，但找不到错误。我确定我只是在看它，但也许不是？

输入代码：

```
include 'db_connect4.php';

mysql_select_db("db#########", $con);

echo "<h2 style='margin-top:5px; margin-bottom: 20px;'>Home Page</h2>";

if($nt == "upd"){
    echo "<font style='color: #f00; float: right;'>SITE UPDATED<br />$date $time</font>";
}
elseif($nt == "cnl"){
    echo "<font style='color: #f00; float: right;'>CHANGES CANCELED<br />$date $time</font>";
}
else{}

$result = mysql_query("SELECT * FROM page_info WHERE nm='title' && loc='Home'");
while($row = mysql_fetch_array($result)){ echo "<p style='margin-left:25px;'><b>Page Title</b> <br /><input type='text' name='title' value='$row[3]' style='margin-left: 20px;'></p>"; }

$result = mysql_query("SELECT * FROM page_info WHERE nm='welcome' && loc='Home'");
while($row = mysql_fetch_array($result)){ echo "<p style='margin-left:25px;'><b>Welcome Paragraph Title</b> <br /><input type='text' name='welcome' value='$row[3]' size='50' style='margin-left: 20px;'></p>"; }

$result = mysql_query("SELECT * FROM page_info WHERE nm='welcome_message' && loc='Home'");
while($row = mysql_fetch_array($result)){ echo "<font style='margin-left:25px;'><b>Welcome Paragraph</b></font>
    <div style='margin-left: 45px;'>
        <textarea id='textarea1' name='welcome_message' style='height: 250px; width: 600px;'>
               $row[3]
        </textarea></div>"; }

$result = mysql_query("SELECT * FROM page_info WHERE nm='services' && loc='Home'");
while($row = mysql_fetch_array($result)){ echo "<p style='margin-left:25px;'><b>Services List Title</b> <br /><input type='text' name='services' value='$row[3]' size='50' style='margin-left: 20px;'></p>"; }

$result = mysql_query("SELECT * FROM page_info WHERE nm='services_list' && loc='Home'");
echo "<p style='margin-left:25px;'><b>Services List</b> ";
while($row = mysql_fetch_array($result)){ echo "<br /><input type='text' name='services_list_$row[0]' value='$row[3]' size='30' style='margin-left: 20px;'>"; }
echo "</p>";

$result = mysql_query("SELECT * FROM page_info WHERE nm='service' && loc='Home'");
while($row = mysql_fetch_array($result)){ echo "<p style='margin-left:25px;'><b>Services Photo Section Title</b> <br /><input type='text' name='service' value='$row[3]' size='50' style='margin-left: 20px;'></p>"; }

echo "<table width='100%' border='0'>";
    echo "<tr>";
        $result = mysql_query("SELECT * FROM image_info WHERE nm='serv1' && loc='Home'");
        while($row = mysql_fetch_array($result)){  echo "<td align='center'><img src='$row[3]' height='$row[4]px' width='$row[5]px'><br /><input type='file' name='serv1'></td>"; }
        $result = mysql_query("SELECT * FROM image_info WHERE nm='serv2' && loc='Home'");
        while($row = mysql_fetch_array($result)){  echo "<td align='center'><img src='$row[3]' height='$row[4]px' width='$row[5]px'><br /><input type='file' name='serv2'></td>"; }
        $result = mysql_query("SELECT * FROM image_info WHERE nm='serv3' && loc='Home'");
        while($row = mysql_fetch_array($result)){  echo "<td align='center'><img src='$row[3]' height='$row[4]px' width='$row[5]px'><br /><input type='file' name='serv3'></td>"; }
    echo "</tr><tr>";
        $result = mysql_query("SELECT * FROM page_info WHERE nm='serv1b' && loc='Home'");
        while($row = mysql_fetch_array($result)){  echo "<td align='center'><textarea name='serv1b' cols='50' rows='5'>$row[3]</textarea></td>"; }
        $result = mysql_query("SELECT * FROM page_info WHERE nm='serv2b' && loc='Home'");
        while($row = mysql_fetch_array($result)){  echo "<td align='center'><textarea name='serv2b' cols='50' rows='5'>$row[3]</textarea></td>"; }
        $result = mysql_query("SELECT * FROM page_info WHERE nm='serv3b' && loc='Home'");
        while($row = mysql_fetch_array($result)){  echo "<td align='center'><textarea name='serv3b' cols='50' rows='5'>$row[3]</textarea></td>"; }
    echo "</tr>";
echo "</table>";

$result = mysql_query("SELECT * FROM page_info WHERE nm='news' && loc='Home'");
while($row = mysql_fetch_array($result)){ echo "<p style='margin-left:25px;'><b>Company News Title</b> <br /><input type='text' name='news' value='$row[3]' size='50' style='margin-left: 20px;'></p>"; }

$result = mysql_query("SELECT * FROM page_info WHERE nm='testimonials' && loc='Home'");
while($row = mysql_fetch_array($result)){ echo "<p style='margin-left:25px;'><b>Testimonials Title</b> <br /><input type='text' name='testimonials' value='$row[3]' size='50' style='margin-left: 20px;'></p>"; }

echo "<hr style='width: 100%; height: 5px; background: #000; margin-top: 20px; margin-bottom: 20px;' />";

echo "<h3 style='margin-top:5px; margin-bottom: 20px;'>Photo Slide Show</h3>";

echo "<table width-='100%' style='margin-left: 25px; margin-bottom: 25px;'>";

$result = mysql_query("SELECT * FROM gallery ORDER BY nm DESC LIMIT 1");
while($row = mysql_fetch_array($result)){$q = substr("$row[1]", 6, 10); $r = ++$q; $galnm = "image $r";}

echo "<tr><td><b>Image Description</b> <br /><input type='text' name='galtxt' value='$row[3]' size='50' style='margin-left: 20px;'></td><td><b>Image</b> <br /><input type='file' name='serv4' id='serv4'><input type='hidden' name='galnm' value='$galnm'></td></tr>";

echo "</table>";

echo "<table width-='100%' style='margin-left: 25px;' cellpadding='5px;' cellspacing='5px'>";

echo "<tr><td valign='top' width='5%' align='center'><font style='color:#f00; font-size:large; font-weight:bold;'>X</font></td>
      <td valign='top' width='50%'><font style='font-size: large; font-weight: bold;'>Photo</font></td>
      <td valign='top' width='45%'><font style='font-size: large; font-weight: bold;'>Photo Information</font></td>
";

$result = mysql_query("SELECT * FROM gallery");
while($row = mysql_fetch_array($result)){$a = substr("$row[3]", 7, 100);
    echo "<tr><td valign='top' width='5%'  align='center'><input type='checkbox' name='checkbox[]' id='checkbox[]' value='$row[0]' style='border: solid 1px #000;'></td>
      <td valign='top' width='50%' align='center' style='background: #C0C0C0;'><img src='http://www.sunwellservice.biz/$row[3]' height='190' width='470' style='border: solid 1px #000;'></td>
      <td valign='top' width='45%'><b>Image Name</b><br />$a<br /><br /><b>Image Description </b><br />$row[4]
";
}

echo "</table>";

echo "</form>"; 
```

插入编码：

```
 $a = $_POST['title'];
        $b = $_POST['welcome'];
        $c = mysql_real_escape_string($_POST['welcome_message']);
        $d = $_POST['services'];
        $e = $_POST['services_list_4'];
        $f = $_POST['services_list_5'];
        $g = $_POST['services_list_6'];
        $h = $_POST['services_list_7'];
        $az = $_POST['services_list_8'];
        $j = $_POST['services_list_9'];
        $k = $_POST['services_list_127'];
        $l = $_POST['services_list_128'];
        $m = $_POST['service'];
        $n = $_POST['serv1'];
        $o = $_POST['serv2'];
        $p = $_POST['serv3'];
        $r = mysql_real_escape_string($_POST['serv1b']);
        $s = mysql_real_escape_string($_POST['serv2b']);
        $t = mysql_real_escape_string($_POST['serv3b']);
        $u = $_POST['news'];
        $v = $_POST['testimonials'];
        $w = $_POST['galtxt'];

        $allowedExts = array("jpg", "jpeg", "gif", "png");

        if($w == TRUE){
            $aa = $_FILES["serv4"]["name"];
            $bb = $_POST['galtxt'];
            $cc = $_POST['galnm'];
            $sql = "INSERT INTO gallery (nm, loc, txt) VALUES ('$cc', 'Home', '$bb')";

            mysql_query($sql);

            $allowedExts = array("jpg", "jpeg", "gif", "png");

            $extension = end(explode(".", $_FILES["serv4"]["name"]));
        if ((($_FILES["serv4"]["type"] == "image/gif")
        || ($_FILES["serv4"]["type"] == "image/jpeg")
        || ($_FILES["serv4"]["type"] == "image/png")
        || ($_FILES["serv4"]["type"] == "image/pjpeg"))
        && ($_FILES["serv4"]["size"] < 2000000)
        && in_array($extension, $allowedExts))
          {
          if ($_FILES["serv4"]["error"] > 0)
            {
            echo "Return Code: " . $_FILES["serv4"]["error"] . "<br>";
            }
          else
            {

            if (file_exists("../front/images/" . $_FILES["serv4"]["name"]))
              {
              echo $_FILES["serv4"]["name"] . " already exists. ";
              }
            else
              {
              move_uploaded_file($_FILES["serv4"]["tmp_name"],
              "../front/images/" . $_FILES["serv4"]["name"]);
            mysql_query("UPDATE gallery SET src='images/$aa' WHERE nm='$cc' AND loc='Home'");
            echo $aa;
              }
            }
          }
        else
          {
          echo "Invalid file";
          }
        }
        else{}

        $checkbox=$_POST['checkbox'];
        for($i=0;$i<count($_POST['checkbox']);$i++){
        $del_id = $checkbox[$i];
        $sql = "DELETE FROM gallery WHERE id='$del_id'";
        $result = mysql_query($sql);}

        if($n == TRUE){
        $extension = end(explode(".", $_FILES["serv1"]["name"]));
        if ((($_FILES["serv1"]["type"] == "image/gif")
        || ($_FILES["serv1"]["type"] == "image/jpeg")
        || ($_FILES["serv1"]["type"] == "image/png")
        || ($_FILES["serv1"]["type"] == "image/pjpeg"))
        && ($_FILES["serv1"]["size"] < 2000000))
          {
          if ($_FILES["serv1"]["error"] > 0)
            {
            echo "Return Code: " . $_FILES["serv1"]["error"] . "<br>";
            }
          else
            {

            if (file_exists("../front/images/" . $_FILES["serv1"]["name"]))
              {
              echo $_FILES["serv1"]["name"] . " already exists. ";
              }
            else
              {
              move_uploaded_file($_FILES["serv1"]["tmp_name"],
              "../front/images/" . $_FILES["serv1"]["name"]);
            mysql_query("UPDATE image_info SET path='images/$n' WHERE nm='serv1' AND loc='Home'");
              }
            }
          }
        else
          {
          echo "Invalid file";
          }
        }
        else{}

        if($o == TRUE){ 
        $extension = end(explode(".", $_FILES["serv2"]["name"]));
        if ((($_FILES["serv2"]["type"] == "image/gif")
        || ($_FILES["serv2"]["type"] == "image/jpeg")
        || ($_FILES["serv2"]["type"] == "image/png")
        || ($_FILES["serv2"]["type"] == "image/pjpeg"))
        && ($_FILES["serv2"]["size"] < 2000000)
        && in_array($extension, $allowedExts))
          {
          if ($_FILES["serv2"]["error"] > 0)
            {
            echo "Return Code: " . $_FILES["serv2"]["error"] . "<br>";
            }
          else
            {

            if (file_exists("../front/images/" . $_FILES["serv2"]["name"]))
              {
              echo $_FILES["serv2"]["name"] . " already exists. ";
              }
            else
              {
              move_uploaded_file($_FILES["serv2"]["tmp_name"],
              "../front/images/" . $_FILES["serv2"]["name"]);
              mysql_query("UPDATE image_info SET path='images/$o' WHERE nm='serv2' AND loc='Home'");
              }
            }
          }
        else
          {
          echo "Invalid file";
          }
          }
        else{}

        if($p == TRUE){
        $extension = end(explode(".", $_FILES["serv3"]["name"]));
        if ((($_FILES["serv3"]["type"] == "image/gif")
        || ($_FILES["serv3"]["type"] == "image/jpeg")
        || ($_FILES["serv3"]["type"] == "image/png")
        || ($_FILES["serv3"]["type"] == "image/pjpeg"))
        && ($_FILES["serv3"]["size"] < 2000000)
        && in_array($extension, $allowedExts))
          {
          if ($_FILES["serv3"]["error"] > 0)
            {
            echo "Return Code: " . $_FILES["serv3"]["error"] . "<br>";
            }
          else
            {

            if (file_exists("../front/images/" . $_FILES["serv3"]["name"]))
              {
              echo $_FILES["serv3"]["name"] . " already exists. ";
              }
            else
              {
              move_uploaded_file($_FILES["serv3"]["tmp_name"],
              "../front/images/" . $_FILES["serv3"]["name"]);
              mysql_query("UPDATE image_info SET path='images/$p' WHERE nm='serv3' AND loc='Home'");
              }
            }
          }
        else
          {
          echo "Invalid file";
          }
        }
        else{}

        mysql_query("UPDATE page_info SET txt='$a' WHERE nm='title' AND loc='Home'");
        mysql_query("UPDATE page_info SET txt='$b' WHERE nm='welcome' AND loc='Home'");
        mysql_query("UPDATE page_info SET txt='$c' WHERE nm='welcome_message' AND loc='Home'");
        mysql_query("UPDATE page_info SET txt='$d' WHERE nm='services' AND loc='Home'");
        mysql_query("UPDATE page_info SET txt='$e' WHERE nm='services_list' AND loc='Home' AND id='4'");
        mysql_query("UPDATE page_info SET txt='$f' WHERE nm='services_list' AND loc='Home' AND id='5'");
        mysql_query("UPDATE page_info SET txt='$g' WHERE nm='services_list' AND loc='Home' AND id='6'");
        mysql_query("UPDATE page_info SET txt='$h' WHERE nm='services_list' AND loc='Home' AND id='7'");
        mysql_query("UPDATE page_info SET txt='$az' WHERE nm='services_list' AND loc='Home' AND id='8'");
        mysql_query("UPDATE page_info SET txt='$j' WHERE nm='services_list' AND loc='Home' AND id='9'");
        mysql_query("UPDATE page_info SET txt='$k' WHERE nm='services_list' AND loc='Home' AND id='127'");
        mysql_query("UPDATE page_info SET txt='$l' WHERE nm='services_list' AND loc='Home' AND id='128'");
        mysql_query("UPDATE page_info SET txt='$m' WHERE nm='service' AND loc='Home'");
        mysql_query("UPDATE page_info SET txt='$r' WHERE nm='serv1b' AND loc='Home'");
        mysql_query("UPDATE page_info SET txt='$s' WHERE nm='serv2b' AND loc='Home'");
        mysql_query("UPDATE page_info SET txt='$t' WHERE nm='serv3b' AND loc='Home'");
        mysql_query("UPDATE page_info SET txt='$u' WHERE nm='news' AND loc='Home'");
        mysql_query("UPDATE page_info SET txt='$v' WHERE nm='testimonials' AND loc='Home'");

        $nm = $_GET['nm'];
        $loc = $_GET['loc'];

        echo"
        <script type='text/javascript'>
            <!--
            window.location = 'site.php?act=edit&nm=".$nm."&loc=".$loc."&nt=upd'
            //-->
        </script>"; 
```

# sql-server - 如何防止重复记录被保存

> ID：14881820
> 
> 赞同：-1
> 
> 时间：2013-02-14T18:41:46.393
> 
> 标签：sql-server, vb.net, tsql

以下代码阻止我保存新记录。如果有人可以为我编辑它，我会很高兴。无论记录是否存在，都会显示“记录存在”消息。

尝试

```
 If String.IsNullOrEmpty(subject_id) Or rbnCore.Checked = False And rdbElective.Checked = False Or String.IsNullOrEmpty(username) Or String.IsNullOrEmpty(password) Then
            MessageBox.Show("One or more fields have not been left empty.", "Save Error", MessageBoxButtons.OK, MessageBoxIcon.Asterisk)
            txtSubjectCode.Focus()
        Else
            If rbnCore.Checked = True Then
                subject = "Core"
            Else : subject = "Elective"
            End If

            cmd2 = New SqlCommand("select count(*) from ProgramDetails.Subjects where IdNumber = " & txtIDNumber.Text & " ", cn)
            queryResult = cmd2.ExecuteScalar
            If queryResult = 0 Then
                qry = "Insert into ProgramDetails.Subjects(SubjectCode,SubjectName,SubjectType,UserID,Password)values(@SubjectCode,@SubjectName,@SubjectType,@UserID,@Password)"
                cmd = New SqlCommand(qry, cn)
                cmd.Parameters.Add(New SqlParameter("@SubjectCode", txtSubjectCode.Text))
                cmd.Parameters.Add(New SqlParameter("@SubjectName", txtSubName.Text))
                cmd.Parameters.Add(New SqlParameter("@SubjectType", subject))
                cmd.Parameters.Add(New SqlParameter("@UserID", txtUserName.Text))
                cmd.Parameters.Add(New SqlParameter("@Password", txtPassword.Text))
                cmd.ExecuteNonQuery()
                MessageBox.Show("Record successfully saved", "Saved", MessageBoxButtons.OK, MessageBoxIcon.Information)
                btnSave.Enabled = False
                btnClear.Focus()
                showgrid()
            End If
            MessageBox.Show("Record already exists", "Existing record", MessageBoxButtons.OK, MessageBoxIcon.Error)
        End If
    Catch ex As Exception
        MsgBox(ex.Message)
    End Try 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T18:52:17.770

您错过了条件 if 语句的另一半。

```
 If queryResult = 0 Then
            qry = "Insert into ProgramDetails.Subjects(SubjectCode,SubjectName,SubjectType,UserID,Password)values(@SubjectCode,@SubjectName,@SubjectType,@UserID,@Password)"
            cmd = New SqlCommand(qry, cn)
            cmd.Parameters.Add(New SqlParameter("@SubjectCode", txtSubjectCode.Text))
            cmd.Parameters.Add(New SqlParameter("@SubjectName", txtSubName.Text))
            cmd.Parameters.Add(New SqlParameter("@SubjectType", subject))
            cmd.Parameters.Add(New SqlParameter("@UserID", txtUserName.Text))
            cmd.Parameters.Add(New SqlParameter("@Password", txtPassword.Text))
            cmd.ExecuteNonQuery()
            MessageBox.Show("Record successfully saved", "Saved", MessageBoxButtons.OK, MessageBoxIcon.Information)
            btnSave.Enabled = False
            btnClear.Focus()
            showgrid()
        Else 
```

MessageBox.Show("记录已存在", "已有记录", MessageBoxButtons.OK, MessageBoxIcon.Error)

```
 End If 
```

那应该给你你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:07:10.083

```
 Dim cmd2 As New SqlCommand
    Dim queryResult As Integer
     Try
        cmd2 = New SqlCommand("select count(*) from ProgramDetails.Subjects where IDNumber = '" & txtIDNumber.Text & "'", cn)
        queryResult = cmd2.ExecuteScalar
        If queryResult = 0 Then
            If String.IsNullOrEmpty(subject_id) Or rbnCore.Checked = False And rdbElective.Checked = False Or String.IsNullOrEmpty(username) Or String.IsNullOrEmpty(password) Then
                MessageBox.Show("One or more fields have not been left empty.", "Save Error", MessageBoxButtons.OK, MessageBoxIcon.Asterisk)
                txtSubjectCode.Focus()
            Else
                If rbnCore.Checked = True Then
                    subject = "Core"
                Else : subject = "Elective"
                End If
                qry = "Insert into ProgramDetails.Subjects(SubjectCode,SubjectName,SubjectType,UserID,Password)values(@SubjectCode,@SubjectName,@SubjectType,@UserID,@Password)"
                cmd = New SqlCommand(qry, cn)
                cmd.Parameters.Add(New SqlParameter("@SubjectCode", txtSubjectCode.Text))
                cmd.Parameters.Add(New SqlParameter("@SubjectName", txtSubName.Text))
                cmd.Parameters.Add(New SqlParameter("@SubjectType", subject))
                cmd.Parameters.Add(New SqlParameter("@UserID", txtUserName.Text))
                cmd.Parameters.Add(New SqlParameter("@Password", txtPassword.Text))
                cmd.ExecuteNonQuery()
                MessageBox.Show("Record successfully saved", "Saved", MessageBoxButtons.OK, MessageBoxIcon.Information)

                btnClear.Focus()
                showgrid()
            End If
        Else
            MessageBox.Show("Record already exists.", "Existing Record", MessageBoxButtons.OK, MessageBoxIcon.Information)
        End If
    Catch ex As Exception
        MsgBox(ex.Message)
    End Try 
```

# macos - 替换平面文件中的空字符 ^@

> ID：14881821
> 
> 赞同：4
> 
> 时间：2013-02-14T18:41:49.040
> 
> 标签：macos, terminal

我有一个从别人的软件生成的平面文件。他们在文件的某些位置插入空字符 ^@。我希望用-9之类的东西替换它们。如何在 Mac OS X 的终端中有效地搜索和替换此字符？

谢谢。

在 linux 中有另一篇文章解决[了这个问题。](https://stackoverflow.com/questions/2398393/identifying-and-removing-null-characters-in-unix)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T18:49:01.470

（为了保持使用不同工具为 shell 脚本问题提出多个答案的 SO 传统）：

与`tr`：

```
tr -d '\0' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-14T18:44:07.333

与`sed`：

```
sed 's/\x0/-9/g' filename > newfile 
```

# .net - .net 基于声明的身份验证（编写自己的 STS？）

> ID：14881826
> 
> 赞同：1
> 
> 时间：2013-02-14T18:42:10.623
> 
> 标签：.net, claims-based-identity

在 WIF 和基于声明的身份验证方面，我是一个完整的初学者。我正在努力理解我应该如何处理客户请求。

我在这里对其进行了简化，希望能得到具体的答案：我的客户有多个 Web 应用程序，它们都连接（用户名/密码）到一个自定义成员数据库。然后是一个管理所有应用程序的管理网络应用程序。此管理应用程序的身份验证需要通过 AD（对于客户的代表）以及通过另一个自定义成员数据库（对于外部代表）。所有这些组件都将存在于我的客户域中。

客户想要使用基于声明的授权。我知道所有应用程序都将是 RP，而 AD 将是管理应用程序的 STS。但是我如何绑定海关会员数据库并将它们放在一起呢？我需要编写自己的 STS 吗？我读了很多书，得到的印象是你应该很少需要编写自己的 STS。

我的目标是建立一个具有上述功能的快速原型，这样你的答案就可以是基本的——我稍后会处理细节，只需要正确开始。

任何帮助都感激不尽！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:42:40.670

看看这个支持会员开箱即用的开源项目：http: [//thinktecture.github.com/Thinktecture.IdentityServer.v2/](http://thinktecture.github.com/Thinktecture.IdentityServer.v2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T12:49:18.483

我已经成功使用了[SelfSTS](http://blogs.msdn.com/b/vbertocci/archive/2010/08/23/selfsts-when-you-need-a-saml-token-now-right-now.aspx)。
它不需要任何设置，非常易于使用，并且使您能够使用配置的令牌测试 WIF 功能。

# c# - 如何防止多个 ASP.NET MVC 路由映射

> ID：14881828
> 
> 赞同：6
> 
> 时间：2013-02-14T18:42:17.577
> 
> 标签：c#, asp.net, html, asp.net-mvc, asp.net-mvc-3

我有一个 ASP.NET MVC 路由问题。首先，让我解释一下我的区域设置。这很简单。

```
Areas
|
+--Foo
   |
   +--Controllers
      |
      +--BarController.cs 
```

我在我的区域中有一个名为“Foo”的文件夹和一个名为“BarController.cs”的控制器 Bar 控制器有几个名为“DoStuff1()”、“DoStuff2()”等的方法。

我的网站使用以下 URL：

```
/foo/bar/15
/foo/bar/dostuff1
/foo/bar/dostuff2 
```

第一个 URL 需要一个 id 并使用 Bar 控制器中的默认 Index() 方法来使用视图和模型填充网页。

在第二个和第三个 URL 中，我将它们用于 jQuery ajax 调用。

这是我的区域注册中的代码

```
context.MapRoute(null, "Foo/Bar/DoStuff1", new
{
    action = "DoStuff1",
    controller = "Bar"
});

context.MapRoute(null, "Foo/Bar/DoStuff2", new
{
    action = "DoStuff2",
    controller = "Bar"
});

context.MapRoute(null, "Foo/Bar/{id}", new
{
    action = "Index",
    controller = "Bar"
}); 
```

我的问题是，对于我创建的每个新控制器方法，我必须在区域注册文件中添加另一个路由映射。例如，如果我添加方法 DoStuff3()，我需要将其添加到区域注册中：

```
context.MapRoute(null, "Foo/Bar/DoStuff3", new
{
    action = "DoStuff3",
    controller = "Bar"
}); 
```

如何创建通用路由映射来处理我上面提到的不需要为新控制器方法添加区域注册文件的 URL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T18:46:00.433

您可以拉出控制器动作。

像这样写网址：

```
"Foo/Bar/{action}" 
```

此外，您也可以拉出控制器，然后编写

```
"Foo/{controller}/{action}" 
```

在这种情况下，`action = "Index"`如果未提供操作参数，则提供默认值“索引”。

在这种情况下，您需要消除 和 之间的`"Foo/Bar/{action}"`歧义`"Foo/Bar/{id}"`。由于匹配是按顺序完成的，因此您需要将路由放在首位，并为参数`id`添加数字[约束](http://www.asp.net/mvc/tutorials/controllers-and-routing/creating-a-route-constraint-cs)`id`。这允许有效的数字 id 与之匹配，并且动作名称可以跳到下一条路线。您的两条路线如下所示：

```
context.MapRoute(null, "Foo/Bar/{id}", new
{
    action = "Index",
    controller = "Bar"
},
new { id = @"\d+" });

context.MapRoute(null, "Foo/Bar/{action}", new
{
    action = "Index", //optional default parameter, makes the route fall back to Index if no action is provided
    controller = "Bar"
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T18:46:15.390

MVC 模板附带的默认路由适用于大多数所需的路由配置。

```
routes.MapRoute(
                  name: "Default",
                  url: "{controller}/{action}/{id}",
                  defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
            ); 
```

# rest - 收集 RESTful 请求的网站

> ID：14881829
> 
> 赞同：0
> 
> 时间：2013-02-14T18:42:24.363
> 
> 标签：rest

我曾经使用一个服务（网站），它给了我一个临时的 bin，我可以用它来测试 RESTful 请求。这真的很有用，因为如果应用程序没有按我预期的方式工作，我可以非常快速地调试它们。

从那以后，我失去了网站 - 并且不记得名字了。

有谁知道这样做的服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T18:46:15.060

找到了！

对于未来的读者，请查看[http://requestb.in/](http://requestb.in/)

# multithreading - boost::asio::write 似乎不起作用，而 boost::asio::read 非常出色

> ID：14881830
> 
> 赞同：0
> 
> 时间：2013-02-14T18:42:32.277
> 
> 标签：multithreading, sockets, visual-c++, tcp, boost-asio

我正在将 boost 1.52.0 32 位库与 OpenSSL 32 位库和非托管 Visual C++ 2008 一起用于我正在编写以与现有服务器通信的新客户端。我的测试机器使用的是 Windows 8。我使用的是同步读写。代码内置在一个 DLL 中，可以从 C# 访问，但所有 asio 调用都是在使用 boost::thread_group 创建的非托管线程上完成的。

我发现，当同步读取正在等待数据时，发生在另一个线程中的同步写入似乎被阻塞并且不会退出 - 至少以我编码的方式。所以我的问题是 - 当同步读取正在等待另一个线程中的数据时，是否应该能够完全执行同步写入？

我已经验证，当另一个线程中没有挂起的读取时，我可以成功写出数据。我通过在即将阅读之前冻结正在阅读的线程来做到这一点。然后写的线程写了一条消息。然后我解冻了读取线程，它能够成功地从服务器读取关于已发送消息的响应。

create_thread 方法调用以下方法来处理从服务器的线路读取消息：

```
void SSLSocket::ProcessServerRequests()
{
   // This method is responsible for processing requests from a server.
   Byte *pByte;
   int ByteCount;
   size_t BytesTransferred;
   boost::system::error_code Err;
   Byte* pReqBuf;
   string s;
   stringstream ss;
   //
   try
   {
      ss << "ProcessServerRequests: Worker thread: " << Logger::NumberToString(boost::this_thread::get_id()) << " started.\n";
      Log.LogString(ss.str(), LogInfo);
      // Enable the handlers for the handshaking.
      IOService->run();
      // Wait for the handshake to be sucessfully completed.
      do
      {
         Sleep(50);
      } while (!HandShakeReady);
      //
      sClientIp = pSocket->lowest_layer().remote_endpoint().address().to_string();
      uiClientPort = pSocket->lowest_layer().remote_endpoint().port();
      ReqAlive = true;
      // If the thread that handles sending msgs to all servers has not been created yet, then create that one.
      // This thread is created just once to handle all outbound msgs to all servers.
      WorkerThreads.create_thread(boost::bind(&SSLSocket::SendWorkerThread));
      // Loop until the user quits, or an error is detected.  The read method should wait until there is something to read.
      do
      {
         pReqBuf = BufMang.GetPtr(MsgLenBytes);
         boost::asio::read(*pSocket, boost::asio::buffer(pReqBuf, MsgLenBytes), boost::asio::transfer_exactly(MsgLenBytes), Err);
         if (Err)
         {
            s = Err.message();
            if ((s.find("short r")) == string::npos)
            {
               ss.str("");
               ss << "SSLSocket::ProcessServerRequests: read(1) error = " << Err.message() << "\n.  Terminating.\n\n";
               Log.LogString(ss.str(), LogError);
            }
            Terminate();
            // Notify the client that an error has been encountered and the program needs to shut down.  TBD.
         }
         else
         {
            // Get the number of bytes in the message.
            pByte = pReqBuf;
            B2I.B.B1 = *pByte++;
            B2I.B.B2 = *pByte++;
            B2I.B.B3 = *pByte++;
            B2I.B.B4 = *pByte;
            ByteCount = B2I.IntVal;
            pReqBuf = BufMang.GetPtr(ByteCount);
            // Do a synchronous read which will hang until the entire message is read off the wire.
            BytesTransferred = boost::asio::read(*pSocket, boost::asio::buffer(pReqBuf, ByteCount), boost::asio::transfer_exactly(ByteCount), Err);
            ss.str("");
            ss << "SSLSocket::ProcessServerRequests: # bytes rcvd = " << Logger::NumberToString(BytesTransferred).c_str() << " from ";
            ss << sClientIp.c_str() << " : " << Logger::NumberToString(uiClientPort) << "\n";
            Log.LogString(ss.str(), LogDebug2);
            Log.LogBuf(pReqBuf, (int)BytesTransferred, DisplayInHex, LogDebug3);
            if ((Err) || (ByteCount != BytesTransferred))
            {
               if (Err)
               {
                  ss.str("");
                  ss << "ProcessServerRequests:read(2) error = " << Err.message() << "\n.  Terminating.\n\n";
               }
               else
               {
                  ss.str("");
                  ss << "ProcessServerRequests:read(3) error - BytesTransferred (" << Logger::NumberToString(BytesTransferred).c_str() <<
                     ") != ByteCount (" << Logger::NumberToString(ByteCount).c_str() << ").  Terminating.\n\n";
               }
               Log.LogString(ss.str(), LogError);
               Terminate();
               // Notify the client that an error has been encountered and the program needs to shut down.  TBD.
               break;
            }
            // Call the C# callback method that will handle the message.
            Log.LogString("SSLSocket::ProcessServerRequests: sending msg to the C# client.\n\n", LogDebug2);
            CallbackFunction(this, BytesTransferred, (void*)pReqBuf);
         }
      } while (ReqAlive);
      Log.LogString("SSLSocket::ProcessServerRequests: worker thread done.\n", LogInfo);
   }
   catch (std::exception& e)
   {
      stringstream ss;
      ss << "SSLSocket::ProcessServerRequests: threw an error - " << e.what() << ".\n";
      Log.LogString(ss.str(), LogError);
   }
} 
```

create_thread 方法调用以下方法来处理向服务器发送消息：

```
void SSLSocket::SendWorkerThread()
{
   // This method handles sending msgs to the server.  It is called upon 1st time class initialization.
   //
   DWORD WaitResult;
   Log.LogString("SSLSocket::SendWorkerThread: Worker thread " + Logger::NumberToString(boost::this_thread::get_id()) + " started.\n", LogInfo);
   // Loop until the user quits, or an error of some sort is thrown.
   try
   {
      do
      {
         // If there are one or more msgs that need to be sent to a server, then send them out.
         if (SendMsgQ.Count() > 0)
         {
            Message* pMsg = SendMsgQ.Pop();
            // Byte* pBuf = pMsg->pBuf;
            const Byte* pBuf = pMsg->pBuf;
            SSLSocket* pSSL = pMsg->pSSL;
            int BytesInMsg = pMsg->BytesInMsg;
            boost::system::error_code Error;
            unsigned int BytesTransferred = boost::asio::write(*pSSL->pSocket, boost::asio::buffer(pBuf, BytesInMsg), Error);
            string s = "SSLSocket::SendWorkerThread: # bytes sent = ";
            s += Logger::NumberToString(BytesInMsg).c_str();
            s += "\n";
            Log.LogString(s, LogDebug2);
            Log.LogBuf(pBuf, BytesInMsg, DisplayInHex, LogDebug3);
            if (Error)
            {
               Log.LogString("SSLSocket::SendWorkerThread: error sending message - " + Error.message() + "\n", LogError);
            }
         }
         else
         {
            // Nothing to send, so go into a wait state.
            WaitResult = WaitForSingleObject(hEvent, INFINITE);
            if (WaitResult != 0L)
            {
               Log.LogString("SSLSocket::SendWorkerThread: WaitForSingleObject event error.  Code = " + Logger::NumberToString(GetLastError()) + ". \n", LogError);
            }
         }
      } while (ReqAlive);
      Log.LogString("SSLSocket::SendWorkerThread: Worker thread " + Logger::NumberToString(boost::this_thread::get_id()) + " done.\n", LogInfo);
   }
   catch (std::exception& e)
   {
      stringstream ss;
      ss << "SSLSocket::SendWorkerThread: threw an error - " << e.what() << ".\n";
      Log.LogString(ss.str(), LogError);
   }
} 
```

因此，如果在同步读取在另一个线程中挂起时应该能够执行同步写入，那么有人可以告诉我我的代码做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:09:38.147

Asio 套接字不是线程安全的，因此您可能无法从不同的线程访问它。使用`async_read`and`async_write`代替。

# wordpress - Wordpress - 从查询中删除一些帖子

> ID：14881838
> 
> 赞同：1
> 
> 时间：2013-02-14T18:43:12.080
> 
> 标签：wordpress, add-filter

我正在尝试制作一个插件。它的工作是在管理员发布帖子后生成链接并将其发送给作者。单击链接后将是实际发布的帖子。我在点击链接后这样做了，帖子中会添加一个帖子元数据。

现在我找不到解决方案如何仅显示带有元或管理员（或某些用户级别）帖子的帖子。

我决定我需要一个过滤器芽，但我不知道如何处理 ADMIN 发布异常。

如何仅过滤非管理员帖子。

我想我需要从 $query 中删除“坏”帖子，但是如何？

```
add_filter( 'pre_get_posts' , 'postsClean' );

function postsClean( $query ){
// check all posts and if the post should be not published remove it from query
} 
```

或者有没有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T19:09:04.647

如果您使用的是 wp_query，您可以使用`-`for `negation`，例如

```
$wp_query_obj->set( 'author', '-1' ); 
```

[`WP_Query`](http://codex.wordpress.org/Class_Reference/WP_Query)显示查询参数的完整列表。

# sql - 是否可以将 varchar2 列转换为用户定义的类型？

> ID：14881840
> 
> 赞同：1
> 
> 时间：2013-02-14T18:43:21.073
> 
> 标签：sql, oracle, collections, oracle10g, oracle11g

我有一个类型声明为

```
TYPE "TABLE_TYPE" AS TABLE OF varchar2(4000) 
```

如何转换我在查询中选择的列以返回该类型。

例如

```
Select cast(to_char(sysdate) as TABLE_TYPE) from dual 
```

返回`ORA-00932: inconsistent datatypes: expected - got CHAR`错误。有没有办法将 varchar2 的列转换为用户定义的类型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T20:21:47.800

使用cast + multiset

```
select cast(multiset(
    select to_char(sysdate-level, 'YYYYMMDD')
    from dual
    connect by level <= 10
) as t_vchar_tab)
from dual; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T18:49:05.970

如果你真的想返回一个包含单个元素的集合，你只需要调用类型的构造函数

```
SQL> create type table_type as table of varchar2(100);
  2  /

Type created.

SQL> select table_type( to_char( sysdate ))
  2    from dual;

TABLE_TYPE(TO_CHAR(SYSDATE))
-----------------------------------------------------------------------------
TABLE_TYPE('14-FEB-13') 
```

但是，通常，当您创建集合时，其目的是通过运行返回多行的查询来使用多个元素填充它。为此，你会想做类似的事情

```
DECLARE
  l_strs table_type;
BEGIN
  SELECT ename
    BULK COLLECT INTO l_strs
    FROM emp;
  <<l_strs now contains 1 element for each row in the EMP table>>
END; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-14T19:34:15.487

[导致 ORA-01790 的联合：表达式必须具有与相应表达式相同的数据类型](https://stackoverflow.com/questions/14879364/union-causing-an-ora-01790-expression-must-have-same-datatype-as-corresponding/14879664#14879664)

```
CREATE OR REPLACE TYPE varchar2_ntt AS TABLE OF VARCHAR2(4000);
/

SELECT deptno
    , CAST(COLLECT(ename) AS varchar2_ntt) AS emps
  FROM   scott.emp
GROUP  BY deptno
/ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T18:47:28.507

```
select table_type(to_char(sysdate)) from dual; 
```

# sql - 有效地存储 IP 地址，以便更快地查找和插入（代理检查）

> ID：14881841
> 
> 赞同：-1
> 
> 时间：2013-02-14T18:43:20.623
> 
> 标签：sql, database, sqlite, python-3.x

我正在编写一个小型 Python 3 程序，该程序应该测试大量代理的有效性，并且我想重新组织数据，以便我可以快速查找 IP，通过 curl 测试它，写入数据库是否工作和时间戳。

大约有 50 000 行，“简单方式”花费的时间太长，因此我需要一些巧妙的方式来搜索 IP。

我是 SQL 新手，但如果我用某种编程语言来做，我会做这样的事情：

```
| IP_BYTE1 | IP_BYTE2 | IP_BYTE3 | IP_BYTE4 | TIMESTAMP | WORKS | 
```

然后搜索“从左到右”。

谁能帮我创建这样一个表和算法来快速查找/插入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T18:51:18.547

简单的方法是使用您喜欢的数据类型（varchar 或 int）将它们存储在表中，然后在它们上构建索引。

如果您正在寻找不同类型的 IP 地址，那么您可能希望将它们分成单独的部分。您通常在查看 D 类地址吗？还是您还需要查看 A、B 和 C 类型？

# tfs - TFS 2012 scrum bug，父项作为积压项目

> ID：14881842
> 
> 赞同：4
> 
> 时间：2013-02-14T18:43:24.143
> 
> 标签：tfs, scrum, bug-tracking

也许我没有正确理解 scrum 开发模型，但我很困惑为什么即使积压项目被设置为它的父项，TFS 将错误放在与我的积压项目不同的行上。

我以为我们会做一个错误报告，并将其放在 TO DO 列中。然后，当您向该错误提交代码时，您会将提交与该错误的特定任务 ID 相关联。然后，一旦完成，它就会移动到 DONE。这不是 Scrum 的工作方式吗？修复报告的错误的典型过程是什么？

![在此处输入图像描述](../Images/7bf33dd903fe1390b276f97d916a242f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T19:08:11.920

那是任务板的视图。在最新的 Scrum 流程模板 (Microsoft Visual Studio Scrum 2.x) 中，Bug 位于需求类别中。这样做，Bug 被视为产品待办列表项（它可以堆叠排列，分解为可行的任务，并像任何其他 PBI 一样通过流程提供）。如果您使用的是 TFS 2012 Update 1 或 TFService，您应该在产品积压页面上有一个看板选项卡，您可以在其中将错误移动到状态（新/已批准/已提交/已完成）。在任务板（上面的屏幕截图）中，Bugs 和 Product Backlog Items 将显示为行（您有*Task Here*和*Bug Here*），并且任务将存在于 To do、In progress 和 Done 列中。

当您处理错误时，您会专门处理任务，并在签入代码时关联/解决这些任务。一旦满足“完成的定义”，您就可以将 Bug 工作项（在看板上，或通过状态字段手动）移动到完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T19:47:36.600

自 2008 年以来，我们在 Urban Turtle 为 TFS 开发敏捷工具。在 2012 版本中，我们完全按照您的要求进行了操作。绿线代表用户故事（PBI），红框代表错误。

如果您愿意，您可以在线试用我们的[产品。](http://urbanturtle.com)

这是您请求的功能的打印屏幕。如果您需要更多信息，请与我联系。ddanis@urbanturtle.com

![在此处输入图像描述](../Images/e0596836326f3e12fcb11f177d86d45f.png)

# c++ - 立即使用 2 GB RAM 的 C++ 程序：如何找到罪魁祸首？

> ID：14881843
> 
> 赞同：1
> 
> 时间：2013-02-14T18:43:23.903
> 
> 标签：c++, memory-management, ram

我有一个程序，当在初始化时查询时，它会立即使用 > 2 GB 的 RAM。基本上代码是这样的：

```
#include <blah>

int main() {
    cout << get_mem_usage() << endl;
    //Lots of things happen, but no significant memory usage
    return 0;
} 
```

输出：[2013-02-15 18:38:05.865283] 2147.71 Mb

但是，我正在链接到许多不同的共享对象文件：我检查了 ldd，我正在链接到 58 个库，.so 组合大小为 66 MB。

我很确定 get_mem_usage 程序返回了正确的值：这些值与 top 和 massif 输出一致。

我还应该提到，我正在链接高能物理分析的 ROOT 框架。

我使用的是 Linux x86_64，get_mem_usage() 函数是自产的。

如果可能的话，我想减少程序的内存使用量。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T18:48:03.317

我的第一个猜测：您正在链接的某些库中的静态初始化。

在 /proc/<pid>/的第一行插入一个长暂停，`main()`以查看内存分配的位置。例如：

*   /proc/12345/task/12345/maps
*   /proc/12345/task/12345/smaps

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-15T04:21:38.727

我找不到任何关于`get_mem_usage()`.

它报告了什么样的内存使用情况？

确定虚拟内存系统中的内存使用情况是一个相当大的挑战。

实际使用的内存量是您的`resident set size`. 这基本上是您正在使用的任何物理内存。尽管使用共享库（例如 libc），但内存消耗也（部分）与其他应用程序共享。

然后是一个虚拟集大小 - 任何映射的虚拟内存、任何匿名映射、任何其他映射文件的总和。其中大部分不会真正得到物理内存的支持（即不是常驻内存），并且可能会在其他程序中共享。

`pmap -x <pid>`会给你一张整洁的桌子，包括常驻/肮脏的部分。

总的来说，值得研究是什么“使用”了所有这些内存，但这可能根本不是什么大问题。如果您在 32 位系统上运行，那么以后可能会变得有点紧张（因为您的虚拟地址空间是有限的）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-14T19:08:44.010

另一种可能性：如果您的应用程序之间有共享内存，那么该共享内存将计入访问共享内存段的每个应用程序，即使它只分配一次。因此，如果在某处分配了 2gb 的共享内存段，并且 20 个不同的应用程序使用该共享内存，那么所有 20 个应用程序似乎都在使用 2+gb 的内存，看起来好像已分配了 40+gb 的内存.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-14T22:27:22.033

在这种情况下，它原来是一个分配 1.9 G 内存的库（我没有直接使用）。我通过查看 /proc/12345/smaps 找到了它

```
2aaab2197000-2aab2ba86000 rw-p 2aaab2197000 00:00 0 
Size:           1991612 kB 
```

在 /proc/12345/maps 中查找地址我发现

```
2aaab2174000-2aaab2197000 rw-p 0016c000 4f9:2c566 59607963               /mnt/lustre/epp_scratch/atlas/sm442/Irvex/lhapdf-5.8.8/lib/.libs/libLHAPDF.so.0.0.0 
```

这是一个进行*大量*静态初始化的 fortran 库。

# javascript - chrome打包应用程序的后台Websocket

> ID：14881847
> 
> 赞同：3
> 
> 时间：2013-02-14T18:43:41.163
> 
> 标签：javascript, html, google-chrome-extension, websocket

我制作了一个包含持久背景页面的 chrome 打包应用程序。后台页面通过 websocket 连接到服务器，并绑定以在收到消息时发出通知。

当我第一次加载应用程序然后从服务器发送消息时，我会收到预期的通知。所以websocket正在工作。但是，如果我等待几分钟（让应用程序空闲）然后从服务器发送消息，应用程序不会响应。似乎它正在超时（要睡觉）。

我该如何解决这个问题？

# c++ - boost线程中的“参数太少无法运行”

> ID：14881849
> 
> 赞同：1
> 
> 时间：2013-02-14T18:43:49.567
> 
> 标签：c++, multithreading, opencv, boost

我正在尝试开发立体视觉系统。每当我尝试构建代码时，我都会收到以下消息：

```
 ***** Build of configuration Debug for project RicoCameraCpp ****

    make all 
    Building file: ../main.cpp
    Invoking: Cross G++ Compiler
    g++ -I/home/ux/Downloads -I/usr/local/boost_1_52_0/boost -I/usr/local/boost_1_52_0 -    I/home/ux/Downloads/opencv2 -include/home/ux/Downloads/opencv2/opencv_modules.hpp -include/usr/local/boost_1_52_0/boost/thread.hpp -O0 -g3 -Wall -c -fmessage-length=0 -MMD -MP -MF"main.d" -MT"main.d" -o "main.o" "../main.cpp"
In file included from /usr/local/boost_1_52_0/boost/thread/thread.hpp:22:0,
                 from /usr/local/boost_1_52_0/boost/thread.hpp:13,
                 from <command-line>:0:
/usr/local/boost_1_52_0/boost/thread/detail/thread.hpp: In member function ‘void boost::detail::thread_data<F>::run() [with F = int (*)(int, char**)]’:
../main.cpp:81:1:   instantiated from here
    /usr/local/boost_1_52_0/boost/thread/detail/thread.hpp:78:17: error: too few arguments to function
    /usr/local/boost_1_52_0/boost/system/error_code.hpp: At global scope:
    /usr/local/boost_1_52_0/boost/system/error_code.hpp:214:36: warning: ‘boost::system::posix_category’ defined but not used [-Wunused-variable]
    /usr/local/boost_1_52_0/boost/system/error_code.hpp:215:36: warning:     ‘boost::system::errno_ecat’ defined but not used [-Wunused-variable]
    /usr/local/boost_1_52_0/boost/system/error_code.hpp:216:36: warning:     ‘boost::system::native_ecat’ defined but not used [-Wunused-variable]
    make: *** [main.o] Error 1

    **** Build Finished ***** 
```

这是我的代码：

```
#include "cstdlib"
#include "cmath"
#include "opencv/cv.h"
#include "opencv/highgui.h"
#include "boost/thread.hpp"
#include <iostream>

using namespace std;
using namespace boost;
using namespace cv;

int firstCam( int argc, char** argv )
{
    //initilize first camera
    CvCapture* captureRightCam = cvCaptureFromCAM(0);

    //check if first camera is available
    if(!captureRightCam)
        {
        cout << "No first camera to capture\n";
            return(-1);
        }

    //create right window
    cvNamedWindow( "Right Cam", CV_WINDOW_AUTOSIZE );

    //display frames for every cvWaitKey duration
    while ( 1 )
        {
            //get frames
        IplImage* rightFrame = cvQueryFrame( captureRightCam );

        //check if captured
        if ( !rightFrame )
        {
            fprintf( stderr, "ERROR: frame is null...\n" );
            getchar();
            break;
        }
        //show frames inside the windows
        cvShowImage( "Right Cam", rightFrame );
        cvWaitKey(150);
    }
//release and destroy windows
cvReleaseCapture( &captureRightCam );
cvDestroyWindow( "Right Cam" );
return 0;
}

int secondCam( int argc, char** argv )
{
CvCapture* captureLeftCam = cvCaptureFromCAM(1);
if(!captureLeftCam)
    {
        cout << "No second camera to capture\n";
        return(-1);
    }
cvNamedWindow( "Left Cam", CV_WINDOW_AUTOSIZE );
while ( 1 )
    {
        IplImage* leftFrame = cvQueryFrame( captureLeftCam );
        if ( !leftFrame )
        {
            fprintf( stderr, "ERROR: frame is null...\n" );
            getchar();
            break;
        }
        cvShowImage( "Left Cam", leftFrame );
        cvWaitKey(150);
    }
cvReleaseCapture( &captureLeftCam );
cvDestroyWindow( "Left Cam" );
return 0;
}

int main()
{
boost::thread t1(firstCam);
boost::thread t2(secondCam);
return 0;
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T18:48:12.220

我认为错误消息非常具有描述性，实际上：

您正试图从您的函数中创建一个线程`firstCam`。该函数有两个参数，但是当你创建你的线程时，你没有给它任何参数。因此它无法弄清楚要传递给您的函数的参数，因此抱怨“参数太少”。

在这种情况下，您似乎从某个地方复制了函数签名而没有考虑过。你从不使用`argc`and `argv`。

（作为旁注：

```
using namespace std;
using namespace boost;
using namespace cv; 
```

是个坏主意，迟早会给你带来麻烦。有关详细信息，请参见[GotW 53。](http://www.gotw.ca/gotw/053.htm)）

# php - 在单个日期标题下分组“今天的事件”？

> ID：14881853
> 
> 赞同：0
> 
> 时间：2013-02-14T18:44:20.420
> 
> 标签：php, parsing, google-calendar-api

我正在尝试解析 Google 日历以在我们的电视上使用以显示“今日活动”。

虽然多亏了一位朋友的帮助，我才走了大部分路，但我想看看是否有人可以帮助我完成剩下的路。

下面的代码会生成包含所有信息的日历，但对于每个条目，它都会显示日期。由于它们都是同一天，因此在查看时会感到沮丧和困惑。我离程序员还差得很远，但我能理解一些事情。

我如何将所有今天的事件分组在一个日期标题下？

提前致谢。

```
<?php
    $confirmed = 'http://schemas.google.com/g/2005#event.confirmed';
    $three_months_in_seconds = 60 * 60 * 24 * 28 * 3;
    $three_months_ago = date("Y-m-d\Th:i:s", time() - $three_months_in_seconds);
    $three_months_from_today = date("Y-m-d\Th:i:s", time() + $three_months_in_seconds);
    $params = "?orderby=starttime&start-min=" . $three_months_ago . "&start-max=" . $three_months_from_today;
//$params = "?orderby=starttime&start-min=2012-12-01T05:48:47&start-max=2013-05-07T05:48:47&sortorder=a&singleevents=true&futureevents=true";
$params = "?orderby=starttime&sortorder=a&singleevents=true&futureevents=true";
    $feed = "https://www.google.com/calendar/feeds/REDACTED%40gmail.com/private-REDACTED/full".$params;
    $doc = new DOMDocument();
     if (!$doc->load( $feed )) echo 'failed to load';
    $entries = $doc->getElementsByTagName( "entry" );
    foreach ( $entries as $entry ) {

        $status = $entry->getElementsByTagName( "eventStatus" );
        $eventStatus = $status->item(0)->getAttributeNode("value")->value;

        if ($eventStatus == $confirmed) {
            $titles = $entry->getElementsByTagName( "title" );
            $title = $titles->item(0)->nodeValue;

            $times = $entry->getElementsByTagName( "when" );
            $startTime = $times->item(0)->getAttributeNode("startTime")->value;
            $when = date( "D M j, Y", strtotime( $startTime ) );
            $time = date("g:i A",strtotime($startTime));

            $places = $entry->getElementsByTagName( "where" );
            $where = $places->item(0)->getAttributeNode("valueString")->value;

            print "<div class='row when'>$when</div>";
            echo "<div class='row event'><span class='time'>$time</span><span class='title'>$title</span><span class='where'>$where</span></div>";
//            print $where . "\n";
            print "\n";
        }
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T21:44:36.417

有一个答案：

只是改变这个：

```
print "<div class='row when'>$when</div>"; 
```

对此：

```
if ($old_when!=$when) print "<div class='row when'>$when</div>"; $old_when=$when; 
```

并添加

```
$old_when = null; 
```

在 foreach 之前

# c# - C# 中的 Linq to SQL 唯一数据

> ID：14881863
> 
> 赞同：0
> 
> 时间：2013-02-14T18:45:23.387
> 
> 标签：c#, linq-to-sql

![列表问题](../Images/eb35471446f345d2773c91930d3c8b10.png)

我有一个很长的列表，其中包含从 Linq 到 SQL 查询中获得的船只，但我只想要每个 ImoNo 一行。今天我每个 ImoNo 大约有 4 行。我只需要最后更新的一行（所以在这个例子中我需要 2013-01-27）。

这是我的 Linq To SQL 查询：

```
var res = from positions in context.Lloyds_ETAs
          join vessels in context.Lloyds_Vessels on positions.ImoNumber equals vessels.imo_no
           select new PositionData {
              ImoNo = positions.ImoNumber,
              PositionCordinates = positions.AIS_Latest_Position,
              CompassOverGround = positions.Compass_over_Ground_Heading,
              VesselId = positions.Vessel_ID,
              Equipment = vessels.vessel_type,
              Updated = positions.Last_Place_Location
           };

return res.ToList(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T18:54:16.943

```
var res = (from positions in context.Lloyds_ETAs
          join vessels in context.Lloyds_Vessels on positions.ImoNumber equals vessels.imo_no
          select new PositionData {
              ImoNo = positions.ImoNumber,
              PositionCordinates = positions.AIS_Latest_Position,
              CompassOverGround = positions.Compass_over_Ground_Heading,
              VesselId = positions.Vessel_ID,
              Equipment = vessels.vessel_type,
              Updated = positions.Last_Place_Location
           })
           .GroupBy(x => x.ImoNo)
           .Select(g => g.OrderByDescending(pd => pd.Updated).First()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T18:48:20.453

如果你想要最后一个，你所要做的就是`.OrderBy(pd => pd.Updated).Last()`在你的选择之后追加。

```
var res = (from positions in context.Lloyds_ETAs
          join vessels in context.Lloyds_Vessels on positions.ImoNumber equals vessels.imo_no
           select new PositionData {
              ImoNo = positions.ImoNumber,
              PositionCordinates = positions.AIS_Latest_Position,
              CompassOverGround = positions.Compass_over_Ground_Heading,
              VesselId = positions.Vessel_ID,
              Equipment = vessels.vessel_type,
              Updated = positions.Last_Place_Location
           }).OrderBy(pd => pd.Updated).Last();

return res.ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T18:50:16.287

```
(yourQuery).OrderByDescending(pd=>pd.Updated).First() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T18:50:21.043

结果有几种方法可以只获得一个“行”：

```
res.OrderByDescending(x => x.Updated).Take(1);
res.OrderByDescending(x => x.Updated).First();
res.Order(x => x.Updated).Last(); 
```

看起来你有一些重复，所以也许做一个 group by 会更合适。

# javascript - 是否有一种巧妙的方法/技巧来重用在案例中执行不同操作的 switch 语句？

> ID：14881870
> 
> 赞同：0
> 
> 时间：2013-02-14T18:46:06.163
> 
> 标签：javascript, switch-statement

我一遍又一遍地使用相同的 switch 语句，但每种情况下的功能都不同。

```
switch(type){
  case "t1": 
    fnA();
    break;  
  case "t2": 
    fnB();
    break;
  ...
}

switch(type){
  case "t1": 
    fnZ();
    break;  
  case "t2": 
    fnY();
    break;
  ...
} 
```

我不知道是否有更好或更聪明的方法来做到这一点。我什么都想不出来，所以我想我会把它扔给你们这些好人。提前致谢。

编辑：为了更清楚地理解它，可以这样想：在第一次切换中，根据类型，数据将以某种方式插入添加到对象中。在第二次切换中，数据将以某种方式从对象中删除。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T18:56:19.427

我认为这看起来是使用面向对象编程的好情况。

1.  为每种类型创建一个类
2.  每当您需要根据类型执行不同的操作时，请调用 type.someFunction()。使每个类型类以不同的方式实现此功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T19:00:21.367

这可能是在黑暗中拍摄，但我猜在你的代码中多次重复 switch-case 只是一个糟糕的架构决策的结果。

您可能错误地分配了职责。

假设您使用模块而不是面向对象的东西 - 被调用的方法应该是 mixins。或者使用装饰器模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T18:50:06.037

通常 switch 语句不是处理瓶颈，所以它是你优化的最后一件事。

每种情况都会作为测试和跳跃转换到 CPU 上，因此请考虑一下最坏情况会执行多少操作，并决定是否值得大惊小怪，以及实际节省多少操作（最坏情况和平均情况）。

话虽如此，有几个明显的选择。如果您有数字类型并且它们是均匀分布的，您可以将您的 switch 语句拆分为多个 switch....

```
switch(type){
  case "t1": 
    fnA();
    break;  
  case "t2": 
    fnB();
    break;
  ...
}

switch(type){
  case "t1": 
    fnZ();
    break;  
  case "t2": 
    fnY();
    break;
  ...
} 
```

这当然更难维护，并且可能依赖于使您的代码难看的常量值的知识。它真的只是一个肮脏的搜索树......

另一种方法是将所有案例放入函数中，并构建将每个值映射到函数处理程序的树或哈希表。这样您就可以始终依赖`O(logN)`搜索时间（或者更好的是，在哈希表的情况下）。我再说一遍：除非你有充分的理由，否则不要这样做。

希望对您有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T18:51:59.393

我会犹豫实施这个解决方案，因为它并不比 a 简洁得多`switch`，而且更令人困惑。

```
function doSwitch(expression, options) {
    options[expression]();
}

doSwitch(type, {
    "t1": fnA,
    "t2": fnB
});

doSwitch(type, {
    "t1": fnZ,
    "t2": fnY
}); 
```

不要因为性能而这样做——这样做是因为你有*大量*重复的 switch 语句。如果您有这样的陈述，您可能需要重新评估。

# ruby-on-rails - 未定义的方法“空？” 对于零：NilClass

> ID：14881876
> 
> 赞同：1
> 
> 时间：2013-02-14T18:46:21.067
> 
> 标签：ruby-on-rails, ruby

我在下拉字段中显示一系列小时

```
[["09:30am", "2013-02-14 09:30:00"], ["10:00am", "2013-02-14 10:00:00"] ... 
```

我用以下方式渲染数组：

```
<%= f.select :atime, @time_options %> 
```

我将数组的值分配给控制器中的实例变量

```
 def new
    @time_options = Appointment.time_options
    @doctor = Doctor.find(params[:doctor_id])
    @appointment = @doctor.schedule.appointments.build

  end

  # GET /appointments/1/edit
  def edit
    @time_options = Appointment.time_options
    @doctor = Doctor.find(params[:doctor_id])
    @appointment = @doctor.appointments.find(params[:id])
  end

  # POST /appointments
  # POST /appointments.json
  def create
    @time_options = Appointment.time_options    
    @doctor = Doctor.find(params[:doctor_id])
    @appointment = @doctor.schedule.appointments.new(params[:appointment])

      if @appointment.save
        #send email
        AppointmentMailer.appointment_confirmation(@appointment, I18n.locale).deliver
        AppointmentMailer.new_appointment(@appointment, I18n.locale).deliver

        redirect_to :action => 'thank_you'
      else
        render action: 'new'
      end
  end 
```

在模型中我定义了一个类方法来构建数组

```
 def self.time_options
    start_of_day = Time.zone.now.beginning_of_day
    start_time = start_of_day + 9.hours
    end_time = start_of_day + 17.hours

    lunch_start = start_of_day + 13.hours
    lunch_end = start_of_day + 14.hours + 30.minutes

    times = []
    until start_time > end_time
      start_time = (start_time + 30.minutes)
      unless start_time >= lunch_start && start_time < lunch_end
        times << start_time
      end
    end
    times.map{|t| [t.strftime("%I:%M%p").downcase, t.to_s(:db)] }
  end 
```

但是，当我提交表格时，我得到一个`undefined method`空的？对于 nil:NilClass` 错误：

```
<%= f.select :atime, @time_options %> 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-04T20:36:22.033

这

```
 <%= f.select :atime, @time_options %> 
```

应该是这样的

```
 <%= f.select :atime_id, @time_options %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T03:35:56.037

在该`create`方法中，从 the 开始`@doctor`并沿着链向下：安排，然后`params[:appointment]`，直到找到 nil，然后找出它为什么是 nil。Rails.logger 或 pry 如果您正在运行 rails s 将是您的朋友。

# ipad - ipad 肖像没有缩小到合适的尺寸

> ID：14881879
> 
> 赞同：1
> 
> 时间：2013-02-14T18:46:33.337
> 
> 标签：ipad, zooming, portrait

当我在 ipad peek Portrait 上查看我的网站时，它并没有缩小适当的尺寸。可能是我的设计没有足够的流动性。但是，我很困惑，因为它似乎确实在某些时候起作用。

请参阅[http://www.nogginusers.com/libermanproperties/libermanproperties.html](http://www.nogginusers.com/libermanproperties/libermanproperties.html)

和 ipad 肖像的标准媒体样式表

# javascript - 使用 jQuery 拦截表单提交

> ID：14881881
> 
> 赞同：46
> 
> 时间：2013-02-14T18:46:44.180
> 
> 标签：javascript, jquery

我想通过 jQuery 拦截提交并首先检查服务器上是否存在文件。如果存在则继续请求，如果不存在则显示消息并且不发送请求。这就是我所拥有的：

```
$("#methodForm").submit(function(e){

    checkIndex('upload/segments.gen').done(function() {
        return true;
    }).fail(function () {
        e.preventDefault();
        alert("No index present!");
        return false;
    });
}); 
```

这是`checkIndex()`：

```
function checkIndex(file){
    return $.ajax({
        url : file,
        type:'HEAD'
    });
} 
```

发生的情况是：文件存在于服务器上，但`checkIndex`返回失败。首先我看到警报弹出窗口，然后它继续并将发布请求发送到服务器。

我也将它`checkIndex()`用于其他目的，它可以像预期的那样工作，所以我很确定错误在提交例程中的某个地方。但我无法找出它有什么问题。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-02-14T18:49:25.103

您不能从回调中返回到异步方法（例如 ajax）。相反，阻止一起提交，然后在准备好时提交。

```
$("#methodForm").submit(function(e){
    e.preventDefault();
    var form = this;
    checkIndex('upload/segments.gen').done(function() {
        form.submit(); // submit bypassing the jQuery bound event
    }).fail(function () {
        alert("No index present!");
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T18:48:55.210

它并没有真正这样工作，checkIndex 是异步的，所以当它返回任何东西时，表单已提交，并且返回语句也在不同的范围内，尝试更像这样的东西：

```
$("#methodForm").submit(function(e){
    e.preventDefault(); //prevent submit
    var self = this;
    checkIndex('upload/segments.gen').done(function() {
        self.submit(); //submit if ajax OK
    }).fail(function () {
        alert("No index present!");
   });
}); 
```

# android - 如何获取 Kindle 平板电脑上导航栏的大小？

> ID：14881882
> 
> 赞同：2
> 
> 时间：2013-02-14T18:46:45.000
> 
> 标签：android, android-layout, kindle-fire

我正在使用 Kindle Fire HD 8.9"，与其他 Android 平板电脑不同，它的导航栏（返回、主页等）位于设备的右边缘而不是底部边缘。这给我自己造成了布局问题因为我需要将尺寸计算为可用屏幕宽度的百分比。

我试过`Display#getPoint(Point)`了，因为 Javadoc 的措辞听起来好像它会排除系统装饰，但它不适用于这个设备。我也知道`OnLayoutChangeListener`在我的根视图上设置 a ，但我需要在触发此侦听器之前知道可用大小。

那么有没有办法以编程方式获取导航栏的大小？我计算出的大小为 90px，但我想避免硬编码，因为它很容易出现风险。

# c++ - 难以使用 file.seekg() (C++)

> ID：14881883
> 
> 赞同：1
> 
> 时间：2013-02-14T18:46:47.150
> 
> 标签：c++, file, eof, seekg

以下代码仅打印文件一次：

```
#include <iostream>
#include <fstream>
using namespace std;

int main(int argc, const char *argv[])
{
    ifstream infile;
    infile.open("in", ios::binary);
    char c;

    while (infile.get(c))
    {
        cout << c;
    }

    infile.seekg(0, ios::beg);
    infile.clear();

    while (infile.get(c))
    {
            cout << c;
    }
    infile.close(); 
    return 0;
} 
```

我认为它在运行文件后与 eof 标志有关，但我不知道如何解决这个问题。

干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T19:40:40.273

您的代码有几个问题：

首先，你永远不会`infile.get()`在使用它的结果之前检查它是否成功。而你`infile.good()`用来控制一个循环，并`infile.eof()`控制另一个循环：`infile.eof()` 在你知道输入失败之前没有用，并且 `infile.good()`永远不会真正有用。只需`while ( infile.get( c ) )`用于两个循环。

其次，正如您所说，您永远不会重置导致您完成第一个循环的“错误”。一旦遇到文件结尾（并且`infile.get( c )`失败），您需要 `infile.clear()`在执行任何其他操作之前调用。

最后，当然，你没有检查你是否成功打开文件，以及是否`seekg`成功。而且您通常不必关闭输入文件；超出范围时会自动关闭。（另一方面，您*应该*close 或 flush `std::cout`，然后验证它是否仍然可以。`0`在我的书中，当您未能写入所有数据时返回是一个严重的错误。）

# python - Python Pandas 读取具有可变前导码长度的 csv 文件

> ID：14881885
> 
> 赞同：4
> 
> 时间：2013-02-14T18:46:50.013
> 
> 标签：python, pandas

嗨，我正在使用 pandas 读取一系列文件并将它们连接到数据框。我的文件开头有一堆垃圾，长度可变，我想忽略它们。`pd.read_csv()`有skirows方法。我编写了一个函数来处理这种情况，但我必须打开文件两次才能使其工作。有没有更好的办法？

```
HEADER = '#Start'

def header_index(file_name):
    with open(file_name) as fp:
        for ind, line in enumerate(fp):
            if line.startswith(HEADER):
                return ind

for row in directories:
    path2file = '%s%s%s' % (path2data, row, suffix)
    myDF = pd.read_csv(path2file, skiprows=header_index(path2file), header=0, delimiter='\t') 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-07-24T15:29:08.743

这现在是可能的（不知道当时是否可能）如下：

```
pos= 0
oldpos = None

while pos != oldpos:  # make sure we stop reading, in case we reach EOF
    line= fp.readline()
    if line.startswith(HEADER):
        # set the read position to the start of the line
        # so pandas can read the header
        fp.seek(pos)
        break
    oldpos= pos
    pos= fp.tell()    # renenber this position as sthe start of the next line

pd.read_csv(fp, ...your options here...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-01T17:52:20.067

由于`read_csv()`也接受类似对象的文件，因此您可以在传递该对象之前跳过前导垃圾行 --- 而不是传递文件名。

例子：

代替

```
df = pd.read_csv(filename, skiprows=no_junk_lines(filename), ...) 
```

和：

```
def forward_csv(f, prefix):
    pos = 0
    while True:
        line = f.readline()
        if not line or line.startswith(prefix):
            f.seek(pos)
            return f
        pos += len(line.encode('utf-8'))

df = pd.read_csv(forward_csv(open(filename), HEADER), ...) 
```

笔记：

*   `readline()`到达 EOF 时返回空字符串
*   不调用`tell()`来跟踪位置可以节省一些`lseek`系统调用
*   最后一行`forward_csv()`假设您的输入文件以 ASCII 或 UTF-8 编码 - 如果不是，您必须调整此行

# dns - DNS Nameserver 指向它自己。为什么？

> ID：14881886
> 
> 赞同：3
> 
> 时间：2013-02-14T18:47:11.480
> 
> 标签：dns, webserver, nameservers

我继承了一个为我的客户托管 5 个网站的 Web 服务器。称它们为 domian1、domain2 等 我刚刚发现所有 5 个域的所有域名服务器都设置为 ns1.domain1.com 和 ns2.domain1.com。单个服务器正在为包括 domain1.com 在内的所有域运行 DNS。ns1 和 ns2 都指向同一个 Web 服务器。

除了没有冗余，并且 domain1 名称服务器使用 DNS 来解析他们自己的 IP 之外，为什么有人会这样做？我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T00:24:02.507

There are two options when creating NS records for zones:

1) Set the NS record of each zone to point only to itself. Hence, domain1.com would get ns1.domain1.com, etc. The advantage of this is that the remote site doesn't need to do a cross reference to somewhere else and go look it up too. EG, if you have domain1.com's NS records pointing to ns1.domain2.com, then a lookup of the NS records for domain2.com have to be checked too to ensure it has the right location to go lookup where ns1.domain2.com really is. You could imagine the case where domain2.com's NS records point to domain3.com's name servers... This is obviously inefficient and results in a lot of unneeded chasing. So... pointing entirely internal seems like a no-duh, right! Less chasing! But... it also means you need to keep com's notion of your name servers in sync with your notion of your name servers, and when you add or remove them and/or change the IP addresses, you need to notify your com (through your registrar) that things have changed. (tech speak: update com's notion of your glue records).

2) Add an NS record pointing to an external server. This is common for server farms that sell you DNS services as part of their transaction as your registrar (ie, where you went to go buy domain1.com). They set your NS record to something like "ns1.godaddy.com". In your case, the previous zone owner set the NS records to all point to the domain1.com zone. This is actually helpful when you expect to change your address in the future. Rather than have to go change the IP address in all 5 of your zones, you only change it in domain1.com's ns1.domain1.com record and you're good to go. The other zones don't need to be touched. Yay! It's even more yay-full when you are managing 100 zones.

So, there isn't a right or a wrong here... It's a trade-off and different administrators do different things. Feel free to change it to the other model if you don't mind the zone-editing maintenance if you ever change anything. Personally, it's what I do when possible too: I like them internally self-contained. But then, that's also when most people fail to update the parent's glue records to match and there are tons and tons of zones in the world that are out of sync for exactly this reason: "oh, I'll do that tomorrow".

# vector-graphics - 如何在 eps 文件的每个对象中用一种颜色替换另一种颜色？

> ID：14881887
> 
> 赞同：40
> 
> 时间：2013-02-14T18:47:10.740
> 
> 标签：vector-graphics, inkscape, color-palette

我有一个需要编辑的矢量图像，并且我有inkscape。我想要做的是将调色板的一组颜色替换为另一组。例如，我的图像有一个带有橙色、绿色和蓝色几种色调的调色板。如果我想用另一种颜色替换调色板的橙色部分，我该怎么办？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-02-15T02:07:14.510

这是选择完全相同颜色（填充）的所有项目的一种方法。也可以查找其他样式类别，例如笔触颜色等。

1）假设我们希望选择画布上的所有橙色项目。选择其中之一并转到`Fill and Stroke`对话框。从 RGBA 字段中复制颜色代码（下图中以红色突出显示）。 ![在此处输入图像描述](../Images/574f5f4197c012ae788cf4df05e5dd73.png)

2) 打开搜索对话框 ( `Find`) (Ctrl + F) 并复制字段中的颜色代码`Style:`

3）去掉颜色代码的最后两个字符。在颜色代码之前添加一行`fill:#`（也在`Style:`字段中！）。点击`Find`按钮，所有用给定颜色填充的项目都应该被选中。 ![在此处输入图像描述](../Images/85e993421b885713820aa06edcac33ee.png)

4) 更改`Fill and Stroke`对话框中选定对象的颜色。

# c - 使用 MatLab 脚本通过 Telnet 运行远程 Linux 程序

> ID：14881890
> 
> 赞同：1
> 
> 时间：2013-02-14T18:47:29.163
> 
> 标签：c, linux, matlab, telnet

我在 Linux Fedora 14 上有一个 C 程序，现在我正在尝试使用 MATLAB 通过 telnet 从另一台 PC 远程运行它。但是现在我能做的就是从matlab调用putty来访问Linux终端，并通过这个远程终端运行程序。但这对我来说没用，因为我无法自动化 matlab 脚本来重复调用程序，并读回一些值。

来说明我的情况。假设我有一个程序 Hello 如下：

```
 void main (int argc, char* argv){
       if(argc > 0){
          printf("Hello %s \n", argv);
          printf("result is %d", argc++);
       }
      return;
   } 
```

我想要一个 MATLAB 脚本，它可以从远程 PC 运行该程序并输入名称并多次读取结果。但现在我只有`system('C:\Putty\putty.exe <ip_address> -username -password')`从 matlab 调用并在 Linux 上获取远程终端，然后手动运行`./hello <name>`. 如何直接通过 telnet 从 matlab 运行整个程序（有或没有 putty，没关系），并从 telnet 获得响应？

谢谢。

# oracle - 我无法连接或 Oracle for ADO.NET 实体数据模型

> ID：14881897
> 
> 赞同：1
> 
> 时间：2013-02-14T18:47:58.680
> 
> 标签：oracle, entity-framework-4, oracle11g

我正在尝试使用带有 ODT 32 位的 oracle ODAC 64 连接到 Oracle 11g 数据库。我可以从 OLE DB 的服务器资源管理器建立正确的连接

![在此处输入图像描述](../Images/45cce26ffa7245833ebac9408096a39a.png)

但后来我尝试从 ADO.Net 实体选项中得到以下信息，不知道为什么我不能在这里获得用于 EF 的 OLE DB。
![在此处输入图像描述](../Images/73878297f3f91e7e0eeb010a4c23e284.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-23T12:58:09.250

我决定购买 devart 并试一试。

# php - php额外的换行符出现

> ID：14881904
> 
> 赞同：0
> 
> 时间：2013-02-14T18:48:21.263
> 
> 标签：php, echo, line-breaks, isset

我是 php 的新手。我正在返回地址的一些变量，并正在检查 address2 是否存在。如果它为空，我希望它跳过而不是在格式中添加额外的行。但是，无论如何，它似乎正在打破界限。我已经在整个地方都尝试了中断标签，但没有找到它的来源。

```
echo "$comp_name<br>$comp_add1";
if (isset($comp_add2)) {
    echo "<br>$comp_add2"; }
echo "<br>$comp_city, $comp_state $comp_zip<br><a href=\"http://$comp_url\" >$comp_url</a>"; 
```

看看这个页面：[http](http://projects.ekcetera.com/people.php) ://projects.ekcetera.com/people.php ...点击ABC公司，然后选中A Simplified Life，你会看到A Simplified Life中的额外换行符。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T18:54:38.830

您的示例页面显示了一个致命错误，但我假设您必须在此处使用 empty，因为该变量可能已设置，但仅填充了一个空字符串。

所以

```
if (isset($comp_add2)) {
    echo "<br>$comp_add2"; 
} 
```

应该

```
if (!empty($comp_add2)) {
    echo "<br>$comp_add2"; 
} 
```

这是关于isset vs empty的一个很好的解释：http: [//www.virendrachandak.com/techtalk/php-isset-vs-empty-vs-is_null/](http://www.virendrachandak.com/techtalk/php-isset-vs-empty-vs-is_null/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T18:54:28.017

在 A Simplified Life 中，您的 $comp_add2 已设置，您必须检查它是否为空

```
echo "$comp_name<br>$comp_add1";
if (!empty($comp_add2)) {
    echo "<br>$comp_add2"; }
echo "<br>$comp_city, $comp_state $comp_zip<br><a href=\"http://$comp_url\" >$comp_url</a>"; 
```

# c++ - 为新文件类型重载 >> 运算符的优雅方法是什么？

> ID：14881905
> 
> 赞同：0
> 
> 时间：2013-02-14T18:48:23.577
> 
> 标签：c++, inheritance, file-io, operator-overloading

我正在向一些遗留代码添加一些新功能。现有代码从文本文件中读取一些数据。在新版本中，我将读取更多数据并希望使用二进制文件，除此之外，该程序可以在 Linux 或 Windows 上使用相同的（外部）数据文件，所以我想强制执行读取二进制数据时的大端意义。

为此，我创建了一个新的输入文件流类型——从 ifstream 继承——带有一个重载的“>>”运算符，它从文件中读取二进制数据，将其解释为大端。到目前为止，一切都很好。

现在，当我从文件中读取数据时，我需要选择要创建的输入文件流对象的类型：处理旧文本文件时的常规 ifstream 或处理新二进制文件时的新“iBinFile”类型。我能想到的唯一解决方案是使用两段不同的代码，一段用于旧类型，另一段用于新类型，除了输入文件流类型之外，它们是相同的：

```
if (szFileName.compare(szFileName.size()-3,3,"bin")==0) {
    iBinFile inFile(szFileName.c_str());
    if (!inFile) {
        cout << szFileName <<" file could not be opened" << endl;
        exit (-1);
    }
    while(!inFile.eof())
        inFile >> data;
}
else {
    ifstream inFile(szFileName.c_str());
    if (!inFile) {
        cout << szFileName <<" file could not be opened" << endl;
        exit (-1);
    }
    while(!inFile.eof())
        inFile >> data;
} 
```

但我觉得因为 iBinFile 是从 ifstream 派生的，所以应该有一种方法可以做到这一点，其中`if`语句只确定文件类型，其他一切都是共同的。如果我从我自己的类中派生 iBinFile，那么我可以将“>>”运算符设为虚拟，但由于不是，我不知道解决方案是什么，如果有的话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T19:12:01.980

当前所有 iostream 类的抽象都是格式化文本。您*不想*从任何 `std::istream`或`std::ostream`类派生；您想创建自己的层次结构。您可能确实希望从中派生 `std::basic_ios<char>`, 以进行错误处理和`streambuf` 管理。同样，确实可能确实想使用`streambuf` 及其派生类。

# drop-down-menu - Twitter Bootstrap 下拉菜单宽度

> ID：14881906
> 
> 赞同：3
> 
> 时间：2013-02-14T18:48:27.223
> 
> 标签：drop-down-menu, twitter-bootstrap

这是我的目标：[https ://docs.google.com/file/d/0B13W1jkpc_BzLXZ6RGxGbUd2NG8/edit?usp=sharing](https://docs.google.com/file/d/0B13W1jkpc_BzLXZ6RGxGbUd2NG8/edit?usp=sharing)

这是我的方法的CSS：

```
@media (min-width: 980px) {
.dropdown-menu .sub-menu {
  left: 100%;
  position: absolute;
  top: 0;
  visibility: hidden;
  margin-top: -1px;
}
ul.nav li.dropdown:hover > ul.dropdown-menu {
  display: block;
}
a.menu:after, .dropdown-toggle:after {
  content: none;
}
.navbar .dropdown-menu {
  margin-top: 0px;
  text-align: center;
}} 
```

现在的样子：[https ://docs.google.com/file/d/0B13W1jkpc_BzZUlRck5VcWh0TkE/edit?usp=sharing](https://docs.google.com/file/d/0B13W1jkpc_BzZUlRck5VcWh0TkE/edit?usp=sharing)

一切正常，除了我似乎无法为下拉菜单的文本获得正确的宽度（我需要根据文本缩小宽度）。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-23T14:43:52.157

您必须删除列表的`min-width`属性`.dropdown-menu`。包括引导程序**后**包括以下内容：

```
.dropdown-menu {
  min-width: 0px;
} 
```

或者，对于您给出的确切样式，您可以改用引导[程序的工具提示](http://twitter.github.io/bootstrap/javascript.html#tooltips)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T22:20:02.500

尝试从 .dropdown-menu .sub-menu 类中删除填充。

```
.dropdown-menu .sub-menu {
  left: 100%;
  position: absolute;
  top: 0;
  visibility: hidden;
  margin-top: -1px;
  padding: 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-06T18:01:25.687

好吧，您可以在内部文本中添加空间，它会自动增加其宽度，例如您有“--按类别查看--”

使用   添加任意数量的空格

 --按类别查看--

# r - 将行（n）添加到行（n-1）以进行随机游走时如何避免循环

> ID：14881907
> 
> 赞同：0
> 
> 时间：2013-02-14T18:48:34.117
> 
> 标签：r

我正在模拟从坐标（0,0）开始的随机游走。当我使用循环执行此操作时，效果很好：

```
require(ggplot2)
n <- 1000   #number of walks 

# first solution, w/ loop... works but is SLOOOW
coord <- data.frame (x=0, y=0, step=0) #origin
for (i in 1:n){
  dir <- sample(c("w", "e", "n", "s"), 1) #random direction
  step <- sample(1:4, 1) #how far to go in each walk
  startx <- coord[nrow(coord), 1]
  starty <- coord[nrow(coord), 2]
  endx <- ifelse (dir=="w", startx-step, ifelse(dir=="e", startx+step, startx))
  endy <- ifelse (dir=="n", starty+step, ifelse(dir=="s", starty-step, starty))
  newcoord <- data.frame (x=endx, y=endy, step=step)
  coord <- rbind(coord, newcoord)
}
rw <- ggplot(coord, aes(x=x, y=y))
rw + geom_path() + 
  ggtitle(paste(n, "walks")) + 
  geom_point(aes(x=0, y =0), color="green", size=I(5)) +
  geom_point(aes(x=endx, y =endy), color="red", size=I(5)) 
```

但是，当 n>10,000 时，它会变得非常慢，因此希望避免循环并使用某种形式的“应用”，但不知道如何添加第 n 行和第 n-1 行的坐标值。请帮忙，谢谢。

```
# second solution
d <- data.frame(dir=sample(c("w", "e", "n", "s"), n, replace=T), step=sample(1:4, n, replace=T))
xy <- data.frame(x=0, y=0)
x. <- data.frame(x=with(d, ifelse (dir=="w", -step, ifelse(dir=="e", step, 0))))
y. <- data.frame(y=with(d, ifelse (dir=="s", -step, ifelse(dir=="n", step, 0))))
x.y. <- cbind(x.,y.)
xy <- rbind(xy, x.y.)
head(xy)
# ... stuck here 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T19:51:15.030

`data.table`对于这种问题很快......

```
walk.dt.f<-function(n=10000L, stepsize=1L:4L) {
  # lookup table with direction vector info
  dir.dt<-data.table(dir=c("w", "e", "n", "s"), xdir=c(-1L,1L,0L,0L), ydir=c(0L,0L,1L,-1L), key="dir")

  # initial position for random walk table
  walk.ini.dt<-data.table(rowid=0L,dir="n",step=0L)

  # generate table with random walk info
  walk.dt<-rbindlist(list(data.table(rowid=1L:n, dir=sample(dir.dt[,dir],n,replace=T), step=sample(stepsize,n,replace=T)), walk.ini.dt))

  # join the two tables, and multiply the step info by the direction vectors
  setkey(walk.dt,dir)
  walk.dt[dir.dt,c("xstep","ystep"):=list(step*xdir,step*ydir)]

  # update the key and reorder the rows
  setkey(walk.dt,rowid)

  # update the walk info table with the cumulative position
  walk.dt[,c("x","y"):=list(cumsum(xstep),cumsum(ystep))]

}

system.time(walk.dt.f(10000L))
## user  system elapsed 
## 0       0       0 

system.time(walk.dt.f(1e6L))
## user  system elapsed
## 0.25    0.00    0.25 
```

**编辑：**将起始位置设置为 (0,0)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T19:15:53.553

我想你越来越近了。如果您阅读已经发布的评论，您可以使其更快。所以我建议不要看这个：

```
n=10000
x.=sample(-4:4,n,rep=T)
y.=sample(-4:4,n,rep=T)
x=cumsum(x.)
y=cumsum(y.)

coord=data.frame(x,y) 
```

然后准确地绘制你是怎么做的：

```
rw <- ggplot(coord, aes(x=x, y=y))
rw + geom_path() + 
  ggtitle(paste(n, "walks")) + 
  geom_point(aes(x=0, y =0), color="green", size=I(5)) +
  geom_point(aes(x=startx, y =starty), color="red", size=I(5)) 
```

更新：对于大于 10^5 的 n，绘图非常慢。也许基本图形会更快。

update2：这几乎与 joran 的响应一样慢/快。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-14T19:17:30.217

呸！希望这将进一步推动我消除 R 中愚蠢的“for 循环本来就很慢”的谣言的目标，这里是您的第一个版本的重新工作，*仍然使用*快 40 倍以上的 for 循环。

我什至没有考虑过您实施随机游走是否有意义。我的意思只是指出如何以更快的速度实现原始代码的结果，同时仍然使用“慢”的 for 循环。

```
#My version
foo <- function(n){ 
    coord <- matrix(NA,nrow = n,ncol = 3) #origin
    coord[1,] <- c(0,0,0)
    dir <- sample(c("w", "e", "n", "s"), n,replace = TRUE) #random direction
    step <- sample(1:4, n,replace = TRUE) #how far to go in each walk
    for (i in 2:n){
      startx <- coord[i-1, 1]
      starty <- coord[i-1, 2]
      endx <- ifelse (dir[i]=="w", startx-step[i], ifelse(dir[i]=="e", startx+step[i], startx))
      endy <- ifelse (dir[i]=="n", starty+step[i], ifelse(dir[i]=="s", starty-step[i], starty))
      coord[i,] <- c(endx,endy,step[i])
    }
}

#Your version    
foo2 <- function(n){
    coord <- data.frame (x=0, y=0, step=0) #origin
    for (i in 1:n){
      dir <- sample(c("w", "e", "n", "s"), 1) #random direction
      step <- sample(1:4, 1) #how far to go in each walk
      startx <- coord[nrow(coord), 1]
      starty <- coord[nrow(coord), 2]
      endx <- ifelse (dir=="w", startx-step, ifelse(dir=="e", startx+step, startx))
      endy <- ifelse (dir=="n", starty+step, ifelse(dir=="s", starty-step, starty))
      newcoord <- data.frame (x=endx, y=endy, step=step)
      coord <- rbind(coord, newcoord)
    }
}

system.time(foo(10000))
   user  system elapsed 
  0.353   0.001   0.353 
> system.time(foo2(10000))
   user  system elapsed 
 11.374   2.061  13.308 
```

我在这里所做的只是：

1.  停止。使用。RBIND。并预先分配。
2.  切换到矩阵。
3.  将`sample`呼叫移出循环。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-14T20:11:53.097

由于您正在尝试二维随机游走，因此有 4x4 可能的位移。你可以用 1 到 16 的数字对它们进行编码。但是，为了减少计算并将这些编码的数字映射到方向和位移量，我玩了一个小技巧，我没有用 1:16 编码步骤，而是用`c(-7:0,4:11)`

```
d <- sample(c(-7:0,4:11),n,replace=T)
delta <- d%%4+1
dir <- d%/%4
xd <- dir
xd[xd%%2 ==0]=0
yd <- dir
yd[xd%%2 ==1]=0
yd <- yd/2
x=c(0,xd*delta)
y=c(0,yd*delta)
x=cumsum(x)
y=cumsum(y)

coords<-data.frame(x,y) 
```

这个版本只使用向量化操作，只有一点点开销。我认为它的性能接近于`data.table`之前给出的基于解决方案。

# servicestack - 为什么 ServiceStack 的新 API 提倡“对象”返回类型，而不是强类型？

> ID：14881910
> 
> 赞同：9
> 
> 时间：2013-02-14T18:49:02.873
> 
> 标签：servicestack

例如，如果我有标准的请求和响应 DTO，通过 链接`IReturn<T>`，那么有如下服务方法签名的原因是什么，如各种在线示例中所见（例如[这个](https://github.com/ServiceStack/ServiceStack/wiki/New-Api)，尽管始终不一致）：

```
public object Get(DTO.MyRequest request) 
```

而不是：

```
public IList<DTO.MyResponse> Get(DTO.MyRequest request) 
```

这里的`object`返回类型是否只是为了支持输出流的 gzip 压缩等服务功能，从而导致输出为字节数组？似乎人们希望从这些所谓的“动作”调用中获得适当的更强的返回类型，除非我错过了一些常见的场景或用例。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-14T20:49:15.680

过去，New API 仅支持`object`返回类型是一个限制，但一段时间以来，[New API wiki 页面](https://github.com/ServiceStack/ServiceStack/wiki/New-API)上的所有示例现在都使用强类型响应。

您可能希望返回**对象**返回类型的原因之一是，如果您想在 HttpResult 中装饰响应，例如：

```
 public object Post(Movie movie)
    {
        var isNew = movie.Id == null;
        Db.Save(movie); //Inserts or Updates

        var movie = new MovieResponse {
            Movie = Db.Id<Movie>(newMovieId),
        };
        if (!isNew) return movie;

        //Decorate the response if it was created
        return new HttpResult(movie) {
            StatusCode = HttpStatusCode.Created,
            Headers = {
              { HttpHeaders.Location, Request.AbsoluteUri.CombineWith(movieId) }
            }
        };
    } 
```

如果您想根据请求返回不同的响应（尽管我不建议这样做），它也很有用，例如：

```
 public object Get(FindMovies request)
    {
        if (request.Id != null)
            return Db.Id<Movie>(movie.Id);

        return Db.Select<Movie>();
    } 
```

如果您确实选择返回，我强烈建议您使用标记`object`装饰您的请求 DTO，以[向 ServiceStack 提示服务](https://stackoverflow.com/questions/12700702/servicestack-ireturn)的预期响应应该是什么。`IReturn<T>`

# php - 错误 310：重定向过多。发生在我正在编码的网站的 php 编码页面

> ID：14881911
> 
> 赞同：0
> 
> 时间：2013-02-14T18:49:03.540
> 
> 标签：php, redirect, web

我目前正在为我的高级项目编写社交网络的页面（它只会在本地运行），并且我遇到了这些重定向错误，我不知道如何解决。大约有三个页面包含“header('location:...') 代码。我不知道它在不同的编码级别会做什么，所以我把所有的编码都放在了等量的缩进中。

索引.php

```
<? include("inc/incfiles/header.inc.php"); ?>
<?
$reg = @$_POST['reg'];
//declaring variables to prevent errors
$fn = ""; //First Name
$ln = ""; //Last Name
$un = ""; //Username
$em = ""; //Email
$em2 = ""; //Email 2
$pswd = ""; //Password
$pswd2 = ""; //Password 2
$d = ""; //Sign up Date
$u_check = ""; //Check if username exists
//registration form
$fn = strip_tags(@$_POST['fname']);
$ln = strip_tags(@$_POST['lname']);
$un = strip_tags(@$_POST['username']);
$em = strip_tags(@$_POST['email']);
$em2 = strip_tags(@$_POST['email2']);
$pswd = strip_tags(@$_POST['password']);
$pswd2 = strip_tags(@$_POST['password2']);
$d = date("y-m-d"); // Year - Month - Day

if ($reg) {
if ($em==$em2) {
// Check if user already exists
$u_check = mysql_query("SELECT username FROM users WHERE username='$un'");
// Count the amount of rows where username = $un
$check = mysql_num_rows($u_check);
if ($check == 0) {
//check all of the fields have been filled in
if ($fn&&$ln&&$un&&$em&&$em2&&$pswd&&$pswd2) {
// check that passwords match
if ($pswd==$pswd2) {
// check the maximum length of username/first name/last name does not exceed 25 characters
if (strlen($un)>25||strlen($fn)>25||strlen($ln)>25) {
echo "The maximum limit for username/first name/last name is 25 characters!";
}
else
{
// check the length of the password is between 5 and 30 characters long
if (strlen($pswd)>30||strlen($pswd)<5) {
echo "Your password must be between 5 and 30 characters long!";
}
else
{
//encrypt password and password 2 using md5 before sending to database
$pswd = md5($pswd);
$pswd2 = md5($pswd2);
$query = mysql_query("INSERT INTO users VALUES ('','$un','$fn','$ln','$em','$pswd','d','0')");
die("<h2>Welcome to Rebel Connect</h2>Login to your account to get started.");
}
}
}
else {
echo "Your passwords don't match!";
}
}
else 
{
echo "Please fill in all fields";
}
}
else
{
echo "Username already taken.";
}
}
else {
echo "Your e-mails don't match!";
}
}
?>
<?
//Login Script
if (isset($_POST["user_login"]) && isset($_POST["user_password"])) {
    $user_login = preg_replace('#[^A-Za-z0-9]#i', '', $_POST["user_login"]); // filter everything but numbers and letters
    $password_login = preg_replace('#[^A-Za-z0-9]#i', '', $_POST["password_login"]); // filter everything but numbers and letters
    $sql = mysql_query("SELECT id FROM users WHERE username='$user_login' AND password='$password_login' LIMIT 1"); // query the person
    //Check for their existance
    $userCount = mysql_num_rows($sql); //Count the number of rows returned
    if ($userCount == 1) {
        while($row = mysql_fetch_array($sql)){
            $id = $row["id"];
    }
         $_SESSION["id"] = $id;
         $_SESSION["user_login"] = $user_login;
         $_Session["password_login"] = $password_login;
         header("location: index.php");
         exit();
         } else {
         echo 'That information is incorrect, try again';
         exit();
    }
}
?>
<table class="homepageTable">
        <tr>
            <td width="60%" valign="top">
             <h2>Already a member? Login below.</h2>
             <form>
                <input type="text" size="25" name="user_login" id="user_login" placeholder="username" />
                <input type="password" size="25" name="user_password" id="user_password" placeholder="password" /><br />
                <input type="submit" name="button" id="button" value="Login to your account!">
             </form>
            </td>
            <td width="40%" valign="top">
             <h2>Sign up below...</h2>
            <form action="#" method="post">
            <input type="text" size="25" name="fname" placeholder="First Name" value="<? echo $fn; ?>">
            <input type="text" size="25" name="lname" placeholder="Last Name" value="<? echo $ln; ?>">
            <input type="text" size="25" name="username" placeholder="Username" value="<? echo $un; ?>">
            <input type="text" size="25" name="email" placeholder="Email" value="<? echo $em; ?>">
            <input type="text" size="25" name="email2" placeholder="Re-enter Email" value="<? echo $em2; ?>">
            <input type="password" size="25" name="password" placeholder="Password" value="<? echo $pswd; ?>">
            <input type="password" size="25" name="password2" placeholder="Re-enter Password" value="<? echo $pswd2; ?>"><br />
            <input type="submit" name="reg" value="Sign Up!">
            </form>
            </td>
        </tr>
</table>
</body>
</html> 
```

header.inc.php

```
<?
include ("inc/scripts/mysql_connect.inc.php");
// starts the session
session_start();
// checks whether the user is logged in or not
$user = $_SESSION["user_login"];
if (!isset($_SESSION["user_login"])) {
    header("location: index.php");
    exit();
}
else
{
header("location: home.php");
exit();
}
?>
<html>
<head>
<link href="css/main.css" rel="stylesheet" type="text/css">
<title>Rebel Reach - PHS Student Social Network</title>
</head>
<body>
<div class="headerMenu">
      <div id="wrapper">
            <div class="logo">
                  <img src="img/find_friends_logo.png">
            </div>
            <div class="search_box">
                  <form method="get" action="search.php" id="search">
                  <input name="q" type="text" size="60" placeholder="Search..." />
                  </form>
            </div>
            <div id="menu">
                  <a href="#">Home</a>
                  <a href="#">About</a>
                  <a href="#">Sign Up</a>
                  <a href="#">Login</a>
            </div>
      </div>
</div>
<br />
<br />
<br />
<br /> 
```

主页.php

```
<?
session_start();
$user = $_SESSION["user_login"];
//If the user is not logged in
if (!isset($_SESSION["user_login"])) {
    header('location: index.php');
    exit();
}
else
{
//If the user is logged in
echo "Hi, $user, You're logged in<br />Welcome to what is soon to be your NEWSFEED";
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T18:51:52.000

您的代码中有一个 catch-22：

index.php 包含您的函数库
，该函数库会检查该会话变量是否存在。
如果变量不存在，重定向到 index.php

例如，您编写了一个非常复杂的经典 BASIC 版本`10 GOTO 10`。

# php - 处理多个同时请求时如何稳定 PHP 响应时间？

> ID：14881922
> 
> 赞同：3
> 
> 时间：2013-02-14T18:49:42.000
> 
> 标签：php, performance, apache, optimization

我正在构建一个 PHP 应用程序，它的 API 能够非常快速（在 100 毫秒内）响应所有请求，并且必须能够每秒处理多达 200 个查询（请求是 JSON 格式，响应需要数据库查找+每次都保存）。对于单个请求，我的代码运行速度足够快（非常一致地大约 30 毫秒），但是一旦它必须每秒响应多个请求，响应时间就会开始到处跳跃。

我不认为这是内存问题（PHP 的内存限制设置为 128MB，代码的内存使用量仅为 3.5MB 左右）或 MySQL 问题（任何 DB 请求*之前*的代码与与之交互的位一样可能成为瓶颈）数据库）。

因为时间非常重要，所以我需要让响应时间尽可能一致。所以我的问题是：在处理多个同时请求时，我可以做任何简单的调整（对 php.ini 或 Apache）来稳定 PHP 的响应时间吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:39:14.730

在我在服务器方面的经验中，就瓶颈而言，最慢的事情之一（最容易修复）就是您的文件系统和硬盘驱动器。我认为加快这一进程将有助于所有其他领域。因此，您可以升级 httpdocs 和数据库所在的硬盘驱动器。例如，您可以将其放在 SSD 驱动器上。或者甚至制作一个 RAM 磁盘并将所有文件放在上面。

或者，您可以[设置数据库](http://dev.mysql.com/doc/refman/5.5/en//memory-storage-engine.html)，使其脱离内存存储引擎运行。[（这里](https://dba.stackexchange.com/questions/1811/what-are-reasons-not-to-use-the-memory-storage-engine-in-mysql)也有相关信息）

当然，你需要大量的物理内存。同样重要的是要注意，如果您获得的网络/应用程序托管是共享的，那么您将在共享内存方面遇到问题。

[调优Mysql](http://www.mysqlperformanceblog.com/2006/09/29/what-to-tune-in-mysql-server-after-installation/)

[调整 Apache](http://httpd.apache.org/docs/2.2/misc/perf-tuning.html)

[性能调优 PHP](http://phplens.com/lens/php-book/optimizing-debugging-php.php)

启用Zend [Optimizer](http://www.zend.com/en/products/guard/downloads)，或查看[APC](http://php.net/manual/en/book.apc.php)或[eAccelerator](http://eaccelerator.net/)

以下是IBM提供的一些基本 LAMP[调优](http://www.ibm.com/developerworks/linux/library/l-tune-lamp-1/) [技巧](http://www.ibm.com/developerworks/library/l-tune-lamp-2/)

这是[一个幻灯片分享](http://www.slideshare.net/jignesht/performance-tuning-in-php-presentation)，也有一些很好的建议

# matlab - MATLAB：在 for 循环中使用 fmincon

> ID：14881923
> 
> 赞同：0
> 
> 时间：2013-02-14T18:49:57.383
> 
> 标签：matlab

我是编程新手。我有大约 100 个数据集，每个数据集有 2 列。我想将 col1 数据拟合为 col2 数据的幂函数，即

```
variable(col1) = parameter1 x (variable(col2))^ parameter2

(say a (x^b)). 
```

现在我想使用优化函数 fmincon 并获取两个参数的值。我想对所有 100 个数据集重复此操作，因此想将此 fmincon 包含在一个 for 循环中，在该循环中我一次调用每个数据集的数据。我已尽力而为，但我无法做到这一点。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T19:43:12.733

让我们调用第一列数据集`k` `Xk`和第二个`Yk`（大小`m x 1`）。如果我正确理解您的问题，那么对于每个数据集`k`{ `Xk`, `Yk`} 您正在寻找两个*标量* `ak`，`bk`这样

`Yk == ak * Xk.^bk`对于所有元素`1..m`

由于方程/约束多于参数（`m`只有两个参数的方程），我们寻求最小二乘解。

从`log`等式两边取

```
log Yk == log ak + bk * log Xk 
```

定义新变量`YYk <- log(Yk)`，`XXk <- log(Xk)`我们有一个**线性**方程`log ak`和`bk`- 这[可以在](http://www.mathworks.com/help/matlab/ref/mldivide.html)没有`fmincon`或其他优化工具的情况下轻松解决。
实际上，如果我们将列向量附加到`XXk`另一列全为 1（即`XXk(:,2)=1`），我们可以将系统编写为矩阵形式

```
XXk * [ b ; log(ak)] == YYk 
```

现在对于一些 Matlab 代码：

```
N = 100; % number of data sets
a = zeros( 1, N ); % pre allocate room for all ak
b = zeros( 1, N ); % pre allocate room for all bk
for k = 1 : N
   % get the data here: Xk = ???, Yk = ???
   XXk = log( Xk );
   XXk(:,2) = 1; % add all ones column
   YYk = log( Yk );
   tmp = XXk \ YYk
   a(k) = exp( tmp(2) );
   b(k) = tmp( 1 );
end 
```

# jqgrid - custom_func 的附加参数？

> ID：14881931
> 
> 赞同：3
> 
> 时间：2013-02-14T18:50:15.667
> 
> 标签：jqgrid

我想为 custom_func 重用以下代码：

```
function validLen(value,colName){
    if(value.length === 8){
        return [true,""];
    }
    else{
        return [false,"fail"];
    }
} 
```

我尝试给它一个额外的参数，如下所示：

```
function validLen(value,colName,length){
    if(value.length === length){
        return [true,""];
    }
    else{
        return [false,"fail"];
    }
} 
```

并这样称呼它：

```
{name:'cntrct_id', editrules:{custom: true, custom_func:validLen(8)} }, 
```

没用。前面的代码确实有效，但如前所述，我想要一个可重用的函数。有解决方法吗？我做错了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T08:50:59.017

我建议你使用

```
editoptions: { maxlength: 8} 
```

而不是您使用的自定义验证。在这种情况下，输入元素将直接使用[maxlength](http://www.w3schools.com/tags/att_input_maxlength.asp)属性创建。因此，用户将无法键入更多作为指定的字符`maxlength`。

**更新**：您不能更改任何回调函数的接口，但您可以`custom_func`通过以下方式共享不同的通用代码。您定义具有三个参数的自定义验证函数，例如

```
function validLen (value, colName, valueLength) {
    if (value.length === valueLength) {
        return [true, ""];
    }
    else {
        return [false, "fail"];
    }
} 
```

并以下列方式使用它

```
{
    name: 'cntrct_id',
    editrules: {
        custom: true,
        custom_func: function (value, colName) {
            return validLen(value, colName, 8);
        }
} 
```

如果您需要使用`this`inside of`custom_func`那么您可以更改`return validLen(value, colName, 8);`为`return validLen.call(this, value, colName, 8);`.

# jquery - 将文本框中的第一个字母大写

> ID：14881936
> 
> 赞同：1
> 
> 时间：2013-02-14T18:50:21.783
> 
> 标签：jquery, textbox, capitalize

我正在使用以下代码将输入到文本框中的第一个字母大写。起初这工作正常，但如果整个框被删除，再次输入后它不会再次大写。

这可以解决吗？

```
$(function () {
    $('.userBox').one('DOMAttrModified textInput input keypress paste focus', 
          function (e) {
             $(this).val($(this).val().slice(0, 1).toUpperCase() + 
                    $(this).val().slice(1));
          });
}); 
```

jsfiddle：http: [//jsfiddle.net/VBXbz/](http://jsfiddle.net/VBXbz/)

更新 jsfiddle：http: [//jsfiddle.net/VBXbz/8/](http://jsfiddle.net/VBXbz/8/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T18:52:39.953

你想要[的](http://api.jquery.com/on/)，不是[一个](http://api.jquery.com/one/)：

```
$(function () {
    $('.userBox').on('DOMAttrModified textInput input keypress paste focus', function (e) {
        $(this).val($(this).val().slice(0, 1).toUpperCase() + $(this).val().slice(1));
    });
}); 
```

`one`适用于您希望*最多*执行一次的处理程序

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T18:53:33.537

`.one`使事件在页面使用中只发生一次`.on`：

```
$('.userBox').on('DOMAttrModified .... 
```

## 更新：

你可以尝试这样的事情：

```
$(function () {
  $('.userBox').on('DOMAttrModified  keypress',function (e) {
      $(this).val($(this).val().slice(0, 1).toUpperCase() + $(this).val().slice(1));
  }).on('focus',function () {
      $(this).val('');
  });
}); 
```

# c# - 替换后Word页脚文本不更新

> ID：14881937
> 
> 赞同：0
> 
> 时间：2013-02-14T18:50:21.590
> 
> 标签：c#, replace, ms-word, vsto, footer

我正在尝试替换页脚中的部分文本。我正在使用 Range.Find 查找文本并替换它。在调试过程中，我设置了一些断点，以便在更改前后检查页脚的 Range.Text。它似乎在做它的工作。当我在 Locals 窗口中检查 Rang.Text 时，文本会按照我希望的方式更改。问题是它不更新文档。

当我第二次尝试时， Range.Text 仍然有我所做的更改，但它不会更新文档。

我已经尝试对文档的主体执行此操作，并且效果很好。我不确定我在这里缺少什么。

我正在对一些保存的文档进行尝试。我确实必须取消保护页脚，以便在我尝试查找和替换文本时不会给我一个例外。

有人知道我是否缺少某种安全措施吗？

这是我的代码：

```
Word.Range docRange = currentDoc.Sections[1].Footers[Word.WdHeaderFooterIndex.wdHeaderFooterPrimary].Range;
docRange.Find.ClearFormatting();
docRange.Find.Text = find;
docRange.Find.Replacement.ClearFormatting();
docRange.Find.Replacement.Text = replace;

object replaceAll = Word.WdReplace.WdReplaceAll;
docRange.Find.Execute(Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing,
                      Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, 
                      ref replaceAll, Type.Missing, Type.Missing, Type.Missing, Type.Missing); 
```

如果您需要更多代码，请告诉我。

编辑：我尝试将页脚移动到一个新文档，保存它，然后用调试器打开新文档，它似乎与新文档一起工作正常。但是仍然不适用于原始文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T21:32:37.130

我能够解决我的问题。我不太确定实际问题是什么，但我的猜测是页脚的格式非常奇怪。所以我决定更改代码以遍历页脚部分中的每个页脚，这似乎解决了我的问题。

这是我为其他人更改的代码，希望对您有所帮助：

```
foreach (Word.Section wordSection in currentDoc.Sections)
{
    foreach (Word.HeaderFooter wordFooter in wordSection.Footers)
    {
        Word.Range docRange = wordFooter.Range; 

        docRange.Find.ClearFormatting();
        docRange.Find.Text = find;
        docRange.Find.Replacement.ClearFormatting();
        docRange.Find.Replacement.Text = replace;

        object replaceAll = Word.WdReplace.wdReplaceAll;
        docRange.Find.Execute(Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing,
                  Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, 
                  ref replaceAll, Type.Missing, Type.Missing, Type.Missing, Type.Missing);
    }
} 
```

如果有人能暗示为什么有必要做这些循环，那会很有帮助。

# python - 基于公共前缀的 Groupby 文件

> ID：14881939
> 
> 赞同：4
> 
> 时间：2013-02-14T18:50:24.977
> 
> 标签：python, python-2.7, group-by

考虑以下一组文件列表

```
/wr_vjxeacn/lzx/vjx/rkkelkwrvkjl.o
/wr_vjxeacn/lzx/vjx/wllnxncvr.o
/wr_hvlx/lzx/hvlx/wlxkjjlnr/Sbisln.xww
/wr_hvlx/lzx/wllqepse/lzx/xww/ANTLR/evi
/wr_hvlx/lzx/wllqepse/lzx/xww/ANTLR/zajrvhn/sjrez3x.cee
/wr_hvlx/lzx/wllqepse/lzx/xww/ivj/GNUhstnmven
/wr_hvlx/eklr+mkajc/sjrez3x64.evi.7ss153m930724031i252iic841n68i6i
/wr_hvlx/lzx/wllqepse/lzx/xww/ANTLR/evi/sjrez3x.evi
/wnkwenrkkel/lzx
/wnkwenrkkel/lzx/GNUhstnmven.xkhhkj
/wnkwenrkkel/lzx/GNUhstnmven.cnwl
/wnkwenrkkel/lzx/GNUhstnmven.evlr
/wnkwenrkkel/lzx/GNUhstnmven.gvjckgl-vs32 
```

我试图弄清楚的是用公共前缀 dirname 对项目进行分组的最佳方式

```
common prefix dirname = os.path.dirname(os.path.commonprefix(...)) 
```

所以理想情况下，在分组之后，上面应该看起来像

```
/wr_vjxeacn/lzx/vjx
/wr_vjxeacn/lzx/vjx/rkkelkwrvkjl.o
/wr_vjxeacn/lzx/vjx/wllnxncvr.o
*************************************************************
/wr_hvlx/lzx/hvlx
/wr_hvlx/lzx/hvlx/wlxkjjlnr/Sbisln.xww
*************************************************************
/wr_hvlx/lzx/wllqepse
/wr_hvlx/lzx/wllqepse/lzx/xww/ANTLR/evi
/wr_hvlx/lzx/wllqepse/lzx/xww/ANTLR/zajrvhn/sjrez3x.cee
/wr_hvlx/lzx/wllqepse/lzx/xww/ivj/GNUhstnmven
*************************************************************
/wr_hvlx/eklr+mkajc
/wr_hvlx/eklr+mkajc/sjrez3x64.evi.7ss153m930724031i252iic841n68i6i
*************************************************************
/wr_hvlx/lzx/wllqepse/lzx/xww/ANTLR/evi
/wr_hvlx/lzx/wllqepse/lzx/xww/ANTLR/evi/sjrez3x.evi
*************************************************************
/wnkwenrkkel
/wnkwenrkkel/lzx
*************************************************************
/wnkwenrkkel/lzx
/wnkwenrkkel/lzx/GNUhstnmven.xkhhkj
/wnkwenrkkel/lzx/GNUhstnmven.cnwl
/wnkwenrkkel/lzx/GNUhstnmven.evlr
/wnkwenrkkel/lzx/GNUhstnmven.gvjckgl-vs32 
```

**我试过的**

1.  `itertools.groupby`，但它没有前瞻或后瞻。
2.  迭代和中断前缀更改。找不到考虑所有边缘情况的可行解决方案

**动机**

我有一个签入文件的列表，我想根据模块对这些文件进行分组，以识别相应的模块所有者。

# python - 从 NLTK 中递归提取一个新词的同义词

> ID：14881943
> 
> 赞同：0
> 
> 时间：2013-02-14T18:50:37.197
> 
> 标签：python, module, nltk

假设我有两个小字典

posList=['有趣','小说','创意','state-of-the-art']

negList=['过时'，'直截了当'，'琐碎']

我有一个新词，说“创新”，这是我所不知道的，我试图通过 NLTK 函数找出它的同义词来找出它的情绪，如果同义词从我的小词典中消失，那么我递归地调用 NLTK查找上次同义词的同义词的功能

开始输入可能是这样的：

从 nltk.corpus 导入 wordnet 创新 = wordnet.synsets('innovative')

对于创新的同义词集：

```
print synset

print synset.lemmas 
```

它产生这样的输出

Synset('advanced.s.03') [引理('advanced.s.03.advanced'), 引理('advanced.s.03.forward-looking'), 引理('advanced.s.03.innovative' ), 引理('advanced.s.03.modern')] Synset('innovative.s.02') [引理('innovative.s.02.innovative'), 引理('innovative.s.02.innovational' ), 引理('innovative.s.02.grounddriving')]

显然，新词包括“先进”、“前瞻性”、“现代”、“创新”、“开创性”是新词，不在我的字典里，所以现在我应该用这些词作为开始再次调用同义词函数，直到没有新的引理词出现。任何人都可以给我一个演示代码，如何从 Synset 中提取这些引理词并将它们保存在一个集合中？

我认为它涉及处理 Python 中的 re 模块，但我对 Python 还是很陌生。我需要解决的另一点是我只需要形容词，所以引理中只有's'和'a'符号（'advanced.s.03.modern'），而不是'v'（动词）或'n '（名词）。

稍后我会尝试计算一个新单词与任何字典单词的相似度分数，我需要定义度量。这个问题很困难，因为根据我的知识，形容词不是按层次结构排列的，也没有可用的度量。任何人都可以建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:50:38.890

你可以得到同义词的同义词如下。（请注意，代码使用[NodeBox Linguistics](http://nodebox.net/code/index.php/Linguistics)库的 WordNet 函数，因为它提供了对 WordNet 的更轻松访问）。

```
def get_remote_synonyms(s, pos):

    if pos == 'a':
        syns = en.adjective.senses(s)
        if syns:
            allsyns = sum(syns, [])
            # if there are multiple senses, take only the most frequent two 
            if len(syns) >= 2:
                syns = syns[0] + syns[1]
            else:
                syns = syns[0]
        else:
            return [] 

        remote = []
        for syn in syns: 
            newsyns = en.adjective.senses(syn)
            remote.extend([r for r in newsyns[0] if r not in allsyns])

    return [unicode(i) for i in list(set(remote))] 
```

据我所知，NLTK 的所有语义测量功能都是基于上位词/下位词层次结构的，因此它们不能应用于形容词。此外，如果您将其结果与诸如[thesaurus.com 之类的同义词库的结果进行比较，我发现 WordNet 中缺少很多同义词。](http://thesaurus.com/)

# c++ - typeid() 面向对象的设计替代方案

> ID：14881945
> 
> 赞同：5
> 
> 时间：2013-02-14T18:51:00.660
> 
> 标签：c++, oop, collections, typeid

我有以下类使用 3 个不同的映射：键始终是字符串，而值可能是字符串、整数或浮点数。

```
class MyMaps
{

public:

    template<typename T> void addKey(const std::string& key);
    void addValue(const std::string& key, const std::string& value);
    void addValue(const std::string& key, int value);
    void addValue(const std::string& key, float value);

private:

    std::map<std::string, std::string> stringFields;            
    std::map<std::string, int> intFields;                       
    std::map<std::string, float> floatFields;                   
}; 
```

这些`addValue()`函数只是将一个新的对添加到相关映射中。我正在处理的是`addKey()`模板功能：

```
/** Add only a key, the related value is a default one and is specified by template parameter T. */

template<typename T>
void MyMaps::addKey(const string& key)
{       
    if (typeid(T) == typeid(string))
    {
        stringFields.insert(pair<string, string>(key, string()));
    }

    else if (typeid(T) == typeid(int))
    {
        intFields.insert(pair<string, int>(key, int()));;
    }

    else if (typeid(T) == typeid(float))
    {
        floatFields.insert(pair<string, float>(key, float()));
    }
} 
```

基本上，我使用`template`and`typeid()`因为我不喜欢这种依赖于*type-within-function-name 的*替代方案：

```
void MyMaps::addStringKey(const string& key) 
{
    stringFields.insert(pair<string, string>(key, string()));
}

void MyMaps::addIntKey(const string& key) 
{
    intFields.insert(pair<string, int>(key, int()));
}

void MyMaps::addFloatKey(const string& key) 
{
    floatFields.insert(pair<string, float>(key, float()));
} 
```

第一个`addKey()`版本*似乎*工作，但我想知道是否有更优雅的解决方案。也许我错过了一些在这种情况下可能有用的面向对象的设计概念？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T18:59:03.920

这非常适合模板专业化：

```
template<>
void MyMaps::addKey<string>(const string& key)
{       
    stringFields.insert(pair<string, string>(key, string()));
}

template<>
void MyMaps::addKey<int>(const int& key)
{   
    intFields.insert(pair<string, int>(key, int()));;
}

template<>
void MyMaps::addKey<float>(const float& key)
{   
    floatFields.insert(pair<string, float>(key, float()));
} 
```

编辑：有关模板专业化的语法/更多信息，请阅读：[模板专业化和部分模板专业化](http://www.cprogramming.com/tutorial/template_specialization.html)

或者更好的是，如果 boost 是一个选项，并且所有 3 个映射的键都是唯一的，并且您有 3 个不同的映射只是为了能够存储它们，那么考虑使用`boost::variant`：

```
typedef boost::variant<string, int, float> ValueType;

class MyMap
{

public:
    typedef std::map<std::string, ValueType> MapType;
    template<typename T> void addKey(const std::string& key, T &val)
    {
        ValueType varVal= val;
        allFields.insert(MapType::value_type(key, varVal));
    }

private:

    MapType allFields;                              
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-16T16:59:13.663

您的问题询问了两件事：

1.  真正的问题是，在同一个集合中为值使用不同类型的键值映射或字典。

2.  并且，一个潜在的解决方案是应用“typeid”函数。

关于“typeid”的更多参考：

[http://en.cppreference.com/w/cpp/language/typeid](http://en.cppreference.com/w/cpp/language/typeid)

面向对象（和类）方向很棒，但有时您可能希望将其与其他范式混合使用。

“指针”呢？

指针允许不同的类型被视为相同的简单类型。

键值字典集合呢，它存储一个字符串键和一个指针值，指针可以是整数、字符串或对象。

或者更具体一点。“Value”可能是一个元组，其中第一个字段（可能是枚举类型）表示值的真实类型。而且，“值”的第二个字段是指向实际字段的指针或变体。

使用“Unions”（又名“variants”）的第一个建议，没有指针：

```
#include <string>
#include <typeinfo>

union ValueUnion
{
   int AsInt,
   float AsFloat,
   std::string& AsStr
};

struct ValueType
{
  std::type_info Id,
  ValueUnion Value 
};

class MyMaps
{
public:
    template<typename T> void addKey(const std::string& key);
    void addValue(const std::string& key, const std::string& value);
    void addValue(const std::string& key, int value);
    void addValue(const std::string& key, float value);
private:

    std::map<std::string, ValueType> Fields;    
}; 
```

或者，使用指针：

```
#include <string>
#include <typeinfo>

struct ValueType
{
  std::type_info Id,
  void* Value 
};

class MyMaps
{
public:
    template<typename T> void addKey(const std::string& key);
    void addValue(const std::string& key, const std::string& value);
    void addValue(const std::string& key, int value);
    void addValue(const std::string& key, float value);
private:
    std::map<std::string, ValueType> Fields;
}; 
```

这种“模式”我见过几次，我称之为“Key-Value-Type”集合。

注意：没有多少 STL 经验，你确定“std::map”是正确的集合吗？

只是我的2美分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T19:10:28.257

可能不是您想要的，因为它是一种不同的方法，但您可以使用变体地图。你可以定义一个[boost::variant](http://www.boost.org/doc/libs/1_53_0/doc/html/variant.html)来只保存字符串、整数或浮点数。

eladidan 打败了我，我不知道如何删除答案。

# ruby-on-rails - 编写 Gem -- 如何管理配置设置？

> ID：14881949
> 
> 赞同：0
> 
> 时间：2013-02-14T18:51:15.407
> 
> 标签：ruby-on-rails, rubygems

我是宝石写作世界的新手，我正在努力确保我的宝石尽可能灵活，可以开箱即用。我有几个配置选项需要为测试之类的事情设置，但我希望这些选项能够在 Ruby on Rails 级别被覆盖。

我知道像 Devise 这样的某些 gem 已经这样做了，但我不确定它应该如何完成（主要是从“把这些文件放在这里，把这些文件放在那里”的角度来看）。谁能给我任何提示或建议？

编辑：我真正想知道的是这些gem如何管理在gem本地定义的配置设置并在Rails中定义它们，并为优先的Rails应用程序定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T20:11:49.697

有一些 gem 可以帮助您创建 rails 初始化程序样式配置。

一个例子是[https://github.com/phoet/confiture/](https://github.com/phoet/confiture/)

# c - C中的数组问题

> ID：14881950
> 
> 赞同：-3
> 
> 时间：2013-02-14T18:51:17.023
> 
> 标签：c, arrays, algorithm

给定一个移位数组（例如）：

```
[17 34 190 1 4] 
```

哪个从（我们不知道原来的）

```
[1 4 17 34 190] 
```

找到该数字的位置的好功能是什么？

例如，如果我通过 1，它将返回第 3 位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T19:03:50.570

线性搜索答案总是有效的，但我相信你可以在 O(log) 时间内到达那里。

通过检查移位排序数组的值是否与假定的值相反，对移位点进行某种二进制搜索。就像创建一个 trie 一样。继续形成排序树，直到找到“非法”节点（伙计，这掩盖了很多细节——我知道）。这告诉您拐点在哪里，您现在将数组视为 2 个排序向量。快速检查要查找的值是否大于每个的最大条目，以便我们知道要搜索的向量。B在排序后的向量中搜索您的值并返回其索引。

困难的部分是找到拐点。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T19:02:49.853

您将不得不扫描阵列。

```
size_t pos_in_arr(int *arr, size_t arr_size, int match)
{
    size_t i;
    for (i = 0; i < arr_size; i++)
        if (arr[i] == match)
            break;
    return i;
} 
```

此函数将返回所要求的位置，或者在未找到元素的情况下返回比最大位置多一个。

解决方案是您所*要求*的，但它可能不是您*需要*的，因为它不会以任何方式使用数组已移动的事实。我怀疑原来的问题更复杂。

例如*，如果*您知道原始数组中的第一个元素是第五个，现在是第七个，而您要查找的元素是二十三，您可以回答“二十五”而无需实际扫描数组直到二十五位置，这可能是整个练习的重点。但要构建这样一个解决方案，需要更多地了解这个问题。

# content-management-system - 如何使用 PyroCMS 2.1.5 将文件上传到 S3 而不是我的硬盘？

> ID：14881956
> 
> 赞同：0
> 
> 时间：2013-02-14T18:51:31.577
> 
> 标签：content-management-system, amazon-s3, pyrocms, pyro

我似乎无法弄清楚如何将文件（图像等）发布到亚马逊 S3。

我希望这是所有媒体上传区域的默认行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T18:56:40.533

Jerel Unruh 整理了一段关于此的视频：

[http://www.youtube.com/watch?v=Te61OzHK400](http://www.youtube.com/watch?v=Te61OzHK400)

实际上，您只需在设置区域中输入您的亚马逊凭证，然后将文件夹与存储桶挂钩。所有图像都将被发送到 S3 并在本地缓存，并且与本地文件的工作方式相同。

# entity-framework - EF Code First: CreateIndex - Covering Index

> ID：14881958
> 
> 赞同：3
> 
> 时间：2013-02-14T18:51:42.820
> 
> 标签：entity-framework, indexing, ef-code-first, entity-framework-migrations, covering-index

Is it possible to use the CreateIndex syntax of EF Code First Migrations to create a Covering Index (*see below for what a Covering Index is).

For example I can create a simple index in a manual migration like so:

```
CreateIndex("RelatedProduct", "RelatedId"); 
```

It has a final argument named "anonymous arguments" that specifies it can handle whatever the underlying provider supports - but it's not clear how I determine what that support would be. Is this possible or do I need to resort to flat SQL?

*A Covering Index is one where the RDB stores duplicated data in the leaf nodes, not just pointers to the main table. It's essentially a duplication of a table reordered by the columns in the index, containing just the columns most used in that type of search.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T19:38:02.803

I think the covering index is non-clustered index which covers the query (so it doesn't require any additional lookups back to the table). What you describe is additional feature of such index which allows you including data which are not part of the index key on the leaf level.

`CreateIndex` doesn't support that now. You must either use `Sql` directly or you can check EF's source code and add support for `INCLUDE` into [`CreateIndex`](http://entityframework.codeplex.com/SourceControl/changeset/view/a5faddeca2be#src/EntityFramework/Migrations/DbMigration.cs) call, [`CreateIndexOperation`](http://entityframework.codeplex.com/SourceControl/changeset/view/a5faddeca2be#src/EntityFramework/Migrations/Model/CreateIndexOperation.cs) and related [`Generate`](http://entityframework.codeplex.com/SourceControl/changeset/view/a5faddeca2be#src/EntityFramework/Migrations/Sql/SqlServerMigrationSqlGenerator.cs) method in SQL Generator.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-11T02:03:10.953

You can't use the CreateIndex call to do this, but you can provide your own alternative from the side without modifying the source of EF. The core of it is emitting raw Sql in your Up() method of a manual migration, like:

```
// Build a string like
//@"create nonclustered index IX_IsPublished_OrderIndex
//on Project (IsPublished desc, OrderIndex asc)
//include [Key]"
var sb = new StringBuilder();
sb.Append("create nonclustered index [")
.Append(Name)
.Append("] on [")
.Append(Table)
.Append("] (")
.Append(String.Join(", ", Columns
    .Select(col => "[" + col.Name + "] " + (col.IsAsc ? "asc" : "desc"))
))
.Append(")");

if (Include != null && Include.Length > 0)
{
    sb.Append(" include (")
    .Append(String.Join(", ", Include.Select(c => "[" + c + "]")))
    .Append(")");
} 
```

# model-view-controller - NServiceBus/MVC 注入 - Autofac 不喜欢 IControllerFactory？

> ID：14881959
> 
> 赞同：0
> 
> 时间：2013-02-14T18:51:45.360
> 
> 标签：model-view-controller, dependency-injection, nservicebus, autofac

全部。由于 Pluralsight 和互联网，我开始使用 NServiceBus 并很好地掌握了基础知识。我有一个股票 MVC 4 项目，我为我的控制器设置了依赖注入（感谢[这篇博文](http://www.make-awesome.com/2011/02/injecting-nservicebus-into-asp-net-mvc-3/)）。

这是我在 Global.asax 中设置总线的方式：

```
_bus = Configure.With()
                .DefaultBuilder()
                .ForMVC()
                .Log4Net()
                .XmlSerializer()
                .MsmqTransport()
                .UnicastBus()
                .SendOnly(); 
```

我将它分配给一个本地私有变量，因为我需要访问 Global 中的总线，所以我可以在 Session_End 上做一些事情。但是，当我运行时，我收到以下错误：

> 请求的服务“System.Web.Mvc.IControllerFactory”尚未注册。要避免此异常，请注册一个组件以提供服务，使用 IsRegistered() 检查服务注册，或使用 ResolveOptional() 方法解决可选依赖项。

根据我的堆栈跟踪，故障点是 Autofac 尝试解析类型时。为了理智起见，我删除了私有变量，只使用了 Configure 语句，同样的事情。我还在这个应用程序中连接了 Ninject，因为这是我选择的 IoC。认为它以某种方式干扰了 Autofac，我从等式中删除了 Ninject，但仍然无法正常工作。

所以我的问题是，我做错了什么？我错过了什么吗？这是我第一次使用 NServiceBus，但从我所看到的一切来看，这应该可以正常工作。任何信息都会非常有帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T00:00:46.647

看看我们的 MVC4 示例（这是针对 v4 运行的，下一个主要版本）：
[https ://github.com/NServiceBus/NServiceBus/tree/develop/Samples/Messaging.Msmq/MyWebClient](https://github.com/NServiceBus/NServiceBus/tree/develop/Samples/Messaging.Msmq/MyWebClient)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T17:18:07.663

我从你的代码中找到了解决方案，约翰！这是我的问题。这就是我在依赖解析器适配器中的内容：

```
public object GetService(Type serviceType)
{
    _builder.Build(serviceType);
} 
```

我需要做的是您在 MVC4 示例中所做的：

```
public object GetService(Type serviceType)
{
    return (Configure.Instance.Configurer.HasComponent(serviceType)) ? _builder.Build(serviceType) : null;
} 
```

一旦我这样做了，一切都会自行解决。再次感谢您的帮助！

# java - 拆分字符串时的奇怪行为

> ID：14881961
> 
> 赞同：0
> 
> 时间：2013-02-14T18:51:53.387
> 
> 标签：java

我正在尝试使用分隔符拆分字符串，当我从字符串数组中的不同单元格中获取值时，我得到了一些奇怪的结果。例子：

```
dataString = (String) hashMap.get("LCSSAMPLEREQUEST_sampleRequestString");

System.out.println(dataString);

String dataStringSplit[] = dataString.split("quantity|&^&|");

String tempString = dataStringSplit[0]; 
```

这是 dataString 中第一个分隔符之前的行：

```
"sortingNumber|&^&|1|-()-|ID|&^&|1|-()-|DROPPED|&^&|false|-()-|" 
```

现在，当我执行 a `System.out`of 时`'tempString'`，我得到一个没有值的字符串。

如果我这样做`tempString = dataStringSplit[1]`，那么我会得到`'sor'`.

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T18:53:03.147

`"quantity|&^&|"`应该是`"quantity\\|&\\^&\\|"`。`|`并且`^`是正则表达式中的元字符。为了将其视为普通字符，您应该使用反斜杠对其进行转义

# python - 验证树是否是 bst Python

> ID：14881963
> 
> 赞同：6
> 
> 时间：2013-02-14T18:51:58.877
> 
> 标签：python, binary-search-tree

我有一个练习面试问题，它告诉我验证一棵树是否是平衡搜索树并给出验证方法......我的课程是

```
Class Node:
def __init__(self, k, val):
    self.key = k
    self.value = val
    self.left = None
    self.right = None 
```

以及树最大值和最小值的其他函数定义为

```
def tree_max(node):
    maxleft  = float('-inf') if not node.left  else tree_max(node.left)
    maxright = float('-inf') if not node.right else tree_max(node.right)
    return max(node.value, maxleft, maxright)

def tree_min(node):
    minleft  = float('-inf') if not node.right else tree_min(node.left)
    minright = float('-inf') if not node.left else tree_min(node.right)
    return min(node.value, minleft, minright) 
```

我的验证方法为

```
def verify(node):
    if tree_max(node.left) <= node.value and node.value <= tree_min(node.right):
       if verify(node.left) and verify(node.right):
           return True
       else:
           return False
    else:
        return False 
```

当我尝试实现验证方法时会出现我的问题，即使我尝试制作 BST 树，我似乎总是会出错。我的实现如下：

```
root= Node(10, "Hello")
root.left = Node(15, "Fifteen")
root.right= Node(30, "Thirty")

print verify(root)

root = Node(10, "Ten")
root.right = Node(20, "Twenty")
root.left = Node(5, "Five")
root.left.right = Node(15, "Fifteen")

print verify(root) 
```

两者都给我错误...我的验证功能或最小/最大功能是否有问题...任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-14T21:54:59.777

我在您的代码中看到四个错误。

1.  首先，您对 null 孩子的检查是向后的`tree_min`。也就是说，您`node.right`在访问之前检查是否存在`node.left`，反之亦然。

2.  其次，`tree.min`在叶节点上调用时返回负无穷大。您需要在最小计算中使用正无穷大（负无穷大在最大版本中是正确的）。

3.  第三，您在 中存在逻辑错误`verify`，因为它在其子节点上无条件调用`tree_min`or`tree_max`和自身，即使其中一个或两个是`None`. 我建议让所有函数处理被传递`None`，而不是依赖调用者来做正确的事情。这也稍微简化了`min`代码！`max`

4.  最后，您正在对 进行比较`node.value`，这是您为每个节点提供的字符串。我怀疑你想比较 using `node.key`。将浮点数 (like `float("-inf")`) 与字符串 (like `"ten"`) 进行比较在 Python 3 中是一个错误，即使在合法的 Python 2 中，它也可能不会像您期望的那样工作。

解决了这些问题后，当我创建有效和无效的树时，我会得到预期的结果。你的两个例子都是无效的，所以如果你用它们来测试，你总是会得到一个`False`结果。

最后，一些小的风格问题（不是错误，但仍然可以改进）。Python 支持链式比较，因此您可以将第一`if`条语句简化`verify`为`tree_max(node.left) <= node.key <= tree_min(node.right)`. `and`您可以通过连接检查而不是嵌套附加`if`语句来进一步简化该部分代码。

这是适用于我的代码版本（使用 Python 3，尽管我认为它都向后兼容 Python 2）：

```
class Node:
    def __init__(self, k, val):
        self.key = k
        self.value = val
        self.left = None
        self.right = None

def tree_max(node):
    if not node:
        return float("-inf")
    maxleft  = tree_max(node.left)
    maxright = tree_max(node.right)
    return max(node.key, maxleft, maxright)

def tree_min(node):
    if not node:
        return float("inf")
    minleft  = tree_min(node.left)
    minright = tree_min(node.right)
    return min(node.key, minleft, minright)

def verify(node):
    if not node:
        return True
    if (tree_max(node.left) <= node.key <= tree_min(node.right) and
        verify(node.left) and verify(node.right)):
        return True
    else:
        return False

root= Node(10, "Hello")
root.left = Node(5, "Five")
root.right= Node(30, "Thirty")

print(verify(root)) # prints True, since this tree is valid

root = Node(10, "Ten")
root.right = Node(20, "Twenty")
root.left = Node(5, "Five")
root.left.right = Node(15, "Fifteen")

print(verify(root)) # prints False, since 15 is to the left of 10 
```

# python - django：模板中字符串的神秘填充

> ID：14881969
> 
> 赞同：1
> 
> 时间：2013-02-14T18:52:17.537
> 
> 标签：python, django, django-templates

我正在使用以下模板代码尝试生成格式为“a、b、c 和 d”的列表：

```
{% for item in list %}
  {% if not forloop.first %}
    {% if not forloop.last %}
      ,
    {% endif %}
  {% endif %}
  {% if forloop.last %}
    and
  {% endif %}
  {{ item }}
{% endfor %} 
```

我得到的实际输出是 'a 、 b 、 c 和 d' （注意逗号前的空格）。

发生了什么事，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T19:07:03.623

好的，经过几次尝试，我想我找到了一个解决方案，它有点冗长，但它可以满足您的需求 - 没有额外的空格 -

```
{% for item in list %}
    {% if forloop.revcounter > 2 %}
        {{ item }},
    {% else %}
         {% if forloop.revcounter == 2 %}
              {{ item }} and
         {% else %}
              {{ item }}
         {% endif %}
    {% endif %}
{% endfor %} 
```

`forloop.revcounter`正在从循环的末尾倒计时，因此您将“和”添加到倒数第二个项目中，而最后一项则没有任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T19:17:30.630

Django 插入模板包含的所有空格：

```
{% for item in list %}{% if not forloop.first %}{% if not forloop.last %}, {% endif %}{% endif %}{% if forloop.last %} and {% endif %}{{ item }}{% endfor %} 
```

* * *

顺便说一句，如果列表仅包含一个值，您的模板会呈现错误的输出。更正后的模板如下所示：

```
{% for item in list %}
    {% if not forloop.first %}
        {% if forloop.last %}
            and
        {% else %}
            ,
        {% endif %}
    {% endif %}
    {{ item }}
{% endfor %} 
```

如果没有多余的空间，它会变成：

```
{% for item in list %}{% if not forloop.first %}{% if forloop.last %} and {% else %}, {% endif %}{% endif %}{{ item }}{% endfor %} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T19:43:39.873

我会做一个简单的[模板过滤器](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#writing-custom-template-filters)：

```
@register.filter
def format_list(li):
    """
    Return the list as a string in human readable format.

    >>> format_list([''])
    ''
    >>> format_list(['a'])
    'a'
    >>> format_list(['a', 'b'])
    'a and b'
    >>> format_list(['a', 'b', 'c'])
    'a, b and c'
    >>> format_list(['a', 'b', 'c', 'd'])
    'a, b, c and d'
    """
    if not li:
        return ''
    elif len(li) == 1:
        return li[0]
    return '%s and %s' % (', '.join(li[:-1]), li[-1]) 
```

我远非 python 专家，可能有更好的方法来做到这一点。但是，这在“django 级别”似乎很干净，这样使用它：

```
{{ your_list|format_list }} 
```

我喜欢这个解决方案的地方在于它是可重用的，更具可读性，代码更少，并且有测试。

查看有关[编写模板过滤器](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#writing-custom-template-filters)的文档以获取有关如何安装它的详细信息。

此外，您可能会注意到此功能附带 doctests，请参阅[django 文档](https://docs.djangoproject.com/en/dev/topics/testing/?from=olddocs)以了解如何运行测试。

这里有一个方法：

```
>>> python -m doctest form.py -v
Trying:
    format_list([''])
Expecting:
    ''
ok
Trying:
    format_list(['a'])
Expecting:
    'a'
ok
Trying:
    format_list(['a', 'b'])
Expecting:
    'a and b'
ok
Trying:
    format_list(['a', 'b', 'c'])
Expecting:
    'a, b and c'
ok
Trying:
    format_list(['a', 'b', 'c', 'd'])
Expecting:
    'a, b, c and d'
ok
1 items had no tests:
    form
1 items passed all tests:
   5 tests in form.format_list
5 tests in 2 items.
5 passed and 0 failed.
Test passed. 
```

# python - 如何使用循环打印列表中的数据

> ID：14881971
> 
> 赞同：0
> 
> 时间：2013-02-14T18:52:32.547
> 
> 标签：python, list, loops

我想知道如何使用循环（可能是 while 循环 och for）来打印列表中所有对象的数据。**请注意**，数据来自我保存到列表中的文本文件。

如果我们有一个包含对象的列表并且它们包含如下数据：

> 澳大利亚/AU/36/8177/22919
> 奥地利/AT/40/6936/8429
> 
> 阿塞拜疆/AZ/31/2896/9421
> 
> 巴哈马/BS/44/79/351

如何使用某种循环来打印列表中所有对象的数据（来自文本文件）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T18:54:41.990

这是你要求的吗？

```
your_list = [
    'Australia/AU/36/8177/22919',
    'Austria/AT/40/6936/8429',
    'Azerbaijan/AZ/31/2896/9421'
    'Bahamas/BS/44/79/351'
]

for element in your_list:
    print element 
```

啊，我希望现在我能理解你了。你在字符处分割每一行`'/'`，对吧？像这样的东西？

```
your_list = []
with open('your_file.txt') as fobj:
    for line in fobj:
        your_list.append(line.strip().split('/'))

for sublist in your_list:
    print sublist 
```

# events - GWT - setText 和 setValue 在初始加载时不适用于 TextBox

> ID：14881972
> 
> 赞同：0
> 
> 时间：2013-02-14T18:52:34.090
> 
> 标签：events, gwt, textbox

我在页面上有几个文本框，用户可以在其中输入一些数值；但是，尽我所能，我无法用默认值填充这些文本框 - 特别是我希望`0.0`在页面加载时同时显示。

以下是我创建它们的方法以及我尝试过的方法 -

```
GroupSection engineering_group = new GroupSection();
KSTextBox engrDesignTextBox  = new KSTextBox();
engrDesignTextBox.setWidth("2.875em");
//engrDesignTextBox.setWatermarkText("0.0"); ==> this works, but not what I need
//engrDesignTextBox.setText("0.0"); ==> this doesn't work
engrDesignTextBox.setValue("0.0"); // doesn't work either

KSTextBox engrScienceTextBox = new KSTextBox();
engrScienceTextBox.setWidth("2.875em");
//engrScienceTextBox.setWatermarkText("0.0"); ==> this works, but not what I need
//engrScienceTextBox.setText("0.0"); ==> this doesn't work
engrScienceTextBox.setValue("0.0"); // doesn't work either 
```

我在想我需要附加一个“onload”事件侦听器，然后在那里尝试 setText？对于应该相当简单的事情来说，这似乎有点矫枉过正。

顺便说一句，我为这两个文本框附加了 onBlurHandlers，它们按预期工作（见下面的代码）

`0.0`如果用户在文本框为空时单击或跳出文本框，则以下代码将简单地插入。

```
engrDesignTextBox.addBlurHandler(new BlurHandler() {
   @Override
   public void onBlur(BlurEvent blurEvent) {
      if(((KSTextBox)blurEvent.getSource()).getText().length() < 1) {
         ((KSTextBox)blurEvent.getSource()).setText("0.0");
      }
   }
});
engrScienceTextBox.addBlurHandler(new BlurHandler() {
   @Override
   public void onBlur(BlurEvent blurEvent) {
     if(((KSTextBox)blurEvent.getSource()).getText().length() < 1) {
       ((KSTextBox)blurEvent.getSource()).setText("0.0");
     }
   }
}); 
```

**编辑：**这里的要求是我在 KSTextBox 中定义 setText 和 setValue 方法的方式

```
public class KSTextBox extends TextBox implements HasWatermark {
  .
  .
  . 

  @Override
  public void setText(String text) {
    String oldValue = super.getText();
    if(hasWatermark) {
      if(text == null || (text != null && text.isEmpty())){
        super.setText(watermarkText);
        addStyleName("watermark-text");
        watermarkShowing = true;
      }
      else{
        super.setText(text);
        removeStyleName("watermark-text");
        watermarkShowing = false;
      }
    }
    else{
      super.setText(text);
    }
    ValueChangeEvent.fireIfNotEqual(this, oldValue, text);
  }

  @Override
  public void setValue(String value) {
    if(hasWatermark) {
      if(value == null || (value != null && value.isEmpty())){
        super.setValue(watermarkText);
        addStyleName("watermark-text");
        watermarkShowing = true;
      }
      else{
        super.setValue(value);
        removeStyleName("watermark-text");
        watermarkShowing = false;
      }
    }
    else{
      super.setValue(value);
    }
  } 
```

那么，回到最初的问题，我最初如何将这些文本框的值设置为`0.0`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T19:03:58.790

那应该行得通。它非常令人惊讶。
在您执行 setText 或 setValue 后，是否有其他代码正在重置该值？
尝试在托管模式下调试它。在 setText 中放置一个断点，然后查看它被调用的时间和次数

# facebook - 分享按钮：在 FB 上发布时元数据错误

> ID：14881976
> 
> 赞同：0
> 
> 时间：2013-02-14T18:52:39.737
> 
> 标签：facebook, button, share, meta

问题：当有人使用我博客中的“分享”按钮时，它会以这种方式在他们的页面上发布：

西雅图的 [分享者名称] 通过 [错误名称] 分享了一个链接。

“via”后面的名字是六个月前博客上一个曾经是开发人员的人的名字。在我博客上的任何地方，或在我能找到的任何代码中，都没有他的名字。

什么值决定在那里显示的名称？推荐人？描述？我找不到答案，或者在哪里编辑它们。

[通过插件社交共享工具包（ http://www.active-bits.nl/support/social-sharing-toolkit/](http://www.active-bits.nl/support/social-sharing-toolkit/) ）在我的 Wordpress 博客上使用 Facebook 共享按钮已超过一周。

这是插件的代码（注意：它包括“喜欢”和“关注”按钮的选项）：

```
<?php
class MR_Social_Sharing_Toolkit_Facebook extends MR_Social_Sharing_Toolkit_Button {
function __construct() {
    $this->share_buttons[] = array('name' => 'fb_like', 'title' => 'Facebook Like', 'types' => array('none', 'none_text', 'horizontal', 'vertical'));
    $this->share_buttons[] = array('name' => 'fb_share', 'title' => 'Facebook Share', 'types' => array('none', 'horizontal', 'vertical', 'icon_small', 'icon_small_text', 'icon_medium', 'icon_medium_text', 'icon_large'));
    $this->share_buttons[] = array('name' => 'fb_send', 'title' => 'Facebook Send', 'types' => array('none'));
    $this->follow_buttons[] = array('name' => 'follow_facebook', 'title' => 'Facebook', 'id' => 'id:', 'types' => array('icon_small', 'icon_small_text', 'icon_medium', 'icon_medium_text', 'icon_large'));
    $this->title = 'Facebook';
    $this->icon = 'facebook';
}

function fb_like($url, $title, $type, $id, $media = '', $description = '', $text = '', $icon = '') {
    //$retval = '<iframe src="https://www.facebook.com/plugins/like.php?locale='.__('en_US','mr_social_sharing_toolkit').'&amp;href='.urlencode($url).'&amp;layout=';
    $retval = '<div class="fb-like" data-href="'.$url.'" data-send="false" ';
    switch ($type) {
        case 'horizontal':
            //$retval .= 'button_count';
            if ($id == 'recommend') {
                $width = __('fb_horizontal_recommend_width','mr_social_sharing_toolkit');
                $width = ($width == 'fb_horizontal_recommend_width') ? '120' : $width;
                $retval .= 'data-layout="button_count" data-width="'.$width.'" data-action="recommend"';                    
            } else {
                $width = __('fb_horizontal_width','mr_social_sharing_toolkit');
                $width = ($width == 'fb_horizontal_width') ? '90' : $width;
                $retval .= 'data-layout="button_count" data-width="'.$width.'"';                    
            }
            $height = '21';             
            break;
        case 'vertical':
            //$retval .= 'box_count';
            if ($id == 'recommend') {
                $width = __('fb_vertical_recommend_width','mr_social_sharing_toolkit');
                $width = ($width == 'fb_vertical_recommend_width') ? '92' : $width;
                $retval .= 'data-layout="box_count" data-width="'.$width.'" data-action="recommend"';                   
            } else {
                $width = __('fb_vertical_width','mr_social_sharing_toolkit');
                $width = ($width == 'fb_vertical_width') ? '55' : $width;
                $retval .= 'data-layout="box_count" data-width="'.$width.'"';                   
            }
            $height = '62';
            break;
        case 'none_text':
            //$retval .= 'standard';
            if ($id == 'recommend') {
                $width = 'auto';
                $retval .= 'data-width="'.$width.'" data-action="recommend"';                   
            } else {
                $width = 'auto';
                $retval .= 'data-width="'.$width.'"';                   
            }
            $height = '25';
            break;
        default:
            //$retval .= 'standard';
            if ($id == 'recommend') {
                $width = __('fb_standard_recommend_width','mr_social_sharing_toolkit');
                $width = ($width == 'fb_standard_standard_recommend_width') ? '91' : $width;
                $retval .= 'data-width="'.$width.'" data-action="recommend"';                   
            } else {
                $width = __('fb_standard_width','mr_social_sharing_toolkit');
                $width = ($width == 'fb_standard_width') ? '51' : $width;
                $retval .= 'data-width="'.$width.'"';                   
            }
            $height = '24';
            break;
    }
    //$retval .= '&amp;show_faces=false&amp;width='.$width.'&amp;height='.$height.'" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:'.$width.'px; height:'.$height.'px;" allowTransparency="true"></iframe>';*/
    $retval .= ' data-show-faces="false"></div>';
    $lang = __('en_US','mr_social_sharing_toolkit');
    $footer = (get_option('mr_social_sharing_js_footer') == 1) ? true : false;
    $this->enqueue_script('Social_sharing_facebook_root', plugins_url('/button.facebook.js', __FILE__), $footer);
    $this->enqueue_script('Social_sharing_facebook_xfbml', 'http://connect.facebook.net/'.$lang.'/all.js#xfbml=1', $footer);
    return '<span style="display: inline-block; width: '.$width.'px; height: '.$height.'px; overflow: hidden;">'.$retval.'</span>';
}

function fb_share($url, $title, $type, $id, $media = '', $description = '', $text = '', $icon = '') {   
    switch ($type) {
        case 'vertical':
            $retval = '<fb:share-button type="box_count" href="'.$url.'"></fb:share-button>';
            //$retval = '<a name="fb_share" type="box_count" share_url="'.$url.'" href="http://www.facebook.com/sharer.php">Share</a>';
            $this->enqueue_script('Social_sharing_facebook_root', plugins_url('/button.facebook.js', __FILE__));
            $footer = (get_option('mr_social_sharing_js_footer') == 1) ? true : false;
            $this->enqueue_script('Social_sharing_facebook_xfbml', 'http://connect.facebook.net/en_US/all.js#xfbml=1', $footer);
            //$this->enqueue_script('Social_sharing_facebook_share', 'http://static.ak.fbcdn.net/connect.php/js/FB.Share', $footer);
            break;
        case 'horizontal':
            $retval = '<fb:share-button type="button_count" href="'.$url.'"></fb:share-button>';
            //$retval = '<a name="fb_share" type="button_count" share_url="'.$url.'" href="http://www.facebook.com/sharer.php">Share</a>';
            $this->enqueue_script('Social_sharing_facebook_root', plugins_url('/button.facebook.js', __FILE__));
            $footer = (get_option('mr_social_sharing_js_footer') == 1) ? true : false;
            $this->enqueue_script('Social_sharing_facebook_xfbml', 'http://connect.facebook.net/en_US/all.js#xfbml=1', $footer);
            //$this->enqueue_script('Social_sharing_facebook_share', 'http://static.ak.fbcdn.net/connect.php/js/FB.Share', $footer);
            break;
        case 'none':
            $retval = '<fb:share-button type="button" href="'.$url.'"></fb:share-button>';
            //$retval = '<a name="fb_share" type="button" share_url="'.$url.'" href="http://www.facebook.com/sharer.php">Share</a>';
            $this->enqueue_script('Social_sharing_facebook_root', plugins_url('/button.facebook.js', __FILE__));
            $footer = (get_option('mr_social_sharing_js_footer') == 1) ? true : false;
            $this->enqueue_script('Social_sharing_facebook_xfbml', 'http://connect.facebook.net/en_US/all.js#xfbml=1', $footer);
            //$this->enqueue_script('Social_sharing_facebook_share', 'http://static.ak.fbcdn.net/connect.php/js/FB.Share', $footer);
            break;
        default:
            $url = 'https://www.facebook.com/sharer/sharer.php?u='.urlencode($url).'&amp;t='.urlencode($title);
            $text = ($text == '') ? __('Share on','mr_social_sharing_toolkit').' Facebook' : $text;
            $retval = $this->get_icon($type, $url, $text, $icon, true);
            break;
    }
    return $retval;
}

function fb_send($url, $title, $type, $id, $media = '', $description = '', $text = '', $icon = '') {
    //$retval = '<div id="fb-root"></div><fb:send href="'.$url.'" font=""></fb:send>';
    $retval = '<div class="fb-send" data-href="'.$url.'"></div>';
    $lang = __('en_US','mr_social_sharing_toolkit');
    $this->enqueue_script('Social_sharing_facebook_root', plugins_url('/button.facebook.js', __FILE__));
    $footer = (get_option('mr_social_sharing_js_footer') == 1) ? true : false;
    $this->enqueue_script('Social_sharing_facebook_xfbml', 'http://connect.facebook.net/'.$lang.'/all.js#xfbml=1', $footer);
    return $retval;         
}   

function follow_facebook($type, $id, $text = '', $icon = '') {
    $url = 'http://www.facebook.com/'.$id;
    $text = ($text == '') ? __('Friend me on','mr_social_sharing_toolkit').' Facebook' : $text;
    $blank = (get_option('mr_social_sharing_follow_new') == 1) ? true : false;
    return $this->get_icon($type, $url, $text, $icon, false, $blank);
} 
```

} ?>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T01:46:03.797

在“用户”部分中寻找他，看看他的权限是什么。我会删除他的帐户，然后将您的 URL 放入 Facebook 调试器以重新抓取您的网站。看看会发生什么。

# c - 如果我调用 push 函数超过 8 次，为什么我的代码会崩溃？

> ID：14881984
> 
> 赞同：1
> 
> 时间：2013-02-14T18:53:03.350
> 
> 标签：c, stack, stack-overflow

// 每当我将推送的函数调用时间增加超过 8 次时，它就会在一切正常之前崩溃。需要您的帮助。在下面的代码中，我使用动态数组创建了一个堆栈程序，记住不应该有任何堆栈溢出，只要堆栈被填满，就使用 realloc 函数将值加倍。

```
#include<stdio.h>
#include<stdlib.h>
#include<memory.h>
typedef struct ArrayStack
{
int top;
int capacity;
int *arr;
}*stack;

stack Creation()
{
 stack S;
 S=(stack)malloc(sizeof(struct ArrayStack));
 if(!S)return NULL;
 S->top=-1;
 S->capacity=1;
 S->arr=(int*)malloc(S->capacity*sizeof(int));
 if(!S->arr)return NULL;
 return S;
}
int is_Full(stack S)
{
return S->top==S->capacity-1;
}
int is_Empty(stack S)
{
return S->top==-1;
}

void Doubling(stack S)
{
 S->capacity*=2;
 S->arr=realloc(S->arr,S->capacity);
}

void push(stack S,int data)
{
if(is_Full(S)) 
Doubling(S);

S->arr[++S->top]=data;
}

int pop(stack S)
{
if(is_Empty(S))
printf("\nStack underflow");
else
return S->arr[S->top--];
}

int main()
{
stack S;
int i=0,size=9;
S=Creation();
**for(i=0;i<size;i++)
push(S,19+1);**   // As in this case

return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T19:04:35.763

```
S->arr = malloc(S->capacity * sizeof(int));
S->arr = realloc(S->arr, S->capacity); 
```

`S->capacity / sizeof(int)`您只需为项目重新分配足够的空间。

# scala - 使用 Scala Breeze 做 numPy 风格的广播

> ID：14881989
> 
> 赞同：3
> 
> 时间：2013-02-14T18:53:17.240
> 
> 标签：scala, scalala, scala-breeze

是否有使用 Breeze 的通用方法来实现在 NumPy 中使用广播可以做的事情？

具体来说，如果我想将一个运算符应用于两个 3x4 矩阵，我可以按元素应用该运算符。但是，我拥有的是一个 3x4 矩阵和一个 3 元素列向量。我想要一个函数，它产生一个 3x4 矩阵，该矩阵是通过将运算符应用于矩阵的每个元素以及对应行的向量中的元素而创建的。

所以对于一个部门：

```
2 4 6   /  2 3  = 1 2 3
3 6 9             1 2 3 
```

如果这不可用。我愿意考虑实施它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T22:20:35.823

您可以使用 mapPairs 来实现我“认为”您正在寻找的东西：

```
 val adder = DenseVector(1, 2, 3, 4)

  val result = DenseMatrix.zeros[Int](3, 4).mapPairs({
    case ((row, col), value) => {
      value + adder(col)
    }
  })

  println(result)

1  2  3  4  
1  2  3  4  
1  2  3  4 
```

我相信您可以从上面的简单“加法器”中调整您想要的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-24T01:48:48.363

Breeze 现在支持这种广播：

```
scala> val dm = DenseMatrix( (2, 4, 6), (3, 6, 9) )
dm: breeze.linalg.DenseMatrix[Int] = 
2  4  6  
3  6  9  

scala> val dv = DenseVector(2,3)
dv: breeze.linalg.DenseVector[Int] = DenseVector(2, 3)

scala> dm(::, *) :/ dv
res4: breeze.linalg.DenseMatrix[Int] = 
1  2  3  
1  2  3 
```

`*`操作员说要沿哪个轴广播。Breeze 不允许隐式广播，但标量类型除外。

# c# - 是否可以绑定到属性名称？

> ID：14881994
> 
> 赞同：1
> 
> 时间：2013-02-14T18:53:38.153
> 
> 标签：c#, xaml, button, binding, windows-runtime

是否可以绑定属性名称。当我尝试时，我似乎想出了运行时错误。

例如：

```
<button Name="{Binding UniqueID}" Click="ButtonHandler"> 
```

这是在网格视图中集合的标题中...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T00:27:50.233

你不能绑定名字，对不起。它在内部用于太多事情，如果可以的话，事情肯定会变得疯狂。文档有点含糊，但请这样说：（强调我的）

> 您不能将 Name 的字符串值用作数据绑定源的直接源值。如果必须在绑定的 UI 中显示与 Name 相同的字符串值，则应将相同的值复制到 Tag 属性，该属性可用作属性绑定源。**也不要使用 Name 作为绑定目标。**

（[MSDN：FrameworkElement.Name](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.frameworkelement.name.aspx)）

但是，如果您想将随机的额外数据附加到 UI 控件，我建议您改用附加属性。这样，它们与您正在做的事情特别相关，并且会被适当地键入，这与 Tag 不同。

（[MSDN：自定义附加属性](http://msdn.microsoft.com/en-us/library/windows/apps/hh965327.aspx)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T20:52:36.960

好吧，我一遍又一遍地阅读文档，找不到让它工作的方法。文档并没有说你不能这样做，但也没有说你可以做到。

但是，我找到了两种解决方法。如果您不使用 Tag 或 DataContect，而不是绑定名称，您可以找到它们并在处理程序中通过转换为字符串来提取它们。

它并不优雅，但是，它似乎确实按预期工作。

# html - 如何在 1 行上放置 2 个输入框

> ID：14881996
> 
> 赞同：1
> 
> 时间：2013-02-14T18:53:41.103
> 
> 标签：html

请问如何将这些输入框和 Sumbit 按钮放在同一行？

```
<td id="header-right">
   <table>
      <tr>
         <td class = "Login-Bar"><div style = "width: 200px;">
            <form action = "Login.php" method = "post">
               Username: <input type = "text" name "Username" size = "10"> 
               Password: <input type = "text" name "Password" size = "10"> 
               <input type = "Submit">
            </form></div>
         </td>
      </tr>
   </table>
</td> 
```

这就是我的源代码......它显示在左侧导航栏上方，但是我希望它显示在同一行，但它从来没有将它放在彼此下方。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T18:57:37.017

1.  [不要使用表格进行布局](http://webdesign.about.com/od/layout/a/aa111102a.htm)
2.  [使用标签标签](http://www.w3schools.com/tags/tag_label.asp)
3.  为两者分配样式`float: left`：标签和输入字段。然后在它们下方添加 clear （如果您对元素相互重叠有任何问题）。

替代方法是分配`display: inline`给输入字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T18:57:28.517

您可以将此样式应用于表单：

```
form {
    display: inline-block;
    width: 400px; /* or whatever width makes it work for you */
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T18:58:35.657

试试这个为你的CSS。

```
input {
   float: left;
} 
```

如果你想增加一些间距。你可以做这样的事情

```
input {
       float: left;
       margin-right: 5px;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T18:59:21.253

将内部表定义更改为：

```
<form action="Login.php" method="post">
    <table>
        <tr>
            <td class="Login-Bar">
                Username:
                <input type="text" name "Username" size="10" /></td>
            <td class="Login-Bar">Password:
                <input type="text" name "Password" size="10" /></td>
            <td>
                    <input type="Submit" />
            </td>
        </tr>
    </table>
</form> 
```

[小提琴链接](http://jsfiddle.net/VWw5f/)。

# php - 使用 Windows 身份验证作为 Intranet 应用程序的登录凭据

> ID：14881997
> 
> 赞同：5
> 
> 时间：2013-02-14T18:53:44.463
> 
> 标签：php, windows, authentication, windows-nt

我正在使用 PHP 开发 Intranet Web 应用程序。我试图使用 Windows NT 登录凭据登录到应用程序。我在这里遇到的麻烦是如何获取远程用户的 Windows 用户名？我想获取用户名，然后检查各种 LDAP 组，以便我可以将它们引导到我的应用程序中的适当页面。

到目前为止我已经尝试过

```
<?php
echo $_SERVER['REMOTE_USER'];
echo $_SERVER['PHP_AUTH_USER'];
?> 
```

它们都返回空值。

更新：使用 $_SERVER['REMOTE_ADDR'] 我能够获取计算机的 IP 地址。无论如何我可以获得用户 ID/用户名（任何唯一的）并使用它来与 LDAP 组进行比较？当他们进入网站的主页并存储会话然后在整个网站中使用会话变量时，我想这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-22T13:47:37.323

不确定您是否仍然需要帮助，但最近我不得不创建代码以使用使用 IIS 运行的 Windows 身份验证自动将 Intranet 用户登录到我们的网站。当使用 windows 身份验证和 ISS 以获取登录用户时，首先确保您启用了 windows 身份验证并禁用了匿名。

```
$_SERVER['AUTH_USER']; // obtain the LanID of the logged in user. 
```

如果您需要更多信息，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T19:01:29.920

您必须先发送 NTLM-Authenticate 标头。之后，$_SERVER-Vars 中应该有正确的用户

```
header('WWW-Authenticate: NTLM');
echo $_SERVER['AUTH_USER']; 
```

AFAIK 这仅适用于 InternetExporer - 浏览器

# xcode - .png 图像使我的应用程序变得非常大

> ID：14881999
> 
> 赞同：1
> 
> 时间：2013-02-14T18:53:59.980
> 
> 标签：xcode, cocos2d-iphone, size, png

我有很多 5-4-3 mb 的 .png 图像，它们总共大约 50-60mb

有人有办法压缩 .png 图像以使我的应用程序更小吗？我使用的是“ **PNGenius** ”，但并没有太大的不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T19:27:13.413

将它们转换为/导出为 .PVR.CCZ 图像。[TexturePacker](http://www.texturepacker.de)是一个可以帮助你的工具。您将在[这篇文章](http://www.learn-cocos2d.com/2012/11/optimize-memory-usage-bundle-size-cocos2d-app/)中找到更多指示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T19:01:30.877

我想你有`png`大尺寸的大图像，在你的应用程序中调整大小（尺寸）。这就是为什么它们在磁盘上有很大的尺寸。

如果您首先调整尺寸（宽度和高度），**然后**将它们添加到您的应用程序中，问题就解决了。

它看起来像这样：

```
Situation 1\. 
Big image file (very big dimensions) <---> Big size on disk (e.g. 5MB)
    ---> You use it in your app. You resize it in your app. <---> Same size on disk.

Situation 2.
Big image file (very big dimensions) <---> Big size on disk
    ---> You resize it on your disk, and you don't resize it in your app.
         ---> Less size 
```

[您可以使用IfanView](http://www.irfanview.com/)快速轻松地调整图像大小。这是一个很棒的应用程序，有很好的快捷方式。

希望这对您有所帮助。