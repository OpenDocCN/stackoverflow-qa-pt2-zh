# StackOverflow 问答 14079000-14079999

# php - 每次变量变化时调用函数

> ID：14079001
> 
> 赞同：0
> 
> 时间：2012-12-29T05:34:05.687
> 
> 标签：php, javascript, html, css

```
<script>
function myFunction(a){

    document.getElementById("demo").innerHTML=a;
}
</script> 
```

单击时更改变量的代码

```
<?php

$as=array(0,1,2,3,4,5); 
$a=sizeof($as);
echo'<div class="navbox">
<ul class="nav">';
for($i=1;$i<$a;$i++){

    echo '<li><a href="#" onclick="myFunction('.$as[$i].')">'.$as[$i].'</li>';
}

$u='<p id="demo"></p>';
echo $u;
ifrm();
function ifrm(){

    global $u;
    if($u=''){

        echo 'empty';
    }
    else{

        $y='index.php?x='.$u;
        echo '<iframe src='.$y.'></frame>';
    }
}
?> 
```

每次变量 $u 更改时调用`function ifrm();`，但它只调用应该调用的变量

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T05:56:00.597

我假设您希望每次更改段落时都调用某些`innerHTML`内容。`demo`该函数`irm()`是服务器端的，在 PHP 中，所以一旦页面加载，它就不能被 JavaScript 调用。您必须在 JavaScript 中使用您想要的行为编写此函数，然后在重置`innerHTML`in后调用它`myFunction()`。

PS：我认为您希望`if ($u == '')`在 if 语句中使用比较运算符 ()，而不是赋值运算符 ( `=`)。

# dependencies - 依赖子图的拓扑顺序

> ID：14079002
> 
> 赞同：1
> 
> 时间：2012-12-29T05:34:13.833
> 
> 标签：dependencies, graph-algorithm, topological-sort, subgraph

我正在寻找一种在节点子集上运行的标准拓扑排序算法的变体。

考虑具有三种有向边的标记节点图：“取决于”、“之前”和“之后”。

我想要的函数接受节点的子集并返回线性排序。线性排序遵循“之前”和“之后”约束，并将“依赖于”视为“之前”约束。线性排序中的节点应该是输入节点的超集，从而包括依赖关系。

**示例图：**

```
A depends on B
B depends on C
D before C
E after C 
```

*Y 之后*的 X可以简单地重写为*X 之前的 Y*

**测试用例：**

```
f({A})     -> [C B A]
f({A D})   -> [D C B A]
f({B D E}) -> [D C B E] or [D C E B] 
```

*奖励积分：*算法也可以配置为强制排序中的第一个和最后一个节点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T12:18:05.723

采用与感兴趣节点的并集及其依赖项相交的整个图的拓扑排序。在伪代码中：

```
λ N = A ∩ (N ∪ D) 
```

其中*A*是拓扑排序图的**有序集，** *N*是您关心的节点的子集，*D*是*N*的依赖关系。请注意，交集运算符必须遵守*A*的顺序。

或在 Haskell 中（如您的示例所示，使用数字代替字母作为节点）：

```
import Data.List (intersect, union)
import Data.Graph (buildG, reachable, topSort)

graph = buildG (0, 4) [(3,2), (2,4), (2,1), (1,0)]

dependencies = buildG (0, 4) [(0, 1), (1, 2)]

ordering = topSort graph

f nodes = ordering `intersect` (nodes `union` deps)
  where deps = concatMap (reachable dependencies) nodes 
```

这假设您可以指定图形中的所有边。请注意，您只需要计算一次总排序，因此它应该在后续调用中具有高性能。

上面的代码将输出：

```
> f [0]
[2,1,0]

> f [0, 3]
[3,2,1,0]

> f [1, 3, 4]
[3,2,4,1] 
```

与您的上述测试用例相匹配。

如果由于某种原因您不能指定图中的每条边，而只能指定相对约束，请按上述计算 (N ∪ D) 并应用约束满足。天真的方法是尝试这些节点的每一种排列，直到找到一个满足所有约束的排列。显然，即使是简单的深度优先和回溯方法，您也可以更有效地完成此操作。

* * *

编辑：深度优先代码

很简单。我们创建一棵我们关心的节点的所有排列的树，然后遍历/修剪该树，直到找到满足所有约束的排列（请注意，我们将依赖项附加到约束，因为依赖项也是约束）。所有约束都以 (A, B) 的形式指定，这意味着“A 必须在 B 之后”。

由于我们将排列生成为树而不是列表，因此只要给定的路径前缀违反约束，我们就可以轻松地修剪搜索空间的大块。

```
import Data.Maybe (fromMaybe, isJust)
import Data.List (union, nub, elemIndex, find)
import Data.Tree (unfoldTree, Tree (Node))
import Control.Applicative (liftA2)

dependencies = [(0, 1), (1, 2)]

constraints = [(2, 3), (4, 2)] ++ dependencies

f nodes = search $ permutationsTree $ (deps `union` nodes)
  where deps = nub $ concatMap dependenciesOf nodes

search (Node path children)
  | satisfies && null children = Just path
  | satisfies = fromMaybe Nothing $ find isJust $ map search children
  | otherwise = Nothing
  where satisfies   = all (isSatisfied path) constraints
        constraints = constraintsFor path

constraintsFor xs = filter isApplicable constraints
  where isApplicable (a, b) = (a `elem` xs) && (b `elem` xs)

isSatisfied path (a, b) = fromMaybe False $ liftA2 (>) i1 i2
  where i1 = a `elemIndex` path
        i2 = b `elemIndex` path 

permutationsTree xs = unfoldTree next ([], xs)
  where next (path, xs)      = (path, map (appendTo path) (select xs))
        appendTo path (a, b) = (path ++ [a], b)

select [] = []
select (x:xs) = (x, xs) : map (fmap (x:)) (select xs)

dependenciesOf x = nub $ x : concatMap dependenciesOf deps
  where deps = map snd $ filter (\(a, b) -> a == x) dependencies 
```

大部分代码都相当简单，但这里有一些我脑海中的笔记。

*   在计算上，这比之前发布的算法要昂贵得多。即使使用更复杂的约束求解器，您也不太可能做得更好（因为实际上没有任何预计算可以对这样的约束进行......至少没有一个对我来说是显而易见的）。

*   'f' 函数返回一个 Maybe，因为可能没有满足所有指定约束的路径。

*   *constraintsFor*约占总计算时间的 43%。这很天真。我们可以做一些事情来加速它：

    1）一旦路径满足约束，向其附加节点不能使其违反该约束，但我们没有利用这一事实。相反，我们只是不断地重新测试给定路径的所有相关约束，即使已知约束之前已经通过。

    2）我们对约束进行线性搜索以找到适用的约束。相反，如果我们将它们索引到它们适用的节点，我们可以加快速度。

    3) 减少要测试的约束数量显然也会减少*isSatisfied*调用，这约占计算时间的 25%。

*   如果您要在严格执行的环境中实现这样的代码，则必须对代码结构进行一些修改。照原样，此代码在很大程度上依赖于惰性排列树，这使我们不必将搜索代码与树生成代码交织在一起，因为搜索代码根本不会走上它认为不合适的路径。

最后，如果您想找到所有解决方案，而不仅仅是第一个，只需将搜索正文更改为：

```
| satisfies && null children = [path]
| satisfies = concatMap search children
| otherwise = [] 
```

我没有花任何时间优化此代码或类似的东西，仅仅是因为假设您能够指定完整的图形（我相信您可以），原始算法显然更胜一筹。

# asp.net-mvc - ASP.NET MVC 4 数据网格

> ID：14079003
> 
> 赞同：15
> 
> 时间：2012-12-29T05:34:17.517
> 
> 标签：asp.net-mvc, mvcgrid

我是 ASP.NET MVC 的新手，想做一个简单的页面，使用 Entity 检索一些数据并将其显示在分页数据网格中。

谁能指出我正确的方向或教程等。

它只是检索和显示内容列表的概念证明。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-29T06:58:17.477

为此，您可以使用 ASP.NET MVC **jqGrid**。

下面我提到了如何实现这一点的**示例代码。**

**示例图像**

![在此处输入图像描述](../Images/128f552728055ff2f8cd97b5128cf5c4.png)

**动作方法**

```
public ActionResult JsonSalesCollection(DateTime startDate, DateTime endDate,
string sidx, string sord, int page, int rows)

 {
     SalesLogic logicLayer = new SalesLogic();
     List<Sale> context;

     // If we aren't filtering by date, return this month's contributions
     if (startDate == DateTime.MinValue || endDate == DateTime.MinValue)
      {
         context = logicLayer.GetSales();
      }
     else // Filter by specified date range
      {
          context = logicLayer.GetSalesByDateRange(startDate, endDate);
      }

     // Calculate page index, total pages, etc. for jqGrid to us for paging
     int pageIndex = Convert.ToInt32(page) - 1;
     int pageSize = rows;
     int totalRecords = context.Count();
     int totalPages = (int)Math.Ceiling((float)totalRecords / (float)pageSize);

     // Order the results based on the order passed into the method
     string orderBy = string.Format("{0} {1}", sidx, sord);
     var sales = context.AsQueryable()
                  .OrderBy(orderBy) // Uses System.Linq.Dynamic library for sorting
                  .Skip(pageIndex * pageSize)
                  .Take(pageSize);

      // Format the data for the jqGrid
      var jsonData = new
       {
         total = totalPages,
         page = page,
         records = totalRecords,
         rows = (
                from s in sales
                select new
                {
                   i = s.Id,
                   cell = new string[] {
                   s.Id.ToString(),
                   s.Quantity.ToString(),
                   s.Product,
                   s.Customer,
                   s.Date.ToShortDateString(), 
                   s.Amount.ToString("c")
                }
           }).ToArray()
          };

         // Return the result in json
         return Json(jsonData);
} 
```

**jQuery 设置**

```
<script type="text/javascript">
var gridDataUrl = '/Home/JsonSalesCollection';
// use date.js to calculate the values for this month
var startDate = Date.parse('today').moveToFirstDayOfMonth();
var endDate = Date.parse('today');

jQuery("#list").jqGrid({

     url: gridDataUrl + '?startDate=' + startDate.toJSONString() + '&endDate=' +        endDate.toJSONString(),
     datatype: "json",
     mtype: 'GET',
     colNames: ['Sale Id', 'Quantity', 'Product', 'Customer', 'Date', 'Amount'],
     colModel: [
                  { name: 'Id', index: 'Id', width: 50, align: 'left' },
                  { name: 'Quantity', index: 'Quantity', width: 100, align: 'left' },
                  { name: 'Product', index: 'Product', width: 100, align: 'left' },
                  { name: 'Customer', index: 'Customer', width: 100, align: 'left' },
                  { name: 'Date', index: 'Date', width: 100, align: 'left' },
                  { name: 'Amount', index: 'Amount', width: 100, align: 'right'}],
     rowNum: 20,
     rowList: [10, 20, 30],
     imgpath: gridimgpath,
     height: 'auto',
     width: '700',
     pager: jQuery('#pager'),
     sortname: 'Id',
     viewrecords: true,
     sortorder: "desc",
     caption: "Sales"
});

</script> 
```

[**您可以在此处从 ASP.NET MVC 中**](http://www.schnieds.com/2010/01/gridview-in-aspnet-mvc.html)的 GridView 获取更多详细信息[](http://www.schnieds.com/2010/01/gridview-in-aspnet-mvc.html)

 **## 或者

选中此[**在 ASP.NET MVC 中充分利用 WebGrid**](http://msdn.microsoft.com/en-us/magazine/hh288075.aspx)（与 MVC 4 兼容）

我希望这对你有帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-05-14T15:39:57.373

1.  [`ASP.net MVC Awesome - jQuery Ajax helpers`](https://awesome.codeplex.com/)（[演示](http://demo.aspnetawesome.com/GridDemo)） ![ASP.net MVC 真棒网格](../Images/5955c08fd404795e00c975d6fb513985.png)
2.  [`jqxGrid`](http://www.jqwidgets.com/jquery-widgets-demo/demos/jqxgrid/index.htm?%28arctic%29#demos/jqxgrid/filterrow.htm) ![jqx网格](../Images/0b7c1778dd31e4789c57fdfdb2ec1a4e.png)
3.  [`Grid.MVC`](http://gridmvc.azurewebsites.net/)( [codeplex](https://gridmvc.codeplex.com/) ) 排序、分页、过滤 ![Grid.MVC 演示](../Images/7455e209048b312ab3b8485c818c3bfb.png)
4.  [`MVCContrib.Grid`](http://mvccontrib.codeplex.com/wikipage?title=Grid)
5.  [`jqGrid`](http://www.trirand.com/blog/)（[演示](http://www.guriddo.net/demo/guriddojs/)） ![jqGrid](../Images/447344b1b288f14352821909207c040d.png)
6.  [`FuelUX repeater`](http://getfuelux.com/javascript.html#repeater) ![Fuelux中继器演示](../Images/ed6418c881727bf502045586d6f4dcd0.png)
7.  [`IgniteUI Grid`](http://igniteui.com/grid/feature-chooser) ![IgniteUI 网格](../Images/6031c0f1b8dc9f6bbfbd70aa18edef4e.png)**

# symfony - 将用户帐户从 Symfony2 迁移到 Silverstripe 3

> ID：14079007
> 
> 赞同：0
> 
> 时间：2012-12-29T05:35:13.727
> 
> 标签：symfony, migration, silverstripe, migrating

我需要帮助将用户从使用 Symfony2 构建的网站迁移到 Silverstripe 3。

我从一个 symfony 构建的网站获得了一张用户表，其中包含 sha1 哈希密码和盐。我想将用户导入新设置的 Silverstripe 3 网站。我尝试通过手动插入散列密码、salt 并将密码加密算法更改为，将示例条目插入 SS3s 成员表，`sha1`但它不起作用。我还尝试使用`Security::set_password_encryption_algorithm`in my`_config.php`来覆盖从河豚到的密码加密，`sha1`但它似乎并没有改变密码算法。

我真的需要这方面的帮助，因为我只剩下几天时间来交付这个项目了。关于我应该如何进行迁移的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T11:58:23.193

symfony2 密码加密确实对密码 + 哈希进行加密不仅一次而且多次（默认为 5000）。Symfony 还像这样连接密码和哈希：

```
$password . '{' . $salt . '}' 
```

您需要在 silverstripe 3 中重现这种技术，或者在您的 Silverstripe 3 应用程序中使用 symfony 加密。您可以在查看`Symfony\Component\Security\Core\Encoder\MessageDigestPasswordEncoder`.

另一种方法是重置每个密码，并在新应用程序上线后向每个用户发送电子邮件，以便用户添加他的密码。在这种情况下，您不需要迁移密码，从长远来看，这可能会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T08:48:05.307

为此，您可以在 SS 中创建自己的密码“加密器”类（不是 100% 正确命名...）。我看过[SF2 implementation](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Security/Core/Encoder/MessageDigestPasswordEncoder.php)，这是一个未经测试的起点。它不检查盐中的花括号。

```
 <?php
class PasswordEncryptor_Symfony2 extends PasswordEncryptor {
    protected $algorithm = 'sha512';
    protected $iterations = 5000;
    protected $encodeHashAsBase64 = true;
    public function encrypt($password, $salt = null, $member = null) {
        $salted = $password . '{' . $salt . '}';
        $digest = hash($this->algorithm, $salted, true);
        for ($i = 1; $i < $this->iterations; $i++) {
            $digest = hash($this->algorithm, $digest.$salted, true);
        }

        return $this->encodeHashAsBase64 ? base64_encode($digest) : bin2hex($digest);
    }
} 
```

您需要通过 YML 配置在 mysite/_config/encryptors.yml 中注册此类：

```
PasswordEncryptor:
  encryptors:
    symfony2:
      PasswordEncryptor_Symfony2: 
```

并将其设置为 mysite/_config.php 中的默认值（如果需要）：

```
Security::set_password_encryption_algorithm('symfony2'); 
```

为了确保使用此类检查从 SF2 迁移的现有哈希，您需要将表中的`PasswordEncryption`列设置`Member`为“symfony2”（每个成员都有其使用的加密器别名单独设置以允许这些类型的迁移）。因此，在 SS 中创建的任何新用户仍然可以使用默认的 SS 密码散列（“blowfish”别名）。

# recursion - OpenMP 调用 for 循环中的递归调用

> ID：14079012
> 
> 赞同：0
> 
> 时间：2012-12-29T05:36:18.263
> 
> 标签：recursion, parallel-processing, openmp

我之前也问过类似的问题，但由于它的复杂性，我没有得到足够的重视，所以让我重新表述整个问题。

```
moveT ChooseComputerMove(state)
{
 moveT bestMove;
 maxMove(state,bestMove);

 return bestMove;
}

int maxMove(state, bestMove)
{

  int v = -1000;

  #pragma omp parallel for 
  for(int i = 0; i< nMoves; i++)
  {

   moveT move = validMoves[i];

   makemove(state,move);

   #pragma omp task 

   rating = -maxMove(state, move);

    if(rating < v)
      {v=rating ; bestMove = move;}

    #pragma omp taskwait   

    Retractmove(state,move)
 }

 return v;
} 
```

我的代码在语义上是否正确；我已经在我的代码中对其进行了测试，它给了我分段错误；

更新：抱歉拼写错误，我已经编辑了我的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T16:32:28.397

将此视为评论。您的显式任务区域写错了，此外它也是多余的。您在每次迭代中只生成一个显式任务，然后等待它以`taskwait`. 但由于任务执行可能会延迟，任务本身可能会在比较运算符的行之后执行。例如

```
#pragma omp task
rating = -maxMove(state, move); // <-- This stmt is the body of the task

if(rating < v)
  {v=rating ; bestMove = move;}

#pragma omp taskwait 
```

`task`任务的主体是pragma之后的下一个块。

实际的执行流程可能是：

*   任务已创建但已排队。
*   该`if(rating < v) ....`语句被执行。
*   在处理完所有任务之前，该`taskwait`构造会阻塞执行。这将启动任务的执行。
*   计算了新的评分，但由于语句已经执行，因此值`v`永远不会更新。`if`

您宁愿将这两个语句都放在一个`task`构造中并删除，`taskwait`因为它隐含在并行区域的末尾。由于`makemove`修改了`state`向量，您可能希望使用*单任务生产者*模式：

```
#pragma omp parallel
{
   #pragma omp single nowait
   for(int i = 0; i < nMoves; i++)
   {
      moveT move = validMoves[i], opponentsBestMove;

      makemove(state, move);

      #pragma omp task firstprivate(state)
      {
         // Declare rating here
         int rating = -maxMove(state, opponentsBestMove);

         #pragma omp critical
         if (rating > v) { v = rating; bestMove = move; }
      }

      Retractmove(state, move)
   }

   // An implicit taskwait here
} 
```

任务生产者循环仅在一个线程中串行运行（因为该`single`指令）。然后在并行区域的末尾有一个隐式任务调度点，因此其他线程开始执行排队的任务。默认情况下`state`是共享的，必须这样做`firstprivate`才能让任务继承私有版本，否则所有任务会同时修改同一个全局`state`变量，这会导致问题。私有化`state`会导致更高的内存使用率，因此允许将任务分配到递归树的底部并不是一个好主意。相反，您应该在某个级别停止生成任务并继续串行执行。这也将减少显式任务引起的开销。

Another thing to notice - unless special measures are taken, only the top-level call would run in parallel. All other recursive calls would result in nested parallel regions and nested parallelism is disabled by default, which means that deeper recursion levels would automatically execute serially. To enable nested parallelism, either set the environment value `OMP_NESTED` to `true` or put the following call somewhere in the beginning of the program:

```
#include <omp.h>

...
omp_set_nested(1);
...
// Now call the recursive function
... 
```

Beware that this might result in a huge number of concurrent threads.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T12:13:07.103

您在这里尝试实现的是进行并行递归调用。这会给你带来很多问题。

假设您有 8 个物理线程。由于`nMoves`您的情况不超过 8，因此`MaxMove`在 8 个并行线程中运行具有不同参数的函数会非常好。但是，在每个调用中，您都试图创建另一个`nMoves-1`线程，因此您创建的并行线程的复杂性是指数级的。由于物理线程的数量是有限的，因此并行运行每个函数调用不会获得额外的性能，因此最终所有线程都会很忙。此外，与您在函数调用中执行的计算量相比，创建每个线程的开销成本可能太高。

我将删除内部`#pragma omp task`和`#pragma omp taskwait`注释，并将此代码序列留在已创建的线程中。

您的代码为我运行，我没有遇到分段错误，但我认为这是由您的并行化方法引起的。

# ruby-on-rails - Rails：如何仅针对一个更改的属性运行 before_update？

> ID：14079013
> 
> 赞同：17
> 
> 时间：2012-12-29T05:36:24.013
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, beforeupdate

在我的模型`Shop`中，我保存图像 url`logo_ori`并使用它来制作缩略图`before_update`。

```
# shop.rb
before_update :run_blitline_job

private

def run_blitline_job
  # uses logo_ori to make thumbnails
end 
```

但是我发现当我保存其他属性（例如：在表单中编辑商店的资料）时，它也会运行`before_update`. `logo_ori`仅在保存时如何限制其执行？

我试过这个：

```
before_update :run_blitline_job, :if => :logo_ori? 
```

但`before_update`如果我之前已经`logo_ori`保存过，它仍然会运行。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-29T05:48:27.303

```
before_update :run_blitline_job, :if => :logo_ori_changed? 
```

这将在每次`logo_ori`属性更改时运行回调。您还可以使用字符串来实现多个条件：

```
before_update :run_blitline_job, :if => proc { !logo_ori_was && logo_ori_changed? } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-29T06:12:59.890

你很接近，你想要这样的东西：

```
before_update { |shop| shop.run_blitline_job if shop.logo_ori_changed? } 
```

来源：

[http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)

[http://api.rubyonrails.org/classes/ActiveModel/Dirty.html](http://api.rubyonrails.org/classes/ActiveModel/Dirty.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T06:24:48.660

它很简单，您可以使用[ActiveModel::Dirty](http://api.rubyonrails.org/classes/ActiveModel/Dirty.html)（查看文档），它适用于 rails 3 中的所有模型

```
before_update { |shop| shop.run_blitline_job if shop.logo_ori_changed? } 
```

# php - 使用ajax从数据库中获取数据

> ID：14079014
> 
> 赞同：2
> 
> 时间：2012-12-29T05:36:30.660
> 
> 标签：php, ajax, database

我想从数据库中获取数据。但问题是我想获取特定的数据，我不明白该怎么做。我在数据库中有 3 条具有不同 ID 的类似记录。当我在组合框中选择选项时，我希望一一记录。我的代码如下：

```
<select name="q" onchange="myFuncyion()">
<option value="3*10">3*10</option>
<option value="5*10">3*10</option>
<option value="6*10">3*10</option>
</select> 
```

上述选项以不同的价格出现在数据库中。我要价格。但问题是这样的。相同的选项存在于数据库中，具有不同 ID 的多个价格。但是我希望当我选择一个选项时，只能从数据库中获取一个正确或等于该记录 ID 的价格。

我想在数据库中编写这种类型的查询：

```
select * from tablename where size = "$size" and id = "$id" 
```

请帮助我如何使用ajax做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T05:50:59.340

为选择框提供 id。
`<select id = "searchBox" name = "whateveryouhavespecified"...>`

```
function myFuncyion(){
    //condition will have the value of your selectbox
    var condition;
    condition = $("#searchBox").val();
    $.ajax({
        type: "POST",
        url: 'path to action page',
        data: { action:'getlinks', topic_id: condition},
        success: function(data) {
                //code of what after ajax is done.
        }
    });
} 
```

这是一个例子。在我设置变量的地方设置你想要的变量。这样可以使用 ajax 将选择框的值传输到操作页面。

PHP 代码

```
if(isset($_POST['action']) && $_POST['action']=='getlinks' && isset($_POST['topic_id']) && $_POST['topic_id']!=''){
    $query = "select * from tablename where fieldname1 = value1 and fieldname2 = value2;"
} 
```

请注意，我在这里没有提到任何过滤过程，但强烈建议这样做`filter the values before passing it to query`。我只提到了您要求的内容，而不是整个标准流程。

# c - 如何避免访问已释放的地址？

> ID：14079021
> 
> 赞同：3
> 
> 时间：2012-12-29T05:37:55.563
> 
> 标签：c, linux, memory

当我尝试访问已释放的地址时，程序将正常运行。有什么需要避免的商品吗？像某些命名的函数`have_alloca(void *p)`可以返回是否`p`是有效地址。
我知道`valgrind`with`tool=memcheck`可以做到这一点。但我想知道我是否可以从代码中避免它。
这是一个简单的例子：

```
#include <stdlib.h>

int main(int argc, char *argv[])
{
    int *p = malloc(sizeof(int) * 10);
    free(p);
    *(p + 1) = 100;

    return 0;
} 
```

为什么我可以访问无效地址？并且程序可以在没有任何警告的情况下编译和运行。顺便说一句：Linux。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-29T05:40:20.530

不，您必须自己处理。从技术上讲，从语言标准的角度来看
，写入不属于您的内存位置是**未定义的行为。**

语言 C 和 C++ 为您提供了访问变量地址并使用它们的灵活性，代价是这些地址包含您的变量/对象拥有的有效值是您的责任。

理由是：

***“权力越大责任越大”***

所以责任是你自己来承担的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-29T05:55:32.280

p 就像一个正常的变量

函数 free(p) 的调用只是释放了我们分配的内存，但 p 仍然保存**地址值**。除非你自己重置：

> p = 空；

所以请记住以下提示：

1.  每次使用指针之前，请检查它是否为 NULL 指针。
2.  每次释放内存后，将指针设置为NULL。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-29T05:59:26.103

*   释放指针后赋值`NULL`给指针。
*   访问前检查不`NULL`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-29T07:55:25.217

除了其他回复之外，您可以考虑使用[Boehm 的保守垃圾收集器](http://www.hpl.hp.com/personal/Hans_Boehm/gc/)，然后您将使用`GC_malloc`而不是`malloc`并且您不会做任何事情`free`（即使，当绝对确定内存区域变得无用且无法访问时，您也可以明确地`GC_free`使用它） .

但是*C*的要点是不允许使用`free`-d 数据区。这样做是*未定义的行为*，任何事情都可能发生。

至于“为什么有时您仍然可以访问无效地址”的问题（在`free`-d 区域内），答案是特定于实现的。实际上，在 Linux 上，从内核获取内存是通过[mmap(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/mmap.2.html)（或有时`sbrk(2)`）完成的，然后通过系统调用完成释放它`munmap(2)`，这些操作在某种程度上是昂贵的操作，并且需要处理多个页面长度（通常为 4Kbytes）。所以`malloc`实现试图避免做很多`mmap`和`munmap`系统调用，所以通常以`free`不同的方式管理 -d 内存区域，通过组织它们以便它们可以被进一步重用`malloc`而不做任何`mmap`系统调用。这说明内存区域仍然存在（即使它在里面`malloc`内部簿记），您可以访问它。但是这样做会破坏内部不变量，`malloc`并且以后会发生严重破坏。

顺便说一句，如果地址在地址空间内，则地址是有效的，您可以通过（顺序）读取`/proc/1234/maps`文件（Linux上具有某些指定文本内容的伪文件）来查询进程1234的地址空间。从进程里面读取`/proc/self/maps`。尝试`cat /proc/self/maps`显示运行该命令的进程的地址空间的`cat`命令以了解更多信息。请参见[proc(5)](http://www.kernel.org/doc/man-pages/online/pages/man5/proc.5.html)手册页。

尝试使用`strace`您的简单程序来了解它正在执行的系统调用。

# php - PHP 多维数组

> ID：14079024
> 
> 赞同：0
> 
> 时间：2012-12-29T05:38:31.190
> 
> 标签：php

我正在努力解决这个问题。我以前使用过数组，但我似乎在 PHP 中遇到了困难。相信我，我已经在这里和其他地方查看过问题，所以我提前为这个问题可能是多么基本而道歉。我想做的是制作一个数组的数组？？？

基本上，我正在尝试创建一个会话全局变量，以便它存储一个数组并且可以不断添加。

```
$_SESSION['school'] = array('events' => array()); 
```

事件数组的示例是：

```
events['name'] = 'Homecoming';
events['date'] = 'December 15, 2012';
events['cost'] = 18.00;
events['attending'] = array();
events['attending'][$i] = 'John' 
```

那么用途将是

```
echo $_SESSION['school'][$i][events]['name']; 
echo $_SESSION['school'][$i][events]['date']; 
echo $_SESSION['school'][$i][events]['cost']; 
```

...

我已经尝试如上所述创建它并像这样填充（再次是一个事件数组）

```
$_SESSION['school'] = array('events' => array());

$_SESSION['school'][$i][events]['name'] = 'Homecoming';
$_SESSION['school'][$i][events]['date'] = 'December 15, 2012';
$_SESSION['school'][$i][events]['cost'] = 18.00;
$_SESSION['school'][$i][events]['people'] = array('jane', 'john', 'bill'); 
```

这似乎不起作用，因为我可以告诉计数正在增加，因为它正在被填充。我尝试了其他一些方法，但由于某种原因我无法弄清楚。我遇到的大多数例子似乎与我正在尝试做的事情并不相似。任何帮助将不胜感激。

--------基于反馈的更新问题--------我想我非常接近理解你更新的逻辑，我尝试更新我的代码，但我遇到了以下问题. 我有一个初始化 php 脚本，它设置 $_SESSION['school'] = array(array());。直到稍后才会填充它，并且有一次我用计数检查了 $_SESSION['school']。即使没有添加任何内容，它也始终在初始检查中返回 1。但是，我认为它是因为它包含一个空数组。所以这让我质疑结构。由于我是一个视觉型的人，这就是我认为我需要的，但我不知道如何构建它。

```
//would be an 1 dimensional array that empty until a school is added later on in code.
$_SESSION['school'] = array(); 
```

它的元素将包含一个包含元素的多维数组

```
['name'] = 'Johnson High';
['address'] = '121 elm';
['city'] = 'san jose';
['state'] = 'California';
['events'] = array(); 
```

['events'] 在添加事件之前为空，但这里有一些项目将包含

```
['events']['name'] = 'homecoming';
['events']['date'] = 'December 15, 2012';
['events']['cost'] = '18.00'; 
```

最后 $_SESSION['school'] 可以容纳 1 到我可以循环通过的许多学校。

现在对于我对 danL 更新逻辑的误解，我看不到名称和事件如何具有相同的索引？当我查看代码时，我感觉 $_SESSION['school'] 看起来像这样

```
$_SESSION['school']{ 'name' => 'Johnson High',
                     'events' => array('basketball', 'soccer', 'football'),
                     'name' => 'West Forsyth High',
                     'events' => array('basketball', 'soccer', 'football')}; 
```

如果是这种情况，那么每个元素都位于不同的索引处。我必须在这里遗漏一些基本的东西。我一直在努力阅读并与我做错的事情联系起来。我想我只是从错误的角度看待问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T05:43:39.793

如果它不是数字键，则需要将键放在引号中，如下所示：

```
$_SESSION['school']['events']['name'] = 'Homecoming'; 
```

但是，如果你想做一些像你在这里做的事情：

```
echo $_SESSION['school'][$i]['events']['name']; 
```

那么你需要像这样声明你的 $_SESSION['school'] 变量：

```
$_SESSION['school'] = array(array('events' => array())); 
```

如果您注意到，您声明 $_SESSION['school'] 数组的方式只有 3 个维度，但您尝试在使用 $i 变量引用内部索引的部分中访问 4 个维度数组。

更新：这是您将事件添加到空学校数组的方式

```
$_SESSION['school'] = array(array());
$_SESSION['school'][]['name'] = 'Johnson High';
$_SESSION['school'][]['events'] = array('basketball', 'soccer', 'football');
$_SESSION['school'][]['name'] = 'West Forsyth High';
$_SESSION['school'][]['events'] = array('theater', 'football', 'lacrosse'); 
```

然后你可以像这样遍历它们：

```
for($i = 0; $i < sizeof($_SESSION['school']); $i++) {
   echo 'School name: ' . $_SESSION['school'][$i]['name'] . '<br />';
   echo 'Events:<br />';
   foreach($_SESSION['school'][$i]['events'] as $event) {
      echo $event . '<br />';
   }  
   echo '<br />';
} 
```

这将输出：

```
School name: Johnson High
Events:
basketball
soccer
football

School name: West Forsyth High
Events:
theater
football
lacrosse 
```

我希望这就是你所要求的。抱歉，如果我不完全了解您要达到的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T16:31:34.493

好的，所以基于 danL 的帮助（非常感谢）。我已经弄清楚我需要做什么。所以在我设置的初始化脚本中，

```
$_SESSION['school'] = array(); 
```

经过进一步处理后，我创建了一个事件数组来存储信息。

```
$event = arra();
$event['name'] = 'Homecoming';
$event['date'] = 'December 15, 2012';
$event['cost'] = '18.00';
$event['people'] = array();
$event['people'] = { 'john', 'mary', 'mark', 'janice'}; 
```

最后两行可能会合并为一行。

然后我将事件数组添加到学校数组中，

```
$_SESSION['school'][] = $event; 
```

我不知道如何使用关联数组如此轻松地旋转，但感谢所有帮助。

# javascript - 如何检查传递给 javascript 函数的参数的值是否为空？

> ID：14079028
> 
> 赞同：4
> 
> 时间：2012-12-29T05:39:03.517
> 
> 标签：javascript, jquery

我有以下 javascript 代码：

```
 function changeButtonState(targetSelector, action, iconClass) {
        var $target = $(targetSelector);
        var $targetSpan = $(targetSelector + ' span');
        $targetSpan.removeClass('sprite-blank').addClass(iconClass); 
```

`$targetSpan.removeClass(..).addClass`如果 iconClass 在调用函数时有一个值，我怎样才能使它唯一起作用。我想我感到困惑的是我是否检查它是否已定义或者我是否检查它的长度是否为 0 或更多？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T05:44:57.297

如果您也检查一下，那将是最好的`undefined`。

```
function changeButtonState(targetSelector, action, iconClass) {    
    var $target = $(targetSelector);
    if (typeof iconClass !== "undefined" && iconClass) {
        var $targetSpan = $(targetSelector + ' span');
        $targetSpan.removeClass('sprite-blank').addClass(iconClass);
    }
}​ 
```

**更新** 即使这是一个非常古老的答案，它仍然是相关的。因此，我想根据@jeremy 的评论用改进的答案来更新我的答案。

```
function changeButtonState(targetSelector, action, iconClass) {    
    var $target = $(targetSelector);
    //this will not throw exception since iconClass is implicitly declared through the input parameter 
    if (iconClass) {
        var $targetSpan = $(targetSelector + ' span');
        $targetSpan.removeClass('sprite-blank').addClass(iconClass);
    }
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T05:42:31.340

这将允许用户（很可能是您）通过给它一个虚假值或真实值来指定您是否希望它处于活动状态。您可能还想使用`typeof`运算符检查它是否未定义。

```
if(iconClass) {
    $targetSpan.removeClass('sprite-blank').addClass(iconClass);
} 
```

# javascript - 如何在asp.net中的页面加载时调用javascript函数

> ID：14079029
> 
> 赞同：16
> 
> 时间：2012-12-29T05:39:03.833
> 
> 标签：javascript, asp.net

> **可能重复：**
> [页面加载后执行的 Javascript](https://stackoverflow.com/questions/807878/javascript-that-executes-after-page-load)

我在 asp.net 4.0 中有应用程序

我有 javascript 在文本框中显示客户端区域偏移量：- `

```
<script type="text/javascript">
    function GetTimeZoneOffset() {
        var d = new Date()
        var gmtOffSet = -d.getTimezoneOffset();
        var gmtHours = Math.floor(gmtOffSet / 60);
        var GMTMin = Math.abs(gmtOffSet % 60);
        var dot = ".";
        var retVal = "" + gmtHours + dot + GMTMin;
        document.getElementById('<%= offSet.ClientID%>').value = retVal;
    }

</script> 
```

`

**html标记**

```
<asp:HiddenField ID="clientDateTime" runat="server" />
<asp:HiddenField ID="offSet" runat="server" />
<asp:TextBox ID="TextBox1" runat="server"></asp:TextBox></body> 
```

如何在页面加载时调用此函数，以便在文本框中显示偏移量？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-29T05:45:21.850

在 ie On 后面的代码上调用 JavaScript 函数`Page_Load`

```
ClientScript.RegisterStartupScript(GetType(), "Javascript", "javascript:FUNCTIONNAME(); ", true); 
```

如果你`UpdatePanel`有那么试试这样

```
ScriptManager.RegisterStartupScript(GetType(), "Javascript", "javascript:FUNCTIONNAME(); ", true); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-29T05:42:03.587

```
<html>
<head>
<script type="text/javascript">
function GetTimeZoneOffset() {
    var d = new Date()
    var gmtOffSet = -d.getTimezoneOffset();
    var gmtHours = Math.floor(gmtOffSet / 60);
    var GMTMin = Math.abs(gmtOffSet % 60);
    var dot = ".";
    var retVal = "" + gmtHours + dot + GMTMin;
    document.getElementById('<%= offSet.ClientID%>').value = retVal;
}

</script>
</head>
<body onload="GetTimeZoneOffset()">
    <asp:HiddenField ID="clientDateTime" runat="server" />
    <asp:HiddenField ID="offSet" runat="server" />
    <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
</body>
</html> 
```

这里要注意的关键点是，body 有一个属性`onload`。只需给它一个函数名称，该函数将在页面加载时调用。

* * *

或者，您也可以像这样在页面加载事件上调用该函数

```
<html>
<head>
<script type="text/javascript">

window.onload = load();

function load() {
    var d = new Date()
    var gmtOffSet = -d.getTimezoneOffset();
    var gmtHours = Math.floor(gmtOffSet / 60);
    var GMTMin = Math.abs(gmtOffSet % 60);
    var dot = ".";
    var retVal = "" + gmtHours + dot + GMTMin;
    document.getElementById('<%= offSet.ClientID%>').value = retVal;
}

</script>
</head>
<body >
    <asp:HiddenField ID="clientDateTime" runat="server" />
    <asp:HiddenField ID="offSet" runat="server" />
    <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox></body>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-29T05:43:49.293

将此行放在结束脚本标记之前，从内存中写入：

```
window.onload  = GetTimeZoneOffset; 
```

我认为问题是如何在页面加载时调用 javascript 函数

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-29T05:47:48.870

在里面使用你的代码

```
 <script type="text/javascript">
     window.onload = function() {
        var d = new Date()
        var gmtOffSet = -d.getTimezoneOffset();
        var gmtHours = Math.floor(gmtOffSet / 60);
        var GMTMin = Math.abs(gmtOffSet % 60);
        var dot = ".";
        var retVal = "" + gmtHours + dot + GMTMin;
        document.getElementById('<%= offSet.ClientID%>').value = retVal;
      }
  </script> 
```

# file - azure 网站 - 文件系统存储

> ID：14079032
> 
> 赞同：4
> 
> 时间：2012-12-29T05:39:45.197
> 
> 标签：file, azure, web, system, storage

我在 Azure 上托管一个网站。我在那里上传了一个简单的 php 文件，以显示一些（通过 http）发布到我的 php 的数据。当我看到我的仪表板时，我发现文件系统存储量不断增加，原因不明。当我在晚上监视它时，它大约为 8 Mb，而在早上，它已增长到 18.8 Mb。谁能解释一下，怎么回事？

如果发生这种情况，那么我很快就会超过 1 GB 的限制。

请注意：http post 每次都会覆盖同一个文件，http post 是一个大小约为 1kb 的 json 消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T16:23:42.110

除非您在磁盘上保存一些数据（文本文件等），否则您的 Azure 文件系统存储不应增长。检查磁盘内容的最佳方法是使用 Windows WebMatrix 连接到 Azure 网站并检查整个远程内容。

请记住，实例数量的增加会影响您在共享模式下的文件存储系统。你有多少实例？如果增加/减少实例数量，文件系统存储使用量会怎样？

**编辑**

同样重要的是文件的数量、它们的大小和文件系统集群的大小。

示例：文件系统集群大小为**4K**

*   1 个文件 100K 占用**约 100K**的磁盘空间
*   100 个文件 1K 每个占用**约 400K**的磁盘空间

文件系统集群大小为**64K**

*   1 个文件 100K 占用**约 128K**的磁盘空间
*   100 个文件 1K 每个占用**约 6400K**的磁盘空间

我找不到太多关于 Windows Azure 网站磁盘集群大小的信息。但是，我相信它可能会设置为更大的磁盘集群大小以提高性能（一些证据表明更大的磁盘集群大小可以提高性能，请参阅[在 Azure 中配置磁盘以获得更高性能一](http://tk.azurewebsites.net/2012/08/)文。）

**编辑 2**

我在 Windows Azure 网站（免费）上对 200 个文件进行了快速测试，每个文件 28 个字节（所有文件的大小约为 5K）。Azure 磁盘使用情况显示**1M**。这表明 Windows Azure 网站磁盘集群大小为**4K**。

请记住，Windows Azure 网站服务仍处于预览阶段，因此磁盘集群大小可能会发生变化。

**编辑 3**

另一个可能影响磁盘空间的元素是启用诊断。 ![Windows Azure 诊断](../Images/b267610179652f3d34ef5c0483d2ce7d.png)

如果您启用了诊断，请禁用它们几个小时（一天）并检查您的磁盘空间是否仍在增长。

# macos - MAC OS Dev 中 NS 表中的数据过滤。

> ID：14079034
> 
> 赞同：0
> 
> 时间：2012-12-29T05:39:59.960
> 
> 标签：macos, cocoa

我在带有数据行的表单上有一个 NSTable，我在表单上有一个按钮，当我单击该按钮时，我调用一个委托/方法来过滤数据并重新加载数据。

使用谓词过滤，返回过滤后的数组，但网格不显示更改的数据

下面显示的是按钮单击的方法

```
- (IBAction)filterOnClick(id)sender {
NSString *age = @"62";
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"Age >= ", age];
NSArray *arr = [arrayPDContent filteredArrayUsingArrayPredicate:predicate];

[gridView reloadData];

} 
```

注意：arrayPDContent 是用于加载数据的 NSMutableArray，上面的 arr 可能不需要。

下面显示的是填充 NSMutableArray 的代码的一部分

```
NSString *sAge = [NSString stringWithUTFString:sqlite3_column ....];
NSDictionary *dictionary = [NSDictionary dictionaryWithObjectAndKeys:sAge, COLUMN_ID, nil];
[arrayPDContent addObject:dictionary]; 
```

注意：因为我无法从 MAC OS 内部登录，所以我输入了上面的部分代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T13:52:17.457

我现在正在使用**Nate Chandler上面发布的以下代码**

```
- (NSUInteger)numberOfRowsInTableView:(NSTableView *)tableView
{
    return [[arrayPDContent filteredArrayUsingPredicate:[self filter]] count];
} 
```

和

```
- (id)tableView:(NSTableView *)tableView objectValueForTableColumn:(NSTableColumn *)column row:(NSUInteger)row
{
    return [[[arrayPDContent filteredArrayUsingPredicate:[self filter]] objectAtIndex:row] objectForKey:COLUMN_ID];
} 
```

它过滤正常，但循环和彩色球不断旋转

任何人都可以提供一个易于实现的想法，而不是按照他在答案最后的建议重写代码

```
- (NSArray *)filteredArrayPDContent 
{
   .....
   .... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T06:51:29.247

你写过

```
NSArray *arr = [arrayPDContent filteredArrayUsingArrayPredicate:predicate]; 
```

由于`-filteredArrayUsingArrayPredicate:`不是方法 on`NSMutableArray`并且“filteredArrayUsingArrayPredicate”一词的唯一搜索结果是您使用相同内容打开的两个问题，我将假设这是`-filteredArrayUsingPredicate:`.

* * *

你正在使用`-[NSArray filteredArrayUsingPredicate:]`你的`NSMutableArray` `arrayPDContent`并且你期望这会发生变异`arrayPDContent`。这不是什么[`-filteredArrayUsingPredicate:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/instm/NSArray/filteredArrayUsingPredicate%3a)；这是一个方法，`NSArray`并且在所有 s 上具有相同的行为`NSArray`，包括`NSMutableArray`s。我们可以想象它的实现是这样的：

```
- (NSArray *)filteredArrayUsingPredicate:(NSPredicate *)predicate
{
    NSMutableArray *mutableRes = [NSMutableArray array];
    for (id obj in self) {
        if ([predicate evalutateWithObject:obj]) {
            [mutableRes addObject:obj];
        }
    }
    return [mutableRes copy];
} 
```

特别是，这`-filteredArrayUsingPredicate:`不会改变其目标，即使该目标是`NSMutableArray`.

立即解决您的问题的方法是写

```
arrayPDContent = [[arrayPDContent filteredArrayUsingPredicate:predicate] mutableCopy]; 
```

代替

```
NSArray *arr = [arrayPDContent filteredArrayUsingPredicate:predicate]; 
```

* * *

但是，这不是一个好的解决方案，因为这样做会破坏数据。此处过滤掉的任何对象`arrayPDContent`都将丢失。

更好的解决方案是将谓词存储为属性

```
@property (nonatomic) NSPredicate *filter; 
```

并更改您的实现[`-numberOfRowsInTableView:`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Protocols/NSTableDataSource_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/NSTableViewDataSource/numberOfRowsInTableView%3a)并[`-tableView:objectValueForTableColumn:row:`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Protocols/NSTableDataSource_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/NSTableViewDataSource/tableView%3aobjectValueForTableColumn%3arow%3a)使用新属性：

```
- (NSUInteger)numberOfRowsInTableView:(NSTableView *)tableView
{
    return [[arrayPDContent filteredArrayUsingPredicate:[self filter]] count];
} 
```

和

```
- (id)tableView:(NSTableView *)tableView objectValueForTableColumn:(NSTableColumn *)column row:(NSUInteger)row
{
    return [[[arrayPDContent filteredArrayUsingPredicate:[self filter]] objectAtIndex:row] objectForKey:COLUMN_ID];
} 
```

而不是

```
- (NSUInteger)numberOfRowsInTableView:(NSTableView *)tableView
{
    return [arrayPDContent count];
} 
```

和

```
- (id)tableView:(NSTableView *)tableView objectValueForTableColumn:(NSTableColumn *)column row:(NSUInteger)row
{
    return [[arrayPDContent objectAtIndex:row] objectForKey:COLUMN_ID];
} 
```

* * *

这也不是一个很好的解决方案，因为过滤后的数组正在重复计算。更好的解决方案是缓存数组，添加属性

```
@property (nonatomic) NSArray *filteredArrayPDContent; 
```

使用 getter 实现到您的表视图的委托

```
- (NSArray *)filteredArrayPDContent
{
    if (!_filteredArrayPDContent) {
        _filteredArrayPDContent = [arrayPDContent filteredArrayUsingPredicate:[self filter]];
    }
    return _filteredArrayPDContent;
} 
```

并设置`_filteredArrayPDContent`为`nil`无论何时`arrayPDContent`或`[self filter]`更改。

**编辑，附加**：

为了让您在任何时候或更改时参与设置`_filteredArrayPDContent`，`nil`您`arrayPDContent`可以`[self filter]`添加该方法

```
- (void)resetFilteredArrayPDContent
{
    _filteredArrayPDContent = nil;
} 
```

由于应该从您 mutate`arrayPDContent`或 change的任何位置`[self filter]`调用此方法，因此您应该在以下位置调用此方法：

`1.` 内`-filterOnClick:`：

```
- (IBAction)filterOnClick(id)sender 
{
    NSString *age = @"62";
    [self setFilter:[NSPredicate predicateWithFormat:@"Age >= ", age]];
    [self resetFilteredArrayPDContent];

    [gridView reloadData];
} 
```

`2.` 填充后`arrayPDContent`：

```
for (/*...*/) {
//...
    NSString *sAge = [NSString stringWithUTFString:sqlite3_column ....];
    NSDictionary *dictionary = [NSDictionary dictionaryWithObjectAndKeys:sAge, COLUMN_ID, nil];
    [arrayPDContent addObject:dictionary];
//...
}
[self resetFilteredArrayPDContent]; 
```

无论您是直接设置实例变量还是调用方法 [self setArrayPDContent:] （无论是使用标准括号表示法还是新的点表示法） ，您都需要调用`-resetFilteredArrayPDContent` **(A** ) 和**(B)**您进行变异（通过、、或任何其他对数组进行变异的方法）。`[self arrayPDContent]``self.arrayPDContent = //...`**`arrayPDContent``-addObject:``-removeObject:``-filterUsingPredicate:``NSMutableArray`**

 ****编辑继续，替代**：

代替`1.`上述内容，您可以更改以下的实现`-setFilter:`：

```
- (void)setFilter:(NSPredicate *)filter
{
    _filter = filter;
    [self resetFilteredArrayPDContent];
} 
```

并确保您正在调用`-setFilter:`（无论是使用括号`[self setFilter:filter]`-- -- 还是点-- --notation ），而不是直接在其他地方更改`self.filter = filter`实例变量。`_filter``-filterOnClick:``[self filter]`

代替`2.`上面，您可以添加方法

```
- (void)addArrayPDContentObject:(id)obj
{
    [arrayPDContent addObject:obj];
    [self resetFilteredArrayPDContent];
} 
```

并在填充时调用它`arrayPDContent`：

```
for (/*...*/) {
//...
    NSString *sAge = [NSString stringWithUTFString:sqlite3_column ....];
    NSDictionary *dictionary = [NSDictionary dictionaryWithObjectAndKeys:sAge, COLUMN_ID, nil];
    [self addArrayPDContentObject:dictionary];
//...
} 
```

您需要为其他类型的突变添加类似的方法`arrayPDContent`：

`arrayPDContent`如果在特定索引处插入对象，请添加

```
- (void)insertObject:(id)obj inArrayPDContentAtIndex:(NSUInteger)index
{
    [arrayPDContent insertObject:obj atIndex:index];
    [self resetFilteredArrayPDContent];
} 
```

并打电话

```
[self insertObject:obj inArrayPDContentAtIndex:index]; 
```

而不是

```
[arrayPDContent insertObject:obj atIndex:index]; 
```

如果从`arrayPDContent`特定索引处删除对象

```
- (void)removeObjectFromArrayPDContentAtIndex:(NSUInteger)index
{
    [arrayPDContent removeObjectAtIndex:index];
    [self resetFilteredArrayPDContent];
} 
```

并打电话

```
[self removeObjectFromArrayPDContentAtIndex:index]; 
```

而不是

```
[arrayPDContent removeObjectAtIndex:index]; 
```

等等。这些方法的命名约定可以[在 Apple 的文档](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/AccessorConventions.html#//apple_ref/doc/uid/20002174-178830-BAJEDEFB)中找到。

**编辑，其他选择**：

*该问题的最简单但最糟糕*的解决方案是缓存以前的版本，`arrayPDContent`并且`filter`每当计算`_filteredArrayPDContent`和检查当前版本与以前的版本。添加属性后

```
@property (nonatomic) NSArray *oldArrayPDContent;
@property (nonatomic) NSPredicate *oldFilter; 
```

改变实现`-filteredArrayPDContent`：

```
- (NSArray *)filteredArrayPDContent
{
    if (![[self oldArrayPDContent] isEqualToArray:arrayPDContent] 
        || ![[[self oldFilter] predicateFormat] isEqualToString:[[self filter] predicateFormat]]) {
        _filteredArrayPDContent = [arrayPDContent filteredArrayUsingPredicate:[self filter]];
        [self setOldFilter:[self filter]];
        [self setOldArrayPDContent:[arrayPDContent copy]];
    }
    return _filteredArrayPDContent;
} 
```

请注意， `oldArrayPDContent`设置*为*.`arrayPDContent`

我必须重申：这可能是提高性能的最快的替代品，但无论如何它都不是最时尚的。

* * *

更好的解决方案仍然是为`NSArrayController`您的内容数组添加适当的绑定（请注意，内容数组需要是不可变的才能使其工作 - 更准确地说，如果不小心，您将无法使用`-addObject:`其他`NSMutableArray`方法）和绑定你`NSTableView`的行到`NSArrayController`适当的位置。

使用这种风格，您只需`-setFilterPredicate:`调用`NSArrayController`from `-filterOnClick:`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T06:48:23.830

该`NSArray`方法`filteredArrayUsingPredicate:`创建一个新数组，该数组仅包含接收器中通过过滤器的那些对象。您正在使用局部变量来保存该数组，但是当它在您的方法`arr`结束时超出范围时会被丢弃（或至少变得不可访问） 。`filterOnClick:`大概您的数据源方法仍然引用`arrayPDContent`，因此您的表显示未过滤的数组。

如果您想更改 a 的内容以`NSMutableArray`使其仅包含与过滤器匹配的那些对象，则可以`filterUsingPredicate:`改为。（但是，请注意，这会丢弃任何其他内容——如果您想在用户清除过滤器后再次显示原始数据，则需要将其存储在其他地方。）

您可能会考虑使用一个 ivar/property 来存储“真实”数据，另一个来存储过滤结果（使用创建`filteredArrayUsingPredicate:`）；如果已设置过滤器，则让表数据源方法引用后者。**

# xcode - 尝试将 CoreGraphics 与 MacRuby 一起使用时出现运行时错误

> ID：14079038
> 
> 赞同：1
> 
> 时间：2012-12-29T05:41:12.013
> 
> 标签：xcode, macos, cocoa, core-graphics, macruby

我正在尝试在 OSX 10.8 上构建一个 MacRuby 0.12 项目。问题似乎是这一行：

```
 @context = NSGraphicsContext.currentContext.graphicsPort 
```

抛出此错误：

```
unrecognized runtime type `{CGContext=}' (TypeError) 
```

我可以`NSGraphicsContext.currentContext`很好地取消引用，但`currentContext.graphicsPort`在运行时失败。

从一些随机的谷歌搜索来看，MacRuby 似乎没有正确链接到 CoreGraphics。我尝试显式添加 ApplicationServices.framework，但这没有帮助。更令人困惑的是，在我朋友几乎相同的设置上新签出的某些项目工作得很好，所以问题可能出在我的系统配置而不是项目设置上。

有没有人遇到过这种情况，可以提供一些建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T00:34:35.293

`@jballanc`好的，经过 IRC 客户端的大量帮助后`#macruby`，我们确定这是一个特定于 Mountain Lion 的问题，原因是 CoreGraphics 在最新 XCode 中的打包方式发生了一些变化。如果您遇到它，以下是如何解决它：

1.  使用以下内容为 CoreGraphics 和 ApplicationServices 重新生成 Bridge 支持文件：

    `gen_bridge_metadata --64-bit -f /System/Library/Frameworks/CoreGraphics.framework/ -o /System/Library/Frameworks/CoreGraphics.framework/Resources/BridgeSupport/CoreGraphics.bridgesupport`

2.  在 Mountain Lion 中，您需要从 MacRuby 代码中显式加载 CoreGraphics 框架——但在 Mountain Lion 之前的版本中，这样做会崩溃。因此，您需要以下检查：

    `framework 'CoreGraphics' if (/12/ =~ `uname -r`) == 0`

3.  根据您的环境，您可能需要也可能不需要在 XCode 项目设置中显式链接 ApplicationServices.framework。

完成上述所有操作后，我和我使用 Snow Leopard 的伙伴可以共享相同的代码库，并让它对我们双方都有效。

# macos - 如何使用 Core Foundation 消息端口在运行循环源之间进行通信

> ID：14079040
> 
> 赞同：2
> 
> 时间：2012-12-29T05:41:27.400
> 
> 标签：macos, core-foundation, runloop, cfrunloop

我有以下代码，我尝试在其中创建一个消息端口，用于两个运行循环之间的通信。1个运行循环正在执行而不是pthread，另一个是主运行循环。此功能似乎在许多不同的条件下正常运行，但是，它们都不是所需的条件。

例如，传递 NULL 而不是 kCFRunLoopDefaultMode 可以工作，但不会阻塞。

**为sndData**和 MessagePortProc 回调（返回 NULL）的返回值传递 kCFRunLoopDefaultMode 和 NULL 数据也按预期工作，唯一的问题是我需要从 MessagePortProc 回调发送和返回数据，因此使用消息端口。

如果使用 kCFRunLoopDefaultMode 并且 MessagePortProc 返回值或 sndData 参数**不是 NULL** CFMessagePortSendRequest 块并且永远不会返回。MessagePortProc 被调用得很好，它只是永远不会将控制权返回到调用它的位置。没有打印错误消息，没有发生崩溃，它只是坐在那里。

我正在使用从下面概述的小字节数组创建的简单 CFDataRef 用于发送和接收数据作为测试用例。任何一个都会导致概述的行为。

```
UInt8 bytes[] = { 0, 1 };
CFDataRef sndData = CFDataCreate(kCFAllocatorDefault, bytes, 2);
SInt32 response = CFMessagePortSendRequest(remoteMsgPort, 0, sndData, 1, 1, kCFRunLoopDefaultMode, &rtnData);

CFDataRef MessagePortProc(CFMessagePortRef msgport, SInt32 msgid, CFDataRef data, void *info) {
    CFDataRef retData = NULL;

    ... Processing Done Here ...

    return retData;
}

void StartMessagePortRunLoop() {
    CFMessagePortContext context = {
        .version = 0,
        .info = NULL,
        .retain = NULL,
        .release = NULL,
        .copyDescription = NULL
    };

    localMsgPort = CFMessagePortCreateLocal(kCFAllocatorDefault, CFSTR("TextServiceMessagePort"), MessagePortProc, &context, NULL);
    if (localMsgPort != NULL) {
        sourceMsgPort = CFMessagePortCreateRunLoopSource(kCFAllocatorDefault, localMsgPort, 0);
        CFRunLoopAddSource(CFRunLoopGetMain(), sourceMsgPort, kCFRunLoopDefaultMode);
    }
}

void StopMessagePortRunLoop() {
    if (CFRunLoopContainsSource(CFRunLoopGetMain(), sourceMsgPort, kCFRunLoopDefaultMode)) {
        CFRunLoopRemoveSource(CFRunLoopGetMain(), sourceMsgPort, kCFRunLoopDefaultMode);
        CFRelease(sourceMsgPort);
    }

    CFMessagePortInvalidate(localMsgPort);
    CFRelease(localMsgPort);
} 
```

# c# - 适用于任意深度列表的函数

> ID：14079041
> 
> 赞同：3
> 
> 时间：2012-12-29T05:41:35.693
> 
> 标签：c#, list

你如何编写一个可以应用于任意深度列表的函数？我将给出两个我尝试用 C# 编写的函数类型的示例。

示例 1：`depth()`可用于任何列表的方法：

```
int depth<T>(this List<T> x) {
    if (/*x[0] is a List<of something>*/) { return x[0].depth + 1; }
    else { return 1; }
} 
```

示例 2：`implode()`可以在任意深度的字符串列表上使用的方法：

```
List<List<string>> first = /* ("a","b"),("x","y","z") */
List<string> second = /* "a","b","c" */
first.implode() /* returns a string: "(a,b),(x,y,z)" */
second.implode() /* returns a string: "a,b,c" */ 
```

但我不知道如何制作这样一个适用于 C# 中任意深度列表的函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T06:36:07.580

您在这里有两个问题；尝试在每个帖子中只问一个问题。您可以像这样计算深度函数：

```
static int Depth(Type type)
{
    int depth = 0;
    for(
        Type current = type; 
        current.IsGenericType && current.GetGenericTypeDefinition() == typeof(List<>) ;
        current = current.GetGenericArguments()[0] )
    {
        depth += 1;
    }
    return depth;
}

static int Depth<T>(this List<T> x) 
// x is unused; you could eliminate it entirely. 
{
    return Depth(typeof(List<T>));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T06:54:22.620

您可以轻松地制作一个通用方法来降低集合（或集合）。我已经包含了示例`Depth`和`Implode`方法。另请注意，`Depth`未使用该方法的参数（Eric 在他的回答中也提到过）。您可以轻松地从方法的签名中省略参数`Depth`并传递`default(List<TElement>)`给`Descend`方法。

```
/// <summary>
/// Extension methods for lists (or lists of lists)
/// </summary>
public static class ListExtensions
{
    /// <summary>
    /// Cache the generic method definition for <see cref="Descend{TElement, TResult}"/>
    /// </summary>
    private static readonly MethodInfo DescendMethod = new Func<List<object>, Func<object, object>, Func<IEnumerable<object>,object>, object>(Descend).Method.GetGenericMethodDefinition();

    /// <summary>
    /// Descends a potentially nested set of enumerables
    /// </summary>
    /// <typeparam name="TElement">The current enumerable type</typeparam>
    /// <typeparam name="TResult">The type of the result of the calling method</typeparam>
    /// <param name="set">The set of elements to work on</param>
    /// <param name="compute">The computation to perform on a single element</param>
    /// <param name="aggregate">The computation to perform on a collection of results from computations on single elements</param>
    /// <returns>The result of the aggregation of all the results from all levels of the set</returns>
    private static TResult Descend<TElement, TResult>(this List<TElement> set, Func<object, TResult> compute, Func<IEnumerable<TResult>, TResult> aggregate)
    {
        var elementType = typeof(TElement);

        if (elementType.IsGenericType && typeof(List<>) == elementType.GetGenericTypeDefinition())
        {
            var method = DescendMethod.MakeGenericMethod(elementType.GetGenericArguments()[0], typeof(TResult));

            if (ReferenceEquals(set, null))
            {
                return aggregate(new[] { (TResult)method.Invoke(null, new object[] { default(TElement), compute, aggregate }) });
            }

            var results = set.Select(item => (TResult)method.Invoke(null, new object[] { item, compute, aggregate })).ToList();

            if (results.Count == 0)
            {
                return aggregate(new[] { (TResult)method.Invoke(null, new object[] { default(TElement), compute, aggregate }) });
            }

            return aggregate(results);
        }

        return aggregate((set ?? new List<TElement>()).OfType<object>().Select(compute));
    }

    /// <summary>
    /// Walks down a set (possibly of sets) to determine its depth
    /// </summary>
    /// <typeparam name="TElement">The type of elements found in the top level set</typeparam>
    /// <param name="set">The set to walk down</param>
    /// <returns>The depth of the set</returns>
    public static int Depth<TElement>(this List<TElement> set)
    {
        return set.Descend(x => 0, x => x.FirstOrDefault() + 1);
    }

    /// <summary>
    /// Walks down a set (possibly of sets) to determine its depth
    /// </summary>
    /// <typeparam name="TElement">The type of elements found in the top level set</typeparam>
    /// <returns>The depth of the set</returns>
    public static int Depth<TElement>()
    {
        return Descend(default(List<TElement>), x => 0, x => x.FirstOrDefault() + 1);
    }

    /// <summary>
    /// Creates a string representation of a set (possibly of sets)
    /// </summary>
    /// <typeparam name="TElement">The type of elements found in the top level set</typeparam>
    /// <param name="set">The set to create the string representation of</param>
    /// <returns>A string representation of the set</returns>
    public static string Implode<TElement>(this List<TElement> set)
    {
        var result = set.Descend(x => x != null
                                          ? x.ToString()
                                          : null,
                                 x =>
                                 {
                                     var elements = x.Where(y => !ReferenceEquals(y, null)).ToList();

                                     if (elements.Count == 0)
                                     {
                                         return null;
                                     }

                                     return "(" + String.Join(",", elements) + ")";
                                 });

        if (result != null && result.Length > 2)
        {
            return result.Substring(1, result.Length - 2);
        }

        return result;
    }
}

class Program
{
    private static void Main()
    {
        var tmp2 = new List<List<List<List<string>>>>();
        var tmp = new List<List<List<string>>>
            {
                new List<List<string>>
                {
                    new List<string>
                    {
                        "1",
                        "2",
                        "3"
                    },
                    new List<string>
                    {
                        "4"
                    }
                },
                new List<List<string>>
                {
                    new List<string>
                    {
                        "5",
                        "6",
                        "7"
                    }
                }
            };

        Console.WriteLine(ListExtensions.Depth<List<List<List<List<string>>>>>());
        Console.WriteLine(tmp2.Depth());
        Console.WriteLine(tmp2.Implode());

        Console.WriteLine(tmp.Depth());
        Console.WriteLine(tmp.Implode());

        Console.ReadLine();
    } 
```

# ruby - 如何获取worker任务的值？

> ID：14079045
> 
> 赞同：0
> 
> 时间：2012-12-29T05:42:19.357
> 
> 标签：ruby, resque, sidekiq

我无法理解。如何获得 sidekiq 或 resque worker 任务的结果？例如：

```
 class HardWorker
      include Sidekiq::Worker

      def perform(a, b)
        a+b
      end
    end

HardWorker.perform_async(10,10) 
```

如何得到结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T05:56:27.580

它是异步操作，因此您可以在执行方法中更新系统（更新数据库行或其他内容）或传递自定义回调块或函数。不要忘记异步，您正在单独的线程中工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T17:10:56.213

您可以通过修改工作人员和系统其余部分之间共享的系统资源来获得结果，例如数据库或文件系统（或亚马逊上的 S3）

# html - AdBlock plus 隐藏带有“ad”字样的 id 或类的元素

> ID：14079048
> 
> 赞同：15
> 
> 时间：2012-12-29T05:42:35.533
> 
> 标签：html, css, adblock

我的站点中有两个 div，一个带有 id `ad_holder`，另一个带有 id`ad_buttons"`

在安装了 ad block plus 的 Mozilla 上测试该网站时，我注意到两个 div 都被隐藏了。经过进一步检查，我注意到 Adblock 是罪魁祸首，可能是因为 ID 名称。我还注意到 Adblock 创建（或者可能有现成的）CSS 文件，将显示设置为隐藏。

我知道我可以通过简单地更改 ID 或尝试覆盖 Adblock CSS 来解决此问题，但仍然需要知道是否还有另一种解决此问题的方法，例如一小段代码告诉 Adblock 它不是真正的广告。

div 的内容不是真正的广告，它只是包含`.jpeg`有关客户业务的信息。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-11-27T12:10:34.410

最好重命名您的类和 id。我会说，图像名称、目录也会导致意外消失。解决方案是避免使用以下词语：

*   广告
*   广告
*   副词
*   广告
*   广告
*   横幅
*   横幅

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-09T07:28:19.190

列表可以在这里找到。仔细检查一下，因为版本和软件不同，但我认为它涵盖了大部分部分。 [https://easylist.to/](https://easylist.to/)

# c# - 需要验证数据合同和数据成员

> ID：14079049
> 
> 赞同：4
> 
> 时间：2012-12-29T05:42:42.477
> 
> 标签：c#, .net, asp.net-web-api

我正在使用 web api 来构建一个 API，当接收到发布的值并将它们绑定到我的模型时，我得到一个似乎不合适的错误。

我有一个简单的模型，如下所示：

```
public class Client
{
    [ScaffoldColumn(false)]
    [JsonIgnore]
    public int ClientID { get; set; }
    [Required, StringLength(75)]
    public string Name { get; set; }
    [Required]
    public bool Active { get; set; }
} 
```

当将此模型发送到我的控制器上的 post 方法时

```
public object Post([FromBody]Client postedClient) 
```

它通过 x-www-form-urlencoded 格式化程序，但它抛出：

```
Property 'Active' on type 'CreditSearch.Api.Models.Rest.Client' is invalid. Value-typed properties marked as [Required] must also be marked with [DataMember(IsRequired=true)] to be recognized as required. Consider attributing the declaring type with [DataContract] and the property with [DataMember(IsRequired=true)]. 
```

我也试过它以 json 格式发送相同的数据，但我得到了相同的结果。我试图添加这些属性只是为了让代码正常工作，但 Resharper 和我自己找不到正确的参考。即便如此，我也不希望添加在普通 MVC 系统中验证之前不需要的多余属性。

1.  我真的需要这些属性吗？以前不需要它们。
2.  如果是这样，我需要添加哪些参考资料？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-29T08:41:57.397

之所以存在此验证，是因为对于引用类型的成员，每当反序列化该成员时，WebAPI 都可以检查该成员是否为空。对于值类型，没有空值，因此由格式化程序检查请求正文中是否存在该值。不幸的是，我们的 XML 格式化程序不支持 [Required] 属性，因此如果成员丢失，它不会引发模型状态错误。

如果您对某些格式化程序没有为缺少的值类型成员引发模型状态错误感到满意，则可以使用此行来删除验证：

```
config.Services.RemoveAll(typeof(ModelValidatorProvider), (provider) => provider is InvalidModelValidatorProvider); 
```

# authentication - 我可以使用哪些外部身份验证服务来保护我的 Jenkins 持续集成环境？

> ID：14079051
> 
> 赞同：1
> 
> 时间：2012-12-29T05:43:29.290
> 
> 标签：authentication, jenkins, security

Jenkins CI 带有许多内置的安全选项，如身份验证、SSL...等（[在此处描述](https://wiki.jenkins-ci.org/display/JENKINS/Securing+Jenkins)）。

因为 Jenkins CI 总是会发现一些安全漏洞（[比如这些](https://wiki.jenkins-ci.org/display/JENKINS/Security+Advisories)），并且由于插件错误，有时很难立即升级 Jenkins CI，有没有另一种方法可以通过加密登录身份验证轻松保护 Jenkins CI，而无需在 Jenkins 上本身？（我在 Windows 操作系统上使用 Jenkins）。

我想要的是为 Jenkins CI 的所有用户提供完全独立的身份验证服务，他们必须在他们真正能够使用 Jenkins CI 之前对其进行身份验证。你们中有人知道一些可能的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T18:15:56.937

[标准安全设置页面](https://wiki.jenkins-ci.org/display/JENKINS/Standard+Security+Setup)描述了如何配置不同的用户身份验证选项。对于 Windows，它建议安装[活动目录插件](https://wiki.jenkins-ci.org/display/JENKINS/Active+Directory+plugin)。

# android - 如何将 tesseract 中的语言偏好从英语更改为其他语言？

> ID：14079052
> 
> 赞同：0
> 
> 时间：2012-12-29T05:43:32.920
> 
> 标签：android, ocr, tesseract, training-data

[通过遵循http://gaut.am/making-an-ocr-android-app-using-tesseract/](http://gaut.am/making-an-ocr-android-app-using-tesseract/)，我能够用英语（使用 tesseract）成功地为 android 构建一个简单的 ocr 应用程序

现在它可以识别英文字符了。但是我怎样才能将语言偏好从英语更改为任何其他语言？前印度语

我已经下载了印度语言的训练数据并用英语替换并相应地修改了一些代码。但它并没有出现结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T14:19:47.660

`lang`语句中的参数`baseApi.init(DATA_PATH, lang);`指定 OCR 的语言。

# c - 在 Ubuntu 12.04 上设置 ncurses 库

> ID：14079055
> 
> 赞同：2
> 
> 时间：2012-12-29T05:43:50.843
> 
> 标签：c, linux, ncurses

我`libncurses5-dev`从软件中心安装了软件包，然后检查了头文件：

```
asheesh@ashrj-U32U:~$ ls -l /usr/include/*curses.h
-rw-r--r-- 1 root root 76291 Nov 18  2011 /usr/include/curses.h
lrwxrwxrwx 1 root root     8 Nov 18  2011 /usr/include/ncurses.h -> curses.h
-rw-r--r-- 1 root root 12180 Apr 11  2011 /usr/include/slcurses.h 
```

然后，我检查了库文件：

```
asheesh@ashrj-U32U:~$ find /usr/lib/ -name "*curses*"
....
/usr/lib/x86_64-linux-gnu/libcurses.a
/usr/lib/x86_64-linux-gnu/libncurses.so
/usr/lib/x86_64-linux-gnu/libcurses.so
/usr/lib/x86_64-linux-gnu/libncurses.a
.... 
```

不~~存在~~的。

~~我如何安装/制作库文件？为什么他们没有与标准包一起设置？~~

在简单的编译中，我得到了错误：

```
asheesh@ashrj-U32U:~$ gcc -o screen1 screen1.c -lcurses
asheesh@ashrj-U32U:~$ screen1
No command 'screen1' found, did you mean:
 Command 'screen' from package 'screen' (main)
screen1: command not found 
```

我如何使用这些库文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T06:02:02.217

这是一个（几乎不）使用 ncurses 库的完全简单的程序：

```
#include "ncurses.h"
int main(int argc, char** argv)
{
  /* Yes, I know, but you don't care about actually using ncurses for the moment */
  return 0;
} 
```

编译：

```
 gcc test.c -o test -lncurses 
```

然后运行：

```
 ./test 
```

我发现[本教程](http://invisible-island.net/ncurses/ncurses-intro.html)是一个很好的起点，并且在处理 ncurses 时，[本howto是非常有用的参考。](http://tldp.org/HOWTO/NCURSES-Programming-HOWTO/)

# python - Python 3 使用 plistlib 解析 iTunes 库 plist 文件

> ID：14079060
> 
> 赞同：1
> 
> 时间：2012-12-29T05:44:21.960
> 
> 标签：python, python-3.x, plist

我正在尝试解析一个 iTunes 媒体库文件，它是一个使用 python 和 plistlib 的 plist 文件。我写了一个简单的python脚本：

```
import plistlib

plist = plistlib.readPlist('tunes.xml')
print(plist['Tracks']) 
```

但是当我尝试运行它时，第 3 行出现错误：

```
UnicodeEncodeError: 'ascii' codec can't encode character '\xe9' in position 21970: ordinal not in range(128) 
```

我尝试加载文件，将 utf-8 编码转换为 a`bytearray`并使用`plistlib.readPlistFromBytes`，但仍然出现错误

解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T06:33:52.247

您运行它的终端会话或控制台可能未设置为 UTF-8 compatible `locale`。有关更多信息，请参见[https://wiki.archlinux.org/index.php/Locale](https://wiki.archlinux.org/index.php/Locale)。例如，在美国英语语言环境中：

```
export LANG=en_US.UTF-8 
```

# python - 减少 django 模型中的内存消耗，额外字段与额外操作

> ID：14079061
> 
> 赞同：0
> 
> 时间：2012-12-29T05:44:47.433
> 
> 标签：python, django

我想找出这两种策略中的哪一种是大多数 django 开发人员的首选。

我有一个模型，有一个字段我想通过称为“热度”来订购这些模型。热度是根据该模型中已有的字段计算的。

所以这两条路径是：

```
 1) Have a field called "hotness" which the models 
    can be easily ordered by.
 2) Have a method called "get_hotness()", which 
    returns the hotness of the instance. 
```

但是两者都有优点和缺点。

如果使用选项一，额外的字段将导致额外的内存消耗，因为模型本身会更重。

对于选项二，实际上没有办法通过 django 中的模型方法过滤查询集，因此我们可能不得不对列表进行操作：

```
models = sorted(list(Model.objects.all()), key = lamba x: x.get_hotness()) 
```

但是再次使用列表操作会增加内存消耗，而不仅仅是查询。

因此，如果那里的任何人都可以帮助解决此类问题的首选路线，那么建议会很棒！谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T05:56:04.860

您需要同时考虑数据大小和不断变化的需求。

如果热度定义在一定时期内保持不变，我会选择有热度字段，因为它简化了选择部分。

如果热度的定义很容易改变，我更喜欢 get_hotness() 方法，因为它不需要更新数据库中预先计算的热度数据。

并且数据大小是另一个问题，如果您需要按热度对整个元素进行排序，则在使用 Models.object.all() 将所有数据加载到内存时可能很容易超出内存限制。

# flashdevelop - 使用 FlashDevelop 时如何在 Starling 的 Feather 框架中制作“正常”大小的组件

> ID：14079070
> 
> 赞同：1
> 
> 时间：2012-12-29T05:46:37.057
> 
> 标签：flashdevelop, starling-framework

我目前的设置如下：

*   Flash开发
*   Starling（来自 Github 的 1.3 最新版本，由 Feathers 提出）
*   羽毛

我正在构建简单的 hello world 示例，如此处所示[，](http://wiki.starling-framework.org/feathers/getting-started)但组件看起来非常小（见下图）。

我还查看了描述该问题的常见问题解答，但我似乎无法修复工作（因为我不在 AIR 环境中工作，我只想发布到标准的 ol' SWF）。[在此处](http://wiki.starling-framework.org/feathers/faq)查看倒数第二个问题/答案

![在此处输入图像描述](../Images/60575f9c6a1518f12b36636fd283dbe0.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T06:07:11.753

我发现了这个有点隐藏的宝石（通过一些例子）：

```
DeviceCapabilities.dpi = 90*3; 
```

这可以完成工作 - 我不知道为什么正确的值似乎是我的屏幕 DPI 乘以 3，但它是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-20T01:00:45.180

你也可以这样做：

```
DeviceCapabilities.dpi *= 3; 
```

放大已设置的 DPI。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-18T12:33:44.737

这个答案给了我一个线索，在我“放大”了几次 DPI 之后，在 x3 之后没有尺寸增加。诀窍是 Feather 教程有点过时，并且可能丢失了它们是为**移动设备**设计的线索。以及 feathers.themes 中的所有资产。**MetalWorksMobileTheme**实际上是用于移动设备的。所以你应该简单地尝试一下 feathers.themes.AeonDesktopTheme，它开箱即用。

# java - 当我需要横向时，Kindle fire HD 以纵向显示我的应用程序

> ID：14079071
> 
> 赞同：0
> 
> 时间：2012-12-29T05:46:48.337
> 
> 标签：java, android

我有一个以横向模式运行的应用程序。它应该始终处于横向模式，但如果我在 Kindle Fire HD 上垂直握住它启动它，该应用程序将短暂尝试以纵向模式显示。这引起了很大的悲痛。这种简短的肖像行为不会发生在我的手机或 Kindle fire HD 模拟器上。

有没有办法防止这种情况发生？

我的清单文件有：

```
 <activity
        android:name=".SplashScreen"
        android:screenOrientation="landscape"
        android:noHistory="true"
        android:configChanges="keyboardHidden|orientation|screenSize"
    >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity
        android:label="@string/app_name"
        android:screenOrientation="landscape"
        android:configChanges="keyboardHidden|orientation|screenSize"
        android:name=".MyActivity">
    </activity> 
```

我还需要做些什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T22:46:09.297

回答我自己的问题，我能找到的唯一解决方案是使用一种解决方法：

```
public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {
    synchronized (holder) {
        Log.view("Surface changed event: width = " + width + ", height = " + height);
        if (width < height) {
            Log.view("HEY THIS IS NOT LANDSCAPE!!!!");
            return;
        }
        // do stuff
    }
} 
```

根据我的经验，每次 kindle 以小于高度的宽度启动我的“风景”应用程序时（因此，根据定义，并没有真正给我一个风景视图），我只是忽略表面并等待，它很快就给了我 aa真正的风景（翻转高度和宽度，使其成为真正的风景视图）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T07:56:44.797

[这](http://forum.unity3d.com/threads/152873-Kindle-Fire-HD-Auto-Rotation)说明了这个问题。并考虑更改仅为此设备反转的方向模式。谢谢你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T07:26:20.323

我在使用三星平板电脑时遇到了同样的定向缺陷问题，并通过以下方式解决了它

设置 > 显示 > 水平校准和；

`Calibrate`将设备放在平坦的表面上后轻按。试试看，它可能会解决这个问题。

**重要提示：** 此设置已在 Android 版本 2.3 (Ginger-Bread) 之后添加到 android

# php - 将组合框 html 与文本字段同步

> ID：14079073
> 
> 赞同：1
> 
> 时间：2012-12-29T05:47:05.080
> 
> 标签：php, combobox, sync, textfield

```
+---------+------------+
| class   | name       | 
+---------+------------+
| 10021   | John       | 
| 10027   | Alex       |  
| 10030   | Brian      |  
| 10033   | Anita      |
+---------+------------+ 
```

`textfield`当我从组合框中选择一个菜单时，我正在尝试同步我的：

```
<?
$cn=mysql_connect("localhost","root") or die("Note: " . mysql_error());
$res=mysql_select_db("psi",$cn) or die("Note: " . mysql_error());
$sql = "select name, class from list;";
$res=mysql_query($sql) or die("Note: " . mysql_error());
?>

<select name="names">

<?
while($ri = mysql_fetch_array($res))
{
                //this comboBox works well
        echo "<option value=" .$ri['name'] . ">" . $ri['name'] . "</option>";
}
echo "</select> ";

echo "Class :";

        echo "<input disabled type='text' value=".$ri['class'].">". $ri['class'] . "</input>";
?> 
```

例如，当我`Alex`从组合框中选择时，我`textfield`应该显示带有 value 的字段`10027`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T05:53:03.497

只需更改`value=" .$ri['name'] to value=" .$ri['class']`while 循环中的哪个，然后在更改选择框时使用 JQuery 更改文本框值...

**1)jQuery**

```
$('#idofselectbox').change(function() {
        $('#idoftextbox').val($('#cardtype :selected').val());
          /*OR    $('#idoftextbox').val($(this).val());  */
}); 
```

还

```
echo "<input disabled type='text' value=".$ri['class'].">". $ri['class'] . "</input>";
to
echo "<input disabled type='text' value='' >"; 
```

因为我们正在动态设置文本框值。

**2）Javascript：**

```
<select onChange="document.getElementById('textbox1').value=this.value">
    <option value=''>select a value</option>
    <option value='bhavin1'>bhavin1</option>
    <option value='bhavin2'>bhavin2</option>
        <option value='bhavin3'>bhavin3</option>
</select >

<input type='text' id='textbox1'> 
```

演示：http: [//jsfiddle.net/bhavinrana07/yjWmt/](http://jsfiddle.net/bhavinrana07/yjWmt/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T08:36:24.333

代替

```
<?
while($ri = mysql_fetch_array($res))
{
    echo "<option value=" .$ri['name'] . ">" . $ri['name'] . "</option>";
}
?> 
```

改成

```
<?
while($ri = mysql_fetch_array($res))
{
    echo "<option value=" .$ri['class'] . ">" . $ri['name'] . "</option>";
}
?> 
```

如果那我明白你想要什么

# r - R中的判别分析：如何获得阈值权重

> ID：14079076
> 
> 赞同：0
> 
> 时间：2012-12-29T05:48:12.413
> 
> 标签：r

我正在对 R 中的 2 个变量和 2 个组进行线性判别分析，即

```
ldares <- lda(dat[,2:3], grouping=dat[,1]) 
```

接下来，我想获得用于分隔组的决策界限的公式。我知道我可以输出线性判别式的系数：

```
coef(ldares) 
```

但是，鉴于决策界限由以下方式描述：

```
a*v1 + b*v2 + c = 0, 
```

如何获得*偏差*或*阈值权重*c？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T17:51:33.737

在没有给出先验权重的情况下，我相信您会发现 c=0 并且判别分数是基于设置先验的案例的分布。您可以看到，带有隐式 c=0 假设的分数构造会在 iris 数据集的预测中产生预期的分裂：

```
require(MASS)
ldares <- lda(iris[ iris[,5] %in% c("setosa", "versicolor"),2:3], 
               grouping=iris[iris[,5] %in% c("setosa", "versicolor") ,5])
scores <- with( iris[ iris[,5] %in% c("setosa", "versicolor") , 2:3],
                 cbind(Sepal.Width, Petal.Length) %*% coef(ldares) )
with( iris[ iris[,5] %in% c("setosa", "versicolor") , c(2:3, 5)], 
              plot(Sepal.Width, Petal.Length, col=c("black", "red")[1+(scores>0)])  ) 
```

![在此处输入图像描述](../Images/1a62b7c7df02b741c09e7be19e37e9e8.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-16T14:25:31.140

您应该意识到 LDA 是*中心*变量的线性组合。所以，判别函数实际上是：

```
\Sigma [w * (x - mean(x))]  >  0 
```

因此：

```
\Sigma [w * x]  >  \Sigma w * mean(x) 
```

因此阈值是 \Sigma w * mean(x)。不幸的是，LDA 没有报告整个数据集的均值（x），只有两组均值。但这使我们能够以一种相当直观的方式计算阈值。

假设结果是您的 LDA 结果，则阈值介于对两个类的质心的响应之间：

```
> `sum( result$scaling * result$means[2,] + result$scaling * result$means[1,] )/2` 
```

ps 请注意，在原始问题`w1*a1 + w2*a2 + c = 0`中，阈值为 -c

# regex - 使正则表达式字段可选，在 MVC 4 中显示为必填字段

> ID：14079081
> 
> 赞同：0
> 
> 时间：2012-12-29T05:49:08.433
> 
> 标签：regex, asp.net-mvc-4, data-annotations

我正在研究 ASP.NET MVC 4。我在模型中使用数据注释进行验证。

有一个字段名称 Mobile 并使用正则表达式进行验证，如下所示。

```
[RegularExpression(@"[0-9]{10}", ErrorMessage = "Mobile Number is Not Valid")]
public string Mobile { get; set; } 
```

根据申请要求，上述字段不是强制性的，但如果用户插入手机号码，则需要验证手机号码。

我的问题是，当我提交表单时，它显示“需要移动字段”。但是移动领域没有用`[Required]`属性装饰。那么它如何根据需要显示？

可能是什么原因？如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T17:03:04.077

在您的项目中，有一个文件夹“views”，您可能在其中使用所需的控件创建了视图。应该有类似的东西：

```
@Html.LabelFor(m => m.Mobile)<br />
@Html.TextBoxFor(m => m.Mobile)<br /> 
```

为了使正则表达式工作。如果你已经这样做了，另一个问题可能是你的模型。在视图的顶部，您应该通过以下方式添加模型：

```
@model yourModelName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T09:02:06.003

由于您没有在控制器中发布任何代码，`Index`因此假定为控制器的操作并`MyModel`假定为模型。

在您的控制器中尝试以下代码：

```
 public ActionResult Index(MyModel model)
    {
       //This will check if `Mobile` is empty and remove the Mobile from validation if the field is empty
       if (collection.Get("Mobile") == "")  //Mobile is the name of the Mobile number field in view
       {
            ModelState.Remove("Mobile");
       }
       if(ModelState.IsValid){
       //do something
       }
       else{
             return View(model);
       }
    } 
```

希望能帮助到你

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-17T12:43:20.463

您可以使用以下简单的 jQuery 轻松完成此操作。

```
//Remove Required field validation on pin and mobile number
    $(document).ready(function () {
        $("#Mobile").removeAttr("data-val");
    }); 
```

请尝试让我们知道这是否适合您。

谢谢

# javascript - jQuery中的比较

> ID：14079082
> 
> 赞同：0
> 
> 时间：2012-12-29T05:49:17.717
> 
> 标签：javascript, jquery

我有这个 jquery 函数：

```
$(function() {

    $('.submitButton').click(function(){
        $('input').each(function() {
             if ($(this).attr('min')) {
                 if ($(this).val()<$(this).attr('min')){
                      $('#'+$(this).attr('id')+"_errMess").prepend(' Your data should be more than '+$(this).attr('min'));
                  }
              }
        });
    });
}); 
```

它似乎只检查输入中输入的第一个数字。因为例如当 'min' 属性的值为 7，输入的值为 10 时，它会显示错误消息（if 条件为真！！）。尽管当我希望它提醒值时，它似乎知道真实值和总值并返回 10。

```
alert($(this).val()); 
```

你能帮我理解什么是错的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T05:52:34.427

这里的问题是将**“7”与“10”进行比较，而不是 7 与 10** [ASCII 逐个字符比较，而不是实际整数比较]。对值执行 parseInt() 然后进行比较，您应该得到所需的结果。

改变

`$(this).val()<$(this).attr('min')`

至

`parseInt($(this).val())< parseInt($(this).attr('min'))`

在你的 if 条件下

也最好将值提取到变量然后执行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T05:53:21.320

您缺少从字符串（`.val`返回字符串）到数字的转换：

```
$(function() {
    $('.submitButton').click(function() {
        $('input').each(function() {
            if ($(this).attr('min')) {
                if (Number($(this).val()) < Number($(this).attr('min'))) {
                    $('#' + $(this).attr('id') + "_errMess").prepend(' Your data should be more than ' + $(this).attr('min'));
                }
            }
        });
    });​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-29T05:57:25.063

`val()`在 JavaScript 中返回字符串和字符串“10”小于“7”。您实际需要的是数字比较，因此在比较字符串之前`parseInt`或之前转换它们。`Number`你可以查看stackoverflow上的另一个问题：[为什么字符串“11”小于字符串“3”？](https://stackoverflow.com/questions/10863092/why-is-string-11-less-than-string-3).

顺便说一句，您最好将 $(this) 保存到变量中，而不是重复调用 $ 函数。

# android - Android'隐藏导航（客户端）'

> ID：14079083
> 
> 赞同：1
> 
> 时间：2012-12-29T05:49:19.840
> 
> 标签：android, robotium, android-4.2-jelly-bean

我的应用程序上的第一次点击/触摸不起作用。在 logcat 我可以看到

```
I/InputQueue-JNI(  178): Sending finished signal for input channel 'hidden nav (client)' since it is being unregistered while an input message is still in progress.
I/InputQueue-JNI(  178): Ignoring finish signal on channel that is no longer registered. 
```

在此之后，所有触摸/点击都可以完美运行。我正在使用 Jelly Bean，应用程序是全屏的，windowSoftInputMode="stateAlwaysHidden"

谁可以帮我这个事？

# jquery - 重定向有问题

> ID：14079085
> 
> 赞同：1
> 
> 时间：2012-12-29T05:50:17.207
> 
> 标签：jquery, jquery-ui, redirect, jquery-dialog

这很奇怪，但我在浏览器中的 url 末尾有 # 时出错。

我的网址是`[http://example.com/service_offers/view/3](http://example.com/service_offers/view/3)`，但是当我有 `[http://example.com/service_offers/view/3#](http://example.com/service_offers/view/3#)`这种效果时，网址重定向。

我正在使用 jquery ui 对话框，当用户关闭对话框时，我有重定向代码到用户打开它的同一页面，但问题是当我`#`在 url 末尾时重定向失败。

firebug 中没有显示错误。我不知道为什么，谁能告诉我出了什么问题。

jQuery代码如下

```
$( "#rate_success" ).dialog({
    autoOpen: false,
    show: "slide",
    width: 500,
    modal: true,
    hide: "fold",
    closeOnEscape: false,
    close : function()
    {
        window.location = window.location.href;
        return false;
    },
    buttons:
    {   
        "Close": function()
        {
            window.location = window.location.href;
            return false;
        }
    }
});
```

我正在从此`[http://example.com/service_offers/view/3](http://example.com/service_offers/view/3)` 页面打开此对话框。现在，如果我`#`在此页面的末尾有链接，那么整个重定向都会失败。

# iphone - IAP 在一个项目中工作，但我在另一个项目中得到 Code=0 “无法连接到 iTunes Store”

> ID：14079091
> 
> 赞同：1
> 
> 时间：2012-12-29T05:51:30.180
> 
> 标签：iphone, objective-c, in-app-purchase

> **可能重复：**
> [iPhone In-App Purchase Store Kit 错误 -1003 “无法连接到 iTunes Store”</a>](https://stackoverflow.com/questions/1717700/iphone-in-app-purchase-store-kit-error-1003-cannot-connect-to-itunes-store)
> 
> [](https://stackoverflow.com/questions/1717700/iphone-in-app-purchase-store-kit-error-1003-cannot-connect-to-itunes-store)

 [我有一个项目，我在其中遇到了臭名昭著的应用内购买`Code=0 "Cannot connect to iTunes Store"`错误，我理解这是一个通用错误。我一直在努力解决这个问题——经历了无数关于这个的 SO 问题，但绝对没有运气。](https://stackoverflow.com/questions/1717700/iphone-in-app-purchase-store-kit-error-1003-cannot-connect-to-itunes-store) 

[然后我从](https://stackoverflow.com/questions/1717700/iphone-in-app-purchase-store-kit-error-1003-cannot-connect-to-itunes-store)[这里](http://xcodenoobies.blogspot.com/2012/04/implementing-inapp-purchase-in-xcode.html)下载了我的 IAP 教程项目并插入了我的产品标识符，它运行良好！

**我将代码完全**从工作教程项目复制到我的原始项目中，并且原始项目（现在使用教程中的新代码）仍然`"Cannot connect to iTunes Store"`。

两个项目具有相同的包标识符，并且两个项目都使用相同的配置文件进行签名。（是的，我在将每个项目部署到我的设备之间进行了删除和清理）。

有谁知道如何调试这个？我在这里完全不知所措。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T06:00:07.170

这已通过[此处的解决方案解决](https://stackoverflow.com/questions/1717700/iphone-in-app-purchase-store-kit-error-1003-cannot-connect-to-itunes-store/7541204#7541204)

这怎么可能是个问题？嘘！但至少这对我来说是固定的。

# spring - 如何使用 Spring MVC 3.1 获取引用 URL

> ID：14079093
> 
> 赞同：3
> 
> 时间：2012-12-29T05:52:17.173
> 
> 标签：spring, spring-mvc, spring-security

我正在建立一个有 2 页的网站。食谱列表页面、食谱详细信息页面和登录页面。用户可以通过单击食谱列表页面或食谱详细信息页面上的登录按钮来登录网站。当用户点击登录按钮时，用户将被带到登录页面。如果用户单击配方详细信息页面中的登录按钮，我想再次将用户重定向回配方详细信息页面，或者如果他们单击配方列表页面中的登录按钮，我想将用户重定向回配方列表页面。

我在 Controller 类中编写了这个方法。每当用户登录网站时都会调用此方法。我将引用 URL 存储到会话中。将此 URL 保存到会话中的目的是跟踪用户单击登录按钮的页面。并且还将用户重定向到我编写的身份验证处理程序中的该页面。

```
@RequestMapping(value = "/login", method = RequestMethod.GET)
public String openLoginPage(Model uiModel, HttpServletRequest request) {

    String referrer = request.getHeader("Referer");

    request.getSession().setAttribute("url_prior_login", referrer);

    return RECIPE_LOGIN_PAGE;
} 
```

我还创建了一个名为`SuccessHandler`.

```
public class SuccessHandler extends SavedRequestAwareAuthenticationSuccessHandler {

/*
 * (non-Javadoc)
 *
 * @see org.springframework.security.web.authentication.
 * SavedRequestAwareAuthenticationSuccessHandler
 * #onAuthenticationSuccess(javax.servlet.http.HttpServletRequest,
 * javax.servlet.http.HttpServletResponse,
 * org.springframework.security.core.Authentication)
 */
@Override
public void onAuthenticationSuccess(HttpServletRequest request, HttpServletResponse response,
        Authentication authentication) throws ServletException, IOException {

    String url = (String) request.getSession().getAttribute("url_prior_login");

    Object principal = SecurityContextHolder.getContext().getAuthentication().getPrincipal();
    if (principal != null && principal instanceof RecipeUser) {
        request.getSession().setAttribute("RecipeUser", (RecipeUser) principal);
    }

    getRedirectStrategy().sendRedirect(request, response, url);
}

} 
```

此类将在用户登录网站时将用户重定向到食谱列表页面或食谱详细信息页面。`security-context.xml`我在一个文件中注册了这个类：

```
<http use-expressions="true" auto-config="false"  entry-point-ref="authenticationEntryPoint">
            <intercept-url pattern="/login" access="permitAll" />
            <form-login login-page="/login" authentication-failure-url="/loginfail"
                    default-target-url="/login"
                    authentication-success-handler-ref="successHandler" />
            <logout logout-success-url="/" />              
    </http>

    <authentication-manager alias="authManager">
            <authentication-provider user-service-ref='myUserDetailsService' />
    </authentication-manager>

    <beans:bean id="myUserDetailsService" class="com.safe.stack.service.security.UserService">
            <beans:property name="dataSource" ref="dataSource" />
    </beans:bean>

    <beans:bean id="successHandler"
            class="com.safe.stack.service.security.SuccessHandler" />

    <beans:bean id="authenticationEntryPoint"
            class="org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint">
            <beans:property name="loginFormUrl" value="/login"/>    
    </beans:bean> 
```

这是实现我想要实现的目标的好方法吗？有一个更好的方法吗 ？我找不到任何关于如何使用 Spring MVC 的示例。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-10T17:17:19.893

这就是我在 Spring 3.1.4 中的做法

```
public void onAuthenticationSuccess(HttpServletRequest request,
            HttpServletResponse response, Authentication authentication)
            throws IOException, ServletException {

            // Supplies the default target Url that will be used if 
            // no saved request is found in the session
            setDefaultTargetUrl("/member/dashboard");
            super.onAuthenticationSuccess(request, response, authentication);
    } 
```

扩展`SavedRequestAwareAuthenticationSuccessHandler`是正确的，因为重定向是自动完成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T16:59:45.560

只需将新属性“ **always-use-default-target** ”添加到“form-login”标签并将其设置为“ **false** ”（默认情况下它设置为“true”，即使不指定它），如下所示：

```
<form-login 
  login-page="/login" authentication-failure-url="/loginfail"
  default-target-url="/login"
  authentication-success-handler-ref="successHandler" 
  always-use-default-target="false"
/> 
```

[您可以在此处](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/ns-config.html)的 Spring Security 文档中阅读有关它的更多信息，在第 3.2.3 节的末尾。

如果您添加它，您将不再需要自定义 onAuthenticationSuccess 并且您不需要在登录页面的会话中存储任何内容。

# javascript - Javascript：链接到新页面中的特定 div？

> ID：14079102
> 
> 赞同：0
> 
> 时间：2012-12-29T05:54:24.137
> 
> 标签：javascript, html, browser

如何创建一个打开新页面并滚动到该新页面中指定 div 的链接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T05:55:59.227

你甚至不需要使用 Javascript。

```
<a href="http://example.com/page#id_of_div" target="_blank">Link</a> 
```

# cas - 我可以使用 CAS 在应用程序之间共享会话数据吗？

> ID：14079103
> 
> 赞同：1
> 
> 时间：2012-12-29T05:54:26.530
> 
> 标签：cas

我是[CAS 服务器](http://www.jasig.org/cas)的新手，我发现就 php、.net 和 java 等技术而言，它是不同应用程序之间的单一登录服务器。我探索它，但即使有一些问题还不清楚。在问我的疑问之前，我先告诉我我想要达到什么目的？

我正在使用基于 gwt 的应用程序，现在对于某些功能，开发是在 php 技术中。它应该从现有的 java 应用程序中获取一些会话数据。另一种自定义 CAS 的方法，例如集成 Web 服务层以进行授权，而不是使用其现有的类似查询到 db。

疑点是：

1) 我可以使用 CAS 在 Java 和 php 应用程序之间共享会话数据吗？

2) 使用 CAS 服务器传递数据时是否存在任何安全问题？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T08:00:32.857

跨应用程序共享会话数据可以通过不链接到 CAS 的机制来解决。但是，当在 CAS 服务器中进行身份验证时，会从各种数据源检索用户数据，并且可以通过 SAML 验证和适当的配置将这些用户数据推送到客户端 CAS 应用程序。

# jquery - 通过 URL 重写重定向到 SharePoint 2010 访问 listdata.svc

> ID：14079104
> 
> 赞同：2
> 
> 时间：2012-12-29T05:54:48.847
> 
> 标签：jquery, json, sharepoint-2010, url-rewriting, svc

我正在使用 URL 重写规则访问代理服务器，重写 URL 以访问 Sharepoint 服务器。一切正常，除了我在 /_vti_bin/listdata.svc 上得到 404。我还在应用程序日志中的代理服务器上收到错误消息。

日志名称：应用程序

> 来源：System.ServiceModel 4.0.0.0
> 
> 日期：2013 年 1 月 3 日下午 12:49:20
> 
> 事件编号：3
> 
> 任务类别：网络主机
> 
> 级别：错误
> 
> 关键词：经典
> 
> 用户：IIS APPPOOL\HrSelfService
> 
> 电脑：webnet01test.bluebunny.com
> 
> 描述：
> 
> WebHost 未能处理请求。发件人信息：System.ServiceModel.Activation.HostedHttpRequestAsyncResult/9460241 异常：System.Web.HttpException (0x80004005)：服务“/_vti_bin/listdata.svc”不存在。---> **System.ServiceModel.EndpointNotFoundException：服务“/_vti_bin/listdata.svc”不存在。** 在 System.ServiceModel.ServiceHostingEnvironment.HostingManager.EnsureServiceAvailable(String normalizedVirtualPath) 在 System.ServiceModel.ServiceHostingEnvironment.EnsureServiceAvailableFast(String relativeVirtualPath) 在 System.ServiceModel.Activation.HostedHttpRequestAsyncResult.HandleRequest() 在 System.ServiceModel.Activation.HostedHttpRequestAsyncResult.BeginRequest()在 System.Runtime.AsyncResult.End[TAsyncResult](IAsyncResult 结果) 在 System.ServiceModel.Activation.HostedHttpRequestAsyncResult.End(IAsyncResult 结果)

我正在从共享点列表中填充菜单标题...

所以页面将是**domain2.com/pages/default.aspx**并且下面的代码将执行并在页面上填充一个菜单。

谢谢你提供的所有帮助。

 `$.ajax({ url: "*http:*//Domain1.com/_vti_bin/listdata.svc/MegaMenuCategories?$orderby=OrderingValue%20asc",`

```
 dataType: 'json',
        crossDomain:true, 
        async: false,
        success: function (data) {
        var menuLength = data.d.results.length;
        for (i=0; i<data.d.results.length; i++){
            var results1 = data.d.results[i].MenuTitle;
            var order = data.d.results[i].OrderingValue;

            if (order == "1")
                addMenuTitle(order, results1);   

            if (order == "2")
                addMenuTitle(order, results1);

            if (order == "3")
                addMenuTitle(order, results1);

            if (order == "4")
                addMenuTitle(order, results1);

            if (order == "5")
                addMenuTitle(order, results1);

            if (order == "6")
                addMenuTitle(order, results1);
        }
        if (menuLength == "5"){
            $("#megaRtCorner").css("left","490px");
            $("#megaMenu").css("width","475px");
        }
       }
    });</code> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T15:14:37.900

我在这个问题上与 Microsoft 合作，并弄清楚如果您通过 URL 重写代理从 SharePoint 请求 listdata.svc 服务，该请求将在代理处终止。发生的情况是代理服务器尝试处理请求并显然返回 404。

我们必须做的是删除 IIS 中的处理程序映射，以便服务请求将通过代理流向 SharePoint 服务器。

我们删除了特定 IIS 网站上的 svc-Integrated-4.0。

我们测试了 SharePoint，一切正常，现在我们可以通过 URL 重写访问 _vti_bin/listdata.svc。

# android - 如何使用android在邮件正文中发送带有图像的电子邮件html内容

> ID：14079105
> 
> 赞同：0
> 
> 时间：2012-12-29T05:55:02.280
> 
> 标签：android

如何使用android在邮件正文中发送带有图像的电子邮件html内容

我的代码：

```
 final Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND_MULTIPLE);
 emailIntent.setType("text/html");
 emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL,"to");
 emailIntent.putExtra(android.content.Intent.EXTRA_CC,"cc");
 emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,"subject");
 emailIntent.putExtra(android.content.Intent.EXTRA_TEXT,Html.fromHtml(body));

this.startActivity(Intent.createChooser(emailIntent, "Choose your email program")); 
```

但邮件正文不显示一些 html 包含和图像。

请帮我。

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T06:33:02.190

**试试这个：**

```
emailIntent.putExtra(android.content.Intent.EXTRA_TEXT,Html.fromHtml(new StringBuilder()
           .append(body).toString())); 
```

**代替 ：**

```
emailIntent.putExtra(android.content.Intent.EXTRA_TEXT,Html.fromHtml(body)); 
```

**编辑 ：**

这是我的测试，它运行良好。

```
 String body = "<html><body><h1>this is h1</h1><b>wel come to html formet</b></body></html>";

       final Intent shareIntent = new Intent(Intent.ACTION_SENDTO, Uri.parse("mailto:"));
       shareIntent.putExtra(Intent.EXTRA_SUBJECT, "The Subject");
       shareIntent.putExtra(
       Intent.EXTRA_TEXT,
       Html.fromHtml(new StringBuilder()
           .append(body).toString())
       );
       startActivity(shareIntent); 
```

谢谢。

# excel - EXCEL VBA 设置计时器以根据条件保护/锁定工作表

> ID：14079106
> 
> 赞同：0
> 
> 时间：2012-12-29T05:55:07.487
> 
> 标签：excel, vba

如标题所述，我所做的是：

```
Private Sub Workbook_Open()
    Dim ws As Worksheet
    Dim pwd As String
    pwd = "jfm" ' Put your password here
    For Each ws In Worksheets
    ws.Protect Password:=pwd, UserInterFaceOnly:=True
    Next ws
End Sub 
```

但我想要的是：

1.  创建一个计时器，比如说 5 秒
2.  检查工作表是否未保护，5 秒后保护工作表。
3.  如果工作表受到保护，则重复检查工作表是否不受保护。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T12:22:35.197

就像是：

```
Dim StartTime As Double

StartTime = Timer

Dim i As Integer
Do Until False

    'if 5 seconds have elapsed, exit loop
    If CInt(Timer - StartTime) > 5 Then Exit Do

Loop

MsgBox "Finished after " & CInt(Timer - StartTime) & " seconds" 
```

# c++ - 标准 C++ MoneyPunct / put_money 错误？

> ID：14079108
> 
> 赞同：0
> 
> 时间：2012-12-29T05:55:40.190
> 
> 标签：c++, stl, locale, manipulators

这些货币操纵者的文件似乎几乎为零。我试图通过反复试验来解决这个问题。考虑示例程序：

```
class CAccountingMoneyPunctFacet : public std::moneypunct<char>
{
protected:
    virtual string_type do_curr_symbol() const      {return ")";}
    virtual char_type do_thousands_sep() const      {return ',';}
    virtual char_type do_decimal_point() const      {return '.';}
    virtual string_type do_positive_sign() const    {return "";}
    virtual string_type do_negative_sign() const    {return "(";}
    virtual string_type do_grouping() const         {return "\03";}
    virtual int do_frac_digits() const              {return 2;}

    virtual pattern do_pos_format() const
    {
        pattern p;
        p.field[0] = value;
        p.field[1] = none;
        p.field[2] = none;
        p.field[3] = none;
        return p;
    }

    virtual pattern do_neg_format() const
    {
        pattern p;
        p.field[0] = sign;
        p.field[1] = value;
        p.field[2] = symbol;    // Very retarded C++ standard need to do this kind of a hack for negative numbers!
        p.field[3] = none;
        return p;
    }
};

int main(int argc,char* argv[])
{
    std::ostringstream oss;
    oss.imbue(std::locale(std::locale(),new CAccountingMoneyPunctFacet));
    oss <<  std::put_money(1234567.23) << std::endl;
//      << (-1234567) << " " << std::setiosflags(std::ios_base::showbase) << std::put_money(-12345678911.314159) << std::endl;
    std::cerr << oss.str();
return 0;
} 
```

这段代码的问题是它打印出 12,345.67。这是非常糟糕的，因为它不仅丢失了小数，而且现在相差了 100 倍。我查看了 MSVC++ STL 实现并且非常困惑：

```
virtual _OutIt __CLR_OR_THIS_CALL do_put(_OutIt _Dest,
    bool _Intl, ios_base& _Iosbase, _Elem _Fill,
        long double _Val) const
    {   // put long double to _Dest
    bool _Negative = false;
    if (_Val < 0)
        _Negative = true, _Val = -_Val;

    size_t _Exp;
    for (_Exp = 0; 1e35 <= _Val && _Exp < 5000; _Exp += 10)
        _Val /= 1e10;   // drop 10 zeros before decimal point

    string_type _Val2;
    char _Buf[40];

    **int _Count = _CSTD sprintf_s(_Buf, sizeof (_Buf), "%.0Lf",**
        _Val);  // convert to chars

    for (int _Off = 0; _Off < _Count; ++_Off)
        _Val2.append((typename string_type::size_type)1,
            _MAKLOCCHR(_Elem, _Buf[_Off], _Cvt));   // convert chars
    _Val2.append(_Exp,
        _MAKLOCCHR(_Elem, '0', _Cvt));  // scale by trailing zeros

    return (_Putmfld(_Dest, _Intl, _Iosbase, _Fill, _Negative, _Val2));
    } 
```

观察一个函数，它需要一个双精度，但有一个 sprintf 可以去掉所有小数。在我重新发明轮子之前，我想在这里获得 C++ 专家的意见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T07:08:25.703

这些都是 C++ 标准的直接要求：

*§22.4.6.2.2[locale.money.put.virtuals]/1*

> 参数单位被转换为宽字符序列，就好像`ct.widen(buf1, buf1 + sprintf(buf1, "%.0Lf", units), buf2)`[...] 模式是`mp.pos_format()`.

这里，`mp`是`std::moneypunct`方面，所以，继续它的要求，

*§22.4.6.3[locale.moneypunct]/3*

> 小数点后所需的位数（如果有）正是 . 返回的值`frac_digits()`。

最后， *§22.4.6.3.2[locale.moneypunct.virtuals]/6*

> `int do_frac_digits() const;`返回： 小数点分隔符后的位数（如果有）。[261]
> 
> 261) 在常见的美国语言环境中，这是 2。

这一切确实可以概括为“以美`put_money`分为单位的论据”

# java - 对于循环变量数学未计算 (z / loopLength *100)

> ID：14079109
> 
> 赞同：0
> 
> 时间：2012-12-29T05:55:41.017
> 
> 标签：java, math, for-loop

我有一个奇怪的问题，我在 for 循环中的数学直到最后一次迭代才会计算，此时它的结果是 100%。我使用的公式是一个简单的百分比公式，用于计算到目前为止已处理了多少文件数组。我的代码如下：

```
 for(int z=0;z<theFiles.size();z++) {
    ...
        System.out.println(z); // Prints out the current iteration.
        System.out.println(theFiles.size()); // Prints out the length of the array (35 in my test sample).
        double test = Math.abs(z / theFiles.size() * 100); // Calculation to find the percentage of 100 the current iteration is (this is where things seem to break). Comes out as 0 if it's set as an int also.
        System.out.println(test); // Prints out the percentage complete for this iteration.
    } 
```

任何人都知道为什么变量“test”不断出现 0.0？我记得在 JavaScript 中遇到过与此类似的问题，但我不确定如何在 Java 中修复它并且忘记了我在 JS 中是如何做到的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T05:57:58.837

这是由于整数除法。将其中一个值转换为`double`

例子：

```
double test = Math.abs((double)z / theFiles.size() * 100); 
```

根据[JLS 15.17.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.17.2)

> 整数除法向 0 舍入。也就是说，在二进制数值提升（第 5.6.2 节）之后为整数的操作数 n 和 d 产生的商是一个整数值 q，其幅值尽可能大，同时满足 |d · q|。≤ |n|。此外，当 |n| 时 q 为正 ≥ |d| 并且 n 和 d 具有相同的符号，但是当 |n| 时 q 为负 ≥ |d| n 和 d 符号相反。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T05:57:33.190

`z / theFiles.size()``z < theFiles.size()`如果两者都是 int，则将始终为零。要解决您的问题，请执行`(z *100) /theFiles.size()`或将 z 转换为 Double。

# php - 通过javascript更改3个下拉值

> ID：14079113
> 
> 赞同：1
> 
> 时间：2012-12-29T05:56:15.083
> 
> 标签：php, javascript

我正在使用下面的脚本，需要在前两个的基础上更改 3 下拉列表的值，如果我正在更改第一个下拉列表中的值，它目前显示相同的值。这是脚本---

```
<script type="text/javascript">

function changeprice(id){

    var value = id;

    if(value == ""){
         document.getElementById('price').value="";
         alert("Please select one valid word count");
         return false;
    }
    if(value == "Lessthan1000"){
        var newprice = "USD 290";
    }
    if(value == "Lessthan2000"){
        var newprice = "USD 540";
    }
    if(value == "Lessthan4000"){
        var newprice = "USD 1050";
    }
    if(value == "Lessthan6000"){
        var newprice = "USD 1900";
    }
    var eprice = newprice;

    document.getElementById('price').value = eprice;

}
</script>

<select name="sp" id="sp" class="servicecategory">
    <option value="" selected>Please Select...</option>
    <option value="Medical and Biomedical Manuscript Writing" <?php if($servicename == "Medical and Biomedical Manuscript Writing"){ echo(" selected=\"selected\""); } ?>>Medical and Biomedical Manuscript Writing</option>
    <option value="Medical and Biomedical Manuscript Rewriting" <?php if($servicename == "Medical and Biomedical Manuscript Rewriting"){ echo(" selected=\"selected\""); } ?>>Medical and Biomedical Manuscript Rewriting</option>
</select>

<select name="Word_Count" id="Word_Count" onChange="changeprice(this.value)">
    <option value="" selected>Please Select...</option>
    <option value="Lessthan1000">1 - 1000 words</option>
    <option value="Lessthan2000">1001 - 2000 words</option>
    <option value="Lessthan4000">2001 - 4000 words</option>
    <option value="Lessthan6000">4001 - 6000 words</option>
</select>

<tr>
    <td valign="top" align="right">Price:</td>
    <td width="5"></td>
    <td valign="top" align="left"><input type="text" name="price" id="price" value="" readonly="" size="20"><br /></td>
</tr> 
```

一旦我在第一个下拉列表中选择了医学和生物医学手稿重写，就需要更改该值。有什么建议现在该怎么做？它适用于医学和生物医学手稿写作——谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T06:07:57.343

这是一个可以用作`onchange`事件的函数：

HTML（注意 onchange 事件）：

```
<select name="sp" id="sp" class="servicecategory" onChange="change_select_values(this.value)"> 
```

JS：

```
function change_select_values(val){
    var sel = document.getElementById('Word_Count');
    switch(val){
        case "Medical and Biomedical Manuscript Rewriting":
            sel.options.length = 0; // clear select options
            sel.options[0] = new Option('TEXT', 'VALUE');
            sel.options[1] = new Option('TEXT', 'VALUE');
            sel.options[2] = new Option('TEXT', 'VALUE');
            sel.options[3] = new Option('TEXT', 'VALUE');
            break;
        default:        
            sel.options.length = 0;
            sel.options[0] = new Option('1 - 1000 words', 'Lessthan1000');
            sel.options[1] = new Option('1001 - 2000 words', 'Lessthan2000');
            sel.options[2] = new Option('2001 - 4000 words', 'Lessthan4000');
            sel.options[3] = new Option('4001 - 6000 words', 'Lessthan6000');
    }
    changeprice(sel.options[0].value); // change input value
} 
```

# javascript - 一个函数内多次调用另一个 JS 函数会导致错误

> ID：14079115
> 
> 赞同：0
> 
> 时间：2012-12-29T05:56:47.277
> 
> 标签：javascript, html, debugging

在 alg() 函数中取消注释 //fn 并运行代码，它将不再返回 0 导致此错误的原因是什么？我不能在另一个函数定义中多次调用一个函数吗？

```
<!DOCTYPE html>
<html>

<script>
function factorial(b)
{
factorial=1;
for(b; b > 1; b--)
{
factorial =b*factorial;
}
return factorial;
}
function alg(n, k)
{

 fk = factorial(k);
 //fn=factorial(n);

return 0;

}

</script>

<body>
<script>
write=alg(5,2);

document.write(write);
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T20:15:20.340

问题在于，`factorial`显然应该是`factorial()`函数内部的局部变量的变量没有被声明为局部变量。修复只是使用`var`关键字声明它：

```
function factorial(b)
{
    var factorial=1;
    for(b; b > 1; b--)
    {
        factorial =b*factorial;
    }
    return factorial;
} 
```

没有在函数`factorial`范围内声明为局部变量`factorial()`，`factorial`只引用`factorial()`函数对象，它具有全局范围，因为它是使用`function factorial(){...}`脚本顶层的语法声明的。

所以当里面的代码`factorial()`改变这个`factorial`引用指向一个数字值时，第二次`factorial()`调用将失败，因为全局变量`factorial`现在指向一个数字，而不是`factorial()`函数。

全局变量被广泛认为是javascript的[坏处之一。](http://shop.oreilly.com/product/9780596517748.do)这是一个很好的例子！

**更新**

For clarification, this issue is not confined to strictly global variables - it's just a general issue of function name scope. When a function is declared like `function name(){...}` that name has scope within the function and its parent. It's just that here, the parent context happens to be the global context.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T06:22:57.920

只需将“函数阶乘（b）”的变量阶乘更改为其他类似阶乘1。变量名与函数名冲突

```
 function factorial(b)
{
factorial1=1;
for(b; b > 1; b--)
{
factorial1 =b*factorial1;
}
return factorial1;
} 
```

# android - 将音频文件流式传输到 soundpool load() Android

> ID：14079117
> 
> 赞同：2
> 
> 时间：2012-12-29T05:56:53.337
> 
> 标签：android, soundpool

我想使用 SoundPool 类来创建播放速度效果。快速或慢速播放声音（1x、0.5x、2x 等）。但问题是 soundpool 只处理小文件。当我给一个大文件时。它什么都不播放。我想知道是否可以加载音乐流（我的大音频文件的一些字节）并通过 soundpool 播放。任何的想法。？？

这是我的 soundPool 播放歌曲的代码

```
AudioManager mgr = (AudioManager)getSystemService(Context.AUDIO_SERVICE);
float streamVolumeCurrent = mgr.getStreamVolume(AudioManager.STREAM_MUSIC);
float streamVolumeMax = mgr.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
float volume = streamVolumeCurrent / streamVolumeMax;  
soundID = soundPool.load(Environment.getExternalStorageDirectory()+"/cm.mp3", 1);
soundPool.play(soundID, volume, volume, 1, 0, 1.0f); 
```

我找到了 JetPlayer 和 AudioTrack 类，但我没有找到任何好的教程来处理这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T05:42:31.177

[在使用SoundPool.setOnLoadCompleteListener](http://developer.android.com/reference/android/media/SoundPool.OnLoadCompleteListener.html)播放之前，您需要检查文件是否加载成功

```
public void loadSound (String strSound, int stream) {
     boolean loaded = false;
     mSoundPool.setOnLoadCompleteListener(new OnLoadCompleteListener() {
            @Override
            public void onLoadComplete(SoundPool soundPool, int sampleId,
                    int status) {
                loaded = true;
            }
        });
    try {
          stream= mSoundPool.load(aMan.openFd(strSound), 1);
        } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
   // Is the sound loaded already?
   if (loaded) {
     mSoundPool.play(stream, streamVolume, streamVolume, 1, LOOP_1_TIME, 1f);
    }
} 
```

一个人在哪里

```
AssetFileDescriptor aMan =  getAssets(); 
```

# java - .catchall 是否用于在 smali 中为 Dalvik 字节码指示 finally 子句？

> ID：14079118
> 
> 赞同：3
> 
> 时间：2012-12-29T05:56:54.913
> 
> 标签：java, android, smali

我注意到当`finally`java代码中有子句时，总是会`.catchall`生成识别`finally`块或使用`.catchall`标签内联它，但我没有找到任何关于是否是case或更多解释的在线信息，有人知道吗这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T06:46:43.347

是的，finally 块是可能生成 .catchall 的一种情况。但是，它也可以用于其他事情。例如，也可以在同步方法的情况下生成，保证锁被释放。

catch all 处理程序记录在[dex 格式](https://s.android.com/devices/tech/dalvik/dex-format.html)规范中。具体来说，在 code_item 中包含的 encoded_catch_handler 项中。

[同样相关的是类文件规范](http://docs.oracle.com/javase/specs/jvms/se5.0/html/ClassFile.doc.html#1546)中的等效数据。请参阅异常表中的 catch_type 项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-29T06:51:11.170

我想你可能期望太高了。

您要问的是（实际上）davlik 代码生成器/翻译器的代码生成模式。根据我的经验，人们不会详细描述编译器/代码生成器在幕后所做的事情：

*   这些行为不需要指定。实际上，规范可能会通过过度约束实现来造成伤害。
*   这样的文档编写和维护成本很高。
*   这样的文件将没有多少读者来证明费用的合理性。

我建议你查看 davlik 翻译器的源代码，看看它实际上做了什么。（尝试寻找“catchall”......）

* * *

请注意，dex 格式规范为您提供了输出“语言”及其含义。这限制了 davlik 翻译器*可以*做什么，但它不会告诉您翻译器在所有情况下实际上要做什么。

# mysql - MySQL将数据从文件插入到从特定行开始的表

> ID：14079122
> 
> 赞同：0
> 
> 时间：2012-12-29T05:57:25.527
> 
> 标签：mysql, import

我有一个 SQL 表，它包含列

```
 a    b    c    d
---  ---  ---  ---
int  int  null null 
```

我想将 .txt 或 .csv 文件中的数据插入到表的列 (c,d) 中。但我**不想**从文本文件的第一行开始插入，因为我的文本（或 .csv）文件看起来像：

```
age  weight height
 12    45    151
 23    73    174 
```

我的 .csv 文件中的第一行包含标签（年龄、体重、身高）（例如）如何将我的数据导入到选定的列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T06:20:21.503

使用[LOAD DATA INFILE](http://dev.mysql.com/doc/refman/5.5/en/load-data.html)，您可以指定要跳过的行数。

```
LOAD DATA INFILE 'abc.csv'
IGNORE 1 LINES 
```

请查看下面提到的 URL 以获取详细信息。
[http://dev.mysql.com/doc/refman/5.5/en/load-data.html](http://dev.mysql.com/doc/refman/5.5/en/load-data.html)

# camera - Nexus 7 相机问题（无法选择 720p）

> ID：14079123
> 
> 赞同：1
> 
> 时间：2012-12-29T05:57:29.787
> 
> 标签：camera, recording, video-recording, nexus-7

我已经使用 720p 相机模组扎根、解锁和改装了我的 Nexus 7。如果我转到`system/etc/media_profiles.xml`，它会显示 720p 格式。

唯一的问题是，当我使用默认相机应用程序拍摄时，它以 352x288 拍摄。如何选择我希望使用的视频分辨率？

截图[在这里](http://i.stack.imgur.com/kwpdM.jpg)！

按下圆形按钮 -[链接](http://i.stack.imgur.com/m86eL.jpg)。

# python - Python。如何从列表中删除对象

> ID：14079125
> 
> 赞同：0
> 
> 时间：2012-12-29T05:57:42.923
> 
> 标签：python, list

所以我正在学习基本的游戏编程，我有这个 Bullet 课程，当然是游戏中的子弹课程。

```
bulletGroup = [i for i in bulletGroup if i.buly < screen.get_height()]
for shot in bulletGroup:
    shot.buly -=3 
```

这就是我所做的，因此我可以删除已经通过屏幕 frpm abpve/ 的项目符号但是它似乎并没有减少我的列表的长度，因此第一行代码可能无法正常工作。那么如何检查对象列表，然后删除所有我想要销毁的对象。

编辑：是的，我通过打印它们检查了对象是否在列表中，它们肯定小于屏幕高度。然而他们仍然是名单的一部分？所有这些都在游戏循环中。因此，每个滴答声都应该为那些失控的子弹更新 bulletGroup。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T06:02:34.697

您每次都在减去`3`，`buly`所以它永远不会大于`screen.get_height()`。

根据您的游戏的运作方式，您应该`buly`比较`0`：

```
bulletGroup = [i for i in bulletGroup if i.buly >= 0]
for shot in bulletGroup:
    shot.buly -= 3 
```

或者将 3 添加到`buly`：

```
bulletGroup = [i for i in bulletGroup if i.buly < screen.get_height()]
for shot in bulletGroup:
    shot.buly += 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T10:09:58.593

您可能还会发现，最好保留一个固定的项目符号池，而不是将它们添加到列表中然后删除它们。相反，给他们一个标志来“停用”它们，这样它们就不会在每一帧都更新或绘制，然后在您需要更多时“激活”一个新的。

如果您不断地创建和销毁子弹对象，您将导致大量垃圾收集并在游戏中产生周期性的暂停。固定的对象池可以防止出现问题，并让您避免一次意外创建太多。

# math - 从 sin/cos 转换中恢复角度

> ID：14079127
> 
> 赞同：28
> 
> 时间：2012-12-29T05:57:47.727
> 
> 标签：math, angle, trigonometry

我想反转`sin`/`cos`操作以恢复角度，但我不知道我应该做什么。

我已经使用`sin`和`cos`以弧度为单位来获得 x/y 向量，如下所示：

```
double angle = 90.0 * M_PI / 180.0;  // 90 deg. to rad.
double s_x = cos( angle );
double s_y = sin( angle ); 
```

给定`s_x`and `s_y`，是否有可能恢复角度？我认为`atan2`是要使用的功能，但我没有得到预期的结果。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-29T06:05:50.553

`atan2(s_y, s_x)`应该给你正确的角度。也许你颠倒了`s_x`and的顺序`s_y`。此外，您可以分别在和上直接使用`acos`和`asin`函数。`s_x``s_y`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-05-23T10:38:00.207

我使用**acos**函数从给定的 s_x cosinus 取回角度。但是因为多个角度可能导致相同的余弦（例如 cos(+60°) = cos(-60°) = 0.5），所以不可能直接从 s_x 取回角度。所以我也使用**s_y 的符号**来取回角度的符号。

```
// Java code
double angleRadian = (s_y > 0) ? Math.acos(s_x) : -Math.acos(s_x);
double angleDegrees = angleRadian * 180 / Math.PI; 
```

对于 (s_y == 0) 的特定情况，取 +acos 或 -acos 无关紧要，因为这意味着角度是 0°（+0° 或 -0° 是相同的角度）或 180°（+180 ° 或 -180° 是相同的角度）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-29T06:09:56.330

asin(s_x), acos(s_y)，也许，如果你使用的是 c。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-29T06:07:15.430

在数学中是 sin 和 cos 的逆运算。这是 arcsin 和 arccos。不知道你用的是什么编程语言。但通常如果它具有 cos 和 sin 函数，那么它可以具有反向函数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-04-08T16:59:44.153

```
double angle_from_sin_cos( double sinx, double cosx ) //result in -pi to +pi range
{
    double ang_from_cos = acos(cosx);
    double ang_from_sin = asin(sinx);
    double sin2 = sinx*sinx;
    if(sinx<0)
    {
        ang_from_cos = -ang_from_cos;
        if(cosx<0) //both negative
            ang_from_sin = -PI -ang_from_sin;
    }
    else if(cosx<0)
        ang_from_sin = PI - ang_from_sin;
    //now favor the computation coming from the
    //smaller of sinx and cosx, as the smaller
    //the input value, the smaller the error
    return (1.0-sin2)*ang_from_sin + sin2*ang_from_cos;
} 
```

# google-apps-script - 从 Google App Script 应用程序调用 Google Drive SDK

> ID：14079132
> 
> 赞同：4
> 
> 时间：2012-12-29T05:58:42.800
> 
> 标签：google-apps-script, google-drive-api, google-docs-api

我一直在这里转圈，完全把自己弄糊涂了。我需要一些帮助。

我正在（试图）为客户编写一个概念上很简单的应用程序。他想要一个带有按钮的谷歌写文档。google drive 帐户有几个文件夹，每个文件夹与几个人共享。当他在其中一个文件夹中放置一个新文件时，他希望能够打开这个写入文件，这个文件是他的电子邮件模板。[他点击按钮，系统调用 Google Drive SDK https://developers.google.com/drive/manage-changes](https://developers.google.com/drive/manage-changes)中的更改服务，获取自上次检查以来已添加的文件列表，然后拉取文件已与之共享的人员列表，并使用写入文件作为模板向该人员列表发送一封电子邮件，说明他们的文件已准备好。

所以，很容易，对吧？

我首先查看了 Google App Script API 中的内置函数。我在 DocsList 类中找到了这种方法，[https://developers.google.com/apps-script/class_docslist#find 。](https://developers.google.com/apps-script/class_docslist#find)问题是查询的描述只是说“查询字符串”。所以起初我尝试了 Drive SDK 查询参数，它们是

```
var files = DocsList.find("modifiedDate > 2012-12-20T12:00:00-08:00."); 
```

它没有用。这让我相信这是对内容的简单全文搜索。这还不够好。

这导致我尝试从 App Script 应用程序中调用 Drive SDK 方法。太好了，我们需要 OLap 2 身份验证。很容易。在脚本参考中找到对象并撞到我的墙上。

客户端 ID 和客户端密码。

你看，当我创建这实际上是一个服务帐户时，应用程序脚本中的 olap 控件不知道如何处理加密的 json 并来回传递它。然后，当我尝试创建和使用已安装的应用程序密钥时，我收到身份验证错误，因为控件再次不知道如何处理工作流程。最后，当我尝试创建 Web 应用程序密钥时，我不能，因为我没有站点主机名或重定向 URI。而且我不能使用应用程序密钥功能，因为我需要使用 OLap 2 文件。

我使用匿名 olap 有一段时间了，但在试图弄清楚代码的努力中达到了每天匿名呼叫的限制，那是行不通的，因为这家伙会在一天中不断地按下这个按钮.

我已经为此在桌子上敲了 5 个小时。我需要一些帮助，有人可以给我一个方向吗？

PS，是的，我知道我可以使用数据库控件并将整个文件列表加载到内存中，并将其与数据库中的文件列表进行比较。问题是，我们正在谈论数以万计的文件。馊主意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T00:54:23.410

我不会再使用 DocsList - DriveApp 应该是[更可靠的替代品](http://code.google.com/p/google-apps-script-issues/issues/detail?id=2115#c43)。某些命令已更改，因此使用[searchFiles](https://developers.google.com/apps-script/reference/drive/drive-app#searchFiles%28String%29)代替 find 。这应该更有效（他们甚至使用像您这样的查询作为示例）。

# iphone - UIImagePickerController 推送到我自己的 UINavigationalController 上？

> ID：14079135
> 
> 赞同：0
> 
> 时间：2012-12-29T05:59:05.687
> 
> 标签：iphone, ios, cocoa-touch, uiimagepickercontroller

我正在尝试将`UIImagePickerController`设置带到`UIImagePickerControllerSourceTypeCamera`（即当它允许用户拍照时）并自行推送它，`UINavigationalController`但它不起作用（不能将 a 推`UINavigationalController`送到另一个上`UINavigationalController`）。

我想知道，无论如何制作这个相机模块的自定义版本，就像你可以用 `UIImagePickerControllerSourceTypePhotoLibrary` `UIImagePickerController`using做的一样`ALAssets`？我只是不想将相机作为模态视图弹出，而是想自己推送它`UINavigationalController`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T06:24:23.397

您可以使用自定义相机`AVFoundation`。

有关如何使用 AVFoundation 的信息，请参阅[Sample AVCam 。](https://developer.apple.com/library/ios/#samplecode/AVCam/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010112)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T07:42:28.647

您的主要问题是它`UIImagePickerController`本身就是一个 UINavigationController，因此将它推到导航控制器上会有问题（正如您已经发现的那样）

正如 Prince 所提到的，您最好的选择是使用 AVFoundation 创建您自己的。缺点是您将（默认情况下）失去相机应用程序的不错功能，例如触摸对焦、捏合缩放等，但这些都可以自己添加。

查看[本教程](http://www.musicalgeometry.com/?p=821)，它为您提供了有关如何为此使用 AVFoundation 库的很好的解释，还向您展示了如何将叠加等内容添加到相机屏幕。然后你可以很容易地在 google/stackoverflow 上找到如何添加诸如点击聚焦之类的东西:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T06:42:21.690

我有同样的问题，但我以这种方式解决了。

**如果您**
从相机拍摄图片 1）（在两个都打开为 UINavigationcontroller）2）从图库（对于 ipad 作为 UIpopovercontroller 打开和对于 iphone 作为 nvigationcontroller 打开）

第一组委托

```
@interface camera : UIViewController <UIImagePickerControllerDelegate, UINavigationControllerDelegate,UIPopoverControllerDelegate> 
```

**从相机获取图像后**

```
if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])
        {
            UIImagePickerController *imagePicker =
            [[UIImagePickerController alloc] init];
            imagePicker.delegate = self;
            imagePicker.sourceType =
            UIImagePickerControllerSourceTypeCamera;
            imagePicker.mediaTypes = [NSArray arrayWithObjects:
                                      (NSString *) kUTTypeImage,
                                      nil];

            imagePicker.allowsEditing = YES;

            imagePicker.wantsFullScreenLayout = YES;

            [self presentViewController:imagePicker animated:YES completion:nil];
            newMedia = YES;
            iscamera = 0;
        }
        else
        {
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error to access Camera"
                                                            message:@""
                                                           delegate:nil
                                                  cancelButtonTitle:@"OK"
                                                  otherButtonTitles:nil];
            [alert show];

        } 
```

&**从图库中获取图像**

```
 if([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypePhotoLibrary])
    {
        UIImagePickerController *_picker=nil;
        if (popoverController) {
            [popoverController dismissPopoverAnimated:NO];

        }
        _picker = [[UIImagePickerController alloc] init];
        _picker.delegate = self;        
        _picker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
        _picker.wantsFullScreenLayout = YES;

        //[popoverController presentPopoverFromBarButtonItem:sender
                               //   permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];

        if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {

           [self presentViewController:_picker animated:YES completion:nil];

        } else
        {
            popoverController = [[UIPopoverController alloc] initWithContentViewController:_picker];
            [popoverController setDelegate:self];
            [popoverController presentPopoverFromRect:btn.frame
                                               inView:self.view
                             permittedArrowDirections:UIPopoverArrowDirectionLeft
                                             animated:YES];
        }
    }
    else
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error access photo library"
                                                        message:@"your device non support photo library"
                                                       delegate:nil
                                              cancelButtonTitle:@"OK"
                                              otherButtonTitles:nil];
        [alert show];

    } 
```

**您在委托方法中获得的两个结果**

```
-(void)imagePickerController:(UIImagePickerController *)picker
didFinishPickingMediaWithInfo:(NSDictionary *)info
{

} 
```

# android - Android sqlite无法识别令牌异常

> ID：14079139
> 
> 赞同：-1
> 
> 时间：2012-12-29T05:59:59.753
> 
> 标签：android, android-sqlite

我正在尝试从 sqlite 表中获取我的 android 代码中的一些数据。我得到一个无法识别的令牌异常。请帮忙。这是我的代码的相关部分：

```
private static final String APPS_CREATE =
        "create table applist (" +
                    "_id integer primary key, " +
                    "deviceid int(10) not null," +
                    "catid int(10)," +
                         ............

private static final String APPCNT_CREATE =
            "create table appcntlist (" +
                    "_id integer primary key, "+
                    "appcntid int , " +
                    "cntappid int);";
    .........................

      public Cursor fetchCntNotes(String cnt){

        Cursor appfinlist=null;

        Cursor temp=mDb.query(CNT_TABLE, new String[]{KEY_ROWID}, KEY_CNTNM + "=\"" + cnt + "\"", null, null , null, null);
        Cursor applist;

        if(temp.moveToFirst()){
            id=temp.getInt(temp.getColumnIndexOrThrow(DbAdapter.KEY_ROWID));
            Log.d("amit","countryname id: "+ id);

            applist=mDb.rawQuery("SELECT appcntid FROM appcntlist WHERE cntappid = "+id, null);
            if(applist.moveToFirst()){
                int[] cntin=new int[applist.getCount()];
                for(int i=0;i<applist.getCount();i++){
                    Log.d("amit","countryname id appid: " + applist.getInt(applist.getColumnIndexOrThrow(DbAdapter.KEY_APPCNTID)));
                    cntin[i]=applist.getInt(applist.getColumnIndexOrThrow(DbAdapter.KEY_APPCNTID));
                    Log.d("amit","countryname id cnt var: " + cntin[i]);
                    applist.moveToNext();   
                }
                appfinlist = mDb.rawQuery("SELECT * FROM applist WHERE _id IN "+cntin+")", null);
                return appfinlist;
            } 
```

这是 logcat 的相关部分

E/AndroidRuntime(6447): 由: android.database.sqlite.SQLiteException: unrecognized token: "[I@406488d0)": , 编译时: SELECT * FROM applist WHERE _id IN [I@406488d0)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T07:18:21.857

删除并重`cntin`试我认为查询无效，查询字符串末尾附加了变量。

# php - 在 PHP 中获取 Joomla jdoc？

> ID：14079141
> 
> 赞同：0
> 
> 时间：2012-12-29T06:01:02.357
> 
> 标签：php, joomla, content-management-system

我对 Joomla 很陌生，我试图`<jdoc:include />`在呈现页面之前在 PHP 中获取标签的输出。

我的菜单是这样包含的：`<jdoc:include type="modules" name="main menu" />` 我正在尝试计算`<li>`主菜单中的标签。我有这样的设置：

```
$str = <<< HTML
    <jdoc:include type="modules" name="main menu" />
HTML;
$count = substr_count($str, '<li>');
echo $count;
echo $str; 
```

菜单像正常一样回显，但`$count`始终为 0，就像尚未解析一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T06:29:05.887

`<jdoc:include type="modules" name="main menu" />`用于将模块包含在“主菜单”位置。li 标签位于 modules/mod_menu/tmpl/default.php 页面中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T15:18:47.883

```
<jdoc:include type="modules" name="main menu" /> 
```

上一行表示您的主手册包含在 Joomla 模块中。

如果要数数，则必须首先渲染模块。

方法一

```
$document   = &JFactory::getDocument();
$renderer   = $document->loadRenderer('module');
$params   = array('style'=>$style);
$result = $renderer->render(JModuleHelper::getModule('mod_main_menu'), $params); 
```

否则尝试此代码呈现

方法二

```
$module = &JModuleHelper::getModule('mod_module');
$result = JModuleHelper::renderModule($module); 
```

假设您的主菜单模块名称是 mod_main_menu。

然后试着像下面这样数。

```
$count = substr_count($result, '<li>');
echo $count; 
```

# php - 在服务器的非公开部分提供文件的下载链接

> ID：14079142
> 
> 赞同：0
> 
> 时间：2012-12-29T06:01:18.503
> 
> 标签：php, html, download, directory, private

我有许多文件存储在我网站的可公开访问部分之外的文件夹中。

例如，文件`'abcd.jpg'`存储在（就服务器而言）`'/home/private_files/'`而网站在`'/home/public_html/website.com/'`

当我去提供查看文件的链接时，我使用

`<a href="/home/private_files/abcd.jpg">Download</a>`但是这不起作用。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T06:21:31.610

如果您使用 Apache 作为服务器，您可以将其设置为 httpd.conf 中的目录的别名...

```
Alias /images/ "/home/private_files/"

<Directory "/home/private_files/">
    Options Indexes MultiViews
    AllowOverride None
    Order allow,deny
    Allow from all
</Directory>

</IfModule> 
```

你可以用这个

```
<a href="/images/abcd.jpg">Download</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T06:24:45.357

您无法访问位于 www 之外的目录。

使用[符号](http://en.wikipedia.org/wiki/Symbolic_link)链接链接到文件：

```
ln -s /home/private_files/abcd.jpg /home/www/abcd.jpg 
```

并在截止日期后删除链接（例如 rapidshare）

[或像这样](https://stackoverflow.com/questions/531292/how-to-force-download-of-a-file)使用文件下载器

# vim - vim 关闭选项卡后自动显示左侧选项卡

> ID：14079149
> 
> 赞同：6
> 
> 时间：2012-12-29T06:02:08.127
> 
> 标签：vim

在 vim 中关闭选项卡后，如何使左侧的选项卡自动显示？

关闭选项卡时的默认设置似乎显示右侧选项卡，这很烦人，因为新选项卡在当前选项卡右侧打开。因此，打开一个新选项卡并关闭它会使您进入另一个选项卡。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T11:33:41.457

已提出补丁以[添加“tabcloseleft”选项](http://groups.google.com/group/vim_dev/browse_thread/thread/ddfab45899a51de8)；它在待办事项列表中，将被集成到 Vim 中（将来某个时候，一旦 Bram 有时间处理它）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T18:17:38.440

有一个想法：虽然没有`TabClose`事件，但有`TabEnter`事件可用于实现您想要的：如果在其中一个事件上的选项卡数量少于先前记录的数量，那么显然它是由于关闭选项卡而触发的：

```
let s:prevtabnum=tabpagenr('$')
augroup TabClosed
    autocmd! TabEnter * :if tabpagenr('$')<s:prevtabnum && tabpagenr()>1
                \       |   tabprevious
                \       |endif
                \       |let s:prevtabnum=tabpagenr('$')
augroup END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T20:37:43.747

这看起来很有用：

[http://vim.wikia.com/wiki/Have_focus_on_left_tab_after_tabclose](http://vim.wikia.com/wiki/Have_focus_on_left_tab_after_tabclose)

我想我会稍微修改一下来做到这一点：

```
function! CloseSomething()
    if winnr("$") == 1 && tabpagenr("$") > 1 && tabpagenr() > 1 && tabpagenr() < tabpagenr("$")
        q | tabprev
    else
        q
    endif
endfunction
cnoremap q<CR> :call CloseSomething()<CR> 
```

所以现在`:q`会做我想做的...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-29T07:13:24.810

我对此表示怀疑; 我看不到任何方法。甚至没有您可以锁定的自动命令事件（例如`TabClose`，这将是您想要的，但它不存在）。

您将获得的最接近的可能是拥有自己的命令或映射，它们将在关闭选项卡的同时执行 normal mode `gT`。（您可能会喜欢一个功能并检测窗口的状态，从而判断您是否愿意`gT`。这需要更多的思考和调查。）

当然，您也可以使用其他选项卡解决方案进行调查；这里有一些：

*   使用拆分窗口
*   使用备用文件（请参阅`CTRL-6`）
*   使用标签堆栈在文件之间移动（`CTRL-]`移动，`CTRL-T`返回）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-09T12:06:45.923

很好的问题，挣扎了一段时间这是我的解决方案。

将以下内容添加到您的`.vimrc`文件中。请注意，我已经重新映射了命令`:q`和`:Q`

```
" declare function for moving left when closing a tab.
function! TabCloseLeft(cmd)
    if winnr('$') == 1 && tabpagenr('$') > 1 && tabpagenr() > 1 && tabpagenr() < tabpagenr('$')
        exec a:cmd | tabprevious
    else
        exec a:cmd
    endif
endfunction

" define :Q command
command Q call TabCloseLeft('q!')

" override default quit command
cabbrev q <c-r>=(getcmdtype()==':' && getcmdpos()==1 ? 'Q' : 'q')<CR> 
```

功劳`TabCloseLeft`：[https ://github.com/convissor/vim-settings/blob/master/.vimrc](https://github.com/convissor/vim-settings/blob/master/.vimrc)

# android - 检测正在按下哪些热键

> ID：14079156
> 
> 赞同：0
> 
> 时间：2012-12-29T06:04:24.017
> 
> 标签：android, hotkeys

如何检测正在按下哪个组合键？

例如，我想识别同时按下**后退**和**菜单**按钮或任何组合键。

我想根据按下的键打开我的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T06:24:29.773

正如 Daniel Lew 所说（[按下后退按钮时提示用户保存更改](https://stackoverflow.com/questions/2459848/android-prompt-user-to-save-changes-when-back-button-is-pressed)）：

你不是在正确的轨道上；你应该做的是覆盖 onKeyDown() 并监听后退键，然后覆盖默认行为：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event)  {
    if (keyCode == KeyEvent.KEYCODE_BACK && event.getRepeatCount() == 0) {
        // do something on back.
        return true;
    }

    return super.onKeyDown(keyCode, event);
} 
```

如果您只支持 Android 2.0 及更高版本，他们添加了一个 onBackPressed() 您可以改用：

```
@Override
public void onBackPressed() {
    // do something on back.
    return;
} 
```

这个答案基本上是从这篇博客文章中撕下来的：[http ://android-developers.blogspot.com/2009/12/back-and-other-hard-keys-three-stories.html](http://android-developers.blogspot.com/2009/12/back-and-other-hard-keys-three-stories.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T07:02:45.613

我做了一个简单的研究，发现了这个解决方案，它可能会奏效。您可以检测以下代码按下的菜单键。

```
public boolean onKey(View v, int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_MENU && event.getAction() == KeyEvent.ACTION_DOWN) {
            //Start a new thread here and run a while loop for listening to "back pressed" and trigger the event you want if the back button is pressed 
        } else {
            //stop the started thread above
            return false;
        }
    } 
```

希望这可以帮助你。谢谢。

# c# - 并行处理期间的值存储

> ID：14079158
> 
> 赞同：3
> 
> 时间：2012-12-29T06:04:29.873
> 
> 标签：c#, parallel-processing, task-parallel-library

我只是尝试了这个简单的程序......没什么特别的......

```
double[] a = new double[100000];
double[] b = new double[100000];

List<double> a1 = new List<double>();
List<double> b1 = new List<double>();

for (Int64 i = 0; i < 100000; i++)
{
    a[i] = i;
    a1.Add(i);
}

Parallel.For(0, 100000, delegate(Int64 i)
{
    b[i] = i;
    b1.Add(i);
}); 
```

根据此代码，100000 个数字必须分别存储在 a、b、a1、b1 中。但有时，变量 b1（由并行进程更新的列表）的数字少于 100000（保持在 90000 和 100000 之间变化）。我想知道为什么...

![奇怪的内存分配](../Images/a50561b3d00a414735cdc82dad8ba1e9.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-29T06:17:10.883

`List<T>`[如MSDN page](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)中所述，多个线程同时写入不是线程安全的。您必须同步访问（违背多线程的目的）或使用线程安全的集合。命名空间中有可用的线程安全集合`System.Collections.Concurrent`。

# image - 我想一劳永逸地为所有选定的图像添加 7 px 边框，仅在底部

> ID：14079159
> 
> 赞同：0
> 
> 时间：2012-12-29T06:04:35.980
> 
> 标签：image

我有一个图片博客，我只想在所有图片的底部添加 7 px 宽的边框（实际图片不在网络上）。任何人都知道任何批处理器？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T06:25:31.180

一个简单的 Google 搜索会返回许多结果，包括[irfanview](http://www.irfanview.com/)。免费软件工具可以选择批量处理文件夹中的所有图像，并为图像的特定一侧添加边框；请参阅[这篇 makeuseof 文章](http://www.makeuseof.com/tag/3-easy-ways-to-add-borders-to-your-photos/)（向下滚动到 irfanview），了解它在运行中的样子。

# javascript - 绑定回调参数

> ID：14079160
> 
> 赞同：0
> 
> 时间：2012-12-29T06:04:42.680
> 
> 标签：javascript, jquery

鉴于 javascript 应用程序，我有此代码来设置“状态机”：

```
 var Events = {
      bind: function(){
        if ( !this.o ) this.o = $({});
            this.o.bind(arguments[0], arguments[1])
      },

      trigger: function(){
        if ( !this.o ) this.o = $({});
            this.o.trigger(arguments[0], arguments[1])
      }
    };

    var StateMachine = function(){};
    StateMachine.fn  = StateMachine.prototype;
    $.extend(StateMachine.fn, Events);

    StateMachine.fn.add = function(controller){
      this.bind("change", function(e, current){
        console.log(current);
        if (controller == current)
          controller.activate();
        else
          controller.deactivate();
      });

      controller.active = $.proxy(function(){
        this.trigger("change", controller);
      }, this);
    };

    var con1 = {
      activate: function(){ 
        console.log("controller 1 activated");
      },
      deactivate: function(){ 
        console.log("controller 1 deactivated");
      }
    };

    var sm = new StateMachine;
    sm.add(con1);        
    con1.active(); 
```

我现在不明白的是**绑定函数中的****当前**参数来自哪里（即：）。我尝试将它记录在 firebug 控制台面板上，它似乎是 StateMachine.fn.add 函数中的控制器参数。你能告诉我这个参数是从哪里来的吗？谢谢你。**`this.bind("change", function(e, current){...}`**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T07:54:23.997

据我了解，您在此处指定了要传递给您的事件回调的第二个参数：

```
this.trigger("change", controller); 
```

jQuery 的 trigger 方法将调用所有绑定的函数，将 Event 对象作为第一个参数（总是）传递，然后，在事件名称之后传递给 .trigger() 方法的所有参数。**

# git - 如何在 Windows 7 中使用 git stats

> ID：14079165
> 
> 赞同：11
> 
> 时间：2012-12-29T06:05:27.650
> 
> 标签：git, windows-7

[https://github.com/trybeee/GitStats](https://github.com/trybeee/GitStats)

我已经拥有了所有这些，Python（>= 2.4.4）（不支持python3），Git（>= 1.5.2.4），Gnuplot（>= 4.0.0）和一个 git 存储库（裸克隆将作为好）。而且我还克隆了 gitstats 存储库。

根据教程，我应该运行 `$ ./git-stats /mnt/src/git/project ~/public_html/project`. 这看起来像是基于 Linux 系统，但我使用的是 W7。

我的存储库的路径是`C/Users/XX/.git/refs/remotes/orgin/firstbranch`.

这是我的问题。我应该在哪里运行代码？我应该在 git bash 中运行它们吗？

在我输入 `git-stats C/Users/XX/.git/refs/remotes/orgin/firstbranch public_html/project` git bash 之后。
这显示了：
`sh.exe": git-stats: command not found`

如果我转到 gitstats 的文件，打开 git bash 并运行代码，它会显示“没有这样的文件或目录”。

我不知道如何使用 gitstats。对于大多数人来说似乎太简单了，无法讨论，所以我找不到很多关于它的文章。

请帮忙！谢谢！！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-29T06:19:53.393

1.  在 Windows 上使用`python git-stats`而不仅仅是`git-stats`. 您也可以`git-stats.cmd`使用此行创建一个文件：`@call python D:\Path\To\GitStats\git-stats %*`

2.  您可以使用带有反斜杠的普通 Windows 路径。你也没有`/mnt`在 Windows 上。

3.  指向`.git`文件夹所在的存储库根目录，而不是分支。

因此，您将调用以下命令（假设您在`GitStats`目录中并且`python`在[PATH](http://www.computerhope.com/issues/ch000549.htm)上）：

```
python git-stats C:\Users\XX\ C:\Users\XX-stats 
```

![命令外壳](../Images/530115ab20f49642934d9f0ebb90b746.png)

# vhdl - PC和ROM之间的端口映射作为指令存储器

> ID：14079166
> 
> 赞同：0
> 
> 时间：2012-12-29T06:05:31.703
> 
> 标签：vhdl

设计RISC处理器的作业。我有这样的 16 位电脑

```
signal pc_din, PC, pc_rel, pc_dir, pc_inc : std_logic_vector(15 downto 0); -- pc datapath
pc_inc <= pc + 1;
pc_dir <= pc(15 downto 13) &  ADD;
pc_rel <=  pc_inc + ext(15 downto 0); 
```

用于 PC 源的多路复用器是

```
with PCSrc select
pc_din <= A when from_A,
pc_rel when from_pcrel,
pc_dir when from_pcdir,
pc_inc when from_pcinc,
(others=>'-') when others; 
```

我有 LPM 为指令存储器生成 16 x 256 单端口 ROM

```
component mem
PORT(
address : IN STD_LOGIC_VECTOR (7 DOWNTO 0);
clock   : IN STD_LOGIC ;
q   : OUT STD_LOGIC_VECTOR (15 DOWNTO 0)
);
end component; 
```

PC寄存器端口映射为

```
pc_reg: reg Port map (clk=>clk, rst=>rst, D=>pc_din, Q=>PC, we=>ldPC); 
```

现在的问题是我如何端口映射内存组件，因为 pc 是 16 位，地址是 8 位

```
rom: mem port map(address=>???, clock=>clk, q=>instr_din); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T11:13:11.457

可用内存小于 CPU 可以访问的内存空间是正常的。

这只是意味着您需要为您的处理器设计一个内存映射并实现它。是否有任何已知的限制可以提供帮助？

例如，某些处理器在复位时将 PC 设置为 16#FFFE#，而其他处理器设置为 0。这意味着您需要在内存空间的顶部或底部的程序存储器页面。

您还需要考虑该 PC 是字节地址还是字地址；以及（如果它是字节地址）它是否会是奇数（在这种情况下，您需要支持未对齐的地址）。既然您说它是 RISC CPU，我将假设您不需要支持未对齐的地址，但这应该在某处指定。

如果是字节寻址，则需要将字节地址转换为 ROM 的正确字地址 - 仅支持对齐访问，这很容易；只需删除 LSB。

当您设计好内存映射后，您可以设计一个仅在高位地址位为正确值时才选择程序 ROM 的解码器。有时可以通过将 ROM 映射到多个地址（将某些地址位视为无关紧要）来简化此解码，但这并不总是一个好主意，因为它可能会导致以后扩展内存时出现问题。

因此，假设字节寻址，仅对齐访问，并且您知道内存映射的样子：

```
ROM_Address <= PC(8 downto 1);
ROM_Enable  <= some expression involving PC(15 downto 9); 
```

你就完成了。

# applescript - 如何在 Applescript 中检测按键

> ID：14079168
> 
> 赞同：3
> 
> 时间：2012-12-29T06:05:39.213
> 
> 标签：applescript

我在 Applescript 中有几个嵌套循环，但我需要一种简单的方法让用户停止执行整个脚本。我的一个（相当低效的）想法是检查是否在最快的循环中按下了键，并在按键事件中传递错误号-128，但我找不到检测按下了什么键的方法。我已经看到有关 Jon 的命令的建议，但即使它在我的 ApplicationScripts 中，我似乎也无法正确安装它——（按下的键）不起作用。或者，是否有更好的方法来停止跨多个循环运行脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T13:27:01.650

尝试使用命令。停止脚本

# ruby-on-rails - 无论我在“文本：”中输入什么，规范都通过了吗？

> ID：14079174
> 
> 赞同：2
> 
> 时间：2012-12-29T06:06:31.427
> 
> 标签：ruby-on-rails, rspec

这是规格：

```
 describe "visit tag list page" do

    before do 
      sign_in user
      visit tag_list_path
    end

    it { page.body.should have_selector('.tag_list li a', text: post.tags.sample.name) }
    it { should have_selector('.tag_list li',             text: "(1)") }
  end 
```

我试着改变这部分：

```
 it { should have_selector('.tag_list li',             text: "(0)") } 
```

检查我的测试。令我惊讶的是，测试通过了。它不应该：

![在此处输入图像描述](../Images/c0a9b90c80e6da7edb3963a939d3b5bf.png)

我在这里错过了什么吗？

这是 HTML 输出：

![在此处输入图像描述](../Images/ae8212a21f82dce7c89d5bf697d6ab82.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T03:16:48.540

也许您需要确认您确实已登录，使用[save_and_open_page](http://rubydoc.info/gems/capybara#Debugging)方法。也可以使用它来确认测试所看到的就是您实际期望的。很常见的是，你错过了一些东西。

为此，您还需要`launchy`宝石。

# objective-c - 无法从 UINavigationBar 移除阴影

> ID：14079176
> 
> 赞同：4
> 
> 时间：2012-12-29T06:06:56.653
> 
> 标签：objective-c, ios, uinavigationbar, respondstoselector

由于某种原因，我无法在 iOS6 上从我的 UINavigationBar 中删除阴影。为什么这不起作用？我尝试了以下方法：

```
if ([[UINavigationBar appearance]respondsToSelector:@selector(setShadowImage:)]){
    [[UINavigationBar appearance]setShadowImage:[[UIImage alloc] init]];
} 
```

* * *

```
if ([[UINavigationBar class]respondsToSelector:@selector(setShadowImage:)]){
    [[UINavigationBar appearance]setShadowImage:[[UIImage alloc] init]];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T16:15:52.537

您必须在 NavigationBar 实例上完成工作......

```
if ([navigationBarInstance respondsToSelector:@selector(setShadowImage:)]){
    [navigationBarInstance setShadowImage:[[UIImage alloc] init]];
} 
```

编辑：如果您出于某种原因确实需要对*class*执行检查。这将起作用：

```
if ([UINavigationBar instancesRespondToSelector:@selector(setShadowImage:)]) {
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-04T19:08:10.900

在我阅读文档之前，这让我感到很困惑！

注意：要显示自定义阴影图像，**还必须**使用该`setBackgroundImage:forBarMetrics:`方法设置自定义背景图像。如果使用默认背景图像，则无论此属性的值如何，都将使用默认阴影图像。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-24T20:58:02.927

**迈克·波拉德**说得对。

要在 iOS 6 上移除阴影下方的阴影`UINavigationBar`，除了将阴影图像设置为空白之外，您还需要设置自定义背景图像`UIImage`。

**自定义视图控制器.m**

```
- (void)viewDidLoad
{
    [self.navigationController.navigationBar setBackgroundImage:[UIImage imageNamed:@"Background"] forBarMetrics:UIBarMetricsDefault];
    [self.navigationController.navigationBar setShadowImage:[[UIImage alloc] init]];
} 
```

在上面的示例中，“背景”将是您项目中的 PNG 图像。

# html - 为什么第二行 td 与第一行的宽度相同

> ID：14079182
> 
> 赞同：2
> 
> 时间：2012-12-29T06:07:41.053
> 
> 标签：html, css

```
<table  width="980" border="0">
    <tbody>
        <tr>
            <td width="25%">
                <img width="300"  style="overflow: hidden;" alt="" src="1.jpg">
            </td>
            <td width="75%">
                <h1>ttt</h1>
                <p>dgggg</p>
            </td>
        </tr>
        <tr>
            <td width="25%"><img  alt="" src="98.jpg"></td>
            <td width="25%"><img  alt="" src="57_998.jpg"></td>
            <td width="25%"><img  alt="" src="7_998.jpg"></td>
            <td width="25%"><img alt="" src="98.jpg"></td>
        </tr>
    </tbody>
</table> 
```

为什么第二行 td 与第一行（第一行 td）的宽度相同。width="25%" 不起作用。如何纠正它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T06:18:02.920

使用`colspan`属性来实现这一点

```
<table  width="980" border="0">
<tbody>
<tr>
    <td width="25%"><h1>A</h1></td>
    <td width="75%" colspan="3"><h1>B</h1></td>
</tr>
<tr>
    <td width="25%">1</td>
    <td width="25%">2</td>
    <td width="25%">3</td>
    <td width="25%">4</td>
</tr>
</tbody>
</table> 
```

`colspan`可以在此处找到有关该属性的良好介绍： [http ://reference.sitepoint.com/html/td/colspan](http://reference.sitepoint.com/html/td/colspan)

这是一个类似于您尝试实现的快速示例 [http://jsbin.com/egahey/1/](http://jsbin.com/egahey/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T06:41:32.720

**默认情况下**，在 html 中，一行中的列采用前一行中列的继承宽度，

为实现所需，您必须使用**col span**。

```
 <table  width="980" border="0">
           <tbody>
                 <tr>
                   <td width="25%"><img width="300"  src="1.jpg"></td>
                   <td width="75%" colspan="3"><h1>ttt</h1><p>dgggg</p></td>
                 </tr>

                 <tr>
                   <td width="25%"><img alt="" src="98.jpg"></td>
                   <td width="25%"><img alt="" src="57_998.jpg"></td>
                   <td width="25%"><img alt="" src="7_998.jpg"></td>
                   <td width="25%"><img alt="" src="98.jpg"></td>
                </tr>
          </tbody>
     </table> 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-29T06:11:58.017

将表格想象为 Excel 工作表。同一列中的所有行必须是相同的宽度（当然，您也可以像 excel 一样将它们组合起来）。至于您的问题，您需要将表格拆分为 2 个表格以实现不同的宽度：

```
<table  width="980" border="0">
<tbody>
<tr>
    <td width="25%"><img width="300"  style="overflow: hidden;" alt="" src="1.jpg"></td>
    <td width="75%"><h1>ttt</h1><p>dgggg</p></td>
</tr>
</tbody>
</table>

<table  width="980" border="0">
<tbody>
<tr>
    <td width="25%"><img  alt="" src="98.jpg"></td>
    <td width="25%"><img  alt="" src="57_998.jpg"></td>
    <td width="25%"><img  alt="" src="7_998.jpg"></td>
    <td width="25%"><img alt="" src="98.jpg"></td>
</tr>
</tbody>
</table> 
```

# ruby - Sinatra 模板中的 If 语句

> ID：14079193
> 
> 赞同：3
> 
> 时间：2012-12-29T06:09:25.797
> 
> 标签：ruby, sinatra

我只想在特定路线/页面上显示一条消息。本质上，如果在 /route 上显示一条消息。

我尝试浏览 Sinatra Docs，但找不到具体的方法。有没有一种 Ruby 方法可以使这项工作？

编辑：这是我想做的一个例子。

```
get '/' do
    erb :index
end

get '/page1' do
    erb :page1
end

get '/page2' do
    erb :page2
end

*******************

<!-- Layout File -->
<html>
<head>
    <title></title>
</head> 
<body>
    <% if this page is 'page1' do something %>
    <% else do something else %>
    <% end %>

    <%= yield %>
</body>
</html> 
```

不知道如何使用 Ruby/Sinatra 定位当前页面并将其结构化为 if 语句。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T19:20:06.510

有几种方法可以解决这个问题（顺便说一句，即使你使用了 ERB ，我也会使用[Haml ，因为它对我来说打字更少，而且显然是一种改进）。](http://haml.info/)他们中的大多数都依赖[请求助手](http://www.sinatrarb.com/intro#Accessing%20the%20Request%20Object)，大多数情况下都是这样`request.path_info`。

### 有条件的在一个视图中。

在任何视图中，不仅仅是布局：

```
%p
  - if request.path_info == "/page1"
    = "You are on page1"
  - else
    = "You are not on page1, but on #{request.path_info[1..]}"
%p= request.path_info == "/page1" ? "PAGE1!!!" : "NOT PAGE1!!!" 
```

### 带有路由的条件。

```
get "/page1" do
  # you are on page1
  message = "This is page 1"
  # you can use an instance variable if you want, 
  # but reducing scope is a best practice and very easy.
  erb :page1, :locals => { message: message }
end

get "/page2" do
  message = nil # not needed, but this is a silly example
  erb :page2, :locals => { message: message }
end

get %r{/page(\d+)} do |digits|
  # you'd never reach this with a 1 as the digit, but again, this is an example
  message = "Page 1" if digits == "1"
  erb :page_any, :locals => { message: message }
end

# page1.erb
%p= message unless message.nil? 
```

### 一个`before`街区。

```
before do
  @message = "Page1" if request.path_info == "/page1"
end

# page1.erb
%p= @message unless @message.nil? 
```

甚至更好

```
before "/page1" do
  @message = "Hello, this is page 1"
end 
```

或再次更好

```
before do
  @message = request.path_info == "/page1" ? "PAGE 1!" : "NOT PAGE 1!!"
end

# page1.erb
%p= @message 
```

I would also suggest you take a look at [Sinatra Partial](https://github.com/yb66/Sinatra-Partial) if you're looking to do this, as it's a lot easier to handle splitting up views when you have a helper ready made for the job.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T17:49:55.643

Sinatra 没有类似 Rail 的“controller#action”概念，因此您不会找到实例化当前路线的方法。在任何情况下，您都可以检查`request.path.split('/').last`以了解*当前*路线是什么。

但是，如果您只想显示某些`if request.path == "x"`内容，更好的方法是将内容放在模板上，除非该内容必须在布局中的不同位置呈现。在这种情况下，您可以使用类似 Rail 的`content_for`. 检查[sinatra-content-for](https://github.com/foca/sinatra-content-for)。

# hibernate - Grails、GPars 和数据持久性

> ID：14079194
> 
> 赞同：10
> 
> 时间：2012-12-29T06:09:33.867
> 
> 标签：hibernate, grails, gpars

有些东西没有被冲洗掉。正在发生的事情的简化示例：

```
def testDemo() {
    def person = new Person(...)
    person.save(flush: true)

    println "Number of people after save: " + Person.all.size()

    def dummyList = [1, 2, 3, 4, 5]

    GParsPool.withPool { num ->
        println "Number of people after withPool: " + Person.all.size()
        dummyList.eachParallel {
            println "Number of people after eachParallel " + Person.all.size()
            Person.withTransaction {
            ... 
```

这输出：

```
Number of people after save: 1
Number of people after withPool: 1
Number of people after eachParallel: 0 
```

我不明白我是否必须对 Session 和 Transaction 做一些事情以使数据保持不变，或者这是否是 GPars 中的错误。底层休眠级别发生了什么？

我希望最近创建的 Person 在并行闭包中可见。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-31T02:21:17.413

Gpars 是一个多线程工具，注入到您的域类中的休眠会话不是线程安全的。

尝试使用这些方法或直接调用 SessionFactory：

*   withNewSession
*   withNewTransaction

请注意，为每个线程打开一个会话可能会非常昂贵，并且可能会用新的连接淹没您的数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T05:51:00.043

我最近有一个类似的问题。据我了解，似乎线程无法绑定休眠会话，我也无法让它工作。如果您真的不需要它，请尝试编写处理 GPar 之外的持久性的代码。这就是我让它工作的方式。

# c++ - 从 Windows 上的 popen 调用确定 PID

> ID：14079198
> 
> 赞同：1
> 
> 时间：2012-12-29T06:10:11.573
> 
> 标签：c++, windows, popen

如果我在管道运行时尝试关闭管道，它会等到命令完成。有些命令永远运行，导致它无限冻结。我设法想出的唯一解决方案是确定 PID，终止进程然后关闭管道。但是我还没有找到一种安全地确定 PID 的方法。

```
FILE* pipe;
wchar_t* command;

pipe = _wpopen(command, L"r");   
... // determine the PID and TerminateProcess
pclose(pipe); 
```

那么如何从对 popen 的调用中确定 PID 呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T06:27:10.790

我认为没有直接的方法可以获取`pid`. 使用`CreateToolhelp32Snapshot`或`EnumProcesses`获取`pids`并选择您的列表。

这是一些枚举进程的[示例代码。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686701%28v=vs.85%29.aspx)[还有一些](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682623%28v=vs.85%29.aspx)。

# django - Django中的MultipleChoiceField不起作用

> ID：14079199
> 
> 赞同：0
> 
> 时间：2012-12-29T06:10:29.060
> 
> 标签：django, django-forms, django-views

我正在尝试在 Django 中使用 forms.MultipleChoiceField，form.is_valid 返回 True，但我的 views.py 中的查询返回“匹配查询不存在”。

表格.py：

```
LIST_INTERESTS = (
    ('Energy', 'Energy'),
    ('Business', 'Business'),
    ('Social', 'Social'),
    ('Mobile', 'Mobile'),
)
interests = forms.MultipleChoiceField(choices=LIST_INTERESTS, initial='Energy') 
```

视图.py：

```
temp_interests = list(form.cleaned_data['interests']),
for i in temp_interests:
    b = Interests.objects.get(val=i) 
```

...此时它会抱怨不存在与查询匹配的内容。有任何想法吗？

**奖金信息：**

当我将 temp_interests 插入 debug.html 时：

```
{% for i in temp_interests %}
    {{ i }}<br>
{% endfor %} 
```

它返回 [u'Answer 1', u'Answer 2']

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T07:53:58.567

问题出在这一行：

```
b = Interests.objects.get(val=i) 
```

在[`get()`](https://docs.djangoproject.com/en/dev/topics/db/queries/#retrieving-a-single-object-with-get)方法中。

我不确定您要在这里实现什么。但是`get()`方法的作用是使用传递的参数返回一个匹配的查询。如果它无法使用传递的参数找到任何对象，则会引发`DoesNotExist`异常，这就是您的情况。

[注意：此外，`get()`当您确定根据传递的参数只存在一个对象时，请确保使用。如果您不确定是否可以使用[`filter()`](https://docs.djangoproject.com/en/dev/topics/db/queries/#retrieving-specific-objects-with-filters)返回与给定查询匹配的所有对象列表的方法。]

您需要确保`Interest`存在一个对象，其中`val`属性等于您传递的值。因此，在上述情况下，没有`Interest`对象`val`等于`i`' 值，因此引发了异常。

要调试上述内容，您可以添加打印语句，如下所示：

```
temp_interests = list(form.cleaned_data['interests']),
for i in temp_interests:
    print i  # Debug
    b = Interests.objects.get(val=i) 
```

并检查服务器以查看`value`引发了哪个异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T15:32:13.177

如果`Interests`是模型，您可以改用 ModelMulitpleChoiceField 来尝试：

```
interests = forms.ModelMultipleChoiceField(queryset=Interests.objects.all()) 
```

这样，该`interests`字段将填充`Interests`模型中的实际对象而不是列表

# android - 如何在android中异步显示pdf文档？

> ID：14079202
> 
> 赞同：0
> 
> 时间：2012-12-29T06:10:51.490
> 
> 标签：android

我在我的 android 应用程序中显示一个 pdf 文档。为此，我遵循[如何从 Android 应用程序打开 PDF（在单独的 PDF 查看器应用程序中）](https://stackoverflow.com/questions/9995915/how-to-open-a-pdf-from-an-android-app-in-a-separate-pdf-viewer-app)链接。我的 pdf 文档大小为 30mb。所以展示它需要时间。因此我需要异步显示它。我是异步任务的新手。请给我一些关于如何异步显示pdf的想法。

![在此处输入图像描述](../Images/597f1d251a970d6e2859d11aec0d3721.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T06:23:22.813

使用 ProgressDialog 如下

```
webview.getSettings().setJavaScriptEnabled(true);
webview.getSettings().setPluginsEnabled(true);
progressDialog = ProgressDialog.show(Activity_PDF.this, "Loading",
                "Please wait", true);
    webview.setWebViewClient(new WebViewClient() {
        @Override
        public void onReceivedError(WebView view, int errorCode,
                String description, String failingUrl) {
            // TODO Auto-generated method stub
            super.onReceivedError(view, errorCode, description, failingUrl);
            Toast.makeText(Activity_PDF.this, description,
                    Toast.LENGTH_SHORT).show();
        }

        @Override
        public void onPageFinished(WebView view, String url) {
            // TODO Auto-generated method stub
            if (progressDialog.isShowing()) {
                progressDialog.dismiss();
            }

            super.onPageFinished(view, url);
        }

    });
    // used to read PDF files from docs.google.com
    webview.loadUrl("http://docs.google.com/gview?embedded=true&url="
            + stPdfLink); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T06:19:29.553

首先，打开这个pdf的不是你。你用其他应用打开它，所以如果渲染速度低，你唯一能做的就是选择其他应用打开它。这不是您的责任，在您的情况下，它根本与异步任务无关。我认为首先阅读有关[Android 基础知识](https://developer.android.com/guide/components/fundamentals.html)并获得有关 Android 框架及其工作原理的更多知识对您很有用。

# jenkins - Jenkins - 是否需要有一个存储库来运行多配置项目

> ID：14079203
> 
> 赞同：1
> 
> 时间：2012-12-29T06:11:39.633
> 
> 标签：jenkins

我是詹金斯的新手。我正在尝试将 Jenkins 配置为在多个浏览器上运行我的 Selenium 测试。所以我认为多配置项目将是一个最佳选择。我正在使用 Sauce labs 进行跨浏览器测试。

我的 selenium 源代码在我的本地系统目录中。我没有将相同的内容上传到任何存储库。我已经配置了一个带有指向我本地源代码的自定义工作区的多配置项目，并在源代码管理部分中选择了“无”。

现在，当我构建作业时，作业会为每个浏览器组合创建工作区。例如：`<project workspace>\SELENIUM_DRIVER\Windows 2003firefox16`和`<project workspace>\SELENIUM_DRIVER\Windows 2003internet explorer8`。但是文件不会自动复制到每个工作区。我需要将我的文件手动复制到这些目录中才能正常工作。

是否有必要拥有像 SVN、CVS 或 Git 这样的存储库才能正常工作。或者有没有办法从我的本地系统运行构建？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T10:47:52.627

为此，不需要存储库，
但您确实需要有一些好的方法来访问您的*工件*和*selenium 代码*。

建议您将*工件*放在共享驱动器上作为初步步骤，
并将您的*selenium 源代码*放在共享驱动器上，作为一种实践 -
这将允许您从多台机器运行多个测试。

干杯

# html - 用于搜索目的：HTML 文件或将内容存储在数据库中？

> ID：14079206
> 
> 赞同：-5
> 
> 时间：2012-12-29T06:12:13.493
> 
> 标签：html, sql, search, full-text-search, search-engine

如果内容存储在 html 文件或 SQL 等数据库中，搜索网页内容会更快吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T06:15:51.767

取决于您要如何搜索它。我更愿意将其存储到数据库中并实现全文搜索。

# ant - 如何使用 ant ivy 检索具有特定模式的工件

> ID：14079212
> 
> 赞同：1
> 
> 时间：2012-12-29T06:13:24.087
> 
> 标签：ant, ivy

我有一个巨大的依赖关系，它导出了许多依赖关系。我希望将我的检索限制在其中几个。模式是 [artifact]-[revision].[ext]。

我如何在 ivy:retrieve 任务调用中指定这个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T14:35:21.227

ivy 中的配置是用于控制 ivy 中的依赖组的机制。

一旦在您的 ivy 文件中设置了这些配置，就可以轻松地在 ANT 构建中检索它们，如下所示：

```
<ivy:retrieve pattern="lib/[artifact].[ext]" conf="my_custom_conf"/> 
```

也许您可以提供更多关于您想要实现的目标的详细信息，并且有人可以演示如何为此目的设置配置。（我还建议搜索 Stackoverflow[常春藤](https://stackoverflow.com/questions/tagged/ivy?sort=votes)标签，以获取其他示例）

# 更新

如果一个 ivy 模块发布了多个工件，则可以在 ivy 文件中限制依赖项，如下所示：

## 常春藤.xml

```
<configurations>
    ..
    <conf name="archives" description="Configuration containing only archive files"/>
</configurations>

<dependencies>
    ..
    <dependency org="acme" name="foo" rev="2.0" conf="archives->default">
        <artifact name="a1" type="tar"/>
        <artifact name="an" type="zip"/>
    </dependency>
</dependencies> 
```

**或者..**

查看远程模块的 ivy.xml。这些文件可能已经有一个配置设置，在这种情况下它会变得更简单（因为它是预先设置的）

```
<dependency org="acme" name="foo" rev="2.0" conf="archives->remotearchives"/> 
```

依赖项的“conf”部分是将远程配置映射到本地配置。

# javascript - 缩放选项卡上的图像

> ID：14079214
> 
> 赞同：0
> 
> 时间：2012-12-29T06:13:51.343
> 
> 标签：javascript, jquery, html, zooming

有没有办法同时在不同的选项卡中缩放图像。我试图在 tabs 上制作缩放效果。

在[这里](http://jsbin.com/itekek/58)

我使用了**getElementById**函数。尽管使用它，我必须同时缩放所有图像。

我尝试使用**getElementsByClassName**但它甚至无法正常工作。

有没有办法通过在单击该选项卡时将 ID 动态设置为该图片标签来应用此功能？（在这种情况下可以单独缩放）

在这里，我还尝试在缩放功能上传递 ID，但在缩放不同的选项卡[BIN时也有一些错误](http://jsbin.com/itekek/54/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T06:23:35.803

您需要将图像存储在具有不同 ID 的 div 中。每页只能有一个具有相同 ID 的元素。我会添加一个函数来确定您在哪个选项卡上，如下所示：

```
var currentTab = 0;
function switchTab(tabID) {
  currentTab = tabID;
  // code to load the tab's contents here
}

function zoom() {
  var img = document.getElementById("pic"+currentTab);
  // the rest of the zoom code goes here
}

<ul>
  <li onclick="switchTab(0);">Tab 1</li>
  <li onclick="switchTab(1);">Tab 2</li>
</ul>

<img id="pic0" src="firstpic.jpg" />
<img id="pic1" src="secondpic.jpg" /> 
```

如果你这样做，每个图像都应该正确缩放，因为现在只有第一个有效。只需跟上您正在使用的图像并为他们提供唯一的 ID，它应该可以正常工作。

这是我制作的演示此功能的页面的链接：http: [//mdl.fm/f/zoom.html](http://mdl.fm/f/zoom.html)

# sql - 使用行数不起作用的表中有多少可用数据

> ID：14079215
> 
> 赞同：-1
> 
> 时间：2012-12-29T06:15:05.227
> 
> 标签：sql, sqlite, count, ios4

我想在应用程序的加载时检查数据是否可用，`table`因此我在我的第一个文件的视图负载上使用以下代码（如果可用）然后移动到其他文件，否则保留相同但它不能给出完美的结果主要是行`count`不工作

```
 NSString *dbPath;
    NSString *docsDir;
    NSArray *dirPath;
    int count=0;

    dirPath=NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

    docsDir=[dirPath objectAtIndex:0];

    dbPath=[[NSString alloc] initWithString:[docsDir stringByAppendingPathComponent:@"TimerDataBaseMain.db"]];

    NSFileManager *fileManager=[NSFileManager defaultManager];

    if([fileManager fileExistsAtPath: dbPath] == YES)
    {
        const char *databsPath=[dbPath UTF8String];

        NSLog(@"from created;");
        if(sqlite3_open(databsPath,&sqlDatabase) == SQLITE_OK)
        {
            const char *query="SELECT COUNT(*) FROM PRJDATA";
            sqlite3_stmt *statement;
            if (sqlite3_prepare_v2(sqlDatabase, query, -1, &statement, NULL)==SQLITE_OK) {
                while(sqlite3_step(statement)==SQLITE_ROW)
                {
                    count++;
                    NSLog(@"from count");
                }
                NSLog(@"from row count");
            }
            sqlite3_finalize(statement);
        }
        sqlite3_close(sqlDatabase);
    }

        if (count>0) {
        ListEventCreated *listObject=[[ListEventCreated alloc] initWithNibName:@"ListEventCreated" bundle:[NSBundle mainBundle]];
        listObject.title=@"List of event";
        NSLog(@"from if condition");
            NSLog(@"%i",count);
        [self.navigationController pushViewController:listObject animated:YES];
        [listObject release];
        listObject=nil;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T06:25:58.267

我相信，这是**错误的**

```
SELECT COUNT(*) PRJDATA 
```

你应该使用这个

```
SELECT COUNT(*) FROM PRJDATA 
```

# ios - iOS - 在选项卡更改上运行代码

> ID：14079218
> 
> 赞同：0
> 
> 时间：2012-12-29T06:15:18.630
> 
> 标签：ios, cocoa-touch, uiviewcontroller, uitabbarcontroller

我有多个选项卡，如果不停止，每个选项卡都可能会干扰其他选项卡上的内容。如果用户在转到下一个选项卡之前忘记关闭一个选项卡中的功能，我想知道当用户单击 UITabBarController 中的另一个选项卡时是否有办法从 UIViewController 运行代码块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T06:43:34.103

您应该`UITabBarControllerDelegate`在可以访问您的东西的业务逻辑的视图控制器中实现协议。因此，当用户尝试单击另一个选项卡时，您可以做一些事情。

您很可能需要实施：

```
 – tabBarController:shouldSelectViewController:
 – tabBarController:didSelectViewController: 
```

请参阅UITabBarControllerDelegate 的[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITabBarControllerDelegate_Protocol/Reference/Reference.html)。

# c# - C# 正则表达式替换表达式

> ID：14079223
> 
> 赞同：-4
> 
> 时间：2012-12-29T06:16:39.167
> 
> 标签：c#, .net, regex, string, replace

我有一个这样的字符串：“编程是我的热情，我喜欢程序”

现在我需要使用 Regex Replace 来更改它。每个包含表达式“程序”的单词都应切换为：

`<a href="http://codeguru.pl" title="programming">programming</a>`

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T06:24:07.463

[String.Replace](http://msdn.microsoft.com/en-us/library/system.string.replace.aspx)是最好的选择。

```
var input = "programming is my passion, I love programs";
var replacefrom = "program";
var tobereplaced =@"<a href=""http://codeguru.pl"" title=""programming"">programming</a> is my passion";

var output = input.Replace(replacefrom, tobereplaced) 
```

[正则表达式替换](http://msdn.microsoft.com/en-us/library/xwewhkd1.aspx)

```
Regex regex = new Regex("program");
var outputRegex = regex.Replace(input, tobereplaced); // input, tobereplaced from above snipped 
```

**输出**

```
<a href="http://codeguru.pl" title="programming">programming</a> is my passionming is my passion, I love <a href="http://codeguru.pl" title="programming">programming</a> is my passions 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T07:19:29.953

一条线就足够了：

```
new Regex(@"\b\w*program\w*\b").Replace("programming is my passion, I love programs", @"<a href=""http://codeguru.pl"" title=""programming"">programming</a>"); 
```

where`\b\w*program\w*\b`匹配任何包含`program`.

如果要根据匹配的单词更改链接的文本，请使用反向引用：

```
new Regex(@"(\b\w*program\w*\b)").Replace("programming is my passion, I love programs", @"<a href=""http://codeguru.pl"" title=""programming"">$1</a>"); 
```

此版本在模式周围添加括号，并使用`$1`（而不是硬编码字符串“ `programming`”）来引用匹配的单词。现在输出将是：

```
<a href="http://codeguru.pl" title="programming">programming</a> is my passion, I love <a href="http://codeguru.pl" title="programming">programs</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T06:55:48.070

解决方案..

```
 Pattern pattern = Pattern.compile("(\\w+|\\W)");
    Matcher m = pattern.matcher("programming is my passion, I love programs");
    while (m.find())
    {
    Pattern pattern1 = Pattern.compile("(program)");
    Matcher m1 = pattern1.matcher(m.group());

    if(m1.find())
        System.out.print(m.group().replace(m.group(), "<a href="+"http://codeguru.pl"+" title="+"programming"+">programming</a>"));
    else
        System.out.print(m.group());
} 
```

输出：

```
<a href=http://codeguru.pl title=programming>programming</a> is my passion, I love <a href=http://codeguru.pl title=programming>programming</a> 
```

# java - 如何匹配 Drools 中的成员对象？

> ID：14079226
> 
> 赞同：0
> 
> 时间：2012-12-29T06:17:12.217
> 
> 标签：java, drools, jbpm

如果我只插入了一个类对象，它具有另一个类对象的数组（比如整数）。现在，如果我想在“何时”部分找到其中最大的，你怎么能这样做？

我可以在“then”部分遍历它们，但那不是利用 Reta 树优化。所以这对我来说不是一个选择。

这个类中有一个getter，通过传入一个索引来返回一个成员类对象。我不想在第一次尝试时更改 java 代码部分，那么您将如何编写“when 部分”来找到最大的部分？

我的第二次尝试是更改 java 代码部分以插入这些成员类对象中的每一个，以便可以在“何时”部分轻松访问它们，但这是我唯一的选择吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T07:57:52.583

您可以尝试使用[from 语法](http://docs.jboss.org/drools/release/5.5.0.Final/drools-expert-docs/html_single/index.html#d0e5351)（4.8.3.7.2），例如：

```
$outerObject : someObject
$maxInner : Integer from from $outerObject.items
not (Integer (intValue > $maxInner.intValue) from $outerObject.items) 
```

# java - 有谁知道如何在 2D 中绘制环形交叉路口以及如何在 Java 中模拟它？

> ID：14079227
> 
> 赞同：-6
> 
> 时间：2012-12-29T06:17:20.377
> 
> 标签：java

有谁知道如何在 2D 中绘制环形交叉路口以及如何在 java 中进行环形交叉路口模拟？至少有一些指导方针如何进行以及执行模拟所需的必要公式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T06:37:06.943

没有这样的公式。事实上，模拟“公式”的概念甚至没有意义。

正确答案取决于您正在使用/构建的模拟框架、模拟的粒度、您正在实施的道路规则、您是否（以及如何）处理不遵守规则的“汽车”......以及很快。

甚至绘制环形交叉路口也取决于上下文（例如您的图形框架），是否需要真实，以及是否需要适合其他事物（例如更大的模拟）。

您很可能需要自己解决这一切。（在字里行间阅读......自己解决问题很可能是你的老师希望你做的！）

# c# - 允许 SizeToContent 放大但不缩小

> ID：14079229
> 
> 赞同：0
> 
> 时间：2012-12-29T06:18:00.273
> 
> 标签：c#, .net, wpf

我有一个带有选项卡式控件的窗口，其中包含每个选项卡中不同大小的控件。我在我的窗口中使用 SizeToContent="WidthAndHeight"，但我想让它只放大窗口大小。

例如，如果我移动到“更大”选项卡，我希望我的控件自动调整其大小，但如果我随后返回“更小”选项卡，我不希望我的控件再次减小其大小。我宁愿不使用 MinWidth 和 MinHeight，因为我希望我的用户能够手动减小窗口大小。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T17:13:28.527

这是一个工作示例；

Xaml：

```
<Window x:Class="WpfApplicationUpper.Window3"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Window3" Height="300" Width="300" SizeToContent="WidthAndHeight">
<Grid>
    <TabControl Name="MainTabControl" 
                SelectionChanged="MainTabControl_SelectionChanged" 
                PreviewMouseDown="MainTabControl_PreviewMouseDown">
        <TabItem Header="Small Tab" >
            <Border Background="AliceBlue" Width="200" Height="200" />
        </TabItem>
        <TabItem Header="Medium Tab">
            <Border Background="Blue" Width="400" Height="400" />
        </TabItem>
        <TabItem Header="Large Tab">
            <Border Background="Navy" Width="600" Height="600" />
        </TabItem>
    </TabControl>
</Grid>
</Window> 
```

后面的代码：

```
 public partial class Window3 : Window
  {
    public Window3() {InitializeComponent();}
    double _currentWidth;
    double _currentHeight;
    private void MainTabControl_PreviewMouseDown(object sender, MouseButtonEventArgs e)
    {
        TabItem currentItem = MainTabControl.SelectedItem as TabItem;
        FrameworkElement content = currentItem.Content as FrameworkElement;
        _currentWidth = content.ActualWidth;
        _currentHeight = content.ActualHeight;
    }
    private void MainTabControl_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        TabItem itemAdded = null;
        TabItem itemRemoved = null;
        if (e.AddedItems.Count > 0)
            itemAdded = e.AddedItems[0] as TabItem;
        if (e.RemovedItems.Count > 0)
            itemRemoved = e.RemovedItems[0] as TabItem;

        if (itemAdded != null && itemRemoved != null)
        {
            FrameworkElement content = itemAdded.Content as FrameworkElement;
            double newWidth = content.Width;
            double newHeight = content.Height;
            if (newWidth < _currentWidth)
                content.Width = _currentWidth;
            if (newHeight < _currentHeight)
                content.Height = _currentHeight;
        }
    }
} 
```

我知道这有点难看，但最好什么都不做:)

# python - 过滤 sqlite - 一个一个地执行动作

> ID：14079231
> 
> 赞同：2
> 
> 时间：2012-12-29T06:18:12.050
> 
> 标签：python, sql, sqlite, cgi

我正在开发一个与简单的 sqlite 数据库交互的 Python 程序。我正在尝试构建一个搜索工具，该工具能够根据用户输入交互地“过滤”数据库，然后返回与搜索匹配的行（项目）。例如...

我的 Python 程序（通过 if 语句、cgi.FieldStorage() 等）应该能够接受用户输入，然后搜索数据库。这是该程序的通用代码：

```
import cgitb; cgitb.enable()
import cgi
import sys
import sqlite3 as lite
import sys

con = lite.connect('bikes.db')
form = cgi.FieldStorage()
terrain_get = form.getlist("terrain")
terrains = ",".join(terrain_get)

handlebar_get = form.getlist("handlebar")
handlebars = ",".join(handlebar_get)

kickstand = form['kickstand'].value 
```

如您所见，该部分是接收用户输入的部分；工作正常（我认为）。接下来，我需要帮助的地方：

```
if 'dirtrocky' not in terrains:
    FILTER the database to not return items that have "dirtrocky' in their terrain field 
```

然后在程序的后期，我希望能够扩展我的过滤器：

```
if 'drop' not in handlebars:
    FILTER the database to, much like in previous one, not return items that have 'drop' in their 'handlebar' field 
```

我的问题是，如何过滤数据库？理想情况下，我的最终结果应该是在我“过滤掉”上述内容后留下的行的 ID 元组。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T09:11:43.187

首先，您应该定义您的数据库模式。最常见的方法是创建完全规范化的数据库，例如：

```
CREATE TABLE bikes (
    bike_id INTEGER AUTOINCREMENT PRIMARY KEY,
    manufacturer VARCHAR(20),
    price   FLOAT,
    ...
);

CREATE TABLE terrains (
    terrain_id INTEGER AUTOINCREMENT PRIMARY KEY,
    terrain VARCHAR(20),
    ...
);

CREATE TABLE handlebars (
    handlebar_id INTEGER AUTOINCREMENT PRIMARY KEY,
    handlebar VARCHAR(20),
    ...
);

CREATE TABLE bike_terrain (
    bike_id INTEGER,
    terrain_id INTEGER
);

CREATE TABLE bike_handlebar (
    bike_id INTEGER,
    handlebar_id INTEGER
); 
```

请注意，该`bikes`表不包含任何有关地形类型或车把的信息：此信息将存储在连接表中，例如`bike_terrain`.

这个完全规范化的数据库使填充有点麻烦，但另一方面，它使查询更容易。

你如何查询它的多值字段？

您将需要动态构建 SQL 语句，如下所示：

```
SELECT
    b.manufacturer,
    b.price
FROM bikes b,
     terrains t,
     bike_terrain bt
WHERE b.bike_id    = bt.bike_id
  AND t.terrain_id = bt.terrain_id      
  AND t.terrain IN ('mountain', 'dirt', ...) -- this will be built dynamically
  ... -- add more for handlebars, etc... 
```

通过动态构建 SQL 语句，几乎整个 WHERE 子句都必须动态构建和添加。

我强烈建议使用一些好的 SQLite GUI 来解决这个问题。在 Windows 上，SQLite Expert Personal 非常棒，在 Linux 上`sqliteman`也很棒。

一旦你填充了你的数据库并且它有超过几百行的东西，你应该添加适当的索引以便它快速运行。祝你好运！

# couchdb - vhosts 配置在 couchDb 上不起作用

> ID：14079237
> 
> 赞同：-1
> 
> 时间：2012-12-29T06:19:09.833
> 
> 标签：couchdb, vhosts, couchapp, couchdb-futon

我正面临一个奇怪的问题。我在 Iris 沙发上托管了一个 couchApp。我从 godaddy 购买了一个域名，并将我的 CNAME (WWW) 设置为我在 iris 沙发上的数据库地址。当我在浏览器中输入我的域名时，我收到一条沙发数据库消息

```
{"couchdb":"Welcome","version":"1.2.0"} 
```

现在，当我尝试将我的域名 (www.example.com) 映射到虚拟主机时

```
/dbname/_design/dname/_rewrite 
```

这没用。

我的 rewrites.json 定义如下

```
[
{
   "from": "/home",
   "to": "_list/listRecentPostsHome/recentPosts",
   "method": "GET",
   "query": {
       "reduce": "false",
       "descending": "true",
       "limit": "10"
   }
}
] 
```

当我将浏览器指向这样的地址时

```
http://www.example.com/dbname/_design/dname/_rewrite/home 
```

有用。

然而这

```
 http://www.example.com/home 
```

才不是。我希望上面的网址可以工作？我究竟做错了什么？

我猜测虚拟主机配置存在一些问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T11:13:08.203

好吧，这有点令人困惑。在这里与鸢尾花沙发上的人交谈后

[https://getsatisfaction.com/iriscouch/topics/vhosts_configuration_not_working_on_couchdb](https://getsatisfaction.com/iriscouch/topics/vhosts_configuration_not_working_on_couchdb)

我发现我在虚拟主机配置中输入了错误的域名。不需要“ **http://** ”。将其更改为“ **www.mydomain.com** ”后它起作用了。

# iphone - 我应该如何显示范围的搜索结果？

> ID：14079243
> 
> 赞同：0
> 
> 时间：2012-12-29T06:20:29.757
> 
> 标签：iphone, ios, search, scope, uisearchbar

我的搜索栏中有两个范围：城市和教堂。每次我执行搜索时，两个范围都会显示空白单元格，而它们确实有搜索结果。如何显示它们对应的单元格名称？谢谢！

我认为问题出在我的 cellForRowAtIndexPath

```
if (tableView == self.searchDisplayController.searchResultsTableView) {
    if ([searchBar.scopeButtonTitles isEqual: @"City"]) {
        cell.textLabel.text = [[filteredResult objectAtIndex: indexPath.row] objectForKey: @"Places"];
    }

    else if ([searchBar.scopeButtonTitles isEqual: @"Church"]) {
        cell.textLabel.text = [[filteredResult objectAtIndex: indexPath.row] objectForKey: @"Church"];
    }
}

else {
    ...
}

[cell setAccessoryType: UITableViewCellAccessoryDisclosureIndicator];
return cell; 
```

这是我的搜索：

```
- (void)filterListForSearchText:(NSString *)searchText scope:(NSString *)scope
{
    [filteredResult removeAllObjects];

    if ([scope isEqualToString: @"City"]) {
        for (NSDictionary *dictionarySearch in allRegion) {
            for (NSDictionary *citySearch in [dictionarySearch objectForKey: @"Cities"]) {
                [citySearch objectForKey: @"Cities"];
                NSRange rangeSearch = [[citySearch valueForKey: @"Places"] rangeOfString: searchText options: (NSCaseInsensitiveSearch|NSDiacriticInsensitiveSearch)];
                if (rangeSearch.location != NSNotFound) {
                    [filteredResult addObject: citySearch];
                }
            }
        }
    }

    if ([scope isEqualToString: @"Church"]) {
        for (NSDictionary *dictionarySearch in allRegion) {
            for (NSDictionary *citySearch in [dictionarySearch objectForKey: @"Cities"]) {
                for (NSDictionary *churchSearch in [citySearch objectForKey: @"Churches"]) {
                    [churchSearch objectForKey: @"Churches"];
                    NSRange rangeSearch = [[churchSearch valueForKey: @"Church"] rangeOfString: searchText options: (NSCaseInsensitiveSearch|NSDiacriticInsensitiveSearch)];
                    if (rangeSearch.location != NSNotFound) {
                        [filteredResult addObject: churchSearch];
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T08:33:26.913

我找到了我的问题的答案。

cellForRowAtIndexPath：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }

    if (tableView == self.searchDisplayController.searchResultsTableView) {
        if (searchBar.selectedScopeButtonIndex == 0) {
            cell.textLabel.text = [[filteredResult objectAtIndex: indexPath.row] objectForKey: @"Places"];
        }

        else if (searchBar.selectedScopeButtonIndex == 1) {
            cell.textLabel.text = [[filteredResult objectAtIndex: indexPath.row] objectForKey: @"Church"];
        }
    }

    else {
        ...
    }

    [cell setAccessoryType: UITableViewCellAccessoryDisclosureIndicator];
    return cell;
} 
```

`searchBar.selectedScopeButtonIndex == 0`对于范围城市和`searchBar.selectedScopeButtonIndex == 1`范围教堂

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T06:34:24.383

希望[这个例子](http://www.appcoda.com/how-to-add-search-bar-uitableview/)能帮助你。只需将您的“if”和“else if”内容放在链接示例中“searchResults”的“filterContentForSearchText”中，这肯定会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T06:34:48.620

我认为使用带有搜索栏的 NSMutableArray 会对您有所帮助。您可以从链接中获取示例项目。[https://github.com/AalokParikh/MyDemoApps](https://github.com/AalokParikh/MyDemoApps)

# ruby-on-rails-3 - 创建与资源无关的 Rails 部分

> ID：14079248
> 
> 赞同：1
> 
> 时间：2012-12-29T06:22:00.350
> 
> 标签：ruby-on-rails-3

这个问题与我之前的问题有关，[即创建与模型无关的 Rails 部分](https://stackoverflow.com/q/14075790/805556)。

我正在尝试创建一个 Rails 部分，它给定一个变量，例如，`seasonal_type`并根据变量的值执行几个不同的操作，例如查询资源和访问实例变量。

更具体地说：我有两个模型`SafetyTest`和`TeamDue`，它们属于`Student`。在这部分的一个特殊情况下，我需要调用 `@student.safety_tests`或`@student.team_dues`。我想将变量传递`seasonal_type`给部分变量，然后确定执行两者中的哪一个。我怎么能做到这一点？变量的值可以是最方便的值，例如符号 ( `:safety_test`) 或模型 ( `SafetyTest`)。

这个问题还有另一部分。在我的控制器中，我为and预先计算了一些实例变量，例如`SafetyTest`and 。在我的部分中，如何根据 的值使用*这*两个实例变量中的任何一个？或者我应该只在部分内部计算这些值，即使这会违反 MVC 结构？`TeamDue``@valid_safety_test``@valid_team_due`*`seasonal_type`*

 *任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T01:34:39.120

这是答案：

在我的控制器中，我创建了一个包含两种季节性类型模型的数组：`[SafetyTest, TeamDue]`

然后我遍历这个数组，并使用模型从数据库中查询我需要的所有信息。我将该信息放入一个数组中，并使用实例变量将其传递给视图。所以这个数组也有两个项目，一个 for`SafetyTest`和一个 for `TeamDue`。

然后部分遍历*这个*数组并渲染必要的视图。*

# yii - cjuidialog 中的问题关闭并在多个 ajax 请求中重新打开

> ID：14079250
> 
> 赞同：1
> 
> 时间：2012-12-29T06:22:32.423
> 
> 标签：yii

我正在使用 cjuidialog 通过 ajax 链接弹出一个网络表单。第一次打开很好。但是在关闭后，我导航到另一个页面并再次进入此页面而没有重新加载整个页面，而是仅通过多个 ajax 请求重新加载 div，弹出窗口没有出现。请建议我解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-11T16:14:57.460

我认为问题在于每次发送 ajax 请求时，CJUIdialog 都会在内部创建带有弹出窗口的 s。因此，经过几次请求后，您就有了几个具有相同 ID 的弹出 div。我所做的我在每个 ajax 请求中删除了 CJUIDialog div 及其父级。像这样：

```
function remove_popup(){
            if($("#popup1").length){
                $("#popup1").remove();
                if($("#popup1").parent().hasClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-draggable ui-resizable")){
                    $("#popup1").parent().remove();
                }
            }
    } 
```

重要的是包括：

```
Yii::app()->clientScript->scriptMap['jquery.js'] = false;
Yii::app()->clientScript->scriptMap['jquery-ui.min.js'] = false; 
```

在乞求一个观点。（不在主视图中）

# java - 将 jstl 与布尔值一起使用时出现 PropertyNotFoundException

> ID：14079255
> 
> 赞同：3
> 
> 时间：2012-12-29T06:23:03.583
> 
> 标签：java, jsp, jstl

我有一个重命名了布尔变量的 FileBean。它有以下代码。

```
public class FileBean {

    private boolean renamed;

    public boolean isRenamed() {
        return renamed;
    }

    public void setRenamed(boolean isRenamed) {
        this.renamed = isRenamed;
    }   
} 
```

我已经使用请求对象将它的对象传递给了jsp（考虑fileDetail是一个请求属性名称）。我的 jsp 包含以下代码。

```
<tr>
  <td>${fileDetail.isRenamed}</td>
</tr> 
```

使用它，我在 jsp 上低于运行时异常。

```
org.apache.jasper.JasperException: javax.el.PropertyNotFoundException: Property 'isRenamed' not found on type <mypackage>.FileBean  
org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:549)
        org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:470)
        org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
        org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
        javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

请建议我解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-29T06:28:42.413

您需要使用属性名称/字段名称。如果是布尔类型，根据 POJO 约定，jstl 会查找`isRenamed()`

例子：

```
 <td>${fileDetail.renamed}</td> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T06:28:14.543

您使用的是方法名称而不是属性名称（点表示法）。

尝试`${fileDetail.renamed}`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-29T06:33:08.537

你试过这个吗？？

```
${fileDetail.renamed} 
```

# ios - 推送详细视图时更改视图 iOS

> ID：14079258
> 
> 赞同：0
> 
> 时间：2012-12-29T06:23:23.463
> 
> 标签：ios, uinavigationcontroller

我在屏幕底部有一个自定义栏的视图。当按下集合视图单元格时，它会加载一个详细视图，我可以返回。

这一切都很好；但是，我在自定义栏上显示了一个加号按钮，我希望加号按钮仅在详细视图显示时消失，然后在您点击后退按钮时返回。

到目前为止，我已经使用了委托方法：

```
 - (void)navigationController:(UINavigationController *)navigationController willShowViewController:(UIViewController *)viewController animated:(BOOL)animated
{
    // Your code to update the parent view

} 
```

问题是当详细视图也被加载和弹出时会触发。关于如何做到这一点的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T06:31:41.527

我假设`mainView`并且`detailView`是`viewControllers`。在`mainView's viewWillAppear`方法

```
 -(void)viewWillAppear:(BOOL)animated
{
   [super viewWillAppear:animated];
   //get reference of plus button here
   btnPlus.hidden = NO;
} 
```

在`detailView's viewWillAppear`方法

```
 -(void)viewWillAppear:(BOOL)animated
{
   [super viewWillAppear:animated];
   //get reference of plus button here
   btnPlus.hidden = YES;
} 
```

# php - 在 WordPress 的类别下拉小部件中更改默认的“选择类别”文本

> ID：14079259
> 
> 赞同：3
> 
> 时间：2012-12-29T06:23:29.953
> 
> 标签：php, wordpress

WordPress 中的默认下拉类别小部件默认显示文本“选择类别”作为第一个选项，是否有一种简单的方法可以在不使用插件或修改核心 WordPress 文件的情况下更改此文本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-29T07:50:26.817

`functions.php`在您的样式表目录中添加一个类似这样的函数：

```
function ChangeSelectTitle($cat_args){
$cat_args['show_option_none'] = __('My Category');
return $cat_args;
}
add_filter('widget_categories_dropdown_args', 'ChangeSelectTitle'); 
```

我**的类别** 是您想要的新标题，而不是`Select Category`

# c# - 从返回结构的c ++导入函数

> ID：14079261
> 
> 赞同：2
> 
> 时间：2012-12-29T06:23:38.197
> 
> 标签：c#

我的 C++ 应用程序中有这个结构：

```
struct Animation
{
    UINT To;
    UINT From;
    USHORT AnimationID;
};

struct Entity
{
    USHORT X, Y;
    UINT SERIAL;
    USHORT SpriteID;
    BYTE DIRECTION;
    USHORT TYPE;
    BOOL Cursed;
    BOOL Fased;
    BOOL IsPet;

    void AddAnimation(Animation &const  a)
    {
        Animations.push_back(a);
    }

    void ClearAnimations()
    {
        this->Animations.clear();
    }

private:
    vector<Animation> Animations;
}; 
```

我有这个导出的功能：

```
extern "C" __declspec(dllexport) Entity GetNearest(void)
{
    Entity & result = GetNearestEntity();
    return result;
} 
```

是否可以使用它并在 c# 中获取实体值？

我试图这样做：

```
 [DllImport("FatBoy.dll", SetLastError = true)]
        internal static extern Entity GetNearest();

        public struct Entity
        {
            ushort X, Y;
            uint SERIAL;
            ushort SpriteID;
            byte DIRECTION;
            ushort TYPE;
            bool Cursed;
            bool Fased;
            bool IsPet;
        } 
```

当我调用它时，我得到了错误：

```
Method's type signature is not PInvoke compatible. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-29T07:11:46.460

C++ 代码：

```
struct EntityValue
{
    USHORT X, Y;
    UINT SERIAL;
    USHORT SpriteID;
    BYTE DIRECTION;
    USHORT TYPE;
    BOOL Cursed;
    BOOL Fased;
    BOOL IsPet;
};

EntityValue* CopyValueOfEntity(Entity* source)
{
    EntityValue *result = new EntityValue();
    result->X = source->X;
    result->Y = source->Y;
    result->SERIAL = source->SERIAL;
    result->SpriteID = source->SpriteID;
    result->DIRECTION = source->DIRECTION;
    result->TYPE = source->TYPE;
    result->Cursed = source->Cursed;
    result->Fased = source->Fased;
    result->IsPet = source->IsPet;
    return result;
}

extern "C" __declspec(dllexport) EntityValue* GetNearest(void)
{
    Entity *result = GetNearestEntity();
    result->X = 1;
    result->Y = 2;
    result->SERIAL = 3;
    result->SpriteID = 4;
    result->DIRECTION = 5;
    result->TYPE = 6;
    result->Cursed = FALSE;
    result->Fased = FALSE;
    result->IsPet = FALSE;
    return CopyValueOfEntity(result);
} 
```

C#代码：

```
class Program
{
    [DllImport("FatBoy.dll", SetLastError = true)]
    internal static extern IntPtr GetNearest();

    [StructLayout(LayoutKind.Sequential)]
    unsafe struct EntityValue
    {
        public ushort X, Y;
        public uint SERIAL;
        public ushort SpriteID;
        public byte DIRECTION;
        public ushort TYPE;
        public bool Cursed;
        public bool Fased;
        public bool IsPet;
    }

    static void Main(string[] args)
    {
        unsafe
        {
            EntityValue* data = (EntityValue*)GetNearest();

            Console.WriteLine(data->X);
            Console.WriteLine(data->Y);
            Console.WriteLine(data->SERIAL);
            Console.WriteLine(data->SpriteID);
            Console.WriteLine(data->DIRECTION);
            Console.WriteLine(data->TYPE);
            Console.WriteLine(data->Cursed);
            Console.WriteLine(data->Fased);
            Console.WriteLine(data->Fased);
        }
    }
} 
```

结果如下：

![证明](../Images/0fa7c4cf6f6a789fce7004cd8cf4a2cb.png)

并且[**与本机 DLL 集成**](http://www.albahari.com/nutshell/ch22.aspx)会很有用。

# c# - c# .net datagridview SelectionChanged

> ID：14079263
> 
> 赞同：1
> 
> 时间：2012-12-29T06:23:58.697
> 
> 标签：c#, asp.net, .net, visual-studio-2010

我正在为一些应该很简单的事情绞尽脑汁。现在已经一天了，所以我终于放弃了，我会问这个问题。如何在.net 中的datagridview 上实际触发 selectionChanged 事件？当用户双击/或单击行上的任何位置时，我基本上想获取行值。但我一辈子都不能让这个事件发生甚至很难我在这里读到这应该是我需要使用的事件？

```
private void dataGridView1_SelectionChanged(object sender, EventArgs e)
        {
            foreach (DataGridViewRow row in AddrGrid.SelectedRows)
            {
                string value1 = row.Cells[0].Value.ToString();
                string value2 = row.Cells[1].Value.ToString();
                //...
            }
        } 
```

我已经尝试过与此类似的方法，但我希望我单击数据网格单元格或行，这不会触发我所缺少的内容？

当我单击一个单元格时，我会触发此事件。

```
private void dataGridView1_CellContentClick(object sender, DataGridViewCellEventArgs e)
        {

            Addresses.aTyp = AddrGrid.Rows[AddrGrid.CurrentCell.RowIndex].Cells["Address Type"].Value.ToString();
            Addresses.seq  =  AddrGrid.Rows[AddrGrid.CurrentCell.RowIndex].Cells["Sequence"].Value.ToString();

        } 
```

但我喜欢捕获双击或单击一行而不仅仅是一个单元格。非常感激任何的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T06:41:25.673

```
private void dataGridView_SelectionChanged(object sender, EventArgs e) 
{
     foreach (DataGridViewRow row in dataGridView1.SelectedRows) 
     {
        string value1 = row.Cells[0].Value.ToString();
        string value2 = row.Cells[1].Value.ToString();
     }
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T06:46:34.510

你可以用这个

```
 private void AddrGrid_CellEnter(object sender, DataGridViewCellEventArgs e)
    {

        Addresses.aTyp = AddrGrid.Rows[AddrGrid.CurrentCell.RowIndex].Cells["Address Type"].Value.ToString();
        Addresses.seq = AddrGrid.Rows[AddrGrid.CurrentCell.RowIndex].Cells["Sequence"].Value.ToString();
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-29T06:33:15.003

在您的网格对象上，我们将其称为“foo”。你会做类似的事情..

```
foo.SelectionChanged += dataGridView1_SelectionChanged 
```

您需要在某处执行此操作以连接事件。我通常在表单的构造函数中执行此操作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-23T22:19:00.660

许多与 DataGridview 的 selectionchanged 事件相关的答案都使用“ **DG1.SelectedRows(0)** ”。这从根本上是错误的。可能选择了多行，并且第一个选择的行可能不是新选择的行。除非您想每次都解析所有选定的行，否则应使用“ **DG1.Rows(DG1.CurrentCell.RowIndex) ”**

# asp.net - 通过 .net 服务上传 XML 文件时内容丢失

> ID：14079265
> 
> 赞同：2
> 
> 时间：2012-12-29T06:24:09.610
> 
> 标签：asp.net, .net, web-services, file-upload

我正在通过 asp.net Web 服务将 xml 文件上传到 Web 服务器。它类似于一个宁静的网络服务。我观察到有时只上传部分数据。只上传了一半的内容。文件大小约为 90 KB，在极少数情况下会降至 3-5 KB。

提前致谢！

# ios - iOS：为什么带有 setCornerRadius 的 UITextField 会截断文本

> ID：14079266
> 
> 赞同：3
> 
> 时间：2012-12-29T06:24:13.080
> 
> 标签：ios, uitextfield, rounded-corners

我正在尝试将带有圆角的 UITextField 加载到 iOS 的表格视图中。在大多数情况下，一切正常。但是，由于角半径属性，最左边的字符会被部分截断。有没有办法在输入到 UITextField 的文本上设置边距，以便正确显示？这是我的代码：

```
 textInput = [[UITextField alloc] init];
        textInput.backgroundColor = [UIColor whiteColor];
        textInput.placeholder = @"example@gmail.com";
        textInput.textColor = [UIColor blackColor];
        textInput.keyboardType = UIKeyboardTypeEmailAddress;
        textInput.returnKeyType = UIReturnKeyDone;

        [[textInput layer] setBorderColor:[[UIColor whiteColor] CGColor]];
        [[textInput layer] setBorderWidth:2.3];
        [[textInput layer] setCornerRadius:15];
        [textInput setClipsToBounds: YES];
        [textInput setDelegate:self];

    [self.contentView addSubview:textInput];
        [textInput release]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:14:10.727

我想出了一个解决办法。我创建了一个自定义文本字段，子类来自`UITextField`：

```
#import "CR_customTextField.h"

@implementation CR_customTextField

- (CGRect)textRectForBounds:(CGRect)bounds {
    int margin = 10;
    CGRect inset = CGRectMake(bounds.origin.x + margin, bounds.origin.y, bounds.size.width - margin, bounds.size.height);
    return inset;
}

- (CGRect)editingRectForBounds:(CGRect)bounds {
    int margin = 10;
    CGRect inset = CGRectMake(bounds.origin.x + margin, bounds.origin.y, bounds.size.width - margin, bounds.size.height);
    return inset;
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T06:28:14.623

用这个

```
[textInput sizeToFit]; 
```

它可以帮助你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-28T07:01:33.303

```
 textInput.layer.sublayerTransform = CATransform3DMakeTranslation(5, 0, 0); 
```

//帮助从给定像素开始写入文本

# r - 计算每一步的模块化

> ID：14079273
> 
> 赞同：1
> 
> 时间：2012-12-29T06:24:53.600
> 
> 标签：r, social-networking, igraph, complex-networks

```
library(igraph)
g=graph.famous("Zachary")
c=edge.betweenness.community(g)
a=membership(c)
c$merges
b=community.to.membership(g,c$merges,steps=33)

[1] 1 1 2 1 3 3 3 1 4 5 3 1 1 1 4 4 3 1 4 1 4 1 4 4 2 2 4 2 2 4 4 2 4 4

[1] 9 4 0 0 0 0 5 0 3 2 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 6 0 0 0 0 7 0 0 8 
```

我希望 b 与 members(c) 相同，因为有 33 个步骤。但是为什么 b 与成员资格（c）不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T09:56:49.870

这似乎是 igraph 中的一个错误，因为即使以下内容也不起作用：

```
> library(igraph)
> g <- graph.full(3)
> c <- edge.betweenness.community(g)
> community.to.membership(g, c$merges, steps=1)$membership 
```

这给了我一个成员向量`1 2 0`，这显然是错误的；正确的结果应该是`1 0 0`or `0 1 1`。实际上，您可以通过从合并矩阵中减去 1 来修复该错误：

```
> g <- graph.famous("zachary")
> c <- edge.betweenness.community(g)
> membership(c)
[1] 1 1 2 1 3 3 3 1 4 5 3 1 1 1 4 4 3 1 4 1 4 1 4 4 2 2 4 2 2 4 4 2 4 4
> community.to.membership(g, c$merges-1, steps=29)$membership
[1] 0 0 2 0 3 3 3 0 1 4 3 0 0 0 1 1 3 0 1 0 1 0 1 1 2 2 1 2 2 1 1 2 1 1 
```

这两个成员向量本质上是相同的（有一点重新索引）。请注意，您只需要 29 步即可达到相同的隶属度向量，因为图中有 34 个顶点，并且您有 5 个社区，因此您需要执行 34-5=29 次合并。执行 33 个步骤只会让您获得一个社区。

我将在 igraph 的错误跟踪器中为此提交错误报告。

# ruby-on-rails - Linkedin 权限：仅提供当前位置信息

> ID：14079274
> 
> 赞同：0
> 
> 时间：2012-12-29T06:25:12.970
> 
> 标签：ruby-on-rails, oauth, linkedin

这个问题与[这里](https://stackoverflow.com/questions/12116853/new-linkedin-permissions-accessing-past-positions-and-educations-using-rails-li)的同一个问题有关，但我仍然面临同样的问题，linkedin 仅提供当前位置信息，我如何使用 Rails 中的[linkedin gem](https://github.com/pengwynn/linkedin)获取过去的职位和教育详细信息，我的linkedin 控制器已经如下图，需要您的帮助。

```
 require 'linkedin'

   class LinkedinUserController < ApplicationController

   def init_client
     key = "XXXXXX"
     secret = "XXXXXX"
     linkedin_configuration = { :site => 'https://api.linkedin.com',
        :authorize_path => '/uas/oauth/authenticate',
        :request_token_path =>'/uas/oauth/requestToken?scope=r_basicprofile+r_fullprofile+r_emailaddress+r_network+r_contactinfo',
        :access_token_path => '/uas/oauth/accessToken' }

     @linkedin_client = LinkedIn::Client.new(key, secret,linkedin_configuration)
   end

   def auth
     init_client
     request_token = @linkedin_client.request_token(:oauth_callback => "http://#{request.host_with_port}/linkedin/callback")
     session[:rtoken] = request_token.token
     session[:rsecret] = request_token.secret
     redirect_to @linkedin_client.request_token.authorize_url
   end

   def callback
     init_client
     if session[:atoken].nil?
       pin = params[:oauth_verifier]
       atoken, asecret =  @linkedin_client.authorize_from_request(session[:rtoken], session[:rsecret], pin)
       session[:atoken] = atoken
       session[:asecret] = asecret
     else
       @linkedin_client.authorize_from_access(session[:atoken], session[:asecret])
     end

     c = @linkedin_client
     c.profile(:fields=>["first_name","last_name","headline","positions","educations"])
   end
   end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T05:42:13.007

LinkedIn 非常注重对个人资料字段的访问，您不能组合需要 2 个不同访问权限的多个字段。因此，当您尝试仅通过它获取位置详细信息时，`c.profile(:fields => %w(positions))`它假定访问类型为“r_basicprofile”，而教育字段需要访问类型为“r_fullprofile”。因此请尝试 2​​ 个单独的 API 调用来检索这两个字段。

"first_name","last_name","headline","positions" 可用于 'r_basicprofile' 成员权限，因此它们可以组合在一起。

# ruby - 定义单例方法

> ID：14079275
> 
> 赞同：1
> 
> 时间：2012-12-29T06:25:29.897
> 
> 标签：ruby, singleton-methods

以下代码来自《*Exceptional Ruby* 》一书：

```
starts_with_a = Object.new

def starts_with_a. ===(e)
    /^A/ =~ e.name
end 
```

如果我注释掉分配新对象的第一行`starts_with_a`，则会收到此错误：

```
`<main>': undefined local variable or method `starts_with_a' for main:Object (NameError) 
```

问题1：为什么我需要分配一个新对象`starts_with_a`来避免该错误？

此外，方法定义在之前`starts_with_a`有一个，尽管变量没有。如果我在方法定义中省略了它，则会出现错误。`.``===``starts_with_a``.`

问题2：这是怎么`.`回事？为什么有必要等等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T06:30:44.427

使用`def starts_with_a. ===(e)`，您正在`===`对象上定义一个单例方法`starts_with_a`。对象和方法之间的`.`表示它是在该对象上定义的方法。如果您尚未创建此类对象，则无法在其上定义单例方法，并且将返回错误。

# java - UVa #494 - 正则表达式 [^a-zA-z]+ 使用 Java 拆分单词

> ID：14079277
> 
> 赞同：2
> 
> 时间：2012-12-29T06:25:35.077
> 
> 标签：java, regex, logic

我在玩[UVa #494](http://uva.onlinejudge.org/index.php?option=com_onlinejudge&Itemid=8&page=show_problem&problem=435)，我设法用下面的代码解决了它：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

class Main {    
    public static void main(String[] args) throws IOException{
        BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
        String line;
        while((line = in.readLine()) != null){
            String words[] = line.split("[^a-zA-z]+");
            int cnt = words.length;
            // for some reason it is counting two words for 234234ddfdfd and words[0] is empty
            if(cnt != 0 && words[0].isEmpty()) cnt--; // ugly fix, if has words and the first is empty, reduce one word
            System.out.println(cnt);
        }
        System.exit(0);
    }
} 
```

我构建了正则表达式`"[^a-zA-z]+"`来拆分单词，例如字符串`abc..abc`或`abc432abc`应该拆分为`["abc", "abc"]`. 但是，当我尝试使用 string 时`432abc`，结果是`["", "abc"]`- 第一个元素 from`words[]`只是一个空字符串，但我希望只有`["abc"]`. 我不明白为什么这个正则表达式给了我`""`这个案例的第一个元素。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-29T06:33:57.293

查看拆分参考页面：[拆分参考](http://msdn.microsoft.com/en-us/library/b873y76a.aspx)

> 分隔符的每个元素定义一个单独的分隔符。如果两个分隔符相邻，或者在该实例的开头或结尾找到分隔符，则对应的数组元素包含 Empty。下表提供了示例。

由于您有几个连续的分隔符，因此您会得到空数组元素

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-29T06:59:38.447

打印字数

```
public static void main(String[] args) throws IOException {
        BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
        String line;
        while ((line = in.readLine()) != null) {
            Pattern pattern = Pattern.compile("[a-zA-z]+");
            Matcher matcher = pattern.matcher(line);
            int count = 0;
            while (matcher.find()) {
                count++;
                System.out.println(matcher.group());
            }
            System.out.println(count);
        }
    } 
```

# ios - 为什么 GestureRecognizer 第一次不能在 textview 上工作？

> ID：14079282
> 
> 赞同：0
> 
> 时间：2012-12-29T06:25:59.463
> 
> 标签：ios, gesture-recognition

我必须`textView`输入一些`text`或`emotion`。所以我制作了另一个按钮来将键盘更改为自定义情感视图，`tap GestureRecognizer`当我想改回`keyboard`. 我发现每次我需要按两次按钮，`tap GestureRecognizer`都可以正常工作。我想了很久，但没有结果，最后我修复了它。我想有人会遇到同样的问题，所以我在下面分享了它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T06:25:59.463

因为我添加点击手势识别的代码在init代码中，但是当我点击textview时，键盘弹出，textview的位置也改变了，所以init点击手势识别代码现在不起作用。

我通过添加轻击手势识别延迟 0.3 秒来修复它。

# c# - DataProtectionConfigurationProvider 解密

> ID：14079287
> 
> 赞同：1
> 
> 时间：2012-12-29T06:26:54.287
> 
> 标签：c#, security, encryption, config

我正在开发一个使用配置文件连接到我的服务器的 winform 应用程序。现在我想让我的服务器的 IP 地址加密。所以我把 ip 地址放在 appSettings 部分并使用 DataProtectionConfigurationProvider 对其进行加密。我在安装/部署过程中执行加密过程。我想知道以下内容：1）任何人，用户，都可以解密配置文件中的 appSettings 吗？2）如果明天我打算更改我的服务器的 IP 地址，有没有办法在用户端使用补丁而不是发送新版本来更新它，build.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T02:17:25.233

在回答您的问题时：

1.  是的，您的用户可能能够解密它。通过该加密提供程序，密钥与机器或特定用户相关联（取决于使用的设置）。也就是说，如果它是机器级别的，那台机器上的任何人都可以解密它。将它移动到另一台机器上，正确的密钥不会在那里解密。
2.  对的，这是可能的。在不了解您的情况、部署和更新设施的情况下，不可能告诉您具体如何执行此操作。您有两个主要选择。
    (1) 解密该段，进行更改，然后重新加密；如果适用，这可能会使用 aspnet_setreg.exe 完成。
    或者 (2) 直接使用允许编辑和保存加密部分的 API，例如使用[ConfigurationManager.OpenMappedExeConfiguration访问文件](http://msdn.microsoft.com/en-us/library/ms134269.aspx)

# ios - Adhoc 应用程序 iO 中的 UITextField 用户交互问题

> ID：14079288
> 
> 赞同：1
> 
> 时间：2012-12-29T06:27:00.083
> 
> 标签：ios, uitextfield, ipa, ad-hoc-distribution, user-interaction

我创建了一个 iPhone 应用程序并使用 XCode 4.5、iOs6 创建了它的 AdHoc 安装文件 (.ipa)。我已经通过 iTunes 在我的设备上成功安装了该应用程序。

问题是，该应用程序有一个登录页面和一个注册页面，其中包含 UITextFields。在它通过 IB 创建的登录页面中，但在注册页面中，它是通过代码添加为 UIScrollView 的子视图。在这两个页面中，一切正常。但是在临时安装之后，我打开了注册页面并单击了任何文本字段，它被选中并且我可以输入值。但在那之后，我无法选择注册页面中的任何文本字段。我关闭了注册页面，然后登录页面中的文本字段也不起作用。

它只发生在临时安装的应用程序中。这个问题有什么可能的原因吗？

请帮忙。

**问题更新**

我尝试使用产品>配置文件>自动化来跟踪问题。当我通过它进行测试时，我遇到了同样的问题。同时，当它从代码运行时工作正常。有人给我一些提示有帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T04:25:24.437

您是否正确检查了 UITextField 的委托方法？确保它在编辑结束时正确调用其委托方法。根据您的解释，我了解到，您可以在第一个文本框中选择并输入值。因此，在编辑结束时它应该返回 YES。

# mysql - 根据另一张表减去值

> ID：14079290
> 
> 赞同：2
> 
> 时间：2012-12-29T06:27:33.843
> 
> 标签：mysql, sql, select

```
--work--
day    hours 
 4       8
 5       9
 6       8

 --crew--
employee     day
   2          4
   3          4
   6          4  
   2          5
   3          5
   4          5

--break--
hours    day    employee
  1       4        2
  .5      5        3 
```

这是我的sql查询：

```
 SELECT w.hours, w.hours-b.hours,  c.employee
 FROM work w
 LEFT JOIN crew c ON w.day = c.day
 LEFT JOIN break b ON w.day = b.day
 WHERE w.day = 4 
```

这是从每个员工身上减去 1 小时

我希望`break.hours`仅当该员工休息时才将其减去。如果他没有，我只是想要`work.hours`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T06:31:55.693

`COALESCE`是你所需要的全部。

```
SELECT  a.employee,
        a.day,
        b.hours - COALESCE(c.hours,0) totalHours
FROM    crew a
        INNER JOIN work b
            ON a.day = b.day
        LEFT JOIN `break` c
            ON a.employee = c.employee AND
                a.day = c.day
-- WHERE    b.day = 4 
```

*   [SQLFiddle 演示链接](http://sqlfiddle.com/#!2/6e30d/2)
*   [SQLFiddle 演示链接（*with`WHERE`子句*）](http://sqlfiddle.com/#!2/6e30d/3)

# php - 无法限制 preg_match

> ID：14079292
> 
> 赞同：0
> 
> 时间：2012-12-29T06:27:54.137
> 
> 标签：php

我只想创建一个函数来检查一个字符串，我想告诉最小和最大字符数。

```
function check_strict_name($str, $fieldname, $min, $max) {
    $field_errors = array();
    if (preg_match('%^[A-Za-z\.\'\-]{$min, $max}$%', stripslashes(trim($str)))) {
    } else {
        $field_errors[] = $fieldname;
        $field_errors[] = "Info not accepted"; 
    }    
    return $field_errors;   
} 
```

如果我用它替换`{$min, $max}`它`{2, 25}`可以正常工作，但我希望能够在调用函数时告诉这些数字。我想我理解它为什么不起作用，因为 $-sign 结束了表达式，但我不知道如何用有效的`{$min, $max}`东西替换它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T06:55:40.547

正则表达式中不允许使用这种语法。尝试这个：

```
if (preg_match('/^[A-Za-z\.\'\-]{' . $min . ',' . $max . '}$/', ... 
```

或者

```
if (preg_match(sprintf('/^[A-Za-z\.\'\-]{%d,%d}$/', $min, $max), ... 
```

# asp.net - gzip 在 iis7.5 中不起作用

> ID：14079298
> 
> 赞同：1
> 
> 时间：2012-12-29T06:28:21.960
> 
> 标签：asp.net, iis-7.5, gzip

> **可能重复：**
> [如何在 IIS7 中进行 gzip 压缩？](https://stackoverflow.com/questions/786638/how-can-i-get-gzip-compression-in-iis7-working)

我在 iis7.5 上启用了静态压缩，但我的 .js 和 .css 文件没有被压缩。

**我的 web.config**

```
<staticContent><remove fileExtension=".js" />
  <mimeMap fileExtension=".js" mimeType="text/javascript" />
</staticContent><httpCompression directory="%SystemDrive%\inetpub\temp\IIS Temporary Compressed Files">
  <scheme name="gzip" dll="%Windir%\system32\inetsrv\gzip.dll"/>
  <dynamicTypes>
    <add mimeType="text/*" enabled="true"/>
    <add mimeType="message/*" enabled="true"/>
    <add mimeType="application/javascript" enabled="true"/>
    <add mimeType="*/*" enabled="false"/>
  </dynamicTypes>
  <staticTypes>      

    <add mimeType="text/*" enabled="true"/>
    <add mimeType="message/*" enabled="true"/>
    <add mimeType="application/javascript" enabled="true"/>
    <add mimeType="*/*" enabled="false"/>
  </staticTypes>
</httpCompression>
<urlCompression doStaticCompression="true" doDynamicCompression="true"/> 
```

仍然是 YSlow Grad：F. 有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:56:50.760

改变这一行：

```
 <add mimeType="application/javascript" enabled="true"/> 
```

至：

```
 <add mimeType="text/javascript" enabled="true"/> 
```

对于两个条目（在动态类型和静态类型下）。

# sencha-touch-2 - Sencha touch 中厨房水槽示例的导航流程

> ID：14079299
> 
> 赞同：0
> 
> 时间：2012-12-29T06:28:41.010
> 
> 标签：sencha-touch-2

我是 sencha touch 的新手。我成功部署了 kitchensink 示例应用程序。我想知道 kitchensink 示例的导航流程（从哪个文件到哪个文件）。有人可以帮我吗？我没有在 app.js 中找到 launch()。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T10:15:07.567

厨房水槽正在使用[配置文件](http://docs.sencha.com/touch/2-1/#!/api/Ext.app.Profile)。这意味着应用程序将根据显示在哪种设备上而以不同的方式显示。

你会找到一个无论如何都会被调用的`launch`函数`app/profile/Base.js`，然后你还会在和中找到另外两个`launch`函数。如果您从手机启动应用程序，则会调用前者，而从平板电脑启动后者。`app/profile/Phone.js``app/profile/Tablet.js`

从那里它应该非常简单。

希望这可以帮助

# elisp - 如何在 elisp 中减去路径？

> ID：14079306
> 
> 赞同：4
> 
> 时间：2012-12-29T06:30:06.627
> 
> 标签：elisp

我有两条路径，一条是另一条的子集`/foo/bar/`，`/foo/bar/baz/gig`. 我要提取`baz/gig`的路径是 dir 中文件的相对路径。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-29T08:04:06.910

使用`file-relative-name`：

```
(file-relative-name "/foo/bar/baz/gig" "/foo/bar/")    ;   => "baz/gig" 
```

记录在 Elisp 手册的“相对文件名”下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-04T09:08:36.977

您还可以使用[`f`](https://github.com/rejeep/f.el)第三方文件操作库。[`f-relative`](https://github.com/rejeep/f.el#f-relative-path-optional-dir)是你需要的。

```
(f-relative "/a/b/c/d/e/file.txt" "/a/b/") ; "c/d/e/file.txt"
(f-relative "/a/b/c/d/e/file.txt" "/a/b") ; "c/d/e/file.txt" 
```

# php - hasIdentity 方法在 Zend 框架中不起作用

> ID：14079308
> 
> 赞同：0
> 
> 时间：2012-12-29T06:30:35.120
> 
> 标签：php, zend-framework

我正在使用`Zend_Auth`Zend Framework 中的身份验证模块。成功认证后，我使用存储用户数据`getStorage()`；

例子 ：

在`_process`我这样写的方法中：

```
if ($result->isValid()) {                        
    $user = $adapter->getResultRowObject();             
    $auth->getStorage()->write($user);
    return true;
} 
```

`print_r($user)`显示结果：

```
stdClass Object ( [id] => 1 [username] => admin [password] => cb3aefbdffbc81588f3d43c394428b16d4346b44 [salt] => ce8d96d579d389e783f95b3772785783ea1a9854 [role] => administrator [date_created] => 2012-12-29 11:04:40) 
```

现在，如果用户成功登录，我想显示`Logout`链接。

`LoggedInAs.php`

```
 class Zend_View_Helper_LoggedInAs extends Zend_View_Helper_Abstract {

    public function loggedInAs() {
        $auth = Zend_Auth::getInstance();
        if ($auth->hasIdentity()) {
            $username = $auth->getIdentity()->username;
            $logoutUrl = $this->view->url(array('controller' => 'auth',
                'action' => 'logout'), null, true);
            return 'Welcome ' . $username . '. <a href="' . $logoutUrl . '">Logout</a>';
        }

        $request = Zend_Controller_Front::getInstance()->getRequest();
        $controller = $request->getControllerName();
        $action = $request->getActionName();
        if ($controller == 'auth' && $action == 'index') {
            return '';
        }
        $loginUrl = $this->view->url(array('controller' => 'login', 'action' => 'index'));
        return '<a href="' . $loginUrl . '">Login</a>';
    }

} 
```

但它没有调用该方法，`hasIdentity`这就是为什么它不去`if`块和

`print_r($auth)`显示这样的输出：

`Zend_Auth Object ( [_storage:protected] => )`

`Bootstrap.php`

```
protected function _initSession() {
    Zend_Session::start();
    if (!Zend_Registry::isRegistered('session')) {
        $session = new Zend_Session_Namespace('userIdentity');
        Zend_Registry::set('session', $session);
    }
} 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T08:40:19.900

您是否已将会话添加`$myNamespace = new Zend_Session_Namespace();`到您正在编写的操作中`$auth->getStorage()->write($user);`，它应该是第一行

Example #1 修改会话命名空间

Zend_Auth_Storage_Session 使用“Zend_Auth”的会话命名空间。这个命名空间可以通过传递一个不同的值给 Zend_Auth_Storage_Session 的构造函数来覆盖，并且这个值在内部传递给 Zend_Session_Namespace 的构造函数。这应该在尝试进行身份验证之前发生，因为 Zend_Auth::authenticate() 执行身份的自动存储。

```
// Use 'someNamespace' instead of 'Zend_Auth'
$auth->setStorage(new Zend_Auth_Storage_Session('userIdentity'));
$result = $auth->authenticate($authAdapter); 
```

[http://framework.zend.com/manual/1.12/en/zend.auth.introduction.html](http://framework.zend.com/manual/1.12/en/zend.auth.introduction.html)

# objective-c - 如何从 128 字节序列的主密钥和对等密钥生成 Diffie-Hellman 公钥和共享密钥？

> ID：14079309
> 
> 赞同：1
> 
> 时间：2012-12-29T06:30:39.203
> 
> 标签：objective-c, ios

```
unsigned char *prime;
unsigned char *keyPeer;
unsigned char *generator = [self.client readBytesWithLength:2];

unsigned char *keyLengthRaw = [self.client readBytesWithLength:2];
int keyLength = keyLengthRaw[0]*256+keyLengthRaw[1];

prime = [self.client readBytesWithLength:keyLength];
keyPeer = [self.client readBytesWithLength:keyLength];

NSLog(@"key length %d",keyLength);
NSLog(@"---generator: %d", (int) generator[0]*256+generator[1]);
NSLog(@"---prime:");
NSLog([NSString stringWithCString:prime encoding:NSASCIIStringEncoding]);
NSLog(@"---peerkey:");
NSLog([NSString stringWithCString:keyPeer encoding:NSASCIIStringEncoding]); 
```

在此之后我需要做什么来生成 dh 公钥和共享密钥？

# node.js - 您如何让服务器上传并为您的游戏工作？

> ID：14079313
> 
> 赞同：1
> 
> 时间：2012-12-29T06:31:06.223
> 
> 标签：node.js, hosting

我一直在网上搜索，并试图将我的基于 node.js 的服务器上传到几个不同的网络托管商，但没有结果。据我所知，大多数托管商一开始就不支持 node.js，我列出了一些支持的列表。

但我的主要问题是，你如何让你的服务器首先在这个主机上工作？你只是上传吗？上传后会自动运行吗？我是否必须访问该托管商 cmd 才能使其运行？

抱歉，这可能是一个非常新的问题，我认为这是因为我还没有找到涵盖此问题的指南，因为它显然太基础了。他们似乎总是跳过这部分：s

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T06:42:14.543

您只需要将文件上传到支持 javascript 并提供命令行访问的网络主机；例如，查看[亚马逊的免费可扩展产品](http://aws.amazon.com)。上传文件后，只需从命令行运行它们：

```
% node node.js 
```

# android - 将 couchdb 与 android 同步

> ID：14079318
> 
> 赞同：1
> 
> 时间：2012-12-29T06:32:29.483
> 
> 标签：android, couchdb

我们有一个 couchdb 服务器，其内容由 .NET 应用程序管理。

我们有一堆 android 客户端，我们希望通过单击按钮与该数据库同步。（它只是一个文件夹和项目的列表，没什么复杂的）

什么是最好的 Android 库。我看到有 Ektorp、touchdb 等。Ektorp 似乎有点重。TouchDb-Android 似乎很有希望。

你们有这方面的经验吗？还是我应该只对 couchdb 服务器使用 GET / POST 调用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T03:37:00.663

因为我正在做同样的事情，所以我已经对此做了很多研究。

我们有一些 CMS 内容要推送到 CouchDB 中，然后让移动设备与云中的服务器（集群）同步。

我们最终在云中使用 BigCouch（来自 Cloudant 的稳定的 CouchDB 分支），然后我们暂时使用 Couchbase Mobile。不幸的是，不支持 Couchbase Mobile（它已被 Couchbase 停产），但它很稳定。

与 Couchbase Mobile 的区别之一是它在移动设备上使用 Erlang 来运行本地 Couch 实例。这有点慢。

TouchDB 是我们俩都需要的，但它在 Android 上还不够成熟。TouchDB 有点时髦，因为它使用 SQLlite 作为后端。它肯定更快。他们已经发布了适用于 iOS 的 TouchDB 1.0，这很好，但他们还没有更新 Android 端口。我们发现 TouchDB 的 Android 端口（也来自 Couchbase）不太稳定。另外，如果您查看 GitHub 上的 TouchDB Android 代码，它有点草率。

因此，我们将在云中使用 BigCouch（而不是常规的 CouchDB）来支持集群，然后在移动设备上使用 Couchbase Mobile。一旦 TouchDB 在 Android 上变得更加成熟，我们将切换到它。好消息是他们都使用 Ektorp，所以两者之间的交换并不难。复制效果很好。它坚固且相当快。

快速说明：小心使用移动设备复制 Couch。写入本地移动设备的任何文档都*将*复制回服务器！

**编辑**

文档不会总是从本地设备复制到服务器。这是一种选择，但并非*总是*如此。我说得太早了。=/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T12:38:30.387

我肯定会从其中一个库开始，并且只有在结果库（或者实际上，没有一个库）适合您时才恢复到 GET / POST 调用。

# c - C 中 printf 和 scanf 函数的定义/主体

> ID：14079319
> 
> 赞同：3
> 
> 时间：2012-12-29T06:32:35.180
> 
> 标签：c, header-files, turbo-c

我在哪里可以找到“Borland C”的 printf/scanf 和其他类似的预定义常用函数（getch、clrsr ...等）的定义/主体？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-29T07:40:59.040

你不能..你可以在头文件中看到**printf/scanf的原型**`<stdio.h>`

您可以在您使用的任何编译器随附的标准库中找到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-22T07:36:03.133

可能您看不到 printf() 和 scanf() 等预定义函数的源代码，因为它们已经是扩展名为 .lib 的编译文件，编译器只需要函数声明，不需要它们稍后链接的确切源文件生成 .exe 文件的链接器。

# delphi - Delphi：临时PChar是否保证在PChar指向的字符串变量改变后具有相同的值？

> ID：14079321
> 
> 赞同：6
> 
> 时间：2012-12-29T06:32:40.640
> 
> 标签：delphi, freepascal

以下代码在我的系统中按预期运行，但我不确定`P`变量在更改为新值后是否**保证**具有相同的值。`MyArray[0]`

```
procedure Test;
var
  MyArray: array of string;
  P : PChar;

begin
  SetLength(MyArray, 2);
  MyArray[0] := 'ABCD';
  MyArray[1] := '1234';

  // Is P guaranteed to have the same value all the time?
  P := PChar(MyArray[0]);

  MyArray[0] := MyArray[1];
  MyArray[1] := P;

  WriteLn(MyArray[0]);
  WriteLn(MyArray[1]);
end; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-29T08:09:52.657

您的代码在技术上无效。由于不应该依赖的实现细节，它只运行。

让我们看一下代码的相关部分：

```
P := PChar(MyArray[0]);
MyArray[0] := MyArray[1];
MyArray[1] := P; 
```

首先我们让 P 指向 MyArray[0] 的第一个字符。然后我们分配给 MyArray[0]。此时，没有理由让 P 指向的字符串缓冲区保持活动状态。没有字符串变量引用它。它的引用计数变为零，因此应该释放它。这使得 P 的后续使用无效。

在这种情况下，为什么你的代码会运行？因为您使用的字符串恰好是文字。因此它们以等于 -1 的引用计数存储并绕过字符串使用的正常堆分配例程。但是，如果您要使用不是文字的字符串值，那么我在上一段中描述的内容就会实现。而且我希望您的真实代码不使用文字。

所以你的实际问题有点没有实际意义。P 指针只指向一块内存。在您修改指针之前，它一直指向同一个内存块。如果您修改了内存块的内容，那么如果您取消引用它，P 将看到这些修改。它只是一个指针，就像任何其他指针一样。

您需要小心使用 PChar 变量。在您的使用中，它是指向编译器托管对象的非托管指针。这为错误提供了很大的空间，你已经掉进了陷阱。如果您想要一个字符串的副本，请将副本复制到另一个字符串变量中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T08:34:38.627

从字符串到 PChar 的类型转换似乎与获取其地址不同。请参见下面的代码，它将获取字符串的地址。

```
procedure Test;
var
  MyArray: array of string;
  P : ^String;

begin
  SetLength(MyArray, 2);
  MyArray[0] := 'ABCD';
  MyArray[1] := '1234';

  // take the pointer
  P := @MyArray[0];

  WriteLn(MyArray[0]);
  WriteLn(MyArray[1]);
  WriteLn(P^);

  // when content of array changes, P^ will change as well
  MyArray[0] := 'HELLO';
  WriteLn(P^);
end; 
```

# facebook - 使用 OAuth 访问通过 Facebook API 访问生日和电子邮件

> ID：14079325
> 
> 赞同：0
> 
> 时间：2012-12-29T06:33:19.907
> 
> 标签：facebook, oauth, facebook-fql

我正在使用 OAuth 访问 Facebook API。范围参数包含`email, user_activities, user_birthday`.

我正在做 FQL 查询`SELECT email, birthday, activities FROM user WHERE uid = me()`。我尝试使用几个帐户执行此查询，并将此字段标记为公共。服务器的答案包含请求的变量，但它们是空的。

是否可以使用 OAuth 访问来获取此信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T06:47:39.203

如果没有看到完整的代码，很难确定，但是如果您在这 3 个字段中得到空答案，那么您似乎没有将具有正确权限的 access_token 传递给 FQL 查询；

> 权限
> 
> 要读取您需要的用户表
> 
> *   公开数据没有 access_token：uid、name、first_name、middle_name、last_name、sex、locale、pic_small_with_logo、pic_big_with_logo、pic_square_with_logo、pic_with_logo、username
> *   用于其他用户数据的任何有效 access_token，后续例外除外：
>     ** ...
>     ** 电子邮件查看权限：proxied_email、contact_email
>     ** user_birthday 或friends_birthday 查看权限：birthday、birthday_date
>     ** ...
>     ** user_activities 或 friends_activities 权限查看：活动

我不确定您是如何使用 OAuth 进行身份验证的，但是对于如何获取正确的访问令牌和权限，您可以开始查看[此处](https://developers.facebook.com/docs/concepts/login/)

# javascript - 如何放置 XML 值并在 href 锚标记中使用它？

> ID：14079326
> 
> 赞同：1
> 
> 时间：2012-12-29T06:33:45.770
> 
> 标签：javascript, html, xml

如何在 HTML 网页上读取 XML 文件？

我只知道非常基本的 JavaScript。我正在尝试使用 XML 更改网站页脚中的值，因为我有 100 多个页面，每次更改页脚中的内容时，我都必须手动更改所有 100 页。这就是我想通过 XML 更改页脚链接的原因。

我希望我的 XML 链接值进入锚标签 href 属性：

```
<a href="here goes the url using xml"> 
```

此外，锚标签之间的网站名称也是：

```
<a href="here goes link value ">here goes the name of the url using xml</a> 
```

我的 HTML 页面应如下所示：

```
<a href "here goes the url">here goes the name of the url using xml</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T06:44:31.420

如果您只想更改页脚并且在 100 页中使用，您可以这样做。制作一个页脚 html 页面并将其包含在每个页面中。这样，如果您需要对页脚进行任何更改，您将需要在 1 个地方进行。在jsp中你必须写

```
<jsp:include page="PageFooter.jsp" /> 
```

这个解决方案也可能有帮助 [如何将一个 HTML 页面包含到另一个没有框架/iframe 的 HTML 页面中？](https://stackoverflow.com/questions/676394/how-to-include-an-html-page-into-an-html-page)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T06:46:25.233

是的。您的服务器是否启用了 PHP？（大多数默认启用它。）JavaScript AJAX 可以做到这一点，但 PHP 将是一个更好的解决方案。

只需将其粘贴到您的网站中：

```
<a href="<?php include 'file.xml'; ?>">here goes the name of the url using xml</a> 
```

将“file.xml”更改为将保存 URL 的任何文件。您也可以使用 .txt 甚至 .php 或 .html。每当 file.xml 中的 URL 发生更改时，它都会反映在您的所有页面中。

**编辑：**与其引用页脚中的每个链接，不如只制作一个包含在内的页脚，如下所示：

```
<?php include 'footer.html'; ?> 
```

在“footer.html”里面是你的页脚。每当您更改 footer.html 时，它也会在每个用作页脚的页面中更改。

告诉我这是否有帮助。:)

**编辑：**实际上在 Ajax 中执行此操作并不难。:) 查看 jQuery（一个 JavaScript 库）中的 load 函数：

```
$('#result').load('ajax/test.html'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T12:27:19.280

> 我希望这将在没有 javascript 的情况下对您有所帮助。
> 
> xml文件

```
<table>   <column>
    <column_id>1</news_id>
    <column_heading>heading</column_heading>    <column_details>details</column_details>    <column_url>url link</column_url>      </column> </table> 
```

.aspx 文件

```
 <asp:Repeater runat="server" ID="XMLRepeater">
                    <ItemTemplate> <a  href="<%#Page.ResolveUrl(DataBinder.Eval(Container.DataItem, "column_url").ToString())%>"  target="_blank">                                    
                         <span >   <%# DataBinder.Eval(Container.DataItem, "column_heading") %>
                                    </span></a>
</ItemTemplate>
                </asp:Repeater> 
```

aspx.cs 文件

```
protected void BindXMLToRepeater()
    {
        XmlTextReader xmlreader = new XmlTextReader(Server.MapPath("filename.xml"));
        try
        {

            DataSet ds = new DataSet();
            ds.ReadXml(xmlreader);
            //xmlreader.Close();

            DataTable dt = new DataTable();
            dt = (DataTable)ds.Tables[0];               

            //create dynamic data table
            DataTable dynamicTable = new DataTable();

            //DataRow
            DataRow dynamicRow;
            //DataColumn for Name and Time
            DataColumn id = new DataColumn("column_id", typeof(string));
            DataColumn heading = new DataColumn("column_heading", typeof(string));
            DataColumn url = new DataColumn("news_url", typeof(string));

            //add Column to Datatable
            dynamicTable.Columns.Add(id);
            dynamicTable.Columns.Add(heading);                
            dynamicTable.Columns.Add(url);

            //counter used for get fix no of news
            int counter = 0;

            for (int i = 0; i < dt.Rows.Count; i++)
            {
                  dynamicRow = dynamicTable.NewRow();
                    //Add Rows to dymanicTable
                    dynamicTable.Rows.Add(dynamicRow);
                    //Assign Column value
                    dynamicTable.Rows[dynamicTable.Rows.Count - 1]["column_id"] = dt.Rows[i]["column_id"];
                    dynamicTable.Rows[dynamicTable.Rows.Count - 1]["column_heading"] = dt.Rows[i]["column_heading"];                    

                    dynamicTable.Rows[dynamicTable.Rows.Count - 1]["column_url"] = dt.Rows[i]["column_url"];

            }

            if (dynamicTable.Rows.Count != 0)
            {
                //Bind Data to repeater            
                XMLRepeater.DataSource = dynamicTable;
                XMLRepeater.DataBind();
            }
        }
        catch (Exception ee)
        {

        }
        finally
        {
            xmlreader.Close();
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T17:04:58.167

看起来他想做客户端。也许不想启用 PHP 模块。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T09:13:05.030

谢谢大家的回答，但经过大量搜索，我找到了我想要的。我想使用单个文件更改多个页面页脚部分而不更改我的页面名称（从 .html 页面到 .aspx、.php、.asp 等其他页面）我需要做的就是使用 SSI aka 服务器端包含。您唯一需要做的就是检查您的服务器是否支持 SSI，然后制作一个您想要包含在每个页面上的单独的 html 页脚页面。为了包含该外部页脚页面，只需键入。

```
<!--#include file="footer.html" --> 
```

在 area,div,table 中，您希望页脚加载并完成。

有关详细文章，请访问以下链接 [http://httpd.apache.org/docs/2.2/howto/ssi.html](http://httpd.apache.org/docs/2.2/howto/ssi.html)

# python - 是时候使用 Django 1.5 了吗？

> ID：14079327
> 
> 赞同：4
> 
> 时间：2012-12-29T06:33:50.293
> 
> 标签：python, django

我是 Django 新手（来自 PHP Yii），我想通过开发一些网站来学习它。我应该在 Django 1.4 还是 1.5 上编写它？
如果你现在必须开发一个新的（生产）网站，你会使用 Django 1.5 吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-29T06:51:24.453

Django 1.5 预计将在[一个月左右的时间内](https://groups.google.com/d/msg/django-developers/4EvlunsJ0LY/zh5VBtzfKuYJ)发布，但 Django 整体趋向于相当稳定，因此它尚未发布的事实应该不是什么大问题。

如果我开始一个新项目，我肯定会以 1.5 为目标；项目在 Django 1.5 发布之前“完成”的概率是多少？（一些版本已经下滑，但总的来说 Django 团队在调度方面做得相当好，因为这样的事情发生了。）另外，我可以开始利用其中的其他功能（Python 3 支持是我最喜欢的，尽管自定义用户模型也是一大福音）。

再说一次，从头脑清醒的商业角度来看，我确信使用 Django 1.5 会非常有趣，无法尝试，而且我可能会因为玩花哨的新功能而分心……

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-29T06:50:18.063

Django 1.5 即将发布。您现在可以开始使用了。

# ruby-on-rails - Rails 使用选择字段的数据库安全问题

> ID：14079329
> 
> 赞同：0
> 
> 时间：2012-12-29T06:33:55.520
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, ruby-on-rails-3.2, validation

作为一个偏执的入门级开发人员，我想知道用户是否可以使用某种查询通过带有选择字段的表单将数据插入数据库。

更具体地说，在我的数据库中说我有一个性别列（数据类型文本），在我的表单中我使用选择标签并传入 2 个选项男性和女性。尽管在 html 中用户只有 2 个选项可供选择，但 db 不知道这一点。性别栏几乎可以接受任何内容。我只是想知道讨厌的用户是否可以忽略选择选项并以某种方式在“性别”列中插入一个愚蠢的答案？如果是这样，我该如何保护它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T06:59:44.703

您在这里谈论的是在将数据输入数据库之前需要完成的验证。无效数据可以来自任何地方（直接来自控制器或来自 GUI），模型负责在数据提交到数据库之前对其进行验证。

浏览这些链接。

[http://api.rubyonrails.org/classes/ActiveRecord/Validations.html](http://api.rubyonrails.org/classes/ActiveRecord/Validations.html) http://guides.rubyonrails.org/active_record_validations_callbacks.html

# jsf - primefaces菜单栏注销右侧

> ID：14079334
> 
> 赞同：3
> 
> 时间：2012-12-29T06:34:42.557
> 
> 标签：jsf, primefaces, alignment, menubar

嗨，我遵循了这段代码，但我的注销按钮不在菜单栏的右侧。

[来自 PF 的样本](http://www.primefaces.org/showcase-labs/ui/menubar.jsf)

这是我的 xhtml 页面

```
<h:body>
    <p:menubar autoDisplay="false">
        <p:menuitem value="Home" url="/index.jsf" />

        <p:submenu label="Maintenance" >
            <p:menuitem value="Course" url="/views/course/list.jsf" />
            <p:menuitem value="Student" url="/index.jsf" />
        </p:submenu>

        <f:facet name="options">
            <p:commandButton type="button" value="Logout" icon="ui-icon-extlink" />
        </f:facet>
    </p:menubar>
</h:body> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T12:35:29.237

您应该使用 style="float: right;" 在按钮内部或将属性包含到您的 CSS 样式表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-26T17:43:06.113

我可以通过使用下面的代码来注销右侧

```
<f:facet name="options">
   <p:commandButton type="button" value="Logout" />
</f:facet> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T21:46:19.483

使用：**inputText style="margin-right:10px"**在方面...肯定会工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-14T14:38:35.453

它仅适用于将 primefaces 3.5 更改为 primefaces 3.5 并且它会起作用，您可以在 primefaces 链接[primefaces 博客上验证这一点](http://blog.primefaces.org/?p=2347%5B1%5D)

有关更多详细信息，请访问 primefaces 展示页面[primefaces 展示菜单栏示例页面](http://www.primefaces.org/showcase/ui/menubar.jsf) 以获取示例代码此代码来自该示例页面

`<f:facet name="options">
<p:inputText style="margin-right:10px"/>
<p:commandButton type="button" value="Logout" icon="ui-icon-extlink" />
</f:facet>`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-20T09:26:54.250

如果您使用prime-faces 5，那么它应该可以工作。尝试在 Web 浏览器中浏览您的应用程序，而不是您用于编码的 IDE。因为它在 IDE 中没有像我们预期的那样出现，但在 Web 浏览器中可以正常工作。您还可以在标签内使用 styleClass。在按钮标签内插入 styleClass="margin-riight:10px"

# xcode - 将 JavaVM 框架链接到 Xcode - 目标 C

> ID：14079337
> 
> 赞同：1
> 
> 时间：2012-12-29T06:35:38.357
> 
> 标签：xcode, frameworks, jvm, java-native-interface

好的，我是 xcode/objective c 的新手并且有一个问题，我已经阅读了之前关于将框架链接到 IOS 应用程序的所有评论，但它对我不起作用。我一定犯了一些愚蠢的错误，所以这就是我所做的。

*   创建一个新应用程序只是为了测试 JVM-JNI

*   通过拖放方法链接JavaVM.framework，结果无法访问.h 文件。

*   通过 Build Phases - Link Binaries With Libraries 方法链接 JavaVM.framework，给出了完全相同的结果。

是否有一个教程可以让我们新手完成这些步骤（不仅仅是参考在某处阅读它）任何帮助将不胜感激。

# javascript - 当我在调试器中看到更改时，为什么我的元素没有显示其属性已更改？

> ID：14079338
> 
> 赞同：1
> 
> 时间：2012-12-29T06:35:55.280
> 
> 标签：javascript, jquery

我有以下 HTML：

```
<div class="button accessLink" id="loginLink" data-action="Login" 
data-dialog="access" data-disabled="no" data-entity="n/a" 
data-href="/User/Access/Login" title="Login" 
style="-webkit-user-select: none;" data-title="Login">Login</div> 
```

我有一些代码，当我单步执行调试器时，我看到在 $(targetSelector) 设置为 #loginLink 的情况下执行了以下代码。

```
$(targetSelector).attr('data-disabled', 'yes'); 
```

当我再次使用 chrome 开发人员工具检查时，我看到：

```
<div class="button accessLink" id="loginLink" data-action="Login" 
data-dialog="access" data-disabled="no" data-entity="n/a" 
data-href="/User/Access/Login" title="Login" 
style="-webkit-user-select: none;" data-title="Login">Login</div> 
```

有人可以解释为什么 data-disabled 似乎没有改变吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T06:40:25.190

您`debugger`可能没有`refreshing`更改值，或者您可能遗漏了某些内容，您需要打印它们以查看更改，例如使用警报。您的陈述似乎正确并且正在更改属性。

**[现场演示](http://jsfiddle.net/x6eHr/)**

```
$('#loginLink').attr('data-disabled', 'yes');    
alert($('#loginLink').attr('data-disabled')); 
```

您正在尝试更改数据属性，而 jQuery 为您提供了 data() 函数来设置和获取数据属性，因此您可以使用 data() 而不是 attr()。

**[现场演示](http://jsfiddle.net/x6eHr/1/)**

```
$('#loginLink').data('disabled', 'yes');
alert($('#loginLink').data('disabled')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T06:47:51.477

试试这样

```
 $('#loginLink').data('disabled', 'yes'); 
```

# ruby-on-rails - Rails Arel 队列分析

> ID：14079339
> 
> 赞同：2
> 
> 时间：2012-12-29T06:35:58.000
> 
> 标签：ruby-on-rails, postgresql, group-by, arel

我正在尝试在 Rails 中进行队列分析查询，但在使用按最后操作日期分组的正确方法时遇到了麻烦。

我想以如下数据行结束：[http ://www.quickcohort.com/](http://www.quickcohort.com/)

```
count first_action last_action 
```

适用于去年注册的所有用户。`first_action`并被`last_action`截断到最近的月份。

获得按 分组的计数`first_action`很容易，但是当我尝试将其扩展为包括`last_action`我遇到的

```
ActiveRecord::StatementInvalid: PGError: ERROR:  aggregates not allowed in GROUP BY clause 
```

这是我到目前为止所拥有的

```
User
  .select("COUNT(*) AS count,
    date_trunc('month', users.created_at) AS first_action,
    MAX(date_trunc('month', visits.created_at)) AS last_action # <= Problem
  ")
  .joins(:visits)
  .group("first_action, last_action") # TODO: Subquery ?
  .order("first_action ASC, last_action ASC")
  .where("users.created_at >= date_trunc('month', CAST(? AS timestamp))", 12.months.ago) 
```

访问表跟踪用户对站点的所有访问。使用最新访问作为最后一个操作似乎应该很容易，但我在将其形成 SQL 时遇到了麻烦。

如果有更好的方法，我也愿意接受其他解决方案，但似乎单个 SQL 查询的性能最高。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T20:07:42.733

我认为您需要在子查询中执行此操作。就像是：

```
select first_action, last_action, count(1)
from (
    select
        date_trunc('month', visits.created_at) as first_action,
        max(date_trunc('month', visits.created_at)) as last_action
    from visits
    join users on users.id = visits.user_id
    where users.created_at >= ?
    group by user_id
)
group by first_action, last_action; 
```

我不确定在 ARel 中最优雅的方法是什么，但我认为它会是这样的。（直接使用 SQL 可能更容易。）

```
def date_trunc_month(field)
  Arel::Nodes::NamedFunction.new(
    'date_trunc', [Arel.sql("'month'"), field])
end

def max(*expressions)
  Arel::Nodes::Max.new(expressions)
end

users = User.arel_table
visits = Visit.arel_table

user_visits = visits.
    join(users).on(visits[:user_id].eq(users[:id])).
    where(users[:created_at].gteq(12.months)).
    group(users[:id]).
    project(
        users[:id],
        date_trunc_month(visits[:created_at]).as('first_visit'),
        max(date_trunc_month(visits[:created_at])).as('last_visit')
    ).
    as('user_visits')

cohort_data = users.
    join(user_visits).on(users[:id].eq(user_visits[:id])).
    group(user_visits[:first_visit], user_visits[:last_visit]).
    project(
        user_visits[:first_visit],
        user_visits[:last_visit],
        Arel::Nodes::Count.new([1]).as('count')
    ) 
```

# ios - 如何在ios中连接选定的表格视图字符串

> ID：14079341
> 
> 赞同：0
> 
> 时间：2012-12-29T06:36:14.677
> 
> 标签：ios

如何连接来自 tableview 的选定行数据并将其存储在 nsstring 中？

我选择了带有复选标记的行，并将它们单独打印在日志中。但是在选择 2 或 3 行之后，如何连接这些字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T06:39:48.757

尝试这个，

在.h

```
NSString *yourString; 
```

在 .m 中初始化您的字符串 viewDidLoad ，

```
yourString = @""; 
```

在 `didSelectRowAtIndexPath`方法

```
yourString = [yourString stringByAppendingFormat:@"%@",newString]; 
```

# python - Python、Windows、Ansi - 再次编码

> ID：14079343
> 
> 赞同：14
> 
> 时间：2012-12-29T06:36:27.627
> 
> 标签：python, windows, character-encoding, ansi

**你好呀，**

即使我真的尝试过......当谈到**Python**、**Windows**、**Ansi**和**字符编码**时，我陷入了困境并且有些绝望。我需要帮助，说真的......过去几个小时在网上搜索没有任何帮助，它只会让我发疯。

我是 Python 新手，所以我几乎不知道发生了什么。我即将学习这门语言，所以我的第一个程序*几乎*完成了，它应该自动从包含 mp3 的给定文件夹生成音乐播放列表。这工作得很好，除了一个问题......

**...我无法将元音变音*(äöü)*写入播放列表文件。**

在我找到*“错误编码”*数据的解决方案后，`sys.argv`我能够处理这个问题。从 MP3 中读取元数据时，我使用某种简单的字符替换来摆脱所有那些国际特殊字符，例如法语口音或带有斜线的疯狂斯堪的纳维亚语*“o”* *（我什至不知道如何键入它...）*。一切都好。

但我想至少将提到的元音变音写到播放列表文件中，这些字符在德国真的很常见。与元数据不同，我不关心一些丢失的字符或拼写错误的单词，这是相关的 - 因为现在我正在编写文件的路径。

我已经尝试了很多不同的编码和解码方法，我无法在这里全部列出.. 哎呀，我什至无法说出半小时前我尝试了哪些设置。我在网上、这里和其他地方找到了似乎可以用于某些目的的代码。不适合我的。

我认为棘手的部分是：问题似乎是我需要编写的文件的**Ansi格式。**正确 - 我实际上需要这个 Ansi-stuff。大约两个小时前，我实际上设法将我想要的任何内容写入 UFT-8 文件。像魅力一样工作......直到我意识到我的播放器*（Winamp，旧版本）*不知何故不适用于那些 UTF-8 播放列表文件。即使它在我的编辑器中看起来正确，它也无法解析路径。

如果我将文件格式更改回 Ansi，则包含特殊字符的路径会损坏。我只是猜测，但如果 Winamp 将此 UTF-8 文件读取为 Ansi，那将导致我现在遇到的问题。

所以...

1.  我必须在路径中写 äöü，否则将无法正常工作
2.  它必须是 ANSI-“编码”文件，否则将无法工作
3.  `line.write(str.decode('utf-8'))`诸如破坏文件功能之类的事情
4.  脚本开头的神奇注释在`# -*- coding: iso-8859-1 -*-`这里什么都不做*（尽管它对提到的元数据和其中允许的字符很有帮助......）*
5.  哦，我正在使用 Python 2.7.3。第三方模块依赖，你知道的...

有没有人可以引导我走出这个编码地狱？欢迎任何帮助。如果我需要 500 行代码用于其他函数或类，我会输入它们。如果有处理这些东西的模块，请告诉我！我会买的！任何有用的东西都会被测试。

感谢您的阅读，感谢您的任何评论，

问候！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-29T11:58:47.090

正如评论中提到的，你的问题不是很具体，所以我会尝试给你一些关于字符编码的提示，看看你是否可以将这些应用于你的具体情况！

# Unicode 和编码

这是一个关于编码的小入门。基本上，有两种方法可以在 Python 中表示文本：

*   `unicode`. 你可以认为这`unicode`是终极编码，你应该努力在任何地方使用它。在 Python 2.x 源文件中，`unicode`字符串看起来像`u'some unicode'`.
*   `str`. 这是编码文本 - 为了能够阅读它，您需要知道编码（或猜测它）。在 Python 2.x 中，这些字符串看起来像`'some str'`.

这在 Python 3 中发生了变化（`unicode`现在`str`和`str`现在`bytes`）。

# 怎么玩？

通常，确保您的代码`unicode`用于其执行和`str`用于 I/O 是非常简单的：

*   您*收到*的所有内容都经过*编码*，因此您`input_string.decode('encoding')`需要将其转换为`unicode`.
*   您需要*输出*的所有内容都是 unicode，但需要进行编码，因此您可以使用`output_string.encode('encoding')`.

* * *

最常见的编码是`cp-1252`在 Windows（在美国或欧盟系统上）和`utf-8`Linux 上。

# 将此应用于您的案例

### 我必须在路径中写 äöü，否则将无法正常工作

Windows 本机使用`unicode`文件路径和名称，因此您实际上应该始终使用`unicode`它们。

### 它必须是 ANSI-“编码”文件，否则将无法工作

当您写入文件时，请确保始终通过`output.encode('cp1252')`（或系统上的[任何编码 ANSI](https://stackoverflow.com/questions/701882/what-is-ansi-format)）运行您的输出。

### line.write(str.decode('utf-8')) 之类的东西破坏了文件的功能

到现在为止，您可能已经意识到：

*   如果`str`确实是一个`str`实例，Python 将尝试将其转换为`unicode`使用`utf-8`编码，但随后尝试再次对其进行编码（可能在 中`ascii`）以将其写入文件
*   如果`str`实际上是一个`unicode`实例，Python 将首先对其进行编码（可能在 中`ascii`，并且可能会崩溃）然后才能对其进行解码。

底线是，你需要知道如果`str`是`unicode`，你应该`encode`知道。如果它已经编码，请不要触摸它（如果编码不是您想要的，则不要触摸它！）`decode`。`encode`

### 脚本开头的神奇注释，如 # - *- coding: iso-8859-1 -* - 在这里什么都不做（尽管它对提到的元数据和其中允许的字符很有帮助......）

不足为奇，这只告诉 Python 应该使用什么编码来读取源文件，以便正确识别非 ascii 字符。

### 哦，我正在使用 Python 2.7.3。第三方模块依赖，你知道的...

Python 3 可能是 unicode 和编码方面的一次重大更新，但这并不意味着 Python 2.x 不能让它工作！

# 这会解决你的问题吗？

您不能确定，问题可能出在您正在使用的播放器上，而不是在您的代码中。

一旦你输出它，你应该确保你的脚本的输出是可以使用参考工具（比如 Windows 资源管理器）读取的。如果是，但播放器仍然无法打开它，您应该考虑更新到较新的版本。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-05-11T16:34:14.903

**在 Windows 上，有一种称为mbcs**的特殊编码可用，它在当前默认的 ANSI 代码页和 UNICODE 之间进行转换。例如在西班牙语 PC 上：

```
u'ñ'.encode('mbcs') -> '\xf1'
'\xf1'.decode('mbcs') -> u'ñ' 
```

在 Windows 上，ANSI 表示当前默认的多字节代码页。对于西欧语言 Windows ISO-8859-1，对于东欧语言 Windows ISO-8859-2) 编码字节字符串和其他语言的其他编码（视情况而定）。

更多信息请访问：

[https://docs.python.org/2.4/lib/standard-encodings.html](https://docs.python.org/2.4/lib/standard-encodings.html)

也可以看看：

[https://docs.python.org/2/library/sys.html#sys.getfilesystemencoding](https://docs.python.org/2/library/sys.html#sys.getfilesystemencoding)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T07:11:37.650

`# -*- coding`注释声明源代码的字符编码（因此是字节字符串文字，如`'abc'`）。

假设“播放列表”是指`m3u`文件，那么根据[本规范](http://schworak.com/blog/e39/m3u-play-list-specification/)，您可能会受到您正在使用的 mp3 播放器软件的支配。这个规范只说文件包含文本，没有提到什么字符编码。

我个人观察到各种 mp3 编码软件会对 mp3 元数据使用不同的编码。有些使用 UTF-8，有些使用 ISO-8859-1。因此，您可能必须允许在配置中指定编码并将其保留。

# javascript - addthis 的地理位置检测

> ID：14079348
> 
> 赞同：0
> 
> 时间：2012-12-29T06:37:27.437
> 
> 标签：javascript, geolocation, addthis

我无法在 addthis 欢迎栏上使用它。我已经成功完成了 addthis 的 api ( [http://support.addthis.com/customer/portal/articles/524574-welcome-bar-api#.UN6ISG_oStY](http://support.addthis.com/customer/portal/articles/524574-welcome-bar-api#.UN6ISG_oStY) ) 的所有配置，但我无法检测到位置。

这是一个仅用于检测来自美国的访问者的位置 java 脚本的示例。到达后，来自指定位置的访问者将被提示一条消息和指定到该位置的链接。

```
 <script type="text/javascript"   src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-50c562341cdc5d64"></script>
        <script type='text/javascript'>
            addthis.bar.initialize([
{

    "match": {

        "LocatedIn": "US"
    },
    "message": "Welcome",
    "action": {
        "type": "button",
        "text": "Follow us",
        "verb": "follow",

        "url": "http://www.twitter.com/example"
       }
      }
         ]);

        </script> 
```

任何人都可以让它工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T16:09:41.307

简单的修复——我测试了你的代码，直到我将“LocatedIn”更改为“locatedIn”之前它对我不起作用——它区分大小写。我希望它也能为你解决。

# iphone - 从应用程序拨打电话号码

> ID：14079349
> 
> 赞同：0
> 
> 时间：2012-12-29T06:37:28.410
> 
> 标签：iphone, xcode

我有一个 UITableView，并且我将 phonenumber 作为 UITableViewCell 中的 UILabel 之一。当我单击该特定标签时，我应该能够拨打该特定号码。对于 UILabel 响应点击，我使用了 UITapGesture。但在检测要呼叫的号码我使用了 [sender tag]，它会引发错误：“ **[UITapGestureRecognizer tag]：无法识别的选择器已发送到实例”**

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
  lblphone = [[UILabel alloc] initWithFrame:CGRectZero];
            lblphone.tag = 116;
            lblphone.backgroundColor = [UIColor clearColor];
            [lblphone setFont:[UIFont fontWithName:@"Helvetica" size:12]];
            [lblphone setLineBreakMode:UILineBreakModeWordWrap];
            [lblphone setUserInteractionEnabled:YES];
            UITapGestureRecognizer *tapGestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(labelButton:)];
            [tapGestureRecognizer setNumberOfTapsRequired:1];
            [lblphone addGestureRecognizer:tapGestureRecognizer];
            [tapGestureRecognizer release];
            [cell addSubview:lblphone];

}

 CGSize constraint5 = CGSizeMake(320, 2000.0f);
                            CGSize size5=[phone sizeWithFont:[UIFont fontWithName:@"Helvetica" size:14] constrainedToSize:constraint5 lineBreakMode:UILineBreakModeWordWrap];
                            lblphone =(UILabel *)[cell viewWithTag:116];
                            [lblphone setFrame:CGRectMake(10,businessname.frame.size.height+businessname.frame.origin.y,320, size5.height)];
                            lblphone.textAlignment=UITextAlignmentLeft;
                            lblphone.backgroundColor=[UIColor clearColor];
                            lblphone.numberOfLines=0;
                            lblphone.lineBreakMode=NSLineBreakByClipping;
                            lblphone.font=[UIFont fontWithName:@"Helvetica" size:14];
                            lblphone.text=[NSString stringWithFormat:@"%@ ",phone ];
                            [lblphone sizeToFit];
}

-(IBAction)labelButton:(id)sender
{

   selectedrowCall=[sender tag]; //error at this line

   [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"tel://%@",[lblphone.text]]];//error at this line also :Expected Identifier

} 
```

我如何才能呼叫仅在 tableviewcell 中单击的特定号码？我想确认我是否可以通过模拟器测试电话？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T06:58:15.883

您的问题最初在于此代码：

```
UITapGestureRecognizer *tapGestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(labelButton:)]; 
```

在您初始化 a`UITapGestureRecognizer`并将其操作设置为`labelButton:`但因为您没有指定参数并且该方法`labelButton:`正在请求`id`参数的地方，轻击手势识别器被传递到该`labelButton`方法而不是 a`UIButton`这就是它崩溃的原因，因为`UITapGestureRecognizer`无法响应to `tag`，它不是 UI 对象。

因此，要修复它实际上非常简单，请使用以下代码：

```
-(IBAction)labelButton:(UITapGestureRecognizer *)sender
{
   selectedrowCall=[[sender view] tag]; // here we are referencing to sender's view which is the UILabel so it works!
   [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"tel://%@",[lblphone text]]];    
} 
```

如果这有效，请投票/打勾！

# php - Linux 命令从 php 脚本输出中填充文件

> ID：14079353
> 
> 赞同：0
> 
> 时间：2012-12-29T06:39:13.517
> 
> 标签：php, linux, file, command-line, touch

我有一个 PHP 脚本，它生成一些复杂的 XML 输出。XML 当前作为网页输出，但我需要将它作为服务器上的物理文件而不是网页。

所以，我想知道是否有办法将我的 PHP 脚本的输出通过管道传输到 Linux touch 命令中，以便我的 PHP 输出填充或覆盖我服务器上的文件？

我目前正在尝试以下代码但没有成功：

```
touch test | php xml_reports.php 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T06:43:58.763

您实际上可以从命令行运行 PHP。

```
php filename.php 
```

因此，如果您的 php 文件包含以下内容：

```
<?php
    echo "Hello World";
?> 
```

终端中的输出将是“Hello World”（不带引号）。因此，如果您正在使用 PHP 编写应用程序，请尝试考虑如何在没有浏览器呈现输出的情况下处理它。我希望这会有所帮助。

[编辑] 您可能还想查看 shell_exec。(http://php.net/manual/en/function.shell-exec.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T06:49:24.050

假设我正确理解了您的问题，这是一个解决方案。然而，在这种情况下，PHP 代码本身不是通过管道传输 PHP 输出，而是在服务器上输出文件的副本。我不确定通过 linux 管道完成这项工作有多重要。另请注意，此解决方案是从[http://forums.codewalkers.com/showpost.php?p=40350&postcount=3](http://forums.codewalkers.com/showpost.php?p=40350&postcount=3)复制的。

> 1）在脚本的最开始放置这一行：
> 
> ```
> ob_start(); 
> ```
> 
> 2）在你的脚本的最后，把这个：
> 
> ```
> $page = ob_get_contents();
> ob_end_flush();
> $fp = fopen("output.html","w");
> fwrite($fp,$page);
> fclose($fp); 
> ```
> 
> 而且，bam，您应该将整个页面放在一个名为 output.html 的文件中。现在，您需要确定的一件事是网络服务器服务器可以编写文件 output.html。这意味着您需要确保网络服务器有权写入您计划存储该文件的任何目录。
> 
> 它是如何工作的？基本上，它只是缓冲脚本的所有输出。然后，将该缓冲区存储到一个字符串中。然后将缓冲区发送到浏览器。然后你将该字符串存储在一个文件中......

# iphone - 使用归档对象提交应用商店

> ID：14079357
> 
> 赞同：0
> 
> 时间：2012-12-29T06:39:45.203
> 
> 标签：iphone, ios, app-store, appstore-approval, nskeyedarchiver

因此，对于我的项目，我创建了一个实用程序应用程序，在其中我使用 NSKeyedArchiver 将数据存储到此存档文件中。

当我提交到应用商店时，它是否需要包含存档制作方式的代码，或者只是存档可以吗？

更多信息：我创建了可以解析数据并存储在存档文件中的类

在我的项目文件中，我将实用程序应用程序的 docs 目录中的存档复制到我的项目文件夹中。

然后我使用 NSKeyedUnarchiver 取消归档。

我只是不知道应用程序测试人员是否需要查看数据解析/存档创建。

你怎么看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T08:47:49.307

您只是`binary`在向 iTunesConnect 提交过程中提交；应用程序测试人员不需要看到/不会看到存档数据的创建：这个过程对他们来说是完全透明的。

# android - Phonegap 默认主题不显示带有箭头符号的 ListView

> ID：14079360
> 
> 赞同：0
> 
> 时间：2012-12-29T06:39:55.773
> 
> 标签：android, css, html, cordova, cordova-2.0.0

我创建了具有默认主题的 Listview 的项目。我的配置如下所述。

1.  **index.html**文件，其中完成了对 css、js 文件的所有导入，包括 cordova-2.0.0.js 和其他需要的东西。**Index.html**文件包含我的登录页面。
2.  现在，登录后，我转到 home.html 页面，其中我的列表视图配置如下：

    ```
    <div data-role="header" data-theme="b">
        <h1>Home Screen</h1>
    </div>

    <div data-role="content">    
      <ul data-role="listview" data-theme="c">
        <li><a href="profile.html"><img src="images/profile.png" alt="Profile">My Profile</a></li>
        <li><a href="courses.html"><img src="images/courses.jpg" width="189" height="189" alt="Courses">My Courses</a></li>
        <li><a href="contactsList.html"><img src="images/contact.jpg" width="160" height="160" alt="Contacts">My Contacts</a></li>
        <li><a href="mapPage.html"><img src="images/map.png" width="215" height="215" alt="Map">My Map</a></li>
      </ul>
    </div>

    <div data-role="footer" data-theme="b">
        <h4>&copy; 2012.</h4>
    </div> 
    ```

请注意，我没有在此处包含头文件。home.html 文件中只有这么多代码。**（请注意，因为它是 HTML，所以我无法在我配置了 data-role="page" 的地方显示我的父 div 标签）**

3.  现在，所有主题都在应用，只是箭头没有出现，而是出现了一个灰色点，如下图所示。

![在此处输入图像描述](../Images/1f78280c1e9b0b2cff3b96fca82c5be7.png)

任何人都可以解释为什么会这样吗？我已经检查了另一个项目，并且我拥有所有的导入。

下面是我的 index.html 导入：

```
<link rel="stylesheet" href="styles/custom.css" />

<link rel="stylesheet" href="styles/jquery.mobile-1.2.0.min.css" />

<script src="js/jquery-1.8.3.min.js"></script>

<!-- <script src="js/jquery-mobile-1.2.0.min.js"></script> -->
<script type="text/javascript" charset="utf-8" src="js/main.js"></script>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript" charset="utf-8" src="js/cordova-2.0.0.js"></script> 
```

**编辑**

我的 CSS **custom.css**如下

```
/* CSS Document */

#container0 {
    width: 100%;
    height: 100%;
    position: relative;
    overflow-x:hidden;
    border: 1px solid black;
}

#div0 {
    width: 100%;
    height: 100%;
    position: absolute;
}

#div1 {
    width: 100%;
    position: absolute;
    left: 100%;
    height: 100%;
}

/*#footer {
    margin-top:'10px';
}*/

button {
    display:block;
    text-align:center;
    margin:0 auto;
    width:100%;
    height:2em;
}

.loginBtn {
    width:100%;
}

.info {
    border:1px solid black;
    background:#eeeeff;
    margin:5px;
    padding:5px;
}

/* Map CSS Start */
html, body {
  height: 100%;
  margin: 0;
  padding: 0;
}

#map_canvas {
    width:520px;
  height: 900px;
}

/*@media print {*/
@media all and (orientation: landscape) {
  html, body {
    height: auto;
  }

  #map_canvas {
    width: 950px;
    height: 480px;
  }
}
/* Map CSS End */

.ui-content h2 {
    text-align:left;
    padding:0px;
    padding-left:10px;
    margin-bottom:10px;
}

.ui-content h4 {
    padding: 0px;
    padding-left:10px;
    margin-bottom: 5px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T08:21:05.390

在适当的地方使用上面的 jquery 文件并在锚标记之后尝试这个

```
<span class="ui-icon ui-icon-arrow-r ui-icon-shadow">&nbsp;</span> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T08:07:47.367

试试这个：

```
<link rel="stylesheet" href="custom.css" />

<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>

<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript" charset="utf-8" src="cordova-2.2.0.js"></script> 
```

**编辑 ：**

我解决了本地`jquery.mobile-1.2.0.min.css`文件。

首先从这个链接复制这个图像[箭头图标](http://code.jquery.com/mobile/1.2.0/images/icons-18-white.png)

您将获得名为`icons-18-white.png`.

将此图像保存到`www/images/icons-18-white.png`路径中。

而已。

这个对我有用。

谢谢。

# ios - 为什么这个形状没有动画？

> ID：14079363
> 
> 赞同：0
> 
> 时间：2012-12-29T06:40:30.507
> 
> 标签：ios, core-animation, calayer

我很难过为什么这个形状不会动画到另一条路径。我已经尝试过演示 CABasicAnimations，它已经奏效了。如果有人有任何想法，那就太棒了！

```
#import "AKTabBar.h"

@implementation AKTabBar

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        //customize tab bar
    }
    return self;
}

-(void)awakeFromNib {
    CAShapeLayer* tabBarShape = [CAShapeLayer layer];

    UIBezierPath* discoverPath = [UIBezierPath bezierPath];
    [discoverPath moveToPoint: CGPointMake(0, 98)];
    [discoverPath addLineToPoint: CGPointMake(0, 98)];
    [discoverPath addLineToPoint: CGPointMake(0, -0)];
    [discoverPath addLineToPoint: CGPointMake(27.91, -0)];
    [discoverPath addLineToPoint: CGPointMake(34, 7)];
    [discoverPath addLineToPoint: CGPointMake(39.78, -0)];
    [discoverPath addLineToPoint: CGPointMake(320, -0)];
    [discoverPath addLineToPoint: CGPointMake(320, 98)];
    [discoverPath closePath];

    UIBezierPath* sharePath = [UIBezierPath bezierPath];
    [sharePath moveToPoint: CGPointMake(0, 98)];
    [sharePath addLineToPoint: CGPointMake(0, 98)];
    [sharePath addLineToPoint: CGPointMake(0, -0)];
    [sharePath addLineToPoint: CGPointMake(40, -0)];
    [sharePath addLineToPoint: CGPointMake(47, 7)];
    [sharePath addLineToPoint: CGPointMake(39.78, -0)];
    [sharePath addLineToPoint: CGPointMake(320, -0)];
    [sharePath addLineToPoint: CGPointMake(200, 98)];
    [sharePath closePath];

    tabBarShape.path=discoverPath.CGPath;
    tabBarShape.fillColor = [UIColor redColor].CGColor;

//    UIImageView* menu = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"tabBarBackground"]];
    [self.layer addSublayer:tabBarShape];
//    menu.layer.mask=tabBarShape;
//  [ self addSubview:menu];

    CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"discoverPath"];
    animation.duration = 4.0;
    animation.toValue = (__bridge id)(sharePath.CGPath);
    [tabBarShape addAnimation:animation forKey:@"discoverPath"];

}

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T06:56:33.297

您`CABasicAnimation`正在尝试`discoverPath`为`CAShapeLayer`. 但是，`CAShapeLayer`没有这样的属性。

如果你这样做会发生什么？

```
CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"path"]; 
```

# java - 在重复字符之间拆分字符串

> ID：14079366
> 
> 赞同：8
> 
> 时间：2012-12-29T06:41:11.690
> 
> 标签：java, regex, split

我想获取任何给定的字符串并根据重复字符对其进行拆分。

例如，如果我要输入 string `abcaaabbc`，我想输出一个字符串数组，等于：`[abca, a, ab, bc]`。每次一个字符重复，我想开始一个新的字符串。

当然，可以使用循环执行此操作，但我想知道是否可以使用该`String.split()`方法实现它。如果是这样 - 那会`RegEx`是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-29T06:52:47.703

标记输入字符串，其中前一个字符（look-behind `(?<=(.))`）与下一个字符（look-ahead `(?=\\1)`）相同并`\1`捕获`(.)`。

```
 String str = "abcbabaaabbc";
    String regex = "(?<=(.))(?=\\1)";        
    System.out.println(Arrays.toString(str.split(regex))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-20T18:53:05.780

从性能的角度来看，我会坚持使用循环。它在 O(n) 时间内运行。众所周知， string.split(regex) 很慢。我最近用它代替了循环，发现与 O(n) 循环相比，它是 O(n^2)。

KISS 校长在这里工作

# iphone - 独家新闻应用程序背景 scolling

> ID：14079367
> 
> 赞同：0
> 
> 时间：2012-12-29T06:41:16.700
> 
> 标签：iphone, objective-c, cocos2d-iphone, parallax

流行的 iPhone 游戏[Scoops](https://itunes.apple.com/en/app/scoops-ice-cream-fun-for-everyone/id291591378?mt=8)有很酷的滚动背景。我目前正在使用 cocos2d，我想知道如何实现类似的滚动背景？

看起来他们只是使用了一个非常长的背景图像，但据说你可以永远玩下去。你如何在 cocos2d 中滚动一个大的背景图像，你会一直重置它的位置。

是否有更轻量级的视差节点或类似的东西，但在某些时候仍然可以从天空过渡到太空？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T11:12:43.740

我关于[使用 cocos2d 滚动的](http://www.learn-cocos2d.com/2012/12/ways-scrolling-cocos2d-explained/)文章应该可以回答您的问题。我做了一个有根据的猜测，并说他们使用了我称之为“假滚动”的第一种方法，其中滚动似乎是无止境的，因为滚动背景的位置会定期重置。

# node.js - 使用 cookieSession 授权用户使用 socket.io

> ID：14079368
> 
> 赞同：2
> 
> 时间：2012-12-29T06:41:18.437
> 
> 标签：node.js, socket.io, session-cookies

我正在使用socket.io的授权方法（[这里](http://howtonode.org/socket-io-auth)详细介绍）通过检查与用户关联的cookie来检查用户是否被授权使用我的应用程序。

上面的博客文章相当直截了当，但我使用 cookieSessions 将会话数据存储在 cookie 中。一个很好的问题是关于[stackoverflow](https://stackoverflow.com/questions/11709991/how-to-decode-a-cookie-secret-set-using-connects-cookiesession)，但我无法弄清楚。

我想知道如何解密 cookieSession 数据以访问会话数据。我的一些示例代码：

```
io.set('authorization', function (data, accept) {

//Check cookie for session data

accept(null, true);}); 
```

换句话说，我如何访问socket.io中的cookieSession？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T14:15:08.707

我使用以下（有护照，但没关系）：

```
io.set('authorization', function(data, accept) {
    var getCookieSession = require('./lib/cookie_session');
    var session = getCookieSession(data.headers, {
        key: 'YOUR KEY',
        secret: 'YOUR SECRET'
    });

    if (session.passport.user) {
        accept(null, true);
    } else {
        accept(null, false);
    }
}); 
```

getCookieSession 是以下模块：

```
var connect = require('connect');

var cookieParser = connect.cookieParser;
var cookieSession = connect.cookieSession;

module.exports = function(headers, opts) {
    var key = opts.key || '_session';
    var secret = opts.secret || '';
    var req = { headers: headers, originalUrl: "/" };
    var res = { on: function() {} };
    var next = function () {};

    cookieParser(secret)(req, res, next);
    cookieSession({ key: key })(req, res, next);

    return req.session;
}; 
```

# multithreading - 我们可以通过使用限制线程池来提高 Netty Server 的性能吗

> ID：14079373
> 
> 赞同：0
> 
> 时间：2012-12-29T06:42:11.293
> 
> 标签：multithreading, netty

任何人都可以帮助我根据处理器和 RAM 修复正确的线程池大小。

**我们可以修复工作线程的限制以获得更好的性能吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T06:40:10.453

您可以将 I/O 工作线程的数量指定为构造函数参数。不要使用固定的线程池执行器。使用无界缓存线程池。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T07:07:17.093

试试这样：

```
 ChannelFactory factory = new NioServerSocketChannelFactory(Executors.newCachedThreadPool(),
            new OrderedMemoryAwareThreadPoolExecutor(workerMax, 0, 0)); 
```

查看[文档](http://docs.jboss.org/netty/3.1/api/org/jboss/netty/handler/execution/OrderedMemoryAwareThreadPoolExecutor.html)以获取更多详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T07:34:33.220

没有一般的答案。所有这一切都取决于工作量等。所以你不会附加一个分析器来查看你的工作线程有多忙等等。最重要的是你需要确保你没有阻塞代码在他们中。如果你有，你需要一个 ExecutionHandler。

# jquery - 使用 jquery 选中和取消选中 CheckBox

> ID：14079379
> 
> 赞同：2
> 
> 时间：2012-12-29T06:43:08.113
> 
> 标签：jquery, jquery-selectors

单击标题复选框，我有一个 GridView 。我想检查 ItemTemplate 中的所有 CheckBox。

我曾尝试通过 Jquery 实现，但没有奏效，因为

```
 $(document).ready(function () {
        $('#<%=ChkSelectAll.ClientID %>').click(function () {
            $('#<%=ChkSelectAll.ClientID %>').is(":checked")(function () {
                $('#<%=ChkSelect.ClientID %>').prop('checked', true);
            });
        });
    }); 
```

我有一个 Gridview 作为

```
<Columns>
            <asp:TemplateField HeaderStyle-Width="20px">
                <HeaderTemplate>
                    <asp:CheckBox ID="ChkSelectAll" runat="server"  />
                </HeaderTemplate>
                <ItemTemplate>
                    <asp:CheckBox ID="ChkSelect" runat="server" />
                </ItemTemplate>
            </asp:TemplateField>
</Column> 
```

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-29T06:54:29.017

检查这个[小提琴](http://jsfiddle.net/mdjrX/)。如果你有很多复选框而不是使用 class 而不是 id 因为 ID 应该是唯一的

```
$('#ChkSelectAll').click(function () {
if($(this).is(":checked")){
    $('.ChkSelect').prop('checked', true);
}
}); 
```

[用小提琴](http://jsfiddle.net/cY6La/)编辑代码

```
$('#ChkSelectAll').click(function () {
  if($(this).is(":checked")){
    $('.ChkSelect').prop('checked', true);
  }else{
    $('.ChkSelect').prop('checked', false);
  }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T07:04:20.690

```
$("#ChkSelectAll").click(function(){
if($(this).is(":checked")){
$('#ChkSelect').attr('checked', true);
}
else{
$('#ChkSelect').attr('checked', false);
}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-29T06:47:33.487

gridview 将为每一行具有唯一的 id，因此您不能使用单个 id 更改所有这些。

改变

```
$('#<%=ChkSelect.ClientID %>').prop('checked', true); 
```

到

```
$('[id*=ChkSelect]').prop('checked', true); 
```

您可以缩短代码。

```
$(document).ready(function () {
      $('#<%=ChkSelectAll.ClientID %>').click(function () {           
            $('[id*=ChkSelect]').prop('checked', this.checked);           
      });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-25T06:21:02.983

我尝试了在 stackoverflow 上找到的几种解决方案，但都没有奏效。我使用 jquery-1.9.1.min.js 和 chrome 来测试它。这是我的工作解决方案

```
$(document).ready(function() {
  $('#goOffline').click(function(event) {
    if($('#goOffline').is(':checked')){
        $('#goOffline').attr("checked","checked");
    } else {
        $('#goOffline').removeAttr("checked");
    }
}); 
```

});

基本上发生的是我通过在点击事件上使用 $('#goOffline') atach 来选择复选框元素。然后我测试它是否被检查。如果它被检查而不是附加属性检查，如果没有，则删除属性检查。请注意，我的 html 输入标记如下所示：

```
<label for="goOffline" class="checkbox">
<input type="checkbox" name="goOffline" id="goOffline">
    Go offline
</label> 
```

# asp.net - 上传多个文件的表格设计（如 yahoo 邮件）

> ID：14079386
> 
> 赞同：0
> 
> 时间：2012-12-29T06:44:08.453
> 
> 标签：asp.net, sql-server

就像我们在雅虎中发送电子邮件一样，现在在我的 aspx 中，我想创建一个页面，它的名称是“草稿”，在这个页面中有一个主题字段（txtsubject”）和上传控件，带有上传按钮，用于附加多个文件和在数据库表中保存/发送的另一个按钮，现在我不知道它应该如何成为我的设计表。

我从网上阅读了一些关于如何上传多个文件的文章，并且在所有这些文件中都有一个如下设计的表格

```
Fileid
File name
Content type 
```

# sql - 如何在同一张表中合并多个查询

> ID：14079388
> 
> 赞同：7
> 
> 时间：2012-12-29T06:44:13.400
> 
> 标签：sql, sql-server, tsql, select

我有下表：

```
CREATE TABLE studenttest 
(
    YEAR INT,
    DEPT VARCHAR(5),
    SEM INT,
    REGNO INT,
    NAME VARCHAR(20),
    ENGLISH VARCHAR(2),
    MATHS VARCHAR(2),
    PHYSICS VARCHAR(2),
    CHEMISTRY VARCHAR(2),
    EG VARCHAR(2),
    FOC VARCHAR(2),
    LAB1 VARCHAR(2),
    LAB2 VARCHAR(2),
    LAB3 VARCHAR(2)
) 
```

使用以下数据：

```
INSERT INTO studenttest 
 values
 (2010,'cse',3,1,'saravaanan','a','b','c','d','ra','f','g','h','i'),   
 (2010,'cse',3,2,'raja','ra','b','c','d','e','f','g','h','i'),
 (2010,'cse',3,3,'selvam','a','b','c','d','e','f','g','h','i') 
```

我想查询这些数据以获取所有科目中没有“ra”成绩的学生的结果*集*。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-29T06:51:13.807

```
SELECT  a.*
FROM    studenttest a
        LEFT JOIN
        (
          SELECT regno, name
          FROM studenttest
          WHERE ENGLISH = 'ra' OR
                MATHS = 'ra' OR
                PHYSICS = 'ra' OR
                CHEMISTRY    = 'ra' OR
                EG  = 'ra' OR   
                FOC = 'ra' OR   
                LAB1 = 'ra' OR  
                LAB2 = 'ra' OR  
                LAB3 = 'ra'
        ) b ON a.regno = b.regno 
               AND a.Name = b.Name   -- this line is OPTIONAL
WHERE   b.regno IS NULL 
```

*   [SQLFiddle 演示链接](http://sqlfiddle.com/#!6/655a0/5)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-29T13:44:31.990

[只是@Mahmoud's version](https://stackoverflow.com/questions/14079388/how-to-combine-more-than-one-query-in-same-table/14079442#14079442) with the `UNPIVOT`and the的替代方案`CTE`，这也可以使用 a 来完成`UNION ALL`：

```
SELECT Name
FROM
(
  SELECT Name, ENGLISH grade, 'English' subject
  from studenttest
  union all
  SELECT Name, MATHS grade, 'MATHS' subject
  from studenttest
  union all
  SELECT Name, PHYSICS grade, 'PHYSICS' subject
  from studenttest
  union all
  SELECT Name, CHEMISTRY grade, 'CHEMISTRY' subject
  from studenttest
  union all
  SELECT Name, EG grade, 'EG' subject
  from studenttest
  union all
  SELECT Name, FOC grade, 'FOC' subject
  from studenttest
  union all
  SELECT Name, LAB1 grade, 'LAB1' subject
  from studenttest
  union all
  SELECT Name, LAB2 grade, 'LAB2' subject
  from studenttest
  union all
  SELECT Name, LAB3 grade, 'LAB3' subject
  from studenttest
) un
where grade <> 'ra'
group by name
having count(grade) = 9 
```

执行与更少代码`UNPIVOT`相同的步骤。`UNION ALL`当您的数据不像您的表那样规范化时，这些查询非常有用。

然后，如果您想要所有数据（不仅仅是名称），您可以再次将上述查询重新加入表：

```
select *
from studenttest t
inner join
(
  SELECT Name
  FROM
  (
    SELECT Name, ENGLISH grade, 'English' subject
    from studenttest
    union all
    SELECT Name, MATHS grade, 'MATHS' subject
    from studenttest
    union all
    SELECT Name, PHYSICS grade, 'PHYSICS' subject
    from studenttest
    union all
    SELECT Name, CHEMISTRY grade, 'CHEMISTRY' subject
    from studenttest
    union all
    SELECT Name, EG grade, 'EG' subject
    from studenttest
    union all
    SELECT Name, FOC grade, 'FOC' subject
    from studenttest
    union all
    SELECT Name, LAB1 grade, 'LAB1' subject
    from studenttest
    union all
    SELECT Name, LAB2 grade, 'LAB2' subject
    from studenttest
    union all
    SELECT Name, LAB3 grade, 'LAB3' subject
    from studenttest
  ) un
  where grade <> 'ra'
  group by name
  having count(grade) = 9
) t2
  on t.name = t2.name 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/72d0e/21)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-29T06:52:45.743

你可以这样做：

```
WITH AllSubjectsGrades
AS
(
  SELECT Name, Grade
  FROM
  (
    SELECT 
      Name, 
      ENGLISH, MATHS, PHYSICS,  CHEMISTRY,
      EG,  FOC, LAB1, LAB2, LAB3
    FROM studenttest
  ) t
  UNPIVOT
  (
    grade
    FOR Subject IN(ENGLISH, MATHS, PHYSICS, CHEMISTRY,
                   EG,  FOC, LAB1, LAB2, LAB3)
  ) u
)
SELECT Name
FROM AllSubjectsGrades
WHERE GRADE <> 'ra'
GROUP BY Name
HAVING COUNT(GRADE) = 9; 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!3/72d0e/12)

这只会给你 student `selvam`，因为在英语中有 'ra `saravaanan`'`EG`和`raja`有 'ra'。但`selvam`从来没有上`ra`过任何科目。就是这样

```
GROUP BY Name
HAVING COUNT(GRADE) = 9; 
```

做。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-29T13:50:44.187

另一种方法：

```
SELECT * 
FROM studenttest
WHERE 'ra' NOT IN 
      (ENGLISH, MATHS, PHYSICS, CHEMISTRY, EG, FOC, LAB1, LAB2, LAB3) ; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-29T06:58:37.650

你是这个意思吗？

```
SELECT * 
FROM studenttest
WHERE 
    ENGLISH <> 'ra' AND
    MATHS <> 'ra' AND
    PHYSICS <> 'ra' AND
    CHEMISTRY    <> 'ra' AND
    EG  <> 'ra' AND   
    FOC <> 'ra' AND   
    LAB1 <> 'ra' AND  
    LAB2 <> 'ra' AND
    LAB3 <> 'ra' 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-29T09:57:41.857

```
SELECT *
FROM studenttest
WHERE ENGLISH + ',' + MATHS + ',' + PHYSICS + ',' + CHEMISTRY + ',' + EG + ',' + FOC + ',' + LAB1 + ',' + LAB2 + ',' + LAB3 NOT LIKE '%ra%' 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/232af/2/0)上的演示[](http://sqlfiddle.com/#!3/232af/2/0)

# wpf - 在运行时添加 datagridtemplate 列和数据

> ID：14079389
> 
> 赞同：1
> 
> 时间：2012-12-29T06:44:16.990
> 
> 标签：wpf, datagrid, datagridtemplatecolumn

我有一个在设计时定义的列的数据网格。

```
 <DataGrid.Columns>
            <DataGridTemplateColumn>
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal">
                            <Image Opacity="50" Width="50" Height="50" Source="{Binding Converter={StaticResource IntToImageConverter}}" />

                        </StackPanel>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
        </DataGrid.Columns> 
```

但在我的应用程序中，列数和行数将在运行时根据数据表确定。
如何创建此模板列（通过调用上述模板）以及如何向其中添加行（列数约为 600-1000）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T07:02:19.373

我认为最好的解决方案是将 Columns 属性绑定到列列表并使用 ValueConverter 来放置您的逻辑，以选择您已经在资源中为不同类型的数据行定义的正确 DataTemplate。

# android - Android ImageButton 背景的挑战

> ID：14079392
> 
> 赞同：2
> 
> 时间：2012-12-29T06:45:27.023
> 
> 标签：android, xml, bitmap, scrollview, drawable

好吧，所以我试图弄清楚这一点，不知道如何在下面继续是一个 ScrollView，它的外观设置为 @drawable/patterrepeat

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:fillViewport="false" 
    android:background="@drawable/patternrepeat">
</ScrollView> 
```

现在 patternrepeat 是一个 xml 可绘制对象，如下所示

```
<?xml version="1.0" encoding="utf-8"?>
<bitmap xmlns:android="http://schemas.android.com/apk/res/android" 
    android:src="@drawable/pattern"
    android:tileMode="repeat"/> 
```

现在这个位图的 src 是一个 PNG 图像。

挑战是如何访问这个“PROGRAMMATICALLY” ScrollView---->Bitmap----->Bitmap Original PNG Sources

原因是原始源被平铺以创建位图，然后将其加载到 ScrollView 以创建背景...

一个人将如何进行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T07:40:56.263

```
// get bg drawable first
Drawable d = scrollView.getBackground();

// there are many types of drawables. In you case BitmapDrawable 
// (according to your xml) should be returned. So...
if (d instanceof BitmapDrawable) { // check drawable type just in case
    Bitmap sourceBitmap = ((BitmapDrawable)d).getBitmap();
} 
```

sourceBitmap 是你需要的。

# android - 在android中使用dom解析特殊字符的xml

> ID：14079410
> 
> 赞同：0
> 
> 时间：2012-12-29T06:48:03.753
> 
> 标签：android, xml

我有以下xml，但是当我解析它时，解析器在'&'处中断，我只有android。结果如何获得android和iphone？任何帮助，将不胜感激。

```
<summary>android&amp;iphone</summary> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T06:50:45.773

从服务器发送数据时，用“##AND##”之类的切换“&”并在客户端重新切换

# height - 具有最大高度的相对高度大小

> ID：14079413
> 
> 赞同：2
> 
> 时间：2012-12-29T06:48:33.253
> 
> 标签：height, fluid-layout, css

我正在尝试将高度设置为相对于屏幕尺寸（高度 = 12%），但我不希望它超过某个像素高度（即最大高度：150 像素）。什么是合适的CSS。我努力了：

```
.titleBar {
    position: relative; 
    background-color: #5C755E; 
    padding: 1%; 
    height: 12%; 
    max-height: 100px; 
    border-bottom: .45em solid #DEB887; 
    top:0; 
    left:0; 
    width: 100%;
} 
```

但这忽略了 max-height 属性。在我的大桌面屏幕上，标题栏变成 200 像素（太大了）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T09:28:24.337

您需要使用最小高度而不是高度。除非设置为自动，否则高度会覆盖最小和最大高度。高度和最小高度的组合（除非高度：自动）忽略最小/最大高度。

这应该有效。

```
.titleBar {
    position: relative; 
    background-color: #5C755E; 
    padding: 1%; 
    min-height: 12%; 
    max-height: 100px; 
    border-bottom: .45em solid #DEB887; 
    top:0; 
    left:0; 
    width: 100%;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T07:10:44.240

如果您有父元素，则需要为父元素添加高度。因此，如果您向父元素添加高度 432px，则 div 现在的高度将为 36px。

另外，一些注意事项。

*   您应该选择使用 em 或像素。不要同时使用两者。
*   如果为元素添加属性border-box，宽度将显示为页面的100%，而不是页面的100%，然后添加内边距，结果会稍微多一些。
*   您可能还想添加一个最小高度。

希望这可以帮助！

# javascript - Ajax 函数不适用于动态 div

> ID：14079414
> 
> 赞同：1
> 
> 时间：2012-12-29T06:48:36.500
> 
> 标签：javascript, ajax, onclick

我的 onclick 功能是：

```
$(document).ready(function() {
    $('.mydata').click(function() {
        alert($(this).attr('data'));
    });
});​ 
```

静态元素将起作用：

```
<div><span id='moreinfo' class='mydata' data="25">Click Me!</span></div>
<div><span id='moreinfo' class='mydata' data="250">Click Me Too!</span></div> 
```

但是动态填充相同元素的 div 对不会触发该函数。我究竟做错了什么？

代码示例位于：http: [//jsfiddle.net/KubXr/](http://jsfiddle.net/KubXr/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T06:53:51.560

您需要事件委托：

```
$(function(){
  $(document).on('click', '.mydata', function() {
    alert($(this).attr('data'));
  });
}); 
```

这意味着，任何元素，无论是现有的还是未来的，动态添加的，如果包含`mydata`该类，都将触发事件。

# javascript - 在 Python 中将 JavaScript 渲染为 HTML？

> ID：14079416
> 
> 赞同：3
> 
> 时间：2012-12-29T06:49:13.193
> 
> 标签：javascript, python, html, rendering, static-files

### 什么

我的网络应用是通过谷歌的[AngularJS](http://angularjs.org/)动态化的。

我希望生成我的页面的静态版本。

### 为什么

像谷歌这样的网络爬虫执行和渲染 JavaScript；但不要以与静态等价物相同的方式对待内容。

参考：

*   [大量使用 JavaScript 是否会对 Googleability 产生不利影响？](https://softwareengineering.stackexchange.com/q/151440)（程序员 StackExchange）
*   [使 AJAX 应用程序可抓取](https://developers.google.com/webmasters/ajax-crawling)（适用于网站管理员的 Google 文档）

### 如何

不知道具体如何——这就是我问的原因——但我想访问与浏览器的“检查元素”相同的源；而不是：`Ctrl`+ `U`（查看页面源代码）显示的来源。

一旦我有一个呈现页面的脚本；“吐出” HTML+CSS；我会将那些“生成”的文件放在我的网络服务器上。然后将安排一个“cron”作业以定期重新生成文件。

随后将提供这些静态文件而不是动态文件；当 JavaScript 被禁用和/或当刮板“访问”该站点时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T05:43:49.760

这是一个解决方案，但我非常怀疑我能否找到可以运行它的公共 PaaS 云：

```
import spynner

if __name__=='__main__':
    url = "http://angular.github.com/angular-phonecat/step-10/app/#/phones"
    browser = spynner.Browser()
    browser.create_webview(True)
    browser.load(url, load_timeout=60)
    print browser._get_html()
    # ^ Can pipe this to a file, POST it to my server or return it as a string
    browser.close() 
```

包：[Spynner（在 Github 上）](https://github.com/makinacorpus/spynner/)

# iphone - 我的应用程序在 Retina 4 英寸显示屏上运行良好，3.5 英寸显示屏出现问题

> ID：14079427
> 
> 赞同：-3
> 
> 时间：2012-12-29T06:51:08.837
> 
> 标签：iphone, retina-display

我的 iphone 应用程序在 a 上运行良好`4-inch display`，但在 `3.5 inch display`.

由于我是新用户，因此无法将图像上传到此问题。

发生的情况是，当我在 3.5" 显示器上查看它时。所有的文本框都在这里和那里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T07:16:07.733

您有 AutoResizing subViews 的问题.....请阅读本教程..... [http://www.techotopia.com/index.php/IOS_4_iPhone_Rotation,_View_Resizing_and_Layout_Handling](http://www.techotopia.com/index.php/IOS_4_iPhone_Rotation,_View_Resizing_and_Layout_Handling)

这可能会帮助你..

# windows-phone-7 - 如何在 Windows Phone 7 上等待结束工作异步回调 HttpWebRequest？

> ID：14079430
> 
> 赞同：1
> 
> 时间：2012-12-29T06:51:16.220
> 
> 标签：windows-phone-7, asynchronous, httpwebrequest, compact-framework

对不起，问题已经在stackoverflow上，但我没有找到答案。也许它是经典的，但我不明白，如何解决这个问题:(我有使用 Web 服务的 Singletone 类：

```
public sealed class GYAccessService
    {
        static GYAccessService instance = null;
        static readonly object padlock = new object();
        public string Atoken { get; set; }
        public string Login { get; set; }
        public string Password { get; set; }
        public string Uid { get; set; }
        const string UrlRequest = "http://site.html";

    private GYAccessService()
    {

    }

    public static GYAccessService Instance
    {
        get
        {
            lock (padlock)
            {
                if (instance == null)
                {
                    instance = new GYAccessService();
                }
                return instance;
            }
        }
    }

    public void sendPost(string postData)
    {
        PostData = "request=" + postData;
        HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create(UrlRequest);
        webRequest.Method = "POST";
        webRequest.ContentType = "application/x-www-form-urlencoded";
        webRequest.Accept = "application/json";
        webRequest.AllowAutoRedirect = true;
        // Start the request
        webRequest.BeginGetRequestStream(new AsyncCallback(getRequestStreamCallback), webRequest);

    }

    private void getRequestStreamCallback(IAsyncResult asynchronousResult)
    {
        HttpWebRequest webRequest = (HttpWebRequest)asynchronousResult.AsyncState;
        // End the stream request operation
        Stream postStream = webRequest.EndGetRequestStream(asynchronousResult);

        byte[] byteArray = Encoding.UTF8.GetBytes(PostData);

        // Add the post data to the web request
        postStream.Write(byteArray, 0, byteArray.Length);
        postStream.Close();

        // Start the web request
        webRequest.BeginGetResponse(new AsyncCallback(getResponseCallback), webRequest);
    }

    private void getResponseCallback(IAsyncResult asynchronousResult)
    {
        try
        {
            HttpWebRequest webRequest = (HttpWebRequest)asynchronousResult.AsyncState;
            HttpWebResponse response;

            // End the get response operation
            response = (HttpWebResponse)webRequest.EndGetResponse(asynchronousResult);
            Stream streamResponse = response.GetResponseStream();
            StreamReader streamReader = new StreamReader(streamResponse);
            var Response = streamReader.ReadToEnd();
            streamResponse.Close();
            streamReader.Close();
            response.Close();
            using (MemoryStream stream = new MemoryStream(Encoding.Unicode.GetBytes(Response)))
            {
                DataContractJsonSerializer serializer = new DataContractJsonSerializer(typeof(ServiceResponse));
                ServiceResponse res = (ServiceResponse)serializer.ReadObject(stream);
                // I want to return res  in main thread
            }

        }
        catch (WebException e)
        {
            // Error treatment                
           ServiceResponse err = new ServiceResponse();
           err.Message = e.Message;
        }
    }

    public string getRequestString(string model, string method, Params parametrs, string auth = null)
    {
        Function func = new Function();
        func.Model = model;
        func.Method = method;
        func.Params = parametrs;
        ServiceRequest req = new ServiceRequest() { Function = func };
        string json = JsonConvert.SerializeObject(req);
        ServiceResponse deserializedProduct = JsonConvert.DeserializeObject<ServiceResponse>(json);
        return json;
    }
} 
```

我在主线程中调用了 sendPost()，我想在这个函数中返回响应。

```
 GYAccessService gy = GYAccessService.Instance;
 gy.sendPost(postData); 
 //I want to use the response here 
```

但是在 WP 7 HttpWebRequest 中没有 GetResponse，只有 BeginGetResponse。我使用回调，但不知道如何从回调返回响应。我忍受了，我可以设置属性响应我的 Singletone 并在结束异步回调后获取它，但我不知道如何阻止异步回调。这真的是个问题，我尝试使用 WaitOne()/Set() - 别帮我，我的应用程序刚刚冻结。我尝试使用 IAsyncResult 句柄，但没有成功。如何等待结束工作异步回调？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T12:37:05.207

您需要使用该`EndGetResponse`方法并在其中处理结果。它是异步的，所以你调用后无法立即得到结果`gy.sendPost(postData);`，你必须将其用作回调。

如果我可以建议，这种 HTTP 调用有一种更简单的方法，请使用[RestSharp](http://restsharp.org/)。它是一个很棒且易于使用的库，也适用于 Windows Phone。

# php - PHP中布尔评估和！empty之间的区别

> ID：14079437
> 
> 赞同：0
> 
> 时间：2012-12-29T06:52:11.883
> 
> 标签：php, boolean

在 PHP 中，有什么区别：

```
if($might_not_be_set) doStuff(); 
```

和：

```
if(!empty($might_not_be_set)) doStuff(); 
```

前一种方法用未定义的变量通知使 Apache 日志混乱，但我看不出不使用它的原因 - 它有什么不同？

PS。我不想使用`isset()`- 评估为布尔值正是我想要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T07:02:30.777

empty() 将评估零长度字符串或 NULL 为 TRUE，而任何更长的字符串（或整数或布尔值）将为 FALSE。因此，你的 !empty() 只会确保那里有*一些*价值，不一定是你想要的。

例如，对*字符串*1、false 和 true 的 empty() 检查都评估为 FALSE，而*字符串*0 的评估结果为 TRUE。

我建议无论你使用什么，你都应该痛苦地向下一个人明确说明你的期望/不期望..即使那只是六个月后的你。

这是一个详细的比较： http: [//php.net/manual/en/types.comparisons.php](http://php.net/manual/en/types.comparisons.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T07:04:06.850

您自己说过：第一种方法使日志杂乱无章，并带有有关未声明变量的警告。这两种方法在功能上是等效的，但明确一点也没有什么坏处。我会选择 !empty() 因为它既明确又避免混乱。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-29T06:55:22.560

`empty()`确定一个变量是否被认为是空的。如果变量不存在或其值等于 FALSE，则认为该变量为空。**如果变量不存在，empty() 不会生成警告**。

[http://php.net/manual/en/function.empty.php](http://php.net/manual/en/function.empty.php)

# file - 试图获取有权查看 Google Drive 中文件的组列表

> ID：14079438
> 
> 赞同：2
> 
> 时间：2012-12-29T06:52:12.780
> 
> 标签：file, google-apps-script, google-drive-api

好的，我正在为我们的 Intranet 编写一个 Google Apps 脚本，并且我希望能够显示 Google Drive 上文件夹中的文件列表。但是，我只想显示用户有权访问的文件。

有一个方法，`getViewers`，它将返回一个字符串列表：

[https://developers.google.com/apps-script/class_file#getViewers](https://developers.google.com/apps-script/class_file#getViewers)

这样做的问题是，虽然它返回权限列表中个人的电子邮件地址，但它返回**组名称**。这不太理想，因为无法使用[GroupsManager](https://developers.google.com/apps-script/class_groupsmanager#getGroup)获取组对象——它只需要组 ID。

尽管如此，我还是可以做一些事情。我尝试过的一件事是：

```
var files = DocsList.getFolderById('0B_Zfq-SOMETHINGIJUSTMADEUP').getFiles();
for (f = 0; f < files.length; f++){
    var viewers = files[f].getViewers();
    var flag = false;
    // userGroups is the list of group objects, from this session's user
    for (i=0; i < usersGroups.length; i++){
        var groupName = userGroups[i].getName();
        if (viewers.indexOf(groupName) > -1){
            flag = true;
        }
    }
    if (flag){
        // print the link to file within the HTML template
    }
} 
```

但是由于显而易见的原因，加载页面需要很长时间。它在 5 分钟内加载。我真正需要的是能够从该`getViewers`方法中获取组电子邮件地址列表。它为个人用户返回电子邮件，但为组返回组名，这似乎真的很奇怪。有谁知道任何解决方案或解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T12:54:37.030

Your best bet will probably be to use a [cache](https://developers.google.com/apps-script/best_practices#cacheService) with the groupIds mapped to group name and then use that instead of the GroupManager service otherwise it will be an age every time the script runs. Depending on how 'live' the docs list is for the Intranet site, you could speed things up also using a cache for the directory map.

If the permissions of files and directory listing are VERY changeable then the cache could be pre-populated by a helper script running on a [time-based-trigger](https://developers.google.com/apps-script/class_triggerbuilder#timeBased) to suit your needs.

This is a good suggestion to add on the [issue tracker](http://code.google.com/p/google-apps-script-issues/issues/list) as a Feature Request.

# google-chrome - Chrome 扩展在它发出的每个帖子请求时都运行？

> ID：14079440
> 
> 赞同：0
> 
> 时间：2012-12-29T06:52:36.477
> 
> 标签：google-chrome, google-chrome-extension

我已经想出了如何在用户明确完成时在每次页面加载时运行脚本，但我想在每次它自己向数据库或广告服务器发布帖子或获取请求时运行我的脚本. [例如在 gmail 上，如果我们密切关注请求（可能是 firebug - 控制台 - 全部），我们将看到在特定时间后，浏览器会自行触发 POST 请求。]

有什么办法可以做到吗？

实际上，我正在编写我的第一个扩展程序，因此它清楚地表明我对此知之甚少。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T11:20:13.247

你应该在你的扩展中使用[webRequest模块。](https://developer.chrome.com/extensions/webRequest.html)在清单中指定适当的权限后，例如：

```
"permissions": [
    "webRequest",
    "*://*/*"
  ],
"background": {
    "scripts": ["background.js"]
 }, 
```

您可以在后台页面（示例中的“background.js”）中注册任何所需的处理程序，例如`onBeforeRequest`、`onBeforeSendHeaders`、`onHeadersReceived`、`onCompleted`等。我认为这些名称是不言自明的，但您可以查阅上述文档。

根据您的要求，您可以定义阻止请求、修改标头、仅读取并以某种方式分析 http-headers 的事件处理程序。

读取 http 标头并可能更改它们的示例：

```
chrome.webRequest.onBeforeSendHeaders.addListener(
function(details)
{
  console.log(details.url);
  if(details.method == 'POST')
  {
    // do some stuff
    for(var i = 0; i < details.requestHeaders.length; ++i)
    {
      // log or change some headers
      // details.requestHeaders[i].name
      // details.requestHeaders[i].value
    }
  }

  return {requestHeaders: details.requestHeaders};
},
{urls: ["<all_urls>"]},
["blocking", "requestHeaders"]); 
```

# php - 如何在 php 中生成 8bit crc

> ID：14079444
> 
> 赞同：2
> 
> 时间：2012-12-29T06:52:53.683
> 
> 标签：php, crc

> **可能重复：**
> [PHP 中的 CRC8 检查](https://stackoverflow.com/questions/507041/crc8-check-in-php)

有没有好的 PHP 8bit CRC 生成？我搜索了，我找不到任何好的来源。我找到了一个 16 位的：

```
function crc16($string) { 
  $crc = 0xFFFF; 
  for ($x = 0; $x < strlen ($string); $x++) { 
    $crc = $crc ^ ord($string[$x]); 
    for ($y = 0; $y < 8; $y++) { 
      if (($crc & 0x0001) == 0x0001) { 
        $crc = (($crc >> 1) ^ 0xA001); 
      } else { $crc = $crc >> 1; } 
    } 
  } 
  return $crc; 
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-29T12:53:16.910

我根据 Mark 的 c 代码编写了一个简单的代码，并将其放在这里供任何人使用：

```
global $crc8_table;
$crc8_table = array(
    0x00, 0x3e, 0x7c, 0x42, 0xf8, 0xc6, 0x84, 0xba, 0x95, 0xab, 0xe9, 0xd7,
    0x6d, 0x53, 0x11, 0x2f, 0x4f, 0x71, 0x33, 0x0d, 0xb7, 0x89, 0xcb, 0xf5,
    0xda, 0xe4, 0xa6, 0x98, 0x22, 0x1c, 0x5e, 0x60, 0x9e, 0xa0, 0xe2, 0xdc,
    0x66, 0x58, 0x1a, 0x24, 0x0b, 0x35, 0x77, 0x49, 0xf3, 0xcd, 0x8f, 0xb1,
    0xd1, 0xef, 0xad, 0x93, 0x29, 0x17, 0x55, 0x6b, 0x44, 0x7a, 0x38, 0x06,
    0xbc, 0x82, 0xc0, 0xfe, 0x59, 0x67, 0x25, 0x1b, 0xa1, 0x9f, 0xdd, 0xe3,
    0xcc, 0xf2, 0xb0, 0x8e, 0x34, 0x0a, 0x48, 0x76, 0x16, 0x28, 0x6a, 0x54,
    0xee, 0xd0, 0x92, 0xac, 0x83, 0xbd, 0xff, 0xc1, 0x7b, 0x45, 0x07, 0x39,
    0xc7, 0xf9, 0xbb, 0x85, 0x3f, 0x01, 0x43, 0x7d, 0x52, 0x6c, 0x2e, 0x10,
    0xaa, 0x94, 0xd6, 0xe8, 0x88, 0xb6, 0xf4, 0xca, 0x70, 0x4e, 0x0c, 0x32,
    0x1d, 0x23, 0x61, 0x5f, 0xe5, 0xdb, 0x99, 0xa7, 0xb2, 0x8c, 0xce, 0xf0,
    0x4a, 0x74, 0x36, 0x08, 0x27, 0x19, 0x5b, 0x65, 0xdf, 0xe1, 0xa3, 0x9d,
    0xfd, 0xc3, 0x81, 0xbf, 0x05, 0x3b, 0x79, 0x47, 0x68, 0x56, 0x14, 0x2a,
    0x90, 0xae, 0xec, 0xd2, 0x2c, 0x12, 0x50, 0x6e, 0xd4, 0xea, 0xa8, 0x96,
    0xb9, 0x87, 0xc5, 0xfb, 0x41, 0x7f, 0x3d, 0x03, 0x63, 0x5d, 0x1f, 0x21,
    0x9b, 0xa5, 0xe7, 0xd9, 0xf6, 0xc8, 0x8a, 0xb4, 0x0e, 0x30, 0x72, 0x4c,
    0xeb, 0xd5, 0x97, 0xa9, 0x13, 0x2d, 0x6f, 0x51, 0x7e, 0x40, 0x02, 0x3c,
    0x86, 0xb8, 0xfa, 0xc4, 0xa4, 0x9a, 0xd8, 0xe6, 0x5c, 0x62, 0x20, 0x1e,
    0x31, 0x0f, 0x4d, 0x73, 0xc9, 0xf7, 0xb5, 0x8b, 0x75, 0x4b, 0x09, 0x37,
    0x8d, 0xb3, 0xf1, 0xcf, 0xe0, 0xde, 0x9c, 0xa2, 0x18, 0x26, 0x64, 0x5a,
    0x3a, 0x04, 0x46, 0x78, 0xc2, 0xfc, 0xbe, 0x80, 0xaf, 0x91, 0xd3, 0xed,
    0x57, 0x69, 0x2b, 0x15);

function crc8($data1)
{
    global $crc8_table;

    $crc = 0xff;
    for ($ii1=0;$ii1<strlen($data1);$ii1++){
        $crc = $crc8_table[($crc ^ ($data1[$ii1]))];
    }
    return $crc ^ 0xff;
}

//samples here:
echo "CRC1:".crc8("JDoas OIJE #@)( DPOASDjPOIow)")."<br />\n";
echo "CRC2:".crc8("29890sskd-2109-129us")."<br />\n";
echo "CRC3:".crc8("0917380982748097218082188217897266661091263")."<br />\n";

<!--BUT TRY THESE TOO before you place too much reliance on this coding -->
echo "CRC4a:".crc8("spookily, the same text gives the same results, in lower or upper case")."<br />\n";
echo "CRC4b:".crc8("SPOOKILY, THE SAME TEXT GIVES THE SAME RESULTS, IN LOWER OR UPPER CASE")."<br />\n";
echo "CRC4c:".crc8("And different text of the same length also gives the same check result")."<br />\n";
echo "CRC4d:".crc8("And the text can have special characters too!!!!!!!!!!!!!!!!!!!!!!!!!!")."<br /><br />\n"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T08:28:02.200

C中的CRC-8。注释掉的内容`crc8_slow()`可以很容易地适应php，就像你的16位示例一样。或者您可以使用带有表格的版本，`crc8()`.

```
#include <stddef.h>

/* 8-bit CRC with polynomial x^8+x^6+x^3+x^2+1, 0x14D.
   Chosen based on Koopman, et al. (0xA6 in his notation = 0x14D >> 1):
   http://www.ece.cmu.edu/~koopman/roses/dsn04/koopman04_crc_poly_embedded.pdf
 */

static unsigned char crc8_table[] = {
    0x00, 0x3e, 0x7c, 0x42, 0xf8, 0xc6, 0x84, 0xba, 0x95, 0xab, 0xe9, 0xd7,
    0x6d, 0x53, 0x11, 0x2f, 0x4f, 0x71, 0x33, 0x0d, 0xb7, 0x89, 0xcb, 0xf5,
    0xda, 0xe4, 0xa6, 0x98, 0x22, 0x1c, 0x5e, 0x60, 0x9e, 0xa0, 0xe2, 0xdc,
    0x66, 0x58, 0x1a, 0x24, 0x0b, 0x35, 0x77, 0x49, 0xf3, 0xcd, 0x8f, 0xb1,
    0xd1, 0xef, 0xad, 0x93, 0x29, 0x17, 0x55, 0x6b, 0x44, 0x7a, 0x38, 0x06,
    0xbc, 0x82, 0xc0, 0xfe, 0x59, 0x67, 0x25, 0x1b, 0xa1, 0x9f, 0xdd, 0xe3,
    0xcc, 0xf2, 0xb0, 0x8e, 0x34, 0x0a, 0x48, 0x76, 0x16, 0x28, 0x6a, 0x54,
    0xee, 0xd0, 0x92, 0xac, 0x83, 0xbd, 0xff, 0xc1, 0x7b, 0x45, 0x07, 0x39,
    0xc7, 0xf9, 0xbb, 0x85, 0x3f, 0x01, 0x43, 0x7d, 0x52, 0x6c, 0x2e, 0x10,
    0xaa, 0x94, 0xd6, 0xe8, 0x88, 0xb6, 0xf4, 0xca, 0x70, 0x4e, 0x0c, 0x32,
    0x1d, 0x23, 0x61, 0x5f, 0xe5, 0xdb, 0x99, 0xa7, 0xb2, 0x8c, 0xce, 0xf0,
    0x4a, 0x74, 0x36, 0x08, 0x27, 0x19, 0x5b, 0x65, 0xdf, 0xe1, 0xa3, 0x9d,
    0xfd, 0xc3, 0x81, 0xbf, 0x05, 0x3b, 0x79, 0x47, 0x68, 0x56, 0x14, 0x2a,
    0x90, 0xae, 0xec, 0xd2, 0x2c, 0x12, 0x50, 0x6e, 0xd4, 0xea, 0xa8, 0x96,
    0xb9, 0x87, 0xc5, 0xfb, 0x41, 0x7f, 0x3d, 0x03, 0x63, 0x5d, 0x1f, 0x21,
    0x9b, 0xa5, 0xe7, 0xd9, 0xf6, 0xc8, 0x8a, 0xb4, 0x0e, 0x30, 0x72, 0x4c,
    0xeb, 0xd5, 0x97, 0xa9, 0x13, 0x2d, 0x6f, 0x51, 0x7e, 0x40, 0x02, 0x3c,
    0x86, 0xb8, 0xfa, 0xc4, 0xa4, 0x9a, 0xd8, 0xe6, 0x5c, 0x62, 0x20, 0x1e,
    0x31, 0x0f, 0x4d, 0x73, 0xc9, 0xf7, 0xb5, 0x8b, 0x75, 0x4b, 0x09, 0x37,
    0x8d, 0xb3, 0xf1, 0xcf, 0xe0, 0xde, 0x9c, 0xa2, 0x18, 0x26, 0x64, 0x5a,
    0x3a, 0x04, 0x46, 0x78, 0xc2, 0xfc, 0xbe, 0x80, 0xaf, 0x91, 0xd3, 0xed,
    0x57, 0x69, 0x2b, 0x15};

unsigned crc8(unsigned crc, unsigned char *data, size_t len)
{
    unsigned char *end;

    if (len == 0)
        return crc;
    crc ^= 0xff;
    end = data + len;
    do {
        crc = crc8_table[crc ^ *data++];
    } while (data < end);
    return crc ^ 0xff;
}

/* this was used to generate the table and to test the table-version

#define POLY 0xB2

unsigned crc8_slow(unsigned crc, unsigned char *data, size_t len)
{
    unsigned char *end;

    if (len == 0)
        return crc;
    crc ^= 0xff;
    end = data + len;
    do {
        crc ^= *data++;
        crc = crc & 1 ? (crc >> 1) ^ POLY : crc >> 1;
        crc = crc & 1 ? (crc >> 1) ^ POLY : crc >> 1;
        crc = crc & 1 ? (crc >> 1) ^ POLY : crc >> 1;
        crc = crc & 1 ? (crc >> 1) ^ POLY : crc >> 1;
        crc = crc & 1 ? (crc >> 1) ^ POLY : crc >> 1;
        crc = crc & 1 ? (crc >> 1) ^ POLY : crc >> 1;
        crc = crc & 1 ? (crc >> 1) ^ POLY : crc >> 1;
        crc = crc & 1 ? (crc >> 1) ^ POLY : crc >> 1;
    } while (data < end);
    return crc ^ 0xff;
}
*/

#include <stdio.h>

#define SIZE 16384

int main(void)
{
    unsigned char data[SIZE];
    size_t got;
    unsigned crc;

    crc = 0;
    do {
        got = fread(data, 1, SIZE, stdin);
        crc = crc8(crc, data, got);
    } while (got == SIZE);
    printf("%02x\n", crc);
    return 0;
} 
```

# android - getTargetFragment() 返回 null -- 在一个地方工作，但在另一个地方不工作

> ID：14079445
> 
> 赞同：3
> 
> 时间：2012-12-29T06:52:54.607
> 
> 标签：android, android-fragments, android-listfragment, android-dialogfragment

我有一个奇怪的问题。我在两个地方（都在`ListFragments`）实现相同的代码，但一个工作，另一个抛出一个`NullPointerException`.

这是我的代码（ListFragment 子类的所有部分）：

```
public static class DeleteDialogFragment extends DialogFragment {

    static DeleteDialogFragment newInstance(int arg) {
        return new DeleteDialogFragment();
    }

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        return new AlertDialog.Builder(getActivity())
            .setTitle(R.string.confirm_delete)
            .setMessage(R.string.teacher_confirm_delete_message)
            .setPositiveButton(R.string.yes, new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                    ((TeachersFragment)getTargetFragment()).deleteTeacher();
                }
            })
            .setNegativeButton(R.string.no, null)
            .create();
    }
}

public void deleteTeacher() {
    DbUtils.deleteTeacher(context, selectedItem);
} 
```

我在另一个 ListFragment 中有完全相同的东西（除了我将它转换为 a`AssignmentListFragment`而不是 a `TeachersFragment`），并且它完美地工作。在这两种情况下，`DeleteDialogFragment`该类都直接嵌套在 ListFragment 下。

我收到的错误消息如下：

```
E/AndroidRuntime(15282): FATAL EXCEPTION: main
E/AndroidRuntime(15282): java.lang.NullPointerException
E/AndroidRuntime(15282):    at com.acedit.assignamo.setup.TeachersFragment.access$6(TeachersFragment.java:145)
E/AndroidRuntime(15282):    at com.acedit.assignamo.setup.TeachersFragment$DeleteDialogFragment$1.onClick(TeachersFragment.java:137)
E/AndroidRuntime(15282):    at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:166)
E/AndroidRuntime(15282):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(15282):    at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(15282):    at android.app.ActivityThread.main(ActivityThread.java:4575)
E/AndroidRuntime(15282):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(15282):    at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(15282):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
E/AndroidRuntime(15282):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
E/AndroidRuntime(15282):    at dalvik.system.NativeStart.main(Native Method) 
```

鉴于返回 null （我在调试模式下通过将返回值分配给一个临时变量并且它为 null），它在崩溃之前`getTargetFragment()`使它进入方法似乎很奇怪（第 145 行）。`deleteTeacher()``public void deleteTeacher() {`

任何想法到底是怎么回事？如果您需要更多代码，请告诉我。

**编辑：**这是我调用的代码`setTargetFragment`（在此代码的另一个实例中，我可以使用`this`而不是`getTargetFragment`，所以我认为这就是问题所在。

```
private class CustomOnClickListener implements OnClickListener {
    public void onClick(View v) {
        Toast.makeText(context, "Button pressed", Toast.LENGTH_SHORT).show();
        if (v == viewHolder.editButton)
            startActivity(new Intent(context, getEditClass()).putExtra(Values.KEY_ROWID, (Long)v.getTag()));
        else { // Delete it
            selectedItem = (Long) v.getTag();
            DeleteDialogFragment frag = new DeleteDialogFragment();
            frag.setTargetFragment(getTargetFragment(), 0);
            frag.show(getFragmentManager(), "confirmDelete");
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T07:37:50.763

问题是您没有对 TeacherFragment 的引用，因为`getTargetFragment()`is ，但是您可以尝试使用 FragmentManager 的或方法`null`来获取 Fragment 其他方式。[`getFragmentById()`](http://developer.android.com/reference/android/app/FragmentManager.html#findFragmentById%28int%29)[`getFragmentByTag()`](http://developer.android.com/reference/android/app/FragmentManager.html#findFragmentByTag%28String%29)

# ios - 评论者的应用购买价格发生变化？

> ID：14079447
> 
> 赞同：0
> 
> 时间：2012-12-29T06:53:20.003
> 
> 标签：ios, in-app-purchase

我的应用有很多应用内购买项目。

当用户在应用商店留下评论时，我想免费提供一两个 IAP 项目。
（如果很难证明有人写了评论很难，我可以将这些项目提供给从我的应用程序中点击“留下评论”按钮以访问网络的人）

不过，我如何为某些用户降低 IAP 商品的价格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T11:40:45.137

您无法降低 IAP 商品的价格：价格在一定时间内对您的所有用户都是固定的。您已在 中设置了这些价格`iTunesConnect`。

我想到的一种解决方案是发送`PROMO code`给向您发送评论的人。本页[介绍](http://www.askdavetaylor.com/how_to_generate_promo_promotional_code_iphone_app.html)了如何生成促销代码及其限制（例如每个应用版本 50 个促销代码）。尽管使用此解决方案，您将无法降低您的 IAP 商品的价格。要考虑的另一件事是，您无法控制那些直接进入评论页面而不通过您的应用程序重定向的人。

# php - MAMP PHP vs Apple 安装版本

> ID：14079448
> 
> 赞同：0
> 
> 时间：2012-12-29T06:53:31.997
> 
> 标签：php, terminal, version, mamp

我想使用 MAMP 的 PHP 版本进行本地 PHP 测试和开发。我知道 Mac 上安装了 PHP 版本。我已经安装了 MAMP，除了错误报告之外，一切似乎都很顺利。

在终端中，我检查了我的机器使用的是哪个版本的 PHP，它不是来自 MAMP 的版本。我已更改 MAMP 的 php.ini 文件以报告所有错误。我的测试没有任何错误。我正在插入明显的错误进行测试。

我的问题是：如何禁用或删除预装的 PHP 版本？如何将我的机器设置为仅使用 MAMP 版本的 PHP？我可以一次测试多个版本的 PHP 吗？推荐吗？如何及时了解最新版本的 PHP？和普通的软件更新一样吗？

-乔什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T14:17:14.923

> 在 ~/.profile 或 ~/.bashrc（对于 bash）中添加/更改以下行： export PATH=/Applications/MAMP/Library/bin:/Applications/MAMP/bin/php/php5.2.17/bin:/usr/ local/bin:$PATH:/opt/local/bin 之后请重新登录（或者只执行例如/bin/bash）。

来自[http://drupal.org/node/1464236](http://drupal.org/node/1464236)

您可以将版本号更改为您想要的版本。

# mysql - 使用 mySQL 将数组输入到我的数据库中

> ID：14079450
> 
> 赞同：0
> 
> 时间：2012-12-29T06:54:17.707
> 
> 标签：mysql, arrays, insert

我知道我这样做完全错误，但目前我有：

```
$genre0 = addslashes(strip_tags($movieInfo[genres][0][name]));
$genreid0 = addslashes(strip_tags($movieInfo[genres][0][id]));
...
$genre4 = addslashes(strip_tags($movieInfo[genres][4][name]));
$genreid4 = addslashes(strip_tags($movieInfo[genres][4][id])); 
```

然后

```
mysql_query($query = "INSERT INTO tblMovies (movie_id, genre_id, genre_name) VALUES ($movie_id , $genreid0, $genre0");
...
mysql_query($query = "INSERT INTO tblMovies (movie_id, genre_id, genre_name) VALUES ($movie_id , $genreid4, $genre4"); 
```

我知道这是非常重复的，但这是我能弄清楚的唯一方法。对于每个语句，我都尝试了很多，但无济于事。我试过按照这个[通过php数组将多行插入mysql](https://stackoverflow.com/questions/779986/insert-multiple-rows-via-a-php-array-into-mysql)和其他一些，但似乎无法弄清楚。

这嵌入在一个贯穿电影列表的 SELECT/WHILE 语句中......

任何提示或建议将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T07:09:35.923

您可以使用**准备好的语句**来方便地执行查询：

```
 $stmt = $dbh->prepare("INSERT INTO tblMovies (movie_id, genre_id, genre_name)
                             VALUES (:movie_id , :genreid, :genre")");

      $stmt->bindParam(':movie_id ', $movie_id);
      $stmt->bindParam(':genreid', $genreid);
      $stmt->bindParam(':genre', $genre);

      for($i=0; $i < count($movieInfo['genres']); $i++){
         $movie_id = i;
         $genreid = addslashes(strip_tags($movieInfo['genres'][i]['id']));
         $genre = addslashes(strip_tags($movieInfo['genres'][i]['name']));
         $stmt->execute();
      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T07:03:21.870

如果你坚持使用mysql_XXX：

```
foreach ($movieInfo['genres'] as $genre) {
    $genre = mysql_real_escape_string(strip_tags($genre['name']));
    $genreid = mysql_real_escape_string(strip_tags($genre['id']));
    mysql_query("INSERT INTO tblMovies (movie_id, genre_id, genre_name) VALUES ($movie_id , '$genreid', '$genre'");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T07:12:19.447

我会坚持通过触发单个查询而不是为每个记录触发单独的查询来在数据库中插入多条记录。

例如：

```
INSERT INTO tblMovies
  (genre_id, genre_name)
VALUES
  ('Name 1', 'Value 1'),
  ('Name 2', 'Value 2'),
  ('Name 3', 'Value 3'),
  ('Name 4', 'Value 4');

//Prepare the entire query using foreach and then fire single query.
foreach ($movieInfo['genres'] as $genre) {
    $genre = mysql_real_escape_string(strip_tags($genre['name']));
    $genreid = mysql_real_escape_string(strip_tags($genre['id']));
    $parts[] = "('.$genreid.', '.$genre.')";
}

$str = implode("," $parts);
$query = "INSERT INTO tblMovies (genre_id, genre_name) VALUES ".$str.";";
mysql_query($query) or die(mysql_error()); 
```

**注意：**我已经使用`mysql`了您提到的问题，但**建议**切换到`mysqli`or `PDO`。另外，根据您提到的问题，我认为这`$movie_id`是自动增量。

# html - HTML 电子邮件通讯 - Outlook 2007/2010 中的间距

> ID：14079454
> 
> 赞同：0
> 
> 时间：2012-12-29T06:54:30.890
> 
> 标签：html, email, outlook

我正在编写 HTML 电子邮件时事通讯，但我在 Outlook 2007 和 2010 中的表格出现了非常奇怪的间距问题

我的代码在所有其他客户端都可以正常工作：

```
 <table width="575" align="center" border="0" cellspacing="0" cellpadding="0">
 <tr>
<td bgcolor="#0054a4" style="padding-left:20px; padding-right:20px; padding-top:20px; padding-bottom:20px; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px"><a href="http://www.lgfhfghfhfhfghf" target="_blank" style="font-family:Myriad Pro, Verdana, Georgia; font-size:30px; line-height: 34px; font-style:normal; color:#ffffff; text-decoration:none;"><center>
      <span style="font-weight:bold;">register</span> for <span style="font-style:lighter;color:#fce000;">mkk</span><span style="color:#fce000; font-weight:bold;"> 56565464646 </span><span style="font-weight:normal; text-decoration:underline;">click here</span></strong>
</center></a></td></tr>

   <tr>
   <td bgcolor="#fce000" style="padding-left:20px; padding-right:20px; padding-top:10px; padding-bottom:15px; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px"><a href="http://www.fgdfgdg"" target="_blank" style="font-family:Myriad Pro, Verdana, Georgia; font-size:30px; line-height: 30px; font-style:normal; color:#ffffff; text-decoration:none;"><center>
      <span style="font-style:lighter;color:#0054a4;">lll</span><span style="color:#0054a4; font-weight:bold;"> ffgfgf </span><span style="font-weight:normal; color:#000000; text-decoration:none;">is proudly sponsored by</span></strong>
     </center></a></td>
    </tr>
   <tr>
      <td bgcolor="#0054a4" style="padding-left:0px; padding-right:0px; padding-top:0px; padding-bottom:0px; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px"><a href="http://www.gdfgdfgdf" target="_blank"><img name="fgdgfg" src="http://fgfdgdgdg" width="575" height="76" style="font-size:20px; color:#fce000;" alt="fgfdgdfgdfg" border="0"/></a></td>
   </tr>
      </table>

  <table bgcolor="#0055a5" align="center" width="575" border="0" cellspacing="0" cellpadding="10">
                      <tr>
                        <td align="left" bgcolor="#0055a5" valign="top"><img src="http://www.fdgfdgdfgdfgdf.png" height="50" width="50" alt="gggggg" align="top" border="no" style="margin-top:0px;margin-bottom:0px;margin-right:0px;margin-left:0px;padding-top:0px;padding-bottom:0px;padding-right:0px;padding-left:0px;" /></td>

                        <td align="right" bgcolor="#0055a5" valign="top" style="margin-top:0px;margin-bottom:0px;margin-right:0px;margin-left:0px;padding-top:10px;padding-bottom:10px;padding-right:10px;padding-left:30px;font-family:Arial,Helvetica,sans-serif;font-size:12px;line-height:20px;color:#fce000;" ><span style="font-weight:bold;color:##fce000;" >gfrtryrtytryrtyrty</span><br />
                          rtrtrtrtertretertetertertertertertertertetert <font style="text-decoration:none;">tertetertetetet</font>
                          <a href=mailto:fgdfgdfgdgdfgfdstyle="color:#fce000; text-decoration:none;" >rtdfgdfgdfgdfg</a> / <a href="http://www.fgdfgdfgdgdgdf" target="_blank" style="color:#fce000;text-decoration:none;">www.fgfgdfgfgd/expo</a><br />

                         <strong> To unsubscribe from this newsletter </strong><a href="http://$UNSUB$" style="color:#fce000; font-weight: bold; text-decoration: underline" >click here</a>

                          </td>
                        </tr>
                      </table> 
```

[此处奇怪外观间距的屏幕截图](http://i.stack.imgur.com/fVH4x.png)

[工作邮件截图](http://i.stack.imgur.com/d7cpX.png)

如果有人可以帮忙，请这样做，因为它让我发疯！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T18:57:10.320

不要将标签包装在`<center>`标签内`<a>`... Outlook 使用 MS Word 呈现 HTML（天知道为什么），因此它对如何构建标记有很多限制。只需将链接移动到`<center>`标签内，它应该可以正常工作（我对此进行了测试）：

```
<table width="575" align="center" border="0" cellspacing="0" cellpadding="0">
  <tr>
    <td bgcolor="#0054a4" style="padding-left:20px; padding-right:20px; padding-top:20px; padding-bottom:20px; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px"><center>
        <a href="http://www.lgfhfghfhfhfghf" target="_blank" style="font-family:Myriad Pro, Verdana, Georgia; font-size:30px; line-height: 34px; font-style:normal; color:#ffffff; text-decoration:none;"> <span style="font-weight:bold;">register</span> for <span style="font-style:lighter;color:#fce000;">mkk</span><span style="color:#fce000; font-weight:bold;"> 56565464646 </span><span style="font-weight:normal; text-decoration:underline;">click here</span></strong></a>
      </center></td>
  </tr>
  <tr>
    <td bgcolor="#fce000" style="padding-left:20px; padding-right:20px; padding-top:10px; padding-bottom:15px; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px"><a href="http://www.fgdfgdg"" target="_blank" style="font-family:Myriad Pro, Verdana, Georgia; font-size:30px; line-height: 30px; font-style:normal; color:#ffffff; text-decoration:none;">
      <center>
        <span style="font-style:lighter;color:#0054a4;">lll</span><span style="color:#0054a4; font-weight:bold;"> ffgfgf </span><span style="font-weight:normal; color:#000000; text-decoration:none;">is proudly sponsored by</span></strong>
      </center>
      </a></td>
  </tr>
  <tr>
    <td bgcolor="#0054a4" style="padding-left:0px; padding-right:0px; padding-top:0px; padding-bottom:0px; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px"><a href="http://www.gdfgdfgdf" target="_blank"><img name="fgdgfg" src="http://fgfdgdgdg" width="575" height="76" style="font-size:20px; color:#fce000;" alt="fgfdgdfgdfg" border="0"/></a></td>
  </tr>
</table>
<table bgcolor="#0055a5" align="center" width="575" border="0" cellspacing="0" cellpadding="10">
  <tr>
    <td align="left" bgcolor="#0055a5" valign="top"><img src="http://www.fdgfdgdfgdfgdf.png" height="50" width="50" alt="gggggg" align="top" border="no" style="margin-top:0px;margin-bottom:0px;margin-right:0px;margin-left:0px;padding-top:0px;padding-bottom:0px;padding-right:0px;padding-left:0px;" /></td>
    <td align="right" bgcolor="#0055a5" valign="top" style="margin-top:0px;margin-bottom:0px;margin-right:0px;margin-left:0px;padding-top:10px;padding-bottom:10px;padding-right:10px;padding-left:30px;font-family:Arial,Helvetica,sans-serif;font-size:12px;line-height:20px;color:#fce000;" ><span style="font-weight:bold;color:##fce000;" >gfrtryrtytryrtyrty</span><br />
      rtrtrtrtertretertetertertertertertertertetert <font style="text-decoration:none;">tertetertetetet</font> <a href=mailto:fgdfgdfgdgdfgfdstyle="color:#fce000; text-decoration:none;" >rtdfgdfgdfgdfg</a> / <a href="http://www.fgdfgdfgdgdgdf" target="_blank" style="color:#fce000;text-decoration:none;">www.fgfgdfgfgd/expo</a><br />
      <strong> To unsubscribe from this newsletter </strong><a href="http://$UNSUB$" style="color:#fce000; font-weight: bold; text-decoration: underline" >click here</a></td>
  </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-16T21:58:55.163

这是 Outlook 2007、2010 和 2013 中如何显示 HTML 电子邮件的有用列表： [http ://www.emailonacid.com/blog/details/C13/tips_and_tricks_outlook_07-13#outlook07-13_tip16](http://www.emailonacid.com/blog/details/C13/tips_and_tricks_outlook_07-13#outlook07-13_tip16)

该页面包含此提示，它符合您对表格进行编码的方式：

> 避免在 TABLE 标签中使用“margin”或“padding”CSS 属性。Cellpadding 和 Cellspacing 属性通常是安全的，但边距或填充通常会添加到表中的每个 TD。

希望这有助于深入了解它。

# android - Android SDK 更新问题

> ID：14079455
> 
> 赞同：0
> 
> 时间：2012-12-29T06:54:34.807
> 
> 标签：android, eclipse, sdk

当我选择 window-android sdk 并单击时，我是 android 的新手。我得到了这样的错误。全局参数之后的预期动词，但找到了 'sdk'。提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T07:47:49.707

尝试更新您的 ADT 插件并重试，这可能会解决问题。

# objective-c - 使用 Core Data 获取数据

> ID：14079458
> 
> 赞同：0
> 
> 时间：2012-12-29T06:55:07.270
> 
> 标签：objective-c, ios, core-data, nspredicate, nsfetchrequest

我在互联网上搜索了很多，但找不到我要找的东西。

我有这个模型，它可能有很多用户。所以我有一个名为`User`. 用户有一个`NSSet`记录。我想从给定用户那里获取记录。我正在尝试这样做，但它仍然返回所有用户的记录。

```
NSManagedObjectContext *context = _backgroundContext;
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Record"
                                                  inManagedObjectContext:context];

NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(date >= %@)",date];
NSPredicate *predicate1 = [NSPredicate predicateWithFormat:@"User = %@",currentUser];

NSPredicate *predicates = [NSCompoundPredicate andPredicateWithSubpredicates:[NSArray arrayWithObjects:predicate,predicate1, nil]];
[fetchRequest setPredicate:predicates];

[fetchRequest setPredicate:predicate];
[fetchRequest setEntity:entity];
NSError *error = nil;
NSArray *fetchedObjects = [context executeFetchRequest:fetchRequest error:&error]; 
```

我知道这应该不难，但我找不到它是什么，我希望你们中的一些人能提供帮助。提前致谢！

**编辑：**

正如我所说，我有一个实体`User`：

```
NSString name,
int age,
NSSet records, ... 
```

`Record`有自己的属性，例如：

```
NSDate date,
NSString name,
NSString event, 
... 
```

我想形成一个获取请求以仅从特定用户那里获取记录。而且我不知道该怎么做，因为我要从每个用户那里获取所有记录。

记录具有多对多关系。我可以获取 currentUser.records 之类的记录，但我无法使用 record.User 获取用户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-21T14:35:26.633

我假设您的模型大致如下所示，即记录关系具有称为用户的反向关系：

![用户记录模型](../Images/9d26b2b1ccb542f369be44062ef3746a.png)

重要的是，这种关系是反向关系，否则 Core Data 不会自动维护它。然后，您可以在给定日期/之后查询给定用户的所有记录，如下所示：

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] initWithEntityName:@"Record"];
fetchRequest.predicate = [NSPredicate predicateWithFormat:@"user = %@ AND (date >= %@)", currentUser, date];

NSError *error = nil;
NSArray *records = [_backgroundContext executeFetchRequest:fetchRequest error:&error];

NSLog(@"records: %@", records); 
```

我已将您的代码重写为更紧凑，但重要的变化是这将一次性创建查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T07:09:59.933

错误在这里：

```
[fetchRequest setPredicate:predicates];
[fetchRequest setPredicate:predicate]; 
```

设置复合谓词后，您用谓词 for only 覆盖它`date`。您可能想删除第二行。

*编辑：*获取请求要求您已经定义了一个反向关系`user`，并在谓词`Record`中`User`使用该关系的确切名称。

另一种解决方案是使用 to 的“前向”关系`User`并`Record`过滤结果：

```
NSSet *records = [currentUser.records filteredSetUsingPredicate:predicates]; 
```

或者，如果您更喜欢数组

```
NSArray *records = [[currentUser.records allObjects] filteredArrayUsingPredicate:predicates]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-29T07:32:27.400

正如 Martin R 所说，你正在替换你的谓词。正如他还提到的，用户属性应该是小写的，因为我很确定核心数据会强制执行这一点。如果您尝试使用大写字母创建关系，它应该会给您一个错误，所以请尝试

```
NSPredicate *predicate1 = [NSPredicate predicateWithFormat:@"user = %@",currentUser]; 
```

反而。显然，如果您的模型没有为用户定义属性，那么这也将不起作用，您需要将其更改为您的模型实际具有的任何内容，但否则应该可以。

**编辑：**

尝试在模型中添加反向关系。所以你的结构看起来像：

**用户**

```
NSString name,
int age,
NSSet records, ... 
```

**记录**

```
NSDate date,
NSString name,
NSString event, 
User user,
... 
```

然后每次创建新记录以及将记录添加到用户记录集时，也要在记录对象上设置用户。这将使获取记录变得更加容易，并且还允许核心数据保持数据完整性：

```
"You should typically model relationships in both directions, and specify the inverse 
relationships appropriately. Core Data uses this information to ensure the consistency of the 
object graph if a change is made" 
```

[（核心数据编程指南）](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdRelationships.html)

设置完成后，您应该可以轻松地通过简单地调用来获取记录用户`record.user`

如果您需要多个用户来处理多个记录，则只需将关系设置为一对多关系，并将`User user`属性更改为`NSSet user`.

如果你不想改变你的模型这么多，那么我对你的问题有点困惑。你说你想获取给定用户的记录？如果是这样，那么您为什么不简单地打电话`user.records`，因为您已经定义了这种关系？不需要整个获取请求，让核心数据为您管理那个。

如果您想根据日期过滤结果记录，您可以自己将谓词应用于结果数组，同样无需获取请求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-29T08:04:21.470

我找到了我搜索的内容！我只需要使用这个来形成一个谓词

```
NSPredicate *predicate1 = [NSPredicate predicateWithFormat:@"SELF = %@",delegate.currentUser]; 
```

**编辑**

好吧，看来我错了：/那似乎只管用。

# php - 包含外部 php 文件

> ID：14079459
> 
> 赞同：7
> 
> 时间：2012-12-29T06:55:10.250
> 
> 标签：php, html

我正在使用一些 php 代码，例如所有页面通用的数据库连接，所以我创建了一个包含 php 代码的 php 文件，然后我将这个文件包含在我的 HTML 代码中，所以我想知道包含的更好方法php 文件，更好的替代包含函数。我的示例代码在这里

```
<?php
    include "check_timeout.php";
    include "connect_to_db.php";
?>
<html>
<head>
    <title>Example</title>
</head>
<body>
<?php
    mysql_close($con);
?>
</body>
</html> 
```

先感谢您。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-29T07:14:36.013

您有 4 个选项可供选择。

包括'yourfile.php'；
include_once 'yourfile.php';
需要'yourfile.php'；
require_once 'yourfile.php';

当然你也可以用"代替'。

除了微小的差异外，他们都会做同样的事情。

如果 yourfile.php 不存在，包含的将忽略这一事实，您的 php 页面将继续前进 - 没有任何致命错误。

另一方面，require 会产生致命错误。

如果您知道该文件在那里，那么您选择哪个文件没有区别。

至于带有 _once 后缀的选项，嗯，它们往往比没有 _once 后缀的选项慢。因为当您使用 include_once 或 require_once 时，PHP 将做一些额外的工作以确保这些文件真正包含一次 - 如果您不小心编码并且许多文件使用了许多包含，则可以保护您免受可能的双重包含情况，您可能会遇到同一文件被包含两次的情况。好吧，_once 选项会阻止这种情况。这种检查会带来一些处理成本。

我还注意到您使用 " 而不是 ' 作为文件分隔符。没有理由选择 " over ' 除非您将在文件中引用变量名，例如

$thefile = '你的文件.php; 包括“$thefile”；

那么从这4个中挑选哪些？这一切都取决于，如果你认为你确实需要强制 _once 问题，那么你选择 include_once 或 require_once，如果你认为不需要，那么你选择 include 或 require。至于包含与要求，这一切都归结为如果您的文件由于某种原因无法访问，您希望您的 PHP 脚本死掉还是继续。

如果您对一些速度测试感到好奇，这里有一个链接供您查看。 [http://php.net/manual/en/function.require-once.php](http://php.net/manual/en/function.require-once.php)

我也在主题上发现了这一点。

> 理解 require 和 include 之间的区别 根据 PHP 手册，require 和 include “除了处理失败的方式外，在所有方面都是相同的”。但是，进一步阅读手册会发现另一个影响性能的非常细微的差异。使用 require 关键字时，在编译使用 require 关键字的文件时，会读入、解析和编译命名文件。编译包含 include 关键字的文件时，最初不会读入、解析和编译命名文件。只有当那行代码被执行时，文件才会被读取、解析和编译。如果您知道当前脚本中始终需要该命名文件，请仅使用 require 关键字。如果您可能使用它的功能，请改用 include。PHP 打开所有需要的文件，但仅根据需要打开包含的文件。此外，您还应该考虑分别使用 require_once 和 include_once 代替 require 和 include。在实践中，您更有可能真正想要 require_once 和 include_once 函数提供的功能，即使分别使用 require 和 include 关键字更为常见。有关详细信息，请参阅以下 PHP 手册页：include、include_once
> 
> 来源： http: [//www.stevengould.org/portfolio/developerWorks/efficientPHP/wa-effphp/wa-effphp-a4.pdf](http://www.stevengould.org/portfolio/developerWorks/efficientPHP/wa-effphp/wa-effphp-a4.pdf)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-29T07:08:40.770

始终使用[`require`](http://php.net/manual/en/function.require.php)or ，如果配置错误[`require_once`](http://php.net/manual/en/function.require.php)，您将收到一个。`E_COMPILE_ERROR`

在性能方面，`include`将`require`在功能上相同。

**它`require`本身只会与每个文件中包含的代码一样高效。**

# php - Netbeans Xdebug 安装 +PHP+ ubuntu 操作系统

> ID：14079468
> 
> 赞同：4
> 
> 时间：2012-12-29T06:56:14.647
> 
> 标签：php, ubuntu, netbeans, xdebug

> **可能重复：**
> [Xdebug 和 Netbeans 没有相互通信](https://stackoverflow.com/questions/13880415/xdebug-and-netbeans-are-not-communicating-with-each-other)

如何`xdebug`在`netbeans`. 我搜索了很多，我在 apache 中做了一些事情 `php.ini`

```
zend_extension=/path/to/xdebug.so
xdebug.remote_enable=1
xdebug.remote_handler=dbgp
xdebug.remote_mode=req
xdebug.remote_host=127.0.0.1
xdebug.remote_port=9000 
```

我正在使用`Ubuntu`操作系统。

`Xdebug`主要用于调试复杂的php代码。（`for loop / foreach`）

现在，当我单击调试项目`netbeans` 页脚状态时，显示正在搜索 xdebug 连接，并且它没有结束而不是结束意味着连接失败。

我想你得到了我想要的。

请帮我。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-29T07:07:38.213

最近我已经配置`xdebug`了`netbeans`in `ubuntu`。

以下是您安装和配置`xdebug`的步骤`netbeans`

1) 转到此页面并安装 Firefox 插件：

```
 https://addons.mozilla.org/en-US/firefox/addon/easy-xdebug/ 
```

2）从命令提示符（终端）使用以下命令安装xdebug

```
 sudo apt-get install php5-xdebug 
```

3）然后从终端打开xdebug.ini：

```
gedit /etc/php5/conf.d/xdebug.ini 
```

4）复制那里唯一的一行。（应该看起来像：

```
zend_extension=/usr/lib/php5/20090626+lfs/xdebug.so). 
```

5) 使用此命令以超级用户权限打开 php.ini 文件

```
sudo gedit /etc/php5/apache2/php.ini 
```

6）将您复制的行`xdebug.ini`以及以下四行粘贴到您的`php.ini`文件中：

在此处粘贴复制的行

```
 xdebug.remote_enable=On;
                      xdebug.remote_host="localhost;"
                      xdebug.remote_port=9000;
                      xdebug.remote_handler="dbgp"; 
```

7) 完成了！！！只需要重新启动你的apache：

为此使用以下命令：

```
sudo /etc/init.d/apache2 restart 
```

现在只需打开项目并从菜单中`netbeans`按`ctrl+F5`或单击项目。`debug>debug`

希望它会帮助你。

# android - 安卓通知问题

> ID：14079470
> 
> 赞同：0
> 
> 时间：2012-12-29T06:56:55.497
> 
> 标签：android, android-notifications

我要实现的是通知，即使用通知管理器的警报。我要求用户选择日期和时间并设置警报。设置警报有一些值，如无、准时、5 分钟前、15 分钟前、30 分钟前等等。它适用于除 NONE 之外的每个人。 .如果用户选择 NONE 则 NOTIFICATION 不应该去。而是它会马上去如果用户选择无。所以我没有为它设置任何东西。

```
if(alert.equalsIgnoreCase("On Time"))
{
    Calendar cal=Calendar.getInstance();
    cal.set(Calendar.DAY_OF_MONTH,reminderday);
    cal.set(Calendar.MONTH,remindermonth);
    cal.set(Calendar.YEAR,reminderyear);
    cal.set(Calendar.HOUR_OF_DAY,hour);
    cal.set(Calendar.MINUTE,minute);
    starttime=cal.getTimeInMillis();
}
else if(alert.equalsIgnoreCase("5 Minutes Before"))
{
    Log.i("inside","5 mins before");
    Calendar cal=Calendar.getInstance();
    cal.set(Calendar.DAY_OF_MONTH,reminderday);
    cal.set(Calendar.MONTH,remindermonth);
    cal.set(Calendar.YEAR,reminderyear);
    cal.set(Calendar.HOUR_OF_DAY,hour);
    cal.set(Calendar.MINUTE,minute-5);
    starttime=cal.getTimeInMillis();
}

else if(alert.equalsIgnoreCase("15 Minutes Before"))
{
    Log.i("inside","15 mins before");
    Calendar cal=Calendar.getInstance();
    cal.set(Calendar.DAY_OF_MONTH,reminderday);
    cal.set(Calendar.MONTH,remindermonth);
    cal.set(Calendar.YEAR,reminderyear);
    cal.set(Calendar.HOUR_OF_DAY,hour);
    cal.set(Calendar.MINUTE,minute-15);
    starttime=cal.getTimeInMillis();
}
else if(alert.equalsIgnoreCase("30 Minutes Before"))
{
    Log.i("inside","30 mins before");
    Calendar cal=Calendar.getInstance();
    cal.set(Calendar.DAY_OF_MONTH,reminderday);
    cal.set(Calendar.MONTH,remindermonth);
    cal.set(Calendar.YEAR,reminderyear);
    cal.set(Calendar.HOUR_OF_DAY,hour);
    cal.set(Calendar.MINUTE,minute-30);
    starttime=cal.getTimeInMillis();
}
else if(alert.equalsIgnoreCase("1 Hour Before"))
{
    Log.i("inside","1 hr before");
    Calendar cal=Calendar.getInstance();
    cal.set(Calendar.DAY_OF_MONTH,reminderday);
    cal.set(Calendar.MONTH,remindermonth);
    cal.set(Calendar.YEAR,reminderyear);
    cal.set(Calendar.HOUR_OF_DAY,hour-1);
    cal.set(Calendar.MINUTE,minute);
    starttime=cal.getTimeInMillis();
}
else if(alert.equalsIgnoreCase("2 Hour Before"))
{
    Log.i("inside","2 hr before");
    Calendar cal=Calendar.getInstance();
    cal.set(Calendar.DAY_OF_MONTH,reminderday);
    cal.set(Calendar.MONTH,remindermonth);
    cal.set(Calendar.YEAR,reminderyear);
    cal.set(Calendar.HOUR_OF_DAY,hour-2);
    cal.set(Calendar.MINUTE,minute);
    starttime=cal.getTimeInMillis();
}
else if(alert.equalsIgnoreCase("1 Day Before"))
{
    Log.i("inside","1 day before");
    Calendar cal=Calendar.getInstance();
    cal.set(Calendar.DAY_OF_MONTH,reminderday-1);
    cal.set(Calendar.MONTH,remindermonth);
    cal.set(Calendar.YEAR,reminderyear);
    cal.set(Calendar.HOUR_OF_DAY,hour);
    cal.set(Calendar.MINUTE,minute);
    starttime=cal.getTimeInMillis();
}
else if(alert.equalsIgnoreCase("2 Day Before"))
{
    Log.i("inside","2 day before");
    Calendar cal=Calendar.getInstance();
    cal.set(Calendar.DAY_OF_MONTH,reminderday-2);
    cal.set(Calendar.MONTH,remindermonth);
    cal.set(Calendar.YEAR,reminderyear);
    cal.set(Calendar.HOUR_OF_DAY,hour);
    cal.set(Calendar.MINUTE,minute);
    starttime=cal.getTimeInMillis();
}
else if(alert.equalsIgnoreCase("1 Week Before"))
{
    Log.i("inside","1 week before");
    Calendar cal=Calendar.getInstance();
    cal.set(Calendar.DAY_OF_MONTH,reminderday-7);
    cal.set(Calendar.MONTH,remindermonth);
    cal.set(Calendar.YEAR,reminderyear);
    cal.set(Calendar.HOUR_OF_DAY,hour);
    cal.set(Calendar.MINUTE,minute);
    starttime=cal.getTimeInMillis();
}
else
        {
            starttime=-1;   
        }
PendingIntent pendingIntent = PendingIntent.getBroadcast(this,0,intent, PendingIntent.FLAG_UPDATE_CURRENT);
            am.set(AlarmManager.RTC_WAKEUP,starttime, pendingIntent); 
```

我遇到的问题是，如果没有，则 starttime 值为 0。那么我应该为 starttime 设置什么值，这样它就不会消失。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T07:01:45.620

```
if (starttime > 0){    
    PendingIntent pendingIntent = PendingIntent.getBroadcast(this,0,intent, PendingIntent.FLAG_UPDATE_CURRENT);
                am.set(AlarmManager.RTC_WAKEUP,starttime, pendingIntent);    
} 
```

请改用上面的代码。

# c++ - C++ NetBeans std::array 不可用

> ID：14079478
> 
> 赞同：0
> 
> 时间：2012-12-29T06:58:42.520
> 
> 标签：c++, netbeans, std, mingw32

我在带有 NetBeans 的静态链接项目中使用 MinGW C++ 编译器。

我正在尝试使用`std::array`，但似乎当我`#include <array>`NetBeans 无法识别它时。当我写`std::`一个可能性列表展开时，但数组结构无处可寻。

当我 Ctrl+单击`<array>`标准库标头时，它会打开（因此，它被 IDE 找到）...但由于某种原因，声明显示为灰色...

![#include <数组>](../Images/98ffc98beb87d245fc906e237b77f729.png) ----------------> 如果我删除了定义保护（别名#ifndef -- #endif），它工作正常，但是......为什么我必须更改这个标题才能使这行得通？我错过了什么吗？我正在使用“x86_64-w64-mingw32”进行编译。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T07:08:06.277

看起来你没有定义宏。这些东西对于 C++ 标准来说还是很新的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T08:39:15.227

看起来`__GXX_EXPERIMENTAL_CXX0X__`宏没有定义。

`-std=c++0x`您可以使用编译器选项激活它（部分 C++11 支持） 。

# objective-c - 如何在 Objective-C 中将 NSString 对象转换为数组？

> ID：14079483
> 
> 赞同：-1
> 
> 时间：2012-12-29T06:59:45.343
> 
> 标签：objective-c, ios, nsarray

我有以下字符串：

```
{"list": {"array":[{"current_rate":20.0,"id":1, "name": "abc"}, 
                   {"current_rate":20.0,"id":2, "name": "xyz"}]}} 
```

我想将上面的字符串转换为数组

```
[current_rate: 20.0, id: 1, name: abc] 
```

我用了`componentSeperatedByString:@":".`

但是当名称字段包含“：”字符串时会出现问题。

有没有办法将上面的字符串转换为数组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T07:04:39.237

您拥有的字符串似乎是有效的 JSON。您可能需要解析它：

```
NSData *data = [theString dataUsingEncoding:NSUTF8StringEncoding];
NSDictionary *dict = [NSJSONSerialization JSONObjectWithData:data options:0 error:NULL]; 
```

然后，您可以使用适当类上的`objectForKey:`和方法获取对象。`objectAtIndex:`

# iphone - 不同视图控制器中的相同 UITableView？

> ID：14079485
> 
> 赞同：1
> 
> 时间：2012-12-29T07:00:18.260
> 
> 标签：iphone, objective-c, xcode, uitableview, uiviewcontroller

我有一个具有多个视图控制器和一个通用菜单表的应用程序。

所有视图控制器中的菜单表都是相同的。目前，如果我想在我的菜单表中添加更多菜单，那么我必须更改所有视图控制器。

我们可以有一个可以在不同视图控制器中调用的通用表视图吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T07:07:22.770

创建一个子类`UITableView`并在其中创建您的菜单：

```
@interface menuTable : UITableView 
```

然后，您可以在 all 中使用该类的实例`viewControllers`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T09:36:26.563

据我了解您的问题，只需**在 CommonView （参考名称）中创建一个 tableView，然后根据您的需要，您可以调用该表格视图。**通过这种方式，您不必在代码中多次更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T07:02:35.697

是的你可以。当您将 UIView 添加到其他一些 UIView 时，前者将从它的 Superview 中删除并作为子视图添加到后者。记住要小心视图的框架。`convertRect:toView:`例如使用选择器转换它

# java - java中带有分隔符的2位或更多位数字

> ID：14079487
> 
> 赞同：3
> 
> 时间：2012-12-29T07:02:03.953
> 
> 标签：java, numbers, delimiter, arithmetic-expressions

我有这个基本程序，在输入个位数时效果很好。但是当计算一个多位数的表达式时，比如 1337 - 456 + 32，程序不会继续运行......它就像我什么都没做一样。它不会冻结或输出错误消息，它只是停止。

这是代码：

```
import java.io.*;
import java.util.*;
public class Tester {
    public static void main(String args[]) {
        Scanner kb = new Scanner(System.in);
        System.out.print("Enter number: ");
        String s = kb.nextLine();
        Scanner sc = new Scanner(s);
        //Set delimiters to a plus sign surrounded by any amount of white space...or...
        // a minus sign surrounded by any amount of white space.
        sc.useDelimiter("\\s*");
        int sum = 0;
        int temp = 0;
        int intbefore = 0;

        if (sc.hasNext("\\-")) {
            sc.next();
            if (sc.hasNextInt()) {
                intbefore = sc.nextInt();
                int temper = intbefore * 2;
                intbefore = intbefore - temper; 
            }
        }
        if (sc.hasNextInt()) {
            intbefore = sc.nextInt(); //now its at the sign (intbefore = 5)
        }
        sum = intbefore;

        while (sc.hasNext()) {
            if(sc.hasNext("\\+")) { //does it have a plus sign?
                sc.next(); //if yes, move on (now at the number)
                System.out.println("got to the next();");

                if(sc.hasNextInt()) { //if there's a number
                    temp = sc.nextInt();
                    sum = sum + temp; //add it by the sum (0) and the sum of (5) and (4)
                    System.out.println("added " + sum);
                }
            }
            if(sc.hasNext("\\-")) {
                sc.next();
                System.out.println("got to the next();");

                if (sc.hasNextInt()) {
                    temp = sc.nextInt();
                    sum = sum - temp; //intbefore - temp == 11
                    System.out.println("intbefore: " + intbefore + "  temp: " + temp);
                    System.out.println("subtracted " + sum); // subtracted by 11
                }
            }
        }
        System.out.println("Sum is: " + sum);
    }
} 
```

帮助了解为什么会发生这种情况以及如何解决？（如果有帮助，我正在使用 netbeans）

另外，我假设输入在每个数字之间都有一个空格 例如：123 + -23 - 5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T07:18:08.717

我试图执行你的代码，这就是我发现的。

假设您的输入是 12+1。

Not s`c.hasNextInt()`会给你`1`你要分配的东西`intbefore`。

接下来`while`，您的代码中的循环将进入无限循环 cos `sc.hasNext()`将始终为真（在这种情况下返回 2 ）并且它与循环内的两个 if 条件不匹配，`while`从而使您的代码在无限循环中运行。现在继续努力。祝一切顺利。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T07:18:16.613

尝试像一开始一样更改测光仪，`"\\s+"`或者只使用默认的测光仪

# css - 文本的垂直居中对齐不起作用

> ID：14079495
> 
> 赞同：0
> 
> 时间：2012-12-29T07:02:57.237
> 
> 标签：css

我想在具有百分比高度的 div 中垂直居中对齐文本。我正在使用的代码是这样的。

CSS-

```
.div{
    position: fixed;
    left: 0px;
    border-radius: 10px;
    height: 6%;
    width: 20%;
    transform: translate(-10px,0px);
    -ms-transform: translate(-10px,0px);
    -webkit-transform: translate(-10px,0px);
    -o-transform: translate(-10px,0px);
    -moz-transform: translate(-10px,0px);
    z-index: 10
}
.div span {
    text-align: center;
    font: 20px/100% Arial, Helvetica, sans-serif;
    text-decoration: none;
    color: #fff;
    display: block;
    vertical-align: middle;
} 
```

HTML-

```
<div class="div"><span>This is some text.</span></div> 
```

这不起作用。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T07:18:21.533

如果您使用带有一行的文本然后使用 line-height 属性，则可以将父 div 显示为表格，将子 div 显示为表格单元格或另一种方法。

带有表格单元格显示的 Css[参见小提琴](http://jsfiddle.net/Dineshkani/AZs7t/1/)

```
.div{
position: fixed;
left: 0px;
border: 1px solid black;
border-radius: 10px;
height: 50%;
width: 20%;
z-index: 100;
display: table;
}
.div span {
text-align: center;
font: 20px/100% Arial, Helvetica, sans-serif;
text-decoration: none;
color: black;
display: block;
vertical-align: middle;
display: table-cell;
} 
```

Css with line-height [See fiddle](http://jsfiddle.net/Dineshkani/AZs7t/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T07:17:45.020

尝试`line-height`在 div 上添加一个等于该 div 实际高度的值。

所以如果你有

`<div class = "foo"><span>Blah</span></div>`

你的风格应该看起来像

`.foo {height:5em; line-height:5em;}` `span {font-size:1em;}`

[如果需要，请提供进一步的解释和其他示例。](http://www.student.oulu.fi/~laurirai/www/css/middle/#valh)

# php - 如何在 foreach 构造中迭代它

> ID：14079498
> 
> 赞同：0
> 
> 时间：2012-12-29T07:03:30.097
> 
> 标签：php, arrays

这仅涵盖数组中的第一条记录 - `$form[items][0][description]`。
我怎么能迭代这个以能够呼应后续的，即

```
$form[items][1][description];
$form[items][2][description];
$form[items][3][description]; 
```

等等等等？

```
$array = $form[items][0][description];

function get_line($array, $line) {
  preg_match('/' . preg_quote($line) . ': ([^\n]+)/', $array['#value'], $match);
  return $match[1];
}

$anchortext = get_line($array, 'Anchor Text');
$url = get_line($array, 'URL');

echo '<a href="' . $url . '">' . $anchortext . '</a>';

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T07:05:11.240

这应该可以解决问题

```
foreach ($form['items'] as $item) {
  echo $item['description'] . "<br>";
} 
```

* * *

如果我看到你的`get_line`函数的主体，我可以为你提供更多帮助，但这是它的要点

```
foreach ($form['items'] as $item) {
  $anchor_text = get_line($item['description'], 'Anchor Text');
  $url = get_line($item['description'], 'URL');
  echo "<a href=\"{$url}\">{$anchor_text}</a>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T07:07:41.417

您可以使用 for 循环来迭代此数组。

```
for($i=0; $i< count($form['items']); $i++)
{
    $anchortext = get_line($form['items'][$i]['description'], 'Anchor Text');
    $url = get_line($form['items'][$i]['description'], 'URL');
    echo '<a href="' . $url . '">' . $anchortext . '</a>';
} 
```

# ios - XMPPFramework - 如何更改我的个人资料状态？

> ID：14079499
> 
> 赞同：1
> 
> 时间：2012-12-29T07:03:41.293
> 
> 标签：ios, xmpp, xmppframework, user-presence

为了更改我的记录状态，我使用了以下代码：

```
 XMPPPresence *presence = [XMPPPresence presenceWithType:@"away"];
    [[self xmppStream] sendElement:presence]; 
```

但我没有得到`[self xmppStream]`. 于是我改成了下面的代码：

```
 XMPPPresence *presence = [XMPPPresence presence];
    NSXMLElement *status = [NSXMLElement elementWithName:@"status"];
    [status setStringValue:@"away"];
    [presence addChild:status];
    NSError *error = nil;

    xmppStream = [[XMPPStream alloc] init];
    [xmppStream disconnect];
    NSString *myJID = [NSString stringWithFormat:@"%@", appDelegate.jid];
    XMPPJID *JID;        
    JID = [XMPPJID jidWithString:myJID];
    NSLog(@"%@",JID);
    [xmppStream setMyJID:JID];
    xmppStream.hostName=@"talk.google.com";

    [xmppStream connect:&error];        
    [xmppStream sendElement:presence]; 
```

仍然没有得到改变的状态。请分享你的想法。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T07:45:15.143

您必须等到连接后才能发送节，方法是监听`xmppStreamDidAuthenticate`委托。

此外，在广播您的存在时，不要费心设置 to 或 from JID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-16T13:12:58.077

您可以在登录后立即通过`goOnline`调用 after 的方法更改您的状态`xmppStreamDidAuthenticate`。

```
- (void)goOnline
{
    // Initialize XMPPPresence variable
    XMPPPresence *presence = [XMPPPresence presence];

    // Initialize XML element <show/> for specifying your status
    NSXMLElement *show = [NSXMLElement elementWithName:@"show"];

    // Initialize XML element <status/> for describing your status
    NSXMLElement *status = [NSXMLElement elementWithName:@"status"];

    // If you want your user status to be shown as "Available"
    [show setStringValue:@"chat"];
    [status setStringValue:@"Available"];

    // If you want your user status to be shown as "Busy"
    [show setStringValue:@"dnd"];
    [status setStringValue:@"Busy"];

    // If you want your user status to be shown as "Away"
    [show setStringValue:@"away"];
    [status setStringValue:@"Away"];

    // If you want your user status to be shown as "Off-day"
    [show setStringValue:@"xa"];
    [status setStringValue:@"Off-day"];

    // Add the XML elements to XMPPPresence
    [presence addChild:show];
    [presence addChild:status];

    // Update new presence to server
    [xmppStream sendElement:presence];
} 
```

有关我上面代码的更多信息和解释，请访问[将 XMPPPresence 更改为 Away/Busy/Invisible](https://stackoverflow.com/a/24773021/2489212.)。

# c# - GetHashCode 已实现，但 Dictionary 无法找到密钥？

> ID：14079500
> 
> 赞同：3
> 
> 时间：2012-12-29T07:03:58.633
> 
> 标签：c#, dictionary, gethashcode, iequatable

在我的课堂上，我已经实现了`Equals`和`GetHashCode`. 然而，当我在我的 C# 代码中将它用作字典的键时，我得到了错误：`"Key not found exception"` 谢谢，

```
public class Time: IEquatable<Time>
{
    public String hour;
    public String minute;

    public Time()
    {
        hour = "00";
        minute = "00";
    }

    public Time(String hour, String minute)
        : this()
    {
        this.hour = hour;
        this.minute = minute;
    }

    public override int GetHashCode()
    {
        int hash = int.Parse(hour) * 60 + int.Parse(minute);
        return hash.GetHashCode();
    }
    public override bool Equals(Time time)
    {

            return (this.hour == time.hour && this.minute == time.minute);

    }

} 
```

我使用它的代码：

```
Dictionary<Time, int> time2RowIndex = new Dictionary<Time, int>(); 
```

...

```
int beginRow = 0;
if(time2RowIndex.ContainsKey(time.hour))
      beginRow = time2RowIndex [time.hour]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-29T07:17:51.153

试试这个。`Equals`诀窍是从对象（和）覆盖`GetHashCode`而不是仅仅实现`IEquatable<>`.

此外，如果`Hour`在`Minute`将`Time`的实例`Time`添加到字典后对象发生更改，则存储桶（在添加时由哈希码选择）将不再匹配对象上的哈希码。这意味着即使您向字典提供一个相等值的对象（例如使用`ContainsKey`），它也不会在字典中找到原始项目（因为它将查找的哈希桶不包含原始对象）。最佳实践是函数中引用的所有字段`GetHashCode`都是只读的，以避免这些情况。

```
public class Time : IEquatable<Time>
{
    public String Hour;
    public String Minute;

    public Time()
    {
        Hour = "00";
        Minute = "00";
    }

    public Time(String hour, String minute)
        : this()
    {
        this.Hour = hour;
        this.Minute = minute;
    }

    public override int GetHashCode()
    {
        return int.Parse(Hour) * 60 + int.Parse(Minute);
    }

    public override bool Equals(object obj)
    {
        var time = obj as Time;
        return !ReferenceEquals(time, null) && Equals(time);
    }

    public bool Equals(Time time)
    {
        return string.Equals(Hour, time.Hour, StringComparison.Ordinal) && string.Equals(Minute, time.Minute, StringComparison.Ordinal);
    }
} 
```

# php - 本地网络上带有 WAMP 的中央和本地 git 存储库

> ID：14079507
> 
> 赞同：1
> 
> 时间：2012-12-29T07:04:21.693
> 
> 标签：php, git, repository, localhost, wamp

是否可以为安装了 WAMP 的 webroot 下的所有项目设置中央 git 存储库？

换句话说，webroot 下的每个项目都应该在中央电脑上进行 git 管理，其他开发人员可以访问相同的电脑并提交到本地中央存储库而不是某个在线位置？

我不太了解网络内容或其他用户如何访问它。

当然，这将为开发人员创建一个很好的工作流程。

**到目前为止我做了什么：**

*   在我的硬盘驱动器某处创建了一个名为**repo的文件夹**
*   与所有人共享以上文件夹的所有权限
*   git初始化了它或者里面的其他项目
*   将上述文件夹添加到具有别名的 apache vhosts 文件中
*   现在我可以访问上面的文件夹`http://repo.com/`
*   让 apace 收听我的网络 IP 而不是`localhost`来自 httpd.conf 例如`Listen 192.168.1.4:80`

但是其他用户去的时候是不能访问的`http://repo.com/`。

有谁知道如何设置它，以便其他用户也可以从我的电脑访问它并使用 git？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T08:44:55.680

你需要一个工具来管理托管的 git。例如，过去我使用 gitosis，但还有其他替代品，例如 gitolite：

1.  [https://wiki.archlinux.org/index.php/Gitosis](https://wiki.archlinux.org/index.php/Gitosis)
2.  [https://github.com/sitaramc/gitolite](https://github.com/sitaramc/gitolite)

我认为你不能在 Windows 上安装 gitosis，所以你需要一台 Linux 机器（我有在 Ubuntu 上运行 gitosis 的经验，没有问题）。如果你用谷歌搜索，你可以找到一些解释如何在 Ubuntu 下运行 gitosis 的教程，例如：

*   [https://help.ubuntu.com/community/Git](https://help.ubuntu.com/community/Git)
*   [http://www.serverubuntu.it/git-gitosis-ubuntu](http://www.serverubuntu.it/git-gitosis-ubuntu)

我记得这很容易，但你需要一些 Linux 经验。祝你好运！

# web-services - Web服务异构系统支持

> ID：14079508
> 
> 赞同：-1
> 
> 时间：2012-12-29T07:04:22.763
> 
> 标签：web-services

我在 Web 服务方面的成绩为零，所以这是我努力学习的方法 已经从一些基础知识开始 - 但想到的一个问题是：如果我要公开一个用 Java 编写的 Web 服务 - 它有一个简单的方法 - 它返回一个 Employee对象 - 现在在 Web 服务的消费者端 - 假设我是一个 .NET 消费者 - 由于这个 Web 服务返回一个 Employee 对象 - 这在 .NET 中是如何表示的？谁负责这个？

注意 - 我是一名 Java 开发人员，所以没有涉足其他语言 - 但只是想知道

谢谢，萨蒂什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T09:04:51.257

使用 Web 服务的客户端必须知道对象的类型。如果它有关于接收对象类型的信息，它可以反序列化流。您可以通过 WSDL 发布对象模式。.NET 客户端可以采用此 WSDL 并根据模式生成类。

# linux - 我在哪里可以找到函数 argp_parse 的源代码？

> ID：14079511
> 
> 赞同：3
> 
> 时间：2012-12-29T07:04:44.307
> 
> 标签：linux

我需要函数的 GNU Linux 代码

```
 error_t argp_parse(const struct argp *__restrict __argp,int,char **__restrict,unsigned     __flags,int * __arg_index,void *__restrict input) 
```

如果有人知道在哪里可以得到或拥有它，请发给我。非常感谢 ！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T07:20:04.640

glibc 的一部分，通过 gnu.org 上的链接很容易找到：

来自[http://sourceware.org/git/?p=glibc.git;a=blob_plain;f=argp/argp-parse.c;hb=e07bb02a4f9e7d98f79f428a661c5b982286869d](http://sourceware.org/git/?p=glibc.git;a=blob_plain;f=argp/argp-parse.c;hb=e07bb02a4f9e7d98f79f428a661c5b982286869d)：

```
/* Parse the options strings in ARGC & ARGV according to the argp in ARGP.
   FLAGS is one of the ARGP_ flags above.  If END_INDEX is non-NULL, the
   index in ARGV of the first unparsed option is returned in it.  If an
   unknown option is present, EINVAL is returned; if some parser routine
   returned a non-zero value, it is returned; otherwise 0 is returned.  */
error_t
__argp_parse (const struct argp *argp, int argc, char **argv, unsigned flags,
      int *end_index, void *input)
{
  error_t err;
  struct parser parser;
… 
```

# c# - Mail.lib 访问 Gmail 电子邮件的替代方案？

> ID：14079514
> 
> 赞同：1
> 
> 时间：2012-12-29T07:04:56.257
> 
> 标签：c#, email, gmail, imap

我正在使用 C#，我从这里[http://www.limilabs.com/mail](http://www.limilabs.com/mail)找到了 Mail.dll， 这是完美的东西。不幸的是，它不是免费的。有什么方法可以免费获得完整的东西吗？还是有类似的图书馆？顺便说一句，我正在使用 Gmail 和 IMAP :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T07:09:55.110

是的，有用于发送电子邮件的内置命名空间（例如`System.Net.Mail`）；看看[这个教程](http://csharp.net-informations.com/communications/csharp-smtp-mail.htm)。

[附录] 如果你想接收消息，请查看类似[这样](http://www.codeproject.com/Articles/14304/POP3-Email-Client-NET-2-0)的东西，它可以用于通过 POP3 接收消息。

# c# - 非托管文件访问 (WriteFile) 比托管 (FileStream) 慢

> ID：14079519
> 
> 赞同：0
> 
> 时间：2012-12-29T07:05:54.003
> 
> 标签：c#, file-io, visual-studio-2012, unmanaged, managed

我有一个对文件（自定义格式）进行大量读写的应用程序，有人告诉我通过使用直接非托管代码来提高性能。在尝试实际应用程序之前，我做了一个小测试，只是为了看看性能提升如何，但令我惊讶的是，非托管版本似乎比使用简单的文件流慢 8 倍。

这是托管功能：

```
 private int length = 100000;
    private TimeSpan tspan;

    private void UsingManagedFileHandle()
    {
        DateTime initialTime = DateTime.Now;

        using (FileStream fileStream = new FileStream("data2.txt", FileMode.Create, FileAccess.ReadWrite))
        {
            string line = "ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890123";
            byte[] bytes = Encoding.Unicode.GetBytes(line);

            for (int i = 0; i < length; i++)
            {
                fileStream.Write(bytes, 0, bytes.Length);
            }

            fileStream.Close();
        }

        this.tspan = DateTime.Now.Subtract(initialTime);
        label2.Text = "" + this.tspan.TotalMilliseconds + " Milliseconds";
    } 
```

这是非托管方式：

```
 public void UsingAnUnmanagedFileHandle()
    {

        DateTime initialTime;
        IntPtr hFile;

        hFile = IntPtr.Zero;

        hFile = FileInteropFunctions.CreateFile("data1.txt",
            FileInteropFunctions.GENERIC_WRITE | FileInteropFunctions.GENERIC_READ,
            FileInteropFunctions.FILE_SHARE_WRITE,
            IntPtr.Zero,
            FileInteropFunctions.CREATE_ALWAYS,
            FileInteropFunctions.FILE_ATTRIBUTE_NORMAL, 
            0);

        uint lpNumberOfBytesWritten = 0;

        initialTime = DateTime.Now;

        if (hFile.ToInt64() > 0)
        {
            string line = "ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890123"; 
            byte[] bytes = Encoding.Unicode.GetBytes(line);
            uint bytesLen = (uint)bytes.Length;

            for (int i = 0; i < length; i++)
            {
                FileInteropFunctions.WriteFile(hFile,
                        bytes,
                        bytesLen,
                        out lpNumberOfBytesWritten,
                        IntPtr.Zero);
            }

            FileInteropFunctions.CloseHandle(hFile);

            this.tspan = DateTime.Now.Subtract(initialTime);
            label1.Text = "" + this.tspan.TotalMilliseconds + " Milliseconds";

        }
        else
            label1.Text = "Error";

    }

    [DllImport("kernel32.dll", SetLastError = true)]
    public static extern bool CloseHandle(IntPtr hObject);

    [DllImport("kernel32.dll", SetLastError = true)]
    public static extern unsafe IntPtr CreateFile(
        String lpFileName,              // Filename
        uint dwDesiredAccess,              // Access mode
        uint dwShareMode,              // Share mode
        IntPtr attr,                   // Security Descriptor
        uint dwCreationDisposition,           // How to create
        uint dwFlagsAndAttributes,           // File attributes
        uint hTemplateFile);               // Handle to template file

    [DllImport("kernel32.dll")]
    public static extern unsafe int WriteFile(IntPtr hFile,
        // byte[] lpBuffer,
        [MarshalAs(UnmanagedType.LPArray)] byte[] lpBuffer, // also tried this.
        uint nNumberOfBytesToWrite, 
        out uint lpNumberOfBytesWritten,
        IntPtr lpOverlapped); 
```

在我的计算机中，使用 FileStream 的迭代大约需要 70 毫秒。使用 WriteFile 大约需要 550 毫秒。

我测试了几次并进行了多次迭代，性能差异是一致的。

我不知道为什么非托管代码比托管代码慢。

**编辑**

非常感谢你们的解释，伙计们。我认为 FileStream 发生了一些“神奇”的事情，你已经解释得很好。所以，我知道现在在这部分没有简单的方法来提高性能，我想就其他简单的提高速度的方法征求你的意见。该文件在实际应用程序中是随机访问的，大小可以从 1MB 到 1GB 不等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T07:13:20.060

当 FileStream 被缓冲时，您的非托管调用会尽快将数据写入磁盘（即在内存中执行大多数操作，并且应该不那么频繁地调用底层非托管调用）

如果您想进一步调整性能[，FileStream 上](http://msdn.microsoft.com/en-us/library/98hy92k3.aspx)有一些构造函数可以让您控制缓冲区大小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T07:49:08.520

好吧，FileStream 只是 CreateFile/WriteFile 的一个包装器。这是一群聪明人写的。所以我完全看不出为什么你认为你的应该更快：P。

如前所述，FileStream 可能会在调用 WriteFile() 之前进行额外缓冲，从而最大限度地减少非托管方法调用。这很重要 - 仅在必要时进行非托管调用。他们付出了代价。缓冲区大小通常是磁盘扇区大小的倍数。您可以尝试不同的大小，但这取决于操作系统，并且很可能会在其他计算机上产生其他结果。

但同样重要的是要知道 WriteFile() 也进行内部缓冲。这不像您调用 WriteFile() 并将其写入文件。一旦时间到了，它将被刷新到HDD。

我认为正在进行不必要的 byte[] 编组。例如，当您调用 WriteFile() 时，系统会复制您的缓冲区。通过 unsafe() 关键字和一点点黑客攻击应该可以避免这种情况。

还有 FILE_FLAG_SEQUENTIAL_SCAN 无法通过 FileStream(afaik) 访问，它应该让系统知道您将仅按顺序进行文件写入/读取。从理论上讲，这可能会带来一些性能提升。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-29T07:42:50.347

不同之处在于对 的调用`WriteFile`是同步的，而对 的写入`FileStream`则不是。

默认情况下`CreateFile`会创建一个同步文件句柄，所以在数据写入之前调用`WriteFile`不会返回。如果您添加`FILE_FLAG_OVERLAPPED`到`CreateFile`调用中，非托管实现将花费与托管大致相同的时间。

请参阅定义的[同步和异步 I/O 句柄](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx#synchronous_and_asynchronous_i_o_handles)部分的`CreateFile`文档

# jquery - 删除 Jquery 地址中的历史记录条目

> ID：14079520
> 
> 赞同：2
> 
> 时间：2012-12-29T07:06:14.237
> 
> 标签：jquery

例如，当客户将商品添加到购物车时，我通过 [Jquery Address](http://www.asual.com/jquery/address/)将地址设置为`/cart/23432 (productid)`. 将商品添加到购物车并显示购物车详细信息后，我想将 url 更改为`/cart/`. 这样当客户刷新页面时，就不会再添加产品了。但是，现在将有两个历史条目

```
 1\. /cart/23432
 2\. /cart/ 
```

当我将地址更改为 时`/cart/`，如何删除以前的条目`(/cart/23432)`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-19T09:40:31.720

你可以试试这个方法

```
 $.address.history(false);
        $.address.value(yoururl);
        $.address.history(true); 
```

这将用新的 url 替换最后一个历史条目

# android - 在 Eclipse 和移动设备上安装 apk 的区别？

> ID：14079521
> 
> 赞同：1
> 
> 时间：2012-12-29T07:06:18.490
> 
> 标签：android, eclipse, mobile, apk

我开始一个无图标活动。我使用下面的代码：</p>

```
public class AndroidTestNoiconActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

PackageManager p = getPackageManager();
p.setComponentEnabledSetting(getComponentName(),
PackageManager.COMPONENT_ENABLED_STATE_DISABLED,
PackageManager.DONT_KILL_APP);
}
} 
```

我使用 USB 将我的电脑与手机连接。

方法一：通过手机安装apk`Eclipse-->Run-->Run Configurations`

效果：隐藏应用程序图标

方法二：直接复制apk到sdcard，用手机安装。

效果：应用程序图标没有被隐藏。

在 Eclipse 和移动设备上安装 apk 有什么区别？

# c# - 系统时钟调整会影响在 C# 中运行秒表吗？

> ID：14079523
> 
> 赞同：7
> 
> 时间：2012-12-29T07:06:34.303
> 
> 标签：c#, .net, multithreading, real-time

假设我`Stopwatch`在我的代码中运行，在中间，其他一些应用程序改变了系统时钟（我的服务器上的域时间每秒同步一次）。

会影响秒表结果吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-01-09T15:52:25.580

这取决于。

`Stopwatch`[仅当 Win32 QueryPerformanceCounter()可用](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644904%28v=vs.85%29.aspx) **时才**依赖它。此实现具有时变容错性。

如果高分辨率计数器不可用，则`Stopwatch`回退到系统计时器，基本上是`DateTime.UtcNow.Ticks`调用。在这种不幸的情况下`Stopwatch`，结果将受到时间（不是时区）变化的影响。

正如引用的 MSDN 文章中所写，您可以使用字段检查高分辨率计数器是否可用`IsHighResolution`。

你可以责怪.Net团队使用这个[不会修复缺陷](https://connect.microsoft.com/VisualStudio/feedback/details/741848/system-diagnostics-stopwatch-elapsed-time-affected-by-user-changing-computers-date-time):)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-29T07:08:41.257

不，Stopwatch 内部依赖于 Win32 [QueryPerformanceCounter()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644904%28v=vs.85%29.aspx)，它与系统时钟无关。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-29T07:18:34.640

不，它不会影响它。

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)：

> 秒表通过计算底层计时器机制中的计时器滴答来测量经过的时间。如果安装的硬件和操作系统支持高分辨率性能计数器，则 Stopwatch 类使用该计数器来测量经过的时间。否则， Stopwatch 类使用系统计时器来测量经过的时间。使用频率和 IsHighResolution 字段来确定秒表计时实现的精度和分辨率。

# java - 如何使用 MyBatis 将 mysql 字段更新为中文

> ID：14079525
> 
> 赞同：0
> 
> 时间：2012-12-29T07:06:38.103
> 
> 标签：java, mysql, mybatis

```
Card record=new Card();
record.setName("你好"); 
```

我将name字段设置为中文，但显示为“???” 在数据库中。我该如何配置它？

操作系统：MAC OSX 10.8 数据库：MySQL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T07:10:50.913

试试这样：

```
jdbc:mysql://localhost:<portnumber>/<dbname>?characterEncoding=utf8 
```

在 JDBC 连接字符串中

# javascript - 更改选择上的功能

> ID：14079535
> 
> 赞同：0
> 
> 时间：2012-12-29T07:07:47.453
> 
> 标签：javascript

继续[通过javascript更改3个下拉值](https://stackoverflow.com/questions/14079113/change-3-dropdown-values-through-javascript)，只需要显示

```
function changeprice1(id){ 
```

在选择第二个下拉列表时，即`Medical and Biomedical Manuscript Rewriting`。现在该怎么办，我现在正在思考。有什么帮助`jS`吗？

```
<script type="text/javascript">

function changeprice(id){

var value = id;

if(value == ""){
    document.getElementById('price').value="";
alert("Please select one valid word count");

return false;
}
if(value == "Lessthan1000"){
var newprice = "USD 290";
}
if(value == "Lessthan2000"){
var newprice = "USD 540";
}
if(value == "Lessthan4000"){
var newprice = "USD 1050";
}
if(value == "Lessthan6000"){
var newprice = "USD 1900";
}
var eprice = newprice;

document.getElementById('price').value = eprice;

}

function changeprice1(id){

var value = id;

if(value == ""){
    document.getElementById('price').value="";
alert("Please select one valid word count");

return false;
}
if(value == "ReLessthan1000"){
var newprice = "USD 390";
}
if(value == "ReLessthan2000"){
var newprice = "USD 690";
}
if(value == "ReLessthan4000"){
var newprice = "USD 1600";
}
if(value == "ReLessthan6000"){
var newprice = "USD 2900";
}
var eprice = newprice;

document.getElementById('price').value = eprice;

}</script> 
```

这是第一个下拉列表

```
<select name="sp" id="sp" class="servicecategory">
<option value="" selected>Please Select...</option>
<option value="Medical and Biomedical Manuscript Writing" <?php if($servicename == "Medical and Biomedical Manuscript Writing"){ echo(" selected=\"selected\""); } ?>>Medical and Biomedical Manuscript Writing </option>
<option value="Medical and Biomedical Manuscript Rewriting" <?php if($servicename == "Medical and Biomedical Manuscript Rewriting"){ echo(" selected=\"selected\""); } ?>>Medical and Biomedical Manuscript Rewriting</option>
</select> 
```

这是第二个下拉列表---

```
<select name="sp" id="sp" class="servicecategory" onChange="changeprice(this.value)">
<option value="" selected>Please Select...</option>
<option value="Lessthan1000">1 - 1000 words</option>
<option value="Lessthan2000">1001 - 2000 words</option>
<option value="Lessthan4000">2001 - 4000 words</option>
<option value="Lessthan6000">4001 - 6000 words</option>
</select> 
```

这是价格最后显示的价格区域

```
<tr>
<td valign="top" align="right">Price:</td>
<td width="5"></td>
<td valign="top" align="left"><input type="text" name="price" id="price" value="" readonly="" size="20"><br />
</td>
</tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T08:02:17.710

试试这个

```
 <script type="text/javascript">

    function changeprice(id)
    {

        var value = id;
        selectedmenu=document.getElementById("sp").value
        if(selectedmenu == "select"){

        alert("Please select one valid word count");
        fnc();
        return false;
        }
        if(selectedmenu=='Medical and Biomedical Manuscript Writing')
            if(value == "Lessthan1000"){
            var newprice = "USD 290";
            }
            if(value == "Lessthan2000"){
            var newprice = "USD 540";
            }
            if(value == "Lessthan4000"){
            var newprice = "USD 1050";
            }
            if(value == "Lessthan6000"){
            var newprice = "USD 1900";
            }
            var eprice = newprice;

            document.getElementById('price').value = eprice;
        if(selectedmenu=='Medical and Biomedical Manuscript Rewriting')
        {
            if(value == "Lessthan1000"){
                var newprice = "USD 390";
                }
                if(value == "Lessthan2000"){
                var newprice = "USD 690";
                }
                if(value == "Lessthan4000"){
                var newprice = "USD 1600";
                }
                if(value == "Lessthan6000"){
                var newprice = "USD 2900";
                }
                var eprice = newprice;

                document.getElementById('price').value = eprice;

        }
    }

    function fnc()
    {
        document.getElementById("select").selected=true;
    }
    </script>

    <select name="sp" id="sp" class="servicecategory" onchange="fnc()">
        <option value="select"  selected>Please Select...</option>
        <option value="Medical and Biomedical Manuscript Writing" >Medical and Biomedical Manuscript Writing</option>
        <option value="Medical and Biomedical Manuscript Rewriting" >Medical and Biomedical Manuscript Rewriting</option>
    </select>

    <select name="Word_Count" id="Word_Count" onChange="changeprice(this.value)">
        <option value="select" id="select">Please Select...</option>
        <option value="Lessthan1000">1 - 1000 words</option>
        <option value="Lessthan2000">1001 - 2000 words</option>
        <option value="Lessthan4000">2001 - 4000 words</option>
        <option value="Lessthan6000">4001 - 6000 words</option>
    </select>

    <tr>
        <td valign="top" align="right">Price:</td>
        <td width="5"></td>
        <td valign="top" align="left"><input type="text" name="price" id="price" value="" readonly="" size="20"><br /></td>
    </tr> 
```

# java - Java exec() 在 IDE 中工作，但不适用于 .jar

> ID：14079539
> 
> 赞同：1
> 
> 时间：2012-12-29T07:08:35.923
> 
> 标签：java, process, jar, exec, runtime.exec

我使用下面的代码来运行一个批处理文件，它可以从 IDE 完美运行（如果重要，可以使用 Netbeans）。我将工作目录（在项目属性的运行选项卡中）设置为与我有一个构建`.jar`文件相同的目录，并且在我运行它时它可以工作。

当我从 IDE 清理并构建一个新 jar 并将其拖到与我设置为在 IDE 中运行时相同的目录中时，它不起作用。我已经仔细检查过，它正在尝试使用相同的命令，只是没有运行它。

打包时是否需要添加一些标志，或者 Java 使用一些安全措施来停止此命令？

这是代码：

```
String command="cmd /c cd \""+System.getProperty("user.dir")+"\\bin\"&&"+filename+"";
System.out.println(command);
JOptionPane.showMessageDialog(null,command); //How I verify it is the same command
Process p=Runtime.getRuntime().exec(command);
p.waitFor(); 
```

# php - PHP 会话和登录

> ID：14079542
> 
> 赞同：1
> 
> 时间：2012-12-29T07:08:47.093
> 
> 标签：php, arrays, session, variables

我有一个 cms 的登录和会话创建脚本。它会检查管理文件以获取正确的详细信息，否则会执行 SQL 查询以获取用户详细信息。根据哪个成功然后加载相应的页面来设置会话变量。

该脚本适用于 PHP 5.2，但我一直在尝试重写代码以修复 PHP 5.4 的弃用函数，`register_globals`特别`$http_session_vars`是。我想我遇到的问题是变量`($s_Vers)`没有被正确设置，因为它使用了一个数组。

到处走走`register_globals`：

```
$aPwd = $_REQUEST['aPwd'];
$aLogin = $_REQUEST['aLogin'];
$lname = $_REQUEST['lname'];
$pswd = $_REQUEST['pswd']; 
```

这似乎工作正常。

因为`$HTTP_SESSION_VARS`我已将所有实例替换为`$_SESSION`. 我会假设这不是那么简单。`if`应`$s_vers`为管理员设置的语句的摘录。

```
if ( $lname === $aLogin
  && (( $aPwd && md5($pswd) === $aPswd )
  || (!$aPswd && $name === $pswd )) )
{ 
$s_Vers  = $_SESSION["s_Vers"] = 0;
$s_aid   = $_SESSION["s_uid"] = 0;
} 
```

在此之后，有一个 else 语句来运行 SQL 查询以获取用户登录详细信息。

然后是这个：

```
else $wrong = true;
}

if( isset($_SESSION["s_Vers"]) && !@$wrong )
{
  include "setup.php";
    if( $s_Vers == 0 )
        header("Location: adminpage.php");
    else
        header("Location: userpage.php");
    exit();
} 
```

上面有什么明显错误的地方吗？

会话变量存储在会话数组中，如下所示：

```
session_start();
$session_array = array("username", "password", "s_uid", "s_Vers"); 
```

所以当我输入管理员详细信息时会发生什么，我看到它直接到 adminpage.php，因为它应该让我退出。我猜是因为这个：

```
if ( (!IsSet($curmode) && !$username) || isset($logout)
        || $s_Vers != $_SESSION["s_Vers"] 
        || $s_uid != $_SESSION_["s_uid"]
     )
{
    $username = "";
    $password = "";
    $curmode = 0;
    session_destroy();
//  echo "Here";
//  exit();
//  Header("Location: http://".$g_AfterLogoutURL);
?>
<HTML>
    <HEAD>
        <TITLE>Not Authorised</TITLE>
        <meta http-equiv="refresh" content="1;url=login.php">
    </HEAD>

<SCRIPT language="javascript">
    parent.location="login.php";
</SCRIPT>

    <BODY>
    </BODY>
</HTML>
<?
    exit();
} 
```

`s_Vers`在所需文件中的两个函数中被设置为全局，但在加载管理页面之前不会执行。

脚本的其他部分包含要求和变量声明，但与会话或登录顺序无关。

任何人都知道我要去哪里错了，或者可以提供解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T08:04:04.193

检查`$_SESSION["s_Vers"]`使用`var_dump();`，bec。为了

```
$s_Vers  = $_SESSION["s_Vers"] = 0; 
```

变量应该是**同一类型**，否则`=`不会发生运算符。

在你的情况下，它应该是*(int)*，bec。最后一项（*即 0*）是*(int)*类型。

# mysql - mysql连接数超过500

> ID：14079544
> 
> 赞同：0
> 
> 时间：2012-12-29T07:09:02.303
> 
> 标签：mysql

我们的服务服务器中有 500 多个进程，每个进程都会与 mysql 服务器保持 mysql 连接。如果我们同时保持 500 多个与 mysql 服务器的连接，会不会影响 mysql 的性能？

在我看来，性能不会受到影响，因为mysql服务器会保留一个连接池，并在有sql请求时响应服务服务器。对于我们的情况，我们将有一个超过500的连接池，我认为500对于mysql来说不会太多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T07:14:18.367

我不知道你的配置，但我知道这可能很糟糕。如果所有连接都关闭，这不会是一个问题，但如果不是这样，您的服务器可能会在达到超时之前不会接受更多连接，这将导致您的客户端出现很大延迟。如果可能的话，也可以在客户端站点上共享连接，这始终是一个好主意，因此您无需等待 tcp 连接建立和身份验证等。

# javascript - 错误：无法在 dojo 中加载模块

> ID：14079549
> 
> 赞同：3
> 
> 时间：2012-12-29T07:09:18.327
> 
> 标签：javascript, dojo

我在 index.html 中有这个超级简单的代码

```
<script src="../../dojo/dojo.js"></script>
<script>
    dojo.require("dojo.fx");
    dojo.ready(function(){
        dojo.byId("greeting").innerHTML += ", from " + dojo.version;
        dojo.fx.slideTo({
            top: 100,
            left: 200,
            node: dojo.byId("greeting")
        }).play();
    });
</script> 
```

我收到错误错误：无法加载“dojo.fx”；最后尝试'./fx.js'

注意：我没有更改 dojo 的目录结构。我正在使用道场 1.6

```
-dojo
-dijit
-dojox
-labs
 -ex01
  -index.html 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-15T09:01:59.233

问题是 dojo 根本无法从我的本地文件系统运行。

> 从 Web 服务器而不是文件系统运行您的源代码，即使 Web 服务器正在您的开发机器上运行。浏览器对来自本地文件系统的 HTTP 请求的处理比来自 Web 服务器的请求更严格，即使它在同一台机器上运行也是如此。为了获得一致的结果，您应该始终在任何 HTTP Web 服务器（Apache、nginx、Tomcat、IIS、Jetty 等）中运行 Dojo。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-11T10:17:43.723

您的代码运行良好。我在这里设置了一个带有 Dojo 1.6 的 jsFiddle：http: [//jsfiddle.net/6h82P/](http://jsfiddle.net/6h82P/)

这是一个完整的例子：

```
<!DOCTYPE html>
<html>
  <head>
     <meta http-equiv="content-type" content="text/html; charset=UTF-8">
     <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/dojo/1.6.0/dojo/dojo.xd.js.uncompressed.js'>               </script>
  </head>
  <body>
  <div id="greeting">Hello</div>
  <script>
      dojo.require("dojo.fx");
      dojo.ready(function(){
      dojo.byId("greeting").innerHTML += ", from " + dojo.version;
      dojo.fx.slideTo({
        top: 100,
        left: 200,
        node: dojo.byId("greeting")
       }).play();
    });
   </script>

  </body>
 </html> 
```

# c# - tcpclient 多个客户端连接到服务器

> ID：14079559
> 
> 赞同：0
> 
> 时间：2012-12-29T07:10:24.123
> 
> 标签：c#, tcp, tcpclient, tcplistener

一个客户端需要同时建立几个到服务器的 tcp 连接。我的服务器代码如下。

```
while (_running)
{
    if (!_listener.Pending())
    {
        Thread.Sleep(100);
        continue;
    }

    TcpClient client = _listener.AcceptTcpClient();
} 
```

我的客户的代码如下。

```
for (int i = 0; i < num; i++)
{
    TcpClient tcp = new TcpClient();
    tcp.Connect(_server);
} 
```

第一次连接成功。但是由于服务器没有响应（实际上服务器正在侦听 tcp 连接），第二次连接失败。
但是，如果我`Thread.Sleep(1500)`在每个 tcp.Connect() 之后添加，所有连接都是成功的。但是这种情况只有在有一个客户端和一个服务器的情况下才成立。如果有很多客户端，那么如何确保服务器可以接受每个连接？还有为什么我添加 Thread.Sleep 可以使这样的连接成功？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T09:14:20.667

由于仍然没有满意的答案，我最终使用不同的方法来处理我的案件。我发现使用 class`Socket`比使用`TcpListener`and更快更稳定`TcpClient`。我尝试了不同的方法来使用`TcpListener`和`TcpClient`. 首先，我曾经`TcpListener.AcceptTcpClient`在有和没有的情况下监听客户端，`TcpListener.Pending`但仍然可能忽略一些客户端连接。其次，我使用了异步方法，`TcpListener.BeginAcceptTcpClient`但`TcpListener.EndAcceptTcpClient`仍然没有成功，仍然忽略了一些客户端连接。最后使用`Socket.Accept`代替`TcpListener.AcceptTcpClient`，前者几乎没有延迟，并且对客户的响应速度非常快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T16:50:57.650

我有同样的任务。我为 .Net 寻找此任务的规范实现，但没有成功。我现在使用的方法如下所述。

**大意**

我们需要侦听器来接收连接，将连接提供给处理程序，并尽快开始侦听新连接。

**执行**

```
AutoResetEvent _stopEvent = new AutoResetEvent(false);
object _lock = new object();

public void StartListening()
{
    _listener.BeginAcceptTcpClient(ConnectionHandler, null);
    _stopEvent.WaitOne();//this part is different in my original code, I don't wait here
}

public void StopListening()
{
    lock(_lock)
    {
        listener.Stop();
        listener = null;                
    }

    _stopEvent.Set();//this part is different in my original code
}

void ConnectionHandler(IAsyncResult asyncResult)
{
    lock(_lock)
    {
        if(_listener == null)
            return;

        var tcpClient = _listener.EndAcceptTcpClient(asyncResult);
        var task = new MyCustomTask(tcpClient);
        ThreadPool.QueueUserWorkItem(task.Execute);

        _listener.BeginAcceptTcpClient(ConnectionHandler,null);             
    }
} 
```

我对在 ConnectionHandler 中调用 _listener.BeginAcceptTcpClient 仍然不是很有信心，但我还没有找到替代方法。

# mysql - 在表格中将行显示为列

> ID：14079560
> 
> 赞同：4
> 
> 时间：2012-12-29T07:10:33.747
> 
> 标签：mysql, sql, select

我有一张如下表

```
CREATE TABLE Statistics(Stat_Id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
                        Period  VARCHAR(55),
                        Location VARCHAR(255),
                        Rate_per_SqFt INT) 
```

表中数据为

```
INSERT INTO Statistics(Period, Location, Rate_per_SqFt)
                VALUES('June', 'Location A', 2500),
                      ('June', 'Location B', 2740),
                      ('June', 'Location C', 3200),
                      ('July', 'Location A', 2650),
                      ('July', 'Location B', 2800),
                      ('July', 'Location C', 3250),
                      ('August', 'Location A', 2750),
                      ('August', 'Location B', 2950),
                      ('August', 'Location C', 3230),
                      ('October', 'Location A', 2950),
                      ('October', 'Location B', 3950),
                      ('October', 'Location C', 3530); 
```

我希望特定月份的行在输出中显示为单独的列，如下所示

```
 Period   Location A     Location B     Location C 
 June        2500          2740           3200
 July        2650          2800           3250
 August      2750          2950           3230
 October     2950          3950           3530 
```

如何使用查询来做到这一点

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T07:12:54.257

```
SELECT Period,
        MAX(CASE WHEN Location = 'Location A' THEN Rate_per_SqFt ELSE NULL END) `Location A`,
        MAX(CASE WHEN Location = 'Location B' THEN Rate_per_SqFt ELSE NULL END) `Location B`,
        MAX(CASE WHEN Location = 'Location C' THEN Rate_per_SqFt ELSE NULL END) `Location C`
FROM statistics
GROUP BY Period 
```

*   [SQLFiddle 演示链接](http://sqlfiddle.com/#!2/b6bbc/1)

如果您有**未知**数量的位置，则首选动态 SQL

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'MAX(CASE WHEN Location = ''',
      Location,
      ''' then Rate_per_SqFt ELSE NULL end) AS ',
      CONCAT('`',Location,'`')
    )
  ) INTO @sql
FROM statistics;

SET @sql = CONCAT('SELECT Period, ', @sql, ' 
                   FROM Statistics 
                   GROUP BY Period');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

*   [SQL Fiddle 演示链接](http://sqlfiddle.com/#!2/b6bbc/2)

# android - 在共享偏好中找到最大的 int

> ID：14079561
> 
> 赞同：-3
> 
> 时间：2012-12-29T07:10:36.620
> 
> 标签：android, int, sharedpreferences

我有 8 个数字存储在我的共享偏好中，我试图弄清楚如何识别最大的数字并在文本视图中显示？

编辑：

```
private void showKing(){
    SharedPreferences peepsScores = PreferenceManager.getDefaultSharedPreferences(this);
    int userScore1 = peepsScores.getInt("userScore1",222);
    int userScore2 = peepsScores.getInt("userScore2",222);
    int userScore3 = peepsScores.getInt("userScore3",222);
    int userScore4 = peepsScores.getInt("userScore4",222);
    int userScore5 = peepsScores.getInt("userScore5",222);
    int userScore6 = peepsScores.getInt("userScore6",222);
    int userScore7 = peepsScores.getInt("userScore7",222);
    int userScore8 = peepsScores.getInt("userScore8",222);

    String pDName1 =  pName1.getText().toString();
    String pDName2 =  pName2.getText().toString();
    String pDName3 =  pName3.getText().toString();
    String pDName4 =  pName4.getText().toString();
    String pDName5 =  pName5.getText().toString();
    String pDName6 =  pName6.getText().toString();
    String pDName7 =  pName7.getText().toString();
    String pDName8 =  pName8.getText().toString();

    if(userScore1>userScore2+userScore3+userScore4+userScore5+userScore6+userScore7+userScore8){
        dPresident.setText(pDName1);
    }
        else{

    if(userScore2>userScore1+userScore3+userScore4+userScore5+userScore6+userScore7+userScore8){
        dPresident.setText(pDName2);
    }
        else{

    if(userScore3>userScore2+userScore1+userScore4+userScore5+userScore6+userScore7+userScore8){
        dPresident.setText(pDName3);
    }
        else{

    if(userScore4>userScore2+userScore3+userScore1+userScore5+userScore6+userScore7+userScore8){
        dPresident.setText(pDName4);
    }
        else{

    if(userScore5>userScore2+userScore3+userScore4+userScore1+userScore6+userScore7+userScore8){
        dPresident.setText(pDName5);
    }
        else{

    if(userScore6>userScore2+userScore3+userScore4+userScore5+userScore1+userScore7+userScore8){
        dPresident.setText(pDName6);
    }
        else{

    if(userScore7>userScore2+userScore3+userScore4+userScore5+userScore6+userScore1+userScore8){
        dPresident.setText(pDName7);
    }
        else{

    if(userScore8>userScore2++userScore3&userScore4&&userScore5+userScore6+userScore7+userScore1){
        dPresident.setText(pDName8);

    }
    }}}}}}}
} 
```

在数字 8 中，我正在尝试其他符号，而日食说不

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T00:19:38.683

您可以执行以下操作：

```
//Obtain highest Score (Select maximum value)
int highestScore = Math.max(userScore1 ,  
   Math.max(userScore2 ,  
      Math.max(userScore3 ,  
           Math.max(userScore4 , 
               Math.max(userScore5 ,  
                 Math.max(userScore6 , 
                     Math.max(userScore7 , userScore8)))))));

// set text
dPresident.setText("" + highestScore); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T00:34:12.177

如果我自己可以这么说，那真是太优雅了：P

```
int maxnumber = 0;

for (int i = 1; i >= 8; i++) {
            maxnumber = Math.max(peepsScores.getInt("userScore" + i, 0), maxnumber);
        } 
```

现在`maxnumber`将等于最高数字。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-29T07:28:06.460

对不起，我想多了：

```
if(userScore1 > userScore2 + userScore3 + userScore4 + userScore5 + userScore6 + userScore7 + userScore8) {
    dPresident.setText("" + userScore1); 
```

# c# - 通过 POST 请求提交 CSV - Post Coming Through Empty (c#)

> ID：14079567
> 
> 赞同：1
> 
> 时间：2012-12-29T07:11:04.990
> 
> 标签：c#, .net, post

我正在尝试从文件中读取 CSV 并通过 POST 请求提交。由于某种原因，请求中没有发送数据。谁能看到我的代码出了什么问题？

```
 FileStream rdr = new FileStream(path, FileMode.Open, FileAccess.Read);
    byte[] inData = new byte[rdr.Length];
    rdr.Read(inData, 0, Convert.ToInt32(rdr.Length));

    HttpWebRequest req = (HttpWebRequest)WebRequest.Create(url);
    req.KeepAlive = false;
    req.ContentType = GetContentType(path);
    req.Method = "POST"; 
    req.ContentLength = rdr.Length;
    req.AllowWriteStreamBuffering = true;

    Stream reqStream = req.GetRequestStream();

    reqStream.Write(inData, 0, Convert.ToInt32(rdr.Length));

    Stream dataStream = req.GetResponse().GetResponseStream();
    StreamReader reader = new StreamReader(dataStream);
    responseFromServer = responseFromServer + reader.ReadToEnd();

    rdr.Close();
    reqStream.Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T06:45:14.580

我确定需要将 CSV 数据作为变量的值提交。我发帖的第三方本可以提前提到这一点。谢谢你的帮助。

# css - ul ul li a 对颜色没有反应

> ID：14079568
> 
> 赞同：0
> 
> 时间：2012-12-29T07:11:08.873
> 
> 标签：css, html, drop-down-menu, hover, html-lists

嘿，我正在尝试制作：

`ul ul li a`在一个`nav`颜色`#FFF`

但无论我做什么，我都无法改变它，我认为可能是：

`ul li a`影响它但是那是`#FFF`什么？

我的目标是深色背景上的白色文本，然后是白色上的黑色文本`hover`。

到目前为止，这是我的代码：

CSS：

```
nav ul ul li

{
    background: #4a4a4a;
    float: none; 
    position: relative;
   color: #FFF;
}

    nav ul ul li a 

{
    color: #FFF;
    padding: 10px 51px;
}

    nav ul ul li a:hover 

{
    background: #FFF;
    color: #000;
} 
```

HTML：

```
<nav>
                <ul>
                    <li><a href="#">Home</a></li>
                    <li><a href="#">Services</a></li>
                    <li><a href="#">Our Prices</a></li>
                    <li><a href="#">Web Design</a>
                        <ul>
                            <li><a href="#">Portfolio</a></li>
                            <li><a href="#">Pricing</a></li>
                        </ul>
                    </li>
                    <li><a href="#">Consulting</a></li>
                    <li><a href="#">Quick Hire</a></li>
                </ul>
            </nav> 
```

任何帮助都会非常感谢:)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T07:44:26.383

我认为您正在尝试在这里实现相同的目标：

**[JSbin 演示](http://jsbin.com/esogij/5/watch)**

```
    导航
    {
     背景：#4a4a4a；
     浮动：无；
     位置：相对；
     颜色：#FFF；
    }

    导航 ul ul li a
    {
     颜色：#FFF；
     填充：0px 51px；
    }

    导航 ul ul li:hover
    {
     背景：#FFF；
    }

    nav ul ul li:hover a
    {
     背景：#FFF；
     颜色：#000；
    }
    导航 ul ul li a:hover
    {
     背景：#FFF；
     颜色：#000；
    }

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T07:31:50.493

这些很可能是您已经访问过的 URL，这会导致浏览器以不同的颜色显示它们。

添加`a:visited`而不只是添加`a`到 CSS 选择器。

```
nav ul ul li a, nav ul ul li a:visited 
```

# iphone - 为仅由一个用户创建的每个 Spotify 用户加载播放列表

> ID：14079575
> 
> 赞同：0
> 
> 时间：2012-12-29T07:12:38.937
> 
> 标签：iphone, objective-c, ios, spotify, cocoalibspotify-2.0

在我基于 spotify 的应用程序中，我不想加载用户特定的播放列表，而是希望每个用户都能享受我在我的帐户中创建的播放列表。我怎样才能做到这一点。

**以下是关于我的查询的简短摘要。**

我开发了支持 spotify 的应用程序。您可以在[Workout DJ PRO for Spotify](https://itunes.apple.com/in/app/workout-dj-pro-for-spotify/id571434321?mt=8)浏览我的应用程序。浏览此应用程序后，您会在其中找到一些播放列表和曲目。我已经使用我的 Spotify 帐户集成了那些。

**现在我回到原来的问题..**

当我使用我的 Spotify 帐户登录我的应用程序时，我在其中创建了播放列表和曲目，我能够享受功能非常好的应用程序。但是，如果我尝试通过另一个凭据登录。我无法加载其中任何一个播放列表或曲目。

**从这个解释中提出的另一个问题是：**

1.  Spotify 是否支持通用播放列表功能？回答：如果是--> 请指导我如何实现如果否--> 我的用户名有什么独特之处吗？以便我可以在另一个帐户中访问我的播放列表？

任何帮助将不胜感激..！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T10:49:15.677

您需要应用程序中所需播放列表的 URL。

然后，一旦您以其他用户身份登录：

```
NSURL *url = [NSURL URLWithString:@"<your playlist URL>"];

[[SPSession sharedSession] playlistForURL:url callback:^(SPPlaylist *playlist) {
    NSLog(@"Got playlist!");
}]; 
```

重要提示：您必须确保其他用户需要访问的播放列表在 Spotify 桌面客户端中设置为“已发布”。

# php - 如何使用 SonataAdminBundle

> ID：14079585
> 
> 赞同：1
> 
> 时间：2012-12-29T07:13:33.073
> 
> 标签：php, symfony, symfony-sonata, sonata-admin

我是 Symfony 的新手，我正在尝试使用 Sonata 和 Doctrine ORM 创建一个数据库接口。起初，我已经阅读[了本教程](http://tech.dupeu.pl/2012/10/getting-started-with-symfony-2-1-fosuserbundle-sonatauserbundle-and-sonataadminbundle/)，几天后它开始在我的 VirtualBox 机器 Ubuntu 服务器上运行。

现在，我正在尝试在另一个包中使用奏鸣曲管理员。

所以，我在这里有我的 SonataAdminBundle：

```
/var/www/Symfony/testsonata/src/Application/Sonata 
```

这里还有新的捆绑包：

```
/var/www/Symfony/testsonata/src/Application/MyDbBundle 
```

我`m trying to use [this man](http://symfonydev.ru/symfony-back-and-front-interfaces/) (it`是俄语）。

接下来，在我`ve got working Sonata, I`创建了一个新包之后：

```
$ php app/console generate:bundle --namespace=Application/MyDbBundle

You are going to generate a "Application\MyDbBundle\MyDbBundle" bundle
in "/var/www/Symfony/testsonata/src/" using the "annotation" format. 
```

然后，我运行了以下命令：

```
$ php app/console doctrine:mapping:import MyDbBundle xml --filter=Link
writing /var/www/Symfony/testsonata/src/Application/MyDbBundle/Resources/config/doctrine/Link.orm.xml

$ php app/console doctrine:generate:entities --path="/var/www/Symfony/testsonata/src" MyDbBundle:Link

Generating entities for namespace "Application\MyDbBundle\Entity\Link"
  > backing up Link.php to Link.php~
  > generating Application\MyDbBundle\Entity\Link 
```

我想做的最后一件事是创建一个管理类和一个服务描述

我创建了这个文件`/var/www/Symfony/testsonata/src/Application/MyDbBundle/Admin/LinkAdmin.php`，其中包含：

```
<?php
namespace Application\MyDbBundle\Admin;

use Sonata\AdminBundle\Admin\Admin;
use Sonata\AdminBundle\Form\FormMapper;
use Sonata\AdminBundle\Datagrid\DatagridMapper;
use Sonata\AdminBundle\Datagrid\ListMapper;
use Knp\Menu\ItemInterface as MenuItemInterface;
use My\DbBundle\Entity\Link;

class LinkAdmin extends Admin
{
    protected function configureDatagridFilters(DatagridMapper $datagridMapper)
    {
        $datagridMapper->add('title')
                      ->add('url');
    }

    protected function configureListFields(ListMapper $listMapper)
    {
        $listMapper->addIdentifier('title')
                   ->add('url')
                   ->add('updatedAt');
    } 

    protected function configureFormFields(FormMapper $formMapper)
    {
        $formMapper->add('title')
                   ->add('url')
                   ->add('annotation');
    }
} 
```

我将此添加到我的`services.xml`：

```
<container xmlns="http://symfony.com/schema/dic/services"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">
    <services>
      <service id="sonata.admin.my.db.link" class="Application\MyDbBundle\Admin\LinkAdmin">
            <tag name="sonata.admin" manager_type="orm" group="Databases" label="Links"/>
            <argument/>
            <argument>Application\MyDbBundle\Entity\Link</argument>
            <argument>SonataAdminBundle:CRUD</argument>
        </service>
    </services> 
</container> 
```

当我去

```
http://localhost/Symfony/testsonata/web/app_dev.php/admin/dashboard 
```

我收到这条消息：

> InvalidArgumentException：[ERROR 94] 验证失败：未找到 DTD！（在 n/a - 第 5 行，第 20 列）[错误 5] 文档末尾的额外内容（在 n/a - 第 22 行，第 1 列）

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T06:16:10.267

或者也许我需要另辟蹊径？因为 MyDbBundle 和 Sonata 在不同的目录中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T17:21:39.723

根据错误，您的 xml 配置文件出现问题。`<argument/>`为什么开头有一个？这可能是问题所在。

PS：我的意思是，这样`<argument></argument>`效果更好吗？

# java - 我怎样才能得到一个只有时间的日期对象

> ID：14079586
> 
> 赞同：-2
> 
> 时间：2012-12-29T07:13:53.877
> 
> 标签：java, datetime

我有一个字段“startdate”，它的类型是 DATE。我只想在这个字段中获得时间，而且也是“yyyy-mm-dd”格式。我尝试了太多东西，但不能只获得时间DATE 类型对象。我必须将它存储在数据库中。

有帮助吗？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T07:29:18.520

> Date 类表示特定的时间瞬间，精度为毫秒。

（手册中的[日期](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html)）

因此，Date 对象表示*特定*的时间点（即，包括日期）。你试图把一天中的某个时间放进去，那是一组无限的时刻：每天一个。

你需要自己选择一个特定的日子。选择你喜欢的任何一天，因为无论如何你都不需要它。

或者您可以使用始终使用 1970 年 1 月 1 日作为日期部分的子类[java.sql.Time 。](http://docs.oracle.com/javase/7/docs/api/java/sql/Time.html)

# python - Python中如何判断数字是32位还是64位整数？

> ID：14079587
> 
> 赞同：3
> 
> 时间：2012-12-29T07:13:59.600
> 
> 标签：python, integer

我想区分 Python 中的 32 位和 64 位整数。在 C 中，这很容易，因为我们可以使用`int_64`and声明变量`int_32`。但是在 Python 中，我们如何区分 32 位整数和 64 位整数呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-29T07:20:23.097

没有必要。解释器在幕后处理分配，根据需要有效地从一种类型升级到另一种类型，而无需您做任何明确的事情。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-29T07:21:18.213

基本上，你没有。没有理由这样做。如果要处理已知位大小的类型，请查看`numpy`数据类型。

如果要将数据*放入*指定的格式，请查看[struct](http://docs.python.org/2/library/struct.html)模块。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-29T11:55:52.467

`struct`其他答案中提到的模块是您需要的。

一个例子来说明清楚。

```
import struct

struct.pack('qii', # Format string  here.
            100, # Your 64-bit integer
            50, # Your first 32-bit integer
            25) # Your second 32-bit integer

# This will return the following:
'd\x00\x00\x00\x00\x00\x00\x002\x00\x00\x00\x19\x00\x00\x00' 
```

[格式化字符串的文档](http://docs.python.org/2/library/struct.html#format-characters)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-29T08:08:05.010

以下来自 ipython 解释器会话的片段指示了一种测试整数类型的方法。注意，在我的系统上，an`int`是 64 位数据类型，a`long`是多字类型。

```
In [190]: isinstance(1,int)
Out[190]: True    
In [191]: isinstance(1,long)
Out[191]: False    
In [192]: isinstance(1L,long)
Out[192]: True 
```

另请[参阅](https://stackoverflow.com/a/450034/837847)有关`sys.getsizeof`. 这个函数并不完全相关，因为包括了一些额外的开销字节。例如：

```
In [194]: import sys    
In [195]: sys.getsizeof(1)
Out[195]: 24
In [196]: sys.getsizeof(1L)
Out[196]: 28 
```

# iphone - 从字符串中解析日期

> ID：14079590
> 
> 赞同：0
> 
> 时间：2012-12-29T07:14:29.133
> 
> 标签：iphone, ios5

我无法将以下字符串解析为日期

```
2012-12-28T00:01:51Z ,

I need date in format 28 Dec 2012 
```

请帮我 。

提前感谢阿布舍克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T07:35:55.543

试试这个方法：

```
NSString *dateString=@"2012-12-28T00:01:51Z";
NSDateFormatter *dateFormatter=[NSDateFormatter new];
[dateFormatter setDateFormat:@"YYYY-MM-dd'T'hh:mm:ss'Z'"];

NSLog(@"=> time %@",[dateFormatter dateFromString:dateString]);

NSDate *formattedDate=[dateFormatter dateFromString:dateString];

[dateFormatter setDateFormat:@"dd MMM YYYY"];
NSLog(@"Formatted date : %@",[dateFormatter stringFromDate:formattedDate]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T07:36:23.123

为什么不简单地传递字符串，然后将其转换为您想要的任何格式？

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init]; 
[dateFormatter setDateFormat:@"yyyy-MM-dd"]; 
```

# php - 解析错误：语法错误，意外的 T_VARIABLE，期待 T_FUNCTION.oops Php

> ID：14079592
> 
> 赞同：-4
> 
> 时间：2012-12-29T07:14:42.787
> 
> 标签：php, runtime-error

我是 php 中的 oops 新手。这是我的第一个 oops 程序。这个程序是如此基本（表单程序），但我不知道我必须做什么。抱歉，如果这是一个新问题，但我对此很陌生。我收到错误为解析错误：语法错误，意外的 T_VARIABLE，在第 34 行第 34 行的 /ni.class.php 中期待 T_FUNCTION ：$str=$ab->startform('#','post','myform')。 '

'。

```
 <?php
    class ni
    {

    function startForm($action='#',$method='post',$id=NULL)
    {
    $str="<form><action =\"$action\" method=\"$method\"";

            if(isset($id))
            {
            $str.="id =\"$id\">";
            }
    return $str;
    }

        function addlabel($id,$text)
        {

        $str= "<label id=\"$id\">$text hello </label>";
        return $str;
        }

    function addInput($type,$name,$value)
    {
    $str="<input type=\"$type\" name=\"$name\" value=\"$value\"\>";
    return $str;
    }

        function endForm()
        {
        return "</form>";
        }

         $ab=new ni();
         $str=$ab->startform('#','post','myform').'<p>'.
                       addlabel('label','amtext')
                     .addinput('text','input1','value1').'</p>';
         echo $str;
         $ab->endform();

    }

    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T07:16:28.463

你必须移动这个

```
$ab=new ni();
$str=$ab->startform('#','post','myform').'<p>'.
addlabel('label','amtext')
.addinput('text','input1','value1').'</p>';
echo $str;
$ab->endform(); 
```

在你的`ni`课堂之外

* * *

基本上是这样的

```
class ni {
  function startForm() { ... }
  function addLabel() { ... }
  function addInput() { ... }
  function endForm() { ... } 
}

$ab=new ni();
$str=$ab->startform('#','post','myform').'<p>'.
addlabel('label','amtext')
.addinput('text','input1','value1').'</p>';
echo $str;
$ab->endform(); 
```

* * *

更常见的是，由于类旨在可重用，您会看到它被分成多个文件

```
// classes/ni.php

class ni {
  function startForm() { ... }
  function addLabel() { ... }
  function addInput() { ... }
  function endForm() { ... } 
}

// somefile.php
require('classes/ni.php');
$ab=new ni();
$str=$ab->startform('#','post','myform').'<p>'.
addlabel('label','amtext')
.addinput('text','input1','value1').'</p>';
echo $str;
$ab->endform(); 
```

* * *

作为最后的建议，我会将用法更改为

```
$ab = new ni();
<?php echo $ab->startform('#', 'post', 'myform') ?>
<p>
  <?php echo $ab->addLabel('label', 'amtext') ?>
  <?php echo $ab->addInput('text', 'input1', 'value1') ?>
</p>
<?php echo $ab->endForm() ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T07:16:17.087

您有语法错误，更正后的脚本应如下所示：

```
<?php class ni {

    function startForm($action = '#', $method = 'post', $id = NULL) {
        $str = "<form><action =\"$action\" method=\"$method\"";

        if (isset($id)) {
            $str .= "id =\"$id\">";
        }
        return $str;
    }

    function addlabel($id, $text) {

        $str = "<label id=\"$id\">$text hello </label>";
        return $str;
    }

    function addInput($type, $name, $value) {
        $str = "<input type=\"$type\" name=\"$name\" value=\"$value\"\>";
        return $str;
    }

    function endForm() {
        return "</form>";
    }

}

$ab = new ni(); $str = $ab -> startform('#', 'post', 'myform') . '<p>'
. addlabel('label', 'amtext') . addinput('text', 'input1', 'value1') .
'</p>'; echo $str; $ab -> endform();

?> 
```

# jquery - 在 Web 服务中收到错误“'JSON' is undefined”

> ID：14079597
> 
> 赞同：0
> 
> 时间：2012-12-29T07:15:57.740
> 
> 标签：jquery, asp.net, ajax, json, web-services

我是 web 服务和 JSON 的新手。我正在 asp.net 中开发一个应用程序，它使用 Webservices 和 JSON 在 Ajax 调用中将数据发布到服务器。在下面的函数 PostData 中，我收到一个错误：

```
 data: "{" + jsonObjectName + ":" + JSON.stringify(dataToSend) + "}",     as "json" is undefined. 
```

这里 dataToSend 是一个对象，其中包含我的数据
submitType 是提交按钮 id（在页面中我有两个提交按钮，所以我通过 id 调用）

strMessagetoShow 是显示成功或失败的文本
strMethodToCall 在 Webservice 中调用了哪个方法？

```
function PostData(dataToSend, submitType, strMessagetoShow, strMethodToCall,        jsonObjectName) {   
 $.ajax({
    url: window.top.GetWsUrl() + "/" + strMethodToCall,
    type: "POST",
    dataType: "json",
    data: "{" + jsonObjectName + ":" + JSON.stringify(dataToSend) + "}",
    timeout: 30000,     
    contentType: "application/json; charset=utf-8",
    success: function (data) {
        return data;
    },
    error: function (result) {
        alert(result.status + ' ' + result.statusText);
    }
 });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T07:19:02.943

它是`JSON.stringify`, 并`JSON.parse`带有大写字母（javascript 区分大小写）。

此外，在对象中使用变量时，您必须执行以下操作：

```
var obj = {};
    obj[jsonObjectName] = JSON.stringify(dataToSend);

$.ajax({
    ....
    data: obj,
    timeout: 30000,     
    ....etc
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T07:24:19.477

试试这个，看看是否有帮助：

```
function PostData(dataToSend, submitType, strMessagetoShow, strMethodToCall, jsonObjectName) {   
 $.ajax({
    url: window.top.GetWsUrl() + "/" + strMethodToCall,
    type: "POST",
    dataType: "json",
    data: {jsonObjectName : JSON.stringify(dataToSend)}, // or $.parseJSON(dataToSend)
    timeout: 30000,     
    contentType: "application/json; charset=utf-8",
    success: function (data) {
        return data;
    },
    error: function (result) {
        alert(result.status + ' ' + result.statusText);
    }
 });
} 
```

这里有什么变化：

改变了这个：

```
 "{" + jsonObjectName + ":" + json.stringify(dataToSend) + "}" 
```

对此：

```
 {jsonObjectName : JSON.stringify(dataToSend)} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-29T07:20:34.157

确保包含 JSON 库。有关 API，请参阅[https://github.com/douglascrockford/JSON-js/blob/master/json2.js](https://github.com/douglascrockford/JSON-js/blob/master/json2.js)。

```
JSON.stringify(value, replacer, space) 
```

# java - java.lang.IllegalArgumentException 使用 Jsoup

> ID：14079603
> 
> 赞同：0
> 
> 时间：2012-12-29T07:16:46.537
> 
> 标签：java, html-parsing, jsoup

我的代码：

```
public static void main(String[] args) {
    Validate.isTrue(true, "usage: supply url to fetch");
    try{
        String url="http://www.spoj.com/ranks/PRIME1/";
        Document doc= Jsoup.connect(url).get();
        Elements es=doc.getElementsByAttributeValue("class","lightrow");
        System.out.println(es.get(0).child(0).text());

    }catch(Exception e){e.printStackTrace();}
} 
```

得到：

```
Exception in thread "main" java.lang.IllegalArgumentException: usage: supply url to fetch
at org.jsoup.helper.Validate.isTrue(Validate.java:45)
at org.jsoup.examples.HtmlToPlainText.main(HtmlToPlainText.java:26) 
```

请指出我的错误以及为什么我会得到它。我在 Jsoup 官方网站上举了一个例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T07:36:22.797

它按预期运行。我认为这需要在命令行上将一个参数传递给程序才能运行（一个 URL）。

请看一下：

```
 public static void main(String[] args) throws IOException {
        Validate.isTrue(args.length == 1, "usage: supply url to fetch"); 
```

# php - PHP - 我如何提取一个子字符串 + X 之前的字符数？

> ID：14079604
> 
> 赞同：1
> 
> 时间：2012-12-29T07:16:47.790
> 
> 标签：php, string, capture

昨天我问了一个问题，有几个人回答得很好（谢谢）。

新问题:)

我想在字符串中提取一个唯一的子字符串，但还要在它之前捕获 X 个字符。有没有允许这样做的功能？

* * *

我刚刚找到 strrpos() - 这可能会做到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T07:20:01.517

我认为没有内置功能可以做到这一点，但这应该可以解决问题：

```
function subbef($str, $sub, $bef)
{
    $pos = strpos($str, $sub);
    if ($pos === false || $pos < $bef) {
        return false;
    }
    return substr($str, $pos - $bef, strlen($sub) + $bef);
} 
```

用法如下：

```
subbef('test string here', 'string', 3); //"st string" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T07:31:06.220

您也可以通过正则表达式执行此操作：

```
<?php
function get($needle, $haystack, $before){
    preg_match($v="/.{".$before."}$needle/", $haystack, $matches);
    return $matches[0];
}

echo get("hello", "I just want to say hello bobby!", 3); 
```

# c# - monotouch.dialog styledstringelement 调整单元格宽度

> ID：14079605
> 
> 赞同：7
> 
> 时间：2012-12-29T07:17:35.763
> 
> 标签：c#, xamarin.ios, monotouch.dialog

我创建了我的类 MyStyledStringElement 和子类 StyledStringElement 和 IElementSizing 以尝试控制 styledstringelement 的宽度。不幸的是，下面的代码仅在 getheight() 中调整单元格的高度。是否有我可以使用的 getWidth() 方法或类似的方法来调整 styledstringelement 的宽度，使其看起来与 UIButton 相同？一如既往地提前感谢。

```
public override UITableViewCell GetCell (UITableView tv)
    {
        var cell = base.GetCell (tv);
        cell.AutosizesSubviews = false;
        //tv.TranslatesAutoresizingMaskIntoConstraints = false;
        cell.ClipsToBounds = false;
        cell.Frame.Width = 30;
        cell.Bounds.Width = 30;
        cell.Frame.Size = new System.Drawing.SizeF (30, 30);

        return cell;
    }

    #region IElementSizing implementation
    public float GetHeight (UITableView tableView, NSIndexPath indexPath)
    {
        //throw new NotImplementedException ();

        tableView.Frame.Width = 10;
        //tableView.Bounds.Width = 10;

        tableView.Frame.Height = 10;

        Console.WriteLine (tableView.ToString ());

        return 10;
    }
    #endregion 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T02:23:02.743

上次看这个，宽度是由 UITableView 控制的。您最好的选择是将 UIButton 添加为 UITableViewCell 的子项，并返回包含该按钮所需的高度。

# c++ - C++ 指针声明顺序输出分段错误或总线错误

> ID：14079606
> 
> 赞同：1
> 
> 时间：2012-12-29T07:17:43.287
> 
> 标签：c++, pointers, segmentation-fault, bus-error

这将是两个问题

我有两段代码，唯一的区别是 int* a 的声明顺序；和int cpt = 0；在第 6 行和第 7 行。

**情况1：**

```
#include <iostream>
using namespace std;
int main()
{
    cout<<"begin"<<endl;
    int* a;
    int cpt = 0;
    cout<<"after init "<<a<<endl;
    *a = 2;
    cout<<"after assign"<<endl;
    cout<<a<<" "<<*a<<endl;
    cout<<"after cout"<<endl;
    int* b;
    *b = 2;
    cout<<b<<" "<<*b<<endl;
} 
```

**输出：**

```
begin
after init 0x7fff6c97f05e
Bus error: 10 
```

**案例二：**

```
#include <iostream>
using namespace std;
int main()
{
    cout<<"begin"<<endl;
    int cpt = 0;
    int* a;
    cout<<"after init "<<a<<endl;
    *a = 2;
    cout<<"after assign"<<endl;
    cout<<a<<" "<<*a<<endl;
    cout<<"after cout"<<endl;
    int* b;
    *b = 2;
    cout<<b<<" "<<*b<<endl;
} 
```

**输出：**

```
begin
after init 0x7fff50e4ac00
after assign
0x7fff50e4ac00 2
after cout
Segmentation fault: 11 
```

我想知道为什么声明顺序会影响错误。cpt 变量没有在任何地方使用，那么为什么它的声明会影响错误呢？

我也想知道为什么在第二种情况下指针“a”在“b”指针确实产生段错误时引用它时不会产生段错误。它们具有相同的声明和相同的用法，为什么不同？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-29T07:20:29.797

关键是你正在做的事情（取消引用未初始化的指针）会导致**未定义的行为，**所以你真的不能指望*任何*特别的事情发生，也没有合理/“符合标准”的解释程序做什么。然而，在第二种情况下，堆栈的设置方式可能会`a`意外指向一个有效的内存位置，但这只是一个猜测。

# jquery - 使用选择框绑定文本（单击时）Jquery

> ID：14079618
> 
> 赞同：-1
> 
> 时间：2012-12-29T07:19:03.767
> 
> 标签：jquery, html, css, jquery-ui, drag-and-drop

我创建了一个小应用程序来将文本从 textarea 添加到 div 块。我希望当用户单击黄色 div 文本时不会追加，并且所选文本的属性（字体系列、字体大小）也在选择框中突出显示

```
$(document).ready( function() {
    $('#page1').click(function(e){
    var $el = $("<li class='text'>"+$('#ta').val()+"</li>"),
        $this = $(this), offset = $this.offset();
    $el.css({
        position: 'absolute',
        left: e.pageX - offset.left,
        top: e.pageY - offset.top
    });
    $this.append($el);
    ($el).draggable();
    $("#page1 li").click(function(){
    $("#page1 li").removeClass('active');
    $(this).addClass("active");

    });
});
        $("#fs").change(function() {
            $('li.active').css("font-family", $(this).val());
        });
        $("#size").change(function() {
            $('li.active').css("font-size", $(this).val() + "px");
        });

      }); 
```

Jsfiddle 链接：http: [//jsfiddle.net/sharma_pooja/P2Kyk/31/](http://jsfiddle.net/sharma_pooja/P2Kyk/31/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T07:44:54.340

如果要添加与鼠标点击的#block元素中的点坐标相同的文本段落，则必须执行以下操作：

1）添加位置：相对于#block元素css

2) 像这样更改#block click 事件处理程序：

```
 $('#block').click(function(e){
        var $el = $("<p>"+$('#ta').val()+"</p>"),
            $this = $(this), offset = $this.offset();
        $el.css({
            position: 'absolute',
            left: e.pageX - offset.left,
            top: e.pageY - offset.top
        });
        $this.append($el);
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T09:42:58.027

```
$('#block').click(function(e){

    var $this = $(this);
    var $textBlock = $this.children('p');
    var _offset = $this.offset();

    $textBlock.css({
        position: 'relative',
        left: e.pageX - _offset.left,
        top: e.pageY - _offset.top
    });

}); 
```

并将 CSS 添加`overflow: hidden;`到`#block`类中。当位于块边界附近时，它将隐藏将溢出块的其余文本。

* * *

**更新**

对于可拖动选项，您应该使用[*jQuery UI*](http://jqueryui.com/download/)并且可以做一些事情。像这样

```
$('#block p')
    .draggable() // for moving the `<p>` around with your mouse
    .disableTextSelect(); // to disable text selection inside container 
```

这是两种情况的**[小提琴](http://jsfiddle.net/P2Kyk/12/)**：单击父容器并拖动文本块本身时。

# javascript - 如何在html页面的锚标签中读取xml

> ID：14079620
> 
> 赞同：-1
> 
> 时间：2012-12-29T07:19:21.630
> 
> 标签：javascript, html, css, xml

如何在 html 页面上读取 XML 文件。我希望我的 XML 链接值进入锚标签 href 属性和锚标签之间的网站名称

我只知道非常基本的Javascript。

我正在尝试使用 XML 更改网站页脚中的值，因为我有 100 多个页面，每次更改页脚中的某些内容时，我都必须手动更改所有 100 个页面，这就是为什么我想通过 XML 更改页脚链接的原因。

请通过显示代码页来解释应该是这样的

```
<div>
   <a href "this value should be read by xml">and this value should also be read by xml</a>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T09:29:33.503

谢谢大家的回答，但经过大量搜索，我找到了我想要的。我想使用单个文件更改多个页面页脚部分而不更改我的页面名称（从 .html 页面到 .aspx、.php、.asp 等其他页面）我认为使用 xml 将是一个好方法，但我在这个领域真的是新手并且 xml 对我不起作用（或者说我无法以正确的方式使用它）因此我找到了一种替代方法来使用单个文件更改多个 html 页面的内容。我需要做的就是使用 SSI aka 服务器端包含。您唯一需要做的就是检查您的服务器是否支持 SSI，然后制作一个您想要包含在每个页面上的单独的 html 页脚页面。为了包含该外部页脚页面，只需键入。

```
<!--#include file="footer.html" --> 
```

在 area,div,table 中，您希望页脚加载并完成。

有关详细文章，请访问以下链接[http://httpd.apache.org/docs/2.2/howto/ssi.html](http://httpd.apache.org/docs/2.2/howto/ssi.html)

# android - Android：Widget+Service 没有空的构造函数

> ID：14079623
> 
> 赞同：1
> 
> 时间：2012-12-29T07:19:31.393
> 
> 标签：android, android-widget

我创建了一个新闻小部件。它从服务器获取 JSON，然后对其进行解析并将其显示给用户。但一开始我得到一个错误，见下文。我也试过没有服务，只有`AsyncTask`，我仍然有错误：

```
无法在未调用 Looper.prepare() 的线程内创建处理程序

```

我应该怎么办？

```
public class Widget extends AppWidgetProvider {

    private RemoteViews update;
    private ArrayList<String> title = new ArrayList<String>();
    private ArrayList<String> images = new ArrayList<String>();
    private ArrayList<String> url = new ArrayList<String>();
    private ArrayList<Integer> timestamp = new ArrayList<Integer>();
    private Handler mHandler = new Handler(Looper.getMainLooper());

    @Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds){

    ComponentName thisWidget = new ComponentName(context, GetNews.class);
    int[] appWidgetId = appWidgetManager.getAppWidgetIds(thisWidget);
    Intent intent = new Intent(context.getApplicationContext(), GetNews.class);
    intent.putExtra("appWidgetIds", appWidgetIds);

        context.startService(intent);
    }

        public String getTime(String time, Context context){
            long jsonTimestamp = Long.parseLong(time);
            TimeZone timeZone = TimeZone.getDefault();
            Locale locale = Locale.getDefault();
            Calendar calendar = Calendar.getInstance(timeZone, locale);
            calendar.setTimeInMillis(jsonTimestamp * 1000);
            CharSequence date = DateUtils.getRelativeDateTimeString(context, System.currentTimeMillis(), DateUtils.SECOND_IN_MILLIS, DateUtils.FORMAT_ABBREV_RELATIVE,0);

            final long diff = System.currentTimeMillis() - calendar.getTimeInMillis();
            final int MINUTE_MILLIS = 1000*60;
            final int HOUR_MILLIS = 1000*60*60;
            final int DAY_MILLIS = 1000*60*60*24;

            if(diff < 24*HOUR_MILLIS){
                SimpleDateFormat s = new SimpleDateFormat("HH:mm");
                String format = s.format(new Date(calendar.getTimeInMillis()));
                return format+"";
            }
            else {
                return  date+"";
            }

        }

    public static boolean isConnected(Context context)
    {
        ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
        return cm.getActiveNetworkInfo().isConnectedOrConnecting();
    }
         public void WidgetUpdate(Context context){

    }
        class  LoadBitmap extends  AsyncTask<Void, Void, Bitmap>{

            String Url = "http://www.gazeta.uz/i/gazetauz-logo-120.gif";
            public void loadImage(String url){
                if(url != null){
                this.Url = url;
                }
            }

            @Override
            protected Bitmap doInBackground(Void... params) {
                InputStream ips = null;
                try {
                    ips = new URL(Url).openConnection().getInputStream();
                } catch (IOException e) {
                    e.printStackTrace();
                }
                Bitmap bitmap  = BitmapFactory.decodeStream(ips);
                return bitmap;
            }
        }

    class LoadNews extends AsyncTask<Void, Void, JSONObject> {

        @Override
        protected JSONObject doInBackground(Void... params) {
            InputStream ips = null;
            String jstring = null;
            JSONObject json = null;

            try {
                DefaultHttpClient client = new DefaultHttpClient();
                HttpGet get = new HttpGet("mysite");
                HttpResponse response = client.execute(get);
                ips = response.getEntity().getContent();
            } catch (IOException e) {
                e.printStackTrace();
            }

            try {
                BufferedReader buffer = new BufferedReader(new InputStreamReader(ips, "UTF-8"));
                StringBuilder str = new StringBuilder();
                String line;

                while((line = buffer.readLine()) != null){
                   str.append(line);
                }
                ips.close();
                jstring = str.toString();

            } catch (UnsupportedEncodingException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
            }

            try {
                json = new JSONObject(jstring);
            } catch (JSONException e) {
                e.printStackTrace();
            }
            return json;
        }

        @Override
        protected void onPostExecute(JSONObject result){
            super.onPostExecute(result);

        }
        }

        public class GetNews extends Service {
            @Override
            public void onStart(Intent intent, int startId){
               AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(getBaseContext());
               RemoteViews update = new RemoteViews(getApplicationContext().getPackageName(), R.layout.widget_main);
               Context context = getBaseContext();
               int[] appWidgetIds = intent.getIntArrayExtra("appWidgetIds");
                ComponentName thisWidget = new ComponentName(getBaseContext(), Widget.class);
                int[] appWidgetIds2 = appWidgetManager.getAppWidgetIds(thisWidget);

               for(int appWidgets : appWidgetIds){
               LoadNews news = new LoadNews();
               news.execute();

                    try {
                        JSONObject result = news.get();
                        if(result != null){
                            JSONArray jarray = result.optJSONArray("data");
                            title.clear();
                            images.clear();
                            url.clear();
                            for(int i = 0; i < jarray.length(); i++){
                                JSONObject jrss = jarray.optJSONObject(i);
                                title.add(jrss.optString("title"));
                                images.add(jrss.optString("img"));
                                url.add(jrss.optString("url"));
                                timestamp.add(jrss.optInt("publish_timestamp"));
                            }
                            update.setTextViewText(R.id.text, title.get(0).substring(0, 65)+"...");
                            update.setTextViewText(R.id.text2,title.get(1).substring(0, 65)+"...");
                            update.setTextViewText(R.id.text3, title.get(2).substring(0, 65)+"...");
                            update.setTextViewText(R.id.text4, title.get(3).substring(0, 65)+"...");

                            update.setTextViewText(R.id.text_1, getTime(timestamp.get(0) + "", context));
                            update.setTextViewText(R.id.text_2,  getTime(timestamp.get(1) + "", context));
                            update.setTextViewText(R.id.text_3,  getTime(timestamp.get(2) + "", context));
                            update.setTextViewText(R.id.text_4,  getTime(timestamp.get(3)+"",context));

                            update.setOnClickPendingIntent(R.id.text, PendingIntent.getActivity(context, 0, new Intent(Intent.ACTION_VIEW, Uri.parse(url.get(0))), 0));
                            update.setOnClickPendingIntent(R.id.text2, PendingIntent.getActivity(context, 0, new Intent(Intent.ACTION_VIEW, Uri.parse(url.get(1))), 0));

                            LoadBitmap bitmap = new LoadBitmap();
                            bitmap.loadImage(images.get(0));
                            bitmap.execute();
                            update.setImageViewBitmap(R.id.imageView, bitmap.get());

                            LoadBitmap bitmap2 = new LoadBitmap();
                            bitmap2.loadImage(images.get(1));
                            bitmap2.execute();
                            update.setImageViewBitmap(R.id.imageView2, bitmap2.get());

                            LoadBitmap bitmap3 = new LoadBitmap();
                            bitmap3.loadImage(images.get(2));
                            bitmap3.execute();
                            update.setImageViewBitmap(R.id.imageView3, bitmap3.get());

                            LoadBitmap bitmap4 = new LoadBitmap();
                            bitmap4.loadImage(images.get(3));
                            bitmap4.execute();
                            update.setImageViewBitmap(R.id.imageView4, bitmap4.get());
                        }
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    } catch (ExecutionException e) {
                        e.printStackTrace();
                    }
                   appWidgetManager.updateAppWidget(startId, update);
               }
                stopSelf();
               super.onStart(intent, startId);
            }

            @Override
            public IBinder onBind(Intent intent) {

                return null;
            }
        }
    } 
```

**日志猫**

```
ERROR/AndroidRuntime(2765): FATAL EXCEPTION: main
    java.lang.RuntimeException: Unable to instantiate service com.afishamedia.widget.Widget$GetNews: java.lang.InstantiationException: can't instantiate class com.afishamedia.widget.Widget$GetNews; no empty constructor
    at android.app.ActivityThread.handleCreateService(ActivityThread.java:2637)
    at android.app.ActivityThread.access$1600(ActivityThread.java:150)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1326)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:5191)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
    at dalvik.system.NativeStart.main(Native Method)
    Caused by: java.lang.InstantiationException: can't instantiate class com.afishamedia.widget.Widget$GetNews; no empty constructor
    at java.lang.Class.newInstanceImpl(Native Method)
    at java.lang.Class.newInstance(Class.java:1319)
    at android.app.ActivityThread.handleCreateService(ActivityThread.java:2634)
    ... 10 more 
```

# java - 此删除语句不执行且不给出任何异常

> ID：14079625
> 
> 赞同：-1
> 
> 时间：2012-12-29T07:19:50.267
> 
> 标签：java, postgresql

我无法解释为什么这个删除语句不执行也不给我任何异常。

这里 egn 是我的 postgresql 数据库中的一个字符，我想删除 egn = '750698' 的整行 这是我的代码

```
package
com.tan;
import
java.io.File;
import
java.sql.*;
import
javax.xml.parsers.DocumentBuilder;
import
javax.xml.parsers.DocumentBuilderFactory;
import
org.w3c.dom.*;
public
class test_selectconect
{

    public static void main(String[] args) throws ClassNotFoundException
  {
    // delte
Connection conn=
null;
Class.forName(
"org.postgresql.Driver");
try
{
conn= DriverManager.getConnection(
"jdbc:postgresql://localhost:5432/tanyaprobadatabase", "postgres", "123");
}
catch (SQLException ex1)
{
ex1.printStackTrace();
}
Statement delstmt = null;
String delQuery= "delete from tanya_students";
delQuery += "where egn= '750698'";
try
{
delstmt=conn.createStatement();
delstmt.executeUpdate(delQuery);
}
catch (Exception ex)
{}
System.out.print("delete is ok");
}
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T07:25:05.900

首先，您需要在表名和“位置”之间留一个空格。目前您的完整查询是“从 tanya_studentswhere egn='750698' 中删除”，它必须是 ....tanya_students where ....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T07:23:53.593

```
String delQuery= "delete from tanya_students";
delQuery += "where egn= '750698'"; 
```

导致“从 tanya_students where egn='750698' 中删除”

并且不要捕获SQLException，直接抛出，也就是添加到`throws`

# sql - 在表行之间实现数据数学一致性

> ID：14079626
> 
> 赞同：0
> 
> 时间：2012-12-29T07:19:53.077
> 
> 标签：sql, data-consistency

我有 3 张桌子：`Persons`, `Variables`, `Person_Data`.

`Person_Data`表中包含不同人的各种变量的数值数据。列是：`variable_value`、`person_id`（到 的外键`Persons`）和`variable_id`（到 的外键`Variables`）。

一些变量相互关联（例如：收入、家庭规模和人均收入）。我想创建一个`Variable_Relationship`表来存储此类信息并执行数据完整性检查。表中的一列将是`Dependant_Variable_Id`（关系的 LHS）。

1.  问题是 RHS 变量的数量不是固定的，数学表达式也不是固定的。
2.  有没有办法很好地实现这一点？

现在我正在考虑一个`relationship_definition`文本列以及另一个具有列`Relationship_Id`的`RHS_VariableId`表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T07:47:21.663

在我看来，没有办法在 SQL 中管理它，因为您无法解释以列值表示的动态公式。根据您用于访问数据库数据的语言，您应该开发一个表达式解析器（您可以搜索大量提供此类功能的开源库）并使用它来解析从 RHS 列读取的表达式，评估它们并执行完整性检查。

# ruby-on-rails - form_for(@model) 不需要实例化@model——或者是吗？

> ID：14079629
> 
> 赞同：0
> 
> 时间：2012-12-29T07:20:16.863
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

最初我有一个 form_for(@thing) 对应`create`于我的 ThingsController 中的操作。有效。然后，我决定将表单移动到它通常的位置，`/things/new.html.erb`然后表单停止渲染。它给出了这个错误：

```
undefined method `model_name' for NilClass:Class 
```

所以我加入`@thing = Thing.new`了这个`new`动作，一切都很好。`@thing`但请注意——当表单位于另一个控制器视图的其他位置时，我不必实例化。

这让我想知道为什么 Rails 会做出看似武断的决定，要求在一个地方而不是另一个地方实例化。任何Rails-heads都有答案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T18:10:58.763

使用`form_for(:thing)`. 它将检测实例变量名称@thing，但如果它为零，它仍然可以工作。

# android - Android PagerAdapter :: 将当前项目放入位图中

> ID：14079638
> 
> 赞同：1
> 
> 时间：2012-12-29T07:21:14.027
> 
> 标签：android, universal-image-loader, android-pageradapter

我正在为我的应用程序使用 UniversalImageLoader。我的`ImageAdapte`r 扩展`PagerAdapter`。我需要 currentImage 作为位图。通过回调方法，`public void onLoadingComplete(Bitmap loadedImage)`我得到了位图。但这不是当前显示的位图图像。它是下一个图像或上一个图像（取决于交换）。这是完整的代码：

```
 private class ImagePagerAdapter extends PagerAdapter {
    private String[] images;
    private LayoutInflater inflater;

    ImagePagerAdapter(String[] images) {
        this.images = images;
        inflater = getLayoutInflater();
    }

    @Override
    public void destroyItem(View container, int position, Object object) {
        ((ViewPager) container).removeView((View) object);
    }

    @Override
    public void finishUpdate(View container) {
    }

    @Override
    public int getCount() {
        return images.length;
    }

    @Override
    public Object instantiateItem(View view, int position) {
        if (view != null) {
            final View imageLayout = inflater.inflate(
                    R.layout.item_pager_image, null);
            final ImageView imageView = (ImageView) imageLayout
                    .findViewById(R.id.image_item_pager);

            imageLoader.displayImage(images[position], imageView, options,
                    new ImageLoadingListener() {

                        @Override
                        public void onLoadingStarted() {
                        }

                        @Override
                        public void onLoadingFailed(FailReason failReason) {
                            //On Loading Failed Logic                               
                        }

                        @Override
                        public void onLoadingComplete(Bitmap loadedImage) {
                                                        bitmap = loadedImage;  
                            imgViewSetAsWp.setImageBitmap(bitmap);
                        }

                        @Override
                        public void onLoadingCancelled() {
                            // Do nothing
                        }
                    });

            ((ViewPager) view).addView(imageLayout, 0);

            return imageLayout;
        } else
            return view;
    }

    @Override
    //Other override methood of ImagePager

} 
```

有没有办法获得正确的位图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T09:52:59.827

如何获取当前视图 - [https://stackoverflow.com/a/8638772/913762](https://stackoverflow.com/a/8638772/913762)

进而：

```
View currentView = ...
ImageView currentImageView = (ImageView) currentView.findViewById(...);
BitmapDrawable bd = (BitmapDrawable) currentImageView.getDrawable();
Bitmap bmp = bd.getBitmap(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T07:37:16.000

当您膨胀视图时会出现问题：它是整个列表中使用的同一个实例，因此当您的异步加载完成时，当 viewpager 尝试使用相同的 imageView 绘制不同的项目时，图像会发生变化。这是我修复我的方法。

1）创建一个名为 ViewHolder 的类

```
class ViewHolder {
    public ImageView image;
} 
```

2）一旦你完成充气，创建新的 ViewHolder 对象并绑定它。

```
ViewHolder holder = new ViewHolder();
holder.image = (ImageView) imageLayout.findViewById(R.id.image_item_pager); 
```

之后就可以`holder.image`正常使用了`ImageView`。

希望这有帮助。

# jquery - 如何使用 jQuery 创建文本插入效果？

> ID：14079642
> 
> 赞同：0
> 
> 时间：2012-12-29T07:21:51.393
> 
> 标签：jquery

我希望文字慢慢“插入” `document.ready`。基本上，所有的字母原本是看不见的，然后慢慢地，一个一个，有条不紊地落到屏幕上，形成标题。

我尝试使用 Lettering.js 通过添加绝对位置来为每个字母设置动画，但问题是字母在屏幕中间聚集在一起。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T07:27:33.667

是的，使用 jquery $.animate，例如使用 css 将标题保持在视线之外，然后在页面加载时将其重新显示。

考虑这个段落，

```
p{
position:absolute;
top:-50px;
} 
```

然后你的 jquery 在 document.ready

```
$('p').animate({'top':'10px'}) 
```

这将逐渐将顶部属性从 -50px 增加到 10px，因此文本将慢慢滑入。您可以使用更多组合以获得更好的效果。您可以使用**jquery delay 或 javascript timeout**延迟它 如果您希望它只是出现，请保持其 css 显示:none，然后在 document.ready 中显示为"

```
$('p').show(); 
```

# php - 如果存在函数向sql添加删除条目？

> ID：14079643
> 
> 赞同：-1
> 
> 时间：2012-12-29T07:22:12.123
> 
> 标签：php, mysql

当单击用户个人资料中的链接时，我正在使用此脚本将用户插入到其他用户的收藏夹中。

目前，用户可以将用户添加到收藏夹，但我希望他们能够再次单击该按钮以将其从收藏夹中删除。

因此，如果条目以某种方式存在，我需要实现删除功能，这就是我卡住的地方。有人可以告诉我哪里出错了。

这是我最初将用户添加到收藏夹的代码：

```
<?php

require_once('includes/session.php');
require_once('includes/functions.php');
require('includes/_config/connection.php');

session_start();

    confirm_logged_in();

    if (isset ($_GET['to'])) {
    $user_to_id = $_GET['to'];

}

if (!isset($_GET['to']))
    exit('No user specified.');

$user_id = $_GET['to'];

$result = mysql_query("INSERT INTO ptb_favorites (user_id, favorite_id) VALUES (".$_SESSION['user_id'].", ".$user_to_id.")") 
or die(mysql_error());

header($_SERVER['HTTP_REFERER']);

?> 
```

如果条目已经存在，这就是我尝试添加的内容以使其删除：（这给了我语法错误并且不起作用）

```
<?php

require_once('includes/session.php');
require_once('includes/functions.php');
require('includes/_config/connection.php');

session_start();

    confirm_logged_in();

    if (isset ($_GET['to'])) {
    $user_to_id = $_GET['to'];

}

if (!isset($_GET['to']))
    exit('No user specified.');

$user_id = $_GET['to'];

$result = mysql_query("INSERT INTO ptb_favorites (user_id, favorite_id) VALUES (".$_SESSION['user_id'].", ".$user_to_id.")") 
or die(mysql_error());

if ($insert() === true) {
    $delete = (function () use ($connection, $user_to_id) {
        $sql = "DELETE FROM ptb_favorites WHERE user_id = ? AND favorite_id = ?";
        $statement = $connection->prepare($sql);

        $result = $statement->execute(array(
            $_SESSION['user_id'],
            $user_to_id
        ));

        return $result;
    });

    $delete();
}

header($_SERVER['HTTP_REFERER']);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T08:49:30.270

有一些不同的方法可以做到这一点。我将从最快的（而且不是很好的解决方案）开始。

## 快速解决方案

**向 ptb_favorites 上的(user_id, favorite_id)**添加一个唯一索引（例如主键）（您可能已经拥有该索引），然后当有人单击该链接时，您将尝试插入，如果您遇到重复的键违规，您将删除。它看起来像这样

```
mysql_query("INSERT INTO ptb_favorites (user_id, favorite_id) VALUES (".$_SESSION['user_id'].", ".$user_to_id.")") 
or die(mysql_query("DELETE FROM ptb_favorites WHERE user_id = ".$_SESSION['user_id']." AND favorite_id = ".$user_to_id.")); 
```

## 更好的解决方案

更好和更用户友好的解决方案是根据用户是否已经是收藏夹来不同地呈现页面，并创建两个不同的链接，一个用于添加，一个用于删除。即使您决定不更改页面，您也可以拥有两个不同的链接。一些伪代码看起来像这样

```
if ("select 1 from ptb_favorites where user_id = <my_id> and favorite_id = <page_user_id>") then
  [render delete link and a star in front of user name]
else
  [render add link and just the user name]
end 
```

# php - 连接表中的 INSERT 语句

> ID：14079646
> 
> 赞同：2
> 
> 时间：2012-12-29T07:22:41.770
> 
> 标签：php, html, insert, phpmyadmin

我有 3 张桌子：

`tblNames`：

```
|  id  |   firstname   |   lastname   |
+------+---------------+--------------+
|  1   |   John        |   Smith      | 
```

`tblJosbs`（此表同时接受多个复选框值）：

```
|  id  |   jobs                |
+------+-----------------------+
|  1   |   Nurse               |
+------+-----------------------+
|  2   |   Call Center Agent   |
+------+-----------------------+
|  3   |   Police              | 
```

`tblNamesJobs`（此表用于`JOIN`其他 2 个表）：

```
|  id  |   name_id   |   jobs_id   |
+------+-------------+-------------+
|  1   |   1         |   1         |
+------+-------------+-------------+
|  2   |   1         |   2         |
+------+-------------+-------------+
|  3   |   1         |   3         | 
```

一切都很好，但是有人可以告诉我在`INSERT`添加新信息时应该使用的第三张表的语句吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T07:29:14.870

例如添加**John Smith**是**呼叫中心代理的记录**

```
insert into tblNamesJobs (name_id,jobs_id )
values (
         select id from tblNames where 
                firstname='John' 
                and lastname='Smith' limit 1
         ,
         select id from tblJosbs where jobs='Call Center Agent' limit 1
        ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T07:24:51.903

```
INSERT INTO tblNamesJobs (name_id, jobs_id) VALUES (XXXX,YYYY) 
```

这是假设表的 id 是自动递增的。

需要注意的是，“joiner”表中的name_id 和jobs_id 列都应该是另一个表中相应列的外键。

编辑 - Valex 的回答更详细地说明了如果您还没有 id 值该怎么做。

如果可能的话，我建议使用某种可以为您处理“joiner”表的框架。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T07:30:41.880

如果您已经依赖于 tauto increment..您可以获得 lastinserid，具体取决于您的适配器。例如。**mysql_insert_id**

对于 PDO，我们可以使用 -- **PDO::lastInsertId。**

因此您将拥有先前插入的表格的 ID，您可以将其保存在新表格中。

# c# - 有没有办法制作一个自 JIT 编译的程序？

> ID：14079650
> 
> 赞同：0
> 
> 时间：2012-12-29T07:23:31.637
> 
> 标签：c#, java, c++, python

不需要像 Java 这样的东西，有没有一种方法可以让我的程序有一小段机器代码来编译自己？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T08:19:23.907

理论上是可以的。但在实践中，这将是很多工作，结果不会是一个小程序。事实上，它在大小和功能/复杂性上与标准 JVM 大致相当。这导致了一个明显的观点，即不太可能值得付出努力。

我建议您只使用标准 JVM，并利用实现者为构建高质量 JIT 编译器所付出的（可能）数百人年的努力......

# json - 使用 cURL 查询 REST API

> ID：14079653
> 
> 赞同：2
> 
> 时间：2012-12-29T07:24:08.680
> 
> 标签：json, rest, curl, twitter

首先，我是一个新手，无论是`REST`和`cURL`。这就是我想要做的：

我想使用命令行（一些 bash 脚本）查询 Twitter Rest API，因此，我想用`cURL`它来做。

我一直在尝试搜索一些教程（没有运气），解释如何使用`REST`以及`cURL`如何形成标题、获取/发布以及如何接收`REST`响应和响应状态，以便我可以编写基于逻辑的关于响应状态。

如果您能给我一些关于如何使用 curl 调用 twitter REST API 以及如何访问`REST`响应状态的示例，我将不胜感激。

我尝试使用以下方法调用 twitter：

```
curl "http://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&screen_name=$user_name&count=150" 
```

并得到了一个我可以在我的程序中使用的 json。但我不确定如何访问其余响应状态代码（以使我的实现更可靠）。此外，我不确定在调用 cURL 时应该向 cURL 提供哪些其他标志。

PS：补充一下，如果您认为除了使用 cURL 之外，还有其他更好的替代方法可以从 REST API 检索数据，那么也请告诉我。虽然我的应用程序不是基于 Web 的，而且更面向数据处理，这就是我选择命令行和 bash 的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T07:34:27.537

curl -i 将打印出标题信息：

```
HTTP/1.1 200 OK
Date: Sat, 29 Dec 2012 07:34:00 GMT 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T07:40:36.690

我知道它不能直接回答您的问题，但出于多种原因，我建议使用 Python 而不是 bash。如果你决定这样做，我强烈推荐奇妙的请求库：[http ://docs.python-requests.org](http://docs.python-requests.org)

# python - 无法在 Sphinx 中获取 TOCTREE 以显示链接

> ID：14079655
> 
> 赞同：22
> 
> 时间：2012-12-29T07:24:31.113
> 
> 标签：python, python-sphinx, toctree

我是狮身人面像的新手。我尝试了教程，但未能在内容中生成链接。我得到的错误

```
C:\Users\mhaikalm\sphinxtest\source\index.rst:11: WARNING: toctree contains refe
rence to document 'intro' that doesn't have a title: no link will be generated
C:\Users\mhaikalm\sphinxtest\source\index.rst:11: WARNING: toctree contains refe
rence to document 'zuhdi' that doesn't have a title: no link will be generated
writing additional files... (0 module code pages) genindex search
copying static files... done
dumping search index... done
dumping object inventory... done
build succeeded, 3 warnings.

Build finished. The HTML pages are in build/html. 
```

我已经创建`zuhdi.rst`并`intro.rst`在同一目录中`index.rst`。我怎样才能给文件加上标题？

供您参考，我的 index.rst 包含以下几行：

```
Contents:

.. toctree::
   :maxdepth: 2

   intro
   zuhdi 
```

我必须存在这些文件才能将链接放入目录树中吗？`intro.rst`and`zuhdi.rst`只是一个空文件。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-29T07:29:19.007

您收到此错误是因为您在`intro.rst`.
为了解决这个问题，添加一个标题到`intro.rst`. 假设您希望您的标题为`My Title`，则可以通过将以下两行作为 的第一行来添加标题`intro.rst`：

```
My Title
********* 
```

请注意，您必须有足够的`*`字符来完整地为您的标题下划线，否则您将收到另一个关于格式错误的标题或下划线的错误。

# android - Google Maps Android API v2 中的地图标签语言是如何设置的

> ID：14079656
> 
> 赞同：8
> 
> 时间：2012-12-29T07:24:41.493
> 
> 标签：android, localization, maps

在 Google Maps Android API v1 中，我曾经使用`Locale.setDefault`. 这本地化了地图的语言。这是如何使用新应用程序完成的？

是否支持？

# c# - DateTime.Parse 抛出格式异常

> ID：14079663
> 
> 赞同：5
> 
> 时间：2012-12-29T07:25:27.283
> 
> 标签：c#, datetime-format, formatexception

我通过解析 XElement 从 xml 中检索日期和时间字符串。日期和时间值分别由 `file.Element("Date").Value`和检索`file.Element("Time").Value`。

检索日期值后，我将其解析为 DateTime 变量

```
DateTime dt,ts;
dt = file.Element("Date").Value; // the value is say 12/29/2012 
```

然后将此 dt 值设置为 xaml UI 上的 datepicker 值

```
datepicker.Value = dt; 
```

我还有一个时间选择器，其值必须由从 xml 检索的时间值设置。要设置时间选择器值，我执行以下操作。声明 3 个字符串，例如：

```
string a = file.Element("Time").Value; // the value is say 9:55 AM
string b = file.Element("Time").Value.Substring(0, 5) + ":00"; // eg 9:55:00
string c = file.Element("Time").Value.Substring(5); // the value is ' AM' 
```

然后我连接日期值和字符串'b'和'c'

```
string total = file.Element("Date").Value + " " + b + c; 
```

现在的值`total`是 '12/29/2012 9:55:00 AM'

然后我尝试将此`total`字符串解析为日期时间，但它会引发格式异常

```
DateTime.Parse(total, CultureInfo.InvariantCulture); 
```

任何帮助表示赞赏...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-29T07:36:11.643

尝试[DateTime.ParseExact](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)

```
var dateStr = "12/29/2012 09:55:00 AM";
DateTime date = DateTime.ParseExact(dateStr,"MM/dd/yyyy hh:mm:ss tt", System.Globalization.CultureInfo.InvariantCulture); 
```

演示[在这里](http://ideone.com/kkpC5O)。

阅读[C# DateTime Format](http://www.dotnetperls.com/datetime-format)了解格式字符串的详细信息。

**请注意**，我在小时部分添加了额外的 0。必须为 2 位，否则会出现格式异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T07:33:44.170

尝试使用： DateTime.ParseExact

```
string total = '12/29/2012 9:55:00 AM'; 
string format = "MM/dd/yyyy H:mm:ss tt";
DateTime dateTime = DateTime.ParseExact(dateString, format,
        CultureInfo.InvariantCulture); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T07:28:09.493

我已经得到了解决方案。当试图以 XML 格式保存 datepicker 时，我将 timepicker 的值保存为 XMLElement 作为 ValueString，因此当转换为字符串时总是抛出错误。所以我将它以 XML 格式保存为 Value.ToString()。现在它可以正确地从字符串转换为日期或时间等价物。

# objective-c - 为什么在 iOS 模拟器中停止应用程序不会触发 applicationWillTerminate:？

> ID：14079670
> 
> 赞同：15
> 
> 时间：2012-12-29T07:26:48.267
> 
> 标签：objective-c, xcode, ios-simulator

我`AppDelegate`的`applicationWillTerminate:`方法中有一些代码，但我不知道如何测试它是否有效。使用 Xcode 停止模拟器不会触发它。

如何测试 applicationWillTerminate: 中的代码？

请注意，这是特定于模拟器而非设备的。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-29T07:43:43.403

模拟器没有发送`applicationWillTerminate:`，因为跳板没有向您发送终止代码（SIGABRT），LLDB 是。要触发这些委托方法，您必须使用主页按钮命令 (⌘+⇧+H)，然后拉起多任务抽屉并从那里终止您的应用程序。您的调试会话将立即终止，并且委托方法将成功触发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-12T03:29:46.277

在 iOS 9.1（可能之前）中，这似乎只有在您双击主页并将应用程序向上拖动以退出时才有效。从桌面执行此操作不会触发此事件，它必须在应用程序在模拟器中打开时发生。

[![在此处输入图像描述](../Images/6d048c4d7711be460a484658f4cb47c8.png)](https://i.stack.imgur.com/gefeO.jpg)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-03T16:49:53.307

它与我一起工作的唯一方法是在我执行以下步骤之后：

1.  编辑目标架构
2.  选择`Run`水龙头
3.  选择`Wait for the execution to be launched`作为启动选项
4.  从 Xcode 运行应用程序
5.  在模拟器/设备上打开应用
6.  双击主页按钮
7.  从后台删除应用程序

[![等待执行启动](../Images/062e29f3c14b650d8cd89279eceea9f0.png)](https://i.stack.imgur.com/ZbPe0.png)

# android - Android GridView 中的列大小

> ID：14079671
> 
> 赞同：1
> 
> 时间：2012-12-29T07:26:54.447
> 
> 标签：android

如何在 Android GridView 中做不同大小的列。我需要一个长的名字和九个短的数字。网格视图 XML：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <GridView
        android:id="@+id/gridView1"
        android:layout_width="match_parent"
        android:layout_height="700dp"
        android:numColumns="10" >
    </GridView>
</RelativeLayout> 
```

项目 XML：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"

 android:layout_width="match_parent"
 android:layout_height="match_parent"

 android:orientation="vertical">

<EditText
    android:id="@+id/editText1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
   />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T07:36:55.713

做一件事，采用一个具有父线性布局的xml，在线性布局中采用子线性布局，在每个线性布局中我们可以设计您需要的东西，希望这对您有所帮助。

# objective-c - 目标 c == 字符串和 isEqualToString 方法找不到匹配项

> ID：14079672
> 
> 赞同：-7
> 
> 时间：2012-12-29T07:27:10.000
> 
> 标签：objective-c

我试图找出 1 个字母的字符串是否出现在不同字符串的前 2 个字母中。我试图将字符串与 == 以及 isEqualToString NSString 方法进行比较。有谁知道为什么我的代码无法找到匹配项。它总是只返回 0。我希望这些方法返回 2，因为字母 b 位于单词中的第二个字母位置（第一个参数）并且应该匹配字母（第二个参数）

主要方法：

```
 Finder *f = [[Finder alloc]init];

    int position = [f findLetterLocation : @"abc" : @"b"];
    NSLog(@"using == %d", position);

    int position2 = [f findLetterLocation2 : @"abc" : @"b"];
    NSLog(@"using isEqualToString %d", position); 
```

查找器.m

```
-(int)findLetterLocation: (NSString*)word : (NSString*)letter{
NSRange MyOneRange = {1, 1};
NSRange MyTwoRange = {2, 1};

NSString *firstCharacter = [[NSString alloc] init];
NSString *secondCharacter = [[NSString alloc] init];

firstCharacter = [word substringWithRange:MyOneRange];
secondCharacter = [word substringWithRange:MyTwoRange];

if(firstCharacter == letter){
    return 1;
}
if(firstCharacter == letter){
    return 2;
}
return 0;
} 
```

findLetterLocation2 与上面的方法完全相同，只是将 if 语句替换为以下语句：

```
if([firstCharacter isEqualToString: letter]){
    return 1;
}
if([firstCharacter isEqualToString:  letter]){
    return 2;
} 
```

输出是

```
2012-12-29 18:14:51.253 test[83101:303] using == 0
2012-12-29 18:14:51.255 test[83101:303] using isEqualToString 0 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T07:39:47.503

您正在定义一个方法`-[Finder findLetterLocation::]`。如果它是第一个或第二个字母，则您希望此方法返回第二个参数（“字母”）的第一个参数（“单词”）中的 1 索引位置，否则返回`0`。这个实现可以解决问题：

```
-(int)findLetterLocation: (NSString*)word : (NSString*)letter
{
    int res = 0;
    if (word && 
        letter &&
        [letter length] == 1) {
        NSRange range = [word rangeOfString:letter];
        if (range.location < 2) {
            res = range.location + 1;
        }
    }
    return res;
} 
```

* * *

此方法名称非常规。更好的方法名称是

```
- (int)locationInString:(NSString *)string ofLetter:(NSString *)letter 
```

一个更好的方法名称是

```
- (int)pfx_oneIndexedLocationInFirstTwoCharactersOfString:(NSString *)string ofCharacter:(NSString *)letter 
```

where`pfx`替换为您项目的前缀。

* * *

此方法的返回类型不应为`int`. 相反，它应该是`NSUInteger`or `NSInteger`，可能`NSUInteger`因为结果总是`0`, `1`or `2`。

```
- (NSUInteger)pfx_oneIndexedLocationInFirstTwoCharactersOfString:(NSString *)string ofCharacter:(NSString *)letter 
```

* * *

这个方法可能应该在一个类别中`NSString`而不是在一个独立的类中`Finder`：

```
@interface NSString (Locating)

- (NSUInteger)pfx_oneIndexedLocationInFirstTwoCharactersOfCharacter:(NSString *)character

@end

@implementation NSString (Locating)

- (NSUInteger)pfx_oneIndexedLocationInFirstTwoCharactersOfCharacter:(NSString *)character
{
    int res = 0;
    if (character &&
        [character length] == 1) {
        NSRange range = [word rangeOfString:letter];
        if (range.location < 2) {
            res = range.location + 1;
        }
    }
    return res;
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T07:35:45.880

NSRange 使用位置作为索引 0。你得到的字符是字符 2 和字符 3。

还。我相信如果您使用相同的对象， NSString 只会与 == 匹配。

要匹配字符串，请使用 -[NSString isEqualToString:]

希望有帮助

你可以用

```
NSLog(@"First Character = %@", firstCharacter); 
```

# php - cookie 会话和安全性

> ID：14079676
> 
> 赞同：1
> 
> 时间：2012-12-29T07:27:55.030
> 
> 标签：php, session, cookies, encryption

我有一个网络应用程序，在用户登录后，他/她为用户名设置了 cookie，由`setcookie()`.

请建议更好的安全方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T07:46:10.057

使用 PHP 会话而不是 cookie。会话变量是服务器端的。PHP 将自动处理会话管理。如果您想要更多控制权，也可以重载其功能。

[http://php.net/manual/en/intro.session.php](http://php.net/manual/en/intro.session.php)

```
session_start();

$_SESSION['user'] = 'michael' 
```

使用 PHP 会话，只有会话标识符存储在浏览器 cookie 中。您可以在超全局变量中存储任何信息，`$_SESSION`浏览器将无法看到或篡改这些变量。

为了更加安全，您应该存储用于登录的远程地址，并在每次页面加载时进行比较。这是为了确保没有人劫持会话 ID 并假装从另一个位置登录。

```
session_start();

if (_logging_in__) {
   $_SESSION['user'] = 'michael'
   $_SESSION['ip'] = $_SERVER['REMOTE_ADDR'];
} 
```

查看用户是否登录。

```
session_start();

if (isset($_SESSION['user'])) {
   // the user is logged in
   if ($_SERVER['REMOTE_ADDR'] != $_SESSION['ip']) {
      // the session id was hijacked so log out
      session_destroy();
      exit;
   }
} 
```

# bash - OpenShift 的 Bash 脚本 - 不可读（ || , [ -f pidfile] ）

> ID：14079677
> 
> 赞同：1
> 
> 时间：2012-12-29T07:27:56.083
> 
> 标签：bash, shell, openshift

我已经在 Ruby 中完成了所有学习，现在正在深入研究 OpenShift 的 Bash 脚本。每个命令在做什么远不那么明显......

有人可以向我解释以下内容的作用：

```
[ -f ${OPENSHIFT_DATA_DIR}redis.pid ] || ${OPENSHIFT_DATA_DIR}redis/bin/redis-server ${OPENSHIFT_DATA_DIR}redis/bin/redis.conf 
```

第二部分显然是运行带有配置的`redis-server`二进制文件。`redis.conf`但是我不确定`||`完成了什么，或者`[ -f $SOME_PID_FILE ]`

帮助表示赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-29T07:31:37.660

看起来它`redis-server`创建了一个`redis.pid`在启动时调用的文件，并在退出时删除了这个文件。第一个条件通过使用 test 选项测试此文件的存在来检查服务器是否正在运行`-f`，这意味着文件是否存在。万一`[ -f $SOME_PID_FILE ]`出错，意味着服务器没有运行，`||`（或）运算符将执行右手边，即，它将启动服务器。

所以这句话的意思是：

```
if the server is not running
    run the server 
```

# math - 如果一件事多好但另一件事少也好

> ID：14079679
> 
> 赞同：0
> 
> 时间：2012-12-29T07:28:04.417
> 
> 标签：math, algebra

这里有一个看似简单的思考。如果一件物品价值越高（即`a=5`价值超过`a=2`），而另一物品价值越低（即`b=2`价值超过`b=5`），计算该物品“好”程度的方程式是什么对是？

几种方法：

*   完美的组合将是 0。
*   结果越高越好。
*   结果越低越好。

这是一个物理示例，自行车：

*   自行车的重量越轻，它的执行速度就越快。此外，齿轮比越高，它的执行速度就越快。所以：
    *   一辆自行车，**自行车 a**，重量为 29，最高档位（即左*右，与我们的目的基本相同的齿轮比）为 24。
    *   另一个，**自行车 b**的重量为 26，最高档位为 25。

哪辆自行车，假设重量和传动比在确定自行车速度方面的重要性完全相同，会提供更快的速度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T07:48:37.123

如给定的那样，这个问题没有明确的答案。

但是，如果您可以定义一个指标与另一个指标相比的重要性，那么它就有了解决方案。例如，重量的度量可以是 -50（负数，因为越低越好），而齿轮的度量是 30。在这种情况下，总价可以定义为

```
v1*m1 + v2*m2 + ... 
```

而且总价越高越好。

# vb.net - 如何检测我何时在 VB 中释放鼠标按钮？

> ID：14079682
> 
> 赞同：1
> 
> 时间：2012-12-29T07:28:24.150
> 
> 标签：vb.net, visual-studio-2010

如何检测我在 VB 程序中释放鼠标左键的时间？

所以目前使用：

```
Private Sub Form1_MouseClick(ByVal sender As Object, ByVal e As
System.Windows.Forms.MouseEventArgs) Handles Me.MouseClick
   PictureBox1.Visible = True
End Sub 
```

意味着每当我点击我的按钮时，图片框就会出现。那么当我释放鼠标按钮时，如何让图片框消失？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T07:55:14.043

click 事件只会在用户释放鼠标按钮后发生。按下并释放鼠标左键时会发生单击。

您想使用[MouseDown](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.mousedown.aspx)和[MouseUp](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.mouseup.aspx)事件。

# c# - 如何让我的 aspx web 方法将列表作为 JSON 对象返回？

> ID：14079683
> 
> 赞同：0
> 
> 时间：2012-12-29T07:28:36.973
> 
> 标签：c#, asp.net, json, web-services

我有一个返回对象的 web 方法。我需要将此对象转换为 JSON 对象，以便我可以通过我的 android 应用程序使用它。因此，我的问题是我需要进行哪些更改才能**将以下内容作为 JSON 对象返回？**

aspx代码如下：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Services;
using System.Web.Script.Services;

namespace WebService4
{
    /// <summary>
    /// Summary description for Service1
    /// </summary>
    [WebService(Namespace = "http://tempuri.org/")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    [System.ComponentModel.ToolboxItem(false)]
    // To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
    // [System.Web.Script.Services.ScriptService]
    public class Service1 : System.Web.Services.WebService
    {

        [WebMethod]
        [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
        public List<Vehicle> GetCustomerList()
        {
            Vehicle vehi = simpleCase();
            List<Vehicle> newL = new List<Vehicle> { vehi };
            return newL;

        }

        [WebMethod]
        public Vehicle simpleCase()
        {
            Vehicle obj = new Vehicle();
            obj.VehicleID = "KL-9876";
            obj.VehicleType = "Nissan";
            obj.VehicleOwner = "Sanjiva";
            return obj;
        }
    }

    //someObject.SomeMethod(obj);

    public class Vehicle
    {
        public string VehicleID { get; set; }
        public string VehicleType { get; set; }
        public string VehicleOwner { get; set; }
    }

} 
```

谢谢，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T07:32:44.847

您可以使用[http://james.newtonking.com/projects/json-net.aspx](http://james.newtonking.com/projects/json-net.aspx)，序列化列表，然后返回一个字符串。

您还可以使用 C# 类 JavaScriptSerializer

编辑：这应该回答您的问题[如何使用 Json.Net 从我的 WCF 休息服务（.NET 4）返回 json，而不是用引号括起来的字符串？](https://stackoverflow.com/questions/3026934/how-can-i-return-json-from-my-wcf-rest-service-net-4-using-json-net-without)

# javascript - 在 IE 中工作，而不是在 firefox 或 chrome 中工作

> ID：14079685
> 
> 赞同：0
> 
> 时间：2012-12-29T07:28:48.133
> 
> 标签：javascript, html, internet-explorer, google-chrome, firefox

以下代码在 IE 中运行良好，但在 Chrome 或 Firefox 中运行良好。

如果有人可以提出更改建议，将不胜感激。

代码在以下链接中

[http://www.4shared.com/office/HJNhTiwB/123.html](http://www.4shared.com/office/HJNhTiwB/123.html)

```
<html xmlns="http://www.w3.org/1999/xhtml&quot;&gt; 
<head runat="server"> 
<title>MRBN Textbox Sample</title> 
<style type="text/css"> 
.MRBN 
{ 
    width:145px; 
    font-family:Verdana; 
    font-size:12pt; 
    font-weight:bold; 
    text-transform: uppercase;
    color: #EDEBEC; 
} 
</style> 
</head> 
    <script type="text/javascript"> 
        function ValidateText(evnt) { 
            TxtLen = document.getElementById("TxtMRBN").value.length; 
            document.getElementById("TxtMRBN").style.color = "#33CC33"; 
            if (TxtLen < 5) { 
                if ((((evnt.keyCode > 64) && (evnt.keyCode < 91)) || ((evnt.keyCode > 96) && (evnt.keyCode < 123))) != true) { 
                    alert("1st letter/1st name +1st 4/last name..."); 
                    return false; 
                } 
            } 
            else if (TxtLen == 5) { 
                if (evnt.keyCode != 45) { 
                    alert("This needs dash or hyphen here..."); 
                    return false; 
                } 
            } 
            else if ((TxtLen > 5) && (TxtLen < 11)) { 
                    if (((evnt.keyCode > 47) && (evnt.keyCode < 58)) != true) { 
                        alert("Put last 5 of your phone number..."); 
                        return false; 
                    } 
            } 
            else { 
                alert("5-5\. Now give it to Riders & WIN...!"); 
                return false; 
            } 
        }

    function ClearText() { 
        if (document.getElementById("TxtMRBN").value == "ALPHA-NUMBR") { 
            document.getElementById("TxtMRBN").value = ""; 
        } 
        return false; 
    } 
</script> 
<body> 
    <form id="form1" runat="server"> 
        <div> 
            <input type="text" id="TxtMRBN" class="MRBN" value="ALPHA-NUMBR" onkeypress="return ValidateText(event);" onmousedown="return ClearText();" /> 
        </div> 
    </form> 
</body> 
</html> 
```

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T09:33:41.567

使用此代码在 IE、mozilla、chrome 中工作

```
 <html>
    <head> 
    <title>MRBN Textbox Sample</title> 
    <style type="text/css"> 
    .MRBN 
    { 
        width:145px; 
        font-family:Verdana; 
        font-size:12pt; 
        font-weight:bold; 
        text-transform: uppercase;
        color: #EDEBEC; 
    } 
    </style> 
    </head> 
        <script type="text/javascript"> 

            function ValidateText(evnt) { 
         var browserName=navigator.appName; 

       if (browserName=="Microsoft Internet Explorer")
       {
                TxtLen = document.getElementById("TxtMRBN").value.length; 
                document.getElementById("TxtMRBN").style.color = "#33CC33"; 
                if (TxtLen < 5) { 
                    if ((((evnt.keyCode > 64) && (evnt.keyCode < 91)) || ((evnt.keyCode > 96) && (evnt.keyCode < 123))) != true) { 
                        alert("1st letter/1st name +1st 4/last name..."); 
                        return false; 
                    } 
                } 
                else if (TxtLen == 5) { 
                    if (evnt.keyCode != 45) { 
                        alert("This needs dash or hyphen here..."); 
                        return false; 
                    } 
                } 
                else if ((TxtLen > 5) && (TxtLen < 11)) { 
                        if (((evnt.keyCode > 47) && (evnt.keyCode < 58)) != true) { 
                            alert("Put last 5 of your phone number..."); 
                            return false; 
                        } 
                } 
                else { 
                    alert("5-5\. Now give it to Riders & WIN...!"); 
                    return false; 
                } 
           }
           else  //for firefox and chrome
           {
                 TxtLen = document.getElementById("TxtMRBN").value.length; 
                document.getElementById("TxtMRBN").style.color = "#33CC33"; 
                if (TxtLen < 5) { 
                    if ((((evnt.which > 64) && (evnt.which < 91)) || ((evnt.which > 96) && (evnt.which < 123))) != true) { 
                        alert("1st letter/1st name +1st 4/last name..."); 
                        return false; 
                    } 
                } 
                else if (TxtLen == 5) { 
                    if (evnt.which != 45) { 
                        alert("This needs dash or hyphen here..."); 
                        return false; 
                    } 
                } 
                else if ((TxtLen > 5) && (TxtLen < 11)) { 
                        if (((evnt.which > 47) && (evnt.which < 58)) != true) { 
                            alert("Put last 5 of your phone number..."); 
                            return false; 
                        } 
                } 
                else { 
                    alert("5-5\. Now give it to Riders & WIN...!"); 
                    return false; 
                } 
           }
         }

        function ClearText() { 
            if (document.getElementById("TxtMRBN").value == "ALPHA-NUMBR") { 
                document.getElementById("TxtMRBN").value = ""; 
            } 

        } 
    </script> 
    <body> 

    <form id="form1" > 
            <div> 
                <input type="text" id="TxtMRBN" class="MRBN" value="ALPHA-NUMBR" onkeypress="return ValidateText(event);" onmousedown="ClearText();" /> 
            </div> 
      </form>
    </body> 
    </html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T10:13:19.933

将 keycode 更改为 which 并将 onmousedown 更改为 onclick

```
<html xmlns="http://www.w3.org/1999/xhtml&quot;&gt; 
<head runat="server">
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8" />
<title>MRBN Textbox Sample</title> 
<style type="text/css"> 
.MRBN 
{ 
    width:145px; 
    font-family:Verdana; 
    font-size:12pt; 
    font-weight:bold; 
    text-transform: uppercase;
    color: #EDEBEC; 
} 
</style> 
</head> 
    <script type="text/javascript"> 
        function ValidateText(evnt) {
            TxtLen = document.getElementById("TxtMRBN").value.length; 
            document.getElementById("TxtMRBN").style.color = "#33CC33"; 
            if (TxtLen < 5) { 
                if ((((evnt.which > 64) && (evnt.which < 91)) || ((evnt.which > 96) && (evnt.which < 123))) != true) { 
                    alert("1st letter/1st name +1st 4/last name..."); 
                    return false; 
                } 
            } 
            else if (TxtLen == 5) { 
                if (evnt.which != 45) { 
                    alert("This needs dash or hyphen here..."); 
                    return false; 
                } 
            } 
            else if ((TxtLen > 5) && (TxtLen < 11)) { 
                    if (((evnt.which > 47) && (evnt.which < 58)) != true) { 
                        alert("Put last 5 of your phone number..."); 
                        return false; 
                    } 
            } 
            else { 
                alert("5-5\. Now give it to Riders & WIN...!"); 
                return false; 
            } 
        }

    function ClearText() { 
        if (document.getElementById("TxtMRBN").value == "ALPHA-NUMBR") { 
            document.getElementById("TxtMRBN").value = ""; 
        } 
        return false; 
    } 
</script> 
<body> 
    <form id="form1" runat="server"> 
        <div> 
            <input type="text" id="TxtMRBN" class="MRBN" value="ALPHA-NUMBR" onkeypress="return ValidateText(event);" onclick="return ClearText();" /> 
        </div> 
    </form> 
</body> 
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T09:40:27.077

您需要`true`在 ClearText 函数中返回：

```
function ClearText() { 
    if (document.getElementById("TxtMRBN").value == "ALPHA-NUMBR") { 
        document.getElementById("TxtMRBN").value = ""; 
    } 
    return true; 
} 
```

实际上 return false 允许元素的默认操作。因此，在您的情况下，该领域无法获得焦点。

我不确定为什么它在 IE 中有效。我想这是这个浏览器的一个错误。

# android - 在 Android 中处理对象

> ID：14079689
> 
> 赞同：0
> 
> 时间：2012-12-29T07:29:14.943
> 
> 标签：android, android-intent, android-file, android-input-method, android-memory

我想在内存中保留一些对象，以便在我的应用程序的所有活动中进行操作，并且我还想在应用程序关闭时存储这些对象。哪种方法最有效？我能想到的一些可能性是：

1）在所有活动中保留对象的本地副本，将它们序列化并通过意图传递它们。

2）在所有活动中保留对象的本地副本，将它们序列化并分别在活动恢复和暂停时进行文件读取和写入。

3）使它们成为静态变量，但我不知道在这种情况下何时进行文件读/写操作？这种方法可能会泄漏内存。

4）使用应用程序对象并将我的对象定义为该对象中的变量。由于它具有明确的生命周期，如活动，我可以相应地进行读/写。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T07:33:24.050

我推荐您的方法 2。原因是没有“应用程序关闭”之类的东西。Android 会尝试将其保存在内存中，直到内存用于其他目的。然后您的应用程序的进程被简单地杀死，您不会调用任何回调。

`Application`如果您在必要时小心加载和存储它们，则可以使用单例或对象来缓存对象。然而，这也意味着，用于它们的内存只有在应用进程终止时才会被回收。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T08:15:34.337

这取决于您的数据。在某些情况下，所有方法都很好。

我认为你有两个选择：

*   将数据保存在 sqlite 中。它比文件更容易，速度更快。当活动开始时，从 db 请求所需的数据并显示它。（如果你真的想使用文件）
*   创建一个单例类来存储数据。数据将加载到内存中，您可以非常快速地访问它。当数据更改时，将其保存到 sqlite 或文件中。谷歌“在活动之间共享数据”

# mongodb - Mongoose findByIdAndUpdate() 或 update() 和 increment()。如何增加__v？

> ID：14079693
> 
> 赞同：5
> 
> 时间：2012-12-29T07:30:02.373
> 
> 标签：mongodb, mongoose

有没有办法组合`Model.findByIdAndUpdate`和`Model.increment()`增加猫鼬原生版本密钥？或者`Model.update()`任何增量`__v`？

此代码不会增加`__v`

```
Station.update({ _id: req.params.id }, 
               { $set: req.body, $inc: { __v: 1 } }, 
               { multi: false },  callback); 
```

但增加任何自定义`Number`字段：

```
Station.update({ _id: req.params.id }, 
               { $set: req.body, $inc: { count: 1 } }, 
               { multi: false },  callback); 
```

到目前为止，我发现只有一种方法来增加`__v`：

```
Station.findById(req.params.id, function (err, station) {
    station.increment();  // this increments __v
    station.save(req.body, callback)
}) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T20:34:00.673

[这可能是设计使然。](http://aaronheckmann.posterous.com/mongoose-v3-part-1-versioning) 特别`__v`是一个特殊的 mongoose 内部键，其具体用途是防止多个保存操作在文档的 Array 元素发生位置更改时发生冲突。原子更新操作本身不会面临这种风险，因此它们不需要单独增加`__v`.

但是，可以将原子更新与非原子查找/保存结构交错，因此我提交了一个[问题](https://github.com/LearnBoost/mongoose/issues/1265)供开发人员查看。

# openssl - 生成私钥时出现 OpenSSL 错误

> ID：14079696
> 
> 赞同：0
> 
> 时间：2012-12-29T07:30:13.380
> 
> 标签：openssl, key, rsa

我正在使用一个命令`genrsa -des3 -out key.key 4096`，有人在我的上一个问题中推荐了我。但我收到错误。我不知道为什么

```
2284:error:0906906F:PEM routines:PEM_ASN1_write_bio:read key:.\crypto\pem\pem_li
b.c:334:
error in genrsa 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T07:33:28.287

这可能是多种原因。

检查这些：

```
Make sure that catalog is writable
Make sure that you provided two times same key(no typos) 
```

# rpm - 私有存储库 - 更新以便可以立即提取新的 rpm

> ID：14079698
> 
> 赞同：4
> 
> 时间：2012-12-29T07:30:32.583
> 
> 标签：rpm, rpmbuild

我设置了一个私有存储库（现在是本地安装）并构建了自定义 rpm。这个想法是构建 rpm，将其添加到 repo，然后触发`yum update mypackage`到多个服务器。

我遇到的问题是新版本的 rpm 没有显示出来……而旧版本的 rpm 仍然显示，即使我从 repo 中删除它之后也是如此。

我已经尝试过`yum update`，`yum clean all`但它没有在我的本地存储库中获取最新数据。

当我卸载软件包并重新安装它时，它会尝试安装不再存在的旧 rpm 并且失败。

更新回购数据的过程是什么，以便我可以立即运行更新？

** 更新 **

当我写这篇文章时，我想`createrepo .`在更新 rpm 后尝试一下。这使我能够安装最新版本。

这是更新文件后我应该运行的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-04T02:28:11.500

重建存储库元数据的最快方法是对 createrepo 使用 --update 标志：

```
createrepo --update -v /path/to/repo 
```

这只会处理自上次运行 createrepo 以来添加到您的 repo 的 RPM。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T22:32:32.393

Fge's comment is correct. Every time you add a new rpm to a repository you must run createrepo. Otherwise the repo metadata doesn't get updated so it still sees the previous RPM as the latest version.

Edit: The docs that I linked to that explained the same steps as the answer below by Steve Goodman were removed for some reason, check out that answer instead ([https://stackoverflow.com/a/18604484/1263015](https://stackoverflow.com/a/18604484/1263015))

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-29T18:09:14.237

我还发现我需要修改我的 yum.repo.d/internal.repo 文件以包含一个 metadata_expire 行，该行使元数据比平时更早过期。

```
[internal]
metadata_expire=1h 
```

# php - str_shuffle 和随机性

> ID：14079703
> 
> 赞同：16
> 
> 时间：2012-12-29T07:31:34.733
> 
> 标签：php, string, random, passwords

不久前，我编写了一个随机字符串生成器，它使用字符串中的第 mt_rand() 个字符构建字符串，直到达到所需的长度。

```
public function getPassword ()
{
    if ($this -> password == '')
    {
        $pw             = '';
        $charListEnd    = strlen (static::CHARLIST) - 1;
        for ($loops = mt_rand ($this -> min, $this -> max); $loops > 0; $loops--)
        {
            $pw .= substr (static::CHARLIST, mt_rand (0, $charListEnd), 1);
        }
        $this -> password   = $pw;
    }
    return $this -> password;
} 
```

（CHARLIST 是一个包含密码字符池的类常量。$min 和 $max 是长度约束）

今天，在完全研究其他东西时，我偶然发现了以下代码：

```
function generateRandomString ($length = 10) {    
    return substr(str_shuffle ("0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"), 0, $length);
} 
```

这与我在一行中循环基于 mt_rand() 的代码的效果几乎相同。我真的很喜欢它，原因很简单，更少的代码行总是一件好事。:)

但是当我在 PHP 的手册中查找 str_shuffle 时，它​​的文档非常简单。我真正热衷于学习的一件事是它使用什么算法来实现随机性？该手册没有提到要进行什么样的随机化来获得打乱的字符串。如果它使用 rand() 而不是 mt_rand() 那么坚持我当前的解决方案可能会更好。

所以基本上我想知道 str_shuffle 如何随机化字符串。是使用 rand() 还是 mt_rand()？我正在使用我的随机字符串函数来生成密码，所以随机性的质量很重要。

**更新**：正如已经指出的那样， str_shuffle 方法并不等同于我已经在使用的代码，并且由于字符串的字符与输入保持相同，只是它们的顺序发生了变化，因此随机性会降低。但是，我仍然对 str_shuffle 函数如何随机化其输入字符串感到好奇。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-29T08:27:29.440

更好的解决方案是`mt_rand` 使用[Mersenne Twister](http://en.wikipedia.org/wiki/Mersenne_twister)更好。

> 正如已经指出的那样， str_shuffle 方法不等同于我已经在使用的代码，并且由于字符串的字符与输入保持相同，只是它们的顺序发生了变化，因此随机性会降低。但是，我仍然对 str_shuffle 函数如何随机化其输入字符串感到好奇。

为了使输出相等，我们只需使用`0,1`并查看每个函数的视觉表示

简单的测试代码

```
header("Content-type: image/png");
$im = imagecreatetruecolor(512, 512) or die("Cannot Initialize new GD image stream");
$white = imagecolorallocate($im, 255, 255, 255);
for($y = 0; $y < 512; $y ++) {
    for($x = 0; $x < 512; $x ++) {
        if (testMTRand()) { //change each function here 
            imagesetpixel($im, $x, $y, $white);
        }
    }
}
imagepng($im);
imagedestroy($im);

function testMTRand() {
    return mt_rand(0, 1);
}

function testRand() {
    return rand(0, 1);
}

function testShuffle() {
    return substr(str_shuffle("01"), 0, 1);
} 
```

**输出 testRand()**

![在此处输入图像描述](../Images/543b5123bbeaf0f79b9b37189c72b794.png)

**输出 testShuffle()**

![在此处输入图像描述](../Images/b700c8b255f10f4b1a1bf946bda9555d.png)

**输出 testMTRand()**

![在此处输入图像描述](../Images/282170a0f5953317e5bf5cc12a4987bf.png)

> 所以基本上我想知道 str_shuffle 如何随机化字符串。是使用 rand() 还是 mt_rand()？我正在使用我的随机字符串函数来生成密码，所以随机性的质量很重要。

您可以清楚地看到`str_shuffle`产生几乎相同的输出`rand`...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-04T16:20:16.027

请注意，如果您的应用程序真正关注安全性，则不应使用此方法。Mersenne Twister 不是加密安全的。PRNG 可以产生在统计上看起来是随机的但仍然很容易破坏的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-30T17:41:10.343

仍然不是加密安全的，但这是一种`str_shuffle()`在允许字符重复的同时使用的方法，从而提高了复杂性......

```
generate_password($length = 8, $strength = 3) {
    if ($length < 6) $length = 6;
    if ($length > 32) $length = 32;
    // Excludes [0,O,o,1,I,i,L,l,1] on purpose for readability
    $chars = 'abcdefghjkmnpqrstuvwxyz';
    if ($strength >= 2) $chars .= '23456789';
    if ($strength >= 3) $chars .= strtoupper($lower);
    if ($strength >= 4) $chars .= '!@#$%&?';
    return substr(str_shuffle(str_repeat($chars, $length)), 0, $length);
} 
```

`$chars``$length`在字符串被洗牌之前重复多次，这比只洗牌一次出现要好一点。

我们只在不存储敏感信息的系统中使用它；）

# c++ - 未解决的外部问题 C++

> ID：14079707
> 
> 赞同：0
> 
> 时间：2012-12-29T07:31:49.940
> 
> 标签：c++, qt, unresolved-external

尝试使用外部声明的类对象，但收到错误。

赌注.h

```
#ifndef WAGER_H
#define WAGER_H
#include <QString>

void won_color_bets(int cardsDealt);

class Wager
{

    int bet;
    int payout;

public:

    bool didBet;
    bool won;
    QString colorBet;
    QString colorResult;

    Wager();
};

extern Wager street1;

#endif // WAGER_H 
```

赌注.cpp

```
#include "wager.h"
#include "deck.h"
#include<QDebug>
#include<QVector>
#include<QList>
#include"mainwindow.h"

Wager street1;
Wager street2;
Wager street3;
Wager street4;
Wager street5; 
```

主窗口.cpp

```
void MainWindow::street1BetRedClicked()
{
    street1.colorBet="Red";
    qDebug()<<"street1Red Clicked";
} 
```

mainwindow.obj:-1：错误：LNK2001：未解析的外部符号“class Wager street1”（？street1@@3VWager@@A）

`street1Red Clicked`调试成功输出

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T07:59:04.250

下面的错误消息告诉您没有链接 Wager.cpp 文件，或者您错过了实现一个功能。在你的情况下，你忘了给函数定义`Wager();`

> 错误：LNK2001：未解析的外部符号“class Wager street1”（？street1@@3VWager@@A）

要解决此问题，您需要`Wager()`在 Wager.cpp 或 Wager.h 中实施。我提供了一个示例实现`Wager::Wager()`（*默认构造函数：函数名与类名相同，参数为 0*）。注意：下面的代码还初始化了成员初始化器列表中的所有类成员。

```
Wager::Wager()
:bet(0),
 payout(0),
 didBet(false),
 won(false),
 colorBet("blue"),
 colorResult("blue)
{
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T07:40:16.433

这是链接器错误，而不是编译器。链接包含所需类的库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T08:28:20.850

在 C++ 中，方法和函数可以“声明”或“定义”。

通过**声明**，您可以让编译器知道某个函数或对象将在程序中可用，即使此时没有提供例如实际的函数体。

通过**定义**，您实际上提供了函数体或对象的存储和初始化。

```
extern int foo;           // this is an integer DECLARATION

int foo = 4;              // this is the DEFINITION

double square(double x);  // function DECLARATION

// function DEFINITION
double square(double x) {
    return x*x;
} 
```

对于类来说，事情有点复杂，因为这两个概念有点混乱。例如，提供两个定义在逻辑上是错误的，但在 C++ 中是允许的，前提是它们逐个标记绝对相同并且所有标记的含义相同。

此外，如果您不提供类，则默认情况下会自动创建隐式方法。例如当你写：

```
 class Point
 {
     public:
         double x, y;
 }; 
```

编译器会自动完成您的代码，就像您编写的一样

```
 class Point
 {
     public:
         double x, y;

         // default constructor
         Point()
         {
         }

         // copy constructor
         Point(const Point& other)
             : x(other.x), y(other.y)
         {
         }

         // assignment operator
         Point& operator=(const Point& other)
         {
             this->x = other.x;
             this->y = other.y;
             return *this;
         }

         // destructor
         ~Point()
         {
         }
 }; 
```

所有这些都是声明和定义。

但是，如果您只为隐式提供方法之一提供**声明**（就像您为类中的构造函数所做的那样），那么编译器会假定您想以不同的方式自己实现它，并且不会自动生成默认定义。

这是您的编译错误的原因：默认构造函数已声明但未定义，并且在组装可执行文件时编译器缺少某些部分。

另请注意，C++ 是一种非常复杂的语言，有很多明显不合逻辑（有时只是不合逻辑）的部分，不适合通过实验来学习。学习 C++ 的唯一合理方法是开始编写一[本好书](https://stackoverflow.com/q/388242/320726)并从头到尾阅读...

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-29T07:51:31.203

我必须`Wager();`从 wager.h 中删除，然后才能构建项目。不确定原因。有人知道吗？

# jsf - AccordionPanel 不呈现最后一个选项卡

> ID：14079709
> 
> 赞同：2
> 
> 时间：2012-12-29T07:31:50.453
> 
> 标签：jsf, primefaces

我正在使用 JSF 和 Primefaces 进行开发，并在我当前的一个项目中使用手风琴面板组件。这是关于我如何使用它的代码片段：

```
<p:accordionPanel id="historic" dynamic="true" 
                  styleClass="noborder" 
                  activeIndex="-1">

    <p:tab id="tab1" title="Historic 1" >
            <ui:include src="historic1.xhtml"/>
    </p:tab>

    <p:tab id="tab2" title="Historic 2">
            <ui:include src="historic2.xhtml"/>
    </p:tab>

    <p:tab id="tab3" title="Historic 3">
            <ui:include src="historic3.xhtml"/>
    </p:tab>

    <p:tab id="tab4" title="Historic 4">
            <ui:include src="historic4.xhtml" />
    </p:tab>

</p:accordionPanel> 
```

所有选项卡都包含基本相同的代码，一个包含一些数据指向不同数据集的表单。正如你们所看到的，它非常简单并且可以正常工作，除了最后一个选项卡。它从未显示过，无论它包含什么。我的意思是，如果，而不是上面的代码，我把它放在另一个：

```
<p:accordionPanel id="historic" dynamic="true" 
                  styleClass="noborder" 
                  activeIndex="-1">
    <p:tab id="tab1" title="Historic 1" >
            <ui:include src="historic1.xhtml"/>
    </p:tab>

    <p:tab id="tab2" title="Historic 2">
            <ui:include src="historic2.xhtml"/>
    </p:tab>

    <p:tab id="tab3" title="Historic 3">
            <ui:include src="historic3.xhtml"/>
    </p:tab>

    <p:tab id="tab4" title="Historic 4">
            <ui:include src="historic4.xhtml" />
    </p:tab>

    <p:tab id="tab5" title="Historic 5">
           Some plain test text.
    </p:tab>

</p:accordionPanel> 
```

然后现在显示 tab4，但不显示 tab5。我目前正在使用最后一个代码，但由于标签为空，它有点难看。你们有没有人遇到过相同或类似的问题，可以帮助我吗？我会很感激的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T13:09:59.167

来自 primefaces vdl： http: [//www.primefaces.org/docs/vdl/3.4/primefaces-p/accordionPanel.html](http://www.primefaces.org/docs/vdl/3.4/primefaces-p/accordionPanel.html)

主动索引

> 启用多模式时，活动选项卡的索引或逗号分隔的索引字符串。默认为零。

您将其设置为 -1 可能是有原因的，如果您将其设置为 0 或正数，您提供的示例适用于 primefaces 3.4.2

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T15:43:48.253

AccordionPanel 索引是从零开始的索引。也就是说，第一个选项卡为 0，第二个选项卡为 1，依此类推。这就是为什么 a 尝试使用“-1”作为索引的原因，因为我不希望默认打开任何选项卡。但是这个值 (-1) 会在手风琴面板中产生故障：最后一个选项卡没有正确打开。因此，如果 -1 不起作用并且 0 是第一个选项卡的值，那么“超过”最后一个选项卡的值呢？我的意思是，如果我们有 4 个选项卡（索引从 0 到 3），让我们尝试使用 4... 并且它可以工作。很简单。我希望这对发现自己遇到同样问题的人有所帮助。无论如何，谢谢@Aksel Willgert，你给了我线索。

# mysql - 使用批处理文件运行直接 SQL 语句

> ID：14079714
> 
> 赞同：0
> 
> 时间：2012-12-29T07:32:37.653
> 
> 标签：mysql, sql, batch-file

如何在批处理文件中运行 SQL 语句，而不读取文本文件中的语句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T07:42:12.990

```
mysql -uUSERNAME -pPASSWORD db_name -e "SELECT whatever FROM table ..." 
```

# android - 将应用程序上下文而不是活动上下文传递给视图

> ID：14079719
> 
> 赞同：5
> 
> 时间：2012-12-29T07:33:28.613
> 
> 标签：android, android-context

为什么要使用**Activity Context**而我们可以使用**Application Context**来加载和访问资源？意味着如果我使用**Application Context**而不是**Activity Context**则不会发生异常，那么为什么要使用**Activity Context**？

**例子：**

在下面的示例中，如果我在活动**onCreate()中使用****getApplicationContext()**而不是“ **this** ”指针，它可以正常工作，没有任何异常。

 **```
 Button button = new Button(getApplicationContext()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T07:50:36.473

`getApplicationContext()`应该与 Activity 一起使用`view`，它将具有 Activity 之外的范围（一个例子可能是当您从 Activity 绑定到服务时）。

但是对于像上面提到的那样定义视图（定义按钮），您绝对应该使用`Activity's Context`（`MyActivity.this`或简单`this`）。

原因是如果您使用`getApplicationContext()`，它的寿命将与整个应用程序的寿命一样长。但是对于一个 Button，它应该在 Activity 完成后立即销毁，所以`this`在定义这种类型的`Views`.

> 如果我使用应用程序上下文而不是活动上下文，则没有异常

也不例外，因为两者都是有效的上下文。如果您在整个应用程序生命周期内保持视图处于活动状态，即使它不需要（这最终会导致内存泄漏），或者您希望在 Activity 完成后立即销毁它，这取决于您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T07:42:53.800

它们都是 Context 的实例，但应用程序实例与应用程序的生命周期相关联，而**Activity**实例与 Activity 的生命周期相关联。因此，他们可以访问有关应用程序环境的不同信息。

如果您阅读**getApplicationContext**上的文档，它会指出，如果您需要一个生命周期与当前上下文分开的上下文，您应该只使用它。这不适用于您的任何一个示例。

Activity 上下文大概有一些关于当前活动的信息，这些信息是完成这些调用所必需的。如果您显示确切的错误消息，则可能能够指出它到底需要什么。

但总的来说，除非您有充分的理由不这样做，否则请使用活动上下文。**

# git - 如何在不创建新分支的情况下恢复到 HEAD 之前的 5 次签到？

> ID：14079729
> 
> 赞同：1
> 
> 时间：2012-12-29T07:34:47.080
> 
> 标签：git

*如何在 HEAD (513b9c8) 之前恢复到 5 次签到？*

我的意思是恢复，到目前为止，不会丢失任何提交。我只希望我的最新签到看起来与 513b9c8 相同，并且我希望 HEAD 指向这个新签到。我不想要任何新的分支。

我之前尝试`git checkout 513b9c8`过，但遇到了分离 HEAD 等问题......

**笔记**

jszakmeister 在下面的回答完美无缺。只需**确保**在执行命令时位于工作树的顶部。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T07:54:44.340

`git checkout 513b9c8 -- .`在工作树的顶部尝试。如果您对结果感到满意，请提交。

这种形式的`git checkout`处理将提交哈希转换为树哈希，然后将其应用于您的工作树，而无需更改您所在的分支。

# xml - Actionscript 3 XML 获取节点名称

> ID：14079732
> 
> 赞同：0
> 
> 时间：2012-12-29T07:35:35.450
> 
> 标签：xml, actionscript-3, xml-parsing

这是我的 XML，我想动态获取节点/标签名称（例如：wa 或 ca）。

```
<root>
  <wa title='someValue'>
  </wa>
  <or title='val'>
    <data >ss</data>
    <data>sss</data>
  </or>
  <ca title='val'>
    <data>xyz</data>  
  </ca>
</root> 
```

以下是有效的，但它只给出根节点名称

```
for each (var item:XML in xml) {
  trace (item.name());
} 
```

以下是考虑根目录下的每个元素但没有给出节点名称

```
for each(var itemData:XML in xml.elements()) {
   trace ("itemCount " + itemData.name);
} 
```

请建议获取root下的节点名称

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T08:17:59.173

**名称**是一个函数。你忘了使用`()`：

```
for each(var itemData:XML in xml.elements()) {
   trace ("itemCount " + itemData.name());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T09:29:53.857

您可以尝试`localName()`仅使用方法返回节点名称。

```
for each(var itemData:XML in xml.elements()) 
{
    trace ("itemCount " + itemData.localName()); 
} 
```

`name()`返回全限定名称，例如带有命名空间的 xml

```
xmlns:xpl="http://www.example.com/uri/"
<xpl:ca title='val'>
   <data>xyz</data>
 </xpl:ca> 
```

o/p：`http://www.example.com/uri/:ca`

# android - 使用 Listview 和 Sqlite

> ID：14079736
> 
> 赞同：0
> 
> 时间：2012-12-29T07:36:16.440
> 
> 标签：android, sqlite, listview, listadapter

我从以下链接 [http://www.codegod.com/Android-ListView-with-dynamic-Images-AID590.aspx下载了一个 SQLite 示例](http://www.codegod.com/Android-ListView-with-dynamic-Images-AID590.aspx)

SQLiteListActivity.java：

```
package com.codegod.android;

import java.util.ArrayList;

import android.app.ListActivity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ImageButton;
import android.widget.ListView;
import android.widget.AdapterView.OnItemClickListener;

public class SQLiteListActivity extends ListActivity implements View.OnClickListener {

    private StockAdapter tableRowAdapter;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        try {

            StocksManager stockMgr = new StocksManager(getApplicationContext());

            // clear the table
            stockMgr.clear();

            // Add values to database
            stockMgr.insert("APPL", "Apple Inc.");
            stockMgr.insert("GOOG", "Google Inc.");
            stockMgr.insert("LTSB", "Let's drink some beer");

            // get the values from database
            ArrayList<Stock> stocks = stockMgr.getStocks(); 

            tableRowAdapter = new StockAdapter(
                    getApplicationContext(), R.layout.table_row, stocks);

            setListAdapter(tableRowAdapter);

        } catch (Exception ex) {
            Log.e(ex.toString(), ex.toString());

        }

    }

    @Override
    public void onClick(View v) {
        ImageButton button = (ImageButton) v;
        Stock row = (Stock) button.getTag();

        tableRowAdapter.deleteRow(row);
        tableRowAdapter.notifyDataSetChanged();

    }
} 
```

Stock.java

```
package com.codegod.android;

public class Stock {
    private String id;
    private String description;

    public Stock(String id, String description) {
        this.id = id;
        this.description = description;
    }
    public void setId(String id) {
        this.id = id;
    }
    public String getId() {
        return id;
    }
    public void setDescription(String description) {
        this.description = description;
    }
    public String getDescription() {
        return description;
    }

} 
```

StockAdapter.java

```
package com.codegod.android;

import java.util.List;

import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageButton;
import android.widget.TextView;

/**
 * Adapter for Stock-objects 
 *
 */
public class StockAdapter extends BaseAdapter {

    private final List<Stock> rows;

    public StockAdapter(final Context context, final int itemResId,
            final List<Stock> items) {
        this.rows = items;
    }

    public int getCount() {
        return this.rows.size();
    }

    public Object getItem(int position) {
        return this.rows.get(position);
    }

    public long getItemId(int position) {
        return position;
    }

    /**
     * Set the content for a row here
     */
    public View getView(int position, View convertView, ViewGroup parent) {

        final Stock row = this.rows.get(position);
        View itemView = null;

        if (convertView == null) {
            LayoutInflater inflater = (LayoutInflater) parent.getContext()
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            itemView = inflater.inflate(R.layout.table_row, null);
        } else {
            itemView = convertView;
        }

        // Set the text of the row
        TextView txtId = (TextView) itemView.findViewById(R.id.rowId);
        txtId.setText(row.getId());

        TextView txtDesc = (TextView) itemView.findViewById(R.id.rowDesc);
        txtDesc.setText(row.getDescription());

        // Remember the row for each button so that we can refer to
        // it when the button is clicked
        ImageButton imgButton = (ImageButton) itemView.findViewById(R.id.icon);
        imgButton.setTag(row);

        return itemView;

    }

    /**
     * Delete a row from the list of rows
     * @param row row to be deleted
     */
    public void deleteRow(Stock row) {

        if(this.rows.contains(row)) {
            this.rows.remove(row);
        }
    }
} 
```

StocksManager.java

```
package com.codegod.android;

import java.util.ArrayList;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.util.Log;

import com.codegod.android.db.OpenDbHelper;

public class StocksManager {

    private OpenDbHelper dbHelper;

    private static final String STOCK_TABLE = "Stock";
    private static final String STOCK_ID = "stock_id";
    private static final String STOCK_DESC = "stock_desc";

    private static final String SELECT_STOCKS = "SELECT * FROM " + STOCK_TABLE;

    public StocksManager(Context context) {
        dbHelper = new OpenDbHelper(context, STOCK_TABLE, STOCK_ID + " TEXT,"
                + STOCK_DESC + " TEXT");
    }

    /**
     * Insert a Stock-value into database
     * @param stockId id of the stock
     * @param stockDesc description of the stock
     * @return success or fail
     */
    public boolean insert(String stockId, String stockDesc) {
        try {

            SQLiteDatabase sqlite = dbHelper.getWritableDatabase();

            ContentValues initialValues = new ContentValues();

            initialValues.put(STOCK_ID, stockId);
            initialValues.put(STOCK_DESC, stockDesc);

            sqlite.insert(STOCK_TABLE, null, initialValues);

        } catch (SQLException sqlerror) {

            Log.v("Insert into table error", sqlerror.getMessage());

            return false;
        }

        return true;

    }

    /**
     * Get all available stocks
     * @return List of stocks
     */
    public ArrayList<Stock> getStocks() {
        ArrayList<Stock> stocks = new ArrayList<Stock>();

        SQLiteDatabase sqliteDB = dbHelper.getReadableDatabase();

        Cursor crsr = sqliteDB.rawQuery(SELECT_STOCKS, null);

        crsr.moveToFirst();

        for (int i = 0; i < crsr.getCount(); i++)
        {
            stocks.add(new Stock(crsr.getString(0), crsr.getString(1)));

            crsr.moveToNext();
        }

        return stocks;
    }

    /**
     * Clear the table
     */
    public void clear() {

        try {

            SQLiteDatabase sqlite = dbHelper.getWritableDatabase();

            sqlite.delete(STOCK_TABLE, "", null);

        } catch (SQLException sqlerror) {

            Log.v("delete from table error", sqlerror.getMessage());

        }   

    }

} 
```

OpenDBHelper.java

```
package com.codegod.android.db;

import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class OpenDbHelper extends SQLiteOpenHelper {

    private static final int DATABASE_VERSION = 2;

    private String createStatement = "";

    /**
     * Creates the OpenDbHelper 
     * 
     * @param context app-context
     * @param tableName name of the table to open/create
     * @param fields fields of the table to create
     */
    public OpenDbHelper(Context context, String tableName, String fields) {

        super(context, tableName, null, DATABASE_VERSION);

        this.createStatement  = "CREATE TABLE ";
        this.createStatement += tableName + " (";
        this.createStatement += fields + ");";

    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL(this.createStatement);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int neVersion) {
        // TODO Auto-generated method stub
    }

} 
```

布局.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" android:layout_height="?android:attr/listPreferredItemHeight"
    android:padding="4dip">

    <TextView android:id="@+id/rowId" android:layout_width="fill_parent"
        android:layout_height="26dip" android:singleLine="true"
        android:textSize="20dip" android:textColor="#ffffff" android:text="Id..." />

    <TextView android:id="@+id/rowDesc" android:layout_width="fill_parent"
        android:text="Descr..." android:layout_height="20dip"
        android:textSize="12dip" android:layout_below="@+id/rowId"
        android:layout_alignParentBottom="true" android:textColor="#ffffff" />

    <ImageButton android:id="@+id/icon" android:layout_width="wrap_content"
        android:layout_height="wrap_content" android:src="@drawable/delete"
        android:gravity="right" android:layout_alignParentRight="true"
        android:onClick="onClick" />

</RelativeLayout> 
```

其中有一个连接到数据库的列表视图以及一个删除行的图像按钮，但我想更改它以便将删除结果保存在我的数据库中，我的意思是删除后的更改现在不会保存在这个项目，即使我从文件资源管理器中提取它，我的数据库中仍然有三行，我应该如何更改它？请在这个问题上帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T07:47:30.403

您需要编写数据库方法来从 sqlite 数据库中删除行。这是一些代码片段

```
public void RemoveRow(String id){
    SQLiteDatabase sqliteDB = dbHelper.getReadableDatabase();
    String query = "DELETE FROM Stock WHERE stock_id='"+id+"'";
    sqliteDB.execSQL(query);
} 
```

并在 listview 的 onClick 方法中调用此方法

```
@Override
public void onClick(View v) {
    StocksManager.RemoveRow();
} 
```

您将需要初始化 StockManager 方法；

编辑 ：

通过这样做，`StocksManager.java`将是

```
package com.codegod.android;

import java.util.ArrayList;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.util.Log;

import com.codegod.android.db.OpenDbHelper;

public class StocksManager {

    private OpenDbHelper dbHelper;

    private static final String STOCK_TABLE = "Stock";
    private static final String STOCK_ID = "stock_id";
    private static final String STOCK_DESC = "stock_desc";

    private static final String SELECT_STOCKS = "SELECT * FROM " + STOCK_TABLE;

    public StocksManager(Context context) {
        dbHelper = new OpenDbHelper(context, STOCK_TABLE, STOCK_ID + " TEXT,"
                + STOCK_DESC + " TEXT");
    }

    /**
     * Insert a Stock-value into database
     * @param stockId id of the stock
     * @param stockDesc description of the stock
     * @return success or fail
     */
    public boolean insert(String stockId, String stockDesc) {
        try {

            SQLiteDatabase sqlite = dbHelper.getWritableDatabase();

            ContentValues initialValues = new ContentValues();

            initialValues.put(STOCK_ID, stockId);
            initialValues.put(STOCK_DESC, stockDesc);

            sqlite.insert(STOCK_TABLE, null, initialValues);

        } catch (SQLException sqlerror) {

            Log.v("Insert into table error", sqlerror.getMessage());

            return false;
        }

        return true;

    }

    /**
     * Get all available stocks
     * @return List of stocks
     */
    public ArrayList<Stock> getStocks() {
        ArrayList<Stock> stocks = new ArrayList<Stock>();

        SQLiteDatabase sqliteDB = dbHelper.getReadableDatabase();

        Cursor crsr = sqliteDB.rawQuery(SELECT_STOCKS, null);

        crsr.moveToFirst();

        for (int i = 0; i < crsr.getCount(); i++)
        {
            stocks.add(new Stock(crsr.getString(0), crsr.getString(1)));

            crsr.moveToNext();
        }

        return stocks;
    }

    /**
     * Remove selected stock
     * @return Void
     */
    public void RemoveRow(String id){
        SQLiteDatabase sqliteDB = dbHelper.getReadableDatabase();
        String query = "DELETE FROM Stock WHERE stock_id='"+id+"'";
        sqliteDB.execSQL(query);
    }

    /**
     * Clear the table
     */
    public void clear() {

        try {

            SQLiteDatabase sqlite = dbHelper.getWritableDatabase();

            sqlite.delete(STOCK_TABLE, "", null);

        } catch (SQLException sqlerror) {

            Log.v("delete from table error", sqlerror.getMessage());

        }   

    }

} 
```

并且`SQLiteListActivity.java`：

```
package com.codegod.android;

import java.util.ArrayList;

import android.app.ListActivity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ImageButton;
import android.widget.ListView;
import android.widget.AdapterView.OnItemClickListener;

public class SQLiteListActivity extends ListActivity implements View.OnClickListener {

    private StockAdapter tableRowAdapter;
    private StocksManager stockMgr;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        try {

            //Initialize StockManager Database class
            stockMgr = new StocksManager(getApplicationContext());

            // clear the table
            stockMgr.clear();

            // Add values to database
            stockMgr.insert("APPL", "Apple Inc.");
            stockMgr.insert("GOOG", "Google Inc.");
            stockMgr.insert("LTSB", "Let's drink some beer");

            // get the values from database
            ArrayList<Stock> stocks = stockMgr.getStocks(); 

            tableRowAdapter = new StockAdapter(
                    getApplicationContext(), R.layout.table_row, stocks);

            setListAdapter(tableRowAdapter);

        } catch (Exception ex) {
            Log.e(ex.toString(), ex.toString());

        }

    }

    @Override
    public void onClick(View v) {
        ImageButton button = (ImageButton) v;
        Stock row = (Stock) button.getTag();

        tableRowAdapter.deleteRow(row);
        tableRowAdapter.notifyDataSetChanged();

        //Call DB Method to remove stock from database
        stockMgr.RemoveRow(row.getId());
    }
} 
```

我没有机会测试它，但我相信它会正常工作。

# highstock - Highstock - 比较图表应该从 0% 开始

> ID：14079746
> 
> 赞同：2
> 
> 时间：2012-12-29T07:38:25.333
> 
> 标签：highstock

我正在研究 highstock 并且面临的问题是“y 轴是一个百分比值，图表上的第一个点应始终从 0% 开始。我遇到问题的部分是图表看起来总是从 0 开始% 在第二个日期。"

我在这里发现了同样的问题： [Highstock - 比较图表不是从 0% 开始](https://stackoverflow.com/questions/11640405/highstock-comparison-chart-doesnt-start-at-0)

以下是详细信息，以防有人可以帮助我解决问题。

我正在尝试查看 2008 年 10 月 14 日至 2012 年 10 月 3 日之间的数据。当我将查看图表的窗口缩小到 2008 年 10 月 14 日和2010 年 6 月 24 日，第一个数据点正确定位到 0% 我发现当我使用各种间隔的日期范围时，有时图表的第一个数据点是正确的（即定位在 0%）但有时它定位在非零值。

为什么会发生这种情况，我想我的问题与上面概述的相同问题有关，但我也尝试从 highcharts 问题和记录的 github 问题中进行跟踪。但我找不到任何解决方案。感谢是否有人可以帮助我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:59:00.790

它看起来像这里报告的错误：[https ://github.com/highslide-software/highcharts.com/issues/687](https://github.com/highslide-software/highcharts.com/issues/687)

# c++ - 我可以创建对函数的引用吗？

> ID：14079748
> 
> 赞同：10
> 
> 时间：2012-12-29T07:39:22.033
> 
> 标签：c++, reference, function-pointers

> **可能重复：**
> [函数引用](https://stackoverflow.com/questions/480248/function-references)

我在一本书中找到了这段代码，

`typedef int (&foo)(int,int);`

这是什么意思 ？这是对函数的引用吗？如果是，它为什么用于？它与指向这样的函数的指针有何不同。

`typedef int (*foo)(int,int);`

这只是 C++ 中没有的 C++ 的增强吗？

**编辑**：

```
#include <iostream>
#include <typeinfo>
using namespace std;
int f (int , int ) {return 0;}
int main() {
    int (&foo)(int,int) = f;
    int (*fp)(int,int) = f;
    std::cout<<typeid(foo).name()<<std::endl<<typeid(fp).name();
    return 0;
} 
```

当我打印类型时`foo`，`fp`它会给出如下内容：

FiiiE
PFiiiE

最后是什么`E`。为什么`foo`是`F`while`fp`是`PF`？

# iphone - Is is possible to develop an app to record phone conversations for iPhone?

> ID：14079757
> 
> 赞同：0
> 
> 时间：2012-12-29T07:41:13.283
> 
> 标签：iphone, ios, core-telephony

Is it possible to develop an app to handle an incoming phone call for iPhone? I mean, I'm thinking to develop an app to record phone conversation for both outgoing and incoming calls.

If it is an outgoing call, can user make a standard phone call and the voice conversation be recorded?

If it is an incoming call, can app be opened/activated when there is an incoming call and the user talk while the conversation is recorded?

(There is a [Core Telephone Framework](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/CoreTelephonyFrameworkReference/_index.html): but I don't know if it would help.)

Can anyone advise?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T07:44:23.923

Ignoring legal implications, it is not possible over their provider's network.

```
(ex: Verizon) 
```

[This](http://www.macworld.com/article/2010545/recording-your-iphone-calls.html) article goes into a little more detail.

# django - apache2+mod_wsgi 在每个主机名中有多个 django 进程

> ID：14079762
> 
> 赞同：0
> 
> 时间：2012-12-29T07:42:17.780
> 
> 标签：django, apache, mod-wsgi

我想用多个主机名运行多个 django 项目。

如果使用来自 www.momsy.org，则转到 /var/web/momsy.git.org 其他如果来自 www.momsy.net，则转到 /var/web/momsy.git.net

这是为了记录和分析他/她来自哪里。

因此，以下不起作用，因为 [WSGIPythonPath 不能出现在部分内]。

但我不能使用 http.conf 因为我需要“服务器名”变量。

我怎么解决这个问题？

> ServerAdmin webmaster@localhost
> 服务器名 www.momsy.org

```
 WSGIScriptAlias / /home/web/momsy.git.kr/momsy/wsgi.py                             
    WSGIPythonPath /home/web/momsy.git.kr                                              

    <Directory  /home/web/momsy.git.kr/momsy>                                          
    <Files wsgi.py>                                                                    
            Order deny,allow                                                           
            Allow from all                                                             
    </Files>                                                                           
    </Directory> 
```

一种

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T09:57:24.460

使用守护进程模式，将每个 Django 实例委托给一组单独的进程，并根据每个守护进程组的需要设置 python-path。看：

*   [http://blog.dscpl.com.au/2012/10/why-are-you-using-embedded-mode-of.html](http://blog.dscpl.com.au/2012/10/why-are-you-using-embedded-mode-of.html)
*   [http://blog.dscpl.com.au/2012/10/requests-running-in-wrong-django.html](http://blog.dscpl.com.au/2012/10/requests-running-in-wrong-django.html)

否则在 WSGI 脚本文件中设置 sys.path，而不是在 Apache 配置中。

*   [http://code.google.com/p/modwsgi/wiki/IntegrationWithDjango](http://code.google.com/p/modwsgi/wiki/IntegrationWithDjango)

# android - 在没有 Eclipse 或 Ant 的情况下使用 LibGDX

> ID：14079764
> 
> 赞同：5
> 
> 时间：2012-12-29T07:42:31.580
> 
> 标签：android, libgdx

**背景**

所以最近我想为 Android 构建一个游戏，并开始四处寻找一个好的库来帮助解决这个问题。LibGDX 选中了所有正确的复选框。但是像往常一样（并且可以理解）所有文档只提到了使用带有 ADT 的 Eclipse。以前，我使用 Ant 构建我的 Android 项目，所以我认为我可以使用它，但是学习 Ant，虽然它可能很有用，但考虑到肯定不会有那么多命令来构建项目，这似乎有点多？

**问题**

那么，在不使用 Eclipse、Ant 或其他一些 IDE/构建工具的情况下，我需要执行哪些步骤来创建、编译和运行至少针对桌面和 Android 平台的 LibGDX 项目？

我将回答我自己的问题，但我用来创建最终产品的方法可能不是最好的，因此欢迎批评。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-29T07:42:31.580

以下内容来自我[在 github 上创建的一个项目，](https://github.com/jmathew/PaperPlanes)其中包含所有代码和信息。

# 纸飞机

这是一个测试 libgdx 开发的简单应用程序，无需使用 Eclipse 或 Ant 来构建项目。主要关注点是将 libgdx 与我的无 Ant、仅命令行的开发环境集成。

# 过程

我将通过一个简单的项目，从开始到获得可运行的构建，将结合我收集的知识，研究如何在不使用 Ant 或 Eclipse 的情况下设置 libgdx 项目。事后看来，一般过程是直截了当的，但我写这篇文章是因为我很难在网上找到答案，特别是针对 android 构建。

出于本指南的目的，项目名称将是**PaperPlanes**，因为它比键入“TestGameLibGdx”更好。项目代码将包括将加载的纹理移动到单击/触摸点。该应用程序本身在很大程度上无关紧要，只是为某人节省了查找一些代码来测试我使用的步骤的步骤。

我假设环境已经设置为使用 Ant 或 Eclipse 构建和部署 android 应用程序。目前您还需要**java 1.6**，因为使用 1.7 和为 android 编译似乎存在一些问题。

## 制作目录结构

第一件事是在使用 libgdx 时像往常一样为不同的目标创建文件夹。稍后我们将单独处理每个文件夹。我没有 iOS 或 HTML5 目标的目录，因为我还没有尝试构建它们。

```
mkdir -v PaperPlanes
cd PaperPlanes
mkdir -v main desktop android assets 
```

### 设置主目录

这是大部分代码的去向。

```
cd main
mkdir -pv libs src/com/jeff/paperplanes 
```

### 设置桌面目录

非常简单，与 main 相同，但有一个`bin`目录。

```
cd desktop
mkdir -pv bin/classes libs src/com/jeff/bucket 
```

### 设置安卓目录

我们将使用该工具生成的 skelton 项目构建 android 目录`android`。或者，您可以按照源代码部分中提供的[指南自行创建目录结构。](http://geosoft.no/development/android.html)请注意`--target`和`--path`标志，因为它们特定于您的设置。

```
cd android
android create project --target 1 --name PaperPlanes --path /home/jeff/playground/PaperPlanes/android --activity PaperPlanesActivity --package com.jeff.paperplanes
mkdir -pv bin/classes bin/lib 
```

删除我们不需要的文件。我删除了 progaurd 文件，因为这个项目不需要它。

```
rm build.xml local.properties project.properties ant.properties proguard-project.txt 
```

## **获取 libgdx**库文件

每晚下载 libgdx 并将所需的库放在相关目录中。下面的片段是我如何更新我的库。

```
LIBGDX_ZIP="libgdx-nightly-latest.zip"
wget http://libgdx.badlogicgames.com/nightlies/$LIBGDX_ZIP

unzip -o $LIBGDX_ZIP gdx.jar gdx-natives.jar gdx-backend-android.jar gdx-backend-lwjgl.jar gdx-backend-lwjgl-natives.jar extensions/gdx-tools.jar 'armeabi/*' 'armeabi-v7a/*'
rm -v $LIBGDX_ZIP

mv -v gdx.jar main/libs/
cp -Rv extensions main/libs
mv -v gdx-natives.jar gdx-backend-lwjgl.jar gdx-backend-lwjgl-natives.jar  desktop/libs/
mv -v gdx-backend-android.jar android/libs/
cp -Rv armeabi-v7a armeabi android/libs/

rm -rf extensions armeabi armeabi-v7a 
```

apk 需要`areabi*`在安装时包含目录。因此，在`bin/lib`目录中创建一些指向这些文件夹的链接。您也可以只复制实际文件夹，但 libs 进入 libs 目录该死的！

```
cd android/bin/lib
ln -s ../../libs/armeabi
ln -s ../../libs/armeabi-v7a 
```

## 获取一些资产

与 Android 应用程序共享时，资产很奇怪。

桌面应用程序从应用程序的根目录开始查找资产，因此您可以像这样引用资产：

```
Gdx.files.internal( "assets/plane.png" ) 
```

`assets`但是，android 应用程序会从目录中开始查找资产。因此，上面的代码会导致它在文件夹中查找文件`ROOT/assets/assets/plane.png`。

所以我们既可以分散根目录中的所有资产，也可以`ROOT/assets`在`ROOT/android/bin/assets/`. 它看起来很愚蠢，但使资产引用在整个平台上保持一致。

我确信有更好的方法可以做到这一点，但它确实有效。

无论如何，这个应用程序只使用一种名为`assets/plane.png`.

## 写一些代码

[您可以在libgdx](https://github.com/libgdx/libgdx)存储库中找到大量示例。下面我将在编写本指南时转储我用来测试本指南的代码。

**主/src/.../PaperPlanesGame.java**

```
package com.jeff.paperplanes;

import com.badlogic.gdx.Game;

public class PaperPlanesGame extends Game {
  private MainScreen ms; 

  @Override
  public void create() {
    ms = new MainScreen( this );
    this.setScreen( ms );
  }
} 
```

**主/src/.../MainScreen.java**

```
package com.jeff.paperplanes;

import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.graphics.g2d.SpriteBatch;
import com.badlogic.gdx.graphics.Texture;
import com.badlogic.gdx.graphics.GL10;
import com.badlogic.gdx.graphics.g2d.Sprite;
import com.badlogic.gdx.graphics.OrthographicCamera;
import com.badlogic.gdx.math.Rectangle;
import com.badlogic.gdx.math.Vector3;
import com.badlogic.gdx.Screen;

public class MainScreen implements Screen {

  PaperPlanesGame g;
  Texture planeImage;
  Rectangle planeRect;
  SpriteBatch spb;
  Vector3 touchPos;
  OrthographicCamera cam;

  public MainScreen( PaperPlanesGame g ) {
    this.g = g;

    // load assets
    planeImage = new Texture( Gdx.files.internal( "assets/plane.png" ) );

    // initialize rectangle
    planeRect = new Rectangle();

    // initialize spritebatch for drawing
    spb = new SpriteBatch();    

    // initialize our camera
    cam = new OrthographicCamera();
    cam.setToOrtho( false, Gdx.graphics.getWidth(), Gdx.graphics.getHeight() );
    cam.update( true );

    // touch location
    touchPos = new Vector3();

  }

  @Override
  public void show() {
  }
  @Override
  public void render( float delta ) {
    // clear screen
    Gdx.gl.glClear( GL10.GL_COLOR_BUFFER_BIT );

    // update camera
    cam.update();

    // begin draw
    spb.setProjectionMatrix( cam.combined );
    spb.begin();

    // move our plane and center it
    spb.draw( planeImage, planeRect.x - ( planeImage.getWidth() / 2 ) , planeRect.y - ( planeImage.getHeight() / 2 ) );
    //spb.draw( planeImage, planeRect.x, planeRect.y );
    spb.end();

    // update touch position
    if( Gdx.input.isTouched() ) {
      touchPos.set( Gdx.input.getX(), Gdx.input.getY(), 0 );

      // only unproject if screen is touched duh!
      cam.unproject( touchPos );

      // converts the coord system of the touch units ( origin top left ) to camera coord ( origin bottom left )
      planeRect.x = touchPos.x;
      planeRect.y = touchPos.y;
    }

    Gdx.app.log( "X + Y", planeRect.x + " + " + planeRect.y );

  }

  @Override
  public void resize( int width, int height ) {
  }
  @Override
  public void hide() {
  }
  @Override
  public void pause() {
  }
  @Override
  public void resume() {
  }
  @Override
  public void dispose() {
  }
} 
```

**android/src/.../PaperPlanesActivity.java**

```
package com.jeff.paperplanes;

import android.app.Activity;
import android.os.Bundle;
import com.badlogic.gdx.backends.android.AndroidApplication;
import com.badlogic.gdx.backends.android.AndroidApplicationConfiguration;

public class PaperPlanesActivity extends AndroidApplication {
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    AndroidApplicationConfiguration cf = new AndroidApplicationConfiguration();

    cf.useGL20 = true;
    cf.useAccelerometer = true;
    cf.useCompass = false;

    initialize( new PaperPlanesGame(), cf );
  }
} 
```

**桌面/src/.../PaperPlanesDesktop.java**

```
package com.jeff.paperplanes;

import com.badlogic.gdx.backends.lwjgl.LwjglApplication;
import com.badlogic.gdx.backends.lwjgl.LwjglApplicationConfiguration;

public class PaperPlanesDesktop {

  public static void main( String[] args ) {
    LwjglApplicationConfiguration cf = new LwjglApplicationConfiguration();
    cf.title = "PaperPlanes";
    cf.useGL20 = true;
    cf.width = 800;
    cf.height = 480;

    new LwjglApplication( new PaperPlanesGame(), cf );
  } 
} 
```

记住在处理 android 目标时要进行审查`AndroidManifest.xml`。

## 为桌面编译

这是容易的一点。我们正在从`ROOT`目录运行编译命令。

```
# Compile
javac -verbose -classpath "desktop/libs/*:main/libs/*:desktop/bin/classes" -sourcepath desktop/src/com/jeff/paperplanes:main/src/com/jeff/paperplanes -d desktop/bin/classes desktop/src/com/jeff/paperplanes/*.java main/src/com/jeff/paperplanes/*.java 

# Run
java -classpath "desktop/libs/*:main/libs/*:desktop/bin/classes" com.jeff.paperplanes.PaperPlanesDesktop 
```

## 编译安卓

比桌面复杂一点。我在很大程度上抄袭了[这个人](http://geosoft.no/development/android.html)所做的工作。该指南非常有用，值得一读，以解释我将在下面执行的每个步骤。

我们正在从`android`目录运行命令。

首先我们制作 R.java，我并没有真正使用其中的任何资产，因为这超过了跨平台点，但似乎我无法删除它而不会在运行时出现错误。

```
aapt package -v -f -m -M AndroidManifest.xml -I /opt/android-sdk/platforms/android-10/android.jar -S res -J src/ 
```

现在我们编译我们的源文件。请注意`-classpath`确保它与您的库所在的位置一致。

```
javac -verbose -d bin/classes -classpath "bin/classes:/opt/android-sdk/platforms/android-10/android.jar:bin/lib/*:../main/libs/*:libs/*" -target 1.6 `find ./src -iname "*.java"` `find ../main/src -iname "*.java"` 
```

然后制作 Dalvik 字节码。包括代码中使用的所有库文件。

```
dx --dex --output bin/classes.dex bin/classes libs/gdx-backend-android.jar ../main/libs/gdx.jar 
```

在这里，我们制作未签名的 apk 文件。

```
aapt package -v -f -M AndroidManifest.xml -S res -I /opt/android-sdk/platforms/android-10/android.jar -F bin/paperplanes.unsigned.apk bin/ 
```

然后我们用密钥签名。

```
jarsigner -verbose -keystore debugkey.keystore -storepass debug123 -keypass debug123 -signedjar bin/paperplanes.signed.apk bin/paperplanes.unsigned.apk debugkey 
```

如果您没有密钥，您可以生成一个。以下是制作方法（摘自[我经常提到的指南](http://geosoft.no/development/android.html)）：

```
JAVA_HOME/bin/keytool
                -genkeypair
                -validity 10000
                -dname "CN=company name,
                        OU=organisational unit,
                        O=organisation,
                        L=location,
                        S=state,
                        C=country code"
                -keystore DEV_HOME/AndroidTest.keystore
                -storepass password
                -keypass password
                -alias AndroidTestKey
                -keyalg RSA
                -v 
```

最后我们运行 zipalign 并将其安装到设备上。

```
zipalign -v -f 4 bin/paperplanes.signed.apk bin/paperplanes.apk

# First time install
adb -d install bin/paperplanes.apk

# Reinstall
adb -d install -r bin/paperplanes.apk 
```

## 来源

[在命令行上构建 Android 程序](http://geosoft.no/development/android.html)

[SO的回答让我失望](https://stackoverflow.com/a/3217662/730326)

[LibGDX github页面](https://github.com/libgdx/libgdx)

[PaperPlanes（这个项目）github页面](https://github.com/jmathew/PaperPlanes)

[LibGDX API](http://libgdx.l33tlabs.org/docs/api/)

[制作应用时参考的LibGDX教程](http://code.google.com/p/libgdx/wiki/SimpleApp)

[制作应用程序时参考的另一个 LibGDX 教程](http://code.google.com/p/libgdx-users/wiki/ScreenAndGameClasses)

# android - 同步数据集 - 多个用户、多个时间戳

> ID：14079766
> 
> 赞同：0
> 
> 时间：2012-12-29T07:42:36.030
> 
> 标签：android, ios, dataset, timestamp, pandas

我试图了解这样做的最佳方法是什么：

基本上我会有一堆 Android/iOS 用户在他们的手机上记录传感器数据，除了每个用户都有自己的时间戳，具体取决于人们何时启动应用程序等。假设我有两个用户：

```
User 1: (5,45), (6,34), (8,32)
User 2: (5,35), (7,32), (9,32) 
```

格式是（时间 t 和一些任意值）。

同步这两个数据集的最佳方法是什么？我是否必须编写一个算法，然后返回并在用户 2 上说，插入以下条目 (6,35)。所以最终新数据看起来像：

```
User 1: (5,45), (6,34), (7,34), (8,32), (9,32)
User 2: (5,35), (6,35), (7,32), (8,32), (9,32) 
```

不过，这可能是数据密集型的，因为我预计会有大约 300 个用户，每个用户将有大约 36,000 个数据条目。任何建议都将不胜感激 - 我也可以在应用程序方面做一些可以帮助的事情。

我相信当我拥有所有数据时，我将不得不做这样的事情[——但由于这是一个积极发展的项目，我想我应该先得到一些建议。](https://stackoverflow.com/questions/11686272/combining-multiple-timeseries-data-to-one-2d-numpy-array)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T08:11:53.420

您可以`DataFrame`从每个用户的数据创建一个。然后将它们全部存储在一个`Panel`. Pandas 将根据时间戳将它们全部排列起来，您可以使用前向填充方法`ffill`来传播值：

```
In [62]: df1 = DataFrame([45,34,32], index=[5,6,8], columns=['value'])

In [63]: df2 = DataFrame([35,32,32], index=[5,7,9], columns=['value'])

In [64]: p = Panel({'user1': df1, 'user2': df2})

In [75]: p.ffill().to_frame().unstack()
Out[75]:
       user1  user2
minor  value  value
major
5         45     35
6         34     35
7         34     32
8         32     32
9         32     32 
```

或者，您可以只使用 Series 和 DataFrames 来做同样的事情。我想这取决于你想用它做什么：

```
In [78]: s1 = Series([45,34,32], index=[5,6,8])

In [79]: s2 = Series([35,32,32], index=[5,7,9])

In [80]: df = DataFrame([s1,s2])

In [81]: df
Out[81]:
    5   6   7   8   9
0  45  34 NaN  32 NaN
1  35 NaN  32 NaN  32

In [82]: df = DataFrame([s1,s2]).T

In [83]: df
Out[83]:
    0   1
5  45  35
6  34 NaN
7 NaN  32
8  32 NaN
9 NaN  32

In [84]: df.ffill()
Out[84]:
    0   1
5  45  35
6  34  35
7  34  32
8  32  32
9  32  32 
```

# lighttpd - 为什么 PHP 会话被破坏？

> ID：14079769
> 
> 赞同：4
> 
> 时间：2012-12-29T07:43:01.127
> 
> 标签：lighttpd, php

我有这个php代码，

```
<?php

session_start();
Print_r($_SESSION);
$_SESSION['value'] = 1;
Print_r($_SESSION);

?> 
```

为什么每次刷新页面时都会打印以下内容..

```
Array
(
)
Array
(
    [value] => 1
) 
```

它应该打印，

```
Array
(
    [value] => 1
)
Array
(
    [value] => 1
) 
```

我在 Fedora 14 上`lighttpd`用作服务器。`http`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T08:08:15.810

我读到运行`chown -R root:lighttpd /var/lib/php/`解决了其他有同样问题的问题。

来源： http:
[//masdeni.com/archives/6-Lighttpd-+-PHP-Session-Problem.html](http://masdeni.com/archives/6-Lighttpd-+-PHP-Session-Problem.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T07:55:29.507

我会测试是否`session_start()`返回`true`（会话开始），例如：

```
$is_session_started = session_start(); 
```

如果`$is_session_started == false`，那么你就有 1/2 的答案。另一个 1/2 将在于弄清楚它为什么没有启动。根据上面的@Ryan，检查您的会话 ini 设置。

如果您使用 cookie 存储会话 ID，请确保`session_start()`在打印/回显/返回任何其他值到浏览器之前调用。

# c# - 如何在表单中重置图像

> ID：14079770
> 
> 赞同：0
> 
> 时间：2012-12-29T07:43:02.087
> 
> 标签：c#, gdi+

我有 2 张图片`OriginalImage`和`TempImage`.

我使用此代码以形式加载图像：

```
this.DoubleBuffered = true;
Temp= new Bitmap(2, 2);
Original = new Bitmap(2, 2);
Original=Temp; 
```

并更改 Temp 图像（旋转、裁剪等）

重置时，我加载原始图像以加载基本图像，但加载临时图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T07:56:27.757

问题是这`Bitmap`是一个类，当你说 时`Original = Temp`，你是在告诉`Original`引用与 . 相同的`Bitmap`实例`Temp`。

`Bitmap`您为其实例化的会`Original`丢失并将被垃圾收集，如果您处置其中任何一个，两者都将停止工作。

您在最后一行中寻找的是[`Bitmap.Clone()`](http://msdn.microsoft.com/en-us/library/system.drawing.image.clone.aspx)，以便您创建 Temp 的副本并将其存储在 Original 中：

```
 this.DoubleBuffered = true;
    Temp= new Bitmap(2, 2);
    Original = (Bitmap)Temp.Clone(); 
```

# javascript - jQuery hasClass() 方法没有返回正确的值

> ID：14079771
> 
> 赞同：0
> 
> 时间：2012-12-29T07:43:23.620
> 
> 标签：javascript, jquery, html

### 你好...

  我正在尝试更改元素的背景颜色及其子元素。所以我写了一个`function`被递归调用的元素。
  以下是元素的背景颜色不应更改的一些条件，如果它具有属性`class="irmNDrdnVal"`或`id="irmNDatePickerContainer"`.

这是代码：

```
<!DOCTYPE HTML PUBLIC>
<html>
<style>
 .newClass{
  color:red;
  background:green;
 }
</style>
  <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.js"></script>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.js"></script>
<body>
<div id="main">
  <span id= "drdn-box-ACNT" class="irmNDrdnInputBox" disabled= "true">
      <input id="drdn-ip-ACNT" class="irmNDrdnInput" readOnly="readOnly" value="1 IA" type="text">
      <span><img src="/sap/bc/bsp/sap/public/drdn-btn.gif"></span>
  </span>
  <div id= "drdn-val-ACNT" class="irmNDrdnVal">
        <div>
            <ul>
                <li disabled= "true" key= "">&nbsp;</li>
                <li disabled= "true" key= "1">1 IA</li>
                <li disabled= "true" key= "2">2 PB &amp; CB</li>
                <li disabled= "true" key= "3">3 DM-P</li>
                <li disabled= "true" key= "4">4 DM-R</li>
                <li disabled= "true" key= "5">5 Cash App</li>
            </ul>
        </div>
  </div>
</div>

<script>
  function changeBgColor(_ele,_cls,_remove){
    if(_remove){
     _ele.removeClass(_cls);
    }
    else{
     if(!_ele.hasClass('ui-resizable-handle') && !_ele.hasClass('irmNDrdnVal') && _ele.attr('id') != 'irmNDatePickerContainer'){
         _ele.addClass(_cls);
     }
    }
    if(_ele.children().length > 0 && !_ele.hasClass('irmNDrdnVal') && _ele.attr('id') != 'irmNDatePickerContainer'){
      changeBgColor(_ele.children(),_cls,_remove);
    }
  }

 $('div#main').each(function(){
   changeBgColor($(this),'newClass',false);
 });

</script>
</body>
</html> 
```

因此，我正在检查特定元素是否具有类`irmNDrdnVal`。如果只有它没有类，我将允许更改背景`'irmNDrdnVal'`。

它正在工作除了一个元素之外的每个元素。即

```
<span id= "drdn-box-ACNT" class="irmNDrdnInputBox" disabled= "true"> 
```

  虽然它没有 class `'irmNDrdnVal'`，但该`hasClass('irmNDrdnVal')`方法`true`为元素返回。

  我无法理解 whtz 出了什么问题。

有人可以帮我吗......提前谢谢......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T08:10:39.253

好吧，代码不可读，但我想问题出在这里：

```
changeBgColor(_ele.children(), _cls, _remove); 
```

如果将所有子元素传递给 changeBgColor，那么它们都将在 _ele（这是 jQuery 元素集）中，如果只有一个子元素具有类 irmNDrdnVal，则 _ele.hasClass('irmNDrdnVal') 将返回 true整套。试着改变它

```
_ele.children().each(function(){
   changeBgColor($(this), _cls, _remove);
}) 
```

而且，为了调试目的，尽量让你的代码更具可读性；）

# java - jaxb 实现不适用于 Windows 7

> ID：14079776
> 
> 赞同：-1
> 
> 时间：2012-12-29T07:44:34.067
> 
> 标签：java, tomcat, jaxb

我正在使用 jaxb 从 xsd 创建 java 类，但是当我尝试通过 http 发送 xml 时出现运行时错误

```
java.lang.annotation.AnnotationTypeMismatchException: Incorrectly typed data found for annotation element public abstract javax.xml.bind.annotation.AccessType javax.xml.bind.annotation.XmlAccessorType.value() (Found data of type Ljavax/xml/bind/annotation/XmlAccessType;.FIELD)
    sun.reflect.annotation.AnnotationTypeMismatchExceptionProxy.generateException(AnnotationTypeMismatchExceptionProxy.java:38)
    sun.reflect.annotation.AnnotationInvocationHandler.invoke(AnnotationInvocationHandler.java:56)
    $Proxy6.value(Unknown Source)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    java.lang.reflect.Method.invoke(Method.java:597)
    com.sun.xml.bind.v2.model.annotation.LocatableAnnotation.invoke(LocatableAnnotation.java:60)
    $Proxy8.value(Unknown Source)
    com.sun.xml.bind.v2.model.impl.ClassInfoImpl.getAccessType(ClassInfoImpl.java:339)
    com.sun.xml.bind.v2.model.impl.ClassInfoImpl.getProperties(ClassInfoImpl.java:228)
    com.sun.xml.bind.v2.model.impl.RuntimeClassInfoImpl.getProperties(RuntimeClassInfoImpl.java:87)
    com.sun.xml.bind.v2.model.impl.ModelBuilder.getClassInfo(ModelBuilder.java:127)
    com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.getClassInfo(RuntimeModelBuilder.java:49)
    com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.getClassInfo(RuntimeModelBuilder.java:41)
    com.sun.xml.bind.v2.model.impl.ModelBuilder.getTypeInfo(ModelBuilder.java:189)
    com.sun.xml.bind.v2.model.impl.RegistryInfoImpl.<init>(RegistryInfoImpl.java:51)
    com.sun.xml.bind.v2.model.impl.ModelBuilder.addRegistry(ModelBuilder.java:232)
    com.sun.xml.bind.v2.model.impl.ModelBuilder.getTypeInfo(ModelBuilder.java:201)
    com.sun.xml.bind.v2.runtime.JAXBContextImpl.getTypeInfoSet(JAXBContextImpl.java:327)
    com.sun.xml.bind.v2.runtime.JAXBContextImpl.<init>(JAXBContextImpl.java:198)
    com.sun.xml.bind.v2.ContextFactory.createContext(ContextFactory.java:76)
    com.sun.xml.bind.v2.ContextFactory.createContext(ContextFactory.java:55)
    com.sun.xml.bind.v2.ContextFactory.createContext(ContextFactory.java:124)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    java.lang.reflect.Method.invoke(Method.java:597)
    javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:132)
    javax.xml.bind.ContextFinder.find(ContextFinder.java:286)
    javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:358)
    javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:323)
    javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:244)
    com.arcot.jaxb.KECHPSWI.KECHPSWI.marshal(KECHPSWI.java:117)
    com.arcot.jaxb.servlet.ClientMachine.doPost(ClientMachine.java:39)
    com.arcot.jaxb.servlet.ClientMachine.doGet(ClientMachine.java:84)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

我的开发环境是 Windows 7 上的 Tomcat 6.0、jdk 1.6，有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T08:06:39.990

看起来您有两个不同版本的类 javax.xml.bind.annotation.AccessType。可能是您的类路径中有重复的 jax-api.jar。

# iphone - 如何将图像添加到 UITabBarController

> ID：14079779
> 
> 赞同：1
> 
> 时间：2012-12-29T07:45:29.423
> 
> 标签：iphone, uitabbarcontroller

我正在使用 UITabBarController 并希望将图像添加到它，将整个图像添加到选项卡栏，而不是任何选项卡项。有没有可能，谁能指导一下。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T08:06:22.343

试试这个。可能有帮助

```
 UIImage *tabBackground = [[UIImage imageNamed:@"Your Image"] 
                          resizableImageWithCapInsets:UIEdgeInsetsMake(0, 0, 0, 0)];
// Set background for all UITabBars

[[UITabBar appearance] setBackgroundImage:tabBackground];

// Set background for only this UITabBar

[[tabBarController tabBar] setBackgroundImage:tabBackground]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T08:06:52.657

如果您正在使用`iOS 5`或更高版本，您可以使用`setBackgroundImage`：

```
UITabBar *yourtabBar = [yourtabController tabBar];

[yourtabBar setBackgroundImage:[UIImage imageNamed:@"tabbar.jpg"]]; 
```

# php - 如何从 PHP 返回数据以在 jQuery(ajax) 中使用？

> ID：14079783
> 
> 赞同：0
> 
> 时间：2012-12-29T07:46:21.210
> 
> 标签：php, javascript, jquery, ajax

我必须处理一个简单的登录文件。在许多 Web 教程中，我读到对于 jquery 中的任何 Ajax 请求，回调函数是`function(data)`并且`data`由服务器端脚本返回。

好吧，我的服务器端脚本是 PHP。我想知道如何从 PHP 返回数据，这些数据将存储在 jquery 中`data`，我可以使用条件循环来处理它们。

这是我的jQuery代码：

```
$('#loginform').submit( function() {
        var querystring = $(this).serialize();
        $.post('login.php', querystring, processLI );
        function processLI(data) {
            if (data == 'success'){
            alert("Successful");
            var url = "game.php";    
            $(location).attr('href',url);
            }
            else 
                alert ('Login Failed');
        } 
```

我在我的 php 文件中使用了简单的 return 语句，这似乎根本不起作用。这是`login.php`文件。我刚刚在这里发布了必要的部分。

```
$statement = $connection->prepare("SELECT * FROM users WHERE username = '$username'");
    $statement->execute(array());
    $result = $statement->fetch(PDO::FETCH_ASSOC);

    if ($result['password'] == $safepass) {
        setcookie("Login", true);
        echo 'success';

    }
    else 
        echo "Failure"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T08:13:45.657

尝试这样做，将函数作为参数，而不是调用函数。

```
$('#loginform').submit( function() {
    var querystring = $(this).serialize();
    $.post('login.php', querystring, function(data){
        if (data == 'success') {
            alert("Successful");
            var url = "game.php";    
            $(location).attr('href',url);
        }
        else 
            alert ('Login Failed');
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T07:50:25.223

使用[`echo`](http://php.net/manual/en/function.echo.php)语句输出数据，如果登录成功`echo 'success';`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-29T10:05:29.170

这是关于如何调试 AJAX 请求的答案。首先，使用 Chrome（或 Safari，或安装了 Firebug 插件的 Firefox），然后从设置菜单中打开开发者工具。在网络面板中，您可以看到请求/响应。这可能不是一个直接的答案，但请尝试使用带有“网络面板”的 Chrome 开发人员工具来查看请求/响应/cookies/headers。

这将为您省去猜测的麻烦，它会逐字显示响应。然后你可以下次解决它;）和之后的时间

您是否能够看到请求/响应？如果没有，我建议一个简单的

```
alert(JSON.stringify(data)) 
```

...如果您在使用 Chrome 调试器时遇到问题，请从您的回调函数中获取。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-29T07:57:41.313

尝试将 post 的 dataType 设置为 'html'

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-29T08:08:37.917

```
$('#loginform').submit( function() {
    var querystring = $(this).serialize();
    $.ajax({
        url : 'login.php?'+querystring, 
        cache : false,
        success : function(data) {
            if(data == "success") {
                alert("Successful");
                var url = "game.php";    
                $(location).attr('href',url);
            } else if(data == "failure") {
                alert("Login Failed");
            }
        };
    });
}); 
```

# c++ - '#include "file2.c"' 与 'gcc file1.c file2.c' 不同吗？

> ID：14079784
> 
> 赞同：1
> 
> 时间：2012-12-29T07:46:23.000
> 
> 标签：c++, c, compilation, linker

**如果**您不打算单独重新编译包含的文件，是否有任何理由更喜欢链接器命令而不是包含指令？

PS 如果重要的话，我实际上关心的是 C++ 和 g++，但我认为 gcc 作为通用编译器会更容易识别。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T07:49:17.160

> 是否有任何理由更喜欢链接器命令而不是包含指令

是的。`.c`如果你在这里和那里包含实现 ( ) 文件，你会遇到严重的麻烦。遇到臭名昭著的“符号_MyFunc的多个定义”链接器错误...

（顺便说一句，它也被认为是不好的风格/做法，一般来说，只包含头文件。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T12:45:41.993

如果你真的想要一个长的 C 文件，使用你的编辑器将 file2.c 插入 file1.c，然后删除 file2.c。如果他们总是在一起，那么这（可能）是正确的解决方案。为此使用#include 不是正确的解决方案。

我们将文件拆分为单独的 .c 和 .cpp 文件的原因是它们在逻辑上与其余代码分开做一些事情。当程序很大时，单独编译每个单元是一个好主意，但将事物拆分为单独文件的主要原因是为了显示每个代码单元的独立性。这样，您可以查看影响此特定文件的其他部分（查看包含的标题）。如果类是 .cpp 文件的本地类，则您知道该类未在系统中的其他地方使用，因此您可以安全地更改该类的内部结构，而不必担心其他组件会受到影响，例如。另一方面，如果所有内容都在一个大文件中，那么很难了解影响了什么以及可以安全更改的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T13:00:05.360

这就是区别。`file1.c`：

```
#include <stdio.h>
static int foo = 37;
int main() { printf("%d\n", foo); } 
```

`file2.c`：

```
static int foo = 42; 
```

这两个微不足道的模块可以很好地编译`gcc file1.c file2.c`，即使`file2.c`' 的定义`foo`从未使用过。`static`标识符仅在翻译单元（C 的版本，通常称为模块）中可见。

当您`#include "file2.c"`进入 时`file1.c`，您有效地插入`file2.c`，`file1.c`在两个文件现在成为一个翻译单元之前导致标识符冲突。

通常，绝不`#include`是 C 或 C++ 源文件。只有`#include`标题。

# iphone - 如何访问 iOS 上所有正在运行的应用程序的统计信息？

> ID：14079787
> 
> 赞同：-1
> 
> 时间：2012-12-29T07:47:04.363
> 
> 标签：iphone, ios

是否可以开发一个应用程序来访问其他应用程序的所有统计信息？例如，我想知道：

1.  应用程序启动时
2.  每个特定应用程序在前台运行多长时间（总组合时间）
3.  每个应用程序在后台运行了多长时间？

（我做了一些研究，知道可以获得所有应用程序，但是提到的这些信息是否可用？参考：[在后台进程中运行的应用程序列表](https://stackoverflow.com/questions/8633388/list-of-applications-running-in-background-process)）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T10:56:10.530

我认为除非您越狱您的设备，否则您将无法轻松访问系统进程/正在运行的应用程序列表。如果您只想衡量自己的应用程序，可以使用 Google Analytics 来了解应用程序的使用情况。

如果您想测量系统/其他应用程序，您将不走运。特别是在最终用户设备上。

# ember.js - 使用 Ember.js 和 Ember.Router 将我的 application.handlebars 分解为单独的模板

> ID：14079791
> 
> 赞同：2
> 
> 时间：2012-12-29T07:47:29.980
> 
> 标签：ember.js

`ember.js`我正在使用和`ember-rails`gem构建前端（在 Ruby on Rails 之上） 。

我的（ember）应用程序由模型、视图、控制器和`application.handlebars`描述我的 UI 的模板组成。

**分解此`application.handlebars`文件以便我可以管理 UI 的最佳做法是什么？**例如，我想在页面顶部有导航。

我尝试使用`Ember.Router`单独的`navigation.handlebars` （带有 NavigationView 和 NavigationController）的`{{outlet}}`helper 无济于事。这是路由器的外观：

```
App.Router = Ember.Router.extend(
  enableLogging:  true
  root: Ember.Route.extend(
    index:
      route: '/'
      connectOutlets: (router, context) =>
        router.get('applicationController').connectOutlet('navigation')
) 
```

和`application.handlebars`

```
<h1>Lots of HTML that I want to break up</h1>
{{outlet}} 
```

如果您需要更多信息，请告诉我...谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-29T13:36:44.220

根据我的理解，假设您想要 3 个部分（可以是任意数字）页眉、内容和页脚，您可以执行以下操作

```
<script type="text/x-handlebars" data-template-name="application">
  {{view MyApp.HeaderView}}
  {{#view MyApp.ContentView}}
    {{outlet}}
  {{/view}}
  {{view MyApp.FooterView}}
</script>

<script type="text/x-handlebars" data-template-name="app-header">
  All your Header related HTML
</script>

<script type="text/x-handlebars" data-template-name="app-content">
  HTML related to content
  {{yield}} //this will be explained at the end
  More HTML if you want
</script>

<script type="text/x-handlebars" data-template-name="app-footer">
  HTML related to footer
</script>

MyApp.HeaderView = Ember.View.extend({
  templateName: 'app-header'
})

MyApp.ContentView = Ember.View.extend({
  templateName: 'app-content'
})

MyApp.FooterView = Ember.View.extend({
  templateName: 'app-footer'
})

MyApp.ApplicationView = Ember.View.extend({
  templateName: 'application'
}) 
```

简而言之`{{yield}}`，给定视图的块助手中的任何内容都在那里，在上面的示例中`MyApp.ContentView`，把手中的`{{outlet}}`定义`{{#view MyApp.ContentView}}`被插入在`{{yield}}`

类似的行上，让我展示**layoutName**属性和**templateName**之间的区别财产，

```
App.someView = Ember.View.extend({
  tagName: 'a',
  templateName: 'a-template',
  layoutName: 'a-container'
})

<script type="text/x-handlebars" data-template-name="a-template">
  Hi There
</script>

<script type="text/x-handlebars" data-template-name="a-container">
  <span class="container">
    {{yield}}
  </span>
</script> 
```

将导致以下 HTML

```
 <a class="ember-view" id="ember235">
    <span class="container ember-view" id="ember234">
      Hi There
    </span>
  </a> 
```

使用这些概念在您的情况下拆分应用程序把手，就像

```
{{view App.NavigationView}}
{{outlet}} 
```

# 根据最新的余烬更新

新的ember支持`partials`类似于rails，现在我们可以修改上面使用`{{partial}}`如下：

```
{{partial "header"}}
{{outlet}}
{{partial "footer"}} 
```

Ember 遇到此模板时会查找名称为**_header**的模板（类似于 rails）并插入模板（页脚也是如此）

如果想关联一个控制器，我们可以使用`{{render}}`helper

```
{{render "sidebar"}} 
```

在handlebars中的指定位置插入名称为**sidebar**`App.SidebarController`的模板，此外它也与之关联，
**注意：**我们不能`{{render 'sidebar'}}`在同一个handlebars文件中多次使用。

但是，如果您想使用小部件，例如查看给定页面中的多个位置，请使用`{{view}}`帮助程序

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T08:15:24.653

对于这个问题，您需要做的是考虑哪些视图发生了变化以及这些变化发生在哪里。例如，如果您有一个导航部分和一个主要部分，那么请考虑这些部分中的每一个如何随着应用程序的状态而变化。确保只`{{outlet}}`为动态内容创建一个，否则事情会变得一团糟，应用程序会变慢。然后设置您的模板和路由器，类似于下面的示例。

**模板：**

```
<script type="text/x-handlebars" data-template-name="application">
    <!--Your application template goes here-->
    {{outlet navigation}}
    {{outlet body}}
</script>
<script type="text/x-handlebars" data-template-name="navigation">
    <!--Your navigation template goes here-->
</script>
<script type="text/x-handlebars" data-template-name="main-one">
    <!--Your mainOne template goes here-->
</script>
<script type="text/x-handlebars" data-template-name="main-two">
    <!--Your mainTwo template goes here-->
</script> 
```

**注意：**您可以`{{outlet}}`在任何视图模板中更改更多子状态

**Javascript：**

```
window.App = Em.Application.create({
    ApplicationView: Em.View.extend({
        templateName: "application"
    }),
    ApplicationController: Em.Controller.extend({
    }),
    NavView: Em.View.extend({
        templateName: "navigation"
    }),
    NavController: Em.Controller.extend({
    }),
    MainOneView: Em.View.extend({
        templateName: "main-one"
    }),
    MainOneController: Em.Controller.extend({
    }),
    MainTwoView: Em.View.extend({
        templateName: "main-two"
    }),
    MainTwoController: Em.Controller.extend({
    })
    Router: Em.Router.extend({
        root: Em.Route.extend({
            index: Em.Route.extend({
                route: '/',
                connectOutlets: function(router,context) {
                    router.get("applicationController").connectOutlet("navigation","nav");
                    router.get("applicationController").connectOutlet("body","mainOne");
                }
            }),
            otherState: Em.Route.extend({
                route: '/other-state',
                connectOutlets: function(router,context) {
                    router.get("applicationController").connectOutlet("navigation","nav");
                    router.get("applicationController").connectOutlet("body","mainTwo");
                }
            }),

        })
    })
});
App.initialize(); 
```

**注意：** applicationController 必须扩展而`Controller`不是`ObjectController``ArrayController`

# android - 动态删除片段并保存其 UI 转换

> ID：14079795
> 
> 赞同：6
> 
> 时间：2012-12-29T07:48:23.187
> 
> 标签：android, android-fragments

我有几个片段可以替换另一个片段。这些片段的 UI 发生了变化，我需要保持它的新状态。所以代码看起来很简单：

```
 FragmentManager fragmentManager = getSupportFragmentManager();
    FragmentTransaction fragmentTransaction = fragmentManager
            .beginTransaction();

    if (mStepTwo == null) {
        mStepTwo = new QuizStepTwo();
        mStepTwo.setListener(mStepTwoListener);
    } else {
        fragmentTransaction.remove(mStepTwo);
    }

    fragmentTransaction.replace(R.id.step_holder, mStepTwo);
    fragmentTransaction.addToBackStack("second_step");

    fragmentTransaction.commit(); 
```

但是，当我用第一步替换第二步时，例如按下后退按钮，它的 UI 状态会回滚到初始状态。

我如何保持状态？OnSaveInstanceState ？或者更舒服的东西？

类似的问题：[Android Fragment view state within a tab host](https://stackoverflow.com/questions/7446006/android-fragment-view-state-within-a-tab-host) , [How to restore Android Fragment view state](https://stackoverflow.com/questions/8701294/how-to-restore-android-fragment-view-state)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T11:08:07.260

我没用过这个，所以里程可能会有所不同。您可以尝试[`FragmentManager.saveFragmentInstanceState`](http://developer.android.com/reference/android/app/FragmentManager.html#saveFragmentInstanceState%28android.app.Fragment%29)在替换 Fragment 时使用该方法，然后[`Fragment.setInitialSavedState`](http://developer.android.com/reference/android/app/Fragment.html#setInitialSavedState%28android.app.Fragment.SavedState%29)在恢复 Fragment 时使用该方法。从文档中，听起来它可能仅在制作相同类型的新片段时才有效，因此不确定这是否适用于您当前的实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T06:44:04.930

[这个问题（及其解决方案）](https://stackoverflow.com/questions/11353075/how-can-i-maintain-fragment-state-when-added-to-the-back-stack)看起来与您尝试做的类似。

但是，我能想到的一个替代解决方案*不是*用第二个片段替换第一个片段，而是*隐藏*它（用`fragmentTransaction.hide()`），或者分离。这样，当用户按下片段时`BACK`，片段将被显示并且其状态将保持不变。它可能需要更多内存，但它应该仍然可以工作，因为片段不会被破坏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-29T09:36:29.060

如果状态取决于您的应用数据，最好将它们保存在 SharedPreferences 文件中并使用它来构建 UI 元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-05T05:16:13.547

看一下[片段文档示例](http://developer.android.com/guide/components/fragments.html#Example)：

您可以使用 onSaveInstanceState 方法来存储您的状态

```
@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putInt("curChoice", mCurCheckPosition);
} 
```

然后在 onActivityCreated 回调中检索它

```
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    if (savedInstanceState != null) {
        // Restore last state for Fragment documentation examplechecked position.
        mCurCheckPosition = savedInstanceState.getInt("curChoice", 0);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T10:40:41.390

add 和 replace 的区别在于我们添加前一个片段时不会暂停或停止。当我们尝试替换一个片段时，前一个片段会经历一个暂停和停止的循环。但是当我们将其放入堆栈时，前一个片段将保存在堆栈顶部。并且在诸如 back-press 之类的事件上被检索和加载。

因此，如果您的解决方案需要您的 UI 永远不会停止或卸载，您应该将其隐藏并在其顶部添加一个片段。或者如果可以卸载片段并且可以使用某种类型的参数重新生成 UI。因此，您可以在片段内存本身中有一些参数来确定它应该保存哪些统计信息。默认情况下，它将尝试保持一些默认状态。但是休息一下，您可以创建对象并将其附加到片段。

至于onSaveInstanceState，它会在包含fragment的activity关闭时调用，例如home press等事件。

例如

```
public class MainActivityFragment1 extends Fragment {
    int alreadyCreated = 0;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        if (alreadyCreated == 1) { // restoreLayout();
            Log.i("MainActivity", " Fragment already created and can be restored Fragment 1");
        }else
            Log.i("MainActivity", " Running Once Fragment 1");

        alreadyCreated = 1;

    01-07 16:08:07.009: I/MainActivity(14722):  Running Once Fragment 1
    01-07 16:08:09.239: I/MainActivity(14722):  MainActivity I on pause
    01-07 16:08:09.239: I/MainActivity(14722):  MainActivity I on stop
    01-07 16:08:09.239: I/MainActivity(14722):  Running Once Fragment 2
    01-07 16:08:13.499: I/MainActivity(14722):  Back Pressed
    01-07 16:08:13.619: I/MainActivity(14722):  MainActivity II on pause
    01-07 16:08:13.619: I/MainActivity(14722):  MainActivity II on stop

01-07 16:08:13.619: I/MainActivity(14722):  MainActivity II on stop
01-07 16:08:13.619: I/MainActivity(14722):  MainActivity II on stop
01-07 16:08:13.619: I/MainActivity(14722):  Fragment already created and can be restored Fragment 1 
```

# apache-poi - Apache POI：如何格式化数字单元格值

> ID：14079796
> 
> 赞同：3
> 
> 时间：2012-12-29T07:48:27.720
> 
> 标签：apache-poi

我正在使用 Apache POI 3.9 进行 XLS/XLSX 文件处理。

在 XLS 表中，有一列带有数值，例如“3000053406”。

当我用 POI 阅读它时...

```
cell.getNumericCellValue() 
```

它给了我像“3.00E+08”这样的价值。这在我的应用程序中造成了巨大的问题。

在 Apcahe POI 中读取数据时如何设置数字格式？

我知道有一种方法是将列设置为“文本”类型。但我想知道在读取数据时 Apache POI 端是否有任何其他方式。或者我们可以使用简单的 java DecimalFormatter 对其进行格式化吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T09:05:46.223

这个经常出现....

选择[我过去对一个几乎相同的问题的答案之一](https://stackoverflow.com/a/7100727/685641)

> 您要做的是使用[DataFormatter 类](http://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/DataFormatter.html)。您将此单元格传递给它，它会尽力返回一个字符串，其中包含 Excel 会为您显示该单元格的内容。如果你给它传递一个字符串单元格，你会得到这个字符串。如果您传递一个应用了格式规则的数字单元格，它将根据它们格式化数字并返回字符串。
> 
> 对于您的情况，我假设数字单元格应用了整数格式规则。如果您要求 DataFormatter 格式化这些单元格，它会返回一个包含整数字符串的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-13T12:16:24.280

问题可能与 Java 严格相关，也与 POI 无关。由于您的电话返回双倍，

`double val = cell.getNumericCellValue();`

你可能想得到这个

`DecimalFormat df = new DecimalFormat("#"); int fractionalDigits = 2; // say 2 df.setMaximumFractionDigits(fractionalDigits); double val = df.format(val);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-29T14:15:24.077

使用数字单元格中的双精度值创建 BigDecimal，然后使用

> BigDecimal.toPlainString()

函数将其转换为纯字符串，然后在擦除值后将其存储回同一单元格，从而解决了数值的指数表示的整个问题。

下面的代码为我解决了这个问题。

```
 Double dnum = cellContent.getNumericCellValue();
    BigDecimal bd = new BigDecimal(dnum);
    System.out.println(bd.toPlainString());
    cellContent.setBlank();
    cellContent.setCellValue(bd.toPlainString());
    System.out.println(cellContent.getStringCellValue()); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2016-01-20T06:03:28.610

`long varA = new Double(cellB1.getNumericCellValue()).longValue();` 这将在 variable 中带来确切的值 `varA`。

# mysql - MySQL JOIN、GROUP BY、ORDER BY

> ID：14079799
> 
> 赞同：6
> 
> 时间：2012-12-29T07:48:44.867
> 
> 标签：mysql, sql-order-by

我有一张产品表：

```
CREATE TABLE products (`id` INT); 
```

以及这些产品的图片表：

```
CREATE TABLE images (`id` INT, `product_id` INT, `default` TINYINT(1)); 
```

我需要选择所有产品，并加入图像表，以便`default`首选带有（=1​​）的图像，如果产品没有带有（`default`=1​​）的图像，则带有（`default`=0）的图像将显示在其地方。

* * *

这是一张显示我正在寻找的图像：

![在此处输入图像描述](../Images/9e0ff13454a1288957cd11e61b2a67c1.png)

* * *

现在我有这个查询：

```
SELECT p.id, i.id
FROM products AS p
LEFT JOIN (
    SELECT product_id, url
    FROM images
    ORDER BY default
) AS i
ON p.id = i.product_id
GROUP BY p.id
ORDER BY p.name 
```

哪个不优先考虑“默认”图像。子查询似乎没有做任何事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T08:07:55.497

## [SQLFiddle 演示](http://sqlfiddle.com/#!2/4d948/1)

```
select products.id,
       coalesce(t1.mid,t2.mid) as image_id      

from products
left join (select min(id) mid,product_id 
                  from images where `default`=1
                  group by product_id ) t1
        on products.id=t1.product_id
left join (select min(id) mid,product_id 
                  from images where `default`=0
                  group by product_id ) t2
        on products.id=t2.product_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T07:55:50.973

看起来我只是在子查询的 ORDER BY 中遗漏了一个“DESC”

:\

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T07:56:10.410

如果您只想为产品显示一张图片，请尝试以下查询 -

```
SELECT p.*, i.* FROM products p
  JOIN (SELECT * FROM images ORDER BY `default` DESC) i
    ON p.id = i.product_id
GROUP BY p.id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-29T07:58:07.087

试试这个：

```
SELECT 
  p.id productid, 
  IFNULL(i1.id, i2.id)
FROM products    AS p
LEFT JOIN images AS i1  ON p.id = i1.product_id
                       AND i1.`Default` = 1  
LEFT JOIN images AS i2  ON p.id = i2.product_id
                       AND i2.`Default` = 0
GROUP BY p.id; 
```

# prolog - Prolog 中的否定失败是如何工作的？

> ID：14079805
> 
> 赞同：1
> 
> 时间：2012-12-29T07:49:33.650
> 
> 标签：prolog, negation-as-failure

我想知道Prolog如何解决这个程序：

```
test(X, Y).
test(X, X):-!, fail. 
```

我用谷歌搜索了“否定失败”，但我很困惑！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-29T10:24:06.280

考虑以下示例：

```
father(nick, john). 
```

我们使用谓词father(X,Y)来表示X的父亲是Y。让我们查询数据库：

```
?- father(nick,X).
X = john.

?- father(john,Y).
false. 
```

在这两种情况下，我们都询问谁是某人的父亲（分别是尼克、约翰）。在第一种情况下，prolog 知道答案 (john)，但在第二种情况下它不知道，所以答案是错误的，这意味着 john 没有任何父亲。我们可能会期望，因为我们没有给 prolog 提供有关 john 父亲的任何信息，它会以`unknown`. 那将是一个开放的世界，如果不知道某些事情，我们不会认为它是错误的。相反，在 prolog 的封闭世界中，如果我们不知道某件事，我们就认为它是错误的。

请注意，我们说我们不知道约翰的父亲是谁，基于知道任何人都*必须*有父亲的世界不是一个开放的世界；它可以很容易地在 prolog 中建模：

```
data_father(nick, john).
father(X,Y):-
    data_father(X,Y) -> true ; true. 
```

另一方面，在开放世界序言中，您将编写事实和反事实：

```
father(nick, john).
not father(adam, X). 
```

这就是失败的否定。但是，这不是您的程序中发生的情况：

```
test(X, Y).
test(X, X):-!, fail. 
```

无论参数的值如何，第一个子句总是会成功。事实上，正因为如此，给参数命名是没有意义的，prolog 会给你一个单例警告；您可以将子句写为`test(_, _)`.

另一方面，第二个子句总是会失败。它可能以两种方式失败：（1）参数可能不同（2）参数是统一的，因此 prolog 移动到主体然后失败。

正是因为 prolog 使用的是封闭世界模型，所以没有任何意义的子句（没有副作用（但无论如何这被认为是不好的做法））总是失败。相反，这些额外的调用会导致您的程序运行速度变慢并使用更多内存。

还值得注意的是 cut ( `!/0`) 在这里什么都不做，因为当你到达它时，没有更多的选择点。但是考虑这个例子：

```
test(X, Y).
test(X, X):-!, fail.
test(X, 42).

?- test(1,42).
true ;
true.

?- test(42,42).
true ;
false. 
```

在这两种情况下，prolog 都会创建 3 个选择点，每个子句一个。在第一种情况下，Prolog 将成功匹配第一个子句的头部并成功，因为没有主体。然后，它将无法匹配第二个子句的头部，并且主体不会被“执行”。最后，它将匹配第三个子句的头部并成功，因为没有主体。

但是，在第二种情况下：Prolog 将成功匹配第一个子句的头部并且成功，因为没有主体。然后，它将成功匹配第二个子句的头部；剪切将删除所有其他选择点，然后由于`fail`. 因此，prolog 不会尝试第三个子句。

自从你提到它以来，关于否定失败的几句话。作为失败的否定是基于封闭世界的假设；因为我们假设任何不能从我们已有的事实中推断出来的东西都是错误的，如果我们*不能*证明某件事，就意味着它的反面被认为是正确的。例如，考虑一下：

```
father(nick, john).
fatherless(X) :- \+ father(X, _). 
```

和

```
?- fatherless(nick).
false.

?- fatherless(john).
true. 
```

相反，在具有以下代码的开放世界序言中：

```
father(nick, john).
not father(adam, X).
fatherless(X) :- \+ father(X, _). 
```

`fatherless/1`只会为`adam`_`unknown`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T08:10:59.793

第一个子句`test(X, Y).`说 test/2 对于任何参数模式都是无条件的。

第二个子句`test(X, X):-!, fail.`说，当使用*统一*的第一个和第二个参数调用 test/2 时，没有更多的选择，然后失败（请注意，总是会失败，因为参数模式正在排除第一个参数 \= 第二个隐含的实例化模式）。

[在“封闭世界假设](http://en.wikipedia.org/wiki/Closed_world_assumption)”下，如果与逻辑否定相同，则操作效果。

# html - html5 视频不播放 mp4 错误“Invalid Source”？

> ID：14079808
> 
> 赞同：9
> 
> 时间：2012-12-29T07:50:07.730
> 
> 标签：html

我正在尝试 HTML5 视频标签，我已经下载了一个 Microsoft 示例并尝试运行它，但发生了一件奇怪的事情，它播放来自 URL（注释标签）的视频，但对于本地 mp4 文件，它不显示错误并显示消息“无效来源”

这是我的代码，请指导我应该怎么做才能使其正确运行本地文件？

谢谢

```
 <!DOCTYPE html>
<html>
<head>
</head>
<body>
    <!--<video src="http://www.bing.com/az/hprichv/?p=Butterfly_Clipcanvas_223479_EN-US.mp4"
        autoplay loop>
    </video>-->
    <video controls src="hprichv.mp4" width="300" height="200" autoplay loop>
    </video>
</body>
</html> 
```

**编辑**

网页和视频文件都位于同一个文件夹中。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-07-18T02:47:31.267

Im on Windows 7 Pro. I develop locally and then host/serve remotely. Trying to load a local mp4 file while developing locally ran into this identical situation. No combination of using localhost/myvideo.mp4 or 127.0.0.1/myvideo.mp4 or /aaa/myvideo.mp4 or myvideo.mp4 in same directory as file got things to work...but referencing a full URL like `http://www.mywebsite.com/myvideo.mp4` did, as above.

On local machine, Chrome shows no error messages...just shows black box with controls. No clues as to whats up. Switched to IE and it showed the black box and controls and the error message. 'Invalid source'

I focused on @steveax question and Mime types.

Turns out IIS in this version of windows/IIS does not have a MIME type setup for .mp4\. No clue why not...but not.

To add the MP4 MIME type, open *Internet Information Services* (IIS) Manager and follow these steps:

*   Highlight **Default Web Site** on the left panel;
*   Double-click **MIME Types** on the right panel;
*   Scroll down the list and notice that there is no **.mp4**;
*   On the right panel again, click **Add**: at the first field, write `.mp4` and on the field below write `video/mp4`
*   Click OK and you are done.

Restart IIS!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-22T17:54:15.443

我遇到了这个问题，发现不支持视频编解码器。

获取视频转换器软件（如 Oxelon - 它是免费的）并选择输出为 .mp4（甚至源是 .mp4）。选择视频编解码器为“H264”，音频编解码器为“AAC”。这将解决您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-24T09:56:52.430

我有同样的问题

**对于 Internet Explorer**

我使用 FormatFactory，为音频设置 AAC 编码，为 mp4 格式的输出设置 H264，在“高质量和大尺寸”中

**对于谷歌浏览器**

*借助 Free WebM Video Converter*，我将原始视频转换为`webm`格式（确保取消选中要安装广告的所有内容）。

 *这花了很长时间，但后来它在 Chrome 中工作了。

```
<video controls>
  <source src="thevideo.mp4" type="video/mp4">
  <source src="thevideo.webm" type="video/webm">
</video> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-03T14:55:57.347

我有一个类似的问题，但它只适用于 IE 11。Firefox 效果很好。

在 IE 上，如果我转到兼容性视图并将“localhost”添加到列表中，该框会完全消失。*

# android - adb connect报错怎么处理？

> ID：14079813
> 
> 赞同：2
> 
> 时间：2012-12-29T07:50:49.443
> 
> 标签：android, adb

我之前可以连接 adb connect 。但是在我重新启动计算机并再次连接后，它出现了错误： ![在此处输入图像描述](../Images/36547821e40859beb8c4facdfdeca833.png)

任务管理器中没有 adb 服务器。所以 adb kill-server 没有用。我没有连接usb，无法重启adb。

除了重启电脑还有其他解决办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T09:15:10.843

您的 USB 未连接，所以我可以假设，您正在尝试通过 wifi 连接它。

1）要通过wifi连接您的设备，您的android设备需要**root**

2）从Play商店为您的Android设备下载模拟器。

3）在模拟器中编写以下代码。

```
su
setprop service.adb.tcp.port 5555
stop adbd
start adbd 
```

4）现在打开您的终端并尝试再次连接。它应该像一个魅力。但请确保给定的 IP 地址对于您的 android 设备是正确的。

**如果问题仍然存在**，你可以试试这个。Play商店中有许多第三方应用程序，看看会有用。

前任。[adb](https://play.google.com/store/apps/details?id=siir.es.adbWireless&hl=en)[无线](https://play.google.com/store/apps/details?id=com.ttxapps.wifiadb&hl=en)_

# django - 在带有两个变量的模板中使用'for'：django

> ID：14079815
> 
> 赞同：0
> 
> 时间：2012-12-29T07:51:23.327
> 
> 标签：django, django-templates

我想将两个数组发送到 django 中的模板，例如 first=['a','b','c'] 和 second=['1','2','3']。

```
return render_to_response('temp.html',{'first':first, 'second':second}, context_instance=RequestContext(request)) 
```

现在在模板中，我想要一个在两个数组中移动的对象。就像是：

```
{% for var1 in first and var2 in second %}
        ...
    {% endfor %} 
```

你能告诉我是什么方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T08:01:55.290

你可以在你的视图中使用 zip

```
mylist = zip(first , second) 
```

将其传递给模板

```
return render_to_response('template.html', {'liste': mylist, ... 
```

试试这个

```
{% for item1, item2 in liste %} 
```

在您的模板中。

希望对你有帮助

您也可以尝试使用[https://github.com/gabrielgrant/django-multiforloop](https://github.com/gabrielgrant/django-multiforloop)

# android - 在哪个标准中将代码分成 Android 应用程序中的包

> ID：14079818
> 
> 赞同：2
> 
> 时间：2012-12-29T07:51:39.733
> 
> 标签：android

我正在使用 Eclipse 开发一个 Android 应用程序，它在一个名为 com.companyname.appname 的包中共有 29 个类。这 29 个类包括活动、列表片段、加载器、服务、DbHelper、Jsonparser、适配器和网络连接类。

我打算像下面这样分开包裹，

***方法一：***

*   com.companyname.appname.activities（包括应用程序的所有**活动**类）
*   com.companyname.appname.services（包括应用程序的所有**服务**类）
*   com.companyname.appname.loaders（包括应用程序的所有**加载器**类）
*   com.companyname.appname.fragments（包括应用程序的所有**片段**类）
*   com.companyname.appname.database（包括应用程序的所有**数据库**助手类）
*   com.companyname.appname.utilities（包括应用程序的其他**实用程序类**（Jsonparser、Netwrok 连接检测、SimpleCursorAdapter））

***方法二：***

*   为每个 Activity 分离每个包（它包括相关的片段、加载器、实用程序、服务等）

哪种方法有效？或者我需要有效地以不同的方法分离包？android代码设计中包分离的所有最佳实践是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T08:18:58.770

包的目的只是为了组织。第一种方法可以让您无需过多考虑即可放置新类并轻松找到它们。

第二种方法有时会更难，因为有些类可以分为几个包。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T08:26:20.923

在很大程度上，这是一个品味问题。至于某些标准，与其他类型的封装一样，可以应用以下内容：

1.  松耦合

2.  紧密的凝聚力

换句话说，避免无关部分之间不必要的依赖关系，并将属于一起的部分组合在一起。

想想你的包可能在另一个应用程序或另一种类型的构建中重用：手机/平板电脑、谷歌/亚马逊。或者，相反，那些对特定案例过于具体而无法重用的案例。

这种或其他类型的推理将帮助您根据某些需求而不是任意选择来构建代码。

编辑：一个轶事类比。微软关于将文件排列到文件夹中的建议，AFAIK，曾经解释过他们的“面向对象”用户体验。一种方法：拥有 Word 文档、Excel 电子表格等文件夹。另一种是商业、娱乐等。同样的方法适用于任何包装。

# c++ - 为什么这个特殊的 std::map 初始化工作？

> ID：14079826
> 
> 赞同：-1
> 
> 时间：2012-12-29T07:54:05.167
> 
> 标签：c++, map

我试图了解如何初始化 std::map。我在网上看到了以下初始化地图的方式（注意`Test& t = mylist[0]`部分）：

```
#include <iostream>
#include <map>

using namespace std;

class Test
{
  public:
   Test():i_(0) { cout<<"Calling constructor"<<endl;}
   ~Test() { cout <<"Calling destructor"<<endl;}
  private:
   int i_;
};

int main(int argc, char **argv)
{
  map<unsigned,Test> mylist;
  cout << "Before "<<mylist.size()<<endl;
  Test& t = mylist[0];
  cout << "After "<<mylist.size()<<endl;
  return 0;
} 
```

天真地，我本来期望以下工作，

```
Test t;
mylist[0] = t; 
```

但是想想为什么第一种方法行得通，我的大脑很痛！对象是如何初始化的？这是暂时的，因为从技术上`mylist[0];`单独编写表达式会创建一个对象（但是如何？）

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T08:01:22.327

根据[**cppreference.com**](http://en.cppreference.com/w/)：

> [ [**std::map::operator[]**](http://en.cppreference.com/w/cpp/container/map/operator_at) ] 使用 key 作为键和默认构造的映射值将新元素插入容器，并返回对新构造的映射值的引用。如果具有键的元素`key`已经存在，则不执行插入并返回对其映射值的引用。

这意味着当`Test& t = mylist[0];`被执行时，`Test()`被调用（你会看到“调用构造函数”）并且这个对象被插入到带有键的`map`“ ”中。由于在调用此键时映射中没有具有该键的元素，因此此操作将大小恰好增加一。`mylist``0``mylist`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T07:59:37.413

是的`[]`，std::map 上的运算符将使用值类的默认构造函数创建一个新对象。

[http://www.cplusplus.com/reference/map/map/operator[]/](http://www.cplusplus.com/reference/map/map/operator%5B%5D/) :

> 如果 x 不匹配容器中任何元素的键，则该函数使用该键插入一个新元素并返回对其映射值的引用。请注意，这总是将映射大小增加一，即使没有为元素分配映射值（该元素是使用其默认构造函数构造的）。

如果该类没有默认构造函数，则会出现编译器错误。

# c++ - Eclipse 不解析 gcc 输出

> ID：14079829
> 
> 赞同：0
> 
> 时间：2012-12-29T07:54:25.137
> 
> 标签：c++, linux, eclipse, gcc

我使用 eclipse-3.5 作为 linux gentoo 的 C/C++ 编辑器。该项目由 CMake 生成。据我所知，eclipse 可以在构建项目时解析 GCC 的输出，因此您可以单击任何错误消息并跳转到导致该错误的字符串。但事实并非如此。这是3.5的功能吗？

请不要建议“使用其他编辑器”。我喜欢 Eclipse 的 ctrl+tab 和 ctrl+click、代码解析和重构（重命名变量）能力 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-19T12:39:03.080

如果您使用 cmake 并且在 cmake makefile 中使用不存在的路径，Eclipse 有时会出现此问题。检查您的 cmake makefile，确保您使用的每个路径都存在，然后它应该可以工作。

# mfc - 此指针值在 MFC SDI 应用程序中更改

> ID：14079831
> 
> 赞同：0
> 
> 时间：2012-12-29T07:54:37.917
> 
> 标签：mfc, this, sdi

现在我有以下 MFC SDI 应用程序代码，此代码来自我的视图类：

```
void CNew_demo_appView::OnItemUpdate()
{
    // TODO: Add your command handler code here
    int i=this->GetListCtrl().GetSelectionMark();//get the selected item no
    this->GetDocument()->unpacker.GetInformation(i,(BYTE*)(&(this->GetDocument()->fpga_info)));
    UpdateFpgaAttrib updatefpgadlg;
    updatefpgadlg.DisplayInfo(this->GetDocument()->fpga_info);
    updatefpgadlg.DoModal();
}

void CNew_demo_appView::SetItemFpgaAttrib(int index,FPGA_INFO info)
{
    this->GetDocument()->fpga_items[0]=info;
} 
```

如你所见，我得到了一个名为UpdateFpgaAttrib 的CDialog Derived 类，我在发出菜单命令时调用的OnItemUpdate 函数中将它实例化，然后DoModal() 弹出Dialog 窗口，在那个对话框上，有一个按钮，当点击它会调用属于View Class的SetItemFpgaAttrib函数，

```
((CNew_demo_appView*)this->GetParent())->SetItemFpgaAttrib(0,info); 
```

这就是问题所在，当这个 SetItemFpgaAttrib 使用这个指针引用一些数据时，它总是会出现一些访问冲突错误，当我在其他 View 类函数中调用这个函数时，就可以了，

```
void CNew_demo_appView::test()
{
    SetItemFpgaAttrib(0,this->GetDocument()->fpga_info)
} 
```

当被弹出对话框按钮触发时，它会导致问题，我在 SetItemFpgaAttrib 上设置断点，我发现这个指针值是正常的 0x0041237f 的东西，但是当被按钮触发时，它总是 0x00000001，GetDocument 调用总是导致问题. 为什么 this 指针值发生了变化，是由上下文还是其他原因引起的？我正在使用 Vs2008 SP1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T11:38:47.577

问题解决了，我只想把答案放在这里，给有一天也遇到这个问题的人。问题是

```
((CNew_demo_appView*)this->GetParent())->SetItemFpgaAttrib(0,info); 
```

GetParent() 是在 CWnd 中实现的，它返回一个 CWnd*，这就是问题所在，SetItemFpgaAttrib(0,info) 是我的 CDialog-Derived 类 CNew_demo_appView 的一个函数，它不是 CWnd 的成员，所以返回的 CWnd*指针无法获取该函数的代码，如果您像我一样这样做，您将访问一些错误的地方并且会出现违反访问错误等。我需要一个返回原始 CNew_demo_appView* 指针值的函数，即 m_pParentWnd 中的那个是需要的值（当我进入 CWnd::GetParent 函数时我就知道了），而默认的 GetParent 是这样做的：

```
return (CWnd*)ptr; 
```

为了解决这个问题，我只是在我的 CDialog-Derived 类中添加了另一个函数：

```
CWnd* UpdateFpgaAttrib::GetParentView(void)
{
    return this->m_pParentWnd; //just return the parent wnd pointer
} 
```

然后调用它而不是默认的 GetParent：

```
CNew_demo_appView* view=(CNew_demo_appView*)this->GetParentView(); 
```

然后一切正常。

因此得出结论：GetParent 中的 CWnd* 强制转换改变了指针的值。

# node.js - 如何更改 Bower 的默认组件文件夹？

> ID：14079833
> 
> 赞同：481
> 
> 时间：2012-12-29T07:55:03.797
> 
> 标签：node.js, bower

我正在制作一个使用来自 twitter 的 bower 的新项目。我创建了一个`component.json`来维护我所有的依赖项，比如 jquery。然后我运行`bower install`它将所有内容安装在一个名为`components`. 但我需要将组件安装在不同的文件夹中，例如`public/components`.

我尝试将 components.json 编辑为：

```
{
  "name": "test",
  "version": "1.0.0",
  "directory": "public/",
  "dependencies": {
    "jquery": "*"
  }
} 
```

或者：

```
{
  "name": "test",
  "version": "1.0.0",
  "componentsDirectory": "public/",
  "dependencies": {
    "jquery": "*"
  }
} 
```

[如https://github.com/twitter/bower/pull/94](https://github.com/twitter/bower/pull/94)所示，但它不起作用。

* * *

## 回答 #1

> 赞同：931
> 
> 时间：2012-12-29T10:00:40.543

在项目根目录（而不是您的主目录）中创建一个[Bower 配置文件，其内容为：`.bowerrc`](http://bower.io/docs/config/)

```
{
  "directory" : "public/components"
} 
```

再跑`bower install`。

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2014-02-16T23:19:05.767

除了编辑`.bowerrc`以设置默认安装路径外，您还可以为不同的文件类型设置自定义安装路径。

有一个名为[bower-installer](https://www.npmjs.org/package/bower-installer)的节点包，它提供了一个用于管理备用安装路径的命令。

跑`npm install -g bower-installer`

设置你的 bower.json

```
{
  "name" : "test",
  "version": "0.1",
  "dependencies" : {
    "jquery-ui" : "latest"
  },
  "install" : {
    "path" : {
      "css": "src/css",
      "js": "src/js"
    },
    "sources" : {
      "jquery-ui" : [
        "components/jquery-ui/ui/jquery-ui.custom.js",
        "components/jquery-ui/themes/start/jquery-ui.css"
      ]
    }
  }
} 
```

运行以下命令：`bower-installer`

这将安装`components/jquery-ui/themes/start/jquery-ui.css`到`./src/css`等

* * *

## 回答 #3

> 赞同：64
> 
> 时间：2016-01-23T16:08:18.147

我在我的 Windows 10 上遇到了同样的问题。这就是解决我的问题的原因

1.  `bower_components`在您的根文件夹中删除
2.  `.bowerrc`在根目录下创建文件
3.  在文件中写下这段代码`{"directory" : "public/bower_components"}`
4.  运行一个`bower install`

您现在应该在公用文件夹中看到 bower_components 文件夹

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2014-11-19T20:10:35.883

## 值得一提的...

如上所述，其他贡献者使用`.bowerrc`带有 JSON 的文件

`{ "directory": "some/path" }`

是必要的——但是，您在创建该文件时可能会在 Windows 上遇到问题。如果 Windows 提示您添加“*文件名*”，只需使用文本编辑器/IDE，例如 Notepad++。

将 JSON 添加到一个未命名的文件中，将其另存为*.bowerrc* - 一切顺利！

可能是一个简单的假设，但我希望这可以避免其他人不必要的头痛:)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-12-29T08:21:31.063

尝试将`components.json`文件放在`public`应用程序的目录中，而不是根目录，然后重新运行`bower install`...在您的应用程序主目录中尝试此操作：

```
cp components.json public
cd public
bower install 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2015-08-17T12:03:06.730

嗨，我是同样的问题并解决这种方式。

windows 用户和 vs 无法创建 .bowerrc 文件。

在 cmd 中转到任何文件夹

安装任何包含 .bowerrc 文件的软件包，例如

```
bower install angular-local-storage 
```

这个插件包含 .bowerrc 文件。复制它并转到您的项目并粘贴此文件。

并在 Visual Studio - 解决方案资源管理器中 - 显示所有文件并包含项目看到的 .bowerrc 文件

我解决了这种方式:)

# asp.net - 找不到 RedirectToRoute 的匹配路由

> ID：14079835
> 
> 赞同：0
> 
> 时间：2012-12-29T07:55:06.803
> 
> 标签：asp.net, web-applications

```
<%@ Import Namespace="System.Web.Routing" %>
 void Application_Start(object sender, EventArgs e) 
    {
        RegisterRoutes(RouteTable.Routes);
    }
 public static void RegisterRoutes(RouteCollection routes)
    {
        RouteTable.Routes.Add(new System.Web.Routing.Route("{resource}.axd/{*pathInfo}", new System.Web.Routing.StopRoutingHandler()));

        RouteTable.Routes.MapPageRoute("StoreRoute", "{Name}", "~/Default.aspx");

        RouteTable.Routes.MapPageRoute("Listing", "{keyword}/{city}/{area}", "~/Listing.aspx");

    } 
```

在上面的代码中，我写了两条路线，首先是“StoreRout”，它工作正常，第二条“Listing”路线现在不起作用，我的网址是 [http://www.sitename.com/Listing.aspx?keyword=Media&City =浦那&地区=营地](http://www.sitename.com/Listing.aspx?keyword=Media&City=Pune&area=camp)

我想 url 应该像 [http://www.sitename.com/Media/Pune/camp](http://www.sitename.com/Media/Pune/camp) 请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T08:15:19.590

第二条路线的适当 URL 是：

[http://www.sitename.com/Listing/Media/Pune/camp](http://www.sitename.com/Listing/Media/Pune/camp)

# iphone - 将 ARMv7 库链接到 ARMv7s 应用程序

> ID：14079848
> 
> 赞同：1
> 
> 时间：2012-12-29T07:57:56.703
> 
> 标签：iphone, ipad, linker, armv7

根据文献，A6 处理器将执行 ARMv7 代码。我的项目链接失败，因为为 ARMv7 构建了一个库，但该应用程序是为 ARMv7s 构建的。

一条典型的消息是（当我连接 iPad 4 (Retina) 或 iPhone 5 时）：

```
ld: warning: ignoring file /usr/local/ssl/iphoneos/lib//fipscanister.o, file was built for armv7 which is not the architecture being linked (armv7s): /usr/local/ssl/iphoneos/lib//fipscanister.o
ld: warning: ignoring file /usr/local/ssl/iphoneos/lib//libcrypto.a, file was built for archive which is not the architecture being linked (armv7s): /usr/local/ssl/iphoneos/lib//libcrypto.a

Undefined symbols for architecture armv7s:
  "_FIPS_incore_fingerprint", referenced from:
      _FINGERPRINT_premain in fips_premain.o
  "_FIPS_signature", referenced from:
      _FINGERPRINT_premain in fips_premain.o
  "_FIPS_text_start", referenced from:
      _FINGERPRINT_premain in fips_premain.o
ld: symbol(s) not found for architecture armv7s 
```

我知道我可以通过从有效架构 (VALID_ARCHS) 中删除 ARMv7 来解决这个问题，但我不确定为什么，因为 A6 处理器可以执行 A5 目标代码。或者我可以为 ARMv7s 架构执行额外的库构建，但这需要更多的工作并且需要不同的磁盘目录结构。

将 ARMv7 库与 ARMv7s 应用程序链接起来有什么魔力吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T00:36:54.813

[来自Xcode 邮件列表](http://lists.apple.com/archives/xcode-users/2013/Jan/msg00135.html)上的 Jim Grosbach的链接器开关`-allow_sub_type_mismatches`应该允许`ld`继续进行链接。并且来自 Apple 的[`ld`手册页](http://lists.apple.com/archives/xcode-users/2013/Jan/msg00135.html)：

```
 -allow_sub_type_mismatches
             Normally the linker considers different cpu-subtype for ARM
             (e.g. armv4t and armv6) to be different different architec-
             tures that cannot be mixed at build time.  This option
             relaxes that requirement, allowing you to mix object files
             compiled for different ARM subtypes. 
```

还有一个[Changelog 条目](http://opensource.apple.com/source/ld64/ld64-97.2/ChangeLog)详细说明了名为`LD_ALLOW_CPU_SUBTYPE_MISMATCHES`.

但是，我发现`-allow_sub_type_mismatches`根本不适用于 Xcode 4.5.2。Grepping web 揭示了一些 Apple RADAR 的`-allow_sub_type_mismatches`. 例如，参见radar://6134468。

希望它现在已修复，但对于 Apple 及其有缺陷的软件，没有什么让我感到惊讶的。

# drupal - 在 Views 和 Custom Pages 中创建的非节点页面的 Views 中创建列表

> ID：14079854
> 
> 赞同：0
> 
> 时间：2012-12-29T07:58:49.927
> 
> 标签：drupal, drupal-7, drupal-views, drupal-panels

我有一个相当大的企业站点，我需要创建一个动态 HTML 站点地图。类似于[Apple 的站点地图](http://www.apple.com/sitemap)。

考虑到这一点，我创建了一个视图，该视图列出了所有基于节点的页面（即那些创建并与内容类型相关联的页面）。问题是网站上的许多页面是在视图或自定义页面中创建的页面，并且 URL 是在那里定义的。这些不是动态页面，而是构建为不同部分的主页的页面。

示例：站点具有团队内容类型。此内容包含有关员工的信息。节点级别的页面是 site.com/team/john-doe。我已经使用 URL site.com/team 设置了一个查看页面 - 这列出了团队成员的姓名和照片。

网站上的许多部分都是这种情况，因为这些是重要页面，我需要以某种方式创建一个列出这些页面的视图，这样我就可以获取该视图内容窗格和基于节点的内容页面并将其放入自定义页面构建 HTML 站点地图。

由于这些自定义页面未存储在数据库中，因此我不确定如何获取视图以提取该数据并将其呈现为列表。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T19:13:07.813

我认为您希望实现的目标将更多地由菜单驱动，而不是由视图或节点、自定义或其他方式驱动。菜单系统包含对站点上所有路径的引用，无论它们是由节点、视图、分类法、自定义代码等创建的。

您可能会发现菜单视图模块对此很有用： http: [//drupal.org/project/menu_views](http://drupal.org/project/menu_views)

对于稍微不同的方法，我还建议查看站点地图模块： [http ://drupal.org/project/site_map](http://drupal.org/project/site_map)

# .htaccess - 使用 htaccess 对一个变量进行 URL 重写

> ID：14079858
> 
> 赞同：0
> 
> 时间：2012-12-29T07:59:41.867
> 
> 标签：.htaccess, mod-rewrite

我的网址是

```
domain.com/?p=slide&op=1 
```

在这里我重写 domain.com/slide 使用

```
RewriteRule ^([a-zA-Z0-9_-]+)$ index.php?p=$1 
```

我不想重写 op=1，当我输入时它应该可以工作

```
domain.com/slide?op=1 
```

任何帮助，将不胜感激！。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T08:02:50.003

听起来您正在寻找[QSA 标志](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)。

```
RewriteRule ^([a-zA-Z0-9_-]+)$ index.php?p=$1 
```

将使其保留任何查询字符串并将其附加到新 URL。

# scala - XStream注释在scala中不起作用

> ID：14079859
> 
> 赞同：1
> 
> 时间：2012-12-29T07:59:55.307
> 
> 标签：scala, annotations, xstream

我尝试在 scala 中使用 XStream，但看起来 XSteam 中的注释在 scala 中不起作用。在下面的代码中，只有@XStreamAlias 有效，我还附上了一个示例输出，有人可以帮忙吗？

```
@XStreamAlias("posts")
case class Posts(
  @XStreamAsAttribute tag: String,
  @XStreamAsAttribute total: String,
  @XStreamAsAttribute user: String,
  @XStreamImplicit(itemFieldName="post") posts: JList[Post])

@XStreamAlias("post")
case class Post(
  @XStreamAsAttribute description: String,
  @XStreamAsAttribute extended: String,
  @XStreamAsAttribute hash: String,
  @XStreamAsAttribute href: String,
  @XStreamAsAttribute shared: String,
  @XStreamAsAttribute tag: String,
  @XStreamAsAttribute time: String)

<posts>
  <tag>a</tag>
  <total>b</total>
  <user>c</user>
  <posts>
    <post>
      <description></description>
      <extended></extended>
      <hash></hash>
      <href></href>
      <shared></shared>
      <tag></tag>
      <time></time>
    </post>
  </posts>
</posts> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-05-12T09:00:34.030

这是一个老问题，但我最近遇到了类似的问题，我想将我的解决方案添加到它以供将来参考。

我想将 @XStreamAlias 用于案例类及其字段，并根据案例类注释从字符串中反序列化 XML：

```
import com.thoughtworks.xstream.XStream
import com.thoughtworks.xstream.annotations.XStreamAlias
import com.thoughtworks.xstream.io.xml.DomDriver

@XStreamAlias("TOP")
case class example(
                    @XStreamAlias("SUB")
                    val param : String) {

}

val xs = new XStream(new DomDriver())
xs.setClassLoader(getClass.getClassLoader)
xs.processAnnotations(example.getClass)

//OK
xs.fromXML(<TOP><param>x</param></TOP>.toString())

//Error - No such field sub   
xs.fromXML(<TOP><SUB>x</SUB></TOP>.toString()) 
```

问题是注释不适用于类字段。经过一番搜索，我发现 scala 为类字段生成了几个访问器（参见[scala.annotation.meta](http://www.scala-lang.org/api/2.11.8/#scala.annotation.meta.package "2.11.8（写作时当前）scala.annotation.meta")），但默认情况下，注释仅应用于构造函数参数，而不应用于所有访问器。

要使注释也适用于该字段（规范/库对这些概念不明确，因此我假设它仅适用于该字段而不适用于访问器），您可以使用`@(XStreamAlias @field)("SUB")`. 这解决了我的问题：

```
@XStreamAlias("TOP")
case class example2 (
                    @(XStreamAlias @scala.annotation.meta.field)("SUB")
                    val param : String) {

}
val xs2 = new XStream(new DomDriver())
xs2.setClassLoader(getClass.getClassLoader)
xs2.processAnnotations(example.getClass)

//OK
val obj = xs2.fromXML(<TOP><SUB>x</SUB></TOP>.toString()).asInstanceOf[example2]

print(obj)
//> example2(x) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T10:59:42.300

看起来 java 注释不能很好地与 Scala 配合使用。:-) 您必须依靠简单的旧方法语法来设置它。请参阅下面的代码片段，我查看了他们的 API 文档。

```
import com.thoughtworks.xstream.annotations._
import com.thoughtworks.xstream.XStream
import java.util.{ ArrayList => JList }

class Posts(
  val tag: String,
  val total: String,
  val user: String,
  val post: JList[Post])

class Post(
  val description: String,
  val extended: String,
  val hash: String,
  val href: String,
  val shared: String,
  val tag: String,
  val time: String)

object Main extends App {
  val xst = new XStream();
  val pp = new JList[Post]

  val rstv = new Post("a", "b", "c", "d", "e", "f", "g")
  pp.add(rstv)
  val postClazz = classOf[Post]
  val postsClazz = classOf[Posts]
  val pstv = new Posts("p", "q", "r", pp)

  xst.useAttributeFor(postsClazz, "tag")
  xst.useAttributeFor(postsClazz, "total")
  xst.useAttributeFor(postsClazz, "user")

  xst.useAttributeFor(postClazz, "description")
  xst.useAttributeFor(postClazz, "extended")
  xst.useAttributeFor(postClazz, "hash")
  xst.useAttributeFor(postClazz, "href")
  xst.useAttributeFor(postClazz, "shared")
  xst.useAttributeFor(postClazz, "tag")
  xst.useAttributeFor(postClazz, "time")
  val foo = xst.toXML(pstv)
  println(foo)
} 
```

请注意，所有类都必须设置为由 XStream 查找的字段。使用此代码，我得到以下输出：

```
<Posts tag="p" total="q" user="r">
  <post>
    <Post description="a" extended="b" hash="c" href="d" shared="e" tag="f" time
="g"/>
  </post>
</Posts> 
```

希望这可以帮助。

**编辑**：为了扩展我上面所说的内容，诸如`@XStreamAlias`et al 之类的注释已完全从编译的字节码中剥离。这可以通过运行`javap`或`scalap`在那些编译的类上看到。这使我得出结论，Java 注释没有与 scala 注释同等对待（尽管理想情况下应该是 - 如果我犯了任何错误，请随意插话）。会很高兴学到一些东西。:-)

# html - 如何在画布中使用 Kinetic js 制作带有曲线的可拖动文本？

> ID：14079861
> 
> 赞同：1
> 
> 时间：2012-12-29T08:00:40.390
> 
> 标签：html, html5-canvas, kineticjs

任何人都可以有一个想法，如何使用 html5 中的动力学 js 在可拖动文本上制作文本曲线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T07:23:18.673

查看 TextPath 形状。它使您能够沿曲线绘制文本：

[http://kineticjs.com/docs/symbols/Kinetic.TextPath.php](http://kineticjs.com/docs/symbols/Kinetic.TextPath.php)

会尽快出教程。

# udp - 某些进程接收数据

> ID：14079875
> 
> 赞同：0
> 
> 时间：2012-12-29T08:04:17.267
> 
> 标签：udp

我可以同时通过某些进程从网络接收数据吗？

例如，我在 LAN 中有两台计算机。一台计算机在端口 5200 上向另一台计算机发送 udp 数据包。在第二台计算机上，我想通过两个进程接收这个数据包。我可以在同一个 ip 和端口上创建两个套接字吗？

我忘了说Process AI不能修改。换句话说，我想创建接收与进程 A 相同数据的应用程序。（进程 A 和进程 B 位于接收数据的第二台计算机上）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T05:18:03.983

是的！你可以。打开套接字并使用 REUSE_PORT 和 REUSE_ADDRESS 设置 setsockopt。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T08:10:29.883

您如何创建**进程 A**以充当两个**进程 B**和**C**之间的中间件。然后将额外的数据添加到发送到**进程 A**的数据包中，这些数据将用于确定数据的最终目的地 -**进程 B**或**进程**C。

**编辑：** 对于 TCP/IP，要准确回答您的问题“否”

> “一次只能让一个应用程序监听一个端口。”

其实你的问题以前有人问过，我只是引用了答案。完整的答案可以在 ->[这里](https://stackoverflow.com/questions/1694144/can-two-applications-listen-to-the-same-port)找到。

# c# - C# dllimport：试图读取或写入受保护的内存

> ID：14079881
> 
> 赞同：0
> 
> 时间：2012-12-29T08:05:40.910
> 
> 标签：c#

我在 C++ 中有这个功能

```
extern "C" __declspec(dllexport) void SendPacketToServer(BYTE *packet, int Length)
{
    _SendToServer(packet, Length);
} 
```

如何在 C# 中使用它？

到目前为止我试过这个：

```
[DllImport("DAFramework 1.0.dll", SetLastError = true)]
internal static extern void SendPacketToServer(IntPtr packet, int length);

            unsafe 
            {
                fixed (byte* pByte = new byte[] { 0x13, 0x00 })
                {
                    IntPtr data = new IntPtr((void*)pByte);
                    SendPacketToServer(data, 2);
                }
            } 
```

我做错了什么吗？如果是这样，我怎样才能使它工作？我收到错误：`Attempted to read or write protected memory. This is often an indication that other memory is corrupt.`

我可以用更简单的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T08:18:24.520

您必须设置适当的调用约定：

```
[DllImport("DAFramework 1.0.dll", SetLastError = true, CallingConvention=CallingConvention.Cdecl)] 
```

因为您的本机函数声明了它（`extern "C" __declspec(dllexport)`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-02T11:10:15.020

我认为这是一个类似的问题，在我的情况下是由于**char** * 参数。我认为您必须事先分配参数。

> 因此，您唯一的解决方案是将字符串参数作为 IntPtr 传递。使用 Marshal.StringToHGlobalAnsi 分配内存

[尝试在 c# 中使用 dllimport 读取或写入受保护的内存](https://stackoverflow.com/questions/16674616/attempted-to-read-or-write-protected-memory-with-dllimport-in-c-sharp)

# linux - 如何编写一个可以在 linux 服务器上获取 CPU 使用率的 shell 脚本

> ID：14079882
> 
> 赞同：0
> 
> 时间：2012-12-29T08:05:49.113
> 
> 标签：linux, shell, cpu-usage

我想知道如何编写一个可以从 linux 服务器获取 CPU 使用率的 shell 脚本。

我确实知道如何在 linux pc 上使用 ps 和 top 来做到这一点。虽然这里的问题是我需要使用 shell 脚本将我的工作提交到 linux 服务器。

我试过了

```
myjob
ps ux U myname 
```

它按顺序运行。所以，我不知道 myjob 的 CPU 使用率。

```
myjob &
ps ux U myname 
```

& 符号只是暂停我的工作。同样，这里的全部目的是了解 myjob 的 CPU 使用率。

请让我知道如何并行运行两条线，或者有其他方法。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T08:17:51.077

为什么不直接使用`time`命令：

```
time myjob 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T08:15:14.773

实际上，最后使用“&”调用 myjob 只会为您的工作创建另一个进程。myjob 仍将在后台运行，它允许您使用 top 获取进程的 CPU 使用率。例如，我创建了我运行的 test.cpp

```
./test& 
```

返回

```
[1] 7178 
```

其中 7178 是进程的 pid 然后

```
top -pid 7178 
```

实时给出进程的 CPU 消耗。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T08:15:30.847

你试过`iostat`命令吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-29T08:27:20.080

```
myjob &
process_id=$!
...now use the process_id in your ps command 
```

# vb.net - 为什么在 Win 7 中不显示 ASCII 字符 144？

> ID：14079889
> 
> 赞同：-1
> 
> 时间：2012-12-29T08:07:06.120
> 
> 标签：vb.net, windows-7, windows-xp, ascii, chr

我需要在网格单元格中显示的字符串中指明分界线。

我的代码当前使用`Chr(144)`的是一个小矩形。

这在 中有效`XP`，但符号不显示在 中`Win 7`。它只是不显示任何东西，所以`Debug.Print "#" & Chr(144) & "#"`只会显示`##`

为什么人物不显示`Win 7`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T08:13:21.387

没有 ASCII 字符 144。ASCII 只能运行到 127。
那么你的意思是 Windows-1252 字符 144？那恰好是一个未分配的字符。（见[字符图](http://en.wikipedia.org/wiki/Windows_1252)）。

所以系统会打印一个不存在的字符的符号，它恰好是 XP 机器上使用的字体中的一个矩形，而 Win 7 机器上的字体中什么也没有。

要显示正确的矩形，请查看 Unicode 区域[U+25A0..U+25FF](http://www.unicode.org/charts/PDF/U25A0.pdf)中的几何形状。U+25AF 看起来就是你想要的那个。

**编辑**
我看到你现在正在使用 VB.Net，所以忘记 ASCII 和 Windows-1252。VB.NET 内部使用 UTF-16，因此您不必担心无法显示某个 Unicode 代码点。写吧`chr(&H25AF)`

# linux-kernel - 将数据写入 debugfs --- 从设备驱动程序

> ID：14079893
> 
> 赞同：1
> 
> 时间：2012-12-29T08:07:24.203
> 
> 标签：linux-kernel, linux-device-driver

使用 proc，我们可以轻松地使用 read & write 系统调用，如本例所示。 [通过用户空间写入 /proc 条目](https://stackoverflow.com/questions/9863005/write-on-proc-entry-through-user-space)

但我正在使用 debugfs 将信息从驱动程序传递到用户空间。我能够找到这两个示例代码。这里应用程序能够使用 mmap() 系统调用读取和写入 debugfs 文件。

*   [http://people.ee.ethz.ch/~arkeller/linux/code/mmap_simple_kernel.c](http://people.ee.ethz.ch/~arkeller/linux/code/mmap_simple_kernel.c)
*   [http://people.ee.ethz.ch/~arkeller/linux/code/mmap_user.c](http://people.ee.ethz.ch/~arkeller/linux/code/mmap_user.c)

但是假设在我的情况下需要使用 Debugfs 文件与设备驱动程序进行通信：

```
user-space application    <-------> debugfs file <-------> Device driver 
```

1.  那么我可以在我的 --->> 设备驱动程序代码 --->> 中使用相同的代码 mmap_simple_kernel.c 并直接从驱动程序将数据传输到 debugfs 吗？但是在这种情况下，我的驱动程序中会有两个 file_operations 结构会导致一些问题吗？这是正确的方法吗？

2.  或者就像应用程序在 -- mmap_user.c 中遵循进程一样 -- 相同的进程 -- 我在我的设备驱动程序中遵循。并保留 mmap_simple_kernel.c 作为 debugfs 条目的单独模块？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T09:08:34.507

您可以在 mm/kmemleak.c 中查看 kmemleak 如何使用 debugfs：

```
static const struct seq_operations kmemleak_seq_ops = {
        .start = kmemleak_seq_start,
        .next  = kmemleak_seq_next,
        .stop  = kmemleak_seq_stop,
        .show  = kmemleak_seq_show,
};

static int kmemleak_open(struct inode *inode, struct file *file)
{
        return seq_open(file, &kmemleak_seq_ops);
}

static int kmemleak_release(struct inode *inode, struct file *file)
{
        return seq_release(inode, file);
}

static ssize_t kmemleak_write(struct file *file, const char __user *user_buf,
                              size_t size, loff_t *ppos)
{...}

static const struct file_operations kmemleak_fops = {
        .owner          = THIS_MODULE,
        .open           = kmemleak_open,
        .read           = seq_read,
        .write          = kmemleak_write,
        .llseek         = seq_lseek,
        .release        = kmemleak_release,
};

dentry = debugfs_create_file("kmemleak", S_IRUGO, NULL, NULL,
                             &kmemleak_fops); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-19T16:13:34.563

这个问题是 Google 中 mmap debugfs 的热门搜索结果。我在这里添加一个重要信息。根据这个[https://lkml.org/lkml/2016/5/21/73](https://lkml.org/lkml/2016/5/21/73) post debugfs_create_file() 在内核 4.8.0 或更高版本将忽略 struct file_operations 中的 .mmap 字段

使用 debugfs_create_file_unsafe() 作为解决方法

# blackberry-10 - 防止黑莓10级联中listview标题上的onTriggered事件？

> ID：14079898
> 
> 赞同：0
> 
> 时间：2012-12-29T08:08:10.377
> 
> 标签：blackberry-10, blackberry-cascades

我在 listview blackberry 10 qml 中创建了自定义标题。但是 listview 标头也会在 OnTriggered 事件上触发。

```
listItemComponents: [
    ListItemComponent {
    type: "header"
        Container {
            preferredWidth: 748
            layout: DockLayout {}

            Label {
                text: "Custom Header"
                horizontalAlignment: HorizontalAlignment.Left
                verticalAlignment: VerticalAlignment.Center
                textStyle{
                    base:SystemDefaults.TextStyles.BigText
                }
            }
        }
    }
] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:38:51.420

最后我找到了答案，实现如下的listview ontriggered函数

```
onTriggered: {
                        if(indexPath!=0){
                        var selectedItem = dataModel.data(indexPath);
                        var newPage = nextPage.createObject();
                        navigationPane.push(newPage);
                    } 
```

# mysql - MySQL合并多个表的列

> ID：14079904
> 
> 赞同：1
> 
> 时间：2012-12-29T08:08:54.263
> 
> 标签：mysql, sql, select

我有两个表，如下所示： 表 1：

```
name    surname    age
----    -------    ---
 a         b       null
 c         d       null 
```

表 2：

```
age
---
 1 
 4 
```

我想将它们组合到第一个表（Table1）中

```
name    surname    age
----    -------    ---
 a         b        1
 c         d        4 
```

（它们具有相同的行数）我该如何组合它们？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-29T08:13:09.303

也许你想要这个，

```
SELECT a.Name, a.SurName, b.Age
FROM
  (
    SELECT @row := @row + 1 RankNo,
           Name, Surname
    FROM   Table1, (SELECT @row := 0) r
  ) a
  INNER JOIN
  (
    SELECT @row1 := @row1 + 1 RankNo,
           Age
    FROM   Table2, (SELECT @row1 := 0) r
  ) b ON a.RankNo = b.RankNo 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/4c2a9/5)

# c# - Xpath 搜索节点的后代

> ID：14079905
> 
> 赞同：2
> 
> 时间：2012-12-29T08:09:09.770
> 
> 标签：c#, xml, xpath, xpath-1.0

我有以下 c# 方法，该方法通过 xpath 对从 refNode 可访问的所有节点执行一些操作

```
void foo(XmlNode refNode, string xpath)
{
    XmlNodeList list=refNode.SelectNodes(xpath);
    //perform operation on each element of the list
} 
```

我得到的输入 xml 之一是：

```
<A>
    <B>***
        <C>
                  <B>One</B>
            </C>
        <B>
                  <B>Two</B>
            </B>
    </B>
    <B>...</B>
    <B>...</B>
</A> 
```

我需要选择一个 refNode `<B>`（标记`***`）并将其传递给 foo() 并使用一个 xpath 选择`<B>`refNode 的所有后代节点，但不嵌套在任何其他`<B>`节点内

例如，在给定的输入中，结果应包含：

```
1\. <B>One</B>
2\. <B><B>Two</B></B> 
```

我试过 .//B 给我 3 个结果和 .//B[not(ancesotr::B)] 返回 0 个结果。

我应该使用什么 Xpath 来获得所需的结果？

**编辑**

我可以更改方法 foo，但不能更改它的签名。此方法是库的一部分，并且被少数用户使用。上面给出的输入只是一个特定的实例，用户也可以将节点 A 作为 refnode 发送并请求所有 C 节点。

**Edit2** @Dimitre Novatchev 的解决方案适用于我，如果我可以在不更改其签名的情况下获得 foo 内的 refnode 的 xpath，或者如果有某种方法可以指定`this`节点，即应用 xpath 的节点。

```
.//B[not(ancesotr::B) or ancesotr::B[1]=**this**] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T17:57:44.823

**使用这个纯 XPath 1.0 表达式**：

```
$vrefNode/descendant::B[count(ancestor::B) - count($vrefNode/ancestor::B) = 1] 
```

**where`$vrefNode`需要用选择“引用节点”的 XPath 表达式替换（除非您可以使用变量引用）。**

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
  <xsl:copy-of select=
  "/*/B[1]/descendant::B[count(ancestor::B) - count(/*/B[1]/ancestor::B) = 1]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<A>
    <B>***
        <C>
            <B>One</B>
        </C>
        <B>
            <B>Two</B>
        </B>
    </B>
    <B>...</B>
    <B>...</B>
</A> 
```

**对 XPath 表达式求值，并将通过此求值选择的元素复制到输出**：

```
<B>One</B>
<B>

   <B>Two</B>

</B> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T10:11:45.600

我不确定纯 XPath 是否可以做到这一点。XQuery 具有更强的表达能力，例如，您可以轻松地使用它`let`来保存`B`您在变量中搜索更多`B`后代的子树的元素，然后您可以确保它是唯一的`B`祖先。下面是一个 XQuery 示例：

```
let $inp := <A>
  <B>
    ***
    <C>
      <B>One</B>
    </C>
    <B>
      <B>Two</B>
    </B>
    <D>
      <E>
        <B>Three</B>
      </E>
    </D>
    <D>
      <B>Four<Foo>
        <B>Five</B>
      </Foo>
    </B>
    </D>
  </B>
  <B>...</B>
  <B>...</B>
</A>
let $b := $inp/B[1]
return $b/descendant::B[count(ancestor::B) = 1 and ancestor::B[1] is $b] 
```

找到节点

```
<B>One</B>
<B>
<B>Two</B>
</B>
<B>Three</B>
<B>Four<Foo>
<B>Five</B>
</Foo>
</B> 
```

.NET 框架有 XQuery 实现，例如 XmlPrime、Saxon 9 .NET 版本、AltovaXML 或[http://qm.codeplex.com/](http://qm.codeplex.com/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T10:24:04.480

> 选择 refNode 的所有后代`<B>`节点但不嵌套在任何其他`<B>`节点内的 xpath

在 XSLT 中，您可以使用

```
.//B[generate-id(ancestor::B[1]) = generate-id(current())] 
```

这将选择当前上下文节点的所有`B`后代，其最近的封闭`B`祖先是当前上下文节点本身。但这依赖于哪些是特定于 XSLT 的，`generate-id()`而`current()`不是普通 XPath 的一部分。

以下将是一个两步替代方案：

```
foo(refNode, ".//B[count(ancestor::B) = " + refNode.SelectNodes("ancestor-or-self::B").Count + "]"); 
```

动态生成 XPath 表达式。这将找到具有相同数量的祖先的所有`B`后代（加上一个，如果它本身就是一个元素），这具有排除超过一层“B层”深度的后代的效果。`refNode``B``refNode``refNode``B``B`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T03:18:14.813

你必须使用 XPath 吗？如果您可以使用 Linq-to-XML，

```
XElement refNode = ...
XElement wantedBs = refNode.Descendants("B")
                           .Where(b => parent.Name.LocalName != "B"); 
```

# delphi - 如何停止备忘录控件的自动滚动？

> ID：14079906
> 
> 赞同：7
> 
> 时间：2012-12-29T08:09:15.370
> 
> 标签：delphi, delphi-xe3, windows-messages

在 Windows 7 中，备忘录控件 ( `TMemo`) 会在插入文本 ( `Memo.Lines.Add(Path);`) 后自动滚动，这是我不想要的，因为滚动是由我自己完成的。

如何停止自动滚动？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T06:19:21.473

通常，将文本添加到备忘录控件会将备忘录滚动到插入文本的底部。为防止这种情况，请`Lines.BeginUpdate`在添加文本之前调用，然后再调用`EndUpdate`：

```
procedure TForm1.Button1Click(Sender: TObject);
begin
  Memo1.Lines.BeginUpdate;
  try
    Memo1.Lines.Add('...');
    Memo1.Lines.Add('...');
    ...
  finally
    Memo1.Lines.EndUpdate;
  end;
end; 
```

# android - Eclipse ADT 不是三星 s3 作为 android 设备？？

> ID：14079907
> 
> 赞同：6
> 
> 时间：2012-12-29T08:09:46.493
> 
> 标签：android, android-emulator, samsung-mobile

好吧，我的三星 s3 没有被检测为 android 设备，而是被检测为便携式媒体播放器 gt-19300

[http://cubixshade.com/images/s3.png](http://cubixshade.com/images/s3.png)

我在 Eclipse 运行配置上设置了“始终提示选择设备”，当我运行应用程序时，没有显示或检测到任何设备。

如何在 eclipse 中将我的手机检测为活动的 android 设备？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-29T08:15:20.930

我通过从[这里](http://www.samsung.com/us/kies/)`Samsung Galaxy y S5360`安装 Samsung Kies为我解决了这个问题。您将能够将您的三星手机与您的 PC 同步，它包括市场上几乎所有三星设备的几乎所有设备驱动程序。然后你的设备应该被 Eclipse 识别。值得一试。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-29T08:13:51.360

安装 Samsung Kies 或手动安装您的设备驱动程序：

```
Device Manaager -> yourDevice -> UpdateDriverSoftware -> Browse My Computer ... -> Let Me Pick From a List -> Samsung Android ADB InterFace 
```

# c++ - GTK 3.xa 是真正的跨平台解决方案吗？

> ID：14079909
> 
> 赞同：6
> 
> 时间：2012-12-29T08:09:58.013
> 
> 标签：c++, gtk, cross-platform, gtkmm, gtk3

我尝过 Qt 4.x/5.x 和 GTKmm 3.x，我真的很喜欢 GTKmm 而不是 Qt。

现在我刚刚发现 GTKmm 3.x 不提供 Windows 移植，他们也不提供 Mac 移植，基本上除了 Linux 的库/源/二进制文件我什么也找不到。显然，Windows 支持（我不确定 Mac OS 的情况）在 2.x 时代被放弃了，今天它仍然不存在。

出于特定原因，我计划使用 GTK 3.x，特别是对于 3.x 分支引入的一些新功能，因此使用 GTK 2.x 是一个不可行的选择。

现在我问：Windows 和/或 Mac 对 GTK 3.x 的支持有什么新东西吗？有事吗？甚至是实验项目？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T12:57:59.690

**2018-12-18 更新**：

[多年来，MSYS2 一直支持 Windows 上的 GTK+ 3](https://www.gtk.org/docs/installations/windows/)。

**老答案：**

GTK for Windows 当前按“原样”提供。基本上，这意味着没有使用 Windows 的 GTK 维护人员，而使用 Linux 的人员有足够的工作来维护 Linux 构建。

这意味着欢迎为 Windows 上的 GTK 3 做出任何贡献，有些人正在使用它，但这还没有为大众做好准备，因为没有人站出来做这项工作，这不会在一夜之间变魔术。所以它是可用的，但不要指望被动维护。

至于构建，有一个法国人为 Windows 提供了一个（非官方的）GTK 3 安装程序。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-07T15:54:55.587

不，它不是——至少当你想为未来安全的时候。MacOSX 和 GTK 端口没有那么完美，而且完全是自愿的，这意味着通过这种复杂性和规模的程序，它们不是主动开发的。并且没有人关心在添加新功能之前实现旧功能。

自 GTK3 发布以来已经快 2 年了，仍然没有官方的 Windows 二进制发行版。在一次 GNOME 会议上，有一个公开讨论是否应该只将 GTK4 制作为 Linux。好吧，我猜他们的意思是 Linux/BSD——但 Wayland 目前是纯 Linux，而 BSD 确实缺乏桌面开发人员。

这应该足以吓跑任何需要实际投资的严肃计划的人。

我也坚信跨平台 GUI 工具包已成为过去。抽象应用程序的 GUI 并针对每个平台进行开发。随着 AppStore 的成功，您将被迫越来越多地使用原生平台风格。如果您的应用看起来不一样，它已经被 Apples AppStore 拒绝了。Windows 现在正在强制执行 WinRT。做好准备，这将在未来变得更加重要。

所以要走的路是使用原生小部件集的 WxWidgets。跳过 GTK

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-31T14:21:45.173

就目前而言，没有。

正如 Frédéric Hamidi 所说，请参阅[在哪里可以下载预编译的 GTK+ 3 二进制文件或 Windows 安装程序？](https://stackoverflow.com/questions/6006689/where-can-i-download-precompiled-gtk-3-binaries-or-windows-installer)了解更多信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T14:54:02.240

Mac 上的 GTK 已经运行了很长时间，并且继续工作到 3.x 系列：

[https://live.gnome.org/GTK%2B/OSX/Building](https://live.gnome.org/GTK%2B/OSX/Building)

您也可以使用 MacPorts 安装 GTK 3.x，但我不知道效果如何。

# vb.net - VB.net 逻辑错误

> ID：14079910
> 
> 赞同：0
> 
> 时间：2012-12-29T08:10:21.017
> 
> 标签：vb.net

这应该是一个程序，它告诉您在用户输入下载速度后下载给定大小的文件需要多长时间。intOne 似乎完全不受我创建的用于确定 intOne 值的函数的影响。我有理由确定我使用的方程式是正确的。

```
Public Class Form1

    Private tSize As System.Drawing.Size
    Private checkUserSpeed As Long = 0
    Private checkBitByte As Integer = 0
    Private setSize As Integer = 0
    Private checkUserSize As String = ""
    Private Answer As Double = 0

    Private ReadOnly Property checkDwnldSize() As String
        Get
            Return ComboBox1.Text
        End Get
    End Property

    Function checkDownloadSize(ByVal checkUserSize As String)
        Dim suffixes As New List(Of String)({"b", "k", "m", "g", "t", "p", "e", "z"})
        Dim index As Long = suffixes.IndexOf(checkUserSize.Substring(0, 1).ToLower) > -1
        If index > -1 Then
            Return checkUserSpeed / 1024 ^ index
        Else
            Return False
        End If
    End Function

    Function checkForByte(ByVal checkUserSize)
        If Microsoft.VisualBasic.Right(checkUserSize.ToLower, 7) = "byte(s)" Then
            checkBitByte = 1
            checkDownloadSize(checkUserSize)
            Return True
            End
        Else
            Return False
        End If
        Return checkBitByte
        Return checkUserSpeed
    End Function

    Function checkForBit(ByVal checkUserSize)
        If Microsoft.VisualBasic.Right(checkUserSize.ToLower, 6) = "bit(s)" Then
            checkBitByte = 8
            checkDownloadSize(checkUserSize)
            Return True
            End
        Else
            checkForByte(checkUserSize)
            Return False
        End If
        Return checkBitByte
        Return checkUserSpeed
    End Function

    Function Calculate(ByVal checkUserSpeed, ByVal checkUserSize)
        checkForBit(checkUserSize)

        Return Answer
    End Function

    Private Sub FitContents()
        tSize = TextRenderer.MeasureText(TextBox3.Text, TextBox3.Font)
        TextBox3.Width = tSize.Width + 10
        TextBox3.Height = tSize.Height
    End Sub

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        Calculate(Convert.ToInt32(TextBox3.Text), ComboBox3.Text)
        Answer = checkBitByte * ((1024 ^ setSize) / checkUserSpeed)
        TextBox1.Text = Answer
    End Sub

    Private Sub TextBox3_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles TextBox3.TextChanged
        Call FitContents()
    End Sub

    Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
        Form2.Show()
    End Sub

    Private Sub Button3_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button3.Click
        Form3.Show()
    End Sub
End Class 
```

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T15:11:34.167

您永远不会为 intOne 分配任何值，因此它从值 0 开始。所以：

```
intOne = intOne / 1024 ^ 3 
```

与此相同：

```
intOne = 0 / 1024 ^ 3 
```

这当然是：

```
intOne = 0 
```

作为旁白：

*   不要在类/表单级别使用 Dim，使用 Private。

*   `As <ReturnType>`贴花功能时始终使用

*   在语言设置中打开 Option Strict。

*   `Dim intTwo As Integer = Nothing`没有做任何有用的事情。改为使用 `Dim intTwo As Integer = 0`。

*   始终将变量声明为类型（`Dim tSize`缺少其类型）

* * *

跟进您的编辑：

这个：

```
Function checkForByte(ByVal checkUserSize) 
```

应该是这样的：

```
Function checkForByte(ByVal checkUserSize As Long) 
```

在代码中的所有位置修复此问题。一切都应该有一个**As DataType**。如果您像建议的那样打开 Option Explict 和 Option Strict，编译器会为您定位这些问题。

接下来，不要将局部变量和/或参数命名为与您的类/表单级私有变量相同的名称。我个人为我的实例变量添加前缀，如下所示：

```
Private _checkUserSpeed As Long = 0 
```

注意下划线。有些人使用小写的 m 代替：

```
Private mCheckUserSpeed As Long = 0 
```

选择一些东西并保持一致。这清楚地表明了变量的范围。

这段代码也很糟糕，第二个 Return 永远不会被击中：

```
Return checkBitByte
Return checkUserSpeed 
```

最后，假设您试图`_checkUserSpeed`用一个值填充变量，您仍然没有这样做。搜索您的代码并查找您正在执行此操作的任何地方：

```
_checkUserSpeed = something 
```

你不会找到它。因此该变量将始终为 0。

这些都不是真正的 VB.NET 特定问题。所有这些最佳实践同样适用于 C# 或任何其他语言。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T20:53:41.590

您应该首先考虑清理代码，以提高可读性。不惜一切代价避免代码重复。如果你认为你不能这样做，那就倾向于数据重复，即创建一个 XML 文件来存储你的值，但要保持代码干净。您以后发现的任何错误都会像白乌鸦一样突出。

例如，像这样：

```
Function checkDownloadSize(ByVal strOne As String)
  Dim suffixes As New List(Of String)({"b", "k", "m", "g", "t", "p", "e", "z"})
  Dim index As Long = suffixes.IndexOf(strOne.Substring(0, 1).ToLower) > -1
  If index > -1 Then
    Return intOne / 1024 ^ index
  Else
    Return False
  End If
End Function 
```

大致替换了您的两页`checkDownloadSize`和`checkSize`。

注意这里的每个函数只被调用一次。如果您稍后决定`ToLower`与您的自定义实现进行交换，则只需执行一次。从长远来看，它不仅可以提高性能，还可以使您的代码更易于维护。

还有一点是我`Microsoft.VisualBasic`在上面的代码中没有使用命名空间，而是切换到`Substring`了。这将减轻您迁移到 C# 的负担，并使本地 C# 开发人员更好地理解您的代码。

# java - Eclipse 中的辅助箭头

> ID：14079912
> 
> 赞同：1
> 
> 时间：2012-12-29T08:10:29.723
> 
> 标签：java, eclipse, forms, swt, jface

当您在 Eclipse 中打开一个对话框时，表单布局在哪里，您可以看到，当您将鼠标悬停在某个项目、其标签或它们之间的空间上时，会显示一个辅助箭头。截屏： ![在此处输入图像描述](../Images/0b8c56121e1273673f0438d55a157438.png)

我的问题是：是否有任何（简单）方法可以在 Java 中使用 SWT 和 JFace 实现相同的功能？

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T12:09:07.067

不，没有标准的方法可以通过 SWT 或 JFace 实现这一点，因为它不是内置功能。不过，自己添加并不难。

[`ConfigurationBlock.java`](http://git.eclipse.org/c/pde/eclipse.pde.ui.git/tree/ui/org.eclipse.pde.ui/src/org/eclipse/pde/internal/ui/preferences/ConfigurationBlock.java)从 PDE 源中查看此文件。此类是 PDE 首选项页面中所有选项块的基础。JDT 也使用了完全相同的代码片段，但它在[`OptionConfigurationBlock.java`](http://git.eclipse.org/c/jdt/eclipse.jdt.ui.git/tree/org.eclipse.jdt.ui/ui/org/eclipse/jdt/internal/ui/preferences/OptionsConfigurationBlock.java).

为每个组合控件调用的方法是`ConfigurationBlock#addHighlight(..)`，它负责在控件处于焦点或鼠标悬停在其标签上时添加突出显示。

# javascript - 在 ExtJS 中将文本字段数据发送到 servlet

> ID：14079915
> 
> 赞同：0
> 
> 时间：2012-12-29T08:11:18.180
> 
> 标签：javascript, servlets, extjs, extjs4.1

我想将文本字段数据发送到 servlet 页面。我不知道过程。我给出了文本框的代码和下面的按钮。

```
Ext.onReady(function(){
var movie_form = new Ext.FormPanel({
    renderTo: document.body,
    frame: true,
    title: 'Personal Information Form',
    width: 250,
    items: [{
        xtype: 'textfield',
        fieldLabel: 'Firstname',
        name: 'firstname',
        allowBlank: false
    },{
        xtype:'button',
        text:'save'    
    }]
}); 
```

});

这是文本框和按钮的代码。当我单击按钮时，该字段的数据将转到一个 servlet 页面。但我不能那样做。请任何人帮助我。servlet 页面的名称是 url_servlet

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T11:10:16.203

在您的服务方法中（获取或发布）

您可以通过属性“名称”获取数据字段值。

```
 String firstname = reg.getParameter("firstname"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T08:53:06.920

要在后端处理数据，请检查@The Suresh Atta 的回答。

我在您的代码中发现了一些勘误表：

1) 使用 Ext.create 函数构造一个 Ext 组件。
2) 使用 Ext.getBody() 获取文档正文。
3）将您的字段放在项目配置中，并将按钮放在按钮配置中（并不总是最佳实践）。

```
Ext.create('Ext.form.Panel', {
    frame: true,
    title: 'Personal Information Form',
    width: 250,
    url: 'url_servlet',// The form will submit an AJAX request to this URL when submitted
    items: [{
        xtype: 'textfield',
        fieldLabel: 'Firstname',
        name: 'firstname',
        allowBlank: false
    }],
    buttons: [{
        text: 'Save',
        handler: function() {
            var form = this.up('form').getForm();
            if (form.isValid()) {
                form.submit({
                    success: function(form, action) {
                       Console.log('Success', action.result.msg);
                    },
                    failure: function(form, action) {
                       Console.log('Failed', action.result.msg);
                    }
                });
            }
        }
    }],
    renderTo: Ext.getBody()
}); 
```

我希望这对您有所帮助；）

# c - 使用c的文件中的行数

> ID：14079920
> 
> 赞同：3
> 
> 时间：2012-12-29T08:11:56.540
> 
> 标签：c, file

我是 CI 中文件处理的新手，我正在开发一个计算 c 中的行数和字符数的程序。该程序对字符运行良好，但对于行，o/p 总是少一个。我使用了换行符数着数 行数。这是我的代码：

```
 main()
{
    FILE *fp;
    int c,nl=0,nc=0;
    char str[20];
    printf("Enter filename\n");
    scanf("%s",str);
    fp=fopen(str,"r");
    if(fp==NULL)
    {
        while(1)
        {
        printf("File does not exist\n");
        printf("Enter new filename\n");
        scanf("%s",str);
        fp=fopen(str,"r");
        if(fp!=NULL)
        break;
        }
    }
    c=getc(fp);
    while(c!=EOF)
    {
        if(c=='\n')
        nl++;
        nc++;
        c=getc(fp);
    }
    printf("no of lines=%d no of char=%d",nl,nc);
} 
```

我的实现有什么问题？。还有其他方法可以计算编号吗？行数？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-29T08:14:44.173

这取决于您对线的定义。如果一个文件只包含单个字符'a'，它是一行还是没有行？根据您的程序逻辑，它有零行。

您可以在`while`循环结束时在 close 之外添加`}`以下行：

```
if (c != '\n') nl++; 
```

如果最后一个字符不是换行符，那将添加一个额外的行。您还应该初始化`c`为零，否则如果文件为空，这将导致不可预知的结果。

正如您从其他答案中看到的那样，计算文件中的行数意味着什么并不完全清楚。在开始编写代码之前，请确保您对要计算的确切内容有非常清楚的了解。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-29T08:14:54.187

任何文件的最后一行都不需要以换行符结尾`\n`。因此，您的程序将报告换行符的数量，而不是“行”的数量（这是一个传统定义的概念）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-29T08:15:01.547

**[已编辑]**

最终结果将减少 1，因为您将 "\n" 计为行尾，而最后一行不会将 "\n" 作为行尾。它只会找不到字符。（感谢您指出我的错误@Basile）

因此，对于正确的答案，只需增加 while 循环之外的行数。

@DavidSchwartz 发现这个答案不充分并指出了显而易见的问题。因此，为了完整起见，我将添加：（在[David Schwartz 的解决方案中](https://stackoverflow.com/a/14079929/1782481)继续）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-29T08:35:20.323

最后一行不计入您的程序，因为它没有遇到`\n`..

编写也计算最后一行的逻辑..

# javascript - 使用 iFrame Alternative 加载外部 Div

> ID：14079927
> 
> 赞同：0
> 
> 时间：2012-12-29T08:13:50.707
> 
> 标签：javascript

我目前正在为一个客户端设计一个 eBay 列表模板，在该模板中我设法使用加载器 (www.test4.solowebs.co.uk) 加载 JavaScript。JavaScript 可以在 eBay 中运行而不会给我一个错误，这太棒了，因为我使用的是加载程序而不是脚本。我想要的是 - 在列表的底部，我希望从另一个站点（我自己的站点 test4.solowebs.co.uk/featured.html）加载一个外部 div，其中包含两个优惠。这样做的结果是我可以更改该页面上的报价，它会自动加载到我的所有列表中，有点像 iFrame。（唯一的问题是 eBay 不允许 iFrames - 而且我还没有找到解决方法。）

问题 - 有没有办法可以使用 Javascript 加载 iFrame？或者可以让我从外部页面加载 div 的替代方法？（因为 ebay 托管 HTML，它必须是跨域兼容的！）我是 HTML CSS 方面的专家，并且在 JavaScript 方面还可以，所以除此之外的任何东西都必须详细并给出实施说明。

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T08:23:42.020

使用 AJAX，或者从技术上讲：XMLHttpRequest。

这是关于 SO 的一篇关于内联跨浏览器 XMLHttpRequest 脚本的文章：[Cross-Browser XMLHttpRequest](https://stackoverflow.com/questions/2557247/easiest-way-to-retrieve-cross-browser-xmlhttprequest)

使用它来异步填充您的 div。希望这可以帮助。

# android - 列表视图中的 JSON 数据与图像解析错误

> ID：14079928
> 
> 赞同：0
> 
> 时间：2012-12-29T08:14:17.570
> 
> 标签：android, json

我正在使用 jsonparser 来解析从 json 响应中获得的数据和图像。当我包含此代码来解析图像输出是 D/AndroidRuntime(441): Shutting down VM D/dalvikvm(441): Debugger has detached; 对象注册表有 1 个条目

```
JSONArray attachments = json.getJSONArray(KEY_ATTACHMENTS);
                for(int j = 0; j < attachments.length(); j++){
                    JSONObject d = attachments.getJSONObject(j);
                    JSONObject images = d.getJSONObject(KEY_IMAGES);
                    String thumbnail = d.getString(KEY_THUMB_URL);

                    JSONObject thumnails = d.getJSONObject(KEY_THUMB_URL);
                    String url = author.getString(KEY_URL); 
```

我在解析内容时出错了吗？任何身体都可以帮助图像与输出中的数据一起显示。我的 JSON 响应是

```
{
"status": "ok",

"posts": [
    {
        "id": 2498,
        "title": "jigsaw lamp imported from thailand",
        "content": "<p>Hi. It&#8217;s a invitation to have a look at a unique lamp shade called jigsaw lamp from thailand. Available in multi attractive colours.</p>\n",
        "date": "2012-12-26 09:48:15",
         "author": {
            "name": "Tapas123456",
                        },
            "attachments": [
            {
                "description": "",
                "caption": "",
                "mime_type": "image/jpeg",
                "images": {

                    "thumbnail": {
                        "url": "http://site/wp-content/uploads/2012/12/646675-50x47.jpg",

                    }
                }
            },............... 
```

以下是代码

```
 public class CustomizedListView extends Activity {
   JSONArray posts = null;

  // All static variables
  static final String URL = "http://website";

  static final String KEY_POSTS = "posts";
  static final String KEY_ID = "id";
  static final String KEY_TITLE = "title";
  static final String KEY_DATE = "date";
  static final String KEY_CONTENT = "content";
  static final String KEY_AUTHOR = "author";
  static final String KEY_NAME = "name";
  static final String KEY_ATTACHMENTS = "attachments";
  static final String KEY_THUMB_URL = "thumbnail";
  static final String KEY_IMAGES = "images";
  static final String KEY_URL = "url";

  ListView list;
     LazyAdapter adapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

    // Creating JSON Parser instance
            JSONParser jParser = new JSONParser();

            // getting JSON string from URL
            JSONObject json = jParser.getJSONFromUrl(URL);
            try {
            posts = json.getJSONArray(KEY_POSTS);
    // looping through all song nodes <song>
            for(int i = 0; i < posts.length(); i++){
                JSONObject c = posts.getJSONObject(i);
                // Storing each json item in variable
                String id = c.getString(KEY_ID);
                String title = c.getString(KEY_TITLE);
                String date = c.getString(KEY_DATE);
                String content = c.getString(KEY_CONTENT);

                // Phone number is agin  JSON Object
                JSONObject author = c.getJSONObject(KEY_AUTHOR);
                String name = author.getString(KEY_NAME);

                JSONArray attachments = json.getJSONArray(KEY_ATTACHMENTS);
                for(int j = 0; j < attachments.length(); j++){
                    JSONObject d = attachments.getJSONObject(j);
                    JSONObject images = d.getJSONObject(KEY_IMAGES);
                    String thumbnail = d.getString(KEY_THUMB_URL);

                    JSONObject thumnails = d.getJSONObject(KEY_THUMB_URL);
                    String url = author.getString(KEY_URL);
                }
        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();

        // adding each child node to HashMap key => value
        map.put(KEY_ID, id);
        map.put(KEY_TITLE, title);
        map.put(KEY_DATE, date);
        map.put(KEY_NAME, name);
        map.put(KEY_CONTENT, content);

        // adding HashList to ArrayList
        songsList.add(map);
            }   
            } catch (JSONException e) {
                e.printStackTrace();

                }

    list=(ListView)findViewById(R.id.list);

    // Getting adapter by passing json data ArrayList
    adapter=new LazyAdapter(this, songsList);        
    list.setAdapter(adapter);

    // Click event for single list row
    list.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

        }
         });        
          } 
            } 
```

LazyAdapter.java

```
public class LazyAdapter extends BaseAdapter {

private Activity activity;
private ArrayList<HashMap<String, String>> data;
private static LayoutInflater inflater=null;
public ImageLoader imageLoader; 

public LazyAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
    activity = a;
    data=d;
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    imageLoader=new ImageLoader(activity.getApplicationContext());
}

public int getCount() {
    return data.size();
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    View vi=convertView;
    if(convertView==null)
        vi = inflater.inflate(R.layout.list_row, null);

    TextView title = (TextView)vi.findViewById(R.id.title); // title
    TextView date = (TextView)vi.findViewById(R.id.artist); // artist name
    TextView content = (TextView)vi.findViewById(R.id.duration);  // duration
    TextView name = (TextView)vi.findViewById(R.id.name); 
    // duration
    ImageView thumb_image=(ImageView)vi.findViewById(R.id.list_image); // thumb image

    HashMap<String, String> song = new HashMap<String, String>();
    song = data.get(position);

    ListView list;
    // Setting all values in listview
    title.setText(song.get(CustomizedListView.KEY_TITLE));
    date.setText(song.get(CustomizedListView.KEY_DATE));
    content.setText(song.get(CustomizedListView.KEY_CONTENT));
    name.setText(song.get(CustomizedListView.KEY_NAME));

    imageLoader.DisplayImage(song.get(CustomizedListView.KEY_URL), thumb_image);
    return vi;
        }
        } 
```

logcat 错误 12-29 14:42:59.152: D/AndroidRuntime(449): CheckJNI 开启 12-29 14:42:59.273: D/AndroidRuntime(449): --- 注册本机函数 --- 12-29 14 ：42：59.732：D / AndroidRuntime（449）：关闭VM 12-29 14：42：59.742：D / dalvikvm（449）：调试器已分离；对象注册表有 1 个条目 12-29 14:42:59.752：I/AndroidRuntime(449)：注意：附加线程“Binder Thread #3”失败 12-29 14:43:00.172：D/AndroidRuntime(457)：> >>>>>>>>>>>>> AndroidRuntime START <<<<<<<<<<<<<< 12-29 14:43:00.172: D/AndroidRuntime(457): CheckJNI 开启 12- 29 14：43：00.292：D/AndroidRuntime（457）：---注册本机功能--- 12-29 14：43：00.772：I/ActivityManager（58）：开始活动：Intent {act = android.intent。 action.MAIN cat=[android.intent.category. 启动器] flg=0x10000000 cmp=com.example.androidhive/.CustomizedListView } 12-29 14:43:00.783: D/AndroidRuntime(457): 关闭 VM 12-29 14:43:00.783: D/dalvikvm(457) ：调试器已分离；对象注册表有 1 个条目 12-29 14:43:00.792: I/AndroidRuntime(457): 注意: 附加线程 'Binder Thread #3' 失败

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T08:28:37.823

将当前 json 解析为：

```
 JSONObject json=new JSONObject("pass your json string here");

  JSONArray arrjson = json.getJSONArray("posts");

   for(int j = 0; j < arrjson.length(); j++){
        JSONObject jsonimages = attachments.getJSONObject(j);

       JSONArray attachmentsimages = jsonimages.getJSONArray("attachments");

      for(int i = 0; i < attachmentsimages.length(); i++){

           JSONObject imagesjson = attachmentsimages.getJSONObject(i);

           JSONObject imagesjsonnew = imagesjson.getJSONObject("images");
           JSONObject thumnailsimages = imagesjsonnew.getJSONObject("thumbnail");

           String url = thumnailsimages.getString("url");
     }

} 
```

# http - 返回文本而不是图像

> ID：14079940
> 
> 赞同：0
> 
> 时间：2012-12-29T08:15:48.750
> 
> 标签：http, url, wget

我正在尝试下载以下漫画： `http://comicsbook.ru/upload/Комикс-Amazing-Super-Powers-Минутка-наркомании-81619.jpg` 对不起，网址只是图片。您可以轻松地在浏览器中查看它，甚至可以通过浏览器下载，但是如果我使用`wget`这个 url，我会得到 html 页面，而不是图像。我做错了什么？我也试过 perl 下载模块。结果相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T08:19:40.360

这意味着默认的内容类型是**text/html。** 您必须通过相应库的**setContentType()方法设置所需的内容类型。**这是java中的一个例子

```
HttpGet request = new HttpGet(URL);
request.addHeader("accept", "image/jpeg"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T08:45:06.647

如果请求中未设置引用者，则服务器将重定向（301）到一个网页，我能够通过标题中的引用者获取 jpg 图像：[http ://comicsbook.ru/funny/81619?minutka-narkomanii](http://comicsbook.ru/funny/81619?minutka-narkomanii)

```
wget --referer="http://comicsbook.ru/funny/81619?minutka-narkomanii" http://comicsbook.ru/upload/Комикс-Amazing-Super-Powers-Минутка-наркомании-81619.jpg 
```

# php - 在linux上调用php exec函数

> ID：14079942
> 
> 赞同：-1
> 
> 时间：2012-12-29T08:15:55.103
> 
> 标签：php, linux, xampp, exec

几个月前，我在 Windows 上制作了小型 c++ 控制台应用程序。我需要在浏览器上运行 exe 文件。我使用 exec php 函数，一切正常。现在我尝试在 Linux 上做同样的事情，以便我可以将可执行文件放在 Linux Web 服务器上。当从控制台调用时，我的 linux 可执行文件（修复）工作。但我无法通过 exec 函数运行可执行文件。

**xampp windows:** - 这行得通，我得到了我的结果。

```
<?php
$imagename = $_GET['imagename'];
exec('inpainting.exe' .$imagename); 
echo "<img src=\"./images/img-uploads/ob_img$imagename.jpg\" />";
?> 
```

但是如何在 xampp linux 上运行它呢？我试试这个，结果是空白屏幕。

```
<?php
$imagename = $_GET['imagename'];
exec('inpainting' .$imagename); 
echo "<img src=\"./images/img-uploads/ob_img$imagename.jpg\"/>";
?> 
```

我尝试了更多的东西，但没有任何反应。有人说 exec 是坏事，如果有人有其他更好的解决方案 - 请与我分享。有任何想法吗？肿瘤坏死因子

*我允许对工作文件夹的所有权限。我在 Ubuntu 12.4 上运行 xampp 1.7.3a*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T08:23:14.090

这可能会有所帮助，我添加了第二个参数然后进行了转储，它应该显示已运行命令的所有输出。

```
<?php
$imagename = $_GET['imagename'];
exec('inpainting ' .$imagename, $opt); 
var_dump($opt);
echo "<img src=\"./images/img-uploads/ob_img$imagename.jpg\"/>"; 
```

# javascript - Chromium：页面操作不起作用

> ID：14079943
> 
> 赞同：1
> 
> 时间：2012-12-29T08:16:02.157
> 
> 标签：javascript, google-chrome, google-chrome-extension

我正在尝试制作我的第一个 chrome 扩展，我希望我的扩展只出现在特定页面上，所以我正在使用`page_action`.

**清单.json**

```
{
    "name": "First",
    "version": "1.0",
    "manifest_version": 2,
    "description": "First extension",

    "page_action": {

        "default_icon": "icon.png",
        "default_popup": "popup.html"
    },

    "permissions" : [
        "tabs"
    ]
} 
```

**popup.html**

```
<html>
    <head>
        <script src="test.js"></script>
    </head>
    <body> Some other logic </body>
</html> 
```

**测试.js**

```
function check(tab_id, data, tab){

    if(tab.url.indexOf("google") > -1){
        chrome.pageAction.show(tab_id);
        alert("inside");

    }

    chrome.tabs.onUpdated.addListener(check);
}; 
```

现在，在我打开`google.com`图标加载扩展后，不会出现，也没有调用我的 javascript 函数。

那么，我在这种方法中哪里出错了。

铬版 `24.0.1312.2 Ubuntu 12.04 (165266)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T08:18:31.983

为此，您需要有一个监听选项卡更新的后台脚本。您应该像这样更新清单：

```
{
    "name": "First",
    "version": "1.0",
    "manifest_version": 2,
    "description": "First extension",
    "background": { "scripts": ["test.js"] },
    .... 
```

此外，您正在函数内部设置侦听器，因此它永远不会被执行。

将其移出功能，它应该可以工作

```
function check(tab_id, data, tab){
    if(tab.url.indexOf("google") > -1){
        chrome.pageAction.show(tab_id);
        alert("inside");

    }

};

chrome.tabs.onUpdated.addListener(check); 
```

# java - 木兰对数据进行分类 - 不起作用

> ID：14079950
> 
> 赞同：0
> 
> 时间：2012-12-29T08:18:29.610
> 
> 标签：java, machine-learning, mulan

我想用木兰对一些数据进行分类。但我得到一个例外：

```
mulan.data.DataLoadException: Error creating Instances data from supplied Reader data source
at mulan.data.MultiLabelInstances.loadInstances(MultiLabelInstances.java:469)
at mulan.data.MultiLabelInstances.loadInstances(MultiLabelInstances.java:458)
at mulan.data.MultiLabelInstances.<init>(MultiLabelInstances.java:168) 
```

主要功能来自 mulan.examples.TrainTestExperiment

```
public class TrainTestExperiment {

    public static void main(String[] args) {
        try {
            String path = Utils.getOption("path", args); // e.g. -path dataset/
            String filestem = Utils.getOption("filestem", args); // e.g. -filestem emotions
            String percentage = Utils.getOption("percentage", args); // e.g. -percentage 50 (for 50%)

            System.out.println("Loading the dataset");
            MultiLabelInstances mlDataSet = new MultiLabelInstances(path + filestem + ".arff", path + filestem + ".xml");

            // split the data set into train and test
            Instances dataSet = mlDataSet.getDataSet();
            RemovePercentage rmvp = new RemovePercentage();
            rmvp.setInvertSelection(true);
            rmvp.setPercentage(Double.parseDouble(percentage));
            rmvp.setInputFormat(dataSet);
            Instances trainDataSet = Filter.useFilter(dataSet, rmvp);

            rmvp = new RemovePercentage();
            rmvp.setPercentage(Double.parseDouble(percentage));
            rmvp.setInputFormat(dataSet);
            Instances testDataSet = Filter.useFilter(dataSet, rmvp);

            MultiLabelInstances train = new MultiLabelInstances(trainDataSet, path + filestem + ".xml");
            MultiLabelInstances test = new MultiLabelInstances(testDataSet, path + filestem + ".xml");

            Evaluator eval = new Evaluator();
            Evaluation results;

            Classifier brClassifier = new NaiveBayes();
            BinaryRelevance br = new BinaryRelevance(brClassifier);
            br.setDebug(true);
            br.build(train);
            results = eval.evaluate(br, test);
            System.out.println(results);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

至于数据格式，我有一个称为标题的维度，有 160 个类别。

数据文件按照arff格式格式化。

有些文字是中文的。

任何帮助表示赞赏。

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T07:47:43.320

这看起来像木兰中的一个错误。

[在此处](http://sourceforge.net/mailarchive/forum.php?thread_name=1315004741.15817.0.camel@p178-101.ujaen.es&forum_name=mulan-list)查看有关该错误的更多详细信息。

# c# - 已检查的 ID 未从网格视图中检索

> ID：14079952
> 
> 赞同：0
> 
> 时间：2012-12-29T08:18:34.630
> 
> 标签：c#, asp.net, c#-4.0

我有一个网格

```
 <Columns>
            <asp:TemplateField HeaderStyle-Width="20px">
                <ItemTemplate>
                    <asp:CheckBox ID="ChkSelect" runat="server" />
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Id" Visible="false">
                <ItemTemplate>
                    <asp:Label ID="LbLId" runat="server" Text='<%# Bind("ID") %>'></asp:Label>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:Label ID="LblId" runat="server" Text='<%# Bind("ID") %>'></asp:Label>
                </EditItemTemplate>
                <ItemStyle HorizontalAlign="Center" Width="20%" />
            </asp:TemplateField> 
```

我想检索`ID`已选中的复选框。我已经尝试实现此代码，如

```
 foreach (GridViewRow row in GvDDlToken.Rows)
            {
                CheckBox chk = row.Cells[0].Controls[0] as CheckBox;
                if (chk != null && chk.Checked)
                {

                        string id = "," + row.Cells[1].Text;

                }
            } 
```

但在`Checkbox chk`值为 null 时，没有进行对象引用。我在做什么可能的错误？感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T08:26:39.677

你应该使用[FindControl](http://msdn.microsoft.com/en-us/library/486wc64h.aspx)

**示例：**

```
foreach (GridViewRow row in GvDDlToken.Rows)
{
    if(((CheckBox)row.FindControl("CheckBox1")).Checked == true)
    {
    //some code
    }
} 
```

# c# - 从有效的 gMonthDay 格式获取月份和日期值而不拆分

> ID：14079959
> 
> 赞同：0
> 
> 时间：2012-12-29T08:20:42.393
> 
> 标签：c#

我有一个输入为 --12-21（有效的 gMonthDay 格式）。在这 12 是月份，21 是日值。我想将输出显示为 DD/MM 值，可以通过拆分值轻松实现。但我不想在代码中硬编码。

谁能建议一种适用于所有情况的不同方法。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T09:09:10.593

你可以使用这样的东西

```
string gMonthDay = "--12-21";
string output = DateTime.ParseExact(gMonthDay, "--MM-dd", CultureInfo.InvariantCulture).ToString("dd/MM", CultureInfo.InvariantCulture); 
```

# c# - 如何使用一些多边形裁剪算法找到多边形的总面积和质心？

> ID：14079961
> 
> 赞同：2
> 
> 时间：2012-12-29T08:21:22.660
> 
> 标签：c#, algorithm, graphics, clip

我想知道裁剪后线上方多边形的总面积和质心。多边形可以是凸的也可以是凹的。但不是自相交。

我知道有很棒的多边形裁剪库。但是，我认为我的情况很特殊（更简单），我真的很想提高性能。

任何人都知道在这里处理这种情况的最佳算法是什么。任何现有的代码都会很棒。

**参考资料：** [多边形剪裁线](http://www.vbforums.com/showthread.php?421920-Polygon-clipping-by-a-line)最能描述我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T08:48:00.010

[我认为此链接可以对您的问题有所了解。](http://search.cpan.org/~markov/Math-Polygon-1.02/lib/Math/Polygon.pod)如果您能向我们提供您尝试过的方法和获得的结果，我们将能够为您提供更好的结果。

# sql - SQL Server 存储过程中的自定义标识符生成

> ID：14079965
> 
> 赞同：4
> 
> 时间：2012-12-29T08:22:19.497
> 
> 标签：sql, sql-server, sql-server-2008, stored-procedures

目前正在处理多租户应用程序，在存储过程中生成标识符时遇到问题。

我有一张这张表，里面有关于租户的元信息。

**租户**

```
TenantId
Name
IDPrefix,   -->Like SFT
IDStart     --> 000001 
```

**客户**

```
TenantID
ClientIdentfier --> Like SFT000001 
```

在存储过程中，我想生成下一个`ClientIdentifier`like `SFT000002`。

我怎样才能根据最后一个`ClientIdentifier`值 + 1 做到这一点？

我知道只用下面的代码取最后一个值。

```
select max(ClientID) + 1 from Client will give 1,2,etc 
```

但我想我不能这样做

```
 DECLARE @CIdentier Varchar(50);

 select @CIdentier = select max(ClientIdentifier) + 1 from Client 
                                            to produce 'SFT000002 
```

我怎样才能在存储过程中这样做？

**编辑：**

尝试了 mark_s 的答案，它就像一个魅力！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-29T09:15:59.420

这种方法在负载下是安全的，例如它不会返回任何重复项，即使大量客户端请求同时进入（这是从@remusrusanu 对 SO 上的另一个问题的回答“借用”的）。

基本上，您需要一个带有 columns 的序列表`TenantID`，`TenantPrefix`然后`CurrentValue`您可以使用这样的存储过程来安全地获取新值：

```
-- add a IDValue column to your Tenant table
ALTER TABLE dbo.Tenant
ADD IDValue INT NOT NULL DEFAULT(0)

-- create this procedure to fetch the next value for any given tenant
CREATE PROCEDURE dbo.GetNextTenantID
   @tenantID INT,    
   @NextID VARCHAR(15) OUTPUT
AS
   SET NOCOUNT ON;

   DECLARE @Out TABLE (NextVal INT, Prefix CHAR(3))

   UPDATE dbo.Tenant
   SET IDValue = IDValue + 1
   OUTPUT INSERTED.IDValue, INSERTED.IDPrefix INTO @Out(NextVal, prefix)

   SELECT TOP 1 @nextID = Prefix + CAST(NextVal AS VARCHAR(10)) FROM @Out
GO 
```

这里的要点是：您必须在**单个**语句`IDValue`中进行递增和返回。只有使用这种方法，您才能在负载下保持安全 - 所有具有第一个、增量然后是**不安全**的方法并且可以返回重复项。 **`UPDATE``SELECT``UPDATE`**

 ******更新：**您**不能**只将这段代码包含到您的更大程序中！保持此过程不变**，**只需从您的存储过程中调用它 - 例如：

```
ALTER PROCEDURE [dbo].[AddClient]  
(
   @TenantId INT,
   @FirstName NVARCHAR(100),
   @LastName NVARCHAR(100),
   @ContactPerson NVARCHAR(100)
)
AS 
BEGIN 
     SET NOCOUNT ON   

     IF @TenantId IS NULL 
        RAISERROR('The value for @TenantID should not be null', 15, 1) -- with log

     DECLARE @new_person_id INT
     DECLARE @new_patient_id INT
     DECLARE @ClientIdentifier NVARCHAR(50)

     -- call the stored procedure to get the next ClientIdentifier here
     EXEC dbo.GetNextTenantID @TenantID, @ClientIdentifier OUTPUT

     -- then go on and do your other lines of code from here on out .....
     ......
END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T08:40:04.833

如果您有固定的前缀长度和正确的数字长度：

## [这是 SQLFiddle 演示](http://sqlfiddle.com/#!3/d1bd5/7)

```
with T as 
(select 
    (isnull(max(ClientIdentfier),'SFT000000')) maxNum
from client
)

select substring(maxNum,1,3)+
       RIGHT('000000'+
             cast(cast(right(maxNum,6) as bigint)+1 as varchar(100)),
             6)
   from T 
```

如果您需要获取已定义 TenantID 的下一个编号，例如 TenantID=2，请使用以下查询：

```
with T as 
(select 
    (isnull(max(ClientIdentfier),
            select top 1 IDPrefix+IDStart 
                from Tenant 
             where TenantID=2)) maxNum
from client 
     where TenantID=2
)

select substring(maxNum,1,3)+
       RIGHT('000000'+
             cast(cast(right(maxNum,6) as bigint)+1 as varchar(100)),
             6)
   from T 
```****

# mysql - MySQL SELECT 和子集条件

> ID：14079966
> 
> 赞同：1
> 
> 时间：2012-12-29T08:22:25.137
> 
> 标签：mysql, sql, database, select

所以有一个主要的 WHERE 子句条件，我想要我的结果，但是我有另一个条件，我希望满足这两个条件的结果首先出现在结果数组中，然后是只满足主要条件的结果。一种可能的方法可能是首先根据主要结果进行选择，然后使用第二个条件进行操作。但我想看看是否有办法通过 mysql select 语句本身来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T08:29:28.370

重新阅读您的问题后，我了解您不想按第二个标准过滤结果，而是简单地重新排序。在这种情况下，请使用 custom `ORDER BY`，例如：

```
SELECT *
FROM mytable
WHERE x = 'major'
ORDER BY (y = 'minor') DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T08:29:57.157

在关闭的地方使用 with block to multipal

> 块引用

与 t 作为 {

select * from table a where a.columnname = 1

}, p 为 {

select * from table b where b.columnname = 2

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T08:30:41.147

您可以根据您的条件订购。

```
select some_columns 
  from a_table 
 where major_condition
 order by if(minor_condition, 1, 0) 
```

# c# - string.Format 日期转换问题

> ID：14079968
> 
> 赞同：1
> 
> 时间：2012-12-29T08:23:04.417
> 
> 标签：c#, datetime

我使用的是 Windows 8。我的文化是“en-IN”。但是日期时间的格式是 MM/dd/yyyy
尝试时

```
String.Format("{0:MM/dd/yyyy}", DateTime.Today); 
```

给出像 2012 年 12 月 29 日这样的格式。

请建议我该怎么做。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-29T08:33:20.337

目前尚不清楚问题是什么。如果只是使用连字符而不是斜杠，那可能是因为您的文化的默认日期分隔符是连字符。选项包括：

*   明确指定不同的文化（例如不变的文化）

    ```
    String.Format(CultureInfo.InvariantCulture, "{0:MM/dd/yyyy}", DateTime.Today); 
    ```

*   转义斜线：

    ```
    String.Format("{0:MM'/'dd'/'yyyy}", DateTime.Today); 
    ```

请注意，使用`DateTime.Today.ToString(...)`会比使用`string.Format`IMO 更简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T08:26:35.980

trt这个

```
 DateTime.Today.ToString("MM/dd/yyyy") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-29T08:42:11.920

“/”是根据您的（或指定的）文化翻译的[自定义日期分隔符。](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx#dateSeparator)如果你真的想要斜杠，你需要引用它们：

```
String.Format("{0:MM'/'dd'/'yyyy}", DateTime.Today); 
```

或[逃避](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx#escape)他们：

```
String.Format(@"{0:MM\/dd\/yyyy}", DateTime.Today); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-29T08:34:05.030

嗯，是的 - 您当前的文化用于许多与格式相关的设置；

在这里，试试这个：

```
// Change culture
Thread.CurrentThread.CurrentCulture = new System.Globalization.CultureInfo("en-IN");
Thread.CurrentThread.CurrentUICulture = new System.Globalization.CultureInfo("en-IN");

// prints 12-29-2012
Console.WriteLine(string.Format("{0:MM/dd/yyyy}", DateTime.Today));

// Invariant culture, so ignore any culture-based settings
// prints 12/29/2012
Console.WriteLine(string.Format(System.Globalization.CultureInfo.InvariantCulture, "{0:MM/dd/yyyy}", DateTime.Today)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-29T08:39:06.580

我认为你应该试试这个

```
 DateTime.Today.ToString("MM/dd/yyyy") 
```

# python - 无法在布局中更改大小

> ID：14079969
> 
> 赞同：1
> 
> 时间：2012-12-29T08:23:10.330
> 
> 标签：python, layout, pyqt, qdialog

好吧，我有一个上面有一个按钮的文本编辑器......我希望文本编辑器位于布局内，以便它增加和减小它的大小`QDialog`，但我不想对按钮做同样的事情，顺便说一句，它没有我想要的尺寸，也不能改变它。我能做些什么？

**代码：**

```
from PyQt4 import QtCore, QtGui
import sys
from PyQt4.QtCore import *
from PyQt4.QtGui import *
class TextEditorDlg(QDialog):
    def __init__(self, parent=None):
        QtGui.QDialog.__init__(self, parent)
        self.resize(500, 400)
        self.Grid = QtGui.QGridLayout(self)
        self.button = QtGui.QPushButton(self)
        self.Grid.addWidget(self.button, 0, 0)
        self.lineEdit = QtGui.QLineEdit(self)
        self.textEdit = QtGui.QTextEdit(self)
        self.Grid.addWidget(self.lineEdit, 1, 0)
        self.Grid.addWidget(self.textEdit, 2, 0)
if __name__ == '__main__':
    app = QApplication(sys.argv)
    myapp = TextEditorDlg()
    myapp.show()
    sys.exit(app.exec_()) 
```

**现在看到问题了吗？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-29T14:39:35.037

# javascript - 如果从浏览器设置中关闭，Javascript 将不起作用

> ID：14079971
> 
> 赞同：-4
> 
> 时间：2012-12-29T08:23:34.520
> 
> 标签：javascript

> **可能重复：**
> [如何检测 JavaScript 是否被禁用？](https://stackoverflow.com/questions/121203/how-to-detect-if-javascript-is-disabled)

如果我`javascript`从浏览器设置中禁用我的，它停止工作，我是否知道推荐用户启用其浏览器的最佳方法，`javascript`如果默认情况下它已关闭？有什么帮助吗？或者我的代码如何检测`javascript`是否关闭`browser`：/任何帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T08:26:46.180

使用`<noscript>`标签。并在此标签中添加一些信息。当用户启用 javascript 时显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T08:26:55.887

```
<noscript>
This page requires JavaScript, please turn it on.
</noscript> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T08:32:06.867

如果您出于某种原因不想使用该[`<noscript>`](https://developer.mozilla.org/en-US/docs/HTML/Element/noscript)标签，或者您想反其道而行之（仅在启用 JavaScript 时显示某些内容），您可以默认隐藏元素（`display:none;`通过 CSS 设置）。然后你有一个小的 JavaScript 向元素添加一个附加类，比如`js-enabled`. 然后你可以有一个 CSS 规则：

```
.js-enabled {
   display: block;
} 
```

当您的 JavaScript 应用该类时，该元素将变得可见。如果用户没有启用 JavaScript，则不会添加该类并且该元素将保持隐藏状态。

# android - 无法将焦点设置在第一个 edittext 字段上？

> ID：14079972
> 
> 赞同：0
> 
> 时间：2012-12-29T08:23:35.030
> 
> 标签：android, android-edittext, numberformatexception

**我无法将焦点设置在第一个 edittext 字段（以及下面的其他 3 个字段中）。代码是：**

```
k1_e=(EditText)findViewById(R.id.k1_editText);
k1_e.requestFocusFromTouch();
try{
k1=Float.parseFloat(k1_e.getText().toString());
}catch(Exception e) {
    Log.e("logtag", "Exception: " + e.toString());
}
k2_e=(EditText)findViewById(R.id.k2_editText);
try{
    k2=Float.parseFloat(k2_e.getText().toString());
}catch(Exception e) {
    Log.e("logtag", "Exception: " + e.toString());
}
al_e=(EditText)findViewById(R.id.al_editText);
try{
    al=Float.parseFloat(al_e.getText().toString());
}catch(Exception e) {
    Log.e("logtag", "Exception: " + e.toString());
}
alconst_e=(EditText)findViewById(R.id.al_const_editText);
try{
    al_const=Float.parseFloat(alconst_e.getText().toString()); 
}catch(Exception e) {
    Log.e("logtag", "Exception: " + e.toString());
} 
```

* * *

**当应用程序在模拟器上执行时，它会自动将焦点设置到最后一个 edittext 字段并抛出异常：**

```
12-29 08:10:05.241: E/logtag(769): Exception: java.lang.NumberFormatException: Invalid float: ""
12-29 08:10:05.261: E/logtag(769): Exception: java.lang.NumberFormatException: Invalid float: ""
12-29 08:10:05.261: E/logtag(769): Exception: java.lang.NumberFormatException: Invalid float: ""
12-29 08:10:05.271: E/logtag(769): Exception: java.lang.NumberFormatException: Invalid float: "" 
```

* * *

**什么是错误。我是初学者。请帮助**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T08:31:20.120

您的 k1_e.getText().toString() 返回`String`无法转换的 Float

**试试这个：**

这样做，让 `int flag = 0;`你的班级变得更优秀。并且当您第一次执行 getview 时，将标志设为 1；

**像这样：**

```
int flag = 0;

  getView()
{
if(flag == 0)
{
k1_e.requestFocusFromTouch();flag = 1;
}
  string abc = k1_e.getText().toString()
        if(abc != null && !abc.equals(""))
        {
         k1=Float.parseFloat(k1_e.getText().toString());
        }
    else
    {
      k1 = 0.0;
    }

} 
```

# android - 在水平滚动视图中设置线性布局的宽度

> ID：14079977
> 
> 赞同：0
> 
> 时间：2012-12-29T08:24:11.863
> 
> 标签：android, android-layout, horizontalscrollview

我有以下线性布局，我将它设置为 Horizo​​ntalScrollView

文件 menu.xml

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" android:id="@+id/menu"
android:orientation="vertical" android:background="#2f4f4f" android:layout_width="wrap_content" android:layout_height="fill_parent">

  <ListView android:id="@+id/list" android:layout_width="fill_parent" android:layout_height="wrap_content"
    android:background="#2f4f4f" android:cacheColorHint="#2f4f4f" android:scrollbars="none">
  </ListView>
</LinearLayout> 
```

文件：scrollview.xml

```
 <?xml version="1.0" encoding="utf-8"?>
 <HorizontalScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent" android:layout_height="fill_parent" android:background="#00ffffff" android:padding="0px"
android:layout_margin="0px" android:fadingEdge="none" android:fadingEdgeLength="0px" android:scrollbars="none">
    <LinearLayout android:id="@+id/top" android:layout_height="fill_parent" android:layout_width="fill_parent"
    android:orientation="horizontal" android:background="#ffffffff" android:padding="0px" android:layout_margin="0px">
    </LinearLayout>
</HorizontalScrollView> 
```

我正在尝试以编程方式设置线性布局的宽度，但我得到 ClassCastException。（LinearLayout$LayputParams 无法转换为 FrameLayout$LayputParams）

```
LayoutInflater inflater = LayoutInflater.from(this);
scrollView = inflater.inflate(R.layout.scrollview_xml, null);
setContentView(scrollView);
View menu = inflater.inflate(R.layout.menu_xml, null);
scrollView.addView(menu);
scrollView.getChildAt(0).setLayoutParams(new ViewGroup.LayoutParams(100,100)); 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T08:27:50.983

1.  由于[**scrollView**](http://developer.android.com/reference/android/widget/HorizontalScrollView.html)扩展了 FrameLayout ，因此您需要将其子项的 layoutParams 设置为具有 FrameLayout 的 layoutParams 。

2.  因为它说您有一个例外，因为您将 layoutParams 设置为错误的布局，请使用正确的布局：

    scrollView.getChildAt(0).setLayoutParams(new **FrameLayout** .LayoutParams(100,100));

3.  一般来说，如果您对布局的类型有任何疑问，请使用：

    scrollView.getChildAt(0).setLayoutParams(new **ViewGroup** .LayoutParams(100,100));

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T08:32:48.467

为什么要键入 layoutParams，什么时候可以直接使用它们，

```
scrollView.getChildAt(0).setLayoutParams(new LayoutParams(100,100)); 
```

# google-maps - 带有 Sencha 布局的 Google TreeMap

> ID：14079983
> 
> 赞同：0
> 
> 时间：2012-12-29T08:25:24.080
> 
> 标签：google-maps, layout, extjs, treemap, tabpanel

我在[ExtJS 布局浏览器中实现 Google](http://dev.sencha.com/deploy/ext-4.0.0/examples/layout-browser/layout-browser.html) [TreeMap](https://developers.google.com/chart/interactive/docs/gallery/treemap)时遇到问题。

我复制了与 html 文件相同的 google treemap 示例。`Geographic Spread`并像我对其他选项卡所做的那样，在选项卡中提供了 html 的引用。其他选项卡工作正常（因此我指向该 html 的方式没有错误）。

![在此处输入图像描述](../Images/7347584f519371bb74b3f513fc939512.png) 但我相信在使用 ExtJS 布局管理器时缺少一些库或需要一些额外的插件。

任何线索都深表感谢。

# ios - AFNetworking 和批处理/串行操作

> ID：14079993
> 
> 赞同：2
> 
> 时间：2012-12-29T08:27:03.760
> 
> 标签：ios, networking, process, afnetworking

我正在尝试使用`AFNetworking`. 例如：

```
[SomeApiICreated doNetworkingStuff success:^(NSString *message)
                           {
                             NSLog(@"Yay!");
                           }
                           failure:^(NSError *error)
                           {
                             NSLog(@"Oh noes!");
                           }]; 
```

现在在 doNetworkingStuff 中，我想做多个网络任务。例如

1.  获取应用令牌
2.  if ( `appTokenGot`) step3 else callFailure
3.  使用应用令牌获取东西列表
4.  if ( `listGot`) step5 否则`callFailure`
5.  等等

但我还想调用一个`doNetworkingStuff2`只执行第 3 步及以上的操作，基本上让我根据需要将操作排队，混合和匹配它们等。但所有这些都只需一个主调用，我可以说“是的，这行得通”，或“有问题”

这样做是`NSOperationQueue`正确的，还是“如果这个，那么这个”的嵌套函数阻止了最好的方法？

任何示例也会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T15:58:49.830

为什么不直接调用其他函数从成功/失败块中传递数据。例如，我在 App.net API 中使用了类似的东西。

```
[[KSADNAPIClient sharedAPI] postPath:@"stream/0/posts"
                              parameters:params
                                 success:^(AFHTTPRequestOperation *operation, id responseObject)
     {
         [[KSPostsController sharedController] addPosts:responseObject];
     }
                                 failure:^(AFHTTPRequestOperation *operation, NSError *error)
     {
         if (block) {
             block([NSArray array], error);
         }
     }]; 
```

这样我就不会在成功和失败块中堆积大量逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T10:48:35.717

AFAIK，最好的方法是使用完成回调来进行连续调用。请记住，您需要响应对象来执行后续步骤，因此您将在成功回调中接收此对象。