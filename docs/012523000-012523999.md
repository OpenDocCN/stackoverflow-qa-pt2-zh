# StackOverflow 问答 12523000-12523999

# php - 正则表达式删除链接但不在 img 标签内

> ID：12523001
> 
> 赞同：1
> 
> 时间：2012-09-21T01:04:47.363
> 
> 标签：php, regex

我经营一个邮寄网站。我设置了正则表达式来替换 html 电子邮件正文中的链接。

我用：

```
// remove entire anchors

$body=preg_replace('/<a[^>]*>(.*)<\/a>/iU','[Link Removed]', $body);

// remove links not wrapped in an anchor tag

$body= preg_replace('!((?:www|http://)[^ ]+)!', '[Link Removed]', $body); 
```

我遇到的问题是在 html 中放置了图像。当然，img src 被替换为 [Link Removed]，并且电子邮件中显示了损坏的图像。如果链接是图像的 src，我不希望替换链接。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T01:54:06.230

Try this:

```
$body= preg_replace('~(?<!src=["\'])(?:www|http://)[^ ]+~', '[Link Removed]', $body); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T02:08:00.607

我希望您知道与使用正则表达式处理 HTML 相关的问题？不幸的是，PHP 没有简单的替代方案

如果您使用否定的look-behind，您可以忽略`src`属性内的URL

此外，该`www`选项必须增强为`(?<!/)www`（`www`前面没有斜线）

这会做你想做的

```
$body= preg_replace('_(?<!src=["\'])(?:http://|(?<!/)www)\S+_', '[Link Removed]', $body); 
```

但请注意，没有什么可以阻止字符引用被用作属性值的分隔符，因此图像可能看起来像

```
<img src=&#34;http:www.mysite.com/image.png&#34;> 
```

但显然这不太可能

# php - Foreach 回显数组为 1 返回 3 个值

> ID：12523004
> 
> 赞同：0
> 
> 时间：2012-09-21T01:05:10.750
> 
> 标签：php, loops, foreach

我有以下奇怪的问题，我无法解决，我的循环返回一次唯一的部分，但是我在两个循环之前填充数组的两个部分，被用于每个循环。希望您能够帮助我。

```
$aBuild = array();
$part1 = "Test 1";
$part2 = "Test 2";  
$aBuild = array(1=> $part1, 2 => $part2); 
```

然后我有一个 foreach 循环从数据库中获取数据，在同一个循环中我这样做：

```
$aBuild[$iNumber] = $sOtherParts; 
```

将东西添加到数组中。在这个查询 foreach 循环结束时，我这样做：

```
ksort($aBuild);

foreach($aBuild as $values)
{
    echo  $values;  
} 
```

这个回声是每个 $sOtherParts 一次，但对于其中的每一个，它都会向其中添加 $part1 和 $part2：

像这样：

> 独特的部分 测试 1 测试 2 另一个独特的部分 测试 1 测试 2 真正独特的部分 测试 1 测试 2 等.. 独特的部分 测试 1 测试 2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T01:10:23.737

您也应该回显您的密钥。以下行可能不会替换原始数组中的数据：

```
$aBuild[$iNumber] = $sOtherParts; 
```

尝试更改 foreach 循环以打印出您的密钥：

```
ksort($aBuild);

foreach($aBuild as $key => $value)
{
    echo $key." => ".$value."<br />\n";
} 
```

没有看到实际的代码，很难说。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T01:13:04.377

您需要在 echo 语句的末尾添加一个换行符，因为 echo 不会自动提供类似 DOS 或 Bash 等中的 echo 的换行符。

此外，如果您的 $iNumber 变量只是一个递增变量，为什么不直接使用：

$aBuild[] = $sOtherParts;

那么你不应该需要ksort。

# java - 如何在 Android 中以编程方式设置背景可绘制对象

> ID：12523005
> 
> 赞同：325
> 
> 时间：2012-09-21T01:05:16.437
> 
> 标签：java, android, background, drawable

## 设置背景：

```
RelativeLayout layout =(RelativeLayout)findViewById(R.id.background);
layout.setBackgroundResource(R.drawable.ready); 
```

是最好的方法吗？

* * *

## 回答 #1

> 赞同：562
> 
> 时间：2012-09-21T01:23:56.193

`layout.setBackgroundResource(R.drawable.ready);`是正确的。
实现它的另一种方法是使用以下内容：

```
final int sdk = android.os.Build.VERSION.SDK_INT;
if(sdk < android.os.Build.VERSION_CODES.JELLY_BEAN) {
    layout.setBackgroundDrawable(ContextCompat.getDrawable(context, R.drawable.ready) );
} else {
    layout.setBackground(ContextCompat.getDrawable(context, R.drawable.ready));
} 
```

但我认为出现问题是因为您正在尝试加载大图像。
[这](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)是一个很好的教程如何加载大位图。

**更新：在 API 级别 22 中
弃用的 getDrawable(int) 现在在 API 级别 22**

`getDrawable(int )`中已弃用。您应该使用支持库中的以下代码：

```
ContextCompat.getDrawable(context, R.drawable.ready) 
```

如果您参考[ContextCompat.getDrawable](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/5.0.1_r1/android/support/v4/content/ContextCompat.java#ContextCompat.getDrawable%28android.content.Context%2Cint%29)的源代码，它会为您提供如下内容：

```
/**
 * Return a drawable object associated with a particular resource ID.
 * <p>
 * Starting in {@link android.os.Build.VERSION_CODES#LOLLIPOP}, the returned
 * drawable will be styled for the specified Context's theme.
 *
 * @param id The desired resource identifier, as generated by the aapt tool.
 *            This integer encodes the package, type, and resource entry.
 *            The value 0 is an invalid identifier.
 * @return Drawable An object that can be used to draw this resource.
 */
public static final Drawable getDrawable(Context context, int id) {
    final int version = Build.VERSION.SDK_INT;
    if (version >= 21) {
        return ContextCompatApi21.getDrawable(context, id);
    } else {
        return context.getResources().getDrawable(id);
    }
} 
```

[有关ContextCompat](http://developer.android.com/reference/android/support/v4/content/ContextCompat.html)的更多详细信息

从 API 22 开始，您应该使用该`getDrawable(int, Theme)`方法而不是 getDrawable(int)。

**更新：**
如果您使用的是 support v4 库，以下内容对于所有版本就足够了。

```
ContextCompat.getDrawable(context, R.drawable.ready) 
```

您需要在应用程序 build.gradle 中添加以下内容

```
compile 'com.android.support:support-v4:23.0.0' # or any version above 
```

或者在任何 API 中使用 ResourceCompat，如下所示：

```
import android.support.v4.content.res.ResourcesCompat;
ResourcesCompat.getDrawable(getResources(), R.drawable.name_of_drawable, null); 
```

* * *

## 回答 #2

> 赞同：116
> 
> 时间：2012-09-21T01:09:00.770

试试这个：

```
layout.setBackground(ContextCompat.getDrawable(context, R.drawable.ready)); 
```

对于 API 16<:

```
layout.setBackgroundDrawable(ContextCompat.getDrawable(context, R.drawable.ready)); 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-12-08T09:36:11.157

```
RelativeLayout relativeLayout;  //declare this globally 
```

现在，在 onCreate、onResume 等任何函数中

```
relativeLayout = new RelativeLayout(this);  
relativeLayout.setBackgroundResource(R.drawable.view); //or whatever your image is
setContentView(relativeLayout); //you might be forgetting this 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-07-28T13:11:33.867

您还可以设置任何图像的背景：

```
View v;
Drawable image=(Drawable)getResources().getDrawable(R.drawable.img);
(ImageView)v.setBackground(image); 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2016-03-30T10:36:40.973

我正在使用 minSdkVersion 16 和 targetSdkVersion 23。
以下对我有用，它使用

```
ContextCompat.getDrawable(context, R.drawable.drawable); 
```

而不是使用：

```
layout.setBackgroundResource(R.drawable.ready); 
```

而是使用：

```
layout.setBackground(ContextCompat.getDrawable(this, R.drawable.ready)); 
```

`getActivity()`如果从活动调用中使用，则在片段中使用`this`。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2021-08-22T09:52:10.107

如果你使用 AndroidX，你应该使用：

```
AppCompatResources.getDrawable(context, R.drawable.your_drawable) 
```

以前列出的方法已弃用。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-04-17T12:44:29.057

如果您的背景现在在 drawable 文件夹中，请尝试将图像从 drawable 移动到项目中的 drawable-nodpi 文件夹。这对我有用，似乎其他图像是由他们自己重新调整的..

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-09-22T13:54:53.010

通过将 this 添加到类的顶部（在任何方法之前），使用[黄油刀](http://jakewharton.github.io/butterknife/)将可绘制资源绑定到变量。

```
@Bind(R.id.some_layout)
RelativeLayout layout;
@BindDrawable(R.drawable.some_drawable)
Drawable background; 
```

然后在您的一种方法中添加

```
layout.setBackground(background); 
```

这就是你所需要的

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-02-26T00:04:02.700

```
if (android.os.Build.VERSION.SDK_INT < Build.VERSION_CODES.JELLY_BEAN)
     layout.setBackgroundDrawable(getResources().getDrawable(R.drawable.ready));
else if(android.os.Build.VERSION.SDK_INT < Build.VERSION_CODES.LOLLIPOP_MR1)
     layout.setBackground(getResources().getDrawable(R.drawable.ready));
else
     layout.setBackground(ContextCompat.getDrawable(this, R.drawable.ready)); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-05-19T10:32:18.563

试一试`ViewCompat.setBackground(yourView, drawableBackground)`

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-07-24T23:07:43.717

试试这个。

```
 int res = getResources().getIdentifier("you_image", "drawable", "com.my.package");
 preview = (ImageView) findViewById(R.id.preview);
 preview.setBackgroundResource(res); 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-02-23T08:45:26.540

```
setBackground(getContext().getResources().getDrawable(R.drawable.green_rounded_frame)); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-12-28T06:44:25.850

试试这个代码：

```
Drawable thumb = ContextCompat.getDrawable(getActivity(), R.mipmap.cir_32);
mSeekBar.setThumb(thumb); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2022-01-26T06:54:01.360

我有 4 个用于启动画面的片段。我可以通过此代码更改片段来更改背景

```
screen_main=(ConstraintLayout)view.findViewById(R.id.screen_main);
    screen_main.setBackground(getContext().getResources().getDrawable(R.color.bg_screen1)); 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2017-12-08T14:49:08.520

在 app/res/ **your_xml_layout_file** .xml里面

1.  为您的父布局分配一个名称。
2.  转到您的 MainActivity 并通过调用 findViewById(R.id."given_name") 找到您的 RelativeLayout。
3.  通过调用 setBackgroundColor() 方法，将布局用作经典对象。

# facebook-graph-api - Graph API：分页中的访问令牌，我做错了吗？

> ID：12523006
> 
> 赞同：0
> 
> 时间：2012-09-21T01:05:16.860
> 
> 标签：facebook-graph-api, paging, access-token, facebook-access-token

我正在使用 Facebook Graph API 从我的 facebook 页面获取一些信息以显示在网站上。我将访问令牌保存在我的 php 文件中，并使用 curl 调用图形 API 以使其隐藏。但是，由于您可以看到结果，因此我的访问令牌出现在“分页”区域中，如下所示：

```
"paging": {
      "previous": "https://graph.facebook.com/[MY_ID]/posts?fields=id,from,message,icon,created_time,updated_time&limit=10&access_token=[MY_TOKEN]&since=1348180212&__previous=1",
      "next": "https://graph.facebook.com/[MY_ID]/posts?fields=id,from,message,icon,created_time,updated_time&limit=10&access_token=[MY_TOKEN]&until=1348016106"
   } 
```

当有更多内容可用时，无法删除分页部分，对吗？我也不能使用 curl 选项来不立即打印出结果（由于服务器限制），所以我不能先捕获结果来做我想做的事。我是不是把整件事都弄错了，还是有一个我可以发送的参数可以解决这个问题？非常感谢您的任何帮助和见解！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T20:24:51.477

没关系，事实证明这是一个非常随机的路由问题。

# drupal - Drupal 6.x 和 Ubercart 2.x 中对 uc_cart_checkout_pane.inc 的更改无效

> ID：12523008
> 
> 赞同：0
> 
> 时间：2012-09-21T01:05:39.510
> 
> 标签：drupal, ubercart

我只想将“数量”列向右移动，使其位于购物车/结帐页面上的“价格”列旁边。我试着用`hook_alter_form`. 我尝试制作一个自定义模块，在 中进行`template.php`并`uc_cart_checkout_pane.inc`直接更改，但我所做的任何更改都不会生效。

我已经清除了我的缓存，运行了 cron，一切都......它只是不工作。

我试过禁用模块，它也没有效果。什么可能会阻止直接在核心文件中进行的更改生效。如果我删除 50 行随机代码，它会使网站崩溃，所以它似乎是直接从 加载的`uc_cart_checkout_pane.inc`，但是如果我进行更改，甚至进行`t('Subtotal')`say `t('Subtotalchanged')`，它不会做任何事情。

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T16:22:41.623

显然，UC Discounts (Alternative) 模块覆盖了模块中的 uc_checkout_pane_cart_review。这很令人困惑，因为我的理解是主题覆盖应该优先于模块，但事实并非如此。

我正在向他们提交错误报告以了解发生了什么，但这就是阻止我进行更改的原因。

# python - pysnmp 4.2.3：pysnmp.smi.error.SmiError：importSymbols：空 MIB 模块名称

> ID：12523010
> 
> 赞同：0
> 
> 时间：2012-09-21T01:06:23.323
> 
> 标签：python, pysnmp

我有两种情况，都[`SNMP.py`在这个答案中](https://stackoverflow.com/a/7791143/667301)引用：

**pysnmp (v4.2.3) 和 pysnmp-mibs (v0.1.4)**：

```
>>> # pysnmp-mibs 0.1.4 and pysnmp 4.2.3
>>> from SNMP import v2c
>>> snmp = v2c('172.16.1.1', 'public')
>>> snmp.walk('ifName')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "SNMP.py", line 115, in walk
    (('', oid),),
  File "/usr/local/lib/python2.6/dist-packages/pysnmp-4.2.3-py2.6.egg/pysnmp/entity/rfc3413/oneliner/cmdgen.py", line 449, in nextCmd
  File "/usr/local/lib/python2.6/dist-packages/pysnmp-4.2.3-py2.6.egg/pysnmp/entity/rfc3413/oneliner/cmdgen.py", line 150, in makeReadVarBinds
  File "/usr/local/lib/python2.6/dist-packages/pysnmp-4.2.3-py2.6.egg/pysnmp/entity/rfc3413/oneliner/mibvar.py", line 161, in resolveWithMib
  File "/usr/local/lib/python2.6/dist-packages/pysnmp-4.2.3-py2.6.egg/pysnmp/smi/builder.py", line 295, in importSymbols
pysnmp.smi.error.SmiError: importSymbols: empty MIB module name
>>> 
```

**pysnmp (v4.2.2) 和 pysnmp-mibs (v0.1.3)**：

```
>>> # After removing pysnmp / pysnmp-mibs / pyasn.1 and installing with:
>>> #   easy_install pysnmp==4.2.2 pysnmp-mibs==0.1.3
>>> snmp = v2c('172.16.1.1', 'public')
>>> snmp.walk('ifName')
[SNMPObject(modName='IF-MIB', symName='ifName', index=1, value='Null0'), SNMPObject(modName='IF-MIB', symName='ifName', index=2, value='Internal-Data0/0'), SNMPObject(modName='IF-MIB', symName='ifName', index=3, value='Ethernet0/0'), SNMPObject(modName='IF-MIB', symName='ifName', index=4, value='Ethernet0/1'), SNMPObject(modName='IF-MIB', symName='ifName', index=5, value='Ethernet0/2'), SNMPObject(modName='IF-MIB', symName='ifName', index=11, value='Internal-Data0/1'), SNMPObject(modName='IF-MIB', symName='ifName', index=12, value='_internal_loopback'), SNMPObject(modName='IF-MIB', symName='ifName', index=13, value='Virtual254'), SNMPObject(modName='IF-MIB', symName='ifName', index=14, value='Vlan1'), SNMPObject(modName='IF-MIB', symName='ifName', index=15, value='OUTSIDE'), SNMPObject(modName='IF-MIB', symName='ifName', index=16, value='INSIDE')]
>>> 
```

**问题**

当我使用 pysnmp v4.2.3 时有什么问题？问题是`SNMP.py`在 pysnmp 库中还是在某个地方？

**更新 1**

当我`cmdgen.MibVariable(oid).loadMibs(),`按照 Ilya 的建议使用时，我仍然会收到错误...

```
pysnmp.smi.error.NoSuchObjectError: NoSuchObjectError({'str': "Can't resolve node name ::('ifName',) at <pysnmp.smi.view.MibViewController instance at 0x2af9e60>"}) 
```

如何解决此错误？我正在使用以下`SNMP.py`代码：

* * *

```
from collections import namedtuple as NT
from datetime import datetime
import string
import re

from pysnmp.entity.rfc3413.oneliner import cmdgen
from pysnmp.smi import builder, view, error
from numpy import int64, float64

# NOTE!!!
# It is best to install the pysnmp-mibs package from pypi... this makes
# a lot of symbolic MIB names "just work"

# See this link below for many oneliner examples...
# http://pysnmp.sourceforge.net/examples/4.x/v3arch/oneliner/index.html

class v2c(object):
    """Build an SNMPv2c manager object"""
    def __init__(self, ipaddr=None, device=None, community='Public',
        retries=3, timeout=9):
        self.device = device
        self.ipaddr = ipaddr
        self.community = community
        self.SNMPObject = NT('SNMPObject', ['modName', 'datetime', 'symName',
            'index', 'value'])
        self.SNMPIndexed = NT('SNMPIndexed', ['modName', 'datetime', 'symName',
            'index', 'value'])
        self.query_timeout = float(timeout)/int(retries)
        self.query_retries = int(retries)
        self._index = None

        self.cmdGen = cmdgen.CommandGenerator()

    def index(self, oid=None):
        """Build an SNMP Manager index to reference in get or walk operations.  First v2c.index('ifName').  Then, v2c.get_index('ifHCInOctets', 'eth0') or v2c.walk_index('ifHCInOctets').  Instead of referencing a numerical index, the index will refer to the value that was indexed."""
        self._index = dict()
        self._intfobj = dict()
        snmpidx = self.walk(oid=oid)
        for ii in snmpidx:
            ## the dicts below are keyed by the SNMP index number
            # value below is the text string of the intf name
            self._index[ii.index] = ii.value
            # value below is the intf object
            if not (self.device is None):
                self._intfobj[ii.index] = self.device.find_match_intf(ii.value,
                    enforce_format=False)

    def walk_index(self, oid=None):
        """Example usage, first index with v2c.index('ifName'), then v2c.get_index('ifHCInOctets', 'eth0')"""
        if not (self._index is None):
            tmp = list()
            snmpvals = self.walk(oid=oid)
            for idx, ii in enumerate(snmpvals):
                tmp.append([ii.modName, datetime.now(), ii.symName,
                    self._index[ii.index], ii.value])

            return map(self.SNMPIndexed._make, tmp)
        else:
            raise ValueError, "Must populate with SNMP.v2c.index() first"

    def walk(self, oid=None):
        if isinstance(self._format(oid), tuple):
            errorIndication, errorStatus, errorIndex, \
            varBindTable = self.cmdGen.nextCmd(
                        cmdgen.CommunityData('test-agent', self.community),
                        cmdgen.UdpTransportTarget((self.ipaddr, 161),
                        retries=self.query_retries,
                        timeout=self.query_timeout),
                        self._format(oid),
                    )
            # Parsing only for now... no return value...
            self._parse(errorIndication, errorStatus, errorIndex, varBindTable)
        elif isinstance(oid, str):
            errorIndication, errorStatus, errorIndex, \
                             varBindTable = self.cmdGen.nextCmd(
                # SNMP v2
                cmdgen.CommunityData('test-agent', self.community),
                # Transport
                cmdgen.UdpTransportTarget((self.ipaddr, 161)),
                cmdgen.MibVariable(oid).loadMibs(),
                )
            return self._parse_resolve(errorIndication, errorStatus,
                errorIndex, varBindTable)
        else:
            raise ValueError, "Unknown oid format: %s" % oid

    def get_index(self, oid=None, index=None):
        """In this case, index should be similar to the values you indexed from... i.e. if you index with ifName, get_index('ifHCInOctets', 'eth0')"""
        if not (self._index is None) and isinstance(index, str):
            # Map the interface name provided in index to an ifName index...
            snmpvals = None
            for idx, value in self._index.items():
                if index == value:
                    # if there is an exact match between the text index and the
                    # snmp index value...
                    snmpvals = self.get(oid=oid, index=idx)
                    break
            else:
                # TRY mapping the provided text index into an interface obj
                _intfobj = self.device.find_match_intf(index)
                if not (_intfobj is None):
                    for key, val in self._intfobj.items():
                        if (val==_intfobj):
                            snmpvals = self.get(oid=oid, index=key)
                            break

            # Ensure we only parse a valid response...
            if not (snmpvals is None):
                tmp = [snmpvals.modName, datetime.now(), snmpvals.symName,
                    self._index[snmpvals.index], snmpvals.value]
                return self.SNMPIndexed._make(tmp)

        elif not isinstance(index, str):
            raise ValueError, "index must be a string value"
        else:
            raise ValueError, "Must populate with SNMP.v2c.index() first"

    def get(self, oid=None, index=None):
        if isinstance(self._format(oid), tuple):
            errorIndication, errorStatus, errorIndex, \
            varBindTable = self.cmdGen.getCmd(
                        cmdgen.CommunityData('test-agent', self.community),
                        cmdgen.UdpTransportTarget((self.ipaddr, 161),
                        retries=self.query_retries,
                        timeout=self.query_timeout),
                        self._format(oid),
                    )
            # Parsing only for now... no return value...
            self._parse(errorIndication, errorStatus, errorIndex, varBindTable)
        elif isinstance(oid, str) and isinstance(index, int):
            errorIndication, errorStatus, errorIndex, \
                             varBindTable = self.cmdGen.getCmd(
                # SNMP v2
                cmdgen.CommunityData('test-agent', self.community),
                # Transport
                cmdgen.UdpTransportTarget((self.ipaddr, 161)),
                cmdgen.MibVariable(oid).loadMibs(),
                )
            return self._parse_resolve(errorIndication, errorStatus,
                errorIndex, [varBindTable])[0]
        else:
            raise ValueError, "Unknown oid format: %s" % oid

    def bulkwalk(self, oid=None):
        """SNMP bulkwalk a device.  NOTE: This often is faster, but does not work as well as a simple SNMP walk"""
        if isinstance(self._format(oid), tuple):
            errorIndication, errorStatus, errorIndex, varBindTable = self.cmdGen.bulkCmd(
                        cmdgen.CommunityData('test-agent', self.community),
                        cmdgen.UdpTransportTarget((self.ipaddr, 161),
                        retries=self.query_retries,
                        timeout=self.query_timeout),
                0,
                25,
                self._format(oid),
                )
            return self._parse(errorIndication, errorStatus,
                errorIndex, varBindTable)
        elif isinstance(oid, str):
            errorIndication, errorStatus, errorIndex, varBindTable = self.cmdGen.bulkCmd(
                        cmdgen.CommunityData('test-agent', self.community),
                        cmdgen.UdpTransportTarget((self.ipaddr, 161),
                        retries=self.query_retries,
                        timeout=self.query_timeout),
                0,
                25,
                cmdgen.MibVariable(oid).loadMibs(),
                )
            return self._parse_resolve(errorIndication, errorStatus,
                errorIndex, varBindTable)
        else:
            raise ValueError, "Unknown oid format: %s" % oid

    def _parse_resolve(self, errorIndication=None, errorStatus=None,
        errorIndex=None, varBindTable=None):
        """Parse MIB walks and resolve into MIB names"""
        retval = list()
        if errorIndication:
            print errorIndication
        else:
            if errorStatus:
                print '%s at %s\n' % (
                    errorStatus.prettyPrint(),
                    varBindTable[-1][int(errorIndex)-1]
                    )
            else:
                for varBindTableRow in varBindTable:
                    for oid, val in varBindTableRow:
                        (symName, modName), indices = cmdgen.mibvar.oidToMibName(
                            self.cmdGen.mibViewController, oid
                            )
                        val = cmdgen.mibvar.cloneFromMibValue(
                            self.cmdGen.mibViewController, modName, symName,
                            val)
                        # Try to parse the index as an int first,
                        # then as a string
                        try:
                            index = int(string.join(map(lambda v: v.prettyPrint(), indices), '.'))
                        except ValueError:
                            index = str(string.join(map(lambda v: v.prettyPrint(), indices), '.'))

                        # Re-format values as float or integer, if possible...
                        tmp = val.prettyPrint()
                        if re.search(r"""^\s*\d+\s*$""", tmp):
                            value = int64(tmp)
                        elif re.search(r"""^\s*\d+\.\d+\s*$""", tmp):
                            value = float64(tmp)
                        else:
                            value = tmp

                        retval.append(self.SNMPObject._make([modName,
                            datetime.now(), symName, index, value]))
            return retval

    def _parse(self, errorIndication, errorStatus, errorIndex,
        varBindTable):
        if errorIndication:
           print errorIndication
        else:
            if errorStatus:
                print '%s at %s\n' % (
                    errorStatus.prettyPrint(),
                    errorIndex and varBindTable[-1][int(errorIndex)-1] or '?'
                    )
            else:
                for varBindTableRow in varBindTable:
                    for name, val in varBindTableRow:
                        print '%s = %s' % (name.prettyPrint(), val.prettyPrint())

    def _format(self, oid):
        """Format a numerical OID in the form of 1.3.4.1.2.1 into a tuple"""
        if isinstance(oid, str):
            if re.search('(\d+\.)+\d+', oid):
                tmp = list()
                for ii in oid.split('.'):
                    tmp.append(int(ii))
                return tuple(tmp)
        else:
            return oid 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T05:48:51.487

除了 MIB 访问接口的其他更改之外，pysnmp 开发人员认为 an-empty-string-as-a-wildcard-indicator 太容易出错，因此他们将其替换为显式调用`MibVariable.loadModules()`。

因此，如果 pysnmp.version 存在并表明它是 4.2.3 或更高版本，`SNMP.py`您应该替换：

```
...
(('', oid),),
... 
```

有类似的东西：

```
...
cmdgen.MibVariable(oid).loadMibs(),
... 
```

这是`loadMibs()`施展魔法的方法。在此处查看有关 MibVariable 用法的更多信息，并[在](http://pysnmp.sourceforge.net/docs/current/index.html#MANAGED-OBJECT-NAME-VALUE)[此处查看](http://pysnmp.sourceforge.net/examples/current/v3arch/oneliner/manager/getgen.html)其他详细信息。

顺便说一句，MibVariable 似乎可以自己处理 OID 检测和转换，因此您可能不需要在`SNMP.py`

# asp.net - 如何修剪 sql 查询的结果并删除重复项？

> ID：12523015
> 
> 赞同：1
> 
> 时间：2012-09-21T01:07:31.100
> 
> 标签：asp.net, sql, sql-server

我有一个 sql 查询，它返回名称，附加当前日期时间，句点/句号用作分隔符。例如，结果可能如下所示：

```
John.2010-10-9
Richard.2012-1-11
John.2011-1-1 
```

我想保留的是

```
John
Richard 
```

我怎样才能做到这一点？感谢您的关注。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T01:12:57.070

试试这个。

```
SELECT DISTINCT SUBSTRING_INDEX(your_column, '.', 1)
FROM your_table 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T01:14:47.330

试试这个，

```
SELECT DISTINCT SUBSTRING(columnName,1,(CHARINDEX('.', columnName) - 1))
FROM tableName 
```

[**SQLFiddle 演示**](http://sqlfiddle.com/#!6/0c287/5)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T20:52:54.347

SELECT DISTINCT SUBSTRING(columnname, 0, CHARINDEX('.', columnname)) from tablename

# mvc-mini-profiler - MiniProfiler 抛出异常“路径中的非法字符”

> ID：12523016
> 
> 赞同：0
> 
> 时间：2012-09-21T01:07:35.450
> 
> 标签：mvc-mini-profiler

我开始使用[MiniProfiler](http://miniprofiler.com/)，发现它在开发我的 MVC 4 应用程序时非常有用。

但是，我只是在一个相当复杂的项目中添加了一个新的控制器操作和视图，现在 MiniProfiler 在控制器返回控制后抛出一个异常。

异常文本是*Illegal Character in Path*。

*调用堆栈*位置是

> MiniProfiler.dll!StackExchange.Profiling.MVCHelpers.ProfilingActionFilter.OnActionExecuted(System.Web.Mvc.ActionExecutedContext filterContext) 第 58 行

我的控制器动作和视图都非常简单。

**控制器动作**

```
 [AllowAnonymous]
    public ActionResult ReleaseNotes(string name)
    {
        CheckInput(name);

        string notesPath = Server.MapPath("~/Content/ReleaseNotes/" + name + ".html"); 
        string notes = null;

        if (System.IO.File.Exists(notesPath))
        {
            notes = System.IO.File.ReadAllText(notesPath);
        }

        return View(notes);
    }

    private void CheckInput(string name)
    {
        if (name.Length > 0x100 || !name.IsAlphaNumeric()) throw new ArgumentException("Name is invalid.");
    } 
```

注意：*System.IO.File.ReadAllText*成功读取 HTML 文件的内容。该路径是有效的。

**看法**

```
@model string

@{
    ViewBag.Title = "Release Notes";
}

<h2>Release Notes</h2>

@if (string.IsNullOrWhiteSpace(Model))
{
    <p>No release notes were found for the specified release.</p>
}
else
{
    @Html.Raw(Model)
} 
```

我暂时禁用了 MiniProfiler。关于如何让它再次工作的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T01:38:26.237

事实证明，这个错误是这个问题的一个奇怪表现

[从我的控制器调用索引视图时路径中有非法字符](https://stackoverflow.com/q/5635383/141172)

我正在传递一个字符串作为模型。由于方法重载的解析方式，MVC 认为 HTML 文件的内容是我要加载的视图的名称（难怪它抱怨路径...）。

有趣的是，调试器一直持续到我的控制器操作返回，然后才抛出异常。在我禁用 MiniProfiler 后，我的应用程序的全局异常处理程序捕获并记录了细节。

我仍然不确定为什么问题会出现在 MiniProfiler 中。

# java - Google App Engine 中的有序列表 - JPA

> ID：12523017
> 
> 赞同：0
> 
> 时间：2012-09-21T01:07:36.253
> 
> 标签：java, google-app-engine, list, jpa

Comics 对象可以有多个 Chapter 对象。

我在`Comics`课堂上有这个：

```
@OneToMany(targetEntity=Chapter.class, mappedBy="comics", fetch=FetchType.LAZY, cascade={CascadeType.PERSIST, CascadeType.REMOVE})
private List<Chapter> chapters = null; 
```

我在漫画中添加章节的方法：

```
public Chapter addChapter(Chapter chapter, String key) {
    EntityManager em = EMF.get().createEntityManager();
    EntityTransaction tx = null;
    Comics comics = null;
    try{
        tx = em.getTransaction();
        tx.begin();

        comics = em.find(Comics.class, KeyFactory.stringToKey(key));
        chapter.setPages( new LinkedList<Page>() );

        comics.getChapters().add(chapter);

        tx.commit();
    }catch(Exception ex){
        ex.printStackTrace();
        if(tx != null && tx.isActive())
            tx.rollback();
    } finally{
        em.close();
    }

    return chapter;
} 
```

我看漫画的方法：

```
public Comics read(String key) throws IllegalAccessException, InvocationTargetException{
    EntityManager em = EMF.get().createEntityManager();
    Comics comics = new Comics();
    try{
        Comics emComics = em.find(Comics.class, KeyFactory.stringToKey(key));
        BeanUtils.copyProperties(comics, emComics);
        comics.setChapters(new LinkedList<Chapter> (emComics.getChapters()));

    }finally{
        em.close();
    }
    return comics;
} 
```

当我保存 new`Comics`时，我还有：

```
comics.setChapters( new LinkedList<Chapter>() ); 
```

问题是该`read`方法返回意外的`chapters`. `chapters`按顺序显示的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T02:53:39.830

您可以使用**@OrderBy**注释：

例如：

```
@OneToMany(targetEntity=Chapter.class, mappedBy="comics", fetch=FetchType.LAZY, cascade={CascadeType.PERSIST, CascadeType.REMOVE})
@OrderBy("chapterNumber")
private List<Chapter> chapters = null; 
```

这是假设有一个可比较的**chapterNumber**字段

# java - 删除文本文件中较短的字符串

> ID：12523019
> 
> 赞同：0
> 
> 时间：2012-09-21T01:08:54.997
> 
> 标签：java, file

如何在如下所示的文本文件中删除较短的字符串：

```
987987
9879872938472
987234
234987234987
32423 
```

我希望能够删除少于 5 个字符的字符串。我想知道如何在使用 Java 方面做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T01:25:13.207

```
String string="987987 9879872938472 987234 234987234987 32423";
    String[] splitString=string.split(" ");

    for(int i=0;i<splitString.length;i++){
        if(splitString[i].length()<5){
            continue;
        }
        //write to file 
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T01:37:59.023

我假设你想要这样的东西。

```
// to read in the file    
Scanner sc = new Scanner(new File("file"));

// read in each line and check to see if they are greater
// than 5 characters in length
while sc.hasNextLine(){
    String line = sc.nextLine().trim();
    if(line.length() >= 5) {
        System.out.println(line);
        // or code here to output to some file.
    }
} 
```

# java - 如何放大 JavaFX 2 Canvas 节点？

> ID：12523033
> 
> 赞同：8
> 
> 时间：2012-09-21T01:12:15.430
> 
> 标签：java, javafx-2, scale

现在我正在`GraphicsContext`为我的`canvas`节点抓取并尝试

```
gc.scale(2, 2); 
```

在我`canvas`的身上，我有几十种方法可用。所以我知道必须有一些东西可以放大。但是我的尝试没有产生明显的“增长”或“缩放”。我需要打电话来应用或重绘它吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T01:46:28.647

我认为这`gc.scale(2,2)`会将您在画布上绘制的下一个内容缩放 2 倍，而不是您已经绘制的现有内容。

如果要缩放画布，可以在画布上设置变换，而不是图形上下文。

```
canvas.setScaleX(2);
canvas.setScaleY(2); 
```

如果您希望缩放的画布反映在布局管理器的布局计算中，那么您可以将其包装在一个组中，并且如果您想在裁剪部分画布的缩放画布上进行类似缩放的效果，那么您可以将ScrollPane 中的画布并为其定义视口或在画布节点上设置剪辑。

*更新讨论像素化问题*

为避免放大时出现像素化问题，我认为您需要记录迄今为止绘制的所有图形命令，然后当您要更改缩放因子时，清除画布，将新比例应用于画布，然后重播所有图形命令。也许像 svg 这样的格式可以用来记录图形命令。

或者您可以只使用场景图并绘制到它而不是画布，那么您也不会遇到像素化问题。

我认为这里需要注意的重要一点是，canvas 应该是一种即时模式触发和忘​​记的东西，而不是像场景图这样的保留模式绘图服务。

# php - 根据用户想要访问的页面在另一个页面中加载静态页面

> ID：12523034
> 
> 赞同：0
> 
> 时间：2012-09-21T01:12:27.180
> 
> 标签：php, javascript, jquery, codeigniter

‎'requestedPageType' 是我的应用程序中的 url 参数。每当用户登录时，他都会看到仪表板。仪表板采用请求的PageType 值和 jquery load() 的正确视图。因此，如果'requestedPageType=userProfile'，CodeIgniter 中的 userProfile 视图将使用 jquery 加载和附加。我可以根据用户尝试查看的页面将单个页面加载到dashboard.php中的另一种方法是什么？

以下是我到目前为止的代码示例：

```
if ($(document).getUrlParam("requestedPageType") === 'startpage') {
    // loads the wall when the user firsts logs in
        jQuery('#main').load('<?=base_url()?>index.php/routers/startpage');
    } else if ($(document).getUrlParam('requestedPageType') === 'wall_1') {
        var ide2 = $(document).getUrlParam("churchid");
        // loads wall_1
        $('#main').load('<?=base_url()?>index.php/routers/wall_1',{id:ide2});
        $('#logoTd').remove();
} else if ($(document).getUrlParam("requestedPageType") === 'userProfiles') {
    // loads the wall when the user firsts logs in
    var ide = $(document).getUrlParam("id");
        jQuery('#main').load('<?=base_url()?>index.php/routers/userProfiles',{id:ide});
} else if ($(document).getUrlParam("requestedPageType") === 'addEditUserInfo') {
    var ide1 = $(document).getUrlParam("id");
    jQuery('#main').load('<?=base_url()?>index.php/routers/addEditUserInfo', {id:ide1});
} if ($(document).getUrlParam("loggingStatus") === 'loggedIn') {
    $("#showUserBlink").fadeIn(1000); // show and blink when user first logs in

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T01:17:37.370

在 PHP 中做重定向和东西。无论如何，您都要支付发送新请求的费用，只需将参数转发到 PHP 脚本，然后该脚本可以决定向用户显示什么，无论是重定向还是包含。

如果用户修改参数以编辑 ID 为 1 的用户信息（可能是您！），那么您现在提出的方式可能会出现问题。如果您正确地对服务器端进行编码以检测此类行为，那么您已经获得了服务器端所需的所有逻辑，并且无需为此使用 javascript。

# java - 尝试使用 Eclipse 码头访问 xml 文件时，gwt requestbuilder 返回 404 NOT_FOUND 错误

> ID：12523038
> 
> 赞同：-1
> 
> 时间：2012-09-21T01:12:40.560
> 
> 标签：java, gwt, embedded-jetty

我正在使用 gwt2.4 并且我正在尝试使用 gwt requestbuilder 访问一个简单的 xml 文件。我正在使用 Eclipse 和嵌入式码头服务器。

项目结构：

myfooApp 战争 person.xml

我正在使用地点和活动。

我不知道为什么，但是当我尝试访问 xml 文件时出现 404 错误。

它是一个标准的 requestbuilder 代码。

```
RequestBuilder builder = new RequestBuilder(RequestBuilder.GET, GWT.getModuleBaseURL()+"/person.xml");
try{
    builder.sendRequest(null, new RequestCallback() {
        public void onResponseReceived(Request request, Response response) {
            view.getLabel().setText(response.getText());
        }

        public void onError(Request request, Throwable exception) {
            view.getLabel().setText("There was an error! "+exception.getMessage());
        }
    });
}catch(RequestException e){
    view.getLabel().setText("Unable to build the request.");
} 
```

我不确定这是否与问题有关，但 GWT.getModuleBaseURL 返回：127.0.0。1:88 88/myFooApp

但正确的 URL 是：12 7.0.0.1:8888/myFooApp.html?gwt.codesvr=127.0.0.1:9 997#FileDisplayPlace:side2

这个问题的原因可能是什么？以及如何解决。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T08:51:03.317

`GWT.getModuleBaseURL()`返回 GWT 生成文件的“文件夹”（*.nocache.js 和*.cache.*文件所在的位置）。

如果`person.xml`是您的 HTML 主机页面 (myFooApp.html) 的同级，则使用`GWT.getHostPageBaseURL()`. 在你的情况下，它会是`http://127.0.0.1:8888`.

# python - 如何在 Python 中跟踪日志文件？

> ID：12523044
> 
> 赞同：91
> 
> 时间：2012-09-21T01:13:58.340
> 
> 标签：python, tail

我想在 Python 中使用 tail -F 或类似的输出而不阻塞或锁定。我在这里找到了一些非常古老的代码，但我认为现在必须有更好的方法或库来做同样的事情[。](http://code.activestate.com/recipes/436477-filetailpy/)有人知道吗？

理想情况下，我`tail.getNewData()`每次想要更多数据时都可以调用类似的东西。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-09-21T02:09:27.790

## 非阻塞

如果您在 linux 上（因为 windows 不支持在文件上调用 select），您可以将 subprocess 模块与 select 模块一起使用。

```
import time
import subprocess
import select

f = subprocess.Popen(['tail','-F',filename],\
        stdout=subprocess.PIPE,stderr=subprocess.PIPE)
p = select.poll()
p.register(f.stdout)

while True:
    if p.poll(1):
        print f.stdout.readline()
    time.sleep(1) 
```

这会轮询输出管道以获取新数据并在可用时打印它。通常`time.sleep(1)`and`print f.stdout.readline()`将被替换为有用的代码。

## 阻塞

您可以使用 subprocess 模块而无需额外的 select 模块调用。

```
import subprocess
f = subprocess.Popen(['tail','-F',filename],\
        stdout=subprocess.PIPE,stderr=subprocess.PIPE)
while True:
    line = f.stdout.readline()
    print line 
```

这也将在添加新行时打印它们，但它会阻塞直到尾部程序关闭，可能使用`f.kill()`.

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2012-09-21T01:25:39.760

使用[sh 模块](http://amoffat.github.io/sh/)（pip install sh）：

```
from sh import tail
# runs forever
for line in tail("-f", "/var/log/some_log_file.log", _iter=True):
    print(line) 
```

[更新]

由于带有 =True 的 sh.tail`_iter`是一个生成器，因此您可以：

```
import sh
tail = sh.tail("-f", "/var/log/some_log_file.log", _iter=True) 
```

然后你可以“getNewData”：

```
new_data = tail.next() 
```

请注意，如果尾部缓冲区为空，它将阻塞，直到有更多数据（根据您的问题，不清楚在这种情况下您要做什么）。

[更新]

> 如果您将 -f 替换为 -F，这将有效，但在 Python 中它将被锁定。如果可能的话，我会对拥有一个可以在需要时调用以获取新数据的函数更感兴趣。– 伊莱

容器生成器将尾调用放置在 while True 循环中并捕获最终的 I/O 异常将具有与 -F 几乎相同的效果。

```
def tail_F(some_file):
    while True:
        try:
            for line in sh.tail("-f", some_file, _iter=True):
                yield line
        except sh.ErrorReturnCode_1:
            yield None 
```

如果文件变得不可访问，生成器将返回 None。但是，如果文件可访问，它仍然会阻塞，直到有新数据。我还不清楚在这种情况下你想做什么。

Raymond Hettinger 的方法似乎相当不错：

```
def tail_F(some_file):
    first_call = True
    while True:
        try:
            with open(some_file) as input:
                if first_call:
                    input.seek(0, 2)
                    first_call = False
                latest_data = input.read()
                while True:
                    if '\n' not in latest_data:
                        latest_data += input.read()
                        if '\n' not in latest_data:
                            yield ''
                            if not os.path.isfile(some_file):
                                break
                            continue
                    latest_lines = latest_data.split('\n')
                    if latest_data[-1] != '\n':
                        latest_data = latest_lines[-1]
                    else:
                        latest_data = input.read()
                    for line in latest_lines[:-1]:
                        yield line + '\n'
        except IOError:
            yield '' 
```

如果文件变得不可访问或没有新数据，此生成器将返回 ''。

[更新]

> 倒数第二个答案会在数据用完时绕到文件顶部。– 伊莱

我认为第二个将在尾部进程结束时输出最后十行，即`-f`每当出现 I/O 错误时。在我能想到的类 Unix 环境中的大多数情况下，这种`tail --follow --retry`行为与此相差不远。

也许如果你更新你的问题来解释你的真正目标是什么（你想模仿 tail --retry 的原因），你会得到一个更好的答案。

> 最后一个答案实际上并不跟随尾部，而只是读取运行时可用的内容。– 伊莱

当然，tail 默认会显示最后 10 行...您可以使用 file.seek 将文件指针定位在文件末尾，我将留一个正确的实现作为练习给读者。

恕我直言，file.read() 方法比基于子流程的解决方案要优雅得多。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2012-09-21T01:59:54.063

实际上，文件的唯一*可移植*方式`tail -f`似乎是从文件中读取并重试（在 a 之后`sleep`）如果`read`返回 0。`tail`各种平台上的实用程序使用特定于平台的技巧（例如`kqueue`在 BSD 上）来有效地永久跟踪文件无需`sleep`.

因此，`tail -f`纯粹在 Python 中实现一个好的可能不是一个好主意，因为您将不得不使用最小公分母实现（而不求助于特定于平台的 hack）。使用简单`subprocess`的打开并在单独的线程中遍历行，您可以轻松地在 Python 中`tail -f`实现非阻塞操作。`tail`

示例实现：

```
import threading, Queue, subprocess
tailq = Queue.Queue(maxsize=10) # buffer at most 100 lines

def tail_forever(fn):
    p = subprocess.Popen(["tail", "-f", fn], stdout=subprocess.PIPE)
    while 1:
        line = p.stdout.readline()
        tailq.put(line)
        if not line:
            break

threading.Thread(target=tail_forever, args=(fn,)).start()

print tailq.get() # blocks
print tailq.get_nowait() # throws Queue.Empty if there are no lines to read 
```

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2019-01-19T00:55:41.680

# 使用非阻塞 readline() 的纯 Pythonic 解决方案

将Ijaz Ahmad Khan 的[答案](https://stackoverflow.com/a/53121178/431087)改编为仅在完全写入时才产生行（行以换行符结尾）给出了一个没有外部依赖关系的 pythonic 解决方案：

```
def follow(file, sleep_sec=0.1) -> Iterator[str]:
    """ Yield each line from a file as they are written.
    `sleep_sec` is the time to sleep after empty reads. """
    line = ''
    while True:
        tmp = file.readline()
        if tmp is not None:
            line += tmp
            if line.endswith("\n"):
                yield line
                line = ''
        else if sleep_sec:
            time.sleep(sleep_sec)

if __name__ == '__main__':
    with open("test.txt", 'r') as file:
        for line in follow(file):
            print(line, end='') 
```

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2015-08-04T01:56:33.317

所以，这来得很晚，但我又遇到了同样的问题，现在有一个更好的解决方案。只需使用[pygtail](https://github.com/bgreenlee/pygtail)：

> Pygtail 读取尚未读取的日志文件行。它甚至会处理已轮换的日志文件。基于 logcheck 的 logtail2 ( [http://logcheck.org](http://logcheck.org) )

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2018-11-02T15:10:47.913

所有使用 tail -f 的答案都不是 Pythonic。

这是pythonic方式：（不使用外部工具或库）

```
def follow(thefile):
     while True:
        line = thefile.readline()
        if not line or not line.endswith('\n'):
            time.sleep(0.1)
            continue
        yield line

if __name__ == '__main__':
    logfile = open("run/foo/access-log","r")
    loglines = follow(logfile)
    for line in loglines:
        print(line, end='') 
```

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2012-09-21T02:16:53.017

> > 理想情况下，我有类似 tail.getNewData() 的东西，每次我想要更多数据时我都可以调用它

[我们已经有了一个，它非常好。](http://www.sacred-texts.com/neu/mphg/mphg.htm#Scene%208)只要您需要更多数据， 只需调用*f.read() 即可。*它将从上次读取停止的地方开始读取，并将读取数据流的末尾：

```
f = open('somefile.log')
p = 0
while True:
    f.seek(p)
    latest_data = f.read()
    p = f.tell()
    if latest_data:
        print latest_data
        print str(p).center(10).center(80, '=') 
```

要逐行阅读，请使用*f.readline()*。有时，正在读取的文件将以部分读取的行结束。使用*f.tell()*查找当前文件位置并使用*f.seek()*将文件指针移回不完整行的开头来处理这种情况。有关工作代码，请参阅[此 ActiveState 配方。](http://code.activestate.com/recipes/157035-tail-f-in-python/)

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2016-02-02T10:12:42.517

您可以使用“tailer”库：[https ://pypi.python.org/pypi/tailer/](https://pypi.python.org/pypi/tailer/)

它可以选择获取最后几行：

```
# Get the last 3 lines of the file
tailer.tail(open('test.txt'), 3)
# ['Line 9', 'Line 10', 'Line 11'] 
```

它也可以跟随一个文件：

```
# Follow the file as it grows
for line in tailer.follow(open('test.txt')):
    print line 
```

如果一个人想要类似尾巴的行为，那似乎是一个不错的选择。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2016-02-23T06:59:53.397

另一种选择是[`tailhead`](https://pypi.python.org/pypi/tailhead)提供 Python 版本的库`tail`以及`head`可在您自己的模块中使用的实用程序和 API。

最初基于该`tailer`模块，它的主要优点是能够通过路径跟踪文件，即它可以处理重新创建文件时的情况。此外，它还针对各种边缘情况进行了一些错误修复。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-03-22T15:40:50.173

Python 是“包括电池” - 它有一个很好的解决方案：[https ://pypi.python.org/pypi/pygtail](https://pypi.python.org/pypi/pygtail)

读取尚未读取的日志文件行。记住上次完成的地方，并从那里继续。

```
import sys
from pygtail import Pygtail

for line in Pygtail("some.log"):
    sys.stdout.write(line) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-02-08T17:59:05.983

您也可以使用“AWK”命令。
更多信息请见：[http](http://www.unix.com/shell-programming-scripting/41734-how-print-specific-lines-awk.html)
://www.unix.com/shell-programming-scripting/41734-how-print-specific-lines-awk.html awk 可用于尾随最后一行、最后几行或任何一行文件。
这可以从 python 调用。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-10-08T06:46:01.767

如果您在 linux 上，您可以通过以下方式在 python 中实现非阻塞实现。

```
import subprocess
subprocess.call('xterm -title log -hold -e \"tail -f filename\"&', shell=True, executable='/bin/csh')
print "Done" 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-09-17T07:26:20.130

```
# -*- coding:utf-8 -*-
import sys
import time

class Tail():
    def __init__(self, file_name, callback=sys.stdout.write):
        self.file_name = file_name
        self.callback = callback

    def follow(self, n=10):
        try:
            # 打开文件
            with open(self.file_name, 'r', encoding='UTF-8') as f:
            # with open(self.file_name,'rb') as f:
                self._file = f
                self._file.seek(0, 2)
                # 存储文件的字符长度
                self.file_length = self._file.tell()
                # 打印最后10行
                self.showLastLine(n)
                # 持续读文件 打印增量
                while True:
                    line = self._file.readline()
                    if line:
                        self.callback(line)
                    time.sleep(1)
        except Exception as e:
            print('打开文件失败，囧，看看文件是不是不存在，或者权限有问题')
            print(e)

    def showLastLine(self, n):
        # 一行大概100个吧 这个数改成1或者1000都行
        len_line = 100
        # n默认是10，也可以follow的参数传进来
        read_len = len_line * n
        # 用last_lines存储最后要处理的内容
        while True:
            # 如果要读取的1000个字符，大于之前存储的文件长度
            # 读完文件，直接break
            if read_len > self.file_length:
                self._file.seek(0)
                last_lines = self._file.read().split('\n')[-n:]
                break
            # 先读1000个 然后判断1000个字符里换行符的数量
            self._file.seek(-read_len, 2)
            last_words = self._file.read(read_len)
            # count是换行符的数量
            count = last_words.count('\n')

            if count >= n:
                # 换行符数量大于10 很好处理，直接读取
                last_lines = last_words.split('\n')[-n:]
                break
            # 换行符不够10个
            else:
                # break
                # 不够十行
                # 如果一个换行符也没有，那么我们就认为一行大概是100个
                if count == 0:

                    len_perline = read_len
                # 如果有4个换行符，我们认为每行大概有250个字符
                else:
                    len_perline = read_len / count
                # 要读取的长度变为2500，继续重新判断
                read_len = len_perline * n
        for line in last_lines:
            self.callback(line + '\n')

if __name__ == '__main__':
    py_tail = Tail('test.txt')
    py_tail.follow(1) 
```

# c# - IE缓存服务器返回的旧数据

> ID：12523045
> 
> 赞同：2
> 
> 时间：2012-09-21T01:14:07.787
> 
> 标签：c#, jquery, asp.net, internet-explorer, wijmo

我在 ASP.NET MVC 视图上有一个[Wijmo 树。](http://wijmo.com/demo/explore/?widget=Tree&sample=CheckBox)每个树节点的检查状态都保存在我的数据库中。加载树时，根据返回的数据对每个节点进行检查或取消检查。当调用树上的[nodeCheckChanged](http://wijmo.com/wiki/index.php/Tree#nodeBlur.wijtree)时，我使用 ajax 在我的控制器上调用一个操作，该操作成功地更改了我的数据。

当我重新加载树视图时出现问题。数据已保存在数据库中，但浏览器没有从服务器获取最新数据。

我只在 IE 所有版本中遇到问题。Firefox 和 Chrome 每次都能正常工作。

我查看了DotNetPerls 的[此类页面，Microsoft 的](http://www.dotnetperls.com/cache)[此类页面，并在](http://support.microsoft.com/kb/234067)[此](https://stackoverflow.com/a/1229130/440972)stackoverflow 答案中尝试了选项四。

我发现在 IE 中获取最新数据的唯一方法是将选项“开发人员工具”->“缓存”->“始终从服务器刷新”设置为 true。

我需要做什么才能让 IE 像其他浏览器一样重新加载我的数据？

谢谢大家花时间阅读这个问题！

**编辑**

我的树的数据来自我模型上的集合。此集合由操作填充。

我的行动：

```
public ActionResult List(AssignedFolderListModel model)
{
    //Using EntityFramework
    model.TopLevelFolders = db.Folders;
    return PartialView(model);
} 
```

我的模型：

```
public class AssignedFolderListModel
{
    public string UserId { get; set; }
    public IEnumerable<Folder> TopLevelFolders { get; set; }
    public Guid[] AssignedFolderIds { get; set; }
} 
```

**回答**

我需要在我的 $.ajax 调用中添加“cache: false”。$.ajax 调用每次都对同一个 url 进行。例如。“已分配文件夹/列表？用户 ID=12345”。IE 没有再次调用，而是返回一个缓存的结果。

现在IE每次都被迫返回最新数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T01:23:51.240

IE 缓存所有获取 - 你需要对请求做一些事情来欺骗 IE 不缓存它。使用[jQuery.ajax](http://api.jquery.com/jQuery.ajax/)调用，您可以在调用中设置“cache: false”（它只是向请求的 URL 添加一个随机时间戳） - 在该树上查找有关执行此操作的配置选项，或者您可以在其中操作的钩子用于从服务器重新加载数据的 URL（并将您自己的时间戳添加到请求的 URL）。

# operating-system - sleep() 与进程阻塞

> ID：12523048
> 
> 赞同：5
> 
> 时间：2012-09-21T01:14:34.730
> 
> 标签：operating-system, linux-kernel

我经常对 sleep()、阻塞调用、抢占概念感到困惑。据我了解，无论进程在做什么，抢占完全由调度程序完成。除非进程处于某个临界区或执行原子指令，否则调度程序可以根据调度算法抢占该进程并将其放入等待进程列表中。

另一方面 sleep() 调用调度程序在指定的时间间隔内阻止它；作为参数传递给 sleep()。

阻塞调用就像等待操作完成，如磁盘读/写、来自另一个设备的信号等 I/O 操作。

有人可以以更全面的方式向我解释这些工作的原理，或者向我指出一些可靠的资源吗？谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-21T02:24:13.530

> 当进程执行阻塞调用时，它会等待操作完成。

我不完全确定您是否正确理解了这一点。假设您的程序发出一个 I/O 命令，例如`read()`. 您的进程不会等待操作完成：在 I/O 操作完成之前它不会占用处理器。当`read()`被调用时，处理器的控制权交给操作系统，操作系统会提示 I/O 操作。与 CPU 速度相比，这些操作非常慢，并且它们由专用硬件执行，这意味着 CPU 在此期间可以自由执行其他操作，直到硬件发出信号通知它已完成（通过硬件中断，例如实例）。

从运行的程序来看`read()`，它只知道`read()`被调用了：指向当前指令的寄存器没有改变，它的虚拟内存和以前一样。该过程被“阻止”。这并不意味着 CPU 没有运行。

从操作系统的角度来看，程序处于等待模式，直到硬件发出信号它已经执行了它的任务。与此同时，调度器唤醒了另一个进程，恢复了它的上下文（即，CPU 寄存器的值已经设置为它们刚刚睡着之前的值，等等），并开始执行它的代码。

硬件完成后，会发生中断，操作系统通过将进程标记为可执行来确认它。根据调度程序策略，它可以恢复进程上下文并立即开始执行它，或者等到当前进程完成其时间片后再切换上下文。

阅读更多关于 linux 调度器的实现：[Understanding the linux kernel 是一本非常好的书](http://shop.oreilly.com/product/9780596005658.do)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T01:19:10.840

你的观点是绝对正确的。[http://en.wikipedia.org/wiki/Preemption_(computing)](http://en.wikipedia.org/wiki/Preemption_(computing)) （链接）

# java - 如何同步一组线程？

> ID：12523052
> 
> 赞同：0
> 
> 时间：2012-09-21T01:15:17.583
> 
> 标签：java, multithreading

我想创建一个同步方法，这样来自该类型线程*类*的所有对象一次只能访问这个函数。

在查看[此网页](http://www.nakov.com/inetjava/lectures/part-1-sockets/InetJava-1.3-Multithreading.html)时，它说：

> 通过使用同步方法来访问要协调访问的对象。这些方法是用 synchronized 关键字声明的。在给定的时间点，只能为对象调用一个同步方法。这可以防止多个线程中的同步方法相互冲突。

正如我所说，这不是我要寻找的，因为我希望能够在班级上互斥。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T01:59:42.490

要使方法在类上同步（而不是类的特定实例），请编写：

```
public static synchronized ReturnType methodName() {
  ...
} 
```

或者

```
public static ReturnType methodName() {
  synchronized(ThisClass.class) {
    ...
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:21:36.250

使用静态锁：

```
private final static Object lock = new Object();

public void foo() {
    synchronized(lock) {
        ...
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T21:46:51.350

以为我会为后代提供更多信息。

> 我希望能够在类互斥的情况下进行调用。

因此，这取决于您是在谈论对类的*实例*还是对类的*所有*实例的锁定。当您在一个对象上同步时，如果其他线程锁定在*同一个*对象实例上，它们将阻塞。

当一个实例方法是`synchronized`，它是如果你正在锁定`this`。以下是相同的：

```
 public void synchronized foo() {
     ...
  } 
```

如同：

```
 public void foo() {
     synchronized (this) {
        ...
     }
  } 
```

通常，正如@Tudor 所提到的，您应该考虑使用锁定对象而不是方法`synchronized`。这使您可以锁定要保护的特定线路。

任何实例方法`synchronized`都会阻止对*同一*类实例的其他调用。如果您想阻止某个类的所有实例，那么您可以按照@JimN 的建议进行操作并同步静态方法。正如他所提到的，这与在类对象上同步是一样的：

```
public static synchronized ReturnType methodName() { 
```

如果由于某种原因您需要锁定*所有*对象，那么我会将您的锁包装在一个单例中并使用[`ReentrantLock`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/ReentrantLock.html).

# css - 为什么子DIVS的内容会影响子身高而不影响父身高？

> ID：12523055
> 
> 赞同：-1
> 
> 时间：2012-09-21T01:16:00.310
> 
> 标签：css, html, height, positioning

```
 <div id="container">
               <div id="sidebar-left">
                  //some content 
               </div>
               <div id ="content">
                //some content
               </div>
            </div> 
```

以上面的一段代码为例。侧边栏中的内容和内容 div 将它们拉伸并赋予它们长度 - 但究竟为什么它们的父 div“容器”也没有被拉伸并赋予长度？如果有可能，我该如何实现？

[http://jsfiddle.net/QA8Z7/6/](http://jsfiddle.net/QA8Z7/6/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T02:01:37.413

我要在这里暗中尝试一下，猜测您已经`float`设置了`sidebar-left`and `content`，并想知道为什么`container`div 不包含它们？如果是这种情况，有多种方法可以[“解决”这个问题](http://www.w3.org/wiki/Floats_and_clearing#Clearing)；这个[问题](https://stackoverflow.com/questions/211383/which-method-of-clearfix-is-best)非常详细地讨论了各种选项。

编辑：刚刚看到我在写这篇文章的时候已经弄清楚了，哦，好吧。`overflow`尽管如此，了解问题的根本根源以及在容器上设置的一些替代方法可能会很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T02:20:47.233

我不确定这是为什么，但如果你这样做

```
#container {
    background-color: red;
    overflow:hidden;
} 
```

然后它工作。希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T06:30:01.670

总是在浮动一些 div 或溢出隐藏在父 div 中后使用 clear 类

```
<div id="container">
      <div id="sidebar-left">some content </div>
      <div id="content">some content</div>
      <div style="clear:both"></div>
    </div> 
```

# asp.net - ASP.NET WebAPI 向后移植到 .NET 2.0/3.5 是否已经存在？

> ID：12523064
> 
> 赞同：1
> 
> 时间：2012-09-21T01:16:32.307
> 
> 标签：asp.net, .net-3.5, asp.net-web-api, .net-2.0

我特别喜欢使用 ASP.NET MVC 和 ASP.NET WebAPI。

我试图找到一个现有的 ASP.NET WebAPI 反向端口到 .NET 2.0/3.5 没有成功。SO 社区中是否有人知道已经完成的一项或需要贡献者的一项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T03:03:34.753

由于所需的依赖关系，它不存在，更不用说第三方重新分发 WebAPI 端口的许可问题。

# python - 如何准确地进行 Sunburnt Query

> ID：12523065
> 
> 赞同：0
> 
> 时间：2012-09-21T01:16:38.923
> 
> 标签：python, solr, sunburnt

试图准确搜索“11000060K2”

```
 from solr import SolrConnection
    from sunburnt import RawString

    term = "11000060K2"
    solr_conn = SolrConnection()
    scoreDocs = solr_conn.si.query(activityemail=RawString(term)).paginate(start=0, rows=1000).execute()
    params_dict = scoreDocs.params
    for key, keyvalue in params_dict:
        logging.debug ("param %s    value %s "  %(key, keyvalue) ) 
```

回报：

```
param start    value 0 
param q    value activityemail:11000060K2 
param rows    value 1000 
```

以及与其他术语匹配的一堆结果。

我希望它只返回与 11000060K2 匹配的文档，其查询返回 / 看起来像：

```
param q    value activityemail:"11000060K2" 
```

请告诉我我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T03:30:29.193

如何实现这一点将取决于您的 Solr 模式配置 ( `schema.xml`)，特别是与您的字段关联的字段类型`activityemail`。目前，如果您收到多个结果，可能是因为给定字段类型的过滤器/分析器导致多个匹配。Solr 的`solr.StrField`字段类听起来像是您的字段的最佳选择，因为这种类型的字段的值将被逐字存储并且查询将是完全匹配的。

如果您已经在其他地方将该字段用于其他目的，您可能会考虑为此目的创建一个新字段。

因此，在您的`schema.xml`将引入一个名为的字段类型`string`：

```
<fieldType name="string" class="solr.StrField" sortMissingLast="true" /> 
```

如果您遵循了 Solr 的默认安装中包含的示例，那么您可能已经有了这样的字段类型可用。您的字段定义应类似于：

```
<field name="activityemail" type="string" ... /> 
```

其中省略号代表与该字段相关的各种其他选项。

重新启动 Solr 并重新索引您的文档后，可以仅使用您提到的字符串查询此字段：

```
from solr import SolrConnection
term = "11000060K2"
solr_conn = SolrConnection()
scoreDocs = solr_conn.si.query(activityemail=term).execute()
print scoreDocs.result.docs 
```

# javascript - 动态添加标签

> ID：12523067
> 
> 赞同：2
> 
> 时间：2012-09-21T01:16:53.430
> 
> 标签：javascript, jquery

最初，我的图像容器 div 是：

```
<div id="offer_image" class="img_preview_container" />
<a class="preview_overlay"></a>
</div> 
```

然后执行：

```
$('#image_upload_form input').change(function() {

    if ( $(this).val() == '') return false;

    $('#image_upload_form').ajaxSubmit({
        success: function ( data ) { 
            if ( (/^http:\/\//).test(data) ) {
                $('#offer_detail input[name=image]').val(data);
                myImage = new Image();
                myImage.src = data;
                $(myImage).load(function() {
                    $('#offer_image').updateimgto(myImage.src);
                });
            }
            else {
                $('<div></div>').html(data).dialog({ title: 'Unable to upload your image' });
            }
        },
    });

}); 
```

当该 JavaScript 代码执行时，一个`<img>`标签被添加到原始图像容器 div 中：

```
<div id="offer_image" class="img_preview_container" />
    <a class="preview_overlay"></a>
    <img src="http://www.test.com/pic1.png", alt="uploaded img">
</div> 
```

我不确定标签到底`<img>`是在哪里添加的。是吗：

1.  `$('#offer_image').updateimgto(myImage.src)`?
2.  我`myImage.title="my pic"`输入了 JavaScript，但它没有添加到该`<img>`标记输出中。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T02:02:42.653

首先

```
<div id="offer_image" class="img_preview_container" /> // 
```

需要是

```
<div id="offer_image" class="img_preview_container" > 
```

其次这是什么 `$('#offer_image').updateimgto(myImage.src);`

updateimgto 是某个特定插件的方法吗？如果不是，您为什么要像对象的方法一样调用？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T01:35:32.130

1.  最有可能在`updateimgto`功能中，需要看到它才能确定。

2.  在调用`updateimgto`尝试添加
    `$('#offer_image img').attr('title','my pic');`

    这应该有助于澄清此时图像是否已添加到 DOM 并更新标题。

# android - 声明我的 ArrayList 以从我的数据库中获取 .jpg 图像

> ID：12523068
> 
> 赞同：0
> 
> 时间：2012-09-21T01:17:04.930
> 
> 标签：android, database, image, arraylist

任何人都知道为什么我会收到此错误以及修复它的解决方案吗？

我的宣言：

```
ArrayList<Image> specificItemImage;  <<The error is: Image cannot be resolved to a type. 
```

在这里，我从正在使用的数据库中检索图像：

```
specificItemImage = mDbHelper.getItemMultiTableData("item_master.[item_image]", "item_master", "item", "item_master.[id]", "item.[item_master_id]", "item_att", "item.[id]", "item_att.[item_id]", "item_att.[attribute_id] = 3"); 
```

我从数据库中检索的图像列表是 .jpg。

所以我的问题是，我必须如何声明我的 ArrayList 才能从我的数据库中获取 .jpg 图像列表？

# java - 将泛型参数绑定到 Class 时未经检查的强制转换

> ID：12523071
> 
> 赞同：7
> 
> 时间：2012-09-21T01:17:26.997
> 
> 标签：java, generics, reflection

我有一些代码采用外部提供的类名，并且需要构造一个实现某个接口的实例，让我们调用它`Foo`。

作为此过程的一部分，我希望具有以下功能：

```
private static Class<? extends Foo> fooFromClassName(String name) throws ClassNotFoundException {
    return (Class<? extends Foo>) Class.forName(name);
} 
```

这显然会导致未经检查的警告，因为它确实是不安全的——就我们所知，调用者可能已经请求了“java.lang.Long”。我最终希望这种方法能够保证如果它不抛出，那么返回的`Class`代表一个`Foo`实现。

我目前最好的解决方案是：

```
private static Class<? extends Foo> fooFromClassName(String name) throws ClassNotFoundException {
    Class<?> impl = Class.forName(name);
    if (Foo.class.isAssignableFrom(impl)) {
        @SuppressWarnings("unchecked")
        Class<? extends Foo> foo = (Class<? extends Foo>) impl;
        return foo;
    } else {
        // Throw something - ClassCastException perhaps.
    }
} 
```

有没有更好的方法来做到这一点？是否有某种不需要明确禁止警告的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T07:38:54.537

[`Class.asSubclass`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#asSubclass%28java.lang.Class%29)：

```
private static Class<? extends Foo> fooFromClassName(String name) throws ... {
    return Class.forName(name).asSubclass(Foo.class);
} 
```

如果请求的类不是`Foo`（或`Foo`本身）的子类，您将获得一个`ClassCastException`. 换句话说，它的作用与您的解决方案几乎相同。

# exchangewebservices - 无法使用 Exchange Web 服务托管 API 从共享组邮箱中检索电子邮件

> ID：12523076
> 
> 赞同：3
> 
> 时间：2012-09-21T01:18:27.507
> 
> 标签：exchangewebservices, exchange-server-2007

我正在尝试使用 Exchange Web Services Managed API 连接到组邮箱并从其收件箱返回电子邮件。我可以使用我的个人电子邮件帐户这样做，但使用组邮箱却没有成功。我可以访问 Outlook 中的组邮箱。我包含了用于从组邮箱中选择电子邮件的代码。我不确定 URI 应该是什么样子，所以我尝试了两种不同的格式。
[https://server3.mycompany.com](https://server3.mycompany.com)返回以下错误。

> 请求失败。远程服务器返回错误：(405) Method Not Allowed。

和[https://server3.mycompany.com/EWS/Exchange.asmx](https://server3.mycompany.com/EWS/Exchange.asmx)从未返回和超时。

```
ExchangeService service = new ExchangeService(ExchangeVersion.Exchange2007_SP1);
service.UseDefaultCredentials = true;
\\service.Url = new Uri("https://server3.mycompany.com");
service.Url = new Uri(@"https://server3.mycompany.com/EWS/Exchange.asmx");
Mailbox gpmailbox = new Mailbox("CouponInterfacePool@mycompany.com");
FolderId gpInbox = new FolderId(WellKnownFolderName.Inbox, gpmailbox);
ItemView view = new ItemView(10);
FindItemsResults<Item> results = service.FindItems(gpInbox, view); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T18:04:49.417

找出您公司的 URI

*   在您的客户端计算机上，按住 CTRL 并右键单击 Windows 任务栏上的 Outlook 小图标
*   选择测试电子邮件自动配置...
*   输入电子邮件地址和密码
*   按测试按钮

在结果选项卡中，您将在可用性服务 URL 上找到 URI。

# c++ - 使用 C++ 通过文件存储和检索链表

> ID：12523078
> 
> 赞同：0
> 
> 时间：2012-09-21T01:18:47.860
> 
> 标签：c++, file, linked-list, store

我创建了一个程序来使用 C++ 存储和检索链表，但不幸的是我的程序没有正确检索数据并返回代码 0xC0000005。我的程序有什么问题？我是初学者。

```
//C++ code
#include <iostream>
#include <fstream>
#include <cstdlib>
#include <cstring>
#include <ctime>

using namespace std;

struct link
{
    link(int dat, link *nxt): data(dat), another(nxt)
    {
    }
    int data;
    link *another;
};

struct list
{
    link *first;
    ~list();
    list();
    void addnew();
    void displl();
}list;

list::list()
{
    fstream datafile;
    datafile.open("datafile", ios::in | ios::app);
    datafile.seekg(0, ios::end);
    int eb = datafile.tellg();
    if(!eb)
    {
        first = NULL;
        return;
    }
    datafile.seekg(0, ios::beg);
    link *head, *current, *preceding;
    head = preceding = current = NULL;
    while(eb)
    {
        if(!current)
        {
            datafile.read((char *)&current, sizeof(link));
            current->another = NULL;
            head = current;
        }
        preceding = current;
        datafile.read((char *)&current->another, sizeof(link));
        current = current->another;
        current->another = NULL;
        preceding->another = current;
        eb--;
    }
    first = head;
}

void list::addnew()
{
    srand(time(0) + rand());
    first = new link(rand()%10, first);
}

void list::displl()
{
    link *current;
    cout << endl << " - ";
    for(current = first; current; current = current->another)
        cout << current->data << " - ";
    cout << endl;
}

list::~list()
{
    fstream datafile;
    datafile.open("datafile", ios::out | ios::app);
    link *temp;
    while(first != NULL)
    {
        temp = first;
        first = first->another;
        datafile.write((char *)&temp, sizeof(link));
        delete temp;
    }
    first = NULL;
}

int main()
{
    list.addnew();
    list.addnew();
    list.addnew();
    list.displl();
    system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T03:03:27.767

我对初学者最喜欢的建议是从小而简单的开始，让它完美地工作，然后一点一点地增加复杂性，在每一步都进行测试。您在这里拥有三个独立的功能：基本列表、为列表分配随机值以及读取/写入列表。您应该独立开发这些，然后将它们组合起来；您不知道是哪个部分导致了问题的事实表明您试图一次将它们全部编写出来。（好吧，他们各自的代码纠缠在一起的事实也表明了这一点。）

最大的问题在于文件读取代码（在所有地方的*默认构造函数*中）。您正在将数据放入未初始化的内存中：

```
link *current;
...
current = NULL;
...
datafile.read((char *)&current, sizeof(link)); 
```

这就像在没有先找到杯子的情况下倒热咖啡一样。在尝试使用复杂类型之前，您应该使用简单类型（例如`char`，并且）进行读/写（并学会不要这样做） 。`int`然后尝试使用单个`link`. 然后和一堆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T04:36:03.523

正如 Beta 已经指出的那样，尝试读取链接时会发生访问冲突：

```
 ...
datafile.read((char *)&current, sizeof(link));
     ... 
```

“current”是一个指针，在它上面使用“&”运算符会给出一个指向变量占用的内存的指针，它本身（在堆栈的某个地方）。所以代码尝试将一些链接大小的垃圾数据块读入这个指针——但这不会导致访问冲突。当“当前”被取消引用并用于写入它指向的“链接”对象的成员时会发生异常：

```
current->another = NULL; 
```

它从数据文件加载的值来自同样不正确的序列化代码 - 没有保存任何“链接”数据。该文件包含的所有文件都是在堆上分配的“链接”对象的旧内存地址——这些地址是无效的，因为它们的内存是在先前的程序会话中分配的。

成功序列化对象的字节图像如下所示：

```
datafile.write(reinterpret_cast<const char*>(temp), sizeof(*temp)); 
```

但是“链接”对象不是普通的旧数据——在你销毁这个链接对象后，它包含的指针将无效。所以加载列表必须包括为每个链接分配内存（就像“addnew”一样）。

您可能只想遍历列表，从头部开始，并保存每个链接的有效负载数据，如下所示：

```
datafile.write(reinterpret_cast<const char*>(&temp->data), sizeof(temp->data)); 
```

然后，要加载列表，对于每个节点，将有效负载读入一个临时变量：

```
datafile.read(reinterpret_cast<char*>(&temp_data), sizeof(temp_data)); 
```

如果此操作成功，则分配并构造一个堆“链接”对象并将其连接到前一个节点：

```
next_tail = new link(temp_data, 0);
tail->another = next_tail;
tail = next_tail; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T01:41:10.837

由于您在程序中进行指针操作，因此您会因为**非法内存访问**`0xC0000005`而出错。因为您没有提供完整的代码，所以您可能正在执行非法操作，例如未在程序的其他部分初始化指针。

# css - 使用 onclick 更改 div 中的价格

> ID：12523082
> 
> 赞同：0
> 
> 时间：2012-09-21T01:19:34.203
> 
> 标签：css, html, onclick

我有 2 张图片，当我点击其中一张图片时，我希望显示价格，我已经完成了以下操作：

```
<td style="padding-top: 2px; text-align: center" onclick="document.getElementById('price').firstChild.nodeValue=this.options[this.selectedIndex].getAttribute('data-price')"></td>

<img src="images/4.png" width="39" height="33" data-price="£245.00">
<img src="images/n4s.png" width="39" height="33" data-price="£255.00">

<div id="price"> </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T03:09:38.793

它与@heidi answer类似，但更简单

```
<script type="text/javascript">
    function showprice(e){
        document.getElementById("price").innerHTML = e.getAttribute('data-price');
    }
</script>

    <img src="http://i.imgur.com/JnUKx.jpg" id="img1" onclick="showprice(this);" width="39" height="33" data-price="245.00">
    <img src="http://i.imgur.com/c8Rwp.gif" id="img2" onclick="showprice(this);" width="39" height="33" data-price="255.00">

    <div id="price" style="padding-bottom:10px"></div>​ 
```

您可以在[jsFiddle](http://jsfiddle.net/fxUpM/1/)中检查这一点。

您可以在这里使用 jQuery，而不是纯 javascript。这将使实施变得更加容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T02:12:03.867

这应该有效：

```
<script type="text/javascript">
function showprice1(){
    var price_div = document.getElementById("price")
    var price1 = document.getElementById("img1")
    price_div.innerHTML = price1.getAttribute('data-price');
}
function showprice2(){
    var price_div = document.getElementById("price")
    var price2 = document.getElementById("img2")
    price_div.innerHTML = price2.getAttribute('data-price');
}
</script>

<img src="images/4.png" id="img1" onclick="showprice1();" width="39" height="33" data-price="£245.00">
<img src="images/n4s.png" id="img2" onclick="showprice2();" width="39" height="33" data-price="£255.00">

<div id="price" style="padding-bottom:10px"></div>​ 
```

在这里演示：http: [//jsfiddle.net/fxUpM/](http://jsfiddle.net/fxUpM/)

# database - VB.NET 批量处理的数据库访问效率

> ID：12523085
> 
> 赞同：1
> 
> 时间：2012-09-21T01:20:16.487
> 
> 标签：database, vb.net, multithreading, oracle

我有一个 VB.NET 应用程序，它正在处理来自 Oracle 数据库的大量数据并对检索到的数据执行计算。正在从 3 个相关表中检索数据。

主表对于需要计算的每个项目都有一条记录（此时略少于 100 万行）。与其他两个表中的每一个都存在一对多的关系，从表中的平均 20 条记录到主表中的每条记录（总共约 2000 万行）。

我目前正在使用 OracleDataReader 对象检索数据以访问一个存储过程，该存储过程将 REF_CURSOR 返回到连接这些表的查询的结果。.NET 代码一次读取一个记录，并使用主键列将此结果集中的一组记录分组到一个计算批处理中，然后在该计算批处理上执行所需的计算。

此应用程序的处理时间比我目前想要的要长，我正在寻找一种更有效的方式来访问这些数据以进行处理，以支持应用程序的多线程，以便多个工作线程可以对每组主记录/子记录执行计算-我的数据库中的记录集。有什么建议么？

# jquery - 提交日期选择器值与另一个输入连接保存在一个输入名称中

> ID：12523086
> 
> 赞同：0
> 
> 时间：2012-09-21T01:20:18.100
> 
> 标签：jquery, url, datepicker, submit, concatenation

我正在为一家餐馆做一个网站，我的预订表格提交给'open table'。为了提交好的 url，我需要将 Datepicker 值（jquery 插件）与另一个表单的时间值连接起来。打开表需要进入名称输入“d”。

像这样的东西：`d=9%2f20%2f2012+9%3a30+PM`

所以我创建了一个函数，它将连接到已解析的日期选择器和 d 中的时间。

```
function reservation(){
    var newValue = $('#datepicker').val() +' '+$('#heures').val();
    $('#datepicker').val(newValue);
    return true;
       } 
```

我得到的结果是这样的：`d=27%2F09%2F2012+12%3A30+PM+12%3A30+PM+12%3A30+PM+12%3A30+PM+12%3A30+PM+12%3A30+PM`

我不明白为什么我的时间重复了 5 次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T01:33:20.553

我认为您不能使用 .val() 来设置日期。您需要使用自动完成插件提供的方法来尝试这个..

```
function reservation() {
    var newValue = $('#datepicker').datepicker( "getDate") + ' ' + $('#heures').val();
    $('#datepicker').datepicker( "setDate" , newValue )
    return true;
}​ 
```

像这样的东西。。

但是要连接日期，您需要将它们转换为 datetime 对象，然后连接.. 因为 .val() 方法返回一个字符串.. 所以基本上你连接了 2 个字符串，在这种情况下是错误的......

当您想结合这两个日期时，您能否给出一个明确的 newValue 示例

更新..试试这个

```
function reservation() {
    alert('Date Picker value : ' + $('#datepicker').datepicker( "getDate"));       
    alert('Form Date value : ' + $('#heures').val());
}​ 
```

你在警报中得到什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T13:24:14.530

我所做的功能预订正在运行，这是 Datepicker 的日期格式问题。当我提交 DD/MM/YY 时，Open Table 预订正在等待 MM/DD/YY。

所以我只需要输入这段代码来获得好的日期格式

```
$("#datepicker").datepicker({
            dateFormat:'mm/dd/yy',
            }); 
```

# asp.net - CSS变换动态旋转原点

> ID：12523091
> 
> 赞同：1
> 
> 时间：2012-09-21T01:20:48.600
> 
> 标签：asp.net, html, css-transitions

所以在我拍摄自己之前，我需要帮助解决 css/html 问题。我是一名 .NET 程序员，不必深入研究 html 或 css。我有一些图表存储为图像，而不是水平显示它们，而是希望它们垂直显示。例如，一张图片的高度为 75 像素，宽度为 900 像素。它们显示在穿过屏幕的 Div 中。因此，为了垂直显示它们，我对图像进行了一些转换 - 旋转（-90）。没问题。问题出现在原点部分。我希望 Div 中的图像与 div 容器的左侧垂直排列，并且该容器是另一个 Div。但是我必须使用边距才能让容器转到屏幕的右侧。当然，当屏幕尺寸发生变化时，这无论如何都不起作用。一定是我的东西 米失踪？这是我正在使用的代码：

CSS

```
 .columnMain
{   
    float: left;  
    **margin-left: 440px;**  
    **margin-top:-425px;**  
    -webkit-transform: rotate(-90deg); /* Safari and Chrome */  
    -o-transform: rotate(90deg); /* Opera */  
    -webkit-transform-origin: 50% 50%;  
    position:relative;  
}
div.container  
{  
    width: 99%;  
    margin-left: 2px;  
    padding: 0px;  
    height:600px;  
    background-color:#000000;  
    border:1px solid white;  
    top:225px;  
    position:absolute;  
} 
```

我在上面把问题区域加粗了。以及下面的 HTML/ASP.NET

```
 <div class="container">
        <div class="columnMain">
            <asp:ContentPlaceHolder ID="CMGraph" runat="server">
                <uc3:MGraph ID="MGraph1" runat="server" ClientIDMode="Inherit" 
                    EnableViewState="True" ViewStateMode="Enabled" />**This is the image/chart that has been created elsewhere**
            </asp:ContentPlaceHolder>
        </div>
 </div> 
```

修改起源并不重要，因为我需要使用负数将 Div 及其内容带回 div.container 的左侧。所以我需要知道我是否可以做一些比我现在所做的更有说服力的事情，并且无论屏幕大小如何都能正常工作？

# asp.net - 如何使用微软假货来模拟 HttpSessionStateBase

> ID：12523093
> 
> 赞同：2
> 
> 时间：2012-09-21T01:21:02.803
> 
> 标签：asp.net, asp.net-mvc, mocking, moq, httpcontext

起订量代码：

```
mockControllerContext.SetupGet(x => x.HttpContext.Session["User"]).Returns(new User
{
    Name = "Moto", 
    IsAdmin = true                                                                                        
});
taskController.ControllerContext = mockControllerContext.Object; 
```

我如何使用 MS Fakes 来模拟 HttpContext.Session ？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T06:27:08.293

在一个类中从[这里](http://www.emadibrahim.com/2008/04/04/unit-test-linq-to-sql-in-aspnet-mvc-with-moq/)获得这两个函数；

```
public static class HttpContextFactory
{
    public static void SetFakeAuthenticatedControllerContext(this Controller controller)
    {
        var httpContext = FakeAuthenticatedHttpContext();
        ControllerContext context =
        new ControllerContext(
          new RequestContext(httpContext,
          new RouteData()), controller);
        controller.ControllerContext = context;
    }
    private static HttpContextBase FakeAuthenticatedHttpContext()
    {
        var context = new Mock<HttpContextBase>();
        var request = new Mock<HttpRequestBase>();
        var response = new Mock<HttpResponseBase>();
        var session = new Mock<HttpSessionStateBase>();
        var server = new Mock<HttpServerUtilityBase>();
        var user = new Mock<IPrincipal>();
        var identity = new Mock<IIdentity>();
        context.Setup(ctx => ctx.Request).Returns(request.Object);
        context.Setup(ctx => ctx.Response).Returns(response.Object);
        context.Setup(ctx => ctx.Session).Returns(session.Object);
        context.Setup(ctx => ctx.Server).Returns(server.Object);
        context.Setup(ctx => ctx.User).Returns(user.Object);
        user.Setup(ctx => ctx.Identity).Returns(identity.Object);
        identity.Setup(id => id.IsAuthenticated).Returns(true);
        identity.Setup(id => id.Name).Returns("a.ali174");
        return context.Object;
    }
} 
```

从单元测试中，我这样称呼它们；

```
 HttpContextFactory.SetFakeAuthenticatedControllerContext(controller); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T23:50:21.390

您可以将[垫片](http://msdn.microsoft.com/en-us/library/hh549176.aspx)用于 Microsoft Fakes。但是，我发现这是一种不好的做法。相反，您应该通过将第三方库包装在您自己的类中来将它们与第三方库隔离。然后，您可以在该类上放置一个接口，并在整个代码中使用您的接口。此[反腐败层](http://c2.com/cgi/wiki?AnticorruptionLayer)允许您保护自己免受第三方程序集的影响，并且当第三方程序集发生更改时您受到的影响较小。

如果您想了解有关使用 shim 的更多信息，可以查看我在 Microsoft Fakes 上撰写的[Pluralsight 课程。](http://pluralsight.com/training/courses/TableOfContents?courseName=microsoft-fakes)（完全披露：我在这门课程中获得版税，但这是一种快速上手的方法）

# css - IE7 和 8 CSS 菜单背景下拉悬停问题

> ID：12523095
> 
> 赞同：0
> 
> 时间：2012-09-21T01:21:16.497
> 
> 标签：css, internet-explorer, twitter-bootstrap

希望有人能用一双新鲜的眼睛来帮助我，一直把我的头撞在砖墙上试图解决 IE7-8 中下拉菜单项在悬停时跳来跳去的问题——悬停时应用了一些负边距规则（如以及丑陋的块背景），我不明白为什么在 IE7-8 而不是在其他浏览器中发生这种情况（即使是 IE6 我也能正常工作！）。我已经在 app.css 样式表的底部注释掉了我的尝试。基本上，下拉菜单覆盖了 Twitter bootstrap 中的一些样式。它包含在 app.css 应用自定义样式之前。

这是一个[演示链接][1]（目前只有退出菜单样式是问题，我意识到顶级项目不是很清晰！）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T06:23:28.580

悬停时的背景是因为此代码来自 bootstrap.css 第 6 行。filter 属性用于在 ie.in 第 106 行 app.css 中应用渐变，所有属性都被覆盖但不过滤，因此在即有蓝色背景.

```
.dropdown-menu li > a:hover, .dropdown-menu li > a:focus, .dropdown-submenu:hover > a {
    color: white;
    text-decoration: none;
    background-color: #08C;
    background-color: #0081C2;
    background-image: -moz-linear-gradient(top,#08C,#0077B3);
    background-image: -webkit-gradient(linear,0 0,0 100%,from(#08C),to(#0077B3));
    background-image: -webkit-linear-gradient(top,#08C,#0077B3);
    background-image: -o-linear-gradient(top,#08C,#0077B3);
    background-image: linear-gradient(to bottom,#08C,#0077B3);
    background-repeat: repeat-x;
    filter: progid:dximagetransform.microsoft.gradient(startColorstr='#ff0088cc',endColorstr='#ff0077b3',GradientType=0);
    } 
```

# asp.net-mvc - 如何利用 MVC 中的常用图片资源

> ID：12523098
> 
> 赞同：2
> 
> 时间：2012-09-21T01:21:46.683
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4, embedded-resource, resx

我有几个 ASP.NET MVC3 和 4 个网站。所有站点都使用与图书馆分开的相同资源。资源是 .resx 文件。我想在这些网站内的 html 中使用这些资源中的图像。我之前没有使用 resx 文件，所以不确定使用它们的好方法是什么。我认为我可能会创建一个服务来从正确的资源文件中提供正确的图像，但我想应该有更好的方法。我的问题是使用 resx 文件中的这些图像的好方法是什么，将图像存储在 resx 中可能不是很好？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T02:40:41.293

一种简单的方法是向`FileStreamResult`控制器添加一个动作，它应该根据资源键返回图像。

```
public FileStreamResult Image(string key)
{
    var bitmap = (Bitmap)Resources.Images.ResourceManager.GetObject(key);
    MemoryStream stream = new MemoryStream();
    bitmap.Save(stream, ImageFormat.Png);
    stream.Seek(0, SeekOrigin.Begin);
    return new FileStreamResult(stream, "image/png");
} 
```

现在您应该可以像这样从您的视图中访问它：

```
<img src='@Url.Action("Image", "MyController", new { key = "Image1" })' /> 
```

* * *

另一种方法（只能使用视图来完成）是创建一个 base 64 编码的字符串。

```
@{
    var stream = new MemoryStream();
    var bitmap = Resources.Images.ResourceManager.GetObject("Image1") as System.Drawing.Bitmap;
    bitmap.Save(stream, System.Drawing.Imaging.ImageFormat.Png);
    stream.Seek(0, SeekOrigin.Begin);
    string base64 = Convert.ToBase64String(stream.ToArray());
}

<img src="data:image/gif;base64,@base64" /> 
```

实现这一点的一个好方法可能是使用 Razor 助手，以在视图中启用更直接的语法`@Html.GetImageFor(Resources.Images.Image1, "alt")`。

```
public static MvcHtmlString GetImageFor(this HtmlHelper helper, Bitmap bitmap, string AltText = "")
{
    MemoryStream stream = new MemoryStream();
    bitmap.Save(stream, System.Drawing.Imaging.ImageFormat.Png);
    stream.Seek(0, SeekOrigin.Begin);
    string base64 = Convert.ToBase64String(stream.ToArray());

    return new MvcHtmlString(
        string.Format("<img src='data:image/gif;base64,{0}' alt='{1}' />",
            base64, AltText)
    );
} 
```

* * *

[**注意：** .ResX 文件上的属性应该设置如下（对于 MVC 项目来说是正常的）：]

*   [设置`CustomTool`为*PublicResXFileCodeGenerator*]
*   [设置`Custom Tool Namespace`为*资源*]

# c# - 使用 Jquery 在 asp.net 中级联下拉菜单

> ID：12523099
> 
> 赞同：0
> 
> 时间：2012-09-21T01:22:22.803
> 
> 标签：c#, javascript, jquery, asp.net, json

当我在我的 bankDDL 中选择一家银行时，asp.net C# 中的 DropdownList 出现问题，branchDDL 不会自动更新，需要先选择它，然后再更新 branchDDL。我使用 Jquery 语言在运行时在我的 branchDDL 上填充数据。

```
var branch = $("#<%=cboBranch.ClientID%>");

    $("#<%=cboBank.ClientID%>").change(function () {

        branch.html("");//this is my first problem this doesnt show after my bank is change
        branch.append($("<option></option>").val(-1).html("Please select Branch"));//also this
        if ($(this).val() != -1) {
            OnGetNotes(parseInt($(this).val()));//this function get the JSON and populate the
                                                //branch according to what bank is selected
                                                //and it show the branch using slideDown 
        }
        else {
            $("#branch").slideUp();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T01:26:46.950

而不是 .html() 使用 .empty() 。还要确保你的代码在 DOM 就绪事件中。试试这个

```
$(function() {

    var branch = $("#<%=cboBranch.ClientID%>");

    $("#<%=cboBank.ClientID%>").on('change', function() {
        branch.empty().append($("<option></option>").val(-1).html("Please select Branch")); //also this
        if ($(this).val() != -1) {
            OnGetNotes(parseInt($(this).val()));
        }
        else {
            $("#branch").slideUp();
        }
    });
});​ 
```

# c - 获取 Gtk 标签宽度大小

> ID：12523103
> 
> 赞同：4
> 
> 时间：2012-09-21T01:22:42.623
> 
> 标签：c, gtk

是否可以获得标签尺寸？

```
#include <gtk/gtk.h>

GtkWidget *mainWindow, *titleLabel, *fixedFrame;

mainWindow = gtk_window_new(GTK_WINDOW_TOPLEVEL);

//set window default size, and request size and all stuff

fixedFrame = gtk_fixed_new();
gtk_widget_set_size_request...
gtk_container_add(GTK_CONTAINER(mainWindow), fixedFrame);

titleLabel = gtk_label_new("Welcome!");
gtk_widget_set_size_request(titleLabel, x, y);

gtk_fixed_put(GTK_FIXED(fixedFrame), titleLabel, x1, y2); 
```

我想知道标签`"Welcome"`( `x`, `y`) 的大小来计算框架中的正确位置 ( `x1`, `y1`) 但我不知道该怎么做。我已经尝试在 GTK 文档中进行搜索，但没有成功。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T03:14:16.167

耶！我找到了一种方法，这里怎么做

```
#include <gtk/gtk.h>

GtkWidget *mainWindow, *titleLabel, *fixedFrame;
GtkRequisition req;

mainWindow = gtk_window_new(GTK_WINDOW_TOPLEVEL);

//set window default size, and request size and all stuff

fixedFrame = gtk_fixed_new();
gtk_widget_set_size_request...
gtk_container_add(GTK_CONTAINER(mainWindow), fixedFrame);

titleLabel = gtk_label_new("Welcome!");
gtk_widget_size_request(titleLabel, &req);
gtk_widget_set_size_request(titleLabel, req.width, req.height);

gtk_fixed_put(GTK_FIXED(fixedFrame), titleLabel, x1, y2); 
```

# mysql - 获取两个表的唯一行

> ID：12523105
> 
> 赞同：1
> 
> 时间：2012-09-21T01:23:24.690
> 
> 标签：mysql, sql, join

我想比较两个具有相同列但行数不同的表。如何找到每个表的唯一行？我找到了一些加入教程，但它需要主键来加入两个表，我的示例表彼此没有关系。

样品表：

```
TableA
Id | Name
1 | Person1
2 | Person2
3 | Person3
4 | Person4

TableB
Id | Name
1 | Person1
2 | Person2
4 | Person4

Sample result:
Id | Name
3 | Person3

Optional result:
Id | Name | Table
3 | Person3 | TableA 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T01:25:13.120

由于 MySQL 缺乏`FULL JOIN`，您仍然可以使用`LEFT or RIGHT`join with来模拟它`UNION`。尝试，

```
SELECT  a.* , 'TableA' as `Table`
FROM    tableA a
        LEFT JOIN tableB b
            ON a.id = b.id AND
               a.name = b.name
WHERE   b.id IS NULL
UNION
SELECT  d.*, 'TableB' as `Table`
FROM    tableA c
        RIGHT JOIN tableB d
            ON c.id = d.id AND
               c.name = d.name
WHERE   c.id IS NULL 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/2e66e/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T01:36:20.140

此查询使用 UNION 语句从 TableA 中选择不存在于 TableB 中的行以及来自 TableB 中不存在于 TableA 中的行。

```
SELECT Id, Name, 'TableA' FROM TableA
WHERE (Id, Name) NOT IN
(SELECT Id, Name FROM TableB)
UNION
SELECT Id, Name, 'TableB' FROM TableB
WHERE (Id, Name) NOT IN
(SELECT Id, Name FROM TableA) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T01:56:08.997

```
SELECT COLUMN_NAME
FROM information_schema.columns
Where table_name="table_1" AND
COLUMN_NAME NOT IN (
SELECT COLUMN_NAME
FROM information_schema.columns
WHERE table_name="table_2") 
```

我们从第一个表中获取列名，条件是（子查询）在第二个表中没有相同的列（字段）。因此，这为我们提供了第一个表独有的字段，正如您在问题中也想要的那样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T04:16:58.900

您可以使用简单查询作为

select * from tableA,tableB where tableA.Name Not In tableB.Name And tableB.Name Not In tableA.Name

# heroku - heroku 登录/安装问题 (ubuntu 12.04)

> ID：12523110
> 
> 赞同：1
> 
> 时间：2012-09-21T01:24:08.673
> 
> 标签：heroku, ubuntu-12.04

我曾尝试在我的系统（64 位 ubuntu 12.04）上安装 heroku，实际安装时它不会抛出任何错误。但是，当我尝试 heroku 登录时，我收到此错误：

```
/usr/lib/ruby/1.8/x86_64-linux/readline.so: libreadline.so.5: cannot open shared object file: No such file or directory - /usr/lib/ruby/1.8/x86_64-linux/readline.so (LoadError)
    from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `require'
    from /var/lib/gems/1.8/gems/heroku-2.31.4/lib/heroku/command/run.rb:1
    from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
    from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `require'
    from /var/lib/gems/1.8/gems/heroku-2.31.4/lib/heroku/command.rb:14:in `load'
    from /var/lib/gems/1.8/gems/heroku-2.31.4/lib/heroku/command.rb:13:in `each'
    from /var/lib/gems/1.8/gems/heroku-2.31.4/lib/heroku/command.rb:13:in `load'
    from /var/lib/gems/1.8/gems/heroku-2.31.4/lib/heroku/cli.rb:27:in `start'
    from /var/lib/gems/1.8/gems/heroku-2.31.4/bin/heroku:16
    from /usr/local/bin/heroku:19:in `load'
    from /usr/local/bin/heroku:19 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T02:18:04.120

确保您已安装这些：

`$ sudo apt-get install curl bison build-essential autoconf zlib1g-dev libssl-dev libxml2-dev libreadline6-dev git-core`

# matlab - 防止Matlab中矩阵中的重复序列

> ID：12523111
> 
> 赞同：1
> 
> 时间：2012-09-21T01:24:27.013
> 
> 标签：matlab, constraints, shuffle

我有一个 192 x 3 矩阵，order(192 x 3)：

order(:, 1) 和 order(:, 2) 都包含 1 - 16 的重复值，而 order(:, 3) 包含 1 和 2 的重复值。我需要打乱矩阵，同时防止更多的重复最后一列中的相同值超过三个，因此 order(:, 3) 不应显示超过 3 个重复的 1 或 2。

这就是我所拥有的，它适用于较小版本的矩阵就好了，但似乎卡住了一个稍大的矩阵：

```
not_good = true;

while not_good

    not_good = false;

    order = Shuffle(order);

    % returns an array of 1s and 0s indexing the position of the values for 1 and 2
    R1 = order(:, 3) == 1;
    R2 = order(:, 3) == 2;

    % checks for repeats, returns 1 if repeats are present
    rep_test1 = any(diff([1; find(R1)])>3);
    rep_test2 = any(diff([1; find(R2)])>3);

    if rep_test1 > 0 || rep_test2 > 0
        not_good = true;
    end
end 
```

非常感谢任何评论。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:39:15.890

鉴于您已经找到满足您条件的安排。但是应该可以构建这样的安排。

我会用[拒绝抽样](http://en.wikipedia.org/wiki/Rejection_sampling)进行改组。

伪代码将是：

```
function shuffled = shuffle(orig)
for i=1:numShuffles
  [i1,i2] = randomIndices;
  tmp = shuffled with permuted lines i1 and i2 
  test if matrix is still valid
  if valid shuffled=tmp;
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:36:22.920

如果您对如何`Shuffle`，那么对其进行特定于问题的实现是最有效的。例如，制作一个立即拒绝无法解决的问题的版本，如果它等于它上面的两个条目，则拒绝循环内输出矩阵的任何新添加。

但是假设您没有这种级别的控制，那么我必须同意@Oli。您的代码没有固有缺陷，只是缺少检查问题是否完全可以解决。

不过，它确实有一个主要缺点。例如，如果

```
order(:,3).' = [1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 ...] 
```

在 a 之后获得（超过）三个连续的机会`Shuffle`将非常大。这意味着循环必须运行很多次才能给出任何结果。不幸的是，如果问题是可以解决的，但在这种情况下只是“难以解决”，那么您无能为力，只能等待。

# c - 用C写一个shell，不返回任何东西

> ID：12523121
> 
> 赞同：1
> 
> 时间：2012-09-21T01:26:19.480
> 
> 标签：c, shell, fork, execv

我运行我的shell，它提示：“ `Shell>`”。我输入一个命令，例如`ls`，它只是创建一个新行，`Shell>`再次显示“”。

知道为什么它似乎没有击中`execv`吗？

```
 int no_of_args = count(buffer);
            // plus one to make it NULL
            char** array_of_strings = malloc((sizeof(char*)*(no_of_args+1)));

            //  break the string up and create an array of pointers that
            // point to each of the arguments.
            int count=0;
            char* pch2;
            pch2 = strtok (buffer," ");
            while (pch2 != NULL)
            {
                array_of_strings[count]=(char*)malloc((sizeof(char)*strlen(pch2)));
                strcpy(array_of_strings[count], pch2);

                pch2 = strtok (NULL, " ");
                count++;
            }

            //format for command is eg. ls -a -l
            //therefore the first element in the array will be the program name
            //add the path so it'll be /bin/command eg. /bin/ls
            char* prog = malloc(sizeof(char)*(strlen(array_of_strings[0]+strlen(path))));
            prog = strcat(strcpy(prog, path),array_of_strings[0]);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T01:43:15.690

首先，你*永远*不需要使用它，`sizeof(char)`因为它总是 1。

ISO C99 如此定义字节：

> 数据存储的可寻址单元大到足以容纳执行环境的基本字符集的任何成员。

和后来的状态`6.5.3.4 The sizeof operator`：

> 当应用于具有 char、unsigned char 或 signed char 类型（或其限定版本）的操作数时，结果为 1。

这在 C11 中没有变化。

所以，基本上，一个字节就是你的`char`. ISO 通常保留`octet`8 位值的术语。

* * *

其次，一个语句序列，如：

```
array_of_strings[count]=(char*)malloc((sizeof(char)*strlen(pch2)));
strcpy(array_of_strings[count], pch2); 
```

是未定义的行为，因为`strlen(pch2)`只有足够*的*空间来存储 . 指向的字符串的副本`pch2`。你应该使用类似的东西：

```
array_of_strings[count] = malloc (strlen (pch2) + 1); 
```

您还会注意到我删除了演员表。您永远不应该在 C 中强制转换内存分配函数的返回值，因为它在某些情况下会隐藏问题。

第三，您似乎没有遵守`argv`阵列的规则。这个数组中的最后一个元素应该是一个 NULL 指针，因为在命令中`ls x.txt`会生成：

*   `"ls"`.
*   `"x.txt"`.
*   `NULL`.

* * *

现在，针对您的*具体*问题。您应该检查`execv`调用的返回值，因为不能保证可执行文件会运行（例如，如果`ls`不在`/bin`目录中）。我会改变：

```
int rv = execv(prog, array_of_strings); 
```

进入：

```
printf ("DEBUG: [%s]\n", prog);
int rv = execv(prog, array_of_strings);
printf ("DEBUG: execv returned %d/%d\n", rv, errno); // need errno.h 
```

出于调试目的，并查看输出的内容。

如果`execv`有效，您将永远不会看到最后的消息。如果它出现，它会告诉你为什么`execv`没有工作。当我这样做时，我看到：

```
DEBUG: [/bin/ls
]
DEBUG: execv returned -1/2 
```

换句话说，您尝试运行的可执行文件名称是`/bin/lsX`，其中`X`是换行符。没有这样的可执行文件，因此错误 2 ( `ENOENT = No such file or directory`) 来自`execv`- 您需要修复解析代码，以便不留下换行符。

作为快速调试修复，我更改了以下行：

```
prog = strcat(strcpy(prog, path),array_of_strings[0]); 
```

进入：

```
prog = strcat(strcpy(prog, path),array_of_strings[0]);
if (prog[strlen(prog)-1] == '\n') prog[strlen(prog)-1] = '\0'; 
```

摆脱尾随换行符，如果它在那里，那么文件列表就成功了：

```
Shell>ls
DEBUG: [/bin/ls]
accounts2011.ods  birthdays    shares    workspace_android
accounts2012.ods  development  wildlife
Shell>_ 
```

那只是为了证明而调试的东西，不适合真正的代码，所以你仍然必须去修复你的解析。

* * *

您可能想看看[这个答案](https://stackoverflow.com/questions/4023895/how-to-read-string-entered-by-user-in-c/4023921#4023921)，因为它显示了一种通过缓冲区溢出保护从用户那里获取输入的好方法，如果太长，清理输入行的其余部分，提示并（在这种情况下最重要）删除换行符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T02:01:08.527

线

```
char* prog = malloc(sizeof(char)*(strlen(array_of_strings[0]+strlen(path)))); 
```

似乎错了。你确定你不是这个意思

```
char* prog = malloc(sizeof(char)*(strlen(array_of_strings[0])+strlen(path))); 
```

（注意移动括号）。（您要保留的字节数）将与路径（您尝试连接的字符串）`strlen(array_of_strings[0]+strlen(path))`的长度之和具有不可预测的关系。`array_of_strings[0]`这可能会导致段错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T02:16:24.560

execv 之后的当前工作目录也发生了一些奇怪的事情。尝试“Shell>pwd”，甚至“Shell>ls /home/”。

无论如何，我想我可能已经通过在 fgets 之后删除“缓冲区”字符串末尾的 '\n' 字符来解决它。看看它是否适合你：

```
 fgets(buffer, 512, stdin);
 int j = strlen(buffer) - 1;
 if (buffer[j] == '\n')
     buffer[j] = 0; 
```

为什么会发生奇怪的 CWD 行为对我来说仍然是个谜……

希望这可以帮助。

# c++ - _GLIBCXX_USE_NANOSLEEP 到底是什么？

> ID：12523122
> 
> 赞同：45
> 
> 时间：2012-09-21T01:26:21.050
> 
> 标签：c++, gcc, sleep, glibc

一个名为 _GLIBCXX_USE_NANOSLEEP 的预处理器宏出现在两个标准头文件中：

*   *c++/4.7.1/x86_64-unknown-linux-gnu/bits/c++config.h*
*   *c++/4.7.1/线程*

*在 GCC 4.7.1（Linux，64 位）的默认构建中， c++config.h*包含的唯一内容是以下注释：

```
/* Defined if nanosleep is available. */
/* #undef _GLIBCXX_USE_NANOSLEEP */ 
```

而在*thread*`std::this_thread::sleep_for()`中，和的定义`std::this_thread::sleep_until()`取决于要定义的宏。如果没有定义，这两个函数——尽管 C++ 标准要求——也不会被定义。

在我的系统（glibc 2.15）上，宏没有定义，尽管`nanosleep()`函数（在 中声明`ctime`）存在并且可以运行。

我想知道这是怎么回事以及如何处理它。具体来说：

*   [正如这篇文章](https://stackoverflow.com/a/9140270/777186)所建议的那样，在构建 GCC 以默认激活此宏时是否应该使用配置选项？[（我在构建过程](http://gcc.gnu.org/install/configure.html)的在线文档中找不到任何内容。）
*   `nanosleep()`函数和宏之间真的有关系吗？`nanosleep()`in `ctime`/的声明`time.h`似乎不依赖或定义宏。
*   `-D`在我自己的头文件中定义宏或作为命令行上的一个选项（如[相关问题](https://stackoverflow.com/questions/4438084/stdthis-threadsleep-for-and-gcc)中所建议的那样）是否存在任何特定风险？如果我在一个`nanosleep()`不可用的系统上执行此操作，我如何才能真正找到？

**更新**从 GCC 4.8 开始，`std::this_thread::sleep_for()`libstdc++ 中自动包含对等的支持。不再需要配置标志。从[GCC 4.8 更改日志](http://gcc.gnu.org/gcc-4.8/changes.html)：

> this_thread::sleep_for()、this_thread::sleep_until() 和 this_thread::yield() 的定义不需要配置选项 --enable-libstdcxx-time；

但请注意乔纳森的回答中给出的 GCC 4.8 和 4.9 的更多细节。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-10-18T18:58:21.647

构建 libstdc++ 时，它的`configure`脚本会测试您的系统以查看支持哪些功能，并根据结果定义（或取消定义）各种宏`c++config.h`

在您的情况下`configure`，确定 POSIX[`nanosleep()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/nanosleep.html)函数不可用且未定义宏。但是，正如您所说，在您的系统上可用`nanosleep()` *。*未启用它的原因是，除非您使用该选项，`configure`否则对它的检查甚至不会运行（记录在 libstdc++ 手册的[*配置*](http://gcc.gnu.org/onlinedocs/libstdc++/manual/configure.html)[章节中](http://gcc.gnu.org/onlinedocs/libstdc++/manual/configure.html)，而不是 GCC 配置文档中）`--enable-libstdcxx-time`[](http://gcc.gnu.org/onlinedocs/libstdc++/manual/configure.html)

 *> *   *正如这篇文章所建议的，在构建 GCC 以默认激活此宏时，是否应该使用配置选项？（我在构建过程的在线文档中找不到任何内容。）*

是的，`--enable-libstdcxx-time`

> *   *nanosleep() 函数和宏之间真的有关系吗？ctime/time.h 中 nanosleep() 的声明似乎不依赖或定义宏。*

glibc 函数的声明不依赖于 libstdc++ 的宏，不。但是宏告诉 libstdc++ 是否使用该函数。

> *   *在我自己的头文件中定义宏或作为命令行上的 -D 选项（如相关问题中所建议的那样）是否存在任何特定风险？如果我在 nanosleep() 不可用的系统上执行此操作，我如何才能真正找到？*

它很顽皮，不受支持，但会起作用。宏是一个内部实现细节，应该由配置而不是由用户设置，并且更改实现的内部宏的定义可能会破坏事情。但在这种情况下，它不会因为唯一依赖它的代码在头文件中，没有库代码`libstdc++.so`受到影响。

但是最好重新安装 GCC 并使用该`--enable-libstdcxx-time`选项，或者如果这不可能，请编辑您`c++config.h`以将宏定义为 true。

如果您在`nanosleep()`不可用的其他系统上定义它，您将在`#include <thread>`.

我有一些改进该配置的[想法](http://gcc.gnu.org/ml/libstdc++/2012-05/msg00085.html)，因此默认情况下会检查`nanosleep()`和`sched_yield()`检查，但我还没有时间处理它们。

**更新：**我已经进行了一些更改，以便在没有构建 GCC 4.8 的情况下`--enable-libstdcxx-time`仍将定义`std::this_thread::yield()`（作为无操作）并将实现`std::this_thread::sleep_for()`和`std::this_thread::sleep_until()`使用较低的分辨率`::sleep()`和`::usleep()`功能而不是`::nanosleep()`. 不过定义还是比较好`--enable-libstdcxx-time`。

**另一个更新：** GCC 4.9.0 已经发布，现在默认在已知支持它们的平台上`nanosleep`自动启用。`sched_yield`不再需要使用`--enable-libstdcxx-time`.*

# r - Pairs 函数在 R 中不起作用

> ID：12523123
> 
> 赞同：-5
> 
> 时间：2012-09-21T01:26:23.763
> 
> 标签：r, function

我正在尝试从 alr3 包中绘制钞票数据框。我的 pair 函数抛出错误并且在执行时没有给我正确的绘图。有人可以告诉我这里出了什么问题吗？谢谢。

基本上我正在尝试编写代码以从“alr3”包中存在的“钞票”数据框中找出所有假钞。

**代码：-**

```
pairs(banknote[,-1],panel=
function(x,y,fake){
xy <- cbind(x,y)
points(xy[fake==0,],pch=15)
points(xy[fake==1,],pch=0)
}, fake=Y) 
```

**错误：-**

```
Error in points(xy[fake == 0, ], pch = 15) : 
  (subscript) logical subscript too long
In addition: Warning messages:
1: In plot.window(...) : "fake" is not a graphical parameter
2: In plot.xy(xy, type, ...) : "fake" is not a graphical parameter
3: In title(...) : "fake" is not a graphical parameter
4: In plot.window(...) : "fake" is not a graphical parameter
5: In plot.xy(xy, type, ...) : "fake" is not a graphical parameter
6: In title(...) : "fake" is not a graphical parameter
7: In axis(side = side, at = at, labels = labels, ...) :
  "fake" is not a graphical parameter 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T01:34:06.810

错误：显然`length(fake) > nrow(xy)`是在评估完成时。

警告：您的 'fake=Y' 参数在花括号之外，因此它被解释为传递给对的参数。我无法告诉您您期望它做什么，并且您没有显示工作区中可能存在的数据，所以... ???

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T01:37:40.117

呼应@DWin，目前尚不清楚是什么`Y`，因为它将尝试`Y`从您的工作区中获取。

如果您的意思是按内`pch`的列设置，那么以下将起作用`Y``banknote`

```
pairs(banknote[,-c(1,7)], 
  panel = function(x,y,...){
    points(x,y,pch = ifelse(as.logical(banknote$Y), 0,15))}) 
```

![在此处输入图像描述](../Images/14492b6f5b3afabfdc84376812d89cb3.png)

如果您不想引用`data.frame`and 列，`$`那么您可以将所有内容包装在一个`with(banknote, ...)`语句中，然后`R`将`banknote`首先在其中查找变量

所以以下将起作用

```
with(banknote, pairs(list(Left = Left, Right = Right, Bottom = Bottom, 
        Top = Top, Diagonal = Diagonal), 
      panel = function(x,y) points(x,y, pch= ifelse(as.logical(Y),0,15))) 
```

# node.js - node.js中可写流的write()方法能调用多快？

> ID：12523125
> 
> 赞同：1
> 
> 时间：2012-09-21T01:26:40.600
> 
> 标签：node.js, fs

在我的服务器端，我使用可写流来记录连接到服务器的所有客户端的变化数据。这是我写的：

```
function updateLoop () {
    var data = {'timeStep': timeStep, 'playerInfo': playerInfo};
    var text = JSON.stringify(data);
    writeStram.write(text + '\n');
    timeStep += 1;
}
...
updateTimer = setInterval(updateLoop, 50); 
```

所以函数 updateLoop() 每 50ms 被调用一次。

当'playerInfo'很小（小于1KB）时有效，例如服务器端运行20s后，输出文件中有20*1000/50 = 400行数据

但是当'playerInfo'变大，比如6KB或更大时，服务器端运行20s后，输出文件中只有220行数据。playerInfo 越大，输出文件中成功记录的数据行数越少。

我想知道 write() 方法的调用率是否有限制

非常感谢你们的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T02:37:26.853

问题可能不在于. `write`，而在于 JavaScript 中的计时器`setInterval`以及[计时器的工作方式。](http://ejohn.org/blog/how-javascript-timers-work/)

对于较大的数据，`updateLoop`完成执行所需的时间可能比设置的 50 ms 延迟要长。如果间隔需要足够长的时间相互重叠，其中一个将被添加到事件队列中，而另一个已经在等待，则跳过（或“丢弃”）较新的间隔。

> node.js中可写流的write()方法能调用多快？

`write`不应显式限制性能，但它可能会受到 Node 可以在您的计算机上实现的整体性能的限制（受 CPU、RAM 等影响）。

您必须对`updateLoop`不同数量的`playerInfo`. 您可以为此使用一些[软件包](https://npmjs.org/browse/keyword/benchmark)[`ben`](https://npmjs.org/package/ben)，包括：

```
ben(1000, updateLoop, function (ms) {
    console.log(ms, 'milliseconds per iteration');
}); 
```

# perl - Perl 正则表达式字符串替换

> ID：12523128
> 
> 赞同：2
> 
> 时间：2012-09-21T01:27:13.477
> 
> 标签：perl

我正在尝试替换两个单引号之间所有出现的 ANY 值，包括转义的单引号。以下工作非常好，除非找到转义的单引号。这是有道理的，但有没有办法解决它。我想替换单引号之间的所有字符。

```
$ echo "'blah\'blah'" | perl -pe s/"'"[^"'"]*"'"/stuff/g
stuffblah' 
```

我只想看看：

```
stuff 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T01:46:28.600

在我们的引号内，我们希望允许以下标记

1.  所有非引号字符`[^']`或
2.  所有转义引号`\'`，编码为`\\'`or
3.  所有转义的反斜杠`\\`，编码为`\\\\`. 我们需要这个额外的规则来表示*所有*可能的数据。

正则表达式中的*or*由管道字符 表示`|`，我们将这些可能的标记用括号括起来，以便对它们进行分组以进行迭代：

```
( \\\\ | \\' | [^'] )* 
```

或者更清楚地显示可以逃脱的内容：

```
( \\[\\'] | [^'] )* 
```

现在我们只需将其打包成引号，并使分组括号不保存（不需要`$1`创建变量等），我们有

```
s {' (?: \\[\\'] | [^'] )* '}
  {stuff}gx 
```

请注意使用`/x`修饰符来包含非语义空格以提高可读性。

### 编辑：Perl 单行

所有单行代码都经过了测试`bash`。其他 shell 将显示其他引用的恐怖。在下一行中，提供了未转义的正则表达式。

这个单行匹配单引号，指定：

```
perl -pe"s/'(?:\\\\[\\\\']|[^'])*'/stuff/g"
         s/'(?:\\  [\\']  |[^'])*'/stuff/gx 
```

将反斜杠加倍以适应外壳转义。

这个单行匹配双引号：

```
perl -pe"s/\"(?:\\\\[\\\\\"]|[^\"])*\"/stuff/g"
         s/ "(?:\\  [\\"]   |[^"] )* "/stuff/gx 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T01:46:35.490

您的问题是两个 blahs 之间只有一个单引号，因此当第一个 'blah' 被替换时，第二个 blah' 不再受单引号限制。如果您想允许转义单引号，请执行以下操作：

```
 s/\\?'[^']*'/stuff/g 
```

# gnu-make - GNU make 先决条件执行顺序

> ID：12523130
> 
> 赞同：2
> 
> 时间：2012-09-21T01:27:33.880
> 
> 标签：gnu-make

假设我有以下 GNU make 目标：

```
 create_dir: 
        @mkdir objects

    build_asm: $(ASM_FILES)
        @echo building assembly files...

    build_c: $(C_FILES)
        @echo building c files... 
```

我有一个从 .asm 或 .c 文件创建目标文件的通用规则。我想将这些组合成一个目标，如下所示......

```
all: create_dir build_asm build_c
    @echo build complete 
```

...并且我想使用使用多个作业的作业来构建此目标以提高性能。*.c 和 *.s 文件应该放在**build_c**创建的目录中，因此允许 make 以任何顺序执行它们是有问题的。

有没有办法强制 make在解析**build_c**和**build_asm**之前解析假目标**create_dir**而不会破坏目标？

 ***** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T05:55:08.963

创建对象目录是“order-only-prerequisites”的典型用例（参见GNU make 手册中[的先决条件类型）：](http://www.gnu.org/software/make/manual/html_node/Prerequisite-Types.html)

```
create_dir: 
    @mkdir objects

build_asm: $(ASM_FILES) | create_dir
    @echo building assembly files...

build_c: $(C_FILES) | create_dir
    @echo building c files...

all: build_asm build_c
    @echo build complete 
```****

# sql - 在 SQL 表中具有复合键和主键

> ID：12523136
> 
> 赞同：3
> 
> 时间：2012-09-21T01:28:42.343
> 
> 标签：sql, foreign-keys, composite-primary-key

我在创建包含复合键和主键的 SQL 表时遇到问题。这就是我现在所拥有的：

```
CREATE TABLE Racunar (
  IPAdresa char(15) PRIMARY KEY,
  CPU char(20),
  HD char(20)
);

CREATE TABLE Program (
  Naziv char(15),
  Verzija char(20),
  Datum char(11),
  PRIMARY KEY(Naziv, Verzija)
);

CREATE TABLE Operater (
  SifO int PRIMARY KEY,
  Ime char(20),
  BrTel char(20)
);

CREATE TABLE JeInstaliran (
  IPAdresa char(15) FOREIGN KEY REFERENCES Racunar(IPAdresa),
  SifO int FOREIGN KEY REFERENCES Operater(SifO),
  FOREIGN KEY(Naziv, Verzija) REFERENCES Program(Naziv, Verzija),
  DatumInstalacije char(11)
); 
```

问题出在最后一张表的某个地方。我正在使用[SQL Fiddle](http://sqlfiddle.com/)，它在尝试构建架构后返回了下一条错误消息：

> Schema Creation Failed：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 2 行的“外键引用 Racunar(IPAdresa), SifO int FOREIGN KEY REFERENCES Oper”附近使用正确的语法：

我不知道为什么这不起作用，所以我会很感激任何帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T01:35:55.630

语法不正确。不是`FOREIGN KEY`与列一起定义，而是在列定义之后使用语法定义它`FOREIGN KEY (colname) REFERENCES tablename (foreign_colname)`

```
CREATE TABLE JeInstaliran (
  IPAdresa char(15),
  SifO int,
  Naziv char(15),
  Verzija char(20),
  FOREIGN KEY (IPAdresa) REFERENCES Racunar(IPAdresa),
  FOREIGN KEY (SifO) REFERENCES Operater(SifO),
  FOREIGN KEY(Naziv, Verzija) REFERENCES Program(Naziv, Verzija),
  DatumInstalacije char(11)
); 
```

# mongodb - 将我的想法从关系模型转变为文档存储（理论）

> ID：12523143
> 
> 赞同：1
> 
> 时间：2012-09-21T01:31:04.250
> 
> 标签：mongodb, database-design, database-schema, database

我仍在努力思考如何在野外使用像 Mongo 这样的东西。

有人可以向我解释一下吗（我知道这很简单）？

好的，假设我有一组用户，他们有一堆服务，在 SQL 数据库中，他们将像这样存储：

用户表

```
| user_id | name | address |
|---------|------|---------|
| 1       | Zen  | 1 a St  |
|---------|------|---------| 
```

服务

```
| service_id | user_id | service_type | cost |
|------------|---------|--------------|------|
| 1          | 1       | hosting      | 50   |
|------------|---------|--------------|------| 
```

在 Mongo 中，有人会将其存储在用户中吗？所以它更像是用对象来表示它？

例如

```
User: 1
    Name: Zen
    Address: 1 a St
    Services:
        service 1
             type: hosting
             cost: 50 
```

如果是这样，是否有一个指向价值的“指针”（对于多个“事物”可能“拥有”另一个“事物”的情况，或者数据的层次结构具有需要这样做的关系？

有 SQL 背景的人如何考虑 Mongo 来解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:59:20.220

建模可以或多或少是抽象的。在 SQL 的世界中，表几乎是您可以使用的最低级别的抽象，并且仍然将数据连接到底层主题。更高层次的抽象是关系建模和 ER 建模。“更高”不是“更好”的代名词。每个抽象级别都通过掩盖其他特征来突出某些特征。什么级别对您的目的有用取决于您想要更清楚地看到什么。

其他回复之一提到 Mongo 支持嵌套。嵌套可以是一种编码数据项之间的层次关系的方式，而不会强加很多上层结构。但是在不了解 Mongo 的情况下，我无法告诉您这是否是 Mongo 的架构师为他们的用户提供嵌套的原因。

等级关系可能是有益的，也可能是阻碍性的，这取决于你想要做什么。例如，如果您了解用户，并且您正在尝试查找所有服务，那么所提出的嵌套结构可能非常易于使用，并且可能非常有效。但是，如果您了解该服务，并且想找到所有用户，那么您将陷入困境。

克服层次结构的不幸副作用是关系模型和关系数据库获得认可的主要原因之一。但是等级关系并不总是“坏的”。在某些情况下，这是对数据建模的最佳方式。

回到您的问题，您可能希望在更高的抽象级别上将 SQL 与 Mongo 进行比较，而不是将表与嵌套结构进行比较。我已经告诉过您要寻找与 SQL 相关的更高级别的抽象。其他一些响应者将不得不为 Mongo 告诉你同样的事情。

最终，如果您继续提高抽象级别，您应该会找到一个同样适用于 SQL 和 Mongo 的模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T06:16:03.997

MongoDB 中的有效数据建模遵循您的应用程序要求和常见用例。您可以将文档视为类似于序列化的对象；MongoDB 文档格式支持丰富的数据结构，包括嵌套。

首先考虑您的应用程序用例以规划您理想的查询和操作数据的方式是有建设性的。您不必在 MongoDB 中预先声明您的模式，这有助于原型设计。MongoDB 中的模式通常更类似于数据仓库，其中一些数据被故意非规范化以避免连接并提高性能。事实上，MongoDB 不支持连接或子查询 :)。

对于关系，如果您使用对象-文档模型或数据映射器，可能还有一些注意事项......其中许多提供者助手用于关系。

传统的选择是[嵌入还是链接](http://www.mongodb.org/display/DOCS/Schema+Design)相关数据。

对于您的示例，您仍然可以拥有一个`users`集合和一个`services`集合：

*   如果用户拥有多个服务，您可能会将他们的服务列表作为数组*嵌入到用户文档中。*

*   用户的服务可能包括基本的详细信息，例如服务 ID 和名称；serviceID 将是一个唯一的 ID，可用于在服务集合中查找完整的服务定义。这将*链接*到服务集合。请注意，MongoDB 服务器不支持连接，因此如果您想查找用户和每个服务的完整详细信息，则需要多次查询。

相关阅读：

*   [使用嵌入式、非嵌入式和桶结构设计 MongoDB 模式](https://openshift.redhat.com/community/blogs/designing-mongodb-schemas-with-embedded-non-embedded-and-bucket-structures)

*   [MongoDB：架构设计](http://www.mongodb.org/display/DOCS/Schema+Design)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T01:42:41.023

注意：我从未使用过 Mongo，但我已经开发了几个 NoSQL 解决方案。

在 Redis 和 CouchDB 中，我使用前缀-后缀样式命名约定存储对象。

服务 ===
services.userid.1
services.userid.2

用户 ===
users.userid.1
users.userid.2

现在应该轻而易举地找到用户的服务。=> services.user-name.wild-card

# django - Model.objects.filter(slug=slug)

> ID：12523145
> 
> 赞同：0
> 
> 时间：2012-09-21T01:31:12.380
> 
> 标签：django, forms, models

我有 2 个表，其中一个带有 ForeignKey 当前站点有一个 slug 我想查找一组对象，这些对象的引用是 slug

每个非营利组织都会收到捐款，请帮我展示当前标签上给一个非营利组织的捐款

这是我的意见.py

```
def nonProfit(request,slug):
    """ we need a page to serve info about non profit pages"""
    np = get_object_or_404(NonProfit,slug=slug)
    try:
        nonProfit_slug = NonProfit.objects.filter(name=slug)
        donation_list = Donation.objects.filter(towards=nonProfit_slug)

        paginator = Paginator(donation_list, 4) # Show 4 contacts per page

        page = request.GET.get('page')
        try:
            donations = paginator.page(page)
        except PageNotAnInteger:
            # If page is not an integer, deliver first page.
            donations = paginator.page(1)
        except EmptyPage:
            # If page is out of range (e.g. 9999), deliver last page of results.
            donations = paginator.page(paginator.num_pages)
        return render_to_response('nonProfit.html',
    {"donations":donations,
    "site":settings.SITE_DOMAIN,
    "nonProfit":np},
    context_instance=RequestContext(request))

    except: # no donations
        return render_to_response('nonProfit.html',{'nonProfit':np},context_instance=RequestContext(request)) 
```

我的模型.py

```
class Donation (models.Model):
    user = models.ForeignKey(User)
    name = models.CharField(max_length=50)
    description = models.CharField(max_length=3000)
    towards = models.ForeignKey(NonProfit)
    image = models.ImageField(upload_to='photos/%Y/%m/%d')
    slug = models.SlugField(max_length=128)
    slug = AutoSlugField(('slug'), max_length=128, unique=True, populate_from=('name',))
    ticketPrice = models.IntegerField()

    enable_comments = models.BooleanField()
class NonProfit (models.Model):
    user = models.ForeignKey(User)
    name = models.CharField(max_length=50)
    address = models.CharField(max_length=50)
    city = models.CharField(max_length=60)
    state_province = models.CharField(max_length=30)
    country = models.CharField(max_length=50)
    website = models.URLField()
    email = models.EmailField()
    money_gained = models.IntegerField()
    money_gained.null = True
    slug = models.SlugField(max_length=128)
    slug = AutoSlugField(('slug'), max_length=128, unique=True, populate_from=('name',))

    description = models.CharField(max_length=3000)

    def __unicode__(self):
        return self.slug 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T03:16:53.860

[这](https://docs.djangoproject.com/en/dev/topics/db/queries/#related-objects)就是我想的你。

例子：

```
np = get_object_or_404(NonProfit,slug=slug)
related_donations = np.donation_set.all() 
```

# jquery - 如何从元素中删除所有类？

> ID：12523146
> 
> 赞同：7
> 
> 时间：2012-09-21T01:31:17.007
> 
> 标签：jquery

> **可能重复：**
> [如何使用 jQuery 删除所有 CSS 类？](https://stackoverflow.com/questions/1424981/how-to-remove-all-css-classes-using-jquery)

我有以下内容：

```
<div id="abc">
</div> 
```

在该 div 内只能有以下内容之一：

```
<p class="message">
<p class="message error"></p>
<p class="message warning"></p>
<p class="message success"></p>
<p class="message loading"></p> 
```

有没有办法可以从`<p>`元素中找到并删除所有类？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-21T01:33:12.950

你可以这样做：

```
$("#abc p").attr("class", ""); 
```

或者

```
$("#abc p").removeClass(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-21T01:33:11.227

> 如果参数中没有指定类名，则将删除所有类。

[来源](http://api.jquery.com/removeClass/)。

`removeClass()`不带参数使用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-21T01:32:44.047

您可以使用`removeAttr`方法：

```
$('#abc p').removeAttr('class') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T01:33:57.400

从文档中，[`.removeClass()`](http://api.jquery.com/removeClass/#example-2)

```
$('#abc p').removeClass(); 
```

# oop - 如何为博客系统设计未分类的帖子

> ID：12523150
> 
> 赞同：0
> 
> 时间：2012-09-21T01:32:34.783
> 
> 标签：oop, database-design, url-routing, blogs, ooad

我有 3 张桌子：

**邮政**

**类别**

**PostCategory**（多对多关系表）

当用户为帖子选择一个或多个类别时，它可以正常工作。但是一种情况是，当用户没有选择任何类别时，我应该如何管理这些未分类的帖子？

我想到了两种方法，不知道哪个更好。

**1.未分类的帖子不应插入[PostCategory]。**

问题：

a) 在 URL 路由中，我使用“ **/Post/Category/Travel** ”来显示分类帖子。现在用户想要列出所有未分类的帖子，我只能使用“ **/Post/Category/Uncategorized** ”之类的东西。这将导致许多代码更改，以便从正常的 URL 路由值中区分“未分类”字符串。

b) 当用户自己在系统中添加一个名为“Uncategorized”的类别时会造成混乱。（可能我可以定义一些系统保留字，但我觉得不太好。）

**2.在[Category]中添加一个常数值（Uncategorized），也作为系统保留字。如果用户没有选择任何类别，则将帖子插入 PostCategory(postId, UncategorizedId)。**

问题：

它将“Uncategorized”视为一个类别，对计算机来说是一个正常的类别，只有人类知道这是一个特殊的类别。在OOP设计中不好。

很难决定哪个更好，有没有其他方法来管理“未分类”的帖子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:07:07.260

解决方案 (2) 将允许对单个帖子进行**分类**和未分类。所以纯粹从数据一致性的角度来看，（1）是一个更好的解决方案。

我无法真正评论代码更改的复杂性，但作为一般准则，在更清洁的代码和更清洁的数据之间进行选择时，更喜欢更清洁的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T03:00:12.733

Then for the sake of **data consistency**, **indexing benefits on tags**,and to preserve your own sanity, every entry *must* be tagged/categorized. Unless by your design or some other constraints, this is not an option. Take this very site for example. StackOverflow won't let you post a question here without a tag. You will gain performance benefits (at least) from tagging your content and indexing those tags.

# c++ - 将内存复制到 std::copy

> ID：12523153
> 
> 赞同：0
> 
> 时间：2012-09-21T01:32:55.327
> 
> 标签：c++, c++11

我正在尝试将我所有的 CopyMemory 函数转换为 std::copy 函数。

它适用于 copymemory 和 memcpy，但不适用于 std::copy。谁能告诉我我做错了什么或如何解决？

```
template<typename T>
void S(unsigned char* &Destination, const T &Source)
{
    //CopyMemory(Destination, &Source, sizeof(T));
    std::copy(&Source, &Source + sizeof(T), Destination);      //Fails..
    Destination += sizeof(T);
}

template<typename T>
void D(T* &Destination, unsigned char* Source, size_t Size)
{
    //CopyMemory(Destination, Source, Size);
    std::copy(Source, Source + Size, Destination);
    Source += sizeof(T);
}

template<typename T>
void D(T &Destination, unsigned char* Source, size_t Size)
{
    //CopyMemory(&Destination, Source, Size);
    std::copy(Source, Source + Size, &Destination);
    Source += sizeof(T);
} 
```

我还认为我可以执行以下操作将迭代器转换为指针：

```
std::string Foo = "fdsgsdgs";

std::string::iterator it = Foo.begin();

unsigned char* pt = &(*it); 
```

那么我将如何将指针转换为迭代器呢？:S

我用来测试 memcpy/copymem vs std::copy 的代码如下（如果有效则打印 7 .. 如果无效则打印随机数）：

```
#include <windows.h>
#include <iostream>
#include <vector>
#include <typeinfo>

using namespace std;

typedef struct
{
    int SX, SY;
    uint32_t Stride;
    unsigned long ID;
    int TriangleCount;
} Model;

template<typename T>
void S(unsigned char* &Destination, const T &Source)
{
    CopyMemory(Destination, &Source, sizeof(T));
    Destination += sizeof(T);
}

template<typename T>
void S(unsigned char* &Destination, const std::vector<T> &VectorContainer)
{
    size_t Size = VectorContainer.size();
    for (size_t I = 0; I < Size; ++I)
        S(Destination, VectorContainer[I]);
}

void S(unsigned char* &Destination, const Model &M)
{
    S(Destination, M.SX);
    S(Destination, M.SY);
    S(Destination, M.Stride);
    S(Destination, M.ID);
    S(Destination, M.TriangleCount);
}

template<typename T>
void D(T* &Destination, unsigned char* Source, size_t Size)
{
    CopyMemory(Destination, Source, Size);
    Source += sizeof(T);
}

template<typename T>
void D(T &Destination, unsigned char* Source, size_t Size)
{
    CopyMemory(&Destination, Source, Size);
    Source += sizeof(T);
}

template<typename T>
void D(std::vector<T> &Destination, unsigned char* Source, size_t Size)
{
    Destination.resize(Size);
    for(size_t I = 0; I < Size; ++I)
    {
        D(Destination[I], Source, sizeof(T));
        Source += sizeof(T);
    }
}

void D(Model* &Destination, unsigned char* Source)
{
    D(Destination->SX, Source, sizeof(Destination->SX));
    D(Destination->SY, Source, sizeof(Destination->SY));
    D(Destination->Stride, Source, sizeof(Destination->Stride));
    D(Destination->ID, Source, sizeof(Destination->ID));
    D(Destination->TriangleCount, Source, sizeof(Destination->TriangleCount));
}

long double* LD = new long double[25000];
std::vector<Model> ListOfModels, ListOfData;

void ExecuteCommands()
{
    switch(static_cast<int>(LD[1]))
    {
        case 1:
        {
            LD[2] = 2;
            unsigned char* Data = reinterpret_cast<unsigned char*>(&LD[3]);
            Model M; M.SX = 1; M.SY = 3; M.Stride = 24; M.ID = 7; M.TriangleCount = 9;
            Model K; K.SX = 3; K.SY = 21; K.Stride = 34; K.ID = 9; K.TriangleCount = 28;

            ListOfModels.push_back(M);
            ListOfModels.push_back(K);
            S(Data, ListOfModels);
        }
        break;
    }
}

void* GetData()
{
    unsigned char* Data = reinterpret_cast<unsigned char*>(&LD[3]);
    D(ListOfData, Data, LD[2]);
    cout<<ListOfData[0].ID;        //Should print 7 if it works.
    return &ListOfData[0];
}

int main()
{
    LD[1] = 1;
    ExecuteCommands();
    GetData();
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T04:41:52.640

这段代码有很多问题，几乎不可能知道从哪里开始。在许多情况下，这些错误是如此基本，以至于暴露出对你应该做什么的严重误解。你写的那种代码对于有经验的 C++ 程序员来说是危险的；您在代码中犯的错误表明您还没有经验。

停止尝试做你想做的事情。

但是让我们拿你的代码。

```
std::copy(&Source, &Source + sizeof(T), Destination);      //Fails.. 
```

首先，让我们谈谈 C++ 中的指针。

如果你有一个指向某种类型的指针`T`，比如说`T *t`，这样做`t + 1`不会*将*指针移过一个字节。这是这里的基本指针算术内容；`t + 1`将其转移`sizeof(T)`；从 C 的早期开始，指针就是这样工作的，更不用说 C++了。

`Source`是 a `T&`，`&Source`a 也是`T*`。因此，添加`sizeof(T)`它会使指针增加`sizeof(T) * sizeof(T)`. 那不是你想要的。

其次，`std::copy` *不是 memcpy*。`std::copy`用于将一个值集合（由输入迭代器对定义）复制到另一个由输出迭代器定义的值集合中。`std::copy`要求`value_type`输入迭代器的 可隐式转换为`value_type`输出迭代器的。

的`value_type`a `T*`，有问题的输入迭代器，是 a `T`; `T*`的指向`T`s。`value_type`您的`char*`输出迭代器是`char`. `std::copy`将尝试有效地做到这一点：

```
char *val;
T *t;
*val = *t; 
```

即使忽略这两个指针未初始化的事实，这也没有任何意义。除非`T`有`operator char`转换运算符，否则您不能简单地将 a`T`放入 a`char`中。因此，您会收到编译错误。正如你应该的那样。

如果您确实有一些`T`并想将其复制到`char*`适当大小的数组中（反之亦然），`std::copy`则不是您需要的工具。你想要的工具是`std::memcpy`. `std::copy`用于复制*对象*，而不是复制字节。

# c++ - 使用私有继承隐藏实现是个好主意吗？

> ID：12523154
> 
> 赞同：2
> 
> 时间：2012-09-21T01:32:59.440
> 
> 标签：c++, design-patterns, inheritance, pimpl-idiom

例如

```
// Implementation.
struct PrivatePoint {
  void SomePrivateMethod();

  double x;
  double y;
}

struct Point : private PrivatePoint {
  double DistanceTo(const Point& other) const;
} 
```

这似乎类似于[Pimpl 成语](http://en.wikipedia.org/wiki/Opaque_pointer)。这有两个我非常喜欢的优点：

1.  SomePrivateMethod 是可测试的。如果 SomePrivateMethod 在 Point 中被声明为私有，您将无法从测试中调用它。如果您在 Point 中将其声明为 public 或 protected，测试将能够调用它，但 Point 的普通用户也可以调用它。
2.  与您在 Pimpl 惯用语中的操作相比，访问私有数据更容易读写，因为您不必通过指针，例如

.

```
Point::DistanceTo(const Point& other) {
  SomePrivateMethod();

  double dx = other.x - x;
  double dy = other.y - y;
  return sqrt(dx * dx + dy * dy);
} 
```

对比

```
Point::DistanceTo(const Point& other) {
  ptr->SomePrivateMethod();

  double dx = other.ptr->x - ptr->x;
  double dy = other.ptr->y - ptr->y;
  return sqrt(dx * dx + dy * dy);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T02:07:04.530

你的建议有一些缺点......

用户可以将自己耦合到“私人”类。

pimpl idiom 的主要目的是作为编译防火墙，允许在实现文件中指定私有成员，因此可以在不触及标题和需要/触发客户端重新编译的情况下进行更改，这与重新链接不同，后者更快，并且如果更新是动态加载的库，甚至可能不需要涉及客户端应用程序的任何操作。你失去了这些好处。

> SomePrivateMethod 是可测试的。如果 SomePrivateMethod 在 Point 中被声明为私有，您将无法从测试中调用它。如果您在 Point 中将其声明为 public 或 protected，测试将能够调用它，但 Point 的普通用户也可以调用它。

还有其他方便的选项：例如 - 您可以声明与测试代码的友谊，或使用预处理器构建暴露数据的测试模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T09:10:19.350

私有继承与组合（和 pimpl）非常相似，但有一些缺点需要考虑：

1.  您需要使 PrivatePoint 定义在公共标头中可见。这引入了对 PrivatePoint 的编译时间依赖性，并且每次 PrivatePoint 更改时都需要 Point 的客户端重新编译。对于 pimpl，情况并非如此，只需像这样转发声明 PrivatePoint： struct PrivatePoint;

2.  封装是一周。通过私有继承，扩展 Point 的客户端能够实现自己的 SomePrivateMethod 版本（C++ 允许覆盖私有虚拟方法）。在您的示例中这不是问题，但如果 SomePrivateMethod 被声明为虚拟的

如果您使用 pimpl，您还可以轻松地对 PrivatePoint 进行单元测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T01:49:08.880

no, as anyway you have to publish header file that declares the base class. the private inheritance protect you or your users from unwanted access to the data/methods.

# content-management-system - CM5.3 (VI400) SimLibDeleteItem [FRN=6052,ExtRC=0] 尝试删除文档时

> ID：12523157
> 
> 赞同：0
> 
> 时间：2012-09-21T01:33:14.617
> 
> 标签：content-management-system, ibm-midrange

我正在编写一些代码来从 IBM Content Manager 5.3 AKA VI400 中删除文档。我写了一个查询来查找一个项目，但我无法删除已检索到的项目。我可以列出属性等。

当我尝试删除该项目时，我收到以下错误：

> SimLibDeleteItem[FRN=6052,ExtRC=0]
> 
> SimLibDeleteItem
> FRN=6052
> ExtRC=0

我怎样才能克服错误？

```
CMBQueryService queryService = connection.getQueryService();
CMBSearchResults searchResults = new CMBSearchResults();
searchResults.setConnection(connection);
CMBDataManagement dataManagement = connection.getDataManagement();

String queryString = createQueryString(entity, condition);
short queryType = CMBBaseConstant.CMB_QS_TYPE_PARAMETRIC;
queryService.setQueryString(queryString, queryType);
queryService.setAsynchSearch(false);
queryService.runQuery();
searchResults.newResults(queryService.getResults());
for (CMBItem item : searchResults.getItems()) {
    dataManagement.setDataObject(item);
    //This is where the delete occurs. SimLibDeleteItem[FRN=6052,ExtRC=0]  happens when this is called.
    dataManagement.deleteItem();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T06:21:15.007

当进一步查找 SimLibDeleteItem FRN=6052 ExtRC=0 表示信号量错误。在使用相同的 id 登录并通过 win 客户端访问系统后，这没有任何意义，很明显，该 id 无权访问删除过程。

**总之**

1.  原因：用于删除的 ID 没有删除权限。
2.  诊断：登录windows客户端查看是否可以看到删除功能。
3.  解决方案：为执行删除的 ID 获取更多访问权限。

无需更改编码或特殊配置。

# jquery - Jquery UI Slider, Slider Handle 图片问题

> ID：12523161
> 
> 赞同：2
> 
> 时间：2012-09-21T01:33:45.867
> 
> 标签：jquery, jquery-ui, jquery-ui-slider

我有以下问题：
我已经从`Jquery UI`网站（从这里：http: [//jqueryui.com/demos/slider/side-scroll.html](http://jqueryui.com/demos/slider/side-scroll.html)）中获取了滑块的示例，并且需要修改它以便滑块的handle 显示不同的图形，但我无法正确显示。

它*应该*像将“”中的背景：属性指向`.scroll-bar-wrap .ui-slider-handle`我的图像一样简单，或者至少我是这么认为的。该功能工作正常，单击滚动条的一般区域并左右移动将使滚动正常。问题是，无论我尝试什么，我都无法获得`CSS properties`关于滚动条及其句柄的任何类型的图像（或者，就此而言）！

这是一个目录，其中包含我一直在使用的模型： 编辑：这很尴尬，我发布了一个错误的页面。更多内容如下。

我已经搜索了 Stack Overflow 的 jquery UI 线程，并在一般情况下进行了谷歌搜索，但我似乎无法找到解决方案。在这一点上，我认为这是一些简单的 CSS 东西让我感到困惑并使句柄不可见，但功能完好无损。请问，我做错了什么？

编辑：好的，我很抱歉发布一个没有显示正确模型的页面的链接。很抱歉浪费了任何人的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T01:54:29.577

Try overriding this class's in your css file.. Check if this works

```
.ui-state-default,.ui-widget-content .ui-state-default,.ui-widget-header .ui-state-default {
background:green url(slider.png) 50% 50% repeat-x !important;
}​ 
```

# xmpp - 如何从联系人列表中获取当前活跃成员？

> ID：12523163
> 
> 赞同：1
> 
> 时间：2012-09-21T01:34:02.877
> 
> 标签：xmpp, libstrophe

XMPP 和库...

想：

1.  从联系人列表中查询当前活跃成员（例如，Google 帐户中的绿色成员）
2.  保持更新

示例代码赞赏，非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T02:41:16.553

您的服务器会从您的联系人那里向您推送在线信息：在线可用 -> 用户在线。状态不可用 -> 用户离线。

当您第一次连接并开始会话时，服务器将向您发送在线联系人的所有状态。从那时起，只要您的一位联系人更改其状态，您就会收到在线信息。所以你总是更新。在此基础上保持联系人列表的当前状态是客户（即您）的责任。

恕我直言，没有标准的方法可以查询服务器中您名册的活跃成员。也许有些服务器实现了该功能，不知道。

# javascript - 在 Linux 下的 Firefox 15.0.1 中未触发 transitionend 事件

> ID：12523169
> 
> 赞同：0
> 
> 时间：2012-09-21T01:34:39.073
> 
> 标签：javascript, css, firefox, dom-events, css-transitions

这可以在这里测试：http: [//jsfiddle.net/rGECn/2/](http://jsfiddle.net/rGECn/2/)

是否有解决此问题的方法？

**更新 1：**

`transitionend`在窗口中返回 false。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T02:18:00.527

您在 CSS 中缺少一些供应商前缀。

```
button {
    width: 100px;
    -moz-transition: all 1s;
    -o-transition: all 1s;
    -webkit-transition: all 1s;
    transition: all 1s;
} 
```

根据这个[compat table](http://caniuse.com/css-transitions)，`transition`s 仅在 IE10 中受支持，所以我建议使用 jQuery 的[`animate`](http://api.jquery.com/animate/)方法作为跨浏览器解决方案：

```
$('button').click(function() {
    var toggle = [100, 150],
        $this = $(this),
        c = $this.data('count') + 1;
    $this.data('count', c);
    $this.stop(true).animate({'width': toggle[c % toggle.length]}, 1000, function() {
        //done callback
        count();
    });
}).data('count', 0); 
```

[**小提琴**](http://jsfiddle.net/rGECn/49/)

`.stop(true)`如果您想将动画排队而不是在用户点击动画时将其中断，请删除。

# php - 分页搜索结果

> ID：12523172
> 
> 赞同：0
> 
> 时间：2012-09-21T01:35:09.963
> 
> 标签：php, mysql, pagination

我已经实现了一个显示所有记录的搜索功能，当我搜索时，它将通过分页过滤所有记录。

但是有一个问题：每次我搜索记录时，它都会显示所有页面，但是当我单击第二页时，它将显示数据库中的所有记录 - 而不是我想要过滤的内容。

这是我的代码：

```
<form id="form1" name="form1" method="get" action="">
    <br/>
        <div>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
         <font color ="white" face ="Arial" size ="5" style="padding: 5px; text-align: center;">Search for an Applicant Record</font><br/><br/>
         <table border=0 cellSpacing=2 cellPadding=2 align ="left" >
           <tr>
                    <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
                    <td>&nbsp;&nbsp;&nbsp;</td>
                    <td>&nbsp;&nbsp;&nbsp;</td>
                    <td>&nbsp;&nbsp;&nbsp;</td>
                    <td>&nbsp;&nbsp;&nbsp;</td>
                    <td>&nbsp;&nbsp;&nbsp;</td>
                    <td><a href="search.php"><img src="/applicants/icons/reset.png" title="Reset Page"/><font size="3" face="Tahoma" color="white"><b>Reset</b></font></a></td>
                </tr>
                <tr>
                    <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
                    <td align="left"><p><label for="searchfor"><font color ="white" size ="2" face ="Tahoma"><b>Search for:            </b></font></label></p></td>
                    <td>&nbsp;</td>
                    <td align="left"><input type="text" name="searchfor" class="tb5a" id="searchfor" size="25"  /></td>
                    <td align="left">
                    <select name="select" class="tb5a">
                    <option selected="selected">Applicant's Name</option>
                    <option>Position Applying For</option>
                    <option>Work Experience</option>
                    <option>Remarks</option>
                    </select>
                    </td>
                    <td>&nbsp;&nbsp;&nbsp;</td>
                    <td>&nbsp;&nbsp;&nbsp;</td>
                </tr>
                <tr>
                    <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
                    <td align="left"><p><label for="from"><font color ="white" size ="2" face ="Tahoma"><b>Date Applied from:            </b></font></label></p></td>
                    <td>&nbsp;</td>
                    <td align="left"><input name="from" type="text" class="tb5a" id="from" size="10"  /></td>
                    <td>&nbsp;&nbsp;&nbsp;</td>
                    <td>&nbsp;&nbsp;&nbsp;</td>
                    <td>&nbsp;&nbsp;&nbsp;</td>

                </tr>
                <tr>
                    <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
                    <td align="left"><p><label for="date_appliedto"><font color ="white" size ="2" face ="Tahoma"><b>        to:            </b></font></label></p></td>
                    <td>&nbsp;</td>
                    <td align="left"><input name="to" type="text" class="tb5a" id="to" size="10" /></td>
                    <td>&nbsp;&nbsp;&nbsp;</td>
                    <td>&nbsp;&nbsp;&nbsp;</td>
                    <td>&nbsp;&nbsp;&nbsp;</td>
                </tr>
                <tr>
                    <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
                    <td>&nbsp;&nbsp;&nbsp;</td>
                    <td>&nbsp;</td>
                    <td>&nbsp;&nbsp;&nbsp;</td>
                    <td>&nbsp;&nbsp;&nbsp;</td>
                    <td>&nbsp;&nbsp;&nbsp;</td>
                    <td colspan="1" align="right"><p><input type="submit" name="search" class="update" id="button" value="    Search    " onclick=verify();/></p></td>
                </tr>
            </table>
        </div>
    </form> 
```

```
 <?php
    error_reporting(0);
    include_once 'include/conn.inc.php';
    //Include the PS_Pagination class
    include('include/ps_pagination.php');
            //Connect to mysql db
            $conn = mysql_connect('localhost','root','');
        if(!$conn) die("Failed to connect to database!");
        $status = mysql_select_db('timemanagement', $conn);
        if(!$status) die("Failed to select database!");

            if (isset($_POST['search'])) {
    $sql = "Select * from applicants_access order by applicant_id desc";
    }else{
    if ($_REQUEST["searchfor"]<>'') {
       $search_searchfor = " AND (lname LIKE '%".mysql_real_escape_string($_REQUEST["searchfor"])."%' OR fname LIKE '%".mysql_real_escape_string($_REQUEST["searchfor"])."%' OR mname LIKE '%".mysql_real_escape_string($_REQUEST["searchfor"])."%' OR image LIKE '%".mysql_real_escape_string($_REQUEST["searchfor"])."%' OR appfor LIKE '%".mysql_real_escape_string($_REQUEST["searchfor"])."%' OR workexp LIKE '%".mysql_real_escape_string($_REQUEST["searchfor"])."%' OR remarks LIKE '%".mysql_real_escape_string($_REQUEST["searchfor"])."%')";
       }

        if ($_REQUEST["from"]<>'' and $_REQUEST["to"]<>'') {
            $sql = "SELECT * FROM applicants_access WHERE date_applied >= '".mysql_real_escape_string($_REQUEST["from"])."' AND date_applied <= '".mysql_real_escape_string($_REQUEST["to"])."'".$search_searchfor;
        }
        else if ($_REQUEST["from"]<>'') {
            $sql = "SELECT * FROM applicants_access WHERE date_applied >= '".mysql_real_escape_string($_REQUEST["from"])."'".$search_searchfor;
        }
        else if ($_REQUEST["to"]<>'') {
            $sql = "SELECT * FROM applicants_access WHERE date_applied <= '".mysql_real_escape_string($_REQUEST["to"])."'".$search_searchfor;
        }
        else {
            $sql = "SELECT * FROM applicants_access WHERE applicant_id>0".$search_searchfor;
        }
        if (($_REQUEST["select"])==($_REQUEST["searchfor"])){
            $sql = "Select * from applicants_access order by applicant_id desc";
        }
        $sql_result = mysql_query($sql);

        echo '<center>';
            /*
         * Create a PS_Pagination object
         *
         * $conn = MySQL connection object
         * $sql = SQl Query to paginate
         * 10 = Number of rows per page
         * 5 = Number of links
         * "param1=valu1&param2=value2" = You can append your own parameters to paginations links
         */

        $pager = new PS_Pagination($conn, $sql, 20, 10);

        /*
         * Enable debugging if you want o view query errors
        */
        $pager->setDebug(true);

        /*
         * The paginate() function returns a mysql result set
         * or false if no rows are returned by the query
        */
        $rs = $pager->paginate();
        if(!$rs) die(mysql_error());
                if($sql_result){

            echo '<br/>',
            '<div align ="center">',
            '<table id="table-2" cellspacing="0" cellpadding="1" border=1 >',
            '<thead>',
            '<th><center><font color ="#640303"><b>Last Name</b></font></center></th>',
            '<th><center><font color ="#640303"><b>First Name</b></font></center></th>',
            '<th><center><font color ="#640303"><b>Middle Name</b></font></center></th>',
            '<th><center><font color ="#640303"><b>View Attachment</b></font></center></th>',
            '<th><center><font color ="#640303"><b>Contact Number</b></font></center></th>',
            '<th><center><font color ="#640303"><b>Position Applying For</b></font></center></th>',
            '<th><center><font color ="#640303"><b>Work Experience</b></font></center></th>',
            '<th><center><font color ="#640303"><b>Date Applied</b></font></center></th>',
            '<th><center><font color ="#640303"><b>Remarks</b></font></center></th>',
            '</thead>';

        if (mysql_num_rows($sql_result)>0) {
                while ($row = mysql_fetch_array($rs)) {

                echo '<tbody>',
                '<tr>',
                '<td><center><font color = "black">', $row["lname"], '</font></center></td>',
                '<td><center><font color = "black">', $row["fname"], '</font></center></td>',
                '<td><center><font color = "black">', $row["mname"], '</font></center></td>',
                '<td><center><a href=images/'.$row[0].'/'.$row['filename'].' target="_blank">View</a></td>',
                '<td><center><font color = "black">', $row["cnumber"], '</font></center></td>',
                '<td><center><font color = "black">', $row["appfor"], '</font></center></td>',
                '<td><center><font color = "black">', $row["workexp"], '</font></center></td>',
                '<td><center><font color = "black">', $row["date_applied"], '</font></center></td>',
                '<td><center><font color = "black">', $row["remarks"], '</font></center></td>',
                '</tr></tbody>';
            }
        }
        else {

            echo '<tr><td colspan="45">No results found</td></tr>';

        }
            echo '</table></div>';
    ?>
    <?php
        }
    }

            echo '<div class="paginationTG">';
            echo '<ul>';
        //Display the link to first page: First
        echo $pager->renderFirst();

        //Display the link to previous page: <<
        echo $pager->renderPrev();
            echo'</span>';
        /*
         * Display page links: 1 2 3
         * $prefix = Will be prepended to the page link (optional)
         * $suffix = Will be appended to the page link (optional)
         *
        */

        echo $pager->renderNav('<li class="currentpage">', '</li>');

        //Display the link to next page: >>
        echo $pager->renderNext();

        //Display the link to last page: Last
        echo $pager->renderLast();
            echo '</div>' . '</ul>';
            echo '</center>';
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T01:50:58.163

Do you need to specify the search terms that got you the current search as a final parameter to the PS paginate constructor, so that the links it generates to "next" etc also include the search terms, rather than leaving them blank and therefore possibly matching everything?

# authentication - 通过foursquare API对用户进行身份验证时是否可以获得用户的电子邮件地址？

> ID：12523173
> 
> 赞同：1
> 
> 时间：2012-09-21T01:35:30.657
> 
> 标签：authentication, foursquare

我想允许用户使用foursquare 进行注册，但我找不到从哪里获取他们的电子邮件地址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:43:07.490

根据文档，它应该显示在用户资源中，在联系人字段中：[https ://developer.foursquare.com/docs/responses/user](https://developer.foursquare.com/docs/responses/user)

不过，电子邮件只会显示给经过身份验证的用户。

# javascript - 1 到 4 之间的随机数，不是另一个随机数

> ID：12523180
> 
> 赞同：1
> 
> 时间：2012-09-21T01:36:47.413
> 
> 标签：javascript, math, random, for-loop

由于某种原因，以下代码不起作用。

```
var a1 = Math.floor(Math.random()*4+1); 

//Answer2
for(a2 = 0; a2 != a1 && a2 != 0; a2 = Math.floor(Math.random()*4+1)){
    alert(a2);
} 
```

我试图让“a2”成为 1-4 的 int，但不等于“a1”。

怎么了？提前致谢！！！

编辑：

感谢大家的帮助！这是我的最终结果：

```
var a1, a2;
a1 = Math.floor(Math.random()*4+1); 
a2 = a1;

while(a2 == a1){
        a2 = Math.floor(Math.random() * 3 + 1);
        alert(a2);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T01:48:22.000

一个while循环怎么样？初始化`a2 = a1`然后：

```
while(a2 == a1) {
    a2 = Math.floor(Math.random() * 4 + 1);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T01:46:49.233

你的测试逻辑是颠倒的。当测试为真时，for 循环继续执行，如果失败则不会。而不是：`a2 != a1 && a2 != 0`你应该有`(a2 == a1) || (a2 == 0)`. 尽管还要记住，警报也只会在 a2 为无效状态的情况下执行，尽管 for 之后的警报应该是有效的。

或者，如果您正在寻找有趣的数学方式来使用模运算（无需重试）：

```
a2 = (Math.floor(Math.random() * 3 + (a1 + 1)) % 4) || 4 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T02:31:22.060

试试这个功能。`max`它会给你一个从 1 到随机顺序的数组。然后你可以用它来给一个变量赋值，它永远不会重复：

**编辑：**我找到了一种纯粹的功能性方法：

```
function randomRange(min, max) {
  return (new Array(++max-min))
    .join('.').split('.')
    .map(function(v,i){ return min+i })
    .sort(function(){ return 0|Math.random()*max });
}

console.log(rand(1,4)); //-> [4,2,1,3] random array from 1 to 4

var arr = rand(1,4);
var a = arr[0];
var b = arr[1];
... 
```

**编辑2**：似乎上面的某些浏览器存在问题，请查看[随机但仅在Chrome](https://stackoverflow.com/questions/12528886/random-but-just-in-chrome)中以获得更好的解决方案。

**演示： http:** [//jsbin.com/ohohum/1/edit](http://jsbin.com/ohohum/1/edit)（运行多次查看随机性）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T01:39:19.357

如果数字大于或等于您要排除的数字，只需添加一个：

```
var a2 = Math.floor(Math.random() * 3 + 1);

if(a2 >= a1) {
    a2++;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-21T01:47:46.600

当不等于或为零**时**，您正在选择一个新`a2`值。这是倒退的——你在循环之前设置为零，所以它永远不会执行。`a2`**`a1``a2`**

 **您需要循环 while`a2`为零或等于`a1`：

```
var a1 = Math.floor(Math.random()*4+1); 

//Answer2
for(a2 = 0; a2 == a1 || a2 == 0; a2 = Math.floor(Math.random()*4+1)){
    // nothing here
}   
alert(a2); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-21T07:39:41.990

有两种标准的方式来做这种事情。我正在考虑一个稍微更通用的框架

## 筛选列表中的示例

1.  创建要从中选择的基值数组

    ```
    var values = [1,2,3,4] 
    ```

2.  删除您不感兴趣的值

    ```
    values = Array.filter( values, function(x) { return x!=a1; } ) 
    ```

3.  从列表中随机选择一个值

    ```
    var a2 = values[Math.floor(Math.random()*values.length)]; 
    ```

## 使用拒绝抽样

1.  创建要选择的值数组

    ```
     var values = [1,2,3,4] 
    ```

2.  随机选择一个值并重试直到成功

    ```
     var a2 =  values[Math.floor(Math.random()*values.length)];
     while( a2==a1 )
     {
       a2 = values[Math.floor(Math.random()*values.length)];
     } 
    ```

## 比较

如果我们考虑`n`初始列表的长度和`m`移除的元素数量，则过滤后的版本会`n`进行比较以构建过滤后的列表长度`n-m`，但只会生成一个随机数。相比之下，拒绝方法进行平均`n/(n-m)`比较和随机数生成。**

# youtube-api - 视频费用报告的总结果与 YouTube PHP API 中的实际总结果不匹配？

> ID：12523186
> 
> 赞同：0
> 
> 时间：2012-09-21T01:38:19.433
> 
> 标签：youtube-api, zend-gdata

我正在使用 Zend Youtube API。我查询了一个提要，报告它总共有 886 个条目，但是当我获取所有提要并迭代时，实际数字是 782。

实际上是否存在不匹配，或者我忽略的代码中是否存在一些愚蠢的错误？

片段（debug() 只是一个方便的报告功能）：

```
$query = $yt->newVideoQuery($queryUrl);
$query->setMaxResults(50); //Max allowed, to reduce API hits
$feeds = array();
try {
  $feed = $yt->getVideoFeed($query);
  $totalResults = $feed->getTotalResults(); //For debug
  $feeds[] = $feed;
  $totalFromFeeds = sizeof($feed); //For debug
  while ($feed = $feed->getNextFeed()) {
    $feeds[] = $feed;
    $totalFromFeeds += sizeof($feed); //For debug
  }
} catch (Zend_Gdata_App_Exception $e) {
  debug("$e"); //For debug
  //Just means no more feeds; do nothing
}
$numFeeds = sizeof($feeds); //For debug

$entries = array();
foreach ($feeds as $feed) {
  foreach ($feed as $entry) {
    $entries[] = $entry;
  }
}
$numEntries = sizeof($entries); //For debug
debug("According to feed, [$totalResults]; sizeof entries = [$numEntries] 
Num Feeds: $numFeeds;   totalfromfeeds: $totalFromFeeds"); 
```

调试输出：

```
exception 'Zend_Gdata_App_Exception' with message 'No link to next set of results found.
According to feed, [886]; sizeof entries = [782] 
Num Feeds: 16;   totalfromfeeds: 782 
```

感谢您的任何指点，

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:31:02.763

<openSearch:totalResults> 值只是一个估计值。有关更多信息，请参阅文档：[https ://developers.google.com/youtube/2.0/reference#Total_Result_Counts](https://developers.google.com/youtube/2.0/reference#Total_Result_Counts)

# python - 如何模拟嵌套函数？

> ID：12523189
> 
> 赞同：33
> 
> 时间：2012-09-21T01:38:37.937
> 
> 标签：python, unit-testing, mocking, closures

我使用的模拟库是 ... [mock](http://www.voidspace.org.uk/python/mock/)。

当我尝试为函数（遗留代码）编写测试用例时，遇到了这个“模拟嵌套函数”问题。

这个函数使用了一个非常复杂的嵌套函数，对其他模块有很大的依赖。

我想知道是否可以使用`mock`.

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2015-10-05T19:42:20.867

例如，您需要模拟来自 Google DRIVE API 的嵌套函数调用（链函数）

```
result = get_drive_service().files().insert(body='body', convert=True).execute() 
```

所以你需要通过函数来​​修补：service_mock()、files()、insert()，直到最后一个 execute() 响应：

```
from mock import patch
with patch('path.to.import.get_drive_service') as service_mock:
   service_mock.return_value.files.return_value.insert.\
   return_value.execute.return_value = {'key': 'value', 'status': 200} 
```

主要方案：第一。**return_value** .second。**return_value** .third。**return_value** .last。**return_value** = rsp

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-21T03:23:44.753

一种选择是更改您的函数，以便它可以选择接受要调用的函数，例如，如果您有：

```
def fn_to_test():
  def inner_fn():
    return 1
  return inner_fn() + 3 
```

将其更改为：

```
def fn_to_test( inner_fn = null )
  def inner_fn_orig():
    return 1
  if inner_fn==null:
    inner_fn = inner_fn_orig
  return fn() + 3 
```

然后“真正的”使用将获得正确的内部功能，并且在您的测试中您可以提供自己的功能。

```
fn_to_test() # calls the real inner function
def my_inner_fn():
  return 3
fn_to_test( inner_fn=my_inner_fn ) # calls the new version 
```

你也可以这样做：

```
def fn_to_test():
  def inner_fn_orign():
    return 1
  inner_fn = inner_fn_orig
  try:
    inner_fn = fn_to_test.inner_fn
  excecpt AttributeError:
    pass
  return inner_fn() + 3 
```

这样，您只需定义覆盖：

```
fn_to_test() # calls the real inner function
def my_inner_fn():
  return 3
fn_to_test.inner_fn = my_inner_fn
fn_to_test() # calls the new version 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T02:04:35.260

您是否尝试用模拟对象替换嵌套函数？如果是这样，无论函数多么复杂，这都相当简单。您可以使用[MagicMock](http://www.voidspace.org.uk/python/mock/mock.html)替换几乎任何 python 对象。

如果你需要模拟一个返回一些东西的函数，你可以设置`MagicMock`'`return_value`参数。它看起来像这样：

```
>>> super_nested_mock = mock.MagicMock()
>>> super_nested_mock.return_value = 42
>>> super_nested_mock()
42 
```

但是，如果您尝试测试另一段在`super_nested`内部某处调用您的函数的代码，并且想要模拟它，则需要使用[patch](http://www.voidspace.org.uk/python/mock/patch.html#patch)。在模拟库中，它看起来像这样：

```
with patch('super_nested') as super_nested_mock:
    super_nested_mock.return_value = "A good value to test with"
    assert my_function_that_calls_super_nested(5) == 20 
```

在这里，`with`块中通常调用的任何东西`super_nested`都会调用`super_nested_mock`并返回您设置的值。

您需要在补丁调用中添加的内容有一些微妙之处。主要是，您希望修补对象，因为您正在测试的模块会看到它。有关更多说明，请参阅“[在哪里修补](http://www.voidspace.org.uk/python/mock/patch.html#id1)”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T02:57:43.960

我看到这样做的唯一方法是动态创建外部函数的副本，使用模拟函数的代码修改函数的代码对象常量：

> [嵌套函数是否存在等效的覆盖？](https://stackoverflow.com/questions/11911544/does-an-equivalent-of-override-exist-for-nested-functions)

# video-streaming - 通过网络从 IP 摄像机录制视频源

> ID：12523195
> 
> 赞同：33
> 
> 时间：2012-09-21T01:40:16.503
> 
> 标签：video-streaming, video-capture, ip-camera, surveillance

我正在为我的办公室建立一个摄像头安全系统，但我们不想将 DVR 保留在现场。

我们看了 NVR（网络录像机），它们太贵了。我想到了一个替代方案。我不知道它的可行性有多大，但肯定会喜欢这里的一些输入。

这是我的想法：

1.  购买普通 IP 摄像机
2.  购买服务器或 AWS 实例并编写程序以将流媒体源连续下载到服务器。

现在我对这个解决方案的实用性以及构建这样一个系统所涉及的技术有一些疑问：

1.  大多数 IP 摄像机以什么格式传输数据？它们以什么帧速率传输？
2.  如果我要编写一个可以读取此提要并下载并将其存储在服务器上的程序，我将获得与实时提要相同的质量吗？
3.  在存储数据之前，我是否需要再次将数据实时编码为其他格式（如 flv.）？
4.  你能为此建议一个最好的架构吗？我在想一个亚马逊实例和 s3 来存储视频源。

有些网站已经这样做了（比如[http://www.mangocam.com/](http://www.mangocam.com/)）

谢谢，我希望这个问题符合 SO 准则，因为这可能是编程和非编程相关的灰色区域。如果没有，我会将其移至其他一些 stackexchange 站点（请提供建议）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T02:15:19.950

我还没有使用它，但我会看看[http://www.zoneminder.com/](http://www.zoneminder.com/)文档说明您可以将它安装在带有 linux 的普通机器上，并使用 IP 摄像机进行远程录制。

安德鲁

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-12-23T00:28:51.040

大约 3 年前，我需要闭路电视。我找到了 zoneminder，尝试根据自己的喜好对其进行编辑，但发现我正在修复它而不是编辑它。

更不用说 mp4 录制功能实际上并不是 master 分支的一部分（这有点哈哈，因为它是一个 cctv 程序，并且自建议以来已经有大约 3 年或更长时间了）。它实际上只是适应 ffmpeg 命令大声笑。

**所以我找到了解决方案！**

> 如果你想把某件事做好，那就自己做。

我向你介绍忍者！[Shinobi : 开源闭路电视平台](https://github.com/moeiscool/Shinobi)

[![在此处输入图像描述](../Images/cd5c79ee5c2dc0a94aeeb258591ffb52.png)](https://i.stack.imgur.com/E07GS.jpg)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-14T02:42:58.233

为什么不考虑 www.camerraftp.com？它支持图像上传和在线查看器

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-27T13:32:51.267

[Motion](http://www.lavrsen.dk/foswiki/bin/view/Motion/WebHome)是 Zoneminder 的替代品。它具有更陡峭的设置曲线，因为所有内容都是通过配置文件配置的。但是，配置文件的注释很好，而且比听起来容易。一旦运行，它也非常可靠。

要添加 Foscam 摄像头（如上所述），请使用以下语法从摄像头流式传输视频。

```
netcam_url http://<IPADDRESS>/videostream.cgi?user=admin?pwd= 
```

用户是管理员，密码为空（Foscam 相机的默认设置）。

对于非常高的正常运行时间/可靠性，请考虑使用监控工具，例如[Monit](http://mmonit.com/monit/)。这适用于 Motion。

# scala - Scala Liftweb - 从 Model.findAll 过滤结果

> ID：12523196
> 
> 赞同：1
> 
> 时间：2012-09-21T01:40:33.257
> 
> 标签：scala, mongodb, lift

我有以下 mongodb 模型：

```
class Setting_Model private() extends MongoRecord[Setting_Model] with ObjectIdPk[Setting_Model] {

    def meta = Setting_Model

    /* Values -------------------------------------------------------*/
    object set_id extends LongField(this)
    object category extends StringField(this, 125)
    object group extends StringField(this, 125)
    object handle extends StringField(this, 125)
    object label extends StringField(this, 125)
    object relation extends StringField(this, 125)
    object value extends StringField(this, 125)

} 
```

为了减少查询，我一次从“设置”集合中提取所有值。

我正在寻找的是一种过滤找到的模型列表的方法，以便我可以从所需字段中提取单个值。

例如，如果我在列表中有以下对象：

```
{
    "category": "limit",
    "group": "lists",
    "handle": "max_per_page",
    "label": "Max items per page",
    "relation": "grid",
    "set_id": 1,
    "value": "10"
} 
```

我需要一种过滤列表并返回该对象的“值”字段的方法。

在此先感谢您的帮助，非常感谢:)

PS：如果您需要进一步说明，请告诉我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T01:50:31.583

对不起，

刚刚解决了：S

对于那些感兴趣的人：

```
var value = setting_model.filter(s => 

    s.category.toString == "limit" &&
    s.group.toString == "lists" &&
    s.relation.toString == "grid"

)(0).value.is 
```

谢谢anyhoo ;)

# ios - 故事板 instantiateViewControllerWithIdentifier 未设置 IBOutlets

> ID：12523198
> 
> 赞同：37
> 
> 时间：2012-09-21T01:41:18.167
> 
> 标签：ios, interface-builder, uistoryboard

我正在使用情节提要`instantiateViewControllerWithIdentifier:`，我注意到`IBOutlets`我连接的所有内容仍然为零。但是，`IBActions`我已经完成了工作。视图和控制器是链接的（即 controller.view 不是 nil），如果我显示视图，它会显示我所期望的。

我错过了什么？

**这是我的设置：**

1.  我的故事板中定义了一个视图控制器。我给了它一个标识符，它与我在调用时使用的标识符相同`instantiateViewControllerWithIdentifier:`
2.  我已经通过单击视图控制器（就在 First Responder 下方）设置了视图的所有者，并在 Identity Inspector 下将自定义类设置为与我想要将视图连接到的类的名称相同。
3.  然后我打开助手编辑器，并控制拖动 UI 元素来创建`IBOutlets`和`IBActions`。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-12-06T01:53:50.570

视图似乎只有在第一次访问后才被正确初始化。打电话时问题消失

```
[self presentViewController:vc animated:NO completion:nil]; 
```

或更简单地说

```
[vc view]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-06-15T11:24:42.077

**【拿我当坏榜样】**

*毕竟可能不是一个好主意，它可以工作，但它违反了常规加载，使应用程序不稳定^_^。
我会在此处留下答案，以防其他人想知道您是否这样做。*

* * *

我遇到了同样的问题，但是我设计的自定义组件没有通过 presentViewController 加载（加载到上一个视图的覆盖中）

你可以简单地打电话

`myViewController.loadView()`//迅速

`[myViewController loadView]`//对象-C

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T04:54:27.320

插座是通过键值编码建立的，你可以把它放到你的视图控制器子类中：

```
- (void)setValue:(id)value forKeyPath:(NSString *)keyPath {
    [super setValue:value forKeyPath:keyPath];
}

- (void)setValue:(id)value forKey:(NSString *)key {
    [super setValue:value forKeyPath:key];
} 
```

并在对 super 的两个调用上设置断点。

在调试器中，我会尝试：

1.  将“自我”与您认为您正在应用插座的视图控制器进行比较。也许您的故事板有第二个您没想到的视图控制器。当您说您“设置所有者”时，我认为这是一个奇怪的术语。除了已经存在的表示之外，您是否拖出了一个立方体对象来表示您的视图控制器？

2.  将 [self valueForKey:key] 或 [self valueForKeyPath:keyPath] 或仅 [self outletName] 与调用 super 后传入的值进行比较。也许你的二传手没有做你想做的事。我已经多次看到这样的错误，人们有一个名称为“firstName”的对象的出口，然后是一个带有选择器“setFirstName:”的操作。这会混淆键值编码，最终会得到 setFirstName: 在 nib 加载期间被调用，目的是建立出口，但出口的设置器是作为操作方法实现的，所以出口永远不会被设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T10:41:05.523

为实例化的 ViewController 设置框架似乎设置了 IBOutlets。

前任：

```
DemoViewController *demoVC = [[self storyboard] instantiateViewControllerWithIdentifier:@"demoVC"];
demoVC.frame = self.view.frame; //or CGRectMake(0, 0, 1015, 604); 
```

这将初始化 DemoViewController 的 IBOutlets，如 Label、TextField、Button、Table 等。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-26T15:05:06.677

人们给出了如何加载视图的解决方案（其中一些你不应该使用 ( `loadView()`) 所以这里有一种方法来检查你的视图是否已经加载

我遇到了这个问题，因为我有一个带有`didSet`观察者的属性来更新 UI，如果尚未设置插座，这显然不起作用，所以这里有一些示例代码如何解决它：

```
var name: String? {
    didSet {
        updateNameLabel()
    }
}

override func viewDidLoad() {
    super.viewDidLoad()

    updateNameLabel()
}

func updateRoomLabel() {
    guard isViewLoaded() else {
        return
    }
    [...]
} 
```

因此，现在当您显示网点时会更新，而且每次更新属性时也会更新

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-26T18:35:21.043

如果您要链接到的对象是场景中的顶级实体，例如 ArrayController，则引用必须是强的（而不是弱的！），因为它不被视图层次结构保留。弱引用可能会导致您所描述的问题。

在这里查看更多信息：[IBOutlets 在 ARC 下应该强还是弱？](https://stackoverflow.com/questions/7678469/should-iboutlets-be-strong-or-weak-under-arc?rq=1)

# php - 将下拉菜单变量发送到 PHP 中的 url

> ID：12523202
> 
> 赞同：0
> 
> 时间：2012-09-21T01:42:02.497
> 
> 标签：php, html, forms

我正在研究评级系统。用户可以使用下拉菜单对项目进行评分：

```
<select name = "theRating">
<option>Select...</option>
<option>1 Star</option>
<option>2 Stars</option>
<option>3 Stars</option>
<option>4 Stars</option>
<option>5 Stars</option>
</select> 
```

在同一个文档中，就在几行之后，我想通过 url 发送选定的选项

```
<form action="', $scripturl, '?action=rateThisThing?rating=',$_POST['theRating'],'" method="post">
<input type="submit" value="Rate this"></form> 
```

为什么这不起作用？$_POST['theRating'] 似乎是空的 [或者至少，它没有在重定向时出现在 URL 中......]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T01:47:42.473

这里有很多问题。首先是挑剔，然后是主要问题。挑剔：您使用了错误的 PHP 连接器：它是`.`，不是`,`，您需要将它包含在 PHP 标记中（`<?php ?>`）

但是，这无关紧要，因为您从根本上误解了 PHP 与 javascript 的作用。PHP 是一种服务器端语言，只能在内容提供给客户端之前访问（除了 ajax）。您也没有正确格式化表单的 url 字符串。如果您在 URL 中传递多个变量，则使用与号 (&) 分隔它们，而不是`?`.

此外，如果您尝试通过`post`您在表单中指定的方式发送信息，那么为什么要尝试在 url 中传递数据？只需在表单中包含 select 并将表单的方法设置为`get`：

```
<form action="target_file.php" method="get">
 <select name="theRating">
  <option>Select...</option>
  <option>1 Star</option>
  <option>2 Stars</option>
  <option>3 Stars</option>
  <option>4 Stars</option>
  <option>5 Stars</option>
 </select>
<input type='hidden' name='action' value='rateThisThing' />
 <input type="submit" value="Submit" />
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T01:49:40.383

In order to have data available via `$_POST`, something must be posted:

```
<form action="" method="post">
 <select name="theRating">
  <option>Select...</option>
  <option>1 Star</option>
  <option>2 Stars</option>
  <option>3 Stars</option>
  <option>4 Stars</option>
  <option>5 Stars</option>
 </select>
 <input type="submit" value="Submit" />
</form> 
```

Once you submit this form, `$_POST['theRating']` will be available on that page. Whatever script is running at `$scripturl` should either be on this page or included, so the script can use this data.

# internet-explorer - IE8 上的素面 (v .3.4) 数据表是否存在兼容性问题

> ID：12523204
> 
> 赞同：1
> 
> 时间：2012-09-21T01:42:49.837
> 
> 标签：internet-explorer, jsf-2, datatable, primefaces

最近我已经将我的 IE 7 升级到 IE 8，因为我遇到了数据表问题，有一页包含几个类型的菜单，下面的数据表显示基于搜索条件的记录。每当我去那个页面整个页面在 IE8 中挂起，甚至无法移动我的鼠标，我在 IE 7 中没有任何问题。有什么办法可以改进吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:13:17.640

IE8 中用于 primefaces 3.4 的可选数据表存在问题，导致性能极度下降。您可以在此线程中阅读有关它的更多信息：http: [//forum.primefaces.org/viewtopic.php?f=3 &t=24605](http://forum.primefaces.org/viewtopic.php?f=3&t=24605)

[http://code.google.com/p/primefaces/issues/detail?id=4628](http://code.google.com/p/primefaces/issues/detail?id=4628)上还有一个问题，但尚未被接受。你应该给它加星标以提高修复它的机会。

如果您现在需要解决它，您需要降级到 primefaces 3.3 或使用其他浏览器。

# javascript - 带有javascript和node.js的mongoDB getLastError（）不起作用

> ID：12523206
> 
> 赞同：5
> 
> 时间：2012-09-21T01:42:59.790
> 
> 标签：javascript, mongodb, getlasterror

我有一个使用 mongoDB 的 node.js 应用程序，我有一个函数用于删除集合中的所有文档，然后用一些示例文档重新填充我的数据库中的集合。

当我编写新功能时，我偶尔会使用它来使用已知数据测试我的应用程序。

我遇到的问题是，如果我在我的所有集合上调用 drop() 然后调用一些插入来重新填充，有时我的记录会少于我期望插入数据库的记录，有时整个集合会丢失。我的计数检查所有说插入的 # 条记录与预期的数量相匹配，但即使它说它已插入，整个集合也可能丢失。

我只能假设，因为它只发生在大约 50% 的时间里，可能以某种方式在 drop() 完成之前插入开始插入，然后 drop() 擦除插入的文档，因为它正在运行异步。

我在所有插入/更新命令上使用 {safe:true} 但 db.collection.drop() 不接受任何参数，似乎没有办法指定安全选项。

所以我试图在 drop() 之后使用 db.getLastError() 来阻止插入，直到 drop 完成。

使用 db.getLastError() 或 db.getlasterror() 会引发错误：TypeError: Object #<Db> has no method 'getlasterror'

对 getLastError 的简化调用：

```
var mongo = require("mongodb");

  var db_conn = new mongo.Db(dbName, new mongo.Server(host, port, { auto_reconnect: true }), {});
  db_conn.open(function(err, db) {
    if(!err) {
      console.log("Database connection: \033[32mopen\033[0m");
    } else {
      console.log("Database connection: \033[31mfailed\033[0m");
    }
  });
  db_conn.getLastError();
  this.db_conn = db_conn;
  this.users = db_conn.collection("users");
  this.companies = db_conn.collection("companies");
  this.suppliers = db_conn.collection("suppliers"); 
```

我已经在 mongodb 模块版本 1.1.4 和 1.1.7 上尝试过这个并且只是得到一个错误。

我使用了错误的参考吗？在 JavaScript 的代码示例中，我在 stackoverflow 或 web 上的 getlasterror 上找不到任何东西。

如果有更好的方法可以做到这一点，我会全力以赴。

Node.js 文档：[http ://docs.mongodb.org/manual/reference/javascript/#db.getLastError](http://docs.mongodb.org/manual/reference/javascript/#db.getLastError)

mongo 文档：[http ://www.mongodb.org/display/DOCS/getLastError+Command](http://www.mongodb.org/display/DOCS/getLastError+Command)

---- 2012 年 9 月 22 日更新

使用下面的答案，我能够稍微调试一下根本问题是什么，并且正如我所料。使用 5 个打开连接的默认连接池，drop 会随机触发，然后插入。根据它们发送的顺序以及它们各自进入的池，如果一个 drop 快速完成，然后在该集合的 drop 完成之前快速插入，它将稍后删除插入的记录。

我的解决方法是在 drop() 命令的回调中将所有 drop 包装在一个链接序列中，这样每个 drop 都会在前一个 drop 的回调被触发之后发生，然后在最后调用一个触发所有插入的回调。这很混乱，但我现在已经用 20 条简单插入的基本记录集和 100,000 条记录的负载测试测试了 initializedb 函数大约 25 次。还没有失败。

时间会证明一切，但这个 .lastError() 答案可以解决这个问题。

---- 2012 年 9 月 30 日更新

我想测试一周左右，然后再回复以确保它确实有效。上周，我在包含 26 条记录的基本集和批量插入的 100,000 条记录集上运行了大约 100 次初始化脚本。现在使用我的新代码，我还没有看到它失败过。

我用于删除集合的代码：（我有一个 DatabaseHandler 对象，我将其与原型函数一起用于操作）

```
DatabaseHandler.prototype.dropAll = function(callback, callbackArg) {
  // drop all the documents
  var that = this;
  var finished = callback || function() { };
  var finishedArg = callbackArg;
  this.companies.drop(function(err, reply) {
    if(reply) {
      console.log("[db] Companies collection dropped");
    } else {
      console.log("\033[31m[Error]\033[0m Companies collection failed to drop");
    }
    // drop all the user documents
    that.users.drop(function(err, reply) {
      if(reply) {
        console.log("[db] Users collection dropped");
      } else {
        console.log("\033[31m[Error]\033[0m Users collection failed to drop");
      }
      // drop all the course documents
      that.courses.drop(function(err, reply) {
        if(reply) {
          console.log("[db] Courses collection dropped");
        } else {
          console.log("\033[31m[Error]\033[0m Courses collection failed to drop");
        }
        // drop all the course purchase documents
        that.course_purchases.drop(function(err, reply) {
          if(reply) {
            console.log("[db] Course purchases collection dropped");
          } else {
            console.log("\033[31m[Error]\033[0m Course purchases collection failed to drop");
          }
          console.log("Dropped all documents and collections");
          return finished(finishedArg);
        });
      });
    });
  });
}; 
```

然后我有一个初始化函数，它接受一个参数来指定我是否想要额外的负载测试数据初始化（addloadtestdata）。如果我指定 dropdata，它会调用 dropAll 并将初始化函数用于回调。因此，当放置完成时，它会调用初始化回调并仅在完成放置后才开始重新添加文档。我还有一个小计数功能，用于检查完成插入后插入的文档数量，以验证插入的文档数量是否正确且没有遗漏。这可能是我添加的最好的功能，所以每次初始化时，我都可以查看插入的文档的确切数量是否正确，或者我是否丢失了 1 个。

```
function initialize(doLoadtest){
  // do work here
}
// drop all collections and documents
if(dropdata) {
  // drop all the data first then call the initialize as a callback function when completed dropping
  Database.dropAll(initialize, includeLoadtestData);
} else {
  initialize(includeLoadtestData);
} 
```

希望有帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:55:13.980

您使用的是 node-mongodb-native 驱动程序吗？如果是这样，请查看 lastError 命令。

[http://mongodb.github.com/node-mongodb-native/api-generated/db.html#lasterror](http://mongodb.github.com/node-mongodb-native/api-generated/db.html#lasterror)

# c# - Json.Net 中的 Javascript 转义

> ID：12523215
> 
> 赞同：4
> 
> 时间：2012-09-21T01:45:02.550
> 
> 标签：c#, json.net

[Json.NET 主页](http://james.newtonking.com/pages/json-net.aspx)说该项目开始于：

> 几个用于转义 JavaScript 字符串的静态方法

这些方法还存在吗？我知道[JavaScriptSerializer](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)可以做到这一点，但我想要一个班轮来做到这一点。

`SerializeObject`可以序列化单个字符串（将其转义）但它返回引号

```
JsonConvert.SerializeObject(@"hi bud's  \no way\"); 
```

回报：`"hi bud's \\no way\\"`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T01:04:46.023

我找到了一个不错的单行解决方案，但它从 4.0 开始才出现在框架中。如果在 Json.NET 中有类似的东西我可以在 < 4.0 的项目上使用，那就太好了。

[`HttpUtility.JavaScriptStringEncode`](http://msdn.microsoft.com/en-us/library/dd784638.aspx)例子：

```
HttpUtility.JavaScriptStringEncode(@"hi bud's  \no way\") 
```

回报：`hi bud\u0027s \\no way\\`

# objective-c - 使用分段控件过滤表格视图的部分

> ID：12523219
> 
> 赞同：4
> 
> 时间：2012-09-21T01:45:59.797
> 
> 标签：objective-c, ios, xcode, uitableview, uisegmentedcontrol

我想知道最好的方法是使用工具栏中的分段控件过滤掉表格视图中的各个部分。

例如，假设我有一个表格视图，其中包含 3 个不同部分的单元格 - 星期五、星期六和星期日。我还在视图顶部有一个工具栏，其中包含 4 个部分 - 全部、星期五、星期六和星期日。在分段控件上选择“全部”时，应显示表格中的所有部分和单元格。在分段控件上选择“星期五”时，表格中应仅显示星期五部分中的单元格。等等等等...

在我的表格视图控制器的代码中，我可以在哪里实现这一点？我想这是一件非常简单的事情，那么还有其他人可以指出我的例子吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T02:02:01.950

这样做的一个地方是在您的`UITableViewDataSource`代码中：让您的数据源访问您的`UISegmentedControl`，让它访问其`selectedSegmentIndex`属性的值。在那里，您`tableView:numberOfRowsInSection:`将能够通过查看索引并减去不适用行的计数来找出适当的行数，并且`tableView:cellForRowAtIndexPath:`能够根据当前选择重新索引行。

您可能需要在模型中保留其他数据结构以支持该`tableView:cellForRowAtIndexPath:`方法。具体来说，您可能希望为三个“特殊”天添加数组，以便搜索“如果选择了星期五，则第三行是什么”不需要遍历所有数据以搜索第三个适用行。

# algorithm - 蒙特卡洛与 UCB 应用于复杂纸牌游戏

> ID：12523221
> 
> 赞同：5
> 
> 时间：2012-09-21T01:46:26.673
> 
> 标签：algorithm, artificial-intelligence, upperbound

我正在尝试了解 MCTS 算法的工作原理以及如何在纸牌游戏中实现它以改进 AI 引擎。

我已经阅读了 mcts.ai/ 网站和许多关于它的论文，其中一篇显示了一些关于在 AI 中应用 Monte Carlo Search 和 UCB 成功进行魔术纸牌游戏的结果，这或多或少是我需要做的，但是我在尝试理解某些要点以及如何应用它时遇到了一些麻烦，因此请解决我需要的问题。我在数学方面也没有那么丰富的经验，所以当论文用复杂的公式解释所有这些东西时，我会迷失方向。

到目前为止，这是我想出的：

1.  给定一个游戏状态（用户参与游戏），确定哪些是可以进行的所有可能的合法游戏，然后我将创建一个节点列表（一个代表每个游戏）作为 MCTSTree 根节点中的一个属性，每个节点的结果（分值？）

2.  使用随机玩家模拟每个合法游戏的完整（直到结束）游戏，并在每个节点中记录结果，无论玩家是赢还是输，以便获得完整的画面。

这里是“我认为”蒙特卡洛 + UCB 应该应用的地方：

1.  使用 UCB 递归地选择更有希望的游戏（节点），如果是它的叶子，则使用其 gameState 中的所有可能游戏扩展该节点。

2.  从选定的节点模拟*n*次播放，直到达到一定的时间。

    *   在这个阶段我有一些疑问......假设我尝试随机播放给定可能的播放列表......为了继续模拟，我与第一个结果有什么关系？那我应该让树长大吗？
3.  如何反向传播结果？

然后，

*   请记住，由于这是一个复杂的纸牌游戏，而且我有很多可能的动作……它的性能是否足够好，可以在任何节点中拥有这么多孩子？

*   如果每个模拟都基于一个游戏状态，并且每次玩家应用动作时游戏都会改变状态，那么我怎么知道这棵树是否真的有用？

我真的很感激这方面的任何帮助。

非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T08:36:44.530

MCTS 如下：

![在此处输入图像描述](../Images/e07929aa2f4d26693a3912b62955c357.png)

我对它的描述与图像所暗示的有所不同，这可能更适合实施。

1.  从你的根节点（游戏的当前状态）下降，在每一步都使用*UCB*，直到你决定一个**未实例化**的节点`l`。（选择）
2.  添加`l`到您的树中。（扩张）
3.  从`l`，玩随机游戏。（模拟）
4.  更新路径上的所有节点`l`使用播放结果更新从返回到根节点
5.  重复直到时间用完。

如果您的分支因子很大，正如您所提到的，您可能需要考虑其他策略来选择继任者，同时降低树，例如 RAVE。

# jakarta-ee - Servlet 3.0 方法

> ID：12523226
> 
> 赞同：1
> 
> 时间：2012-09-21T01:46:38.597
> 
> 标签：jakarta-ee, servlets, servlet-3.0

我正在通过一组代码示例学习 servlets 3.0，许多方法的目的对我来说没有任何意义。服务方式除外。

输出是“来自 MyServlet 的你好”。但是，所有其他方法是什么？

```
@WebServlet(name = "MyServlet", urlPatterns = { "/my" })
public class MyServlet implements Servlet {

    What is the line below trying to do? 
private transient ServletConfig servletConfig;

@Override
public void init(ServletConfig servletConfig) throws ServletException {
    this.servletConfig = servletConfig;
}

@Override
public ServletConfig getServletConfig() {
    return servletConfig;
}

@Override
public String getServletInfo() {
    return "My Servlet";
}

     //This is the only method that makes sense to me. All the others, I have no 
        idea why they are in here.
@Override
public void service(ServletRequest request, ServletResponse response)
        throws ServletException, IOException {
    String servletName = servletConfig.getServletName();
    response.setContentType("text/html");
    PrintWriter writer = response.getWriter();
    writer.print("<html><head></head>" + "<body>Hello from " + servletName
            + "</body></html>");
}

@Override
public void destroy() {
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T01:57:23.373

我不确定您阅读了哪些教程/示例，但您应该扩展[`HttpServlet`抽象类](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServlet.html)，而不是实现[`Servlet`接口](http://docs.oracle.com/javaee/6/api/javax/servlet/Servlet.html)。您确实并不直接需要它们中的任何一个。`HttpServlet`已经为您实施了所有必要的样板。

总而言之，这是您*最低限度*需要的：

```
@WebServlet("/my")
public class MyServlet extends HttpServlet {

    @Override
    public void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        String servletName = getServletConfig().getServletName();
        response.setContentType("text/html");
        response.getWriter().print("<html><head></head>" 
            + "<body>Hello from " + servletName + "</body></html>");
    }

} 
```

*（尽管我知道这只是一个学习练习，但我想指出以这种方式在 servlet 中发出 HTML 是一种不好的做法，应该使用 JSP）*

至于他们都做了什么，好吧，它们`init()`为您提供了在 servlet 构建期间基于 servlet 配置执行初始化的可能性。`destroy()`为您提供在 servlet 销毁期间执行清理的可能性。属性和那些 getter 方法只是为了满足[`Servlet`接口的契约](http://docs.oracle.com/javaee/6/api/javax/servlet/Servlet.html)所必需的。请注意，它们都不是特定于*Servlet* 3.0 的。它们已经存在于旧版本中。

### 也可以看看：

*   [我们的 servlets wiki 页面](https://stackoverflow.com/tags/servlets/info)- 包含更多启发性的 hello world 示例
*   [servlet 是如何工作的？实例化、会话、共享变量和多线程](https://stackoverflow.com/questions/3106452/how-do-servlets-work-instantiation-session-variables-and-multithreading/3106909#3106909)

# ios - 将 facebuddies 标记到已发布的照片 IOS facebook sdk 3.0 可能存在权限问题

> ID：12523229
> 
> 赞同：1
> 
> 时间：2012-09-21T01:47:11.653
> 
> 标签：ios, facebook-graph-api, facebook-ios-sdk

我使用 FacebookSDK3 从我的（ios）代码上传和发布图像到用户 Facebook，并呈现一个friendPickerController 视图，选择一组朋友并尝试将标签附加到图片。

这是我用于实际标记的代码，它运行正常，但随后在调试器中出现错误，**Error: HTTP status code: 200** ，当我将 stringByAddingPercentEscapesUsingEncoding: NSASCIIStringEncoding 应用于图形时，它是**Error: HTTP status code: 400**小路。好像是权限类型错误..（这个方法在图片上传成功后调用，self.upLoadedPicID是NSString和帖子的fbID，self.tagList是一个NSMutableArray对象（facebuddies to tag）传回来从friendPickerController..

```
 -(void)tagFriends{

    if ([self.tagList count] > 0 && imageUploaded && [self.upLoadedPicID length]) {
    self.activityLabel.text = @"Tagging Photo";
    [self setSpindicatorOn:YES];

    NSMutableString *graphPath = [NSMutableString string];
    [graphPath appendString:self.upLoadedPicID];
    [graphPath appendString:[NSString stringWithFormat:@"/tags?tags=["]];

    // loopthru tag array..

    NSMutableString *iDs = [NSMutableString string];

    for (id<FBGraphUser> user in self.tagList) {

               if ([iDs length]) {
                [iDs appendString:@", "];
               }  //deliniate after first entry..

      NSString *entry = [NSString stringWithFormat:@"{\"tag_uid\":\"%@\"}", user.id];
      [iDs appendString:entry];
      }

    [graphPath appendString:iDs];[graphPath appendString:[NSString stringWithFormat:@"]&access_token=%@",[FBSession activeSession].accessToken]];
 //  NSLog(@"building graph path for tAgging %@", graphPath);
   //works fine
    FBRequestConnection *connection = [[FBRequestConnection alloc]init];
    FBRequest *request = [FBRequest requestForGraphPath:graphPath];

  // do i need URL encoding???

 //   NSString* escapedUrlString = [graphPath stringByAddingPercentEscapesUsingEncoding: NSASCIIStringEncoding];
  //  FBRequest *request = [FBRequest requestForGraphPath:escapedUrlString];

   // dont think so..

   [connection addRequest:request completionHandler:^(FBRequestConnection *connection, id result, NSError *error){

//     if (error) {
//       NSLog(@"error tagging");
       [self setSpindicatorOn:NO];
//     }else{
//       NSLog(@"done tagging");
//       [self setSpindicatorOn:NO];}
//   
     [self showAlert:@"done Tagging" result:result error:error];

   } batchEntryName:nil];
    [connection start];
   // [request ]
  }

} 
```

fbSession 在 appDelegate 中分配并在它们出现之前传递到 fbViewcontrollers，所以也许我的问题是我在这里使用的权限？我在此处找不到有关要使用的备用权限字符串的任何文档..

```
self.fbLoginView = [[FBLoginView alloc]initWithPermissions:[NSArray arrayWithObject:@"publish_actions"]]; 
```

另一种可能性是我没有使用正确的权限设置我的 facebook 终端应用程序，我可以进去编辑它，但它只是一个文本条目，不是下拉菜单或任何类似的直观内容，以及我能找到的每个列表GraphApi 权限没有提到将朋友标记到照片，它不清楚 GraphApi 中的“发布流”权限是否足够，尽管有文档表明它在已弃用的 REST API 中还不够，你需要一个 publish_stream_extended 权限，但我不能查看 GraphAPI 中的任何相应权限。

如果你们中的任何人能告诉我哪里出了问题，我将永远感激不尽时间很难看出什么发生了变化，什么没有发生变化。

如果有人知道，我想关键问题是

1.  为了有权将朋友标记到照片，在 Facebook 服务器端应用程序中进行哪些权限设置？
2.  初始化到您的 facebook 会话对象的相应权限是什么？
3.  Facebook 是否不再希望您这样做，这就是文档如此少的原因吗？
4.  我在这里完全吠错了树吗？

非常感谢您抽出宝贵时间阅读本文：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T01:19:45.750

1.  请求 user_photos 权限，以便您可以在照片中标记朋友
2.  使用最新的 Facebook SDK v3.1，您需要拆分您的读/写权限以利用 iOS6。当您要发布照片时，首先请求 user_photos 权限并在上下文中请求 publish_actions 权限。
3.  可以在此处找到解释权限的文档：[https ://developers.facebook.com/docs/reference/api/photo/](https://developers.facebook.com/docs/reference/api/photo/)

提示：每当您遇到困难时，请转到[Graph API Explorer](https://developers.facebook.com/tools/explorer)并使用不同的权限、输入等来编写内容，然后再继续编写代码，或者在遇到困难时直接使用它。

# asp.net-mvc - Enterprise Library 5.0 和 MVC3——哪个 WebConfig 文件？

> ID：12523238
> 
> 赞同：0
> 
> 时间：2012-09-21T01:48:33.570
> 
> 标签：asp.net-mvc, web-config

在 MVC3 应用程序中有两个 webconfig 文件；一个在 Views 文件夹中，另一个位于其上方。我知道如何使用 Windows 应用程序的企业库，所以我想知道应该编辑哪些配置文件（用于 MVC3）？

蒂亚！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T02:00:04.450

第一个，位于 Web 应用程序的根目录中。

View/Web.config 文件仅用于配置 View 目录，它从其父目录继承设置。通常你会在那里看到 razor/aspx 配置特定的东西。

# ios - Error Upload TestFlight : Invalid IPA / dSYM not found

> ID：12523240
> 
> 赞同：12
> 
> 时间：2012-09-21T01:49:07.660
> 
> 标签：ios, testflight, xcode4.5

This shown on TestFlight web after uploaded.

> "Invalid IPA: Couldn't find executable specified in Info.plist - check the value of your CFBundleExecutable key."

while on Testflight desktop application, shows **dSYM not found**, hence couldn't upload.

this issue suddenly appear after I upgraded **XCode 4.5 with ios6.**

anyone has experienced before, kindly share, and any solutions would be appreciate. thanks in advance.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-21T15:33:30.633

我有同样的问题，但我已经解决了。它与您的架构设置有关。在您的目标和项目构建设置中，您的**所有**构建设置都必须使用**armv 7**进行设置。

在目标 -> 构建设置中：

架构 = 标准 (armv7, armv7s) - $(ARCHS_STANDARD_32_BIT) 有效架构 = armv7 armv7s

对于您的项目构建设置也是如此。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-19T15:27:31.367

我也遇到过这个问题，在之前的回复中没有找到答案，所以这里是我的。

dSYM**可能**包含在您的可执行文件中（因此也包含在 IPA 中），但这意味着您在构建应用程序时选择这样做。实际上，只有在`Strip Debug Symbols During Copy` **Build Setting**设置为`NO`.

但是，这是很重的内容（我的应用是 5MB，dSYM 是 10MB！），所以你通常不希望它在发布时包含在你的应用中。所以除了在开发中，这个标志更好`YES`。这就是 TestFlight 桌面应用程序将显示该`dSYM not found`消息的原因。

**您可以使用 TestFligh Co-pilot**（菜单栏的东西，在 TestFlight 桌面应用程序首选项中启用）来检测您的 XCode 最后存档。使用它可以让 TestFlight Desktop 找到您的 XCode 存档，并且这个存档始终包含 dSYM。或者如果你必须使用 IPA，你也可以在 TestFlight 网站上上传 dSYM 文件（你应该在你的构建的崩溃部分看到上传区域）。

dSYM 可以通过在 XCode 中获取存档，右键单击它并跟随来找到`Show in Finder`。右键单击 Finder 中的存档，选择`Show package contents`（或类似的，我使用的是 OS X 法语版），该包将包含您的 .dSYM 文件`dSYMs`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-21T03:14:02.037

如果您解压缩 IPA 并查看 info.plist，如果 CFBundleExecutable 不存在或更糟糕的 plist 不存在，我们将拒绝上传。只有在安装失败时才会拒绝上传，在这种情况下，iOS 将无法找到可执行文件，并且您的测试人员会看到通用的无法下载消息。如果您的 IPA 中一切正常并且您仍然收到此消息，请关闭详细信息和 IPA 以支持，我们将进行查看。

关于桌面应用程序，您介意分享一个屏幕截图吗，如果找不到 dsym，我们不会拒绝构建，我们只是跳过上传 dsym。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-22T15:14:21.137

有同样的问题。产品名称末尾有一个额外的空格符号（在项目 -> 构建设置 -> 包装中），如

`"My Awesome App "`

删除这个额外的空间绝对解决了这个问题。

# windows - 如何在 WinRT 中将字符串颜色转换为画笔

> ID：12523248
> 
> 赞同：0
> 
> 时间：2012-09-21T01:49:51.163
> 
> 标签：windows, windows-runtime, winrt-xaml

似乎 ConvertFromString 已从 WinRT 中消失。所以我很难找到一种在组合框中获取字符串并使用它设置文本前景和网格背景的方法。

这是我最近的尝试

```
private void ColorDropBox_SelectionChanged_1(object sender, SelectionChangedEventArgs e)
{
    string backGroundColor = e.ToString();

    SolidColorBrush newcolor = new SolidColorBrush();

    newcolor = backGroundColor as SolidColorBrush;

    this.ContentRoot.Background = newcolor;
} 
```

有什么建议/解决方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-29T21:29:06.727

对于 WinRT

```
using Windows.UI;
using Windows.UI.Xaml.Media;

    public static Brush ColorToBrush(string color)
    {
        color = color.Replace("#", "");
        if (color.Length == 6)
        {
            return new SolidColorBrush(ColorHelper.FromArgb(255,
                byte.Parse(color.Substring(0, 2), System.Globalization.NumberStyles.HexNumber),
                byte.Parse(color.Substring(2, 2), System.Globalization.NumberStyles.HexNumber),
                byte.Parse(color.Substring(4, 2), System.Globalization.NumberStyles.HexNumber)));
        }
        else
        {
            return null;
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T02:09:37.837

库中没有提供转换。但是，转换例程很容易编写，例如[http://blog.lookitskris.com/?p=22](http://blog.lookitskris.com/?p=22)中提到的那个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-13T10:27:17.563

WinRT 中似乎缺少 ColorConverter，但稍加思考就可以轻松编写自己的。在下面的示例中，我创建了一些扩展方法，可以编写如下代码：

```
Color red = "Red".ConvertToColor(); or
Color color = colorName.ConvertToColor(); 
```

和

```
Background = colorName.CreateColorBrush(); 
```

为 WinRT 和 WPF 编译的扩展实现：

```
#if NETFX_CORE
using Windows.UI;
using Windows.UI.Xaml.Media;
#else
using System.Windows.Media;
#endif
using System;
using System.Globalization;
using System.Reflection;

namespace YourNiceExtensionsNamespace
{
    /// <summary>
    /// Extension to convert a string color name like "Red", "red" or "RED" into a Color.
    /// Using ColorsConverter instead of ColorConverter as class name to prevent conflicts with
    /// the WPF System.Windows.Media.ColorConverter.
    /// </summary>
    public static class ColorsConverter
    {
        /// <summary>
        /// Convert a string color name like "Red", "red" or "RED" into a Color.
        /// </summary>
        public static Color ConvertToColor(this string colorName)
        {
            if (string.IsNullOrEmpty(colorName)) throw new ArgumentNullException("colorName");
            MethodBase getColorMethod = FindGetColorMethod(colorName);
            if (getColorMethod == null)
            {
                // Using FormatException like the WPF System.Windows.Media.ColorConverter
                throw new FormatException(string.Format(CultureInfo.InvariantCulture, "Color name {0} not found in {1}",
                    colorName, typeof(Colors).FullName));
            }
            return (Color)getColorMethod.Invoke(null, null);
        }

        /// <summary>
        /// Create a SolidColorBrush from a color name
        /// </summary>
        public static Brush CreateColorBrush(this string colorName)
        {
            if (string.IsNullOrEmpty(colorName)) throw new ArgumentNullException("colorName");
            Color color = colorName.ConvertToColor();
            return new SolidColorBrush(color);
        }

        /// <summary>
        /// Verify if a string color name like "Red", "red" or "RED" is a known color in the static Colors class
        /// </summary>
        public static bool IsColorName(this string colorName)
        {
            if (string.IsNullOrEmpty(colorName)) throw new ArgumentNullException("colorName");
            return FindGetColorMethod(colorName) != null;
        }

        private static MethodBase FindGetColorMethod(string colorName)
        {
            foreach (PropertyInfo propertyInfo in typeof(Colors).GetTypeInfo().DeclaredProperties)
            {
                if (propertyInfo.Name.Equals(colorName, StringComparison.OrdinalIgnoreCase))
                {
                    MethodBase getMethod = propertyInfo.GetMethod;
                    if (getMethod.IsPublic && getMethod.IsStatic)
                        return getMethod;
                    break;
                }
            }
            return null;
        }
    }
} 
```

# java - Encryption algorithm preferably having an implementation in java

> ID：12523252
> 
> 赞同：2
> 
> 时间：2012-09-21T01:50:34.070
> 
> 标签：java, encryption, key, encryption-symmetric, base32

I am looking for a symmetric key encryption scheme which would encrypt my 12 byte data. As you can see it does not conform to 64 bit or 128 bit boundaries for me to use block ciphering algorithms and I do not want to pad the data as I have restriction on the length of encrypted data. The restriction is because I would be transforming using base 32 it to a printable key which cannot exceed 20 chars. The plain text has very predictable data pattern, so the encryption scheme should be able to hide that. From what I understand, the pseudo random key generation is the only soultion fo this problem, but the solution that encrypts the data and solution that decrypts it, do not talk to each other.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T03:25:04.847

为什么不使用 RC4？密文与明文的大小完全相同 - 在您的情况下为 12 个字节。它带有 Java（5 或更高版本）。这是一个例子：

```
import javax.crypto.Cipher;
import javax.crypto.spec.SecretKeySpec;
import javax.xml.bind.DatatypeConverter;

public class MyArcFour
{
   public static void main(String [] args) throws Exception
   {
      byte [] key = "MYVERYINSECUREKEY".getBytes("ASCII");

      String clearText = "123456789012";

      Cipher rc4 = Cipher.getInstance("RC4");
      SecretKeySpec rc4Key = new SecretKeySpec(key, "RC4");
      rc4.init(Cipher.ENCRYPT_MODE, rc4Key);

      byte [] cipherText = rc4.update(clearText.getBytes("ASCII"));

      System.out.println("clear (ascii)        " + clearText);
      System.out.println("clear (hex)          " + DatatypeConverter.printHexBinary(clearText.getBytes("ASCII")));
      System.out.println("cipher (hex) is      " + DatatypeConverter.printHexBinary(cipherText));

      Cipher rc4Decrypt = Cipher.getInstance("RC4");
      rc4Decrypt.init(Cipher.DECRYPT_MODE, rc4Key);
      byte [] clearText2 = rc4Decrypt.update(cipherText);

      System.out.println("decrypted (clear) is " + new String(clearText2, "ASCII"));
   }
} 
```

这会生成以下输出：

```
clear (ascii)        123456789012
clear (hex)          313233343536373839303132
cipher (hex) is      CBFB9A712E55EBD985C8F2DF
decrypted (clear) is 123456789012 
```

当然，您可能希望使用比示例中更好（更长、更随机）的密钥。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T12:20:29.047

您可以使用像 RC4 这样的流密码，但正如您所发现的，您**不能**重复使用密钥。对于流密码，使用键/随机数（随机数 = 使用一次的数字）组合。随机数可以像 1、2、3、4、... 或日期/时间一样简单，并且需要与密文一起存储。在随机数循环为零并开始重复之前更改密钥。如果您使用日期/时间，请确保时钟的滴答速度足够快，不会重复一个值。

你有一个长期密钥和一个随机数。每次你想加密某些东西时，对它们进行哈希处理以获得会话密钥：

```
sessionKey <- SHA256(longTermKey + nonce) 
```

仅使用一次此会话密钥，然后将其丢弃。存储随机数以用于解密。增加一个数字随机数以备下次使用。对于日期/时间随机数，插入一个短暂的延迟以确保时钟已更改。下次使用时，nonce**必须不同。**

当您更改长期密钥时，您需要对所有数据进行解密和重新加密。或者为你的 nonce 选择一个大的比特大小，并保持你的长期密钥*非常*安全。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T12:19:01.397

你想要/需要一个流密码：[http ://en.wikipedia.org/wiki/Stream_cipher](http://en.wikipedia.org/wiki/Stream_cipher)

# java - How to create JSON object from ArayList>?

> ID：12523255
> 
> 赞同：0
> 
> 时间：2012-09-21T01:51:02.030
> 
> 标签：java, json

I have an ArrayList< Map < String, String > >, I want to write a method to create a JSON object from it. The object should look like this:

```
{
 "list":[ {"name": "john",
           "partner": "meredith",
           ...
          }
          {"name": "harry",
           ...
          }
          ...
        ]
} 
```

The documentation of JSONSerializer.toJson(Object o) says o has to be a formatted Collection, but I couldn't find an example. How should I format my arraylist to be qualified as "formatted"?

Thanks!!

Rachel

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T02:02:56.430

我不确定您是否研究过 Gson，或者您是否坚持自己这样做，但不久前有人向我指出 Gson，我发现它对于从甚至复杂的结构创建 json 字符串非常有效。它变得如此简单：

```
Gson gson = new Gson();
String json = gson.toJson(yourArrayList); 
```

用户指南可以在这里找到[https://sites.google.com/site/gson/gson-user-guide](https://sites.google.com/site/gson/gson-user-guide)

如果这对您不起作用，请告诉我，我可以尝试帮助 JSONSerializer

# c++ - 河内之塔 - n peg 解算法

> ID：12523259
> 
> 赞同：1
> 
> 时间：2012-09-21T01:51:29.797
> 
> 标签：c++, recursion, recursive-datastructures, towers-of-hanoi

我正在实施河内塔问题以了解更多关于递归的信息。我能够使用 3 peg 案例来实现它，但是，当我想使用更多 pegs（以产生更少的移动）时，我理解 Frame-Stewart 解决方案，我必须打破我拥有的磁盘数量并堆叠到*一个*peg上当我将磁盘从源钉转移到带有所有中间钉的目标钉时，切勿触摸该钉。但是，我不明白如何将 move(disks, 1, i, {2...K}) 之类的东西写成函数。当我从一开始都不知道它们时，如何在函数原型中写出*所有钉子的名称？*我在下面给出了我为 3 磁盘解决方案所做的工作，但我需要有关更一般情况的帮助。

```
// private member function: primitive/basic move of the top disk
    // from the source peg to the destination peg -- and legality-check
    void move_top_disk(int source, int dest)
    {
        cout << "Move disk " << towers[source].front() << " from Peg ";
        cout << source+1 << " to Peg " << dest+1;
        towers[dest].push_front(towers[source].front());
        towers[source].pop_front();
        if (true == is_everything_legal())
            cout << " (Legal)" << endl;
        else 
            cout << " (Illegal)" << endl;
    }

    // private member function: recursive solution to the 3 Peg Tower of Hanoi
    void move(int number_of_disks, int source, int dest, int intermediate)
    {
        if (1 == number_of_disks)
        {
            moves++;
            move_top_disk (source, dest);
        }
        else 
        {
            moves++;
            move (number_of_disks-1, source, intermediate, dest);
            move_top_disk (source, dest);
            move (number_of_disks-1, intermediate, dest, source);
        }
    } 
```

我不明白我需要对我的“移动”功能做出什么样的改变来解决一个 6 钉的情况。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T03:02:42.057

您将需要修改最后一个代码块，它确实移动，移动顶部磁盘，移动。

这是关于 N 钉的河内塔解决方案的文章：[带有 K 钉的河内塔](https://stackoverflow.com/questions/3607161/towers-of-hanoi-with-k-pegs)

# javascript - 仅在本地开发中使用 Chrome 的跨域错误。如何解决？

> ID：12523260
> 
> 赞同：4
> 
> 时间：2012-09-21T01:51:29.330
> 
> 标签：javascript, google-chrome

我在本地机器上遇到了跨域错误（尽管代码在我们的 Web 服务器上运行良好）。这对于开发来说是一个真正的痛苦，所以我想知道的是 - 我可以调整 Chrome 中的设置以不再在本地出现该错误吗？

就是这个：

**不安全的 JavaScript 尝试从具有 URL 文件:///Users/david/varReturn.html 的框架访问具有 URL 文件:///Users/david/login.html 的框架。域、协议和端口必须匹配。**

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-21T01:54:45.423

谷歌已经决定离线文件访问是跨域的，无论如何。您可以尝试使用`--allow-file-access-from-files`. 使用 JavaScript 从同一文件夹中读取文本文件时，我遇到了同样的问题。

# php - Zend Search Lucene - 你如何让你的查询不区分大小写？

> ID：12523262
> 
> 赞同：2
> 
> 时间：2012-09-21T01:52:23.320
> 
> 标签：php, zend-framework, lucene

在我看来，Zend Search Lucene 默认为区分大小写的搜索。有没有办法改变这种情况，使所有查询都不区分大小写？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T02:03:40.470

Zend Search Lucene 应该默认不区分大小写（来自文档）：

> 您可以分配自己的文本分析器或从一组预定义的分析器中选择它：`Zend_Search_Lucene_Analysis_Analyzer_Common_Text` 和`Zend_Search_Lucene_Analysis_Analyzer_Common_Text_CaseInsensitive` （默认）。它们都将标记解释为字母序列。 `Zend_Search_Lucene_Analysis_Analyzer_Common_Text_CaseInsensitive` 将所有标记转换为小写。

你可能有

```
Zend_Search_Lucene_Analysis_Analyzer::setDefault(
    new Zend_Search_Lucene_Analysis_Analyzer_Common_Text()
); 
```

设置某处，将其切换为区分大小写。您可以尝试查找并删除它，或[切换分析器](http://framework.zend.com/manual/1.12/en/zend.search.lucene.extending.html)。

# java - 振动器许可力关闭

> ID：12523265
> 
> 赞同：0
> 
> 时间：2012-09-21T01:53:10.440
> 
> 标签：java, android, permissions, vibration

我有这行代码从`vibrator_service`;调用 2 秒。

```
 Vibrator v = (Vibrator)
                        getSystemService(Context.VIBRATOR_SERVICE);
                        v.vibrate(2000); 
```

这在我的清单中

```
<permission
    android:name="android.permission.VIBRATE" ></permission> 
```

但我仍然很接近`java.lang.security.exception: Requires Vibrate Permission`。我是否声明了许可错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T02:01:12.250

您需要`uses-permission`在清单文件中添加一个标签（作为元素的子`manifest`元素，与`permission`标签相同）：

```
<uses-permission android:name="android.permission.VIBRATE" /> 
```

据我所知，该`permission`标签仅用于在下载应用程序时向权限请求添加额外的文本/图形信息，或者添加新的权限以向您的用户提供额外的信息。为了安全起见，我通常同时使用两者。

# uitextview - iOS 6 uitextview links

> ID：12523268
> 
> 赞同：1
> 
> 时间：2012-09-21T01:53:52.090
> 
> 标签：uitextview, ios6

Now that uitextview supports rich text and nsattributedstrings, is there any function that gets called when the user clicks a link? I am trying to port a desktop osx app that relied on this behavior of nstextview.

# sql-server - 授予数据库级触发器对不同数据库表的完全访问权限 [T-SQL]

> ID：12523269
> 
> 赞同：1
> 
> 时间：2012-09-21T01:53:59.373
> 
> 标签：sql-server, tsql, triggers, ddl

我正在尝试在任意数据库中设置一个触发器，该触发器将在执行时将信息存储在特定数据库中。但是，我发现如果触发器是由没有显式访问该数据库的人触发的，则触发器执行将失败。

我希望使用以下方法解决这个问题：

```
CREATE TRIGGER [myTrigger] 
on database
with execute as 'UserWithPermissions' 
```

但这似乎也不起作用......有谁知道这是否可能？任何指针将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T02:00:01.693

在 MSSQL 管理中，转到 DB-name => Security => Users 并确保用户具有访问权限。此外，在从其他机器运行 procs 时，Windows 网络身份验证也有很大帮助

- 编辑 -

我认为你想要的是'EXECUTE AS'。

```
CREATE PROCEDURE dbo.usp_Demo
WITH EXECUTE AS 'SqlUser1'
AS
SELECT user_name(); -- Shows execution context is set to SqlUser1.
EXECUTE AS CALLER;
SELECT user_name(); -- Shows execution context is set to SqlUser2, the caller of the    module.
REVERT;
SELECT user_name(); -- Shows execution context is set to SqlUser1.
GO 
```

# regex - Perl 正则表达式

> ID：12523271
> 
> 赞同：-1
> 
> 时间：2012-09-21T01:54:27.300
> 
> 标签：regex, perl

我正在阅读一些涉及正则表达式的代码并且遇到了一些麻烦。

有人可以解释一下并举例说明它会解析的文本吗？

```
if(/\|\s*STUFF(\d+)\s*\|\s*STUFF(\d+)/) 
{
        $a = $1;
        $b = $2;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T01:59:01.313

它匹配的一个字符串是`|STUFF1|STUFF2`.

[YAPE::Regex::解释](http://search.cpan.org/dist/YAPE-Regex-Explain/)

```
(?-imsx:\|\s*STUFF(\d+)\s*\|\s*STUFF(\d+))

matches as follows:

NODE                     EXPLANATION
----------------------------------------------------------------------
(?-imsx:                 group, but do not capture (case-sensitive)
                         (with ^ and $ matching normally) (with . not
                         matching \n) (matching whitespace and #
                         normally):
----------------------------------------------------------------------
  \|                       '|'
----------------------------------------------------------------------
  \s*                      whitespace (\n, \r, \t, \f, and " ") (0 or
                           more times (matching the most amount
                           possible))
----------------------------------------------------------------------
  STUFF                    'STUFF'
----------------------------------------------------------------------
  (                        group and capture to \1:
----------------------------------------------------------------------
    \d+                      digits (0-9) (1 or more times (matching
                             the most amount possible))
----------------------------------------------------------------------
  )                        end of \1
----------------------------------------------------------------------
  \s*                      whitespace (\n, \r, \t, \f, and " ") (0 or
                           more times (matching the most amount
                           possible))
----------------------------------------------------------------------
  \|                       '|'
----------------------------------------------------------------------
  \s*                      whitespace (\n, \r, \t, \f, and " ") (0 or
                           more times (matching the most amount
                           possible))
----------------------------------------------------------------------
  STUFF                    'STUFF'
----------------------------------------------------------------------
  (                        group and capture to \2:
----------------------------------------------------------------------
    \d+                      digits (0-9) (1 or more times (matching
                             the most amount possible))
----------------------------------------------------------------------
  )                        end of \2
----------------------------------------------------------------------
)                        end of grouping
---------------------------------------------------------------------- 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T01:59:27.700

```
\|\s*STUFF(\d+)\s*\|\s*STUFF(\d+) 
```

`\|`寻找文字管道字符`|`。

`\s*`查找任意数量（零个或多个）空白字符。

`STUFF`寻找字符串`STUFF`

`(\d+)`查找任意数量的数字（一个或多个），并将它们保存到`$1`.

`\s*`查找任意数量的空白字符（零个或多个）

然后重复一次，并将下一个数字序列保存在`$2`.

如果正则表达式匹配，我们知道`$1`并且`$2` *必须*定义（即它们有一个值）。

在这种情况下，我们分配给`$1`变量`$a`和。`$2``$b`

由于没有提供要匹配的显式字符串，因此`$_`隐式使用了该变量。

示例文本：

```
foo bar |STUFF123|STUFF456 baz bar foo 
```

和

```
foo |

  STUFF0 
|STUFF1234567890bar 
```

# sql-server-2005 - sql服务无法启动

> ID：12523282
> 
> 赞同：0
> 
> 时间：2012-09-21T01:57:37.170
> 
> 标签：sql-server-2005, service

请就这个问题给我建议：

我在 SQL Server 2005（sp 3 x64 位）中有一个名为 instanceA 的默认 SQL 实例，然后我安装了另外 2 个名为 instanceB 和 C 的实例。

之后，我将 master.bak 从生产服务器恢复到这个 instanceB。从那时起，该实例的 SQL 服务根本无法启动。如果我关闭了默认的实例服务，就可以启动 instanceB。这是因为两个实例都指向“MSSQL.1”文件夹中的同一个“model.mdf”文件。因此，两个实例无法同时启动。

我相信在生产服务器中，模型路径配置为默认文件夹“MSSQL.1”。无论如何在安装时将路径更改为属于 instanceB 的“MSSQL.8”，以便实例 A 和 B 都可以一起开始的？

谢谢你。

# android - Eclipse 在其新文件向导中缺少 Android Activity

> ID：12523286
> 
> 赞同：0
> 
> 时间：2012-09-21T01:58:08.403
> 
> 标签：android, eclipse

正如标题所说，文件 > 新建 > 其他... 扩展的 Android。没有 Android Activity 我只能看到 Android Icon Set, Android Project, Android Sample Project, Android Test Project, Android XML File, Android XML Layout File, Android XML Values File

不知道为什么它丢失了。

# jquery - 在 jquery 中找不到元素 ID ....

> ID：12523287
> 
> 赞同：-1
> 
> 时间：2012-09-21T01:58:21.720
> 
> 标签：jquery, asp.net

我有一个 .aspx 文件，它可以访问其他一些 .ascx 文件。现在，.ascx 文件之一有一个标签，可以说标签 id="label1"。此 label1 的样式为 style="display: none;"。

现在我想要的是使用 jquery 显示标签。所以我有这个代码。

```
$("#<%= label1.ClientID%>").show(); 
```

我为 .asp 添加了 .ClientID，并在“label1”id 之前附加了一些其他文本。但是当我运行我的代码时，我收到一个错误“编译器错误消息：CS0103：当前上下文中不存在名称'label1'”

顺便说一句，这只是一个插图，我目前正在开发一个正在运行的应用程序。

再次非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T02:03:14.930

尝试这个

```
 <%= YourUserControlID.FindControl("Label1").ClientID %> 
```

应用于您的代码

```
 $("#<%= YourUserControlID.FindControl("Label1").ClientID %>").show(); 
```

# web-applications - 为用户提供唯一网址的缺点？

> ID：12523293
> 
> 赞同：1
> 
> 时间：2012-09-21T01:59:01.377
> 
> 标签：web-applications, url-routing

我允许用户拥有一个唯一的关键字，允许 mysite.com/username 访问他们的个人资料页面。我在路由规则文件的底部使用一行来捕获这些 url。然后我在我的数据库中查找用户名并在必要时重定向它们。

这样做有什么缺点吗？我注意到的一件事是每个坏链接都会首先访问我的数据库。

另外，如果我“需要” URL，我该怎么办？例如，如果用户注册“about”作为他们的唯一名称。后来我意识到我需要那个网址。我该怎么办？

# php - While 循环和 for 语句

> ID：12523299
> 
> 赞同：1
> 
> 时间：2012-09-21T01:59:30.087
> 
> 标签：php, for-loop, while-loop

我正在尝试为我的学生建立一个在线阅读测试。我的数据库中目前有两个表：“学生”和“问题”。在“学生”中，每个学生都有一行，其中包含其姓名、组号和问题的答案。问题列称为问题[1]、问题[2]，依此类推。

在“问题”中，我有 4 个列：ID、“第一”、“章节”和“问题”。'first' 是一个真/假字段，如果它是一章的第一个问题，它的值为 1。我用 while 循环调用那些。

```
echo '<ol>';
$query = mysql_query("SELECT * FROM `question`");
while($row_q = mysql_fetch_assoc($query)) {
if($row_q['first']==1){
echo '<h2>Chapter '.$row_q['chapter'].'</h2><br>';
}
echo '<li>';
echo $row_q['question'];
echo '</li>';
echo '<br>';
}
echo '</ol>'; 
```

它回响美妙。现在，我尝试在每个问题下放置一个输入字段，以便学生可以给出答案并在页面末尾提交。我怎样才能做到这一点？我尝试使用 for($i=1;$i<=10;$i++) 语句，因为我希望每个字段都用不同的数字命名，但无论我在哪里插入它，我都会得到一堆相同的字段彼此相邻或我的问题一遍又一遍地回响。

我愿意接受所有建议。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T02:25:07.757

无需执行 for 循环，您已经处于循环中:) 只需设置一个名为 question number 的变量并在 while 循环中递增它。

```
$question_number =1;

echo '<ol>';
$query = mysql_query("SELECT * FROM `question`");
while($row_q = mysql_fetch_assoc($query)) {
    if($row_q['first']==1){
        echo '<h2>Chapter '.$row_q['chapter'].'</h2><br>';
    }
    echo '<li>';
    echo "<label>$question_number".$row_q['question']."</label>";
    echo "<input type='text' name='$row_q[\'ID\']'></input>";
    echo '</li>';
    echo '<br>';

    $question_number++; 
}
echo '</ol>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T02:08:19.957

> echo '<input name="answer[' .htmlspecialchars($row_q['ID']) .']" type="text" value="" />';

在问题文本下...然后在 PHP var_dump($_REQUEST) 中查看答案...

编辑：

为了显示保存的答案，您需要执行以下操作：

```
echo '<input name="answer_' . $idx . '" type="text" ' .
  value="' . htmlspecialchars($student_row["answer_$idx"]) . '" />'; 
```

并在循环时维护一个计数器 $idx ...

也就是说，如果您的答案根据您的描述平铺在学生表中，并且答案值列被命名为“answer_1”等。

如果答案在单独的表中标准化，您可以将这些表连接在一起：

```
select * from question q left join answer a on a.question_id = q.question_id and
  a.student_id = <current student id> 
```

# ruby-on-rails-3.2 - 如何确保我的 CoffeeScripts 只加载到他们需要的页面上？

> ID：12523319
> 
> 赞同：0
> 
> 时间：2012-09-21T02:01:51.347
> 
> 标签：ruby-on-rails-3.2, asset-pipeline

关于 Rails 3.2 中的资产管道，我不明白的一件事是我看到了对 application.js 文件的多个引用，其中包含以下行：

```
//= require_tree . 
```

这是否会在每个页面上加载我所有的 javascript？因为真的，当用户在“类别”页面（例如）时，我不希望将“产品”CoffeeScript 加载到浏览器，因为不会使用任何代码。

如果我上面所说的行为是`require_tree`对资产管道中如何工作的准确描述，有没有办法确保只加载特定视图所需的 CoffeeScripts 而不是全部？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T02:04:00.080

> 这是否会在每个页面上加载我所有的 javascript？

是的，这就是它的作用。Rails 会将您的 CoffeeScripts 编译成 JavaScript，然后将它们连接并缩小（在生产中）到一个文件中。该文件将包含在每个页面中。

> 因为真的，当用户在“类别”页面上时，我不希望将“产品”CoffeeScript 加载到浏览器中......

是的你是。这就是重点。这个捆绑的 JavaScript 文件加载到*每一页上*。这样，浏览器在第一次请求期间将整个站点的 JavaScript 作为一个文件下载一次，并在每个其他页面上使用缓存副本。

> ...因为不会使用任何代码

如果没有从缓存中执行和加载，在每个页面上包含额外的代码实际上是没有成本的。同时它提供了巨大的节省，因为您将外部 JavaScript 的请求数量降至最低，这意味着您的脚本可以立即运行，并且您的 DOM 就绪事件会更快地触发。

由您来确保这是安全的，并且您的代码仅针对它应该影响的站点部分。通常，您可以通过按 ID 选择特定元素并确保您的 ID 不会在页面之间共享，并且您不会将具有特殊含义的类应用于不应该具有它们的元素来执行此操作。

> 有没有办法确保只加载特定视图所需的 CoffeeScripts 而不是全部？

不，如果没有为每个页面创建单独的清单文件，这会破坏使用资产管道的主要目的之一。不要这样做。将整个缩小的 JavaScript 包文件包含在每个页面上是正确的、理想的和有意的。

# php - 以编程方式添加带有特色图像的帖子

> ID：12523320
> 
> 赞同：3
> 
> 时间：2012-09-21T02:02:00.267
> 
> 标签：php, wordpress

我正在向 wordpress 动态添加帖子。我正在使用以下代码创建帖子并添加一个工作正常但有 2 个问题的特色图片

1.  它添加了 2 个帖子 1，图像本身没有其他内容，并以该图像作为特色图像的帖子进行更正。
2.  帖子尺寸大的特色图片。

    $post_id = wp_insert_post($postdata, true);
    //从一个url保存图片
    $attachmentId_id = wp_insert_attachment( $attachment,$fullpathfilename,0);
    add_post_meta( $post_id, '_thumbnail_id', $attachmentId, true );

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T02:53:12.790

如果父 ID 设置为零，wp_insert_attachment 会自行创建帖子。

尝试：

```
wp_insert_attachment( $attachment,$fullpathfilename,$post_id); 
```

# c++ - 将 CComPtr 传递给具有原始指针原型的函数

> ID：12523327
> 
> 赞同：6
> 
> 时间：2012-09-21T02:03:10.980
> 
> 标签：c++, com, smart-pointers

我正在浏览一些处理 Windows 映像组件库的遗留 C++ 代码，我观察到了这一点：

```
void setProperties(IPropertyBag2* const pBag)
{  
   pBag->Write(...);
}

void other_function()
{
   CComPtr<IPropertyBag2> pBag;
   //Code to initialize pBag
   setProperties(pBag);
} 
```

该`setProperties`方法只是将一堆属性写入属性包。代码编译并运行良好，因为我认为它调用了适当的类型转换运算符。

我的问题是是否推荐这样的接口，或者是否有更好的方法来传递指针。例如，如果将签名更改为：是否有任何区别（在安全/性能方面）：

```
void setProperties(const CComPtr<IPropertyBag2>& pBag) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T02:30:03.770

原始接口指针是处理 COM 对象的规范方式。它们也是最灵活的。使用对 CComPtr 的引用将使您始终使用 CComPtr。

任何 COM 指针，即使是愚蠢的指针，都会自动成为智能指针，因为对象本身实现了`AddRef`和`Release`. 如果函数没有保留指针的副本，则甚至无需担心。

为方便起见，CComPtr 类型将自动将自身转换为原始指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T02:16:44.097

使用 CComPtr 参数并没有太多优势（除非它是非常量并且您要修改它）。CComPtr 对于局部变量和实例变量更有用。

但这样做是可以的，如果只是为了风格/一致性的问题。

# servicestack - 将 json 文本合并为单个 dto

> ID：12523335
> 
> 赞同：2
> 
> 时间：2012-09-21T02:04:00.080
> 
> 标签：servicestack

servicestack.text 中是否有将两个 json 字符串合并为一个 dto 的机制？

用例是将来自多个来源的复杂设置合并到一个设置文件中

IE

{“废话”：{“参数”：{“默认”：“酒吧”，“杂项”：“0”，}}}

和

{ "blah": { "params": { "value": "val", "misc": "1", } } }

变成

{ "blah": { "params": { "default": "bar", "value": "val", "misc": "1", } } }

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T21:54:50.963

请注意结尾的逗号，因为它不是有效的 JSON。但是您可以使用[ServiceStack 的 JSON 序列化](https://github.com/ServiceStack/ServiceStack.Text)器的动态 API来执行此操作：

```
var json1 = "{\"blah\":{\"params\":{\"default\":\"bar\", \"misc\": \"0\" } } }";
var json2 = "{\"blah\":{\"params\":{\"value\":\"val\", \"misc\": \"1\" } } }";

var jsonObj = JsonObject.Parse(json1);
var jsonParams =jsonObj.Object("blah").Object("params");

foreach (var entry in JsonObject.Parse(json2).Object("blah").Object("params"))
{
    jsonParams[entry.Key] = entry.Value;
}

var to = new { blah = new { @params = jsonParams } };

to.ToJson().Print(); 
```

这将输出：

```
{"blah":{"params":{"default":"bar","misc":"1","value":"val"}}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-19T12:59:44.913

好吧，如果你不打算使用 JsonArrays，上面的解决方案可以用递归方式编写：

```
public static JsonObject Merge(JsonObject @this, JsonObject that) {
  foreach (var entry in that) {
    var exists = @this.ContainsKey (entry.Key);
    if (exists) {
      var otherThis = JsonObject.Parse(@this.GetUnescaped (entry.Key));
      var otherThat = JsonObject.Parse(that.GetUnescaped (entry.Key));
      @this [entry.Key] = Merge (otherThis, otherThat).ToJson ();
    } else {
      @this [entry.Key] = entry.Value;
    }
  }
  return @this;
} 
```

# c# - StructureMap Setter 注入未设置属性

> ID：12523337
> 
> 赞同：6
> 
> 时间：2012-09-21T02:04:30.667
> 
> 标签：c#, asp.net-mvc-3, dependency-injection, inversion-of-control, structuremap

我正在尝试使用 StructureMap 为我的 MVC 项目设置设置器/属性注入，但我似乎无法让它设置属性。我很清楚构造函数注入是推荐的做法，但我有一个严格的要求，要求我们使用 setter 注入来执行此操作，所以请保留试图告诉我的评论。

我的 Global.asax 中有正常的样板设置代码，如下所示

```
ControllerBuilder.Current.SetControllerFactory(new TestControllerFactory());

ObjectFactory.Initialize(x => {
            x.For<IPaymentService>().Use<PaymentService>();
            x.ForConcreteType<HomeController>().Configure.Setter<IPaymentService>(y => y.PaymentService).IsTheDefault();
            x.SetAllProperties(y =>
            {
                y.OfType<IPaymentService>();
            });

        }); 
```

我的 TestControllerFactory 如下所示：

```
public class TestControllerFactory:System.Web.Mvc.DefaultControllerFactory
{
    protected  IController GetControllerInstance(Type controllerType)
    {
        if (controllerType == null)
            throw new ArgumentNullException("controllerType");
        return ObjectFactory.GetInstance(controllerType) as IController ;
    }
} 
```

我有以下服务/实现类对

```
public interface IPaymentService
{

}

public class PaymentService:IPaymentService
{

} 
```

最后，我的控制器将具有需要将具体支付服务实现注入其中的属性：

公共类 HomeController:Controller { 公共 IPaymentService 服务 {get;set;}

```
 public ActionResult Index(){
        var test = Service... //Service is Null
 } 
```

}

如上所示，当我调试时该属性保持为空。

此外，我尝试使用 [SetterProperty] 只是为了看看它是否有效（我无意将我的控制器与这些属性耦合），但它仍然无效。

我不确定我是否需要做其他事情，或者问题可能是什么。很长一段时间以来，我一直在使用带有 StructureMap 的构造函数注入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-27T21:52:40.530

尝试删除这一行：

```
x.ForConcreteType<HomeController>().Configure
  .Setter<IPaymentService>(y => y.PaymentService).IsTheDefault(); 
```

这不应该是必要的。

给定以下控制器：

```
public class HomeController : Controller
{
    public IMsgService Service { get; set; }

    public ActionResult Index()
    {
        return Content(Service.GetMessage());
    }
} 
```

这就是配置 StructureMap 以设置属性所需的全部内容：

```
ObjectFactory.Initialize(cfg =>
{
    cfg.For<IMsgService>().Use<MyMsgService>();

    cfg.SetAllProperties(prop =>
    {
        prop.OfType<IMsgService>();
    });
});

ControllerBuilder.Current.SetControllerFactory(new StructureMapControllerFactory()); 
```

# mysql - MySQL嵌套SELECT太慢

> ID：12523341
> 
> 赞同：2
> 
> 时间：2012-09-21T02:04:52.387
> 
> 标签：mysql, select, left-join

我有以下结构的脚本：

```
SELECT SUM(CASE WHEN pf.info IS NOT NULL THEN 1 ELSE 0 END)
FROM summary s 
LEFT JOIN (SELECT id, info FROM items GROUP BY id) pf ON s.id=pf.id
GROUP BY s.date 
```

我想要的是计算那些在“摘要”中并出现在“项目”中的 id。'items' 有相同的 id 重复多次，这就是我做 GROUP BY 的原因。

这个脚本可以按我的意愿工作，但是它非常慢，比直接执行 LEFT JOIN 慢得多（并且多次计算每个 id）。这似乎没有意义，因为我需要一个较小的子空间，它应该更容易。

所以问题是：如何重组查询以使其更快？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T02:08:16.133

使用`count(distinct ...)`：

```
SELECT count(distinct s.id)
FROM summary s 
JOIN items i ON s.id = i.id 
```

我不明白你为什么要分组`s.date`- 你的问题中没有关于为什么的线索，所以如果这不是一个错误并且你需要分组`date`，使用这个：

```
SELECT s.date, count(distinct s.id)
FROM summary s 
JOIN items i ON s.id = i.id
GROUP BY s.date 
```

# bash - 在 emacs 终端中打开 emacs 缓冲区中的文件

> ID：12523345
> 
> 赞同：12
> 
> 时间：2012-09-21T02:05:26.883
> 
> 标签：bash, emacs

假设我在 Emacs（Mx 术语）的终端中，并且我在当前目录中列出了以下文件：

`text_code.R`

现在我在 bash-3.2$（终端）中，希望在另一个 Emacs 缓冲区中打开这个 .R 文件，然后进行编辑。有没有办法做到这一点？这可能是一个微不足道的问题，因为我是 Linux 和 Emacs 的新手。提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-21T12:14:34.510

请记住，在术语模式下，您可以键入`C-c C-f`打开文件（就像`C-x C-f`在术语模式外一样）。提示已经在您的当前目录中，因此您只需开始输入文件名并使用`TAB`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T03:05:47.867

我不知道您想要做什么的官方程序，但这是一个有效的程序：

1.  要么告诉 emacs 作为守护进程运行（参考：[EmacsAsDaemon](http://www.emacswiki.org/emacs/EmacsAsDaemon)），要么在 emacs 中通过`M-x server-start`.

2.  在术语中，类似的命令`emacsclient -n filename`将开始编辑当前窗口中的指定文件。请注意，emacsclient 还可以`-c, --create-frame`选择在新框架中进行编辑。您可能会想要使用上述`-n`选项，因此您可以在从另一个窗格或框架的缓冲区列表中选择它之后继续使用您的术语。

3.  如果你通过`M-x server-start`在 emacs 中启动守护进程，当你从 emacs 退出时，守护进程将终止。如果您通过上述参考设置它，请使用`kill-emacs`or`save-buffers-kill-emacs`命令或 shell 命令`emacsclient -e '(kill-emacs)'`来停止它，如参考第 6 部分所述。

# javascript - 在其他 DIV 中对 DIV 进行排序

> ID：12523348
> 
> 赞同：0
> 
> 时间：2012-09-21T02:05:30.410
> 
> 标签：javascript, jquery, html, sorting

> **可能重复：**
> [如何使用 jQuery 根据 id 对 div 进行排序？](https://stackoverflow.com/questions/2351635/how-to-sort-divs-according-to-their-id-using-jquery)

好吧，我很难解决这个问题，实际上直到现在我还没有成功，我正在尝试按 ID 对其他 DIV 中的 DIV 进行排序。所以这就是我的 DIV 在我的页面中的分布方式

```
<div id="products" >
   <div class="line">
      <div id="Album2">[there are images and even other divs here in each Album]</div>
      <div id="Album1"></div>
      <div id="Album10"></div>
      <div id="Album16"></div>
   </div>
   <div class="line">
      <div id="Album9"></div>
      <div id="Album3"></div>
      <div id="Album4"></div>
      <div id="Album7"></div>
   </div>
   <div class="line">
      <div id="Album5"></div>
      <div id="Album11"></div>
      <div id="Album6"></div>
      <div id="Album13"></div>
   </div>
   <div class="line">
      <div id="Album8"></div>
      <div id="Album14"></div>
      <div id="Album12"></div>
      <div id="Album15"></div>
   </div>
</div> 
```

这应该是我的输出：

```
 <div id="products" >
       <div class="line">
          <div id="Album1"></div>
          <div id="Album2"></div>
          <div id="Album3"></div>
          <div id="Album4"></div>
       </div>
       <div class="line">
          <div id="Album5"></div>
          <div id="Album6"></div>
          <div id="Album7"></div>
          <div id="Album8"></div>
       </div>
       <div class="line">
          <div id="Album9"></div>
          <div id="Album10"></div>
          <div id="Album11"></div>
          <div id="Album12"></div>
       </div>
       <div class="line">
          <div id="Album13"></div>
          <div id="Album14"></div>
          <div id="Album15"></div>
          <div id="Album16"></div>
       </div>
    </div> 
```

但是我还有一个问题，我所有的产品都列出了，而且不止一页，我实际上能够跟踪它们并制作了一个排序的字符串数组，但我没有同样的运气来使用 DIV。这是我的页面： [http ://biscoitofino.jumpseller.com/catalogo](http://biscoitofino.jumpseller.com/catalogo)

有什么建议么？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T02:20:50.973

至少在单个页面的上下文中应该这样做：

```
var lines = $("#products .line");
var elems = $("#products .line div");
for (var index = 1; index <= elems.length; index++) {
    var elemId = "Album" + index;
    var containerIndex = parseInt((index - 1) / 4);
    var container = lines[containerIndex];
    var elem = document.getElementById(elemId);
    elem.parentNode.removeChild(elem);
    container.appendChild(elem);
} 
```

这是一个例子：http: [//jsfiddle.net/dpHyn/](http://jsfiddle.net/dpHyn/)

虽然我认为*真正的*答案是，因为大概您已经拥有一个动态提供专辑列表的服务器，为什么不让服务器在从数据库（或您正在使用的任何其他数据源）加载元素时正确地对元素进行排序)? 这将为您省去所有这些麻烦，并且也可以正常使用分页。

​</p>

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T02:20:08.890

```
var lines = $("#products > .line"),
    albums = lines.children().toArray(),
    line = -1;

albums.sort(function(a, b) {
    return a.id.replace("Album", "") - b.id.replace("Album", "");
});

$.each(albums, function(i, el) {
    if (!(i % lines.length))
        line += 1;

    lines.eq(line).append(el);
}); 
```

或者没有 jquery

```
var lines = document.querySelectorAll("#products > .line"),
    line = -1;

[].slice.call(document.querySelectorAll("#products > .line > div"))
    .sort(function(a,b) {
        return a.id.replace("Album", "") - b.id.replace("Album", "");
    })
    .forEach(function(el, i) {
        if (!(i % lines.length))
            line += 1;

        lines[line].appendChild(el);
    }); 
```

# regex - 任何字母、空格、撇号和空白输入的正则表达式

> ID：12523353
> 
> 赞同：0
> 
> 时间：2012-09-21T02:07:03.893
> 
> 标签：regex, validation

这是我正在使用的当前表达式，但是当我输入一个值时，当我输入超过 1 个时它只接受 1 个字母，我得到一个无效的输入。

```
"regex":"/^(?:[a-zA-Z\ \']{30}|)$/", 
```

什么类型的表达式可能适合我正在寻找的输入？

前任：

约翰·富兰克林

或者

（空白输入）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T02:22:08.297

以下内容应该适合您：

```
/^([a-zA-Z ']*)$/ 
```

我已经[对其进行了测试](http://jsfiddle.net/t4vM6/1)，它似乎符合您的需求。

为清楚起见，`*`表示“匹配 0 或任意数量的字符”，根据我的测试，它满足您的“空白”要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T02:17:17.967

字母、空格、撇号或空白：

```
/^[A-Za-z ']*$/ 
```

如果您将其限制为 30 个字符，请替换`*`为`{0,30}`. 在某些正则表达式风格中，您可以省略`0`和使用`{,30}`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T02:16:04.737

`x{30}`意思是“正好 30 个实例`x`”。听起来您实际上*最多需要*30 个字符：

```
/^[a-zA-Z\ \']{0,30}$/ 
```

（使用 { *m* , *n* } 表示法，意思是“在*m*和*n 个*实例之间”）。

# direct2d - 如何在保持其他文本对象不变的情况下转换 DirectWrite 文本对象之一

> ID：12523355
> 
> 赞同：0
> 
> 时间：2012-09-21T02:07:15.760
> 
> 标签：direct2d, directwrite

我在同一个渲染目标上有几个 DirectWrite 文本对象，我想一次转换其中一个对象，同时保持其他对象不变，在 Direct2D 中，有几种类型的转换

*   渲染目标变换
*   几何变换
*   画笔变换

我不能使用渲染目标变换，因为它会影响上面的所有对象

我不能使用几何变换，因为文本不是几何，并且 IDWriteTextLayout 没有变换方法。

所以对我来说唯一的选择是画笔变换，但是当我尝试使用实心画笔绘制一个变换的矩形时，它仍然在原来的地方绘制（见下面的代码），sdk演示显示了一个位图画笔变换的例子，所以我的问题是：转换是否适用于其他类型的画笔？像实心刷？

这是我的代码，首先，根据经过的时间计算一个平移矩阵，然后使用该矩阵平移画笔，最后绘制矩形。请看一下并告诉我是否是这种情况，或者我是否可以通过其他方式做到这一点？

```
VOID CalculateTranslationMatrix(D2D1_MATRIX_3X2_F* matrix) 
{ 
    static float totalTime = 0.0f; 

    // Get start time 
    static DWORD startTime = timeGetTime(); 

    // Get current time 
    DWORD currentTime = timeGetTime(); 

    // Calculate time elapsed 
    float timeElapsed = (currentTime - startTime) * 0.001f; 

    // Accumulate total time elapsed 
    totalTime += timeElapsed; 

    // Build up the translation matrix 
    matrix->_11 = 1.0f; 
    matrix->_12 = 0.0f; 
    matrix->_21 = 0.0f; 
    matrix->_22 = 1.0f; 
    matrix->_31 = totalTime; 
    matrix->_32 = totalTime; 
} 

VOID DrawRectangle(HWND hwnd) 
{ 
    CreateD2DResource(hwnd) ; 

    g_pRenderTarget->BeginDraw() ; 

    // Clear background color to white 
    g_pRenderTarget->Clear(D2D1::ColorF(D2D1::ColorF::White)); 

    D2D1_MATRIX_3X2_F matrix; 
    CalculateTranslationMatrix(&matrix); 
    g_pBlackBrush->SetTransform(&matrix); 

    // Draw Rectangle 
    g_pRenderTarget->DrawRectangle( 
        D2D1::RectF(10.f, 10.f, 50.f, 50.f), 
        g_pBlackBrush 
        ); 

    HRESULT hr = g_pRenderTarget->EndDraw() ; 
    if (FAILED(hr)) 
    { 
        MessageBox(NULL, "Draw failed!", "Error", 0) ; 

        return ; 
    } 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T14:03:59.120

您可以使用渲染目标转换，并且只应用和恢复状态，例如：

*   在绘制之前，调用 g_pRenderTarget->GetTransform 来获取当前变换的副本
*   设置所需的对象变换
*   绘制你的对象
*   使用您在绘制之前保存的值使用 g_pRenderTarget->SetTransform。

# asp.net - 从客户端代码 Ajaxing 用户控件（使用 Telerik）

> ID：12523357
> 
> 赞同：0
> 
> 时间：2012-09-21T02:07:39.190
> 
> 标签：asp.net, ajax, user-controls, telerik

澄清一下，“客户端代码”是指具有我的控制实例的代码（不是 javascript 中的客户端）

我希望我的自定义用户控件的客户端在使用时指定它是否是内部控件。例如，一个实例可以通过 AJAX 运行，另一个可以定期回发。

如果我将 ajax 代码放在用户控件中，并且特别说“innerList”是 AjaxControlID，我已经让 AJAX 工作，但如果客户端代码指定它会更好。

测试.aspx：

```
<telerik:RadAjaxManager runat="server" ID="RadAjaxManager1" >
    <AjaxSettings>
        <telerik:AjaxSetting AjaxControlID="testID">
            <UpdatedControls>
                <telerik:AjaxUpdatedControl ControlID="testID"/>
            </UpdatedControls>
        </telerik:AjaxSetting>
    </AjaxSettings>
</telerik:RadAjaxManager>

<testing:MyTestUserControl id="testID" runat="server" /> 
```

MyTestUserControl.ascx：

```
<asp:DropDownList id="innerList" runat="server" AutoPostBack="true" >
    <Items><ListItem text="textItem"></ListItem></Items>
</asp:DropDownList> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:08:36.127

如果您希望某些实例执行完整的回发，您可以简单地禁用 AJAX 功能：[http](http://www.telerik.com/help/aspnet-ajax/ajax-forcing-postback.html) ://www.telerik.com/help/aspnet-ajax/ajax-forcing-postback.html 。或者简单地将管理器的服务器端 EnableAJAX 属性设置为 false。

# java - 在 CXF 客户端中启用 gzip 压缩

> ID：12523365
> 
> 赞同：8
> 
> 时间：2012-09-21T02:08:28.443
> 
> 标签：java, web-services, cxf

我试图让我的客户使用 gzip。我在服务器中启用了 GZip 功能。似乎客户端没有发送正确的标头：

```
POST /api/v1/data HTTP/1.1
Content-Type: text/xml; charset=UTF-8
Accept: */*
SOAPAction: ""
User-Agent: Apache CXF 2.6.2
Cache-Control: no-cache
Pragma: no-cache
Host: localhost:8001
Connection: keep-alive
Content-Length: 539 
```

这是我创建客户端的代码：

```
 private static final QName SERVICE_NAME = new QName(
            "http://xxx/", "IData");
    private static final QName PORT_NAME = new QName(
            "http://xxx/", "IDataPort");
    IData port;

    public void initPort() {
        Service service = Service.create(SERVICE_NAME);
        // Endpoint Address
        String endpointAddress = ClientUtil.getUrl()
                + "data";

        // Add a port to the Service
        service.addPort(PORT_NAME, SOAPBinding.SOAP11HTTP_BINDING,
                endpointAddress);

        port = service.getPort(IData.class);
    } 
```

IData 接口实现了 GZip 注解：

```
@WebService
@GZIP
public interface IData .... 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-21T03:14:25.500

解决方案：

修改后，这是您需要的：

```
Client client = ClientProxy.getClient(port);
client.getInInterceptors().add(new GZIPInInterceptor());
client.getOutInterceptors().add(new GZIPOutInterceptor()); 
```

之后它起作用了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T00:06:36.563

据我了解[http://fusesource.com/docs/esb/4.4/cxf_jaxws/JavaFirst-AnnotateCxf-Compress.html](http://fusesource.com/docs/esb/4.4/cxf_jaxws/JavaFirst-AnnotateCxf-Compress.html)

> “GZIP 是一种协商的增强。也就是说，来自客户端的初始请求不会被压缩，但会添加一个 Accept 标头，如果服务器支持 GZIP 压缩，则响应将被压缩，任何后续请求也将被压缩。 "

检查 Web 服务是否接受 Gzip，并仅检查第一个请求之后的请求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-18T11:05:01.237

当只有 gzip'in 来自服务器的响应而不是来自客户端的请求时，您需要将标头等添加`GZIPInInterceptor`到以下内容：

```
// add accept-encoding header
Map<String, Object> requestHeaders = new HashMap<>();
requestHeaders.put("Accept-Encoding", new ArrayList<>(Arrays.asList("gzip")));
((BindingProvider)service).getRequestContext().put(MessageContext.HTTP_REQUEST_HEADERS, requestHeaders);

// encode response from server
client.getInInterceptors().add(new GZIPInInterceptor()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-01T15:53:58.833

启用 gzip 的最简单方法：

```
List<Feature> features = Arrays.asList(new GZIPFeature())
final WebClient webClient = WebClient.create(uri, null, features, null); 
```

GZipFeature 会自动添加“in 拦截器”、“out 拦截器”和“out 故障拦截器”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-04T21:48:58.843

对上述答案的更详细答案

```
Client client = ClientProxy.getClient(port);

//this line to send compressed(gzip) request to server
client.getOutInterceptors().add(new GZIPOutInterceptor());

//this in to uncompress server response at client side
client.getInInterceptors().add(new GZIPInInterceptor()); 
```

# php - 使用 PHP 提供的多个链接从数据库中过滤数据

> ID：12523369
> 
> 赞同：0
> 
> 时间：2012-09-21T02:09:16.117
> 
> 标签：php, mysql, html

**更新**

我自己解决了这个问题。这根本不是问题，只是因为缺乏经验。

一切都源于对 $_GET 变量和可以使用什么以及 PHP 数据类型的误解。当我确实阅读了两遍 PHP 文档时，我了解到它实际上是一个数组，我可以放置几个变量并通过它传递几个参数，因为它是持久的。

从那里开始，剩下的就是小菜一碟了。使用一个包含和一堆函数，我可以完成所有数据库请求并根据需要输出它们！

我很高兴我能够自己解决它，感谢 Passerby，他让我思考如何管理 $_GET 变量。

* * *

我不得不重做这个问题，因为最后一个问题是一块枯燥的文字。让我们简化一下。

假设我有一个带有“n”个项目的水果数据库。列如下：

*   果实名称。
*   出生国家。
*   颜色。

在 index.php 上，我有带有链接的 sidebar.php 和带有一些文本的 content.php。像这样：

```
<!--html code here-->
<?php include('includes/content.php') ?>
<?php include('includes/sidebar.php') ?>
<!--more html code here--> 
```

sidebar.php 的链接如下：

```
<a href="searchDB.php?value=country">Browse by country</a>
<a href="searchDB.php?value=color">Browse by color</a>

etcetera. 
```

searchDB.php 的生成布局与 index.php 相同，但有以下区别：

```
<!--html code here-->
<div id="content">
<?php include('functions/fruit_list.php') ?>
</div>
<?php include('includes/sidebar.php') ?>
<!--more html code here--> 
```

在fruit_list.php 中有一个脚本， 一旦您单击“按国家/地区浏览” ，就会将所有国家/地区显示到**内容中。** `<div>`它还会生成一些超链接，我无法管理或弄清楚如何将它们链接到一个函数，或者让我更深入的某个地方（例如，如果你点击“日本”，我想列出所有来自日本的水果）。

如果可能，新生成的列表（所有来自日本的水果）应该在同一个内容 div 上。

有任何想法吗？想法？我有错误的方法来做到这一点？

# javascript - 使用 onclick 的具有单个参数的 Javascript 函数

> ID：12523372
> 
> 赞同：4
> 
> 时间：2012-09-21T02:09:30.393
> 
> 标签：javascript, function, events, onclick

我是 javascript 的新手，我需要帮助！我需要创建一个`function changeColor (newColor) {}`where`changeColor`是函数的名称，并且`newColor`是要传递给函数的唯一参数（无法更改，我只能在函数中使用单个参数）。我有一个代表不同颜色的无序列表。例如：

```
<li><a href="#" >black</a></li>
<li><a href="#" >blue</a></li>
<li><a href="#" >red</a></li> etc. 
```

我需要为每个链接添加一个 onclick 事件，如下例所示：

```
<li><a href="#" onclick="changeColor(newColor)">black</a></li>
<li><a href="#" onclick="changeColor(newColor)">blue</a></li>
<li><a href="#" onclick="changeColor(newColor)">red</a></li> 
```

我需要 onclick 事件来做三件事：

1）将头部的外部css样式表（id为'styleSheet'）更改为与链接所代表的颜色一致的样式表（即黑色有自己的样式表，称为black.css，蓝色有自己的样式表，称为blue.css 等）如果用户单击带有文本“black”的链接，则应加载 black.css，如果用户单击“blue”的链接，则应加载 blue.css，等等。

2）以与样式表相同的方式更改页面上显示的图像（id为'selectedImg'）（即每种颜色都有自己的图像。黑色有一个名为black.jpg的图像，蓝色有一个名为blue.jpg 等）。如果用户单击“黑色”链接，则应显示 black.jpg。如果用户点击链接“蓝色”，则应显示 blue.jpg 等。

3）更改显示在图像右侧的段落文本（段落的文本）（每种颜色都有与之关联的特定文本（即黑色有`var black = "here is the text that goes to the right of the black picture";`蓝色有一个`var blue = "here is the text that goes to the right of the blue picture";`等）。如果用户点击链接对于“黑色”，分配给函数（）中的变量“黑色”的文本`var black = "some text for black";`应显示在图像的右侧，等等。

这一切都需要在不离开默认页面的情况下完成（即链接不会去任何地方，这三个事件发生在同一页面上，具体取决于您单击的链接）。

我是 javascript 的极端新手。所以如果你这么好心给我帮助，你不能给我任何先进的技术。

我可以使用的唯一 javascript“函数”是：`onclick`, `this`, `childNodes`, `firstChild`, `getElementById()`, `getElementsByTagName()`,`setAttribute()`和某种简单的循环或 if 语句。

就像我说的，我必须使用一个只有一个参数的函数，并且 onclick 事件必须执行上面列出的所有三个更改。无法再创建任何函数或参数。那是我唯一可以使用的。这是HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1      /DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Color Theory</title>
<link id='styleSheet' href="css/base_styles.css" rel="stylesheet" type="text/css" />
<script src="events.js" type="text/javascript"></script>
</head>

<body>
<h1>Color Theory 101</h1>
<ul id="navbar">
<li><a href="#">black</a></li>
<li><a href="#">blue</a></li>
<li><a href="#">brown</a></li>
<li><a href="#">green</a></li>
<li><a href="#">orange</a></li>
<li><a href="#">pink</a></li>
<li><a href="#">purple</a></li>
<li><a href="#">red</a></li>
<li><a href="#">white</a></li>
<li><a href="#">yellow</a></li>
</ul>
<h2>Pick a Color</h2>
<img src="images/color_theory.jpg" alt="color theory" name="selectedImg" `enter code here`id="selectedImg"  />
<p id="facts">Colors hold many different meanings in different cultures. Click a link above to learn more.</p>
</body>
</html> 
```

非常感激任何的帮助。我知道如何分别做这三件事，但我不知道如何用同一个函数只使用一个参数同时做这三件事。

***** 编辑当前代码***** HTML:**

 **```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Color Theory</title>
<link id='styleSheet' href="css/base_styles.css" rel="stylesheet" type="text/css" />
<script src="events.js" type="text/javascript"></script>
</head>

<body>
<h1>Color Theory 101</h1>

<ul id="navbar">
  <li><a href="black" onclick="changeColor(this)">black</a></li>
  <li><a href="blue" onclick="changeColor(this)">blue</a></li>
  <li><a href="brown" onclick="changeColor(this)">brown</a></li>
  <li><a href="green" onclick="changeColor(this)">green</a></li>
  <li><a href="orange" onclick="changeColor(this)">orange</a></li>
  <li><a href="pink" onclick="changeColor(this)">pink</a></li>
  <li><a href="purple" onclick="changeColor(this)">purple</a></li>
  <li><a href="red" onclick="changeColor(this)">red</a></li>
  <li><a href="white" onclick="changeColor(this)">white</a></li>
  <li><a href="yellow" onclick="changeColor(this)">yellow</a></li>
</ul>
<h2>Pick a Color</h2>
<img src="images/color_theory.jpg" alt="color theory" name="selectedImg" id="selectedImg"  />
<p id="facts">Colors hold many different meanings in different cultures. Click a link above to learn more.</p>
</body>
</html> 
```

JAVASCRIPT：

```
function changeColor(newColor) {

    var alertTest = newColor.getAttribute('href');
    var styleSheet = document.getElementById('styleSheet');
    var newStyle = styleSheet.setAttribute('href', newColor + '.css');
    var selectedImg = document.getElementById('selectedImg');
    var newImage = selectedImg.setAttribute('src', newColor + '.jpg');

    var black = "Black absorbs all light in the color spectrum. It is often used as a symbol of menace or evil, but it is also popular as an indicator of power. It is used to represent treacherous characters such as Dracula and is often associated with witchcraft. Black is associated with death and mourning in many cultures. It is also associated with unhappiness, sexuality, formality, and sophistication. In ancient Egypt, black represented life and rebirth. Consider how black is used in language: Black Death, blackout, black cat, black list, black market, black tie, black belt.";

    var white = "White represents purity or innocence. It is bright and can create a sense of space or add highlights. White is also described as cold, bland, and sterile. Rooms painted completely white can seem spacious, but empty and unfriendly. Hospitals and hospital workers use white to create a sense of sterility.";

    var red = "Red is a bright, warm color that evokes strong emotions. It is associated with love, warmth, and comfort. Red is also considered an intense, or even angry, color that creates feelings of excitement or intensity. Consider how red is used in language: redneck, red-hot, red-handed, paint the town red, seeing red.";

    var blue = "Blue is described as a favorite color by many people and is the color most preferred by men. It calls to mind feelings of calmness or serenity. It is often described as peaceful, tranquil, secure, and orderly. Blue can also create feelings of sadness or aloofness. It is often used to decorate offices because research has shown that people are more productive in blue rooms. Blue is one of the most popular colors, but it is one of the least appetizing. Some weight loss plans even recommend eating your food off of a blue plate. Blue rarely occurs naturally in food aside from blueberries and some plums. Also, humans are geared to avoid foods that are poisonous and blue coloring in food is often a sign of spoilage or poison. Blue can also lower the pulse rate and body temperature. Consider how blue is used in language: blue moon, blue Monday, blue blood, the blues, and blue ribbon.";

    var green = "Green is a cool color that symbolizes nature and the natural world. It also represents tranquility, good luck, health, and jealousy. Researchers have also found that green can improve reading ability. Some students may find that laying a transparent sheet of green paper over reading material increases reading speed and comprehension. Green has long been a symbol of fertility and was once the preferred color choice for wedding gowns in the 15th-century. Even today, green M & M's (an American chocolate candy) are said to send a sexual message. Green is often used in decorating for its calming effect. For example, guests waiting to appear on television programs often wait in a 'green room' to relax. Green is thought to relieve stress and help heal. Those who have a green work environment experience fewer stomachaches. Consider how green is used in language: green thumb, green with envy, greenhorn.";

    var yellow = "Yellow is a bright that is often described as cheery and warm. It is also the most fatiguing to the eye due to the high amount of light that is reflected. Using yellow as a background on paper or computer monitors can lead to eyestrain or vision loss in extreme cases. Yellow can also create feelings of frustration and anger. While it is considered a cheerful color, people are more likely to lose their tempers in yellow rooms and babies tend to cry more in yellow rooms. Yellow can also increase the metabolism. Since yellow is the most visible color, it is also the most attention-getting color. Yellow can be used in small amount to draw notice, such as on traffic sign or advertisements.";

    var purple = "Purple is the symbol of royalty and wealth. Purple also represents wisdom and spirituality. Purple does not often occur in nature, it can sometimes appear exotic or artificial.";

    var brown = "Brown is a natural color that evokes a sense of strength and reliability. It can also create feelings of sadness and isolation. Brown brings to mind feeling of warmth, comfort, and security. It is often described as natural, down-to-earth, and conventional, but brown can also be sophisticated.";

    var orange = "range is a combination of yellow and red and is considered an energetic color. Orange calls to mind feelings of excitement, enthusiasm, and warmth. Orange is often used to draw attention, such as in traffic signs and advertising.";

    var pink = "Pink is essentially a light red and is usually associated with love and romance. It is thought to have a calming effect. One shade known as 'drunk-tank pink' is sometimes used in prisons to calm inmates. Sports teams sometimes paint the opposing teams locker room pink to keep the players passive and less energetic. While pink's calming effect has been demonstrated, researchers of color psychology have found that this effect only occurs during the initial exposure to the color. When used in prisons, inmates often become even more agitated once they become accustomed to the color.";

    if (newColor === 'black') {
        factsText = black;
    } else if (newColor === 'blue') {
        factsText = blue;
    } else if (newColor === 'brown') {
        factsText = brown;
    } else if (newColor == 'green') {
        factsText = green;
    } else if (newColor === 'orange') {
        factsText = orange;
    } else if (newColor === 'pink') {
        factsText = pink;
    } else if (newColor === 'purple') {
        factsText = purple;
    } else if (newColor === 'red') {
        factsText = red;
    } else if (newColor === 'white') {
        factsText = white;
    } else {
        factsText = yellow;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T02:43:27.283

我会做这样的事情

```
<li><a href="#" onclick="changeColor(this.childNodes[0].nodeValue)">blue</a></li>
<li><a href="#" onclick="changeColor(this.childNodes[0].nodeValue)">black</a></li>
<li><a href="#" onclick="changeColor(this.childNodes[0].nodeValue)">yellow</a></li>
<li><a href="#" onclick="changeColor(this.childNodes[0].nodeValue)">green</a></li> 
```

ETC...

和 javascript

```
var black = "here is the text that goes to the right of the black picture"; 
var blue = "here is the text that goes to the right of the blue"; 
//etc
function changeColor(color)
{

    document.getElementById('styleSheet').setAttribute('href', color + '.css');
    document.getElementById('selectedImg').setAttribute('src', color + '.jpg');
    document.getElementById('facts').innerHTML = window[color];

} 
```

编辑

根据评论对 javascript 稍作修改

```
function changeColor(color)
    {
        var black = "here is the text that goes to the right of the black picture"; 
        var blue = "here is the text that goes to the right of the blue"; 
        //etc

        var textToShowInParagraph;
        document.getElementById('styleSheet').setAttribute('href', color + '.css');
        document.getElementById('selectedImg').setAttribute('src', color + '.jpg');

        if (color === 'black')
        {
             textToShowInParagraph = black;
        }
        else if (color === 'blue')
        {
              textToShowInParagraph = blue;
        } else if //con....

        document.getElementById('facts').childNodes[0].nodeValue = textToShowInParagraph;

    } 
```

或使用 switch 语句

```
 function changeColor(color)
        {
            var black = "here is the text that goes to the right of the black picture"; 
            var blue = "here is the text that goes to the right of the blue"; 
            //etc

            var textToShowInParagraph;
            document.getElementById('styleSheet').setAttribute('href', color + '.css');
            document.getElementById('selectedImg').setAttribute('src', color + '.jpg');

            switch (color) {
                case "black":
                    textToShowInParagraph = black;
                    break;
                case "blue":
                    textToShowInParagraph = blue;
                    break;
                //con..
                default:
                    break;
             }

            document.getElementById('facts').childNodes[0].nodeValue = textToShowInParagraph;

        } 
```

或者您可以使用一些局部对象变量范围来做与第一个类似的事情，其中​​变量是包含函数的属性而不是窗口（但这可能对您来说太远了，基于您非常奇怪的限制 -没有把握？？）

例如

```
function changeColor(color)
{
    this.black = "here is the text that goes to the right of the black picture"; 
    this.blue = "here is the text that goes to the right of the blue"; 
    //etc       

    document.getElementById('styleSheet').setAttribute('href', color + '.css');
    document.getElementById('selectedImg').setAttribute('src', color + '.jpg');
    document.getElementById('facts').childNodes[0].nodeValue = this[color];
 } 
```

根据问题编辑当前代码编辑

首先，我不会将颜色值存储在 a 标签的 href 中。浏览器希望找到一个有效的 url，或在那里找到一个锚点（即[http://somewhere.com](http://somewhere.com)或 #footer）。放# 是OKish，这将导致一个空的锚导航（即点击不会去任何地方）。因此，首先将 a 标签更改为以下内容。

```
<a href="#" onclick="changeColor(this)">yellow</a> 
```

接下来是在 javascript 函数中，我会更改为更像这样：

```
function changeColor(callingATag) {

    //get the newColor from the calling a tags child text node
    var newColor = callingATag.childNodes[0].nodeValue;

    //set the stylesheet href
    document.getElementById('styleSheet').setAttribute('href', newColor + '.css');
    // No need to set variables, can do it in one line, and the return value from 
    // setAttribute is undefined anyway

    // Set the img src attribute
    document.getElementById('selectedImg').setAttribute('src', newColor + '.jpg');
    //Same as above

    //Color text description variables fine
    var black = //etc.. etc.. con...

    //Color test to set text - fine but NOTE you had not declared the 
    // factsText variable, and in you code you don't do 
    // anything with it afterwards
    var factsText;
    if (newColor === 'black') {
        factsText = black;
    //etc.. etc..

    //then set the facts element text
    document.getElementById('facts').childNodes[0].nodeValue = factsText;

} 
```

有几点需要注意。如果您对 setAttribute 的任何调用失败，则该函数的其余部分很可能会失败。此外，如果元素中没有文本，您将没有 .childNode[0].nodeValue，您将不得不使用 appendChild 来创建子节点。

另一个说明，我想向您介绍jsFiddle，一个Web开发人员小沙箱，实验工具，[http://jsfiddle.net](http://jsfiddle.net)

为了进一步详细说明，我为您做了一个小提琴，在 chrome 和 firefox 中进行了测试并且工作正常。不完全是您需要的代码，但是（即没有任何样式表或图像要更改）但原理是相同的。下方链接：

[http://jsfiddle.net/4chVw/5/](http://jsfiddle.net/4chVw/5/)**

# ember.js - DS.Model 日期属性解析日期 (YYYY-MM-DD) 不正确

> ID：12523373
> 
> 赞同：10
> 
> 时间：2012-09-21T02:09:34.713
> 
> 标签：ember.js, ember-data

我的 DS.Model 以“YYYY-MM-DD”格式解析日期时遇到问题。他们总是落后一天。

这是一个例子：

[http://jsfiddle.net/ZUV8v/](http://jsfiddle.net/ZUV8v/)

在控制台上使用 Date 对象我得到类似的结果

```
> new Date('2012-09-20')
Wed Sep 19 2012 17:00:00 GMT-0700 (PDT) 
```

这是 ember 错误、javascript 错误或 Chrome 错误，还是我遗漏了什么？

OSX 10.7 上的 Chrome 版本 21.0.1180.89

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T14:40:33.890

前几天我遇到了这个。

根据[ECMAScript 规范](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)15.9.1.15

> 所有数字必须以 10 为底。如果 MM 或 DD 字段不存在，则使用“01”作为值。如果 HH、mm 或 ss 字段不存在，则使用“00”作为值，并且不存在的 sss 字段的值为“000”。缺席时区偏移的值为“Z”。

```
new Date('2012-09-20') 
```

是相同的

```
new Date("2012-09-20T00:00:00.000Z") 
```

然后控制台输出您当地时区的值。

# github - 如何防止 Github 中的开发分支同步到 AppHarbor

> ID：12523375
> 
> 赞同：0
> 
> 时间：2012-09-21T02:09:42.343
> 
> 标签：github, appharbor

我在 Github 中有一个 master 和一个 development 分支，并且存储库被配置为将更改同步到 AppHarbor。[我按照支持站点](http://support.appharbor.com/kb/getting-started/deploying-your-first-application-using-git)的指定配置了主分支。

有没有办法可以隔离开发分支，只从主分支推送？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T02:28:50.223

AppHarbor 将构建所有分支，这些分支非常适合[持续集成的目的](http://blog.appharbor.com/2012/09/06/github-commit-status-api-now-supported)。[您可以通过设置跟踪分支](http://support.appharbor.com/kb/getting-started/managing-environments)来指定要部署的分支。

# r - R中的分段样本平均值

> ID：12523379
> 
> 赞同：-2
> 
> 时间：2012-09-21T02:10:25.650
> 
> 标签：r, segments

> **可能重复：**
> [R 分组函数：sapply vs. lapply vs. apply。vs. tapply vs. by vs. aggregate vs.](https://stackoverflow.com/questions/3505701/r-grouping-functions-sapply-vs-lapply-vs-apply-vs-tapply-vs-by-vs-aggrega)

```
uptake  time    treatment
2.08    0   1
2.07    0   1
2.09    0   1
2.06    0   1
2.17    1   1
2.15    1   1
2.16    1   1
2.15    1   1
2.08    0   2
2.09    0   2
2.07    0   2
2.04    0   2
2.03    1   2
2.04    1   2
2.01    1   2
2.08    1   2 
```

我的数据现在看起来像这样，我们想知道不同时间每种治疗的平均值。例如，治疗中的平均值 = 1 和时间 = 0 等，并显示在 R 中的一个新变量上。R 中是否有任何方便的代码可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T02:15:52.063

@mnel 是正确的，这是第一条评论——这几乎是这里所有常见问题解答之母。

也就是说，这是一个简单的`plyr`示例，供您参考数据所在的位置`data`：

```
R> ddply(data, .(time, treatment), "colMeans")
  uptake time treatment
1 2.0750    0         1
2 2.0700    0         2
3 2.1575    1         1
4 2.0400    1         2
R> 
```

# c# - Excel 中的范围验证器，带有自定义消息文本

> ID：12523384
> 
> 赞同：0
> 
> 时间：2012-09-21T02:11:31.733
> 
> 标签：c#, excel, validation, vsto, customization

我有以下代码可以使用自定义文本进行 Excel 单元格验证。

```
var cellValues = activeSheet.Range[columnLetterValue + startingRow, Type.Missing];
cellValues.Validation.Add(XlDVType.xlValidateCustom, XlDVAlertStyle.xlValidAlertInformation, XlFormatConditionOperator.xlBetween, cellValues.Value2, Type.Missing);
cellValues.Validation.IgnoreBlank = true;
cellValues.Validation.ErrorTitle = "Custom error title";
cellValues.Validation.ErrorMessage = "Custom error message description";
cellValues.Validation.ShowError = true;
cellValues.Validation.ShowInput = false; 
```

在调试设置 ErrorTitle 或 ErrorMessage 的行时，`'System.Runtime.InteropServices.COMException'`会抛出一个。

堆栈跟踪：

> {System.Runtime.InteropServices.COMException (0x800A03EC)：来自 HRESULT 的异常：
> System.RuntimeType.ForwardCallToInvokeMember 的 0x800A03EC(String memberName, BindingFlags flags, Object target, Int32[] aWrapperTypes, MessageData& msgData) 在
> Microsoft.Office.Interop.Excel。 Validation.set_ErrorTitle（字符串）

我在网上查看并发现了几个例子表明这是可能的： [使用 C# 使用 Excel 进行范围验证](https://stackoverflow.com/questions/3317307/range-validation-with-excel-using-c-sharp)

我什至在 Excel 中录制了一个宏，它与“VBA”等效代码一起使用：

```
 ActiveCell.FormulaR1C1 = "Custom"
    Range("A1").Select
    With Selection.Validation
        .Delete
        .Add Type:=xlValidateCustom, AlertStyle:=xlValidAlertInformation, _
        Operator:=xlBetween, Formula1:="Custom"
        .IgnoreBlank = True
        .InCellDropdown = True
        .InputTitle = ""
        .ErrorTitle = "UDF Title"
        .InputMessage = ""
        .ErrorMessage = "The message"
        .ShowInput = False
        .ShowError = True
    End With
End Sub 
```

I've also tried different combinations of XlDVType and XlFormatConditionOperator but that didn't seem to make any difference in setting the custom messagebox text.

**Does anyone know how to set a Validation rule with custom ErrorTitle and ErrorMessage?**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T03:31:21.993

The problem was due to setting a `Validation.ErrorTitle` to a range that didn't have a Validation rule.

# sharepoint-2010 - 如何将外部用户添加到 FBA？

> ID：12523387
> 
> 赞同：1
> 
> 时间：2012-09-21T02:12:13.150
> 
> 标签：sharepoint-2010, membership-provider

假设我有 10 个用户（姓名、电子邮件、电话）。如何将它们添加到 FBA，以便他们可以使用配置为 FBA 的 sharepoint？

我的意思是我需要去 SQL 框并添加每个成员。（我从站点权限中知道您可以添加用户，但如果用户在我这样做之前应该存在于 sql 成员数据库中，我不会这样做）。

我去了网站集>权限，但没有看到“添加外部用户”或添加 fba 用户的任何内容。

共享点 2010；亚马逊物流

microsoft .net 目录中有工具吗？我无法下载并安装此[https://sharepoint2010fba.codeplex.com/documentation](https://sharepoint2010fba.codeplex.com/documentation)？codeplex 功能，所以这不是一个选项。此外，我们必须预先设置此用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T06:40:35.797

SharePoint 确实支持基于表单的身份验证，但 FBA 并不是开箱即用的。

如果您的 FBA 实施不提供 UI 来管理用户：

*   直接在会员数据库中添加/修改/删除它们

*   使用 ASP.NET 网站管理工具（您可以通过单击Visual Studio的*网站菜单中的**ASP.NET 配置*或不使用 VS -[不使用 Visual Studio 管理 ASP.NET 成员资格和角色](http://leastprivilege.com/2012/06/28/managing-asp-net-membership-and-roles-without-visual-studio/)来运行它）。

# objective-c - OSX 10.6.8 上的应用程序返回退出代码 173，但不提示输入 iTunes 凭据

> ID：12523391
> 
> 赞同：3
> 
> 时间：2012-09-21T02:13:06.290
> 
> 标签：objective-c, macos, app-store

我有一个在应用商店中列出的应用，我正在尝试在 OSX 10.6.8 上对其进行测试。不幸的是，我的收据验证码似乎阻止了该应用程序运行。

来自：http: [//developer.apple.com/library/mac/releasenotes/General/ValidateAppStoreReceipt/_index.html#//apple_ref/doc/uid/TP40010573-CH1-SW11](http://developer.apple.com/library/mac/releasenotes/General/ValidateAppStoreReceipt/_index.html#//apple_ref/doc/uid/TP40010573-CH1-SW11)

> 启动应用程序后，会发生以下情况：
> 
> *   您的应用程序无法验证其收据，因为没有收据存在，并且它以状态 173 退出。
> *   系统解释退出状态并尝试获取有效收据。假设您的应用程序签名证书有效，系统会为应用程序安装有效收据。
> *   系统可能会提示您输入 iTunes 凭据。系统重新启动您的应用程序，并且您的应用程序成功验证了收据。

这在 OSX 10.8 和 10.7 上完美运行，但在 10.6 上，当应用程序以代码 173 退出时（在 Console.app 中验证），我永远不会提示我输入 iTunes 凭据。

知道发生了什么吗？提前致谢！

更新：另见[https://developer.apple.com/library/mac/releasenotes/General/ValidateAppStoreReceipt/_index.html#//apple_ref/doc/uid/TP40010573-CH1-SW7](https://developer.apple.com/library/mac/releasenotes/General/ValidateAppStoreReceipt/_index.html#//apple_ref/doc/uid/TP40010573-CH1-SW7)

# wordpress - CodeIgniter 和 WordPress 集成路由

> ID：12523393
> 
> 赞同：2
> 
> 时间：2012-09-21T02:13:30.517
> 
> 标签：wordpress, codeigniter, routing

我有 2 个独立的站点，1 个是 CI 会员管理系统，另一个是 WP 公共和会员区站点。它们托管在不同的域和服务器上。

我们的要求是通过 CI 以编程方式在 WP 站点上添加/编辑用户，同时保护 CI 免受 WP 的影响。为了实现这一点，我们在与 CI 相同的安装上创建了 WP 站点的副本，但将其指向实时 WP 数据库并阻止所有公共访问此副本。这样我们就可以在本地使用 WP 功能，允许 CI 对 WP 进行读/写访问，并保持 CI 系统的安全，最大限度地降低通过 WP 攻击的风险。

我已经添加到 CI index.php：`require_once ./wordpress/wp-load.php;` 效果很好（修复了**site_url**函数之后），我们现在正在添加和编辑用户 YAY！但是...对某些 CI 功能的 AJAX 请求：-`/members/getMemberJSON`正在返回**404**（在不加载 WP 时工作正常。我认为由于 WP 网站`/members/%username%`页面已经存在。

所以问题是如何防止 WP 覆盖 CI 路由。如果你知道怎么做，我相信这很简单 - 任何智能互联网的帮助都非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T22:56:18.440

我认为有几个选择：

1）您需要重命名控制器或控制器方法，以免与 WP 页面冲突。

**或者**

2) 您将 .htaccess 配置为忽略所有文件名或文件夹请求，并将它们重写为 CI 兼容查询。

东西的顺序

```
RewriteRule ^members/(.*?)$ /members/getMemberJSON/$1 [R] 
```

**注意：**这完全未经测试，只是一个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-29T07:19:46.567

```
I modified the Codeigniter index.php one.

======================================
require_once 'wp-load.php';

above this line 
require_once BASEPATH.'core/CodeIgniter.php';

Use Single .htaccess file in root wordpress folder

<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /wordpressFolderName/CIFolderName/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /wordpressFolderName/CIFolderName/index.php [L]
</IfModule> 
```

# javascript - 重新渲染视图

> ID：12523394
> 
> 赞同：0
> 
> 时间：2012-09-21T02:13:31.860
> 
> 标签：javascript, jquery, backbone.js, handlebars.js, mustache

事件发生后重新渲染视图的最佳方式是什么（例如提交注释）。在下面的代码中，我想重新渲染视图以显示刚刚添加的注释。

```
var NotesView = SectionBaseView.extend({
        model: app.models.Note,
        events: {
            'submit': 'Notes'
        },
        Notes: function (e) {
            e.preventDefault();

            var details = new this.model($('form').serializeObject());
            details.url = '/email/Notes';

            details
                .save()
                .done(function () {                
                    app.notifySuccess('Note added successfully.');
                });           
            views['#Notes'].render();                    
        }       
    }); 
```

Notes 视图在 document.ready 函数中初始化如下：

```
views['#Notes'] = new NotesView({ el: '#Notes', template: app.templates.Notes }); 
```

我尝试使用 views['#Notes'].render(); 但这似乎不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T04:29:42.510

渲染的默认实现是无操作。使用从模型数据呈现视图模板的代码覆盖此函数，并使用新的 HTML 更新 this.el。一个好的约定是在渲染结束时返回 this 以启用链式调用。[文档](http://backbonejs.org/#View-render)

```
var NotesView = SectionBaseView.extend({
        model: app.models.Note,
        events: {
            'submit': 'Notes'
        },

        render : function(){
              //your code
              return this;
        },

        Notes: function (e) {
            var that = this;
            e.preventDefault();

            var details = new this.model($('form').serializeObject());
            details.url = '/email/Notes';

            details
                .save()
                .done(function () {                
                    app.notifySuccess('Note added successfully.');
                });           
            that.render();                    
        }       
    }); 
```

在 document.ready 上

```
views['#Notes'] = new NotesView({ el: '#Notes', template: app.templates.Notes });
views['#Notes'].render(); 
```

# perl - eval将html插入到运行代码的perl cgi脚本中？

> ID：12523395
> 
> 赞同：2
> 
> 时间：2012-09-21T02:13:40.900
> 
> 标签：perl, import, insert, eval

```
#!/usr/bin/perl

open FILE, '<', 'evfile';
@file = <FILE>;

$char1 = "123456";
$char2 = "holy cow"; 
```

我希望 FILE 的代码在这里弹出并显示变量

```
 $char1 and $char2 
```

我试过以下

```
#1
{eval @file;}

#2
{print (eval @file);}
#3
{for(@file){
print (eval $_;);
}
} 
```

我已经为 FILE 尝试了两种不同的方法，使文件成为带有 print 语句的 perlscript，而只是一个 HTML 文件

### 一个

```
#!/usr/bin/perl
print BBBBXM
<html>
 <head> 
 <title>A Simple Perl CGI</title>
 </head>
 <body>
 <h1>A Simple Perl CGI</h1>  

 <p>$char1   </p>
 <p> $char2 </p> 
</body>
 </html>
BBBBXM 
```

### 乙

```
html>
 head> 
 title>A Simple Perl CGI</title>
 /head>
 body>
 h1>A Simple Perl CGI</h1>  

 p>$char1   </p>
 p> $char2 </p> 
/body>
 /html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T02:23:17.957

如果您正在寻找成熟稳定的模板系统，请查看大量可用的 CPAN 模块，例如[Mason](http://search.cpan.org/~jswartz/Mason-2.20/lib/Mason.pm)。

如果你是DIY类型：

`eval`将作为 Perl 代码给出的*字符串*（不是数组）处理。显然，HTML 不符合 Perl 的条件。

要插入某个占位符，例如某种`$name`语法，我会这样做：

```
# hashes are better
my %replacements = (
  char1 => "123456",
  char2 => "holy cow",
);

foreach my $line (@file) {
  $line =~ s{\$(\w+)}{
    exists $replacements{$1}
    ? $replacements{$1}      # substitute, if replacement is defined
    : "$" . $1               # else return the placeholder name
  }ge;                       # /e/xecute replacement
  print $line;
} 
```

# vb.net - NullReferenceException 添加到父类中的列表

> ID：12523409
> 
> 赞同：2
> 
> 时间：2012-09-21T02:16:19.477
> 
> 标签：vb.net, class, inheritance

我正在开发一个将用户添加到 Active Directory 中的组的应用程序，它有两个类：ADUser 和 Student，它们继承自 ADUser。

```
public class ADUser
    property UserID as string
    property MemberOf as new List(Of String)
    (etc)
end class

public class Student inherits ADUser
    property subjects as new list(Of Subject) 'Subject is a class of multiple strings
end class 
```

我试图将主题名称从主题列表复制到 MemberOf 列表，这会导致 NullReferenceException（对象引用未设置为对象的实例）。以下代码在 me.MemberOf.Add 行上生成错误：

```
 Function ConvertSubjectsToGroupMembership() As Boolean
        Try
            For Each s As Subject In Subjects
                Me.MemberOf.Add(String.Format("t.{0}", s.ShortName).ToString)
            Next
            Return True

        Catch ex As Exception
            Return False
        End Try
    End Function 
```

我对继承的理解是，在创建 Student 对象时应该创建 MemberOf 列表，但情况似乎并非如此。

任何帮助表示赞赏。

编辑：我设法通过修改函数来创建一个列表（字符串）来解决这个问题，然后将其复制到 MemberOf 属性：

```
 Function ConvertSubjectsToGroupMembership() As Boolean
    Dim SubjectShortNameList As New List(Of String)

    For Each s As Subject In Subjects
        SubjectShortNameList.Add(String.Format("t.{0}", s.ShortName).ToString)
    Next

    Try
        MemberOf = SubjectShortNameList
        Return True

    Catch ex As Exception
        Return False
    End Try
End Function 
```

它有效，但我确信有更好的方法来做到这一点。我期待阅读其他人的答案/意见！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:38:23.917

看起来您正在代码中的其他地方取消 MemberOf 。假设 ConvertSubjectsToGroupMembership 是 Student 上的一个函数，我运行了代码并且运行良好。您可以尝试扩展属性，以便设置断点。这将允许您找出引入 Null 的位置。

```
Public Class ADUser
    Property UserID As String
    Private _MemberOf As New List(Of String)
    Public Property MemberOF As List(Of String)
        Get
            Return _MemberOf
        End Get
        Set(ByVal value As List(Of String))
            _MemberOf = value ***'breakpoint here***
        End Set
    End Property
End Class 
```

# javascript - 表单未通过验证时停止提交

> ID：12523413
> 
> 赞同：1
> 
> 时间：2012-09-21T02:16:45.457
> 
> 标签：javascript, forms, validation

验证有效，当电子邮件地址无效时会弹出警报，但是在您单击“确定”后它会继续并提交它。如何阻止它处理操作？

代码示例：

```
<input type="submit" onclick="validate()" />

function validate() {
var email = $('input[name=email]').val();
if (!/(.+)@(.+){2,}\.(.+){2,}/.test(email)) {
  alert('Please enter a valid email address');
  return false;
}
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T02:19:13.373

```
onclick="return validate();" 
```

那么`return true`如果验证成功，`false`如果没有......

您还可以将验证附加到表单本身：

```
<form onsubmit="return validate();"> 
```

或与[jquery](http://api.jquery.com/submit/)：

```
$('form').submit(function() {
   // validate
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T02:21:03.847

您需要绑定表单标签的 onsubmit 事件，即

```
<form onsubmit="return validate();" >...</form> 
```

# java - 设置对象的颜色

> ID：12523415
> 
> 赞同：6
> 
> 时间：2012-09-21T02:16:52.203
> 
> 标签：java, string, gridworld

我在我的 AP 计算机科学课程中使用 GridWorld，我们正在做的部分工作是更改错误（对象）的颜色。我找到了一种非常基本的方法来做到这一点，但我试图合并字符串以允许用户输入他希望错误的颜色，而不必输入 RGB 的数值。通过输入“red”并让字符串存储它，我可以让字符串值成为我想要的颜色。但是我怎样才能让那个字符串翻译成颜色呢？我不确定我的措辞是否足够清楚，但我附上了我的代码，希望有人能理解并提供帮助。

```
Color red = new Color (255, 0, 0);
Color green = new Color (0, 255, 0);
Color blue = new Color (0, 0, 255);

System.out.println("What color would you like the first bug to be? (red, green, blue)");
String name = "color1";
String color1 = keyboard.next();

if (color1 == "red")
{
   world.add (new Location (bugx1, bugy1), new Bug(red));
}
if (color1 == "blue")
{
   world.add (new Location (bugx1, bugy1), new Bug(blue));
}
if (color1 == "green")
{
   world.add (new Location (bugx1, bugy1), new Bug(green));
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T02:28:01.117

这个老栗子...

在 java 中比较字符串时，必须使用`.equals()`. `==`仅当两个操作数都是相同的确切对象时，该运算符才为真。试试这个：

```
if (color1.equals("red")) 
```

这是熟悉 javascript 的程序员所犯的常见“错误”，`==`操作员将按照您编写的代码工作。恕我直言，“错误”实际上是在 java 语言规范中——它们应该允许`==`执行`equals()`并`===`用于身份比较（实际上很少使用）。

* * *

要正确执行此操作，我建议使用`enum`颜色。那么您的代码将只有一行：

```
public enum BugColor {
    red(255, 0, 0),
    green(0, 255, 0),
    blue(0, 0, 255);

    private final Color color;

    BugColor(int r, int g, int b) {
        color = new Color(r, g, b);
    }

    public Color getColor() {
        return color;
    }
} 
```

然后简单地说：

```
String color1 = keyboard.next();
world.add (new Location (bugx1, bugy1), new Bug(BugColor.valueOf(color1).getColor())); 
```

* * *

如果`Color`是一个接口，您可以通过制作来简化和改进您的代码`enum BugColor extends Color`- 我将把实现作为练习留给您。

# regex - Ruby Puppet 正则表达式字符串匹配

> ID：12523423
> 
> 赞同：1
> 
> 时间：2012-09-21T02:17:45.277
> 
> 标签：regex, case, puppet

我对 ruby​​ 有点陌生，并且已经进行了大量的谷歌搜索，但似乎无法弄清楚如何匹配这个特定的模式。我使用[了 rubular.com](http://rubular.com)，似乎找不到简单的匹配方法。这是我正在尝试做的事情：

我有几种类型的主机，它们采用这种形式：

示例主机组

```
host-brd0000.localdomain
host-cat0000.localdomain
host-dog0000.localdomain
host-bug0000.localdomain 
```

接下来我有一个案例陈述，我想排除错误（谁不正确？）。我想做这样的事情来匹配一系列字符。但是，它从 host-b、host-c、host-d 开始匹配，并且只匹配一个字符，就像我做了`[brdcatdog]`.

```
case $hostgroups {  #variable takes the host string up to where the numbers begin
# animals to keep
             /host-[["brd"],["cat"],["dog"]]/: {
             file {"/usr/bin/petstore-friends.sh":
                owner   => petstore,
                group   => petstore,
                mode    => 755,
                source  => "puppet:///modules/petstore-friends.sh.$hostgroups",
             }
} 
```

我可以做类似的事情，`[bcd][rao][dtg]`但它看起来不是很干净，并且会匹配我不想要的诸如“bad”“cot”“dat”“crt”之类的废话。

有没有一种巧妙的使用方式`\A`而`[]`我错过了？

谢谢你的帮助。

-伍蒂尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T03:46:44.370

如何使用负前瞻？

```
host-(?!bug).* 
```

这是[RUBULAR 永久链接](http://rubular.com/r/SzbtVou1aK)，匹配除那些**讨厌的错误之外的所有内容！**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T03:48:39.593

这是你要找的吗？

```
host-(brd|cat|dog) 
```

（按照 gtgaxiola 的例子，这里是[Rubular 永久链接](http://rubular.com/r/79WkJdMfUH "Rubular 固定链接")）

# javascript - 在谷歌地图中调整高度

> ID：12523424
> 
> 赞同：1
> 
> 时间：2012-09-21T02:17:45.977
> 
> 标签：javascript, api, google-maps

我从 Google Map API 获得了一个用于调整高度“地图”的示例代码

```
 var recalcHeight = function() {
    $("#map").height($(window).height() - 100); //Example
    map && google.maps.event.trigger(map, 'resize'); //(*) Don't understand this line
}; 
$(window).resize(recalcHeight);
recalcHeight(); 
```

好的，在我的 php 文件中，我有一个 div 标签： 1\. 我不明白上面的 (*) 行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T12:31:34.297

I don't really know what you question is about because you didn't tag it with *Javascript*, but I think if you knew this, you would have asked what `google.maps.event.trigger(X, Y)` did. Plus, I don't know what this has to do with your `div` tags in your PHP files.

## Google Maps API answer

It's simple to find out what `trigger` does here:

> Triggers the given event. All arguments after eventName are passed as arguments to the listeners.

(From the [Google Maps API](https://developers.google.com/maps/documentation/javascript/reference?hl=de#event), I found it in no time)

## Javascript answer

If your question is about this whole `&&` construct, I'll explain it to you:

```
map && google.maps.event.trigger(map, 'resize'); 
```

The `&&` is a logical **AND** with **short-cirquit evaluation** which means:

*   If its first argument is *true*, it evaluates the second argument. [Iff](http://en.wikipedia.org/wiki/If_and_only_if) this is *true* too, it returns *true*.

*   If its first argument is *false*, the whole expression can't become *true*, so it **doesn't even evaluate its second argument** and returns *false* immediately.

This mechanism can be (ab)used to change flow control. If the condition (`&&`'s first argument) is false, the second argument doesn't get evaluated, so it's the same as

```
if (map) {
    google.maps.event.trigger(map, 'resize');
} 
```

I don't know how `map` was initialized, but maybe the event trigger is added only if there's a `map` element.

# ant - 即使 Ant 任务失败，Ant 也成功

> ID：12523430
> 
> 赞同：11
> 
> 时间：2012-09-21T02:18:57.180
> 
> 标签：ant

一定有一个简单的设置我错过了所以请原谅我，但我注意到有两次我的不良 ant 任务不会导致构建失败。例如：

1.  源文件不存在时的 Ant 复制...构建成功

2.  Ant 解压缩，当任务报告“无法写入文件”或类似消息时...构建成功

3.  Ant exec 错误，语法无效...构建成功

**如何保证所有 ant 任务错误都会导致构建失败？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T21:31:23.250

*   `<EXEC>`默认情况下，任务不会失败。您需要启用此功能`failonerror="true"`

*   Ant`<COPY>`任务的失败取决于所使用的资源集合类型。如果您使用`fileset`or `patternset`，那么所有丢失的文件都会被**忽略**。您只能通过使用`filelist`类型或使用参数化的“文件”属性来强制失败。

    因此，您要使用的是：

    ```
    <copy todir="my_dir" file="foo" />

    <copy todir="my_dir" flatten="true">
      <filelist dir="" files="foo" />
    </copy>

    <copy todir="my_dir" flatten="true">
      <filelist dir="">
         <file name="foo" />
         <file name="bar" />
         <file name="zed" />
      </filelist>
    </copy> 
    ```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-21T02:37:35.197

您是否尝试过以下操作：

```
<copy todir="your/path/details" failonerror="true">
</copy>

<zip destfile="your/path/details" whenempty="fail">
</zip>

<exec executable="your/path/details" failonerror="true">
</exec> 
```

# objective-c - 在 iOS 中创建聊天功能 - 通过持续请求

> ID：12523433
> 
> 赞同：4
> 
> 时间：2012-09-21T02:19:55.353
> 
> 标签：objective-c, ios, chat

我的任务是在 iOS 中为我​​们的应用程序创建一个聊天功能。我发现本教程从头开始创建一个聊天应用程序。

[http://www.ibm.com/developerworks/library/x-ioschat/index.html](http://www.ibm.com/developerworks/library/x-ioschat/index.html)

上面的链接很有帮助，但是有一个小问题。在应用程序中，将每 5 秒发出一次请求以寻找新的响应。我的一位同事说，不建议不时向服务器发出请求。

所以我决定寻找其他替代方案。我通过这个[链接](https://stackoverflow.com/questions/6300756/long-polling-in-objective-c)了解了**长轮询**。

据我了解，一旦发出请求，服务器将“保留”该请求，直到出现有趣的事情。这是否意味着一旦向用户抛出响应，请求就会结束？如果这是真的，这意味着将不时提出请求，对吗？

如果是这样的话，谁能告诉我在 iOS 中实现聊天功能的最佳方式是什么？

我的朋友给我看了一个~~AJAX~~ JavaScript代码（我刚发现他也用了一个我不熟悉的插件），其中发出了单个连续请求，即使已经响应，这个请求也不会结束扔给用户。有没有办法在 iOS 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T02:39:33.710

发出 http ajax 请求来发送和接收聊天不是一个好方法。当其他用户按下“发送”时，应显示聊天响应。如果有任何新的响应，我们不能要求用户等待 1 秒来获取。

您必须使用聊天服务器来完成此操作。我希望以下网址会有所帮助。我只是想给你一个使用聊天服务器的想法。

[http://wiki.remobjects.com/wiki/SuperHTTP_Chat_(iOS)*示例*(Xcode)](http://wiki.remobjects.com/wiki/SuperHTTP_Chat_%28iOS%29_Sample_%28Xcode%29)

# ruby-on-rails - 使用 Rails 应用程序推送到 Heroku 时如何忽略文件夹和文件？

> ID：12523435
> 
> 赞同：8
> 
> 时间：2012-09-21T02:20:11.443
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku

我有一个`Rails 3.2.8`应用程序，我不想推送我的`spec`文件夹并`test`登录到 Heroku。我该怎么做？用`staging`遥控器怎么样？

谢谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-21T02:30:38.530

您可以将它们放入 中`.gitignore`，但这会将它们作为一个整体从您的存储库中排除。

更好的解决方案是将它们推送到 Heroku，但阻止 Heroku 将它们部署到您的测功机上。您可以使用[`.slugignore`文件](https://devcenter.heroku.com/articles/slug-compiler#ignoring-files-with-slugignore)配置它。

# c# - 如何将登录信息保存到 XML 文件

> ID：12523436
> 
> 赞同：0
> 
> 时间：2012-09-21T02:20:27.700
> 
> 标签：c#, .net, xml, io

我正在 C# Windows Form .Net 2.0 中创建一个简单登录表单，并且我想将登录名或密码保存到 Xml 文件，这样一旦我提交用户名或密码，我就不必在“文本框”，而是应该在“文本框”中显示我之前提交的用户名或密码，就像我们为“gmail、yahoo、facebook 等”保存用户名或密码一样。它以“登录”形式向我们显示我们保存的用户名或密码，因此我们不必再次输入我们的用户名或密码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T03:02:11.390

更简单的方法，只需使用 XmlSerializer 进行加载/卸载。

```
public class User
{
    public string UserName { get; set; }
    public string Password { get; set; }
}

public void SaveUser(User user)
{
    var ser = new XmlSerializer(typeof(User));
    using(var file = File.OpenWrite(@"c:\myfilepath\user.xml")) 
    {
        ser.Serialize(file, user);
    }
}

public User GetUser(string xmlFile)
{
    var ser = new XmlSerializer(typeof(User));
    User user;
    using (var file = File.OpenRead(xmlFile))
    {
        user = (User)ser.Deserialize(file);
    }
    return user;
} 
```

如果你想保存用户集合，只需序列化一个集合类型，例如，`List<User>.`这会将所有用户保存在 xml 中，并`List<User>`一次将它们全部检索到一个 all 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T05:11:37.840

您可以参考以下文章，该文章解释了如何为您的文本框创建自动完成扩展器：

[http://www.dotnetfunda.com/articles/article225.aspx](http://www.dotnetfunda.com/articles/article225.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T03:02:20.840

从 Xml 文件中读取用户 ID 和密码：

```
XmlDocument doc = new XmlDocument();
        doc.Load(@"c:\test\user.xml");
        XmlNode nodeUserId = doc.SelectSingleNode("/user/UserID");
        XmlNode nodePassword = doc.SelectSingleNode("/user/Password");

        textBox1.Text = nodeUserId.InnerText;
        textBox2.Text = nodePassword.InnerText; 
```

要将用户 ID 和密码保存回 Xml 文件：

```
XmlDocument doc = new XmlDocument();
        doc.Load(@"c:\test\user.xml");
        XmlNode nodeUserId = doc.SelectSingleNode("/user/UserID");
        XmlNode nodePassword = doc.SelectSingleNode("/user/Password");

        nodeUserId.InnerText = textBox1.Text;
        nodePassword.InnerText = textBox2.Text;

        doc.Save(@"c:\test\user.xml"); 
```

# c# - 如何识别运行应用程序的用户

> ID：12523445
> 
> 赞同：0
> 
> 时间：2012-09-21T02:21:52.270
> 
> 标签：c#, .net, asp.net-mvc

我想检查代码如何识别运行应用程序的用户，我想确保应用我在 IIS 中定义的域用户

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T02:29:16.120

我以前用过这个，试试看是否适合你

```
string userName = System.Security.Principal.WindowsIdentity.GetCurrent().Name; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T02:26:35.577

您需要：[HttpContext.Current.User](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.user.aspx)或从控制器访问 HTTP 上下文。

# c++ - std::vector 删除重复项，然后删除另一个向量中的相同索引

> ID：12523446
> 
> 赞同：0
> 
> 时间：2012-09-21T02:22:00.617
> 
> 标签：c++

我知道如何使用 STL 删除 std 向量的重复项

```
vec1.erase(std::unique(vec1.begin(), vec1.end()),vec1.end()); 
```

但是，如果我有一个`vec2`长度`vec1`相同的不同索引，并且我希望删除已删除的相同索引`vec1`怎么办？这样，如果在 vec1 中删除索引 2 、 4 和 6 ，那么在 vec2 中也会删除相同的索引

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T02:42:34.227

也许你想考虑一个不同的数据结构，也许`vector<pair<vec1_type, vec2_type>>`

但这是一种方法 (c++11)

```
std::vector<int> indices(vec1.size());
std::iota(indices.begin(), indices.end(), 0);
indices.erase(std::unique(indices.begin(), indices.end(),
                          [&](int a, int b){ return vec1[a] == vec1[b]; }),
              indices.end());
auto vec1_iterator = vec1.begin();
auto vec2_iterator = vec2.begin();
for (int i : indices) {
  *vec1_iterator++ = vec1[i];
  *vec2_iterator++ = vec2[i];
}
vec1.erase(vec1_iterator, vec1.end());
vec2.erase(vec2_iterator, vec2.end()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T02:46:19.133

复制原始向量，然后遍历这两个向量以搜索匹配项，并在未找到匹配项时从并行向量中删除：

```
vector<int> copy(vec1);
vec1.erase(std::unique(vec1.begin(), vec1.end()),vec1.end());
vector<string> pv = // your "parallel" vector
for (int i = 0 ; i != vec1.size() ; i++) {
    while (copy[i] != vec1[i]) {
        copy.erase(copy.begin()+i);
        pv.erase(pv.begin()+i);
    }    
} 
```

# jquery - 是否可以将 Ninja UI 自动完成附加到现有的输入元素？

> ID：12523448
> 
> 赞同：0
> 
> 时间：2012-09-21T02:22:53.477
> 
> 标签：jquery, user-interface, autocomplete

我想尝试[Ninja UI](http://ninjaui.com)附带的自动完成功能，而不是[Jquery UI](http://jqueryui.com)附带的自动完成功能，但无法从单独的示例中解决如何将其附加到现有输入元素，例如

```
$.ninja.autocomplete(attachMeTo = $("#existing_input"), 其他选项);
```

Ninja UI 中是否存在此功能，如果存在，语法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T04:01:34.423

我明白你在说什么，这似乎有点令人困惑。但是我发现了这个：

创建一个元素来放置它：

```
<p id="autocompleteSamples"></p> 
```

根据他们的示例和您选择的选项或其他方式部署脚本：

```
$autocompleteSample = $.ninja.autocomplete({
  placeholder: 'United States Cities'
}).values(function (event) {
  $.ajax({
    url: 'http://ws.geonames.org/searchJSON',
    dataType: 'jsonp',
    data: {
      country: 'US',
      featureClass: 'P',
      fuzzy: 0,
      maxRows: 10,
      q: event.query
    },
    success: function (data) {
      $autocompleteSample.list({
        values: $.map(data.geonames, function (item) {
          return {
            html: item.name + ', ' + item.adminName1,
            value: item.name + ', ' + item.adminCode1
          };
        }),
        query: event.query
      });
    },
    error: function (request, status, message) {
      $.error(message);
    }
  });
}), 
```

将新制作的 NinjaUI 自动完成附加到您之前创建的元素

```
$(document).ready(function () {
   $('#autocompleteSamples').append($autocompleteSample);
}); 
```

我通过挖掘他们的 scripts.js 文件[http://ninjaui.com/script.js发现了这一点](http://ninjaui.com/script.js)

# java - 使用 EL 在网页上检索 Enum 的 String 值的最佳实践

> ID：12523451
> 
> 赞同：0
> 
> 时间：2012-09-21T02:23:03.847
> 
> 标签：java, string, enums, el

我的对象：

```
public class Account(){
    private String accountName;
    private AccountType accountType; // enum 

    //I customized the getter by doing this...
    public String getAccountType(){
      return accountType.getAccountType();
    }
} 
```

我的 AccountType 枚举：

```
public enum AccountType{
    OLD("Old account"),
    NEW("New account");

    private final String accountType;
    private AccountType(String accountType){
       this.accountType = accountType;
    }
    public String getAccountType(){
       return accountType;
    }

} 
```

我`${account.accountType}`用来检索枚举常量的值。这是正确的方法吗？

我尝试使用`AccountType.valueOf("OLD")`但它返回了`OLD`。

此类事情的最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T03:43:41.840

像这样更改您的枚举类；

```
public enum AccountType{
    OLD {
       public String type() {
           return "Old account";
       } 
    },
    NEW {
        public String type() {
            return "New account";
        }
    };
 } 
```

和你的 Account 对象是这样的；

```
 public class Account(){
        private String accountName;    
        private AccountType accountType; // enum 

        //You don't need this.
        //public String getAccountType(){
        //    return accountType.getAccountType();
        //  }
    } 
```

然后就可以访问了`accountType.type`

# perl - Test::Base::Filter 参数

> ID：12523453
> 
> 赞同：2
> 
> 时间：2012-09-21T02:23:42.083
> 
> 标签：perl, unit-testing, perl-module

在[Test::Base 的 POD 中](http://search.cpan.org/perldoc?Test%3a%3aBase#Rolling_Your_Own_Filters)，有一个关于滚动我自己的过滤器的示例，文档称其为“自我解释”。我无法理解它，我认为这可能是我的过滤器写作中的一个问题。代码复制如下：

```
use Test::Base;

filters 'foo', 'bar=xyz';

sub foo {
    transform(shift);
}

sub Test::Base::Filter::bar {
    my $self = shift;       # The Test::Base::Filter object
    my $data = shift;
    my $args = $self->current_arguments;
    my $current_block_object = $self->block;
    # transform $data in a barish manner
    return $data;
} 
```

该`filters`函数将命名的子例程设置为传入数据的过滤器。声明的过滤器是“foo”和“bar”，它们有参数。

我的问题是为什么 foo 和 bar 的结构如此不同。为什么 foo 在当前命名空间中，而 bar 在 Test::Base::Filter 命名空间中声明？为什么 foo 改变了它的第一个参数，而 bar 必须从第二个参数中获取数据？

另一个例子。在 MyTest.pm 中：

```
package t::MyTest;
use Test::Base -Base;
#some stuff here

package t::MyTest::Filter;
use base 'Test::Base::Filter';

sub choose {
    print @_;
    return {foo => 'bar'} if($_[0] eq '1');
    return undef;
}
sub is_defined{ 
    print @_;
    defined $_[0];
} 
```

在 test.t 中：

```
use t::MyTest;

filters {input => [qw(choose is_defined)] };
__END__
=== First
--- input
1
--- expected: 1
=== Second
--- input
0
--- expected: 0 
```

如果您将它们都放在“t”文件夹中并运行`prove -v`，则输出如下：

```
t\01-test.t .. Use of uninitialized value $_[1] in print at t/MyTest.pm line 14,
 <DATA> line 1.

1
t::MyTest::Filter=HASH(0x2af1670)ok 1 - First
1..1
Failed 1/1 subtests

Test Summary Report
-------------------
t\01-test.t (Wstat: 0 Tests: 0 Failed: 0)
  Parse errors: Bad plan.  You planned 1 tests but ran 0.
Files=1, Tests=0,  1 wallclock secs ( 0.06 usr +  0.23 sys =  0.30 CPU)
Result: FAIL 
```

没关系警告（我不完全理解它的根源）。为什么第一个过滤器传递了输入（就像它应该是的那样），但第二个过滤器传递了一些过滤器对象？第二个过滤器的输入不应该是第一个过滤器的输出吗？如果不是，那么我不得不担心整个地方的过滤器排序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T21:18:26.760

我想通了。我很确定这是过滤器工作方式中的一个错误。POD 说：

```
Each filter can take either a scalar or a list as input, and will return either a scalar or a list. Since filters are chained together, it is important to learn which filters expect which kind of input and return which kind of output. 
```

Perldoc 告诉我这`undef`是 Perl 中的有效标量，但 Test::Base::Filter 忽略它。通常，过滤器的输入首先是数据，然后是其他一些东西。但是，如果一个过滤器返回 undef，那么它的返回值将被忽略，并且下一个过滤器会少一个参数，而不是`undef`作为它的第一个参数。我将在 RT 中归档。

# macos - 将 Redcarpet 与 LiveReload 一起使用

> ID：12523454
> 
> 赞同：1
> 
> 时间：2012-09-21T02:23:48.460
> 
> 标签：macos, haml, markdown, redcarpet, livereload

根据我一直在阅读的有关 Markdown 过滤器的内容，我想在 HAML 中使用 RedCarpet 作为我的过滤器。但是，我正在使用 LiveReload ，显然，目前它只支持 RDiscount、RPeg-markdown、Maruku 和 BlueCloth。

谁能告诉我如何让 LiveReload 使用 RedCarpet？如果不可能，那么其​​他四个过滤器中的哪一个是好的推荐（开发最积极、最安全、有更大的社区支持）？

# c# - 写入流时使用 XmlDiffPatch

> ID：12523458
> 
> 赞同：1
> 
> 时间：2012-09-21T02:24:48.593
> 
> 标签：c#, xml, stream

我正在尝试使用 xmldiffpatch 写入流。

第一种方法是将我的 xml 写入内存流。第二种方法从文件加载 xml 并为要写入的修补文件创建流。第三种方法实际上是比较两个文件。我总是得到这两个文件是相同的，即使它们不是，所以我知道我错过了一些东西。

任何帮助表示赞赏！

```
public MemoryStream FirstXml() 

    {
        string[] names = { "John", "Mohammed", "Marc", "Tamara", "joy" };
        MemoryStream ms = new MemoryStream();
        XmlTextWriter xtw= new XmlTextWriter(ms, Encoding.UTF8);

        xtw.WriteStartDocument();
        xtw.WriteStartElement("root");

        foreach (string s in names)
        {
        xtw.WriteStartElement(s);
        xtw.WriteEndElement();
        }
        xtw.WriteEndElement();
        xtw.WriteEndDocument();
        return ms;
    }

    public Stream SecondXml()
    {
        XmlReader finalFile =XmlReader.Create(@"c:\......\something.xml");
        MemoryStream ms = FirstXml();
        XmlReader originalFile = XmlReader.Create(ms);
        MemoryStream ms2 = new MemoryStream();
        XmlTextWriter dgw = new XmlTextWriter(ms2, Encoding.UTF8);
        GenerateDiffGram(originalFile, finalFile, dgw);
        return ms2;
    }

    public void GenerateDiffGram(XmlReader originalFile, XmlReader finalFile,
                                XmlWriter dgw)
    {
        XmlDiff xmldiff = new XmlDiff();
        bool bIdentical = xmldiff.Compare(originalFile, finalFile, dgw);
        dgw.Close();
        StreamReader sr = new StreamReader(SecondXml());
        string xmlOutput = sr.ReadToEnd();
        if(xmlOutput.Contains("</xd:xmldiff>"))
        {Console.WriteLine("Xml files are not identical");
            Console.Read();}

        else
        {Console.WriteLine("Xml files are identical");Console.Read();}

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T03:36:15.627

以下修改版本有效。

```
static void Main()
{
    SecondXml();
}

public static string FirstXml()
{
    string[] names = { "John", "Mohammed", "Marc", "Tamara", "joy" };
    var sw = new StringWriter();
    var xtw = new XmlTextWriter(sw);

    xtw.WriteStartDocument();
    xtw.WriteStartElement("root");

    foreach (string s in names)
    {
        xtw.WriteStartElement(s);
        xtw.WriteEndElement();
    }
    xtw.WriteEndElement();
    xtw.WriteEndDocument();

    return sw.ToString();
}

public static void SecondXml()
{
    string secondXml = File.ReadAllText(@"t:\something.xml");
    string firstXml = FirstXml();

    Console.WriteLine("Comparing...");

    string result = GenerateDiffGram(firstXml, secondXml);

    Console.WriteLine(result);

    Console.WriteLine();
    Console.WriteLine("Finished compare");

    Console.Out.Write(firstXml);

    Console.WriteLine();

    Console.WriteLine();

    Console.WriteLine(secondXml);
}

public static string GenerateDiffGram(string originalFile, string finalFile)
{
    var xmldiff = new XmlDiff();
    var r1 = XmlReader.Create(new StringReader(originalFile));
    var r2 = XmlReader.Create(new StringReader(finalFile));
    var sw = new StringWriter();
    var xw = new XmlTextWriter(sw) {Formatting = Formatting.Indented};
    bool bIdentical = xmldiff.Compare(r1, r2, xw);
    Console.WriteLine();
    Console.WriteLine("bIdentical: " + bIdentical);

    return sw.ToString();
} 
```

我实际上并不完全确定您的原始代码有什么问题。正在比较的 XML 在第一个和第二个读取器中都是一个空字符串。由于无论如何您都将内存流用作后备存储，因此仅像上面那样使用字符串就不会丢失任何东西。

# javascript - 通过 rootScope 从遗留代码广播到 Angular

> ID：12523459
> 
> 赞同：4
> 
> 时间：2012-09-21T02:24:50.690
> 
> 标签：javascript, factory, broadcast, legacy, angularjs

我正在尝试通过 Angular 服务将来自旧版 javascript 函数的消息广播到 Angular 控制器中。在 Angular 内调用时，广播工作正常，但在外部调用时不行。见[http://jsfiddle.net/yh3Ds/24/](http://jsfiddle.net/yh3Ds/24/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T06:01:34.053

似乎`angular.injector()`正在创建新的模块实例，它独立于与 html via`ng-app`属性绑定的模块实例。

所以解决方案是使用手动引导程序并在那里获取注入器。使用这个注入器，您可以访问服务实例，`$rootScope`它实际上是控制视图。

这是更新的小提琴；[http://jsfiddle.net/d8vX3/1/](http://jsfiddle.net/d8vX3/1/)

# amazon-web-services - 如何在亚马逊 aws vpc 私有子网中打开 mongo 端口

> ID：12523460
> 
> 赞同：1
> 
> 时间：2012-09-21T02:24:54.510
> 
> 标签：amazon-web-services, amazon-vpc

我按照此处所述设置 VPC：http: [//docs.amazonwebservices.com/AmazonVPC/latest/UserGuide/VPC_Scenario2.html](http://docs.amazonwebservices.com/AmazonVPC/latest/UserGuide/VPC_Scenario2.html)

我在私有子网中有一个盒子，我想将它用作 mongo 盒子。私有 IP 是 10.0.1.51。

我可以通过 localhost 连接到 mongod 实例，但不能通过私有 IP：

```
ubuntu@ip-10-0-1-51:~$ mongo localhost
connecting to: localhost
> this works

> ^Cubuntu@ip-10-0-1-51:~$ mongo 10.0.1.51
Fri Sep 21 02:23:18 Error: couldn't connect to server 10.0.1.51 shell/mongo.js:81
exception: connect failed
ubuntu@ip-10-0-1-51:~$ 
```

安全组允许传入和传出端口 27017。

路由表有

```
10.0.0.0/16 local 
```

入口。

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T04:55:23.303

三件事会影响 Amazon VPC 上的网络连接。

1.  路由表——默认的就足够了。
2.  安全组 - 双重检查不会受到伤害。
3.  网络 ACL - 虽然我不记得默认规则，但它可能是 DENY。这些可以在 AWS 控制台的 VPC 选项卡下进行修改。这些规则是取消链接安全组，亚马逊说，“网络 ACL 是无状态的，这意味着对于您想要处理的任何给定请求，您必须在两个方向上创建规则。”

我的猜测是这是您的 ACL，因为您在原始帖子中没有提到它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T20:23:10.283

问题实际上出在 mongodb 配置中，而不是路由表中。MongoDB 和 MySQL 一样，需要允许来自特定主机的连接。

在 mongodb.conf 中：

```
bind_ip = <%= @bind_ip || '127.0.0.1' %>
port = <%= @port || '27017' %> 
```

在客户端节点上显示的服务器的 IP 和端口在哪里`@bind_ip`以及在哪里。`@port`

# c++ - 应该如何检索当前活动窗口的光标下的单词？

> ID：12523465
> 
> 赞同：2
> 
> 时间：2012-09-21T02:25:27.093
> 
> 标签：c++, winapi

如何在当前活动窗口中检索光标下的单词？我的想法是使用`GetCursorPos()`并`WindowFromPoint()`获得句柄，并做一些事情，但是如何？

想象一个字典应用程序，它读取光标下的文本，并解释其含义。

**编辑**

我最终使用了来自 stardict 的 dll，它的 API 钩子在文本绘图上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T07:52:53.337

您必须知道为此所需的 API；这并不明显。您正在寻找 MSAA，[Microsoft Active Accessibility](http://msdn.microsoft.com/en-us/library/windows/desktop/dd373592(v=vs.85).aspx)

简而言之，您将编写一个 MSAA 客户端。通过调用`AccessibleObjectFromPoint`你得到一个`IAccessible`指针。该指针可以访问指定点处对象的属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T02:44:44.537

您所要求的实施起来并非易事。

一旦您确定了光标下的窗口（不要忘记您还需要使用`ChildWindowFromPoint()`向下钻取嵌套窗口），您可以使用`GetClassName()`它来确定它是什么类型的窗口。

对于标准`RICHEDIT`窗口，您可以将屏幕绝对光标坐标转换为窗口内的客户端相对坐标`MapWindowPoints()`，然后使用`EM_FINDWORDBREAK`、`EM_EXSETSEL`和`EM_GETSELTEXT`消息在光标坐标处定位、突出显示和复制单词。

对于标准`EDIT`窗口，一旦你翻译了坐标，你可以使用`EM_CHARFROMPOS`消息来定位最接近光标坐标的字符偏移，然后`EM_GETTEXT`对单行窗口使用消息，或者对多行窗口使用`EM_LINEFROMCHAR`and消息（使用测试样式），检索窗口的文本，然后您必须手动解析字符偏移周围的文本。`EM_GETLINE``GetWindowLong(GWL_STYLE)``ES_MULTILINE`

对于其他类型的窗口，尤其是自定义控件，您必须做更多的工作，如果甚至可以访问窗口的文本。一些窗口响应`WM_GETTEXT`消息和/或`GetWidnowText()`，而其他窗口不响应。

# javascript - 水平下拉菜单 MouseOver 问题

> ID：12523466
> 
> 赞同：0
> 
> 时间：2012-09-21T02:25:50.743
> 
> 标签：javascript, jquery, menu

在网上搜索了几个小时后，我决定为水平下拉菜单编写自己的代码，该菜单允许下拉菜单中包含 html 内容，而不是每个人都使用的标准“列表”项目。与我发现的大多数下拉菜单相比，我的代码很少。我有两个问题让我发疯。

问题 #1：当您将鼠标悬停在类别上时，“下拉” div 会按原样显示，但是当您将鼠标悬停在“下拉” div 上时，它会消失。但是，如果您将鼠标悬停在另一个类别上，“下拉” div 就会消失，而新的 div 会像它们一样出现。我错过了什么？

问题 #2：如果您将光标停在类别的下划线链接出现的位置并将其保留在那里，“下拉” div 似乎会弹出两次闪烁。也想不通？

我在这里发布了我的代码：http: [//jsfiddle.net/UXxL8/](http://jsfiddle.net/UXxL8/)

非常感谢，我知道这可能是我忽略的一些简单的事情。但是你知道在你盯着同一个代码太久之后是怎么回事......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T02:40:24.880

现在，您正在将您的行为直接附加到锚点上。当您将鼠标向下移动到新暴露的内容时，您已经超出了锚点区域并触发了鼠标移出。如果您将锚点和下拉列表都放在同一个容器中，然后将事件附加到该容器，您将获得预期的行为。

我还建议使用 mouseenter 和 mouseleave 而不是 mouseover 和 mouseout，因为您的菜单中会有子元素。这个[问题](https://stackoverflow.com/questions/7286532/jquery-mouseenter-vs-mouseover)很好地描述了为什么这样做是可取的。

[我在这里](http://jsfiddle.net/UXxL8/1/)设置了一个更新的小提琴。类别 3 菜单项已更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T02:49:23.743

您还需要将 绑定`mouseover/mouseout`到下拉列表。下拉菜单闪烁的原因是因为动画功能排队 -在完成`fadeIn`后开始`fadeOut`，因此您需要[`stop`](http://api.jquery.com/stop)在添加另一个动画之前先查看当前动画。

[这是](http://jsfiddle.net/UXxL8/2/)改进的代码。

# iphone - 有什么方法可以让一个复选框能够在 iPhone 上“加标签”？

> ID：12523468
> 
> 赞同：0
> 
> 时间：2012-09-21T02:26:18.770
> 
> 标签：iphone, html

在计算机上，您可以轻松地浏览网站上的 HTML 复选框，但是有没有办法让它在 iPhone 上，当您点击“下一步”按钮时，它会转到复选框？我注意到它会在文本框和下拉菜单之间移动，但不会对复选框或可点击按钮执行此操作。这是 iPhone 的问题，还是我可以在我的网站上更改？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-21T03:49:13.847

你能否对你的问题更准确一点。如果它的复选框的大小是一个问题，使其不可点击，那么按照苹果 ios 的用户界面指南的建议，请将大小设置为 44x44 以使其可点击。好吧，这只是一个建议的尺寸，我相信 25x25 尺寸可以解决您的问题。

# java - AccountManager：invalidateAuthToken 不会使令牌失效

> ID：12523471
> 
> 赞同：3
> 
> 时间：2012-09-21T02:26:52.077
> 
> 标签：java, access-token, accountmanager

我正在尝试从存储在 Android 设备中的 Google 帐户获取全新的令牌，但我得到的只是我在过去几天缓存的旧令牌。好像是缓存在手机某处，连上网请求都没有发送（我在没有上网的情况下在app里做了测试，返回的是同一个token）。

在使用from`invalidateAuthToken`获得新方法之前，我使用了该方法。请看一下：`getResult``AccountManagerFuture`

```
public String updateToken(Activity activity) throws Exception {             
    AccountManager am = AccountManager.get(activity);
    Account[] accounts = am.getAccountsByType("com.google");

    if (accounts == null || 
        accounts.length == 0 || 
        "".equals(accounts[0].name.trim())) 
    {
        throw new Exception("Não há contas Google configuradas no smartphone.");
    } 
    else if (!"crsilva@gmail.com".equals(accounts[0].name.trim()) && 
             !"cristiano.bezerra@sulamerica.com.br".equals(accounts[0].name.trim()) &&
             !"tholiver@gmail.com".equals(accounts[0].name.trim())) 
    {
        Log.w("Util.updateToken","conta obtida: " + accounts[0].name);
        throw new Exception("Conta Google não autorizada.");
    }
    Log.w("Util.updateToken","conta obtida: " + accounts[0].name);
    am.invalidateAuthToken("com.google", null);
    Log.w("Util.updateToken","Passou do invalidateAuthToken");
    AccountManagerFuture<Bundle> future = 
        am.getAuthToken(accounts[0], "ah", null, activity, null, null);
    Log.w("Util.updateToken","Passou do getAuthToken");
    Bundle bundle = future.getResult();
    Log.w("Util.updateToken","Passou do getResult");
    future = null;
    am = null;
    accounts = null;
    String authToken = bundle.getString(AccountManager.KEY_AUTHTOKEN);
    Log.w("Util.updateToken","Token: " + authToken);
    return authToken;
} 
```

一个线程通过单例实例从 Util 类调用此方法。清单具有所有必要的权限。有人知道为什么令牌没有刷新吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T07:24:49.530

要使身份验证令牌无效，您需要将要使其无效的令牌作为第二个参数传递给 invalidateAuthToken。[请参阅此博文的](http://www.jiahaoliuliu.com/2012/05/android-account-manager-part-i.html)“4.4.3 使身份验证令牌无效”部分。该页面上的视频也很有帮助。

[invalidateAuthToken](http://developer.android.com/reference/android/accounts/AccountManager.html#invalidateAuthToken%28java.lang.String,%20java.lang.String%29)的文档提到第二个参数可能为 null，但这仅表示允许使用 null 调用此方法，而不是如果传递 null，则每个缓存的令牌都无效。

如果你做这样的事情，你的代码应该可以工作：

```
// Get token
AccountManagerFuture<Bundle> future = am.getAuthToken(accounts[0], "ah", null, activity, null, null);
Bundle bundle = future.getResult();
String authToken = bundle.getString(AccountManager.KEY_AUTHTOKEN);

// invalidate the token since it may have expired.
am.invalidateAuthToken("com.google", authToken);

// Get token again
future = am.getAuthToken(accounts[0], "ah", null, activity, null, null);
bundle = future.getResult();
authToken = bundle.getString(AccountManager.KEY_AUTHTOKEN); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-06T09:13:24.763

简单地“窥视”当前缓存的令牌，检查它是否仍然有效，并在需要时创建一个新令牌更简单。

```
String authToken = accountManager.peekAuthToken(account, Constants.AUTHTOKEN_TYPE);
// validate the token, invalidate and generate a new one if required
accountManager.invalidateAuthToken(Constants.ACCOUNT_TYPE, authToken);
accountManager.blockingGetAuthToken(account,
                Constants.AUTHTOKEN_TYPE, NOTIFY_AUTH_FAILURE); 
```

# css - Winless 成功编译 .less 文件，但没有创建 .css 文件

> ID：12523474
> 
> 赞同：2
> 
> 时间：2012-09-21T02:26:58.040
> 
> 标签：css, less

我正在使用[WinLess](http://winless.org/)将文件编译`*.less`成`*.css`文件。

该文件报告为编译成功，但是没有`*.css`创建文件。

其他`*.less`文件似乎可以`*.css`正常编译和创建文件，所以我认为这不是安装问题。

关于为什么特定`*.less`文件无法编译而其他文件无法编译的任何想法？

* * *

**编辑**：问题文件的内容通过`@import`语句包含在主 .less 文件中。如果我注释掉该`@import`语句并将导入`*.less`文件的原始内容粘贴到主文件中，那么一切都会正确编译。其他文件`@import`正确 - 只是这个有问题*@imported*。

很奇怪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-10T21:43:00.610

只是有同样的问题。重新安装它并开始正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-04T11:49:27.730

winless 和 simpless (mac) 都有同样的问题。通常这是由由于某种原因停止编译但没有给出错误的代码行引起的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-08T22:52:05.643

您是否尝试过仔细检查您的 LESS 语法？有时我将代码粘贴到我的 LESS 文件中，它会破坏编译过程，例如

```
#sample-class { ... } 
```

省略号不是合法的 LESS 代码，WinLess 会停止编译 CSS，直到它被修复。

# google-search - 谷歌将如何为少数搜索结果提供视觉指标？

> ID：12523476
> 
> 赞同：0
> 
> 时间：2012-09-21T02:27:24.917
> 
> 标签：google-search

我已经搜索了一段时间没有运气。所以在这里问。
当我搜索一些主题时，谷歌在某些情况下会包括评分，在某些情况下会包括作者图片，但在大多数情况下，只是文本。在这种情况下，IMDB 在结果中获得了星级评级，但我想并非所有评级网站都会出现这种情况。 ![在此处输入图像描述](../Images/2496446c58d7760af84a4ef33d03b560.png)

有什么我们可以对我们的网站做的事情，还是只有在网站获得信任并且非常受欢迎之后谷歌才会这样做？
它如何与其他搜索引擎配合使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T14:41:43.053

Google 称这些*为 Rich Snippets*。

文档：[关于丰富网页摘要和结构化数据](https://support.google.com/webmasters/answer/99170?hl=en)

Google 支持三种可用于对内容进行语义注释的语法：

*   [微数据](http://en.wikipedia.org/wiki/Microdata_%28HTML%29)
*   [微格式](http://en.wikipedia.org/wiki/Microformat)
*   [RDFa](http://en.wikipedia.org/wiki/RDFa)

（对于 Microdata 和 RDFa，您通常必须使用**Schema.org**词汇表。）

请注意，它不一定对*所有*注释其标记的站点都有效；谷歌（他们的算法）仍然决定谁的搜索结果会得到增强。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T02:30:41.557

我认为 Google 的开发人员决定哪些网站足够重要以拥有自己的功能，但 Duckduckgo 免费使用零点击 API 做得很好 => [https://duckduckgo.com/?q=terminator+judgement+day](https://duckduckgo.com/?q=terminator+judgement+day)

# android - 移动设备之间的统一 UI

> ID：12523480
> 
> 赞同：1
> 
> 时间：2012-09-21T02:28:03.410
> 
> 标签：android, ios, windows, mobile, user-interface

我想知道在创建可在 iOS、Android 和 Windows Phone 操作系统之间使用的移动应用程序时是否可以使用统一 UI 框架？我从未接触过 HTML 5，但我听说可以创建复杂的 UI，以便在这些平台上看起来或多或少相同。我的想法是创建一个应用程序，拥有一个可以轻松移植的通用框架。

编辑：刚刚找到这个网站[http://en.wikipedia.org/wiki/Multiple_phone_web_based_application_framework](http://en.wikipedia.org/wiki/Multiple_phone_web_based_application_framework)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T02:30:29.183

有很多平台，Corona、Titanium、PhoneGap，当然还有 HTML5 等等。这确实限制了性能和您可以利用的功能。我不确定除了 HTML 5 是否支持 Windows 手机，但它们都支持 Android 和 iOS。

# android - 如何在 phonegap/cordova 中运行 java 代码？

> ID：12523483
> 
> 赞同：1
> 
> 时间：2012-09-21T02:28:22.983
> 
> 标签：android, cordova

> **可能重复：**
> [Android Java 和 Phonegap Javascript 之间的通信？](https://stackoverflow.com/questions/2727763/communication-between-android-java-and-phonegap-javascript)

每当用户在我的 Phonegap index.html 界面中按下按钮时，我都想运行一些代码

// 切换飞行模式

```
 Settings.System.putInt(
  context.getContentResolver(),
  Settings.System.AIRPLANE_MODE_ON, isEnabled ? 0 : 1); 
```

// 发布一个重新加载的意图

```
Intent intent = new Intent(Intent.ACTION_AIRPLANE_MODE_CHANGED);
intent.putExtra("state", !isEnabled);
sendBroadcast(intent); 
```

我想在按下按钮时启动该代码。也许以某种方式制作一个运行java代码的javascript函数（如果可能的话），所以我可以制作类似的东西

```
 <input type="submit" onlick="reconnect();" value="Reconnect to Cell Tower"> 
```

我正在使用 Cordova 1.9.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T02:51:17.083

只需像这样在您的主要活动中实现 corrodovaInterface ..

```
public class MainActivity extends Activity implements CordovaInterface, OnClickListener {
/** Called when the activity is first created. */
CordovaWebView cwv;
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    cwv = (CordovaWebView) findViewById(R.id.webContent);    
    cwv.loadUrl("your index file");
    Button btnSearch = (Button)findViewById(R.id.btnSearch);
    btnSearch.setOnClickListener(this);
}

    public void onClick(View v) {
     //your code goes here...
} 
```

您可能需要导入

```
import org.apache.cordova.*;
import org.apache.cordova.api.CordovaInterface;
import org.apache.cordova.api.IPlugin; 
```

谢谢。

# cassandra - 如何将两个 Cassandra 集群合并为一个？

> ID：12523486
> 
> 赞同：2
> 
> 时间：2012-09-21T02:29:12.043
> 
> 标签：cassandra

我有两个 Cassandra 集群，集群 1 有一个名为“Keyspace1”的键空间，集群 2 有一个名为“Keyspace2”的键空间。我想将两个集群合并为一个。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T09:41:46.477

如果要保存数据的集群有足够的空间，那么其中一个选项可能是使用 sstable-loader 将 sstable 的数据和索引文件流式传输到该集群。

有关更多信息，请参阅[Cassandra 批量加载程序](http://www.shareitexploreit.blogspot.in/2012/02/cassandra-bulk-loader.html)

# php - 用于 java 的 apache solr 等重型数据库的最佳 PHP 搜索技术

> ID：12523490
> 
> 赞同：2
> 
> 时间：2012-09-21T02:29:53.513
> 
> 标签：php, mysql, solr, jvm, advanced-search

我已经在我的java项目中顺利使用了apache solr，但是当我结束用PHP解决同类问题时，出现了这个问题：

要运行 apache SOLR，我们需要在服务器上安装 JVM。但我不知道我的客户端服务器中是否安装了 JVM。因为它是 PHP apache linux 服务器（不是专用的），我不知道我是否可以访问我可以管理的控制台。

任何人都可以告诉我简单 PHP 环境中 apache solr 的替代方案是什么？或者请向我推荐 PHP 的最佳索引搜索技术。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T18:31:56.293

一些选项：

1.  最糟糕的解决方案，但如果您想留在这个（共享？）环境中，可能是最简单的解决方案是使用 aitchnyu 建议的 php 解决方案。你甚至可以使用你自己的。
2.  共享环境通常可以访问 mysql，您可以[根据它](http://dev.mysql.com/doc/refman/5.0/en/fulltext-natural-language.html)进行搜索。（也不理想，但可能）
3.  将服务器升级为虚拟共享服务器或为 SOLR 使用单独的服务器（我使用运行良好的 ec2 免费层）

不是一个真正的选择，而是回答您的问题，是的，您可以[通过 php 访问终端，](https://github.com/spyrosoft/PHP-Terminal-Emulator)但这远非您真正应该做的，因为大多数共享服务器禁用通过 php 的访问（事实上，他们没有给您 ssh 访问权限是有原因的）。

还因为即使他们忘记关闭这个安全漏洞（有时会发生），您也会很快耗尽您的资源（内存、cpu），并且无论如何您都必须升级服务器。

# php - Mysqli 获取整行

> ID：12523495
> 
> 赞同：0
> 
> 时间：2012-09-21T02:30:43.397
> 
> 标签：php, sql, mysqli

```
#Do a database query and return all rows of GET ID  
$result=$mysqli->query("SELECT * FROM products WHERE product-id = '$id'");

    while($row=$result->fetch_array())
    {
        $id             =     $row['product-id'];
        $pagename       =     $row['product-name'];
        $description    =     $row['product-description'];
        $samples        =     $row['product-sample-designs'];
    }

# free result set
mysqli_free_result($result);
}

#close connection
mysqli_close($mysqli); 
```

如果我删除`WHERE product-id = '$id'`# Result is no errors 并显示第一行。

如代码所示，我收到此错误：“致命错误：在非对象上调用成员函数 fetch_array()”

我只是想在我的 GET id = TABLE 的一行中获取所有数据`product-id`。这个过程在 MYSQL 中要容易得多。我对这种 OOP 风格很陌生，我觉得它很混乱。非常感谢您的解释。~谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T02:33:23.480

如果列名包含连字符，则需要用反引号将其括起来。

```
$result=$mysqli->query("SELECT * FROM products WHERE `product-id` = '$id'"); 
```

但是在列/表名中使用连字符不是一个好主意，使用下划线`_`会更好。

# java - Java 将每一行读入单独的数组

> ID：12523497
> 
> 赞同：1
> 
> 时间：2012-09-21T02:32:03.363
> 
> 标签：java, arrays, io

我在一个文本文件中有 1,000 行数据，我希望每一行都是它自己的 float []。

```
1,1,1,1,1,1
2,2,2,2,2,2
3,3,3,3,3,3 
```

会导致：

```
 float[0] = {1,1,1,1,1,1}
 float[1] = {2,2,2,2,2,2}
 float[2] = {3,3,3,3,3,3} 
```

这可能吗？我只能找到将整个文件加载到数组中的示例。我尝试对所有数组进行硬编码，但超出了 ~65,000 的字节字符限制

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T02:55:44.083

尝试以下操作：

```
// this list will store all the created arrays
List<float[]> arrays = new ArrayList<float[]>();

// use a BufferedReader to get the handy readLine() function
BufferedReader reader = new BufferedReader(new FileReader("myfile.txt"));

// this reads in all the lines. If you only want the first thousand, just
// replace these loop conditions with a regular counter variable
for (String line = reader.readLine(); line != null; line = reader.readLine()) {
    String[] floatStrings = line.split(",");
    float[] floats = new float[floatStrings.length];
    for (int i = 0; i < floats.length; ++i) {
        floats[i] = Float.parseFloat(floatStrings[i]);
    }
    arrays.add(floats);
} 
```

请注意，我没有添加任何异常处理（例如，readLine() 会引发 IOException）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T02:43:19.847

*   使用[LineIterator](http://commons.apache.org/io/api-release/org/apache/commons/io/LineIterator.html)读取每一行而不加载整个文件

*   对于每一行，使用正则表达式提取*(\d\.)+之类的数字，并在使用**find()*和*group()*等方法找到的匹配项上进行迭代

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-22T08:23:44.107

```
<body>
<pre>

import java.io.FileReader;

public class Check {

    public static void main(String[] args) {    
        readingfile();
    }
    public static void readingfile() {
        try {
            FileReader read = new FileReader("D:\\JavaWkspace\\numbers.txt");
            int index;
            String nums1 = "";

            while ((index = read.read()) != -1) {
                if (((char) index) != '\n') {
                    nums1 += String.valueOf((char) index);
                }
            }

            System.out.println("Problem statement: Print out the greatest number on each line:\n" + nums1);

            String f = nums1.substring(0, 14);
            String s = nums1.substring(15, 29);
            String t = nums1.substring(30);

            String[] fs = f.split(",");
            int size = fs.length;
            int[] arr = new int[size];
            for (int i = 0; i < size; i++) {
                arr[i] = Integer.parseInt(fs[i]);
            }
            int max = arr[0];
            for (int i = 0; i < arr.length; i++) {
                if (max < arr[i]) {
                    max = arr[i];
                }
            }
            System.out.println("\nGreatest number in the first line is:" + (max));

            String[] sstr = s.split(",");
            int size2 = sstr.length;
            int[] arr2 = new int[size2];
            for (int i = 0; i < size2; i++) {
                arr2[i] = Integer.parseInt(sstr[i]);
            }

            int max2 = arr2[0];
            for (int i = 0; i < arr2.length; i++) {
                if (max2 < arr2[i]) {
                    max2 = arr2[i];
                }
            }
            System.out.println("\nGreatest number in the second line is:" + (max2));

            String[] str3 = t.split(",");
            int size3 = str3.length;
            int[] arr3 = new int[size3];
            for (int i = 0; i < size3; i++) {
                arr3[i] = Integer.parseInt(str3[i]);
            }

            int max3 = arr3[0];
            for (int i = 0; i < arr3.length; i++) {
                if (max3 < arr3[i]) {
                    max3 = arr3[i];
                }
            }
            System.out.println("\nGreatest number in the third line is:" + (max3));
            read.close();
        } catch (Exception e) {
            System.out.println(e);
        }
    }
}
</pre>
</body>
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-21T02:36:18.730

使用 .split("\n") 循环文件的行分隔内容，然后将每个结果转换为浮点数组。以下是如何为您将字符串转换为浮点数 => [http://www.devdaily.com/java/edu/qanda/pjqa00013.shtml](http://www.devdaily.com/java/edu/qanda/pjqa00013.shtml)*

# c++ - 当我使用opencv函数cvNorm(image,NULL,CV_L2)时，返回异常结果，为什么？

> ID：12523502
> 
> 赞同：0
> 
> 时间：2012-09-21T02:33:09.493
> 
> 标签：c++, matlab, image-processing, opencv

这是opencv代码：</p>

```
int main()  
{  
IplImage* image=cvLoadImage("C:\\boat.png",CV_LOAD_IMAGE_GRAYSCALE);

cout<<"1-norm is : "<<cvNorm(image,NULL,CV_L1)<<endl;  

cout<<"2-norm is : "<<cvNorm(image,NULL,CV_L2)<<endl;  //the result is 6000+，it's too
big and unnormal!

return 0;
} 
```

l2范数结果很大，就是6000+，但是matlab的答案是229如下，

这是matlab代码：</p>

```
>> norm(image)

ans =

229.7975 
```

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T07:54:51.113

相反，灰度图像的 6000+ 标准看起来很正常。灰度图像值的范围从 0 到 255，因此根据图像的大小，即使对于小到 64x64 的图像，您可能会得到`L2=sqrt(sum(image.^2))`（不是实际代码）数千、数万或更多的图像。

更有趣的是为什么`norm(image)`在 Matlab 中如此低。`norm`不接受`uint8`向量，因此在加载图像和计算其范数之间的某个地方存在数据转换，该数据转换也可能具有改变图像中的绝对值以及随后的范数的副作用。

# linux - 调试linux内核恐慌

> ID：12523505
> 
> 赞同：6
> 
> 时间：2012-09-21T02:33:23.183
> 
> 标签：linux, linux-kernel, arm

我是内核调试的新手。下面是最后一条内核消息。据我了解，它正在尝试访问空指针。但我不明白为什么它会关闭cup 0。

```
Unable to handle kernel paging request at virtual address 40025694
[37655.473976] pgd = d7138000
[37655.474007] [40025694] *pgd=9ec1a831, *pte=bf2e659d, *ppte=00000000
[37655.474038] Internal error: Oops: 17 [#1] PREEMPT SMP
[37655.474038] Modules linked in:
[37655.474068] CPU: 1    Not tainted  (3.0.21-g572d9be-00004-g4ec4db2 #1)
[37655.474099] PC is at vector_swi+0x28/0x88
[37655.474129] LR is at 0x40025698
[37655.474160] pc : c01065a8    lr : 40025698    psr : 60000093
[37655.474160] sp : d6eaffb0  ip : 4062c18c  fp : 5ed97c24
[37655.474190] r10: 58702b64  r9 : 5ea56f98  r8 : 20000010
[37655.474221] r7 : 000000a8  r6 : 41b13530  r5 : 4062c270  r4 : 4062c140
[37655.474251] r3 : 00000000  r2 : ffffffff  r1 : 00000001  r0 : 5ed97bd0
[37655.474251] Flags: nZCv  IRQs off  FIQs on  Mode SVC_32  ISA ARM  Segment user
[37655.474282] Control: 10c5787d  Table: 9ec3806a  DAC: 00000015
[37655.474282] 
[37655.474282] PC: 0xc0106528:
[37655.474312] 6528  e31100ff 1afffff0 e59d1040 e5bde03c e16ff001 f57ff01f e95d7fff e1a00000
[37655.474343] 6548  e28dd00c e1b0f00e eb01ae0e e1a096ad e1a09689 e5991000 e3a08001 e3110c01
[37655.474373] 6568  0affffec e1a0100d e3a00001 eb0006ef eaffffe8 e320f000 e24dd048 e88d1fff
[37655.474404] 6588  e28d803c e9486000 e14f8000 e58de03c e58d8040 e58d0044 e3180020 13a0a000
[37655.474434] 65a8  051ea004 e59fc0ac e59cc000 ee01cf10 f1080080 e1a096ad e1a09689 e28f809c
[37655.474465] 65c8  e3daa4ff 122a7609 159f808c e599a000 e92d0030 e31a0c01 1a000008 e3570f5e
[37655.474465] 65e8  e24fee13 3798f107 e28d1008 e3a08000 e357080f e2270000 2a001084 ea022377
[37655.474526] 6608  e1a02007 e28d1008 e3a00000 eb0006c7 e28fe014 e1a07000 e28d1008 e3570f5e
[37655.474526] 
[37655.474526] SP: 0xd6eaff30:
[37655.474556] ff30  c004815c c004a2c0 c0c02080 0000000a c0d8a580 c017a2f0 c1ef1984 00000012
[37655.474587] ff50  ffffffff d6eaff9c 41b13530 000000a8 20000010 c010602c 5ed97bd0 00000001
[37655.474617] ff70  ffffffff 00000000 4062c140 4062c270 41b13530 000000a8 20000010 5ea56f98
[37655.474648] ff90  58702b64 5ed97c24 4062c18c d6eaffb0 40025698 c01065a8 60000093 ffffffff
[37655.474678] ffb0  5ed97bd0 00000001 ffffffff 00000000 4062c140 4062c270 41b13530 000000a8
[37655.474678] ffd0  5ed97bd0 5ea56f98 58702b64 5ed97c24 4062c18c 5ed97bc8 406283d7 40025698
[37655.474709] fff0  20000010 5ed97bd0 a8afc821 a8afcc21 e033cfc0 40eb3000 40eb6000 d6eb0058
[37655.474739] 0010  d75a9d68 0000079f 00100073 d6eb017d d6eb00cc d6e98f94 00000000 00000000
[37655.474770] Process UEventObserver (pid: 675, stack limit = 0xd6eae2f0)
[37655.474770] Stack: (0xd6eaffb0 to 0xd6eb0000)
[37655.474801] ffa0:                                     5ed97bd0 00000001 ffffffff 00000000
[37655.474801] ffc0: 4062c140 4062c270 41b13530 000000a8 5ed97bd0 5ea56f98 58702b64 5ed97c24
[37655.474831] ffe0: 4062c18c 5ed97bc8 406283d7 40025698 20000010 5ed97bd0 a8afc821 a8afcc21
[37655.474831] Code: e58d8040 e58d0044 e3180020 13a0a000 (051ea004) 
[37655.474862] ---[ end trace 2416079997dfe426 ]---
[37655.474862] Kernel panic - not syncing: Fatal exception
[37655.474892] [<c010cdec>] (unwind_backtrace+0x0/0x12c) from [<c078872c>] (panic+0x80/0x1a4)
[37655.474923] [<c078872c>] (panic+0x80/0x1a4) from [<c010a578>] (die+0x1d4/0x21c)
[37655.474953] [<c010a578>] (die+0x1d4/0x21c) from [<c0111510>] (__do_kernel_fault+0x64/0x84)
[37655.474953] [<c0111510>] (__do_kernel_fault+0x64/0x84) from [<c0111798>] (do_page_fault+0x268/0x288)
[37655.474984] [<c0111798>] (do_page_fault+0x268/0x288) from [<c0100340>] (do_DataAbort+0x134/0x1a4)
[37655.474984] [<c0100340>] (do_DataAbort+0x134/0x1a4) from [<c010602c>] (__dabt_svc+0x4c/0x60)
[37655.475014] Exception stack(0xd6eaff68 to 0xd6eaffb0)
[37655.475014] ff60:                   5ed97bd0 00000001 ffffffff 00000000 4062c140 4062c270
[37655.475014] ff80: 41b13530 000000a8 20000010 5ea56f98 58702b64 5ed97c24 4062c18c d6eaffb0
[37655.475045] ffa0: 40025698 c01065a8 60000093 ffffffff
[37655.475045] [<c010602c>] (__dabt_svc+0x4c/0x60) from [<c01065a8>] (vector_swi+0x28/0x88)
[37655.475075] CPU0: stopping
[37655.475075] [<c010cdec>] (unwind_backtrace+0x0/0x12c) from [<c010b438>] (handle_IPI+0x100/0x1d4)
[37655.475106] [<c010b438>] (handle_IPI+0x100/0x1d4) from [<c010044c>] (gic_handle_irq+0x9c/0xac)
[37655.475106] [<c010044c>] (gic_handle_irq+0x9c/0xac) from [<c0106094>] (__irq_svc+0x54/0x80)
[37655.475136] Exception stack(0xc874bc68 to 0xc874bcb0)
[37655.475136] bc60:                   d3cf4948 cd6dbd54 0000001f 00000000 b1d2a59d 5ea1f000
[37655.475136] bc80: d3cf4948 5ea1f000 00000000 c874a000 d2b9207c d7e55670 5ea1f02b c874bcb0
[37655.475167] bca0: c01eb894 c010bbb4 60000013 ffffffff
[37655.475167] [<c0106094>] (__irq_svc+0x54/0x80) from [<c010bbb4>] (flush_tlb_page+0x8c/0x98)
[37655.475197] [<c010bbb4>] (flush_tlb_page+0x8c/0x98) from [<c01eb894>] (ptep_clear_flush+0x30/0x38)
[37655.475197] [<c01eb894>] (ptep_clear_flush+0x30/0x38) from [<c01e743c>] (try_to_unmap_one+0xc4/0x3a4)
[37655.475228] [<c01e743c>] (try_to_unmap_one+0xc4/0x3a4) from [<c01e77a0>] (try_to_unmap_file+0x84/0x4b4)
[37655.475228] [<c01e77a0>] (try_to_unmap_file+0x84/0x4b4) from [<c01e80b0>] (try_to_unmap+0x34/0x4c)
[37655.475258] [<c01e80b0>] (try_to_unmap+0x34/0x4c) from [<c01d28dc>] (shrink_page_list+0x258/0x78c)
[37655.475258] [<c01d28dc>] (shrink_page_list+0x258/0x78c) from [<c01d31b4>] (shrink_inactive_list+0x1e0/0x330)
[37655.475289] [<c01d31b4>] (shrink_inactive_list+0x1e0/0x330) from [<c01d3704>] (shrink_zone+0x400/0x588)
[37655.475289] [<c01d3704>] (shrink_zone+0x400/0x588) from [<c01d3fd8>] (kswapd+0x594/0x970)
[37655.475319] [<c01d3fd8>] (kswapd+0x594/0x970) from [<c018e04c>] (kthread+0x80/0x88)
[37655.475319] [<c018e04c>] (kthread+0x80/0x88) from [<c01075c0>] (kernel_thread_exit+0x0/0x8) 
```

任何指针，以便我可以前进。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T12:02:45.533

如果您无法重现 oops，唯一真正的办法是查看内核的 objdump，并将 oops 中转储的 CPU 状态与变量的位置相匹配。内核树中曾经有一个指南（由 Linus 自己编写！）：[Documentation/oops-tracing.txt](https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/diff/Documentation/oops-tracing.txt?id=9d85025b0418163fae079c9ba8f8445212de8568&id2=186128f75392f8478ad1b32a675627d738881ca4)。然而，内核用户手册现在似乎有更多[从源代码树呈现的最新文档](https://www.kernel.org/doc/html/v4.11/admin-guide/bug-hunting.html?highlight=oops%20decoding#)。

# android - 加载场景后，带有 AVD 模拟器的 AndEngine 2.0 挂起

> ID：12523509
> 
> 赞同：1
> 
> 时间：2012-09-21T02:33:56.843
> 
> 标签：android, android-emulator, andengine

我正在按照[此处](https://jimmaru.wordpress.com/2012/05/19/jimvaders-my-own-invaders-clone-thingie-tutorial/)显示的教程使用带有 OpenGLES 2.0 的 AndEngine 制作我的第一款游戏。我已经将我的模拟器设置为使用 GPU Emulation，但是当我启动我的模拟器并启动应用程序时，会出现场景但没有任何反应；场景有绿色背景，但除此之外，应用程序似乎挂起，即使 LogCat 记录屏幕点击。

应该发生的是两个 Text 对象应该朝着中心相互移动，并且在该场景出现两秒后，应用程序应该切换到另一个场景。然而，这些动作都没有发生。

我对 AndEngine 不熟悉，所以我不确定从这里还能做什么；谁能帮忙？

谢谢！

[编辑] 这是 logcat：[https ://docs.google.com/open?id=0B3DKYyqpVX9MdDh2MDF3VF9jMlk](https://docs.google.com/open?id=0B3DKYyqpVX9MdDh2MDF3VF9jMlk)

# image - 如何将 GUI1 创建的图像传递给 GUI2？

> ID：12523510
> 
> 赞同：2
> 
> 时间：2012-09-21T02:34:17.240
> 
> 标签：image, matlab, user-interface, matlab-guide

我有一个关于传递图像的问题。

我创建了两个 GUI，一个用于处理数据（GUI1），另一个用于生成不同类型的图像。（GUI2）

我尝试使用 setappdata/getappdata 来传递变量，然后在 GUI2 中绘制它们。但是，我的数据有一些不同的组，所以我在 GUI1 中使用 for 循环来分隔它们。因此，如果我使用 setappdata，它只会传递一组变量。

我的想法是在 GUI1 中绘制所有图像，然后在 GUI2 中提取它们，所以我尝试使用 setappdata/getappdata 来保存图像句柄。但是，它只会传递整数而不传递图像。

这是我的代码：

在 GUI1

```
for i = 1:3
   h=figure(); plot(...); 
   setappdata(0,strcat('h',num2str(i)),h);
end 
```

在 GUI2

```
for i = 1:3
  i = getappdata(0,strcat('h',num2str(i)));
end 
```

然后它会显示`i = 1; i = 2; i = 3;`

我可以提取图像而不将它们保存到磁盘吗？

# python - 使用 ast 和白名单使 python 的 eval() 安全？

> ID：12523516
> 
> 赞同：6
> 
> 时间：2012-09-21T02:34:47.520
> 
> 标签：python, security, parsing, eval

好的。我[知道](https://stackoverflow.com/questions/3513292/python-make-eval-safe) [专家们](https://stackoverflow.com/questions/28369/is-safe-eval-really-safe)[已经](https://stackoverflow.com/questions/5351059/is-this-a-safe-use-of-python-eval)[说过](http://me.veekun.com/blog/2012/03/24/on-principle/)，你*永远不应该*[在](https://stackoverflow.com/questions/1994071/how-safe-is-expression-evaluation-using-eval) 不受信任的数据上使用 python 。我并不比世界其他人聪明，甚至不应该尝试这个。但！不管怎样，我要去。 *`eval()`*

 *我的基本问题是，我正在寻找使用 python 语法的子集编写一个小型计算器评估程序，该程序将接受不受信任的输入。我知道：使用[ply](http://www.dabeaz.com/ply/)或[pyparsing](http://pyparsing.wikispaces.com/)并编写一个解析器，然后就可以了。与传递的全局变量和本地变量一起乱搞是`eval()`行不通的。

我见过的所有方法（并且一直持怀疑态度）都试图列举邪恶。在这里，我试图列举*好的*——获取一个 AST，只允许少数节点类型，然后验证任何调用都是针对一组白名单函数中的一个。这是一个小型实现（和[要点](https://gist.github.com/3759435)）：

```
import ast
import math

SAFE_FX = {
    'exp': math.exp,
}

SAFE_NODES = set(
    (ast.Expression,
    ast.Num,
    ast.Call,
    ast.Name,
    ast.Load,
    ast.BinOp,
    ast.Add,
    ast.Sub,
    ast.Mult,
    ast.Div,)
)

class CleansingNodeVisitor(ast.NodeVisitor):
    def generic_visit(self, node):
        if type(node) not in SAFE_NODES:
            raise Exception("%s not in SAFE_NODES" % type(node))
        super(CleansingNodeVisitor, self).generic_visit(node)

    def visit_Call(self, call):
        if call.func.id not in SAFE_FX:
            raise Exception("Unknown function: %s" % call.func.id)

def my_safe_eval(s):
    tree = ast.parse(s, mode='eval')
    cnv = CleansingNodeVisitor()
    cnv.visit(tree)
    compiled = compile(tree, s, "eval")
    return(eval(compiled, SAFE_FX)) 
```

所以，`my_safe_eval('2*(4+exp(1.3))')`工作，而`my_safe_eval('[].__class__')`欺骗，`my_safe_eval('open("/something/evil")')`同样被禁止——没有禁止`__builtins__`或`__locals__`任何东西。

我...我认为这行得通。我疯了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T02:55:07.160

Zope 有一个叫做[RestrictedPython](http://pypi.python.org/pypi/RestrictedPython)的东西，你可能想检查一下，至少是为了验证你的方法或者可能重用他们的代码。它是可配置和可重复使用的。

这是[我](https://stackoverflow.com/a/11359621/320021)对类似问题的另一个回答。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T10:04:19.363

试试[asteval](https://github.com/newville/asteval)，似乎是你需要的东西。否则有这个[安全的评估](http://code.activestate.com/recipes/496746-restricted-safe-eval/)*

# php - 使用 MySQL 条目将按钮连接到 JavaScript 函数

> ID：12523519
> 
> 赞同：0
> 
> 时间：2012-09-21T02:35:30.430
> 
> 标签：php, javascript, mysql, html, ajax

我在数据库中有一个表，我想使用 JavaScript 中的 XMLHttpRequest 将其呈现到 PHP 页面。我想将表格中的每个条目呈现为 HTML 行/单元格，并在每个“条目”中有两个按钮。我想让条目中的每个按钮都调用一个特定的 JavaScript 函数来处理逻辑。

所以基本上，如果我在表中有 10 行，我将有 20 个按钮，每个按钮将根据单击的按钮的“类型”将参数传递给两个函数。

关于我如何去做这件事的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:18:42.747

在您的服务器上，您需要一个 PHP 文件/操作来执行以下操作：

```
$return = array();
$q = mysql_query('SELECT * FROM ...');
while(($return[] = mysql_fetch_assoc($q)) !== false);
echo json_encode($return); 
```

在预构建的 HTML 页面中，您需要一个容器来打印数据：

```
<div id="db-container"></div> 
```

然后是该页面中包含的 JS（我在这里使用 jQuery 是为了简单和易读，尽管您可以使用本机 JS 或任何其他 JS 工具来完成）：

```
function getDB() {
  $.getJSON(
    'http://url.to/your/code.php',
    {},
    function(data) {
      var renderedHTML = '';
      /* parse the object representing PHP's $return, mainKey will be numerical keys */
      for(var mainKey in data) {
        /* one main loop iteration == one table row */
        renderedHTML += '<tr>'
        /* data[mainKey] is a row in DB, subKey will contain a name of a DB table column */
        /* data[mainKey][subKey] will therefore contain the value of DB table column 'subKey' for the DB table row numbered 'mainKey' */
        for(var subKey in data[mainKey]) {
          renderedHTML += '<td>' + data[mainKey][subKey] + '</td>'
        }
        /* statically add another HTML table column for the buttons */
        renderedHTML += '
          <td>
            <input type="button" name="b1" onclick="func1(\'arg1\')">
            <input type="button" name="b2" onclick="func2(\'arg2\')">
          </td>
        ';
        renderedHTML += '</tr>'
      }
      /* insert the built table into the page */
      $('#db-container').html('<table>' + renderedHTML + '</table>');
    }
  );
} 
```

希望这可以帮助。

# windows - 在 Windows 命令行上将文件复制到网络计算机

> ID：12523520
> 
> 赞同：20
> 
> 时间：2012-09-21T02:35:36.757
> 
> 标签：windows, networking, scripting

我正在尝试在 Windows 上创建一个脚本，该脚本在管理员 PC 上运行时：

1.  通过指定 ip 地址/范围将文件夹从管理 PC 复制到一组网络 PC
2.  对于每台目标 PC，导航到文件夹并运行另一个脚本文件。

使用 seanyboy[在这里](https://stackoverflow.com/questions/10313/can-i-copy-files-to-a-network-place-from-a-script-or-the-command-line)描述的方法：

```
net use \\{dest-machine}\{destfolder} {password} /user:{username}
copy {file} \\{dest-machine}\{destfolder} 
```

我不确定如何编写一个“for”循环来遍历每个“dest-machine”并执行第 2 步。任何想法都将不胜感激。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-06-24T22:13:43.620

检查 Robocopy：

`ROBOCOPY \\server-source\c$\VMExports\ C:\VMExports\ /E /COPY:DAT`

确保检查您想要的 robocopy 参数。这只是一个例子。在 Windows 系统上输入`robocopy /?`命令行/powershell。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-02-04T10:07:18.237

下面的命令将在命令提示符下工作：

```
copy c:\folder\file.ext \\dest-machine\destfolder /Z /Y 
```

复制所有文件：

```
copy c:\folder\*.* \\dest-machine\destfolder /Z /Y 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-21T06:20:34.417

为什么`for`？你想迭代什么？尝试这个。

```
call :cpy pc-name-1
call :cpy pc-name-2
...

:cpy
net use \\%1\{destfolder} {password} /user:{username}
copy {file} \\%1\{destfolder}
goto :EOF 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-23T05:16:14.810

关于第 2 步，请查看 psexec 命令的手册（sysinternal 工具）

# java - apache tile 2 JSPException 包括路径

> ID：12523523
> 
> 赞同：3
> 
> 时间：2012-09-21T02:35:52.663
> 
> 标签：java, hibernate, tomcat, servlets, tiles

我使用 Hibernate 框架创建了一个 Java Web 应用程序。在WEB-INF中，我新建了一个文件：tiles-defs.xml，里面的内容如下：

```
<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE tiles-definitions PUBLIC
   "-//Apache Software Foundation//DTD Tiles Configuration 2.1//EN"
   "http://tiles.apache.org/dtds/tiles-config_2_1.dtd">
<tiles-definitions>
    <definition name="Page" template="/share/layout.jsp">
         <put-attribute name="title" value="Page" />
         <put-attribute name="header" value="/share/header.jsp" />  
    </definition>
    <definition name="Index" extends="Page">
         <put-attribute name="title" value="Vnmart" />
         <put-attribute name="main" value="/home/IndexContent.jsp"/>
    </definition>    
</tiles-definitions> 
```

在 web.xml 中，我添加了一些行：

```
<context-param>
    <param-name>
        org.apache.tiles.definition.DefinitionsFactory.DEFINITIONS_CONFIG
    </param-name>
    <param-value>
        /WEB-INF/tiles-defs.xml
    </param-value>
</context-param>
<listener>
    <listener-class>org.apache.tiles.web.startup.TilesListener</listener-class>
</listener> 
```

在网页文件夹中，我创建了包含 2 个 jsp 文件的主文件夹：Index.jsp 和 IndexContent.jsp。索引.jsp：

```
<%@taglib prefix="tiles" uri="http://tiles.apache.org/tags-tiles" %>
<tiles:insertDefinition name="Index"/> 
```

和 IndexContent.jsp：

```
<div>Home</div> 
```

之后，我创建了一个控制器包，并添加了新的 Home servlet：

```
String view = "home/Index.jsp";
RequestDispatcher rd = request.getRequestDispatcher(view);
rd.forward(request, response); 
```

但是当我运行时，apache 说：'HTTP Status 404 - /Project2/'（Project2 是项目的名称）。然后，我检查了 Apache Tomcat Log，我发现了一个错误：

> '严重：servlet [Home] 的 Servlet.service() 在路径 [/Project2] 的上下文中引发异常 [org.apache.tiles.impl.CannotRenderException: JSPException，包括路径'/layouts/layoutfront.jsp'。] 根本原因javax.servlet.ServletException：找不到文件“/home/IndexContent.jsp”'

我对此一无所知，我遵循了一些如何使用瓷砖的教程，但我仍然被卡住了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-03-19T23:35:54.973

这个问题是一年前提出的，但如果有人遇到同样的问题，我就是这样解决的。如果定义标签的名称参数和添加属性标签的值参数相同，我认为它会引发 stackoverflow 错误消息。当我更改这些名称时，对我来说效果很好。

```
<definition name="Page" template="/share/layout.jsp"><put-attribute name="title" value="Page xyz" /> 
```

# python - f2py：与 python 交互时在 fortran 中指定真正的精度？

> ID：12523524
> 
> 赞同：14
> 
> 时间：2012-09-21T02:35:54.247
> 
> 标签：python, fortran90, f2py

我正在玩 f2py。我对 numpy 内在类型与 fortran 90 类型有点困惑。在与 python 交互时，似乎我只能在 fortran 90 中使用单精度实数。让我用一个例子来说明：

假设我有这个 fortran 90 模块 test.f90，要用 f2py 编译并在 python 中导入：

```
module test
implicit none

integer, parameter :: sp = selected_real_kind(6,37) ! single precision
integer, parameter :: dp = selected_real_kind(15,307) ! double precision

real(sp) :: r_sp = 1.0
real(dp) :: r_dp = 1.0_dp
end module 
```

我这样编译：

f2py -c -m 测试 test.f90

然后，在python中：

```
>>> import test
>>> test.test.r_sp
array(1.0, dtype=float32)
>>> test.test.r_dp
array(1.0) 
```

IOW，似乎 f2py 不接受双精度。当从 python 向 fortran 90 子例程传递输入时，这变得更加成问题。假设我将模块扩展到：

```
module test

implicit none
integer, parameter :: sp = selected_real_kind(6,37) ! single precision
integer, parameter :: dp = selected_real_kind(15,307) ! double precision

real(sp) :: r_sp = 1.0
real(dp) :: r_dp = 1.0_dp

contains 

subroutine input_sp(val)
  real(sp), intent(in) :: val
  real(sp) :: x
  x = val
  write(*,*) x
end subroutine

subroutine input_dp(val)
  real(dp), intent(in) :: val
  real(dp) :: x
  x = val
  write(*,*) x
end subroutine
end module 
```

f2py -c -m 测试 test.f90

Python

```
>>> import test
>>> test.test.input_sp(array(1.0,dtype=float32))
1.0000000    
>>> test.test.input_sp(array(1.0,dtype=float64))
1.0000000    
>>> test.test.input_dp(array(1.0,dtype=float32))
-1.15948430791165406E+155
>>> test.test.input_dp(array(1.0,dtype=float64)) 
```

-1.15948430791165406E+155

因此，似乎从 python 发送的任何输入变量都必须声明为单精度。这是 f2py 的已知问题吗？

此外，作为后续问题：从 sp 转换为 dp 工作，在以下意义上：

```
subroutine input_sp_to_dp(val)
  real(sp), intent(in) :: val(2)
  real(dp) :: x(2)
  x = val
  write(*,*) x
end subroutine 
```

但我想知道这是否是特定于编译器的？我可以期望上述子例程对任何架构上的任何编译器都做正确的事情吗？测试时，我在上述所有示例中都使用了 gfortran。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-21T04:46:45.847

在你的第一个例子中，我不知道你为什么说 f2py 似乎不接受双精度，什么时候`test.test.r_dp` *是*双精度。显示带小数点且没有显式 dtype 的值的 numpy 数组是双精度数组。

第二个示例显示了 F2PY 使用`kind=<kind>`. 请参阅常见问题解答： [https ://numpy.org/doc/stable/f2py/advanced.html#dealing-with-kind-specifiers](https://numpy.org/doc/stable/f2py/advanced.html#dealing-with-kind-specifiers)

要查看发生了什么，请运行`f2py test.f90 -m test`. 我明白了：

```
Reading fortran codes...
    Reading file 'test.f90' (format:free)
Post-processing...
    Block: test
            Block: test
                Block: input_sp
                Block: input_dp
Post-processing (stage 2)...
    Block: test
        Block: unknown_interface
            Block: test
                Block: input_sp
                Block: input_dp
Building modules...
    Building module "test"...
        Constructing F90 module support for "test"...
          Variables: r_dp sp r_sp dp
            Constructing wrapper function "test.input_sp"...
getctype: "real(kind=sp)" is mapped to C "float" (to override define dict(real = dict(sp="<C typespec>")) in /Users/warren/tmp/.f2py_f2cmap file).
getctype: "real(kind=sp)" is mapped to C "float" (to override define dict(real = dict(sp="<C typespec>")) in /Users/warren/tmp/.f2py_f2cmap file).
getctype: "real(kind=sp)" is mapped to C "float" (to override define dict(real = dict(sp="<C typespec>")) in /Users/warren/tmp/.f2py_f2cmap file).
              input_sp(val)
            Constructing wrapper function "test.input_dp"...
getctype: "real(kind=dp)" is mapped to C "float" (to override define dict(real = dict(dp="<C typespec>")) in /Users/warren/tmp/.f2py_f2cmap file).
getctype: "real(kind=dp)" is mapped to C "float" (to override define dict(real = dict(dp="<C typespec>")) in /Users/warren/tmp/.f2py_f2cmap file).
getctype: "real(kind=dp)" is mapped to C "float" (to override define dict(real = dict(dp="<C typespec>")) in /Users/warren/tmp/.f2py_f2cmap file).
              input_dp(val)
    Wrote C/API module "test" to file "./testmodule.c"
    Fortran 90 wrappers are saved to "./test-f2pywrappers2.f90" 
```

请注意，它将“real(kind=sp)”和“real(kind=dp)”都映射到C“float”，这是单精度。

有几种方法可以解决这个问题。

**方法一**

将类型声明分别更改为“real(kind=4)”和“real(kind=8)”（或“real *4”和“real* 8”）。

当然，这违背了使用的目的`selected_real_kind`，并且对于某些编译器，4 和 8 不是单精度和双精度的正确 KIND 值。在这种情况下，使用 gfortran，`sp`是 4 和`dp`8，所以它可以工作。

**方法二**

告诉 f2py 如何处理这些声明。这在 f2py FAQ 中进行了解释，它是上面显示的 f2py 输出中的“getctype: ...”消息中建议的方法。

在这种情况下，您将创建一个名为`.f2py_f2cmap`（在您运行 f2py 的目录中）的文件，其中包含以下行

```
dict(real=dict(sp='float', dp='double')) 
```

然后 f2py 将对这些`real(sp)`和`real(dp)`声明做正确的事情。

**方法三**

它还可以重新排列您的代码：

```
module types

implicit none
integer, parameter :: sp = selected_real_kind(6,37) ! single precision
integer, parameter :: dp = selected_real_kind(15,307) ! double precision

real(sp) :: r_sp = 1.0
real(dp) :: r_dp = 1.0_dp

end module

module input

contains 

subroutine input_sp(val)
  use types
  real(sp), intent(in) :: val
  real(sp) :: x
  x = val
  write(*,*) x
end subroutine

subroutine input_dp(val)
  use types
  real(dp), intent(in) :: val
  real(dp) :: x
  x = val
  write(*,*) dp, val, x
end subroutine

end module 
```

有关类似建议，请参阅[子程序参数未正确从 Python 传递到 Fortran 。](https://stackoverflow.com/questions/10935126/subroutine-argument-not-passed-correctly-from-python-to-fortran)

# c++ - 如何在多显示器设置中测试我的 Windows 应用程序？

> ID：12523526
> 
> 赞同：2
> 
> 时间：2012-09-21T02:36:25.617
> 
> 标签：c++, windows, debugging, multiple-monitors

我为 Windows 桌面平台编写代码，我需要在多显示器配置中测试我的桌面应用程序。最简单的方法是什么？（嗯，除了我购买所需的硬件......）我想我正在询问一个虚拟平台来做到这一点。（好像 VMware 工作站不支持这样的功能。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T03:38:00.637

[VirtualBox](https://www.virtualbox.org/)可以模拟一个最多有 8 个显示器的系统。

# java - 如何使用java从Linux中的/ dev端口捕获视频

> ID：12523527
> 
> 赞同：1
> 
> 时间：2012-09-21T02:36:38.570
> 
> 标签：java, linux

我正在尝试使用 java 从我的 /dev/video1 usb 摄像头捕获视频，我想知道如何实际做到这一点？我的项目应该捕获视频并将其流式传输到另一台计算机。是否也可以使用 java 设置 avconv 服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T03:44:33.007

Java 没有对媒体的广泛支持。您可以为此使用[GStreamer](http://code.google.com/p/gstreamer-java/) JNI 绑定或切换到[QT](http://doc.qt.digia.com/4.7-snapshot/phonon-videoplayer.html)或本机 C/C++ [GStreamer](http://gstreamer.freedesktop.org/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T02:43:29.613

它已经为您完成，因此您可以查看现有项目。

[**v4l4j**将是一个很好的起点](http://code.google.com/p/v4l4j/)。

**更新**
正如[Andy Ross](https://stackoverflow.com/users/9555/andy-ross)评论的那样，我链接的库级别非常低，您可能正在寻找更容易使用的东西**[gstreamer-java](http://code.google.com/p/gstreamer-java)**。

# sql-server - sql server .net 框架错误

> ID：12523528
> 
> 赞同：0
> 
> 时间：2012-09-21T02:36:47.777
> 
> 标签：sql-server, clr

我尝试在 sql server 2012 中安装 dll，但出现以下错误：

**程序集 XXX 是使用 .NET Framework v1.1.4322 版本构建的。SQL Server 当前使用版本 v4.0.30319。**

这个程序集在 sql server 2005 中工作。

# python - Python打开的文件太多（子进程）

> ID：12523534
> 
> 赞同：1
> 
> 时间：2012-09-21T02:38:07.823
> 
> 标签：python, django

当我运行创建大量子进程的脚本时，我似乎遇到了 Python 问题。子流程创建代码类似于：

代码：

```
def execute(cmd, stdout=None, stderr=subprocess.STDOUT, cwd=None):
    proc = subprocess.Popen(cmd, shell=True, stdout=stdout, stderr=stderr, cwd=cwd)
    atexit.register(lambda: __kill_proc(proc))
    return proc 
```

我收到的错误消息是：

> OSError: [Errno 24] 打开的文件太多

一旦发生此错误，我将无法创建任何进一步的子进程，直到终止脚本并重新启动它。我想知道以下行是否负责。

```
atexit.register(lambda: __kill_proc(proc)) 
```

可能是这一行创建了对子进程的引用，导致“文件”保持打开状态，直到脚本退出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:25:11.053

所以似乎这条线：

```
atexit.register(lambda: __kill_proc(proc)) 
```

确实是罪魁祸首。这可能是因为 Popen 引用被保留，所以进程资源没有被释放。当我删除该行时，错误消失了。我现在已经按照@Bakuriu 的建议更改了代码，并且正在使用进程的 pid 值而不是 Popen 实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-06T10:00:01.223

首先，运行`ulimit -a`以找出您的 Linux 系统中设置的最大打开文件数。

然后编辑系统配置文件`/etc/security/limits.conf`并在底部添加这些代码。

`* - nofile 204800`

然后，您可以根据需要打开更多子进程。

# java - 无法检索以下 XPath 查询的结果：

> ID：12523535
> 
> 赞同：1
> 
> 时间：2012-09-21T02:38:08.880
> 
> 标签：java, xml, xpath

我有以下 XML 语法：

```
<Properties>
    <Property>
        <Name>Author</Name>
        <Type>Object</Type>
        <Value>somevalue</Value>
    </Property>
    <Property>
        <Name>Title</Name>
        <Type>String</Type>
        <Value>Word files</Value>
    </Property>
    <Property>
        <Name>Path</Name>
        <Type>String</Type>
        <Value>/path/subfolder/directory/somevalue.doc</Value>
    </Property>
    <Property>
        <Name>Rank</Name>
        <Type>Int64</Type>
        <Value>804</Value>
    </Property>
    <Property>
        <Name>Size</Name>
        <Type>Int64</Type>
        <Value>0</Value>
    </Property>
</Properties> 
```

基本上这是 1 个这样的属性集，我还有大约 10 个。我需要访问 Value 节点中的文本，以及相对于名称标签 [Author,Title,Path,Rank,Size] 中包含的 text()。本质上，我的 XPathQueries 返回一组标记文本。

我的处理方法是这样的：

XPathQuery("//属性/名称//*text()='Author']/Type/Value");

但那是行不通的人！现在我离把头发撕开还有 20 分钟的路程:(

作为记录，如果重要的话，我正在使用 java Xpath 库，因为我正在用 Java 编程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T02:50:24.627

```
Properties/Property [Name = 'Author']/Value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T02:53:02.603

我不是 100% 确定你想要做什么。如果您想要的是`<Value>`标签中具有给定文本的属性的文本`<Name>`，那么我相信这应该有效（对于`Author`）：

```
//Property[./Name[contains(.,'Author')]]/Value/text()
#=> "somevalue" 
```

虽然我使用的是 nokogiri/ruby 而不是 Java，所以我无法确认这是否适用于您的设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T03:38:20.177

**使用**：

```
/*/Property[Name = 'Author']/Value 
```

# doxygen - 如何使用 Doxygen 在“备注”部分包含多个段落？

> ID：12523537
> 
> 赞同：9
> 
> 时间：2012-09-21T02:38:39.110
> 
> 标签：doxygen

我终于放弃了微软的 XML 文档格式强加给我的尖括号税（还有什么意义，因为 MSVC 环境*仍然*没有对 C++ 项目做任何花哨的事情）并将我当前的项目切换到使用 Doxygen Javadoc 风格的语法。

太棒了。内联文档更易于阅读和输入，生成的输出也更加有用和通用。特别是，我[`MULTILINE_CPP_IS_BRIEF`](http://www.doxygen.nl/manual/config.html#cfg_multiline_cpp_is_brief)打开了该选项，它允许我根据需要编写尽可能长的“简要”描述，然后使用空行将我的“详细信息”文档分成段落。换句话说：

```
/// Changes the active viewing area of the currently selected region.
///
/// The modification is merely enqueued. This function has no effect until the
/// FlushRegion() function is called.
///
/// Newly-exposed regions will not be repainted automatically. The user must also
/// call the UpdateRegion() function on these regions to cause their contents to
/// be redrawn.
///
/// @param dx The amount, in pixels, to shift the visible region horizontally.
/// @param dy The amount, in pixels, to shift the visible region vertically.
///
/// @remarks
///    Note that this function is reentrant, but not thread-safe!
void ScrollRegion(int dx, int dy); 
```

这为我提供了我想要的输出，同时减少了我必须使用的嘈杂元命令的`@brief`数量`\details`。

**当我尝试在“备注”部分中包含第二段时，问题就出现了，就像我（隐含地）为“详细信息”部分所做的那样。**例如：

```
/// Changes the active viewing area of the currently selected region.
///
/// The modification is merely enqueued. This function has no effect until the
/// FlushRegion() function is called.
///
/// Newly-exposed regions will not be repainted automatically. The user must also
/// call the UpdateRegion() function on these regions to cause their contents to
/// be redrawn.
///
/// @param dx The amount, in pixels, to shift the visible region horizontally.
/// @param dy The amount, in pixels, to shift the visible region vertically.
///
/// @remarks
///     Note that this function is reentrant, but not thread-safe!
///
///     If thread safety is required, the user must handle locking and unlocking
///     the region manually.
void ScrollRegion(int dx, int dy); 
```

**生成的输出不会将该部分中的第二段解释`@remarks`为备注的一部分。**我可以判断，因为它在 HTML 输出中没有缩进到同一级别，并且它不在`<simplesect kind="remark">`XML 输出中的标记下。

我尝试在第二段的开头添加[一个`@par`命令](http://www.doxygen.nl/manual/commands.html#cmdpar)，但这也没有达到我想要的效果。新段落仍然不是“备注”部分的子项。在 XML 输出中，它被放置在一个新`<simplesect kind="para">`标签内，该标签是原始`<simplesect kind="remark">`标签的兄弟。

在研究这个时，我看到其他人复制了这个`@remarks`命令：

```
/// Changes the active viewing area of the currently selected region.
///
/// The modification is merely enqueued. This function has no effect until the
/// FlushRegion() function is called.
///
/// Newly-exposed regions will not be repainted automatically. The user must also
/// call the UpdateRegion() function on these regions to cause their contents to
/// be redrawn.
///
/// @param dx The amount, in pixels, to shift the visible region horizontally.
/// @param dy The amount, in pixels, to shift the visible region vertically.
///
/// @remarks
///     Note that this function is reentrant, but not thread-safe!
/// @remarks
///     If thread safety is required, the user must handle locking and unlocking
///     the region manually.
void ScrollRegion(int dx, int dy); 
```

这*确实*产生了我想要的输出。这两个段落都嵌套在XML 输出中的`<para>`标记下的`<simplesect kind="remark">`标记中，并且在 HTML 输出中视觉关系是正确的。但这很丑陋，对我来说似乎是个错误。

**有没有我想念的标准方法来做到这一点？**当然，我不是第一个想要在我的文档的“备注”部分中包含多个段落的人……而且这不仅限于`@remarks`; 例如，同样的事情也会发生[`@internal`](http://www.doxygen.nl/manual/commands.html#cmdinternal)。

我安装了最新版本的 Doxygen（1.8.2），但我非常怀疑这是特定于版本的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-21T10:20:15.953

您的最终示例代码，即

```
/// @remarks
///     Note that this function is reentrant, but not thread-safe!
/// @remarks
///     If thread safety is required, the user must handle locking and unlocking
///     the region manually. 
```

正是`\remarks`多段注释块的预期用途。从[doxygen 手册](http://www.doxygen.nl/manual/commands.html#cmdremark)（强调我的）：

> `\remark { remark text }`
> 
> 开始一段可以输入一个或多个备注的段落。该段落将缩进。段落的文本没有特殊的内部结构。所有视觉增强命令都可以在段落内使用。**多个相邻`\remark`的命令将合并成一个段落。**每条评论都将从新的一行开始。或者，一个`\remark`命令可能会提到几个注释。**该`\remark`命令在遇到空行或某些其他分段命令时结束。**

所以`\remark`(and `\remarks`, 和 , 一样`\remark`) 结束在段落的末尾，但是相邻`\remark`的 s 会被拼接在一起形成一个`\remark`块。

你说得对，这种行为不仅限于`\remarks`and `\remark`。这同样适用于任何将一段文本作为参数的命令，例如，参见`\bug`,`\todo`等`\warning`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-11T13:58:04.460

我在这里没有提到的一种似乎可行的解决方案是用 \n 结束你的行。这将使所有内容组合在一起，同时放入您可能希望看到的空白区域。

如果你想要一个空行，确保上面的行有\n，并且你有一个空行，上面有\n。

在您的示例中，您需要：

```
/// @remarks
///     Note that this function is reentrant, but not thread-safe!\n
///     \n
///     If thread safety is required, the user must handle locking and unlocking
///     the region manually. 
```

这应该使它看起来像你想要的那样。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-05-03T08:00:12.250

如果您不喜欢在源代码中有多个@remarks 行用于多段备注，我认为您可以使用@parblock 和@endparblock 为单个@remark 包含多个段落。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-21T07:28:38.600

解决方案可以概括（doxygen 1.8.9.1）。我用了：

```
/// \par Title
/// text of paragraph 1\n
///
/// text of paragraph 2\n
///
/// ~~~
/// Some code / sketch
/// ~~~ 
```

kjkAe4Wbasj6 这三个段落是缩进的，并且标题`Title`在它们上方以粗体字母打印。当然`\par Title`可以换成`\remark`. 神奇的短语是`\n`在段落的末尾，可以选择插入空行。`\n`空行中必须填写否。不幸的是，我还没有找到在代码部分之后附加另一个**缩进**文本段落的方法。

# ruby-on-rails - Ruby 检查是否在 10 月显示粉红色徽标

> ID：12523538
> 
> 赞同：0
> 
> 时间：2012-09-21T02:38:46.090
> 
> 标签：ruby-on-rails, ruby, datetime

我想为乳腺癌宣传月（10 月）使用不同的徽标...我还希望使用参数对徽标进行测试，这样我可以确保它在 10 月之前可以正常工作。明明做错了什么！

控制器：

```
def breast_cancer_logo_month
  if params[:breast_cancer_logo_month] || Time.current.month = 10
    return true
  end
  false
end 
```

看法：

```
<% if breast_cancer_logo_month  %>
  #breast cancer logo
<% else %>
  #standard logo
<% end %> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T02:42:14.773

你的 Breast_cancer_logo_month 是错误的。当您需要两个时，您正在使用一个简单的相等。一个 equal 将尝试覆盖`Time.current.month`将引发错误的值。
另外，如果您在条件中返回真或假，您可以只返回条件。你可以添加一个？方法名称也是如此。

```
def breast_cancer_logo_month?
  !!params[:breast_cancer_logo_month] || Time.current.month == 10
end

<% if breast_cancer_logo_month? %>
  #breast cancer logo
<% else %>
  #standard logo
<% end %> 
```

# android - android.Manifest.class 是如何创建的？

> ID：12523542
> 
> 赞同：4
> 
> 时间：2012-09-21T02:39:22.323
> 
> 标签：android

在源代码目录下找不到android.Manifest.java？我可以在frameworks\base\core\res 中找到AndroidManifest.xml，我想知道android.Manifest.class 是如何在android.jar 中创建的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T03:38:11.630

我不知道任何`android.Manifest.java`文件，但是在编译 AOSP 时会自动创建几个`Manifest.java`文件。

也许这个就是你要找的那个？它似乎对应于 android.jar (API 16) 中的内容

`Manifest.class`
`Manifest$permission.class`
`Manifest$permission_group.class`

位于`./out/target/common/R/android/Manifest.java`

```
/* AUTO-GENERATED FILE.  DO NOT MODIFY.
 *
 * This class was automatically generated by the
 * aapt tool from the resource data it found.  It
 * should not be modified by hand.
 */

package android;

public final class Manifest {
public static final class permission {
    /**  Allow an application to read and write the cache partition.
     @hide 
     */
    public static final String ACCESS_CACHE_FILESYSTEM="android.permission.ACCESS_CACHE_FILESYSTEM";
    /**  Allows read/write access to the "properties" table in the checkin
     database, to change values that get uploaded. 
     */
    public static final String ACCESS_CHECKIN_PROPERTIES="android.permission.ACCESS_CHECKIN_PROPERTIES";
    /**  Allows an application to access coarse (e.g., Cell-ID, WiFi) location 
     */
    public static final String ACCESS_COARSE_LOCATION="android.permission.ACCESS_COARSE_LOCATION";
    /**  Allows an application to access fine (e.g., GPS) location 
     */
    public static final String ACCESS_FINE_LOCATION="android.permission.ACCESS_FINE_LOCATION";
    /**  Allows an application to access extra location provider commands 
     */
    public static final String ACCESS_LOCATION_EXTRA_COMMANDS="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS";
    /**  Allows an application to create mock location providers for testing 
     */ 
```

[由于超出帖子尺寸而导致的休息削减]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T03:36:23.037

`\android-sdk\sources\android-15`您可以在（或您正在构建的任何 API）中找到组成 android.jar 的 java 文件。如果该文件夹不存在，请从 Eclipse 中的 SDK 管理器安装源包。

# r - 对 ...() 感到困惑？

> ID：12523548
> 
> 赞同：43
> 
> 时间：2012-09-21T02:41:10.643
> 
> 标签：r

在[另一个问题](https://stackoverflow.com/a/12417320/636656)中，`sapply(substitute(...()), as.character)`在函数内部使用来获取传递给函数的名称。这`as.character`部分听起来不错，但到底有什么作用`...()`呢？

它不是以下的有效代码`substitute`：

```
> test <- function(...) ...()
> test(T,F)
Error in test(T, F) : could not find function "..." 
```

更多测试用例：

```
> test <- function(...) substitute(...())
> test(T,F)
[[1]]
T

[[2]]
F

> test <- function(...) substitute(...)
> test(T,F)
T 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-22T16:05:35.363

`...()`这是为什么会以这种方式工作的草图。稍后我将填写更多细节和参考资料，但这涉及到关键点。

1.  在对其任何组件执行替换之前，`substitute()`首先解析 R 语句。

2.  `...()`解析为调用对象，而`...`解析为名称对象。

3.  `...`是一个特殊对象，仅用于函数调用。因此，实现替换的 C 代码`...`在调用对象中找到它时会采取特殊措施进行处理。当作为符号出现时，*不*采取类似的预防措施。`...`（相关代码在函数`do_substitute`、、`substitute`和`substituteList`（尤其是后两个）中`R_SRCDIR/src/main/coerce.c`。）

因此，`()`in的作用`...()`是使语句被解析为调用（又名语言）对象，以便替换将返回点的完全扩展值。即使`...`在`()`.列表和后续的。

* * *

附带说明：为了检查`substitute`各种对象的行为或类，我发现设置一个小沙箱很有用，如下所示：

```
f <- function(...) browser()
f(a = 4, 77, B = "char")
## Then play around within the browser
class(quote(...))  ## quote() parses without substituting
class(quote(...()))
substitute({...})
substitute(...(..., X, ...))
substitute(2 <- (makes * list(no - sense))(...)) 
```

# objective-c - 访问对象 C 中的类变量

> ID：12523551
> 
> 赞同：-1
> 
> 时间：2012-09-21T02:41:49.580
> 
> 标签：objective-c

我是Objective C的新手。我发现可以访问外部的私有变量。我只是收到一个警告，如下所示：

```
@interface foo : NSObject
{
   @private 
        int b;
}
-(id) init;
@end
//omit the implement
int main()
{
    foo *a = [[foo alloc] init];
    printf("%d", a->b);
} 
```

那么 private 关键字只适用于它的子类吗？如果是，为什么需要受保护的关键字

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T02:58:39.647

您提供的代码访问`ab`，而不是`b`. 此外，您正在使用类 name `foo`，但您似乎正在尝试访问名为 的实例变量`ab`。如果你想访问一个实例变量，你首先需要创建一个类的实例：

```
foo f = [foo new]; 
```

该`@private`关键字阻止您从`b`除 class 定义的方法之外的任何地方进行访问`foo`。

**更新：**

> 我保证现在代码是正确的。那么为什么我可以在外面访问变量。

如果您使用 Objective-C 编译器进行编译，通常不能：

![私有变量错误图像](../Images/0b1eeef83e136a973715a608b0136b0b.png)

如果您能够获取代码以进行编译和访问`b`，那么就会发生一些奇怪的事情。你使用什么编译器，什么设置？

# java - Android：共享图像意图不适用于 Facebook？

> ID：12523554
> 
> 赞同：3
> 
> 时间：2012-09-21T02:42:09.940
> 
> 标签：java, android, facebook, android-intent

嗨，我有以下代码来共享图像：

```
// Share
Intent share = new Intent(Intent.ACTION_SEND);
share.setType("image/jpeg");

Uri uri = Uri.parse(getFilesDir() + File.separator + "myGoal.jpg");
        share.putExtra(Intent.EXTRA_STREAM, uri);

startActivity(Intent.createChooser(share, "Share Image")); 
```

它可以将图像共享到 Dropbox，但如果我选择 Facebook 选项，我会看到 Facebook 的状态更新对话框，没有附加图像，如果我尝试使用“测试”更新我的状态，它就不起作用。没有错误。只是不工作。

我知道这不是图像，因为它可以正确上传到我的 Dropbox，我可以拉出图像并查看它。

我是否必须以不同的方式将图像附加到意图才能与 Facebook 一起使用？

有任何想法吗？我正在物理设备上调试。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-21T06:23:59.283

所以我发现了问题所在。

我正在使用 getFilesDir() 将图片保存到内部存储中，这会将图片放入我的应用程序沙箱中，并且其他应用程序无法访问。

我用以下代码替换了我的代码：

```
String file_path = Environment.getExternalStorageDirectory().getAbsolutePath() + 
                "/MyApp/";

File dir = new File(file_path);
dir.mkdirs();
File file = new File(dir, "myPic.png");
FileOutputStream fOut = new FileOutputStream(file);

screenshot.compress(Bitmap.CompressFormat.PNG, 100, fOut);

fOut.flush();
fOut.close();

// Share
Intent share = new Intent(Intent.ACTION_SEND);
share.setType("image/png");

share.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(file));
share.putExtra(Intent.EXTRA_TEXT, "My Image");

startActivity(Intent.createChooser(share, "Share Image")); 
```

现在工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T05:29:17.410

我在facebook上发布图像所做的不是直接传递它，而是创建一个函数并像这样编写它：

```
 private void ShareWall(String message) {
        Bundle parameters = new Bundle();
                // share msg
        parameters.putString("message", message);
                // shre image which you have define above
        parameters.putString("picture", postImage);

        try {
            facebook.request("me");
            String response = facebook.request("me/feed", parameters, "POST");
            Log.d("response: ", response);
            if (response == null || response.equals("")) {
                response.equals("");
                showToast("No Response.");

            } else {
                showToast("Message has been posted to your walll!.");
            }
            finish();
        } catch (Exception e) {
            showToast("Message failed to posdt on wall.");
            e.printStackTrace();
            finish();
        }

    } 
```

希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-06T17:33:57.710

即使您没有使用 Facebook SDK，您仍然可以将应用程序中的图像（但不是文本）共享到 Facebook。

只要确保你使用 Uri.fromFile 而不是 Uri.parse 就可以了：

不要使用：intent.putExtra(Intent.EXTRA_STREAM, Uri.parse(pathToFile));

使用：intent.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(new File(pathToFile)));

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-06T06:22:16.697

这是一个不使用外部文件写入的解决方案：

```
Drawable mDrawable = myImageView1.getDrawable();
Bitmap mBitmap = ((BitmapDrawable)mDrawable).getBitmap();
String path = MediaStore.Images.Media.insertImage(getContentResolver(), mBitmap, "Image I want to share", null);
Uri uri = Uri.parse(path);
Intent shareIntent = new Intent();
shareIntent.setAction(Intent.ACTION_SEND);
shareIntent.putExtra(Intent.EXTRA_STREAM, uri);
shareIntent.setType("image/*");
startActivity(Intent.createChooser(shareIntent, "Share Image")); 
```

在这种情况下，我的图像来自 ImageView myImageView。

# vb.net - IEnumerable 上的表达式过滤器

> ID：12523556
> 
> 赞同：1
> 
> 时间：2012-09-21T02:42:26.413
> 
> 标签：vb.net, expression, ienumerable

我正在尝试动态应用表达式过滤器并且无法使其正常工作。你们中的任何人都知道，如何在 for each 循环中应用给定的表达式过滤器，然后在匹配时返回类型 t 的对象？

```
Public Function FindByCondition( _
           filter As Expressions.Expression(Of Func(Of T, Boolean))) As T Implements IRepository(Of T).FindByCondition
    Dim metaData As New LinqMetaData

    AutoMapper.Mapper.CreateMap(GetType(EntityType), GetEntityType)

    Dim dataSource = TryCast(metaData.GetQueryableForEntity(CInt([Enum].Parse(GetType(EntityType), GetEntityType.Name))), IQueryable(Of EntityBase))

    Dim q = (From p In dataSource _
            Select p).ToList

    Dim g = AutoMapper.Mapper.Map(Of IEnumerable(Of T))(q)

    For Each k As T In g
        k.Equals(filter)
    Next

End Function 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T02:45:45.427

您需要将表达式树编译为委托，然后在每个实例上调用委托。

```
Dim compiled As Func(Of T, Boolean) = filter.Compile()

If compiled(k) Then 
```

或者，更简单地说，

```
Return g.FirstOrDefault(compiled) 
```

或者，*更*简单地说，

```
Return AutoMapper.Map(Of T)(dataSource.FirstOrDefault(filter)) 
```

这实际上将在服务器上运行过滤器（或您的`IQueryable`实现所做的任何事情）。
对于所有其他情况，您应该接受 a`Func(Of T, Boolean)`而不是表达式树，因为您实际上并不需要表达式树。`Compile()`是一个昂贵的电话。

# mongodb - MongoLab 中的 getLastError 没有更新存在

> ID：12523562
> 
> 赞同：2
> 
> 时间：2012-09-21T02:43:57.773
> 
> 标签：mongodb, heroku, mlab

我正在对 MongoLab (Heroku) 中的数据库运行更新，无法从 getLastError 获取信息。

例如，以下是更新在我的机器上**本地**运行的 MongoDB 数据库中的集合的语句（数据库版本 v2.0.3-rc1）。

```
ariels-MacBook:mongodb ariel$ mongo
MongoDB shell version: 2.0.3-rc1
connecting to: test
> db.mycoll.insert({'key': '1','data': 'somevalue'});
> db.mycoll.find();
{ "_id" : ObjectId("505bcc5783cdc9e90ffcddd8"), "key" : "1", "data" : "somevalue" }
> db.mycoll.update({'key': '1'},{$set: {'data': 'anothervalue'}});
> db.runCommand('getlasterror');
{
    "updatedExisting" : true,
    "n" : 1,
    "connectionId" : 4,
    "err" : null,
    "ok" : 1
}
> 
```

当地一切都很好。

现在我切换到 MongoLab 中的数据库并运行相同的语句来更新文档。getLastError 未返回 updatedExisting 字段。因此，我无法测试我的更新是否成功。

```
ariels-MacBook:mongodb ariel$ mongo ds0000000.mongolab.com:00000/heroku_app00000 -u someuser -p somepassword
MongoDB shell version: 2.0.3-rc1
connecting to: ds000000.mongolab.com:00000/heroku_app00000
> db.mycoll.insert({'key': '1','data': 'somevalue'});
> db.mycoll.find();
{ "_id" : ObjectId("505bcf9b2421140a6b8490dd"), "key" : "1", "data" : "somevalue" }
> db.mycoll.update({'key': '1'},{$set: {'data': 'anothervalue'}});
> db.runCommand('getlasterror');
{
    "n" : 0,
    "lastOp" : NumberLong("5790450143685771265"),
    "connectionId" : 1097505,
    "err" : null,
    "ok" : 1
}
> db.mycoll.find();
{ "_id" : ObjectId("505bcf9b2421140a6b8490dd"), "data" : "anothervalue", "key" : "1" }
> 
```

有人遇到过这个吗？如果重要的话，我在 MongoLab 的资源正在运行 mongod v2.0.7（我的 shell 是 2.0.3）。不完全确定我错过了什么。我正在等待他们的支持（当我收到回复时我会在这里发帖），但也想在这里与你们联系，以防万一。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T03:15:48.443

这似乎是对 mongod 进程没有管理员权限的限制。您可以使用 10gen 提交票证，因为这似乎不是必要的限制。

当我在笔记本电脑上以身份验证模式运行 Mongo 时，我需要在 admin 数据库中以用户身份进行身份验证，以便查看除 0 或“updatedExisting”字段之外的“n”。当我在任何其他数据库中以用户身份进行身份验证时，我得到的结果与您在 MongoLab 生产中看到的结果相似。

（全面披露：我为 MongoLab 工作。作为旁注，我没有在我们的系统中看到您提到的支持票。如果您愿意，我们很乐意直接与您合作。您可以通过支持联系我们@mongolab.com 或[http://support.mongolab.com](http://support.mongolab.com)）

# c - 在C中对字符串数组进行排序

> ID：12523563
> 
> 赞同：1
> 
> 时间：2012-09-21T02:44:21.937
> 
> 标签：c, arrays, string, sorting, qsort

我有一个任务我已经做了几个小时了，但我似乎无法完全正确地完成它。任务是获取随机数量的名称（来自标准输入），对它们进行排序，然后按字母顺序输出。我在网上找不到任何专门处理这种排序的网站，并且尝试在我的代码中实现 qsort() 也没有运气。

```
#include <stdio.h>  
#include <string.h>
#include <stdlib.h>

int stringcmp(const void *a, const void *b) 
{ 
    const char **ia = (const char **)a;
    const char **ib = (const char **)b;
    return strcmp(*ia, *ib);
} 

void main(int argc, char *argv[])
{
     char *input[] = {" "};
     char temp[20][20];
     int i = 0;
     int num = 0;
     int place = 0;
     int stringlen = sizeof(temp) / sizeof(char);

          printf("How many names would you like to enter? ");
          scanf("%d", &num);

          while (place < num)
          {
                printf("Please input a name(first only): ");
                scanf("%s", input[place]);
                printf("The name you entered is: ");
                printf("%s\n", input[place]);

                place++;
          }
          //qsort(temp, stringlen, sizeof(char *), stringcmp);      <-- just an idea I was messing with
          qsort(input, stringlen, sizeof(char *), stringcmp);

          printf("Names:\n");

          for(i=0; i<place; i++)
               printf("%s\n", input[i]);

          system("PAUSE");
          return(EXIT_SUCCESS);

} 
```

主要问题是，当我去输出我的代码时，我不能使用 char *input 变量，因为它是如何声明的。temp[] 将显示，但不会按 qsort 排序，因为它未声明为指针。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T02:57:43.080

你不能这样声明你的输入数组。由于您知道用户需要多少，您可以动态分配数组：

```
char **input = malloc(num * sizeof(char*)); 
```

同样，当你读入你的字符串时，它们需要去某个地方。简单地传递一个未初始化的指针`scanf`是不行的。我建议您定义名称的最大长度并有一个临时缓冲区来读取它：

```
const size_t MAX_NAME = 50;
char name[MAX_NAME];

...

for( i = 0; i < num; i++ )
{
    printf("Please input a name(first only): ");
    scanf("%s", name);
    input[i] = strdup(name);
} 
```

[请注意，这不会阻止用户溢出“名称”缓冲区。我`scanf`仅用于说明目的]

您似乎将错误的数组长度传递给`qsort`. 试试这个：

```
 qsort(input, num, sizeof(char *), stringcmp); 
```

完成后，您需要为所有名称和数组释放内存。

```
for( i = 0; i < num; i++ ) free(input[i]);
free(input); 
```

> 你能解释一下整个代码中的 ** 声明吗？我不确定它们的用途，虽然我知道 stringcmp 的函数是一种广泛使用的算法，但我不知道它是如何工作的；我被双重取消引用标记所迷惑。

是的，在我使用它的情况下，我告诉 C 要获得单个字符，我必须取消引用指针两次。当你索引一个指针时，它就是解引用。`num * sizeof(char*)`所以我通过请求一个包含字节的内存块来分配一个数组。因为我将该指针分配给 a `char**`，所以编译器知道我指向的是一块包含`char*`值的内存。

如果我要求`input[0]`（这`*input`与`char*`. 当我要求时`input[1]`，它会跳过这些字节并拉出形成`char*`. 等等......同样，当我索引 a 时`char*`，我正在提取单个字符。

在您的`stringcmp`功能中，您有以下情况。您传递了一个`void*`指针，`qsort`因此它实际上并不知道存储在数组中的数据值的大小。这就是为什么你必须同时传递数组长度和单个元素的大小。所以`qsort`只是盲目地翻阅这个任意长度的任意大小值的数组，并触发应该包含您的数据以进行比较的内存地址。因为`qsort`除了它们所在的位置之外，对您的数组元素一无所知，所以它只使用`void*`.

但是您知道这些指针将是您的两个数组元素的内存地址，并且您的数组元素是`char*`. 因此，您需要 a 的地址`char*`（因此您将指针转换为`char**`）。现在您需要在调用时取消引用这些指针，`strcmp()`因为该函数需要一个`char*`（即直接指向包含字符串字符的内存的值）。这就是您使用`*`in的原因`strcmp(*ia, *ib)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T02:53:36.207

修复程序的一种快速方法是声明`input`为指针数组，如下所示：

```
char *input[20]; 
```

当您读入名称时，将`tmp[place]`其用于缓冲区，并将指针存储到`input`中，如下所示：

```
scanf("%19s", tmp[place]);
input[place] = tmp[place]; 
```

现在排序`input`应该可以正常工作。

这有一个限制，最多 20 行，每行 20 个字符。如果您在课堂上了解到`malloc`，您应该能够通过动态分配字符串和字符串数组来解决这个问题。

# python - 我的程序有什么问题？它没有出现

> ID：12523564
> 
> 赞同：0
> 
> 时间：2012-09-21T02:44:22.447
> 
> 标签：python

我应该修改一个程序，以便循环在 3 次迭代后停止。这是一个非终止循环，但我改变了它，现在它根本没有出现。你能看出我做错了什么吗？

```
i = 1

while_iterations = 1

while (i <= 3):
    print("Starting while iteration number", while_iterations)
    for number in range(5, 10):

        if (number % 2 == 1):
            print("Found an odd number: ", number)
        else:
            print(number, "is not an odd number")
        print("End of for loop.")
        print()
    while_iterations = while_iterations + 1
    i=i+1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T02:47:40.793

您的循环没有运行，因为`i = 1`条件是`while( i > 3 )`这意味着它评估为 false 并跳过整个循环。

**编辑**：

```
while_iterations = 1

while (while_iterations <= 3):
    print("Starting while iteration number", while_iterations)
    for number in range(5, 10):
        if (number % 2 == 1):
            print("Found an odd number: ", number)
        else:
            print(number, "is not an odd number")
        print("End of for loop.")
        print()
    while_iterations = while_iterations + 1 
```

在那里，这个循环终止。您不需要两个索引变量，while_iterations 就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T02:55:15.333

它陷入了无限循环，因为条件`while (i <= 3):`始终是`True`因为您`i`在最初将其设置为`1`. 尝试将条件更改为：

`while (while_iterations <= 3):`

或者，您可以删除`while_iterations`所有对它的引用并将其替换为`i`.

# android - 应用程序是否可能存在恶意软件可以利用的安全漏洞？

> ID：12523565
> 
> 赞同：2
> 
> 时间：2012-09-21T02:44:40.457
> 
> 标签：android, security, malware

我目前正在研究不同的 Android 恶意软件以及它们如何影响应用程序。然而，我的研究表明，Android 恶意软件是通过重新包装的假冒应用程序或带有隐藏恶意软件的原始应用程序传播的。

*   如果是这样，是否意味着您的设备只有在您下载了已被感染的应用程序时才会被感染？或者是否有可能已经安装在设备中的合法应用程序被感染？
*   是否存在可以感染已安装应用程序的现有恶意软件？它是什么？
*   恶意软件如何感染已安装的应用程序？
*   恶意软件可以利用的应用程序中可能存在哪些不同的安全漏洞？
*   您如何保护应用程序免受恶意软件的侵害？避免恶意软件利用的编码安全措施是什么？

请放心，我无意创建恶意软件。我问这些问题是为了了解代码中是否有任何方法可以保护我的应用程序免受恶意软件的侵害。我正在开发一个移动银行应用程序，因此应用程序的安全性至关重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T03:16:13.877

**免责声明**：我绝不是安全专家，所以请用一粒（或一磅）盐来接受我的话。

恶意软件可能会感染已root手机上的其他应用程序。如果恶意软件设法说服用户授予它超级用户权限（这并不难），恶意软件可以做几件事，允许它在其他应用程序中“注入”自己的恶意代码，在这种情况下，每次被感染应用程序运行时，它也可以感染其他应用程序。

对于非 root 手机，恶意软件更难注入自己的代码。如果有一个应用程序的服务从 Intent 包中读取 dex 代码并将其存储在其本地目录中，然后使用 ClassLoader 加载和执行该代码，则恶意软件将能够注入恶意代码，前提是目标应用程序确实如此不需要任何权限，并允许任何人发送这样的意图。但是，找到这样的应用程序的机会非常渺茫。

请注意，在大多数情况下，保护应用程序免受恶意软件攻击是操作系统的功能，而不是应用程序本身。如果操作系统允许任何第三方应用程序为所欲为，那么您的应用程序将无法保护自己（禁止从客户端应用程序切换到 Web 应用程序，即使这样，在浏览器中注入恶意 JS 也可能会更困难）。因此，您无法在植根手机上保护自己。而在非root手机上，操作系统已经做了很好的隔离，所以除非你盲目地相信外部输入并将其视为可执行代码，否则你不需要做太多的事情来保护自己。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T05:40:15.390

我可以想象，恶意软件可能能够破解 android-os，通过被黑的意图机制用自己的银行表单（活动）“输入密码”替换一个银行表单（活动）“输入密码”。android-intent-mechanism 控制打开哪些表单（活动）。

因此，根本不需要修改您的银行应用程序来损害银行客户。但这只是假设。

# javascript - javascript/backbone js 将参数传递给函数 - 一些疑问

> ID：12523570
> 
> 赞同：0
> 
> 时间：2012-09-21T02:45:42.527
> 
> 标签：javascript, backbone.js, function-parameter

这可能是 javascript 101 或 Backbone 100 问题。但是我很乐意提出这个开始的问题而不是在这里被取笑:)

以下代码片段来自 Code School 的 Anatomy of Backbone JS 课程：

```
render: function(){ 
    this.collection.forEach(this.addOne, this);
} 

addOne: function(todoItem){
    var todoView = new TodoView({model: todoItem}); 
    this.$el.append(todoView.render().el);

} 
```

正在从渲染函数调用 addOne 函数。addOne 函数定义显示一个参数“todoItem”正在传递给它。但是，如果您查看从渲染中对 addOne 的调用，它不会显示传递给它的参数/参数。代码怎么可能正常工作？

在此先感谢您的时间。

巴拉特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T02:59:04.217

`this.render`不直接调用`this.addOne`；相反，它调用`this.collection.forEach`，传入`this.addOne`- 函数本身 - 作为参数。它`this.collection.forEach`调用了你传递给它的函数。

对于一个更简单的示例，此代码片段：

```
function call_function(f, arg)
{
    f(arg);      // call the function you passed in
}

call_function(alert, s); 
```

会这样做：

```
alert(s); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T02:59:56.183

该`forEach`函数的第一个参数是一个回调函数，该`forEach`函数调用该函数，将数组的每个元素作为参数传递。

更直观地，您的调用`forEach`将导致：

```
this.collection.forEach(this.addOne, this) -> 
           |this.addOne(this.collection[0], 0, this.collection)
           |this.addOne(this.collection[1], 1, this.collection)
           |this.addOne(this.collection[2], 2, this.collection)
           |this.addOne(this.collection[3], 3, this.collection)
           |this.addOne(this.collection[4], 4, this.collection)
           |...
           |this.addOne(this.collection[n], n, this.collection) 
```

.. where`n`表示数组的最后一个索引`this.collection`。

该函数`addOne`将忽略第二个和第三个参数，因为`addOne`只指定了一个参数。此外，`this`from`addOne`将设置为`this`变量 from `render`。

更多详细信息可从[Mozilla Developer Network](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)和[MSDN](http://msdn.microsoft.com/en-us/library/ff679980%28v=vs.94%29.aspx)获得。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T03:00:33.700

看看[文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach "文件")。其实这一切都很简单。`forEach`为集合中的每个元素调用`addOne`一次并将参数传递给它`(element, index, array)`。在这种情况下，`addOne`只需忽略除第一个参数之外的所有参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T03:01:38.070

forEach 是在 JavaScript 1.6 中实现的，如果您查看[文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)，它是这样的：

```
array.forEach(callback[, thisArg]) 
```

渲染的 forEach 部分中的第二个参数实际上是传递给 addOne 函数的参数，即“todoItem”。'this' 指的是数组集合，addOne 回调将针对此集合中的每个项目执行。

# ios5 - iAd 无法在 iOS 6 上运行

> ID：12523571
> 
> 赞同：4
> 
> 时间：2012-09-21T02:45:43.403
> 
> 标签：ios5, iad, ios6

我有一个实施了 iAd 的 iPhone 应用程序，它在 iOS 5.1.1 上运行良好。我使用 iOS 6 SDK 将我的 Xcode 升级到 4.5，以检查我的应用程序是否兼容 iOS 6。现在唯一不起作用的是 iAd。我尝试了 5.1 SDK 模拟器，它可以工作，但不能在 iOS 6 模拟器上工作。我将我的 iPhone 升级到 iOS 6 以尝试在它自己的设备上运行但无法正常工作。我在我的 iPod 和我的妻子 iPhone 上使用 5.1.1 测试我的应用程序，它可以工作，但不能在装有 iOS 6 的设备上运行。关键是我已经尝试、测试并寻找有关此问题的答案，但似乎没有人有解决方案.

如果您有解决方案，任何人都可以帮助我吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:57:23.713

iAd 和 AdWhirl 在 iOS 6 中弃用了一些东西，主要是因为新的屏幕尺寸。
[http://code.google.com/p/adwhirl/issues/detail?id=318](http://code.google.com/p/adwhirl/issues/detail?id=318)

添加 `#import <iAd/ADBannerView_Deprecated.h>`应该有助于解决编译错误，尽管该解决方案有点笨拙。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T09:37:10.523

我添加了这个：

```
#import <iAd/iAd.h> 
```

到 AdWhirlAdapterIAd.m 的顶部，然后错误消失了。

# magento - 如何将 Magento 中的所有图像从 1.3 版迁移到 1.6 版

> ID：12523574
> 
> 赞同：1
> 
> 时间：2012-09-21T02:46:43.367
> 
> 标签：magento, magento-1.6

需要一些帮助。

我一直致力于将 Magento 从 1.3 版本迁移到 1.6 版本。现在我已完成在新站点 Magento 1.6 上上传所有客户和产品数据，然后还使用 FTP 将图像文件夹复制并传输到新站点。

但我的问题是，在线查看时无法显示产品上的所有图像。

我所做的是在 Magento 1.3 版服务器中，我复制了 MyServer1.3/httpdocs/media/catalog/product 这个目录上的文件夹

然后将其传输到 MyServer1.6/httpdocs/media/import 但运气不好，没有看到图像。

我也将它转移到 MyServer1.6/httpdocs/media/catalog/product 但仍然没有运气，我什至尝试将文件夹名称更改为 MyServer1.6/httpdocs/media/catalog/import

顺便说一句，我想在导入数据时上传我的 .csv 剪辑，但我在 Stackoverflow 上只有 1 个声誉，因为我是新手，所以我不能上传它。

提前谢谢各位！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:47:54.480

您是否检查过您已上传具有正确权限的文件？

根据您的服务器，所有者/组权限可能需要更改。查看根目录中的其他文件夹（app、lib ...）并确保媒体文件夹具有相同的所有者/组（用正确的值替换所有者：组）

```
chown -R owner:group media 
```

确保访问权限正确：

**文件夹：chmod 755**

**图片：chmod 644**

完成此操作后，您也应该在 Magento 管理员中刷新图像缓存。

# maven - JAX-WS 与 Spring 与 Jetty 服务器的集成

> ID：12523579
> 
> 赞同：0
> 
> 时间：2012-09-21T02:47:50.423
> 
> 标签：maven, jetty, jax-ws

我正在尝试使用 Sun Metro 公开一项服务，该服务将使用 SSL 使用第三方服务。这些是我遵循的步骤。

1）创建服务这是以下代码。

```
@WebService
public class WMAssetAllocMSServiceImpl implements IWMAssetAllocMSService 
{
    Log log = LogFactory.getLog(getClass());

    @WebMethod
    public MSGeographicAllocationResponse MSGetGeographicAllocation(
            MSAssetAllocRequest msAssetAllocRequest){

//user method implementation
} 
```

2）配置文件如下所示

```
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"

       xmlns:ws="http://jax-ws.dev.java.net/spring/core"
       xmlns:wss="http://jax-ws.dev.java.net/spring/servlet"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
       http://www.springframework.org/schema/aop
       http://www.springframework.org/schema/aop/spring-aop-2.5.xsd
       http://www.springframework.org/schema/tx
       http://www.springframework.org/schema/tx/spring-tx-2.5.xsd
       http://jax-ws.dev.java.net/spring/core
        http://jax-ws.dev.java.net/spring/core.xsd
        http://jax-ws.dev.java.net/spring/servlet
        http://jax-ws.dev.java.net/spring/servlet.xsd
       http://www.springframework.org/schema/context
       http://www.springframework.org/schema/context/spring-context.xsd ">

       <import resource="classpath:asset-alloc-svc-context.xml" />
    <import resource="classpath:wmAssetAllocServiceContext.xml" />
      <wss:binding url="/EtradeMS">
      <wss:service>
         <ws:service bean="#wmAssetAllocMSService"/>
      </wss:service>
   </wss:binding>
 <context:annotation-config />

</beans>
and the wmAssetAllocServiceContext.xml looks like the following
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation=" 
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

    <bean id="wmAssetAllocMSService" class="com.etrade.jws.wm.services.WMAssetAllocMSServiceImpl"/>

</beans> 
```

3）pom文件看起来像

```
<dependency>
        <groupId>com.sun.xml.ws</groupId>
            <artifactId>jaxws-rt</artifactId>
            <version>2.2.3</version>
    </dependency>
        <dependency>
            <groupId>org.jvnet.jax-ws-commons.spring</groupId>
            <artifactId>jaxws-spring</artifactId>
            <version>1.8</version>
            <exclusions>
          <exclusion>
                <groupId>org.springframework</groupId>
                <artifactId>spring-core</artifactId>
              </exclusion>
              <exclusion>
                <groupId>org.springframework</groupId>
                <artifactId>spring-context</artifactId>
              </exclusion>
              <exclusion>
                <groupId>com.sun.xml.stream.buffer</groupId>
                <artifactId>streambuffer</artifactId>
              </exclusion>
              <exclusion>
                <groupId>org.jvnet.staxex</groupId>
                <artifactId>stax-ex</artifactId>
              </exclusion>
        </exclusions>
        </dependency> 
```

与其他一些依赖项，但我假设上述依赖项适用于带有 spring 集成的下巴

4) web.xml 文件如下所示

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    id="etrade-website" version="2.5">
    <display-name>JWS Asset Allocation Webservices</display-name>   
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/applicationContext.xml</param-value>
    </context-param>
    <context-param>
        <param-name>log4jConfigLocation</param-name>
        <param-value>/WEB-INF/log4j.xml</param-value>
    </context-param>

   <servlet>
        <servlet-name>jaxws-servlet</servlet-name>
        <servlet-class>com.sun.xml.ws.transport.http.servlet.WSSpringServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>jaxws-servlet</servlet-name>
        <url-pattern>/EtradeMS</url-pattern>
    </servlet-mapping>
    <listener>
        <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
    </listener>
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener> 

</web-app> 
```

5) 码头的上下文文件是 jetty-env.xml 文件，如下所示

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE Configure PUBLIC "-//Mort Bay Consulting//DTD Configure//EN" "http://jetty.mortbay.org/configure.dtd">
<Configure class="org.mortbay.jetty.webapp.WebAppContext">

</Configure> 
```

在它构建之后，它会在 lib 中引发一场战争，所有的罐子都在那里。不确定这里出了什么问题，在使用 mvn jetty:run 启动 jerry 时出现以下错误

```
2012-09-20 11:49:39.935:WARN:oejw.WebAppContext:Failed startup of context o.m.j.p.JettyWebAppContext{/,file:/C:/DurgaCodeToDebug/jws-wm/jws-assetalloc/webapps/webservices/target/jws-wm-assetalloc-1.0/},C:\DurgaCodeToDebug\jws-wm\jws-assetalloc\webapps\webservices\target\jws-wm-assetalloc-1.0
java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.eclipse.jetty.webapp.IterativeDescriptorProcessor.visit(IterativeDescriptorProcessor.java:85)
    at org.eclipse.jetty.webapp.IterativeDescriptorProcessor.process(IterativeDescriptorProcessor.java:72)
    at org.eclipse.jetty.webapp.MetaData.resolve(MetaData.java:337)
    at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1236)
    at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:706)
    at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:480)
    at org.mortbay.jetty.plugin.JettyWebAppContext.doStart(JettyWebAppContext.java:293)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
    at org.eclipse.jetty.server.handler.HandlerCollection.doStart(HandlerCollection.java:229)
    at org.eclipse.jetty.server.handler.ContextHandlerCollection.doStart(ContextHandlerCollection.java:172)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
    at org.eclipse.jetty.server.handler.HandlerCollection.doStart(HandlerCollection.java:229)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
    at org.eclipse.jetty.server.handler.HandlerWrapper.doStart(HandlerWrapper.java:95)
    at org.eclipse.jetty.server.Server.doStart(Server.java:277)
    at org.mortbay.jetty.plugin.JettyServer.doStart(JettyServer.java:65)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
    at org.mortbay.jetty.plugin.AbstractJettyMojo.startJetty(AbstractJettyMojo.java:511)
    at org.mortbay.jetty.plugin.AbstractJettyMojo.execute(AbstractJettyMojo.java:364)
    at org.mortbay.jetty.plugin.JettyRunWarExplodedMojo.execute(JettyRunWarExplodedMojo.java:164)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:319)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: 
java.lang.IllegalStateException: Nothing to bind for name javax.sql.DataSource/default
    at org.eclipse.jetty.plus.webapp.PlusDescriptorProcessor.bindEntry(PlusDescriptorProcessor.java:895)
    at org.eclipse.jetty.plus.webapp.PlusDescriptorProcessor.bindResourceRef(PlusDescriptorProcessor.java:812)
    at org.eclipse.jetty.plus.webapp.PlusDescriptorProcessor.visitResourceRef(PlusDescriptorProcessor.java:252)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.eclipse.jetty.webapp.IterativeDescriptorProcessor.visit(IterativeDescriptorProcessor.java:85)
    at org.eclipse.jetty.webapp.IterativeDescriptorProcessor.process(IterativeDescriptorProcessor.java:72)
    at org.eclipse.jetty.webapp.MetaData.resolve(MetaData.java:337)
    at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1236)
    at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:706)
    at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:480)
    at org.mortbay.jetty.plugin.JettyWebAppContext.doStart(JettyWebAppContext.java:293)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
    at org.eclipse.jetty.server.handler.HandlerCollection.doStart(HandlerCollection.java:229)
    at org.eclipse.jetty.server.handler.ContextHandlerCollection.doStart(ContextHandlerCollection.java:172)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
    at org.eclipse.jetty.server.handler.HandlerCollection.doStart(HandlerCollection.java:229)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
    at org.eclipse.jetty.server.handler.HandlerWrapper.doStart(HandlerWrapper.java:95)
    at org.eclipse.jetty.server.Server.doStart(Server.java:277)
    at org.mortbay.jetty.plugin.JettyServer.doStart(JettyServer.java:65)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
    at org.mortbay.jetty.plugin.AbstractJettyMojo.startJetty(AbstractJettyMojo.java:511)
    at org.mortbay.jetty.plugin.AbstractJettyMojo.execute(AbstractJettyMojo.java:364)
    at org.mortbay.jetty.plugin.JettyRunWarExplodedMojo.execute(JettyRunWarExplodedMojo.java:164)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:319)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352) 
```

有人可以帮我吗？不知道真正出了什么问题顺便说一句，这是我创建服务所遵循的链接 [http://www.mkyong.com/webservices/jax-ws/jax-ws-spring-integration-example/](http://www.mkyong.com/webservices/jax-ws/jax-ws-spring-integration-example/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T03:38:39.160

查看[PlusDescriptorProcessor](http://download.eclipse.org/jetty/stable-7/xref/org/eclipse/jetty/plus/webapp/PlusDescriptorProcessor.html#895)。根据源代码，在 web.xml 中没有找到匹配的资源。验证您的 web.xml。

# directory - 如何定义我的脚本标签来处理虚拟目录？

> ID：12523580
> 
> 赞同：3
> 
> 时间：2012-09-21T02:48:25.263
> 
> 标签：directory, virtual

在我的 index.html 文件中，我正在使用：

```
 <script src="/Scripts/jquery-1.7.2.js" type="text/javascript"></script> 
```

如果我的 URL 是[http://foobar.com/virtual/index.html](http://foobar.com/virtual/index.html)则找不到，但如果 URL 是[http://foobar.com/index.html](http://foobar.com/index.html)则可以找到。如何定义我的脚本标签，以便在使用虚拟目录时找到它。我不想在脚本标签中指定虚拟目录，因为它被部署在多个地方，它可能有也可能没有虚拟目录。

谢谢你的帮助。这个网站救了我很多次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T02:58:37.570

该`src`标签是指正在`html`使用它的人。在您当前的场景中，如果您希望脚本 src 在第一个场景 ( `foobar.com/virtual/index.html`) 中工作，只需将 script 标签替换为
`<script src="../Scripts/jquery-1.7.2.js" type="text/javascript"></script>`

# android - 开始使用 mercurial，想要跟踪现有版本

> ID：12523585
> 
> 赞同：1
> 
> 时间：2012-09-21T02:49:34.997
> 
> 标签：android, eclipse, mercurial

我本质上是一个业余程序员。我为我的孩子们编写了一个在 Eclipse 下开发的 Android 数学应用程序，到目前为止，它已经发布了两个版本：第一个版本（0.2），第二个版本（0.3）包含了我 7 岁的 Maddy 要求的更改。老客户和beta测试员。现在，五岁的珍妮有了她的功能列表。

到目前为止，我已经通过复制工作 0.2 版本的整个目录并用后缀“-0.2”命名它的简单权宜之计来完成版本控制；然后继续下一个。但现在我想开始使用 Mercurial 进行源代码控制。问题是，我希望能够开始跟踪，而不是从我当前的 0.3 级别开始，而是从我之前的 0.2 级别开始。（我没有保存 0.1。）

我的计划是复制 0.2 目录，然后将其转换为 Mercurial 存储库。提交 0.2 后，我将从 0.3 目录替换我编辑的四个左右的文本文件（一个 Java，几个 XML），然后提交到 0.3 级别。

然后我可以将该目录移动到我的 Eclipse 工作区并正常编辑，当我使用 Jenny 的更改进入 0.4 版本时提交。我计划最初在 Eclipse 之外做所有 Mercurial 的东西，直到我的脚湿透为止；然后我将研究 Eclipse Mercurial 插件和其他东西。

这种方法是否有意义，或者我是在设置自己的脚射门？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T02:58:54.073

这几乎就是这样做的方法。由于您在 0.2 版本之前没有保存应用程序的状态，因此这将是您对 repo 的初始提交。然后，您当前的工作目录也将是其顶部的单个提交。之后，回购就像往常一样。

不要忘记为发布创建标签，当你去的时候。这将允许您稍后在 Mercurial 历史记录中快速识别重要的发布检查点，并能够将它们分支用于修补程序（如果需要）。虽然我不认为在您达到 0.9 并开始为 1.0 版本做好准备之前，这并不是真正需要的，同时仍会继续使用 2.0 功能。

# python - Python 格式大小应用（将 B 转换为 KB、MB、GB、TB）

> ID：12523586
> 
> 赞同：38
> 
> 时间：2012-09-21T02:49:57.427
> 
> 标签：python, format, size

我正在尝试编写一个应用程序来将字节转换为 kb 到 mb 到 gb 到 tb。这是我到目前为止所拥有的：

```
def size_format(b):
    if b < 1000:
              return '%i' % b + 'B'
    elif 1000 <= b < 1000000:
        return '%.1f' % float(b/1000) + 'KB'
    elif 1000000 <= b < 1000000000:
        return '%.1f' % float(b/1000000) + 'MB'
    elif 1000000000 <= b < 1000000000000:
        return '%.1f' % float(b/1000000000) + 'GB'
    elif 1000000000000 <= b:
        return '%.1f' % float(b/1000000000000) + 'TB' 
```

问题是，当我尝试应用程序时，我得到小数点后的所有内容。示例 `size_format(623)`产生“623B”，但使用`size_format(6200)`，而不是得到“6.2kb”，我得到“6.0kb”。任何想法为什么？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2018-03-19T11:20:50.930

Bryan_Rch 答案的固定版本：

```
def format_bytes(size):
    # 2**10 = 1024
    power = 2**10
    n = 0
    power_labels = {0 : '', 1: 'kilo', 2: 'mega', 3: 'giga', 4: 'tera'}
    while size > power:
        size /= power
        n += 1
    return size, power_labels[n]+'bytes' 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2015-07-25T22:23:27.213

```
def humanbytes(B):
    """Return the given bytes as a human friendly KB, MB, GB, or TB string."""
    B = float(B)
    KB = float(1024)
    MB = float(KB ** 2) # 1,048,576
    GB = float(KB ** 3) # 1,073,741,824
    TB = float(KB ** 4) # 1,099,511,627,776

    if B < KB:
        return '{0} {1}'.format(B,'Bytes' if 0 == B > 1 else 'Byte')
    elif KB <= B < MB:
        return '{0:.2f} KB'.format(B / KB)
    elif MB <= B < GB:
        return '{0:.2f} MB'.format(B / MB)
    elif GB <= B < TB:
        return '{0:.2f} GB'.format(B / GB)
    elif TB <= B:
        return '{0:.2f} TB'.format(B / TB)

tests = [1, 1024, 500000, 1048576, 50000000, 1073741824, 5000000000, 1099511627776, 5000000000000]

for t in tests: print("{0} == {1}".format(t,humanbytes(t))) 
```

输出：

```
1 == 1.0 Byte
1024 == 1.00 KB
500000 == 488.28 KB
1048576 == 1.00 MB
50000000 == 47.68 MB
1073741824 == 1.00 GB
5000000000 == 4.66 GB
1099511627776 == 1.00 TB
5000000000000 == 4.55 TB 
```

对于未来的我来说，它也在 Perl 中：

```
sub humanbytes {
   my $B = shift;
   my $KB = 1024;
   my $MB = $KB ** 2; # 1,048,576
   my $GB = $KB ** 3; # 1,073,741,824
   my $TB = $KB ** 4; # 1,099,511,627,776

   if ($B < $KB) {
      return "$B " . (($B == 0 || $B > 1) ? 'Bytes' : 'Byte');
   } elsif ($B >= $KB && $B < $MB) {
      return sprintf('%0.02f',$B/$KB) . ' KB';
   } elsif ($B >= $MB && $B < $GB) {
      return sprintf('%0.02f',$B/$MB) . ' MB';
   } elsif ($B >= $GB && $B < $TB) {
      return sprintf('%0.02f',$B/$GB) . ' GB';
   } elsif ($B >= $TB) {
      return sprintf('%0.02f',$B/$TB) . ' TB';
   }
} 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2018-09-18T04:45:15.620

对我来说好主意：

```
def convert_bytes(num):
    """
    this function will convert bytes to MB.... GB... etc
    """
    step_unit = 1000.0 #1024 bad the size

    for x in ['bytes', 'KB', 'MB', 'GB', 'TB']:
        if num < step_unit:
            return "%3.1f %s" % (num, x)
        num /= step_unit 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2020-09-11T01:10:49.583

# 警告：所有其他答案都包含错误。*从字面上*看，它们都无法处理接近下一个单元边界的文件大小。这是唯一没有错误的答案。

划分字节以获得人类可读的答案似乎很容易，对吧？**错误的！**

*其他所有*答案都不正确，并且包含浮点舍入错误，这些错误会导致错误输出，例如“1024 KiB”而不是“1 MiB”。不过，他们不应该为此感到难过，因为这是过去甚至 Android 操作系统程序员都存在的错误，而且成千上万的程序员的眼睛也从未注意到[世界上最受欢迎的 StackOverflow 答案](https://programming.guide/worlds-most-copied-so-snippet.html)中的错误，尽管人们使用了多年那个旧的Java答案。

所以有什么问题？嗯，这是由于浮点舍入的工作方式。当被告知将自身格式化为单十进制数字时，诸如“1023.95”之类的浮点数实际上会四舍五入为“1024.0”。大多数程序员不会考虑这个错误，但它*完全*打破了“人类可读字节”的格式。所以他们的代码认为“哦，1023.95，没关系，我们找到了正确的单位，因为数字小于 1024”，但他们没有意识到它会被四舍五入为“1024.0”，应该格式化为 NEXT尺寸单位。

此外，许多其他答案都使用非常慢的代码和一堆数学函数，例如 pow/log，这可能看起来“整洁”但完全破坏了性能。大多数其他答案使用疯狂的 if/else 嵌套，或其他性能杀手，例如临时列表、实时字符串连接/创建等。简而言之，它们浪费 CPU 周期做无意义的繁重工作。

他们中的大多数也忘记包含更大的单元，因此只支持最常见文件大小的一小部分。给定一个更大的数字，这样的代码会输出类似“1239213919393491123.1 Gigabytes”的东西，这很愚蠢。他们中的一些人甚至不会这样做，并且如果输入数字大于他们已经实现的最大单元，就会简单地中断。

此外，几乎没有一个处理负输入，例如“负 2 兆字节”，并且完全中断这样的输入。

他们还对非常个人的选择进行硬编码，例如精度（小数位数）和单位类型（公制或二进制）。这意味着他们的代码几乎不能重用。

所以......好吧，我们遇到了当前答案不正确的情况......那么为什么不把所有事情都做对呢？这是我的函数，它侧重于*性能*和*可*配置性。您可以选择 0-3 位小数，以及是否需要公制（1000 的幂）或二进制（1024 的幂）表示。它包含一些代码注释和使用示例，以帮助人们理解它为什么这样做以及通过这种方式工作避免了哪些错误。如果把所有的注释都删掉的话，行号会缩水很多，但是我建议在copypasta-ing的时候保留注释，这样你以后再看代码。;-)

```
from typing import List, Union

class HumanBytes:
    METRIC_LABELS: List[str] = ["B", "kB", "MB", "GB", "TB", "PB", "EB", "ZB", "YB"]
    BINARY_LABELS: List[str] = ["B", "KiB", "MiB", "GiB", "TiB", "PiB", "EiB", "ZiB", "YiB"]
    PRECISION_OFFSETS: List[float] = [0.5, 0.05, 0.005, 0.0005] # PREDEFINED FOR SPEED.
    PRECISION_FORMATS: List[str] = ["{}{:.0f} {}", "{}{:.1f} {}", "{}{:.2f} {}", "{}{:.3f} {}"] # PREDEFINED FOR SPEED.

    @staticmethod
    def format(num: Union[int, float], metric: bool=False, precision: int=1) -> str:
        """
        Human-readable formatting of bytes, using binary (powers of 1024)
        or metric (powers of 1000) representation.
        """

        assert isinstance(num, (int, float)), "num must be an int or float"
        assert isinstance(metric, bool), "metric must be a bool"
        assert isinstance(precision, int) and precision >= 0 and precision <= 3, "precision must be an int (range 0-3)"

        unit_labels = HumanBytes.METRIC_LABELS if metric else HumanBytes.BINARY_LABELS
        last_label = unit_labels[-1]
        unit_step = 1000 if metric else 1024
        unit_step_thresh = unit_step - HumanBytes.PRECISION_OFFSETS[precision]

        is_negative = num < 0
        if is_negative: # Faster than ternary assignment or always running abs().
            num = abs(num)

        for unit in unit_labels:
            if num < unit_step_thresh:
                # VERY IMPORTANT:
                # Only accepts the CURRENT unit if we're BELOW the threshold where
                # float rounding behavior would place us into the NEXT unit: F.ex.
                # when rounding a float to 1 decimal, any number ">= 1023.95" will
                # be rounded to "1024.0". Obviously we don't want ugly output such
                # as "1024.0 KiB", since the proper term for that is "1.0 MiB".
                break
            if unit != last_label:
                # We only shrink the number if we HAVEN'T reached the last unit.
                # NOTE: These looped divisions accumulate floating point rounding
                # errors, but each new division pushes the rounding errors further
                # and further down in the decimals, so it doesn't matter at all.
                num /= unit_step

        return HumanBytes.PRECISION_FORMATS[precision].format("-" if is_negative else "", num, unit)

print(HumanBytes.format(2251799813685247)) # 2 pebibytes
print(HumanBytes.format(2000000000000000, True)) # 2 petabytes
print(HumanBytes.format(1099511627776)) # 1 tebibyte
print(HumanBytes.format(1000000000000, True)) # 1 terabyte
print(HumanBytes.format(1000000000, True)) # 1 gigabyte
print(HumanBytes.format(4318498233, precision=3)) # 4.022 gibibytes
print(HumanBytes.format(4318498233, True, 3)) # 4.318 gigabytes
print(HumanBytes.format(-4318498233, precision=2)) # -4.02 gibibytes 
```

顺便说一句，硬编码`PRECISION_OFFSETS`是为了获得最佳性能而创建的。我们可以使用公式以编程方式计算偏移量`unit_step_thresh = unit_step - (0.5/(10**precision))`以支持任意精度。但是用大量的 4+ 尾随十进制数字格式化文件大小确实没有意义。这就是为什么我的函数完全支持人们使用的内容：0、1、2 或 3 位小数。因此，我们避免了一堆 pow 和除法数学。此决定是使此功能快速的许多注重细节的小选择之一。另一个性能选择的例子是决定使用基于字符串的`if unit != last_label`检查来检测列表的结尾，而不是通过索引迭代并查看我们是否已经到达最终的列表索引。`range()`通过或元组通过`enumerate()`生成索引*较慢*不仅仅是对存储在`_LABELS`列表中的 Python 的不可变字符串对象进行地址比较，而这正是这段代码所做的！

当然，在性能上投入这么多工作有点过分，但我讨厌“写草率的代码，只有在项目中的数千个缓慢的函数使整个项目变得迟缓*之后才进行优化”的态度。*大多数程序员赖以生存的“过早优化”引用被[完全误解](http://www.joshbarczak.com/blog/?p=580)并被用作草率的借口。:-P

我将此代码放在公共领域。随意在您的项目中使用它，包括免费软件和商业软件。我实际上建议您将它放在一个`.py`模块中，然后将其从“类名称空间”更改为普通模块。我只使用了一个类来保持 StackOverflow 的代码整洁，并且如果您不想使用模块，则可以轻松地将其粘贴到自包含的 Python 脚本中。

享受并玩得开心！:-)

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2019-01-10T15:27:46.127

另一个humanbytes 版本，没有循环/if..else，采用python3 语法。

从@whereisalext 的答案中窃取的测试号码。

请注意，它仍然是一个草图，例如，如果数字足够大，它将回溯。

```
import math as m

MULTIPLES = ["B", "k{}B", "M{}B", "G{}B", "T{}B", "P{}B", "E{}B", "Z{}B", "Y{}B"]

def humanbytes(i, binary=False, precision=2):
    base = 1024 if binary else 1000
    multiple = m.trunc(m.log2(i) / m.log2(base))
    value = i / m.pow(base, multiple)
    suffix = MULTIPLES[multiple].format("i" if binary else "")
    return f"{value:.{precision}f} {suffix}"

if __name__ == "__main__":
    sizes = [
        1, 1024, 500000, 1048576, 50000000, 1073741824, 5000000000,
        1099511627776, 5000000000000]

    for i in sizes:
        print(f"{i} == {humanbytes(i)}, {humanbytes(i, binary=True)}") 
```

结果：

```
1 == 1.00 B, 1.00 B
1024 == 1.02 kB, 1.00 kiB
500000 == 500.00 kB, 488.28 kiB
1048576 == 1.05 MB, 1.00 MiB
50000000 == 50.00 MB, 47.68 MiB
1073741824 == 1.07 GB, 1.00 GiB
5000000000 == 5.00 GB, 4.66 GiB
1099511627776 == 1.10 TB, 1.00 TiB
5000000000000 == 5.00 TB, 4.55 TiB 
```

更新：

正如评论中所指出的（正如最初所指出的：“请注意，它仍然是一个草图”），这段代码很慢而且有问题。请参阅@mitch-mcmabers 的回答。

更新 2：我也撒谎说没有`if`s。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-05-24T20:59:12.487

我有相当可读的函数将字节转换为更大的单位：

```
def bytes_2_human_readable(number_of_bytes):
    if number_of_bytes < 0:
        raise ValueError("!!! number_of_bytes can't be smaller than 0 !!!")

    step_to_greater_unit = 1024.

    number_of_bytes = float(number_of_bytes)
    unit = 'bytes'

    if (number_of_bytes / step_to_greater_unit) >= 1:
        number_of_bytes /= step_to_greater_unit
        unit = 'KB'

    if (number_of_bytes / step_to_greater_unit) >= 1:
        number_of_bytes /= step_to_greater_unit
        unit = 'MB'

    if (number_of_bytes / step_to_greater_unit) >= 1:
        number_of_bytes /= step_to_greater_unit
        unit = 'GB'

    if (number_of_bytes / step_to_greater_unit) >= 1:
        number_of_bytes /= step_to_greater_unit
        unit = 'TB'

    precision = 1
    number_of_bytes = round(number_of_bytes, precision)

    return str(number_of_bytes) + ' ' + unit 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-09-21T03:03:31.053

您可以更改除法的行为，而不是修改代码：

```
from __future__ import division 
```

这为 Python 2.x 使用的“经典”样式提供了“真正的”划分。有关详细信息，请参阅[PEP 238 - 更改除法运算符](http://www.python.org/dev/peps/pep-0238/)。

这现在是 Python 3.x 中的默认行为

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-10-02T12:56:58.477

一个非常简单的解决方案是：

```
SIZE_UNITS = ['B', 'KB', 'MB', 'GB', 'TB', 'PB']

def get_readable_file_size(size_in_bytes):
    index = 0
    while size_in_bytes >= 1024:
        size_in_bytes /= 1024
        index += 1
    try:
        return f'{size_in_bytes} {SIZE_UNITS[index]}'
    except IndexError:
        return 'File too large' 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-09-21T02:56:49.190

当您将值相除时，您使用的是整数除法，因为这两个值都是整数。您需要先将其中一个转换为浮动：

```
return '%.1f' % float(b)/1000 + 'KB' 
```

甚至只是

```
return '%.1f' % b/1000.0 + 'KB' 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-08-20T04:40:07.763

这是一个紧凑的版本，可以将 B（字节）转换为任何更高阶的 MB、GB，而无需`if...else`在 python 中大量使用。我使用按位来处理这个问题。`return_output`如果您将函数中的参数触发为 True，它还允许返回浮点输出：

```
import math

def bytes_conversion(number, return_float=False):

    def _conversion(number, return_float=False):

        length_number = int(math.log10(number))

        if return_float:

           length_number = int(math.log10(number))
           return length_number // 3, '%.2f' % (int(number)/(1 << (length_number//3) *10))

        return length_number // 3, int(number) >> (length_number//3) * 10

    unit_dict = {
        0: "B",  1: "kB",
        2: "MB", 3: "GB",
        4: "TB", 5: "PB",
        6: "EB"
    }

    if return_float:

        num_length, number = _conversion(number, return_float=return_float)

    else:
        num_length, number = _conversion(number)

    return "%s %s" % (number, unit_dict[num_length])

#Example usage:
#print(bytes_conversion(491266116, return_float=True)) 
```

这只是我在 StackOverflow 中的一些帖子。如果我有任何错误或违规行为，请告诉我。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-06-23T13:04:03.363

在我看来，我已经改进了@whereisalext 答案，使其具有更通用的功能，一旦要添加更多单元，就不需要添加更多 if 语句：

```
AVAILABLE_UNITS = ['bytes', 'KB', 'MB', 'GB', 'TB']

def get_amount_and_unit(byte_amount):
    for index, unit in enumerate(AVAILABLE_UNITS):
        lower_threshold = 0 if index == 0 else 1024 ** (index - 1)
        upper_threshold = 1024 ** index
        if lower_threshold <= byte_amount < upper_threshold:
            if lower_threshold == 0:
                return byte_amount, unit
            else:
                return byte_amount / lower_threshold, AVAILABLE_UNITS[index - 1]
    # Default to the maximum
    max_index = len(AVAILABLE_UNITS) - 1
    return byte_amount / (1024 ** max_index), AVAILABLE_UNITS[max_index] 
```

请注意，这与@whereisalext 的算法略有不同：

*   这将返回一个元组，其中包含第一个索引处的转换金额和第二个索引处的单位
*   这不会尝试区分单个字节和多个字节（因此 1 个字节是这种方法的输出）

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-12-02T10:29:37.650

我认为这是一个简短而简洁的。这个想法是基于我多年前编写的一些图形缩放代码。代码片段`round(log2(size)*4)/40`在这里发挥了作用，以 2**10 的幂计算边界。“正确”的实现是：`trunc(log2(size)/10`，但是当大小接近新边界时，你会得到奇怪的行为。例如`datasize(2**20-1)`将返回 (1024.00, 'KiB')。通过使用`round`和缩放`log2`结果，您可以在接近新边界时获得很好的截断。

```
from math import log2
def datasize(size):
    """
    Calculate the size of a code in B/KB/MB.../
    Return a tuple of (value, unit)
    """
    assert size>0, "Size must be a positive number"
    units = ("B", "KiB", "MiB", "GiB", "TiB", "PiB",  "EiB", "ZiB", "YiB") 
    scaling = round(log2(size)*4)//40
    scaling = min(len(units)-1, scaling)
    return  size/(2**(10*scaling)), units[scaling]

for size in [2**10-1, 2**10-10, 2**10-100, 2**20-10000, 2**20-2**18, 2**20, 2**82-2**72, 2**80-2**76]:
    print(size, "bytes= %.3f %s" % datasize(size))

1023 bytes= 0.999 KiB
1014 bytes= 0.990 KiB
924 bytes= 924.000 B
1038576 bytes= 0.990 MiB
786432 bytes= 768.000 KiB
1048576 bytes= 1.000 MiB
4830980911975647053611008 bytes= 3.996 YiB
1133367955888714851287040 bytes= 0.938 YiB 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2021-04-23T10:11:43.023

现在有一个方便的[DataSize](https://pypi.org/project/datasize/)包：

```
pip install datasize 
```

```
import datasize
import sys

a = [i for i in range(1000000)]
s = sys.getsizeof(a)
print(f"{datasize.DataSize(s):MiB}") 
```

输出 ：

> 8.2945556640625MiB

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2012-09-21T02:55:27.887

在做除法之前做float(b)，例如做`float(b)/1000`而不是`float(b/1000)`，因为`b`和1000都是整数，`b/1000`仍然是一个没有小数部分的整数。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-05-06T20:14:51.680

这里是将字节转换为千、兆、兆。

```
#From bytes to kilo, mega, tera
def  get_(size):

    #2**10 = 1024
    power = 2**10
    n = 1
    Dic_powerN = {1:'kilobytes', 2:'megabytes', 3:'gigabytes', 4:'Terabytes'}

    if size <= power**2 :
        size /=  power
        return size, Dic_powerN[n]

    else: 
        while size   >  power :
            n  += 1
            size /=  power**n

        return size, Dic_powerN[n] 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-10-08T21:46:04.450

没有小数位的输出：

```
>>> format_file_size(12345678)
'11 MiB, 792 KiB, 334 bytes'

format_file_size(
    def format_file_size(fsize):
        result = []
        units = {s: u for s, u in zip(reversed([2 ** n for n in range(0, 40, 10)]), ['GiB', 'MiB', 'KiB', 'bytes'])}
        for s, u in units.items():
            t = fsize // s
            if t > 0:
                result.append('{} {}'.format(t, u))
            fsize = fsize % s
        return ', '.join(result) or '0 bytes' 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-12-03T08:14:14.197

让我添加我的，其中没有变量在循环中更新或类似的容易出错的行为。实现的逻辑很简单。它仅使用 Python 3 进行了测试。

```
def format_bytes(size: int) -> str:
    power_labels = {40: "TB", 30: "GB", 20: "MB", 10: "KB"}
    for power, label in power_labels.items():
        if size >= 2 ** power:
            approx_size = size // 2 ** power
            return f"{approx_size} {label}"
    return f"{size} bytes" 
```

它已经过测试，例如在 KB/MB 边界：

*   1024*1024-1 返回“1023 KB”
*   1024*1024 返回“1 MB”
*   1024*1024+1 返回“1 MB”

`approx_size`如果您想要浮点数而不是四舍五入的整数，您可以轻松更改。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-04-20T13:51:04.920

我知道这里已经有很多答案和解释，但是我尝试了这种基于类的方法，它对我来说非常有效。**它可能看起来很大，但看看我是如何使用属性和方法的**。

```
class StorageUnits:
    b, Kb, Kib, Mb, Mib, Gb, Gib, Tb, Tib, Pb, Pib, Eb, Eib, Zb, Zib, Yb, Yib, B, KB, KiB, MB, MiB, GB, GiB, TB,\
        TiB, PB, PiB, EB, EiB, ZB, ZiB, YB, YiB = [0]*34

class DigitalStorageConverter:
    def __init__(self):
        self.storage = StorageUnits()
        self.bit_conversion_value_table = {
            'b': 1, 'Kb': 1000, 'Mb': 1000**2, 'Gb': 1000**3, 'Tb': 1000**4, 'Pb': 1000**5, 'Eb': 1000**6,
            'Zb': 1000**7, 'Yb': 1000**8, 'Kib': 1024, 'Mib': 1024**2, 'Gib': 1024**3, 'Tib': 1024**4, 'Pib': 1024**5,
            'Eib': 1024**6, 'Zib': 1024**7, 'Yib': 1024**8,
            'B': 8, 'KB': 8*1000, 'MB': 8*(1000**2), 'GB': 8*(1000**3), 'TB': 8*(1000**4), 'PB': 8*(1000**5),
            'EB': 8*(1000**6), 'ZB': 8*(1000**7), 'YB': 8*(1000**8), 'KiB': 8*1024, 'MiB': 8*(1024**2),
            'GiB': 8*(1024**3), 'TiB': 8*(1024**4), 'PiB': 8*(1024**5), 'EiB': 8*(1024**6), 'ZiB': 8*(1024**7),
            'YiB': 8*(1024**8)
        }
        "Values of all the units in bits"
        self.name_conversion_table = {
            'bit': 'b', 'kilobit': 'Kb', 'megabit': 'Mb', 'gigabit': 'Gb', 'terabit': 'Tb', 'petabit': 'Pb',
            'exabit': 'Eb', 'zettabit': 'Zb', 'yottabit': 'Yb', 'kibibit': 'Kib', 'mebibit': 'Mib', 'Gibibit': 'Gib',
            'tebibit': 'Tib', 'pebibit': 'Pb', 'exbibit': 'Eib', 'zebibit': 'Zib', 'yobibit': 'Yib',
            'byte': 'B', 'kilobyte': 'KB', 'megabyte': 'MB', 'gigabyte': 'GB', 'terabyte': 'TB', 'petabyte': 'PB',
            'exabyte': 'EB', 'zettabyte': 'ZB', 'yottabyte': 'YB', 'kibibyte': 'KiB', 'mebibyte': 'MiB',
            'gibibyte': 'GiB', 'tebibyte': 'TiB', 'pebibyte': 'PiB', 'exbibyte': 'EiB', 'zebibyte': 'ZiB',
            'yobibyte': 'YiB'
        }
        self.storage_units = [u for u in list(StorageUnits.__dict__.keys()) if not u.startswith('__')]

    def get_conversion(self, value: float, from_type: str) -> StorageUnits:
        if from_type in list(self.name_conversion_table.values()):
            from_type_bit_value = self.bit_conversion_value_table[from_type]
        elif from_type in list(self.name_conversion_table.keys()):
            from_type = self.name_conversion_table[from_type]
            from_type_bit_value = self.bit_conversion_value_table[from_type]
        else:
            raise KeyError(f'Invalid storage unit type "{from_type}"')

        value = value * from_type_bit_value

        for i in self.storage_units:
            self.storage.__setattr__(i, value / self.bit_conversion_value_table[i])
        return self.storage

if __name__ == '__main__':
    c = DigitalStorageConverter()
    s = c.get_conversion(5000, 'KiB')
    print(s.KB, s.MB, s.TB)   # , ..., ..., etc till whatever you may want 
```

如果数字太大，该程序将以指数形式为您提供答案。

***注意***：***如果发现不正确，请更正存储值的名称***

# ruby-on-rails-3 - 在 Heroku 上运行调度程序或延迟作业的最佳实践是什么？

> ID：12523587
> 
> 赞同：1
> 
> 时间：2012-09-21T02:50:05.350
> 
> 标签：ruby-on-rails-3, heroku, cron, redis, delayed-job

我已经看到了几种解决方案：

1.  Redis / Resque
2.  延迟作业
3.  Heroku 调度程序
4.  发条

Heroku 调度程序无法工作，因为它在随机时间运行，并且每 10 分钟最频繁地运行一次。

在雪松上奔跑。运行多个网络测功机。

编辑：这就是我想要做的：
在未来的任意点调用带有参数的任意方法。就像是`Schedule.set(Notification.send_update_to_user(574), Time.now + 1.days)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T13:32:51.170

我会选择 Sidekiq，尽管还有其他几个适合您的示例的选项。Sidekiq 允许您[安排作业](https://github.com/mperham/sidekiq/wiki/Scheduled-Jobs)在未来的任意时间运行：

```
NotificationUpdateWorker.perform_at(Time.now + 1.day, 574) 
```

延迟的[扩展](https://github.com/mperham/sidekiq/wiki/Delayed-extensions)会让你改写：

```
Notification.delay_for(1.day).send_update_to_user(574) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T05:12:57.073

尝试使用 rufus/调度程序。

需要'rubygems' 需要'rufus/scheduler'

调度程序 = Rufus::Scheduler.start_new

scheduler.every '1m' 做
Checkin.check_checkin()
end

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T20:39:12.177

在查看了不同的选项后，我选择了延迟作业，这在 Heroku 上有很好的记录。

对于需要在每天某个时间或每小时运行一次的作业，Heroku 调度程序运行良好，但有时它不会运行。

# hibernate - 为什么我的一对多关系似乎要求我在会话期间遍历集合？

> ID：12523590
> 
> 赞同：1
> 
> 时间：2012-09-21T02:50:58.347
> 
> 标签：hibernate, hibernate-mapping

我有一个具有一对多关系的应用程序。当我进行提取时，我发现我必须先读取集合，然后才能从我的 dao 返回数据并且会话结束，否则我会丢失数据并在尝试读取数据时出现无活动会话错误我的用户层。为什么会这样，有没有办法解决它？这似乎是 Hibernate 一个非常昂贵的方面。我敢肯定有一些文章解释了这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T03:56:55.333

有两种选择，而不是在返回对象之前读取所有集合项： 1\. 使用 Eager fetch 模式而不是 Lazy。例如@OneToMany(mappedBy = "client", fetch = FetchType.EAGER) 2\. 保证在获取该对象的同一事务中读取该对象的这些集合项的调用。

问候， Thinh

# c - C - 在 break 语句后递增不起作用

> ID：12523591
> 
> 赞同：-1
> 
> 时间：2012-09-21T02:51:15.897
> 
> 标签：c, for-loop, increment, break, short

为什么这不起作用？

```
short pStringCt = 0;
const char* constInBuf = ibuf;
int j;
for (j = 0; j < i; j++)
{
    /*Detect when there's a space in the buffer and grab word*/
    if (ibuf[j] == ' ' ||
        ibuf[j] == '|' ||
        j == i - 1)
        {
            int k;
            for (k = j - 1; k >= 0; k--){

                if (k == 0 || ibuf[k] == ' ' || ibuf[k] == '|')
                {
                    if (pStringCt > 0){
                        pString[pStringCt] = strndup(constInBuf + k + 1, j - k + 1);
                        printf("-pString at %d is: %s\n", pStringCt, pString[pStringCt]);
                        pStringCt += 1;
                    }
                    if (pStringCt == 0){
                        pString[pStringCt] = strndup(constInBuf+k, j-k + 1);
                        printf("-----pString at %d is: %s\n", pStringCt, pString[pStringCt]);
                        pStringCt+=1;
                    }
                    printf("%d is pStringCt\n", pStringCt);
                    break;
                }
            }
        } 
```

在 break 语句之后 pStringCt 的值没有增加。换言之，pStringCt 在方法开始时为 0。然后，它在与其相关的两个 if 语句之后增加到一个。但是在break语句之后，它重置为零......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T04:12:25.750

所以我使用 scanf 来获取我的字符串，它通过我获取我的字符串的方法迭代了两次，这弄乱了方法的返回值。抱歉没有粘贴所有代码，但我只是回答了我自己的问题......对不起......

PS 现在使用 getline()。奇迹般有效。

# c - 实时系统和确定性系统之间有区别吗？

> ID：12523595
> 
> 赞同：7
> 
> 时间：2012-09-21T02:51:46.067
> 
> 标签：c, embedded, real-time, definition, deterministic

在工作中，我们正在讨论一个新平台的设计，其中一位高层管理人员说它需要运行我们当前的代码库（Linux 上的 C），但需要实时，因为它需要在不到一秒的时间内响应各种输入. 我指出：

1.  这并不意味着它需要“实时”，只是它需要更快的时钟和更精简的中断处理
2.  要考虑的关键点之一是正在使用的操作系统。他们想坚持使用嵌入式 Linux，我指出我们需要一个 RTOS。由于内核/用户空间内存分裂，使用 Linux 将阻止“实时”，因此 I/O 是通过文件和套接字完成的，这会引入延迟
3.  我们真正需要确定的是它是否需要确定性（例如，需要在 90% 的时间内在 <200 毫秒内响应输入）。

在我看来，如果第 3 点是真的，那么它需要是一个实时系统，然后第 2 点是最大的考虑因素。

我有信心回答，但后来我在想……别人怎么看？**我是在正确的轨道上还是我错过了什么？**

“实时”系统和“确定性”系统之间有什么区别吗？除了 RTC 和 RTOS，我还缺少执行真正实时系统所需的任何主要内容吗？

期待一些伟大的回应！

**编辑：**

到目前为止得到了一些很好的回应，看起来对我的系统和要求有点好奇，所以我会为感兴趣的人添加一些注释：

1.  我的公司卖几千的单位，所以我不想在价格上过分杀戮
2.  通常我们出售主处理器板和独立显示器。还有其他 CAN 设备的附加网络。
3.  该板（当前）运行设备，还充当网络服务器，将基本 XML 文档发送到最终用户的显示器

管理人员希望“快速”（<1s）更新显示器的要求出现在这里，但**真正**的限制来自于可以通过 CAN 连接的设备。这些设备通常是电机控制设备，其要求包括“必须在 200 毫秒内做出响应”。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-21T03:02:57.540

您需要区分：

*   **硬实时**：对响应时间有*绝对限制*，不得违反（算作故障） - 例如，当您控制机器人电机或医疗设备时，如果未能按时完成可能是灾难性的
*   **软实时**：*大部分时间要求快速响应*（可能 99.99%+），但如果平均响应速度非常快，偶尔违反时间限制是可以接受的。例如，这适用于在计算机游戏中执行实时动画 - 错过最后期限可能会导致跳帧，但不会从根本上破坏游戏体验

只要您有足够的硬件并充分注意识别和优化瓶颈，大多数系统都可以轻松实现软实时。通过一些调整，甚至可以在具有非确定性暂停的系统中实现（例如 Java 中的垃圾收集）。

硬实时需要专门的操作系统支持（以保证调度）和确定性算法（这样一旦调度，任务就可以保证在最后期限内完成）。做到这一点很难，需要对整个硬件/软件堆栈进行仔细设计。

重要的是要注意**大多数商业应用程序都不需要**：特别是我认为以 <1 秒的响应时间为目标与大多数人认为的“实时”要求*相去甚远。*话虽如此，如果在需求中明确指定了响应时间，那么您可以将其视为具有相当宽松的截止日期的软实时。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-21T03:02:26.290

从`real-time`标签的定义：

> 当活动完成的*及时性*是功能要求和正确性条件而不仅仅是性能指标时，任务就是*实时的。*实时系统是其中一些（尽管可能不是全部）任务是实时任务的系统。

 *换句话说，如果您的系统响应太慢而无法赶上最后期限，就会发生不好的事情，那么系统需要是实时的，您将需要一个 RTOS。

实时系统不需要是确定性的：如果响应时间在 50ms 和 150ms 之间随机变化，但响应时间**从不**超过 150ms，那么系统是非确定性的，但它仍然是实时的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T16:15:58.713

也许您可以尝试使用`RTLinux`，或者`RTAI`如果您有足够的时间进行试验。这样，您可以将非实时应用程序保留在 linux 上，但这些`realtime`应用程序将被移动到 RTOS 部分。在这种情况下，您将（可能）实现 <1 秒的响应时间。

优点是——

*   大量代码可以重用
*   您可以手动划分实时和非实时任务，并尝试按照您的意愿实现 <1s 的响应。
*   我认为迁移时间不会很长，因为大部分代码都在 linux 中

顺便说一句，请注意您可能需要在实时部分运行的硬件驱动程序。

以下 RTLinux 架构可能会帮助您了解这如何成为可能。

![实时Linux系统](../Images/15972870eb5f9c30abef75506c47ced0.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T03:15:17.303

听起来您在使用 RTOS 时走在了正确的轨道上。不同的 RTOS 优先考虑不同的事情，无论是健壮性还是速度等等。您将需要弄清楚您是否需要硬 RTOS 或软 RTOS，并根据您的需要，确定您的调度程序将如何被驱动。可以肯定的是，使用常规操作系统和 RTOS 之间存在严重差异。

注意：也许对于最真实的实时系统，您将需要基于硬事件的解决方案，以便您可以保证您的流程也会在您期望的时候执行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-27T05:47:38.163

RTOS 或实时操作系统是为嵌入式应用程序设计的。在处理关键应用程序的多任务系统中，操作系统必须 1\. 内存分配具有确定性，2\. 应该允许 CPU 时间分配给不同的线程、任务、进程，3\. 内核必须是非抢占式的，这意味着上下文切换必须仅在任务执行结束。等等所以普通的windows或Linux无法使用。嵌入式系统中的 RTOS 示例：卫星、一级方程式赛车、CAR 导航系统。

嵌入式系统：旨在执行单个或几个专用功能的系统。带有 RTOS 的系统：也可以是嵌入式系统，但 RTOS 自然会用于需要执行许多功能的实时系统。实时系统：可以在确定/预测的时间内提供输出的系统。这并不意味着实时系统更快。两者之间的区别： 1.普通嵌入式系统不是实时系统 2.带有 RTOS 的系统是实时系统。*

# class - 另一个模板类的模板类友元函数

> ID：12523598
> 
> 赞同：1
> 
> 时间：2012-09-21T02:52:04.597
> 
> 标签：class, function, templates, private

我有一棵由一对模板类组成的树，其中一个需要访问另一个的私有成员，最好仅限于那些实际需要访问的成员函数。这是我的课程的简化插图：

```
//  Forward declaration
template <typename K, typename V> class Tree;

template <typename K, typename V> class Node {
    public:
        typedef typename Node<K, V>* NodeP;

        // ...
    private:
        K key;
        V val;

        //  Child nodes
        NodeP left;
        NodeP right;
};

template <typename K, typename V> class Tree {
    public:
        typedef typename Node<K, V>::NodeP NodeP;

        // ...

        void clear() { del(root); }
    private:

        //  Root node
        NodeP root;

        void del(NodeP start)
        {
            if (start->left != NULL)
                del(start->left);
            if (start->right != NULL)
                del(start->right);
            delete start;
        }
}; 
```

我想不通的是如何将`del()`（和 Tree 的其他成员函数）声明为`friend`Node 类的一个。我试过`friend`用这条线把整个班级变成 a ：

`template <typename K, typename V> friend class Tree;`

编译，但是这个：

`template <typename K, typename V> friend void Tree<K, V>::del(NodeP);`

……没有。我想知道我是否让它们过于依赖彼此的实例？有没有办法做我想做的事？谢谢。

# c# - OLEDB 和 Datagridview 记录查看中的自动增量

> ID：12523604
> 
> 赞同：0
> 
> 时间：2012-09-21T02:52:41.340
> 
> 标签：c#, .net, database, database-design, oledb

如果我想在 oledb 数据库（Microsoft Access DB）中使用自动增量工具，还有什么可以替代的...我现在里面有自动编号数据类型...但它不像 SQL Server 2008 r2 中的自动增量工具那样工作...

和

我已经在我的客户端机器上安装了一个简单的 c# 应用程序....客户端在哪里输入数据，提交后在 Datagrid 中查看...

例如，我已经制作了输入 ID（通过程序自动生成）、姓名、地址、手机、固定电话的表格。

当操作员填写这些详细信息并单击提交按钮时，它会存储在数据库中并在 datagridview 中查看（因为它与数据库中的对应表绑定）

..........这里的问题是..操作员现在已经输入了 50 多条记录，并且 datagridview 突然开始显示第 22 到第 50 条记录和第 50 条记录之后的第 1 到第 21 条记录..

每次添加新记录时，它都会在第 50 条记录后追加...我在这里使用 microsoft access 数据库（OLEDB 连接）...当我使用 Microsoft SQL Server r2 时，我从未遇到过此类问题...

有什么办法可以解决...

我编写的绑定Datagridview的代码如下>>>

```
da=new oledbdataadapter("select * from customer",con);
Dataset ds=new Dataset();
da.fill(ds);
gvCustomerRecord.Datasource=ds.Tables[0]; 
```

* * *

OLEDB中的自动增量有什么解决方案？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T02:59:00.463

您可以在 CustomerID 上使用 Order By

# javascript - 在 Javascript 中转换数字

> ID：12523608
> 
> 赞同：0
> 
> 时间：2012-09-21T02:53:08.470
> 
> 标签：javascript

我在表单上有一个简单的下拉菜单：

```
<form id="form1" name="form1" method="post" action="">
  <select name="ddlSelect" id="ddlSelect">
  <option value="">Select</option>
    <option value="-1">Yes</option>
    <option value="0">No</option>
  </select>
</form> 
```

我想使用 java 脚本函数将每个选项的值转换为显示在电子邮件中，但不知道如何执行此操作。任何人都可以帮忙吗？前任。-1 = 是，0 = 否

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T03:01:59.020

您可以通过以下几种方式在 javascript 中将字符串转换为数字：

```
num = parseInt(elem.value, 10)
num = +elem.value;
num = parseFloat(elem.value); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T03:11:03.677

我通常使用：

```
num = elem.value * 1; 
```

# c# - 在显示特定产品时，电子商务网站更可取的是什么？

> ID：12523611
> 
> 赞同：1
> 
> 时间：2012-09-21T02:53:32.400
> 
> 标签：c#, asp.net, sql-server, sql-server-2008

**每次都在数据库上查询并使用“WHERE”运算符？**

```
SELECT * FROM tblProduct WHERE productID = @productID 
```

或者

**过滤放入缓存的产品列表？**

```
DataTable dtProducts = new DataTable();
dtProducts = HttpContext.Current.Cache["CachedProductList"] as DataTable;

DataView dvProduct = new DataView();
dvProduct = dtProducts.DefaultView;
dvProduct.RowFilter = String.Format("[productID] = {0}", iProductID); 
```

请分享您的意见。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T17:19:17.383

缓存数据，尤其是通过内存机制`HttpContext.Current.Cache`（几乎）总是比返回数据库更快。访问数据库需要建立网络连接，然后数据库必须做 I/O 等，而使用缓存你只是使用内存中的对象。也就是说，您必须考虑许多事项：

*   ASP.NET 运行时缓存不是分布式的。如果您将在多个节点上运行此代码，您必须确定是否可以接受可能具有不同版本缓存数据的不同节点。
*   可以告诉缓存保存数据，只要您想要它们，短至几分钟，长至永远。在决定缓存多长时间时，您必须考虑数据将保持多长时间不变。产品数据的变化可能不会超过一天一次，因此它是一个非常可行的缓存候选者。
*   请注意，您设置的缓存时间限制不是绝对的；由于内存限制或进程/应用程序池回收时，可以从缓存中逐出对象。
*   正如上面所指出的，`DataTable`缓存不是一个好的对象；序列化非常庞大且昂贵。从性能的角度来看，自定义类列表是更好的选择。

我会说作为一般经验法则，如果您需要一组数据的频率高于每小时几次，并且它的更改频率低于每隔几个小时，那么最好从数据库中提取列表，将其缓存起来以备不时之需合理的时间，并通过代码中的过滤器检索它。但这是一般规则；这是值得在您的特定环境中尝试的东西。

200,000 个对象是要放入缓存中的大量数据，但如果您必须经常检索它，数据库的工作量也很大。也许它的某些子集会更好地缓存，而另一个不常用的子集可以在每次需要时检索。正如我所说，实验！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T03:34:14.487

性能对您的数据及其使用方式非常主观。确定什么有效的方法是进行基准测试。

仅当您的数据库性能不符合您需要的性能时才决定缓存。

当您缓存数据时，会增加很多开销来确保它是最新的。

每次触发查询时，Sql server 不会从磁盘读取，它会缓存频繁查询的结果。在决定缓存之前，请了解数据库使用的[缓存机制](http://technet.microsoft.com/en-us/library/cc293623.aspx)。使用存储过程也可以让您[缓存查询计划](http://msdn.microsoft.com/en-us/library/ee343986%28v=sql.100%29.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T03:15:12.783

我更喜欢第一种方法。在缓存中有 20000 行对我来说听起来并不好。

# c++ - 为 std::function 声明指向成员函数模板参数的“不完整类型”错误

> ID：12523615
> 
> 赞同：0
> 
> 时间：2012-09-21T02:54:30.747
> 
> 标签：c++, c++11, std-function

这是声明：

```
#include <functional>    

class A { ... };

double fA( std::function<double((A::*)(double))> fp) { ... } 
```

这给了我错误

> 在函数'double fA(std::function)'中：tb.cpp:32:8: 错误：'fp' 的类型不完整

虽然没有问题

```
double fA( double ((A::*fp)(double)) ) { ... } 
```

将此类型作为模板参数提供给的正确方法是`std::function`什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T03:22:40.623

我不确定你真正想要什么。的参数`std::function`必须是标准中所述的自由函数签名：

```
template<class R, class... ArgTypes>
class function<R(ArgTypes...)>; 
```

请注意，参数是`operator()`函数对象将提供的签名。它不能是*指向*不同类型的成员的指针，它只是返回类型和`std::function<>`正在创建的对象的参数。

函数声明中额外的一组括号可能表明您实际上想要创建一个`std::function`函数对象，该函数对象将一个指向成员的指针作为参数并返回一个`double`. 如果是这种情况，则参数的签名`std::function`缺少返回类型：

```
std::function<double (void (A::*)(double))> fp; 
```

可以用以下方式初始化：

```
double myfunc( void (A::*mptr)(double) ) {}
// ...
fp = myfunc; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T10:09:38.400

最终做了与@chris 的建议非常相似的事情，他的示例代码如下：

```
#include <functional>
#include <iostream>

struct S {
   void foo() {std::cout << i;};
   int i;
};

void bar(std::function<void()> func) {
    func();
}

int main() {
   S s1, s2;
   s1.i = 5;
   s2.i = 6;

   bar(std::bind(&S::foo, s1));
   bar(std::bind(&S::foo, s2));
} 
```

# sql - 如何删除没有主键的重复行

> ID：12523621
> 
> 赞同：3
> 
> 时间：2012-09-21T02:55:21.380
> 
> 标签：sql, delete-row

下表没有主键，我想从下表中删除重复的行。重复行中唯一的区别因素是 atom_id2。如何删除该重复行。请务必提出您的建议。

```
atom_id1, atom_id2, atom_ty1, atom_ty2, lennard_jones_acoef, lennard_jones_bcoef 
---------------------------------------------------------------------------------
1,        1,        N3,       N3,       9.44293233E+05,      8.01323529E+02
1,        2,        N3,       H,        2.12601181E+03,      2.09604198E+01
1,        3,        N3,       H,        2.12601181E+03,      2.09604198E+01
1,        4,        N3,       H,        2.12601181E+03,      2.09604198E+01  <-Duplicate Row
1,        5,        N3,       CX,       9.95480466E+05,      7.36907417E+02
1,        6,        N3,       HP,       2.01791425E+04,      6.45756063E+01
1,        7,        N3,       CT,       9.95480466E+05,      7.36907417E+02
1,        8,        N3,       HC,       8.96776989E+04,      1.36131731E+02
1,        9,        N3,       HC,       8.96776989E+04,      1.36131731E+02 <---- Duplicate Row
1,        10,       N3,       C,        8.82619071E+05,      6.53361429E+02
1,        11,       N3,       O2,       6.06829342E+05,      6.77220874E+02 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T02:58:56.870

如果没有主键，您将需要提供*其他条件*以确保*删除*相应的记录。

您可以使用该`WHERE`子句来执行此操作，例如：

```
DELETE FROM your_table WHERE atom_id1 = 1 AND atom_id2 = 4; 
```

**注意：**这假设除了您提供的记录之外没有其他记录。我强烈建议`SELECT`首先运行它。

您还应该考虑创建主键。似乎`atom_id2`可能是一个很好的候选人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T04:21:59.927

```
First you get distinct row insert temp.. table then delete current table and import row from temp.. table.

insert into temp_table(column1,column2,..) 
select distinct column1,column2,... from table2

delete from table2

insert into table2(column1,column2,..) 
select column1,column2,... from temp_table 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T05:45:34.887

if you find difficulty in deleting duplicate rows in the existing table,you can create new table and insert the distinct values from the existing table. i hope it will help u

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T03:50:49.503

使用主键是最好的方法。在您的情况下，在 where 条件中使用至少两个字段，包括 atom_id2，这样就不会选择重复项。您必须首先通过创建适当的`SELECT`声明来确认这一点，然后将此声明转换`DELETE`为对您来说更容易的声明。

# android - 如何在谷歌驱动器中找到文件夹

> ID：12523623
> 
> 赞同：10
> 
> 时间：2012-09-21T02:55:30.467
> 
> 标签：android, google-drive-api

我已经实现了将文件上传到谷歌驱动器的功能。我已经按照[快速](https://developers.google.com/drive/quickstart)入门中的指南完成了它。

现在我正在执行功能将文件上传到特定文件夹*（例如：将文件上传到“My_Folder_name”）*。[我在API Reference](https://developers.google.com/drive/v2/reference/files/insert)中找到了示例。问题是如果我只知道文件夹的名称，我如何获得**parentId** *（文件夹 ID） 。*

我找不到任何按名称搜索文件夹的功能...

是通过获取所有文件来获取文件夹的唯一方法，然后检查*MimeType*是否等于*“application/vnd.google-apps.folder”*并将其与文件夹名称进行比较。

```
if("application/vnd.google-apps.folder".equals(body.getMimeType()) && "My_Folder_name".equals(body.getTitle()) ){
            ....        
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-10-14T04:04:14.460

查询应该如下：

`mimeType='application/vnd.google-apps.folder' and name='foldername'`

在 Python 中：

```
service.files().list(q="mimeType='application/vnd.google-apps.folder' and name='foldername'",
                                         spaces='drive',
                                         fields='nextPageToken, files(id, name)',
                                         pageToken=page_token).execute() 
```

注意：`name='foldername'`不是`title='foldername'`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-21T07:48:50.633

您可以将`q`查询参数添加到您的请求 URL 并使用 Drive 查询语言来限制您的搜索：

[https://developers.google.com/drive/search-parameters](https://developers.google.com/drive/search-parameters)

要仅搜索文件夹并按标题限制搜索，您的查询应如下所示：

```
mimeType = 'application/vnd.google-apps.folder' and title = 'My_Folder_name' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-07T04:54:22.453

你需要做两件事：

使用 files.list（它提供完整的文件资源）（[https://developers.google.com/drive/v2/reference/files/list](https://developers.google.com/drive/v2/reference/files/list)）。修改您的查询以添加您要搜索的父 ID。

父母中的 mimeType = 'application/vnd.google-apps.folder' 和 'folderId'

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-02T08:12:55.883

我想这会对你有所帮助

```
/*String pageToken = null;
            do {
                FileList fileList = driveService.files().list().setQ("'" + parentFolderId + "' in parents")
                        .setFields("nextPageToken, files(id,parents,name,mimeType)")
                        .setPageToken(pageToken).execute();

                if (fileList.getFiles().size() == 0)
                    System.out.println("No data inside the folder");

                    for (File file : fileList.getFiles()) {
                        System.out.println(file.getId());
                    }
                pageToken = fileList.getNextPageToken();
            } while (pageToken != null);*/ 
```

# php - memory_limit 不起作用

> ID：12523624
> 
> 赞同：0
> 
> 时间：2012-09-21T02:55:38.400
> 
> 标签：php, memory-limit

> 致命错误：允许的内存大小为 104857600 字节已用尽（尝试分配 32345609 字节）

这意味着我需要 137203209 字节的内存限制来运行我的 php 脚本。
尽管脚本中有以下代码，但我收到了此错误。

```
 ini_set('memory_limit', 268435456); # 256 MB 
```

该脚本位于我的共享托管服务器上。我无权访问**php.ini**。`memory_limit`确实适用于同一托管服务器中的其他脚本。

当我检查我的服务器的 phpinfo() 时，我看到了这些

> suhosin.memory_limit - 128
> memory_limit - 100M

我的脚本肯定需要超过 128M，因为它是一个带有大文件附件的邮件发送脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T03:14:21.497

您在共享主机上，而共享主机几乎从不让您使用这些`ini_set('memory_limit',XXX)`功能（否则每个人都会试图抢占整个服务器内存并锁定整个服务器）。检查`phpinfo()`是否打开了安全模式......它可能是。

另外，旁注：如果你想在任何情况下将内存限制设置为 256MB，你可以使用：

ini_set('memory_limit', '256M');

符号而不是写出整个整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T03:11:36.637

`suhosin.memory_limit - 128`不允许您将内存限制增加到 128mb 以上，将其设置为 268435456 以允许将 memory_limit 增加到 256Mb。不过，我怀疑您是否可以在共享主机上执行此操作，因为您需要访问 suhosin ini 文件（您不能执行类似的操作`ini_set('suhosin.memory_limit', 268435456);`）。

[`More about suhosin.memory_limit`](http://www.hardened-php.net/suhosin/configuration.html#suhosin.memory_limit)

# mysql - 如何编写具有多个搜索条件的 MYSQL CASE WHEN 语句？

> ID：12523630
> 
> 赞同：6
> 
> 时间：2012-09-21T02:56:53.163
> 
> 标签：mysql, sql, stored-procedures, case

我知道像 PHP 这样的语言具有 switch case 控制结构，它支持在单个 case 语句中进行多个验证，例如，

```
Switch $x {
  case 1,2,3: 
      $a = 0;
       break;
  case 5,6: 
       $a = 1;
       break;
} 
```

同样，这可以在 MYSQL 中完成吗？我在下面尝试过，但确实没有用:(

```
CASE vc_shape
   WHEN ('02' OR '51') THEN SET dc_square_1 = dc_square_1 + dc_row_total;
   WHEN ('06' OR  '30' OR 83) THEN SET dc_square_2 = dc_square_2 + dc_row_total; 
   .....
   .....
  ELSE
      BEGIN
      END;
END CASE; 
```

任何想法我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-21T02:59:25.353

使用其他格式的`CASE`语句：

```
CASE 
   WHEN vc_shape IN ('02', '51') THEN SET dc_square_1 = dc_square_1 + dc_row_total;
   WHEN vc_shape IN ('06', '30', '83') THEN SET dc_square_2 = dc_square_2 + dc_row_total; 
   .....
   .....
  ELSE
      BEGIN
      END;
END CASE; 
```

# c++ - qt：所有类都继承自QObject或在新建后手动删除我应该采取什么方式？

> ID：12523631
> 
> 赞同：1
> 
> 时间：2012-09-21T02:56:54.073
> 
> 标签：c++, qt, memory-leaks

有一些问题让我感到困惑：1。

```
QLabel *label = new QLabel(this);
//or
QLabel *label = new QLabel;
//if I forgot to set label as a child of other widget, it causing a memory leak? 
```

2\.

```
QList<MyClass> myList;
MyClass *my = new MyClass;
myList.append(*my);
//is necessary？
delete my; 
```

那么，我应该如何处理 qt 呢？所有类都继承自 QObject 还是在新建后手动删除？还是使用 Qt 智能指针？请帮助我，非常感谢你...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:45:29.183

在 C++ 中如何分配对象取决于预期的生命周期，而 Qt 不会改变这一点。所以，是的，在情况 1 中，第二个标签被泄露，因为它的生命周期与`this`.

在 csae 2 中，您使用了不必要的堆分配。写吧

```
{
  QList<MyClass> myList;
  MyClass my; // Local scope
  myList.append(my);
} 
```

或者更简洁：

```
{
  QList<MyClass> myList;
  myList.append( MyClass() ); // Unnamed object, can be moved into myList.
} 
```

# php - 无法使用 mail() 函数发送到 gmail 帐户

> ID：12523632
> 
> 赞同：0
> 
> 时间：2012-09-21T02:57:22.833
> 
> 标签：php, sendmail

嗨，任何人都可以帮助我为什么不能向 gmail 帐户发送电子邮件。我一直在更改密码模块并确认密码，我会将确认链接发送到我的客户电子邮件帐户。许多人与我联系，他们没有收到任何电子邮件。这是我的代码：

```
$headers .= "MIME-Version: 1.0 \r\n"; 
$headers .= "Content-type: text/html; charset=iso-8859-1  \r\n"; 
$headers .= "From: ".$from;
mail($sendmail_recipient_email, $sendmail_subject, $sendmail_message, $headers); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T03:00:24.793

好吧，你`$headers`将成为

```
"From: ".$from; 
```

因为您没有使用连接运算符。应该：

```
$headers .= "From: ".$from; 
```

注意`.=`

## 编辑

OP更正了问题中的代码，所以我会修改我的答案。gmail 拒绝您的电子邮件的原因有很多，但第一步是删除`\r`换行符修饰符。`\n`应该足够了，而且[很多人](http://www.richardlord.net/blog/php-mail-and-gmail)似乎已经解决了这个确切的问题（Gmail 的具体拒绝），只使用换行符并排除回车符。

# java - java中的throws语句是什么意思？

> ID：12523633
> 
> 赞同：1
> 
> 时间：2012-09-21T02:57:33.553
> 
> 标签：java

还有，什么`throws NumberFormatException, IOException`意思？我一直试图`BufferedReader`通过说

```
BufferedReader nerd = new BufferedReader(new InputStreamReader(System.in)); 
```

但除非放入，`BufferedReader`否则将无法工作。`throws NumberFormatException, IOException`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T03:00:10.910

`throws`关键字表示某个方法可能潜在地“抛出”某个异常。您需要使用块或添加到您的方法声明来处理可能的`IOException`（以及可能的其他异常） 。像这样的东西： `try-catch``throws IOException, (...)`

```
public void foo() throws IOException /* , AnotherException, ... */ {
    BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
    in.readLine();
    // etc.
    in.close();
}

public void foo() {
    BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
    try {
        in.readLine();
        // etc.
        in.close();
    } catch (IOException e) {
        // handle the exception 
    } /* catch (AnotherException e1) {...} ... */
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T02:59:30.563

Throws 子句用于声明未由特定方法处理的异常，并指示调用者显式处理这些异常或在调用层次结构中重新抛出它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T03:01:20.300

throws 语句意味着该函数可能会“抛出”错误。即吐出一个将结束当前方法的错误，并使堆栈上的下一个“try catch”块处理它。

在这种情况下，您可以在方法声明中添加“throws....”，也可以执行以下操作：

```
try {
    // code here
} catch (Exception ex) {
    // what to do on error here
} 
```

阅读[http://docs.oracle.com/javase/tutorial/essential/exceptions/](http://docs.oracle.com/javase/tutorial/essential/exceptions/)了解更多信息。

# php - Zend DB 如何管理数据库连接

> ID：12523639
> 
> 赞同：5
> 
> 时间：2012-09-21T02:58:19.773
> 
> 标签：php, mysql, zend-framework, zend-db, zend-db-table

我正在使用 Zend Framework 进行 PHP 开发，这是我用来执行查询的一个小函数。这与错误无关。代码和一切正常。但我想知道这背后的一些概念。

```
/** 
    * Get dataset by executing sql statement
    * 
    * @param  string $sql - SQL Statement to be executed
    * 
    * @return bool 
    */
    public function executeQuery($sql)
    {
        $this->sqlStatement = $sql;

        if ($this->isDebug)
        {
            echo $sql;
            exit;
        }

        $objSQL = $this->objDB->getAdapter()->prepare($sql);

        try
        {           
            return $objSQL->execute();

        }
        catch(Exception $error)
        {

            $this->logMessage($error->getMessage() . "  SQL : " .$sql);
            return false;
        }
        return false;
    } 
```

贝娄对我来说是不清楚的领域。

1.  Zend_Db_Table_Abstract 如何维护数据库连接？
2.  当我调用此函数时，它是否一直在创建新连接，或者它是否有一些连接池？
3.  我没有编写任何代码来打开或关闭数据库连接。那么zend框架会自动关闭连接吗？
4.  如果我执行此功能时此打开和关闭连接一直有效，是否有任何性能问题？

谢谢并感谢您对此的建议和意见。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-21T07:12:38.503

**创建连接**

创建 Adapter 类的实例**不会立即连接到 RDBMS 服务器**。**Adapter 保存连接参数，并在您第一次**需要执行查询时按需进行实际连接。这确保了创建 Adapter 对象既快速又便宜。即使您不确定在应用程序正在服务的当前请求期间是否需要运行任何数据库查询，您也可以创建适配器的实例。

如果您需要强制 Adapter 连接到 RDBMS，请使用 getConnection() 方法。此方法返回连接的对象，由相应的 PHP 数据库扩展表示。例如，如果您将任何适配器类用于 PDO 驱动程序，则 getConnection() 在将 PDO 对象初始化为与特定数据库的实时连接后，将返回该对象。

如果您想捕获由于无效帐户凭据或其他连接到 RDBMS 服务器失败而引发的任何异常，强制连接可能很有用。在建立连接之前不会引发这些异常，因此如果您在一个地方而不是在第一次查询数据库时处理异常，它可以帮助简化您的应用程序代码。

此外，适配器可以被序列化以将其存储在例如会话变量中。这不仅对适配器本身非常有用，而且对聚合它的其他对象（如 Zend_Db_Select 对象）非常有用。默认情况下，适配器是允许被序列化的，如果你不想要它，你应该考虑使用 FALSE 传递 Zend_Db::ALLOW_SERIALIZATION 选项，参见上面的例子。为了尊重惰性连接原则，适配器在反序列化后不会重新连接自己。然后您必须自己调用 getConnection()。您可以通过传递带有 TRUE 的 Zend_Db::AUTO_RECONNECT_ON_UNSERIALIZE 作为适配器选项来使适配器自动重新连接。

**关闭连接**

通常不需要关闭数据库连接。PHP 会自动清理所有资源并结束一个请求。数据库扩展旨在在清除对资源对象的引用时关闭连接。

但是，如果您有一个启动许多数据库连接的长时间 PHP 脚本，您可能需要关闭连接，以避免耗尽您的 RDBMS 服务器的容量。您可以使用适配器的 closeConnection() 方法显式关闭底层数据库连接。

从 1.7.2 版开始，您可以使用 isConnected() 方法检查您当前是否连接到 RDBMS 服务器。这意味着连接资源已启动且未关闭。此功能目前无法测试例如服务器端关闭连接。这在内部用于关闭连接。它允许您多次关闭连接而不会出错。PDO 适配器在 1.7.2 之前已经是这种情况，但对于其他适配器则不然。

[更多信息](http://framework.zend.com/manual/1.12/en/zend.db.adapter.html)

# php - 使用在父构造函数中分配的属性时出错

> ID：12523647
> 
> 赞同：0
> 
> 时间：2012-09-21T02:59:14.787
> 
> 标签：php

当我在父类的构造函数中实例化的属性上调用方法时，如下所示：

```
class A
{
    function AA()
    {

    }
}

class C
{
    function __construct()
    {
        $this->A = new A();
    }
}

class B extends C
{
    function __construct()
    {
        $this->A->AA();
    }
} 
```

我收到此错误：

> 致命错误：在...中的非对象上调用成员函数 AA()

这是为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T03:01:28.973

因为构造函数默认不调用父构造函数。您可以使用 触发它`parent::__construct()`。

# jquery - jquery尝试使用通过ajax检索的数据更新模式对话框

> ID：12523652
> 
> 赞同：1
> 
> 时间：2012-09-21T02:59:59.407
> 
> 标签：jquery, ajax, modal-dialog

我有一个显示用户联系信息的页面。如果他们需要更改它，可以使用“编辑”按钮打开一个模式对话框，其中包含将字段值设置为当前数据的表单。这很好用。

表单中有一个“国家”字段，当更改该字段时会触发一个 ajax 调用，该调用获取 html 用于选择新国家/地区的状态的选择框或显示文本输入以进入该状态。

我有一个早期版本（不同大小，jquery 1.7），它可以工作......代码是：

```
$('#edit-contact-link').click(function(){
    $('#dialog-contact-form-edit').dialog("open");
    return false;
});

$('#dialog-contact-form-edit').dialog({
    autoOpen: false,
    modal: true,
    width: 450,
    height: 600,
    open: function () {
       $("#Country").change(function() {
            var country = $(this).val();
            $.ajax({
                type: "POST",
                url: "includes/ajax/countrystate.php",
                data: {
                    Country: country
                },
                dataType: "html",
                success: function(data) {
                    //alert(data);
                    $('#state-dropdown').empty().html(data); // fill the state with the right data
                }
            }); // end .ajax
        }); // country change function
    },
    buttons: {
        Submit: function() {
            $("form[name='contactform']").submit();
            $(this).dialog('close');
        },
        Cancel: function() {
            $(this).dialog('close');
        }
    }
}); 
```

我尝试在新站点上使用相同的代码（稍微修改选择器和 ajax 文件名），但它根本不起作用。

通过单击编辑按钮直接调用对话框并使用 on() 方法创建一个单独的函数来触发 ajax 调用，我终于让一切正常工作（除了用 ajax 数据填充#state-dropdown div） #Country 选择字段的更改。

部分成功的代码：

```
$(document).on("change", "[id='Country']", function() {
    var country = $(this).val();
    var state = "";
    //alert("Country "+ country + " AND State " + state);
    $.ajax({
        type: "POST",
        url: "includes/functions/form-func/ajax-countries-states.php",
        data: {
            Country: country,
            State: ""
        },
        dataType: "html",
        success: function(data) {
            alert(data);
            $('#state-dropdown').empty().html(data); // fill the state with the right    data
        }
    }); // end .ajax 
}); // country change function

$('.contact-edit').click(function() {
    $('#dialog-contact-edit').dialog({
        modal: true,
        position: ["center", 100],
        width: 460,
        buttons: {
            "Close": function() {
                $(this).dialog("close"); },
            "Submit": function() {
                $(this).dialog("close"); }
        }
    });
}); 
```

现在唯一的问题是 ajax 调用的最后一行：

```
$('#state-dropdown').empty().html(data); 
```

我的表单中有一个 div，应该清空并填充使用 ajax 获取的数据。

如果 div 放在页面的主体上（对话框外），它可以正常工作，但如果它在对话框内，则不会更新。

似乎应该有一个简单的解决方法，但我花了几个小时搜索和更改这个和那个......一切都无济于事。

非常感谢这里聪明人的任何帮助。

玛丽

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T03:08:39.470

我在模态框中的表单（具体来说是阴影框）中遇到了类似的问题。您需要回答的问题：当模态框打开时，它是“克隆”HTML 中已经存在的一段 HTML（可能是隐藏的）还是加载了 iframe？

Shadowbox 克隆了 html 内容，所以我最终得到了两个具有相同 ID 的元素。

问题是，只有一个 id 得到更新。所以这可能是你遇到的同样的问题。

我必须要么具体到我想要更新的那个，比如 $('#shadowbox .selector')。

或者您可以尝试使用类而不是 id 来更新元素。就像我说的，如果两个元素有相同的 ID，只有一个会被调用，但如果你使用类，它们都会被更新。

# ruby-on-rails - 如何修复日期方法在heroku上关闭？

> ID：12523653
> 
> 赞同：2
> 
> 时间：2012-09-21T03:00:04.983
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, heroku

我的日期方法在 Heroku 上无法正常工作。我创建了一个用户，`(GMT-05:00) Eastern Time (US & Canada)`并假设看到根据`date`它所具有的属性添加的产品。所以它应该说`Added 1 Product Today`，但它好像是前一天记录的方法本身。所以`today`实际上是昨天，`yesterday`实际上是后天。

这是我的方法：

```
 def self.today
    where(:date => Date.today)
  end

  def self.yesterday
    where(:date => Date.yesterday)
  end

  def self.this_week
    where(:date => Date.today.beginning_of_week..Date.today.end_of_week)
  end

  def self.last_week
    where(:date => 1.week.ago.beginning_of_week..1.week.ago.end_of_week)
  end

  def self.this_month
    where(:date => Date.today.beginning_of_month..Date.today.end_of_month)
  end

  def self.last_month
    where(:date => 1.month.ago.beginning_of_month..1.month.ago.end_of_month).order('date desc')
  end 
```

所以我想它总是`-1 day`适用于 Heroku 上的每种方法，但不是在开发中。Heroku 的时区和时间是：

```
Loading production environment (Rails 3.2.8)
irb(main):001:0> Time.now
Time.now
=> 2012-09-21 02:37:26 +0000
irb(main):002:0> Time.zone
Time.zone
=> (GMT+00:00) UTC 
```

这对我来说是错误的，因为它`2012-09-20`在美国东部。

我想让这些方法适用于每个时区，而不仅仅是`Eastern Timezone`我应该怎么做呢？如何让用户根据时区查看他们添加的产品？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T04:07:03.517

好吧，如果您想要一个全球时区，最简单的方法是设置`heroku config:set TZ`一个合适的值。这涵盖了从 libc 开始的所有内容。

但是，用户特定的时区意味着您需要在每个请求的上下文中更改时区。“每个请求”应该立即让您想到“在控制器中”。

事实证明，Rails（特别是 ActionSupport）为此提供了[`Time.zone=`](http://api.rubyonrails.org/classes/Time.html#method-c-zone-3D). 碰巧这很常见，以至于`zone=`文档包含专门针对这种情况的示例代码：

```
class ApplicationController < ActionController::Base
  around_filter :set_time_zone

  def set_time_zone
    old_time_zone = Time.zone
    Time.zone = current_user.time_zone if logged_in?
    yield
  ensure
    Time.zone = old_time_zone
  end
end 
```

此外，如果您无法让用户从列表中选择他们的时区，您可以[根据 JavaScript 中检测到的时区偏移量进行猜测](https://stackoverflow.com/questions/942747/set-current-time-zone-in-rails)。总比没有好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T05:03:59.510

您需要在时间点搜索函数前面加上 in_time_zone。例如`Date.today.beginning_of_week`应该是`Date.today.in_time_zone(users_tz).beginning_of_week`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T05:00:37.360

将此行添加到 config 文件夹下的 application.rb

config.active_record.default_timezone = 'GMT + 5.30'

# java - 是否有任何用java编写的3D建模库

> ID：12523655
> 
> 赞同：1
> 
> 时间：2012-09-21T03:00:23.890
> 
> 标签：java, bspline

我找到了 OpenNurbs，但它是用 C++ 编写的，我需要一个 Java 中的 3D 建模库。

我真正需要的是一个可以用一些插值点构建的 B-Spline 类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T03:05:12.120

OpenGL可以渲染NURBS，java这里有一个包装器：http: [//jogamp.org/jogl/www/](http://jogamp.org/jogl/www/)

在 OpenGL 中使用 NURBS 的一些信息：

[http://www.cs.duke.edu/courses/fall09/cps124/notes/12_curves/opengl_nurbs.pdf](http://www.cs.duke.edu/courses/fall09/cps124/notes/12_curves/opengl_nurbs.pdf)

[http://nehe.gamedev.net/tutorial/bezier_patches__fullscreen_fix/18003/](http://nehe.gamedev.net/tutorial/bezier_patches__fullscreen_fix/18003/)

# google-closure - 如何使用 goog.net.XhrManager 实现加载指示器？

> ID：12523667
> 
> 赞同：1
> 
> 时间：2012-09-21T03:01:54.803
> 
> 标签：google-closure

我有一个带有私有 goog.net.XhrManager 的组件，它用于发出 ajax 请求以使用服务器数据填充列表和表格。

我还有一个 div，它有一个加载指示器，所有的 CSS 都设置为显示和隐藏它。

现在，我让 XhrManager 执行一系列调用，并使用传递给 XhrManager 的 send 方法的事件 id 来辨别在 COMPLETE 回调中要做什么。但是，由于在分别显示和隐藏加载指示器的 READY 和 [SUCCESS, ERROR] 回调中调用顺序可能是任意的，因此我很难干净地打开和关闭指示器。

我想知道是否还有另一组回调或我应该使用的不同技术。例如，如果 g-mail 不仅加载下一页邮件，而且加载上下文侧边栏信息、广告等，那么当您单击下一个箭头以翻阅邮件时，g-mail 是如何做到这一点的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T11:34:29.413

您可以对每个挂起的请求使用引用计数来设置/取消设置指标。另一种选择是使用 goog.async.DeferredList.awaitDeferred(otherDeferred) 累积所有结果，以便使其同步。我正在使用最后一种方法来完成此操作。希望这能让你朝着正确的方向前进。

问候，

雷内

# php - Magento 类别链接到 404 错误

> ID：12523668
> 
> 赞同：2
> 
> 时间：2012-09-21T03:01:58.263
> 
> 标签：php, magento, url-rewriting, magento-1.7

这是我的第一个 Magento 项目，我遇到了这么大的问题。我使用的 Magento 版本是 1.7.0.2 我设法使用“app/design/frontend/default/default/template/catalog/navigation/category.phtml”中的以下代码创建了一个自定义左栏导航栏

```
<?php
$cats = Mage::getModel('catalog/category')->load(1)->getChildren();
$catIds = explode(',',$cats);
?>
<div id="LeftCategory">
    <h2>Wicked Categories</h2>
    <hr style="color:white; height:1px; margin:5px;" />
<ul>
<?php foreach($catIds as $catId): ?>
    <li class="Li-Top-Category">
        <?php
            $category = Mage::getModel('catalog/category')->load($catId);
            ?>
            <a href="<?php echo $category->getUrl()?>">
    <?php echo $category->getName()?>
</a>
<?php

            $subCats = Mage::getModel('catalog/category')->load($category->getId())->getChildren();
            $subCatIds = explode(',',$subCats);
        ?>
            <?php if(count($subCatIds) > 1):?>
                <ul>
                <?php foreach($subCatIds as $subCat) :?>
                    <li class="Li-Sub-Category">
                    <?php
                        $subCategory = Mage::getModel('catalog/category')->load($subCat);
            ?>
            <a href="<?php echo $subCategory->getUrl()?>">
    <?php echo $subCategory->getName()?>
</a>
<?php

                    ?>
                    </li>
                <?php endforeach;?>
                </ul>
            <?php endif; ?>
    </li>
<?php endforeach; ?>
</ul>

</div> 
```

它负责生成类别导航。但问题是，每个链接指向的 URL 不起作用。所有导致 404 错误页面的链接都是无效的。你可以在这里看到它：[http ://wicked-shop.dev.thejinstudio.com/shop/catalog/category/view/s/accessories/id/15/](http://wicked-shop.dev.thejinstudio.com/shop/catalog/category/view/s/accessories/id/15/)

我做了很多搜索，但没有什么能真正解决这个问题。我提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T05:44:14.463

使用`catalog/category`帮助程序从类别模型中获取正确的 URL

```
$_catalogCatgoryHelper = Mage::helper('catalog/category'); 
```

然后使用该助手将您的类别传递给`getCategoryUrl()`函数

```
$_catalogCatgoryHelper->getCategoryUrl($category); 
```

所以试试这个。我已将我的建议放入您的代码中：

```
<?php
$_catalogCatgoryHelper = Mage::helper('catalog/category');
$cats = Mage::getModel('catalog/category')->load(1)->getChildren();
$catIds = explode(',',$cats);
?>
<div id="LeftCategory">
    <h2>Wicked Categories</h2>
    <hr style="color:white; height:1px; margin:5px;" />
<ul>
<?php foreach($catIds as $catId): ?>
    <li class="Li-Top-Category">
        <?php
            $category = Mage::getModel('catalog/category')->load($catId);
            ?>
            <a href="<?php echo $_catalogCatgoryHelper->getCategoryUrl($category) ?>">
    <?php echo $category->getName()?>
</a>
<?php

            $subCats = Mage::getModel('catalog/category')->load($category->getId())->getChildren();
            $subCatIds = explode(',',$subCats);
        ?>
            <?php if(count($subCatIds) > 1):?>
                <ul>
                <?php foreach($subCatIds as $subCat) :?>
                    <li class="Li-Sub-Category">
                    <?php
                        $subCategory = Mage::getModel('catalog/category')->load($subCat);
            ?>
            <a href="<?php echo $_catalogCatgoryHelper->getCategoryUrl($subCategory)?>">
    <?php echo $subCategory->getName()?>
</a>
<?php

                    ?>
                    </li>
                <?php endforeach;?>
                </ul>
            <?php endif; ?>
    </li>
<?php endforeach; ?>
</ul>

</div> 
```

使用我过去使用的这段代码可能会更好（但实际上最终重写，以便它迭代地显示类别，无论它们有多深，研究如何做到这一点对你来说肯定是一个很好的练习）。它有点干净，但您需要根据需要稍微修改它：

```
<?php $helper = $this->helper('catalog/category') ?>
<div class="block block-categorynavigation">
    <div class="block-title">
        <strong><span><?php echo $this->__('Category') ?></span></strong>
    </div>
    <div class="block-content">
        <?php $categories = $this->getStoreCategories() ?>
        <?php if (count($categories) > 0): ?>
            <ul id="leftnav-tree" class="level0">
                <?php foreach($categories as $category): ?>
                    <li class="level0<?php if ($this->isCategoryActive($category)): ?> active<?php endif; ?>">
                        <a href="<?php echo $helper->getCategoryUrl($category) ?>"><span><?php echo $this->escapeHtml($category->getName()) ?></span></a>
                            <?php $subcategories = $category->getChildren() ?>
                            <?php if (count($subcategories) > 0): ?>
                                <ul id="leftnav-tree-<?php echo $category->getId() ?>" class="level1">
                                    <?php foreach($subcategories as $subcategory): ?>
                                        <li class="level1<?php if ($this->isCategoryActive($subcategory)): ?> active<?php endif; ?>">
                                            <a href="<?php echo $helper->getCategoryUrl($subcategory) ?>"><?php echo $this->escapeHtml(trim($subcategory->getName(), '- ')) ?></a>
                                                <?php $subsubcategories = $subcategory->getChildren() ?>
                                                <?php if (count($subcategories) > 0): ?>
                                                    <ul id="leftnav-tree-<?php echo $category->getId() ?>" class="level2">
                                                        <?php foreach($subsubcategories as $subsubcategory): ?>
                                                        <li class="level2<?php if ($this->isCategoryActive($subsubcategory)): ?> active<?php endif; ?>">
                                                            <a href="<?php echo $helper->getCategoryUrl($subsubcategory) ?>"><?php echo $this->escapeHtml(trim($subsubcategory->getName(), '- ')) ?></a>
                                                        </li>
                                                        <?php endforeach; ?>
                                                    </ul>
                                                <?php endif; ?>
                                        </li>
                                    <?php endforeach; ?>
                                </ul>
                            <?php endif; ?>
                    </li>
                <?php endforeach; ?>
            </ul>
        <?php endif; ?>
    </div>
</div> 
```

编辑：原始代码仅显示*当前*查看类别的子类别

# java - C++ 自动审查

> ID：12523670
> 
> 赞同：0
> 
> 时间：2012-09-21T03:02:07.717
> 
> 标签：java, c++, string, sockets

这是我遇到过的最不寻常的事情，我正在用聊天框制作游戏，所以我正在构建一个审查功能，但我遇到了很多麻烦，虽然一切都应该工作，所以我尝试调试，我发现如果你将一个字符串设置为一个坏词（我可以在这里说它们吗？）这些词以 f、c 和 p 开头。（猜猜哪个）。因此，在客户端（Java）中输入消息，它将通过套接字发送（在发送到服务器之前显示消息（在 C++ 中），它显示得很好，但是在服务器中接收到这个词之后我显示消息，在你说的坏词的第一个字母之后，后面的所有内容都被删除。我没有显示源，因为它没有发生在程序中？客户端信息：Java，Netbeans 默认编译器服务器信息：C++，

一些资料来源：Java crypt 函数

```
public String crypt(String source)
{
    int len=source.length();
    String tempSource="";
    int i;
    for(i=0;i<len;i++)
    {
        String strAddon;
        int intAddon;
        char charAddon;
        charAddon=source.charAt(i);
        intAddon=127-((int)(charAddon));
        charAddon=(char)intAddon;
        strAddon=Character.toString(charAddon);
        tempSource+=strAddon;
    }
    source=tempSource;
    return source;
} 
```

Java写函数：

```
public void write(String text)
{
    try
    {
        text="|/" + text + "\\|";
        System.out.println(text);//debug
        text=crypt(text);
        out.println(text);
    }
    catch(Exception err)
    {
        Logger.getLogger(Sockets.class.getName()).log(Level.SEVERE, null, err);
        closeSockets(1);
    }
} 
```

C++ 加密函数

```
string crypt(string source)
{
    int len=source.length();
    char tempSource[len];
    source.copy(tempSource, len, 0);
    int i=0;
    for(i=0;i<len;i++) tempSource[i]=127-tempSource[i];
    source=tempSource;
    int temp=0;
    while((temp=source.find('\n',0)) != string::npos)
    {
        source=source.replace(temp,temp+1,"|");
        temp++;
    }
    return source;
} 
```

C++ 读取函数

```
string clientRead(int sock, string username)
{
    if(sock == INVALID_SOCKET) return "";
    vector<char> theVector;
    char responseData[256];
    char buffer;
    int bytesRead;

    memset(responseData, 0, sizeof(responseData));
    while(1)
    {
        bytesRead=recv(sock, &buffer, 1, 0);
        if(bytesRead > 0)//check to exit
        {
            if(buffer == '\n')
            {
                for(int i=0;i<theVector.size();i++) responseData[i]=theVector[i];
                string decryptedData=crypt(responseData);
                int beginIndex=decryptedData.find_first_of("|/")+2;
                if(beginIndex == -1) beginIndex=0;
                int endIndex=decryptedData.find("\\|");
                if(endIndex == -1) endIndex=decryptedData.length();
                decryptedData=decryptedData.substr(beginIndex, endIndex);
                cout<<decryptedData<<endl;//debug
                return decryptedData;
            }
            else theVector.push_back(buffer);
        }
        else//it failed
        {
            if(username.compare("") != 0) forceLogout(username);
            return "";
        }
    }
} 
```

标记为调试的地方是我显示消息的地方

这是它的视频，警告，里面有不好的词 [http://youtu.be/bSFT5YyAk9E](http://youtu.be/bSFT5YyAk9E) 正如你所看到的，当我用 f 说这个词时，它就会中断。

# objective-c - 短信应用中的 UIButton

> ID：12523674
> 
> 赞同：0
> 
> 时间：2012-09-21T03:02:25.673
> 
> 标签：objective-c, ios, uibutton

如何重新创建显示在 SMS 应用程序顶部的 UIButtons（例如“加载早期消息”按钮）。它们看起来很像标准的 UIButton，除了渐变、轻微的阴影投影和内部阴影以及更蓝的边框。Apple 是使用可拉伸的 UIImage 来制作这些，还是以编程方式（以及如何）创建？

![在此处输入图像描述](../Images/6bef0e13d664de184c88a7fbdf33f850.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T04:14:23.050

对于这个问题，我最喜欢的解决方案是创建一个只有一个段的分段控件。你最终得到了一个漂亮的按钮。这是我以编程方式执行此操作的方法：

```
UISegmentedControl* takePhotoButton = 
     [[UISegmentedControl alloc] initWithItems:[NSArray arrayWithObject:@"Take Photo"]];
takePhotoButton.segmentedControlStyle = UISegmentedControlStyleBar;
takePhotoButton.frame = CGRectMake(55,336,110,38);
takePhotoButton.tintColor = [UIColor lightGrayColor];
NSDictionary *attributes = [NSDictionary dictionaryWithObject:[UIFont boldSystemFontOfSize:16]
                                                       forKey:UITextAttributeFont];
[takePhotoButton setTitleTextAttributes:attributes
                               forState:UIControlStateNormal];
takePhotoButton.momentary = YES;
[takePhotoButton addTarget:self
                    action:@selector(onTakePhoto:)
          forControlEvents:UIControlEventValueChanged];
[self.view addSubview:takePhotoButton]; 
```

# php - fgets() 超时

> ID：12523680
> 
> 赞同：1
> 
> 时间：2012-09-21T03:03:04.013
> 
> 标签：php, codeigniter, sockets, fgets, fsockopen

我正在构建的基于 CodeIgniter 的应用程序的一部分存在问题。

我必须连接到远程服务器，并从第三方获得一组相当详细的说明，说明如何打开套接字、发送一些 XML 数据并接收响应 - 在 VB 脚本中。我已将其翻译成下面的 PHP 代码。目前，根据我的日志，数据正在写入服务器（日志输出如下所示）。然而，代码的 fgets() 部分似乎正在超时，没有错误或任何东西......使得事情很难调试。

从我读过的关于[fsockopen()](http://php.net/manual/en/function.fsockopen.php)和[fgets()](http://php.net/manual/en/function.fgets.php)的内容来看，以下内容应该有效，但显然它没有。问题是没有错误消息等继续，我对如何调试它有点茫然。

如果任何有空闲时间的人可以看看它只是为了看看我是否犯了一个明显的错误（或者确认我正在做的事情在这件事上是正确的），我将不胜感激。

这是代码（对不起，我不得不删掉一些代码）。

```
public function makeBooking($orderId) {

    // get entire XML file as a string
    $xmlString = $this->getXmlString();

    // replace non-alphanumeric characters
    $xmlString = $this->replaceChars($xmlString);

    // get length of xml string
    $xmlStrCount = mb_strlen($xmlString) + 7;

    // attempt to open socket
    $fp = fsockopen('xxx.xx.xxx.xx', '81', $errno, $errstr, 10); 

    if (!$fp) {

        // couldn't open socket
        log_message('ERROR', "*** Couldn't open socket: $errno $errstr " . ' | line ' . __LINE__ . ' of ' . __FILE__);

    } else {

        log_message('DEBUG', "*** Socket open, connected to remote server ");

        $lf = chr(13).chr(10);

        // opened socket, prepare output
        $output = '"POST xxxxxxxxxxxx.asp HTTP/1.0"' . $lf;
        $output .= '"Accept: */*"' . $lf;                                            
        $output .= '"User-Agent: xxxxxxxxxxx_socket/1.0";' . $lf;
        $output .= '"Content-type: application/x-www-form-urlencoded";' . $lf;
        $output .= '"Content-length: ' . $xmlStrCount . '";' . $lf;
        $output .= '""' . $lf;
        $output .= '"xml_in='.$xmlString.'"';

        // attempt to write output
        $result = fwrite($fp, $output);
        log_message('DEBUG', "***  Bytes written: $result " . ' | line ' . __LINE__ . ' of ' . __FILE__);
        if($result) {
            log_message('DEBUG', "*** Wrote output:$lf$lf$output$lf");
        } else {
            log_message('ERROR', "*** Failed to write output:$lf$lf$output$lf");
        }

        // read data from server until no more responses are sent            
        // while (!feof($fp)) {
        if(!feof($fp)) {
            log_message('DEBUG',"*** Requesting line 1 from remote server" );
           //$line = fgets($fp);
            $line = fgets($fp);
            if($line) {
                log_message('DEBUG',"*** Retreived line 1: " . print_r($line,TRUE) );
            } else {
                log_message('ERROR',"*** Could not retreive line 1" );
            }
        }
        fclose($fp);
        log_message('DEBUG',"*** Closed connection to remote server" );
    }

} 
```

日志。很明显，其中很多是我解释相关结果的方式。我截断了 URL 编码的 XML 数据：

```
 DEBUG - 2012-09-21 14:50:01 --> *** Socket open, connected to remote server 
DEBUG - 2012-09-21 14:50:01 --> ***  Bytes written: 8801  | line 57
DEBUG - 2012-09-21 14:50:01 --> *** Wrote output:

"POST xxxxxxxxxxxx.asp HTTP/1.0"
"Accept: */*"
"User-Agent: xxxxxxxxxxxxx_socket/1.0";
"Content-type: application/x-www-form-urlencoded";
"Content-length: 8630";
""
"xml_in=%26lt%3B%3Fxml+version%3D%26quot%3B1.0%26quot%3B..."
DEBUG - 2012-09-21 14:50:01 --> *** Requesting line 1 from remote server
ERROR - 2012-09-21 14:51:01 --> *** Could not retreive line 1
DEBUG - 2012-09-21 14:51:01 --> *** Closed connection to remote server 
```

任何关于在哪里看的想法将不胜感激。

- - - - - - - 编辑 - - - - - - -

以防万一有人偶然发现这个线程有类似的问题，这就是我最后根据罗比的建议所做的：

```
public function createBooking($orderId) {

    // http://php.net/manual/en/book.curl.php

    // get entire XML file as a string
    $xmlString = $this->getXmlString();

    // replace non-alphanumeric characters - can't use htmlentities or htmlspecialchars
    // because remote server uses different codes
    $xmlString = $this->replaceChars($xmlString);

    // get length of xml string
    $xmlStrCount = mb_strlen($xmlString) + 7;

    // prepare output
    $lf = chr(13).chr(10);
    $output = '"Accept: */*"' . $lf;                                            
    $output .= '"User-Agent: xxxxx_socket/1.0";' . $lf;
    $output .= '"Content-type: application/x-www-form-urlencoded";' . $lf;
    $output .= '"Content-length: ' . $xmlStrCount . '";' . $lf;
    $output .= '""' . $lf;
    $output .= '"xml_in='.$xmlString.'"';

    // set curl options
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL,"http://xxxxx:xx/xxxxx.asp");
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $output);
    // Request the header information in the response. 
    curl_setopt($ch,CURLOPT_HEADER,true);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

    // Now execute the query
    $response = curl_exec ($ch);
    if(!$response) {
        log_message('ERROR', "*** Curl error: " . curl_error($ch) . ' | line ' . __LINE__ . ' of ' . __FILE__);
        show_error(DEFAULT_ERR_MSG);
    }
    curl_close ($ch);

    // Response is the data. 
    $aLines = explode("\n", $response);  // Splits the resposne into an array so you can process individual lines.
    // etc

    print_r($aLines);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T03:56:31.773

不确定错误，但你需要`while (!$feof($fp))`而不是'if' - while 将循环直到你得到所有响应。这仍然不能解决你的问题，所以...

如果您使用 curl 实现，您可能会发现这更容易。更短，更整洁，更容易调试。[http://php.net/manual/en/book.curl.php](http://php.net/manual/en/book.curl.php)

```
<?php

$ch = curl_init();

// Set the various options. replace the xxxx's 
curl_setopt($ch, CURLOPT_URL,"xxxxxxxxxxxx.asp");
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, 'xml_in=' . $xmlString);
curl_setopt($ch,CURLOPT_USERAGENT,'xxxxxxxxxxx_socket/1.0');

// Request the header information in the response. You're example gets the header, but you may not need it, so change to false if not
curl_setopt($ch,CURLOPT_HEADER,true);

// Now execute the query
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$response = curl_exec ($ch);
curl_close ($ch);

// Response is the data. 
$aLines = explode("\n", $response);  // Splits the resposne into an array so you can process individual lines.
// etc

?> 
```

# python - OneToMany 与 Property Tastypie

> ID：12523682
> 
> 赞同：0
> 
> 时间：2012-09-21T03:03:28.003
> 
> 标签：python, django, tastypie

我有两个模型，任务和动作。Action 有一个 ToOneField 到 Task ，称为 task ，它按预期工作。Task 有一个名为 actions 的属性，它返回工作正常的有序操作列表，但现在我想将其公开给 API，并将 Tastypie 作为 ToManyField。这是我目前的尝试：

```
class TaskResource(ModelResource):
    actions = fields.ToManyField('ActionResource', 'actions')

    class Meta:
        queryset = Task.objects.all()
        resource_name = 'task'

class ActionResource(ModelResource):
    task = fields.ToOneField(TaskResource, 'task')

    class Meta:
        queryset = Action.objects.all()
        resource_name = 'action' 
```

这输出：

```
"error_message": "'list' object has no attribute 'all'" 
```

有没有人有任何不涉及重大重新设计的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:27:58.797

如果要返回属性，则必须在 Task 资源中定义一个字段，例如：

```
actions = CharField('actions', readonly=True) 
```

上面的代码将访问您的任务模型中的属性。`dehydrate_actions`如果您想以不同于tastepie 默认情况下的方式处理返回值，您可以定义一个方法。

但是，如果您想按照定义资源的方式执行此操作，您实际上并不想访问 Task 模型中的属性，您希望访问与操作反向关系的管理器，并且在 django 中默认情况下您将通过以下方式访问它调用 action_set。所以在你的任务资源中：

```
actions = fields.ToManyField('ActionResource', 'action_set') 
```

[更多关于这个的文档。](http://django-tastypie.readthedocs.org/en/latest/fields.html#tastypie.fields.RelatedField.related_name)

您在代码中实际所做的是尝试访问反向关系，但访问的是一个不被美味派理解的属性。

# javascript - 带有 RequireJS 的 Singleton Backbone 模型：反模式？

> ID：12523685
> 
> 赞同：8
> 
> 时间：2012-09-21T03:03:52.047
> 
> 标签：javascript, backbone.js, requirejs

我有一个模型需要由多个视图访问，并在模型模块的定义中完成此操作，我将立即实例化它，如下所示：

```
define([
    'jquery',
    'underscore',
    'backbone'
], function(_, Backbone) {
    var Foo = Backbone.Model.extend({
        // wondrous methods and properties
    });

    return new Foo();
}); 
```

我只需要这个模型的一个实例——现在就是这样。据我所知，解决方法是有一个单独的`App`模块。就像是：

```
define([], function() {
    var App = {
        routers: {},
        models: {},
        views: {}
    };

    return App;
}); 
```

您可以在其上实例化和存储应用程序启动时对对象的引用：

```
require([
    'App',
    'Foo'
], function(App, Foo) {
    App.models.foo = new Foo();
}); 
```

但我觉得这是一个糟糕的选择，因为你基本上要回到拥有一个全局命名空间——这是 RequireJS 应该帮助避免的事情。

是否有任何替代方案，是否有充分的理由避免使用如上所述的单例模型？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T06:04:48.583

嗯.. 我一直在使用 RequireJS 模块作为 Singleton 对象一段时间没有问题。这是我问的一个相关问题。

[将 requireJS 模块用作单例是一种不好的做法吗？](https://stackoverflow.com/questions/9733201/is-it-a-bad-practice-to-use-the-requirejs-module-as-a-singleton)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T07:09:41.853

您不需要创建命名空间的东西。您的第一个示例创建了一个单例。每当您需要此模块时，您都会获得模型的相同实例。因此，无需创建新的 App 模块并将实例保存在那里，只需直接要求您的第一个示例的模块即可。我们在我们的应用程序中使用它来拥有我们应用程序的单例实例，我看不出有什么陷阱。

# asp.net - Tuple 的主要优点是什么？

> ID：12523686
> 
> 赞同：3
> 
> 时间：2012-09-21T03:03:52.790
> 
> 标签：asp.net, c#-4.0

谁能告诉我使用元组的主要优点是什么？在什么情况下我需要使用这些？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T03:12:45.840

我假设您在谈论 Tuple<> 类型而不是匿名元组类。

与匿名类型一样，Tuple<> 允许您避免仅仅为了对几个对象进行分组而声明一个新类。与匿名类型不同，元组类型具有已知名称，因此可以用作方法返回和参数值等。

就个人而言，我尽量避免大量使用 Tuple<> 因为它会使代码难以理解，特别是在与原始类型一起使用时（例如，如果你看到一个 Tuple，每个字段代表什么并不明显）。

我发现元组非常有用的一个地方是作为字典键。因为元组实现了 Equals() 和 GetHashCode()（不是 ==，不过！），它们非常适合诸如基于复合键缓存信息的私有字典之类的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T03:06:51.890

它主要用于避免仅为了传递一组对象而声明具有一些属性的类/结构，其中只能传递一个对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T03:10:41.497

假设我有一个要查看的 url 列表，如果我遇到错误（4xx 或 5xx），我想构建一个列表，然后稍后将其显示给用户，或者只是在我的调试器中查看它。

我会捕获 web 异常并有一个`Tuple<string, int>`（url，http 错误代码），而不是为一个或两个函数创建一个结构来使用。哎呀，如果列表中有超过 0 个项目，它甚至可能是一个带有断点的 foreach 循环。那是它有用的时候。

# maven - 将 jar 文件添加到 Maven Reactor 模块列表

> ID：12523687
> 
> 赞同：0
> 
> 时间：2012-09-21T03:03:58.770
> 
> 标签：maven, maven-reactor

我有 3 个模块（ModuleA、ModuleB、ModuleC）。我将 ModuleC 提取为一个独立的 jar（其中包含 db 脚本）。

在 pom.xml 我试图做类似下面的事情，

```
<project ...>
......
<modules>
 <module>ModuleA</module>
 <module>ModuleB</module>
</modules>
....
</project> 
```

如何在反应器中包含该 JAR 模块（ModuleC），以便它像普通模块一样构建。如果我将它添加为依赖项，那么在配置文件调用期间如何执行其中的脚本？

除了上述之外，我还有如下所示的配置文件，

```
<profile>
  <id>runScript</id>

  <modules>
    <module>parent/child/ModuleA</module>
    <module>parent/child/ModuleB</module>
  </modules>
</profile> 
```

我需要将 ModuleC (JAR) 添加到此配置文件中。以便在调用配置文件时执行它。

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T04:12:15.203

我想知道，你想通过添加一个 jar 作为依赖项来实现什么？maven 构建用于创建 jar、war 等可执行文件。如果您已经有一个 .jar ，则将其添加到模块中的使用较少。我建议在特定项目的 pom 中添加 .jar 作为依赖项。

在`<modules>`tag 中，只能添加 maven 项目，不能直接添加 jars。依赖关系毕竟只是为了这个目的。悬停，如果您仍想这样做，请将其作为依赖项添加到主项目中。

```
<project ...>
......
<modules>
 <module>ModuleA</module>
 <module>ModuleB</module>
</modules>
....
<dependencies>      
        <dependency>
            <groupId>{groupId}</groupId>
            <artifactId>{artifactId}</artifactId>
            <version>{version}</version>
            <type>jar</type>
            <scope>{scope}</scope>
        </dependency>
</dependencies>
</project> 
```

# jquery - 使用隐藏的表单域

> ID：12523689
> 
> 赞同：1
> 
> 时间：2012-09-21T03:04:42.073
> 
> 标签：jquery, html, css

所以我使用了一个隐藏的表单字段，并用我的 JQuery 代码 onSubmit 中的数据填充它。问题是，JQuery 填充了 BOTH Type="Hidden" 字段。我只希望它填充 name="moment" 一个，我该如何解决这个问题？

这是我的html：

```
<form method="post" action="momentactions.php">
    <input type="hidden" name="album_id" value="<?php echo $album_id; ?>">
    <input type="hidden" name="moment">
    <input type="submit" name="submit" value="submit">
</form> 
```

这是我的jQuery：

```
$('form').on('submit', function() {
    values = [];
    $('#container-top img').each(function() {
    values.push($(this).attr('value'));
    });
$('input[type=hidden]').val(JSON.stringify(values));
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T03:06:50.090

很简单：

```
input[type="hidden"][name="moment"] 
```

但仍然 - 提取所有值、序列化它们并发送序列化的值并不是一个好主意

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T03:11:30.030

这行代码

```
$('input[type=hidden]') 
```

说“给我所有具有隐藏类型的输入元素”，因为你只想要其中一个，你可以做一些不同的事情。

您可以为所需的输入字段提供一个 ID，然后使用 jQuery ID 选择器 (#)：

```
$('#idgoeshere') 
```

或者你可以给你想要的输入字段一个类并使用类选择器 (.)：

```
$('.classgoeshere') 
```

或者您可以保留当前的 ​​html 并使用属性选择器，就像您当前的选择器一样，只有一个不同的属性：

```
$('input[name="moment"]') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T03:06:56.980

尝试这个

```
$('input[type=hidden][name=moment]').val(JSON.stringify(values)); 
```

也不要忘记关闭输入标签..

```
$('input[name=moment]')
$('input[name=moment]:hidden') 
```

都是有效的选择器..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T03:08:54.900

我建议您在输入标签上添加 id="moment"

```
<input type="hidden" name="moment" /> 
```

将其更改为

```
<input type="hidden" name="moment" id="moment" /> 
```

所以在你的代码上，你可以使用

```
$('input#moment').val(JSON.stringify(values)); 
```

# mod-rewrite - mod_rewrite 不转发编码的哈希？

> ID：12523690
> 
> 赞同：1
> 
> 时间：2012-09-21T03:04:46.427
> 
> 标签：mod-rewrite

我在服务器上有一小部分文本文件。URL 如下所示： http: [//mysite.com/My%20Text%20File.txt](http://mysite.com/My%20Text%20File.txt)

我有一个小的 PHP 脚本，它将文本文件 URI 作为参数并将文本文件转换为 JSON： http://mysite.com/json.php?file=/My%20Text% [20File.txt](http://mysite.com/json.php?file=/My%20Text%20File.txt)

而且我有一个重写规则使它变得漂亮： RewriteRule ^(.*).json$ /json.php?file=$1.txt

而且效果很好。现在 JSON 的 URI 与文本 URI 相同，但文件扩展名除外。但是，如果我有一个名称中有编码的文本文件：http: [//mysite.com/Text%20File%20%231.txt](http://mysite.com/Text%20File%20%231.txt)

Apache 打开文本文件没有问题。同样，“真实” URI 有效： http://mysite.com/json.php?file=/Text%20File%20 [%231.txt](http://mysite.com/json.php?file=/Text%20File%20%231.txt)

但是重写规则却把它搞砸了。所以 PHP 看到的“文件”GET 参数是“/Text%20File%20”——带有散列并且在丢失之后。

我可以避免名称中带有散列的文件，但我很好奇为什么当其他编码字符没有时散列会被未编码，而且我在其他地方找不到对此的任何引用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T03:13:21.113

您需要在重写规则中使用该[`B`标志：](http://httpd.apache.org/docs/2.2/rewrite/flags.html#flag_b)

```
RewriteRule ^(.*).json$ /json.php?file=$1.txt [B] 
```

# scala - scalafx 入门：HelloScalaFX 中的错误

> ID：12523695
> 
> 赞同：1
> 
> 时间：2012-09-21T03:05:40.097
> 
> 标签：scala, javafx

我从 hg 获得了 scalafx 资源。

比我成功构建它并使 sbt 发布本地。

现在我正在尝试制作自己的hello world。

我在 build.sbt 中添加了以下依赖项：

```
libraryDependencies += "org.scalafx" % "scalafx" % "1.0-SNAPSHOT"

unmanagedJars in Compile += Attributed.blank(file(System.getenv("JAVA_HOME") + "/jre/lib/jfxrt.jar")) 
```

我从原始 scalafx 库中获得的这些行。

比我将 HelloScalaFX 中的行复制到我自己的副本并尝试构建它。

我有一个奇怪的错误：

```
not enough arguments for constructor Stage: (d: javafx.stage.Stage)scalafx.stage.Stage
[error]   stage = new Stage {
[error]               ^
[error] one error found 
```

恕我直言，这表明舞台包装存在一些问题。

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T02:07:40.323

答案对于 scala 来说是相当普遍的。

版本很重要！如果您为 2.9.2 scala 构建一些东西并尝试将此 jar 用于 2.10.0，则可能会出现许多冲突。

# facebook - 翻译短语未被清理。该怎么办？

> ID：12523697
> 
> 赞同：0
> 
> 时间：2012-09-21T03:06:02.780
> 
> 标签：facebook, facebook-graph-api, translate

我已经创建了我的应用程序和一些图形对象和操作。在为我的动作和对象找到正确的名称后，我开始在 Localize 链接中翻译我的动作。

我很惊讶有 827 个阶段要翻译。那是因为有与删除的对象和动作相关的短语！

所以他们没有被清理干净。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T22:20:33.493

[https://www.facebook.com/translations/admin/dashboard.php?app=YOUR_APP_ID](https://www.facebook.com/translations/admin/dashboard.php?app=YOUR_APP_ID)

使用右上角的“删除并重新导入所有字符串”链接。

# joomla - Joomla 2.5。- 设置停留在配置步骤 6

> ID：12523698
> 
> 赞同：2
> 
> 时间：2012-09-21T03:06:08.377
> 
> 标签：joomla, joomla2.5

我正在尝试在共享的 Windows 2008 服务器上设置 joomla。PHP 版本是 5.2 FastCGI。根据 joomla 预安装检查主机是否满足所有要求。但是设置卡在第 6 步（配置）上。它只是显示进度更新，但没有做任何事情。

![安装前检查](../Images/ac4786f775ae2b66a808a8d36b0345c3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:14:11.193

在此链接[http://forum.joomla.org/viewtopic.php?f=623&t=581196找到了解决方案](http://forum.joomla.org/viewtopic.php?f=623&t=581196)

**编辑：这是@joomla.org 论坛发布的解决方案。所有功劳归于 rickpowers01**

你们似乎都在正确的轨道上，但不是很清楚。这是安装程序在第 6 步停止时我所做的。首先，了解安装程序要做什么：它正在编写一个名为 configuration.php 的文件，该文件必须驻留在您的站点根目录中。它失败是因为您的 ISP 设置不允许您的网络用户写入 httpdocs 目录。

好消息是您可以在本地创建和编辑此文件，然后通过 FTP 或 Plesk 文件管理器上传。要在本地创建它，请解压缩安装包并将名为 configuration.php-dist 的文件复制到 configuration.php。使用自由文本编辑器打开它并编辑以下参数：

```
public $dbtype = 'mysql';    // Normally mysql
public $host = 'yourdomain.com';     // This is normally set to localhost - no! - put in your real domain name 
public $user = 'root';   // MySQL username - whatever you entered on the installer dialog step 4
public $password = 'your db password';  // MySQL password - whatever you entered on the installer dialog step 4
public $db = 'your db name';     // MySQL database name -whatever you entered on the installer dialog step 4
public $dbprefix = 'xxxx_';  // Do not change unless you need to! -whatever you entered on the installer dialog step 4 
```

保存文件并将其上传到您网站的根目录。删除安装目录。尝试您的域/管理员，您应该可以登录。如果您收到 SQL 错误，请使用 plesk 上的 phpadmin 工具检查您的 db 参数。重新编辑 configuration.php 并重新上传。

如果您进入第 6 步，那么应该已经创建了数据库，并且这些参数应该是您在数据库创建对话框中输入的参数。如果这不起作用，请检查数据库是否存在并且表名是否以前缀等开头。

# java - 我可以从泛型类型参数中获取 .class 吗？

> ID：12523699
> 
> 赞同：19
> 
> 时间：2012-09-21T03:06:31.637
> 
> 标签：java, generics, gson

我有以下课程：

```
public abstract class MyClass<T extends Object> {

    protected T createNewFromData(Reader reader){
        GSON.fromJSON(reader,T.class); // T.class isn't allowed :(
    }
} 
```

如何将 Class<T> 实例传递到那里？是否有一些奇怪而古怪的工作？

除了从 T 类型的预实例化对象之外，还有其他方法可以获取 Class<T> 引用吗？它也不会让我这样做：

```
T t = new T();
Class<T> klass = t.class; 
```

**尝试#2**

有趣的是，如果我从类定义中删除“扩展 JSONOBjBase”，我只会得到一个未经检查的强制转换警告（没有错误）。有没有另一种方法来写演员是如何完成的？

![日食截图](../Images/aad49a2ccd7fbc26a9b3b220c944d2ef.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-21T03:09:14.653

否。
由于类型擦除，此信息在运行时不存在。

相反，您可以重新使用 GSON 的[TypeToken hack](http://google-gson.googlecode.com/svn/tags/1.1.1/docs/javadocs/com/google/gson/reflect/TypeToken.html)，它创建一个继承封闭通用基类的匿名类。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-21T03:36:48.577

或者您可以将[Class](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html)作为构造函数参数发送并使用该对象而不是尝试获取 T.class。

```
public abstract class MyClass<T extends Object> {

    private Class<T> klass;

    public MyClass(Class<T> klass) {
        this.klass = klass;
    }

    protected T createNewFromData(Reader reader){
        GSON.fromJSON(reader,klass); 
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T04:42:19.967

好的。你应该这样做：

```
 public abstract class MyClass <T> {

        public T createNewFormData(Reader reader, Class<T> clazz){
        return GSON.fromJSON(reader, clazz);
        }
      }

      public class ImplementMyClass extends MyClass<Long>{
      } 
```

并这样称呼它：

```
 MyClass<Long> cls = new ImplementMyClass();

    Socket s = null;
    try {
        s = new  Socket("localhost", 8080);
    } catch (Exception e) {
        e.printStackTrace();
        return;
    }
    InputStream i = null;
    try {
        i = s.getInputStream();
    } catch (IOException e) {
        e.printStackTrace();
    }
    InputStreamReader reader = new InputStreamReader(i);
    cls.createNewFormData(reader, Long.class); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-10T01:40:25.817

这种与上面Alex给出的答案相呼应。这是一个示例代码，我正在使用 jackson 库编写通用 json -> POJO 包装器：

```
/* Method that reads json string from a file, and maps it to an instance of the class passed in as the second argument. */

public static <T> T getObjectMappedFromJsonInFile(String fileName, Class<T> clazz){

    ObjectMapper mapper=new ObjectMapper();

    File file=new File(fileName);

    try{

        JsonNode jsonNode=mapper.readTree(file);

        T response=mapper.convertValue(jsonNode,clazz);

        return response;
    }catch (Exception e){

        log.error("Error reading transactions.json file",e);

    }
    return null;

} 
```

这就是我所说的：

```
TransactionsResponse response=getObjectMappedFromJsonInFile(fileName,TransactionsResponse.class); 
```

# linux - Linux 中 `sysinfo.h` 的 Mac OS X 等效头文件

> ID：12523704
> 
> 赞同：5
> 
> 时间：2012-09-21T03:07:45.397
> 
> 标签：linux, macos, porting, sysinfo

Linux 中是否有任何 Mac OS X 等效的头文件`sysinfo.h`。我正在将代码从 Linux 移植到 Mac，但`struct sysinfo`找不到结构。

编辑：==更多信息== 在 Linux 平台中，我使用`<sys/sysinfo.h>`在 Mac 中找不到的头文件。通过在 Linux 中包含标头，我执行以下操作： `struct sysinfo s;` `sysinfo(&s);`

结果给了我一些系统相关的信息。现在，当我将我的项目从 Linux 移植到 Mac 时，我想知道 Mac 是否提供任何类似的功能。

请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-21T03:36:56.253

`sysinfo`在 Mac OS X 中最接近的等价物是`sysctl`/MIB。它不`sysinfo`直接返回结构，但该结构中的大多数值都可用作 sysctl 键。例如：

*   `uptime`近似为`kern.boottime`（尽管这反映了实际的启动时间，而不是运行时间）
*   `loads`可作为`vm.loadavg`
*   `totalram`= `hw.memsize`（以字节为单位）
*   `freeram`, `sharedram`, 并且`bufferram`很复杂，因为 XNU 内存管理器的工作方式与 Linux 不同。我不确定是否暴露了最接近的等效值（“活动”和“非活动”内存）。
*   `totalswap`并`freeswap`反映在`vm.swapusage`. （但请注意，OS X 动态分配交换空间。）
*   `procs`似乎没有任何等价物。
*   `totalhigh`并且`freehigh`特定于 i386 Linux。

# ios - trigger.io 中的自定义 URL 方案

> ID：12523711
> 
> 赞同：1
> 
> 时间：2012-09-21T03:09:12.350
> 
> 标签：ios, trigger.io, url-scheme

我正在尝试在我的应用程序的 config.json 文件中使用[trigger.io 的 urlhandler 指令](http://docs.trigger.io/en/v1.4/modules/urlhandler.html)来设置自定义方案。

我已将以下内容放入“模块”部分：

```
"urlhandler": {
    "scheme": "mytestapp"
} 
```

不幸的是，`Cannot Open Page: Safari cannot open the page because the address is invalid`如果我尝试导航到`mytestapp://testing`

在设置自定义 URL 方案方面我缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:16:54.083

看起来它最终于 9 月 25 日发布。 [http://docs.trigger.io/en/v1.4/release-notes.html](http://docs.trigger.io/en/v1.4/release-notes.html)

# jqgrid - jqgrid 格式化程序可以调用 ajax/json 方法吗？

> ID：12523714
> 
> 赞同：1
> 
> 时间：2012-09-21T03:09:28.987
> 
> 标签：jqgrid, jqgrid-formatter

我在 jqGrid 中的一个列上使用了格式化程序。格式化程序使用一些逻辑来决定显示什么，在某些情况下，它会调用 ajax 方法。我已经在 Fiddler 中验证了正确的数据来自我的 ajax 调用。我还在 Chrome 调试工具中验证了我的变量设置是否正确。但是，序列完全不正确，因此我的列中的返回值是“未定义”。我可以在调试工具的时间线中看到我的 getJSON 调用在 jqgrid 已经加载后被调用。

我首先尝试了这个：

```
function myFormatter(cellvalue, options, rowObject) 
{
    if (rowObject[0] == something) {
        $.getJSON('@Url.Action("MyAction", "MyController"), function (myResult) {
            var myObject = myResult[0];
            return myObject.myID;
        });
    }
    else {
        return "";
    }
} 
```

我还尝试使用带有 async=false 的 ajax 调用，并且我尝试了 type 和 dataType 的不同值，但结果都是一样的：

```
function myFormatter(cellvalue, options, rowObject) 
{
    if (rowObject[0] == something) {
        $.ajax({
            type: 'POST',
            url: '@Url.Action("MyAction", "MyController"),
            async: false,
            success: (function(result) {
                var myObject = myResult[0];
                return myObject.myID;
            })
        });        
    }
    else {
        return "";
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T13:59:02.287

似乎您应该能够通过使用同步 AJAX 调用和闭包来使其工作：

```
function myFormatter(cellvalue, options, rowObject) 
{
    var value = "";

    if (rowObject[0] == something) {
        $.ajax({
            type: 'POST',
            url: '@Url.Action("MyAction", "MyController"),
            async: false,
            success: (function(result) {
                var myObject = myResult[0];
                value = myObject.myID;
            })
        });        
    }

    return value;
} 
```

不过，一般来说，使用同步 AJAX 调用是一种不好的做法，因为它们可能会在不确定的时间内阻塞 UI。如果您的网格中有很多行，这种情况可能特别糟糕，因为每行将进行一次 AJAX 调用。

如果可以，更好的方法可能是提前检索 ID 并将它们缓存在页面本地，或者只是在服务器端进行格式化。与往常一样，使用您的最佳判断。

# excel - 访问受密码保护的 MS Access 文件

> ID：12523716
> 
> 赞同：3
> 
> 时间：2012-09-21T03:10:01.223
> 
> 标签：excel, ms-access

我已经通过文件 > 信息下的加密选项加密了一个 Access 文件。

在 Excel 中，当我尝试从 Access 文件中检索表格时，它会弹出一个密码框，但它不接受我的密码。我可以从 Access 文件链接到 Access 文件没有问题。

有谁知道问题是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T08:08:19.357

解决了。我去了文件访问选项客户端设置并将加密方法设置为“使用旧版加密”然后重新设置密码

# wpf - 如何以 Auto 为值制作固定大小的网格列

> ID：12523717
> 
> 赞同：2
> 
> 时间：2012-09-21T03:10:03.743
> 
> 标签：wpf, grid

我创建了一个简单的单选按钮样式，如下所示：

```
<Style TargetType="RadioButton" >
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ToggleButton">
                <Border x:Name="BORDER_PART" BorderBrush="Gray" CornerRadius="5,5,0,0" BorderThickness="0.5" >
                    <TextBlock x:Name="LABEL_PART" HorizontalAlignment="Center" FontFamily="Calibri" FontSize="14" VerticalAlignment="Center" Text="{TemplateBinding Content}" />
                </Border>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsChecked" Value="True">
                        <Setter TargetName="BORDER_PART" Property="Background" Value="White"/>
                        <Setter TargetName="BORDER_PART" Property="BorderThickness" Value="0.5 0.5 0.5 0"/>
                        <Setter TargetName="LABEL_PART" Property="FontWeight" Value="Bold"/>
                    </Trigger>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter TargetName="LABEL_PART" Property="FontWeight" Value="Bold"/>
                        <Setter TargetName="BORDER_PART" Property="BorderBrush" Value="Black"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

然后我将它应用到这样的网格中：

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto"/>
        <ColumnDefinition Width="Auto"/>
        <ColumnDefinition/>
        <ColumnDefinition Width="Auto"/>
        <ColumnDefinition Width="Auto"/>
    </Grid.ColumnDefinitions>
    <RadioButton Grid.Column="0" GroupName="TabNavigator" IsChecked="True" Content="Home" />
    <RadioButton Grid.Column="1" GroupName="TabNavigator" Content="Dashboard"/>

    <TextBlock x:Name="moveAroundTextBlock" Text="some text" Grid.Column="2" HorizontalAlignment="Center" VerticalAlignment="Bottom" Margin="0 0 0 5"/>

    <Button Content="Help" Grid.Column="3" />
    <Button Content="Close" Grid.Column="4" />
</Grid> 
```

正如您在样式中看到的，当单选按钮被鼠标悬停时，文本将变为粗体，这一切都很好，但是当它应用在像上面这样的网格中时，“moveAroundTextBlock”看起来就像每次单选按钮切换时都会移动在粗体和常规之间，因为单选按钮所在的列被标记为自动（这是一个要求，尽管由于可能本地化为其他语言，所以文本不会被截断）

所以问题是：
如何使“moveAroundTextBlock”保持在其位置，但有以下限制：
- 单选按钮和按钮的列必须是自动
的 - moveAroundTextBlock 必须在其列中水平居中

（或者换句话说，如何使raidobuttons的列在内容为粗体时不会变宽，同时保留自动调整大小的列）

# android - 关于绑定/取消绑定的 Android 服务问题？

> ID：12523718
> 
> 赞同：7
> 
> 时间：2012-09-21T03:10:10.743
> 
> 标签：android, service, bind, unbind

客户端可以使用`bindService()`/调用原始的绑定/取消绑定服务`unbindService()`。

我的问题是如何在服务端取消绑定服务，而不是`unbindService()`由客户端调用，可能我应该调用它`unbindClient`。

我认为服务应该知道绑定了哪些客户端，那么有没有办法告诉服务取消绑定特定客户端？

因为我只写服务，我不知道客户端调用`unbindService()`是否正确，所以我有这个问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T07:29:46.780

服务不能自行解除绑定。不过，您可以使已启动的服务自行*停止*`stopSelf()`。

操作系统在幕后跟踪所有绑定和解除绑定。您不必担心对象回收，Android 会为您完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-07T04:53:42.370

如果您只想限制服务启动并调用 bindService() 后返回的功能。您可以注册客户端并在完成服务后取消注册。这样绑定您的服务不会有任何影响。这我从android 网站中的[Remote Messenger Service示例中选择](http://developer.android.com/reference/android/app/Service.html#RemoteMessengerServiceSample)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T23:04:56.033

如果您有权访问客户端代码 -

您可以`startService()`从客户端调用 - 这将启动服务（而不是`Service`在退出时结束`Activity`- 因为只会`stopService()`关闭它）。

而且，客户可以调用`bindService()`- 如果他们想要执行`Activity`-`Service`交互。

在退出/取消绑定客户端时，该服务将在`startService()`被调用后仍然运行 -`Service`可以执行其他操作，然后调用`stopService()`将自行销毁。

# php - 将 Javascript 函数传递给 PHP 文件

> ID：12523719
> 
> 赞同：1
> 
> 时间：2012-09-21T03:10:13.137
> 
> 标签：php, javascript, ajax, wordpress

我一直在使用 Soundcloud API，并设置了他们的录制按钮以在我的网站上工作。上传完成后，代码会吐出新创建的 soundcloud 文件的新 URL。

我需要的是通过一些 PHP 代码发送那个 URL，它允许我自动发布一个新的 WordPress 帖子。

这段 javascript 代码来自这个 soundcloud 示例（更多代码在链接中）：[http ://connect.soundcloud.com/examples/recording.html](http://connect.soundcloud.com/examples/recording.html)

```
<script type="text/javascript">

$("#upload").live("click", function(e){
  setRecorderUIState("uploading");

  SC.connect({
    connected: function(){
      $("#uploadStatus").html("Uploading...");
      SC.recordUpload({
        track: {
          title: "Untitled Recording",
          sharing: "private"
        }
      }, function(track){
        $("#uploadStatus").html("<a href='" + track.permalink_url + "' class='sclink'>" + track.permalink_url + "</a>");
      });
    }
  });

  e.preventDefault();
});

</script> 
```

#uploadStatus 区域会吐出 track.permalink_url ...，它的工作原理是这样的。我需要的是将曲目的 URL 发送到一个 php 文件，该文件将自动创建一个新的 WordPress 帖子，如下所示：

```
<?php
// Create post object
$my_post = array(
 'post_title' => 'My Title',
 'post_content' => 'TRACKURLSHOULDSHOWUPHERE',
 'post_status' => 'publish'
);

// Insert the post into the database
wp_insert_post( $my_post );
?> 
```

我知道我需要使用 ajax，但对于我的生活，我无法弄清楚如何正确地拉动它。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T03:26:23.193

[http://api.jquery.com/jQuery.ajax/#sending-data-to-server](http://api.jquery.com/jQuery.ajax/#sending-data-to-server)

使用 jQuery AJAX 函数，您可以这样做：

```
$.ajax({
  url: "myPhpScript.php",
  data: {
    url: track.permalink_url,
    name: track.name
  }
}); 
```

在 PHP 端，您可以从 url 中检索这些变量（默认情况下它们作为 GET 传递，但您可以根据需要更改为 POST）。

# android - webview 和 listview 在同一个活动中

> ID：12523720
> 
> 赞同：1
> 
> 时间：2012-09-21T03:10:23.067
> 
> 标签：android, listview, webview

我正在尝试在同一活动中创建 webview 和 listview。我有一个带有 id 的列表视图，`list_xc`但在我的`content must have a ListView whose id attribute is 'android.R.id.list`. 这是我的布局文件：

```
<com.markupartist.android.widget.ActionBar
    android:id="@+id/actionbar"
    style="@style/ActionBar" />

<TextView
    android:id="@+id/tv_xc"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="8dp"
    android:layout_marginTop="3dp"
    android:text="Cross Country (XC)"
    android:textColor="#372c24"
    android:textSize="20dp"
    android:textStyle="bold" />

<WebView
    android:id="@+id/webview_xc"
    android:layout_width="match_parent"
    android:layout_height="166dp" />

<ListView
    android:id="@+id/list_xc"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
</ListView> 
```

这是我的行布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@android:color/white"
android:orientation="vertical" >

<TextView
    android:id="@+id/tv_test"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:padding="10dp"
    android:textSize="16sp"
    android:textColor="#424545" >
</TextView> 
```

这是我的活动：

```
public class Information_XC_Activity extends ListActivity {
WebView mWebView;
TextView tv;
private Adapter_DetailPolXC adapterDetailPolXC;

private ListView mainListView;

// private ArrayAdapter<String> listAdapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.info_xc);

    final ActionBar actionBar = (ActionBar) findViewById(R.id.actionbar);
    actionBar.setTitle(getString(R.string.app_name));

    int index = getIntent().getIntExtra("text", 0);

    mWebView = (WebView) findViewById(R.id.webview_xc);

    String temp = "<html><body>" + "<p align=\"justify\">"
            + getString(R.string.xc_info + index) + "</p> "
            + "</body></html>";
    mWebView.loadData(temp, "text/html", "utf-8");

    ArrayList<Entity_Detail_Product> arraylist = new ArrayList<Entity_Detail_Product>();

    adapterDetailPolXC = new Adapter_DetailPolXC(this, R.layout.info_row,
            arraylist);

    mainListView = (ListView) findViewById(R.id.list_xc);
    mainListView.setAdapter(adapterDetailPolXC);

    new info_xc_dao(response).view_pol_xc();
}

pol_xc_Result response = new pol_xc_Result() {
    @Override
    public void gotResult(Object obj, String message, int action) {
        // TODO Auto-generated method stub
        // actionBar.setProgressBarVisibility(View.INVISIBLE);

        @SuppressWarnings("unchecked")
        ArrayList<Entity_Detail_Product> arrayList = (ArrayList<Entity_Detail_Product>) obj;
        AlertDialog.Builder builder = new AlertDialog.Builder(
                Information_XC_Activity.this);

        if (arrayList == null) {
            builder.setIcon(R.drawable.alert_warning);
            builder.setTitle("Error");
            builder.setMessage("Data Not Found !");
            builder.setNegativeButton("Ok",
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog,
                                int which) {
                        }
                    });
            AlertDialog alert = builder.create();
            alert.show();

        } else {
            for (Entity_Detail_Product entity_Detail_Product : arrayList) {
                adapterDetailPolXC.add(entity_Detail_Product);
            }
            adapterDetailPolXC.notifyDataSetChanged();
        }

    }

};

private class Adapter_DetailPolXC extends
        ArrayAdapter<Entity_Detail_Product> {
    private ArrayList<Entity_Detail_Product> items;

    public Adapter_DetailPolXC(Context context, int textViewResourceId,
            ArrayList<Entity_Detail_Product> items) {
        super(context, textViewResourceId, items);
        this.items = items;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        View v = convertView;
        if (v == null) {
            LayoutInflater layoutInflater = (LayoutInflater) getContext()
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = (View) layoutInflater.inflate(R.layout.info_xc, null);
        }
        Entity_Detail_Product adapter_Detail_Product = items.get(position);
        if (adapter_Detail_Product != null) {
            TextView textView = (TextView) v.findViewById(R.id.tv_test);
            if (textView != null)
                textView.setText(adapter_Detail_Product.getModel_name());
        }
        return v;
    }

} 
```

这是logcat：

> 09-21 03:22:49.029: E/AndroidRuntime(22732): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com.wilis.hellotabwidget/com.wilis.hellotabwidget.Information_XC_Activity}: java.lang.RuntimeException: 你的内容必须有一个 ID 属性为 'android.R.id.list' 09-21 03:22:49.029: E/AndroidRuntime(22732): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651) 09 的 ListView -21 03:22:49.029: E/AndroidRuntime(22732): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667) 09-21 03:22:49.029: E/AndroidRuntime(22732): 在 android.app .ActivityThread.access$1500(ActivityThread.java:117) 09-21 03:22:49.029: E/AndroidRuntime(22732): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:935) 09-21 03: 22：49.029：E/AndroidRuntime（22732）：在 android.os。Handler.dispatchMessage(Handler.java:99) 09-21 03:22:49.029: E/AndroidRuntime(22732): 在 android.os.Looper.loop(Looper.java:130) 09-21 03:22:49.029: E/AndroidRuntime(22732): 在 android.app.ActivityThread.main(ActivityThread.java:3687) 09-21 03:22:49.029: E/AndroidRuntime(22732): 在 java.lang.reflect.Method.invokeNative(Native方法) 09-21 03:22:49.029: E/AndroidRuntime(22732): at java.lang.reflect.Method.invoke(Method.java:507) 09-21 03:22:49.029: E/AndroidRuntime(22732) : 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867) 09-21 03:22:49.029: E/AndroidRuntime(22732): 在 com.android.internal.os.ZygoteInit.main (ZygoteInit.java:625) 09-21 03:22:49.029: E/AndroidRuntime(22732): at dalvik.system.NativeStart.main(Native Method) 09-21 03:22:49.029: E/AndroidRuntime(22732) : 原因：java.lang.RuntimeException：您的内容必须有一个 ListView，其 id 属性为 'android.R.id.list' 09-21 03:22:49.029: E/AndroidRuntime(22732): at android.app.ListActivity.onContentChanged( ListActivity.java:243) 09-21 03:22:49.029: E/AndroidRuntime(22732): 在 com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:212) 09-21 03:22: 49.029: E/AndroidRuntime(22732): 在 android.app.Activity.setContentView(Activity.java:1657) 09-21 03:22:49.029: E/AndroidRuntime(22732): 在 com.wilis.hellotabwidget.Information_XC_Activity.onCreate (Information_XC_Activity.java:35) 09-21 03:22:49.029: E/AndroidRuntime(22732): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 09-21 03:22:49.029: E/AndroidRuntime (22732)：在 android.app.ActivityThread。performLaunchActivity(ActivityThread.java:1615)

非常感谢，我真的需要帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T03:14:28.827

因为您的`Information_XC_Activity`extends `ListActivity`，它必须有一个 ListView ，其 id 在错误消息中指定。更改此行

```
android:id="@+id/list_xc" 
```

对此：

```
android:id="@android:id/list" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T03:15:46.963

ListActivity 不需要通过 setContentView() 方法为其分配布局，如果您只想显示一个 ListView ListActivity 默认包含一个 ListView。

如果您需要在 ListActivity 中包含比 ListView 更多的视图，您仍然可以为您的 Activity 分配布局。在这种情况下，您的**布局必须包含一个 ListView，其中 android:id 属性设置为 @android:id/list**。所以修改代码到这个。

```
<ListView
  android:id="@android:id/list"
  android:layout_width="match_parent"
  android:layout_height="wrap_content" >
</ListView> 
```

如果您在布局中使用带有@android:id/empty ID 的 View，如果 ListView 为空，ListActivity 将自动显示此 View，否则将其隐藏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T03:17:06.643

如果你扩展 ListActivity，你的 android:id="@+id/list_xc" 必须是 android:id="@android:id/list"

# python - 为什么这个 Jinja nl2br 过滤器转义 但没有 的？

> ID：12523725
> 
> 赞同：7
> 
> 时间：2012-09-21T03:10:47.453
> 
> 标签：python, regex, flask, jinja2

我正在尝试实现[这个](http://flask.pocoo.org/snippets/28/)Jinja`nl2br`过滤器。它工作正常，只是`<br>`它添加的 ' 被转义了。这对我来说很奇怪，因为`<p>`'s 没有被转义，它们都在同一个字符串中。

我正在使用烧瓶，因此`autoescape`启用了 Jinja。当我发现[这个人](https://stackoverflow.com/questions/10870081/jinja2-filter-to-convert-custom-markup-to-html)说 the `autoescape`and the`escape(value)`可能导致双重转义时，我真的充满希望，但删除 the`escape()`并没有帮助。

这是我修改后的代码，它的输出：

```
@app.template_filter()
@evalcontextfilter
def nl2br(eval_ctx, value):
    _paragraph_re = re.compile(r'(?:\r\n|\r(?!\n)|\n){2,}')
    result = u'\n\n'.join(u'<p>%s</p>' % escape(p.replace(u'\r\n', u'<br>\n')) for p in _paragraph_re.split(value))
    if eval_ctx.autoescape:
        result = Markup(result)
    return result 
```

输入：

```
u'1\r\n2\r\n\r\n3\r\n4\r\n\r\n5\r\n6\r\n7' 
```

输出：

```
<p>1&lt;br&gt;
2</p>

<p>3&lt;br&gt;
4</p>

<p>5&lt;br&gt;
6&lt;br&gt;
7</p> 
```

所需的输出：

```
<p>1<br>2</p>

<p>3<br>4</p>

<p>5<br>6<br>7</p> 
```

什么可能导致`<br>`' 被转义但允许`<p>`' ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-16T06:33:19.587

在我写这篇文章时，这里的其他 2 个答案不会转义`<br/>`标签，但它们容易受到 XSS 的攻击。使用此输入字符串对其进行测试：

```
';alert(String.fromCharCode(88,83,83))//';alert(String.fromCharCode(88,83,83))//";
alert(String.fromCharCode(88,83,83))//";alert(String.fromCharCode(88,83,83))//--
></SCRIPT>">'><SCRIPT>alert(String.fromCharCode(88,83,83))</SCRIPT> 
```

Dan Jacob的原始[nl2br jinja 片段](http://flask.pocoo.org/snippets/28/)几乎就在那里：

```
import re

from jinja2 import evalcontextfilter, Markup, escape

_paragraph_re = re.compile(r'(?:\r\n|\r|\n){2,}')

app = Flask(__name__)

@app.template_filter()
@evalcontextfilter
def nl2br(eval_ctx, value):
    result = u'\n\n'.join(u'<p>%s</p>' % p.replace('\n', '<br>\n') \
        for p in _paragraph_re.split(escape(value)))
    if eval_ctx.autoescape:
        result = Markup(result)
    return result 
```

只要`value`只是一个字符串，上面的代码就已经可以工作了。`value`只有当它*已经*是一个`Markup`对象时才会失败，因为`.replace()`调用会导致`'<br>'`字符串被转义。这源于 Jinja2 通常处理转义的方式；`Markup`对象被假定为安全的，普通字符串对象被假定为不安全的，因此将两者结合起来的操作会自动调用对普通字符串对象的转义。

要解决此问题，只需将其与@joemaller 的创建`Markup('<br/>\n')`对象的答案结合起来即可。IE：

```
result = u'\n\n'.join(u'<p>%s</p>' % p.replace('\n', Markup('<br/>\n')) \
    for p in _paragraph_re.split(escape(value))) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-02T17:35:18.857

过滤器`nl2br`无法正确处理标记对象。如果`value`是 Markup，则插入的`<br>`标签将被转义。要修复它，`<br>`标签也必须是标记：

```
@app.template_filter()
@evalcontextfilter
def nl2br(eval_ctx, value):
    _paragraph_re = re.compile(r'(?:\r\n|\r(?!\n)|\n){2,}')
    result = u'\n\n'.join(u'<p>%s</p>' % p.replace(u'\n', Markup('<br>\n'))
                                         for p in _paragraph_re.split(value))
    if eval_ctx.autoescape:
        result = Markup(result)
    return result 
```

注意：我将行尾标准化为`\n`.

这是对正在发生的事情的更长解释：

拆分`Markup`对象，产生许多`Markup`对象：

```
>>> Markup("hello there").split()
[Markup(u'hello'), Markup(u'there')] 
```

根据[Jinja 的 Markup 文档](http://jinja.pocoo.org/docs/api/#jinja2.Markup)：

> 对标记字符串的操作是标记感知的，这意味着所有参数都通过 escape() 函数传递。

回顾 的主要转换`nl2br`，我们可以看到发生了什么以及为什么它不起作用：

```
result = u'\n\n'.join(u'<p>%s</p>' % p.replace(u'\n', u'<br>\n')
                                     for p in _paragraph_re.split(value)) 
```

`u'\n\n'`和`u'<br>\n'`是 unicode 字符串，但已从 中拆分`p`，这是一个标记对象。尝试将 unicode 字符串添加到 Markup object ，但 Markup 对象首先正确拦截并转义字符串。`Markup``value``p.replace``p`

由于`<p>`Python 如何组装最终字符串，标签不会被转义，因为`%`格式化方法是在 unicode 字符串上调用的，它使用传递给它的元素的 unicode 表示。标记元素已经被声明为安全的，因此它们不会被进一步转义。`result`最终成为一个 unicode 字符串。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-21T10:19:08.170

您是否在移除逃生装置的情况下尝试过？因为以下对我有用？

```
@app.template_filter()
@evalcontextfilter
def nl2br(eval_ctx, value):
   _paragraph_re = re.compile(r'(?:\r\n|\r(?!\n)|\n){2,}')
   result = u'\n\n'.join(u'<p>%s</p>' % p.replace(u'\r\n', u'<br/>') for p in _paragraph_re.split(value))
   if eval_ctx.autoescape:
       result = Markup(result)
   return result 
```

在如下模板中使用时：

```
{{ '1\r\n2\r\n\r\n3\r\n4\r\n\r\n5\r\n6\r\n7' | nl2br}} 
```

给我下面的输出

```
<p>1<br/>2</p>

<p>3<br/>4</p>

<p>5<br/>6<br/>7</p> 
```

# javascript - jQuery Vimeo 自动播放

> ID：12523726
> 
> 赞同：0
> 
> 时间：2012-09-21T03:10:50.093
> 
> 标签：javascript, jquery, html, vimeo

我有一个正在显示的图像和一个图像下方的 vimeo 播放器。默认情况下，vimeo 播放器是隐藏的（不显示：无；也不可见性：隐藏）。当用户单击图像时，vimeo 播放器将代替图像并现在可见。现在我的问题是如何让视频播放器在可见后自动播放。

到目前为止我的 jQuery：

```
$(document).ready(function() {

  $(".image-caption p a").click(function () {

    $('.image-block').css('display','none');
    $('.sqs-video-wrapper').css('position', 'relative');
    $('.sqs-video-wrapper').css('top', '0');

  });

}); 
```

完美运行！只需要 vimeo 播放器自动播放。当然，它默认包装在 iFrame 中。

这是我想要的快速演示：

[http://thisisdk.com/work/scrapbook](http://thisisdk.com/work/scrapbook)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T03:30:18.587

如果您在嵌入代码中将 autoplay 参数设置为 true（或 1），则当视频显示时，它应该会自动播放。

检查[这个小提琴](http://jsfiddle.net/3pgPp/)

# fortran - 是否可以在 Fortran 2003 中模拟混合的抽象/延迟和常规过程？

> ID：12523727
> 
> 赞同：4
> 
> 时间：2012-09-21T03:10:57.860
> 
> 标签：fortran, abstract-data-type

当我尝试在一种抽象类型中混合常规过程和延迟过程时，gfortran 对常规过程的任何调用都犹豫不决：“错误：(1) 处的类型绑定过程调用的基础对象是抽象类型‘tbody’”

```
 type, abstract  :: tBody
private
  ...
contains
  procedure                     :: init => new_Body
  ...
  procedure (contained), deferred   :: PointIn
end type tBody
abstract interface
  logical(LGT) pure function contained( Body, Point )
    import  :: tBody, tAffinePoint, LGT
    class(tBody), intent(IN)        :: Body
    type(tAffinePoint), intent(IN)  :: Point
  end function contained
end interface

subroutine newCuboid(  this, ... )
class(tCuboid), intent(OUT)     :: this
...

call this%tBody%init( ... )
....    [gfortran halts here]

end subroutine newCuboid 
```

有没有办法安排类型 tBody 以便我可以同时拥有抽象的延迟过程和常规的实例化过程？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T06:14:23.867

不。

有一个简单的解决方案 - 替换`call this%tBody%init(...)`为`call new_Body(...)`（您可能需要进行适当的可访问性更改）。

可能是微弱的合理化 - 您没有根据引用的类型解析过程（因为这是硬编码的），所以不要使用类型绑定过程语法。

在某些情况下，另一种解决方案是进一步拆分类型层次结构，以便抽象类型 tBody 有一个非抽象父级，它承载“非延迟”过程的初始实现。

# awk - 在 awk 中打印列

> ID：12523736
> 
> 赞同：1
> 
> 时间：2012-09-21T03:12:11.183
> 
> 标签：awk

我在 shell 脚本中使用 awk，它按预期工作。

```
awk -F'^' 'BEGIN {OFS="^"} {print $1,$2,$3,$4,$5}' 
```

当我需要更改列数时，我只需通过添加 $6,$7,$8 来更改打印语句

有没有办法在变量中声明它并在 awk 中使用该变量？

```
columns=8
awk -F'^' 'BEGIN {OFS="^"} {print $1..$columns}' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T03:23:50.390

通过定义一个函数来做到这一点。 `awk 'function col(s,e){ret="";for(i=s;i<=e;i++){ret=ret" "$i}return ret}{print col(2,6)}'`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T03:19:23.117

您可以使用 指定 shell 变量`awk -v`，然后遍历所有列：

```
awk -v cols="$columns" '{ for (i=1; i<=cols; i++) printf (i!=cols) ? $i OFS : $i"\n" }' file.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T03:16:58.507

你总是可以使用`for`-loop

```
 {for(i=1;i<=columns;i++)printf("%s ", $i);print '\n'}' 
```

using`printf`和`print`after 循环将为您提供行尾的换行符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T03:17:16.690

这可能会实现您的目标：

```
column=8
awk '{print $'$column'}' 
```

参考： [http ://www.grymoire.com/Unix/Awk.html#uh-4](http://www.grymoire.com/Unix/Awk.html#uh-4)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-21T12:32:42.973

这可能对您有用：

```
echo 1 2 3 4 5 6 7 8 9 | awk -vnf=5 '{NF=nf}1'
1 2 3 4 5 
```

# ruby-on-rails - 为 Heroku 上的用户提供 Rails 3 自定义域

> ID：12523739
> 
> 赞同：4
> 
> 时间：2012-09-21T03:13:03.773
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku

我正在寻找为用户设置自定义域。就像 Tumblr 一样。

我理解用户必须将他们的 A 记录指向一个 IP 地址。我在这里找到了一些信息：[Rails App 中的自定义域](https://stackoverflow.com/questions/3926358/custom-domains-in-a-rails-app)

有人可以给我一个 Heroku/Rails 3 设置的例子吗？甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T22:26:57.540

如果您设置通配符 DNS 指向您的主应用程序，您可以使用`:subdomain`in`config/routes.rb`来处理您的业务逻辑。

# hadoop - Hadoop 尝试 jvm 挂断

> ID：12523740
> 
> 赞同：0
> 
> 时间：2012-09-21T03:13:04.843
> 
> 标签：hadoop, jvm, freeze

Hadoop 0.20.2

有几个job需要一个一个执行，有些尝试job的JVM是杀不掉的。日志如下。**如果您看到“ JVM Not kill jvm_201208192339_6873_m_1286217329 but just removed** ” ，tasktracker 似乎找不到 JVMId 。我看过源代码。但是我找不到tasktracker找不到JVMId的原因。顺便说一句，tasktraker有13个，只有新的3个有这个问题，是我忘了配置什么吗？有人帮我找出原因吗？谢谢。^O^

> 2012-09-20 13:52:56,655 信息 org.apache.hadoop.mapred.TaskTracker：收到任务的 KillTask​​Action：尝试_201208192339_6873_m_004334_0
> 
> 2012-09-20 13:52:56,655 INFO org.apache.hadoop.mapred.TaskTracker：即将清除任务：attempt_201208192339_6873_m_004334_0
> 
> 2012-09-20 13:52:56,655 信息 org.apache.hadoop.mapred.JvmManager： **JVM 未杀死 jvm_201208192339_6873_m_1286217329 但刚刚删除**
> 
> 2012-09-20 13:52:56,655 信息 org.apache.hadoop.mapred.TaskTracker：addFreeSlot：当前空闲插槽：8
> 
> 2012-09-20 13:52:56,655 信息 org.apache.hadoop.mapred.IndexCache：在缓存中找不到地图 ID 尝试_201208192339_6873_m_004334_0
> 
> 2012-09-20 13:52:56,962 INFO org.apache.hadoop.mapred.TaskTracker：LaunchTaskAction（registerTask）：attempt_201208192339_6873_m_004334_0 任务状态：KILLED_UNCLEAN
> 
> 2012-09-20 13:52:56,962 INFO org.apache.hadoop.mapred.TaskTracker：尝试启动：尝试_201208192339_6873_m_004334_0，需要 1 个插槽
> 
> 2012-09-20 13:52:56,962 INFO org.apache.hadoop.mapred.TaskTracker：在 TaskLauncher 中，当前可用插槽：8 并尝试启动需要 1 个插槽的尝试_201208192339_6873_m_004334_0
> 
> 2012-09-20 13:52:56,968 INFO org.apache.hadoop.mapred.JvmManager：在 JvmRunner 中构造的 JVM ID：jvm_201208192339_6873_m_677724590
> 
> 2012-09-20 13:52:56,968 INFO org.apache.hadoop.mapred.JvmManager：JVM Runner jvm_201208192339_6873_m_677724590 产生。
> 
> 2012-09-20 13:52:56,974 INFO org.apache.hadoop.mapred.TaskController：将命令写入 /disk10/hdfs/mapred/local/ttprivate/taskTracker/root/jobcache/job_201208192339_6873/attempt_201208192339_6873_m_004334_0.cleanup/taskTracker/
> 
> 2012-09-20 13:52:58,017 INFO org.apache.hadoop.mapred.TaskTracker: JVM，ID：jvm_201208192339_6873_m_677724590 给定任务：attempt_201208192339_6873_m_004334_0
> 
> 2012-09-20 13:52:58,557 信息 org.apache.hadoop.mapred.TaskTracker：尝试_201208192339_6873_m_004334_0 0.0%
> 
> 2012-09-20 13:52:58,564 信息 org.apache.hadoop.mapred.TaskTracker：尝试_201208192339_6873_m_004334_0 0.0% 清理
> 
> 2012-09-20 13:52:58,566 INFO org.apache.hadoop.mapred.TaskTracker：任务尝试_201208192339_6873_m_004334_0 已完成。
> 
> 2012-09-20 13:52:58,566 INFO org.apache.hadoop.mapred.TaskTracker：报告的尝试_201208192339_6873_m_004334_0 的输出大小为 -1
> 
> 2012-09-20 13:52:58,566 信息 org.apache.hadoop.mapred.TaskTracker：addFreeSlot：当前空闲插槽：8

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:03:35.033

最终，有这个问题的那个节点还有另一个问题是它的操作系统与硬件不匹配。在新的操作系统中运行一段时间后，这个问题没有再次出现。旧操作系统在网络中表现不佳。它会降低网络带宽。

# javascript - 处理程序栏 js 中的链助手或过滤数据

> ID：12523741
> 
> 赞同：3
> 
> 时间：2012-09-21T03:13:13.673
> 
> 标签：javascript, handlebars.js

假设我想打印列表的前 3 项。所以我想先`splice`列出列表，然后再`each`遍历元素。使用 执行此操作的最佳方法是什么`handlebars.js`？

最直观的做法是，`{{#each my_list|splice[0,3]}}`或`{{#each splice my_list 0 3 }}`但车把不支持此类操作。

我怎样才能想出一个链接其他助手的助手（知道任何阶段的任何助手都可能需要额外的参数）？

注意：我不想将此逻辑移到其他地方。让我们假设我肯定想要在我的模板中使用这个逻辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T19:39:00.170

您可以添加自己的助手：

```
Handlebars.registerHelper('spliced_each', function(a, from, to, block) {
    var s = '';
    for(var i = from; i < to; ++i)
        s += block(a[i]);
    return s;
}); 
```

然后你的模板可以说：

```
{{#spliced_each my_list "2" "5"}}
    ...
{{/spliced_each}} 
```

演示：http: [//jsfiddle.net/ambiguous/Zrd42/](http://jsfiddle.net/ambiguous/Zrd42/)

Handlebars 故意简单，自定义帮助器是您向模板添加特殊逻辑的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-23T01:24:39.753

我一直在对此进行一些研究，似乎没有在 Handlebars 中调用链式函数的本机可能性。不过，作为该工具的扩展似乎很有趣。

您可以创建一个 Handlebars 帮助函数，让您链接函数。使用这个新助手，您可以组合任何类型的把手助手或您自己的助手，将函数的每个结果用作下一个函数的参数。

查看 Handlebars 回购问题： [Handlebars 回购](https://github.com/wycats/handlebars.js/issues/304#issuecomment-15635762)

还有一组不错的 Handlebars 助手，不适合您在这里想要做的事情，但可能会帮助您进行一些其他操作[Handlebars Helpers](https://github.com/assemble/handlebars-helpers)

# ruby-on-rails - Postgres 无法连接到服务器

> ID：12523743
> 
> 赞同：1
> 
> 时间：2012-09-21T03:13:22.557
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, rake

为什么 Postgres 没有在我刚开始的新应用程序上工作，这让我感到非常困惑。我已经让它适用于一个应用程序。我正在使用 postgres.app，它正在运行。

我开始了一个新的应用程序

```
rails new depot -d postgresql 
```

然后我进入 database.yml 文件并将用户名更改为我的 $USER （这是另一个正在运行的应用程序的内容）。所以现在我的 database.yml 文件有这个开发部分：

```
development:
  adapter: postgresql
  encoding: unicode
  database: depot_development
  pool: 5
  username: <username>
  password: 
```

但是当我运行“rake db:create”或“rake db:create:all”时，我仍然得到这个错误（完全，因为我不知道什么是相关的）：

```
Couldn't create database for {"adapter"=>"postgresql", "encoding"=>"unicode", "database"=>"depot_development", "pool"=>5, "username"=>"<username>", "password"=>nil}
could not connect to server: Permission denied
    Is the server running locally and accepting
    connections on Unix domain socket "/var/pgsql_socket/.s.PGSQL.5432"?
/Users/<username>/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/connection_adapters/postgresql_adapter.rb:1213:in `initialize'
/Users/<username>/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/connection_adapters/postgresql_adapter.rb:1213:in `new'
/Users/<username>/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/connection_adapters/postgresql_adapter.rb:1213:in `connect'
/Users/<username>/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/connection_adapters/postgresql_adapter.rb:329:in `initialize'
/Users/<username>/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/connection_adapters/postgresql_adapter.rb:28:in `new'
/Users/<username>/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/connection_adapters/postgresql_adapter.rb:28:in `postgresql_connection'
/Users/<username>/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:309:in `new_connection'
/Users/<username>/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:319:in `checkout_new_connection'
/Users/<username>/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:241:in `block (2 levels) in checkout'
/Users/<username>/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:236:in `loop'
/Users/<username>/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:236:in `block in checkout'
/Users/<username>/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/<username>/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:233:in `checkout'
/Users/<username>/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:96:in `block in connection'
/Users/<username>/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/<username>/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:95:in `connection'
/Users/<username>/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:404:in `retrieve_connection'
/Users/<username>/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_specification.rb:170:in `retrieve_connection'
/Users/<username>/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_specification.rb:144:in `connection'
/Users/<username>/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/railties/databases.rake:107:in `rescue in create_database'
/Users/<username>/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/railties/databases.rake:51:in `create_database'
/Users/<username>/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/railties/databases.rake:40:in `block (3 levels) in <top (required)>'
/Users/<username>/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/railties/databases.rake:40:in `each'
/Users/<username>/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/railties/databases.rake:40:in `block (2 levels) in <top (required)>'
/Users/<username>/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/Users/<username>/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/Users/<username>/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/Users/<username>/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/Users/<username>/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/Users/<username>/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/<username>/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/Users/<username>/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/Users/<username>/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/Users/<username>/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/Users/<username>/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/Users/<username>/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/Users/<username>/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Users/<username>/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/Users/<username>/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/Users/<username>/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Users/<username>/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/Users/<username>/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/Users/<username>/.rvm/gems/ruby-1.9.3-p194@global/bin/rake:19:in `load'
/Users/<username>/.rvm/gems/ruby-1.9.3-p194@global/bin/rake:19:in `<main>'
/Users/<username>/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `eval'
/Users/<username>/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `<main>'
Couldn't create database for {"adapter"=>"postgresql", "encoding"=>"unicode", "database"=>"depot_test", "pool"=>5, "username"=>"<username>", "password"=>nil} 
```

我试过了

```
createdb depot_development 
```

我尝试进入 psql 环境并列出用户（其中​​包括我的用户名）。在同一个psql环境下，我试过了

```
CREATE DATABASE depot; 
```

I've made sure that the pg gem is installed with bundle install, I've run "pg_ctl start", to which I got this response:

```
pg_ctl: no database directory specified and environment variable PGDATA unset 
```

I ran "ps aux | grep postgres" to make sure postgres was running, to which I got this in return (which looks like it's doing OK, right?):

```
<username>    10390   0.4  0.0  2425480    180 s000  R+    6:15PM   0:00.00 grep postgres
<username>     2907   0.0  0.0  2441604    464   ??  Ss    6:17PM   0:02.31 postgres: stats collector process      
<username>     2906   0.0  0.0  2445520   1664   ??  Ss    6:17PM   0:02.33 postgres: autovacuum launcher process      
<username>     2905   0.0  0.0  2445388    600   ??  Ss    6:17PM   0:09.25 postgres: wal writer process      
<username>     2904   0.0  0.0  2445388   1252   ??  Ss    6:17PM   0:12.08 postgres: writer process      
<username>     2902   0.0  0.0  2445388   3688   ??  S     6:17PM   0:00.54 /Applications/Postgres.app/Contents/MacOS/bin/postgres -D /Users/<username>/Library/Application Support/Postgres/var -p5432 
```

The short of it, is I've been troubleshooting for a WHILE and have NO idea what's wrong. Any ideas? I'd really appreciate it, cause I'm pretty new to Rails, and this is a pretty disheartening roadblock.

Thanks!

EDIT -- Per request, posting the successful database.yml . It seems the difference is the inclusion of a password:

```
development:
  adapter: postgresql
  encoding: unicode
  database: *******_development
  pool: 5
  username: *******
  password: ******* 
```

EDIT2 -- When I add a password to the .yml file, then run rake db:create again, I get the same error. And I'm running Mac OSX Lion, and I did initdb and stuff when I first installed PostgreSQL.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T03:34:45.690

**In order to create a database , before starting the command pg_ctl start**

*   you have to initialize the database cluster then only pg_ctl start shall be success full*

this can be done in many ways if you are running on Linux / centos with postgres 9.1

> service postgresql-9.1 initdb

```
service  postgresql-9.1 start 
```

or you can do like this

```
$ mkdir -p /var/pgsql/data; chown -R postgres /var/pgsql
$ su - postgres
$ initdb -D /var/pgsql/data

# Starting, testing:

$ postgres -D /var/pgsql/data > /var/pgsql/logfile 2>&1 &
$ createdb test
$ psql test 
```

Initializing postgres **initb** differes from os to os and postgres versions , if the above command did not work please have a look at

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-30T22:48:22.350

Adding

```
host: localhost 
```

to development works for me.

# mysql - MySQL - 根据另一个字段的一部分填充一个字段

> ID：12523749
> 
> 赞同：1
> 
> 时间：2012-09-21T03:14:23.033
> 
> 标签：mysql, search, text

我有一张表，其中一个名为 Description 的列包含各种信息，所有信息都挤在一起。该信息的一部分是汽车制造商的缩写。例如，描述列可以读取`"6cylM.Benz32zy,.026L"`

我想用 Mercedes Benz 填充一个新的 Vehicle 列，只要该`Description`列在内部某处包含 M.Benz。那里的关键词是“某处”；缩写的车辆名称可以在描述字段中的任何位置。

到目前为止，我有以下代码。但是，MySQL 告诉我它找不到 %M.Benz% 列。我不是要查找名为 %M.Benz% 的列，而是要查找 %M.Benz% 的 TEXT。

```
UPDATE tbl_arcore_repuestos
   SET Vehicle = `Mercedes Benz` 
 WHERE Description LIKE `%M.Benz%`; 
```

有任何想法吗？StackOverflow 上针对类似问题的大多数其他解决方案都依赖于位于固定位置的广受欢迎的文本（例如在字符串的开头或由一致的字符分隔）。我要查找的文本可能在`Description`列中的任何位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T03:17:00.980

您是否错过了引号或使用反引号而不是引号？

```
UPDATE tbl_arcore_repuestos SET Vehicle = 'Mercedes Benz' WHERE Description LIKE '%M.Benz%'; 
```

# c++ - 在 qt c++ 中使用paintevent的循环中休眠

> ID：12523753
> 
> 赞同：1
> 
> 时间：2012-09-21T03:15:06.320
> 
> 标签：c++, qt, loops, sleep, paintevent

基本上我想做的是为列表中的每个数字绘制矩形。数字越大，矩形越大。我的问题是当我真正想做的时候，一步一步地，在每张画之间等待几秒钟。我已经寻找了一些解决方案，但我无法让它们适用于这种特殊情况。我看到我可以使用 fflush 来释放缓冲区中的任何内容，但我不知道如何使用它。

```
QPainter painter(this);
painter.setRenderHint(QPainter::Antialiasing, true);
painter.setBrush(QBrush(Qt::green, Qt::SolidPattern));
int weight=300/lista.size;
int posx=weight;
for (int i=1; i<=lista.size; i++){
        List_node * node = list.get_element_at(i);
            int num=node->getValue(); //this returns the value of the node
        if (i==3){
                painter.setBrush(QBrush(Qt::red, Qt::SolidPattern)); // this line is to draw a rectangle with a different color. Testing purposes.
         }
        painter.drawRect(posx,400-(num*10),weight,num*10);
        sleep(1); //this sleep isn't working correctly.
        painter.setBrush(QBrush(Qt::green, Qt::SolidPattern));
        posx+=weight;
 } 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T04:13:32.687

sleep() 对此不起作用——它会阻止 Qt 事件循环并阻止 Qt 在睡眠时完成其工作。

您需要做的是保留一个或多个成员变量来记住要绘制的图像的当前状态，并实现paintEvent() 以仅绘制当前的单个图像。paintEvent() （就像在 Qt 的 GUI 线程中运行的每个函数一样）应该总是立即返回，并且永远不会休眠或阻塞。

然后，为了实现动画部分，设置一个 QTimer 对象以定期为您调用一个槽（例如，每 1000 毫秒一次，或者您喜欢的频率）。实现该插槽以将您的成员变量调整为动画序列中的下一个状态（例如 rectangle_size++ 或其他），然后在您的小部件上调用 update() 。update() 将告诉 Qt 尽快在您的小部件上再次调用 paintEvent()，因此您的显示将在您的 slot 方法返回后很快更新到下一帧。

以下是该技术的一个简单示例；运行时，它显示一个红色矩形越来越大：

```
// begin demo.h
#include <QWidget>
#include <QTimer>

class DemoObj : public QWidget
{
Q_OBJECT

public:
   DemoObj();

   virtual void paintEvent(QPaintEvent * e);

public slots:
   void AdvanceState();

private:
   QTimer _timer;
   int _rectSize;
   int _growthDirection;
};

// begin demo.cpp
#include <QApplication>
#include <QPainter>
#include "demo.h"

DemoObj :: DemoObj() : _rectSize(10), _growthDirection(1)
{
   connect(&_timer, SIGNAL(timeout()), this, SLOT(AdvanceState()));
   _timer.start(100);   // 100 milliseconds delay per frame.  You might want to put 2000 here instead
}

void DemoObj :: paintEvent(QPaintEvent * e)
{
   QPainter p(this);
   p.fillRect(rect(), Qt::white);
   QRect r((width()/2)-_rectSize, (height()/2)-_rectSize, (_rectSize*2), (_rectSize*2));
   p.fillRect(r, Qt::red);
}

void DemoObj :: AdvanceState()
{
   _rectSize += _growthDirection;
   if (_rectSize > 50) _growthDirection = -1;
   if (_rectSize < 10) _growthDirection = 1;
   update();
}

int main(int argc, char ** argv)
{
   QApplication app(argc, argv);

   DemoObj obj;
   obj.resize(150, 150);
   obj.show();
   return app.exec();
} 
```

# c++ - 可变参数模板推演错误

> ID：12523754
> 
> 赞同：1
> 
> 时间：2012-09-21T03:15:09.873
> 
> 标签：c++, templates, c++11

我用c++0x variadic templates写了一个简单的日志函数，但是有模板推导错误，谁能帮帮我，谢谢！

```
#ifndef SLOG_H
#define SLOG_H

enum LOGLEVEL{INFO, DEBUG, ERROR};
/* static */ const char* g_loglevel[] = {"INFO", "DEBUG", "ERROR"};

template <class T>
void slog_(const T& v) {
    std::cout << v;
}

template <class T, class... Args>
void slog_(const T& v, const Args&... args) {
    std::cout << v;
    slog_(args...);
}

template <class T, class... Args>
void slog(LOGLEVEL level, const Args&... args) {
    time_t t;
    struct tm tm;
    char buf[32];

    time(&t);
    localtime_r(&t, &tm);

    strftime(buf, sizeof(buf), "%F %T", &tm);
    std::cout << "[" << g_loglevel[level] << "][" << buf << "] ";

    slog_(args...);
}

#endif 
```

在调用函数中：

```
slog(INFO, "hello, number ", n, ", next is ", n + 1); 
```

然后编译错误：

```
main.cpp:6:53: error: no matching function for call to 'slog(LOGLEVEL, const char [15], int&, const char [11], int)'
main.cpp:6:53: note: candidate is:
In file included from main.cpp:2:0:
slog.h:19:6: note: template<class T, class ... Args> void slog(LOGLEVEL, const Args& ...)
slog.h:19:6: note:   template argument deduction/substitution failed:
main.cpp:6:53: note:   couldn't deduce template parameter 'T' 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T03:21:14.383

更改`template <class T, class... Args>`为`template <class... Args>`for `slog`。正如错误消息所说：`couldn't deduce template parameter 'T'`因为您从不将其用作函数参数。

# assembly - 需要帮助制作一个简单的汇编语言程序

> ID：12523763
> 
> 赞同：3
> 
> 时间：2012-09-21T03:15:55.743
> 
> 标签：assembly, computer-science, machine-language

发布前的编辑：所以我几乎是在我把整个该死的问题都打出来并整齐排列之后才自己想出来的。为了不白费，我还是发布了这个，询问这是否真的正确，并征求任何建议/意见。我仍然不确定一件事。

好吧，所以我完全是计算机科学的菜鸟。现在我正在学习汇编语言和机器语言编程。这是一个家庭作业问题，所以请帮助我理解，不要在我脸上扔答案。我正在尝试编写一个程序，使用条件分支（循环）获取从 1 到 20（答案是 210）的数字之和。

使用的助记符有：

```
L  for load  
A  for Add  
St for store  
BC for branch on condition  
C  for compare
CH for channel 
```

有 10 个寄存器可以放入东西。

所以基本上我必须做两件事： 1) 想办法把从 1 到 20 (1+2+3+4+5+6+7+8+9+...+20) 的所有数字加起来包括制作一个循环，以及 2）创建一个计数器，以便它知道在达到 20 时停止。这是正确的吗？？

```
START    L  R1,COUNT
         A  R1,ONE
         ST R1,COUNT
         A  R2,COUNT
         C  R1,TWENTY
         BC  3,???
         ST R2,SUM
         CH SUM
         STOP
COUNT    DC F'0'
ONE      DC F'1'
TWENTY   DC F'20'
         END START 
```

这一切都在说：用 COUNT 的内容加载 Register1（以 0 开头）。添加 ONE 的 Register1 内容（即 1）。将 Register1 中的这个新数字存储到 COUNT 中。将此新号码添加到 Register2。将 COUNT 的内容与 TWENTY 的内容（即 20）进行比较。如果 COUNT 内的数字小于或等于 20（3 是条件代码），则分支 (/repeat)。一旦计数器达到 20，条件将被打破，指令将转到下一行：将 Register2 中的数字（现在应该是 210）存储到变量 SUM 中。然后调用 CHannel 在 I/O 设备上显示 SUM 的内容。然后停止。

现在...我不知道如何指定分支/返回到开头，因此它重复该过程直到计数器达到 20。我也不确定是否应该将 COUNT 指定为 0。

感谢您的任何/所有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T03:43:01.333

我看到的几件事。由于我没有测试过这个，我建议你自己测试一下。

您需要初始化寄存器 2，以便在添加 Count 的值时，寄存器 2 以已知值开始。

通常，条件分支要求您指定条件以及在满足条件时要分支到的标签。不确定您的汇编程序对此有何要求。

所以我会考虑以下变化。我使用两个类似于 C 的斜杠在每一行上添加了注释。我假设 Branch on Condition 指令有两个操作数，一个指示要测试的标志的条件操作数和一个汇编程序计算到标签的偏移量。我假设 AD 指令将设置 BC 指令可以测试的条件标志。我为条件标志设置了一个 3 来测试 BC 指令，但是我不确定操作数实际上应该是什么，所以我在该行上添加了注释。

如果您的汇编器允许添加两个寄存器并且有一个允许将寄存器作为操作数的 XOR 指令，您可以通过对自身进行 XOR Register2 和 Register1 对自身进行 XOR 来取消变量 COUNT 以将它们归零，然后使用 ADD两个寄存器。XOR 起作用是因为一位与一位异或变成零，而零与零异或保持零。

条件分支 BC 指令可能允许也可能不允许向后分支。如果它没有或者如果它有某种约束，您可能必须使用跳转或 JMP 指令以在跳转之前使用 BC 指令返回循环顶部以在 JMP 上跳转一次计数达到 20。

```
START    L  R2,COUNT    // initialize Register 2 to zero as Count starts with zero
         L  R1,COUNT    // initialize Register 1 to zero as Count starts with zero
LOOP     A  R1,ONE      // add one as part of incrementing Count for the next sequence
         ST R1,COUNT    // save current Count back.
         A  R2,COUNT    // add the current value of Count into Register 2 for the sum
         C  R1,TWENTY   // compare Register 1, Count, to end of loop condition
         BC 3,LOOP      // branch if less than back to loop.  if 20 we are done.
         ST R2,SUM
         CH SUM
         STOP
COUNT    DC F'0'
ONE      DC F'1'
TWENTY   DC F'20'
SUM      DC F'0'
         END START 
```

# c# - 如何将多个用户名或密码从文本文件显示到 textBox1 或 textBox2 c#/.net

> ID：12523766
> 
> 赞同：0
> 
> 时间：2012-09-21T03:16:13.210
> 
> 标签：c#, .net, login, import, io

我已经使用 c# Windows 表单创建了一个登录表单，并且我通过提交登录表单将用户名或密码保存到文本文件中。

但我想要的是：- 当我点击我的文本框时，它应该显示我保存的所有保存的用户名或密码（用户名或密码），这样我就不必再次插入相同的用户名或密码。

我想要的是这样的： http: [//i49.tinypic.com/rkuats.jpg](http://i49.tinypic.com/rkuats.jpg)和[http://i46.tinypic.com/21edys1.jpg](http://i46.tinypic.com/21edys1.jpg)

这是我的代码：

```
 private void button1_Click(object sender, EventArgs e)
    {
        try
        {
            FileStream fs = new FileStream("data.txt", FileMode.Append,
            FileAccess.Write);
            StreamWriter sw = new StreamWriter(fs);
            sw.Write("Email ID: ");
            sw.WriteLine(textBox1.Text);
            sw.Write("Password: ");
            sw.Write(textBox2.Text);
            sw.WriteLine();
            sw.WriteLine();
            sw.Flush();
            sw.Close();
            fs.Close();
        }
        catch (Exception)
        {
            MessageBox.Show("Error", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            this.Close();
        }
            MessageBox.Show("Login Complited", "Done", MessageBoxButtons.OK, MessageBoxIcon.Information);
            textBox1.Clear();
            textBox2.Clear();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T03:33:11.417

听起来你想要的是自动完成。查看C Sharp Corner 上的[此链接](http://www.c-sharpcorner.com/UploadFile/mahesh/AutoCompletion02012006113508AM/AutoCompletion.aspx)，了解如何启用自动完成

# apache2 - 使用两个目录和别名

> ID：12523768
> 
> 赞同：1
> 
> 时间：2012-09-21T03:16:46.787
> 
> 标签：apache2

在 httpd.conf apache 中使用两个目录和别名是否合法，如下所示？

```
<Directory "C:/Projects/DCS/">
    AllowOverride None
    Options None
    Order allow,deny
    Allow from all
</Directory>

Alias /dcs/ C:/Projects/DCS/

<Directory "C:/Projects/DCS_NEW/">
    AllowOverride None
    Options None
    Order allow,deny
    Allow from all
</Directory>

Alias /dcs_new/ C:/Projects/DCS_NEW/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T03:18:00.150

当然，为什么不呢？只要您没有分配多个具有相同 URL 路径的别名，就可以了。“相同的 URL 路径”是指第一个参数，例如：

```
Alias /foo C:/some/path
Alias /foo C:/some/other/path 
```

# sharepoint - SharePoint 2010：网站安全

> ID：12523769
> 
> 赞同：0
> 
> 时间：2012-09-21T03:16:47.987
> 
> 标签：sharepoint, sharepoint-2010

我有网站集 (http://myapp/sites/sitcol)，我在该网站集中有两个站点，即根站点 (http://myapp/sites/sitcol/) 和 site2 (http://myapp/sites/情景/现场2）。我有两个安全组，我想设置安全性，以便 group1 在站点上具有贡献者权限，而 group2 对站点 2 具有贡献者权限。重要提示：当 group1 中的用户访问“http://myapp/sites/sitcol”url 时，它应该转到 site1，当 group2 中的用户访问“http://myapp/sites/sitcol”url 时，它应该转到 site2。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:54:07.737

You will need a redirect web part. When the user hits the top level site(site 1) check what groups they are in. Simple if statement and then response.redirect to the appropriate site if they have contribute access to site two and NOT to site one.

However this has implications.

1) they will never be able to see site 1 as a whole as the redirect will always take them to site two.THis is easily negated by adding the user to the Site 1 contributor group. 2)(I think, you will need to test) you will need to at least grant everyone visitor rights to site 1 but if someone sends a link of a list on site 1 they will still be able to see the list but won't be able to do anything but read.

I hope this helps

# wxpython - python (wxPython) 需要关于自己和父母的信息

> ID：12523772
> 
> 赞同：0
> 
> 时间：2012-09-21T03:16:58.183
> 
> 标签：wxpython, python-2.7

这可能是一个愚蠢的问题，但我在 docs.python.org 和 wx.python.org 上查看的所有文档都表明，对象的大多数 init 函数都采用以下形式： **init**（self、parent 等， ETC）

而且大多数对这些函数的调用都不会为自身或父级传递值。

所以：

1.  如果没有传递任何值，这些值来自哪里，以及
2.  我如何从类范围之外定义的函数中引用它们？

示例文件 1（PseudoClass.py）：

```
class PseudoClass(someValidClass):
    def __init__(self, parent, title):
        someValidClass.__init__(self, parent, title) 
```

在另一个文件中：

```
import PseudoClass
instance = PsedoClass('My Title')
def someFunction(instance):
    (x,y) = <<something which returns the self and parent values>> 
```

***总是***使用它是否***安全***，我如何获得自我的指针？*`instance.parent`*

 *编辑：由于某种原因，代码块第一次没有工作..grr ..

编辑：好的，尽管我对如何提出这个问题深思熟虑，但我在提出问题和现在之间所做的研究表明，这个问题不适合我想知道的问题。另一方面，nneonneo 确实（至少部分地）回答了这里的问题。为了避免浪费其他人的时间来审查这个，我将其标记为已解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:01:49.407

请注意，在 Python 中，是（对于典型的方法调用）`self`左侧的对象，即实际调用. 因此，您始终可以通过仅使用实例本身来引用类*外部。*`.``foo.func(a,b)``FooClass.func(foo, a, b)``self`

 *`parent`是一个不同的故事......AFAIK，它应该始终作为第一个参数传递给 wxPython 构造函数（除非派生类更改了该行为）。因此，这似乎不太`PseudoClass('My Title')`可能奏效。**

# c++ - 释放函数 B 内的函数 A 运行时内存

> ID：12523776
> 
> 赞同：0
> 
> 时间：2012-09-21T03:17:30.233
> 
> 标签：c++, pointers, memory-management, stl, heap-memory

```
#ifndef UNICODE
#define UNICODE
#endif

#include <iostream>
#include <Windows.h>
#include <queue>

using namespace std;

void addSomeContent(queue<TCHAR*> &s)
{
    static int counter=0;
    TCHAR* buffer = new TCHAR[250]; //Allocate memory on heap

    wsprintf(buffer,TEXT("foo%d"),counter);

    s.push(buffer);
    counter++;

    if(counter < 10)
    addSomeContent(s);

}

int main (void)
{
    queue<TCHAR*> strings; 

    addSomeContent(strings);

    while(!strings.empty()) 
    {   
        wcout<<strings.front()<<endl;
        strings.pop();
    }

    //Here I want to destroy the "buffer" from the function "addSomeContent"
    wcout<<TEXT("Memory has been cleaned!\n");

    system("pause");
    return (0);
} 
```

如果我在函数末尾删除了宽字符数组，我就无法处理引用它的队列。现在，我的简单程序可以编译并且工作正常，但显然在堆中保留垃圾并不被认为是一种安全的编程实践。
上次使用后如何删除“缓冲区”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T13:17:21.713

您可以使用 a来完全避免内存释放，或者您可以简单地释放内存，然后再将其从类似`queue<unique_ptr<TCHAR[]>>`中删除：`queue`

```
delete[] strings.front();
strings.pop(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T04:55:06.183

同意 Seth 为您的队列使用 unique_ptr，或者您可以简单地调用

```
 delete[] strings.front() 
```

之前`strings.pop()`

`front()`应该用来确保我们清理我们将要清理的元素，`pop()`即队列中最旧的元素，而不是`back()`最新的元素！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T04:57:32.503

如果您只想使用字符串，我会考虑使用

```
typedef std::basic_string<TCHAR> tstring;
std::queue<tstring> strings; 
```

否则你可以使用

```
std::queue<std::unique_ptr<TCHAR[]>> strings; // notice the [], they are important! 
```

unique_ptr 是 C++11，但我认为所有主要编译器都支持它。我什至不会考虑手动删除[]。它很容易出错，而且不是异常安全的。

# mediaelement - 在 windows 商店应用程序中播放实时流媒体源时 MediaElement.Stop 不起作用

> ID：12523777
> 
> 赞同：3
> 
> 时间：2012-09-21T03:17:37.537
> 
> 标签：mediaelement, live-streaming, windows-store, windows-store-apps

我想让 Windows 应用商店应用播放直播源。源播放正常，但一旦开始播放，我就无法停止播放。当我在 Windows.UI.Xaml.Controls.MediaElement 的实例上调用 Stop() 时，什么也没有发生。

下面是我的代码：

```
public MainPage(){
    this.InitializeComponent();
    this.mediaplayer.AutoPlay = true;
    this.mediaplayer.Source = new Uri("mms://somedomain/mylive");
}
...
void StopButton_Click(object sender, RoutedEventArgs e)
{
    //I can reach here when I set a breakpoint
    this.mediaplayer.Stop();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T14:26:06.427

我刚刚遇到了同样的问题......并且能够通过调用来解决它`MediaElement.Pause()`。

# javascript - 如何使用 HTML/Javascript 替换 Windows 8 应用程序的 appbar 中的按钮？

> ID：12523780
> 
> 赞同：2
> 
> 时间：2012-09-21T03:18:00.903
> 
> 标签：javascript, windows-8, windows-runtime

我是使用 HTML/Javascript 开发 Windows 8 应用程序的新手。

我想动态地在 appbar 中创建/删除按钮。

例如，我在 html 中有以下 appbar div。

```
<div id="appbar" data-win-control="WinJS.UI.AppBar" data-win-options="{placement: 'top'}">
    <button id="button" data-win-control="WinJS.UI.AppBarCommand" 
        data-win-options="{id:'button', label:'Button', icon:'add'}" type="button">
    </button>
</div> 
```

我想替换一些动作触发的按钮，所以我所做的是在js中替换appbar div的innerHTML如下，但我得到的是appbar中一个奇怪的空白方块。

```
var appbar = document.getElementById("appbar");
var html = "<button data-win-control=\"WinJS.UI.AppBarCommand\" data-win-options=\"{id:'button', label:'Another Button', icon:'add'}\" type=\"button\"></button>";
appbar.innerHTML = html; 
```

任何帮助表示赞赏。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T04:12:05.027

应用栏的建议是提前定义所有命令并使用[`hideCommands`](http://msdn.microsoft.com/en-us/library/windows/apps/Hh700551.aspx)/[`showCommands`](http://msdn.microsoft.com/en-us/library/windows/apps/hh700570.aspx)来显示和隐藏应用栏本身的命令。

但是，如果您确实想自己动态创建命令，您只需要在代码中再添加一个步骤：

```
WinJS.UI.process(elementThatYouJustCreated); 
```

这将创建 win 控件，并完成获取该控件设置的所有工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T03:53:30.813

您应该考虑使用[AppBarCommand](http://msdn.microsoft.com/library/windows/apps/Hh700497)对象上的属性，而不是使用原始 HTML 设置值。

```
var cmd = document.getElementById('button'); 
cmd.winControl.icon = 'add'; 
cmd.winControl.label = 'Another Button'; 
```

MSDN 上的 AppBar 控件示例深入展示了这一点：http: [//code.msdn.microsoft.com/windowsapps/App-bar-sample-a57eeae9/](http://code.msdn.microsoft.com/windowsapps/App-bar-sample-a57eeae9/)

# c++ - 开放式简历；C++; 从线性三角剖分法的矩阵中提取点云点（x，y，z）

> ID：12523781
> 
> 赞同：3
> 
> 时间：2012-09-21T03:18:18.563
> 
> 标签：c++, visual-c++, opencv, 3d-reconstruction

我正在尝试在 xna 中重建 3D 对象。我需要点云点。我在未校准的图像序列下实现了这个概念，用于 3d 重建。我现在坚持使用线性三角测量。结果，我对矩阵有价值。我下一步要获取（x，y，z）点列表以绘制网格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:32:38.507

查看 的[文档](http://docs.opencv.org/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html#void%20triangulatePoints%28InputArray%20projMatr1,%20InputArray%20projMatr2,%20InputArray%20projPoints1,%20InputArray%20projPoints2,%20OutputArray%20points4D%29)，`triangulatePoints`它返回一个矩阵，其中包含每个三角化 3D 点的齐次坐标，即`4 x N`矩阵。

将此矩阵表示为，第*n*个点`M`的 XYZ 坐标为（概念上）

 *```
x = M(0,n) / M(3,n)
y = M(1,n) / M(3,n)
z = M(2,n) / M(3,n) 
```

请确保您在远程考虑使用 3D 重建做任何事情之前了解[齐次坐标！](http://en.wikipedia.org/wiki/Homogeneous_coordinates)*

# java - 设置 Android ActionBar 主页/向上按钮

> ID：12523783
> 
> 赞同：0
> 
> 时间：2012-09-21T03:18:49.597
> 
> 标签：java, android, android-actionbar, actionbarsherlock

我想在我的一个活动操作栏上放一个主页按钮。

这是有道理的... [Android Sherlock ActionBar 向上按钮](https://stackoverflow.com/questions/11996664/android-sherlock-actionbar-up-button)

但这更有意义：

```
<activity android:name="ItemOne" android:parentActivityName="Dashboard"></activity> 
```

为什么活动允许您设置 parentActivityName。那不应该为我启用向上按钮吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T06:55:34.210

在 Jelly Bean 中添加了 parentActivityName，ActionBarSherlock 基于 Ice Cream Sandwich。不支持该属性。

# jquery - Jquery UI 对话框在自动打开时为空

> ID：12523786
> 
> 赞同：0
> 
> 时间：2012-09-21T03:19:21.080
> 
> 标签：jquery, jquery-ui

我的 jquery 对话框出现了一些奇怪的错误。

当我让它自动打开时，对话框是完全空的。如果我退出对话框然后重新打开（通过标准对话框打开事件），则会出现内容。

jquery设置：

```
$("#content_locker").dialog({
autoOpen: true,
modal: true,
height: 600,
width: 800
}); 
```

[在这里你可以看到我正在处理的网页](http://clfls.com/?9)（它是一个链接缩短服务）。

对话框 div 从源代码的第 148 行开始：

```
<div id="content_locker" title="Exclusive Content"> 
```

你会看到对话框是空的。如果您退出并单击解锁按钮，则正确的 html 就在那里。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T03:22:59.373

这取决于顺序。如果使用`autoOpen`，则应先填充 html 内容，然后再初始化对话框。（`autoOpen`意味着一旦你初始化了对话框，它就会打开。）

```
$("#content_locker").html(the_html_content).dialog({
  autoOpen: true,
  modal: true,
  height: 600,
  width: 800
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T03:34:29.537

由于您的 css 上有以下代码，模态的内容在开头隐藏：

```
#content_locker{
    visibility: hidden;
} 
```

尝试将其更改为：

```
#content_locker{
    diaplay: none;
} 
```

它应该可以解决问题；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T03:21:37.683

当您尝试显示对话框时，似乎 HTML 尚不可用。您是否在 DOM 就绪事件中指定了它..

试试这个

```
 $(function() {
    $("#content_locker").dialog({
       autoOpen: true,
       modal: true,
       height: 600,
       width: 800
    });
  }); 
```

// 如果这不起作用，请尝试显式显示它 // 通过

```
 $("#content_locker").show(); 
```

# scala - Scala 编程一堆 if 的方法

> ID：12523788
> 
> 赞同：16
> 
> 时间：2012-09-21T03:19:31.230
> 
> 标签：scala, functional-programming

我从 scala 开始，并尝试将功能方式应用于它，但我提出了一堆难以阅读的嵌套 if\else 结构，我想知道是否有更好的方法来编写这些东西？

例如，我编写了一个执行括号平衡的脚本：

```
def balance(chars: List[Char]): Boolean = {
    def checkParentesys(chars: List[Char], parentesis: List[Char]): Boolean =
      if (chars.isEmpty && parentesis.isEmpty)
        true
      else
        if (chars.head == '(')
            checkParentesys(chars.tail, '(' :: parentesis)
        else
            if (parentesis.isEmpty)
                false
            else
                checkParentesys(chars.tail, parentesis.tail)

    checkParentesys(chars.filter(s => s == '(' || s == ')'), List())
  } 
```

我怎样才能把它写得更实用、更像 scala？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-21T05:30:49.030

把它写成折叠可能会更好：

```
def balance(chars: List[Char]): Boolean = chars.foldLeft(0){
  case (0, ')') => return false
  case (x, ')') => x - 1
  case (x, '(') => x + 1
  case (x, _  ) => x
} == 0 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-09-21T03:59:06.297

我认为没有任何理由在遍历列表之前对其进行过滤。您可以在遍历列表时忽略非括号。我认为也没有必要建立第二个列表。您真正想知道的是，开括号的计数永远不会是负数：

```
def balance(chars: List[Char]): Boolean = {
  @tailrec
  def _balance(chars: List[Char], count: Int) : Boolean = 
    chars match {
        case Nil => count == 0   // end of the string did we close every open?
        case '(' :: xs => _balance(xs, count+1)  
        case ')' :: xs => (count > 0) && _balance(xs, count-1) 
        case _ => _balance(chars.tail, count) // uninteresting char, skip it
    }

  _balance(chars, 0)
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-21T03:22:03.987

出色地：

1.  您可以从编写`else if`条件开始。
2.  继续注释它，`tailrec`因为它是尾递归的。
3.  过滤条件可以更简单地写成`Set('(', ')')`，它是一个函数 from `Char`to`Boolean`
4.  我认为你错过了`chars`空但`parenthesis`不是的条件。

所以它看起来像：

```
def balance(chars: List[Char]): Boolean = {
  @tailrec
  def checkParentesys(chars: List[Char], parentesis: List[Char]): Boolean =
    if (chars.isEmpty && parentesis.isEmpty)
      true
    else if (chars.head == '(')
      checkParentesys(chars.tail, '(' :: parentesis)
    else if (chars.isEmpty || parentesis.isEmpty)
      false
    else
      checkParentesys(chars.tail, parentesis.tail)

  checkParentesys(chars.filter(Set('(', ')')), List())
} 
```

你也可以把整个事情变成一个模式匹配：

```
def balance(chars: List[Char]): Boolean = {
  @tailrec
  def checkParentesys(chars: List[Char], parentesis: List[Char]): Boolean =
    (chars, parentesis) match {
      case (Nil, Nil) => true
      case ('(' :: charsTail, _) => checkParentesys(charsTail, '(' :: parentesis)
      case (Nil, _) => false
      case (_, Nil) => false
      case (')' :: charsTail, '(' :: parentesisTail) => checkParentesys(charsTail, parentesisTail)
    }
  checkParentesys(chars.filter(Set('(', ')')), List())
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-26T19:42:03.493

```
var parens :List[Char] =  Nil
def matcher(chrs: List[Char]): Boolean = {
     if (chrs.isEmpty) {
        return parens.isEmpty
     }
     else {
         chrs.head match {
           case '(' =>  parens = '(' :: parens ;matcher(chrs.tail)
           case ')' =>  if (parens.isEmpty) return false 
                            else if (parens.apply(0) ==  '(') parens = parens.drop(1) 
                            else return false;  
                            matcher(chrs.tail);
           case _ => matcher(chrs.tail)
         }
     }
} 
```

如您所见，我没有使用 count 因为 count 不适用于 ())(

# c# - Twilio c# helper，如何使用此方法签名？void AddOutgoingCallerId (phoneNumber, friendlyName, callDelay, callback)

> ID：12523791
> 
> 赞同：2
> 
> 时间：2012-09-21T03:20:39.123
> 
> 标签：c#, asp.net-mvc, twilio

我正在尝试按照 Twilio 文档添加来电显示作为已验证的拨出电话号码。

Twilio c# helper library 有一个方法签名，看起来像这样

void AddOutgoingCallerId (phoneNumber, friendlyName, callDelay, callback)

回调在哪里`Action<ValidationRequestResult>`

我不明白这一点。我正在尝试设置一个 URL，一旦验证发生，Twilio 就可以发回该 URL。

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T03:44:34.613

您需要实现一个接受 a`ValidationRequestResult`并返回的方法`void`。这就是将被调用的方法。您提供该方法作为回调参数。

这是您的电话：

```
AddOutgoingCallerId (phoneNumber, friendlyName, callDelay, HandleAddOutgoingCallerId) 
```

这是您需要创建的方法。

```
private void HandleAddOutgoingCallerId(ValidationRequestResult result)
{
    // Do something (or just return).
} 
```

# c# - C#为什么从类中调用接口成员会产生错误？

> ID：12523793
> 
> 赞同：3
> 
> 时间：2012-09-21T03:20:49.907
> 
> 标签：c#, compiler-construction, syntax, compiler-errors

所以我有一个界面：

```
interface IFoo
{
    int Bar();
    int this[int i] {get; set;}
} 
```

以及派生自它的类

```
class Foo : IFoo
{
    public int IFoo.Bar()
    {
        //Implementation
    {
    public int IFoo.this[int i]
    {
        //Implementation
    }
} 
```

现在，我尝试这样做：

```
var fooey = new Foo();
int i = Fooey.Bar(); 
```

或这个：

```
int i = Fooey[4]; 
```

我希望这些能够正常工作。但是，编译器会生成错误，就好像此类成员不存在一样。这是为什么？我知道我可以`Foo as IFoo`强制转换，但我也知道强制转换对性能来说代价高昂，这通常是首先使用接口的原因。

编辑 1：这些是生成的错误

“Foo”不包含“Bar”的定义，并且找不到接受“Foo”类型的第一个参数的扩展方法“Bar”（您是否缺少 using 指令或程序集引用？）

“无法将索引应用于‘Foo’类型的表达式”

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-21T03:32:43.563

您已[显式实现](http://msdn.microsoft.com/en-us/library/ms173157.aspx) `IFoo`，这意味着它的成员只能通过显式键入的引用访问`IFoo`：

```
// This will work
Foo fooey = new Foo();
int i = ((IFoo)fooey).Bar(); 
```

如果您希望成员在不强制转换的情况下可见，那么在您的实现中只使用成员名称本身，而不用接口名称作为前缀：

```
class Foo : IFoo
{
    public int Bar() { /* implementation */ }
    public int this[int i] { /* implementation */ }
}

// now this will also work:
Foo fooey = new Foo();
int i = fooey.Bar(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T03:32:26.123

我不相信您正在实例化您的课程。此代码应该适合您：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            IFoo foo = new Foo();
            Console.WriteLine("Will return 10: {0}", foo.Bar());

            foo[10] = 20;
            Console.WriteLine("Will return 20: {0}", foo[10]);
        }
    }

    interface IFoo
    {
        int Bar();
        int this[int i] { get; set; }
    }

    class Foo : IFoo
    {
        private int[] array = new int[100];
        public int Bar()
        {
            return 10;
        }

        public int this[int i]
        {
            get
            {
                if (i >= 100)
                {
                    throw new IndexOutOfRangeException("Maximum range is 100");
                }
                return array[i];
            }
            set
            {
                array[i] = value;
            }
        }
    }
} 
```

最后，减少强制转换并不是使用接口的唯一原因。当您使用[工厂模式和一般抽象时，接口也可以很好地工作，这在](http://www.oodesign.com/factory-pattern.html)[合同模式](http://hillside.net/plop/plop97/Proceedings/dechamplain.pdf)中得到了最好的描述。换句话说，您可以拥有多个从 IFoo 继承的类，并且您可以将它们传递给使用该协定的代码的其他部分，而无需实际知道实际实现该协定的类（接口）。

# javascript - 如果我们在配置中定义了一些地图，如何使用 requireJS 优化项目？

> ID：12523795
> 
> 赞同：4
> 
> 时间：2012-09-21T03:20:54.957
> 
> 标签：javascript, optimization, module, requirejs

我的 main 中有一个 require.config，如下所示。

> require.config({ baseUrl
> :'scripts/',
> 
> ```
>  paths:{  
>         jquery:'shell/lib/jquery/jquery-1.7.1'
>      // many libraries and modules are aliased here
> 
>  },
>  map:{
>   '*':{
>       'underscore':'shell/lib/underscore/underscore'
>             // a few other modules are mapped here
>   }
>  } 
> ```
> 
> });

我这样做是因为 map 中定义的文件使用相对路径使用内部依赖项（在它们各自的文件夹中）。现在，当我运行优化器时，路径中定义的模块保存为模块 ID，例如 jquery 保存为**jquery**，而 map 中的模块正在获取完整路径，例如“下划线”为“shell/lib/下划线/下划线”而不是“下划线” .

这会导致问题，因为我也在其他模块中使用“下划线”，并且优化的文件有“下划线”而不是“shell/lib/underscore/underscore”。

当我们提供地图配置或我缺少的东西时，是否有一些特定的优化方法？请告诉我如何解决它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-14T19:04:18.697

我不确定是否理解这个问题：

> 这会导致问题，因为我也在其他模块中使用“下划线”，并且优化的文件有“下划线”而不是“shell/lib/underscore/underscore”。

这似乎是预期的行为，您映射`underscore`到所有模块的该路径。所以基本上你告诉`r.js`：每次你发现`underscore`依赖重写它`shell/lib/underscore/underscore`。如果您的模块使用“内部路径”并且您想做相反的事情（使它们成为参考`underscore`），您需要做相反的映射：

```
 'some/path/underscore': 'underscore' 
```

在这种情况下，所有模块都将指向同一个下划线模块。即使是那些使用一些奇怪的下划线路径的人。

在极端情况下，您需要控制如何`r.js`在磁盘上写入模块。您可以使用该`onBuildWrite`属性（请参阅[https://github.com/jrburke/r.js/blob/master/build/example.build.js#L517](https://github.com/jrburke/r.js/blob/master/build/example.build.js#L517)）。

例如：

```
onBuildWrite: function ( moduleName, path, contents ) {
    if ( path === './src/somefile.js' ) {
          return contents.replace(/^define\('src\/underscore'/, "define('underscore'");
    } else {
          return contents;
    }
} 
```

这个例子是一个“hack”，它告诉`r.js`：当你处理时`somefile.js`，替换`src/underscore`为`underscore`（这正是你对 map 所做的......但只是为了向你展示如何使用`onBuildWrite`它来做讨厌的事情）。

# xampp - 域指向 XAMPP 中的错误目录

> ID：12523807
> 
> 赞同：1
> 
> 时间：2012-09-21T03:23:21.493
> 
> 标签：xampp

由于硬盘驱动器故障，我在重新安装 Windows 后刚刚设置了我的 XAMPP 服务器。当我备份我的服务器文件时，我只是从 htdocs 文件夹中复制了所有内容，所有文件和文件夹。在我安装了 XAMPP 并解决了安全问题后，我将备份的 htdocs 文件复制回新的 htdocs 文件夹。现在，每当我输入我的域名时，应该指向 htdocs 文件夹的域名，因为那是默认的 DocumentRoot，它反而给了我一个错误页面，上面写着“禁止访问”，而我在 URL 栏中看到的 URL 是“soandso.com/xampp”，而不仅仅是“soandso.com”

为什么将我发送到 htdocs/xampp 文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T15:38:50.403

我认为这是因为配置错误。查看

```
XAMPP-FOLDER/apache/conf/extra/httpd-vhosts.conf 
```

并确保你确定你有

```
<VirtualHost yourdomain.com>
ServerAdmin admin@yourdomain.com
DocumentRoot "XAMPP-FOLDER/htdocs/domain-root-folder"
ServerName yourdomain.com
ServerAlias yourdomain.com
<Directory "XAMPP-FOLDER/htdocs/domain-root-folder">
    Order allow,deny
    Allow from all
</Directory>
</VirtualHost> 
```

写在那里。

# javascript - 使用 JavaScript 对象和 AJAX 与 ASP MVC3 模型

> ID：12523808
> 
> 赞同：0
> 
> 时间：2012-09-21T03:23:22.957
> 
> 标签：javascript, ajax, asp.net-mvc-3

由于我对 MVC 相当陌生，因此对于将 MVC 的模型与 JavaScript 对象和 AJAX 一起使用的正确/首选方式是什么，我有点困惑。

例如，我有一个应用程序显示带有用户事件的日历，这些事件存储在数据库中。最重要的是，可以通过在日历中移动这些事件来操纵这些事件，然后将新时间保存在数据库中。

当用户第一次调用我的`Calendar`操作时，我从数据库中加载事件，然后通过`CalendarModel`. 这使我可以直观地准备这些事件，但现在我还需要将这些事件作为 JavaScript 对象使用，因为我将使用 AJAX 调用我的`UpdateEventTimes`操作来保持用户的更改。

所以我今天的选择是要么从 中“提取”事件的数据`CalendarModel`并将它们“硬编码”为 JavaScript 代码中的字符串，要么从 JavaScript 执行 AJAX 调用以再次检索这些事件。不用说，我不喜欢这两种方法，所以我想知道是否有一些我错过的 MVC 技巧更*优雅*？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T05:41:40.067

不幸的是，没有。存档场景的唯一选择是从 Model 构建 js，如下所示：

```
<script>
  var events = @(Model.Events.Aggregate(<aggregation function here to build js object>)) ;
</script> 
```

# html - CSS 导航栏不可点击

> ID：12523809
> 
> 赞同：-1
> 
> 时间：2012-09-21T03:23:25.203
> 
> 标签：html, css, wordpress

我有一个 Wordpress 博客，主题使用 CSS 来制作链接。在主页上它们可以工作，但在其他页面上它不起作用。我不是 CSS 专家，所以我无法找出原因。任何人都可以看看，看看也许我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T03:27:41.523

删除此 css 规则，因为它会使您的导航栏`#access`折叠，因此它的高度不会与其父节点相加`<header>`。

```
#access{float:left} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T03:27:51.153

您的问题是您的 div 的 id`main`浮动在导航栏的内容上。给它一个css风格的规则来`margin-top: 45px;`解决这个问题。

# java - 在 Java 中将 String 转换为 int 并获得 NumberFormatException，不知道为什么

> ID：12523814
> 
> 赞同：0
> 
> 时间：2012-09-21T03:24:22.163
> 
> 标签：java, string, integer, parseint, numberformatexception

ipString 是 IP 地址的字符串表示形式，其中包含空格而不是点。

```
String[] ipArray = ipString.split(" ");
String ip = "";
for (String part : ipArray){
    if (part != null){
        ip += part;
    }
}
ip = ip.trim();
int ipInt = Integer.parseInt(ip); // Exception is thrown here. 
```

线程“main”java.lang.NumberFormatException 中的异常：对于输入字符串：“ `6622015176`”。有人可以解释为什么会抛出这个异常吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T03:27:08.823

[int](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)是原始数据类型，它的范围是：`-2,147,483,648`到`2,147,483,647`

`6,622,015,176`超出 int 范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T03:32:54.770

```
public class test {
    public static void main(String args[]) {
        String ipString="662 20 15 176";
        String[] ipArray = ipString.split(" ");
        String ip = "";
        for (String part : ipArray){
            if (part != null){
                ip += part;
            }
        }
        ip = ip.trim();        
        Long ipInt = Long.parseLong(ip);
        System.out.println(""+ipInt);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T19:38:37.870

6,622,015,176 这个数字超出了 int 的范围。您应该使用 long 而不是 int，这将为您提供更大的范围。

# wpf - WPF 跨多个 ItemsControls 的单一选择

> ID：12523817
> 
> 赞同：2
> 
> 时间：2012-09-21T03:24:59.823
> 
> 标签：wpf, selection, itemscontrol

我的应用程序的一部分有一个月视图日历界面，但我在选择项目时遇到了问题。界面的设置使得视图中的每一天都包含一个`ListBox`项目，很像 Outlook 中的月视图。`ListBox`我遇到的问题是我需要在所有es中维护单个项目选择。

下面是一个可以充分描述我的情况的示例。`ListBox`我需要在两个es之间保持一个选择。

```
<Window x:Class="StackOverflow.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition />
            <ColumnDefinition />
        </Grid.ColumnDefinitions>
        <ListBox ItemsSource="{Binding Numbers}"
                 SelectedItem="{Binding SelectedObject"/>
        <ListBox Grid.Column="1" ItemsSource="{Binding Dates}"
                 SelectedItem="{Binding SelectedObject"/>
    </Grid>
</Window> 
```

以及窗口的视图模型：

```
class MainWindowViewModel : DependencyObject
{
    public static readonly DependencyProperty SelectedObjectProperty =
        DependencyProperty.Register("SelectedObject", typeof(object),
                                    typeof(MainWindowViewModel),
                                    new UIPropertyMetadata(null));

    public ObservableCollection<int> Numbers { get; set; }
    public ObservableCollection<DateTime> Dates { get; set; }
    public object SelectedObject
    {
        get { return GetValue(SelectedObjectProperty); }
        set { SetValue(SelectedObjectProperty, value); }
    }
} 
```

在这个原始示例中，我希望当我的视图模型的 SelectedObject 属性设置为不在 one 中的项目时，`ListBox`将在 that 中删除选择`ListBox`，但这不会发生。我知道我可以简单地命名每个 ListBox，并挂钩到 SelectionChanged 事件。我宁愿不必对整个月视图日历进行此操作。*必须*有更好的方法。

在应用程序的前一次迭代中，我能够创建一个带有用于维护选择的附加属性的 SelectionManager 静态类。但是，我现在不能使用它，因为我用于项目的类不是`DependencyObject`s，而且我真的不希望不必创建`DependencyObject`包装类，因为这会使我的体系结构相当复杂。

谢谢。

**编辑 1：** 根据要求添加了视图模型类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T03:34:16.137

将两者绑定`ListBoxes`到同一个集合（创建一个可观察的`DatesAndNumber`对象集合或类似的东西）并使用转换器和/或数据模板来获得所需的输出。然后，您可以简单地将`IsSynchronizedWithCurrentItem`两者都设置为 true`ListBoxes`以获得所需的效果。参考：http: [//msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.issynchronizedwithcurrentitem.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.issynchronizedwithcurrentitem.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T04:21:44.483

如何使用 ICollectionView 及其关联的过滤器？

这是一个更好地解释它的链接

[http://marlongrech.wordpress.com/2008/11/22/icollectionview-explained/](http://marlongrech.wordpress.com/2008/11/22/icollectionview-explained/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T12:50:32.477

我通过创建一个单独的选择管理器类和一个 ISelectable 接口来解决这个问题。您可以阅读有关[CodeProject](http://www.codeproject.com/Tips/471825/Single-Selection-Across-Multiple-ItemsControls)的详细信息。

# c# - C# 查找两个点之间的数字？

> ID：12523820
> 
> 赞同：-1
> 
> 时间：2012-09-21T03:25:12.563
> 
> 标签：c#, .net

所以，基本上我需要的是获得第二和第三点之间的数字。

示例：我在文本框中输入“1.1.1.1”或“183.312.21.132”，然后单击一个按钮，然后在秒文本框中得到介于第二个点和第三个点之间的数字。就像第一个它将是“1”，第二个它将是“21”

抱歉英语不好。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T03:28:49.617

尝试拆分

```
"1.1.1.1".Split('.')[2] 
```

或者

```
"183.312.21.132".Split('.')[2] 
```

返回一个字符串[]，索引 2 将是第三个数字

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T03:30:26.350

使用字符串拆分：

```
"183.312.21.132".Split(".")[index_of_the_dot_before_desired_numbers] 
```

IE

```
"183.312.21.132".Split('.')[2] = "21" 
```

升级版：

如果您需要点之间的范围，可以使用 LINQ：

```
var startDotIndex=1; 
var endDotIndex=3;
"183.312.21.132".Split('.').Skip(startDotIndex).Take(endDotIndex-startDotIndex).ToArray() 
```

将返回 ["312", "21"];

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T03:30:25.253

```
string digits[] = "1.2.3.4".Split("."); 
```

在其他地方使用：

```
digits[0]
digits[1] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T04:32:18.533

```
var foo = "192.168.0.1";
var digs = foo.Split(".");
var nums = int.Parse(digs[2]); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T03:32:51.867

听起来您需要 String 对象的 Split 方法，如下所示：

```
string foo = "183.312.21.132";
string[] foos = foo.Split('.'); 
```

从这里您可以执行许多不同的操作，例如遍历数组并获取值，或者如果您确切知道要查找的索引，您可以直接从数组中请求它，例如：

```
string bar = foo.Split('.')[2]; // gives you "21" 
```

# drupal-7 - 如何在 Drupal 7 中修改 field--field_myfield.tpl.php 中的字段值

> ID：12523823
> 
> 赞同：0
> 
> 时间：2012-09-21T03:25:42.503
> 
> 标签：drupal-7, field, theming

如果字段的值为“0”，我正在尝试使用 field--field_start_time.tpl.php 覆盖方法隐藏字段和字段标签。我的模板文件逻辑如下。

```
<?php if ($element['#object']->field_start_time != '0')): ?>
    <div class="field-label"<?php print $title_attributes; ?>><?php print $label ?>:
    </div>
<div class="field-item <?php print $delta % 2 ? 'odd' : 'even'; ?>"<?php print
    $item_attributes[$delta]; ?>><?php print render($item); ?></div>      
<?php endif; ?> 
```

这导致我的节点渲染混乱，显然是错误的。任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T22:15:04.183

在开始使用 Drupal 4 之后，我继续，因为社区支持很棒。但是，在 drupal.org 上等待了一天以上没有答案，也没有在这里回答一个非常简单的问题和非常糟糕的文档之后，我想我可以总结那些日子完了。

node.tpl.php 中的以下代码

```
if ($content['field_start_time']['#items']['0']['value'] == '0') {
    hide($content['field_start_time']);
} 
```

# java - JSP/Jquery - 从数据库中动态加载的组合框下拉列表和图像

> ID：12523827
> 
> 赞同：3
> 
> 时间：2012-09-21T03:26:18.450
> 
> 标签：java, jquery, css, jsp, spring-mvc

在我的 Web 应用程序中，我需要显示从数据库动态加载的下拉列表。
我需要从数据库加载用户列表。每个用户的“访问级别”为 1 或 2。
当用户显示在下拉列表中时，他们的姓名旁边必须有一张图片。
（如“访问级别”1 的“绿色”勾号）和（访问级别 2 的红叉）。
我已经检查了这个网址[http://www.marghoobsuleman.com/jquery-image-dropdown](http://www.marghoobsuleman.com/jquery-image-dropdown)。
但我需要根据从数据库加载的访问级别显示图像。
我想这可以通过 JQuery/CSS 来完成。

任何人都可以请告诉如何做到这一点，如果可能的话，请提供示例代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T17:36:16.343

由于您使用 jsp 作为视图技术，因此请使用核心标记来根据访问级别决定是显示绿色勾号还是红色叉号。

访问[此站点](http://heavyz.sourceforge.net/homepage/homepage_zh/comp/notes/jstl-core.html)以了解有关核心标签使用的更多信息。不要忘记在项目类路径中包含 jstl.jar 和 standard.jar 文件。它们是支持 jstl 的必要库。

看起来您的应用程序是使用 spring 框架开发的，所以我将尝试仅以这种方式进行解释。

您的 JSP 代码将如下所示：将其命名为**userlist.jsp**

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form"%>
<!doctype>
<html>
    <head>
       <script src="${pageContext.request.contextPath}/js/jquery-1.3.2.min.js" type="text/javascript></script>
       <script src="${pageContext.request.contextPath}/js/jquery.dd.js" type="text/javascript"></script>
       <link rel="stylesheet" type="text/css" href="${pageContext.request.contextPath}/css/dd.css" />
    </head>
    <body>
        <form:select id="userNames" path="userName" tabindex="10">
            <form:option value="Select User">Select User</form:option>                
            <c:forEach begin="${userlist begin index (0)}" end="${userlist size}" var="i">
                <c:choose>
                    <c:when test="${userNameList.user.accessLevel == 1}">
                        <form:option style="background-image:url(greentick.png);" value="${userNameList.user.userName}">${userNameList.user.userName}</form:option>
                    </c:when>
                    <c:otherwise>
                        <form:option style="background-image:url(redcross.png);" value="${userNameList.user.userName}">${userNameList.user.userName}</form:option>
                    </c:otherwise>
                </c:choose>
            </c:forEach>
        </form:select>
    </body>
</html> 
```

* * *

现在您将拥有一个控制器，该控制器将在调用某些操作后被调用，它将返回此 jsp 以及*userNameList*。下面是示例**UserController.java**

```
@Controller
public class UserController {

    @RequestMapping(value = "/showUsers", method = RequestMethod.GET)
    public String showUserInfo(Model model) {
        // here you prepare the userList, the list of Users along with information
        // here User can be fetched from DB & values stored in User DTO and then DTO in the list
        List<User> userNameList = new ArrayList<User>();
        userNameList.add(User DTO objects go here);
        model.addAttribute("userNameList", userNameList);
        return "userlist";       // remember this is our jsp name
    }
} 
```

& 用户 DTO 可以是这样的。下面是示例**User.java**

```
public class User {
    private String userName;
    private int accessLevel;

    // setters & getters of variables
} 
```

这不能完全清楚地回答。我已经尽力解释了。你试试这个。它应该工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T09:13:05.033

我对 JSP 一无所知，但是，我可以为您提供足够的信息，以便您根据自己的知识继续学习。

HTML部分：

```
<html>
<head>
<title>Sample Title</title>
<script src="msdropdown/js/jquery-1.3.2.min.js" type="text/javascript"></script>
<script src="msdropdown/js/jquery.dd.js" type="text/javascript"></script>
<link rel="stylesheet" type="text/css" href="msdropdown/dd.css" />
<script language="javascript">
    $(document).ready(function(e) {
        try {
            $("#webmenu").msDropDown();
        } catch(e) {
            alert(e.message);
        }
    });
</script>
</head>
<body>
<select name="webmenu" id="webmenu">
    //you will need to take this part into the loop of x being count of total users, and loop from first to last
    <option value="<% //output username lowercased here %>" title="<% if(accessLevel == 1){ //printout imagepath for accessLevel = 1 } else if(accessLevel == 2){ //printout imagepath for accessLevel = 2 %>"><% /*output username here*/ %></option>
</select>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T11:04:50.833

在您的网页所需位置编写以下代码以获取并列出用户列表。

```
rst=stmt.executeQuery("select * from userliat");
<select id="users" name="users">;
<%
String imagePath;
while(rst.next()){
  if(rst.getString("access_level") == "1"){
    imagePath = "greenTick.png";
  }
  else{
    imagePath = "redCross.png";
  }
%>;
<option value="<%= rst.getString("id") %>" title="<%= imagePath %> "><%= rst.getString("user_name") %></option>;
<% } %>
</select> 
```

在您的 head 部分中包含以下 javascript/CSS 插件

```
<script src="msdropdown/js/jquery-1.3.2.min.js" type="text/javascript></script>
<script src="msdropdown/js/jquery.dd.js" type="text/javascript"></script>
<link rel="stylesheet" type="text/css" href="msdropdown/dd.css" /> 
```

在文档准备功能中使用`javascript`以下内容（它在 head 部分）：

```
<script language="javascript">
    $(document).ready(function(e) {
        try {
            $("#users").msDropDown();
        } catch(e) {
            alert(e.message);
        }
    });
</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T04:53:13.903

考虑到您已经知道如何显示图像，您唯一需要做的就是根据访问级别设置正确的图像 url。

鸟瞰图

```
if(accesslevel==1)
Image.path="greetick.png";
else
Image.path="redcross.ong"; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-28T19:29:51.370

我以前做过类似的事情，我使用了 JQuery flexbox 插件。使用起来非常简单。我现在没有代码，但在这里 (http://flexbox.codeplex.com/) 是一个站点，您可以在其中查找如何实现它。

# html - 谷歌浏览器渲染问题，位置：已修复

> ID：12523838
> 
> 赞同：2
> 
> 时间：2012-09-21T03:28:00.890
> 
> 标签：html, css

我一直在开发一个网站，我完全没有遇到任何问题。我现在正在不同的 PC 上对其进行测试，并且在 google chrome 中出现渲染中断的问题。这台电脑都运行相同版本的 chrome，即 21.0.1180.89 版本。在某些电脑上，页面完美呈现，而在其他电脑上，位置：固定属性被完全忽略，并且页面标题在滚动时消失。在使用 chomr 开发人员工具检查元素时，它说该元素在那里，但该元素不可见。z-index 不是问题，因为我将它设置得非常高并且没有修复它。

我什至从哪里开始寻找这个问题的原因？这是css问题还是浏览器问题？

提前致谢

**编辑：**

找到了解决方案。我在文档的正文元素上设置了 opacity: 0.99，试图解决 Mac 上字体显示不正确的问题。这应该是一个有效的 CSS 属性？但是，在某些浏览器上，这似乎导致页面不正确地重新加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T17:34:26.443

找到了解决方案。我在文档的正文元素上设置了 opacity: 0.99，试图解决 Mac 上字体显示不正确的问题。这应该是一个有效的 CSS 属性？但是，在某些浏览器上，这似乎导致页面不正确地重新加载。

# python - Python：如何检查用户输入是值还是 str？

> ID：12523839
> 
> 赞同：0
> 
> 时间：2012-09-21T03:28:01.820
> 
> 标签：python

如何编写python代码要求用户输入一个数字，返回数字的int，如果用户输入一个str，例如“One”，返回一个错误信息，比如“please input a int number”？我怎么能那样做？

另外我必须检查这个数字是否是奇数，所以我不确定我是否可以用 try 和 except 来做到这一点。我不知道如何在我的代码中添加它。

谢谢。

```
def getnum(): 

    errormessage="Please input a odd number"

    asknum=raw_input("Please input a number: ")
    num=int(asknum)

    if num%2!=0:  #return num if it is odd number
        print num

    else:
        print errormessage
        return getnum()

getnum() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T03:31:40.350

```
try:
    a = int(raw_input("Enter an integer: "))
    print a  # or do anything else with "a"
except ValueError:
    print "Please enter an integer." 
```

* * *

**编辑**回应[OP的评论](https://stackoverflow.com/questions/12523839/python-how-to-check-user-input-is-a-value-or-a-str/12523860#comment16859795_12523860)：

```
try:
    a = int(raw_input("Enter an integer: "))
    if a % 2 == 1:
       print "Integer is odd"  # or do anything else
    else:
       print "Integer is even"  # or do anything else
except ValueError:
    print "Please enter an integer." 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T05:26:23.593

请注意，使用 raw_input() 会将变量存储为字符串，如果要将其自动存储为 int，请使用 input()。这适用于 3 之前的 Python 版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T03:42:13.987

您可以使用提到的其他答案做您想做的事。对于一些额外的信息，python中变量的类型可以通过使用`type()`

```
>>> a = 1
>>> type(a)
<type 'int'>
>>> b = 'str'
<type 'str'> 
```

您可以通过以下方式检查变量的类型

```
>>> if type(a) == int:
...     print 'a is integer'
... 
a is integer 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T03:34:38.327

您可以尝试多种方法。

一种方法是

```
userinput = raw_input()
if not all(x in string.digits for x in userinput):
     print 'Please enter an int number' 
```

但这在验证方面有点弱 - 它只是检查所有输入字符是否都是数字。

或者你可以试试

```
userinput = raw_input()
try:
     asint = int(userinput)
except ValueError:
     print 'Please enter an int number' 
```

但这使用 try/except 来处理应该是简单的 if/else 的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T03:34:51.133

```
s = input()
try:
    return int(s)
except:
    return 'Error' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-21T03:35:16.687

对字符串对象使用 isdigit() 函数。

如果数字为假，则返回真。

# c - 在 C 中创建动态字符串数组

> ID：12523840
> 
> 赞同：2
> 
> 时间：2012-09-21T03:28:04.630
> 
> 标签：c, malloc, memcpy, realloc

我知道有很多关于在 C 中创建动态数组的问题，但它们并没有真正帮助我，所以让我以不同的方式提问。

我的程序需要读取可变数量的命令行参数，每个参数的长度都是可变的。此函数接受传递给 main 的 argv 数组，并应返回一个 char* 数组，其中仅包含那些作为环境设置的参数。（程序需要复制 UNIX env 命令。）这是我现在拥有的：

```
char** getEnvVariables(char* args[], int start) {
    int i = start;
    char** env_vars = (char **) malloc(1); 
    while (args[i]) {
        printf("size of env_vars: %d\n", sizeof(env_vars));
        if (isEnvironmentSetting(args[i])) {
            printf("arg: %s\n", args[i]);
            printf("size of arg: %d\n", sizeof(args[i]));
            printf("new size of env_vars: %d\n", (sizeof(env_vars) + sizeof(args[i])));

            env_vars = realloc(env_vars, (sizeof(env_vars) + sizeof(args[i])));
            memcpy(env_vars, args[i], sizeof(args[i]));
            i++;
        }
        else
            break;
    }

    return env_vars;
} 
```

我的想法是使用 malloc() 创建数组，然后使用 realloc() 分配每个 char* 和 memcpy() 所需的空间，以将新的 char* 添加到数组中。但阵列实际上并没有增长。在循环的每次迭代中，它的大小为 8 个字节。我对 C 和动手内存管理仍然很陌生，因此不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T03:42:54.507

您可以通过以下方式获取指定主要功能的环境变量：

```
int main(int argc, char *argv[], char *envp[]) 
```

envp 变量喜欢 argv 并包含环境变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T05:30:08.103

您不能将输入的 C 字符串复制到输出，除非您想返回一个（字符指针），该指针指向所有连接在一起的字符串。要返回 (char pointer) （或 (char pointer pointer) ）的数组，您需要 malloc 一个新字符串并将其地址存储在 env_vars 中，或者让 env_vars 存储 args[i] 的地址。这是两种方法的实现：

```
#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <string.h>

bool isEnvironmentSetting(const char * string)
{
   (void) string;
   return true;
}

char** getEnvVariables1(char* args[], int start) {
    int i = start;
    int num_args = 0;
    char** env_vars = NULL;
    char *string = NULL;
    printf("size of env_vars: %ld\n", num_args * sizeof(env_vars));
    while (args[i]) {
        if (isEnvironmentSetting(args[i])) {
            printf("arg: %s\n", args[i]);
            printf("size of arg: %ld\n", strlen(args[i]));
            num_args++;
            printf("new size of env_vars: %ld\n", num_args * sizeof(env_vars));
            env_vars = realloc( env_vars, sizeof(env_vars) * num_args );
            string = malloc(strlen(args[i]) + 1);
            strcpy(string,args[i]);
            env_vars[num_args - 1] = string;
            i++;
        }
        else
            break;
    }
    env_vars = realloc( env_vars, sizeof(env_vars) * (num_args + 1) );
    env_vars[num_args] = NULL;    
    return env_vars;
}

char** getEnvVariables2(char* args[], int start) {
    int i = start;
    int num_args = 0;
    char** env_vars = NULL;
    printf("size of env_vars: %ld\n", num_args * sizeof(env_vars));
    while (args[i]) {
        if (isEnvironmentSetting(args[i])) {
            printf("arg: %s\n", args[i]);
            printf("size of arg: %ld\n", strlen(args[i]));
            num_args++;
            printf("new size of env_vars: %ld\n", num_args * sizeof(env_vars));
            env_vars = realloc( env_vars, sizeof(env_vars) * num_args );
            env_vars[num_args - 1] = args[i];
            i++;
        }
        else
            break;
    }
    env_vars = realloc( env_vars, sizeof(env_vars) * (num_args + 1) );
    env_vars[num_args] = NULL;
    return env_vars;
}

int main(int argc, char *argv[])
{
   (void) argc;

   char **envVars = getEnvVariables1(argv,1);
   int i = 0;
   while (envVars[i] != NULL)
   {
      printf("env var: %s\n",envVars[i]);
      i++;
   }

   envVars = getEnvVariables2(argv,1);
   i = 0;
   while (envVars[i] != NULL)
   {
      printf("env var: %s\n",envVars[i]);
      i++;
   }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T06:21:06.767

`sizeof(env_vars)`将始终返回指针的大小，而不是指向的分配内存的大小`env_vars`。您`sizeof`只能将静态分配的数组用于此类目的。

因此，在您的情况下，您需要维护一个单独的变量来保存数组大小。

# c - 处理和分析文件中的 4 行数据

> ID：12523841
> 
> 赞同：0
> 
> 时间：2012-09-21T03:28:09.903
> 
> 标签：c, macos, terminal, while-loop

我需要整理出一个文本文件中的一组 4 行数据，例如。

```
[DATA]
[DATA]
[DATA]
[DATA]
[BLANK LINE]
[DATA]
.... 
```

我的问题是，如果只有一组 4 行数据，我的下面的函数最终会起作用，但是当有一组以上的数据时它会冻结。什么可能导致了这个问题？如果您需要更多代码，请告诉我。

非常感谢。

```
int i=0;
while(i < (numGames + empLines))
{
    fgets(gameLine, sizeof(gameLine), input2);
    if (gameLine[0] == '\n')
    {
        continue;
    }
    sscanf(gameLine, "%s %d %d %s %d %d", teamName1, &teamGoal1, &teamBehind1, teamName2, &teamGoal2, &teamBehind2);
    int j =0;
    while (j < numTeams)
    {

                                          ...

                 }
                k++;
            }
            break;
        }
        j++;
    }
    i++;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:05:37.250

根据您的描述，我不知道这是答案，但从您的代码中：

```
while(i < (numGames + empLines))
{
    fgets(gameLine, sizeof(gameLine), input2);
    if (gameLine[0] == '\n')
    {
        continue;
    }
    i++;
} 
```

如果文件的最后一行只是一个“\n”，那么您将永远循环。i 永远不会增加，您也不会检查 feof() 或查看 fgets() 返回值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T04:03:51.430

最有可能的问题在于程序如何解析空行的换行符。'\n' 不必作为文本文件的第一个字符出现，请更改程序首先读取该行的方式。例如，使用 fgetc() 确定它是数据行还是空白行，直到遇到 '\n' 或 '\r'。如果遇到非终止字符，则它是数据行，将指针回绕到行首并读取为格式化字符串。

希望能帮助到你 ：）

# python - os.walk 是否泄漏内存？

> ID：12523843
> 
> 赞同：5
> 
> 时间：2012-09-21T03:28:42.977
> 
> 标签：python, memory-leaks, os.walk

当我在 Windows 中运行这个 Python 脚本时，这个过程会增长，而且看不到明显的结束：

```
import os

for i in xrange(1000000):
    for root, dirs, files in os.walk(r"c:\windows"):
        pass 
```

我是不是误会了什么？（我使用的是 Python 2.7.3。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T23:43:07.910

这是由于在 os.path.isdir 中发现内存泄漏；[在重复的 os.path.isdir 调用中](https://stackoverflow.com/questions/12648737/huge-memory-leak-in-repeated-os-path-isdir-calls)看到巨大的内存泄漏？ 您可以使用 Unicode 编码的路径字符串自行测试 - 应该没有泄漏。

os.path.isdir 用于 os.walk 实现：

```
 islink, join, isdir = path.islink, path.join, path.isdir
    try:
        names = listdir(top)
    except error, err:
        if onerror is not None:
            onerror(err)
        return

    dirs, nondirs = [], []
    for name in names:
        if isdir(join(top, name)):
            dirs.append(name)
        else:
            nondirs.append(name) 
```

# javascript - 阻止js图像弹出屏幕

> ID：12523845
> 
> 赞同：1
> 
> 时间：2012-09-21T03:29:01.660
> 
> 标签：javascript, jquery

使用下面的代码，我怎样才能阻止它从屏幕上消失？如果您在浏览器窗口的最右侧有一张图片，代码会将图片向右展开，因此现在展开的图片将离开屏幕。如果它想从屏幕上加载（向右），我希望它加载到左侧。我希望这是有道理的。我想在浏览器窗口中“包含”弹出窗口——更具体地说，它需要包含在 #page_container （包装整个页面）中

我不确定原始代码来自哪里，但我正在尝试修改它。

任何帮助表示赞赏。

```
this.screenshotPreview = function(){    

    xOffset = 10;
    yOffset = -10;

$("a.screenshot").hover(function(e){
    this.t = this.title;
    this.title = "";    
    var c = (this.t != "") ? "<br/>" + this.t : "";
    $("body").append("<p id='screenshot'><img src='"+ this.rel +"' alt='preview'/>"+ c +"</p>");                                 
    $("#screenshot")
        .css("top",(e.pageY - xOffset) + "px")
        .css("left",(e.pageX + yOffset) + "px")
        .fadeIn("fast");                        
},
function(){
    this.title = this.t;    
    $("#screenshot").remove();
}); 
$("a.screenshot").mousemove(function(e){
    $("#screenshot")
        .css("top",(e.pageY - xOffset) + "px")
        .css("left",(e.pageX + yOffset) + "px");
});         
}; 
```

这是小提琴

[http://jsfiddle.net/63HA4/](http://jsfiddle.net/63HA4/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T03:51:31.790

首先，您将“x”属性与“yOffset”混合，这可能不是您想要的。三重检查。

将您的 mousemove 方法更改为此类，请注意我添加的检查以查看未来位置是否变为负数（在父容器之外）

```
$("a.screenshot").mousemove(function(e){
    var x = (e.pageY - xOffset < 0)? 0: e.pageY - xOffset,
        y = (e.pageY + yOffset < 0)? 0: e.pageX + yOffset;
    $("#screenshot")
    .css("top",y + "px")
    .css("left",x + "px"); 
```

再一次，检查数学，这不是最终代码，但它会让你知道你需要做什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-28T15:57:55.927

这是我实施的解决方案，它对我有用。

```
this.screenshotPreview = function(){    

xOffset = -10;
yOffset = -10;

$("a.screenshot").hover(function(e){
    this.t = this.title;
    this.title = "";    
    var c = (this.t != "") ? "<br/>" + this.t : "";
    $("body").append("<p id='screenshot'><img src='"+ this.rel +"' alt='preview'/>"+ c +"</p>");                                 
    $("#screenshot")
        .css("top",(e.pageY - xOffset) + "px")
        .css("left",(e.pageX + yOffset) + "px")
        .fadeIn("fast");                        
},
function(){
    this.title = this.t;    
    $("#screenshot").remove();
}); 
$("a.screenshot").mousemove(function(e){
    var _width = jQuery('#screenshot').outerWidth(),
    _outerWidth = document.body.offsetWidth;

    var x = e.pageX + yOffset;
    if(x >(_outerWidth - _width)){
        x = _outerWidth - _width;
    }

    $("#screenshot")
        .css("top",(e.pageY - xOffset) + "px")
        .css("left",(x) + "px");
});         
}; 
```

# php - 带有自适应付款的 PayPal IPN - 如何发送 item_number 值？

> ID：12523846
> 
> 赞同：0
> 
> 时间：2012-09-21T03:29:01.613
> 
> 标签：php, paypal, e-commerce, paypal-ipn, paypal-adaptive-payments

我正在开发一个零售网站，它有一个嵌入式 PayPal 系统，该系统使用链式支付（这样每次销售的佣金都会交给第三方）。

我想在下订单时更新我的​​数据库。我希望用户购买商品并减少数据库中列出的库存。为此，我需要商品编号（我正在使用的自定义 6 位数字）。

当 IPN 消息通过时，有一些变量称为：

item_number1 item_number2 item_number3 等，每个项目。

但是，所有值都是空的。如何将商品编号发送到 PayPal，以便它们在 IPN 消息中发回？

我通过 SetPaymentOptions 向 PayPal 发送商品的请求是这样的：

```
$nvpstr .= "&receiverOptions[0].invoiceData.item[$key].name=$product[Name]";
            $nvpstr .= "&receiverOptions[0].invoiceData.item[$key].price=$productTotalPrice";
            $nvpstr .= "&receiverOptions[0].invoiceData.item[$key].itemCount=$quantity";
            $nvpstr .= "&receiverOptions[0].invoiceData.item[$key].itemPrice=$product[Price]";
            $nvpstr .= "&receiverOptions[0].invoiceData.item[$key].identifier=$product[ID]"; 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T07:48:57.037

您可以在 IPN url 的查询字符串中设置这些值。

当您以如下形式定义您的 ipn URL 时：

```
http://mydomain.com/notify.php 
```

附加变量

```
http://mydomain.com/notify.php?customvar1=customval1&customvar2=customval2... 
```

您还可以将这些变量添加到数组中，对其进行序列化并改用 base64_encode。

例如

```
$items = array('customvar1' => 'customval1');
$ipnUrl = "http://mydomain.com/notify.php?params=" . base64_encode(serialize($items )); 
```

# java - ServletContext getRealPath 方法 - 什么是虚拟路径？

> ID：12523848
> 
> 赞同：3
> 
> 时间：2012-09-21T03:29:16.763
> 
> 标签：java, servlets, servlet-container

我正在阅读文档，[`getRealPath(String s)`](http://docs.oracle.com/javaee/5/api/javax/servlet/ServletContext.html#getRealPath%28java.lang.String%29)当我阅读此声明时我感到困惑

> 返回包含给定虚拟路径的真实路径的字符串。例如，`/index.html`返回服务器文件系统上的绝对文件路径的路径将由请求提供服务`http://host/contextPath/index.html`，其中 contextPath 是此 ServletContext 的上下文路径。

什么是虚拟路径？假设我在我的部署环境中，当我说 getRealPath("index.html") 时，这通常指向 WEB-INF 目录吗？还是 getRealPath() 开始读取根目录（在 Web 应用程序的文件夹名称内）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-05T16:10:32.580

您从 Web 容器中访问的资源路径都是**虚拟路径**。它们的虚拟根是 Web 应用程序的基本文件夹。但是在它们所在的实际**操作系统中，它们肯定会位于“具体”位置。**`getRealPath`给你那条路。

假设您有一个名为*index.jsp*的 jsp ：

![在此处输入图像描述](../Images/3248c9e9d824c1448d0ecd1a34c2eebf.png)

![在此处输入图像描述](../Images/5af76f2f216ed4fcb5029da167bf1df0.png)

请注意，无论何时使用它，都会对 Web 应用程序的可移植性造成破坏。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T08:04:28.073

`ServletContext.getRealPath(String s)`返回真实的文件系统路径。输入字符串是相对于您的 Web 应用程序的上下文路径进行解释的。

例如，在 eclipse 中，这通常是`WebContent`您的 Web 应用程序项目中的文件夹（可以自定义）。从项目中构建一个 WAR 文件后，您会意识到该`WebContent`文件夹​​消失了，因此在服务器上，输入字符串相对于 WAR 文件的文件夹（或 .war 库 - 这取决于您是否在部署与否）。

**关于安全的说明**

此方法应该（不是必须）仅在您想要访问服务器端文件的情况下使用。典型场景是在启动期间解析配置文件。请记住，永远不要让应用程序的调用者知道给定资源的真实文件系统路径。

# iphone - 改变 UIStepper 的大小？

> ID：12523856
> 
> 赞同：6
> 
> 时间：2012-09-21T03:30:33.413
> 
> 标签：iphone, objective-c, ios, ipad

是否可以更改 UIStepper 的大小？当我尝试设置步进器的大小时，它似乎被忽略了。

```
UIStepper *stepper = [[UIStepper alloc] initWithFrame:CGRectMake(50,50,100,100)];
[self.view addSubview:stepper];
NSLog(@"%@",stepper);
CGRect r = CGRectMake(50,50,100,100);
stepper.frame = r;
NSLog(@"%@",stepper); 
```

日志说框架是 (50 50; 94 27)

是否可以从 94、27 更改大小？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-02-11T05:07:37.490

您无需转换即可正确更新 UIStepper 大小。

使用以下方法设置背景图像，步进器将使用背景大小自行绘制：

```
- (void)setBackgroundImage:(UIImage*)image forState:(UIControlState)state 
```

**例子**

```
 [self.stepper1 setIncrementImage:[UIImage imageNamed:@"plusIcon1.png"] forState:UIControlStateNormal];
    [self.stepper1 setDecrementImage:[UIImage imageNamed:@"minusIcon1.png"] forState:UIControlStateNormal];

    [self.stepper1 setBackgroundImage:[UIImage imageNamed:@"stepperBkg1.png"] forState:UIControlStateNormal];
    [self.stepper1 setBackgroundImage:[UIImage imageNamed:@"stepperBkgHighlighted1.png"] forState:UIControlStateHighlighted];
    [self.stepper1 setBackgroundImage:[UIImage imageNamed:@"stepperBkgDisabled1.png"] forState:UIControlStateDisabled]; 
```

与右侧未修改的步进器相比，这在左侧产生以下结果： ![在此处输入图像描述](../Images/40f6f6f0641ea7dac54042e8f2d59544.png)

stepperBkg1@2x.png:

![在此处输入图像描述](../Images/c2ee5dd7327b4901079da1c3a5c4a27c.png)

stepperBkgHighlighted1@2x.png:

![在此处输入图像描述](../Images/29fd93d59bbea4902c1eb22667c1d0fb.png)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-21T07:29:39.543

我同意巴尼乌帕尔的观点。步进器的大小无法更改，您无法借助两个自定义按钮实现相同的功能，并且可以设置按钮的背景图像以给人以步进器的印象。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-12-10T19:57:32.777

您可以在您的`viewDidLoad`

```
 Stepper.transform = Stepper.transform.scaledBy(x: 10, y: 10) 
```

但它会抵消功能但试一试！

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-09-21T04:41:59.287

您不能更改 UIStepper 的大小。UIStepper 是 UIView 的子类，您可能可以通过某种 hack 更改大小，可能正在创建 UIStepper 的子类并覆盖 drawRect:，我不确定这是否可行。但这样做会使您的应用面临被拒绝的风险。如果您需要不同的尺寸，最好的选择是制作自定义组件。

# javascript - 如何获取 li 元素中的最大宽度

> ID：12523863
> 
> 赞同：0
> 
> 时间：2012-09-21T03:32:27.903
> 
> 标签：javascript, jquery

前（伪代码）：

```
<ul class="menu">
  <li class="extended">
    <div class="columns column1">
      <ul>
        <li>Item 1</li>
        <li>Item 2</li>
        <li>Item 3</li>
        <li>Item 4</li>
        <li>Item 5</li>
      </ul>
    </div>
  </li>
  <li class="extended">
    <div class="columns column2">
      <ul>
        <li>Item 6</li>
        <li>Item 7</li>
        <li>Item 8</li>
        <li>Item 9</li>
        <li>Item 10</li>
      </ul>
    </div>
  </li>
</ul>

<ul class="menu">
  <li class="extended">
    <div class="columns column1">
      <ul>
        <li>Item 1</li>
        <li>Item 2</li>
        <li>Item 3</li>
        <li>Item 4</li>
        <li>Item 5</li>
        <li>Item 6</li>
      </ul>
    </div>
  </li>
  <li class="extended">
    <div class="columns column2">
      <ul>
        <li>Item 7</li>
        <li>Item 8</li>
        <li>Item 9</li>
        <li>Item 10</li>
        <li>Item 11</li>
      </ul>
    </div>
  </li>
</ul> 
```

目标是这样的：

```
Item 1 | Item 6
Item 2 | Item 7
Item 3 | Item 8
Item 4 | Item 9
Item 5 | Item 10 
```

或者

```
Item 1 | Item 7
Item 2 | Item 8
Item 3 | Item 9
Item 4 | Item 10
Item 5 | Item 11
Item 6 
```

问题：我想获取最大宽度，`column1`然后`column2`添加结果并设置为宽度`main-wrapper`：totalWidth = column1 + column2 $('.main-wrapper').css('width', totalWidth);

我的实现：

```
var $listing = $(this).find('ul.menu .extended ul li'); 
var $col1, $col2;
// Loop through all target submenu lists
$listing.each(function(key, value) {
   var $t = $(value);
   if(key == 0) {
   // Get the width of the first column
     $col1 = $t.outerWidth(true);
   } else if(key == $listing.length-1) {
     // Get the width of the second column
     $col2 = $t.outerWidth(true);
    }
});
// Store the total width of columns in variable
var $total_width = $col1 + $col2 + 46;  
// Append the width in the parent ul element
$(this).find('ul.menu').css('width', $total_width); 
```

但是如果文本没有空格，我的脚本只会正确获取宽度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T03:51:43.140

这是非常奇怪的代码，您应该研究更好的方法来做到这一点。同时，我将您的代码放在 JSFiddle 中，并且您的 $total_width 将返回为 NaN - 您应该设置初始 $col1 和 $col2 = 0 - 这至少可以确保您获得一个可以使用的数值。

编辑：亚历山大是正确的 - $().find() 确实返回一个 jQuery 对象。在我的测试中，我删除了这个并做了 $.find() 并且没有 .each() 函数。

```
var $listing = $(this).find('ul.menu .extended ul li'); 
console.log($listing);

var $col1 = 0, $col2 = 0;

// Loop through all target submenu lists
$listing.each(function(key, value) {
   var $t = $(value);

   if(key == 0) {
   // Get the width of the first column

     $col1 = $t.outerWidth(true);
   } else if(key == $listing.length-1) {
     // Get the width of the second column
 $col2 = $t.outerWidth(true);
}
});
// Store the total width of columns in variable
var $total_width = $col1 + $col2 + 46; 

// Append the width in the parent ul element
$(this).find('ul.menu').css('width', $total_width); 
```

我认为这会奏效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T04:48:04.853

我建议您让 CSS 确定每个“列”的宽度并将这些值加在一起。

因为 .column1 和 .column2 是列表元素 ( `display: list-item;`)，所以它们将始终具有相同的宽度，因为它们将扩展以适应最大的子项。

见：http: [//jsfiddle.net/cWsxZ/1/](http://jsfiddle.net/cWsxZ/1/)

将它们设置为`display: inline-block;`，其余的应该很容易。

见：http: [//jsfiddle.net/uYW8B/1/](http://jsfiddle.net/uYW8B/1/)

```
/* css */
li.expanded { display: inline-block; }​

/* js */
var totalWidth = $('.column1').width() + $('.column2').width();
$('.main-wrapper').width(totalWidth);​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T06:58:43.043

这是我对我的问题的解决方案。感谢大家的投入。

```
(function ($) {

  Drupal.behaviors.menu = {
    attach: function (context, settings) {

      /** SOF Block: Populate the menu items to each columns **/
      var $lists = $('#navigation li.expanded ul.menu'); 

      // Loop through all target lists.
      $lists.each(function(i, e) {

        var $list = $(e);
        // Count all the items
        var $count_list = $(this).find('li').size();
        // Get the ceiling for first column
        var $sliced_list = Math.ceil($count_list / 2);

        if($count_list > 5) {

          //These are temporary variables.
          var $new_list = $('<ul>');
          var $list_item, $sub_list, $sub_set;

          // Set the number of items per column when less than 9
          if($count_list < 9) {
            // The number of items per column.
            var per_column = 5;
          } 

          // Dynamic number of items per column when more that or equal to 9
          if($count_list >= 9) {
            var per_column = $sliced_list;
          }

          // Calculate the amount of columns needed.
          var n = Math.ceil($list.find('li').length / per_column);

          // Loop through all columns.
          for (var i = 0; i < n; ++i) {

            // Creates the sub list for the current column.
            $sub_list = $('<ul class="columns column' + (i + 1) + '">');
            // Gets the first set of list items from the original list and adds them to the sub list created above.
            $sub_set = $list.find('li').slice(0, per_column).appendTo($sub_list);
            // Creates a new list item and adds the sub list to it.
            $list_item = $('<li class="extended extended' + (i + 1) + '">').append($sub_list);
            // Add the newly created list item to the new list.
            $new_list.append($list_item);
            // Create a div with the class 'columnX' and wrap the sub list with it.
            //$sub_list.wrap('<div class="columns column' + (i + 1) + '"></div>');

          }

          // Replace the original list with the new one.
          $list.html($new_list.html());

        }
      }); 
      /** EOF Block: Populate the menu items to each columns **/

      /** SOF Block: Apply all necessary changes to focused menu items **/
      // Set all settings required on hover
      $('#navigation ul li.expanded').hover(function() {
        $(this).children().next('ul').css('display', 'block');
        $(this).addClass('hover'); 
        // Get the width of parent li
        var w = $(this).width();
        // Apply the width to the "div class='fix'" element to avoid overlapping
        $(this).children().next('div').css('width', w + 'px');      
      }, function() {
        $(this).children().next('ul').css('display', 'none');
        $(this).removeClass('hover');
      });
      /** EOF Block: Remove all changes applied to all focused menu items on mouseouot **/    

    }
  };
})(jQuery); 
```

# java - JDBC：简单的 MSSql 连接示例不起作用

> ID：12523865
> 
> 赞同：28
> 
> 时间：2012-09-21T03:32:36.360
> 
> 标签：java, jdbc

我正在学习 Java，需要运行一些简单的东西来通过 JDBC 从 MSSQL 中检索一些数据。我书中的例子不起作用（但它已经有好几年了），下面这个来自 MS 的例子对我也不起作用：

[http://msdn.microsoft.com/en-us/library/ms378956(v=sql.90).aspx](http://msdn.microsoft.com/en-us/library/ms378956(v=sql.90).aspx)

这是我的代码：

```
package javasql;
import java.sql.*;
import java.util.*;

public class Program {

    private static String url = "jdbc:sqlserver://localhost\\SQLExpress;database=Northwind;integratedSecurity=true;";
    //private static String userName = "sa";
    //private static String password = "myPassword";

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        RunDemo();
    }

    public static void RunDemo() {
        try {
            Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
            Connection connection = DriverManager.getConnection(url);

            Statement statement = connection.createStatement();
            ResultSet results = statement.executeQuery("SELECT ProductName, Price FROM Products ORDER BY ProductName");

            while(results.next()) {
                System.out.println("Product Name: " + results.getNString("ProductName") + " Price: $" + results.getFloat("UnitPrice"));
            }

        } catch (ClassNotFoundException | SQLException ex) {
            System.out.println(ex.getMessage());
        }
    }
} 
```

当我运行代码时，我没有抛出任何异常。我只是在输出窗口中得到这个：

```
run:
com.microsoft.sqlserver.jdbc.SQLServerDriver
BUILD SUCCESSFUL (total time: 0 seconds) 
```

我正在使用 NetBeans 7.2。请有人给我一个工作示例。

**编辑：**

顺便说一句，对于您看到的连接字符串，`\\SQLExpress`我确实尝试删除它并`instanceName=SQLExpress`改为使用..但这也没有任何效果。

**编辑2：**

好的，我从 MS 下载了最新的 MSSQL JDBC 驱动程序，并在其中引用了 2 个 JAR 文件。现在我得到这个输出：

```
run:
The connection to the host localhost, named instance SQLExpress failed. 

Error: "java.net.SocketTimeoutException: Receive timed out". 

Verify the server and instance names and check that no firewall is blocking UDP traffic to port 1434\.  
For SQL Server 2005 or later, verify that the SQL Server Browser Service is running on the host.
BUILD SUCCESSFUL (total time: 15 seconds) 
```

进展..至少我们可以看到它现在正在尝试连接，但是有人可以告诉我上述错误吗？

**编辑 3：**

修复了另外 2 个问题.. 一个是启用 SQL Server Browser，第二个是为 SQL Server 启用 TCP/IP。谢谢@Vikdor 现在我收到此错误：

```
run:
The TCP/IP connection to the host localhost, port 1433 has failed. Error: "Connection refused: connect. Verify the connection properties. Make sure that an instance of SQL Server is running on the host and accepting TCP/IP connections at the port. Make sure that TCP connections to the port are not blocked by a firewall.".
BUILD SUCCESSFUL (total time: 15 seconds) 
```

我检查了 Windows 防火墙并添加了一个入站规则以允许该端口，但我仍然收到上述错误。有任何想法吗？

**编辑4：**

尝试了此链接中的解决方案：http: [//www.coderanch.com/t/306316/JDBC/databases/SQLServerException-TCP-IP-connection-host](http://www.coderanch.com/t/306316/JDBC/databases/SQLServerException-TCP-IP-connection-host)

在 EDIT 3 中不再出现错误。现在得到另一个...

```
run:
Sep 21, 2012 11:33:16 AM com.microsoft.sqlserver.jdbc.AuthenticationJNI <clinit>
WARNING: Failed to load the sqljdbc_auth.dll cause : no sqljdbc_auth in java.library.path
This driver is not configured for integrated authentication. ClientConnectionId:577f359e-4774-45f3-96fb-588785911817
BUILD SUCCESSFUL (total time: 14 seconds) 
```

现在对此感到非常厌倦..为什么是Java，为什么？说真的……我很高兴我主要使用 .NET。好吧，当我找到解决方案时，我会在此处发布它以确保它可以在其他人发疯之前帮助他们，因为我即将...

**编辑 5：**

这有帮助： [java 连接到 MicrosoftSQLServer 2005](https://stackoverflow.com/questions/4827173/java-connecting-to-microsoftsqlserver-2005)

我将目录路径放入我的 PATH 环境变量中。没用，所以我也把它`sqljdbc_auth.dll`放到了我的 JDK 文件夹`C:\Program Files\Java\jdk1.7.0_04\bin`中。解决了。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-09-21T05:07:51.337

好的，这就是解决我的问题的方法：

1.  从这里下载最新的 MSSQL JDBC 驱动程序：http: [//msdn.microsoft.com/en-us/sqlserver/aa937724.aspx](http://msdn.microsoft.com/en-us/sqlserver/aa937724.aspx)

2.  在我的项目中引用了 2 个 JAR 文件： **sqljdbc.jar**和 **sqljdbc4.jar**（我还不确定是以上两个都需要还是只需要一个..）

3.  确保 SQL Server Browser windows 服务正在运行

4.  打开 SQL Server 配置管理器并转到**SQL Server 网络配置**下**的 SQLEXPRESS 协议**。右键单击**TCP/IP**并选择属性。设置**启用**= 是。

*******   当您在那里时，单击**IP 地址**选项卡并找到**IP All**部分。将**TCP 端口**设置为 1433。

    *   将**sqljdbc_auth.dll**添加到您的**PATH 环境变量**中。在我的情况下：**D:\Java\sqljdbc_4.0\enu\auth\x64**

    *   将**sqljdbc_auth.dll**复制到您的**JDK 目录**。就我而言：**C:\Program Files\Java\jdk1.7.0_04\bin******** 

 ****我希望这可以帮助别人。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-07-17T14:01:31.580

谢谢 最后它的工作。如果以下消息显示为错误，

```
 Verify the server and instance names and check that no firewall is blocking
 UDP traffic to port 1434\. For SQL Server 2005 or later,
 verify that the SQL Server Browser Service is running on the host 
```

请通过以下方式启用 Sql Server Browser，

**开始**>**控制面板**>**系统和安全**>**管理工具**>**服务**

选择**SQL Server Browser**右键单击​​并选择**属性**。

将启动类型设置为自动。单击**应用**>**单击开始**>单击**确定**

确保您的 IPALL TCP 地址是 - **1433**！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-21T03:55:58.177

您可能需要检查我在此处列出的步骤：[错误：与主机的 TCP/IP 连接失败。java.net.ConnectException: Connection refused: connect](https://stackoverflow.com/questions/12496045/unable-to-connect-to-sqlexpress-using-jdbc-connection-refused-error/12496575#12496575)看看SQLExpress实例配置是否正确，然后修改你的JDBC URL，单独指定实例名称。该示例用于基于密码的身份验证，但适用于您的`integratedSecurity=true;`财产。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-11-25T03:48:07.190

原因：

1.  协议 (TCP/IP) 未启用
2.  端口不正确
3.  缺少 sqljdbc_auth.dll

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-10-04T21:32:18.460

在我的情况下：我没有在 URL 字符串中添加端口号

```
String url = "jdbc:sqlserver://ABC\\SQLEXPRESS;databaseName=xyz;portNumber=1433" 
```

它解决了我的问题

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-12-29T13:37:10.483

**命名和多个 SQL Server 实例**

[如果您需要从 uni* 连接到命名实例，请在构建JDBC 连接 URL](http://msdn.microsoft.com/en-us/library/ms378428(v=sql.110).aspx)时特别注意

**如果同时使用 portNumber 和 instanceName，则 portNumber 将优先，instanceName 将被忽略。**

*这也意味着如果要使用实例名称，您不能更改端口号。*

在任何这些行中，参数**myinstancename**将被忽略：

*   jdbc:sqlserver://db-devmyinstancename;databaseName=mydbname;portNumber=1433
*   jdbc:sqlserver://db-dev;databaseName=dbname;instanceName=myinstancename;portNumber=1433
*   jdbc:sqlserver://db-dev\myinstancename:1433;databaseName=mydbname
*   jdbc:sqlserver://db-dev:1433;databaseName=dbname;instanceName=myinstancename

因此，如果您想使用实例名称，则必须删除端口号（尝试使用 jdbc sqlserver 驱动程序版本 3、4、4.1）

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-04-23T18:33:48.263

请通过以下方式启用 Sql Server Browser，开始 > 控制面板 > 系统和安全 > 管理工具 > 服务 选择 SQL Server Browser 右键单击​​并选择属性。

将启动类型设置为自动。单击应用>单击开始>单击确定

确保您的 IPALL TCP 地址是 - 1433！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-09-21T03:43:54.163

这可能很愚蠢，但请检查您的 Products 表是否为空。这是我看到没有出现任何异常并且没有在控制台中打印任何内容的唯一原因。****

# android - 用指尖在谷歌地图上画画

> ID：12523871
> 
> 赞同：0
> 
> 时间：2012-09-21T03:33:37.297
> 
> 标签：android, google-maps

我目前正在做一个包含谷歌地图的 android 应用程序，我想使用指尖动作在地图上绘制。请帮助我

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<com.google.android.maps.MapView
    android:id="@+id/myGMap"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:apiKey="0TToqyhMYWcvDuJ5NvNtgc-kB8gljGrTXPgiaqw"
    android:clickable="true"
    android:enabled="true" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T03:45:09.390

使用 RelativeLayout 而不是 LinearLayout。这将使您能够在 MapView 上堆叠 SurfaceView。在 SurfaceView 的事件处理程序中，您可以编写代码来检测指尖运动。选中[在地图上放置透明表面视图](https://stackoverflow.com/questions/9800776/place-a-transparent-surface-view-over-a-map)

# linux - 用于获取所有 IP 地址的 Bash 脚本

> ID：12523872
> 
> 赞同：10
> 
> 时间：2012-09-21T03:33:40.163
> 
> 标签：linux, bash, shell

我正在尝试编写一个`bash`脚本来获取服务器上的所有 IP 地址。该脚本应该适用于所有主要发行版。这是我所拥有的：

```
ifconfig | grep 'inet addr:' | awk {'print $2'} 
```

导致：

```
addr:10.1.2.3
addr:50.1.2.3
addr:127.0.0.1 
```

如何首先删除`addr:`前缀？其次，我该如何排除`127.0.0.1`？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-27T14:47:16.183

`ifconfig`被淘汰了`ip`。它还具有`-o`写输出易于解析的标志。用于`ip -4`仅显示 IPV4 地址。注意更简单的脚本，它已经排除了环回地址：

```
ip -o addr | awk '!/^[0-9]*: ?lo|link\/ether/ {print $2" "$4}' 
```

或者，如果您不想要网络：

```
ip -o addr | awk '!/^[0-9]*: ?lo|link\/ether/ {gsub("/", " "); print $2" "$4}' 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-21T03:40:34.393

没有必要`grep`。这是一种使用方法`awk`：

仅列出地址：

```
ifconfig | awk -F "[: ]+" '/inet addr:/ { if ($4 != "127.0.0.1") print $4 }' 
```

列出设备和地址：

```
ifconfig | awk -v RS="\n\n" '{ for (i=1; i<=NF; i++) if ($i == "inet" && $(i+1) ~ /^addr:/) address = substr($(i+1), 6); if (address != "127.0.0.1") printf "%s\t%s\n", $1, address }' 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-12-11T07:01:57.077

只需使用该标志[`hostname`](https://linux.die.net/man/1/hostname)，您就可以获得所有 IP 地址的列表。`-I`

IE

```
$ hostname --all-ip-addresses || hostname -I
10.10.85.100 10.20.85.100 10.30.85.100 
```

然而

```
$ hostname --ip-address || hostname -i
::1%1 127.0.0.1 
```

*Centos7 (k3.10.0)*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-09T19:23:40.783

这是一个类似的脚本，用于我测试过的获取 IP 地址范围的内容，但速度很慢 - 有人可能会给出提示，如何加速？（这里的 ip-range 是获取所有线路的示例，似乎在温哥华和韩国之间）：

> #!/bin/bash
> 
> for ip in {209..210}.{125..206}.{5..231}.{65..72} # 209.126.230.71 和 210.205.6.66 之间的任何 ip
> 
> 做
> 
> printf ' === %s ===\n' "$ip"
> 
> whois "$ip" >> /home/$user/test001.txt
> 
> 完毕

如果这里太琐碎或有错误，只需回答或评论。

这个脚本将持续到完成大约 5 到 8 个小时。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-12-18T23:46:42.487

这只是对先前几个答案和评论的提炼。包括样本输出。

要列出 IP：

**使用`ip`：**

（仅限于 IPv4 和全球）

```
$ /sbin/ip -4 -o addr show scope global | awk '{gsub(/\/.*/,"",$4); print $4}'
192.168.82.134
138.225.11.92
138.225.11.2 
```

**使用`ifconfig`：**

（不包括 127.0.0.1）

```
$ /sbin/ifconfig | awk -F "[: ]+" '/inet addr:/ { if ($4 != "127.0.0.1") print $4 }'
192.168.82.134
138.225.11.92
138.225.11.2 
```

要将 IP 映射到主机名，请参阅[此答案](https://stackoverflow.com/a/27556861/832230)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-21T03:36:55.560

使用 grep -v 忽略 127.0.0.1

```
ifconfig | grep 'inet addr:' | awk {'print $2'} | grep -v '127.0.0.1' 
```

使用 sed 编辑掉“地址：”

```
ifconfig | grep 'inet addr:' | awk {'print $2'}  | grep -v '127.0.0.1' | sed -e 's/addr://' 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-21T03:37:12.420

`ifconfig | grep 'inet addr:' | awk {'print $2'} | awk 'BEGIN{FS=":"}{print $2}' | grep -v '127.0.0.1'`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-03-31T08:02:19.253

这是一个非常棘手的解决方案，但它有效：

`ip a | awk ' !/[0-9]+\: lo/ && /^[0-9]\:/ || /inet / && !/127\.0\.0\.1/ {print $2}'`

输出：

`eth0: 192.168.0.1/24`

更好的是：

`ip a | awk ' !/[0-9]+\: lo/ && /^[0-9]\:/ || /inet / && !/127\.0\.0\.1/ {print $2}' | perl -i -pe "s/:\n/: /g;" -pe "s/\/[\d]+$//"`

输出：

`eth0: 192.168.0.1`

我没有可以检查它的具有多个非环回接口的机器，请随时发布您的发现。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-03-31T08:09:45.227

如果它只是你想删除的“地址：”这个词，我会使用`sed`而不是`awk`喜欢

```
ifconfig | grep 'inet addr:' | awk {'print $2'}| grep -v 127.0.0.1 | sed -e 's/addr://' 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-10-01T19:29:06.667

看到人们使用 sed 和 awk 而不是 perl，我总是很惊讶。

但首先，将 grep 和 awk 与一个额外选项一起使用，请随意：

```
ifconfig | grep 'inet addr:' | awk {'print $2'} | awk -F: {'print $2'} | grep -v '127.0.0.1' 
```

用 perl 替换 awks：

```
ifconfig | grep 'inet addr:' | perl -F\\s\|: -ane 'print "$F[2]\n"' | grep -v '127.0.0.1' 
```

替换同一 perl 脚本中的 grep：

```
ifconfig | perl -F\\s\|: -ane 'next if !/^inet addr:/ or /127\.0\.0\.1/; print "$F[2]\n"' 
```

最后只是使用 perl 正则表达式的强大功能：

```
ifconfig | perl -ne 'next if !/inet addr:(?<ip>[0-9.]+)/ or $+{ip} == "127.0.0.1"; print "$+{ip}\n"' 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-05-19T11:19:20.650

我想向您介绍一个名为[OSQuery](https://github.com/facebook/osquery/)的 Facebook 命令行工具，它可以帮助您通过进行类似 SQL 的查询来获取系统信息。例如，对于您的情况，您应该输入；

```
osquery> select * from interface_addresses; 
```

哪个会输出类似的东西；

```
interface = wlan0
       address = 192.168.0.101
          mask = 255.255.255.0
     broadcast = 192.168.0.255
point_to_point = 
```

我发现它更加整洁和方便。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2012-09-21T03:36:51.587

```
ifconfig | grep 'inet addr:' | awk {'print $2'} | cut -d ":" -f 2 
```

# jquery - 如何从元素中删除所有未命名为“消息”的类？

> ID：12523873
> 
> 赞同：0
> 
> 时间：2012-09-21T03:34:07.967
> 
> 标签：jquery

我有以下内容：

```
<div id="abc">
</div> 
```

在该 div 内只能有以下内容之一：

```
<p class="message">
<p class="message error"></p>
<p class="message warning"></p>
<p class="message success"></p>
<p class="message loading"></p> 
```

`<p>`有没有一种方法可以让我只从不是“消息”的元素中找到并删除类。我意识到我可以删除所有内容，然后使用 .removeClass() 添加我需要的内容，但这对我不起作用，因为在我之前添加了消息类之后，我做了一些 CSS 更改，如果我删除所有内容然后添加，这些将丢失再次是消息类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T03:36:11.710

只需将类设置为`"message"`. 它不会比简单地*做*更简单或更有意义。无需在此处添加或删除或过滤或以其他方式操作类。

```
$('#abc .message').attr("class", "message"); 
```

这似乎也符合您的标准，因为它不会“全部删除”，它只是*将*类设置为`"message"`. `message`在任何时候都不会从元素中删除该类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T03:40:08.587

你可以这样做：

```
$('.message').removeClass().addClass('message'); 
```

您注意到您已经考虑过这种方法，但认为以前的 CSS 操作将被删除，但您错了 - 使用 javascript 完成的 CSS 操作直接应用于元素（通过`style`属性/属性），因此它们不会被删除.

此外，由于只有四个其他类可以附加（在您的示例中），您总是可以这样做：

```
$('.message').removeClass('error warning success loading'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T03:42:47.240

如果您知道要删除的类名，可以试试这个

```
$('p').removeClass('error warning success loading') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T03:53:22.627

该`.removeClass()`方法可以采用一个回调函数，该函数接收当前类列表作为参数，并且应该返回要删除的类，因此您可以对以下内容进行一些变体：

```
var classToKeep = "message";    
$("#abc p").removeClass(function(i,c) {
    return c.replace(new RegExp("\\b" + classToKeep + "\\b"), "");
}); 
```

我认为 meagar 和 ahren 的答案提供了更好的解决方案，但是由于您特别询问了如何删除除一个之外的所有类...

# python - 获取字典中最大键的值（python）

> ID：12523876
> 
> 赞同：2
> 
> 时间：2012-09-21T03:34:22.250
> 
> 标签：python, dictionary

我只在这里找到了如何获取最大值的键：

```
max(d, key=d.get()) 
```

但我需要搜索最大键并返回该键的值。

谢谢，

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-21T03:35:45.323

获取最大密钥

```
max(d) 
```

对于值，只需在字典中查找即可

```
d[max(d)] 
```

注意：您也可以使用`max(d.keys())`，但它会慢一些，因为它需要构建一个临时列表

```
$ python -m timeit -s 'd={x:str(x) for x in range(10000)}' 'max(d)'
1000 loops, best of 3: 377 usec per loop
$ python -m timeit -s 'd={x:str(x) for x in range(10000)}' 'max(d.keys())'
1000 loops, best of 3: 476 usec per loop 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T03:36:50.207

您可以只使用`max(d.keys())`或等效地简单地使用`max(d)`（这是更好的选择）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-12T18:20:45.233

max(d.values()) 将给出字典 d 中的最大值

# javascript - HTML如何自动创建/以编程方式创建div？

> ID：12523881
> 
> 赞同：1
> 
> 时间：2012-09-21T03:34:52.350
> 
> 标签：javascript, html

我有一个像这样的 4x3 div 网格框：

```
 <div id="MainDiv" style="border:1px solid black; width:122px; height:160px;">
        <div id="Column1" style="float:left">
            <div id="sq1" style="width:40px; height:40px;">
            </div>
            <div id="sq2" style="width:40px; height:40px;">
            </div>
            <div id="sq3" style="width:40px; height:40px;">
            </div>
            <div id="sq4" style="width:40px; height:40px;">
            </div>
        </div>
        <div id="Column2" style="float:left">
            <div id="sq5" style="width:40px; height:40px;">
            </div>
            <div id="sq6" style="width:40px; height:40px;">
            </div>
            <div id="sq7" style="width:40px; height:40px;">
            </div>
            <div id="sq8" style="width:40px; height:40px;">
            </div>
        </div>
        <div id="Column3" style="float:left">
            <div id="sq9" style="width:40px; height:40px;">
            </div>
            <div id="sq10" style="width:40px; height:40px;">
            </div>
            <div id="sq11" style="width:40px; height:40px;">
            </div>
            <div id="sq12" style="width:40px; height:40px;">
            </div>
        </div> 
```

如何只编写几行代码来自动化整个过程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T04:04:08.023

您可以使用 java 脚本来迭代和动态创建元素。

此代码有效。||使用元素||

```
<script type="text/javascript">
var my_div = null;
var mainDiv = null;
var column = null;
var sq = null;
function addElement()
{
  // create a new div element
  // and give it some content
  mainDiv = document.createElement("div");
  mainDiv.setAttribute('id', 'MainDiv');  
  mainDiv.setAttribute('style', 'border:1px solid black; width:122px; height:160px;');

  var i=0,id;
  var k= 1;
  for(j=0;j<3;j++) {
      column = document.createElement("div");
      column.setAttribute('id', 'Column' + (j+1));  
      column.setAttribute('style', 'float:left');

      for(i=0; i<4; i++) {
          sq = document.createElement("div");
          sq.setAttribute('id', "sq" + k);  
          sq.setAttribute('style', 'width:40px; height:40px;');
          k++;

          column.appendChild(sq);
      }

      mainDiv.appendChild(column);
  }
  // add the newly created element and it's content into the DOM
  my_div = document.getElementById("org_div1");
  document.body.insertBefore(mainDiv, my_div);
}

</script>

<body onload="addElement()">
<div id='org_div1'> The text above has been created dynamically.</div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T04:03:17.623

jsfiddle在这里：

[http://jsfiddle.net/UnMJq/1/](http://jsfiddle.net/UnMJq/1/)

那是你要的吗？

# javascript - 为什么这个写出 Google 广告的 Javascript 不能在 iPhone 上正确显示？

> ID：12523885
> 
> 赞同：0
> 
> 时间：2012-09-21T03:35:21.407
> 
> 标签：javascript, iphone, cordova

我有这个 Javacsript 代码，它检查是否有一个名为“google-ad”的 DIV，如果有，它会写入显示 Google Ad 的必要代码。

这在 Firefox、Chrome、Mac 上的 Safari 和 Android 等浏览器中效果很好。

但是，当我将此代码与[Adob​​e 的 Phonegap Build](https://build.phonegap.com/)捆绑在一起并将其部署到 iPhone 时，它​​的行为很奇怪。它会启动一个仅显示 Google 广告的浏览器窗口。为了继续使用我的应用程序，每次更改页面并加载新的 Google 广告时，我都必须关闭浏览器窗口才能返回应用程序。

为什么这段代码会在 iPhone 上的 Phonegap 应用程序之外启动浏览器窗口？

```
if(document.getElementById("google-ad")
    && document.getElementById("google-ad") !== null
    && document.getElementById("google-ad") !== "undefined")
    {

    if(userStatus.status == 0)
    {
        document.getElementById("centre").style.padding = "137px 0 12px 0";
        document.getElementById("header-container").style.margin = "-138px 0 0 0";
        document.getElementById("header-container").style.height = "132px";
        document.getElementById("header-username").style.top = "52px";

        document.getElementById("google-ad").style.height = "50px";
        document.getElementById("google-ad").style.width = "320px";
        document.getElementById("google-ad").style.backgroundColor = "#f0ebff";
        document.getElementById("google-ad").style.display = "block";

        window["google_ad_client"] = 'ca-pub-0000000000000000';
        window["google_ad_slot"]  = "00000000";
        window["google_ad_width"]  = 320;
        window["google_ad_height"]  = 50;

        window.adcontainer = document.getElementById('google-ad');
        window.adhtml = '';

        function mywrite(html)
        {
            adhtml += html;
            adcontainer.innerHTML = adhtml;
        };

        document.write_ = document.write;
        document.write = mywrite;

        script = document.createElement('script');
        script.src='http://pagead2.googlesyndication.com/pagead/show_ads.js';
        script.type='text/javascript';
        document.body.appendChild(script);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T20:57:22.407

您面临的问题是因为 google adsens 正在使用 iframe，请参见 show_ads.js

```
e=["<iframe"],d;for(d in a)a.hasOwnProperty(d)&&ka(e,d+"="+a[d]);e.push('style="left:0;position:absolute;top:0;"') 
```

当在 phonegap（通常是 webview）中发生这种情况时，它将打开新页面来显示它。有一些方法可以扭转局面，但我建议的最好方法是使用谷歌官方 adsense [sdk](https://developers.google.com/mobile-ads-sdk/docs/)进行 moile：

```
https://developers.google.com/mobile-ads-sdk/docs/ 
```

它是原生的，但您可以使用简单的插件轻松地将其连接到您的 html 应用程序（如果您愿意，我可以帮助您）

我认为您现在尝试做的事情会导致您的应用被苹果拒绝，因此请使用谷歌官方 sdk。

# ios - 如何在 Xcode 4.5 中添加旧版本的 iOS SDK

> ID：12523888
> 
> 赞同：37
> 
> 时间：2012-09-21T03:36:11.167
> 
> 标签：ios, xcode, sdk

我在这里复制了 iOS 5.1 SDK：

> Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs

但是，我仍然无法在 Xcode 中选择基本 SDK。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-09-21T03:46:21.937

需要将iPhoneOS5.1.sdk复制到该目录下

```
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk 
```

和 iPhoneSimulator5.1.sdk 到

```
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk 
```

（您需要重新启动 Xcode 才能在 Base SDK 构建选项中选择 SDK。）

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2012-10-25T03:27:22.233

以上都不适用于我的 10.8 xcode 4.5.1。上面给出的大多数路径都找不到。

这是我的解决方案说明。

1.  [在https://developer.apple.com/downloads/](https://developer.apple.com/downloads/)下载 xcode_4.4.1_6938145.dmg

2.  加载 dmg 文件然后转到 Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/ 你会发现 iPhoneOS5.1.sdk （这就是我想要的）。

3.  将 iPhoneOS5.1.sdk 文件夹复制到您的 Xcode 文件夹 /Applications/Xcode/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs

4.  重启 Xcode

5.  打开 Xcode project setting->build settings->base SDK，然后你会看到 iOS 5.1 选项。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-29T16:44:07.630

从终端运行此命令，然后重新启动 XCode：

```
cp -r /Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.0.sdk /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/ 
```

请注意，将“iPhoneOS5.0.sdk”替换为您有兴趣复制的任何 SDK 的名称。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-04T21:45:02.733

@benvolioT 答案是正确的，但您需要许可：

```
sudo cp -r /Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.0.sdk/
Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-25T14:08:02.267

操作系统和模拟器的旧 SDK 可以使用 finder 从这些位置获得。

操作系统

/Developer-old/Platforms/iPhoneOS.platform/Developer/SDKs

对于模拟器

/Developer-old/Platforms/iPhoneSimulator.platform/Developer/SDKs

开发人员旧，您会在设备卷路径中找到它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-11T13:36:31.693

Akhildas 的解决方案对我有用。我能够使用 XCode 4.5.1 针对 5.1 SDK 进行构建。一个警告：

如果您从其他 Apple ID 下载的 XCode 版本中删除 SDK，App Store 将显示您已更新到 4.5.1（即使您已经拥有它）。当您按下更新按钮时，它会告诉您使用另一个 Apple ID 登录。

奇怪，不知道5.1 SDK中的账号信息埋在哪里？

此外，当我将基本 SDK 设置回 iOS 6 时，您似乎必须重新启动 XCode 才能识别该框架。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-05-22T18:01:47.920

**xcode.app** > 右键单击​​ > 显示包内容

它将打开 xcode 包内容。

转到目录路径 -

内容/开发者/平台/iPhoneOS.platform/Developer/SDKs

现在您可以看到带有**ios sdk version**的文件夹名称。例如：iPhoneOS( **sdk-version** ).sdk

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-10T14:46:40.950

最佳解决方案是转到 XCode Preferences 并从那里安装旧版本的 iOS 模拟器/SDK，如下所述：[https ://apple.stackexchange.com/questions/47323/installing-xcode-with-ios-4 -3-设备模拟器](https://apple.stackexchange.com/questions/47323/installing-xcode-with-ios-4-3-device-simulator)

希望这可以帮助 ：）

# html - 在 html 中使用对象标签进行内联 pdf 显示

> ID：12523890
> 
> 赞同：3
> 
> 时间：2012-09-21T03:36:19.387
> 
> 标签：html, object, tags, inline

计划使用 Object 标签在 HTML 文件中内联显示 pdf 文件。这是推荐的吗？或者这种方法有什么陷阱吗？任何人都可以指出例如浏览器兼容性、安全性

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T03:51:00.130

看起来它已经被很好地支持了一段时间：http: [//joliclic.free.fr/html/object-tag/en/object-application.html#pdf](http://joliclic.free.fr/html/object-tag/en/object-application.html#pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T05:44:24.980

几乎没有任何具体的建议，无论是在已发布的规范中。技术问题包括：

1.  并非每台计算机都有 PDF 查看器（以使浏览器能够启动它的方式）。
2.  很多时候，当网络浏览器尝试打开 PDF 文件（为它启动查看器）时，人们会报告问题，即使在 PDF 查看器可以打开文件的情况下，如果它首先保存在本地磁盘上。
3.  PDF 文档，尤其是嵌入 HTML 文档时，在小型显示器中效果不佳。（尝试在智能手机上打开一个。）
4.  通常，PDF 比 HTML 格式更难访问。
5.  嵌入在 HTML 文档中的 PDF 并不常见，这意味着即使他们熟悉 PDF 查看器，人们也可能会遇到可用性问题。这取决于浏览器如何启动 PDF 查看器来显示文档。

# jenkins - 在 Jenkins nant 构建步骤中无法识别从 NAnt 脚本检索的环境变量

> ID：12523892
> 
> 赞同：1
> 
> 时间：2012-09-21T03:36:37.227
> 
> 标签：jenkins, environment-variables

在我的 nant 脚本中，我以这种方式检索我的环境变量：

```
property name="ProjectSolutionPath" value="${environment::get-variable('MAIN_PROJECT_PATH')}" 
```

但是当我使用 nant 作为构建步骤通过 jenkins 运行它时，我遇到了这样的错误。

```
Expression: ${environment::get-variable('MAIN_PROJECT_PATH')}
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    Environment variable "MAIN_PROJECT_PATH" does not exist. 
```

有这个配置吗？这样詹金斯会识别我的 nant 脚本访问的环境变量吗？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T18:49:08.217

确保在“系统变量”中定义此环境变量。

由于 Jenkins 进程通常以“NT AUTHORITY\SYSTEM”用户身份运行，因此与您的用户帐户关联的环境变量不会附加到进程的 env-vars 中。

如果您不想使用 sys-env-vars，我已经看到了有关[如何将 env-vars 添加到 Jenkins 构建中的](https://stackoverflow.com/questions/10625259/how-to-set-environment-variables-in-jenkins)答案（尽管我不喜欢生成 cmd 行进程）。

# iphone - 如何使用开始和停止 UIButtons 连续跟踪位置坐标并查找距离

> ID：12523901
> 
> 赞同：1
> 
> 时间：2012-09-21T03:37:22.273
> 
> 标签：iphone, objective-c, cllocationmanager, cllocation, cllocationdistance

我是目标 c 的新手。我的程序是当按下开始按钮时，位置坐标应该开始跟踪，并且应该同时跟踪距离，当按下停止按钮时，跟踪应该停止并且应该显示距离。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T03:55:16.410

假设您已经添加了必要的框架和委托，创建了对象**CLLocationManager *locationManager;** 并完成了所有的初始化

当您单击**开始按钮时，请在您应该创建的****button_clicked**方法中调用它

```
[self.locationManager startUpdatingLocation]; 
```

当您单击**停止按钮**时，请调用此

```
[self.locationManager stopUpdatingLocation]; 
```

当您的位置更新时，将自动调用此委托方法，您可以在其中访问新的位置坐标

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T03:56:51.343

当您在确认委托后将委托设置为 self 时，CLLocationManagerDelegate 有助于实现此目的。

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation 
```

每次更改您的位置时都会调用此方法作为回调函数。

这是一个小教程，可能会给你一步一步的指导： [http ://www.mobisoftinfotech.com/blog/iphone/1474/](http://www.mobisoftinfotech.com/blog/iphone/1474/)

我希望它对你有帮助。干杯！！

# ruby-on-rails - FactoryGirl + Shoulda NoMethodError：未定义的方法`featured='

> ID：12523902
> 
> 赞同：1
> 
> 时间：2012-09-21T03:37:28.450
> 
> 标签：ruby-on-rails, rspec, factory-bot, shoulda

我有以下测试失败

```
2) Dvd when is featured 
   Failure/Error: subject { Factory(:featured) }
   NoMethodError:
     undefined method `featured=' for #<Dvd:0x007f9cdb50e400>
   # ./spec/models/dvd_spec.rb:25:in `block (3 levels) in <top (required)>'
   # ./spec/models/dvd_spec.rb:27:in `block (3 levels) in <top (required)>' 
```

规格文件如下

```
describe "when is featured" do 
  subject { Factory(:featured) }

  it { should validate_presence_of(:featured) }  
 end 
```

和工厂

```
# This will guess the Dvd class
FactoryGirl.define do
  factory :dvd do
    title "DVD Test Title"
  end

  factory :featured, class: Dvd do
    title "DVD Title Featured"
    featured true
  end
end 
```

DVD 型号很简单

```
class Dvd < ActiveRecord::Base

  attr_accessible :title, :featured

end 
```

这是架构

```
create_table "dvds", :force => true do |t|
  ...
  t.boolean  "explicit",           :default => false
  t.boolean  "featured",           :default => false
end 
```

知道是什么导致测试失败吗？

# gwt - 哪些选项可用于加速 GWT 编译器

> ID：12523917
> 
> 赞同：0
> 
> 时间：2012-09-21T03:39:57.177
> 
> 标签：gwt

> **可能重复：**
> [如何加快 gwt 编译器的速度？](https://stackoverflow.com/questions/1011863/how-do-i-speed-up-the-gwt-compiler)

我在一个调试模式没有用的 GWT 项目上工作，这要归功于解析来自 REST 服务的 JSON 响应需要花费大量时间（我们正在谈论 5 分钟来解析一个调试模式下的平均响应，而不是编译时一两秒）。

但是，编译 GWT 项目所花费的时间也变得无法接受。那么可以做些什么来加快 GWT 编译过程呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T03:39:57.177

[如何加快 gwt 编译器的速度？](https://stackoverflow.com/questions/1011863/how-do-i-speed-up-the-gwt-compiler)有很多加快 GWT 编译过程的技巧，所以我想我会分享一些我的结果。

*   默认选项：4:29.868s
*   [用户代理“chrome”](https://developers.google.com/web-toolkit/doc/latest/DevGuideOrganizingProjects#DevGuideModuleXml)：2:32.370s
*   [崩溃所有属性](http://code.google.com/p/google-web-toolkit/wiki/SoftPermutations)：2：47.146s
*   [草稿编译](https://developers.google.com/web-toolkit/doc/2.0/ReleaseNotes_2_0#NewFeaturesDraftCompile)和用户代理“chrome”：2：10.726s
*   [草稿编译](https://developers.google.com/web-toolkit/doc/2.0/ReleaseNotes_2_0#NewFeaturesDraftCompile)和折叠所有属性：2:24.548s

**笔记**

设置用户代理需要

```
<inherits name='com.google.gwt.user.UserAgent'/> 
```

和

```
<set-property name="user.agent" value="safari"/> 
```

在whatever.gwt.xml 模块文件中设置。否则你会得到错误

```
[ERROR] Property 'user.agent' not found 
```

-draftCompile 选项需要在 Eclipse 中设置为 JVM 变量

```
-Dgwt.draftCompile=true 
```

![在此处输入图像描述](../Images/aa72e92583623950cb03ff8dd47c0d0d.png)

# javascript - javascript facebook like 按钮不起作用

> ID：12523923
> 
> 赞同：0
> 
> 时间：2012-09-21T03:40:37.927
> 
> 标签：javascript, facebook

在我的网站上，我有一个 facebook like 按钮（喜欢我的 facebook 页面）。直到今天它一直运行良好。当有人点赞按钮时，它喜欢该页面，然后立即切换到以前的不喜欢该页面的模式。在我的主页上，我收到此错误

```
There was an error liking the page. If you are the page owner, please try running your page through the linter on the Facebook devsite (https://developers.facebook.com/tools/lint/) and fixing any errors. 
```

我试图扫描我的页面，但没有任何错误或警告。我还尝试在这里制作一个新的点赞按钮，`https://developers.facebook.com/docs/reference/plugins/like/` 但是对于我尝试过的每个页面（甚至不是我的页面），例如（`http://www.facebook.com/americanexpress`）我仍然遇到同样的问题（您可以在 facebook 上看到问题，而无需将代码粘贴到您的页）。facebook是否更改了任何代码或其他内容？我是否需要更改任何代码，例如我的 java 脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T04:02:13.033

试试这个：

```
<div class="fb-like" data-href="https://www.facebook.com/ILoveItWhenGirlsLookAtTheirOwnBoobs" data-send="true" data-layout="button_count" data-width="450" data-show-faces="true"></div> 
```

它在我的博客上正常工作。你可以在这里查看我的博客：

```
http://mostvisitedbloginasia.blogspot.com/ 
```

对于您的页面，只需更改页面的用户名。看起来像：

```
<div class="fb-like" data-href="https://www.facebook.com/YOUR-USER-NAME" data-send="true" data-layout="button_count" data-width="450" data-show-faces="true"></div> 
```

它将正常工作！

# c# - 如何使用 WebBrowser 获取 HttpOnly 的 Cookie？

> ID：12523926
> 
> 赞同：1
> 
> 时间：2012-09-21T03:41:17.723
> 
> 标签：c#, cookies, browser, httponly

我想通过 WebBrowser 登录 cookie 并最终将 cookie 发送到`HttpWebRequest`. 他们`webBrowser1.Document.Cookie`得到的比`HttpOnly`那个饼干少。方式WebBrowser HttpOnly 一个cookie？

开发语言为 C#

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:10:58.000

如果您要问如何在浏览器上访问 HttpOnly cookie，我认为您不能将其作为服务器的更多机制，而 HttpOnly 的全部意义在于它可以阻止客户端篡改 cookie。

所以你可以在你的请求中设置它们，但我认为你不能通过浏览器访问它们，除非你可以访问可能包含它的底层响应。

# codeigniter - 使用 Codeigniter 构建前端论坛

> ID：12523928
> 
> 赞同：0
> 
> 时间：2012-09-21T03:41:46.817
> 
> 标签：codeigniter, activerecord, frontend

我有 3 张桌子

```
|forum_id|name_forum|
|   1    |forum 1   |

|thread_id|name_thread|forum_id|
|    1    |Thread 1   |   1    |

|post_id|name_post|text|thread_id|
|   1   | post 1  |tttt|   1     | 
```

*   我建立第 1 页以显示 forum_name
*   第 2 页按 forum_id 显示 name_thread 组（我可以按 FORUM_ID 插入 NAME_THREAD 组吗？）
*   第 3 页按 thread_id 显示 name_post 和文本组（我可以插入 NAME_POST GROUP_BY THREAD_ID 吗？）

我用codeigniter构建。我可以显示所有这些问题，但我不能插入线程和帖子。

```
class Forum extends CI_Controller{
    private $limit = 10;

    function __construct() {
        parent::__construct();
        //load library helper
        $this->load->library(array('table','form_validation'));
        $this->load->helper(array('form','url'));
        $this->load->model('home_forum_model','',TRUE);
        $this->load->helper('date');
        $this->is_logged_in();
    }

    function index($offset=0,$order_column='forum_id',$order_type='ASC')
    {
        if(empty($offset)) $offset=0;
        if(empty($order_column)) $order_column='forum_id';
        if(empty($order_type)) $order_type='asc';
        //Untuk cek validasi kolom

        //tanggal
        $data['datestring'] ="Tanggal: %d  %M  %Y  ";
        $data['time']=time();
        $data['zona']= timezones('UP7');

        //load data siswa
        $forums = $this->home_forum_model->get_paged_list($this->limit,$offset,$order_column,$order_type)->result();
        //pagination
        $this->load->library('pagination');
        $config['base_url']= site_url('home/forum/index/');
        $config['prev_link']='&ltPrev';
        $config['next_link']='Next&gt';
        $config['first_link']='&lt&ltFirst';
        $config['last_link']='Last&gt&gt';
        $config['total_rows']= $this->home_forum_model->count_all_forum();
        $config['per_page'] = $this->limit;
        $config['uri_segment'] = 4;
        $this->pagination->initialize($config);
        $data['pagination'] = $this->pagination->create_links();

        //table data
        $this->load->library('table');
        $this->table->set_empty('&nbsp');
        $tmpl = array ( 'table_open'  => '<table border="10" style="color:black;align:left" cellpadding="2" cellspacing="2" class="mytable">' );
        $this->table->set_template($tmpl);
        //$new_order = ($order_type == 'asc'?'desc':'asc');

        $this->table->set_heading(
                'Nama Forum');
        //$i=0+$offset;
        foreach($forums as $forum)
        {
            $this->table->add_row(
                    anchor('home/forum/view_thread/'.$forum->forum_id,$forum->nama_forum,array('class'=>'view_thread') )

                    );
            $this->table->add_row($forum->deskripsi);
        }

        $data['table']=$this->table->generate();
        $data['content']='home/tampil_forum';
        $this->load->view('template_home/template',$data);
    }

function view_thread($id)
    {
        //tanggal
        $data['datestring'] ="Tanggal: %d  %M  %Y  ";
        $data['time']=time();
        $data['zona']= timezones('UP7');

        $data['title']='Detail Forum';
        $data['action']=site_url('home/forum/view_thread/');
        $data['link_back']=anchor('home/forum/index/','Lihat Daftar Forum',array('class'=>'back'));

        //ambil detail agenda
        $data['threads']=$this->home_forum_model->get_thread_by_id($id)->result();

        //load agenda
        $data['content']='home/tampil_thread';
        $this->load->view('template_home/template',$data);
    } 
```

这个型号

> 类 Home_forum_model 扩展 CI_Model{ private $primary_key = 'forum_id'; 私人 $table_name = '论坛';
> 
> ```
> function __construct() {
>     parent::__construct();
> }
> 
> function get_paged_list($limit=10,$offset=0,$order_column='',$order_type='asc')
> {
>     if(empty($order_column) || empty($order_type))
>     {
>         $this->db->order_by('forum_id','asc');
>     }else{
>         $this->db->order_by($order_column,$order_type);
>         return $this->db->get('forum',$limit,$offset);
>     }
> }
> function get_forum()
> {
>     return $this->db->get('forum');
> }
> 
> function count_all_forum(){
>     return $this->db->count_all($this->table_name);
> }
> 
> function count_all_thread(){
>     return $this->db->count_all('thread');
> }
> 
> function count_all_post(){
>     return $this->db->count_all('post');
> }
> 
> function get_post_by_id($id)
> {
>     $this->db->select('post.*,post.nama_post as judulpost,post.text as isipost');
>     $this->db->from('post');
>     $this->db->join('thread','post.thread_id=thread.thread_id');
>     $this->db->where('post.thread_id',$id);
>     $this->db->order_by('post.post_id','asc');
>     return $this->db->get();
> }
> 
> function get_thread_by_id($id)
> {
>     $this->db->select('thread.*,thread.title as title,forum.nama_forum as forum');
>     $this->db->from('thread');
>     $this->db->join('forum','thread.forum_id = forum.forum_id');
>     $this->db->where('thread.forum_id',$id);
>     $this->db->order_by('thread.thread_id','desc');
>     return $this->db->get();
> } 
> ```

# ruby-on-rails - 使用 OmniAuth 时如何退出 Facebook？

> ID：12523932
> 
> 赞同：0
> 
> 时间：2012-09-21T03:42:16.647
> 
> 标签：ruby-on-rails, facebook, omniauth

我有一个使用omniauth 的RoR 应用程序。我想允许用户注销，以便他们可以使用不同的 Facebook 用户登录，但无论我做什么，一旦用户登录 FB，它就会让他们保持登录状态。

我试过： [https](https://www.facebook.com/logout.php?next=) ://www.facebook.com/logout.php? next= &access_token=

无济于事。我还尝试了 omniauth-facebook 的 reauth 选项，但这导致用户被带到 FB 而不是我指定的重定向 URL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T22:57:49.143

很简单，将其添加到您的 javascript 初始化代码中：（在 FB.init 之后）

```
FB.logout(function(response) {
        FB.Auth.setAuthResponse(null, 'unknown');
        setTimeout('document.location.reload()',0);
      }); 
```

以及退出按钮：

```
<a href="/" onclick="FB.logout();">Logout</a> 
```

使用方法 [https://www.facebook.com/logout.php?next=&access_token=](https://www.facebook.com/logout.php?next=&access_token=)将使您的用户离开您的页面，因为 facebook 不会再次重定向到您的网站。

我希望这能解决你的问题。

# javascript - 当用户点击其他 div 时，我想模拟错误点击。这是可能的？

> ID：12523935
> 
> 赞同：-1
> 
> 时间：2012-09-21T03:42:49.810
> 
> 标签：javascript, jquery

> **可能重复：**
> [假“点击”以激活 onclick 方法](https://stackoverflow.com/questions/347512/fake-click-to-activate-an-onclick-method)

当用户点击其他 div 时，我想模拟错误点击。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T03:45:56.250

如果“假点击”是指以编程方式调用`onclick`DOM 对象的事件处理程序，那么可以这样做：

```
$("#myDiv").click( function() {
    $("someOtherElement").click();
} ); 
```

第一行将一个新的 onclick 事件处理程序分配给`<div id="myDiv">`. 单击该元素时，它的`<div id="someOtherElement">`行为就好像它也被用户单击了一样。

# java - 从 Glassfish 连接池获取连接并使用它后，我应该立即关闭它吗？

> ID：12523944
> 
> 赞同：0
> 
> 时间：2012-09-21T03:43:44.707
> 
> 标签：java, glassfish-3, connection-pooling

这是我获得联系的方式

```
DataSource ds = (DataSource) ctx.lookup("glassfish_pool_res");
connection = ds.getConnection(); 
```

使用连接后，如下所示：

```
CallableStatement cs = connection.prepareCall(call_statement);
...
cs.execute(); 
```

`cs.close()`我应该这样做`connection.close()`吗？这是关闭连接以避免内存泄漏的正确方法吗？顺便说一句，我正在开发一个 Web 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T03:45:23.137

是的。这是正确的做法。

```
close()  returns connection to connection pool 
```

# javascript - 使用 Javascript 在文本框中的 Onkeypressed 事件上强制数字精度

> ID：12523945
> 
> 赞同：1
> 
> 时间：2012-09-21T03:43:47.080
> 
> 标签：javascript, asp.net, validation

我需要的是在用户输入文本框时强制用户 -

1.  他们最多可以放16个

2.  如果他们按。他们可以在点后添加额外的 2 位数字

所以到目前为止我所做的是

```
<asp:TextBox ID="textbox" runat="server" Width="200" onkeypress="validateCurrencyX(this,7, 2);" >0.00</asp:TextBox> 
```

javascript代码是

```
function validateCurrencyX(sender,prefix, suffix){
var something = document.getElementById('textbox').value;
           var valueArr = something.split('.');

            if (valueArr[1]!= null && valueArr[1].length > suffix-1)
                event.returnValue = false;

            if (valueArr[0].length > prefix-1)
                event.returnValue = false;
    } 
```

无论如何，我的代码存在问题-当我选择整个文本或文本的某些部分并按下某些东西时，它不会改变任何东西

他们有什么普通的方法吗？我对 javascript 和 asp.net 都很陌生，谢谢您的关注

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T03:56:19.033

由于您对 javascript 和 .net 都是新手，因此最好不要尝试重新发明轮子。

如果您愿意使用 jQuery，请查看[NumberFormatter](http://archive.plugins.jquery.com/project/numberformatter)

```
$(".amt").blur(function(){
    $(this).format({format:"#,###,###,###,###,###.00", locale:"us"});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T04:07:29.060

这可以满足您的要求：

```
<asp:TextBox ID="textbox" runat="server" Width="200" oninput="validateCurrencyX(this,7, 2);" onkeydown="validateCurrencyX(this,7, 2);" >0.00</asp:TextBox> 
```

JavaScript：

```
var validateCurrencyX = (function() {
    // Closure for local oldVal variable
    var oldVal = 0;
    return function validateCurrencyX(sender, prefix, suffix) {
        setTimeout(function() {
            // Convert to number
            var val = sender.value * 1,
            // Get decimals
                dec = sender.value.split('.')[1];
            if(
                val != val // NaN
                || val > 16
                || val < 0
                || dec && dec.length > suffix // check number of decimals
            ) {
                // If the new input doesn't fit the criteria, revert to the old input.
                sender.value = oldVal;
            } else {
                if(Math.floor(val) != 0 && sender.value.charAt(0) == '0') {
                    // If it's a number >= 1, remove leading '0's.
                    sender.value = sender.value.replace(/^0+/, '');
                }
                // Value is good. Save it in case we need to revert later.
                oldVal = sender.value;
            }
        }, 0);
    };
})(); 
```

这是一个工作示例：http: [//jsfiddle.net/6HUUT/4/](http://jsfiddle.net/6HUUT/4/)

获得用户友好的实时文本验证器的关键是 (1) 使用**`onkeydown`**/ **`oninput`**not`onkeypress`因为`onkeypress`不会触发粘贴和删除等内容，以及 (2) 使用`setTimeout`with 间隔`0`来检查用户*实际*输入和更改的内容它在文本框中更新后，而不是试图阻止他们从一开始就输入它。同样，这有助于粘贴和删除等操作，以及在开头以外的位置插入字符，通常会让您的生活更轻松。这个想法只是让用户进行更改，然后检查它们以确保它们正常。

请注意，`onkeydown`with`oninput`的使用用于旧版浏览器。`input`对于现代浏览器来说已经足够了，但是旧的浏览器（大约 IE8）不支持它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-21T03:56:10.447

既然您已经说过，这是没有使用javascript的-*他们有什么普通的方法吗？*所以看看这个：

1）*他们可以放的最大数量是 16*：为此，您拥有`maxlength`文本框的属性。设置为**16**

2) 这段代码将限制您的用户在文本框中仅输入小数点后 2 位。

```
//In key press event of your TextBox:
if (e.KeyChar == '.' && (sender as TextBox).Text.IndexOf('.') > -1)
{
    e.Handled = true;
}
if (!char.IsControl(e.KeyChar))
{
    TextBox tt = (TextBox)sender;
    if (tt.Text.IndexOf('.') > -1 && tt.Text.Substring(tt.Text.IndexOf('.')).Length >= 3)
     {
       e.Handled = true;
     }
 } 
```

# facebook - 我网站上奇怪的 facebook like 按钮

> ID：12523947
> 
> 赞同：0
> 
> 时间：2012-09-21T03:43:56.690
> 
> 标签：facebook, facebook-like

在我的网站上，我尝试实现类似按钮，但似乎每当我将按钮指向我的 FB 页面时，该按钮就会在 IE 和 Firefox 上消失（在 Chrome 中运行良好）。但是当我将按钮指向任何其他 FB 页面时，按钮就可以正常工作。真的把我逼疯了。

我的网站：www.avozz.com

指向我的 FB 页面的按钮

```
<fb:like href="http://www.facebook.com/avozz" send="false" layout="button_count" width="90" show_faces="false"></fb:like> 
```

指向其他正常工作的 FB 页面的按钮示例

```
<fb:like href="http://www.facebook.com/PeterJacksonNZ" send="false" layout="button_count" width="90" show_faces="false"></fb:like>

<fb:like href="http://www.facebook.com/ClarifyWearableTextileArt" send="false" layout="button_count" width="90" show_faces="false"></fb:like>

<fb:like href="http://www.facebook.com/Starbucks" send="false" layout="button_count" width="90" show_faces="false"></fb:like> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T05:24:23.143

试图通过使用 url [linter][1] 来解决

[1]： http: [//developers.facebook.com/tools/debug/og/object](http://developers.facebook.com/tools/debug/og/object?q=http://www.avozz.com/) ?q=http://www.avozz.com/并将适当的元标记放在标题上.....

或将按钮放入 iframe

```
<iframe frameborder="0" scrolling="no" style="border:none; overflow:hidden; width:80px; height:30px;" allowtransparency="true" src="http://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.avozz.com%2F&amp;layout=button_count&amp;show_faces=false&amp;width=150&amp;action=like&amp;colorscheme=light"></iframe> 
```

# cocoa - 如何根据内容的大小自动调整 NSTextView 的大小？

> ID：12523949
> 
> 赞同：2
> 
> 时间：2012-09-21T03:44:04.290
> 
> 标签：cocoa, nstextview

我正在实现一个类似 iChat 的应用程序，`NSTextView`用于显示聊天记录。问题是如何`NSTextView`根据其中的字符自动更改宽度。例如，`NSTextView`如果其中只有一个字符，则 的宽度只有一个字符宽度。超过100个字符会自动增加高度`NSTextView`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T04:11:34.653

您可以使用[字符串添加](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSString_AppKitAdditions/Reference/Reference.html#//apple_ref/doc/uid/20000155) `[-NSString boundingRectWithSize:options:attributes:]`来获得一个边界矩形。您可能还想查看[Layout Manager](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/TextLayout/TextLayout.html#//apple_ref/doc/uid/10000158-SW1)。

# actionscript-3 - AS#3 加载 SWF 多个

> ID：12523957
> 
> 赞同：0
> 
> 时间：2012-09-21T03:44:47.097
> 
> 标签：actionscript-3, flash, actionscript

我正在加载同一文件的多个 SWF 示例：

```
 var movies:Array = new Array ("Symbols/00.swf","Symbols/00.swf","Symbols/00.swf"); 
```

我的加载方法工作正常，下面我使用：

```
var perc:int = (event.bytesLoaded / event.bytesTotal) * 100;
Loading.text = "loading " +perc + "%"; 
```

我遇到的问题是，在我从 Movies:Array 下载了一项后，加载文本位于 %100。

之所以会发生这种情况，是因为其余文件已经在捕获中。

**问题是：** 我怎样才能减慢这个加载文本来确定所有项目是否都准备好了。基本上问题是加载文本说完成但我所有其他文件还没有准备好......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T04:47:14.443

首先，您为什么要多次加载一个 SWF？您可以使用以下技巧：[如何显示加载的 SWF 的多个实例](https://stackoverflow.com/questions/6251021/actionscript-adding-multiple-instances-of-the-same-swf-file-to-the-stage)。其次，您正在使用 Loader 对象一次加载一个 SWF，其进度将与该单个 SWF 相关。因此，您首先加载所有唯一的 SWF 并将其 Loader 引用存储在某处，以便在需要时实例化更多的 SWF，其次，您将从进度事件侦听器收集总百分比。后者稍微复杂一些，因为您很可能对所有加载程序使用单个进度事件侦听器。例如，您可以执行以下操作：

```
public static var ALL_LOADERS:Object;
public static var PROGRESS_DATA:Object; // we need associative arrays here
public static var BYTES_LOADED:int=0;
public static var TOTAL_BYTES:int=0;

public static function RegisterLoader(path:String,loader:Loader):void {
    if (!ALL_LOADERS) ALL_LOADERS=new Object();
    if (!PROGRESS_DATA) PROGRESS_DATA=new Object();
    ALL_LOADERS[path]=loader;
    PROGRESS_DATA[loader]=new Object();
    PROGRESS_DATA[loader].bytesLoaded=0;
    PROGRESS_DATA[loader].bytesTotal=-1;
}

// now a listener
public static function progressListener(e:Event):void {
    var l:Loader=e.target as Loader;
    if (!l) return; // that wasn't a loader that sent the event. Uh oh
    var plo:Object=PROGRESS_DATA[l];
    if (!plo) return; // unregistered loader. Ignore
    if (plo.bytesTotal<0) {
        plo.bytesTotal=e.bytesTotal;
        TOTAL_BYTES+=e.bytesTotal;
    }
    var pbl:int=plo.bytesLoaded;
    plo.bytesLoaded=e.bytesLoaded;
    LOADED_BYTES+=(e.bytesLoaded-pbl);
    var perc:int = (LOADED_BYTES / TOTAL_BYTES) * 100;
    Loading.text = "loading " +perc + "%";
} 
```

请注意，由于加载过程被设计为只运行一次，所有初始化都进行一次，并且此代码没有错误处理 - 但是您可以自己编写。

# ruby-on-rails - 不同页面上的条件验证 - Rails

> ID：12523958
> 
> 赞同：-1
> 
> 时间：2012-09-21T03:45:00.643
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

一个快速的 Rails 问题，我希望得到你们的帮助。一直在寻找答案，对于我认为的解决方案来说，那里的一切似乎有点复杂。我有两个页面使用模型（用户）和每个页面上的表单，在保存时更新不同的属性。

*   一个人更新他们的密码详细信息（验证是否存在密码）

*   一个人更新了他们的测验答案（验证最多 300 个字符）

如何进行条件验证，以便在我提交表单时，验证出现在各自的页面上？我需要两个单独的动作吗？如何将这些操作链接到表单提交？

这是通用更新操作和表单：

**用户控制器**

```
def update
  @user = User.find(params[:id])
  if @user.update_attributes(params[:user])
    flash[:success] = "All is updated"
    sign_in @user
    redirect_to @user
  else
    render 'edit'
  end
end 
```

**形式**

```
<p><h3>Linked-In Optimization</h3></p>
<%= form_for(@user) do |form| %>
  <p><%= form.label :linkedin, 'Please copy and paste your Linked-In profile here (575  chars max.)' %></p>
  <p><%= form.text_area :linkedin %></p>
  <%= form.submit 'Save' %>
  <img class="linkedin" src="/linkedin.png">
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T04:37:56.063

为了简化事情，使用两个单独的控制器动作。

要将您的表单提交链接到新路径，请执行此操作

```
<%= form_for(@user, :url => update_password_user_path(@user)) do |f| %> 
```

如果您在模型中添加了必要的验证，错误消息将出现在您各自的表单上。

# java - 为什么java允许私有String[][] var[]

> ID：12523961
> 
> 赞同：3
> 
> 时间：2012-09-21T03:45:08.740
> 
> 标签：java, arrays, variables

```
private String[][] var[] 
```

此代码编译。但是他们不应该在类型或变量上创建数组吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T03:49:58.370

代码与此相同：

```
private String[][][] var; 
```

所有这些形式都是等价的：

```
private String[][][] var;
private String[][] var[];
private String[] var[][];
private String var[][][]; 
```

它们的意思都是一样的：一个字符串的三维数组。`String var[][][]`语法可能看起来有点奇怪，但这就像让 C/C++ 程序员在 Java 中感到宾至如归（这就是您通常在 C/C++ 中声明数组类型的方式）。

在 Java 中，`String[][][] var`语法是首选的，因为它清楚地表明了is的*类型*，在其他语法及其不同的变体中，类型信息在变量之前和之后被分割——尽管从编译器的角度来看它是完全合法的，但很难读。`var``String[][][]`

更奇怪的是，所有这些方法声明都是合法且等价的：

```
String[][][] m()  {return null;}
String[][] m() [] {return null;}
String[] m() [][] {return null;}
String m() [][][] {return null;} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-04-23T19:50:51.850

根据[JLS 10.2](https://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html)关于`Array`'s 的部分：

> 可以作为类型的`[]`一部分出现在声明的开头，或者作为特定变量的声明符的一部分，**或者两者兼而有之**。
> 
> 例如：
> 
> `byte[] rowvector, colvector, matrix[];` 这个声明等价于：
> 
> `byte rowvector[], colvector[], matrix[][];`

（强调我的）

特别注意最后一个例子，它说`byte[] matrix[]`相当于`byte matrix[][]`.

所以不，这不是一个错误，只是一个设计选择。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-21T04:11:51.880

[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/index.html)说

> “声明符中允许使用括号作为对 C 和 C++ 传统的致敬。但是，变量声明的一般规则允许括号出现在类型和声明符中，以便局部变量声明”

在[JLS 10.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html#jls-10.2)中。在我看来，“类型”中的方括号 ( `[]`) 比声明变量中的数组更有意义。但是为了确认 C/C++ 的传统，它是按照 JLS 中的文本所说的那样完成的。另一件事是，将方括号与类型和变量混合使用会使读者/程序员感到困惑。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T04:04:05.590

奥斯卡的回答很好。如果`String[][] var[]`用英文阅读，会说“var 是二维字符串数组的数组”，因此“var 是三维字符串数组”

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-21T06:54:25.697

这是一个向您展示`[]`位置何时产生影响的示例。

```
String[] arr, arr2[]; 
```

是的`arr`数组，`String`而`arr2`是 的数组的数组`String`。

如果您想在同一行上声明不同的数组，这可能是有益的。

在您的示例中，它可能是`var2`在同一行上声明的另一个：

```
private String[][] var[], var2; 
```

# mongodb - 使用 Spring-Data 和 mongodb，自然与人工 id？

> ID：12523963
> 
> 赞同：1
> 
> 时间：2012-09-21T03:45:40.353
> 
> 标签：mongodb, primary-key, spring-data

我正在使用 Spring-data 将 pojos 映射到 mongo json 文档。

mongo Object Id[参考](http://www.mongodb.org/display/DOCS/Object+IDs)说“如果您的文档具有不可变的自然主键，我们建议您在 _id 中使用它而不是自动生成的 ids。” 我的问题是，如果我的文档有一个自然主键，但它是对象属性的某种组合，我应该将它们组合起来创建自然主键吗？

假设这两个值都不能改变，并且当连接在一起时，结果保证是唯一的。请注意，无论您为 id 声明什么类型，Spring 都会将其转换为 ObjectId（除非他们没有该类型的转换器，否则他们会将其转换为 String）。

这是一个例子：

```
@Document
public Class HomeworkAssignment {

    @Id
    private String id;

    private final String yyyymmdd;

    private final String uniqueStudentName;

    private double homeworkGrade; 

    public HomeworkAssignment(String yyyymmdd, String uniqueStudentName) {
        this.yyyymmdd = yyyymmdd;
        this.uniqueStudentName = uniqueStudentName;
        // can either set the 'id' here, or let Spring give me an artificial one.
    }

    // setter provided for the homeworkGrade
} 
```

保证每个学生每天不超过一份家庭作业。yyyymmdd 和 uniqueStudentName 都作为字符串提供给我。

例如，“20120601bobsmith”唯一标识了 Bob Smith 2012 年 6 月 1 日的作业。（如果有多个 Bob Smith，则已经在我给定的 uniqueName 中处理了）。

假设我想遵循 mongo 参考建议并使用自然主键（如果有）。有一个，但它是 2 个字段的组合。这是我应该像这样组合它们的情况吗？

```
this.id = yyyymmdd + uniqueStudentName.toLowerCase(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T17:49:52.330

使用属性组合作为主键当然是合理的。然而，与其将它们连接起来，将它们放入具有两个字段（uniqueStudentName 和 yyyymmdd）的子文档中可能更符合逻辑，该字段用作 _id。

看看这个问题，它涉及使用复合主键：

[MongoDB 组合键](https://stackoverflow.com/questions/7222062/mongodb-composite-key)

# linux - 想要从具有页眉页脚的文件中分隔数据，以便对数据进行处理以进行性能分析

> ID：12523967
> 
> 赞同：0
> 
> 时间：2012-09-21T03:45:58.777
> 
> 标签：linux, bash, shell, unix, scripting

我有一个包含页眉和页脚的文件，并且数据经过多次迭代（带有页眉和页脚），我想分隔数据并且不想要页眉页脚。我的目标是进行数据处理以进行性能分析，它只是解析部分并不顺利。

文件中的数据：

```
 09:31:56 12/13/11 r/w I/O per second KBytes per sec  Svt ms     IOSz KB     
              VVname      Cur  Avg  Max  Cur  Avg  Max Cur Avg   Cur   Avg Qlen
               admin   r    0    0    0    0    0    0 0.0 0.0   0.0   0.0    -
               admin   w   17   17   17   68   68   68 0.2 0.2   4.1   4.1    -
               admin   t   17   17   17   68   68   68 0.2 0.2   4.1   4.1    0
 z0001_app0136_s.254   r    0    0    0    0    0    0 0.0 0.0   0.0   0.0    -
 z0001_app0136_s.254   w    0    0    0    0    0    0 0.0 0.0   0.0   0.0    -
 z0001_app0136_s.254   t    0    0    0    0    0    0 0.0 0.0   0.0   0.0    0
....................
....................

-----------------------------------------------------------------------------------
  Footer            394   r   87   87      4354 4354      2.7 2.7  49.9  49.9    -
  Footer            394   w  126  126       906  906      0.1 0.1   7.2   7.2    -
  Footer            394   t  213  213      5260 5260      1.2 1.2  24.7  24.7    0
   09:32:57 12/13/11 r/w I/O per second KBytes per sec    Svt ms     IOSz KB     
              VVname      Cur  Avg  Max  Cur  Avg  Max  Cur  Avg   Cur   Avg Qlen
               admin   r    0    0    0    0    0    0  0.0  0.0   0.0   0.0    -
               admin   w   32   24   32  130   99  130  0.2  0.2   4.1   4.1    -
               admin   t   32   24   32  130   99  130  0.2  0.2   4.1   4.1    0
 z0001_app0136_s.254   r    0    0    0    0    0    0  0.0  0.0   0.0   0.0    -
 z0001_app0136_s.254   w    0    0    0    0    0    0  0.0  0.0   0.0   0.0    - 
```

文件中的数据一遍又一遍。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:18:30.297

您应该真正格式化您的输入以包含足够数量的样本数据。此外，您应该添加一些预期的输出来显示您要完成的工作。您可能还想考虑阅读和回复您问题下的评论。

也就是说，这行`GNU awk`,*可以*帮助您：

```
awk '$1 !~ /^[0-9][0-9]:[0-9][0-9]:[0-9][0-9]$/ && $1 != "VVname" && $1 != "Footer"' file.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T21:44:45.570

这是我对这个问题的看法：

```
#!/bin/bash
#
# file: 12523967.sh
# Needs at least bash version 3.x

: ${DEBUG:=0}
: ${LOGFILE:="./12523967-data.log"}

TOKENS="VVname Flag Cur_IO_s Avg_IO_s Max_IO_s Cur_KB_s Avg_KB_s Max_KB_s Cur_Svt_ms Avg_Svt_ms Cur_IOSz_KB Avg_IOSz_KB Qlen"
DREGEX="^[[:digit:]]{2}:.*$"

while IFS=, read $TOKENS; do
    ## Skip entry if empty, or contains 'Footer' or 'Timestamp' or 'VVname'
    if [[ -z $VVname || $VVname =~ $DREGEX || $VVname =~ VVname || $VVname =~ Footer ]]; then
        continue
    fi
    [[ $DEBUG -eq 1 ]] && printf "%s %s %s %s %s %s\n" \
                "$VVname $Flag" \
                "$Cur_IO_s $Avg_IO_s $Max_IO_s" \
                "$Cur_KB_s $Avg_KB_s $Max_KB_s" \
                "$Cur_Svt_ms $Avg_Svt_ms" \
                "$Cur_IOSz_KB $Avg_IOSz_KB" \
                "$Qlen"

    # [...] Do whatever you have to do with the named entries

done < <(sed -e 's/^ *//g;s/  */,/g;s/^[\.-]*//g;' $LOGFILE) 
```

使用您的示例（包括 '...' 和 '---' 行，因为我不太确定它们是否构成您的日志文件输出的一部分），调用`DEBUG=1`通过其字段名称打印出解析的行：

```
$ DEBUG=1 ./12523967-parse.sh 
    admin r 0 0 0 0 0 0 0.0 0.0 0.0 0.0  -
    admin w 17 17 17 68 68 68 0.2 0.2 4.1 4.1  -
    admin t 17 17 17 68 68 68 0.2 0.2 4.1 4.1  0
    z0001_app0136_s.254 r 0 0 0 0 0 0 0.0 0.0 0.0 0.0  -
    z0001_app0136_s.254 w 0 0 0 0 0 0 0.0 0.0 0.0 0.0  -
    z0001_app0136_s.254 t 0 0 0 0 0 0 0.0 0.0 0.0 0.0  0
    admin r 0 0 0 0 0 0 0.0 0.0 0.0 0.0  -
    admin w 32 24 32 130 99 130 0.2 0.2 4.1 4.1  -
    admin t 32 24 32 130 99 130 0.2 0.2 4.1 4.1  0
    z0001_app0136_s.254 r 0 0 0 0 0 0 0.0 0.0 0.0 0.0  -
    z0001_app0136_s.254 w 0 0 0 0 0 0 0.0 0.0 0.0 0.0  - 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T04:01:29.193

清理此类数据的常用方法是使用 grep，选择您想要的数据或排除您不想要的数据。在这种情况下，看起来所有需要的行都有一个字母（r、t 或 w），每边都有一个空格，而不需要的行都没有。（*编辑：*稍后将页脚行添加到问题中，因此`grep -v`添加了命令以排除页脚。）

如果数据在文件 d 中，你会说：

```
grep ' [rtw] ' d | grep -v Footer 
```

这将选择数据行，但不会选择页眉、页脚或空白行。要使用数据创建一个名为 t 的文件，请说：

```
grep ' [rtw] ' d | grep -v Footer > t 
```

如果实际数据（与出现问题的数据相比）使用制表符或空格而不是空格，则使用`'[[:space:]][rtw][[:space:]]'`作为搜索字符串而不是`' [rtw] '`. 此外，不使用 -i 时，grep 区分大小写。如果要排除的术语以两种方式出现（有时为大写，有时为小写），请使用grep 选项`-iv`而不是：`-v`

```
grep '[[:space:]][rtw][[:space:]]' d  | grep -iv footer > t 
```

# c++ - 为什么 std::function 在签名中接受 this 引用？

> ID：12523970
> 
> 赞同：7
> 
> 时间：2012-09-21T03:46:10.370
> 
> 标签：c++, function, this

成员函数有一个隐式`this`指针参数。那么，为什么要`std::function`接受这个签名，其中 S 是一个简单的类呢？（[完整样本](http://liveworkspace.org/code/aec1faad3eb51c99acc333ed63664434)）

```
std::function<void(S &)> func = &S::foo; 
```

调用它也有效，并且可以区分对象：

```
S s1 = {5};
S s2 = {6};

func(s1); //prints 5
func(s2); //prints 6 
```

我通常期望的是它需要一个指针，它也可以工作：（[完整示例](http://liveworkspace.org/code/a74d103816d0f3c261e8b3d501d95b00)）

```
std::function<void(S * const)> func = &S::foo;

S s1 = {5};
S s2 = {6};

func(&s1); //prints 5
func(&s2); //prints 6 
```

`this`当隐式参数是指针时，当我将引用传递给成员函数时，为什么第一个工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T04:06:53.877

因为`std::function`设计正确。事实上，它`this`是一个指针是历史的偶然，也是成员函数内部的一个细节。该事实不应影响功能用户的设计决策。

当签名中的第一个参数类型是引用时，设计者`std::function`正确地决定接受成员函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T04:07:04.533

`std::function<SIG>`可以由许多行为类似函数的事物构造而成，并将它们转换为适当的`std::function`对象。

在这种情况下`void S::foo()`，它的行为很像一个函数`void foo_x(S&)`（因为它们都需要`S`调用，并且可能修改`S`，什么都不返回）。因此`std::function<void(S&)>`提供了一个构造函数，用于将成员函数转换为函数对象。IE

```
std::function<void(S &)> func = &S::foo; 
```

使用构造函数，例如`std::function<void(S&)>( void(S::)() )`，来创建等效于：

```
void foo_x(S & s ) { return s.foo(); }
std::function<void(S&)> func = foo_x; 
```

相似地，

```
std::function<void(S * const)> func = &S::foo; 
```

相当于

```
void foo_x(S * const s ) { return s->foo(); }
std::function<void(S* const )> func = foo_x; 
```

通过像`std::function<void(S* const )>( void(S::)() )`.

# xml - 用于在 xml 中查找和替换值的 Shell 脚本

> ID：12523972
> 
> 赞同：1
> 
> 时间：2012-09-21T03:46:21.890
> 
> 标签：xml, shell, scripting, sed, awk

我有一个名为 config.xml 的 xml 配置文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<config>
   <server-ip>192.168.1.45</server-ip>
   <server-port>1209</server-port>
   <repository-temp-path>/home/john</repository-temp-path>
</config> 
```

我有一个 shell 脚本，用 $1、$2、$3 配置“server-ip”、“server-port”和“import-path”的值：

```
#!/bin/sh
if [ $# -ne 3 ];then
echo "usage: argument 1:IP_Address 2:Server_PORT 3:Temp_PATH"
exit 1
fi
IP=$1
PORT=$2
DIRT=$3

echo "Change values in config.xml..."

sed "s/<server-ip>.*<\/server-ip>/<server-ip>$IP<\/server-ip>/;s/<server-port>.*<\/server-port>/<server-port>$PORT<\/server-port>/;s/<repository-temp-path>.*<\/repository-temp-path>/<repository-temp-path>$DIRT<\/repository-temp-path>/" config.xml > config2.xml

echo "Done." 
```

但它只适用于“ **$ ./abc.sh abc** ”，不适用于“ **$ ./abc.sh 192.168.1.6 9909 /home/bbb** ”....你能帮忙让它工作并结束有更好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T04:18:56.137

XML + 外壳 = [XMLStarlet](http://xmlstar.sourceforge.net/)

```
$ xmlstarlet ed -u /config/server-ip -v 192.168.1.6 -u /config/server-port -v 9909 -u /config/repository-temp-path -v /home/bbb input.xml
<?xml version="1.0" encoding="UTF-8"?>
<config>
  <server-ip>192.168.1.6</server-ip>
  <server-port>9909</server-port>
  <repository-temp-path>/home/bbb</repository-temp-path>
</config> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T05:07:58.240

这可能对您有用：

```
#!/bin/sh
if [ $# -ne 3 ];then
echo "usage: argument 1:IP_Address 2:Server_PORT 3:Temp_PATH"
exit 1
fi
IP=$1
PORT=$2
DIRT=$3

echo "Change values in config.xml..."

cat <<EOF >config2.xml
<?xml version="1.0" encoding="UTF-8"?>
<config>
   <server-ip>${IP}</server-ip>
   <server-port>${PORT}</server-port>
   <repository-temp-path>${DIRT}</repository-temp-path>
</config>
EOF  

echo "Done." 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T04:15:51.607

/home/bbb 中的斜线将其丢弃（我假设您遇到了与我相同的问题，因为您没有说明*为什么*它不起作用）。

如果您对输入有信心，您可以先转义斜线。为此启动 perl、ruby 等可能会更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T04:25:34.443

我真的建议使用 xmlstarlet 之类的东西。(http://xmlstar.sourceforge.net/) 对于原始问题，句点和“/”被替换为 sed 命令。他们需要被逃脱，但你不可能知道他们是否会存在。如果可以的话，我会更深入地研究它，但使用 xmlstarlet 或除 sed 之外的其他用于 xml 的工具。

# jquery - Javascript：在ajax请求的成功函数内部打破循环

> ID：12523986
> 
> 赞同：1
> 
> 时间：2012-09-21T03:48:58.910
> 
> 标签：jquery, ajax, httprequest

我需要发送一个 $.ajax 请求并检查响应 HTML 以查看它是否包含某些文本。如果确实如此，我想执行一个单独的函数并打破当前循环，这样它就不会继续请求其他项目。

我知道我不能打破成功函数内部的循环，因为它在它自己的范围内。任何解决方案都会很棒。

```
 for(var i in list) {

      var item = list[i];

      $.ajax({
            type: 'POST',
            url: baseURL + '/ChangeItems/CheckAvailability',
            data: { 'newitem': item, 'purchaseItem': false },
            error: function(jqXHR, textStatus) { alert(textStatus); },
            dataType: 'text',
            success: function(data) { if(checkItem(data)) { buyItem(); break; } }
        });
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T03:57:52.307

我没有测试过这段代码，但我认为这是一个想法，它应该可以工作。

```
var list = [...], i = 0;
function myAjaxRequest(i)
{ 
    var item = list[i];

    $.ajax({
        ...
        success: function(data)
        {
            if( checkItem(data) )
            {
                buyItem();
            }
            else if( typeof list[i+1] != "undefined" )
            {
                 myAjaxRequest(i+1);
            }
        }
        //, error: function(){ if( typeof list[i+1] != "undefined" ) myAjaxRequest(); }
    });
}

myAjaxRequest(i); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T03:56:05.507

您可以使其同步并在 $.ajax 之外进行处理：

```
for(var i in list) {
  var item = list[i];
  var result;

  $.ajax({
        type: 'POST',
        url: baseURL + '/ChangeItems/CheckAvailability',
        data: { 'newitem': item, 'purchaseItem': false },
        error: function(jqXHR, textStatus) { alert(textStatus); },
        dataType: 'text',
        async: false,
        success: function(data) { result = data; }
   });

   if(checkItem(result)) { buyItem(); break; }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-13T03:53:29.983

测试一下，我遇到了这个问题，我现在解决了：

```
$break=0;
 for(var i in list) {
     if ($break) { break; }
      var item = list[i];
      $.ajax({
            type: 'POST',
            url: baseURL + '/ChangeItems/CheckAvailability',
            data: { 'newitem': item, 'purchaseItem': false },
            error: function(jqXHR, textStatus) { alert(textStatus); },
            dataType: 'text',
            success: function(data) { if(checkItem(data)) { buyItem(); $break = 1; } }
        });
   } 
```

不可能打破 ajax 响应中的循环。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-21T04:01:56.277

您可以将异步请求中的每个 xhr 对象存储在一个数组中，并在其中一个成功完成后取消所有以下请求。

```
var xhrList = [];
var xhr = $.ajax({
    type: 'POST',
    url: baseURL + '/ChangeItems/CheckAvailability',
    data: { 'newitem': item, 'purchaseItem': false },
    error: function(jqXHR, textStatus) { alert(textStatus); },
    dataType: 'text',
    async: false,
    success: function(data) { 
        for(var i = 0; i < xhrList.length; i++){
            xhrList[i].abort();
        } 
    }
});
xhrList.push(xhr); 
```

# c# - 将数据集（.xsd 文件？）同步到 mySQL

> ID：12523991
> 
> 赞同：2
> 
> 时间：2012-09-21T03:49:59.600
> 
> 标签：c#, mysql, xsd, dataset

使用 Microsoft Visual Studio 2010 和 MySQL 5.2.40，如何在 MySQL 中进行更改后让 Visual c# 自行更新？

我只是在 MySQL 中的表中添加了一个列（使用上下文菜单中的编辑表……Alter Table 对我不可用……这可能是问题吗？）然后我无法让 Visual Studio 更新它是要“刷新”的数据集，xsd 文件。如果我在 xsd 中添加自己的那一列并运行简单的 CRUD 以查看它是否有效...... mySQL 数据库中没有保存任何数据。

没有刷新按钮，没有手动添加工作。这应该很简单，但我现在迫切希望找到如何去做。

“不要忘记保存和转发 mySQL 更改”不会是我的问题的答案......我仔细检查了。

——一个新手

# security - 在 Jelly Bean 上运行本机 ARM 可执行文件

> ID：12523992
> 
> 赞同：13
> 
> 时间：2012-09-19T14:40:07.967
> 
> 标签：security, android-ndk, adb

我正在寻找在 Android 4.1 (Jelly Bean) 上运行本机 ARM 可执行文件的方法。例如，编译经典的 C 程序

```
// hello.c
#include <stdio.h>
int main() {
    printf("Hello world");
} 
```

到 ARMv7a 可执行文件，比如`hello`使用 Android NDK，然后在 Android shell 中运行它。`/data/local`我尝试了网络上建议的方法，例如将可执行文件推送到

```
adb push hello /data/local 
```

更改权限以允许其执行

```
adb shell chmod 755 /data/local/hello 
```

然后在 shell 中使用

```
adb shell /data/local/hello 
```

最后一步失败并出现错误：

```
/data/local/hello: not found 
```

但显然文件在那里。我怀疑问题在于 Jelly Bean 的外壳不再允许执行*外星*二进制文件。谁能证实这一点并给我一个解决方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T20:57:24.810

如果要在 Android 中运行本机 ARM 二进制文件，则必须使用**-static**进行编译。

您用于构建的*libc*（如果使用标准 ARM 工具链而不是 Android NDK）与 Android 的*libc*（仿生）不同，因此当您的二进制文件打算动态链接到目标上的*libc*时，它不会因为*libc*不存在目标。

使用**-static选项，您可以在构建时从***libc*中链接您需要的内容，而不必担心动态链接内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T11:02:49.413

检查 adb push 是否没有转储“权限被拒绝”错误。通过运行检查文件是否存在： adb shell ls /data/local

由于我更新到 4.0.4，我无法访问 /data/local，只能访问 /data/local/tmp，这可以解释“未找到”错误。

# ios - PhoneGap & Facebook Connect - 如何在“无域”环境中实施？[发生了一个错误。请稍后重试]

> ID：12523994
> 
> 赞同：0
> 
> 时间：2012-09-21T03:50:43.803
> 
> 标签：ios, facebook, cordova

我正在为 iOS 使用 PhoneGap 2.0 并试图让 FB JS SDK 工作。我正在使用以下参数异步加载 SDK：

```
 window.fbAsyncInit = function() {
            FB.init({
                appId : 'xxxx', // App ID
                status : true, // check login status
                cookie : true, // enable cookies to allow the server to access the session
                xfbml : true  // parse XFBML
            });   
        .... 
```

我有一个绑定到“localhost”的 Facebook 应用程序。当我使用 XCode 模拟器测试页面或从我的文件系统在浏览器（Firefox、Chrome 等）中打开我的 index.html 页面时，我得到：

“[APPNAME] 发生错误。请稍后再试。”

如果我通过本地 apache 实例 (localhost:8080/index.html) 访问同一个文件，它就可以正常工作。

我注意到 FB 弹出窗口的 URL 在查询字符串中传递了您的域。在 localhost:8080 上，它通过“domain=localhost”。但在 Xcode 和文件系统中，它通过 "domain=" 并每次都给出上述错误。

是否有正确的方法来配置 FB 应用程序以在“无域”上下文中工作，或者您是否会以不同的方式设置 FB.init？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T02:31:54.850

查看 Facebook Connect 插件： [https](https://github.com/davejohnson/phonegap-plugin-facebook-connect) ://github.com/davejohnson/phonegap-plugin-facebook-connect （如果与 Facebook SDK 3.0 for iOS 一起使用，请检查分支，cordova-2.0-facebook-ios-3.0 )

看看那是不是你要找的。该插件需要针对刚刚发布的 Facebook SDK 3.1 进行更新，但仍然应该可以正常工作。唯一的问题是，如果您在 iOS6 上运行，它不会在不进行一些更改的情况下针对本机 iOS6 凭据进行身份验证。它将通过快速应用程序切换到 FB iOS 应用程序或 FB Web 应用程序进行身份验证。

# c# - 未声明配置元素

> ID：12523996
> 
> 赞同：97
> 
> 时间：2012-09-21T03:50:56.670
> 
> 标签：c#, xml, app-config

我在 Visual Studio 2012 Express Edition 中做一些工作。我添加了一个 App.config XML 文件，如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
</configuration> 
```

发生的第一件事是出现“未声明‘配置’元素”的警告。有谁知道为什么会这样？在解决此问题之前，似乎无法在其中声明元素。

谢谢！

这是整个 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
<appSettings>
<add key="Version" value="779" />
<add key="TimeOut" value="60000" />
<add key="LogFileName" value="Log.txt" />
<!-- your Developer Id with eBay -->
<add key="Environment.DevId" value="" />
<!-- your Application Id with eBay -->
<add key="Environment.AppId" value="" />
<!-- your Application Certificate with eBay -->
<add key="Environment.CertId" value="" />
<!-- API Server URL -->
<!-- For production site use: https://api.ebay.com/wsapi -->
<!-- For Sandbox use: https://api.sandbox.ebay.com/wsapi -->
<add key="Environment.ApiServerUrl" value="https://api.sandbox.ebay.com/wsapi" />
<!-- EPS Server URL -->
<!-- For production site use: https://api.ebay.com/ws/api.dll"/-->
<add key="Environment.EpsServerUrl" value="https://api.sandbox.ebay.com/ws/api.dll" />
<!-- eBay Signin URL -->
<!-- For production site use: https://signin.ebay.com/ws/eBayISAPI.dll?SignIn -->
<!-- https://signin.sandbox.ebay.com/ws/eBayISAPI.dll?SignIn -->
<add key="Environment.SignInUrl" value="https://signin.sandbox.ebay.com/ws/eBayISAPI.dll?SignIn" />
<!-- ViewItem URL -->
<!-- For production site use: http://cgi.ebay.com/ws/eBayISAPI.dll?ViewItem&amp;item={0} -->
<add key="Environment.ViewItemUrl" value="http://cgi.sandbox.ebay.com/ws/eBayISAPI.dll?ViewItem&amp;item={0}" />
<!-- token is for both API server and EPS server -->
<add key="UserAccount.ApiToken" value="" />
<!-- eBay site ID -->
<add key="UserAccount.eBayUserSiteId" value="0" />
<add key="logexception" value="true"/>
<add key="logmessages" value="true"/>
<add key="logsdkmessages" value="true"/>
<add key="logsdk" value="true"/>
<add key="logfile" value="Log.txt"/>
<!-- Rule Name-->
<add key="RuName" value=""/>
<!-- Set this if you access eBay API server behind a proxy server-->
<add key="Proxy.Host" value =""/>
<add key="Proxy.Port" value =""/>
<!-- set proxy server username/password if necessary-->
<add key="Proxy.Username" value=""/>
<add key="Proxy.Password" value=""/> 
```

* * *

## 回答 #1

> 赞同：363
> 
> 时间：2015-08-20T10:43:59.237

转到 XML 菜单（visual studio 顶部菜单项）选择模式并找到**DotNetConfig.xsd**并选择**Use this schema**。

[![XML - 模式](../Images/2d0aa4aed3da6ab962290ace0207e114.png)](https://i.stack.imgur.com/0lSVO.png)

[![编辑 XML 架构](../Images/cf18ee2baff5628b2fc1e98bbe0ac4d6.png)](https://i.stack.imgur.com/6v6QL.png)

你的问题肯定会解决

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-09-21T03:57:11.253

```
<configuration xmlns="schema URL">
   <!-- configuration settings -->
</configuration> 
```

**做改变，像上面一样并尝试**

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2013-05-05T14:14:57.663

我遇到过同样的问题。这不是一个错误，它只是一个警告；所以你的应用程序仍然应该编译。我使用了以下简单的配置文件，但仍然会产生警告。

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <startup> 
        <supportedRuntime 
             version="v4.0"sku=".NETFramework,
             Version=v4.5"/>
    </startup>
</configuration> 
```

这是MSDN网站上提出的一个问题，但似乎并没有得到满意的解决。请参阅下面的链接：

[http://social.msdn.microsoft.com/Forums/en-US/Vsexpressvcs/thread/18a1074f-668f-4fe3-a8d9-4440db797439](http://social.msdn.microsoft.com/Forums/en-US/Vsexpressvcs/thread/18a1074f-668f-4fe3-a8d9-4440db797439)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-01-06T20:48:26.340

我必须 -> 转到 XML 菜单（Visual Studio 顶部菜单项）选择模式并选择 DotNetConfig.xsd AND RazorCustomSchema.xsd AND EntityFrameworkConfig_6_1_0.xsd

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-10T22:51:45.277

在处理 xaml 项目时，我刚刚在自动生成的 xml 文件中弹出此警告。

使用 Debug->Clean Solution 和 Debug->Rebuild Solution 修复它。可能想在喜欢架构之前尝试一下。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-29T05:38:14.463

Visual Studio 2013 Express Edition 缺少 DotNetConfig.xsd ( [https://connect.microsoft.com/VisualStudio/feedback/details/817322/dotnetconfig-xsd-files-not-present-in-vs-2013-express-for-桌面](https://connect.microsoft.com/VisualStudio/feedback/details/817322/dotnetconfig-xsd-files-not-present-in-vs-2013-express-for-desktop)）。

所以要摆脱 VS 2013 Express 中的警告：

*   从另一个系统或网络获取 DotNetConfig.xsd 的副本（我使用了[https://gist.github.com/eed3si9n/5dd7dd98ad2b3f668928b23477de35a3](https://gist.github.com/eed3si9n/5dd7dd98ad2b3f668928b23477de35a3)）
*   下载到 C:\Program Files (x86)\Microsoft Visual Studio 12.0\Xml\Schemas
*   在罗摩克里希纳的回答之后添加模式

警告应该消失了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-27T05:05:31.193

选择使用此架构。点网配置.xsd

XLM 菜单.....Visual Studio

完美运行。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-08-28T07:15:27.767

我的驱动器上的空间较少，这可能导致我的应用程序解决方案加载不完整。我在驱动器上创建了一些空间后，这个“配置元素未声明”问题得到了解决。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-07-13T16:54:44.537

我也得到了同样的警告。经过一段时间的思考，我意识到我在使用 SQL（MS SQL）时出错了。

```
Warning: the 'configuration' element is not declared 
```

使用 C#

应用程序配置代码：

```
<connectionStrings>
    <add name="dbx" connectionString="Data Source=ServerNameHere;Initial Catalog=DatabaseNameHere;Integrated Security=True" providerName="System.Data.SqlClient"/>
</connectionStrings> 
```

*这会在 connectionStrings 中调用数据库名称，当我插入我的 SQL 代码作为练习时，我总是使用数据库名称、模式，然后是表。由于我是初学者，因此这种做法在 Visual Studio 中并没有很好地延续。我从我的 SQL 语法中删除了数据库名称，并且只从模式、数据表中调用。这为我解决了这个问题。

表格.CS：

```
 using (SqlCommand cmd = new SqlCommand("SELECT * FROM [DatabaseName].[Schema].[TableName] WHERE [MEPeriod] = '2020-06-01'", con)) 
```

更新为：

```
using (SqlCommand cmd = new SqlCommand("SELECT * FROM [Schema].[TableName] WHERE [MEPeriod] = '2020-06-01'", con)) 
```

这对我有用，我希望这对我有用。

# python - 鉴于我们要设计 django polls 应用程序，我们如何依次进行 BDD

> ID：12523999
> 
> 赞同：1
> 
> 时间：2012-09-21T03:51:23.477
> 
> 标签：python, django, tdd, cucumber, bdd

我来自 python/django 背景。

我一直在阅读有关 BDD 的内容，以及为什么它比 TDD 更棒。但我想到的几个疑问是，做 BDD 的理想方法是什么？是否排除编写单元测试？是否排除进行集成测试？我找不到实现 BDD 的答案或有组织的顺序路径。

对于通过 TDD 设计[django 民意调查应用程序](https://docs.djangoproject.com/en/dev/intro/tutorial01/)，我将如下所示：

1.  为模型编写测试，然后使测试通过。

2.  为表单编写测试，然后让它们通过。

3.  为视图编写测试，然后让它们通过。

4.  为自定义模板标签和中间件编写任何其他测试，并让它们通过。

5.  从我开始编写视图开始，继续逐步编写集成测试。

根据我的阅读，我可以得出的是，如果我设计一个 django 民意调查应用程序，我必须遵循的过程如下：

1.  用小黄瓜语法编写场景

2.  编写步骤

3.  在步骤中可能使用一些断言（单元），基于 ui 响应（集成）

4.  不确定，下一步做什么/如何做，甚至第 3 部分是正确的。

请帮助我消除我的困惑，并提出一个简短的大纲，

请让我知道，我该如何继续。[当我们执行django polls 应用程序](https://docs.djangoproject.com/en/dev/intro/tutorial01/)时，尝试 BDD 的顺序方法是什么。

（我希望这个问题不是一个主观的问题，所以这是一个很好的提问地方，如果不是，请不要杀了我。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:03:50.860

虽然 BDD 包含一些特定的技术实践（如场景引导的自动化、由外而内的开发、单元测试等），但其主要目标是改善项目内的沟通（包括非技术利益相关者）。

您首先收集规范 - 以示例的形式 - 通过与利益相关者讨论。这可以通过多种方式完成，这里最重要的是*交谈*。在这些讨论中，不要强迫他们或你自己编写小黄瓜有效的场景。只需捕获预期*行为*以及验收标准（即系统必须遵循的约束）。

然后，您将正式确定方案，并 - 理想情况下 - 与业务人员一起审查它们。这个阶段很有趣，因为它将验证您（和团队）对规范的理解。你经常最终意识到你做了错误的假设:)

当您定义了一堆规范（特性）并就它们的优先级达成一致后，您就可以开始实际的开发过程了。

我通常的工作方式是这样的：

1.  运行一个场景，看它的第一步 undefined；
2.  为该步骤添加步骤定义；
3.  再次运行，看到它因为缺少实现而失败；
4.  为缺少的系统行为编写一个单元测试/规范；
5.  运行测试，发现失败；
6.  让它通过；
7.  重构你的代码；
8.  再次运行场景
    *   如果某个步骤失败，请转到 #4
    *   否则，如果未定义步骤，请转到＃2
    *   否则你已经完成了这个场景，转到下一个:)

这基本上是由外而内的发展。您可能已经注意到，第 4 步到第 7 步是通常的 TDD 循环。此工作流程的一个好处是您的 TDD 周期得到正确引导：您不必考虑下一步该做什么。由于场景故障堆栈跟踪，实际的下一个所需行为会明确显示给您。

当然，这是*一种*做事方式。没有什么是一成不变的，你可以调整事情。